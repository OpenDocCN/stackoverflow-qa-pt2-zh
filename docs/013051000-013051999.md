# StackOverflow 问答 13051000-13051999

# dependency-injection - 有没有办法使用 PostSharp 使构造函数参数在类级别可见？

> ID：13051000
> 
> 赞同：3
> 
> 时间：2012-10-24T14:09:47.910
> 
> 标签：dependency-injection, constructor, postsharp, aop

假设我有很多这样的样板代码：

```
class MyClass
{
    private readonly IDependencyA dependencyA;
    private readonly IDependencyB dependencyB;

    public MyClass(
        IDependencyA dependencyA,
        IDependencyB dependencyB)
    {
        if(dependencyA == null) throw ArgumentNullException("dependencyA");
        if(dependencyB == null) throw ArgumentNullException("dependencyB");
        this.dependencyA = dependencyA;
        this.dependencyB = dependencyB;

        ...
    }

    ...

    public void SomeMethod()
    {
        this.dependencyA.DoSomething(this.dependencyB);
    }
} 
```

有没有办法使用 PostSharp 之类的东西来删除样板代码并使其看起来像这样：

```
class MyClass
{
    [ConstructorParametersAreClassMembers]
    public MyClass(
        IDependencyA dependencyA,
        IDependencyB dependencyB)
    {
        ...
    }

    ...

    public void SomeMethod()
    {
        this.dependencyA.DoSomething(this.dependencyB);
    }
} 
```

这甚至可能吗？

另外：这实际上是它在 F# 中默认的工作方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:22:39.157

这是可能的，但不是一个非常有吸引力的方法。我理解这种痛苦。在这一点上，我发现 C# 有点冗长。应用 SOLID 原则时，您会获得许多小型且重点突出的课程。由于它们很小，因此编写构造函数的开销变得更大。

但您也可以创建一个 T4 模板来为您生成构造函数，而不是使用 PostSharp 之类的代码编织工具。有一个[T4ConstructorGenerator](http://nuget.org/packages/T4ConstructorGenerator) NuGet 包可以将 T4​​ 模板添加到您的项目中，从而为您生成构造函数。

使用此模板，以下类：

```
public class SomeService
{
    private readonly ITimeProvider timeProvider;
    private readonly ILogger logger;
    private readonly IOrderCalculator calculator;
    private readonly IMailSender mailSender;

    public void SomeMethod()
    {
        // using the dependencies
    }
} 
```

将得到以下构造函数：

```
 public SomeService(
        ITimeProvider timeProvider,
        ILogger logger,
        IOrderCalculator calculator,
        IMailSender mailSender)
    {
        if (timeProvider == null) throw new ArgumentNullException("timeProvider");
        if (logger == null)  throw new ArgumentNullException("logger");
        if (calculator == null) throw new ArgumentNullException("calculator");
        if (mailSender == null) throw new ArgumentNullException("mailSender");

        this.timeProvider = timeProvider;
        this.logger = logger;
        this.calculator = calculator;
        this.mailSender = mailSender;

        this.OnCreated();
    }

    partial void OnCreated(); 
```

模板通过添加部分类来做到这一点，因此其余的原始代码不会受到影响。模板只会在以下情况下添加构造函数：

*   该类（及其相应的部分类）没有定义任何构造函数。
*   该类不是静态的。
*   该类包含一个或多个私有字段。

如果你的构造函数经常包含额外的初始化（实际上在进行依赖注入时应该很少见），你可以简单地`OnCreated`在真实类中实现部分方法，如下所示：

```
partial void OnCreated()
{
    // do logic here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:29:26.610

这只是一种方法中的防御性编程，PostSharp 或其他 AOP 工具当然可以处理，但我查看了该代码，这似乎是架构中出现其他问题的症状。

您是否在使用控制反转容器/依赖注入工具（如 StructureMap、Ninject 等）？如果是这样，那么它应该为你处理连接依赖关系，如果你忘记连接一些东西，它会抛出异常。因此，这减少了对所有防御性编程的需求，同时仍然允许您将其他初始化代码放入构造函数中。

# facebook - 新的 FB 通知 API 1:1 发送给 19k 用户

> ID：13051004
> 
> 赞同：0
> 
> 时间：2012-10-24T14:10:16.870
> 
> 标签：facebook, notifications

我在通过 CURL 向 19k 用户发送通知时遇到问题。

新的 FB 应用程序通知 API 是金矿，所以我在我的应用程序中实现了一个系统，当他的朋友得分高于他时通知玩家。问题是应用程序必须通过 curl 发送 19k 条通知，这需要大约 950 小时。是否有更快的解决方案来发送这些通知？我的意思是我已经看到大多数大玩家（比如 zynga）都成功地使用了应用程序通知，我不认为他们发送的通知比我少:)

这是我的代码

```
    函数 _getAppToken(){
            $APPLICATION_ID = "xxxxxxx";
            $APPLICATION_SECRET = "xxxxxxxx";

            $token_url = "https://graph.facebook.com/oauth/access_token?" .
                “client_id=”。$APPLICATION_ID 。
                “&client_secret=”。$APPLICATION_SECRET 。
                "&grant_type=client_credentials";
            //$app_token = file_get_contents($token_url);
            $accessToken = explode('=', file_get_contents($token_url));
            返回 $accessToken[1];
        }

```

```
    函数 _curlDoNotifications($fb_id, $tokennn, $mesaj, $hrf = '')
        {
            $附件 = 数组（
                'access_token' => $tokennn,
                'href' => $hrf,
                '模板' => $mesaj
            );

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/' . $fb_id . '/notifications');
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
            curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
            curl_setopt($ch, CURLOPT_POST, true);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, false); //抑制卷曲输出
            $result = curl_exec($ch);
            curl_close($ch);
            返回$结果；
        }

```

第一个函数获取应用令牌并使用它通过第二个函数（curl）发送通知。

foreach 用户安装了应用程序并且必须通知我应用这两个功能。问题是第二个功能持续〜3秒/用户

谢谢

稍后编辑：api批量发送是答案:)一次最多可以发送50个通知

# linq - 从 T-SQL 将 datepart 转换为 LINQ

> ID：13051005
> 
> 赞同：1
> 
> 时间：2012-10-24T14:10:25.100
> 
> 标签：linq, tsql

我正在尝试获取上周和 2 周前从周日到周六的日期范围，所以今天是 10/24/2012，日期范围是：10/21/2012 - 10/27/2012

我正在尝试获取上周的日期范围，即：10/14/2012 - 10/20/2012
还有两周前的日期范围：10/07/2012 - 10/13/2012

我有正确的 SQL 查询，即

```
DECLARE @TodayDayOfWeek INT
DECLARE @EndOfPrevWeek DateTime
DECLARE @StartOfPrevWeek DateTime
DECLARE @EndOf2WeeksAgo DateTime
DECLARE @Start2WeeksAgo DateTime

SET @TodayDayOfWeek = datepart(dw, GetDate())
--get the last day of the previous week (last Sunday)
SET @EndOfPrevWeek = DATEADD(dd, -@TodayDayOfWeek, GetDate())
--get the first day of the previous week (the Monday before last)
SET @StartOfPrevWeek = DATEADD(dd, -(@TodayDayOfWeek+6), GetDate())
SET @EndOf2WeeksAgo = DATEADD(dd, -(@TodayDayOfWeek+7), GetDate())
SET @Start2WeeksAgo = DATEADD(dd, -(@TodayDayOfWeek+13), GetDate())

Select  @StartOfPrevWeek as [Last week start date], @EndOfPrevWeek as [Last Week start date],
@Start2WeeksAgo as [2 Weeks Ago Start], @EndOf2WeeksAgo as [2 Weeks Ago End] 
```

这导致

```
[Last week start date] [Last week start date]  [2 Weeks Ago Start] [2 Weeks Ago End] 
10/14/2012             10/20/2012              10/07/2012          10/13/2012 
```

我如何将其转换为 Linq？我有一个日期列，需要显示这两个日期范围之间的日期，例如

```
last week date   2 weeks ago
10/15/2012        10/08/2012
10/18/2012        10/11/2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:34:16.037

以下是我编写的一个简单的控制台应用程序，它向您展示了完成任务的一种方法。只需根据您的需要调整它...

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Test> testData = new List<Test>() {
                new Test() { Id = 1, Date = DateTime.Now.AddDays(-9) },
                new Test() { Id = 2, Date = DateTime.Now.AddDays(-8) },
                new Test() { Id = 3, Date = DateTime.Now.AddDays(-16) },
                new Test() { Id = 4, Date = DateTime.Now.AddDays(-14) },
                new Test() { Id = 5, Date = DateTime.Now.AddDays(-15) },
                new Test() { Id = 6, Date = DateTime.Now.AddDays(-10) },
                new Test() { Id = 7, Date = DateTime.Now.AddDays(-7) }
            };

              DateTime date = DateTime.Now; // 10/24/2012

              DateTime startOneWeekAgo =
                  // prev Sunday 10/14/2012 00:00
                  date.AddDays(-7).Date.AddDays(-(int)date.DayOfWeek),

                  // next Sunday 10/21/2012 00:00
                  endOneWeekAgo = startOneWeekAgo.AddDays(7);

              DateTime startTwoWeeksAgo =
                  // prev Sunday 10/07/2012 00:00
                  startOneWeekAgo.AddDays(-7),

                  // next Sunday 10/14/2012 00:00
                  endTwoWeeksAgo = endOneWeekAgo.AddDays(-7);

            var qryOneWeekAgo =
                            from record in testData
                            where record.Date >= startOneWeekAgo // include start
                            && record.Date < endOneWeekAgo // exclude end
                            select record;

            var qryTwoWeeksAgo =
                             from record in testData
                             where record.Date >= startTwoWeeksAgo // include start
                             && record.Date < endTwoWeeksAgo // exclude end
                             select record;

            Console.WriteLine("------- Dates from 1 Week Ago -------");
            foreach (var record in qryOneWeekAgo)
            {
                Console.WriteLine(
                    string.Format("{0} => {1}", record.Id, record.Date));
            }

            Console.WriteLine();

            Console.WriteLine("------- Dates from 2 Weeks Ago -------");
            foreach (var record in qryTwoWeeksAgo)
            {
                Console.WriteLine(
                    string.Format("{0} => {1}", record.Id, record.Date));
            }

            Console.ReadKey();

        }         
    }

    public class Test
    {
        public int Id { get; set; }
        public DateTime Date { get; set; }
    }

} 
```

**输出**

```
------- Dates from 1 Week Ago -------
1 => 10/15/2012 12:52:38 PM
2 => 10/16/2012 12:52:38 PM
6 => 10/14/2012 12:52:38 PM
7 => 10/17/2012 12:52:38 PM

------- Dates from 2 Weeks Ago -------
3 => 10/8/2012 12:52:38 PM
4 => 10/10/2012 12:52:38 PM
5 => 10/9/2012 12:52:38 PM 
```

# asp.net - 尝试在 vb 中的 asp.net 中实现 AJAX，但其中一页未保存到 SQL 数据库

> ID：13051007
> 
> 赞同：0
> 
> 时间：2012-10-24T14:10:28.237
> 
> 标签：asp.net, vb.net, jquery

我有一个创建销售人员的工作页面，我使用了 AJAX，所以留在管理页面并加载创建页面，现在我的创建页面没有保存到数据库中。我没有收到任何错误，它根本无法保存。我是 AJAX 的新手，我确信我遗漏了一些东西，但我已经搜索了一段时间并且需要帮助。这是我的管理页面代码。

```
 <%@ Page Title="" Language="vb" AutoEventWireup="false"
MasterPageFile="~/Site.Master" CodeBehind="AdminPage.aspx.vb" Inherits="PyriteGoldPresentation.AdminPage" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<script src="../Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script src="../Scripts/PyriteGoldAjax.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id = "Main">
    <input type="button" id="ViewAllUsers" value="View All Users" />
    <input type="button" id="AddItem" value = "Add Item" />
    <input type="button" id="CreateSalesAccount" value="Create A Sales Account" />
    <input type="button" id="ViewAllOrderHistory" value="View Order History" />
</div>
</asp:Content>

     Public Class AdminPage
Inherits System.Web.UI.Page 
```

页面背后的代码。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

End Class 
```

这是我使用的 AJAX。

```
 $(document).ready(function () {
$('#CreateSalesAccount').click(function () {
    $.ajax({
        type: 'POST',
        url: "/admin/CreateSalesAccount.aspx",
        success: function (result) {
            var main = $('#Main');
            main.fadeTo('fast', .01);
            main.html($('#Main', result).html());
            main.fadeTo('fast', 1);
        }
    });
});
});

    <%@ Page Title="" Language="vb" AutoEventWireup="false"    MasterPageFile="~/Site.Master" CodeBehind="CreateSalesAccount.aspx.vb"  Inherits="PyriteGoldPresentation.CreateSalesAccount"%>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<script src="../Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script src="../Scripts/PyriteGoldAjax.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id="Main">
    <div style="width: 400px; margin-left:auto; margin-right:auto;">
        <div class="row">
            <h2>
                Create Sales Account
            </h2>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="FirstNameLabel" runat="server" Text="First Name"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="FirstNameTextField" runat="server" Width="137px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"    ErrorMessage="*Required Field"
                 ControlToValidate="FirstNameTextField"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="LastNameLabel" runat="server" Text="Last Name"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="LastNameTextBox" runat="server" Width="137px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="*Required Field" ControlToValidate="LastNameTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="EmailLabel" runat="server" Text="E-Mail Address"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="EmailTextBox" runat="server" Width="134px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="*Required Field" ControlToValidate="EmailTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="VerifyEmailLabel" runat="server" Text="Verify E-Mail"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="VerifyEmailTextBox" runat="server" Width="136px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ErrorMessage="*Required Field" ControlToValidate="VerifyEmailTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="PasswordLabel" runat="server" Text="Password"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="PasswordTextBox" runat="server" Width="138px" 
                TextMode="Password"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ErrorMessage="*Required Field" ControlToValidate="PasswordTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="VerifyPasswordLabel" runat="server" Text="Verify Password"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="VerifyPasswordTextBox" runat="server" Width="138px" 
                TextMode="Password"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" ErrorMessage="*Required Field" ControlToValidate="VerifyPasswordTextBox"/>
            </span>
        </div>
        <div class="row" style="color:Red;">
            <asp:CompareValidator ID="EmailValidator" runat="server" ErrorMessage="**E- mail Feilds Must Match" ControlToCompare="EmailTextBox"  ControlToValidate="VerifyEmailTextBox"/><br />
            <asp:RegularExpressionValidator ID="RegularExpressionValidator1"  runat="server" 
            ErrorMessage="**E-mail Addresses must follow the pattern user@domain.com"  ControlToValidate="EmailTextBox" 
            ValidationExpression="\w+([-+.']\w+[-]*)*@\w+([-.]*\w+)*\.\w+([-.]\w+)*"/> <br />
            <asp:CompareValidator ID="PasswordValidator" runat="server"  ErrorMessage="**Password Fields Must Match" ControlToCompare="PasswordTextBox"  ControlToValidate="VerifyPasswordTextBox"/>
        </div>
        <div>
            <asp:Button ID="SubmitButton" runat="server" Text="Submit" />
        </div>
    </div>
</div>
</asp:Content> 
```

和背后的代码

```
 Imports PyriteGoldBLL
Imports PyriteGoldModel

Public Class CreateSalesAccount
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles  Me.Load
    If Session("permissionValue") <> 3 Then
        Response.Redirect("~/Home.aspx")
    End If
End Sub

Protected Sub SubmitButton_Click(sender As Object, e As EventArgs) Handles SubmitButton.Click
    Dim userLogic As New UserLogic()
    Dim user As New User()
    With user
        .FirstName = FirstNameTextField.Text
        .LastName = LastNameTextBox.Text
        .Email = EmailTextBox.Text
        .Password = PasswordTextBox.Text
        .Activated = True
        .Permission = 2
    End With
    userLogic.CreateUser(user)
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:43:54.257

您正在设置 Main div 的 html 内容。这不会将页面呈现为 asp 页面。因此，它不会为 SubmitButton 创建点击处理程序。它不会为 button 调用 click 事件。您必须为按钮添加 ajax 调用/表单标签才能发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:44:58.023

您有 AutoEventWireup="false" ，因此单击事件未连接到 SubmitButton_Click 方法。

添加 `OnClick="SubmitButton_Click"`到

```
 <asp:Button ID="SubmitButton" runat="server" Text="Submit" /> 
```

# java - 树莓派和 Java 安装

> ID：13051013
> 
> 赞同：2
> 
> 时间：2012-10-24T14:10:41.233
> 
> 标签：java, linux, raspberry-pi

我正在尝试安装 Oracle 的 Java jdk 并在我的 Raspberry pi 上编译和运行 java 程序。基本上我得到一个错误：当我尝试运行**java myfile.java时*****无法找到或加载主类***错误。

 **我采取的步骤是：

1.  从允许 java (soft float) 的 Raspberry Pi 网站下载“wheezy”
2.  从 Oracle 网站下载 arm jdk
3.  使用命令`tar -zxvf jdk-7u6-linux-arm-sfp.gz`解压jdk
4.  编写、编译，然后尝试运行一个简单的 java 程序

附带说明一下，因为 wheezy 映像只有 2GB，所以我将 4GB SD 卡的另外 2GB 分区以获得一些额外的存储空间。那是我解压缩 jdk 的地方，现在当我想运行**java**或**javac**时，我必须使用完整路径。如何修改安装，以便您可以在没有完整路径的情况下简单地输入**java**。这与安装二进制文件的位置无关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:16:28.703

JRE 听起来安装正常，但您需要先编译 java，然后才能运行它。由于 Pi 相对较慢，请使用您的 PC/Mac 编译您的应用程序：

`javac myfile.java`

然后你可以复制 myfile.class，它应该包含一个 main 方法，到你的 Pi 并运行：

`java your.package.name.myfile`

您可以在复制到您的 Pi 之前在您的 PC/Mac（或 Linux :)）上进行测试。

您的其他问题已通过将 java 添加到 PATH 来解决。编辑 /etc/profile，并添加：

```
PATH=${PATH}:/path/to/jdk/bin 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:18:20.747

对不起...就像从***java myfile.class*****中删除.class一样简单**

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T06:00:33.667

7版本的Oracle JDK实际上是JRE的问题，所以它不包括Java编译器。所以你有两个选择： 1\. 从安装在某些桌面机器上的 JDK 借用 tools.jar 2\. 或者安装 JDK 1.8 早期访问。我强烈建议使用第二个选项，它有几个好处： 1\. JDK 1.8 是完整的 JDK，因此您可以编译，例如我运行 JSP 页面而无需预编译 2\. JDK 1.8 是硬点，因此您不限于喘息软点，例如我使用 Arch Linux。我还创建了您会发现有用的入门文档：http: [//tjws.sourceforge.net/arch-raspi-java8.html](http://tjws.sourceforge.net/arch-raspi-java8.html) 享受您的 Raspberry PI

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T02:40:05.840

您现在也可以安装完整的 JDK，在 Oracle 下载站点上有一个用于 ARM 的 tar 文件。***

# java - 复制大量文件时，JDK 7 Watchkey pollEvents 未捕获 ENTRY_CREATE 或 ENTRY_MODIFY

> ID：13051016
> 
> 赞同：2
> 
> 时间：2012-10-24T14:10:53.687
> 
> 标签：java, filesystems, java-7, nio2

我正在尝试查看对特定文件夹所做的所有修改。当我复制一个包含 2~5 个子文件夹的文件夹时，每个子文件夹有 2~3 个文件。一切都很好。

当我复制复杂的文件夹结构时会出现问题。例如，当我复制任何示例 Web 应用程序文件夹（仅用于测试目的）时，其中 WEB-INF 文件夹在 classes 文件夹中有大量源文件和子文件夹，在 lib 文件夹中有大量 jar 等等。

许多文件的“ENTRY_CREATE”和“ENTRY_MODIFY”的许多文件事件都被遗漏了。

NIO2 Watcher API 不可靠吗？

我使用 Oracle 网站中记录的以下代码段。

```
WatchKey watchKey = folderPathToMonitor.register(watchService,StandardWatchEventKinds.ENTRY_CREATE,
                StandardWatchEventKinds.ENTRY_DELETE, StandardWatchEventKinds.ENTRY_MODIFY); 
```

这就是我捕获事件的方式：代码正是这里的代码 - [http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com /javase/tutorial/essential/io/examples/WatchDir.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/essential/io/examples/WatchDir.java)

我复制了 30 个文件夹中的大约 500 个文件，理想情况下，必须通知 ENTRY_CREATE 和 ENTRY_MODIFY 以获取尽可能多的文件和文件夹。但是捕获的最大事件（ENTRY_CREATE 和 ENTRY_MODIFY 组合在一起）不会超过 280，而对于复制的 530 个文件和文件夹，仅应注册至少 530 个 ENTRY_CREATE 事件。

有什么我遗漏或必须添加到 oracle.com 的观看代码中的吗？对此的任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:11:47.127

行。使用 jnotify 并解决了这个问题。很简单。不得不编写一些代码来忽略同一操作的多个事件。但让它工作。获取 jnotify - [http://jnotify.sourceforge.net/](http://jnotify.sourceforge.net/)

# c++ - 如何制作“i”向量

> ID：13051023
> 
> 赞同：0
> 
> 时间：2012-10-24T14:11:16.250
> 
> 标签：c++, list, vector, for-loop

我不确定你是否可以做到这一点，但我想制作一定数量的向量，这些向量的数量取决于另一个数字。因此，如果数字是 3，我想制作 3 个向量，如果是 4，我想制作 4 个向量，依此类推。有没有办法做到这一点？也许使用 for 循环？或者有没有更好的方法来处理这种情况。对于我的作业，我必须阅读文本文档并在文档中显示表格。所以我想要的向量数量取决于有多少列。如果有人可以提供帮助，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:13:22.203

```
int i = 10;
std::vector<std::vector<int> >(i, std::vector<int>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:43:57.517

向量的向量是最明显的答案。您可以制作任何东西的向量（或多或少），因此向量的向量不会出现特殊问题。

```
int i = 10;
std::vector< std::vector<int> > x(i); 
```

x 是十个向量（整数）的向量。

# c - `_TYPE_fpos_t;` 是什么意思？

> ID：13051025
> 
> 赞同：0
> 
> 时间：2012-10-24T14:11:18.453
> 
> 标签：c, linux, vxworks

vxTypes.h

```
#if !defined(__RTP__)
#ifdef _TYPE_fpos_t
#define _FPOS_T
_TYPE_fpos_t;
#undef _TYPE_fpos_t
#endif
#endif /* __RTP__ */ 
```

更新 00：

标准输出

```
typedef struct fpos_t
    {   /* file position */
    long _Off;  /* can be system dependent */
    _Mbstatet _Wstate;
    } fpos_t 
```

`fpos_t`我在类型上有一个编译错误（冲突）

```
error: conflicting declaration 'struct fpos_t'...'fpos_t' has a previous declaration as `typedef long int fpos_t' 
```

所以我需要先了解代码才能修复它，有人可以解释一下代码的作用，特别是`_TYPE_fpos_t;`部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:11:19.540

我有同样的问题。假设您使用的是 gcc 工具集，请使用“-nostdinc”编译器选项来防止 GCC 使用默认搜索路径。（diab 工具集应该有一个类似的选项。）您的项目 makefile 应该已经包含一个“-I *dir* ”条目列表，这些条目应该使编译器可以看到系统头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:14:31.670

如果定义了宏`_TYPE_fpos_t`：

*   定义宏`_FPOS_T`；
*   调用宏`_TYPE_fpos_t`；
*   取消定义宏`_TYPE_fpos_t`。

无论如何，这取决于代码的其余部分（的定义`_TYPE_fpos_t`等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:14:54.180

如果`__RTP__`未定义且`_TYPE_fpos_t`已定义，则定义`_FPOS_T`、调用宏`_TYPE_fpos_t`并`_TYPE_fpos_t`随后取消定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:43:52.823

It ( `_TYPE_fpos_t`) 是为实现保留的名称，可以随意使用。你干涉它，后果自负。

在这种情况下，它可能是用来控制`typedef`类型的`fpos_t`，它可以在多个头文件中定义，但应该只定义一次（在 C99 或更早的规则下），而不管包含多少头文件和顺序他们包括在内。可能在多个标头中定义的其他类型和宏存在类似的机制（`NULL`，`size_t`是两个主要示例）。

通过查看系统标头来学习如何编写标头是一项艰苦的工作。系统头的压力和约束是惊人的，并导致各种扭曲。

# python - 活动编辑器的 pydev 控制台路径

> ID：13051028
> 
> 赞同：4
> 
> 时间：2012-10-24T14:11:33.120
> 
> 标签：python, path, pydev

我想用pydev在python中做一些脚本。我遇到的问题是我无法在脚本所在的项目目录中启动控制台，控制台在 pydev/aptana 文件夹中启动（在 aptana 文件夹中的某个位置）。

我可以在我的脚本中添加以下代码来解决这些问题：

```
import os
import inspect
filename = inspect.getframeinfo(inspect.currentframe()).filename
curpath = os.path.dirname(os.path.abspath(filename))
os.chdir(curpath) 
```

有人知道如何在通过 pydev ++`Ctrl`方式启动时自动将控制台的目录更改为项目位置路径吗？`Alt``Enter`

- 编辑 -

如果有人更喜欢，这是我自己的解决方案：

```
import sys; print('%s %s' % (sys.executable or sys.platform, sys.version)) import os;os.chdir([p for p in os.environ['PYTHONPATH'].split(os.pathsep) if ('Aptana Workspace' in p)][0]) pwd() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-27T00:03:17.900

我在 Preferences -> PyDev -> Interactive Console -> Initial Commands 中将以下内容添加到我的预执行脚本中：

```
import os
import inspect

__old_runfile = runfile

def runfile(file):
    curpath = os.path.dirname(os.path.abspath(file))
    os.chdir(curpath)
    __old_runfile(file) 
```

这会覆盖默认的 runfile 命令并导致`Ctrl`++在加载`Alt`脚本`Enter`时更改为脚本的目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T02:03:08.367

我使用了一些技巧来完成这项工作。如果我理解您的问题，您希望将 IPython 环境中的当前工作目录设置为活动文件所在的目录。因此，如果您正在编辑 D:/projects/file.py，您希望 pwd() 命令（在 IPython 中）返回 D:/projects。这就是我的解决方案中被破解的部分的来源。我所有的项目都在我的 D 驱动器上，但是所有正常的 python 导入都来自我的 C 驱动器上的安装位置。所以以下内容：

```
os.environ['PYTHONPATH'].split(os.pathsep) 
```

生成一个列表，其中只有一个路径位于我的活动文件目录的 D 驱动器上（因为 PyDev 将 PYTHONPATH 设置为包含正确的目录）。如果您不使用 D 驱动器，那么应​​该有一些其他独特的方式来识别该列表中哪些路径与您的项目相关（例如在 Documents 或 My Documents 中等）。如果没有唯一标识您的项目路径的方法，那么这个答案不起作用。但是在“D：/”这个简单的例子中，这是一个足够的唯一标识符，这是我在设置中的启动代码（Window > Preferences > PyDev > Interactive Console）

```
import sys; print('%s %s' % (sys.executable or sys.platform, sys.version))
import os;os.chdir([p for p in os.environ['PYTHONPATH'].split(os.pathsep) if p.startswith("D")][0])
pwd() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-26T01:01:54.137

我遇到了同样的问题，刚刚找到了另一个解决方案。它类似于已经提到的那些，但在 eclipse/pydev 中完全可配置（无需修改脚本）。

1.  在 Window -> Preferences -> PyDev -> Interpreters -> Python Interpreter 中选择 tab Environment 并添加一个新变量，名称 为*PROJECT_PATH*（或您选择的任何内容）和 Value *${project_loc}*（这是项目文件夹的绝对路径） .
2.  然后在 Window -> Preferences -> PyDev -> Interactive Console -> Initial Command 添加行`import os; os.chdir(os.environ['PROJECT_PATH'])`。

（如果您启动“当前工作编辑器的控制台”，它会起作用。）

# android - 动画通过 GeoPoints 移动的图标

> ID：13051029
> 
> 赞同：3
> 
> 时间：2012-10-24T14:11:35.257
> 
> 标签：android, android-layout, android-intent, android-mapview, geopoints

我正在开发一个基于 mapview 的 android 应用程序。（实时实时总线计时应用程序）。

我为此目的使用“覆盖”类（插入图标等）。我正在接收一组 GeoPoints，我需要创建一个动画，其中某个图标正在通过 GeoPoints 索引路径移动。（简而言之 - 代表在某条道路/路线上行驶的公共汽车的图标）

这个动画是怎么实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:39:51.907

您需要首先删除以前的覆盖项目，然后在收到新的 Lat-Long 点时添加新的覆盖项目....这就是为什么您需要使用广播接收器来获取新的更新位置和代码执行.,..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T14:27:28.250

无法为叠加层设置动画，您必须在单个叠加层上一一显示所有路线地理点。我建议创建一个 TimerTask 以迭代放置 Overlay 与您的点。（同时只有一个点可见。更改 timerTask 速度以更改动画速度。（我认为 100 毫秒是很好的动画时间）

# ldap - ldap_search_ext 用于嵌套组

> ID：13051033
> 
> 赞同：1
> 
> 时间：2012-10-24T14:11:51.090
> 
> 标签：ldap, nested-groups

我正在尝试检查给定用户是否是 AD 组的成员（还需要使用 openldap 进行测试）。如果我使用给定过滤器的命令行 ldapsearch 返回对象，这意味着成员资格间接存在。我也尝试过编写客户端程序。我面临的问题是，当我尝试使用 ldap_search_ext() 异步调用时，它总是因没有此类对象或无法联系 LDAP 服务器错误而失败。当我尝试使用 ldap_search_ext_s() 时，它工作正常。我只是按照此处给出的说明进行操作。

搜索过滤器

```
"(&(cn=user1)(memberof:"AD_LDAP_MATCHING_RULE_IN_CHAIN:=CN=bang-ldap0x,CN=Users,DC=example,DC=com))" 
```

[https://wiki.mozilla.org/Mozilla_LDAP_SDK_Programmer%27s_Guide/Searching_the_Directory_With_LDAP_C_SDK](https://wiki.mozilla.org/Mozilla_LDAP_SDK_Programmer%27s_Guide/Searching_the_Directory_With_LDAP_C_SDK)

但我正在做 aync 绑定 (ldap_bind) 和 ldap_search_ext()。我不太清楚为什么它在同步调用而不是异步中工作。

任何指针或建议将不胜感激。

# ios - 在 iOS 的 adobe 本机扩展中使用自定义字体

> ID：13051036
> 
> 赞同：1
> 
> 时间：2012-10-24T14:12:01.187
> 
> 标签：ios, adobe, native

我正在为 iOS 构建一个原生扩展。我想使用自定义字体。到目前为止，我有：

在 ANE 构建结构中：

*   与 lib 位于同一文件夹中的 .ttf 文件

在 AS 库中：

*   将文件包含在应用程序描述符中，如下所示：

    UIDeviceFamily</key> 1</string> 2</string> </array> UIStatusBarStyle</key> UIStatusBarStyleBlackOpaque</string> UIRequiresPersistentWiFi</key> YES</string> UIAppFonts</key> myFont-bold.ttf< /string> myFont-halb.ttf</string> myFont-reg.ttf</string> </array>
    ]]> high

在 iOS 项目中：

*   在支持文件下添加了文件
*   在目标构建阶段添加文件以编译源
*   像这样使用lib中的字体：

    [descriptionLabel setFont:[UIFont fontWithName:@"myFont-halb" size:11]];

尽管如此，使用 ANE（在所有其他方面都可以正常工作），它默认回到系统字体。任何人都可以看到，我错过了什么？

任何提示表示赞赏！谢谢，马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:02:04.313

想通了：字体文件也需要添加到应用程序的 bin 文件夹中。另一个陷阱：文件名和字体名不同，请务必在需要时使用正确的。

# jakarta-ee - 验证不适用于请求范围的 bean

> ID：13051044
> 
> 赞同：0
> 
> 时间：2012-10-24T14:12:27.817
> 
> 标签：jakarta-ee, java-ee-6, cdi

平台：JBoss AS 7。

我看到 JSR 303 bean 验证和请求范围的 CDI 托管 bean 的奇怪行为。系统似乎从不应用验证规则并且总是通过验证。

下面是一个代码片段。

```
@Named
@RequestScoped
class Person {
    @Size(min=3, max=25, message="Please enter a valid name")
    private String firstName;
    //Getters and setters...
}

@WebServlet("/ValidationTest")
public class ValidationTest extends HttpServlet {
    @Inject
    Person p1;

    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

        p1.setFirstName("A");
        validate(p1);

        Person p2 = new Person();
        p2.setFirstName("B");
        validate(p2);
    }

    public void validate(Object o) {
        ValidatorFactory validatorFactory = null;
        validatorFactory = Validation.buildDefaultValidatorFactory();
        ValidatorContext validatorContext = validatorFactory.usingContext();
        javax.validation.Validator beanValidator = validatorContext
                .getValidator();

        Set<ConstraintViolation<Object>> violations = beanValidator.validate(o);

        System.out.println("Object is valid: " + violations.isEmpty());
    }
} 
```

输出是：

```
Object is valid: true
Object is valid: false 
```

注入的 bean p1 被认为是有效的，这不应该发生。p2 的验证失败，这是预期的。如果我使 Person bean 依赖范围，则 p1 被正确地视为无效。我究竟做错了什么？

编辑：我已经复制了 TomEE 中的行为。所以，我一定做错了什么。

# math - 概率区间和排序图？

> ID：13051045
> 
> 赞同：0
> 
> 时间：2012-10-24T14:12:28.830
> 
> 标签：math, probability

当我有一个带有权重和随机生成器的图时，如何选择一些更理想的边？我有一个 x 权重的约束，我需要一个包含 x 权重的公式，让我选择下一条边，依此类推。例如，我有 4 个边，重量为 5、10、15、20。如何使用随机生成器使重量为 5 的边缘更理想，而且当我已经选择边缘 5 时，我不需要选择重量为 20 的边缘，因为它超出了我的约束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:23:15.587

通过定义选择一个特定边的概率为：

```
 P(select_this_edge) = (x - Weight_of_this_edge) / x 
```

这将使权重较低的边更有可能被选择，而权重大于“约束”x 的边则无法选择。

假设 RNG（随机数生成器）产生介于 0 和 1 之间的值，决定是否应选择给定边的过程是绘制一个随机数并查看它是否小于或等于公式中计算的概率。

根据您的具体需求，您可以稍微更改公式，例如通过引入一个小因素来阻止系统选择权重为 0 的边缘（通过引入不会被选择的剩余机会），反之亦然防止永远不会选择高于“约束”x 边缘值的边缘。

现在......上面讨论了分配概率以决定**是否应该选择*给定***边缘的方式。如果程序逻辑确实有一种选择单个边的方法并且简单地问自己一个简单的问题“应该选择这个特定的边吗？”，这就足够了。然而，程序逻辑可能已经提出了一个边列表（可能是边的完整集合），并且想要回答一个更复杂的问题：“在这些 n 条边中，我应该选择哪一条？”。
我正要解释如何解决第二种类型的问题，但是在阅读各种评论的字里行间时，我想我更好地理解了手头的问题......

* * *

**编辑**（在评论中进行各种澄清之后）
正如怀疑的那样，潜在问题是**优化*问题*而不是*概率***问题（尽管在这种情况下，概率用于以随机方式将搜索引导到解决方案空间）。
具体来说，该问题是[**Capacitated Vehicle Routing Problem的众多变体之一**](http://en.wikipedia.org/wiki/Vehicle_routing_problem)

在不知道我们正在尝试优化哪些特定参数（或其组合）的详细信息的情况下，我只能笼统地说，试图回答 OP 的问题之一：
**可以将与权重相关的概率与概率结合起来与距离有关？**

简而言之，**是**的。一个简单的乘法可以解决问题，尽管我想建议一个类似于以下的公式：

```
P(e) = Kw * Pw(e) + Kd Pd(e) + some_random_term
Where 
   P(e) is the probability of picking edge e, "all things considered"
   Kw and Kd are constant parameters which can be used to tweak the algorithm
   Pw(e) is the probability of picking egde e, with consideration to the Weight
   Pd(e) is the probability of picking egde e, with consideration to the Distance
   some_random_term is used to soften the algorithm in its tendency to favor too
      much high probability edges resulting in allowing the search process to get
      stuck in local minima.
      Rather than a added term, this can also be performed by a simple function
      which prevents the probability to be less than say 0.05 or more than say
      0.95\.  A fancier sigmoid function may also do the trick. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:24:22.730

这取决于您所说的“更可取”是什么意思。我也不太明白您所说的“我有 x 重量的限制”是什么意思。但一般来说，您可以创建一个数组概率，它存储在位置 i 处选择第 i 条边的概率。然后生成一个介于 0 和 1 之间的随机数并遍历 Array。如果这个数字小于当前位置的概率，我们就取那个边。否则，我们从数字中减去当前概率并移动到下一个位置。所以在伪代码中，它看起来像这样：

```
x = random([0.0, 1.0])
for i in 0..n
  if x < probabilities[i]
    choose(i)
    break
  else
    x -= probabilities[i]
  end
end 
```

如果您有很多边，您还可以通过将边的概率总和从 0 到 i 存储在数组probability_sums 中的位置 i 中，然后在该数组中对 x 进行二分搜索并选择边那个位置。

# android - AsyncTask 与否？服务器同步活动

> ID：13051047
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:12:38.157
> 
> 标签：android, android-asynctask

我正在寻找这个问题的最佳实践。

基本上，在进入主要活动之前，我有一个带有“启动”活动的应用程序。用户根本无法做任何事情，因为应用程序需要首先通过抛出一些 HTTP 请求与服务器同步。

最简单的方法是在每个 HTTP 请求的 UI 线程上按顺序运行。这有什么特别的问题吗？（即处理Android框架通常会被阻止？，...）。我想用第一个版本来实现这个，然后用下面列出的方法进行改进。

否则，从用户的角度来看，是否更好地为每个 HTTP 请求同时启动一个 AsyncTask，并在我可以启动下一个活动时在 UI 线程中同步。

干杯。l_ingenu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:19:21.293

用于`AsyncTask`进行 HTTP 调用，因为从 Honeycomb 开始，不允许在 UI 线程上使用 Internet 操作（除非您更改策略）。

调用完成后，返回所需的结果`onPostExecute`并决定是继续下一个`Activity`还是向用户抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:32:16.143

首先，
您必须使用一个单独的线程，使用 UI 线程进行网络活动，这是一个很好的做法
[http://developer.android.com/training/basics/network-ops/connecting.html][1]

其次，您需要在这里做出选择：

如果您的整个应用程序依赖于来自服务器的数据并且必须在应用程序中显示内容之前获取数据，您应该使用 AsyncTask 并在 onPostExecute() 中移动到下一个 Activity。

如果您在应用程序中使用数据，并且在用户查看使用服务的第一个屏幕中没有太大影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:17:29.280

我建议您**不要**使用 AsyncTask，而是使用[IntentService](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/) :)

# php - 如何使用 if 来匹配不同的文本字符串

> ID：13051052
> 
> 赞同：0
> 
> 时间：2012-10-24T14:12:49.167
> 
> 标签：php, mysql

> **可能重复：**
> [比较 PHP 中的多个值](https://stackoverflow.com/questions/4106382/compare-multiple-values-in-php)

我想做这样的事情

```
if($abc="asdf","sdfg","dfgh") {
echo "Something";
} 
```

我该怎么办？我必须使用单独的规则`||`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T14:14:08.960

您将[`in_array()`](http://www.php.net/in_array)用于此类目的：

```
if (in_array($abc, array('asdf', 'sdfdg', 'qweqe'))) {
    // something
} 
```

的第三个参数`in_array()`可用于在 needle 和 haystack 的每个项目之间执行严格的类型检查，类似于`===`.

# mysql - mysql 同时插入？

> ID：13051056
> 
> 赞同：0
> 
> 时间：2012-10-24T14:12:57.923
> 
> 标签：mysql, node.js, architecture, asynchronous

我使用nodejs从一些api同时获取数据。我的数据库是mysql。

`INSERT into mysql(tabels) values (values)`

![在此处输入图像描述](../Images/2dff38a1e4629410ace44232ad140290.png)

问题是有时 api 不会运行也不会停止，可能是因为超时错误（有时）或其他原因；

1.  如果我们同时查询插入会发生什么？

2.  如何同时从多个来源异步插入数百个数据？

3.  你怎么做呢？是否有任何像 mangodb 这样的数据库或任何可能已经为类似的东西构建的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:39:45.893

MySQL 与任何其他工具一样，在正确使用时运行良好。大量的异步写入本身并没有什么问题，但在您的情况下，您需要对预期负载进行基准测试并模拟您的预期负载以确定确定。

通常同时插入两个或更多东西不是问题。通过将表设计为易于更新、将索引保持在最低限度、消除不必要的列以及在快速磁盘上操作，您始终可以调整数据库以更快地响应。

请记住，插入数据通常不是问题。一旦插入，它就会使用数据。你还没有真正描述你的意图是什么。

在这里使用 NoSQL 工具没有特别的理由，即使您每秒执行 10K 插入，经过适当调整和架构的 MySQL 可以处理。

# c# - PowerPoint幻灯片中的foreach图表？

> ID：13051060
> 
> 赞同：1
> 
> 时间：2012-10-24T14:13:13.023
> 
> 标签：c#, powerpoint

我有 2 个问题。

1.我有带Frameowrk 3.5的VS2010，需要提取一些数据和文本并更新一些现有的Powerpoint文件。最好的方法是什么？我是 VSTO 的新手，但使用 C# 已经有一段时间了。

2\. 我一直在使用 Interop 库 (Microsoft.Office.Interop.PowerPoint) 进行测试，所以我需要打开一个 powerpoint 并更改所有幻灯片和图表中的一些文本。幻灯片和 sahapes 没问题，但图表似乎是个问题。似乎没有图表集合，如果 (shape.Type == Office.MsoShapeType.msoChart) 返回 false。

我以前在 VBA 中做过这个并使用了下面的代码

```
For Each chtChart In sht.ChartObjects
        chtChart.Chart.ChartTitle.Characters.Text = Replace    (chtChart.Chart.ChartTitle.Characters.Text, "{month}", strCurrent,    VbCompareMethod.vbTextCompare)
Next chtChart 
```

我只是真的想做同样的事情。

我错过了一些非常明显的东西吗？

任何指点都感激不尽。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:59:57.420

您可能会在 PPT 中遇到几种类型的图表。忽略旧的 MSGraph 图表，您可能会发现用户使用 Insert | 添加的图表。图表。

这些将是 .Type = 3 (msoChart) 的形状。以下是您如何获取这些图表和/或图表数据的示例：

```
Sub ShowChartData()

Dim oSh As Shape
Dim oCht As Chart
Dim oData As ChartData

Dim x As Long
Dim y As Long
Dim sTemp As String

Set oSh = ActiveWindow.Selection.ShapeRange(1)

Set oCht = oSh.Chart
oCht.ChartData.Activate
Set oData = oCht.ChartData

For x = 1 To 4
    For y = 1 To 4
        sTemp = sTemp & oData.Workbook.Worksheets("Sheet1").Cells(x, y) & vbTab
    Next    ' y/cell
    Debug.Print sTemp
    sTemp = ""
Next ' x/row

' do this to get rid of visible worksheet
oData.Workbook.Close

Set oData = Nothing
Set oCht = Nothing

End Sub 
```

图表也可能是从 Excel 复制/粘贴的链接或嵌入对象。

# php - PHP Xpath 要删除 吗？

> ID：13051061
> 
> 赞同：0
> 
> 时间：2012-10-24T14:13:18.440
> 
> 标签：php, xpath, domxpath

我正在使用 xpath`<br />`从以下代码中删除节点，

```
$nodeList = $xpath->query("//p[node()[1][self::br]]/br[1] | //p[node()[last()][self::br]]/br[last()] | //*[node()[last()][self::br]]/br[last()]");
foreach($nodeList as $node) 
{
   $node->parentNode->removeChild($node);
} 
```

所以它删除`<p>Text<strong><br /></strong></p>`了`<p>Text</p>`哪个是完美的。

但我不希望它从中删除`<br />`，`<p>Text<strong>Bold<br /></strong>Break</p>`因为`<br />`.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:22:17.733

如果 的`<br>`父元素节点的节点值为空字符串，则要删除它。这可能更符合您的需求：

```
//br[string(..) = ''] 
```

一个代码示例，显示哪个匹配那些（添加一个*删除*属性）：

```
<?php

$xml = simplexml_load_string('
<root>
   <p>Text<strong><br /></strong></p>
   <p>Text<strong>Bold<br /></strong></p>
</root>
');

foreach($xml->xpath('//br[string(..) = ""]') as $br) {
    $br['remove'] = 'remove';
}

echo $xml->asXML(); 
```

输出（[演示](http://codepad.org/3yNIGGVS)）：

```
<?xml version="1.0"?>
<root>
   <p>Text<strong><br remove="remove"/></strong></p>
   <p>Text<strong>Bold<br/></strong></p>
</root> 
```

# parsing - 大文件的实时语法高亮解析器

> ID：13051069
> 
> 赞同：1
> 
> 时间：2012-10-24T14:13:43.473
> 
> 标签：parsing, optimization, syntax-highlighting

我熟悉解析器生成器和解析器从头到尾一次处理流的基础知识。

我的问题是针对语法高亮文本编辑器等情况。当用户将每个字符更改为一个非常大的文件时，必须执行大量计算才能重新解析和重新突出显示整个文件。

我能想到的简单优化：

*   延迟该操作，直到按键空闲几秒钟
*   重新解析整个文件，但格式只能应用于可见视口文本

但是是否有普遍适用的技术来仅重新处理“本地”文本而不从文件开头开始？

想法：

*   更改的上游影响似乎不如下游更改的影响，因此取决于算法允许多少前瞻令牌，也许我们可以从那么多令牌重新处理回文件末尾？
*   我们知道在大多数重新处理请求时光标在哪里，因此我们可以捕获该点的状态快照以从那里恢复（如果有帮助的话）。

但我认为这已经解决了，或者有人知道它不能工作，并且解析整个文件对于一般语法来说总是必要的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:15:05.023

语法高亮不一定要精确。事实上，有时精确的语法突出显示很烦人（例如当整个屏幕变灰时，因为在文件开头的某个地方引入了语法错误）。你通常可以逃脱：

1.  只需为标记类着色即可完成大部分工作。

2.  为了匹配大括号、方括号和圆括号 (BBP)，您只需向后扫描到最早匹配的 BBP，以查找屏幕上可见的 BBP。您可以在后台执行此操作，因为在用户查找匹配项之前它通常不会产生任何后果。

3.  有时记号很难向后识别（块注释、正则表达式）。在这种情况下，返回一段固定的距离并向前扫描。几百行不应该增加太多开销。或者（这也适用于＃2），在战略点缓存词汇状态，例如在低嵌套级别以 BBP 结尾的行。

这些只是一些建议。Vim 和 Emacs 存储库中有很多成功的荧光笔示例，您可以查看这些示例以获得特定语言的实用想法。

# sql - 作为 SQL 查询的结果，从 Biztalk 创建一个 excel 输出文件

> ID：13051071
> 
> 赞同：3
> 
> 时间：2012-10-24T14:13:53.793
> 
> 标签：sql, excel, biztalk

我在 SQL Server 中有一个查询，它返回 5 列和一些数据。

我想创建一个 BizTalk 应用程序，将我的查询结果保存在 Excel 文件中。我将创建一个用于轮询的 SP，使用 wcf 适配器来做 BT 和 SQL 之间的通信。

我不知道如何生成`file.xls`. 可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:21:25.507

任何 .xls 文件都可以保存为 XML 工作簿（Excel 中的 File-Save As），这是一个 XML 文档。您可以看到这是您在记事本中打开的 XML 文档。

现在，诀窍是掌握用于生成它的模式，这可能是微软专有的，可能不会被提供。因此，解决方法是，如果您的 excel 文件非常简单，您可以将其保存为工作簿并查看 XML 并基于它生成 XSD。

现在，将传入的 XML 映射到此 Workbook XSD，双击生成的 XML 将直接在 Excel 中打开。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:55:34.647

在这种情况下，您需要开发一个自定义管道

[biztalk-custom-excel-pipeline-component](http://mohammedatef.wordpress.com/2009/06/07/biztalk-custom-excel-pipeline-component/)

# php - 如果登录/退出显示/隐藏文本区域？

> ID：13051074
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:14:02.777
> 
> 标签：php, login

请帮忙，我正在努力做到这一点，以便在用户或客人访问我的网页时，他们会看到一个被禁用的文本区域，一旦他们登录，他们就可以点击编辑这个文本区域。

我已经按照我想要的方式设置了它，但是目前如果用户登录文本区域，则会从禁用的区域切换到可编辑的区域。但随后其他配置文件的所有其他文本区域都消失了，我希望这些文本区域保持不变，以便登录用户可以看到其他用户但不能编辑它们？

希望我已经解释得足够清楚了。希望这是可能的吗？

```
<?php if (isset($_SESSION['user_id'])) { 
            if ($user['id'] == $_SESSION['user_id']){
 ?>                 

<textarea id="area"  rows="10" style="
    width: 456px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $profile['bio'] ?> </textarea>

<?
} 
}
?>

<?php
    if (!logged_in()) {
        ?>

<textarea id="area-read" disabled="yes" style="
    width: 456px;
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $profile['bio'] ?> </textarea>
<?
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:16:47.020

尝试仅将 disabled="yes" 放在 php 检查中

```
<textarea id="area-read" <?php if(!logged_in()) { echo 'disabled="yes"'; } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:25:26.873

您说对于其他配置文件，文本区域消失了。那是因为在用户登录后，他的会话就设置好了。并且仅在`id`等于 session的配置文件中`user_id`，才会打印 textarea。因此，您需要处理第一个块`if`内部的else 情况。`if`

```
<?php
if (isset($_SESSION['user_id']))
{ 
    if ($user['id'] == $_SESSION['user_id'])
    {
?>                 

    <textarea id="area"  rows="10" style="
    width: 456px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $profile['bio'] ?> </textarea>

<?php
    }
    else
    {
    //Printing the text area for other users/profiles. This is what you said was missing.
?>

    <textarea id="area-read" disabled="yes" style="
    width: 456px;
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $profile['bio'] ?> </textarea>

<?php
   }
}
?>

<?php
    if (!logged_in()) 
    {
?>              
    <textarea id="area-read" disabled="yes" style="
    width: 456px;
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $profile['bio'] ?> </textarea>
<?php
    } 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:21:01.233

就像 Svetlio 说的那样，只将禁用的放在检查中，但也扩展了检查，因此您只为该用户启用 textarea 并禁用其他用户。

```
<textarea id="area-read" <?php if(!logged_in() || $_SESSION['user_id']!=$user['id']) { echo 'disabled="yes"'; } ?> 
```

编辑：

为了回复您的评论，通常您将无法看到登录用户两次的 textarea，所以这里是代码需要的完整版本：

```
<textarea id="area-read" <?php if(!logged_in() || $_SESSION['user_id']!=$user['id']){ echo 'disabled="disabled"' } ?> style="
    width: 456px;
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 122px;
    resize: none; 
    border: hidden;"><?php echo $profile['bio'] ?> </textarea> 
```

这就是你所需要的，仅此而已

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:21:07.717

`disabled="disabled"`是 textarea 的正确语法。所以你应该：

```
<textarea id="area-read" <?php echo ( (!logged_in() ? (" disabled='disabled' ") : ("") ) ; ?> 
```

# ruby - 有没有一种干净的方法来测试 Rspec 中的 ActiveRecord 回调？

> ID：13051082
> 
> 赞同：7
> 
> 时间：2012-10-24T14:14:34.383
> 
> 标签：ruby, activerecord, rspec, callback

假设我有以下 ActiveRecord 类：

```
class ToastMitten < ActiveRecord::Base
  before_save :brush_off_crumbs
end 
```

有没有一种干净的方法来测试`:brush_off_crumbs`已设置为`before_save`回调？

“干净”是指：

1.  “没有实际保存”，因为
    *   很慢
    *   我不需要测试 ActiveRecord 是否正确处理**指令**`before_save`；我需要测试我是否正确地**告诉**它在保存之前要做什么。
2.  “无需通过未记录的方法进行黑客攻击”

我找到了一种满足标准＃1但不满足＃2的方法：

```
it "should call have brush_off_crumbs as a before_save callback" do
  # undocumented voodoo
  before_save_callbacks = ToastMitten._save_callbacks.select do |callback|
    callback.kind.eql?(:before)
  end

  # vile incantations
  before_save_callbacks.map(&:raw_filter).should include(:brush_off_crumbs)
end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T14:31:33.710

# 利用`run_callbacks`

这不那么hacky，但并不完美：

```
it "is called as a before_save callback" do
  revenue_object.should_receive(:record_financial_changes)
  revenue_object.run_callbacks(:save) do
    # Bail from the saving process, so we'll know that if the method was 
    # called, it was done before saving
    false 
  end
end 
```

使用这种技术来测试一个`after_save`会更尴尬。

# ios5 - 在 iOS 中触摸时将图像扩展到全屏

> ID：13051086
> 
> 赞同：1
> 
> 时间：2012-10-24T14:14:48.043
> 
> 标签：ios5, animation, uiimageview, uiimage

我想做到这一点：

在其中的某些部分加载带有图像的 UIViewController。图像应该比原始图像小一点，并且顶部和底部也被裁剪，当触摸它以动画成全屏时。

像 JetSetter 应用一样的东西

![步骤1](../Images/6998102758bf22193207fa1605d3a2d2.png)

![第2步](../Images/b5ed38b3eaf00c805c0bf5fd43b64825.png)

# java - Spring、Hibernate 和 AbstractTransactionalJUnit4SpringContextTests：找不到具有多个映射到相同底层数据的对象

> ID：13051090
> 
> 赞同：1
> 
> 时间：2012-10-24T14:14:54.777
> 
> 标签：java, spring, hibernate, junit

[我已经使用AbstractTransactionalJUnit4SpringContextTests](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/context/junit4/AbstractTransactionalJUnit4SpringContextTests.html)成功地为 Spring 2.5.6/Hibernate 3.5.3 项目创建了许多与数据库相关的单元测试。一个示例，其中创建了一个设备对象，然后验证同一对象是否包含在所有设备对象的列表中：

```
@ContextConfiguration(locations = { "classpath:/UnitTests-context.xml" })
@RunWith(SpringJUnit4ClassRunner.class)
public class DeviceDaoTests extends AbstractTransactionalJUnit4SpringContextTests {

    @Test
    public void testGetDeviceList() {
        Device device = new Device();
        this.sessionFactory.getCurrentSession().merge(device);

        Query myQuery = this.sessionFactory.getCurrentSession().createQuery("from Device");
        List<Device> allDevices = myQuery.list();
        assertTrue(allDevices.contains(device);
    }
} 
```

这个测试有效。

Device 类，映射到名为 DEVICES 的表：

```
@Entity
@Table(name = "DEVICES")
public class Device {

//properties omitted for brevity and readability

} 
```

还有一个名为 DeviceListItem 的类，它映射到名为 DEVICESLIST_VIEW 的数据库视图，其中包含 DEVICES 表（以及其他表）的一部分：

```
@Entity
@Table(name = "DEVICESLIST_VIEW")
public class DeviceListItem {

//properties omitted for brevity and readability

} 
```

现在，如果我想测试在数据库中插入设备会导致从所有 DeviceListItem 对象的列表中找到具有相同 id 的 DeviceListItem（类似于第一个测试），则会出现问题 - 以下测试失败：

```
 @Test
   public void testGetDeviceListItemList() {
      Device device = new Device();
      this.sessionFactory.getCurrentSession().merge(device);

      Query myQuery = this.sessionFactory.getCurrentSession().createQuery("from DeviceListItem");
      List<DeviceListItem> allDeviceListItems = myQuery.list();
      assertTrue(allDeviceListItems.get(0).getId().equals(device.getId())
  } 
```

在 Web 服务器上运行应用程序时，所有映射、DAO 类等都可以工作 - 只有前面提到的单元测试失败。这可能是因为保存了一个 Device 类型的新对象，但读取的项目是 DeviceListItem 类型，并且 Hibernate 不“知道”它们都引用同一个底层数据库表，因为这些对象并没有真正保存到数据库中。

有没有办法让这个测试工作，即测试一个 Device 对象被写入数据库并作为 DeviceListItem 对象从数据库中读取的场景？

（请注意，代码示例中可能存在拼写错误、样式问题等，因为示例被高度简化，不一定是从实际执行的代码中复制/粘贴）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:49:26.093

加注解解决

```
@Rollback(false) 
```

（参见[http://static.springsource.org/spring/docs/2.5.6/reference/testing.html](http://static.springsource.org/spring/docs/2.5.6/reference/testing.html)）方法

```
testGetDeviceListItemList 
```

（见原始问题）。但是，这也意味着 Spring Unit 测试上下文不会自动回滚，所以我必须确保之后手动恢复数据库状态：

```
this.sessionFactory.getCurrentSession().delete(device); 
```

完整方法：

```
 @Rollback(false)
       @Test
       public void testGetDeviceListItemList() {
          Device device = new Device();
          this.sessionFactory.getCurrentSession().merge(device);

          Query myQuery = this.sessionFactory.getCurrentSession().createQuery("from DeviceListItem");
          List<DeviceListItem> allDeviceListItems = myQuery.list();
          assertTrue(allDeviceListItems.get(0).getId().equals(device.getId());

          this.sessionFactory.getCurrentSession().delete(device);
      } 
```

# xul - xulrunner 选项卡关闭按钮

> ID：13051091
> 
> 赞同：1
> 
> 时间：2012-10-24T14:14:58.393
> 
> 标签：xul, xulrunner

我有一个带有标签框的 xul 窗口。tab 和 tappanel 元素是在 Javascript 中根据需要生成的。

我希望标签有一个关闭按钮。“标签”标签的文档谈到了“关闭按钮”属性，但表示不再支持它。

我正在尝试在选项卡内创建内容。现在它包含两个标签标签。第一个是实际的标签标签，第二个是红色 X（实际上是 unicode \u2716）。它显示正常，但单击 X 时似乎无法触发事件。

我尝试过使用 onclick 属性和 closebutton.addEventListener('click')。

我还尝试使用工具栏按钮而不是标签。当鼠标悬停时，它会显示 X，但不会在其周围绘制按钮。最重要的是，我无法触发按钮事件。

# python - Zip文件中的修改文件

> ID：13051099
> 
> 赞同：0
> 
> 时间：2012-10-24T14:15:18.440
> 
> 标签：python, shell

我使用 wget 下载了在过去半小时内发生更改的 ZIP 文件。Zip 文件有一个 csv 文件。Zip 文件可能有新的 csv 文件/修改了我已经下载的文件/未修改特定文件。我需要从 zip 文件中选择这些修改后的文件/新文件并加载到数据库。如果您有任何建议，请告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:20:58.840

您可以获取存档成员的 CRC 并通过 CRC 进行比较

```
import zipfile
z = zipfile.ZipFile('d:\\temp\\debug.zip')
for member_info in z.infolist():
    print member_info.orig_filename, member_info.CRC 
```

输出示例（名称，CRC）：

```
 tfr/products/tests/11/data/1000sites 1458294800
 tfr/products/tests/11/data/100sites 1275729396
 tfr/products/tests/11/data/list_of_2.txt 677585194
 tfr/products/tests/11/data/list_of_1.txt 0 
```

# jquery - JQuery 更改 $.getJSON url 然后克隆

> ID：13051100
> 
> 赞同：0
> 
> 时间：2012-10-24T14:15:20.923
> 
> 标签：jquery

我有一个`<li>`里面有 JQuery 代码的项目。我想克隆它`<li>`并`$.getJSON url`在 cloned 内部进行更改`<li>`。是否可以？

这里的代码：

```
<ul class="exercise2">2:2 Exercise - 1

            <li class="exset327" id="exset327"><var class="exset">327</var>:Сет - <var class="setnum">1</var>
              <a class="DelSet" href="#">[-]</a>
              <script>
                $(".exset327 a").click(function () {
                  $.get("/workouts/del_set/327/"); // Here I want to change '327' in cloned item to some variable then clone
                  $(this).parent().remove();
                  $(".exercise2 li").each(function(){
                    $(".setnum",this).html($(this).index() + 1);
                  });
                  return false;
                });
              </script>
            </li>

        <a class="AddSet" href="#">Add set</a>   // link which make a clone of above <li>
        <script>
          $(".exercise2 a.AddSet").click(function () {
            $.getJSON("/workouts/add_set/2/", function (json) {
              //alert(json.newsetnum);
              var newsetid = json.newsetid;         // returnet from server
              var newsetnum = json.newsetnum;       // returned from server
            // clone
            var clonedLi = $(".exercise2 li:last").clone(true); // 'true' to clone with event handler
            // change attributes
            $(clonedLi).attr("id", "exset" + newsetid);
            $(clonedLi).attr("class", "exset" + newsetid);
            // change content
            $(clonedLi).find(".exset").html(newsetid);
            $(clonedLi).find(".setnum").html(newsetnum);
            // add
            $(clonedLi).insertAfter(".exercise2 li:last");
            });
          });
        </script>
</ul> 
```

如果我在克隆`URL`时单击（删除）链接时不会更改，则删除以前的链接。`[-]``<li>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:37:14.403

我会用另一种方法回答你，因为你的做法似乎不是最优的。克隆 DOM 元素很好，但克隆标签并不是很优雅。

似乎您正在执行相同的操作，但使用不同的元素或变量。有一种很好的方法可以使用泛型类进行此类工作 - 并使用 .data() 使它们更精确；

的HTML

```
<li class="exset327" id="exset327">
  <var class="exset">327</var>:Сет - <var class="setnum">1</var>
  <a class="DelSet" href="#" data-exset="327" >[-]</a>
</li> 
```

和 JS：

```
$(document).on("click", ".DelSet", function() {
    var exset = $(this).data("exset");

    $.get("/workouts/del_set/"+exset+"/"); 
    $(this).parent().remove();
    $(".exercise2 li").each(function(){
      $(".setnum",this).html($(this).index() + 1);
    });
    return false;
 }); 
```

这部分 javascript 将确保每个新的“.DelSet”都有一个点击监听器，并执行下面的代码。

因此，您所要做的就是克隆 <li> 并修改 data-exset。

```
$(clonedLi).find(".DelSet").data("exset", netsetid); 
```

# apache - Apache HTTPD 配置可视化

> ID：13051102
> 
> 赞同：2
> 
> 时间：2012-10-24T14:15:28.800
> 
> 标签：apache, graphics, visualization

有谁知道显示 Apache HTTPD 服务器配置可视化的工具？我正在寻找可以针对执行大量 ReverseProxy 映射的 DMZ 服务器运行的东西。我继承了 3 台拥有 ~100 个虚拟主机的 Apache 服务器。如果能够看到每个 VHOST 的特定配置设置适用于每个 VHOST，那就太好了。主机的错误页面来自哪里，全局本地还是来自 DMZ 服务器？我似乎无法关闭的 HTTP Trace 方法之类的东西（尽管使用了 TraceEnable 和 Rewrite 规则）

是否有任何更高级别的工具来管理 Apache 配置、依赖关系和可视化服务器之间的关系？

任何/所有答复表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:21:38.823

看看[http://www.apache-gui.com/](http://www.apache-gui.com/) 可能有用吗？

# python - 考虑到 NaN 的 Numpy cumsum

> ID：13051103
> 
> 赞同：11
> 
> 时间：2012-10-24T14:15:31.180
> 
> 标签：python, arrays, numpy, nan, cumsum

我正在寻找一种简洁的方法：

```
 a = numpy.array([1,4,1,numpy.nan,2,numpy.nan]) 
```

到：

```
 b = numpy.array([1,5,6,numpy.nan,8,numpy.nan]) 
```

我目前能做的最好的是：

```
b = numpy.insert(numpy.cumsum(a[numpy.isfinite(a)]), (numpy.argwhere(numpy.isnan(a)) - numpy.arange(len(numpy.argwhere(numpy.isnan(a))))), numpy.nan) 
```

有没有更短的方法来完成同样的事情？沿着二维数组的轴做一个 cumsum 怎么样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T19:51:07.550

[`Pandas`](http://pandas.pydata.org/)是一个建立在`numpy`. 它的 [`Series`](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#series)类有一个`cumsum`方法，它保留`nan`'s 并且比 DSM 提出的解决方案快得多：

```
In [15]: a = arange(10000.0)

In [16]: a[1] = np.nan

In [17]: %timeit a*0 + np.nan_to_num(a).cumsum()
1000 loops, best of 3: 465 us per loop

In [18] s = pd.Series(a)

In [19]: s.cumsum()
Out[19]: 
0       0
1     NaN
2       2
3       5
...
9996    49965005
9997    49975002
9998    49985000
9999    49994999
Length: 10000

In [20]: %timeit s.cumsum()
10000 loops, best of 3: 175 us per loop 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T14:26:32.783

怎么样（对于不太大的数组）：

```
In [34]: import numpy as np

In [35]: a = np.array([1,4,1,np.nan,2,np.nan])

In [36]: a*0 + np.nan_to_num(a).cumsum()
Out[36]: array([  1.,   5.,   6.,  nan,   8.,  nan]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T14:42:58.587

[掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.generic.html#the-numpy-ma-module)仅适用于这种情况。

```
>>> import numpy as np
>>> from numpy import ma
>>> a = np.array([1,4,1,np.nan,2,np.nan])
>>> b = ma.masked_array(a,mask = (np.isnan(a) | np.isinf(a)))
>>> b
masked_array(data = [1.0 4.0 1.0 -- 2.0 --],
         mask = [False False False  True False  True],
   fill_value = 1e+20)
>>> c = b.cumsum()
>>> c
masked_array(data = [1.0 5.0 6.0 -- 8.0 --],
         mask = [False False False  True False  True],
   fill_value = 1e+20)
>>> c.filled(np.nan)
array([  1.,   5.,   6.,  nan,   8.,  nan]) 
```

# haskell - 通过示例理解柯里化

> ID：13051108
> 
> 赞同：0
> 
> 时间：2012-10-24T14:16:14.700
> 
> 标签：haskell, functional-programming

我在某个地方读到了咖喱函数，这听起来很混乱。这个例子让我更加困惑。可以说我有一个功能：

```
power :: (Int, Float) -> Float -- computes the nth power of b
power (n, b) =
    if n == 0 then 1.0 else b * power (n-1, b) 
```

现在我定义了另一个`powerc:: Int -> Float -> Float`函数

```
powerc n b =
    if n == 0 then 1.0 else b * powerc (n-1) b 
```

有人可以向我解释一下函数`powerc`的咖喱版本`power`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:24:54.663

因为`powerc`现在允许部分应用：

```
square = powerc 2 
```

顺便提一句，

```
powerc = curry power 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T14:45:59.983

前者是一个接受`Int, Float`元组的函数，而后者本质上是一个函数链，每个函数接受一个*参数*并返回一个接受下一个参数的函数。

也就是说，`powerc`接受a 并返回一个接受 a并返回`Int`a 的*函数*。`Float``Float`

您可以通过部分应用程序来使用它。例如`square = powerc 2`，或者`cube = powerc 3`每个都是具有捕获`Float -> Float`值的简单函数。`n`

非柯里化函数不能提供这种简单的部分应用程序。当主要参数是函数行为的一种一次性配置时，最好使用部分应用程序。当试图重塑函数以传递给高阶函数时，它也变得特别有用。例如，您可以映射`powerc 2`（不定义）列表以将它们全部平方。

希望有帮助！

# entity-framework-5 - 遗留数据库上的实体框架迁移

> ID：13051110
> 
> 赞同：1
> 
> 时间：2012-10-24T14:16:17.020
> 
> 标签：entity-framework-5, entity-framework-migrations

我们有几个旧的 SQL Server 数据库，我们偶尔会对它们进行架构更改。我们目前有一个用 C++ 编写的实用程序，允许用户使用这些模式更改来更新他们的数据库。该实用程序当前生成动态 sql 以创建所有 DB 对象。我正在考虑重做这一点，并认为 EF 迁移可能是一个好方法。我已经阅读了一些关于该主题的内容，并且对它的工作原理有一个大致的了解。但是我很难弄清楚如何设置它来替换我们当前的程序（或者是否有可能）。目前，客户端可以在多个先前版本中的任何一个上。我假设我必须回到最旧的版本并从中创建我的模型/初始迁移，然后为每个版本更改生成增量迁移，以支持所有版本的更新。这是一个正确的假设吗？此外，目前我们的客户可能正在使用 sql server 2000、2005 或 2008。这会对我的设置方式（或者我什至可以）产生任何影响吗？此外，目标是创建一个带有（C# - 可能是 WPF）UI 的实用程序，用户可以使用它来操作迁移（最好是向上或向下）。我已经看到了很多关于如何从包管理器中的命令行操作迁移的示例，但没有看到很多关于如何创建具有友好 UI 的实用程序以在生产中升级/降级 DB 的实用程序。此外，我还没有看到任何显示如何在迁移中创建存储过程的东西（我们的数据库依赖于一些存储过程）。我假设，如果没有别的，我可以使用 Sql() 方法生成 SQL 查询来创建 SP。那是对的吗？有没有更好的办法？

我知道我的问题有点不具体，对此我深表歉意。但我仍处于学习这一点的开始过程中，我想知道这是否是一个好方法。任何指导将不胜感激。

谢谢，丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T07:59:55.353

首先，关于 SQL Server 支持，Entity Framework 并不真正支持 SQL Server 2000。请参阅这个问题： [EntityFramework SQL Server 2000?](https://stackoverflow.com/questions/7614748/entityframework-sql-server-2000)

关于支持所有多个版本的问题，您有正确的想法，即首先需要为最旧的版本生成初始迁移，然后逐步更改模型并生成迁移以支持更高版本。这将是一件痛苦的事情，因为迁移对于它们如何在数据库中表示模型是固执己见的，并且您将做很多事情以最终得到一个模型和一组完全代表它的迁移。具体关注点是索引、列长度、数据类型、存储过程、触发器、函数、分区。

该`Sql()`功能可以帮助您解决大多数问题，但在迁移中也有帮助的是 和 之类的`CreateIndex`功能`AlterColumn`。

为了自动化这一点，迁移绝对可以作为 powershell cmdlet 使用，它们本身就是 .Net 对象，因此可以通过编程方式调用。

由于这个问题已经存在一年了，我假设您已经决定是否要这样做。我的观点是，很难看出它值得付出努力。如果您将使用此数据库的代码库重新平台化为实体框架，那么这将是有意义的。否则肯定会有更好的工具用于数据库版本管理。我的第一个停靠港是 Redgate。

# mpi - 消息传递解决方案

> ID：13051111
> 
> 赞同：1
> 
> 时间：2012-10-24T14:16:24.293
> 
> 标签：mpi, message-queue, message-passing

我正在创建一个涉及并发参与者的应用程序，这些参与者通过预先指定的 FIFO 消息队列（本质上是一个[Kahn 进程网络](http://en.wikipedia.org/wiki/Kahn_process_networks)）进行通信。Actor 不（必须不）共享内存。

我在这个领域相对缺乏经验，在这方面我想知道第三方消息传递库（例如 MPI 实现 - open-MPI）是否优于我有点熟悉的 linux 消息队列的显着优势。

我不需要支持 linux 以外的操作系统或 C/C++ 以外的语言。该应用程序应该利用多处理器系统，但是这些进程将驻留在单个计算机系统上，并且不会分布在网络上。

# security - 如果您的网站不使用 cookie，您还需要担心 CSRF 保护吗？

> ID：13051114
> 
> 赞同：0
> 
> 时间：2012-10-24T14:16:28.877
> 
> 标签：security, csrf, csrf-protection

我已经阅读了一些关于 CSRF/XSRF 的内容，其中很多似乎都在谈论 cookie，因为它们可以参与自动让用户重新登录。

所以我只是想知道如果您的网站不使用 cookie，您还需要担心使用它还是需要担心在可公开访问的表单上使用它？

我假设您仍然这样做，因为用户可能已经在浏览器中登录，然后他们可能会接触到它。

至于公共表格，显然您想要保护这些表格的唯一原因是您不希望远程站点向它们发布正确的信息！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:47:53.343

Cross-Site-Request-Forgery，CSRF，不是针对实施 cookie 的站点的攻击，它是一种涉及使访问站点 A 的用户的浏览器调用站点 B 上的操作的能力的攻击 - 通常是他们在其中必须登录才能访问，但这不是必需的。

例如，假设您在站点 B 上有一个简单的“联系我们”表单。此表单可公开访问，无需用户登录。如果站点 A 可以通过 javascript（或 Flash 等）从客户端的浏览器提交此表单 - 那么这将被视为 CSRF，因为“联系我们”表单似乎来自从未真正访问过站点 B 的最终用户.

现在，当操作比简单的“联系我们”表单更复杂时，例如“将资金从账户 X 转移到账户 Y”，这种攻击要危险得多。这些操作通常需要用户登录到站点，该站点通常也使用某种形式的 cookie（会话 ID 作为 cookie 从浏览器来回发送到服务器）。如果没有 CSRF 保护（例如令牌），只要用户有一个主动打开的会话，就可以执行“传输”操作。但是，如果站点实际上保存了一个 cookie 以允许用户不需要每次都提交其凭据的“记住我”功能，那么 CSRF 应该能够在用户没有活动会话的情况下提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:33:35.997

当在客户端维护任何状态并在未经用户批准的情况下提交时，跨站点请求伪造是一个问题。

用于身份验证的最常见状态示例确实是 HTTP cookie，但也存在其他示例：

*   HTTP 身份验证：基本身份验证、摘要式身份验证或集成 Windows 身份验证；基本身份验证通常用于路由器管理界面，其中许多容易受到 CSRF 的攻击。

*   HTTPS 客户端证书；

*   边缘问题，例如使用客户端 IP 地址、HTTPS 会话 ID 或用户代理作为身份验证接受决策的不可靠部分。

如果在与相关主体相关联的提交正文中使用这些中的任何一个而没有可验证的服务器颁发的令牌，那么您就会遇到 CSRF 问题。

如果您没有任何身份验证概念，只有面向公众的表单，那么您就没有真正的 CSRF：用户 A 说服用户 B 发布公开可用的表单，如果无论如何，站点都没有做任何事情来区分来自用户 A 的提交和来自用户 B 的提交。

但是，一个开放的公共表单中没有任何服务器颁发的某种形式的令牌将更容易受到 DDoS 攻击：攻击者可以创建一个站点，迫使访问它的任何人提交表单，而不是对表单本身进行 DoS 攻击. 这会放大攻击并使其更难阻止，因为它来自许多来源。令牌也可用于防御简单形式的垃圾邮件机器人。这些不是 CSRF 问题，但可以通过相同类型的防御来缓解。

# c# - 从 BackgroundWorker 从它调用的方法中返回

> ID：13051134
> 
> 赞同：2
> 
> 时间：2012-10-24T14:17:55.970
> 
> 标签：c#, winforms, backgroundworker

我有一个`BackgroundWorker`调用方法的方法，该方法调用了一个方法……并且在某处我检查`CancellationPending`并想要退出`BackgroundWorker`.

有没有办法直接从那个深度嵌套的方法中做到这一点，或者它是否必须返回它的调用者，而调用者又会返回给它的调用者......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:20:25.010

您使用 a 的事实并没有什么特别之处`BackgroundWorker`- 用与处理深度嵌套方法调用相同的术语来考虑这一点。

换句话说，不，我想不出（非可怕的）方法可以直接做到这一点。

我能想到的最简洁的方法是`CancellationPending`在从每个嵌套方法返回后立即检查，在每个级别（以及 if `true`，返回）。

抛出特定异常并在顶层捕获相同的特定异常类型可以让您快速退出，但这并不是最佳实践（也就是说，不要使用任何非异常的异常，例如正常的流控制）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:20:36.607

> 调用方法的BackgroundWorker 调用方法...
> 
> 有没有办法直接从那个深度嵌套的方法中[取消]

你可以抛出一个异常。但这与仅对错误使用异常的一般建议相近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:28:04.483

你可以，但你不应该。

除了其他答案中提到的抛出异常之外，没有人敢说的邪恶是[Thread.Abort()](http://www.google.com/url?sa=t&rct=j&q=c#%20thread.abort&source=web&cd=1&sqi=2&ved=0CC8QFjAA&url=http://msdn.microsoft.com/en-us/library/system.threading.thread.abort%28v=vs.71%29.aspx&ei=EPqHUIGhEofg2AXk3IHgAw&usg=AFQjCNHCJuI9Cj5CpplEqoe9IhKJpXWBnA)。如果您从在 BackgroundWorker 线程上执行的函数中调用它，则整个线程将退出。[Thread.Abort() 的弊端已在本网站的其他地方](https://stackoverflow.com/questions/3244319/is-thread-abort-corruption-localized)详细讨论过。

话虽这么说，正确的做法是构建您的代码，以便当深度嵌套的函数决定线程应该退出时，这个意图会在堆栈中传播到主线程方法，然后可以干净地退出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:35:00.963

有很多方法，我更喜欢这个实现，虽然它限制了一点参数，但你可以改变它。要点是您将引用`BackgroudWorker`作为参数传递：

```
bkgw = new BackgroundWorker();
bkgw.DoWork += new DoWorkEventHandler(bkgw_DoWork);
bkgw.WorkerSupportsCancellation = true;

void bkgw_DoWork(object sender, DoWorkEventArgs e)
{
        BackgroundWorker b = (BackgroundWorker)sender;
        if (b.CancellationPending)
        {
            e.Cancel = true;
            return;
        }
        if (!Method1(b))
        {
            e.Cancel = true;
            return;
        }
        if (b.CancellationPending)
        {
            e.Cancel = true;
            return;
        }

}

bool Method1(BackgroundWorker caller)
{
    //some code
    if (caller.CancellationPending)
        return false;
    if (!Method2(caller))
        return false;
    //some code
    return true;
}
bool Method2(BackgroundWorker caller)
{
    //some code
    if (caller.CancellationPending)
        return false;
    //some code
    return true;
} 
```

# ios - 透明键盘？

> ID：13051137
> 
> 赞同：1
> 
> 时间：2012-10-24T14:18:07.470
> 
> 标签：ios, uitextfield

几乎完成了我的应用程序。所有计算，......现在正在工作。因为我在视图上有几个文本字段，当我显示键盘时，我看不到我输入的字段它被键盘隐藏了。

您是否有一种显示透明键盘的方法，然后人们将能够通过透明度看到。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:39:02.290

您应该阅读Apple 文档中[“文本、Web 和编辑编程指南”中的“键盘管理”部分。](https://developer.apple.com/library/archive/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

在“移动位于键盘下方的内容”段落中，他们解释了如何正确管理键盘以及如何滚动视图以使当前文本字段始终可见且不会被键盘隐藏。

[![滚动键盘](../Images/5e8878bdaeab39868c2dbeb441e1f835.png)](https://i.stack.imgur.com/19Sia.jpg)
[（来源：[apple.com](http://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/Art/keyboard_adjust.jpg)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:34:22.543

您需要在 .m 文件中为要添加透明键盘的每个视图添加以下代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    textField1.keyboardType = UIKeyboardTypeDecimalPad;
    textField1.keyboardAppearance = UIKeyboardAppearanceAlert;
    textField2.keyboardType = UIKeyboardTypeDecimalPad;
    textField2.keyboardAppearance = UIKeyboardAppearanceAlert;

} 
```

textField1 和 textField2 只是示例。您需要为每个字段添加这两行。这是有保证的，我有 2 个带有这些的应用程序，并且在 2 周前刚刚更新它们，它们从未被拒绝。

****您应该更改为您想要的键盘类型。**

![半透明键盘](../Images/fa34ca4dabf1242e8004fa050ad7d982.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:22:48.547

没有透明键盘之类的东西。您需要移动文本字段，使其在显示键盘时可见。

# java - 在 Dom 中创建新的孩子

> ID：13051140
> 
> 赞同：0
> 
> 时间：2012-10-24T14:18:13.090
> 
> 标签：java, xml, dom, architecture

我已经创建了创建 DOM 对象的测试类，目前我创建了一些硬编码的属性，例如我创建了元素名称结构，并且对于我们有属性的结构，我创建了不同的类来使用构造函数处理属性。

这些是来自 main 方法的代码

```
Properties properties = new Properties(document);
          Element Property = properties.getProperty();

 Properties.setProperty(Property, "product_id","10", "Pro ID");
 Type.appendChild(Property);

   Properties properties1 = new Properties(document);
    Element Property1 = properties1.getProperty();

   Properties.setProperty(Property1, "curr","5", "Curr Code");
   Type.appendChild(Property1); 
```

构造函数中的代码是

```
public Properties(Document document) {
    Property = document.createElement(PROPERTY);
} 
```

正如你所看到的创建新属性我已经创建了元素**属性和属性**1等硬编码，这是有问题的，因为会发生什么
如果我将有一个带有数据属性列表的表格，我应该如何处理它？我不确定构造函数是否是正确的解决方案，我的问题是如何做得更好？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:20:08.740

这取决于你想要做什么。

如果您想创建一个 DOM 以便您可以测试构建 DOM 的类，那么简单的硬编码调用就可以正常工作。您只需确保使用足够多的调用组合来彻底测试您的 API。

另一方面，如果您需要创建一个 DOM，以便您可以继续测试需要某种 DOM 输入的 API，您可能需要考虑简单地以 XML 文档的形式创建这些 DOM，然后使用org.w3c.dom API 从 XML 创建 DOM。

# php - 对象名称中的php句点

> ID：13051143
> 
> 赞同：2
> 
> 时间：2012-10-24T14:18:17.863
> 
> 标签：php

> **可能重复：**
> [名称中带有点的 php 对象属性](https://stackoverflow.com/questions/5351018/php-object-attribute-with-dot-in-name)

我正在处理 PHP，获取 Microsoft Web 服务返回的对象，并且对象名称中有句点！

```
 object(stdClass)#22 (1) {
  ["DAE.Country"]=>
  array(24) {
    [0]=>
    object(stdClass)#23 (2) {
      ["CountryName"]=>
      string(4) "Asia"
      ["ID"]=>
      string(2) "27"
    }
}
} 
```

如何在 PHP 中访问名称中带有句点的对象？

```
$response->DAE_GetCountryListResult->DAE.Country; 
```

和

```
$response->DAE_GetCountryListResult-['DAE.Country']; 
```

都失败了。感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:19:51.757

您可以使用此语法来访问所需的属性：

```
$obj->{'DAE.Country'} 
```

您还可以在大括号内使用变量和表达式：

```
$prefix = 'DAE';
$name = 'Country';
$another_obj = $obj->{"$prefix.$name"}; 
```

# google-maps - 如何添加或显示邮政编码边界谷歌地图 v3

> ID：13051149
> 
> 赞同：1
> 
> 时间：2012-10-24T14:18:33.700
> 
> 标签：google-maps, google-maps-api-3

通过地理编码器搜索邮政编码后，我想显示该邮政编码区域周围的边界，如谷歌地图所示。我在 maps.google.com 中以搜索 02201 为例，它显示了整个 zip 区域周围的边界，表示该 zip 范围下的所有区域。这是我使用地理编码器搜索邮政编码的代码，我想在该邮政编码区域周围添加边界。我想实现。请提供任何解决方案。请查看此链接以获取图片[http://i46.tinypic.com/beyerq.jpg](http://i46.tinypic.com/beyerq.jpg)

```
function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
         map.fitBounds(results[0].geometry.viewport);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:21:41.020

听起来你正在尝试做这样的事情[，](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map.html)但查询只显示指定的邮政编码多边形。 [喜欢这个类似的帖子](https://stackoverflow.com/questions/11831968/google-maps-single-country-boundary)或[这个](https://stackoverflow.com/questions/10874686/google-maps-v3-draw-german-state-polygons)。

# c++ - 作为集成商，如何根据症状避免重复出现代码错误？

> ID：13051150
> 
> 赞同：1
> 
> 时间：2012-10-24T14:18:35.707
> 
> 标签：c++, c, bug-tracking

在将子模块发布集成到父项目中时，我经常遇到只有在集成时才可见和触发的错误。这个是正常的。错误是正常的。我们调试它们，修复它们并将它们提交到子模块中。

现在发生了好几次这样的修复被子模块开发人员覆盖，并在集成该子模块的项目中再次发生。

随着时间的推移，由于几乎没有对他们的行为和症状进行智能跟踪，它碰巧被遗忘了，然后又被修复了。这是非常耗时的，尤其是在棘手的情况下。

因此我的问题是：当我再次看到它的症状时，我如何在技术上存储一个错误的“行为”以被“提醒”？

有没有解决我的问题的工具。我可以用什么来按症状对已修复的错误进行分类？

我的一个想法是使用自定义模式扩展静态分析器（例如覆盖率或 clang-analyzer）。这不会解决行为/症状方法，但我可以在编译期间使用第一次修复期间创建的模式来分析代码：“如果这段代码是以某种方式编写的，那就不好了”。根据我的经验，我可以通过这种方式解决相当多的错误，但不是全部。

我添加了 C 和 C++ 标签，因为这些是我正在使用的语言。

**更新**：由于评论中有问题：我们正在使用 git。并且重新出现的错误是在第一次更正后数月甚至数年提交的。

**更新**：我们正在使用 Mantis 进行错误跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:42:27.890

这不是一个工具，而是一个过程。我已经使用 BFV（错误修复验证）测试来做到这一点。每次修复错误时，都会为其添加自动 BFV 测试。测试的名称将是 BFV#bugno - 这是错误数据库中的错误编号。作为提供给测试的所有构建的一部分，运行所有 BFV 测试作为回归测试的一部分。如果 BFV2042 失败，您可以在错误数据库中查找 Bug#2042 进行提醒。如果您在接受来自子模块分支的合并之前运行回归测试，那就更好了。

# php - 在 div 上居中图像，如 wordpress 缩略图

> ID：13051152
> 
> 赞同：1
> 
> 时间：2012-10-24T14:18:50.660
> 
> 标签：php, javascript, jquery, ajax, wordpress

当您编辑帖子时，Wordpress 使用一个功能将图像完全居中在缩略图上，因此当我编辑帖子时它看起来像这样：

![在此处输入图像描述](../Images/57e686d859485e3d7e08093b77f34f81.png)

我试图在 wordpress 页面上以这种方式显示图像，但我不知道如何创建一个像使用 wordpress 那样的功能：

```
$s_x = floor( ($orig_w - $crop_w) / 2 );
$s_y = floor( ($orig_h - $crop_h) / 2 ); 
```

所以这就是它在我的页面中的样子：

![在此处输入图像描述](../Images/60711d49a7d026f710ff567ed750e877.png)

它只是从顶部显示，所以它会剪切图像，没有中心或调整大小

这是我的标记：

```
 echo '<div class="aimagediv" >'; //        
            echo '<img src="'.$s['project_image'].'" alt="" width="270" />';
            echo '</div>'; 
```

我限制宽度只是为了显示一些东西，我知道这样做是错误的，这就是为什么我正在寻找一个函数来调整图像并将图像居中在 div 上。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:28:15.070

我认为您最好将此图像作为div的背景图像，然后使用css将背景大小更改为覆盖，然后将背景位置更改为中心...

**HTML**

```
echo '<div class="image" style="background-image:url(\''.$s['project_image'].'\');">';

echo '</div>';
?>​ 
```

**CSS**

```
.image{
width: 270px;
height: 270px;
background-size:cover;
background-position: center;
}​ 
```

这是一个展示它的jsfiddle：

[http://jsfiddle.net/Jhu2Y/](http://jsfiddle.net/Jhu2Y/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:31:10.890

这个div除了图片还有其他内容吗？您可以使用 CSS 定义 div 的高度/宽度，并将图像设置为背景大小为封面的背景图像......像这样：

** 编辑——在 OP 使用 echo 之前和之后添加 PHP 标记 **

```
<?php
    // do all the php code here that you want before the image div
?>

<style type="text/css">
div.aimagediv {
    height:270px;
    width:270px;
    background-repeat:no-repeat;
    background-position:center;
    background-size:cover;
}
div.aimagediv:hover {
    cursor:pointer;
}
</style>

<div class="aimagediv" style="background-image:url('<?=$s['project_image']?>');"></div>

<?php
    // do the rest of your php stuff here
?> 
```

然后，如果你想让 div 可点击，你可以使用这样的 onclick ：（用这个替换上面的 div 行）

```
<div class="aimagediv" style="background-image:url('<?=$s['project_image']?>');" onclick="window.location='page_id=42&slide=<?=$i?>';"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:26:28.150

它的容器可能高度有限。因此，当您设置唯一的宽度时，它将拉伸图像以适应该宽度，并保持纵横比。如果只设置高度，则相反。如果同时设置宽度和高度，它将拉伸图像以适应这些边界（因此可能会搞砸纵横比。因此，在您的情况下，设置高度，或同时设置两者（但确保比例正确）

如果您希望图像相对于其容器居中，请使用 CSS 将左右边距设置为自动

# c# - 可移植类库是否适用于 .net 3.5？

> ID：13051154
> 
> 赞同：6
> 
> 时间：2012-10-24T14:19:11.920
> 
> 标签：c#, visual-studio-2010, .net-3.5, visual-studio-2012, portable-class-library

我正在运行 Windows 8，并且同时拥有 Visual Studio 2010 Ultimate w/sp1 和 Visual Studio 2012 Ultimate，我正在尝试创建一个支持 .net 3.5 及更高版本的可移植类库。

当我第一次尝试创建 PCL 时，我会看到这样的屏幕：![PCL 选择画面](../Images/501f5ca5f34fb16945929b4d56d71472.png)

我注意到 .net 3.5 不在列表中，所以我单击[“安装其他框架”](http://msdn.microsoft.com/en-US/hh487282.aspx)并找到了 3.5 版的 Targeting Pack。但是当我下载并运行“dotnetfx35setup.exe”时，什么也没有发生。当我回到 VS 并尝试创建一个新的可移植类库时，它列出了与以前相同的目标框架。

我还打开了 .NET Framework 3.5 的 Windows 功能，现在没有想法了。这是一个屏幕截图，以防我错过了其他内容。

![Windows功能](../Images/aeed6d63c85f664ce481abf19b88d774.png)

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:48:39.267

.NET Framework 3.5 没有可移植的配置文件。您在 Visual Studio 2010 中是否有此问题？我注意到，在我自己的计算机上安装 Visual Studio 2012 后，实际上删除了 .NET Framework 3.5，可能是因为 .NET 4.5 包含它。

因为您仍然可以根据需要定位到 .NET 3.5，而不是可移植配置文件 (PCL)，[本文](http://msdn.microsoft.com/en-us/library/gg597391.aspx)很容易证明您想要的内容根本不受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:48:48.030

正如其他人所说，便携式库不支持.NET Framework 3.5。

页面底部的链接是一个通用登录页面，其中列出了我们所有框架的所有*目标包*，而不仅仅是那些适用于便携式的目标包，很抱歉造成混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T22:00:14.213

Visual Studio（2010 或 2012）允许我在另一个面向 .NET 3.5 的类库中引用普通旧 CLR 对象 (POCO) 的简单可移植类库。该项目也适用于 Visual Studio 2015。

在 PCL 中使用某些 .NET 4.5 功能可能不会阻止其编译，但会使其与 .NET 3.5 的引用不兼容。

# nginx - 80端口上的Nginx和wowza。如何配置

> ID：13051156
> 
> 赞同：0
> 
> 时间：2012-10-24T14:19:13.417
> 
> 标签：nginx, wowza

我有 1 个 IP 的专用服务器。端口 80 上的 Nginx 用作反向代理。在 nginx 后面几个后端（Apache、PHP Fast CGI）我也有 wowza。它在端口 1935 上通过 RTMP 可以正常工作。我想允许通过端口 80 上的 RTMPT 协议连接到 wowza。

是否可以将 nginx 配置为将 RTMPT 请求代理到 wowza 服务器？

Wowza 支持没有帮助 [link1](http://www.wowza.com/forums/showthread.php?18208-nginx-and-rtmp-on-port-80) [link2](http://www.wowza.com/forums/showthread.php?1252-Reverse-Proxy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:42:50.110

您可以将 Wowza 配置为侦听端口 80（推荐不使用 nginx）或使用 RTMPT 协议，该协议是 HTTP 之上的 RTMP

Base Nginx 仅代理 HTTP(s) 和 SMTP，所以是的，这应该是可能的，但可能更慢（更高的协议开销，CPU 占用）

*nginx 中的示例配置*

```
server
{
     listen          80;
     server_name     _;

     location /
     {
           proxy_set_header        Host            $host;
           proxy_buffering         Off;

           proxy_pass              http://127.0.0.1:YOUR_WOWZA_RTMPT_PORT;
    }
} 
```

# iphone - ld 无法为架构 armv7 映射文件 errno=22

> ID：13051163
> 
> 赞同：0
> 
> 时间：2012-10-24T14:19:40.567
> 
> 标签：iphone, ios, build, arm, llvm-gcc

当命令行为 iPhone (iOS) 构建项目时，我收到以下错误：

> ld 无法为架构 armv7 映射文件 errno=22

但是，当通过 lipo - info 检查库和对象时，它们支持 armv7。有没有人遇到过这个问题和/或知道如何完成链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:48:35.163

err=22 表示“传递给 ld 的参数无效”

在您的日志中，您会在错误行上方看到一条长长的行，这是传递给 ld 的 ACTUAL 参数。你需要仔细检查，弄清楚每个部分的含义，找出 Xcode 出错的地方，然后处理它。

默认假设：它可能是包含不受支持的字符的文件名（或包含空格且周围没有“”的名称）。如果是这样，那是 ld 中的一个错误 - 但也是 Xcode 中的一个错误，它首先允许字符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T14:38:19.823

您需要为 armv7 编译您在 iOS 项目中使用的所有静态库。如果不是，它可能在模拟器上工作，但永远不会在设备上工作。

# ruby-on-rails - Paperclip Rails url 和asset_host

> ID：13051166
> 
> 赞同：1
> 
> 时间：2012-10-24T14:19:55.990
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, cdn

根据[Paperclip S3 Docs](http://rubydoc.info/gems/paperclip/Paperclip/Storage/S3)，可以在配置中指定`:url`具有四个可能值的选项。有与此选项相关的评论说：

> S3 url 的第四个选项是 :asset_host，它使用 Rails 的内置 assets_host 设置。
> 
> 要从回形针对象中获取完整的 url，请使用 image_path 助手；这就是 image_tag 用来生成 img 标签的 url。

这两条评论似乎相互冲突（对我来说）。如果 Paperclip 可以使用这些`asset_host`设置，它似乎几乎有必要生成完整的 url（因为 assets_host 只指定了该 url 的开始（主机））

但它接着说您需要使用帮助程序来获取完整的网址？？

我问这个的原因是因为我想要为图像 url 序列化生成完整的 url（即，如果我们返回带有 image_urls 的 json，我们希望那些从我们的 CDN 提供）。

现在我已经创建了一个辅助模块，它可以扩展`extend ::Sprockets::Helpers::RailsHelper`为在 image_url 被序列化时手动生成完整的 url，但它是手动的（将来有人可能会忘记这样做）

有什么想法吗？

# smartcard - 获取智能卡 uid 的 APDU 命令

> ID：13051167
> 
> 赞同：11
> 
> 时间：2012-10-24T14:19:59.083
> 
> 标签：smartcard, uniqueidentifier, apdu

我正在寻找 APDU 来查找非接触式 ISO 14443 智能卡的 UID 以及如何使用它在 Linux 终端中打印。问题是我发现很多人都在谈论它，但没有解决方案。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-05T12:42:20.083

“获取数据命令”在 PCSC 3 v2 中定义。如果您的驱动程序符合 PCSC v2，您可以使用它获取 UID：

```
Class = 0xFF
INS = 0xCA
P1 = 0x00
P2 = 0x00
Le = 0x00 (return full length: ISO14443A single 4 bytes, double 7 bytes, triple 10 bytes, for ISO14443B 4 bytes PUPI, for 15693 8 bytes UID) 
```

返回值为：

```
Data+SW1SW2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T15:44:02.490

看[另一个答案](https://stackoverflow.com/a/19789290/589259)，现在可能大多数读卡器都支持对读卡器的直通。

* * *

没有人能帮上忙，因为 UID 是在 ISO 14443 T=CL 传输协议中指定的，而 APDU 是在 ISO 7816 应用层协议中指定的。

因此，您需要为非接触式阅读器访问较低级别的 API。PCSC 是不够的（除非已经为返回 UID 的特定读取器实现了直通）。

# javascript - 我想从选项中获得不同的值

> ID：13051169
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:20:10.500
> 
> 标签：javascript, jquery, html, json, select

我有一个带有价格、型号和品牌的对象汽车。我想在选择中显示这个。

我有一个看起来像这样的选择：

```
<select>
    <option>Ford Mustang 30000</option>
    <option>Alfa Romeo giuletta 25000</option>
</select> 
```

我该怎么做才能获得所选选项的价格。所以当我选择选项时，我可以获得选项的每个细节（品牌、型号、价格）

```
var brand = ...
var model = ...
var price = ... 
```

我尝试使用 JSONObject 并覆盖 toString() 方法，但是我无法将其转换回 JSONObject ..

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:23:37.777

您可以使用 html5`data-`属性来存储选项本身的信息，然后使用 js 访问它。

```
<select id="cars">
<option data-brand='Ford' data-model='Mustang' data-price='30000'>Ford Mustang 30000</option>
</select> 
```

在js中

```
var $selected_car = $('#cars :selected'); 
var brand = $selected_car.data('brand');
var model = $selected_car.data('model');
var price = $selected_car.data('price'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:25:30.107

如果您使用的是 HTML5，则可以使用`data`属性。例如：

```
<select>
    <option value="30000" data-brand="Ford" data-model="Mustang">Ford Mustang 30000</option>
    <option value="25000" data-brand="Alfa Romeo" data-model="Giulietta">Alfa Romeo giuletta 25000</option>
</select> 
```

然后在代码中你可以选择这些：

```
$("select").change(function() {
    var $select = $(this);
    var $option = $("option:selected", $select)

    var brand = $option.data("brand");
    var model = $option.data("model");
    var price = $select.val();

    // do your thing...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:29:14.563

如果您不使用 html5，则可以在每个选项的 value 属性中编码所有数据。

```
<option value="{'brand':'Ford','model':'Mustang','price':'$30,000'}">Ford Mustang</option>

$("select").change(function() {
    var $select = $(this);
    var $option = $("option:selected", $select)
    var data = jQuery.parseJSON($option.value);

    var brand = data.brand;
    var model = data.model;
    var price = data.price;

    // do your thing...
}); 
```

# php - Zend 框架 2 行为

> ID：13051173
> 
> 赞同：1
> 
> 时间：2012-10-24T14:20:20.517
> 
> 标签：php, bdd, zend-framework2, behat

是否有一些关于如何使用 Zend Framework 2 配置 Behat 的教程或示例？我已经尝试了两天，但我无法弄清楚。

任何帮助，将不胜感激。我正在尝试使用 Zend Framework 2 进行 BDD。

编辑：

基本上，我在尝试通过 composer 安装 Behat 时遇到了问题。这是我的composer.json：

```
{
    "name": "bla",
    "description": "Bla",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.4",
        "zendframework/zendframework": "2.*",
        "doctrine/doctrine-module": "dev-master",
        "doctrine/doctrine-orm-module": "0.*",
        "gedmo/doctrine-extensions": "dev-master"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.*",
        "behat/behat": "2.4.*@stable"
    }
} 
```

当我运行时：

```
php composer.phar update --dev 
```

我得到：

```
php composer.phar update --dev
Loading composer repositories with package information
Updating dependencies
  - Updating gedmo/doctrine-extensions dev-master (fbf4a3 => 3033d7)
    Checking out 3033d7ecc6633b20bec3e9bcc2336219f3818068

Loading composer repositories with package information
Updating dev dependencies
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Conclusion: don't install behat/behat v2.4.4
    - Conclusion: don't install behat/behat v2.4.3
    - Conclusion: don't install behat/behat v2.4.2
    - Conclusion: don't install behat/behat v2.4.1
    - Conclusion: remove doctrine/common dev-master
    - symfony/symfony 2.0.7 requires doctrine/common 2.1.* -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev.
    - symfony/symfony 2.0.x-dev requires doctrine/common >=2.1,<2.3-dev -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev, doctrine/common 2.2.0, doctrine/common 2.2.0-RC1, doctrine/common 2.2.0-RC3, doctrine/common 2.2.0-RC4, doctrine/common 2.2.0-RC5, doctrine/common 2.2.0BETA1, doctrine/common 2.2.0BETA2, doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev.
    - symfony/symfony v2.0.10 requires doctrine/common 2.1.* -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev.
    - symfony/symfony v2.0.11 requires doctrine/common 2.1.* -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev.
    - symfony/symfony v2.0.12 requires doctrine/common 2.1.* -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev.
    - symfony/symfony v2.0.13 requires doctrine/common 2.1.* -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev.
    - symfony/symfony v2.0.14 requires doctrine/common 2.1.* -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev.
    - symfony/symfony v2.0.15 requires doctrine/common >=2.1,<2.3-dev -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev, doctrine/common 2.2.0, doctrine/common 2.2.0-RC1, doctrine/common 2.2.0-RC3, doctrine/common 2.2.0-RC4, doctrine/common 2.2.0-RC5, doctrine/common 2.2.0BETA1, doctrine/common 2.2.0BETA2, doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev.
    - symfony/symfony v2.0.16 requires doctrine/common >=2.1,<2.3-dev -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev, doctrine/common 2.2.0, doctrine/common 2.2.0-RC1, doctrine/common 2.2.0-RC3, doctrine/common 2.2.0-RC4, doctrine/common 2.2.0-RC5, doctrine/common 2.2.0BETA1, doctrine/common 2.2.0BETA2, doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev.
    - symfony/symfony v2.0.17 requires doctrine/common >=2.1,<2.3-dev -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev, doctrine/common 2.2.0, doctrine/common 2.2.0-RC1, doctrine/common 2.2.0-RC3, doctrine/common 2.2.0-RC4, doctrine/common 2.2.0-RC5, doctrine/common 2.2.0BETA1, doctrine/common 2.2.0BETA2, doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev.
    - symfony/symfony v2.0.18 requires doctrine/common >=2.1,<2.3-dev -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev, doctrine/common 2.2.0, doctrine/common 2.2.0-RC1, doctrine/common 2.2.0-RC3, doctrine/common 2.2.0-RC4, doctrine/common 2.2.0-RC5, doctrine/common 2.2.0BETA1, doctrine/common 2.2.0BETA2, doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev.
    - symfony/symfony v2.0.9 requires doctrine/common 2.1.* -> satisfiable by doctrine/common 2.1.3, doctrine/common 2.1.4, doctrine/common 2.1.x-dev.
    - symfony/symfony 2.1.x-dev requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony dev-master requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony 2.2.x-dev requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.0 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.0-BETA1 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.0-BETA2 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.0-BETA3 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.0-BETA4 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.0-RC1 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.0-RC2 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.1 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - symfony/symfony v2.1.2 requires doctrine/common >2.2,<2.4-dev -> satisfiable by doctrine/common 2.2.1, doctrine/common 2.2.2, doctrine/common 2.2.3, doctrine/common 2.2.x-dev, doctrine/common 2.3.0, doctrine/common 2.3.0-BETA1, doctrine/common 2.3.0-RC1, doctrine/common 2.3.0-RC2, doctrine/common 2.3.0-RC3, doctrine/common 2.3.x-dev.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.1.3.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.1.4.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.1.x-dev.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.0.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.0-RC1.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.0-RC3.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.0-RC4.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.0-RC5.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.0BETA1.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.0BETA2.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.1.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.2.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.3.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.2.x-dev.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.3.0.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.3.0-BETA1.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.3.0-RC1.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.3.0-RC2.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.3.0-RC3.
    - Can only install one of: doctrine/common dev-master, doctrine/common 2.3.x-dev.
    - Installation request for doctrine/common dev-master -> satisfiable by doctrine/common dev-master.
    - Installation request for behat/behat 2.4.*@stable -> satisfiable by behat/behat v2.4.0, behat/behat v2.4.1, behat/behat v2.4.2, behat/behat v2.4.3, behat/behat v2.4.4.
    - Conclusion: remove symfony/console dev-master|install symfony/symfony 2.0.7|install symfony/symfony 2.0.x-dev|install symfony/symfony 2.1.x-dev|install symfony/symfony v2.0.10|install symfony/symfony v2.0.11|install symfony/symfony v2.0.12|install symfony/symfony v2.0.13|install symfony/symfony v2.0.14|install symfony/symfony v2.0.15|install symfony/symfony v2.0.16|install symfony/symfony v2.0.17|install symfony/symfony v2.0.18|install symfony/symfony v2.0.9|install symfony/symfony v2.1.0|install symfony/symfony v2.1.0-BETA1|install symfony/symfony v2.1.0-BETA2|install symfony/symfony v2.1.0-BETA3|install symfony/symfony v2.1.0-BETA4|install symfony/symfony v2.1.0-RC1|install symfony/symfony v2.1.0-RC2|install symfony/symfony v2.1.1|install symfony/symfony v2.1.2
    - behat/behat v2.4.0 requires symfony/console >=2.0.0,<2.2.0-dev -> satisfiable by symfony/console 2.0.4, symfony/console 2.0.5, symfony/console 2.0.6, symfony/console 2.0.7, symfony/console 2.0.x-dev, symfony/console 2.1.x-dev, symfony/console v2.0.10, symfony/console v2.0.12, symfony/console v2.0.13, symfony/console v2.0.14, symfony/console v2.0.15, symfony/console v2.0.16, symfony/console v2.0.17, symfony/console v2.0.18, symfony/console v2.0.9, symfony/console v2.1.0, symfony/console v2.1.0-BETA1, symfony/console v2.1.0-BETA2, symfony/console v2.1.0-BETA3, symfony/console v2.1.0-BETA4, symfony/console v2.1.0-RC1, symfony/console v2.1.0-RC2, symfony/console v2.1.1, symfony/console v2.1.2, symfony/symfony 2.0.7, symfony/symfony 2.0.x-dev, symfony/symfony 2.1.x-dev, symfony/symfony v2.0.10, symfony/symfony v2.0.11, symfony/symfony v2.0.12, symfony/symfony v2.0.13, symfony/symfony v2.0.14, symfony/symfony v2.0.15, symfony/symfony v2.0.16, symfony/symfony v2.0.17, symfony/symfony v2.0.18, symfony/symfony v2.0.9, symfony/symfony v2.1.0, symfony/symfony v2.1.0-BETA1, symfony/symfony v2.1.0-BETA2, symfony/symfony v2.1.0-BETA3, symfony/symfony v2.1.0-BETA4, symfony/symfony v2.1.0-RC1, symfony/symfony v2.1.0-RC2, symfony/symfony v2.1.1, symfony/symfony v2.1.2.
    - Can only install one of: symfony/console dev-master, symfony/console 2.0.4.
    - Can only install one of: symfony/console dev-master, symfony/console 2.0.5.
    - Can only install one of: symfony/console dev-master, symfony/console 2.0.6.
    - Can only install one of: symfony/console dev-master, symfony/console 2.0.7.
    - Can only install one of: symfony/console dev-master, symfony/console 2.0.x-dev.
    - Can only install one of: symfony/console dev-master, symfony/console 2.1.x-dev.
    - Can only install one of: symfony/console v2.0.10, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.12, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.13, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.14, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.15, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.16, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.17, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.18, symfony/console dev-master.
    - Can only install one of: symfony/console v2.0.9, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.0, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.0-BETA1, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.0-BETA2, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.0-BETA3, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.0-BETA4, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.0-RC1, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.0-RC2, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.1, symfony/console dev-master.
    - Can only install one of: symfony/console v2.1.2, symfony/console dev-master.
    - Installation request for symfony/console dev-master -> satisfiable by symfony/console dev-master, symfony/symfony dev-master, symfony/symfony 2.2.x-dev. 
```

当我删除 behat 行时，composer json 文件工作正常。

编辑2：

我的临时解决方案：

```
"scripts": {
    "post-update-cmd": [
        "rm -rf vendor/Behat",
        "git clone git://github.com/Behat/Behat.git",
        "cp composer.phar Behat/composer.phar",
        "cd Behat && git submodule update --init",
        "cd Behat && php composer.phar install",
        "cd Behat && php composer.phar require guzzle/guzzle:3.0.*",
        "mv Behat vendor/Behat",
        "ln -sf ../Behat/bin/behat vendor/bin/"
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:31:17.840

Ryan Weaver 刚刚发布了 ZendCon 的幻灯片，内容是：[使用 Behat 和 Zend Framework 2 进行行为驱动开发](https://speakerdeck.com/weaverryan/behavioral-driven-development-with-behat-and-zend-framework-2)。

您可以跳到[幻灯片 56](https://speakerdeck.com/weaverryan/behavioral-driven-development-with-behat-and-zend-framework-2?slide=56)以查看如何在 ZF2 上安装 Behat：

1.  下载作曲家

    ```
    $> curl -s http://getcomposer.org/installer | php 
    ```

2.  为 Behat 创建（或更新）composer.json（[参见文档](http://docs.behat.org/quick_intro.html#method-1-composer)）

    ```
    {
        "require": {
            "behat/behat": "2.4.*@stable"
        },
        "minimum-stability": "dev",
        "config": {
            "bin-dir": "bin/"
        }
    } 
    ```

3.  下载 Behat 库

    ```
    $> php composer.phar install 
    ```

4.  然后从控制台启动 Behat

    ```
    php bin/behat --help 
    ```

**编辑：**

你不应该把 behat 放进去`require-dev`，试试这个`composer.json`：

```
{
    "name": "bla",
    "description": "Bla",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.4",
        "zendframework/zendframework": "2.*",
        "doctrine/doctrine-module": "dev-master",
        "doctrine/doctrine-orm-module": "0.*",
        "gedmo/doctrine-extensions": "dev-master",
        "behat/behat": "2.4.*@stable"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.*"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:35:10.053

这工作，最后：

```
{
    "name": "bla",
    "description": "bla",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.4",
        "symfony/console": ">=2.0.0,<2.2.0-dev",
        "symfony/config": ">=2.0.0,<2.2.0-dev",
        "symfony/dependency-injection": ">=2.0.0,<2.2.0-dev",
        "symfony/event-dispatcher": ">=2.0.0,<2.2.0-dev",
        "symfony/translation": ">=2.0.0,<2.2.0-dev",
        "symfony/yaml": ">=2.0.0,<2.2.0-dev",
        "symfony/finder": ">=2.0.0,<2.2.0-dev",
        "zendframework/zendframework": "2.*",
        "doctrine/doctrine-module": "dev-master",
        "doctrine/doctrine-orm-module": "0.*",
        "gedmo/doctrine-extensions": "dev-master"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.*",
        "behat/behat": "2.4.*@stable",
        "guzzle/guzzle": "3.0.*"
    },
    "autoload": {
        "psr-0": {
            "Behat\\Behat": "src/"
        }
    }
} 
```

# entity - 如何在 JBoss AS7.1.x 中管理 HSQLDB

> ID：13051174
> 
> 赞同：1
> 
> 时间：2012-10-24T14:20:22.537
> 
> 标签：entity, jboss7.x, hsqldb, ejb-3.1

这是我第一次尝试将 EJB3.1 实体与 JBoss AS7.1.1 服务器一起使用。我发现 HSQLDB 不再包含在 JBoss 版本 7 中。首先，我通过管理控制台 --> 部署 --> 管理部署添加了 hsqldb.jar。之后我通过 Profil --> Connector -> Datasources 添加了一个新的数据源

我的第一个示例代码工作正常：

```
[...]     
InitialContext ic = new InitialContext();
DataSource ds = (DataSource) ic.lookup("java:/DefaultDS");
con = ds.getConnection();
stmt = con.createStatement();
stmt.execute("drop table timers;");
stmt.execute("Create table timers(id char(10));");
stmt.execute("INSERT INTO timers  (id) VALUES (20)");
stmt.execute("INSERT INTO timers  (id) VALUES (21)");
ResultSet number = stmt.executeQuery("select * from timers");
[...] 
```

我的问题是如何管理（=创建、删除和更新新表）在文件夹 jobss\standalone\data\hypersonic 中创建的数据库。目前我没有“概述”创建了哪些表，它们的结构和数据。

是否有人为我提供处理该问题的提示或教程？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T09:59:26.050

就我而言，这比我一开始想的要容易。我需要管理存储在 AS 7.1.x 服务器中的数据库。由于缺少 JMX 控制台，我无法通过管理访问该数据库。我已经添加了数据源和管理部署，如第一篇文章中所述。

要管理这样的数据库，您可以使用“HSQLDB 数据库管理器”，选择“HSQL 数据库引擎独立”作为类型，选择“jdbc:hsqldb:file:«MY_PATH_TO_DB_FOLDER_IN_JBOSS»”作为 URL。现在我可以在服务器和 EJB 环境之外管理数据库。

谢谢你的帮助和你的灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:18:01.990

您总是查询 INFORMATION_SCHEMA 表以找出哪些表已经存在。一旦你知道一个表存在，你就可以执行一个你知道不会花费很长时间的查询，以便了解数据的状态。

例如，第一个查询将显示是否有 'TIMERS' 表，第二个查询将显示表中是否有任何数据：

```
SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'TIMERS'
SELECT * FROM TIMERS LIMIT 1 
```

尝试始终在每个表上定义一个主键以加快查询速度。

要访问嵌入在应用服务器中的数据库，您应该将 org.hsqldb.server.Servlet 类添加为 servlet，然后使用数据库管理工具和 URL 连接到应用服务器，例如`jdbc:hsqldb:http:<your servlet url here>`

# objective-c - Objective-C 中的字符串到 UTF8 字符的转换

> ID：13051180
> 
> 赞同：0
> 
> 时间：2012-10-24T14:20:42.387
> 
> 标签：objective-c, ios, utf-8, char

我正在尝试将 UTF8 字符保存到字符串并将其打印到标签上。

如果我硬编码它工作正常：

```
NSString *param = @"\uf02e";
NSLog(param); 
```

结果：

```
2012-10-24 16:09:56.522 i[22996:12c03]  
```

顺便说一句，如果我将 char 保存为字符串，我将无法返回。

```
NSString *myString = [NSString stringWithFormat:@"%@",[item objectForKey:content]];
NSLog(myString); 
```

结果：

```
2012-10-24 16:18:47.289 i[23105:12c03] \uf02e 
```

有什么解决办法吗？谢谢。

编辑

item 是一个 NSDictionary 并且 [item objectForKey:content] 是一个字符串。

![在此处输入图像描述](../Images/2f1fcc2a20d85736c044da553c058ece.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:28:36.743

```
 NSString *param = @"\uf02e";
    NSDictionary* item = [NSDictionary dictionaryWithObject: param forKey: @"key"];
    NSString *myString = [NSString stringWithFormat:@"%@",[item objectForKey: @"key"]];
    NSLog(myString); 
```

对我来说很好。因此，错误在于您要插入字典的值中。

# drupal - 以编程方式在菜单项上添加 rel 和 title 属性

> ID：13051183
> 
> 赞同：0
> 
> 时间：2012-10-24T14:20:50.890
> 
> 标签：drupal

我有一个这样的菜单：

```
function hook_menu()
{
    $items['footer_callback'] = array(
        'type' => MENU_CALLBACK,
        'access callback' => true,
        'page callback' => 'drupal_get_form',
        'page arguments' => array('tac_webforms_footer_form'),
        'menu_name' => 'footer-menu',
        'title' => 'Newsletter'
    );
} 
```

有什么办法可以将`options`属性添加到创建的标签`rel`和`title`html属性中？`<a>`

根据[文档](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu/7)，我可以传递`options`我正在谈论的那个密钥，但这不起作用。

**PS：**我想以编程方式进行，最好不使用任何模块，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:06:32.157

这将为主题级别的大多数链接添加标题属性，但取决于某些模块。也许你可以使用 rel 属性。

```
/**
 * Add title attribute to any link that doesnt have a title already
 */
function YOURTHEME_preprocess_link(&$vars) {
    // If title set and not empty dont do anything
    if (isset($vars['options']['attributes']['title']) && !empty($vars['options']['attributes']['title'])) {
        return;
    }

    // Use the link text as the title
    $vars['options']['attributes']['title'] = strip_tags($vars['text']);
} 
```

# regex - VB 2010 使用正则表达式在文件路径字符串中提取客户名称

> ID：13051189
> 
> 赞同：0
> 
> 时间：2012-10-24T14:21:06.330
> 
> 标签：regex, vb.net, string, extract, filepath

我得到了这段代码，用于从文件路径中提取作业编号。我不知道如何从我找到的示例中正确使用正则表达式，但我希望现在能够仅提取文件名的“blah_blah”部分。我很感激任何提示或建议。

示例文件路径：Q:\2463_Customer_Name....\

我想为我的字符串获取“客户名称”。

```
Dim numRegex As New Regex("\d+") 
Dim number As String = numRegex.Match("Q:\2456_blah_blah\file.txt").Value 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:41:23.260

我对在 VB.net 中使用 RegExes 一无所知，但是像这样的字符串

```
^[A-Z]:\\[0-9]{0,4}_(.+)\\.*$ 
```

应该提供一个很好的起点。反斜杠用反斜杠转义；）。究竟是什么决定了 blah_blah 部分的开始和结束？我猜它是下划线和尾随 \ ？在我的正则表达式示例中， () 包含 blah_blah。

```
^ start of line
[A-Z] one upper case letter
:\\ followed by a colon and a backslash
[0-9]{0,4} followed by up to four digits between 0-9 (tweaking here might be necessary)
_ followed by an underscore
(.*) followed by at least one (+) arbitrary character
\\ followed by a backslash (again, escaped maybe you don't need this)
.*$ followed by any number of characters until the end of the line ($) 
```

如果您对模式有更多了解，您应该考虑编辑您的问题以使其更清晰。blah_blah 部分是否只有字母等？

# objective-c - OO Design & Core Data：聚合计算方法放在哪里？

> ID：13051194
> 
> 赞同：0
> 
> 时间：2012-10-24T14:21:27.060
> 
> 标签：objective-c, ios, oop, core-data

我有一个`NSManagedObject company`带有属性`(NSString*) name`和`(NSDate*) lastAvailableInterim`.

我想`NSArray *companies`根据以下代码示例计算一组公司 ( ) 的汇总值，例如上一个报告日期等于季度末：

```
- (NSDate*)latestAvailableInterimFor:(NSArray*)companies
{   // returns the maximum interim report date for all companies in the selection, date has to have end month = quarter end
    NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
    __block NSDate *maxLatestAvailableInterim;

    [self.companies enumerateObjectsUsingBlock:^(IBCompany *company, NSUInteger idx, BOOL *stop) {
        NSDateComponents *monthComponents = [gregorian components:NSMonthCalendarUnit fromDate:company.latestAvailableInterim];
        NSAssert((company.latestAvailableInterim),@"LatestAvailableInterim must be <> NIL!");
        NSInteger month = [monthComponents month];
        if ( month % 3 == 0 ) maxLatestAvailableInterim = MAX(maxLatestAvailableInterim, company.latestAvailableInterim);
    }];
    return maxLatestAvailableInterim;
} 
```

从**面向对象的角度**并基于**MVC**方案，我将把这段代码放在哪里？

在视图控制器中，它处理结果值或“接近”`(NSManagedObject*) company`子类，或者添加一个类别是否有意义`NSArray`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:47:48.950

不是 NSArray 的类别。您可以向您的 IBCompany 类添加一个类方法，该类接收 NSManagedObjectContext 并使用它来执行获取以找到您正在寻找的正确日期。尝试通过 NSFetchRequest 找到正确的日期，而不是进行内存检查。

您也可以在处理结果信息的视图控制器中执行此操作。

# javascript - jQuery 尝试构建然后附加 HTML

> ID：13051198
> 
> 赞同：2
> 
> 时间：2012-10-24T14:21:43.243
> 
> 标签：javascript, jquery, variables

我[在 jsFiddle 上](http://jsfiddle.net/cherryflavourpez/LHukf/)放了一个非常简化的示例。

基本上，我正在尝试构建我的 HTML，然后在完成后附加整个内容。JS 看起来像这样：

```
var label = 'My label',
    var checkbox = $('<input type="checkbox">').prop({
                id: 'checkboxId',
                name: 'checkboxId',
                checked: visible
            });
    listItem = ('<li class="customise_option"><label>'+checkbox+' '+label+'</label></li>');

$('#mylist').append(checkbox);
$('#myotherlist').append(listItem); 
```

追加`checkbox`就好了，但是如果我尝试包含`checkbox`在我的`listItem`变量中，那么我只会得到：

```
[object Object] My label 
```

因此，就其本身而言，jQuery 可以将 my`checkbox`作为字符串附加，但是当我尝试对其执行任何操作时，它会将其视为对象。

环顾四周，有[一些类似的问题](https://stackoverflow.com/questions/2000438/convert-a-jquery-object-and-contents-to-string)，但是当我在 JavaScript 中创建所有东西（而不是操作 DOM 中已经存在的东西）时，似乎必须有一种方法来做我想做的事。问题是我想不通。

**编辑**

我把我原来的例子简化了太多，没有完全理解这个问题。我已经更新[了 jsFiddle](http://jsfiddle.net/cherryflavourpez/LHukf/)以表明`checkbox`我需要能够添加一堆属性。因此，该`checked`属性将依赖于其他东西。因此，我需要`$`这样才能访问 jQuery 的`prop`函数（我认为）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:24:28.077

```
var label = 'My label',
    checkbox = '<input type="checkbox">';
    listItem = '<li class="customise_option"><label>'+checkbox+' '+label+'</label></li>';

$('#mylist').append(checkbox);
$('#myotherlist').append(listItem); 
```

这是[jsfiddle](http://jsfiddle.net/LHukf/1/)。如果您要添加 HTML 标记，您只需要字符串；你在不远处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:24:57.393

`checkbox`是一个 jquery 对象，当你说`string + checkbox`你正在转换`checkbox`为一个字符串（它给出`[object Object]`）然后附加它时。你也需要在`append()`那里使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:26:38.593

发生这种情况是因为复选框是一个对象。使用此代码，工作

var label = '我的标签', checkbox = '', listItem = ''+checkbox+' '+label+'';

$('#mylist').append(checkbox); $('#myotherlist').append(listItem);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:25:05.587

这是因为`checkbox = $('<input type="checkbox">')`返回一个 jquery 对象。

要么坚持使用 jquery 对象并使用`text()`等方法，要么坚持附加 HTML 的字符串表示。只是不要混合它。

# git - 在哪些情况下 git merge --no-ff 不保留提交历史？

> ID：13051200
> 
> 赞同：1
> 
> 时间：2012-10-24T14:21:50.890
> 
> 标签：git

我有一个名为的开发分支`devel`、一个名为的特性分支`feature_1`和一个名为的测试分支`testing`。这就是我所做的：

*   `feature_1`分支于`devel`
*   在这里进行了提交，以实现该功能
*   `feature_1`被合并到`testing`
*   `feature_1`在( with `--no-ff`)上发现了一些错误
*   已经做出了额外的承诺`feature_1`
*   同时，一个修补程序已合并到`devel`，并且`feature_1`尚未重新设置
*   `feature_1`已再次合并为`testing`, with `--no-ff`)
*   分支上的所有测试`testing`都成功了，`feature_1`分支可以合并回`devel`
*   我合并`feature_1`到`devel`with `--no-ff`，但不是合并复制在`feature_1`分支上创建的所有提交，它只创建了一个合并提交，表示`feature_1`分支已被合并。

谁能解释为什么 --no-ff 没有保留提交历史？我倾向于说这是因为该`feature_1`分支尚未针对 重新设置`devel`，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:18:22.147

与[`git rebase`](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)默认情况下将保留提交历史记录相反，a[`git merge --no-ff`](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)通过设计生成*一个*提交。
所以你在与 with 合并后看到的`feature_1`是正常的。`devel``--no-ff`

```
--no-ff 
```

> 即使合并解析为快进，也要创建合并提交。

# symfony - 在 Symfony 2 中渲染单个表单元素

> ID：13051201
> 
> 赞同：0
> 
> 时间：2012-10-24T14:21:51.433
> 
> 标签：symfony

我在从 Symfony 2 表单中渲染树枝模板中的单个表单字段时遇到问题。在下面的示例中，我只是尝试呈现 first_name 表单字段。

此外， form_errors 从不渲染任何东西。

这是我的表单对象：

```
namespace ABC\WebsiteBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class LoanApplication extends AbstractType
{
  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $builder->add('first_name', 'text', array('required' => true));
  }

  public function getName()
  {
    return 'LoanApplication';
  }

  public function getDefaultOptions(array $options)
  {
    return array(
        //'data_class'      => 'Acme\TaskBundle\Entity\Task',
        'csrf_protection' => true,
        'csrf_field_name' => '_token',
        // a unique key to help generate the secret token
        'intention'       => 'loan_application',
    );
  }
} 
```

这是控制器：

```
namespace ABC\WebsiteBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use JML\WebsiteBundle\Form\LoanApplication;
use JML\WebsiteBundle\QuickBase as QuickBase;

class ApplyController extends Controller
{
  public function indexAction()
  {
    $form = $this->createForm(new LoanApplication());
    return $this->render('ABCWebsiteBundle:Apply:index.html.twig', array(
            'form' => $form->createView(),
        ));

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            // perform some action, such as saving the task to the database

            //return $this->redirect($this->generateUrl('task_success'));
        }
    }
  }
} 
```

还有树枝：

```
<form action="{{ path('apply') }}" method="post" {{ form_enctype(form) }}>
<pre>
{{ dump(form_errors(form)) }} // always empty
</pre>
<div>
    {{ form_label(form.first_name) }} // this renders
    {{ form_widget(form.first_name) }} //empty
    {{ form_row(form.first_name) }}  //empty
</div>
  <input type="submit" formnovalidate/>
</form> 
```

# java - Eclipse IDE 运行错误

> ID：13051202
> 
> 赞同：0
> 
> 时间：2012-10-24T14:21:58.033
> 
> 标签：java, eclipse, ide

我已经从他们的站点下载了 Eclipse for JAVA 开发人员并插入到 ini 文件中：

```
-vm 
c:\Program Files (x86)\Java\jre7\bin\javaw.exe 
```

但是当我运行 eclipse.exe 时，我收到了另一个令人沮丧的消息：

```
 ---------------------------
Eclipse
---------------------------
Java was started but returned exit code=13
c:\Program Files (x86)\Java\jre7\bin\javaw.exe
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar D:\eclipse\\plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
-os win32
-ws win32
-arch x86_64
-showsplash D:\eclipse\\plugins\org.eclipse.platform_4.2.1.v201209141800\splash.bmp
-launcher D:\eclipse\eclipse.exe
-name Eclipse
--launcher.library D:\eclipse\\plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813\eclipse_1503.dll
-startup D:\eclipse\\plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.overrideVmargs
-exitdata 14a4_5c
-product org.eclipse.epp.package.jee.product
-vm c:\Program Files (x86)\Java\jre7\bin\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar D:\eclipse\\plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 
---------------------------
OK   
--------------------------- 
```

什么事？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:26:42.617

您是否为 Eclipse 安装了正确版本的 JDK。
如果您下载了 64 位 Eclipse，请使用 64 位 JDK。

从您的问题来看，您似乎拥有 32 位 JDK

```
c:\Program Files (x86)\Java\jre7\bin\javaw.exe 
```

和 eclipse 似乎是 64 位的

```
-arch x86_64 
```

# java - Spring 事务 REQUIRED 与 REQUIRES_NEW ：回滚事务

> ID：13051204
> 
> 赞同：62
> 
> 时间：2012-10-24T14:22:12.853
> 
> 标签：java, spring, hibernate, transactions, spring-transactions

我有一个具有`propagation = Propagation.REQUIRES_NEW`事务属性的方法：

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
public void createUser(final UserBean userBean) {
    //Some logic here that requires modification in DB
} 
```

* * *

此方法可以同时调用多次，并且对于每个事务，如果发生错误，则回滚（独立于其他事务）。

问题是这可能会强制 Spring 创建多个事务，即使另一个事务可用，并且可能会导致一些性能问题。

* * *

Java doc of`propagation = Propagation.REQUIRED`说：`Support a current transaction, create a new one if none exists.`

这似乎解决了性能问题，不是吗？

回滚问题呢？如果新方法调用在使用现有事务时回滚怎么办？这不会回滚整个事务，即使是以前的调用？

**[编辑]** 我想我的问题还不够清楚：

我们有数百个客户端连接到我们的服务器。

对于每个客户端，我们自然需要发送有关事务的反馈（OK 或异常 -> 回滚）。

我的问题是：如果我使用`REQUIRED`，是否意味着只使用了一个事务，如果第 100 个客户端遇到问题，第一个客户端的事务也会回滚？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-10-24T15:46:39.913

仅当从事务上下文调用方法时，使用`REQUIRES_NEW`才相关；当从非事务上下文中调用该方法时，它的行为将完全一样`REQUIRED`- 它将创建一个新事务。

这并不意味着您的所有客户端只会有一个事务 - 每个客户端将从非事务上下文开始，并且一旦请求处理达到 a `@Transactional`，它将创建一个新事务。

因此，考虑到这一点，如果 using`REQUIRES_NEW`对于该操作的语义有意义——我不会担心性能——这将是教科书式的过早优化——我宁愿强调正确性和数据完整性，并担心性能指标一旦确定后的性能收集，而不是之前。

On rollback - using `REQUIRES_NEW` will force the start of a new transaction, and so an exception will rollback that transaction. If there is also another transaction that was executing as well - that will or will not be rolled back depending on if the exception bubbles up the stack or is caught - your choice, based on the specifics of the operations. Also, for a more in-depth discussion on transactional strategies and rollback, I would recommend: [«Transaction strategies: Understanding transaction pitfalls», Mark Richards](https://web.archive.org/web/20170213005145/http://www.ibm.com/developerworks/library/j-ts1/index.html).

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T14:37:44.980

如果您确实需要在单独的事务中执行此操作，则需要使用`REQUIRES_NEW`并忍受性能开销。注意死锁。

我宁愿以另一种方式做：

*   在 Java 端验证数据。
*   在一个事务中运行所有内容。
*   如果数据库方面出现任何问题 -> 这是数据库或验证设计的重大错误。回滚所有内容并抛出严重的顶级错误。
*   编写好的单元测试。

# performance - cuBLAS 性能

> ID：13051205
> 
> 赞同：0
> 
> 时间：2012-10-24T14:22:14.080
> 
> 标签：performance, cuda, cublas

我使用 CUDA 5.0，我想比较 C 和 cuBLAS 中的矩阵乘法。我已经编写了一个程序，其中 C 和 cuBLAS 中的矩阵乘法都给出了正确的答案。

现在我想比较他们的表现。对于在 C 中的实现，我使用了`clock()`.c，但我发现 cutil 在 CUDA 5.0 中不存在，所以我使用了`cudaEvent`. 两种实现都使用相同的矩阵，在 C 中，我只是测量了 C 进行矩阵乘法的时间，而在 cuBLAS 中，我从 until 开始`createhandle`测量`destroyhandle`。

我得到了这个结果：
当C只用了0.08ms，cuBLAS用了59ms，然后我用`clock()`cuBLAS测时间，cuBLAS变得比C快。不知道我用的测时间的方法是否正确。为什么要`cudaevent`给出`clock()`不同的答案？

我只是按照 Nvidia 的文档使用 cuBLAS、cudaevent。我真的很困惑如何正确测量时间。

# web-services - Flex 4 中 AS 的 Web 服务类

> ID：13051209
> 
> 赞同：0
> 
> 时间：2012-10-24T14:22:21.620
> 
> 标签：web-services, actionscript-3, flex4

我正在尝试从 Web 服务接收数据，并且我正在从 Web 服务获取数据，但它是`[object Object]`. 任何人都可以帮我解决这个问题。

下面是我的网络服务的代码：

```
public class WebServiceAccess
{

    private var webService:WebService;
    private var serviceOperation:AbstractOperation; 
    private var myValueObjects:ValueObjects;

    private var method:String;

    [Bindable]
    public var employeeData:ArrayCollection;
    [Bindable]
    public var employees:ArrayCollection;

    public function WebServiceAccess(url:String, method:String)
    {
        webService = new WebService();
        this.method = method;
        webService.loadWSDL(url);
        webService.addEventListener(LoadEvent.LOAD, ServiceRequest);
    }

    public function ServiceRequest():void
    {
        serviceOperation = webService.getOperation(method);
        serviceOperation.addEventListener(FaultEvent.FAULT, DisplayError);
        serviceOperation.addEventListener(ResultEvent.RESULT, DisplayResult); 
        serviceOperation.send(); 
    }

    public function DisplayError(evt:FaultEvent):void
    {
        Alert.show(evt.fault.toString());
    }

    public function DisplayResult(evt:ResultEvent):void
    {   
        employeeData = evt.result as ArrayCollection;
        Alert.show(employeeData.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T00:41:38.673

首先，evt.result*不是*一个 ArrayCollection，它是一个对象（除非您的 SOAP 服务/WSDL 完全搞砸了/格式错误的 XML）。

其次，无论如何，您不能只将 Array 或 ArrayCollection（或通用对象）显示为字符串（即使 .toString() 方法似乎总是暗示这一点），您必须解析数据以获得您想要的从中。

现在，WebService 类很好，因为它自动将 SOAP 服务返回的 XML 文件解析为单个可用对象。所以这实际上是困难的部分。

你需要做的是调用对象的各种属性来获取你需要的数据。

因此，如果 XML 返回（查看您的 WSDL 以了解返回应该是什么，我也强烈建议使用 soapUI）是这样的：

```
<employee name="Josh">
    <start date="89384938984"/>
    <photo url="photo.jpg"/>
</employee> 
```

你想显示“Josh”和照片，你会这样做。

```
var name:String = e.result.employee.name;
var url:String = e.result.employee.photo.url; 
```

它确实变得更加复杂。如果 WSDL 允许在同一级别具有相同名称的多个节点，它*确实*返回一个 ArrayCollection。然后你必须遍历数组并找到你需要的确切项目。

请记住：WSDL 就是上帝。时期。如果它说可以有多个“员工”节点，您必须相应地编码，即使您在测试中没有看到多个节点。问题是总是*可能有*多个节点。

# c++ - 在“简单求和”上使用双精度避免欠/溢出

> ID：13051216
> 
> 赞同：4
> 
> 时间：2012-10-24T14:22:40.933
> 
> 标签：c++, double, overflow

我正在努力解决因不足或溢出而失败的求和问题。

我有超过 8271571 个双精度值，我需要算术平均值。

但主要问题是，我似乎不够聪明，无法做到这一点。

目前我只是将它们总结并除以大小。这在大多数情况下都会失败或溢出，给我 -1.#INF 或 1.#INF。

```
for(size_t j = 0; j < 12; j++)
{
    double a = 0.0;

    for(size_t i=0; i < Features->size(); i++)
    {
        a += Features->at(i)->at(j);
    }
    meanVector[j] = a / Features->size();
} 
```

然而，不可能说它只是正值或负值，所以我不能设置要签名的数据类型。

当我将它们相加时，我还尝试在求和中使用除法常数或除以大小，但这也无济于事。

值的范围可能从我快速查看的范围，从 -20 到 +30，但不能肯定地说。

所以也许任何人都可以给我一个关于如何做数学或使用解决方法的提示。这一定可以，但我只是缺乏想法。

编辑：

大小从不为0，在分区前进行检查。此外，没有任何值以任何方式无效。在提取它们时，我已经检查了#IND 和 NaN。

如果我已经在总和上除，我想这也不是正确的结果？

```
a+= Features->at(i)->at(j) / Features->size() 
```

结果 -3.7964983860343639e+305

但对于每次迭代。这不可能是正确的，看起来像一个边界

编辑2：

所以你们中的一些人是完全正确的。有很多垃圾sh * t发生..

> 0：大小：8327571，最小值：-2.24712e+307，最大值：3362.12 1：大小：8327571，最小值：-2.24712e+307，最大值：142181 2：大小：8327571，最小值：-2.24712e+307，最大值： 59537.8 3：尺寸：8327571，最小：-2.24712e+307，最大：236815 4：尺寸：8327571，最小：-2.24712e+307，最大：353488 5：尺寸：8327571，最小：-2.24712e+307，最大: 139960 6: 大小: 8327571, min: 0, max: 0 7: size: 8327571, min: 0, max: 0 8: size: 8327571, min: 0, max: 0 9: size: 8327571, min: 0 ，最大值：0 10：大小：8327571，最小值：0，最大值：0 11：大小：8327571，最小值：0，最大值：0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:46:20.783

> *   我有超过 8271571 个双精度值，我需要算术平均值。
> *   值的范围可能从我快速查看的范围，从 -20 到 +30，但不能肯定地说。
> *   大小从不为0，在分区前进行检查。

这不加起来。`double`总和应该很容易适应。数据一定有问题。您可以像这样快速检查您的值：

```
for (size_t j = 0; j < 12; ++j)
{
    std::vector<double> values;

    values.reserve(Features->size());
    for (size_t i = 0; i < Features->size(); ++i)
    {
        values.push_back(Features->at(i)->at(j));
    }

    // Find extreme values, including infinity
    std::cout << j << ": " 
              << "size: " << values.size() 
              << ", min: " << *std::min_element(values.begin(), values.end())
              << ", max: " << *std::max_element(values.begin(), values.end())
              << std::endl;

    // Find NaNs
    for (size_t i = 0; i < Features->size(); ++i)
    {
        // Choose one of the following ifs

        // For C++11 (isnan is a standard thing now)
        if (std::isnan(Features->at(i)->at(j))

        // Or for Visual Studio
        if (_isnan(Features->at(i)->at(j))

        // Or for GCC prior to C++11
        if (__builtin_isnan(Features->at(i)->at(j))

        {
            std::cout << "NaN at [" << i << ", " << j << "]" << std::endl;
        }
    }
} 
```

您应该能够快速发现输入是否有任何奇怪之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:38:18.390

您可以使用在线算法计算平均值，这意味着您不必在除法之前添加所有值。这里：

```
template< typename NumberType >
class ProgressiveMean{
    NumberType  m_Mean;
    NumberType  m_MeanKMinus1;
    long        m_K;
public:
    ProgressiveMean();
    void Seed( NumberType seed );
    void AddValue( NumberType newVal );
    NumberType getMean() const;
};

template< typename NumberType >
ProgressiveMean<NumberType>::ProgressiveMean():
    m_Mean( 0 ),
    m_MeanKMinus1( 0 ),
    m_K( 0 ){
}

template< typename NumberType >
void ProgressiveMean<NumberType>::Seed( NumberType seed ){
    m_MeanKMinus1 = seed
    m_K = 2;  //Start from K = 1, so next one is 2
}

template< typename NumberType >
void ProgressiveMean<NumberType>::AddValue( NumberType newVal ){
    m_Mean = m_MeanKMinus1 + (newVal - m_MeanKMinus1) / m_K;
    m_MeanKMinus1 = m_Mean;
    m_K++;
}

template< typename NumberType >
NumberType ProgressiveMean<NumberType>::getMean() const{
    return m_Mean;
} 
```

要使用它，请`Seed`使用初始值调用，循环调用`AddValue`其余部分，完成后调用`getMean`.

这个想法来自 Knuth，我是从[这里](http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Online_algorithm)得到的。

您也可以考虑使用大数字库。

# java - 发送可识别的短信

> ID：13051220
> 
> 赞同：0
> 
> 时间：2012-10-24T14:23:14.227
> 
> 标签：java, android, sms

我正在编写一个需要通过短信进行通信的 Android 应用程序。因此，例如应用程序将向号码 123 发送消息“嗨”，当号码 123 收到消息时，我的应用程序将在他们的手机上解析它，并在确定它是由我的应用程序发送时采取行动。

现在我可以完美地发送和接收/解析消息，但我需要一种方法来识别消息是由我的应用程序发送的。我可以轻松地将消息发送为“appName：hi”并检查正文是否包含“appName”，但问题是如果收到我的消息的用户没有我的应用程序，我希望他们只看到“Hi” . 所以我想知道是否有一种方法可以发送不可见字符或在短信正文中或作为短信本身的一部分（即标题）设置一些其他识别信息。如果可能，我想避免数据短信，并且我的应用程序打算离线。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:43:12.887

发送短信时可以指定端口。我不知道如何使用 Android API 来做到这一点，但由于 J2ME 多年来一直支持此功能，Android 也必须支持它。

您的应用程序应侦听此端口并发送到同一端口。因此，如果用户已经拥有您的应用程序，我认为他甚至不会在收件箱中看到该消息。至少这是 J2ME 中的行为。但是，如果他还没有该应用程序，他将在收件箱中看到它或根本看不到它。用安卓检查这个。据我记得在 J2ME 中，这取决于手机型号。

# java - ENUM 存储（内存等）

> ID：13051223
> 
> 赞同：4
> 
> 时间：2012-10-24T14:23:15.473
> 
> 标签：java, performance, memory, enums

我只是问自己一个小问题，我不确定我是否能找到正确的答案：

如果我在 Java 中使用 ENUM，并带有自己的构造函数（以及许多、许多、maaaaany 参数） - 是每次程序执行时都存储在内存中，还是只在内存中“加载”，如果它们被使用？

我的意思是，如果我有一个包含 400 个条目的 ENUM，并且只使用其中一个条目 - 所有其他条目是否仍然存在于内存中？

**一些伪代码：**

```
public enum Type {
    ENTRY_A(val1, val2, val3, val4, new Object(val5, val6, val7, ...)),
    ENTRY_B(val1, val2, val3, val4, new Object(val5, val6, val7, ...)),
    ENTRY_C(val1, val2, val3, val4, new Object(val5, val6, val7, ...)),
    ...
} 
```

如果我只使用 ENTRY_A，而不使用 ENTRY_B、ENTRY_C 等 - Java 将如何准确处理？

感谢您的回答-是的，这主要是好奇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:24:35.100

是的，即使您只使用一个 ENUM 常量，所有内容都将加载到内存中。

枚举是类的特殊类型，所有字段都是常量，因此当您加载 ENUM 时，它本身会将所有内容加载到内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T14:25:09.233

第一次使用枚举时，将触发类初始化，所有值都将被创建并存储在内存中，就像任何其他类一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:31:24.477

你总是可以自己尝试。只需将例如`System.println("test")`放在您的构造函数中`enum`并凭经验接受结果。

# javascript - jquery 菜单（一些` ` 包含内部 ` `标签）

> ID：13051226
> 
> 赞同：0
> 
> 时间：2012-10-24T14:23:37.440
> 
> 标签：javascript, jquery, asp.net, html

我创建了一个动态侧面类别菜单。

```
 $(document).ready(function () {
            $(' #cate_id2 > ul > #subcate_id4 > ul').hide();

            $(' #cate_id2 > ul > #subcate_id4 ').hover(function () {
                $(' #cate_id2 > ul > #subcate_id4 > ul').stop().slideDown('fast');
            },

           function () {
               $(' #cate_id2 > ul > #subcate_id4 > ul').stop().slideUp('fast');
           });
        }); 
```

但是这里有些`<li>`包含内部标签，所以我希望它可以正常工作 - 所有都`<li>`应该工作而不给出单个`<li`> 标签的 id（它包含），我的意思是如果任何`<li>`标签包含`<ul>`要显示的内部标签，那么它应该在悬停时工作

**这里的id `<li>`（包含内部ul）---- `subcate_id4`**

**我试过了------**

```
$(document).ready(function () { $(' #cate_id2 > ul').show(); });
        $(document).ready(function () {
            $(' #cate_id2 > ul > li:has(ul) > ul').hide();

            $(' #cate_id2 > ul > li:has(ul) > ul ').hover(function () {
                $(' #cate_id2 > ul > li:has(ul) > ul').stop().slideDown('fast');
            },

           function () {
               $(' #cate_id2 > ul > li:has(ul) > ul').stop().slideUp('fast');
           });
        }); 
```

**但没有奏效**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:29:18.500

```
<script>
$('#list li').has('ul').hover(function() {
    // ...
});
</script> 
```

请向我展示 HTML 结构，以便我可以完成代码。你的选择器是一场噩梦！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:29:50.567

```
$(' #cate_id2 > ul > li > ul').hide();
$(' #cate_id2 > ul > li:has(ul)').hover(
    function () { 
        $(this).find("> ul").stop().slideDown("fast");
    },
    function () { 
        $(this).find("> ul").stop().slideUp("fast");
    }
); 
```

# asp.net-mvc - 为级联子列表构建一个空的 MVC DropdownListFor

> ID：13051228
> 
> 赞同：40
> 
> 时间：2012-10-24T14:23:58.580
> 
> 标签：asp.net-mvc, view, html.dropdownlistfor

我想建立一个空的 Dropdownlistfor 来接收先前 Dropdownlisfor 选择的结果：

实际观点：

```
 <div id="makes">
        @Html.DropDownListFor(m => m.Make_Id, Model.MakeList, HeelpResources.DropdownlistMakeFirstRecord)
    </div>
    <div id="models">
        @Html.DropDownListFor(m => m.Model_Id, Model.ModelList, HeelpResources.DropdownlistModelFirstRecord)
    </div> 
```

实际的控制器（为了工作，我必须构建一个空的 SelectedList 但这样做似乎很奇怪）：

```
 public virtual ActionResult Create()
    {
        // Build the Dropdownlist for the Makes
        var makesDto = _makeService.ListAllMakes();
        var makesViewModel = Mapper.Map<IList<MakeDto>, IList<MakeViewModel>>(makesDto);

        // Build the Dropdownlist for the Models
        var makeId = -1;
        var modelsDto = _modelService.ListModelByMake(makeId);
        var modelsViewModel = Mapper.Map<IList<ModelDto>, IList<ModelViewModel>>(modelsDto);

        // Build the ViewModel to return to the View
        CreateAdViewModel viewModel = new CreateAdViewModel();
        viewModel.MakeList = new SelectList(makesViewModel, "ID", "Name");
        viewModel.ModelList = new SelectList(modelsViewModel, "ID", "Name"); 

        return View(viewModel);
    } 
```

有没有办法构建这样的东西：@Html.DropDownListFor(m => m.Model_Id, null)

并从控制器中删除 // Build the Dropdownlist for the Models?

谢谢

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-10-25T13:30:40.220

找到了一个我认为最好的解决方案，因为它没有服务调用来构建 dropdroplist 空并且它是强类型的：

```
@Html.DropDownListFor(m => m.Model_Id, Enumerable.Empty<SelectListItem>(), HeelpResources.DropdownlistModelFirstRecord) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-19T09:10:12.853

**以下工作**：

```
@Html.DropDownListFor(m => m.Model_Id, **new SelectList(new List<string>()**)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:43:27.543

就我个人而言，我会用一点 jQuery 和一个额外的局部视图来做到这一点。您的表单可能如下所示：

```
<div id="makes">
        @Html.DropDownListFor(m => m.Make_Id, Model.MakeList, HeelpResources.DropdownlistMakeFirstRecord)
</div>
<div id="models">

</div>

<script type="text/javascript">
$(function(){
   $("#Make_Id").change(function(){
       $("#models").load("/Controller_Name/GetModels/" + this.val());
   }
});
</script> 
```

然后在你的控制器中：

```
public ActionResult GetModels(int id)
{
   ViewBag.DdlModels = new SelectList(rep.GetModelsForCar(id), "Id", "Name");
   return PartialView();
} 
```

然后将您的下拉列表粘贴在 GetModels 部分视图中

# php - 为什么这个简单的代码在第 7 行出现错误？

> ID：13051229
> 
> 赞同：0
> 
> 时间：2012-10-24T14:23:59.463
> 
> 标签：php

不要告诉我它已被弃用或什么的！:P

```
<?php
    $mysql_host = 'localhost';
    $mysql_user = 'root';
    $mysql_pass = '';
    $mysql_db =  'LetsPLays'

    if (!mysql_connect($mysql_host, $mysql_user, $mysql_pass)||!mysql_select_db($mysql_db)) {
        die(mysql_error());
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:25:00.997

```
$mysql_db =  'LetsPLays' 
```

像这样在之后添加一个分号

```
$mysql_db =  'LetsPLays'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:28:37.543

您没有关闭第 5 行，添加一个分号以正确结束该行。

```
$mysql_db =  'LetsPLays'; 
```

然后，当您开始转换为 MySQLi 或 PDO_MySQL 因为 MySQL_ 正在贬值时，请参阅此处的红框 -> [http://www.php.net/manual/en/function.mysql-connect.php](http://www.php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:26:01.480

你错过了一个`;`之后`$mysql_db = 'LetsPLays'`。

# eclipse - 如何使运行按钮在 Eclipse 中运行项目，而不是文件

> ID：13051233
> 
> 赞同：4
> 
> 时间：2012-10-24T10:00:11.603
> 
> 标签：eclipse

我正在使用 Spring IDE（Eclipse 的一种变体）来创建 Java 项目。我遇到的一个大问题是，当我按下运行按钮时，Eclipse 会尝试运行当前文件，这通常会失败，因为它没有`main`方法。我已经设置了运行配置，希望能让播放按钮默认为运行配置而不是当前文件，但这也不起作用。

现在要正确运行我的应用程序，我必须按下播放旁边的小箭头，选择我最喜欢的运行配置，然后它就可以工作了，这只是额外的两次点击，但很乏味，按钮很小，我觉得我不应该有执行这些额外的步骤。我的意思是，如果默认情况下仍然尝试运行文件，那么运行配置和项目的意义何在？更可取的是，我什至不想触摸鼠标而只需按下`Ctrl+F11`，但这具有相同的行为。以上所有内容也适用于调试。

所以我的问题是：如何使运行和调试按钮（及其快捷键）默认为项目的运行配置，而不是尝试（并且失败）仅运行当前文件？就像在 Visual Studio 和其他 IDE 中一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:14:10.557

**您可以在Run/Debug -> Launching**下的首选项中控制 Launch 按钮的作用。选择“始终运行以前启动的应用程序”，虽然不完全是您所追求的，但至少会停止启动不适当文件的烦人尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:15:40.193

您可以在首选项中分配快捷键，但我不确定这是一个可映射的功能。如果是的话，那就是它的位置。

除此之外，您可以使用一个小插件扩展 Eclipse 以创建一个菜单，您可以设置为做任何您喜欢的事情。

# jsf-2 - primefaces：如何显示 pdf 并加载新表单（单独的窗口）

> ID：13051236
> 
> 赞同：1
> 
> 时间：2012-10-24T14:24:12.697
> 
> 标签：jsf-2, primefaces

这是流程：

0 - 用户转到 http:\ form_url
1 - 出现表单
2 - 用户填写字段
3 - 用户点击“保存并生成 PDF”
4a - 应用程序打开一个新的浏览器选项卡并显示 pdf
4b - 应用程序在原始标签

到目前为止，我已经能够完成 4a 或 4b。一个或另一个，而不是同时两个。

你能帮帮我吗，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:30:22.393

您不能向 1 个 HTTP 请求发送 2 个 HTTP 响应。

您需要让客户端发送 2 个 HTTP 请求。在这种特殊情况下，最简单的方法是将临时生成 PDF 所需的数据存储在会话中，并使用 JavaScript`window.open()`在新窗口中触发新请求，从而触发 PDF 生成。例如

```
id = UUID.randomUUID().toString();
Data data = collectDataWhichIsNecessaryForGeneratingPdf();
externalContext.getSessionMap().put(id, data);
return "brandNewEmptyform"; 
```

以全新的空形式

```
<h:outputScript rendered="#{not empty bean.id}">
    window.open('somePdfServlet?id=#{bean.id}');
</h:outputScript> 
```

然后在映射到的servlet中`/somePdfServlet`：

```
String id = request.getParameter("id");
Data data = (Data) session.getAttribute(id);
session.removeAttribute(id);
// Now generate PDF based on data and write to response the usual way. 
```

# mysql - 在 MySQL 中，如何建立索引来加速这个查询？

> ID：13051246
> 
> 赞同：8
> 
> 时间：2012-10-24T14:24:54.033
> 
> 标签：mysql, indexing, database-performance

在 MySQL 中，如何建立索引来加速这个查询？

```
SELECT c1, c2 FROM t WHERE c3='foobar'; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T14:28:31.053

要真正给出答案，看看您是否已经有现有索引会很有用，但是......

所有这一切都假设表 't' 存在并且您需要添加一个索引，并且您当前在主键上只有一个索引或根本没有索引。

查询的覆盖索引将为您的需求提供最佳性能，但是对于任何索引，您都会牺牲一些插入速度。牺牲的重要性取决于您的应用程序的配置文件。如果您主要从表格中阅读，那将无关紧要。如果您只有几个索引，那么即使是适度的写入负载也无关紧要。您的桌子的有限存储空间也可能会发挥作用......您需要对权衡进行最终评估，如果它是显着的。好消息是它经常受到打击。通常，添加索引不会以指数方式减慢插入速度，只会以线性方式减慢速度。

无论如何，以下是您获得最佳选择性能的选项：

1.  如果 c3 是表 t 的主键，那么您在查询中不能做任何更好的事情来提高索引速度。
2.  假设 c1 是您的主键 t：

    ```
    ALTER TABLE t ADD INDEX covering_index (c3,c2); 
    ```

3.  如果 c1 不是您的 pk（c2 也不是），请使用：

    ```
    ALTER TABLE t ADD INDEX covering_index (c3,c2,c1); 
    ```

4.  如果 c2 是您的 PK，请使用以下命令：

    ```
    ALTER TABLE t ADD INDEX covering_index (c3,c1); 
    ```

5.  如果磁盘空间或插入速度是一个问题，您可以选择做一个点索引。你会牺牲一些性能，但如果你插入很重，它可能是正确的选择：

    ```
    ALTER TABLE t ADD INDEX a_point_index (c3); 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T14:29:22.813

在您搜索的列上构建索引，因此在这种情况下，您必须在 field 上添加索引`c3`：

```
CREATE INDEX c3_index ON t(c3) 
```

# jquery - jQuery ui 对话框未在 ASP.NET MVC 3 应用程序中使用 site.css

> ID：13051248
> 
> 赞同：0
> 
> 时间：2012-10-24T14:24:57.207
> 
> 标签：jquery, css, asp.net-mvc-3, jquery-ui, jquery-ui-dialog

我在我的 MVC 3 应用程序中使用 jQuery ui 对话框，出于某种原因，我的 site.css 文件中定义的样式元素适用于除 jquery 对话框之外的任何地方。

我尝试使用 Chrome 开发者工具找出问题所在，但我就是想不通。有任何想法吗？

谢谢！

更新：

以下是我在 _Layout.cshtml 中引用 css 文件的方式：

```
 <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/dataTables/dt_page.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/dataTables/dt_table.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/dataTables/dt_table_jui.css")" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:31:53.400

jquery-ui 使用它自己的样式表，包含在项目的 content/themes 文件夹中。要更改 jquery-ui 小部件，您需要更改这些样式表，而不是您的 site.css 文件。您还可以通过访问 www.jqueryui.com 下载查询 ui 小部件的预制样式

具体来说，在themes目录下的base文件夹下应该有一个jquery.ui.dialog.css文件。

编辑：http: [//jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

您还可以在 jqueryui 网站上制作主题以及下载预制主题。

希望这可以帮助。

# javascript - 包含点/句点的 window.location.hash 的奇怪行为

> ID：13051263
> 
> 赞同：3
> 
> 时间：2012-10-24T14:25:38.417
> 
> 标签：javascript, html, url, hash, history.js

从未见过或无法想象。我的网址与此类似：

```
 www.site.com/root/path1/path2/123/some-path-1/page.1.2.html 
```

在某些时候，我使用哈希更新 URL，因此动态用户交互将反映 URL 地址以将链接发送给朋友：

```
 window.location.hash = 'key=SomeValue'; 
```

它几乎在所有情况下都非常适合我，除非 SomeValue 包含点：

```
 window.location.hash = 'key=SomeValueA.B.'; 
```

有了上面的网址就变成了：

```
 www.site.com/root/path1/path2/123/some-path-1/key=SomeValueA.B. 
```

而不是 www.site.com/root/path1/path2/123/some-path-1/page.1.2.html#key=SomeValueA.B。

我无法想象这里出了什么问题，我无法在 jsfiddle 中重现它。我为此使用自定义编写的哈希管理器类：

```
var hashUrlManager = function(){
 var getHash = function(){       
    return (window.location.hash) ? window.location.hash.substring(1) : "";
 };
 return{
    getHash : getHash,
    getParam : function(k){
        return Util.getParameter(k,"?"+getHash());
    },
    setParam : function(k,v){
        var h = getHash();
        var vNow = hashUrlManager.getParam(k);
        if(vNow==""){
            if(window.location.href.indexOf("#")==-1){
                window.location.hash = k+"="+v;
            }else{
                window.location.hash = h+((h=="")?"":"&")+k+"="+v;
            }
        }else if(vNow!==v){
            window.location.hash = window.location.hash.replace(k+"="+vNow,k+"="+v);                
        }
    },
    removeParam : function(k){
        var v = hashUrlManager.getParam(k);
        var s = k+"="+v;
        if(window.location.hash.indexOf("&"+s)!=-1)s="&"+s;
        window.location.hash = window.location.hash.replace(s,"");
    }
 };
}();

hashUrlManager.setParam('key','SomeValueA.B.'); 
```

注意：如果重要的话，我确实使用 History.js 和页面上的 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T03:21:06.260

我遇到了同样的问题。[我在http://jsbin.com/aMUdejA/1/edit?html,output](http://jsbin.com/aMUdejA/1/edit?html,output)上成功复制了它。这是 jQuery（1.x 和 2.x 版本）和 History.js 的共存。

我提出了一个问题[https://github.com/browserstate/history.js/issues/363](https://github.com/browserstate/history.js/issues/363)

# java - 竞争条件“check-then-act”和“read-modify-write”

> ID：13051266
> 
> 赞同：6
> 
> 时间：2012-10-24T14:25:53.837
> 
> 标签：java, race-condition

任何人都可以向我解释什么是竞争条件，如何避免它，以及如何在 Java 代码中找到它？

好吧，我几天才知道“比赛条件”，我有两个例子，也许它们不够好，这就是为什么我需要你的帮助:) 希望你们中的任何一个都可以为我解释一下。

示例1：检查然后采取行动：

```
if(vector.contains(e))//check
{
vector.remove(e)
} 
```

如果有2个线程可以访问，thread1在check vector包含e后挂起，e在vector中，然后thread2访问check，然后从vector中删除e，然后thread1回来做remove动作，会出错，因为e是已被thread2删除。

示例2：读取修改写入：

假设我们在方法中有一个计数器变量，一旦方法被调用，计数器增加 1，

```
counter++ 
```

这不是原子操作，它有 3 个步骤：1\. 获取值 2\. 增加值 3\. 分配给值

我对比赛条件的了解都在这里，希望你能和我分享你的知识:)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-29T10:15:26.973

什么是竞态条件？检查这个堆栈溢出[问题](https://stackoverflow.com/questions/34510/what-is-a-race-condition)。

竞争条件主要有两种情况：read-modify-write 和 check-then-act。

对于 read-modify-write 经典示例`counter++`不是原子操作，因此会导致竞争条件。

对于 check-then-act 有多个示例。一个例子是当你在 ConcurrentHashMap 中检查键是否存在，然后在 if-case 中做一些工作。另一个例子是单例类代码：

```
public Singleton getInstance()
{
   if(_instance == null)
   { 
      _instance = new Singleton();
   }
} 
```

你可以在互联网上阅读更多关于它们的信息。一本关于并发的好书是 Brian Goetz 的 Java Concurrency in Practice。您还可以发现这篇[文章](http://dig.cs.illinois.edu/papers/checkThenAct.pdf)很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-12T03:19:58.817

来自 Java Concurrency in Practice 一书

> “当计算的正确性取决于运行时多个线程的相对时间或交错时，就会出现竞争条件；换句话说，获得正确答案时取决于幸运时间”

竞争条件最常见的条件是检查然后行动，其中使用潜在的安全观察来决定下一步做什么。

如果不存在，则另一个常见的竞争条件

对于您的示例 1 。

```
 if (!vector.contains(element))
   vector.add(element); 
```

尽管 contains 和 add 是原子的，但这种 put-if-absent 操作的尝试具有竞争条件。虽然同步方法可以使单个操作成为原子操作，但需要额外的锁定 - 当多个操作组合成复合操作时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-23T01:58:48.390

答案中提供的示例：“read-modify-write”和“check-then-act”**不足以**定义竞争条件的情况。

如果您将“竞争条件”理解为由两个或多个线程以不确定的顺序访问共享内存而导致的不可预测结果的条件，其中至少一个访问是用于写入，那么**（a）**您不需要同时拥有两个“读取”并在同一个线程中“写”。

并且**(b)**变量的原子定义也不能将我们从潜在的竞争条件中拯救出来。如果一个线程在另一个线程读取原子变量之前或之后写入原子变量并且访问顺序不正确，那么结果仍然是不可预测的。[您可以在此处](https://stackoverflow.com/a/29361427/1363844)查看对这一点的进一步解释。

# c# - 如何只向我的 txt 文件添加一次值？

> ID：13051268
> 
> 赞同：0
> 
> 时间：2012-10-24T14:25:59.227
> 
> 标签：c#

我有这段代码，它在我的 Student.txt 中添加了一行，但是，每次我编译并运行代码时，它都会再次执行。我可以添加什么代码以便只添加一次新记录？

```
string newLastName = "'Constant";
string newRecord = "(LIST (LIST 'Constant 'Malachi 'D ) '1234567890 'mdconstant@mail.usi.edu 4.000000 )";
string line;
string lastName;
bool insertionPointFound = false;

for (int i = 0; i < lines.Count && !insertionPointFound; i++)
{
    line = lines[i];
    if (line.StartsWith("(LIST (LIST "))
    {
        values = line.Split(" ".ToCharArray());
        lastName = values[2];
        if (newLastName.CompareTo(lastName) < 0)
        {
            lines.Insert(i, newRecord);
            insertionPointFound = true;
        }
    }
}

if (!insertionPointFound)
{
    lines.Add(newRecord);                          //This record is always added, making the file longer over time 
                                                    //if it is not deleted each time from the Students.txt file in 
}                                                  //the bin folder.

File.WriteAllLines("Students.txt", lines); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:30:45.967

您可以检查文件是否已经存在（如代码示例中）或者它是否已经是您想要的方式，然后将其放入 if 语句中

```
 if (File.Exists("Students.txt") == false)
        {
            File.WriteAllLines("Students.txt", lines);
        } 
```

尽管这确实引出了一个问题，但为什么您每次都首先生成所有要写入文件的行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:32:47.580

如果您正在写入的内容已知或仅在文件中出现一次，则首先打开文件并检查文件中是否存在要写入的记录。如果没有，则继续写，否则不要写。

```
if (!File.ReadAllText("students.txt").Contains(newRecord))
{
  // write to file...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:37:06.230

你的问题是`newLastName.CompareTo(lastName)`使用错误。如果*newLastName*等于*lastName*比[*CompareTo*](http://msdn.microsoft.com/en-us/library/35f0x18w.aspx)返回 0。在这种情况下，您应该设置`insertionPointFound = true;`

```
if (newLastName.CompareTo(lastName) == 0)
{
    lines.Insert(i, newRecord);
    insertionPointFound = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:48:49.483

为什么不在`delete`进入方法之前访问文件，因为您已经在代码中再次覆盖 -

```
if(File.Exists("Students.txt"))
{
   File.Delete("Students.txt");
} 
```

# sharepoint - 如何映射sharepoint的getlistitems Web服务的响应

> ID：13051271
> 
> 赞同：0
> 
> 时间：2012-10-24T14:26:08.653
> 
> 标签：sharepoint, xml-parsing, sharepoint-2010, sharepoint-2007

我有关于共享点应用程序的基本问题。

MS 提供了一些 Web 服务来访问共享点服务。

让我们以 GetListItems 服务为例。

我想知道，如何从 XML 解析器中识别项目是文件夹还是文件？我应该查看什么标签以将项目识别为文件夹或文件

如何获取文件或文件夹的属性（最后访问日期、只读等）。

请指导我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:01:33.040

Web 服务的典型响应如下所示：

```
<rs:data ItemCount="4">
  <z:row ows_Modified="2012-05-31 12:34:01" ows_ContentTypeId="0x01200082B0C5829FE047A1BF58F68DA1DAB12500C7BCD99F82ACA340A0131D59CE62371B" ows__ModerationStatus="0" ows__Level="1" ows_ID="1" ows_Created_x0020_Date="1;#2012-05-31 12:34:01" ows_PermMask="0x7fffffffffffffff" ows_FileRef="1;#depts/it/Lists/CTADocuments/mygroup" />
  <z:row ows_Modified="2012-05-31 12:36:51" ows_ContentTypeId="0x01200082B0C5829FE047A1BF58F68DA1DAB12500C7BCD99F82ACA340A0131D59CE62371B" ows__ModerationStatus="0" ows__Level="1" ows_ID="2" ows_Created_x0020_Date="2;#2012-05-31 12:36:51" ows_PermMask="0x7fffffffffffffff" ows_FileRef="2;#depts/it/Lists/CTADocuments/mygroup/another one" />
  <z:row ows_Modified="2012-05-31 17:49:45" ows_ContentTypeId="0x010100EB5D8789C471B04E80E2A7481607C23B" ows__ModerationStatus="0" ows__Level="1" ows_ID="9" ows_Created_x0020_Date="9;#2012-05-31 17:49:45" ows_PermMask="0x7fffffffffffffff" ows_FileRef="9;#depts/it/Lists/CTADocuments/Just_the_Essentials_Publishing.master" />
  <z:row ows_Modified="2012-06-07 17:05:11" ows_ContentTypeId="0x010100EB5D8789C471B04E80E2A7481607C23B" ows__ModerationStatus="0" ows__Level="1" ows_ID="10" ows_Created_x0020_Date="10;#2012-06-07 17:05:11" ows_PermMask="0x7fffffffffffffff" ows_FileRef="10;#depts/it/Lists/CTADocuments/mygroup/another one/junk.txt" />
</rs:data> 
```

前两个 z:row 是文件夹（查看 ContentTypeId），其他是文档。

ContentTypeIds：http: [//msdn.microsoft.com/en-us/library/aa543822.aspx](http://msdn.microsoft.com/en-us/library/aa543822.aspx)

# asp.net-mvc - MVC自动完成如何将我的项目列表放入对象中以返回Json

> ID：13051272
> 
> 赞同：0
> 
> 时间：2012-10-24T14:26:09.323
> 
> 标签：asp.net-mvc, json, linq, autocomplete

我正在从数据库中返回一个列表。我需要为 Json 方法返回一个对象。有任何想法吗。我是 linq 和 MVC 的新手。

```
public ActionResult Autocomplete(string term)
        {
            var names = itemsRepository.GetListItemNames(term);
              ///linq code to get my name object out
            return Json(names, JsonRequestBehavior.AllowGet);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:43:33.040

```
public ActionResult Autocomplete(string term)
        {
            var names = itemsRepository.GetDistinctListItemNames(term);
            var getNames = names.Select(c => c.ItemName);

            return Json(getNames, JsonRequestBehavior.AllowGet);
        } 
```

由于 Json 需要一个对象，而我正在查询一个 List ，所以这个简单的 linq select 能够获得正确的对象，即 itemName。

# sitecore - sitecore 登录和内容编辑器页面上缺少安装后样式

> ID：13051274
> 
> 赞同：3
> 
> 时间：2012-10-24T14:26:13.650
> 
> 标签：sitecore, sitecore6, content-editor

我在一台开发服务器上安装了 sitecore，并将站点根文件夹复制到一堆开发机器上。这个过程在 7 台机器中的 6 台上运行良好，我们可以看到 sitecore 登录和内容编辑器页面正常，并通过 IIS 浏览到该站点。在其中一台机器上浏览器中的站点/站点核心，我们没有看到任何样式通过。登录后，内容编辑器也是如此。

我将服务器上的 Web 配置和其中一台开发机器与有问题且无法发现任何差异的机器进行了比较。还对站点上的 IIS 设置与服务器 IIS 设置进行了比较，没有发现任何差异。

任何人对可能出现的问题或接下来可以采取哪些措施来解决问题有任何建议？

在 Windows 7 上使用 sitecore 6.5 作为开发机器。

修复：转到 IIS-> 站点-> 站点名称。在 IIS 下的右侧，身份验证。右键单击匿名身份验证，确保已启用并将匿名用户身份更改为应用程序池身份。回收应用程序池。应该都设置好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:37:09.597

似乎没有为 IIS 启用“静态内容”功能。您可以在“打开或关闭 Windows 功能”、“Internet 信息服务”、“万维网服务”、“常用 HTTP 功能”中查看。

如果已安装该功能，请使用 Fiddler 检查问题 - 查看所有 .css 请求返回的状态代码和内容。

# drop-down-menu - 下拉菜单适用于 Mac 浏览器，但不适用于 PC

> ID：13051276
> 
> 赞同：3
> 
> 时间：2012-10-24T14:26:19.960
> 
> 标签：drop-down-menu, platform-specific

我有一个下拉菜单，可以在我的 Mac 上的 Opera、Safari、Firefox、Chrome 中正常运行。

当我在 PC 上测试它时，下拉菜单太长，“论坛”选项卡被分流到最后，位于“主页”选项卡下。这发生在 Firefox、IE 和 Chrome 上。这些是我迄今为止唯一测试过的。

我对这个问题有点困惑。请问您有什么可以建议的吗？

我正在谈论的网站：http: [//www.makingsense.co.uk/index-new.html](http://www.makingsense.co.uk/index-new.html)

下拉菜单代码：

```
<div class="navigation-drop">

<div id="colortab" class="ddcolortabs">
<ul>
<li><a href="index-new.html" title="Home"><span>Home</span></a></li>
<li><a href="team.html" title="New"><span>Team</span></a></li>
<li><a href="fv.html" title="CSS" rel="dropmenu1_a"><span>First Visit</span></a></li>
<li><a href="pd.html" title="CSS" rel="dropmenu2_a">
    <span>Possible Diagnoses</span></a></li>    
<li><a href="ad.html" title="CSS" rel="dropmenu3_a">
    <span>After Diagnosis</span></a></li>
<li><a href="treatment.html" title="CSS" rel="dropmenu4_a">
    <span>Treatment</span></a></li>
<li><a href="follow.html" title="CSS" rel="dropmenu5_a"><span>Follow Up</span></a></li>
<li><a href="support.html" title="CSS" rel="dropmenu6_a"><span>Support</span></a></li>
<li><a href="contact-ooss.html" title="Useful Tools"><span>Contact Us</span></a></li>
<li><a href="research.html" title="Useful Tools"><span>Research</span></a></li>
<li><a href="forum.html" title="Useful Tools"><span>Forum</span></a></li>
</ul>
</div>

<!--1st drop down menu -->                                                   
<div id="dropmenu1_a" class="dropmenudiv_a">
    <a href="fv.html">Why have I been referred?</a>
    <a href="fv-2.html">What happens on arrival?</a>
    <a href="fv-3.html">What tests will I need?</a>
</div>

<script type="text/javascript">
//SYNTAX: tabdropdown.init("menu_id", [integer OR "auto"])
tabdropdown.init("colortab", 3)
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:07:52.007

尝试将字体大小更改为 11 像素。

```
.ddcolortabs ul{
  font: normal 11px Arial, Verdana, sans-serif;
  margin:0;
  padding:0;
  list-style:none;
} 
```

然后，如果您希望将字体保持在 12，请减少跨度上的左/右填充：

```
.ddcolortabs a span {
  background: none repeat scroll 0 0 #298D2F;
  color: #ECEAE5;
  display: block;
  float: left;
  padding: 7px 12px;
} 
```

# apache - 使用 SSL 证书对用户进行身份验证

> ID：13051279
> 
> 赞同：1
> 
> 时间：2012-10-24T14:26:28.947
> 
> 标签：apache, authentication, ssl, certificate

我想通过检查他们的 SSL 客户端证书信息来对我的网站的用户进行身份验证。我将使用 Apache 服务器，我想检查他们的证书是否将用户验证为某些组织的成员。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T14:40:21.650

简而言之：

1.  为您需要的任何域获取 SSL 证书，这可以是主域、子域、通配符等。如果您要拥有多个子域，那么通配符就是要走的路。SSL 证书可以从大多数托管公司购买，例如 123-reg 提供它们。
2.  在 Apache 上安装证书，取决于操作系统平台，这可以通过更新 httpd.conf 或 ssl.conf 来引用 SSL 证书、密钥、pem 文件等。您需要修改各种 SSLCertificate... 指令，看看在 ssl.conf 获取示例配置。
3.  设置 Apache 托管站点所需的任何身份验证，例如，使用 htpasswd 设置用户。

4.  然后，最终用户需要在首次连接到 https 站点时安装证书，这是在客户端完成的，可能需要管理员权限才能添加到客户端 PC。

大多数证书提供商都会提供完整的安装说明。

# amazon-web-services - .net AWS SDK - 使用 SES.BeginSendEmail 处理异常

> ID：13051280
> 
> 赞同：2
> 
> 时间：2012-10-24T14:26:29.420
> 
> 标签：amazon-web-services, amazon-ses

在使用适用于 AWS SES 的 .NET 开发工具包时，谁能告诉我如何处理异常？

返回的 IAsyncResult 的实现上有异常，但它是内部的。

是否有其他方法可以访问它，还是我需要反映它:(

```
amazonSimpleEmailServiceClient.BeginSendEmail(sendEmailRequest, ar => {
    var result = ar as AsyncResult;
    // result has .Exception, but its internal :(
}, null); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:02:05.910

[.NET AWS 开发工具包（以及整个 .NET，如在此处](https://stackoverflow.com/questions/4585042/is-delegate-endinvoke-really-necessary)详细讨论）中使用 Begin*/End* 方法的标准方法是调用相应的 End* 方法。

```
amazonSimpleEmailServiceClient.BeginSendEmail(sendEmailRequest, ar =>
{
    try
    {
        amazonSimpleEmailServiceClient.EndSendEmail(ar);
    }
    catch (Exception e)
    {
        Console.WriteLine(e);
    }
}, null); 
```

# java - 架构事件驱动的建议

> ID：13051281
> 
> 赞同：1
> 
> 时间：2012-10-24T14:26:29.930
> 
> 标签：java, spring, events, architecture, jms

最近我使用 Spring3.1 在事件驱动架构中升级了我的应用程序工作

我想知道你怎么看：

1.  在每个需要在数据库中插入/更新/等记录的类中都有一个 DAO 实例。（常规方式）

2.  我应该向 DAO 发送消息（通过 jms/channels/whatever），消息的内容将是我应该做什么的说明（在数据库中插入/更新/等记录）

2 号在松散耦合方式中的表现如何？

也许是矫枉过正？

欢迎此或任何其他建议或意见。

谢谢。射线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:37:20.287

松散耦合并不意味着向您的应用程序“添加”更多具体层（消息队列等）。如果“服务”实现类通过接口与 DAO 层交互（想到 Spring DAO bean 注入是一个完美的用例），那么您几乎是在抽象级别进行操作。

如果您随后将具体的 DAO 类注入替换为将消息发布到另一个服务的消息传递客户端，那么您的代码将继续像以前一样运行，而无需进行重大更改。当然，阻塞/非阻塞方法之间总是存在脱节，但没有什么是好的抽象无法解决的。我的建议是研究像 Guice 这样的框架/库来创建应用程序的初始草案/重构，而不是添加新层。如果那时您觉得非阻塞 DB 调用是可行的方法，您可以轻松实现它们。把这个逻辑放在前面只会增加技术债务。

# c++ - 创建内存分配器时出现 C++ 继承错误

> ID：13051282
> 
> 赞同：2
> 
> 时间：2012-10-24T14:26:31.793
> 
> 标签：c++, memory-management, boost, stl, ipc

我想知道为什么下面的代码不起作用。其背后的主要思想如下：

1.  我想使用分别由 std 分配器和 boost::interprocess::allocator 继承的自定义类，并且我想使用它们而不是基本分配器
2.  当我创建一个类 MyStdAllocator 时，它由 std::allocator 继承并使用它而不是 std::allocator （请参阅变量 x1 和 x2），它可以工作并且不会给出警告和错误。
3.  当我创建一个类 MyBoostAllocator 时，它由 boost::interprocess::allocator 继承并使用它而不是 boost::interprocess:allocator（请参阅变量 y1 和 y2）它不起作用并给出了底部列出的编译错误问题。

请告诉我，为什么这种继承不起作用以及如何解决？

```
#include <boost/interprocess/managed_shared_memory.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <iostream>

using namespace boost::interprocess;

template <typename _Tp>
class MyStdAllocator : public std::allocator<_Tp>
{
};

template<class T, class SegmentManager>
class MyBoostAllocator : public allocator<T, SegmentManager>
{
};

typedef std::allocator<int> std_allocator;
typedef MyStdAllocator<int> my_std_allocator;

typedef allocator       <int, managed_shared_memory::segment_manager> boost_allocator;
typedef MyBoostAllocator<int, managed_shared_memory::segment_manager> my_boost_allocator;

int main(int argc, char** argv) {

    struct shm_remove {
        shm_remove() {
            shared_memory_object::remove("MySharedMemory");
        }

        ~shm_remove() {
            shared_memory_object::remove("MySharedMemory");
        }
    } remover;

    managed_shared_memory segment(create_only,
            "MySharedMemory", //segment name
            65536);

    //Create an allocator that allocates ints from the managed segment
    allocator<int, managed_shared_memory::segment_manager>
            allocator_instance(segment.get_segment_manager());

    std_allocator *x1;
    x1 = new std_allocator();
    delete x1;

    my_std_allocator *x2;
    x2 = new my_std_allocator();
    delete x2;

    boost_allocator *y1;
    y1 = new boost_allocator(segment.get_segment_manager());
    delete y1;

    // following lines generate compilation errors:
    my_boost_allocator *y2;
    y2 = new my_boost_allocator(segment.get_segment_manager());
    delete y2;

    std::cout<<"its working!\n";

    return 0;

} 
```

编译错误如下：

```
../src/test.cpp:73:59: error: no matching function for call to ‘MyBoostAllocator<int, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index> >::MyBoostAllocator(boost::interprocess::ipcdetail::basic_managed_memory_impl<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index, 16ul>::segment_manager*)’
../src/test.cpp:73:59: note: candidates are:
../src/test.cpp:24:7: note: MyBoostAllocator<int, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index> >::MyBoostAllocator()
../src/test.cpp:24:7: note:   candidate expects 0 arguments, 1 provided
../src/test.cpp:24:7: note: MyBoostAllocator<int, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index> >::MyBoostAllocator(const MyBoostAllocator<int, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index> >&)
../src/test.cpp:24:7: note:   no known conversion for argument 1 from ‘boost::interprocess::ipcdetail::basic_managed_memory_impl<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index, 16ul>::segment_manager* {aka boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index>*}’ to ‘const MyBoostAllocator<int, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family>, boost::interprocess::iset_index> >&’
make: *** [src/test.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:04:06.993

这似乎是一个“支持的 C++11”问题。看

[http://wiki.apache.org/stdcxx/C++0xCompilerSupport](http://wiki.apache.org/stdcxx/C++0xCompilerSupport)

哪些编译器支持哪些功能。

[继承构造函数](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2540.htm)仅适用于 gnu4.8+。

当它们存在时，您仍然必须显式地放入 using 构造。

```
template<class T, class SegmentManager> 
class MyBoostAllocator : public allocator<T, SegmentManager> 
{ 
 public:
     using allocator<T, SegmentManager >::allocator;
}; 
```

在可用之前，请在派生类中编写构造函数。

# android - 如何知道应用程序崩溃了哪一行？

> ID：13051285
> 
> 赞同：0
> 
> 时间：2012-10-24T14:26:39.560
> 
> 标签：android, eclipse, debugging, version

我正在真实设备和 Eclipse 中调试应用程序。某些功能使其崩溃。LogCat 上没有错误。我已经设法通过写多行来找到它在类似情况下崩溃的`Log.v`那一行，直到我发现哪个 Log.v 没有出现。没有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:30:19.343

您可以使用 Eclipse 中的调试功能 - 它允许您在发生异常时中断程序流程（运行方式 -> 调试）。

这将允许您检查当前的局部变量/调用堆栈，以进一步诊断异常发生的原因。

ps 我在寻找奇怪的崩溃时使用的另一种方法是通过“adb”CLI 工具转储完整的 LogCat，并在文本编辑器中检查它。有时 Eclipse 中的 LogCat 显示可能会有点……奇怪……尤其是如果您在开发时一直在连接/断开设备（没有关闭 Eclipse）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:31:59.967

检查 Logcat 过滤器（在 Eclipse 中）。发生在我身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:38:27.300

我在 Eclipse 上使用了“调试”选项，这使它不显示错误。在崩溃后分离调试，或者从头开始运行应用程序（没有调试选项）会显示错误。要查找该行，请按应用程序过滤您的 LogCat，使应用程序崩溃，然后在将出现的红色文本上查找您的包名称。并且错误（期望）本身位于该文本的开头。

# asp.net - Enterprise Library 5.0 连接池超时

> ID：13051291
> 
> 赞同：0
> 
> 时间：2012-10-24T14:27:01.517
> 
> 标签：asp.net, webforms, timeout, enterprise-library

我有一个用 ASP.Net 2.0 Web 窗体编写的旧 Web 应用程序。我使用企业库中的数据访问块，最近更新到 5.0 版。应用程序是分层的，即 UI 层、服务层、数据层。它还使用 SQL Server 2008 进行数据存储。

我最近注意到当我运行应用程序并浏览到特定页面时出现以下错误。

**超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。**

这往往发生在从数据库进行大量单独读取的页面上，一页上可能多达 20 次。

下面显示了我的数据访问类的片段。

```
Public Class DataAccess

    ' create a private instance of the database factory
    Private db As Database = DatabaseFactory.CreateDatabase()

    Public Function ExecuteNonQuery(ByVal params() As SqlParameter, ByVal strSproc As String) As Integer

    Dim intReturnValue As Integer = 0
    Dim i As Integer
    Dim cmd As DbCommand

    cmd = db.GetStoredProcCommand(strSproc)
    cmd.CommandTimeout = 120

    For i = 0 To params.Length - 1
        db.AddInParameter(cmd, params(i).ParameterName.ToString, params(i).DbType, params(i).Value)
    Next

    db.AddParameter(cmd, "return_value", DbType.Int32, ParameterDirection.ReturnValue, "", DataRowVersion.Default, 0)

    db.ExecuteNonQuery(cmd)
    intReturnValue = Int32.Parse(db.GetParameterValue(cmd, "@return_value"))

    Return intReturnValue

    End Function

    Public Function ExecuteDataReader(ByVal params() As SqlParameter, ByVal SProc As String) As SqlDataReader

    Dim i As Integer
    Dim dr As SqlDataReader = Nothing
    Dim cmd As DbCommand

    cmd = db.GetStoredProcCommand(SProc)
    cmd.CommandTimeout = 120

    For i = 0 To params.Length - 1
        db.AddInParameter(cmd, params(i).ParameterName.ToString, params(i).DbType, params(i).Value)
    Next

    dr = TryCast(DirectCast(db.ExecuteReader(cmd), RefCountingDataReader).InnerReader, SqlDataReader)
    Return dr

    End Function 
```

在我的整个代码中，一旦我完成了 SqlDataReader，我总是会做这样的事情

```
If Not (drSource Is Nothing) Then
   drSource.Close()
End If 
```

你们有什么可以看到我失踪的吗？看起来我的代码可能会泄漏连接或未正确关闭吗？

我一直认为垃圾收集器摆脱了任何打开的连接。

任何反馈或帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:41:29.513

您的代码正在关闭数据读取器，但不是与其关联的数据连接。

由于您的数据阅读器是 a `SqlDataReader`，因此它具有一个`Connection`属性。您应该能够使用它来关闭和处理连接。

# php - 用python加密数据，用php解密

> ID：13051293
> 
> 赞同：10
> 
> 时间：2012-10-24T14:27:03.303
> 
> 标签：php, python, encryption, cross-platform

我正在寻找两个合适的代码片段来使用 python 对一些文本进行编码，这些文本将在 php 中解码。我正在寻找“简单”且兼容的东西，而我自己没有太多的加密经验。

如果有人可以举一个工作示例，那就太好了！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T14:50:22.103

蟒蛇加密

```
from Crypto.Cipher import AES
import base64
import os
# the block size for the cipher object; must be 16, 24, or 32 for AES
BLOCK_SIZE = 32
BLOCK_SZ = 14

# the character used for padding--with a block cipher such as AES, the value
# you encrypt must be a multiple of BLOCK_SIZE in length.  This character is
# used to ensure that your value is always a multiple of BLOCK_SIZE
PADDING = '{'

# one-liner to sufficiently pad the text to be encrypted
pad = lambda s: s + (BLOCK_SIZE - len(s) % BLOCK_SIZE) * PADDING

# one-liners to encrypt/encode and decrypt/decode a string
# encrypt with AES, encode with base64
EncodeAES = lambda c, s: base64.b64encode(c.encrypt(pad(s)))
DecodeAES = lambda c, e: c.decrypt(base64.b64decode(e)).rstrip(PADDING)
secret = "332SECRETabc1234"
iv = "HELLOWORLD123456"
cipher=AES.new(key=secret,mode=AES.MODE_CBC,IV=iv)
my_text_to_encode = "password"
encoded = EncodeAES(cipher, my_text_to_encode)
print 'Encrypted string:', encoded 
```

php 解密（注意编码文本只是从上面的 python 打印复制/粘贴）

```
<?php
$enc = "x3OZjCAL944N/awRHSrmRBy9P4VLTptbkFdEl2Ao8gk=";
$secret = "332SECRETabc1234"; // same secret as python
$iv="HELLOWORLD123456";  // same iv as python
$padding = "{";  //same padding as python
function decrypt_data($data, $iv, $key) {
    $cypher = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_CBC, '');

    if(is_null($iv)) {
        $ivlen = mcrypt_enc_get_iv_size($cypher);
        $iv = substr($data, 0, $ivlen);
        $data = substr($data, $ivlen);
    }

    // initialize encryption handle
    if (mcrypt_generic_init($cypher, $key, $iv) != -1) {
            // decrypt
            $decrypted = mdecrypt_generic($cypher, $data);

            // clean up
            mcrypt_generic_deinit($cypher);
            mcrypt_module_close($cypher);

            return $decrypted;
    }

    return false;
}

$res = decrypt_data(base64_decode($enc), $iv, $secret);
print rtrim($res,$padding);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:46:03.210

您可以将[python-mcrypt](http://pypi.python.org/pypi/python-mcrypt)用于 python。在 php 中，你有一个对应的解密函数来 mcrypt。我希望 php 中的[文档](http://php.net/manual/en/function.mcrypt-decrypt.php)足够清楚，以显示如何为 mcrypt 解密。祝你好运。

# svn - 在SVN中将未版本化的目录与版本化的目录合并

> ID：13051294
> 
> 赞同：0
> 
> 时间：2012-10-24T14:27:07.503
> 
> 标签：svn, merge, directory

有没有办法添加一个已经在 SVN 中版本化的目录？

例子：

SVN 存储库

```
/htdocs
    /directoryinquestion 
```

在站点文件夹中

```
/Sites
   /directoryinquestion 
```

我想要做的：将 /Sites/directoryinquestion 与 /htdocs/directoryinquestion 合并

问题：虽然我可以轻松复制目录，但问题是 .svn 文件被删除并且 SVN 开始抱怨。

这里的任何帮助都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T14:36:22.773

尝试使用 svn 导出文件夹（如果两者都有 .svn），然后将该文件夹的文件复制到所需的文件夹中，svn 将自动检测所做的新更改，并且应该可以添加/提交。

# iphone - Ipad 上的 Iphone 应用程序 - 使 Ipad 选择 640x960 而不是像素化的 2x320x480

> ID：13051295
> 
> 赞同：0
> 
> 时间：2012-10-24T14:27:16.590
> 
> 标签：iphone, ipad, retina-display

这是为了避免额外的目标并为 Ipad、App Store 上的单独应用程序等编写任何特定于目标的适配代码 - 而是使用“2x”按钮让 Iphone 应用程序以 640x960 而不是 320x480@2x 显示。

即使在非视网膜 Ipad 上，也有 640x960 的空间，但 Ipad 仍在 Ipad 上运行 Iphone 应用程序，就好像它们是为 Iphone 3GS 制作的一样。

这适用于公司和任何授权客户/合作伙伴内部使用的应用程序。该公司购买了 Ipad，但客户/合作伙伴可能希望使用他们拥有的 Iphone。

所以，我正在寻找一个编译时目标标志或一段代码来执行以检测平台是 Ipad 并使其显示窗口全尺寸。

是否有人成功地做到了这一点，如果是，你是如何做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:41:20.357

这不是真正的工作方式......您正在尝试创建一种解决方法，它可能会花费您更长的时间才能开始工作（如果可能的话），而不是只承诺制作 iPad 友好的布局。

如果您只是使项目成为通用二进制文件，那么它将在 ipad 上“本地”运行，而不是在 iphone 兼容模式下运行。之后，您可以做的最简单的事情就是确保正确设置视图的调整大小蒙版，以便它们伸展。根据您的应用程序的复杂性和构成，很多时候这足以让您通过。但是，在许多情况下，您应该只制作 ipad 特定的布局，因为可用性通常会大大提高。

# java - 如何将时间添加到时间戳？

> ID：13051298
> 
> 赞同：6
> 
> 时间：2012-10-24T14:27:27.903
> 
> 标签：java, timestamp, add

我需要将 14 分 59 秒添加到数组中的未知时间。我该怎么做呢？这是我到目前为止所拥有的：

```
Date duration = df.parse("0000-00-00 00:14:59");

arrayOpportunity[2] = arrayOpportunity[2] + duration; 
```

时间没有改变。谢谢！

我已经完成了我的研究。我无法粘贴我拥有的整个代码。但主要是我不想让你读完。只是寻找如何添加两个时间戳的简单答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T14:31:23.517

如果您在谈论 a `java.sql.Timestamp`，它有一个名为[setTime](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Timestamp.html#setTime%28long%29)的方法。对这类事情也`java.util.Date`有一种方法。`setTime`

你可以这样：

```
static final Long duration = ((14 * 60) + 59) * 1000;

oldTimestamp.setTime(oldTimestamp.getTime() + duration); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:31:46.557

如果你想以毫秒为单位添加时间，那么你可以添加

```
 (((14 * 60) + 59) * 1000) <-- Mili second value of 14 m and 59 sec 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T14:42:59.560

如果您只想添加时间，我建议使用[Joda Time](http://joda-time.sourceforge.net/)。

[LocalTime](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalTime.html)类允许您像这样添加持续时间：

```
LocalTime timeSum = time.plusMinutes(14).plusSeconds(59); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T14:31:28.083

[`#getTime()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html#getTime%28%29)只需使用and添加适当的毫秒数[`#setTime()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html#setTime%28long%29)：

```
timeStamp.setTime(timeStamp.getTime() + (((14 * 60) + 59)* 1000)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T14:31:36.667

`arrayOpportunity[2] = arrayOpportunity[2] + 14*60*1000 + 59*1000;`

您拥有的 Date 对象可能有效，但它并不真正代表 14 分 59 秒，它仅代表日历中的特定时间（例如，1970 年 1 月 1 日 00:14:59 的纪元开始后 14 分钟 59） .

# php - 功能无法在所有情况下正常工作

> ID：13051300
> 
> 赞同：0
> 
> 时间：2012-10-24T14:27:40.320
> 
> 标签：php, regex, preg-match-all

在为某些内容（链接等）抓取网页时，我有一个功能可以帮助我：

```
function list_tags($html, $start, $end)
{
    preg_match_all("($start(.*)$end)siU", $html, $matching_data);
    return $matching_data[0];
} 
```

示例用法：

```
$open_tag  = '<a';
$close_tag = '>';
$links     = list_tags($html, $open_tag, $close_tag); 
```

因此`print_r($links);`导致：

```
Array
(
    [0] => <a href="blah.html">
    [1] => <a href="other_blah.html">
    Etc...
    Etc...
) 
```

当我使用 `$open_tag = '<script';`或 `$open_tag = '<div';`等时我可以做同样的事情，但是当我尝试使用`$open_tag = '<input';`我的数组时，我的数组完全是空的，尽管`<input>`页面上有几个标签。有任何想法吗？

**编辑：**

我试图抓取的特定页面是`http://www.pcsoweb.com/inmatebooking/Inquiry.aspx`. 我在自己制作的页面上使用了相同的东西，它确实找到了``<input ... />`我创建的所有事件。

我将不得不更深入地了解是什么阻止我抓取`<input />`这个特定网站上的标签。

我还将研究`DOMDocument`课程，看看这是否能提供更好的结果。

感谢您的建议，**doublesharp**和**feeela**。我会进一步研究一下，看看真正的问题是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:39:02.773

使用 DOM 解析器是首选，但如果需要使用正则表达式来解析数据，请尝试使用`/`作为分隔符，而不是`(`使`)`代码更具可读性并使匹配组变得懒惰`?`（删除`U`修饰符）：

```
function list_tags($html, $start, $end)
{
    // escape forward slashes in your pattern start and end
    $start = str_replace("/", "\/", $start);
    $end   = str_replace("/", "\/", $end);
    preg_match_all("/{$start}(.*?){$end}/si", $html, $matching_data);
    return $matching_data[0];
}

$html = "<input test='test'><a href='asdf'>";
$open_tag  = '<(input|a)';
$close_tag = '>';
$links     = list_tags($html, $open_tag, $close_tag);
print_r($links); 
```

运行此代码会导致：

```
Array
(
    [0] => <input test='test'>
    [1] => <a href='asdf'>
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:55:40.823

如果我将您的正则表达式粘贴`(<input(.*)>)siU`到[http://www.functions-online.com/preg_match_all.html](http://www.functions-online.com/preg_match_all.html)

和

```
<a>dfg</a><input type="sdgf"/> 
```

`/>`需要注意的一件事是以（自关闭）结尾的输入。您的设置可能导致找不到？

没有 HTML 示例，很难说。

# asp.net - 在 ASP.NET MVC 4 中使用 Scripts.Render 时，在“脚本”标记中生成“类型”属性

> ID：13051301
> 
> 赞同：5
> 
> 时间：2012-10-24T14:27:46.800
> 
> 标签：asp.net, asp.net-mvc, asp.net-optimization, bundling-and-minification

是否可以在 ASP.NET MVC 4 中配置 Scripts.Render 以在“脚本”标签中生成“类型”属性？

如果是这样，怎么做？

提前致谢，

瑞安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T20:54:13.720

1.1-alpha1 更新支持使用 Scripts/Styles 助手进行您自己的标签格式设置。

有一个新的 DefaultTagFormat 属性，默认设置为：

```
"<script src="{0}"></script>" 
```

还有一个 RenderFormat 方法也接受标签格式。您应该能够通过这两个机制中的任何一个添加类型属性。

# android - 异步任务中的 CursorLoader，无法在未调用 Looper.prepare 的线程内创建处理程序

> ID：13051309
> 
> 赞同：6
> 
> 时间：2012-10-24T14:28:30.943
> 
> 标签：android, android-asynctask

在我的应用程序中，我调用股票相机应用程序来拍照。在我的活动结果中，我启动了一个异步任务来处理照片。（旋转并上传照片）。

我还想从图库中删除照片。为此，我在异步任务中执行以下代码。

```
// Delete image from gallery
        String[] imageColumns = { MediaStore.Images.Media._ID };
        String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
        String imageWhere = MediaStore.Images.Media._ID + ">?";
        String[] imageArguments = { Integer.toString(captureLastID) };

        CursorLoader imageLoader = new CursorLoader(mActivity);

        imageLoader.setUri(MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        imageLoader.setProjection(imageColumns);
        imageLoader.setSelection(imageWhere);
        imageLoader.setSelectionArgs(imageArguments);
        imageLoader.setSortOrder(imageOrderBy);

        Cursor imageCursor = imageLoader.loadInBackground();

        if (imageCursor.getCount() > 0) {
            while (imageCursor.moveToNext()) {
                int id = imageCursor.getInt(imageCursor
                        .getColumnIndex(MediaStore.Images.Media._ID));

                ContentResolver cr = mActivity.getContentResolver();
                cr.delete(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                        MediaStore.Images.Media._ID + "=?",
                        new String[] { Long.toString(id) });
                break;
            }
        }

        imageCursor.close(); 
```

我得到错误

> 无法在未调用 Looper.prepare 的线程内创建处理程序

是什么导致了这个错误，我该如何解决？这是否与我调用 loadInBackground 的事实有关，而 asynctask 已经在后台运行？

这是我的日志：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
    at android.os.AsyncTask$3.done(AsyncTask.java:200)
    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)

   Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
    at android.os.Handler.<init>(Handler.java:121)
    at android.support.v4.content.Loader$ForceLoadContentObserver.<init>(Loader.java:52)
    at android.support.v4.content.CursorLoader.<init>(CursorLoader.java:96)
    at tasks.ProcessPictureTask.doInBackground(ProcessPictureTask.java:78)
    at tasks.ProcessPictureTask.doInBackground(ProcessPictureTask.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    ... 4 more
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
    at android.os.Handler.<init>(Handler.java:121)
    at android.support.v4.content.Loader$ForceLoadContentObserver.<init>(Loader.java:52)
    at android.support.v4.content.CursorLoader.<init>(CursorLoader.java:96)
    at tasks.ProcessPictureTask.doInBackground(ProcessPictureTask.java:78)
    at tasks.ProcessPictureTask.doInBackground(ProcessPictureTask.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T15:51:48.960

实际上，接受的答案是不正确的。您似乎对发生这种情况的原因感兴趣，它也可能有助于您的应用程序的响应能力，所以我将给出另一个答案：

您没有更改 UI，因此这不是导致此崩溃的原因。原因是您的后台线程没有与之关联的 Looper，如错误所述。Looper 是一个偶尔检查消息的消息队列。例如，它是您在使用[Handler](http://developer.android.com/reference/android/os/Handler.html)时使用的。

您可以通过在使您的应用程序崩溃的调用之前添加这行代码来简单地添加循环器：

```
Looper.prepare(); 
```

在后台线程而不是 UI 线程上执行繁重的查询有一个很大的优势，因为当光标加载时您的 UI 不会响应。如果响应性对您很重要，则应在后台线程上调用数据库。

现在，在这种情况下，CursorLoader 确实没有理由需要 Looper。至少据我所知，抛出异常只是笨拙的实现。确实，如果您使用[LoaderManager](http://developer.android.com/reference/android/app/LoaderManager.html)和 CursorLoader一起使用会容易得多。

如果您不想弄乱加载器和后台线程，那么更简单的方法是设置侦听器`registerListener(int, OnLoadCompleteListener)`并使用`startLoading()`. 这会自动为您处理所有线程，并且可能会为您节省一些代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:37:41.403

您正在破解 MVC 模式，您收到此错误是因为您尝试从 AsynTask 中的 onBackground 方法更新 UI 组件。将任何 UI 或初始化移动到 Post 或 Pre 执行方法。看起来 ：

```
 CursorLoader imageLoader = new CursorLoader(mActivity); 
```

必须放在`protected void onPreExecute () method.`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T14:32:36.427

您正在尝试在后台线程中执行 UI 操作，您应该在 UI 线程中运行它。

# sql-server - 是否可以在不使用变量的情况下拥有基于子查询的动态 sql？

> ID：13051311
> 
> 赞同：1
> 
> 时间：2012-10-24T14:28:34.443
> 
> 标签：sql-server, tsql, dynamic-sql

我想在 T-SQL 中执行以下操作：

```
EXEC('... ' + (SELECT ...)) 
```

一个简单的具体例子是

```
EXEC('DROP TABLE ' + (SELECT name FROM sys.tables WHERE ...)) 
```

（显然，选择 WHERE 子句以使子查询始终只返回一个值。）当我尝试这个时，我得到一个错误：

```
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near '('.
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near ')'. 
```

我知道我可以通过使用变量来解决这个问题，例如：

```
DECLARE @sql varchar(MAX)
SELECT @sql = 'DROP TABLE ' + name FROM sys.tables WHERE ...
EXEC(@sql) 
```

但出于各种原因，我只想发表一个声明。那可能吗？

* * *

PS：如果它是相关的，那就是我试图挤进一个语句的动态 SQL 代码：

*   [如何在不知道其名称的情况下删除 SQL 默认约束？](https://stackoverflow.com/a/1433384/87698)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:33:56.353

您不能对传递给 EXEC 函数的值进行处理。

因此，您不能连接或以其他方式转换该值，因为它是在调用之前完成的。

因此，答案是，不，你不能。

But like Pondlife said, if you give the reason why you want to do it this way, it will be possible to find a more satisfying answer.

# c# - 在 DotNetOpenAuth 中强制使用不同的属性交换命名空间

> ID：13051318
> 
> 赞同：1
> 
> 时间：2012-10-24T14:29:05.160
> 
> 标签：c#, openid, dotnetopenauth, attribute-exchange

目前，我正在使用 OpenID（通过 C# 和 DotNetOpenAuth）在 App A（“他们的应用”）和 App B（“我的应用”）之间创建单点登录功能。

我希望利用属性交换来获取他们的应用程序提供的数据。他们的 API 记录了 AX 请求的外观：

```
openid.ns.ax              = http://openid.net/srv/ax/1.0
openid.ax.type.studentids = http://theirapp.com/path/student-ids 
```

请注意 .ax 命名空间。[这似乎符合 OpenID 的 AX 规范。](http://openid.net/specs/openid-attribute-exchange-1_0.html#fetch_request)

这就是我使用 DotNetOpenAuth 请求和获取属性的方式，[正如 SO](https://stackoverflow.com/a/4451379/260460)和大量其他来源所建议的那样：

```
FetchRequest ax = new FetchRequest();
ax.Attributes.AddRequired("http://theirapp.com/path/student-ids");
request.AddExtension(ax); 
```

和

```
string sIDs = String.Empty;
if (fetch != null)
    sIDs = fetch.GetAttributeValue("http://theirapp.com/path/student-ids"); 
```

当回复完全无视 AX 请求时，我感到很困惑。在观察了我们发送的查询字符串参数之后，我认为这实际上不是他们的错：

```
openid.ns:http://specs.openid.net/auth/2.0
openid.ns.alias3:http://openid.net/srv/ax/1.0
openid.alias3.required:alias1
openid.alias3.mode:fetch_request
openid.alias3.type.alias1:http://theirapp.com/path/student-ids
openid.alias3.count.alias1:1 
```

什么鬼，DotNetOpenAuth？“alias3”是从哪里来的？这应该是“斧头”。我无法判断我正在使用的应用程序是否对 AX 命名空间过于敏感，或者 DotNetOpenAuth 没有关注强制性 OpenID 协议。

所以，在所有这些积累之后，我的问题是：

1.  我需要我的 AX 请求位于命名空间 openid.ax 中，而不是 openid.alias3。我如何强制 DotNetOpenAuth 这样做？
2.  API 要求将请求的属性命名为 - 在本例中为“student-ids”。上面，他们得到了像“alias1”这样的默认名称。如何强制 DotNetOpenAuth 使用自定义名称标记属性？
3.  谁在这里：要求 openid.ax 或 DotNetOpenAuth 不关心的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:03:13.290

**问题一：**

> 我需要我的 AX 请求位于命名空间 openid.ax 中，而不是 openid.alias3。我如何强制 DotNetOpenAuth 这样做？

DotNetOpenAuth 不允许您强制使用特定扩展名的别名。要求一个特定的是违反 OpenID 2.0 规范的。甚至[AX 扩展本身也在 1.1 节中说明了这一点](http://openid.net/specs/openid-attribute-exchange-1_0.html#anchor2)

> > `openid.ns.<extension_alias>=http://openid.net/srv/ax/1.0`
> 
> 实际的扩展命名空间别名应该由组成消息的一方根据每个消息确定，以避免多个扩展之间的冲突。就本文档而言，属性交换服务的扩展命名空间别名将是“ax”。

**问题2：**

> API 要求将请求的属性命名为 - 在本例中为“student-ids”。上面，他们得到了像“alias1”这样的默认名称。如何强制 DotNetOpenAuth 使用自定义名称标记属性？

就像您的第一个问题一样，DotNetOpenAuth 没有为您提供强制单个属性别名的方法，因为 AX 扩展不允许这些类型的要求。属性的类型在 URI 中给出。该属性的别名由依赖方定义，并且 OpenID 提供者应该查看属性的类型 URI，并接受来自依赖方的任何别名。

**问题 3：**

> 谁在这里：要求 openid.ax 或 DotNetOpenAuth 不关心的 API？

DotNetOpenAuth 是正确的。如果您正在查看此学生 ID 交换的文档之间的别名差异确实与 DotNetOpenAuth 是您在忽略 AX 属性时看到的问题的根本原因，那么错误在于执行不善在服务器上运行的 OpenID 提供程序。OpenID Providers 的糟糕实现非常可怕——不仅因为互操作性差，而且因为它们表明可能存在许多可能的安全问题，以及在正确实施规范时缺乏注意。

我建议您尝试使用 Fiddler 或其他一些 HTTP 嗅探器来拦截出站请求，修复所有别名以匹配文档建议的内容，并查看它是否解决了问题。如果是这样，应该修复 OpenID 提供程序，您可以联系他们以请求他们升级到他们正在使用的任何库的更新版本（希望仅此一项就可以修复它）。如果“修复”别名*不能解决*问题，那么您可以继续调查互操作失败的其他可能原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:02:28.623

谢谢垃圾邮件。我想出了一个解决此问题的技巧，并将其发布在这里，以供其他可能遇到与 PowerSchool 的 OpenID 提供程序限制相同的问题的人使用。

您需要使用 DotNetOpenAuth 正常构建请求，然后从请求中提取重定向响应。一旦你有了这个，你可以拉出 Location 头并根据需要覆盖命名空间值。

此示例适用于 MVC 应用程序。如果您需要在 WebForms 应用程序中执行此操作，只需从方法中获取逻辑并将该行替换`return redirectResponse.AsActionResult();`为`redirectResponse.Send()`. 对于 ThreadAbortExceptions，您需要将其包装在通常的 try...catch... 中。

使用的命名空间：

```
using System;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Mvc;
using System.Web.Security;
using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.OpenId;
using DotNetOpenAuth.OpenId.Extensions.AttributeExchange;
using DotNetOpenAuth.OpenId.RelyingParty; 
```

黑客：

```
const string NS_DCID = "http://powerschool.com/entity/id";
const string NS_USERTYPE = "http://powerschool.com/entity/type";

static readonly OpenIdRelyingParty openid = new OpenIdRelyingParty();

private ActionResult SubmitOpenIdRequest(string openid_identifier)
{
    var request = openid.CreateRequest(openid_identifier);

    var ax = new FetchRequest();

    // any modification to the following attributes will require a corresponding change in the string replacement hack
    ax.Attributes.AddRequired(NS_DCID);
    ax.Attributes.AddRequired(NS_USERTYPE);

    request.AddExtension(ax);

    var redirectResponse = request.RedirectingResponse;

    // PowerSchool is violating the attribute exchange specification, requiring specific namespaces and elements to function
    // Need to overwrite the values generated by OpenID to patch PowerSchool's incorrect provider implementation
    redirectResponse.Headers["Location"] = redirectResponse.Headers["Location"]
        .Replace("openid.ns.alias3", "openid.ns.ax")
        .Replace("openid.alias3.required=dcid%2Calias2", "openid.ax.required=dcid%2Cusertype")
        .Replace("openid.alias3.mode", "openid.ax.mode")
        .Replace("openid.alias3.type.alias1", "openid.ax.type.dcid")
        .Replace("openid.alias3.count.alias1", "openid.ax.count.dcid")
        .Replace("openid.alias3.type.alias2", "openid.ax.type.usertype")
        .Replace("openid.alias3.count.alias2", "openid.ax.count.usertype");

    return redirectResponse.AsActionResult();
} 
```

请注意：这是一个脆弱的 hack。DNOA 的内部更改或 FetchRequest 的更改可能会破坏替换逻辑。

# .net - 从数据库填充 VB.NET 中的 DropDownBox，但具有自定义显示名称

> ID：13051319
> 
> 赞同：0
> 
> 时间：2012-10-24T14:29:09.670
> 
> 标签：.net, windows, vb.net, visual-studio

好的，所以我可以毫无问题地从我的数据库中加载我的 ComboBoxes 并为其分配正确的 ValueMember，但我需要连接*“user_last_name”和“、”和“user_first_name”*，以便它显示比用户名更好的信息。希望这只是一个简单的修复，我

```
Private Sub loadMemberName()

    Dim memberSELECTSQLString As String =
        "SELECT * FROM user_tbl"
    Dim da As New OleDbDataAdapter(memberSELECTSQLString, conn)
    Dim ds As New DataSet

    da.Fill(ds, "user_tbl")

    With memberComboBox
        .DataSource = ds.Tables("user_tbl")
        .DisplayMember = "user_username"
        .ValueMember = "user_id"
        .SelectedValue = -1
    End With
End Sub 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:59:20.107

```
SELECT CONCAT(user_last_name, ', ', user_first_name) username FROM user_tbl 
```

或者

```
SELECT CONCAT(user_last_name, ', ', user_first_name) AS username FROM user_tbl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:32:49.483

在你的 sql 中连接它并发回别名，然后在你的组合框中引用别名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:45:04.723

如果您不知道连接的语法

```
select top 10 [docID] + ' ' + [textHash] as [userName], [docID] from docSVsys 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T15:55:48.663

```
Private Sub loadMemberName()

    Dim memberSELECTSQLString As String =
        "SELECT user_id, user_last_name + ', ' + user_first_name AS username FROM user_tbl"
    Dim da As New OleDbDataAdapter(memberSELECTSQLString, conn)
    Dim ds As New DataSet

    da.Fill(ds, "user_tbl")

    With memberComboBox
        .DataSource = ds.Tables("user_tbl")
        .DisplayMember = "username"
        .ValueMember = "user_id"
        .SelectedValue = -1
    End With
End Sub 
```

# matrix - 使用 cuda 将数百个矩阵相乘

> ID：13051326
> 
> 赞同：5
> 
> 时间：2012-10-24T14:29:26.237
> 
> 标签：matrix, cuda, matrix-multiplication

我正在编写一个程序，该程序需要使用 CUDA 并行乘以数百个矩阵。有人可以解释如何执行此操作。

我已经看到开普勒架构能够实现动态并行。有人使用过这种架构吗？如果是的话，是哪个 Nvidia 显卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:04:14.300

使用 CUDA 获得快速执行矩阵乘法的最简单方法是使用[GFOR 循环通过](http://www.accelereyes.com/arrayfire/c/page_gfor.htm)[ArrayFire](http://accelereyes.com/arrayfire) CUDA 库。这是一些可以满足您要求的代码：

```
int n = 8, int m = 8;   // dimensions
int t = 10;             // number of different matricies
array A = randu(m,n,t); // many matricies
array B = randu(m,n);   // one matrix
array C = zeros(m,n,t); // destination

// multiply C=A*B for all A, at the same time
gfor (array i, A.dims(2)) {
    C(span,span,i) = matmul(A(span,span,i), B);
}

print( A );
print( B );
print( C ); 
```

ArrayFire 自动高效地平铺计算以在 GPU 上执行。所有这些都是在幕后为您优化的。我发现它比尝试自己手写要快。

# linq - C# EF 5 Code First 中多对多关系的 Lambda 表达式

> ID：13051330
> 
> 赞同：2
> 
> 时间：2012-10-24T14:29:37.620
> 
> 标签：linq, c#-4.0, lambda, ef-code-first

我正在使用 EF 5 Code First 和 VS 2012。我有文章和标签的类。每篇文章将至少关联一个标签。请参阅下面的课程。

```
public class Article
{
    public int ArticleId { get; set; }
    public virtual ICollection<ArticleTag> Tags { get; set; }
}
public class Tag
{
    public int TagId { get; set; }
    public string TagName { get; set; }
}

public class ArticleTag
{
    public int ArticleId { get; set; }
    public int TagId { get; set; }

    // navigation property
    public virtual Article Article { get; set; }
    public virtual Tag Tag { get; set; }
} 
```

下面是我试过的代码。**requestTags**包含 TadgIds 的列表。**repBase**是数据库上下文。但下面的代码正在返回所有文章。

```
var idList = requestTags.tags.Select(t => t.id).ToList();
 var result= repBase.GetAll<Article>().Select(tg => tg.Tags.Where(tk => idList.Contains(tk.TagId))).ToList(); 
```

请帮助我获取给定 TagId 列表的文章列表。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:57:12.303

我想你正在寻找这个。

改变：

*   `Select`到`Where`
*   `tg.Tags.Contains`到`tg.Tags.Any`

例子：

```
var idList = requestTags.tags.Select(t => t.id).ToList();

var result= repBase.GetAll<Article>().Where(tg => tg.Tags.Any(tk => idList.Contains(tk.TagId))).ToList(); 
```

# javascript - 设置包装函数的长度

> ID：13051332
> 
> 赞同：3
> 
> 时间：2012-10-24T14:29:40.877
> 
> 标签：javascript, ecmascript-5

我经常发现自己需要在对象上包装一个函数以用于各种目的。是否有一种优雅的方法可以`length`在包装函数上保留原始函数的属性？

例如：

```
var x = {
    a: function(arg1, arg2) { /* do something */ }
};

function wrap(obj) {
    var original = obj.a;
    obj.a = function wrapper() {
        console.log('a called');
        original.apply(this, arguments);
    };
}

x.a.length; // => 2
wrap(x);
x.a.length; // => 0 
```

我想做的事：

```
var x = {
    a: function(arg1, arg2) { /* do something */ }
};

function wrap(obj) {
    var original = obj.a;
    obj.a = function wrapper() {
        console.log('a called');
        original.apply(this, arguments);
    };
    obj.a.length = original.length;
}

x.a.length; // => 2
wrap(x);
x.a.length; // => 2 (actual still 0) 
```

但是，这不起作用，因为`length`它不可写。

目前我能想到的唯一解决方案是（1）动态生成函数作为字符串和`eval`/`new Function`它或（2）有一个巨大的不同长度的代理函数数组，并选择对应于正确长度的代理函数. 这对我来说似乎不是一个优雅的解决方案，并且能够在`length` *不*指定函数中的每个参数的情况下任意创建函数似乎是一个合理的要求。

似乎`bind`能够在内部执行此操作：

```
function a(b, c) { }
a.bind(null).length; // => 2 
```

这将创建一个具有原始长度的包装函数！这正是我希望自己能够做到的。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:58:45.890

我喜欢 eval(...) 方法，因为它很简单。

```
function wrap(obj) {
    var f = obj.fun.toString();
    f = f.replace("{", "{ alert('wrapper'); ");
    obj.fun = eval('['+f+']')[0];
} 
```

您可以将其扩展为具有 wrap 的第二个参数，该参数表示包装器函数，并使用字符串操作来组合它们。

如果您的目标是包装的透明度，那么只需利用编程语言的动态功能。

* * *

如果您愿意对 JavaScript 文件进行额外处理，则可以内置热补丁/包装。

```
var x = {
    a: function(arg1, arg2) {
        (x._a || (function(){}))();
        ... do actual function stuff ...
    }
}
function wrap(obj) {
    obj._a = function() {
        console.log("ok");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:13:03.993

如果您需要以相同的方式获取已包装和未包装函数的长度，但可以不使用 length 属性来处理，这样的事情可能会有所帮助：

```
Function.prototype.mylengthf = function() {
    return this.mylength | this.length;
};

var x = {
    a: function(arg1, arg2) { /* do something */ },
    b: function(arg1, arg2, arg3) { /* do something else */ }
};

function wrap(obj) {
    var original = obj.a;
    obj.a = function wrapper() {
        console.log('a called');
        original.apply(this, arguments);
    };
    obj.a.mylength = original.length;
}

log(x.a.length); // => 2
wrap(x);
log(x.a.length); // => 0
log(x.a.mylengthf()); // => 2
log(x.b.mylengthf()); // => 3
​ 
```

# delphi - 如何在delphi中创建包含对接口的弱引用的TDictionary

> ID：13051334
> 
> 赞同：0
> 
> 时间：2012-10-24T14:29:46.717
> 
> 标签：delphi, delphi-xe2

我想创建一个包含（ao）两个属性 ObjectLinks 和 ObjectBacklinks 的 Tinterfacedobject。Objectlinks 包含对其他对象的接口引用，ObjectBacklinks 包含这些链接的反向

这两个属性都包含 TWeakIntfDictionary = class(TDictionary) Backlinks 属性在 ObjectLinks.ValueNotify 事件中维护

为了确保在释放原始对象时从字典中删除接口引用，需要使用通知算法（与 TFmxObject 使用相同）

怀疑我在创建这么多对同一个接口对象的引用时遇到了各种循环引用问题:(但我似乎无法摆脱这个问题。当从被销毁的对象中调用 FreeNotification 时，一切正常很好，直到它从 FreeNOtification 返回。此时再次调用对象的 .Destroy :-(

```
 {1 Dictionary of interfaces (using weak references) using Free notification }
  TWeakIntfDictionary = class(TDictionary<int64, IInterface>, IFreeNotificationMonitor)
  protected
    procedure ValueNotify(const Value: IInterface; Action: TCollectionNotification); override;
  public
    procedure FreeNotification(aObject: TObject);
  end;

  implementation

  procedure TWeakIntfDictionary.FreeNotification(aObject: TObject);
  var
    lObj: TPair<int64, IInterface>;
  begin
    //Object is going to be destroyed, remove it from dictionary
    for lObj in Self do
    begin
      if (lObj.Value as TObject).Equals(aObject) then
      begin
        Remove(lObj.Key);
        Break;
      end;
    end;
  end;

  procedure TWeakIntfDictionary.ValueNotify(const Value: IInterface; Action: TCollectionNotification);
  var
    lDestrIntf: IFreeNotificationBehavior;
  begin
      // When a TObject is added to the dictionary, it must support IDestroyNotification
      // This dictionary is than added to the notificationlist of the TObject
    if Supports(Value, IFreeNotificationBehavior, lDestrIntf) then
      case Action of
        cnAdded:      begin
                        lDestrIntf.AddFreeNotify(Self);
                        lDestrIntf._Release;
                      end;
        cnRemoved,
        cnExtracted:  begin
                        lDestrIntf.RemoveFreeNotify(Self);
                      end;
      end
    else
      raise EWeakInftDictionaryException.Create('Object added to TWeakIntfDictionary does not support IFreeNotificationBehavior');

    inherited;

  end; 
```

有人知道弱引用字典的现有实现吗？任何人有任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:09:57.527

在以下代码中找到了解决方案

```
procedure TWeakIntfDictionary.FreeNotification(aObject: TObject);
var
  ...
begin
  //Object is going to be destroyed, remove it from dictionary
  lSavedEvent := FDict.OnValueNotify;
  FDict.OnValueNotify := nil;
  lRemoveList := TList<TKey>.Create;
  try
    for lPair in FDict do
    begin
      pointer(lIntf) := lPair.Value;
      if (lIntf as TObject) = aObject then
        lRemoveList.Add(lPair.Key);
    end;
    pointer(lIntf):=nil; // avoid _release for the last item

    for lKey in lRemoveList do
      FDict.Remove(lKey);

  finally
    FDict.OnValueNotify := lSavedEvent;
    lRemoveList.Free;
  end;
end; 
```

# javascript - C 风格包含在 Firebug 或 Chrome 控制台中吗？

> ID：13051344
> 
> 赞同：2
> 
> 时间：2012-10-24T14:30:19.570
> 
> 标签：javascript, firefox, google-chrome, console, firebug

> **可能重复：**
> [在 chrome 控制台中包含 javascript 文件](https://stackoverflow.com/questions/5282228/include-javascript-file-in-chrome-console)

有没有办法从我的本地文件系统中的任意位置在控制台中包含 javascript 文件？例如像 C 风格的东西 #include "/path/to/script.js"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:50:07.993

Firebug 还没有这个，但[它可能会在下一个版本中添加](http://code.google.com/p/fbug/issues/detail?id=5878)（大约在 12 月左右）。

# ruby-on-rails - Rails 中带有哈希列的数据库

> ID：13051345
> 
> 赞同：3
> 
> 时间：2012-10-24T14:30:21.687
> 
> 标签：ruby-on-rails, activerecord

我有一个应用程序，我在其中使用了一个已经存在并且已经有几个我无法更改的数据的数据库。

我想使用 ActiveRecord 访问这些数据，但问题是其中几个模型有一个名为的列`hash`，并且 ActiveRecord 引发了异常：

```
ActiveRecord::DangerousAttributeError: hash is defined by ActiveRecord 
```

我该怎么做才能不覆盖哈希方法并同时设法访问此列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:08:48.927

看看[safe_attributes](https://github.com/bjones/safe_attributes) gem。看起来它是为您的问题而构建的。

# arrays - 从方法返回 EDT 数组并检索它，AX 2012

> ID：13051351
> 
> 赞同：3
> 
> 时间：2012-10-24T14:30:51.093
> 
> 标签：arrays, axapta, x++, dynamics-ax-2012

我已经摆弄了这个问题一段时间，似乎无法找到解决方案。我正在编写另一个人最初编写的一些代码，我的工作是让它工作，因为他没有机会完成它。

我创建了一个名为 MpasMthSalesIndex 的 EDT，其中包含所有月份的数组元素，即 Jan - Dec。

我从表单调用下面的方法（位于 MpasItemSales 数据源中）以获取返回的数组，如下所示：

```
[MpasMthSalesIndex] = MpasItemSales.MthSales(Year(today())-2); 
```

给我错误：“操作数类型与运算符不兼容”

它不起作用。这就是原始代码，我已经尝试了所有我能想出的方法来返回这个数组。有谁知道我该怎么做？

这是我调用的方法：

我所做的是初始化 MpasMthSalesIndex Ret，并用值填充它并尝试返回它，这里没有错误，但是当我尝试从我需要它的表单将它分配给 MpasMthSalesIndex 时出现错误...

```
MpasMthSalesIndex MthSales(Yr _yr)
{
    int     i;
    int     m;
    date    d = SystemDateGet();
    date    e;
    Qty                 YrSales[366];
    MpasMthSalesIndex   ret;
    ;

    switch(_yr)
    {
        case(Year(d))                         :     [YrSales] = this.MpasSalesCurYr;
                                                    d = dateStartYr(d);
                                                    break;
        case(Year(PrevYr(d)))                 :     [YrSales] = this.MpasSalesPrevYr;
                                                    d = dateStartYr(PrevYr(d));
                                                    break;
        case(Year(PrevYr(PrevYr(d))))         :     [YrSales] = this.MpasSalesPrev2Yr;
                                                    d = dateStartYr(PrevYr(PrevYr(d)));
                                                    break;
        case(Year(PrevYr(PrevYr(PrevYr(d))))) :     [YrSales] = this.MpasSalesPrev3Yr;
                                                    d = dateStartYr(PrevYr(PrevYr(PrevYr(d))));
                                                    break;
    }

    e = dateEndYr(d);
    while (d<e)
    {
        i = DayOfYr(d);
        m = MthOfYr(d);
        ret[m] += YrSales[i];
        d++;
    }

    return ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:50:26.177

通话

```
[MpasMthSalesIndex] = MpasItemSales.MthSales(Year(today())-2); 
```

期望一个容器作为返回值，如：

```
int a, b, c;
[a, b, c] = [1, 2, 3] 
```

尝试编辑返回容器的方法：

```
return [ret]; 
```

# javascript - 将 touchstart 事件委托给单击处理程序

> ID：13051352
> 
> 赞同：3
> 
> 时间：2012-10-24T14:30:52.310
> 
> 标签：javascript, model-view-controller, mobile, ember.js, handlebars.js

我想将所有 touchstart 事件委托给定义的单击处理程序，作为 iPhone 和其他“触摸浏览器”的默认值。我想出了两种方法：

1) 扩展 Ember.View 以将所有 touchstart 事件委托给单击处理程序：

```
 Ember.View.reopen({
      touchStart: function(event) {
         return this.click(event);
      }
 });

 App.SomeView = Ember.View.extend({
      click: function(event) {
         console.log('should be fired for click and touchstart events');
      },          
 }); 
```

2）在（handlebars）模板中指定多个动作事件：

```
 <i {{action someAction on="click,touchStart"}} ></i> 
```

两种方法都不起作用。我错过了什么？Ember.Button 的实现[方式类似](https://github.com/emberjs/ember.js/blob/master/lib/ember.js)（第 18625 行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T09:02:11.500

您使用的是什么 Ember.js 版本？以下示例适用于最新的 Ember.js `v1.0.0-pre2`，请参阅[http://jsfiddle.net/pangratz666/3c9bg/](http://jsfiddle.net/pangratz666/3c9bg/)：

```
App = Ember.Application.create({});

Ember.View.reopen({
    touchStart: Ember.alias('click'),
    click: function() {
        console.log('clicki di click OR touchi di touch');
    }
});

Ember.View.create({
    elementId: 'leViewId',
    templateName: 'leViewTemplate'
}).append();

Ember.run.later(function() {
    Ember.$('#leViewId').trigger('touchstart');
}, 500);
Ember.run.later(function() {
    Ember.$('#leViewId').trigger('click');
}, 1000); 
```

​</p>

* * *

通过注册多个事件`<i {{action someAction on="click,touchStart"}} ></i>`不起作用。如果要处理超过 1 种类型的事件，则应使用自定义`Ember.View`.

# php - 从字符串到 XML

> ID：13051356
> 
> 赞同：0
> 
> 时间：2012-10-24T14:31:16.457
> 
> 标签：php, xml, string, tsql, simplexml

我有以下查询：

```
 SELECT CAST(CAST([xmlDoc] AS VARCHAR(8000)) AS TEXT) AS xmlDoc FROM MYTABLE 
```

xmlDoc 是一个 xml。如果我不作为 TEXT 进行强制转换，我会收到此错误：

仅 Unicode 排序规则中的 Unicode 数据或 ntext 数据无法使用 DB-Library（例如 ISQL）或 ODBC 版本 3.7 或更早版本发送到客户端。

所以，多亏了作为 TEXT 的转换，我没有任何问题，我继续我的应用程序。

但是现在我需要解析 xmlDoc 中包含的 xml。它是一个 xml，但现在它是一个字符串。

如何解析 xmlDoc ？我可以使用任何 php 函数将其返回到 xml 吗？我该怎么办？

我试过了：

```
$xml= simplexml_load_string($result['xmlDoc']); 
```

但我得到 $mxl 的错误

这是字符串：

```
<Sent><Head><Application>T1</Application><NumSent U="052" yearg="2011" counter="0032"/><Date>2011-12-07</Date></Head><Content></Content></Sent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:50:16.377

您的 XML 只是一个片段，我猜 SimpleXML 需要一个完整的 XML 文档。

我对 SQL Server 中的 XML 生成一无所知，但在 PHP 端，您始终可以自己完成文档：

```
$xml= simplexml_load_string(
    '<?xml version="1.0" encoding="UTF-8"?>' . $result['xmlDoc']
); 
```

# jquery - 如何实现这个动画？

> ID：13051357
> 
> 赞同：0
> 
> 时间：2012-10-24T14:31:17.160
> 
> 标签：jquery, templates, animation, knockout.js

我想在淘汰赛中实现这个简单的动画：

```
function scroll(back) {
    var scrollContainer = $('.scrollingContent');
    var newContent = $("<div class='content'></div>");
    var oldContent = scrollContainer.children().first();
    newContent.css("width", "50%");
    var contentSize = oldContent.width();
    var newContentColor = oldContent.css("background-color") == "rgb(255, 0, 0)" ? 
                                                                "green" : "red";
    newContent.css("backgroundColor", newContentColor);
    if (back) {
        newContent.css("margin-left", -contentSize);
        scrollContainer.prepend(newContent);
        newContent.animate({ "margin-left": 0 }, 600, 
        function () { oldContent.remove(); });
    } else {
        scrollContainer.append(newContent);
        oldContent.animate({ "margin-left": -contentSize }, 600, 
        function () { oldContent.remove(); });
    }
} 
```

示例可以看这里：http: [//jsfiddle.net/VMx3j/106/](http://jsfiddle.net/VMx3j/106/)

我已经阅读了很多关于自定义绑定的内容，但我仍然不明白如何正确地做到这一点。

我只有两个想法。首先是创建一个 foreach 数组并绑定 afterRender、afterAdd 或 beforeRemove。但它会是正确的吗？我认为这种情况下的代码不够容易理解，而且很难改变任何东西。另一个想法是创建自定义绑定。但据我了解，这种方法仅适用于一个元素，我需要访问其中至少两个元素。

另请注意，内容元素是模板（此动画会不断更改）。

如果您对此有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:18:15.377

我希望我明白你愿意做什么。这将是一个图片轮播，对吧？:)

是的，为元素制作一个数组！

```
<script>
var $pics = $('#pics img'); // Get all img elements (this is an array/object !)
var i = 0;                  // Index starts with zero
var len = $pics.length;     // How many pictures we have

var $curr = $pics.eq(i);                       // Access current element
var $next = $pics.eq( i+1 == len ? 0 : i+1 );  // Access next element
var $prev = $pics.eq( i == 0 ? len-1 : i-1 );  // Access previous element
</script> 
```

我相信现在你会知道该怎么做了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:08:37.037

以下是正确答案：

```
this.afterElementAdd = function(element) {
    if (element.nodeType === 1) {
        var el = $(element);
        if (el.next().length != 0 && el.prev().length == 0) {
            el.animate({ "margin-left": "0" }, 300, function () {
                self.contents.pop();
            });
        }
        else if (el.prev().length != 0 && el.next().length == 0) {
            el.prev().animate({ "margin-left": -el.width() }, 300, function () {
                self.contents.shift();
            });
        }
    }
}; 
```

# django - Joomla 会话变量

> ID：13051375
> 
> 赞同：0
> 
> 时间：2012-10-24T14:31:56.777
> 
> 标签：django, session, joomla, session-variables, django-context

在 Django 中有一个名为 getContext 的方法，它检索会话数据、模板变量以及正确“上下文”中的所有内容。

我现在在 Joomla 中编程，制作一些组件并进行调试，我正在寻找一种查看所有会话变量的方法。只是为了查看它们并查看在特定请求期间可用的内容。因此，我已经搜索了 api，并且知道如何通过关键字从会话中获取内容，但没有看到所有会话存储变量。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:53:37.370

获取会话，或者您可以获取所有会话 $_SESSION 或通过 joomla 的会话表，否则您可以使用会话名称获取 $session->get();

```
$session =& JFactory::getSession(); 
```

用于获取用户会话

```
$session->get('user'); 
```

设置任何会话

```
$session->set('user',$user); 
```

# vb.net - VB.net 拥有的表单顶级订单 - 最顶层的属性

> ID：13051379
> 
> 赞同：1
> 
> 时间：2012-10-24T14:32:07.290
> 
> 标签：vb.net, visual-studio-2010, visual-studio, visual-studio-2008

我现在有**主表格**和 4 个自有表格，我如何订购它们？

我希望拥有`form1`在主窗体的顶部并拥有在**主窗体****的**`form2`顶部并拥有。**`form1`**

 **如果我点击到`form1`然后`form1`就结束了`form2`。那对我没有好处。

如果我设置`form2`Topmost = True 的属性，那么它就像魅力一样。但同样不好，因为如果我打开记事本，它总是在整个屏幕上，那么这块`form2`就在记事本的顶部。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:28:06.547

答案是将 Form2 的所有者设置为 Form1，正如@Hans Passant 在评论中所说。**

# php - JQuery Post 未将数据值传递给 PHP 文件

> ID：13051380
> 
> 赞同：0
> 
> 时间：2012-10-24T14:32:14.187
> 
> 标签：php, jquery, post

我正在使用 jQuery 函数 $.post 将一些值传递给 php 文件，然后该文件使用这些值来引用 mySQL 数据库并在 post success 函数中解析出结果值。但是由于某种原因，当我尝试使用 $_POST 标记获取 php 文件中的数据时，我收到未定义索引的通知。这是我的js代码：

```
var curX = 2;
var curY = 6;

function move(moveX, moveY) {
var position = {
    x: curX + moveX,
    y: curY + moveY
}
$.post('php/tilecheck.php', position, function(data) {
    //console.log(data);
    curX += moveX;
    curY += moveY;

    var n = data.split("\"");
    boundary(n[3], n[1]);
    boundary(n[7], n[5]);
    boundary(n[11], n[9]);
    boundary(n[15], n[13]);
    /*boundary(data.left,'left');
    boundary(data.right, 'right');
    boundary(data.top, 'top');
    boundary(data.bottom, 'bottom');*/
})
}

function boundary(value, pos) {
if(value == 1){
    $("#a" + pos).css('display', 'none');
}
else {
    $("#a" + pos).css('display', '');
}
} 
```

它引用的php文件：

```
<?php
ini_set('display_errors',1);
error_reporting(E_ALL);

include('db-info.php');

$x = $_POST['x'];
$y = $_POST['y'];

if(!empty($_POST)) {
    $q = "SELECT * FROM tiles WHERE xpos = ".($x - 1)." AND ypos = $y LIMIT 1";
    $lefttile = mysql_fetch_assoc(mysql_query($q));

    $q = "SELECT * FROM tiles WHERE xpos = ".($x + 1)." AND ypos = $y LIMIT 1";
    $righttile = mysql_fetch_assoc(mysql_query($q));

    $q = "SELECT * FROM tiles WHERE xpos = $x AND ypos = ".($y - 1)." LIMIT 1";
    $toptile = mysql_fetch_assoc(mysql_query($q));

    $q = "SELECT * FROM tiles WHERE xpos = $x AND ypos = ".($y + 1)." LIMIT 1";
    $bottomtile = mysql_fetch_assoc(mysql_query($q));

    $json = array(
        "left" => $lefttile['bound'], "right" => $righttile['bound'],
        "top" => $toptile['bound'], "bottom" => $bottomtile['bound']
    );

    $output = json_encode($json);
    echo $output;
}
else
    echo "No value";
?> 
```

奇怪的是，即使 php 中的值未定义，它仍然会在数组中输出正确的数据，这由控制台日志确认。但是，要访问数组中的这些值，我必须使用对函数边界（）的固定调用，而注释掉的代码不起作用。如果您有任何想法或问题，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:13:25.250

我一试..你有JSON响应..所以你可以使用它。

！！需要在循环之前添加一项检查，以查看响应者是否成功，这是我的想法..

```
 $.ajax({
    url: 'php/tilecheck.php', 
    data: position, 
    type: 'POST',
    dataType: 'json',
    success: function(data) {

            $.each(data, function(key,value){
                if(value == 1){
                    $("#a" + key).css('display', 'none');
                }
                else {
                    $("#a" + key).css('display', '');
                }
            });
    }   
    }); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T14:37:31.733

检查你从 PHP 中的 jQuery 得到什么：

```
print_r($_POST); 
```

并检查“x”和“y”的正确命名

# node.js - 使用 socket.io 的客户端库

> ID：13051381
> 
> 赞同：1
> 
> 时间：2012-10-24T14:32:15.460
> 
> 标签：node.js, socket.io

我是 node.js 的新手，所以我的问题可能完全是白痴，但我们开始吧：

我已经阅读了很多关于如何使用socket.io的文章，并且构建服务器非常简单，但是当涉及到客户端时，它总是以：

```
<script src="/socket.io/socket.io.js"></script> 
```

而且我不知道这个文件来自哪里。

有人可以解释一下我缺少什么吗？

索引.html：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
    </head>
    <body>
        <h1>WE DO Chat</h1>

        <script src="http://localhost:1180/nodetest/socket.io/socket.io.js"></script>
    </body>
</html> 
```

主.js：

```
var io = require('socket.io').listen(1180);

io.sockets.on('message', function (message, callback) {
    socket.broadcast.emit(message);
});

io.sockets.on('connect', function (socket) {
    console.log("Client connected");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:38:46.977

socket.io 客户端是 socket.io 库的一部分（可在 socket.io 和 github 上获得）。客户端库用于生成与 socket.io 的服务器端实现的连接

socket.io.js 由 Node.js 服务器提供服务。

```
<script src="http://nodejs.address:port/socket.io/socket.io.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:38:59.590

在使用服务器端 (node.js npm) socket.io 库时，此 js 资源会自动匹配并交付给给定的资源路径。只需使用 curl 调用它，尝试您的集成是否正常工作，例如：

```
curl http://localhost:3000/socket.io/socket.io.js 
```

# ipad - iPad 中未显示 Wordpress Foundations 子菜单

> ID：13051386
> 
> 赞同：0
> 
> 时间：2012-10-24T14:32:42.853
> 
> 标签：ipad, wordpress, mobile, responsive-design, zurb-foundation

我还是移动/流畅/响应式游戏的新手，并且在此站点上的子菜单上有问题：[http ://www.medowsconstruction.com/](http://www.medowsconstruction.com/)

移动设备上的点击应该自动替换 :hover 功能，对吗？似乎是标准基金会主题的情况。

我没有更改框架的那些移动特定区域中的任何内容，那么我做了什么来搞砸它并导致子菜单无法在 iPad / touch 上显示？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:23:02.250

似乎问题在于这不是一个标准的纯 CSS 下拉菜单，正如人们所假设的那样。相反，它由 jQuery 控制。您可以在 app.js 文件中看到它：

```
$('.nav-bar>li.has-flyout').hover(function() {
      $(this).children('.flyout').show();
    }, function() {
      $(this).children('.flyout').hide();
    }); 
```

[因此，您应该修改脚本以便对选定的设备进行触摸操作（此处](https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript)对此主题进行了很好的讨论）。这里我使用一个简单的语句。我无法在 iPad 上对其进行测试，但如果您尝试使用类似**(untested!)**之类的东西，您可能会得到很好的结果：

```
if (navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
$('.nav-bar>li.has-flyout').bind('touch', function() {
      $(this).children('.flyout').slideToggle();
    });
} else {

$('.nav-bar>li.has-flyout').hover(function() {
          $(this).children('.flyout').show();
        }, function() {
          $(this).children('.flyout').hide();
        });
} 
```

这应该会给你一些关于如何处理的线索。让我们知道它是否有效。

[在这个stackoverflow 讨论](https://stackoverflow.com/questions/3038898/ipad-iphone-hover-problem-causes-the-user-to-double-click-a-link)中也有很多关于悬停和触摸设备的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:45:13.083

感谢@hernan 让我在事情上朝着正确的方向前进。

我最终通过将 Foundation 代码与他的代码与一些更好的选择器混合来修复它。这是我登陆的：

```
if (navigator.userAgent.match(Modernizr.touch || navigator.userAgent.match(/Windows Phone/i))) {
    $('.nav-bar>li.has-flyout').on('click.fndtn touchstart.fndtn', function(e) {
        e.preventDefault();
        var flyout = $(this).children('.flyout').first();
        if (lockNavBar === false) {
            $('.nav-bar .flyout').not(flyout).slideUp(500);
                flyout.slideToggle(500, function(){
                lockNavBar = false;
            });
        }
        else
        {
            flyout.slideToggle(500);
        }
    }); 
```

我肯定会检查你提到的那两个链接/讨论，hernan。

再次感谢-

# ios - 我什么时候应该使用原子 ios？

> ID：13051388
> 
> 赞同：0
> 
> 时间：2012-10-24T14:32:45.170
> 
> 标签：ios

大多数属性都被声明为非原子的，例如

```
@property (nonatomic,strong) NSNumber *num; 
```

如果我使用块队列来实现并发程序，我应该将什么属性声明为原子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:38:10.690

如果您的程序按照编写的方式可以从多个线程设置和获取此对象，则您应该在此属性上使用 atomic 说明符。如果您想在设置期间锁定此对象，请使用此说明符。

# mysql - 如何从 Magento（sql 查询）中提取所有可配置的产品（名称、sku、品牌、等级价格）？

> ID：13051391
> 
> 赞同：0
> 
> 时间：2012-10-24T14:32:51.890
> 
> 标签：mysql, magento, mage

我只需要从 magento 中提取可配置产品。我需要一个查询来执行它或模型以使用可配置产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:14:05.923

后台的菜单`System / Import-Export`就是为此目的而设计的。

特别是`Dataflow - Profiles`您有一个“导出所有产品”配置文件可自定义/可过滤的条目。

您可以使用 CSV/XML/生成的任何内容来生成 PDF（您的电话）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:00:58.440

尝试

```
 $_productCollection = $this ->getLoadedProductCollection()
                        ->addAttributeToFilter('type_id','configurable');

 //print_r($_productCollection);

 foreach($_productCollection as $product){
     echo $product->getSku();
     .....

 } 
```

然后将此信息传递到您的函数中以创建像这样的pdf[如何在magento中创建pdf？](https://stackoverflow.com/questions/10914108/how-to-create-a-pdf-in-magento)

查看更多@ [Magento - 仅加载可配置产品](https://stackoverflow.com/questions/5280392/magento-load-only-configurable-products)

# sql-server-2008 - 检查 2 列的约束

> ID：13051392
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:32:54.233
> 
> 标签：sql-server-2008

任何人都可以帮我在表上编写触发器吗？场景是这样的，我有一个名为 person 的表，列 col1 和 col2 ，

```
Person
col1 |  col2
0    |  1
1    |  0
2    |  3
3    |  1
4    |  2
5    |  3 
```

这些列 col1,col2 值依赖于另一个表员工列 col3 col4

```
Employee
col3 | col4
0    | 1
1    | 0
2    | 1
3    | 3
4    | 0
5    | 3
6    | 1 
```

现在，如果 col1 和 col2 值的组合（例如，员工表中存在人员表中的 0,1，则不要更新人员表中的 col1 和 col2 列，如果 col1 和 col2 值为 2,3，则员工表中不存在值，所以在这种情况下，如果列 col1 和 col2 有任何更新，只需打印一条消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:43:50.840

这个有味道。根据您的问题，您似乎正在尝试创建一个触发器来维护表之间的关系。如果是这种情况，您可能应该考虑创建复合外键而不是使用触发器。这篇文章有一个创建复合键的好例子：[在 SQL Server 2008 中创建复合外键](https://stackoverflow.com/questions/6651667/creating-a-composite-foreign-key-in-sql-server-2008)。

根据我的经验，Person/Employee 表通常具有 1:0..1 的关系。在这种情况下，您的 Person 表将有一个主键；在您的情况下，密钥将是复合的。员工表将有它自己的主键以及引用 Person 表的复合外键。

# wcf - WCF 服务可以显示帮助页面或其他内容吗？

> ID：13051393
> 
> 赞同：1
> 
> 时间：2012-10-24T14:32:54.887
> 
> 标签：wcf

如果您在浏览器中输入服务端点，您将获得一个 Microsoft 生成的页面，其中包含指向 wsdl 的链接以及一些用于创建服务客户端实例的示例 C# 和 VB 代码。如果您在浏览器中输入 wsdl 链接，您将获得 wsdl。当然，这一切都假设没有奇怪的安全限制。

有没有办法让服务返回您自己设计的页面？如果我想有一个很好的帮助屏幕来描述可用的服务方法，或者描述可能的错误消息。替换 MS 生成的默认页面，或者可以像 wsdl 一样查看但带有 ?help 查询参数的东西。

我在这里寻找非常简单的对现有服务的最小更改。如果可能的话，可以由内容创建者或技术作者而不是服务开发人员来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:47:58.830

我不确定您是否可以覆盖默认帮助页面，但您绝对可以提供帮助页面。[WCF 自定义帮助页面](http://code.msdn.microsoft.com/windowsdesktop/WCF-Custom-Help-Page-6f5a90f0)上的这篇文章解释了如何。

# java - 如何使用同样类型的类型参数创建 java.lang.Class？

> ID：13051394
> 
> 赞同：4
> 
> 时间：2012-10-24T14:33:00.270
> 
> 标签：java, generics

拿什么代替？？？在下面的代码中，它会起作用吗？

```
import java.util.List;

public class Generic {

    private static class Foo<T> {
        Foo(Class<T> clazz) {
            assert clazz != null;
        }
    }

    public static void main(String[] args) {
        Class<List<String>> x = ???;
        Foo<List<String>> t = new Foo<List<String>>(x);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T14:45:06.470

我会去：

```
@SuppressWarnings("unchecked")
Class<List<String>> klass = (Class<List<String>>)((Class<?>) List.class); 
```

对于这种类型的演员，您不需要类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:36:15.863

在运行时，所有`List`“类”都是相等的，因为泛型类型已被擦除

```
Class<List<String>> x = (Class<List<String>>) (Class) List.class; 
```

# visual-studio-2010 - 如何从 Visual Studio 解决方案中获取所有接口类型？

> ID：13051397
> 
> 赞同：3
> 
> 时间：2012-10-24T14:33:13.577
> 
> 标签：visual-studio-2010, visual-studio-2012, visual-studio-extensions, vsx, vspackage

我正在尝试编写 Visual Studio 的扩展。

我需要获取在当前打开的**解决方案**中的所有项目中找到的所有接口类型的列表。
到目前为止，我已经尝试使用 EnvDev 命名空间来执行此操作。

有没有办法在不解析项目的 .cs 文件的情况下做到这一点？

谢谢，

柴。

# scala - Scala 类型检查器如何知道防止在已经平坦的 List 上调用 flatten

> ID：13051398
> 
> 赞同：7
> 
> 时间：2012-10-24T14:33:12.750
> 
> 标签：scala

我是 Scala 的新手，我对类型系统有疑问。

flatten 方法适用于嵌套集合，因此如果我有一个 List 列表，它将把它展平为一个 List。但是在已经平坦的集合上调用 flatten 是没有意义的。果然，Scala 类型检查器会将其标记为错误。

```
List(List(1,2,3),List(4,5,6)).flatten // produces List(1,2,3,4,5,6)
List(1,2,3,4).flatten  // type error 
```

我知道这在某种程度上依赖于隐式参数来展平。但是我不知道隐式值来自哪里以及它是如何用来断言调用 flatten 的对象的类型的。另外，为什么 List.flatten 的 scaladocs 中没有显示隐式参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:38:19.433

要了解它是如何工作的，我们需要看一下 flatten 的类型签名：

```
def flatten[B](implicit asTraversable: (A) ⇒ GenTraversableOnce[B]): List[B] 
```

`A`是列表的元素类型，`B`是每个元素的元素类型。为了让 flatten 工作，必须有一个从元素类型到 a 的隐式转换`GenTraversableOnce[B]`。这仅适用于集合或您实现自己的隐式转换的情况。例如，您可以为对定义一个：

```
implicit def pairToList[A](p:(A,A)) = List(p._1, p._2)

List(1->2,2->3).flatten //compiles! List(1,2,2,3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:40:18.093

诀窍是隐式见证，确保列表中的元素是可遍历的。这是`flatten`取自[GenericTraversableTemplate](http://www.scala-lang.org/api/current/scala/collection/generic/GenericTraversableTemplate.html)的（稍微简化的）签名：

```
def flatten[B](implicit asTraversable: A => TraversableOnce[B])
              : GenTraversable[B] = 
```

在您的情况下，无法找到 type 元素的见证，因此编译器拒绝`Int`调用 of 。`flatten`

如果您想让您的示例编译，您可以使用以下隐式定义：

```
implicit def singleToList[A](a: A) = List(a) 
```

（作为旁注：我认为这种隐式非常危险，因为它的适用性非常普遍，这可能会导致令人不快的意外，因为编译器可能会在您不知道的情况下在各个地方注入调用。）

# ruby-on-rails-3 - 文章出现次数过多

> ID：13051400
> 
> 赞同：2
> 
> 时间：2012-10-24T14:33:17.883
> 
> 标签：ruby-on-rails-3

几天前我开始使用 Ruby on Rails，但我遇到了`each do`循环问题。

这是我的 AccueilController 的代码：

```
def index

@postsTest = Post.last(1)
@articles = Article.last(1)
@articlesList = Article.last(2)

    respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @users }
end 
```

这是我的`application.html.erb`代码：

```
<div id="container">
    <div id="col1">
        <%= render :partial => 'shared/listArticles', :collection => @articlesList %>
        <div class="clear"></div>
    </div>
    <div id="col2">
        <%= yield %>
    </div>
    </div>
</div> 
```

现在我共享/listArticles 的代码：

```
<% @articlesList.each do |article| %>
        <div id="blocArticle">
            <div id="pic">
                <%= image_tag (article.photo.url(:thumb)) %>
            </div>
            <div id="contentArticle">
                <div id="titleArticle">
                    <%= link_to article.title, article %>
                    <div class="clear"></div>
                </div>
                <div id="contentArticleDesc">

                        <%= link_to article.desc, article %>

                    <div class="clear"></div>
                </div>

                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
    <% end %> 
```

而我的问题是，如果我写，`@articlesList = Article.last(2)`那么最后两篇文章会出现两次；如果我写`@articlesList = Article.last(3)`，那么最后三篇文章将出现三次，等等......

当然，我希望他们每个人都只出现一次。

有人对问题的根源有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:36:29.143

您正在使用 a 渲染部分`collection`，因此 Rails 为集合中的每个项目调用部分。从局部视图中删除循环或删除`collection`参数，不要两者都做！

# mysql - 加入三个表期望结果但结果错误

> ID：13051401
> 
> 赞同：2
> 
> 时间：2012-10-24T14:33:22.853
> 
> 标签：mysql, sql

这是我的桌子：

```
user table:
id..|..fname
1...|..dan
2...|..den

trans table:
.transid.|..userid....|..adid.....|..click
.....1...|....1.......|.....1.....|.....1
.....2...|....2.......|.....1.....|.....1

ads table:
id..|..adname
1...|..sample 
```

我的选择子句是：

```
select u.fname, 
       t.click 
from user u 
   inner join ads a on u.id=a.id 
   inner join trans t on a.id=t.transid 
order by u.fname; 
```

我期待的结果

```
fname....|..click
dan......|...1...
den......|...1... 
```

但结果是错误的，它只显示第一行。这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:38:50.730

这可以通过仅连接两个表来实现：`trans`和`user`.

```
SELECT  b.fname, a.click
FROM    trans a
        INNER JOIN user b
            ON a.userid = b.id 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/6cf6b/1)

否则，如果您想访问表`ads`以及通过使用加入它`INNER JOIN`

```
SELECT  b.fname, a.click, c.adname
FROM    trans a
        INNER JOIN user b
            ON a.userid = b.id
        LEFT JOIN ads c
            ON a.adid = c.id 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/6cf6b/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:39:31.757

我认为您想要以下内容：

```
select u.fname, t.click
from user u
left join trans t 
  on u.id=t.transid
left join ads a
  on t.adid = a.id
order by u.fname; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c6bc2/11)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:41:01.753

您想首先加入`trans`表格，因为它与以下内容有相互关系`user`：

```
SELECT u.fname, t.click
FROM   trans t
       INNER JOIN user u
               ON u.id = t.userid
ORDER  BY u.fname; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T14:45:07.207

您只是以错误的顺序加入表格，等等错误的字段。

您的查询...

```
select u.fname, t.click
from user u
inner join ads a on u.id=a.id
inner join trans t on a.id=t.transid
order by u.fname; 
```

你加入`users`到的`ads`地方`ad`和`user`拥有相同的地方`id`。

然后你将它加入到共享相同的`trans`表中。`ad``id``trans`

这些都没有意义。

您应该将 加入`user`到`trans`具有`userid`字段的表中。

而且您还应该将 加入`ads`到`trans`具有`adid`字段的表中。

```
SELECT
  u.fname,
  a.click
FROM
  user
INNER JOIN
  trans
    ON trans.userid = user.id
INNER JOIN
  ads
    ON ads.id = trans.adid 
```

# c# - 以编程方式更新 ADO.Net 实体数据模型

> ID：13051403
> 
> 赞同：1
> 
> 时间：2012-10-24T14:33:33.633
> 
> 标签：c#, ado.net, entity, datamodel

我们希望以编程方式更新 ADO.Net 实体数据模型，以便 EDM 获得最新版本的数据库（新表、新值等）。我想对所有东西进行完整的更新。

我知道可以通过单击模型设计器中的从数据库更新模型来更新 EDM。

你知道有什么解决办法吗？

先感谢您。

# fossil - 化石 v1.24 在 linux 上失败，“没有这样的文件”

> ID：13051406
> 
> 赞同：1
> 
> 时间：2012-10-24T14:33:40.217
> 
> 标签：fossil

如果我将化石 v1.23 下载到我的 linux 服务器，一切都会好起来的。

```
root@x:/home/james/test# unzip fossil-linux-x86-20120808112557.zip
Archive:  fossil-linux-x86-20120808112557 (1).zip
  inflating: fossil
root@x:/home/james/test# mv fossil fossil_1_23
root@x:/home/james/test# chmod 777 fossil_1_23
root@x:/home/james/test# ./fossil_1_23 help
Usage: ./fossil_1_23 help COMMAND
Common COMMANDs:  (use "./fossil_1_23 help --all" for a complete list)
add         clean       gdiff       mv          rm          timeline
addremove   clone       help        open        settings    ui
all         commit      import      pull        sqlite3     undo
annotate    diff        info        push        stash       update
bisect      export      init        rebuild     status      version
branch      extras      ls          remote-url  sync
changes     finfo       merge       revert      tag
This is fossil version 1.23 [957b17af58] 2012-08-08 11:25:57 UTC 
```

但是 1.24 失败，即使 ls 命令显示该文件存在，“没有这样的文件”，如下所示：

```
root@x:/home/james/test# unzip fossil-linux-x86-20121022124804.zip
Archive:  fossil-linux-x86-20121022124804.zip
  inflating: fossil
oot@x:/home/james/test# mv fossil fossil_1_24
root@x:/home/james/test# chmod 777 fossil_1_24
root@x:/home/james/test# ls -l
total 3620
-rw-r--r-- 1 root root  528859 Oct 24 10:04 fossil-linux-x86-20120808112557.zip
-rw-r--r-- 1 root root  670298 Oct 24 10:04 fossil-linux-x86-20121022124804.zip
-rwxrwxrwx 1 root root 1061584 Aug 11 10:30 fossil_1_23
-rwxrwxrwx 1 root root 1418656 Oct 22 09:16 fossil_1_24
root@x:/home/james/test# ./fossil_1_24 help
-bash: ./fossil_1_24: No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:10:25.123

Richard Hipp 重建了 1.24 linux 二进制文件。新版本运行良好。

# android - 尝试使用 AsyncTask 打开从 URL 下载的文件时的 ENOENT（没有此类文件或目录）

> ID：13051407
> 
> 赞同：1
> 
> 时间：2012-10-24T14:33:45.817
> 
> 标签：android, asynchronous, download, android-sdcard

我使用 AsyncTask 从 URL 下载文件。该文件已保存，我可以在我的 SD 卡上看到它。在我的应用程序中，我想在下载后打开此文件，但出现以下错误：

```
java.io.FileNotFoundException: /mnt/sdcard/XML/zurt.xml: open failed: ENOENT (No such file or directory) 
```

我必须在下载和打开文件之间等待指定的时间吗？问题是什么？

我有这两个权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
</uses-permission>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" >
</uses-permission> 
```

我的异步任务：

```
/**
     * Download XML from URL async
     */
    // usually, subclasses of AsyncTask are declared inside the activity class.
    // that way, you can easily modify the UI thread from here
    private class DownloadFile extends AsyncTask<String, Integer, String> {
     @Override
     protected String doInBackground(String... sUrl) {
         try {
             URL url = new URL(sUrl[0]);
             URLConnection connection = url.openConnection();
             connection.connect();
             // this will be useful so that you can show a typical 0-100% progress bar
             int fileLength = connection.getContentLength();

             // create a File object for the parent directory
             File xmlDirectory = new File(Environment.getExternalStorageDirectory()+ FileSeperator+"XML"
                     +FileSeperator);
             // have the object build the directory structure, if needed.
             xmlDirectory.mkdirs();

             // create a File object for the output file
             File outputFile = new File(xmlDirectory, Name+FileExtension);
             // download the file
             InputStream input = new BufferedInputStream(url.openStream());
             OutputStream output = new FileOutputStream(outputFile);

             byte data[] = new byte[1024];
             long total = 0;
             int count;
             while ((count = input.read(data)) != -1) {
                 total += count;
                 // publishing the progress....
                 publishProgress((int) (total * 100 / fileLength));
                 output.write(data, 0, count);
             }

             output.flush();
             output.close();
             input.close();
         } catch (Exception e) {
             System.out.println(e);
         }
         return null;
     }
     @Override
     protected void onPreExecute() {
         super.onPreExecute();
         mProgressDialog.show();
     }

    protected void onPostExecute() {
         mProgressDialog.dismiss();
     }

     @Override
     protected void onProgressUpdate(Integer... progress) {
         super.onProgressUpdate(progress);
         mProgressDialog.setProgress(progress[0]);
     }
 } 
```

此代码尝试打开保存的文件：

```
/**
 * XML Parser
 * */
private ArrayList<Datapoint> parseXML() {

try {           
    Log.w("AndroidParseXMLActivity", "Start");
    /** Handling XML */
    SAXParserFactory spf = SAXParserFactory.newInstance();
    SAXParser sp = spf.newSAXParser();
    XMLReader xr = sp.getXMLReader();

    File file = new File(Environment.getExternalStorageDirectory()+ FileSeperator+"XML"
    +FileSeperator+ Name + FileExtension);

    XMLContentHandler myXMLHandler = new XMLContentHandler();
    xr.setContentHandler(myXMLHandler);

        xr.parse(new InputSource(new InputStreamReader(new FileInputStream(file)))); 

    itemsList = myXMLHandler.getItemsList();

    Log.w("AndroidParseXMLActivity", "Done");
}
catch (Exception e) {
    Log.w("AndroidParseXMLActivity",e );
}
return itemsList ; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:40:43.630

我更改了以下行并且它有效：

```
protected void onPostExecute() {
         parseXML();
         mProgressDialog.dismiss();
     } 
```

# oracle - 将 select 语句传递给 Oracle PLSQL

> ID：13051409
> 
> 赞同：5
> 
> 时间：2012-10-24T14:34:04.990
> 
> 标签：oracle, plsql

我有一个接受数组的 PLSQL oracle 函数：

```
CREATE OR REPLACE FUNCTION CM.give_me_an_arrays (p_array IN num_array)   
RETURN VARCHAR2
IS 
 x   VARCHAR2 (512);
BEGIN
 x := '';
   FOR i IN 1 .. p_array.COUNT
   LOOP
      DBMS_OUTPUT.put_line (p_array (i));
   END LOOP;

  RETURN x;
END;
/ 
```

我想这样做：

```
select CM.give_me_an_arrays(select COM.COM_ID 
                              from CM.XLP_SE_COMPONENT com  
                             where rownum < 10) 
  from dual 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:24:51.773

只要数组是 sql 对象，您就可以这样做（在 11gR2 上测试，应该在 10g 上工作）：

```
SQL> create or replace type num_array is table of number;
  2  /

Type created.

SQL> CREATE OR REPLACE FUNCTION give_me_an_arrays (p_array IN num_array)
  2  RETURN VARCHAR2
  3  IS
  4   x   VARCHAR2 (512);
  5  BEGIN
  6   x := '';
  7     FOR i IN 1 .. p_array.COUNT
  8     LOOP
  9        DBMS_OUTPUT.put_line (p_array (i));
 10     END LOOP;
 11
 12    RETURN x;
 13  END;
 14  /

Function created. 
```

您可以使用[COLLECT](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions031.htm#i1271564)聚合函数调用此函数：

```
SQL> SELECT give_me_an_arrays((SELECT cast(collect(rownum) AS num_array) value
  2                              FROM dual
  3                            CONNECT BY level <= 10)) arr
  4    FROM dual;

ARR
--------------------------------------------------------------------------------

1
2
[..]
10 
```

在 9i（甚至可能是 8i，现在无法测试）中，COLLECT 不存在，但您可以使用[MULTISET](http://docs.oracle.com/cd/E11882_01/server.112/e26088/operators006.htm#i1035617)代替：

```
SQL> SELECT give_me_an_arrays(cast(MULTISET(SELECT rownum value
  2                                           FROM dual
  3                                         CONNECT BY level <= 10) AS num_array)
  4                          ) arr
  5    FROM dual;

ARR
--------------------------------------------------------------------------------

1
2
[..]
10 
```

# selenium - 无法在 Windows 7 上通过 TeamCity BuildAgent 执行 IEDriver 或 ChromeDriver

> ID：13051410
> 
> 赞同：1
> 
> 时间：2012-10-24T14:34:05.677
> 
> 标签：selenium, teamcity, selenium-webdriver, cucumber-jvm

我的团队正在考虑使用 Selenium 2 进行 UI 测试。我们的 UI 开发由外部供应商完成（另一个主题），使用 RemoteDriver（服务器/客户端）需要更多的维护而不是我们的生产力。

我的测试项目是一个简单的 maven 项目，我尝试启动一个新的 IE(v8 - 64bit)/Firefox/和 Chrome 浏览器，看看它是否会成功导航到某个任意 url。它在我的机器上本地运行，在 TeamCity build-agent 用户配置文件上远程运行（转到源项目并运行 mvn test）。但是，当我尝试通过 TeamCity 控制台（Web 或通过 IntelliJ 上的远程运行）执行测试时，出现以下错误：

**IE 驱动程序错误**

```
[17:19:57][it:test] Started InternetExplorerDriver server (32-bit)
[17:19:57][it:test] 2.25.3.0
[17:19:57][it:test] Listening on port 34154
[17:20:00][it:test] Oct 23, 2012 5:20:00 PM   org.apache.http.impl.client.DefaultRequestDirector tryExecute
[17:20:00][it:test] INFO: I/O exception (org.apache.http.NoHttpResponseException) caught when processing request: The target server failed to respond
[17:20:00][it:test] Oct 23, 2012 5:20:00 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
[17:20:00][it:test] INFO: Retrying request
[17:20:01][it:test] [1A [32mWhen [0m [32mI launch " [0m [32m [1mie [0m [32m" on   TeamCity [0m [90m# Browser_Steps.I_launch_browser_on_TeamCity(String) [0m
[17:20:01][it:test] [90mThen [0m [90mI should see that the browser was launched [0m [90m# Browser_Steps.I_should_see_that_the_browser_was_launched() [0m
[17:20:02][it:test] [1A [31mThen [0m [31mI should see that the browser was launched [0m [90m# Browser_Steps.I_should_see_that_the_browser_was_launched() [0m
[17:20:02][it:test] [31morg.openqa.selenium.UnhandledAlertException: Modal dialog present
[17:20:02][it:test] Build info: version: 'unknown', revision: 'unknown', time: 'unknown'
[17:20:02][it:test] System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_33'
[17:20:02][it:test] Driver info: driver.version: RemoteWebDriver
[17:20:02][it:test] Session ID: 2244723f-8097-4a0d-9e9b-45d13f68c5ae
[17:20:02][it:test] at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
[17:20:02][it:test] at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
[17:20:02][it:test] at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
[17:20:02][it:test] at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
[17:20:02][it:test] at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
[17:20:02][it:test] at org.openqa.selenium.remote.ErrorHandler.createUnhandledAlertException(ErrorHandler.java:169)
[17:20:02][it:test] at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:141)
[17:20:02][it:test] at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:458)
[17:20:02][it:test] at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:462)
[17:20:02][it:test] at org.openqa.selenium.remote.RemoteWebDriver.getTitle(RemoteWebDriver.java:204)
[17:20:02][it:test] at Browser_Steps.I_should_see_that_the_browser_was_launched(Browser_Steps.java:102)
[17:20:02][it:test] at ?.Then I should see that the browser was launched(Browsers.feature:7) 
```

**Chrome 驱动程序错误**

```
[17:20:19][it:test] Started ChromeDriver
[17:20:19][it:test] port=1099
[17:20:19][it:test] version=23.0.1240.0
[17:20:19][it:test] log=C:\BuildAgent1\work\6df7fefd08b17c16\chromedriver.log
[17:29:26][it:test] The build myDB::selenium_ci #23 {builId=34261} has been running for more than 10 minutes. Terminating...
[17:29:26][it:test] [Execution timeout] {build.status.text}
[17:29:29][it:test] Dumping threads before termination:
[17:29:29][it:test] PID: 7088, PPID: 6128, Command line: \\usrduws708221\SHARED_TOOLS\java\jdk1.6.0_33\bin\java.exe -Dagent.home.dir=C:\BuildAgent1 -Dagent.name=USRDUWS345623-MyDB1 -Dagent.ownPort=9091 -Dagent.work.dir=C:\BuildAgent1\work -Dbuild.number=23 -Dbuild.vcs.number=76 -Dbuild.vcs.number.1=76 -Dbuild.vcs.number.selenium_ci=76 -Dclassworlds.conf=C:\BuildAgent1\temp\buildTmp\teamcity.m2.conf -Dcom.jetbrains.maven.watcher.report.file=C:\BuildAgent1\temp\buildTmp\maven-build-info.xml -Dfile.encoding=Cp1252 -Dfile.separator=\ -Djava.io.tmpdir=C:\BuildAgent1\temp\buildTmp -Dmaven.home=\\usrduws708221\SHARED_TOOLS\maven\apache-maven-3.0.4 -Dos.arch=x86 "-Dos.name=Windows 7" -Dos.version=6.1 -Dpath.separator=; -Dteamcity.agent.cpuBenchmark=325 -Dteamcity.agent.dotnet.agent_url=http://localhost:9091/RPC2 -Dteamcity.agent.dotnet.build_id=34261 -Dteamcity.auth.password=sYOEwtcTr6zExWPuECfytw8Nbfb4c1cd -Dteamcity.auth.userId=TeamCityBuildId=34261 -Dteamcity.build.changedFiles.file=C:\BuildAgent1\temp\buildTmp\changedFiles7023604667624871531.txt -Dteamcity.build.checkoutDir=C:\BuildAgent1\work\6df7fefd08b17c16 -Dteamcity.build.id=34261 -Dteamcity.build.properties.file=C:\BuildAgent1\temp\buildTmp\teamcity.build686343423326544568.properties -Dteamcity.build.tempDir=C:\BuildAgent1\temp\buildTmp -Dteamcity.build.workingDir=C:\BuildAgent1\work\6df7fefd08b17c16 -Dteamcity.buildConfName=selenium_ci -Dteamcity.buildType.id=bt300 -Dteamcity.configuration.properties.file=C:\BuildAgent1\temp\buildTmp\teamcity.config4225430352183826801.properties -Dteamcity.dotnet.nunitaddin=C:\BuildAgent1\plugins\dotnetPlugin\bin\JetBrains.TeamCity.NUnitAddin-NUnit -Dteamcity.dotnet.nunitlauncher=C:\BuildAgent1\plugins\dotnetPlugin\bin\JetBrains.BuildServer.NUnitLauncher.exe -Dteamcity.dotnet.nunitlauncher.msbuild.task=C:\BuildAgent1\plugins\dotnetPlugin\bin\JetBrains.BuildServer.MSBuildLoggers.dll -Dteamcity.dotnet.nunitlauncher1.1=C:\BuildAgent1\plugins\dotnetPlugin\bin\JetBrains.BuildServer.NUnitLauncher1.1.exe -Dteamcity.dotnet.nunitlauncher2.0=C:\BuildAgent1\plugins\dotnetPlugin\bin\JetBrains.BuildServer.NUnitLauncher2.0.exe -Dteamcity.dotnet.nunitlauncher2.0.vsts=C:\BuildAgent1\plugins\dotnetPlugin\bin\JetBrains.BuildServer.NUnitLauncher2.0.VSTS.exe -Dteamcity.dotnet.platform=C:\BuildAgent1\plugins\dotnetPlugin\bin\JetBrains.TeamCity.PlatformProcessRunner.1.1.exe -Dteamcity.maven.watcher.home=C:\BuildAgent1\plugins\mavenPlugin\maven-watcher -Dteamcity.projectName=myDB -Dteamcity.runner.properties.file=C:\BuildAgent1\temp\buildTmp\teamcity.runner1044140889240461617.properties -Dteamcity.tests.recentlyFailedTests.file=C:\BuildAgent1\temp\buildTmp\testsToRunFirst8927992996360649639.txt "-Dteamcity.version=7.0.1 (build 21326)" -Duser.country=US -Duser.home=C:\ -Duser.language=en -Duser.name=SYSTEM -Duser.timezone=America/New_York -Duser.variant= -classpath \\usrduws708221\SHARED_TOOLS\maven\apache-maven-3.0.4\boot\plexus-classworlds-2.4.jar; org.codehaus.plexus.classworlds.launcher.Launcher -f C:\BuildAgent1\work\6df7fefd08b17c16\pom.xml -B -Dmaven.repo.local=//Usrduws708221/shared_tools/maven/repository test -s C:\BuildAgent1\temp\buildTmp\maven_settings_1267417561803171768.xml
[17:29:29][it:test] 2012-10-23 17:29:29 Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.8-b03 mixed mode): "Thread-2" prio=6 tid=0x0000000006fc4800 nid=0x18ac runnable [0x000000000b7af000] java.lang.Thread.State: RUNNABLE at java.io.FileInputStream.readBytes(Native Method) at java.io.FileInputStream.read(FileInputStream.java:220) at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264) at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306) at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158) - locked <0x00000007aba50a78> (a java.io.InputStreamReader) at java.io.InputStreamReader.read(InputStreamReader.java:167) at java.io.BufferedReader.fill(BufferedReader.java:136) at java.io.BufferedReader.readLine(BufferedReader.java:299) - locked <0x00000007aba50a78> (a java.io.InputStreamReader) at java.io.BufferedReader.readLine(BufferedReader.java:362) at org.codehaus.plexus.util.cli.StreamPumper.run(StreamPumper.java:129) "Thread-1" prio=6 tid=0x0000000006fc4000 nid=0x3f0 runnable [0x000000000b5df000] java.lang.Thread.State: RUNNABLE at java.io.FileInputStream.readBytes(Native Method) at java.io.FileInputStream.read(FileInputStream.java:220) at java.io.BufferedInputStream.read1(BufferedInputStream.java:256) at java.io.BufferedInputStream.read(BufferedInputStream.java:317) - locked <0x00000007aba44fb0> (a java.io.BufferedInputStream) at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264) at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306) at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158) - locked <0x00000007aba4dd20> (a java.io.InputStreamReader) at java.io.InputStreamReader.read(InputStreamReader.java:167) at java.io.BufferedReader.fill(BufferedReader.java:136) at java.io.BufferedReader.readLine(BufferedReader.java:299) - locked <0x00000007aba4dd20> (a java.io.InputStreamReader) at java.io.BufferedReader.readLine(BufferedReader.java:362) at org.codehaus.plexus.util.cli.StreamPumper.run(StreamPumper.java:129) "ThreadedStreamConsumer" prio=6 tid=0x0000000006fc3000 nid=0x1ecc waiting on condition [0x000000000b47f000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for <0x00000007aba1cba0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156) at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987) at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399) at org.apache.maven.surefire.util.internal.Java15BlockingQueue.take(Java15BlockingQueue.java:40) at org.apache.maven.plugin.surefire.booterclient.output.ThreadedStreamConsumer$Pumper.run(ThreadedStreamConsumer.java:68) at java.lang.Thread.run(Thread.java:662) "resolver-4" daemon prio=6 tid=0x0000000006fc2800 nid=0x1b68 waiting on condition [0x000000000b27f000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for <0x00000007af7b9ae8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156) at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987) at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399) at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) at java.lang.Thread.run(Thread.java:662) "resolver-3" daemon prio=6 tid=0x0000000006fc1800 nid=0x1f7c waiting on condition [0x000000000b17f000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for <0x00000007af7b9ae8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156) at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987) at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399) at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) at java.lang.Thread.run(Thread.java:662) "resolver-2" daemon prio=6 tid=0x0000000009dbf000 nid=0x1cec waiting on condition [0x000000000900f000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for <0x00000007af7b9ae8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156) at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987) at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399) at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) at java.lang.Thread.run(Thread.java:662) "resolver-1" daemon prio=6 tid=0x000000000a04c800 nid=0x1878 waiting on condition [0x0000000008e7f000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for <0x00000007af7b9ae8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156) at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987) at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399) at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) at java.lang.Thread.run(Thread.java:662) "Low Memory Detector" daemon prio=6 tid=0x0000000006eb3800 nid=0x19d4 runnable [0x0000000000000000] java.lang.Thread.State: RUNNABLE "C2 CompilerThread1" daemon prio=10 tid=0x0000000006ea2800 nid=0x1a58 waiting on condition [0x0000000000000000] java.lang.Thread.State: RUNNABLE "C2 CompilerThread0" daemon prio=10 tid=0x0000000006e9b000 nid=0x1e1c waiting on condition [0x0000000000000000] java.lang.Thread.State: RUNNABLE "Attach Listener" daemon prio=10 tid=0x0000000006e9a000 nid=0x14ec waiting on condition [0x0000000000000000] java.lang.Thread.State: RUNNABLE "Signal Dispatcher" daemon prio=10 tid=0x0000000006e99800 nid=0x1f74 runnable [0x0000000000000000] java.lang.Thread.State: RUNNABLE "Finalizer" daemon prio=8 tid=0x0000000006e3e000 nid=0x14e4 in Object.wait() [0x0000000007b7f000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) - waiting on <0x00000007af6a0330> (a java.lang.ref.ReferenceQueue$Lock) at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118) - locked <0x00000007af6a0330> (a java.lang.ref.ReferenceQueue$Lock) at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134) at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159) "Reference Handler" daemon prio=10 tid=0x0000000006e3a800 nid=0x1120 in Object.wait() [0x0000000007a7f000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) - waiting on <0x00000007af6a0568> (a java.lang.ref.Reference$Lock) at java.lang.Object.wait(Object.java:485) at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116) - locked <0x00000007af6a0568> (a java.lang.ref.Reference$Lock) "main" prio=6 tid=0x0000000000498000 nid=0x34c runnable [0x00000000026de000] java.lang.Thread.State: RUNNABLE at java.lang.ProcessImpl.waitFor(Native Method) at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:151) at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:88) at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:191) at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:98) at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:200) at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAllProviders(AbstractSurefireMojo.java:177) at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:135) at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:98) at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101) at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209) at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59) at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183) at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161) at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320) at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537) at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196) at org.apache.maven.cli.MavenCli.main(MavenCli.java:141) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409) at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) "VM Thread" prio=10 tid=0x0000000006e2f000 nid=0x1fe4 runnable "GC task thread#0 (ParallelGC)" prio=6 tid=0x00000000004ac800 nid=0x1b90 runnable "GC task thread#1 (ParallelGC)" prio=6 tid=0x00000000004ae000 nid=0x11cc runnable "GC task thread#2 (ParallelGC)" prio=6 tid=0x00000000004b0000 nid=0x1244 runnable "GC task thread#3 (ParallelGC)" prio=6 tid=0x00000000004b1800 nid=0x17d8 runnable "GC task thread#4 (ParallelGC)" prio=6 tid=0x00000000004b5000 nid=0x1cbc runnable "GC task thread#5 (ParallelGC)" prio=6 tid=0x00000000004b6800 nid=0x1b14 runnable "GC task thread#6 (ParallelGC)" prio=6 tid=0x00000000004b8000 nid=0x1dc4 runnable "GC task thread#7 (ParallelGC)" prio=6 tid=0x00000000004ba000 nid=0x1ef0 runnable "VM Periodic Task Thread" prio=10 tid=0x0000000006ecc800 nid=0x184c waiting on condition JNI global references: 1110 
```

我的测试是使用 Cucumber-JVM 设置的，并且在我尝试执行 Selenium 驱动程序的步骤定义中。我肯定会按照 selenium 网站上概述的设置步骤进行操作，但我目前对为什么该项目不通过 TeamCity 执行感到迷茫。

如果这有助于故障排除，我很乐意发送我的测试项目。任何新的见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:14:11.267

您是否设置了 IEDriverServer 和 ChromeDriverServer 的路径？我们正在使用 IEDriver 和 ChromeDriver 使用 Jenkins 运行测试。我们在 pom 文件中设置了以下属性，并将 IEDriverServer 和 ChromeServer 文件放在项目的根目录下。

```
<systemPropertyVariables>
  <webdriver.chrome.driver>chromedriver.exe</webdriver.chrome.driver>
  <webdriver.ie.driver>IEDriverServer.exe</webdriver.ie.driver>
</systemPropertyVariables> 
```

您可以看到这些是 exe 文件，因为我们使用的是 windows slave 机器来运行测试，如果您使用 linux 机器作为您的测试运行机器，那么您可以更改它。

# c# - 发布 JSON 并提交表单（或重定向）

> ID：13051411
> 
> 赞同：0
> 
> 时间：2012-10-24T14:34:12.043
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我正在努力解决如何正确提交我真的只需要发送 JSON 而不是表单控件的表单。我有一个 SubmitOrder() javascript 函数：

```
function SubmitOrder() {
    var selectedProductsAsJson = JSON.stringify(selectedProducts);
    // This line works...
    $.post('/OrderCheckout/Save', { jsonData: selectedProductsAsJson });
    // ... or this line works...
    $('#productListForm').submit();
    // but not both lines together.
} 
```

我要做的是将 selectedProductsAsJson 发送到我的控制器，对其进行处理，然后将用户发送到新页面。$.post 行完成了前两个操作，但之后我不知道如何将用户发送到新页面。

如果我只执行 .submit() 行，用户将被重定向到新页面，但控制器没有要处理的 json 数据。

如果我同时使用这两行，$.post 调用是异步的，用户将在 $.post 调用完成之前进入新表单。[我在这里](https://stackoverflow.com/a/2418402/279516)读到我可以使 $.post 调用同步，但似乎我应该能够通过一次调用服务器来完成所有这些。我缺少什么来实现这一点？

我的控制器目前看起来像这样；

```
public class OrderCheckoutController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public void Save(string jsonData)
    {
        List<Product> selectedProducts = new JavaScriptSerializer().Deserialize<List<Product>>(jsonData);
        decimal totalPrice = selectedProducts.Sum(x => x.Price);
        ViewBag.SaleTotal = totalPrice;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:44:04.770

可以使用[$.post的成功回调函数（第三个参数）](http://api.jquery.com/jQuery.post/)

“成功 url”可以是硬编码的，也可以来自您的 POST ( `Save`) 操作（实际上是无效的，但可能是 JsonResult）

```
$.post('/OrderCheckout/Save', 
       { jsonData: selectedProductsAsJson }, 
        function() {
          $('#productListForm').submit();
        }
      ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:42:18.363

```
public ActionResult Save(string jsonData)
{
    List<Product> selectedProducts = new JavaScriptSerializer().Deserialize<List<Product>>(jsonData);
    decimal totalPrice = selectedProducts.Sum(x => x.Price);
    ViewBag.SaleTotal = totalPrice;
    return RedirectToAction("Index");
} 
```

* * *

或者

```
$.post('/OrderCheckout/Save', { jsonData: selectedProductsAsJson }, 
        function() {
          $('#productListForm').submit();
        }
); 
```

# visual-studio-2010 - 如何使用 Visual Studio 2010 在 Win32 项目中隐藏控制台窗口

> ID：13051412
> 
> 赞同：1
> 
> 时间：2012-10-24T14:34:12.330
> 
> 标签：visual-studio-2010, visual-c++

我需要在应用程序启动期间创建一个没有控制台窗口或（任何其他窗口）的 exe 应用程序。

我为此尝试了以下方法：

1.  使用 Visual Studio 2010，将 Win32 控制台应用程序创建为空项目。
2.  在项目中添加了头文件“stdafx.h”
3.  在项目中添加了一个 cpp 文件并添加了以下代码。
4.  项目设置是默认的视觉标准。

    ```
    #include "stdafx.h"
    #include <windows.h>  
    #include "TlHelp32.h"
    #include <iostream>
    #include <string>
    int APIENTRY WinMain(HINSTANCE hInstance,HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)
    {

            return 0;
    } 
    ```

上面的代码编译得很好。

但是，如果我将字符集更改为“使用 Unicode 字符集”，则会出现以下编译错误。

> 错误 C2731：“WinMain”：函数无法重载

我在 Windows 7 64 位计算机和 Visual Studio Build 平台上构建应用程序作为 x64。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:05:54.187

是的，当您使用有效的 UNICODE 构建时，入口点将 Unicode 字符串作为命令行参数。所以这需要一个不同的声明：

```
 int APIENTRY wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
                        LPWSTR lpCmdLine, int nShowCmd) 
```

或者您可以使用`#include <tchar.h>`它以任何一种方式工作，这些天没有太多指向它：

```
 int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
                         LPTSTR lpCmdLine, int nCmdShow) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:55:53.990

创建 Windows 服务而不是控制台应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T19:54:44.023

在 Visual Studio 中，创建一个新的“空项目”。添加一个名为“main.cpp”的新源文件。使用以下模板（假设您要使用 Unicode 构建）：

```
/************
   main.cpp
************/

#define UNICODE 1

#include <windows.h>

int APIENTRY wWinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, 
                       LPWSTR lpCmdLine, int nShowCmd)
{
    // Process Return Codes
    const int SUCCESS=0, FAILURE=1;

    return SUCCESS;
} 
```

# database-schema - 剧院数据库架构

> ID：13051414
> 
> 赞同：0
> 
> 时间：2012-10-24T14:34:16.690
> 
> 标签：database-schema

我必须使用 php 实现售票服务，用户输入他/她想要的座位数，系统检查可用性，然后随机显示座位，用户确认并完成预订。

我要做的第一件事是总结我将使用的数据库模式。我有点困惑，所以我将向您介绍我到目前为止的想法。为了继续实施，我真的需要您的建议。

我总结了以下表格：

*   `Customer`：`id, name`
*   `Ticket`：`ticket_id, time, price, seat_id`
*   `Booking`：`id, customer_id, ticket_id`
*   `Seat`：`id, status`

他的重点是我不确定这一点，并且很确定它是错误的。例如，剧院有容量（标准座位数）。那么，我应该在哪里存储这个？我应该有一个表`Theater: id, name, capacity`，并且当管理员完成例如`capacity = 60`，然后我应该自动进行一个查询，将 60 条记录插入到`Seats`表中`status=1`（可用）？

我很困惑。我将不得不更仔细地考虑它，但是第二种意见对我真的很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:40:44.460

您认为您当前的模式不正确是正确的。您现在预订的方式只能有一个座位，但您的要求是您需要能够选择多个。你需要的是**多对多的**关系。要求谷歌找出这意味着什么。

这是我认为应该起作用的：

*   客户：身份证、姓名
*   门票：ticket_id，时间
*   预订：id、customer_id、ticket_id
*   座位：id、状态、价格
*   seat_ticket_map：seat_id，ticket_id

因此，要将新座位附加到票上，您需要创建一个新的 seat_to_ticket_map 实例。

我不确定在哪里定价，但我认为在 Seat 上是有道理的。但这取决于您的要求

# regex - URL 的域部分的正则表达式模式

> ID：13051415
> 
> 赞同：1
> 
> 时间：2012-10-24T14:34:20.643
> 
> 标签：regex, actionscript

我正在寻找与 url（http 或 https）的域路径匹配的正则表达式模式

示例 1：

```
 https://www.blabla.com/path/pic.jpg 
```

应该匹配

```
 https://www.blabla.com 
```

示例 2：

```
 http://my.domain.tld/directory/?something 
```

应该匹配

```
 http://my.domain.tld 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:41:22.457

类似的东西：

```
#^(https?://[a-z0-9.-]+)(?=/|$).*#i 
```

当然，这取决于您希望在域名中允许哪些字符。

PS`#`用于分隔正则表达式，`i`最后表示不区分大小写。

# ruby-on-rails - 什么是rails中的回调方法？

> ID：13051416
> 
> 赞同：0
> 
> 时间：2012-10-24T14:34:21.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Rails 中的回调方法到底是什么？当我了解控制器和模型时，我看到这个术语无处不在。有人可以提供例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:08:23.580

[`ActiveRecord::Callbacks`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Callbacks.html#M001375)回调 wrto Activerecord 的参考

```
Callbacks are hooks into the lifecycle of an Active Record object that allow you 
to trigger logic before or after an alteration of the object state. This can be 
used to make sure that associated and dependent objects are deleted when destroy 
is called (by overwriting before_destroy) or to massage attributes before they‘re
validated (by overwriting before_validation). As an example of the callbacks
initiated, consider the Base#save call for a new record 
```

举个例子，你有一个`Subscription`模型，你有一个`signed_up_on`包含订阅创建日期的列。为此，`w/o Callbacks`您可以在`controller`.

```
@subscription.save
@subscription.update_attribute('signed_up_on', Date.today) 
```

这将非常好，但是如果假设您的应用程序中有 3-4 个方法可以创建订阅。因此，要实现它，您必须在所有多余的地方重复代码。

为避免这种情况，您可以在此处使用`Callbacks`和`before_create`回调。因此，每当您的订阅对象被创建时，它都会将今天的日期分配给`signed_up_on`

```
class Subscription < ActiveRecord::Base
    before_create :record_signup

    private
      def record_signup
        self.signed_up_on = Date.today
      end
end 
```

以下是所有回调的列表

```
after_create
after_destroy
after_save
after_update
after_validation
after_validation_on_create
after_validation_on_update
before_create
before_destroy
before_save
before_update
before_validation
before_validation_on_create
before_validation_on_update 
```

# qt4 - 仅在文件上设置名称过滤器，而不是在目录上

> ID：13051418
> 
> 赞同：1
> 
> 时间：2012-10-24T14:34:23.417
> 
> 标签：qt4

我正在尝试以递归方式获取文件夹中的所有文件，但它看起来很愚蠢，

如果我使用`setNameFilters`，它也会过滤文件夹名称，因此如果一个文件夹里面没有文件，而只有子文件夹，则循环将失败。所以现在我做了两次内部循环，一次用于查找所有没有名称过滤器的子文件夹；一个用于所有带有名称过滤器的文件。

梳理它们的正确方法是什么？我想要所有文件夹，以及所有符合过滤器的文件（我会判断它是循环中的文件还是文件夹）

```
QStringList FileFind::dir2files(const QString &path)
{
    QStringList files;

    QStack<QString> stack;
    stack.push(path);

    while (! stack.isEmpty())
    {
        QDir dir (stack.top());
        stack.pop();

        foreach (const QFileInfo & fileInfo,
                 dir.entryInfoList(QDir::NoDotAndDotDot | QDir::Dirs))
        {
            stack.push_back(fileInfo.absoluteFilePath());
        }

        dir.setNameFilters(_nameFilters);

        foreach (const QFileInfo & fileInfo,
                 dir.entryInfoList(QDir::NoDotAndDotDot | QDir::Files) )
        {
            files.append(fileInfo.absoluteFilePath());
        }
    }

    return files;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:17:31.477

虽然我不会将此描述为“一种真正的方式”，但我认为如果您以递归方式递归调用您的`dir2files`成员函数（您使用`QStack`来管理目录是第一个线索），您最终会得到一个更清洁的解决方案：

```
QStringList FileFind::dir2files(const QString& path)
{
   QStringList files;
   dir2fileshelper(path, files, 0);
   return files;
}

void FileFind::dir2fileshelper(const QString& path,
                               QStringList& files,
                               int currentDepth)
{
   static const int MAXIMUM_DEPTH = 40; // For example
   if (currentDepth >= MAXIMUM_DEPTH)
   {
      qWarning("Maximum directory depth limit reached.");
      return;
   }

   QDir directory(path);

   QFileInfoList list = directory.entryInfoList(QDir::NoDotAndDotDot | 
                                                QDir::Dirs |
                                                QDir::Files);

   foreach (const QFileInfo& fileInfo, list)
   {
      if (fileInfo.isDir())
      {
         dir2fileshelper(fileInfo.absoluteFilePath(), files, currentDepth+1);
      }
      else
      {
         files << fileInfo.absoluteFilePath();
      }
   }
} 
```

**更新：**添加了限制递归深度和限制`QStringList`复制的代码。

# javascript - Phonegap，从初始安装仅运行一次脚本

> ID：13051419
> 
> 赞同：1
> 
> 时间：2012-10-24T14:34:38.910
> 
> 标签：javascript, android, cordova

我有一些 javascript 可以读取数据库文件，然后加载到 Phonegap 自己的数据库中。目前它通过 onDeviceReady() 触发，所以每次我加载到页面或返回页面时它都会被处理。

我应该按顺序写什么，以便此功能在初始安装时只发生一次？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:42:32.743

我不熟悉phonegap，但一般逻辑应该是一样的。

将代码包含在 if 语句中，该语句检查某个标志值是否存在于持久存储（如 SharedPreferences）中。如果该值已设置，则代码已运行。如果没有设置，那么它还没有运行。如果尚未运行，请运行您的代码，然后在持久存储中设置该值，使其不再运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T10:19:05.180

如上所述，您可以设置一个标志并在每次启动应用程序时检查此标志。

ShardPreferences 的 PhoneGap 等价物是 LocalStorage。即使应用程序关闭，您在 LocalStorage 中设置的变量也会保持保存。

可以在此处找到有关此 LocalStorage 的信息：http: [//docs.phonegap.com/en/edge/cordova_storage_localstorage_localstorage.md.html](http://docs.phonegap.com/en/edge/cordova_storage_localstorage_localstorage.md.html)

# jquery - 防止 jquery 事件运行两次

> ID：13051420
> 
> 赞同：2
> 
> 时间：2012-10-24T14:34:40.813
> 
> 标签：jquery

我有一个点击事件（见下文）。我遇到的问题是我正在触发它，但 targ.hide('slow') 事件是异步的，因此我能够在第一个 targ.hide('slow') 仍在运行时再次触发该事件. 我已经设法用一个标志解决了这个问题，但想知道是否有更好的方法来阻止这个问题？提前致谢。

```
var flag = false;
$('div.titlebar div.re.b1 div.r .sides').delegate('.close', 'click', function (e)
{
    if (!flag)
    {
        flag = true;
        var cnt = $('table.sides tbody tr > td').length;
        var targ = $(this).closest('td');
        var side = $(this).parent('div[itemprop]').attr('itemprop');

        if (cnt > 1)
        {
            targ.hide('slow', function () { targ.remove(); LoadSides(dkey); flag = false; });
            updatesidedel(side, true);
        }
    }
    e.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:39:22.247

您可以使用[`:animated`](http://api.jquery.com/animated-selector/)来检查是否`td`仍在动画中。

```
if( $('td:animated').length > 0 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:38:58.767

您应该尝试使用：[jquery 的 :selector](http://api.jquery.com/animated-selector/)来查看您的项目当前是否为动画。

# c++ - POSIX：如何暂停线程？

> ID：13051423
> 
> 赞同：0
> 
> 时间：2012-10-24T14:34:50.300
> 
> 标签：c++, multithreading, posix

我知道一些有条件的技巧，但这没有帮助。

假设我的线程函数中有无限循环。我怎样才能只暂停这个线程，而不是所有进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:36:56.480

使用[std::condition_variable](http://en.cppreference.com/w/cpp/thread/condition_variable)或[std::this_thread::sleep_for](http://en.cppreference.com/w/cpp/thread/sleep_for)

# ios5 - iOS Core Data：在 Transformable 属性中区分多个对象

> ID：13051425
> 
> 赞同：0
> 
> 时间：2012-10-24T14:35:00.937
> 
> 标签：ios5, core-data, entity-attribute-value

我正在尝试实现简单的核心数据类来存储和检索从服务器下载的不同语言字符串（数组）。到目前为止，我已经在 App Delegate 中创建了创建的 Core Data 模板，使用一种实体“MyArray”和一种属性“语言”创建了数据模型，并编写了以下示例代码来存储和检索这些数组。现在两个字符串数组都存储在同一个属性“语言”中，我如何检索中文数组？

```
// Fetch arrays code
NSManagedObjectContext *context = [self managedObjectContext];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"MyArray" inManagedObjectContext:context];
[request setEntity:entity];
NSArray *results = [context executeFetchRequest:request error:nil];

for (NSManagedObject *object in results) {
    NSArray *a = [object valueForKey:@"language"];
    // Use array
}

-(void)storeEnglishStrings {
    NSArray *array = [[NSArray alloc] initWithObjects:@"str1",@"str2", @"str3", @"str4", @"str5",  nil];

    NSManagedObject *object = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];
    [object setValue:array forKey:@"language"];

    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}

-(void)storeChineseStrings {
    NSArray *array = [[NSArray alloc] initWithObjects:@"串1",@"串2", @"串3", @"串4", @"串5",  nil];

    NSManagedObject *object = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];
    [object setValue:array forKey:@"language"];

    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:40:22.993

查看[Core Data 编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。您将需要使用带有 中文[谓词的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)[NSFetchRequest](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html)。您需要确保您可以识别哪一种是您正在保存的记录的语言。我没有看到您实体的结构，但我确实看到您没有保存语言。此外，您应该重新考虑您的模型。您通常不需要将 NSArray 保存到核心数据中。你可以，但这通常意味着你的模型缺乏更好的设计。

# github - 如何在 Github 上的 Markdown 文件中显示图像？

> ID：13051428
> 
> 赞同：91
> 
> 时间：2012-10-24T14:35:15.210
> 
> 标签：github, markdown

我想在 Github 上的 Markdown 文件中显示一些图像。我发现它是这样工作的：

```
![Figure 1-1](https://raw.github.com/username/repo/master/images/figure 1-1.png "Figure 1-1") 
```

但我需要与其他人合作，所以我不希望用户名和 repo 名称硬编码。

我试着用这个：

```
![Figure 1-1](images/figure 1-1.png "Figure 1-1") 
```

它适用于我的本地磁盘，但不适用于 Github。

有没有人知道这个问题？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-10-25T07:43:00.053

我自己找到了答案。

只需简单地将**?raw=true**附加到图像 url 就可以了：

```
![](images/table 1-1.png?raw=true) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-05-23T11:03:19.730

我只是遇到了同样的问题，结果证明是由 URL 中的空格引起的。手动将空间编码为`%20`固定的 URL。

所以使用你的例子我改变了：

```
![](images/table 1-1.png) 
```

到：

```
![](images/table%201-1.png) 
```

2021 年编辑：感谢 Emilio 指出 GitHub 风格的降价规范已更新，当文件名包含在“尖”（尖角）括号内时，允许在文件名中使用空格：

```
The destination can only contain spaces if it is enclosed in pointy brackets
Example 498
[link](</my uri>) --> <p><a href="/my%20uri">link</a></p> 
```

Ref: [https://github.github.com/gfm/#example-498](https://github.github.com/gfm/#example-498) (scroll up for description)

This works with images too so we can now also use:

```
![](<images/table 1-1.png>) 
```

# google-maps - GMap、gmap3 插件和“getRoute”调用在结果中收到更改的对象

> ID：13051429
> 
> 赞同：1
> 
> 时间：2012-10-24T14:35:23.823
> 
> 标签：google-maps, jquery-gmap3, map-directions

我仍然不确定我是否正确，但这里是：

我正在使用 jquery gmap3 插件从谷歌地图获取一些路由。插件是 v4.1。通常，在回调函数中`getRoute`，我得到了一个响应（让我们把它放在 var named 中`results`），它的结构如下：

```
results.routes - an array of google.maps.DirectionsRoutes
results.status - status of the call ('OK' in normal situations)
results.ub (this one I used to pull the waypoints from) 
```

该`results.ub`对象不再存在。现在有一个`results.vb`.

我认为这可能是 gmap3 插件本身的变化，但我的硬盘上有插件文件，它们几个月都没有改变。有人有解释吗？

我可以简单地更改我的代码并开始使用名为“vb”的对象，它现在就在那里，但是如果它在 2 天内更改为“wb”怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T07:16:57.717

如果对象结果发生变化，这是由google自己完成的，

gmap3 不修改结果对象

*刚刚发布了gmap3 5.0版的通知*

# ios - 模态视图控制器在呈现 2/3 次后不再呈现

> ID：13051440
> 
> 赞同：0
> 
> 时间：2012-10-24T14:35:56.713
> 
> 标签：ios, modalviewcontroller, augmented-reality

事情是这样的，我必须将增强现实功能集成到应用程序中。在测试它之后，现在我准备集成它。该应用程序始终以纵向运行，我决定在横向向右或向左旋转 iPhone 时显示增强现实（当然，如果我返回纵向，则会显示原始视图控制器）。事实上，增强现实是模态呈现的。

我有 viewController 调用 ARViewController （模态）。如果我旋转 2 或 3 次，它工作正常，但是不再调用此 ARViewController，但应用程序仍在运行，没有崩溃，没有冻结。这个 ARViewController 是用 ARController 初始化的，这是一个计算增强现实所需的所有类的类。如果我在没有 ARController 的情况下调用此 ARViewcontroller，则视图控制器之间的切换工作得很好，将调用一个空白窗口，但至少我可以随心所欲地旋转设备。所以，这必须来自 ARController，我记录了自己的内存泄漏（顺便说一下我使用 ARC），我认为这可能是问题的原因，因为我多次使用这个 ARController。

但在更进一步之前，我想知道我是否做错了可能会通过在视图控制器之间切换来影响 ARController：

这是我在 viewController 中调用 ARViewController 的方式：

```
if (orientation == UIDeviceOrientationLandscapeLeft) {
        NSLog(@"ViewController Landscape left");
        ARViewController *arVC = [[ARViewController alloc] initWithNibName:@"ARViewController" bundle:nil];
        [self setCameraViewController:arVC];
        [arVC setModalTransitionStyle: UIModalTransitionStyleFlipHorizontal];
        [[self navigationController] presentModalViewController:cameraViewController animated:YES];
        arVC = nil;
    }
    else if (orientation == UIDeviceOrientationLandscapeRight) {
        NSLog(@"ViewController Landscape Right");
        ARViewController *arVC = [[ARViewController alloc] initWithNibName:@"ARViewController" bundle:nil];
        [self setCameraViewController:arVC];
        [arVC setModalTransitionStyle: UIModalTransitionStyleFlipHorizontal];
        [[self navigationController] presentModalViewController:cameraViewController animated:YES];
        arVC = nil;
    } 
```

ARViewController 的初始化：

```
- (void)viewDidLoad {
[super viewDidLoad];
self.arController = [[ARController alloc] initWithViewController:self];
arController.filterDiscover = filterDiscover;
arController.filterEat = filterEat;
arController.filterSleep = filterSleep;

// Listen for changes in device orientation
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceOrientationDidChange:) name: UIDeviceOrientationDidChangeNotification object:nil];
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

//if ViewController presents this modal ARViewController
if(!arController.filterDiscover && !arController.filterEat && !arController.filterSleep)
    [arController callAlertViewToFilter];
else
    [arController loadData];
} 
```

最后，如果我在 ARViewController 中旋转到 Portrait，我将如何返回到原始视图控制器：

```
if (orientation == UIDeviceOrientationPortrait){
    NSLog(@"ARViewController Portrait");
    [self setArController:nil];
    [[super presentingViewController] dismissModalViewControllerAnimated:YES];
} 
```

我试图尽可能清楚，如果有人遇到过类似的问题，那么有一些线索可以解决这个问题。我本可以展示 ARController 的代码，但它有点太长了，现在我只想知道这里是否有什么问题。如果需要，我会展示它。

这可能会有所帮助，当 ARViewController 不再显示时，我在调试区域中找到了此输出：

```
2012-10-24 17:57:51.072 beiceland[20348:907] ViewController Landscape Right
2012-10-24 17:57:51.073 beiceland[20348:907] Warning: Attempt to present <ARViewController: 0x203f0c60> on <RevealController: 0x1cd5dca0> while a presentation is in progress! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:09:32.110

我的错我在这里没有解决方案。

我使用了调试器和断点并重复了关键序列，我发现我没有进入：

```
- (void)deviceOrientationDidChange:(NSNotification *)notification 
```

了。所以这是我第一次看到这样的事情，设备方向变化的监听器突然停止触发。因此，我的解决方案非常残酷，但至少它具有停止问题的优点，就在检测到设备方向变化后，我停止了侦听器：

```
if (orientation == UIDeviceOrientationLandscapeLeft) {
        NSLog(@"ViewController Landscape left");
        [[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];
        [[NSNotificationCenter defaultCenter] removeObserver:self];
        ARViewController *arVC = [[ARViewController alloc] initWithNibName:@"ARViewController" bundle:nil];
        [self setCameraViewController:arVC];
        arVC = nil;
        [cameraViewController setModalTransitionStyle: UIModalTransitionStyleFlipHorizontal];
        [[super navigationController] presentModalViewController:cameraViewController animated:YES];
} 
```

每次我使用 viewController（调用视图控制器）时，我都会重新初始化监听器，这意味着`viewDidAppear:`

```
// Listen for changes in device orientation
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceOrientationDidChange:) name: UIDeviceOrientationDidChangeNotification object:nil];
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

现在它已经解决了，但我不得不承认我对找到这种解决方案感到失望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:16:53.300

好吧，我以前从未使用过 ARC，但根据我所看到的，每次更改方向（在横向上）时都会初始化一个 ARViewController。为什么不永久实例化 2 ARViewController，并且每次都调用它们呢？

除非您确定每次切换到纵向时都会释放这些内容。

另外，你为什么不直接使用*pushViewController:animated:*？

最后一件事，您将ModalViewController 呈现给您的navigationController，但您在[super presentingViewController] 中将其关闭，也许您可​​以添加这个？

# optimization - 是否有用于生成自修改代码的简单处理器上的高级语言的现代编译器？

> ID：13051443
> 
> 赞同：2
> 
> 时间：2012-10-24T14:36:15.160
> 
> 标签：optimization, compiler-construction, embedded, self-modifying, 8-bit

在缓存和分支预测之前的日子里，如果不鼓励为某些类型的优化制作自修改代码，那是相对普遍的。在 8 位到早期 32 位（例如 Amiga）的时代，它可能最常见于用汇编程序编写的游戏和演示中。

我不确定当时是否有任何编译器发出自修改汇编程序或机器代码。

我想知道是否有任何当前/现代编译器可以做到。显然，在具有高速缓存的强大处理器上，这将是无用的或太难了。

但是对于嵌入式系统中使用的非常多的简单处理器呢？对于任何简单/8位/嵌入式处理器，任何现代编译器都认为自我修改代码是一种可行的优化策略吗？

* * *

^(有一个类似标题的问题，“[周围有任何自我改进的编译器吗？](https://stackoverflow.com/questions/1585067) ”，但请注意，它不是同一个主题：)

> ^(请注意，我说的是一个自我改进的编译器——而不是一个改进它编译的代码的编译器。)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:34:25.647

今天所有的嵌入式系统都使用闪存 ROM。我相信 Amiga 和类似的系统都是基于 RAM 的系统。嵌入式系统中存在“自我修改”的唯一方式是你有引导加载程序，它根据应该使用的程序和/或功能对闪存的某些部分进行重新编程。

除此之外，程序在运行时修改自身是没有意义的。通常不鼓励从 RAM 运行代码，出于安全原因（可能由错误引起的意外修改）和电气原因（RAM 易失且对 EMC 比闪存更敏感）。

# c# - 如何检测 System.Media.Sound (BEEP) 是否已被另一个程序播放

> ID：13051445
> 
> 赞同：3
> 
> 时间：2012-10-24T14:36:16.413
> 
> 标签：c#, logging, event-handling, beep, system-sounds

我试图弄清楚是否播放了 System.Media.Sounds，用于错误记录目的。

我将如何获取一个布尔值来表示在我的程序执行期间是否播放了任何 System.Media.Sounds？

在执行代码时，我遇到了一个系统（哔哔声）每分钟播放大约 10 次以上的情况。我想为每次播放（哔声）时做一个日志。

也许我可以将其设为 EventArgument？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:48:47.190

[这个问题](https://stackoverflow.com/questions/3983463/how-to-detect-if-any-sound-plays-on-a-windows-xp-machine)和你的类似；不幸的是，似乎有效的答案涉及 DirectSound，它可能比您正在寻找的要复杂得多。

# jsf - ui中的JSF文件上传：重复

> ID：13051448
> 
> 赞同：3
> 
> 时间：2012-10-24T14:36:24.497
> 
> 标签：jsf, file-upload, el, uirepeat

我有一个 UI，可以选择将多个特定性质的文档上传到一个问题。在我的应用程序的其余部分，我可以毫无问题地上传单个文件。

**环境**

*   雄猫 7.0.x
*   Mojarra JSF 实施 2.1.3 (20110908-FCS)
*   JSF 2.1 和 Primefaces 2.2
*   阿帕奇战斧。

**代码说明**

这是循环文档信息实体的代码。这些实体要么是来自数据库的记录，要么是占位符。如果实体存在，实体将具有指向数据库中项目的 ID，否则将为 0，这意味着它是占位符并且可以上传文件。

在占位符的情况下，有一个上传按钮，它会弹出一个 Primefaces 对话框，其中包含一个 Tomahawk 文件上传组件。

**代码**

这是JSF代码：

```
<html
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:t="http://myfaces.apache.org/tomahawk"
xmlns:p="http://primefaces.prime.com.tr/ui"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:repeat var="extDoc" value="#{reportBean.externalDocs}"
        varStatus="extDocIdx">
    <!-- Display the document name -->
    <h:outputText value="#{extDoc.name}"/>

    <!-- if the document is not in the database, give the option to add it -->
    <ui:fragment rendered="#{extDoc.id == 0}">
        <!-- On click of the upload button, display the dialog -->
        <h:commandButton value="Upload" type="button"
            onclick="uploadDlg#{extDocIdx.index}.show()" modal="true"/>

        <p:dialog header='Upload document for #{extDoc.name}'
                modal="true" widgetVar="uploadDlg#{extDocIdx.index}"
                width="650" minWidth="650">
            Select the file to upload:
            <!-- THIS IS WHERE THE PROBLEM IS -->
            <t:inputFileUpload value="#{reportBean.uploadedFile}"/>
            <br/>
            <h:commandButton value="Submit"
                action="#{reportBean.addExtDocument(extDoc.name, extDocIdx.index)}"/>
        </p:dialog>
    </ui:fragment>

    <ui:fragment rendered="#{extDoc.id != 0}">
        <!-- display a link to the uploaded file -->
    </ui:fragment>
</ui:repeat> 
```

ReportBean中的uploadedFile属性：

```
private UploadedFile uploadedFile;
public UploadedFile getUploadedFile() { return uploadedFile; }
public void setUploadedFile(UploadedFile value) { uploadedFile = value; }

public void addExtDocument(String name, int idx)
    throws IOException
{
    // access uploadedFile to persist the information
} 
```

**问题**

我愚蠢地只有一个上传文件变量来处理上传文件的整个循环；因此，循环中的最后一项始终会覆盖其他项，因此除了最后一项外，无法上传任何内容。我显然需要为每次循环指定不同的上传文件。我尝试使用 List<UploadedFile> 失败，但不清楚如何初始化数组或 t:inputFileUpload 组件如何更新提交时的值。

**问题**

所以问题是：我在 t:inputFileUpload 中包含什么样的 EL 以及在 ReportBean 中使用什么样的属性来在我的 addDocument 方法中提供单独的 uploadFile 实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:39:10.493

您可以使用`List<UploadedFile>`或`UploadedFile[]`使用大括号表示法访问各个项目，其中您传递的当前索引`<ui:repeat>`如下：

```
<t:inputFileUpload value="#{reportBean.uploadedFiles[extDocIdx.index]}"/> 
```

无论哪种方式，您都需要确保该属性已正确预初始化。`List`必须使用 初始化，并且`new ArrayList<>()`必须使用正确的长度对数组进行预初始化。JSF/EL 即不会为您预先创建它；它只是在给定索引上设置给定项目，仅此而已。在`null`列表或数组上，您只会面对 a `PropertyNotWritableException`，而在空数组或大小错误的数组上，您只会面对`ArrayIndexOutOfBoundsException`.

# windows-8 - WinJS AppBar 按钮在隐藏时闪烁

> ID：13051456
> 
> 赞同：1
> 
> 时间：2012-10-24T14:36:57.127
> 
> 标签：windows-8, winjs, appbar

我的应用程序在屏幕底部有一个 WinJS AppBar 控件。我`.showOnlyCommands(buttonsToShowArray)`用来显示和隐藏`ListView` `itemSelectionChanged`事件按钮。

我现在遇到的问题是，当我每次调用时`.showOnlyCommands`，要隐藏的按钮（或者您可能会说“已替换”）都会在屏幕顶部闪烁。

我尝试使用 Microsoft 示例应用程序，但没有发生这种情况。我尝试使用`.showCommands`+`.hideCommands`方法，这是相同的行为。请注意，这在 Win8 的 Release Preview 版本之前并未发生。

我不知道发生了什么。任何想法？

编辑：我做了进一步调查，问题发生在`hideCommands`. 假设我在应用栏上显示了 3 个按钮。我打电话`hideCommands`来隐藏所有 3 个按钮。3个按钮的图标会在appbar上消失，然后堆积在屏幕的左上角，然后消失。（即屏幕一角会闪烁 3 个堆叠的按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:44:16.937

当 AppBar 处于“显示”过程中时，您可能会调用 showOnlyCommands。我发现在 beforeshow 或 aftershow 处理程序中调用这些方法时会发生这种情况。[Animating your UI](http://msdn.microsoft.com/en-au/library/windows/apps/hh465165.aspx)中的这句话阐明了原因：

> 使用淡入和淡出动画来显示或隐藏瞬态 UI 或控件。一个示例是在应用栏中，由于用户交互，新控件可能会出现在其中。

示例应用程序在显示应用程序栏之前显示/隐藏按钮。在调用 showOnlyCommands 之前，您可能会在应用栏上调用 show。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:03:11.957

解决此问题的临时方法是：

在调用`showOnlyCommands`或之前将按钮设置为不可见`HideCommands`。

这是我现在使用的代码：

```
/* 
 * @param {WinJS.UI.AppBar} appbar winControl
 * @param {Array} array of appbar buttons to be shown
 */
function showOnlyCommands(appbarControl, buttonsToShow) {
    var toShow = {};
    for (var i = 0; i < buttonsToShow.length; i++) {
        toShow[buttonsToShow[i].id] = true;
    }
    for (var i = 0; i < visibleButtonsList.length; i++) {
        var id = visibleButtonsList[i].id;
        if (!toShow[id]) {
            // set the display property of the buttons to be hidden to "none"               
            var button = document.getElementById(id);
            if (button) {
                button.style.display = 'none';
            }
        }
    }
    // update the visible buttons list
    visibleButtonsList = buttonsToShow;
    // Note that we don't need to set the "display" property back for the buttons, 
    // because WinJS.UI.AppBar.showOnlyCommands would set it back internally
    appbarControl.showOnlyCommands(buttonsToShow);
} 
```

# javascript - 隐藏输入按钮

> ID：13051460
> 
> 赞同：7
> 
> 时间：2012-10-24T14:37:12.223
> 
> 标签：javascript, jquery, html

这是我的代码：http: [//jsfiddle.net/Draven/rEPXM/23/](http://jsfiddle.net/Draven/rEPXM/23/)

我想知道在单击图像以将输入框添加到表单`Add`之前如何隐藏该提交按钮。`+`

我不想在输入框旁边添加提交按钮，因为我希望能够添加多个输入框并在单击时将它们全部提交`Add`。

**HTML**

```
<div id="left">      
  <div class="box">
    <div class="boxtitle"><span class="boxtitleleftgap">&nbsp;</span><span class="boxtitlebulk"><span class="boxtitletext">Folders</span><div style="float: right; margin-top: 4px;"><a href="#" onclick="javascript: AddFolder();"><div class="addplus">&nbsp;</div></a></div></span></div>
      <div class="boxcontent">
        <form method="post" id="folderform" action="page.php?action=list-volunteer-apps" name="folderform">
          <a class="even" href="page.php?action=list-volunteer-apps&folder=2">Folder 2 <span class="text">(1)</span></a><a class="even" href="page.php?action=list-volunteer-apps&folder=1">Folder 1 <span class="text">(0)</span></a>
          <div id="foldercontainer"><input type="submit" value="Add"></div>
        </form>
      </div>
  </div>
</div> 
```

**jQuery**

```
function AddFolder() {
    $('#foldercontainer').append('<input name="folder[]" type="text" size="20" />');
}​ 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-24T14:41:56.803

只需给按钮一个 ID，并使其开始隐藏

```
<input type="submit" id="addButton" value="Add" style="display: none;"> 
```

然后使用`show()`jQuery方法：

```
$("#addButton").show(); 
```

[http://jsfiddle.net/TcFhy/](http://jsfiddle.net/TcFhy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:52:55.630

这是您可以执行此操作的一种方法...此外，还清理了用于制作这些输入框的方法：

[http://jsfiddle.net/mori57/4JANS/](http://jsfiddle.net/mori57/4JANS/)

因此，在您的 html 中，您可能有：

```
 <div id="foldercontainer">
      <input id="addSubmit" type="submit" value="Add">
      <input id="folderName" name="folder[]" type="text" size="20" style="" />
  </div> 
```

你的 CSS 可能是：

```
#foldercontainer #addSubmit {
    display:none;
}
#foldercontainer #folderName {
    display:none;
    width: 120px; 
    background: #FFF url(http://oi47.tinypic.com/2r2lqp2.jpg) repeat-x top left; 
    color: #000; 
    border: 1px solid #cdc2ab; 
    padding: 2px; 
    margin: 0px; 
    vertical-align: middle;
} 
```

你的脚本可能是：

```
// set up a variable to test if the add area is visible
// and another to keep count of the add-folder text boxes
var is_vis = false,
    folderAddCt = 0;

function AddFolder() {
    if(is_vis == false){
        // if it's not visible, show the input boxes and 
        $('#foldercontainer input').show();
        // set the flag true
        is_vis = true;
    } else {
        // if visible, create a clone of the first add-folder
        // text box with the .clone() method
        $folderTB = $("#folderName").clone();
        // give it a unique ID
        $folderTB.attr("id","folderName_" + folderAddCt++);
        // and append it to the container
        $("#foldercontainer").append($folderTB);
    }
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:43:53.173

我将按钮移出文件夹包装，并在您添加新文件夹时显示它。这样，在添加新文件夹时按钮将保持在底部。我还删除了内联样式，并将其替换为一个类。

这用于显示按钮，只需将其添加到`AddFolder()`函数中即可：

```
$('#addBtn').show(); 
```

我用这样的 CSS 隐藏它：

```
#addBtn { display: none;} 
```

我将按钮移出`#foldercontainer`，这样当您添加多个文件夹时，它将始终保持在底部，如您所愿：

```
<div id="foldercontainer"></div>
<input id="addBtn" type="submit" value="Add"> 
```

在这里寻找 jsFiddle：http: [//jsfiddle.net/kmx4Y/1/](http://jsfiddle.net/kmx4Y/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:40:32.710

```
$('form#folderform input[type=submit]').hide(); 
```

然后点击提交后显示添加按钮

[http://jsfiddle.net/SQh8L/](http://jsfiddle.net/SQh8L/)

# liferay - Liferay - 在 2 个不同的 portlet 之间共享 Utils 类

> ID：13051461
> 
> 赞同：4
> 
> 时间：2012-10-24T14:37:13.337
> 
> 标签：liferay, share, portlet

我正在开发一个 Liferay 应用程序，由 2 个不同的 portlet 组成，两者都必须进行某些共同的操作，所以我决定将这些操作放在外部 Utils 类的静态方法中。

我必须将该类外部化以避免在两个 portlet 中重复相同的代码，并且我希望将 portlet 放在不同的 WAR 文件中。

我知道我可以将 Utils 类打包到 JAR 文件中，但我们仍在开发中，我们不想为每次更改重新生成 JAR 并重新启动 Tomcat。

哪个是最好的选择，我该如何执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T23:26:42.880

如果您使用 Liferay SDK，您可以使用`clients`（最近更改为`shared`）目录来放置您的公共代码。

一个很好的例子是[deploy-listener-shared](https://github.com/liferay/liferay-plugins/tree/master/shared/deploy-listener-shared)如何与[deploy-listener-hook](https://github.com/liferay/liferay-plugins/tree/master/hooks/deploy-listener-hook)结合使用。

从它的外观来看，您需要做的所有配置就是修改`build.xml`将使用客户端\共享类的文件。如果您查看 deploy-listener-hook 的[构建文件](https://github.com/liferay/liferay-plugins/blob/master/hooks/deploy-listener-hook/build.xml)，您可以看到所有您需要添加的是。

对于新的 SDK：

```
<property name="import.shared" value="my-utils-shared" /> 
```

对于旧版 SDK：

```
<property name="dependent.clients" value="my-utils-client" /> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T07:18:09.453

还有另一种方法涉及构建 JAR 文件，但它不需要重新启动服务器（至少在 Tomcat 上）。

为您的 JAR 文件编写一个构建脚本，以便编译、构建 JAR 并最终将其复制到以下位置：

```
{tomcat}/webapps/ROOT/WEB-INF/lib 
```

*   然后在您的 portlet 中打开“liferay-plugin-package.properties”（在 Liferay Developer Studio/Liferay IDE 中，这应该会以漂亮的 GUI 打开）。
*   然后将您的 JAR 的名称添加到此文件中的“portal-dependency-jars”列表中，以便在它想要的源中（或者只需点击 GUI 中的“添加”按钮并选择所需的 JAR）：

    portal-dependency-jars=my-custom-lib.jar,my-other-custom-lib.jar

*   保存文件，然后重新部署 portlet，JAR 将在 portlet 部署时被复制。

我已经将此方法用于自定义 JAR 和需要在我的 portlet 中使用的第 3 方 JAR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:01:22.683

此外，您可能在一个 .war 中拥有多个 portlet。您可以只在`portlet.xml`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T10:46:05.660

对于开发阶段，只需将 jar 文件与两个应用程序一起打包。

除非一个应用程序以某种方式依赖于另一个应用程序，否则它是完全可以的。

另一种解决方案是使用 JRebel 工具。它将允许您在不重新启动的情况下在 tomcat 中重新部署 jar。

# cakephp - 你能在 CakePHP 的控制器 beforeFilter() 函数中调用 Html->scriptBlock() 吗？

> ID：13051466
> 
> 赞同：1
> 
> 时间：2012-10-24T14:37:33.930
> 
> 标签：cakephp

我想在所有页面中插入一个 JavaScript 块，虽然最好的方法是在 beforeFilter 函数中，因为它一直被执行，它将自动包含在所有模板的 $scripts_for_layout 中。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:43:37.983

为什么不把它放在布局文件中？

```
<head>
....
<?php
echo $this->Html->script('my_js_file');
?>
...
</head> 
```

顺便说一句，`Html`它是一个助手，所以它不应该在控制器中使用。

# c++ - Qt - 如何异步创建小部件？

> ID：13051467
> 
> 赞同：0
> 
> 时间：2012-10-24T14:37:38.680
> 
> 标签：c++, qt

我想异步创建一个小部件，然后将其分配给主线程中的对话框。我有一个创建小部件的功能：

```
shared_ptr<QTableWidget> createTable() {
    auto table = make_shared<QTableWidget>()

    // ... add some items to the table

    return table;
} 
```

当我同步调用这个函数时，一切都按预期工作。问题是当我异步调用此函数时：

```
auto futureWidget = QtConcurrent::run(createWidget); 
```

我使用`QFutureWatcher::finished()`信号，当小部件创建完成后，我尝试将该小部件添加到主/GUI线程中的对话框中。

问题是，当我向表中添加项目时，有时它会与 SIGSEG 一起崩溃。有时，当它完成时，创建的小部件不会显示。在标准输出上也有很多关于在 GUI 线程外使用 pixmap 的警告。

这不可能在 Qt 的不同线程中创建小部件吗？如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:48:57.170

不可以，只能在主线程中创建 GUI 小部件。

*通常，创建小部件的GUI*部分并不需要太多时间。如果你有一些操作，需要很多时间，你可能应该从小部件创建过程中提取它，在单独的线程中处理它，然后将此操作的结果传递给新创建的小部件。

**编辑**

如果小部件中有一些复杂的表，则应使用[Qt MVC](http://qt-project.org/doc/qt-4.8/model-view-programming.html)系统，即[`QTableView`](http://qt-project.org/doc/qt-4.8/qtableview.html)基于[`QAbstractTableModel`](http://qt-project.org/doc/qt-4.8/QAbstractTableModel.html). 然后，您可以在另一个线程中填充模型，然后才将其分配给在主线程中创建的视图。

# php - 我的受限 PHP 页面不会根据用户是否登录来限制访问

> ID：13051471
> 
> 赞同：0
> 
> 时间：2012-10-24T14:37:49.670
> 
> 标签：php, mysql

在这个站点的帮助下，我有一个现在可以工作的登录脚本。问题是我试图限制的页面没有限制访问，当我在没有登录的情况下进入该页面时，它仍然可以让我访问该页面。我对 PHP 很陌生，因此非常感谢您的帮助和评论。

该页面的代码是

```
<?php require_once('../Connections/PropSuite.php'); ?>
<?php

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

function isLoggedIn()
{
    if(isset($_SESSION['valid']) && $_SESSION['valid'])
        return true;
    return false;
}

session_start();
//if the user has not logged in
if(!isLoggedIn())
{
    header('Location: http://localhost/PropSuite/index.php');
    die();
}

?> 
```

登录脚本的代码是。

```
<?php

function validateUser()
{

    session_regenerate_id (); //this is a security measure
    $_SESSION['valid'] = 1;
    $_SESSION['userid'] = $userid;
}

?>

<?php

ob_start(); // Start output buffering

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

session_start(); //must call session_start before using any $_SESSION variables
$username = isset($_POST['username'])?$_POST['username']:'';
     $password = isset($_POST['password'])?$_POST['password']:'';
//connect to the database here

$hostname_PropSuite = "localhost";
$database_PropSuite = "propsuite";
$username_PropSuite = "root";
$password_PropSuite = "root";
$PropSuite = mysql_pconnect($hostname_PropSuite, $username_PropSuite, $password_PropSuite) or trigger_error(mysql_error(),E_USER_ERROR); 
mysql_select_db($database_PropSuite, $PropSuite);

$username = mysql_real_escape_string($username);

$query = "SELECT password, salt FROM admin_users WHERE username = '$username';";

$result = mysql_query($query) or die(mysql_error());

if(mysql_num_rows($result) < 1) //no such user exists
{
    header('Location: http://localhost/PropSuite/index.php?login=fail');

    die();
}
$userData = mysql_fetch_array($result, MYSQL_ASSOC);
$hash = hash('sha256', $userData['salt'] . hash('sha256', $password) );
if($hash != $userData['password']) //incorrect password
{
    header('Location: http://localhost/PropSuite/index.php?login=fail');

    die();
}
else
{
   validateUser(); //sets the session data for this user
}
//redirect to another page or display "login success" message
header('Location: http://localhost/PropSuite/main');
die()

//redirect to another page or display "login success" message

?> 
```

再次，提前感谢您的帮助和模组，如果我发布类似的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T19:12:50.523

嗯，这样对吗：

```
if(isset($_SESSION['valid']) && $_SESSION['valid'])
    return true; 
```

没有括号丢失吗？

我会这样写：

```
if(!empty($_SESSION['valid']) && !empty($_SESSION['valid']) && $_SESSION['valid'] === true) {
        return true;
 } 
```

也许这就是重点。如果这是错误的，您的登录将每次都是真实的。然后就可以看到内容了，即使没有Session！

希望能帮助到你！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-28T18:45:40.303

返回真，返回假

如果会话显示页面

else display 请登录后查看此页面或其他内容

# c# - SyncFusion GridDataControl 分组

> ID：13051473
> 
> 赞同：1
> 
> 时间：2012-10-24T14:37:55.290
> 
> 标签：c#, wpf, syncfusion

我正在使用[SyncFusion](http://help.syncfusion.com/User%20Interface/WPF/Grid) `GridDataControl`来显示一些数据。

网格中的行按列分组（例如 column `Group`）

`Group`当列具有特定值（即`null`or ）时，我不想使用组，`""`因此行将始终显示并且无法折叠。

有谁知道如何做到这一点？

到目前为止，我已经参与了以下`Loaded`活动`GridDataControl`：

```
private void OnGridLoaded(object sender, RoutedEventArgs e)
{
    foreach ( Group group in AttributeGrid.Model.View.Groups)
    {
        if (@group.Key == null)
        {
            AttributeGrid.Model.Table.ExpandGroup(@group);
            // Do something here to hide the group?
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:37:49.543

请在下面找到更新，

```
//Use the below code to Expand the particular group based on the key
void AssociatedObject_Loaded(object sender, RoutedEventArgs e)
{
    foreach (Group group in this.AssociatedObject.Model.View.Groups)
    {
        if (group.Key.Equals(1))
            this.AssociatedObject.Model.Table.ExpandGroup(group);
    }
} 
```

对于在运行时折叠组，

```
//Use the below code to cancel the Grouping for particular group based on the keu
void Table_GroupCollapsing(object sender, GroupCollapsingEventArgs args)
{
    if (args.Group.Key.Equals(1))
        args.Cancel = true;
} 
```

# web-services - 有人可以指出我的网络服务 URI 命名约定吗？

> ID：13051474
> 
> 赞同：2
> 
> 时间：2012-10-24T14:37:59.403
> 
> 标签：web-services, uri, standards, conventions

例如，创建对象、更新对象、按 ID 检索对象、按名称检索对象。

```
POST to: /object/create
POST to: /object/update
GET to: /object/getById?id={0}
GET to: /object/getByName?name={0} 
```

或者是否有可能`/object/create/create`或类似的约定？

我正在尝试创建统一样式的 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:31:39.807

有很多方法可以对 URI 进行建模，您会在 Web 上得到很多令人困惑的引用，并不是说它们是错误的，而是它们中的大多数在它们自己的上下文中都是正确的。

[http://soaprobe.blogspot.co.uk/2012/10/soa-rest-service-naming-guideline.html](http://soaprobe.blogspot.co.uk/2012/10/soa-rest-service-naming-guideline.html)

[http://architects.dzone.com/news/common-rest-design-pattern](http://architects.dzone.com/news/common-rest-design-pattern)

在您的示例中，您可以通过这种方式对其进行建模。

**POST to: /object** - 这将创建对象

**PUT to: /object** -- 这将更新对象

**GET to: /object?id={0}** -- 这将通过 id 获取对象

**GET to: /object?name={0}** -- 这将按名称更新对象

# javascript - 单击图标时向计时器添加一秒

> ID：13051478
> 
> 赞同：2
> 
> 时间：2012-10-24T14:38:11.807
> 
> 标签：javascript, jquery

在我的数字游戏中，孩子们有 30 秒的时间来拍摄与给定问题相关的数字图标，例如“偶数”。我最近添加了两个时钟图标作为奖励。当他们射击蓝色的时，它会增加 3 秒，而射击红色的会增加 3 秒。

目前时钟被认为是错误的，但我是因为下面的 if 语句。有没有办法可以将时钟合并到这个点击功能中，还是我必须开始一个新的？另外我如何添加并从计时器中获取秒数？

```
 $(".character").click(function() {
    if ($(this).hasClass("wrong")) {
        $(this).effect("bounce", {
            times: 2,
            direction: 'left'
        }, 300, function() {
            $(this).slideUp("fast")
        });
        miss++;
        attempted++;
        $("#miss").html("Wrong: " + miss);
    } else {
        $(this).effect("explode", 300);
        hit++;
        attempted++;
        $("#hit").html("Right: " + hit);
    }
});
}); 
```

这是图标列表

```
<ul id="container">
    <li><div id="char1" class="character right" vaule="1"></div></li>
    <li><div id="char2" class="character right" vaule="2"></div></li>
    <li><div id="char3" class="character right" vaule="3"></div></li>
    <li><div id="char4" class="character right" vaule="4"></div></li>
    <li><div id="char5" class="character right" vaule="5"></div></li>
    <li><div id="char6" class="character right" vaule="6"></div></li>
    <li><div id="char7" class="character right" vaule="7"></div></li>
    <li><div id="char8" class="character right" vaule="8"></div></li>
    <li><div id="char9" class="character right" vaule="9"></div></li>
    <li><div id="char10" class="character right" vaule="0"></div></li>
    <li><div id="char11" class="character clock up"></div></li>
    <li><div id="char12" class="character clock down"></div></li>
</ul> 
```

小提琴：http: [//jsfiddle.net/cFKHq/13/](http://jsfiddle.net/cFKHq/13/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:52:43.880

您需要创建一个独立于动画的计时器事件。`setInterval`将根据指定的时间量调用自身，在本例中为 1000 毫秒。

```
var timeLeft = 30;

var timer = setInterval(function() {
    timeLeft--;
    if(timeLeft<1) {
        clearTimeout(timer)        
        alert("finished");
        return;        
    }
    $('#time').html(timeLeft);
},1000)

function adjTime(amt) {
    timeLeft = timeLeft + amt
   if(timeLeft<1) {
        clearTimeout(timer)        
        alert("finished");
        return;
    }
    $('#time').html(timeLeft);
} 
```

测试 HTML：

```
<div id="time"></div>
<input type="button" onclick="adjTime(3)" value="Add 3 sec" />
<input type="button" onclick="adjTime(-3)" value="Subtract 3 sec" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:01:05.343

您可以将计时器计为全局。

[http://jsfiddle.net/mdc5X/](http://jsfiddle.net/mdc5X/)

而不是计数，我将其声明为

```
var game = {
    count: 30,
} 
```

并将 count 的每个实例修改为 game.count

然后，你可以简单地做

```
game.count += 5 // to add time
game.count -+ 5 // to remove time 
```

当然，这并不安全（任何有控制台的人都可以简单地键入 game.count = 1000），但对于儿童游戏来说应该没问题。

这样做的正确方法是使用私人成员。你可以在这里阅读更多关于它的信息：(http://www.crockford.com/javascript/private.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:07:52.190

我玩过你的小提琴（分叉：http: [//jsfiddle.net/pUwKb/1/](http://jsfiddle.net/pUwKb/1/)），我想我让它工作了。我将 if 循环更改为以下内容，如果单击其中一个时钟，它会更改全局计数变量。如果没有找到时钟，它只会检查正确或错误。

```
$(".character").click(function() {
        if ($(this).hasClass("clock")) {
            if ($(this).hasClass("up")) {
                $(this).effect("explode", 300);
                count += 3;
            } else if ($(this).hasClass("down")) {
                $(this).effect("bounce", {
                    times: 2,
                    direction: 'left'
                }, 300, function() {
                    $(this).slideUp("fast")
                });
                count -= 3;
            }
            $('#timer').text(count);
        } else {
            if ($(this).hasClass("wrong")) {
                $(this).effect("bounce", {
                    times: 2,
                    direction: 'left'
                }, 300, function() {
                    $(this).slideUp("fast")
                });
                miss++;
                attempted++;
                $("#miss").html("Wrong: " + miss);
            } else {
                $(this).effect("explode", 300);
                hit++;
                attempted++;
                $("#hit").html("Right: " + hit);
            }
        }
    }); 
```

# ios - 与 jenkins 一起使用的 xcodebuild 测试命令不起作用

> ID：13051479
> 
> 赞同：6
> 
> 时间：2012-10-24T14:38:12.470
> 
> 标签：ios, xcode, command-line, xcode4.5

我有一个问题正在杀死我。就是这样：当我尝试在 xCode UI 中做所有事情时，我在 xCode 中有一个应用程序项目非常完美。我的意思是在我拥有的所有不同目标（3）、2 个应用程序和一个用于测试的目标中构建、运行、测试或其他任何内容。

当我尝试在 Jenkins 中将持续集成安装到我的系统时，问题就出现了。我需要在 shell 中为它执行一些命令。像这样的命令：

```
xcodebuild -project MYPROJECT -sdk iphonesimulator -scheme TESTS_SCHEME TEST_AFTER_BUILD=YES 
```

我也尝试过另一个，最后它也是一样的：

```
xcodebuild -project MY_PROJECT -target TEST_TARGET -sdk iphonesimulator  -configuration "Debug" 
```

然后是当问题出现时，终端显示以下内容：

```
....PrecompiledHeaders/MYLIBRARY-Prefix-hhjuztynfruquodlgqxroyfibfkh/MYLIBRARY-Prefix.pch.d
clang: error: invalid architecture 'arm' for deployment target '-mios-simulator-version-min=4.3'
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

** BUILD FAILED **

The following build commands failed:
    ProcessPCH /Users/nicoyuste/Library/Developer/Xcode/DerivedData/MY_APP-bxpgsdbefuawmiexyikbtvsatlsf/Build/Intermediates/PrecompiledHeaders/MYLIBRARY-Prefix-hhjuztynfruquodlgqxroyfibfkh/MYLIBRARY-Prefix.pch.pth MYLIBRARY-Prefix.pch normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
(1 failure) 
```

我一直在网上寻找（几乎在这里），但我发现的所有有同样问题的东西都对我不起作用。xCode 版本是 4.5，如果你这样做`xcodebuild -version`，我得到的就是这样，那很好。

我也尝试过更改头文件以及我发现的所有内容，但没有解决我的问题......

有什么建议么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:02:25.217

如果您使用的是自定义构建脚本，则可以将 -arch i386 传递给 xcodebuild

例如：

```
xcodebuild -project MY_PROJECT -target TEST_TARGET -sdk iphonesimulator -configuration "Debug" -arch i386 
```

（在上面的代码示例中一直滚动到右侧。相关标志是`-arch i386`）

应该强制它针对 i386 构建。但是，您需要确保 i386 在目标的 VALID_ARCHS 设置中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T00:24:29.893

万一有人再次遇到同样烦人的问题，我将在这里分享我的脚本：记住在包含 xcodeproj 文件的目录下运行此命令。

```
xcodebuild \
-project "full-path-to-your-xcodeproj-file" \
-target YOUR_TARGET \
-sdk iphonesimulator6.1 \
-arch i386 \
-configuration Debug \
VALID_ARCHS="armv6 armv7 i386" \
ONLY_ACTIVE_ARCH=NO \
TARGETED_DEVICE_FAMILY="1" \
clean install 
```

我修改了 TARGETED_DEVICE_FAMILY，因为我只为 iPhone 构建。如果您想为 iPhone 和 iPad 构建，请删除此行或替换为 TARGETED_DEVICE_FAMILY="1, 2"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-03T21:08:41.427

我看到人们仍然对此感到疑惑。我很久以前就发布了这个问题。我停止使用 xcodebuild，现在正在使用[xctool](https://github.com/facebook/xctool)，它工作得更好。该工具由 Facebook 开发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T17:39:04.233

在我的构建机器上升级到 Xcode 4.5 后，我遇到了类似的问题。就我而言，我有一个无法为 armv7s 构建的第三方库（还），因此，我将`Architectures`构建设置设置为`armv7`. 对于 Xcode 内部的单元测试、模拟器构建等工作正常。但是，当我进行命令行构建时，它失败并显示相同的消息。

我将我的更改`Architectures`为`armv7 i386`，现在它似乎在模拟器的命令行中构建得很好。

尽管 GUI 表明 Architectures of`Standard (armv7,armv7s)`仅包含这两个，但我很确定当您为模拟器构建时，那里隐藏着一个 i386。

最后，该设置现在适用于 Jenkins。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T14:51:12.803

我认为问题在于您正在为模拟器构建指定 arm 作为架构，尝试将其更改为 i386

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-27T07:17:54.803

我尝试了以下命令：xcodebuild -arch i386 -sdk iphonesimulator7.1 但失败并出现与clang类似的错误：错误：部署目标'-mios-simulator-version-min = 6.0'的无效架构'arm'

这是我解决的方法：

xcodebuild -arch i386 VALID_ARCHS="i386 armv7 armv7s" ONLY_ACTIVE_ARCH=NO -sdk iphonesimulator7.1

你需要让你正确设置 VALID_ARCHS 和 ONLY_ACTIVE_ARCH 并且它会起作用。您也可以直接在 Xcode 上进行这些设置。

# java - Java，听众建议，需要摇摆公司的建议 :(

> ID：13051484
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:38:21.463
> 
> 标签：java, swing, jframe

我的问题是，在哪里说“triangle.addActionListener(new ShapeAction());” 在我的代码中有一个错误说找不到 ShapeAction 符号，我在这里做错了什么？有人可以看看我的 If 语句，它的任务是：一旦单击菜单项，它就会从另一个类创建该形状的实例

```
public class MyFrame extends javax.swing.JFrame {
    public MyFrame() {
        // Create the menu
        JMenuBar topMenu = new JMenuBar();
        this.setJMenuBar(topMenu);

        //create the menu button "shapes"
        JMenu shapes = new JMenu("Shapes");
        topMenu.add(shapes);
        //Create the 3 shapes for the menu
        JMenuItem square = new JMenuItem("Square");
        square.addActionListener(new ShapeAction());

        JMenuItem circle = new JMenuItem("Circle");      
        circle.addActionListener(new ShapeAction());

        JMenuItem triangle = new JMenuItem("Triangle");
        triangle.addActionListener(new ShapeAction());

        //add shapes to menu
        shapes.add(circle);
        shapes.add(triangle);
        shapes.add(square);

        //add the menu
        setJMenuBar(topMenu);

        MyControlPanel pane = new MyControlPanel();
        getContentPane().add(pane);

        this.add(pane);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        // <snip>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                new MyFrame().setVisible(true);
                }
                });

        class ShapeAction implements ActionListener{
            public void actionPerformed(ActionEvent e){
                JMenuItem clickedMenu = (JMenuItem)e.getSource();

                if (clickedMenu.getText().equals("Square")){
                    //implement abstract methods                
                    MyShape aSquare = new ASquare();

                }
                else if (clickedMenu.getText().equals("Circle")){ 
                    //implement abstract methods
                    MyShape ACircle = new ACircle();

                }
                else if (clickedMenu.getText().equals("Triangle")){ 
                    //implement abstract methods
                    MyShape ATriangle = new ATriangle();

                }
            }          
        }
    } 
```

* * *

```
package assignment;

//import java.awt.FlowLayout;
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.JTextField;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class MyControlPanel extends javax.swing.JPanel {

JSlider slider;
JLabel sliderLabel;
JLabel sliderdimension;
JLabel blank;
JLabel dl;
JLabel area1;

/**
 * Creates new form MyControlPanel
 */
public MyControlPanel() {

    slider = new JSlider();
    slider.setValue(50);
    slider.addChangeListener(new MyChangeAction());
    slider.setMajorTickSpacing(10);
    slider.setPaintLabels(true);
    slider.setPaintTicks(true);
    slider.setBounds(300, 50, 100, 50);

    sliderLabel = new JLabel("50");
    blank = new JLabel("     ");
    sliderdimension = new JLabel("Shape Dimension:");

    JTextField boundary_length = new JTextField("Boundary Length");
    JTextField area = new JTextField("Area");

    dl = new JLabel("Boundary Length =");
    area1 = new JLabel("Area =");

    setLayout(new BorderLayout());

    JPanel sliderPanel = new JPanel();
    sliderPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 0));

    sliderPanel.add(sliderdimension);
    sliderPanel.add(sliderLabel);
    sliderPanel.add(slider);
    sliderPanel.add(dl);
    sliderPanel.add(boundary_length);
    sliderPanel.add(area1);
    sliderPanel.add(area);
    this.add(sliderPanel, BorderLayout.PAGE_END);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );
}// </editor-fold>                        
// Variables declaration - do not modify                     
// End of variables declaration                   

public class MyChangeAction implements ChangeListener {

    //complete code here
    public void stateChanged(ChangeEvent ce) {
        int value = slider.getValue();
        String str = Integer.toString(value);
        sliderLabel.setText(str);

    }
} // end class

    } 
```

* * *

```
package assignment;

public abstract class MyShape
 {

double thelength;
double thearea;

public abstract double computeBoundaryLength(double Length);

public abstract double computeArea (double Length);
 } 
```

* * *

```
package assignment;

public class ACircle extends MyShape {

@Override
public double computeBoundaryLength(double Length) 
{
    thelength=(2*Length*Math.PI);
return thelength;
}

@Override
public double computeArea(double Length) 
{
    thearea=(Length*Length*Math.PI);
    return thearea;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:40:52.587

`ShapeAction`您应该在`main`方法之外，在类内部引入内部`MyFrame`类。你创建一个 local`main`的方法类而不是那个。

只需将其移到`main`方法之外：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class MyFrame extends javax.swing.JFrame
{
    public MyFrame ()
    {
        // Create the menu
        JMenuBar topMenu = new JMenuBar ();
        this.setJMenuBar ( topMenu );

        //create the menu button "shapes"
        JMenu shapes = new JMenu ( "Shapes" );
        topMenu.add ( shapes );
        //Create the 3 shapes for the menu
        JMenuItem square = new JMenuItem ( "Square" );
        square.addActionListener ( new ShapeAction () );

        JMenuItem circle = new JMenuItem ( "Circle" );
        circle.addActionListener ( new ShapeAction () );

        JMenuItem triangle = new JMenuItem ( "Triangle" );
        triangle.addActionListener ( new ShapeAction () );

        //add shapes to menu
        shapes.add ( circle );
        shapes.add ( triangle );
        shapes.add ( square );

        //add the menu
        setJMenuBar ( topMenu );

        MyControlPanel pane = new MyControlPanel ();
        getContentPane ().add ( pane );

        this.add ( pane );
    }

    @SuppressWarnings( "unchecked" )
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents ()
    {

        setDefaultCloseOperation ( javax.swing.WindowConstants.EXIT_ON_CLOSE );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout ( getContentPane () );
        getContentPane ().setLayout ( layout );
        layout.setHorizontalGroup (
                layout.createParallelGroup ( javax.swing.GroupLayout.Alignment.LEADING ).addGap ( 0, 400, Short.MAX_VALUE ) );
        layout.setVerticalGroup (
                layout.createParallelGroup ( javax.swing.GroupLayout.Alignment.LEADING ).addGap ( 0, 300, Short.MAX_VALUE ) );

        pack ();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main ( String args[] )
    {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
        * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
        */
        try
        {
            for ( javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels () )
            {
                if ( "Nimbus".equals ( info.getName () ) )
                {
                    javax.swing.UIManager.setLookAndFeel ( info.getClassName () );
                    break;
                }
            }
        }
        catch ( ClassNotFoundException ex )
        {
            java.util.logging.Logger.getLogger ( MyFrame.class.getName () ).log ( java.util.logging.Level.SEVERE, null, ex );
        }
        catch ( InstantiationException ex )
        {
            java.util.logging.Logger.getLogger ( MyFrame.class.getName () ).log ( java.util.logging.Level.SEVERE, null, ex );
        }
        catch ( IllegalAccessException ex )
        {
            java.util.logging.Logger.getLogger ( MyFrame.class.getName () ).log ( java.util.logging.Level.SEVERE, null, ex );
        }
        catch ( javax.swing.UnsupportedLookAndFeelException ex )
        {
            java.util.logging.Logger.getLogger ( MyFrame.class.getName () ).log ( java.util.logging.Level.SEVERE, null, ex );
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater ( new Runnable ()
        {
            public void run ()
            {
                new MyFrame ().setVisible ( true );
            }
        } );
    }

    class ShapeAction implements ActionListener
    {
        public void actionPerformed ( ActionEvent e )
        {
            JMenuItem clickedMenu = ( JMenuItem ) e.getSource ();

            if ( clickedMenu.getText ().equals ( "Square" ) )
            {
                //implement abstract methods
                MyShape aSquare = new ASquare ();

            }
            else if ( clickedMenu.getText ().equals ( "Circle" ) )
            {
                //implement abstract methods
                MyShape ACircle = new ACircle ();

            }
            else if ( clickedMenu.getText ().equals ( "Triangle" ) )
            {
                //implement abstract methods
                MyShape ATriangle = new ATriangle ();

            }
        }
    }
} 
```

PS 而且您在代码末尾忘记了一个右括号。我通过...在示例中添加了它

# actionscript-3 - 将视频上传到 Facebook 时出现错误 #2038

> ID：13051486
> 
> 赞同：-2
> 
> 时间：2012-10-24T14:38:30.603
> 
> 标签：actionscript-3, facebook-graph-api, actionscript

使用这个简单的 AIR 应用程序将图像上传到我的 Facebook 帐户。 [http://code.google.com/p/facebook-actionscript-api/downloads/list](http://code.google.com/p/facebook-actionscript-api/downloads/list) 使用 MediaUpload_AIR 示例上传图像可以正常工作。

我通过添加对视频的浏览支持进行了修改。

视频似乎是根据进度事件上传的，但是当它们完成上传时，我收到错误 #2038 以及 http 状态代码 400。

无法弄清楚发生了什么。视频文件小于 5MB。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:51:23.693

找到了答案

使用视频定位 facebook graph API 时，您需要使用“me/videos”而不是“me/photos”

# php - 通过 ftp 在 netbeans 中同步项目

> ID：13051487
> 
> 赞同：1
> 
> 时间：2012-10-24T14:38:32.073
> 
> 标签：php, netbeans, frameworks, ftp

我有一个关于netbeans的问题。我创建了一个新的 netbeans php 项目，使用现有的 ftp 设置对其进行配置，然后它开始将所有文件下载到我的本地 hd，到目前为止一切正常。

但是因为我使用的是 php 框架，它会自动为我生成一些文件，所以它不会同步到我的本地高清。

所以我的问题是，只要我在 netbeans 中创建新文件它就会正常工作，但是当文件在 netbeans 之外生成时它不会。

如何配置 netbeans 以便通过 ftp 双向同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:43:21.113

据我所知，你不能。您必须手动右键单击要更新的项目/文件夹，然后单击下载或上传。请注意，这将覆盖接收方的任何更改（例如，下载文件将覆盖本地更改，上传文件将覆盖远程文件更改）。

或者，您可以启用“保存时上传文件”或“运行时上传文件”选项，但这仅适用于本地->远程同步方案。您可以通过右键单击您的项目，选择属性并按照下面的屏幕截图访问此选项。

![在此处输入图像描述](../Images/0b705e3caef0f1dffb82c74ab87487e7.png)

# asp.net-mvc - IIS 7.5 MVC 应用程序中的访问被拒绝

> ID：13051489
> 
> 赞同：1
> 
> 时间：2012-10-24T14:38:40.167
> 
> 标签：asp.net-mvc, security, iis-7.5

我正在使用曾经完美运行的测试服务器上的 MVC 应用程序。它在第二个应用程序用于登录的服务器上创建帐户。它使用凭证存储和 PrincipalContext 和 UserPrincipal 对象来创建这些帐户。

我已经有几个月甚至将近一年没有使用这个应用程序的测试版本了。现在，当我使用应用程序创建帐户时，出现以下错误：

> 访问被拒绝。ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。

我查看了匿名访问，但这个应用程序的生产版本也有一个拒绝匿名访问的规则，它工作正常。该应用程序即使在工作时也从未使用过模拟，而且我听说通常不建议授予对 ASP.NET 的显式访问权限。我可以通过 Visual Studio 使应用程序在本地工作，但部署到测试的版本继续给出此错误。我不会重新发布该网站进行测试，但也许这是唯一的选择？安全设置中是否有任何明显的（但对我而言不是）可能会导致这种情况发生变化？我仍在研究没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:45:05.550

您需要为您的 ApplicationPool Identity 提供一个具有适当访问级别的服务帐户。当您使用 Studio 时，它使用您的用户帐户进行访问，因此几乎是给定的。当应用程序安装到 IIS 上时，它会使用尽可能低的可用访问级别，但这还不够。不建议您打开它，但为此特定目的建立一个受限访问服务帐户将允许应用程序运行，而不必危及系统或个人帐户。

# asp.net - 追踪数据库连接问题

> ID：13051493
> 
> 赞同：7
> 
> 时间：2012-10-24T14:38:57.250
> 
> 标签：asp.net, coldfusion, error-handling, sql-server-2008-r2, database-connection

**背景**

我们在连接到单个数据库服务器的不同 Web 服务器上拥有许多 Web 应用程序。在过去的几个月里，我们注意到每隔一段时间，我们的 Web 服务器将无法连接到数据库服务器。

**我们的环境**

我们有几个不同的 Web 环境，一些运行 ColdFusion，另一些运行 .NET。.NET 应用程序既是 Web 窗体又是 MVC。它们跨越从 2.0 到 4.5 的多个版本。ColdFusion 和 .NET Web 服务器都是基于 Windows 的机器。ColdFusion 和 .NET Web 环境都是集群的，一些机器是物理的，而另一些是虚拟的。

我们的数据库服务器是 SQL Server 2008 r2。它包含多个数据库。每个应用程序都有自己的数据库用户，它连接到只允许它访问特定数据库的服务器。

**其他事实**

*   当我们注意到问题时，它们会以短时间的形式出现，持续时间从几秒钟到几分钟不等。
*   当我们注意到问题时，突发包含来自多个不同应用程序的错误，而不仅仅是一个应用程序。
*   当我们注意到问题时，突发包含来自不同 Web 环境的应用程序的错误。（这让我们认为我们可以排除应用程序本身的问题）
*   连接问题的爆发发生在白天和晚上的不同时间。它们并不总是在高使用率期间。
*   我们已经监控了诸如用户连接数、内存、IO、CPU 使用率等内容......我们没有看到峰值或任何其他可能指向问题的东西。
*   我们已经在 web 和 db 服务器上安装了 wireshark，希望能在没有任何成功的情况下解决问题。

**问题**

1.  有人对我接下来应该去哪里有建议吗？
2.  是否存在可能导致此问题的数据库属性？
3.  有没有办法以更好的方式“监控”数据库和 Web 服务器之间的连接？
4.  应用程序端有什么可以做的以更好地了解正在发生的事情吗？

**应用程序捕获的错误**

*   .NET 错误
    *   建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）
    *   超时已过。在操作完成之前超时时间已过或服务器没有响应。
    *   从服务器接收结果时发生传输级错误。（提供者：TCP 提供者，错误：0 - 信号量超时期限已过。）
    *   超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。
*   ColdFusion 错误
    *   执行数据库查询时出错。与主机的 TCP/IP 连接失败。java.net.ConnectException: Connection timed out: connect
        第38行出现错误。
    *   执行数据库查询时出错。Connection reset by peer: socket write error
        错误发生在第 91 行。
    *   执行数据库查询时出错。尝试建立连接超时
        错误发生在第 38 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:57:05.933

在 CF 中，我曾经遇到过您所看到的问题。我在一台服务器上有 CF，在另一台服务器上有 sql 2008 r2。我会看到您在下面发布的 CF 错误。为了帮助追踪到网络错误，我写了这样的东西：

1）创建了一个down.bat

```
tracert serverip 
```

2）然后我`<cftry><cfcatch>`在查询周围加上一个。

当查询生成错误时，我将执行

```
<cfexecute name="C:\path\to\down.bat" variable="log" timeout="60" />
    <cfmail to="ME" from="Server" subject="SQL DOWN">

    Server Debugging Info:
    ------------------------------------------------------------    
    #now()#

    #cfcatch.Detail#

    #cfcatch.Message#

    #log#        

    </cfmail>
</cfexecute> 
```

这帮助我解决了最终成为数据中心硬件的情况。

# php - 使用 php 中的正则表达式替换两个字符之间的所有内容（包括两个字符）

> ID：13051505
> 
> 赞同：1
> 
> 时间：2012-10-24T14:39:12.147
> 
> 标签：php, regex

我正在尝试使用 php 中的正则表达式从字符串中删除两个字符之间的所有内容，包括这两个字符。我尝试使用[此页面](https://stackoverflow.com/questions/7462115/regex-how-to-get-rid-of-everything-between-these-two-brackets-including-the-b)上的答案，所以现在我的 php 文件中有一行如下所示：

```
$message = preg_replace('\[[^\]]*]', '', $message); 
```

问题是我收到此错误：

> 警告：preg_replace() [function.preg-replace]：分隔符不能是字母数字或反斜杠

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:39:56.757

PHP中的正则表达式需要分隔：

```
$message = preg_replace('/\[[^\]]*]/', '', $message); 
```

查看[此文档](http://www.php.net/manual/en/regexp.reference.delimiters.php)。

`]`另外作为旁注，如果它是字符类中的第一个字符，则不需要转义结束：

```
$message = preg_replace('/\[[^]]*]/', '', $message); 
```

（在这种情况下是否更具可读性是有争议的。但很高兴知道。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T19:48:37.400

这是我的解决方案：让左右标记都是引号字符。此 reg expr 将查询字符串拆分为三个原子，这些原子将根据需要重新排列到输入字符串中。希望能帮助到你。

```
var _str = "replace 'something' between two markers" ;
document.write( "INPUT : " + _str + "<br>" );
_str = _str.replace( /(\')(.*?)(\')/gi, "($1)*some string*($3)" );
document.write( "OUTPUT : " + _str + "<br>" ); 
```

# performance - 计算列索引

> ID：13051507
> 
> 赞同：6
> 
> 时间：2012-10-24T14:39:14.220
> 
> 标签：performance, sql-server-2005, calculated-columns

我有一个`Com_Main`包含 column的表`CompanyName nvarchar(250)`。它的平均长度为 19，最大长度 = 250。

为了提高性能，我想添加一个`left20_CompanyName`包含前 20 个字符的计算列`CompanyName`：

```
alter table Com_main 
add left20_CompanyName as LEFT(CompanyName, 20) PERSISTED 
```

然后我在此列上创建索引：

```
create index ix_com_main_left20CompanyName 
on Com_main (LEFT20_CompanyName) 
```

所以当我使用

```
select CompanyName from Com_Main
where LEFT20_CompanyName LIKE '122%' 
```

它使用这个非聚集索引，但是当查询是这样的：

```
select CompanyName from Com_Main 
where CompanyName LIKE '122%' 
```

它使用全表扫描，并且不使用此索引。

所以问题：

是否可以让 SQL Server 在上次查询中的可计算列上使用此索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:04:11.793

不，MySQL[支持 varchar 列的部分索引，](http://fernandoipar.com/2009/08/12/indexing-text-columns-in-mysql/)但 MS SQL Server 不支持。

您也许可以通过分区加快表扫描，但我不知道 SQL Server 在这方面有多聪明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:14:26.250

我认为 SQL 查询引擎不会意识到 LEFT20_CompanyName 列如此巧妙地映射到 CompanyName 列 - 因为计算列几乎可以使用任何公式，所以它无法知道另一列上的索引实际上是在这种情况下很有用。

为什么不在 CompanyName 列上创建索引？那么，如果该字段中的一些值比平均值长怎么办？如果您直接在列上创建它并完全避免计算列，我认为它将在两种情况下都使用索引。

也许我遗漏了一些东西，但我不确定您通过仅对前 20 个字符执行计算列来获得什么。

# android - Android Back-Button 在 textarea 中退出 Phonegap-app

> ID：13051508
> 
> 赞同：1
> 
> 时间：2012-10-24T14:39:17.243
> 
> 标签：android, cordova

在我的 Phonegap 应用程序中，我处理 Android 的后退按钮，`document.addEventListener("backbutton", mysuperawesomecallback, false)`到目前为止，这工作正常。但是，当我在文本字段中书写时，第一次单击后退按钮会隐藏键盘，第二次单击会退出应用程序。当我关注文本字段时，它再次正常工作。

当我在文本字段中时，如何防止退出应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T05:44:33.737

将以下行添加到源自 DroidGap 的主要活动中

```
@Override
public void onBackPressed() {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T13:33:07.077

我相信您实际上遇到了 PhoneGap 中的错误。我们已经在很快发布的 PhoneGap 2.2.0 中修复了这个问题。

# ios6 - 使用 Autolayout 将 UITextField 定位在 UILabel 旁边

> ID：13051510
> 
> 赞同：0
> 
> 时间：2012-10-24T14:39:30.727
> 
> 标签：ios6, autolayout

当 UITableView 进入编辑模式时，我想使用自动布局将 UITextField 放置在 cell.textLabel 旁边。我的代码工作正常，但我在日志中收到一条消息，指出必须打破一些现有的约束。

```
UILabel *label = cell.textLabel;
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(0.0, 0.0, 400.0, 22.0)];
textField.placeholder = cell.textLabel.text;
textField.translatesAutoresizingMaskIntoConstraints = NO;
textField.text = text;
[cell.contentView addSubview:textField];
[cell addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[label]-[textField]-|"
                                                             options:0
                                                             metrics:nil
                                                               views:NSDictionaryOfVariableBindings(label,textField)]];
[cell addConstraint:[NSLayoutConstraint constraintWithItem:textField attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:label attribute:NSLayoutAttributeCenterY multiplier:1.0 constant:0]]; 
```

日志消息是：

```
(
"<NSAutoresizingMaskLayoutConstraint:0x1066abc0 h=--& v=--& H:[UITableViewCellContentView:0x9a7d070(934)]>",
"<NSAutoresizingMaskLayoutConstraint:0x10660a90 h=--& v=--& H:[UILabel:0x9a93ef0(914)]>",
"<NSLayoutConstraint:0x1065ea60 H:[UITextField:0x1065c660]-(NSSpace(20))-|   (Names: '|':UITableViewCellContentView:0x9a7d070 )>",
"<NSAutoresizingMaskLayoutConstraint:0x10660a50 h=--& v=--& UILabel:0x9a93ef0.midX == + 467>",
"<NSLayoutConstraint:0x10669280 H:[UILabel:0x9a93ef0]-(NSSpace(8))-[UITextField:0x1065c660]>" 
```

)

```
Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x10669280 H:[UILabel:0x9a93ef0]-(NSSpace(8))-[UITextField:0x1065c660]> 
```

我认为这是由与 cell.textLabel 宽度的限制冲突引起的。所以我的问题是，是否有另一种方法可以让标准表格视图单元格中的文本字段从 textLabel 宽度延伸到单元格的末尾而不会破坏默认约束。我觉得我很近，但我不能完全到达那里。我已经在谷歌上搜索了三个星期，但我无法完全理解这一点。我还看过关于自动布局的 WWDC 视频（也许我只是个白痴）。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:50:34.403

我没有尝试操纵 Apple 的标准单元，而是冒险编写了自己的 UITableViewCell 子类来模仿 UITableViewCellStyleValue1。当 tableview 进入编辑模式时，用最简单的术语来说，我隐藏值标签并显示文本字段。对于那些可能在同一件事上苦苦挣扎的人，我发布了一些代码来帮助您入门：

```
@interface NXAlphaNumericTextFieldCell : UITableViewCell<UITextFieldDelegate,NumberKeyboardDelegate>

@property (strong, nonatomic)   UITextField *inputTextField;
@property (strong, nonatomic)   UILabel *titleLabel;
@property (strong, nonatomic)   UILabel *valueLabel;

@property (strong, nonatomic)   NSArray *xTitleLabelConstraints;
@property (strong, nonatomic)   NSArray *xTextFieldConstraints;
@property (strong, nonatomic)   NSArray *xValueLabelConstraints;

@end 
```

以及实现中的一些方法：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        self.titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 44.0f)];
        self.titleLabel.translatesAutoresizingMaskIntoConstraints = NO;
        self.titleLabel.font = [UIFont boldSystemFontOfSize:16.0f];
        self.titleLabel.backgroundColor = [UIColor clearColor];

        self.valueLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 44.0f)];
        self.valueLabel.translatesAutoresizingMaskIntoConstraints = NO;
        self.valueLabel.textColor = [UIColor colorWithRed:81.0/255.0 green:102.0/255.0 blue:145.0/255.0 alpha:1.0];
        self.valueLabel.backgroundColor = [UIColor clearColor];

        self.inputTextField = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 100, 44.0f)];
        self.inputTextField.translatesAutoresizingMaskIntoConstraints = NO;
        self.inputTextField.autocapitalizationType = UITextAutocapitalizationTypeWords;
        self.inputTextField.autocorrectionType = UITextAutocorrectionTypeYes;
        self.inputTextField.clearButtonMode = UITextFieldViewModeAlways;
        self.inputTextField.delegate = self;

        [self.contentView addSubview:self.valueLabel];
        [self.contentView addSubview:self.titleLabel];
        [self.contentView addSubview:self.inputTextField];

        UILabel *textLabel = self.titleLabel;
        NSDictionary *labelTextFieldViewsDictionary = NSDictionaryOfVariableBindings(textLabel);
        self.xTitleLabelConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[textLabel]"
                                                                             options:0
                                                                             metrics:nil
                                                                               views:labelTextFieldViewsDictionary];
        UITextField *textfield = self.inputTextField;
        labelTextFieldViewsDictionary = NSDictionaryOfVariableBindings(textLabel, textfield);
        self.xTextFieldConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[textLabel]-50-[textfield]-|"
                                                                                 options:0
                                                                                 metrics:nil
                                                                                   views:labelTextFieldViewsDictionary];
        UILabel *valueLabel = self.valueLabel;
        labelTextFieldViewsDictionary = NSDictionaryOfVariableBindings(valueLabel);
        self.xValueLabelConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:[valueLabel]-|"
                                                                        options:0
                                                                        metrics:nil
                                                                          views:labelTextFieldViewsDictionary];

        [self setNeedsUpdateConstraints];
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
    if (self.isEditing) {
        [self.inputTextField becomeFirstResponder];
    }
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    [self addConstraints:self.xTitleLabelConstraints];
    if (editing) {
        if (self.inputType == kCellInputTypeAlphaNumeric) {
            self.inputTextField.keyboardType = UIKeyboardTypeAlphabet;
        } else if (self.inputType == kCellInputTypeEmail) {
            self.inputTextField.keyboardType = UIKeyboardTypeEmailAddress;
        } else if (self.inputType == kCellInputTypePhoneNumber) {
            self.inputTextField.keyboardType = UIKeyboardTypeNamePhonePad;
        } else {
            if (!self.numberKeyboard) {
                self.numberKeyboard = [[NumberKeyboard alloc] initWithNibName:@"NumberKeyboard" bundle:nil];
                self.numberKeyboard.textField = self.inputTextField;
                self.numberKeyboard.showsPeriod = YES;
                self.numberKeyboard.delegate = self;
            }
            self.inputTextField.inputView = self.numberKeyboard.view;
        }
        self.inputTextField.text = self.valueLabel.text;
        self.inputTextField.placeholder = self.titleLabel.text;
        self.valueLabel.hidden = YES;
        self.inputTextField.hidden = NO;

        [self removeConstraints:self.xValueLabelConstraints];
        [self addConstraints:self.xTextFieldConstraints];
    } else {
        [self.inputTextField resignFirstResponder];
        self.inputTextField.hidden = YES;
        self.valueLabel.hidden = NO;
        [self removeConstraints:self.xTextFieldConstraints];
        [self addConstraints:self.xValueLabelConstraints];
    }
}

- (void)updateConstraints
{
    [super updateConstraints];

    if (self.editing) {
        [self removeConstraints:self.xValueLabelConstraints];
        [self addConstraints:self.xTextFieldConstraints];
    } else {
        [self removeConstraints:self.xTextFieldConstraints];
        [self addConstraints:self.xValueLabelConstraints];
    }
} 
```

# compact-framework - 使用 .NET CF 应用程序从 Visual Studio 部署外部文件

> ID：13051513
> 
> 赞同：0
> 
> 时间：2012-10-24T14:39:33.163
> 
> 标签：compact-framework, .net-cf-3.5

我正在开发一个 .NET CF 3.5 应用程序。应用程序使用的外部文件\程序集很少。这些文件不是项目的一部分，因此在我部署项目时进行调试时，这些外部文件不会部署到设备上。有什么方法可以将这些文件与项目一起部署而不将它们包含在项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:45:11.627

如果不告诉 Studio 要部署哪些文件，就无法让 Studio 部署任意文件。告诉 Studio 部署文件的唯一方法是将文件添加到项目（作为资源或内容文件）或添加对它们的引用（对于 .NET 程序集）。

# c# - 无法在 Visual Studio 2012 中编译 TypeScript 文件

> ID：13051515
> 
> 赞同：14
> 
> 时间：2012-10-24T14:39:37.483
> 
> 标签：c#, javascript, visual-studio, visual-studio-2012, typescript

我下载并安装了 VS 2012 的 TypeScript 扩展，我得到了我的第一个示例编译**我下载并安装了 VS 2012 的 TypeScript 扩展，通过手动将 ts 文件拖到 tsc.exe 文件上**因为没有其他方法可以编译该文件。

我不想每次要调试页面时都手动执行此操作！我在网上阅读了大约 5 篇文章，但没有一个解决方案有效。我尝试在 Windows 中将 TypeScript 编译器添加到 PATH，我尝试通过 Nuget Package Manager 下载和安装 Sholo 的东西，我尝试了这些页面：

1.  [在 cshtml 文件中使用 TypeScript](https://stackoverflow.com/questions/12695451/using-typescript-in-cshtml-files)
2.  [Visual Studio TypeScript 选项](https://stackoverflow.com/questions/12710691/visual-studio-typescript-options)
3.  [使用 Visual Studio 调试 TypeScript 代码](https://stackoverflow.com/questions/12711826/debugging-typescript-code-with-visual-studio)
4.  [无法使用 tsc 节点模块编译打字稿](https://stackoverflow.com/questions/12758228/cannot-compile-typescript-using-tsc-node-module)
5.  [打字稿 - Visual Studio - d3](https://stackoverflow.com/questions/12887929/typescript-visual-studio-d3)
6.  [Visual Studio 2012 TypeScript 项目在编译期间忽略两个文件](https://stackoverflow.com/questions/13040793/visual-studio-2012-typescript-project-ignoring-two-files-during-compile)
7.  [TypeScript / Visual Studio 2012 / 编译参数](https://stackoverflow.com/questions/12730490/typescript-visual-studio-2012-compilation-parameters)
8.  [在现有的 Visual Studio 网站项目中使用 TypeScript](https://stackoverflow.com/questions/12867390/using-typescript-in-an-existing-visual-studio-web-site-project)
9.  [Visual Studio TypeScript 选项](https://stackoverflow.com/questions/12710691/visual-studio-typescript-options)
10.  [在 Visual Studio 中编译生成的文件](https://stackoverflow.com/questions/10374444/compile-generated-files-in-visual-studio)

没有一个解决方案奏效。

我什至已经下载并安装了 Visual Studio 的 Web Essentials 插件并转到选项菜单，然后选择“在 Build = True 时编译所有 TypeScript 文件”和“在 Save = True 时编译 TypeScript”——但没有任何效果。

我已经阅读了整个 TypeScript 网站、规范，甚至他们在 codeplex 网站上的讨论选项卡。

`.ts`当我保存对文件的更改**或**按 F5/Debug/Build 时，如何让 TypeScript 编译？

*除非绝对必要，否则我真的不想要任何第三方脚本/插件等。我见过其中的几个，只是……没有意义。我还不如只写纯 JavaScript。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T12:21:48.240

您必须确保 .ts 文件的 BuildAction 必须是 TypeScriptCompile。我已将这些行添加到 (.csproj) 项目文件的末尾。（在关闭项目标签之前）它似乎工作。

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
<TypeScriptTarget>ES3</TypeScriptTarget>
<TypeScriptIncludeComments>true</TypeScriptIncludeComments>
<TypeScriptSourceMap>true</TypeScriptSourceMap>
<TypeScriptModuleKind>AMD</TypeScriptModuleKind>
 </PropertyGroup>
<PropertyGroup Condition="'$(Configuration)' == 'Release'">
<TypeScriptTarget>ES3</TypeScriptTarget>
<TypeScriptIncludeComments>false</TypeScriptIncludeComments>
<TypeScriptSourceMap>false</TypeScriptSourceMap>
<TypeScriptModuleKind>AMD</TypeScriptModuleKind>
</PropertyGroup>
 <Import Project="$(VSToolsPath)\TypeScript\Microsoft.TypeScript.targets" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T14:48:17.733

当我将 .js 文件重命名为 .ts 时，我遇到了类似的问题。您必须右键单击并将新的 TypeScript 文件添加到您的项目中，以便您的 .csproj 识别应该在此 .ts 文件上使用 TypeScript 编译器。

当您看到展开 .ts 文件的箭头时，您将知道它是正确的。

![在此处输入图像描述](../Images/82b23873ec5cadb3efed5b8bd03351a4.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T16:36:33.280

如果将文件更改为`.js`文件`.ts`，可以转到 Visual Studio 中的属性面板，将 Build Action 更改为 TypeScriptCompile。这是您更改文件时缺少的内容。这可以使您免于删除和重新添加文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-03T12:27:06.603

**插头**

我创建了一个 NuGet 包，它向您的项目添加了一个 afterbuild 目标，因此所有包含的 ts 文件都被编译为 js。

> 安装包 TypeScript.Compile

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T11:25:05.113

我有同样的问题。我无法将新的 .ts 文件添加到项目中。从 .js 重命名为 .ts 文件后未编译。它甚至没有在命令行中使用 tsc 编译。

但！在 Windows 资源管理器中重新创建文件后，它已成功编译。在脚本文件夹中的 Windows 资源管理器（不是 Visual Studio）中手动创建文件并将其包含到项目中后 - 所有工作。我无法检测到这两个文件之间的更改。但是，如果您在资源管理器中创建文本文件，请将其重命名为 .ts，然后将其包含在项目中并将文件的 Build Action 设置为 TypeScriptCompile - 它可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-22T12:23:22.570

请检查您是否有无效的 TypeScript。有一些 TypeScript 错误未显示在错误列表中，但它们会阻止 TypeScript Compile-On-Save 并`Output generation failed`在 Visual Studio 状态栏中显示一条消息。

这些是可能导致此问题的 TypeScript 错误：

*   `export`生成一个不在模块内部的类（v 0.9.5）。

如果还有更多此类错误，请告诉我，我会在此处添加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T12:50:33.137

我有同样的问题。我更新了 Web Essentials 扩展并解决了问题。如果您有 Web Essentials 扩展，您可以尝试一下。

# java - intellij v12 leda，jsLint 在我的 JSP 中发现 javascript 错误

> ID：13051526
> 
> 赞同：0
> 
> 时间：2012-10-24T14:40:11.943
> 
> 标签：java, jsp, intellij-idea, jslint

它在我的 JSP 文件中错误地检测到 jsLint 错误，但它不应该因为它不是 javascript：

![在此处输入图像描述](../Images/73c77ef1dc93d279b9719f09c8c8a5dc.png)

# ruby-on-rails - How to redirect two different routes by single controller?

> ID：13051528
> 
> 赞同：1
> 
> 时间：2012-10-24T14:40:16.343
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

I have two same routes `resources :errors` with different url's in different folders inside the `routes.rb`.

```
Routes:
---------

namespace :enr do
  namespace :locations do #( url: enr/locations/:location_id/errors)
    resources: errors 
  end

  namespace :rds do
    resources :errors #(url: enr/rds/errors)
  end
end

controller:
------------

I have a controller for `enr/rds/errors` only. 
```

how to change these two url's by `IF` condition. For example,

if location_id is nil i need to show this #`(url: enr/rds/errors)` else I need to show `(url: enr/locations/:location_id/errors)` end

So it will change depends upon the `location_id`. Where should i write this condition to change the url's by the `location_id`. Any Example would be more appreciated. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:50:16.220

```
<% if location_id.nil? %>
  <%= link_to 'nil location_id', enr_locations_errors %> 
<% else %>
  <%= link_to 'not nil location_id', enr_rds_errors %> 
<% end %> 
```

`enr_locations_errors` and `enr_lrds_errors` are not the only paths available. You can use one of the seven default routes (`index`, `new`, `create`, `show`, `edit`, `update`, `destroy`) or add a custom one. Check `rake routes` and look [here](https://stackoverflow.com/a/4519990/643500)

# vb.net - 日期格式不正确的日期不存在

> ID：13051532
> 
> 赞同：1
> 
> 时间：2012-10-24T14:40:22.340
> 
> 标签：vb.net, validation, date, format

我有以下代码将日期（来自数据库条目）转换为正确的格式：

```
Dim blah As Date = "02/29/2001"
MsgBox(Format(blah, "yyyy-MM-dd")) 
```

但是，它一直告诉我：

**从字符串“02/29/2001”到类型“日期”的转换无效。**

现在我看到 2001 年 2 月 29 日没有第 29 天——那一年只有 28 天。那么我将如何检查这一点，以便在未正确输入数据库表中的日期时不会引发错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:45:13.297

您可以使用`IsDate()`

如果您的字符串或日期可以转换为日期，则此函数返回 true。

像这样

```
Dim dateAndTime As String
dateAndTime = "March 15, 1981 10:22 AM"
noDate = "Hello"
dateCheck = IsDate(dateAndTime)
dateCheck = IsDate(noDate) 
```

这将为第一个返回 true，为第二个返回 false

此外，此功能适用于 29、30 或 31 天的月份，如您的情况

[这](http://msdn.microsoft.com/en-us/library/00wf8zk9%28v=vs.80%29.aspx)是msdn链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:45:53.167

您可以`TryParseExact`改用，例如：

```
Dim enUS As New CultureInfo("en-US") 
Dim dateString As String 
Dim blah As Date 

' Parse date with no style flags.
dateString = "02/29/2001"
If Date.TryParseExact(dateString, "MM/dd/yyyy", enUS, DateTimeStyles.None, dateValue) Then
   MsgBox(Format(blah, "yyyy-MM-dd"))

Else
   MsgBox(String.Format("'{0}' is not in an acceptable format.", dateString))
End If 
```

# c# - 将留在后台并通过 cmd 参数接收命令的 C# 应用程序？

> ID：13051537
> 
> 赞同：0
> 
> 时间：2012-10-24T14:40:33.497
> 
> 标签：c#, process, cmd, command-line-arguments

我正在尝试使用 C# 在 Visual Studio 中制作一个应用程序，该应用程序将保留在后台，然后其他程序可以仅使用一个参数启动该应用程序，并且它将使用该参数弹出一个通知（另一种形式）。

我需要该应用程序仅由一个进程组成，我不需要我的应用程序的多个进程/实例。我只是希望它留在后台，当有人使用参数启动应用程序时，例如`MyApp.exe`“这是一个通知”，它只会弹出另一个表单，其中包含该 cmd 参数，它不会启动应用程序作为另一个进程。

我希望你明白我的意思，如果你不明白，我可以解释更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:53:47.767

你想要的更多的是一份工作[Windows 服务](http://msdn.microsoft.com/en-us/library/d56de412%28v=vs.80%29.aspx)的工作。Windows 服务是一个没有 GUI 界面的程序，它位于后台并执行某些操作。该服务通常在计算机启动时启动并保持运行直到计算机关闭。

其他程序与您的服务之间的通信可以使用[Windows Communication Foundation](http://msdn.microsoft.com/en-us/library/vstudio/ms735119%28v=vs.90%29.aspx)（或 WCF）来完成。WCF 允许使用一个或多个应用程序在两个应用程序之间进行通信[WCF 允许使用一种或多种传输](http://msdn.microsoft.com/en-us/library/ms733769.aspx)。

在不使用 WCF 的情况下，另一种“通信”方式（尽管效率可能较低）是通过数据库。您的服务可以监视表中添加的行，并且您的主程序可以在需要发生某些事情时添加这些行。选择归结为您的最终目标是什么。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:57:11.227

考虑使用[命名管道](http://www.switchonthecode.com/tutorials/dotnet-35-adds-named-pipes-support)(System.IO.Pipes) 或 WCF 的[`System.ServiceModel.NetNamedPipeBinding`](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx). 其他选项是：旧的 .NET Remoting 或 TCP/IP 套接字。

“后台应用”可以是 Windows 服务，但它不允许向用户显示任何 GUI 表单，因为后台服务没有任何表单。

有关创建 Windows“后台”服务的简单方法，请参阅[OpenSource TopShelf 项目](http://topshelf-project.com/)。

# android - 在上下文中传递元数据

> ID：13051538
> 
> 赞同：0
> 
> 时间：2012-10-24T14:40:38.357
> 
> 标签：android, facebook, metadata, android-context

在最新的 Facebook SDK (3.0) 中，Session 构造函数中有一个检查，它试图从与上下文/包/应用程序关联的元数据中提取应用程序 ID。

```
ApplicationInfo ai = context.getPackageManager().getApplicationInfo(
                context.getPackageName(), PackageManager.GET_META_DATA);
        if (ai.metaData != null) {
            System.out.println("So depressed " + ai.metaData.getString(APPLICATION_ID_PROPERTY));
            return ai.metaData.getString(APPLICATION_ID_PROPERTY);
        } 
```

如果此数据为 null，则 Session 构造函数将失败并引发空指针错误。

在实例化 Session 对象的活动中，我尝试填充此元数据：

```
ai = this.getPackageManager().getApplicationInfo(
                    this.getPackageName(), PackageManager.GET_META_DATA);
            if (ai.metaData != null) {
                ai.metaData.putString(Session.APPLICATION_ID_PROPERTY, AppConfig.getFacebookAppId()+"");
            } 
```

在我尝试实例化 Session 对象之前，我已经验证了元数据已正确设置。但是，在 Session 从其构造函数调用的方法中，元数据为空。

我知道两件事：上下文的内存地址是相同的，所以它看起来是同一个对象。但是内存地址为

```
this.getPackageManager().getApplicationInfo(
                        this.getPackageName(), PackageManager.GET_META_DATA); 
```

似乎有所不同。我不确定这是否有任何意义。

我最终的问题是这个元数据可以像这样传递吗？如果是这样，这里有什么失败？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2015-06-10T18:47:53.040

OP写道：

> 你不能在上面那样做。您可以做的只是清单中元数据标签中的值。`<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/facebookAppId" />`

@李明写道：

> 这是对的。如果您已经在代码中提供了应用程序 ID，那么您可以通过 Session.Builder 将其传入。元数据只是一种便利机制。

# asp.net - 设置一个类来存储可以在整个应用程序中使用的常量值

> ID：13051539
> 
> 赞同：0
> 
> 时间：2012-10-24T14:40:40.220
> 
> 标签：asp.net

我正在尝试在控件的类文件中声明变量，并在加载本身时在 ascx 文件中使用它们但没有成功（第一次做 asp.net 应用程序）

例如：

在.cs

```
 public void OnInit()
    {
        int username = "John";
    } 
```

然后在 ascx 中：

```
<a href="<%=username %>">test </a> 
```

但这会给我带来错误，即未定义用户名。我也尝试过 Page_Load，Init 也没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:48:45.503

用户名仅在 INIT/LOAD 事件中可见，为了像您一样查看它，您必须创建一个公共属性，然后从 Load/Init 事件中分配它。

```
public string username;

public void Page_Load(object sender, EventArgs e)
{
   username = "john smith";
} 
```

* * *

**编辑 - 基于更新的评论**

页面.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    NameControl1.strUsername = "John";
} 
```

页面.aspx

```
<%@ Register Src="~/Name.ascx" TagName="Name" TagPrefix="TEST" %>
<TEST:Name ID="NameControl1" runat="server" /> 
```

名称.ascx.cs

```
public int strUsername;
private int Username
{
    get{return strUsername;}
    set{strUsername = value;}
}
protected void Page_Load(object sender, EventArgs e)
{
    label1.Text = Username;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:46:33.850

对象发送者，EventArgs eUse 公共属性。

```
 public string username{set;get;}
    public void Page_Load()
    {
        username = "John";
    }    
In  ascx :

  < a href = "<%=username %>">test < /a> 
```

# c# - 为什么 dsofile.dll 还需要 Office 安装？

> ID：13051543
> 
> 赞同：2
> 
> 时间：2012-10-24T14:40:48.937
> 
> 标签：c#, vsto, office-interop

我使用 dsofile.dll 组件编写了一小段代码，用于在将文件上传到 Web 服务器后修改文档属性（设置 guid 以将文件链接到数据库记录）。我从这里获取了组件和说明：http: [//support.microsoft.com/kb/224351](http://support.microsoft.com/kb/224351)

据我了解，它不使用 Office 来修改属性。我实现了它并在我的 32 位和 64 位机器上进行了测试（网络服务器在 32 位模式下运行）并且一切正常。当时我很开心。但是在将它部署到生命机器之后，它并没有将属性保留在我的值上，但也不要抛出任何错误！

这是一些代码来看看我做了什么：

```
public void SetProperty(string filename, string property, string value)
{
  m_oDocument.Open(filename);

  var oProp = m_oDocument.CustomProperties;
  try
  {
    oProp.Add(property, value);
  } catch(Exception)
  {
    foreach (CustomProperty cProp in oProp.Cast<CustomProperty>().Where(cProp => cProp.Name == property))
    {
      cProp.set_Value(value);
    }
  }
  if ( Debug)
  {
    m_spy.Spy("filename: " + filename);
    m_spy.Spy("filename modified: " + m_oDocument.IsDirty);
  }

  if ( m_oDocument.IsDirty ) m_oDocument.Save();
  m_oDocument.Close();

  if ( Debug ) m_spy.Spy(GetProperty(filename, property));

} 
```

所以我开始实现调试代码，整天阅读网络上的文章。我最终在服务器上安装了 Office 2010 32 位。

然后在我得到一个新错误之后：

```
The document is not an OLE file, and does not support extended document properties 
```

奇怪的是，错误仅针对`dotx`, `xlsx`, ff，而不针对`doc`, `xls`, ff。

在我安装了 Office 2010 的所有可用更新并重试之后。然后它按我的意愿工作，并保留我在所有文件的上传页面上设置的属性。

因此，必须在服务器上安装 Office 2010 并不是我所期望的 :)

*   有谁知道 dsofile.dll 需要在没有填充安装的情况下工作的 Office 安装的哪些组件？
*   换句话说：我可以复制一堆文件并在服务器上手动“注册”它们吗？
*   还是我误解了什么，这是我的代码？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:58:47.223

> 奇怪的是，错误仅适用于 dotx、xlsx、ff，但不适用于 doc、xls

这是设计使然。dsofile 示例只允许访问使用 OLE 结构化存储容器格式的文件。OLE 通常是一种死技术，Office 是最后仍然支持它的 Microsoft 产品之一。但自 2007 年版以来，这种支持已经迅速消失。.dotx 和 .xlsx 文件格式也没有了，它们是遵循[OpenXML 规范](http://en.wikipedia.org/wiki/Office_Open_XML)的压缩 XML 文件。您无法使用 dsofile 访问它们。

你需要去购物以获得更好的解决方案，有很多。

# python - Tastypie：GET 身份验证和 POST 匿名身份验证

> ID：13051544
> 
> 赞同：10
> 
> 时间：2012-10-24T14:40:50.743
> 
> 标签：python, django, api, rest, tastypie

我使用 Django/Tastypie 来管理我的用户集合。

是否可以允许匿名用户在 API 中发布（在某个端点创建新用户时）并将经过身份验证的用户限制为只获取他们自己的用户，而不是所有用户？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T20:24:49.093

我发现最简单的做法是继承我正在使用的 Authentication 类。只需在方法为 POST 时 覆盖`is_authenticated`要返回的方法。`True`

```
class AnonymousPostAuthentication(BasicAuthentication):
    """ No auth on post / for user creation """

    def is_authenticated(self, request, **kwargs):
        """ If POST, don't check auth, otherwise fall back to parent """

        if request.method == "POST":
            return True
        else:
            return super(AnonymousPostAuthentication, self).is_authenticated(request, **kwargs) 
```

我将验证放在`Validation`和 override的子类中`is_valid`。

我以与上面 Sampson 相同的方式进行 GET 过滤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:23:40.843

Yes, it's possible to do both.

Here's a simple example of how you would let an authenticated user GET only their own user JSON and not from all the other users: (Assuming you are using Django's built-in user infrastructure):

```
# In api.py (or resource.py):
...
from tastypie.resources import ModelResource
from tastypie import fields
from models import *
from django.contrib.auth.models import User, Group
from tastypie.authentication import BasicAuthentication
from tastypie.authorization import DjangoAuthorization
...

# REST endpoint for authenticating user accounts
class UserResource(ModelResource):

    class Meta:
        queryset = User.objects.all()
        resource_name = 'auth/user'
        list_allowed_methods = ['get']
        detail_allowed_methods = ['get']
        authentication = BasicAuthentication()
        authorization = DjangoAuthorization()

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(username=request.user) 
```

And here is a simple example of how you would let an anonymous user POST to create a new user (Caveat: this doesn't use Tastypie, strictly speaking)

```
# In views.py:
...
from django.http import HttpResponse
from django.contrib.auth.models import User, Group
from django.contrib.auth import authenticate
from django.http import Http404
from django.utils import timezone
from models import *
from api import *
from django.utils import simplejson
...

# REST endpoint for user registration
# Enforces server-side mediation (input validation)
# On failure, raises Http404
# On success, redirects to registration success page
def register_user(request):
    if request.method != 'POST':
        raise Http404('Only POSTs are allowed')

    # acquire params
    username = request.POST['username']
    password = request.POST['password']
    repeatpw = request.POST['repeatpw']
    first_name = request.POST['first_name']
    last_name = request.POST['last_name']

    # Server-side mediation to check for invalid input
    if username == '' or username is None:
        raise Http404('Server-side mediation: Invalid Username')

    if len(username) > 30:
        raise Http404('Server-side mediation: username must be 30 characters or fewer')

    if len(first_name) > 30:
        raise Http404('Server-side mediation: first name must be 30 characters or fewer')

    if len(last_name) > 30:
        raise Http404('Server-side mediation: last name msut be 30 characters or fewer')

    if len(password) < 4:
        raise Http404('Server-side mediation: Password too short')

    if password != repeatpw:
        raise Http404('Server-side mediation: Password Mismatch')

    # This try-except block checks existence of username conflict
    try:
        test_user_exists = User.objects.get(username__exact=username)
        if test_user_exists != None:
            raise Http404('Server-side mediation: Username exists')
    except User.DoesNotExist:
        pass

    # Input passes all tests, proceed with user creation
    user = User.objects.create_user(username, 'default@nomail.com', password)
    group = Group.objects.get(name='Standard')
    user.first_name = first_name
    user.last_name = last_name
    user.groups.add(group)
    user.is_staff = False    
    user.save()

    # Build confirmation JSON
    confirmation = {
            'action': 'register_user',
            'username': username,
            'success': 'yes',
    }

    json_return = simplejson.dumps(confirmation)

    # return JSON of the success confirmation
    return HttpResponse(json_return, mimetype='application/json') 
```

Based on that, here's a script of how you might create a new user through the REST endpoint using curl:

```
#!/bin/bash
echo "Usage: ./register_user username password repeatpw first_name last_name"
curl -v -d "username=$1&password=$2&repeatpw=$3&first_name=$4&last_name=$5" http://127.0.0.1:8000/register_user/ > result 
```

# html - 内容溢出 Chrome 中的 div 半径

> ID：13051545
> 
> 赞同：0
> 
> 时间：2012-10-24T14:40:51.167
> 
> 标签：html, css, google-chrome, webkit, cross-browser

我有一个布局奇怪的网站（由我的客户提供），并且开发得很好。

问题是 Chrome（版本 22）不起作用，但在 Firefox（版本 16）和 IE 9 中它可以工作。

问题出在`colRight`，有两个`div`s不尊重半径，内容溢出，越过了`colCenter`。

我该如何解决？

[JSFIDDLE](http://jsfiddle.net/D66qE/12/)

火狐：

![在此处输入图像描述](../Images/698654868d60ed8b09604f80b96fb497.png)

铬合金 ![在此处输入图像描述](../Images/a750f72c04e33f6cc72174321103b81b.png)

HTML：

```
 <div class="colCenter" id="two"></div>
     <div class="colRight" id="three">
         <div class="first_menu"></div>
         <div class="dati_societari"></div>
    </div>​ 
```

CSS：

```
 .colCenter{
    position:absolute;
    top:0;
    left:18%;
    height: 100%;
    width: 72%;
    background: #ccc;
    border-left: 0px solid #333;
    border-radius: 280px 0px 0px 280px / 1000px 0px 0px 1000px;
    /*border-radius: 0.2px 0px 0px 0.2px;*/
    z-index:100;
    overflow:hidden !important;
    box-shadow:-5px -1px 8px rgba(0,0,0,0.4);
    -webkit-box-shadow:-5px -1px 8px rgba(0,0,0,0.4);
    -moz-box-shadow: -5px -1px 8px rgba(0,0,0,0.4);
}

.colRight{
    position:absolute;
    top:0;
    right:0;
    background:#fff;
    height:100%;
    width:18%;  
    z-index:1000;
    border-left: 0px solid #333;
    /*border-radius: 70px 0px 0px 70px / 250px 0px 0px 250px;*/
    border-radius: 280px 0px 0px 280px / 1000px 0px 0px 1000px;
    box-shadow:-5px -1px 8px rgba(0,0,0,0.4);
    -webkit-box-shadow:-5px -1px 8px rgba(0,0,0,0.4);
    -moz-box-shadow: -5px -1px 8px rgba(0,0,0,0.4);
    overflow:hidden !important;
}

.first_menu{
    height:10%;
    width:100%;
    background:#714d8f; 
    position:absolute;
    top:0;
    left:0;
    z-index:2;
}

.dati_societari{
    height:8%;
    width:100%;
    background:#9a9a9a; 
    position:absolute;
    bottom:50px;
    left:0;
    z-index:2;
    text-align:center;
}

.social{
    position:absolute;
    width:100%;
    bottom:5%;
    left:20%;   
}

.img_social{
    opacity:0.7;    

    transition-property: opacity; /*standard*/
    transition-duration: 0.4s;

    -webkit-transition-property: opacity; /*Safari e Chrome */
    -webkit-transition-duration: 0.4s;

    -o-transition-property: opacity;      /*Opera*/
    -o-transition-duration: 0.4s;

    -moz-transition-property: opacity;    /*Firefox*/
    -moz-transition-duration: 0.4s; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:18:53.537

这似乎是一个 Webkit 错误...

[CSS边框半径没有在Webkit上修剪图像](https://stackoverflow.com/questions/8705249/css-border-radius-not-trimming-image-on-webkit)

错误报告...

[https://bugs.webkit.org/show_bug.cgi?id=30475](https://bugs.webkit.org/show_bug.cgi?id=30475)

[http://code.google.com/p/chromium/issues/detail?id=82417](http://code.google.com/p/chromium/issues/detail?id=82417)

# javascript - FilePicker - 单击外部框会丢失所有上传

> ID：13051547
> 
> 赞同：4
> 
> 时间：2012-10-24T14:40:52.963
> 
> 标签：javascript, filepicker.io

在使用网络应用程序时，如果用户碰巧在文件选择器进入模式时点击了文件选择器框的外侧，则该用户将丢失所有正在发生的上传。

我想知道是否有办法防止这种情况发生。比如禁用点击模态背景时关闭filepicker和modal的绑定。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:34:05.947

只是想跟进并让您知道此问题现已解决并默认启用！谢谢你的建议

# c# - 如何从asp.net c#中的面板获取控件？

> ID：13051556
> 
> 赞同：0
> 
> 时间：2012-10-24T14:41:28.837
> 
> 标签：c#, asp.net

嗯，我正在做一个关于在线电影票预订的项目。

我的问题是，我想在特定剧院的屏幕上显示座位安排。

与每一行一样，座位的数量可能会有所不同，所以我所做的是添加一个面板，并在运行时在其中动态添加一个复选框列表。

每个复选框列表代表一行。

```
string s;

for (int i = 0; i < ds.Tables["row_id_no_of_seats"].Rows.Count; i++)
{
    cbl = new CheckBoxList();
    cbl.RepeatDirection = 0; //horizontal
    cbl.RepeatLayout = 0; //table
    cbl.RepeatColumns = (int)ds.Tables["row_id_no_of_seats"].Rows[i].ItemArray[1];
    Panel1.Controls.Add(cbl);

    for(int j=1;j<=(int)ds.Tables["row_id_no_of_seats"].Rows[i].ItemArray[1];j++)
    {
         s = ds.Tables["row_id_no_of_seats"].Rows[i].ItemArray[0].ToString() + j.ToString(); //ex:A+1
         cbl.Items.Add(s);

         string query1 = "select booking_detail.row_id,booking_detail.column_id from booking_detail,booking where (booking_detail.booking_id=booking.booking_id) and (booking_detail.booking_date='" + bk_date + "') and (booking.booking_date='" + bk_date + "') and (booking.theatre_id=" + theatre_id + ") and (booking.screen_id=" + screen_id + ") and (booking.movie_id=" + movie_id + ") and (booking.show_start_time='" + show_start_time + "') and (booking.class_id=" + class_id + ")";

         SqlCommand command1 = new SqlCommand(query1, connection);

         adapter.SelectCommand = command1;
         adapter.Fill(ds, "seat_booked_info");

         // it checks and disables  the seats which have been pre- booked.
         for (int k = 0; k < ds.Tables["seat_booked_info"].Rows.Count;k++) {
             if(ds.Tables["seat_booked_info"].Rows[k].ItemArray[0].ToString().Equals(ds.Tables["row_id_no_of_seats"].Rows[i].ItemArray[0].ToString())) && (ds.Tables["seat_booked_info"].Rows[k].ItemArray[1].ToString().Equals(j.ToString())))
             {
                 cbl.Items.FindByText(s).Selected=true;        
                 cbl.Items.FindByText(s).Enabled = false;

             }
         }
         ds.Tables["seat_booked_info"].Clear();
    }
} 
```

现在我想要的是，如何获取用户选择的复选框的详细信息，因为复选框列表是动态添加到面板的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:43:42.713

你会使用这样的东西：

```
foreach (Control c in Panel1.Controls)
{
    CheckBoxList list = c as CheckBoxList;

    if (c != null)
    {
        // Do something with the list
    }
} 
```

# java - 如何验证 Wifi AP 或 Cell 是否有互联网？

> ID：13051557
> 
> 赞同：2
> 
> 时间：2012-10-24T14:41:32.257
> 
> 标签：java, android, wifi

我正在寻找通过 WiFi 或 Cell 验证互联网的最佳技术。假设您已连接到某个 AP，但如果存在互联网，则您现在没有。

今天我有两个选择`HttpURLConnection`：

*   从cdn服务器下载文件
*   向 google.com 等信任网页发送请求并获得响应 200。

还有其他方法吗？

所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:52:25.173

请参阅[电话管理器](http://developer.android.com/reference/android/telephony/TelephonyManager.html)，它的 getDataSate() 方法有四种状态

```
DATA_DISCONNECTED
DATA_CONNECTING
DATA_CONNECTED
DATA_SUSPENDED 
```

你可以得到电话管理器的实例——

```
 TelephonyManager tm = (TelephonyManager)getSystemService(Telephony_Service); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:54:51.120

在某种程度上，“访问互联网端点的能力”等同于“拥有互联网访问权限”。你可以考虑一些算法：

```
for (Endpoint site : theEntireInternet) {
    if (can connect to site) return true;
}
return false; 
```

这将最终建立连接。换句话说，能够连接到任何一个站点就足以证明是肯定的，但从理论上讲，您需要枚举每个站点以证明不连通。在实践中，检查几个主要站点显然就足够了。否则（没有关于网络、ISP 等的某种元信息；这是不可用的）除了......连接到互联网之外，没有办法最终证明“互联网”连接。

当然，正如您评论的那样，检查各种基于 Internet 的应用程序也无妨；它只是等效技术的另一种形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:02:23.253

这里是：

查看[蜂窝网络上的数据连接状态](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getDataState%28%29)

对于 WIFI，我会使用这个[公共类 WifiInfo](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getDetailedStateOf%28android.net.wifi.SupplicantState%29)。从那里您可以使用 getIpAddress() 或[getDetailedStateOf(...)](http://developer.android.com/reference/android/net/wifi/WifiInfo.html#getDetailedStateOf%28android.net.wifi.SupplicantState%29) 希望对您有所帮助。

# maven - 不正确的上游快照作业

> ID：13051558
> 
> 赞同：0
> 
> 时间：2012-10-24T14:41:33.837
> 
> 标签：maven, jenkins

在 Jenkins 中，在 maven 2 作业中，当我为作业检查“每当构建 SNAPSHOT 依赖项时构建”时，会添加两个上游作业。这些是正确的项目，但版本不正确（例如：5.0-SNAPSHOT 而不是 4.0.3-SNAPSHOT）。在构建的指纹列表中，可以清楚地看到使用的是 5.0-SNAPSHOT 版本。

目前，作为一种解决方法，我手动定义了工作关系。

什么会导致此类问题以及如何解决？上游作业检测的具体逻辑是什么？

编辑： pom 看起来像这样：

```
...
<packaging>pom<packaging>

<modules>
  <module>mod1</module>
  ...
  <module>mod20</module>
</modules>
<properties>
  <project.B.version>5.0-SNAPSHOT</project.B.version>
  ...
</properties>
...
<dependencyManagement>
  <dependencies>
    <dependency>
      <groupId>project.B.group</groupId>
      <artifactId>Bartifact</artifactId>
      <version>${project.B.version}</version>
      <scope>provided</scope>
    </dependency>
...
  </dependencies>
</dependencyManagement> 
```

然后是模块 mod1：

```
<parent>...</parent>
<packaging>war</packaging>
<dependencies>
  <dependency>
    <groupId>project.B.group</groupId>
    <artifactId>Bartifact</artifactId>
    <scope>compile</scope>
  </dependency>
</dependencies> 
```

此外，可能值得一提的是，我为所有这些项目创建了两次工作，针对 2 个不同的版本。所以有工作：

*   main-5.0-SNAPSHOT
*   B-5.0-快照
*   main-4.0.3-SNAPSHOT
*   B-4.0.3-快照

并且由于某种原因 main-5.0-SNAPSHOT 将 B-4.0.3-SNAPSHOT 作为上游项目，而 main-4.0.3-SNAPSHOT 将 B-5.0-SNAPSHOT 作为上游项目。这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:13:08.377

好吧，我找到了答案——这是最近一个错误的结果。更多细节：

*   [https://issues.jenkins-ci.org/browse/JENKINS-15237](https://issues.jenkins-ci.org/browse/JENKINS-15237)
*   [https://issues.jenkins-ci.org/browse/JENKINS-15367](https://issues.jenkins-ci.org/browse/JENKINS-15367)

相关：

*   [https://issues.jenkins-ci.org/browse/JENKINS-12735](https://issues.jenkins-ci.org/browse/JENKINS-12735)
*   [https://issues.jenkins-ci.org/browse/JENKINS-15295](https://issues.jenkins-ci.org/browse/JENKINS-15295)

# javascript - 在模板中呈现列表

> ID：13051559
> 
> 赞同：0
> 
> 时间：2012-10-24T14:41:34.210
> 
> 标签：javascript, jquery, handlebars.js, mustache

我使用 Handlebar/Mustache 模板在我的 ASP.NET MVC 应用程序中呈现以下视图模型。我在表格中显示以下字段。ContactList 是一个联系人列表（包括名字、姓氏、地址等）。

```
public string FirstName { get; set; }
public string LastName { get; set; }
public string Address { get; set; }       
public List<Contact> ContactList { get; set; }

<table
    <tbody>                         
                    <tr>        
                        <td>First Name</td>                    
                        <td>{{this.FirstName}}</td>
                    </tr>   
                    <tr>    
                        <td>Last Name</td>                   
                        <td>{{this.LastName}}</td>
                    </tr>
                    <tr>        
                        <td>Address</td>                           
                        <td>{{this.Address}}</td>
                    </tr>   
    <tr>    
                        <td>Contact List</td>                   
                        **<td>//how to process the ContactList?//</td>**
                    </tr>
</tbody>                                  
                </table> 
```

我想知道如何遍历这个列表并将其显示为同一张表中的一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:10:35.503

从[车把网站](http://handlebarsjs.com/#iteration)：

您可以使用内置`each`帮助程序遍历列表。在块内部，您可以使用`this`来引用被迭代的元素。

```
<ul class="people_list">
  {{#each people}}
  <li>{{this}}</li>
  {{/each}}
</ul> 
```

与此上下文一起使用时：

```
{
  people: [
    "Yehuda Katz",
    "Alan Johnson",
    "Charles Jolley"
  ]
} 
```

所以我相信你只需要拥有`ContactList`HandleBars 可以理解的格式（一个数组作为对象属性）。

# java - 让自己的班级“可比”

> ID：13051568
> 
> 赞同：6
> 
> 时间：2012-10-24T14:42:00.243
> 
> 标签：java, comparable

我遵循了一个教程，但未能为我`Country`的.`Comparable``BST`

主要的：

```
BinarySearchTree A = new BinarySearchTree();
Country a = new Country("Romania", "Bucharest", 1112);
A.insert(a); 
```

国家级：

```
public int compareTo(Object anotherCountry) throws ClassCastException {
    if (!(anotherCountry instanceof Country))
        throw new ClassCastException("A Country object expected.");
    String anotherCountryName = ((Country) anotherCountry).getName();  
    int i = this.name.compareTo(anotherCountryName);
    if(i < 0){
        return -1;
    } else {
        return 0;
    }
} 
```

错误：

```
@Override
public int compareTo(Object anotherCountry) throws ClassCastException {
    if (!(anotherCountry instanceof Country))
      throw new ClassCastException("A Country object expected.");
    String anotherCountryName = ((Country) anotherCountry).getName();  
    return this.name.compareTo(anotherCountryName);

Description Resource    Path    Location    Type 
```

名称冲突： Country 类型的方法 compareTo(Object) 与 Comparable 类型的 compareTo(T) 具有相同的擦除，但不会覆盖 Country.java /Lab2_prob 4/src 第 17 行 Java 问题

```
Description Resource    Path    Location    Type
The method compareTo(Object) of type Country must override or implement a supertype method  Country.java    /Lab2_prob 4/src    line 17 Java Problem 
```

和类：

```
public class Country implements Comparable<Country>{
    private String name;
    private String capital;
    private int area;

Description Resource    Path    Location    Type 
```

Country 类型必须实现继承的抽象方法 Comparable.compareTo(Country) Country.java /Lab2_prob 4/src line 2 Java Problem

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-24T14:50:17.967

你的`Country`班级应该实现`Comparable`：

```
public class Country implements Comparable<Country> 
```

那么你的`compareTo`方法应该是这样的：

```
@Override
public int compareTo(Country anotherCountry) {
    return this.name.compareTo(anotherCountry.getName());
} 
```

注意 的签名`compareTo`。参数可以（并且必须）是 类型`Country`，而不是`Object`。这是必需的，因为`Comparable`. 好处是您不必再检查类型。缺点是您只能与`Country`其他`Country`对象（或其子类型）进行比较，但在大多数情况下，这正是您想要的。如果不是，您必须更改类型参数，例如，如果您再次使用can be`Comparable<Object>`的签名。[您可以在此处](http://docs.oracle.com/javase/tutorial/java/generics/)阅读有关泛型的更多信息。`compareTo``Object`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T14:47:56.537

一个[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)应该返回：

> 负整数、零或正整数，因为此对象小于、等于或大于指定对象。

但是，您的代码仅返回 -1 或 0，这是不正确的；这意味着`this`可以小于另一个对象，或者等于，但不能更大！

无需修改返回的值`name.compareTo()`- 您可以直接返回它们。

# java - 异步服务中的 Spring 请求范围？在 threadLocal 变量上实现 ThreadScope，加上一个 AsyncAspect 来清理

> ID：13051569
> 
> 赞同：5
> 
> 时间：2012-10-24T14:42:03.913
> 
> 标签：java, web-services, spring, asynchronous, aspectj

我有一个启动一系列操作的网络服务。所有这些从同一个请求开始的动作都共享一个包含一些锁和一些其他信息的*actionContext 。*

到目前为止，这个*actionContext*对象是由 Spring 在所有使用“*请求*”范围的操作中注入的。

现在我正在实现一个 Web 套接字服务，以便能够跟踪这些操作的演变。
webService 现在必须生成一个线程来处理操作执行并将 webSocket 地址返回给调用应用程序/用户。

该操作已使用 spring 的 @async 注释实现，并将在应用程序上下文中定义的线程池中运行。

**问题：**
有了这个新功能，“*请求*”范围不再起作用，因为产生的线程不是请求（Spring 将阻止执行）。

处理这个问题的最佳解决方案是什么？

*   实现我的**Thread 范围**来处理*actionContext*并在所有操作中正确注入它？
*   *手动将actionContext*传递到任何地方（在我看来它看起来不太好）
*   实现一个实例化 webSocket 的 webService 并请求调用者首先调用它，然后将其引用传递给真正的 webService？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T14:42:03.913

我决定尽可能保持清洁并实施 TreadScope！

## 我的解决方案由以下组成：

*   用于在**`ThreadScope`**同一线程中运行的所有操作中注入相同的 bean。
*   **`asyncAspect`**拦截所有`@async`调用的方面，`asyncAspectAfter()`将去清理`threadLocal`变量。
    这是 Spring 处理带`@async`注释的方法所要求的：由于 Spring 在池中运行方法，因此线程被重用而不被破坏。这意味着该`threadLocal`变量将持续存在于线程中。

## 线程范围

```
/**
 * This scope works in conjunction with the {@link AsyncAspect} that goes to
 * cleanup the threadScoped beans after an async run. This is required since in
 * spring the async methods run in a pool of thread, so they could share some
 * thread scoped beans.
 * 
 * 
 * @author enrico.agnoli
 */
public class ThreadScope implements Scope {

    /**
     * This map contains for each bean name or ID the created object. The
     * objects are created with a spring object factory. The map is ThreadLocal,
     * so the bean are defined only in the current thread!
     */
    private final ThreadLocal<Map<String, Object>> threadLocalObjectMap = new ThreadLocal<Map<String, Object>>() {
        @Override
        protected Map<String, Object> initialValue() {
            return new HashMap<String, Object>();
        };
    };

    /** {@inheritDoc} */
    public Object get(final String beanName,
            final ObjectFactory<?> theObjectFactory) {
        Object object = threadLocalObjectMap.get().get(beanName);
        if (null == object) {
            object = theObjectFactory.getObject();
            threadLocalObjectMap.get().put(beanName, object);
        }
        return object;
    }

    /** {@inheritDoc} */
    public String getConversationId() {
        // In this case, it returns the thread name.
        return Thread.currentThread().getName();
    }

    /** {@inheritDoc} */
    public void registerDestructionCallback(final String beanName,
            final Runnable theCallback) {
        // nothing to do ... this is optional and not required
    }

    /** {@inheritDoc} */
    public Object remove(final String beanName) {
        return threadLocalObjectMap.get().remove(beanName);
    }

    @Override
    public Object resolveContextualObject(String key) {
        // TODO Auto-generated method stub
        return null;
    }

    /**
     * Invoke this method to cleanUp the ThreadLocal beans. This call is
     * required since in case of run in a thread pool, the thread will never be
     * removed and the threadLocal variables would be shared between two
     * different executions!
     */
    public void cleanUpThreadScopedBeans() {
        threadLocalObjectMap.remove();
    }
} 
```

## 异步方面

```
/**
 * This Async Aspect is used to cleanup the threadScoped beans after an async
 * run. This is required since in spring the async methods run in a pool of
 * thread, so they could share some thread scoped beans.<br>
 * The Thread scope is defined in {@link ThreadScope}
 * 
 * @author enrico.agnoli
 * 
 */
public class AsyncAspect {
    @Autowired
    ThreadScope threadScope;

    private static final Logger log = LoggerFactory
            .getLogger(AsyncAspect.class);

    public void asyncAspectAfter() {
        log.debug("CleanUp of the ThreadScoped beans");
        threadScope.cleanUpThreadScopedBeans();
    }

} 
```

## 应用程序上下文

```
<!-- Here we define the Thread scope, a bean exists only inside the same thread -->
<bean id="ThreadScope" class="com.myCompany.myApp.ThreadScope" />
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
        <map>
            <entry key="thread">
                <ref bean="ThreadScope"/>
            </entry>
        </map>
    </property>
</bean>

<!-- Here we configure the aspect -->
<bean id="AsyncAspect" class="com.myCompany.myApp.AsyncAspect" />
<aop:config proxy-target-class="true">
    <aop:aspect ref="AsyncAspect">
        <aop:pointcut expression="@annotation(org.springframework.scheduling.annotation.Async)" id="asyncAspectId" />
        <aop:after pointcut-ref="asyncAspectId" method="asyncAspectAfter" />
    </aop:aspect>
</aop:config> 
```

# wcf - 如何为 WCF net.tcp 和 https 服务禁用 SSLv2 以支持 SSLv3

> ID：13051571
> 
> 赞同：2
> 
> 时间：2012-10-24T14:42:05.350
> 
> 标签：wcf, ssl, wcf-security, pci-dss, pci-compliance

作为 PCI 合规性测试的一部分，我们发现使用传输级安全和证书保护的 WCF net.tcp 端点允许 SSLv2 连接。我们的服务是自托管的，因此我们不使用 IIS 来托管它们，因此我认为基于 IIS 的解决方案不会起作用。

在浏览了很多 MSDN 页面之后，我们还没有找到一种方法来告诉 WCF 连接使用什么版本的 SSL。

我们要求连接仅接受 SSLv3 而不是 SSLv2 以符合 PCI 标准。

**有谁知道如何在 WCF 连接（主机和客户端）上设置强制 SSL 版本，或者是否有关于如何为整个 Windows 机器执行此操作的边界方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:06:40.113

不确定是否不应该更好地询问服务器故障。

它是一个 .NET 应用程序吗？您可能想看看 ServicePointManager.SecurityProtocol。

此外，您可以尝试以下方法，例如 Windows Server 2008。它应该是系统范围的，而不是特定于 IIS 的。通过导航到服务器上的开始 > 运行 > cmd 打开命令提示符，然后执行以下语句：

```
REG ADD "HKLM\System\CurrentControlSet\Control\SecurityProviders\SChannel\Protocols\SSL 2.0\Server" /v Enabled /t REG_DWORD /d 0 /f 

REG ADD "HKLM\System\CurrentControlSet\Control\SecurityProviders\SChannel\Protocols\SSL 2.0\Client" /v Enabled /t REG_DWORD /d 0 /f 

REG ADD "HKLM\System\CurrentControlSet\Control\SecurityProviders\SChannel\Protocols\SSL 3.0\Server" /v Enabled /t REG_DWORD /d 1 /f 

REG ADD "HKLM\System\CurrentControlSet\Control\SecurityProviders\SChannel\Protocols\SSL 3.0\Client" /v Enabled /t REG_DWORD /d 1 /f 

REG ADD "HKLM\System\CurrentControlSet\Control\SecurityProviders\SChannel\Protocols\TLS 1.0\Server" /v Enabled /t REG_DWORD /d 1 /f 

REG ADD "HKLM\System\CurrentControlSet\Control\SecurityProviders\SChannel\Protocols\TLS 1.0\Client" /v Enabled /t REG_DWORD /d 1 /f 
```

之后，如果您尝试使用 SSLv2 连接到服务器，您现在应该会收到错误消息

# svg - 如何在 SVG 中绘制具有绝对线宽的多边形？

> ID：13051574
> 
> 赞同：4
> 
> 时间：2012-10-24T14:42:13.777
> 
> 标签：svg

我的应用程序生成一组要在 SVG 中绘制的图形点。点值在水平和垂直方向上始终在 0-1000 范围内。进行绘图的矩形的大小可能会发生变化。

这是在 200 X 85 矩形上绘制图形的 SVG 元素：

```
<svg width="200" height="85" viewBox="0 0 1000 1000" preserveAspectRatio="none">
    <polyline  stroke="#e69800"
               stroke-width="2px"
               fill="none"
               points="0,1000 100,900 200,800
                       300,700 400,600 500,500
                       600 400 700,300 800,200900,100 1000,0"/>
</svg> 
```

设置`viewBox="0 0 1000 1000"`使图形缩小到合适的大小，问题是这也会以相同的比例缩小线条的宽度，因此线条不再可见。

SVG 似乎忽略了属性中的“px” `stroke-width="2px"`。

有没有办法以绝对像素大小指定线条的宽度（笔划宽度）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T09:46:43.380

您可以使用该属性`vector-effect="non-scaling-stroke"`来防止线条与其余部分一起缩放。

参考：[http ://www.w3.org/TR/SVGTiny12/painting.html#NonScalingStroke](http://www.w3.org/TR/SVGTiny12/painting.html#NonScalingStroke)

> 这种修改产生的视觉效果是笔画宽度不依赖于元素的变换（包括非均匀缩放和剪切变换）和缩放级别

SVG1.1似乎不支持非缩放笔画，所以最终结果可能取决于渲染引擎。

# firefox - Firefox Jetpack 在地址栏旁边显示插件按钮

> ID：13051578
> 
> 赞同：1
> 
> 时间：2012-10-24T14:42:32.160
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我有一个 chrome 扩展，我想移植到 Firefox。在 chrome 中，我的扩展程序在地址栏的右侧有一个按钮，单击它时会显示一个弹出窗口，提供实时搜索界面。

来自 chrome 的 Firefox 开发似乎有点复杂，所以我选择了 Jetpack SDK 或“Addon-SDK”来初步了解一下。

是否可以使用 Jetpack 在地址栏旁边显示我的插件图标，还是我必须使用这个全功能怪物 SDK？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:56:12.030

人们倾向于为此使用 Erik Vold 的工具栏模块，有关详细信息，请参阅这个较旧的答案：

[https://stackoverflow.com/a/7670488/562145](https://stackoverflow.com/a/7670488/562145)

# authentication - 如何判断电子邮件地址是否由谷歌应用托管

> ID：13051581
> 
> 赞同：0
> 
> 时间：2012-10-24T14:42:47.640
> 
> 标签：authentication, dns, oauth-2.0

我想使用 Google 的 Oauth2 API 登录到基于电子邮件地址的应用程序。考虑到用户可能不知道他们的 me@mydomain.com 是否由 google 托管，我如何检查他们的电子邮件地址并通过代码将他们重定向到 Google Auth？例如，在典型的登录页面上，您已经看到“使用我的 google 帐户登录”按钮，但如果用户不知道这是一个 google 帐户，即使他们没有点击它，我仍然想使用 OAUTH .

我考虑过对 MX 记录进行 DNS 查找，但不确定这是否是最干净/最好的方法。

即典型的 DNS 查找返回：

```
mydomain.com      MX preference = 10, mail exchanger = aspmx.l.google.com
mydomain.com      MX preference = 20, mail exchanger = alt1.aspmx.l.google.com
mydomain.com      MX preference = 20, mail exchanger = alt2.aspmx.l.google.com
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:10:21.787

对 MX 记录进行 nslookup 可能是最实用的解决方案，而且相当简单。

我遇到的问题是，除非您的应用程序专门要求您使用他们的 Google 电子邮件，否则您可能会排除某些人。我用我的 Google 帐户设置了一个备用电子邮件地址，可以使用它登录。现在，我敢猜测大多数用户会使用他们的 Google 电子邮件帐户，但你需要为其他情况做好准备.

我的建议是首先使用更简单但已弃用的方法，例如 ClientLogin。[您可以使用https://www.google.com/accounts/ClientLogin?Email=who@where.com&Passwd=password](https://www.google.com/accounts/ClientLogin?Email=who@where.com&Passwd=password)做一个简单的帖子

如果您收到“Error=BadAuthentication”，则身份验证失败。如果您获得了良好的身份验证，您就会知道此电子邮件地址与 Google 帐户相关联，然后您可以使用 Oauth2 登录。我看到的唯一问题是用户输入了错误的密码。我会对所有 Google API 进行一些研究，看看它们中的任何一个是否可以告诉您密码不正确与登录失败，尽管出于安全目的可能不存在。

无论如何，祝你好运。如果您有其他想法，请让我们更新。

# php - 计算 PHP 数组值，只有第一个有效？

> ID：13051583
> 
> 赞同：0
> 
> 时间：2012-10-24T14:42:55.633
> 
> 标签：php, arrays

这是我的数组：

```
print_r($mCOneC); 
```

> => 阵列（[0] => 开始 [1] => 试用 [2] => 拒绝 [3] => 驱逐 [4] => 口腔清洁）

如果我做：

```
$length = count( array_keys( $mCOneC, 'start' ));

echo $length; 
```

我得到：`1`

如果我做：

```
$length = count( array_keys( $mCOneC, 'Trial' ));

echo $length; 
```

我得到：`0`

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:51:03.163

`array_keys`不会骗你的。对于您的第二个示例，您在返回零时遇到问题：

```
count(array_keys($mCOneC, 'Trial')); 
```

这只是意味着该数组`$mCOneC`不包含任何正好是`'Trial'`. 您需要更彻底地检查原始数据为什么不匹配，例如使用`var_dump`具体值上的函数：

```
var_dump($mCOneC[1]); 
```

这应该可以更清楚地了解您的问题。您使用的`print_r`功能并不像`var_dump`. 在浏览器窗口中查看内容时也要小心，也要查看浏览器的源视图。当您需要调试时，它比浏览器窗口显示的内容更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:50:45.770

很简单，你正在处理空间

```
$mCOneC = Array(
        0 => "start",
        1 => "Trial ",
        2 => "Refusal",
        3 => "Expel",
        4 => "Mouth Clean");

$mCOneC = array_map("trim", $mCOneC); <------------- Fix Spaces
$length = count( array_keys( $mCOneC, 'start' ));
var_dump($length);

$length = count( array_keys( $mCOneC, 'Trial' ));
var_dump($length); 
```

# regex - 正则表达式 - 回顾

> ID：13051584
> 
> 赞同：2
> 
> 时间：2012-10-24T14:42:57.583
> 
> 标签：regex, lookbehind

我有这样的输入字符串：

```
left/1234567890 
```

正则表达式：

```
(left(?<=/)[0-9]{10}?) 
```

我想得到这样的结果：1234567890。但它不起作用。

虽然，下一个输入字符串：

```
/1234567890 
```

使用下一个正则表达式：

```
((?<=/)[0-9]{10}?) 
```

按预期获得结果：1234567890。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T14:44:44.587

这是因为您没有包含`left`在您的后视中：

```
((?<=left/)[0-9]{10}?) 
```

在您的第一个示例中，您匹配`left`然后正则表达式引擎的“指针”在`t`and之间`/`，因此您的后向无法匹配，因为正则表达式引擎尚未通过斜杠。

# opengl - 为什么 OpenGL 的 glDrawArrays() 在 Core Profile 3.2 下失败并显示 GL_INVALID_OPERATION 而不是 3.3 或 4.2？

> ID：13051587
> 
> 赞同：5
> 
> 时间：2012-10-24T14:42:59.577
> 
> 标签：opengl, go, opengl-3, vertex-buffer, vertex-array

我有调用 glDrawArrays 的 OpenGL 渲染代码，当 OpenGL 上下文（自动/隐式获得）4.2 时，它可以完美地工作，但在显式请求的 OpenGL 核心上下文 3.2 时始终失败（GL_INVALID_OPERATION）。（在这两种情况下，着色器总是设置为#version 150，但我怀疑这不是重点。）

根据规范，当 glDrawArrays() 因 GL_INVALID_OPERATION 失败时，**只有两种情况：**

*   “如果非零缓冲区对象名称绑定到启用的数组并且缓冲区对象的数据存储当前已映射” - 此时我没有进行任何缓冲区映射

*   “如果几何着色器处于活动状态并且模式与 [...] 不兼容”——不，目前还没有几何着色器。

此外：

1.  我已经验证并仔细检查了它只是 glDrawArrays() 调用失败。还仔细检查了传递给 glDrawArrays() 的所有参数在两个 GL 版本下是否相同，缓冲区绑定也是如此。

2.  这发生在 3 个不同的 nvidia GPU 和 2 个不同的操作系统（Win7 和 OSX，都是 64 位——当然，在 OSX 中我们*只有*3.2 上下文，反正没有 4.2）。

3.  集成的“Intel HD”GPU 不会发生这种情况，但对于那个，我只得到一个自动隐式 3.3 上下文（尝试通过 GLFW 显式强制使用此 GPU 的 3.2 核心配置文件会导致窗口创建失败，但这是一个完全不同的问题...)

对于它的价值，这里是从渲染循环中摘录的相关例程，在 Golang 中：

```
func (me *TMesh) render () {
    curMesh = me
    curTechnique.OnRenderMesh()
    gl.BindBuffer(gl.ARRAY_BUFFER, me.glVertBuf)
    if me.glElemBuf > 0 {
        gl.BindBuffer(gl.ELEMENT_ARRAY_BUFFER, me.glElemBuf)
        gl.VertexAttribPointer(curProg.AttrLocs["aPos"], 3, gl.FLOAT, gl.FALSE, 0, gl.Pointer(nil))
        gl.DrawElements(me.glMode, me.glNumIndices, gl.UNSIGNED_INT, gl.Pointer(nil))
        gl.BindBuffer(gl.ELEMENT_ARRAY_BUFFER, 0)
    } else {
        gl.VertexAttribPointer(curProg.AttrLocs["aPos"], 3, gl.FLOAT, gl.FALSE, 0, gl.Pointer(nil))
        /* BOOM! */
        gl.DrawArrays(me.glMode, 0, me.glNumVerts)
    }
    gl.BindBuffer(gl.ARRAY_BUFFER, 0)
} 
```

所以当然这是一个更大的渲染循环的一部分，尽管现在整个“*TMesh”结构只是两个实例，一个是简单的立方体，另一个是简单的金字塔。重要的是，整个绘图循环完美无缺，当查询 GL 以查找 3.3 和 4.2 下的错误时，没有报告任何错误，但在 3 个具有显式 3.2 核心配置文件的 nvidia GPU 上失败，错误代码根据规范仅在两种具体情况，据我所知，没有一种情况适用于此。

这里有什么问题？你遇到过这种情况吗？有什么想法我一直在想念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:33:49.697

我有一个疯狂的猜测。

据我了解，所有 OpenGL 调用都必须发生在同一个线程上。这个限制不能很好地与 goroutine 混合，因为同一个 goroutine 可以在其执行的不同点在不同的线程上运行。

为了解决这个问题，在初始化 OpenGL 之前，您需要在主 goroutine（或任何执行 OpenGL 调用的 goroutine）启动时将其锁定到当前线程。

```
import "runtime"

func main() {
    runtime.LockOSThread()

    ...
} 
```

您看到不一致结果的原因可能是实现差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:57:24.620

不仅仅是*DrawArrays* ，我在这里弄错了**。**不知何故，我调用**glVertexAttribPointer**的方式是这里的问题：在*任何*严格的核心配置文件中，无论是 3.2 还是 4.2... 都会进一步调查。在 4.2 非严格的上下文中，没问题。

# python - Tornado 阻塞异步请求

> ID：13051591
> 
> 赞同：14
> 
> 时间：2012-10-24T14:43:13.757
> 
> 标签：python, tornado, long-polling

使用 Tornado，我有一个 Get 请求需要很长时间，因为它向另一个 Web 服务发出许多请求并处理数据，可能需要几分钟才能完全完成。我不希望这会阻止整个 Web 服务器响应它当前所做的其他请求。

据我了解，Tornado 是单线程的，并且同步执行每个请求，即使它异步处理它们（仍然对此感到困惑）。漫长过程的某些部分可能是暂停点，以允许服务器处理其他请求（可能的解决方案？）。我用一个工人在 Heroku 上运行它，所以不确定这如何转化为产生一个新线程或多处理，我没有使用 python 的经验。

这是我正在尝试做的事情：客户端发出 get 调用以启动进程，然后我每 5 秒循环一次 get 调用以检查状态并使用新信息更新页面（长轮询也可以工作，但正在运行进入同一个问题）。问题是启动长进程会阻塞所有新的获取请求（或新的长轮询会话），直到它完成。

有没有一种简单的方法来启动这个漫长的 get 调用，而不是让它在这个过程中阻塞整个 Web 服务器？有什么我可以在代码中说的......“暂停，处理待处理的请求然后继续”？

我需要在 ProcessHandler 上发起一个获取请求。然后我需要在 ProcessHandler 运行时继续能够查询 StatusHandler。

例子：

```
class StatusHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
       self.render("status.html")

class ProcessHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
       self.updateStatus("0")
       result1 = self.function1()
       self.updateStatus("1")
       result2 = self.function2(result1)
       self.updateStatus("2")
       result3 = self.function3(result2)
       self.updateStatus("3")
       self.finish() 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T15:04:19.790

这是一个完整的示例 Tornado 应用程序，它使用 Async HTTP 客户端和`gen.Task`模块使事情变得简单。

如果您`gen.Task`在文档中了解更多信息，您会发现实际上您可以同时发送多个请求。这是使用 Tornado 的核心思想，即一切都没有阻塞并且仍然保持单个进程。

**更新：**我添加了一个线程处理程序来演示如何将工作分派到第二个线程并在`callback()`完成时接收。

```
import os
import threading
import tornado.options
import tornado.ioloop
import tornado.httpserver
import tornado.httpclient
import tornado.web
from tornado import gen
from tornado.web import asynchronous

tornado.options.define('port', type=int, default=9000, help='server port number (default: 9000)')
tornado.options.define('debug', type=bool, default=False, help='run in debug mode with autoreload (default: False)')

class Worker(threading.Thread):
   def __init__(self, callback=None, *args, **kwargs):
        super(Worker, self).__init__(*args, **kwargs)
        self.callback = callback

   def run(self):
        import time
        time.sleep(10)
        self.callback('DONE')

class Application(tornado.web.Application):
    def __init__(self):
        handlers = [
            (r"/", IndexHandler),
            (r"/thread", ThreadHandler),
        ]
        settings = dict(
            static_path = os.path.join(os.path.dirname(__file__), "static"),
            template_path = os.path.join(os.path.dirname(__file__), "templates"),
            debug = tornado.options.options.debug,
        )
        tornado.web.Application.__init__(self, handlers, **settings)

class IndexHandler(tornado.web.RequestHandler):
    client = tornado.httpclient.AsyncHTTPClient()

    @asynchronous
    @gen.engine
    def get(self):
        response = yield gen.Task(self.client.fetch, "http://google.com")

        self.finish("Google's homepage is %d bytes long" % len(response.body))

class ThreadHandler(tornado.web.RequestHandler):
    @asynchronous
    def get(self):
        Worker(self.worker_done).start()

    def worker_done(self, value):
        self.finish(value)

def main():
    tornado.options.parse_command_line()
    http_server = tornado.httpserver.HTTPServer(Application())
    http_server.listen(tornado.options.options.port)
    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T15:15:14.370

koblas 的解决方案很棒。这是使用[tornado.gen的替代方法](http://www.tornadoweb.org/en/stable/gen.html)

```
import tornado.ioloop
import tornado.web
import tornado.gen
import tornado.concurrent
import time
from threading import Thread
from functools import wraps

def run_async(func):
  @wraps(func)
  def async_func(*args, **kwargs):
    func_hl = Thread(target = func, args = args, kwargs = kwargs)
    func_hl.start()
    return func_hl

  return async_func

@run_async
def sleeper(callback):
  i = 0
  while i <= 10:
    print i
    time.sleep(1)
    i += 1
  callback('DONE')

class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @tornado.gen.coroutine
    def get(self):
        response = yield tornado.gen.Task(sleeper)
        self.write(response)
        self.finish()

class OtherHandler(tornado.web.RequestHandler):
    def get(self):
        self.write('hello world')
        print 'in other'
        self.finish() 
```

# google-maps - 从 Google Map Polygon 下载 GPS 坐标

> ID：13051593
> 
> 赞同：0
> 
> 时间：2012-10-24T14:43:22.160
> 
> 标签：google-maps, google-maps-api-3, gps, google-maps-api-2

我正在构建美国各州和加拿大各省的交互式地图。我在这里有一份工作副本：http: [//www.willoughby-ind.com/FINDAREP.aspx](http://www.willoughby-ind.com/FINDAREP.aspx)。它功能齐全，可以满足我的所有需求。你可以说我从一个来源得到了美国，而从另一个来源得到了 CA。美国数据源是手绘的，足以满足我的需求。加拿大数据源非常准确，因为它来自官方来源，但它非常准确，加载速度也很慢。我想手绘我自己的 GPS 坐标并下载坐标数据，这样我就可以把它变成谷歌地图可以导入的格式。

谷歌有这个关于如何创建自己的多边形的演示：http: [//googlemapsapi.blogspot.com/2008/05/love-my-maps-use-its-line-and-shape.html](http://googlemapsapi.blogspot.com/2008/05/love-my-maps-use-its-line-and-shape.html)。我想看看是否可以轻松扩展它以下载所选多边形中的坐标列表。有没有人看到这个已经存在，或者我需要自己与 API 交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:15:44.880

1.  您正在使用已弃用的 Google Maps API v2，最早可能会在 2013 年 5 月停止工作。
2.  您正在解析客户端中的多边形。您可以通过将多边形转换为 KML 并使用 KmlLayer 加载它们或将 KML 导入 FusionTables 并使用 FusionTablesLayer 加载它们来获得更好的性能。KmlLayer 和 FusionTablesLayer 都呈现为从 Google 服务器提供的图块。FusionTables 在公共表中包含 Natural Earth 数据集，该数据集包含美国和加拿大的州/省多边形：

[美国](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=United%20States%20of%20America)

[加拿大](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Canada)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:05:59.523

您可以将加拿大数据加载到空间数据库（例如 PostgreSQL/PostGIS）中并简化多边形，也可以将它们绘制在自定义切片上以便快速加载，[**如下所示**](http://maps.forum.nu/gm_main.html?lat=47.872144&lon=-110.742188&z=4&mType=10)。

如果您使用自定义图块，那么您将单击事件侦听器附加到地图本身，并在 AJAX 调用中将单击的纬度/经度发送到服务器，以在数据库中查找它并确定单击了哪个多边形。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:17:59.950

这是某人构建的一个工具，它可以做很多事情。如果选择“多边形”选项，然后绘制多边形，它会输出所有坐标的 KML：

[http://www.birdtheme.org/useful/v3tool.html](http://www.birdtheme.org/useful/v3tool.html)

此外，如果您使用的是 API v2，他们有一个旧版本可以做同样的事情：

[http://www.birdtheme.org/useful/googletool.html](http://www.birdtheme.org/useful/googletool.html)

但是强烈同意 geocodezip 关于升级到 API v3 的评论。

# .htaccess - 使用 .htaccess 根据查询字符串设置环境

> ID：13051595
> 
> 赞同：0
> 
> 时间：2012-10-24T14:43:24.740
> 
> 标签：.htaccess, mod-rewrite

我正在尝试使用基于查询字符串的重写在 htaccess 中设置一个 Env 变量。如果查询字符串中的 mobile=true，我想将 ENVIRONMENT 设置为 mobile

到目前为止，我已经尝试了一些事情，但我坚持这条我认为应该有效但遗憾的是没有奏效的规则......

```
 RewriteCond %{QUERY_STRING} !^mobile=true$
   RewriteRule .* - [E=ENVIRONMENT:mobile] 
```

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:08:28.040

您以 a 的形式犯了一个小错字，`!`导致您无法获得所需的结果。

```
RewriteCond %{QUERY_STRING} ^mobile=true$
RewriteRule .* - [E=ENVIRONMENT:mobile] 
```

# c# - 向 DataTable 添加新行后 DataTable.DefaultView 未更新

> ID：13051596
> 
> 赞同：0
> 
> 时间：2012-10-24T14:43:25.683
> 
> 标签：c#, wpf, datagrid

我正在使用 WPF。我有一个显示在 DataGrid 中的 DataTable（数据绑定到 .DefaultView）。一个单独的线程将新行添加到 DataTable，但这些行不会显示在 DataGrid 中。

我想我做错了什么。你们中的某个人能否启发我如何在 DataGrid 中显示 DataTable，同时以编程方式添加新行？

在此先感谢，吉安卢卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:44:56.180

添加新行后，您必须刷新网格。

```
//when dataTable changes
datagrid.Items.Refresh() 
```

# c# - 单击按钮后秒表和重置时间

> ID：13051604
> 
> 赞同：0
> 
> 时间：2012-10-24T14:43:47.827
> 
> 标签：c#, winforms

我目前正在学习如何在 C# 中使用秒表属性。我有一个`button1`启动秒表。我想将时间重置为 0 并在第二次单击后重新开始，依此类推。每次连续单击按钮后，如何重置秒表计时器？

**代码**

```
namespace stopwatch
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();    
        }

        Stopwatch sw = new Stopwatch();

        private void button1_Click(object sender, EventArgs e)
        { 
            sw.Start();   
            TimeSpan x = sw.Elapsed;
            textBox1.Text = x.ToString();                   
        }                
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:46:10.170

使用[Stopwatch.StartNew()](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.startnew.aspx)

试试这段代码片段：

```
private void button1_Click(object sender, EventArgs e)
{
    sw = Stopwatch.StartNew();

    // ... do something ...

    sw.Stop();

    textBox1.Text = sw.Elapsed.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:47:42.197

```
 private void button1_Click(object sender, EventArgs e)
    {
            sw.Stop();

            TimeSpan x = sw.Elapsed;

            textBox1.Text = x.ToString();

            sw.Restart();
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:46:13.380

```
Stopwatch sw = new Stopwatch();
private void button1_Click(object sender, EventArgs e)
{
    sw.Stop();
    TimeSpan x = sw.Elapsed;
    textBox1.Text = x.ToString();

    // >= .NET 4
    sw.Restart();    

    // >=.NET 2.0
    sw.Reset();
    sw.Start();                   
} 
```

# winforms - Winforms：不是有效的 Win32 应用程序

> ID：13051605
> 
> 赞同：4
> 
> 时间：2012-10-24T14:43:48.253
> 
> 标签：winforms, visual-studio-2012, publish, bootstrapper

我已经使用 VS2012 创建了一个简单的 Windows 窗体应用程序，并且正在尝试将其安装到 XP 机器上。

不幸的是，我收到以下错误消息：

> setup.exe 不是有效的 Win32 应用程序。

不可否认，我确实使用了 .net 4.5 框架，这在 XP 机器上是个问题。但是我现在使用 .net 2.0 创建了一个测试应用程序并遇到了同样的问题。

我正在 win7 x64 机器上开发应用程序，并尝试在配置管理器中将平台设置为 x86，但没有任何乐趣。

这是我还是VS 2012？我已经设法使用 VS2010 安装了一个测试应用程序？

当我尝试使用 VS2012 开发 Lightswitch 应用程序并放弃它时，我遇到了类似的问题。

有什么建议么？

干杯，麻木

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T14:48:14.757

这是有关该主题的博客和解决方法：

[Setup.exe 不是有效的 Win32 应用程序](http://blogs.msdn.com/b/vsnetsetup/archive/2012/10/16/setup-exe-is-not-a-valid-win32-application.aspx)

> Visual Studio 2012 附带的 Clickonce 引导程序引擎 (setup.exe) 与 Windows Vista 以下的任何操作系统都不兼容。因此，上述错误消息是预期的并且是设计使然。出现这种行为的原因是因为引导程序是使用 VC 编译器编译的，而 Dev11 VC 编译器不支持 Windows XP。

# sql-server-2005 - 我应该避免@@Fetch_Status 吗？

> ID：13051616
> 
> 赞同：4
> 
> 时间：2012-10-24T14:44:17.843
> 
> 标签：sql-server-2005, cursor

在做了一些阅读之后，很明显多个过程可以修改全局变量`@@Fetch_Status`。我们有一个存储过程，它每小时调用一次其他存储过程（有点像表驱动的触发器，这样客户端可以控制但不必触摸一个触发器）。所以这个调用这些子过程的父过程使用游标。一些子过程也可以使用游标。

我知道每次`Fetch Next`调用之后几乎都会立即`@@Fetch_Status`调用，但是由于并行发生的事情，我不确定调用是否`@@Fetch_Status`是线程安全的，尤其是考虑到[此处的](http://msdn.microsoft.com/en-us/library/ms187308%28v=sql.90%29.aspx)**备注**部分。所以我认为将我所有的电话替换为类似的东西是一个好主意`While @@Fetch_Status = 0)`

```
WHILE ( (SELECT fetch_status
FROM sys.dm_exec_cursors(0)
where name = 'server_cursor')=0) BEGIN 
```

这在我的计算机上效果很好，但是当我将它移到客户端计算机上时，我了解到我没有对`sys.dm_exec_cursors(0)`表的选择权限。我得到错误`The user does not have permission to perform this action.`。

或者，如果我尝试`select * from sys.syscursors`我得到错误`The SELECT permission was denied on the object 'syscursors', database 'mssqlsystemresource', schema 'sys'.`

是否有另一种方法可以确保多个同时游标不会相互踩踏？还是我在这里工作太辛苦了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T19:35:55.157

`@@FETCH_STATUS`解决方案是在您的`FETCH NEXT`陈述之后立即进行检查。特别是，确保没有可能改变状态的干预呼叫。如有必要，您可以将该值保存到已声明的局部变量中。您提到“几乎立即”检查状态。如果你不确定，你最好检查你的代码。

否则，`@@FETCH_STATUS`应该是可靠的。

# objective-c - 如何根据使用 Autolayout 布局的子视图的大小调整父视图的大小

> ID：13051617
> 
> 赞同：19
> 
> 时间：2012-10-24T14:44:17.807
> 
> 标签：objective-c, cocoa, resize, autolayout, nslayoutconstraint

我正在准备一个与屏幕截图中显示的示例类似的自定义视图。我在运行时添加所有用户界面组件（标签、文本字段、单选按钮……）。要定位元素，我使用[Autolayout](http://developer.apple.com/library/mac/#releasenotes/UserExperience/RNAutomaticLayout/_index.html#//apple_ref/doc/uid/TP40010631)约束。到目前为止，这部分工作正常。

![自定义视图](../Images/dc4619f3ccecdcab802736a0ed136ae6.png)

元素的数量因上下文而异。我想知道如何使用 Autolayout 约束来**动态调整父视图的大小**（很可能是视图的高度）。因此，视图约束应该考虑为当前附加的子视图定义的高度和边距。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-13T18:49:42.913

我已通过以下设置完成此操作：

*   容器视图没有高度限制
*   顶部子视图与容器视图顶部有间距约束
*   包含的视图之间都有间距限制
*   底部视图对容器视图底部有间距约束

自动布局系统通过调整容器大小以适应其内容来满足这些约束。

当然，您需要在更改内容时动态设置约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-24T06:41:07.663

如果您使用的是 NSStackView ，请确保您没有为它的高度和宽度设置约束，并确保所有边都被锚定。

[![在此处输入图像描述](../Images/4e1d8b75dffed89cc17923fccb3c77bf.png)](https://i.stack.imgur.com/2GPTl.png)

还要确保将内容拥抱属性设置为 1000。

[![在此处输入图像描述](../Images/3d46ecf967b7c221b0b51aa86e9d36a2.png)](https://i.stack.imgur.com/kE8IA.png)

# jquery - 脚本在 chrome 中不起作用

> ID：13051618
> 
> 赞同：0
> 
> 时间：2012-10-24T14:44:20.840
> 
> 标签：jquery, google-chrome, lightbox

```
function loadPopup(type) {
    if (type == "login") {
        $("#login").show();
        $("#dark").show();
        $("body").keypress(function (e) {
            var key = e.keyCode ? e.keyCode : e.which;
            if (key == "27") {
                $("#login").hide();
                $("#dark").hide();
            }
        });
    }
} 
```

这会弹出一个具有 id login 和 dark 的窗口。当按下 Esc 时，它将自动关闭。两个元素的样式：

```
#dark {
    display: none;
    position: absolute;
    top: 0 % ;
    left: 0 % ;
    width: 100 % ;
    height: 100 % ;
    background-color: #aaa;
    z-index: 1001; 
    -moz-opacity: 0.8;
    opacity: .80;
    filter: alpha(opacity = 80);

}
#login {
    display: none;
    background: white;
    color: black;
    width: 500px;
    height: 500px;
    position: absolute;
    top: 50 % ;
    left: 50 % ;
    margin-left: -250px;
    margin-top: -250px;
    z-index: 1002;
} 
```

和 HTML：

```
<head>
<title>some title</title>
    <link rel="stylesheet" href="style/css.php?file=index" type="text/css"/>

    <script src="script/JQuery.js" type="text/javascript"></script>
    <script src="script/js.php?file=index" type="text/javascript"></script>

</head>
<body>
        <div id="dark"></div>
        <div id="login"></div> 
```

这里还有一些元素。

这在 IE 9、Mozilla Firefox 中有效，但在 Chrome 21 中无效。错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:50:29.200

您似乎正在分配调用函数的按键事件事件时间..尝试将其移到函数之外..

```
$(function() {
   $("body").keypress(function (e) {
       var key = e.keyCode ? e.keyCode : e.which;
       if (key == "27") {
            $("#login").hide();
            $("#dark").hide();
        }
    });
});

function loadPopup(type) {
    if (type == "login") {
        $("#login").show();
        $("#dark").show();
    }
} 
```

# javascript - node.js 服务请求安全网站

> ID：13051619
> 
> 赞同：1
> 
> 时间：2012-10-24T14:44:21.400
> 
> 标签：javascript, node.js, request, connect

我想从第三方网站请求或更好地提取数据并解析信息后记。解析不是这里的主题。我对自动请求感兴趣。我有哪些选择以及如何处理安全问题（身份验证、授权）。

我有一个简单的节点服务器，只使用连接。我还使用 npm 模块“请求”来处理我对 3rd 方网站的请求。我还有一个 url 和用户名和密码。但是我没有太多信息，第 3 方网站是运行在 tomcat 上的 JSP (XSP) Web 应用程序，它在登录后放置一个 JSESSIONID。我尝试将标题“Authorization”：“Basic”与 user:password 添加为 byte64，但这不起作用。还有其他选择，想法吗？

感谢您的任何评论和提示..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:30:21.383

首先找到登录表单发布到的 URL，以及用户名/密码字段的名称。使用此信息，您可以模拟该过程（使用[request](https://github.com/mikeal/request)）：

```
var cookies = request.jar();

request({
   url: 'http://whatever.com/ajax/signin',
   method: 'POST',
   jar: cookies,
   body: {
       username: 'user',
       password: 'pass'
   }
}, function(error, response, body) {
   // now if you use {jar: cookies} on later requests, the session
   // established by the simulated sign-in will be used.
}); 
```

在复杂的情况下，您可能必须解析包含登录表单的页面并从表单中读出任何[CSRF 令牌](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，以将它们包含在模拟帖子的正文中。

# java - Wicket：将类型安全的页面构造函数映射到可读的 URL

> ID：13051620
> 
> 赞同：4
> 
> 时间：2012-10-24T14:44:26.317
> 
> 标签：java, url, wicket

我使用 Wicket 6.1，并且试图弄清楚如何使我的页面流具有更好、更可收藏的 URL。

我经常使用类型安全的构造函数，所以我的代码通常如下所示：

```
class SearchResultsPage extends WebPage {
  public SearchResultsPage(SearchResultsModel model) {
     // display the data in the model
  }
} 
```

要导航到页面，我有这样的代码：

```
AjaxButton ajaxButton = new IndicatingAjaxButton("ajaxbutton") {
    @Override
    protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
        SearchResultsModel results = search(kriteriamodel)                
        getRequestCycle().setResponsePage(new SearchResultsPage(results));
    }

    @Override
    protected void onError(AjaxRequestTarget target, Form<?> form) {
        target.add(feedback);
    }
}; 
```

现在，当我到达结果页面时，我的 URL 将类似于 searchresults?5

我希望能够将搜索参数编码为用户可以添加书签以供以后参考的 URL。

我知道我可以使用 PageParameters 映射并将我的对象手动映射到该结构。但我正在寻找更*优雅*的解决方案。

*   我正在寻找指向我的页面或模型应该实现的一些聪明界面的指针，以使页面更具书签性。
*   一个例子也很好。
*   理想情况下，只应更改页面/模型中的代码。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:30:52.987

我会做的是这样的：

```
class SearchResultsPage extends WebPage {

  public static PageParameters convertModelToParam(SearchResultsModel model) {
     ...
  }

  public static SearchResultModel convertParamToModel( PageParameters param ) {
    //this is for convenience only
    ...
  }

  public SearchResultsPage( PageParameters param ) {
    this( convertParamToModel( param ) );
  }

  private SearchResultsPage(SearchResultsModel model) {
    // display the data in the model
  }
} 
```

这样，您的页面就可以添加书签，但您可以保留类型安全的构造函数。这里明显的缺陷是，一旦你有一个接受的构造函数`PageParameters`，就无法确保它来自适当的转换方法。但是当您考虑它时，它是真实世界的准确模型：用户也可以自由编辑您 URL 中的查询字符串，您的应用程序应该能够处理它。

请记住，一旦可以为页面添加书签，参数就会成为用户输入，因此必须在将它们转换为业务对象之前对其进行清理。没有自动化系统会为您做到这一点。

# php - Yii + CuploadedFIle + POST Content-Length of X bytes 超过第 0 行 Unknown 中 Y 字节的限制

> ID：13051626
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:44:51.667
> 
> 标签：php, file-upload, yii, warnings, max-size

如果我在验证规则中使用我的文件上传

```
array('taskfile', 'file', 'allowEmpty' => true, 'maxSize' => 1024 * 1024 * 1) 
```

如果 maxSize < 文件大小 < max_pos 会显示正确的错误，但如果 maxSize < max_post_size < 文件大小，那么我不会收到错误消息，但会在我的网站顶部收到 php 警告。

```
Warning: POST Content-Length of 41816263 bytes exceeds the limit of 15728640 bytes in Unknown on line 0 
```

upload_max_filesize 和 post_max_size 在 php.ini 中设置。我也用自己的验证规则尝试了这个解决方法，但它也不起作用。

```
 public function checkMaxFileSize($attribute) {
    $max_post_size = 1024 * 1024 * ini_get('post_max_size');
    $file_is_too_big = ($_SERVER['CONTENT_LENGTH'] > $max_post_size) ? true : false;

    if ($file_is_too_big)
        $this->addError($attribute, "too big"); 
```

如果 yii 未处于调试模式，也会显示该错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:08:31.057

尝试在您的 .htaccess 文件中设置您的 post_max_size/upload_max_filesize

```
php_value post_max_size 10M
php_value upload_max_filesize 10M 
```

# java - Windows 航空效果和 Java 全屏

> ID：13051627
> 
> 赞同：1
> 
> 时间：2012-10-24T14:44:51.727
> 
> 标签：java, windows, fullscreen, smooth

我有一个用 java 设计的 Windows 应用程序，打开时会进入独占全屏模式。该应用程序以 60fps 的速度运行。问题是，当 Windows 航空效果被禁用时，应用程序运行流畅；图像移动顺畅。启用航空效果后，应用程序以相同的速度运行，但不连贯，就像 30fps 一样。

为什么 Windows 航空效果会导致这种情况？如何在启用航空效果的情况下顺利运行应用程序？

谢谢。

# python - GAE - AppEngine - DeadlineExceededError：等待来自 URL 的 HTTP 响应时已超过截止日期：

> ID：13051628
> 
> 赞同：18
> 
> 时间：2012-10-24T14:44:52.650
> 
> 标签：python, google-app-engine, urlfetch

我有一个在我的本地机器上运行良好的 Google AppEngine 应用程序。该应用程序将图像（来自 url）发布到我的 facebook 墙上。但是，当我将它部署到 Google 的服务器时，我收到一个错误：

```
DeadlineExceededError: Deadline exceeded while waiting for HTTP response from URL: 
```

违规代码是：

```
facebook_access_token = facebook_info['access_token']

facebook_post_url = 'https://graph.facebook.com/me/photos?access_token=%s&url=%s&name=%s&method=post' % (facebook_access_token, url, caption)
facebook_post_url = facebook_post_url.replace(" ", "+");
facebook_result = urlfetch.fetch(facebook_post_url)

if facebook_result.status_code == 200:
  facebook_result_object = json.loads(facebook_result.content) 
  output_ids['facebook'] = facebook_result_object['id']
else:
  output_ids['facebook'] = '' 
```

完整的错误跟踪是：

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 710, in __call__
    handler.get(*groups)
  File "/base/data/home/apps/s~digibackapi/1.362663258877230387/main.py", line 512, in get
    facebook_result = urlfetch.fetch(facebook_post_url)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py", line 266, in fetch
    return rpc.get_result()
  File "/base/python_runtime/python_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py", line 404, in _get_fetch_result
    'Deadline exceeded while waiting for HTTP response from URL: ' + url)
DeadlineExceededError: Deadline exceeded while waiting for HTTP response from URL: https://graph.facebook.com/me/photos?access_token=<ACCESS_TOKEN>&url=http://digiback.cc/ej7&name=Trees&method=post 
```

同样，代码对我来说看起来很可靠，并且在我的本地机器上运行良好。它与超时有什么关系吗？当我`facebook_post_url`在浏览器中尝试时，它会立即返回。

有没有人有任何想法？我在这里完全不知所措。

非常感谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-02-28T09:32:54.980

简单的回答：url 获取的默认期限设置为 5 秒。

怎么修：

```
from google.appengine.api import urlfetch

urlfetch.set_default_fetch_deadline(60) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-24T16:09:03.003

尝试将 urlfetch 的最后期限设置为 30 秒或更长时间（取决于您是从任务处理程序还是请求处理程序中调用 urlfetch）

有关 urlfetch 的更多信息：[Url Fetch Docs](http://developers.google.com/appengine/docs/python/urlfetch/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-12T22:39:27.520

全局设置截止日期的另一种方法是在特定的 fetch 调用上设置它。在你的情况下：

```
result = urlfetch.fetch(
    url=your_url,
    deadline=60
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T16:37:18.073

我不熟悉 facebook API。但是 urlfetch 的构造方式看起来有点奇怪。通常，方法（Post）是一个 urlfetch 参数，并且 post 有效负载是 urlencoded。这导致：

```
params = urllib.urlencode([
    ('access_token', facebook_access_token),
    ('url', url),
    ('name', caption),
  ])
 response = urlfetch.fetch(url='https://graph.facebook.com/me/photos', payload=params, method=urlfetch.POST,
                      headers={'Content-Type': 'application/x-www-form-urlencoded'}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T01:18:14.483

可能相关：我在测试本地 urlfetch 代码时遇到了相同的截止日期。事实证明，虽然通过浏览器直接 GET 开发服务器上的资源是可行的，例如，`http://localhost:8080/content/test.jpg`尝试相同的 via`urlfetch`每次都注定要失败。我只能假设`urlfetch`.

事实证明，你的问题确实是一个超时问题，而我的答案是不要在 dev.xml 中使用 urlfetch。

# emacs - 跨双显示器的 emacs 高效缓冲区切换

> ID：13051632
> 
> 赞同：11
> 
> 时间：2012-10-24T14:45:00.000
> 
> 标签：emacs

刚刚从单显示器切换到双显示器

通过使用在新帧中打开缓冲区中的文件，已设法将两个屏幕与 emacs 一起使用`C-x 5 f`，我可以将该帧拖到第二台显示器上并享受我的额外空间

我现在的问题是如何有效地在不同帧中的缓冲区之间切换

我习惯于`C-x o`在单个监视器上的拆分帧中的缓冲区之间切换，但这不适用于多个帧

不得不使用比较麻烦的比较麻烦`C-x 5 b <buf-name>`的

任何人都有关于如何在双显示器上更有效地进行缓冲区切换的重要提示？

理想情况下，我想使用一个简单的键盘快捷键在所有缓冲区之间循环，而不考虑帧

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T21:16:04.643

我希望`C-x 5 o`切换到另一个框架，但我没有这样的双屏设置来验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T17:30:08.563

使用单独的帧，我使用以下命令通过 cmd-backtick 获得 mac osx 风格的“相同应用程序”切换。如果你在 linux/windows 上，你可以用 alt-tilda 做同样的事情：

```
(defined-key global-map (kbd "M-`") 'other-frame) 
```

我喜欢这个，因为它使切换帧的动作与切换缓冲区分开。对于多个屏幕，当您想要更改哪个屏幕具有焦点时，通常是某种上下文切换。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T15:57:32.333

将我上面的评论变成答案，因为这似乎是 OP 所追求的：

```
(defun other-window-visible ()
  (interactive)
  (other-window 0 'visible))
(global-set-key "\C-xo" 'other-window-visible) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T03:44:01.420

也许

```
(global-set-key (kbd "C-x o") 'next-multiframe-window) 
```

（尽管正如提到的尖峰，我认为保持`C-x o`绑定`other-window`和绑定`next-multiframe-window`到不同的东西是有道理的。）

# c++ - cc socket编程select()的第一个参数

> ID：13051644
> 
> 赞同：2
> 
> 时间：2012-10-24T14:45:33.213
> 
> 标签：c++, sockets, select

我一直在尝试在 Linux 中进行一些网络编程，但我似乎又被卡住了。我似乎没有得到 select() 函数的第一个参数。`filedescriptor + 1`据我所知，它应该是最后一个制作的套接字。大多数情况下，最高`filedescriptor`值包含数字 6。当我将它添加`filedescriptor`到时，`fd_set`它突然变为 64——可能是因为它变为`fd_bytes`（如果我错了，请纠正我）。因此， 6+1 似乎没有用于 select 语句，因为它一直阻塞，但如果我`fd_bytes`从`fd_set`. 我对所有这一切都感到非常困惑，并且想就这个主题提供一些建议，或者如果有人有它，一个很好的 sigio 教程可以让事情变得更容易。

**服务器.cpp**

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>
#include <boost/thread/thread.hpp>
#include <sys/time.h>
#include <sys/ioctl.h>

using namespace std;

void error(char *msg,int socket)
{
    perror(msg);
    close(socket);
    exit(1);
}

int main(int argc, char** argv) {
    int sockfd, newsockfd, portno, n;
    socklen_t clilen;
    fd_set readfds;
    FD_ZERO(&readfds);
/*
 * Sockfd, newsockfd contain values returned by the socket
 * portno stores the port number on which the server accepts connections
 * clilen stores the size of the address of the client
 * n contains the amount of character written of read
 */
    char buffer[256];
    /* buffer contains the characters read from the socket*/

    struct sockaddr_in serv_addr, cli_addr;
    /* 
     * sockaddr_in contains an internet address
     * serv_addr contains the servers address
     * cli addr contains the clients address
     */
    if(argc < 2)
    {
        fprintf(stderr,"ERROR no port provided");
       exit(1);
    }
    /*
     * error if no argument
     */
    sockfd = socket(AF_INET,SOCK_STREAM,0);
    int opt = 1;
    ioctl(sockfd, FIONBIO, &opt);

    if(sockfd < 0){
        error("ERROR opening socket", sockfd);
    }    
    /*
     * socket() creates a new socket
     * argument 1 contains the address domain
     * argument 2 contains the socket type
     * argument 3 contains the protocol should be 0
     * socket() returns a reference for itself
     */
    bzero((char*) &serv_addr, sizeof(serv_addr));
    /* empty the serv_addr variable*/
    portno = atoi(argv[1]);
    /*converts the port argument from string  to int*/
    serv_addr.sin_family = AF_INET;
    /*set the code for the address family*/
    serv_addr.sin_port = htons(portno);
    /*htons converts the portno to network bytes and gives it to the server address*/
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    /*set the server ip to the ip of the running machine*/
    if(bind(sockfd,(struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0)
        error("ERROR on binding", sockfd);
    /*
     * bind() binds a socket to an address, in this case the
     * addess of the current host
     */
    listen(sockfd,5);
    /*the listen system call allows the process to listen on the socket for 
    connections*/
    clilen = sizeof(cli_addr);
    do{
    newsockfd = accept(sockfd,(struct sockaddr *) &cli_addr, &clilen);
    }while(newsockfd < 0);
    /*
     * accept() lets the system wait until a client connects to the server
     */
    FD_SET(newsockfd,&readfds);
    int sockcount = pselect(readfds.fds_bits[0] + 1,&readfds,NULL,NULL,NULL,NULL);

    bzero(buffer,256);
    n = read(newsockfd,buffer,255);
    if(n < 0) error("ERROR reading from socket", sockfd);
    printf("Here is the message: %s", buffer);
    /*
     * bzero empties the buffer
     * read obviously reads data from the new socket descriptor
     */
    n = write(newsockfd,"I got your message",18);
    if(n < 0) error("ERROR writing to socket", sockfd);

    close(sockfd);
    return 0;
} 
```

一些（或全部）代码可能没有意义，但这主要是因为我只是在测试代码的行为方式，然后让它成为多线程的。上面的代码工作更多：可以使用 telnet 或使用位于此处[http://www.linuxhowtos.org/C_C++/socket.htm](http://www.linuxhowtos.org/C_C++/socket.htm)的教程中的客户端进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:51:04.537

我以前从未播种过任何人`readfds.fds_bits[0] + 1`。对于您的情况，您可以只使用`newsockfd + 1`in `pselect()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:51:12.930

根据 pselect 的文档，如果您不提供 timespec 参数，它将阻塞，这就是您的代码中发生的情况。无论如何，您对 pselect 的调用实际上没有任何意义，因为 a）您不会根据对 pselect 的调用结果做出任何决定，并且 b）您随后立即调用 recv，这是一个阻塞调用。

# asp.net-mvc - ASP.NET MVC DropDownListFor 不选择预填充值

> ID：13051645
> 
> 赞同：0
> 
> 时间：2012-10-24T14:45:36.087
> 
> 标签：asp.net-mvc, html.dropdownlistfor

首先，我检查了所有相关问题，但没有一个能解决我的问题。

我正在使用具有多个属性的 ASP.NET MVC Html 帮助程序 Dropdownlistfor，如下所示。

```
@Html.DropDownListFor(m => m.SelectedPeople, 
                       Model.People, 
                       new { multiple = "multiple" })

/* Viewmodel for my view */
public class MyModel
{
    public IEnumerable<SelectListItem> People       { get; set; }
    public IEnumerable<string> SelectedPeople       { get; set; }
} 
```

如果我没有用一些选定的值预先填充下拉列表。它工作正常。选定的值会毫无问题地发布到操作方法。

但是，如果我想预先填充下拉列表，它就不起作用。我按如下方式填充下拉列表，

```
model.People = new[] 
{
    new SelectListItem { Value = "1", Text = "group 1" },
    new SelectListItem { Value = "2", Text = "group 2" },
    new SelectListItem { Value = "3", Text = "group 3" },
 };

model.SelectedPeople = new[] { "2", "3" }; 
```

通过不工作，我的意思是 SelectListItems 2 和 3 没有在 DropDownList 中选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:52:25.707

你有没有尝试过：

```
model.People = new[] 
{
    new SelectListItem { Value = "1", Text = "group 1" },
    new SelectListItem { Value = "2", Text = "group 2", Selected = true },
    new SelectListItem { Value = "3", Text = "group 3", Selected = true },
}; 
```

# android - 字符串包含引号时的 SQL 异常（无法识别的标记）

> ID：13051647
> 
> 赞同：2
> 
> 时间：2012-10-24T14:45:43.730
> 
> 标签：android, mysql, sqlexception

当我使用我的函数从“mysql.db”检索数据时，我收到了 SQL 异常（无法识别的令牌）。当字符串**地址**内部有引号时会发生异常。

我已经尝试更改此行

```
KEY_ADDRESS + "='" + address + "'", 
```

到

```
KEY_ADDRESS + "=\"" + address + "\"", 
```

它解决了我对包含单引号 (') 和 (`) 的字符串的问题，但对包含双引号 (") 的字符串产生了另一个问题。

我尝试使用

```
DatabaseUtils.sqlEscapeString(address); 
```

没有效果。

我试图从这个问题中使用*转义*函数：[如何在 MySQL 中转义特殊字符？](https://stackoverflow.com/questions/881194/how-to-escape-special-character-in-mysql)，但它没有用。

这是我的代码：

```
public Cursor getNameFromAddress(String address) throws SQLException
{
    Cursor mCursor =
            db.query(DATABASE_TABLE_PRINC, new String[] {
                    KEY_ROWID,
                    KEY_NAME,
                    KEY_ADDRESS
                    },
                    KEY_ADDRESS + "='" + address + "'",
                    null,
                    null,
                    null,
                    null,
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:02:51.487

那些`selectionArgs`/`whereArgs`旨在用于：

```
Cursor mCursor =
        db.query(DATABASE_TABLE_PRINC, new String[] {
                KEY_ROWID,
                KEY_NAME,
                KEY_ADDRESS
                },
                KEY_ADDRESS + "=?",
                new String[] { address },
                null,
                null,
                null,
                null); 
```

将所有替换`"='" + stuff + "'"`为并按照必须填写的顺序`"=?"`放入数据以填充s`?``String[]`

`?`然后将自动被转义的字符串数据替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:01:49.890

失踪 ”？” 象征

```
Cursor mCursor =
        db.query(DATABASE_TABLE_PRINC, new String[] {
                KEY_ROWID,
                KEY_NAME,
                KEY_ADDRESS
                },
                KEY_ADDRESS + "=?" ,
                new String[]{address},
                null,
                null,
                null,
                null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T15:04:27.873

```
queryText = "select * from yourtable where address = ?";
mDb.rawQuery(queryText, new String[] {addressValue}); 
```

这样您就可以解决问题并保护您的系统免受 SQL 注入的影响。

# objective-c - 我如何将 nsoperation 存储到 nsuserdefaults 中？

> ID：13051650
> 
> 赞同：0
> 
> 时间：2012-10-24T14:45:52.553
> 
> 标签：objective-c, nsuserdefaults, nsoperation

我有一个 nsoperation 类，我想将运行中的操作存储到 nsuserdefaults 中以供以后参考。我怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:49:43.773

NSOperation 不符合 NSCoding。您必须自己编码/解码。但是，请考虑一下您要在这里完成的工作。必须有一些非常特别或非常错误的东西让你需要保存一个 NSOperation。

# solr - Solr - 如何将元数据添加到通过 Solr Cell 索引的索引二进制文件？

> ID：13051658
> 
> 赞同：0
> 
> 时间：2012-10-24T14:46:12.640
> 
> 标签：solr, solr-cell

我正在创建一个 PHP 应用程序，它允许用户使用 Solr 来搜索文件以支持搜索。这主要是因为该应用程序需要对 Word Docs 和 PDF 进行内容搜索。该应用程序还使用 MySql 数据库来跟踪文件。

我在想最初索引所有文件（可能大约 20,000 个）的最佳方法是编写一个 PHP 脚本，循环遍历特定目录中的所有文件，将每个文件添加到 Solr 索引并在我的数据库。

问题是文件本身并不包含所有需要索引的数据。使用 Solr Cell 对文件名、内容、作者等进行索引后，我需要应用程序的用户能够添加额外的元数据，例如标签和类别。

我知道如果用户要将此数据添加到 MySql 数据库中，我将无法在不覆盖已编入索引的数据（内容等）的情况下使用额外数据更新 Solr。

所以我的问题是，一旦 Solr 对文件进行了索引，我如何将额外的元数据添加到 Solr Cell 提取器无法从文件本身检索到的索引中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:52:17.750

如果您使用的是 Solr 4.0，您可以使用[部分文档更新功能](http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/)，您可以在其中只添加更新的字段，而不必提供所有字段。

# vb.net - 如何创建引用 DAO 的 COM 可访问 .NET 类？

> ID：13051661
> 
> 赞同：0
> 
> 时间：2012-10-24T14:46:36.767
> 
> 标签：vb.net, vba, com, ms-access-2007, dao

我正在尝试创建一个可在我正在构建的 VBA 项目中访问的 .NET 类库。我希望能够将 dao.recorset 对象作为参数传递给我的 .net 类库中的公共函数。

我的代码类似于

```
Public Sub PassDaoItem(item as DAO.recordSet)
    TODO: [Code Here]
End Sub 
```

当我使用 regasm 注册对象时，我收到以下错误：

```
Error

: Type library exporter cannot load type 'DAO.Recordset' (error: System.IO.FileN
otFoundException: Could not load file or assembly 'Interop.DAO, Version=5.0.0.0,
 Culture=neutral, PublicKeyToken=5db0597a00edd538' or one of its dependencies. T
he system cannot find the file specified.). 
```

对我如何做到这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:46:32.100

应该可以在 .net 代码中使用 dao recorset 只需添加对 dao 的引用：在 VS 中打开“解决方案资源管理器”>“引用”>“添加引用”>“.Net”，您应该会看到组件“dao”。

例如 C:\Program Files (x86)\Microsoft Visual Studio 9.0\Visual Studio Tools for Office\PIA\Office12\dao.dll。

访问 VBA 代码：

```
Option Compare Database
Option Explicit

Public Sub Test()
  Dim db As DAO.Database
  Dim rec As DAO.Recordset

  Set db = Application.CurrentDb
  Set rec = db.OpenRecordset("Table1")

  Dim dotNetObject As New COMAccessibleTest.ReadData
  dotNetObject.GetData rec

  rec.Clone
  db.Close
End Sub 
```

C#代码：

```
using System.Runtime.InteropServices;
using System.Text;

namespace ReadDataTest
{
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    [Guid("772de12c-3ade-4f43-9981-fd3c39691520")]
    public interface IReadData
    {
        void GetData(ref dao.Recordset data);
    }

    [ClassInterface(ClassInterfaceType.None)]
    [Guid("2acf2296-63b0-47b2-ab77-51c4e35e7365")]
    [ProgId("ReadDataTest")]
    public class ReadData : IReadData
    {
        public void GetData(ref dao.Recordset data)
        {
            var lines = new StringBuilder();

            data.MoveFirst();
            while (!data.EOF)
            {
                lines.AppendLine(data.Fields[0].Value + "," + data.Fields[1].Value + "," + data.Fields[2].Value + "," + data.Fields[3].Value);
                data.MoveNext();
            }

            var file = new System.IO.StreamWriter("c:\\Temp\\test.txt");
            file.WriteLine(lines);
            file.Close();
        }
    }
} 
```

# xpath - XPath - 选择一个或另一个元素

> ID：13051662
> 
> 赞同：14
> 
> 时间：2012-10-24T14:46:48.530
> 
> 标签：xpath

我正在使用 XPath 从 HTML 文档中获取一个元素。元素必须有特定的id，或者如果id不存在，则获取一个保证存在的元素（比如body元素）。

要通过其 id 获取元素，我使用：

```
css=#may-not-exist 
```

并获得我使用的后备元素（比如身体）：

```
css=body 
```

如何将上面的这两个表达式组合成一个表达式（get `#may-not-exist`else get `body`）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-24T14:52:52.897

可以使用`body`默认值。它将首先来自表达式，因为它先于其他任何内容开始（除非您在`head`.

```
(//*[@id="xxx"] | //body)[last()] 
```

## 解释：

该`( ... | ... )`部分返回其子部分的并集。它们是`*[@id="xxx"]`-- 任何其属性 id 的值为 xxx 的元素 -- 和 //body，即 body。从这个联合中，`[last()]`选择最后一个。返回的节点的排序方式与原始文档中的相同，因此 body 排在第一位（至少在 body 内部的任何内容之前）。如果存在具有 id 的元素，它将在 body 之后并被返回。如果不是，则 body 将作为从联合返回的唯一（第一个和最后一个）节点返回。

# wordpress - 替代 wordpress 中的跨度类？

> ID：13051665
> 
> 赞同：0
> 
> 时间：2012-10-24T14:47:05.783
> 
> 标签：wordpress

这是关于 Wordpress 功能的一个非常基本的问题。

如果我正在制作一个静态网站，并且我想将特殊样式或代码应用于我会使用的内容中的几个单词`<span class="">`。有没有办法在 Wordpress 中做到这一点？更具体地说，我希望允许用户在自定义字段中添加内容，但能够在该内容中标记一些单词，例如 class="movie-title"。

这样，我可以以特定方式为类设置样式，而无需依赖用户应用一致的样式。

编辑：已解决---对于阅读本文的任何人，我只是决定创建自定义简码，在内容周围添加带有类的跨度标签。如果您使用 WYSIWYG 字段，这仅适用于高级自定义字段。我还在 tinyMCE 编辑器中添加了一个按钮，单击该按钮会在突出显示的单词周围自动插入自定义简码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:02:28.930

我认为您需要的是：[TinyMCE Advanced](http://wordpress.org/extend/plugins/tinymce-advanced/)。根据描述，它将：“从主题样式表中导入 CSS 类并将它们添加到下拉列表中。” 我自己没有使用过它，但据我所知，它非常灵活。

如果您希望能够在自定义字段中使用它，您还应该查看[Advanced Custom Fields](http://wordpress.org/extend/plugins/advanced-custom-fields/)。它将允许您将 TinyMCE 编辑器添加到它们。

# c# - FileSystemRights ToString 格式

> ID：13051666
> 
> 赞同：0
> 
> 时间：2012-10-24T14:47:11.353
> 
> 标签：c#, .net-4.0, posix

我正在用 C# 枚举文件/文件夹，并想知道是否有任何库（或更好的 .Net 功能）可以将[FileSystemAccessRule.FileSystemRights](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.filesystemaccessrule.filesystemrights%28v=vs.100%29.aspx)属性格式化为类似于 unix 文件权限字符串的 POSIX；

> d--x-

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:04:23.847

当您可以打印出实际的字符串描述时，为什么还要编码字符串？

```
FileSystemRights Rights = 0;

Rights |= FileSystemRights.CreateFiles;
Rights |= FileSystemRights.ExecuteFile;

Console.WriteLine(Rights.ToString());

// Prints:   CreateFiles, ExecuteFile 
```

# ruby-on-rails-3 - 通过omniauth和facebook connect传递参数

> ID：13051669
> 
> 赞同：0
> 
> 时间：2012-10-24T14:47:21.077
> 
> 标签：ruby-on-rails-3, devise, omniauth

我正在尝试将参数传递给omniauth 回调，但我遇到了问题。当用户选择注册我的网站时，他必须选择他是否是青少年的成年人，然后显示注册表单。如果他选择使用 facebook connect，在他点击 facebook connect 后，注册表格会显示在回调页面上，但所有字段都填写了他的信息，除了密码。我也想找回他的成人/青少年选择，但真的不知道该怎么做。我正在使用带有omniauthable的设计，这就是我所做的：

Facebook 连接链接：

```
<%= link_to image_tag("connect-w-facebook.jpg", alt: "Connect with Facebook"),      omniauth_authorize_path(:user,:facebook,{var: 'adult'}), :id =>"logo", :class =>'connect-face- img'  %> 
```

所以我现在对变量进行硬编码以测试它是如何工作的。在我的回调页面上，我有：

```
 <%= debug request.env['omniauth.auth'] %>
  <%= debug request.env['omniauth.params'] %> 
```

这两个是 nul 并且不显示任何内容，除了 --- ...对于这两个字段...谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:36:27.513

好吧，我可以通过添加 omniauth_callback_controller 来解决它：

```
session[:omniauth] = request.env["omniauth.params"] 
```

通过在我的视图中检索 <%= session[:omniauth] %>

# c# - C# - 仅在数字更改时循环

> ID：13051670
> 
> 赞同：-2
> 
> 时间：2012-10-24T14:47:20.840
> 
> 标签：c#

我的代码示例：

```
string value = client.DownloadString("http://www.site.com/value.html"); // There is a value of something like a1x6b2xs2 (just one line with random numbers that changes randomly).
Console.WriteLine(value);
Console.ReadKey(); 
```

这就是所有的代码！仅当站点中的值发生更改时，我才需要让控制台再次写入数字！并使其成为一个不间断的循环，只需一次又一次地写入数字，但前提是旧值已更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T14:49:11.387

为什么不将前一个数字保存在变量中并在打印前检查它？

```
int previousNumber = int.MinValue; // some invalid value 
while (isRunning) {
    // wait three minutes
    int currentNumber = GetNumberFromSite();
    if (currentNumber != previousNumber) {
        Console.WriteLine(currentNumber);
        previousNumber = currentNumber;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:49:37.907

您只需要存储旧值，并在输出新值之前对其进行检查。

```
int oldVal = -1;

while (true)
{
  int newVal = GetNewValue();
  if (newVal != oldVal)
  {
     Console.WriteLine(newVal);
     oldVal = newVal ;
  }
  Thread.Sleep(1000 * 60 * 3)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:49:47.063

像这样的东西：

```
int current = ...;
int prev = current;
while(true)
{
    // get new number in current
    if(current != prev) 
        Console.WriteLine(current);
    prev = current;
    // wait 3 min
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T14:50:19.750

```
int? oldNumber = null;

// in your loop reading from the website:
if (oldNumber != null && newNumber != oldNumber)
{
    oldNumber = newNumber;
    Console.WriteLine(newNumber);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T14:53:10.057

将值写入 var，然后检查它是否已更改？

```
int old, new
new = getValue(file.html)
if new != old then
  write(new) 
old = new 
```

您可以自己将其转换为工作代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T14:51:32.400

您可以使用 a[`timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)定期检查该数字是否已更改。

```
private System.Threading.Timer checkNumberTimer;
private int currentNumber;

private void InitTimer()
{
    //start immediately, interval is in TimeSpan
    checkNumberTimer = new System.Threading.Timer(
        timer_Elapsed,
        null,
        TimeSpan.Zero,
        Properties.Settings.Default.Interval
    );
}

private void timer_Elapsed(Object state)
{
    int oldNumber = currentNumber;
    currentNumber  =  CheckNumber();
    if( oldNumber != currentNumber  )
        ShowNewNumber( currentNumber );
} 
```

# graph-drawing - 层分配的最长路径算法

> ID：13051672
> 
> 赞同：1
> 
> 时间：2012-10-24T14:47:24.823
> 
> 标签：graph-drawing, longest-path

我正在开发一个程序来生成公司的组织结构图。我一直在阅读关于对顶点进行分层的最长路径算法，有一件事一直困扰着我。我所做的阅读表明，该图应该从下往上分层，首先将没有子节点的节点放在底层，然后向上处理。但是，我还读到最长路径算法会导致底部非常宽的图。

我在想我会尝试从上到下构建图表，从没有父节点的节点开始，然后一路向下。也许这很常见，我只是没有看到它使用过，但我担心有一些我没有看到的原因导致这种方法不切实际。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:40:00.320

最长路径算法使高度最小化，但本质上忽略了宽度。如果您从下往上对图进行分层，并且该图有许多汇（出度为零的顶点），那么您将得到一个较宽的底层。如果您从上到下对图形进行分层，并且它有很多来源（入度为零的顶点），那么您将获得一个较宽的顶层。如果您将接收器的数量与源的数量进行比较，您可以选择使用哪个变体。但是，您可能仍然会得到较宽的中间层。要减少（而不是最小化）所有层的宽度，您需要查看类似[Coffman-Graham 算法的算法](http://en.wikipedia.org/wiki/Coffman%E2%80%93Graham_algorithm)。

# drools - Drools 检查列表中的重复字段

> ID：13051681
> 
> 赞同：2
> 
> 时间：2012-10-24T14:47:55.860
> 
> 标签：drools

我有一个对象 A，其中包含一个对象 B 的列表，该列表具有包括日期字段在内的各种字段。我需要编写一个规则来检查列表中的日期是否唯一但我有点卡在如何做到这一点......我有类似的东西：

```
rule "Check Unique Dates"
dialect "mvel"
when
    a : A
    list : java.util.List( ) from collect ( Date B.date (B.date!= null))
    set : java.util.Set( ) from collect ( Date B.date(B.date!= null))
    eval(list.size() == set.size())
then
    //do something
end 
```

我正在尝试做的是将对象 B 中的日期添加到列表和集合中，然后比较 2 的大小，但出现错误：

```
[ERR 102] Line 15:54 mismatched input 'B' in rule "Check Unique Dates" [0,0]: Parser returned a null Package 
```

知道我做错了什么吗？

我还需要通过 A 中的名称字段来限制它，因为可以有多个 A 实例...

再靠近一点我觉得...

```
when
    a : A

    b1 : B( d : date, date!= null )
    b2: B( date == d , eval( this != b1) ) 
```

但这会检查 B 的所有实例，即使它们不在此 A 实例的列表中（即使只有 6 个 B 实例，规则也会触发 1200 次！？）...我如何将检查限制为仅在此 A 实例中查找重复项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:30:01.513

这是我想出的..它有效：

```
when
    a : A( name == "xyz", coll : listOfB)       
    b1 : B( date1 : date, date!= null ) from coll
    b2 : B( date == date1, this != b1) from coll

then 
```

现在我需要去一个黑暗的房间里躺下......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T05:43:55.493

我认为最好创建一个单独的方法来检查重复项，例如 ListUtils.hasDuplicate(list)

# dynamics-crm - 我可以在 CRM 对话框中获取当前记录指南吗？

> ID：13051683
> 
> 赞同：0
> 
> 时间：2012-10-24T14:47:59.763
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我从某个记录表单上的功能区按钮调用 crm 对话框。有没有办法在对话框中获取此记录 Guid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:44:14.680

感谢所有回复。我找到了办法。在对话框表单助手中，我们应该查找：{ *EntityName }，而不是在 {* *EntityName* }下方的下拉列表中选择- 存储了有关调用对话框的当前记录的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:46:16.927

是的，这是一个很好的做法：

[http://crmmongrel.blogspot.com/2011/06/launch-dialog-from-ribbon-button-in-crm.html](http://crmmongrel.blogspot.com/2011/06/launch-dialog-from-ribbon-button-in-crm.html)

在第 6 步中，您会注意到功能区包含以下内容：

```
<CrmParameter Value="FirstPrimaryItemId" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T18:23:16.303

我的需求略有不同，因此提出的两个解决方案并不完全适合。我发布以防万一这对其他人有帮助。我想在提示和响应页面上显示 guid，然后将 guid 传递给自定义代码。

当然，CRM 会将主键 guid 转换为记录名称。

在代码中这没问题，因为我可以查询实体以获取该名称的记录，但其中有很多额外的处理。

我们在所有表格上都有一个管理选项卡，以获取额外的支持信息。在这种情况下，我只是创建了一个字段，将其放在管理选项卡上，然后添加此 javascript 以形成 OnLoad。

```
function PopulateRecordGuid()
{
   if (Xrm.Page.ui.getFormType() != 1)
   {
      if(Xrm.Page.getAttribute('xxxx_recordguid').getValue() == null )
      {
        var Id = Xrm.Page.data.entity.getId();
        Id = Id.replace('{', '');
        Id = Id.replace('}', '');
        Xrm.Page.getAttribute('xxxx_recordguid').setValue(Id);
      }
   }
} 
```

当然有很多变化，例如使用插件或触发记录创建的工作流填充创建消息等。

# delphi - 如何找到用于 TWebBrowser 异步可插入协议的 ComServer

> ID：13051691
> 
> 赞同：0
> 
> 时间：2012-10-24T14:48:24.070
> 
> 标签：delphi, twebbrowser

我目前已经成功地为一个APP实现了这个演示代码，[http://www.jasontpenny.com/blog/2010/03/23/custom-protocol-handler-in-delphi/](http://www.jasontpenny.com/blog/2010/03/23/custom-protocol-handler-in-delphi/)，但是它似乎只有在应用程序是单一形式的应用程序。

我发现没有为 CoGetClassObject 返回工厂：

```
procedure NewProtocolHandler(const aProtocolName: String; aProtocolCallback: TProtocolCallback; aProtocollType: TGUID);
var
    error : HRESULT;
begin
    if _protocol <> '' then
        raise Exception.Create('Currently only supports a single asynchronous pluggable protocol');

    _protocol := aProtocolName;
    _protocolCallback := aProtocolCallback;

    error := CoGetClassObject(Class_AsyncPlugProto_Protocol, CLSCTX_SERVER, nil, IClassFactory, Factory);
    CoInternetGetSession(0, InternetSession, 0);
    InternetSession.RegisterNameSpace(Factory, Class_AsyncPlugProto_Protocol, PChar(_protocol), 0, nil, 0);

    CoCreateInstance(aProtocollType, nil {was IUnknown(Self)}, CLSCTX_INPROC_SERVER, IUnknown, MyProtocol);
end; 
```

我开始相信这是由于初始化部分中的 ComServer 不正确造成的。

```
initialization
    TComObjectFactory.Create(ComServer, TAsyncPlugProto, Class_AsyncPlugProto_Protocol, 'Protocol', '', ciMultiInstance, tmApartment);
finalization
    EndProtocolHandler;
end. 
```

我的 Web 浏览器实际上并不是表单的一部分，因为我允许在我的应用程序中使用多个浏览器，因此 Browser 被声明为 TWinControl 并且如果满足 TWebBrowser 的条件，则它通过以下方式创建：

```
FBrowser := TWebBrowser.Create(nil); 
```

并访问为：

```
(FBrowser as TWebBrowser) 
```

我对 Com 函数还很陌生，那么我该如何找到相对于 TWebBrowser 的 ComServer？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:00:19.330

我认为你混淆了很多事情。如果您想制作一个 APP，如果您以多种方式使用 COM 对象完成了一些工作，将会有所帮助。

ComServer 对象实际上是一个中心对象，它包含一些 COM 内部结构，可以在 Delphi 项目中使用。由于 Internet Explorer 不是 Delphi 项目，您将无法获得*它的 ComServer*。此外，如果您仔细查看 TWebBrowser 对象，您会注意到它也是 IWebBrowser2 对象的 COM 内部的包装器。

TWebBrowser 和 TChromium 是两个独立的项目。`As`是一个伟大的运营商，但它不能改变任何你想要的东西。

如果您想要另一个 APP 示例，请查看此处：http: [//xxm.svn.sourceforge.net/viewvc/xxm/trunk/Delphi/local/xxmHandler.pas ?revision=235&view=markup](http://xxm.svn.sourceforge.net/viewvc/xxm/trunk/Delphi/local/xxmHandler.pas?revision=235&view=markup)

# winapi - 这两个bitblt的用法有什么区别？

> ID：13051700
> 
> 赞同：0
> 
> 时间：2012-10-24T14:49:03.050
> 
> 标签：winapi, mfc

阅读下面的代码：为什么**m_dcMem.BitBlt(0,0,m_size.cx, m_size.cy, &dcScreen, 0,0, SRCCOPY);** 工作，和**dcScreen.BitBlt(0,0,m_size.cx, m_size.cy, &m_dcMem, 0,0, SRCCOPY);** 不？谢谢！`

int CScreenDlg::OnCreate(LPCREATESTRUCT lpCreateStruct)

```
if (CDialog::OnCreate(lpCreateStruct) == -1)
    return -1;
// TODO:  Add your specialized creation code here   
ShowWindow(SW_HIDE);

CDC dcScreen;
dcScreen.CreateDC("DISPLAY", NULL, NULL, NULL);
//dcScreen.Attach(GetDC(GetParent()));
m_size.cx = GetDeviceCaps(dcScreen.GetSafeHdc(), HORZRES);
m_size.cy = GetDeviceCaps(dcScreen.GetSafeHdc(), VERTRES);

m_dcMem.CreateCompatibleDC(&dcScreen);
m_bmpScreen.CreateCompatibleBitmap(&dcScreen, m_size.cx,m_size.cy);
CBitmap* pOldBmp = m_dcMem.SelectObject(&m_bmpScreen);
//m_dcMem.BitBlt(0,0,m_size.cx, m_size.cy, &dcScreen, 0,0, SRCCOPY);
dcScreen.BitBlt(0,0,m_size.cx, m_size.cy, &m_dcMem, 0,0, SRCCOPY); //why it doesn't work???
CRect rect(0,0,m_size.cx, m_size.cy);

LEFT_RECT = CRect(INFO_OFFSET, INFO_OFFSET, INFO_OFFSET + INFO_WIDTH, INFO_OFFSET + INFO_HEIGHT);
RIGHT_RECT = CRect(m_size.cx - INFO_WIDTH-INFO_OFFSET, INFO_OFFSET, m_size.cx-INFO_OFFSET, INFO_OFFSET + INFO_HEIGHT);
m_rectInfo = LEFT_RECT;

m_bmpInfoBK.LoadBitmap(IDB_BITMAP_INFOBK);
MoveWindow(rect);
ShowWindow(SW_SHOW);
m_hCursor = LoadCursor(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDC_CURSOR_SELECT));
return 0; 
```

}

# python - 在 GridSearchCV 中使用 sample_weight

> ID：13051706
> 
> 赞同：12
> 
> 时间：2012-10-24T14:49:38.823
> 
> 标签：python, scikit-learn

是否可以执行`GridSearchCV`（以获得最好的 SVM 的 C）并`sample_weight`使用 scikit-learn 指定？

这是我的代码和我遇到的错误：

```
gs = GridSearchCV(
    svm.SVC(C=1),
    [{
        'kernel': ['linear'],
        'C': [.1, 1, 10],
        'probability': [True],
        'sample_weight': sw_train,
    }]
)

gs.fit(Xtrain, ytrain) 
```

> >> ValueError：估计器 SVC 的参数 sample_weight 无效

* * *

编辑：我通过获取最新的 scikit-learn 版本并使用以下内容解决了这个问题：

```
gs.fit(Xtrain, ytrain, fit_params={'sample_weight': sw_train}) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-12-29T01:13:22.510

只是试图结束这个长期悬而未决的问题......

您需要获取最新版本的 SKL 并使用以下内容：

```
gs.fit(Xtrain, ytrain, fit_params={'sample_weight': sw_train}) 
```

但是，它更符合传递`fit_params`给构造函数的文档：

```
gs = GridSearchCV(svm.SVC(C=1), [{'kernel': ['linear'], 'C': [.1, 1, 10], 'probability': [True], 'sample_weight': sw_train}], fit_params={'sample_weight': sw_train})

gs.fit(Xtrain, ytrain) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-30T17:08:16.283

以前的答案现在已经过时了。字典`fit_params`应该传递给`fit`方法。

从[GridSearchCV](http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html)的文档中：

> **fit_params** : 字典，可选
> 
> 传递给 fit 方法的参数。
> 
> > 自 0.19 版起已弃用：作为构造函数参数的 fit_params 在 0.19 版中已弃用，并将在 0.21 版中删除。而是将拟合参数传递给 fit 方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-26T21:35:36.107

在 0.16.1 版本中，如果使用`Pipeline`，则需要将参数传递给`GridSearchCV`构造函数：

```
clf = pipeline.Pipeline([('svm', svm_model)])
model = grid_search.GridSearchCV(estimator = clf, param_grid=param_grid,
    fit_params={'svm__sample_weight': sw_train}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-07T04:15:04.733

以下适用于 Sklearn 0.23.1，

```
grid_cv = GridSearchCV(clf, param_grid=param_grid,
                       scoring='recall', n_jobs=-1, cv=10)

grid_cv.fit(x_train_orig, y=y_train_orig,
            sample_weight=my_sample_weights) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-21T05:57:28.277

好问题和好答案！（感谢@Sycorax、@AN6U5 和@user1771485）。他们都帮助我找到了具体案例的答案，**我需要在 GridSearchCV 期间使用 sample_weight ，但我的估计器是使用 Pipeline 获得的**。该问题与之前的解决方案不同，因为 Pipeline 不支持 fit_param；实际上，如果您尝试`fit_param = {... }`在（GridSearchCV 的）拟合步骤中使用，您将得到

> Pipeline.fit 不接受 fit_param 参数。您可以使用 stepname__parameter 格式将参数传递给管道的特定步骤，例如`Pipeline.fit(X, y, logisticregression__sample_weight=sample_weight)`

我使用的管道是

```
pipe = Pipeline(steps=[('normalizer', norm), ('estimator', svr)]) 
```

哪里`norm`是归一化步骤，`svr = SVR()`和参数网格

```
parameters_svr = dict (estimator = [svr], estimator__kernel =  ['rbf', 'sigmoid'], ...) 
```

然后，按照@user1771485 的建议

```
grid = GridSearchCV (estimator = pipe, param_grid = parameters_svr, cv = 3,                            
                     scoring = 'neg_mean_squared_error', 
                     return_train_score = True, refit = True, n_jobs = -1) 
```

最后，（真正重要的部分）

```
grid.fit (X,y, estimator__sample_weight= weights) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-13T15:04:40.083

OP的编辑和其他答案并不完全正确。而对于拟合`fit_params={'sample_weight': weights}`工作，这些权重**不会用于计算验证损失！**（[github问题](https://github.com/scikit-learn/scikit-learn/issues/2879)）。

因此，交叉验证将报告未加权损失，因此超参数调整可能会转向错误的方向。

这是我使用准确性作为度量的类权重交叉验证的解决方法。还应该与其他指标一起使用。

```
from sklearn.metrics import accuracy_score
from sklearn.utils import compute_sample_weight
from sklearn.metrics import make_scorer

def weighted_accuracy_eval(y_pred, y_true, **kwargs):
    balanced_class_weights_eval = compute_sample_weight(
        class_weight='balanced',
        y=y_true
    )
    out = accuracy_score(y_pred=y_pred, y_true=y_true, sample_weight=balanced_class_weights_eval, **kwargs)
    return out

weighted_accuracy_eval_skl = make_scorer(weighted_accuracy_eval)

gridsearch = GridSearchCV(
    estimator=model,
    scoring=weighted_accuracy_eval,
    param_grid=paramGrid,
)

cv_result = gridsearch.fit(
    X_train,
    y_train,
    fit_params=fit_params
) 
```

# javascript - Chrome 扩展 - “端口错误：无法建立连接。接收端不存在”

> ID：13051707
> 
> 赞同：1
> 
> 时间：2012-10-24T14:49:40.357
> 
> 标签：javascript, google-chrome, google-chrome-extension, messaging

试图在我的 background.js 和 contentscript.js 之间进行通信

**清单.json**

```
{
    "name": "xxx",
    "version": "0.1",
    "manifest_version": 2,

    "permissions": [
        "tabs"
    ],

    "description": "xxx",
    "icons": { "16": "icon16.png",
               "48": "icon48.png",
               "128": "icon128.png" },

    "browser_action": {
        "default_title" : "xxx",
        "default_icon": "icon16.png",
        "default_popup": "popup.html"
    },

    "background": {
        "scripts": ["background.js"]
    },

    "content_scripts" : [
    {
        "matches" : [ "http://*/*" ],
        "js" : [ "contentscript.js", "jquery.js" ]
    }
  ]
} 
```

**背景.js**

```
var listePdt = {};
var selectedPdt = null;
var selectedId = null;

function updatePdt(tabId)
{
    chrome.tabs.sendMessage(tabId, {}, function(pdt) {
            chrome.pageAction.show(tabId);
    });
}

chrome.tabs.onUpdated.addListener(function(tabId, change, tab) {
    if(change.status == "complete")
    updatePdt(tabId);
});

chrome.tabs.onSelectionChanged.addListener(function(tabId, info) {
    selectedId = tabId;
    // and other things
});

chrome.tabs.getSelected(null, function(tab) {
    updatePdt(tab.id);
}); 
```

**内容脚本.js**

```
if(window == top)
{
    chrome.extension.onMessage.addListener(
        function(req, sender, sendResponse) {
            sendResponse(findPdt());
        }
    );
}

var findPdt = function() {

    // operations on a string

    return "string";
} 
```

但是我在控制台中为生成的背景页面收到以下错误“端口错误：无法建立连接。接收端不存在”......不明白为什么。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T06:31:49.530

突出的一件事是：

```
chrome.tabs.getSelected(null, function(tab) {
    updatePdt(tab.id);
}); 
```

它目前已被弃用（请参阅[此处](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-extensions/xNBppAYB4IQ)和[此处](http://developer.chrome.com/extensions/whats_new.html#16)），新方式看起来像这样（请注意，它`windowId: chrome.windows.WINDOW_ID_CURRENT`也包括在内以考虑您打开多个 Chrome 实例的情况（我有很多，显然 :)）。

```
chrome.tabs.query(
  {windowId: chrome.windows.WINDOW_ID_CURRENT, active: true}, function(tab) {
  updatePdt(tab.id);
  } ); 
```

但是，对于您的主要问题，当您从、屏幕或任何其他“非标准”页面（书签、查看源代码、检查元素本身等）加载扩展程序时，这个（和`getSelected`）都会引发`Port`您看到的错误。 )，所以我会忽略它们。使用您的代码，重新加载扩展程序，打开您的 Inspect Element 窗口，然后转到浏览器中的另一个选项卡并重新加载页面 - 您应该看到所需的操作完成（我添加了一个调用作为调用的一部分，请求的值是返回。换句话说，一切似乎都很好:)`chrome://extensions``New tab``console.log(pdt);``sendMessage`

# c# - 将非托管映像列表中的映像转储到磁盘

> ID：13051711
> 
> 赞同：1
> 
> 时间：2012-10-24T14:49:55.520
> 
> 标签：c#, .net, winapi, pinvoke, unmanaged

我正在从 USB 设备移植一个 C++ SDK 以通过 pinvoke 在 C# 中使用，到目前为止我取得了很好的进展，现在的问题是一个构建图像列表的函数，我可以使用它来附加到其他控件使用像[SetImageList](http://msdn.microsoft.com/en-us/library/y355zfta%28v=vs.80%29.aspx)这样的函数。

我想做的就是将此列表中的所有图像保存到磁盘并稍后使用它们。

还有其他函数可以返回此列表中特定图像的索引，因此我可以传递此索引，然后将图像保存到磁盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:43:40.593

使用[`CImageList`类](http://msdn.microsoft.com/en-us/library/9xc4z2c7.aspx)实例（通过调用现有实例的方法[`Detach`上](http://msdn.microsoft.com/en-us/library/b75edw6k.aspx)的[`GetImageList`方法](http://msdn.microsoft.com/en-US/library/hc0d17x3.aspx)[`CListCtrl`](http://msdn.microsoft.com/en-us/library/hfshke78.aspx)来获得），您可以通过调用[Detach 方法](http://msdn.microsoft.com/en-us/library/b75edw6k.aspx)`HIMAGELIST`来获取句柄。

[从那里您可以通过平台调用服务 (P/Invoke) 层调用](http://msdn.microsoft.com/en-us/library/aa446536.aspx)底层 Windows API 。

以下假设您在`HIMAGELIST`中具有此指针[`IntPtr`](http://msdn.microsoft.com/en-us/library/system.intptr.aspx)：

```
IntPtr imageList = ...; 
```

首先，您需要在 .NET中声明该[`ImageList_GetImageCount`函数：](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761552.aspx)

```
[DllImport("Comctl32.dll", SetLastError = true)]
static extern int ImageList_GetImageCount(IntPtr himl); 
```

当然，将该调用的结果存储在一个变量中：

```
int imageCount = ImageList_GetImageCount(imageList); 
```

您还需要能够获取有关每个图像的详细信息，因此您需要调用[`ImageList_GetImageInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761554.aspx)：

```
[StructLayout(LayoutKind.Sequential)]
struct RECT
{
    public int left, top, right, bottom;
}

[StructLayout(LayoutKind.Sequential)]
struct IMAGEINFO
{
    public IntPtr hbmImage;
    public IntPtr hbmMask;
    public int Unused1;
    public int Unused2;
    public RECT rcImage;
}

[DllImport("Comctl32.dll", SetLastError = true)]
static extern bool ImageList_GetImageInfo(IntPtr himl, int i,
    ref IMAGEINFO pImageInfo); 
```

有了这些，您可以开始循环以获取有关图像的信息：

```
for (int i = 0; i < imageCount; ++i)
{
    // The image info.
    var imageInfo = new IMAGEINFO();

    // Get the call to ImageList_GetImageInfo.
    if (!ImageList_GetImageInfo(imageList, i, ref imageInfo)
        throw new System.ComponentModel.Win32Exception(); 
```

请注意，[`IMAGEINFO`结构](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761393.aspx)中有一个字段，其中包含指向位图的指针（`hbmImage`字段）。

这是句柄的句柄，它在 .NET 中的[类](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)[`HBITMAP`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)中具有等价物。[您可以通过调用类](http://msdn.microsoft.com/en-us/library/84767bxk.aspx)上的静态[方法](http://msdn.microsoft.com/en-us/library/k061we7x.aspx)在两者之间进行转换（是的，奇怪的是它不在类上）：[`Bitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)[`FromHbitmap`](http://msdn.microsoft.com/en-us/library/k061we7x.aspx)[`Image`](http://msdn.microsoft.com/en-us/library/84767bxk.aspx)`Bitmap`

```
 using (Bitmap bitmap = Image.FromHbitmap(imageInfo.hbmImage))
    { 
```

拥有`Bitmap`实例后，您可以在每个实例上调用该[`Save`方法](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.save.aspx)将它们转储到磁盘：

```
 bitmap.Save("<need to generate a filename>.<and extension>");
    }
} 
```

请注意，.NET 中有[`ImageList`该类](http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.aspx)，但无法将`HIMAGELIST`句柄传递给托管实现（这会使这变得更容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:14:17.767

实际上，可以从 HIMAGELIST 句柄创建托管 ImageList。我测试了这个 2 分钟。前：

```
Public Shared Function ImageList_FromHIMAGELIST(cxcy As Integer, uFlags As UInteger, initSize As Integer, growSize As Integer, _
                                         hicons() As IntPtr) As ImageList

    Dim himl = ImageList_Create(cxcy, cxcy, uFlags, initSize, growSize)
    If Not IsNothing(hicons) AndAlso hicons.Length > 0 Then
        For Each HIcon As IntPtr In hicons
            ImageList_ReplaceIcon(himl, -1, HIcon)
        Next
    End If
    Dim NativeILType As Type = _
        GetType(Button).Assembly.GetType("System.Windows.Forms.ImageList+NativeImageList", False, True)
    If IsNothing(NativeILType) Then
        Return Nothing
    Else
        Dim natObj As Object = _
            Activator.CreateInstance( _
                NativeILType, BindingFlags.Instance Or BindingFlags.NonPublic, Nothing, {himl}, Nothing)

        If Not IsNothing(natObj) Then
            Dim iml As New ImageList With {.ImageSize = New Size(cxcy, cxcy)}
            iml.GetType.InvokeMember("nativeImageList", _
                                     BindingFlags.NonPublic Or BindingFlags.Instance Or BindingFlags.SetField, _
                                      Nothing, iml, {natObj})
            Return iml
        End If
    End If
    Return Nothing
End Function 
```

# html - 从另一个 CSS 类继承

> ID：13051721
> 
> 赞同：4
> 
> 时间：2012-10-24T14:50:27.173
> 
> 标签：html, css, css-selectors

我在这里有一个我似乎无法弄清楚的问题，直到现在我的 css 有点草率，而且在看起来正确之前，它总是一个被破解的案例，但我决定正确地学习它，我尽可能地对事物进行分类。

所以我有一个布局，它有一个无序列表，这个列表有三个 li 标签，每个 li 标签中有两个 div。

现在我为这些容器中的每一个都有一个类，它们可以称为 container_1 container_2 等等。

现在它们每个都有一些独特的属性，但它们也遵循一组样式，例如，每个 li 中的 div 是并排的，因此它的两个 div 集也都将具有圆角。

所以我想我可以创建一个类rounded_corners加上float_left和float_right，这样我就可以像这样引用东西类，而不是重新输入代码来圆角或浮动一些东西：

```
.container_1 .rounded_corners .float_left
{

}
 .container_2 .rounded_corners .float_right
{

} 
```

但是当我使用它时，我失去了我的样式，所以我使用了一个逗号，这允许 sty;ing 让 div 回来，但角落和浮动不起作用。

那么我在哪里错了呢？

这是我的代码，我已经删除了破坏布局的代码，但是如果您删除注释，您可以看到会发生什么。

[http://jsfiddle.net/ragebunnykickass/g3Zaz/](http://jsfiddle.net/ragebunnykickass/g3Zaz/)

命名有点不同，但你会知道是什么意思。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-24T14:58:14.677

CSS 类不能继承，所以你要做的就是将它们拆分为尽可能多的原子。例如，如果您有一个圆角类，它*可能*适用于容器：

```
.rounded-corners
{
   /* Your CSS to define rounded corners */
} 
```

请注意，您只定义圆角的属性。现在假设您有一个类来设置容器样式（例如使用适当的填充）：

```
.container
{
    /* Your CSS to define a nice container */
} 
```

如何将它们结合在一起？这不会在 CSS 中完成，而是在 HTML 中完成，在此示例中，它`<div>`继承自`container`和`rounded-corners`：

```
<div class="container rounded-corners">
</div> 
```

现在假设您需要非容器对象的圆角：

```
<div class="rounded-corners">
</div> 
```

这就是 CSS 的工作原理。不要将它们（因为名称）与面向对象语言的类进行比较。每个类都定义了一组属性，这些属性将应用于属于该类的所有元素。最终元素样式是从元素所属的每个类继承的属性的*组合。*

**注意**：总结一下：答案是*肯定的，您可能需要重复一些代码*。如果您使用类作为样式的短名称，您将很难管理您的代码（HTML 和 CSS）：您会发现您错过了将内容与样式分开的要点（因为在 HTML 中您将定义，使用类`rounded-corners`，*显式*外观）。想象一下：下个月你要改变你的网站风格和时尚要求强加给你方角。您必须更改您的 HTML 代码（除非您接受有一个`rounded-corners`类来应用方形边框）。如果您简单地说`container`并让您的 CSS 定义（并知道）`container`应该如何呈现 a 会更好。

它可能适用于您或不适用（取决于您的偏好、品味和开发环境），但您可以看看[LESS](http://lesscss.org/)。它被实现为将解析您的 CSS 的 JavaScript。当然，您不会编写一个纯粹有效的 CSS，但您会获得许多新功能。在您的情况下，您可能会发现[mixins](http://en.wikipedia.org/wiki/Mixin)是您所需要的：

```
.rounded-corners
{
    /* Your CSS here */
}

.float-left
{
    /* Your CSS here */
}

.container
{
    .rounder-corners
    .float-left
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:56:44.177

你可以有这样的 CSS 代码：

```
.container_1 {

}
.rounded_corners {

}
.float_left {

} 
```

然后以这种方式为 HTML 元素设置一个类：

```
<div class="container_1 rounded_corners float_left">...</div> 
```

所以 DIV 元素会继承每一个类的每一个样式！显然，DIV 只是一个例子，你可以使用每个标签！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:00:58.713

如果我做得好，你想要一组类应用于每个 div 吗？

我会这样分解它：

css

```
.rounded_corners {}
.float_left {}
.float_right {}
.container {} 
```

并在 html

```
<li id="container_1" class="container float_left rounded_corners">...</li>
<li id="container_2" class="container float_right rounded_corners">...</li> 
```

ETC...

# sql - 在 PostgreSQL 中的组内对行进行排序

> ID：13051724
> 
> 赞同：4
> 
> 时间：2012-10-24T14:50:30.103
> 
> 标签：sql, postgresql, sql-order-by

我有以下查询：

```
SELECT
  routeid, 
  'SRID=4326;LINESTRING(' || string_agg(lon || ' ' || lat, ',') || ')' AS the_geom
FROM route_table 
WHERE observation_time BETWEEN '2012-09-12 10:00:00' AND '2012-09-12 10:15:00'
GROUP BY routeid HAVING COUNT(lon) > 1 ORDER BY observation_time ASC; 
```

此查询的目标是从 route_table（由 routeid、observation_time、lat 和 lon 列组成）中提取所有 lon/lat 值，按 routeid 对它们进行分组，并按观察时间在每个组中对它们进行排序。但是，上面的 SQL 无效，因为 observation_time 出现在 ORDER BY 子句中，而不是出现在 GROUP BY 中。当我将观察时间添加到 GROUP BY 时，我没有得到正确的结果。

假设这样的数据集：

```
routeid | observation_time      | lat | lon
---------------------------------------------
    1   | '2012-09-12 01:00:00' | 30  | -75
    1   | '2012-09-12 01:05:00' | 31  | -76
    1   | '2012-09-12 01:10:00' | 31  | -76.5
    2   | '2012-09-12 01:03:00' | 39  | -22
    2   | '2012-09-12 01:00:00' | 40  | -22
    2   | '2012-09-12 01:06:00' | 41  | -22 
```

输出应如下所示：

```
routeid | the_geom
--------------------------------------------------------
    1   | 'SRID=4326;LINESTRING('-75 30,-76 31,-76.5 31)
    2   | 'SRID=4326;LINESTRING('-22 40,-22 39,-22 41) 
```

所以问题是：如何在 PostgreSQL 中实现组内行的这种顺序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T15:02:30.947

感谢 MarcB 的评论，我意识到问题在于 string_agg 函数中的排序，所以解决方案是：

```
SELECT 
  routeid, 
  'SRID=4326;LINESTRING(' || string_agg(lon || ' ' || lat, ',' ORDER BY time ASC) || ')' AS the_geom
FROM route_table 
WHERE observation_time BETWEEN '2012-09-12 10:00:00' AND '2012-09-12 10:15:00'
GROUP BY routeid HAVING COUNT(lon) > 1; 
```

# bash - 使用 sed 并删除最后一行

> ID：13051729
> 
> 赞同：0
> 
> 时间：2012-10-24T14:50:51.947
> 
> 标签：bash, sed

我正在使用 sed 命令删除前两行，但是当我将内容重定向到文件时，会出现行数。我不知道如何删除它。

我执行：

```
sed '7,9d' mi_fichero.txt 
```

结果是：

（我写最后几行）

```
 /XTENT/D3/REPOSITORY/20120305/2201/65601/84/1330951636844_D3_448987414829688495_.indd.gz
 /XTENT/D3/REPOSITORY/20120308/2201/65601/22/1331198783835_D3_3411473776849856760_.indd.gz
 /XTENT/D3/REPOSITORY/20120308/2201/65601/158/1331220874606_D3_2742969984589497048_.indd.gz
 /XTENT/D3/REPOSITORY/20120313/2201/65601/0/1331626743284_D3_7551629114585379089_.indd.gz
 /XTENT/D3/REPOSITORY/20120309/2201/65601/92/1331295878839_D3_4724445611762228808_.indd.gz
(60 rows) 
```

我想删除该行（60行），有人可以帮我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:53:42.477

这可能对您有用（GNU sed）：

```
sed -i '7,9d;$d' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:11:13.350

已经有一个正确的答案，这不是 sed，而是使用 awk 的另一种方法

```
awk -v nl=$(wc -l < mi_fichero.txt) 'NR!=7 && NR!=9 && NR!=nl {print $0}' mi_fichero.txt 
```

# java - 在扩展泛型类的类中初始化实例变量

> ID：13051737
> 
> 赞同：1
> 
> 时间：2012-10-24T14:51:10.947
> 
> 标签：java, list, generics, extend

我有一个通用类“SimpleList”（摘录）：

```
public abstract class SimpleList<T> {

   protected List<T> list;

   public SimpleList(List<T> list) {
      this.list = list;
   }
} 
```

还有另一个扩展它的类“TrackList”（摘录）：

```
public class TrackList extends SimpleList {

    public TrackList(List<XmlTrack> list) {
        super(list);
    }
} 
```

在“TrackList”中，我指定列表将保存“XmlTrack”类型的对象。不过，似乎不可能从该列表中获取对象并访问其方法。例如，这不起作用：

list.get(0).someMethodSpecificToXmlTrack()

我不明白为什么这不起作用？“SimpleList”中的列表不是设置为仅包含“XmlTrack”吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T14:52:46.937

您需要将其定义为

```
public class TrackList extends SimpleList<XmlTrack> {

    public TrackList(List<XmlTrack> list) {
        super(list);
    }
} 
```

因为`SimpleList`是通用的，但是你在扩展它时没有指定类型参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:53:16.390

可能是你需要

公共类 TrackList 扩展 SimpleList< **XmlTrack** >

# ruby-on-rails - rails如何在集合复选框上的标签之前放置复选框？

> ID：13051746
> 
> 赞同：0
> 
> 时间：2012-10-24T14:51:32.430
> 
> 标签：ruby-on-rails, collections, checkbox, label

使用此代码：

```
 - @contacts.each do |contact|
    = label_tag "contact[#{contact.id}]", contact.slug
    = check_box_tag "contact[#{contact.id}]", contact.id
    .clear 
```

结果是：

```
 <label for="contact_1">Avalon3323</label>
                    <input id="contact_1" name="contact[1]" type="checkbox" value="1" />
                    <div class='clear'></div>
                    <label for="contact_2">doutzen</label>
                    <input id="contact_2" name="contact[2]" type="checkbox" value="2" />
                    <div class='clear'></div>
                    <label for="contact_3">jannie6674</label> 
```

根据文档，这似乎没问题。

标签仍然位于复选框之前。是否必须使用 CSS 解决此问题？html顺序本身不应该正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:59:12.760

你试过交换代码吗？

```
= check_box_tag "contact[#{contact.id}]", contact.id
= label_tag "contact[#{contact.id}]", contact.slug 
```

# blackberry - BlackBerry 在 BES 基础架构中订阅/取消订阅用户推送的最佳实践

> ID：13051747
> 
> 赞同：1
> 
> 时间：2012-10-24T14:51:34.940
> 
> 标签：blackberry, widget, push-notification

我正在为 BES 基础架构中的 BB OS v5-6 开发应用程序（小部件）。该应用程序将可供所有用户安装。为 BES 中的推送订阅/取消订阅用户的最佳做法是什么？向所有用户发送推送并不是最好的主意。我怎么知道用户已经安装并运行了它？

# php - PHP 命名空间和类

> ID：13051749
> 
> 赞同：-2
> 
> 时间：2012-10-24T14:51:37.517
> 
> 标签：php, namespaces

我有两个类，都在不同的命名空间中。当我尝试从一个命名空间创建对象时，我得到了错误

```
Fatal error:  Class 'Classes\DrDatabase' not found in C:\Path\to\workspace\AplicationName\app\models\Users.model.php on line XY 
```

php命名空间有什么我不明白的吗？

两个文件：

```
FILE 1
namespace Classes;

class DrDatabase extends MssqlDatabase {

public function __construct() {
    parent::createLog(__CLASS__);
    parent::connect('ipaddress', 'database', 'user', 'password');
    if ($this->link) {
        $this->log->info('Connected');
    }
}
}

FILE 2
namespace Model;

use \Classes\DrDatabase;

class UsersModel implements MasterModel {
    private function get($id, $onlyEnabled) {
        $db = new DrDatabase();
        $getOnlyEnabled = 1;
        if (!$onlyEnabled)
            $getOnlyEnabled = 0;
        $SQL = "SELECT * FROM table";
        $resultSet = $db->query($SQL);
        $result = array();
        while ($row = mssql_fetch_assoc($resultSet)) {
            $result[] = self::createUserObject($row['col1'],$row['col2']);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:54:43.087

除非您使用的是正确配置的自动加载器，否则您仍然必须包含“文件 1”才能使其正常工作。

否则 - 你怎么`UserModel`知道在哪里可以找到`DrDatabase`课程？

# xml - Powershell选择数组中包含属性的XML节点

> ID：13051751
> 
> 赞同：2
> 
> 时间：2012-10-24T14:51:47.203
> 
> 标签：xml, powershell, xpath

假设我有如下结构：

```
[xml]$i = "
<root>
    <item>
        <id>1</id>
        <data>Content_Of_1</data>
    </item>
    <item>
        <id>2</id>
        <data>Content_Of_2</data>
<item>
    <id>5</id>
    <data>Content_Of_5</data>
</item>
    </item>
</root>
"

$foo = @(1,2,3) 
```

我想选择 $i.root.item.data ，其中 $i.root.item.id 在 $foo 中。

要在数组中选择与 ID 匹配的节点，我可以执行以下操作：

```
($i.root.item | ? {$foo -contains $_.id}) 
```

但是由于某种原因，如果我尝试访问 $_.data，我什么也得不到：

```
($i.root.item | ? {$foo -contains $_.id}).data 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:37:39.230

> 但是由于某种原因，如果我尝试访问 $_.data，我什么也得不到：

```
($i.root.item | ? {$foo -contains $_.id}).data 
```

您一无所获的原因是您试图访问整个**集合**中不存在的属性（数据）。您需要执行以下操作：

```
$i.root.item | ? {$foo -contains $_.id} | ForEach-Object { $_.data } 
```

它访问**每个**对象的数据属性。您还可以为每个对象选择数据属性中的值：

```
$i.root.item | ? {$foo -contains $_.id} | Select-Object data 
```

这将产生一个 PSCustomObjects 数组，其中每个对象将包含一个名为 data 的属性（与 ForEach-Object 示例中的字符串数组相反）。

请注意，在 Powershell 3.0 中，使用新的属性枚举功能，您的原始语法将产生所需的结果，因为枚举将自动完成。

# twitter-bootstrap - 尝试（失败）使用引导模式传递参数

> ID：13051753
> 
> 赞同：1
> 
> 时间：2012-10-24T14:52:08.733
> 
> 标签：twitter-bootstrap, modal-dialog

我正在使用模式选项框实现各种列表。想象一个属性列表（可在[www.keydataweb.co.uk/bootstrap/manageprops.php](http://www.keydataweb.co.uk/bootstrap/manageprops.php)找到） - 当用户希望执行一个操作时，我正在触发一个 Modal 并且需要将属性的 ID 传递给它。我的方法主要基于我在堆栈溢出中发现的响应，但是一旦放入页面中它就停止运行了。我认为这可能与我的 JS 有关，但我不完全确定如何最好地放置它，或者纠正我遇到的任何当前错误：

```
$(document).on("click", ".open-delPropDialog", function () {
     var propForDel = $(this).data('id');
     $(".modal-body #propId").val( propForDel );
    $('#delPropDialog').modal('show');
}); 
```

这是一个带有我当前代码的分叉 JSFiddle：http: [//jsfiddle.net/mxqUX/](http://jsfiddle.net/mxqUX/)

JSFiddle 已集成到我的页面中，但尚未设置样式，因此两个按钮位于顶部。

请帮忙！

最初基于：（http://stackoverflow.com/questions/10626885/passing-data-to-a-bootstrap-modal）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:47:39.573

您在代码块中的内容：

```
$(".modal-body #propId").val( propForDel ); 
```

您在 JSFiddle 和您的网站上拥有的内容：

```
$(".modal-body #delPropDialog").val( propForDel ); 
```

修复您的 JSFiddle 和您的网站以匹配您在代码块中拥有的代码，那么您应该一切顺利。

更新[了 jsfiddle](http://jsfiddle.net/mxqUX/4/)

# vb.net - VB.NET - StrDup 不能正常工作？

> ID：13051754
> 
> 赞同：2
> 
> 时间：2012-10-24T14:52:15.627
> 
> 标签：vb.net, string

据我了解，这段代码：

```
Microsoft.VisualBasic.StrDup(3, "123") 
```

应该返回`123123123`。相反，它返回`111`，就好像它正在处理一个错误的重载`StrDup`（一个接受`char`）。如果这是设计使然，是否有任何内置功能可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T14:52:15.627

根据 MSDN，[`StrDup`](http://msdn.microsoft.com/en-us/library/k6kzch7a.aspx)只选择第一个字符，无论您指定 a`Char`还是 a `String`：

> 字符 - 必需。任何有效的 Char、String 或 Object 表达式。只会使用表达式的第一个字符。如果 Character 是 Object 类型，则它必须包含 Char 或 String 值。

`StrDup`对字符串做的最好的方法是：

```
String.Join("", Enumerable.Repeat("123", 3)) 
```

# html - Div 高度 100% 使页面具有滚动

> ID：13051757
> 
> 赞同：1
> 
> 时间：2012-10-24T14:52:18.093
> 
> 标签：html, sticky-footer

我有以下结构：

```
<header></header>
<nav></nav>
<section id="mainContainer">
<section id="innerContainer">
</section>
</section>
<footer></footer> 
```

并遵循css：

```
html {
    height: 100% !important;
}

body {
    height: 100% !important;
}

body header {
    min-width: 1280px;
    height: 78px;
}

body nav {
    height: 41px;
}

body section#mainContainer {
    height: 100%;
}

body section div#innerContainer {
    height: 100%;
}

body footer {
    height: 48px;
} 
```

主要目标是 - 制作粘性页脚。但是像这样的 css 配置只会让滚动出现在我的页面上。我`ve already tryed all possible variations of making sticky footers, but all of them gave me the same result. What I`做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:54:23.177

由于这些，您正在滚动

```
body section#mainContainer {
    height: 100%;
}

body section div#innerContainer {
    height: 100%;
} 
```

你正在添加一个页眉、导航和页脚，这会导致页面增加高度，即 100% + 78px + 41px+ 48px；

如果你需要一个粘性页脚而不是[ryan fait 的粘性页脚](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://ryanfait.com/sticky-footer/&ei=9wCIUP-cAYLNrQf-14DoAw&usg=AFQjCNH2eGGZjDDeJcH7bSZswM4d0AnDTw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:56:47.233

为您的页脚使用固定

```
body footer {
  position: fixed;     
  right: 0;
  left: 0;  
  bottom: 0;    
} 
```

# php - wsdl curl错误7：无法连接到主机

> ID：13051761
> 
> 赞同：0
> 
> 时间：2012-10-24T14:52:24.927
> 
> 标签：php, linux, curl, wsdl, nusoap

我在 linux 服务器上有一个 PHP 网站。我正在使用网站上的`nusoap`功能`nusphere`连接到电子服务网关。几个月来我没有问题，但最近我收到以下错误。

```
Error: wsdl error: Getting https://www.something.com:27635/eservice.asmx?wsdl - HTTP ERROR: cURL ERROR: 7: couldn't connect to host 
```

我联系了我的 linux 主机服务器并询问他们 telnet 地址和端口 27635。下面是结果

```
root@ns3 [~]# telnet www.something.com 27635
Trying 212.80.nn.nn...
Connected to www.something.com (212.80.nn.nn).
Escape character is '^]'.
Connection closed by foreign host.

root@ns3 [~]# wget https://www.something.com:27635
--2012-10-23 10:54:46--  https://www.something.com:27635/
Resolving www.something.com... 212.80.nn.nn
Connecting to www.something.com|212.80.nn.nn|:27635... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4740 (4.6K) [text/html]
Saving to: `index.html.1' 
```

似乎连接正常。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:23:12.080

最后！我找到了解决方案。

几周前，我更改了一些 PHP 程序以使用 gzip 压缩。

`ob_start("ob_gzhandler")`我在程序的开头插入了，但我忘记了放在`ob_flush()`它们的末尾。

所以有一些嵌套的输出缓冲。

除了我使用 CURL 的 WSDL eservice 程序之外，所有程序都没有问题。

它生成 curl 错误 7 或 28。

# ruby - 如何仅将某些字符与正则表达式匹配？

> ID：13051772
> 
> 赞同：4
> 
> 时间：2012-10-24T14:53:01.197
> 
> 标签：ruby, regex

我想检查一个字符串是否只匹配一些带有正则表达式的字符。

例如，我只想匹配`a`、`b`或`c`。

所以，“aaacb”会通过，但“aaauccb”不会（因为`u`）。

我试过这样：

```
/[a|b|c]+/ 
```

但它不起作用，因为失败的例子通过了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T14:54:42.307

您需要通过将正则表达式锚定到字符串的开头和结尾来确保您的字符串**仅**包含这些字符：

```
/^[abc]+$/ 
```

您还混淆了两个概念。交替（这将是`(a|b|c)`）和字符类（这将是`[abc]`）。在这种情况下，它们是等效的。你的版本也允许`|`作为一个角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:09:42.210

```
 /[^abc]/ 
```

是一个从 rubular 中抄袭的[例子](http://www.rubular.com)。它匹配任何单个字符，除了：a、b 或 c

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T15:01:48.230

试试 [abc]+

它将匹配 a、b 或 c。

# microsoft-fakes - 为什么 Microsoft.Fakes 中没有接口存根

> ID：13051775
> 
> 赞同：2
> 
> 时间：2012-10-24T14:53:10.417
> 
> 标签：microsoft-fakes

我即将在我的单元测试中使用 Microsoft.Fakes。我阅读了一个[教程](http://www.richonsoftware.com/post/2012/04/05/Using-Stubs-and-Shim-to-Test-with-Microsoft-Fakes-in-Visual-Studio-11.aspx)，其中 Microsoft.Fakes 为接口创建存根（在解决方案中实现），但在我的解决方案中存根仅适用于类。

你能告诉我我应该怎么做才能得到所有插曲的存根。接口和类都被定义为公共的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:07:01.953

Fakes 默认为类和接口生成存根。您可能遇到了当前的限制之一，这导致 Fakes 跳过您的界面。要进行故障排除，

*   打开 .Fakes 文件并将 Fakes 元素的 Verbosity 属性设置为“Verbose”
*   打开工具 -> 选项 -> 项目和解决方案 -> 构建并运行并将 MSBuild 输出详细程度更改为“详细”
*   构建包含 .Fakes 文件的项目
*   打开输出窗口并搜索 GenerateFakes 任务；查看它的输出以获取解释为什么特定接口没有被存根的信息。

在即将发布的 Visual Studio 2012 季度更新 1 中，无论日志记录设置如何，此信息都会在错误列表窗口中报告为警告，这将使故障排除更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T16:14:42.513

您可能还没有深入到正确的命名空间。Fakes 是在与被测程序集中的接口相同的命名空间中生成的。因此，例如，如果您正在测试 MyApp.Validators.IRequestValidator，在您的单元测试中，您必须使用`new MyApp.Validators.Fakes.StubIRequestValidator()`而不是`new MyApp.Fakes.StubIRequestValidator()`.

# ios - iOS：是否可以从 Safari 浏览器访问存储的数据（比如图像）

> ID：13051779
> 
> 赞同：0
> 
> 时间：2012-10-24T14:53:21.633
> 
> 标签：ios

我的 IT 部门 有一个用 java 构建的网络应用程序，他们希望能够访问 iPad 上存储的图像。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:30:52.097

iOS Safari 浏览器不运行 Java。但是，从 iOS 6 开始，它确实支持使用标准 HTML 文件上传表单上传保存的图像。

# java - java random 的标准偏差边界是什么？

> ID：13051783
> 
> 赞同：0
> 
> 时间：2012-10-24T14:53:30.290
> 
> 标签：java, random, ab-testing

我正在使用 java 6 random (java.util.Random,linux 64) 随机决定在提供页面的一个版本到第二个版本之间进行随机决定（普通 A/B 测试），从技术上讲，我使用默认的空构造函数初始化该类一次并将其作为属性注入到 bean (Spring) 中。大多数情况下，页面的副本彼此之间的误差在 8%(+-) 以内，但有时我会看到高达 20% 的偏差，例如：

我现在有两个分开的副本：680 / 570 被认为是正常的吗？有没有比 java random 更好/更快的版本？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:11:48.747

20% 的偏差确实看起来相当大，但您需要与训练有素的统计学家交谈，以确定它是否在统计上异常。

**更新**- 答案是它不一定是异常的。统计数据预测，大约 0.3% 的时间会出现这样的异常值。

* * *

随机数生成器导致这样的结果当然是合理的。该类`Random`使用简单的“线性同余”算法，并且此类算法具有强自相关性。根据您使用随机数的方式，这可能会导致应用程序级别的异常。

如果这是您的问题的原因，那么您可以尝试用加密强度随机数生成器替换它。请参阅 .java 文档[`SecureRandom`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)。 `SecureRandom`比 贵`Random`，但这不太可能对您的用例产生任何影响。

* * *

另一方面，如果这些异常值实际上以理论预测的大致速度发生，那么更改随机数生成器应该不会产生任何影响。

如果这些异常值真的很麻烦，那么你需要采取不同的方法。与其生成 N 个随机选择，不如生成一个完全符合所需比率的 false/true 列表，然后将列表打乱；例如使用[`Collections.shuffle`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#shuffle%28java.util.List,%20java.util.Random%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:56:49.680

java.util.Random.nextBoolean() 是标准二项分布的一种方法，其标准差为 sqrt(n*p*(1-p))，p=0.5。

因此，如果您进行 900 次迭代，则标准差为 sqrt(900*.5*.5) = 15，因此大多数情况下分布在 435 - 465 范围内。

然而，它是伪随机的，并且在重新开始之前它会经历一个有限的数字循环。因此，如果您有足够的迭代次数，实际偏差将比理论偏差小得多。Java 使用公式种子 = (seed * 0x5DEECE66DL + 0xBL) & ((1L << 48) - 1)。您可以使用较小的数字编写一个不同的公式来故意获得较小的偏差，这将使其成为更差的随机数生成器，但更适合您的目的。

例如，您可以在其中创建一个包含 5 个真和 5 个假的列表，并使用 Collections.shuffle 来随机化该列表。然后你依次迭代它们。10 次迭代后，您重新排列列表并从头开始。这样你的偏差永远不会超过 5。

有关数学，请参见[http://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:10:20.730

我相信这是相当正常的，因为它是为了生成随机序列。如果您想要在一定间隔后重复模式，我认为您可能希望在构造函数中使用特定`seed`值并在一定间隔后使用相同的种子重置随机数。

例如，在每 100/500/n 次调用后`Random.next..`，使用方法重置具有旧值的种子`Random.setSeed(long seed)`。

# python - 使用 os.walk 的嵌套列表理解

> ID：13051785
> 
> 赞同：13
> 
> 时间：2012-10-24T14:53:32.930
> 
> 标签：python, list-comprehension

试图枚举某个目录中的所有文件（如 Linux 中的“find .”或 Windows 中的“dir /s /b”）。

我想出了以下嵌套列表理解：

```
from os import walk
from os.path import join
root = r'c:\windows'      #choose any folder here
allfiles = [join(root,f) for f in files for root,dirs,files in walk(root)] 
```

不幸的是，对于最后一个表达式，我得到：

`NameError: name 'files' is not defined`

与[这个](https://stackoverflow.com/q/1198777/341971)问题相关，这（虽然有效）我无法理解嵌套列表理解的语法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T14:55:23.567

您需要反转嵌套；

```
allfiles = [join(root,f) for root,dirs,files in walk(root) for f in files] 
```

请参阅[列表理解文档](http://docs.python.org/reference/expressions.html#list-displays)：

> 提供列表推导时，它由一个表达式组成，后跟至少一个`for`子句和零个或多个`for`or`if`子句。在这种情况下，新列表的元素是通过将每个`for`or`if`子句视为一个块、从左到右嵌套并在每次到达最里面的块时计算表达式以产生一个列表元素而产生的元素。

换句话说，因为您基本上想要以下道德等价物：

```
allfiles = []
for root, dirs, files in walk(root):
    for f in files:
        allfiles.append(f) 
```

您的列表理解应该遵循相同的顺序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T14:55:19.633

这是：

```
allfiles = [join(root, f) for _, dirs, files in walk(root) for f in files] 
```

# java - 什么是最轻量的 xstream 转换？

> ID：13051786
> 
> 赞同：-1
> 
> 时间：2012-10-24T14:53:33.537
> 
> 标签：java, serialization, xstream

我正在使用[XSTREAM](http://x-stream.github.io/)在我的应用程序中序列化我的消息。

我看到有更多的方法可以在 xstream 中生成[COMPACT MESSAGES](https://stackoverflow.com/questions/894625/how-to-disable-pretty-printingwhite-space-newline-in-xstream)，但我需要知道哪个是最轻量的（谈论内存）方法来转换我的消息。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:46:32.767

有不同的驱动程序，例如 JettisonMappedXmlDriver 和 DomDriver。在所有这些中，JettisonMappedXmlDriver 会更有效率。

# google-maps - 谷歌地图 V3 从叠加层获取 kml 描述

> ID：13051792
> 
> 赞同：0
> 
> 时间：2012-10-24T14:53:46.487
> 
> 标签：google-maps

我找到了一个包含所有国家/地区数据的 KML 文件，它可以很好地用作叠加层，我已经发布了 KML 文件中一个国家/地区的示例 - 我的问题是：

我已经关闭了信息窗口`suppressInfoWindows: true`，当用户单击地图时，如何将描述标签内容作为 var 获取？我知道点击事件部分我只需要知道如何从 kml 获取信息。

```
<Placemark><name>Aruba</name><description>ISO_A2=AW</description><LookAt><longitude>-69.98267466267889</longitude><latitude>12.52088880763951</latitude><heading>10.0</heading><tilt>10.0</tilt><range>700</range></LookAt><Style><IconStyle><color>00ffffff</color><scale>0.4</scale><Icon><href>http://icons.opengeo.org/markers/icon-poly.1.png</href></Icon></IconStyle><LabelStyle><color>00ffffff</color></LabelStyle><PolyStyle><color>ffD0D1E6</color><outline>1</outline></PolyStyle><LineStyle><color>ff000000</color><width>1</width></LineStyle></Style><MultiGeometry><Point><coordinates>-69.98267466267889,12.52088880763951</coordinates></Point><Polygon><outerBoundaryIs><LinearRing><coordinates>-69.89913876,12.45200511 -69.89567644,12.42301463 -69.94215939,12.43851756 -70.00414527,12.50050344 -70.06613115,12.5469864 -70.05086077,12.5970867 -70.03512529,12.61411408 -69.97313941,12.56763113 -69.91179949,12.48047883 -69.89913876,12.45200511</coordinates></LinearRing></outerBoundaryIs></Polygon></MultiGeometry></Placemark> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:30:49.477

解决了它，以防万一其他人想知道您将侦听器添加到 kml，然后在 click 事件上使用 featureData - 像这样

> kml = new google.maps.KmlLayer("http://whatever/countries_world.kml",{suppressInfoWindows: true});
> 
> kml.setMap(地图);
> google.maps.event.addListener(kml, '点击', function(e) {
> 
> ```
>  alert(e.featureData.name); 
> ```
> 
> }); }

# android - 如何使用 SoundPool 播放超过 32 种声音？

> ID：13051798
> 
> 赞同：0
> 
> 时间：2012-10-24T14:53:56.377
> 
> 标签：android, hashmap, media-player, soundpool

由于我的最后一个问题在我使用简单的 medaiplayer 的地方没有得到解答（[连续播放更多声音时声音有时会保持沉默，为什么？](https://stackoverflow.com/questions/13035958/sound-sometimes-remains-silent-when-playing-more-sounds-in-a-row-why)）并尝试使用 SoundPool 创建整个东西。但你猜怎么着，几乎同样的事情发生了，但有一个错误

```
AudioFlinger could not create track, status: -12
Error creating AudioTrack 
```

我读到最多可以将 32 个声音存储在 soundpool 的内存中，然后我会收到错误消息。没错，在第 32 个声音之后，我无法播放任何声音，因为我总是收到错误消息。那么我怎样才能在 SoundPool 中使用超过 32 种声音呢？我尝试使用 3 个 Soundpool，每个 Soundpool 有 20 个声音，我总是使用以下方法从其他池中卸载所有声音：

```
 mSoundPoolMapV1.clear();  //clearing HashMap
    for(int i=1;i<15;i++){
    mSoundPoolV1.unload(i);  
    } 
```

但是同样的错误又来了。（我使用 22k 声音而不是 44.1k，我读到这可以解决它，但什么也没发生）任何建议表示赞赏。到底是什么，我既不能用 mediaplayer 也不能用 soundpool 播放大约 50 种声音？这怎么可能？？

与`release()`：

```
 mSoundPoolMap.clear();
    for(int i=1;i<50;i++){
    mSoundPool.unload(i);
    }
    mSoundPool.release();

    mSoundPoolMap.put(1, mSoundPool.load(Main.this, R.raw.sound1, 1));
    ...
    mSoundPoolMap.put(50, mSoundPool.load(Main.this, R.raw.sound50, 1)); 
```

所以我清除了 hashmp，然后卸载了所有的声音，然后我释放了 soundpool。然后我再次填充哈希图，但现在它根本没有给我任何声音。我一定错过了什么，你能告诉我什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:42:23.360

AudioMixer 有一个限制，只能同时允许 32 个 AudioTrack。只要 SoundPool 开始播放属于该池的通道之一（我猜这对应于一个样本），它就会尝试创建一个 AudioTrack。但是，在您销毁 SoundPool 之前，该轨道不会被销毁，因此即使已停止轨道名称仍将保持分配状态。

您可以尝试调用`release()`您的 SoundPool。这应该会导致本机 SoundPool 对象被破坏，从而破坏它创建的所有 AudioTrack 并在 AudioMixer 中取消分配它们的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:41:17.360

底层音频硬件不是无限的。你一次只能在记忆中保存这么多的声音。当我为台式机制作 3D 音频库时，限制是可变的，因此我必须在开始之前从硬件查询限制，否则会导致看似随机的故障。您应该有一个 SoundPool 并根据需要加载和卸载声音。然后你需要为应该播放的声音设置某种优先级，这样你就可以确保你真正需要的声音不会被卸载来播放可选的背景噪音。

SoundPool[文档](http://developer.android.com/reference/android/media/SoundPool.html)实际上对典型用例有很好的描述。

# jquery - 未找到悬停 cufon

> ID：13051800
> 
> 赞同：0
> 
> 时间：2012-10-24T14:53:59.450
> 
> 标签：jquery, internet-explorer, hover, cufon

我对 Cufon 有问题，我有一个包含我拥有的来源的列表，但也将悬停 quisiea 放在其他来源，这可能吗？

```
Cufon.replace('header nav#menu ul li', {fontFamily:'Helvetica Neue'});
Cufon('header nav#menu ul li a', {
    hover: {
        fontFamily:'Archer Bold'
    }
}); 
```

示例：http: [//jsfiddle.net/ykbxm/](http://jsfiddle.net/ykbxm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:37:46.187

好吧，假设有 cufon api：[CUFON API](https://github.com/sorccu/cufon/wiki/API)

一切都写在这里，但没有很好的例子，所以如果你想在某些元素上使用 cufon hover，首先你让它们处于活动状态。有一些元素是过敏激活的，但我不记得是哪个。例如一个元素：

`hoverables: { a: true }`

您可以找到完整的示例：[这里](http://jsfiddle.net/GomatoX/ykbxm/6/)

PS 两次为同一元素调用 cufon 是一个错误的决定：你为 li 调用 cufon，然后为一个元素调用 cufon。

# google-chrome - 在 Chrome 中测试/模拟方向变化？

> ID：13051802
> 
> 赞同：6
> 
> 时间：2012-10-24T14:54:00.523
> 
> 标签：google-chrome, jquery-mobile, orientation

我们正在使用 jQuery mobile 编写一个移动应用程序，并在 Chrome 中进行大部分 javascript 调试。然而，我无法测试的一件事是方向变化，从纵向到横向，反之亦然。我必须使用手机来触发该事件，并且无法在没有 Chrome 的情况下调试 javascript window.orientationchange 事件。

或者看起来是这样。有没有办法在 Chrome 中以某种方式模拟这个事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:14:13.290

由于桌面设备没有任何真正的方向变化，就像移动设备一样，听`orientationchange`. 不过，您可以通过调整浏览器窗口的大小来模拟方向。

大卫沃尔什写了一篇关于这个的文章：http: [//davidwalsh.name/orientation-change](http://davidwalsh.name/orientation-change)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:54:08.703

**一种基于方向测试媒体查询的方法：**

Google Chrome 的 Window Resizer 扩展使您能够以纵向或横向查看和测试您的站点。安装后，它的预定义大小为 320 x 480，jQuery 使用 $.event.special.orientationchange.orientation() 返回的方向将是“纵向”。我为横向添加了 480 x 320 的新尺寸，并指出了移动设备的“屏幕类型”。在 480 x 320 尺寸下，jQuery 使用 $.event.special.orientationchange.orientation() 返回的方向将是“风景”。

这不允许您专门测试方向更改事件，但它对于基于方向测试媒体查询非常有用。

# objective-c - 视网膜显示的图像 contentMode 问题

> ID：13051807
> 
> 赞同：0
> 
> 时间：2012-10-24T14:54:28.187
> 
> 标签：objective-c, ios, uibutton, retina-display

我有这个 UIButton，他有一个图像，在普通 iPhone 上它工作正常，图像 contentMode 设置为 UIViewcontentModeCenter 并且它很好。但在视网膜上，图像不在中心，它很大并且不适合按钮框架。

为什么会这样，我该如何解决？

```
[theImageView setImage:Image forState:UIControlStateNormal];
[theImageButton setImage:Image forState:UIControlStateHighlighted];
[theImageButton setImage:Image forState:UIControlStateSelected];
[theImageButton setBackgroundColor:[UIColor clearColor]];
[theImageButton addTarget:self action:@selector(dismissKeyboard:) forControlEvents:UIControlEventAllTouchEvents];
theImageButton.imageView.contentMode = UIViewContentModeCenter; 
```

图片加载：

```
- (UIImage *)loadScreenShotImageFromDocumentsDirectory
{
    UIImage * tempimage;
    NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
    NSString *docDirectory = [sysPaths objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/MeasureScreenShot.png", docDirectory];
    tempimage = [[UIImage alloc] initWithContentsOfFile:filePath];

    return tempimage;
} 
```

我不得不说，加载到 contentMode 中的图像是一个以编程方式拍摄的屏幕截图。也许它与它有关（无论如何在正常显示上它工作正常）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:00:26.843

听起来您正在获得 1.0 比例的视网膜图像。您需要告诉系统，您的图像实际上是 2.0，如果您使用上下文捕获屏幕截图，请使用

```
UIGraphicsBeginImageContextWithOptions(..., ..., 0.0); 
```

`0.0`告诉它使用当前设备的主屏幕比例，或者您可以自己指定正确的比例。

# asp.net-mvc-3 - 使用 automapper 从 ViewModel 映射到 DTo 到 Domain

> ID：13051820
> 
> 赞同：2
> 
> 时间：2012-10-24T14:55:20.450
> 
> 标签：asp.net-mvc-3, automapper

我在执行以下映射时遇到问题：

域（简化版）：

```
public class Ad
{
    // Primary properties
    public int Kms { get; set; }

    // Navigation properties
    public virtual Model Model { get; set; }
} 
```

DTO：

```
public class CreateAdDto
{
    // Primary properties
    public int Kms { get; set; }

    // Navigation properties
    public virtual ModelDto Model { get; set; }
} 
```

视图模型：

```
public class CreateAdViewModel
{
    // Primary properties
    public int Kms { get; set; }

    public int Make_Id { get; set; }
    public int Model_Id { get; set; }

    // Navigation properties
    public IEnumerable<SelectListItem> MakeList { get; set; }
    public IEnumerable<SelectListItem> ModelList { get; set; }
} 
```

在控制器中，当我进行映射时，我会从视图的下拉列表中丢失 Make_ID：

```
 public virtual ActionResult Create(CreateAdViewModel adViewModel)
    {
        if (ModelState.IsValid)
        {
            var adDto = Mapper.Map<CreateAdViewModel, CreateAdDto>(adViewModel);

            _adService.CreateAd(adDto);
        }

        return RedirectToAction(MVC.Home.Index());
    } 
```

映射是：

```
 Mapper.CreateMap<CreateAdViewModel, CreateAdDto>() 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:58:19.170

正如您所提到的，广告需要知道 Model_Id 并将其设置到模型中

```
Mapper.CreateMap<CreateAdDto, Ad>()
         .ForMember(dest => dest.Model, opt => opt.MapFrom(src => new Model { Id = src.Model_Id })); 
```

您还需要从另一个映射端让 D 知道从哪里获取模型 ID。

```
Mapper.CreateMap<Ad, CreateAdDto>()
         .ForMember(dest => dest.Model_Id, opt => opt.MapFrom(src => src.Model.Id})); 
```

上面的代码不安全，因为应该添加验证以查看 Model 是否为 null。

对于您的其余代码，您似乎做对了。实体框架部分需要您附加，因为实体模型已经存在，否则，EF 会将此实体插入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:08:04.420

CreateAdDto 没有 Make 导航属性或 Make_Id 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:18:31.913

根据我在您的问题中看到的内容，我建议采用一种简单的方法。您的应用程序是中等规模的。我的经验说，你应该非常小心地考虑**可维护性**。所以尝试为自己创建一个简单的应变前向方法，如下面的方法： ![应用架构](../Images/8fd63501e5db0f5271ef0b6a8678e1c1.png)

我可以详细描述所有层，但要注意您的问题的标题，我更喜欢仅描述模型（业务对象）层：

![模型或业务对象层](../Images/685de2d006bea9bc61e29e7d4edf9c61.png)

好的！如您所见，PM.Model 包括：两个子文件夹包含我们的 ViewModel，在库的根目录中，我们有一个 .tt 文件，其中包含实体框架对象（PO​​CO 类），我们有一个 Mapper 文件夹（因为我不喜欢使用 autoMapper 或第三个像这样的聚会:)）。

您可以在 Domain 层看到 IListBox 接口。我把所有的 ListBox 容器放到这个接口上。

我希望当前的方法对您有用，但**最后**我建议删除其中一层 DTO 或 ViewModel，因为将来会非常复杂。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:53:23.817

经过一番研究找到的解决方案：

视域：

```
public class CreateAdViewModel
{
    // Primary properties
    public int Kms { get; set; }

    public int Make_Id { get; set; }
    public int Model_Id { get; set; }

    // Navigation properties
    public IEnumerable<SelectListItem> MakeList { get; set; }
    public IEnumerable<SelectListItem> ModelList { get; set; }
} 
```

DTO：

```
public class CreateAdDto
{
    // Primary properties
    public int Kms { get; set; }
    public int Model_Id { get; set; }

    // Navigation properties
    //public virtual ModelDto Model { get; set; }
} 
```

领域：

```
public class Ad
{
    // Primary properties
    public int Kms { get; set; }

    // Navigation properties
    public virtual Model Model { get; set; }
} 
```

视图模型-> Dto 映射：

```
 Mapper.CreateMap<CreateAdViewModel, CreateAdDto>(); 
```

Dto -> 域映射：

```
 Mapper.CreateMap<CreateAdDto, Ad>()
             .ForMember(dest => dest.Model, opt => opt.MapFrom(src => new Model { Id = src.Model_Id })); 
```

注意：

为了使用实体框架实现这一点，我必须首先将模型实体附加到上下文，然后添加新广告：

```
 public void CreateAd(CreateAdDto adDto)
    {
        var adDomain = Mapper.Map<CreateAdDto, Ad>(adDto);

        _modelRepository.Attach(adDomain.Model);

        _adRepository.Add(adDomain);
        _adRepository.Save();
    } 
```

希望这是最佳实践。

顺便说一句，我想对这种方法发表一些意见。

谢谢。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-12T04:39:55.733

你知道这些映射的成本吗？！对于简单的插入，您有 2 层映射（在到达实体框架之前）。我们可以在不到 2 层的映射中执行更复杂的 CRUD。如何考虑这段代码的可维护性？

请牢记 DRY、KISS、SOLID 约定，并将其放在日常工作的首位。

祝你好运

# javascript - 启用地理定位和 JavaScript 的 WebView 给了我空白页

> ID：13051823
> 
> 赞同：0
> 
> 时间：2012-10-24T14:55:24.160
> 
> 标签：javascript, android, webview, geolocation

我有一个网站 ( [http://wrn.erik-edgren.nu/](http://wrn.erik-edgren.nu/) )，通过 HTML5 Geolocation 获取访问者的 GPS 位置。我正在尝试创建一个访问该网站的应用程序，但我只是得到一个空白页面。为什么？

```
package com.example.wrn;

import android.location.LocationManager;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.view.Menu;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

@SuppressLint("SetJavaScriptEnabled")
public class MainActivity extends Activity {
    final Activity activity = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        WebView webview = new WebView(this);
        setContentView(R.layout.activity_main);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setGeolocationEnabled(true);
        webview.getSettings().setDomStorageEnabled(true);
        webview.setWebChromeClient(new WebChromeClient());

        webview.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                activity.setTitle("Laddar...");
                activity.setProgress(progress * 100);

                if(progress == 100)
                    activity.setTitle(R.string.app_name);
            }
        });

        webview.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                // Handle the error
            }

            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        });

        webview.loadUrl("http://wrn.erik-edgren.nu/mobile");

        LocationManager locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);
        if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
             Toast.makeText(this, "GPS-mottagaren är aktiverad i din mobil", Toast.LENGTH_SHORT).show();
        } else {
            showGPSDisabledAlertToUser();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void showGPSDisabledAlertToUser() {
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
            alertDialogBuilder.setMessage("GPS-mottagaren är inaktiverad i din mobil. Den måste vara aktiverad. Vill du gå till platsinställningarna och aktivera GPS-mottagaren?")
         .setCancelable(false)
         .setPositiveButton("Ja",
              new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                      Intent callGPSSettingIntent = new Intent(
                                            android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                            startActivity(callGPSSettingIntent);
              }
         });
         alertDialogBuilder.setNegativeButton("Nej",
              new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
              }
         });
    AlertDialog alert = alertDialogBuilder.create();
    alert.show();
    }
}

10-24 14:54:12.113: I/dalvikvm(2031): threadid=3: reacting to signal 3
10-24 14:54:12.213: I/dalvikvm(2031): Wrote stack traces to '/data/anr/traces.txt'
10-24 14:54:12.533: I/dalvikvm(2031): threadid=3: reacting to signal 3
10-24 14:54:12.593: I/dalvikvm(2031): Wrote stack traces to '/data/anr/traces.txt'
10-24 14:54:12.993: I/dalvikvm(2031): threadid=3: reacting to signal 3
10-24 14:54:13.117: I/dalvikvm(2031): Wrote stack traces to '/data/anr/traces.txt'
10-24 14:54:13.463: I/dalvikvm(2031): threadid=3: reacting to signal 3
10-24 14:54:13.643: I/dalvikvm(2031): Wrote stack traces to '/data/anr/traces.txt'
10-24 14:54:13.983: I/dalvikvm(2031): threadid=3: reacting to signal 3
10-24 14:54:14.023: I/dalvikvm(2031): Wrote stack traces to '/data/anr/traces.txt'
10-24 14:54:14.463: I/dalvikvm(2031): threadid=3: reacting to signal 3
10-24 14:54:14.585: I/dalvikvm(2031): Wrote stack traces to '/data/anr/traces.txt'
10-24 14:54:14.983: D/gralloc_goldfish(2031): Emulator without GPU emulation detected.
10-24 14:54:15.003: I/dalvikvm(2031): threadid=3: reacting to signal 3
10-24 14:54:15.083: I/dalvikvm(2031): Wrote stack traces to '/data/anr/traces.txt'
10-24 14:54:22.505: I/SqliteDatabaseCpp(2031): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/com.example.wrn/databases/webview.db
10-24 14:54:22.513: I/SqliteDatabaseCpp(2031): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/CachedGeoposition.db, db=/data/data/com.example.wrn/databases/webview.db 
```

**编辑** 这是我当前的代码。我已经添加`setDatabasePath()`甚至`onReceivedError()`重置了 LogCat 以再次尝试使用模拟器。结果与以前相同 - 空白页。

```
package com.example.wrn;

import android.location.LocationManager;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

@SuppressLint("SetJavaScriptEnabled")
public class MainActivity extends Activity {
    final Activity activity = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        WebView webview = new WebView(this);

        /****************************************************/
        // NEW:
        WebSettings webSettings = webview.getSettings();
        /****************************************************/

        setContentView(R.layout.activity_main);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setGeolocationEnabled(true);
        webview.getSettings().setDomStorageEnabled(true);
        webview.setWebChromeClient(new WebChromeClient());

        /****************************************************/
        // NEW:
        webSettings.setDatabasePath("/data/data/"+this.getPackageName()+"/databases/");
        /****************************************************/

        webview.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                activity.setTitle("Laddar...");
                activity.setProgress(progress * 100);

                if(progress == 100)
                    activity.setTitle(R.string.app_name);
            }
        });

        webview.setWebViewClient(new WebViewClient() {
            /****************************************************/
            // NEW:
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Log.i("WEB_VIEW_TEST", "error code:" + errorCode);
                super.onReceivedError(view, errorCode, description, failingUrl);
            }
            /****************************************************/

            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        });

        webview.loadUrl("http://wrn.erik-edgren.nu/mobile");

        LocationManager locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);
        if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
             Toast.makeText(this, "GPS-mottagaren är aktiverad i din mobil", Toast.LENGTH_SHORT).show();
        } else {
            showGPSDisabledAlertToUser();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void showGPSDisabledAlertToUser() {
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
            alertDialogBuilder.setMessage("GPS-mottagaren är inaktiverad i din mobil. Den måste vara aktiverad. Vill du gå till platsinställningarna och aktivera GPS-mottagaren?")
         .setCancelable(false)
         .setPositiveButton("Ja",
              new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                      Intent callGPSSettingIntent = new Intent(
                                            android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                            startActivity(callGPSSettingIntent);
              }
         });
         alertDialogBuilder.setNegativeButton("Nej",
              new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
              }
         });
    AlertDialog alert = alertDialogBuilder.create();
    alert.show();
    }
}

10-24 20:02:15.392: I/dalvikvm(2296): threadid=3: reacting to signal 3
10-24 20:02:15.502: I/dalvikvm(2296): Wrote stack traces to '/data/anr/traces.txt'
10-24 20:02:15.783: I/dalvikvm(2296): threadid=3: reacting to signal 3
10-24 20:02:15.902: I/dalvikvm(2296): Wrote stack traces to '/data/anr/traces.txt'
10-24 20:02:16.282: I/dalvikvm(2296): threadid=3: reacting to signal 3
10-24 20:02:16.402: I/dalvikvm(2296): Wrote stack traces to '/data/anr/traces.txt'
10-24 20:02:16.893: I/dalvikvm(2296): threadid=3: reacting to signal 3
10-24 20:02:17.193: I/dalvikvm(2296): Wrote stack traces to '/data/anr/traces.txt'
10-24 20:02:17.363: I/dalvikvm(2296): threadid=3: reacting to signal 3
10-24 20:02:17.463: I/dalvikvm(2296): Wrote stack traces to '/data/anr/traces.txt'
10-24 20:02:17.695: D/gralloc_goldfish(2296): Emulator without GPU emulation detected.
10-24 20:02:17.854: I/dalvikvm(2296): threadid=3: reacting to signal 3
10-24 20:02:18.052: I/dalvikvm(2296): Wrote stack traces to '/data/anr/traces.txt'
10-24 20:02:24.842: I/SqliteDatabaseCpp(2296): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/com.example.wrn/databases/webview.db
10-24 20:02:24.842: I/SqliteDatabaseCpp(2296): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/CachedGeoposition.db, db=/data/data/com.example.wrn/databases/webview.db 
```

提前致谢。

# ios - fetchRequestController 未正确返回部分标题

> ID：13051830
> 
> 赞同：0
> 
> 时间：2012-10-24T14:55:50.570
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

```
 -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.frc sections] count];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.frc sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.frc sections] objectAtIndex:section];

    return [sectionInfo name];
} 
```

我应该有一个部分，标题在它之前......相反，这段代码将标题放在它之后......就像第一部分没有标题但第二部分有第一个标题但没有内容（应该有' t是第二部分）

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:59:51.340

您正在使用：

```
- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section 
```

它是一个页脚，尝试使用这个：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

# mysql - 获取破碎表的结构

> ID：13051831
> 
> 赞同：0
> 
> 时间：2012-10-24T14:55:51.213
> 
> 标签：mysql

有没有办法挽救损坏的 mysql 表的结构？
我一直在寻找，但除了`repair table x`.

当我在桌子上发出选择时，服务器响应：`Incorrect key file for table 'click'; try to repair it`
但修复不起作用。MySql 回来了 Msg_text `Corrupt`。哎呀，我已经有点知道了。

表中的数据并不是那么重要并且可能会丢失，但我确实想挽救我无法获得的表结构 ( `describe click`): `Incorrect key file for table 'click'; try to repair it`。

我希望`truncate`可以解决我的问题，但是唉：`Table 'click' is marked as crashed and should be repaired`。

有人知道我该如何解决这个问题吗？

# c# - 如何递归获取所有非系统目录？

> ID：13051833
> 
> 赞同：1
> 
> 时间：2012-10-24T14:56:03.520
> 
> 标签：c#, .net-4.0

我最近在我的 NTFS 卷上禁用了 8.3 文件名，并注意到枚举包含大量文件的新目录所需的时间显着减少（现在只需要 25% 的时间）。但是，这不适用于现有文件。

为了改变这一点，我想创建一个 exe，它将递归地遍历驱动器上不在系统文件夹中的所有文件，将它们移动到临时目录，然后将它们移回以强制删除 8.3 文件名他们。我已经知道如何枚举目录的文件并对每个文件执行此操作，但我不太确定如何获取磁盘上所有目录的列表，而不包括任何系统目录。我可以在 DirectoryInfo 对象中查找属性吗？如果没有，我可以采取什么其他方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:18:43.953

干得好。我相信这就是您所追求的...有关更多信息，请参见[FileAttributes](http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx)。

```
public void RecursivePathWalk(string directory)
{
    string[] filePaths = Directory.GetFiles(directory);
    foreach (string filePath in filePaths)
    {
        if (IsSystem(filePath))
            continue;

        DoWork(filePath);
    }

    string[] subDirectories = Directory.GetDirectories(directory);
    foreach (string subDirectory in subDirectories)
    {
        if (IsSystem(subDirectory))
            continue;

        RecursivePathWalk(subDirectory);
    }
}

public void DoWork(string filePath)
{
    //Your logic here
}

public bool IsSystem(string path)
{
    FileAttributes attributes = File.GetAttributes(path);
    return (attributes & FileAttributes.System) != 0;
} 
```

# jsf-2 - jsf清除表格

> ID：13051842
> 
> 赞同：0
> 
> 时间：2012-10-24T14:56:52.760
> 
> 标签：jsf-2, richfaces

我需要帮助。我是 JSF 的新手，我在我的项目中使用**JSF2**和 Richfaces。

我想清除我`<f:ajax render="@form"/>`在刷新按钮中使用的表单。我在那个屏幕上有一个添加按钮，它添加了一条记录，然后我点击刷新，然后它会转到默认页面。但是当我再次输入记录时，我之前输入的那些值仍保留在表单字段中。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:01:15.910

假设您说“我点击刷新”时指的是浏览器的刷新按钮，那么如果您错误地将持有视图范围数据的 bean 放置在会话范围中，就会发生这种情况。然后，您基本上重用了与表单之前提交的完全相同的 bean。将 bean 放在视图范围而不是会话范围中应该可以解决这个问题。当您导航到不同的页面或触发新请求（如通过点击浏览器的刷新按钮）时，视图范围结束。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

**如果您因为糟糕的设计限制使用会话范围而更新**，那么您可能想通过一个

```
<f:event type="preRenderView" listener="#{sessionScopedBeanWhichShouldActuallyBeViewScoped.resetModel}" /> 
```

和

```
public void resetModel() { 
    if (!FacesContext.getCurrentInstance().isPostback()) {
        model = null;
    }
} 
```

这将在每个 GET 请求上清除模型。然而，不管这个 hack，当最终用户在同一个会话中的不同浏览器选项卡/窗口中打开同一个视图时，你仍然会遇到严重的问题。

正确的解决方案是将 bean 放在视图范围而不是会话范围中，如前所述。

# html - 居中和调整大小按钮

> ID：13051845
> 
> 赞同：0
> 
> 时间：2012-10-24T14:57:03.863
> 
> 标签：html, css, layout

![在此处输入图像描述](../Images/d4981de5e376c3fcb2d950bc5454eaed.png)

```
#controlpanel .button 
{

    margin: 12px 12px 0px 12px;
     width: 100%;
} 
```

如何使这些按钮填充白框的宽度，但每边都有 12px？填充在内部增加了空间……而边距使它们脱离了白框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:00:16.937

1.  添加填充到#controlpanel
2.  从按钮中删除左右边距
3.  将 box-sizing:border-box 添加到按钮中，您应该得到如下信息：

    ```
    #controlpanel{     
        padding:0px 12px 12px 12px;
    }

    #controlpanel .button {
        margin: 12px 0px 0px 0px;
        width: 100%;
        box-sizing:border-box;
        -o-box-sizing:border-box;
        -moz-box-sizing:border-box;
        -ms-box-sizing:border-box;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:29:42.737

有两件事可能会有所帮助：

*   使用*填充*_`div#controlpanel`
*   删除按钮的*边距*

此外，您还可以尝试删除 100% 宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:00:45.127

问题是`width: 100%;`. 尝试注释掉该行并键入：`display: block;`

# sql - 根据表sql中的行替换字符串中的字符

> ID：13051847
> 
> 赞同：6
> 
> 时间：2012-10-24T14:57:07.387
> 
> 标签：sql, sql-server-2008

我需要用一些映射字符替换字符串中的字符列表。

我有一个表“dbo.CharacterMappings”，有 2 列：“CharacterToFilter”和“ReplacementCharacter”。

假设这张表有3条记录：

```
Filter   Replacement    
$        s
@        a
0        o 
```

如何根据这些映射替换字符串中的所有过滤器字符？

ie 'Hell0 c@t$' 需要变成 'Hello cats'。

如果不求助于表变量然后循环遍历它，我真的想不出任何方法来做到这一点。即有一个带有“计数”列的表变量，然后使用循环根据该列一次选择 1 行。然后我可以使用 REPLACE 函数一次更新一个字符。

编辑：我应该注意，我总是想去掉这些字符（例如，我不需要担心 $5 -> s5）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T15:05:03.983

```
declare @s varchar(50)= 'Hell0 c@t$'
select @s = REPLACE(@s, CharacterToFilter, ReplacementCharacter) 
    from CharacterMappings
select @s 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T15:19:16.080

您可以创建一个函数：

```
CREATE FUNCTION [dbo].[ReplaceAll]
(
    @text varchar(8000)
)
RETURNS VARCHAR(8000)
AS
BEGIN
    SELECT @text = 
       REPLACE(@text,cm.Filter, cm.Replacement)
    FROM    CharacterMappings cm;
    RETURN @text
END 
```

那么这个

```
select dbo.[ReplaceAll]('Hell0 c@t$'); 
```

返回`Hello cats`

# c# - 在编辑 mysql 数据库后运行某种脚本 C#

> ID：13051851
> 
> 赞同：1
> 
> 时间：2012-10-24T14:57:25.863
> 
> 标签：c#, mysql, database, editing

在我的 mysql 数据库中编辑一行或条目后，有没有办法运行某种脚本或进程。我主要想知道，因为我想在创建条目后发送一封电子邮件进行用户身份验证。之后，单击发送到电子邮件的链接后，我会想办法更​​新条目。我最熟悉 C#，但无论如何我都愿意为此学习 php。任何代码示例或教程都会很棒。

我在网上搜索过，但没有发现任何有用的东西。也许我只是不知道要寻找什么。

我不知道这是否相关，但在属性下，有一个“更新当前时间戳”选项。这会有关系吗？

附加信息。我使用 C# 进行基于客户端的操作，使用带有 phpMyAdmin 的 Cpanel 进行数据库编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:00:18.203

您可能对**触发器**感兴趣。阅读[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

**编辑**您的下一个问题可能是：如何从触发器发送电子邮件？

不幸的是，没有一种简单的方法可以做到这一点。这是两种不同的方法：

*   您可以编写一个所谓的[用户定义函数](http://dev.mysql.com/doc/refman/5.0/en/adding-functions.html)（或查找现有的函数），它将发送一封电子邮件，并且将从触发器中调用此函数。
*   触发器会将要发送的电子邮件写入队列。（队列可能是一个表，甚至是一个文件）。会有一个系统作业会定期从队列中读取并发送电子邮件。

# sql - wp_query 行为异常

> ID：13051852
> 
> 赞同：1
> 
> 时间：2012-10-24T14:57:27.300
> 
> 标签：sql, wordpress

我有一个静态首页，博客部分指向一个页面（带有链接 mylocalhost/news/）和一个名为 news（[代码](http://pastie.org/5109324)）的自定义模板

自定义永久链接结构：`/%category%/%postname%/`

去这里给了我这个奇怪的 sql 语句：

```
SELECT wp_posts.* FROM wp_posts WHERE 1=1 AND (wp_posts.ID = '1829') AND wp_posts.post_type = 'page' ORDER BY wp_posts.post_date DESC 
```

显然这不会得到我正在寻找的帖子。为什么是这样？

# c# - 以自定义身份验证表单验证用户凭据

> ID：13051857
> 
> 赞同：-11
> 
> 时间：2012-10-24T14:57:47.950
> 
> 标签：c#, login

我的登录系统有问题。

当我输入有效的用户名和密码时，我可以进入下一个表格。

当我输入错误的用户名和正确的密码时，我仍然可以进入下一个表格。

并且正确的用户名和错误的密码我仍然可以进入下一个表格。

如果我的用户名或密码错误，不让下一个的正确代码是什么？

这是我的代码。

```
private void btnEnter_Click(object sender, EventArgs e)        
{
    if (tbUsername.Text == "username")              
    {                 
        AdminMainMenu x = new AdminMainMenu();
        x.Show();
        t.Play();           
        this.Dispose();          
    }         
    else
    {
        SystemSounds.Hand.Play();
        MessageBox.Show("Invalid Username! ", "Error");
    }  

    if (tbPassword.Text == "password")
    {
        AdminMainMenu x = new AdminMainMenu();
        x.Show();
        t.Play();
        this.Dispose();
    }
    else
    {
        SystemSounds.Hand.Play();
        MessageBox.Show("Invalid Password! ", "Error");
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:02:18.220

我只能冒险猜测您要问的内容，但是如果您希望在显示表单之前用户名和密码都正确，请改用

```
if (tbUsername.Text == "username")
{
    if(tbPassword.Text == "password")
    {
        AdminMainMenu x = new AdminMainMenu();
        x.Show();
        t.Play();
        this.Dispose();
    }
    else
    {
        MessageBox.Show("Wrong password", "Error");
    }
}
else
{
    if(tbPassword.Text == "password")
    {
        MessageBox.Show("Wrong username", "Error");
    }
    else
    {
        MessageBox.Show("Wrong username and password", "Error");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:03:40.977

您可以将密码检查`if`块嵌套在成功的用户名`if`块中：

```
private void btnEnter_Click(object sender, EventArgs e)
{
    if (tbUsername.Text == "username")
    {
        if (tbPassword.Text == "password")
        {
            AdminMainMenu x = new AdminMainMenu();
            x.Show();
            t.Play();
            this.Dispose();
        }
        else
        {
            SystemSounds.Hand.Play();
            MessageBox.Show("Invalid Password! ", "Error");
        }    
    }
    else
    {
        SystemSounds.Hand.Play();
        MessageBox.Show("Invalid Username! ", "Error");
    }  
} 
```

当用户名错误时执行用户名检查块的方式，`else`然后代码继续进行密码检查。您需要确保仅在检查用户名和密码后才显示表单。

或者，`return`如果用户名或密码不正确，您可以单独检查，也可以从单击事件中检查，如下所示：

```
private void btnEnter_Click(object sender, EventArgs e)
{
    if (tbUsername.Text != "username")
    {
        SystemSounds.Hand.Play();
        MessageBox.Show("Invalid Username! ", "Error");
        return;
    }

    if (tbPassword.Text != "password")
    {
        SystemSounds.Hand.Play();
        MessageBox.Show("Invalid Password! ", "Error");
        return;
    } 

    //If we got here in code execution, then both username and password are correct
    AdminMainMenu x = new AdminMainMenu();
    x.Show();
    t.Play();
    this.Dispose();
} 
```

# ios - IOS - 使用 UIWebView 时在媒体播放器中打开视频

> ID：13051859
> 
> 赞同：0
> 
> 时间：2012-10-24T14:57:55.253
> 
> 标签：ios, html, media-player

我想在单击 UIWebView 中的视频链接时启动媒体播放器。UIWebView 的内容是我服务器上的一个 HTML5 页面，所以解决方案是更改 XCode 中的代码还是 HTML5 中的代码我都可以处理。

所有有问题的视频都是“mp4”扩展名——以防万一这个添加有帮助。

**请注意，这是仅适用于 iPad 的应用程序。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:19:42.423

可以修改此代码以根据应用程序内的按钮单击来启动视频。

```
 NSString *filepath = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"mp4"];
    //LOCAL FILE    
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    //REMOTE FILE
    NSURL    *fileURL = [NSURL URLWithString:@"http://someurlsomewhere.com/movie.mp4"];
    player = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    player.frame = CGRectMake(0, 0, 1024, 768);
    [self.view addSubview:player.view];
    player.fullscreen = NO;
    [player play]; 
```

这是一个链接，涵盖了从 web 视图中检测点击/点击，这可能是您触发视频所需要的。 [如何在IOS上拦截UIWebview内的按钮点击？](https://stackoverflow.com/questions/10992339/how-to-intercept-button-click-inside-uiwebview-on-ios)

# cakephp - CakePHP - 如何在查找条件中使用 SQL NOW()

> ID：13051860
> 
> 赞同：0
> 
> 时间：2012-10-24T14:57:55.313
> 
> 标签：cakephp, cakephp-2.0

在我的条件下，我无法使用 SQL 函数 NOW() 使任何查找操作正常工作。

我正在有效地尝试构建一个查找查询，它说：

**所需的 SQL：**

```
WHERE (NOW() BETWEEN Promotion.start AND Promotion.end) AND Promotion.active = 1 
```

我尝试了很多组合，但无论我在条件中使用 NOW() 时做什么，它都不起作用，因为 Cake 构建的查询`'`在模型字段周围加上引号，因此 MySQL 将它们解释为字符串。

```
$this->find('all', array(
    'conditions' => array(
        '(NOW() BETWEEN ? AND ?)' => array('Promotion.start', 'Promotion.end'),
        'Promotion.active' => 1
    )
)); 
```

**CakePHP 创建的 SQL：**

请注意 BETWEEN() 中模型字段周围的单引号，因此它们被视为字符串。

```
WHERE (NOW() BETWEEN 'Promotion.start' AND 'Promotion.end') AND `Promotion`.`active` = '1' 
```

* * *

这也不起作用。

```
$this->find('all', array(
    'conditions' => array(
        'NOW() >=' => 'Promotion.start',
        'NOW() <=' => 'Promotion.end',
        'Promotion.active' => 1
    )
)); 
```

我知道为什么这些解决方案不起作用。这是因为模型字段仅在它们是条件中的数组键而不是数组值时才被处理。

我知道如果我将整个 BETWEEN() 条件作为一个字符串，我可以让它工作：

```
$this->find('all', array(
    'conditions' => array(
        'NOW() BETWEEN Promotion.start AND Promotion.end',
        'Promotion.active' => 1
    )
)); 
```

* * *

同样问题的另一个例子是，它更容易理解：

**所需的 SQL：**

```
WHERE Promotion.start > NOW() AND Promotion.active = 1 
```

所以我试试这个：

```
$this->find('all', array(
    'conditions' => array(
        'Promotion.start >' => 'NOW()',
        'Promotion.active' => 1
    )
)); 
```

再一次，它不起作用，因为 Cake`'`在 NOW() 部分周围加上了引号。

**CakePHP 创建的 SQL：**

```
WHERE `Promotion`.`start` > 'NOW()' AND `Promotion`.`active` = '1'' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:01:45.973

```
$this->find('all', array(
    'conditions' => array(
        'NOW() BETWEEN Promotion.start AND Promotion.end',
        'Promotion.active' => 1
    )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:20:36.273

最好不要使用 NOW() 作为它的函数，并且函数不使用索引。更好的解决方案是：

```
$this->find('all', array(
    'conditions' => array(
        "'" . date('Y-m-d') . "' BETWEEN Promotion.start AND Promotion.end",
        'Promotion.active' => 1
    )
)); 
```

# asp.net - 如何将复选框列表项设置为默认选中

> ID：13051861
> 
> 赞同：0
> 
> 时间：2012-10-24T14:57:56.457
> 
> 标签：asp.net

在我的页面中，我有一个 CheckBoxList 控件，我希望默认选中所有复选框。我怎样才能做到这一点？我已经尝试了几种方法，但它没有这样做。这是我背后的代码：

```
protected void chkAll_CheckedChanged(object sender, EventArgs e)
    {

        foreach(GridViewRow gr in GridView1.Rows)
        {

            CheckBox cb = (CheckBox)gr.FindControl("chkItem");
            cb.Checked = true;
            if(((CheckBox)sender).Checked)
             cb.Checked = true;
                else
             cb.Checked = false;
        }

    } 
```

这是我的 ASPX 代码：

```
<asp:TemplateField HeaderText="Check All">
                    <HeaderTemplate>
                        <asp:CheckBox ID="chkAll" runat="server" AutoPostBack="True" OnCheckedChanged="chkAll_CheckedChanged" />
                    </HeaderTemplate>
                    <ItemTemplate>
                        <asp:CheckBox ID="chkItem" runat="server" />
                    </ItemTemplate>
                </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:35:54.073

使用以下 ASPX：

```
<asp:GridView runat="server" ID="m_gridView" AutoGenerateColumns="False">
                <Columns>
                    <asp:TemplateField HeaderText="Check All">
                        <HeaderTemplate>
                            <asp:CheckBox ID="chkAll" runat="server" AutoPostBack="True" OnCheckedChanged="chkAll_CheckedChanged" Checked="True" />
                        </HeaderTemplate>
                        <ItemTemplate>
                            <asp:CheckBox ID="chkItem" runat="server" Checked="True" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

默认情况下，它应该选中所有复选框和各个复选框。

在您后面的代码中执行以下操作：

```
protected void chkAll_CheckedChanged(object sender, EventArgs e)
    {
        CheckBox l_cbAll = (CheckBox)m_gridView.HeaderRow.FindControl("chkAll");
        foreach (GridViewRow l_row in m_gridView.Rows)
        {
                CheckBox l_cb = (CheckBox)l_row.FindControl("chkItem");
                l_cb.Checked = l_cbAll.Checked;
        }
    } 
```

# android - 缩放时的叠加行为

> ID：13051864
> 
> 赞同：0
> 
> 时间：2012-10-24T14:58:00.807
> 
> 标签：android, google-maps, android-mapview, overlays

我在使用叠加层时遇到问题。我在地图上绘制了一个多边形叠加层，但是，当我放大或缩小时，边缘不再与我想要的位置对齐。我怎样才能解决这个问题？

这是我启动应用程序时的样子（它完美地覆盖了整个停车场）： [正确](http://i1278.photobucket.com/albums/y510/kvothe89/Correct_zps7021c983.jpg)

这是我缩小时的样子（边缘不再与停车场对齐。覆盖看起来比停车场大一点）： [缩小](http://i1278.photobucket.com/albums/y510/kvothe89/Zoom_Out_zps735faf91.jpg)

此外，当我放大时，它不能很好地对齐。在这种情况下，叠加层比停车场要小一些。（抱歉，stackoverflow 不允许我发布超过 2 个链接）

对于如何解决这个问题，有任何的建议吗？

这是代码：

```
private Projection projection; 
private List<Overlay> mapOverlays;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MapView mapView = (MapView) findViewById(R.id.mapView); 
    mapView.setBuiltInZoomControls(true);

    MapController mc = mapView.getController();
    mc.setZoom(17); 
    mc.animateTo(new GeoPoint((int)(32.734248*1E6), (int)(-97.113448*1E6)));

    mapOverlays = mapView.getOverlays();        
    projection = mapView.getProjection();
    mapOverlays.add(new MyOverlay());        

    mapView.postInvalidate();
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

class MyOverlay extends Overlay{

    public MyOverlay(){

    }   

    public void draw(Canvas canvas, MapView mapv, boolean shadow){
        super.draw(canvas, mapv, shadow);

        Paint   mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.FILL);
        mPaint.setAlpha(100);

        GeoPoint gP1 = new GeoPoint(32733839,-97112976);
        GeoPoint gP2 = new GeoPoint(32733875, -97113448);
        GeoPoint gP3 = new GeoPoint(32734961,-97113455);
        GeoPoint gP4 = new GeoPoint(32734953, -97112962);

        Point p1 = new Point();
        Point p2 = new Point();
        Point p3 = new Point();
        Point p4 = new Point();
        Path path = new Path();

        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);
        projection.toPixels(gP3, p3);
        projection.toPixels(gP4, p4);

        path.moveTo(p1.x, p1.y);
        path.lineTo(p2.x,p2.y);
        path.lineTo(p3.x,p3.y);
        path.lineTo(p4.x,p4.y);

        canvas.drawPath(path, mPaint);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:16:53.963

每次缩放改变时，`Projection`也会改变。即使您在地图中进行较大移动而不更改缩放，投影也可能会发生变化。

要更正您的代码，您需要添加以下行：

```
public void draw(Canvas canvas, MapView mapv, boolean shadow){ 
    super.draw(canvas, mapv, shadow); 

    Projection projection = mapv.getProjection();  //Add this line

    Paint   mPaint = new Paint(Paint.ANTI_ALIAS_FLAG); 
    mPaint.setColor(Color.RED); 
    mPaint.setStyle(Paint.Style.FILL); 
    mPaint.setAlpha(100); 

    GeoPoint gP1 = new GeoPoint(32733839,-97112976); 
    GeoPoint gP2 = new GeoPoint(32733875, -97113448); 
    GeoPoint gP3 = new GeoPoint(32734961,-97113455); 
    GeoPoint gP4 = new GeoPoint(32734953, -97112962); 

    Point p1 = new Point(); 
    Point p2 = new Point(); 
    Point p3 = new Point(); 
    Point p4 = new Point(); 
    Path path = new Path(); 

    projection.toPixels(gP1, p1); 
    projection.toPixels(gP2, p2); 
    projection.toPixels(gP3, p3); 
    projection.toPixels(gP4, p4); 

    path.moveTo(p1.x, p1.y); 
    path.lineTo(p2.x,p2.y); 
    path.lineTo(p3.x,p3.y); 
    path.lineTo(p4.x,p4.y); 

    canvas.drawPath(path, mPaint); 
} 
```

您可以删除在`onCreate()`.

--已编辑--

**改进 - 快速获胜**

`onDraw()`每次移动地图或更改缩放级别时都会调用两次，因此尽可能地做到这一点很重要。您可以在下面找到一些建议：

```
private List<Overlay> mapOverlays; 

@Override 
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_main); 

    MapView mapView = (MapView) findViewById(R.id.mapView);  
    mapView.setBuiltInZoomControls(true); 

    MapController mc = mapView.getController(); 
    mc.setZoom(17);  
    mc.animateTo(new GeoPoint((int)(32.734248*1E6), (int)(-97.113448*1E6))); 

    mapOverlays = mapView.getOverlays();         
    mapOverlays.add(new MyOverlay());         

    mapView.postInvalidate(); 
} 

@Override 
protected boolean isRouteDisplayed() { 
    return false; 
} 

class MyOverlay extends Overlay{ 

    //Moved objects that need only one instance to the initialization, to avoid creating a new copy of each every time draw() runs  
    private Paint   mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

    private GeoPoint gP1 = new GeoPoint(32733839,-97112976); 
    private GeoPoint gP2 = new GeoPoint(32733875, -97113448); 
    private GeoPoint gP3 = new GeoPoint(32734961,-97113455); 
    private GeoPoint gP4 = new GeoPoint(32734953, -97112962); 

    private Point p1 = new Point(); 
    private Point p2 = new Point(); 
    private Point p3 = new Point(); 
    private Point p4 = new Point(); 
    private Path path = new Path(); 

    public MyOverlay(){
        //mPaint settings done on class creation, to avoid repeating them on draw() call 
        mPaint.setColor(Color.RED); 
        mPaint.setStyle(Paint.Style.FILL); 
        mPaint.setAlpha(100); 
    }    

    public void draw(Canvas canvas, MapView mapv, boolean shadow){ 
        super.draw(canvas, mapv, shadow); 

        //draw is always called twice, one with shadow equal to true and one to false.
        //This can be used to draw the same image with shadow
        //But you are not using shadows, so you can immediately return half of the calls, and reduce the draw() effort by half
        if(shadow) return;

        Projection projection = mapv.getProjection();

        projection.toPixels(gP1, p1); 
        projection.toPixels(gP2, p2); 
        projection.toPixels(gP3, p3); 
        projection.toPixels(gP4, p4); 

        path.rewind();
        path.moveTo(p1.x,p1.y); 
        path.lineTo(p2.x,p2.y); 
        path.lineTo(p3.x,p3.y); 
        path.lineTo(p4.x,p4.y); 

        canvas.drawPath(path, mPaint); 
    } 
} 
```

**改进——更复杂的改进**

我在下面描述的改进对于您当前的覆盖来说是一种过度杀伤力。只有当你有非常大的路径要绘制时，它才有意义。

当您移动地图而不缩放地图时，使用上面的代码，路径将被重新创建并在不同的位置重新绘制以与地图对齐。但是您正在创建的路径与前一个路径大小相同，形状相同，只是位置不同。

您可以使用以下方法获得相同的结果：

```
path.offset(dx, dy); 
```

哪里`dx, dy`是移动路径以使其与地图对齐所需的像素数。当然，您需要跟踪上次偏移路径时地图在哪里，这样您就可以将路径偏移到新的地图位置。

如果您有一条包含数千个点的路径，则偏移该路径将比重绘它快 100 倍。

您还需要跟踪缩放级别，因为您仍然需要在缩放更改时重新创建路径。你不能`getCurrentZoomLevel()`这样做，因为它与缩放动画不同步。您需要测试`longitudeSpan()`值更改，以便能够使用缩放更改动画创建同步路径。

我希望这将有所帮助。

问候。

# jquery - WYSIWYG WYMEditor - 无法加载

> ID：13051868
> 
> 赞同：0
> 
> 时间：2012-10-24T14:58:20.527
> 
> 标签：jquery, wysiwyg, wymeditor

这是我的代码：

[http://jsfiddle.net/Y6Lc4/](http://jsfiddle.net/Y6Lc4/)

这是我的加载代码：

```
jQuery(function() {
    jQuery('.wymeditor').wymeditor();
});
​ 
```

为什么哦为什么这不起作用？！我已经从演示站点复制了代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:32:16.713

您的 jsfiddle 有两个问题：

1.  根据[Issue 365](https://github.com/wymeditor/wymeditor/issues/365)，WYMeditor 1.0.0b3 不适用于 Chrome/Safari 中的 jQuery 1.8.x。您将不得不使用不同版本的 jQuery、不同的浏览器，或者等待 1.0.0b4。

2.  由于关于 AJAX 的同源策略，您实际上不能使用托管在其他地方的源来加载 WYMeditor。这是浏览器安全性的限制，也是 WYMeditor 用于在其 iframe 中加载皮肤和翻译文件的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:00:06.173

你还没有加载 jQuery 库...

你可以从这里下载它[JQuery](http://jquery.com/)

然后将其添加到您的编辑器之前。或者，如果您愿意，可以从 Google 开发者网站链接

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

更新：

演示站点显示您也需要 JQuery ......这是来自[此页面上的源](http://files.wymeditor.org/wymeditor/examples/01-basic.html)

```
<!-- jQuery library is required, see http://jquery.com/ --> 
```

# linux - 在 Ubuntu 中将所有子目录中的文件名更改为小写

> ID：13051871
> 
> 赞同：22
> 
> 时间：2012-10-24T14:58:28.293
> 
> 标签：linux, ubuntu, terminal, rename

我知道有人问过，但到目前为止我发现的还没有解决。我来的壁橱是这样的：`rename -n 'y[A-Z]/[a-z]/' *` 它适用于当前目录。我不太擅长 Linux 终端，所以我应该在此命令中添加什么以将其应用于我所在的所有子目录中的所有文件，谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-24T15:02:22.137

`find`这是使用and的一种方法`tr`：

```
for i in $(find . -type f -name "*[A-Z]*"); do mv "$i" "$(echo $i | tr A-Z a-z)"; done 
```

编辑; 添加：`-name "*[A-Z]*"`

这样可以确保只找到带有大写字母的文件。例如，如果找到只有小写字母的文件并将其移至同一文件，`mv`则会显示`are the same file`错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T16:10:44.983

Perl 有一个区域设置感知`lc()`功能，它可能会更好地工作：

```
find . -type f | perl -n -e 'chomp; system("mv", $_, lc($_))' 
```

请注意，此脚本处理文件名中的空格，但不处理换行符。并且没有防止碰撞的保护，如果你有“ASDF.txt”和“asdf.txt”，一个会被破坏。

# javascript - Ember js 和车把 - 每个都不起作用

> ID：13051873
> 
> 赞同：0
> 
> 时间：2012-10-24T14:58:42.620
> 
> 标签：javascript, ember.js, handlebars.js

我是 Ember.js 的新手，我正在努力解决它。

我有以下代码（[http://jsfiddle.net/6wPmW/](http://jsfiddle.net/6wPmW/)为一个工作示例）：

```
 <script type="text/x-handlebars">
                    <div id="ViewAddresses" class="location_search_results selected_searches clearfix">

                        <div>

                                    <div>
                                    {{#each MapSearch.ViewAddressesC}}
                                        <div class="row">ghfdg</div>
                                    {{/each}}
                                    </div>

                        </div>
                    </div>
                </script>​ 
```

JS：

```
MapSearch = Ember.Application.create();
MapSearch.ListAddress = Ember.Object.extend({
    list_info: null,
    node_level: null,
    node_value: null,
    removed_properties: null

});
MapSearch.ViewAddressListC = Ember.ArrayController.create({
    content: [],
    initialize: function() {
        me = this;
        var l = MapSearch.ListAddress.create({
            node_level: "test",
            node_value: "test"
        });
        me.pushObject(l);
        var l = MapSearch.ListAddress.create({
            node_level: "test",
            node_value: "test"
        });
        me.pushObject(l);
        console.log(me);
    }

});
MapSearch.ViewAddressListC.initialize();
console.log(MapSearch.ViewAddressListC.get("content"));​ 
```

当然我应该`<divs>`从每个循环中创建两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:16:24.847

错误在您的模板中：

```
{{#each MapSearch.ViewAddressesC}} 
```

应该

```
{{#each MapSearch.ViewAddressListC}} 
```

请参阅[此 JSFiddle](http://jsfiddle.net/mXjD9/)。

# ios - 使用 MonoTouch 在 iPhone 上捕获 wcf 异常

> ID：13051878
> 
> 赞同：1
> 
> 时间：2012-10-24T14:58:52.790
> 
> 标签：ios, wcf, xamarin.ios

我一直遇到服务器上抛出异常并在客户端（iPhone）上捕获它们的问题。

服务的接口有一个用

```
[FaultContract(typeof(SecurityException))] 
```

在该方法中，我抛出了一个 SecurityException。在电话上，我收到以下错误：

```
{System.Net.WebException: Error getting response stream (ReadDone1): ReceiveFailure 
---> System.IO.IOException: EndRead failure 
---> System.Net.Sockets.SocketException: Connection reset by peer   
at System.Net.Sockets.Socket.EndReceive (IAsyncResult result) [0x0002d] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net.Sockets/Socket_2_1.cs:1979
at System.Net.Sockets.NetworkStream.EndRead (IAsyncResult ar) [0x0002f] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net.Sockets/NetworkStream.cs:338    --- End of inner exception stack trace ---   
at System.Net.Sockets.NetworkStream.EndRead (IAsyncResult ar) [0x0003d] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net.Sockets/NetworkStream.cs:340    
at System.Net.WebConnection.ReadDone (IAsyncResult result) [0x0002a] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebConnection.cs:429    --- End of inner exception stack trace ---   
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x0005e] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:852
at System.ServiceModel.Channels.HttpRequestChannel.GotResponse (IAsyncResult result) [0x0001f] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel/System.ServiceModel.Channels/HttpRequestChannel.cs:218 } 
```

现在我浏览了关于这个的问题，似乎这个错误已经被报告并在 monotouch 版本中修复。我正在使用最新 (6.0.4) 版本的 monotouch，但仍然遇到错误。

有什么想法我可能做错了吗？

# javascript - JQuery $.post 函数在 Firefox 中有效，但在 IE 中无效

> ID：13051879
> 
> 赞同：0
> 
> 时间：2012-10-24T14:58:52.460
> 
> 标签：javascript, jquery, ajax, post

我的网站上有一些函数可以使用 $.post 更新我的数据库。这些在 Firefox 中都可以正常工作，但在 Internet Explorer 中根本不行，我似乎无法弄清楚为什么我将这些功能放在下面：

功能一：

```
function removeAd(ad_id) {
    $.post('remove.php', {
        id: ad_id
    }, function() {
        $('.workarea').load('display.php');
    });
};​ 
```

功能二：

```
$(document).ready(function() {
    $('a#addBanner').click(function() {
        $.post('add.php', {
            task: 'banner'
        }, function() {
            $('.workarea').load('display.php');
        });
    });
});​ 
```

功能三：

```
$(document).ready(function() {
    $(function() {
        $("#categoryorder").sortable({
            opacity: 0.6,
            cursor: 'move',
            update: function() {
                var order = $(this).sortable("serialize") + '&action=updateRecordsListings';
                $.post("update.php", order)
            }
        });
    });
});​ 
```

有谁知道为什么这些可以在 Firefox 中运行，但在 IE 中不行。我对此很陌生，调试并不是我擅长的事情，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:04:26.953

IE 存在 ajax 请求的缓存问题。尝试使用

```
$.ajaxSetup({cache:false}); 
```

或者添加一个参数，让 IE 认为它是一个新页面，而不是从缓存中获取它

```
$('.workarea').load('display.php',{getnew:new Date().getTime()}); 
```

# c++ - c++ 中是否有使用 opencv 和 travis ci 的示例项目？

> ID：13051880
> 
> 赞同：6
> 
> 时间：2012-10-24T14:58:57.950
> 
> 标签：c++, opencv, github, cmake, travis-ci

我使用 Github 作为源代码控制工具，我想使用 travis-ci 插件进行 CI。我没有找到任何这样做的项目。由于 travis-ci 提供了没有 openCV 库的 ubuntu 12.04，我正在安装这些库，但是我在使用 CMake 使用已安装的库编译我的代码时遇到了麻烦。我非常希望看到一个示例项目，它是 .travis.yml（如果您知道的话），最好是在 travis ubuntu 和开发机器的 windows 上都可以使用的设置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-18T21:39:37.693

这是使用 CMake 构建项目的示例 .travis.yml：

```
language: cpp

compiler:
  - gcc

before_script:
  - mkdir build
  - cd build
  - cmake ..

script: make 
```

完整的项目可从[https://github.com/leutloff/diff-match-patch-cpp-stl](https://github.com/leutloff/diff-match-patch-cpp-stl)获得。另一个示例可从[Need 托管 CI 服务器获得，该服务器带有 Qt4、sqlite3、cmake、git、gcc 用于 GitHub 上的项目](https://stackoverflow.com/questions/15050329/)。

# c++ - 在 Windows 中获取 C++ 中的唯一硬件标识符

> ID：13051881
> 
> 赞同：2
> 
> 时间：2012-10-24T14:59:05.223
> 
> 标签：c++, windows, hash, hardware

> **可能重复：**
> [生成唯一硬件 ID 的可靠方式](https://stackoverflow.com/questions/2842116/reliable-way-of-generating-unique-hardware-id)

我想用 C++ 检索单台机器的唯一硬件标识符。有什么建议么？我需要这个软件在 Windows XP、Vista、7、8 中运行。我只需要一些系统调用来检索 MAC 地址、硬盘序列号或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:37:13.143

使用机器的[DPAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx)密钥加密任何值，并将加密的值用作您的 ID。

**注意：**我复制了我对这个重复的问题的[原始答案。](https://stackoverflow.com/a/13053731/591064)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:17:00.010

[这](http://www.codeguru.com/cpp/i-n/network/networkinformation/article.php/c5451/Three-ways-to-get-your-MAC-address.html)是一篇关于如何使用 C++ 获取 mac 地址的精彩文章。您可以使用这三种方法中的一种来获取您的 MAC 地址，之后您可以对这些 MAC 地址使用某种加密（eh sha256）——当然，只有当您希望这些 MAC 地址在您使用时隐藏存储它们。

# sql - Django - 在模板中使用计数

> ID：13051882
> 
> 赞同：0
> 
> 时间：2012-10-24T14:59:11.027
> 
> 标签：sql, django, model, django-templates

我有一个简单的问题。

在我的模板文件中，我有`{{ category.photo_set.count }}`两次相同的变量。

例如：

```
 <div class="galleries">

            <div class="row">
            {% for category in categories %}
                <div class="five columns{% cycle " alpha" "" " omega" %}">

                    <div class="image"><a href="{% url gallery.views.category category.slug %}"><img src="{{ MEDIA_URL }}{{ category.image }}" alt="" /></a></div>

                    <h4>{{ category.name }}</h4>       
                    <p>Ilość zdjęć: {{ category.photo_set.count }}</p>  

                    {%  if category.photo_set.count > 0 %}<a class="button" href="{% url gallery.views.category category.slug %}">zobacz</a>{% endif %}
                </div>
            {% endfor %}

            </div>

        </div> 
```

我注意到这段代码对数据库生成了两个完全相同的查询。

```
30 Query    SELECT COUNT(*) FROM `gallery_photo` WHERE `gallery_photo`.`category_id` = 1
30 Query    SELECT COUNT(*) FROM `gallery_photo` WHERE `gallery_photo`.`category_id` = 1 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:04:29.590

这是`with`模板标签的一个很好的用例：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#with](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#with)

你只想用

```
{% with photo_count=category.photo_set.count %}
...
{{photo_count}}
...
{% endwith %} 
```

# html - INPUT 元素内的退格键导致固定位置 DIV 重新定位到光标

> ID：13051884
> 
> 赞同：3
> 
> 时间：2012-10-24T14:59:14.553
> 
> 标签：html, ios, cordova, input, webkit

是的。听起来怪怪的。

我有一个在 iOS6 (iPhone5) 上运行的 PhoneGap 2.1.0 应用程序，不幸的是我无法在另一台设备上进行测试（我回家后会检查模拟器）。

**用例：** 用户将文本数据键入到 INPUT 元素中，该元素跨越了 INPUT 元素的可见宽度，并且必须退格以更正键入错误。

**预期：** 最后一个字符被删除。

**实际：** 删除最后一个字符，并且*仅当*删除的文本超出 INPUT 元素的可见边界时，“位置：固定；” 应用程序标头重新定位到文本输入光标的位置。

**这是一个屏幕：（**抱歉堆栈不允许我发布 imgs） [问题截图](http://n2d.co/wp-content/uploads/2012/10/IMG_02372.png)

有人有想法么？如果您需要呈现此内容的 HTML 和/或 CSS 的特定部分，请告诉我，我会尽快发布。

**值得注意的是：**

*   输入元素已重新蒙皮。
*   输入元素的“-webkit-appearance”属性设置为“none”。
*   这个问题在所有输入元素（类型=文本、搜索、数字、电话或电子邮件）中都是一致的，甚至在不同的表单/屏幕/页面中也是如此。我推测这个属性与它有关 - 但我无法想象是什么。我过去使用过这个属性，没有问题。
*   只要输入元素中被删除的字符不超出元素的可见边界，退格事件就会按预期运行。
*   站点中还有其他固定位置的 DIV 元素，但只有顶部导航栏/标题正在重新定位。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T03:51:52.830

这种解决方法对我有用。

将这些添加到受影响的输入：

```
-webkit-transform: translate3d(0,0,0);
-webkit-backface-visibility: hidden;
-webkit-perspective: 1000;
-webkit-transform-style: flat; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T15:03:51.697

您可以使用 Jquery 来规避此问题，方法是每次按下退格键时隐藏标题，然后再次显示它。

```
$('#input_field').keyup(function(e) {
  if (e.keyCode === 8) {
    return $('#header').hide(0, function() {
      return $(this).show();
    });
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:55:55.690

我的团队在 IOS6 + 固定标题移动中遇到了类似的退格问题。我们找不到真正的解决方案，但作为一种解决方法，我们使用modernizr 来测试溢出内容滚动并将绝对位置应用于标题，同时将滚动应用于应用页面div。

```
 Modernizr.addTest('overflowscrolling', function(){
            return Modernizr.testAllProps("overflowScrolling");
    }); 
```

css

```
.overflowscrolling .app-header {
   position: absolute;  
}

.overflowscrolling #app-page {
overflow: scroll;
position:absolute;
top:0px; 
bottom: 0px;
left: 0px;
right: 0px;
-webkit-overflow-scrolling: touch; 
```

}

# java - 为什么我在不同的机器上使用 PBKDF2 得到不同的结果？

> ID：13051886
> 
> 赞同：2
> 
> 时间：2012-10-24T14:59:23.443
> 
> 标签：java, encryption, passwords, password-encryption, pbkdf2

我正在尝试使用 PBKDF2 来存储密码。然后，我将代码与它在另一台机器上生成的密码哈希一起使用。

我正在使用这种方法来加密我的密码：

```
public  String pwdEncodePBKDF2(String unencryptedPassword,String salt)
{
try
{
        if(salt.isEmpty())
        {
            salt = generateSalt(SystemSecurity.SALTLENGTH);
        }
        String algorithm = "PBKDF2WithHmacSHA1";
        int derivedKeyLength = 160;
        int iterations = 1000;
        KeySpec spec = new PBEKeySpec(unencryptedPassword.toCharArray(), salt.getBytes(), iterations, derivedKeyLength);
        SecretKeyFactory f = SecretKeyFactory.getInstance(algorithm);
        StringBuffer hexString = new StringBuffer();
        byte[] mdbytes  =  f.generateSecret(spec).getEncoded();
        for (int i=0;i<mdbytes.length;i++)
        {
            hexString.append(Integer.toHexString(0xFF & mdbytes[i]));
        }
        String hashedPassword = hexString.toString();
        return hashedPassword  + salt;
    }
    catch(Exception e)
    {
        e.printStackTrace();
        throw new RuntimeException("Error computing hash: "+e.getMessage());
    }        
} 
```

它工作正常，但是当我在另一台机器上运行它时（即将我的项目安装在另一台机器上，数据库对我最初运行的机器的默认密码进行了加密）我看到使用相同的盐和密码它给了我不同的加密。据我了解，SecretKeyFactory 方法仅取决于我给它们的输入，还是它们也取决于我正在运行的机器？

如果是这样，如何使用此安全机制保存首次安装的默认密码，而无需在安装期间运行任何额外代码？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:15:50.600

我认为问题可能出在不同的默认字符串编码中。

检查您的字符串是否使用相同的编码。

您可以尝试使用检查字节

```
salt.getBytes() 
```

*   它以默认编码返回字节，可能是机器具有不同的编码。

您可以将 salt.getBytes() 替换为 salt.getBytes("UTF-8"); 可能会有所帮助。

# sql - 尝试查找特定值时 SQL 查询返回多行

> ID：13051888
> 
> 赞同：0
> 
> 时间：2012-10-24T14:59:36.920
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有 2 张桌子。一个称为“Tasks”，另一个在我的“Task”中称为“TaskDescription”，设置如下所示：“taskID(primary)”、“FileID”、“TaskTypeID”和一堆其他不相关的列。

然后在我的“TaskDescription”中，设置看起来像：“TaskTypeID”、“TaskTypeDesc”

因此，例如，如果 TaskTypeID 为 1 ，则描述将为“admin”，或者如果 TaskTypeID 为 2，则 TaskTypeDesc 将为“Employee”等。

这两个表在主/外键“TaskTypeID”上有关系。

我想要做的是获取一个任务 ID，以及 FileID 与 @fileID 匹配的 TaskDesc（我作为参数传入）。但是，在我的查询中，我在尝试获取描述时返回了多行而不是单行。

这是我的查询：

```
SELECT taskid,
       ( 'Task ID: '
         + Cast(cf.taskid AS NVARCHAR(15)) + ' - '
         + Cast((SELECT DISTINCT td.tasktypedesc FROM casefiletaskdescriptions
         td JOIN
         casefiletasks cft ON td.tasktypeid=cft.tasktypeid WHERE cft.taskid =
         1841 )AS
         NVARCHAR(100))
         + ' - Investigator : ' + ( Cast(i.fname AS NVARCHAR(20)) + ' '
                                    + Cast(i.lname AS NVARCHAR(20)) ) ) AS
       'Display'
FROM   casefiletasks [cf]
       JOIN investigators i
         ON CF.taskasgnto = i.investigatorid
WHERE  cf.fileid = 2011630988
       AND cf.concluded = 0
       AND cf.progressflag != 'Conclude' 
```

我试图让输出看起来像“任务 ID：1234 - 管理员 - 调查员：John Doe”。但是我在这方面遇到了麻烦：

```
CAST((select DISTINCT td.TaskTypeDesc from CaseFileTaskDescriptions td 
JOIN CaseFileTasks cft ON td.TaskTypeID=cft.TaskTypeID 
where cft.TaskID =1841 )as nvarchar(100)) 
```

这似乎可行，但问题是我必须对值“1841”进行硬编码才能使其工作。有没有办法用从 TaskID 选择查询返回的值分配一个“taskID”变量，或者它不会工作，因为我认为 sql 一次运行所有内容而不是逐行运行。

编辑-这是在 Microsoft SQL Server Management Studio 2008 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:09:12.840

您可以*动态*引用集合中存在的列`FROM`。在这种情况下，它将是来自`casefiletasks`或的任何列`investigators`。您将替换`1841`为`table.column`参考。

![](../Images/23bb1b6811b731eb7fd57448e28ada90.png)

**更新**

用列引用替换您的静态整数，您的查询将如下所示：

```
SELECT taskid,
       ( 'Task ID: '
         + Cast(cf.taskid AS NVARCHAR(15)) + ' - '
         + Cast((SELECT DISTINCT td.tasktypedesc FROM casefiletaskdescriptions
         td JOIN
         casefiletasks cft ON td.tasktypeid=cft.tasktypeid WHERE cft.taskid =
         cf.taskid )AS
         NVARCHAR(100))
         + ' - Investigator : ' + ( Cast(i.fname AS NVARCHAR(20)) + ' '
                                    + Cast(i.lname AS NVARCHAR(20)) ) ) AS
       'Display'
FROM   casefiletasks [cf]
       JOIN investigators i
         ON CF.taskasgnto = i.investigatorid
WHERE  cf.fileid = 2011630988
       AND cf.concluded = 0
       AND cf.progressflag != 'Conclude' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:21:44.447

为什么不只做另一个联接而不是子查询呢？

```
SELECT taskid,
       ( 'Task ID: '
         + Cast(cf.taskid AS NVARCHAR(15)) + ' - '
         + Cast(td.tasktypedesc AS NVARCHAR(100))
         + ' - Investigator : ' + ( Cast(i.fname AS NVARCHAR(20)) + ' '
                                    + Cast(i.lname AS NVARCHAR(20)) ) ) AS
       'Display'
FROM   casefiletasks [cf]
       JOIN investigators i
         ON CF.taskasgnto = i.investigatorid
       JOIN casefiletaskdescriptions td
         ON td.tasktypeid = cf.tasktypeid
WHERE  cf.fileid = 2011630988
       AND cf.concluded = 0
       AND cf.progressflag != 'Conclude' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:04:03.053

这可以作为您的内部查询吗？

```
SELECT DISTINCT td.TaskTypeDesc FROM CaseFileTaskDescriptions td 
JOIN CaseFileTasks cft ON td.TaskTypeID = cft.TaskTypeID 
WHERE cft.TaskID = cf.TaskID 
```

# c# - 根据销售额/年龄将用户插入级别

> ID：13051893
> 
> 赞同：-2
> 
> 时间：2012-10-24T14:59:59.077
> 
> 标签：c#, list, sorting

我有一个包含字段、名称、地区和销售的销售人员列表。我已经按售出的文章数量对它们进行了排序，但我需要一种方法将它们分成多个级别并打印出来。例如：

> 詹姆斯 - 12 次销售
> 
> 比利 - 25 销售
> 
> 2 名销售人员达到 1 级：低于 50 名销售人员

等等。最简单和最好的方法是什么？

我目前用于排序的循环如下所示：

```
 foreach (salesman n in salesmen.OrderBy(s=>s.sales))
    {
        Console.WriteLine(n.name);
        Console.WriteLine(n.sales);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:14:11.903

> 我有一个包含字段、名称、地区和销售的销售人员列表。我已经按售出的文章数量对它们进行了排序，但我需要一种方法将它们分成多个级别并打印出来。例如：
> 
> > 詹姆斯 - 12 次销售
> > 
> > 比利 - 25 销售
> > 
> > 2 名销售人员达到 1 级：低于 50 名销售人员
> 
> 等等。最简单和最好的方法是什么？
> 
> 我目前用于排序的循环如下所示：

```
foreach (salesman n in salesmen.OrderBy(s=>s.sales))
{
    Console.WriteLine(n.name);
    Console.WriteLine(n.sales);
} 
```

编码没有秘密，也没有捷径。我们首先开发业务逻辑“如果一个推销员做了这么多的销售，他们就在这个层次，那么多的销售，那个层次”，然后我们把它变成计算机逻辑。这就是编程的艺术，寻找将人们的陈述转化为数学陈述的最佳方式。有时数学语句非常冗长，有时它们很简洁。不会改变一天的结束，您所能做的就是编写代码。

将列表中的所有人分类到桶中的唯一方法是遍历列表的每个部分。那是一个迭代，或者一个循环。你正在这样做。然后我们`.OrderBy(s...`针对某些关键字或值测试 ( )。

做你所要求的最简单和最好的方法是定义业务规则，然后用循环将它们封装在你正在做的逻辑中。您可能会发现每个业务规则最终都得到一个列表，这并不是一件坏事。

这里唯一的问题是听起来您正在寻找“这始终是存储此数据的最佳方式”的答案，而这里不存在。在我们了解您的整个用例之前，我们能做的最好的事情就是说“是的，这是合适的”。每种情况都需要不同的答案。我意识到这不是一个答案，但有时它是你需要听到的答案。你做得很好，对自己有一点信心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:17:47.280

由于您没有指定代码或填充对象的方式，因此一种方法是：

```
Employees.ForEach(e => Console.WriteLine("{0} - {1} Sale/s",e.Name, e.Sales.Count().ToString()));

    int[] levels = new int[1];
    levels[0] = 50;

    for (int i = 0; i < levels.Length; i++)
        {
        var emps = Employees.Where(e => e.Sales.Count() <= levels[i]);

        emps.ForEach(Console.WriteLine("{0} salesmen have reachead level {1}: under {2} sales", emps.Count(), i.ToString(), levels[i]);
        // Remove employees from the list that already achived the level (so they won't be counted again).
        Employess.RemoveAll(e=> e.Sales.Count() <= levels[i]);
        } 
```

这只是伪代码，它可能无法编译，但这是一般的想法。

# xamarin - 单声道导航

> ID：13051901
> 
> 赞同：0
> 
> 时间：2012-10-24T15:00:29.157
> 
> 标签：xamarin, navigation, mono, xamarin.android

我刚开始使用单声道，我已经遇到了问题。我习惯于使用 c# 代码，并被告知单声道对我来说很容易，但不不。我只是想开始一项新活动并关闭我刚刚使用的活动。我查看了一些单声道 API 示例，但它们对于这项任务来说太复杂了。它必须是一些更简单的方法。这是我的第一个活动课：

```
[Activity(Label = "CryptotoDroid", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
    EditText inputpassword;
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.Main);
        Button button = FindViewById<Button>(Resource.Id.MyButton);
        inputpassword = FindViewById<EditText>(Resource.Id.beforetext);
        button.Click += delegate
        {
            if (inputpassword.Text == "Moo")
            {
                StartActivity(typeof(ActivityContacts));
            }
        };
    }
} 
```

这是我尝试过的，但程序崩溃了。我只是想让程序在密码为“moo”时开始一个新的活动。我要开始的活动是：

```
 [Activity(Label = "My Activity")]
    public class ActivityContacts : Activity
    {
        protected override void OnCreate(Bundle bundle)
        {
            SetContentView(Resource.Layout.Main);
            var contactgrid = FindViewById<GridView>(Resource.Id.gridview);

        }
    } 
```

稍后，我还想用手机中的所有联系人填写我的网格视图，但这属于另一个主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:23:36.537

对于从 MonoDroid 开始，我建议：

*   获得其中一本优秀的书籍（Wally、Greg、Chris 或其他人会提出建议——我个人还没有看到一本不好的书，所以不会给出推荐！）
*   尝试在 YouTube 上观看几个 Xaminar -http://www.yourepeat.com/g/Xaminar
*   尝试构建 Xamarin 示例程序，然后尝试调整它们 - 有时调整工作程序比启动新程序更容易（有时！）
*   尝试像上面一样构建新事物。

当您遇到问题时 - 就像我们一样 - 请在此处或 Xamarin 论坛上提问 - 人们会提供帮助。

但是，当您遇到崩溃或异常时，请尝试：

1.  尽可能多地向我们提供有关崩溃/异常的信息 - 包括有一些方法可以从手机或模拟器中获取额外的调试日志 - [http://docs.xamarin.com/Android/Guides/Deployment,_Testing,_and_Metrics /Android_Debug_Log](http://docs.xamarin.com/Android/Guides/Deployment,_Testing,_and_Metrics/Android_Debug_Log) - 这些日志通常包含有助于我们帮助您诊断崩溃的重要文本
2.  如果您在 VS2010、VS2012 或 MonoDevelop 调试工具下运行，请尝试添加额外的 Console.WriteLine 语句和/或使用断点 - 这可以帮助您和我们找出导致崩溃的行 - 或者崩溃是否发生在某处在代码运行之前设置。

就个人而言，我相信 Mono for Android 确实有助于体验 C# 开发人员在 Android 上发挥他们的技能 - 但仍然有新的东西要学习，仍然有嵌入式开发的挫折需要解决和克服（比如这类崩溃）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:26:48.170

您的意思是将两个活动的内容视图设置为主布局吗？

```
SetContentView(Resource.Layout.Main); 
```

`public void setContentView (View view)`

*将活动内容设置为显式视图。此视图直接放置在活动的视图层次结构中。它本身可以是一个复杂的视图层次结构。调用此方法时，会忽略指定视图的布局参数。默认情况下，视图的宽度和高度都设置为`MATCH_PARENT`. `setContentView(android.view.View, android.view.ViewGroup.LayoutParams)`要使用您自己的布局参数，请改为调用。*

# javascript - 代码效率专家 - 操作列表 - 字符串比较 - 将元素附加到另一个 div

> ID：13051902
> 
> 赞同：0
> 
> 时间：2012-10-24T15:00:37.840
> 
> 标签：javascript, jquery

我有一个大名单，前任：

```
***orginal list***
<div class="ms-contactcardtext3" id="ProfileViewer_ProfileDetails">
   <div cellpadding="0" cellspacing="0" class="ms-my-profileDetails">
    <div>office: <a href="http://vg.no">Oslo</a></div>
    <br><div>User type : <a href="http://vg.no">Ansatt i XXX</a></div>
    <br><div>Company : <a href="http://vg.no">XXX</a></div>
    <br><div>phone: <a href="http://vg.no">+47 444444</a>
    </div>
</div> 
```

我想操作并将其移动到同一页面上的目标 div

```
***List I want***
<div class="destination">    
 <div class="company">Company : <a href="http://vg.no">XXX</a></div>
 <div class="userType">User type : <a href="http://vg.no">Ansatt i XXX</a></div>
 <div class="phone">phone: <a href="http://vg.no">+47 444444</a></div>
 <div class="office">office: <a href="http://vg.no">Oslo</a></div>
</div> 
```

**PS - 读这个**

1.  我无法在大列表中添加类/ID，所以我必须使用字符串比较
2.  列表可能会不时更改，因此每个元素的顺序可以更改，但我知道顺序

[Fiddler 示例在这里](http://jsfiddle.net/nGWcX/1/) <-- 示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:56:36.327

我不完全确定你在追求什么。我在效率方面的尝试依赖于 cloneNode 来创建新元素和 vanilla javascript 而不是 jQuery。它也比它需要的更冗长，因为我没有采用通用循环。正则表达式可能不是最佳选择。您真的应该编译任何解决方案并使用 jsperf 对其进行测试。我假设我不能只重用源容器中的节点。

我应该注意我宁愿避免使用 getElementsByClassName，但为了简单起见，我更喜欢它而不是手动 DOM 遍历和使用 getElementById

[http://jsfiddle.net/qpZ9K/](http://jsfiddle.net/qpZ9K/)

```
var s = document.getElementsByClassName('ms-my-profileDetails')[0],
    d = document.getElementsByClassName('destination')[0],
    c = s.childNodes,
    t = d.hasOwnProperty('textContent') ? 'textContent' : 'innerText',
    rCompany = /^\s*Company/,
    rType = /^\s*User type/,
    rPhone = /^\s*phone/,
    rOffice = /^\s*office/,
    div = document.createElement('div'),
    newDiv,

    company, type, phone, office, node, text, content, link, child, i, j;

for (i = 0; i < c.length; i += 1) {
    node = c[i],
    text = node[t],
    content = node.childNodes,
    link = null;

    for (j = 0; j < content.length; j += 1) {
        child = content[j];
        if (child.tagName === 'A') {
            link = child;
            break;            
        }
    }

    if(rCompany.test(text)) {
        company = link;
    } else if (rType.test(text)) {
        type = link;        
    } else if (rPhone.test(text)) {
        phone = link;
    } else if (rOffice.test(text)) {
        office = link;
    }
}

newDiv = div.cloneNode(false);
newDiv.className = "company";
newDiv[t] = 'Company : ';
company && newDiv.appendChild(company.cloneNode(true));
d.appendChild(newDiv);

newDiv = div.cloneNode(false);
newDiv.className = "userType";
newDiv[t] = 'User type : ';
type && newDiv.appendChild(type.cloneNode(true));
d.appendChild(newDiv);

newDiv = div.cloneNode(false);
newDiv.className = "phone";
newDiv[t] = 'Phone : ';
phone && newDiv.appendChild(phone.cloneNode(true));
d.appendChild(newDiv);

newDiv = div.cloneNode(false);
newDiv.className = "office";
newDiv[t] = 'office : ';
office && newDiv.appendChild(office.cloneNode(true));
d.appendChild(newDiv);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:28:03.753

如果您要向 DOM 添加大量元素，那么您可能需要考虑使用：

**[创建文档片段（）](https://developer.mozilla.org/en-US/docs/DOM/document.createDocumentFragment)**

> 由于文档片段在内存中而不是主 DOM 树的一部分，因此将子片段附加到它不会导致页面重排（计算元素的位置和几何形状）。**因此，使用文档片段通常会带来更好的性能。**
> 
> **所有浏览器**都支持 DocumentFragment ，甚至 Internet Explorer 6，因此没有理由不使用它们。
> 
> [回流](https://developer.mozilla.org/en-US/docs/Notes_on_HTML_Reflow)是计算布局引擎格式化对象的几何形状的过程。

由于您要添加元素，因此最好将这些元素添加到文档片段，然后再将这些元素附加到 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:27:47.607

[这里](http://jsfiddle.net/nGWcX/3/)有一些东西给你，但坦率地说不明白你真正想要什么。

```
var ordered = [];

$('#ProfileViewer_ProfileDetails .ms-my-profileDetails div').each(function() {
  var that = $(this);
  var compare = that.text().split(':')[0];

  if (compare === "office") {
    ordered[3] = that;
  }

  if (compare === "User type ") {
    ordered[1] = that;
  }

  if (compare === "Company ") {
    ordered[0] = that;
  }

  if (compare === "phone") {
    ordered[2] = that;
  }
});
$(".destination").append(ordered); 
```

# c# - 与 RDLC 报告中的参数相关的问题

> ID：13051905
> 
> 赞同：0
> 
> 时间：2012-10-24T15:00:50.603
> 
> 标签：c#, asp.net

我在 Visual Studio 2008 中有 ASP.Net 应用程序。我在 RDLC 报告中添加了报告参数，我想在设计视图中的 rdlc 报告中绘制参数，但我`"Report Data Panel"`在我的 ASP.Net 应用程序中找不到...我试过`ALT+CTR+D`但它不起作用。如何在我的 RDLC 报告设计中绘制参数？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:03:27.110

试试这些步骤

*   在 Visual Studio 中打开 rdlc 文件
*   点击查看菜单
*   点击报告数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:07:06.207

要使窗口显示，很容易找到，但位置与平常略有不同（不在“其他窗口”部分下）。它位于视图菜单本身，在我的例子中，是菜单上的最后一个选项，名为“报告数据”。

**查看 --> 报告数据**

参考：[在 Visual Studio 2008 / SRS 2008 中查看报表数据窗口](http://chrisghardwick.blogspot.com/2009/03/view-report-data-window-in-visual.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:05:43.650

感谢您的回答：但我在查看菜单中看不到“报告数据”选项，我可以 在 Visual Studio 2008`ASP.NET` 中看到此选项`Windows Application`

# facebook - 使用应用程序在页面 A 墙上分享页面 B 帖子

> ID：13051906
> 
> 赞同：0
> 
> 时间：2012-10-24T15:00:52.643
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

假设：我是页面 A 的管理员。我不是页面 B 的管理员。

作为页面 A，我可以获取页面 B 上显示的任何帖子并将其分享到页面 A，这是通过单击帖子中图像下方显示的“共享”一词来实现的。

现在，我想用代码自动实现这一点。假设我在页面 B 墙上看到一个帖子，我找到它的帖子 ID 并将其提供给我的应用程序。现在我的应用程序将尝试将这个帖子从页面 B 分享到我的页面 A。我想通过应用程序复制从页面 B 墙到我的页面的手动共享过程。

目前，我还没有开始处理这个代码。我只想知道这是否可能，我可以采取什么方法来实现这一目标。

注意：我不想在我的页面墙上发布我自己的帖子。帖子应该显示为从页面 B 墙上共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:58:36.530

我很确定这是不可能的，因为我最近做了一些测试。即使您是*PageA*和 PageB 的管理员，您也不能在 PageA 上以 PageB 的身份发帖（其中“声音”设置为 PageB，并且帖子显示为由 PageB 创作）。声音（即“由 PageB 创作”）在您管理的页面上工作，并在页面上发布属于*同一页面*的声音。至少这就是 API 当前的行为方式。

将此扩展到共享：不确定您是如何考虑执行共享的，但通过 API 在页面上共享基本上是在与另一个帖子相同的上下文中发布。

# javascript - 谁能解释这段Javascript代码？

> ID：13051907
> 
> 赞同：2
> 
> 时间：2012-10-24T15:00:53.537
> 
> 标签：javascript, regex

阅读此[讨论](https://groups.google.com/forum/?fromgroups=#!topic/comp.lang.javascript/g0n_Tu8qro4)，我不明白这是什么意思：

```
 $1X$2 
```

简单**X** ?

关于其他代码：

```
 str = str.replace(/(<script.*?>)(.*)(?=<\/script>)/gi, function(x,y,z)
 {return y+z.replace(/a/gi,'Z')}) 
```

这是我不明白的：

*   `?=`
*   效果如何`function(x,y,z)`？即从哪里取`x`，`y`和`z`？

如果有人能清楚地解释这段代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:04:51.587

1.  用作`.replace()`调用的第二个参数的字符串“$1X$2”包括对来自正则表达式第一个参数的**组的引用。**组 - 括号中的正则表达式部分 - 收集它们匹配的字符以供以后使用。子字符串 "$1" 和 "$2" 的意思是“与组 1 匹配的任何内容”（或组 2）。

2.  当调用的第二个参数`.replace()`是函数时，JavaScript 将匹配信息作为参数传递给函数。第一个参数始终是整个匹配。随后的参数是匹配的组。

因此：

```
alert("hello world".replace(/(ell)(o w)/, "$2$1");
// alerts "ho wellorld" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T15:04:55.780

这都是关于捕获组的。`(`并`)`捕获两者之间的所有内容，以便您以后可以访问匹配的子字符串。

`$1`指的是第一个捕获的组，`$2`第二个（分别是第一对和第二对括号）。（`$0`将指整个比赛。）

带有回调函数的变体执行相同的操作，但这里的变量和`x`填充了捕获的组（分别对应于和）。`y``z``$0``$1``$2`

最后`?=`打开一个前瞻。这断言匹配中的这个位置后面`<\/script>`没有实际推进匹配字符串中的正则表达式引擎，也没有在匹配中包含这部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T15:05:13.100

`()`$1 和 $2 引用从前一个参数到的正则表达式中捕获的子表达式（由括号分隔） `.replace()`。

?= 是一个积极的前瞻。[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

这`function(x, y, z)`是一个匿名函数表达式，它与引用 $1 和 $2 做类似的事情，但它将它们存储在变量中。

# java - Hibernate Example 没有找到任何实例

> ID：13051914
> 
> 赞同：1
> 
> 时间：2012-10-24T15:01:07.373
> 
> 标签：java, hibernate, criteria, query-by-example

我遇到了有线问题。

我使用 Hibernate 通过示例查找实体。

不幸的是，即使我在表中有大约 20000 个条目，我也找不到任何实例。

我的问题是，如何调试这个问题。

```
01  Puppy p = new Puppy()
02  List list = session.createCriteria(Puppy.class).add(Example.create(p)).list();
03  System.out.println(list.length()); 
```

返回 0

编辑：我什至将所有 nm 和 1-n 反应设置为*null*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:11:49.950

首先，`System.out.println`看起来像c#？那么NHibernate？

在我的项目中，我有一个配置部分，我可以在那里添加一个属性：

```
NHibernate.Cfg.Configuration configuration = new NHibernate.Cfg.Configuration();

configuration.SetProperty(NHibernate.Cfg.Environment.ShowSql, "true"); 
```

希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:10:08.117

您正在执行 Query By Example，这意味着 Puppy 实例中的属性`p`将生成相应的查询，以便结果集与示例匹配。

我怀疑您的 Puppy 实例中有一些非空属性。

最简单的调试方法是在 Hibernate 中打开 SQL 跟踪，这样您就知道生成的 SQL 是什么，从而知道查询条件是什么，从而知道示例实例中的哪个字段导致了问题。

# c# - 更新时的数据绑定数据网格视图不显示顶行

> ID：13051921
> 
> 赞同：0
> 
> 时间：2012-10-24T15:01:35.130
> 
> 标签：c#, .net, visual-studio-2010, data-binding, datagridview

当新行添加到`datasource`更新`datagridview`但自动在视图中的行，即不需要滚动到“旧”行时。先前选择的行位于可查看行的底部。我希望显示最新的行，即滚动条始终位于顶部。

我尝试取消选择以下所有行`datagridview`：

```
dataGridView1.ClearSelection();
dataGridView1.CurrentCell = null; 
```

尽管没有选择行，但`datagridview`不会自动显示顶部的行。`datagridview`仍然会跳转以显示先前选择的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:12:14.023

```
dataGridView1.ClearSelection();
dataGridView1.CurrentCell = null;
dataGridView1.FirstDisplayedScrollingRowIndex = 0; 
```

# ruby-on-rails - 在 id 属性中添加序列索引的更好方法

> ID：13051924
> 
> 赞同：0
> 
> 时间：2012-10-24T15:01:45.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3

使用 Rails 3。我正在使用`each_with_index`生成序列：

```
<% @shops.each_with_index do |shop, i| %>
  <div class="item map-marker" id="shop_<%= i+1 %>"> 
```

我尝试使用`div_for`，但它`shop.id`取而代之。有没有更好的方法来做到这一点？

谢谢。

# objective-c - ios中的属性保留

> ID：13051929
> 
> 赞同：0
> 
> 时间：2012-10-24T15:01:57.733
> 
> 标签：objective-c, ios

好的简单的问题，但找不到答案..

我需要将视图控制器传递给类中的方法“saveinfo”，该方法在按下按钮时调用，如何使视图控制器对“saveinfo”方法可见，以便我可以在那里使用它？

好的，我会添加整个班级。基本上我需要在按下按钮时获取文本字段信息。但是我无法在我的 saveinfo 方法中访问 textFields 或 TableControll 变量。

```
@implementation Settings

- (id)init: (TableViewController*) TableControll {
  NSMutableArray *textFields = [[NSMutableArray alloc] initWithCapacity:5];
    UITextField *textField = nil;

    for (int i = 0; i < 3; i++) {
        textField = [[UITextField alloc] initWithFrame:CGRectMake(0.0f, 0.0f+(i*35), 120.0f, 30.0f)];
        textField.backgroundColor = [UIColor whiteColor];
        [textField setBorderStyle:(UITextBorderStyleRoundedRect)];
        [TableControll.view addSubview:textField];

        [textFields addObject:textField];
        [textField release]; textField = nil;
    }
    UITextField *textName = textFields[0];
    textName.placeholder = @"Vardas";

    UITextField *textNo = textFields[1];
    textNo.placeholder = @"Telefonas";
    textNo.keyboardType = UIKeyboardTypeNumberPad;
    UITextField *textPin = textFields[2];
    textPin.keyboardType = UIKeyboardTypeNumberPad;
    textPin.placeholder = @"Pin";

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(150, 20, 160, 30);
    [button setTitle:@"Advanced settings" forState:UIControlStateNormal];
    [TableControll.view addSubview:button];
    UIButton *save = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    save.frame = CGRectMake(150, 60, 160, 30);
    [save setTitle:@"Save settings" forState:UIControlStateNormal];
    [TableControll.view addSubview:save];
    [button addTarget:self action:@selector(goAdvanced)
     forControlEvents:UIControlEventTouchUpInside];
    [save addTarget:self action:@selector(saveInfo)
     forControlEvents:UIControlEventTouchUpInside];

    return self;
}

-(void)goAdvanced {
    AppDelegate *newControll = (AppDelegate*)[UIApplication sharedApplication].delegate;
    [newControll ChangeController];
}

-(void)saveInfo {

    for(int i=0;i<5;i++) {
        UITextField *tempTxtField=[_textFields objectAtIndex:i];
        NSLog(@"do it %@",tempTxtField.text);
    }

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:33:02.820

只需将`NSMutableArray`as ivar 添加到您的课程中：

```
@implementation TableControll {
    NSMutableArray *_textFields;
}

- (id)init: (TableViewController*) tableControll {
    _textFields = [[NSMutableArray alloc] initWithCapacity:5];

    //init the textfields
    //and add it as subview
}

// skipping the rest of the implementation

-(void)saveInfo {
    for(int i=0;i<5;i++) {
        UITextField *tempTxtField=[_textFields objectAtIndex:i];
        NSLog(@"do it %@",tempTxtField.text);
    }                 
}  
@end 
```

你应该检查你是否可以重用或者必须每次都重新`UITextFields`初始化。`NSMutableArray`看来你不使用 ARC，但你不应该写类似`[textField release]; textField = nil;`. 您想释放对象以减少计数器，但不要将其设置为`nil`（dealloc 除外）。

# c++ - Visual C++ 2012 (x86) 中可能的编译器错误？

> ID：13051930
> 
> 赞同：29
> 
> 时间：2012-10-24T15:02:13.253
> 
> 标签：c++, visual-c++, visual-studio-2012, visual-c++-2012, compiler-bug

**我目前在使用VC++ 11 (CTP Update 1)**为 x86 目标编译时遇到随机浮点错误。请参阅下面的简短示例“test.cpp”，并使用以下命令进行编译：

```
cl /GL /O2 /EHsc test.cpp /link /MACHINE:X86 
```

输出应该是`10 == 10`，但它在启用（整个程序优化）`10 == 0`时产生。`/GL`问题似乎是`get_scaling_factor()`将结果推送到浮点堆栈上，但调用函数期望它在 SSE 寄存器*XMM0*中。

**问题**：我是否遗漏了一些明显的东西，或者这真的是一个错误？当然，测试程序没有意义，因为它是一个精简的测试用例。

*测试.cpp：*

```
#include <iostream>

template <typename T>
inline T get_scaling_factor(int units)
{
    switch (units)
    {
    case 0: return 1;  
    case 1: return 10;  
    case 2: return 100;  
    case 3: return 1000;  
    case 4: return 10000;  
    case 5: return 100000;  
    case 6: return 1000000;  
    case 7: return 10000000;  
    case 8: return 100000000;  
    case 9: return 1000000000; 
    default: return 1;
    }
}

template <int targetUnits, typename T>
inline T scale(T value, int sourceUnits)
{
    return value   * get_scaling_factor<T>(sourceUnits) 
                   / get_scaling_factor<T>(targetUnits);
}

__declspec(noinline)
double scale(double value, int units) 
{
    return scale<9>(value, units);
}

int main()
{
    std::cout << "10 = " << scale(1e9, 1) << std::endl;
} 
```

* * *

## 更新

[Microsoft 确认的](https://connect.microsoft.com/VisualStudio/feedback/details/768562/visual-c-11-produces-bad-assembly-code-when-using-whole-program-optimization-for-x86-target#details)问题。它甚至会影响这样的直接代码：

```
#include <stdio.h>
double test(int a)
{
    switch (a)
    {
    case 0: return 1.0;
    case 1: return 10.0;
    case 2: return 100.0;
    case 3: return 1000.0;
    case 4: return 10000.0;
    case 5: return 100000.0;
    case 6: return 1000000.0;
    case 7: return 10000000.0;
    case 8: return 100000000.0;
    case 9: return 1000000000.0;
    default: return 1.0;
    }
}

void main()
{
    int nine = 9;
    double x = test(nine);
    x /= test(7);
    int val = (int)x;
    if (val == 100)
        printf("pass");
    else 
        printf("fail, val is %d", val);
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-24T17:33:05.990

是的，这绝对是一个代码优化器错误，我可以毫无问题地重现它。优化器错误通常与内联相关，但此处并非如此。这个错误是由 VS2012 中支持新的自动矢量化功能的大量代码生成更改引入的。

简而言之，get_scaling_factor() 函数在 FPU 堆栈上返回结果。代码生成器正确地发出指令以从堆栈中检索它并将其存储在 XMM 寄存器中。但是优化器不恰当地完全删除了该代码，就好像它假定函数结果已经存储在 XMM0 中一样。

解决方法很难找到，将模板函数专门用于 double 无效。使用 #pragma optimize 禁用优化：

```
#pragma optimize("", off)
__declspec(noinline)
double scale(double value, int units) 
{
    return scale<9>(value, units);
}
#pragma optimize("", on) 
```

您的复制代码非常好，Microsoft 将毫无困难地修复此错误。您可以在 connect.microsoft.com 提交反馈报告，只需链接到此问题即可。或者，如果您赶时间，那么您可以联系 Microsoft 支持，尽管我想他们会为您提供相同的解决方法，让您持续使用服务包。

* * *

更新：在 VS2013 中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:53:17.047

`/GL`通过设计忽略默认调用约定。使用 LTCG，编译器/链接器知道整个调用图，因此它可以匹配调用者和被调用者。在这种情况下，使用 SSE 寄存器并不奇怪。

不过，我不完全确定“`get_scaling_factor()`将结果推送到浮点堆栈上”是什么意思。您的意思是编译器无法内联它吗？我希望编译器这样做，因为调用图只有一个调用者。（我们知道 `get_scaling_factor(targetUnits) 是内联的，否则会导致除以零）

如果编译器确实无法 inline `get_scaling_factor()`，那么您实际上发现了两个错误：一个内联失败，一个自定义调用约定失败。

# google-maps - 谷歌地图标记设置为可拖动，但不能拖动它

> ID：13051931
> 
> 赞同：4
> 
> 时间：2012-10-24T15:02:16.923
> 
> 标签：google-maps, draggable, google-maps-markers

API v3

我对标记有一个奇怪的问题：

我在地图上放置的标记设置为可拖动，WebInspector 将其报告为可拖动，但我仍然无法拖动它。当我越过标记时，光标不会改变。

底层地图是可拖动的，并且有效。

在另一个页面上，使用不同的设置（更少的层），但相同的 javascript，它按预期工作（所以我可以在那里拖动它）。

我还使标记可单击并将事件绑定到它，并且效果很好。鼠标悬停时光标也会发生变化。

我已经用完了选项.... 为什么我不能拖动它？这可能与某些 zIndex 或图层定位有关吗？据我所见，该地图的 zIndex 比所有其他图层都高....

// 显示地图

```
geocoder.geocode( { 'address':address }, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {

        // map options
        var mapOptions = {
            zoom: 14,
            center: results[0].geometry.location,
            panControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            mapTypeControl: false,
            scaleControl: false,
            streetViewControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            scrollwheel: false
        };

        // render map
        map = new google.maps.Map(J('#'+mapElementId)[0], mapOptions);

        // set marker
        marker = new google.maps.Marker({
            clickable: true,
            draggable: true,
            icon: markerImage,
            shadow: markerShadow,
            shape: markerShape,
            map: map,
            position: results[0].geometry.location
        });

        google.maps.event.addListener(marker, 'click', function () { alert('marker clicked'); });
        google.maps.event.addListener(marker, 'dragend', function () {
            alert('marker dragged')
            map.setCenter(marker.getPosition());
            J('input[name=coordinates]').val(marker.getPosition());
            J('input[name=address]').val('');
        });

        J('input[name=address]').val(results[0].formatted_address);
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:42:10.870

你有`draggable: false,`。

将其更改为`true`

看到它在这里工作：http: [//jsfiddle.net/RASG/vA4eQ/](http://jsfiddle.net/RASG/vA4eQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T08:37:42.870

尝试这个：

```
 map.setOptions({draggable: true}); 
```

# string - 重定向并保留查询字符串 [javascript]

> ID：13051936
> 
> 赞同：1
> 
> 时间：2012-10-24T15:02:25.747
> 
> 标签：string

我想在 JavaScript 中为以下功能创建重定向；

一旦有人登陆了一个网页，就会有一个 JavaScript 将他们暂时引导到一个网页上（他们会在这个网页上停留很短的时间，所以页面可以捕获 cookie/ID），然后再次重定向到不同的网页；

例如：

我登陆 www.bbc.co.uk?ID=1234，然后被定向到另一个网页，该网页带有我的查询字符串 www.google.com?ID=1234，然后我立即被定向到最终网页， www.facebook.com。

可能有 1 个或更多查询字符串需要从 bbc 转移到 google。第三个也是最后一个网页上没有查询字符串。

我想问一下，这可能吗？它必须在 JavaScript 中，我知道在 JS 中指导某人很简单；

到目前为止，我的工作是：

> window.location.href =

我可以通过以下方式获取查询字符串：

> var vars = []，哈希；var q = document.URL.split('?')[1]; if(q != undefined){ q = q.split('&'); for(var i = 0; i < q.length; i++){ hash = q[i].split('='); vars.push(hash[1]); 变量[哈希[0]] =哈希[1]；} }

帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-30T16:37:17.507

您可以通过以下调用获取窗口的查询字符串：window.location.search

[http://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)

# excel - 将文本文件导入 Excel - 每个文件中的行放在同一行的不同列中

> ID：13051941
> 
> 赞同：0
> 
> 时间：2012-10-24T15:02:34.427
> 
> 标签：excel, vba

我在这个网站上找到了这段代码，但我无法根据自己的需要调整它，尽管我认为它必须是一个非常快速的修复。

该代码将一系列文本文件导入到 Excel 中。打开一个文件，该文件的第一行放在 A1 中，第二行放在 A2 中，依此类推。打开新文件时，文本将放置在 A 列中的下一个可用单元格中（所有文件都读入 A 列）。

我想稍微修改一下。我想要 A1 中文件 1 的第一行，B1 中的第二行，依此类推（即文件 1 中的所有行都保留在第 1 行中）。然后，将文件 2 中的行放在第 2 行，将文件 3 放在第 3 行等。

任何帮助将不胜感激！

```
 Sub ReadFilesIntoActiveSheet()
    Dim fso As FileSystemObject
    Dim folder As folder
    Dim file As file
    Dim FileText As TextStream
    Dim TextLine As String
    Dim Items() As String
    Dim i As Long
    Dim cl As Range

    ' Get a FileSystem object
    Set fso = New FileSystemObject

    ' get the directory you want
    Set folder = fso.GetFolder("D:\YourDirectory\")  

    ' set the starting point to write the data to
    Set cl = ActiveSheet.Cells(1, 1)

    ' Loop thru all files in the folder
    For Each file In folder.Files
        ' Open the file
        Set FileText = file.OpenAsTextStream(ForReading)

        ' Read the file one line at a time
        Do While Not FileText.AtEndOfStream
            TextLine = FileText.ReadLine

            ' Parse the line into | delimited pieces
            Items = Split(TextLine, "|")

            ' Put data on one row in active sheet
            For i = 0 To UBound(Items)
                cl.Offset(0, i).Value = Items(i)
            Next

            ' Move to next row
            Set cl = cl.Offset(1, 0)
        Loop

        ' Clean up
        FileText.Close
    Next file

    Set FileText = Nothing
    Set file = Nothing
    Set folder = Nothing
    Set fso = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:13:07.343

我认为将所有对行和列的引用相互替换就足够了。尝试：

1.  替换`cl.Offset(0, i).Value = Items(i)`为`cl.Offset(i, 0).Value = Items(i)`

2.  替换`Set cl = cl.Offset(1, 0)`为`Set cl = cl.Offset(0, 1)`

这行得通吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:16:05.677

是的。挺容易。只需要调整你的列和行的偏移方式，并且在读取时不让它分隔每一行。

请参阅下面的调整代码：

```
Sub ReadFilesIntoActiveSheet()

Dim fso As FileSystemObject
Dim folder As folder, file As file, FileText As TextStream
Dim TextLine As String, Items() As String
Dim i As Long, cl As Range

' Get a FileSystem object
Set fso = New FileSystemObject

' get the directory you want
Set folder = fso.GetFolder("D:\YourDirectory\")

Dim x As Long
x = 1 'to offset rows for each file

' Loop thru all files in the folder
For Each file In folder.Files

    ' set the starting point to write the data to
    Set cl = ActiveSheet.Cells(x, 1)

    ' Open the file
    Set FileText = file.OpenAsTextStream(ForReading)

    Dim i As Long
    i = 0 'to offset columsn for each line
    ' Read the file one line at a time
    Do While Not FileText.AtEndOfStream

        TextLine = FileText.ReadLine 'read line

        cl.Offset(, i).Value = TextLine 'fill cell

        i = i + 1
    Loop

    ' Clean up
    FileText.Close

    x = x + 1

Next file

Set FileText = Nothing
Set file = Nothing
Set folder = Nothing
Set fso = Nothing

End Sub 
```

# sql-server-2008 - Sql Server 2008 在 TempTable 上缺少索引

> ID：13051942
> 
> 赞同：0
> 
> 时间：2012-10-24T15:02:38.593
> 
> 标签：sql-server-2008, query-optimization

我使用以下代码开发了一个存储过程，通过使用 **#tmpRIStatusReport** 作为临时表并将值插入**#tmpRIStatusReport** 并用于多种用途。

当我运行执行计划时，下面的消息说缺少**#tmpRIStatusReport**上的索引。

```
/*
Missing Index Details from ~vs4E6E.sql - databaserver.databasename (developerID (113))
The Query Processor estimates that implementing the following index could improve the query cost by 18.9401%.
*/

/*
USE [tempdb]
GO
CREATE NONCLUSTERED INDEX [<Name of Missing Index, sysname,>]
ON [dbo].[#tmpRIStatusReport__________________________________________________________________________________________________00000000291F] ([SubId])

GO
*/ 
```

请问有人能建议我做什么吗？

# php - 如何在不刷新浏览器的情况下删除 PHP cookie？

> ID：13051943
> 
> 赞同：0
> 
> 时间：2012-10-24T15:02:40.857
> 
> 标签：php, cookies

我想删除一个 cookie，但发现必须刷新浏览器或单击另一个链接才能使 cookie 消失。我在 PHP 中使用了 header(..)。

```
if(isset($_COOKIE['auth_key'])){setcookie("auth_key", "", time() - 3600);}
header("Location: ../login.php"); 
```

当我到达登录页面时，cookie 会输出，但在刷新时它会消失，或者如果我从那里转到另一个链接，它就会消失。

我希望在没有任何用户交互的情况下删除 cookie，并在服务器加载 login.php 之前将其删除。

任何帮助，将不胜感激。

这个答案是：

```
 if(isset($_COOKIE['auth_key'])){setcookie("auth_key", "", 1,'/');} 
```

因为我用斜杠'/'设置了cookie。我用它来删除它，它现在可以工作了。然而，奇怪的是 cookie 在刷新时仍然被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:11:07.667

我找到的正确答案是用“/”设置cookie：

```
if(isset($_COOKIE['auth_key'])) {
    setcookie("auth_key", "", 1, '/');
} 
```

我用它来删除所有 cookie，它现在可以工作了。但是，cookie 仍会在刷新时被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:06:05.937

只需清除 login.php 开头的 cookie（使用此代码）而不是此重定向页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:06:21.440

考虑设置一个超时时间，然后使用 Javascript 向服务器端页面发起 AJAX 请求以删除有问题的 cookie。

# c++ - C++ 动态数组一维非动态

> ID：13051944
> 
> 赞同：2
> 
> 时间：2012-10-24T15:02:44.113
> 
> 标签：c++, arrays, dynamic

自从我用 C++ 编程以来已经有一段时间了，但是我有一个小问题，我正在努力解决。

是否可以制作一个 2 x 2 动态数组，其中 1 维不是动态的？

例如

数组[2][动态]？

制作 array[dynamic][dynamic] 似乎是一种浪费，而我只需要使用第一个 [0][dynamic] 和第二个 [1][dynamic] 值。

我应该使用其他数据结构吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:05:53.740

数组和指针基本上是等价的，所以你可以用一个指针数组来实现：

```
int* array[2];
array[0] = new int[x];
array[1] = new int[y]; 
```

您仍然可以像访问多维数组一样访问它：

```
array[0][x-1] = z; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:27:31.743

这适用于 C++11：

```
std::array<std::vector<MyClass>,2> arr; 
```

或者您可以使用 c 样式的向量数组

```
std::vector<MyClass> arr[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:06:47.003

当然可以，但它必须在第一维中是动态的。

比如像这样

```
typedef int two_int_array[2];

two_int_array* a = new two_int_array[n];
for (int i = 0; i < n; ++i)
{
    a[i][0] = 1;
    a[i][1] = 2;
} 
```

当然，通常更好的方法是使用向量。由于您不能拥有数组向量，因此结构向量可能更适合您的情况。

```
struct two_int_struct
{
    int value[2];
};

std::vector<two_int_struct> a(n);
for (int i = 0; i < n; ++i)
{
    a[i].value[0] = 1;
    a[i].value[1] = 2;
} 
```

# apache - Apache 中的 REST 请求因“客户端被服务器配置拒绝”而失败

> ID：13051945
> 
> 赞同：0
> 
> 时间：2012-10-24T15:02:49.123
> 
> 标签：apache, rest, tomcat

我们最近升级到 Apache 2.x 和 Tomcat 7.x 并看到了这个问题。

我们的启用了 Rest 的 Web 服务部署在 Tomcat 中。

RESTful API 需要与文件系统上的目录结构无关的分层 URI。例如[http://mycomp.com/product/123](http://mycomp.com/product/123)。

所有`GET`请求都工作正常，但是当我们尝试使用`PUT/DELETE/POST`etc 时，客户端被抛出`"403 Forbidden"`错误，Apache error.log 显示：`"client denied by server configuration"`

我已经检查了 httpd.conf 文件，它具有`<Directory>`“全部允许”访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:33:58.773

该问题已通过更新`<LimitExcept GET POST>`元素解决。

# ruby-on-rails - 如何禁用某个列的 ActiveRecord 日志记录？

> ID：13051949
> 
> 赞同：16
> 
> 时间：2012-10-24T15:02:59.430
> 
> 标签：ruby-on-rails, activerecord, logging, upload, blob

我遇到了一个问题，在我看来，这对大多数 Rails 用户来说肯定是个问题，但我还没有找到任何解决方案。

例如，当执行一个可能很大的二进制文件的文件上传并将其存储在数据库中时，您肯定不希望 rails 或 ActiveRecord 在开发模式下记录此特定字段（日志文件，stdout）。如果文件相当大，这会导致查询执行中断并几乎杀死我的终端。

是否有任何可靠且非 hacky 的方法来禁用特定字段的日志记录？请记住，我*不是*在谈论禁用请求参数的日志记录 - 这已经很好地解决了。

感谢您提供有关这方面的任何信息！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-12T15:13:17.020

如果这对任何人都有帮助，这里是上面代码片段的 Rails 4.1 兼容版本，它还包括对非二进制绑定参数（例如文本或 json 列）的编辑，并在编辑之前将日志记录增加到 100 个字符。在此感谢大家的帮助！

```
class ActiveRecord::ConnectionAdapters::AbstractAdapter
  protected

  def log_with_binary_truncate(sql, name="SQL", binds=[], statement_name = nil, &block)
    binds = binds.map do |col, data|
      if data.is_a?(String) && data.size > 100
        data = "#{data[0,10]} [REDACTED #{data.size - 20} bytes] #{data[-10,10]}"
      end
      [col, data]
    end

    sql = sql.gsub(/(?<='\\x[0-9a-f]{100})[0-9a-f]{100,}?(?=[0-9a-f]{100}')/) do |match|
      "[REDACTED #{match.size} chars]"
    end

    log_without_binary_truncate(sql, name, binds, statement_name, &block)
  end

  alias_method_chain :log, :binary_truncate
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T11:57:31.317

Create a file in config/initializers whitch modifies `ActiveRecord::ConnectionAdapters::AbstractAdapter` like so:

```
class ActiveRecord::ConnectionAdapters::AbstractAdapter
   protected

   def log_with_trunkate(sql, name="SQL", binds=[], &block)
     b = binds.map {|k,v|
       v = v.truncate(20) if v.is_a? String and v.size > 20
       [k,v]
     }
     log_without_trunkate(sql, name, b, &block)
   end

   alias_method_chain :log, :trunkate
end 
```

This will trunkate all fields that are longer than 20 chars in the output log.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T18:33:26.353

**注意：**适用于 rails 3，但显然不是 4（回答此问题时未发布）

在您的 application.rb 文件中：

```
config.filter_parameters << :parameter_name 
```

这将从您的日志中删除该属性，将其替换`[FILTERED]` 为过滤参数的常见用例当然是密码，但我认为它没有理由不适用于您的二进制文件字段。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-25T21:45:13.233

这是@Patrik 建议的方法的实现，适用于针对 PostgreSQL 的插入和更新。正则表达式可能需要根据其他数据库的 SQL 格式进行调整。

```
class ActiveRecord::ConnectionAdapters::AbstractAdapter
   protected

   def log_with_binary_truncate(sql, name="SQL", binds=[], &block)
    binds = binds.map do |col, data|
      if col.type == :binary && data.is_a?(String) && data.size > 27
        data = "#{data[0,10]}[REDACTED #{data.size - 20} bytes]#{data[-10,10]}"
      end
      [col, data]
    end

    sql = sql.gsub(/(?<='\\x[0-9a-f]{20})[0-9a-f]{20,}?(?=[0-9a-f]{20}')/) do |match|
      "[REDACTED #{match.size} chars]"
    end

    log_without_binary_truncate(sql, name, binds, &block)
   end

   alias_method_chain :log, :binary_truncate
end 
```

我对此并不满意，但现在已经足够了。它保留二进制字符串的第一个和最后 10 个字节，并指示从中间删除了多少字节/字符。除非编辑的文本比替换的文本长，否则它不会编辑（即，如果没有至少 20 个字符要删除，那么“[REDACTED xx chars]”将比替换的文本长，所以没有意义） . 我没有进行性能测试来确定对编辑块使用贪婪或懒惰重复是否更快。我的本能是懒惰，所以我做了，但贪婪可能会更快，特别是如果 SQL 中只有一个二进制字段。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-05T10:18:20.377

在 rails 5 你可以把它放在初始化程序中：

```
module SqlLogFilter

  FILTERS = Set.new(%w(geo_data value timeline))
  def render_bind(attribute)
    return [attribute.name, '<filtered>'] if FILTERS.include?(attribute.name)
    super
  end

end
ActiveRecord::LogSubscriber.prepend SqlLogFilter 
```

对于过滤器属性`geo_data`，例如。`value``timeline`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-06T19:12:49.507

这是一个 Rails 5 版本。开箱即用的 Rails 5 会截断二进制数据，但不会截断长文本列。

```
module LogTruncater
  def render_bind(attribute)
    num_chars = Integer(ENV['ACTIVERECORD_SQL_LOG_MAX_VALUE']) rescue 120
    half_num_chars = num_chars / 2
    value = if attribute.type.binary? && attribute.value
      if attribute.value.is_a?(Hash)
        "<#{attribute.value_for_database.to_s.bytesize} bytes of binary data>"
      else
        "<#{attribute.value.bytesize} bytes of binary data>"
      end
    else
      attribute.value_for_database
    end

    if value.is_a?(String) && value.size > num_chars
      value = "#{value[0,half_num_chars]} [REDACTED #{value.size - num_chars} chars] #{value[-half_num_chars,half_num_chars]}"
    end

    [attribute.name, value]
  end

end

class ActiveRecord::LogSubscriber
  prepend LogTruncater
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T06:48:24.823

我遇到了同样的问题，但我无法找到一个干净的解决方案。我最终为 Rails 记录器编写[了一个自定义格式化程序](https://github.com/concerto/concerto/blob/c275113b7d3254688f92ee2268377e17d21f30ea/config/initializers/15-scrubbing_logger.rb)，用于过滤掉 blob。

上面的代码需要放在 config/initializers 中，并将`file_dat`a 替换为要删除`file_name`的列和正则表达式中出现的列。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-24T15:19:56.073

我也没有找到太多关于此的内容，尽管您可以做的一件事是

```
ActiveRecord::Base.logger = nil 
```

完全禁用日志记录，尽管您可能不想这样做。更好的解决方案可能是将 ActiveRecord 记录器设置为一些自定义子类，该子类不会记录超过一定大小的消息，或者做一些更聪明的事情来解析太大的消息的特定部分。

这似乎并不理想，但它似乎是一个可行的解决方案，尽管我没有查看具体的实现细节。我真的很想听到任何更好的解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-29T22:45:37.420

这对我来说适用于 Rails 6：

```
# initializers/scrub_logs.rb

module ActiveSupport
  module TaggedLogging
    module Formatter # :nodoc:
      # Hide PlaygroundTemplate#yaml column from SQL queries because it's huge.
      def scrub_yaml_source(input)
        input.gsub(/\["yaml", ".*, \["/, '["yaml", "REDACTED"], ["')
      end

      alias orig_call call

      def call(severity, timestamp, progname, msg)
        orig_call(severity, timestamp, progname, scrub_yaml_source(msg))
      end
    end
  end
end 
```

替换`yaml`为您的列的名称。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-17T22:24:58.133

Rails 5.2+ 版本

```
module LogTruncater
  def render_bind(attr, value)
    num_chars = Integer(ENV['ACTIVERECORD_SQL_LOG_MAX_VALUE']) rescue 120
    half_num_chars = num_chars / 2

    if attr.is_a?(Array)
      attr = attr.first
    elsif attr.type.binary? && attr.value
      value = "<#{attr.value_for_database.to_s.bytesize} bytes of binary data>"
    end

    if value.is_a?(String) && value.size > num_chars
      value = "#{value[0,half_num_chars]} [REDACTED #{value.size - num_chars} chars] #{value[-half_num_chars,half_num_chars]}"
    end

    [attr && attr.name, value]
  end

end

class ActiveRecord::LogSubscriber
  prepend LogTruncater
end 
```

# jquery - 使用 jQuery 和 CSS 缩放/裁剪图像

> ID：13051950
> 
> 赞同：2
> 
> 时间：2012-10-24T15:03:01.463
> 
> 标签：jquery, html, css

我有一个有趣的问题，我还没有找到合适的解决方案。您可以在此处查看小提琴：http: [//jsfiddle.net/DgN8C/3/](http://jsfiddle.net/DgN8C/3/)。基本上，我有一个特定大小的图像。该图像需要按比例缩小，以便用户选择的中心点（由视觉上的红点和 data-center-* 属性表示[这些是基于图像宽度/高度的百分比]）位于包含 div 的中间（ x,y 在示例中为 50,50）。因此，在理想世界中，给定下图：

```
<img src="image-source" data-center-x="59.125" data-center-y="37.4296" /> 
```

在 100 x 100 div 内的理想定位是高度为 138 像素，左边距为 -72 像素。这将确保图像中心的红点（再次参见小提琴）与包含 div 的中心对齐。

任何能让我朝着正确方向前进的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T23:10:27.500

我想我明白了。您可能需要检查图像是否按比例缩放。[http://jsfiddle.net/DgN8C/7/](http://jsfiddle.net/DgN8C/7/)

基本上，我缩放，然后设置边距。限制因素，或告诉我们是否需要缩放图像的因素，将是两侧中较小的一个。因此，如果点在 80% 处，我们需要点和右侧 ( `image_width * 20%`) 之间的像素宽度才能适合我们封闭的 div 对象 ( `obj_width / 2`)。注意 if 语句。

因此，如果我们的图像不适合对象，我们需要将其放大。不知何故，我做到了。想想就心疼。

```
// First, we need to scale image so that it will fit within the dimensions 
// of the object. The limiting factor is shorter side of the pixel
limit = Math.min(center_x, 100-center_x) / 100.0;

// Check if image needs to be scaled
if ((obj_width/2) > (limit*img.width())) {
    // Image must be scaled
    chunk = limit * 2; // Section we need from image
    // image_width * chunk = obj_width
    img.width( Math.ceil( obj_width / chunk ) );
} 
```

然后我对身高做同样的事情。看起来 jQuery`width()`和`height()`函数让一切都按比例缩放。可能需要进一步测试。

然后我改变边距。

```
img.css('margin-left', -1 * (((center_x/100.0)*img.width()) - (obj_width/2)));
img.css('margin-top', -1 * (((center_y/100.0)*img.height()) - (obj_height/2))); 
```

**编辑**好的，第一次尝试没有保留纵横比。现在应该修好了。[http://jsfiddle.net/DgN8C/9/](http://jsfiddle.net/DgN8C/9/)逻辑与下面基本相同，只是我智能选择了宽度或高度进行缩放。仅设置一个将保留纵横比。

**编辑**一个。[http://jsfiddle.net/DgN8C/13/](http://jsfiddle.net/DgN8C/13/)这会放大和缩小以适应包含的`div`对象。以前的解决方案只是在必要时扩大规模。

* * *

这是一篇很有帮助的帖子：[jQuery resize to aspect ratio](https://stackoverflow.com/questions/1682495/jquery-resize-to-aspect-ratio)

# asp.net - 在另一个控件中找到单选按钮后如何定义单选按钮 CheckedChanged 属性

> ID：13051951
> 
> 赞同：1
> 
> 时间：2012-10-24T15:03:02.307
> 
> 标签：asp.net

我想知道当网格视图中有单选按钮并且此网格视图本身位于 1 个用户控件内且用户控件位于详细视图控件内时，我必须如何使用单选按钮 CheckedChanged 属性。

在我了解如何在另一个控件中找到单选按钮控件之前。但是在发现我不知道如何为此创建 CheckedChanged 属性之后？

```
protected void btnShowAddTransmittaltoCon_Click(object sender, EventArgs e)
{
    Transmittallistfortest transmittalList = (Transmittallistfortest)DetailsView1.FindControl("Transmittallistfortest1");
    GridView g3 = transmittalList.FindControl("GridViewTtransmittals") as GridView;
    foreach (GridViewRow di in g3.Rows)

    {

        RadioButton rad = (RadioButton)di.FindControl("RadioButton1");
        //Giving Error:Object reference not set to an instance of an object.
        if (rad != null && rad.Checked)
        {
            var w = di.RowIndex;

            Label1.Text = di.Cells[1].Text;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:20:04.300

替换这个

```
RadioButton rad = (RadioButton)di.FindControl("RadioButton1"); 
```

有了这个：

```
RadioButton rad = di.FindControl("RadioButton1") as RadioButton; 
```

您不会得到异常，但它可能会返回`NULL`- 在这种情况下，它将被捕获在`if`语句中：`rad != null`.

使用`as`关键字的重点是：

> as => 不会抛出异常 - 它只是报告 null。

* * *

顺便说一句：你应该这样检索`RadioButton`：

```
if(di.RowType == DataControlRowType.DataRow)
{
    RadioButton rad = di.FindControl("RadioButton1") as RadioButton;
} 
```

要定义`CheckedChange`事件，请执行以下操作：

```
//rad.Checked = true;

rad.CheckedChanged += new EventHandler(MyCheckedChangeEventHandler); 
```

然后定义处理程序：

```
protected void MyCheckedChangeEventHandler)(object sender, EventArgs e)
{
    RadioButton rb = (RadioButton)sender;

    if (rb.Checked)
    {
        // Your logic here...
    }
} 
```

# java - 在 .jar Java 中从当前目录搜索文件

> ID：13051952
> 
> 赞同：1
> 
> 时间：2012-10-24T15:03:10.273
> 
> 标签：java, file

我想知道如何在系统上搜索文件，但文件将与 .jar 放在同一目录中。例子：

MySearchProgram.jar（可执行文件） MyFile.txt

两个文件（MySearchProgram.jar，MyFile.txt）都将放在同一目录中：/home/jfabian/Documents 我需要读取该文件，为此我需要找到它并指定 MyFile.txt 目录，问题是我想从 .jar 可执行文件中做到这一点。

我知道如何使用 Oracle 提供的算法查找文件并指定根目录：[Find.java][1]

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:08:25.547

要确定 JAR 文件所在的目录，请使用

```
Test.class.getProtectionDomain().getCodeSource().getLocation().toURI().getPath() 
```

在从 JAR 文件加载的任何类上（`Test`在上面的示例中）。

# android - 如何在android中为警报对话框设置自定义字体？

> ID：13051956
> 
> 赞同：36
> 
> 时间：2012-10-24T15:03:23.787
> 
> 标签：android, android-layout

在我的 android 应用程序中，单击按钮后会出现一个警报对话框。我想为警报设置*自定义字体。*我在网上搜索并找到了一些关于这个主题的教程和问题，但它们都不适合我。

如何更改字体？

谢谢

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-24T15:08:32.747

为此，您使用警报构建器来构建警报。然后，您从此警报中获取 TextView，然后设置警报的字体。

```
AlertDialog dialog = new AlertDialog.Builder(this).setMessage("Hello world").show();
TextView textView = (TextView) dialog.findViewById(android.R.id.message);
Typeface face=Typeface.createFromAsset(getAssets(),"fonts/FONT"); 
textView.setTypeface(face); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-04-21T07:38:19.143

以上答案对我不起作用。

我使用了以下方法

```
// Initializing the alertDialog
AlertDialog alertDialog = new AlertDialog.Builder(QuizActivity.this).create();
alertDialog.setTitle("Warning");
alertDialog.setMessage("Are you sure you want to exit?");
alertDialog.show(); // This should be called before looking up for elements

// Getting the view elements
TextView textView = (TextView) alertDialog.getWindow().findViewById(android.R.id.message);
TextView alertTitle = (TextView) alertDialog.getWindow().findViewById(R.id.alertTitle);
Button button1 = (Button) alertDialog.getWindow().findViewById(android.R.id.button1);
Button button2 = (Button) alertDialog.getWindow().findViewById(android.R.id.button2);

// Setting font
textView.setTypeface(FontHelper.getFont(Fonts.MULI_REGULAR));
alertTitle.setTypeface(FontHelper.getFont(Fonts.MULI_REGULAR));
button1.setTypeface(FontHelper.getFont(Fonts.MULI_BOLD));
button2.setTypeface(FontHelper.getFont(Fonts.MULI_BOLD)); 
```

在 7.1.1 上测试

注意：确保在显示`dialog`. 没有这个你会得到`NullPointerException`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-04-30T15:09:49.800

我知道这是一个老问题，但我把这个留给那些仍在寻找解决方案的人。

如果您只想更改文本格式，则只需覆盖`alertDialogTheme`属性即可更改`AlertDialog`.

**例如，使用应用程序主题**：

```
<style name="MyTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>

    <!-- This will override the Alert Dialog theme -->
    <item name="alertDialogTheme">@style/MyAlertDialogTheme</item>
</style>

<style name="MyAlertDialogTheme" parent="@android:style/Theme.Material.Light.Dialog.Alert">
    <item name="android:textAppearanceSmall">@style/MyTextAppearanceSmall</item>
    <item name="android:textAppearanceMedium">@style/MyTextAppearanceMedium</item>
    <item name="android:textAppearanceLarge">@style/MyTextAppearanceLarge</item>
</style>

<style name="MyTextAppearance" parent="TextAppearance.AppCompat">
    <item name="android:fontFamily">@font/comic_sans</item>
</style>
(...) 
```

如果我没记错`android:textAppearanceSmall`的话 用于消息和`android:textAppearanceMedium`标题。但是你可以选择你想要的任何东西并删除其余的。

**另外一个选项**

在不覆盖`alertDialogTheme`, 的情况下，通过构建器构造函数设置样式。例子：`AlertDialog.Builder(getActivity(), R.style.MyAlertDialogTheme)`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-04-21T07:20:15.167

如果您正在使用`Material Components`，您可以通过清除样式来自定义您的对话框以满足几乎所有需求。例如，我为对话框创建的自定义样式：

```
 <style name="ThemeOverlay.App.MaterialAlertDialog" parent="ThemeOverlay.MaterialComponents.MaterialAlertDialog">
        <item name="materialAlertDialogTitleTextStyle"><!--here goes your title text style --></item>
        <item name="materialAlertDialogBodyTextStyle"><!--here goes your message text style --></item>
        <item name="colorPrimary"><!--here goes your dialog primary color. e.g. button text color, etc.--></item>
        <item name="shapeAppearanceOverlay">@style/ShapeAppearance.App.SmallComponent</item> <!-- your custom shape appearance for your dialog. In my case, I am changing corner radius of dialog to rounded 20dp corners-->
        <item name="colorSurface">@color/white</item>
        <item name="buttonBarPositiveButtonStyle">@style/Widget.App.Button</item> <!-- your custom positive button style-->
        <item name="buttonBarNegativeButtonStyle">@style/Widget.App.Button</item> <!-- your custom negtive button style-->
    </style>

    <style name="ShapeAppearance.App.SmallComponent" parent="ShapeAppearance.MaterialComponents.SmallComponent">
        <item name="cornerFamily">rounded</item>
        <item name="cornerSize">20dp</item>
    </style>

    <style name="Widget.App.Button" parent="Widget.MaterialComponents.Button.TextButton.Dialog">
        <item name="shapeAppearance">@style/ShapeAppearance.App.SmallComponent</item>
        <item name="android:textAppearance">@style/Roboto.Bold.Small</item>
        <item name="android:textColor">@color/colorAccent</item>
        <item name="android:textAllCaps">true</item>
    </style> 
```

最后，在创建对话框时，不要忘记设置此样式：

```
 MaterialAlertDialogBuilder(this, R.style.ThemeOverlay_App_MaterialAlertDialog)
            .setMessage("your message")
            .show() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-24T15:09:19.347

您可以定义自己想要显示的对话框的布局。

这是一个链接

[在 Android 中创建自定义对话框](https://stackoverflow.com/questions/3399667/creating-a-custom-dialog-in-android)

在您的布局中，您可以使用所需的 typeFace 定义 TextViews。您需要下载所需字体的 otf 文件。将它们放在您的资产目录中。并将其设置为 TextView 的 TypeFace。以及如何设置字体

这可能会有所帮助

[如何更改 TextView 上的字体？](https://stackoverflow.com/questions/2888508/how-to-change-the-font-on-the-textview)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-01T05:59:59.670

自定义警报对话框标题文本视图

```
 TextView tv_message = new TextView(this);

            Typeface typeface = Typeface.createFromAsset(
                    getAssets(),
                    "fonts/OpenSans-Semibold.ttf"
            );

            // Set the text view layout parameters
            tv_message.setLayoutParams(
                    new 
      ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, 
      ViewGroup.LayoutParams.WRAP_CONTENT)
            );

            // Set message text color
            tv_message.setTextColor(Color.RED);

            // Set message gravity/text align
            tv_message.setGravity(Gravity.START);

            // Set message text size
            tv_message.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);

            // Set message custom font
            tv_message.setTypeface(typeface);

            // Set message background color
            tv_message.setBackgroundColor(Color.YELLOW);

            // Set message text padding
            tv_message.setPadding(15, 25, 15, 15);

            tv_message.setText("Are you sure?");
            tv_message.setTextColor(Color.BLACK); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-09T21:40:26.233

您可以使用 SpannableString，在其上设置字体并将其返回给 AlertDialog.Builder

这是一个辅助函数，它向 CharSequence 添加字体并返回 SpannableString -

```
private static SpannableString typeface(Typeface typeface, CharSequence chars) {
    if (chars == null) {
        return null;
    }
    SpannableString s = new SpannableString(chars);
    s.setSpan(new TypefaceSpan(typeface), 0, s.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    return s;
} 
```

在文本上设置 TypeFace 的类 -

```
public class TypefaceSpan extends MetricAffectingSpan {

    private final Typeface typeface;

    public TypefaceSpan(Typeface typeface) {
        this.typeface = typeface;
    }

    @Override
    public void updateDrawState(TextPaint tp) {
        tp.setTypeface(typeface);
        tp.setFlags(tp.getFlags() | Paint.SUBPIXEL_TEXT_FLAG);
    }

    @Override
    public void updateMeasureState(TextPaint p) {
        p.setTypeface(typeface);
        p.setFlags(p.getFlags() | Paint.SUBPIXEL_TEXT_FLAG);
    }
} 
```

在创建对话框时，您可以像这样用 SpannableString 替换字符串 -

```
public static Dialog createDialog(Context c, String title, String message, String pButton, String nButton, AlertCallback callback) {

    AlertDialog.Builder builder = new AlertDialog.Builder(c);

    builder.setMessage(typeface(Fonts.Regular, message));
    builder.setTitle(typeface(Fonts.Bold, title));
    builder.setPositiveButton(typeface(Fonts.Bold, pButton),callback::onPositiveButtonClick);
    builder.setNegativeButton(typeface(Fonts.Bold, nButton),callback::onNegativeButtonClick);

    AlertDialog dialog = builder.create();
    return builder.create();
} 
```

我建议将字体加载到缓存中，而不是多次调用 createFromAsset。希望这可以帮助！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-17T09:24:59.740

我有一个包含项目列表的警报对话框，所以我必须结合几个答案并稍微简化它，这是警报对话框本身的代码：

```
val dialog = AlertDialog.Builder(this, R.style.MyAlertDialogTheme).setTitle(R.string.sort_by)
   .setSingleChoiceItems(modelList, selectedSortPosition) { _, position -> selectedSortPosition = position }
   .setPositiveButton(R.string.ok) { _, _ ->  }
   .setNegativeButton(R.string.cancel) { _, _ -> }.create()
dialog.show()
setFontsForDialog(dialog) 
```

在这里，我使用了 Danilo 回答中的样式，但为此添加了设置主题颜色：

```
 <style name="MyAlertDialogTheme" parent="Theme.MaterialComponents.DayNight.Dialog.Alert">
      <item name="colorPrimary">@color/colorPrimary</item>
      <item name="colorAccent">@color/colorAccent</item>
      <item name="android:textAppearanceSmall">@style/MyTextAppearanceSmall</item>
      <item name="android:textAppearanceMedium">@style/MyTextAppearanceMedium</item>
      <item name="android:textAppearanceLarge">@style/MyTextAppearanceLarge</item>
   </style> 
```

并且由于它只更改列表项的字体，因此我添加了此方法，并且由于我将在应用程序中多次使用它，因此我为活动本身创建了一个扩展方法：

```
private fun Activity.setFontsForDialog(dialog: AlertDialog) {
    val font = ResourcesCompat.getFont(this, R.font.theme_bold_pn)
    dialog.findViewById<TextView>(android.R.id.message)?.typeface = font
    dialog.findViewById<TextView>(android.R.id.button1)?.typeface = font
    dialog.findViewById<TextView>(android.R.id.button2)?.typeface = font
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-27T12:52:24.333

为此，我为 AlertDialog 创建了一个扩展方法 -
（从 androidx.appcompat:appcompat:1.1.0 开始有效）

```
fun AlertDialog.setTypefaceInDialog(context: Context) {

    val regularFont = ResourcesCompat.getFont(context, R.font.regular_font)
    val boldFont = ResourcesCompat.getFont(context, R.font.medium_font)

    findViewById<TextView>(androidx.appcompat.R.id.alertTitle)?.typeface = boldFont
    findViewById<TextView>(android.R.id.message)?.typeface = regularFont
    getButton(AlertDialog.BUTTON_POSITIVE).typeface = boldFont
    getButton(AlertDialog.BUTTON_NEGATIVE).typeface = boldFont
} 
```

# multithreading - Perl 并行 HTTP 请求 - 内存不足

> ID：13051958
> 
> 赞同：3
> 
> 时间：2012-10-24T15:03:29.827
> 
> 标签：multithreading, perl

首先，我是 Perl 的新手。我想在 Perl 的 REST API 上发出多个（例如 160 个）HTTP GET 请求。一个接一个地执行它们需要很长时间，所以我正在考虑并行运行这些请求。因此，我使用线程同时执行更多请求，并将并行请求的数量限制为 10。这在我第一次运行程序时工作得很好，第二次在第 40 个请求之后运行“内存不足”。

这是代码：（@urls 包含请求的 160 个 URL）

```
while(@urls) {
  my @threads;
  for (my $j = 0; $j < 10 and @urls; $j++) {
    my $url = shift(@urls);
    push @threads, async { $ua->get($url) };
  }

  for my $thread (@threads) {
  my $response = $thread->join;
  print "$response\n"; 
 }
} 
```

所以我的问题是，为什么我第一次没有用完内存，但第二次没有（我的代码中是否遗漏了一些重要的东西）？我能做些什么来防止它？还是有更好的方法来执行并行 GET 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:28:43.830

我不确定为什么在第一次运行时没有得到 OOM 错误，而在第二次运行时会出现 OOM 错误；当您运行 Perl 脚本并且 perl 二进制文件退出时，它会将所有内存释放回操作系统。两次执行之间没有任何保留。REST 服务每次返回的数据是否完全相同？也许你第二次跑步时会有更多的数据，它把你推到了边缘。

我注意到的一个问题是您要启动 10 个线程并将它们运行到完成，然后再生成 10 个线程。更好的解决方案可能是工作线程模型。在程序开始时生成 10 个线程（或任意数量），将 URL 放入队列中，并允许线程自己处理队列。这是一个可能有帮助的简单示例：

```
use strict;
use warnings;
use threads;
use Thread::Queue;

my $q = Thread::Queue->new();

my @thr = map {
    threads->create(sub {
        my @responses = ();
        while (defined (my $url = $q->dequeue())) {
            push @responses, $ua->get($url);
        }
        return @responses;
    });
} 1..10;

$q->enqueue($_) for @urls;
$q->enqueue(undef) for 1..10;

foreach (@thr) {
    my @responses_of_this_thread = $_->join();
    print for @responses_of_this_thread;
} 
```

请注意，我没有对此进行测试以确保它有效。在此示例中，您创建了一个新线程队列并产生了 10 个工作线程。每个线程都会阻塞 dequeue 方法，直到有东西要读取。接下来，您将拥有的所有 URL 排队，并`undef`为每个线程排队。`undef`当没有更多工作要执行时，这将允许线程退出。此时，线程将通过并处理工作，最后您将通过连接收集响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:32:32.803

每当我需要 Perl 的异步解决方案时，我首先看一下[POE](http://search.cpan.org/~rcaputo/POE-1.354/lib/POE.pm)框架。在这种特殊情况下，我使用了[POE HTTP 请求模块](http://search.cpan.org/~rcaputo/POE-Component-Client-HTTP-0.947/lib/POE/Component/Client/HTTP.pm)，它允许我们同时发送多个请求并提供一个回调机制，您可以在其中处理您的 http 响应。

Perl 线程很可怕，可能会使您的应用程序崩溃，尤其是当您加入或分离它们时。如果响应不需要很长时间来处理，单线程 POE 解决方案就可以很好地工作。

但有时，我们不得不依赖线程，因为应用程序由于长时间运行的任务而被阻塞。在这些情况下，我会在应用程序中启动任何内容之前创建一定数量的线程。然后使用 Thread::Queue 我将数据从主线程传递给这些工作人员，并且从不加入/分离它们；出于稳定目的，请始终将它们放在身边。（不是每种情况的理想解决方案。）

POE 现在支持线程，每个线程都可以运行一个 POE::Kernel。内核可以通过 TCP 套接字相互通信（POE 提供了很好的解锁接口）。

# javascript - Simperium JS登录失败

> ID：13051959
> 
> 赞同：1
> 
> 时间：2012-10-24T15:03:36.347
> 
> 标签：javascript, login, simperium

我是 Simperium 的新手并使用 Javascript API。

我确实使用授权获得了访问令牌，但随后在创建新的 Simperium(...) 时出现“身份验证”错误，因此我尝试获取新令牌，但失败了，返回错误代码 400 或 401。

这是我的代码，其中 KEY 是 api 密钥，ID 是应用程序 ID，USER 和 PASS 是我的用户名和密码......

授权：

```
var url,request,response,json,token,auth;
url="https://auth.simperium.com/1/"+appID+"/authorize/";
request=new XMLHttpRequest();
request.onreadystatechange=function() {
    if(request.readyState===4) {
        if(request.status===200) {
            response=request.responseText;
            console.log('response: '+response);
            if(response.length>0) {
                json=JSON.parse(response);
                token=json.access_token;
                ...
            }
        }
        else {
            console.log('ERROR');
            return null;
        }
    }
};
request.open("POST",url,true);
request.setRequestHeader("X-Simperium-API-Key",'"'+KEY+'"');
request.setRequestHeader("Content-type", "application/json");
auth='{"username": "'+USER+'", "password": "'+PASS+'"}';
request.send(auth); 
```

400 或 401 失败！

当我有一个 ACCESS_TOKEN 时：

```
var options="{token: '"+ACCESS_TOKEN+"'}";
var simperium=new Simperium(ID,options);
var bucket=simperium.bucket('ledger');
bucket.on('notify',function(id,data) {
    console.log("transaction updated: "+data);
    ...
});
bucket.on("error", function(error) {
    console.log("Simperium error : "+error);
    if (error == "auth") {
        console.log("auth error, need to reauthenticate and get new access token")
        ...
    }
});
bucket.start(); 
```

这导致了“auth”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:52:51.067

有几件事，为了在 API 密钥上设置请求标头，您不需要在 api 密钥周围加上额外的引号，除非您从模板中呈现它。如果您的密钥是 abcdefg，它应该如下所示：

```
request.setRequestHeader("X-Simperium-API-Key","abcdefg"); 
```

获得访问令牌后，在设置选项对象时，您应该传递一个对象而不是字符串：

```
var options={token: "ACCESS_TOKEN"}; 
```

# iphone - 如何在不检查操作系统版本的情况下检测 iOS 上的 YouTube 应用（或缺少应用）？

> ID：13051960
> 
> 赞同：3
> 
> 时间：2012-10-24T15:03:38.293
> 
> 标签：iphone, objective-c, ios, youtube, ios6

在我写这篇文章时，最新版本的 iOS（iOS 6）不再有专门的 YouTube 应用。我们在我们的应用程序中嵌入了不再起作用的视频链接。这是因为嵌入视频的 URL 已更改。

我们希望保留我们现在对 iOS 5 的行为，并为 iOS 6 使用新的 URL 格式（并且可能更大）。

现在，我们可以嗅探操作系统版本并继续这样做，但 Apple 建议我们不要这样做；相反，我们应该嗅探各种特征。

由于 YouTube 应用基于 URL Scheme，我们可以`canOpenURL:`使用`UIApplication`.

是否有用于启动 YouTube 应用程序的已知 URL 方案，该方案在 iOS 6 上不可用，但在 iOS 5 上可用？

这将是最优雅的解决方案。如果这不存在，我们将嗅探操作系统版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:11:21.540

[Apple 确实在他们的开发者文档](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/YouTubeLinks.html)中描述了他们（iOS6 之前）应用程序的 URL 方案。由于这不是一个真正的方案（它是基于 HTTP 的），因此它无法使用`canOpenURL:`，您需要检查操作系统版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T16:13:02.487

[YouTube：以http://www.youtube.com](http://www.youtube.com)开头的 URL会自动打开“YouTube”应用程序：

```
NSString *stringURL = @"http://www.youtube.com/watch?v=WZH30T99MaM";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

**来源：** [http ://wiki.akosma.com/IPhone_URL_Schemes#YouTube](http://wiki.akosma.com/IPhone_URL_Schemes#YouTube)

# linux - 在 Node.JS 中引用相对于应用程序根目录的文件的正确方法

> ID：13051961
> 
> 赞同：40
> 
> 时间：2012-10-24T15:03:39.997
> 
> 标签：linux, node.js

我有一个在 AWS EC2 上的 Linux 上运行的 Node.JS 应用程序，它使用 fs 模块读取 HTML 模板文件。这是应用程序的当前结构：

```
/server.js
/templates/my-template.html
/services/template-reading-service.js 
```

HTML 模板将始终位于该位置，但是，模板读取服务可能会移动到不同的位置（更深的子目录等）。从模板读取服务中，我使用 fs.readFileSync() 加载文件，像这样：

```
var templateContent = fs.readFileSync('./templates/my-template.html', 'utf8'); 
```

这会引发以下错误：

```
Error: ENOENT, no such file or directory './templates/my-template.html' 
```

我假设这是因为路径“./”解析到“/services/”目录而不是应用程序根目录。我也尝试将路径更改为“../templates/my-template.html”并且有效，但它似乎很脆弱，因为我想这只是相对于“向上一个目录”进行解析。如果我将模板阅读服务移动到更深的子目录，则该路径将中断。

那么，相对于应用程序的根目录引用文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-24T15:06:43.530

尝试

```
var templateContent = fs.readFileSync(path.join(__dirname, '../templates') + '/my-template.html', 'utf8'); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-25T00:53:27.730

要获取运行节点进程的目录的绝对文件系统路径，可以使用`process.cwd()`. 因此，*假设*您将**/server.js作为将****/services/template-reading-service.js**实现为模块的进程运行，那么您可以从**/service/template-reading-service.js**执行以下操作：

```
var appRoot = process.cwd(),
    templateContent = fs.readFileSync(appRoot + '/templates/my-template.html', 'utf8'); 
```

如果这不起作用，那么您可能**会将 /service/template-reading-service.js**作为一个单独的进程运行，在这种情况下，您需要让该进程的任何启动都将其传递给您想要视为*主要*应用程序的路径根。例如，如果 /server.js 将**/service/template-reading-service.js**作为一个单独的进程启动，那么**/server.js**应该将它自己的 process.cwd() 传递给它。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-05-28T10:52:26.957

接受的答案是错误的。硬编码`path.join(__dirname, '../templates')`将完全做不想要的事情，`service-XXX.js`如果文件移动到子位置（如给定示例`services/template`），则使文件破坏主应用程序。

Using`process.cwd()`将返回启动运行进程的文件的根路径（因此，例如 a`/Myuser/myproject/server.js`返回`/Myuser/myproject/`）。

这是问题[从正在运行的 node.js 应用程序确定项目根目录](https://stackoverflow.com/questions/10265798/determine-project-root-from-a-running-node-js-application)的副本。

在那个问题上，`__dirname`答案得到了应有的鞭打。当心绿色标记，路人。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-03-24T20:01:31.940

对于 ES 模块，`__dirname`不可用，因此请阅读[此答案](https://stackoverflow.com/a/50053801/10190810)并使用：

```
import { resolve, dirname, join } from 'path'
import { fileURLToPath } from 'url'
import fs from 'fs'

const relativePath = a => join(dirname(fileURLToPath(import.meta.url)), a)

const pathToFileInSameDirectory   = relativePath('./file.xyz')
const pathToFileInParentDirectory = relativePath('../file.xyz')

const content1 = fs.readFileSync(pathToFileInSameDirectory,   'utf8')
const content2 = fs.readFileSync(pathToFileInParentDirectory, 'utf8') 
```

# java - 在另一个类中使用一个类的变量

> ID：13051964
> 
> 赞同：-1
> 
> 时间：2012-10-24T15:03:48.913
> 
> 标签：java, android

我正在用 android 制作一个应用程序，我正在使用谷歌地图。

我有一个导航屏幕，用户可以在其中放置一个位置。

然后他们单击一个按钮并打开一个地图视图。

在这里他们输入的位置也应该被导航。

当我运行此代码时，我的 map.class 中的 plaats 出现 nullpointerexception

我的导航代码是：

```
 public class Navigatie extends Activity{
        public String plaats;   

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.navigatie);

            EditText text = (EditText)findViewById(R.id.title);
            this.plaats = text.getText().toString();

            // We create a new ImageButton which links to the map.java class 
            ImageButton imageButton = (ImageButton) findViewById(R.id.imageButton1);
            // We give a onclicklistener method to the button imageButton
                   imageButton.setOnClickListener(new OnClickListener() {

                // if the imageButton is clicked we start a new activity called "Map"
                public void onClick(View v) {
                    startActivity(new Intent(Navigatie.this, Map.class));
                }
            });
        }
    } 
```

我的地图的位置显示编码的代码是：（只是代码的一部分）

```
 public Navigatie nav;

 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.map);

 mapView = (MapView) findViewById(R.id.mapview1);

 mc = mapView.getController();

 mapView.setBuiltInZoomControls(true);
 String plaats = nav.plaats;
 Geocoder geoCoder = new Geocoder(this, Locale.getDefault());
 try 
 {
   List<Address> addresses = geoCoder.getFromLocationName(plaats, 5);
   String strCompleteAddress = "";
   if (addresses.size() > 0) {
   GeoPoint p = new GeoPoint(
   (int) (addresses.get(0).getLatitude() * 1E6),
   (int) (addresses.get(0).getLongitude() * 1E6));
   mc.animateTo(p);
   mapView.invalidate();
   }
 } catch (IOException e) {
       e.printStackTrace();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:08:50.150

将 plaats 添加到您的意图中，使用

```
intent.putExtra("location", this.plaats); 
```

然后在你的地图活动中，在oncreate中：

```
String map_plaats = this.getIntent().getStringExtra("location"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:11:08.683

您想将字符串发送到其他活动。

为此，您可以使用`putExtra("key", "value");`和

您可以像这样在 Map.class 中获取此字符串

```
getIntent().getStringExtra("key"); 
```

[在这里学习](http://www.vogella.com/articles/AndroidIntent/article.html)以了解有关 Intents 的更多信息

# c - '.' 是什么意思？在结构中

> ID：13051965
> 
> 赞同：1
> 
> 时间：2012-10-24T15:03:50.020
> 
> 标签：c, pointers

> **可能重复：**
> [结构中变量名前的点是什么意思？](https://stackoverflow.com/questions/7487918/what-means-the-dot-before-variable-name-in-struct)

```
const struct file_operations generic_ro_fops = {
    .llseek     = generic_file_llseek,
    .read       = do_sync_read,
    // ....other stuffs
}; 
```

我的问题是：

1) 是什么意思`.llseek`以及如何使用`.`...file_operations 结构体定义如下：

2）我可以说：`llseek = generic_file_llseek ;`在上面的结构中让指针`llseek`指向`generic_file_llseek`而不把点放在`.`前面`llseek`吗？//对不起我糟糕的英语

```
struct file_operations {
    loff_t (*llseek) (struct file *, loff_t, int);
    ssize_t (*read) (struct file *, char __user *, size_t, loff_t *);
    //....other stuffs
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:07:59.840

它是 c99 中引入的一种特殊结构初始化语法。

当你`.llseek = generic_file_llseek,` **在你的结构初始化器**中时，这意味着你正在初始化这个特定的成员，而不管它相对于结构开始的偏移量。

或者，您可以使用不带指示符的初始化，但您必须按照声明结构中相应字段的确切顺序放置初始化器。

```
const struct file_operations generic_ro_fops = {
    generic_file_llseek, // this initializes llseek member
    do_sync_read, // this initializes read member
    // ....other stuffs
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:07:14.070

这称为指定初始值设定项。您正在初始化结构的确切成员/字段。

> 2.我可以说：“llseek = generic_file_llseek ;” 在上面的结构中让指针 llseek 指向 generic_file_llseek 而不放置点 '.' 在 llseek 之前？

不

您可以执行以下操作来初始化成员：

```
const struct file_operations generic_ro_fops = {
    generic_file_llseek,
    do_sync_read,
    // ....other stuffs
}; 
```

但在这种情况下，您将必须初始化所有内容，以便将成员放置在结构内。当您只想初始化一些结构字段时，指定的初始化程序非常有用。

您可以使用类似这样的外部结构：

```
generic_ro_fops.llseek = generic_file_llseek; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:07:25.830

## 意义

> 1) .llseek 是什么意思以及如何使用....file_operations 结构体定义如下：

这是一个 C99 特性：**指定初始化程序**。使用 ，`.`您可以初始化结构的给定字段。在这里，有必要初始化`const`限定符的结构原因。

如果`lseek`和`read`在结构定义中按此顺序排列，则可以省略此指示符。

```
const struct file_operations generic_ro_fops = { 
    generic_file_llseek, 
    do_sync_read 
}; 
```

最后一种方法不太易于维护（如果更改结构字段的顺序，则必须更改所有初始化代码），因此这里使用指定初始化器的方法更好。

## 其他方式

> 2）我可以说：llseek = generic_file_llseek；在上面的结构中让指针 llseek 指向 generic_file_llseek 而不放置点。在 llseek 之前？//对不起我糟糕的英语

不，你不能，因为它不是正确的语法。

## 参考

> **C11 (n1570)，第 6.7.9 节初始化**
> 
> 如果指定人具有以下形式
> 
> ```
> . identifier 
> ```
> 
> 那么当前对象（定义如下）应具有结构或联合类型，标识符应为该类型成员的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:08:12.647

'.' 的含义 在该结构中称为[指定初始化程序](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)。在结构中，每个 '.' 表示需要初始化的结构成员，因此称为指示符。

# javascript - 同步时排除模型属性 (Backbone.js)

> ID：13051966
> 
> 赞同：43
> 
> 时间：2012-10-24T15:04:01.463
> 
> 标签：javascript, backbone.js, underscore.js

同步时有没有办法从我的模型中排除某些属性？

例如，我在模型中保留有关某些视图状态的信息。假设我有一个选择器模块，这个模块只是`selected`在我的模型上切换一个属性。稍后，当我调用`.save()`我的集合时，我想忽略 的值`selected`并将其从同步到服务器中排除。

有没有一种干净的方法呢？

（*如果您想了解更多详情，请告诉我*）

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-24T17:47:21.013

这似乎是最好的解决方案（基于@nikoshr 引用的问题）

```
Backbone.Model.extend({

    // Overwrite save function
    save: function(attrs, options) {
        options || (options = {});
        attrs || (attrs = _.clone(this.attributes));

        // Filter the data to send to the server
        delete attrs.selected;
        delete attrs.dontSync;

        options.data = JSON.stringify(attrs);

        // Proxy the call to the original save function
        return Backbone.Model.prototype.save.call(this, attrs, options);
    }
}); 
```

所以我们在模型实例上覆盖保存函数，但我们只是过滤掉我们不需要的数据，然后我们将其代理给父原型函数。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-20T15:43:13.163

在 Underscore 1.3.3 中，他们添加了[pick](http://underscorejs.org/#pick)，在 1.4.0 中，他们添加了[omit](http://underscorejs.org/#omit)，它可以非常简单地用于覆盖模型的`toJSON`功能，以将属性列入白名单`_.pick`或将属性列入黑名单`_.omit`。

由于`toJSON`同步命令用于将数据传递到服务器，因此我认为这是一个很好的解决方案，只要您不希望在其他任何地方使用这些字段`toJSON`。

```
Backbone.Model.extend({
    blacklist: ['selected',],
    toJSON: function(options) {
        return _.omit(this.attributes, this.blacklist);
    },
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-19T17:01:03.803

我的解决方案结合了以上所有内容。只需使用白名单而不是黑名单.. 一般而言，这是一个很好的规则

定义

```
 attrWhiteList:['id','biography','status'], 
```

然后覆盖保存

```
 save: function(attrs, options) {
    options || (options = {});

 //here is whitelist or all
    if (this.attrWhiteList != null )
          // Filter the data to send to the server
             whitelisted =  _.pick(this.attributes, this.attrWhiteList);
    else  
        whitelisted =this.attributes;
    /* it seems that if you override save you lose some headers and the ajax call changes*/
    // get data
    options.data = JSON.stringify(whitelisted);

    if ((this.get('id') == 0) || (this.get('id') == null)) 
        options.type = "POST"
    else
        options.type = "PUT";

    options.contentType = "application/json";
     //        options.headers =  { 
     //            'Accept': 'application/json',
     //            'Content-Type': 'application/json' 
     //        },

    // Proxy the call to the original save function
   return  Backbone.Model.prototype.save.call(this, attrs, options);
}, 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-08-04T11:04:51.000

事实上，有一种更简单的方法可以实现这一点，而不会弄乱主干保存或同步功能，因为您不会期望这种行为是永久性的

如果您查看backbone.js 第1145 行，您会看到

```
// Ensure that we have the appropriate request data.
    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
      params.contentType = 'application/json';
      params.data = JSON.stringify(options.attrs || model.toJSON(options));
    } 
```

这意味着您可以通过将数据放入选项中来覆盖 xhr 的数据部分

由于主干保存需要 model.save([attributes], [options])

但请记住，像 id 这样的属性对于正确保存可能是必不可少的

例子

```
model.save( {}, { data: JSON.stringify(data) } ) ; 
```

所以你应该做这样的事情

```
var data = { id : model.id , otherAttributes : 'value' }  ;  
model.save( {}, { data : JSON.stringify(data) } ); 
```

这对我来说做得很好，可以与任何带有 xhr 的主干一起使用，例如获取、保存、删除......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-26T23:25:49.397

基于几个答案，这说明了空对象的情况和 Backbone 中未发送`contentType`if`options.data`的条件已设置：

```
EDITABLE_ATTRIBUTES = ["name", "birthdate", "favoriteFood"];

...

save: function(attrs, options) {
  // `options` is an optional argument but is always needed here
  options || (options = {});

  var allAttrs = _.extend({}, this.attributes, attrs);
  var allowedAttrs = _.pick(allAttrs, EDITABLE_ATTRIBUTES);

  // If `options.data` is set, Backbone does not attempt to infer the content
  // type and leaves it null. Set it explicitly as `application/json`.
  options.contentType = "application/json";
  options.data = JSON.stringify(allowedAttrs);

  return Backbone.Model.prototype.save.call(
    this, allowedAttrs, options);
}, 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-10T16:05:32.240

我发现接受的解决方案存在一些问题，因为 options.data 修改了 Backbone 进行调用的方式。更好地使用 options.attrs ：

```
Backbone.Model.extend({
    save: function (attrs, options) {
        options = options || {};
        attrs = _.extend({}, _.clone(this.attributes), attrs);

        // Filter the data to send to the server
        delete attrs.selected;
        options.attrs = attrs;
        // Proxy the call to the original save function
        return Backbone.Model.prototype.save.call(this, attrs, options);
    }
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-24T15:25:54.650

由于`save`使用`toJSON`我们覆盖它：

```
 toJSON: function(options) {
        var attr = _.clone(this.attributes);
        delete attr.selected;
        return attr;
    }, 
```

`selected`但是如果你使用 toJSON 并且需要在视图中，它可能不起作用。否则你可能需要重写`save`方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-10T07:03:13.933

设置 options.attrs 将允许您自定义 api 参数：

```
var model = new Backbone.Model();
model.save(null, {
  wait: true,
  success: function() {
  },
  attrs: _.omit(model.attributes, 'selected')
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-27T16:35:24.267

如果这是一次性的场合，您可以使用`mode.unset('selected', { silent:true })`（设置静音只是为了避免触发更改事件）来删除属性......这有一个不太好的反效果，必须在保存后重新设置它尽管。

这就是说，我完全赞同上述解决方案之一。此外，如果这是您更经常需要的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-18T13:09:52.147

要仅设置所需的值，请使用 HTTP PATCH 而不是 HTTP POST。在主干端，只需在 save 方法中添加一个补丁属性：

```
entity.save(data,{patch:true}) 
```

使用带有此属性的保存，只有作为传递的字段`data`被发送到服务器。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-25T17:46:16.323

遇到同样的问题，我决定创建一个可以提供帮助的小模块：[https ://github.com/lupugabriel1/backbone-model-save](https://github.com/lupugabriel1/backbone-model-save)

这是您可以在模型中使用它的方式：

```
var myModel = new Backbone.ModelSave.extend({
    notSync: ['name', 'age']
}); 
```

# c - 无法在 C 中为 png 创建结构

> ID：13051970
> 
> 赞同：0
> 
> 时间：2012-10-24T15:04:07.657
> 
> 标签：c, struct, png

我无法弄清楚我的结构有什么问题。

这是嵌套**PNG**头数据的一个非常基本的结构：

```
typedef struct _chunk Chunk;
typedef struct _file_header file_header;

#pragma pack(push, 1)

struct _chunk
{
    unsigned int size;
    unsigned char type[4];
};

struct _file_header
{
    unsigned char signature[8];
    Chunk ihdr;
};

#pragma pack(pop) 
```

这是主程序的一个片段：

```
int main ()
{
    FILE* img;
    file_header* h;

    if ((img=fopen("flower.png", "rb")) == NULL) {
        printf("file not found.\n");
        exit(1);
    }

    h = (file_header*)malloc(sizeof(file_header));
    fread(h, sizeof(char), sizeof(file_header), img);

    // the ouput from the printf below should be "13"
    // but what it shows is "218103808" !! (?)
    printf("%i\n", h->ihdr.size);

    free(h);
    fclose(img);
    return 0;
} 
```

有人可以向我解释这个结构有什么问题，或者如果没有问题，我应该改变什么来使事情顺利进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:20:11.593

字节顺序。

您已从磁盘读取字节`00 00 00 0D`并将它们直接填充到低端整数中，其中它们被解释为 0 + 256*0 + 65536*0 + 16777216*13 = 218103808

您可能应该做的是在读取数据后将整数从大端转换为机器格式。或编写实用程序函数以从文件指针（或文件描述符）读取相关数据并编写专用的“加载 PNG 函数”，该函数调用各个数据类型特定的读取器并填充您的结构。

# java - 尽管验证阶段失败，但更新模型值

> ID：13051971
> 
> 赞同：0
> 
> 时间：2012-10-24T15:04:08.220
> 
> 标签：java, jsf, richfaces, tomahawk

首先，我在 JSF 1.2、RichFaces 3.3.0 和 Tomahawk 1.1.9 下。

我有一个`rich:tabPanel`在每个选项卡中包含一个表单：

```
<h:form>
    // This manages error messages thrown by my application:
    <jsp:include page="showError.jsp" flush="true" />

    <rich:tabPanel switchType="client" selectedTab="#{MyBean.selectedTab}">
        <rich:tab name="tab1" label="TAB-1">
            <t:subform id="subForm1">
                //Some components such as h:inputText and h:selectOneMenu
                <t:commandButton actionFor="subform1" action="#{BeanForm1.insertData}" value="INSERT">
                    <f:setPropertyActionListener target="#{MyBean.selectedTab}" value="tab1" />
                </t:commandButton>
            </t:subform>
        </rich:tab>
        <rich:tab name="tab2" label="TAB-2">
            <t:subform id="subForm2">
                //Some components such as h:inputText and h:selectOneMenu
                <t:commandButton actionFor="subform2" action="#{BeanForm2.insertData}" value="INSERT">
                    <f:setPropertyActionListener target="#{MyBean.selectedTab}" value="tab2" />
                </t:commandButton>
            </t:subform>
        </rich:tab>
    </rich:tabPanel> 
```

我希望应用程序将视图保留在用户提交子表单的选项卡中，即使它没有通过我定义的验证。此时，“MyBean.selectedTab”的值只有在子表单被验证并提交后才会改变。

**即使表单未通过验证，是否有任何方法可以强制进行此更改？**也许我没有以正确的方式关注问题，**我怎样才能得到这种行为？**

提前致谢。

# fortify - Fortify 软件如何工作？

> ID：13051974
> 
> 赞同：56
> 
> 时间：2012-10-24T15:04:25.203
> 
> 标签：fortify

[Fortify](http://en.wikipedia.org/wiki/Fortify_Software)是一种 SCA，用于查找软件代码中的安全漏洞。我只是好奇这个软件在内部是如何工作的。我知道您需要配置一组运行代码的规则。但是它究竟是如何找到代码中的漏洞的。

有人对此有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-24T17:47:51.247

HP Fortify SCA 有 6 个分析器：数据流、控制流、语义、结构、配置和缓冲区。每个分析器都会发现不同类型的漏洞。

**数据流** 此分析器检测涉及被污染数据（用户控制的输入）的潜在漏洞，这些数据被用于潜在的危险用途。数据流分析器使用全局的跨过程污点传播分析来检测源（用户输入的站点）和接收器（危险的函数调用或操作）之间的数据流。例如，数据流分析器检测用户控制的无限长度输入字符串是否被复制到静态大小的缓冲区中，并检测用户控制的字符串是否被用于构造 SQL 查询文本。

**控制流程** 该分析仪检测潜在危险的操作序列。控制流分析器通过分析程序中的控制流路径，判断一组操作是否按一定顺序执行。例如，控制流分析器检测检查时间/使用时间问题和未初始化的变量，并检查 XML 阅读器等实用程序在使用前是否配置正确。

**结构** 检测程序结构或定义中潜在的危险缺陷。例如，结构分析器检测 Java servlet 中成员变量的分配，识别未声明为 static final 的记录器的使用，并标记由于谓词始终为假而永远不会执行的死代码实例。

**语义** 此分析器在程序内级别检测函数和 API 的潜在危险使用。基本上是一个聪明的 GREP。

**配置** 此分析器在应用程序的部署配置文件中搜索错误、弱点和策略违规。

**缓冲区** 此分析器检测缓冲区溢出漏洞，这些漏洞涉及写入或读取超出缓冲区可以容纳的数据。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-12-18T22:21:42.357

@LaJmOn 有一个很好的答案，但是在完全不同的抽象层次上，我可以用另一种方式回答这个问题：

1.  您的源代码被翻译成中间模型，该模型针对 SCA 分析进行了优化。

2.  某些类型的代码需要多个翻译阶段。例如，首先需要将 C# 文件编译为调试 .DLL 或 .EXE，然后通过 .NET SDK 实用程序 ildasm.exe 将该 .NET 二进制文件反汇编为 Microsoft 中间语言 (MSIL)。而其他文件（如 Java 文件或 ASP 文件）则由相应的 Fortify SCA 翻译器一次性翻译为该语言。

3.  SCA 将模型加载到内存中并加载分析器。每个分析器以协调的方式加载规则并将这些角色应用于程序模型中的功能。

4.  匹配被写入 FPR 文件，漏洞匹配信息、安全建议、源代码、源交叉引用和代码导航信息、用户过滤规范、任何自定义规则和数字签名都压缩到包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T04:23:27.520

也是上述@Doug Held 评论的附录......从 Fortify 16.20 开始，SCA 现在支持直接扫描 .Net C#/ASP/VB 源代码 - 不再需要预编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-16T04:13:27.397

是的 - Fortify SCA 支持扫描适用于 iOS 的 Objective-C 和 Swift 以及大约 20 种其他语言和众多框架。在 Fortify SCA 数据表中查看更多信息：

[https://www.hpe.com/h20195/V2/GetPDF.aspx/4AA5-6055ENW.pdf](https://www.hpe.com/h20195/V2/GetPDF.aspx/4AA5-6055ENW.pdf)

您还可以通过 Fortify on Demand 的 SaaS 来利用 Fortify SCA，并让专家为您运行扫描并审核结果：

[http://www8.hp.com/us/en/software-solutions/application-security-testing/index.html](http://www8.hp.com/us/en/software-solutions/application-security-testing/index.html)

# php - 是否可以结合 CSRF 和 Nonce 令牌？

> ID：13051979
> 
> 赞同：0
> 
> 时间：2012-10-24T15:04:34.863
> 
> 标签：php, csrf, nonce

首先是一些背景。
我一直在使用 nonce 令牌以`wordpress`允许将操作附加到 nonce 的相同方式签署我的表单数据：

```
// editing post id:10
$post_id = 10;
$nonce = create_nonce( 'edit-post-'.$post_id );
echo '<input type="hidden" name="post_id" value="'.$post_id.'">';
echo '<input type="hidden" name="nonce" value="'.$nonce.'">'; 
```

这允许我稍后检查用户是否正在编辑我授予他权限的帖子，因为我重建了随机数并检查我收到的随机数是否与我构建的相同：

```
$server_nonce = create_nonce( 'edit-post-'.$_POST['post_id'] );
if( $server_nonce != $_POST['nonce'] )
{
    echo 'bad guy...';
} 
```

到目前为止，我将此方法误解为一种反 CSRF 令牌，它为我提供了 CSRF 保护。
当我深入研究 CSRF 问题时，我发现这个解决方案并不能 100% 保护我免受 CSRF 的影响，因为：

1.  可以使用接收到的数据在服务器中重建随机数。CSRF 不能重建。
2.  对于窗口时间的表单，nonce 标记将是相同的。CSRF 在每个请求中都必须是唯一的。

所以，这是我的问题：

可以在一个表单中使用两个令牌来保护 CSRF 和数据签名吗？有没有办法将这两个令牌结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:25:50.537

通常，nonce 需要保存在服务器端的某个地方。如果您在验证时重新生成随机数，这意味着随机数是基于输入的可预测值。这是非常没用的，因为这是一个静态值。这不是一个*随机数*。

随机数应该工作的方式是：

1.  构造表单
2.  生成一个***随机***值，即 nonce
3.  将 nonce 保存在 session 中*，*并将其放在表单中的隐藏字段中
4.  提交表单后，检查提交的随机数是否与会话中的随机数相对应

其他任何东西都只是action+post-id的校验和，这没什么用。

You can easily extend this proper nonce procedure with a checksum of the to-be-submitted fields, by taking the name of all expected fields and other expected static values and adding a hash of them to the session as well. E.g.:

```
sha1(join(',', array('first_name', 'last_name', $nonce))) 
```

Upon form submission, get all received field names and generate the same hash again and check if it's identical to the one in the session. If not, somebody tampered with the form.

# php - 循环php数组

> ID：13051981
> 
> 赞同：-1
> 
> 时间：2012-10-24T15:04:40.370
> 
> 标签：php, arrays, loops, for-loop

我请求 4 帮助将这样的数组放入循环中；

```
$name_array = array(

array('Name1','Title1','website1'),
array('Name2','Title2','website2'),
array('Name3','Title3','website3'),
); 
```

我认为这是一个简单的循环，但会返回语法错误；

```
 $name_array = array(

for($p=0;$p<=3;$p++){
       array('$name[$p]','$title[$p]','$website[p]'),
    }
); 
```

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:07:19.540

```
$name_array = array();
for ($x=0;$x<3;$x++){
  $name_array[] = array('Name' . $x, 'Title' . $x, 'website' . $x);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:08:30.377

你在这条线上结合了多个东西，

```
$name_array = array(
for($p=0;$p<=3;$p++){
   array('$name[$p]','$title[$p]','$website[p]'),
}
); 
```

1.  `=`是一个赋值运算符，将右边的值赋给左边的变量。例如。`$name_array = array();`
2.  你不应该有一个围绕`for`循环的数组
3.  `array('$name[$p]','$title[$p]','$website[p]')`..变量`$name[$p], $title[$p] and $website[$p]`不应该用引号引起来。

你需要的是这个

```
for($p=0;$p<=3;$p++){
   $name_array[] = array('Name'.$p,'Title'.$p,'Website'.$p);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T15:09:13.013

正确的方法是：

```
$name_array=array();
for($i=0; $i<3; $i++){
    $name_array[]=array('Name'.$i, 'Title'.$i, 'Website'.$i);
} 
```

如您所见，您的原始代码中有很多错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T15:10:13.403

假设您已经有数组`$name`, `$title`,`$website`并且它们的长度都相同：

```
$name_array = array();
for($x = 0; $x < count($name); $x++) {
   $name_array[] = array($name[$x], $title[$x], $website[$x]);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T15:06:36.887

你想要类似的东西吗

```
for($p=0;$p<=3;$p++){ /you can use the count to like count($name_array)
       $name[$p] =$p;

 //or echo 

      echo $name[$p];
    } 
```

# c++ - gcc上的子类型引用参数编译错误

> ID：13051993
> 
> 赞同：0
> 
> 时间：2012-10-24T15:05:23.657
> 
> 标签：c++

我在使用 gcc 版本 4.6.3 编译 c++ 程序时遇到问题；我可以使用 microsoft 编译器 (v 9.0) 毫无问题地编译这个程序。该程序正在使用我一直与微软编译器一起使用的一些库。

问题是当我尝试将引用作为另一个子类型的参数传递时：这里的伪示例：

```
class ObjManager{..}

class SubObjMng : public ObjManager{
public:
    inline SubObjMng() : ObjManager(0, ... ){}
};

class Test{
public:
   Test(int i, ObjManager &obj_mng);
}

int main(){

SubObjMng myobjmng;

Test t(0, myobjmng);    //GCC ERROR HERE

} 
```

错误的输出是（我的程序的实际输出）：

```
globals.h:227:40: error: no matching function for call to cdk::HashMap::HashMap(unsigned int, cdk::PtrObjMng, cdk::cstrObjMng)
globals.h:227:40: note: candidates are:
contrib/cdklib/cdk_struct.h:485:12: note: cdk::HashMap::HashMap(uint32_t, cdk::ObjManager&, cdk::ObjManager&)
contrib/cdklib/cdk_struct.h:485:12: note:   no known conversion for argument 2 from cdk::PtrObjMng to cdk::ObjManager& 
```

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:23:34.443

`cdk::PtrObjMng`应该继承自`cdk::ObjMng`，通过引用使多态成为可能。否则，根据编译器的说法，这是不行的。

当然这可能不是你问题的根源，我希望我们能看到你的构造函数的实现。