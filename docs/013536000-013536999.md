# StackOverflow 问答 13536000-13536999

# php - PHP 空白

> ID：13536000
> 
> 赞同：-2
> 
> 时间：2012-11-23T21:35:52.090
> 
> 标签：php, echo

PHP：

```
<?php
echo '<div id="hello">';
include 'world.php';
echo '</div>'; 
```

每个构造之间都有空格。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:37:25.843

```
<?php echo '<div id="hello">'; ?><p></p><?php echo '</div>'; 
```

没有空格！

之后有一个换行符`?>`

# javascript - KnockoutJS 选项绑定：仅显示非空项目

> ID：13536001
> 
> 赞同：0
> 
> 时间：2012-11-23T21:36:00.183
> 
> 标签：javascript, data-binding, knockout.js

我有数组：`items = [,,,,5,,7,,,10,....,1000,.....10000]`

我想像下一个一样显示选择

```
<select>
     <option value="5">word 1</option>
     <option value="7">word 1</option>
     <option value="10">word 1</option>
     <option value="1000">word 1</option>
     <option value="10000">word 1</option>
</select> 
```

[jsFiddle](http://jsfiddle.net/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:54:41.977

您需要创建一个 ko.computed 来过滤掉空条目。请参阅下面的代码。

```
vm = {};
vm.items = ko.observableArray( [, , , , 5, , 7, , , 10, 1000, 10000]);

//filter the items using the filter text
vm.filteredItems = ko.computed(function() {
       return ko.utils.arrayFilter(this.items(), function(item) {
            return item != null;
        });
}, vm);
ko.applyBindings(vm); 
```

[我在http://jsfiddle.net/photo_tom/qd6P5/4/](http://jsfiddle.net/photo_tom/qd6P5/4/)创建了一个工作演示

# json - YII - 在表单验证中添加错误代码

> ID：13536003
> 
> 赞同：1
> 
> 时间：2012-11-23T21:36:13.280
> 
> 标签：json, web-services, validation, error-handling, yii

我有一个网络服务，想发送一个自定义错误代码和字符串，以防表单验证失败。我们可以在表单验证规则中指定错误“消息”，但我想添加一个数字错误代码，以后可以使用它来获取文本字符串。扩展 CValidator 不是一个选项，因为我想使用标准验证器。

理想情况下，我希望在我的 rules() 函数中有这样的东西。

```
 array('page',  'numerical', 'integerOnly' => true, 'min' => 1, 'message' => '{attribute} is invalid', 'code' => 10079), 
```

后来我返回一个 JSON 块，如

```
 {
            'code': 10079,
            'message' : 'page is invalid'
    } 
```

我正在考虑将一种行为附加到验证器，但不太能够找到一种使其工作的方法。有没有其他的yii方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:58:44.797

而不是 message ，您只需将错误代码作为 message 返回，并在视图页面上调用一个函数来检索适当的错误消息。

提供 $form->error(); 作为参数以在视图页面上获取 errorMessage。

# ruby-on-rails-3 - 如何为单例模型设置 ActiveAdmin 编辑器？

> ID：13536004
> 
> 赞同：0
> 
> 时间：2012-11-23T21:36:31.553
> 
> 标签：ruby-on-rails-3, activeadmin

活动管理页面应该加载模型的单例实例（我使用的是符合 ActiveRecord 的模型）。我不确定将代码放在哪里来加载模型的单个实例，或者如何使记录的默认页面成为编辑页面而不是收集页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:46:14.930

您应该检查[http://activeadmin.info/docs/8-custom-actions.html#member_actions](http://activeadmin.info/docs/8-custom-actions.html#member_actions)，并且您可以将操作设置为：

```
actions :update 
```

在成员操作中，您可以专注于更新实例。

--

再次嗨，今天我做了类似的事情，更简单，这就是我所做的：

1.  使索引看起来像博客[http://activeadmin.info/docs/3-index-pages/index-as-blog.html](http://activeadmin.info/docs/3-index-pages/index-as-blog.html)
2.  仅使用操作：索引、编辑、更新
3.  使用范围[http://activeadmin.info/docs/2-resource-customization.html#scoping_the_queries](http://activeadmin.info/docs/2-resource-customization.html#scoping_the_queries) （此外，如果您想从模型中调用范围，则只能使用**范围**而不是**scope_to ）。**

希望能帮助到你。

# image - 网页上的 Facebook Like 按钮会生成与网页无关的图像

> ID：13536007
> 
> 赞同：0
> 
> 时间：2012-11-23T21:37:02.897
> 
> 标签：image, facebook, button, facebook-like

我用 Facebook like 按钮设置了我的新网站的索引页面。一切正常，除了我指定的图像（网页上调用的唯一图像）`meta property="og:image" content=`- 使用了一个完全未知的图像。它的图像是一个带有一些白色字母的窄水平条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:42:31.697

看看 Facebook 是否可以通过他们的[lint 工具](http://developers.facebook.com/tools/debug)告诉你出了什么问题。

干杯

# java - 语句关闭后不允许操作问题

> ID：13536012
> 
> 赞同：1
> 
> 时间：2012-11-23T21:37:47.947
> 
> 标签：java, mysql, sql, jdbc, database-connection

我的单例中有下一个方法来执行 JDBC 连接

```
public void openDB() throws ClassNotFoundException, IllegalAccessException,
        InstantiationException, SQLException {
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    String url = "jdbc:mysql://localhost/mbpe_peru";//mydb
    conn = DriverManager.getConnection(url, "root", "admin");
    st = conn.createStatement();
}

public void sendQuery(String query) throws SQLException {
    st.executeUpdate(query);
}

public void closeDB() throws SQLException {
    st.close();
    conn.close();
} 
```

我遇到了一个问题，我必须调用两次。

```
private void jButton1ActionPerformed(ActionEvent evt) {

Main.getInstance().openDB();
Main.getInstance().sendQuery("call insertEntry('"+EntryID()+"','"+SupplierID()+"');");
Main.getInstance().closeDB();

Main.getInstance().openDB();
for(int i=0;i<dataBox.length;i++){
Main.getInstance().sendQuery("call insertCount('"+EntryID()+"','"+SupplierID()+"','"+BoxID()+"');
Main.getInstance().closeDB();
}
} 
```

我已经尝试保持连接打开并发送 2 个查询，然后关闭它并没有工作......它工作的唯一方法是不使用方法，声明连接的命令并使用不同的变量进行连接和声明。我认为如果我关闭连接和语句，我可以再次使用该变量，因为它是一种方法，但我不能。有没有办法使用我的 JDBC 连接方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:01:28.177

你的循环是

```
 Main.getInstance().openDB();
   for(int i=0;i<dataBox.length;i++){
      Main.getInstance().sendQuery(....);
      Main.getInstance().closeDB();
    } 
```

您将在每次迭代时关闭数据库。你应该做

```
 Main.getInstance().openDB();
   for(int i=0;i<dataBox.length;i++){
      Main.getInstance().sendQuery(....);
    }
    Main.getInstance().closeDB(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:50:26.883

我建议更改您的代码如下：

```
private void jButton1ActionPerformed(ActionEvent evt) {
    Main.getInstance().openDB();
    Main.getInstance().sendQuery("call insertEntry('"+EntryID()+"','"+SupplierID()+"',);

    for(int i=0;i<dataBox.length;i++){
        Main.getInstance().sendQuery("call insertCount('"+EntryID()+"','"+SupplierID()+"','"+BoxID()+"');
    }

    Main.getInstance().closeDB();
} 
```

我没有测试过这个，所以我希望它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:53:36.103

创建两个语句。并且更好地使用带有 setter 的参数化语句。

```
Class.forName("com.mysql.jdbc.Driver").newInstance();
String url = "jdbc:mysql://localhost/mbpe_peru";//mydb
Connection conn = DriverManager.getConnection(url, "root", "admin");

CallableStatement insertEntrySt = conn.prepareCall("CALL insertEntry(?, ?)");
insertEntrySt.setInt(1, EntryID());
insertEntrySt.setInt(2, SupplierID());
insertEntrySt.executeUpdate();
insertEntrySt.close();

CallableStatement insertCountSt = conn.prepareCall("CALL insertCount(?, ?, ?)");
...

conn.close(; 
```

# css - 在 Twitter 引导流体布局中调整 iframe 大小的正确方法是什么？

> ID：13536015
> 
> 赞同：8
> 
> 时间：2012-11-23T21:38:31.877
> 
> 标签：css, twitter-bootstrap, column-width

我有一个 2 列流畅的 Twitter 引导布局，并希望在其中一个窗格中有一个 iframe（它将包含 Google 任务小部件——https: [//mail.google.com/tasks/ig](https://mail.google.com/tasks/ig)）。如何正确设置宽度？我想出了如何设置样式，使其具有边框（以将其区分为外部页面内容），但我无法使其正确填充其中一列。这是我目前拥有的：

```
 <iframe class="container well well-small"
          style="width: 80%; height: 400px; background-color: #f5e5c5;"
          src="https://mail.google.com/tasks/ig">
      </iframe> 
```

完整示例（另存为 HTML 文件）： http: [//pastebin.com/1u2QeuZk](http://pastebin.com/1u2QeuZk)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T21:48:29.583

使用`row-fluid`类定义行，使用 spanX 类定义列。像这样：

```
<div class="row-fluid">
   <iframe class="container well well-small span6"
           style="height: 400px; background-color: #f5e5c5;"
           src="https://mail.google.com/tasks/ig">
   </iframe>
</div> 
```

*但是：* Xs 中的`spanX`每行需要加起来最多 12 个。因此，在上面的示例中，您还需要将另一列的内容包装在带有`span6`类的标签中，或者`offset6`如果它是该特定行上的唯一内容，则可以在 iframe 上使用该类以使其对齐向右。

要使一列比另一列宽，您可以通过更改 X in 来更改它`spanX`，只需确保它们每行加起来为 12。

如果您想知道如何使列具有特定宽度：流体网格的重点是*不*使用特定宽度。您设置容器的宽度（最好也使用相对单位，以使内容适应视口的大小），每列将是容器宽度的 1/12。因此，如果您*确实*想精确控制宽度，那么您始终可以使容器具有特定宽度，以便您想要的列的宽度可以是容器宽度的 1/12 的倍数。即，如果您希望列宽 400 像素，您可以使容器宽 800 像素并使用`span6`列上的类。或使用`span3`使其宽 200 像素等。

我在文档中都解释得很好：http: [//twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

# c - 使用 pthread_create

> ID：13536017
> 
> 赞同：0
> 
> 时间：2012-11-23T21:38:51.320
> 
> 标签：c, pthreads

尝试使用 pthread_create 时出现错误。我了解我对**argsRight->thread_id / argsLeft->thread_id**和**NULL**的使用不正确，但我不确定如何引用线程 ID。它需要一个指针，但似乎我尝试过的每一种方式（&，*），GCC 编译器都不会接受。

另外，它有什么理由不接受我使用 NULL 吗？我看不出有任何错误的原因，但 GCC 说我对 void 函数的使用是无效的。

谁能阐明如何正确设置对 pthread_create 的调用？我已经包含了我使用 pthread_create 函数的方法中的部分内容。

```
void pthreads_ms(struct ms_args* args)
{
int left_end = (args->end + args->start) / 2;
int right_start = left_end + 1;
int rc1, rc2;

// Create left side struct
struct ms_args* argsLeft;
argsLeft = malloc(sizeof(args));
argsLeft->thread_id = (2 * args->thread_id + 1);
argsLeft->start = args->start;
argsLeft->end = left_end;
argsLeft->array = args->array;

// Same methodology as above to create the right side

if (args->start != args->end)
{
        // Print the thread id number, and start and end places
            printf("[%d] start %d end %d", args->thread_id, args->start, args->end);

        // Sort Left Side
        rc1 = pthread_create(argsLeft->thread_id, NULL, pthreads_ms(argsLeft), argsLeft);   //problem line here

        //Sort right side
        rc2 = pthread_create(argsRight->thread_id, NULL, pthreads_ms(argsRight), argsRight); //problem line here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:45:05.497

这不是您的应用程序，它的**pthread_create()**将填充**thread_id**字段。所以，首先，**struct ms_args**的字段应该是**pthread_t**类型，你应该传递一个指向该字段的指针：

```
pthread_create(&argsLeft->thread_id, ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:45:27.197

根据[pthread_create](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html)正确的调用应该是

```
rc1 = pthread_create(&(argsLeft->thread_id), NULL, &pthreads_ms, argsLeft); 
```

右侧也是如此。

的定义`pthread_ms()`应该包含一个返回值

```
void *pthreads_ms(struct ms_args* args) { ... } 
```

除此之外，你的代码对我来说看起来很危险，因为它为每个现有的线程*递归地*创建了两个线程。根据您的输入，这可能会构建一个大的线程树，这可能会使您的系统停止运行。

# ios - 部署旧版本的 iOS 应用程序

> ID：13536018
> 
> 赞同：1
> 
> 时间：2012-11-23T21:39:05.420
> 
> 标签：ios, xcode, cocoa-touch, git, migration

也许我犯了一个错误，但是当我完成我的应用程序的 v1.1 工作时，我将它合并到 XCode 中的 master 分支并删除了 1.0 分支。现在，在我的 v1.11 分支上工作，我想测试从 1.0 到 1.11 的迁移。虽然我仍然保存了二进制文件。

如何将我的 1.0 版二进制文件部署到模拟器和我的测试设备上？

对于这种情况，我是否应该无限期地保留 v1.0 分支，还是在代码合并回主分支后将其删除是否正确？

有关处理此类事情的最佳实践的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:22:46.920

进一步阅读表明，测试更新的最简单方法是使用 iTunes 部署旧的 .ipa。这假设您已从提交时存档了二进制文件。

马特康诺利对[这个问题](https://stackoverflow.com/questions/2524326/how-to-test-an-iphone-application-update)的回答很有启发性。

# c# - c# mvc3 控件内的控件

> ID：13536022
> 
> 赞同：0
> 
> 时间：2012-11-23T21:39:39.280
> 
> 标签：c#, asp.net-mvc, entity-framework-4

MVC3 具有实体框架，可以在控制器中创建、删除、编辑方法。我正在制作一个允许编辑多个表格的控制面板。如何将控制器（实体框架）合并到另一个控制器（控制面板）中？

有什么巧妙的解决方法吗？

例如[http://example.com/Control_panel/Another_Controller](http://example.com/Control_panel/Another_Controller)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:41:47.250

如果您想从同一页面编辑多个表中的数据，您可以使用视图模型来完成此操作。您在视图中呈现给用户的数据不需要与表或模型具有 1:1 的关系。

视图模型将允许您从各种来源选择数据，将其呈现给用户以供查看或编辑，如果用户保存相同，您可以从控制器操作中选择视图模型并使用该数据更新一个或多个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:57:05.913

好的，有两种方法可以说您在 ControlPanel 控制器中有一个默认的控制面板操作，您可以有一个变量进入并说明您要控制的内容，我们称之为 controlID，然后您可以使用 RedirectToAction 去改为那个动作，像这样

```
public ActionResult controlPanel(object controlId){
     if(controlId.equals(something)){
         RedirectToAction(SomeAction, SomeController);
     }
} 
```

另一种是您可以使用相同的想法并直接调用控制器动作。像这样：

```
var result= new SomeController().SomeAction(); 
```

尽管这破坏了 MVC 设计，因为您应该让它成为一个更通用的功能而不是控制器，因为控制器旨在控制模型和视图之间的数据移动。如果我看到一些代码，我可以给你一个更具体的回应。

# javascript - Kendo UI 网格未触发传输创建 URL

> ID：13536024
> 
> 赞同：1
> 
> 时间：2012-11-23T21:39:44.180
> 
> 标签：javascript, kendo-ui

我有一个从 Web 服务执行 CRUD 的 kendoUI 网格。出于某种原因，读取命令可以完美运行并填充我的网格。

但是，当我尝试创建新记录时，尽管它在网格中显示了新记录并且我可以编辑其字段，但按钮保存不会触发 Web 服务。

查看 http 日志，我发现服务没有受到影响。仅在“阅读”上。

这是网格的代码：

```
$(function() {
            $("#grid").kendoGrid({
                dataSource: {
                    transport: {
                        read: "libyMsg.php?way=getUsrMsgList"
                    },
                    create: {
                        url: "libyMsg.php?way=createMsg",
                        type: "PUT"
                    },
                    update: {
                        url: "libyMsg.php?way=updateeMsg",
                        type: "PUT"
                    },destroy: {
                        url: "libyMsg.php?way=destroyMsg",
                        type: "PUT"
                    },
                    batch: true,
                    pageSize: 10,
                    schema: {
                        data: "data",
                        model: {
                            id: "msg_id",
                            fields: {
                                msg_id: { editable: false, nullable: true },
                                msg_title: { validation: { required: true } },
                                msg_content: {  validation: { required: true } },
                                msg_type: { type: "number", validation: { min: 0, required: true }},
                                msg_date: { type: "date", validation: { required: true } },
                                msg_status: { type: "number", validation: { min: 0, required: true } }
                            }
                        }
                    },
                },
                columns: [{ field: "msg_id", width: 40,title: "ID" },
                    { field: "msg_title",width: 300, title: "Title" },
                    { field: "msg_content", width: 300,title: "Content" },
                    { field: "msg_type", width: 40,title: "Type" },
                    { field: "msg_date", width: 300,title: "Date" }, 
                    { field: "msg_status", width: 40,title: "Status" }],
                scrollable: true,
                sortable: true,
                editable:true,
                pageable: {
                    refresh: true,
                    pageSizes: true
                },
                toolbar: ["create", "save", "cancel"],
            });
        }); 
```

这真让我抓狂。任何人？

泰/米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:55:25.177

你`transport`错了。试试这个：

```
transport:{
    read      :"libyMsg.php?way=getUsrMsgList",
    create    :{
        url :"libyMsg.php?way=createMsg",
        type:"PUT"
    },
    update    :{
        url :"libyMsg.php?way=updateeMsg",
        type:"PUT"
    },
    destroy:{
        url :"libyMsg.php?way=destroyMsg",
        type:"PUT"
    }
}, 
```

`create`，`update`并且`destroy`应该是 的一部分`transport`。

# ios - iTunes Connect 需要 iPhone 5 屏幕截图才能用于非 iPhone5 应用程序

> ID：13536028
> 
> 赞同：1
> 
> 时间：2012-11-23T21:39:57.917
> 
> 标签：ios, app-store-connect

我的应用不支持 4 英寸视网膜显示屏（项目中没有 iPhone 5 闪屏或 Default-586h@2x.png），但 ITC 仍然需要它的屏幕截图。即使对于非 iPhone 5 应用程序也是强制性的吗？我应该只在信箱模式下使用我的应用程序的屏幕截图，还是有办法直接指定我的应用程序不支持 iPhone 5？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:52:54.870

您可以在 4 英寸模式下启动模拟器并在那里获得合适大小的屏幕截图

# php - 生成包含大量数据的 XML 文件并避免内存上限

> ID：13536032
> 
> 赞同：1
> 
> 时间：2012-11-23T21:40:46.973
> 
> 标签：php, xml, wordpress

我现在有一个包含大约 300k 页的 Wordpress 站点，以及一个内存为 1GB 的服务器。不幸的是，所有的站点地图生成插件都无法处理它。我尝试了 3 种不同的使用 PHP 写入 XML 的方法（XMLWriter、SimpleXMLElement 和 DOMDocument），它们最终都达到了大约 30k 页（xml 节点）。

你认为我能做些什么来完成这项工作？最坏的情况是，我考虑过设置多个 cron 作业，每天每十分钟运行一次，并继续打开/附加到文件，然后分块添加，但这显然不是最佳解决方案。我发现了一些声称能够在我的循环期间清除内存的片段，但它也没有起到作用。这是该片段的示例：

```
$xml = '<?xml version="1.0" encoding="UTF-8"?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">';
for ($i = 0 ; $i< 20; $i++) {
  $query = mysql_query(sprintf("SELECT ID, post_date FROM wp_posts WHERE post_status='publish' LIMIT %s,%s", $i*10000, 10000));
  while ($row = mysql_fetch_array($query)) {
    $xml .= '<url>';
    $xml .= '<loc>'.get_permalink($row['ID']).'</loc>';
    $xml .= '<lastmod>'.$row['post_date'].'</lastmod>';
    $xml .= '<changefreq>weekly</changefreq>';
    $xml .= '<priority>0.6</priority>';
    $xml .= '</url>';
  }
}
$xml .= '</urlset>';

$sxe = new SimpleXMLElement($xml);
$sxe->asXML("sitemap.xml"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:53:14.213

为什么要一次抓取所有记录？

尝试每个请求获取 10000 行。并在每次迭代后清理内存。

如果您在 cli 模式下运行旧版本的 php，则不会释放内存，因此您可以尝试 fork [http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

怎么做：

1.  无需使用任何 xml 库，`sprintf`就可以了。
2.  将其包装成 for ($i = 0, $i < 5, $i++) {}
3.  查询看起来像`LIMIT ($i*10000) 10000`

代码示例：

```
for ($i = 0 ; $i< 5 $i++) {
    ...
    $sth = $dbh->prepare('SELECT * FROM table_name LIMIT ? ?');
    $sth->execute(array($i*10000, 10000));
    ...
} 
```

另一个代码示例：

```
 <?php
    $fileHandle = fopen("sitemap.xml", "w");

    fwrite($fileHandle,
        '<?xml version="1.0" encoding="UTF-8"?>' . 
        '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"' .
        ' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ' .
        ' xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9' .
        ' http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">'
    );

    for ($i = 0 ; $i< 20; $i++) {
        $query = mysql_query(sprintf("SELECT ID, post_date FROM wp_posts WHERE post_status='publish' LIMIT %s,%s", $i*10000, 10000));
        $xml = '';
        while ($row = mysql_fetch_array($query)) {
            $xml .= '<url>'.
                '<loc>'.get_permalink($row['ID']).'</loc>' .
                '<lastmod>'.$row['post_date'].'</lastmod>' .
                '<changefreq>weekly</changefreq>' .
                '<priority>0.6</priority>' .
                '</url>';
        }

        fwrite($fileHandle, $xml);
    }
    fwrite($fileHandle, '</urlset>');

    fclose($fileHandle);

    echo PHP_EOL . 'memory used: '. memory_get_peak_usage() . PHP_EOL; 
```

# azure - Azure 诊断在我的辅助角色中不起作用

> ID：13536033
> 
> 赞同：7
> 
> 时间：2012-11-23T21:40:51.410
> 
> 标签：azure, azure-worker-roles, diagnostics, azure-diagnostics

我正在尝试为我在 Windows azure 中的工作人员角色获取跟踪日志，但它不起作用并且看不到任何错误。

我已将我的应用程序配置为使用 azure 诊断，如此处所述：[https ://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/](https://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/)

首先，我在我的工人角色的 app.config 中有这个：

```
<system.diagnostics>
    <trace>
        <listeners>
            <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                name="AzureDiagnostics">
                <filter type="" />
            </add>
        </listeners>
    </trace>
</system.diagnostics> 
```

然后，在我的 ServiceConfiguration.Cloud.cscfg 我有这个连接字符串：

```
<ConfigurationSettings>
  <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="DefaultEndpointsProtocol=https;AccountName=XXXXXXX;AccountKey=XXXXXXXXX" /> 
  ... 
```

在我的 ServiceDefinition.csdef 我有：

```
<Import moduleName="Diagnostics" /> 
```

最后在 WorkerRole.cs 的 OnStart() 方法中，我有：

```
var config = DiagnosticMonitor.GetDefaultInitialConfiguration();
        config.Logs.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(1.0);
        config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;

        DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", config); 
```

然后我在我的 Run() 方法中做了一些 Trace.WriteLine() 。

这应该是在存储中创建 WADLogsTable，但事实并非如此。

当我通过远程桌面连接到我的实例时，我在事件查看器中看不到任何错误，我看到的唯一奇怪的事情是 WaHostBootstrapper 日志，我看到 DiagnosticsAgent.exe 进程启动了两次，然后在获得状态一时进程响应而另一个没有，这是日志的一部分：

```
[00002868:00002872, 2012/11/23, 21:26:30.367, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:30.383, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:30.414, 00040000] Executing Startup Task type=2 rolemodule=Diagnostics cmd="E:\plugins\Diagnostics\DiagnosticsAgent.exe" 
[00002868:00002872, 2012/11/23, 21:26:30.414, 00040000] Executing "E:\plugins\Diagnostics\DiagnosticsAgent.exe" .
[00002868:00002872, 2012/11/23, 21:26:30.414, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:30.446, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:30.477, 00040000] Executing Startup Task type=0 rolemodule=Diagnostics cmd="E:\plugins\Diagnostics\DiagnosticsAgent.exe" /blockStartup
[00002868:00002872, 2012/11/23, 21:26:30.477, 00040000] Executing "E:\plugins\Diagnostics\DiagnosticsAgent.exe" /blockStartup.
[00002868:00002984, 2012/11/23, 21:26:30.821, 00040000] Registering client with PID 2964.
[00002868:00002984, 2012/11/23, 21:26:30.821, 00040000] Client DiagnosticsAgent.exe (2964) registered.
[00002868:00002984, 2012/11/23, 21:26:30.821, 00040000] Registering client with PID 2940.
[00002868:00002984, 2012/11/23, 21:26:30.821, 00040000] Client DiagnosticsAgent.exe (2940) registered.
[00002868:00002872, 2012/11/23, 21:26:45.961, 00040000] Program "E:\plugins\Diagnostics\DiagnosticsAgent.exe" /blockStartup exited with 0\. Working Directory = E:\plugins\Diagnostics
[00002868:00002872, 2012/11/23, 21:26:45.961, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:45.992, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:46.008, 00040000] Executing Startup Task type=2 rolemodule=RemoteAccess cmd="E:\plugins\RemoteAccess\RemoteAccessAgent.exe" 
[00002868:00002872, 2012/11/23, 21:26:46.008, 00040000] Executing "E:\plugins\RemoteAccess\RemoteAccessAgent.exe" .
[00002868:00002872, 2012/11/23, 21:26:46.008, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:46.055, 00100000] <- WapGetEnvironmentVariable=0x800700cb
[00002868:00002872, 2012/11/23, 21:26:46.071, 00040000] Executing Startup Task type=0 rolemodule=RemoteAccess cmd="E:\plugins\RemoteAccess\RemoteAccessAgent.exe" /blockStartup
[00002868:00002872, 2012/11/23, 21:26:46.117, 00040000] Executing "E:\plugins\RemoteAccess\RemoteAccessAgent.exe" /blockStartup.
[00002868:00002984, 2012/11/23, 21:26:46.399, 00040000] Registering client with PID 936.
[00002868:00002984, 2012/11/23, 21:26:46.399, 00040000] Client RemoteAccessAgent.exe (936) registered.
[00002868:00002936, 2012/11/23, 21:26:46.430, 00040000] Registering client with PID 2432.
[00002868:00002936, 2012/11/23, 21:26:46.430, 00040000] Client RemoteAccessAgent.exe (2432) registered.
[00002868:00002872, 2012/11/23, 21:26:47.586, 00040000] Program "E:\plugins\RemoteAccess\RemoteAccessAgent.exe" /blockStartup exited with 0\. Working Directory = E:\plugins\RemoteAccess
[00002868:00002872, 2012/11/23, 21:26:47.586, 00100000] <- GetDebugger=0x1
[00002868:00002872, 2012/11/23, 21:26:47.602, 00100000] <- GetRoleHostDebugger=0x1
[00002868:00002872, 2012/11/23, 21:26:47.633, 00100000] <- WapXmlReadContainerId=0x1
[00002868:00002872, 2012/11/23, 21:26:47.649, 00100000] <- WapGetVirtualAccountName=0x1
[00002868:00002872, 2012/11/23, 21:26:47.664, 00040000] Executing base\x64\WaWorkerHost.exe .
[00002868:00002872, 2012/11/23, 21:26:47.664, 00040000] Role host process PID: 2560.
[00002868:00002936, 2012/11/23, 21:26:47.742, 00040000] Registering client with PID 2560.
[00002868:00002936, 2012/11/23, 21:26:47.742, 00040000] Client WaWorkerHost.exe (2560) registered.
[00002868:00002936, 2012/11/23, 21:26:47.742, 00040000] Client process 2560 is the role host.
[00002868:00002936, 2012/11/23, 21:26:47.742, 00040000] Role host process registered.
[00002868:00002892, 2012/11/23, 21:26:47.899, 00040000] Getting status from client DiagnosticsAgent.exe (2964).
[00002868:00002892, 2012/11/23, 21:26:47.899, 00100000] Failed to connect to client DiagnosticsAgent.exe (2964).
[00002868:00002892, 2012/11/23, 21:26:47.914, 00100000] <- CRuntimeClient::OnRoleStatusCallback(0x00000000007EE660) =0x800706ba
[00002868:00002892, 2012/11/23, 21:26:47.961, 00040000] Getting status from client DiagnosticsAgent.exe (2940).
[00002868:00002892, 2012/11/23, 21:26:47.961, 00040000] Client reported status 0. 
```

有什么不对的吗？如何将这些诊断信息发布到我的 Azure 存储？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T09:45:07.747

在我最初误读您正在运行 webrole 时进行了编辑 - 哎呀。

使用辅助角色，尝试删除描述日志记录设置的 blob，然后重新部署。您将在用于诊断的存储帐户中的 wad-control-container blob 目录下找到该 blob。

以下是我的原始回复，但它仅适用于您运行 webrole 的情况。我把它留在这里，因为这是一个明显的问题，所以也许它可以为某人节省一些时间：

这可能是因为您的 webrole.cs 代码在与 Web 应用程序不同的 AppDomain 中运行（如果您在完整的 IIS 中托管）。即使在 web.config 中配置了 Azure DiagnosticMonitorTraceListener，它对运行 webrole.cs 代码的 AppDomain 也没有影响。因此，Azure 诊断跟踪侦听器未在 Run 方法中注册，并且跟踪无处可去。

我会尝试两件事： - 在 OnStart (Trace.Listeners.Add(new DiagnosticMonitorTraceListener()) 的代码中显式添加 Azure 诊断跟踪侦听器。 - 从 Web 应用程序写入一些日志。这可能会触发 WADLogsTable 的创建.

# mysql - MySQL：如何在嵌套选择中引用计数的结果

> ID：13536035
> 
> 赞同：1
> 
> 时间：2012-11-23T21:41:05.627
> 
> 标签：mysql, select, max

我正在使用示例数据库学习 MySQL。我有一个“生产”表，其中有列：cd_code、公司和年份。我想知道哪家公司制作的 CD 最多。

这：

```
select company, count(cd_code) from production group by company; 
```

这给了我这些公司以及每个公司发行了多少张 CD。
现在从带有列（如出现）公司的表中，count(code_cd)
我想打印拥有最多 CD 的公司。
所以我想要第二张表第二列的最大值。

我正在尝试的是：

```
select max(res.cd_code) from (select company, count(cd_code) from production group by company) as res; 
```

我收到错误 1054：

> “字段列表”中的未知列“cd_code”

我能做些什么？

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:44:07.020

您正在选择`company, count(cd_code)`，`res`因此`cd_code`在 res 中没有。

如果您想访问`cd_code`from的计数，请`res`尝试以下操作：

```
 SELECT max(res.COUNT_CODE) 
          FROM
             (SELECT company, count(cd_code) AS COUNT_CODE 
              FROM production 
              GROUP BY company) as res; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:44:58.430

你能试试这个。

```
select max(cd_code) from (select company, count(cd_code) as cd_code from production  group by company); 
```

# javascript - onkeup 后的 javascript 延迟

> ID：13536037
> 
> 赞同：1
> 
> 时间：2012-11-23T21:41:20.773
> 
> 标签：javascript, jquery, events

所以参考这个： [如何延迟 .keyup() 处理程序直到用户停止输入？](https://stackoverflow.com/questions/1909441/jquery-keyup-delay)

我想出了以下代码。但它什么也没做......有什么建议吗？

如果用户进一步键入内容，我试图让 setTimeout 取消，这样就不会发生多个警报，只有当用户最终“停止”时才会发生警报（希望如此）。

谢谢！！

```
var t = 0;  
$('input').keyup(function(){
    clearTimeout(t);
    t = setTimeout(alert($('input').val()),1000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:42:30.517

代替

```
t = setTimeout(alert($('input').val()),1000); 
```

和

```
t = setTimeout(function(){alert($('input').val())},1000); 
```

您将输入的值传递给 setTimeout，而[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)需要一个函数（或它可以作为代码评估的字符串）作为第一个参数。

并将最后一行替换为，`});`以便代码编译。

[示范](http://jsfiddle.net/LupJx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:47:38.023

您无法获取元素列表的 .val() 。$('input') 正在选择屏幕上的*所有*输入，并且只会给出列表中第一个输入的值。

此代码应适用于所有输入，但仅在触发事件的那个上运行超时。

```
var t = 0;  
$('input').keyup(function(){
    var that = this;

    clearTimeout(t);
    t = setTimeout(function() {
        alert($(that).val());
    }, 1000);
} 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:55:36.557

为了防止在几个不同的输入上混淆，使用`this`参考，保持超时`data()`：

```
var out = $('#out');
$('input').keyup(function() {
    var $this = $(this);
    clearTimeout($this.data('timeout'));
    $this.data('timeout', setTimeout(function() {
        out.append($('<div>').text(($this.attr('id') + ': ' + $this.val())));
    }, 1000));
});​ 
```

[演示](http://jsfiddle.net/oceog/YAwXG/)

# android - Android 位图每像素分配 16 BYTES

> ID：13536042
> 
> 赞同：1
> 
> 时间：2012-11-23T21:41:29.603
> 
> 标签：android, graphics

我有一个从资源文件加载资源的程序（通过在布局文件中设置 android:src="@drawable/image" 。

图像为 800 x 1280 像素。当程序运行时，它会在堆上分配 16,384,000 字节，即每像素 16 字节。

我假设它应该默认为每个像素只使用 4 个字节的 RGB8888。任何人都知道我可以如何改变它以使用更少的内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:56:42.470

您的图像可能存储在不合适的文件夹中。如果您在低分辨率文件夹中有高分辨率图像，假设图像为 800 x 1280，并且您将其存储在 drawable 或 drawable-hdpi 中，Android 会将它们放大以匹配 xhdpi（尽管它们已经在 xhdpi 中，可以这么说）。缩放后的图像占用更多内存。

解决方案，将它们放在 drawable-xhdpi 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:59:03.203

您可以使用 BitmapFactory、Options 和 inSampleSize 导入它们以减少内存占用。

此外，这似乎是在移动屏幕上显示的非常高分辨率的图像，因此您还可以减小尺寸吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T18:34:09.427

检查有关每像素字节数的文档：http: [//developer.android.com/reference/android/graphics/Bitmap.Config.html](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)

您可以尝试使用 Color.RGB_565，但图像可能会丢失质量。

# android - 如何从 ESHA Research API 调用多种营养信息？(apid.esha.com)

> ID：13536054
> 
> 赞同：2
> 
> 时间：2012-11-23T21:42:46.033
> 
> 标签：android, api, http, rest, httpwebrequest

我想调用 ESHA Research 营养 RE​​ST API。我似乎无法弄清楚如何使用 ESHA REST API 调用多种营养素。到目前为止，我正在调用以下内容，并且只能检索卡路里、蛋白质或其他类型的营养信息。所以我希望有人有一次调用检索所有营养信息的经验。这可能吗？

这就是我调用 TWIX 营养素的方法

[http://api.esha.com/analysis?apikey=xxxx&fo=urn:uuid:81d268ac-f1dc-4991-98c1-1b4d3a5006da](http://api.esha.com/analysis?apikey=xxxx&fo=urn:uuid:81d268ac-f1dc-4991-98c1-1b4d3a5006da) （返回卡路里，请注意 api 密钥不是 xxxx 而是从 Esha 生成的密钥一旦你注册为开发人员）返回是 JSON 格式。

如果我想称胖，它将是以下 [http://api.esha.com/analysis?apikey=xxxx&fo=urn:uuid:81d268ac-f1dc-4991-98c1-1b4d3a5006da&n=urn:uuid:589294dc-3dcc-4b64 -be06-c07e7f65c4bd](http://api.esha.com/analysis?apikey=xxxx&fo=urn:uuid:81d268ac-f1dc-4991-98c1-1b4d3a5006da&n=urn:uuid:589294dc-3dcc-4b64-be06-c07e7f65c4bd)

我怎样才能打一次电话并获得特定食物 ID 的所有营养物质（如脂肪、卡路里、碳水化合物、维生素等）的回报？我已经研究并查看了一段时间，似乎无法找到答案。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:44:05.817

这可能没有多大帮助，但是您可以使用 f0、f1 等传递多种食物。这将为您提供一个**综合**营养列表（所有食物的营养总和），而不是多个营养列表。我也没有弄清楚，目前通过对每种食物进行单独调用来解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:00:42.330

从简要查看他们的文档来看，这看起来是一个设计得很糟糕的 API。话虽如此，您似乎可以通过调用[分析食物（HTTP POST）](http://developer.esha.com/docs/api/v1/FoodAnalysis#analyze-foods)端点来实现这一点。他们的文档使响应看起来像是包含所有已分析营养素的列表。

**编辑：**我玩弄了他们的 API，但无法让它返回包含多种营养素的响应。我请求的项目可能没有多个结果。虽然，同样有可能 API 被破坏并返回错误数据。您可能需要联系他们进行确认。

这是使用 curl 的示例请求：

```
curl -v "http://api.esha.com/analysis?apikey=XXXX" -H "Content-Type: application/json" -X POST -d '{ "items": [ { "id": "urn:uuid:eaa21583-13cc-4cd6-b8e1-8a2901cdcdff", "quantity": 0.75, "unit": "urn:uuid:dfad1d25-17ff-4201-bba0-0711e8b88c65" } ] }' | jsonpp 
```

# android - 如果我在操作栏中隐藏图标或应用程序名称，为什么栏会改变它们的位置

> ID：13536055
> 
> 赞同：1
> 
> 时间：2012-11-23T21:42:50.213
> 
> 标签：android, menu, android-actionbar

我使用 Eclipse 创建了一个新项目，并将主要活动的导航类型设置为选项卡和滑动。一切正常，但是当我添加这些以隐藏应用程序的图标和标题时

```
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayShowTitleEnabled(false); 
```

两个酒吧交换位置。请参阅下面的屏幕截图。

![前](../Images/77e667ffdfef528f3f95adde6e7cfc80.png) ![后](../Images/dca04aa01e9fa00017f32a5130c4340f.png)

有人可以向我解释一下吗？

谢谢你帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:05:54.827

这是一些行为，如果我没记错的话，它是在 ICS 中引入的，以支持我们最终没有使用的特定设计案例。这个想法是，在没有主页/向上功能或标题的情况下，选项卡会声明当前内容的标题，并比平时更能引导窗口的结构。这包括动作/动作溢出，因此它们显示在窗口结构层次结构中的选项卡下方。

我建议避免这种情况；如果您使用操作栏选项卡作为窗口的主要锚定元素而不是主页/向上和/或标题，请考虑使用[拆分操作栏。](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)请参阅 AOSP 人员和拨号器应用程序作为示例。

# javascript - 使用地址栏创建 Javascript POPUP

> ID：13536058
> 
> 赞同：0
> 
> 时间：2012-11-23T21:43:06.293
> 
> 标签：javascript, firefox, popupwindow, address-bar

我试图将弹出窗口链接添加为弹出窗口，而不是像这样的普通书签链接：

```
javascript:window.open('http://www.google.com','popupwindow','width=753,height=617') 
```

因此，当您将其放在地址栏中或作为书签时，它会将链接作为弹出窗口打开。到目前为止，我设法让它工作，但我所在的当前选项卡也加载了打印在页面上的这个：

```
[object Window] 
```

有没有办法阻止它影响当前页面？

我正在尝试这样做`Mozilla Firefox.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:49:50.070

你可以把它包起来[`void()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)

```
javascript:void(window.open('http://www.google.com','popupwindow','width=753,height=617')) 
```

`window.open`返回一个`Window`对象。然后将该结果写入页面。 `void()`将屏蔽`Window`并返回`undefined`，浏览器不会将其写入页面。

# mongodb - 使用 Scons 在基于 arm 的 Synology NAS 上构建 mongo-nonx86

> ID：13536059
> 
> 赞同：1
> 
> 时间：2012-11-23T21:43:20.907
> 
> 标签：mongodb, arm, scons

我有一个安装了 optware ipkg 的 Synology DS212j NAS（cpu Feroceon 88FR131 rev 1 (v5l)）。我正在尝试在其上构建 mongo-nonx86。

“scons all”给了我以下信息：

> scons: 读取 SConscript 文件...
> 
> scons 版本：2.0.1
> 
> python版本：2 5 6'最终'0
> 
> 检查 C++ 编译器是否正常工作
> 
> 检查 C 库 stdc++... 否
> 
> 找不到所需的 stdc++ 库

我安装了 stdc++ 库，也安装了 ssl。我的根本问题是我怎样才能让 scons 告诉我更多关于真正缺少的东西、它在哪里、它看起来如何等等。到目前为止，我还没有发现任何选项可以产生任何更有用的诊断输出？

显然，让 mongodb 在这个很棒的小盒子上工作的现成解决方案会更受欢迎:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:53:36.160

好吧，即使您确实安装了它，它似乎也不这么认为，这就是我会尝试做的，安装`libssl-dev`，然后尝试为 安装开发包`libstdc++`，即：libstdc++-dev。

然后看看能不能编译。

# php - 如何使用 curl 获取 JSON 响应

> ID：13536064
> 
> 赞同：5
> 
> 时间：2012-11-23T21:43:54.563
> 
> 标签：php, json, curl

嘿，我开始学习foursquare API，但我一直在获取访问令牌。这是我在 SO 中找到的代码的一部分。

```
 // build url
    $url = 'https://foursquare.com/oauth2/access_token';
    $url .= '?client_id='.CLIENT_ID;
    $url .= '&client_secret='.CLIENT_SECRET;
    $url .= '&grant_type=authorization_code';
    $url .= '&redirect_uri=**********/callback'; //change to your 4sq callback
    $url .= '&code='.$code;

    // call to https://foursquare.com/oauth2/access_token with $code
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_URL, $url);
    $result = curl_exec($ch); 
```

但是这不起作用，所以我试图找到错误。首先回显 $url 并手动单击该链接。它奏效了，foursquare 以 json 格式返回给我一个访问令牌。所以问题出在代码的卷曲部分。

你能找到我的错误吗？更重要的是，你能给我推荐一些研究 curl 的资源吗？

编辑：我做了一个 var_dump($result) 并且输出是 'boolean false'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T22:03:19.523

问题是 http* *s* *，尝试添加这些：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:49:02.910

如果它是一个 POST 请求，那么这是正确的方法：

```
$body.='client_id='.CLIENT_ID etc.
$c = curl_init ();
curl_setopt($c, CURLOPT_URL, $url);
curl_setopt ($c, CURLOPT_POST, true);
curl_setopt ($c, CURLOPT_POSTFIELDS, $body);
curl_setopt ($c, CURLOPT_RETURNTRANSFER, true);
$page = curl_exec ($c);
curl_close ($c); 
```

# javascript - && 声明 javascript 未评估

> ID：13536065
> 
> 赞同：0
> 
> 时间：2012-11-23T21:43:57.863
> 
> 标签：javascript

我尝试编写用于操作系统检测的 javascript 代码。我使用 navigator.appVersion 生成一个变量，然后对其进行评估。我在该变量上使用 indexOf 来评估 if else 语句。使用诸如“Windows”、“Linux”、“iPhone”之类的字符串变量......我评估了操作系统。在 Android 手机上，我观察到 navigator.appVersion 返回如下内容：

“5.0（Linux；U；Android .....）”

所以我生成了这个代码来解决这个问题：

```
<script type="text/javascript">
        var Windows="Windows";
        var Safari="Safari";
var OSName=navigator.appVersion;
alert(OSName);
function OS() {
if (OSName.indexOf(Linux)!=-1 && OSName.indexOf(Android)!=-1) {
        alert("Goooood");
} else {
    alert("Baddddd");
    }
}
</script> 
```

问题是 && 不评估（返回 Baddddd ...）。

任何线索都会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:47:16.963

从您提供的代码中，您尚未定义变量`Linux`和`Android`.

尝试

```
var Linux="Linux";
var Android="Android"; 
```

在您声明 Windows 和 Safari 之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:48:44.063

那是实际的代码吗？看起来您没有在 indexOf 检查中引用您的字符串？

```
I believe it should be:
if (OSName.indexOf('Linux')!=-1 && OSName.indexOf('Android')!=-1) { 
```

或者您的代码中没有显示 Linux 和 Android 字符串变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:48:26.230

```
<script type="text/javascript">
    var Windows="Windows";
    var Safari="Safari";
var OSName=navigator.appVersion;
alert(OSName);
function OS() {
if ((OSName.indexOf("Linux")!=-1) && (OSName.indexOf("Android")!=-1)) {
    alert("Goooood");
} else {
alert("Baddddd");
}
}
</script> 
```

# ruby-on-rails - 在生产中启动应用程序时出现 Bitly Gem/Oauth Gem 问题

> ID：13536074
> 
> 赞同：0
> 
> 时间：2012-11-23T21:44:58.837
> 
> 标签：ruby-on-rails, ruby, production-environment, unicorn

我正在尝试将我的 rails 应用程序部署到生产环境中，但是遇到了一些问题。我正在使用 Nginx 和 Unicorn，该应用程序已经在生产环境中运行了一段时间，但是今天早些时候我的托管服务提供商的硬件错误导致该站点关闭，并且在尝试恢复它时，独角兽错误日志中出现了以下错误：

```
E, [2012-11-23T21:30:03.291386 #4370] ERROR -- : reaped #<Process::Status: pid 7795 exit 1> worker=0
I, [2012-11-23T21:30:03.291819 #4370]  INFO -- : worker=0 spawning...
I, [2012-11-23T21:30:03.310884 #7801]  INFO -- : worker=0 spawned pid=7801
I, [2012-11-23T21:30:03.311488 #7801]  INFO -- : Refreshing Gem list
/home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/faraday-0.7.6/lib/faraday/connection.rb:1:in `require': no such file to load -- addressable/uri (LoadError)
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/faraday-0.7.6/lib/faraday/connection.rb:1:in `<top (required)>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/faraday-0.7.6/lib/faraday.rb:68:in `require'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/faraday-0.7.6/lib/faraday.rb:68:in `<top (required)>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/oauth2-0.5.2/lib/oauth2/client.rb:1:in `require'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/oauth2-0.5.2/lib/oauth2/client.rb:1:in `<top (required)>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/oauth2-0.5.2/lib/oauth2.rb:2:in `require'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/oauth2-0.5.2/lib/oauth2.rb:2:in `<top (required)>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/bitly-0.7.0/lib/bitly/v3.rb:5:in `require'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/bitly-0.7.0/lib/bitly/v3.rb:5:in `<top (required)>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/bitly-0.7.0/lib/bitly.rb:9:in `require'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/bitly-0.7.0/lib/bitly.rb:9:in `<top (required)>'
from /home/deployer/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
from /home/deployer/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /home/deployer/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
from /home/deployer/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require'
from /home/deployer/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
from /home/deployer/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
from /home/deployer/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
from /home/deployer/apps/stealthygecko/releases/20121123212740/config/application.rb:7:in `<top (required)>'
from /home/deployer/apps/stealthygecko/releases/20121123212740/config/environment.rb:2:in `require'
from /home/deployer/apps/stealthygecko/releases/20121123212740/config/environment.rb:2:in `<top (required)>'
from config.ru:4:in `require'
from config.ru:4:in `block in <main>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
from config.ru:1:in `new'
from config.ru:1:in `<main>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn.rb:44:in `eval'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn.rb:44:in `block in builder'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn/http_server.rb:694:in `call'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn/http_server.rb:694:in `build_app!'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn/http_server.rb:567:in `init_worker_process'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn/http_server.rb:587:in `worker_loop'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn/http_server.rb:487:in `spawn_missing_workers'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn/http_server.rb:498:in `maintain_worker_count'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/lib/unicorn/http_server.rb:272:in `join'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/gems/unicorn-4.2.1/bin/unicorn:121:in `<top (required)>'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
from /home/deployer/apps/stealthygecko/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>' 
```

这是我的 Gemfile：

```
gem 'rake'                                                                                                                                                                                                  
gem 'rails', '3.2.6'                                                                                                                                                                                        
gem 'mysql2'                                                                                                                                                                                                
gem 'bcrypt-ruby', '~> 3.0.0'                                                                                                                                                                               
gem 'gravtastic'                                                                                                                                                                                            
gem "friendly_id"                                                                                                                                                                                           
gem "videawesome"                                                                                                                                                                                           
gem "will_paginate", "~>3.0.3"                                                                                                                                                                              
gem "bitly"                                                                                                                                                                                                 
gem "sanitize"                                                                                                                                                                                              
gem "newrelic_rpm"                                                                                                                                                                                          
gem 'capistrano'                                                                                                                                                                                            
gem 'rvm-capistrano'                                                                                                                                                                                        
gem "unicorn", "~> 4.2.1"                                                                                                                                                                                   
gem "wysihtml5-rails", "~> 0.0.2"                                                                                                                                                                           
gem 'airbrake'                                                                                                                                                                                              

group :assets do                                                                                                                                                                                            
  gem 'less-rails'                                                                                                                                                                                          
  gem 'jquery-rails'                                                                                                                                                                                        
  gem 'therubyracer'                                                                                                                                                                                        
  gem 'uglifier'                                                                                                                                                                                            
  gem 'twitter-bootstrap-rails'                                                                                                                                                                             
end 
```

据我所知，它是需要 oauth 的 Bitly gem，这就是问题所在，但我不知道如何解决这个问题。如果有人可以提供帮助，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:58:23.207

看起来`faraday`gem 正在尝试要求`addressable/uri`，但这不在您的 Gemfile 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:10:43.567

经过几个小时或部署并据称无处可去，事实证明，我所要做的就是完全停止 Unicorn 并重新启动它，而不是重新启动它。它现在找到了所有必要的依赖项。

在这一切中让我感到困惑的是，我读到 Faradays 对 Addressable 的依赖已在 8 月被删除，所以我很自然地不知道为什么它仍然被引用。

感谢您的帮助 Ipwnstuff 非常感谢。

# matlab - 文件内容总和 matlab

> ID：13536082
> 
> 赞同：2
> 
> 时间：2012-11-23T21:45:54.997
> 
> 标签：matlab, matrix, rows

我想对我创建的文件求和`fprintf`。我有 5 个包含类似内容的文本文件（1 列 8 行）：

```
0.1811  
0.0889  
-0.1073  
-0.0777  
-0.0596  
0.0971  
0.1021  
0.3730 
```

我正在尝试将这些文件加载​​到工作区并对这些列求和。我可以对两个文件的列求和，但最后 3 个文件的总和仅适用于最后一行（第 8 行）。我知道这与加载和打开文件有关。最后两个文件加载了：

```
SumFid=fopen(MyFile,'a');   %this is how my 2 files work opened
FID=fopen(FirstFile);  
MatrixSub = load(FirstFile);  
m = textscan(FID,'%f %f %f %f %f %f %f');  
horzcat(m{:}) 
```

而对于我正在使用的其他 3 个文件：

```
Wfid=fopen(VFile,'a');  
Mat = load(VFile);  
VData = fscanf(Wfid,'%f',[8,1]); 
```

当我尝试使用与前两个相同`texscan`的`horzcat`方法时，它会给出*错误 out of memory*，但是对于后一个代码，它只会在我尝试时对这些文件内容的最后几行求和：

```
for i = i:8  
  Sum = A+B % this from first 2 files works  
  Sum3Files = file1+file2+files3;        
end 
```

我知道它看起来可能很微不足道，但我是 MATLAB 的新手，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:03:01.397

我认为这样的事情是你所追求的：

```
total = 0;
files = {'data.txt' 'data2.txt'};  % add more files here

for ii = 1:numel(files)

    fid = fopen(files{ii});
        C = textscan(fid, '');        
    fclose(fid);

    total = total + [C{:}];

end 
```

# coffeescript - 在浏览器中需要 CoffeeScript 文件

> ID：13536085
> 
> 赞同：1
> 
> 时间：2012-11-23T21:46:01.830
> 
> 标签：coffeescript, config, require

我正在尝试从一个单独的选项中获取一些选项`config.coffee`到我的 main`app.coffee`中。我尝试的方式不起作用，我只得到：

> ReferenceError：找不到变量：需要

这是我的两个文件，我真的希望你能帮助我。

```
# app.coffee
config = require './config.coffee'
console.log config.api_key

# config.coffee
exports.config =
  api_key: 'MY_SECRET_API_KEY' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:41:28.043

> 哦，我想如果我需要另一个文件并编译我的 app.coffee 它会被包含在内。有没有办法做到这一点，还是我必须将所有内容放在一个文件中？

您可能想要编辑您的问题以指定这一点。

有一些项目可以让您“要求”文件并引入构建步骤来将它们连接并缩小为一个文件。并非所有这些都遵循 Common/JS 模块规范。您还可以使用基于 AMD 的工具来异步加载文件。

## 链轮

它使用注释`#= require jquery`来要求其他文件，然后将它们编译成一个文件。虽然它针对基于 Rack 的应用程序，但它有一个命令行工具，您可以使用它来自动化该过程。

网址：[https ://github.com/sstephenson/sprockets](https://github.com/sstephenson/sprockets)

## 斯诺克

这是基于 Sprockets，但它在 Node.js 上运行

网址：[https ://github.com/TrevorBurnham/snockets](https://github.com/TrevorBurnham/snockets)

## 浏览器化

这是另一个基于 Node.js 的工具。

> 使用服务器端构建步骤使节点样式的 require() 在浏览器中工作，就像变魔术一样！

[https://github.com/substack/node-browserify](https://github.com/substack/node-browserify)

## 需要.JS

这是基于 AMD 的，因此它可以异步加载文件，但它也有一个可以连接文件的优化器。

* * *

我敢肯定还有很多。每个人都有自己的做事方式，您可以让他们使用 CoffeeScript。

# php - localhost 是否与 Apache 上的 /var/www/ 相同的域？

> ID：13536090
> 
> 赞同：1
> 
> 时间：2012-11-23T21:46:43.910
> 
> 标签：php, javascript, apache, xmlhttprequest

整个下午我一直在试图得到一个明确的答案，而互联网并没有太大帮助。

我有一个 html 页面，它使用将表单提交给 php 脚本，`XMLHttpRequest`但我收到一个空的`responseText`.

我已经测试了代码，现在我相信它与同源策略有关。但是如果两个脚本都保存在同一个文件夹（/var/www/）中，它们怎么可能不是同一个来源呢？（我可能遗漏了一些简单的东西。）

（规格：Ubuntu 12.04、Apache 2.2、PHP 5.3，在 Firefox 中测试）

谢谢！

# hibernate - 使用 Hibernate 删除一对多关系中的对象时 PostgreSQL 异常

> ID：13536092
> 
> 赞同：1
> 
> 时间：2012-11-23T21:46:51.783
> 
> 标签：hibernate, postgresql, hibernate-onetomany

我有非常简单的模式 - 一对多关系中的两个表：

```
<hibernate-mapping package="my.app">
    <class name="CorrelationKey" table="CORRELATION_KEYS">
        <id name="id" column="CORRELATION_ID">
            <generator class="native"/>
        </id>
        <set name="correlationKeyParts" cascade="all-delete-orphan" lazy="false">
            <key column="CORRELATION_ID"/>
            <one-to-many class="CorrelationKeyPart"/>
        </set>
        ...
    </class>
</hibernate-mapping> 
```

保存和更新类型的对象`CorrelationKey`可以正常工作，并且更改会传播到集合中。但是当我尝试删除一个`CorrelationKey`对象时，我收到以下错误：

```
108090 [main] ERROR org.hibernate.util.JDBCExceptionReporter  - ERROR: update or 
delete on table "correlation_keys" violates foreign key constraint "fk23630e23e9b29c52"
on table "correlation_key_parts"
 Detail: Key (correlation_id)=(162) is still referenced from table "correlation _key_parts". 
```

我在 Windows 机器上使用 PostgreSQL 9.1。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:03:10.990

当您执行这样的 DML 查询时，会话缓存、级联和版本检查将被完全绕过。查询直接转换为 SQL 查询并按原样执行。因此，您有责任首先删除（或修改）相关实体。如果要应用级联，则需要使用 Hibernate API：

```
List<CorrelationKey> allKeys = session.createQuery("select k from CorrelationKey k").list();
for (CorrelationKey key : allKeys) {
    session.delete(key);
} 
```

# url - 漂亮的面孔 jsf glassfish 不适合我

> ID：13536099
> 
> 赞同：1
> 
> 时间：2012-11-23T21:47:57.307
> 
> 标签：url, jsf-2, hide, glassfish-3, prettyfaces

我正在使用 GlassFishV3、JSF2、漂亮的面孔 3

我已经尝试了很多组合来摆脱我的 *.xhtml 扩展名或美化我的 URL，但我没有设法这样做。

如果您知道另一种解决方案，请给我一个示例，说明如何做到这一点，或者我的解决方案是否合理，请告诉我我是否出错了：

我按照[http://ocpsoft.org/prettyfaces/snd](http://ocpsoft.org/prettyfaces/)上的教程创建了一个只有一个 index.xhtml 的简单应用程序，并且我已经放置了 home.xhtml 的链接（两者都在 WebContent 中）。

*   我已经 dwl 罐子（我不使用 Maven），我把它放在 WEB-INF/lib
*   根据教程，我不需要更改我的 web.xml，因为在使用 GlassFishv3
*   我的 web.xml

    ```
    <?xml version="1.0" encoding="UTF-8"?><web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>extension</display-name>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>com.ocpsoft.pretty.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping></web-app> 
    ```

*   我的漂亮配置.xml

    ```
    <pretty-config xmlns="http://ocpsoft.com/prettyfaces/3.3.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://ocpsoft.com/prettyfaces/3.3.3 
    http://ocpsoft.com/xml/ns/prettyfaces/ocpsoft-pretty-faces-3.3.3.xsd ">

    <url-mapping id="home">
        <pattern value="/home" />
        <view-id value="/home.xhtml"/>
    </url-mapping> </pretty-config> 
    ```

    *   使用此配置，我不断收到 java.lang.StackOverflowError （与其他人或我的应用程序无法编译或我收到不同的错误）循环是

    在 com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308) 在 com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367) 在 com.sun.faces.facelets .impl.DefaultFacelet.include(DefaultFacelet.java:346) 在 com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199) 在 com.sun.faces.facelets.tag.ui.CompositionHandler.apply (CompositionHandler.java:155) 在 com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93) 在 com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)

    *   我的 index.xhtml 有效，但是当我单击链接时出现上述错误
    *   我没有豆子（另一个问题是，如果我设法让漂亮的面孔变得漂亮，我是否必须对映射的豆子进行任何注释）

    非常感谢您的宝贵时间！

修改：

*   我做了一个简单的网络应用程序来看看扩展的隐藏是如何工作的。index.xhtml

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"><ui:composition template="">
    <ui:define name="header">
        Add your header here or delete to use the default
    </ui:define>
    <ui:define name="content">
       <a id="home" href="home.xhtml">Home</a>
    </ui:define>
    <ui:define name="footer">
        Add your footer here or delete to use the default
    </ui:define></ui:composition> 
    ```

和 home.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="">
    <ui:define name="header">
        Add your header here or delete to use the default
    </ui:define>
    <ui:define name="content">
        home#######
    </ui:define>
    <ui:define name="footer">
        Add your footer here or delete to use the default
    </ui:define>
</ui:composition>
</html> 
```

现在如果我启动应用程序 127.0.01:8080/myapp 会立即出现错误 java.lang.StackOverflowError

但如果我简单地放入 index.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<h:body>
       <a id="home" href="home.xhtml">Home</a>
</h:body>
</html> 
```

在 home.xhtml 中

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<h:body>
HOME
</h:body>
</html> 
```

它可以工作，但扩展程序以 127.0.0.1:8080/myapp/ 开头，然后单击链接和 127.0.0.1:8080/myapp/home.xhtml

我想用模板做第一个索引和主页，因为我在一个已经有模板的网络应用程序上工作。CSS 使用“a href”标签中的 id="home"`t know if it is necesary, the id it`来格式化它，但我越来越绝望 :))

任何帮助，将不胜感激。谢谢！

### 修改

*   所以我又开始用一个简单的网络应用程序来看看漂亮的面孔是如何工作的
*   现在我不`t get any errors but I still can`改变我的网址
*   到目前为止我做了什么：

*   我把 pretty-faces-jsf-3.3.3.jar 放在 WEB-INF/lib

*   我把 WEB-INF pretty-config.xml

    ```
    <?xml version="1.0" encoding="UTF-8"?><pretty-config xmlns="http://ocpsoft.com/prettyfaces/3.3.3" 
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
               xsi:schemaLocation="http://ocpsoft.com/prettyfaces/3.3.3
                                        http://ocpsoft.com/xml/ns/prettyfaces/ocpsoft-pretty-faces-3.3.3.xsd">

    <url-mapping id="home">
        <pattern value="/home" />
        <view-id value="/home.xhtml" />
    </url-mapping> 
    ```

*   我的 web.xml

    ```
    <?xml version="1.0" encoding="UTF-8"?><web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>test</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>com.ocpsoft.pretty.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping></web-app> 
    ```

*   在 WEB-INF 我有 index.html、home.xhtml 和 template.xhtml

索引.html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<h:body>
    <a href="home.xhtml">HOME</a>
</h:body>
</html> 
```

主页.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/tempate.xhtml">
    <ui:define name="header">
        Add your header here or delete to use the default
    </ui:define>
    <ui:define name="content">
     ########################
    </ui:define>
    <ui:define name="footer">
        Add your footer here or delete to use the default
    </ui:define>
</ui:composition>
</html> 
```

模板.xhtml

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
  <title><ui:insert name="title">Default title</ui:insert></title>
</head>

<body>

<div id="header">
    <ui:insert name="header">
        Header area.  See comments below this line in the source.
        <!--  include your header file or uncomment the include below and create header.xhtml in this directory -->
        <!-- <ui:include src="header.xhtml"/> -->
    </ui:insert>
</div>

<div id="content">
  <ui:insert name="content">

                <ui:include src="home.xhtml" />

  </ui:insert>
</div>

<div id="footer">
  <ui:insert name="footer">
        Footer area.  See comments below this line in the source.
        <!--  include your header file or uncomment the include below and create footer.xhtml in this directory -->
        <!--<ui:include src="footer.xhtml"/>  -->
  </ui:insert> </div> </body></html> 
```

我没有用

```
 <web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5"><filter>
      <filter-name>Pretty Filter</filter-name>
      <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
      <async-supported>true</async-supported>
   </filter>

   <filter-mapping> 
      <filter-name>Pretty Filter</filter-name> 
      <url-pattern>/*</url-pattern> 
      <dispatcher>FORWARD</dispatcher> 
      <dispatcher>REQUEST</dispatcher> 
      <dispatcher>ERROR</dispatcher>
      <dispatcher>ASYNC</dispatcher>
   </filter-mapping></web-app> 
```

因为我使用 Glassfishv3

正如我所说，这是一个微不足道的网络应用程序，只是为了看看它是如何工作的。请帮助我理解为什么我有困难...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:04:40.720

我不认为这个问题与 PrettyFaces 有任何关系。stacktrace 仅显示一些与 Facelets 相关的内容：

```
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367) 
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346) 
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199) 
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155) 
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93) 
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86) 
```

我看到您使用的是空`template`属性：

```
<ui:composition template=""> 
```

如果不引用基本模板，您的页面将无法工作。我认为这可能会导致您遇到的错误。

顺便说一句：您可以在不使用 Facelets 模板的情况下测试 PrettyFaces。PrettyFaces 对模板一无所知。因此，如果它在没有模板的情况下工作，它也将与模板一起工作。:)

# php - CodeIgniter - 将 FlashData 与存储在数据库中的会话一起使用

> ID：13536101
> 
> 赞同：1
> 
> 时间：2012-11-23T21:48:01.507
> 
> 标签：php, codeigniter, session

我在 CI 上的配置非常标准。

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 0;
$config['sess_expire_on_close'] = TRUE;
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 2000; 
```

我不使用 expire 因为我正在测试系统，我知道这不是一个好习惯。我使用高 sess_time_to_update 因为 AJAX 请求破坏了会话（一个 CI 错误）。

我现在有一个新错误，我认为这与我的代码有关，但我不确定如何修复它。

我一直在使用一个数据库连接将会话存储在数据库中。显示错误消息的 flashdata 一直运行良好.. 直到最近。现在，当我引入第二个数据库连接时，不会设置 flashdata。

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'emp';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = FALSE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE;

$db['dil']['hostname'] = 'localhost';
$db['dil']['username'] = 'root';
$db['dil']['password'] = '';
$db['dil']['database'] = 'dil';
$db['dil']['dbdriver'] = 'mysql';
$db['dil']['dbprefix'] = '';
$db['dil']['pconnect'] = TRUE;
$db['dil']['db_debug'] = TRUE;
$db['dil']['cache_on'] = FALSE;
$db['dil']['cachedir'] = '';
$db['dil']['char_set'] = 'utf8';
$db['dil']['dbcollat'] = 'utf8_general_ci';
$db['dil']['swap_pre'] = '';
$db['dil']['autoinit'] = TRUE;
$db['dil']['stricton'] = FALSE; 
```

在我设置我的闪存数据后，我用 var_dump 和 print_r 显示它，它打印一个布尔值：false。当我不使用第二个连接时，它工作正常。有任何想法吗？有人说不要在数据库中存储会话，但我需要安全。

**更新：**我假设 set_flashdata 没有将它插入数据库，所以我检查以确定这就是问题所在。set_flashdata 没有插入闪存数据。具有两个连接的其他页面工作正常（通知）只是这个页面不是。

**更新 2：**当我设置 flashdata 并退出时；在我查看数据库后，出现一条消息：“您需要登录才能看到此页面”。这是在有人未登录时设置的。嗯..肯定发生了一些奇怪的事情......

**更新 3：**在 Core/libraries/session 文件中的 SESS_WRITE( 函数中使用 log_message(

```
ERROR - 2012-11-23 15:38:39 --> "logged_in";b:1;}
ERROR - 2012-11-23 15:38:39 -->"logged_in";b:1;s:22:"flash:new:notification";a:2:{s:4:"type";s:7:"success";s:7:"message";s:31:"Image was updated successfully.";}} 
```

**解决感谢mohan.gade** 我找到了解决方案。

当使用我设置的方式（默认、db1、db2 等）处理多个数据库时，当您将新数据库加载到变量中时，当您自动加载默认数据库时，它会重置 $this->db。

```
$this->db1 = $this->load->database('db1', TRUE); 
```

所以修复......虽然不好玩......是在使用多个连接时手动加载所有数据库。

```
$this->db = $this->load->database('default', TRUE);
$this->db1 = $this->load->database('db1', TRUE); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:04:44.387

你如何建立数据库连接？配置/自动加载库是否包含“数据库”？然后删除它。手动进行数据库连接。如果你需要同时连接多个数据库，你可以这样做： $emp = $this->load->database('emp', TRUE); $dil = $this->load->database('dil', TRUE); 并按照 $emp->query(); 的方式访问数据库函数；安装常规方法 $this->db->query() 了解更多详细信息，请访问[http://codeigniter.com/user_guide/database/connecting.html](http://codeigniter.com/user_guide/database/connecting.html)

# visual-c++ - 在一项任务中，我被要求编写一个程序，将歌词输出到墙上的 99 瓶啤酒中，

> ID：13536111
> 
> 赞同：2
> 
> 时间：2012-11-23T21:49:04.703
> 
> 标签：visual-c++

我似乎无法让它倒数最后一节。我试图创建一个减去 1 的新变量并将该变量放在最后一节中，它适用于除数字 9、19、29、39...99 之外的所有变量。有人可以给我一个提示或指出我正确的方向吗？我还尝试创建另一个循环来倒计时并从数组中读取它。我只学了几个月，不知道还能尝试什么。我想我一旦达到这一点，困难的部分就在我身后，至少对我来说不是那么多。谢谢你。它是 Visual Studio 2010 中的 c++。

```
#include <iostream>
#include <string>
using namespace std;

string tens[11] = {""," Ten"," Twenty"," Thirty"," Forty"," Fifty"," Sixty"," Seventy"," Eighty"," Ninety"};
string ones[10] = {"","-One","-Two","-Three","-Four","-Five","-Six","-Seven","-Eight","-Nine"};
string s_ones[11] = {" Zero"," One"," Two"," Three"," Four"," Five"," Six"," Seven"," Eight"," Nine"};
string other[ ] = {" Ten"," Eleven"," Twelve"," Thirteen"," Fourteen"," Fifteen"," Sixteen"," Seventeen"," Eighteen"," Nineteen",""};

int main()
{
    for(int i = 99; i >= 0; --i)
    {
        int tens_place = i / 10, ones_place = i % 10, small_ones_place = i % 10;

        if(10 <= i && i < 20)
        {
            cout << other[i - 10] << " bottles of beer on the wall. \n"
                 << other[i - 10] << " bottles of beer.\n"
                 << " Take one down, pass it around,\n"
                 << other[(i - 10)] << " bottles of beer on the wall.\n\n";
        }
        if(20 <= i && i <= 99)

            cout << tens[tens_place] + ones[ones_place] << " bottles of beer on the wall. \n"
                 << tens[tens_place] + ones[ones_place] << " bottles of beer.\n"
                 << " Take one down, pass it around,\n"
                 << tens[tens_place] + ones[ones_place] << " bottles of beer on the wall.\n\n";

        if(2 <= i && i < 10)

            cout << s_ones[small_ones_place] << " bottles of beer on the wall.\n"
                 << s_ones[small_ones_place] << " bottles of beer.\n"
                 << " Take one down, pass it around,\n"
                 << s_ones[small_ones_place] << " bottles of beer on the wall.\n\n";

        if(i == 1)

            cout << s_ones[small_ones_place] << " bottle of beer on the wall.\n"
                 << s_ones[small_ones_place] << " bottle of beer.\n"
                 << " Take one down, pass it around,\n"
                 << s_ones[small_ones_place] << " bottles of beer on the wall.\n\n";

        if(i == 0)

            cout << s_ones[small_ones_place] << " bottles of beer on the wall.\n"
                 << s_ones[small_ones_place] << " bottles of beer.\n"
                 << " Go to the store and get some more,\n"
                 << " Ninety-nine bottles of beer on the wall.\n\n";

        }
return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:00:12.410

它非常接近正常工作。您所要做的就是从最后一行的一个位置索引中减去 1。像这样：

```
<< " Take one down, pass it around,\n"
<< other[(i - 10)-1] << " bottles of beer on the wall.\n\n"; 
```

# html - 更改 HTML POST 端口

> ID：13536112
> 
> 赞同：3
> 
> 时间：2012-11-23T21:49:04.593
> 
> 标签：html, post

我在 HTML 文档中有一个表单，我想将其内容作为 POST 请求提交给服务器。但是，我想将 POST 请求发送到服务器上的端口 80 以外的端口。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T21:51:28.260

只需将其附加到操作中

`<form method="post" action="http://myserver.com:1234/postHandler.php"....`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:52:48.833

对的，这是可能的：

```
<form action="http:/myserver:7778/process" method="post"> 
```

# c# - 在嵌套母版页后面的子母版页代码不能正常工作

> ID：13536113
> 
> 赞同：1
> 
> 时间：2012-11-23T21:49:22.720
> 
> 标签：c#, master-pages

在嵌套母版页中，子母版页后面的代码无法正常工作..

如果我在文件后面的子母版页代码中调试并设置一个停止器，它不起作用..

以下是我的代码：

**这是主要的母版页html代码**

```
<%@ Master Language="C#" AutoEventWireup="true"
CodeFile="AdminMaster.master.cs"
Inherits="Admin_AdminMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
        <div class="mainouter">
            <div class="Contents">
                <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                </asp:ContentPlaceHolder>
            </div>
        </div>
    </form>
</body>
</html> 
```

**这是子母版页html代码**

```
<%@ Master Language="C#" MasterPageFile="~/Admin/AdminMaster.master"
AutoEventWireup="false"
CodeFile="AdCommercialDetail.master.cs" Inherits="Admin_AdCommercialDetail" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
</asp:Content>
<asp:Content ID="Content2"
ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <table style="width: 100%;">
        <tr>
            <td>
                <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
            </td>
            <td>
                fdgsdf
            </td>
            <td>
                dfgfdg
            </td>
        </tr>
    </table>
</asp:Content> 
```

**母版页后面的代码**

```
public partial class Admin_AdminMaster : System.Web.UI.MasterPage {
    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

**子母版页后面的代码**

```
public partial class Admin_AdCommercialDetail :
    System.Web.UI.MasterPage {
    SqlDatabase db = (SqlDatabase)DatabaseFactory.CreateDatabase("ConnectionString");
    protected void Page_Load(object sender, System.EventArgs e)
    {
        this.Label1.Text = "gfjhfhggggggggggggggggg";
        Label1.Text = "fgdjgjhghklgfsaddffgghhjjkdsdfghjk";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:28:52.873

在您的子母版中，将控件放置在 ContentPlaceHolder 之外，例如，

```
<%@ Master Language="C#" MasterPageFile="~/Admin/AdminMaster.master"
AutoEventWireup="false"
CodeFile="AdCommercialDetail.master.cs" Inherits="Admin_AdCommercialDetail" %>
    <table style="width: 100%;">
        <tr>
            <td>
                <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
            </td>
            <td>
                fdgsdf
            </td>
            <td>
                dfgfdg
            </td>
        </tr>
    </table>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
</asp:Content> 
```

# c++ - 矩阵类和 operator= 重载

> ID：13536115
> 
> 赞同：0
> 
> 时间：2012-11-23T21:49:48.287
> 
> 标签：c++, operator-overloading

我面临一个我自己无法解决的小问题。我正在编写一个程序，它在矩阵上实现非常简单的操作。问题是当我试图做这样的事情时：

```
Matrix first(5);
Matrix e;

first.identityMatrix();
e = first;
cout << first;
cout << e; 
```

**简短说明：**我想将方阵分配给没有维度的矩阵。

第二个 cout 没有显示任何内容。但是当我将**Matrix e()**更改为**Matrix e(5)**时，一切正常。我知道该错误存在于这段代码中：

```
Matrix& Matrix::operator=(const Matrix& tmp)
{
if (this->a==0 && this->b == 0)
{
    this->matrix = new double*[tmp.a];

    for (int i=0;i<tmp.a;i++)
        this->matrix[i] = new double[tmp.b];
} else {
    try {
        if (this->a!=tmp.a || this->b!=tmp.b)
            throw wrongSize();
    } catch (wrongSize& e) {
        e.message();
        throw;
    }
}

for (int i=0;i<tmp.a;i++)
{
    for (int j=0;j<tmp.b;j++)
    {
        this->matrix[i][j] = tmp.matrix[i][j];
    }
}

return *this;
} 
```

经过一些尝试，我猜想内存分配有问题，但我不确定。对我来说，它应该可以正常工作，因为我返回了对当前对象的引用。我认为构造函数也可能有用：

```
Matrix::Matrix()
{
a = 0;
b = 0;
matrix = NULL;
}

Matrix::Matrix(int a)
{
try {
    if (a==0)
        throw wrongRowOrColNumber();
} catch (wrongRowOrColNumber& e) {
    e.message();
    throw;
}
this->a = a;
this->b = a;
this->matrix = new double*[a];

for (int i=0;i<a;i++)
    matrix[i] = new double[a];
for (int i=0;i<a;i++)
    for (int j=0;j<a;j++)
        matrix[i][j] = 0;
}

Matrix::Matrix(int a, int b)
{
try {
    if (a==0 || b==0)
        throw wrongRowOrColNumber();
} catch (wrongRowOrColNumber& e) {
    e.message();
    throw;
}

if (a==b)
{
    try {
        if (a==0)
            throw wrongRowOrColNumber();
    } catch (wrongRowOrColNumber& e) {
        e.message();
        throw;
    }
    this->a = a;
    this->b = a;
    this->matrix = new double*[a];

    for (int i=0;i<a;i++)
        matrix[i] = new double[a];
    for (int i=0;i<a;i++)
        for (int j=0;j<a;j++)
            matrix[i][j] = 0;
} else {
    this->a = a;
    this->b = b;
    this->matrix = new double*[a];

    for (int i=0;i<a;i++)
        matrix[i] = new double[b];
    for (int i=0;i<a;i++)
        for (int j=0;j<b;j++)
            matrix[i][j] = 0;
}
} 
```

**运算符 <<:**

```
friend ostream& operator<<(ostream& buffer, const Matrix& tmp)
{
    for (int i=0;i<tmp.a;i++)
    {
        for (int j=0;j<tmp.b;j++)
        {
            buffer << tmp.matrix[i][j] << " ";
        }
        buffer << endl;
    }
    return buffer;
}; 
```

**身份矩阵：**

```
Matrix& Matrix::identityMatrix()
{
try {
    if (this->a!=this->b)
    {
        throw wrongSize();
    }
} catch (wrongSize& e) {
    e.message();
    throw wrongSize();
}
int row = this->a;

for (int i=0;i<row;i++)
{
    for (int j=0;j<row;j++)
    {
        if (i==j)
            this->matrix[i][j] = 1;
        else
            this->matrix[i][j] = 0;
    }
}

return *this;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T22:02:19.217

You throw an exception several times and catch it immediately after, just to show a message and rethrow. You can save the `try/catch`, if you just show the message and then throw the exception instead.

In your assignment operator, you must copy the dimensions `a` and `b` as well.

```
Matrix& Matrix::operator=(const Matrix& tmp)
{
    if (this->a==0 && this->b == 0)
    {
        this->a = tmp.a;
        this->b = tmp.b;

        this->matrix = new double*[tmp.a];
        ...
    }
    ...
} 
```

In your constructor `Matrix::Matrix(int a, int b)`, you have an `if (a == b) ... else`. You can remove the if part and just leave the else part. This way, you have less code and less potential for bugs.

# python - 使用 Python 从 Web 下载 csv 文件

> ID：13536118
> 
> 赞同：1
> 
> 时间：2012-11-23T21:49:49.893
> 
> 标签：python, url, csv, download

**目标**：希望使用 Python 自动从[http://www.tocom.or.jp/historical/download.html](http://www.tocom.or.jp/historical/download.html)下载各种 .csv 文件（虽然这不是主要问题）

**细节：特别**是，我正在尝试下载“Tick Data”的 csv 文件（从底部开始的第五个标题，可用 5 天。

**问题**：当我看到此网页的源代码时，查找“Tick Data”我看到了对这 5 个 .csv 文件的引用，但它们没有通常的 href 标签。当我使用 Python (urllib) 时，我需要知道这 5 个 .csv 文件的 URL，但不知道如何获取它们。

这不是 Python 本身的问题，而是关于如何找到一些可以从网页下载的 .csv 的 URL。因此，没有提供代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:55:00.283

该页面使用 JavaScript 创建 URL：

```
<select name="tick">
  <option value="TOCOMprice_20121122.csv">Nov 22, 2012</option>
  <option value="TOCOMprice_20121121.csv">Nov 21, 2012</option>
  <option value="TOCOMprice_20121120.csv">Nov 20, 2012</option>
  <option value="TOCOMprice_20121119.csv">Nov 19, 2012</option>
  <option value="TOCOMprice_20121116.csv">Nov 16, 2012</option>
</select>
  <input type="button" onClick="location.href='/data/tick/' + document.form.tick.value;" 
        value="Download" style="width:7em;" /> 
```

它结合了一个路径，浏览器将对当前站点使用该路径。所以每个网址都是：

```
http://www.tocom.or.jp + /data/tick/ + TOCOMprice_*yearmonthday*.csv 
```

从表面上看，数据仅涵盖工作日。

这些很容易拼凑成自动 URL：

```
import requests
from datetime import datetime, timedelta

start = datetime.now() - timedelta(days=1)
base = 'http://www.tocom.or.jp/data/tick/TOCOMprice_'

next = start
for i in range(5):
    r = requests.get(base + next.strftime('%Y%m%d') + '.csv')
    # Save r.content somewhere
    next += timedelta(days=1)
    while next.weekday() >= 5:  # Sat = 5, Sun = 6
        next += timedelta(days=1) 
```

我使用`requests`的是更易于使用的 API，但`urllib2`如果您愿意，也可以将其用于此任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:54:50.720

当您点击下载按钮时，使用带有开发工具的 Chrome、带有 Firebug 或[Fiddler](http://www.fiddler2.com/fiddler2/)的 Firefox 查看请求 URL。

（例如，我在 11 月 22 日看到这个：[http](http://www.tocom.or.jp/data/tick/TOCOMprice_20121122.csv) ://www.tocom.or.jp/data/tick/TOCOMprice_20121122.csv ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:59:35.420

您可以使用浏览器的开发者菜单等来确定下载链接。我使用 chrome，我显示链接是

[http://www.tocom.or.jp/data/souba_d/souba_d_20121126_20121123_0425.csv](http://www.tocom.or.jp/data/souba_d/souba_d_20121126_20121123_0425.csv)

该 URL 结构似乎很容易猜到，页面上还有另一个链接：

[http://www.tocom.or.jp/historical/keishiki_souba_d.html](http://www.tocom.or.jp/historical/keishiki_souba_d.html)

指示如何构建拉取。一个好的选择是以 5 分钟的间隔构建 csv 拉动。

祝你好运！

# ruby - 如何制作同时针对 MRI 和 JRuby 的 gem？

> ID：13536119
> 
> 赞同：6
> 
> 时间：2012-11-23T21:49:55.480
> 
> 标签：ruby, gem, jruby

我想制作一个 gem，当其他人尝试将它与 MRI 一起使用时，它将使用 C 代码，而当他们从 JRuby 使用它时，它将使用 Java 代码。

nokogiri 和 puma gems 做到了这一点，我浏览了他们的代码，但没有看到他们是如何实现的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T11:25:26.703

[这是通过使用 rvm（或其他类似工具在 rubies 之间切换）和rake-compiler](https://github.com/luislavena/rake-compiler)为您所针对的不同平台交叉编译 gem 来完成的。

该`gemspec`文件必须指定每个平台所需的文件；这是通过检查正在编译 gem 的平台来完成的：

```
Gem::Specification.new do |gem|
# . . .

  if RUBY_PLATFORM =~ /java/
    # package jars
    gem.files += ['lib/*.jar']
    # . . . 
  else
    # package C stuff
    gem.files += Dir['ext/**/*.c']
    # . . . 
    gem.extensions = Dir['ext/**/extconf.rb']
  end
end 
```

在`Rakefile`安装后`rake-compiler`，模式通常如下：

```
spec = Gem::Specification.load('hello_world.gemspec')

if RUBY_PLATFORM =~ /java/
  require 'rake/javaextensiontask'
  Rake::JavaExtensionTask.new('hello_world', spec)
else
  require 'rake/extensiontask'
  Rake::ExtensionTask.new('hello_world', spec)
end 
```

但是您可能需要针对不同平台执行特定任务。

使用 MRI，然后使用`rake native gem`;进行编译 使用 JRuby，`rake java gem`这就是像 rvm 这样的工具派上用场的地方。您最终会为您的 gem 获得不同的 gem 文件，每个平台一个，然后您可以将其作为 gem 发布。

有关更多详细信息，请参阅[rake-compiler 文档](https://github.com/luislavena/rake-compiler)，或查看执行相同操作的其他项目，例如[redcloth](https://github.com/jgarber/redcloth)或[pg_array_parser](https://github.com/dockyard/pg_array_parser)（我发现它们是比 nokogiri 更好的示例）。

# c - 为什么 fread_s 在此 C 代码中不起作用？

> ID：13536123
> 
> 赞同：0
> 
> 时间：2012-11-23T21:50:45.217
> 
> 标签：c, file, pointers, fread

尽管所有参数都是正确的，但它返回读取的项目的正确值，函数 fread_s 没有以“字节”为单位的任何内容，它是空的。当我交换 10485760 和 1 时它也是空的。有谁知道是什么导致了这个问题？文件完全没有问题。

```
float EncryptBig(CRYPTIN* handle)
{
    int i, index = 0;
    float calc;
    char* bytes;

    i = (handle->size - handle->huidig);
    if ((i-10485760) < 0)
    {
        bytes = (char*)malloc(i);
        if (bytes == NULL)
        {
            fcloseall();
            free(handle);
            return 100.0f;
        }

        fread_s(&bytes, i, 1, i, handle->bestand); // Here and down below
        fclose(handle->bestand);

        for (index = 0; index < i; index++)
        {
            __asm
            {
                mov         eax, dword ptr [bytes]  
                add         eax, dword ptr [index]  
                mov         cl, byte ptr [eax]
                xor         cl, 101
                xor         cl, 53
                not         cl
                mov         byte ptr [eax], cl 
                mov         eax, dword ptr [index]  
                add         eax, 1  
                mov         dword ptr [index], eax
            }
        }

        fwrite(bytes, 1, i, handle->nieuwbstnd);
        fclose(handle->nieuwbstnd);
        free(handle);
        free(bytes);

        return 100.0f;
    }

    if (handle->huidig == 0)
    {
        fseek(handle->bestand, 0, SEEK_SET);
        fseek(handle->nieuwbstnd, 0, SEEK_SET);
    }

    bytes = (char*)malloc(10485760);
    if (bytes == NULL)
    {
        fcloseall();
        free(handle);
        return 100.0f;
    }
    fread_s(bytes, 10485760, 10485760, 1, handle->bestand); // Here

    for (index = 0; index < 10485760; index++)
    {
        __asm
        {
            mov         eax, dword ptr [bytes]  
            add         eax, dword ptr [index]  
            mov         cl, byte ptr [eax]
            xor         cl, 101
            xor         cl, 53
            not         cl
            mov         byte ptr [eax], cl 
            mov         eax, dword ptr [index]  
            add         eax, 1  
            mov         dword ptr [index], eax
        }
    }

    fwrite(bytes, 1, 10485760, handle->bestand);
    free(bytes);
    handle->huidig += 10485760;
    handle->positie += 10485760;
    fseek(handle->bestand, handle->huidig, SEEK_SET);
    fseek(handle->nieuwbstnd, handle->positie, SEEK_SET);
    calc = (float)handle->huidig;
    calc /= (float)handle->size;
    calc *= 100.0f;

    if (calc >= 100.0)
    {
        fclose(handle->bestand);
        fclose(handle->nieuwbstnd);
        free(handle);
    }

    return calc;
} 
```

编辑：解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:13:01.090

```
bytes = (char*)malloc(i);
// etc.
fread_s(&bytes, i, 1, i, handle->bestand); // Here and down below 
```

你想要`bytes`在这里，而不是`&bytes`因为地址`bytes`是你的缓冲区所在的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:57:10.250

不确定这是否是您的具体问题，但*您*的代码有问题。

当您进行`fread`调用时，您指定要读取的“对象”数量和对象大小，然后`fread`将读取*到*那么多对象。但它会读取这些对象的*确切数量*。

因此，当您尝试从一个 7 字节文件中读取一百万个 1 字节对象时，您将获得其中的 7 个，并且返回码将反映这一点。但是，如果您尝试读取一百万字节的对象，您将一无所获，返回码将反映这一点。

我强调返回值的原因是您返回的对象可能比您想要的少（例如，如果您要求 1000 个单字节对象，而文件中只剩下 900 个），所以盲目地将*预期*数量写入输出文件是禁忌。您需要检查返回码并采取行动。

此外，正如评论者指出的那样，您似乎在您的一个输出语句中写回*输入文件：*

```
fwrite (bytes, 1, 10485760, handle->bestand); 
```

这不太可能结束:-)它可能应该是：

```
fwrite (bytes, 1, 10485760, handle->nieuwbstnd); 
```

# jquery - jQuery 监听跨度数的变化

> ID：13536137
> 
> 赞同：3
> 
> 时间：2012-11-23T21:52:45.440
> 
> 标签：jquery, bind, html

我在 span 元素中有一个经常变化的数字。我希望能够检测到这个数字的任何变化并将这个数字存储在一个变量中。

到目前为止，我已经尝试过：

```
var x = $('#mynum').text(); 
```

但是，此代码不会检测到任何更改 - 它仅在页面首次加载时获取值。

我也试过这个：

```
$('#mynum').bind('change',function(){

alert('wahoo!');   }); 
```

但是，我什至无法发出警报。

检测变化并将数字在变量发生变化时存储在变量中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:55:50.747

更改事件仅在表单字段模糊时从浏览器发生。如果您要更改脚本中跨度的值，则需要`$('#mynum').trigger('change');`. 然后您的绑定将起作用，假设在`#mynum`设置绑定时元素位于 DOM 中。如果不是，则绑定到一致的父元素并将其委托给`on`：

```
$('#myParentNode').on('change','#mynum', function() {
    alert('wahooo!');
}); 
```

# jquery - Jquery - 可重复的表单字段 - 添加不起作用

> ID：13536148
> 
> 赞同：0
> 
> 时间：2012-11-23T21:53:51.743
> 
> 标签：jquery

我对 JQuery 相当陌生，我正在尝试通过单击按钮添加多个表单字段。虽然我能够删除现有字段，但我无法添加新字段。

测试：http: [//jsfiddle.net/Z4kYf/](http://jsfiddle.net/Z4kYf/)

我的 HTML 代码是：

```
<div class="repeatable-wrap">
    <ul id="tracks-repeatable" class="repeatable-fields-list">
        <li>
            <input type="text" name="fr_options1" value="" size="200" />
            <a class="repeatable-field-remove button" href="#">REMOVE</a>
        </li>
    </ul>
</div>
<a class="repeatable-field-add button" href="#">ADD</a> 
```

和jQuery：

```
jQuery(function(jQuery) {
    jQuery('.repeatable-field-add').click(function() {
        var theField = jQuery(this).closest('div.repeatable-wrap').find('.repeatable-fields-list li:last').clone(true);
        var theLocation = jQuery(this).closest('div.repeatable-wrap').find('.repeatable-fields-list li:last');
        jQuery('input', theField).val('').attr('name', function(index, name) {
            return name.replace(/(\d+)/, function(fullMatch, n) {
                return Number(n) + 1;
            });
        });
        theField.insertAfter(theLocation, jQuery(this).closest('div.repeatable-wrap'));
        var fieldsCount = jQuery('.repeatable-field-remove').length;
        if (fieldsCount > 1) {
            jQuery('.repeatable-field-remove').css('display', 'inline');
        }
        return false;
    });

    jQuery('.repeatable-field-remove').click(function() {
        jQuery(this).parent().remove();
        var fieldsCount = jQuery('.repeatable-field-remove').length;
        if (fieldsCount == 1) {
            jQuery('.repeatable-field-remove').css('display', 'none');
        }
        return false;
    });
});​ 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:07:15.693

您的可重复字段添加链接位于可重复包装 div 之外，因此当您调用`.closest('div.repeatable-wrap')`它时找不到任何内容。

将它移动到 div 中会让你走上正确的轨道 - [http://jsfiddle.net/Z4kYf/1/](http://jsfiddle.net/Z4kYf/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:09:00.473

小鸡这个代码....

```
 jQuery(function(jQuery) {
jQuery('.repeatable-field-add').click(function() { 
var theField = jQuery('div.repeatable-wrap').find('.repeatable-fields-list li:last').clone(true);

  //   console.log(theField);
    var theLocation = jQuery('div.repeatable-wrap').find('.repeatable-fields-list li:last');
    jQuery('input', theField).val('').attr('name', function(index, name) {
        return name.replace(/(\d+)/, function(fullMatch, n) {
            return Number(n) + 1;
        });
    });
    theField.insertAfter(theLocation, jQuery(this).closest('div.repeatable-wrap'));
    var fieldsCount = jQuery('.repeatable-field-remove').length;
    if (fieldsCount > 1) {
        jQuery('.repeatable-field-remove').css('display', 'inline');
    }
    return false;
});

jQuery('.repeatable-field-remove').click(function() {
    jQuery(this).parent().remove();
    var fieldsCount = jQuery('.repeatable-field-remove').length;
    if (fieldsCount == 1) {
        jQuery('.repeatable-field-remove').css('display', 'none');
    }
    return false;
});
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T22:47:23.337

我的看法：

[http://jsfiddle.net/hUrZB/](http://jsfiddle.net/hUrZB/)

```
<ul class='list'><li class='repeat'>
    <input type='text' name="options"/>
    <input class='remove' type='button' value="remove"/>
    <li>
</ul>
        <input class='add' type='button' value='add'/>

$(function() {
    var list = $(".list");
    var repeatable = $("li.repeat").clone(true);
    repeatable.on("click", ".remove", function(e) {
        $(this).parent(".repeat").remove()
    });
    var add = $(".add");
    add.click(function(){`enter code here`
        r = $(repeatable).clone(true);
        r.find("[name=options]").attr("value","something");
        list.append(r);
    });
    $(".repeat").remove();
    list.append(repeatable);
});​ 
```

# logback - 如何更改 logback 的 FileAppender 使用的 BufferedOutputStream 的底层缓冲区大小？

> ID：13536150
> 
> 赞同：2
> 
> 时间：2012-11-23T21:54:05.323
> 
> 标签：logback, rollingfileappender, fileappender, bufferedoutputstream

我们使用 logback 作为我们的日志框架。我们注意到 FileAppender 使用由 BufferedOutputStream 支持的 ResilientFileOutputStream。我们想知道是否有办法配置这个 BufferedOutputStream 实例的缓冲区大小，以便我们可以调整 logback 的性能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:59:00.563

我记得，BufferedOutputStream 默认使用 8192 的 buf 大小。我记得一份性能试卷，他们显示 8192 是性能最高的。提高超过8192的大小没有意义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T23:08:55.880

这是一个有趣的信息。查看源代码，按照您的建议，缓冲区大小默认为 8192（[http://docs.oracle.com/javase/6/docs/api/java/io/BufferedOutputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedOutputStream.html)）。在 Java 4 中，Javadoc 表明它是 512。Java 6 和 7 中的 Javadoc 中的信息已经消失。

# php - php.ini 文件可以在目录级别使用吗？

> ID：13536151
> 
> 赞同：1
> 
> 时间：2012-11-23T21:54:08.673
> 
> 标签：php, ini

我想知道是否可以在目录级别使用 php.ini 文件？具体来说，我有一个域指向子目录中的虚拟文档根目录，并且想要覆盖之前在物理根目录中的 php.ini 文件中定义的一些 php.ini 值。

这是否可以简单地通过在子目录中的新 php.ini 中重新定义这些值？我试图避免在`.htaccess`文件中定义这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:07:58.927

In general no, but in special (CGI/FastCGI) yes: [http://php.net/configuration.file.per-user](http://php.net/configuration.file.per-user)

> Since PHP 5.3.0, PHP includes support for .htaccess-style INI files on a per-directory basis. These files are processed only by the CGI/FastCGI SAPI. This functionality obsoletes the PECL htscanner extension. If you are using Apache, use .htaccess files for the same effect.
> 
> In addition to the main php.ini file, PHP scans for INI files in each directory, starting with the directory of the requested PHP file, and working its way up to the current document root (as set in $_SERVER['DOCUMENT_ROOT']). In case the PHP file is outside the document root, only its directory is scanned.

You can only set a limited subset of the ini-options in the user-ini-file. If you are hosting several independent sites on one server, you should consider FastCGI anyway, to keep them separated. With `php5-fpm` it's very easy to setup many pools of workers.

# scala - 找不到 java.util.Date 类型的 Json 反序列化器

> ID：13536152
> 
> 赞同：8
> 
> 时间：2012-11-23T21:54:26.737
> 
> 标签：scala, playframework

我正在处理以下代码行。

```
val list = Car.getNames()
Ok(Json.toJson(list)) 
```

我收到以下错误....

> [错误] my_app/app/models/Car.scala:51: 找不到 java.util.Date 类型的 Json 反序列化器。尝试为此类型实现隐式读取或格式。

`Car`将`java.util.date`对象作为参数之一，我实现了*读取*和*写入*以支持该`java.util.date`对象，因为`import play.api.libs.json.*`不支持它。

你能指出我的错误吗？

```
implicit object CarFormat extends Format[Car] {

    def reads(json: JsValue): Car = Car(
      (json \ "id").as[Long],
      (json \ "height").as[Double],
      (json \ "weight").as[Double],
      (json \ "date").asOpt[java.util.Date]
    )   

    def writes(car: Car) = 
        JsObject(
            Seq(
                "id" -> JsString(car.id.toString),
                "height" -> JsString(car.height.toString),
                "weight" -> JsString(car.weight.toString),
                "date" -> JsString(car.date.toString)
            )   
        )   
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T04:04:57.627

您只定义`Format`了 for`Car`但它需要一个`Format`for `java.util.Date`。尝试这个：

```
import play.api.libs.json._

case class Car(id:Long, height:Double, weight:Double, date:Option[java.util.Date])

implicit object CarFormat extends Format[Car] {

  implicit object DateFormat extends Format[java.util.Date] {
    val format = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss")
    def reads(json:JsValue): java.util.Date = format.parse(json.as[String])
    def writes(date:java.util.Date) = JsString(format.format(date))
  }

  def reads(json: JsValue): Car = Car(
    (json \ "id").as[Long],
    (json \ "height").as[Double],
    (json \ "weight").as[Double],
    (json \ "date").asOpt[java.util.Date]
  )   

  def writes(car: Car) = 
    JsObject(
        Seq(
            "id" -> JsString(car.id.toString),
            "height" -> JsString(car.height.toString),
            "weight" -> JsString(car.weight.toString),
            "date" -> JsString(car.date.toString)
        )   
    )   
} 
```

# file - 删除终端中的文件路径并仅显示一个文件夹

> ID：13536154
> 
> 赞同：0
> 
> 时间：2012-11-23T21:54:28.203
> 
> 标签：file, path, terminal, toggle, iterm

因此，要开始我的工作，我通常必须 cd 进入 iterm2 中的特定文件夹。Sorta 看起来像这样 [johnson@david-MacBook-Pro /Applications/MAMP/htdocs/demoapp] 16:41:32 $

如您所见，这在该死的窗户中占据了大量空间。如何删除路径的名称并让它像这个 demoapp ->

我在视频教程中看到过这一点，屏幕上唯一的内容是该人所在的文件夹或目录的名称，没有所有额外信息。显然这是一个 Mac 特定的问题。是否可以在显示完整路径和仅显示特定路径之间切换以供快速参考？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:05:29.103

When one uses a Terminal (in Linux or Mac) initiated as root, only the actual directory is shown. In my case (using Linux Mint), if I start a normal Terminal, and use the command su to login as root, the complete path changes to the actual directory.

Try this: a) write su on the Terminal b) enter... c) it asks for the root password, write it and press enter again.

# webforms - 使用什么 DataAnnotation 来制作 SQL Identity 列？

> ID：13536166
> 
> 赞同：3
> 
> 时间：2012-11-23T21:55:31.200
> 
> 标签：webforms, entity-framework-5

我的课堂上有以下内容，需要知道如何修改 DataAnnotation 以使其成为标识列

```
public class Item
{
    public Int16 ItemID { get; set; }
} 
```

目标是让 EF5.0 等效于 SQL

```
ItemID smallint IDENTITY(0,1) NOT NULL, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T22:44:58.603

您可以将 DatabaseGenerated 属性与 DatabaseGeneratedOption.Identity 一起使用。您可以在此处找到有关使用属性配置 EF 的更多详细信息[http://msdn.microsoft.com/en-us/data/jj591583](http://msdn.microsoft.com/en-us/data/jj591583)和有关 DatabaseGnerationOption 枚举的更多详细信息：http: [//msdn.microsoft.com/en-us/library/ system.componentmodel.dataannotations.schema.databasegeneratedoption.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedoption.aspx)。您还可以使用 Fluent API 配置您的模型 - 这里有一些示例[http://msdn.microsoft.com/en-us/data/jj591617](http://msdn.microsoft.com/en-us/data/jj591617)

# firefox - FreeTextBox (FTB) 在 FF 17 中不起作用

> ID：13536167
> 
> 赞同：0
> 
> 时间：2012-11-23T21:55:31.653
> 
> 标签：firefox, freetextbox

FreeTextBox (http://www.freetextbox.com/demos/) 在 Firefox 17 中不起作用。发生了什么变化？FTB 在以前的 Firefox 版本和其他浏览器的所有版本中都能正常工作。（FreeTextBox 开发已终止：“请注意，FreeTextBox 已停产。您仍然可以购买该软件，但它被视为不受支持。”）有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:20:22.240

解决。问题是，FTB 预计 userAgent 字符串部分“Gecko/date”中的值，然后解析、创建一个日期对象并比较返回的日期是否大于允许的日期。但是，因为 Firefox 现在 17 使用的值更改为“Gecko/17.0”，所以会发生异常并且变量 isMozillaEditor 未赋值为 true（这是在文件 BrowserInfo.cs 中完成的）。因此，FTB 不会启动。

# algorithm - Go 中的容器类型

> ID：13536173
> 
> 赞同：6
> 
> 时间：2012-11-23T21:55:54.777
> 
> 标签：algorithm, data-structures, go, containers

我试图让自己熟悉 Go，因此试图实现一些搜索功能，但查看容器类型的文档，没有一个内置类型实现`contains`方法。我是否遗漏了什么，如果没有，我该如何进行会员资格测试？我必须实现自己的方法还是必须遍历所有元素。如果是这样，那么省略这种容器类型的基本方法背后的基本原理是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T22:04:55.467

标准库的容器类型要求您在拉出元素时进行类型断言。容器本身无法对成员资格进行测试，因为它们不知道它们所包含的类型并且无法进行比较。

Ric Szopa 的跳过列表实现可能正是您想要的。它有一个 Set 类型，它实现了 Contains 方法。

[https://github.com/ryszard/goskiplist](https://github.com/ryszard/goskiplist)

我一直在生产中使用它并且对它非常满意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T22:38:41.733

地图是一种内置类型，它具有“包含”结构，而不是方法。

[http://play.golang.org/p/ddpmiskxqS](http://play.golang.org/p/ddpmiskxqS)

```
package main

import (
    "fmt"
)

func main() {
    a := map[string]string{"foo": "bar"}
    _, k := a["asd"]
    fmt.Println(k)
    _, k = a["foo"]
    fmt.Println(k)
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T15:04:55.970

使用 container/list 包，您可以编写自己的循环来搜索事物。正如 Dystroy 所说，没有在包中提供这个的原因可能是隐藏了 O(n) 操作。

您无法添加方法，因此您只需编写一个循环。

```
for e := l.Front(); e != nil; e = e.Next() {
    data := e.Value.(dataType) // type assertion
    if /* test on data */ {
        // do something
        break
    }
} 
```

它很简单，O(n) 复杂度是显而易见的。

In your review of data structures supplied with Go that support searching, don't miss the sort package. Functions there allow a slice to be sorted in O(n log(n)) and then binary searched in O(log(n)) time.

Finally as Daniel suggested, consider third-party packages. There are some popular and mature packages for container types.

# svn - 无法将 Souceforge 颠覆项目导入 Netbeans

> ID：13536174
> 
> 赞同：1
> 
> 时间：2012-11-23T21:56:25.647
> 
> 标签：svn, netbeans, sourceforge

在过去的 6 个月里，我一直在将 Sourceforge 与 Subversion 一起用于一些项目。一周前，我在笔记本电脑（Linux Mint 和 Windows 7）上安装了新的双启动系统。我通常在两个系统上工作我的项目。我只是尝试结帐以将项目 A 导入 Netbeans（我的 Netbeans 版本是 x64 java jdk 7 + netbeans），结果是 Netbeans 询问我是否想使用现有资源创建一个新项目。我单击了确定，但新项目的创建没有存储库中的项目内容。我确定存储库没问题，我访问了它，它仍然有代码，但由于某种原因我无法将它导入 Netbeans。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T18:57:17.003

我修好了它。问题是我的帐户已注销，因此我使用 Sourceforge 项目的公共链接与 Netbeans 同步。

# xaml - DesignInstance 在现代 UI 中不起作用

> ID：13536178
> 
> 赞同：1
> 
> 时间：2012-11-23T21:56:51.723
> 
> 标签：xaml, design-time

```
d:DataContext="{d:DesignInstance vm:MyViewModelSampleData, IsDesignTimeCreatable=True}" 
```

适用于 WPF 和 WP8，但奇怪的是不适用于我的 Windows Store 应用程序。在其中，我设置了 Items = .... 但它们从未出现在 Blend 或 VS2012 中。有小费吗？

# c# - 创建不同的数组：不显示正确的结果

> ID：13536184
> 
> 赞同：0
> 
> 时间：2012-11-23T21:58:12.917
> 
> 标签：c#, arrays, winforms, sorting

我目前正在构建一个排序程序。我已经做了三种不同的方法来创建一个数组`Random`：`In Order`和`Reverse`。我目前遇到了`In Order`和`Reverse`数组的问题。每次`In Order`创建数组时，它都以 a 开头`1`，我不知道为什么会这样做。此外，我的`Reverse`数组不会每次都显示乱序的数字，而是在单击后显示。我该如何解决这两个问题？

```
namespace sortingMachine
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        //Class Level Variables --------------------------------------------------------------------------------------

        Stopwatch sw = new Stopwatch();
        Random r = new Random();
        OpenFileDialog open1 = new OpenFileDialog();

        long operations = 0;
        int size;
        int max;
        int[] createArray;
        int[] sortArray;
        int[] copyArray;

        //Create Array Methods --------------------------------------------------------------------------------------

        public void RandomNumber()
        {
            size = Convert.ToInt32(textBoxSize.Text);
            max = Convert.ToInt32(textBoxMax.Text);
            createArray = new int[size];
            copyArray = new int[size];
            sortArray = new int[size];

            for (int i = 0; i < size; i++)
            {
                createArray[i] = r.Next(1, max);
            }

            textBoxResults.AppendText("-------------------------------------------------------------------------------" + Environment.NewLine + "Random" + Environment.NewLine + Environment.NewLine);

            DisplayArrays();
        }

        public void InOrder()
        {
            size = Convert.ToInt32(textBoxSize.Text);
            max = Convert.ToInt32(textBoxMax.Text);
            createArray = new int[size];
            copyArray = new int[size];
            sortArray = new int[size];

            createArray[0] = 1;

            for (int i = 1; i < size; i++)
            {
                createArray[i] = createArray[i - 1] + r.Next(1, max);
            }

            for (int i = 1; i < size; i++)
            {
                if (r.Next(1, 101) < Convert.ToInt32(textBoxPercentage.Text))
                {
                    for (int x = 1; x < size; x++)
                    {
                        createArray[x] = r.Next(1, createArray[size - 1]);
                    }
                }
            }

            textBoxResults.AppendText("-------------------------------------------------------------------------------" + Environment.NewLine + "In Order" + Environment.NewLine + Environment.NewLine);

            DisplayArrays();
        }

        public void ReverseOrder()
        {
            size = Convert.ToInt32(textBoxSize.Text);
            max = Convert.ToInt32(textBoxMax.Text);
            createArray = new int[size];
            copyArray = new int[size];
            sortArray = new int[size];

            createArray[size - 1] = 1;

            for (int i = size - 1; i > 0; i--)
            {
                createArray[i - 1] = createArray[i] + r.Next(1, max);
            }

            for (int i = size - 1; i > 0; i--)
            {
                if (r.Next(1, 101) < createArray[0])
                {
                    for (int x = size - 1; x > 0; x--)
                    {
                        createArray[x] = r.Next(1, createArray[0]);
                    }
                }
            }

            textBoxResults.AppendText("-------------------------------------------------------------------------------" + Environment.NewLine + "Reverse Order" + Environment.NewLine + Environment.NewLine);

            DisplayArrays();
        }

        private void buttonCreateArray_Click(object sender, EventArgs e)
        {

            if ((textBoxSortKey.Text != "") && (textBoxCreateKey.Text != ""))
            {
                if (radioButtonRandom.Checked == true)
                {
                    RandomNumber();
                }

                if (radioButtonInOrder.Checked == true)
                {
                    InOrder();
                }

                if (radioButtonReverseOrder.Checked == true)
                {
                    ReverseOrder();
                }
            }
            else
            {
                MessageBox.Show("Type a key into the Key textbox.");
            }
        }

    }
} 
```

**显示结果：**

*订单数组我不确定为什么它总是以一个开头：*

```
-------------------------------------------------------------------------------
In Order
1
2
4
6
10 
```

*有时逆序数组会是这样的：*

```
-------------------------------------------------------------------------------

    Reverse Order
    10
    2
    7
    6
    5 
```

窗体：

![在此处输入图像描述](../Images/38ca426eed904231d04b20bf68f05d0f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:55:27.990

如果您查看如何为数组分配值，您会发现第一个元素被分配为零，但在您的循环中，您从第二个元素（即`1`）开始，因此您永远不会重新分配第一个元素。

```
 createArray[0] = 1;

        for (int i = 1; i < size; i++)
        {
            createArray[i] = createArray[i - 1] + r.Next(1, max);
        } 
```

尝试像这样编写第一个元素分配：

```
 createArray[0] = r.Next(1, max); 
```

至于您的反向功能，那里有太多的怪异之处，无法真正看到您要做什么。试着多思考几次。尤其要小心这样的代码：`if (r.Next(1, 101) < createArray[0])`- 它有随机行为和幻数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:42:46.047

在函数 InOrder 中，您将数组的第一个索引初始化为 1。至于反向顺序，在两个 fors 之间的*if*语句中，每次将 1-101 之间的随机数与数组中的第一个数字进行比较. 相反，您应该做的是将数组中的数字相互比较。

# excel - 检查单元格值类型的宏

> ID：13536186
> 
> 赞同：0
> 
> 时间：2012-11-23T21:58:19.167
> 
> 标签：excel, vba

我有以下问题。我想用宏检查Excel中单元格范围内的某个单元格是否包含日期值（短日期即`12.3.2012`）或特定单词。

我将尝试使用以下示例代码来解释自己：

```
Private Sub typedata()
Dim x, y
For x = 12 To 13
 For y = 16 To 71

 If isDate(Cells(x, y)) <> True then
    MsgBox "Please enter correct data"
    Exit Sub
 elseIF Cells(x,y) <> "certain word" Then
    MsgBox "Please enter correct data"
    Exit Sub
 End If

 Next y
Next x
End Sub 
```

我将不胜感激找到正确代码的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:39:59.653

首先，我怀疑（但不确定）你的 x 和 y 的方向是错误的。Cells 函数使用参数（行、列），很少有非常短的数据范围（第 12 到 13 行）但非常宽的数据范围（第 16 到 71 列）。（您的代码可能是正确的，我只是注意到它不寻常，您可能想检查一下。）

您真正需要的是 And 运算符，但要注意的另一件事是特定单词 test 将区分大小写。因此，我通常通过将两者都转换为大写来进行比较。

最后，您可能想告诉用户问题到底出在哪里。

此外，我建议您将变量声明为一种类型，以避免变体转换为整数的成本。我总是在 VBA（不是 VB.Net）中使用 Longs 而不是整数，因为 Ints 无论如何都会在内部转换为 longs。

这是快速、肮脏且仅经过少量测试的方法，但应该为您指明正确的方向：

```
Private Sub typedata()
Dim x As Long, y As Long
For x = 12 To 13

    For y = 16 To 71

        If IsDate(Cells(x, y)) <> True And UCase(Cells(x, y)) <> UCase("certain word") Then
            MsgBox "Please enter correct data into cell " & Cells(x, y).Address
            Exit Sub
        End If

    Next y
Next x

End Sub 
```

# c# - 检查是否按下了 3 个键

> ID：13536187
> 
> 赞同：1
> 
> 时间：2012-11-23T21:58:19.667
> 
> 标签：c#, keypress, hotkeys

我正在使用 Visual Studio 2010 在 C# 中制作一个应用程序。它是一个 Windows 窗体应用程序

我想要做的是在按下 3 个键时触发一个功能。键是 CTRL、SHIFT 和 X。

我现在有这个代码：

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
        {
            Console.WriteLine(e.KeyValue);
            /*
             *KeyValue:
             *CTRL = 17
             *Shift = 16
             *X = 88
             */
         } 
```

正如你所看到的，它非常空旷。这是因为我不知道了。

我在互联网上找到了这段代码，但不知道如何实现它：

```
[DllImport("user32.dll")]
        public static extern int GetKeyboardState(byte[] keystate);

        private void Form1_KeyDown(object sender, KeyEventArgs e)
        {
            byte[] keys = new byte[255];

            GetKeyboardState(keys);

            if (keys[(int)Keys.Up] == 129 && keys[(int)Keys.Right] == 129)
            {
                Console.WriteLine("Up Arrow key and Right Arrow key down.");
            }
        } 
```

所以我对你们的问题是，我如何检查是否同时按下了所有树键？

或者，如果您知道制作这样一个热键的更好方法，那会是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T22:02:20.373

在 CTRL+SHIFT+X 的情况下，只有 X 才是真正的正确键；其他的是“修饰符”键。所以不需要打破 P/Invoke :-) 只需在您的 Key_Down 处理程序中执行此操作：

```
if (e.KeyCode == Keys.X && e.Control && e.Shift) {
    // CTRL+SHIFT+X was pressed!
} 
```

# wordpress - wp_logout_url 不起作用

> ID：13536188
> 
> 赞同：1
> 
> 时间：2012-11-23T21:58:21.647
> 
> 标签：wordpress, logout

我目前正在WordPress上建立一个网站。我有一个注销链接（在 .. 标签内）。当用户单击它时，它应该注销并重定向到当前页面。

我用过 ：

```
 <a id="logout-submit" href="<?php echo wp_logout_url(get_permalink());?>">Log Out</a> 
```

但这似乎无法正常工作。当我点击链接时，什么也没有发生。当我右键单击链接并在新选项卡中打开时，用户已注销。请告诉我我应该如何纠正这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T01:42:08.013

使用类似的东西：

```
<?php echo wp_logout_url( $_SERVER['REQUEST_URI'] ); ?> 
```

有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:38:56.720

尝试这个：

```
<a id="logout-submit" href="<?php echo wp_logout_url();?>">Log Out</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T19:04:38.043

这是使用 get_permalink() 时要考虑的一个好点；请注意，当在没有 ID 参数的帖子页面（索引、存档等）的循环之外使用时，它将返回循环中最后一篇帖子的 URL，而不是当前页面的永久链接。- [https://developer.wordpress.org/reference/functions/get_permalink/](https://developer.wordpress.org/reference/functions/get_permalink/)

我也在使用：`<a href="<?php echo wp_logout_url();?>">Log Out</a>`. 它正确地回显了正确的注销 url，但我没有注销我，而是得到了白屏死机。这不是 pulgin 问题，它仅在尝试注销时发生（无论我在哪里尝试注销）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-19T15:12:07.083

```
<?php
/*
Template Name:  RA_Cikis_Yap
File:           RA_Cikis_Yap.php
Site:           RanaAJANS.com
User:           Rana ERDOĞAN & Ümüt DEMİR
Date:           2020.04.20 20:20:20
Page properties -> Template -> RA_Cikis_Yap.php
*/

session_start();
ob_start();
    $user_id = get_current_user_id();
#    echo $user_id."<br>";
#    echo "<pre>";
#    var_dump(is_user_logged_in());
#    echo "</pre>";    
wp_logout();
session_unset();
session_destroy(); 
wp_destroy_current_session();
wp_clear_auth_cookie();
wp_set_current_user( 0 );
update_user_meta( $user_id, 'session_tokens', mb_strtoupper(bin2hex(random_bytes(20))) ); # Generate random 40 character value
//wp_redirect(site_url());

header( "Refresh: 3; url= ".home_url()."/iletisim/" );
// echo "<meta http-equiv='refresh' content='3; url=https://RanaAJANS.com/iletisim/'>";  
?>

<!doctype html>
<html lang="tr">
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>   
<style>
.swal-overlay {
  background-color: rgba(250, 0, 0, 0.50);
}
.swal-modal {
  background-color: rgba(255,255,255,0.99);
  border: 3px solid white;
}
</style>
</head>
<body>
<script>
  swal({
          type: 'error',
          icon: "warning",
          title: 'Oops...',
          text: 'Çıkış Yaptınız!',
          button: "Tamam",
          className: "swal-overlay",
          closeModal: false  
        })
</script>
</body>
</html>
<?php
ob_end_flush();
exit();
?> 
```

# c# - 如何在屏幕上的任意位置创建工具提示？

> ID：13536191
> 
> 赞同：1
> 
> 时间：2012-11-23T21:58:32.590
> 
> 标签：c#, tooltip, balloon

如何在屏幕上的任何位置创建一个像这样的工具提示（在 AutoIt 中创建）？我找了一个小时，真的什么也没找到。它是一个普通的工具提示，就像托盘图标的工具提示一样，可以放在任何地方。

问候

![自动工具提示（）](../Images/b21238b49751d10849162122c3a27ca8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:09:04.973

为什么它是 Windows 窗体、ASP .NET 等很重要？因为它可能会影响你的选择。

如果它是 Windows 窗体应用程序，您可以创建自己的继承自 Windows.Forms.Form 的类，设置一些属性然后使用它。

```
public class MyTooltip : Form
{
    public int Duration { get; set; }

    public MyTooltip(int x, int y, int width, int height, string message, int duration)
    {
        this.FormBorderStyle = FormBorderStyle.None;
        this.ShowInTaskbar = false;
        this.Width = width;
        this.Height = height;
        this.Duration = duration;
        this.Location = new Point(x, y);
        this.StartPosition = FormStartPosition.Manual;
        this.BackColor = Color.LightYellow;

        Label label = new Label();
        label.Text = message;
        label.TextAlign = System.Drawing.ContentAlignment.MiddleLeft;
        label.Dock = DockStyle.Fill;

        this.Padding = new Padding(5);
        this.Controls.Add(label);
    }

    protected override void OnShown(System.EventArgs e)
    {
        base.OnShown(e);

        TaskScheduler ui = TaskScheduler.FromCurrentSynchronizationContext();

        Task.Factory.StartNew(() => CloseAfter(this.Duration, ui));
    }

    private void CloseAfter(int duration, TaskScheduler ui)
    {
        Thread.Sleep(duration * 1000);

        Form form = this;

        Task.Factory.StartNew(
            () => form.Close(),
            CancellationToken.None,
            TaskCreationOptions.None,
            ui);
    }
} 
```

你可以像这样使用它：

```
 private void showButton_Click(object sender, EventArgs e)
    {
        var tooltip = new MyTooltip(
            (int)this.xBox.Value,
            (int)this.yBox.Value,
            50,
            50,
            "This is my custom tooltip message.",
            (int)durationBox.Value);

        tooltip.Show();
    } 
```

假设您需要持续时间，您可以减少表单的不透明度，直到它消失，然后关闭它以获得更好的效果，而不是关闭它。

您还可以使用透明度颜色并使用背景图像等来塑造工具提示。

编辑：

这是 CloseAfter 方法如何淡出工具提示表单的快速演示。

```
private void CloseAfter(int duration, TaskScheduler ui)
{
    Thread.Sleep(duration * 1000);

    Form form = this;

    for (double i = 0.95; i > 0; i -= 0.05)
    {
        Task.Factory.StartNew(
            () => form.Opacity = i,
            CancellationToken.None,
            TaskCreationOptions.None,
            ui);

        Thread.Sleep(50);
    }

    Task.Factory.StartNew(
        () => form.Close(),
        CancellationToken.None,
        TaskCreationOptions.None,
        ui);
} 
```

# ruby - 事件声明

> ID：13536198
> 
> 赞同：0
> 
> 时间：2012-11-23T21:59:14.230
> 
> 标签：ruby

我今天从@avdi 的 Ruby Tapas 节目中获得了以下代码：

```
module Eventful
  def self.included(other)
    other.extend(Macros)
  end
  def add_listener(listener)
    (@listeners ||= []) << listener
  end
  def notify_listeners(event, *args)
    (@listeners || []).each do |listener|
      listener.public_send("on_#{event}", *args)
    end
  end

  module Macros
    def event(name)
      module_eval(%Q{
        def #{name}(*args)
          notify_listeners(:#{name}, *args)
        end
      })
    end
  end
end

class Dradis
  include Eventful
  event :new_contact
end

class ConsoleListener
  def on_new_contact(direction, range)
    puts "DRADIS contact! #{range} kilometers, bearing #{direction}"
  end
end

dradis = Dradis.new
dradis.add_listener(ConsoleListener.new)
dradis.new_contact(120, 23000) 
```

我了解事件和侦听器以及观察者模式的概念，但不明白这种语法是如何/为什么起作用的，也没有在任何手册中看到它。类`Dradis`有这个：

```
 event :new_contact 
```

起初，我认为这`event`是一个方法，`:new_contact`是一个参数，所以我会调用`event`的一个实例`Dradis`，例如：

```
dradis = Dradis.new
dradis.event 
```

而是在类似`new_contact`的实例上调用`Dradis`：

```
dradis = Dradis.new
dradis.add_listener(ConsoleListener.new)
dradis.new_contact(120, 23000) 
```

并触发`event`宏模块中的方法。

谁能解释为什么它会这样工作？调用`:new_contact`实例`dradis`来触发事件方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:13:59.793

我没看那集，但是看，它就在那里。

```
 module Macros
    def event(name)
      module_eval(%Q{
        def #{name}(*args)
          notify_listeners(:#{name}, *args)
        end
      })
    end
  end 
```

`event`是一种方法，它定义了另一个方法 ( `new_contact`)，该方法`notify_listeners`从`Eventful`.

> 并触发宏模块中的事件方法

不正确。该方法很久以前就完成了它的工作，它不会再次被调用。它使用`module_eval`/生成了一个新方法`def`，而新方法 ( `new_contact`) 就是被调用的方法。

当类被解析和加载时，理解`event`方法只运行一次是很重要的。`Dradis`它不会在`Dradis`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:54:56.417

Several separated features of ruby is used: In the line `event :new_contact` the "evnet" is class method (http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_classes.html#UE).

Usually class methods are defined by:

```
 class A
    def A.my_class_method
     #code
    end
  end
  A.my_class_method #executing class_method 
```

or

```
 class A
    def <<self   #usefull when you want delare several class methods
      def A.my_class_method
        #code
      end
    end
  end
  A.my_class_method #executing class_method 
```

In the code the method is included by the module `Macros`.

The key thing is, that (class method) `event` is dynamicaly creating new (instance) method (in this case `new_contact`) The name of the method is passed as argument to `event`). And this method providing calling of the listener.

> Can anyone explain why it works like this? calling :new_contact on an instance dradis to trigger the event method?

This is by the dynammically created method `new_contact` which is calling `notify_listeners(:#{name}, *args)`

# c# - 如何监控 FTP 传入文件夹中新上传的文件？

> ID：13536199
> 
> 赞同：3
> 
> 时间：2012-11-23T21:59:24.557
> 
> 标签：c#, .net, iis, system.reactive

换句话说，如何使用 IIS 支持的 FTP 服务器和 .NET 在我的机器上对新上传的文件进行一些自定义处理？

*澄清* 这是在托管 FTP 服务器的机器上运行。就我而言，权限不是问题。

[看来我需要要求](https://stackoverflow.com/q/9895839/90475)上传实体添加在实际数据文件完全上传后发送的列表文件。假设上传了一个实际的 xxx.data 文件，后面跟着 xxx.listing 文件，表示 xxx.data 文件上传完成。

最初这个问题是关于 Reactive Extensions 的。我希望有人能在 IIS 7.5 的 FTP 服务器和 Reactive Extensions 之间架起一座桥梁，这样我就可以专注于更高级别的实现细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:40:24.860

我已经精简了[MSDN 示例](http://msdn.microsoft.com/en-us/library/hh229241%28v=VS.103%29.aspx)以专注于文件创建，因为这是文件上传到 FTP 服务器时唯一感兴趣的事件。

必须为此代码示例安装[响应式扩展才能在 Visual Studio 2012 中工作。](http://www.nuget.org/packages/Rx-Main)

```
 class Program
 {
     static void Main()
     {
         // Create a FileSystemWatcher to watch the FTP incoming directory for creation of listing file

         using (var watcher = new FileSystemWatcher(@"C:\FTP-Data\Incoming", "*.lst"))
         {
             // Use the FromEvent operator to setup a subscription to the Created event.           
             //                                                                                    
             // The first lambda expression performs the conversion of Action<FileSystemEventArgs> 
             // to FileSystemEventHandler. The FileSystemEventHandler just calls the handler       
             // passing the FileSystemEventArgs.                                                   
             //                                                                                    
             // The other lambda expressions add and remove the FileSystemEventHandler to and from 
             // the event.                                                                         

             var fileCreationObservable = Observable.FromEvent<FileSystemEventHandler, FileSystemEventArgs>(
                                         UseOnlyTheSecondArgument,
                                         fsHandler => watcher.Created += fsHandler,
                                         fsHandler => watcher.Created -= fsHandler);

             fileCreationObservable.Subscribe(ActionWhenFileIsUploaded);

             watcher.EnableRaisingEvents = true;

             Console.WriteLine("Press ENTER to quit the program...\n");
             Console.ReadLine();
         }
     }

     private static void ActionWhenFileIsUploaded(FileSystemEventArgs args)
     {
         Console.WriteLine("{0} was created.", args.FullPath);

         // TODO
         // 1\. Deduce original file name from the listing file info
         // 2\. Consume the data file
         // 3\. Remove listing file
     }

     private static FileSystemEventHandler UseOnlyTheSecondArgument(Action<FileSystemEventArgs> handler)
     {
         return (object sender, FileSystemEventArgs e) => handler(e);
     }
 } 
```

我仍在研究将可观察的列表文件转换为可观察的实际数据文件的细节。敬请关注。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T10:13:44.790

Rx**本身并不**适合。

当您想要查询事件（或及时的集合）并且想要组合复杂的过滤、连接和投影时，Rx 非常适合。

Rx 在观看 FTP 上传或文件系统更改方面完全没有做任何事情。或者任何事件源。它不**提供**任何机制来生成这些类型的事件。

相反，它确实允许将各种不同的事件源（事件、异步操作、WMI 事件、生成的 observables 等）汇集到一个通用框架中。

你需要看看类似的东西`FileSystemWatcher`，然后把它变成一个可观察的。

然后你可以用 Rx 做一些很棒的事情。真是太棒了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:14:00.013

您将需要扩展 FileWatcher 的功能，即检查您的文件是否已完全上传（或未上传），然后使用评论中列出的 Rx 示例。

或者..

不直接查看 FTP 文件夹中的文件.. 而是运行 Windows 服务或某些应用程序将完全上传的文件*复制*到**处理文件夹**中，然后您确定只有没有部分文件。（需要弄清楚如何。想知道文件在上传服务器期间是否被锁定）。这将观看和处理逻辑分开在单独的应用程序中。（但使它更棘手。）。同样在处理之后，您可以将文件移出处理文件夹，这样您就不会再次处理相同的文件（或者您可以使用其他一些逻辑。）

# json - 如何在 NodeJS 脚本中从 Azure CLI 捕获 JSON 结果

> ID：13536201
> 
> 赞同：0
> 
> 时间：2012-11-23T21:59:40.133
> 
> 标签：json, node.js, azure, command-line-interface, capture

有没有办法从 NodeJS 脚本中捕获来自 Azure NodeJS CLI 的 JSON 对象？我可以执行类似 exec('azure vm list') 之类的操作并编写一个承诺来处理延迟的标准输出结果，或者我可以劫持 process.stream.write 方法，但是查看 CLI 代码，我想这相当广泛可能有一种方法可以将回调传递给 cli 函数或其他可能直接返回 JSON 结果的选项。我看到您正在使用 winston 记录器模块——我可能对此很熟悉，但也许那里有一个可以使用的钩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:13:11.790

是的，您可以，请查看以下要点：[https](https://gist.github.com/4415326) ://gist.github.com/4415326 ，您将了解如何不执行 exec。您基本上覆盖了挂在 CLI 上的记录器。

附带说明一下，我即将发布一个新模块 azure-cli-buddy，这将使使用这种技术调用 CLI 并以 JSON 格式接收结果变得容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:05:34.943

azure vm list 确实有一个 --json 选项：

```
 C:\>azure vm list -h
 help:    List Azure VMs
 help:
 help:    Usage: vm list [options]
 help:
 help:    Options:
 help:      -h, --help               output usage information
 help:      -s, --subscription <id>  use the subscription id
 help:      -d, --dns-name <name>    only show VMs for this DNS name
 help:      -v, --verbose            use verbose output
 help:      --json                   use json output 
```

您可以在 exec(...) 调用的回调中获取 json 结果。这对你有用吗？

# java - 执行while循环以显示菜单

> ID：13536206
> 
> 赞同：2
> 
> 时间：2012-11-23T22:00:11.640
> 
> 标签：java, methods, do-while

我用 do~while(true) 创建了我的菜单；但是每次用户插入一个数字时，它都会再次显示菜单，而不是运行程序！你怎么看？

// 我的主要方法

```
public static void main(String[] args) {

    DataReader reader = new DataReader(); // The reader is used to read data from a file

    // Load data from the file
    if(reader.loadData(args[0])) {          // The filename is entered using a command-line argument

        vehicles= reader.getVehicleData(); // Store the arrays of Vehicle

        // Display how many shapes were read from the file
        System.out.println("Successfully loaded " + vehicles[0].getCount() + 
                           " vehicles from the selected data file!");
        displayMenu();
    }
} 
```

// 显示菜单方法

```
private static void displayMenu() {
    Scanner input = new Scanner(System.in);

    do {
        System.out.println("\n\n          Car Sales Menu");
        System.out.println("--------------------------------------");
        System.out.println("1 - Sort vehicles by owner's Last Name");
        System.out.println("2 - Sort vehicles by vehicle Model");
        System.out.println("3 - Sort vehicles by vehicle Cost\n");
        System.out.println("4 - List All Vehicles");
        System.out.println("5 - List All Cars");
        System.out.println("6 - List American Cars Only (Formal)");
        System.out.println("7 - List Foreign Cars only (Formal)");
        System.out.println("8 - List All Trucks");
        System.out.println("9 - List All Bicycles");
        System.out.print("\nSelect a Menu Option: ");
        getInput(input.next()); // Get user input from the keyboard 
    }
    while(true); // Display the menu until the user closes the program
} 
```

// 获取输入法

```
private static void getInput(String input) {
    switch(Convert.toInteger(input)) {
        case 1: // Sort Vehicles by Owner's Last Name
            Array.sortByOwnerName(vehicles);
            break;
        case 2: // Sort Vehicles by Vehicle Make & Model
            Array.sortByVehicleMakeModel(vehicles);
            break;
        case 3: // Sort Vehicles by Vehicle Cost
            Array.sortByVehicleCost(vehicles);
            break;
        case 4: // List All Vehicles
            displayVehicleData(0);
            break;

        default:
            System.out.print("The entered value is unrecognized!");
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:01:52.037

因为你有`while(true);`，这意味着菜单将处于无限循环中，直到调用中断。

尝试执行以下操作：

```
 do {
        System.out.println("\n\n          Car Sales Menu");
        System.out.println("--------------------------------------");
        System.out.println("1 - Sort vehicles by owner's Last Name");
        System.out.println("2 - Sort vehicles by vehicle Model");
        System.out.println("3 - Sort vehicles by vehicle Cost\n");
        System.out.println("4 - List All Vehicles");
        System.out.println("5 - List All Cars");
        System.out.println("6 - List American Cars Only (Formal)");
        System.out.println("7 - List Foreign Cars only (Formal)");
        System.out.println("8 - List All Trucks");
        System.out.println("9 - List All Bicycles");
        System.out.print("\nSelect a Menu Option: ");
    try {
        int input = Integer.parseInt(getInput(input.next())); // Get user input from the keyboard 

        switch (input) {
        case 1:  // do something
                 break;
        case 2:  // do something
                 break;
        ...
       }
      } catch (NumberFormatException e) { ... }

    }
    while(true); // Display the menu until the user closes the program 
```

您可以使用[switch](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)来处理输入，并根据输入执行相应的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:01:48.963

```
while(true); // Display the menu until the user closes the program 
```

`while true`并不完全意味着您在评论中写的东西。您需要在 while 循环中添加一些其他条件来检查该条件。这个条件应该是`input`你从用户那里读到的。

**例如**，像这样的东西。请注意，这可能无法完全解决您的问题，因为您的代码似乎还有其他一些问题：-

```
int userInput = 0;
do {
    try {
        userInput = Integer.parseInt(getInput(input.next()));
    } catch (NumberFormatException e) {
        userInput = 0;
    }

} while (userInput < 1 || userInput > 9);

return userInput;  // For this you need to change return type of `displayMenu()` 
```

然后，处理`userInput`您的方法中返回的 `main()`内容。在那里，您需要将返回值存储在某个局部变量中。

```
int userInput = displayMenu(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T22:02:57.217

因为你的 while 循环是`while(true)`它会一直循环，直到程序被强制中断。如果没有`getInput()`函数的内容，只能说循环永远不会结束。

您将需要在方法中或使用后处理用户的输入，然后在满足某些条件时`getInput()`有条件地突破。`while(true)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T22:03:09.397

假设您的`getInput`方法按照它所说的那样做，那么一旦您的输入被读入，您实际上并没有对它做任何事情。

因此，当用户输入一个值时，您的程序会读取该值，并愉快地忽略它，然后再次运行菜单。

# javascript - 如何在 IE 中渲染 MathJax 时消除警告

> ID：13536207
> 
> 赞同：0
> 
> 时间：2012-11-23T22:00:19.660
> 
> 标签：javascript, html, mathjax

虽然我发现了一个类似的 Question [Using mark of the web with MathML](https://stackoverflow.com/questions/9894906/using-mark-of-the-web-with-mathml)，但我找不到解决方案。我从 MathJax 网站尝试了以下示例

```
<!DOCTYPE html>
<html>
<head>
<title>MathJax TeX Test Page</title>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>
<span style='font-size:130%'>
When $a \ne 0$, there are two solutions to \(ax^2 + bx + c = 0\) and they are
$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$
</span>
</body>
</html> 
```

我明白了

> Internet Explorer 限制此网页运行脚本或 ActiveX 控件。

IE 9 中的警告。

这个数学博客

[http://swanlotus.com/varieties-of-multiplication/](http://swanlotus.com/varieties-of-multiplication/)

在 IE 9 中运行良好。

只是想知道我需要对示例进行哪些更改才能解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:16:06.027

Problems like these exist because you're running the webpage directly from your computer, in other words you'll need to serve the page using a http server ( like apache, IIS, etc ).

You can still disable the warning, if you want to, by going to Tools (menu) → Internet Options → Security (tab) → Custom Level (button) → and Disable Automatic prompting for ActiveX controls. This will only apply to your computer obviously.

Anyway, if you're developing a webpage of sorts i recommend you run it in a http server in your localhost ( try installing [WAMP](http://www.wampserver.com/en/) for instance, gives you apache and php + mysql, and its easy to use )

# c++ - C++: Help storing and displaying Input File variables

> ID：13536208
> 
> 赞同：0
> 
> 时间：2012-11-23T22:00:29.480
> 
> 标签：c++, arrays, io

At the moment I am trying to store double values into indexes of an array. As far as I can tell I'm doing this right, but I must be wrong because for some reason when I run the program I get some pretty insane numerical values.

I could use some help figuring this out, thanks in advance.

ps: I think that the values being displayed are basically the last values stored at that specific memory location...

Code (Let me know if you need to see more):

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
#include <new>

using namespace std;

int INDEXES = 0;

string *names_Array;
double *rates_Array;
double *hours_Array;

void subscript(ifstream&, int&, string&, double&, double&);
void arrayInput(ifstream&, string [], double [], double[],
    string&, double&, double&);

int main()
{
    string names;
    double rates;
    double hours;

    string filename("employee sample file.txt");
    ifstream employeeInfo(filename.c_str());

    if (employeeInfo.fail())
    {
        cout << "Sorry, file was not successfully opened. "
             << "Please make sure your file exists and\n" 
             << "re-run the program." << endl;
    }

    subscript(employeeInfo, INDEXES, names, rates, hours);

    names_Array = new string[INDEXES];
    rates_Array = new double[INDEXES];
    hours_Array = new double[INDEXES];

    arrayInput(employeeInfo, names_Array, rates_Array, hours_Array,
        names, rates, hours);

    cout << rates_Array[0] << endl
         << rates_Array[1] << endl
         << rates_Array[2] << endl
         << rates_Array[3] << endl
         << rates_Array[4] << endl;

    employeeInfo.close();

    system("pause");
    return 0;
}

void subscript(ifstream& employeeInfo, int& INDEXES,
string& names, double& rates, double& hours)
{
    while(!employeeInfo.eof())
    {   
        employeeInfo >> names >> rates >> hours;

        INDEXES++;
    }
}

void arrayInput(ifstream& employeeInfo, string names_Array[], double rates_Array[], 
            double hours_Array[], string& names, double& rates, double& hours)
{
    int i = 0;
    string line;

    while(getline(employeeInfo, line))
    {
        employeeInfo >> names >> rates >> hours;

        names_Array[i] = names;
        rates_Array[i] = rates;
        hours_Array[i] = hours;

        i++;
    }
} 
```

**INPUT FILE (please ignore double spacing):**

Clinton 10.00 10

Lincoln 5.00 50

Washington 32.00 35

Kennedy 4.99 45

Nixon 10.00 25

**OUTPUT:**

-6.27744e+066

-6.27744e+066

-6.27744e+066

-6.27744e+066

-6.27744e+066

**OUTPUT should be:**

10.00

5.00

32.00

4.99

10.00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:26:03.363

很清楚您要做什么，但是错误太多，很难知道从哪里开始。不幸的是，代码必须完全正确，而不是大致正确。

这是一个有效的程序。我认为你应该重新开始。

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

static int subscript();
static void arrayInput(string* names_Array, double* rates_Array, double*hours_Array);

const string filename("employee sample file.txt");

int main()
{
    int INDEXES = subscript();
    string* names_Array = new string[INDEXES];
    double* rates_Array = new double[INDEXES];
    double* hours_Array = new double[INDEXES];
    arrayInput(names_Array, rates_Array, hours_Array);
    cout << rates_Array[0] << endl
         << rates_Array[1] << endl
         << rates_Array[2] << endl
         << rates_Array[3] << endl
         << rates_Array[4] << endl;
}

static int subscript()
{
    ifstream employeeInfo(filename.c_str());
    string name;
    double rate, hour;
    int count = 0;
    while (employeeInfo >> name >> rate >> hour)
        ++count;
    return count;
}

static void arrayInput(string* names_Array, double* rates_Array, double* hours_Array)
{
    ifstream employeeInfo(filename.c_str());
    string name;
    double rate, hour;
    int count = 0;
    while (employeeInfo >> name >> rate >> hour)
    {
        names_Array[count] = name;
        rates_Array[count] = rate;
        hours_Array[count] = hour;
        ++count;
    }
} 
```

为了帮助理解，我保留了相同的变量和函数名称（尽管我认为其中一些有点奇怪）。

也许研究这段代码和你的代码之间的差异会有所帮助。我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:26:52.970

在您的`subscript`函数中，已到达文件末尾，您尝试在函数中`employeeInfo`再次读取文件内容。`arrayInput`您需要告诉employeeInfo 从头开始​​读取。

```
void arrayInput(ifstream& employeeInfo, string names_Array[], double rates_Array[], 
            double hours_Array[], string& names, double& rates, double& hours)
{
    int i = 0;
    string line;

    employeeInfo.seekg (0, ios::beg);  // <-- add this line to point to the start of the file again

    while(getline(employeeInfo, line))
    {
        employeeInfo >> names >> rates >> hours;

        names_Array[i] = names;
        rates_Array[i] = rates;
        hours_Array[i] = hours;

        i++;
    }
} 
```

# python - Python: efficient way to measure region properties using shapely

> ID：13536209
> 
> 赞同：6
> 
> 时间：2012-11-23T22:00:41.860
> 
> 标签：python, performance, geometry, computational-geometry

First of all, I apologize to post this easy question. I have a polygon

```
from shapely.geometry import Polygon

polygon = Polygon([(560023.4495758876400000 6362057.3904932579000000),(560023.4495758876400000 6362060.3904932579000000),(560024.4495758876400000 6362063.3904932579000000),(560026.9495758876400000 6362068.3904932579000000),(560028.4495758876400000 6362069.8904932579000000),(560034.9495758876400000 6362071.8904932579000000),(560036.4495758876400000 6362071.8904932579000000),(560037.4495758876400000 6362070.3904932579000000),(560037.4495758876400000 6362064.8904932579000000),(560036.4495758876400000 6362063.3904932579000000),(560034.9495758876400000 6362061.3904932579000000),(560026.9495758876400000 6362057.8904932579000000),(560025.4495758876400000 6362057.3904932579000000),(560023.4495758876400000 6362057.3904932579000000)]) 
```

![enter image description here](../Images/7d6a569da832afa6666e157e00048321.png)

My goal is compute the **minor and the major axis** of this polygon, following the Figure example: ![enter image description here](../Images/65e941c872adfd715a0a314ff36f29fb.png)

I find this example in [scikit-image](http://scikit-image.org/docs/dev/auto_examples/plot_regionprops.html) but before to use a second module I wish to ask if there is in shapely module a method to calculate these indices.

thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-04T20:31:34.060

这个问题有点老了，但我最近自己遇到了这个问题，这就是我所做的：

```
from shapely.geometry import Polygon, LineString

polygon =  Polygon([(560023.4495758876400000, 6362057.3904932579000000),(560023.4495758876400000, 6362060.3904932579000000),(560024.4495758876400000, 6362063.3904932579000000),(560026.9495758876400000, 6362068.3904932579000000),(560028.4495758876400000, 6362069.8904932579000000),(560034.9495758876400000, 6362071.8904932579000000),(560036.4495758876400000, 6362071.8904932579000000),(560037.4495758876400000, 6362070.3904932579000000),(560037.4495758876400000, 6362064.8904932579000000),(560036.4495758876400000, 6362063.3904932579000000),(560034.9495758876400000, 6362061.3904932579000000),(560026.9495758876400000, 6362057.8904932579000000),(560025.4495758876400000, 6362057.3904932579000000),(560023.4495758876400000, 6362057.3904932579000000)])

# get the minimum bounding rectangle and zip coordinates into a list of point-tuples
mbr_points = list(zip(*polygon.minimum_rotated_rectangle.exterior.coords.xy))

# calculate the length of each side of the minimum bounding rectangle
mbr_lengths = [LineString((mbr_points[i], mbr_points[i+1])).length for i in range(len(mbr_points) - 1)]

# get major/minor axis measurements
minor_axis = min(mbr_lengths)
major_axis = max(mbr_lengths) 
```

Shapely 使计算 mbr via 变得容易`minimum_rotated_rectangle`，但似乎相反的边的长度并不完全相同。正因为如此，上面计算了每一边的长度，然后取最小值/最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:04:28.777

首先计算多边形的最小边界矩形 - 请参阅[如何找到给定点的最小面积矩形中描述的过程？](https://gis.stackexchange.com/questions/22895/how-to-find-the-minimum-area-rectangle-for-given-points)，除了你将从凸包开始。在 Shapely 中，使用该[`.convex_hull()`](http://toblerity.github.com/shapely/manual.html#object.convex_hull)方法计算多边形的凸包。

然后，一旦您拥有 MBR，您就可以找到主轴/次轴。

# python - 如何在 Python 中存储列表的哈希表（按身份哈希）？

> ID：13536223
> 
> 赞同：4
> 
> 时间：2012-11-23T22:02:48.937
> 
> 标签：python, python-2.7, set, hashtable, python-2.x

我需要存储 a `set`of s 由**identity**`list`散列：如果两个列表是相同的对象，则它们是相等的。

 **使用`tuple`s[不仅在语义上没有多大意义](http://news.e-scribe.com/397)，而且我有时还需要改变列表（每隔一段时间在末尾附加一些元素），所以我根本不能使用 a `tuple`。

如何在 Python 中存储按身份散列的列表的散列集？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T22:05:33.657

使用`dict`而不是设置，并让`id`列表的 成为关键：

```
dct[id(lst)] = lst 
```

使用 测试“集合”中是否存在列表`id(lst) in dct`。**

# cognos - Cognos 错误 - 无法将数据项移动到使用不同查询的数据容器中

> ID：13536229
> 
> 赞同：1
> 
> 时间：2012-11-23T22:03:14.203
> 
> 标签：cognos

我的报告页面上有两个列表。在报表工作室中，我试图将一个列表拖到另一个列表之上，目的是在两个列表之间创建主从关系。

我收到此错误：`Data items cannot be moved to a data container that uses a different query.`但是当我们通过主从关系链接两个数据项时，数据项将始终引用不同的查询。不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:18:49.190

我总是通过将所有详细信息/标题数据放入一个列表中来做到这一点，然后选择一个标题列并单击“部分”。然后解锁列表，将剩余的数据项拖入表头

# linux - linux批处理作业并行

> ID：13536231
> 
> 赞同：1
> 
> 时间：2012-11-23T22:03:33.607
> 
> 标签：linux, parallel-processing, background-process, batch-processing

我有七个特定软件的许可证。因此，我想同时开始 7 个工作。我可以使用'&'来做到这一点。现在，“等待”命令等到所有这 7 个进程结束以生成下一个 7 个进程。现在，我想编写 shell 脚本，在我开始前 7 个进程之后，当一个工作完成时我想开始另一个。这是因为这 7 项工作中的一些可能需要很长时间，而另一些则很快就会完成。我不想浪费时间等待他们全部完成。有没有办法在linux中做到这一点？请你帮助我好吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T22:35:08.253

[GNU`parallel`](http://www.gnu.org/software/parallel/)是要走的路。它设计用于启动同一命令的多个实例，每个实例都具有从`stdin`外部文件或外部文件检索的不同参数。

假设您的许可脚本被调用`myScript`，每个实例具有相同的选项`--arg1 --arg2`并为每个生成的实例采用可变参数`--argVariable`，这些参数存储在文件中`myParameters`：

```
cat myParameters | parallel -halt 1 --jobs 7 ./myScript --arg1 --argVariable {} --arg2 
```

说明：

*   `-halt 1`如果一个工作失败，告诉`parallel`停止所有工作
*   `--jobs 7`将启动 7 个实例`myScript`

在基于 debian 的 linux 系统上，您可以`parallel`使用以下命令进行安装：

```
sudo apt-get install parallel 
```

作为奖励，如果您的许可证允许，您甚至可以告诉`parallel`在多台计算机中启动这 7 个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:08:21.097

如果少于 7 个，您可以检查当前正在运行的数量并启动更多：

```
while true; do
    if [ "`ps ax -o comm | grep process-name | wc -l`" -lt 7 ]; then
        process-name &
    fi
    sleep 1
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:07:47.397

写两个脚本。一个在每次完成时重新启动作业，一个在第一个脚本启动 7 次。

像：

```
script1:

./script2 job1
...
./script2 job7 
```

和

```
script2:

while(...)
  ./jobX 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T09:51:02.767

[我使用make](/questions/tagged/make "显示标记为“制作”的问题")找到了一个相当不错的解决方案，它是标准发行版的一部分。看[这里](https://stackoverflow.com/questions/17565353/have-5-scripts-running-at-any-given-time/17566149#17566149)

# ios - Xcode：在界面生成器中将对象分配为 UITableView 数据源/委托

> ID：13536232
> 
> 赞同：2
> 
> 时间：2012-11-23T22:03:40.070
> 
> 标签：ios, xcode, interface, datasource, builder

我对 Xcode 比较陌生。

我试图在 Xcode 的 Interface Builder 中尽可能地做到这一点。因为我使用的是遗留代码，所以不能选择 Storyboard。

我正在使用 XIB，我将调用 DualTVController。它基于一个简单的 UIViewContoller。

在这个 XIB 中，我有两个 UITableView，LeftTV 和 RightTV。在 IB 中，我可以将 LeftTV 的委托/数据源分配给 File's Owner，这是 XIB 的类表示。这工作正常。

我想在 IB 中分配 RightTV 的委托/数据源。到目前为止，我已经成功地使用了 LeftTV，但这只是令人困惑。

相反，我创建了一个名为 RightDelegate 的 UITableViewController 子类，并将其分配为我通过 IB 创建的简单对象的类。我让它遵循 UITableViewDataSource 和 UITableViewDelegate 协议。这允许我在 IB 中将 RightTV 的委托/数据源连接到它，但是当我尝试运行它时，我得到一个 BAD_ACCESS 错误。

我在 RightDelegate 中的委托代码与在 LeftTV 中的委托代码相同（有效）。任何人都可以提出这个问题吗？我是否负责在代码中实例化 RightDelegate？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:22:46.233

注意：我知道您想在 IB 中执行此操作，但在这种情况下，这可能最好在代码中处理。在 IB 中为单个 tableview 设置委托很简单，但很容易被忽视。由于委托非常重要，我通常将它们保存在代码中，这样可以减少错误。

当您要使用多个 tableview 时，有几种方法可以管理代表。

a）使用每个委托回调上的逻辑管理视图控制器中的两个委托，以确定哪个 tableview 正在询问（最终变得混乱） b）通过将一个留在您的 vc 中并将另一个放在它自己的单独控制器中来拆分委托（有点令人困惑）

c) 通过为每个 tableview 使用单独的 tableview 控制器实例来拆分委托。这可能是最好的选择，但它确实需要 3 个控制器 - 将初始化 xib 文件的初始视图控制器，然后是两个单独的 tableview 控制器 - leftTable，rightTable。

在您的主视图控制器中，确保为每个 tableview 设置一个属性：然后包含您的视图控制器，然后初始化 tableview 控制器并设置委托

```
//Example
self.rtv = [[rightTableViewController alloc] init];  //create a strong property for this
self.rtv.delegate = self;  //let it talk back to you if needed

self.ltv = [[leftTableViewController alloc] init];
self.ltv.delegate = self; 

self.rightTableView.delegate = rtv;
self.rightTableView.datasource = rtv;

self.leftTableView.delegate = ltv;
self.leftTableView.datasource = ltv; 
```

然后只需在每个 tableview 控制器中添加代码来管理 tableviews。如果您需要 tableview 控制器来调用您的主视图控制器，请使用委托回调。

希望这会有所帮助，祝你好运。

# c# - Unity C# 数组类型错误（从 unityscript 转换时）

> ID：13536233
> 
> 赞同：2
> 
> 时间：2012-11-23T22:03:56.047
> 
> 标签：c#, unity3d, unityscript

我正在尝试将这段简化的代码从 unityscript 转换（并理解）为 C#：

```
private var actionList = new Array();                                                           

function Start()
{
actionList = new Array(12);

for(i=0; i<actionList.length; i++) 
    actionList[i] = new Array(4);
for(i=0; i<actionList.length; i++)
{
    actionList[i][1] = Rect(50+(i*55),50, 50, 50);        
    actionList[i][2] = new Array("action");     
}
actionList[0][3] = KeyCode.Alpha1;
actionList[1][3] = KeyCode.Alpha2;
actionList[2][3] = KeyCode.Alpha3;
actionList[3][3] = KeyCode.Alpha4;
actionList[4][3] = KeyCode.Alpha5;
actionList[5][3] = KeyCode.Alpha6;
actionList[6][3] = KeyCode.Alpha7;
actionList[7][3] = KeyCode.Alpha8;
actionList[8][3] = KeyCode.Alpha9;
actionList[9][3] = KeyCode.Alpha0;
actionList[10][3] = KeyCode.Minus;
actionList[11][3] = KeyCode.Equals;
}

function OnGUI()
{
for(i=0; i<actionList.length; i++)
    {
    if(actionList[i][1] != null)
        drawButton(actionList[i][1]);
    }
}

function drawButton(rect)
{
    GUI.Button(rect, "Hello");
} 
```

完整的代码可以在这里找到：[创建拖放拼写栏](http://wiki.unity3d.com/index.php?title=Creating_a_Drag_and_Drop_Spell_Bar)

我在 C# 中对此的看法（省略了键盘映射）：

```
using UnityEngine;
using System.Collections.Generic;

public class SpellBar : MonoBehaviour
{
private object[][] actionList;

void Start()
{
actionList = new object[12][];

for (int i=0; i<actionList.Length; i++)
    actionList[i] = new object[4];
for (int i=0; i<actionList.Length; i++)
{
    actionList[i][1] = new Rect(50+(i*55), 50, 50, 50);
}

//Keymappings
}

void OnGUI() 
{
for(int i=0; i<actionList.Length; i++)
    {
    if(actionList[i][1] != null)
        DrawButton(actionList[i][1]);
    }
}

void DrawButton(Rect rect)
{
    GUI.Button(rect,"Hello");
}
} 
```

使用 DrawButton(actionList [i](http://wiki.unity3d.com/index.php?title=Creating_a_Drag_and_Drop_Spell_Bar) ) 时，我在这里遇到的错误出现在 OnGui 中。错误：无法将“对象”表达式转换为类型“UnityEngine，Rect”。

我不是 unityscript 或 C# 方面的经验丰富的程序员。我在谷歌上搜索了几个小时，尝试了 Lists、ArrayLists 等，但找不到解决方案。提前谢谢！

编辑 27-11-2012
所以，我遇到了一个新的相关问题。不知道我是否应该在此处编辑此内容，但我无法在回复中正确格式化。
在我尝试转换的 JavaScript 代码中，以下代码用于将类存储在数组中：

```
var openSlot = getNextSlot(actionList);    
if(openSlot != -1)
    actionList[openSlot][0] = new classEvilSmile(); 
```

虽然这不完全是我想要的方式，但我希望能够将方法存储在数组中，但我找不到在 C# 中执行此操作的方法。这根本不可能吗？
（示例）我正在尝试做这样的事情：

```
//In addition to what I posted above
void Start()
{
actionList[i][0] = void FireBall();
}

void FireBall()
{
Texture2D icon = Resources.Load("icon_fireball") as Texture2D;
String description = new String("Shoot a ball of fire");

//etc
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:37:19.707

与 Javascript 不同，C# 是强类型的，这意味着您不能将 an 传递`object`给请求`Rectangle`. 您必须为该方法提供确切的类型，或从该类型派生的子项。

所以，而不是

```
private object[][] actionList; 
```

你应该有

```
private Rectangle[][] actionList; 
```

强类型语言会执行大量编译时验证，以查看您是否没有将错误的变量类型传递给错误的方法参数。优点有两个，首先您不必在运行时执行测试来知道变量是否属于正确的类型。其次，它提供了一种简单的方法来查找代码中的错误，而无需运行代码的每一部分。如果它编译，你已经完成了 80%。

但是，如果要在该数组中组合不同的类型，则有多种选择。您可以使用一个类`Tuple<>`来组合一组没有匹配类型的对象，或者您可以在将其提供`object`给`Rectangle`方法之前将其转换为：

```
DrawButton((Rectangle)actionList[i][1]); 
```

但是，如果强制转换无效，您将获得运行时断言。

# python - Python .seed 和 .randrange if-else 语句设置

> ID：13536240
> 
> 赞同：0
> 
> 时间：2012-11-23T22:05:30.430
> 
> 标签：python, random, random-seed

我的程序非常复杂，我在下面提供了一个更简单的版本：

```
while True:#This first part asks the user if he wants to run in deterministic mode(explained later) If he does then deterministic is given a value of 1, else, it is given a value of two.
    mode= input("Would you like to start the program in deterministic mode?(y/n)")
    for i in mode:
        if i not in ('yYnN'):
            print('Please enter either a \'y\' or an \'n\', Please try again')
            break
    else:
        break

if mode=='y' or mode== 'Y':
    deterministic= 1
elif mode=='n' or mode=='N':
    deterministic= 2 
```

现在下面是一些使用上述代码的代码。这是一个 if-elif 语句，如果确定性为 ==1，则将运行一个函数，如果确定性==2，则将运行另一个函数。

```
 if deterministic==2:#position,time, and energy variables will come from the function updateDisplayAllVar(....)

            position,time,energy=updateDisplayAllVar(selection,position,time,energy)
        elif deterministic==1:#position,time, and energy variables will come from the function deterministic(....)

            position,time,energy=deterministic(selection,position,time,energy) 
```

现在我将向您展示上述代码中的两个函数。我相信问题出在他们身上。第一个函数给出一个随机数，并且每次都给出一个可能不同的随机数。第二个函数每次使用 .seed 将随机数限制为相同的“随机”数。

def updateDisplayAllVar（选择，位置，时间，能量）：

```
if selection=='w' or selection =='W':
    energy= energy
    position= position+1
    time=time+1
elif selection=='j' or selection =='J':
    energy= energy-1
    position= position+2
    time=time+1 
elif selection=='r' or selection =='R':
    energy= energy-random.randrange(1,2+1)
    position= position+random.randrange(1,4+1)
    time=time+1
elif selection=='f' or selection =='F':
    energy= energy- random.randrange(3,5+1)
    position= position+random.randrange(3,8+1)
    time=time+1

def deterministicMode(selection,position,time,energy):

    if selection=='w' or selection =='W':
        energy= energy
        position= position+1
        time=time+1
    elif selection=='j' or selection =='J':
        energy= energy-1
        position= position+2
        time=time+1 
    elif selection=='r' or selection =='R':
        random.seed(1)
        energy= energy-random.randrange(1,2+1)
        position= position+random.randrange(1,4+1)
        time=time+1
    elif selection=='f' or selection =='F':
        random.seed(3)
        energy= energy- random.randrange(3,5+1)
        position= position+random.randrange(3,8+1)
        time=time+1 
```

Now my problem is... that, with this code, even if I do not choose to be in deterministic(no random number) mode, I still get numbers that are not random and are based on the second function. That is, even though there are two functions up there and I'm asking each function to run based on the users input... It is always `deterministicMode(selection,position,time,energy)` that runs. Does anyone know a fix. Please let me know if anything is unclear and I will fix it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:33:33.073

Just re-seed your RNG with the current system time to make it "random" again:

```
def deterministicMode(selection,position,time,energy):
    random.seed()  # <-- Add this line right here

    if selection=='w' or selection =='W':
        energy= energy
        position= position+1
        time=time+ 
```

# vbscript - 从 VBScript 中的单个 onClick 调用多个函数

> ID：13536246
> 
> 赞同：1
> 
> 时间：2012-11-23T22:06:10.220
> 
> 标签：vbscript

我创建了一个 VBScript 函数，它允许用户通过单击按钮来安装网络打印机。这很好用，但是单击按钮后没有反馈。单击按钮后，我尝试添加警报，但语法有问题。

这是用于安装打印机的有效 onClick 函数：

```
<script type="text/vbscript">
   function AddP(pName)
       Set WshNetwork = CreateObject("Wscript.Network")
       WshNetwork.AddWindowsPrinterConnection pName
   end function
</script>

<td><a href="#" language="vbscript" onclick="AddP('\\PrinterName')"><input name="Button1" type="button" value="Add"></a></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:10:19.923

最简单的解决方案：在声明中添加一个冒号，作为语句分隔符。这将允许您调用附加函数。

`<a href="#" language="vbscript" onclick="AddP('\\PrinterName': msgbox 'Printer added')">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:45:02.783

只需在您的行之后添加此`WshNetwork.AddWindowsPrinterConnection`行

```
MsgBox "Printer Added" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T01:43:10.340

如果您想在添加打印机时给用户一些指示，您可以更改按钮状态。

```
<script type="text/vbscript">
   function AddP(pName)
       Dim allButton1s
       Set allButton1s = document.getElementsByName("Button1")
       allButton1s(0).value = "Please wait..."
       Set WshNetwork = CreateObject("Wscript.Network")
       WshNetwork.AddWindowsPrinterConnection pName
       MsgBox "Printer Added"
       allButton1s(0).value = "Add"
   end function
</script> 
```

# linux - Linux head 实用程序仅读取一行需要更多输入才能退出

> ID：13536252
> 
> 赞同：5
> 
> 时间：2012-11-23T22:07:10.750
> 
> 标签：linux, bash

我需要逐行读取连续数据流（实际上是管道），并且需要在第一行之后退出。在第一行之后。听起来很简单，但是使用“head -n 1”，我注意到我实际上需要在 head 退出之前输入*第二行。*

测试用例：

```
[s@svr1 ~]$ cat | head -n 1    
123    <- I type this first (followed by enter, of course)
123    <- I get this output from head, but the command does no exit
456    <- Then I need to type this for the command to exit and bring me back to the prompt
[s@svr1 ~]$ 
```

有人可以解释（首先）为什么它会这样，也许我怎么能得到我需要的东西？（而且我想坚持使用基本的 Linux/Unix 轻量级构建块。没有 Perl、Python 等......）

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T22:29:37.590

因为你在使用`cat | head -n 1`，这是[cat 的无用用法，](http://en.wikipedia.org/wiki/Cat_(Unix)#Useless_use_of_cat)与`head -n 1`. 如果你`head -n 1`在控制台上这样做，你会得到你想要的行为——`head`读取一行，打印它，然后退出。

如果你这样做`cat | head -n 1`，那么会发生这种情况：

1.  `cat`从其输入中读取“123”。
2.  `cat`将“123”写入其输出。
3.  `head`从其输入（连接到`cat`的输出）读取“123”。
4.  `head`将“123”写入其输出并退出。
5.  `cat`从其输入中读取“456”。
6.  `cat`尝试将“456”写入其输出。
7.  `cat`得到`SIGPIPE`，因为其输出另一端的进程已经死亡。
8.  `cat`退出。

`cat`将“123”写入 后立即开始另一次读取，直到它尝试向其写入*第二*行时才`head`发现它已经死亡。`head`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:13:21.533

您可以使用 关闭管道`control-d`。然后输出缓冲区被刷新，head 得到一个 EOF 并在它得到更多输入之前退出。

> [s@svr1 ~]$ 猫 | 头 -n 1
> 123
> 123
> `control-d`
> [s@svr1 ~]$

`head`读完第一行后停止。你可以用

> [s@svr1 ~]$ 猫 | 头-n 1

然后做 a `ps aux | grep -w -e cat -e head`，这会产生

> ... 猫
> ... 头
> ... grep -e 猫 -e 头

然后输入

> 123
> 123

然后再做`ps aux | grep -w -e cat -e head`一次，这会产生

> ... 猫
> ... grep -e 猫 -e 头

瞧，头不见了。因此，当它尝试编写第二行时，它不是在头上徘徊，而是 cat 在收到 EPIPE 后中止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:35:25.990

> 有人可以解释（首先）为什么会这样吗？

`cat`在未指定文件名时使用`STDIN`- 所以它正在等待你给它第二行或 ^D.

您可以使用 `sed -n 1p filename` 仅抓取第一行或`sed '1!d' filename`删除除第一行之外的所有内容。*

# php - Bot friendly ajax page

> ID：13536258
> 
> 赞同：0
> 
> 时间：2012-11-23T22:07:33.620
> 
> 标签：php, ajax, seo

I'm trying to code a seo friendly ajax portfolio right now. My goal is to provide javascript effects to users and normal html to bots/users without js.

Files:

*   index.php (starting point of my program)
*   aboutme.php (contains html code for "about me")
*   contact.php (contains html code for "contact")

The idea:

User visits index.php and clicks on "About me" -> loading animation appears -> aboutme.php gets loaded with ajax -> history.pushstate rewrites the url to aboutme.php.

-> When the user shares the current website url on fb/twitter/g+ the bots will get the correct title, body etc., as it is the normal html page without any javascript.

But my problem is: If other users open that page, they see directly the content. But I want to show them a loading animation first until the data got loaded with ajax (similar as they click on a link).

How can I achieve such an approach? Thank you very much!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:14:06.300

最好的方法是创建一个 javascript 文件。将链接标签写入“head”部分。这将使 javascript 文件在内容之前下载。Javascript 显示动画，但同时浏览器将下载已经在后台的内容。在“文档就绪”事件中，停止动画。

这将让机器人直接访问内容。因为 javascript 对他们不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:02:30.140

我一直认为这比它的价值更努力（通常），但要回答你的问题：

index.php、aboutme.php、contect.php 应该提供完整的 html。某些链接应该有 js 事件处理程序拦截点击，而不是 loading `aboutme.php`，它们`aboutme-content-only.php`在后台加载。然后更新 dom 和推送状态等...

这样，对于那些第一次访问的用户，以及那些浏览器不支持推送状态或 javascript 的用户，该网站很容易降级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:48:53.403

要使您的 ajax 内容可抓取，请参阅[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)，Bing 也支持这一点。或者使用 HTML5 pushState，参见[http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate](http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate)，[https://github.com/blog/760-the-tree -滑块](https://github.com/blog/760-the-tree-slider)等

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-23T22:14:28.797

我认为这根本不是问题，像往常一样保持链接的 href，然后使用 JavaScript 或 jQuery 更改单击链接的默认行为以使用 ajax 加载链接的内容。

# javascript - 什么是 javascript 模板预编译？

> ID：13536262
> 
> 赞同：6
> 
> 时间：2012-11-23T22:08:03.410
> 
> 标签：javascript, templates, optimization, precompile

我正在为我的 javascript 工作开发简单的模板工程。它需要非常简单，所以我不使用 Handlebars、musache 或任何其他可用的强大模板引擎。

我一直在阅读“**预**编译”或“**编译**”模板来提高性能。但我不确定那到底是什么意思。在我的工作中，我将模板 html 缓存在我的对象中，以避免每次都碰到模板 html。

这是一个非常简单的功能，主要执行以下操作

```
_template = _template.replace(/\{(.+?)\}/g, function(token, match, number, txt) {
                    return item[match];
                }); 
```

**item**是保存要替换的值的对象。

有人可以告诉我当他们（车把等）说编译模板时究竟是什么意思。?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T22:17:43.627

Underscore、Handlebars 和大多数其他 JS 模板从模板字符串中创建一个函数。然后，您可以使用不同的参数多次调用该函数并获取相应的 HTML 字符串。（我相信 Underscore 和 Handlebars 都是通过将模板字符串解析为 JS 代码，然后调用`Function`构造函数使编译后的模板函数来实现的。）

当这些库谈论“预编译”时，它们意味着将模板字符串转换为可重用函数的初始步骤。这可能是一个繁重的步骤，但它使渲染模板更快（在大多数情况下比简单的正则表达式替换更快），因此从模板代码创建函数然后多次使用它更有效，而不是重新编译和渲染每次调用模板时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T22:16:40.637

通常模板使用解析`regex`然后转换为`function`使用`eval`。这称为**预编译模板**。

使用一些作为参数传递的数据调用此类函数，称为**渲染模板**。因此，模板不会在您每次调用它时都被解析——它已经以连接并返回字符串的函数形式存在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T22:16:19.587

更新：我在这里不正确，请参阅下面的评论。

好吧，假设我的模板是一个填空的句子：

**一天，*_* ___ 决定要带*_* ____ 去*_* ____。**

编译模板将填补空白。

**那天，JOHN 决定要带 SALLY 一起去看 BATMAN PREMIER。**

希望隐喻在这种情况下会有所帮助:)

# python - 非根中的 Cpufreq

> ID：13536264
> 
> 赞同：2
> 
> 时间：2012-11-23T22:08:19.753
> 
> 标签：python, linux

我想更改 CPU 的频率，但是 /sys/devices/system/cpu/cpu0/cpufreq 中的文件只能由 root 写入，我更愿意做一些普通用户有权访问的事情。实现这一目标的最佳方式是什么（可能对免费桌面友好）？

谢谢

# c++ - Microsoft Media Foundation 相当于 Directshow 的自定义视频过滤器是什么？

> ID：13536266
> 
> 赞同：3
> 
> 时间：2012-11-23T22:08:31.773
> 
> 标签：c++, c, com, directshow, ms-media-foundation

就像我们可以制作自定义的 directshow 过滤器来制作虚拟摄像头/麦克风（然后在另一个程序（例如 Skype）中选择这个虚拟摄像头）一样，Media Foundation 中的那个功能相当于什么？由于 MF 将取代 DS，我决定尝试让我的程序在未来得到某种形式的证明，并希望有一个起点。任何想法/tuts/链接等都会受到极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:19:34.783

Media Foundation 采用接近 DirectShow 虚拟设备的[Media Sources的概念。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms697527%28v=vs.85%29.aspx)

> 媒体源是在媒体基础管道中生成媒体数据的对象。本节详细介绍媒体源 API。如果您正在实施自定义媒体源，或使用媒体基础管道之外的媒体源，请阅读本节。

虽然您应该知道将连接到您的自定义 DirectShow 源的多个应用程序，但您将很难找到连接到 Media Foundation 中实现的源的东西：Skype 尚未尝试利用它们。

你会在那里找到很好的示例：[Media Foundation Sample Code](http://archive.msdn.microsoft.com/mediafoundation)

# azure - 如何使用远程桌面 ActiveX 连接到 Azure VM？

> ID：13536267
> 
> 赞同：1
> 
> 时间：2012-11-23T22:08:45.487
> 
> 标签：azure, activex, remote-desktop

使用连接参数连接到 Azure VM 时，远程桌面 ActiveX 不会对连接命令做出反应。ActiveX 窗口保持白色，而不是显示远程桌面会话初始化。如何正确使用远程桌面客户端 ActiveX 连接 Azure？

.RDP 文件示例

```
full address:s:<cloudservice>.cloudapp.net
username:s:<username>
LoadBalanceInfo:s:Cookie: mstshash=<role>#<roleinstance> 
```

我使用嵌入在 WPF WindowsFormsHost 中的 ActiveX。（我已经用另一台 LAN 电脑进行了测试，远程会话建立成功。（提供服务器、用户名和密码）。

```
<WindowsFormsHostEx x:Name="m_host" HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    FlowDirection="LeftToRight">
  <axMstscLib:AxMsTscAxNotSafeForScripting x:Name="m_remoteDesktop"/>
</WindowsFormsHostEx> 
```

当试图将这些信息嵌入到 ActiveX 中时。命令没有反应。连接值保持为“2”...并且没有发生 OnConnected、OnDisconnected、OnFatalError、OnLogonError。

```
 m_remoteDesktop.Server = "<cloudservice>.cloudapp.net";
        m_remoteDesktop.UserName = "<username>";
        IMsRdpClientAdvancedSettings settings = m_remoteDesktop.AdvancedSettings as IMsRdpClientAdvancedSettings;
        if (settings != null)
        {
            settings.LoadBalanceInfo = "Cookie: mstshash=<Role>#<RoleInstance>";
            settings.ClearTextPassword = "<rdp pass>";
        }
        m_remoteDesktop.Connect();
        short connected = m_remoteDesktop.Connected; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:28:47.247

settings.LoadBalanceInfo 需要一个“\r\n”结尾才能生效。

```
settings.LoadBalanceInfo = "Cookie: mstshash=<Role>#<RoleInstance>" 
```

至

```
settings.LoadBalanceInfo = "Cookie: mstshash=<Role>#<RoleInstance>\r\n" 
```

只需添加它就可以解决我的问题。

# android - 更新 android 应用程序时，内部存储和共享首选项会发生什么情况？

> ID：13536268
> 
> 赞同：0
> 
> 时间：2012-11-23T22:08:50.207
> 
> 标签：android

我想知道我复制到内部存储的文件是否也会更新或 sharedpreferences 文件？当您卸载应用程序时，它们会被删除，但是当它们通过 Play 商店更新时会发生什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:37:51.850

Android 不会触及您的内部存储文件，也不会在应用程序更新时共享偏好。它们保持与应用程序在被更新版本替换之前终止时相同的状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:11:29.400

更新不会删除应用程序保存的任何文件或首选项。除非您故意对更新进行编程以使其执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:34:02.153

删除 sharedpreferences 的唯一方法是删除应用程序数据、卸载或以编程方式执行，如您在此处看到的：

[http://developer.android.com/reference/android/content/SharedPreferences.Editor.html](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)

查看方法**clear()**和**remove(String key)**

# java - Java：如何根据选择项目菜单或 JTree 节点来更改 JPanel 的内容？

> ID：13536270
> 
> 赞同：0
> 
> 时间：2012-11-23T22:09:02.137
> 
> 标签：java, swing, jpanel, jtree, jmenuitem

我是一名 Web 开发人员，我是 Java 新手，我想知道在选择 JTree 的任何节点或任何菜单项时如何更改 JPanel 的内容。因为我不想在单击任何选项时显示很多窗口，而是只会重新加载程序的一部分，就好像它是 Web 中的 ajax 调用一样。

IE 我想根据选择的选项在 JPanel 中显示不同的内容，但现在如何。

如果您能给我一些提示、要使用的物品、更好的选择或一些例子，不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:14:57.337

如果您是 Web 开发人员，那么它应该很简单，因为它的工作方式与 JavaScript 类似：您需要在树 ( `TreeSelectionListener`) 和菜单项 ( `ActionListener`) 上注册一个事件侦听器。当用户选择一个节点或选择菜单项时，您感兴趣的事件（节点选择，或对菜单项执行的操作）将被触发，您的侦听器将被调用，此侦听器只需替换面板满足于新的。

阅读[有关 JTree](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#select)的[教程和有关 JMenu](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#event)的教程以获得更多指导。

# c# - wpf ListBox 控件：简单的 GetSelectedValue / item-value

> ID：13536272
> 
> 赞同：0
> 
> 时间：2012-11-23T22:09:26.353
> 
> 标签：c#, wpf, listbox, controls

列表框不只是一个组合框替换绑定（值被暴露）

Xaml

```
 <ListBox SelectionChanged="LBX_AddTaskOptions_SelectionChanged"  HorizontalAlignment="Left" Margin="19,29,0,0" Name="LBX_AddTaskOptions" VerticalAlignment="Top" Width="125" FontWeight="Bold" Background="Beige">
                        <ListBoxItem Background="Beige" FontWeight="Bold" v>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="internet"></TextBlock>
                                <Image Source="Images\IE_BlackRed.png" Height="30"></Image>
                            </StackPanel>
                        </ListBoxItem>
                        <ListBoxItem Background="Beige" FontWeight="Bold">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="localFolder"></TextBlock>
                                <Image Source="Images\Folder_Black.png" Height="30"></Image>
                            </StackPanel>
                        </ListBoxItem>
                    </ListBox> 
```

代码隐藏

```
 private void LBX_AddTaskOptions_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var SelItm = LBX_AddTaskOptions.SelectedItem.ToString();

        MessageBox.Show(Sel);

    } 
```

我已经搜索过这个问题，虽然答案只针对复杂问题，因为我是新的 .net 开发人员，我知道提取 DDL 文本/值的所有方法，我什至做了扩展，但不知道如何进行这个简单的值提取

不应该很简单吗？

messageBox 显示控件的名称（：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:16:36.700

这不是 XAML 的正确方法。您不想列出每个项目的标记 - 相反，使用 an`ItemTemplate`来定义它的外观，并使用绑定来呈现实际项目：

```
<ListBox SelectionChanged="LBX_AddTaskOptions_SelectionChanged" Name="LBX_AddTaskOptions">
    <ListBox.ItemTemplate>
        <ListBoxItem Background="Beige" FontWeight="Bold" v>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding}" />
                <Image Source="Images\IE_BlackRed.png" Height="30" />
            </StackPanel>
        </ListBoxItem>
    </ListBox.ItemTemplate>
</ListBox> 
```

将 ListBox 绑定`ItemsSource`到模型数据本身（即本例中的字符串数组）。现在，最终您可能想要使用视图模型，但您也可以在加载时从代码中添加项目：

```
string[] ListBoxItems = new string[] { "internet", "local folder" };
LBX_AddTaskOptions.ItemsSource = ListBoxItems; 
```

这应该会`SelectedValue`为您提供正确的值。

* * *

[**脚注**——你*可以*使用你在问题中写出的标记来获得选定的值——但这会很*丑陋*，并且会破坏 XAML 的整个目的。您需要转换`SelectedItem`为 a `ListBoxItem`，然后获取它的孩子并将*其*转换为 StackPanel，获取它的孩子等等，您就明白了。然后，当然，如果标记发生变化，您刚刚编写的代码将不再有效。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:23:03.833

您在所选值中获得的项目是一个 ListBoxItem，其中包含一个控件。如果你想像文本一样提取值，那么你必须这样做

```
private void LBX_AddTaskOptions_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var SelItm = LBX_AddTaskOptions.SelectedItem as ListBoxItem;
        var StackPanel = SelItm.Content as StackPanel;
        foreach (var child in StackPanel.Children)
        {
            if(child is TextBlock)
            {
                MessageBox.Show((child as TextBlock).Text);
            }
        }

} 
```

您必须深入研究控件以获取实际文本。有很多方法可以获得价值，但这是非常基本的方法。

调用 ToString() 方法只会将当前对象转换为一个字符串，即 ListBoxItem。

# cocoa-touch - 使用方法在不同类之间传递数据的问题

> ID：13536276
> 
> 赞同：0
> 
> 时间：2012-11-23T22:10:23.233
> 
> 标签：cocoa-touch, parameter-passing

我在课堂上有这个：

```
 NSString *globalMidiData = @"30a0a00\n";

    switch (IndicatorCheckNXT) {
        case 1:
            [testRobot checkTestRobot:globalMidiData];
            break;

        default:

            break;
    } 
```

在另一堂课中，我有这个：

```
-(void) checkTestRobot: (NSString *)midiDataGlobal{
    bool pressed;
    bool pressed2;
    NSString *miawmiaw =[NSString alloc];
    miawmiaw=midiDataGlobal;
} 
```

我收到了这条消息：

-[AppDelegate checkTestRobot:]：无法识别的选择器发送到实例 0x18acb0 2012-11-23 20:45:31.755 Example1[477:707] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[AppDelegate checkTestRobot:]：无法识别的选择器发送到实例 0x18acb0'

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:46:30.007

显然你发送`checkTestRobot`到错误的对象。`testRobot`似乎指向 AppDelegate 而不是你的类的实例。

你也应该替换这个：

```
NSString *miawmiaw =[NSString alloc];
miawmiaw=midiDataGlobal; 
```

和：

```
NSString *miawmiaw = [midiDataGlobal copy]; 
```

# ruby-on-rails - Rails 应用程序 - send_data 从数据库发送乱码文件

> ID：13536280
> 
> 赞同：0
> 
> 时间：2012-11-23T22:11:39.757
> 
> 标签：ruby-on-rails, sql-server, ruby-on-rails-3, ms-access, ruby-on-rails-3.2

我正在使用 rails 应用程序来显示存储在 sql server db 中的数据。数据输入都是通过 MS Access 前端进入 sql server db 完成的。rails 应用程序是通过访问应用程序输入的信息的“只读”查看器。

在访问前端，我使用绑定的对象框架让用户将各种类型的文档（.pdf、.msg、.docx 等）上传到数据库中。该对象存储在我的 sqlserver 上的 varbinary 字段中。这在使用 Access 前端时可以正常工作。使用正确的主机应用程序正确检索和显示文档。

问题在于将这些相同的对象发送回以通过 rails 应用程序查看时。

当我尝试通过浏览器将二进制数据作为文件发送时，收到的文件无法被其主机应用程序读取。发送下来的文件的文件扩展名是正确的，但应用程序似乎无法读取它们。我肯定会遇到一些问题——当我在记事本中检查文件时，我看到了文本片段，但文件有问题，因此 MS Word 或 PDF 阅读器等无法读取它们。

控制器中的代码非常简单：

```
def view_word_doc

  a=Attachment.find(params[:id])
  send_data a.Document, :filename => 'flibber.docx'
 end 
```

（文档是具有 varbinary 的表中的字段）

这在浏览器中有预期的结果，我被问到是否要打开或保存文件，它尝试使用 word 打开文档。但是字说文件已损坏。当我尝试打开 .pdf、.msg 文件等时，结果类似。

我也尝试使用 send_file。在那种情况下，我得到一个控制器错误——

AttachmentsController#view 中的编码::UndefinedConversionError

"\x81" 到 UTF-8 从 Windows-1252 到 UTF-8 的转换

我已将类型保留为默认值，我理解为 Application/Octet-stream 但我不太熟悉这意味着什么。

正如我所提到的，这一切都适用于访问前端。只是无法在rails中正确发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-05T03:28:05.910

您可能已经编码以将文件作为`GET`routes.rb 中的一种方法接收，因此它会尝试在浏览器中内联/显示它们，或者可能是视图中使用的链接，而它需要是一个使用该**`POST`**方法的按钮默认。

# iphone - UINavigationBar 与模态 UITableView 一起移动

> ID：13536281
> 
> 赞同：1
> 
> 时间：2012-11-23T22:11:53.623
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

我有一个模态显示`UITableView`，我需要在 Interface Builder 中添加一个导航栏（用于保存和取消）。现在，当我滚动时，导航栏会随着表格视图移动。有什么办法可以将其锁定在顶部吗？

# java - 在sqlite中删除某些具有特定数据的行，这些数据在使用java的表中相对较旧

> ID：13536284
> 
> 赞同：-1
> 
> 时间：2012-11-23T22:12:00.697
> 
> 标签：java, android, eclipse, sqlite, delete-row

例如，我想删除 color1 为蓝色的前 3 个（最旧的）。

示例数据集：

```
_id  |  name  |  surname  |  color1  |  color2    
  1  |  mark  |  jacobs   |  blue    |  green    
  2  |  tony  |  hilo     |  black   |  red    
  13 |  lisa  |  xyz      |  blue    |  green    
  4  |  andre |  qwerty   |  blue    |  green    
  9  |  laura |  abc      |  black   |  red    
  14 |  kerr  |  jacobs   |  blue    |  green 
```

我想使用 execsql 而不是 db.delete.. 哪种方法更可取？我的代码应该是什么样的？

我将在 android 应用程序中的 eclipse 中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:47:04.483

```
db.execSQL("DELETE FROM MyTable WHERE _id IN " +
           "(SELECT _id FROM MyTable WHERE color1 = ? ORDER BY _id LIMIT 3)",
           new Object[] { "blue" }); 
```

`execSQL`使用起来非常好，特别是当命令非常复杂以至于使用`delete`需要更复杂的代码时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:44:14.643

不建议将 execSql 用于此操作或任何操作 SELECT/INSERT/UPDATE/DELETE，因为 execSql 不返回任何内容，例如受此查询影响的错误或行。

相反，虽然写出来需要更长的时间

```
Cursor c = db.query(table, new String[]{"_id"}, "color1" +"=?", new String[]{"blue"}, null,null,"_id ASC","3");
String ids="";
String qs = "";
for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
   ids+=c.getInt(c.getColumnIndex("_id")+",";
   qs+="?,"
}
ids= ids!=""?ids.substring(0, ids.length() - 1):ids;
qs= qs!=""?ids.substring(0, qs.length() - 1):qs;
db.delete(table, "_id IN ("+qs+")", ids.split(",")); 
```

这是为什么 execsql 不适合这种情况的参考 [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String) , java.lang.Object[])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:17:38.487

```
DELETE FROM table WHERE _id IN 
  (SELECT _id FROM table ORDER BY _id ASC LIMIT 3); 
```

# python - 在 Python 中生成一个简单的数学序列

> ID：13536288
> 
> 赞同：0
> 
> 时间：2012-11-23T22:12:45.520
> 
> 标签：python, functional-programming

我是 Python 新手，来自 PHP 背景。我印象深刻。有没有办法从此序列中获取数字列表：

```
i^2, i^2 + i, i^2 + 2i, ..., n 
```

即如果`i=2`和`n=30`：

`4, 6, 8, ..., 30`

好的，这是一个非常简单的序列，但是在功能上做这种事情的更一般的方法是什么？

也许有一些很好的函数式编程方式可以做到这一点？在 PHP 中，我想我会做一些函数，一些变量和交互，但 Python 可能能够更优雅地做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T22:16:20.573

您可以使用[range](http://docs.python.org/2/library/functions.html#range)执行此操作：

```
In [186]: i = 2; n = 30; range(i**2, n+1, i)
Out[186]: [4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:17:02.697

Python 有一个很酷的特性，叫做[List Comprehension](http://www.python.org/dev/peps/pep-0202/)。你可以用它来做这样的事情：

```
[i*i+2*n for n in range(30) if (i*i+2*n)<=30] 
```

# xml - 使用 xquery 进行查询处理

> ID：13536293
> 
> 赞同：1
> 
> 时间：2012-11-23T22:13:57.967
> 
> 标签：xml, xpath, xquery

我对 xquery 完全陌生，我无法从我的 xml 代码中获取正确的内容。

这是我正在处理的 xml 文件的示例：

```
<root>
  <name id = "a">
    <first> Mary </first>
    <last> Britton </last>
    <company> ABC </company>
    <phone> 203-942-0485 </phone>
  </name>

  <paper pid = "b">
    <pname> Hello </pname>
    <author> a </author>
  </paper>

  <publish>
     <pbid> b </pbid>
     <location>
         <place> new york </place>
         <sales> 100 </sales>
     </location>
     <location>
         <place> los angeles </place>
         <sales> 200 </sales>
     </location>
  </publish> 
```

我正在尝试为那些在纽约发表过至少 50 次销售的人获取作者的公司和电话号码。

现在，我只能获取位置信息，甚至无法获取发布信息。关于如何思考这个问题的任何提示或帮助？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:38:18.380

**这个纯 XPath 2.0 表达式**：

```
/*/name[for $auid in @id,
                  $p in /*/paper[author eq $auid],
                  $pid in $p/@pid
               return
                  sum(/*/publish[pbid[1] eq $pid]
                              /location[place eq 'new york']
                                    /sales
                     )
                  ge 50
           ]
            /(company | phone) 
```

**当针对以下 XML 文档进行评估时**（提供的文档消除了多余的空白，以避免必须构造一个`normalize-space()`几乎在任何地方都可以使用的不必要的复杂 XPath 表达式）：

```
<root>
    <name id = "a">
        <first> Mary </first>
        <last> Britton </last>
        <company> ABC </company>
        <phone> 203-942-0485 </phone>
    </name>
    <paper pid = "b">
        <pname> Hello </pname>
        <author>a</author>
    </paper>
    <publish>
        <pbid>b</pbid>
        <location>
            <place>new york</place>
            <sales> 100 </sales>
        </location>
        <location>
            <place> los angeles </place>
            <sales> 200 </sales>
        </location>
    </publish>
</root> 
```

**产生想要的正确结果**：

```
<company> ABC </company>
<phone> 203-942-0485 </phone> 
```

# c# - 如何在实体框架中使用自定义属性？

> ID：13536297
> 
> 赞同：0
> 
> 时间：2012-11-23T22:14:24.073
> 
> 标签：c#, entity-framework, data-access-layer

假设我有一个表单，用户可以通过几个下拉菜单设置自定义对象，然后保存该对象。我正在使用实体框架来处理 DAL。例如，他们正在设置配置文件并且必须选择最喜欢的颜色，而我在下拉菜单中有几种颜色。下拉列表是从颜色表中填充的。如果我想添加“其他”作为选项并允许用户输入一个值，该怎么办？当我保存对象时，我从下拉列表中获取颜色 ID 并将其保存到我的配置文件对象中，但如果他们选择其他，我想保存文本框的内容。有正常的处理方法吗？我不想在这里重新发明轮子。

这就是我打算尝试的，我将我的配置文件的颜色 id 属性设置为 0,1 关系，所以它不是必需的，然后我将添加一个带有颜色名称的 getter/setter 的部分配置文件类，在getter，如果颜色对象不为空，我将返回颜色的名称，如果为空，我将返回我的自定义属性值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:27:12.527

您描述的设计将产生参照完整性问题。您正在尝试创建一个作为颜色表外键的字段，如果不可能，则外键应指向另一个表。

更好的设计是让用户从下拉列表中选择一种颜色，如果颜色不可用，您可以通过某种对话框为用户提供将新颜色添加到颜色表的方法。然后将在下拉列表中选择他们添加的颜色。

# reporting-services - 使用共享数据集部署简单报表

> ID：13536299
> 
> 赞同：10
> 
> 时间：2012-11-23T22:14:35.533
> 
> 标签：reporting-services

我创建了一个新的 SSRS 项目，并添加了一个共享数据源。当我运行该项目时，我成功地得到了预期的结果。

但是，当我尝试部署报告时，我得到：

> 错误：无法部署报表，因为报表引用的共享数据源“/Data Sources/DataSource1”在报表服务器上不存在。

我猜我错过了一些非常简单和关键的东西，因为我是一个完整的初学者。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-07-25T14:44:47.720

1.  首先，部署数据源：

    ![在此处输入图像描述](../Images/2e2ac615a2a3d07d9af12e9fc5d4f004.png)

2.  然后，部署任何必要的共享数据集：

    ![在此处输入图像描述](../Images/bd0301cc94498b0b3f701f5c14be8137.png)

3.  现在，您将能够部署或运行​​您的报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-23T20:15:51.147

## 如果尝试部署数据集但仍然收到此错误...

我发现，如果你在已经创建了对应的共享数据集之后更改了共享数据源的名称，那么数据集中的“DataSourceReference”属性不会相应更改，无法通过向导进行编辑，它会抛出这个误导性的错误。

在共享**数据集**上，右键单击并转到“打开方式...”->“XML（文本）编辑器”。

在那里您将看到原始配置文件。确保`<DataSourceReference>`节点具有正确的值...

[![XML 示例](../Images/7b55db18295edb7e01a64d6d9aaff0cd.png)](https://i.stack.imgur.com/NBlya.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-18T20:23:24.370

场景：您已决定在报表中使用共享数据集，但尚未使用它。确保为此问题选择正确的数据集。

回答步骤：在 SSDT 上的“报告数据”选项卡上，双击数据集（不是带有文件夹符号的数据集）。它将打开数据集属性。- 当数据集属性打开时，请确保选择您的报告应该使用的数据集。- 按确定。-已解决![![在此处输入图像描述](../Images/4809f5637c92defa24478966b9482139.png)] [1](https://i.stack.imgur.com/AUZhJ.png)

# c++ - 构造函数与析构函数环境组装

> ID：13536302
> 
> 赞同：2
> 
> 时间：2012-11-23T22:15:05.033
> 
> 标签：c++, constructor, destructor

> 构造函数自下而上（成员优先）为类的成员函数组装执行环境。析构函数从上到下（成员最后）拆解它。
> 
> [来自 C++ 编程语言]

请问有人能描述一下吗？我知道成员函数在这里是指类的成员函数，但是“成员”首先是什么？这与堆栈上的功能有关吗？什么是“组装执行环境”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T22:19:23.120

意思是在构造函数中，先构造类的成员子对象，然后再运行构造函数的主体。使用析构函数则相反。首先析构函数的主体运行，然后成员子对象被销毁。

“成员函数的执行环境”只是可以通过定义的行为调用成员函数的环境。该环境是成员子对象是有效构造对象的环境。所以“为成员函数组装执行环境”，就是运行构造函数。这只是华丽的语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T22:19:08.650

这句话很抽象。*成员函数*的执行环境是类本身的成员和基类之一公开的成员。

想必，所谓“组装执行环境”，就是初始化类的所有成员和基类（注意成员函数不需要初始化）。

我不明白这与堆栈上的对象有什么关系。

一个例子：

```
class X {
public:
  X() // constructor initializes first a, then b, then c
  {
    // members are now accessible for member functions
    foo();
  }

  void foo() {
    // member function executes in the context of an object
    // a, b, and c mean this->a, this->b and this->
    std::cout << a << b << c << std::endl;
  }

  ~X() {} // destroys first c, then b and then a 
private:
  int a;
  double b;
  char c;
}; 
```

请注意，在上述情况下，您不需要写出析构函数。这只是为了示例的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:22:29.737

我认为“成员”是指变量，因此在类上调用构造函数时，它首先创建变量，然后为类对象的执行功能设置环境，因为它们可能依赖于成员变量。

函数的“组装执行环境”是指先初始化成员变量，以便在成员函数中调用它们。

While destructor first destroys the environment for all the functions of the class object and then destroys the member variables.

# php - Saving source code from HTML textarea to file

> ID：13536304
> 
> 赞同：1
> 
> 时间：2012-11-23T22:15:11.520
> 
> 标签：php, html, forms

I am saving C++ code from a textarea of an HTML form using PHP.

The problem is if my code is like below,

```
printf("%d\n");
printf("%d\n"); 
```

the code that is saved to the file is like this:

```
printf(\"%d\\n\");\nprintf(\"%d\\n\"); 
```

I want the original code to be saved in the file. If I use,

```
$sourceCode = str_replace('\n',"\n", $sourceCode);
$sourceCode = str_replace('\"',"\"", $sourceCode); 
```

the result is like below (saved in the file):

```
printf("%d\
");printf("%d\
"); 
```

It is clear that replacing `\n` in the source code replaces all the HTML created `\n` along with the `\n` that user gave as input (the original text). The only difference is user's input has an additional `\` before the `\n`, that is `\\n`.

How can I resolve the problem such that only the implicit escape characters will be replaced, but the explicit escape characters, that the user wrote himself, will not be changed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:52:20.650

正如 KenB 所说，我们需要查看您用于处理表单输入的 PHP 代码。

## 处理表单输入

在我看来，它似乎`addslashes`已用于表单输入。

*   如果您在代码中这样做，**请不要**. 这不是处理表单输入的正确方法。相反，您应该在使用之前使用正确的函数（例如`htmlspecialchars`或`mysqli_real_escape_string`）来转义输入。[阅读有关`addslashes`](http://php.net/function.addslashes.php).

*   如果您使用的是旧版本的 PHP，`magic_quotes_gpc`默认情况下是打开的，那么您应该修复它。[阅读有关“禁用魔术行情”的信息](http://php.net/security.magicquotes.disabling.php)。

## 剥离斜线

如果您无法控制添加斜杠的代码，则可以使用名为`stripslashes`.

```
$sourceCode = stripslashes($sourceCode); 
```

[阅读有关`stripslashes`](http://php.net/function.stripslashes.php).

## 了解转义序列

您的`str_replace`代码显示对转义序列缺乏了解和/或对单引号和双引号缺乏了解。

在下面的代码中，文字`\n`被换行符替换。使用双引号，PHP 将 解释`\n`为转义序列而不是文字字符串。

```
$sourceCode = str_replace('\n',"\n", $sourceCode); 
```

您想要的是用文字替换`\\n`文字`\n`。请注意，要指定文字反斜杠，它必须加倍；因此您在下面看到的三重反斜杠。

```
$sourceCode = str_replace('\\\n', '\n', $sourceCode); 
```

尽管下一行完成了您想要的...

```
$sourceCode = str_replace('\"',"\"", $sourceCode); 
```

......它可能写得不同。以下代码更易于阅读，无需转义文字`"`，并且不需要 PHP 来解释字符串。

```
$sourceCode = str_replace('\"', '"', $sourceCode); 
```

我已经将上面的代码作为**示例**来解释 PHP 如何解释转义序列，**但不要使用它们。**要么首先避免添加斜杠，要么使用适当的功能剥离它们，如本答案的第一部分所述。

阅读有关[转义序列](http://php.net/regexp.reference.escape.php)和[引用字符串](http://php.net/language.types.string.php)的更多信息。

## 行`\n`间字

我不确定你在做什么来`\n`在两行之间添加文字。我们需要查看您的代码。但是要在事后将其删除，您可以尝试以下操作

```
$sourceCode = str_replace(';\n', ";\n", $sourceCode); 
```

当然，您可能需要更正其他 C++ 行尾序列。所以最好不要一开始就添加它。

# php - 创建数据库字段与通过编码生成数据

> ID：13536305
> 
> 赞同：1
> 
> 时间：2012-11-23T22:15:31.707
> 
> 标签：php, mysql, mysqli

我想知道截止点在哪里是在数据库中创建一个字段来保存您的数据或在您的代码中自己生成数据。例如，我需要知道从数据库中的两个不同列生成的某个值。Column1-Column2 = Column3。所以这里的问题是在代码中生成该数据会更好，还是我应该创建一个 Column3 并将数据放在那里，同时填充数据库，然后稍后检索它。在我的情况下，数据是两位整数或单个字符串，基本上是小数据。

我正在使用最新的 mysql 编程语言是带有 mysqli 库的 php。此外，该网站不应获得太多流量，数据库的大小最多为 200k 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:19:26.670

这种类型的属性（列）称为[**派生属性**](http://www.rdbprime.com/Documentation/WebObjects/UsingEOModeler/4WorkingWithAttributes/Definition__Attributes_.html)。你不应该把它们放在数据库中，因为它们会增加*冗余*。只需在获取时放置`column1`和`column2`计算**它**。比如像这样，

```
`Column1` - `Column2` as `Column3` 
```

如果您每次创建一个带有附加派生属性的[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)时都不用这种方式进行查询。

注意，如果计算是 cpu 密集型的，你应该考虑使用缓存。然后你必须实现这个缓存如何以及何时失效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:19:52.107

这取决于计算的资源消耗程度以及计算的频率。在您的情况下，它非常简单，因此将差异存储在单独的列中将是多余的。您可以像这样在 SQL 查询中进行计算：

`SELECT col1, col2, col1-col2 AS col3...`

# ruby-on-rails - Need advice for image hosting websites

> ID：13536307
> 
> 赞同：6
> 
> 时间：2012-11-23T22:15:47.510
> 
> 标签：ruby-on-rails, database, image, hosting

I'm developing my personal photography portfolio using Ruby on rails. I'm not at all saving those images in my assets/images folder as there are many high resolution images which will cost increase in size of the site folder. So i thought to upload those pics on some image hosting websites so that ill only give a URL of that pic which will dramatically cost in decreasing the size of the site folder. Ive three questions regarding my portfolio: 1\. Is this the right way to do for portfolio websites? 2\. What are the best image hosting websites for such need? 3\. On what basis ill use the database for my portfolio?

Thanks.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T22:33:26.833

您应该查看一些 CDN（内容交付网络）服务，例如

*   [Amazon S3](http://aws.amazon.com/s3/) + [Amazon CloudFront](http://aws.amazon.com/cloudfront/)
*   [机架空间云文件](http://www.rackspace.com/cloud/public/files/)
*   [多云的](http://cloudinary.com/)

Ruby 有许多用于管理此类云服务的 gem。例如：

*   [雾宝石（由](https://github.com/fog/fog)[Heroku](http://www.heroku.com)和[Engine Yard](http://www.engineyard.com/)的人积极开发）
*   [云宝石](https://github.com/cloudinary/cloudinary_gem)
*   [carrierwave gem](https://github.com/jnicklas/carrierwave)（处理自动上传到 CDN 和数据库存储）
*   [carrierwave + cloudinary](https://gist.github.com/Hinsei/346eebe1175e49296b13a5f1e28850a6)（简单教程在这里）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T06:22:19.727

您还可以使用 Paperclip，它也可以链接到 AWS 来存储所有图像并管理存储逻辑。

[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

# css - Can extremely nested CSS slow down a web page?

> ID：13536313
> 
> 赞同：0
> 
> 时间：2012-11-23T22:16:25.473
> 
> 标签：css

I've a `table` on my web application's dashboard. Rows are added to it dynamically by one of the Backbone's view. Although addition of new element is fast, scrolling lags when the number of `<tr>`s exceed 100.

I had a `mouseout` event binding on each `<tr>` which I've got rid of now. This hasn't solved the problem though. I'm considering CSS to be the culprit now. I've nested styles defined for `tbody:first-child`, `tr:first-child`, `td:last-child` for both, normal and `hover` state, along with general styling for `tbody`, `tr`, `td` and `tbody:hover`, `tr:hover`, `td:hover`.

Although I very much doubt this is the reason for the lag, I'm left with no other suspect. Is it possible that CSS is adding to the slow down?

CSS - [https://gist.github.com/4138323](https://gist.github.com/4138323)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:21:22.130

似乎不是深度嵌套的 CSS 减慢了它的速度。这可能完全模糊，但我仍然会发布对我有用的内容。

我的设置是向 a 添加 100`<tr>`秒和大约 40`<tbody>`秒，`<table>`然后根据用户活动将其删除/重新渲染。这当然在 IE 中不起作用，因为 IE 不允许在加载`<tr>`后添加 s 。`DOM`因此我求助于使用`div`s 和`span`s ，令人惊讶的是，这减少了其他浏览器的延迟。现在一切都很顺利。

# rational-team-concert - RTC client: get current work item?

> ID：13536314
> 
> 赞同：2
> 
> 时间：2012-11-23T22:16:31.007
> 
> 标签：rational-team-concert

I'm looking for a way to extend the RTC client to get the current work item programmatically, or even better add a listener that notifies me whenever the current work item is changed.

I don't know where to start. Any hints?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:28:26.347

可以使用以下代码获取`IWorkItemActivationManager`：

```
IWorkItemActivationManager manager = ClientModel.getWorkItemActivationManager(); 
```

这位经理，可以使用该方法`getActiveWorkItem`获得`IWorkItemHandle`：

```
IWorkItemHandle handle = manager.getActiveWorkItem(); 
```

然后可以使用以下代码获取`IWorkItem`：

```
IAuditableClient auditableClient= (IAuditableClient) Controller.getInstance().getTeamRepository().getClientLibrary(IAuditableClient.class);
IWorkItem item = auditableClient.resolveAuditable(handle, com.ibm.team.workitem.common.model.IWorkItem.FULL_PROFILE, null); 
```

在`ClientModel`以下包中：`com.ibm.team.workitem.rcp.core`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:15:32.617

我通常探索的一种方法是通过 REST 调用的 OSLC API。
激活 Chrome 及其“开发者工具”后，我单击 Web 客户端并查看完成的请求。
这表明所涉及的服务类型。

然后您可以查看“[如何使用 Rational Team Concert 变更管理服务](https://jazz.net/library/article/352)”，它说明了这些服务的结构。

将它与“ [Extending Rational Team Concert 3.x](https://jazz.net/library/article/784/) ”结合起来，您就可以从那里开始了。

# qooxdoo - 如何从 qooxdoo qx.event.type.Rest 获得响应？

> ID：13536323
> 
> 赞同：0
> 
> 时间：2012-11-23T22:17:21.693
> 
> 标签：qooxdoo

在[http://manual.qooxdoo.org/current/pages/communication/rest.html](http://manual.qooxdoo.org/current/pages/communication/rest.html)的文档中指出：

> 处理程序接收 qx.event.type.Rest 事件，除其他属性外，还包括响应。

但是 qx.event.type.Rest 没有响应 - [http://demo.qooxdoo.org/current/apiviewer/#qx.event.type.Rest](http://demo.qooxdoo.org/current/apiviewer/#qx.event.type.Rest)

如何得到这样的回应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:25:48.130

您必须使用请求对象来访问响应。请求对象将返回一个 qx.io.request.AbstractRequest [1]，其中包括一些查询响应的方法。

[1] [http://demo.qooxdoo.org/devel/apiviewer/#qx.io.request.AbstractRequest](http://demo.qooxdoo.org/devel/apiviewer/#qx.io.request.AbstractRequest)

# c++ - OpenCV安装，未解析的外部符号

> ID：13536331
> 
> 赞同：0
> 
> 时间：2012-11-23T22:18:15.623
> 
> 标签：c++, opencv, linker, unresolved-external

> **可能重复：**
> [OpenCV：链接错误，无法解析外部符号 _cvResize 和 _cvCvtColor](https://stackoverflow.com/questions/11095375/opencv-link-error-cant-resolve-external-symbol-cvresize-and-cvcvtcolor)
> [什么是未定义的引用/未解析的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我已经尝试了他们网站上的所有教程，以及 stackoverflow 上的解决方案，但我仍然找不到解决方案。

我已经做了什么：

1-添加了包含标题的文件夹。

2-将 lib 文件夹添加到其他 lib 目录

3-将 opencv_core243d.lib 和 opencv_highgui243d.lib 添加到其他依赖项。

我正在尝试编译的代码：

```
#include <stdio.h>
#include <cv.h>
#include <highgui.h>

int main(int argc, char* argv[])
{
if (argc < 2)
{
    printf("Usage: ./opencv_hello <file.png>\n");
    return -1;
}

    IplImage* img = cvLoadImage(argv[1], CV_LOAD_IMAGE_UNCHANGED);
if (!img)
{
    return -1;
}
cvNamedWindow("display", CV_WINDOW_AUTOSIZE);
    cvShowImage("display", img );

    cvWaitKey(0);        

    return 0;
} 
```

链接器给出了有关未解析符号的错误，例如 cvLoadImage、cvWaitKey 等。我唯一能想到的就是库，但我已经包含了它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:36:35.893

据我了解，您使用的是 OpenCV 2.4

在这种情况下，我想建议使用 C++ 接口。

```
#include <stdio.h>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

int main(int argc, char* argv[])
{

if (argc < 2)
{
    printf("Usage: ./opencv_hello <file.png>\n");
    return -1;
}

cv::Mat img = imread(argv[1]);
if (img.empty())
{
   return -1;
}

imshow("display", img);

waitKey(0); <---- cvWaitKey() is a C interface functio, waitKey() - C++

return 0;
} 
```

# function - Personalizing narrative text with three values (name, gender, and character)

> ID：13536339
> 
> 赞同：0
> 
> 时间：2012-11-23T22:19:41.137
> 
> 标签：function, variables, onchange, html, personalization

Is something wrong with this code? It's not working in Google sites HTML Box, and I don't know if it's my problem or Google's ...

I'm just trying to personalize text according to user-inputed name, gender, and character.

```
<script>

function personalize (name, gender, character) {
    var Name = name;

  if (Name !== "") {

    $('.NameComma').html(name + ", ");

    if (character === 'baptist') {

      $('.baptistname').html(name);
    }
    else {
      $('.baptistname').html("");
    }
  }
  else {
    $('.Name').html("");
  }

  if (gender === 'male') {
    $('.mychild').html("My son, ");
  }
  else if (gender === 'female') {
    $('.mychild').html("My daughter, ");
  }
  else {
    $('.mychild').html("");
  }

  if (character === 'baptist') {
    $('.baptist1').html("You");
  }
  else {
    $('.baptist1').html("John the Baptist");
  }

  if (character === 'philip') {
    $('.philip1').html("you");
  }
  else {
    $('.philip1').html("Philip");
  }

  if (character === 'nathanael') {
    $('.nathanael1').html("you");
  }
  else {
    $('.nathanael1').html("Nathanael");
  }
}
</script>

<p><b>Name:</b> <input name="name" type="text" value="" style="position: relative; top:     -4px;" id="namebox" onchange="personalize(document.getElementById('namebox').value,document.getElementById('gender').value,document.getElementById('characterselect').value)"/>
<select name="gender" id="genderselect" onchange="personalize(document.getElementById('namebox').value,document.getElementById('genderselect').value,document.getElementById('characterselect').value)">
  <option id="none" value="none">Select your gender:</option>
  <option id="male" value="male">Male</option>
  <option id="female" value="female">Female</option></select>
<select name="character" id="characterselect" onchange="personalize(document.getElementById('namebox').value,document.getElementById('genderselect').value,document.getElementById('characterselect').value)">
  <option id="none" value="none">Choose your character:</option>
  <option id="baptist" value="baptist">John the Baptist</option>
  <option id="philip" value="philip">Philip</option>
  <option id="nathanael" value="nathanael">Nathanael</option>
  </select>

<span class="baptist1">John the Baptist</span><span class="NameComma"></span><span class="mychild"></span> told <span class="philip1">Philip</span>, who told <span class="nathanael1">Nathanael</span>. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:26:12.350

您的代码引用了一个名为 的下拉列表`gender`，但实际上它被称为`genderselect`

将您的第一个 onchange 处理程序更改为正确的 ID。

```
onchange="personalize(document.getElementById('namebox').value,document.getElementById('genderselect').value,document.getElementById('characterselect').value)" 
```

# java - IndexOutOfBounds with Index 14, size 16\. How?

> ID：13536340
> 
> 赞同：3
> 
> 时间：2012-11-23T22:19:51.243
> 
> 标签：java, exception, collections, arraylist

How can the index be out of bounds when it actually is in bounds as shown by the stacktrace? Although the context may not matter we are working on a Lua parser/VM for an IDE on the Netbeans platform and this keeps creeping up. How can this be? Some strange concurrency issue? Thanks in advance for any insights.

```
java.lang.IndexOutOfBoundsException: Index: 14, Size: 16
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at org.netbeans.lib.lexer.BatchTokenList.existingToken(BatchTokenList.java:197)
    at org.netbeans.lib.lexer.BatchTokenList.tokenOffset(BatchTokenList.java:150)
    at org.netbeans.api.lexer.TokenSequence.offset(TokenSequence.java:256)
    at com.MYDevelopers.LuaSupportCompiler.TokenManager.getTokenStart(TokenManager.java:230)
    at com.MYDevelopers.LuaSupportCompiler.CompilationUnit.getCurrentLocation(CompilationUnit.java:459)
    at com.MYDevelopers.LuaSupportCompiler.CompilationUnit.expressionImp(CompilationUnit.java:654)
    at com.MYDevelopers.LuaSupportCompiler.CompilationUnit.expression(CompilationUnit.java:647)
    at com.MYDevelopers.LuaSupportCompiler.CompilationUnit.RHSexpression(CompilationUnit.java:643)
    at com.MYDevelopers.LuaSupportCompiler.CompilationUnit.chunk(CompilationUnit.java:1004)
    at com.MYDevelopers.LuaSupportCompiler.CompilationUnit.compile(CompilationUnit.java:164)
    at com.MYDevelopers.LuaSupportCompiler.CompilationUnit.compileIfRequired(CompilationUnit.java:148)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.SourcesManager.compile(SourcesManager.java:222)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.SourcesManager.compileAndEvaluateIfRequired(SourcesManager.java:210)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.SourcesManager.addSourceManager(SourcesManager.java:113)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.SourcesManager.addDirectory(SourcesManager.java:106)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.SourcesManager.addBootDirectory(SourcesManager.java:80)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.SourcesManager.addBaseLibraries(SourcesManager.java:72)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.SourcesManager.<init>(SourcesManager.java:47)
    at com.MYDevelopers.LuaSupport.LuaProject.CompilationManagers.GlobalCompilationManager.addProjectDirectory(GlobalCompilationManager.java:76)
    at com.MYDevelopers.LuaSupport.LuaProject.LuaProject.getSourcesManager(LuaProject.java:309)
    at com.MYDevelopers.LuaSupport.LuaProject.LuaProject$ProjectOpenHookImpl.projectOpened(LuaProject.java:599)
    at org.netbeans.spi.project.ui.ProjectOpenedHook$1.projectOpened(ProjectOpenedHook.java:84)
[catch] at org.netbeans.modules.project.ui.OpenProjectList.notifyOpened(OpenProjectList.java:1138)
    at org.netbeans.modules.project.ui.OpenProjectList.access$1600(OpenProjectList.java:134)
    at org.netbeans.modules.project.ui.OpenProjectList$LoadOpenProjects.loadOnBackground(OpenProjectList.java:434)
    at org.netbeans.modules.project.ui.OpenProjectList$LoadOpenProjects.run(OpenProjectList.java:312)
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1452)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:2032) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T22:27:33.150

通过阅读 的源代码`ArrayList`，您可以看到它`rangeCheck`被实现为

```
 private void rangeCheck(int index) {
   if (index >= size)
     throw new IndexOutOfBoundsException(outOfBoundsMsg(index));
 } 
```

所以我的猜测只是并发。在抛出此异常时，没有其他明显的方法可以使索引更小。

在引发异常之后，大小会以某种方式发生变化，在这种情况下

*   您尝试从列表中检索超出范围的项目
*   同时另一个线程正在添加另一个元素，因此`size`在抛出异常时会增加大小
*   异常最终呈现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T08:21:52.343

我也有同样的例外`sun.print.Win32MediaSize`，并且得到了答案的帮助，这是一个并发问题。

日志输出：

```
java.lang.IndexOutOfBoundsException: Index: 14, Size: 15
at java.util.ArrayList.rangeCheck(ArrayList.java:635)
at java.util.ArrayList.get(ArrayList.java:411)
at sun.print.Win32MediaSize.findMediaName(Win32PrintService.java:1742)
at sun.print.Win32PrintService.initMedia(Win32PrintService.java:418)
at sun.print.Win32PrintService.getSupportedAttributeValues(Win32PrintService.java:1367)
at sun.print.RasterPrinterJob.updatePageAttributes(RasterPrinterJob.java:548)
at sun.print.RasterPrinterJob.setPrintable(RasterPrinterJob.java:997)
at net.sf.jasperreports.engine.export.JRPrintServiceExporter.exportReport(JRPrintServiceExporter.java:467) 
```

*   对于构造函数`public Win32MediaSize(String name, int dmPaper)` ，如果**线程 1**添加一个字符串`winStringTable`，但不添加对象`winEnumTable`
*   那么如果**线程 2**调用该方法`findMediaName`，就会导致`indexoutofbounds`异常。

代码如下

```
package sun.print;

import java.util.ArrayList;

import javax.print.attribute.EnumSyntax;
import javax.print.attribute.standard.MediaSize;
import javax.print.attribute.standard.MediaSizeName;

class Win32MediaSize extends MediaSizeName {
    private static ArrayList winStringTable = new ArrayList();
    private static ArrayList winEnumTable = new ArrayList();
    private static MediaSize[] predefMedia;
    private int dmPaperID; // driver ID for this paper.

    private Win32MediaSize(int x) {
        super(x);

    }

    private synchronized static int nextValue(String name) {
      winStringTable.add(name);
      return (winStringTable.size()-1);
    }

    public static synchronized Win32MediaSize findMediaName(String paramString) {
        int i = winStringTable.indexOf(paramString);
        if (i != -1) {
            return ((Win32MediaSize) winEnumTable.get(i));
        }
        return null;
    }

    public static MediaSize[] getPredefMedia() {
        return predefMedia;
    }

    public Win32MediaSize(String name, int dmPaper) {
        super(nextValue(name));
        dmPaperID = dmPaper;
        winEnumTable.add(this);
    }

    private MediaSizeName[] getSuperEnumTable() {
      return (MediaSizeName[])super.getEnumValueTable();
    }

    static {
        Win32MediaSize localWin32MediaSize = new Win32MediaSize(-1);

        MediaSizeName[] arrayOfMediaSizeName = localWin32MediaSize
                .getSuperEnumTable();
        if (arrayOfMediaSizeName != null) {
            predefMedia = new MediaSize[arrayOfMediaSizeName.length];

            for (int i = 0; i < arrayOfMediaSizeName.length; ++i)
                predefMedia[i] = MediaSize
                        .getMediaSizeForName(arrayOfMediaSizeName[i]);
        }
    }

    int getDMPaper() {
        return dmPaperID;
    }

    protected String[] getStringTable() {
      String[] nameTable = new String[winStringTable.size()];
      return (String[])winStringTable.toArray(nameTable);
    }

    protected EnumSyntax[] getEnumValueTable() {
      MediaSizeName[] enumTable = new MediaSizeName[winEnumTable.size()];
      return (MediaSizeName[])winEnumTable.toArray(enumTable);
    }

    } 
```

编辑：

我正在做一个带有 5 个线程的打印系统来调用 java print api，有时也会遇到同样的异常。我研究了很多，直到在这里我看到了并发点。
我通过仅通过 1 个线程初始化 printService 解决了我的问题，我在这里记录它以提醒`sun.print.Win32MediaSize`我在上面描述的课堂上存在并发问题。

# ruby - Getting multiple instances of data when printing (Ruby)

> ID：13536343
> 
> 赞同：-1
> 
> 时间：2012-11-23T22:20:52.093
> 
> 标签：ruby, arrays

```
file = File.open("file.dat")
columns = []
file.each_line do |line|
  columns << line.split(" ")[0 , 3]
end

print columns
true_columns = columns[8..37]
p true_columns

true_columns.each do |data|
  min_col = true_columns.min_by{|data| data[1].to_i - data[2].to_i}
  print min_col[0]
end 
```

When I try to find the min difference between columns, I get 30 answers of the same exact thing.

```
print true_columns 
  => [["1", "88", "59"], ["2", "79", "63"], ["3", "77", "55"], ["4", "77", "59"], ["5", "90", "66"], ["6", "81", "61"], ["7", "73", "57"], ["8", "75", "54"], ["9", "86", "32*"], ["10", "84", "64"], ["11", "91", "59"], ["12", "88", "73"], ["13", "70", "59"], ["14", "61", "59"], ["15", "64", "55"], ["16", "79", "59"], ["17", "81", "57"], ["18", "82", "52"], ["19", "81", "61"], ["20", "84", "57"], ["21", "86", "59"], ["22", "90", "64"], ["23", "90", "68"], ["24", "90", "77"], ["25", "90", "72"], ["26", "97*", "64"], ["27", "91", "72"], ["28", "84", "68"], ["29", "88", "66"], ["30", "90", "45"]]

print min_col
  => ["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]["14", "61", "59"]

print min_col[0]
  =>141414141414141414141414141414141414141414141414141414141414 
```

How and why is the code coming up 30 times every time I print it? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:55:19.147

The `min_by` method does all the looping. Change this bit:

```
true_columns.each do |data|
  min_col = true_columns.min_by{|data| data[1].to_i - data[2].to_i}
  print min_col[0]
end 
```

to

```
min_col = true_columns.min_by{|data| data[1].to_i - data[2].to_i}
p min_col 
```

See if that results in something useful.

# javascript - Hide/show html content with javascript

> ID：13536345
> 
> 赞同：0
> 
> 时间：2012-11-23T22:21:18.730
> 
> 标签：javascript

I'm looking for javascript that will allow more HTML to appear on a website when a user clicks on an icon. I'm working on my first ever mobile design, and am building a prototype with html,css and javascript. Here is what I have so far: [http://www.patthorntonfiles.com/snk_mobile](http://www.patthorntonfiles.com/snk_mobile)

What I want to happen is when users click on the search icon at the top, a search box appears. I don't want the jquery accordion effect or something similar. I just want some HTML to appear and then disappear when a user clicks on the icon again or hits search.

Any recommendations for code or libraries for me to look at what be great. I don't need you to give me the code, but my Google searches aren't turning up exactly what I'm looking for.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T22:31:11.023

这是一个非 jQuery 解决方案：

```
document.getElementById("identifier").style.setProperty("visibility", "hidden"); 
```

和

```
document.getElementById("identifier").style.setProperty("visibility", "visible"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:30:15.193

我知道你说你不想使用 jQuery 手风琴效果，而是使用 jQuery 为不透明度设置动画？请看下文。

```
$("#idClicked").click(function() {
   $("#searchBox").fadeTo("fast", 1);
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-23T22:28:45.043

jQuery 的*hide()*和*show()*将完全做到这一点（它们没有任何手风琴效果，它们只是出现和消失而没有装饰）。

```
$('#HtmlId').hide();
$('#HtmlId').show(); 
```

此外，您还会得到*toggle()*，如果显示则隐藏，如果隐藏则显示：

```
$('#HtmlId').toggle(); 
```

---- 编辑 ---- 阅读您的评论后，假设您有 html：

```
<li><img id='hideShowIcon' src="patthorntonfiles.com/snk_mobile/search.gif"; width="50px'"/></li> 
```

隐藏/显示的 div 是：

```
<div id="search"> <gcse:search></gcse:search> </div> 
```

然后使用执行切换的回调函数将 click 事件绑定到图像：

```
$("#hideShowIcon").click(function() {
    $('#search').toggle();
}); 
```

----- 编辑 2-----

我看到了您的网站，但您没有准备好文档的功能。基本上它应该是这样的：

```
$(document).ready(function() {
  $("#hideShowIcon").click(function() {
        $('#search').toggle();
  });
 }); 
```

如果你不添加这个，jQuery 会尝试将操作绑定到一个尚不存在的元素。

# java - Reading request halts server

> ID：13536347
> 
> 赞同：1
> 
> 时间：2012-11-23T22:21:39.700
> 
> 标签：java, http, sockets

I have another problem with Java sockets. Server's socket doesn't interpret request as it should. I presume that there is problem with reading the line after HTML header but I have no idea what is wrong with this code. TIA.

Here is code fragment:

```
@Override
public void run() {
    DataOutputStream dout = null;
    BufferedReader reader = null;
    try {
        dout = new DataOutputStream(socket.getOutputStream());
        reader = new BufferedReader(
                new InputStreamReader(
                        socket.getInputStream(), UTF-8"));

        String requestString = reader.readLine();
        StringTokenizer tokenizer = new StringTokenizer(requestString);
        String httpMethod = tokenizer.nextToken();
        String httpQueryString = tokenizer.nextToken();

        System.out.println("method: " + httpMethod);
        System.out.println("query: " + httpQueryString);
        String line;
        int i = 0;
        while ( ! (line = reader.readLine())
                .equals("")) {
            System.out.println(i++ + " : " + line);
        }

        //DEBUG
        System.out.println("foo");
    // HERE IS THE PROBLEM !!!
        line = reader.readLine();
        System.out.println("aaa " + line);
        line = reader.readLine();
        System.out.println("bbb " + line);
        line = reader.readLine();
        System.out.println("ccc " + line);

        // Pseudocode
        if (GET) {
            if ("/") {
                ...
            } else if (isFile) {
                ...
            } else {
                ...
            }
        } else if (POST) {
            ... //TODO
        } else {
            Error 404
        }

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        //Cleaning
        try {
            reader.close();
            dout.close();
            socket.close();
        } catch (IOException e) {
            Logger.getAnonymousLogger().warning("Socket cannot be closed");
        }
    }
} 
```

And output I get:

```
INFO: Server is RUNNING
INFO: Connection accepted
method: GET
query: /
0 : Host: 127.0.0.1:8001
1 : User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0
2 : Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
3 : Accept-Language: pl,en-us;q=0.7,en;q=0.3
4 : Accept-Encoding: gzip, deflate
5 : DNT: 1
6 : Connection: keep-alive
7 : Cache-Control: max-age=0
foo

--- in this place server halts ---
--- then I refresh page or do anything else that sends request (GET, POST) ---
--- and server receives 'remaining' part of the request ---

aaa null // in POST this line has send values
bbb null
ccc null
INFO: method = GET
INFO: Connection accepted
method: GET
query: /
0 : Host: 127.0.0.1:8001
1 : User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0
2 : Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
3 : Accept-Language: pl,en-us;q=0.7,en;q=0.3
4 : Accept-Encoding: gzip, deflate
5 : DNT: 1
6 : Connection: keep-alive
foo

--- in this place server halts ---
--- then I refresh page or do anything else that sends request (GET, POST) ---
--- and server receives 'remaining' part of the request --- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:27:44.863

请求没有剩余部分。GET 请求在空行之后停止。服务器被阻塞，因为没有传入数据（直到下一个请求）

# nginx - remove /profile/ from a link

> ID：13536348
> 
> 赞同：0
> 
> 时间：2012-11-23T22:21:43.107
> 
> 标签：nginx

On my site my users click on a profile and the link shows up as www.website.com/profile/username and I would like it to only be www.website.com/username - any suggestions on how I can do this

Note: my webserver is nginx so using rewrite rules is ok, but I would want to know how to write them in the config file

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:00:20.180

使用以下重写规则：

```
rewrite ^/profile/(.*)$ /$1 permanent; 
```

# mobile - OZEKI NG GATEWAY not receiving SMS messages

> ID：13536349
> 
> 赞同：0
> 
> 时间：2012-11-23T22:21:47.997
> 
> 标签：mobile, sms, sms-gateway

I'm working on a project in which I'm trying to get Ozeki to send and receive SMS messages from my Nokia 3110 classic.I have also configured the inbound route,outbound route,GSM modem service provider and standard user correctly.Sending messages is working fine but not receiving them. Please give me some solutions to this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:54:23.177

您的服务提供商是否肯定支持来自所有其他运营商的入站 SMS？SMS 路由是出了名的棘手，因为许多运营商和网关提供商只支持选择的其他提供商。

# python - Python web scraping

> ID：13536350
> 
> 赞同：0
> 
> 时间：2012-11-23T22:21:48.910
> 
> 标签：python

On using this regular expression in python :

`pathstring = '<span class="titletext">(.*)</span>'`
`pathFinderTitle = re.compile(pathstring)`

My output is:

```
Govt has nothing to do with former CAG official RP Singh:
Sibal</span></a></h2></div><div class="esc-lead-article-source-wrapper">
<table class="al-attribution single-line-height" cellspacing="0" cellpadding="0">
<tbody><tr><td class="al-attribution-cell source-cell">
<span class='al-attribution-source'>Times of India</span></td>
<td class="al-attribution-cell timestamp-cell">
<span class='dash-separator'>&nbsp;- </span>
<span class='al-attribution-timestamp'>&lrm;46 minutes ago&lrm; 
```

The text find should have stopped at first "< /span>".

Please suggest whats wrong here.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:24:38.163

`.*`是任意字符的*贪婪*匹配；它将消耗尽可能多的字符。相反，使用非贪婪版本`.*?`，如

```
pathstring = '<span class="titletext">(.*?)</span>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:28:05.440

我建议使用[pyquery](http://pypi.python.org/pypi/pyquery)而不是对正则表达式发疯……它基于 lxml，使 HTML 解析像使用 jQuery 一样容易。

像这样的东西就是你需要的一切：

```
doc = PyQuery(html)
doc('span.titletext').text() 
```

你也可以使用[beautifulsoup](http://pypi.python.org/pypi/BeautifulSoup/3.2.1)，但结果总是一样的：不要使用正则表达式来解析 HTML，有一些工具可以让你的生活更轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T22:28:48.933

`.*`将匹配`</span>`，所以它会一直持续到最后一个。

最好的答案是：不要用正则表达式解析 html。使用[lxml](http://lxml.de/installation.html)库（或类似的东西）。

```
from lxml import html

html_string = '<blah>'
tree = html.fromstring(html_string)
titles = tree.xpath("//span[@class='titletext']")
for title in titles:
    print title.text 
```

使用适当的 xml/html 解析器将为您节省大量时间和麻烦。如果您使用自己的解析器，您将不得不处理格式错误的标签、评论和无数其他事情。不要重新发明轮子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T00:12:13.810

你也可以很容易地使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)，它非常适合做这种事情。

```
#using BeautifulSoup4, install by "pip install BeautifulSoup4"
from bs4 import BeautifulSoup
soup = BeautifulSoup(html)
result = soup.find('span', 'titletext') 
```

然后`result`会在你正在寻找的时候举行`<span>`with 类。`titletext`

# android - Drag and drop between views

> ID：13536351
> 
> 赞同：0
> 
> 时间：2012-11-23T22:21:49.643
> 
> 标签：android, drag-and-drop, textview, viewgroup

I have a viewgroup with textviews that are added dynamically into the viewgroup. How would I add the ability to drag and drop a textview between other textviews.

![drag-and-drop-android-question](../Images/b6fcd5b7e43a9e4b4fa3e84bd8a960c7.png)

Is there a way to detect what view you have dropped it over.

If it makes it easier the textviews could be buttons.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:39:43.537

**在 API 11 及更高版本上，您可以使用内置功能**： [https ://developer.android.com/guide/topics/ui/drag-drop.html](https://developer.android.com/guide/topics/ui/drag-drop.html)

**在以前的版本中，您也可以手动完成**：

理论上，您必须为您的视图添加一个 onTouchListener，它会在向下操作时保存相对于视图位置的触摸位置。

然后，在接收到触摸移动事件时，您设置视图的位置以反映这一点。

在接收到 up 事件时，用户已放下视图，您检查当前坐标并将它们与其他视图进行比较，如果它在另一个视图之前，则将该视图向上移动并将移动视图的位置设置为与其他人再次。

您可以通过仅更改这些值将拖动限制为仅 x/仅 y。

# linux - rsync 和（后）处理同步文件

> ID：13536355
> 
> 赞同：4
> 
> 时间：2012-11-23T22:22:24.087
> 
> 标签：linux, bash, shell, imagemagick, rsync

我喜欢使用 shell 脚本将我的照片从一个（linux）磁盘分区同步到另一个（备份位置）。问题是，我需要重新缩放保存在备份位置的所有照片，例如使用`mogrify`.

是否可以对每个由 rsync 同步/复制的文件进行后处理？为了`mogrify`在每个同步文件上执行？

另一种方法可以使用 rsync (only) 来生成必须同步的文件列表。下一步：对`mogrify`每个列表条目运行一个循环，以便将缩放的照片输出到备份位置。

问题是，我必须在保存照片之前添加所有目录和子目录以保持原始文件夹结构。

使用 rsync 将“即时”处理文件夹创建。

那么：是否可以对与 rsync 同步的每个文件执行命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:12:57.397

`rsync`有一个`-i`/`--itemize-changes`标志来输出它对每个文件所做的恢复。

我建议你玩一下它，我看到它输出`>f+++++++++ file1`新文件、`>f..T...... file1`未更改文件、`>f.sT...... file1`更新等行...

有了它，您可以将此输出读入一个变量，并使用 and 解析`grep`它`cut`：

```
#!/bin/bash
log=$(rsync -i rsync-client/* rsync-server/)
newFiles=$(echo "$log" | grep '>f+++++++++' | cut -d' ' -f2)
for file in $newFiles
do
    echo "Added file $file"
done 
```

# javascript - 为什么 AJAX json 脚本返回额外的 0（零）

> ID：13536356
> 
> 赞同：6
> 
> 时间：2012-11-23T22:22:24.820
> 
> 标签：javascript, jquery, ajax, json, jsonp

我在 WordPress 中有一个 AJAX 函数，它调用一个 PHP 函数来返回数据库中临时记录的值。

当我使用 jQuery 调用该函数时，我收到了结果，但是它总是在值后面附加了一个额外的 0（零）。

这是我的 jQuery 函数：

```
(function($) {
    $(document).ready( function() {

        var AdvancedDashboardWidget = function(element, options)
        {
            var ele = $(element);
            var settings = $.extend({
                action: '',
                service: '',
                countof: '',
                query:   '',
                callback:''
            }, options || {});
            this.count=0;
            var url='';
            switch(settings.service)
            {
                case 'facebook':
                    if(settings.countof=='likes' || settings.countof=='talks')
                    {
                        ajaxCall(action,ele,settings);  
                    }
            }
        };

    var ajaxCall = function(action,ele,settings){
        opts = {
            url: ajaxurl, // ajaxurl is defined by WordPress and points to /wp-admin/admin-ajax.php
            type: 'POST',
            async: true,
            cache: false,
            dataType: 'json',
            data:{
                action: settings.action // Tell WordPress how to handle this ajax request
            },
            success:function(response) {
                //alert(response);
                ele.html(response);
                return; 
            },
            error: function(xhr,textStatus,e) {  // This can be expanded to provide more information
                alert(e);
                //alert('There was an error');
                return; 
            }
        };
        $.ajax(opts);
    };

        $.fn.advanceddashboardwidget = function(options)
        {
            return this.each(function()
            {
                var element = $(this);

                // Return early if this element already has a plugin instance
                if (element.data('advanceddashboardwidget')) return;

                // pass options to plugin constructor
                var advanceddashboardwidget = new AdvancedDashboardWidget(this, options);

                // Store plugin object in this element's data
                element.data('advanceddashboardwidget', advanceddashboardwidget);
            });
        };

    });
})(jQuery); 
```

还有更多的辅助函数，但是这是与 WordPress 通信并返回 PHP 函数值的主要 jQuery 函数。

问题是，如果该值返回为“ `99`”，例如，它将返回为“ `990`”

**这是 jQuery 调用的 PHP 函数：**

```
/**
* Get Facebook Likes
*/

public function get_facebook_likes(){

    echo 99;
} 
```

如果我将以上内容更改为`return 99;`我收到纯 0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-06T14:05:03.707

您的函数应使用[wp_send_json](http://codex.wordpress.org/Function_Reference/wp_send_json)将 PHP 编码为 JSON 并将其发送回 AJAX 请求处理程序。这也将停止执行任何后续 PHP，因此无需使用 exit 或 die。

因此，对于您的具体示例，您将使用：

```
/**
* Get Facebook Likes
*/

public function get_facebook_likes(){
   wp_send_json(99);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-21T04:34:04.637

这是一个老问题，但我要回答这个问题。`wp_send_json()`功能可能会有所帮助，但并非总是如此。有时您可能无法使用此功能。就像，当您通过 ajax 加载帖子时，您会得到一些模板部分，您可以使用该功能。这就是 WordPress 文档建议使用该`die()`功能的原因。

所以最后，你的 php 函数应该是这样的：

```
/**
* Get Facebook Likes
*/

public function get_facebook_likes() {
   echo 99;
   die();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:32:16.427

使用 Firebug 并查看实际传输和接收的网络数据。确定错误是来自 javascript 端还是 PHP 端。复制网络请求并将其粘贴到单独的浏览器窗口中以查看原始结果。如果是 PHP，请继续。如果是 javascript 在做某事，请告诉我们。

# sencha-touch - Sencha 触控面板未显示

> ID：13536359
> 
> 赞同：2
> 
> 时间：2012-11-23T22:22:42.477
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect

出于某种原因，我的表单面板没有显示。任何人都可以帮忙吗？我是新手，如果这很明显，我很抱歉！它是用 Sencha Architect 构建的，但我不明白为什么表单中没有显示任何字段？...

```
Ext.define('MyApp.view.Login', {
    extend: 'Ext.Container',

    config: {
        layout: {
            type: 'vbox'
        },
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                title: 'My Title'
            },
            {
                xtype: 'toolbar',
                docked: 'top',
                items: [

                    {
                        xtype: 'button',
                        text: 'Call'
                    },
                    {
                        xtype: 'button',
                        text: 'Email'
                    }                       
                ]
            },
            {
                xtype: 'container',
                flex: 1,
                border: 2,
                items: [
                    {
                        xtype: 'formpanel',
                        styleHtmlContent: true,
                        items: [
                            {
                                xtype: 'fieldset',
                                title: 'MyFieldSet',
                                items: [
                                    {
                                        xtype: 'textfield',
                                        label: 'Field'
                                    },
                                    {
                                        xtype: 'textfield',
                                        label: 'Field'
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-23T10:47:19.387

要在其他容器中正确使用 Sencha Touch 2.3+ 显示表单面板（Ext.form.Panel），您需要添加`scrollable: null`属性

```
{
    xtype: 'formpanel',
    scrollable: null,         
    items: [
        ...
    ]
} 
```

[请参阅此处的](https://stackoverflow.com/questions/9459732/sencha-touch-2-formpanel-not-showing-up-properly-layout-issue)讨论

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:27:49.597

`layout`将登录视图的更改`vbox`为`fit`。然后将`layout`包含您的表单面板的容器设置为`fit`也。

检查[此链接](http://docs.sencha.com/touch/2-0/#!/guide/layouts)以获取有关 Sencha Touch 中布局的更多信息。

# objective-c - 简单的多线程应用程序有时会失败

> ID：13536363
> 
> 赞同：2
> 
> 时间：2012-11-23T22:22:50.740
> 
> 标签：objective-c, multithreading, cocoa

我正在做这个多线程应用程序只是为了看看@synchronized 指令是如何工作的。我读过如果所有线程都具有与@synchronized 的参数相同的对象，那么它们都在同一个锁上等待。所以我想使用 self作为参数，因为它对于所有线程都是相同的。
在这个应用程序中，有一个文本字段被所有线程多次编辑。**我不关心性能，这只是一个测试**，所以我没有将@synchronized 指令放在 for 之前，而是放在里面。

我使用的属性：

```
@property (weak) IBOutlet NSTextField *textField;
@property (nonatomic, copy) NSNumber* value;
@property (nonatomic,copy) NSMutableArray* threads; 
```

编码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    value= @0;
    textField.objectValue= value;
    for(int i=0; i<10; i++)
    {
        NSThread* thread=[[NSThread alloc]initWithTarget: self selector: @selector(routine:) object: nil];
        [threads addObject: thread];
        [thread start];
    }
}

- (void) routine : (id) argument
{
    for(NSUInteger i=0; i<100; i++)
    {
        @synchronized(self)
        {
            value= @(value.intValue+1);
            textField.objectValue= value;
        }
    }
} 
```

有时应用程序成功，我看到 1000 作为文本字段值。但有时不是，我担心这是饥饿，我在文本字段上看不到任何内容，它是空的。我尝试了调试，但很难看到是什么错了，因为失败的标准对我来说似乎很随意，有时它可以正常工作。

**解决方案**

```
@synthesize threads,value, textField;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    value= @0;
    threads=[[NSMutableArray alloc]initWithCapacity: 100];
    for(NSUInteger i=0; i<100; i++)
    {
        NSThread* thread=[[NSThread alloc]initWithTarget: self selector: @selector(routine:) object: nil ];
        [threads addObject: thread];
        [thread start];
    }
}

- (void) routine : (id) arg
{
    for(NSUInteger i=0; i<1000; i++)
    {
        @synchronized(self)
        {
            value= @(value.intValue+1);
            [textField performSelectorOnMainThread: @selector(setObjectValue:) withObject: value waitUntilDone: NO];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:34:45.953

您正在从非主线程访问`NSTextField`，它是 的子类。[这不是一件安全的事情](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)。结果未定义；有时它似乎工作，有时它没有。`NSView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:40:29.703

您总是在后台线程中更新您的 UI。情况不妙。你应该这样做；

```
 (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    value= @0;
    textField.objectValue= value;
    for(int i=0; i<10; i++)
    {
        NSThread* thread=[[NSThread alloc] initWithTarget: self selector: @selector(routine:) object: nil];
        [threads addObject: thread];
        [thread start];
    }
}

- (void) routine : (id) argument
{
    for(NSUInteger i=0; i<100; i++)
    {
        @synchronized(self)
        {
            value= @(value.intValue+1);
            [textField performSelectorOnMainThread:@selector(setObjectValue:) withObject:value waitUntilDone: NO];    
        }
    }
} 
```

尝试锁定实例并使用 sleep 方法使其更流畅。

要在后台线程中锁定变量，您首先将其锁定，然后设置其值并将其解锁为；

```
[NSLock lock];
value=@(value.intValue+1)
[NSLock unlock]; 
```

但是，您已经拥有@synchronized，这使得它可以保护同时从多个线程访问的变量。我认为@synchonized 块更容易理解。

在这种情况下，睡眠更合适。如果您在线程内放置 2 秒的睡眠，您可以看到 textField 每 2 秒更改一次，并且它更明显且更有意义。

`[NSThread sleepForTimeInterval:2000]`// 更新 textField 后将其放入循环中并查看效果。

此外，最好创建一个运行循环并在某个运行循环中执行线程，这是一种更好的做法。

# python - 在 ipython 中添加换行符

> ID：13536370
> 
> 赞同：66
> 
> 时间：2012-11-23T22:24:12.660
> 
> 标签：python, ipython

如果在 iPython 或任何多行命令中引入 for 循环，我该如何返回并添加行？我跑了这个：

```
for row in table.find_all('tr'):
    cells = row.find_all('td')
    for c,cell in enumerate(cells):
        print c,":",cell.get_text().strip()
    try:
        this = cells[0]
        that = cells[1]
        the_docket = cells[2]
        other_thign = cells[3]
        jumble = re.sub('\s+',' ',str(cells[5])).strip()            
    except:
        "Nope" 
```

并意识到我需要在其中添加一行，但我不能只在运行命令的 iPython、b/c 中点击“输入”。那么我可以在 iPython 中编辑该多行命令吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2017-09-05T17:49:25.493

受这个问题困扰一段时间了。我刚刚发现，当使用`Ctrl-q``Ctrl-j`（那是小写的 Q，J，无需按住`shift`键）时，会在现有的 IPython 编辑会话中添加换行符。

```
for li in some_list: print(li) 
```

在冒号后移动光标并按下`Ctrl-q``Ctrl-j`

```
for li in some_list:
print(li) 
```

IPython：5.2.1，iTerm2：3.0.15，macOS：10.12.6

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-11-23T22:35:48.217

iPython 中的`%edit`神奇功能让您可以在自己喜欢的编辑器中编辑代码，然后像直接键入一样执行它。您还可以编辑已输入 repl 的代码，因为它存储在一个特殊变量中，例如：

```
In [1]: def foo(x):
   ...:     print x
   ...:     
In [2]: %edit _i1 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2013-09-30T18:52:30.033

还有一种方法可以直接在repl中添加换行符：ctrl-v、ctrl-j

ctrl-v 基本上可以让您发送控制代码，然后 ctrl-j 是换行符（换行符）的代码。打字有点尴尬，但它的优点是也可以在常规 Python shell 以及 Bash 本身中工作。

编辑：至少在 iTerm2 中，您也可以将其分配给单个热键。我将 ctrl-enter 设置为 0x16 0x0a 的“发送十六进制代码”。也可以使用 cmd-enter 或其他任何东西。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2019-02-27T20:15:07.543

您可以使用`ctrl+on`（即按住控制按钮并输入字符'o'、'n'）。您也可以分两步完成 -`ctrl+o` `ctrl+n`但我发现前者更容易。

*   `ctrl-o`- 进入多行模式
*   `ctrl-n`- 访问命令历史。但由于没有前进历史，光标只是移动到下一行。

我在运行 git bash 2.18.0 + windows 7 的机器上验证了它可以与 IPython 5.3.0 和 IPython 7.3.0 一起使用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-10-13T12:00:01.577

为了完整性：较新的 IPython 版本（0.11+）有一个非常漂亮的图形控制台，它允许您使用箭头导航您的代码，甚至可以使用鼠标重新定位光标。

在多行语句中，一些键具有特殊功能（导航箭头、`Enter`插入换行符等）。您必须将光标放在语句最后一行的末尾以获得默认行为，例如获取向上箭头`↑</kbd> to mean "previous statement" instead of "move the cursor to the previous line". Or get `Enter` to mean "execute code" instead of "insert line break in the middle of code".`

它的文档有点稀疏并且分散在不同的页面中，所以这里是开始使用它的三个基本链接：

1.  [Qt 控制台简介](http://ipython.org/ipython-doc/rel-1.0.0/interactive/qtconsole.html#qtconsole)

2.  [使用每个用户的配置文件而不是命令行参数来配置 IPython](http://ipython.org/ipython-doc/stable/interactive/tutorial.html#configuration)

    您对以下内容感兴趣`ipython_qtconsole_config.py`

3.  [如何在 Windows 7 上获得 ipython 图形控制台？](https://stackoverflow.com/questions/14914950/how-to-get-an-ipython-graphical-console-on-windows-7)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-04-28T19:10:35.560

一个简单的方法是使用`;\`操作符。`;`发出命令结束的信号，并`\`在新行中指示命令如下：

```
In[4]: password = "123";\
       username = "alpha" 
```

这将让您在 ipython 中拥有多行命令，而无需调用编辑器

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-07-27T07:45:44.073

`Ctrl+q`然后键入`Enter`。正如其他人指出的那样，`Ctrl+q`让你发送一个字符代码，但点击`Ctrl+q`then`Enter`可能比`Ctrl+q`then更自然`Ctrl+j`。

另一种选择是在之后键入`(`then `Enter`、写入和删除`(`。此解决方案类似于您键入`;\`声明未完成的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-02T08:08:10.233

派对迟到了！但我注意到很多人都在谈论使用 Ctrl 组合来添加额外的行。在我看到关于它是 Emacs 绑定的评论之前，这对我不起作用。我已将我的行内编辑器设置为 Vi，如果您也有，那么`Esc`在您想要添加额外的行之前按进入该行的“正常”模式，然后按`o`（或者`O`如果您在该行之后）。就像在正常的 Vi(m) 中一样。为我工作！

# css - Wordpress 加载更改了 css 和旧 css

> ID：13536371
> 
> 赞同：0
> 
> 时间：2012-11-23T22:24:27.770
> 
> 标签：css, caching, wordpress, wordpress-theming

我真的很困惑我的 Wordpress 对 css 做了什么......我有一个插件正在使用这个脚本加载 css：

```
wp_enqueue_style('shutter', NGGALLERY_URLPATH .'shutter/shutter-reloaded.css', false, '1.3.2', 'screen'); 
```

我最近更改了 css，现在它似乎被加载了两次。首先是旧的 css，然后是更改后的 css。在 FTP 上，我只看到一个文件。为什么它会这样，我该如何解决？

这绝对不是Browsercache的问题，我在几个浏览器中测试过它并清除了几次缓存......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:06:57.640

是的，这个 css 缓存问题总是让我生气。但我找到了解决方案。

我不知道如何把它放在你的函数上，但这是一个想法：每次修改css文件时，给你的html命令调用新的css，用类似“style.css？1202122354”的东西调用css而不是只有“style.css”。“1202122354”是 style.css 上的最后修改日期时间

在我的标题主题中，我通常使用它来调用我的 CSS 文件：

```
<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); echo '?' . filemtime( get_stylesheet_directory() . '/style.css'); ?>" type="text/css" media="screen, projection" /> 
```

检查 php 函数`filemtime( get_stylesheet_directory() . '/style.css')`是否输出 style.css 的最后修改时间

希望你能明白这个想法，抱歉不知道如何把它放在你的功能上：D

# sql - 需要加约束：日期加10天

> ID：13536376
> 
> 赞同：3
> 
> 时间：2012-11-23T22:25:04.137
> 
> 标签：sql, constraints, default, alter, dateadd

我正在尝试向表中添加一个约束，以便它将其中一列显示为当前日期加上 10 天。这是我迄今为止尝试过的（我对 SQL 很陌生）：

```
ALTER TABLE         orders
ADD CONSTRAINT  default_date
DEFAULT         DATEADD (DAY,10,required_date) FOR required_date 
```

哈！

编辑：我现在也试过这个：

```
ALTER TABLE         orders
ALTER COLUMN        required_date
ADD CONSTRAINT      required_date_plus_ten
DEFAULT             DATEADD (DAY,10,required_date) 
```

编辑：感谢 ypercube 和我的同学。最终代码是：

```
ALTER TABLE       orders
ADD CONSTRAINT    default_date
DEFAULT           (DATEADD (DAY,10,'required_date')) FOR required_date; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:13:13.333

SQL-Server 中用于向`DEFAULT`现有列添加值的语法是：

```
ALTER TABLE     orders
ADD CONSTRAINT  required_date_plus_ten
DEFAULT         DATEADD(day, 10, GETDATE())
FOR             required_date ; 
```

在**[SQL-Fiddle中测试](http://sqlfiddle.com/#!3/f450b/2)**

# c++ - 没有参数列表的模板名称的无效使用

> ID：13536378
> 
> 赞同：4
> 
> 时间：2012-11-23T22:25:34.730
> 
> 标签：c++, templates

我正在尝试做两件事给我带来问题：

1) typedef an `std::vector`
2) 声明一个`std::auto_ptr`

这两个都给了我错误`"invalid use of template-name 'std::vector/auto_ptr' without an argument list"`。这是导致错误的标题：

**资源位置定义.h**

```
// ResourceLocationDefinition contains the information needed
// by Ogre to load an external resource.

#ifndef RESOURCELOCATIONDEFINITION_H_
#define RESOURCELOCATIONDEFINITION_H_

#include "string"
#include "vector"

struct ResourceLocationDefinition
{
    ResourceLocationDefinition(std::string type, std::string location, std::string section) :
        type(type),
        location(location),
        section(section)
    {
    }

    ~ResourceLocationDefinition() {}
    std::string type;
    std::string location;
    std::string section;
};

typedef std::vector ResourceLocationDefinitionVector;

#endif 
```

**引擎管理器.h**

```
#ifndef ENGINEMANAGER_H_
#define ENGINEMANAGER_H_

#include "memory"
#include "string"
#include "map"

#include "OGRE/Ogre.h"
#include "OIS/OIS.h"

#include "ResourceLocationDefinition.h"

// define this to make life a little easier
#define ENGINEMANAGER OgreEngineManager::Instance()

// All OGRE objects are in the Ogre namespace.
using namespace Ogre;

// Manages the OGRE engine.
class OgreEngineManager :
    public WindowEventListener,
    public FrameListener
{
public:
    // Bunch of unrelated stuff to the problem

protected:
    // Constructor. Initialises variables.
    OgreEngineManager();

    // Load resources from config file.
    void SetupResources();

    // Display config dialog box to prompt for graphics options.
    bool Configure();

    // Setup input devices.
    void SetupInputDevices();

    // OGRE Root
    std::auto_ptr root;

    // Default OGRE Camera
    Camera* genericCamera;

    // OGRE RenderWIndow
    RenderWindow* window;

    // Flag indicating if the rendering loop is still running
    bool engineManagerRunning;

    // Resource locations
    ResourceLocationDefinitionVector  resourceLocationDefinitionVector;

    // OIS Input devices
    OIS::InputManager*      mInputManager;
    OIS::Mouse*             mMouse;
    OIS::Keyboard*          mKeyboard;
};

#endif /* ENGINEMANAGER_H_ */ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T22:30:12.257

使用模板时，您必须为您的向量提供模板参数，您可能想要执行以下操作：

```
typedef std::vector<ResourceLocationDefinition> ResourceLocationDefinitionVector; 
```

这意味着您的向量引用`ResourceLocationDefinition`对象实例。

对于你这样的`auto_ptr`东西：

```
std::auto_ptr<Root> root; 
```

我相信你想要一个`Ogre::Root`指针，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:30:04.283

错误很明显。`auto_ptr`并且`vector`是模板。它们要求您指定实际要与它们一起使用的类型。

```
struct my_type {
  int x, y;
}; 
std::vector<my_type> v; // a vector of my_type
std::vector<int> iv; // a vector of integers 
```

关注`auto_ptr`：由于其奇怪的语义，它已被弃用。考虑使用`std::unique_ptr`（当在您的平台上可用时）或`boost::scoped_ptr`（当您有 boost 依赖项时。）

# c# - 摆脱函数的参数

> ID：13536383
> 
> 赞同：0
> 
> 时间：2012-11-23T22:26:10.027
> 
> 标签：c#, f#, ironpython, dsl

最好用代码来解释我的意图。所以现在我有以下代码：

```
class A, IInterfaceUsedByB
{
}

class B
{
    void func(A someObject)
    {
        func2(someObject, 1);
        func3(someObject, "string");
        func4(someObject, new MyObject());

        var anotherObject = someObject.NewInstance;
        func2(anotherObject, 1);
        .......................
    }
    func2(A someObject, int val);
    func3(A someObject, string val);
    func4(A someObject, C val);
} 
```

其中`func2`, `func3`,`func4`确实需要对 someObject 的引用。我想将其更改为

```
void func(A someObject)
{
    with(someObject,
            () =>
                {
                    func2(1);
                    func3("string");
                    func4(new MyObject());
                }
        );
    var anotherObject = someObject.NewInstance;
    with(anotherObject,
            () =>
                {
                    func2(1);
                    .......................
                }
        );
} 
```

甚至更好

```
void func(A someObject)
{
    func2(1);
    func3("string");
    func4(new MyObject());
} 
```

这样我就不必拖动这个 someObject，但我仍然应该能够在 func2、3、4 中使用它。换句话说，这就像为特定代码块设置一些上下文对象。为此，我可以使用三种语言（C#、F# 或 IronPython）中的任何一种。

**更新**在理想的解决方案中，B 类将独立于 A。`func*`函数仅依赖于 A 的一个由 2 个方法组成的小接口。

**UPDATE2** someObject 对于不同的函数调用可能不同。

**UPDATE3**我不认为只有使用类、接口或扩展方法等语言原语才能做到这一点。我认为解决方案可能会使用更多的 hackish 工具，例如属性、反射或 F# 的计算工作流功能。或者 IronPython 的一些动态特性。本质上，我想做的是创建一个小型嵌入式 DSL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:37:30.903

部分功能应用程序可能在这里为您工作。

```
// object for example first param
var objectInstance = new object();

// partial function application
var func2Partial = new Action<int>((i) => func2(objectInstance, i));
func2Partial(5); 
```

如果 func2 返回一些东西，那么你需要使用 Func<> 而不是 Action<>

或者，根据我在下面的评论，扩展方法也可能是一种选择。

```
internal static class IInterfaceUsedByBExtender
{
    internal static void Func2(this IInterfaceUsedByB obj, int value)
    {
    }

}

// caller
someObject.Func2(5); 
```

另一个选项可能是 F# 中的管道运算符。我有基本的 F# 知识，但我认为您可以定义一个具有两个参数的函数并使用管道运算符填充第一个参数的值。所以像：

```
let printnums x y = printfn "%A - %A" x y;; 
```

可以调用

```
4 |> printnums 5;; 
```

哪个输出：

```
4 - 5 
```

使用 func2 你会有类似的东西

```
let func2 obj, num = ...;
someObject |> func2 1;; 
```

更多示例：[stackoverflow：管道 F# 参数](https://stackoverflow.com/questions/2330779/piping-another-parameter-into-the-line-in-f)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:32:32.290

您可以编写一个接受 A 并返回 func2 函数的函数。例如，如果 func2 返回类型为 void（如果不是，则使用 Func<int, ReturnType>）：

```
 Action<int> func2Gen(A someObject)
        {
           return i => Console.WriteLine(i+someObject.ToString());
        } 
```

然后，无论哪里合适，您都可以声明

```
var func2=func2Gen(someObject); 
```

并称之为：

```
func2(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:08:21.477

```
class A, IInterfaceUsedByB
{ 
}

class B<T> where T : A
{
    private T m_SomeObject;

    public B(T someobject)
    {
        m_Someobject = someobject;
    }
    void func()
    {
        func2(1);
        func3("string");
        func4(new MyObject());
    }
    func2(int val) { //Do whatever with m_SomeObject }
    func3(string val) { //Do whatever with m_SomeObject }
    func4(C val){ //Do whatever with m_SomeObject }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T23:01:47.790

如果所有这些函数都在一个对象（sameObject）上运行，那么看起来您应该引入一个类并使其成为类方法。我不知道 someObject 是什么类型，但这是 C# 中的一个示例：

```
class Workflow<T>
    where T: class
{
    private readonly T _someObject;

    public Workflow(T someObject)
    {
        _someObject = someObject;
    }

    public void func() 
    {
         func2(1);
         func3("string");
         func4(new MyObject());
    } 

    private void func2(int a) 
    {
        // use _someObject here
    }

    private void func3(string s) 
    {
        // ...
    }
}

// usage
var flow = new Workflow(someObject);
flow.f(); 
```

# google-places-api - 如果应用程序总是询问用户的位置，如何手动设置 GPS 坐标

> ID：13536386
> 
> 赞同：1
> 
> 时间：2012-11-23T22:26:24.537
> 
> 标签：google-places-api

到目前为止我所取得的成就是实施本教程[http://www.androidhive.info/2012/08/Android-working-with-Google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/Android-working-with-Google-places-and-maps-tutorial/)

现在我想要的是实现一种方法，在`GPStracker`该类中为我的设备启用 GPS 并检测我现在的位置而不是我的位置，我想向我的应用程序用户展示一个特定区域，比如班加罗尔（印度）北部；我知道如何设置不同的类型，但我在这方面寻求帮助

```
 i.putExtra("user_latitude", Double.toString(gps.getLatitude()));
                    i.putExtra("user_longitude", Double.toString(gps.getLongitude())); 
```

> gps.getLatitude ()

正在询问`GPSTracker.java`坐标，而位置管理器只是从我的位置提取相同的坐标，但我想要的是将用户位置伪造到城市北部的某些坐标，以便我可以向他们展示该区域的结果（地点 - 餐厅)

# jquery - 设置使用 jquery 选择的第一个选项

> ID：13536391
> 
> 赞同：0
> 
> 时间：2012-11-23T22:27:40.420
> 
> 标签：jquery

有两个名称不同的选项列表，我需要设置它们中选择的第一个选项。

```
<input type="radio" name="first_list" value="0">abc
<input type="radio" name="first_list" value="1">cba

<input type="radio" name="second_list" value="0">opc
<input type="radio" name="second_list" value="1">cpo 
```

当然，我可以这样做：

```
$("input:radio[name='first_list'][value='0']").attr("checked", "checked");
$("input:radio[name='second_list'][value='0']").attr("checked", "checked"); 
```

也许还有另一种更紧凑的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:31:17.617

```
$("input:radio[value='0']").attr("checked", "checked");​ 
```

这对我有用：http: [//jsfiddle.net/jcolicchio/46WXn/](http://jsfiddle.net/jcolicchio/46WXn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:32:26.557

如果您在上面显示的标记是完整的，您可以使用`prop`检查框 -

```
$('input:radio:even').prop('checked', true); 
```

[http://jsfiddle.net/r82RE/](http://jsfiddle.net/r82RE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:54:07.767

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T15:54:20.543

```
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>

    $(document).ready(function () {
        $('input:radio[value="0"]').prop("checked",true)

    });
</script>
</head>
<body>
 <input type="radio" name="first_list" value="0">abc
<input type="radio" name="first_list" value="1">cba

<input type="radio" name="second_list" value="0">opc
<input type="radio" name="second_list" value="1">cpo</body>
</html> 
```

# php - 虚拟 SQL 查询

> ID：13536396
> 
> 赞同：0
> 
> 时间：2012-11-23T22:28:09.267
> 
> 标签：php, database, pdo

我正在为我创建的脚本创建一个安装文件，并且还将提供用于输入数据库详细信息的字段。无论如何，在将这些数据库详细信息存储在 config.php 文件中之前，我想看看它们是否有效。查看提供的详细信息是否有效的最佳方法是什么？我想运行一个虚拟查询，如果成功，则将详细信息存储在文件中。我不知道最好的查询是什么？我对整个事情都使用 PDO。所以，我基本上需要检查数据库连接是否成功才能继续。

您能否告诉我您的想法如何验证用户输入是否一切正常？我的虚拟查询想法是处理这个问题的好方法吗？如果是，我应该运行什么查询？如果没有，你有什么建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:32:04.263

如果您使用的是 sql server，诸如“select 1”之类的东西就可以完成这项工作。我想许多其他数据库引擎也会支持这个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:40:47.653

最好的办法是发出一系列查询/命令，分别测试您需要的每一件事。

1.  可以打开连接
2.  数据库在那里/可以创建
3.  用户可以查看数据/可以构造数据等。

然后，作为安装的一部分，您可以告诉用户是否有问题，并直接指出问题让他们解决。您应该在安装的早期执行此操作，这样您就不必回滚太多。

想想安装体验。安装程序时您想要什么。你愿意说

```
 "Error. Can't connect", 
 or 
 "Error: Cannot connect to DATABASEX the SERVERY with the USERID_W", 
 or even better 
 "Error: Can connect to the DATABASEX the SERVERY with the USERID_W, but table X is missing, have you completed step ABC first?" 
```

为用户做尽可能多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:32:12.353

好吧，如果连接函数返回预期值而不产生任何错误/异常，您可以假设连接成功。除此之外...

`SHOW TABLES FROM $database;`

应该表明他们至少对数据库具有基本权限，但不会表明他们是否可以创建表和插入数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T22:44:51.493

首先，检查PHP是否正确连接到数据库（返回值，mysql错误）。然后您可以使用类似的东西`SHOW VARIABLES LIKE "%version%"`来确定数据库引擎版本，因此所有功能和方法都将按预期工作。这样，您还可以通知您的用户，他们的数据库版本太旧，无法与您的软件一起使用。

**编辑**

此外，查询`SHOW GRANTS FOR 'user'@'host'`是检查已连接用户的权限的好主意

# xml - XSLT 中的条件过滤和嵌套循环

> ID：13536399
> 
> 赞同：0
> 
> 时间：2012-11-23T22:28:30.243
> 
> 标签：xml, xslt

```
<Request xmlns:ns0="http://Request">
  <Lines>
    <Line>
      <requestid>76</requestid>
      <Code>C001</Code>
    </Line>
    <Line>
      <requestid>77</requestid>
      <Code>C002</Code>
    </Line>
  </Lines>      
  <Conflict>
    <responseid>76</responseid>
    <responsecode>WB</responsecode>
    <cService>
      <responseid>73</responseid>
      <responsecode>HA</responsecode>
    </cService>
    <cService>
      <responseid>7600</responseid>
      <serviceCode>PP</serviceCode>
    </cService>
  </Conflict>      
  <Conflict>
    <responseid>77</responseid>
    <responsecode>WB7</responsecode>
    <cService>
      <responseid>745</responseid>
      <responsecode>HAQ</responsecode>
    </cService>
    <cService>
      <responseid>7234</responseid>
      <serviceCode>PP</serviceCode>
    </cService>
  </Conflict>      
  <Conflict>
    <responseid>77</responseid>
    <responsecode>WBC</responsecode>
    <cService>
      <responseid>72341</responseid>
      <responsecode>HAC</responsecode>
    </cService>
    <cService>
      <responseid>98</responseid>
      <responsecode>PPC</responsecode>
    </cService>
  </Conflict>
</Request> 
```

所需的输出应如下所示。

```
 <Output xmlns:ns0="http://Response">
      <Lines>
        <Line>
          <responseid>76</responseid>
          <code>WB</code>
          <Features>
            <ExistingFeature>
              <responseid>76</responseid>                           
              <CFeature>
                <responseid>76</responseid>                             
              </CFeature>
              <CFeature>
                <responseid>76</responseid>                                
              </CFeature>
            </ExistingFeature>
          </Features>
        </Line>
        <Line>
          <Num>77</Num>
          <Features>
            <ExistingFeature>
              <responseid>77</responseid>
              <code>WB7</code>
              <CFeature>
                <responseid>77</responseid>                
              </CFeature>
              <CFeature>
                <responseid>77</responseid>                
              </CFeature> 
              <CFeature>
                <responseid>77</responseid>                
              </CFeature> 
          <CFeature>
                <responseid>77</responseid>                
              </CFeature>             
            </ExistingFeature>
          </Features>
        </Line>        
      </Lines>
</Output> 
```

那么您能否帮助我在 XSLT 中实现这一目标。因为我正在尝试多种方式，但由于我在 xslt 方面很差，所以无法做到。

设想。实际上应该为输入中的每一行创建一行，并且基于 requestID（即 76 或 77）的输入中的每一行都有一个或多个冲突。因此，对于输入中每次出现的行以及输入中所有相应的匹配冲突，我必须根据输出中的单个节点中的这些 ID 对冲突进行分组。

所以你能帮我为这个场景写 xslt 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:46:50.520

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />
  <xsl:key name="incomekey" match="/Request/Conflict" use="responseid" /> 
  <xsl:template match="/Lines" >
    <Lines>
      <xsl:apply-templates select="Line" />
    </Lines>
  </xsl:template>
  <xsl:template match="Line" >
    <Line>
      <xsl:variable name="tmp" select="requestid" />
      <xsl:for-each select="key('incomekey', $tmp)" >
        <xsl:variable name="strCount" select="position()" />
        <xsl:if test="position() &lt; 2">
          <responseid>
            <xsl:value-of select="requestid/text()" />
          </responseid>
          <code>
            <xsl:value-of select="Code/text()" />
          </code>
        </xsl:if>
        <Features>
          <ExistingFeature>
            <responseid>
              <xsl:value-of select="responseid" />
            </responseid>
            <code>
              <xsl:value-of select="responsecode" />
            </code>
            <xsl:for-each select="cService">
              <CFeature>
                <responseid>
                  <xsl:value-of select="responseid"/>
                </responseid>                              
              </CFeature>
            </xsl:for-each>
          </ExistingFeature>
        </Features>
      </xsl:for-each>
    </Line>
  </xsl:template>
</xsl:stylesheet> 
```

我正在使用上面的脚本。但它为第二行（77）生成输出，如下所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:56:11.017

```
<Line>
        <responseid>77</responseid>
        <code>WB</code>
        <Features>
          <ExistingFeature>
            <responseid>77</responseid>
            <code>WB7</code>
            <CFeature>
              <responseid>745</responseid>
            </CFeature>
            <CFeature>
              <responseid>7234</responseid>
            </CFeature>
          </ExistingFeature>
        </Features>
          <Features>
            <ExistingFeature>
              <responseid>77</responseid>
              <code>WBC</code>
              <CFeature>
                 <responseid>72341</responseid>
              </CFeature>
              <CFeature>
                <responseid>98</responseid>
              </CFeature>
             </ExistingFeature>
        </Features>
      </Line> 
```

如果您观察到此节点，它会为请求中的每个冲突节点创建两个单独的功能节点，其中包含 77（请求 ID）。因此，除此之外，我需要在输出的第二个 Line 节点中填充它，如下所示。

```
<Features>
    <ExistingFeature>
      <responseid>77</responseid>
      <code>WB7</code>
      <CFeature>
        <responseid>745</responseid>
      </CFeature>
      <CFeature>
        <responseid>7234</responseid>
      </CFeature>
      <CFeature>
        <responseid>72341</responseid>
      </CFeature>
      <CFeature>
        <responseid>98</responseid>
      </CFeature>
    </ExistingFeature>
  </Features> 
```

# java - 将叠加层添加到地图视图（初学者）

> ID：13536404
> 
> 赞同：0
> 
> 时间：2012-11-23T22:28:51.427
> 
> 标签：java, android, google-maps, map, android-mapview

我有以下代码，但覆盖似乎在地图上不可见，尽管焦点在所需的地理点上。这是代码：

```
 public void setOverlay()
{
    MapView mapView = (MapView)findViewById(R.id.mapview);
    mapView.getController().setCenter(place.getGeoPoint());
    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay(drawable);
    OverlayItem overlayitem = new OverlayItem(place.getGeoPoint(), "Hola, Mundo!", "I'm in Mexico City!");
    itemizedOverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedOverlay);

} 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:54:13.037

您需要致电：

```
mapView.invalidate(); 
```

将叠加层添加到`MapView`. 将上面的行添加到您的方法的底部，它应该可以工作（我假设您的图标不是完全透明的 :-)，在这种情况下您无论如何都不会看到它）

问候。

# javascript - 如何在 Date.toString() 调用中获得毫秒精度？

> ID：13536405
> 
> 赞同：0
> 
> 时间：2012-11-23T22:29:09.790
> 
> 标签：javascript

我正在对 Web 应用程序进行一些性能分析，我希望能够查看执行部分代码需要多长时间。

我通过将日期对象打印到控制台来做到这一点。

我似乎无法让日期对象更精确地打印其时间而不是精确到秒。这是可能的，而不是自 1970 年以来得到 ms 并自己计算它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:29:56.827

使用`Date.now()`.

```
var start = Date.now(); 
```

这为您提供以毫秒为单位的时间。

*   [MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now)为`Date.now()`.

如果您正在测试较旧的实现，则可以填充它。

```
if (!Date.now)
    Date.now = function() {
        return +(new Date());
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:38:25.200

提供ms分辨率的[`toISOString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)方法：`Date`

```
var d = new Date();
d.toISOString(); 
```

回报：

```
'2012-11-23T22:31:51.321Z' 
```

但是对于代码的计时部分，您最好使用[`console.time`](https://developer.mozilla.org/en-US/docs/DOM/console.time)and [`console.timeEnd`](https://developer.mozilla.org/en-US/docs/DOM/console.timeEnd)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:41:35.013

如果您正在分析您的 javascript 代码，那么为什么不使用内置于现代浏览器中的开发人员工具呢？

Chrome 有它的开发者工具（按 F-12）

[https://developers.google.com/chrome-developer-tools/docs/profiles](https://developers.google.com/chrome-developer-tools/docs/profiles)

Profiles 面板可让您分析 Web 应用程序或页面的执行时间和内存使用情况。Profiles 面板包括两个分析器：一个 CPU 分析器和一个堆分析器。这些可以帮助您了解资源的使用情况，从而帮助您优化代码：

*   CPU 分析器显示页面的 JavaScript 函数的执行时间。
*   堆分析器按页面的 JavaScript 对象和相关 DOM 节点显示内存分布。

其他浏览器有类似的工具供您使用，不需要额外的代码。

# asp.net - 使用 ASP.NET 角色的 WCF 表单身份验证授权 = 拒绝访问？

> ID：13536406
> 
> 赞同：1
> 
> 时间：2012-11-23T22:29:11.160
> 
> 标签：asp.net, wcf, forms, authentication, roles

我有一个基本的 WPF 应用程序，客户端在其中写入数据库。我在服务器 2012 机器上使用 IIS 来托管 Web 服务。我正在尝试实现表单身份验证，并且我已经完成了所有工作（在 xaml.cs 中从客户端传递用户名和密码，该客户端对我的 ASP.NET 用户进行身份验证，该用户有效。然后我想实现 ASP.NET 角色授权不同的命令（提交请求、删除请求等）。我们应该使用的方法是“[PrincipalPermission(SecurityAction.Demand, Role = "Allowed")]"

理论上，当我尝试点击按钮时，这应该只使用客户端传递的凭据（我已经确认有效），它应该检查我传递的用户是否在角色中，如果允许，如果不允许否认。但是，无论用户是否在角色中，它仍然会显示“访问被拒绝”。

有什么想法吗？

```
using System;
using System.Collections.Generic;
using System.Data.Entity.Validation;
using System.Diagnostics;
using System.Linq;
using System.ServiceModel;
using System.Security.Permissions;
using RequestRepository;
using System.Threading;
using System.Web;

namespace RequestServiceLibrary
{
  [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
  public class RequestService : IRequestService
  {
    private List<Request> requests = new List<Request>();
    private RequestLibraryEntities context = new RequestLibraryEntities();

    [PrincipalPermission(SecurityAction.Demand, Role = "Allowed")]
    public string SubmitRequest(Request req)
    {
        Thread.CurrentPrincipal = HttpContext.Current.User;
        if (context.Requests.Count() == 0)
            populateRequests();
        req.Id = Guid.NewGuid().ToString();
        req.TimeSubmitted = DateTime.Now;
        requests.Add(req);
        addRequest(req);
        return req.Id;
    }

    [PrincipalPermission(SecurityAction.Demand, Role = "Allowed")]
    public bool UpdateRequest(Request req)
    {
        Thread.CurrentPrincipal = HttpContext.Current.User;
        bool returnval = false;
        try
        {
            var getobject = requests.Find(x => x.Id.Equals(req.Id));
            if (getobject != null)  //checks to make sure the object isn't empty
            {
                getobject.Username = req.Username;
                getobject.Password = req.Password;
                getobject.RequestedResource = req.RequestedResource;
                getobject.TimeSubmitted = req.TimeSubmitted;
            }
            //Find the request object in the database
            var Id = Guid.Parse(req.Id);
            var rl = context.Requests.Find(Id);
            //Update that object with the values from req            
            rl.Username = req.Username;
            rl.Password = req.Password;
            rl.RequestedResource = req.RequestedResource;
            rl.TimeTransmitted = req.TimeSubmitted;
            context.SaveChanges();
            returnval = true;
            return returnval;
        }
        catch (Exception) { return returnval; }
    }
    public List<Request> GetRequests()
    {
        populateRequests();
        return requests;
    }

    [PrincipalPermission(SecurityAction.Demand, Role = "Disallowed")]
    public bool RemoveRequest(string id)
    {
        bool rval = false;
        try
        {
            Request req = requests.Find(x => x.Id.Equals(id));
            requests.Remove(req);
            rval = delRequest(req);
            return rval;
        }
        catch (Exception)
        {
            return false;
        }
    }

    private void populateRequests()
    {
        requests = new List<Request>();
        var rl = context.Requests.ToList();
        foreach (var r in rl)
        {
            requests.Add(new Request()
            {
                Id = r.Id.ToString(),
                Password = r.Password,
                RequestedResource = r.RequestedResource,
                TimeSubmitted = r.TimeTransmitted,
                Username = r.Username
            });
        }
    }

    private void addRequest(Request req)
    {
        try
        {
            var r = context.Requests.Create();
            r.Id = Guid.Parse(req.Id);
            r.Username = req.Username;
            r.Password = req.Password;
            r.RequestedResource = req.RequestedResource;
            r.TimeTransmitted = req.TimeSubmitted;
            context.Requests.Add(r);
            context.SaveChanges();
        }
        catch (DbEntityValidationException dbEx)
        {
            foreach (var validationErrors in dbEx.EntityValidationErrors)
            {
                foreach (var validationError in validationErrors.ValidationErrors)
                {
                    Console.WriteLine("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                }
            }
        }
    }

    private bool delRequest(Request req)
    {
        Guid Id = Guid.Parse(req.Id);
        var r = context.Requests.Create();
        r.Id = Id;
        var rl = context.Requests.Find(Id);
        try
        {
            context.Requests.Remove(rl);
            context.SaveChanges();
            return true;
        }
        catch (Exception) { return false; }
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:52:38.853

为了能够以`PrincipalPermissionAttribute`这种方式使用，您需要首先设置`Thread.CurrentPrincipal`为具有适当角色的 Principal（在本例中为“Allowed”）。

例如，您可以使用[ClientRoleProvider](http://msdn.microsoft.com/en-us/library/system.web.clientservices.providers.clientroleprovider.aspx)来执行此操作，或者只是手动创建 Principal（可能使用您从 Web 服务检索的角色）。

# .net - 使用 .net 创建、删除、更新联系人 windows phone 8

> ID：13536408
> 
> 赞同：2
> 
> 时间：2012-11-23T22:29:26.793
> 
> 标签：.net, windows-phone, .net-4.5, windows-phone-8

有没有办法在 windows phone 8 SDK 中创建新联系人或更新/删除预先存在的联系人？.Net 或本机代码，我需要允许我的应用程序管理联系人，而不管联系人帐户（Google、Microsoft ...）与内置联系人应用程序可以做什么类似，

我感谢您的帮助。谢谢山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:11:31.680

您不能修改属于 Gmail 或任何其他服务的联系人。您可以将联系人添加到人员中心，该联系人将存储在与应用程序关联的联系人存储中。卸载应用程序后，联系人将随之删除。这可以防止 People Hub 收到应用程序联系人的垃圾邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:46:21.140

正如 Jim 所提到的，自定义联系人存储可能是最接近您想要的东西。这在 Windows Phone 7 中是不可能的，[Windows Phone 8 的 SDK 中的新增](http://msdn.microsoft.com/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx)功能没有提及任何更改。

我不希望这会改变——通常其他公司可以完全访问来自其他服务（例如 Facebook）的联系人，我听说他们不允许以编程方式公开数据。至少在 webOS 上就是这种情况（再说一次，这正是我所听到的）......

# javascript - JavaScript 应用程序存储最佳实践

> ID：13536409
> 
> 赞同：0
> 
> 时间：2012-11-23T22:29:29.240
> 
> 标签：javascript, knockout.js, storage

这个问题更像是一个理论问题，而不是编程问题。

我目前正在使用 Knockout.js 编写单页 javascript 应用程序。我选择 Knockout 是因为我喜欢它处理 DOM 更新的方式，但它确实需要您编写自己的 REST 后端来存储和加载数据。

我的应用程序是一个企业应用程序，服务器和客户端将安装在它自己的服务器实例上，不与任何其他用户共享。它不需要身份验证，只需要保存和加载 JavaScript 对象。

我最初的想法是使用带有 Mongo 的 node.js 后端进行存储，但这对我来说似乎有点矫枉过正。将原始 json 保存为平面文件并根据需要保存/加载它会被认为是一种不好的做法吗？我看到的唯一问题是多个用户是否正在使用该应用程序并尝试同时保存数据。有没有一种简单的方法来处理 JSON 数据的合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:35:04.700

如果可以同时访问您的应用程序可以修改此数据，我肯定会建议将其保留在服务器端。这取决于您的应用程序，但合并 JSON 很可能会成为一场噩梦。我相信从后端管理并发访问会更好。Mongo DB 是一个不错的选择，但也可以看看 CouchDB（它提供 REST 接口）和 Redis。

另一方面，如果并发不是问题，您可能需要检查 HTML5 本地存储，它基本上可以让您在客户端存储键/值对。它是 cookie 的一个很好的替代方案，因为它不会在每个请求上发送，并且允许您以更清洁的方式存储更多数据。

# python - Python列表输入搜索

> ID：13536416
> 
> 赞同：1
> 
> 时间：2012-11-23T22:30:07.057
> 
> 标签：python, list, tuples

我有这个：

```
 [[(1, 'a')], [(2, 'b'), (2, 'c')], [(3, 'd'), (3, 'e')]] 
```

我想输入搜索 a/b/c/d/e 并输出这封信的索引。

例如，在搜索`a -> index=0`时 `b and c -> index=1`，，， `d and e -> index=2`

这在 Python 3.x 上怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:46:39.697

您可以使用[dict 理解](http://docs.python.org/3.3/tutorial/datastructures.html#dictionaries)来进行从字母到索引的映射：

```
 data = [[(1, 'a')], [(2, 'b'), (2, 'c')], [(3, 'd'), (3, 'e')]]    
 mapping = {key:index for index, items in enumerate(data) for num, key in items}
 print(mapping) 
```

产量

```
{'a': 0, 'c': 1, 'b': 1, 'e': 2, 'd': 2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:36:23.890

你需要一个嵌套循环：

```
def find_index (data, key):
    for i, d in enumerate (data):
        for t in d:
            if t[1] == key:
                return i 
```

当找不到密钥时，这将返回（默认情况下）无。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T22:37:11.873

您必须先遍历列表，然后对于获得的每个列表，遍历它以获取元组。

```
>>> my_list = [[(1, 'a')], [(2, 'b'), (2, 'c')], [(3, 'd'), (3, 'e')]]
>>> 
>>> def search(val):
        for index, inner_list in enumerate(my_list):
            for nested_tuple in inner_list:
                if val in nested_tuple:
                    return index

>>> search('a')
0
>>> search('c')
1
>>> search('e')
2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T06:29:54.230

```
 python 3.2
     lis= [[(1, 'a')], [(2, 'b'), (2, 'c')], [(3, 'd'), (3, 'e')]]

     # method 1\. list comprehension
     >>> [i for i,v in enumerate(lis)for g in v if "a" in g]

     # method 2\. loop

       def search(x):
            for i,v in enumerate(lis):
                 for k in v:
                       if x in k: return i 
```

# iphone - 标签栏显示贯穿整个项目？

> ID：13536424
> 
> 赞同：0
> 
> 时间：2012-11-23T22:31:06.170
> 
> 标签：iphone, ios, xcode4.5

我在 iOS Storybords 中有一个标签栏应用程序。UITabbarcontroller 连接到-->4 组（UInavigation 控制器--> UItableview 控制器）。每个 UITableviewcontroller 单元都连接到要推送的多个 UIviewcontroller。

在构建应用程序时 - 导航选项卡出现在视图控制器的顶部，没有任何问题。但底部有 4 个项目的 Tabbar 仅在第一个视图中可见。UIviewcontrollers 不显示 4 项标签栏！??。我已在属性检查器中将底部栏设置为选项卡栏。但它不起作用？

我相信它一定比我理解的要多。希望有人帮忙。

如何通过应用程序显示标签栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:07:01.637

您可以像这样添加标签栏：-

**Appdelegate.h**

```
#import <UIKit/UIKit.h>

@class StartingViewController;

@interface Appdelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    StartingViewController *viewController;

    UITabBarController *tabBarController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet StartingViewController *viewController;

@property (nonatomic,retain) UITabBarController *tabBarController;

-(void)addTabBarToView;

@end 
```

**应用委托.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Add the view controller's view to the window and display.
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];

    [self addTabBarToView];

    return YES;
}

-(void)addTabBarToView{

    FirstController *first = [[FirstController alloc] initWithNibName:@"FirstController" bundle:nil];
    first.title = @"First";

    SecondController *second = [[SecondController alloc] initWithNibName:@"SecondController" bundle:nil];
    second.title = @"Second";

    ThirdController *three = [[ThirdController alloc] initWithNibName:@"ThirdController" bundle:nil];
    first.title = @"Third";

    Forthcontrooler *Four4 = [[Forthcontrooler alloc] initWithNibName:@"Forthcontrooler" bundle:nil];
    second.title = @"Secfor";

   UINavigationController *navigationController1 = [[UINavigationController alloc] initWithRootViewController:first];

   UINavigationController *navigationController2 = [[UINavigationController alloc]initWithRootViewController:second];

   UINavigationController *navigationController3 = [[UINavigationController alloc] initWithRootViewController:three];

   UINavigationController *navigationController4 = [[UINavigationController alloc]initWithRootViewController:Four4];

    tabBarController = [[UITabBarController alloc] init];        

    tabBarController.viewControllers = [NSArray arrayWithObjects:navigationController1,navigationController2,navigationController3,navigationController4,nil];

    [window addSubview:tabBarController.view];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:07:29.220

我不完全确定您的设计，但这里有一些技巧希望能有所帮助。

故事板设计：

基本的标签栏应用程序布局通常从左到右看起来像这样，左侧的第一个控制器有一个小箭头，表示它是起始控制器。

*   你的第一个控制器应该是标签栏控制器
*   每个选项卡都应连接到导航控制器
*   每个导航控制器都应该连接到一个或多个 UIViewControllers 或 UITableViewControllers。

现在，请注意虽然有高级配置，但这只是一般布局，可以很好地设置应用程序并为每个选项卡提供轻松的推送转换。

如果您的应用程序启动并显示选项卡栏，并且当您选择一个选项卡项时，它应该显示该选项卡的视图控制器。如果标签栏仍然存在，那么到目前为止您的状态都很好。如果您在该视图控制器上选择了某些内容并且它在屏幕上推送了一个新的视图控制器，并且当发生这种情况时您丢失了标签栏，那么很可能是这个问题： - 检查您的视图控制器并在对象检查器中查看复选标记称为“在推送时隐藏底部栏” - 如果选中 - 然后取消选中它。如果在那里找不到，请检查视图控制器的代码并查看启动方法，例如 view did load 语句：self.hidesBottomBarWhenPushed = YES; 如果您找到该命令，请将其注释掉或删除。

如果这是您的设计并且在您的应用程序中有意义，那么在某些视图控制器推送上隐藏标签栏是完全可以的。通常，为了用户体验，尽量避免它并在屏幕上保留标签栏是一个很好的做法，但有时屏幕大小等问题可能会导致开发人员在某些工作流程中隐藏它。

我希望这有助于并与您的问题相关联。如果没有，对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:49:08.100

把`UINavigationController`s放在 s 里面，`UITabbarController`而不是反过来

# cakephp - cakephp 无法加载移动视图

> ID：13536427
> 
> 赞同：0
> 
> 时间：2012-11-23T22:31:25.330
> 
> 标签：cakephp, mobile, cakephp-2.1

我正在尝试加载单独的移动视图并遇到问题。我可以让我的移动布局工作，但不能让视图工作。

我使用这个问题作为参考，我正在运行 cakephp 2.1 [CakePHP 网站移动版](https://stackoverflow.com/questions/3891310/cakephp-website-mobile-version)

我不确定如何构建我的移动视图？

是 /app/View/name/mobile/view.ctp 还是 /app/View/mobile/name/view.ctp 或其他东西。我一直在兜圈子试图弄清楚这一点。有什么建议么。

我的 AppController.php

过滤前

```
    公共函数 beforeFilter() {    

        /* 移动布局测试 */

        if ($this->request->isMobile()){
            $this->is_mobile = true;
                $this->set('is_mobile', true );
                $this->autoRender = false;
        } 别的 {
             $this->set('is_mobile', false );
        }

    }

```

过滤后（缩短）

```
函数后过滤器（）{
    $view_file = file_exists(
                            “/var/www”。
                            $this->webroot 。  
                            “应用程序” 。DS 。  
                            '看法' 。DS 。
                            $this->name 。DS 。
                            '移动的/' 。
                            $这个->动作。
                            '.ctp'
                            );

$layout_file = file_exists(
                            “/var/www”。
                            $this->webroot 。
                            “应用程序” 。DS 。
                            '看法' 。DS 。
                            “布局”。DS 。
                            '移动的/' 。
                            $this->布局。
                            '.ctp'
                            );

如果（$view_file || $layout_file）{         
 $这个->渲染（
             $this->动作，
             ($layout_file?'mobile/':'').$this->layout,
             ($view_file?'mobile/':'').$this->action
              );
 }
}   

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:18:56.957

在之前的 CakePHP 版本中，$this->render() 有 3 个参数，但在 2.x 及更高版本中，它只有 2 个：

**CakePHP 1.3 API for Controller render() - 有 3 个参数：**

[http://api13.cakephp.org/class/controller#method-Controllerrender](http://api13.cakephp.org/class/controller#method-Controllerrender)

**CakePHP 2.0 API for Controller render() - 只有两个参数：**

[http://api20.cakephp.org/class/controller#method-Controllerrender](http://api20.cakephp.org/class/controller#method-Controllerrender)

因此，您仅使用 2 个参数的答案比使用 3 个参数的尝试效果要好得多。:)

（CakePHP 书仍然错误地指出有 3 个参数，所以 - 我当然不会责怪你尝试过它所提到的 - 必须更详细地查找它才能找到这一点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:47:23.597

我最终在下面这样做了。我的视图文件夹现在检查移动文件夹并加载视图（如果存在）。

```
    函数后过滤器（）{
        // 如果在移动模式下，检查一个有效的视图并使用它
      if (isset($this->is_mobile) && $this->is_mobile) {

        $has_mobile_view_file = file_exists(ROOT . DS . APP_DIR . DS . '查看' . DS . $this->name . DS . 'mobile' . DS . $this->action . '.ctp' );
        $has_mobile_layout_file = file_exists(ROOT.DS.APP_DIR.DS.'查看'.DS.'布局'.DS.'移动'.DS.$this->layout.'.ctp');

        $view_file = ( $has_mobile_view_file ? 'mobile' . DS : '' ) . $这个->动作；
        $layout_file = ( $has_mobile_layout_file ? 'mobile' . DS : '' ) . $this->布局；

        $this->render($view_file, $layout_file);

  }
     }  
```

# android - 如何将参数值从对话框传输到android中的活动？

> ID：13536428
> 
> 赞同：0
> 
> 时间：2012-11-23T22:31:36.720
> 
> 标签：android, android-alertdialog, dialog

我有一个活动（主要），并在其中插入了一个按钮。当用户按下按钮时，会出现一个带有 2 个单选框的对话框。我想根据选择的单选按钮将“1”或“0”值设置为“ntv”，然后在主活动中使用“ntv”值，但这似乎不会将“ntv”值转移到主活动，我的代码有什么问题？

> ```
>  final CharSequence[] chan = {"Minutes", "Seconds"};
>         builder = new AlertDialog.Builder(Main.this);
>         builder.setTitle("Please Select:");
>         builder.setSingleChoiceItems(chan, 0, new DialogInterface.OnClickListener() {
>             public void onClick(DialogInterface dialog, int item) {
>                 if(chan[item]=="Minutes")
>                 {
>                     Toast.makeText(getApplicationContext(), "Minutes", Toast.LENGTH_SHORT).show();
>                     ntv="1";    
>                 }
>                 else if (chan[item]=="Seconds")
>                 {
>                     Toast.makeText(getApplicationContext(), "Seconds", Toast.LENGTH_SHORT).show();
>                     ntv="0";
>                 }
>             }
>         });
>         AlertDialog alert = builder.create();
>         alert.show(); 
> ```

我将“ntv”定义为字符串，这是比较“ntv”以检查它是“0”还是“1”时的代码的一部分

> ```
>  ImageView set1= (ImageView) findViewById(R.id.set1);
>             ImageView set2= (ImageView) findViewById(R.id.set2);
>     if (ntv.equals("0")) {
>         set1.setVisibility(View.INVISIBLE);
>     }
>             if (ntv.equals("1")) {
>         set2.setVisibility(View.INVISIBLE);
>     } 
> ```

而且因为 (set1) 和 (set2) 都不会隐形，我意识到“ntv”没有价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:35:37.833

你应该做`.equals`的字符串比较不是`==`

因此，您的 if 语句不太可能触发。

```
 if(chan[item].equals("Minutes"))
            {
                Toast.makeText(getApplicationContext(), "Minutes", Toast.LENGTH_SHORT).show();
                ntv="1";    
            }
            else if (chan[item].equals("Seconds"))
            {
                Toast.makeText(getApplicationContext(), "Seconds", Toast.LENGTH_SHORT).show();
                ntv="0";
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:34:10.137

这一切看起来都不错（除了使用`equals()`而不是`==`字符串比较的建议，尽管正如您所说，它确实有效（这不是一个好习惯）。

我唯一能想到的（没有看到所有代码）是变量的范围`ntv`是错误的。您是否在方法中声明了变量？它需要在您的类中定义为实例变量（即：不在方法中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:32:58.057

目前尚不清楚您使用的完整代码以及如何调用更改可见性的代码。下面是一个例子

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    AlertDialog.Builder builder;

    final CharSequence[] chan = {"Minutes", "Seconds"};
    builder = new AlertDialog.Builder(MainActivity.this);
    builder.setTitle("Please Select:");
    builder.setSingleChoiceItems(chan, 0, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            if(chan[item].equals("Minutes")) {
                showToast("Minutes");    
            } else if (chan[item].equals("Seconds")) {
                showToast("Seconds");
            }
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
}

private void showToast(String s){
    Toast.makeText(getApplicationContext(), s, Toast.LENGTH_SHORT).show();
} 
```

而不是 showToast 函数，您可以使用您的函数来更改可见性

# php - jquery没有将按钮选择发送到php

> ID：13536436
> 
> 赞同：1
> 
> 时间：2012-11-23T22:32:37.770
> 
> 标签：php, javascript, jquery

我有一个搜索功能，它将接受搜索字符串并将其发送到 php 文件以解析数据库列。我还希望用户选择他们想要搜索的网站的哪个方面（漫画、艺术品或两者兼而有之）。漫画和艺术品或存储在两个单独的表中。

这是一个函数，它将接受来自下面 html 的输入搜索字符串并将其发送到 php 文件。

```
<script type="text/javascript">

        function search(searchString) {     
            //var site = $("#site").val();
            $.get("./scripts/search.php", {_input : searchString},
                function(returned_data) {
                    $("#output").html(returned_data);
                }
            );
        } 
```

这是 javascript 接受选择搜索“漫画”、“艺术品”或“全部”。

```
 function searchChoice(choice) {     
            alert("Choice: " + choice);
            $.get("./scripts/search.php", {_choice : choice}
           );
        }

</script> 
```

**HTML：**

```
 <!--Search filtering for comics, artwork, or both-->
<span class="search"><b>Search for: </b> </span>

<div class="btn-group" data-toggle="buttons-radio">
<span class="search">
    <button type="button" class="btn" id="comics" onclick="searchChoice(this.id)">Comics</button> 
    <button type="button" class="btn" id="artwork" onclick="searchChoice(this.id)">Artwork</button> 
    <button type="button" class="btn" id="all" onclick="searchChoice(this.id)">All</button> 
</span>
</div>

<br/>
<br/>

<!--Search functionality-->
<span class="search">
    <input type="text" onkeyup="search(this.value)" name="input" value="" />
</span>

<br />
<span id="output"><span class="sidebarimages">  </span></span> 
```

**PHP 摘录：**

```
$input = (isset($_GET['_input']) ? ($_GET['_input']) : 0); 
$siteChoice = (isset($_GET['_choice']) ? ($_GET['_choice']) : "all"); 
```

You can see the javascript correctly alerting out "Choice: comics" when comics button is selected, but the php side, `echo "</br>Choice: " . $siteChoice;`, is echo'ing out "all", which is incorrect.

![在此处输入图像描述](../Images/48140b8b51df3a581db7f86d8ca8b7a2.png)

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:45:58.093

正如@E_p所提到的，这就是问题所在......另一个选择是创建一个变量并将数据存储在那里......试试这个：你不需要更改html

```
 var mySearchString = 0;
   var myChoice = 'all';

function search(searchString) {     
        mySearchString = searchString;
        GetSearch();
        }

function searchChoice(choice) {     
            myChoice = choice;
            GetSearch();
            }

function GetSearch(){

 $.get("./scripts/search.php", {_input : mySearchString, _choice : myChoice},
        function(returned_data) {
            $("#output").html(returned_data);
        }
    );

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:38:22.250

您不保留 _choice 的状态。

调用搜索时，它不会将其传递给服务器。

您需要将按钮更改为选项，并在搜索功能中同时传递。同时到服务器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T22:50:50.017

用单选按钮替换按钮并使用 form.Serialize()

```
<form id="searchform">
    <input type="radio" name="_choice" value="comics" />Comics<br/>
    <input type="radio" name="_choice" value="artwork" />Artwork<br/>
    <input type="radio" name="_choice" value="all" />All<br/>

    <input type="text" onkeyup="search()" name="_input" value="" />
</form> 
```

Javascript

```
 function search() {     
        //var site = $("#site").val();
        $.get("./scripts/search.php", $('#searchform').serialize(),
            function(returned_data) {
                $("#output").html(returned_data);
            }
        );
    } 
```

该`.serialize()`函数将表单输入转换为 JSON，因此您不必手动输入，没有更多参数，也没有两个函数，只需一个即可完成所有任务

# css - 不要换行 div

> ID：13536439
> 
> 赞同：2
> 
> 时间：2012-11-23T22:33:02.367
> 
> 标签：css

如何创建`float:right`一组相邻的 div 并使它们不换行，无论它们有多少存在或它们中的任何一个有多宽。如果它们一起比视口宽，则应该出现 x-scroll。

这些 div 中的内容应该正常换行。

只有 CSS 会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:35:42.093

使用 为父元素设置样式`white-space: nowrap;`，但这仅适用于`display: inline`（或`display: inline-block;`）元素。给定以下 HTML：

```
<div id="parent">
    <div class="child"></div>
    <!-- there's quite a lot of these... -->
    <div class="child"></div>
</div> 
```

和CSS：

```
#parent {
    white-space: nowrap;
}

#parent .child {
    display: inline-block;
    /* there's some other CSS for aesthetics */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/u7fKa/)。

不幸的是，我认为没有*办法*强制`float`-ed 元素不换行。

要保留或强制为后代元素*强制*换行，您必须显式覆盖继承和设置`white-space: normal`（以及可能定义 a`width`或`max-width`）

```
/* other CSS remains intact */

#parent .child {
    display: inline-block;
    /* irrelevant/aesthetic CSS */
    white-space: normal;
    max-width: 8em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/u7fKa/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:42:44.390

几个元素：http: [//jsfiddle.net/thirtydot/A8duy/](http://jsfiddle.net/thirtydot/A8duy/)

许多元素：http: [//jsfiddle.net/thirtydot/A8duy/1/](http://jsfiddle.net/thirtydot/A8duy/1/)

**HTML：**

```
<div class="block-container">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
</div>​ 
```

**CSS：**

```
.block-container {
    text-align: right;
    white-space: nowrap;
    float: left;
    width: 100%;
    margin-bottom: 1em;
    border: 1px solid red;
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
}
.block-container > div {
    width: 50px;
    height: 50px;
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
    text-align: left;
    white-space: normal;
    border: 1px solid blue;
} 
```

# php - http_post() 变量从 SMS 消息到 php 脚本，但仅在某些变量（电话号码）等于已知的情况下将数据附加到文本文件

> ID：13536443
> 
> 赞同：0
> 
> 时间：2012-11-23T22:33:21.590
> 
> 标签：php, file, variables, text, fwrite

所有，我在我的服务器上运行了一个 SMS 网关应用程序，它将传入的 SMS 消息传递给一个 php 脚本。该脚本将数据写入文本文件。消息的某些方面可以提取为变量 - 例如： 消息内容：$msgdata 发件人：$originator 时间：$receivedtime 等...使用下面的脚本，我可以轻松地将消息写入文本文件，但它会写入每条短信的数据。如果 $originator 变量是某个电话号码（例如 07123456321），我只想写入文本文件

```
$date = date("d.m.Y H:i:s");
$msgdata = $_REQUEST["msgdata"]; 
$myFile3 = "test.txt";
$fh = fopen($myFile3, 'a') or die("can't open file");
$stringData3 = "$date - $msgdata\n";
fwrite($fh, $stringData3);
fclose($fh); 
```

非常感谢您的帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:00:58.187

由于您不能为传入的消息执行 print_r，因此您可以使用 frite $msgdata = $_REQUEST["msgdata"]; 到你的txt文件。然后你所要做的就是打开 txt 文件并查看 $originator 键然后说：

```
 if($msgdata->originator_key == '07123456321'){
      //your function for writing to file here
   } 
```

如果我正确理解了这个问题。

# c# - 以 C# 形式访问 javascript 方法（无需 Webbrowser 或 DOM）

> ID：13536449
> 
> 赞同：3
> 
> 时间：2012-11-23T22:33:57.300
> 
> 标签：c#, javascript, parsing

我一直在使用带有 javascript 库的 web 服务，并通过从 C# 到 Javascript 来回调用 ExternalInterface 访问 web 服务，反之亦然。我不再想这样做，并且几乎完成了用 C# 重写库。其中大部分工作正常。

不幸的是，我发现 javascript 中有一系列（静态）方法很难在 C# 中复制。具有此类运算符的方法，例如：

```
 static LongEmul dCb (LongEmul b) {
        var c = ~b.l + 1 & 4194303;
        var d = ~b.m + (c == 0 ? 1 : 0) & 4194303;
        var e = ~b.h + (c == 0 && d == 0 ? 1 : 0) & 1048575;
        return tBb(c, d, e);
    } 
```

这是我重构 javascript 的尝试：不是很好。如何在启动时创建某种 DOM 或 Javascript 解析器对象，将 javascript 方法或完整类写入该对象，然后使用来自 c# 的参数调用对象中的方法并接收返回值。我知道这听起来有点像我要替换的 ExternalInterface 方法，但我很想知道是否可以以任何方式从 C# 调用 Javascript 语法中的方法。

对于这方面的任何帮助，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:21:32.070

您可能想要使用[Jint](http://jint.codeplex.com)，一个用于 .NET 的 JavaScript 解释器。Jint 允许您向它提供一些 JavaScript 代码，并且不仅可以解释它，甚至还可以让您直接从 .NET 代码中调用 JS 方法。

来自 Jint 网站：

```
script= @"
  function square(x) { 
    return x * x; 
  };

  return square(number);
  ";

var result = new JintEngine()
  .SetParameter("number", 3)
  .Run(script));

Assert.AreEqual(9, result); 
```

## 更新

调用特定的 JS 方法（来自[docs](http://jint.codeplex.com/documentation)）：

```
JintEngine jint = new JintEngine();
jint .Run(@"
  var f = function (x, y) {
    return x * y;
  }
";

Console.WriteLine(jint.CallFunction("f", 2, 3)); // Displays 6 
```

# android - 我可以在不使用库的情况下在 Android 项目之间共享代码和资源吗？

> ID：13536452
> 
> 赞同：5
> 
> 时间：2012-11-23T22:34:02.123
> 
> 标签：android, eclipse, android-build

在 Android 项目之间共享代码和资源的标准建议是使用库。如果（a）共享代码更改很多，或者（b）您的计算机速度不够快，我个人认为这种方法效果不佳。

我也不想部署多个 APK，这在我使用依赖项目（即 Java 构建路径、项目选项卡）时似乎是必要的。

另一方面，使用 Eclipse 链接源代码功能共享源代码文件夹效果很好（Java 构建路径、源选项卡、链接源按钮），但是对于以下两个问题：

1）我不能使用相同的技术来共享资源。我可以创建指向资源父文件夹的链接，但是事情变得不稳定并且共享资源没有被编译（我使用的是 ADT 21）。

2）然后我决定将共享资源复制到每个项目中，但这也不起作用。共享代码无法导入其资源的副本，因为它不知道使用它的项目的包名。我一直使用的解决方案是动态访问资源，但是随着资源数量的增长，这变得很麻烦。

所以，我需要（1）或（2）的解决方案，否则我将不得不回到图书馆项目。（或者也许还有另一个我没有想到的选择？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:01:20.457

你真正的问题是（2）。修复 (1) 将消除一些复制，但您仍然会遇到 (2) 的问题。

不幸的是，这真的是不可能的。有一些花哨的步法可以使库项目的多个包成为可能，如果没有库项目，就没有获得相同结果的好方法。项目中的任何内容`res/`都可以通过该项目的`R`类访问，包括您复制的资源。

> 我一直在使用的解决方案是动态访问资源

我用`getIdentifier()`. 这当然有效。另一种方法是让托管应用程序提供资源 ID 作为库代码的参数——这是 Android SDK 本身使用的模式。这在运行时比基于反射的速度更快`getIdentifier()`，并且它为托管应用程序提供了更多的灵活性，但您最终会根据需要向您的方法和构造函数添加一堆参数以提供各种特定于项目的`R`值。

# string - 为什么我们在python中使用以下格式化字符串

> ID：13536454
> 
> 赞同：1
> 
> 时间：2012-11-23T22:34:08.817
> 
> 标签：string, formatting, python-2.7

自从我开始学习 Python 并有几个问题以来，这才几天。

1.  为什么我们在 python 中使用格式化字符串，例如： `%s`和`%d`？

2.  谁能告诉我更多关于格式化字符串及其作用的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:41:17.997

1.  `%s`格式化风格来自 C`printf`函数族的传统。Python 3 引入了一种[新的格式化语法](http://docs.python.org/2/library/string.html#formatstrings)，它与 Java 格式化 API 更相似，但 printf 样式的格式化在程序员中仍然很流行。

2.  检查[文档](http://docs.python.org/2/library/stdtypes.html#string-formatting)。

# asp.net - Page_Load 第一行的奇怪和罕见的 ArgumentOutOfRangeException

> ID：13536455
> 
> 赞同：2
> 
> 时间：2012-11-23T22:34:35.090
> 
> 标签：asp.net, .net, exception

我有一个用户控件，大部分时间可以正常处理数千个请求，但通常每天大约一次或两次，有一个 ArgumentOutOfRangeException 指向 aspx.vb 的代码隐藏中的 Page_Load 方法的第一行文件。我自己从未能够复制它，但我记录了错误的详细信息/堆栈跟踪。问题是，我很肯定 Page_Load 块中实际上并没有发生错误，尽管堆栈跟踪表明并非如此。事实上，我在那里有什么代码并不重要，为了证明这一点，我在 Page_Load 中放了一些虚拟代码，发布并等待下一次出现如下......

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim abc As Integer = 123
        abc = abc + 1
        ...
    End Sub 
```

果然，当错误最终再次发生时，它仍然指向 Page_Load 的第一行（第 16 行：Dim abc As Integer = 123）。显然，这不是会生成 ArgumentOutOfRangeException 的语句类型。

```
Type: System.ArgumentOutOfRangeException
Message: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
Source: mscorlib
TargetSite: Void ThrowArgumentOutOfRangeException()
StackTrace:    at System.ThrowHelper.ThrowArgumentOutOfRangeException()
at aut.ProductWithColorChoice.Page_Load(Object sender, EventArgs e) in F:\Visual Studio Projects\1003\templates\usercontrols\ProductWithColorChoice.ascx.vb:line 16
at System.EventHandler.Invoke(Object sender, EventArgs e)
at System.Web.UI.Control.OnLoad(EventArgs e)
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

.ascx 页面上使用的唯一内联代码实际上是在 javascript 块中找到的，用于获取控件的 ClientId，以在页面完全加载之前禁用控件。

```
<%@ Control Language="vb" AutoEventWireup="false" Inherits="aut.ProductWithColorChoice" %>
<script language="javascript" type="text/javascript">
(function () {
    Sys.Application.add_load(setupButtonDisablers);
    function setupButtonDisablers() {
        Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(onPageLoad);
        Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(onSubmit);
        Sys.Application.remove_load(setupButtonDisablers);
    }
    function onPageLoad() {
        findAndEnable('<%= AddToCartImageButton.ClientID %>');
    }
    function onSubmit() {
        findAndDisable('<%= YearDropDownList.ClientID %>');
        findAndDisable('<%= MakeDropDownList.ClientID %>');
        findAndDisable('<%= ModelDropDownList.ClientID %>');
        findAndDisable('<%= ColorDropDownList.ClientID %>');
        findAndDisable('<%= AddToCartImageButton.ClientID %>');
    }
    function findAndDisable(id) { findAndSetDisabledProperty(id, true); }
    function findAndEnable(id) { findAndSetDisabledProperty(id, false); }
    function findAndSetDisabledProperty(id, value) {
        var control = $get(id);
        if (control) control.disabled = value;
        else alert('could not find ' + id);
    }
})();
</script> 
```

我通过记录收集到，此错误总是发生在可能通过数据绑定下拉列表的自动回发事件触发的回发上。

另一件要提到的事情是，该控件继承了另一个名为 ProductControlBase 的类，该类随后继承了 UserControl。但是，我认为，如果错误确实发生在那里，堆栈跟踪将表明这一点。

很长一段时间以来，我一直被这个问题所困扰，并且希望对可能导致该异常的原因有所了解，或者对如何获取有关该问题的更多调试信息的一些建议（尽管我无法直接复制它）。

**2012 年 12 月 7 日更新** 我还没有解决它，但已经取得了进展。发现堆栈跟踪没有指向代码中的正确行，可能是由于编译器优化，错误可能是这个块中的几行......考虑到 if 语句中的检查，你能看到任何可能性吗sizeIndex 不会在 0 - 6 的范围内？注意：PaintSizes、RegularPaintPrices 和 PaintWeights 都是 Specialized.StringCollections，每个都有 7 个字符串。

```
 If My.Settings.PaintSizes.Contains(SizeOption) Then
        sizeIndex = My.Settings.PaintSizes.IndexOf(SizeOption)            
        Price = Decimal.Parse(My.Settings.RegularPaintPrices(sizeIndex))
        Weight = Double.Parse(My.Settings.PaintWeights(sizeIndex))
    Else
        Throw New ApplicationException(Me.ID & ": sizeoption must match exactly one of the values in PaintSizes located in the web.config file")
    End If 
```

# android - 如何使用 TrafficStatsCompat？

> ID：13536459
> 
> 赞同：0
> 
> 时间：2012-11-23T22:35:03.083
> 
> 标签：android, android-support-library

我的项目的最低 SDK 版本是 7，我无法直接使用 TrafficStats。因此，目前我正在使用一种基于反射的方法，如下[所示](http://www.anddev.org/other-coding-problems-f5/droid-and-java-reflection-to-call-a-higher-api-level-fun-t48399.html#p87101)。主要问题是我无法在 Android 2.3 之前的设备上获得此统计信息，它只是让我有可能不在 2.1 设备上强制关闭。

然后现在我正在寻找一种使用 TrafficStatsCompat 的方法，因为它在[文档](http://developer.android.com/reference/android/support/v4/net/TrafficStatsCompat.html)中被描述为*“以向后兼容的方式访问 API 级别 14 之后引入的 TrafficStats 中的功能的帮助程序”。*

我的主要问题是我找不到任何关于如何使用这个兼容性类的例子。我一直在寻找支持库中的其他类，所以我可以尝试模仿如何使用它的行为，但我没有成功。有人可以提供有关如何使用 TrafficStats 方法的示例，例如 getTotalTxBytes，但使用 TrafficStatsCompat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:51:12.807

> 有人可以提供有关如何使用 TrafficStats 方法的示例，例如 getTotalTxBytes，但使用 TrafficStatsCompat。

不，因为该类与访问 API 级别 7 上的流量统计信息无关。它完全按照您所引用的方式进行：它帮助开发人员使用`TrafficStats` *在 API 级别 14 之后*添加的方法。

在引入 API 级别 8 之前，您无法获取交通信息`TrafficStats`。

* * *

**更新**

因为试图在评论中回答评论会很痛苦......

如果你继续支持 Android 1.x，你只需要玩这样的反射游戏（如果你是，你就是圣人）。

如果您坚持使用 Android 2.x 及更高版本，您可以简单地使用路由`Build`：

```
if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.FROYO) {
    // do something involving TrafficStats
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:43:19.790

**您应该按照库android-support-v4.jar** (android-sdk\extras\android\support\v4)添加到您的项目（到 lib 文件夹中）

# html - 如何让 ul 中的 li 向左对齐零空间，并且所有 li 都垂直显示？

> ID：13536465
> 
> 赞同：0
> 
> 时间：2012-11-23T22:35:35.437
> 
> 标签：html, css

我有以下html代码

```
<ul style="text-align:left;width: 100px;height: 300px; overflow-y:scroll; list-style: none;list-style-position:inside;">
// li will be dynamically insert by JQuery
    <li> <img src="xxxx">1</img></li>
    <li> <img src="xxxx">2</img></li>
    ...
</ul> 
```

我期待输出是

```
IMG1
IMG2 
```

但是，实际输出是：

```
{Some Space}IMG1
{Some Space}IMG2 
```

任何人都知道我应该怎么做，让图像左边的空间为零？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:39:27.787

您是否尝试将填充和边距设置为`0px`for `li`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:15:03.517

该空间是由 ul 上的填充引起的。您需要添加`padding-left: 0`到您的样式

# javascript - API 的基本使用（烂番茄 API）

> ID：13536469
> 
> 赞同：2
> 
> 时间：2012-11-23T22:35:53.827
> 
> 标签：javascript, rotten-tomatoes

我正在努力实现这一目标：

***使用 Rotten Tomatoes API 通过查询电影 ID 列表来返回电影列表。***

现在，我以前没有使用过 API，所以我正在寻找我的概念。我选择使用 Javascript 与数据进行交互，使用这个示例作为我测试的基础：

```
var apikey = "myapikey";
var baseUrl = "http://api.rottentomatoes.com/api/public/v1.0";

// construct the uri with our apikey
var moviesSearchUrl = baseUrl + '/movies.json?apikey=' + apikey;
var query = "Gone with the Wind";

$(document).ready(function() {

  // send off the query
  $.ajax({
    url: moviesSearchUrl + '&q=' + encodeURI(query),
    dataType: "jsonp",
    success: searchCallback
  });
});

// callback for when we get back the results
function searchCallback(data) {
 $(document.body).append('Found ' + data.total + ' results for ' + query);
 var movies = data.movies;
 $.each(movies, function(index, movie) {
   $(document.body).append('<h1>' + movie.title + '</h1>');
   $(document.body).append('<img src="' + movie.posters.thumbnail + '" />');
 });
} 
```

那是使用搜索作为返回电影列表的方式，但我已经有一个我想返回的电影的预定义列表。

API 使用此 URL 来返回使用 ID 的特定电影

```
api.rottentomatoes.com/api/public/v1.0/movies/[MOVIE_ID_HERE].json?apikey=ny97sdcpqetasj8a4v2na8va 
```

我的问题是，如何创建一个函数，该函数将使用这些 URL 参数首先返回具有特定 ID 的电影，然后进一步从给定的一组 ID 返回电影列表。

我认为我的问题更多是关于与该 URL 一起使用的必要 JS，而不是过于特定于 Rotten Tomatoes API 本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:00:24.993

根据我从他们的论坛中了解到的情况，他们的 API 目前不支持您正在寻找的内容。他们必须实现这一点才能让你完成这样的任务。类似于传递一组电影 ID 的东西：

```
api.rottentomatoes.com/api/public/v1.0/movies/movies.json?q=["id1","id2","id3"] 
```

您可以通过为每部电影查询一次 API 并将该信息存储在一个对象中来获取您想要的每部电影，但是由于公共 API 实现了某种调用限制，您很快就会达到该限制（显然取决于您正在开发的应用程序类型）

他们论坛上的用户实际上要求提供这样的功能，你可以[在这里看到](http://developer.rottentomatoes.com/forum/read/112962)

# php - 盐和地穴协助

> ID：13536475
> 
> 赞同：0
> 
> 时间：2012-11-23T22:36:39.363
> 
> 标签：php, html, sql

我得到了我的登录页面，在它上面我还使用它来验证用户名和密码。

我坚持根据数据库中提供的密码检查密码。这是因为我在注册时已完成此代码以提高安全性。

```
$hashed_password = crypt('pass1'); 
```

任何人都可以帮助我创建一个 if 语句来检查数据库加密密码到所提供用户的密码。对此，我真的非常感激。

在登录页面....这是我的密码帖子。

```
$password = htmlentities(trim($_POST['password'])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:40:31.150

```
// let the salt be automatically generated
$hashed_password = crypt('mypassword'); 

// You should pass the entire results of crypt() as the salt for comparing
if (crypt($user_input, $hashed_password) == $hashed_password) {
   echo "Password verified!";
} 
```

**编辑**

crypt() 有两个参数，第二个是所谓的盐（[见 wiki](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)）。如果未提供，salt 将自动生成（因此可以认为是随机的）。整个算法中都使用了盐，因此要将您想要的`crypt()`用户提供的密码与您之前使用的相同盐进行比较，否则结果会有所不同。为了使这种可能的盐添加到 crypt 结果（在开始时），因此为了比较目的提供先前的结果只需`crypt()`使用旧盐（它是 2 或 12 个字符，具体取决于所使用的算法）。

# android - 为什么在 android 开发者指南中 android:authorities 是这样定义的？

> ID：13536478
> 
> 赞同：2
> 
> 时间：2012-11-23T22:37:08.787
> 
> 标签：android, android-contentprovider

下面是记事本示例代码，为什么`android:authorities = com.google.provider.NotePad`不使用项目包名呢？到底`android:authorities`要什么？

```
 Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<!-- Declare the contents of this Android application.  The namespace
     attribute brings in the Android platform namespace, and the package
     supplies a unique name for the application.  When writing your
     own application, the package name must be changed from "com.example.*"
     to come from a domain that you own or have control over. -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.notepad" >

    <uses-sdk android:minSdkVersion="11" />

    <application android:icon="@drawable/app_notes"
        android:label="@string/app_name"
    >
        <provider android:name="NotePadProvider"
            android:authorities="com.google.provider.NotePad"
            android:exported="false">
            <grant-uri-permission android:pathPattern=".*" />
        </provider>

        <activity android:name="NotesList" android:label="@string/title_notes_list">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.EDIT" />
                <action android:name="android.intent.action.PICK" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.dir/vnd.google.note" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.item/vnd.google.note" />
            </intent-filter>
        </activity>

        <activity android:name="NoteEditor"
            android:theme="@android:style/Theme.Holo.Light"
            android:screenOrientation="sensor"
            android:configChanges="keyboardHidden|orientation"
        >
            <!-- This filter says that we can view or edit the data of
                 a single note -->
            <intent-filter android:label="@string/resolve_edit">
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.EDIT" />
                <action android:name="com.android.notepad.action.EDIT_NOTE" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.item/vnd.google.note" />
            </intent-filter>

            <!-- This filter says that we can create a new note inside
                 of a directory of notes.  The INSERT action creates an
                 empty note; the PASTE action initializes a new note from
                 the current contents of the clipboard. -->
            <intent-filter>
                <action android:name="android.intent.action.INSERT" />
                <action android:name="android.intent.action.PASTE" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.dir/vnd.google.note" />
            </intent-filter>

        </activity>

        <activity android:name="TitleEditor"
            android:label="@string/title_edit_title"
            android:icon="@drawable/ic_menu_edit"
            android:theme="@android:style/Theme.Holo.Dialog"
            android:windowSoftInputMode="stateVisible">
            <!-- This activity implements an alternative action that can be
                 performed on notes: editing their title.  It can be used as
                 a default operation if the user invokes this action, and is
                 available as an alternative action for any note data. -->
            <intent-filter android:label="@string/resolve_title">
                <!-- This is the action we perform.  It is a custom action we
                     define for our application, not a generic VIEW or EDIT
                     action since we are not a general note viewer/editor. -->
                <action android:name="com.android.notepad.action.EDIT_TITLE" />
                <!-- DEFAULT: execute if being directly invoked. -->
                <category android:name="android.intent.category.DEFAULT" />
                <!-- ALTERNATIVE: show as an alternative action when the user is
                     working with this type of data. -->
                <category android:name="android.intent.category.ALTERNATIVE" />
                <!-- SELECTED_ALTERNATIVE: show as an alternative action the user
                     can perform when selecting this type of data. -->
                <category android:name="android.intent.category.SELECTED_ALTERNATIVE" />
                <!-- This is the data type we operate on. -->
                <data android:mimeType="vnd.android.cursor.item/vnd.google.note" />
            </intent-filter>
        </activity>

        <activity android:name="NotesLiveFolder" android:label="@string/live_folder_name"
            android:icon="@drawable/live_folder_notes">
            <intent-filter>
                <action android:name="android.intent.action.CREATE_LIVE_FOLDER" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T22:49:39.677

> 为什么使用 android:authorities = com.google.provider.NotePad 而不是使用项目包名？

我猜是因为谷歌喜欢这种方式。它是一个提供商，它来自 com.google。您的应用程序中还可以有多个提供程序，因此仅包名称可能还不够。

> android:authorities 到底要求什么？

您的提供商的系统范围的唯一标识符。或者更好的全球独一无二。所有提供程序都已在系统中注册，并且它们必须是唯一的，否则无法安装想要使用相同名称的第二个应用程序。

您最终使用该字符串通过 Uri 与您的提供者进行通信，例如

```
Uri uri = Uri.parse("content://" + "your.authoritiy.string") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:45:43.883

> 为什么 android:authorities = com.google.provider.NotePad 而不是使用项目包名？

因为那是代码作者决定输入的内容。只要它可能是唯一的，没关系。

话虽如此，使用您的应用程序包名称作为授权的一部分是一个好主意，只是为了帮助使其可能是唯一的。

> android:authorities 到底要求什么？

它要求 . 支持的权限值`ContentProvider`。在一个`Uri`喜欢：

```
content://please.read.the.documentation/for/content/provider/1 
```

权限是`please.read.the.documentation`。Android 将通过在设备上的元素中的属性注册的所有权限的名单中查找`ContentProvider`与此相关联的内容。您可以将其视为与主机在 HTTP URL 中所起的类似作用。`Uri``please.read.the.documentation``android:authorities``<provider>`

这是开始讨论权限[的文档中的要点。`ContentProvider`](http://developer.android.com/guide/topics/providers/content-provider-basics.html#ContentURIs)

# jquery - 悬停时如何保持此下拉菜单可见？

> ID：13536492
> 
> 赞同：0
> 
> 时间：2012-11-23T22:38:25.400
> 
> 标签：jquery, css

我使用另一个堆栈用户发布的脚本构建了一个下拉菜单，但是现在当我将鼠标悬停在它上面时，我无法保持它可见。这是网站：

```
http://79.24.150.216/ 
```

您可以尝试悬停“信息”，然后尝试悬停显示的菜单，您会发现它不会保持可见。

您可以在以下位置找到 css：

```
http://79.24.150.216/css/main.css 
```

这是使用的 js 片段：

```
$('nav li').on('mouseenter mouseleave hover',function( e ){
$('#'+$(this).data('open'))[e.type=='mouseenter'?'slideDown':'slideUp'](); }); 
```

预先感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:43:23.237

您是否尝试添加`#subnav`用于悬停功能的元素`$('nav li, #subnav')`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:46:48.750

您的悬停仅适用于 LI 元素，因此一旦悬停离开该元素，您将失去悬停并且子导航正在关闭。

您可以尝试制作两个类 .default-class { display: none } .show { display: block }

然后尝试 $('nav li').on('hover click', function() { $('.subnav').addClass('show'); })

然后隐藏在 subnav (.removeClass('show'); 上执行鼠标离开事件；您还可以将鼠标悬停在任何其他 li 元素上，使 subnav 也隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:38:24.357

试试这个解决方案。

```
$(document).ready(function(){
    $('nav li').on('mouseenter click hover',function( e ){
        var value = $(this).attr('data-open');
        $('#'+value).slideDown();     
    });

    $('#subnav ul li').on('mouseleave', function(e){
        var menu = $(this).parent().parent().parent().attr('id');
        $('#'+menu).slideUp();
    });
}); 
```

希望能帮助到你。

建议：您可以使用 info-submenu 定义子菜单，以便您可以动态获取正确的 div 以加载顶部菜单。

# facebook - 获取特定 Facebook 位置（页面）的签到

> ID：13536495
> 
> 赞同：6
> 
> 时间：2012-11-23T22:39:14.650
> 
> 标签：facebook, facebook-graph-api, checkin

我有一个 Facebook 位置（页面），用户可以在其中签到。我是此页面的管理员。API 有没有办法获取带有用户 ID 的最近签到列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T10:11:27.373

不确定您是否看过它们，但据我从文件中看到的，这是不可能的。[页面https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)的签入连接只为您提供所有签入的计数。

使用用户 access_token 它只会返回用户签到或他们朋友的签到（如果已授予适当的权限）。但是您将无法获得与您没有联系的人的 user_ids。

假设您可以使用页面访问令牌尝试以下 FQL 查询。

```
 SELECT author_uid,checkin_id,timestamp FROM checkin WHERE target_id = xxxxxxxxxxxxx
 //where xxxxxxxxxxxxxx = your page id 
```

或尝试订阅实时更新[https://developers.facebook.com/docs/reference/api/realtime/#introduction](https://developers.facebook.com/docs/reference/api/realtime/#introduction)

不幸的是，我无法对此进行测试，因为我没有设置任何指定位置的页面

# c++ - 如何在 C++ 中安全地调整大向量的大小

> ID：13536501
> 
> 赞同：1
> 
> 时间：2012-11-23T22:40:20.103
> 
> 标签：c++, vector, primes, ram

我在 C++ 中制作了一个素数查找器，它将素数写入 .txt 文件，但在找到第 102,144,001 个（2,084,058,601）后它崩溃了。它还将找到的素数存储在一个向量中，因此它不必除以小于当前检查数字平方根的每个数字，只需除以素数。它在每 (10,240n+1) 个找到素数之后调整存储素数的向量的大小，而 102,144,001 是 10,240n+1，因此它在调整大小时崩溃了。我使用了一个向量 unsigned __int64，所以当它崩溃时它使用了大约 780 兆字节，但我有 8 GB RAM。我应该使用vector.reserve()吗？（我不想在 50 分钟后再次崩溃......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:33:36.347

好吧，可用内存与可用内存不同。

cppreference[表示](http://en.cppreference.com/w/cpp/container/vector)向量的元素是连续存储的。因此，这不是您拥有多少 RAM 的问题，而是您在程序运行时拥有多少连续 RAM。如果向量必须是连续的，则该向量不能扩展超出连续内存的最大可用部分。

因此，当向量需要调整大小时，您也可能会遇到问题。如果向量与一大块连续内存相邻，它可以扩展成，那么很好；但是，如果向量的块太小，则它必须将自身复制到新位置……这需要时间。

[deque](http://en.cppreference.com/w/cpp/container/deque)容器可能是更好的选择，因为它不需要连续的存储位置。这使您可以利用更多可用 RAM 并避免在调整大小期间进行昂贵的复制操作。

（如果您担心标准是否保证向量是连续的（因此可能导致 OP 的问题），阅读[此内容](https://stackoverflow.com/questions/849168/are-stdvector-elements-guaranteed-to-be-contiguous)[可能](https://stackoverflow.com/questions/247738/is-it-safe-to-assume-that-stl-vector-storage-is-always-contiguous)有助于阐明此问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:43:47.187

只有比 2084058601 的平方根少 4730 个素数。如果您在存储少量数据时内存不足，那么您做错了。

我最近编写了一个素数生成器，并用它来对前十亿个素数求和。它使用分段的 Eratosthenes 筛，并在每个分段的开头添加额外的筛分素数。内存使用对于位数组的大小是恒定的，并且对于筛选素数来说增长缓慢。你可能想看看[它](http://programmingpraxis.com/2012/09/11/the-sum-of-the-first-billion-primes/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T01:13:52.957

老实说，我怀疑这是你的问题。在 64 位操作系统上，您应该有足够的地址空间，因此只有在交换空间用完时才会遇到问题。

我猜你的问题是栅栏问题。事实上，您甚至认为您需要调整大小，链 push_back 应该绰绰有余。

你的崩溃的细节可能值得一看。您可能还想查看 std 向量在无法分配内存时抛出的异常。另一个问题是 io 可能比计算慢得多，如果您知道崩溃的最后一位数字而不是崩溃的方式，则可能是打印过多。

# css - Why doesn't my float around another floated while other elements do?

> ID：13536503
> 
> 赞同：3
> 
> 时间：2012-11-23T22:40:29.707
> 
> 标签：css, css-float

I have a container with background color green. Inside that green `<div>`, I have a `<div>` which is black and styled as a box (50px x 50px) - this `<div>` is floated to the left.

Now if I add a `<p>` to my markup after the grey `<div>`, I'd expect it to float around the grey `<div>`. And it does. However, when I substitue

with another `<div>` which is styled as box (set height and width), it doesn't float around anymore, but disappears behind the floating div.

Even if I have first paragraphs which are floating around correctly and THEN I add the div (box), the paragraphs stop floating around and appear on another line.

**HTML:**

```
<div id="greencontainer">
    <div id="blackbox"></div> <!--this one is float:left;-->
    <p>A paragraph that floats around the previous div</p>

    <div id="anotherbox"></div> <!-- if I add another div with set width and height, it disappears behind the floated one, and even prevents the paragraph from floating around.-->
</div> 
```

**CSS:**

```
#blackbox {
    width:50px;
    height:50px;
    background-color:black;
    float:left;
}

#p {
    margin:0px;
    padding:0px;
}

#anotherbox {
    width:50px;
    height:50px;
    background-color:grey;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:48:17.163

Actually, part of the `<p>` itself, which is a block box, is also hiding behind your first `<div>`. That's because it's not being floated, so it's being laid out in normal flow *as if the first `<div>` was not there*, because [floating](http://www.w3.org/TR/CSS21/visuren.html#floats) a box takes it out of [normal flow](http://www.w3.org/TR/CSS21/visuren.html#normal-flow).

Your `<p>` contains inline content (its text), however that inline content is able to flow around your first `<div>`, because inline content is made that way. It's why you're able to align an image to the left or right and text is able to flow around it without the image being in the way.

Your second `<div>`, like your `<p>`, isn't floated, so again it's being laid out in normal flow as if your first `<div>` wasn't there. Since both of them have the same dimensions, it looks as if one is completely hidden behind the other.

In your code you have the second `<div>` coming after the `<p>`, so it *shouldn't* affect the text. However if you meant to add it *before* the `<p>`:

```
<div id="greencontainer">
    <div id="blackbox"></div>
    <div id="anotherbox"></div>
    <p>A paragraph that floats around the previous div</p>
</div> 
```

Then, upon reading my explanation above, the reason the text stops flowing around the first `<div>` becomes obvious: because your second `<div>` is in the way, hidden behind the first one. It's that second element that's pushing your `<p>` down.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:01:50.753

A non-floated div will not natively wrap around a floated division afaik. What you should do is add `margin-left: 50px` on the `anotherbox` div to let it flow correctly if it is beside the floated container. I'm not sure if this is the best solution, but it normally works well if you know that the div will **always** be beside the floated div. If it's not beside it, then it will flow correctly without it automatically.

Check out this fiddle.

[http://jsfiddle.net/bvSby/](http://jsfiddle.net/bvSby/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T14:41:40.643

I have recently come across this issue too and have found purely by chance that adding overflow: auto (or hidden) to the div, will cause it to float around the floated div (like you'd expect).

Change the css of `#anotherbox` to look like this...

```
#anotherbox {
    width:50px;
    height:50px;
    background-color:grey;
    overflow: auto;
} 
```

Here's a link to test this: [https://jsfiddle.net/kh3pdbtx/](https://jsfiddle.net/kh3pdbtx/)

As to *why* this works - I honestly don't know. If someone could shed some light on the subject and explain the reason behind this I'd really appreciate it.

It seems to be something to do with [Block formatting context](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context).

# c# - 异步等待 Task.Run 与 HttpClient.GetAsync

> ID：13536505
> 
> 赞同：16
> 
> 时间：2012-11-23T22:40:37.693
> 
> 标签：c#, asynchronous, task-parallel-library, async-await, c#-5.0

我是 c# 5 的异步功能的新手。我试图了解这两种实现之间的区别：

**实施1：**

```
private void Start()
{
    foreach(var url in urls)
    {
        ParseHtml(url);
    }
}

private async void ParseHtml(string url)
{
    var query = BuildQuery(url); //BuildQuery is some helper method
    var html = await DownloadHtml(query);
    //...
    MyType parsedItem = ParseHtml(html);
    SaveTypeToDB(parsedItem);
}

private async Task<string> DownloadHtml(string query)
{
    using (var client = new HttpClient())
    try
    {
        var response = await client.GetAsync(query);
        return (await response.Content.ReadAsAsync<string>());
    }
    catch (Exception ex)
    {
        Logger.Error(msg, ex);
        return null;
    }
} 
```

**实施2：**

```
private void DoLoop()
{
    foreach(var url in urls)
    {
        Start(url);
    }
}

private async void Start(url)
{
    await Task.Run( () => ParseHtml(url)) ;
}

private void ParseHtml(string url)
{
    var query = BuildQuery(url); //BuildQuery is some helper method
    var html = DownloadHtml(query);
    //...
    MyType parsedItem = ParseHtml(html);
    SaveTypeToDB(parsedItem);
}

private string DownloadHtml(string query)
{
    using (var client = new WebClient())
    {
        try
        {
            return client.DownloadString(query);
        }
        catch (Exception ex)
        {
            Logger.Error(msg, ex);
            return null;
        }
    }
} 
```

我宁愿使用第二种实现，因为它在我的代码中的方法上需要更少的“异步”签名。我试图了解使用 HttpClient 类与使用新任务并等待它的好处是什么？

两种实现之间有什么区别吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-23T22:59:06.060

> 我宁愿使用第二种实现，因为它在我的代码中的方法上需要更少的“异步”签名。

这听起来像是一个*非常*奇怪的理由。您正在尝试从根本上“有点异步”执行 - 那么为什么不说清楚呢？

> 两种实现之间有什么区别吗？

绝对地。第二种实现将在`WebClient.DownloadString`阻塞时占用一个线程，等待请求完成。第一个版本没有任何阻塞线程 - 它依赖于在请求完成时触发的延续。

此外，请考虑您的`Logger.Error`电话。在异步版本中，它仍将在原始调用代码的上下文中执行。因此，如果这是在 Windows 窗体 UI 中，您仍将位于 UI 线程上，并且您可以访问 UI 元素等。在第二个版本中，您将在线程池线程中执行，并且需要编组回 UI 线程以更新 UI。

请注意，您的`async void`方法几乎肯定*不应该*是`async void`. 为了遵守事件处理程序签名，您应该只`async`返回方法。`void`在所有其他情况下，返回`Task`- 这样调用者可以看到您的任务何时完成，处理异常等。

另请注意，您不需要`HttpClient`用于异步 - 您可以`WebClient.DownloadStringTaskAsync`改为使用，因此您的最终方法可能变为：

```
private async Task<string> DownloadHtmlAsync(string query)
{
    using (var client = new WebClient())
    {
        try
        {
            return await client.DownloadStringTaskAsync(query);
        }
        catch (Exception ex)
        {
            Logger.Error(msg, ex);
            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T17:27:25.693

对于服务器应用程序，`async`是关于最小化您拥有的阻塞线程的数量：提高线程池的效率，并可能允许您的程序扩展到更多用户。

对于您不太可能需要关心线程数的客户端应用程序，`async`提供了一种相对简单的方法来让您的 UI 在执行 I/O 时保持流畅运行。

`Task.Run`它与引擎盖下面有很大不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T11:53:06.590

只有当你的调用线程有一些有意义的事情要做时，你才会从异步处理中受益，比如保持 UI 响应。如果你的调用线程只启动一个任务并且什么都不做，只是等到任务完成，你的进程会运行得更慢。

您的第二个实现启动了一项任务，但您等待它完成而不做任何其他事情。这样你就不会受益。

你没有描述你的环境，但是如果你有一个必须保持响应的 UI，那么方法 1 的实现是可以的，除了你的 Start() 没有声明为 async 并且不等待：

```
private async Task StartAsync()
{
    foreach (var url in urls)
    {
        await ParseHtml(url)
    }
} 
```

您可以从事件处理程序中调用它，如下所示：

```
private async void OnButton1_clicked(object sender, ...)
{
   await StartAsync();
} 
```

注意：ParseHtml 前面有 await。下一个 html 将在前一个解析完成后解析。然而，由于解析是异步的，调用线程（UI 线程？）将能够执行其他操作，例如响应用户输入。

但是，如果您的 parseHTML 函数能够同时运行，则以下代码会更好，而且可能更快：

```
private async Task StartAsync()
{
    var tasks = new List<Task>()
    foreach (var url in urls)
    {
        tasks.Add(ParseHtml(url));
    }
    // now you have a sequence of Tasks scheduled to be run, possibly simultaneously.
    // you can do some other processing here
    // once you need to be certain that all tasks are finished await Task.WhenAll(...)
    await Task.WhenAll(tasks);
    // Task.WhenAls(...) returns a Task, hence you can await for it
    // the return of the await is a void
} 
```

*   如果您调用返回任务的函数，您可以在任务运行时继续做其他事情或等待任务完成并使用任务的结果。
*   如果您等待，您的代码将停止，但您的调用者会继续处理，直到他们等待您的任务完成
*   如果您的程序是异步的，您只能在您的程序中等待。
*   异步函数只能由其他异步函数调用，或者通过调用 Task.Run( () => ...) 或者如果愿意：Task.Factory.StartNew( () => ...)
*   异步函数返回 Task 而不是 void
*   而不是 TResult 一个异步函数返回 Task `<TResult`>
*   唯一的例外是事件处理程序：将其声明为异步并返回 void。
*   如果您需要完成任务，只需等待任务即可。
*   await 的返回是 TResult。

# java - Java 日历错误

> ID：13536509
> 
> 赞同：2
> 
> 时间：2012-11-23T22:40:51.453
> 
> 标签：java, calendar

我对 Java 中的日历有一些问题。当我在日历中添加几周时，它在某些情况下无法正常工作。例如。将 week_of_yer 设置为 3，然后添加 -3 周；）在大多数情况下效果很好，但在 2010 年、2016 年等情况下效果不佳（今年是 53 周后的年份）。它看起来像JDK中的错误，我认为当周数为52时它们会改变年份：D一些简单的代码：

```
Calendar calendar = new GregorianCalendar();
calendar.set(Calendar.YEAR, 2016);
calendar.set(Calendar.WEEK_OF_YEAR, 3);
calendar.add(Calendar.WEEK_OF_YEAR, -3);
System.out.println("rolled week: " + calendar.get(Calendar.WEEK_OF_YEAR) + " - " + calendar.get(Calendar.YEAR)); 
```

此代码的结果是：滚动周：53 - 2016：D

应该是 53 - 2015 在所有其他情况下它应该正常工作。

有没有人有类似的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T22:45:21.527

问题是你显示的是*year*而不是*week year*。您无需对日历进行算术运算即可显示这一点。基本上你显示的是 2016 年 1 月 1 日。*那一年*是 2016 年，但*周年*（即计算一周中的一周的年份）是 2015 年。

不幸的是，据我所知，Java 没有办法获取周年。您最好使用[Joda Time](http://joda-time.sf.net)，它可以让您轻松完成所有这些操作：

```
import org.joda.time.*;

public class Test {
    public static void main(String[] args) throws Exception {
        LocalDate date = new LocalDate(2016, 1, 1);
        System.out.println(date);
        System.out.println(date.getWeekOfWeekyear());
        System.out.println(date.getWeekyear());
    }    
} 
```

输出：

```
2016-01-01
53
2015 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:03:46.730

乔恩，你是对的。今天我注意到问题出在哪里，正是你所说的。我只对周数和年份感兴趣，所以在将数字添加到周之前，我将星期几设置为星期一。对我来说它有效。

```
Calendar calendar = new GregorianCalendar();
calendar.set(Calendar.YEAR, year);
calendar.set(Calendar.WEEK_OF_YEAR, week);
calendar.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
calendar.add(Calendar.WEEK_OF_YEAR, -51); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T03:00:08.533

# jquery - Backbone and Rails 3 Uncaught TypeError：无法调用未定义的方法“on”

> ID：13536515
> 
> 赞同：0
> 
> 时间：2012-11-23T22:41:44.017
> 
> 标签：jquery, ruby-on-rails-3, backbone.js, coffeescript, railscasts

我正在开发一个应用程序，我正在关注这个 rails cast：
[http ://railscasts.com/episodes/323-backbone-on-rails-part-1](http://railscasts.com/episodes/323-backbone-on-rails-part-1)

一切似乎都是正确的，除了当我在 localhost:3000 运行我的 js 控制台时不断收到错误，我得到以下信息：

```
 Uncaught TypeError: Cannot call method 'on' of undefined     posts_index.js:16
   Voice.Views.PostsIndex.PostsIndex.initialize                 posts_index.js:16
   Backbone.View                                                backbone.js:1147
   PostsIndex                                                   posts_index.js:10 
   Voice.Routers.Posts.Posts.index                              posts_router.js:24
   (anonymous function)                                         backbone.js:900
   (anonymous function)                                         backbone.js:1081
   _.some._.any                                                 underscore.js:209
   _.extend.loadUrl                                             backbone.js:1079
   _.extend.start                                               backbone.js:1046
   window.Voice.initialize                                      voice.js:10
   (anonymous function)                                         voice.js:15
   fire                                                         jquery.js:975
   self.fireWith                                                jquery.js:1083
  jQuery.extend.ready                                           jquery.js:407
  DOMContentLoaded                                              jquery.js:84 
```

这是我的集合、模型、视图、路由器和模板的主干代码：

## 应用程序/资产/javascripts/voice.js.coffee

```
Window.Voice =
    Models: {}
    Collections: {}
    Views: {}
    Routers: {}
    initialize: ->
            new Voice.Routers.Posts()
            Backbone.history.start()
$(document).ready ->
    Voice.initialize() 
```

## 应用程序/资产/javascripts/application.js

```
//= require jquery
//= require jquery_ujs
//= require underscore
//= require backbone
//= require voice
//= require_tree ../templates
//= require_tree ./models
//= require_tree ./collections
//= require_tree ./views
//= require_tree ./routers
//= require_tree . 
```

## javascripts/路由器/posts_router.js.coffee

```
class Voice.Routers.Posts extends Backbone.Router
    routes:
            '': 'index'
    initialize: ->
            @collection = new Voice.Collections.Posts()
            @collection.fetch()
    index: ->
            view = new Voice.Views.PostsIndex()
            $('#container').html(view.render().el) 
```

## javascripts/views/posts/posts_index.js.coffee

```
class Voice.Views.PostsIndex extends Backbone.View

    template: JST['posts/index']

    initialize: ->
            @collection.on('reset', @render, this)

    render: ->
            $(@el).html(@template(posts: @collection))
            this 
```

## 应用程序/资产/模板/帖子/index.jst.eco

```
<h1> BACKBONE WORKS</h1>
<tr><td>
<%= @posts %>
</td></tr> 
```

## javascripts/collections/posts.js.coffee

```
class Voice.Collections.Posts extends Backbone.Collection
    url: '/api/posts'
    model: Voice.Models.Post 
```

## javascripts/models/post.js.coffee

```
class Voice.Models.Post extends Backbone.Model 
```

## 配置/路由.rb

```
Voice::Application.routes.draw do
    match '/login' => 'session#create'
    get 'logout', to: 'session#destroy', as: 'logout'
    resources :users
    scope "api" do
            resources :posts
    end
root :to => "main#index"
end 
```

## 控制器/posts_controller.rb

```
class PostsController < ApplicationController
  def index
    render :json => Post.all
  end

  def show
    render :json => Post.find(params[:id])
  end

  def upvote
    @post = Post.find(params[:id])
    current_user.like(@post)
    render :json => @post
  end

  def downvote
    @post = Post.find(params[:id])
    current_user.dislike(@post)
    render :json => @post
  end

  def create
    @post = Post.create!(:content => params[:content])
    render :json => @post
  end
end 
```

## app/views/main/index.html.erb

```
<table class = 'table table-bordered table-condensed table-hover'>
        <div id='container'>
        </div>
</table> 
```

Backbone 很难调试，我已经投入了 12 个小时以上的时间。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:11:13.097

你`PostsIndex`这样做：

```
initialize: ->
    @collection.on('reset', @render, this) 
```

但是您正在像这样实例化它：

```
class Voice.Routers.Posts extends Backbone.Router
    #...
    index: ->
        view = new Voice.Views.PostsIndex() 
```

我认为您想将路由器传递`@collection`给`PostsIndex`：

```
view = new Voice.Views.PostsIndex(collection: @collection) 
```

Backbone 会[自动将该`collection`选项转换为`@collection`](http://backbonejs.org/#View-constructor)inside `PostsIndex`：

> **构造函数/初始化** `new View([options])`
> 
> [...] 有几个特殊选项，如果通过，将直接附加到视图：`model`、`collection`、`el`、`id`、`className`和。`tagName``attributes`

所以只包括`collection: @collection`在构建时`PostsIndex`就足够了。

# javascript - JavaScript onClick() 显示

> ID：13536517
> 
> 赞同：0
> 
> 时间：2012-11-23T22:42:02.830
> 
> 标签：javascript, html, onclick, getelementbyid

我有一个由几个包含字符串的对象组成的数组。我可以使用以下方法成功显示数组：

```
<td><p onclick="theMiddle(this)">The Middle</td> 
```

正如您从 td 标记中看到的，这是表格的一部分。问题是浏览器打开一个新页面来显示我的文本。我一直试图在 ap 标签中显示我的表格上方的数组。

```
//JavaScript
var arrayTheMiddle = new Array (showName.theMiddle, beginingTime.theMiddle, 
network.abc, duration.thirty, rating.general, description.theMiddle, showImage.theMiddle);  

function theMiddle(obj){
   for(i=0; i < arrayTheMiddle.length; i++)
     {
      document.write(arrayTheMiddle[i] + "<br>");
     }
}

//HTML File

<p>Would like the array/function displayed here while the user clicks within the table below (entire table has not been listed)</p>

<td><p onclick="theMiddle(this)">The Middle</td> 
```

不幸的是，我一直无法利用 get element by id 来调用由数组组成的函数。我已经搜索了各种各样的东西，但坦率地说我迷路了。甚至不确定我的方法在这一点上是否正确。我敢肯定这是让我头疼的那些简单的事情之一！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:02:40.250

强烈建议使用几个优秀的 JavaScript 框架之一来完成此类工作。我更喜欢 Dojo，很多人喜欢 jQuery。

这里没有足够的上下文来查看什么不起作用，但是您几乎总是最好避免使用 document.write，它只是将文本附加到文档的 HTML 中——我认为这不是您想要的案子。

您想创建某个容器节点的子节点。通常，您会在标记中放置一个没有内容的容器节点，我们称之为`<div id='container'>`.

然后你会做这样的事情（我懒得测试手工编码的 DOM 操作，但这就是想法）：

```
var container = document.getElementById('container');
for (var m : theMiddle) {
   if (theMiddle.hasOwnProperty(m)) {
      var txt = document.createTextNode(m);
      container.appendChild(txt); 
      var br = document.createNode('br'); // I don't approve of br, but that is not relevant here
      container.appendChild(br);
   }
} 
```

# c++ - Intel c++ CreateWindow 内核资源泄露

> ID：13536524
> 
> 赞同：0
> 
> 时间：2012-11-23T22:43:10.413
> 
> 标签：c++, memory, resources, memory-leaks, intel

我正在使用 Parallel Studio（来自英特尔）和英特尔 c++ 编译器。

内存问题分析器总是告诉我，我的`CreateWindow`函数中有内核资源泄漏。

函数调用位于我的头文件的第 26 行。

无论我做什么，泄漏总是出现（调用`DestroyWindow`类的析构函数等）

标题： [http ://beta.pastie.org/private/ze8x59f1nfkjz0wcrromew](http://beta.pastie.org/private/ze8x59f1nfkjz0wcrromew)

资料来源： [http ://beta.pastie.org/5425046](http://beta.pastie.org/5425046)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:28:03.880

您链接的代码中的类没有析构函数。

无论如何，它可能是 CreateWindow 所做的事情，看起来像内存泄漏，但不是。

PS 不要在 CWindow 的每个实例化上注册 WNDCLASS。在程序启动时注册一次。您可以在 CWindow 中创建一个私有的 WindowClass 单例类来处理窗口类注册：

```
class CWindow
{
private:
    class CWindowClass
    {
    private:
        static CWindowClass m_windowClass;

        CWindowClass()
        {
            // Register a WNDCLASS
        }

        ~CWindowClass() {}
    }

    ...
}; 
```

# wpf - 如果 ViewModel 具有相同的位置属性，WPF MVVM Canvas UIElement 具有奇怪的绑定

> ID：13536530
> 
> 赞同：1
> 
> 时间：2012-11-23T22:43:34.420
> 
> 标签：wpf, mvvm, canvas, observablecollection, dispatchertimer

`UIElement`如果视图模型与集合中的另一个视图模型具有相同的属性，则该视图模型绑定到错误。

我有一个`Canvas`表示矩阵的控件，并且此画布绑定到一组矩形视图模型。每个矩形视图模型都与一个模型相关，该模型具有一个 Move() 方法，该方法设置模型的坐标，进而告诉矩形在矩阵 (x,y) 上移动的位置。

```
public class RectangleModel
{
    public void Move()
    {
        // Logic to find out where to move
        // sets x,y coordinates for the model
        this.Location.X = x;
        this.Location.Y = y
    }
} 
```

Canvas 视图模型有一个 DispatcherTimer，它在执行时循环通过画布的 ObservableCollection 中的每个矩形视图模型并调用 MoveModel() 方法，该方法又调用它引用的矩形模型上的 Move 方法。

```
public class CanvasViewModel
{
   private void MoveAllRectangles()
   {
       for(int i = 0; i < obsCol.Size; i++)
       {
           obsCol[i].MoveModel();
       }
}

public class RectangleViewModel
{
    private RectangleModel InstanceModel
    {
       get{ return this.instanceModel; }
       set{ this.instanceModel = value;}
    }

    public int XPos
    {
       get
       {
          return this.InstanceModel.Location.X;
       }
    }  

    public int YPos
    {
       get
       {
          return this.InstanceModel.Location.Y;
       }
    } 

    public void MoveModel()
    {
        this.InstanceModel.Move();
        NotifyOfPropertyChange(string.Empty);
    }
} 
```

这工作正常，画布上的所有矩形每秒都会移动到矩阵上的相邻图块。直到一个矩形移动到已经被另一个矩形占据的图块（具有相同 XPos、YPos 属性的视图模型），一旦发生这种情况，两个矩形都会绑定到同一个视图模型（看起来如此）并且一旦计时器执行两个矩形移动到相同的位置。因此，如果我从画布上的五个矩形开始，最终它们将全部组合在一起，并且只有 1 个矩形会在画布上四处移动。

调试问题会导致矩形正确移动，如果一个矩形最终出现在另一个矩形平铺中，那么下一次迭代该矩形将简单地移出平铺并正确进行。

任何帮助将不胜感激。

# asp.net - 为什么我的文件中总是附加一个附加扩展名 .sdx？

> ID：13536531
> 
> 赞同：0
> 
> 时间：2012-11-23T22:43:34.067
> 
> 标签：asp.net, asp.net-mvc-3, firefox, razor, content-disposition

我在这里遇到了一个奇怪的问题：在 ASP.NET 控制器中，我这样做：

```
 public ActionResult ExportTex()
    {
        Response.ContentType = "text/plain";
        Response.AddHeader("Content-Disposition", "attachment;filename=\"" + Server.HtmlEncode("overview.tex") + "\"");
        return View(_model);
    } 
```

这应该使我的浏览器（FireFox 17）打开文件下载对话框并使用相应的文件名进行下载。然而，无论我如何在 Content-Disposition 标头中命名文件（即通过 FireFox 下载时文件名为*overview.tex.sdx* ），文件名总是在提供的扩展名*.tex***之外**附加扩展名“.sdx” 。

 **如果有人能向我解释这个额外扩展的来源，我将不胜感激。

只有 FireFox 有这种行为。Chromium 反而像一个魅力。

**//编辑**根据要求，这是 FireFox 获得的标题：

```
X-SourceFiles:=?UTF-8?[... doesn't matter I guess]?=
X-Powered-By:ASP.NET
X-AspNetMvc-Version:4.0
X-AspNet-Version:4.0.30319
Vary:Accept-Encoding
Set-Cookie:.ASPXROLES=; expires=Mon, 11-Oct-1999 22:00:00 GMT; path=/; HttpOnly
Server:Microsoft-IIS/8.0
Date:Sat, 24 Nov 2012 15:13:40 GMT
Content-Type:text/plain; charset=utf-8
Content-Length:7975
Content-Encoding:gzip
Content-Disposition:attachment;filename="overview.tex"
Cache-Control:private, s-maxage=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:08:59.833

这确实很奇怪，因为如果内容类型是“text/plain; charset=utf-8”，Firefox 就不应该进行内容类型嗅探。

你能在多台机器上重现这个吗？什么平台？如果是 Windows，您是否安装了*任何*处理“sdx”的软件（搜索注册表...）。**

# css - 在运行时重新编译 Rails sass 和 css 资产

> ID：13536532
> 
> 赞同：1
> 
> 时间：2012-11-23T22:43:42.240
> 
> 标签：css, ruby-on-rails

我想为客户构建一个 GUI 来更改颜色、字体等……但我不确定如何让 Rails 在不重新启动服务器的情况下重新编译 sass/css 资产。

这甚至可能吗？如果是这样，诀窍是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:57:25.070

正确，如果实际的 css 文件受输出 rails 变量的影响，则不能同时进行资产编译和运行时变量替换。
您可以随时关闭资产编译。

# c# - 使用FileSystemWatcher检测xml文件，使用Linq读取xml文件提示结果错误“Root Element is Missing”

> ID：13536535
> 
> 赞同：1
> 
> 时间：2012-11-23T22:44:22.673
> 
> 标签：c#, xml, linq, filesystemwatcher

我的应用程序已经在工作了，它可以检测到xml文件并提示xml文件的内容，但有时会提示“缺少根元素”，有时也可以，但是当我打开xml文件时，就可以了，它上面有内容。如何解决这个问题。

这是错误的屏幕截图：

![在此处输入图像描述](../Images/aa78430ee4cac6669d028bccadce2ec6.png)

这是代码：

```
private void fileSystemWatcher_Created(object sender, System.IO.FileSystemEventArgs e)
    {
        string invoice = "";
        using (var stream = System.IO.File.Open(e.FullPath, System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.ReadWrite))
        {
            var doc = System.Xml.Linq.XDocument.Load(stream);
            var transac = from r in doc.Descendants("Transaction")
                          select new
                          {
                              InvoiceNumber = r.Element("InvoiceNumber").Value,
                          };

            foreach (var i in transac)
            {
                invoice = i.InvoiceNumber;
            }
        }

        MessageBox.Show(invoice);
        fileSystemWatcher.EnableRaisingEvents = false;
    } 
```

错误在这里`var doc = System.Xml.Linq.XDocument.Load(stream);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:54:09.920

当文件发生变化时，FileSystemWatcher 将很快引发事件。在您读取文件之前，写入操作可能尚未完成。

要对此进行测试，请在读取文件之前添加一个`Thread.Sleep(100);`作为快速解决方法。

为了获得更好的解决方案，请不要以共享模式打开文件，而是尝试以独占方式打开它。如果失败，请等待几毫秒，然后重试 - 直到您可以以独占方式打开文件。还要注意事件可能会被多次触发 - 这取决于其他任务如何写入文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:54:01.457

当文件创建然后在单独的步骤中写入时，可能存在竞争条件。因此，当创建的事件触发导致异常时，有时您会有一个空文件。您应该在事件`Created`触发后等待一小段时间，以等待. 另外，请注意，如果正在写入大量内容，则在所有内容出现在文件中之前有许多事件。`Changed``FileSystemWatcher``Changed`

# r - 基于多类观察对 r 中的数据集进行分区

> ID：13536537
> 
> 赞同：15
> 
> 时间：2012-11-23T22:44:38.530
> 
> 标签：r, random, partitioning

我正在尝试对 R 中的数据集进行分区，2/3 用于训练，1/3 用于测试。我有一个分类变量和七个数值变量。每个观察被分类为 A、B、C 或 D。

为简单起见，假设分类变量 cl 是前 100 个观测值的 A，观测值 101 到 200 的 B，C 到 300，D 到 400。我试图得到一个有 2/3 的分区A、B、C 和 D 中的每一个的观察值（而不是简单地获得整个数据集的 2/3 观察值，因为它可能不会有相同数量的每个分类）。

当我尝试从数据子集（例如 ）中进行采样时，`sample(subset(data, cl=='A'))`会重新排序列而不是行。

总而言之，我的目标是从 A、B、C 和 D 中的每一个中获得 67 个随机观察作为我的训练数据，并将 A、B、C 和 D 中每个的剩余 33 个观察作为测试数据存储。我发现了一个与我的非常相似的问题，但它没有考虑多个变量。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T00:33:20.923

实际上有一个很好的包**caret**用于处理机器学习问题，它包含一个函数**createDataPartition()**几乎可以从提供的因子的每个级别进行 2/3 采样：

```
#2/3rds for training
library(caret)
inTrain = createDataPartition(df$yourFactor, p = 2/3, list = FALSE)
dfTrain=df[inTrain,]
dfTest=df[-inTrain,] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T11:02:15.143

这可能会更长，但我认为它更直观，可以在基础 R 中完成；）

```
# create the data frame you've described
x <-
    data.frame(
        cl = 
            c( 
                rep( 'A' , 100 ) ,
                rep( 'B' , 100 ) ,
                rep( 'C' , 100 ) ,
                rep( 'D' , 100 ) 
            ) ,

        othernum1 = rnorm( 400 ) ,
        othernum2 = rnorm( 400 ) ,
        othernum3 = rnorm( 400 ) ,
        othernum4 = rnorm( 400 ) ,
        othernum5 = rnorm( 400 ) ,
        othernum6 = rnorm( 400 ) ,
        othernum7 = rnorm( 400 ) 
    )

# sample 67 training rows within classification groups
training.rows <-
    tapply( 
        # numeric vector containing the numbers
        # 1 to nrow( x )
        1:nrow( x ) , 

        # break the sample function out by
        # the classification variable
        x$cl , 

        # use the sample function within
        # each classification variable group
        sample , 

        # send the size = 67 parameter
        # through to the sample() function
        size = 67 
    )

# convert your list back to a numeric vector
tr <- unlist( training.rows )

# split your original data frame into two:

# all the records sampled as training rows
training.df <- x[ tr , ]

# all other records (NOT sampled as training rows)
testing.df <- x[ -tr , ] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T23:01:46.470

以下将添加一个`set`带有值的列`"train"`或`"test"`您的data.frame：

```
library(plyr)
df <- ddply(df, "cl", transform, set = sample(c("train", "test"), length(cl),
                                              replace = TRUE, prob = c(2, 1))) 
```

您可以使用基本`ave`功能获得类似的东西，但我发现`ddply`这种特殊用法非常干净（可读）。

然后，您可以使用以下`subset`函数拆分数据：

```
train.data <- subset(df, set == "train")
test.data  <- subset(df, set == "test") 
```

跟进：要将每个组精确地分成 2/3 和 1/3 大小，您可以使用：

```
df <- ddply(df, "cl", transform,
            set = sample(c(rep("train", round(2/3 * length(cl)),
                           rep("test",  round(1/3 * length(cl))))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-29T03:22:38.630

在构建我自己的函数以使用多个分层因素进行交叉验证的数据分区时遇到了这个问题。您可以通过将数据分成 3 个（或 N 个）大小相等的部分来构建此类数据集，同时将每个层内的观察值平均划分为这些部分，然后选择三分之一作为测试集，然后将其余部分组合为训练集。我会处理诸如R 中的*列表*元素。

这是我使用支持多个分层因素的基本包构建的一个函数，表示为您希望作为分层的字段的列号或列名（*mtcars*数据集示例）。我认为它在功能上与*ddply*非常相似，除了您还可以使用列号并且生成的子集在*列表*中给出：

```
# Function that partitions data into a number of equally (or almost-equally) sized bins that do not overlap, and returns the data bins as a list
# Useful for cross validation
partition_data <- function(
    # Data frame to partition (default example: mtcars data, assuming rows correspond to observations)
    dat = mtcars,
    # Number of equally sized bins to partition to (default here: 2 bins)
    bins = 2,
    # Stratification element, homogeneous subpopulations according to a column that should be subsampled,
    # Observations within a substrata are divided equally to the partitioned bins
    stratum = NA
){
    # Total number of observations
    nobs <- dim(dat)[1]
    # Allocation vector, to be used for randomly distributing the samples to the bins
    loc <- rep(1:bins, times=ceiling(nobs/bins))[1:nobs]

    # If the dataset is stratified, each subpopulation is distributed equally to the bins, otherwise the whole population is the "subpopulation"
    if(missing(stratum)){
        pops <- list(sample(1:dim(dat)[1]))
    }else{
        uniqs <- na.omit(as.matrix(unique(dat[,stratum])))
        pops <- list()
        for(i in 1:nrow(uniqs)){
            # If some of the stratified fields include NA-values, these will not be included in the sampling
            w <- apply(as.matrix(dat[,stratum]), MARGIN=1, FUN=function(x) all(x==uniqs[i,]))
            pops[[i]] <- sample(which(w))
        }
    }
    indices <- vector(length=nobs)
    # Assign the group indices according to permutated samples within each subpopulation
    indices[unlist(pops)] <- loc
    # Assign observations to separate locations in a list
    partitioned_data <- lapply(unique(indices), FUN=function(x) dat[x==indices,])
    # Return the result
    partitioned_data
} 
```

它是如何工作的示例；在这个假设的例子中，人们希望因素 'vs' 和 'am' 在所有 bin 中均等表示：

```
set.seed(1)

# Stratified sampling, so that combinations of binary covariates vs = {0,1} & am = {0,1} appear equally over the randomized bins of data
pt <- partition_data(mtcars, stratum=c("vs", "am"), bins=3)

# Instances are distributed equally
lapply(pt, FUN=function(x) table(x[,c("vs","am")]))
#> lapply(pt, FUN=function(x) table(x[,c("vs","am")]))
#[[1]]
#   am
#vs  0 1
#  0 4 2
#  1 3 2
#
#[[2]]
#   am
#vs  0 1
#  0 4 2
#  1 2 3
#
#[[3]]
#   am
#vs  0 1
#  0 4 2
#  1 2 2

# 10 or 11 samples (=rows) per partition of data (data had 11 columns)
lapply(pt, FUN=dim)

# Training set containing 2/3 of the stratified samples
# Constructed by dropping out the first third of samples

train <- do.call("rbind", pt[-1])

# Test set containing the remaining 1/3

test <- pt[[1]]

# 21 samples in training dataset
print(dim(train))
# 11 samples in testing dataset
print(dim(test))

> print(train)
                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4 Wag      21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710         22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive     21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Merc 450SE         16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Cadillac Fleetwood 10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Fiat 128           32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Toyota Corona      21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Dodge Challenger   15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
Camaro Z28         13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Ford Pantera L     15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Volvo 142E         21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
Hornet Sportabout  18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Duster 360         14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 230           22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 280           19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 450SLC        15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Honda Civic        30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Pontiac Firebird   19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Porsche 914-2      26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa       30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Ferrari Dino       19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
> print(test)
                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8

# Example of sampling without stratification; the binary covariates 'vs' and 'am' are probably not distributed equally over the bins
lapply(pt2 <- partition_data(mtcars, bins=3), FUN=function(x) table(x[,c("vs","am")]))

# Stratified according to a single covariate (cylinders)
lapply(pt3 <- partition_data(mtcars, stratum="cyl", bins=3), FUN=function(x) table(x[,c("cyl")])) 
```

在讨论过的这个特定数据集中，使用来自 Anthony 回答的 data.frame：

```
xpt <- partition_data(x, stratum="cl", bins=3)
# Same as:
#xpt <- partition_data(x, stratum=1, bins=3)

train_xpt <- do.call("rbind", xpt[-1])
test_xpt <- xpt[[1]]
#> summary(train_xpt[,"cl"])
# A  B  C  D 
#67 66 67 67 
#> summary(test_xpt[,"cl"])
# A  B  C  D 
#33 34 33 33 
```

# php - Zend Framework 2 中的数据库访问

> ID：13536542
> 
> 赞同：1
> 
> 时间：2012-11-23T22:45:12.947
> 
> 标签：php, orm, zend-framework2

我想找到一种从 ZF2 访问我的数据库的好方法。我不想从我的模型或控制器中执行此操作，也不想使用任何 ORM 工具，例如 Doctrine（除非有人很好地说服了我！）。

[教程应用程序](http://framework.zend.com/manual/2.0/en/user-guide/database-and-models.html#the-model-files)使用表数据网关模式；它创建一个`AlbumTable`访问`album`数据库中表的类。我担心这种方法，因为我将制作一个规范化的数据库，我需要在其中加入几个表来表示一些模型。据我了解，这不能在`TableGateway`课堂上完成。当然，你可以`$tblgateway->getSql()`从那里开始，但我认为这违背了表数据网关模式的目的。

于是，我把注意力转向了`Zend\Db\Sql\Sql`。在专辑示例的基础上，我得到了以下工作：

```
class AlbumMapper {
    private $sql;

    public function __construct(Sql $sql) {
        $this->sql = $sql;
    }

    public function getAlbum($id) {
        $id = (int) $id;

        $select = $this->sql->select();
        $select->from('album');
        $select->where(array('id' => $id));

        $statement = $this->sql->prepareStatementForSqlObject($select);
        $result = $statement->execute();
        $row = $result->current();

        $album = null;

        if ($row) {
            $album = new Album();

            $album->setTitle($row['title']);
            $album->setArtist($row['artist']);
            $album->setId($row['id']);
        }

        return $album;
    }
} 
```

这里的重点是我可以调用`$select->join()`和连接多个表，这将使我能够更好地控制查询我的数据库并消除我的模型和表之间的 1:1 关系。但是，如果我不需要加入，那么使用表数据网关肯定可以让我免于编写一堆代码。

所以，我想我的问题是，这两种方法的结合是否会根据情况而有所作为？例如，如果我只需要访问单个表（不与其他表连接），那么我可以使用表数据网关，如果我需要连接多个表，我可以使用其他方法。这是个好主意还是坏主意？有没有更好的选择？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:59:00.503

我将 Mapper 类与 Entity 对象一起使用。为了避免为简单的用例编写过多的重复代码，我使用 ZfcBase 的[AbstractDbMapper](https://github.com/ZF-Commons/ZfcBase/blob/master/src/ZfcBase/Mapper/AbstractDbMapper.php)来扩展我的特定映射器。

# java - 退出菜单创建

> ID：13536546
> 
> 赞同：1
> 
> 时间：2012-11-23T22:45:34.613
> 
> 标签：java, console-application

我正在用java编写一个简单的命令行程序。我想知道如何在用户确定要退出时提示他们。然后根据选择采取适当的行动。它将能够判断他们是否输入了“是”、“是”、“Y”、“y”或“否”、“否”、“N”、“n”或其他什么。到目前为止我有

```
System.out.println("Are you sure you want to quit? Yes/No");
String quitResponse;
quitResponse = input.next();
if("Yes".equals(quitResponse) || "Y" || "yes" || "y"){
System.exit(0); 
```

我知道|| 不正确，但我在 python 中已经习惯了。这只是给你一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:50:01.187

`if("Yes".equalsIgnoreCase(quitResponse) || "Y".equalsIgnoreCase(quitResponse))`

# sql - 如何旋转一个简单的连接数据集？

> ID：13536549
> 
> 赞同：0
> 
> 时间：2012-11-23T22:45:50.160
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有这个查询：

```
select MONTH(x.status_date) m
, YEAR(x.status_date) y
from [XREF_WET_MASTER] x
join F_ACCESSION_DAILY f
on x.accession_id=f.accession_id
pivot (count(*) for f.REQUISITION_TYPE in ([req1],[req2],[req3])
) as CountofThatTypeofReq 
```

我收到了这个错误：

> '*' 附近的语法不正确。

上`count(*)`线

这是预期的结果：

```
+---+------+------+------+------+
| m |  y   | req1 | req2 | req3 |
+---+------+------+------+------+
| 1 | 2010 |   34 |    3 |    6 |
| 2 | 2010 |   56 |    6 |    0 |
| 3 | 2010 |    5 |   33 |    4 |
+---+------+------+------+------+ 
```

我将非常感谢有关此支点的任何指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:52:50.350

而不是`count(*)`，您应该能够使用以下内容：

```
select *
from
(
  select MONTH(x.status_date) m
    , YEAR(x.status_date) y
    , f.REQUISITION_TYPE
    , f.accession_id
  from [XREF_WET_MASTER] x
  join F_ACCESSION_DAILY f
    on x.accession_id=f.accession_id
) src
pivot 
(
  count(REQUISITION_TYPE) 
  for REQUISITION_TYPE in ([req1],[req2],[req3])
) as CountofThatTypeofReq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:51:46.910

根据文档，而不是 count(*)，[您似乎需要指定一个特定的列](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)以进行透视，因此请尝试：

```
select MONTH(x.status_date) m
, YEAR(x.status_date) y
from [XREF_WET_MASTER] x
join F_ACCESSION_DAILY f
on x.accession_id=f.accession_id
pivot (count(f.accession_id) for f.REQUISITION_TYPE in ([req1],[req2],[req3])
) as CountofThatTypeofReq 
```

...或类似的东西。

# web-applications - 哪个是用于 Web 开发的更“通用”的 haskell 框架？

> ID：13536553
> 
> 赞同：3
> 
> 时间：2012-11-23T22:46:18.867
> 
> 标签：web-applications, haskell, web, web-deployment

我想从 Web 开发开始，我对 Haskell 有一些兴趣。

我已经看到有这么[多的框架](http://www.haskell.org/haskellwiki/Web/Frameworks)！我不确定哪个对我更好。

我不是在问哪个是更好的框架，或者哪个易于使用，或者哪个最适合新手（我对 Haskell 一无所知）。

我想知道哪个最适合各种应用程序，更“通用”。

# extjs - 如何在 Sencha touch 2 中使视口自动最大化？

> ID：13536556
> 
> 赞同：1
> 
> 时间：2012-11-23T22:46:41.043
> 
> 标签：extjs, sencha-touch-2

> **可能重复：**
> [如何在 WebKit 浏览器上全屏显示 Sencha Touch 2 页面？](https://stackoverflow.com/questions/10316314/how-to-fullscreen-a-sencha-touch-2-page-on-a-webkit-browser)

在 Sencha Touch 2 中，如何可靠地使视口占据整个画布？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T22:50:19.547

试试这个：

```
Ext.Viewport.init();
        Ext.create('Ext.Panel'({
            fullscreen:true}) 
```

添加到您的主应用程序文件中。如果您的主视图是面板，这将起作用。您还可以将其添加为您的应用程序的属性：

```
Ext.application({
    name: 'YourApp',
    stores: [
    ],
    controllers: [
    ],
    views: [

    ],
    viewport: {
        autoMaximize: true
    },
    launch: function(){

    }
}); 
```

# actionscript-3 - 将 Youtube 频道嵌入 Flash 网站

> ID：13536560
> 
> 赞同：0
> 
> 时间：2012-11-23T22:47:20.920
> 
> 标签：actionscript-3, flash, video, youtube, embed

如何将 Youtube 频道嵌入到 Flash 网站？是否可以使用 ActionScript3？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T04:58:20.590

使用 YouTube 提供的 API 嵌入 youtube 频道：

[https://developers.google.com/youtube/flash_api_reference](https://developers.google.com/youtube/flash_api_reference)

# git - Git 以用户身份安装？

> ID：13536570
> 
> 赞同：2
> 
> 时间：2012-11-23T22:48:54.327
> 
> 标签：git, compilation, makefile, bsd, netbsd

我正在尝试通过使用来自github的源代码tarball从源代码编译git 1.8.0，以用户身份在netbsd系统（4.0.1_PATCH）上安装git。我在这个系统上拥有用户权限，但没有 root 权限。我正在我的主目录中编译源代码。

我现在收到这组错误消息：

```
gmake                                                                                                                                                                    ~/src/git-git-fe1bdde
GIT_VERSION = 1.8.0
    * new build flags
    CC credential-store.o
    * new link flags
    CC abspath.o
    CC advice.o
    CC alias.o
    CC alloc.o
    CC archive.o
    CC archive-tar.o
In file included from run-command.h:5,
                 from archive-tar.c:8:
/usr/pkg/include/pthread.h:285: error: conflicting types for 'pthread_t'
/usr/include/pthread_types.h:71: error: previous declaration of 'pthread_t' was here
/usr/pkg/include/pthread.h:286: error: conflicting types for 'pthread_attr_t'
/usr/include/pthread_types.h:72: error: previous declaration of 'pthread_attr_t' was here
/usr/pkg/include/pthread.h:288: error: conflicting types for 'pthread_once_t'
/usr/include/pthread_types.h:77: error: previous declaration of 'pthread_once_t' was here
/usr/pkg/include/pthread.h:289: error: conflicting types for 'pthread_mutexattr_t'
/usr/include/pthread_types.h:74: error: previous declaration of 'pthread_mutexattr_t' was here
/usr/pkg/include/pthread.h:290: error: conflicting types for 'pthread_mutex_t'
/usr/include/pthread_types.h:73: error: previous declaration of 'pthread_mutex_t' was here
/usr/pkg/include/pthread.h:291: error: conflicting types for 'pthread_condattr_t'
/usr/include/pthread_types.h:76: error: previous declaration of 'pthread_condattr_t' was here
/usr/pkg/include/pthread.h:292: error: conflicting types for 'pthread_cond_t'
/usr/include/pthread_types.h:75: error: previous declaration of 'pthread_cond_t' was here
/usr/pkg/include/pthread.h:293: error: conflicting types for 'pthread_rwlockattr_t'
/usr/include/pthread_types.h:80: error: previous declaration of 'pthread_rwlockattr_t' was here
/usr/pkg/include/pthread.h:294: error: conflicting types for 'pthread_rwlock_t'
/usr/include/pthread_types.h:79: error: previous declaration of 'pthread_rwlock_t' was here
/usr/pkg/include/pthread.h:357: error: conflicting types for 'pthread_kill'
/usr/include/signal.h:69: error: previous declaration of 'pthread_kill' was here
gmake: *** [archive-tar.o] Error 1 
```

关于什么是错的以及如何纠正这个问题的任何想法？

关于在 netbsd 上以用户身份安装 git 的任何建议（我认为相当旧的 4.0.1 版）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T21:40:16.780

不要自己编译！

相反，使用 NetBSD® pkgsrc® 作为非根，这不仅是可能的而且得到很好[的支持：它甚至是一个常见问题解答](http://www.netbsd.org/docs/pkgsrc/faq.html#non-root-pkgsrc)

这将为您省去很多麻烦，因为它会自动安装依赖项*并*修补软件，以便它可以在 BSD 上运行。

# ruby-on-rails - 在 Coffeescript / Morris.JS 中使用 Ruby 哈希而不是 Rails ActiveRecord

> ID：13536572
> 
> 赞同：1
> 
> 时间：2012-11-23T22:49:14.540
> 
> 标签：ruby-on-rails, coffeescript, raphael, morris.js

我正在关注介绍[Morris.JS的](http://oesmith.github.com/morris.js/)[Railscast #223](http://railscasts.com/episodes/223-charts-graphs-revised)。

我生成了一个`@orders_yearly`在我的控制器中调用的数据集，在我看来，我有以下内容可以尝试渲染图形：

```
<%= content_tag :div, "", id: "orders_chart", data: {orders: @orders_yearly} %> 
```

调用`@orders_yearly.inspect`显示它只是一个简单的哈希：

```
{2009=>1000, 2010=>2000, 2011=>4000, 2012=>100000} 
```

我需要修改 coffeescript 的值才能工作`xkey`，`ykeys`但我不确定如何使它与我的数据集一起工作：

```
jQuery ->
  Morris.Line
    element: 'orders_chart'
    data: $('#orders_chart').data('orders')
    xkey: 'purchased_at' # <------------------ replace with what?
    ykeys: ['price'] # <---------------------- replace with what?
    labels: ['Price'] 
```

有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:00:48.280

按照[此处的 Morris.JS 示例，](http://www.oesmith.co.uk/morris.js/#examples)我想您必须稍微更改一下数据哈希。

```
{'purchased_at' => 2009, 'value' =>1000}
{'purchased_at' => 2010, 'value' =>2000}
... 
```

然后在咖啡中：

```
jQuery ->
  Morris.Line
    element: 'orders_chart'
    data: $('#orders_chart').data('orders')
    xkey: 'purchased_at'
    ykeys: ['value']
    labels: ['Price'] 
```

# google-maps - 如何将自定义 POI 添加到谷歌地图导航

> ID：13536573
> 
> 赞同：3
> 
> 时间：2012-11-23T22:49:19.847
> 
> 标签：google-maps

我是 Android 系统的快乐用户，并且经常使用 Google Maps Navigation (betta)。到目前为止，您可以在驾车时在地图上添加具有不同 POI（商店、银行、加油站等）的图层。我的问题是，是否有 API 可以在您开车或步行时添加您自己的图层（带有您自定义的 POI）以显示在[Google 地图导航](http://www.google.com/mobile/navigation/)（不仅仅是 google 地图）中。

提前致谢。

# c - 连续管道输入

> ID：13536577
> 
> 赞同：-1
> 
> 时间：2012-11-23T22:49:46.193
> 
> 标签：c, bash, shell

我正在寻找一种将输入从一个程序连续输入另一个程序的方法。是否可以使用 iNotify 或文件轮询，`stdin`或者我最好使用临时文件。

编辑

很抱歉没有指出它是指一个外壳管道而不是管道（2）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T22:55:34.430

管道已经连续运行。如果您运行`prog1 | prog2`，每次`prog1`将更多输出写入标准输出，`prog2`都会在标准输入上看到并能够读取它。在关闭管道的一侧（或退出，执行相同的操作）`prog2`之前，不会在管道上看到文件的结尾。`prog1`

# c# - html-element属性，自定义HtmlHelper.xxxxFor

> ID：13536581
> 
> 赞同：2
> 
> 时间：2012-11-23T22:50:09.860
> 
> 标签：c#, asp.net-mvc, attributes, html-helper

我创建了一个简单的方法来扩展 HtmlHelper .. 基本上它是 TextBoxFor 方法，但经过定制以更好地适应我的目的.. 无论如何.. 我认为 HtmlHelper 使用新 { @attributename = "attributevalue" } 的方式创建html元素属性的东西真的很整洁..所以我的问题是..我怎么能做同样的事情？

查看代码：

```
@Html.DaisyTextBoxFor(model => model.Text, new { @class="asd" }) 
```

助手代码：

```
 public static MvcHtmlString DaisyTextBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IDictionary<string,object> attributes = null)
    {
        var value = ((PropertyViewModelProperty)htmlHelper.ViewData.Model.GetType().GetProperty(ExpressionHelper.GetExpressionText(expression)).GetValue(htmlHelper.ViewData.Model, null)).Value;

        return MvcHtmlString.Create(String.Format("<input name=\"{0}\" value=\"{1}\" />", CreateForInputName(typeof(TModel), htmlHelper), value));
    }

    private static string CreateForInputName(Type model,HtmlHelper htmlHelper)
    {
        return HttpContext.Current.Server.HtmlEncode(model.AssemblyQualifiedName + "_" + htmlHelper.ViewData["propertyName"].ToString() + '_' + htmlHelper.ViewData["propertyGuid"].ToString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:17:48.573

我从来没有试过这个，但下面的东西不起作用吗？

```
public static MvcHtmlString DaisyTextBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IDictionary<string,object> attributes = null)
    {
        var value = ((PropertyViewModelProperty)htmlHelper.ViewData.Model.GetType().GetProperty(ExpressionHelper.GetExpressionText(expression)).GetValue(htmlHelper.ViewData.Model, null)).Value;

        return MvcHtmlString.Create(String.Format("<input name=\"{0}\" value=\"{1}\" class=\"{2}\" />", CreateForInputName(typeof(TModel), htmlHelper), value, attributes["class"]));
    } 
```

注意`class={2}`部分`MvcHtmlString.Create`。

# java - 我在哪里把我的文件ndk

> ID：13536583
> 
> 赞同：2
> 
> 时间：2012-11-23T22:50:33.430
> 
> 标签：java, android, c, android-ndk, java-native-interface

我正在努力解决这个问题。我不知道将文件放在哪里，以便在安装 apk 时可以看到它

```
char s1[10];
        FILE *infile, *fopen();
        infile = fopen("/data/data/com.example.hellojni/files/datain.txt","r");

        if (NULL == infile)
        {

            return (*env)->NewStringUTF(env, "***can't find the file");
        }
        fgets(s1,9,infile);
        return (*env)->NewStringUTF(env,s1 ); 
```

我不知道把datain.txt放在哪里。我把它放在 bin 文件夹中，但它不起作用。我一直说找不到文件。路径是正确的，因为我在屏幕上打印出来。

请帮助，

谢谢。 ![在此处输入图像描述](../Images/b2dd23c7ec34462b1d96255737d2f0ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:56:55.787

我所知道的最可靠的方法是：

首先，在您的 Java 代码中，将文件从资产存储到应用程序的某个目录，然后将文件的路径传递给本机函数。

# python - 在 Selenium 中找不到元素会阻止执行

> ID：13536589
> 
> 赞同：1
> 
> 时间：2012-11-23T22:51:20.793
> 
> 标签：python, unit-testing, selenium

在我的测试中，我尝试使用**find_element_by_xpath**验证某些文本是否存在（在操作之后） 。如果我使用正确的表达式并且我的测试通过，例程很快就会正确结束。但是，如果我尝试了错误的文本（意味着测试将失败），它会永远挂起，我必须终止脚本，否则它不会结束。

这是我的测试（无论用户做什么，系统中都不存在您输入的表达式*Thx 用户、客户端或密码不正确）：*

```
# -*- coding: utf-8 -*-                                                         
import gettext                                                                  
import unittest                                                                 

from selenium import webdriver                                                  

class TestWrongLogin(unittest.TestCase):                                        
    def setUp(self):                                                            
        self.driver = webdriver.Firefox()                                       
        self.driver.get("http://10.23.1.104:8888/")                             
        # let's check the language                                              
        try:                                                                    
            self.lang = self.driver.execute_script("return navigator.language;")
            self.lang = self.lang("-")[0]                                       
        except:                                                                 
            self.lang = "en"                                                    
        language = gettext.translation('app', '/app/locale', [self.lang],          
                                       fallback=True)                           
        language.install()                                                      
        self._ = gettext.gettext                                                

    def tearDown(self):                                                         
        self.driver.quit()                                                      

    def test_wrong_client(self):                                                
        # test wrong client                                                     
        inputElement = self.driver.find_element_by_name("login")                
        inputElement.send_keys("root")                                          
        inputElement = self.driver.find_element_by_name("client")               
        inputElement.send_keys("Unleash")                                        
        inputElement = self.driver.find_element_by_name("password")             
        inputElement.send_keys("qwerty")                          
        self.driver.find_element_by_name("form.submitted").click()              
        # wait for the db answer                                                
        self.driver.implicitly_wait(10)                                         
        ret = self.driver.find_element_by_xpath(                                
            "//*[contains(.,'{0}')]".\                                          
            format(self._(u"Thx user, client or password you entered is incorrect")))
        self.assertTrue(isinstance(ret, webdriver.remote.webelement.WebElement))

if __name__ == '__main__':                                                      
unittest.main() 
```

为什么会这样做，我该如何预防？

**编辑**：我能够找到问题：我在 Ubuntu 中运行我的 Firefox，并且我拥有的当前版本的 Firefox（17.0）不受 selenium 支持。通过集线器在 IE8 中运行相同的测试可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:41:39.643

问题出在您的 xpath 表达式中。不要直接将文本与所有可用文本进行比较。因此，当文本不匹配时，它会与 DOM 中的所有可用文本进行比较。

请通过显示错误消息的 Xpath 指定元素/标签，然后检查该元素的 text 属性。

```
inputs = driver.find_elements(By.XPATH, "//input") 
```

这段代码获取网页上的所有 Input 元素。

这将有助于加快您的测试。我希望这会有所帮助......一切顺利:-)

# javascript - 除了 click 之外，我还可以使用哪些其他事件处理程序？

> ID：13536590
> 
> 赞同：0
> 
> 时间：2012-11-23T22:51:34.643
> 
> 标签：javascript, jquery, class, event-handling, click

我有一个 jQuery 问题，我真的认为这是一个愚蠢的问题：我是 JS 和 jQuery 的初学者......

我在用着

```
$("#myLink").click(function(){
    $(".myClassToShow").show();
    $(".myClassToHide").hide();
}); 
```

隐藏类 myClassToHide 作为类属性的元素，并显示类 myClassToShow 作为类属性的元素。我认为这真的很容易理解:)

我不认为它会用好的类隐藏所有元素，但是，它确实有效。

我担心的是我的元素只显示和隐藏*几秒钟*：我的鼠标点击链接的时间。

**当我已经点击了我的链接时，我想让 myClassToShow 元素保留在屏幕上，并且 myClassToHide 元素真的隐藏了。**

例如，在[johann Hammarstrom 的网站上](http://johanhammarstrom.se/)，当您点击“打印”时，他所有未打印的作品都消失了，只剩下打印的。

这就是我想要的。我使用 Firebug 进行搜索，但找不到他使用的事件类型。我知道 onchange 不是正确答案，那又怎样？

请问你能帮帮我吗？

（顺便说一句，提前感谢您的时间）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:00:59.793

我想你失踪了`e.preventDefault();`，如果我理解正确的话。

```
$("#myLink").click(function(e) { // Add the event parameter.
    $(".myClassToShow").show(); // .show('fast'); for animation effect.
    $(".myClassToHide").hide(); // .hide('fast'); for animation effect.

    // Prevent the default action of the event to be triggered.
    e.preventDefault(); 

    // Or use
    return false;
}); 
```

您要查找的部分在此文件中：http: [//johanhammarstrom.se/wp-content/themes/garnish/js/jquery.custom.js](http://johanhammarstrom.se/wp-content/themes/garnish/js/jquery.custom.js?ver=1.0)
?ver=1.0 搜索`portfolioTerms.click`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T23:10:38.743

我制作了这个示例，它应该模仿您指出的网站行为：

HTML

```
<div class="show_controller" data-show="hidable" >All</div>
<div class="show_controller" data-show="class1" >class1</div>
<div class="show_controller" data-show="class2" >class2</div>
<div class="show_controller" data-show="class3" >class3</div>

<div class="hidable class1">class1</div>
<div class="hidable class2">class2</div>
<div class="hidable class3">class3</div>
<div class="hidable class1 class2">class1 and class2</div>
<div class="hidable class2 class3">class2 and class3</div> 
```

CSS：

```
.show_controller {
 display: inline;
 color: red;
 cursor: pointer;    
}​ 
```

JS

```
$('.show_controller').click(function() {
    var t = $(this);
    var for_show = '.' + t.data('show');
    $('.hidable:visible').not(for_show).hide(500);
    $(for_show).show(500);

});​ 
```

[样本](http://jsfiddle.net/oceog/YEeQC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:02:41.023

如果您使用的是您链接到的站点中的示例，则可以尝试这样的操作。

```
<a class="print-link">Print</a>
<a class="show-all">show me everything</a>

<img src="something.png" class="print-img samples"/>
<img src="something.png" class="print-img samples"/>
<img src="something.png" class="print-img samples"/>
<img src="something.png" class="print-img samples"/>
<img src="something.png" class="print-img samples"/>

$('.print-link').on('click', function(){
    $('.print-img').addClass('hidden');
});

$('.show-all').on('click', function(){ 
    $('.samples').removeClass('hidden');
})

.hidden { opacity: 0; visibility: hidden; -webkit-transition: 1s all; } 
//opacity 0 will keep the space in the dom otherwise use display: none; the transition will make it fade if CSS3 is supported too :) 
```

所以在这里你只是根据点击事件添加或删除一个类。希望有帮助。

# signalr - 如何使用 SignalR 的往返状态？

> ID：13536593
> 
> 赞同：2
> 
> 时间：2012-11-23T22:52:35.413
> 
> 标签：signalr, signalr-hub, signalr.client

根据 SignalR 集线器 (https://github.com/SignalR/SignalR/wiki/Hubs) 的文档，我们可以使用称为“往返状态”的东西。但我还没有弄清楚如何在 .NET 客户端使用此功能。

你能给我一个简单的例子来在服务器和 .NET 客户端之间使用该功能吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:58:01.620

[在此页面https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)上搜索状态。我们的文档有点烂，但内容在那里:)。

# java - 编写响应正文后在 HttpServletResponse 上设置标头

> ID：13536596
> 
> 赞同：6
> 
> 时间：2012-11-23T22:53:17.763
> 
> 标签：java, servlets, http-headers

我想出了一个艰难的方法，即在开始将响应主体写入输出缓冲区之后，不可能添加更多的标头`HttpServletResponse`，我想在一些随机的宇宙中可能是有意义的，即使一切仍然只是缓冲在内存中.

现在的问题是：有什么技巧可以以某种方式规避这个问题吗？显然，由于该功能`resetBuffer()`可用，它允许在不清除标题的情况下清除内容主体，因此必须有某种方法使`HttpServletResponse`对象返回到可以写入更多标题的状态。例如，是否有一种方法可以读取内容正文，使用 清除它`resetBuffer()`，设置更多标题，然后恢复内容正文？

***旁白**：我想这样做的原因是我可以添加一个标头作为我的 servlet 中最好的最后一步，它告诉我服务器忙于处理请求的时间。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T23:25:14.947

您唯一的选择是自己缓冲响应体；正文完成后，然后添加标题，然后编写正文。

有趣的是，HTTP/1.1 有一种方法可以在响应正文之后发送一个标头，通过在分块编码中使用预告片，但是没有人实现它，所以不要打扰。

# codeigniter - 复选框值未显示在数据库中 - Codeigniter

> ID：13536598
> 
> 赞同：1
> 
> 时间：2012-11-23T22:53:18.233
> 
> 标签：codeigniter, codeigniter-2

我正在尝试将复选框值提交到数据库。表单按应有的方式提交到数据库，但所有复选框字段都没有。简而言之，如果复选框是`checked`，我希望数据库上的相应列更新为`1`。如果复选框不在`checked`表单提交上，则该列的值应为`0`.

我究竟做错了什么？请注意，我知道查询很长。一旦工作，我可能会将其分解为 2 个表。**仅供参考** `$this -> input -> post('email');`，`$this -> input -> post('email');`是从未发布的 Ajax 调用收到的值。

我的模型：

```
// Add or update campaign on database
public function add_campaign() 
{        
    // grab campaign session data
    $userid = $this -> session -> userdata('user_id');
    $campaign = $this -> session -> userdata('campaign_name');
    $website = $this -> session -> userdata('campaign_user_website');
    $headline = $this -> session -> userdata('campaign_headline');
    $bar_color = $this -> session -> userdata('campaign_bar_color');
    $head_color = $this -> session -> userdata('campaign_head_color');
    $main_color = $this -> session -> userdata('campaign_main_color');
    $thanks_msg = $this -> session -> userdata('campaign_thanks');        

    //grab scorecard options
    $email_q = $this -> input -> post('email');
    $brand_q = $this -> input -> post('brand');
    $design_q = $this -> input -> post('design');
    $usability_q = $this -> input -> post('usability');
    $support_q = $this -> input -> post('support');
    $service_q = $this -> input -> post('service');
    $recommend_q = $this -> input -> post('recommend');
    $suggestion_q = $this -> input -> post('suggestion');
    $comments_q = $this -> input -> post('comments');

    $modified =  date('Y-m-d H:i:s');        

    // insert OR if campaign already exists, update the campaign values and date modified
    $this -> db -> query("
        INSERT INTO campaigns (userid, campaign, website, headline, bar_color, head_color, main_color, thanks_msg, email_q, brand_q, modified)
        VALUES ('$userid', '$campaign', '$website', '$headline', '$bar_color', '$head_color', '$main_color', '$thanks_msg', '$email_q', '$brand_q', '$modified')
        ON DUPLICATE KEY UPDATE userid='$userid', campaign='$campaign', website='$website', headline='$headline', bar_color='$bar_color', head_color='$head_color', main_color='$main_color', thanks_msg='$thanks_msg', email_q='$email_q', brand_q='$brand_q', modified='$modified'
        ");      
} 
```

以及我的部分观点：

```
<!-- Scorecard options -->
<div class="scordOption roundtop">
    <div class="checkicon"><input type="checkbox" name="email" class="email_score" value="1"></div>
    <div class="scoreOptionTxt">What is your email address?</div>
</div>

<div class="scordOption">
    <div class="checkicon"><input type="checkbox" name="brand" class="brand_score" value="1"></div>
    <div class="scoreOptionTxt">How would you rate our company's branding?</div>
</div> 
```

指向可以正常工作的控制器功能的 Ajax 函数。无需显示代码。在该函数中，它指向上面的模型。

```
var score_options = {
        email: $('input.email_score').val(),
        brand: $('input.brand_score').val(),
        ajax : '1' // needed for controller, to verify that request is ajax
    };

    //display ajax loader animation
    $('#loading').show();

    $.ajax({
        url : 'ajax/embed_step',
        type : 'POST',
        data : score_options,
        success : function(msg) {
            $('.wizardContent').html(msg);
            // output success in this container             
            $.scrollTo(0, 500);
            // scroll to top on success 
            $('#loading').hide();
            // hide loading icon
        }
    });

    return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:55:24.507

> 无论复选框是否被选中，所有复选框字段都在数据库上注册为 1 值

这是您的主要问题：

```
email: $('input.email_score').val(), 
```

`value`无论输入是否被检查，这都会抓住，你会想要使用这样的东西（至少现在，可能有更有效的方法，比如使用[`serialize()`](http://api.jquery.com/serialize/)提交表单，但你应该先了解问题） ：

```
email: $('input.email_score:checked').val() ? 1 : 0, 
```

如果你不熟悉这种语法，它通常被称为“条件运算符”，基本上和这样做是一样的：

```
if ($('input.email_score:checked').val()) {
   email = 1;
} else {
   email = 0;
} 
```

`$('input.email_score:checked').val()``undefined`如果未检查输入，将返回。`name`附带说明一下，通过属性而不是类来获取输入可能更有意义。还有许多其他方法可以做到这一点，例如`$('input.email_score:checked').length`（检查了多少？），但您可以随心所欲地做到这一点。

此外，在 PHP 方面，继续转换为整数或使用`intval()`，以便您知道这些值是安全的：

```
$email_q = (int) $this->input->post('email'); 
```

或者，再次使用条件运算符（可能更好，因为您只需要 1 或 0）：

```
$email_q = $this->input->post('email') ? 1 : 0; 
```

复选框有点棘手，因为未选中的复选框通常根本不发布，而不是发布您可能期望的空值。

# asp.net - .net 可以知道客户端是否支持 HTTP 上的 SNI？

> ID：13536601
> 
> 赞同：3
> 
> 时间：2012-11-23T22:53:35.530
> 
> 标签：asp.net, vb.net, ssl, azure, sni

节日，

我们希望使用 SNI 在基于云的单一 IP 解决方案上托管 SSL 网站。.net 能否在 TLS 握手之前和通过 HTTP 确定客户端是否支持 SNI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-19T08:53:51.277

If you look at wikipedia it lists the following as SNI compatible.

*   Internet Explorer 7 or later, on Windows Vista or higher. Not in any Internet Explorer version on Windows XP because SNI depends upon the SChannel system component shipped with Windows Vista.
*   Mozilla Firefox 2.0 or later
*   Opera 8.0 (2005) or later (the TLS 1.1 protocol must be enabled)
*   Opera Mobile at least version 10.1 beta on Android
*   Google Chrome (Vista or higher. XP on Chrome 6 or newer.
*   OS X 10.5.7 or higher on Chrome 5.0.342.1 or newer)
*   Safari 3.0 or later (Mac OS X 10.5.6 or higher and Windows Vista or higher)
*   Konqueror/KDE 4.7 or later
*   MobileSafari in Apple iOS 4.0 or later
*   Android default browser on Honeycomb (v3.x) or newer
*   BlackBerry 10 and BlackBerry Tablet OS default browser
*   Windows Phone 7 or later
*   MicroB on Maemo
*   Odyssey on MorphOS

So if you start the connection in `HTTP` then you can check the `useragent` and detect if the client supports `SNI` and if they do redirect them to `HTTPS` if not keep them on `HTTP`.

In our case the only web browser that we care about that ain't SNI compatible is IE on XP...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:38:05.463

*目前尚不清楚“在 TLS 握手之前*”是什么意思。

服务器名称扩展位于客户端问候消息中，这是客户端发送的第一条 TLS 消息以启动握手。由于 HTTPS 也总是首先建立 TLS 连接，因此之前根本没有发生任何事情。在握手之前知道客户端是否支持 SNI 是不可能的。

您也许可以在客户端解决一些问题，使用[JavaScript 来尝试检测 SNI 支持](https://stackoverflow.com/a/11702210/372643)。

话虽如此，它不太可能解决您的一般问题：如果您在不支持 SNI 时拥有备用/通配符证书，那么拥有其他特定证书几乎没有意义（除了[不推荐使用](https://www.rfc-editor.org/rfc/rfc6125#section-7.2)通配符证书的事实）；如果您期望 SNI，您将阻止不支持它的客户端。

# javascript - 用于在单击时将新内容放入 div 的 Javascript - 自动向下滚动到新内容不起作用

> ID：13536603
> 
> 赞同：1
> 
> 时间：2012-11-23T22:53:43.813
> 
> 标签：javascript, jquery, html, autoscroll

这是我正在使用的代码。我希望用户能够单击花朵，并让它们自动向下滚动到弹出较大花朵的 div。有时它会这样做，有时它会在一瞬间下降并重新上升。怎么了？这是正在运行的站点，但您必须稍等片刻才能加载图像：

[http://www.momentaryvitality.ca/prairie2.shtml](http://www.momentaryvitality.ca/prairie2.shtml)

```
function updateContainer(url) {
    dynamicCon = '#dynamicContainer';
    ObjTag = $(dynamicCon);
    ObjTag.load(url);
}
$(document).ready(function () {
    $('a[rel="dynamicLoad"]').bind("click", function (event) {
        url = $(this).attr('href');
        updateContainer(url);
        event.preventDefault();
        event.stopPropagation();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:04:57.663

如果你打开 javascript 控制台，你会看到：

```
Uncaught ReferenceError: height is not defined 
```

这指向这行代码：

```
 ({
        scrollTop: height
    }, 3000); 
```

它什么都不做，它使用一个未定义的变量什么也不做。可悲的是，您的意图有些不清楚，但我将从解决这两个问题开始。

# scala - 针对 Scala Map 类型的模式匹配

> ID：13536619
> 
> 赞同：22
> 
> 时间：2012-11-23T22:56:06.120
> 
> 标签：scala, map, pattern-matching

想象一下，我`Map[String, String]`在 Scala 中有一个。

我想匹配地图中的全套键值对。

这样的事情应该是可能的

```
val record = Map("amenity" -> "restaurant", "cuisine" -> "chinese", "name" -> "Golden Palace")
record match {
    case Map("amenity" -> "restaurant", "cuisine" -> "chinese") => "a Chinese restaurant"
    case Map("amenity" -> "restaurant", "cuisine" -> "italian") => "an Italian restaurant"
    case Map("amenity" -> "restaurant") => "some other restaurant"
    case _ => "something else entirely"
} 
```

编译器抱怨thulsy：

`error: value Map is not a case class constructor, nor does it have an unapply/unapplySeq method`

目前对 a 中的键值组合进行模式匹配的最佳方法是`Map`什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T11:01:02.090

您可以使用`flatMap`提取您感兴趣的值，然后匹配它们：

```
List("amenity","cuisine") flatMap ( record get _ ) match {
  case "restaurant"::"chinese"::_ => "a Chinese restaurant"
  case "restaurant"::"italian"::_ => "an Italian restaurant"
  case "restaurant"::_            => "some other restaurant"
  case _                          => "something else entirely"
} 
```

[请参阅此片段页面](http://nicholassterling.wordpress.com/2012/01/28/scala-snippets/)上的 #1 。

您可以检查任意*键*列表是否具有特定*值*，如下所示：

```
if ( ( keys flatMap ( record get _ ) ) == values ) ... 
```

请注意，即使地图中可能不存在键，上述方法仍然有效，但如果键共享某些值，您可能想要使用`map`而不是在值列表中使用/`flatMap`明确表示。例如，在这种情况下，如果“amenity”可能不存在，而“cuisine”的值可能是“restaurant”（这个例子很愚蠢，但在另一个上下文中可能不是），那么将是模棱两可的。`Some``None``case "restaurant"::_`

此外，值得注意的是，它的`case "restaurant"::"chinese"::_`效率略高于`case List("restaurant","chinese")`后者，因为后者不必要地检查这两个之后是否没有更多元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T23:06:06.213

您可以只查找有问题的值，将它们放在一个元组中，然后对其进行模式匹配：

```
val record = Map("amenity" -> "restaurant", "cuisine" -> "chinese", "name" -> "Golden Palace")
(record.get("amenity"), record.get("cuisine")) match {
    case (Some("restaurant"), Some("chinese")) => "a Chinese restaurant"
    case (Some("restaurant"), Some("italian")) => "an Italian restaurant"
    case (Some("restaurant"), _) => "some other restaurant"
    case _ => "something else entirely"
} 
```

或者，您可以进行一些嵌套匹配，这可能会更简洁：

```
val record = Map("amenity" -> "restaurant", "cuisine" -> "chinese", "name" -> "Golden Palace")
record.get("amenity") match {
  case Some("restaurant") => record.get("cuisine") match {
    case Some("chinese") => "a Chinese restaurant"
    case Some("italian") => "an Italian restaurant"
    case _ => "some other restaurant"
  }
  case _ => "something else entirely"
} 
```

请注意，它`map.get(key)`返回一个（在这种情况下 ValueType 将是 String），因此如果映射中不存在该键`Option[ValueType]`，它将返回而不是抛出异常。`None`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-24T02:56:48.833

模式匹配不是你想要的。您想查找 A 是否完全包含 B

```
val record = Map("amenity" -> "restaurant", "cuisine" -> "chinese", "name" -> "Golden Palace")
val expect = Map("amenity" -> "restaurant", "cuisine" -> "chinese")
expect.keys.forall( key => expect( key ) == record( key ) ) 
```

编辑：添加匹配条件

这样您就可以轻松添加匹配条件

```
val record = Map("amenity" -> "restaurant", "cuisine" -> "chinese", "name" -> "Golden Palace")

case class FoodMatcher( kv: Map[String,String], output: String )

val matchers = List( 
    FoodMatcher(  Map("amenity" -> "restaurant", "cuisine" -> "chinese"), "chinese restaurant, che che" ),
    FoodMatcher(  Map("amenity" -> "restaurant", "cuisine" -> "italian"), "italian restaurant, mama mia" )
)

for {
    matcher <- matchers if matcher.kv.keys.forall( key => matcher.kv( key ) == record( key ) )
} yield matcher.output 
```

给出：

`List(chinese restaurant, che che)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-10T16:54:52.823

我发现以下使用提取器的解决方案与案例类最相似。不过，它主要是句法肉汁。

```
object Ex {
   def unapply(m: Map[String, Int]) : Option[(Int,Int) = for {
       a <- m.get("A")
       b <- m.get("B")
   } yield (a, b)
}

val ms = List(Map("A" -> 1, "B" -> 2),
    Map("C" -> 1),
    Map("C" -> 1, "A" -> 2, "B" -> 3),
    Map("C" -> 1, "A" -> 1, "B" -> 2)
    )  

ms.map {
    case Ex(1, 2) => println("match")
    case _        => println("nomatch")
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-11T22:39:38.900

因为，尽管同意所有其他答案都非常明智，但我很想看看实际上是否有一种使用地图进行模式匹配的方法，我将以下内容放在一起。它使用与最佳答案相同的逻辑来确定匹配。

```
class MapSubsetMatcher[Key, Value](matcher: Map[Key, Value]) {
  def unapply(arg: Map[Key, Value]): Option[Map[Key, Value]] = {
    if (matcher.keys.forall(
      key => arg.contains(key) && matcher(key) == arg(key)
    ))
      Some(arg)
    else
      None
  }
}

val chineseRestaurant = new MapSubsetMatcher(Map("amenity" -> "restaurant", "cuisine" -> "chinese"))
val italianRestaurant = new MapSubsetMatcher(Map("amenity" -> "restaurant", "cuisine" -> "italian"))
val greatPizza = new MapSubsetMatcher(Map("pizza_rating" -> "excellent"))

val record = Map("amenity" -> "restaurant", "cuisine" -> "chinese", "name" -> "Golden Palace")
val frankies = Map("amenity" -> "restaurant", "cuisine" -> "italian", "name" -> "Frankie's", "pizza_rating" -> "excellent")

def matcher(x: Any): String = x match {
  case greatPizza(_) => "It's really good, you should go there."
  case chineseRestaurant(matchedMap) => "a Chinese restaurant called " +
    matchedMap.getOrElse("name", "INSERT NAME HERE")
  case italianRestaurant(_) => "an Italian restaurant"
  case _ => "something else entirely"
}

matcher(record)
// a Chinese restaurant called Golden Palace
matcher(frankies)
// It's really good, you should go there. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-08T13:20:55.043

另一个要求您指定要提取的键并允许您匹配值的版本如下：

```
class MapIncluding[K](ks: K*) {
  def unapplySeq[V](m: Map[K, V]): Option[Seq[V]] = if (ks.forall(m.contains)) Some(ks.map(m)) else None
}

val MapIncludingABC = new MapIncluding("a", "b", "c")
val MapIncludingAAndB = new MapIncluding("a", "b")

Map("a" -> 1, "b" -> 2) match {
  case MapIncludingABC(a, b, c) => println("Should not happen")
  case MapIncludingAAndB(1, b) => println(s"Value of b inside map is $b")
} 
```

# language-agnostic - 生成 8 个邻域坐标的最简洁方法

> ID：13536624
> 
> 赞同：0
> 
> 时间：2012-11-23T22:56:58.893
> 
> 标签：language-agnostic, pixel, pixels, flip-flop

我正在寻找一种方法来生成以下数字序列（这是一个像素的 8 个邻居的相对坐标，从西北像素开始，以西结束）。第一个数字是 y 坐标，第二个数字是 x 坐标：

```
 y,  x
 _____

 1, -1   // N-W
 1,  0   // N
 1,  1   // N-E
 0,  1   // E
-1,  1   // S-E
-1,  0   // S
-1, -1   // S-W
 0, -1   // W 
```

我可以想出几种丑陋的方法来实现这一点，例如将坐标放入数组中，但我想知道是否有一种我没有想到的干净有效的方法。

**编辑**：由于我试图实现的算法的设计方式，像素*必须*按特定顺序（NW 到 W）迭代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:38:15.907

仅考虑以下生成 Y 坐标的方法。

从 NW 开始，我们要实现 {1, 1, 1, 0, -1, -1, -1, 0}。这是循环给出的重复模式：

```
for( int i = 0; i < 8; i++ )
{
    // You can combine into one ternary if you are adventurous
    int y = (i % 4 == 3) ? 0 : 1;
    y *= (i > 3) ? -1 : 1;
} 
```

因此，这将为 y 值生成所需的序列。

**现在考虑从 NE 开始**的 x 值序列：{1, 1, 1, 0, -1, -1, -1, 0 }。你可以看到它是相同的序列。

**因此，我们可以从 NW 开始**生成所需的序列，使用前一个循环的 2 偏移量并修改最后一个三元组以适应序列末尾的换行：

```
for (int i = 2; i < 10; i++ )
{
    int x = (i % 4 == 3) ? 0 : 1;
    x *= (i % 8 > 3) ? 1 : -1;   
} 
```

现在将两者组合成一个循环是微不足道的：

```
for (int i = 0; i < 8; i++)
{
    int y = (i % 4 == 3) ? 0 : 1;
    y *= (i > 3) ? -1 : 1;

    int x = ( (i+2) % 4 == 3) ? 0 : 1;
    x *= ( (i+2) % 8 > 3) ? 1 : -1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T05:04:49.130

另一种可读的替代方法是显式枚举边，如下所示：

```
int x = -1;
int y = 1;
for (int side = 0; side < 4; side++)
{
    for (int steps = 0; steps < 2; steps++)
    {
        // use coordinates here
        printf("%d, %d\n", y, x);

        if (side == 0) { x++; }
        else if (side == 1) { y--; }
        else if (side == 2) { x--; }
        else /* if side == 3) */ { y++; }
    }
}

/*
result:
1, -1
1, 0
1, 1
0, 1
-1, 1
-1, 0
-1, -1
0, -1
*/ 
```

这具有额外的好处，即可以通过更改起始角和沿边的步数来遍历任何大小的邻域。

@louism：“我可以想出几种丑陋的方法来实现这一点，例如将坐标放入数组中”-实际上，我认为这是最好的方法。它清晰易读（与上面@ose 描述的模数算术方法不同），并且可能是最快的。

@louism：您能否对三种不同的方法（数组查找、枚举边、模运算）进行基准测试并发布结果？我会对此很感兴趣，因为它是我现在正在编写的代码中使用的东西。

# python - 数组上 Lambda 表达式的模棱两可评估

> ID：13536626
> 
> 赞同：0
> 
> 时间：2012-11-23T22:57:11.750
> 
> 标签：python, numpy, lambda

`lambda`如果 x 等于零，我想使用将 x 加一的 a。我尝试了以下表达式：

```
t = map(lambda x: x+1 if x==0 else x, numpy.array())
t = map(lambda x: x==0 and x+1 or x, numpy.array())
t = numpy.apply_along_axis(lambda x: x+1 if x==0 else x, 0, numpy.array()) 
```

这些表达式中的每一个都返回以下错误：

```
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

我对`map()`and的理解`numpy.apply_along_axis()`是它需要一些函数并将其应用于数组的每个值。从错误看来，lambda 被评估为`x=array`，而不是数组中的某个值。我究竟做错了什么？

我知道我可以编写一个函数来完成此任务，但我想更加熟悉 python 的函数式编程方面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T23:03:38.107

如果您使用的是 numpy，则应该编写矢量化代码：

```
arr + (arr == 0) 
```

# ios - 在 Xcode 4.5 中“显示实时问题”不再有效

> ID：13536630
> 
> 赞同：2
> 
> 时间：2012-11-23T22:57:46.550
> 
> 标签：ios, xcode, llvm, xcode4.5

我发现 Xcode 在我编写代码时会显示编译器警告非常有用。例如：如果我写“ldksjfksdj”，我希望立即看到一个红色感叹号图标和警告，`use of undeclared identifier`. 但现在使用 Xcode 4.5，我只在编译项目后看到该警告。然后，在我编译之后，看到错误，并删除“ldksjfksdj”，警告不会像以前那样立即消失。它只会在我再次编译后消失。这非常烦人并且没有帮助。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:54:18.063

在“构建”选项卡中的“文件”>“项目设置”下，有一个“显示源代码的实时问题”选项。还有“仅显示活动方案的问题”和“显示所有问题”选项。“显示源代码的实时问题”应设置为启用。这些是项目级别的实时问题设置。

希望能解决您的问题。

# bash - 如何使用expect从bash函数定义密码

> ID：13536636
> 
> 赞同：1
> 
> 时间：2012-11-23T22:58:53.540
> 
> 标签：bash, expect

我希望能够接受一些命令`wget http://host/password.txt`并将其读入期望的变量中，以便我可以在 SSH 脚本中使用它。

这是它应该做什么的一些不正确的代码：

```
set password "wget -O tmp http://host/password.txt && cat tmp";
spawn ssh 111.222.333.444;
send "$password\r"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:08:39.340

这是一个如何在 bash 中使用 expect 的示例：

```
wget -O tmp http://host/password.txt
password=$(<tmp)
login="root"
IP="localhost:8000"

expect_sh=$(expect -c "
spawn ssh $login@$IP
expect \"password:\"
send \"$password\r\"
expect \"#\"
send \"cd /var\r\"
")

echo "$expect_sh" 
```

但是，除非您有特定的理由这样做，否则[使用 ssh 密钥](http://paulkeck.com/ssh/)是首选方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T23:06:07.337

您可以像这样将密码保存到变量中：

> wget -O tmp`http://host/password.txt`
> 密码=$(cat tmp);

但是您不能在 ssh password 上使用它，因为 ssh 密码是由终端输入作为交互操作读取的。

# php - PHP正则表达式提取URL中文件名的第一部分

> ID：13536642
> 
> 赞同：3
> 
> 时间：2012-11-23T23:00:35.230
> 
> 标签：php, regex, extract, filenames

> **可能重复：**
> [如何在 PHP 中将 ereg 表达式转换为 preg？](https://stackoverflow.com/questions/6270004/how-can-i-convert-ereg-expressions-to-preg-in-php)

我正在编写一个 PHP 脚本。

我有一个形式的 URL：

[http://ecx.images-amazon.com/images/I/5104Xl51zFL._SL175_.jpg](http://ecx.images-amazon.com/images/I/5104Xl51zFL._SL175_.jpg)

我只是想抓住文件名的第一部分`5104Xl51zFL`。

我对正则表达式很陌生，但到目前为止我有：

```
.*images\/I\/(.+?)(\.[^.]*|$) 
```

根据 regextester.com 应该可以工作，但在我的 PHP 中没有。

如果它不是最佳解决方案，则不必是正则表达式。

如果它是相关的，这是我的 PHP（仍然是调试的）：

```
function linkExtractor($html)
{
    if(preg_match_all('/<img ([^>]* )?src=[\"\']([^\"\']*\._SL175_\.jpe?g)[\"\']/Ui', $html, $matches, PREG_SET_ORDER)){
        foreach ($matches as $match) {
            $url = $match[2];
            echo "\n\n" .$url . "\nfile name: ";
            if(preg_match_all('.*images\/I\/(.+?)(\.[^.]*|$)', $url, $matched, PREG_SET_ORDER)) {
                foreach($matched as $name) {
                    print_r($matched);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T23:04:17.007

```
$url = 'http://ecx.images-amazon.com/images/I/5104Xl51zFL._SL175_.jpg';
$path = parse_url($url, PHP_URL_PATH);
$filename = basename($path);
$partOne = strtok($filename, '.'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:08:26.690

这将匹配 和 之间`/images/I/`的所有内容`.`

```
$url = 'http://ecx.images-amazon.com/images/I/5104Xl51zFL._SL175_.jpg';
if(preg_match('~/images/I/(.+?)\.~',$url,$match)) {
    $name = $match[1];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:09:45.860

一种使用方式`regex`：

```
$str='http://ecx.images-amazon.com/images/I/5104Xl51zFL._SL175_.jpg';
preg_match('/.*\/(.*?)\./',$str,$match);
print $match[1];

>>> 5104Xl51zFL 
```

解释：

```
.*    # Match anything
\/    # Up to the last forwardslash (escaped)
(.*?) # Match anything after (captured, lazy)
\.    # Up to the first . (escaped) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T23:09:50.887

如果您仍在寻找一个正则表达式来提取文件名的那部分，这里是一个：

```
([^/.]++)[^/]+$ 
```

此表达式将匹配完整的文件名。捕获组 1 将包含文件名中第一个点之前的每个字符。

++ 使这个正则表达式比只有一个 + 更快。这是因为当一段文本匹配失败时，正则表达式会更快地失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T23:07:30.717

```
$file = basename("http://ecx.images-amazon.com/images/I/5104Xl51zFL._SL175_.jpg");
echo substr($file, 0, strpos($file, ".")); 
```

`strpos`比对简单的事情使用正则表达式要快得多

# ruby - 使用 Ruby for Mac OS X 10.7.5 Leopard、Xcode 4.5.2 完成 ruby 1.9.3 的安装 -- rvm pkg install openssl 的问题

> ID：13536644
> 
> 赞同：3
> 
> 时间：2012-11-23T23:00:51.220
> 
> 标签：ruby, xcode, rvm, homebrew

首先，非常感谢您的帮助。我是一个编程新手，我正在尝试开始学习这个 Ruby on Rails 教程 (http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2)

我已经尝试解决这个问题大约 7 个小时了，因为我没有任何头发可以拔出，所以我正在转向这些神圣的页面。我一次又一次地在这里寻找解决方案。

系统：Mac OS X 10.7.5 Leopard，Xcode 4.5.2

我安装了 homebrew 并多次更新我使用 homebrew 安装 rvm 并多次更新它我安装了 git

系统上的标准 ruby​​（使用 $ ruby​​ -v 检查）是 1.8.7

我的问题是每次我尝试使用 rvm 安装新版本的 Ruby ($ rvm install 1.9.3) 时都会出现以下错误：

```
Ruby (and needed base gems) for your selection will be installed shortly.
Before it happens, please read and execute the instructions below.
Please use a separate terminal to execute any additional commands.

  Notes for Mac OS X 10.7.5, Xcode 4.5.2.

For JRuby:  Install the JDK. See http://developer.apple.com/java/download/  # Current Java version "1.6.0_26"
For IronRuby: Install Mono >= 2.6
For Ruby 1.9.3: Install libksba # If using Homebrew, 'brew install libksba'
For Opal: Install Nodejs with NPM. See http://nodejs.org/download/

To use an RVM installed Ruby as default, instead of the system ruby:

    rvm install 1.8.7 # installs patch 357: closest supported version
    rvm system ; rvm gemset export system.gems ; rvm 1.8.7 ; rvm gemset import system.gems # migrate your gems
    rvm alias create default 1.8.7

And reopen your terminal windows.

Xcode and gcc:

: 
```

我已经执行了 $ brew install libksba ，当我再次尝试执行此操作时，它告诉我 libksba 已经安装。

当我输入“$ rvm requirements”时，我得到：

```
 Notes for Mac OS X 10.7.5, Xcode 4.5.2.

For JRuby:  Install the JDK. See http://developer.apple.com/java/download/  # Current Java version "1.6.0_26"
For IronRuby: Install Mono >= 2.6
For Ruby 1.9.3: Install libksba # If using Homebrew, 'brew install libksba'
For Opal: Install Nodejs with NPM. See http://nodejs.org/download/

To use an RVM installed Ruby as default, instead of the system ruby:

    rvm install 1.8.7 # installs patch 357: closest supported version
    rvm system ; rvm gemset export system.gems ; rvm 1.8.7 ; rvm gemset import system.gems # migrate your gems
    rvm alias create default 1.8.7

And reopen your terminal windows.

Xcode and gcc:

Right now Ruby requires gcc to compile, but Xcode 4.2 and later no longer ship with gcc. Instead they ship with llvm-gcc (to which gcc is a symlink) and clang, neither of which are supported for building Ruby. Xcode 4.1 was the last version to ship gcc, which was /usr/bin/gcc-4.2.

Xcode 4.1 and earlier:
- Ruby will build fine.

Xcode 4.2 and later (including Command Line Tools for Xcode):
- If you have gcc-4.2 (and friends) from an earlier Xcode version, Ruby will build fine.
- If you don't have gcc-4.2, you have two options to get it:
 * Install apple-gcc42 from Homebrew
 * Install osx-gcc-installer

  Homebrew:

  If you are using Homebrew, you can install the apple-gcc42 and required libraries from homebrew/dupes:

      brew update
      brew tap homebrew/dupes
      brew install autoconf automake apple-gcc42
      rvm pkg install openssl

  Xcode 4.2+ install or/and Command Line Tools for Xcode is required to provide make and other tools.

  osx-gcc-installer:

  If you don't use Homebrew, you can download and install osx-gcc-installer: https://github.com/kennethreitz/osx-gcc-installer.

  Warning: Installing osx-gcc-installer on top of a recent Xcode is known to cause problems, so you must uninstall Xcode before installing osx-gcc-installer. Afterwards you may install Xcode 4.2+ or Command Line Tools for Xcode if you desire.

  ** NOTE: Currently, Node.js is having issues building with osx-gcc-installer. The only fix is to install Xcode over osx-gcc-installer. 
```

所以我假设我必须做一些事情 brew update brew tap homebrew/dupes brew install autoconf automake apple-gcc42 rvm pkg install openssl

一切似乎都正常，直到“$ rvm pkg install openssl”返回：

```
Fetching openssl-1.0.1c.tar.gz to /Users/thierinvestmentservices/.rvm/archives
Extracting openssl to /Users/thierinvestmentservices/.rvm/src/openssl-1.0.1c
Configuring openssl in /Users/thierinvestmentservices/.rvm/src/openssl-1.0.1c.
Compiling openssl in /Users/thierinvestmentservices/.rvm/src/openssl-1.0.1c.
Error running 'make', please read /Users/thierinvestmentservices/.rvm/log/openssl/make.log

Please note that it's required to reinstall all rubies:

    rvm reinstall all --force

Updating openssl certificates
Error running 'update_openssl_certs', please read /Users/thierinvestmentservices/.rvm/log/openssl.certs.log
Johns-MacBook-Pro:~ thierinvestmentservices$ rvm pkg install openssl
Fetching openssl-1.0.1c.tar.gz to /Users/thierinvestmentservices/.rvm/archives
Extracting openssl to /Users/thierinvestmentservices/.rvm/src/openssl-1.0.1c
Configuring openssl in /Users/thierinvestmentservices/.rvm/src/openssl-1.0.1c.
Compiling openssl in /Users/thierinvestmentservices/.rvm/src/openssl-1.0.1c.
Error running 'make', please read /Users/thierinvestmentservices/.rvm/log/openssl/make.log

Please note that it's required to reinstall all rubies:

    rvm reinstall all --force

Updating openssl certificates
Error running 'update_openssl_certs', please read /Users/thierinvestmentservices/.rvm/log/openssl.certs.log 
```

make.log 读取

```
"[2012-11-23 13:15:28] make
/Users/thierinvestmentservices/.rvm/scripts/functions/utility: line 116: make: command not found" 
```

和 openssl.certs.log 读取

```
"[2012-11-23 14:04:04] update_openssl_certs
update_openssl_certs () 
{ 
    ( chpwd_functions="" builtin cd $rvm_usr_path/ssl && command curl -O http://curl.haxx.se/ca/cacert.pem && mv cacert.pem cert.pem )
}
current path: /Users/thierinvestmentservices
command(1): update_openssl_certs
/Users/thierinvestmentservices/.rvm/scripts/functions/pkg: line 205: cd: /Users/thierinvestmentservices/.rvm/usr/ssl: No such file or directory" 
```

在这一点上，这些字母也可能是我不知道发生了什么的翅膀。我试图用我在一个论坛帖子上看到的东西安装 rvm make，但我收到了一堆警告。如果有人有任何建议，我将不胜感激，我完全无法理解。

* * *

根据下面的建议，我尝试重新安装 rvm。键入“rvm reinstall all --force”没有做任何事情（它只是给了我一个新的终端行）。因此，我进行了搜索并使用了 rvm implode，然后按照[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)重新安装了从 rvm 安装中得到以下消息：

......

```
Error running '__rvm_package extract /Users/thierinvestmentservices/.rvm/archives/yaml-0.1.4.tar.gz /Users/thierinvestmentservices/.rvm/src', please read /Users/thierinvestmentservices/.rvm/log/ruby-1.9.3-p327/yaml/extract.log
There has been an error while trying to extract the source. Halting the installation.
Installing Ruby from source to: /Users/thierinvestmentservices/.rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...
tee: /Users/thierinvestmentservices/.rvm/log/ruby-1.9.3-p327/fetch.log: Permission denied
/Users/thierinvestmentservices/.rvm/scripts/functions/utility: line 116: /Users/thierinvestmentservices/.rvm/log/ruby-1.9.3-p327/fetch.log: Permission denied
Error running '/Users/thierinvestmentservices/.rvm/scripts/fetch http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p327.tar.bz2', please read /Users/thierinvestmentservices/.rvm/log/ruby-1.9.3-p327/fetch.log
There has been an error fetching the ruby interpreter. Halting the installation.
ruby-1.9.3-p327 is not installed.
Creating alias default for ruby-1.9.3-p327.
Recording alias default for ruby-1.9.3-p327.
Creating default links/files
ruby-1.9.3-p327 is not installed.
Could not load ruby ruby-1.9.3-p327.
/Users/thierinvestmentservices/.rvm/scripts/alias: line 111: /Users/thierinvestmentservices/.rvm/rubies/ruby-1.9.3-p327/bin/ruby: No such file or directory

  * To start using RVM you need to run `source /Users/thierinvestmentservices/.rvm/scripts/rvm`
    in all your open shell windows, in rare cases you need to reopen all shell windows.

  * To start using rails you need to run `rails new <project_dir>`. 
```

rvm install 1.9.3 将我带到与以前相同的位置：

```
Ruby (and needed base gems) for your selection will be installed shortly.
Before it happens, please read and execute the instructions below.
Please use a separate terminal to execute any additional commands.

  Notes for Mac OS X 10.7.5, Xcode 4.5.2.

For JRuby:  Install the JDK. See http://developer.apple.com/java/download/  # Current Java version "1.6.0_26"
For IronRuby: Install Mono >= 2.6
For Ruby 1.9.3: Install libksba # If using Homebrew, 'brew install libksba'
For Opal: Install Nodejs with NPM. See http://nodejs.org/download/

To use an RVM installed Ruby as default, instead of the system ruby:

    rvm install 1.8.7 # installs patch 357: closest supported version
    rvm system ; rvm gemset export system.gems ; rvm 1.8.7 ; rvm gemset import system.gems # migrate your gems
    rvm alias create default 1.8.7

And reopen your terminal windows.

Xcode and gcc:

: 
```

rvm requirements 和 rvm pkg install openssl 也让我到了同一个地方。最佳，J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T00:09:31.480

在 Xcode 中你需要安装命令行工具，但是......更简单的方法是安装 osx-gcc-installer，它包含所有必需的库、编译器，并且只是一个包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:50:24.643

你可以去：

[http://connect.apple.com](http://connect.apple.com)

直接从 Apple 获取最新的命令行工具。如果您使用 Homebrew，您可能希望按照 Homebrew 的建议完全安装 Xcode。

# html - 骨架框架 - css 列表间距

> ID：13536647
> 
> 赞同：0
> 
> 时间：2012-11-23T23:01:01.693
> 
> 标签：html, css, list, alignment

我试图将我的导航浮动到顶部更多，向左大约 200 像素，至少更靠近下面可以看到的行尾。每次我应用边距或填充时，即使有很多空间，它也会将导航推到彼此下方，任何人都可以看看我的代码。

非常感谢，

我总是觉得萤火虫更容易，所以我把它上传到这里[http://xronn.co.uk/hosting/](http://xronn.co.uk/hosting/)

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:03:47.540

你是说左边还是右边？如果您的意思是向左，则有一个巨大的图像挡住了导航菜单。如果您的意思是向右，那么您始终可以增加导航 div 的宽度并将`float: right;`css 规则应用于`ul`（到 #nav 元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:09:01.900

切换 navigation 和 logo 的位置`divs`，像这样：

```
<div class="seven columns">navigation menu</div>
<div class="five columns">logo</div> 
```

这应该将导航推到左侧。此外，请确保导航`div`更多，`seven`否则徽标将出现在导航菜单旁边。

# java - 使用 XStream 的 Java 中的 NoSuchMethodError

> ID：13536648
> 
> 赞同：1
> 
> 时间：2012-11-23T23:01:04.537
> 
> 标签：java, nosuchmethoderror

我正在尝试使用 XStream 将数据库保存到文件中，然后稍后使用 XStream 再次打开它并将其反序列化回它之前所在的对象。数据库由表的arraylist 组成，它由数据类的arraylist 组成，其中数据类包含对象的arraylist。我基本上是在尝试创建一个 sql 编译器。由于 load 方法的最后一行，我目前收到 java.lang.NoSuchMethodError 。这是我所拥有的：

保存方法

```
 public void save(Database DB){
    File file = new File(DB.getName().toUpperCase() + ".xml");

    //Test sample
    DB.createTable("TBL1(character(a));");
    DB.tables.getTable("TBL1").rows.add(new DataList());
    DB.tables.getTable("TBL1").rows.getRow(0).add(10);

    XStream xstream = new XStream();
    //Database
    xstream.alias("Database", Database.class);
    //Tables
    xstream.alias("Table", Table.class);
    //Rows
    xstream.alias("Row", DataList.class);
    //Data
    //xstream.alias("Data", Object.class);

    //String xml = xstream.toXML(DB);
    Writer writer = null;
    try {
        writer = new FileWriter(file);
        writer.write(xstream.toXML(DB));
        writer.close();
    } catch (IOException e) {
        e.printStackTrace();
    }        
} 
```

加载方法

```
public void Load(String dbName){
    XStream xstream = new XStream();

    BufferedReader br;
    StringBuffer buff = null;
    try {
        br = new BufferedReader(new FileReader(dbName + ".xml"));
        buff = new StringBuffer();
        String line;
        while((line = br.readLine()) != null){
           buff.append(line);
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    database = (Database)xstream.fromXML(buff.toString());
} 
```

堆栈跟踪

```
Exception in thread "main" java.lang.NoSuchMethodError:     
org.xmlpull.v1.XmlPullParserFactory.newInstance(Ljava/lang/String;Ljava/lang/Class;)Lorg/xmlpull/v1/XmlPullParserFactory;
at com.thoughtworks.xstream.io.xml.XppDriver.createParser(XppDriver.java:57)
at com.thoughtworks.xstream.io.xml.AbstractXppDriver.createReader(AbstractXppDriver.java:54)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:913)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:904)
at dbt.Load(dbt.java:255)
at dbt.checktypestatement(dbt.java:88)
at dbt.main(dbt.java:45) 
```

更改一些库（参考库：xstream、xpp3 和 xmlpull）后，这是我在运行时遇到的错误：

```
Exception in thread "main" com.thoughtworks.xstream.converters.ConversionException: Row : Row
---- Debugging information ----
message             : Row
cause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException
cause-message       : Row
class               : java.util.ArrayList
required-type       : java.util.ArrayList
converter-type      : com.thoughtworks.xstream.converters.collections.CollectionConverter
path                : /Database/tables/tables/Table/rows/rows/Row
line number         : 1
class[1]            : RowList
converter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
class[2]            : Table
class[3]            : TableList
class[4]            : Database
version             : null
-------------------------------
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:79)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:50)
at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.readItem(AbstractCollectionConverter.java:71)
at com.thoughtworks.xstream.converters.collections.CollectionConverter.addCurrentElementToCollection(CollectionConverter.java:79)
at com.thoughtworks.xstream.converters.collections.CollectionConverter.populateCollection(CollectionConverter.java:72)
at com.thoughtworks.xstream.converters.collections.CollectionConverter.populateCollection(CollectionConverter.java:66)
at com.thoughtworks.xstream.converters.collections.CollectionConverter.unmarshal(CollectionConverter.java:61)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:50)
at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:134)
at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1058)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1042)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:913)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:904)
at dbt.load(dbt.java:257)
at dbt.checktypestatement(dbt.java:87)
at dbt.main(dbt.java:44)
Caused by: com.thoughtworks.xstream.mapper.CannotResolveClassException: Row
at com.thoughtworks.xstream.mapper.DefaultMapper.realClass(DefaultMapper.java:56)
at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)
at com.thoughtworks.xstream.mapper.DynamicProxyMapper.realClass(DynamicProxyMapper.java:55)

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-13T18:07:55.907

我可以通过在 save 方法中注释掉 xstream.alias 方法来解决这个问题。

# django - 使用 IAM 进行用户身份验证

> ID：13536649
> 
> 赞同：6
> 
> 时间：2012-11-23T23:01:05.140
> 
> 标签：django, amazon-s3, amazon-web-services, boto, amazon-iam

我已经阅读了很多帖子，这些帖子涉及我认为应该是一个非常常见的用例 - 但没有找到我想要的确切内容，或者无法完成的简单原因。

我在 S3 上有一些文件。我希望能够通过我构建的前端授予某些用户访问某些文件的权限。

到目前为止，我已经使它以这种方式工作：

*   我在 Django 中构建了前端，使用它的内置用户和组
*   我有一个桶模型，我在其中镜像了我的 S3 桶。
*   我有一个从组到代表 S3 权限的存储桶的 m2m 关系。
*   用户登录并针对 Django 的用户进行身份验证。
*   我从 Django 中获取允许用户查看的存储桶列表
*   我使用 boto 从这些存储桶中获取指向文件的链接列表并显示给用户。

这可行，但并不理想，而且感觉也不对。我必须保留存储桶的镜像，并且我还必须维护自己的用户/密码和权限列表，因为 AWS 已经内置了所有这些。

我真正想要的是简单地在 IAM 中创建用户并使用 IAM 中的组权限来控制对 S3 存储桶的访问。没有重复的数据或功能。我的应用程序会向用户请求 UN/PW 并使用它连接到 IAM/S3 以提取存储桶和文件列表，然后向用户显示链接。简单的。

我怎么能，或者为什么我不能？

我看错了吗？

解决这个（我假设）非常常见的用例的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:46:15.107

你的思路是对的，我们来看看替代方案：

1.  您的应用程序存储所有用户的 api 密钥和秘密，并将所有内容委托给 AWS IAM 权限系统。虽然是架构上更简单的解决方案，但细节可能会扼杀它。您的应用程序应该是真正安全的，并以*非常*安全的方式托管秘密 api 密钥。这实际上取决于用例：

    *   如果所有工作都由交互式用户完成 - 那么您的系统可以存储一个加密的密钥和用户的密码，将其作为登录过程的一部分进行解密。这意味着，如果您的数据库遭到破坏 - 那里没有足够的信息来破坏密钥。
    *   如果系统需要做后台非交互的东西，那么就需要开发复杂的程序来安全地存储这些信息。[Rightscale](http://www.quora.com/Cloud-Security/How-do-services-like-RightScale-store-end-users-EC2-credentials-securely)和[Dome9](http://dome9.com)等公司已开发出此类流程。除非您的团队中有安全专家，否则不建议使用此选项。
2.  您的应用程序使用单个“强”api 密钥连接到 AWS - 但如果允许特定用户对该资源执行该操作，则查询 AWS API。可悲的是，我不熟悉类似的 AWS api——所以也许其他一些读者想对此发表评论。这（如果可能）将是最简单和安全的解决方案。

3.  扩展您现有的解决方案以使用存储在 AWS 的数据：用户、组、用户->组分配，并使用用户/组策略作为您的权限检查的数据源。这样，您将与 AWS 进行一些逻辑重复（这很好），但不会出现*真正*痛苦的数据重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-12T21:27:38.827

您应该考虑使用 Amazon Cognito（2014 年发布）为您的用户创建唯一身份并对他们进行身份验证，以便安全访问您的 AWS 资源，例如 Amazon S3 或 DynamoDB。

您可以利用 AWS IAM 身份、自定义开发人员身份、公共身份提供商（如 Amazon IAM、Facebook、Twitter、Google）或任何与 OpenID Connect 兼容的提供商。

以下是如何使用 Amazon Cognito 的高级架构 [![在此处输入图像描述](../Images/07ebdafe52c5c53ecf12fbc3e21873ce.png)](https://i.stack.imgur.com/ffcXK.jpg)

此处的常见问题解答 - [https://aws.amazon.com/cognito/faqs/](https://aws.amazon.com/cognito/faqs/)

# php - exim 将邮件重定向到脚本

> ID：13536661
> 
> 赞同：2
> 
> 时间：2012-11-23T23:03:16.107
> 
> 标签：php, email, sendmail, exim

我正在寻找设置一个邮件中继，以便任何邮件发送到例如

@example.com

被解析为 PHP 脚本。

我知道要为个人地址执行此操作，我可以做一些类似的事情

（来自以下网站[http://evolt.org/incoming_mail_and_php](http://evolt.org/incoming_mail_and_php)）

配置别名，例如

脚本：|/我们的/script.php

然后发送到 script@example.com 的任何电子邮件都将传递给给定的脚本..

但是我怎样才能让每封发给@example.com 的电子邮件都传递给脚本呢？谢谢你

# java - 如何在雪豹上安装 java jdk 7

> ID：13536667
> 
> 赞同：69
> 
> 时间：2012-11-23T23:03:43.680
> 
> 标签：java, osx-snow-leopard, java-7

我的 Mac 目前正在运行 Snow Leopard (10.6.8)，我想使用 Java 7 进行开发。我从[Oracle 网站](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u9-downloads-1859576.html)下载了 Java 7 OS X 安装程序，开始运行它。不幸的是，我立即收到一条消息，说安装程序仅在 OS X Lion (10.7.3) 上受支持。有什么方法可以在我的机器上使用 Snow Leopard 安装 Java 7？我购买新操作系统并不是为了升级我的 Java。我用谷歌搜索了一些，但我没有找到太多。我希望我能在这里找到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-24T17:53:56.993

使用 http://www.charlessoft.com/ 的 Pacifist[打开并安装从 http://www.oracle](http://www.oracle.com/technetwork/java/javase/downloads/index.html)[下载](http://www.charlessoft.com/)的“jdk7-7uX-macosx-x64.dmg”文件中的“JDK 7 Update X.pkg” [.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-22T02:23:39.800

从我读过的内容来看，JDK 7 不需要 10.7+，所以我只是`.pkg`用 PackageMaker（一个 Xcode 工具）打开了随附的安装程序文件，并删除了操作系统版本要求并重新构建它。

~~您需要将安装程序从 .dmg 文件中复制出来，因为您必须保存更改。~~
**编辑：**您将需要构建到另一个目录，因为安装的 .dmg 是只读的。

到目前为止，在我使用它的过程中，我还没有遇到任何问题，甚至 Java 首选项窗格也可以正常工作。

需要注意的一件事是，您**必须**重新排序 JDK`Java Preferences.app`才能让程序使用新的 JDK 而不是 Java 6。

* * *

我什至已经将 Java 7`.jdk`包复制到`/System/Library/Java/JavaVirtualMachines/`中，而且它似乎可以正常运行。

只是不要在 Java 应用程序运行时移动/重命名 JDK 包；并不是说我是偶然或其他什么...

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-13T14:10:46.513

我遇到了同样的问题，无法通过谷歌搜索正确的方法。最后我自己想出了解决方案并将其放在我的博客上：

[http://jksha.blogspot.se/2013/09/java-7-and-snow-leopard-osx-106.html](http://jksha.blogspot.se/2013/09/java-7-and-snow-leopard-osx-106.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-16T22:04:27.153

@reukiodo 的答案绝对是要走的路，所以非常感谢！但是，对于像我这样的新手来说，可能需要进一步的解释。

1.  下载@reukiodo 发布链接的两个DMG。
2.  安装和平主义者。
3.  用 pacifist 打开 java-DMG。
4.  在“包内容”选项卡（默认选项卡）中，选择“JDK 7 更新 XX.pkg 的内容”（XX 为例如 51）
5.  单击“安装”按钮并按照屏幕上的说明进行操作。
6.  打开 yout Utilities 文件夹中的 Java Preferences.app 并将 Java SE 7 拖到“常规”选项卡（默认选项卡）中 Java 版本列表的顶部
7.  （可选：使用 Eclipse：按照[Heath Borders 的步骤](https://stackoverflow.com/questions/6614380/jdk-on-osx-10-7-lion#answer-6785545)回答另一个但类似的问题。注意！这实际上适用于 OSX 10.7 Lion，但同样的程序适用，它在 10.6.8 Snow Leopard 上对我有用。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-16T05:55:31.077

有两种方法可以做到这一点。

1.  从 charlessoft.com 下载 Pacifist 并在其中打开 JDK PKG（并解压缩应用程序。）
2.  在 PackageMaker（开发者工具）中打开 PKG，去掉 10.7.3 的要求。

祝你好运！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-29T04:02:30.857

我能够从这个项目的一些补丁中为雪豹编译 openJDK 7（完全工作，包括 AWT）：
[https ://github.com/hgomez/obuildfactory/](https://github.com/hgomez/obuildfactory/)

如果您希望我的二进制文件更轻松一点，它们是：
[https ://bintray.com/wyatt8740/generic/openjdk7-sdk-osx-10.6/20140622/view](https://bintray.com/wyatt8740/generic/openjdk7-sdk-osx-10.6/20140622/view)

压缩包大小约为 57 兆字节。

将其提取到`/Library/Java/JavaVirtualMachines/`. JDK 将位于名为`jdk1.7.0.jdk`. 将您的`JAVA_HOME`环境变量设置为`/Library/Java/JavaVirtualMachines/jdk1.7.0.jdk/Contents/Home`，然后将用于设置 JAVA_HOME 的命令放入您的环境中`~/.profile`以使其更加永久。注销并登录以使其完全生效。到目前为止，唯一缺少的是 JDK 7 浏览器插件。

您也可以在通过 GUI 访问时使用“Java 首选项”应用程序（可以在 Spotlight 搜索中找到）将其设置为默认值。

不幸的是，我目前无法访问 OS X 来尝试使 java 1.8 工作，所以 1.7 可能是 10.6 之路的尽头。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-23T23:14:40.533

你可以建立你自己的。我以前这样做过。很容易。它和你可能得到的一样正式：

[https://wikis.oracle.com/display/OpenJDK/Mac+OS+X+Port](https://wikis.oracle.com/display/OpenJDK/Mac+OS+X+Port)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-02T21:49:45.223

`/System/Library/CoreServices/SystemVersion.plist`我已根据此视频教程[http://www.youtube.com/watch?v=eFi-H-7-PD4](http://www.youtube.com/watch?v=eFi-H-7-PD4)更改了版本

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-27T14:27:50.867

你想要的不是不可能的，但肯定不推荐，但是......一旦你确定这是你想要的，这里有一个简单的方法来安装 Java（或任何与操作系统相关的软件）： - 导航到你 MainHD/ System/Library/CoreServices/SystemVersion.plist - 备份这个文件！！- 在文本编辑器中打开它并更改产品版本：

```
 <key>ProductUserVisibleVersion</key>
<string>10.6.8</string>
<key>ProductVersion</key>
<string>10.6.8</string> 
```

根据你的需要。

**警告：** 武士在做出任何决定之前需要进行 7 次呼吸。

# kendo-ui - KendoUI：在 MVC4 中使用 HTML Helper 添加网格聚合

> ID：13536668
> 
> 赞同：1
> 
> 时间：2012-11-23T23:03:51.403
> 
> 标签：kendo-ui

我正在尝试在网格的 HTML 帮助程序中添加一个 sum 聚合，但我不确定如何在此示例中为 Total 字段添加它。这是我的简单示例：

```
 @(Html.Kendo().Grid(Model).Name("Grid") 
      .Pageable()
      .Sortable()
      .Scrollable()
      .Filterable()
      .Columns(columns =>
          {
              columns.Bound(p => p.FirstName);
              columns.Bound(p => p.LastName);
              columns.Bound(p => p.Email);
              columns.Bound(p => p.Total).ClientFooterTemplate("Sum: $#= sum #");
          })
      .DataSource(dataSource => dataSource
          .Ajax()
          .Read(read => read.Action("Users_Read", "Home"))

      )) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:25:17.223

您没有`aggregate`在以下定义`DataSource`：

```
@(Html.Kendo().Grid(Model).Name("Grid") 
  .Columns(columns =>
      {
          columns.Bound(p => p.FirstName);
          columns.Bound(p => p.LastName);
          columns.Bound(p => p.Email);
          columns.Bound(p => p.Total).FooterTemplate("Sum: #= sum #");
      })
  .DataSource(dataSource => 
               dataSource.Ajax()
                         .Read(read => read.Action("Users_Read", "Home"));
                 .Aggregates(aggregates => { aggregates.Add(p => p.Total).Sum(); } )
                 .ServerOperation(false) 
  )) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T18:45:39.173

这应该工作
`.FooterTemplate(@<text>Total Count: @item.Sum</text>)`

# python - 用 C 嵌入 Python

> ID：13536669
> 
> 赞同：5
> 
> 时间：2012-11-23T23:03:53.063
> 
> 标签：python, c, python-2.7

我想在 C 应用程序中使用基于事件的 Python 库。我使用官方 C-API 嵌入 Python：[http ://docs.python.org/2/c-api/index.html#c-api-index](http://docs.python.org/2/c-api/index.html#c-api-index)

从 C 中调用方法并收集返回值是没有问题的。但是，我不知道如何执行以下操作：

一些 python 库函数将我认为是 python 函数指针作为参数。

当从 C 调用这些方法时，是否有可能传递一个 C 函数指针，以便 Python 函数使用 C 函数作为回调？

如果没有，如何让 Python 使用 C 回调？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T23:35:04.460

这比人们想象的要难，但可以做到。

如果您想提供一个 C 函数作为回调，您可以使用`PyCFunction_New`它来将其转换为 Python 可调用函数：

```
#include <python.h>

static PyObject *my_callback(PyObject *ignore, PyObject *args)
{
  /* ... */
}

static struct PyMethodDef callback_descr = {
  "function_name",
  (PyCFunction) my_callback,
  METH_VARARGS,                 /* or METH_O, METH_NOARGS, etc. */
  NULL
};

static PyObject *py_callback;

...
py_callback = PyCFunction_New(&callback_descr, NULL); 
```

如果您想在运行时选择不同的回调，这种方法将不起作用，例如提供一个`c_to_python`将 C 回调函数转换为 Python 回调的通用函数。在这种情况下，您需要使用自己的`tp_call`.

```
typedef struct {
  PyObject_HEAD
  static PyObject (*callback)(PyObject *, PyObject *);
} CallbackObject;

static PyObject *
callback_call(CallbackObject *self, PyObject *args, PyObject *kwds)
{
  return self->callback(args, kwds);
}

static PyTypeObject CallbackType = {
    PyObject_HEAD_INIT(NULL)
    0,                          /*ob_size*/
    "Callback",                 /*tp_name*/
    sizeof(CallbackObject),     /*tp_basicsize*/
    0,                          /*tp_itemsize*/
    0,                          /*tp_dealloc*/
    0,                          /*tp_print*/
    0,                          /*tp_getattr*/
    0,                          /*tp_setattr*/
    0,                          /*tp_compare*/
    0,                          /*tp_repr*/
    0,                          /*tp_as_number*/
    0,                          /*tp_as_sequence*/
    0,                          /*tp_as_mapping*/
    0,                          /*tp_hash */
    (ternaryfunc) callback_call, /*tp_call*/
    0,                          /*tp_str*/
    0,                          /*tp_getattro*/
    0,                          /*tp_setattro*/
    0,                          /*tp_as_buffer*/
    Py_TPFLAGS_DEFAULT,         /*tp_flags*/
};

PyObject *
c_to_python(PyObject (*callback)(PyObject *, PyObject *))
{
  CallbackObject *pycallback = PyObject_New(CallbackObject, &CallbackType);
  if (pycallback)
    pycallback->callback = callback;
  return pycallback;
} 
```

这段代码被简单地扩展为也接受一个`user_data`指针；只需将用户数据存储在`CallbackObject`结构中。

# c# - 使用 C# 选择和更新 XML 文件中的值

> ID：13536670
> 
> 赞同：0
> 
> 时间：2012-11-23T23:04:00.800
> 
> 标签：c#, xml, linq-to-xml

我有一个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Options>
  <Gestion>
    <Prêts>
      <NbrRenouvlement>5</NbrRenouvlement>
      <DureeEmprunt>10</DureeEmprunt>
      <NbrEmprunt>3</NbrEmprunt>
    </Prêts>
    <Réservations>
      <NbrReservation>3</NbrReservation>
      <DureeReservation>7</DureeReservation>
    </Réservations>
  </Gestion>
  <Config>
    <RememberMe>False</RememberMe>
    <ConnexionAutomatique>False</ConnexionAutomatique>
    <ShowToolTip>True</ShowToolTip>
  </Config>
</Options> 
```

我想选择 NbrRenouvlement 的值为 5，这是我写的代码：

```
String nbrReservation = String.Empty;
var makeInfo = from reservations in doc.Descendants("Réservations") 
           select reservations.Element("NbrReservation").Value; 
```

但是此代码返回一个通用列表，尽管我要选择的值只是一个数字，所以我需要使用 foreach 循环：

```
foreach (string s in makeInfo.Distinct()) 
               nbrReservation.Text += s; 
```

这种方法工作正常，但是选择一个值太长了，还有其他方法可以让我从那个 XML 文件中选择 NbrReservation 的值吗？

我怎样才能改变这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:09:08.143

> *我想选择 NbrRenouvlement 的值*

您可以使用 XPath (System.Xml.XPath)。

```
var five = xDoc.XPathSelectElement("//NbrRenouvlement").Value; 
```

这是类似于您问题中的代码

```
var xDoc = XDocument.Parse(xml);
var makeInfo = xDoc.XPathSelectElement("//Réservations/NbrReservation");
if (makeInfo != null)
{
    var val = makeInfo.Value;
    //makeInfo.Value = newValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:09:16.517

读取和保存值：

```
XDocument xdoc = XDocument.Load(path_to_xml);
var nbrReservation = xdoc.Descendants("Réservations")
                         .Single() // if you have single reservations node
                         .Element("NbrReservation");
int value = (int)nbrReservation;
nbrReservation.SetValue(42);
xdoc.Save(path_to_xml); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:23:22.933

这将为您提供一个字符串列表 ( `IEnumerable<string>`)：

```
var makeInfo = from reservations in doc.Descendants("Réservations") 
       select reservations.Element("NbrReservation").Value; 
```

如果您将其改写为：

```
var makeInfo = (from reservations in doc.Descendants("Réservations") 
       select reservations.Element("NbrReservation")).First().Value; 
```

然后你可以这样做：

```
nbrReservation.Text += s; 
```

这是假设`NbrReservation`节点保证在 XML 中。

# javascript - 页面加载/滚动后加载/插入图像

> ID：13536674
> 
> 赞同：0
> 
> 时间：2012-11-23T23:04:30.127
> 
> 标签：javascript, jquery, html

我正在尝试在页面加载后将图像加载到页面上。

证明这一点的最佳（但粗略）方法是：

```
<div id="images">
    <script type="text/javascript">
        for (var i = 0; i < 10000; i++) {
            document.write("<img src=\"imgs/"+i+".jpg\" \">");
        }
    </script>
</div> 
```

jsFiddle：http: [//jsfiddle.net/alexjamesbrown/XPBdg/](http://jsfiddle.net/alexjamesbrown/XPBdg/)

... 是的，将 10000 个标签加载到页面上！

我想要发生的是页面加载，然后在页面加载后触发'for'循环，一个接一个（以免过多地破坏浏览器）

我也在 jQuery 中尝试过这个，但它确实挂起了浏览器......

```
$(function(){
    for (var i = 0; i < 10000; i++) {
        $('#images').append('<img src=\"img/'+i+'.jpg\" width: 20px; height: 20px;\ class=\"img\">')
    }
}) 
```

所以，有点像“无限滚动”类型应用程序的简单版本：http: [//www.innovativephp.com/demo/infinitescroll/](http://www.innovativephp.com/demo/infinitescroll/)

使用 for 循环，而不是从服务器检索数据....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:36:55.027

要一次加载每个图像，请尝试

```
var imageCount = 0;

function nextImage( ) {
    var img = new Image(); // create image element
    img.src = "http://lorempixel.com/40/40" + imageCount; // use imageCount to change image
    img.onload = function( ) { 

        if( imageCount <= 10000 ) {

            imageCount++;
            var imgElement = document.getElementById("images");
            imgElement.appendChild( img );
            nextImage(); // only once image has loaded should we try to load another
        }
    }
}

nextImage();​ 
```

刚刚开始工作。看看[**这里的小提琴**](http://jsfiddle.net/XPBdg/1/)

顺便说一句，您可以使用类似的东西进一步延迟加载

```
setTimeout( nextImage, 100 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T23:19:07.700

在单个请求中加载 10.000 个 img 元素不是一个好习惯。你会考虑改变逻辑。

无论如何，您可以尝试以下方法来提高性能。

```
<div>
        <script type="text/javascript">
            var elems = [], limit = 5000;
            while(limit--) {
                elems.push('<img src="http://lorempixel.com/40/40" />');
            }
            document.write( elems.join(' ') );
            // or using jquery : $('body').append( elems.join(' ') );
        </script>
</div>​​​​​​​​ 
```

在每次循环迭代中接触 DOM 会大大降低性能。

# ruby-on-rails - Ruby on rails 在 Devise 上编辑用户而不输入密码

> ID：13536675
> 
> 赞同：2
> 
> 时间：2012-11-23T23:04:34.230
> 
> 标签：ruby-on-rails, devise

我知道这个问题已经被问过好几次了，每个答案都会导致设计 wiki，但我无法让它工作。我在这里关注了 wiki 和其他一些帖子，但没有运气。我想让用户更新他的信息（电子邮件、用户名、姓名等），而不必每次都输入密码。

我的`registrations_controller.rb`样子是这样的：

```
class RegistrationsController < Devise::RegistrationsController
  def update
    # required for settings form to submit when password is left blank
    if params[:user][:password].blank?
      params[:user].delete("password")
      params[:user].delete("password_confirmation")
    end

    @user = User.find(current_user.id)
    if @user.update_attributes(params[:user])
      # Sign in the user bypassing validation in case his password changed
      sign_in @user, :bypass => true
      redirect_to root_path
    else
      render "edit"
    end
  end
end 
```

我的`routes.rb`样子是这样的：

```
Sparechef::Application.routes.draw do
  get "users/profile"

  devise_for :users
  devise_for :controllers => { :registrations => "registrations" }
  resources :dashboard

  root to: "home#index"

  match "profile" => "users#profile"
end 
```

我仍然收到消息“当前密码不能为空”。如果我更新我的路线以遵循设计 wiki，`devise_for :users, :controllers => { :registrations => "registrations" }`我会收到此错误：

```
Can't mass-assign protected attributes: current_password 
```

有人知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:29:36.797

根据上述问题评论中的@michael，添加`attr_accessible :current_password`.`User`

# xslt - xsl 模板匹配具有特定值的节点

> ID：13536680
> 
> 赞同：4
> 
> 时间：2012-11-23T23:04:59.213
> 
> 标签：xslt, xslt-2.0

我正在尝试通过我在参数中获得的内容来过滤 XML。仅在 dep_code 等于“某物”或在本例中为 $department 的那些课程上匹配的正确语法是什么？

**XML 结构是**

```
 <course>
         <dep_code></dep_code>
         <catalog_number></catalog_number>
         <course_group></course_group>
         <term></term>
         <offered></offered>
         <course_type></course_type>
         <course_level></course_level>
         <title></title>
         <course_number></course_number>
         <meeting_text></meeting_text>
         <faculty_text></faculty_text>
         <description></description>
         <prerequisites></prerequisites>

      </course> 
```

**参数定义**

```
<xsl:param name="department" select="'All'" /> 
```

**我试过的代码我** 试过这个：

```
<xsl:template match="course/dep_code/{$department}"> 
```

还有这个：

```
<xsl:template match="course/dep_code/$department">

<xsl:template match="course/dep_code eq $department"> 
```

II 不断收到如下语法错误：

1.  F [Saxon-PE 9.4.0.3] 路径表达式中的意外标记“{”
2.  F [Saxon-PE 9.4.0.3] XSLT 模式中不允许变量引用（谓词除外）

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T23:21:01.430

示例 XML

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<courses>
      <course>
         <dep_code>not_it</dep_code>
         <catalog_number></catalog_number>
         <prerequisites></prerequisites>
      </course>
      <course>
         <dep_code>something</dep_code>
         <catalog_number></catalog_number>
         <prerequisites></prerequisites>
      </course>
</courses> 
```

示例 XSLT

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
    <table border="1">
      <tr>
        <th>dep_code</th>
      </tr>
      <xsl:for-each select="courses/course">
        <xsl:if test="dep_code[text()='something']">
      <tr>
        <td><xsl:value-of select="dep_code"/></td>
      </tr>
        </xsl:if>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

结果

```
<html>
<body>
<table border="1">
<tr><th>dep_code</th></tr>
<tr><td>something</td></tr>
</table>
</body>
</html> 
```

# decode - 任何人都可以对此进行解码或提出一种解码方法吗？

> ID：13536683
> 
> 赞同：0
> 
> 时间：2012-11-23T23:05:34.240
> 
> 标签：decode

我正在使用在接收数据时生成 PDF417 条形码的设备。条码读取如下（我附加了同一设备的 4 个不同的示例输出）。如果有人能指出我如何解码这个请。

`Vsh9t+rTEIJxFIzQu/Os1BDsceAcGWe/7WZREL8fv9aTbZGuhnyZirI01z/aXzTPB2JN+4riIhrXTQINGD43WqGHzQCCGJkAsmpTByAgICAgMTE2MDIraFMHICAgIEJvc3MgUFFVSUNLU09CUAAAnwAAKgcAAAAAAAAA`

`OX0Sn6mPqJABPJtstRzmlvqjRfSXMyKqKTP5yL6JaKhetNupKiFFgRI32TDbm4MxKovt7q8s185KaNCNQGJmtaGHzQB5GJkANmpTByAgICAgMTE1OTmwZ1MHICAgIEJvc3MgUCAgIDQ0U09CPAAAdwAAXgUAAAAAAAAA`

`7SQ2PN28/K46uo9tkh2AIz8U7t8z4XVeT8FvDn2mqWd/Y6W4DC1VQCFev3yVFZPpMgotFi52zoNyyBOtRmsMo6GHzQB/GJkAiGpTByAgICAgMTE2MDECaFMHICAgIEJvc3MgUFFVSUNLU09CUAAAnwAAKgcAAAAAAAAA`

`aR9KHkCNZNtiuAE4OU5/cR/JTY3q7u2jZ4iAEFcCmu2yM4Ji6FscuWl3wTdNt0TQlzaGxovgeECgx3EjydlsQqGHzQB8GJkAX2pTByAgICAgMTE2MDDZZ1MHICAgIEJvc3MgUFFVSUNLU09CJgAASwAAXwMAAAAAAAAA`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:23:47.453

这可能是 Base-64 编码数据。

我已经通过 base64 解码器将其弹出并获取包含一些字符串的二进制数据。值得注意的是，它们在 Boss PQUICKSOB 上都有变化，因为它们接近尾声。

# xslt - XSLT 选择不带子项的文本

> ID：13536686
> 
> 赞同：3
> 
> 时间：2012-11-23T23:05:47.540
> 
> 标签：xslt, xpath

XML:

`<data><ph>Foo</ph>Bar</data>`

XSL：

```
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <xsl:apply-templates select="data/ph"/>
    <xsl:apply-templates select="data"/>
</xsl:template>
<xsl:template match="data/ph">
    <xsl:value-of select="."/>
 </xsl:template>
<xsl:template match="data">
    <xsl:value-of select="."/>
</xsl:template> 
```

当 XSL 选择 /data/ 中的文本时，`<xsl:template match="data"><xsl:value-of select="."/>`它也在选择子实体 data/ph 中的文本。如何仅指向 /data/ 的文本，而不包括 /data/ph/ 的文本？

我的输出应该是：FooBar，而不是 FooFooBar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:10:31.853

> 当 XSL 选择 with 中的文本时`/data/`，`<xsl:template match="data"><xsl:value-of select="."/>`它也在选择子实体中的文本`data/ph`。如何仅指向 的文本 `/data/`，而不包括 的文本`/data/ph/`？

**使用**：

```
<xsl:copy-of select="text()"/> 
```

这会复制当前节点的所有文本节点子节点。

**通过这个修正，整个变换变成**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:apply-templates select="data/ph"/>
        <xsl:apply-templates select="data"/>
    </xsl:template>

    <xsl:template match="data/ph">
        <xsl:value-of select="."/>
     </xsl:template>

    <xsl:template match="data">
        <xsl:copy-of select="text()"/>
    </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**：

```
<data><ph>Foo</ph>Bar</data> 
```

**产生了想要的正确结果**：

```
FooBar 
```

# msbuild - SpecsFor.Mvc 构建失败

> ID：13536694
> 
> 赞同：4
> 
> 时间：2012-11-23T23:06:27.240
> 
> 标签：msbuild, visual-studio-2012, msdeploy

尝试测试 SpecsFor.Mvc，不幸的是，当我尝试运行测试时，我遇到了这个奇怪的构建错误。

在我自己的项目和 SpecsFor 最新源中运行时，我得到“构建失败”。来自 IISTestRunnerAction 类的 ApplicationException。以下来自日志文件，但超出了我的理解。

使用 Visual Studio 2012 Pro 和 IIS Express 8.0

以下来自日志文件：

> 使用程序集“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.Tasks.dll”中的“VSMSDeploy”任务。任务“VSMSDeploy”打包/发布任务 Microsoft.Web.Publishing.Tasks.VSMSDeploy 加载程序集 Microsoft.Web.Deployment，Version=9.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35 打包/发布任务 Microsoft.Web.Publishing.Tasks。 VSMSDeploy 加载程序集 Microsoft.Web.Delegation，Version=7.1.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35 从源启动 Web 部署任务：manifest(C:\Users\Chris\Desktop\SpecsFor-master\SpecsFor.Mvc.Demo\ obj\Test\Package\SpecsFor.Mvc.Demo.SourceManifest.xml）到目的地：包（C:\Users\Chris\Desktop\SpecsFor-master\SpecsFor.Mvc.Demo\obj\Test\Package\SpecsFor.Mvc.演示.zip)。C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets(4007,5)：错误：Web 部署任务失败。（“Microsoft.Web.Deployment.DeploymentManager”的类型初始化程序引发异常。）包失败。完成执行任务“VSMSDeploy”——失败。

## 更新

这是 AssemblyStartup

```
 [SetUpFixture]
public class AssemblyStartup
{
    private SpecsForIntegrationHost _host;

    [SetUp]
    public void SetupTestRun()
    {
        var config = new SpecsForMvcConfig();
        //SpecsFor.Mvc can spin up an instance of IIS Express to host your app 
        //while the specs are executing.  
        config.UseIISExpress()
            //To do that, it needs to know the name of the project to test...
            .With(Project.Named("SpecsForTesting"))
            //And optionally, it can apply Web.config transformations if you want 
            //it to.
            .ApplyWebConfigTransformForConfig("Debug");

        //In order to leverage the strongly-typed helpers in SpecsFor.Mvc,
        //you need to tell it about your routes.  Here we are just calling
        //the infrastructure class from our MVC app that builds the RouteTable.

        config.BuildRoutesUsing(r => SpecsForTesting.RouteConfig.RegisterRoutes(r));

        //SpecsFor.Mvc can use either Internet Explorer or Firefox.  Support
        //for Chrome is planned for a future release.
        config.UseBrowser(BrowserDriver.Chrome);

        //Does your application send E-mails?  Well, SpecsFor.Mvc can intercept
        //those while your specifications are executing, enabling you to write
        //tests against the contents of sent messages.
        config.InterceptEmailMessagesOnPort(13565);

        //The host takes our configuration and performs all the magic.  We
        //need to keep a reference to it so we can shut it down after all
        //the specifications have executed.
        _host = new SpecsForIntegrationHost(config);
        _host.Start();

    }

    //The TearDown method will be called once all the specs have executed.
    //All we need to do is stop the integration host, and it will take
    //care of shutting down the browser, IIS Express, etc. 
    [TearDown]
    public void TearDownTestRun()
    {
        _host.Shutdown();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:54:45.213

我出现了这个错误，事实证明我已经在我的解决方案中添加了一个新项目。新项目不包括相同的配置，即解决方案正在运行“测试”，但我的新项目只有调试和发布的默认配置。

进入配置管理器并检查解决方案中的所有项目是否具有相同的配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T16:08:32.647

如果您正在查找构建日志，则默认将其输出到控制台。以下是捕获控制台输出的方法：

```
 var stringWriter = new StringWriter();
        try
        {
            // Build log is sent to console, redirect output to StringWriter
            Console.SetOut(stringWriter);
            _host.Start();
        }
        catch (ApplicationException ex)
        {
            throw new Exception("Build failed. Output: " + stringWriter, ex);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T09:54:39.180

我在尝试让 SpecsForMvc 在 Bamboo 远程构建代理上工作时遇到了完全相同的问题。[Matt Honeycutt 的](https://stackoverflow.com/users/32353/matt-honeycutt) [回答](https://stackoverflow.com/a/13895886/4030103)为我指明了正确的方向。我只需要在运行代理的 VM 上安装[MS Web Deploy 3.5即可修复此错误。](http://www.iis.net/downloads/microsoft/web-deploy)

我还需要在同一个 VM 上安装 IIS Express 8 以允许 SpecsForIntegrationHost 在其中启动一个站点。

[arni 的](https://stackoverflow.com/users/836982/arni) [回答](https://stackoverflow.com/a/23764930/4030103)帮助我更好地诊断问题，但后来也给我带来了一些问题，当我在尝试从测试的应用程序连接到远程 SQL Server 时遇到权限问题。ApplicationException catch 块没有捕获这些异常，因为它们属于 SystemException 类。它们由全局异常处理程序处理，绕过了应该关闭集成主机的测试清理结束。这使得每个测试的 IIS Express 实例都在后台运行。（因为我无法评论 arni 的回答，所以我在这里添加了我修改后的代码）

```
var stringWriter = new StringWriter();
    try
    {
        // Build log is sent to console, redirect output to StringWriter
        Console.SetOut(stringWriter);
        _host.Start();
    }
    catch (Exception ex)
    {
        _integrationHost.Shutdown();
        throw new Exception("Build failed. Output: " + stringWriter, ex);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T20:25:05.257

看起来错误实际上来自 MSDeploy，SpecsFor.Mvc 通过 MSBuild 在内部使用它来发布您的站点以进行测试。这是直接来自 MSDeploy 的相同错误：[Web 部署任务失败。（“Microsoft.Web.Deployment.DeploymentManager”的类型初始化程序引发了异常。）](https://stackoverflow.com/questions/6351289/web-deployment-task-failed-the-type-initializer-for-microsoft-web-deployment)。不幸的是，似乎没有解决方案。

您可以尝试手动部署您的网站吗？这个命令行应该可以解决问题：

msbuild /p:DeployOnBuild=true;DeployTarget=Package;_PackageTempDir=;AutoParameterizationWebConfigConnectionStrings=false;Platform=AnyCPU

让我知道这是否有效，或者它是否因类似错误而爆炸。

# javascript - 随机数，如果，否则如果

> ID：13536695
> 
> 赞同：-1
> 
> 时间：2012-11-23T23:06:34.227
> 
> 标签：javascript

我正在编写这样的 JavaScript 代码：

```
function rollTrigger() {
var roll = Math.round(Math.random()*999999999+1);
var result = document.getElementById("result");

if (roll <= 50900000) {
    result.innerHTML = "Category 0";
    BoLPamount += 1;
    document.getElementById("boxlesserprizes").innerHTML = "Box of Lesser Prizes " + BoLPamount; 
    log.innerHTML += "<br />Trigger - win = true; Category 0"; //LOG        
} else if (roll <= 900000) {
    result.innerHTML = "Category A";
    log.innerHTML += "<br />Trigger - win = true; Category A"; //LOG
} else if (roll <= 360000) {
    result.innerHTML = "Category B";
    log.innerHTML += "<br />Trigger - win = true; Category B"; //LOG
} else if (roll <= 211890) {
    result.innerHTML = "Category C";
    log.innerHTML += "<br />Trigger - win = true; Category C"; //LOG
} else if (roll <= 109020) {
    result.innerHTML = "Category D";
    log.innerHTML += "<br />Trigger - win = true; Category D"; //LOG
} else if (roll <= 56505) {
    result.innerHTML = "Category E";
    log.innerHTML += "<br />Trigger - win = true; Category E"; //LOG
} else if (roll <= 34888) {
    result.innerHTML = "Category F";
    log.innerHTML += "<br />Trigger - win = true; Category F"; //LOG
} else if (roll <= 15574) {
    result.innerHTML = "Category G";
    log.innerHTML += "<br />Trigger - win = true; Category G"; //LOG
} else {
    result.innerHTML = "MEH";
    log.innerHTML += "<br />Trigger - win = false"; //LOG
};
document.getElementById("roll").innerHTML = roll; 
```

};

但它不能正常工作......例如，如果随机数是 40200000，那么它会按预期显示“类别 0”，但是即使随机数是 10，它仍然显示“类别 0”而不是“类别 G”。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T23:09:25.860

`if (roll <= 50900000)`
那么 10 小于 50900000，不是吗？
颠倒 if 语句的顺序，一切都应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:09:01.600

因为如果 (10 <= 50900000) 为真，它将进​​入第 10 个条件。

您必须指定范围。

```
if(roll > 900000 && roll <= 50900000) 
```

或从较低的条件开始直到最高

```
 if (roll <= 15574) 
 {
    result.innerHTML = "Category F";
    log.innerHTML += "<br />Trigger - win = true; Category F"; //LOG
 }
 else if (roll <= 34888) 
   {
     ... 
```

等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T23:10:16.753

您必须订购您的`if`测试，以便它们的顺序正确。如果他们都在使用`<=`，那么您需要首先比较最低值，然后再比较下一个更高的值，依此类推。否则，它会匹配比您想要的更高的数字。

就个人而言，我建议使用表格驱动的方法，而不是无数次的`if/else`测试。

```
var rollTests = [
    {value: 15574, resultHTML: "Category G", logHTML: "<br />Trigger - win = true", logHTML: "Category G"},
    {value: 34888, resultHTML: "Category F", logHTML: "<br />Trigger - win = true", logHTML: "Category F"},
    // the rest of the values here ordered by the comparison value ....
];

for (var i = 0, len = rollTests.length; i < len; i++) {
    if (roll <= rollTests[i].value) {
        result.innerHTML = rollTests[i].resultHTML;
        log.innerHTML = rollTests[i].logHTML;
        break;
    }
} 
```

或者更紧凑：

```
var rollTests = [
    {value: 15574, category: "G"},
    {value: 34888, category: "F"},
    // the rest of the values here ordered by the comparison value ....
];

var logHTML;    
for (var i = 0, len = rollTests.length; i < len; i++) {
    if (roll <= rollTests[i].value) {
        logHTML = "Category " + rollTests[i].category;
        log.innerHTML = logHTML;
        result.innerHTML = "<br />Trigger - win = true; " + logHTML;
        break;
    }
} 
```

# php - 从存储库类文件中逐行获取

> ID：13536698
> 
> 赞同：1
> 
> 时间：2012-11-23T23:07:19.993
> 
> 标签：php, oop

为简洁起见，我将简化我的示例；假设我有一个`index.php`文件，我在其中实例化存储库类，如下所示：

```
$itemRepos = new ItemRepository();
$allItems = $itemRepos->getAll(); 
```

在这个变量中，`$allItems`我已经从数据库中返回了所有记录，现在我可以遍历它们。

但是现在，我需要（由于内存问题）从数据库中逐一读取项目，当然，在`index.php`文件中我可以连接到数据库并使用这样的 while 循环，例如：

```
while ($row = mysql_fetch_row($result)){
    //do stuff
} 
```

并因此一一读取行，但我不想那样做，我想知道如何通过使用 OOP 原则来实现同样的事情，因此无需将数据库连接逻辑放入`index.php`文件中，并且通过（不知何故）把它放在 Repository 类中。

我确实认为为此已经存在某种模式或“某些东西”，所以请务必将我推向正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:13:05.723

这段代码在 OOP 中没有任何问题。

只需创建一个名为的新函数`getNext()`，它将调用`mysql_fetch_row()`并执行：

```
while ($row = $itemRepos->getNext()) {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T00:04:57.787

当您不想公开实现细节但仍希望能够迭代时，您应该使用`Iterator pattern`. 目的是提供一种统一的方式，让客户端可以迭代某些东西，同时保持底层实现的封装。

PDO 为结果集提供了一个迭代器，您无需编写任何代码。但是，如果您现在必须使用 mysql_* 扩展，您可以通过实现[Iterator](http://php.net/manual/en/class.iterator.php)来编写自己的迭代器。

您实际上可能会在手册中找到一些示例代码，用于制作用于封装 mysql_* 结果集的迭代器。

# dynamics-crm-2011 - 是否可以在对话框查询 CRM 数据步骤中查询 N:N 关系？

> ID：13536701
> 
> 赞同：0
> 
> 时间：2012-11-23T23:07:48.170
> 
> 标签：dynamics-crm-2011, dynamics-crm

我有一个名为 Department 的自定义实体，与 User 实体有 N:N 关系。我在部门的案例实体上有一个查找字段。我在 Department 字段的 onChange 事件中添加了一些 JavaScript，它将查询 Department 实体并获取与之关联的用户。如果只有 1 个用户，它会将案例上的“分配给”字段设置为该用户。如果有多个，它会启动一个对话框，让用户选择与部门关联的哪些用户应该分配案例。

在对话框中，我使用查询 CRM 数据步骤来获取与部门关联的用户，但我不知道如何。我认为在构建查询时，N:N 会在“相关”部分中有一个条目。部门有条目，但它们用于创建者、修改者和所有者用户。可能吗？有没有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:40:53.357

您需要使用 SOAP 调用来检索与 Department 关联的所有用户。对于每个 N:N 关系，都会有一个相交实体，您需要从系统自定义中的 N:N 关系中识别该相交实体名称，如下图所示。[在这里](http://charanmandya.blogspot.in/2012/05/microsoft-dynamics-crm-2011-javascript.html#getTeams)，我正在检索与用户关联的所有团队。以同样的方式，您可以通过传递部门 ID 来检索用户。

![在此处输入图像描述](../Images/79e0e7110b9a22ff660a5cbc0989c3cb.png)

注意：替换`" <q1:Operator>EqualUserId</q1:Operator>" +`为以下代码

```
" <q1:Operator>Equal</q1:Operator>" +
"<q1:Values>" +
"<q1:Value xsi:type=\"xsd:string\">" + _departmentId + "</q1:Value>" +
"</q1:Values>" + 
```

# php - 如何生成在定义的时间后过期的订阅系统？德鲁巴 7

> ID：13536702
> 
> 赞同：0
> 
> 时间：2012-11-23T23:07:48.280
> 
> 标签：php, drupal-7

您好我的互联网伙伴，我将再次需要您的帮助。

我正在尝试开发一个 Drupal 网站，其用户群会根据订阅类型支付不同的费用。

在定义的时间跨度后，订阅应到期，除非用户再次付费以维持对服务的访问；您建议我使用哪个模块来管理这些任务？我们试图避免使用内容类型，因为我们想使用 Drupal 用户核心系统，但这似乎几乎是不可能的。

任何帮助将不胜感激，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:20:09.280

您是在谈论用户对某些服务有不同订阅的能力吗？

第一个想法：我认为规则和 cron 的组合会帮助你解决这个问题？不过还在想……

# windows-8 - C++/CX：Platform::String 与 std::wstring

> ID：13536703
> 
> 赞同：3
> 
> 时间：2012-11-23T23:07:55.077
> 
> 标签：windows-8, stringbuilder, c++-cx

似乎 C++/CX 没有 StringBuilder 类或等效类，所以我认为我们将为此使用 STL？

这是我的*第一个*C++/CX 应用程序。用户在 TextBox 中输入一些文本，点击 ENTER 按钮，文本将附加到 TextBlock“控制台”。这段代码确实有效，但最佳实践是什么？

```
public ref class MainPage sealed
{
public:
    MainPage();

protected:
    virtual void OnNavigatedTo(Windows::UI::Xaml::Navigation::NavigationEventArgs^ e) override;
private:
    std::wstring _commandLine;
    std::wstring _consoleText;
    void Button_Click(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e);
}; 
```

...

```
void HelloConsole::MainPage::Button_Click(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
    this->_commandLine = this->InputLine->Text->Data();
    this->_commandLine.append(L"\n");
    this->_consoleText += this->_commandLine;
    this->InputLine->Text = "";
    this->OutputConsole->Text = ref new Platform::String(_consoleText.c_str());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:52:19.573

> 似乎 C++/CX 没有 StringBuilder 类或等效类，所以我认为我们将为此使用 STL？

是的，一般来说，您应该更喜欢在 C++ 代码中使用 C++ 类型。`Platform::String`仅在必须的地方使用 Windows 运行时类型（如），例如在跨 ABI 边界或跨组件边界传递数据时。

代码片段中的字符串处理看起来很好——复制到`std::wstring`for 突变是合理的。

# python - Python setup.py 指向 . 而不是 setup.py 中指定的目录？

> ID：13536710
> 
> 赞同：3
> 
> 时间：2012-11-23T23:08:37.407
> 
> 标签：python, setup.py

这是我当前的项目设置：

```
.
├── README.md
├── build
│   ├── bdist.macosx-10.8-intel
│   └── lib
├── dist
│   └── giordano-0.1-py2.7.egg
├── giordano.egg-info
│   ├── PKG-INFO
│   ├── SOURCES.txt
│   ├── dependency_links.txt
│   ├── not-zip-safe
│   └── top_level.txt
├── requirements.txt
├── setup.py
├── src
│   ├── giordano
│   └── spider
├── test.txt
└── venv
    ├── bin
    ├── include
    ├── lib
    └── share 
```

这是我的设置文件：

```
from setuptools import setup

setup(name='giordano',
  version='0.1',
  packages=['giordano'],
  package_dir={'giordano': 'src/giordano'},
  zip_safe=False) 
```

当我这样做`python setup.py install`时，我可以`import giordano`毫无问题地输入我的代码。

但是，当我这样做时`python setup.py develop`，这是控制台输出：

```
[venv] fixSetup$ python setup.py develop
running develop
running egg_info
writing giordano.egg-info/PKG-INFO
writing top-level names to giordano.egg-info/top_level.txt
writing dependency_links to giordano.egg-info/dependency_links.txt
reading manifest file 'giordano.egg-info/SOURCES.txt'
writing manifest file 'giordano.egg-info/SOURCES.txt'
running build_ext
Creating /Users/blah/Dropbox/projects/Giordano/venv/lib/python2.7/site-packages/giordano.egg-link (link to .)
Removing giordano 0.1 from easy-install.pth file
Adding giordano 0.1 to easy-install.pth file

Installed /Users/blah/Dropbox/projects/Giordano
Processing dependencies for giordano==0.1
Finished processing dependencies for giordano==0.1 
```

我注意到鸡蛋链接到`.`而不是`src/giordano`。我不能再`import giordano`在我的代码中了。

任何想法为什么发展不尊重`package_dir`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:59:16.687

尝试使用“giordano”：“src”。distutils/distribute 在您指定的目录中查找模块或包名称；在您粘贴的代码中，该值是一个目录太深。

# iphone - 生成随机下降图像（xcode）

> ID：13536720
> 
> 赞同：1
> 
> 时间：2012-11-23T23:09:27.937
> 
> 标签：iphone, objective-c, xcode

我想创建从屏幕顶部掉落到底部消失的随机图像。到目前为止，我已经能够在固定的生成点（中心）使 1 张图像掉落，但我不确定如何在顶部的随机位置生成更多生成的图像（有点像降雪或降雨效果）。

这是我到目前为止所拥有的：

```
-(void) viewDidLoad {
    moveObjectTimer = [NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(moveObject) userInfo:nil repeats:YES]; }

-(void) moveObject {        // + means down and 5 is SPEED
    bird.center = CGPointMake(bird.center.x, bird.center.y +5); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:29:18.050

假设您在一个数组中有 10 张图像，然后随机选择任意 10 张图像，您会这样做；

int randomIndex rand()/RAND_MAX * 10 + 1;

然后在某种方法中，您可以将其设置为动画；

```
-(void) moveObject{
   int randomIndex = rand()/RAND_MAX * 10 + 1;
   UIImage *image = [self.myImages objectAtIndex:randomIndex];
   UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
  CGRect mainRect = CGRectMake(view.frame.size.width + image.size.width,view.frame.size.height - image.size.height,image.frame.size.width,image.size.height );
    imageView.frame mainRect;
    [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
        mainRect.frame.size.origin.x = 0;
        mainRect.frame.origin.y = 0;
        imageView.frame =mainRect;
    } completion:nil];
} 
```

您的 NSTimer 应该触发此方法，然后这将从您的图像中选择随机图像，这里我假设您在一个数组中拥有 10 个图像。然后，这将以 NSTimer 指定的指定时间间隔从右上角/右上角之外到左下角为图像设置动画。

# jquery - 使用AJAX提交hybridauth

> ID：13536721
> 
> 赞同：1
> 
> 时间：2012-11-23T23:09:28.720
> 
> 标签：jquery, ajax, jquery-mobile, hybridauth

我正在使用 Ajax 提交 hybridauth，但提交直接失败，有没有人尝试过这样的事情？请参阅下面的代码示例。

（login.php 未更改，但将结果发送到处理程序文件，该处理程序文件将结果发送回成功）

```
$(".socialClient").click(function(){
    var socID = $(this).attr("id");  //the ID for the social media provider image is the name of the provider
    $.ajax({
        type: "GET",
        url: "hybridauth/login.php",
            cache: false,
            data: {provider:socID},
        //enctype: "multipart/form-data",
        dataType: "text",
        success: function(data){
            //handle response, user info and such
        },
        error:function (xhr, ajaxOptions, thrownError){
            alert("Social media logon failed. Error code:" +thrownError);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:14:28.223

你能测试一下你在 login.php 文件中收到的内容吗？您可能已经尝试过，但是 JIC 编辑 login.php 以回显它收到的结果，如下所示：

LOGIN.PHP（在文件的最顶部）：

```
<?php
$p = $_POST['provider']; //this may not be your post variable name
echo $p;
die(); 
```

然后在你的 ajax 成功函数中，提醒自己你收到了什么：

```
success: function(data) {
    alert(data);
} 
```

了解您是否得到了您所期望的一个很好的第一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T16:56:25.437

由于身份验证需要将用户重定向到提供程序，因此它不适用于 AJAX 调用。后端脚本将在 Redirect 函数中 die()。

对于替代解决方案，请检查此方法：[https ://stackoverflow.com/a/29891358/1816603](https://stackoverflow.com/a/29891358/1816603)

# c - 在 C 中寻找完美数 - 编译错误

> ID：13536723
> 
> 赞同：0
> 
> 时间：2012-11-23T23:09:36.230
> 
> 标签：c, compiler-errors, double

我正在编写一个简单的程序，可以找到给定范围内的完美数字。这是我所拥有的：

```
#include<sys/types.h>
#include<sys/time.h>
#include<time.h>
#include<errno.h>
#include<fcntl.h>
#include<signal.h>
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<strings.h>    
#include<unistd.h>

void Compute(double range);

int main(int argc, char** argv[])
{
  double range = 40000000;

  printf("range: %f\n", range);

  Compute(range);
}

void Compute(double range)
{
  double numbers[range];

  double total = 0;
  double sum = 0;
  double num;
  double j;

  for(num = 1; num < range; num++){
    sum = 0;

    for(j = 1; j < num; j++){
      if((num % j) == 0){
        sum+=j;
      }
    }

    if(sum == num){
      numbers[total] = sum;
      total++;
    }

  } 

  printf("Total: %f\n", total);

  for(j = 0; j < total; j++){
    printf("%f \n", numbers[j]);
  }

} 
```

但是，当我尝试编译程序时，该方法`error: expression must have integral type`中几乎所有的操作都会出错。`Compute()`它适用于整数数据类型，但不适用于`double`. 我正在使用英特尔 C 编译器。任何想法为什么编译器抱怨？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T23:10:55.843

您不能创建具有浮点大小的数组

```
double numbers[range]; 
```

参数必须是整数。想象一下如果`range`是 2.5 - C 将不允许 2.5 双打的数组。数组必须有整数个元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T23:13:20.403

我不确定你知道什么`double`意思。

例如：您究竟希望`double numbers[1.23];`做什么？*（反问）*

该`%`运算符还需要整数操作数（您可以使用它`fmod()`来获得小数模数，但我怀疑这就是您想要的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:13:23.703

你的数组：

```
double numbers[range]; 
```

需要数组的整数大小。使用演员表，例如。

```
double numbers[(int)range]; 
```

与双变量的其他用途相同。

# ruby-on-rails - Rails 手动从裸域重定向

> ID：13536724
> 
> 赞同：5
> 
> 时间：2012-11-23T23:09:38.063
> 
> 标签：ruby-on-rails, heroku, dns

因此，由于我的托管服务提供商（Heroku）的限制，目前我正在从裸域手动引导。一切正常。问题是，如果用户访问 mydomain.com/route，将发出重定向回 www.mydomain.com 而没有 /route。我将如何重新附加路线，但仍重定向到 www。?

```
class ApplicationController < ActionController::Base
protect_from_forgery
before_filter :ensure_domain
APP_DOMAIN = 'www.domain.com'
def index
end
def ensure_domain
    if Rails.env.production?
        if request.env['HTTP_HOST'] != APP_DOMAIN
            redirect_to "http://#{APP_DOMAIN}", :status => 301
        end
    end
end
end 
```

**编辑**

我从我的 ApplicationController 中删除了上面的代码，并选择使用hurikhan77 建议的[折射 gem ，这解决了我的问题。](http://github.com/joshsusser/refraction)

这是我使用的 refraction_rules.rb。

```
Refraction.configure do |req|
  if req.host == "domain.com"
    req.permanent! :host => "www.domain.com"
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:42:01.387

我建议为此使用折射宝石：[http ://rubygems.org/gems/refraction](http://rubygems.org/gems/refraction)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T13:10:39.280

理想情况下，您会在 Web 服务器配置中设置类似的规则。请求会变得更快，因为它们甚至不会到达 rails 堆栈。也不需要向您的应用程序添加任何代码。

但是，如果您在某些受限环境中运行，例如 heroku，我建议您添加机架中间件。（仅供参考，不能保证此特定代码是否没有错误）

```
class Redirector
  SUBDOMAIN = 'www'

  def initialize(app)
    @app = app
  end

  def call(env)
    @env = env
    if redirect?
      redirect
    else
      @app.call(env)
    end
  end

private

  def redirect?
    # do some regex to figure out if you want to redirect
  end

  def redirect
    headers = {
      "location" => redirect_url
    }
    [302, headers, ["You are being redirected..."]] # 302 for temp, 301 for permanent
  end

  def redirect_url
    scheme = @env["rack.url_scheme"]

    if @env['SERVER_PORT'] == '80'
      port = ''
    else
      port = ":#{@env['SERVER_PORT']}"
    end

    path = @env["PATH_INFO"]

    query_string = ""
    if !@env["QUERY_STRING"].empty?
      query_string = "?" + @env["QUERY_STRING"]
    end

    host = "://#{SUBDOMAIN}." + domain # this is where we add the subdomain
    "#{scheme}#{host}#{path}#{query_string}"
  end

  def domain
    # extract domain from request or get it from an environment variable etc.
  end
end 
```

你也可以单独测试整个事情

```
describe Redirector do
      include Rack::Test::Methods

      def default_app
        lambda { |env|
          headers = {'Content-Type' => "text/html"}
          headers['Set-Cookie'] = "id=1; path=/\ntoken=abc; path=/; secure; HttpOnly"
          [200, headers, ["default body"]]
        }
      end

      def app()
        @app ||= Rack::Lint.new(Redirector.new(default_app))
      end

      it "redirects unsupported subdomains" do
        get "http://example.com/zomg?a=1"
        last_response.status.should eq 301
        last_response.header['location'].should eq "http://www.example.com/zomg?a=1"
      end
     # and so on
end 
```

然后您只能将其添加到生产环境（或任何首选环境）

```
# production.rb
# ...
config.middleware.insert_after 'ActionDispatch::Static', 'Redirector' 
```

如果你想在开发中测试它，将同一行添加到 development.rb 并在你的 hosts 文件（通常是 /etc/hosts）中添加一条记录，将 yoursubdomain.localhost 视为 127.0.0.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:37:07.600

不确定这是否是最佳解决方案，但您可以正则表达式`request.referrer`并在 .com 之后提取任何内容并将其附加到`APP_DOMAIN`

或者我想你可以在第一个之前取出所有东西。`request.env['HTTP_HOST']`添加替换为假设`http://www.`您不打算使用子域。

# spotify - 使用 Spotify Apps API 制作播放列表协作

> ID：13536731
> 
> 赞同：2
> 
> 时间：2012-11-23T23:10:34.687
> 
> 标签：spotify

是否可以使用 Spotify Apps API 使播放列表协作？

javascript 中的 Playlist 对象具有 Collaborative 属性，但我认为这仅用于检查当前的协作状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:01:10.633

是的，您将属性设置为 true，它将是一个协作播放列表，但我想您必须拥有该播放列表的权限才能使其正常工作。我试过这个，它适用于我创建的播放列表。

```
p = models.Playlist.fromURI('spotify-uri');
p.data.collaborative = true; 
```

在此之后，播放列表在我的客户端中显示为协作播放列表。

# rrdtool - rrdtool 获取值与输入的注释相同

> ID：13536735
> 
> 赞同：0
> 
> 时间：2012-11-23T23:11:23.957
> 
> 标签：rrdtool

**为什么用于更新 rrd 的值与获取的值不同**

我用它来更新：`1353702000:2000`

当我获取时我得到了这个：`1353702000: 1.6666666667e+00`

*   有没有办法获取输入的数字？
*   有没有办法格式化时间戳和数字？

**细节：**

我创建了这个数据库：

`rrdtool create datafile.rrd DS:packets:ABSOLUTE:900:0:10000000 RRA:AVERAGE:0.5:1:9600 RRA:AVERAGE:0.5:4:9600 RRA:AVERAGE:0.5:24:6000`

我用这个时间戳和值更新了数据库：

`rrdtool update datafile.rrd 1353702000:2000`

我用这个获取数据库

`rrdtool fetch datafile.rrd AVERAGE -r 90 -s -1h`

我得到了这个

```
1353700800: nan
1353701100: nan
1353701400: nan
1353701700: 1.6666666667e+00
1353702000: 1.6666666667e+00
1353702300: 3.3333333333e+00
1353702600: 3.3333333333e+00
1353702900: 6.6666666667e+00
1353703200: nan
1353703500: nan
1353703800: nan
1353704100: nan
1353704400: nan 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T01:37:49.997

获得这些值的原因有两个。

首先，您为数据键入“绝对”，这意味着它将除以自上次更新以来的时间以给出每秒速率。如果您希望按原样存储值，请使用类型 GAUGE。如果该值不断增加（例如使用 SNMP 网络接口数据包计数器），则使用 COUNTER 获取变化率。

其次，数据规范化。如果样本不在间隔边界上（IE，在这种情况下，时间戳 mod 300 = 0），它们将被调整以适应时间。为避免这种情况，请在间隔边界上提交带有时间戳的样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:13:55.107

用作`GAUGE`数据存储类型，而不是`ABSOLUTE`

# php - PHP函数内的PDO查询

> ID：13536736
> 
> 赞同：1
> 
> 时间：2012-11-23T23:11:42.147
> 
> 标签：php, function, pdo

我正在制作这个函数，其中应该读取数组的一部分，并且每个值都包含一个我想要执行 PDO 查询的数字。这是我的以下代码：

```
function get_topics($array) {

$top = 20; $base = 0;
foreach ($array as $key => $value) {

$getData = $dbc->prepare('SELECT * FROM topics WHERE id = :id LIMIT 1'); 
$getData->execute(array(':id' => $value));

while($row = $getData->fetch()) {

$potential_topic_img = 'members/topic_' . $value . '.jpg'; 
if (file_exists($potential_topic_img)) { $topic_img = $potential_topic_img; } else {      
$topic_img = 'members/0.jpg'; } 

$name = $row['name'];
echo '<div class="topic_div"><img src="' . $topic_img . '" width="80"><br /><span 
style="font-size:10pt;">' . $name . '</span></div>';

} if (++$base == $top) break;

}

}

echo get_topics($some_array); 
```

但我得到的只是一个错误告诉这个：“**解析错误：语法错误，/home/......中的意外T_VARIABLE** ”，它说问题出在这一行：

```
$getData->execute(array(':id' => $value)); 
```

我做错了什么？

**编辑**

我删除了一些代码，剩下的代码运行良好：

```
function get_topics($array) {

foreach ($array as $key => $value) {

echo $value;

  }
}

echo get_topics($user_likes_array); 
```

所以不是 $value 是空的，问题似乎出在我一开始提到的那一行，因为当我将所有内容移到该行下方时，错误消息不会改变，但是当我移动该特定行时它确实会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:01:34.193

`foreach ($array as $key => $value)``$value`在每次迭代时将当前元素的键分配给变量。

尝试

```
$getData->execute(':id',$value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T23:28:39.473

您发布的代码是正确的，您确定您在正确的文件中。

我刚刚处理了您的代码并整理了布局并通过我的 PHP 测试批次运行了它，这是正确的

**测试批次的输出**

```
G:\Others\Programs\phpApplications>SET PHP_PATH=../php/php.exe

G:\Others\Programs\phpApplications>SET FILE_PATH=../phpApplications/test2.php

G:\Others\Programs\phpApplications>SET LOOP=FALSE

G:\Others\Programs\phpApplications>"../php/php.exe" "../phpApplications/test2.ph
p"

G:\Others\Programs\phpApplications>pause
Press any key to continue . . . 
```

**我使用的代码**

```
<?php

function get_topics($array) {
    $top = 20; 
    $base = 0;
    foreach ($array as $key => $value) {
        $getData = $dbc->prepare('SELECT * FROM topics WHERE id = :id LIMIT 1'); 
        $getData->execute(array(':id' => $value));
        while($row = $getData->fetch()) {
            $potential_topic_img = 'members/topic_' . $value . '.jpg'; 
            if (file_exists($potential_topic_img)) { $topic_img = $potential_topic_img; } else {     
            $topic_img = 'members/0.jpg'; } 

            $name = $row['name'];
            echo '<div class="topic_div"><img src="' . $topic_img . '" width="80"><br /><span     
            style="font-size:10pt;">' . $name . '</span></div>';
        }
        if (++$base == $top) break;
    }
} 
$some_array = array();
echo get_topics($some_array); 
```

如果在将 pause 命令发送到 CMD 之前出现错误，您会看到它会显示错误

**证明我的测试** 人员为此工作我刚刚评论了`//`这里`$some_array = array()`是结果

```
G:\Others\Programs\phpApplications>SET PHP_PATH=../php/php.exe

G:\Others\Programs\phpApplications>SET FILE_PATH=../phpApplications/test2.php

G:\Others\Programs\phpApplications>SET LOOP=FALSE

G:\Others\Programs\phpApplications>"../php/php.exe" "../phpApplications/test2.ph
p"

Warning: Invalid argument supplied for foreach() in G:\Others\Programs\phpApplic
ations\test2.php on line 6

G:\Others\Programs\phpApplications>pause
Press any key to continue . . . 
```

# mysql - MYSQL设计查询问题

> ID：13536739
> 
> 赞同：0
> 
> 时间：2012-11-23T23:13:08.373
> 
> 标签：mysql

我正在尝试创建一个查询，显示所有被罚款但没有驾驶执照的人的姓名和地址。（所以不要出现在驾驶执照表中）我将如何包含未出现在表中的东西？

这是我的桌子

```
CREATE TABLE offences (
oOffenceID VARCHAR (30),
oDescription VARCHAR (200),
oMaximumFine INT (10),
CONSTRAINT o_pk
PRIMARY KEY (oOffenceID)
);

CREATE TABLE drivers (
dPersonID VARCHAR (30),
dLicenseNumber INT (20),
dLicenseRemoved ENUM('yes','no'),
dExpiryDate DATE,
CONSTRAINT d_pk
PRIMARY KEY (dLicenseNumber),
CONSTRAINT d_fk
FOREIGN KEY (dPersonId)
REFERENCES People (pPersonID)
);

CREATE TABLE people (
pPersonID VARCHAR (30),
pName VARCHAR (30),
pAddress VARCHAR (50),
pNIN VARCHAR (30),
CONSTRAINT p_pk
PRIMARY KEY (pPersonID)
);

CREATE TABLE vehicle (
vOwnerID VARCHAR (30),
vColour VARCHAR (30),
vModel VARCHAR (30),
vMake VARCHAR (30),
vVehicleID VARCHAR (30),
CONSTRAINT v_pk
PRIMARY KEY (vVehicleID),
CONSTRAINT v_fk
FOREIGN KEY (vOwnerID)
REFERENCES People (pPersonID)
);

CREATE TABLE fines (
fFineID INT (30) AUTO_INCREMENT,
fVehicleID VARCHAR (30),
fPersonID VARCHAR (30),
fTime DATE,
fAmount INT (10),
fOfficerStatement VARCHAR (500),
fOffenceID VARCHAR (30),
CONSTRAINT f_pk
PRIMARY KEY (fFineID),
CONSTRAINT f_fk
FOREIGN KEY (fVehicleID)
REFERENCES vehicle (vVehicleID),
CONSTRAINT f_fk1
FOREIGN KEY (fPersonID)
REFERENCES people (pPersonID),
CONSTRAINT f_fk2
FOREIGN KEY (fOffenceID)
REFERENCES offences (oOffenceID)
); 
```

到目前为止我有

```
SELECT DISTINCT pName, pAddress
FROM people, fines, drivers
WHERE 
pPersonID <> dPersonID
AND
pPersonID = fPersonID
AND
fAmount > 0 
```

但这并没有删除所有必要的数据。任何使用正确工具的帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:17:02.473

使用 LEFT JOIN 并检查 NULL 值

例子：

```
SELECT *
FROM
table_A
LEFT JOIN table_B
ON table_A.id = table_b.a_id
WHERE table_B.a_id IS NULL 
```

# java - 关于如何设计程序的面试任务，它将与大数据一起使用

> ID：13536745
> 
> 赞同：4
> 
> 时间：2012-11-23T23:13:23.223
> 
> 标签：java, algorithm, design-patterns

我昨天面试，我有这样的问题 - 有**服务器**和**数据库**，存储**大文本**信息（每个文本可以>10 Mb）。对数据库的任何查询都是**昂贵的**。您需要设计一个程序（服务器），它将接受一个文本并说 - 这个文本是否在数据库中。

我要求做出这样的决定 -对每个文本进行良好的**哈希处理。**然后制作一**组**所有哈希。如果输入文本**的散列不在集合中**- 所以没有这样的文本，否则 - 转到数据库并尝试通过散列和更深的相等来查找此文本。减去这样的决定，它可能是数据库中的**很多文本**，所以设置会有点大=）可能你知道如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:41:32.537

正如评论中所讨论的，基本概念是通过消除不可能在数据库中的查询文本来减少对数据库的查询次数。

正如您所建议的，散列是一种很好的方法 - 如果您使用良好的散列函数（即碰撞概率低），那么您将永远不需要实际比较文本，因为您（[几乎可以肯定](http://preshing.com/20110504/hash-collision-probabilities)）永远不会得到误报.

散列的一种变体（如果内存成为问题）是使用[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)：“一种节省空间的概率数据结构，用于测试元素是否是集合的成员。” 这种方法比普通散列使用的内存少得多，但代价是一些误报（即有时您需要将文本与数据库进行比较以确保您是否有匹配项）。布隆过滤器可以让您调整内存和误报率之间的权衡。它们用于 NoSQL 数据库，例如[BigTable](http://en.wikipedia.org/wiki/BigTable)和[Apache Cassandra](http://cassandra.apache.org/)。

**正如大卫施瓦茨正确指出的那样**更新，哈希函数***确实很重要，特别是在查询**的*重要属性位于数据库中的情况下 - 请参阅下面评论中的讨论。同样的问题也适用于 Bloom 过滤器，当您希望缩小对一小部分文件的磁盘访问范围（例如）但由于误报而不能完全消除磁盘/数据库访问时，它是理想的选择。我最初以速度基准的方式提到了 MurmurHash3，但因为它是非加密的，所以不适合这个问题。过去当我实际实现这样的方法时，我使用了 SHA1，它是加密的。**

# c - 非调试配置中未使用的 var

> ID：13536746
> 
> 赞同：1
> 
> 时间：2012-11-23T23:13:42.187
> 
> 标签：c, dry

我经常写这样的代码：

```
int result = someMethod(arg1,arg2,...);
assert(result==0) 
```

假设 assert() 的定义如下：

```
#ifdef DEBUG
#define assert(e) if(!e) printf("something's wrong");
#else
#define assert(...)
#endif 
```

第一段代码会给出关于“结果”是未使用的变量的警告。

我可以做类似的事情：

```
#ifdef DEBUG
    int result = someMethod(arg1,arg2,...);
#else
    someMethod(arg1,arg2,...);
#endif
assert(result==0) 
```

但这对我来说似乎并不枯燥......

我还能做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:17:15.200

```
int result = someMethod(arg1,arg2,...);
assert(result==0);
(void)result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:22:26.083

一个宏喜欢`assertion_code`仅在调试配置中启用某些代码片段。

```
#if defined(NDEBUG)
#define assertion_code(v)
#else
#define assertion_code(v) v
#endif 
```

现在你可以写

```
assertion_code(int result =) expr();
assert(result == 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:19:38.447

空格和换行符与编译器无关，所以......

```
#ifdef DEBUG
    int result =
#endif
    someMethod(arg1,arg2,...);
assert(result==0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T23:28:40.267

有明确的方法：

```
static inline void debug(const char *msg)
{
#ifdef DEBUG
    printf("%s\n", msg);
#else
    (void)msg;
#endif
} 
```

然后：

```
if (someMethod(arg1,arg2,...) != 0) {
    debug(message);
} 
```

当出现问题时，您很有可能不想像往常一样继续，所以显式条件子句可能无论如何都会有用。或者您打算在关闭 DEBUG 时忽略错误？

# registry - 检测是否安装了 Excel 2013

> ID：13536751
> 
> 赞同：0
> 
> 时间：2012-11-23T23:14:12.060
> 
> 标签：registry, excel-2013

可以通过检查注册表中是否存在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Excel\InstallRoot 来检测 Excel 2010。

Excel 2013 似乎 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\15.0\Excel\InstallRoot 不起作用。

如何检测是否安装了 Excel 2013？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:20:36.003

此处概述的方法：[在哪里找到 Excel 2007 的安装位置的可靠注册表项？](https://stackoverflow.com/questions/244517/where-is-a-reliable-registry-key-to-find-install-location-of-excel-2007)仍然有效。

Office 2013 允许您在安装其余 Office 的同时开始使用办公套件中的应用程序。只有在完全安装 Office 2013 后，相同的密钥才有效。

# javascript - PhantomJS 单击页面上的链接

> ID：13536752
> 
> 赞同：10
> 
> 时间：2012-11-23T23:14:14.563
> 
> 标签：javascript, phantomjs

我已经编写了 PhantomJS 应用程序的某些部分。我正在一个网站上进行解析，我在该网站上将用户名和密码写入公式。在此之后，我必须单击一个链接。而我收到此错误：

```
TypeError: 'undefined' is not a function (evaluating 'myLink.click()')

  phantomjs://webpage.evaluate():11
  phantomjs://webpage.evaluate():22
  phantomjs://webpage.evaluate():22 
```

这是我的 PhantomJS 代码：

```
if(document.getElementById("m_Content_submitbtn2").getAttribute('data-role') == "button"){
        var myLink = document.getElementById("m_Content_submitbtn2");   
    myLink.click();
} 
```

这是我的链接：

```
<div class='button'><a href="#" data-role="button" tabindex='0' onclick='WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;m$Content$submitbtn2&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, true)); return false;' id="m_Content_submitbtn2">Log ind</a></div>&nbsp; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T01:26:12.870

您正在尝试在默认情况下并非所有浏览器都支持`click()`的元素上使用该方法。`<a>`而是尝试使用类似[这样](https://stackoverflow.com/a/2706236/684353 "模拟点击 Javascript @ StackOverflow")的东西，而不是`myLink.click();`你将不得不做的事情`eventFire(myLink, 'click');`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T00:28:14.010

或者包括 jQuery 并执行以下操作：

```
var page = require('webpage').create();
page.open('http://www.sample.com', function() {
  page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", function() {
    page.evaluate(function() {
      $("button").click();
    });
    phantom.exit()
  });
}); 
```

# sql - 多个字段的完全外连接

> ID：13536753
> 
> 赞同：0
> 
> 时间：2012-11-23T23:14:19.347
> 
> 标签：sql, sqlite, outer-join

我有几张来自不同来源和不同引用指标的学术期刊排名表。我想将它们组合在一个表中，按日志聚合数据。

例如，第一个表有列：

```
ISSN1 ISSN2 Journal_Name_1 Impact_Factor 
```

第二个表有列

```
ISSN3 ISSN4 ISSN5 Journal_Name_2 Citations 
```

期刊名称因数据源而异，任何期刊都可能有 0 个或多个 ISSN 号。我想做的是创建一个带有列的新表

```
ISSN1 ISSN2 ISSN3 ISSN4 ISSN5 Journal_name_1 Journal_Name_2 Impact_factor Citations 
```

包括表 1 或表 2 中列出的所有期刊，如果条件满足，则将第一个表中的一行与第二个表中的一行合并

```
( Journal_Name_1 = Journal_Name_2 ) OR ( at least one of ISSN1 or ISSN2 is equal to at least one of ISSN3, ISSN4, ISSN5) 
```

创造这种结果的最有效方法是什么？

（目前数据在 CSV 文件中，我可以使用 sqlite/mysql/postgresql/任何其他 DBMS）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:32:18.957

用于播放的[SQL Fiddle 。](http://www.sqlfiddle.com/#!2/f2243/5/0)

```
select t1.*, t2.*
from t1
left join t2 on (journal_name1 = journal_name2)
                or (issn1 in (issn3, issn4, issn5))
                or (issn2 in (issn3, issn4, issn5))
union all
select t1.*, t2.*
from t1
right join t2 on (journal_name1 = journal_name2)
                 or (issn1 in (issn3, issn4, issn5))
                 or (issn2 in (issn3, issn4, issn5)); 
```

# c# - jquerymobile 应用程序多页文档不呈现所有页面

> ID：13536757
> 
> 赞同：0
> 
> 时间：2012-11-23T23:14:56.713
> 
> 标签：c#, jquery, jquery-mobile, asp.net-mvc-4

我有一个 jquerymobile 多页文档。有了这个布局

```
@using ParadigmaNet.Infraestructure;
<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width" />
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="stylesheet" href="@Url.Content("~/css/ParadigmaNTouch.css")" />
    @Styles.Render("~/Content/mobileCss", "~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
 </head>
 <body>

    @RenderBody()

    @Scripts.Render("~/bundles/jquery", "~/bundles/jquerymobile")
    @Scripts.Render("~/Scripts/paradigmaN_Ajax.js")
    <script type="text/javascript">
        var Wres = $(window).width();
        var Hres = $(window).height();
        document.cookie = "ScreenRes=" + Wres + "x" + Hres;
    </script>
    if (IsSectionDefined("scripts"))
    {
        @RenderSection("scripts", false)
    }
 </body>
</html> 
```

还有一个有两页的文件

```
@model ParadigmaNet.Areas.Documentos.Models.Merlin_MovimientoDocumentosFacturacion_Enc 
@using ParadigmaNet.Infraestructure
@using ParadigmaNet.Areas.Items.Models
@using ParadigmaNet.Areas.Documentos.Models
@using ParadigmaNet.Areas.Items.Controllers;

@{
    Layout = "~/Views/Shared/_LayoutMobile.cshtml";
}

@*Pagina principal de pedidos*@
<div id="DocumentoPedidoPrincipal" data-role="page" data-theme="b">
    <div data-role="header" data-position="fixed" >
        @Html.ActionLink("Cancelar", "DocsCancelar", "Docs", new { area = "Documentos" }, new { StrIdDocumento = "", data_icon="delete" })
        <h1 id="NombreItem">Ubicacion: @SessionBag.Current.IntIdUbicacion</h1>
        @Html.ActionLink("Grabar", "DocsGuardar", "Docs", new { area = "Documentos", StrIdDocumento = SessionBag.Current.StrIdDocumento }, new { data_icon="check" })
        <div style="padding:2px;">
            @if (ViewBag.ParaEdicion)
            {
                @MyHelpers.menu("MenuItemEnPedido", new System.Collections.ArrayList { @Html.ActionLink("Detalle", "DocsDetalle", "Docs", new { area = "Documentos", StrIdDocumento = SessionBag.Current.StrIdDocumento }, new { @class = "no-Ajax ui-btn ui-btn-up-a" }) })
            }
            else
            {
                string detalle = "<a id=" + ParadigmaNTouchHelpers.quote("MostrarDetallePedido") + " href=" + ParadigmaNTouchHelpers.quote("#") + " onclick=" + ParadigmaNTouchHelpers.quote("mostrarDetallePedido(true);") + " data-role=" + ParadigmaNTouchHelpers.quote("button") + " data-theme=" + ParadigmaNTouchHelpers.quote("e") + ">";
                string condiciones = "<a id=" + ParadigmaNTouchHelpers.quote("ItemCondiciones") + " href=" + ParadigmaNTouchHelpers.quote("#CondicionesDocumento") + " data-role=" + ParadigmaNTouchHelpers.quote("button") + " data-theme=" + ParadigmaNTouchHelpers.quote("e") + ">Condiciones</a>";
                @MyHelpers.menu("MenuItemEnPedido",
                new System.Collections.ArrayList 
                { 
                       @Html.ActionLink("Adiciones", "DocsDetalle", "Docs", new { area = "Documentos", StrIdDocumento = SessionBag.Current.StrIdDocumento }, new { data_role="button", data_ajax = "false" ,data_theme="a" , id="ItemAdiciones" , @class="ui-disabled"})
                      ,@Html.ActionLink("Componentes", "DocsDetalle", "Docs", new { area = "Documentos", StrIdDocumento = SessionBag.Current.StrIdDocumento }, new { data_role="button", data_ajax = "false" ,data_theme="c" , id="ItemComponentes" , @class="ui-disabled"})
                      ,@MvcHtmlString.Create(condiciones) //@Html.ActionLink("Condiciones", "", "", new {}, new { data_role="button", data_ajax = "false" ,data_theme="e" , id="ItemCondiciones" , @class="ui-disabled" , onclick="mostrarCondiciones(true)"})
                      ,@Html.ActionLink("Eliminar", "DocsDetalle", "Docs", new { area = "Documentos", StrIdDocumento = SessionBag.Current.StrIdDocumento }, new { data_role="button", data_ajax = "false" ,data_theme="d" , id="ItemEliminar" , disable="true",@class="ui-disabled"})
                      ,@Html.ActionLink("Detalle", "", "", new {} , new { data_role="button", id = "MostrarDetallePedido", data_ajax = "false" ,data_theme="b", onclick="mostrarDetallePedido(true)"})
                }
                , 1, "c")
            }
        </div>
    </div>
    <div id="BodyContent" data-role="content" data-theme="a" style="height:auto; min-height:90%; width:100%;position:absolute;overflow:visible;">
        <div id="LineasTouchContainer">
             @ParadigmaNTouchHelpers.TouchContainer(ViewBag.LineasList, ViewBag.LineasTouchContainer);
        </div>

        <div id="ItemsTouchContainer">
            @ParadigmaNTouchHelpers.TouchContainer(ViewBag.ItemsList, ViewBag.ItemsTouchContainer)
        </div>

        <div id="GruposTouchContainer">
        </div>

        <div id="QuickList">
            @ParadigmaNTouchHelpers.TouchContainer(ViewBag.QList, ViewBag.QuickListAccess)
        </div>

        <div data-role="collapsible-set" data-mini="true" data-inset="true" data-filter="true" id="DetalleDocumento" class="ParadigmaNDetallePedidoHide">
            <div data-role='button' onclick="mostrarDetallePedido(false)" data-theme="b">Ocultar Detalle</div>
            <div data-role="collapsible-set" data-mini="true" data-inset="true" data-filter="true" id="DetallePedidoRegistros">
                @if (1==1){
                    Merlin_MovimientoDocumentosFacturacion_Enc DatosDoc = (Merlin_MovimientoDocumentosFacturacion_Enc)SessionBag.Current.DocEditar;
                    <div data-role="collapsible" data-collapsed="false">
                        <h3>Datos del Pedido</h3>
                        Abierto por @DatosDoc.StrUsuarioGenera<br />
                        A las @DatosDoc.DatFechaDocumento<br />    
                        Mesa: @DatosDoc.IntIdMesa
                     </div>        
                 }
            </div>
            @foreach (Merlin_Movimientos_Pedidos Item in SessionBag.Current.DocEditar.Merlin_MovimientoDocumentos_Pedidos_Enc.Merlin_Movimientos_Pedidos)
            {
                Html.RenderPartial("DocsDetalleTransaccionPedido", Item);
            }
        </div>
    </div>        
</div>

@*Pagina de condiciones*@
<div id="CondicionesDocumento" data-role="page" data-theme="b">
    <div data-role="header" data-position="fixed" >
        <a href="#" data-icon="home" onclick="mostrarCondiciones(false)">Volver</a> 
        <h1 id="TituloCondiciones">Editando condiciones</h1>
        @if (1 == 1)
        {
           <a>Hola Mundo</a>
        }
    </div>
    <div data-role="content" data-theme="a" style="height:auto; min-height:90%; width:100%;position:absolute;overflow:visible;">
        <div class="ui-grid-a">
            <div class="ui-block-a" style="width:50%; top:1em; position:relative;left:0em;" data-theme="a" >
                <ul id ="CondicionesDocumentoDisponibles" data-role="listview" data-filter="true" data-inset="true">
                </ul>
            </div>
            <div class="ui-block-b" style="width:48%;position:relative; left:1%;">       
                <ul id ="CondicionesDocumentoSeleccionadas" data-role="listview" data-filter="false" data-inset="true" style="left:51%;top:1em;postion:relative;" >
                </ul>
            </div>       
        </div>
    </div>
</div>

@section scripts {
    <script type="text/javascript">
        $('#CondicionesDocumentoDisponibles').listview();
        $('#CondicionesDocumentoSeleccionadas').listview();
        $('#DetalleDocumento').listview();
    </script>
} 
```

该文档由redirecttoaction() 调用到控制器方法中，直到这里一切正常。

问题是第二页 id="CondicionesDocumento" 不渲染到 _Layout

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:16:18.247

我没有看到页面“CondicionesDocumento”被加载或链接到的任何地方......我错过了什么吗？您需要明确链接到该页面：

```
<a href="#CondicionesDocumento">Second Page</a> 
```

或者通过 JavaScript 加载页面：

```
$.mobile.changePage("CondicionesDocumento); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:20:48.260

问题是 jQUery mobile 仅在第一次调用时呈现所有页面，其他调用仅呈现文档上的第一页。

在第一次调用之后，每个文档必须包含一页。

# java - 何时使用 Java GUI

> ID：13536758
> 
> 赞同：0
> 
> 时间：2012-11-23T23:15:25.953
> 
> 标签：java, user-interface, file-type

> **可能重复：**
> [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)
> [将java程序编译成exe](https://stackoverflow.com/questions/2011664/compiling-a-java-program-into-an-exe)

我相信这是一个简单的问题，尽管我找不到快速的答案。

我一直在学习有关 GUI 制作（以及一般的 Java 编码）的 Java 课程，它在编译时会创建一个 .java 文件。该 .java 文件可以使用某种 IDE 打开，但不能像 .exe 文件那样打开。

这让我想到了我的问题。您何时/何地实际使用 Java GUI？我没有预见到我会将 .java 文件传递​​给我的朋友或同事以使用我制作的工具。他们应该最适合在线应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:28:35.887

您的 .java 文件包含您的 Java 代码，然后您将其编译为类文件。这可以由你的朋友执行。

在大多数情况下，您会将应用程序与其资源捆绑在一个可执行的 jar 文件中。如果配置正确，操作系统只需双击即可运行 Java 应用程序。另一种解决方案是使用 Java webstart 来分发您的 GUI 应用程序，但这本质上是一回事。Java 和与 jnlp 文件的文件关联必须正确配置。

最简单的方法可能是使用像 launch4j 这样的 exe 包装器来创建一个加载 JVM 并运行 Java 应用程序的 exe 文件。这些包装器甚至可以创建带有捆绑 jvm 的发行版，以确保您的应用程序能够在用户没有安装 Java 的情况下运行。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:20:09.263

.java 文件是源代码，旨在让程序员以适合他们的格式编写代码，以定义程序的行为。

源代码被编译成可以执行（运行）的 .class 文件，尽管它们通常被打包成 JAR 文件（它们只是 .class 文件的集合）。

这些可以是可执行的，并且可以在人们之间传递以共享程序。

GUI 无关紧要。您可以创建或不创建 GUI，但该功能仍将存在于代码中并且可以执行。GUI 允许您查看程序并与之交互，而没有 GUI，如果需要交互，则必须使用命令行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:20:13.270

编译 Java 时，它会创建`.class`文件，而不是`.java`文件。这些`.java`文件是源代码；这些`.class`文件是编译的结果。

`.java``.exe`文件可以由 IDE 打开，但将它们作为文件打开是没有意义的，因为`.java`文件是源代码。

要运行 Java 应用程序，您必须运行特定于您的操作系统的 Java 虚拟机。您提供`.class`文件作为输入，然后 JVM 运行它。

这些`.class`文件与 Windows`.exe`文件是 Java 等效的，因为它们是“可执行的”。但是，虽然`.exe`文件可以由 Windows 直接执行，但`.class`文件不能由任何操作系统直接执行，而是由特定于操作系统的 JVM 执行。

Java 在这方面的“优势”是同一个`.class`文件（可执行文件）可以在任何安装了 JVM 的操作系统上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T23:20:05.440

如果您开发 Java GUI（图形用户界面）或 Java CL（命令行）程序真的没关系，因为最终您的软件应该像运行一样运行`*.exe`，只要用户拥有“Java 虚拟机“安装。

# haskell - 除了 Monads 之外，还有什么其他方法可以用纯函数式语言处理状态？

> ID：13536761
> 
> 赞同：46
> 
> 时间：2012-11-23T23:15:47.773
> 
> 标签：haskell, functional-programming, mercury

所以我开始围绕 Monads（在 Haskell 中使用）。我很好奇 IO 或状态还有哪些其他方式可以用纯函数式语言处理（无论是在理论上还是在现实中）。例如，有一种名为“mercury”的逻辑语言使用“效果类型”。在像 haskell 这样的程序中，效果类型是如何工作的？其他系统如何工作？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-24T04:44:06.733

这里涉及几个不同的问题。

首先，`IO`和`State`是非常不同的东西。`State`自己很容易做到：只需向每个函数传递一个额外的参数，并返回一个额外的结果，你就有了一个“有状态的函数”；例如，`a -> b`变成 `a -> s -> (b,s)`.

这里没有魔法：`Control.Monad.State`提供了一个包装器，可以方便地使用形式的“状态操作” `s -> (a,s)`，以及一堆辅助函数，但仅此而已。

I/O 就其本质而言，在其实现中必须具有一些魔力。但是在 Haskell 中有很多表达 I/O 的方式不涉及“monad”这个词。如果我们有一个没有 IO 的 Haskell 子集，并且我们想从头开始发明 IO，而不知道任何关于 monad 的东西，我们可能会做很多事情。

例如，如果我们只想打印到标准输出，我们可能会说：

```
type PrintOnlyIO = String

main :: PrintOnlyIO
main = "Hello world!" 
```

然后有一个 RTS（运行时系统）来评估字符串并打印它。这让我们可以编写任何 I/O 完全由打印到标准输出的 Haskell 程序。

然而，这不是很有用，因为我们需要交互性！因此，让我们发明一种允许它的新型 IO。想到的最简单的事情是

```
type InteractIO = String -> String

main :: InteractIO
main = map toUpper 
```

这种 IO 方法让我们可以编写任何从 stdin 读取并写入 stdout 的代码（`interact :: InteractIO -> IO ()` 顺便说一下，Prelude 附带了一个执行此操作的函数）。

这要好得多，因为它可以让我们编写交互式程序。但与我们想要做的所有 IO 相比，它仍然非常有限，而且也很容易出错（如果我们不小心尝试将 stdin 读得太远，程序将一直阻塞，直到用户输入更多内容）。

我们希望能够做的不仅仅是读取标准输入和写入标准输出。下面是 Haskell 的早期版本是如何进行 I/O 的，大致如下：

```
data Request = PutStrLn String | GetLine | Exit | ...
data Response = Success | Str String | ...
type DialogueIO = [Response] -> [Request]

main :: DialogueIO
main resps1 =
    PutStrLn "what's your name?"
  : GetLine
  : case resps1 of
        Success : Str name : resps2 ->
            PutStrLn ("hi " ++ name ++ "!")
          : Exit 
```

当我们写 时`main`，我们得到一个惰性列表参数并返回一个惰性列表作为结果。我们返回的惰性列表具有类似`PutStrLn s`and的值`GetLine`；在我们产生一个（请求）值之后，我们可以检查（响应）列表的下一个元素，RTS 会安排它作为对我们请求的响应。

有一些方法可以更好地使用这种机制，但正如您可以想象的那样，这种方法很快就会变得非常尴尬。此外，它与前一个一样容易出错。

这是另一种不易出错的方法，并且在概念上非常接近 Haskell IO 的实际行为方式：

```
data ContIO = Exit | PutStrLn String ContIO | GetLine (String -> ContIO) | ...

main :: ContIO
main =
    PutStrLn "what's your name?" $
    GetLine $ \name ->
    PutStrLn ("hi " ++ name ++ "!") $
    Exit 
```

关键是，我们不是在 main 开始时将响应的“惰性列表”作为一个大参数，而是发出一次接受一个参数的单独请求。

我们的程序现在只是一个普通的数据类型——很像一个链表，只是你不能正常遍历它：当 RTS 解释`main`时，有时它会遇到一个值，比如`GetLine`它包含一个函数；然后它必须使用 RTS 魔法从标准输入获取一个字符串，并将该字符串传递给函数，然后才能继续。练习：写`interpret :: ContIO -> IO ()`。

请注意，这些实现都不涉及“世界传递”。“世界传递”并不是 Haskell 中 I/O 的真正工作方式。GHC中类型的实际实现`IO`涉及一个称为 的内部类型 `RealWorld`，但这只是一个实现细节。

实际的 Haskell`IO`添加了一个类型参数，因此我们可以编写“产生”任意值的动作——所以它看起来更像`data IO a = Done a | PutStr String (IO a) | GetLine (String -> IO a) | ...`. 这给了我们更多的灵活性，因为我们可以创建`IO`产生任意值的“动作”。

（正如 Russell O'Connor[指出的那样](http://r6.ca/blog/20110520T220201Z.html)，这种类型只是一个免费的 monad。我们可以`Monad`很容易地为它编写一个实例。）

* * *

那么，monads 是从哪里来的呢？事实证明，我们不需要`Monad`I/O，也不需要`Monad`状态，那我们为什么还需要它呢？答案是我们没有。类型 class 没有什么神奇之处`Monad`。

然而，当我们使用`IO`and `State`（以及列表和函数以及 `Maybe`和解析器和持续传递样式和 ...）足够长的时间时，我们最终会发现它们在某些方面的行为非常相似。我们可能会编写一个打印列表中每个字符串的函数，以及一个在列表中运行每个有状态计算并通过线程处理状态的函数，它们看起来非常相似。

因为我们不喜欢写很多看起来相似的代码，所以我们想要一种方法来抽象它；`Monad`事实证明这是一个很好的抽象，因为它让我们抽象出许多看起来非常不同的类型，但仍然提供了很多有用的功能（包括 中的所有内容`Control.Monad`）。

给定`bindIO :: IO a -> (a -> IO b) -> IO b`and `returnIO :: a -> IO a`，我们可以在 Haskell 中编写任何`IO`程序而无需考虑 monad。但是我们最终可能会复制很多函数`Control.Monad`，比如`mapM`and`forever`和`when`and `(>=>)`。

通过实现通用`Monad`API，我们可以使用与解析器和列表完全相同的代码来处理 IO 操作。这确实是我们拥有这个`Monad`类的唯一原因——捕捉不同类型之间的相似之处。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-23T23:30:06.947

另一种主要方法是[唯一性类型](https://en.wikipedia.org/wiki/Uniqueness_type)，如在[Clean](http://wiki.clean.cs.ru.nl/Language_features)中。简短的故事是状态句柄（包括现实世界）只能使用一次，并且访问可变状态的函数返回一个新句柄。这意味着第一次调用的输出是第二次调用的输入，从而强制进行顺序评估。

[在 Haskell 的Disciple Compiler](http://disciple.ouroborus.net/)中使用了效果类型，但据我所知，在 GHC 等中启用它需要大量的编译器工作。我将把细节的讨论留给比我更了解情况的人。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-24T04:58:27.407

那么，首先什么是状态？它可以表现为一个可变变量，这是 Haskell 中没有的。您只有内存引用（IORef、MVar、Ptr 等）和 IO/ST 操作来对它们进行操作。

但是，状态本身也可以是纯的。要确认查看“流”类型：

```
data Stream a = Stream a (Stream a) 
```

这是一个价值流​​。然而，解释这种类型的另一种方法是改变值：

```
stepStream :: Stream a -> (a, Stream a)
stepStream (Stream x xs) = (x, xs) 
```

当您允许两个流进行通信时，这会变得很有趣。然后你得到自动机类别 Auto：

```
newtype Auto a b = Auto (a -> (b, Auto a b)) 
```

这真的很像`Stream`，只是现在流每时每刻都会获得一些 a 类型*的*输入值。这形成了一个类别，因此流的一个瞬间可以从另一个流的同一瞬间获取其值。

再次对此有不同的解释：您有两个随时间变化的计算，并且您允许它们进行通信。所以每个计算都有本地状态。这是一个与 同构的类型`Auto`：

```
data LS a b =
    forall s.
    LS s ((a, s) -> (b, s)) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-29T08:36:00.387

看看[Haskell 的历史：在课堂上懒惰](http://research.microsoft.com/en-us/um/people/simonpj/papers/history-of-haskell/index.htm)。它描述了在 monad 被发明之前在 Haskell 中进行 I/O 的两种不同方法：延续和流。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-17T10:54:11.703

有一种称为功能响应式编程的方法，它将时变值和/或事件流表示为一流的抽象。我最近想到的一个例子是[Elm](http://elm-lang.org)（它是用 Haskell 编写的，语法类似于 Haskell）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-16T03:41:29.340

> 我很好奇 - 可以用纯函数式语言（理论上还是现实）处理 I/O 或状态的其他方式？

我只是补充一下这里已经提到的内容（注意：其中一些方法似乎没有，所以有一些*“即兴名称”*）。

具有免费描述或实现的方法：

*   *“正交指令”* - 请参阅Maarten Fokkinga 和 Jan Kuper[的另一种 I/O 方法。](https://maartenfokkinga.github.io/utwente/mmf2001c.pdf)

*   *Pseudodata* - 请参阅F. Warren Burton[在函数式编程语言中具有引用透明度的非确定性。](https://academic.oup.com/comjnl/article-pdf/31/3/243/1157325/310243.pdf)Dave Harrison在他的论文 [《函数式实时编程：Ruth 及其语义学》](https://core.ac.uk/download/9835633.pdf)中使用该方法来实现*时钟*，并在Lennart Augustsson、Mikael Rittri 和 Dan Synek的函数式珍珠论[生成唯一名称中](https://www.cambridge.org/core/services/aop-cambridge-core/content/view/763DE73EB4761FDF681A613BE0E98443/S0956796800000988a.pdf/functional_pearl_on_generating_unique_names.pdf)*提供了名称；*[Hackage](https://hackage.haskell.org)中也有一些库实现。

**   *见证人*- 见Tachio Terauchi 和 Alex Aiken 的[见证副作用](https://www.f.waseda.jp/terauchi/papers/toplas-witness.pdf)。

    *   *观察员*- 请参阅Vipin Swarup、Uday S. Reddy 和 Evan Ireland[的应用语言作业。](https://www.cs.bham.ac.uk/%7Eudr/papers/assign.pdf)* 

 *其他方法 - 仅供参考：

*   *系统令牌*：

    > L.奥古斯特森。使用系统令牌的功能性 I/O。PMG 备忘录 72，查尔姆斯理工大学计算机科学系，S-412 96 Göteborg，1989 年。

*   *“效果树”*：

    > Rebelsky SA (1992) I/O 树和交互式惰性函数式编程。在：Bruynooghe M., Wirsing M. (eds) 编程语言实现和逻辑编程。PLILP 1992。计算机科学讲义，第 631 卷。Springer，柏林，海德堡。*

# windows-store-apps - Windows 应用商店应用程序是否支持 DMO COM 接口？

> ID：13536766
> 
> 赞同：1
> 
> 时间：2012-11-23T23:16:14.043
> 
> 标签：windows-store-apps, dmo

Windows 应用商店应用程序是否支持 DirectX 媒体对象 COM 接口？我似乎在 MSDN 上找不到任何说法。我正在考虑[IMediaObject](http://msdn.microsoft.com/en-us/library/windows/desktop/dd406926%28v=vs.85%29.aspx)等接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:34:49.070

我[在 Windows Store 应用程序中找到了受支持的 Win32 和 COM API 列表，](http://msdn.microsoft.com/en-us/library/windows/apps/hh452756.aspx) 但 DMO 不在其中。

# emacs - 如何让波浪号覆盖 Emacs 中的空格？

> ID：13536768
> 
> 赞同：0
> 
> 时间：2012-11-23T23:16:26.943
> 
> 标签：emacs, coding-style, elisp

如果点在任何东西上（特别是行尾），我希望（在与 TeX 相关的模式下）波浪号键像往常一样插入自身，但如果一个点在空间上，我希望波浪号覆盖它。（在将某些内容粘贴到 TeX 源文件中之后，这将是一个非常有用的功能。）我破解了这样的东西：

```
(defun electric-tie ()
  "Inserts a tilde at point unless the point is at a space
character, in which case it deletes the space first."
  (interactive)
  (while (equal (char-after) 32) (delete-char 1))
  (while (equal (char-before) 32) (delete-char -1))
  (insert "~"))

(add-hook 'TeX-mode-hook (lambda () (local-set-key "~" 'electric-tie))) 
```

我的问题很简单：它是否正确（它似乎有效）并且可以做得更好吗？（我假设如果第一个问题的答案是肯定的，那么后者就是风格问题。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:26:54.173

如前所述，最好使用“字符”文字而不是数字文字。您可以在`? `, `?\ `, 和`?\s`最后一个之间进行选择，自 Emacs-22 以来仅支持最后一个，但在其他方面是推荐的方式，因为它（如您所说）“更容易看到”并且没有空格字符的风险通过填充段落或空白修剪之类的东西变成其他东西（或删除）。

您确实可以使用`eq`而不是`equal`，但区别并不重要。

最后，我会打电话`(call-interactively 'self-insert-command)`而不是手动插入，但区别并不那么重要（例如，它会让您插入 3 个波浪号`C-u ~`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:34:59.250

几点：

1.  而不是`32`使用`? `（问号空格）来表达字符文字。

2.  不要在主模式挂钩中定义键，而是在一个`eval-after-load`块中进行。不同之处在于每次使用主模式时都会运行主模式挂钩，但每个主模式只有一个键盘映射。因此，在其中反复重新定义一个键是没有意义的。

    见：[https ://stackoverflow.com/a/8139587/903943](https://stackoverflow.com/a/8139587/903943)

3.  看起来这个命令不应该采用数字参数，但值得了解交互式规范以了解如何通过考虑数字参数来使您编写的其他命令更加灵活。

关于您的新修改的另一个说明：

您清除点周围空间的方法没有错，但我会这样做：

```
(defun foo ()
  (interactive)
  (skip-chars-forward " ")
  (delete-region (point) (+ (point) (skip-chars-backward " ")))) 
```

# random - 初始化向量创建

> ID：13536771
> 
> 赞同：1
> 
> 时间：2012-11-23T23:17:28.003
> 
> 标签：random, cryptography, aes, initialization-vector

我的程序连接到服务器，服务器的公钥是已知的。然后程序将 AES 密钥与初始化向量一起加密，并将其发送到服务器。服务器解密消息，从现在开始使用 AES 加密对话。

我的问题是关于如何生成 IV。如果我采取天真的方式并用当前时间播种一个伪随机生成器，攻击者可能会对 IV 做出一些非常好的猜测，这可诅咒不是我想要的。

由于硬件随机生成器不仅速度慢，而且并非随处可用，我想采用不同的方法。当客户端程序第一次启动时，我让用户随机移动一些鼠标，就像 TrueCrypt 一样。我现在保存由鼠标移动创建的那些“随机位”，当我需要生成器时，我会将它们用作种子。当然，每次我将随机位用作种子时，都必须更新它们。这是我的问题：我考虑将生成的前几个随机位保存为新的“随机位”。（所以他们习惯于在下次软件启动时初始化随机引擎。）现在我不确定这是否足够随机，或者伪随机生成器是否会在这里显示可猜测的模式。（我可能会使用 std::mt19937 [http://en.cppreference。](http://en.cppreference.com/w/cpp/numeric/random))

编辑：链接模式发生变化，所以我希望它适用于具有“最高”要求的模式。如果我没记错的话应该是CBC。

请注意：我正在编写的软件纯粹是实验性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:38:50.630

使用加密 PRNG，就像您对密钥所做的那样。

在 Windows 上使用`CryptGenRandom`/ `RtlGenRandom`，在 Linux/Unix 上使用`/dev/urandom`. 那些由操作系统播种，所以你不需要照顾它。

如果您真的想创建自己的 PRNG，请查看[Fortuna](http://en.wikipedia.org/wiki/Fortuna_%28PRNG%29)。不要使用梅森捻线机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:32:30.237

您应该明确计划使用哪种链接模式。初始化向量的安全要求强烈依赖于此。

例如，在 CBC 模式下，IV 必须是不可预测且唯一的。对于 CTR 模式，它只能是唯一的，不一定是不可预测的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-24T09:15:34.397

伪随机生成器适用于您不希望用户能够预测结果的事情（例如游戏中的掷骰子），但对于您不希望计算机能够计算它的情况则毫无价值。对于密码学，根本不要使用伪随机性。

如果你想要随机性，你需要实际的随机数据。正如您所写，鼠标移动是一个很好的来源。鉴于您不谈论 /dev/random，我认为您正在 Windows 上运行，不幸的是，它在运行时不会收集随机性。所以你必须自己做这件事。根据用例，您可以在启动时运行一个随机守护程序，它会不断收集随机数据并允许您的程序在需要时检索它，或者您可以要求用户在程序启动时进行一些鼠标移动。

或者您可以决定，如果 Windows 不希望您拥有真正的随机数据，您就不想使用 Windows，但我认为这不是一个选择。;-)

# java - 围绕二维矩阵中的索引检查周围的索引

> ID：13536774
> 
> 赞同：1
> 
> 时间：2012-11-23T23:18:04.377
> 
> 标签：java, for-loop, nested-loops, conways-game-of-life

我正在研究康威的生命游戏程序，我正处于死/活细胞检查它周围的邻居并计算它周围的活邻居的数量的地步。现在，我正在检查 [0][0]。我遇到的问题是正在检查 [0][0] 以及周围的索引。我想如果我输入“if (k!=o && l!=p)”，它会排除 [0][0]，但事实并非如此。

```
public class Life {

public static void main(String[] args)
{
    int N = 5;
    boolean[][] b = new boolean[N][N];
    double cellmaker = Math.random();

    int i = 0;
    int j = 0;

    int o=0;
    int p=0;
    int livecnt = 0; //keeps track of the alive cells surrounding cell

     System.out.println("First Generation:");
     // Makes the first batch of cells
     for ( i = 0; i < N ; i++)
     {

         for ( j = 0; j< N; j++)
         {
              cellmaker = Math.random();

             if (cellmaker > 0.5) // * = alive; - = dead
             {
                 b[i][j]=true;

                 System.out.print( "* ");

             }

             if (cellmaker < 0.5)
            { b[i][j] = false;

             System.out.print("- ");

            }

         }
         System.out.println();
     }       

     // Checks for the amount of "*" surrounding (o,p)
     for (int k=(o-1); k <= o+1; k++ )
        {

            for (int l =(p-1); l <=p+1; l++)
            {
                 if ( k >= 0 && k < N && l >= 0 && l < N) //for the border indexes.
                 { 
                     //if (k!=o && l!=p)
                    {
                        if (b[k][l] == true)
                            {

                                livecnt++;

                            }
                    }

                 }

            }
        } 
    System.out.println(livecnt++);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:43:55.620

您的代码几乎是正确的。你只需要改变

```
if (k!=o && l!=p) 
```

进入

```
if (k!=o || l!=p) 
```

`(k,l)`如果坐标不等于，您只想计算一个字段`(o,p)` 。换句话说： !(k==o && l==p) 记住 根据[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)`(k!=o || l!=p)`等于。`!(k==o && l==p)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:21:20.043

您想检查 (o,p) 的周围环境，请尝试以下操作：

```
if (!(k== o && l==p)) 
```

代替：

```
if (k!=o && l!=p) 
```

因为在上述条件下，您没有检查坐标 (k,p-1)、(k,p+1)、(k-1,p) 和 (k+1,p)

# mysql - 简单的 SQL 格式

> ID：13536776
> 
> 赞同：0
> 
> 时间：2012-11-23T23:18:05.297
> 
> 标签：mysql, sql

谁能帮我一个简单的sql标签吗？

这就是我想要的：

```
Select * from table1 where transid='select transid from table2 where date='01/02/2003'' 
```

如何以正确的 sql 格式保存它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T23:19:55.360

尝试：

```
Select * 
from table1 
where transid=(select transid from table2 where date='01/02/2003') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T23:20:28.980

```
Select * from table1
  where transid in 
    (select transid from table2 where date='01/02/2003') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T23:41:35.597

或者只是做一个`JOIN`：

```
SELECT  table1.*
FROM    table1
JOIN    table2
ON      table1.transid=table2.transid
    AND date = '01/02/2003' 
```

# c++ - 如何阅读 C++ 指针构造？

> ID：13536777
> 
> 赞同：6
> 
> 时间：2012-11-23T23:18:23.503
> 
> 标签：c++, pointers

这是一个新手 C++ 问题。以下两种构造有什么区别？

```
1\. const int* const* const x
2\. const int** 
```

我如何阅读这些结构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T23:20:48.110

> 我如何阅读这些结构？

向后阅读它们并将其阅读`*`为“指向”。

```
const int* const* const 
```

是一个指向整数常量的常量指针。

```
const int** 
```

是一个指向整数常量的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:27:44.587

如果您以正确的方式对事物进行分组，它会变得容易一些。例如，`*const`真的是一个单位，意思是“const 指针”（您可以在`const`这里将 读作下标：）。我会把它写成：`*[const]`

```
const int *const *const p1; // p1 is a const pointer to const pointer to const int
const int **p2; // p2 is a pointer to pointer to const int 
```

还要记住，声明从被声明的标识符开始读为“由内而外”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T02:41:10.940

有一个工具对破译声明很有用/很有趣：http: [//cdecl.ridiculousfish.com/](http://cdecl.ridiculousfish.com/)

在您的情况下，它报告： `const int* const* const x`=> 将 x 声明为指向 const int 的 const 指针 `const int** x`=> 将 x 声明为指向 const int 的指针

# c++ - 在指定元素之前插入节点

> ID：13536779
> 
> 赞同：0
> 
> 时间：2012-11-23T23:18:27.637
> 
> 标签：c++, stack, nodes, insertion

我有堆栈，我需要在指定元素之前插入节点，这段代码可以工作，但我需要没有count和count1的代码，因为排序不起作用。你能帮我重新制作代码吗？我试图用代码做一些事情，但它不起作用

```
void Stack::stackA(Item *q,Item *q1) // q - specified element, q1 - new element
{

int count=0;
int count1=0;
for (Item *i=this->first;i;i=i->next) 
{   
    count++;
    if (*i == *q)  // Here we find position of the specified element
        break;
}

for (Item *i=this->first;i;i=i->next)
{

    Item *temp=new Item(*q1);

    if(*this->first == *q)  // if element first
    {
        this->first=temp;
        temp->next=i;
        break;
    }
    if (count1+1==count-1) //count-1,insert before specified element
    {
          if(i->next)
            temp->next=i->next;
          else
            temp->next=0;
          i->next=temp;
    }
    count1++;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:25:27.650

这里的目标是找到之前的节点`q`，将其设置`next`为`q1`，然后设置`q1->next`为`q`

```
void Stack::stackA(Item *q,Item *q1) // q - specified element, q1 - new element
{
    Item* item = this->first;
    if (item == q) {
        this->first = q1;
        q1->next = q;
        return;
    }
    while (item != null) {
        if (item->next == q) {
            item->next = q1;
            q1->next = q;
            break;
        }
        item = item->next;
    }
} 
```

更新：如果`q`是第一项，则处理此案。

# iphone - 文件句柄选项没有出现

> ID：13536780
> 
> 赞同：0
> 
> 时间：2012-11-23T23:18:38.017
> 
> 标签：iphone, ios, nsfilemanager, filehandle

我从教程中输入了以下代码，但我无法让它工作......它说“'NSFilemanager'没有可见的@interface声明了[fileHandle seekToEndOfFile]的选择器......; [fileHandle writeData： [resultLine dataUsingEncoding:NSUTF8StringEncoding ]]; [fileHandle closeFile]; 部分..

知道问题是什么，因为我经历了很多次。谢谢马特

```
 - (IBAction)SaveText:(id)sender {

NSString *resultLine =[NSString stringWithFormat:@"%@\n",
                       self.inputText];

NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask,YES)objectAtIndex:0];
// textMsg.text = docPath;

NSString *savedTextMsg =[docPath stringByAppendingPathComponent:@"textMessage.csv"];

if (![[NSFileManager defaultManager] fileExistsAtPath:docPath]) {
    [[NSFileManager defaultManager]
     createFileAtPath:savedTextMsg contents:nil attributes:nil];
}
NSFileManager *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:savedTextMsg];
[fileHandle seekToEndOfFile];
[fileHandle writeData:[resultLine dataUsingEncoding:NSUTF8StringEncoding ]];
[fileHandle closeFile];

self.textMsg.text =@"";
NSLog(@"info saved"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:20:15.100

如果你改变它会有所帮助：

```
NSFileManager *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:savedTextMsg]; 
```

到：

```
NSFileHandle *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:savedTextMsg]; 
```

注意变量的类型。

# php - 我的 jQuery IMG 中心脚本在 Chrome 和 Safari 中失败，但在 IE 中有效？

> ID：13536783
> 
> 赞同：-1
> 
> 时间：2012-11-23T23:19:03.877
> 
> 标签：php, jquery, html, css

我有一个电子商务网站，我在其中显示我的所有产品，并且缩略图需要以 div 为中心。居中在 IE（即使在兼容模式下）、FF 和 Opera 中有效，但在 Chrome 和 Safari 中失败。在 Chrome 和 Safari 中，图像保持在 div 的顶部并且不居中。我已经更改了我的 CSS 以试图定位问题，但我似乎无法找到导致问题的原因？有人看到什么吗？

**即（好）**

![在此处输入图像描述](../Images/64c0d254a937225f0d614080c821965f.png)

**铬（坏）**

![在此处输入图像描述](../Images/27101f582c6f33c386fdd13c1bd10e28.png)

**查询**

```
var _h = $('div.product-image').height();
$('div.product-image img').each(function()
{
    var _top = (_h - $(this).height()) / 2;
    $(this).css('margin-top',_top);
}); 
```

**CSS**

```
.product
{
    float:left;
    margin:5px;
    width:200px;
    height:200px;
    border:1px solid #999;
}
.product-image
{
    margin:2px auto;
    width:194px;
    height:145px;
    text-align:center;
    border:1px solid #999;
}
.product-image img
{
    max-height: 100%;
    max-width: 100%;
    border:1pc solid #999;
} 
```

**HTML**

```
<div id="content">
    <a href="#">
        <div class="product">
            <div class="product-image">
                <img src="1.jpg" />
            </div>
            <div class="product-model">sadf</div>
            <div class="product-price"> : 234</div>
        </div>
    </a>
    <a href="#">
        <div class="product">
            <div class="product-image">
                <img src="2.jpg" />
            </div>
            <div class="product-model">sdaf</div>
            <div class="product-bottom"> : 2345</div>
        </div>
     </a>
</div> 
```

这是小提琴链接：http: [//jsfiddle.net/anaZD/](http://jsfiddle.net/anaZD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:48:05.310

你可以检查一下，它对我有用：

[如何垂直对齐div内的图像](https://stackoverflow.com/questions/7336503/how-to-vertical-align-image-inside-div/11716065#11716065)

```
div {position:relative;}
    img {position:absolute;top:0;bottom:0;margin:auto;}
    .image {min-height:50px} 
```

div 是你的 .product-image img 是 .product-image img

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:10:53.113

也许问题出在margintop。jQuery CSS 使用“marginTop”而不是“margin-top”，您可能希望这些图像根据您对原始脚本的计算进行相对定位。

这是一个例子，你能澄清一下这是否是你想要完成的吗？见附件 JsFiddle

Java脚本

```
 var a=$;
   a.noConflict();

   var CountP=new Array();

    jQuery(function(a){

    a("div.product-image img").each(function(b,c){

    CountP[c]=(( a(this).parent('div').parent('div').height() -  a(this).height() )  / 2) +'px'; 
```

//在我们进行测试时发出警报

```
alert('The difference that we are looking for this product is: ' + CountP[c] + ' and the height of this product is:' + a(this).height() ); 
```

为确保浏览器兼容性，请尝试使用 CSS 的 marginTop 或类似本例中的 position:relative; 顶部和左侧值；

```
 a(this).css({'border':'2px inset red','position':'relative',
'top': CountP[c], 'left':'0.1em','margin':'auto','marginTop':'0.1px', 'display':'inline-block'});

})

}); 
```

下面在 jsfiddle.net 上进行测试。希望对您有所帮助！ [http://jsfiddle.net/mt5fk/93/](http://jsfiddle.net/mt5fk/93/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T02:15:50.437

使用您提供的图像；) JS 是相同的，但它不允许我使用链接进行更新

```
 var a=$;
 a.noConflict();

var CountP=new Array();

 jQuery(function(a){
a("div.product-image img").each(function(b,c){

    CountP[c]=(( a(this).parent('div').parent('div').height() -  a(this).height() )  / 2) +'px';

    alert('The difference that we are looking for this product is: ' + CountP[c] + ' and the height of this product is:' + a(this).height() );

    //to ensure browser compatibility try with marginTop for CSS or like in this example, position:relative; top and left values;
    a(this).css({'border':'2px inset red','position':'relative','top': CountP[c], 'left':'0.1em','margin':'auto','marginTop':'0.1px', 'display':'inline-block'});

    });

 }); 
```

新的 JSFiddle

```
 http://jsfiddle.net/mt5fk/94/ 
```

# css - 使用 Yeoman 在后台连续连接 CSS

> ID：13536784
> 
> 赞同：2
> 
> 时间：2012-11-23T23:19:05.770
> 
> 标签：css, build, gruntjs, yeoman

我正在使用[Yeoman](http://yeoman.io/)，但找不到在文件更改时触发[CSS 任务的方法。](http://yeoman.io/commandline.html#build)

我有一个像这样的项目结构

```
\ 应用程序
  -----\模块1
        -------- style.css
  -----\模块2
        -------- style.css
  -----\模块3
        -------- style.css
  -----\样式
        -------- main.css

```

我想让约曼

*   查看模块中的所有 CSS 文件；
*   触发 CSS concat/minification 任务；
*   覆盖`app/styles/main.css`。

这是我的`Gruntfile.js`：

```
module.exports = function( grunt ) {
  'use strict';
  //
  // Grunt configuration:
  //
  // https://github.com/cowboy/grunt/blob/master/docs/getting_started.md
  //
  grunt.initConfig({

    // Project configuration
    // ---------------------

    // specify an alternate install location for Bower
    bower: {
      dir: 'app/components'
    },

    // Coffee to JS compilation
    coffee: {
      compile: {
        files: {
          // 'app/scripts/*.js': 'app/scripts/**/*.coffee',
          // 'test/spec/*.js': 'test/spec/**/*.coffee'
        }
      }
    },

    // compile .scss/.sass to .css using Compass
    compass: {
      dist: {}
    },

    // default watch configuration
    watch: {
      reload: {
        files: [
          'Gruntfile.js',
          'app/*.html',
          'app/styles/**/*.css',
          'app/scripts/**/*.js',
          'app/images/**/*',
          'app/app/**/*'
        ],
        tasks: 'css reload'
      }
    },

    // default lint configuration, change this to match your setup:
    // https://github.com/cowboy/grunt/blob/master/docs/task_lint.md#lint-built-in-task
    lint: {
      files: [
        'Gruntfile.js',
        'app/scripts/**/*.js',
        'spec/**/*.js'
      ]
    },

    // specifying JSHint options and globals
    // https://github.com/cowboy/grunt/blob/master/docs/task_lint.md#specifying-jshint-options-and-globals
    jshint: {
      options: {
        curly: true,
        eqeqeq: true,
        immed: true,
        latedef: true,
        newcap: true,
        noarg: true,
        sub: true,
        undef: true,
        boss: true,
        eqnull: true,
        browser: true
      },
      globals: {
        angular: true
      }
    },

    // Build configuration
    // -------------------

    // the staging directory used during the process
    staging: 'temp',

    // final build output
    output: 'dist',

    mkdirs: {
      staging: 'app/'
    },

    // Below, all paths are relative to the staging directory, which is a copy
    // of the app/ directory. Any .gitignore, .ignore and .buildignore file
    // that might appear in the app/ tree are used to ignore these values
    // during the copy process.

    // concat css/**/*.css files, inline @import, output a single minified css
    css: {
      'app/styles/main.css': ['app/styles/*.css', 'app/app/**/*.css']
    },

    // renames JS/CSS to prepend a hash of their contents for easier
    // versioning
    rev: {
      js: 'scripts/**/*.js',
      css: 'styles/**/*.css',
      img: 'images/**'
    },

    // usemin handler should point to the file containing
    // the usemin blocks to be parsed
    'usemin-handler': {
      html: 'index.html'
    },

    // update references in HTML/CSS to revved files
    usemin: {
      html: ['**/*.html'],
      css: ['**/*.css']
    },

    // HTML minification
    html: {
      files: ['**/*.html']
    },

    // Optimizes JPGs and PNGs (with jpegtran & optipng)
    img: {
      dist: '<config:rev.img>'
    },

    // rjs configuration. You don't necessarily need to specify the typical
    // `path` configuration, the rjs task will parse these values from your
    // main module, using http://requirejs.org/docs/optimization.html#mainConfigFile
    //
    // name / out / mainConfig file should be used. You can let it blank if
    // you're using usemin-handler to parse rjs config from markup (default
    // setup)
    rjs: {
      // no minification, is done by the min task
      optimize: 'none',
      baseUrl: './scripts',
      wrap: true
    }
  });

  // Alias the `test` task to run `testacular` instead
  grunt.registerTask('test', 'run the testacular test driver', function () {
    var done = this.async();
    require('child_process').exec('testacular start --single-run', function (err, stdout) {
      grunt.log.write(stdout);
      done(err);
    });
  });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:46:46.777

我是 grunt 的新手，但我为编写自定义监视任务所做的就是这样。首先，我注册了一个新任务，其中仅包含我在开发时想要运行的东西。例如，我希望我的项目针对未缩小的 js 运行。所以我不要求执行 min 或 concat 任务。只需对它们进行 lint、测试并使用`grunt-targethtml`.

```
 grunt.registerTask('devel', 'lint qunit targethtml'); 
```

然后我替换默认`watch`配置运行`devel`任务

```
 watch: {
        files: '<config:lint.files>',
        tasks: 'devel'
    } 
```

这是使用为 lint 任务定义的文件列表，但您应该能够将其替换为

```
 files: ['app/**/*.css'] 
```

# solaris - 对 isql 的相同管道调用适用于 Solaris，但不适用于 RHEL

> ID：13536788
> 
> 赞同：0
> 
> 时间：2012-11-23T23:19:31.147
> 
> 标签：solaris, ksh, rhel, isql

**背景：** 我需要将`ksh`脚本从 SunOS 5.10 移植到 RHEL 5.8。它调用 isql 以检索一些数据，并且与 isql 等最终端点客户端实用程序的预期应用完全相反，它将其解析出来以供 shell 脚本中的变量使用。请注意，我只是继承了这一点，而我自己并没有设计过这样的 hack。我当然不会解析 isql 来为 shell 中的 var 赋值——如果脚本需要这些信息，我会使用 Perl 和一些 API，比如 DBD::DBI，这些 API 旨在在应用程序和数据存储之间编组数据. 但我有我所拥有的并且必须在参数范围内工作。

发生的情况是，以下管道输入确实在 SunOS 上返回数据，但在 RHEL 中却没有：

```
echo "SELECT some_field FROM some_table WHERE some_crtra = 'X' \ngo" | isql -U$USER -P$PASS -D$DB -S$SERVER 
```

Solaris 上的输出是：

```
 some_field 
 ------
 Y

(1 row affected) 
```

从那时起，脚本`awk`仅用于从上述流中提取字段值，但让我们忽略它，因为这不是问题所在。

另请注意，我能够单独获取执行管道命令的数据，即通过手动进入 isql 并运行 SQL。所以 SQL 或连接字符串不是问题——它要么是管道流数据的方式，要么是 isql 本身在不同平台上的工作方式不同。

任何人都可以看到为什么两个系统上对相同输入有不同的响应吗？知道如何更改管道以使其正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:36:26.930

```
echo "SELECT some_field FROM some_table WHERE some_crtra = 'X' \ngo" 
```

是非便携式的。

我建议改为：

```
printf "SELECT some_field FROM some_table WHERE some_crtra = 'X' \ngo\n" 
```

从 ksh93 手册页：

如果第一个 arg 不以 - 开头，并且所有参数都不包含 \，则 echo 打印其每个参数，以空格分隔并以换行符终止。 **否则，echo 的行为取决于系统，应使用下面描述的 print 或 printf。**有关用法和说明，请参见 echo(1)。

# php - jQuery fileUpload 将重命名文件，但不会重命名文件名的 post 值

> ID：13536791
> 
> 赞同：0
> 
> 时间：2012-11-23T23:19:47.780
> 
> 标签：php, javascript, jquery, html, post

我正在使用 jQuery fileUpload 插件作为文件管理器。当有人上传与现有文件具有相同文件名的文件时，对于实际文件及其在 UI 中显示的内容，文件名将重命名为“name (1).ext”或“name (2).ext”，但POST 数据中的文件名值不会，因此错误的数据会输入到数据库中，并且稍后调用删除脚本时会删除错误的文件。

有没有办法更新发送的帖子数据以匹配屏幕上显示的内容？

演示（此处：[http](http://blueimp.github.com/jQuery-File-Upload/) ://blueimp.github.com/jQuery-File-Upload/ ）不会重命名，但我认为这是因为它不会保存您上传的文件，因此无法检测到冲突。

![上传重复文件名后我的表单截图](../Images/d16c11265523c8ca786978ed6be5bf9d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:29:39.283

不要以与上传的名称相同的名称存储它。在服务器端为所有上传的文件生成名称。为什么你仍然需要原名？

# iphone - 应用程序图标上的“新”标签 - 跳板错误或开发人员角落案例？

> ID：13536792
> 
> 赞同：-1
> 
> 时间：2012-11-23T23:19:54.647
> 
> 标签：iphone, ios, xcode, cocoa-touch, app-store

我测试了以下内容：

1.  从应用商店下载我的应用的 v1.0
2.  不要启动**它**
3.  从 Xcode 运行 v1.1。
4.  停止 Xcode。
5.  返回主屏幕

我发现无论我启动多少次，“新”标签都会保留在我的应用程序图标上。

现在我不能轻易地测试如果**这两个**版本都是从应用商店下载的（即下载 v1.0，不要启动，等待 v1.1，安装更新，启动）会发生这种情况。但是其他任何人都可以验证这种行为和/或揭示一些信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:44:55.317

> 我发现无论我启动多少次，“新”标签都会保留在我的应用程序图标上。

那么“新”标签可能不会在发布时消失。也许它会在触摸时消失。

# python - 迭代嵌入字典的键和值

> ID：13536798
> 
> 赞同：0
> 
> 时间：2012-11-23T23:20:14.160
> 
> 标签：python, dictionary, loops, key-value

我编写了以下代码来计算每个嵌入式字典中值的总和，对于每个嵌入式字典，我还想保留与这些值对应的键。正如您在下面看到的，例如，我想知道 20+30+40 = 90 但我还想保留键：loan1、loan2、loan3 并知道它们的值分别是 20、30、40 所以我可以创建一个新字典。

我已经写了三个 for 循环，我认为它可以更简洁地完成。此外，我已经运行了几次，而打印嵌入式字典值的 for 循环和记录嵌入式字典键的 for 循环每次都以相同的顺序迭代，我不确定我是什么有书面保证。

```
mydict = {'k1':{'loan1':20,'loan2':30, 'loan3':40},'k2':{'loan1':90,'loan2':65, 'loan3':75}}

for k in mydict.keys():

    the_sum = 0

    for c in mydict[k].itervalues():
        the_sum += c

        print k, c, the_sum

    for k2 in mydict[k].iterkeys():
        print k2

k2 75 75

k2 65 140

k2 90 230
loan3

loan2

loan1

k1 40 40

k1 30 70

k1 20 90

loan3

loan2

loan1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:27:32.963

你只是想让它打印总和吗？还是要将总和添加为字典中的新字段？如果您只想要给定键的总和，您可以执行以下操作：

```
In [1]: mydict = {'k1':{'loan1':20,'loan2':30, 'loan3':40},'k2':{'loan1':90,'loan2':65, 'loan3':75}}

In [2]: for k, v in mydict.iteritems():
   ...:     print k, sum(v.values())
   ...:
   ...:
k2 230
k1 90 
```

并保留您的所有原始信息。如果要`total`为每个字段添加一个，可以执行以下操作：

```
In [3]: for k, v in mydict.iteritems():
   ...:     v['total'] = sum(v.values())
   ...:
   ...:

In [4]: mydict
Out[4]:
{'k1': {'loan1': 20, 'loan2': 30, 'loan3': 40, 'total': 90},
 'k2': {'loan1': 90, 'loan2': 65, 'loan3': 75, 'total': 230}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:27:48.067

如果您试图对每个键的贷款价值求和，您可以使用这样的[字典理解](http://docs.python.org/2.7/tutorial/datastructures.html#dictionaries)：

```
mydict = {'k1':{'loan1':20,'loan2':30, 'loan3':40},
          'k2':{'loan1':90,'loan2':65, 'loan3':75}}

totals = {key:sum(loans.values()) for key, loans in mydict.items()}
print(totals) 
```

产量

```
{'k2': 230, 'k1': 90} 
```

如果您使用的是 Python2.6 或更早版本，那么您可以`totals`使用[列表](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)推导来形成字典：

```
totals = dict((key,sum(loans.values())) for key, loans in mydict.items()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:29:22.047

我不确定我是否完全理解你的问题。至于获取字典的总和，您可以用列表理解和 sum() 替换 for 循环

```
>>> mydict = {'k1':{'loan1':20,'loan2':30, 'loan3':40},'k2':{'loan1':90,'loan2':65, 'loan3':75}}
>>> sum([x for x in mydict['k1'].itervalues()])
90
>>> sum([x for x in mydict['k2'].itervalues()])
230 
```

这确实使 mydict 保持不变，因此您的键/值被保留。python 字典也是**无序**的，如果你想保留键以便查看 python 的 collections.ordereddict

# c++ - 在可可项目中使用 C++ 代码进行 Blowfish 加密

> ID：13536802
> 
> 赞同：0
> 
> 时间：2012-11-23T23:20:44.287
> 
> 标签：c++, objective-c, blowfish

我想用 Bruce Schneier 的课程加密一个文本，该课程由 Jim Conger 转换为 c++ 代码加密后我想解密加密的文本。为了尝试这一点，我正在使用文件。我创建了一个示例项目，但解密的文件不包含与初始文件相同的文本。可能是什么问题？

这是河豚类文件的下载[链接](http://www.schneier.com/code/bfsh-con.zip)。

我`Command line tool`在 XCode 中创建了一个项目并将`main.m`文件更改为`main.mm`. 在这里你可以找到我的`main.mm`文件内容：

```
#import "blowfish.h"
#include <stdlib.h>
#include <stdio.h>

#define my_fopen(fileptr, filename, mode) \
fileptr = fopen(filename, mode); \
if (fileptr == NULL) { \
fprintf(stderr, "Error: Couldn't open %s.\n", filename); \
exit(1); \
}

const char *input_file_name = "test.txt";
const char *encoded_file_name = "encoded.txt";
const char *decoded_file_name = "decoded.txt";
unsigned char key[] = "thisisthekey";

int main(void) {
    FILE *infile, *outfile;
    int result, filesize;
    const int n = 8; // make sure this is a multiple of 8
    const int size = 1;
    unsigned char input[n], output[n];

    CBlowFish bf;
    bf.Initialize(key, sizeof(key)-1); // subtract 1 to not count the null terminator

    my_fopen(infile, input_file_name, "rb")
    my_fopen(outfile, encoded_file_name, "wb")

    filesize = 0;
    while (result = fread(input, size, n, infile)) {
        filesize += result;
        fwrite(output, size, bf.Encode(input, output, result), outfile);
    }

    fclose(outfile);
    fclose(infile);

    my_fopen(infile, encoded_file_name, "rb")
    my_fopen(outfile, decoded_file_name, "wb")

    while (result = fread(input, size, n, infile)) {
        bf.Decode(input, output, result);
        fwrite(output, sizeof(output[0]), filesize < result ? filesize : result, outfile);
        filesize -= result;
    }

    fclose(outfile);
    fclose(infile);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:27:29.110

您正在使用带有填充的分组密码（查看源代码`CBlowFish::Encode`）来加密流。您不能这样做，因为解密操作将无法知道它应该解密的填充块的构成。

例如，假设您正在加密“FOOBAR”，但您第一次读取“FOO”，这将加密为“XYZZY”。然后将“BAR”加密为“ABCDE”。您的书面文件将包含“XYZZYABCDE”。但那是“XY”“ZZYA”“BCDE”吗？或者一个块，“XYZZYABCDE”还是什么？

如果要加密流，请使用流密码。或者，如果您想将其切成任意块，则必须保留输出块边界，以便解密这些块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:30:29.673

您必须编码/解码相应的数据块。fread() 和 fwrite() 不返回相同的编号。字节数（结果），因此您的纯文本数据块和密文数据块未对齐。

定义数据块长度（比如 64 字节）并在编码和解码时坚持它。

否则使用使用 1 个字节的“数据块”的流密码；）

# php - 多页会话存储在数据库中

> ID：13536804
> 
> 赞同：2
> 
> 时间：2012-11-23T23:20:50.027
> 
> 标签：php, sql, database, session-variables

我正在尝试设置一个简单的多页表单，并使用会话稍后将其存储在多个表中的数据库中。

但是，我似乎遇到了问题。虽然最后一页的值被发布到数据库，但会话变量不会。

请记住.. 我和我的项目合作伙伴完全是 php/sql 的新手，在课堂上可能没有像我们应该有的那样关注。大多数代码几乎都是随机组合在一起的。发现问题似乎不是我们的强项。

**第一页 / b_tickets.php** （简单的 html 表单，包含值 'ticket_a'、'ticket_k' 和 'ticket_vip'）

**第二页 / b_rooms.php**

```
 <?php
session_start();

$_SESSION['ticket_a'] = $_POST['ticket_a'];
$_SESSION['ticket_k'] = $_POST['ticket_k'];
$_SESSION['ticket_vip'] = $_POST['ticket_vip'];
?> 
```

**第三页 / b_ucp.php**

```
<?php
session_start();

$_SESSION['room_s'] = $_POST['room_s'];
$_SESSION['room_s_extra'] = $_POST['room_s_extra'];
$_SESSION['room_d'] = $_POST['room_d'];
$_SESSION['room_d_extra'] = $_POST['room_d_extra'];
$_SESSION['room_3'] = $_POST['room_3'];
$_SESSION['room_3_extra'] = $_POST['room_3_extra'];
$_SESSION['room_10'] = $_POST['room_10'];
$_SESSION['room_10_extra'] = $_POST['room_10_extra'];
$_SESSION['pension'] = $_POST['pension'];
?> 
```

这导致

**插入_ucp.php**

（此时，先前变量的回显 §_SESSION 表明它们实际上仍被存储。）

```
<?php
session_start();

$con = mysql_connect("localhost","XX","XX");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("fatcity", $con);

$sql="INSERT INTO tickets (ticket_a, ticket_k, ticket_vip)
VALUES
('$_SESSION[ticket_a]','$_SESSION[ticket_k]','$_SESSION[ticket_vip]')";

$sql="INSERT INTO rooms (room_s, room_s_extra, room_d, room_d_extra, room_3, room_3_extra, room_10, room_10_extra, pension)
VALUES
('$_SESSION[room_s]','$_SESSION[room_s_extra]','$_SESSION[room_d]','$_SESSION[room_d_extra]','$_SESSION[room_3]','$_SESSION[room_3_extra]','$_SESSION[room_10]','$_SESSION[room_10_extra]','$_SESSION[pension]')";

$sql="INSERT INTO ucp (title, name, n_family, adress, a_housenumber, continent, country, province, region, city, telephone, email, password,  payment, client, comment)
VALUES
('$_POST[title]','$_POST[name]','$_POST[n_family]','$_POST[adress]','$_POST[a_housenumber]','$_POST[continent]','$_POST[country]','$_POST[province]','$_POST[region]','$_POST[city]','$_POST[telephone]','$_POST[email]','$_POST[password]','$_POST[payment]','$_POST[client]','$_POST[comment]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

在这一点上，问题实际上并不在于我们在 php/sql 方面有多糟糕——谢谢……我们已经弄清楚了。离我们的最后期限只有三天了。。

但是为什么会话变量没有保存到数据库中。我们究竟忽略了什么？

非常感谢你提前..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:36:20.510

每次运行查询！！！

您创建变量，然后将其覆盖 2 次而不是执行它

应该：

```
$sql = 'smth';
mysql_query($sql);
$sql = 'smth';
mysql_query($sql);
$sql = 'smth';
mysql_query($sql); 
```

你有

```
$sql = 'smth';
$sql = 'smth';
$sql = 'smth';
mysql_query($sql); 
```

正如我所说，不要使用 mysql_*。而且你的代码允许sql注入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:40:14.443

我同意 E_p 的观点，即只有一个查询会被执行。执行他的建议将允许您执行所有查询。

您可能还想查看您的表，仅通过查看您的查询结构我看不出它们有什么问题，但您最终可能很难获得您想要的信息。我可能是错的，因为你没有发布你的表格结构，你的问题也不是真的关于这个，但这只是我注意到并认为我会分享的东西。您的表看起来不像通过任何外键相互连接。您的项目可能不需要此操作，但如果您需要提取与所有 ticket_a 条目相关的所有表单数据，那么您只会获得与 ticket_a 列对应的 sessionID 列表，而没有来自您的“房间”或“upc”的任何信息' 表。如果这就是你想要的，那么它很好，否则你可能想要调查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:37:11.477

我看到的第一个问题是，`$sql`变量在最后一段代码中被覆盖了 2 次。因此，只有最后一个查询被执行。

其次，您应该使用这种语法将非部落变量注入字符串：`"INSERT ... ${someArray[someKey]} ..."`- 注意花括号。这在这里不是必需的，但它将使您免于将来的麻烦。

第三，清理所有输入数据！您将在最后一个代码示例中进行[SQL 注入。](https://stackoverflow.com/questions/601300/what-is-sql-injection)

最后，不需要`session_start()`在每个文件中 - 只需将它放在引导文件中一次即可`require_once`。

# visual-studio-2008 - Microsoft.VisualBasic.PowerPacks.Vs.dll 不包括形状

> ID：13536805
> 
> 赞同：2
> 
> 时间：2012-11-23T23:21:00.413
> 
> 标签：visual-studio-2008, sql-server-2008-r2, visual-studio-2008-sp1

我在具有相同文件和 Microsoft.VisualBasic.PowerPacks.Vs.dll 引用路径的软件开发环境中工作（我们将它包含在我们的项目中的 Assemblies 文件夹中）。我的两个同事能够成功打开使用 PowerPack 的表单设计器，但我不能。我收到错误

> 找不到类型 Microsoft.VisualBasic.PowerPacks.ShapeContainer。

当我查看我的工具箱时，我看到了 Visual Basic PowerPack，但它只有 Pointer 和 PrintForm。在我今天的谷歌搜索中，我发现这个版本的 PowerPacks 在 Visual Studio 2008 SP1 中，所以我去检查我的版本类型，才发现它是我的 SQL Server R2 安装的 .4462 QFE。

但是，当我向下滚动已安装产品列表时，我在任何地方都看不到“Microsoft Visual Studio Team System 2008 Team Suite - ENU Service Pack 1 (KB945140) KB945140”行。

我知道如果先安装 Visual Studio 2008，SQL Server R2 需要安装 Visual Studio 2008 SP1，但是在SQL Server***之后安装 Visual Studio 会发生什么？***我的问题可能是我达不到 SP1 吗？有没有办法告诉？

# entity-framework - 将 WebSecurity.InitializeDatabaseConnection 移动到 Application_Start；无法连接 ---.mdf 作为数据库 --- 错误

> ID：13536807
> 
> 赞同：1
> 
> 时间：2012-11-23T23:21:09.413
> 
> 标签：entity-framework, asp.net-mvc-4

MVC4、EF5、代码优先、VS Express 2012、Win 7 Pro

当我移动

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

到 Global.asax.cs 的 Application_Start （我在 xxxConfig. 文件之前和之后都尝试过）我收到以下错误消息。

无法将文件“D:\DevProj\MVC4Test\MVC4Tst\App_Data\aspnet-MVC4Test-20121123150620.mdf”附加为数据库“aspnet-MVC4Test-20121123150620”

它从 InitializeSimpleMembershipAttribute 运行良好，我通过 SSMS 删除了所有 LocalDB 数据库。这是一个新的 MVC4 互联网项目，使用所有默认值（两天前安装了 VS 2012 Express）。唯一被编辑的是移动 WebSecurity.InitializeDatabaseConnection，从项目中排除 InitializeSimpleMembershipAttribute 并在 AccountController 中注释掉对它的引用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T02:05:34.627

SimpleMembership DB 在运行之前必须存在

```
WebSecurity.InitializeDatabaseConnection("AccountDB", "UserProfile",
              "UserId", "UserName", autoCreateTables: true); 
```

一旦创建了 SM DB（比如通过迁移），MVC4 中的最佳实践就是将对 WebSecurity 的调用封装在 Global.asax.cs 的 Application_Start 部分中。

```
 WebSecConfig.RegisterWebSec(); 
```

将 WebSecConfig.cs 文件放在 App_Start 文件夹中。

WebSecConfig.cs

```
using WebMatrix.WebData;

namespace MVC4Test
{
  public static class WebSecConfig
  {
    public static void RegisterWebSec() {
      WebSecurity.InitializeDatabaseConnection("AccountDB", "UserProfile",
              "UserId", "UserName", autoCreateTables: true);
    }
  }
} 
```

# qt - QList 索引超出范围

> ID：13536813
> 
> 赞同：0
> 
> 时间：2012-11-23T23:21:30.817
> 
> 标签：qt, indexing, qlist, qtimer

使用计时器我`checkBookings()`反复调用插槽。我能够编译并运行该程序，但是在执行上述 FOR 循环时它会崩溃。

> 错误：“QList::at 中的 ASSERT 失败：“索引超出范围”，文件 ../../../../Qt/2010.05/qt/include/QtCore/../../src/corelib /tools/qlist.h，第 455 行 传递给 C 运行时函数的参数无效。传递给 C 运行时函数的参数无效。”

我的代码是：

```
timer = new QTimer();
connect(timer,SIGNAL(timeout()),this,SLOT(checkBookings()));
timer->start(500000);

void Canvas::checkBookings()
{

 QString dateStr;

 for(int i= 0;i<=qlist.count();i++)
    {
      dateStr = qList.at(i).at(6);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T23:24:46.727

在 for 循环中将 <= 替换为 <。像这样：

```
for(int i= 0;i<qlist.count();i++)
{
  dateStr = qList.at(i).at(6);
} 
```

原因是 qList.count() 是列表中的项目数，因此您永远不想尝试使用 qList.at(qlist.count())

编辑：通过在 for 循环中有 <= 记住 for 循环的最后一次迭代 i=qlist.count()。因此，当代码在循环中执行语句时，它实际上是这样做的：

```
dateStr = qList.at(qList.count()).at(6); 
```

# java - ViewPager java.lang.OutOfMemoryError：位图大小超出 VM 预算

> ID：13536817
> 
> 赞同：5
> 
> 时间：2012-11-23T23:21:55.813
> 
> 标签：java, android, android-viewpager

> **可能重复：**
> [java.lang.OutOfMemoryError：位图大小超出 VM 预算 - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

我使用 ViewPager 显示资源文件夹中的一组图像，如果我的图像尺寸小，一切正常，

但是当我用我需要它在我的应用程序中的高清图像替换它时，它给了我这个错误：

java.lang.OutOfMemoryError：位图大小超出 VM 预算

**注1：**

我的代码中现在有 5 张图片用于测试，但最后我将有大约 30 张高清图片，

**笔记2 ：**

我想知道为什么会发生这种情况，我是 android 新手，第一次使用 viewpager 类，然后我在另一个应用程序中使用了画廊类，其中包含 30 多张高清图像并且没有例外。

任何建议将不胜感激，非常感谢

我的代码：

logcat 堆栈：

```
 FATAL EXCEPTION: main
    java.lang.OutOfMemoryError: bitmap size exceeds VM budget
at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:563)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:439)
at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:462)
at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:488)
at com.test.demo.MyPagerAdapter.<init>(MyPagerAdapter.java:42)
at com.test.demo.MainActivity.onCreate(MainActivity.java:15)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

**主要活动**

```
 public class MainActivity extends Activity {  
  private ViewPager mMyPager;
  private MyPagerAdapter mMyPagerAdapter;

public void onCreate(Bundle savedInstanceState) {   
  super.onCreate(savedInstanceState);   
    setContentView(R.layout.main);   

  mMyPager = (ViewPager) findViewById(R.id.mypages);           
  mMyPagerAdapter = new MyPagerAdapter(this);   
  mMyPager.setAdapter(mMyPagerAdapter);  }} 
```

**我的页面适配器**

```
 public class MyPagerAdapter extends PagerAdapter {   

    private ArrayList<ImageView> mViewsList;   
private Context mContext = null;   

public MyPagerAdapter(Context context) {   
    mContext = context;   
    mViewsList = new ArrayList<ImageView>();   

    Resources resource = mContext.getResources();   
   Bitmap bMap1 = BitmapFactory.decodeResource(resource,   
            R.drawable.one);   
   ImageView image1 = new ImageView(mContext);   
    image1.setImageBitmap(bMap1);      
    mViewsList.add(image1);   

    Bitmap bMap2 = BitmapFactory.decodeResource(resource,   
            R.drawable.two );   
    ImageView image2 = new ImageView(mContext);   
    image2.setImageBitmap(bMap2);      
    mViewsList.add(image2);   

    Bitmap bMap3 = BitmapFactory.decodeResource(resource,   
            R.drawable.three);   
   ImageView image3 = new ImageView(mContext);   
    image3.setImageBitmap(bMap3);      
    mViewsList.add(image3); 

    Bitmap bMap4 = BitmapFactory.decodeResource(resource,   
            R.drawable.four);   
   ImageView image4 = new ImageView(mContext);   
    image4.setImageBitmap(bMap4);      
    mViewsList.add(image4); 

    Bitmap bMap5 = BitmapFactory.decodeResource(resource,   
            R.drawable.five);   
   ImageView image5 = new ImageView(mContext);   
    image5.setImageBitmap(bMap5);      
    mViewsList.add(image5); 
               }      

@Override  
public int getCount() {   
    return mViewsList.size();   
                        }   

@Override  
public Object instantiateItem(View view, int position) {   
    View myView = mViewsList.get(position);   
    ((ViewPager) view).addView(myView);   
    return myView;   
              }   

@Override  
public boolean isViewFromObject(View view, Object object) {   
    return view == object;   
                  }   

@Override  
public void destroyItem(View view, int arg1, Object object) {   
    ((ViewPager) view).removeView((ImageView) object);   
                }   
                   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T05:24:53.317

您的适配器不应该按照您的方式编写。您应该只在 instantiateItem 方法中解码位图。

```
private Context context;
private ArrayList<Integer> mResourceList;
private Resources resource;  

public MyPagerAdapter(Context context) { 
    this.context = context;

    resource = context.getResources();

    mResourceList = new ArrayList<Integer>();     
    mResourceList.add(R.drawable.one);
    mResourceList.add(R.drawable.two);
    mResourceList.add(R.drawable.three);
    mResourceList.add(R.drawable.four);
    mResourceList.add(R.drawable.five);
}

@Override  
public Object instantiateItem(View view, int position) {   
        ImageView myView = new ImageView(context);

        Bitmap bitmap = BitmapFactory.decodeResource(resource, mResourceList.get(position) );
        myView.setImageBitmap(bitmap);

        ((ViewPager) view).addView(myView);   
        return myView;   
} 
```

现在，您需要确保您的位图不超过最大尺寸值 (2048px x 2048px)。

如果是，则必须按比例缩小图像。这可以通过将 BitmapFactory.Options 对象添加到您的 BitmapFactory.decodeResouce 参数并将 inSampleSize 设置为 2 的幂来完成。将其设置为 2 会将其采样率降低到 50%、4 到 25% 等。

```
BitmapFactory.Options options = new BitmapFactory.Options()
options.inSampleSize = 2

Bitmap bitmap = BitmapFactory.decodeResource(resource, mResouceList.get(position), options ); 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:25:10.827

您的问题是您在真正需要之前创建了一堆位图。

在您的`instantiateView`方法中，创建`ImageView`'s 并加载位图并将它们设置在那里。如果需要，请使用 ArrayList 来保存资源整数，以便在需要时知道要加载哪些图像。这样，垃圾收集将根据需要删除位图，并且不会导致内存问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:15:11.790

您的位图尺寸非常大，因此请在加载之前尝试缩放您的位图。缩放位图的语法

```
Bitmap bitmapName= Bitmap.createScaledBitmap(sourceBitmap, width, height,
                        true); 
```

其中宽度和高度是您希望图像的大小。

# asp.net - 正确保护 IIS 7 读/写文件夹

> ID：13536823
> 
> 赞同：5
> 
> 时间：2012-11-23T23:22:54.463
> 
> 标签：asp.net, iis-7

我正在运行 IIS 7 和 ASP.NET 4。它是一个在线图表应用程序，其中一个文件夹需要具有读/写访问权限。用户不会直接将任何内容上传到此文件夹中；相反，他们配置图表设置，然后 ASP.NET 在服务器上生成图表并将其作为图像保存到该读/写文件夹中。用户被重定向以从该文件夹下载图表的图像。

为了允许 IIS/ASP.NET 将图像保存到文件夹中，我将 WRITE 权限授予 IIS AppPool/ChartApp 帐户。

但是，我担心对 HTTP 开放的文件夹具有写入权限。虽然没有通过我的站点将文件上传到该文件夹​​的直接方法，但我担心黑客会找到上传脚本然后执行它的方法。这些是有效的担忧吗？我还需要做些什么来保护这样的读/写文件夹吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:29:19.967

配置是健全的和正常的标准设置。正如您所指出的，除非您添加文件，否则无法上传文件。

如果您对此特别偏执，您可以设置一个新用户帐户并将该帐户用作“匿名用户”帐户（这是您网站上的普通浏览用户使用的凭据），并确保该帐户没有 write AppPool 帐户可以访问。匿名用户默认使用 AppPool 身份。

[IIS/ASP.NET 的所有用户帐户是什么？它们有何不同？](https://stackoverflow.com/questions/5729264/what-are-all-the-user-accounts-for-iis-asp-net-and-how-do-they-differ)具有每种不同帐户类型的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:52:48.390

我最终做的是使用不同的帐户来写入文件。[本文中](http://support.microsoft.com/kb/306158#4)的代码非常适合模拟。写入文件的帐户具有写入权限，“主”AppPool 帐户仍然是只读的。

# r - strtoi 无法将字符串转换为整数，返回 NA

> ID：13536832
> 
> 赞同：8
> 
> 时间：2012-11-23T23:24:36.430
> 
> 标签：r

从字符串到整数的 32 位二进制字符串转换失败。见下文

```
strtoi("10101101100110001110011001111111", base=2)
# [1] NA 
```

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T23:38:58.017

看起来`strtoi`无法处理大于`2^31`：

```
strtoi("1111111111111111111111111111111", base=2L)
# [1] 2147483647
strtoi("10000000000000000000000000000000", base=2L)
# [1] NA 
```

这是我的机器（也可能是你的机器）可以处理的最大整数：

```
.Machine$integer.max
# [1] 2147483647 
```

请注意，文档确实警告溢出（来自`?strtoi`）：

> 无法解释为整数或会溢出的值将返回为`NA_integer_`.

您可以做的是编写自己的函数，将输出作为数字而不是整数返回：

```
convert <- function(x) {
    y <- as.numeric(strsplit(x, "")[[1]])
    sum(y * 2^rev((seq_along(y)-1)))
}

convert("1111111111111111111111111111111")
# [1] 2147483647
convert("10000000000000000000000000000000")
# [1] 2147483648 
```

# scala - Scala App DelayedInit 导致方法中的初始化失败

> ID：13536837
> 
> 赞同：0
> 
> 时间：2012-11-23T23:25:33.497
> 
> 标签：scala

代码片段：

```
object WTF extends App {
    test
    val mymap = Map("Alice" -> 1, "Bob" -> 2, "Charlie" -> 3, "Dave" -> 4)
    println("outter mymap="+mymap)
    def test { println("inner mymap="+mymap) }
} 
```

产生以下输出：

```
inner mymap=null
outter mymap=Map(Alice -> 1, Bob -> 2, Charlie -> 3, Dave -> 4) 
```

1.  为什么inner先于outter打印？

2.  为什么测试打印一个空的 mymap？

3.  DelayedInit 在 2.9.2 上是否损坏，除了删除“扩展应用程序”并编写我自己的主要方法之外，是否有办法初始化内部 mymap？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T23:34:29.213

问题解决了：

```
object WTF extends App {
    val mymap = Map("Alice" -> 1, "Bob" -> 2, "Charlie" -> 3, "Dave" -> 4)
    println("outter mymap="+mymap)
    test
    def test { println("inner mymap="+mymap) }
} 
```

# qt - Qt - 如何改进我的上下文菜单

> ID：13536839
> 
> 赞同：1
> 
> 时间：2012-11-23T23:26:12.437
> 
> 标签：qt

在这个论坛的访问者的帮助下，我在 QListWidget 中制作了一个自定义上下文菜单。现在我试图解决一个问题，即当用户右键单击小部件但鼠标没有悬停在任何项目上时菜单正在显示。当这种情况发生时，我希望菜单不显示。我一直在考虑明显的情况 - 鼠标是否悬停在小部件中的某个项目上？但我不知道该怎么做。预先感谢您的所有答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T00:26:07.680

由于您没有显示当前如何创建上下文菜单，因此我将从一开始就假设...

1.  将小部件的[contextMenuPolicy](http://qt-project.org/doc/qt-4.8/qwidget.html#contextMenuPolicy-prop)设置为[Qt::CustomContextMenu](http://qt-project.org/doc/qt-4.8/qt.html#ContextMenuPolicy-enum)

2.  将小部件[customContextMenuRequested](http://qt-project.org/doc/qt-4.8/qwidget.html#customContextMenuRequested)信号连接到将显示您的自定义菜单的插槽

3.  插槽将在本地小部件坐标中接收 QPoint。[您可以使用此 QPoint 通过QListWidget.itemAt(QPoint)](http://qt-project.org/doc/qt-4.8/qlistwidget.html#itemAt)找出该点下方的项目。然后，您可以验证该指针。如果它是有效的项目，请在该点显示您的菜单（或一些适合您的偏移量）。有效项表示非空指针。

这是 PyQt 中的示例。你可以把它翻译成 Qt

```
class Widget(QtGui.QWidget):

    def __init__(self,parent=None):
        super(Widget, self).__init__(parent)

        self.list = QtGui.QListWidget()
        self.list.setContextMenuPolicy(QtCore.Qt.CustomContextMenu)
        self.list.customContextMenuRequested.connect(self.handleContext)

        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.list)

        self.list.addItems(["one", "two"])

    def handleContext(self, pos):
        item = self.list.itemAt(pos)
        if item is not None:
            menu = QtGui.QMenu("Context Menu", self)
            menu.addAction("FOO")
            ret = menu.exec_(self.list.mapToGlobal(pos)) 
```

在 PyQt4 中，如果给定位置的项目是`None`，那么它是一个空白空间。在 Qt 中，它应该是一个空指针。

# ajax - 除非刷新页面，否则 Java Bean 不会更新

> ID：13536842
> 
> 赞同：0
> 
> 时间：2012-11-23T23:26:47.507
> 
> 标签：ajax, jsp, jakarta-ee, servlets

我只是一个菜鸟，我正在努力学习 JSP（我正在使用 scriptlet）、servlet、bean 和 Ajax。我正在通过调用 servlet（通过 Ajax）来验证一些注册表单。每次插入一个字符时，都会调用 Ajax 函数并将“值”发送到一个 servlet，该 servlet 的工作是检查该值是否正常。servlet 获取一个 HttpSession，然后对传递的值进行操作并将其保存到 bean 中，最后设置`session.setAttribute("bean_name", bean)`. 在 JSP 中，我插入了`jsp:usebean`带有 scope=session 的标签。例如，我在检索值时没有问题`<%= bean.getUsername()%>`，但问题是所有表单值**都不会更新，除非我刷新页面**。

会是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:40:43.180

您对 Servlet 进行 AJAX 调用。Servlet 完成它需要做的事情，并呈现响应。但是，AJAX 调用是在页面已经呈现*之后通过 JavaScript 进行的。*

您需要做的是编辑发出 AJAX 调用的 JavaScript 代码。一旦发生 AJAX 调用，您的 JavaScript 代码必须等到 Servlet 返回响应，然后使用客户端工具（例如 DHTML）来编辑已经呈现的页面。

# math - 随机函数和计算百分比

> ID：13536843
> 
> 赞同：0
> 
> 时间：2012-11-23T23:26:59.197
> 
> 标签：math, random

使用具有这些功能的随机库：

`randomChance(p) Returns true with the probability indicated by p.`

`randomInteger(low, high) Returns a random integer in the range low to high, inclusive.`

什么是实现考虑百分比、1/4 或 1/3 等的“随机选择器”的最简单方法......我得到了一个带有键/值对的数组。例如`"a"`，migth 的值为 2 且`"b"`值为 2。两者都有 1/2 的机会。

最大值将是数组的大小，因为它只包含唯一的项目。该`randomChance()`函数的范围介于`0.0 - 1.0`1 = 100% 之间。如果我的数组大小是 4，那么“让 4 为 1”的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:35:32.873

假设你有：

```
a = 2, b = 2, c = 1, d = 3 
```

现在让它：

```
a = 2, b = 4, c = 5, d = 8 
```

创建一个从 1 到 MaxVal 的随机数（最后一个键的值，在本例中为 8）。选择 Value >= RandomNum 的第一个 Key

**编辑**

我制作了一个小型 VB.Net 来展示算法及其工作原理。代码并不意味着：好的、优雅的、高性能的或可读的。

```
Module Module1

    Private Class Value
        Public vOrg, vRecalc, HitCount As Integer
        Public Key As String
        Public Sub New(s, v1, v2, c)
            Key = s : vOrg = v1 : vRecalc = v2 : HitCount = c
        End Sub
    End Class

    Sub Main()

        ' set initial values
        Dim KVP() As Value = {New Value("A", 2, 0, 0),
                              New Value("B", 2, 0, 0),
                              New Value("C", 1, 0, 0),
                              New Value("D", 3, 0, 0)}
        ' recalc values
        For i = 0 To KVP.Length - 1
            If i = 0 Then KVP(0).vRecalc = KVP(0).vOrg Else KVP(i).vRecalc = KVP(i).vOrg + KVP(i - 1).vRecalc
        Next
        ' do test
        Dim r As New Random
        Dim runs As Integer = 1000 * 1000, maxval As Integer = KVP(KVP.Length - 1).vRecalc
        For i = 1 To runs
            Dim RandVal = r.Next(1, maxval + 1)
            Dim chosen As Integer = (From j In Enumerable.Range(0, KVP.Length) Where KVP(j).vRecalc >= RandVal Take 1 Select j)(0)
            KVP(chosen).HitCount += 1
        Next
        ' ouput results
        For Each kv In KVP
            Console.WriteLine("{0} was chosen with {1:F3} propability, expected was {2:F3}", kv.Key, kv.HitCount / CDbl(runs), kv.vOrg / CDbl(maxval))
        Next

        Console.ReadLine()

    End Sub

End Module 
```

输出样本：

```
A was chosen with 0.250 propability, expected was 0.250
B was chosen with 0.251 propability, expected was 0.250
C was chosen with 0.124 propability, expected was 0.125
D was chosen with 0.375 propability, expected was 0.375 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:41:23.570

只需将 randomChance() 结果和数组长度相乘即可。它会为您提供 [0,array_length-1] 范围内的索引，您可以使用它来访问数组

```
array_index = (unsigned int)(randomChance(p) * (array_length - 1)); 
```

在您的示例中，也许您的意思是“让 3 成为 1”（而不是 4）。长度为 4 的数组的最后一个索引是 3。

# mknetworkkit - MKNetworkKit 使用 addDependency 下载多个文件并等待所有文件准备好

> ID：13536844
> 
> 赞同：2
> 
> 时间：2012-11-23T23:27:10.563
> 
> 标签：mknetworkkit

我希望我的应用程序下载一个 zip 文件和几部电影。在继续我的应用程序之前，我想等待所有这些都准备好。这是到目前为止的代码。问题是，一旦下载并解压缩 zip 文件，应用程序将始终继续运行，它不会等待电影完成。我已将所有电影操作设置为“主要”操作中的依赖项，但这并没有帮助。我错过了什么？

```
// create our network engine
MKNetworkEngine* engine = [[MKNetworkEngine alloc]
                           initWithHostName:hostName customHeaderFields:nil];

// Main operation for our app download.
MKNetworkOperation *op = [engine operationWithPath:appUpdateFile];

// If we have videos, create operations for them
// We add them to an array, so we can start them later

NSMutableArray *videoOperations = [[NSMutableArray alloc] init];
if ([appVideos isEqual:@"no_videos"]) {
    NSLog(@"We have no videos");
} else {
    for(id anObject in appVideos) {
        MKNetworkOperation *opVideo = [engine operationWithPath:[anObject valueForKey:@"downloadUrl"]];
        // add this operation as a dependency to our main operation
        [op addDependency:opVideo];
        NSString *videoFilePath = [videoFolder stringByAppendingPathComponent:[anObject valueForKey:@"name"]];
        [opVideo addDownloadStream:[NSOutputStream outputStreamToFileAtPath:videoFilePath append:YES]];
        [opVideo addCompletionHandler:^(MKNetworkOperation *completedOperation) {
            NSLog(@"We downloaded video %@", [anObject valueForKey:@"name"]);
        } errorHandler:^(MKNetworkOperation *completedOperation, NSError *error) {
            NSLog(@"Error downloading video %@: %@", [anObject valueForKey:@"name"], error);
        }];
        [videoOperations addObject:opVideo];
    }
}

[op addDownloadStream:[NSOutputStream outputStreamToFileAtPath:filePath append:YES]];

[op addCompletionHandler:^(MKNetworkOperation *completedOperation) {
    ZipArchive *zipArchive = [[ZipArchive alloc] init];

    if([zipArchive UnzipOpenFile:filePath]) {
        if ([zipArchive UnzipFileTo:htmlContent overWrite:YES]) {
            //unzipped successfully
            [[NSFileManager defaultManager] removeItemAtPath:filePath error:NULL];
            NSString *htmlContentPath = [htmlContent stringByAppendingPathComponent:@"/htmlContent/html/modules/index/index.html"];
            NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            [defaults setObject:newAppVersion forKey:@"appVersion"];
            [defaults setObject:htmlContentPath forKey:@"htmlContent"];
            [defaults synchronize];
        } else {
            NSLog(@"Failure To Unzip Archive %@", filePath);
        }
    } else  {
        NSLog(@"Failure To Open Archive %@", filePath);
    }
} errorHandler:^(MKNetworkOperation *completedOperation, NSError *error) {
    NSLog(@"%@", error);
}];

for(id opVideo in videoOperations) {
    [engine enqueueOperation: opVideo];
}
[engine enqueueOperation: op];

return op; 
```

在我想使用它的视图中，我这样做：

```
 self.updateOperation = [ApplicationDelegate.internetUpdater checkAndUpdate];

    [self.updateOperation onDownloadProgressChanged:^(double progress) {
        pb.progress = progress;
    }];

    [self.updateOperation addCompletionHandler:^(MKNetworkOperation *completedOperation) {
        bottomLabel.text = @"Done";
        [UIView animateWithDuration:0.6
                              delay: 1.0
                            options: UIViewAnimationOptionCurveEaseIn
                         animations:^{
                             v.alpha = 0;
                         }
                         completion:^(BOOL finished){
                             [parentV removeFromSuperview];
                         }
         ];

        [self.delegate loginViewControllerDidFinish:self];
        [self dismissModalViewControllerAnimated:YES];
    } errorHandler:^(MKNetworkOperation *completedOperation, NSError *error) {
        NSLog(@"%@", error);
    }]; 
```

即使电影仍在下载，它将始终运行此完成块。关于为什么这不能像我预期的那样工作的任何提示？还是我错误地解释了依赖关系？

# iphone - XCode - 在运行多个应用程序实例时，在应用程序退出后查看控制台输出

> ID：13536846
> 
> 赞同：0
> 
> 时间：2012-11-23T23:27:31.250
> 
> 标签：iphone, xcode, debugging, exit, nslog

当我从 XCode 调试器运行两个应用程序时，我可以在控制台中看到它们自己的 NSLog。但是当一个应用程序存在一个`exit`调用时，它会被杀死，我再也看不到控制台日志了。我该怎么做才能看到它。

换句话说，我正在调试应用程序，当发生不好的事情时，我在日志中放了一条消息，然后退出。我想看看发生那件事的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:34:51.057

选择所谓的“日志导航器”并选择调试会话，见图

![在此处输入图像描述](../Images/a09a197a9cc689f31b73332841958b4d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:32:18.213

如果您将`exit`呼叫替换为

```
raise(SIGINT); 
```

如果您在附加调试器的情况下运行，程序的执行将暂停。如果您在没有调试器的情况下运行（即在生产中），该应用程序将被终止。

# mysql - 通过浏览器编辑数据库的优雅方式？

> ID：13536854
> 
> 赞同：1
> 
> 时间：2012-11-23T23:28:05.650
> 
> 标签：mysql, web-applications, client-side, server-side

我的项目涉及我当前存储在 MySQL 数据库中的文本/数字数据网格。用户可以在网格底部输入新的数据行（例如数据库中的新条目），或者可以删除行。...将其视为非常原始的基于浏览器的 Excel。

现在我正在使用 PHP/MySQL 和一些 javascript，但它变得有点混乱。（像向网格中添加新列/条目这样的次要功能过于复杂。）我也不喜欢使用 PHP 表单（$_POST 等）进行烦人的重定向等。

有没有更好的语言或框架可以使用？我认为基本问题是我想将客户端和服务器端编码无缝地结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:40:07.813

如果你想坚持使用 php，我的一位同事创建了这个：[OpenJS DataGrid](http://square-bracket.com/openjs)

一些（许多）youtube教程：

1.  [OpenJS Grid v2 - 很棒的 jQuery 数据表](http://www.youtube.com/watch?v=hFbYZbz03w0&list=UUDn9DtRM2xEFrhbzL5e0BeQ&index=4&feature=plcp)
2.  [OpenJS Grid 1.4（添加和删除）](http://www.youtube.com/watch?v=sTSSmeQdDYo&feature=relmfu)
3.  [OpenJS Grid - 一个开源的 JQuery 网格](http://www.youtube.com/watch?v=NHwWesxrqiU&feature=relmfu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:30:44.860

试试 DataTables.net，它是一个用于表格数据的 Web 2.0 框架。您可以告诉它使用 Ajax 并根据需要执行服务器端，例如使用 PHP 和 MySQL。这里的例子：

*   基本：[http ://datatables.net/release-datatables/examples/server_side/editable.html](http://datatables.net/release-datatables/examples/server_side/editable.html)
*   另外尝试编辑器扩展：[http ://editor.datatables.net/](http://editor.datatables.net/)

# c++ - 未定义的内部链接和未定义的符号错误

> ID：13536856
> 
> 赞同：0
> 
> 时间：2012-11-23T23:28:06.303
> 
> 标签：c++, xcode

我尝试在 Xcode 上编译一个简单的程序并得到以下消息：

`function<anonymous namespace>::Initialize' has internal linkage but is not defined`

`function<anonymous namespace>::HandleBadInput' has internal linkage but is not defined`

```
Undefined symbols for architecture x86_64:
  "(anonymous namespace)::Initialize()", referenced from:
      _main in main.o
  "(anonymous namespace)::HandleBadInput()", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

头文件如下所示：

```
#ifndef WJKErrorHandling
#define WJKErrorHandling

namespace WJKErrorHandling{

    void Initialize(void);
    int HandleBadInput(void);

}

#endif // defined(WJKErrorHandling) 
```

实现文件如下所示：

```
#include <iostream>
#include "WJKErrorHandling.h"

namespace WJKErrorHandling{

    void Initialize(void){

        std::cin.exceptions(std::cin.failbit);
    }

    int HandleBadInput(void){

        std::cerr << "Input Error: wrong type?\n";
        std::cin.clear();

        char BadInput[5];
        std::cin >> BadInput;

        return 1;
    }

} 
```

main.cpp 看起来像这样：

```
#include <iostream>
#include "WJKErrorHandling.h"

void Prompt (void){

    //Prompts the user to begin entering numbers

    std::cout << "Begin entering numbers: \n";
}

float GetNumber (void){

    std::cout << "Number: \n";
    float Number;
    std::cin >> Number;
    return Number;
    }

std::string GetString (void){

    std::cout << "String: \n";
    std::string String;
    std::cin >> String;
    return String;

}

int main()
{
    Prompt();
    WJKErrorHandling::Initialize();

    int ReturnCode = 0;

    try{

        float Number = GetNumber();
        std::cout << Number;
        std::string String = GetString();
        std::cout << String;

        std::cout << "SUCCESS!!!!\n";

    }
    catch(...){

        ReturnCode = WJKErrorHandling::HandleBadInput();
    }

    return ReturnCode;
} 
```

到目前为止，我已经尝试找到答案，但我还没有理解我找到的任何帖子。我是 C++ 新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:41:18.103

您的 #define Guard 导致名称查找问题。

更改为以下样式应该可以解决问题：

```
#ifndef WJK_ERROR_HANDLING_H
#define WJK_ERROR_HANDLING_H 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T08:02:49.697

您还可以使用非标准但更惯用`#pragma once`的 ，根据其[维基百科页面](http://en.wikipedia.org/wiki/Pragma_once)，所有主要编译器都支持它。

由于许多编译器具有识别包含防护的优化，因此两者之间没有速度优势。就我自己而言，我看到了以下优点`#pragma once`：

*   它只有一个含义（而定义服务于不同的目的）并且不会与其他事物发生冲突（例如，您的情况下的命名空间）。
*   它很少打字，也很容易记住。
*   您不会因为拼写错误（`WJKERRORHANDLNG_H`, ups 和 I 丢失）而出现错误，因为您将标头作为另一个副本开始并且忘记更改包含保护，这会给您带来相当讨厌的错误搜索会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:41:48.043

事实证明这是一个糟糕的包含守卫：

```
#ifndef WJKErrorHandling
#define WJKErrorHandling 
```

因为您稍后尝试将`WJKErrorHandling`其用作命名空间，但宏使它消失了。

将您的包含防护更改为：

```
#ifndef WJKERRORHANDLING_H
#define WJKERRORHANDLING_H 
```

这可能更惯用，不太可能与某事发生冲突。

# android - 如何在 AndEngine 中创建循环动画？

> ID：13536858
> 
> 赞同：0
> 
> 时间：2012-11-23T23:28:32.840
> 
> 标签：android, animation, andengine, texturepacker

我想做一个“链”或循环动画，如下所述：

LABEL start do Anim1->Anim2->Anim3->Anim4 GOTO start

上面会做一个循环循环：Anim1->Anim2->Anim3->Anim4 然后回到 Anim1 等等。

我无法将所有 PNG 合并到一个纹理中，因为 Andengine/Android 在加载资源方面受到限制。但是，当我将最初的大图块分成 4 个小图块时，一切正常。

我尝试在 Anim1 中使用 AnimationListener。当 onAnimationFinished() 被调用时，我分离 Anim1，运行 Anim2 并在内部函数链中执行此操作。但是，我在Anim4的时候，不知道怎么回到起点，附加Anim1。

注意：如果您知道我如何打包一组 150 个 PNG，这些 PNG 单独很大，但适合 4096x4096 像素的图块，那么所有这些问题都可以解决。

谢谢您的帮助！

编辑（按照 JiMMaR 提出的解决方案）：我正在使用 Texture Packer，整体 Texture 超过 4096*4096，导致 Android 上出现 OutOfMemory 错误。

目前，我已将纹理分成四个图块和四个 PNG 图块图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:22:50.690

您应该发布一些代码，以便我们可以看到实现。

尝试在每个中使用多个带有动画侦听器的 AnimatedSprite。这样你就可以在`onAnimationFinished()`调用中启动下一个精灵的动画。

```
private class AnimationLooperListener implements IAnimationListener{

    private AnimatedSprite nextSpriteToAnimate;

    public AnimationLooperListener(AnimatedSprite sprite){
        nextSpriteToAnimate = sprite;
    }

    /** other methods  are hidden */

    public void onAnimationFinished(AnimatedSprite sprite){
        sprite.setVisible(false);
        nextSpriteToAnimate.setVisible(true);
        nextSpriteToAnimate.animate(100, new AnimationLooperListener(sprite);
    }

}

AnimatedSprite sprite1 = new AnimatedSprite(0, 0, tiledTextureRegion, vertex);
AnimatedSprite sprite2 = new AnimatedSprite(0, 0, tiledTextureRegion, vertex);
AnimatedSprite sprite2 = new AnimatedSprite(0, 0, tiledTextureRegion, vertex);

AnimationLooperListener listener1 = new AnimationLooperListener(sprite2);
AnimationLooperListener listener2 = new AnimationLooperListener(sprite3);
AnimationLooperListener listener3 = new AnimationLooperListener(sprite1);

sprite1.animate(100, listener1);
sprite2.animate(100, listener2);
sprite3.animate(100, listener3); 
```

这样，您就有了一个动画循环，在可以使用多个 TiledTextureRegions 创建的几个精灵之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:40:42.123

您可以使用“Texture Packer”查看所有图像是否适合 4096 x 4096。

[您可以从这里](http://www.codeandweb.com/texturepacker)下载 Texture Packer 。（注意：Texture Packer 也支持 AndEngine 数据输出）

您可以使用“BuildableBitmapTextureAtlas”和“BlackPawnTextureAtlasBuilder”类将您的PNG 打包到一个纹理图集中。

# java - 在具有重定向输出的脚本中运行 jar 文件（在循环内）

> ID：13536865
> 
> 赞同：0
> 
> 时间：2012-11-23T23:28:59.850
> 
> 标签：java, bash, batch-file

我正在尝试多次运行一个 jar 文件（在一个循环中）并将其输出重定向到一个文件（使用 append >> 运算符）。我正在运行并且必须继续使用 Windows 7。我尝试在 Windows 批处理文件中执行此操作并遇到以下问题，因此我安装了 Cygwin 以使用 bash 脚本。我的脚本如下：

```
for i in {1..10..1}
  do
    echo "Run $i"
    java -jar myjar.jar -cl >> runresults.txt
    echo "Sleeping..."
    sleep 60
    echo "Awake!"
done 
```

问题：脚本（Windows 批处理或 Cygwin bash）在挂断之前只运行一些迭代（通常不超过 3 次）。没有给出错误。我添加了 sleep 命令以确保先前的迭代有时间在尝试进行下一次运行之前释放任何锁。我已将睡眠时间增加到 200 多秒，但行为仍然相同。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:51:10.943

```
if [ ! -f runresults.txt ]; then
    touch runresults.txt
fi

for i in {1..10}
  do
    echo "Running... $i"
    java -jar myjar.jar >> runresults.txt &
    echo "Sleeping 2 seconds..."
    sleep 2
done 
```

# typescript - 将模块作为类导入 (dojo)

> ID：13536872
> 
> 赞同：4
> 
> 时间：2012-11-23T23:29:51.877
> 
> 标签：typescript

# 背景

目前在我工作的地方，我们使用 dojo.requires 来导入我们在每个类中使用的所有需要​​的类。然而，在 Dojo 2.0 中，他们正在摆脱 dojo.require 并采用 amd require 样式（[http://livedocs.dojotoolkit.org/releasenotes/migration-2.0](http://livedocs.dojotoolkit.org/releasenotes/migration-2.0)）：

```
require(["dijit/form/Button", "dojox/layout/ContentPane", ...], 
   function(Button, ContentPane, ...){
    // CODE HERE
}); 
```

我们目前在自己的 .d.ts 文件中定义了我们的 dojo/dijit 类，如下所示：

```
module dijit.form{
    export class Button extends dijit.form._FormWidget {
        showLabel : bool;
        _onClick (e:any) : any;
        _onButtonClick (e:any) : any;
        _setShowLabelAttr (val:any) : any;
        _clicked (e:any) : any;
        setLabel (content:String) : any;
        _setLabelAttr (content:String) : any;
        _setIconClassAttr (val:String) : any;
    }
} 
```

这允许我们像下面这样扩展这些类：

```
class CustomButton extends dijit.form.Button {} 
```

# 问题

我们希望能够让 typescript 生成 Dojo 2.0 (amd) 样式要求，并执行以下操作：

```
import Button = module("dijit/form/Button")
class CustomButton extends Button {} 
```

我们曾希望编译成如下内容：

```
define(["require", "exports", "dijit/form/Button"], function(require, exports, Button)    
{
    ///....Generated class    
}) 
```

但是，这不起作用，因为 import 仅适用于模块而不适用于类。我们收到如下错误：

```
The name '"dijit/form/Button"' does not exist in the current scope
A module cannot be aliased to a non-module type 
```

我们还尝试定义 dijit 类，例如：

```
declare module "dijit/form" {
    export class Button....
} 
```

有没有办法可以实现我们正在尝试做的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:22:30.237

在 AMD 模块中，模块等同于文件，因此如果您有一个名为：

*dijit.forms.ts*甚至*dijit.forms.d.ts*

你可以使用加载它

```
import forms = module("dijit.forms");

var button = new forms.Button(); 
```

在 AMD 应用程序的定义文件中，您不需要声明模块，因为文件就是模块。

# meteor - 向 Meteor 记录添加用户字段？

> ID：13536884
> 
> 赞同：0
> 
> 时间：2012-11-23T23:31:19.790
> 
> 标签：meteor

现在，我的`Posts`模型有一个`title`和一个`content`字段：

**客户端/client.js：**

```
Meteor.subscribe('all-posts');

Template.posts.posts = function () {
  return Posts.find({});
};

Template.posts.events({
  'click input[type="button"]' : function () {
    var title = document.getElementById('title');
    var content = document.getElementById('content');

    if (title.value === '') {
      alert("Title can't be blank");
    } else if (title.value.length < 5 ) {
      alert("Title is too short!");
    } else {
      Posts.insert({
        title: title.value,
        content: content.value,
        author: userId #this show displays the id of the current user
      });

      title.value = '';
      content.value = '';
    }
  }
}); 
```

**应用程序.html：**

```
 <!--headder and body-->
      <div class="span4">
        {{#if currentUser}}
          <h1>Posts</h1>
          <label for="title">Title</label>
          <input id="title" type="text" />
          <label for="content">Content</label>
          <textarea id="content" name="" rows="10" cols="30"></textarea>

          <div class="form-actions">
            <input type="button" value="Click" class="btn" />
          </div>
        {{/if}}
      </div>

      <div class="span6">
        {{#each posts}}
          <h3>{{title}}</h3>
          <p>{{content}}</p>
          <p>{{author}}</p>
        {{/each}}
      </div>
    </div>
  </div>
</template> 
```

我尝试添加一个`author`字段（已经添加`meteor add accounts-password`和`accounts-login`）：

```
author: userId 
```

但它只显示当前登录用户的 ID。我希望它显示帖子作者的电子邮件。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:17:00.183

我想你可以收到电子邮件

```
Meteor.users.findOne(userId).emails[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T20:00:53.903

@danielsvane 是正确的，但是由于您的 Post 文档的`author`字段存储的`_id`是作者而不是电子邮件地址，因此您需要一个模板帮助程序，以便模板知道如何获取电子邮件地址。尝试以下操作：

```
// html
...
<div class='span6'>
    {{#each posts}}
        {{> postDetail}}
    {{/each}}
</div>
...

<template name="postDetail">
    <h3>{{title}}</h3>
    <p>{{content}}</p>
    <p>{{authorEmail}}</p>
</template>

// javascript
Template.postDetail.helpers({
    // assuming the `author` field is the one storing the userId of the author
    authorEmail: function() { return Meteor.users.findOne(this.author).emails[0]; }
}); 
```

如果它总是显示当前用户而不是帖子作者的用户，那么问题在于您如何`userId`在事件处理程序中设置变量的值，这不是您在问题中显示的代码.

# vb.net - VB.net第二个字符串找到getbetween

> ID：13536885
> 
> 赞同：0
> 
> 时间：2012-11-23T23:31:28.700
> 
> 标签：vb.net, substring

我有一个函数可以给我两个单词之间的文本：

```
Private Shared Function GetBetween(ByRef strSource As String, ByRef strStart As String, ByRef strEnd As String, Optional ByRef startPos As Integer = 0) As String
    Dim iPos As Integer, iEnd As Integer, lenStart As Integer = strStart.Length
    Dim strResult As String
    strResult = String.Empty
    iPos = strSource.IndexOf(strStart, startPos)
    iEnd = strSource.IndexOf(strEnd, iPos + lenStart)
    If iPos <> -1 AndAlso iEnd <> -1 Then
        strResult = strSource.Substring(iPos + lenStart, iEnd - (iPos + lenStart))
    End If
    Return strResult
End Function 
```

所以我的html代码是：

```
<div class="upper-right-section">
            <div class="header-stats">

    <div class="stat-entry">
        <span class="stat-value">48998</span>
  <span class="stat-name">iscritti</span>

    </div>

    <div class="stat-entry">
        <span class="stat-value">22760801</span>
  <span class="stat-name">visualizzazioni video</span>

    </div>

  </div>

          <span class="valign-shim"></span>
        </div> 
```

我有两次`<span class="stat-value">`，我想获得第二次比赛的价值，我该怎么办？谢谢，马特奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:57:00.883

对于一般的 html 解析，HAP 或 CSQuery 非常好，但是如果这是您程序中的一个孤立案例，并且您确信 html 源将保持不变，您可以使用以下内容：

```
Dim value As String = Split(Split(theHtmlStringHere, "<span class=""stat-value"">")(2), "</span>")(0) 
```

# c++ - UnixTime 到可读日期

> ID：13536886
> 
> 赞同：11
> 
> 时间：2012-11-23T23:31:28.970
> 
> 标签：c++, date, time, unix-timestamp

将 UnixTime 转换为日期的最佳方法是什么？

是否有它的功能或算法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T23:38:25.847

Unix 时间是自纪元 (1970-01-01) 以来的秒数。根据您的意思，您可以`struct tm`使用[localtime将其转换为 a 或使用](http://man7.org/linux/man-pages/man3/localtime.3.html)[strftime](http://man7.org/linux/man-pages/man3/strftime.3.html)将其转换为字符串。

```
time_t t = time(NULL);
struct tm *tm = localtime(&t);
char date[20];
strftime(date, sizeof(date), "%Y-%m-%d", tm); 
```

* * *

作为本地时间的手册

> 返回值指向一个静态分配的结构，随后调用任何日期和时间函数可能会覆盖该结构。

这就是一些人所说的数据竞赛。当两个或多个线程`localtime`同时调用时会发生这种情况。

为了避免这种情况，一些人建议使用`localtime_s`Microsoft 独有的功能。在 POSIX 系统上，您应该`localtime_r`改用

> localtime_r() 函数的作用相同，但将数据存储在用户提供的结构中。

用法看起来像

```
time_t t = time(NULL);
struct tm res;
localtime_r(&t, &res); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:44:15.820

我假设你有时间在`time_t`. 首先，您需要将其转换为`struct tm`. 您可以使用[`localtime`](http://www.cplusplus.com/reference/clibrary/ctime/localtime/)或执行此操作[`gmtime`](http://www.cplusplus.com/reference/clibrary/ctime/gmtime/)，具体取决于您要使用本地时区还是 GMT。

然后，您可以将其格式化`struct tm`为带有[`strftime`](http://www.cplusplus.com/reference/clibrary/ctime/strftime/). 例如，要获得一个日期，就像`2012-11-24`您使用 format一样`"%Y-%m-%d"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-02T12:53:54.753

另请参阅[将 Unix/Linux 时间转换为 Windows FILETIME](https://stackoverflow.com/questions/3585583/convert-unix-linux-time-to-windows-filetime/41443329#41443329)

此函数应将 UnixTime 转换为 Windows SYSTEMTIME

```
SYSTEMTIME intChromeTimeToSysTime(long long int UnixTime)
{
    ULARGE_INTEGER uLarge;
    uLarge.QuadPart = UnixTime;
    FILETIME ftTime;
    ftTime.dwHighDateTime = uLarge.HighPart;
    ftTime.dwLowDateTime = uLarge.LowPart;
    SYSTEMTIME stTime;
    FileTimeToSystemTime(&ftTime, &stTime);
    return stTime;

} 
```

# kinect - 如何缩放 Kinect 骨架以匹配其他 Kinect 骨架

> ID：13536887
> 
> 赞同：2
> 
> 时间：2012-11-23T23:31:35.170
> 
> 标签：kinect, kinect-sdk

我有一些保存的骨架数据，数据对应我自己的骨架比例，我们称这个骨架为Sk1。我还有其他骨架数据（例如，对应于一个十岁的孩子）。让我们称之为 Sk2。

**我想将一种骨架尺寸缩放到另一种骨架尺寸，同时保持比例。**

PS：我知道 ScaleTo() 扩展方法 os Coding4Fun 库，但我并不深入了解这种方法。

我怎样才能实现它？

**编辑 Coding4Fun 的 1** Tha ScaleTo() 扩展方法对我不起作用。所以我正在尝试实现我的 ow scale 方法来缩放整个骨架，请参考[这个问题](https://stackoverflow.com/questions/13596331/kinect-skeleton-scaling-strange-behaviour)的实际代码

# magento - 在 Magento 中显示税类

> ID：13536888
> 
> 赞同：1
> 
> 时间：2012-11-23T23:31:43.850
> 
> 标签：magento

我想在产品页面上显示适用于产品的税名（与产品上配置的税类相同）。

这就是我要展示的内容：

价格：100 美元 + 样品税

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T08:14:23.167

这将返回 Tax-Class 的名称：

```
$taxClassId = $_product->getTaxClassId();
$taxClass = Mage::getModel('tax/class')->load($taxClassId);
$taxClassName = $taxClass->getClassName(); 
```

# php - PHP Works 但给出 sql 语法错误

> ID：13536889
> 
> 赞同：3
> 
> 时间：2012-11-23T23:31:52.627
> 
> 标签：php, sql, error-handling, echo

我刚刚写了这段代码，它回显了它应该做的，但是在回显语句之后它给了我错误-

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

为什么会这样？我如何解决它？

```
<?php
$myclasses = explode(',', $_SESSION['classlist']);  
$theirclasses = explode(',', $user_info['classlist']);
$common_classes = array_intersect($myclasses, $theirclasses);

if (count($common_classes) > 0) {     

    foreach ($common_classes as $class) {
        $classes = mysql_query("SELECT * FROM classes WHERE class_id = ".$class) or die(mysql_error());
        while($currentRow = mysql_fetch_array($classes)){
        echo $currentRow['class_name'];
        }
    }  
}
else {
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:35:32.100

尝试用引号包装您的查询：

```
$classes = mysql_query("SELECT * FROM classes WHERE class_id = '".$class."'") or die(mysql_error()); 
```

或使用[PDO](http://php.net/manual/en/book.pdo.php)完全更改您的查询。因为， mysql_* 函数已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T23:40:30.980

我将假设 $class 变量在传递给查询时出现问题。在这种情况下，我通常做的是将 SQL 查询分配给一个字符串变量并将其转储以立即测试整个查询。帮助我找出 SQL 语法错误或是否有任何不需要的字符。

```
<?php
$myclasses = explode(',', $_SESSION['classlist']);  
$theirclasses = explode(',', $user_info['classlist']);
$common_classes = array_intersect($myclasses, $theirclasses);

if (count($common_classes) > 0) {     

    foreach ($common_classes as $class) {
        $sql = "SELECT * FROM classes WHERE class_id = '{$class}'" ; // use {} inside double quotes
        var_dump($sql); // check out the what the query becomes 
        $classes = mysql_query($sql) or die(mysql_error());
        while($currentRow = mysql_fetch_array($classes)){
        echo $currentRow['class_name'];
        }
    }  
}
else {
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T23:36:44.273

如果 $class 为空，您将收到该错误，这将使您的查询`SELECT * FROM classes WHERE class_id =`无效。尝试引用它。如果你引用它，至少你会得到`SELECT * FROM classes WHERE class_id = ''`

```
"SELECT * FROM classes WHERE class_id = '".$class."'"; 
```

# cordova - 刚开始使用 Phonegap 并遇到 XCode 问题

> ID：13536891
> 
> 赞同：0
> 
> 时间：2012-11-23T23:32:05.790
> 
> 标签：cordova

我正在尝试从此处的 Phonegap 文档中运行“hello world”示例：

[http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

但我已经遇到了麻烦。

这是我第一次尝试使用 Xcode。

当我去构建和运行测试应用程序时，我没有运行 5.1 模拟器的选项，只有 4.3。当我编译时，我得到了 400 多个错误。

我似乎找不到任何文件表明我可能做错了什么。

我正在运行 10.8、Phonegap 2.2.0 和 XCode 4.5.2。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:52:20.333

您肯定会看到 iOS 6.0 模拟器。尝试转到“首选项”并选择“下载”选项卡。您可以下载/更新最新的 iOS 库吗？

如果没有，我建议重新安装 Xcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:41:19.953

听起来您的 Xcode / iOS sdk 设置出了点问题 - 使用新安装时，您应该只能看到 6.0 模拟器 - 较旧的模拟器可作为额外下载获得。

# java - 关闭第一个窗口后如何打开一个新窗口？

> ID：13536897
> 
> 赞同：0
> 
> 时间：2012-11-23T23:33:07.157
> 
> 标签：java, swing, window, frame

我正在这个程序中工作，在这个程序中，用户被询问不同类型的数据，但每种类型的数据都取决于以前的数据。所以我创建了三个框架，我在其中放置了第一个测验，现在我想要打开一个新窗口，当用户按下一个按钮（下一步）同时关闭第一个。到目前为止，我尝试的是在用户按下该按钮（下一步）时更改布尔变量，但是，我不知道如何从新类中引用最后一个变量。我把麻烦放在上下文中，因为你可以给我一个更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:34:52.973

打开和关闭窗口并不复杂，只涉及创建窗口实例（例如 JFrame 或 JDialog）并在它们上调用`setVisible(true)`或`setVisible(false)`。但是话虽如此，您使用了多少商业应用程序来随意向用户抛出窗口？很少，因为它是用户界面的噩梦。取而代之的是，帮您的用户一个忙，并使用 CardLayout 交换视图，并且对于您偶尔需要以模态方式获取信息的情况，请使用模态对话框，例如设置为模态的 JDialog 或 JOptionPane。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:15:08.317

这段代码只成功了一半。

```
Form2 f2 = new Form2();
if (f2 is Form2)
{
    f2.Show();
    this.Close();
}
else 
{
    Form1 f1 = new Form1();
    f1.Show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:15:19.320

我认为您可以通过在 (Next) 按钮的 ActionListener 方法中键入这些行来做到这一点：

```
dispose();
NewJFrame n = NweJFrame();
n.setVisible(true); 
```

该行将`dispose();`关闭您以前的窗口，并且假设名为 NewJFrame 的另一个新窗口将由这两行打开

```
NewJFrame n = NweJFrame();
n.setVisible(true); 
```

但在此之前，您必须编写 NewJFrame 的代码，就像为上一个窗口编写的一样。

# meteor - 如何从模板名称集合中渲染流星模板？

> ID：13536900
> 
> 赞同：7
> 
> 时间：2012-11-23T23:33:59.920
> 
> 标签：meteor

我在 Meteor 中有三个简单的模板，在服务器上有一个集合，它们的名称可以任意组合。我希望能够根据集合中的名称动态呈现这些模板。

目前我正在尝试通过使用客户端订阅集合并通过模板函数访问名称来完成此操作。不幸的是，如果我尝试在名称上运行*“>”*，Meteor 会尝试呈现变量名称而不是其值所指向的模板。

*因此，不是在template1*、*template2*和*template3*中呈现 html，而是输出仅仅是它们在页面上的名称：“template1 template2 template3”。

这是我一直在使用的代码，我希望有一种方法可以解决我的问题，而无需手动运行 Meteor.render。

服务器js：

```
TemplatesToRender = new Meteor.Collection("templatesToRender");

TemplatesToRender.insert({templateName: "template3"});
TemplatesToRender.insert({templateName: "template2"}); 
```

客户端html：

```
<body>
    {{#each templatesToRender}}
        {{> templateName}}           // meteor trying to render a template
                                     // called "templateName" instead of the 
                                     // variable inside templateName.
    {{/each}}
</body>

<template name="template1">
    <span>Template 1</span>
</template>

<template name="template2">
    <span>Template 2</span>
</template>

<template name="template3">
    <span>Template 3</span>
</template> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T06:27:48.333

你可以做一个`render`助手：

```
 Handlebars.registerHelper('render', function(name, options) {
   if (Template[name])
     return new Handlebars.SafeString(Template[name]());
 }); 
```

并与它一起使用

```
{{render templateName}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:44:37.310

你可能想试试这个

在你的 html

```
<body>

    {{> templateToRender}}

</body>

<template name="templateToRender">

    {{! use below to detect which template to render}}

    {{#if templateName "template1"}}
        {{> template1}}
    {{/if}}

    {{#if templateName "template2"}}
        {{> template3}}
    {{/if}}

    {{#if templateName "template3"}}
        {{> template3}}
    {{/if}}

</template

<template name="template1">

    <p>this is template1</p>

</template>

<template name="template2">

    <p>this is template2</p>

</template>

<template name="template3">

    <p>this is template3</p>

</template> 
```

在你的脚本中

```
Template.templateToRender.templateName = (which) ->
    # if user have a field like templateName you can do things like
    tmplName = Meteor.user().templateName
    # Session.equals will cause a template render if condition is true.
    Session.equals which, tmplName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T22:31:55.353

Meteor 1.0 今天刚刚发布，我只想在 2014 年更新这个 :)

[https://docs.meteor.com/#/full/template_dynamic](https://docs.meteor.com/#/full/template_dynamic)

```
{{> Template.dynamic template=template [data=data] }} 
```

样品用法：

```
{{#each kitten}}
   {{> Template.dynamic template=kitten_type data=this }}
{{/each}} 
```

# java - jsf - 传递 FacesContext 或使用 getCurrentInstance()

> ID：13536902
> 
> 赞同：2
> 
> 时间：2012-11-23T23:34:08.923
> 
> 标签：java, jsf

在我的 jsf 应用程序中，我有很多与静态`FacesContext`相关的实用程序方法。我总是问自己同样的问题？

我应该通过参数将上下文传递给方法吗？或使用`FacesContext.getCurrentInstance()`

例如：

```
public static <T> T getInstance(final Class<T> type, final FacesContext context, final String elExpression)
{
    return context.getApplication().evaluateExpressionGet(context, elExpression, type);
} 
```

出现了更多的混乱，因为验证器和转换器接口使用上下文作为参数。

可以有多个 FacesContext 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T10:17:36.680

调用`FacesContext.getCurrentInstance()`与传递它具有性能和功能影响。

您可能已经注意到，大多数 JSF API 本身都使用传递。这样做是因为传递比访问线程局部变量要快得多。最重要的是，通过传递，调用链中的方法可以更轻松地以受控方式包装 FacesContext。

所以通常`FacesContext.getCurrentInstance()`用于引导，然后你会使用传递。

如果它只涉及几个调用，并且冗长到你，那么`FacesContext.getCurrentInstance()`也一定要使用。请注意，如果它涉及许多调用，则可能会对性能产生一些（小）影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T01:07:33.170

在[上一个问题](https://stackoverflow.com/questions/9985350/how-to-use-facescontext-getcurrentinstance)中，BalusC 回答了这个问题：

> FacesServlet 就是创建 FacesContext 并将其作为 ThreadLocal 放入当前 HTTP 请求中的人。

如果您的实用程序将用于服务 HTTP 请求的线程以外的线程中，那么您必须传递 FacesContext[以避免空值](https://stackoverflow.com/questions/11266427/couldnt-access-facescontext-getcurrentinstance-from-thread)。除此之外，我认为它可以帮助您避免`FacesContext.getCurrentInstance()`在每种方法中进行冗长的调用。

或者你可以使用两者的组合，一个没有：

```
public static <T> T getInstance(final Class<T> type, final String elExpression){
    return JsfUtils.getInstance(type, FacesContext.getCurrentInstance(), elExpression);
}

public static <T> T getInstance(final Class<T> type, final FacesContext context, final String elExpression){
    return context.getApplication().evaluateExpressionGet(context, elExpression, type);
} 
```

这将帮助您进行性能权衡（关于访问线程本地），并且如果您愿意，将帮助您避免冗长，但您需要记住上下文中的线程安全性。

# heroku - 是否可以使用 Java 1.7 部署 heroku 战争应用程序？

> ID：13536911
> 
> 赞同：2
> 
> 时间：2012-11-23T23:35:03.137
> 
> 标签：heroku

我尝试将 system.properties 更新为 1.7，但它似乎保持在 1.6。

当我通过 Maven 部署时，system.properties 工作。

当我通过以下方式部署时：heroku deploy:war --war

它恢复到 1.6 忽略我的 system.properties。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:09:09.553

我想知道是否可能使用“heroku deploy:war”进行部署不会获取 system.properties 文件。尝试通过推送您的 Git 存储库来进行部署。

# java - 非矩形java UserControl

> ID：13536915
> 
> 赞同：2
> 
> 时间：2012-11-23T23:35:22.590
> 
> 标签：java, swing, netbeans, components, controls

*   在 .NET 中，**UserControl**可能由 Controls 组成，它可能是 Form 的一部分或更大的 UserControl 的一部分。可以使用工具箱调色板通过可视化设计器设计用户控件。

*   我发现 java **BeanForm**是 .NET UserControl 的类比。

*   我可以在 NetBeans 中使用可视化设计器设计 BeanForm

*   在我的库中，我可以从任何其他库扩展 BeanForm，并且可以使用 NetBeans 中的可视设计器设计扩展的 BeanForm。

*   **在我的主要项目中，我可以从Palette**中选择我所有的 BeanForms到我的框架上。

所以“BeanForm”是“UserControl”的java挂件。

* * *

在 .Net 中，我可以通过简单地设置 this.Region = new Region(graphicsPath) 轻松地将我的 UserControl 塑造成 Fish 或 Star 或任何我喜欢的形状。

* * *

我知道 Java 不如 C# 简单，并且我找到了**部分**描述必要步骤的 Java 示例，但我没有找到**Shaped 非矩形 BeanForm**示例。

* * *

当然，使用新的特殊 mouseClicked(MouseEvent e) 扩展 MouseAdapter——正如许多示例所建议的那样——还不够——这只是第一步。

*   **他们是否都忘记了 Dragged-Event 和 Focus 事件以及 Mouse-Entered 事件和 Mouse-Up 事件和 Mouse-Leave 事件以及所有其他典型的 JComponent 事件？**- 这样的组件**肯定不会**像真正的 Shaped JComponent 那样表现。

* * *

请给我一个 OvalComponent-BeanForm 的示例，它可以从 Palette 中取出到我的框架上，它的行为就像一个**REAL Shaped JComponent**

它应该涵盖所有必要的鼠标事件和所有必要的 MouseMotion 事件以及所有拖放事件和所有键事件，以防椭圆形具有焦点或鼠标位于椭圆形上方。

（例如，我应该能够使用 Oval 的鼠标事件并将 Oval 组件扩展为可以在框架内移动的 MovingOval 组件......）

* * *

如果这对您来说工作量太大，请概述并描述我必须实施的步骤 - 例如 MouseAdapter、KeyAdapter、可能是 DragDropAdapter 或任何必要的。

请指出我该怎么做！

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:33:57.067

每个`java.awt.Shape`人都有一种`contains()`方法，可用于在您的`MouseListener`或`Mouseadapter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:54:13.577

好的，到目前为止没有人回答。我想换一种说法。

* * *

假设我们有 2 个方形 CirclePanel（扩展 JPanel），大小为 100x100 像素，每个形状都形成一个圆圈，这 2 个组件显示一个红色圆圈和一个蓝色圆圈。让我们假设 CirclePanel 在彩色圆圈之外的区域是透明的。让我们进一步假设托管框架具有 Null-Layout - 所以红色圆圈部分重叠蓝色圆圈。

为了使这些圆圈表现得像真正的控件，我们必须至少解决以下问题：

1.) 在圆圈外但非常靠近圆圈边界的 MouseClick 只能触发框架的 MouseListener - 它不能触发 JPanel 的 MouseListener。

2.) 红色区域内的 MouseClick 只能触发红色 JPanel 的 MouseListener - 它不能触发蓝色 JPanel 的 MouseListener 并且它不能触发框架的 MouseListener。

3.) 蓝色区域内的 MouseClick 只能触发蓝色 JPanel 的 MouseListener - 它不能触发红色 JPanel 的 MouseListener 并且它不能触发框架的 MouseListener。

4.) 实现这一切所需的源代码必须在 CirclePanel.java 文件中，并且框架的 java 不能关心这些问题。这是因为这些形状的控件必须在任何框架中起作用。

这以不同的方式描述了需求。

任何人都可以，请现在指出我，如何在java中完成它。你的，杰拉德

# android - 有什么简单的方法可以保护Android App并进行更新吗？

> ID：13536918
> 
> 赞同：2
> 
> 时间：2012-11-23T23:35:42.647
> 
> 标签：android

我开发了一个 Android 应用程序并通过 Eclipse 和 USB 连接安装到三个用户的手机上。我不想把应用程序放到谷歌市场。现在我遇到了两个问题：

1.  如何保护应用程序并使其在其他手机中失效。我知道我们无法 100% 保护它，我只是不希望应用程序被轻易复制并在其他设备上运行。我所做的是在我的程序中进行硬编码以比较 AndroidID（将 AndroidID 保存为字符串并与当前的 AndroidID 进行比较）。问题是如果我有 100 个用户，我必须硬编码 100 次。

2.  我怎样才能让用户保持更新。我是否只是将更新的应用程序上传到我自己的服务器并给他们下载和安装的链接？在这种情况下，第一个问题又出来了：如何保护App？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:43:29.797

我首先想到的是，您可以设置应用程序在安装后首次运行时需要的密码，并将该密码仅提供给启用的用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T23:45:54.980

您可以让应用程序检查是否存在一些预先确定的“密钥”文件并单独分发该文件。

为了更新应用程序，可以下载新的 apk 文件并使用意图将用户发送到 Package Installer，以便他们可以选择是否安装。

# ruby-on-rails - 为什么 Rails 会在不存在的属性上给我一个“批量分配安全错误”？

> ID：13536919
> 
> 赞同：0
> 
> 时间：2012-11-23T23:35:52.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的`Client`模型`attr_accessible`是这样的：

```
attr_accessible :email, :firm_id, :name, :phone, :last_contact 
```

然后我有这个回调：

```
after_save :set_score 
```

然后这是`set_score`方法（为简洁起见截断）：

```
private

def set_score
    score = Score.find_or_create_by_user_id(:user_id => user.id)
    client = self
    firm = self.firm

    days_since_last_contact = (Date.today - client.last_contact).to_i

    score.update_attributes(:firm_size => self.firm_size, :days_since_last_contact => days_since_last_contact)                      

end 
```

这是我得到的错误：

```
ActiveModel::MassAssignmentSecurity::Error in ClientsController#create

Can't mass-assign protected attributes: days_since_last_contact

app/models/client.rb:124:in `set_score'
app/controllers/clients_controller.rb:67:in `block in create'
app/controllers/clients_controller.rb:66:in `create' 
```

`line 124`就是上面的那行`score.update_attributes...`。

我没有名为`days_since_last_contact`. 那是作为`Date`计算结果的局部变量。

关于这里可能发生的事情的想法？

**编辑1：**

`Score`的属性可访问白名单：

```
attr_accessible :client_id, :days_since_contact.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:46:13.103

模型中的属性名称不存在。要么你打错了，要么你的代码错了。

正如您所说，模型中属性的名称是`days_since_contact`, not `days_since_last_contact`，因此修复它应该可以解决您的问题。:)

# mono - Mono.MoonException：无效的 RuntimeVersion

> ID：13536921
> 
> 赞同：1
> 
> 时间：2012-11-23T23:36:02.213
> 
> 标签：mono

我一直在尝试让 Moonlight 与特定的 Web 服务 (http://viaplay.se) 一起工作，经过一些研究，我让 Moonlight 在 Google Chrome 和 Firefox 中都可以工作。但是，当尝试从该站点播放其中一个流媒体视频时，没有任何反应。我从终端窗口启动了这两个浏览器，希望获得一些有用的调试信息。一切似乎都在运行，直到执行 RuntimeVersion 检查，这就是它停止的地方。我开始认为这是由于 Silverlight 4 支持未完成的 API，但我不完全确定。因此，为什么我没有将其作为错误提交。在尝试从网站流式传输视频时，我已经附加了两个浏览器的输出。任何帮助或答案将不胜感激。

谷歌浏览器输出：

```
~]$ google-chrome 
Moonlight: 3.99.0.3
Moonlight: Attempting to load libmoonloaderxpi 
[1547:1568:1123/235224:ERROR:native_backend_gnome_x.cc(448)] Keyring save failed: 
Moonlight: 3.99.0.3
Moonlight: Attempting to load libmoonloaderxpi 
Moonlight: 3.99.0.3
Moonlight: Attempting to load libmoonloaderxpi 
debug_get_option: GALLIUM_DRIVER = softpipe
couldn't open libtxc_dxtn.so, software DXTn compression/decompression unavailable
Moonlight: Installing signal handlers for crash reporting.
Moonlight: Enabling MONO_DEBUG=keep-delegates,reverse-pinvoke-exceptions and        MOONLIGHT_ENABLE_CONSOLE=1
Moonlight: Loaded mscodecs from: /home/david/.mozilla/plugins/moonlight/silverlight-   media-pack-linux-x64-21-1.so.
Moonlight: browser bridge not found for your browser (likely not needed). User agent =  'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64  Safari/537.11'
Moonlight: Plugin AppDomain Creation: OK
Moonlight: 3.99.0.3
Moonlight: Attempting to load libmoonloaderxpi 
Moonlight: Shutting down
Moonlight: browser bridge not found for your browser (likely not needed). User agent = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11'
Moonlight: Plugin AppDomain Creation: OK
Moonlight: URL = http://viaplay.se/film/battle-of-los-angeles
Moonlight: URL = http://viaplay.se/assets/54bde6d6/ViasatPlayer.xap
Moonlight: OpenGL vendor string: Tungsten Graphics, Inc
Moonlight: OpenGL renderer string: Mesa DRI Intel(R) 965GM 
Moonlight: OpenGL version string: 2.1 Mesa 8.0.4
Mono.MoonException: invalid RuntimeVersion
at System.Windows.Deployment.CompareRuntimeVersions () [0x00000] in <filename unknown>:0 
at System.Windows.Deployment.ReadManifest () [0x00000] in <filename unknown>:0 
at System.Windows.Deployment.InitializeDeployment (IntPtr plugin, System.String xapPath,    System.String culture, System.String uiCulture) [0x00000] in <filename unknown>:0 
Moonlight: ErrorEventArgs created with message: 'invalid RuntimeVersion'
EMIT OF EVENT Error(1) ON OBJECT Surface CALLED WITH NO LISTENERS AND NON-NULL CALLDATA 
```

火狐输出：

```
~]$ firefox
Moonlight: 3.99.0.3
Moonlight: Attempting to load libmoonloaderxpi 
debug_get_option: GALLIUM_DRIVER = softpipe
couldn't open libtxc_dxtn.so, software DXTn compression/decompression unavailable
Moonlight: Installing signal handlers for crash reporting.
Moonlight: Enabling MONO_DEBUG=keep-delegates,reverse-pinvoke-exceptions and    MOONLIGHT_ENABLE_CONSOLE=1
Moonlight: Loaded mscodecs from: /home/david/.mozilla/plugins/moonlight/silverlight-  media-pack-linux-x64-21-1.so.
Moonlight: browser bridge not found for your browser (likely not needed). User agent =  'Mozilla/5.0 (X11; Linux x86_64; rv:15.0) Gecko/20100101 Firefox/15.0.1'
Moonlight: Plugin AppDomain Creation: OK
Moonlight: Shutting down
Moonlight: browser bridge not found for your browser (likely not needed). User agent =  'Mozilla/5.0 (X11; Linux x86_64; rv:15.0) Gecko/20100101 Firefox/15.0.1'
Moonlight: Plugin AppDomain Creation: OK
Moonlight: URL = http://viaplay.se/film/battle-of-los-angeles
Moonlight: URL = http://viaplay.se/assets/54bde6d6/ViasatPlayer.xap
Moonlight: OpenGL vendor string: Tungsten Graphics, Inc
Moonlight: OpenGL renderer string: Mesa DRI Intel(R) 965GM 
Moonlight: OpenGL version string: 2.1 Mesa 8.0.4
Mono.MoonException: invalid RuntimeVersion
at System.Windows.Deployment.CompareRuntimeVersions () [0x00000] in <filename unknown>:0 
at System.Windows.Deployment.ReadManifest () [0x00000] in <filename unknown>:0 
at System.Windows.Deployment.InitializeDeployment (IntPtr plugin, System.String xapPath,   System.String culture, System.String uiCulture) [0x00000] in <filename unknown>:0 
Moonlight: ErrorEventArgs created with message: 'invalid RuntimeVersion'
EMIT OF EVENT Error(1) ON OBJECT Surface CALLED WITH NO LISTENERS AND NON-NULL CALLDATA 
```

该系统目前运行 Fedora Core 17、Mozilla 版本 15.0.1 和 Google Chrome 23.0.1271.64。该系统是 64 位的，因此我使用的是 64 位 Moonlight 扩展，版本为 3.99.0.3。如果网络上的某个地方已经有我无法找到的答案，我提前道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:30:33.187

好吧，我在这里也有同样的问题...问题是月光 3.99.0.3 不支持部署使用 silverlight 5.0.61118.0 编译的应用程序（您可以检查从日志[http://中的 url 下载 xap 文件viaplay.se/assets/54bde6d6/ViasatPlayer.xap](http://viaplay.se/assets/54bde6d6/ViasatPlayer.xap)并检查 AppManifest.xaml）

# android - 关于opencv4android示例15-拼图

> ID：13536928
> 
> 赞同：0
> 
> 时间：2012-11-23T23:36:33.130
> 
> 标签：android, opencv

我已经缩减了 15-puzzle 的代码，这是由 opencv4android 作为示例提供的。现在缩短的代码在其原始文档位置运行良好，但在我将它们复制到其他地方设置的 helloworld 项目后，程序崩溃，Logcat 设置 MainActivity 的 NoClassFoundDefError。我试图查看 manifest.xml 但仍然无法找出问题的原因。你能帮助我吗？谢谢！

下面是我的代码：

1.puzzle15Activity

```
package org.opencv.samples.puzzle15;
import org.opencv.android.BaseLoaderCallback;
import org.opencv.android.LoaderCallbackInterface;
import org.opencv.android.OpenCVLoader;
import org.opencv.core.Mat;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.Window;
import android.text.method.*;
import android.widget.Toast;
import android.view.View;
import android.view.*;

public class puzzle15Activity extends Activity
{

SampleCvViewBase mView=null;
private BaseLoaderCallback  mOpenCVCallBack = new BaseLoaderCallback(this) 
{
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                mView=new SampleCvViewBase(mAppContext);
                setContentView(mView);

            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }

    }
};

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2,this,mOpenCVCallBack);

} 
```

}

2.SampleCvViewBase

```
package org.opencv.samples.puzzle15;

import java.util.List;
import org.opencv.core.Mat;
import org.opencv.core.Size;
import org.opencv.highgui.VideoCapture;
import org.opencv.highgui.Highgui;
import org.opencv.core.Scalar;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import org.opencv.core.*;
import org.opencv.calib3d.Calib3d;

class SampleCvViewBase extends SurfaceView implements SurfaceHolder.Callback, Runnable {

int t;
Scalar s=new Scalar(100,100,100,100);
Scalar s1=new Scalar(1);
Scalar s2=new Scalar(100);
byte []t1={1,0,0,1};
int []t2={5,4,3,2};
int[] t3;

Mat mrgba;
Mat m1,m2,m3;
public int[] list={1,2,3};

@Override
public SampleCvViewBase(Context context) {
    super(context);
    mrgba=new Mat(4,4,CvType.CV_16S,s);
    mrgba.create(4,4,CvType.CV_8UC(15));
    m1=new Mat(2,2,CvType.CV_8U,s1);
    m2=new Mat(2,2,CvType.CV_32S,s2);
    m3=new Mat(2,2,CvType.CV_32S,s2);
    m1.put(0,0,t1);
    m2.put(0,0,t2);
    t3=new int[4];
    m2.get(0,0,t3);
    t3[1]=200;
    m2.put(0,0,t3);
    m2.copyTo(m3);

}

public void surfaceChanged(SurfaceHolder _holder, int format, int width, int height) {

}

public void surfaceCreated(SurfaceHolder holder) {

      }

public void surfaceDestroyed(SurfaceHolder holder) {

    }

public void run() {}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:52:54.003

好的，现在我找到了这背后的一些原因。bin 中的类未编译。

# javadoc - 无法使用gradle将overview.html放入javadoc

> ID：13536930
> 
> 赞同：5
> 
> 时间：2012-11-23T23:36:45.737
> 
> 标签：javadoc, gradle

使用最新的 gradle，我试图让标准的 overview.html 出现在我的项目的 javadocs 中。我尝试了几种不同的配置方法，但都没有运气。这是最新的：

`javadoc.ext["overview"] = "${projectDir}/src/main/java/overview.html"`

没有报告错误，但是，概述简介不会出现在 javadocs 索引页面中。我**可以**让它从命令行或 IDE 调用 javadoc。

感谢您的帮助。（我**已经**检查了[gradle 文档](http://www.gradle.org/docs/current/javadoc/org/gradle/external/javadoc/package-summary.html)。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T06:23:22.677

不知道你是如何想出这种语法的。从任务的DSL[参考](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.javadoc.Javadoc.html)`Javadoc`开始，您最终应该到达：

```
javadoc {
    options.overview = "overview.html" // relative to source root
} 
```

根据 Javadoc 工具的文档，这似乎是默认设置，但仅当您至少有两个包时才会显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-22T18:53:15.267

将文件*overview.html*放在目录*src/main/java*中。

现在更新你的*build.gradle*文件：

```
javadoc {
    options.overview = "src/main/java/overview.html"

} 
```

# dart - 从 dart webcomponent 调用库中定义的函数

> ID：13536933
> 
> 赞同：2
> 
> 时间：2012-11-23T23:36:59.727
> 
> 标签：dart, web-component

Web 应用程序在 app.dart 中有以下代码

```
library app;
import 'dart:html';
var _loginClass; 

void main() {
 _loginClass = 'hide_login'; //set style to hide login web component by setting display:none

}
void showLogin(e) {
  _loginClass = 'show_login';
 print("span clicked");
}
void hideLogin(e) {
_loginClass = 'hide_login';
} 
```

从 App.dart 调用 hideLogin(e) 函数会隐藏 Web 组件。但从 Web 组件调用它不起作用。

css定义如下：

```
.hide_login {
display: none;
}

.show_login {
 display = block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:50:13.037

使用它可能会更大胆

```
<template instantiate="bool expression"> 
```

这使得显示和隐藏像登录组件这样的自定义元素非常容易

例子：

登录.html

```
<html>
  <body>
    <element name="x-login" constructor="LoginComponent" extends="div">
      <template instantiate="if showLogin">
        ...
        <button on-click="validateLogin()">Login</button>
      </template>
    </element>
  </body>
</html> 
```

登录组件.dart

```
import "package:web_ui/web_ui.dart";

class LoginComponent extends WebComponent {
  bool showLogin = true;

  bool validateLogin() {
    ...
    showLogin = false;
  }
} 
```

查看[http://www.dartlang.org/articles/dart-web-components/](http://www.dartlang.org/articles/dart-web-components/)了解更多详情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:20:25.797

奇怪的是你有“显示：无；” 和“显示=块；”。第二个不是有效的语法。

如果这不是正确答案，请尝试添加：

```
import 'package:web_components/web_components.dart'; 
```

然后调用 dispatch(); 设置_loginClass 后。

# java - Integer.valueOf() 无效整数

> ID：13536941
> 
> 赞同：1
> 
> 时间：2012-11-23T23:38:23.830
> 
> 标签：java, integer, value-of

我正在尝试从 r、g、b 值创建颜色值，并添加 alpha 字节以创建颜色 int。

但我在使用时遇到错误：

> Integer.valueOf(colorStr,16);

`colorStr`是我构建的字符串，现在向我发送错误的值是`"0XFF2f6b55"` 它向我发送了无效的 int。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T23:42:16.500

Java 的[整数](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)涵盖从 -2^31 到 2^31-1 (2147483647) 的值。您的值是十进制的 (4281297749)，这对于 java 的整数来说太大了。

Java 的[long](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html)涵盖了更高的范围，从 -2^63 到 2^63-1。其中包括您的价值，因此建议使用`Long.valueOf(colorStr, 16)`并切换到使用多头。（当您使用的值超出整数值范围时，建议发挥作用）。

在我看来，您似乎知道，但万一您不知道；如果它是字符串值的一部分，`0x`则应将其删除，因为如果留在其中，它将给出无效的格式异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:41:54.270

你的字符串对于一个有符号的 int 来说太大了——它们从`-0x80000000`到`0x7FFFFFFF`。尝试：

```
int i = (int) Long.parseLong(colorStr.substring(2), 16); 
```

这将导致负数`int`，这可能不是您想要的。（使用颜色时，使用红色、绿色、蓝色和 alpha 分量的值元组可能更方便。）

`valueOf()`或`parseInt()`/都`parseLong()`不会识别`0x`前缀，您需要摆脱它。

# jquery-mobile - jquery mobile trigger('create') 回调函数

> ID：13536945
> 
> 赞同：2
> 
> 时间：2012-11-23T23:38:41.737
> 
> 标签：jquery-mobile

我正在使用 jquery mobile 并使用 $().trigger('create') 函数来启动它。在此函数完成使用新样式修改 html 后，我需要一个回调。这可能吗？

我需要这个，因为在 ajax 加载新内容后我需要屏幕的新尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T00:06:41.190

我会使用 TriggerHandler()。您可以绑定到您的自定义事件...

请参阅链接底部的 DEMO：

[http://api.jquery.com/triggerHandler/](http://api.jquery.com/triggerHandler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T02:28:25.623

我发现当我执行 ax$.trigger("create") 时会触发“updatelayout”事件。这来自一些使用 Backbone 的 js ......

```
var content$ = this.$el.find("#somediv");
content$.on('updatelayout', function () { alert("woo hoo"); });
content$.trigger("create"); // add some JQM magic, wait for the 'woo hoo' 
```

来自 jQuery api：

“此事件由框架内动态显示/隐藏内容的组件触发，旨在作为一种通用机制通知其他组件它们可能需要更新其大小或位置。”

事实证明，细节中有魔鬼。并非所有触发的 JQM 内容都会导致 JQ“updatelayout”事件。在另一种情况下，我必须添加一个带有 'data-role="controlgroup" 的包装器 div 才能触发它。需要更多的挖掘...

# ruby-on-rails-3 - Rails 3嵌套形式 - 新对象

> ID：13536948
> 
> 赞同：0
> 
> 时间：2012-11-23T23:39:11.243
> 
> 标签：ruby-on-rails-3, nested-forms, simple-form

我不记得代码，如何以嵌套形式（通过简单形式）创建新对象。它类似于：“某物：new_object ...”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:33:07.697

通常使用：

```
<%= f.fields_for :object do |builder| %> 
```

但是您可以使用**simple_fields_for**，如下所示：

```
form_for @user do |f|
  f.simple_fields_for :posts do |posts_form|
    # Here you have all simple_form methods available
    posts_form.input :title
  end
end 
```

参考：[http ://simple-form.plataformatec.com.br/#usage/extra-helpers](http://simple-form.plataformatec.com.br/#usage/extra-helpers)

它最初使用**form_for**，但请检查此线程：[simple_form 中的嵌套属性返回质量分配错误](https://stackoverflow.com/questions/5892159/nested-attributes-in-simple-form-returns-mass-assignment-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T23:38:03.337

感谢保管箱，我找到了它..

您需要将此添加到您的 javascript（在 CoffeScript 中）

```
#= require jquery_nested_form 
```

这就是形式（在 HAML 中）

```
= simple_nested_form_for @variable do |f|
  = f.input :code
  // Link to create new empty object    
  = f.simple_fields_for :nested_attributes do |s|
    = f.link_to_add "Add new", :nested_attributes
    = s.input :name
    = s.input :locale
    // Link to remove
    = s.link_to_remove 'Remove'
  = f.button :submit 
```

# python-2.7 - python bitwise_xor

> ID：13536951
> 
> 赞同：0
> 
> 时间：2012-11-23T23:39:25.957
> 
> 标签：python-2.7, bitwise-operators, bitwise-xor

我在进行异或搜索时遇到问题。我有一个由二进制值组成的数组。我的列表包含 1000 个不同的二进制值，我想计算双循环在列表中找到一个元素所需的时间。因此，对于双循环搜索，我希望它通过循环 [(1) + (2) +(3)+...+(1000)] = 500500 次。[n(n+1) / 2]

我在以下代码中使用 bitwise_xor

```
from numpy import bitwise_xor

count = 0
for word1 in listOutTextnoB:
    for word2 in listOutTextnoB:
        count+=1
        if bitwise_xor(word1,word2)==0:
            break
print "count" 
```

不幸的是，当我打印 count 时，我得到 count = 1,000,000

如果我将 if 语句更改为

```
if bitwise_xor(word1,word2):
      break 
```

计数为 1000

我也尝试过：

```
if word1^word2==0:
       break 
```

但它给了我“TypeError：^：'str'和'str'不支持的操作数类型”

一个工作示例是：1101110111010111011101101110110010111100101111001 XOR 1101110111010111011101101110110010111100101111001 它应该给我 0 并退出内循环

代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:52:35.757

您的错误说明了问题：列表中的值是字符串，而不是数字。我不确定 bitwise_xor 对它们做了什么，但我很确定它不会先将它们转换为数字。如果您手动执行此操作（bitwise_xor (int (word1), int (word2))），我认为它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T23:54:19.480

`^`适用于整数，而不是数组，所以这并不奇怪。

我不知道你为什么使用字符串但是：

```
from numpy import bitwise_xor

listOutTextnoB = range(1000)
count = 0
for word1 in listOutTextnoB:
    for word2 in listOutTextnoB:
        count+=1
        if bitwise_xor(word1,word2)==0:
            break
print "count", count 
```

印刷

```
count 500500 
```

正如你预测的那样。

编辑：是的，你应该这样做

```
if int(word1) ^ int(word2) == 0:
    break 
```

bitwise_xor 实际上为每个字符串、字符串输入返回“NotImplemented”。

# python - win32 Python - pythoncom 错误 - ImportError：没有名为 pywintypes 的模块

> ID：13536952
> 
> 赞同：3
> 
> 时间：2012-11-23T23:39:56.700
> 
> 标签：python, winapi, pywin32, importerror, pythoncom

我正在尝试导入 pythoncom，但它给了我这个错误： Traceback（最近一次调用最后一次）：文件“F：/Documents and Settings/Emery/Desktop/Python 27/Try”，第 2 行，在导入 pythoncom 文件“F :\Python27\lib\site-packages\pythoncom.py"，第 2 行，在 import pywintypes ImportError: No module named pywintypes

我重新安装了 Python win32，但它仍然没有修复它。有什么帮助吗？另外，我正在尝试访问 pythoncom.PumpMessages() 方法，替代方法也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-22T19:19:38.563

如果您使用像我这样的 IDE（PyCharm），您应该去安装 Python 的地方，例如`C:\Users\***\AppData\Local\Programs\Python\Python37\Lib\site-packages`

在此文件夹中检查文件夹名称`pywin32`。复制该文件夹并将其粘贴到`C:\Users\***\PycharmProjects\project\venv\Lib\site-packages`. 之后重新启动您的 IDE，然后它将`pywin32`像在我的情况下那样导入。我希望它有所帮助。

# ios - 将 Parse.com API 与 Pubnub 相结合是大规模实时消息传递和获得组合工具集的可行选择吗？

> ID：13536953
> 
> 赞同：8
> 
> 时间：2012-11-23T23:40:00.543
> 
> 标签：ios, chat, real-time, backend, pubnub

本质上将 Parse 与 Pubnub、Pusher 或类似工具结合起来，而不是从头开始构建自定义后端。

我将开发一个带有 facebook 登录和文件存储/共享的实时消息系统。理论上，我可以结合使用 Parse 和 Pubnub 之类的东西来满足后端需求。是：

**Parse 负责：**

*   登录
*   文件存储
*   推送通知（关闭的应用程序）

**Pubnub 负责：**

*   真实的
*   消息传递时间...

**要求：**

如果需要，我需要一个可以扩展到数百万用户并且可以快速部署的系统。一般来说，一个符合此标准和规范的解决方案。

**标准：**

*   由一两个开发人员快速部署。
*   可以扩展到数百万用户。
*   高可靠性

**眼镜：**

*   脸书登入
*   实时消息传递
*   推动封闭式应用交付
*   共享文件和图像存储

如果这作为第一阶段部署的任何反馈将运作良好并且任何陷阱将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T18:22:06.523

我有点偏见，但请查看 StackMob (www.stackmob.com)，通过 StackMob Marketplace，您可以直接访问 PubNub，而无需创建第二个帐户。市场上还有许多其他出色的服务可以添加诸如 SendGrid 之类的功能。

您正在寻找的所有功能都是开箱即用的，即使是单独的开发和生产帐户也是如此。Parse 没有的东西。只需单击一个按钮，您就可以将模式和自定义代码从开发转移到生产。

我们当然可以支持您所说的用户。我们在平台上有来自 Atari 的 7 款游戏，以及 Land O Lakes 和 Adidas Japan 等其他大企业。在可靠性方面，我们也有很好的记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T13:16:34.937

听起来不错，但是 2 个系统（Parse 和 PubNub）与您的标准相矛盾**由一两个开发人员快速部署。**

有理由找到一个满足您所有要求的系统。

你可以在[QuickBlox 后端掠夺——你自己的云后端](http://quickblox.com) 它有 7 个模块（API 集）用于不同的任务。您可能对以下内容感兴趣：

1.  [用户模块](http://quickblox.com/developers/Users)- 它有 Facebook/Twitter 登录
2.  [消息模块](http://quickblox.com/developers/Messages)- 这是推送通知。它支持 iOS、Android、BlackBerry、WindowsPhone 推送通知
3.  [内容/CMS 模块](http://quickblox.com/developers/Content)- 它允许存储/共享/流式传输任何类型、任何大小的文件（最大 5 TB！）
4.  [聊天模块](http://quickblox.com/developers/Chat)- 实时消息传递。QuickBlox Chat 是一种快速可靠的聊天解决方案，它结合了可扩展的云托管 XMPP 聊天服务器、通过[用户模块的无缝单点登录授权、通过](http://quickblox.com/developers/Users)[推送通知](http://quickblox.com/developers/Messages)传入的 IM/聊天警报和通过[内容](http://quickblox.com/developers/Chat)的文件附件的优点。

我推荐看看它，它还有很多很棒的功能，比如通过[自定义对象模块创建自定义 API](http://quickblox.com/developers/Custom_Objects)

此外，还有[企业解决方案](http://quickblox.com/pricing/) - QuickBlox，这是白盒，因此您可以将其部署到您自己的服务器上，如果您愿意，可以转售给其他客户

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T21:14:00.170

简短的回答：

不。

细节：

无论如何，您都算算，与这些系统中的任何一个建立聊天都太昂贵了，因为它们的 BaaS 模型是基于按通话次数收费的。

我必须使用 parse.com 自己解决很多逻辑，现在我正在实施 XMPP 解决方案，工作量是相同的才能使某些东西正常工作。

我的替代解决方案：

在 AWS 上使用像 ejabberd 这样的开源 xmpp 服务器，然后使用其中一个 API 连接到它。

如果您需要更多关于我的经历的信息，请与我联系：

@andrescanella

# classification - 使用 Bags-of-features 方法时 PASCAL VOC2007 数据的性能不佳

> ID：13536954
> 
> 赞同：1
> 
> 时间：2012-11-23T23:40:03.133
> 
> 标签：classification, vision, feature-selection

我在特征框架包中使用了基本组件：SIFT + Kmeans + VQ + SVM 我得到的平均 ap 仅为 ~15%，一些使用类似基本组件的文献声称平均 ap 为 ~45% 并达到了 75%在使用额外的编码和空间池之后......这是为什么呢？

多谢你们！

# jquery - 如果有类，则删除类并添加类

> ID：13536955
> 
> 赞同：0
> 
> 时间：2012-11-23T23:40:09.930
> 
> 标签：jquery, css, html

这里有问题。这应该可以工作......我在 html 中有 4 个元素看起来像这样

```
 <!-- Light Color Scheme - Header False and Show Faces True -->
        <div class="fb-like-box h-f_dsf-t visible" data-href="http://www.facebook.com/pages/Alpine-Adaptive-Scholarship-Program/344942928870040?fref=ts" data-width="292" data-show-faces="true" data-stream="true" data-header="false" colorscheme="light"></div> 
```

尽管它们有不同的变体。所以一个可能是标题为真并显示面孔为真，唯一的类将是“.h-t_dsf-t”。javascript 应该在它们之间进行选择并告诉哪个是活动的，哪个不是活动的。所以一次只有一个有 .visible 类，而其他人有一个 .invisible 类。

提前致谢！

我的“显示面孔”按钮的 Javascript ***（注意 .sf-no.click 中还没有任何内容，但将来我只是想让它首先为“是”按钮工作。）***

```
// Show Faces
$(document).ready(function() {
    $('.sf-yes').click(
        function() {
            $('.sf-yes').removeClass('btn-not-active btn-active').addClass('btn-active');
            $('.sf-no').removeClass('btn-not-active btn-active').addClass('btn-not-active');
            // Show Faces Yes &&& Show Header No
            if ($('.sf-yes.sh-no').hasClass('.btn-active')) {
                $('.h-f_dsf-t').removeClass('.invisible').addClass('.visible');
                $('.visible').removeClass('.visible').addClass('.invisible');
            }
            // Show Faces Yes &&& Show Header Yes
            if ($('.sf-yes.sh-yes').hasClass('.btn-active')) {
                $('.visible').removeClass('.visible').addClass('.invisible');
                $('.h-t_dsf-t').removeClass('.invisible').addClass('.visible');
            }
            // Show Faces No &&& Show Header Yes
            if ($('.sf-no.sh-yes').hasClass('.btn-active')) {
                $('.visible').removeClass('.visible').addClass('.invisible');
                $('.h-t_dsf-f').removeClass('.invisible').addClass('.visible');
            }
            // Show Faces No &&& Show Header No
            if ($('.sf-no.sh-no').hasClass('.btn-active')) {
                $('.visible').removeClass('.visible').addClass('.invisible');
                $('.h-f_dsf-f').removeClass('.invisible').addClass('.visible');
            }
        }
    );
    $('.sf-no').click(
        function() {
            $('.sf-no').removeClass('btn-not-active btn-active').addClass('btn-active');
            $('.sf-yes').removeClass('btn-not-active btn-active').addClass('btn-not-active');
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T23:47:33.610

`.hasClass('.btn-active')`

应该

`.hasClass('btn-active')`

无点`.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:57:26.077

您包含的代码有一些问题。当你删除一个类或添加一个类时，你不应该包括句号。`.`您已在`.hasClass`、`removeClass`和上执行此操作`addClass`。

此外，您的条件陈述似乎是矛盾的。也许您实际上是想说的话，但我假设包含类的元素`.sf-yes`是`.sh-no`两个不同的元素。您的 jQuery 语句正在寻找具有这两个类的元素。

使用类的选择器也不是最佳实践，您应该使用唯一的 id，例如`#sf-yes`. 或者，如果您必须使用多个类选择器，则在函数调用开始时将每个选择器分配给一个变量。

最后，我认为您不应该将此标记为 Facebook 问题，因为您的代码专门针对 jQuery。

# java - 下载一个exe文件并运行

> ID：13536963
> 
> 赞同：0
> 
> 时间：2012-11-23T23:41:28.937
> 
> 标签：java, eclipse, networking, exe

我一直在尝试使它可以从网络上下载 .exe 文件，读取它，并将其写入本地文件，然后执行。

```
URL url = new URL("http://www.ddlands.com/downloads/Calc.exe");
    URLConnection c = url.openConnection();
    BufferedReader br = new BufferedReader(new InputStreamReader(c.getInputStream()));
    String line = "";
    File file = new File("analbread"+".exe");
    BufferedWriter bw = new BufferedWriter(new FileWriter(file));
    while((line = br.readLine()) != null){
        bw.write(line + "\n");
    }
    br.close();
    bw.close();
    Process r = Runtime.getRuntime().exec("analbread" + ".exe");
    System.out.println(r.toString());
    System.out.println("WORKS!"); 
```

虽然我知道由于使用 BufferedWriter 而这不起作用，而且我不确定它是否运行 exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:26:20.607

对于下载部分，您需要使用二进制读/写。有关详细信息，请参阅此：[工作无缓冲流](http://codeisland.org/2012/working-unbuffered-streams/)。

对于执行部分，问题是[`Runtime.exec()`- 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)无法启动您的可执行文件。

至少在 Linux 下（我无法在 Windows 上测试它），您需要可执行文件的完整路径（或者`./[file]`当文件与您的应用程序位于同一目录时使用）才能执行它。

仅提供该命令适用于系统[PATH-variable](http://en.wikipedia.org/wiki/PATH_%28variable%29)中的可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:19:19.353

看看 ClickOnce：[http](http://en.wikipedia.org/wiki/ClickOnce) ://en.wikipedia.org/wiki/ClickOnce 我们已经成功地使用了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T21:45:40.093

我已经使用以下结果很好地运行命令行脚本。您可以创建一个运行可执行文件的批处理脚本或使用 exec 方法直接运行它 - 可能通过“cmd”。这将打开一个命令提示符，您可以从中运行任何内容。

```
public static void runScript(String batchFile, boolean waitForExit0, int retryTime)
{
    try
    { 
        String runString = "cmd /c start " + (waitForExit0?"/wait ":"") + "/MIN " + batchFile;
        Process p = Runtime.getRuntime().exec(runString); //   /c start /wait

        while (true)
        {
            try
            {
                int exit = p.exitValue();
                if (exit == 0)
                {
                    System.out.println("completed: " + runString);
                    return;
                }
            }
            catch(Exception e)
            {
                String s = "";
            }

            Thread.sleep(retryTime);
        }
    }
    catch(Exception e)
    {
        String s = "";
    }
} 
```

# ruby-on-rails - 在 Heroku 中运行的 Rails 应用程序的脉冲或 cron 作业

> ID：13536966
> 
> 赞同：0
> 
> 时间：2012-11-23T23:41:41.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, cron, ruby-on-rails-3.2

我需要每天执行一次代码。一天可以不止一次，错过一天并不是世界末日。该代码将确保用户根据某些标准获得一些奖励积分。我会跟踪他们是否已经收到了奖励积分，所以它不会翻倍..

一些简单的 cron 作业偶尔调用一个特定的控制器是完美的：

```
curl http://localhost/tasks/pulse 
```

当然，真正的 crontab 条目效果很好。还是在 Rails 中有这种事情的内部机制？我正在使用最新的稳定 Rails（当前为 3.2.9）。

唯一的问题是这也需要在 Heroku 中工作。

我刚刚注意到[Heroku 的 Scheduler](https://devcenter.heroku.com/articles/scheduler)。看起来很适合 Heroku。我可以在我的开发/测试环境中手动运行这些任务。这是在 Rails 中处理脉冲/cron 作业的最佳方式吗？有 rake 任务？易于在测试中合并运行 rake 任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:51:29.763

您可以查看这个 gem，[只要](https://github.com/javan/whenever)它是一个 Ruby gem，它为编写和部署 cron 作业提供了清晰的语法。它维护得很好，我自己没有在 Heroku 上使用它，但值得一看。

你可以做很多事情，比如

```
every 3.hours do
  runner "MyModel.some_process"
  rake "my:rake:task"
  command "/usr/bin/my_great_command"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:37:47.197

[Heroku Scheduler](https://devcenter.heroku.com/articles/scheduler)工作得很好，而且很容易设置！

# macos - 无法卸载内核扩展；类有实例

> ID：13536970
> 
> 赞同：10
> 
> 时间：2012-11-23T23:43:05.547
> 
> 标签：macos, kernel-module, kernel, kernel-extension

我正在为音频设备驱动程序（它是软件，但模拟硬件设备）编写 OSX 内核扩展。

在开发过程中，完全卸载现有的旧版本，然后从头开始构建和安装新版本会很方便。但是，如果不重新启动系统，这有时似乎是不可能的。

程序本身没有运行，源文件已从`/System/Library/Extensions/`目录中删除。

但`kextstat`揭示了一个例子：

```
$ kextstat | grep 'com.foo.driver.bar'
219 0 0xfff123 0x5000 0x5000 com.foo.driver.bar (0.0.1) <102 5 4 3> 
```

（...意义：）

```
Index Refs Address Size Wired Name (Version) <Linked Against> 
```

所以我的驱动程序实例有 0 个 Refs，但`kextunload`有时会失败，抱怨现有实例：

```
$ sudo kextunload -b com.foo.driver.bar
(kernel) Can't unload kext com.foo.driver.bar; classes have instances:
(kernel)     Kext com.foo.driver.bar class FooBarDriver has 1 instance.
(kernel)     Kext com.foo.driver.bar class com_foo_driver_bar has 1 instance.
Failed to unload com.foo.driver.bar - (libkern/kext) kext is in use or retained (cannot unload). 
```

发生这种情况时，无法“强制”卸载 kext（据我所知）。

由于正在运行的操作系统内核在内存中保存了一个引用，我猜测这个单一实例是否仍然存在？这似乎不对，因为`kextunload`那样总是会失败。那么为什么`kextunload`有时只需要重新启动系统才能“完全”卸载所有驱动程序实例呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T17:11:21.290

为 IOKit kext运行`kextunload`将（如果没有其他 kext 依赖它）会导致内核尝试访问`terminate()`该 kext 中 I/O Kit 注册表中的任何类实例。然后它会稍等片刻，并检查该 kext 的任何类是否仍有实例。如果没有，它将卸载 kext。如果实例仍然存在，`kextunload`则失败（尽管终止的实例仍然终止；我的意思是 I/O 套件匹配不会在其提供程序上重新运行）。

所以不知何故，你仍然以实时实例结束。

*   一种可能性是您的对象拒绝`terminate()`. 如果他们的客户端不会放弃控制，则可能会发生这种情况，例如，您无法卸载顶部已安装文件系统的磁盘的驱动程序。不响应终止消息的用户空间客户端是另一个示例。

*   否则，实例会终止，但不会被释放。由于它们似乎属于您的两个主要驱动程序类，如果您没有任何用户客户不会放弃他们的要求，我将冒险并建议您可能有一个循环参考. 如果不是这样，您只需要寻找`retain()`与 a 不匹配的 s `release()`。[我在这个答案中](https://stackoverflow.com/a/13471512/48660)给出了一些关于如何追踪这些的提示。

如果实例终止并取消注册，它们将不再出现在`ioreg`命令行工具的输出中，因此这是检查这两种情况中的哪一种适用于此处的一种简单方法。

# jquery - jQuery：如何切换刷新页面后仍然存在的背景图像？

> ID：13536977
> 
> 赞同：0
> 
> 时间：2012-11-23T23:44:31.057
> 
> 标签：jquery

我遵循以下样式切换方法：http: [//designshack.net/articles/css-style-switcher](http://designshack.net/articles/css-style-switcher)

它工作得很好，但我需要更改背景图像，因为它会改变颜色。那么我们如何才能改变刷新页面后可能保持不变的背景图像呢？

他们在上面的示例中使用了 cookies 方法来制作样式表，但是我们如何将相同的方法用于单独的图像背景呢？我不是 jQuery 忍者 ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:49:18.650

使用 javascript，您可以设置和获取 cookie 以拉取要加载的图像 URL。在没有看到所有图像的存储位置的情况下，我不能给你具体的代码，但想法是：

```
function setCookie(c_name,value,exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name)
            return unescape(y);
    }
} 
```

然后当你想保存后台 url 时：

```
setCookie("my_bg","images/my_image1.png", 7); 
```

当您加载页面时：

```
$('#div_to_set_bg_of').css("background-image": "url("+getCookie("my_bg")+")"); 
```

# java - Java - 检测具有给定坐标的直线

> ID：13536978
> 
> 赞同：5
> 
> 时间：2012-11-23T23:45:07.373
> 
> 标签：java, eclipse, math, line, angle

添加信息：

我正在使用广场的内部作为竞技场。启动时，方块在随机位置和旋转中生成，我**无法**访问任何方块属性。

然后我在广场内有一个移动的物体，我正在为它构建人工智能，我希望这个物体“了解”竞技场墙壁的位置。每次物体撞到墙上时，我都会得到一个触摸返回，所以我知道它是否击中。我正在使用它来映射物体撞击墙壁的全局位置并保存它......在同一面墙上击中 3 次后，我想在数学上“画一条直线”沿着那些代表竞技场墙壁的点- 有了这个，我可以告诉我的对象不要靠近这些坐标。

3个点的原因？好吧，如果物体撞到墙的一侧，然后撞到墙的另一侧，我会从一侧到另一侧画一条线，给出关于墙在哪里的错误数据。

如果 Java 看到三个（或更多）内联点，它就知道该对象撞到了同一堵墙上（或者更远一些）。

继续：

我正在尝试使用给定的坐标数据绘制线条。基本上我有一个包含 X 和 Y 坐标的数组，我希望能够在数学上检测它们是否构成一条直线（给定或取几个像素）。（坐标是正方形的边界）

例如，数组可能是这样的：

[x0][y0] - 1,1

[x1][y1] - 2,2

[x2][y2] - 5,5

这将呈现正方形一侧的对角线，如下所示：

![在此处输入图像描述](../Images/554ee4a974f08bc2ba573f0b373fcb3f.png)

但有时我可能会得到正方形一侧的一个坐标，然后是另一侧的坐标，所有这些都混合在一起（也不一定是 90 度角！）。所以我希望能够遍历数组，并检测什么坐标构成一条线（或正方形的边界边），如下所示：

![在此处输入图像描述](../Images/cc7a6019c49a463a86d445fac2f7af10.png)

所以现在，我有一个二维数组：

```
private double wallLocations[][] = new double[10][10]; 
```

和一个不起作用的while循环。我什至不知道从哪里开始：

```
for(int r = 0; r < wallIndex; r++){
            for(int c = 0; c < wallIndex; c++){

                int index = 0;
                if(wallLocations[r][index] == wallLocations[r][c] && wallLocations[r][index + 1] == wallLocations[r][c] &&
                        wallLocations[r][index + 2] == wallLocations[r][c]){

                    System.out.println("***** Wall Here! *****");
                    index++;
                }

            }
        } 
```

- - 更新 - -

这是我正在寻找的一个更好的例子。红点代表进入的坐标，当 3 个或更多点排列时检测到一条线（如果是 2 个点，那么它会检测到任何一个点）......你注意到这开始看起来像边界一个正方形？

![在此处输入图像描述](../Images/5e8395354ad4be4fbd534d3f125db178.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:28:10.340

这似乎本质上是一个聚类问题，而且这些问题通常非常困难。聚类很难的部分原因是可能有不止一个适用的映射。

例如（请原谅我糟糕的 ascii 艺术）：

```
 X   X   X  

   X   X   X

 X   X   X   X 
```

可以映射

```
 X---X---X          X   X   X 
                     \ / \ / \ 
   X---X---X   or     X   X   X
                     / \ / \   \
 X---X---X---X      X   X   X   X 
```

我已经看到使用混合高斯模型的期望最大化算法用于这种事情（当有很多点但只有几条预期线时），但你通常*必须*给该算法一定数量的集群，虽然它的结果很好，但它是一个相当慢的算法，可能需要多次迭代。我有点想我已经看到了一些通常更快的东西，那就是某种图像处理算法，但我必须做一些研究。

我有点想知道你在哪里找到每对点的 y=mx+b 并且它们对 m 和 b 进行排序。为每对找到 [0,pi) 中的角度 θ 并在角度而不是 m 上进行排序可能是有利的，或者可能更好地通过集群进行排序`cos(2θ)`——这点是线组 {y= -0.0001 x + 1, y =1, and y=0.0001x + 1} 非常相似，线组{y= -10000x + 10, x = 0, and y=10000x - 10} 也非常相似，但是cos (2θ) 应该使它们尽可能地分开，因为每组之间的任何两对应该几乎垂直。

另请注意，在我的示例中，b 对于几乎垂直于 x 轴的线并不重要，因此“b”对于直接聚类可能不是那么有用。

我想，也许，两条线之间可能有一些可用的“距离”度量，我只是不确定它会是什么。两条几乎平行的线“在屏幕上”会聚（点通常在哪里）可能应该被认为是“更接近”，而不是它们会聚到距离屏幕一万亿个单位的地方——或者他们应该这样做吗？纯粹地说，如果三条线都不平行（如果它们在一个平面上，它们都会在某个地方相遇），则永远不能成对地认为它们彼此更接近，但直观地说，如果我们有两条线通常是一英寸除了在我们关注的区域之外，我们会选择在关注区域相距一英里的两条相同指向的线上更接近的那对。这让我觉得也许*是线条之间的区域*，受我们区域的约束* 应该用作度量。

抱歉，我不确定所有这些头脑风暴有多大用处，但它可能会让事情变得不同。

编辑：您知道吗，通过研究可能会找到更好的答案：

[http://en.wikipedia.org/wiki/Hough_transform](http://en.wikipedia.org/wiki/Hough_transform)

编辑二和三：

好的，...您刚才描述的情况要简单得多，而且不那么通用（尽管说实话，我认为我误读了您的初始查询比实际情况更通用）。

你有 4 个候选墙。让你的人工智能四处弹跳，直到找到三个共线点。那应该是对组合的简单测试。将这三个点指定为一堵墙。根据您拥有的其他点，您实际上可能能够确定或至少估计其他三堵墙（假设它*是*一个正方形）。如果您在不同的墙上有 5 个点和 3 个点，您应该能够计算出墙之间的距离，从而计算出第四面墙的可能位置。要测试其他两个点是否在不同的墙壁上，请确保它们成对不与垂直或平行于墙壁定义的线的线共线，或者如果它们在平行线上，请测试以查看如果它们之间的距离小于墙与它们之间的距离（如果是这种情况，它们就在与第一个候选墙相对的墙上）。鉴于它们位于不同的墙壁上，要么面对第一个找到的墙壁，要么它们位于垂直于该墙壁的墙壁上。无论哪种方式，您都可以找到定义具有一些棘手几何形状的墙壁的线条。

（实际上，要确定尺寸，我认为您甚至不需要测试就可以看到您有 3 个共线点……我认为您只需要测试就可以看到您已经转了两圈。 . 至少需要 4 分，但如果你不走运，可能会更多。必须确定其中两个点与其他两个点在不同的墙上，这意味着反弹非常大！）

涉及到一些数学问题，今晚我有点太累了，无法进一步解释，而且我不知道你想利用多少正方形周围点的几何形状，因为你不能在更一般的情况下使用这些属性，所以我将保留它，也许稍后还会删除我之前的一些其他头脑风暴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:07:00.737

如果你有两个点，你可以用 Math.atan2 计算连接线的斜率。

# java - 如何在 java netbeans 中制作隐藏的“退出”按钮？

> ID：13536979
> 
> 赞同：3
> 
> 时间：2012-11-23T23:45:25.380
> 
> 标签：java, swing, button

我想在 netbeans 中创建一个隐藏按钮。假设如果我单击 Next 按钮，那么新的“Exit”按钮将出现在同一个 jFrame 中。在我单击“下一步”按钮之前，不会显示“退出”按钮。那么如何制作呢？我的意思是如何在netbeans的.setVisible(false)中创建一个默认的按钮？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:45:02.843

由于您似乎已经知道正确的方法，我假设您怀疑的是 Netbeans 操作。

右键单击方法并选择“*自定义代码*”。

然后您将有机会在按钮创建后添加正确的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T00:17:27.050

`JButton.setVisible(false);`创建按钮后立即使用。

# facebook - iOS Phonegap Like 按钮 (phonegap-plugin-facebook-connect)

> ID：13536980
> 
> 赞同：2
> 
> 时间：2012-11-23T23:45:29.043
> 
> 标签：facebook, cordova, facebook-like

我在 iOS 的 Phonegap 应用程序中实现“Like-Button”时遇到问题。

我正在使用 phonegap-plugin-facebook-connect 插件，它可以工作。（我可以在墙上贴东西等等）

但我无法实现特定页面的“Like-Button”。（按钮应该在的地方只有一个空白）

我在谷歌上搜索了几个小时，但没有什么能真正帮助我。

我目前的代码是：

```
<fb:like href="http://www.facebook.com/oxfam.de" send="false" width="450" show_faces="false"></fb:like> 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:02:54.917

不幸的是，此时您无法通过图表点赞 Facebook 页面。基本上，Facebook 可以通过图表来点赞网站对象，但内部页面仍然不受限制 - 由于垃圾邮件发送者的潜力。

[Facebook 文档](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/likes/)

[相关的问题](https://stackoverflow.com/questions/3061054/like-a-page-using-facebook-graph-api)

我认为最终这将是可能的，但目前还不是。

# django - 检查模型实例是否在查询集中被 FKed？

> ID：13536983
> 
> 赞同：0
> 
> 时间：2012-11-23T23:45:56.953
> 
> 标签：django, django-models

我有一个模型：

```
class ProjectBookmark(models.Model):
    user = models.ForeignKey(User)
    project = models.ForeignKey('Project') 
```

假设用户正在查看一个项目，有没有办法以某种方式检查当前项目是否在用户书签中，而不是我现在通过如下请求上下文执行此操作的讨厌方式？基本上，用户书签是项目列表并检查为

> {% if current_project in current_user.bookmarks %}...

就在模板内部？

```
the_user = request.user
bookmarked_projects = list()
for b in ProjectBookmark.objects.filter(user = request.user):
    bookmarked_projects.append(b.project_id)
the_user.bookmarks = Project.objects.filter(id__in=bookmarked_projects)
return {'current_user':request.user} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:17:46.110

要直接在模板中使用，最好的方法是创建自定义模板标签。查看[模板标签文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)。

至于过滤代码本身，为模型定义中的字段提供`related_name`参数会非常有帮助。`ForeignKey`例如：

```
class ProjectBookmark(models.Model):
    user = models.ForeignKey(User, related_name="project_bookmarks")
    project = models.ForeignKey('Project', related_name="bookmarks") 
```

通过这种方式，您可以使用以下方式访问`QuerySet`包含所有用户书签的对象`request.user.project_bookmarks.all()`

# actionscript-3 - SampleDataEvent.SAMPLE_DATA - 调节触发此事件的频率

> ID：13536985
> 
> 赞同：0
> 
> 时间：2012-11-23T23:46:12.763
> 
> 标签：actionscript-3, flash, air

从输入设备采样数据时，我是否可以调节闪存触发 SAMPLE_DATA 事件的频率？我需要不断地采样（甚至是沉默）。

```
var mySound:Sound = new Sound();
mySound.addEventListener(SampleDataEvent.SAMPLE_DATA, onSampleData); 
```

AFAIK 目前这个函数被调用 20 次/秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:55:34.470

[使用来自http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/SampleDataEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/SampleDataEvent.html)的示例代码

```
var mySound:Sound = new Sound();
function sineWaveGenerator(event:SampleDataEvent):void {
    for ( var c:int=0; c<8192; c++ ) {
        event.data.writeFloat(Math.sin((Number(c+event.position)/Math.PI/2))*0.25);
        event.data.writeFloat(Math.sin((Number(c+event.position)/Math.PI/2))*0.25);
    }
}

mySound.addEventListener(SampleDataEvent.SAMPLE_DATA,sineWaveGenerator);
mySound.play(); 
```

你写的数据越少，方法被调用的频率就越高。

如果您经常调用它，声音可能会变得刺耳和粗糙。尝试调整帧速率。

# java - 在 JPanel 中的任意位置添加按钮

> ID：13536986
> 
> 赞同：7
> 
> 时间：2012-11-23T23:46:31.587
> 
> 标签：java, swing, jframe, jpanel, layout-manager

如果没有在 Eclipse 上使用 Swing GUI，我一直在努力将按钮添加到`JFrame`框架中的任何位置（所以没有`BorderLayout.CENTER`）。我过不去：

```
JPanel panel = new JPanel();
JButton OKButton = new JButton("OK");
OKButton.addActionListener(new MyAction());
panel.add(OKButton,BorderLayout.CENTER); 
```

那么像这样的东西会被完全重新设计还是我错过了什么？

编辑：在任何地方（因为我计划向框架添加多个按钮/标签），我的意思可能是框架上的坐标。因此，除了死点，（示例）左侧 75% 和向下 25%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T00:10:43.737

您可以使用具有不同 LayoutManger 的不同面板来根据需要排列 GUI。

在这里查看一些常见的 LayoutManager： [http ://docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

否则，您可以使用空布局 (panel.setLayout(null)) 并通过设置位置来放置所有组件。但我会向你推荐 LayoutMangers

# php - Ajax 变量未在响应中显示

> ID：13536987
> 
> 赞同：1
> 
> 时间：2012-11-23T23:46:36.127
> 
> 标签：php, html, ajax, arrays, json

我正在尝试将一些 ajax 合并到我的代码中，目前它工作得很好，当用户单击一个按钮时，它会将一些隐藏的输入发送到另一个 php 脚本，执行一些操作，然后将结果发送回并输出，所有更新都使用没有刷新等。

然而，我试图发送和接收的最后一部分是一个显示一些 html 代码的变量，换句话说，被发送回来和输出的其他变量只是数字和字母，而这个是实际的 div它没有输出它，我在没有 ajax 的情况下尝试过，当页面第一次加载并且效果很好时，但是当我使用 ajax 尝试时没有，希望下面的代码会更有意义。我希望能够发回的变量是`$sl_output`.

主页上的 AJAX 代码

```
<script>
$(document).ready(function (){ 

    $(".add_detail_land_down").click(function(){

        var hidden_count = $('input[name=addon_detail_hidden_count]').val();
        var land_required = $('input[name=addon_hidden_land_required]').val();
        var sl_array = $('input[name=addon_hidden_shopping_list_array]').val();
        var button_tok = "land_down";

     $.ajax({
            type: "GET",
            url: "addon_detail_calc.php",
            data: { hidden_count: hidden_count, button_tok: button_tok, land_required: land_required, sl_array: sl_array  },
            dataType: "json",
            success: function (data) {
    $("#res_expected_gain").html(data.total_hidden);
    $("#output").html(data.output);
    $("#res_expected_profit").html(data.land_required);
    $("#res_total_supply_time").html(data.test_time);
    $("#land_selected_token").html(data.total_hidden);
    $("#sl_output_div").html(data.sl_output);
}
        });
        return false;
})

}); 
```

代码在`addon_detail_calc.php`

```
 <?php 
// header('application/json');
$hidden_count = $_GET["hidden_count"];
$button_tok = $_GET["button_tok"];
$land_required = $_GET["land_required"];
$sl_array = $_GET["sl_array"];
$sl_output = "";
if($button_tok == "land_up"){

    //MAIN CODE SHALL BE DONE HERE
    $hidden_count = $hidden_count + 1;
    $test_time = $hidden_count * 66;

    $new_sl_array = array();
$final_sl_array = array();
foreach ($sl_array as $columnName => $columnData) {

        if($columnName == "0"){
            unset($sl_array[$columnName]);

        }else{

            $new_columnData = $columnData * 54;
            $new_sl_array[$columnName] = $new_columnData;

        }

    }
foreach ($new_sl_array as $columnName => $columnData) {

            $sl_output = "";
            $sl_output = '<li class="add_detail_content_ele_wrap_ele"><div class="add_detail_content_ele_wrap_ele_header">'.$columnName.'</div><!--end add_detail_content_ele_wrap_ele_header--><div class="add_detail_content_ele_wrap_ele_pic"></div><!--end add_detail_content_ele_wrap_ele_pic--><div class="add_detail_content_ele_wrap_ele_amount">47 Required</div><!--end add_detail_content_ele_wrap_ele_amount--><div class="add_detail_content_ele_wrap_ele_user_amount">You Have 0</div><!--end add_detail_content_ele_wrap_ele_user_amount--></li>';

            $final_sl_array[$columnName] = $sl_output;

        }

$array_result = implode("", $final_sl_array);

    }else{        
        $hidden_count = $hidden_count;  

}else{

    $hidden_count = $hidden_count;  

}

$output = "";
$output = '<input type="hidden" name="addon_detail_hidden_count" id="addon_detail_hidden_count" class="addon_detail_hidden_count" value="'.$hidden_count.'" />';
include 'connect_to_mysql.php';

echo json_encode(array("total_hidden" => $hidden_count, "output" => $output, "land_required" => $hidden_count, "test_time" => $test_time, "sl_output" => $final_sl_array ));

 ?> 
```

我想问题是，可以查看并重新输出正在传输的 html 代码变量吗？

## 编辑

我已经更新了上面的代码，似乎第一个问题是 foreach 循环没有处理正确的数据，我不得不重新整理并添加另一个数组。因此，我必须将数组中的每个值`final_sl_array`放入一个变量中，我试图将其分解，当我在页面打开时通过普通 php 运行它时它起作用了，但是，现在当我通过 ajax 尝试它时，它不是工作，而不是返回任何结果，任何想法为什么它适用于一个而不是另一个？

# c# - 从 txt 文件中的行读取，如果框是一部分，则变量等于秒

> ID：13536990
> 
> 赞同：1
> 
> 时间：2012-11-23T23:46:50.683
> 
> 标签：c#, .net, visual-studio-2012

我需要根据文本文件中的内容设置一个变量。

文本文件是这样设置的：

```
AK_47_M,30Rnd_762x39_AK47
AK_47_S,30Rnd_762x39_AK47
AKS_74_Kobra,30Rnd_545x39_AK
bizon_silenced,64Rnd_9x19_SD_Bizon
M1014,8Rnd_B_Beneli_74Slug
M16A2,30Rnd_556x45_Stanag 
```

依此类推……你会注意到第一部分是武器类名，第二部分是弹药类型的类名。

我的表单上有一个名为 box_weapon 的组合框，它从同一个文本文件中读取，并通过运行以下代码创建该行的所有第一部分的数组：

```
string[] weaponsArray = File.ReadAllLines("weapons.txt");
            foreach (var line in weaponsArray)
            {
                string[] tokens = line.Split(',');
                box_pw.Items.Add(tokens[0]);
            } 
```

总结一下。我需要某种“如果 box_weapon = linePosition1; ammoType = linePosition2”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T23:51:17.463

试试这个

```
StreamReader reader = File.OpenText(@"C:\weapons.txt");
while (!reader.EndOfStream)
{
    string currentLine = reader.ReadLine();
    string[] words = currentLine .Split(",");
    if (this.box_weapon.SelectedItem.ToString()  == words[0])
    {
     ammoType = words[1];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:19:29.947

```
public class Weapons
{
    public string AK_47_M;
    public string AK_47_S;
    public string AKS_74_Kobra;
    public string bizon_silenced;
    public string M1014;
    public string M16A2;
}

Weapons weapons = (new JavascriptSerializer())
    .Deserialize<Weapons>( "{" + 
         String.Join(",", File.ReadAllLines("weapons.txt")
                              .Select(x => x.Replace(",",":"))
                              .ToArray()) + 
    "}" );

String AK = weaponsObj.AK_47_M; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:22:51.747

不要添加`Strings`到您的组合框中。添加“武器”！

```
Public Class Form1

Private Weapons As New List(Of Weapon)

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    With Weapons
        .Add(New Weapon("M16", ".223"))
        .Add(New Weapon("AK74", "7.62"))
        .Add(New Weapon("Catapult", "Pumpkin"))
    End With
    Me.ComboBox1.DataSource = Weapons
End Sub

Private Sub ComboBox1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ComboBox1.SelectedIndexChanged
    If ComboBox1.SelectedItem IsNot Nothing Then
        Dim w As Weapon = DirectCast(ComboBox1.SelectedItem, Weapon)
        Debug.Print("A {0} needs some {1} to be effective!", w.Name, w.Ammo)
    End If
End Sub
End Class

Public Class Weapon

Public Name As String
Public Ammo As String

Public Sub New(Name As String, Ammo As String)
    Me.Name = Name
    Me.Ammo = Ammo
End Sub

Public Overrides Function ToString() As String
    Return Me.Name
End Function

End Class 
```

# c# - 构造函数参数和继承

> ID：13536993
> 
> 赞同：28
> 
> 时间：2012-11-23T23:47:32.910
> 
> 标签：c#, inheritance, constructor

OOP 的新手，我对从 C# 中的基类继承时派生类构造函数的工作方式感到困惑。

首先是基类：

```
class BaseClass
{
    private string BaseOutput = null;

    public BaseClass(string BaseString)
    {
        BaseOutput = BaseString;
    }

    public virtual void PrintLine()
    {
        Console.WriteLine(BaseOutput);
    }
} 
```

这是派生类：

```
class SubClass : BaseClass
{
    private string SubOutput = null;

    public SubClass(string BaseString, string SubString) : base(BaseString)
    {
        SubOutput = SubString;
    }

    public override void PrintLine()
    {
        Console.WriteLine(SubOutput);
    }
} 
```

最后，程序的主要部分：

```
class Program
{
    static void Main(string[] args)
    {
        BaseClass theBase = new BaseClass("Text for BaseClass");
        SubClass theSub = new SubClass("2nd param", "Text for SubClass");

        theBase.PrintLine();
        theSub.PrintLine();

        Console.ReadKey();
    }
} 
```

我不明白的是，为什么在调用派生类的构造函数时，我还必须传递基类所需的参数。如果没有分配值，派生类中的 BaseOutput 字段不应该保持设置为 null 吗？为什么不能这样工作：

```
public SubClass(string SubString) : base(BaseString) 
```

此外，在这个派生类中调用构造函数时，第一个参数的名称必须与基类中的相同，否则会引发错误。如果我要在派生类中定义一个名为 AnotherString 的新字符串变量，为什么这不起作用：

```
public SubClass(string AnotherString, string SubString) : base(BaseString) 
```

最后，当您以正确的方式执行此操作并输入此内容时...

```
public SubClass(string BaseString, string SubString) : base(BaseString) 
```

... SubClass 构造函数中的第一个参数是做什么用的？它没有在我的派生类的任何方法中分配或使用。为什么我必须把它放在那里？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-23T23:52:48.220

至于为什么你不能这样做：

```
public SubClass(string SubString) : base(BaseString) 
```

会`BaseString`是什么？

你可以这样做：

```
public SubClass(string SubString) : base("SomeFixedString") 
```

或者

```
public SubClass(string SubString) : base(SubString) 
```

但是，如果您想将一个字符串传递给基类构造函数的参数并有一个额外的字符串，则需要接受两个参数。

至于保持相同的名字，你*不*。你可以这样做：

```
public SubClass(string AnotherString, string SubString) : base(AnotherString) 
```

至于最后一个问题，第一个参数没有做任何事情，它被传递给基类构造函数。如果您愿意，可以将其用于其他用途。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T23:52:50.913

如果您想为派生类提供不设置 BaseString 的机会，那么您需要在基类中提供一个默认构造函数，如下所示：

```
public BaseClass()
{

} 
```

现在在派生类中，您可以在基类中调用不带参数的构造函数，如下所示：

```
public SubClass(string AnotherString)
     : base()
{
    // base() => explicit call to default construct in the base class.
    // Do something else
} 
```

这提供了良好的软件工程实践：如果您想提供不设置基类字符串的机会，请在基类中设置。其他“黑客”，例如将 null 作为参数传递给基构造函数，仅用于以不应该从子类完成的方式修补基类的内部结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T23:52:21.327

```
public SubClass(string BaseString, string SubString) : base(BaseString) 
```

派生类中的构造函数表示，当您收到两个参数`BaseString`和时`SubString`，使用 调用基类的构造函数`BaseString`。

因此，做

```
public SubClass(string a, string b) : base(BaseString) 
```

不起作用，因为您告诉它调用基类的构造函数，`BaseString`但没有调用`BaseString`.

如果要实例化派生类而不将 String 传递给基类构造函数，则基类需要一个默认构造函数：

```
public BaseClass() { } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T23:52:01.730

如果要`BaseString`使用默认值进行初始化，则将该值传递给基类构造函数（因此您不必将该参数传递给派生类构造函数）

```
public SubClass(string SubString) : base(null) 
```

或者在基类中定义无参数构造函数。

还有关于参数命名 - 什么名称具有参数并不重要，您将其传递给派生构造函数。唯一重要的是您传递给基本构造函数的值。

```
public SubClass(string AnotherString, string SubString) : base(AnotherString) 
```

# perl - 将 Perl CGI 迁移到模板工具包的策略？

> ID：13536997
> 
> 赞同：12
> 
> 时间：2012-11-23T23:47:44.940
> 
> 标签：perl, templates, migration, cgi, toolkit

我有一个相对较大的遗留 Perl/CGI/DBI Web 应用程序，它会逐个生成 HTML。我们正在修改正在生成的 HTML，以符合 HTML 5 / CSS 3。这将是转移到某种模板系统的好时机。我们不想进行完全重写，因此不想迁移到 Catalyst 等框架。

我在想 Perl Template Toolkit 可能是我们影响最小的方法。我正在重新阅读古老的獾书以研究可行性。

我的问题是这个。这里有人将“老派”Perl Web 代码迁移到 Template Toolkit 吗？您是否可以分享任何技巧来最大程度地减少所需的重写/返工？我们也没有 100% 决定使用 Template Toolkit。如果有我们应该考虑的替代方案？

具体来说，我们要解决什么问题？我们正在生成无效的 HTML，需要对其进行清理。由于我们正在清理，我们希望生成完全有效的 HTML 5，并在可行的范围内生成有效的 CSS3 和 Javascript。我们通过 jQuery 使用 jQuery、jQuery UI 小部件和 AJAX。我们有典型的页面控制器 MVC 架构，除了没有视图层。我们希望使用某种模板系统，但不想重写所有内容（或大部分内容！）以进行迁移。

谢谢你！Ed Barnard，明尼苏达州坎农福尔斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T00:23:59.110

这是我发现的，因为我已经将我的实践从 CGI.pm 转移到 TT，以及我在使用 HTML::Mason、HTML::Template、Text::Template 和使用的过程中学到的东西Rails 中的 ERB 和 HAML。

1.  显示中包含的逻辑越多，特别是如果它是用特定于显示的语言编写的，那么您将获得的乐趣就越少。
2.  我开始更喜欢 HAML 以减少模板内容的大小 [在 HAML 中，缩进暗示结束标签]
3.  在进入模板之前，使用应用程序的本地语言执行尽可能多的逻辑来计算页面的各种动态位。[调用视图方法，在进行渲染之前]。
4.  关于（3），通过使用方法，而不是内联显示/渲染逻辑，您可以使您的模板具有声明性，因此虽然您可能在渲染中间执行逻辑，但您的模板没有一堆 IF /THEN/ELSE 逻辑导致混乱。

让我们想象一个由页眉、页脚和正文组成的相当小的、人为的网页。让我们假设页脚是完全静态的，每次加载新页面时正文都会更改，但页眉仅在用户登录/注销时才会更改。

您可以想象包含如下代码的标头：

```
<header>
[% IF $user.is_logged_in THEN %]
   Hello [% $user.name %] - <a href="/logout/user/[% $user.id %]">Log Out</a>
[% ELSE %]
   Please <a href="/user/login">Log In</a>
[% END %]
</header> 
```

但从长远来看，您最好在 header.tt 中执行此操作：

```
<header>
  [% user_info($user) |html %]
</header> 
```

这在 View::Helpers::Header.pm 中：

```
sub user_info {
   my $user = shift;
   if ($user->{is_logged_in} ) {
     return "Hello $user->{name} - " . logout_link($user->{id});
   }
   else {
     return "Please " . login_link();
   }
}

sub logout_link {
  my $userid = shift;
  return qq(<a href="/logout/user/[% $userid %]">Log Out</a>)
} 
```

当然，您可以在 TT 而不是纯 Perl 中实现视图助手，我没有任何类型的数字给您，但是如果您已经在 Perl 中完成了所有逻辑，您可以将 Perl 重构为模块（如果它不存在的话），而不是在 TT 中重新编码它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T16:02:03.260

作为测试套件的一部分，请考虑使用 HTML::Lint 或 HTML::Tidy 等 HTML 验证器。

# sql - 包含 ORDER BY、LIMIT 和 COUNT 的 SQL 语句中的性能

> ID：13536999
> 
> 赞同：0
> 
> 时间：2012-11-23T23:48:06.100
> 
> 标签：sql, tags, count, sql-order-by

我已经在一个 SQL 语句中搜索了改进这种危险的函数组合的方法......

为了让您了解上下文，我有一个表格，其中包含有关文章的几个信息（article_id、作者、...），另一个表格包含带有一个 tag_id 的 article_id。由于一篇文章可以有多个标签，因此第二个表可能有 2 行具有相同的 article_id 和不同的 tag_id。

为了获得与我想要的（在本例中为 1354）具有更多共同标签的 8 篇文章的列表，我编写了以下查询：

```
SELECT articles.article_id, articles.author, count(articles_tags.article_id) as times
FROM articles
INNER JOIN articles_tags ON (articles.article_id=articles_tags.article_id)
WHERE id_tag IN
    (SELECT article_id FROM articles_tags WHERE article_id=1354)
AND article_id <> 1354
GROUP BY article_id
ORDER BY times DESC
LIMIT 8 
```

它非常慢……就像 50 万篇文章需要 90 秒。

通过删除“order by times”这句话，它几乎可以立即生效，但如果我这样做，我将不会得到最相似的文章。

我能做些什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:34:10.437

对子选择的查询总是会浪费时间......另外，由于查询看起来并不准确或缺失，我假设您的articles_tags 表有两列......一列用于实际的文章 ID，另一个是与之关联的 tag_ID。

也就是说，我会预先查询文章 1354 的标签 ID（您感兴趣的那个）。在相同的标签 ID 上再次使用它作为文章标签的笛卡尔连接。从那里，您将获取文章标签别名的第二个版本并获取它的文章 ID，然后是 MATCH 的计数（通过加入而不是左联接）。像您一样在文章 ID 上应用分组依据，并且为了咧嘴笑，加入文章表以获取作者。

现在，请注意。一些 SQL 引擎要求您按所有非聚合字段进行分组，因此您可能必须将作者添加到组中（无论如何，每个文章 ID 始终相同），或者将其更改为 MAX（A.author）作为作者，这将给出相同的结果。

我会在 (tag_id, article_id) 上有一个索引，因此这些标签是从您希望找到的共同标签中找到的。您可能有一篇文章有​​ 10 个标签，而另一篇文章有​​ 10 个完全不同的标签，结果共有 0 个。这将阻止其他文章甚至出现在结果集中。

您仍然有时间浏览您所描述的 50 万篇文章，这可能是数百万个实际标签条目。

```
select 
      AT2.article_id,
      A.Author,
      count(*) as Times
   from
      ( select ATG.id_tag
           from articles_tags ATG
           where ATG.Article_ID = 1354
           order by ATG.id_tag ) CommonTags
         JOIN articles_tags AT2
            on CommonTags.ID_Tag = AT2.ID_Tag
            AND AT2.Article_ID <> 1354
            JOIN articles A
               on AT2.Article_ID = A.Article_ID
   group by
      AT2.article_id
   order by
      Times DESC
   limit 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:15:35.630

It seems that it should be possible to do this without any subqueries, and then a quicker query may result.

Here the article of interest is joined to its tags, and then further to other articles having these tags. Then the number of tags for each article is counted and ordered:

```
SELECT a2.article_id, a2.author, COUNT(t2.tag_id) AS times
FROM articles a1 
INNER JOIN articles_tags t1
ON t1.article_id = a1.article_id   -- find tags for staring article
INNER JOIN tags t2
ON t2.tag_id = t1.tag_id           -- find other instances of those tags
AND t2.articles_id <> t1.articles_id
INNER JOIN articles a2
ON a2.articles_id = t2.articles_id -- and the articles where they are used
WHERE a1.article_id = 1354
GROUP BY a2.article_id, a2.author  -- count common tags by articles
ORDER BY times DESC
LIMIT 8 
```

If you know a lower bound on the number of tags in common (e.g. 3), inserting `HAVING times > 2` before `ORDER BY times DESC` could give a further speed improvement.