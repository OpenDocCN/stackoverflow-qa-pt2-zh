# StackOverflow 问答 16191000-16191999

# c++ - 前向声明和继承

> ID：16191000
> 
> 赞同：0
> 
> 时间：2013-04-24T11:38:13.647
> 
> 标签：c++

`getFoo`以下代码在函数中生成错误，因为`MockFoo`尚未定义为继承自`IFoo`. 我怎样才能解决这个问题？最简单的方法是将`_foo`'s 的类型更改为 IFooPtr。但如果可能的话，我宁愿不做这个改变。我无法更改定义类的顺序。

```
class MockFoo;
typedef boost::shared_ptr<MockFoo> MockFooPtr;

class MockBar: public IBar
{
    virtual IStructPtr getFoo() const {
        return _foo;
    }
    ...

    MockFooPtr _foo;
};

class MockFoo: public IFoo
{
    ...
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:39:56.667

如果我是你，我会将 typedef 声明为：

```
typedef boost::shared_ptr<IFoo> IFooPtr; 
```

这对我来说感觉更自然，并且避免了您遇到的问题 - 并且是您自己提出的解决方案。

# java - I need to check the occurrence of a particular symbol at the beginning of my String

> ID：16191002
> 
> 赞同：0
> 
> 时间：2013-04-24T11:38:22.507
> 
> 标签：java, regex, string

I need to check the occurrence of a particular symbol say `#$` at the beginning of my String.

Simply, I need to get the

`boolean symbolExist true` for all the following cases,

*   `#$MyString`
*   `#$<Space>myString`
*   `#$<Space><Space>myString`
*   `#$<Space><space>my#$String`
*   `#$My#$String`
*   etc. (never mind what ever coming after the 2 characters)

`boolean symbolExist false` for

*   `MyString#$`
*   `My#$string`
*   etc .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:42:27.433

您可以使用类的`startsWith`方法`String`：

```
String s = "#$test";
System.out.println(s.startsWith("#$")); 
```

输出是`true`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:44:55.643

在 String 类中，我们有一个称为 boolean startsWith(String prefix) 的方法，使用这种方法可以解决您的问题。

```
String content = "#$MyString";

if(content.startsWith("#$")) //This will return true if String starts with "#$"
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:08:13.380

尝试这个 ：

```
boolean symbolExists ;
String myString;
if(myString.startsWith("#$"))
    symbolExists = true;
else
    symbolExists = false; 
```

# php - 服务器发送事件：更改时间间隔

> ID：16191003
> 
> 赞同：1
> 
> 时间：2013-04-24T11:38:23.543
> 
> 标签：php, server-sent-events

我在看`Server-Sent Events`，因为客户端在**共享主机**上，我不能使用 websockets。

我已经测试了[W3School 的示例](http://www.w3schools.com/html/html5_serversentevents.asp)，它运行良好。我的代码如下所示：

**Index.php（相关部分）：**

```
<script>
    var source=new EventSource("data.php");
    source.onmessage=function(event)
    {
        document.getElementById("result").innerHTML+=event.data + "<br>";
    };
</script> 
```

**数据.php：**

```
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');

$time = date('r');
echo "data: The server time is: {$time}\n\n";
flush();
?> 
```

现在，我得到的输出如下所示：

```
The server time is: Wed, 24 Apr 2013 13:31:25 +0200
The server time is: Wed, 24 Apr 2013 13:31:28 +0200
The server time is: Wed, 24 Apr 2013 13:31:31 +0200
The server time is: Wed, 24 Apr 2013 13:31:34 +0200
The server time is: Wed, 24 Apr 2013 13:31:37 +0200
The server time is: Wed, 24 Apr 2013 13:31:40 +0200
The server time is: Wed, 24 Apr 2013 13:31:43 +0200
The server time is: Wed, 24 Apr 2013 13:31:46 +0200
The server time is: Wed, 24 Apr 2013 13:31:49 +0200 
```

我注意到，`time-interval`这里是**3 秒。**
我的问题是：**如何更改此时间间隔？**
在`data.php`我打算有一个发送请求并返回响应的代码，但是请求的数量是有限的，所以我需要使这个间隔更大。

这甚至是解决问题的好方法，还是我应该使用`polling`？

对不起，如果我不够清楚，我真的不知道如何描述这个问题。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:53:47.850

你可能不喜欢这样，但事实是——你没有正确使用它。

PHP 脚本不应终止 - 您应该使用循环。使用此循环，您还可以控制间隔（最简单的方法是`sleep($seconds)`）。

```
while(true) {
   $time = date('r');
   echo "data: The server time is: {$time}\n\n";
   flush();
   sleep(3);   // interval: 3 seconds
} 
```

您的脚本似乎工作的原因是浏览器总是尝试重新建立连接，因为事件流终止（被认为是浏览器错误）。但是，这与每 X 秒轮询一次服务器没有什么不同，消除了事件流的优势。

此外，不建议将 Apache 和 PHP 用于事件流 - Apache 不是为无限期保持打开的连接而设计的（这可能不再是真的 - 没有保持最新），并且许多主机限制了执行时间用于 PHP 脚本。要么使用不同的 Web 服务器，要么使用轮询，以避免潜在的问题。

# asp.net - 如何选择 DropDownList 中的所有记录

> ID：16191005
> 
> 赞同：1
> 
> 时间：2013-04-24T11:38:29.820
> 
> 标签：asp.net, select, drop-down-menu

我有这个下拉列表：

```
<asp:DropDownList ID="DropDownList1" 
    runat="server" 
    AutoPostBack="true" 
    DataSourceID="SqlDataSource1" 
    DataTextField="Categorie" 
    DataValueField="Cat_ID" 
>
</asp:DropDownList> 
```

和 SqlDataSource`select * all from [tbl_Cat]`

它用于通过类别过滤数据库。它工作得很好，但它只显示`tbl_Cat`. 我还想要`select all`DropDownList 中的一个项目。

DropDownList 和数据网格不是用代码隐藏的；是否可以通过代码隐藏输入“选择所有记录”选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:15:13.340

您需要编写以下代码来帮助您选择类别的所有选项。

```
 <asp:DropDownList ID="DropDownList1" AutoPostBack="true" runat="server">
 </asp:DropDownList> 
```

在代码隐藏文件中

```
SqlConnection con = new SqlConnection(str);
string com = "select * all from tbl_Cat";
SqlDataAdapter adpt = new SqlDataAdapter(com, con);
DataTable dt = new DataTable();
adpt.Fill(dt);

DropDownList1.DataSource = dt;
DropDownList1.DataBind();
DropDownList1.DataTextField = "Categorie";
DropDownList1.DataValueField = "Cat_ID";
DropDownList1.DataBind();
DropDownList1.Items.Insert(0, new ListItem("Select ALL", "0")); 
```

现在您可以检查下拉选择的值是否为 0，如果为 0，则可以加载网格中的所有记录。

如果有什么我想念的，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:16:05.543

可能你有这个疑问，

```
DropDownList1.Items.Add(new ListItem("Select All", "0")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:59:19.657

以下是从代码隐藏绑定 DropDownList 的方法。访问[此链接](http://www.c-sharpcorner.com/UploadFile/rohatash/binding-dropdownlist-with-database-and-display-data-in-gridv/)了解详情

```
 <asp:DropDownList ID="DropDownList1" runat="server">
 </asp:DropDownList> 
```

**代码背后**

```
SqlConnection con = new SqlConnection(str);
string com = "select * all from tbl_Cat";
SqlDataAdapter adpt = new SqlDataAdapter(com, con);
DataTable dt = new DataTable();
adpt.Fill(dt);

DropDownList1.DataSource = dt;
DropDownList1.DataBind();
DropDownList1.DataTextField = "Categorie";
DropDownList1.DataValueField = "Cat_ID";
DropDownList1.DataBind(); 
```

# php - PDO FetchALL 只返回一行

> ID：16191012
> 
> 赞同：0
> 
> 时间：2013-04-24T11:38:56.507
> 
> 标签：php, mysql, pdo

这对我来说有点让人头疼，因为我使用 PDO 已经有一段时间没有问题了。但是今天我遇到了这段代码的问题：

```
 $query = "SELECT exit_time, exit_url FROM exit_log ORDER BY exit_time ASC LIMIT 50";
  $stmt = $db->query($query, PDO::FETCH_ASSOC);
  $posts = $stmt->fetchAll();
  print_r($posts); 
```

问题不在于查询本身，因为在 phpMyAdmin 上，查询结果是我需要的 50 行。但是当我运行上面的代码时，我得到了这个，只是这个：

```
Array ( [0] => Array ( [exit_time] => 1366714175 [exit_url] => http://blogbaladi.com/trillium-strikes-again/ ) 
```

我几乎可以发誓这是我用于其他工作正常的项目的相同代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:05:03.083

您确定您使用 PHP 代码访问了正确的数据库服务器吗？您可以在 PhpMyAdmin 中查看生产数据库并使用您的脚本获取开发数据库的行...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:44:03.190

太长的评论：什么

```
$query = "SELECT Count(*) as cnt FROM exit_log";
$stmt = $db->query($query, PDO::FETCH_ASSOC);
echo __FILE__, '@', __LINE__, "\r\n";
print_r($stmt->fetchAll());

$query = "SELECT exit_time, exit_url FROM exit_log ORDER BY exit_time ASC LIMIT 50";
$stmt = $db->query($query, PDO::FETCH_ASSOC);
$posts = $stmt->fetchAll();
echo __FILE__, '@', __LINE__, "\r\n";
print_r($posts); 
```

打印？

# c# - 在不缓冲到 RAM 的情况下将元素复制并附加到 XML 文档

> ID：16191015
> 
> 赞同：4
> 
> 时间：2013-04-24T11:39:02.290
> 
> 标签：c#, xml

正如标题所示，我需要将日志数据附加到 XML 文件而不缓冲到 RAM。XML 文件由 LogEntry 元素组成，其中包含 82 个包含数据的子元素。这些文件可能会变得非常大，并且由于它将构成 Windows CE6 程序的一部分，因此我们的内存非常有限。

经过大量研究后，很明显最常用的方法是使用`XDocument`或`Linq to XML`读取现有文档，然后再附加到现有文档并写出新文档。使用`XmlWriter`和`XmlReader`一致似乎是我追加到文件的最佳方式，但到目前为止我的所有尝试都是非常不切实际的，并且需要 IF 语句来指示要写入的内容，以防止写入重复或数据较少的元素。

我正在做的事情的本质是：

```
//Create an XmlReader to read current WorkLog.
using (XmlReader xmlRead = XmlTextReader.Create("WorkLog.xml"))
{
   //Create a XmlWriterSettings and set indent 
   //to true to correctly format the document
   XmlWriterSettings writerSettings = new XmlWriterSettings();
   writerSettings.Indent = true;
   writerSettings.IndentChars = "\t";

   //Create a new XmlWriter to output to
   using (XmlWriter xmlWriter = XmlWriter.Create("New.xml", writerSettings))
   {
      //Starts the document
      xmlWriter.WriteStartDocument();

      //While the XmlReader is still reading (essentially !EOF)
      while (xmlRead.Read())
      {
         //FSM to direct writing of OLD Log data to new file
         switch (xmlRead.NodeType)
         {
            case XmlNodeType.Element:
               //Handle the copying of an element node
               //Contains many if statements to handle root node &  
               //attributes and to skip nodes that contain text
               break;
            case XmlNodeType.Text:
               //Handle the copying of an text node
               break;
            case XmlNodeType.EndElement: 
               //Handle the copying of an End Element node
               break;
         }
      }

      xmlWriter.WriteEndDocument();
   }
} 
```

我相信我可以通过这种方式附加到文件中，但这样做非常不切实际 - 有没有人知道我的搜索时间没有出现的任何内存高效方法？

如果需要，我很乐意发布我当前的代码来执行此操作 - 但正如我所提到的，它非常大，而且目前实际上非常讨厌，所以我暂时将其忽略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:57:01.180

如果您知道您的 xml 结构，请考虑使用流编写器。1\. 以文件流形式打开文件 2\. 将点移至要替换的标签，例如： ，将点（位置）移至“<” 3\. 以正确的 xml 格式写入日志数据并在末尾写入“”写的

“使用文本编辑器处理 xml 文件”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T15:45:57.093

如果 hack 是合理的，我会转到文件末尾，倒回结束标签并写入新元素和结束标签。为了进一步改进，您甚至可以缓存最后一个元素开头的偏移量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T14:47:54.517

假设日志文件是这样的（只有两个级别）：

```
<logs>
    <Log>abc1</Log>
    <Log>abc1</Log>
    <Log>abc1</Log>
</logs> 
```

我曾经`FileStream`寻求结束并阅读结束元素。

```
private static void Append(string xmlElement)
{
    const byte lessThan = (byte) '<';
    using (FileStream stream = File.Open(@"C:\log.xml", FileMode.OpenOrCreate))
    {
        if (stream.Length == 0)
        {
            byte[] rootElement = Encoding.UTF8.GetBytes("<Logs></Logs>");
            stream.Write(rootElement, 0, rootElement.Length);
        }
        List<byte> buffer = new List<byte>();
        stream.Seek(0, SeekOrigin.End);
        do
        {
            stream.Seek(-1, SeekOrigin.Current);
            buffer.Insert(0, (byte) stream.ReadByte());
            stream.Seek(-1, SeekOrigin.Current);
        } while (buffer[0] != lessThan);

        byte[] toAdd = Encoding.UTF8.GetBytes(xmlElement);
        stream.Write(toAdd, 0, toAdd.Length);
        stream.Write(buffer.ToArray(), 0, buffer.Count);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T15:20:47.310

您的使用`XmlReader`方法实际上是要走的路……但正如您所说，这是非常不切实际的。

**那么黑客攻击是合理的吗？**

原因是 XML 有很多你可能会遇到的特性，需要你从上到下阅读它。通常`XmlReader`会处理这些情况，给你留下简单的标签等等。例如，给定以下声明：

```
<!ENTITY % pub    "&#xc9;ditions Gallimard" >
<!ENTITY   rights "All rights reserved" >
<!ENTITY   book   "La Peste: Albert Camus, &#xA9; 1947 %pub;. &rights;" > 
```

那么实体的替换文本`book`是：

```
La Peste: Albert Camus,
© 1947 Éditions Gallimard. &rights; 
```

如果您还没有阅读`ENTITY`标签，就不可能“翻译”成正确的 XML。也就是说，幸运的是没有很多人使用这些类型的结构，所以可以假设您的 XML 不使用它们来重写根标记。

也就是说，在 XML 中关闭标签的唯一有效方法是`</Foo>`在尾随`>`. （见[http://www.w3.org/TR/2008/REC-xml-20081126/#sec-starttags](http://www.w3.org/TR/2008/REC-xml-20081126/#sec-starttags)）。这基本上意味着您可以跳到最后，读取足够的数据，检查它是否包含结束标记 - 如果包含，您可以插入自己的代码。如果没有，请往回找一点，然后再试一次。

**讨厌的小编码**

最后要注意的是文件的编码。虽然您可以`XmlTextReader`从流构造一个，但流使用字节并且您的阅读器检测到编码并开始阅读。幸运的是，`XmlTextReader`公开了`Encoding`as 属性，因此您可以使用它。编码很重要，因为每个字符可能需要的不仅仅是 1 个字节；特别是当您遇到 UTF-16 或 UTF-32 时，这可能是个问题。处理此问题的方法是将令牌转换为字节，然后对字节进行匹配。

**根 = 预告片假设**

由于我真的不想检查空格和尾随的“>”（参见上面的 W3C 链接），我还假设它是一个有效的 XML 文件，这意味着每个开始标记也都是关闭的。这意味着您可以简单地检查`</root`，使匹配过程更容易一些。（*注意：您甚至可以只检查`</`文件中的最后一个，但我更喜欢我的代码对不正确的 XML 更加健壮*）

**把它们放在一起**

来了......（我没有测试过，但它应该或多或少地工作）

```
public bool FindAppendPoint(Stream stream)
{
    XmlTextReader xr = new XmlTextReader(stream);
    string rootElement = null;
    while (xr.Read())
    {
        if (xr.NodeType == XmlNodeType.Element)
        {
            rootElement = xr.Name;
            break;
        }
    }

    if (rootElement == null)
    {
        // Well, apparently there's no root... You can start a new file I suppose
        return false;
    }
    else
    {
        long start = stream.Position; // the position we're currently reading (end of start tag)
        long len = stream.Length;
        long end = Math.Min(start, len - 1024);

        byte[] endTag = xr.Encoding.GetBytes("</" + rootElement);

        while (end >= start)
        {
            byte[] data = new byte[len - end];
            stream.Seek(start, SeekOrigin.Begin);
            stream.Read(data, 0, data.Length); // FIXME: read returns an int that we should use!!!

            // Loop backwards till we find the end tag
            for (int i = data.Length - endTag.Length; i >= 0; --i)
            {
                int j;
                for (j = 0; j < endTag.Length && endTag[j] == data[i + j]; ++j) { }
                if (j == endTag.Length)
                {
                    // We found a match!
                    stream.Seek(len - data.Length - i, SeekOrigin.Begin);
                    AppendXml(stream, xr.Encoding)
                    return true;
                }
            }

            // Hmm, we've found </xml with a lot of spaces... oh well
            //
            // It's okay to skip back a bit, just have to make sure that we don't skip <0
            if (end == start)
            {
                end = start - 1; // end the loop
            }
            else
            {
                end = Math.Min(start, end - 1024);
            }
        }

        // Nope, no go.
        return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-30T14:36:51.007

只有使用 XmlReader 才能在内存中加载完整的 XML。它也不支持修改，但您可以从源文档中复制 XML 并进行修改。没有其他办法。

并且将 XML 解析为文本文档看起来很难。

最好使用正在解析的类 XmlReader/XmlWriter，并且使用访问者或状态 GoF 模式已经使用您自己的类实现实现了 crud 逻辑。访问者模式将减少 if-s 的数量，并使您的设计易于扩展。即使您想解析 XML 文档而不使用 XmlReader/XmlWriter，我也建议您在这种情况下使用它们。

# javascript - 从 url 中提取版本标识符

> ID：16191020
> 
> 赞同：1
> 
> 时间：2013-04-24T11:39:07.353
> 
> 标签：javascript, regex

我在 JavaScript 中有以下网址：

```
bryntum.com/examples-1.2.3/advanced/advanced.html
bryntum.com/doc/1.2.3/foo/bar.html
cdn.sencha.io/ext-3.4.0/ext-all-debug.js
cdn.sencha.io/ext-3.4.0-beta-1/ext-all.js
cdn.sencha.io/extjs-4.1.0-rc-1/ext-all-debug.js
bryntum.com/examplesfor/extjs-4.1.1/foo/bar.html
bryntum.com/library/extjs-4.1.2/ext-all-debug.js
bryntum.com/library/extjs-10.11.21/ext-all-debug.js
bryntum.com/library/extjs-4.1.2/ext-all-this-is-not-ext.js 
```

我需要使用正则表达式提取 extjs/ext 版本号：在“extjs-”之后或在“ext-”之后直到下一个“/”。但是 URL 可能指向其他资源，在这种情况下，正则表达式不应该匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:42:27.020

对于 .net 世界，以下应该有效：

```
ext(js)?\-(?<ver>\d[^/]+)(?:/) 
```

命名组也会为您提供准确的版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:44:18.853

如果您使用的正则表达式支持环视，这应该适合您的需要：

```
(?<=ext-|extjs-).+?(?=/) 
```

虽然上述正则表达式可能非常宽松，但以下正则表达式更具体（与我从您的 OP 中猜到的可能格式匹配）：

```
(?<=ext-|extjs-)\d+([.]\d+){0,2}(-(beta|rc)-\d+)? 
```

# tibco - Tibco WSDL 在 SOAP UI 中工作并在 Iphone/Android 中失败

> ID：16191021
> 
> 赞同：0
> 
> 时间：2013-04-24T11:39:11.337
> 
> 标签：tibco

我们有一个 WSDL 文件。WSDL 在 Tibco 服务器上工作，我们将 XML 作为soap UI 中的输出。我们必须在 Iphone/Android 开发中使用它。每次从代码发出请求时，我们都会得到 WSDL 以响应 XML 文件。我们需要 XML，以便我们可以在 Iphone/Android 开发中使用它。

我正在发送 WSDL 以供进一步参考。如果有任何问题可以回复我。rtf 如下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T08:33:56.297

我知道这是一种基本的错误，但确实会发生这种错误。您是否检查过端点 URL？您能否提供用于 SOAP UI 和 android/iphone 的具体 WSDL？您在手机上使用它时看到什么错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T00:12:58.617

您是否设置了[SOAPAction HTTP 标头](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T11:32:34.357

如果没有具体的 WSDL，您也无法在 SOAP-UI 中执行相同的操作......

所以这不是正确的反应......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T04:51:30.223

您可能还没有创建具体的WSDL

# php - 每个表格行的删除按钮

> ID：16191026
> 
> 赞同：4
> 
> 时间：2013-04-24T11:39:14.370
> 
> 标签：php, button

我使用以下代码成功地从我的数据库中读取和显示数据：http: [//pastebin.com/rjZfBWZX](http://pastebin.com/rjZfBWZX) 我还为表的每一行生成了一个删除按钮：）单击删除按钮调用“obrisi.php”应该删除该行，但我搞砸了：S 这是 obrisi.php 代码：

[http://pastebin.com/mrFy1i7S](http://pastebin.com/mrFy1i7S)

我收到 Parse 错误：语法错误，意外的“FROM”（T_STRING）：S

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T11:47:18.863

让我们尝试使用 _GET 而不是 _POST 来完成。

在您的主代码中，您需要将第 39 行（输入）从：

```
 echo  "<td>" . " <input type='submit' id= '$id' . ' value='Delete' >" .  "</td>"; 
```

到：

```
 echo  "<td><a href='obrisi.php?id=$id'>Delete</a></td>"; 
```

在您的 obrisi.php 更改第 3 行（id 设置）：

```
 $id = $_POST['id']; 
```

到：

```
 $id = $_GET['id']; 
```

最后，作为一个很好的补充，通过在关闭 php 标记之前在 obrisi.php 文件末尾添加以下行来重定向回主页。

```
 header('location:index.php'); 
```

其中 index.php 是您拥有的主页的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:50:57.143

```
echo  "<td>" . " <input type='submit' id= '$id' . ' value='Delete' >" .  "</td>"; 
```

这里有一些简单的错误。这将输出（$id = 1）：

```
<td><input type='submit' id= '1' . ' value='Delete' ></td> 
```

该行应更正为

```
 echo  '<td><input type="submit" id="' . $id . '" value="Delete" ></td>'; 
```

这也是错误的。

```
echo "<form action="obrisi.php" method="post">"; 
```

应该是这样的：

```
echo '<form action="obrisi.php" method="post">'; 
```

但主要问题是帖子中没有给出字段ID。html 元素的 id 不会在提交时发送。它基本上是在 HTML 结构中识别该元素。

当使用提交按钮时，您必须将表单的范围限制在该行并使用隐藏的输入字段，或者使用thanpa建议的链接

澄清：如果你想用一个帖子来做（但我建议使用 $_GET）

```
while ($row = mysqli_fetch_array($result) )
{

$id = $row['id'];

echo "<tr>";
echo '<form action="obrisi.php" method="post">';
echo "<td>" . $row['Ime'] . "</td>";
echo "<td>" . $row['Prezime'] . "</td>";
echo "<td>" . $row['Grad'] . "</td>";
echo "<td>" . $row['Drzava'] . "</td>";
echo "<td>" . $row['Obavijesti'] . "</td>";
echo "<td>" . $row['Tekst'] . "</td>";
echo "<td>"
echo  '<td><input type="hidden" name="id" value="' . $id . '"/><input type="submit" value="Delete" ></td>';
echo "</form>
echo "</tr>";
} 
```

并从脚本的开头和结尾删除表单的回声。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:59:38.907

作为此处的附加说明，如果这将在某个时候在实时系统中使用，您需要在 obrisi.php 中检查 $id 它实际上是一个 ID，而不是像更多 sql 那样令人讨厌和意外的东西，查找sql注入。

# r - R code for Retrieving the List of Names from Ensembl database

> ID：16191030
> 
> 赞同：1
> 
> 时间：2013-04-24T11:39:17.137
> 
> 标签：r, bioinformatics

This is the program written to convert the Entrez IDs into Gene Name using R. But the problem i am encountering is

```
Error in .checkKeysAreWellFormed(keys) : 
keys must be supplied in a character vector with no NAs 
```

The program:

```
 a <- read.csv("C:\\list.csv", header = FALSE)
 a2 <- a[!is.na(a)]
for(i in 1:length(a))
{
    if(is.na(a[i])==TRUE)
    {
    next;
    } else {
       a2<-c(a2,a[i]);
       a3 <-lookUp(a2, 'org.Hs.eg', 'SYMBOL') 
    }
} 
```

And the list looks like this: (list.csv)

```
5921,9315,10175,58155,1112,1974,2033,2309,3015,3192,5217,5411,5527,6660,8125,9743,10439,11174,23077,23097,26520,56929,84146,109,1073,1783,1809,1839,3169,3187,3768,4857,5066,5496,5594,5683,5885,6328,7490 
```

Where is the problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:23:26.030

`lookUp`来自[Bioconductor](http://bioconductor.org)包[注释](http://bioconductor.org/packages/release/bioc/html/annotate.html)。我们可以生成上面的错误

```
> library(annotate)
> lookUp(list("123"), 'org.Hs.eg', 'SYMBOL')
Error in .checkKeysAreWellFormed(keys) : 
  keys must be supplied in a character vector with no NAs 
```

并通过提供字符向量而不是列表来纠正它

```
> lookUp("123", 'org.Hs.eg', 'SYMBOL')
$`123`
[1] "PLIN2" 
```

如果您的文件“list.csv”确实包含您指出的单行，那么我可能

```
eid = strsplit(readLines("C:\\list.csv"), ",")[[1]] 
```

获得 Entrez id 的字符向量`class(eid)`将是“字符”。清理它并进行查找

```
lookUp(eid[!is.na(eid)], "org.Hs.eg", "SYMBOL") 
```

但更“现代”的方法是

```
select(org.Hs.eg.db, eid, "SYMBOL") 
```

这将处理 NA 和无效的密钥，而不是大惊小怪

```
> select(org.Hs.eg.db, c(NA, "123", "xyz"), "SYMBOL")
  ENTREZID SYMBOL
1      123  PLIN2
2      xyz   <NA>
Warning message:
In .select(x, keys, cols, keytype, jointype = jointype) :
  'NA' keys have been removed 
```

# php - 如何将 login.php 重定向到 X-cart 中的其他 url

> ID：16191034
> 
> 赞同：0
> 
> 时间：2013-04-24T11:39:21.547
> 
> 标签：php, x-cart

请检查以下两个 URL 并帮助我：-

[http://www.xyz.com/login.php](http://www.xyz.com/login.php)重定向[http://www.xyz.com/Phase-2](http://www.xyz.com/Phase-2)

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:41:13.583

有几种方法可以做到这一点。这里有一些例子。

**.htaccess 解决方案**

```
 Redirect 301 /login.php   http://www.xyz.com/Phase-2 
```

**php解决方案**

```
// login.php

<?php
header("HTTP/1.1 301 Moved Permanently");
header("Location:  http://www.xyz.com/Phase-2 ");
exit();
?> 
```

**HTML 解决方案（不是 301 重定向）**

```
<html>
<head>
   <meta http-equiv="refresh" content="0; url= http://www.xyz.com/Phase-2 ">
</head>
<body>
</body>
</html> 
```

# javascript - jQuery animation order before/after load

> ID：16191038
> 
> 赞同：0
> 
> 时间：2013-04-24T11:39:24.227
> 
> 标签：javascript, jquery

I am trying to slide my main container `#main` up before loading the new content inside and then slide down again when the load is complete. This seems to work on the first click but on subsequent clicks the content loads instantly before the `slideUp` and `slideDown` animations begin.

```
$("#access a").address(function() {  
    $("div#main").slideUp(1111).delay(1200).load($(this).attr('href') + ' #menudropdown, #contentbody', function(){  
        $("div#main").slideDown(1111);          
    });

    var current = location.protocol + '//' + location.hostname + location.pathname;
    if (base + '/' != current) {
        var diff = current.replace(base, '');
        location = base + '/#' + diff;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:45:48.803

你有没有尝试过：

```
$("#access a").address(function() {
    var mainDiv = $("div#main");
    var loadLink = $(this).attr('href');
    mainDiv.slideUp(1111,function(){
        mainDiv.load( loadLink + ' #menudropdown, #contentbody', function(){  
            mainDiv.slideDown(1111);
        });       
    });
    // your other code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:50:02.813

您是否尝试过 slideUp 上的 ready 事件？

```
 $("div#main").slideUp(1111, function () {
   $(this).load($("#access a").attr('href') + ' #menudropdown, #contentbody', function(){  
    $("div#main").slideDown(1111);
   });
 }); 
```

我还建议在加载之前使用完整的 ajax 函数隐藏内容：

```
$.ajax({
      url: $("#access a").attr('href'),
      success: function (data) {
         $("div#main").slideUp(function () {
            $(this).hide().empty().append(data.find('#menudropdown, #contentbody')).slideDown();
         });
       }
    }); 
```

# javascript - Facebook comments box position

> ID：16191039
> 
> 赞同：0
> 
> 时间：2013-04-24T11:39:27.000
> 
> 标签：javascript, css, facebook, facebook-comments

Please help,

I have recently added the facebook comments box to my site (arabic site), but the problem is that the position of the box is moving to the left ... this is an example of my site [http://www.alamelnokta.com/nokate/show/100](http://www.alamelnokta.com/nokate/show/100)

Any idea please to fix the position of the box.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:44:53.943

将以下内容添加到您的 CSS 中：

```
.fb_iframe_widget iframe {
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T12:34:18.630

您需要添加`left:0`：

```
.fb_iframe_widget iframe{
   position:absolute;
   left:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:42:34.453

尝试将此元素的位置更改为成为`absolute`而不是`<style="position:relative">`。

# jenkins - Jenkins ext-email 插件无法在构建成功时发送电子邮件

> ID：16191040
> 
> 赞同：22
> 
> 时间：2013-04-24T11:39:31.090
> 
> 标签：jenkins, jenkins-plugins

我的机器上安装了 Jenkins 版本 1.480.3 和电子邮件扩展插件 2.28。

我已经在 J​​enkins 上配置了我的工作，除了最终的构建成功电子邮件之外，一切正常。

我为电子邮件扩展插件配置了四个触发器：

1.  失败
2.  成功
3.  不稳定
4.  构建之前

对于所有触发器，我都启用了“附加日志”，除了“成功”之外一切正常。

我在屏幕上收到以下消息：

> 电子邮件被触发：成功
> 发送电子邮件触发：成功
> 请求压缩构建日志
> 发送电子邮件至：abc@example.com def@example.com
> 错误发送至以下有效地址：abc@example.com def@example.com
> 通知上游项目作业完成
> 捕获构建上下文信息。
> 完成：成功

请有人帮助我，因为我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-08-20T14:16:38.290

我也有这个问题。最后是因为我**附加的构建日志太大了**！SMTP 服务器拒绝发送导致错误消息的电子邮件：

```
Error sending to the following VALID addresses: ... 
```

禁用附加构建日志的选项或修复我的构建输出以不转储这么多文本解决了问题：

[![在此处输入图像描述](https://i.stack.imgur.com/EGiEb.png)](https://i.stack.imgur.com/EGiEb.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-18T16:50:01.770

看起来像插件中的一个错误。这是一个解决方法：

在插件的全局设置中确保为*System Admin E-mail Address*提供完整的电子邮件地址（例如*foo@bar.com*，而不仅仅是*foo*），**即使**您已经指定了*默认用户电子邮件后缀*。不过，地址本身可能是伪造的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-09T13:14:28.730

对于电子邮件，您必须安装以下插件。

*   电子邮件分机插件
*   电子邮件分机模板插件

要提供配置，请转到 Jenkins 系统配置页面（Jenkins > 管理 Jenkins > 配置系统 > “电子邮件通知”部分）。您将能够看到以下屏幕以添加电子邮件配置：

```
 SMTP server name : smtp.gmail.com
   User name : user_email_id@gmail.com
   Password : user_email password
   Use SSL : Checked
   SMTP Port : 465 
```

现在，配置“扩展电子邮件通知”部分。您将能够看到以下屏幕。填写与上述参数相同的值。

现在，单击右下角的默认触发器并选择成功。应用并保存您的配置。

现在转到您的工作并单击添加构建后操作下拉菜单，选择电子邮件通知选项。

在“电子邮件通知”框中输入收件人电子邮件 ID，然后选中“为每个不稳定的构建发送电子邮件”选项旁边的复选框。

单击“添加构建后操作”下拉菜单并选择“可编辑电子邮件通知”选项。

在 Project Recipient List 中，这是应接收电子邮件的电子邮件地址的逗号分隔列表（逗号后的可选空格）。可能包含对构建参数的引用。抄送或密送某人而不是将其放在收件人列表中，在电子邮件地址前添加 cc: 或 bcc:（例如，cc:someone@example.com、bcc:bob@example.com）。

在附件字段中，您必须提供二进制文件的路径（即 .ipa 文件的路径，例如 build/artifacts/IPA-Name.ipa）

现在点击右下角的高级设置。单击添加触发器并选择成功触发器。单击成功触发器中的添加下拉菜单，然后选择收件人列表选项。应用并保存您的配置。

n mac-mini 用于 iOS 作业配置，如果未发送电子邮件并给您 java 异常错误消息，那么您必须打开不太安全的应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-06T13:39:47.980

我也有这个问题，是因为我忘记设置 SMTP 服务器（在配置的插件部分），但只看到了默认的 SMTP 服务器设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-01T20:19:35.970

我的第一个猜测是全局 jenkins 电子邮件配置设置不正确。

管理 Jenkins -> 配置系统 -> 电子邮件通知

这是默认插件，不是您手动安装的扩展插件。**SMTP 服务器**字段默认为 localhost，因此除非您设置了电子邮件服务器并在同一个机器上运行，否则需要进行设置。

如果已设置，那么我会尝试从您的 Jenkins 服务器远程登录到您的电子邮件服务器，以确保没有连接错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-17T07:10:48.530

经过几天的寻找答案，原来 gmail 的附件限制为 25 mb，而我的输出比这大。

如果您遇到此问题并且您正在使用 gmail 作为邮件服务器，请检查您的输出大小。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-01T16:57:49.387

如果不起作用，请参考上述所有解决方案。你可以试试这个解决方案。Zip 文件在 Gmail 中被阻止。在发送之前，您应该在脚本中重命名您的 zip 文件。（例如：file.zip.abcxyz）。我解决了我的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-07T07:17:27.430

如果一切都失败了，请尝试重新启动 jenkins 进程。这为我解决了。不知何故，Jenkins 系统无法在不重新启动的情况下加载所有配置？但是试一试。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-07T19:48:58.377

我有同样的问题。事实证明，出于某种原因，Jenkins 不会保存我的“扩展电子邮件通知”SMTP 设置。在某一时刻，它确实保存了设置并且电子邮件开始工作。确保选中红色位并在按保存后仔细检查： [![在此处输入图像描述](https://i.stack.imgur.com/8oIHI.png)](https://i.stack.imgur.com/8oIHI.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-12T22:42:35.957

今天我在詹金斯机器上遇到了这个问题，该机器直到几周前还可以发送电子邮件。我今天打开它，它只是不会发送电子邮件，因为“发送到以下有效地址时出错”

我尝试了这些步骤：

1.  确保我没有在电子邮件中附加任何日志文件。
2.  确保“系统管理员”电子邮件具有提到的域名。
3.  当我通过“通过发送测试电子邮件测试配置”进行尝试时，詹金斯能够成功地向我发送电子邮件
4.  降级了我的电子邮件分机插件。

上述步骤都没有帮助。

最后我用 jenkins 默认服务器替换了我公司的 SMTP 服务器，它工作得很好。不知道为什么会这样，我需要和我的 IT 人员谈谈，看看他们是否在 SMTP 服务器中启用了任何新的安全性。

希望这对遇到同样问题的人有所帮助。

谢谢

# web-services - 在moodle中没有令牌的Web服务

> ID：16191042
> 
> 赞同：0
> 
> 时间：2013-04-24T11:39:32.877
> 
> 标签：web-services, moodle

我是网络服务的初学者。我正在 Moodle 中编写网络服务。

我想为用户注册编写一项服务。在这种情况下，该用户将没有任何令牌或用户名+密码。

我们如何允许该用户调用`core_user_createUsers`Web 服务进行注册？

对于其他服务，我正在使用此代码：

```
$domainname = 'http://mydomain/moodle';

require_once('./curl.php');
$curl = new curl;

$authurl = $domainname .'/login/token.php?username=admin&password=Admin123$&service=shcs_services';
$resp = $curl->get($authurl);

if($resp)
{
    $resp = json_decode($resp);
    $authToken = $resp->token;
}

/// PARAMETERS
$serverurl = $domainname . '/webservice/rest/server.php';

$params['wstoken'] = $authToken;
$params['wsfunction'] = 'core_user_createUsers';
$params['moodlewsrestformat'] = 'json';

$user1 = new stdClass();
$user1->username = 'testusername';
$user1->password = 'Testpassword1%';
$user1->firstname = 'testfirstname1';
$user1->lastname = 'testlastname1';
$user1->email = 'testemail1@moodle.com';
$user1->auth = 'manual';
$user1->idnumber = 'testidnumber1';
$user1->lang = 'en';
$user1->theme = 'standard';
$user1->timezone = '-12.5';
$user1->mailformat = 0;
$user1->description = 'Hello World!';
$user1->city = 'testcity1';
$user1->country = 'au';
$preferencename1 = 'preference1';
$preferencename2 = 'preference2';
$user1->preferences = array(
    array('type' => $preferencename1, 'value' => 'preferencevalue1'),
    array('type' => $preferencename2, 'value' => 'preferencevalue2'));
$users = array($user1);
$params['users'] = $users;

$resp = $curl->post($serverurl, $params);
echo $resp; 
```

在上面的代码中，我想跳过下面的部分

```
$authurl = $domainname .'/login/token.php?username=admin&password=Admin123$&service=shcs_services';
$resp = $curl->get($authurl);

if($resp)
{
    $resp = json_decode($resp);
    $authToken = $resp->token;
} 
```

这样我就不想将值传递`$params['wstoken'] = $authToken;`给 web service 。

但它不允许我没有令牌。这是我得到的错误：

```
{"exception":"moodle_exception","errorcode":"invalidtoken","message":"Invalid token - token not found"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T06:01:45.217

令牌是将 Web 服务连接到您的应用程序的唯一方法。这是必须的。因为我现在在网络服务和移动应用程序上工作。所以我体验到令牌是验证 Web 服务的唯一方法。通过验证与 Web 服务连接的第一步。而且您根本没有传递令牌。因此，您的验证将失败。你得到这个错误。

# jquery - 使用 jquery 插件验证儿童单选按钮

> ID：16191043
> 
> 赞同：0
> 
> 时间：2013-04-24T11:39:37.500
> 
> 标签：jquery, html, radio-button

我有 2 个单选按钮。一个单选按钮有 3 个子级单选按钮。前任：

```
 <input type="radio"  name="catagory" />
                  <label class="" for="">A</label>
  <input type="radio" class="btn-redio" name="catagory" />
                  <label class="" for="">B</label> 
```

一旦我检查了单选按钮 B，我将获得 3sub 级别的单选按钮。我想验证如果用户单击 B 则需要检查是否选中了任何子单选按钮。

子级别的意思是：如果点击按钮B，那么JS只会显示另外3个单选按钮

谢谢

AZ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:50:22.970

如果我理解正确，这是您的情况：

```
<input type="radio" name="parent_radio1" value="..." />
<input type="radio" name="sub_radio1_1" value="..." />
<input type="radio" name="sub_radio1_2" value="..." />
<input type="radio" name="sub_radio1_3" value="..." />

<input type="radio" name="parent_radio2" value="..." />
<input type="radio" name="sub_radio2_1" value="..." />
<input type="radio" name="sub_radio2_2" value="..." />
<input type="radio" name="sub_radio2_3" value="..." /> 
```

如果是这种情况，您可以使用这样的东西（未经测试）：

```
var form = $('#someForm');
form.submit(function(event){
  var parent_radios = $('input[type=radio][name^="parent_radio"]');
  parent_radios.each(function(){
    var parent = $(this);

    if (parent.prop('checked') !== true) return; // Parent not selected, no validation needed

    var child_selector = parent.attr('name').replace('parent_radio', '');
    var childs = $('input[name^="sub_radio' + child_selector + '_"]:checked'); // Select only the selected ones

    if (childs.length == 0) {
      event.preventDefault(); // No sub radio has been selected for this parent, cancel submit
      // Do some other stuff here like show error message
    }
  });

}); 
```

# wpf - How to properly handle focus

> ID：16191046
> 
> 赞同：0
> 
> 时间：2013-04-24T11:39:51.127
> 
> 标签：wpf, mvvm, wpf-controls, wpf-4.0

Lets say I have next layout:

```
Window
  UserControl
    UserControl
      UserControl
        Button
        GridControl
          GridCell 
```

And lets say that GridCell currently has Keyboard focus. If a user clicks on button. a message is displayed to user to confirm action. No matter of what choice the user selected (Yes or No), a focus should return to a CurrentCell on GridControl. By default, after a user selected some option, a focus would return to Window (reported by Snoop). I would assume that a Button that was clicked would retain focus, but apparently not.

Handling of button Command is done in ViewModel (MVVM).

How do I return keyboard focus to a current cell in grid?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:08:01.203

您可以通过`FocusManager.IsFocusScope="true"`在按钮上设置或者如果有多个按钮是它们所在的父元素（例如`StackPanel`或其他）来非常安全地解决此问题。

如果您使用`RoutedCommands`. 基本上`RoutedCommands`并不总是按照您期望它们在焦点范围内的方式工作。听起来您正在直接绑定到视图模型上的命令，但这应该不是问题。如果您想了解有关该`RoutedCommand`问题的更多信息，请查看[此代码项目文章](http://www.codeproject.com/Articles/38507/Using-the-WPF-FocusScope)。

这是我验证此工作的示例代码，供您参考。

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <!--You could also have the FocusManager.IsFocusScope set on the Border instead-->
        <Border Margin="0,0,0,15">
            <Button FocusManager.IsFocusScope="True" Click="ButtonBase_OnClick">Click me!</Button>
        </Border>

        <TextBox Grid.Row="1" x:Name="MessageTextBox"></TextBox>
    </Grid>
</Window> 
```

C＃：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    void ButtonBase_OnClick(object sender, RoutedEventArgs e)
    {
        MessageBox.Show("Clicked, message: " + MessageTextBox.Text);
    }
} 
```

# quickblox - QuickBlox 多视频聊天

> ID：16191056
> 
> 赞同：1
> 
> 时间：2013-04-24T11:40:25.060
> 
> 标签：quickblox

我们已经在 iOS 中将单个视频会议与 quickblox 集成，并且运行良好。现在我们需要在 iOS 中实现多个视频会议设施。为此，我尝试创建两个 [[QBChat instance] callUser:user.ID ConferenceType:QBVideoChatConferenceTypeAudioAndVideo 实例];

并在

`- (UIImageView *) viewToRenderOpponentVideoStream`基于实例的数据源方法。我尝试使用3个设备在用户之间建立多个通信。但是服务器只允许2个设备相互通信。有什么办法可以让第三个设备与其他设备建立通信2个设备？

# html - 过滤带有角度子类别的下拉列表

> ID：16191060
> 
> 赞同：0
> 
> 时间：2013-04-24T11:40:51.707
> 
> 标签：html, drop-down-menu, angularjs

我有两个使用来自服务器的数据填充的下拉列表。第一个下拉列表包含一个类别，第二个下拉列表包含所有子类别。像这样：

```
<select ng-model="category1">
    <option value="1">Item 1</option>
    <option value="2">Item 2</option>
    <option value="3">Item 3</option>
</select>

<select ng-model="category1">
    <option value="4">Subitem 1</option>
    <option value="5">Subitem 2</option>
</select> 
```

子类别通过属性“parentID”链接到主类别，因此在上面的示例中，子项 1 的 parentID = 2，这意味着子项 1 具有项 2 的主类别。

我希望用户能够选择主类别或子类别。

*   选择一个主要类别应过滤第二个下拉列表，以仅显示链接到该类别的子类别（即具有该 parentID 的子类别）

*   Subcategories can only be selected if a main category has been selected

我的问题是，如何实现角度过滤？我想我应该以某种方式使用 ng-options 和 angulars 过滤器，但我不确定如何。

现在，第二个下拉列表包含所有子类别，无论第一个下拉列表中的选定值如何。我知道我必须在过滤器中使用我的 parentID 来确定哪些子类别应该是可见的，但是我应该把它放在哪里呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T16:18:20.447

我对 AngularJS 还是有点陌生​​，所以这可能不是最好或最优雅的解决方案，但对我有用：

好的，我通过以下方式解决了这个问题：

1）通过 ng-repeat 命令填充两个选择框：

```
<select ng-model="categoryId" ng-change="updateSubcategorySelect()">
  <option ng-repeat="category in categoryList" value="{{category.Id}}">
    {{category.Name}}
  </option>
</select>
<select ng-model="subcategoryId">
  <option ng-repeat="subcategory in subcategoryList" value="{{subcategory.Id}}">
    {{subcategory.Name}}
  </option>
</select> 
```

其中函数 updateSubcategorySelect 在 AngularJS 控制器中定义，如下所示：

```
$scope.updateSubcategorySelect= function () {
    $scope.subcategoryList= Subcategory.query({
        categoryId: $scope.categoryId
    });
} 
```

（当然，这假设您使用 API 填充列表，其中定义了工厂 Subcategory 并具有将 categoryId 作为参数的 get 方法，但您可以以任何其他方式填充/过滤列表！）

因此，想法是在 categoryList 更改时调用一个函数来重新评估 subcategoryList 后面的数据。

如果未选择类别，我还没有禁用 subCategory 列表，但它应该是这样的（在第二个选择框的定义中）：

```
 <select ng-model="subcategoryId" ng-disabled="countryId === 0 || countryId === undefined"> 
```

但是，ng-disabled 似乎不适用于选择框，因此您可能需要这样的东西： [ng:disabled does not work with select html element](https://stackoverflow.com/questions/14288436/ngdisabled-does-not-work-with-select-html-element)

希望这可以帮助。

# asp.net - 如何将 Web 服务的 url 从 localhost 更改为 www（万维网）

> ID：16191066
> 
> 赞同：0
> 
> 时间：2013-04-24T11:41:02.753
> 
> 标签：asp.net, visual-studio-2010, web-services

我有一个非常简单的问题，但解决方案非常广泛和复杂.. 我有一个 asp.net Web 服务。当我运行它时，网址是这样的：

http://:56197/Salesforce/SforceService.asmx?wsdl

我想把它改成这样：

[http://www.site.com/Salesforce/SforceService.asmx?wsdl](http://www.site.com/Salesforce/SforceService.asmx?wsdl)

什么意思只是想在全球范围内制作Web服务并在跨平台（salesforce）中远程使用Web服务，该URL不包含和IP名称的PC名称

我尝试过以下建议：

*   创建一个 wsdl 文件并以 wsdl 格式导出...但它还包括这种格式的端点地址 /Salesforce/SforceService.asmx"/>

再次本地计算机问题，如何修改soap url以全局访问

*   使用 wsdl 工具创建代理类 --> 它生成 .cs 类，如果这是正确的方法，那么如何在客户端销售人员上使用它

我关注了这些链接： [http](http://www.justskins.com/forums/dynamically-change-url-in-61352.html) ://www.justskins.com/forums/dynamically-change-url-in-61352.html （相当于在c#中完成）

```
Dim rswb as new Testing.Service1()
rswb.URL = "http://Testing/Group/Service1.asmx" 
```

但是在 service.cs 类上它不显示 url proeprty

我有点困惑和卡住请给我任何相关链接..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T02:36:36.143

您是否进行了网络参考或服务参考？我在想你添加了一个服务参考。您可能希望将其更改为网络参考

当您添加参考时，会有一个高级按钮。确保选择添加 Web 参考。

我一直这样做，在我的本地开发机器上添加一个测试 Web 服务，并在代码中将其切换到生产服务。

Dim myWS As New myWS.Update '//创建 webservice 对象的新实例 Dim tmpURL as string = "ipaddress/此处实际主机的域名" myWS.Url = "http://" & tmpURL & ".asmx"

# html - 初学者div定位教程

> ID：16191068
> 
> 赞同：1
> 
> 时间：2013-04-24T11:41:10.000
> 
> 标签：html

我是程序员，不是设计师，我不喜欢编写 html 和 css 代码。我很长一段时间都在使用表格进行布局。现在，我想打破这种不良做法并开始在我的网站中使用 div。这对我来说是一个非常重要的决定。因为我真的很*讨厌*使用 div。

和往常一样，我开始阅读书面代码以了解 div 的定位是如何工作的，这是我学习新东西的最佳方式。然而，我真的无法理解。我觉得有些不对劲。我真的认为这不应该那么难。这个 div “ *API* ” 写错了，应该更简单。但是，我知道这种讨论是无意义的。

我现在对以下项目的用法感到困惑，

```
float, clear, inline, block, position, relative, absolute 
```

我正在为像我这样有编程背景的初学者寻找网站、stackoverflow 帖子、学习 div 的教程。

PS：我检查了 w3 的 CSS 标准。但是，它太长而且太详细了。出于实用目的，我想要一些更短、更容易理解的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:46:34.333

当我自学 HTML 时，我花了很多时间在 W3Schools 网站上。我根本找不到更好的地方来学习 HTML 和 CSS。这是一个示例代码，演示了 float 的工作原理：

```
<!DOCTYPE html>
<html>
<head>
<style>
img 
{
float:right;
}
</style>
</head>

<body>
<p>In the paragraph below, we have added an image with style <b>float:right</b>. The result is that the image will float to the right in the paragraph.</p>
<p>
<img src="http://vsual.co/wp-content/uploads/2011/09/HumanRightsLogo_CO.jpg" width="95" height="84" />
This is some text. This is some text. This is some text.

</p>
</body>

</html> 
```

如果您仍然不确定，请随意访问[W3Schools 链接 1](http://www.w3schools.com/cssref/pr_class_float.asp)和[W3Schools 编辑器](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_float)

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T00:07:28.370

我建议查看 [http://net.tutsplus.com](http://net.tutsplus.com)和相关 webdesign.tutsplus 网站上的文章。

在他们的网络上也有一个非常好的 CSS 入门课程，但它不是免费的。

反正一点都不难。

您有几种类型的元素：您将最常使用的块、内联和在线块。其他将被使用以及默认值。

Div 是块元素，因此它们通常会占用其父元素的 while 重量和所需的高度。为了形成复杂的布局和列，有时我们使用浮动，它通过将 div 放置在页面流之外来改变这一点，以便其他元素堆叠在它旁边。

这是一个非常粗略且可能不够准确的描述，但应该作为一个起点。

也一定要检查一下： http: [//learnlayout.com](http://learnlayout.com) 这是一个通过示例对 CSS 布局的精彩解释。

我希望这会帮助你找到你的方式。

# .net - 使用 Wix 编辑 Web.Config 连接字符串设置

> ID：16191073
> 
> 赞同：8
> 
> 时间：2013-04-24T11:41:16.507
> 
> 标签：.net, entity-framework, wix, wix3.5

我目前正在尝试修改我的 Wix(V3.5) 安装程序以编辑我要安装的 .NET 应用程序的 Web.config 设置。这对于普通的 ASP.NET 应用程序来说很好，但现在我试图将我的 Wix 设置项目应用到实体框架 .NET 应用程序，您可能知道该应用程序具有更复杂的连接字符串设置和模型 .csdl 和 .ssdl 设置。

因此，如果我的 web.config 连接字符串设置看起来像这样：（其中 [DBSERVER] 和 [DBNAME] 是从对话框中检索的属性）

```
 <connectionStrings>
   <add name="SSITacticalSolutionEntities" connectionString="metadata=res://*/Model.TacticalSolutionModel.csdl|res://*/Model.TacticalSolutionModel.ssdl|res://*/Model.TacticalSolutionModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=sd-sql2008r2;Initial Catalog=SsiTacticalSolution1.2.4;Integrated Security=True;MultipleActiveResultSets=True&quot; />
  </connectionStrings> 
```

我在我的 Product.Wsx 文件中编辑我的 Web.config ，如下所示：

```
 <util:XmlFile Id="ModifyConnectionString" Action="setValue" Permanent="yes" File="[INSTALLLOCATION]Web.config"
                  ElementPath="/configuration/connectionStrings/add[\[]@name='!(loc.EntityName)'[\]]" Name="connectionString"
                  Value="Data Source=[DBSERVER];Initial Catalog=[DBNAME];Integrated Security=true;providerName=System.Data.EntityClient;MultipleActiveResultSets=True&quot;"   Sequence="5"/> 
```

我得到一个这样的连接字符串：

```
 <connectionStrings>
      <add name="SSITacticalSolutionEntities" connectionString="Data Source=sd-sql2008r2;Initial Catalog=SsiTacticalSolution1.2.4;Integrated Security=true;providerName=System.Data.EntityClient;MultipleActiveResultSets=True&quot;"/>
  </connectionStrings> 
```

这当然是有道理的，因为我要求它用我在值中定义的内容替换当前的连接字符串属性。

但我在这里真正需要的是编辑我的连接字符串的特定部分并保留其余部分（我可以在这里使用某种替换操作），即保留我所有的模型设置并替换数据库服务器和名称等我需要。我以前用 Visual Studio 安装程序来做这件事没问题，而且它很容易使用。

所以我的问题是这可以使用 util.XMLFile 或者 util:XmlConfig 来完成吗？我都试过了，没有任何运气。

或者这不可能用 util.XMLFile 做，我必须在 CustomAction 中做这个吗？任何想法都会有很大帮助，在此先感谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-17T14:48:26.843

我最终得到了这个工作，最后我没有为这个特定设置使用自定义操作，我使用我的本地化文件中设置的变量。

我这样做是因为它将是开发人员而不是知道模型名称和实体名称的用户（不是通过安装对话框的用户，他们不会知道此信息），所以我有一个具有不同属性的本地化文件它像产品名称等，所以我添加了一个模型名称和实体名称。我从对话框中得到的所有其他内容，由用户输入：即数据库名称、虚拟目录、模拟用户等...

如果它对任何人有帮助，这就是我最终为我的 web.config 提出的内容；这是我的 product.wxs 中处理此问题的部分。如您所见，我在顶部有一个连接字符串属性，其中 loc.ModelName 的占位符在我的本地化文件中设置：

```
 <Property Id="CONNECTION_STRING"
  Value="metadata=res://*/Model.!(loc.ModelName).csdl|res://*/Model.!(loc.ModelName).ssdl|res://*/Model.!(loc.ModelName).msl;provider=System.Data.SqlClient;provider connection string=&quot;"/>

<!-- The root of the installer. -->
<Directory Id='TARGETDIR' Name='SourceDir'>

  <!-- Install into the inetpub/wwwroot directory -->
  <Directory Id="IISMain" Name='inetpub'>
    <Directory Id="WWWMain" Name='wwwroot' ComponentGuidGenerationSeed='C38ED13E-E1E3-40DB-B1FA-39400C6B2BC4'>

      <Directory Id='INSTALLLOCATION' Name="!(loc.ProductName)">

        <!-- The component to define the Virtual Directory.-->
        <Component Id="WebVirtualDirComponent"
                   Guid="D814F88F-6E0C-4365-A411-2F9807522C3D">

          <!-- WebVirtualDir: The virtual directory we are installing. -->
          <!-- Alias:         Alias attribute is the name that we will see in IIS.-->
          <!-- Directory:     The Directory attribute is the "Physical Path" property in
                            IIS and needs to tie to the ID specified above as the install location. -->
          <!-- WebSite:       The WebSite attribute ties to a <WebSite> element in the 
                            setup file(see below). As this is an example of installing into the 
                            "Default Web Site" so that element is not under a component.-->
          <iis:WebVirtualDir Id="VDir" Alias="[VIRTUALDIRECTORYVALUE]"
                             Directory="INSTALLLOCATION"
                              WebSite="DefaultWebSite">

            <!-- This turns the Virtual Directory into a web application. -->
            <iis:WebApplication Id="MyWebAppApplication"
                               Name="[VIRTUALDIRECTORYVALUE]" WebAppPool="AppPool"/>

            <iis:WebDirProperties Id="WebSite_Properties" AnonymousAccess="no"
                                  WindowsAuthentication="yes" DefaultDocuments="!(loc.DefaultDocument)"
                                  Script="yes" Read="yes" />

          </iis:WebVirtualDir>
          <CreateFolder/>
          <RemoveFolder Id= "GuidFolders" On= "uninstall"/>
      </Component>

        <!-- Components - this decides what we want to incude in our install
        Here we will alter our web.config for Impersonation , debug to false and connection string. -->
        <Component Id="Web.config" Guid="2ED81B77-F153-4003-9006-4770D789D4B6">

          <!--install our web.config file , this isnt part of our initial MSBUILD-->
         <File Id="Web.config" Name="Web.config" Source="$(var.SolutionDir)!(loc.WebApplicationProjectName)\Web.config" DiskId="1" KeyPath="yes" />

          <!--Modify our web.config - here we need to add Identity impersonation , changes session settings , add connection string settings and set debug setting-->
          <!--Ensure that the identity setting exists--> 
          <util:XmlFile Id="system.webidentity" 
                        File="[INSTALLLOCATION]Web.config" 
                        Action="createElement" 
                        ElementPath="/configuration/system.web" 
                        Name="identity" 
                        SelectionLanguage="XPath"
                        Sequence="1" />

          <util:XmlFile Id="system.webIdentityAttribute" 
                        Action="setValue" 
                        File="[INSTALLLOCATION]Web.config" 
                        ElementPath="/configuration/system.web/identity" 
                        Name="impersonate" 
                        Value="true" 
                        SelectionLanguage="XPath"
                        Sequence="2" />

          <util:XmlFile Id="system.webIdentityAttribute2" 
                        Action="setValue" 
                        File="[INSTALLLOCATION]Web.config" 
                        ElementPath="/configuration/system.web/identity" 
                        Name="password" 
                        Value="[IMPERSONATIONUSERPASSWORD]" 
                        SelectionLanguage="XPath"
                        Sequence="3" />

          <util:XmlFile Id="system.webIdentityAttribute3" 
                        Action="setValue" 
                        File="[INSTALLLOCATION]Web.config" 
                        ElementPath="/configuration/system.web/identity" 
                        Name="userName" 
                        Value="[IMPERSONATIONUSER]"
                        SelectionLanguage="XPath"
                        Sequence="4" />

          <util:XmlFile Id="ModifyConnectionString" 
                        Action="setValue" 
                        Permanent="yes" 
                        File="[INSTALLLOCATION]Web.config"
                        ElementPath="/configuration/connectionStrings/add[\[]@name='!(loc.EntityName)'[\]]" 
                        Name="connectionString"
                        Value="[CONNECTION_STRING]Data Source=[DBSERVER];Initial Catalog=[DBNAME];Integrated Security=True;MultipleActiveResultSets=True&quot;" 
                        SelectionLanguage="XPath"
                        Sequence="5"/>

          <!--<authentication mode="Forms">-->
          <util:XmlFile Id="AuthenticationModeWindows" 
                        Action="setValue" 
                        File="[INSTALLLOCATION]Web.config"
                        ElementPath="/configuration/system.web/authentication" 
                        Name="mode" 
                        Value="Windows" 
                        Sequence="6" />

          <!--Switch off debug-->
          <util:XmlConfig Sequence="7" 
                          Id="SwitchOffDebug" 
                          File="[INSTALLLOCATION]\web.config" 
                          Action="create" On="install" 
                          Node="value" 
                          ElementPath="/configuration/system.web/compilation" 
                          Name="debug" 
                          Value="false" />

           <!--Session configuration  <sessionState mode="InProc" timeout="15" />-->
          <util:XmlFile Id="system.websessionState" 
                        File="[INSTALLLOCATION]Web.config" 
                        Action="createElement" 
                        ElementPath="/configuration/system.web" 
                        Name="sessionState" 
                        Sequence="8" />

          <util:XmlFile Id="system.websessionStateAttribute" 
                        Action="setValue" 
                        File="[INSTALLLOCATION]Web.config" 
                        ElementPath="/configuration/system.web/sessionState" 
                        Name="mode" Value="InProc" 
                        Sequence="9" />

          <util:XmlFile Id="system.websessionStateAttribute2" 
                        Action="setValue" 
                        File="[INSTALLLOCATION]Web.config" 
                        ElementPath="/configuration/system.web/sessionState" 
                        Name="timeout" 
                        Value="15" 
                        Sequence="10" />

          <util:XmlFile Id="system.websessionStateAttribute3" 
                        Action="setValue" 
                        File="[INSTALLLOCATION]Web.config" 
                        ElementPath="/configuration/system.web/sessionState" 
                        Name="cookieName" 
                        Value="[VIRTUALDIRECTORYVALUE]" 
                        Sequence="11" />
        </Component>

<iis:WebSite Id='DefaultWebSite'
             Description='Default Web Site'
             Directory='INSTALLLOCATION' SiteId ='[WEBSITEVALUE]' >

  <iis:WebAddress Id="AllUnassigned" Port="80" />
</iis:WebSite>
<iis:WebAppPool Id="AppPool" Name="[APPPOOLVALUE]" />

<CustomAction Id="MapVirtualDirectory"  Directory="INSTALLLOCATION"  Return="asyncNoWait"
              ExeCommand='[ASPNETREGIIS] -norestart -s "W3SVC/[WEBSITEVALUE]/ROOT/[VIRTUALDIRECTORYVALUE]"' />

<InstallExecuteSequence>
  <Custom Action="MapVirtualDirectory" After="InstallFinalize"    >ASPNETREGIIS AND NOT Installed</Custom>
</InstallExecuteSequence>

<CustomAction Id="GetIISWebSites" BinaryKey="IisManager" DllEntry="GetWebSites" Execute="immediate" Return="check" />
<CustomAction Id="GetIISAppPools" BinaryKey="IisManager" DllEntry="GetAppPools" Execute="immediate" Return="check" />

<InstallUISequence>
  <Custom Action="GetIISWebSites" After="CostFinalize" Overridable="yes">NOT Installed</Custom>
  <Custom Action="GetIISAppPools" After="CostFinalize" Overridable="yes">NOT Installed</Custom>
</InstallUISequence>

<Feature Id='ApplicationFeatures' Title="!(loc.ProductName)" Level='1'>
  <ComponentRef Id='WebVirtualDirComponent' />
  <ComponentGroupRef  Id="MyWebApp_Project" />
  <ComponentRef Id="Web.config" />

</Feature>

<!-- Specify UI -->
<Property Id="WIXUI_INSTALLDIR">INSTALLLOCATION</Property>
<UIRef Id="MyCustomUI"/> 
```

这是我的本地化文件：

```
<?xml version="1.0" encoding="utf-8"?>
<WixLocalization Culture="en-us" xmlns="http://schemas.microsoft.com/wix/2006/localization">

  <!--application settings-->
  <String Id="LANG">1033</String>
  <String Id="ProductName">MyTestWebSite</String>
  <String Id="ProductVersion">1.0.0.0</String>
  <String Id="CompanyName">MyCompanyName</String>
  <String Id="DefaultDocument">Default.aspx</String>
  <String Id="WebApplicationProjectName">MyWebApp</String>

  <!--database settings-->
  <String Id="EntityName">MyEntities</String>
  <String Id="ModelName">MyModel</String>

</WixLocalization> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:36:11.513

`XmlFile`并且`XmlConfig`都在原子级别写入属性。要获得所需的行为，您需要编写一个即时自定义操作来读取 XML 文件并将结果存储在`Property`. 然后`Property`按照您认为合适的方式对其进行操作（如果操作很复杂，您可能需要在自定义操作中执行此操作），然后将整个操作值返回`XmlFile`或写回。`XmlConfig`

`XmlFile`通过允许和`XmlConfig`执行繁重的工作和处理回滚以及所有这些事情，此方法将需要代码中最简单的自定义操作集。只需对`Property`幂等进行修改。

祝你好运！

# r - Subset data.table by logical column

> ID：16191083
> 
> 赞同：29
> 
> 时间：2013-04-24T11:41:32.283
> 
> 标签：r, data.table, subset

I have a `data.table` with a logical column. Why the name of the logical column can not be used directly for the `i` argument? See the example.

```
dt <- data.table(x = c(T, T, F, T), y = 1:4)

# Works
dt[dt$x]
dt[!dt$x]

# Works
dt[x == T]
dt[x == F]

# Does not work
dt[x]
dt[!x] 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-24T12:13:21.207

从`?data.table`

> 高级：当`i`是单个变量名时，它不被视为列名的表达式，而是在调用范围内进行评估。

所以`dt[x]`将尝试`x`在调用范围内进行评估（在这种情况下是全局环境）

您可以使用`(`or `{`or来解决这个问题`force`

```
dt[(x)]
dt[{x}]
dt[force(x)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T11:47:59.777

`x`没有在全球环境中定义。如果你试试这个，

```
> with(dt, dt[x])
      x y
1: TRUE 1
2: TRUE 2
3: TRUE 4 
```

它会起作用的。或这个：

```
> attach(dt)
> dt[!x]
       x y
1: FALSE 3 
```

编辑：

根据文档，`j`参数采用列名，实际上：

```
> dt[x]
Error in eval(expr, envir, enclos) : object 'x' not found
> dt[j = x]
[1]  TRUE  TRUE FALSE  TRUE 
```

然后，`i`参数采用数字或逻辑表达式（就像 x 本身应该是），但是如果没有这个，它（data.table）似乎看不到`x`逻辑：

```
> dt[i = x]
Error in eval(expr, envir, enclos) : object 'x' not found
> dt[i = as.logical(x)]
      x y
1: TRUE 1
2: TRUE 2
3: TRUE 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-10T11:42:48.637

这也应该有效，并且可以说更自然：

```
setkey(dt, x)
dt[J(TRUE)]
dt[J(FALSE)] 
```

# listview - Android - 列表更新后动画重置 - monodroid 和 mvvmcross

> ID：16191087
> 
> 赞同：1
> 
> 时间：2013-04-24T11:41:44.163
> 
> 标签：listview, animation, xamarin.android, mvvmcross

我正在实现一个类似于 facebook 应用程序中的“幻灯片”菜单 - 请参阅图像。它是使用 mono droid 和 mvvmcross 实现的。

我实现这一点的方法是有两种布局，并通过动画实现滑出/滑入效果。我只是简单地滑出“顶部”的布局，另一个就显露出来了——这个词是一种魅力。第二个布局包含一个表格，可以在其中进行选择（正方形）。按下时，它会重新加载一个 checkmak 而不是空方格。但是，当这种情况发生时，整个视图重新加载回零 - 似乎整个视图都重新加载而忽略了布局 1 的新位置（屏幕外）。

怎么会这样？您有什么建议或意见。是否可以避免重新加载整个视图，只留下要重新加载的表？

非常感谢任何帮助。

![图 1](https://i.stack.imgur.com/JYiVf.png)

![图 2](https://i.stack.imgur.com/OlGy5.png)

# symfony-1.4 - Handle updated_by field while update a table row in Symfony 1.4

> ID：16191089
> 
> 赞同：0
> 
> 时间：2013-04-24T11:41:54.503
> 
> 标签：symfony-1.4, diem

I am facing some troubles while updating a table row.

Here is my code

```
$product = ProductTable::getInstance()->find($product_id);
    $product->setQunatity(($product->getQunatity() - $qty));
    $product->setSellingQty(($product->getSellingQty() + $qty));
    $product->save(); 
```

Here symfony automatically update the updated_by field. But I don't want to update that particular field.

Is this is possible in symfony 1.4 . I am using Diem Project 5

Or only super admin can execute those code.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:31:56.317

该`updated_at`字段由 Doctrine 自动更新（如果您使用此 ORM，则为 Propel）。这要归功于为`Timestampable`您的模型类设置的行为。据我所知，没有“简单”的方法来控制这种行为。如果您真的希望仅在某些情况下更新该字段，您应该放弃该行为并编写您自己的`preSave`函数，这些函数将在选定的情况下更新该字段。

# javascript - Migration from google maps V2 to Version 3

> ID：16191091
> 
> 赞同：0
> 
> 时间：2013-04-24T11:41:59.243
> 
> 标签：javascript, google-maps-api-3

I am working on a migration project from google maps V2 to V3 and can't get the following working.

```
<!DOCTYPE html>
<html>
<head>
<script
src="http://maps.googleapis.com/maps/api/js?key=myApiKey&sensor=false">
</script>

<script>
function initialize()
{
var map=new google.maps.Map(document.getElementById("googleMap"));
map.setCenter(new google.maps.LatLng(51.508742,-0.120850),5);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body>
<div id="googleMap" style="width:500px;height:380px;"></div>

</body>
</html> 
```

Actually I don't want to use the options parameter in the new `google.maps.Map` function. I want to center the map using map.center function.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:29:08.010

这是错误的：

```
map.setCenter(new google.maps.LatLng(51.508742,-0.120850),5); 
```

setCenter 只接受一个参数，即 LatLng 对象。尝试这个：

```
map.setCenter(new google.maps.LatLng(51.508742,-0.120850)); 
```

# c#-4.0 - 无法修改该列。[ 列名 = 用户 ID ]

> ID：16191092
> 
> 赞同：1
> 
> 时间：2013-04-24T11:42:00.987
> 
> 标签：c#-4.0, asp.net-mvc-4, sql-server-ce

我对 MVC 和 SQL CE 比较陌生，而且我的主键字段似乎有问题。在我的数据库中，我有“用户”表，该表有一个名为“UserId”的主键。我创建了一个注册页面，它从中获取一些数据，然后应该将这些数据存储在数据库中。但是，当单击表单提交按钮时，检测到以下错误：

```
The column cannot be modified. [ Column name = UserId ] 
```

这很奇怪，因为我没有尝试 UserId 值。下面的代码是我对注册操作的发布操作：

```
[HttpPost]
    public ActionResult Registration(UserModel user)
    {
        if (ModelState.IsValid)
        {
            using (var db = new BlogDbContext())
            {
                var crypto = new SimpleCrypto.PBKDF2();

                var encryptPassword = crypto.Compute(user.Password);

                var newUser = db.Users.Create();

                newUser.Username = user.Username;
                newUser.FirstName = user.FirstName;
                newUser.LastName = user.LastName;
                newUser.Email = user.Email;
                newUser.Password = encryptPassword;
                newUser.PasswordSalt = crypto.Salt;
                newUser.JoinDate = DateTime.Now;

                db.Users.Add(newUser);
                db.SaveChanges();

                return RedirectToAction("Index", "User");
            }
        }
        else
        {
            ModelState.AddModelError("", "Registration Failure");
        }

        return View();
    } 
```

当我最初在 VS 2012 中使用 SQL CE 创建数据库时，我将标识选项设置为“真”，相信这会自动增加主键列。我已经在 SO 上寻找过类似的问题，但是，大多数人认为包括某种 SQL 查询，我还没有深入研究过。任何帮助将不胜感激。

# django - 地图点数据的异步显示

> ID：16191097
> 
> 赞同：1
> 
> 时间：2013-04-24T11:42:21.427
> 
> 标签：django, asynchronous, leaflet

我想在我的 django web 地图应用程序中实现异步交互。我显示了一组opoints（使用传单）。我想要做的是在鼠标悬停事件上创建一个视图函数调用，以获取和显示给定点的一些数据。我看了一下看起来很有希望的 [dajaxproject](http://www.dajaxproject.com)。有谁知道更好的解决方案？任何经验分享都受到高度赞赏。

# c# - 从 Exchange Server 2007 读取/写入约会 RTF

> ID：16191103
> 
> 赞同：0
> 
> 时间：2013-04-24T11:42:36.013
> 
> 标签：c#, rtf, exchangewebservices, exchange-server-2007

我想做的是

*   预约
*   在外部修改它
*   写更新交换

当我用 Microsoft.Exchange.WebServices.Data.ExchangeService 做这件事时，我会一头雾水，因为我得到了一些奇怪的渲染 html 而没有实际的布局数据。

所以我唯一的想法是通过 RTF 来做。但是 ExchangeService 只支持 text 和 html。

是否可以通过其他方式从 Exchange 服务器读取/写入约会 RTF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T16:01:29.563

借助“Exchange Web Services .NET”（Independentsoft），可以使用 MapiProperty.PR_RTF_COMPRESSED 字段读取/写入 RTF 正文。Microsoft API 应该也可以。

# c# - 从 c# 有问题地将 rdl 报告导出到多个工作表 excel 文件

> ID：16191106
> 
> 赞同：1
> 
> 时间：2013-04-24T11:42:52.263
> 
> 标签：c#, excel, export, export-to-excel, rdlc

我一直在网上寻找解决方案，但到目前为止还没有运气。

在我正在开发的当前应用程序中，我需要将潜在的大型 rdlc 报告导出到 excel 文件（以及其他格式）

这是我用来实现这一点的代码，它在正常大小的报告上效果很好：

```
private static void ExportToExcel(LocalReport localReport, string filename)
{
  if (File.Exists(filename))
  { 
    File.Delete(filename);
  }

  var bytes = localReport.Render("Excel", string.Empty);
  using (var stream = File.Create(filename))
  {
    stream.Write(bytes, 0, bytes.Length);
  }
} 
```

非常简单，但是当我尝试导出大型报告时，我收到类似于以下内容的异常：“Excel 渲染扩展：行数超过了此版本的工作表中可能的最大值。请求的行数：152190。最大行数：65536。”

所以这是我的问题：有没有办法告诉导出器在达到最大行数时创建一个新工作表？如果是这样，那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-19T20:49:42.160

我知道这是一个老问题，但您可以在 .rdl 文件中添加分页符。这些会导致导出在 Excel 中启动新工作表。您可以使用 .rdl 中的公式来动态确定何时需要另一个分页符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-01T14:27:13.080

我遇到了类似的问题，并认为我会在这里添加我的经验。由于没有提到 SSRS 的版本并且问题仍未得到解答，我认为这与任何地方一样好。我编写了一个 PowerShell 脚本来将 SSRS 2012 rdl 报告导出为各种格式，一种是 Excel。我也收到以下错误：

> 使用“7”参数调用“渲染”的异常：“Excel 渲染扩展：行数超过此版本的工作表中可能的最大值。请求的行数：65587。最大行数：65536。（rrRenderingError）”

SSRS 2012 确实从 Excel 导出中删除了 65536 行限制，但我很难找到如何以编程方式超过此行限制。经过一番搜索，我遇到了帮助我解决它的[Microsoft 支持文章。](https://support.microsoft.com/en-us/kb/2772178)参数值“Excel”需要更改为“EXCELOPENXML”

```
var bytes = localReport.Render("EXCELOPENXML", string.Empty); 
```

同样，这对 SSRS 的早期版本没有帮助，但我想为 SSRS 2012 提供更多的可见性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:48:00.320

不确定您使用的是哪个版本的 Excel，但 65,536 行是 .xls 文件的限制。如果您改为创建 .xlsx 文件，则最多可以有 1,048,576 行（来自[此处](http://office.microsoft.com/en-ca/excel-help/excel-specifications-and-limits-HP010342495.aspx)），这应该可以满足您的要求。

编辑：虽然我最近自己使用了本机 Excel 对象，但显然[EPPlus](http://epplus.codeplex.com/)可以让您更轻松地创建 XLSX 文件。

HTH，Z

按照要求：

```
xl.Application myExcelApp;
xl.Workbooks myExcelWorkbooks;
xl.Workbook myExcelWorkbook;
xl.Worksheet myExcelWorksheet;

myExcelApp = new xl.Application();
myExcelApp.DisplayAlerts = false;
myExcelApp.Visible = false;
myExcelWorkbooks = myExcelApp.Workbooks;

String fileName = @"G:/foo/bar/goleafsgo.xlsx"; // set this to the file you want
myExcelWorkbook = myExcelWorkbooks.Add(misValue);
myExcelWorksheet = (xl.Worksheet)myExcelWorkbook.Worksheets.get_Item(1);

Recordset rs = ConvertToRecordset(dt);

ws.get_Range("A3", System.Reflection.Missing.Value).CopyFromRecordset(rs);

myExcelWorkbook.SaveAs(fileName, xl.XlFileFormat.xlWorkbookDefault, misValue, misValue, false, false, xl.XlSaveAsAccessMode.xlNoChange, misValue, misValue, misValue, misValue, misValue);
myExcelApp.Quit(); 
```

ConvertToRecordset 函数可以在[这里找到](http://www.codeproject.com/Articles/10503/Simplest-code-to-convert-an-ADO-NET-DataTable-to-a)

# algorithm - 根据出发日期和持续时间计算到达日期

> ID：16191108
> 
> 赞同：0
> 
> 时间：2013-04-24T11:42:53.900
> 
> 标签：algorithm, pascal

我正在尝试制作一个程序来计算火车何时从a到b。
我有时间当火车离开时，也有时间从a到b的距离。
我需要一个算法来确定火车是否绕过 24 小时。
就像我得到这些时间一样：火车在 20:55 出发，火车乘车时间 - 11:40。
结果应该是 8:35，但我怎么能得到呢？

```
 program troleibusai;
 var xxx:integer ;
 f,g:text ;
 a:real;
 Begin
 Assign(F,'train_times'); 
 Reset(F);
 Assign(G,'results.txt');
 Rewrite(G);
 Read(F,left_hour);
 Read(F,left_minute);
 Read(F,ride_hour);
 Read(F,ride_minute); 
```

这是代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:09:26.297

计算并`left_hour * 60 + left_minute + ride_hour * 60 + ride_minute`
得到它`div 60``mod 60`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:56:16.570

看看单元 dateutils 中的函数之间，

例如[http://www.freepascal.org/docs-html/rtl/dateutils/minutesbetween.html](http://www.freepascal.org/docs-html/rtl/dateutils/minutesbetween.html)

# javascript - 剔除复选框问题

> ID：16191110
> 
> 赞同：4
> 
> 时间：2013-04-24T11:43:03.513
> 
> 标签：javascript, jquery, knockout.js

我有一个复选框，我想在该复选框上绑定一个函数，如果选中该复选框，则该函数会执行某些操作，如果未选中该复选框，则该函数会执行某些操作。

但复选框不会保持选中状态。调用函数时检查，退出函数后取消检查。我究竟做错了什么？

这是我正在尝试做的一个示例：http: [//jsfiddle.net/GSeFD/](http://jsfiddle.net/GSeFD/)

JS：

```
function MyViewModel() {
    var self = this;
    self.click = function(data,event) {
        if ($('#checkbox').is(':checked')){
            console.log('checked');
        }
        else{
            console.log('unchecked');
        }
    }
}
ko.applyBindings(new MyViewModel()); 
```

HTML：

```
<input type="checkbox" id="checkbox" data-bind="click: $root.click" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:46:46.790

如果要触发默认浏览器事件（例如选中复选框） ，则需要在`click`处理程序中`return true`

```
self.click = function(data,event) {
    if ($('#checkbox').is(':checked')){
        console.log('checked');
    }
    else{
        console.log('unchecked');
    }
    return true;
} 
```

演示[JSFiddle。](http://jsfiddle.net/ZV9DP/)

另请参阅文档：[注 3：允许默认单击操作](http://knockoutjs.com/documentation/click-binding.html)

顺便说一句，如果您使用复选框，还应该考虑使用[`checked`绑定。](http://knockoutjs.com/documentation/checked-binding.html)

# perl - Windows 运行进程列表 perl

> ID：16191112
> 
> 赞同：1
> 
> 时间：2013-04-24T11:43:08.447
> 
> 标签：perl, process, monitor

我正在寻找最标准的方法来获取 Windows 机器上正在运行的进程（和服务）的列表。重要的是不要使用“现代”的东西，因为我会在旧服务器上部署那个程序。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:40:45.523

正如 skp 所提到的，tasklist 命令可以做到（在 Windows XP 上测试）。

这是一个按 PID 创建进程哈希的小脚本：

```
use warnings;
use strict;

my @procs = `tasklist`;

#Find position of PID based on the ===== ====== line in the header
my $pid_pos;
if ($procs[2] =~ /^=+/)
{
    $pid_pos = $+[0]+1;
}
else
{
    die "Unexpected format!";   
}

my %pids;
for (@procs[3 .. $#procs])
{
    #Get process name and strip whitespace
    my $name = substr $_,0,$pid_pos;
    $name =~s/^\s+|\s+$//g;

    #Get PID
    if (substr($_,$pid_pos) =~ /^\s*(\d+)/)
    {
        $pids{$1} = $name;  
    }
}

use Data::Dumper;
print Dumper %pids; 
```

另一种可能有用的方法是[`Win32::Process::List`](http://search.cpan.org/~rpagitsch/Win32-Process-List/). 它使用核心 Windows C 函数获取进程列表。它似乎适用于旧版本的 Perl。

# javascript - 如何在 jQuery 中导航 JSON 对象？

> ID：16191115
> 
> 赞同：2
> 
> 时间：2013-04-24T11:43:22.840
> 
> 标签：javascript, jquery, ajax, json

我创建了这个处理我的数据库功能的 web 服务，这是对其中一种方法的 AJAX 调用。

```
 $.ajax({
        type: "POST",
        url: "Service/dataBaseService.asmx/getRMAData",
        data: '{"RMAId": 1 }',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        cache: false,
        success: function (data) {
            console.log(data);
            alert(data.RMA_ID);
        }
  }); 
```

这是记录的内容：

```
({d:"[{\"RMA_ID\":1,\"RequestDate\":\"2013-02-28T00:00:00\",\"Company\":1,\"Status\":\"Accepted            \",\"Serial\":201764,\"LastChangeDate\":\"2013-02-28T00:00:00\",\"LastChangeBy\":\"Foreign    \",\"Price\":null}]"}) 
```

然而`alert(data.RMA_ID)`返回 undefined 以及`data.d.RMA_ID`?

我怎样才能掌握这些价值观？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T11:46:13.457

`data`您记录的值是一个具有名为 的属性的对象`d`，其中包含一个字符串值。您可能可以在服务器端进行调整以生成`d`对象的值而不是字符串，但是按照当前的构造方式，您可以使用`JSON.parse`.

完成后，生成的对象应该是一个数组，包含一个对象。因此，您的访问权限`RMA_ID`如下：

```
var data = JSON.parse(data.d);
alert(data[0].RMA_ID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:50:55.033

使用简单的 javascript 您需要解析 JSON 响应

```
var resp = eval('(' + data + ')'); 
```

或通过 jQuery

```
var resp = jQuery.parseJSON(data); 
```

现在您可以使用“。”访问数据。和键名

```
console.log(resp.d[0].RMA_ID) 
```

# java - 在路径中找不到 Eclipse 错误“g++/gcc”

> ID：16191116
> 
> 赞同：3
> 
> 时间：2013-04-24T11:43:25.900
> 
> 标签：java, eclipse, g++

我已经安装了 Eclipse 4.3 Juno。我的环境分为两个独立的工作区。一种用于 Java，一种用于 c/c++。

当我为 CI 运行 eclipse 时，可以使用它并编译我的项目。

```
eclipse -data d:\src\c -vmargs -Xmx512M 
```

现在，当我运行 Java 开发环境时，我突然收到此错误：

```
error 'g++/gcc' not found in path 
```

这两个工作区完全分开，有自己的 .metadata 目录。

我尝试了在这里和通过谷歌找到的各种提示，比如重置首选项，但没有任何帮助。由于我可以使用我的 C 环境，因此应该足以证明编译器的存在。:) 它也在 PATH 变量中，所以当我在 windows commandproampt 上使用 g++/gcc 时，我被拒绝访问（因为它是 cygwin）。

那么，当我只为 Java 运行我的 Eclipse 时，我怎样才能摆脱这个恼人的错误。我什至不需要 CDT，但插件可能安装在 eclipse 中而不是工作区中。所以这必须是一些路径设置，我为 C 而不是 Java 环境更改了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T16:33:51.023

所以最后我找到了解决方案。我从这里得到了提示[Configure Eclipse CDT to use g++](https://stackoverflow.com/questions/8467937/configure-eclipse-cdt-to-use-g)

重要的一点是 g++ 是符号链接的注释。一切都设置好了，但是当我从 Windows 命令提示符执行 g++ 或 gcc 时，我在 cygwin 中工作时收到错误“访问被拒绝”。

在阅读了关于它是一个符号链接的部分之后，很清楚问题是什么，因为 Windows 无法应对它。所以我现在所做的，我反转了符号链接，例如 gcc 和 g++ 是真正的 exe，而 g++-3 等的链接现在指向 exe，而不是相反。

我不得不使用 -clean 选项重新启动 eclipse，然后正常重新启动它，错误是历史记录。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:47:22.650

您应该安装 build-essential

```
sudo apt-get install build-essential 
```

安装后，打开一个终端，然后输入 g++（按回车键），如果它说没有输入，那么你得到了你的 g++

我的意思是，日食很好，但我发现这样的问题一直存在。

试试看一下 NetBeans。

# xpages - IBM 多米诺骨牌设计器, dblookup

> ID：16191118
> 
> 赞同：0
> 
> 时间：2013-04-24T11:43:36.907
> 
> 标签：xpages

我对在 xpages 中使用 @DbLookup 有疑问。我有一个简单的 nsf 数据库，如下所示：

```
Name             |          Values
TimeZones        | +1 +2 +3 +4 +5 +6 +7 +8 +9 +10 +11 etc.
Countries        | Germany Ireland England Spain Slovakia Czech etc. 
```

问题是我不知道如何使用@DbLookup 仅获取时区或国家/地区的值。我试过了，但没有用：

```
@DbLookup(@DbName(), "KeywordLookup", "TimeZones", "Values"); 
```

其中 KeywordLookup 是我的视图的名称。

但是当我尝试使用

```
@DbColumn(@DbName(),"KeywordLookup",1); 
```

它很好用。在我的组合框中，我可以看到

```
TimeZones
Countries 
```

谁能给我建议？

更新＃1：

我的观点“KeywordLookup”使用形式“keywords”，看起来像

```
Name:
-Type Text-

Values:
-Type Text- 
```

该视图仅包含两列：

```
Name - mapped to Name
Values - mapped to Values 
```

我在笔记中创建文档并填写：

```
Name :
Countries

Values : 
Germany
Ireland
Slovakia
etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:56:16.760

在该视图中对您的第一个列进行排序。作为一个有用的提醒，为您的字段选择一个更具描述性的名称。恐怕“名称”或“值”是 Domino 环境中的关键字。“日期”、“密钥”等也是如此。

# python - 如何在一些不同的终端中执行一个程序的输出

> ID：16191120
> 
> 赞同：0
> 
> 时间：2013-04-24T11:43:46.097
> 
> 标签：python, bash, shell, wxpython

我的最后一个问题也是同样的事情，但没有得到适当的建议，所以我再问一次。

我有一个将连接到 ssh 的 GUI。在它连接到 ssh 后，我无法执行任何操作，因此我必须通过脚本打开新终端，然后在该“新终端”中执行其余操作（显示各自的输出）。

现在我可以使用子进程打开新窗口，但它没有从 GUI 执行任何操作可能是代码问题。请帮我解决我的问题。

我在后端使用 python 和 shell 脚本，对 GUI 使用 wxpython。

注意：我正在寻找使用 Python 和 shell 脚本的解决方案。

我的代码是：

```
import time
import sys
import pexpect
c = pexpect.spawn("ssh -Y -L xxxx:localhost:xxxx user @ host.com")
time.sleep(0.1)
c.expect("[pP]aasword")
c.sendline("xxxxxx")
sub = subprocess.call("xfce4-terminal")
if sub:
   subprocess.call("svn update",shell=True)
time.sleep(0.2)
c.interact()
c.pexpect([user@host.com~]$)
# here after its connects to ssh then command wont be executed
c.sendline("xfce4-terminal") 
```

在 GUI 中，我有一个按钮“应用”和 5 个单选按钮。我一次可以选择 1 个单选按钮，并且必须单击“应用”按钮。然后它连接到 ssh 隧道并执行请求的操作。现在它在连接到 ssh_tunnel 后不允许进行任何操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:16:13.140

您看到的实际问题是如何避免在运行时阻塞 GUI 事件循环`ssh`。

有两种主要方法可以解决它：

*   `ssh`在后台线程中运行并使用[适合您的 GUI 框架的方法与主 GUI 线程进行通信](http://wiki.wxpython.org/LongRunningTasks)以报告结果。

*   异步运行`ssh`并订阅其 I/O 事件。这是[gtk 框架的示例](https://gist.github.com/zed/8a255e81eb87431c0e63)。

要通过 运行命令`ssh`，您可以尝试将[`fabric`](http://fabfile.org)其用作[库](http://docs.fabfile.org/en/1.6/usage/library.html)（它比 更高级别`paramiko`）。

# android - 如何在列表视图中显示电话联系人

> ID：16191121
> 
> 赞同：0
> 
> 时间：2013-04-24T11:43:46.740
> 
> 标签：android

我正在使用联系人提供商来获取所有的电话号码和姓名，并在列表视图中显示这些。

我的手机中有近 4500 个联系人。

加载所有姓名和电话号码大约需要 2-3 分钟。

任何建议如何减少加载时间

谢谢阿吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:49:04.427

您可以为此使用[内容提供程序](http://developer.android.com/guide/topics/providers/content-provider-basics.html)

```
ListAdapter list;
        list=readContacts();
        ListView lv=(ListView) findViewById(R.id.listView1);
        lv.setAdapter(list); 
```

而且`readContacts()`是

```
public ListAdapter readContacts(){
        ContentResolver cr = getContentResolver();
        ListAdapter cd = new ArrayList<Contact_getActivity>();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, ContactsContract.Contacts.DISPLAY_NAME);

        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                    // get the phone number
                    Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                            new String[]{id}, null);
                    while (pCur.moveToNext()) {
                        String phone = pCur.getString(
                                pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        //                         if (!Utils.isEmpty(phone)) {
                        //                             cd.add(new ContactData(id, name, phone));
                        //                         }
                    }
                    pCur.close();

                }
            }
        }
        return cd;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:50:15.070

我知道这不是您问题的直接答案，但您可以加载一定数量的联系人，将它们显示在列表中，然后在后台加载剩余的联系人`thread`。当用户滚动到列表的末尾时，例如`20`联系人，您添加新加载的`20`联系人。我认为这种技术被称为`paging`但我不确定:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T08:31:40.193

一次只显示几个联系人（假设有 100 个联系人）。当用户向下滚动列表时，再加载 100 个，依此类推。就像 Facebook 的新提要功能一样。它会一次加载一些新闻，并在您进一步向下滚动时加载另一个。

在我看来，这是优化应用程序的最佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:54:50.230

您应该看看[Loaders](http://developer.android.com/guide/components/loaders.html)，因为它们可以轻松地异步加载活动或片段中的数据！[它有很多优点，这里](http://developer.android.com/guide/components/loaders.html)的官方文档中清楚地提到了。该文档还有一个加载联系人的示例。

# tcp - JavaFX 2 从网络更新模型

> ID：16191124
> 
> 赞同：1
> 
> 时间：2013-04-24T11:43:50.933
> 
> 标签：tcp, network-programming, javafx

我正在使用 JavaFX 2 做一个应用程序。对于图形界面部分，MVP 设计模式似乎很适合 JavaFX，但我想就如何根据来自 tcp-ip 消息传递的数据更新模型提出一些建议。我想将模型与所有套接字创建和连接分开。这种应用程序有共同的模式吗？我可以添加什么样的层来管理所有网络内容和消息？感谢您的建议。

# mongodb - MongoDB 聚合：从先前行的总和计算运行总计

> ID：16191125
> 
> 赞同：12
> 
> 时间：2013-04-24T11:43:55.830
> 
> 标签：mongodb, aggregation-framework, mongoid, cumulative-sum

样本文件：

```
{ time: ISODate("2013-10-10T20:55:36Z"), value: 1 }
{ time: ISODate("2013-10-10T22:43:16Z"), value: 2 }
{ time: ISODate("2013-10-11T19:12:66Z"), value: 3 }
{ time: ISODate("2013-10-11T10:15:38Z"), value: 4 }
{ time: ISODate("2013-10-12T04:15:38Z"), value: 5 } 
```

很容易获得按日期分组的汇总结果。但我想要的是查询返回聚合运行总数的结果，例如：

```
{ time: "2013-10-10" total: 3, runningTotal: 3  }
{ time: "2013-10-11" total: 7, runningTotal: 10 }
{ time: "2013-10-12" total: 5, runningTotal: 15 } 
```

MongoDB 聚合可以做到这一点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-01-13T21:44:16.250

这可以满足您的需要。我已经对数据中的时间进行了标准化，因此它们组合在一起（你可以做这样的事情[）](http://www.kamsky.org/stupid-tricks-with-mongodb/stupid-date-tricks-with-aggregation-framework)。这个想法是将'和'`$group`推入单独的数组中。然后 是数组，并且您已经为每个文档制作了数组的副本。然后，您可以从包含不同时间所有数据的数组中计算（或类似滚动平均值）。生成的“索引”是对应的数组索引。before ing很重要，因为这可以确保数组的顺序正确。`time``total``$unwind``time``totals``time``runningTotal``$unwind``total``time``$sort``$unwind`

```
db.temp.aggregate(
    [
        {
            '$group': {
                '_id': '$time',
                'total': { '$sum': '$value' }
            }
        },
        {
            '$sort': {
                 '_id': 1
            }
        },
        {
            '$group': {
                '_id': 0,
                'time': { '$push': '$_id' },
                'totals': { '$push': '$total' }
            }
        },
        {
            '$unwind': {
                'path' : '$time',
                'includeArrayIndex' : 'index'
            }
        },
        {
            '$project': {
                '_id': 0,
                'time': { '$dateToString': { 'format': '%Y-%m-%d', 'date': '$time' }  },
                'total': { '$arrayElemAt': [ '$totals', '$index' ] },
                'runningTotal': { '$sum': { '$slice': [ '$totals', { '$add': [ '$index', 1 ] } ] } },
            }
        },
    ]
); 
```

我在一个包含约 80 000 个文档的集合上使用了类似的东西，总计 63 个结果。我不确定它在更大的集合上的效果如何，但我发现一旦数据减少到可管理的大小，对聚合数据执行转换（投影、数组操作）似乎并没有很大的性能成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-24T13:39:24.263

这是另一种方法

管道

```
db.col.aggregate([
    {$group : {
        _id : { time :{ $dateToString: {format: "%Y-%m-%d", date: "$time", timezone: "-05:00"}}},
        value : {$sum : "$value"}
    }},
    {$addFields : {_id : "$_id.time"}},
    {$sort : {_id : 1}},
    {$group : {_id : null, data : {$push : "$$ROOT"}}},
    {$addFields : {data : {
        $reduce : {
            input : "$data",
            initialValue : {total : 0, d : []},
            in : {
                total : {$sum : ["$$this.value", "$$value.total"]},                
                d : {$concatArrays : [
                        "$$value.d",
                        [{
                            _id : "$$this._id",
                            value : "$$this.value",
                            runningTotal : {$sum : ["$$value.total", "$$this.value"]}
                        }]
                ]}
            }
        }
    }}},
    {$unwind : "$data.d"},
    {$replaceRoot : {newRoot : "$data.d"}}
]).pretty() 
```

收藏

```
> db.col.find()
{ "_id" : ObjectId("4f442120eb03305789000000"), "time" : ISODate("2013-10-10T20:55:36Z"), "value" : 1 }
{ "_id" : ObjectId("4f442120eb03305789000001"), "time" : ISODate("2013-10-11T04:43:16Z"), "value" : 2 }
{ "_id" : ObjectId("4f442120eb03305789000002"), "time" : ISODate("2013-10-12T03:13:06Z"), "value" : 3 }
{ "_id" : ObjectId("4f442120eb03305789000003"), "time" : ISODate("2013-10-11T10:15:38Z"), "value" : 4 }
{ "_id" : ObjectId("4f442120eb03305789000004"), "time" : ISODate("2013-10-13T02:15:38Z"), "value" : 5 } 
```

结果

```
{ "_id" : "2013-10-10", "value" : 3, "runningTotal" : 3 }
{ "_id" : "2013-10-11", "value" : 7, "runningTotal" : 10 }
{ "_id" : "2013-10-12", "value" : 5, "runningTotal" : 15 }
> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-07T12:16:01.330

这是一个解决方案，无需将以前的文档推送到新数组中然后对其进行处理。（如果数组变得太大，那么您可能会超过最大 BSON 文档大小限制，即 16MB。）

计算运行总数很简单：

```
db.collection1.aggregate(
[
  {
    $lookup: {
      from: 'collection1',
      let: { date_to: '$time' },
      pipeline: [
        {
          $match: {
            $expr: {
              $lt: [ '$time', '$$date_to' ]
            }
          }
        },
        {
          $group: {
            _id: null,
            summary: {
              $sum: '$value'
            }
          }
        }
      ],
      as: 'sum_prev_days'
    }
  },
  {
    $addFields: {
      sum_prev_days: {
        $arrayElemAt: [ '$sum_prev_days', 0 ]
      }
    }
  },
  {
    $addFields: {
      running_total: {
        $sum: [ '$value', '$sum_prev_days.summary' ]
      }
    }
  },
  {
    $project: { sum_prev_days: 0 }
  }
]
) 
```

我们做了什么：在查找中，我们选择了所有具有较小日期时间的文档并立即计算总和（使用 $group 作为查找管道的第二步）。$lookup 将值放入数组的第一个元素中。我们拉取第一个数组元素，然后计算总和：当前值 + 先前值的总和。

如果您想将事务分组为天，然后计算运行总计，那么我们需要将 $group 插入到开头，并将其插入到 $lookup 的管道中。

```
db.collection1.aggregate(
[
  {
    $group: {
      _id: {
        $substrBytes: ['$time', 0, 10]
      },
      value: {
        $sum: '$value'
      }
    }
  },
  {
    $lookup: {
      from: 'collection1',
      let: { date_to: '$_id' },
      pipeline: [
        {
          $group: {
            _id: {
              $substrBytes: ['$time', 0, 10]
            },
            value: {
              $sum: '$value'
            }
          }
        },
        {
          $match: {
            $expr: {
              $lt: [ '$_id', '$$date_to' ]
            }
          }
        },
        {
          $group: {
            _id: null,
            summary: {
              $sum: '$value'
            }
          }
        }
      ],
      as: 'sum_prev_days'
    }
  },
  {
    $addFields: {
      sum_prev_days: {
        $arrayElemAt: [ '$sum_prev_days', 0 ]
      }
    }
  },
  {
    $addFields: {
      running_total: {
        $sum: [ '$value', '$sum_prev_days.summary' ]
      }
    }
  },
  {
    $project: { sum_prev_days: 0 }
  }
]
) 
```

结果是：

```
{ "_id" : "2013-10-10", "value" : 3, "running_total" : 3 }
{ "_id" : "2013-10-11", "value" : 7, "running_total" : 10 }
{ "_id" : "2013-10-12", "value" : 5, "running_total" : 15 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-27T15:45:44.450

从 开始，它是新聚合运算符`Mongo 5`的完美用例：[`$setWindowFields`](https://docs.mongodb.com/manual/reference/operator/aggregation/setWindowFields/)

```
// { time: ISODate("2013-10-10T20:55:36Z"), value: 1 }
// { time: ISODate("2013-10-10T22:43:16Z"), value: 2 }
// { time: ISODate("2013-10-11T12:12:66Z"), value: 3 }
// { time: ISODate("2013-10-11T10:15:38Z"), value: 4 }
// { time: ISODate("2013-10-12T05:15:38Z"), value: 5 }
db.collection.aggregate([

  { $group: {
    _id: { $dateToString: { format: "%Y-%m-%d", date: "$time" } },
    total: { $sum: "$value" }
  }},
  // e.g.: { "_id" : "2013-10-11", "total" : 7 }

  { $set: { "date": "$_id" } }, { $unset: ["_id"] },
  // e.g.: { "date" : "2013-10-11", "total" : 7 }

  { $setWindowFields: {
    sortBy: { date: 1 },
    output: {
      running: {
        $sum: "$total",
        window: { documents: [ "unbounded", "current" ] }
      }
    }
  }}
])
// { date: "2013-10-11", total: 7, running: 7 }
// { date: "2013-10-10", total: 3, running: 10 }
// { date: "2013-10-12", total: 5, running: 15 } 
```

让我们关注以下`$setWindowFields`阶段：

*   按日期按时间顺序`$sort`分组的文档：`sortBy: { date: 1 }`
*   `running`在每个文档中添加字段 ( `output: { running: { ... }}`)
*   这是`$sum`s `total`( `$sum: "$total"`)
*   在指定的文档范围内 (the `window`)
    *   在我们的案例中，这是任何以前的文件：`window: { documents: [ "unbounded", "current" ] } }`
    *   根据含义定义，窗口是在第一个文档 ( ) 和当前文档 ( )`[ "unbounded", "current" ]`之间看到的所有文档。`unbounded``current`

# php - 如何在 SUBMIT 或 ENTER 按钮上提交表单

> ID：16191134
> 
> 赞同：0
> 
> 时间：2013-04-24T11:44:24.730
> 
> 标签：php, mysql, ajax

我正在尝试遵循[教程](http://www.w3resource.com/ajax/working-with-PHP-and-MySQL.php)和[演示](http://www.w3resource.com/ajax/ajax-php-mysql-user-interface.html)。但是当我按下 SUBMIT 或 ENTER 按钮时，它没有提交，它只是刷新页面:(并显示错误。

它显示一个警报

> 这个要求有个问题。

页面刷新。

**我的表格**

```
<form class="well-home span6 form-horizontal" name="ajax-demo" id="ajax-demo"> <div class="control-group">
              <label class="control-label" for="book">Book</label>
              <div class="controls">
                <input type="text" id="book" onKeyUp="book_suggestion()">
                <div id="suggestion"></div>
             </div>  </div>  <div class="control-group">
              <div class="controls">
                <button type="submit" class="btn btn-success">Submit</button>
              </div>  
       </div> 
</form> 
```

**还有我的 Javascript**

```
<script>
function book_suggestion()
{
var book = document.getElementById("book").value;
var xhr;
 if (window.XMLHttpRequest) { // Mozilla, Safari, ...
    xhr = new XMLHttpRequest();
} else if (window.ActiveXObject) { // IE 8 and older
    xhr = new ActiveXObject("Microsoft.XMLHTTP");
}
var data = "book_name=" + book;
     xhr.open("POST", "book-suggestion.php", true); 
     xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");                  
     xhr.send(data);
     xhr.onreadystatechange = display_data;
    function display_data() {
     if (xhr.readyState == 4) {
      if (xhr.status == 200) {
       //alert(xhr.responseText);      
      document.getElementById("suggestion").innerHTML = xhr.responseText;
      } else {
        alert('There was a problem with the request.');
      }
     }
    }
}
</script> 
```

**书-suggestion.php**

```
<?php  
include('../includes/dbopen.php');  
$book_name = $_POST['book_name'];  
$sql = "select book_name from book_mast where book_name LIKE '$book_name%'";  
$result = mysql_query($sql);  
while($row=mysql_fetch_array($result))  
{  
echo "<p>".$row['book_name']."</p>";  
}  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:04:54.967

那里使用的提交按钮不参与演示。演示的目的是展示**当用户在文本框中键入数据时**如何使用 ajax 获取数据。它肯定会被扩展，以便提交按钮起作用并添加更多功能，但目前还没有添加到演示中。

# iphone - 文本未在 uitextview 中显示

> ID：16191139
> 
> 赞同：0
> 
> 时间：2013-04-24T11:44:41.293
> 
> 标签：iphone, ios, keyboard, uitextview

我在uiview 上添加了一个textview。当我尝试将数据输入其中时，它不会显示。

按照我的代码

```
questionView1 = [[UIView alloc]initWithFrame:CGRectMake(30, 40, 260, 350)];
[questionView1 setBackgroundColor:[UIColor blackColor]];
quesText1 = [[UITextView alloc] initWithFrame:CGRectMake(10, 20, 240, 270)];
quesText1.layer.borderWidth = 10.0f;
[quesText1 setText:@"Everything Ok"];
quesText1.layer.borderColor = [[UIColor grayColor] CGColor];
quesText1.tag = 100;
quesText1.delegate = self;
[questionView1 addSubview:quesText1]; 
```

它显示默认文本但试图通过键盘输入数据然后它不显示。

但是，当我签入它的委托（如下）时，它会打印正确的值

```
- (void)textViewDidEndEditing:(UITextView *)textView;{
    NSLog(@"%@",textView.text);\\ print correct value but value not showing in        uitextview area.
} 
```

不知道它是如何发生的以及为什么会发生..有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:09:56.913

要尝试的事情

1.  您的背景颜色为黑色，默认情况下文本颜色为黑色。因此将文本颜色设置为白色
2.  问题可能是设置边框以使其覆盖默认文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:00:43.217

一旦检查这个，

```
UIView*   questionView1 = [[UIView alloc]initWithFrame:CGRectMake(30, 40, 260, 350)];
    [questionView1 setBackgroundColor:[UIColor blackColor]];
   UITextView* quesText1 = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 240, 270)];
    quesText1.contentInset = UIEdgeInsetsMake(20.0, 0.0, 20.0, 0.0);
    quesText1.layer.borderWidth = 10.0f;
    quesText1.contentMode=UIViewContentModeCenter;
    [quesText1 setText:@"Everything Ok"];
    quesText1.layer.borderColor = [[UIColor grayColor] CGColor];
    quesText1.tag = 100;
    quesText1.delegate = self;
    [questionView1 addSubview:quesText1];
    [self.view addSubview:questionView1];
    questionView1.userInteractionEnabled=YES; 
```

在你的代码中设置这一行

```
 quesText1.contentInset = UIEdgeInsetsMake(20.0, 0.0, 20.0, 0.0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:06:32.050

请试试这个...

步骤1：

```
[self.view addSubView:questionView1]; 
```

第2步：

在您的 .h 文件中采用协议`'UITextViewDelegate'`，并输入以下代码

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text

{

    if ([text isEqualToString:@"\n"]) {

        [textView resignFirstResponder];

    }
        return YES;
} 
```

# extjs - 在 EXTJS 4 中更改显示字段的默认字体颜色

> ID：16191140
> 
> 赞同：1
> 
> 时间：2013-04-24T11:44:43.347
> 
> 标签：extjs

我想更改 EXTJS 4 中显示字段 Xtype 的默认字体颜色。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-14T17:42:30.650

您可以使用 html 字体标签来更改显示字段的颜色。
例如： `field.setValue('<font color="green">Hello</font>');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:16:55.433

他们这样做的几种方法：

1.  设置样式（使用`style`, `fieldStyle`, `labelStyle`...）。
2.  使用 css 类（使用`cls`，`fieldBodyCls`...）。
3.  更改主题 (.scss) 或 .css。

[http://docs.sencha.com/extjs/4.1.1/#!/api/Ext.form.field.Display](http://docs.sencha.com/extjs/4.1.1/#!/api/Ext.form.field.Display)

# matlab - MATLAB 代码整改

> ID：16191147
> 
> 赞同：-1
> 
> 时间：2013-04-24T11:45:00.403
> 
> 标签：matlab, image-processing

以下代码未在 matlab 中运行。我正在 matlab 中尝试一个匿名函数。你能告诉我这行有什么问题吗：

```
Inv_Y_Quant = blockproc(BB,[8 8], InvQuant); 
```

相关代码如下：

```
clear all
clc

I = imread('cameraman.tif');
% convert it to double
I = im2double(I);
% "Trim by 128"
I = I-128;
% Generate the DCT matrix
T = dctmtx(8);
% Generate Function handler for DCT
MyFun1 = @(block_struct) T * block_struct.data * T';
% BlockProcess the DCT the function for 8 by 8 blocks
B = blockproc(I,[8 8],MyFun1);
% Form the Quantization matrix
Q = [ 16 11 10 16 24 40 51 61
12 12 14 19 26 58 60 55
14 13 16 24 40 57 69 56
14 17 22 29 51 87 80 62
18 22 37 56 68 109 103 77
24 35 55 64 81 104 113 92
49 64 78 87 103 121 120 101
72 92 95 98 112 100 103 99];
% now generate function handler for the quantization
MyFun2 = @(block_struct)block_struct.data ./Q;
% perform the quantization
BB = blockproc(B,[8 8],MyFun2);
InvQuant = @(block_struct)round(block_struct.data.*Q);
Inv_Y_Quant = blockproc(BB,[8 8], InvQuant);
InvDct = @(block_struct)dct_matrix'*block_struct.data*dct_matrix;
Z = blockproc(Inv_Y_Quant, [8 8], InvDct);
Z = Z+128;
figure, imshow(Z)
Z = uint8(Z);
figure, imshow(Z)

%imwrite(Z, 'Mar7.tif');
%b = imread('Mar7.tif');
%imshow(b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:56:38.307

正如您在评论中所写，问题是您尝试`dct_matrix`在匿名函数中使用数组`InvDct`。该数组**从未**在您的代码中定义。

您是否打算使用矩阵`T`（init as `dctmtx(8)`）？

**编辑：**
在匿名函数中使用参数时（如`dct_matrix`本例所示），应在定义匿名函数之前定义这些参数。

# php - Xdebug 不会在断线处停止

> ID：16191148
> 
> 赞同：2
> 
> 时间：2013-04-24T11:45:01.673
> 
> 标签：php, zend-framework, netbeans, xdebug

好吧，所以我的 xdebug 不能正常工作。我之前让它在断点处停止，但后来它不会，所以我尝试修改一些东西，现在它甚至在以前的条件下都不起作用。

但是我确实停在了第一个块代码级别。像这样：

![在此处输入图像描述](https://i.stack.imgur.com/Pw26z.png)

但话又说回来，我改变了一些东西，所以现在它不再工作了。我的调试器控制台也是空的。（一直以来？ ：/）

![在此处输入图像描述](https://i.stack.imgur.com/kI7Ab.png)

现在它只停止断点所在的位置，但是如果我将其删除或将其更改为另一个位置。它不会停在任何地方。

我会根据您的需要为您提供尽可能多的信息。

网豆信息：

```
Product Version: NetBeans IDE 7.2.1 (Build 201210100934)
Java: 1.7.0_10; Java HotSpot(TM) 64-Bit Server VM 23.6-b04
System: Windows 7 version 6.1 running on amd64; Cp1252; en_US (nb) 
```

xdebug

```
xdebug support  enabled
Version 2.2.2
IDE Key netbeans-xdebug

Supported protocols Revision
DBGp - Common DeBuGger Protocol $Revision: 1.145 $

Directive   Local Value Master Value
xdebug.auto_trace   Off Off
xdebug.cli_color    0   0
xdebug.collect_assignments  Off Off
xdebug.collect_includes On  On
xdebug.collect_params   0   0
xdebug.collect_return   Off Off
xdebug.collect_vars Off Off
xdebug.coverage_enable  On  On
xdebug.default_enable   On  On
xdebug.dump.COOKIE  no value    no value
xdebug.dump.ENV no value    no value
xdebug.dump.FILES   no value    no value
xdebug.dump.GET no value    no value
xdebug.dump.POST    no value    no value
xdebug.dump.REQUEST no value    no value
xdebug.dump.SERVER  no value    no value
xdebug.dump.SESSION no value    no value
xdebug.dump_globals On  On
xdebug.dump_once    On  On
xdebug.dump_undefined   Off Off
xdebug.extended_info    On  On
xdebug.file_link_format no value    no value
xdebug.idekey   netbeans-xdebug netbeans-xdebug
xdebug.max_nesting_level    100 100
xdebug.overload_var_dump    On  On
xdebug.profiler_aggregate   Off Off
xdebug.profiler_append  Off Off
xdebug.profiler_enable  Off Off
xdebug.profiler_enable_trigger  Off Off
xdebug.profiler_output_dir  C:\xampp\tmp    C:\xampp\tmp
xdebug.profiler_output_name xdebug_profile.%R::%u   xdebug_profile.%R::%u
xdebug.remote_autostart Off Off
xdebug.remote_connect_back  Off Off
xdebug.remote_cookie_expire_time    3600    3600
xdebug.remote_enable    On  On
xdebug.remote_handler   dbgp    dbgp
xdebug.remote_host  127.0.0.1   127.0.0.1
xdebug.remote_log   no value    no value
xdebug.remote_mode  req req
xdebug.remote_port  9000    9000
xdebug.scream   Off Off
xdebug.show_exception_trace Off Off
xdebug.show_local_vars  Off Off
xdebug.show_mem_delta   Off Off
xdebug.trace_enable_trigger Off Off
xdebug.trace_format 0   0
xdebug.trace_options    0   0
xdebug.trace_output_dir C:\xampp\tmp    C:\xampp\tmp
xdebug.trace_output_name    trace.%c    trace.%c
xdebug.var_display_max_children 128 128
xdebug.var_display_max_data 512 512
xdebug.var_display_max_depth    3   3 
```

我正在运行**PHP 5.4.4 版**和

**Apache 版本 Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4 Apache API 版本。**

![在此处输入图像描述](https://i.stack.imgur.com/Ug01R.png)

![在此处输入图像描述](https://i.stack.imgur.com/RaUe0.png)

![在此处输入图像描述](https://i.stack.imgur.com/MQl7M.png)

我也尝试了 ZendDebugger，但是这给了我一个 php5.dll 文件丢失的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:57:08.603

问题可能是你的代码在你的 IDE 和你的网络服务器之间没有同步。我看到您在 localhost 上运行，因此，您需要确保将文件保存在正确的目录中，以便您的 Web 服务器获取它。您可能正在调试旧版本的代码。它发生在我身上好几次在虚拟机上运行代码。

# iphone - 在超类中调用静态函数

> ID：16191152
> 
> 赞同：-6
> 
> 时间：2013-04-24T11:45:14.457
> 
> 标签：iphone, ios, objective-c

2 个名为 base 和 derived 的类包含如下方法

```
 interface class base:NSObject{
     +(int)getmaxrow{
     return 30;
    }
    +display{
   print [getmaxrow]; ///here is the :( how to call getmaxrow so 
                     ///that it should wrk     perfectly on derived aswell as base  
   }
    }
   interface class derived: base{
   +(int)getmaxrow{
    return 45;
   }
   } 
```

在这里，我们需要一个适当的方法来从派生中调用，以便它可以在被覆盖的方法中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:50:21.730

[[super Class] getmaxrow] 呢？

（用于对派生类的调用）

和

[[自我类] getmaxrow]

调用超类

```
- (void)display {
    NSLog(@"%d", [[self Class] getmaxrow]);
} 
```

# javascript - 如何使 response.js 标记模式工作？

> ID：16191154
> 
> 赞同：0
> 
> 时间：2013-04-24T11:45:18.790
> 
> 标签：javascript, responsive-design

[我的示例页面](http://petripottonen.com/responsejs/)

如果你水平缩放浏览器，你可以看到 src 的`<img>`变化。所以 src-mode 工作正常。代码是：

`<img data-src0="mika.jpg" data-src481="jussi.jpeg" data-src1025="seppo.jpeg" />`

但我不知道如何让标记模式工作。不起作用的标记模式代码（在示例页面上带有黑色边框的 div 内）：

`<div data-r320="markup @ 320+" data-r961="markup @ 961+">default</div>`

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T21:40:36.837

在您的 body 标签中，将前缀更改为`"prefix": "r src"`. 我不知道这是否是一个错误，但根据我的经验，`min-width-`当它与其他前缀一起使用时会导致问题。

我通常倾向于只用`r`前缀做所有事情。你真的不需要`src`在你的例子中使用。只需将 em 更改`r`为。

responsejs.com 上没有的更多示例：

[https://github.com/ryanve/response.js/wiki/how-to-create-breakpoint-sets](https://github.com/ryanve/response.js/wiki/how-to-create-breakpoint-sets)

# jqgrid - jqGrid动态列

> ID：16191160
> 
> 赞同：0
> 
> 时间：2013-04-24T11:45:36.313
> 
> 标签：jqgrid

我使用 jqGrid v4.4.5，我想用动态列创建它。它由“jqGridHandler.ashx”文件填充。我想通过 JSON 发送所有信息（列名，数据，...）。我在谷歌搜索它，但找不到一个好的答案。

通过单击每个节点（子）更改整个网格（操作和列...）。例如，通过单击节点 3，网格具有三列“A”和“B”以及“操作”，但通过单击节点 2 网格具有列“C”、“D”和“动作”。 ![在此处输入图像描述](https://i.stack.imgur.com/8U8i3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:42:10.593

在初始化 jqGrid 之前，您需要了解 jqGrid 的 colNames 和 colModel 属性的信息。

所以简而言之，您将从您的服务器请求信息，一旦您成功检索到该信息，您就可以构建 jqGrid，然后 jqGrid 可以去获取它的数据。

以下帖子在客户端有一些示例代码： [jqGrid and dynamic column binding](https://stackoverflow.com/questions/2277962/jqgrid-and-dynamic-column-binding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:12:39.623

可以使用 jqGrid 创建许多不同的网格、树形网格、子网格等。了解您是要显示 10 行还是 100000 行的网格非常重要。如果您有 100000 行（或其他一些大量行），则必须实现*服务器端分页和数据排序*。因此，如果用户单击“下一页”按钮，则应从服务器加载下一行。为什么需要`colModel`在分页或排序时发送所有数据？因此，您应该清楚地了解，在服务器端场景中，只需要创建*一次*网格的所有结构，然后只需要刷新网格的主体。因此，一次发送所有信息（列名、列模型、数据……）将是一个糟糕的选择。

只有当您在网格中有数百或数千行并且您可以使用`loadonce: true`选项时，您才能*在*每个单独的 jQuery.ajax 调用中加载所有信息（列名、列模型、数据......），然后使用创建 jqGrid`datatype: "local"`并使用`data`包含所有网格数据的参数。

**更新**：如果你需要改变

```
// in the example below the grid with id="list" will be created 
// with column having name: "c4" in colModel
var $grid = $("#list"), columnName = "c4";

...

var $colHeader = $("#jqgh_" + $.jgrid.jqID($grid[0].id) + "_" + $.jgrid.jqID(columnName)),
    $sortingIcons = $colHeader.find(">span.s-ico");

// change the text displayed in the column 
$taxHeader.text("New header text");

// append sorting icons to the new text
$taxHeader.append($sortingIcons); 
```

# windows-store-apps - Windows 8：调用 Share charm 的邮件功能时设置默认电子邮件地址

> ID：16191162
> 
> 赞同：1
> 
> 时间：2013-04-24T11:45:41.963
> 
> 标签：windows-store-apps

调用 Share charm 的邮件功能时，我需要设置默认电子邮件地址。具体来说，我已经知道收件人的电子邮件地址。

因此，我想用这些数据填充 mailto 地址，而不是强制用户手动插入这些数据。

有什么建议么？

```
 public void OnHtmlRequested(DataRequestedEventArgs args, string title, string html)
    {
        args.Request.Data.Properties.Title = title;
        args.Request.Data.Properties.Description = "my description";

        args.Request.Data.SetHtmlFormat(HtmlFormatHelper.CreateHtmlFormat(html));
    } 
```

# internet-explorer - Mediaelement.js 对 Internet Explorer 的支持

> ID：16191168
> 
> 赞同：0
> 
> 时间：2013-04-24T11:45:58.637
> 
> 标签：internet-explorer, html5-video, flash, mediaelement.js

我目前正在尝试使用 mediaelement.js 作为对我的 HTML5 视频的完全跨浏览器支持的解决方案。我使用了本教程（[http://vimeo.com/44576115](http://vimeo.com/44576115)) 为了让 mediaelement 正常工作，它在 Safari、Chrome、FF 和 IE9 上运行良好。我已经在 IE8 上尝试过，它给了我一个没有任何视频的白屏，我假设这是一个 flash 后备失败？我还需要视频具有灵活的宽度，以便它适合响应式布局。我开始完全迷失在我遇到的问题上。有人可以为我提供一个“模板”或捐赠经过验证的 html5 视频代码，它适用于所有浏览器，包括旧的 IE 浏览器和 IOS 设备 Ipad、Android 等？这真的对我有很大帮助，如果有人能提供帮助，我们将不胜感激。

非常感谢。

这是我的视频元素代码，我已经检查了所有目录以确保正确链接。

```
<div class="vidcon">

<video width="640" height="360" controls="controls" preload="none">
<!-- MP4 for Safari, IE9, iPhone, iPad, Android, and Windows Phone 7 -->
<source type="video/mp4" src="darrel-vid.mp4" type="video/mp4" />
<!-- WebM/VP8 for Firefox4, Opera, and Chrome -->
<source type="video/webm" src="darrel-vid.webm" type="video/webm" />
<!-- Ogg/Vorbis for older Firefox and Opera versions -->
<source type="video/ogg" src="darrel-vid.ogv" type="video/ogg" />

<!-- Flash fallback for non-HTML5 browsers without JavaScript -->
<object width="640" height="360" type="application/x-shockwave-flash" data="mediaelement/build/flashmediaelement.swf">
    <param name="movie" value="flashmediaelement.swf" />
    <param name="flashvars" value="controls=true&poster=Darrel-poster.jpg&file=darrel-vid.mp4" />
    <!-- Image as a last resort -->
</object>
</video>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:13:28.290

在 IE8 中它使用 Flash 后备。请确保在 flashvars 中 mp4 的路径是正确的。

请发布您的代码。

# php - 从动态链接重写 URL

> ID：16191175
> 
> 赞同：0
> 
> 时间：2013-04-24T11:46:16.317
> 
> 标签：php, mod-rewrite, dynamic

我不确定如何将动态 url 重写为另一种动态 url？

我正在寻求改变：

```
/blog/category.php?catseourl=ExampleCat&pn=1
/blog/category.php?catseourl=ExampleCat&pn=2
/blog/category.php?catseourl=ExampleCatTwo&pn=1 
```

进入：

```
/blog/category/ExampleCat/1
/blog/category/ExampleCat/2
/blog/category/ExampleCatTwo/1 
```

我已经到了这一点：

```
RewriteRule ^blog/category/([^/]*)$ /blog/category.php?catseourl=$1&pn=$1 [L] 
```

但我不确定如何将动态更改添加到重写的左侧？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:50:23.650

尝试

```
RewriteRule ^blog/category/([^/]+)/([0-9]+)/?$ /blog/category.php?catseourl=$1&pn=$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:50:24.417

```
RewriteEngine On
RewriteRule ^blog/category/([^/]*)/([^/]*)/?$ /blog/category.php?catseourl=$1&pn=$2 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:52:00.693

试试这个：

```
RewriteRule ^blog/category/(.+)/([0-9]+)$ /blog/category.php?catseourl=$1&pn=$2 [L] 
```

# android - 安卓脸书注销

> ID：16191176
> 
> 赞同：0
> 
> 时间：2013-04-24T11:46:19.467
> 
> 标签：android, facebook

当我尝试在我的应用程序中从 Facebook 注销时，我遇到了问题。每次我尝试注销时，我都会得到一个`NullPointerException`. LogCat 提供以下信息：

```
04-24 11:41:03.853: E/AndroidRuntime(523): FATAL EXCEPTION: main
04-24 11:41:03.853: E/AndroidRuntime(523): java.lang.NullPointerException
04-24 11:41:03.853: E/AndroidRuntime(523):  at android.webkit.CookieSyncManager.createInstance(CookieSyncManager.java:96)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.facebook.internal.Utility.clearCookiesForDomain(Utility.java:261)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.facebook.internal.Utility.clearFacebookCookies(Utility.java:285)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.facebook.Session.closeAndClearTokenInformation(Session.java:593)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.facebook.android.Facebook.logoutImpl(Facebook.java:667)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.facebook.android.Facebook.logout(Facebook.java:644)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.ali.health.and.fitness.exercises.FacebookIntegration$1.onClick(FacebookIntegration.java:83)
04-24 11:41:03.853: E/AndroidRuntime(523):  at android.view.View.performClick(View.java:2408)
04-24 11:41:03.853: E/AndroidRuntime(523):  at android.view.View$PerformClick.run(View.java:8816)
04-24 11:41:03.853: E/AndroidRuntime(523):  at android.os.Handler.handleCallback(Handler.java:587)
04-24 11:41:03.853: E/AndroidRuntime(523):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-24 11:41:03.853: E/AndroidRuntime(523):  at android.os.Looper.loop(Looper.java:123)
04-24 11:41:03.853: E/AndroidRuntime(523):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-24 11:41:03.853: E/AndroidRuntime(523):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 11:41:03.853: E/AndroidRuntime(523):  at java.lang.reflect.Method.invoke(Method.java:521)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-24 11:41:03.853: E/AndroidRuntime(523):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-24 11:41:03.853: E/AndroidRuntime(523):  at dalvik.system.NativeStart.main(Native Method) 
```

我已经在 onCreate 方法中初始化了所有内容：

```
String APP_ID = getString(R.string.APP_ID);

    fb = new Facebook(APP_ID);

    sp = getPreferences(MODE_PRIVATE);

    String access_token = sp.getString("access_token", null);
    long expires = sp.getLong("access_expires", 0);

    if(access_token!=null)
    {
        fb.setAccessToken(access_token);
    }
    if(expires!=0)
    {
        fb.setAccessExpires(expires); 
    }

    logout = (Button)findViewById(R.id.button1); 
```

我的注销侦听器执行以下操作：

```
logout.setOnClickListener(new OnClickListener()
    {

        public void onClick(View arg0) 
        {

            if(fb.isSessionValid())
            {
                try {
                    fb.logout(FacebookIntegration.this);
                    Editor  editor = sp.edit();
                    editor.clear();
                    editor.commit(); 
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            else
            {
                fb.authorize(FacebookIntegration.this,new String[]{"email"},Facebook.FORCE_DIALOG_AUTH ,new DialogListener() {

                    @Override
                    public void onFacebookError(FacebookError e) {
                        Toast.makeText(FacebookIntegration.this, "onFacebookCancel", Toast.LENGTH_SHORT);
                    }

                    @Override
                    public void onError(DialogError e) {
                        Toast.makeText(FacebookIntegration.this, "onError", Toast.LENGTH_SHORT);
                    }

                    @Override
                    public void onComplete(Bundle values) { 
                        Toast.makeText(FacebookIntegration.this, "onComplete", Toast.LENGTH_SHORT);
                        Editor editor = sp.edit();
                        editor.putString("access_token", fb.getAccessToken());
                        editor.putLong("access_expires", fb.getAccessExpires());
                        editor.commit();
                    } 

                    @Override
                    public void onCancel() {
                        Toast.makeText(FacebookIntegration.this, "onCancel", Toast.LENGTH_SHORT);
                    }
                });
            }
        }    
    }); 
```

它基本上有两个逻辑，如果会话有效则注销，否则将用户登录。

知道为什么我会得到例外吗？我开始认为这与`Context`我正在路过有关，但并不完全确定。

有时按钮似乎只是工作，有时它会引发异常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:49:56.047

试试下面的代码。就我而言，它正在工作

```
 public void onClick(View arg0) 
    {

        if(fb.isSessionValid())
        {
            try {
                **fb.logout(getApplicationContext());**
                /*Editor  editor = sp.edit();
                editor.clear();
                editor.commit(); */
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

# javascript - 如何保护管理员 javascript 文件？

> ID：16191177
> 
> 赞同：0
> 
> 时间：2013-04-24T11:46:19.510
> 
> 标签：javascript, apache, file-access

我只有在我的网站上有一个用于管理页面的 javascript 文件。如何做到这一点，该文件仅供管理员使用。检查 cookie 执行的角色。也许对服务器进行某种检查？服务器阿帕奇。

ps：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:51:04.247

即使您从 Javascript 代码中检查 cookie [可以检查]，但 JS 仍会下载到客户端计算机上。我认为您希望除了管理员之外没有其他人可以下载该文件。如果是这种情况，那么最好使用 .htaccess 或 web.config 文件来限制包含管理员特定文件的文件夹以进行正确的身份验证。

在一个棘手的解决方案中，您也可以使用 URL 重写来防止文件下载，除非您的 PHP 或服务器端代码验证用户。

# node.js - 如何使用socket io和nodejs从java服务器获取数据到javascript？

> ID：16191179
> 
> 赞同：0
> 
> 时间：2013-04-24T11:46:26.197
> 
> 标签：node.js, socket.io

我正在处理一种 gps 跟踪系统。我有一张地图，我需要更新车辆的当前位置。我需要使用 socket io 进行实时可视化。我查看了 nodejs 教程，但无法得出解决方案。我有一个用 java 编写的服务器，我想向用 javascript 编写的地图发送更新。那么如何使用套接字 io 和/或 nodejs 从我的 java 服务器接收数据？`var http = require("http"); var server = http.createServer(); server.listen(????)`我应该在这些代码中添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T08:30:11.137

您可以使用 WebSockets (HTML5)。将 websocket 包安装到运行 node.js 服务器的文件夹中：

```
npm install websocket 
```

这里有一个关于 websockets 和 node.js 的好教程的[链接。](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial)

# javascript - 想要在对象数组中搜索字符串？

> ID：16191183
> 
> 赞同：1
> 
> 时间：2013-04-24T11:46:37.407
> 
> 标签：javascript

我想搜索这个由对象组成的员工数组，我应该能够搜索任何文本，例如如果我通过 ---> search_for_string_in_array ('aaron', employees) ；它应该向我显示“数组中存在值”，或者如果它的方式请帮助我..

```
//here is the employeee  array ...
  var employees =[{
                          name:"jacob",
                          age :23,
                          city:"virginia",
                          yoe :12,
                          image :'a.jpg'
                       },
                       {
                          name:"aaron",
                          age :21,
                          city:"virginia",
                          yoe :12,
                          image :'b.jpg'
                       },
                       {
                          name:"johnny",
                          age :50,
                          city:"texas",
                          yoe :12,
                          image :'c.jpg'
                       },
                       {
                          name:"jacob",
                          age :12,
                          city:"virginia",
                          yoe :12,
                          image :'a.jpg'
                       }]; 
```

这是在数组内执行搜索功能的函数。

```
 function search_for_string_in_array(search_for_string, employees) 
            {
                for (var i=0; i < employees.length; i++) 
                {
                    if (employees[i].match(search_for_string))
                    { 
                        return 'Value exists in array';
                    }
                }
               return 'Value does NOT exist in array';
            } 
```

只需将要搜索的值和数组传递给函数，它就会告诉您字符串是否作为数组值的一部分存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:51:52.583

如果您知道 Array 的结构，您可能应该遍历它并测试每个值。如果您不知道结构，您可以将数组字符串化为 JSON 并对其进行正则表达式（尽管它不会那么安全）：

```
function search_for_string_in_array(str, arr) {
    var json = JSON.stringify(arr);
    return new RegExp(':\"'+str+'\"','g').test(json);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:53:36.387

只需更换线路

```
if (employees[i].match(search_for_string)) 
```

有了这个：

```
if (employees[i].name.match(search_for_string)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:12:46.090

尝试

```
function search(text) {
    text += '';
    var i, obj;
    var array = [];
    for (i = 0; i < employees.length; i++) {
        var obj = employees[i];
        for (var key in obj) {
            if (obj.hasOwnProperty(key)) {
                if (('' + obj[key]).indexOf(text) >= 0
                        || ('' + key).indexOf(text) >= 0) {
                    array.push(obj);
                    break;
                }
            }
        }
    }

    return array.length > 0;
} 
```

演示：[Fiddle1](http://jsfiddle.net/arunpjohny/AL9yw/2/) [Fiddle2](http://jsfiddle.net/arunpjohny/AL9yw/3/)

# jsf - 如何将水平效果的方向从 rtl 更改为 ltr

> ID：16191184
> 
> 赞同：0
> 
> 时间：2013-04-24T11:46:40.230
> 
> 标签：jsf, primefaces

我在**rtl正文中有一个****panelGrid ，我正在对****panelGrid**内的一列应用滑动效果，并且效果是从右到左应用的，我想知道如何从 ltr 应用效果。

 ****这是我的代码：

```
 <h:panelGrid id="closed_notebook" "columns="2">
        <h:panelGroup id="middle_closed" layout="block">
        </h:panelGroup>

        <h:panelGroup id="left_closed" layout="block">

            <h:outputLink id="open_book_link" value="javascript:void(0)"
                style="margin-right:110px;">
                <h:graphicImage value="/resources/images/book.png" />

                <p:effect  speed="2000" for="closed_notebook" type="fold"
                    event="click" >
                    <f:param name="mode" value="'hide'" />
                </p:effect>

                <p:effect type="blind" event="click" for="open_notebook"
                    speed="1000" delay="500">
                    <f:param name="mode" value="'show'" />
                </p:effect>

            </h:outputLink>
        </h:panelGroup>
    </h:panelGrid> 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:56:02.617

```
<p:effect type="slide" event="click">
    <f:param name="direction" value="'left'">
</p:effect> 
```

PrimeFaces 效果使用 jQuery 效果，因此[文档](http://docs.jquery.com/UI/Effects)对效果选项很有帮助。****

# iphone - 在 Dropbox 中获取可用空间

> ID：16191185
> 
> 赞同：0
> 
> 时间：2013-04-24T11:46:41.567
> 
> 标签：iphone, ios, dropbox

我在 iPhone 应用程序中集成了 dropbox sdk。我正在将文件上传到保管箱。如何通过代码找出有多少可用空间，以便在文件没有可用空间时不上传文件

```
 DBQuota *quota=[[DBQuota alloc]init];
    long spaceConsumed=quota.totalConsumedBytes;

    long totalSpace=quota.totalBytes;

    NSLog(@"spaceConsumed %ld",spaceConsumed);
    NSLog(@"total space %ld",totalSpace); 
```

在这里我得到输出 0。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:56:21.443

您需要该`/account/info`方法并对`quota_info`字段进行一些数学运算。

此处的文档：[/account/info](https://www.dropbox.com/developers/core/api#account-info)

**编辑**：首先，您需要[设置一个会话](https://www.dropbox.com/developers/core/authentication)。这会给你一个`DBSession`对象。使用它`DBSession`，创建一个`DBRestClient`. 比你可以[从 API 调用方法](https://www.dropbox.com/developers/core/files#ios)。例如调用`loadAccountInfo`。如果一切顺利，`restClient:loadedAccountInfo:`将调用委托方法。这将为您提供正确分配的配额对象。

在您的示例中，您只需创建 a 的新实例`DBAccountInfo`，而无需使用 API。

# javascript - jQuery Click 事件代码无限重复

> ID：16191186
> 
> 赞同：0
> 
> 时间：2013-04-24T11:46:44.130
> 
> 标签：javascript, jquery, click

看： [//jsfiddle.net/hVLsk/2/](http://jsfiddle.net/hVLsk/2/)

相关代码：

```
 jQuery(document).ready(function(){
       $(document).mousemove(function(e) {
           var element = $('#image');
           var mouseX = e.pageX - element.offset().left;
           var mouseY = e.pageY - element.offset().top;
           if(mouseX >= 0 && mouseY >= 0) {
               $('#coords').html(mouseX + ', ' + mouseY);
           }
           element.click(function() {
             //  if(mouseX >= 100 && mouseX <= 150 && mouseY >= 100 && mouseY <= 150) {
                   $('#div1').fadeToggle();
               // }
           });
       });
    }); 
```

我自己更多的是服务器端程序员，所以我的 JavaScript 和 jQuery 不是最好的，但我通常可以很好地执行简单的悬停和单击事件，这让我很难过。

最后我想做的是，当您单击图像的某个区域时，不同的框淡入淡出，那部分都很好（我已将其注释掉），但问题是我在该单击事件中放入的任何内容都会重复没有停止。

我已经尝试取消绑定点击事件（尽管我不确定这是否与情况相关），并且使用简单的警报而不是淡入淡出无济于事。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:48:32.927

问题是当鼠标在页面上移动时，您正在向元素注册无限数量的`click`事件。`image`

解决方案是注册一个`click`事件处理程序并使用[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)来跟踪鼠标，如下所示。

```
jQuery(document).ready(function() {
    var mouseX, mouseY, element = $('#image');
    $(document).mousemove(function(e) {
                mouseX = e.pageX - element.offset().left;
                mouseY = e.pageY - element.offset().top;
                if (mouseX >= 0 && mouseY >= 0) {
                    $('#coords').html(mouseX + ', ' + mouseY);
                }
            });
    element.click(function() {
        // if(mouseX >= 100 && mouseX <= 150 && mouseY >=
        // 100 && mouseY <= 150) {
        $('#div1').fadeToggle();
            // }
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:17:45.797

```
jQuery(document).ready(function(){
var element = $('#image');
var mouseX
var mouseY
   $(document).mousemove(function(e) {
       mouseX = e.pageX - element.offset().left;
       mouseY = e.pageY - element.offset().top;
       if(mouseX >= 0 && mouseY >= 0) {
           $('#coords').html(mouseX + ', ' + mouseY);
       }
   });
    element.click(function() {
         //  if(mouseX >= 100 && mouseX <= 150 && mouseY >= 100 && mouseY <= 150) {
               $('#div1').fadeToggle();
           // }
       });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:53:08.277

```
jQuery(document).ready(function() {
    var element = $('#image');
    $(document).mousemove(function(e) {  
                var mouseX = e.pageX - element.offset().left;
                var mouseY = e.pageY - element.offset().top;
                if (mouseX >= 0 && mouseY >= 0) {
                    $('#coords').html(mouseX + ', ' + mouseY);
                }
            });
           element.click(function() {
        // if(mouseX >= 100 && mouseX <= 150 && mouseY >=
        // 100 && mouseY <= 150) {
        $('#div1').fadeToggle();
            // }
        });
}); 
```

# mysql - 使用逻辑 AND 语句选择 WHERE IN

> ID：16191190
> 
> 赞同：2
> 
> 时间：2013-04-24T11:46:59.870
> 
> 标签：mysql, sql

我试图只选择所有三个组（1、2、3）中的对象。
使用“WHERE gid IN (1,2,3)”选择我得到一个 OR 选择。我需要的是一个 AND 选择。

```
OBJECT_TABLE AS o  
id | field1 | field2 | ...  

 VALUES  
 1, a, b  
 2, c, d  
 3, e, f  
 ...

GROUP_XREF_TABLE AS gx   
 oid | gid  

VALUES  
1, 1  
1, 2  
1, 3  
2, 2  
3, 1  
3, 2  
...

SELECT DISTINCT o.id, gx.gid FROM `OBJECT_TABLE`  AS o
LEFT JOIN `GROUP_XREF_TABLE` AS gx ON o.id = gx.oid
WHERE gx.gid IN (1,2,3) 
```

这将输出所有行。我需要一个 WHERE 子句，它只输出对象 id 为 1 的行，因为只有该对象在所有三个组中。

它是较大选择的一部分，因此仅应在 where 语句中完成这一点很重要（如果需要，子选择应该没问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:55:38.910

下面的子选择将找到那些在 gx 中有 3 行的 oid:s：

```
SELECT o.id, gx.gid FROM `OBJECT_TABLE`  AS o
LEFT JOIN `GROUP_XREF_TABLE` AS gx ON o.id = gx.oid
WHERE gx.oid IN (
    SELECT oid FROM GROUP_XREF_TABLE as gx2 
     GROUP BY oid
    HAVING count(*) = 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:57:42.230

尝试这个

```
 SELECT  o.id, gx.gid FROM `OBJECT_TABLE`  AS o
   LEFT JOIN `GROUP_XREF_TABLE` AS gx ON o.id = gx.oid
   WHERE gx.gid IN (1,2,3)
   group by gx.gid 
```

[**在这里演示**](http://sqlfiddle.com/#!2/247e6/21)

# javascript - 在多个函数中监听事件

> ID：16191192
> 
> 赞同：0
> 
> 时间：2013-04-24T11:47:07.037
> 
> 标签：javascript, jquery

我有一个我听的自定义事件：

```
$(document).on('MyCustomEvent', function(e, data) {

}); 
```

我的问题是我想知道什么时候`MyCustomEvent`在很多不同的函数中触发了。我不想在每个函数中附加事件处理程序，因为它没有任何意义并且可能会相互覆盖。

我所追求的是这样的：

```
function one(){

    //"when MyCustomEvent is fired, do stuff with the 'data' here"
}

function two(){

    //"when MyCustomEvent is fired, do stuff with the 'data' here"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:48:49.923

将所有这些函数作为事件处理程序附加有什么问题？

```
$(document).on('MyCustomEvent', function(e, data) {
    one(data);
});

$(document).on('MyCustomEvent', function(e, data) {
    two(data);
}); 
```

您当然需要更改签名，以便函数接受`data`作为参数。我已经分别附加了这两个函数，因为通常以这样的模块化方式附加处理程序是唯一的方法。

您还可以使用事件命名空间，以便您可以独立地分离处理程序：

```
$(document).on('MyCustomEvent.one', function(e, data) {
    one(data);
});

$(document).on('MyCustomEvent.two', function(e, data) {
    two(data);
});

$(document).trigger('MyCustomEvent'); // both functions are called
$(document).off('MyCustomEvent.one');
$(document).trigger('MyCustomEvent'); // only two() is called 
```

# .net - Access DB 添加行事件

> ID：16191194
> 
> 赞同：2
> 
> 时间：2013-04-24T11:47:15.247
> 
> 标签：.net, events, ms-access

`add_Row`如果其他一些应用程序更改了我的 Access DB ，是否可以捕获事件？我`OleDbConnection`用于连接数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:59:38.857

据我所知，使用 MS Access 是不可能的。

如果您使用的是其他数据库引擎（如 SQL Server），也许您可​​以开发一些技巧，使用一些触发器在某些表中添加一行时调用一些 .net 代码。

但是，在我看来，尤其是在数据库/服务器上，一个用户不应该能够跟踪其他用户的操作（除非它是管理员）。

如果这是您的应用程序所需的功能，也许您应该开发自己的“支持表”来创建自己的“事件管理系统”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:56:55.460

有几个答案。

**桌子上的一个事件：**

如果您要链接到后端 Access DB，则不会。
如果您的表是本地的，并且您使用的是 Access 2007+，那么您可以添加所谓的数据宏。

打开表格后，单击顶部功能区中的**表格。**然后选择**After Insert**开始构建宏。

* * *

查看表格事件并查看**表单事件**，然后是的。您在表单上有一个 After Insert 事件。使用它，那么表是本地的还是链接的都没有关系。您链接到哪种数据库也无关紧要。

# .net - 有没有办法使用源中的 .NET XML 文档标记来记录方法的副作用？

> ID：16191195
> 
> 赞同：0
> 
> 时间：2013-04-24T11:47:15.760
> 
> 标签：.net, documentation, xml-comments, xml-documentation

有没有办法使用源中的 .NET XML 文档标记来记录方法的副作用？

如果没有专门针对此的标签，那么推荐的记录副作用的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:55:17.257

你可以使用标签。Microsoft 在备注部分记录了副作用注意事项。你可以遵循同样的规则。

这是链接[http://msdn.microsoft.com/en-us/library/5ast78ax%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/5ast78ax%28v=vs.71%29.aspx)

# java - Selenium 读取表并逐行写入文件

> ID：16191202
> 
> 赞同：0
> 
> 时间：2013-04-24T11:47:25.297
> 
> 标签：java, selenium, selenium-webdriver

我正在寻找使用 selenium 代码读取表跨度并将跨度写入文件的帮助，以下是我的 html 代码

```
<table>
<tbody><tr>
<tr>
<td><span>
FIRST
</span>
</td>
</tr>
<tr>
<td>
<span>SECOND</span>
</td>
</tr>
<tr>
<td>
<span>THIRD</span>
</td>
</tr>
<tbody>
</table> 
```

我需要在java中的文件上写FIRST SECOND THIRD。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:10:55.260

我想您已经找到/找到了*表*WebElement。然后你可以像这样获取 span 元素的内容：

```
List<WebElement> spanElements = tableElement.findElements(By.ByTagName("span"));

for (WebElement element : spanElements) {
    String spanContent = element.getText();
    //save it to a collection or a StringBuilder, then write it to a file
} 
```

看看[这个](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.html)，[这](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/By.ByTagName.html)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T12:31:24.460

1) 获取所有文本的 XPath 是：

```
//span/text() 
```

2）在java代码中你可以输入类似

```
String text = selenium.getText("xpath=//span"); 
```

# javascript - 如何使用 div 点击事件更新输入

> ID：16191203
> 
> 赞同：0
> 
> 时间：2013-04-24T11:47:26.547
> 
> 标签：javascript, jquery

我的网页中有以下[代码，我需要单击输入字段并使用提供的数字键盘添加值！](http://jsfiddle.net/pN3eT/2/)当焦点出现时，我使用脚本从输入中清除默认值，但是我无法通过单击数字键盘来添加值，因为当我单击一个元素时，焦点来自于被单击的输入数元素。我该如何解决这个问题。我尝试了以下代码，但它没有显示输入中的数字。

```
var lastFocus;

$("#test").click(function(e) {
    // do whatever you want here
    e.preventDefault();
    e.stopPropagation();
    $("#results").append(e.html());
    if (lastFocus) {
        $("#results").append("setting focus back<br>");
        setTimeout(function() {lastFocus.focus()}, 1);
    }
    return(false);
});

$("textarea").blur(function() {
    lastFocus = this;
    $("#results").append("textarea lost focus<br>");
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:56:06.343

这应该有效：

```
var default_val = '';

$('input').focus(function() {
    lastFocus = $(this);
    if($(this).val() == $(this).data('default_val') || !$(this).data('default_val')) {
        $(this).data('default_val', $(this).val());
        $(this).val('');
    }
});

$('input').blur(function() {
    if ($(this).val() == '') $(this).val($(this).data('default_val'));
});

var lastFocus;

$('.num-button').click(function(e){
    e.preventDefault();
    e.stopPropagation();
    var text = $(e.target).text();
    if (!isNaN(parseInt(text))) {
        lastFocus.val(lastFocus.val() + text);
    }
}); 
```

**[现场演示](http://jsfiddle.net/mgechev/pN3eT/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:00:34.957

我注意到的第一件事是您的数字按钮选择器错误

```
$('num-button').click(function(e){ 
```

您的按钮有一个*类*，`num-button`因此您需要在选择器中的类名前加一个点：

```
$('.num-button').click(function(e){ 
```

其次，您的小提琴从未设置过`lastFocus`，因此请务必添加：

```
$('input').focus(function() {
    lastFocus = this;
    ... 
```

第三，您在输入字段时添加/删除水印，但在尝试向其添加数字时添加/删除水印（如果您单击 1，然后单击 2，然后单击 3，则会导致“Watermark-text123”）。

因此，将您的功能封装在一个函数中：

```
function addOrRemoveWatermark(elem)
{
    if($(elem).val() == $(elem).data('default_val') || !$(elem).data('default_val')) {
        $(elem).data('default_val', $(elem).val());
        $(elem).val('');
    }
} 
```

并在输入单元格和单击数字时调用：

```
$('input').focus(function() {
        lastFocus = this;
        addOrRemoveWatermark(this);
}); 
```

和：

```
$('.num-button').click(function(e){
    e.preventDefault();
    e.stopPropagation();
    addOrRemoveWatermark(lastFocus);
    $(lastFocus).val($(lastFocus).val() + $(this).children('span').html());
}); 
```

您将在上面看到另一个更改 - 您不想`append`在附加*元素*时使用，您只想将字符串与单击的按钮的值连接起来。

这是您的代码的一个工作分支：http: [//jsfiddle.net/Zrhze/](http://jsfiddle.net/Zrhze/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:00:51.320

添加以下功能：

```
$('.num-button').live( 'click', 'span', function() {
    $currObj.focus();
    $currObj.val( $currObj.val() + $(this).text().trim() );
}); 
```

此外，将以下变量添加到全局范围：

```
$currObj = ''; 
```

这是工作链接：http: [//jsfiddle.net/pN3eT/7/](http://jsfiddle.net/pN3eT/7/)

## 编辑

根据评论，您将不需要 var`lastFocus`和后续代码。

更新的小提琴在这里[http://jsfiddle.net/pN3eT/28/](http://jsfiddle.net/pN3eT/28/)

# mysql - 替换 MySQL 数据库中所有表的所有列中的特定值

> ID：16191204
> 
> 赞同：3
> 
> 时间：2013-04-24T11:47:27.237
> 
> 标签：mysql

我正在尝试用不同的 IP 替换数据库中 IP 的所有实例（存储为字符串）。

为我将运行的已知表和列执行此操作

```
UPDATE tableName
SET columnName = REPLACE(columnName, ‘IP1/', 'IP2/'); 
```

但是我需要对所有表中的所有列执行此操作，是否有一种简单的方法可以将此命令应用于数据库中的所有列。

谢谢

# variables - 如何将默认 $counter 传递到 PHP 中所有不同的 for 循环中？

> ID：16191206
> 
> 赞同：0
> 
> 时间：2013-04-24T11:47:32.187
> 
> 标签：variables, loops

我有这样的设计：

```
-------------------------------------------
| | |
| 2 | |
| | |
------------ 1 |
| | |
| 3 | |
| | |
-------------------------------------------

```

但是程序员/设计师将`<div>`s 放置为：

```
<div id="2">2</div>
<div id="3">3</div>
<div id="1">1</div> 
```

使用适当的 CSS，它们将作为视觉对象对齐。现在他正在制作一个循环来回显数据库中的数据。如果我不想更改 HTML 层次结构，循环的层次结构是：

```
<div id="2"><?php
  for( condition ) {
      execute News 2 here
  } ?></div>
<div id="3"><?php
  for( condition ) {
     execute News 3 here
  } ?></div>
<div id="2"><?php
  for( condition ) {
     execute News 1 here
  } ?></div> 
```

但**真正的问题**是：
随着`$counter`递增，第一个声明的值（零）是循环递增的，默认值是递增的。因此，在第一个循环中`$counter=0`， , 递增到 1；在第二个循环中`$counter=1`，递增到 2；所以在第三个循环中，$counter=2，递增到 3。但我们希望 $counter 分别递增 2、3、1。

所以**真正的问题**是：

*   **如何在不增加的情况下获取默认的 $counter 值，在一些之前的循环之后被声明？**

我知道这是一个幼稚的问题。但我被困在这里。可以声明`global`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:54:13.307

您可以将值（即 2,3,1；它们是值的任意顺序）存储到（全局）数组中，并将实际的“计数器”设置为数组中的值。

```
$values = array(2, 3, 1);
for ($i = 0; $i < x; $i++) {
    $div = $values[$i];
    do_something_with_div($div);
} 
```

# python - 在文件的行首添加符号 (#!)

> ID：16191211
> 
> 赞同：-3
> 
> 时间：2013-04-24T11:47:54.477
> 
> 标签：python, bash, file

我有一些文件的前三行只是一个标题。但是对于我来说，他们需要在开头添加一个注释符号，例如`#`. 如果我的文件被调用`test.txt`（如下所示），我如何`#`仅在前三行添加 a ，如果可能的话，如果已经存在`#`.

```
A    B    C    D
1    2    3    4

131  4.32  23  42
132  4.31  22  42
...  ...  ... ... 
```

在前三行之后，我有我的实际数据。所以我希望它是：

```
#A    B    C    D
#1    2    3    4
#
131  4.32  23  42
132  4.31  22  42
...  ...  ... ... 
```

所以我可以轻松地加载数据，例如`np.loadtxt('test.txt')`在 python 中。我认为这在 bash 中最简单，但 python 也可以。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:50:24.183

你用 标记了这个问题`bash`，所以你可以在你的 shell 中尝试这个 sed 单行：

```
sed '1,3s/^/#/' file 
```

如果您想“就地”进行更改：添加`-i`

```
sed -i '1,3s/^/#/' file 
```

**编辑**

如果已经有领先，则跳过该行`#`：

```
sed '1,3{/^#/!s/^/#/}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:55:23.490

如果你想使用`awk`，这可以工作：

```
awk '(NR<=3 && !/^#/) {$0="#"$0} {print}' your_file 
```

### 解释

`(NR<=3 && !/^#/)`代表 <= 3 的行数和不以 . 开头的行`#`。在这种情况下，我们用 更新前导`#`行`$0="#"$0`。如果条件不匹配，我们只打印带有`{print}`.

### 测试

没有任何`#`：

```
$ cat s
A    B    C    D
1    2    3    4

131  4.32  23  42
132  4.31  22  42

$ awk '(NR<=3 && !/^#/) {$0="#"$0} {print}' s
#A    B    C    D
#1    2    3    4
#
131  4.32  23  42
132  4.31  22  42 
```

已经有一些`#`：

```
$ cat s
#A    B  #  C    D
1    2    3    4

131  4.32  23  42
132  4.31  22  42

$ awk '(NR<=3 && !/^#/) {$0="#"$0} {print}' s
#A    B  #  C    D
#1    2    3    4
#
131  4.32  23  42
132  4.31  22  42 
```

# django - 将脆形式的textarea转换为富文本编辑器？

> ID：16191212
> 
> 赞同：4
> 
> 时间：2013-04-24T11:47:54.787
> 
> 标签：django, django-forms, html-editor, rich-text-editor, django-crispy-forms

谁能告诉我将一个简单的文本区域转换成一个富 html 文本编辑器的最佳方法。我尝试了很多次，但 tinyMCE 只在正常形式上而不是在酥脆形式上。我是 django 的新手，将不胜感激

# java - 在java中为准备好的语句获取空异常

> ID：16191218
> 
> 赞同：0
> 
> 时间：2013-04-24T11:48:09.923
> 
> 标签：java, sql

这是这里的代码，我试图使用准备好的语句将一些值放入数据库，但得到这个空异常。

```
java.sql.PreparedStatement stmt1 = null;
for(int index2=0;index2<3;index2++)
{
  for(int index1=0;index1<5;index1++)
  {   
     String tt = "INSERT INTO   timetable(col1,col2,col3,col4,col5) VALUES(?,?,?,?,?);";
     stmt = con.prepareStatement(tt);
     stmt1.setInt(index1+1,index1*index2);
  }
  int success = 2;
  success = stmt1.executeUpdate();
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:49:36.160

这里

```
stmt=con.prepareStatement(tt); // use stmt1 instead of stmt
stmt1.setInt(index1+1,index1*index2);// this is NULL 
```

在上面你初始化的行中`stmt`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:50:06.540

初始化**stmt1**，它仍然为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:52:13.347

它应该是

```
stmt1=con.prepareStatement(tt);
stmt1.setInt(index1+1,index1*index2); 
```

并不是

```
stmt=con.prepareStatement(tt);
stmt1.setInt(index1+1,index1*index2); 
```

第二个代码应该给出编译错误，如果这是你得到的完整代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:00:08.973

你应该把你的语句从循环中拉出来，否则你会继续创建一个新的准备好的语句，其中只设置了五个参数中的一个：

更改您的代码：

```
for(int index1=0;index1<5;index1++)
{   
    String tt="INSERT INTO   timetable(col1,col2,col3,col4,col5) VALUES(?,?,?,?,?);";
    stmt=con.prepareStatement(tt);
    stmt1.setInt(index1+1,index1*index2);
} 
```

到

```
String tt="INSERT INTO   timetable(col1,col2,col3,col4,col5) VALUES(?,?,?,?,?);";
stmt1=con.prepareStatement(tt);

for(int index1=0;index1<5;index1++)
{   
    stmt1.setInt(index1+1,index1*index2);
} 
```

# java - 意图过滤器适用于 Google+，但不适用于 Chrome 和 Facebook

> ID：16191219
> 
> 赞同：0
> 
> 时间：2013-04-24T11:48:17.587
> 
> 标签：java, android, xml, android-manifest, intentfilter

我的 AndroidManifest.xml 文件中有以下内容，适用于[我在 Google Play 上的应用](http://play.google.com/store/apps/details?id=com.enigmadream.picturecode)：

```
 <activity
        android:name="com.enigmadream.picturecode.Viewer"
        android:exported="true"
        android:label="@string/title_activity_viewer"
        android:parentActivityName="com.enigmadream.picturecode.Editor" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.enigmadream.picturecode.Editor" />

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data
                android:host="picturecode.enigmadream.com"
                android:scheme="http" />
        </intent-filter>
    </activity> 
```

我认为它工作得很好。[如果您单击来自 Google+](https://plus.google.com/116407530080746315185/posts/Fe8rqGAsLBT)的链接，它似乎仍然可以正常工作- 当您单击使用服务器名称的链接时，它提供了启动我的应用程序而不是浏览器的选项`picturecode.enigmadream.com`。但是，当我从 Facebook 或 Chrome 中单击[指向 picturecode.enigmadream.com 的链接时](http://picturecode.enigmadream.com/?01sv23v6O%C2%A3X2UOaz2tk1C4321UVWVU123g3COOa%40%400i01l6)，它不提供该选项，而只是导航到 Chrome 中的页面。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T14:22:13.937

您需要使用自己的方案（例如，picturecode://）。Facebook 和 Chrome 可能都可以自己处理 http 方案，因此不要检查是否有任何其他活动可以处理它。这样做的结果是，对于较短的 URI，您可能也不需要将主机放在适当的位置。只是`picturecode://01sv...`。当然，您也可以保留此过滤器。如果浏览器访问该页面，只需有一个指向正确 URI 的链接，或者甚至在可能的情况下自动重定向。

作为参考，您可以看到 Google Play 使用 market:// 方案以这种方式工作。

# jquery - 5 个 div，同一个类，显示一个 - 隐藏其他（不是兄弟姐妹）

> ID：16191235
> 
> 赞同：0
> 
> 时间：2013-04-24T11:48:58.567
> 
> 标签：jquery, class

我有 5 个带有“rocksMenu_zoomContainer”类的 div（不是兄弟姐妹）。我正在使用以下代码：

```
function zoomContainers_showHide(){
if(menuItem_place === 0){
  $("#granitos_zoomContainer").show();
}
else if(menuItem_place === 1){
  $("#marmores_zoomContainer").show();
}
else if(menuItem_place === 2){
  $("#calcarios_zoomContainer").show();
}
else if(menuItem_place === 3){
  $("#compositos_zoomContainer").show();
}
else if(menuItem_place === 4){
  $("#ardosias_zoomContainer").show();
} 
```

}

此函数**zoomContainers_showHide()**在单击（按钮）中执行。

这很好用，问题是遵循**一个总是可见的规则，所有其他的总是隐藏**的。

HTML 标记：

```
<!-- Granitos -->

          <div id="rocksMenu_granitos" class="menuItem">
            <div id="granitos_zoomContainer" class="rocksMenu_zoomContainer"></div>
            <div id="rocksMenu_granitos_subContainer" class="menuItem_subContainer">
              <img id="granitos" class="rocksMenu_image" src="images/rocksMenu_granitos.png" alt="" />
            </div>
          </div> <!-- End of id="rocksMenu_granitos" -->

<!-- Mármores -->

          <div id="rocksMenu_marmores" class="menuItem">
            <div id="marmores_zoomContainer" class="rocksMenu_zoomContainer"></div>
            <div id="rocksMenu_marmores_subContainer" class="menuItem_subContainer">
              <img id="marmores" class="rocksMenu_image" src="images/rocksMenu_marmores.png" alt="" />
            </div>
          </div> <!-- End of id="rocksMenu_marmores" -->

<!-- Calcários -->

          <div id="rocksMenu_calcarios" class="menuItem">
            <div id="calcarios_zoomContainer" class="rocksMenu_zoomContainer"></div>
            <div id="rocksMenu_calcarios_subContainer" class="menuItem_subContainer">
              <img id="calcarios" class="rocksMenu_image" src="images/rocksMenu_calcarios.png" alt="" />
            </div>
          </div> <!-- End of id="rocksMenu_calcarios" -->

<!-- Compósitos -->

          <div id="rocksMenu_compositos" class="menuItem">
            <div id="compositos_zoomContainer" class="rocksMenu_zoomContainer"></div>
            <div id="rocksMenu_compositos_subContainer" class="menuItem_subContainer">
              <img id="compositos" class="rocksMenu_image" src="images/rocksMenu_compositos.png" alt="" />
            </div>
          </div> <!-- End of id="rocksMenu_compositos" -->

<!-- Ardósias -->

          <div id="rocksMenu_ardosias" class="menuItem">
            <div id="ardosias_zoomContainer" class="rocksMenu_zoomContainer"></div>
            <div id="rocksMenu_ardosias_subContainer" class="menuItem_subContainer">
              <img id="ardosias" class="rocksMenu_image" src="images/rocksMenu_ardosias.png" alt="" />
            </div>
          </div> <!-- End of id="rocksMenu_compositos" --> 
```

我单击按钮，它显示相应的 div，但所有其他的仍然可见。我无法弄清楚这个 - 我会使用兄弟姐妹（），但他们不是兄弟姐妹......

佩德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:57:32.527

我认为这会奏效

```
function zoomContainers_showHide(){
$(".rocksMenu_zoomContainer:visible").hide();
$(".rocksMenu_zoomContainer").eq(menuItem_place).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:56:09.237

此功能将隐藏所有菜单，然后在 menuItem_place 显示一个：

```
function zoomContainers_showHide(){    
    $(".rocksMenu_zoomContainer").hide();
    $(".rocksMenu_zoomContainer:eq(" + menuItem_place +")").show();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:57:29.963

你为什么不把它们都隐藏*起来*，然后显示你想显示的那个？无论如何，对于用户来说，这一切都太快了……

```
function showZoomContainer(id) {
    $('.menuItem').hide(); // use slide-up or whatever if you need something else.
                           // it won't matter for already hidden divs
    $('#' + id).show(); // or slide-down, or watever
} 
```

像这样使用：

```
// show compositos, hide all others:
showZoomContainer('rocksMenu_compositos'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T11:58:34.903

尝试以下操作：

```
function zoomContainers_showHide(){
   $(".rocksMenu_zoomContainer:visible").hide();
   $(".rocksMenu_zoomContainer").eq(menuItem_place).show();
} 
```

# tomcat - 由于 Mac OS X 上的“java.net.SocketException Invalid argument”，Tomcat 启动失败

> ID：16191236
> 
> 赞同：29
> 
> 时间：2013-04-24T11:48:58.590
> 
> 标签：tomcat, java-native-interface, java

我们有一个在 Tomcat 6（准确地说是 6.0.35.0）上运行的应用程序，由于 Catalina.await 方法中的 socketAccept 调用抛出 SocketException，我们大多数 Mac OS 上的工程师在启动 Tomcat 时遇到问题：

```
SEVERE: StandardServer.await: accept:
java.net.SocketException: Invalid argument
      at java.net.PlainSocketImpl.socketAccept(Native Method)
      at java.net.PlainSocketImpl.socketAccept(PlainSocketImpl.java)
      at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
      at java.net.ServerSocket.implAccept(ServerSocket.java:522)
      at java.net.ServerSocket.accept(ServerSocket.java:490)
      at org.apache.catalina.core.StandardServer.await(StandardServer.java:431)
      at org.apache.catalina.startup.Catalina.await(Catalina.java:676)
      at org.apache.catalina.startup.Catalina.start(Catalina.java:628)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      at java.lang.reflect.Method.invoke(Method.java:601)
      at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
      at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
      at mycompany.tomcat.startup.ThreadDumpWrapper.main(ThreadDumpWrapper.java:260)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      at java.lang.reflect.Method.invoke(Method.java:601)
      at org.tanukisoftware.wrapper.WrapperStartStopApp.run(WrapperStartStopApp.java:238)
      at java.lang.Thread.run(Thread.java:722) 
```

这会导致 Tomcat 在启动后立即关闭（并且非常愤怒）。我们认为这在 Mac OS w/Java 1.7 上一直伴随着我们，在过去的几个月里，我们中的很多人已经切换到 Macbook Pros。到目前为止，唯一的症状是来自 Tomcat 的偶尔的零字节响应，因为这个异常也被抛出在 socketRead 上。错误不会出现在日志中，我们单独将其作为一个孤立的问题不予考虑，并且仅在启动问题开始时才找到原因并设置了 SocketException 断点：

```
Daemon Thread [http-8080-1] (Suspended (breakpoint at line 47 in SocketException))  
  SocketException.<init>(String) line: 47 
  SocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int) line: not available [native method] 
  SocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int) line: not available  
  SocketInputStream.read(byte[], int, int, int) line: 150 
  SocketInputStream.read(byte[], int, int) line: 121  
  InternalInputBuffer.fill() line: 735  
  InternalInputBuffer.parseRequestLine() line: 366  
  Http11Processor.process(Socket) line: 814 
  Http11Protocol$Http11ConnectionHandler.process(Socket) line: 602  
  JIoEndpoint$Worker.run() line: 489  
  Thread.run() line: 722 
```

对于参数：

```
arg0  FileDescriptor  (id=499)  
  fd  1097  
  useCount  AtomicInteger  (id=503) 
    value 2 
arg1  (id=502)
arg2  0 
arg3  8192  
arg4  20000 
```

问题是时间敏感的。由于应用程序更改导致启动时间增加（更多的 Spring 自省/单例开销）似乎是导致这影响 Tomcat 启动的因素；临界点约为 160 秒。我们可以通过禁用一些我们在开发过程中不需要的非强制性上下文来减少启动时间来缓解这个问题，但我更愿意找到根本原因。

## 应用程序配置

应用程序的细节过于复杂，无法详细介绍，但我有一种预感，这可能与早期的绑定有关，所以我至少会列出我机器上的监听端口：

```
localhost:32000 - Java service wrapper port
*:10001         - RMI registry
*:2322          - Java debug
*:56566         - RMI
*:8180          - Tomcat HTTP connector
*:8543          - Tomcat HTTPS connector
*:2223          - Tomcat Internal HTTP connector (used for cross-server requests)
*:14131         - 'Locking' port to determine if an internal service is running
*:56571         - EhCache RMI
*:56573         - RMI
*:62616         - ActiveMQ broker
*:5001          - SOAPMonitorService
*:8109          - Tomcat shutdown port 
```

## 排除的项目

*   最明显的解决方案：`-Djava.net.preferIPv4Stack=true`. 我一直都配置了该选项
*   最近对我们的基本应用程序配置、库、JVM 选项的任何配置更改（没有）
*   JDK 回归。我已经测试了 JDK 1.7.0_09、11、15、17 和 21（我一直在我的机器上安装的 JDK）
*   Mac 操作系统更新。Mac OS 10.7.x 和 10.8.0 到 1.8.3 受到影响
*   文件描述符限制 - 从`5000`增加到`10000`
*   在主以太网接口上完全禁用 IPv6
*   设置断点并删除受 SocketException 影响的第一个上下文（它们是对 Web 服务的传出 HTTP 调用）。不用找了
*   配置`/etc/hosts`使机器主机名解析为 localhost，并将 JVM 选项配置为首选 IPv4 而*不是*首选 IPv6 地址（此答案：[https](https://stackoverflow.com/a/16318860/364206) ://stackoverflow.com/a/16318860/364206 ）

对于那些对主机配置感兴趣的人，它与默认设置相同。我可以在全新安装 10.8 的 Fusion VM 上重现这一点：

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0 localhost 
```

## Java代码调查

由于问题明显具有时间敏感性，设置断点来解决问题会导致问题不会发生。按照评论中的要求，我也捕获`arg0`了`SocksSocketImpl(PlainSocketImpl).socketAccept(SocketImpl)`，似乎没有什么不寻常的。

```
arg0  SocksSocketImpl  (id=460) 
  address InetAddress  (id=465) 
    canonicalHostName null  
    holder  InetAddress$InetAddressHolder  (id=475) 
      address 0 
      family  0 
      hostName  null  
  applicationSetProxy false 
  closePending  false 
  cmdIn null  
  cmdOut  null  
  cmdsock null  
  CONNECTION_NOT_RESET  0 
  CONNECTION_RESET  2 
  CONNECTION_RESET_PENDING  1 
  external_address  null  
  fd  FileDescriptor  (id=713)  
    fd  -1  
    useCount  AtomicInteger  (id=771) 
      value 0 
  fdLock  Object  (id=714)  
  fdUseCount  0 
  localport 0 
  port  0 
  resetLock Object  (id=716)  
  resetState  0 
  server  null  
  serverPort  1080  
  serverSocket  null  
  shut_rd false 
  shut_wr false 
  socket  Socket  (id=718)  
    bound false 
    closed  false 
    closeLock Object  (id=848)  
    connected false 
    created false 
    impl  null  
    oldImpl false 
    shutIn  false 
    shutOut false 
  socketInputStream null  
  stream  false 
  timeout 0 
  trafficClass  0 
  useV4 false 
```

我认为抛出异常的所有线程都是早期调用的受害者，它不会导致 SocketException 所以我无法捕捉到它。能够通过减少启动时间来启动 Tomcat 让我相信触发器可能是一些计划任务，它执行基于套接字的操作，然后影响其他套接字操作。

这并没有解释这如何以及为什么会影响多个线程，无论我们正在做什么来导致这种情况，神秘的 SocketExceptions 不应该从本机代码中冒出来并在多个线程上同时导致这些异常 - 即两个线程反复进行传出 Web 服务调用、Tomcat 等待调用和多个 TP 处理器线程。

## JNI代码调查

鉴于通用消息，我假设`EINVAL`必须从 socketAccept JNI 代码中的系统调用之一返回错误，因此我跟踪导致异常的系统调用；任何系统调用都没有`EINVAL`返回。`EINVAL`所以，我去 OpenJDK 的源代码寻找socketAccept代码`errno`中的条件，这些条件会设置然后抛出一个默认错误信息。`EINVAL``NET_ThrowByNameWithLastError``NET_ThrowCurrent``NET_ThrowNew`

就系统调用而言，我们似乎还没有达到接受系统调用的程度：

```
 PID/THRD        RELATIVE   ELAPSD    CPU SYSCALL(args)    = return
 6606/0x2c750d:  221538243       5      0 sigprocmask(0x1, 0x0, 0x14D8BE100)    = 0x0 0
 6606/0x2c750d:  221538244       3      0 sigaltstack(0x0, 0x14D8BE0F0, 0x0)     = 0 0
 6606/0x2c750d:  221538836      14     10 socket(0x2, 0x1, 0x0)    = 1170 0
 6606/0x2c750d:  221538837       3      0 fcntl(0x492, 0x3, 0x4)     = 2 0
 6606/0x2c750d:  221538839       3      1 fcntl(0x492, 0x4, 0x6)     = 0 0
 6606/0x2c750d:  221538842       5      2 setsockopt(0x492, 0xFFFF, 0x4)     = 0 0
 6606/0x2c750d:  221538852       7      4 bind(0x492, 0x14D8BE5D8, 0x10)     = 0 0
 6606/0x2c750d:  221538857       5      2 listen(0x492, 0x1, 0x4)    = 0 0
 6606/0x2c750d:  221539625       6      2 psynch_cvsignal(0x7FEFBFE00868, 0x10000000200, 0x100)    = 257 0
 6606/0x2c750d:  221539633       4      1 write(0x2, "Apr 18, 2013 11:05:35 AM org.apache.catalina.core.StandardServer await\nSEVERE: StandardServer.await: accept: \njava.net.SocketException: Invalid argument\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\n\tat java.net.PlainSocketImpl.socketAcce", 0x644)    = 1604 0 
```

所以，我*认为*问题出现在接受循环顶部的超时处理代码中`socketAccept`，但我找不到任何`NET_Timeout`设置`errno`为的情况`EINVAL`，并导致抛出此 SocketException。我指的是这段代码；我假设 jdk7u 分支大部分是 Oracle JDK 中附带的：

*   [http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/d4bf5c15837c/src/solaris/native/java/net/PlainSocketImpl.c](http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/d4bf5c15837c/src/solaris/native/java/net/PlainSocketImpl.c)
*   [http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/d4bf5c15837c/src/solaris/native/java/net/bsd_close.c](http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/d4bf5c15837c/src/solaris/native/java/net/bsd_close.c)
*   [http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/d4bf5c15837c/src/solaris/native/java/net/net_util_md.c](http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/d4bf5c15837c/src/solaris/native/java/net/net_util_md.c)

## 帮助！

我在 Mac OS 上找不到受此特定问题影响的外界任何人，但几乎这里的每个人都受到影响。一定有一些应用程序配置起作用，但我已经用尽了所有我能想到的方法来找到根本原因。

非常感谢有关故障排除或可能原因的见解的指针。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-03T06:20:21.670

您是否尝试过打开[JNI 调试](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/topic/com.ibm.java.lnx.70.doc/diag/understanding/jni_debug.html)`-Xcheck:jni`？有趣的是，[Oracle 文档](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/clopts.html#gbmtq)以`PlainSocketImpl.socketAccept`错误为例说明何时使用它。

另请注意，[错误 7131399](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7131399)的含义是由于 Mac 上的问题，JNI`poll()`在大多数平台上使用，但`select()`在 Mac OS`poll()`上使用。所以也许`select()`也坏了。再深入一点，如果“ndfs 大于 FD_SETSIZE 并且 _DARWIN_UNLIMITED_SELECT 未定义”，则 select() 将返回 EINVAL。FD_SETSIZE 是 1024，听起来你有大量的应用程序正在加载，所以也许它都过滤到一次等待超过 1024 个 FD。

为了获得额外的荣誉，请查看[相关的（据称已修复的）Java 错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7129798)是否实际上已在您的计算机上修复。错误报告有指向测试用例的指针。

* * *

感谢 Old Pro 的回答，我确认`select()`FD_SETSIZE 限制是原因。我为这个限制找到了一个现有的错误：

[https://bugs.openjdk.java.net/browse/JDK-8021820](https://bugs.openjdk.java.net/browse/JDK-8021820)

可以使用以下代码重现该问题：

```
import java.io.*;
import java.net.*;

public class SelectTest {
  public static void main(String[] args) throws Exception {
    // Use 1024 file descriptors. There'll already be some in use, obviously, but this guarantees the problem will occur
    for(int i = 0; i < 1024; i++) {
      new FileInputStream("/dev/null");
    }
    ServerSocket socket = new ServerSocket(8080);
    socket.accept();
  }
} 
```

差不多一年后，Java 7u60 修复了这个问题：

[http://www.oracle.com/technetwork/java/javase/2col/7u60-bugfixes-2202029.html](http://www.oracle.com/technetwork/java/javase/2col/7u60-bugfixes-2202029.html)

我还发现 Tomcat 的 WebappClassLoader 会在 90 秒后关闭文件句柄，这就解释了为什么设置断点会阻止问题的发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T06:55:56.090

我遇到了完全相同的问题（使用 Tomcat7），当我在 Eclipse 中运行 tomcat 时，似乎对我有用的是勾选“发布模块上下文以分隔 XML 文件”选项。你已经试过了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T22:14:51.003

获取带有修复程序的 OpenJDK：

[http://www.java.net/download/jdk7u60/archive/b15/binaries/jdk-7u60-ea-bin-b15-macosx-x86_64-16_apr_2014.dmg](http://www.java.net/download/jdk7u60/archive/b15/binaries/jdk-7u60-ea-bin-b15-macosx-x86_64-16_apr_2014.dmg)

为我工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T13:18:09.360

我一直在另一个背景下与这个问题作斗争。从不同来源组合的解决方案如下所示：

*   使用下一个覆盖更新 /etc/hosts：
    *   ::1 EWD-MacBook-Pro.local
    *   127.0.0.1 EWD-MacBook-Pro.local 本地主机

（EWD-MacBook-Pro.local 是我的机器名）

***和***

*   设置系统属性：
    *   java.net.preferIPv4Stack => true
    *   java.net.preferIPv6Addresses => false

祝你好运！

# sql-server - 在 SQL Server 中自动填充二进制列

> ID：16191239
> 
> 赞同：0
> 
> 时间：2013-04-24T11:49:05.597
> 
> 标签：sql-server

我有一个结构如下的表：

```
CREATE TABLE tb_comm_hist_xfer (
        tb_comm_hist_xfer_id binary(16) NOT NULL,
        tb_old_customer_id int NOT NULL,
        tb_customer_id int NULL,
        date_entered datetime NOT NULL
    ); 
```

我想将`tb_com_hist_xfer_id`列作为自动填充的列，如`IDENTITY`属性。但我不能`IDENTITY`用于二进制类型。我有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:59:12.677

试试这个：

```
CREATE TABLE tb_comm_hist_xfer (
        tb_comm_hist_xfer_id binary(50) default CONVERT(varbinary(50),NEWID()) NOT NULL,
        tb_old_customer_id int NOT NULL,
        tb_customer_id int NULL,
        date_entered datetime NOT NULL
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:03:42.250

你确定你不想用`uniqueidentifier`吗？

```
CREATE TABLE tb_comm_hist_xfer (
        tb_comm_hist_xfer_id uniqueidentifier default newid() NOT NULL,
        tb_old_customer_id int NOT NULL,
        tb_customer_id int NULL,
        date_entered datetime NOT NULL
    );
GO

insert into tb_comm_hist_xfer (tb_old_customer_id, tb_customer_id, date_entered) values (1, 2, getdate())

select cast(tb_comm_hist_xfer_id as binary(16)), * from tb_comm_hist_xfer 
```

# html - Kinetic js拖放，调整大小和旋转图像

> ID：16191247
> 
> 赞同：41
> 
> 时间：2013-04-24T11:49:30.510
> 
> 标签：html, kineticjs, image-resizing, image-rotation

我正在尝试在触摸时结合[拖放调整大小图像](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)和[旋转图像](http://jsfiddle.net/zk9cn/)，而我的行为很奇怪[http://jsfiddle.net/littlechad/Kuaxn/](http://jsfiddle.net/littlechad/Kuaxn/)

我的代码如下：

```
function update (activeAnchor) {
    var group       = activeAnchor.getParent();
    var topLeft     = group.get('.topLeft')[0];
    var topRight    = group.get('.topRight')[0];
    var bottomRight = group.get('.bottomRight')[0];
    var bottomLeft  = group.get('.bottomLeft')[0];
    var image       = group.get('.image')[0];
    var stage       = group.getStage();

    var anchorX     = activeAnchor.getX();
    var anchorY     = activeAnchor.getY();

    // update anchor positions
    switch (activeAnchor.getName()) {
        case 'topLeft':
            topRight.setY(anchorY);
            bottomLeft.setX(anchorX);
            break;
        case 'topRight':
            topLeft.setY(anchorY);
            bottomRight.setX(anchorX);
            break;
        case 'bottomRight':
            bottomLeft.setY(anchorY);
            topRight.setX(anchorX); 
            break;
        case 'bottomLeft':
            bottomRight.setY(anchorY);
            topLeft.setX(anchorX); 
            break;
    }

    image.setPosition(topLeft.getPosition());

    var height          = bottomLeft.attrs.y - topLeft.attrs.y;
    var width           = image.getWidth()*height/image.getHeight();

    topRight.attrs.x    = topLeft.attrs.x + width
    topRight.attrs.y    = topLeft.attrs.y;
    bottomRight.attrs.x = topLeft.attrs.x + width;
    bottomRight.attrs.y = topLeft.attrs.y + height;

    if (width && height) {
        image.setSize(width, height);
    }
}

function rotate (activeAnchor) {
    var group       = activeAnchor.getParent();
    var topLeft     = group.get('.topLeft')[0];
    var topRight    = group.get('.topRight')[0];
    var bottomRight = group.get('.bottomRight')[0];
    var bottomLeft  = group.get('.bottomLeft')[0];
    var image       = group.get('.image')[0];
    var stage       = group.getStage();

    var pos         = stage.getMousePosition();
    var xd          = 150 - pos.x ;
    var yd          = 150 - pos.y ;
    var theta       = Math.atan2(yd, xd);
    var degree      = theta / (Math.PI / 180) - 45;

    var height      = bottomLeft.attrs.y - topLeft.attrs.y;
    var width       = image.getWidth() * height / image.getHeight();

    console.log(degree);        
    console.log(width);
    console.log(height);

    image.setRotationDeg(degree);

    return {
        x: image.getAbsolutePosition().x,
        y: image.getAbsolutePosition().y
    }
}

function addAnchor (group, x, y, name) {
    var stage  = group.getStage();
    var layer  = group.getLayer();
    var anchor = new Kinetic.Circle({
        x: x,
        y: y,
        stroke: 'transparent',
        strokeWidth: 0,
        radius: 20,
        name: name,
        draggable: false,
        dragOnTop: false
    });

    if(name === 'topRight'){
        var anchor = new Kinetic.Circle({
            x: x,
            y: y,
            stroke: '#666',
            fill: '#ddd',
            strokeWidth: 2,
            radius: 20,
            name: name,
            draggable: true,
            dragOnTop: false
        }); 
    }

    anchor.on('dragmove', function () {
        update(this);
        rotate(this);
        layer.draw();
    });

    anchor.on('mousedown touchstart', function () {
        group.setDraggable(false);
        this.moveToTop();
    });

    anchor.on('dragend', function () {
        group.setDraggable(true);
        layer.draw();
    });

    group.add(anchor);

}    

function initStage () {

    var stage = new Kinetic.Stage({
        container: 'container',
        width: 500,
        height: 800
    });

    var imageGroup = new Kinetic.Group({
        x: 150,
        y: 150,
        draggable: true,
    });

    var layer  = new Kinetic.Layer({
        width: 128,
        height: 128,
        offset: [64, 64]
    });

    layer.add(imageGroup);

    var imgObj        = new Image();

    var imageInstance = new Kinetic.Image({
        x: 0,
        y: 0,
        image: imgObj,
        width: 200,
        height: 138,
        name: 'image',
    });

    imgObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';

    imageGroup.add(imageInstance);
    addAnchor(imageGroup, 0, 0, 'topLeft');
    addAnchor(imageGroup, 200, 0, 'topRight');
    addAnchor(imageGroup, 200, 138, 'bottomRight');
    addAnchor(imageGroup, 0, 138, 'bottomLeft');

    imageGroup.on('dragstart', function() {
        update(this);
        rotate(this);
        this.moveToTop();
    });

    stage.add(layer);
    stage.draw();
}

function writeMessage (messageLayer, message) {
    var context = messageLayer.getContext();
    messageLayer.clear();
    context.font = '18pt Calibri';
    context.fillStyle = 'black';
    context.fillText(message, 10, 25);
}

//loadImages(sources, initStage);
initStage(); 
```

似乎更新偏移量是问题，我已经尝试了几件事来设置偏移量，使其保持在中间，但我仍然无法弄清楚如何，我真的是新手`HTML5`，`KineticJs`请帮助我。

**更新**：

[由于新浏览器上的 fillColor 损坏，](https://github.com/ericdrowell/KineticJS/issues/244)上述小提琴不再起作用，我已经[更新了小提琴](http://jsfiddle.net/littlechad/Kuaxn/44/)，尽管我无法找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-08T00:44:27.267

您非常接近，只是使用了一些不正确的方法名称，并且如前所述，cdn 需要更改。

```
function update(activeAnchor) {
var group       = activeAnchor.getParent();
var topLeft     = group.get('.topLeft')[0];
var topRight    = group.get('.topRight')[0];
var bottomRight = group.get('.bottomRight')[0];
var bottomLeft  = group.get('.bottomLeft')[0];
var image       = group.get('.image')[0];
var stage       = group.getStage();

var anchorX = activeAnchor.getX();
var anchorY = activeAnchor.getY();

switch (activeAnchor.getName()) {
    case 'topLeft':
        topRight.setY(anchorY);
        bottomLeft.setX(anchorX);
        break;
    case 'topRight':
        topLeft.setY(anchorY);
        bottomRight.setX(anchorX);
        break;
    case 'bottomRight':
        bottomLeft.setY(anchorY);
        topRight.setX(anchorX); 
        break;
    case 'bottomLeft':
        bottomRight.setY(anchorY);
        topLeft.setX(anchorX); 
        break;
}
image.setPosition(topLeft.getPosition());

var height = bottomLeft.attrs.y - topLeft.attrs.y;
var width  = image.getWidth()*height/image.getHeight();

topRight.attrs.x = topLeft.attrs.x + width
topRight.attrs.y = topLeft.attrs.y;
bottomRight.attrs.x = topLeft.attrs.x + width;
bottomRight.attrs.y = topLeft.attrs.y + height;

if(width && height) {
    image.setSize(width, height);
}
}

function rotate(activeAnchor){
var group       = activeAnchor.getParent();
var topLeft     = group.get('.topLeft')[0];
var topRight    = group.get('.topRight')[0];
var bottomRight = group.get('.bottomRight')[0];
var bottomLeft  = group.get('.bottomLeft')[0];
var image       = group.get('.image')[0];
var stage       = group.getStage();

var pos     = stage.getPointerPosition();
var xd      = 150 - pos.x ;
var yd      = 150 - pos.y ;
var theta   = Math.atan2(yd, xd);
var degree  = theta / (Math.PI / 180) - 45;

var height  = bottomLeft.attrs.y - topLeft.attrs.y;
var width   = image.getWidth()*height/image.getHeight();

console.log(degree);

console.log(width);
console.log(height);
image.setRotationDeg(degree);
return {
    x: image.getAbsolutePosition().x,
    y: image.getAbsolutePosition().y
}
}

function addAnchor(group, x, y, name) {
var stage = group.getStage();
var layer = group.getLayer();
var anchor = new Kinetic.Circle({
    x: x,
    y: y,
    stroke: '#fff',
    fill: '#fff',
    strokeWidth: 2,
    radius: 20,
    name: name,
    draggable: false,
    dragOnTop: false
});

if(name === 'topRight'){
    var anchor = new Kinetic.Circle({
      x: x,
      y: y,
      stroke: '#666',
      fill: '#ddd',
      strokeWidth: 2,
      radius: 20,
      name: name,
      draggable: true,
      dragOnTop: false
    });
}
anchor.on('dragmove', function() {
    update(this);
    rotate(this);
    layer.draw();
});
anchor.on('mousedown touchstart', function() {
    group.setDraggable(false);
    this.moveToTop();
});
anchor.on('dragend', function() {
    group.setDraggable(true);
    layer.draw();
});
group.add(anchor);
}

function initStage() {          
var stage = new Kinetic.Stage({
    container: 'container',
    width: 500,
    height: 800
});

var imageGroup = new Kinetic.Group({
    x: 150,
    y: 150,
    draggable: true,
});

var layer  = new Kinetic.Layer({
    width: 128,
    height: 128,
    offset: [64, 64]
});
layer.add(imageGroup);

var imgObj        = new Image();
var imageInstance = new Kinetic.Image({
    x: 0,
    y: 0,
    image: imgObj,
    width: 200,
    height: 138,
    name: 'image',
});
imgObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-
vader.jpg';

imageGroup.add(imageInstance);
addAnchor(imageGroup, 0, 0, 'topLeft');
addAnchor(imageGroup, 200, 0, 'topRight');
addAnchor(imageGroup, 200, 138, 'bottomRight');
addAnchor(imageGroup, 0, 138, 'bottomLeft');

imageGroup.on('dragstart', function() {
    update(this);
    rotate(this);
    this.moveToTop();
});

stage.add(layer);
stage.draw();
}

function writeMessage(messageLayer, message) {
var context = messageLayer.getContext();
messageLayer.clear();
context.font = '18pt Calibri';
context.fillStyle = 'black';
context.fillText(message, 10, 25);
}

loadImages(sources, initStage);
initStage(); 
```

# php - preg_replace - 替换某些字符

> ID：16191254
> 
> 赞同：0
> 
> 时间：2013-04-24T11:49:56.503
> 
> 标签：php, preg-replace

我想：他有 XXX 有过。或者：他必须要XXX才行。

```
$string = "He had had to have had it.";
echo preg_replace('/had/', 'XXX', $string, 1); 
```

输出 ：

> 他XXX必须拥有它。

在这种情况下，'had'被替换为第一个。

我想使用第二个和第三个。不从右侧或左侧读取，“preg_replace”可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:56:26.040

试试这个：

```
 <?php
function my_replace($srch, $replace, $subject, $skip=1){
    $subject = explode($srch, $subject.' ', $skip+1);
    $subject[$skip] = str_replace($srch, $replace, $subject[$skip]);
    while (($tmp = array_pop($subject)) == '');
    $subject[]=$tmp;
    return implode($srch, $subject);
}
$test ="He had had to have had it.";;
echo my_replace('had', 'xxx', $test);
echo "<br />\n";
echo my_replace('had', 'xxx', $test, 2);
?> 
```

看看[CodeFiddle](http://codepad.viper-7.com/neAn9Z)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:01:00.960

```
$string = "He had had to have had it.";
$replace = 'XXX';
$counter = 0;  // Initialise counter
$entry = 2;    // The "found" occurrence to replace (starting from 1)

echo preg_replace_callback(
    '/had/',
    function ($matches) use ($replace, &$counter, $entry) {
        return (++$counter == $entry) ? $replace : $matches[0];
    },
    $string
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:08:04.037

试试这个

**解决方案**

```
function generate_patterns($string, $find, $replace) {

// Make single statement
// Replace whitespace characters with a single space
$string = preg_replace('/\s+/', ' ', $string);

// Count no of patterns
$count = substr_count($string, $find);

// Array of result patterns
$solutionArray = array();

// Require for substr_replace
$findLength = strlen($find);

// Hold index for next replacement
$lastIndex = -1;

  // Generate all patterns
  for ( $i = 0; $i < $count ; $i++ ) {

    // Find next word index
    $lastIndex = strpos($string, $find, $lastIndex+1);

    array_push( $solutionArray , substr_replace($string, $replace, $lastIndex, $findLength));
  }

return $solutionArray;
}

$string = "He had had to have had it.";

$find = "had";
$replace = "yz";

$solutionArray = generate_patterns($string, $find, $replace);

print_r ($solutionArray); 
```

**输出 ：**

```
Array
(
    [0] => He yz had to have had it.
    [1] => He had yz to have had it.
    [2] => He had had to have yz it.
) 
```

**我管理这段代码尝试优化它。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:08:19.843

可能不会因此赢得任何优雅，但很短：

```
$string = "He had had to have had it.";
echo strrev(preg_replace('/dah/', 'XXX', strrev($string), 1)); 
```

# android - 拉伸以填充 VideoView，VideoView 的纵横比

> ID：16191262
> 
> 赞同：19
> 
> 时间：2013-04-24T11:50:20.137
> 
> 标签：android, android-videoview, aspect-ratio

我尝试拉伸视频以填充视频视图。目标是创建在设备中看起来像第一张图片的视图（就像它在布局预览中的样子）。

这个问题的大部分答案都参考[这个链接](http://blog.kasenlam.com/2012/02/android-how-to-stretch-video-to-fill.html)。

我试过了，但我仍然没有填充视频视图。

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/search_gren_screen">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/go_back"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:onClick="onclick"
            android:text="Try again" />

        <Button
            android:id="@+id/back_to_pick_song"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Select another song" 
            android:onClick="onclick" />

        <Button
            android:id="@+id/btn_continue"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:onClick="onclick"
            android:text="Amazing, continue!" />
    </LinearLayout>

    <FrameLayout 
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">
    <VideoView 
        android:id="@+id/videoView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_gravity="center" />
    </FrameLayout>
</LinearLayout> 
```

在这里，您可以预览我声明的布局：

![在此处输入图像描述](https://i.stack.imgur.com/batJo.png)

但是，设备上的结果是不同的：

![在此处输入图像描述](https://i.stack.imgur.com/wlN8t.png)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-24T12:00:11.627

尝试使您的外部布局成为相对布局并将 VideoView 放在其中。

就像是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/trim_container"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

     <LinearLayout
          android:id="@+id/buttonContainer"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:orientation="horizontal" >

     <Button
          android:id="@+id/go_back"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:layout_gravity="center"  
          android:layout_weight="1"
          android:onClick="onclick"
          android:text="Try again" />

     <Button
          android:id="@+id/back_to_pick_song"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:layout_weight="1"
          android:text="Select another song" 
          android:onClick="onclick" />

    <Button
          android:id="@+id/btn_continue"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_gravity="center"
          android:layout_weight="1"
          android:onClick="onclick"
          android:text="Amazing, continue!" />
  </LinearLayout>

  <VideoView
     android:id="@+id/VideoView"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:layout_alignParentLeft="true"
     android:layout_alignParentRight="true"
     android:layout_alignParentBottom="true"
     android:layout_below="@id/buttonContainer"/>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-11T05:56:30.843

视频视图应该在相对布局的内部。这是下面给出的示例。就我而言，它与全屏按钮一起工作得很好。

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="3"
            android:id="@+id/videoVIewLinId"
            android:layout_gravity="center"
            android:gravity="center"
            android:scaleType="fitXY"

            >
                <VideoView
                    android:layout_alignParentTop="true"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentEnd="true"
                    android:layout_alignParentStart="true"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:id="@+id/videoViewId"
                    />

                <ImageView
                    android:id="@+id/fullScreenBtnIdOnlineMedia"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/ic_action_full_screen"
                    android:layout_alignParentEnd="true"
                    android:layout_alignParentBottom="true"
                    android:layout_marginEnd="10dp"

                    />

        </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-17T17:43:48.240

该`fill_parent`方法对我不起作用。

最后我使用了这个库，效果很好！

[https://github.com/dmytrodanylyk/video-crop](https://github.com/dmytrodanylyk/video-crop)

# ios - Xcode：未在日历中创建事件：时区问题？

> ID：16191270
> 
> 赞同：0
> 
> 时间：2013-04-24T11:50:30.693
> 
> 标签：ios, ios6, calendar, xcode4.5, eventkit

dd我在 Native CALENDAR 中创建事件时遇到问题，当我传递**event.startDate**除了当前时间戳之外的任何内容时......还有**event.endDate**不能使用不同的值，如下所示..

```
- (void)createEventInCalendar:(NSString *)calendarType withTitle:(NSString *)eventTitle startDate:(NSString *)stDate endDate:(NSString *)endDATE withNotes:(NSString *)paramNotes addAlarm:(BOOL)alarmNeeded {

EKEventStore *eventStore = [[EKEventStore alloc] init];

/* Are there any calendars available to the event store? */
if ([eventStore.calendars count] == 0){
    NSLog(@"No calendars are found.");
}

EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title     = [NSString stringWithFormat:@"%@ with Alarm", eventTitle];

//Convert String to DATE
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:SS"];

NSDate* date1 = [dateFormat dateFromString:stDate];
NSDate* date2 = [dateFormat dateFromString:endDATE];
//get Difference betwenn 2 DATE Values
NSTimeInterval distanceBetweenDates = [date1 timeIntervalSinceDate:date2];

event.startDate = date1;
event.endDate   = [date1 initWithTimeInterval:distanceBetweenDates sinceDate:event.startDate];
event.notes = paramNotes;

/* The alarm goes off 2 seconds before the event happens */
EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:-2.0f];

[event addAlarm:alarm];

[event setCalendar:[eventStore defaultCalendarForNewEvents]];
NSError *err;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err];
NSLog(@"Error shows: %@", err);

//Show EVENT EDIT Screen to User.
EKEventEditViewController *controller = [[EKEventEditViewController alloc] init];

controller.eventStore       = eventStore;
controller.event            = event;
controller.editViewDelegate = self;

[self presentModalViewController:controller animated:YES];

} 
```

### 调试后：Error Domain=EKErrorDomain Code=4 "开始日期必须早于结束日期。" UserInfo=0x223170 {NSLocalizedDescription=开始日期必须早于结束日期。}

我的日志在哪里：ST 日期：2013-04-25 07:50:00 和结束日期：2013-04-29 07:50:00

但 EVENT EDIT View 在 START DATE 之前的某个时间显示 END DATE 值。这很奇怪。

谁能指导我如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:23:50.987

问题解决了：

一个简单的错误：

```
//get Difference betwenn 2 DATE Values
NSTimeInterval distanceBetweenDates = [date1 timeIntervalSinceDate:date2]; 
```

它应该是

```
//get Difference betwenn 2 DATE Values
NSTimeInterval distanceBetweenDates = [date2 timeIntervalSinceDate:date1]; 
```

谢谢。

# iphone - 页面加载时如何在按钮标题上显示国家名称和州名

> ID：16191272
> 
> 赞同：1
> 
> 时间：2013-04-24T11:50:45.520
> 
> 标签：iphone, ios, nsmutablearray, nsdictionary, nsmutableurlrequest

我的问题是，当用户按下登录按钮时，他正在登录您的帐户，然后他选择更新用户配置文件单击所有默认数据已显示并编辑该数据。

我的响应字符串如下所示。

```
Response =     {
                    city = Rajkot;
                    "country_id" = 88;
                    dob = "1921-07-12";
                    gender = M;
                    "state_id" = 1371;
                    "user_id" = 22;
                     username = xyz;
                }; 
```

我的 viewDidLoad 代码* *****

```
NSURLResponse *response;

NSData *POSTReply = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:nil];

NSString *theReply = [[NSString alloc] initWithBytes:[POSTReply bytes] length:[POSTReply length] encoding: NSASCIIStringEncoding];

NSLog(@"Reply: %@", theReply);

NSDictionary* dict = [[NSDictionary alloc] initWithObjects:[[NSArray alloc]initWithObjects:userid, nil] forKeys:[[NSArray alloc]initWithObjects:@"Userid", nil]];

NSDictionary* dictMain = [[NSDictionary alloc] initWithObjects:[[NSArray alloc]initWithObjects:@"User",@"getUserProfileDetails",dict,nil] forKeys:[[NSArray alloc]initWithObjects:@"Controller",@"Action",@"Arguments",nil]];

NSString *postString = [NSString stringWithFormat: @"%@",[dictMain JSONRepresentation]] ;

[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

城市，出生日期，性别，用户名显示正确。但是如何使用他们的 id 来显示 statename 和 countryname 呢？我已经在 viewDidLoad 中发送了请求。加载此页面时，用户还可以在该字段上编辑其值。

所以我的问题是在页面加载时显示州名和国家名......

# macos - os X上的Cocoa WebView不会触发鼠标悬停事件而无需单击并按住鼠标左键

> ID：16191279
> 
> 赞同：1
> 
> 时间：2013-04-24T11:51:04.780
> 
> 标签：macos, cocoa, webview, focus, mousemove

我是 Mac 开发的新手，正在尝试使用 QMacCocoaViewContainer 结合使用 Cocoa WebView。我有使用多个 css 和 javascript 文件加载我的 html 文件的视图，但我遇到的问题是当用户将鼠标移到视图上时不会触发鼠标悬停事件。

我已经确定，如果用户单击并按住鼠标左键并移动鼠标，则会触发事件。我猜这是一个焦点问题，但没有成功解决这个问题。任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T23:16:28.287

[我在 SO: Event issue when embed cocoa webview to QT application](https://stackoverflow.com/questions/16143937/event-issue-when-embed-cocoa-webview-to-qt-application)上发现了一个类似的问题，它有一个草图的答案。我可以确认该答案中的解决方案有效，但只是暗示。这是我所做的：

1.  在您的应用程序中重新实现 QApplication::macEventFilter()
2.  通过执行禁用您的应用程序或仅 QMacNativeCocoaWidget 的 Alien 小部件

    ```
    setAttribute(Qt::WA_PaintOnScreen) 
    ```

3.  在 macEventFilter() 中，检查事件是否为 MouseMove 事件：

    ```
    NSEvent *e = reinterpret_cast<NSEvent *>(event);
    if ([e type] == NSMouseMoved) 
    ```

4.  如果是这样，请检查坐标是否在您拥有的 WebView 的范围内，然后将 MouseMoved 通知发布到通知中心：

    ```
    [[NSNotificationCenter defaultCenter]
              postNotificationName:@"NSMouseMovedNotification" object:nil
              userInfo:[NSDictionary dictionaryWithObject:e forKey:@"NSEvent"]]; 
    ```

当检查事件的位置是否在您的 WebView 中时，请记住 Cocoa 坐标的原点位于底部，而在 Qt 中 (0, 0) 位于左上角！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T10:50:19.797

就我而言，我使用的是带有 NSPanel 和嵌入式 WebView 的本机应用程序。即使单击元素（按钮），也不会发送悬停事件。我通过覆盖 NSPanel 类的以下方法解决了这个问题：

```
- (BOOL)canBecomeKeyWindow 
{

    return YES;
}

- (BOOL)isMainWindow 
{

    return YES;
}

- (BOOL)isKeyWindow 
{

    return ([NSApp isActive]) ? YES : [super isKeyWindow];
} 
```

[在没有关键窗口状态的 NSPanel 第一响应者中制作 NSView](https://stackoverflow.com/questions/4916100/make-nsview-in-nspanel-first-responder-without-key-window-status)

# php - 无法访问不同服务器上的会话变量

> ID：16191282
> 
> 赞同：12
> 
> 时间：2013-04-24T11:51:22.670
> 
> 标签：php, apache, memcached

我有专门的服务器来维护 Memcached 和存储会话，这样我的所有服务器都可以毫无困难地在同一个会话上工作。

但不知何故，我想我可能误解了 Memcached 关于 PHP 会话的可能性的含义。

我认为我可以站在 Apache 1 上`a.domain.com`并创建一个会话，例如`$_SESSION['test'] = "This string is saved in the session"`然后转到 Apache 2`b.domain.com`或`c.domain.com`简单地继续会话并键入`echo $_SESSION['test'];`它会输出字符串。

没有，但我确信有人告诉我，如果您有多个网络服务器来共享同一个会话，memcached 将是一个很棒的工具。

我做错了什么？

![在此处输入图像描述](https://i.stack.imgur.com/Q2CdK.jpg)

顺便一提。我们非常需要一个完整详细的教程或电子书来描述如何基于 Memcached 设置服务器、使用 php、构建集群等。

在我的 php.ini 文件中它说：

`session.save_path = "192.168.100.228:11211"`

教程告诉我不要定义协议，ip地址已经给了`Apache 3`-memcached Server

这是 phpinfo() 的图像 ![在此处输入图像描述](https://i.stack.imgur.com/uLb0r.png)

中的域`session.cookie_domain`没有被调用`domain`，但它是一个`.local`. 此图像已更改。

**编辑：**

仅供参考。当我使用一个简单的基于 Memcached 的 PHP 命令时 - 一切正常。但不知何故，当我试图保存会话时，memcached 服务器不存储该项目。

这有效：

```
<?php
$m = new Memcached();
$m->addServer('192.168.100.228', 11211);

$m->set('int', 99);
$m->set('string', 'a simple string');
$m->set('array', array(11, 12));
/* expire 'object' key in 5 minutes */
$m->set('object', new stdclass, time() + 300);

var_dump($m->get('int'));
var_dump($m->get('string'));
var_dump($m->get('array'));
var_dump($m->get('object'));
?> 
```

这不起作用

```
<?php
session_start();
$_SESSION['name'] = "This is a simple string.";
?> 
```

**编辑 2：解决方案**

我注意到在删除缓存历史记录（包括 cookie 等）后，浏览器没有完成这项工作。问题仍然存在，因为它挂在原始的单个会话 ID 上，这使得每个子域彼此分离。

此处定义的所有内容都是正确的，只需确保您的浏览器在您要求时重置其 cookie。>.<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:08:42.977

默认情况下（会话）cookie 是特定于域的，因此请在 php.ini 中设置 cookie 域

```
session.cookie_domain = ".domain.com" 
```

另请参阅此处 [允许 php 会话转移到子域](https://stackoverflow.com/questions/644920/allow-php-sessions-to-carry-over-to-subdomains)

确保在进行更改后重新启动您的网络服务器并清除所有浏览器 cookie。如果您的 cookie 名称相同但子域不同，您的浏览器可能会感到困惑。

其他要检查的事项：

会话在每个单独的服务器上都可以正常工作。

如果您正在使用大型代码库，尤其是继承/第 3 方的东西，则使用 phpinfo() 确保会话处理程序设置正确，可能会有一些东西覆盖它。

如果您使用的是第 3 方代码——例如 phpbb——请检查其中的 cookie 设置是否正确。

**（请注意整理此答案以消除头脑风暴，保留所有相关信息）**

# ios - 使用 presentViewController 后找不到现有的 segues

> ID：16191284
> 
> 赞同：0
> 
> 时间：2013-04-24T11:51:39.483
> 
> 标签：ios, objective-c, uiviewcontroller, segue

我正在使用下面的代码返回我的登录视图。视图加载正确，一切看起来都很好。所有按钮工作等。

```
JALoginViewController *loginVC = [[JALoginViewController alloc] init];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:loginVC];

navigationController.modalPresentationStyle = UIModalPresentationFormSheet;
[self.navigationController presentModalViewController:navigationController animated:YES]; 
```

但是，如果用户尝试再次登录，则无法找到将他们带到下一个场景的 segue。

如果用户登录凭据正确，我将使用 performSegueWithIdentifier，如下所示：

```
[self performSegueWithIdentifier:@"loginSegue" sender:self]; 
```

这是我收到的错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<JALoginViewController: 0x8d614b0>) has no segue with identifier 'loginSegue'' 
```

我在谷歌上做了很多搜索，并通过文档寻找解决方案，我拥有的壁橱（至少我认为）就是[这个问题](https://stackoverflow.com/questions/14417370/pop-to-root-then-perform-segue-on-iphone)。解释和解决方案听起来可能是正确且相关的，但我无法将它们付诸实践。

我阅读并尝试过的文件：

[initWithRootViewController](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)

[popToRootViewController](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html) - 当前的根视图控制器用于选项卡栏 - 不是我需要的登录场景，据我所知我不能使用它。

[弹出视图控件](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)

[pushViewControl](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html) - 这有效，但我认为这不是正确的方法。我不希望有导航栏，也不希望在用户返回登录场景时出现我的标签栏。

我尝试了各种有限/无效的方法。在这个阶段，任何帮助将不胜感激。

如果我没有提供足够的信息，请告诉我。

谢谢

JA

编辑 - 故事板的缩小图像

![故事板的缩小图像][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:00:47.963

根据修改后问题的屏幕快照，从最右边的红色突出显示的场景中，您应该能够：

```
[self.tabBarController dismissViewControllerAnimated:YES completion:nil]; 
```

你会回到那个初始屏幕（我假设你从初始屏幕到你的标签栏控制器做了模态segue）。

* * *

原答案：

如果您想手动推送到视图控制器，而不是通过`alloc`/创建它`init`，您应该使用

```
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"loginsSceneStoryboardIdHere"]; 
```

或者，如果该视图控制器是“初始”场景（简单箭头从左侧进入的场景），您可以使用

```
UIViewController *controller = [self.storyboard instantiateInitialViewController]; 
```

而且您也不应该手动创建导航控制器。如果`loginVC`需要导航控制器，您应该将该场景嵌入到 Interface Builder 中的导航控制器中，然后为该新导航控制器提供自己唯一的故事板标识符，然后您可以

```
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"navControllerSceneStoryboardIdHere"];

[self presentViewController:controller animated:YES completion:nil]; 
```

* * *

我必须承认，我对整个“通过 pushViewController 返回登录”结构感到担心。我假设您知道您不是“返回”它，而是创建它的新副本。如果您将/模态从 A 推到 B，然后将 B 推到 C，然后将 C 推到 A，那么您将在内存中保存 4 个视图及其控制器，A 的两个副本，B 的一个副本和 C 的一个副本（显然，不好）。我只是想确保您没有一组循环的 segue 和/或 push/presentViewController 引用。

如果登录是您应用程序中的初始场景，并且您一直在做推送转场（一路上没有模态转场），您可以执行以下操作：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

这将带你到顶层视图控制器，它会弹出并释放所有介入的场景。

如果您使用的是 iOS 6，您可以使用 unwind segue，它可以实现相同的功能，但它并不关心前面的 segue 是 push 还是 modals。

给猫剥皮的方法有很多种，但通常`presentViewController`对故事板中的第一个场景进行新的处理是一个非常糟糕的主意。

# r - 如何在 R 图中使用乳胶代码？

> ID：16191287
> 
> 赞同：2
> 
> 时间：2013-04-24T11:51:55.787
> 
> 标签：r, plot, latex, label

有没有办法在情节中使用乳胶代码？我有两个向量，例如 a，b。我想创建这样的东西：

`graph <- rbind(a, b)`

```
colnames(pokus) = names(a)

barplot(pokus, beside = TRUE) 
```

但我想更改“colnames（pokus）”，以便不等式在 Latex 中看起来像 - 我必须稍后在乳胶中使用它，它应该看起来不错......我希望有一个简单的解决方案，但它'这是我第一次与 R 合作...

# java - 在数据库中插入空值

> ID：16191296
> 
> 赞同：3
> 
> 时间：2013-04-24T11:52:36.437
> 
> 标签：java, oracle, mybatis

我已经检索了一个`List<SomeBean>`using`select`语句。现在，我也在努力`insert`。这个插入语句工作正常；但是，我无法插入空值。该表没有任何`NOT NULL`约束。引发以下异常：

`org.springframework.jdbc.UncategorizedSQLException: Error setting null for parameter #4 with JdbcType OTHER . Try setting a different JdbcType for this parameter or a different jdbcTypeForNull configuration property. Cause: java.sql.SQLException: Invalid column type`

如何在 mybatis 中插入空值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T11:57:19.247

当在 Prepared Statement 或 Callable Statement 中设置 null 参数时，MyBatis 需要知道 jdbc 类型。像这样：

```
#{myNullParamenter, jdbcType=VARCHAR2} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-21T07:48:38.047

在 MyBatis 的配置文件中插入这一行：

```
<settings>
        <setting name="jdbcTypeForNull" value="NULL" />
</settings> 
```

# jquery - jQuery插件将表格行从一个表移动到另一个表

> ID：16191298
> 
> 赞同：1
> 
> 时间：2013-04-24T11:52:43.677
> 
> 标签：jquery, jquery-ui-sortable, jquery-ui-draggable, jquery-ui-droppable

有谁知道一个 jQuery 插件，我可以在其中将表行从一个表移动到另一个表？我知道可以使用 ConnectedLists 进行排序，但我不想拖动，只需使用方法移动对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:27:18.390

这适用于 jQuery。只需使用

```
tr.appendTo('#otherTable') 
```

或者

```
tr.prepend('otherTR') 
```

# ruby-on-rails - Ruby on Rails 3 如何显示来自数据库的信息

> ID：16191299
> 
> 赞同：0
> 
> 时间：2013-04-24T11:52:48.177
> 
> 标签：ruby-on-rails, activerecord, activeview

我有一个数据库，我想通过按一个按钮从中选择数据。
运行 $ rails c

```
1.9.2p290 :001 >Book.find_by_price("50")
# => #<Book id: 1, price: "50"><Book id: 2, price: "50"><Book id: 3, price: "50"> 
```

在控制台中，他找到了正确的信息，但是如何在视图中显示呢？
我试图在控制器中编写一个方法。

```
books_controller.rb
class BooksController < ApplicationController
  def index
    @books = Book.all
    @metod = Book.find_by_price("50")
  end
 #...
end 
```

然后，在视图中

```
view/books/index.html.erb
<%= link_to @metod %> 
```

但它不起作用。请告诉我它是如何完成的？
我希望在单击视图中的按钮时显示这些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:59:10.967

您可以使用循环从@books 获取所有值

```
@books.each do |book|
  <%= book.name %>
  <%= book.price %>
end 
```

正在做

```
@metod = Book.find_by_price("50") 
```

@metod 是一个实例变量，要访问它，您可以使用 @metod.price

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:05:09.727

如果您使用 ActiveRecord 的动态查找器，`find_by_price`则应返回单个记录。但是在控制台输出中，它返回一个数组，所以我假设您在 Book 模型中手动创建了该方法。如果预期的输出是列出价格为 50 的所有书籍，请在您的视图中使用以下代码。

```
<% @metod.each do |book| %>
  <%= link_to book, book %>
<% end %> 
```

此代码循环浏览每本书`@metod`并显示一个链接，该链接指向`show`其相应控制器的操作。

# smarty - Smarty 一个标签内另一个标签

> ID：16191301
> 
> 赞同：0
> 
> 时间：2013-04-24T11:52:53.843
> 
> 标签：smarty

我想将一些包含 smarty 值的值分配给另一个值，如下所示：

```
{assign var="one" value="hello world {$two}"} 
```

但发生了错误。请帮助如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:00:32.037

我猜你不应该在限制器中使用限制器。

```
{assign var="one" value="hello world $two"} 
```

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:01:41.063

对于这种特殊情况，最简单的解决方案是使用`|cat`修饰符，因为修饰符可以在通常有字符串或变量的任何地方使用。

```
 {assign var=one value="hello "|cat:$two} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:00:19.823

解决

```
{assign var="one" value="hello world $two"} 
```

# c# - 是否可以在 MVC4 区域中具有内容的相对路径？

> ID：16191302
> 
> 赞同：3
> 
> 时间：2013-04-24T11:52:55.730
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

在剃刀视图中，我有以下链接到本地​​化到该区域的 css 文件：

```
 <link href='@Url.Content("~/areas/adminarea/content/area.css")' rel="stylesheet" /> 
```

如果视图已经在该区域中，而不是该区域的完整路径，有什么方法可以相对于该区域实现这一点？

通过链接到以下控制器来呈现索引视图：

```
http://localhost:54443/adminarea/admin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:46:58.137

您可以实现自己的 Helper 方法以在运行时将您的区域本地路径转换为全局路径。

这是一个与解决方案类似的问题： [MVC3 区域中的相对内容路径](https://stackoverflow.com/questions/5130226/relative-content-path-in-mvc3-areas)

# jquery - 我可以将一个项目从一个手风琴拖到另一个手风琴吗？

> ID：16191303
> 
> 赞同：1
> 
> 时间：2013-04-24T11:52:56.270
> 
> 标签：jquery, web, accordion, jquery-ui-accordion

是否可以通过从另一个手风琴拖动项目来将项目添加到手风琴控件？

1.  我创建了一个名为`MainAccordion`
2.  我创造了另一个名为`MenuAccordion`
3.  我想将项目`MenuAccordion`从`MainAccordion`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T12:51:37.573

这是可能的，尽管您可能需要编写一些代码。我为你准备了一个小提琴：http: [//jsfiddle.net/LfaRk/1/](http://jsfiddle.net/LfaRk/1/)

让我们来看看它。HTML 很简单，与 CSS 相同。

JavaScript：

```
$(function () {
    $("#catalog").accordion();
    $("#catalog2").accordion();
    $("#catalog h2").draggable({
        appendTo: "body",
        helper: "clone"
    });
    $("#catalog2").droppable({
        drop: function (event, ui) {
            var content = ui.draggable.next();
            ui.draggable.draggable('disable').appendTo(this);
            content.appendTo(this);
            $("#catalog").accordion('destroy').accordion();
            $("#catalog2").accordion('destroy').accordion();
        }
    });
}); 
```

那我在做什么？

*   我正在初始化 2 个手风琴，使用[`.accordion()`](http://jqueryui.com/accordion/).
*   我正在制作第一个手风琴的标题[draggable](http://jqueryui.com/draggable/)。
*   我正在制作第二个手风琴[droppable](http://jqueryui.com/droppable/)。

（我开始的代码是：http: [//jqueryui.com/droppable/#shopping-cart](http://jqueryui.com/droppable/#shopping-cart)，你也应该检查一下）

让我们看看第二个手风琴的 drop 回调：

```
drop: function (event, ui) {
    var content = ui.draggable.next();
    ui.draggable.draggable('disable').appendTo(this);
    content.appendTo(this);
    $("#catalog").accordion('destroy').accordion();
    $("#catalog2").accordion('destroy').accordion();
} 
```

这里发生了什么？

是当前`ui.draggable`被拖动的 jQuery 包装元素。我需要将它插入到第二个手风琴中。因此我可以调用`ui.draggable.appendto(this)`，但它仍然是可拖动的，所以我也需要使其不可拖动。

我需要用标题移动内容，所以我用: 选择内容，`var content = ui.draggable.next()`然后用: 移动它`content.appendTo(this);`。`this`仍然是可放置的元素（第二个手风琴）。

最后，我需要重新初始化手风琴，以便元素识别它们的位置：

```
$("#catalog").accordion('destroy').accordion();
$("#catalog2").accordion('destroy').accordion(); 
```

它已经准备好了。

如果您想让项目可以前后拖动，您可能需要编写更多代码。此外，如果您希望手风琴可排序，可放置和可排序似乎以有趣的方式交互，因此可能需要进行一些试验。

# c# - C# 在进程内存中搜索字节数组

> ID：16191304
> 
> 赞同：2
> 
> 时间：2013-04-24T11:52:56.693
> 
> 标签：c#, .net, pinvoke, readprocessmemory

我正在为特定应用程序开发一个小内存扫描仪。当我选择要扫描的进程时，我要做的第一件事是验证该进程是否是特定应用程序的实例……为此，我必须找到一个可以在其内存中任何位置的签名。

这是我的代码：

```
[DllImport("Kernel32.dll", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)] 
[return: MarshalAs(UnmanagedType.Bool)] 
internal static extern Boolean ReadProcessMemory([In] IntPtr processHandle, [In] IntPtr processAddress, [Out] Byte[] buffer, [In] UInt32 bytesToRead, [Out] out IntPtr bytesRead); 

[DllImport("Kernel32.dll", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)] 
internal static extern UInt32 VirtualQueryEx([In] IntPtr processHandle, [In, Optional] IntPtr processAddress, [Out] out MEMORY_BASIC_INFORMATION buffer, [In] UInt32 bufferSize); 

internal struct MEMORY_BASIC_INFORMATION 
{ 
    public static UInt32 Size = (UInt32)Marshal.SizeOf(typeof(MEMORY_BASIC_INFORMATION)); 

    public IntPtr BaseAddress; 
    public IntPtr AllocationBase; 
    public AllocationProtect AllocationProtect; 
    public IntPtr RegionSize; 
    public StateEnum State; 
    public AllocationProtect Protect; 
    public TypeEnum lType; 
} 

public void Open() 
{ 
    Byte[] toFind = new Byte[] { 31, 55, 78, 33, 00, 00, 00, 37 }; 
    UInt32 address = 0; 

    do 
    { 
        MEMORY_BASIC_INFORMATION info = new MEMORY_BASIC_INFORMATION();

        if (NativeMethods.VirtualQueryEx(m_Process.Handle, (IntPtr)address, out info, NativeMethods.MemoryBasicInformation.Size) == 0)
            break;

        Byte[] buffer = new Byte[(UInt32)info.RegionSize]; 
        IntPtr bytesRead; 

        if (NativeMethods.ReadProcessMemory(m_Process.Handle, info.BaseAddress, buffer, (UInt32)buffer.Length, out bytesRead)) 
        { 
            if (buffer.Contains(toFind)) // Extension Method 
            {
                m_IsValid = true;
                break;
            }
        }

        if (address == (UInt32)info.BaseAddress + (UInt32)info.RegionSize) 
            break; 

        address = (UInt32)info.BaseAddress + (UInt32)info.RegionSize; 
    } 
    while (address <= 0x7fffffff); 
} 
```

第一个问题是这个方法永远不会完成，它看起来像是在无限循环（昨天我让它运行了一个多小时以进行调试而没有到达终点）。在我的循环中检查 Marshal.GetLastWin32Error() 我注意到有时我`ERROR_PARTIAL_COPY (0x0000012B)`在调用后得到一个`ReadProcessMemory`得到一个......这是可能的原因吗？

然后我也有一些问题：

`OpenProcess`1）在继续扫描循环之前我应该​​打电话吗？我不这么认为，对吧？

2) 我想让我的应用程序同时兼容 x32 和 x64。我应该在我的代码中进行哪些更改以确保它可以在两个系统中正常工作（`address`限制、值类型`address`、强制转换`RegionSize`……）？

3）在扫描进程内存以找到我的目标字节数组时，我是否应该检查 current`MEMORY_BASIC_INFORMATION`的属性（`AllocationProtect`、`State`和`Protect`/或`lType`）以查看我是否可以跳过`ReadProcessMemory`当前区域，因为它不是必需的或者它不能被阅读？

4）我还能做些什么来优化这个方法的速度，这很重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:37:41.623

Oooooooooook 我解决了。问题是我试图在不使用 VirtualQueryEx 并检查内存区域保护的情况下读取它的方式！

# javascript - 在 JavaScript 中扩展导航器对象

> ID：16191311
> 
> 赞同：0
> 
> 时间：2013-04-24T11:53:22.757
> 
> 标签：javascript

我想将自己的对象和函数添加到 JavaScript 的导航器对象。我想写一些类似的东西，我自己的对象`navigator.AAA.BMethod();`在哪里，是要调用的方法。`AAA``BMethod`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:57:55.100

我没有看到这样做的充分理由，无论如何你可以这样做：

```
navigator.AAA = {
    BMethod: function () {
        alert('Hello');
    }
}; 
```

# python - 在 Google App Engine 中将登录用户区分为管理员和普通用户？

> ID：16191318
> 
> 赞同：0
> 
> 时间：2013-04-24T11:53:50.473
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在 GAE 中开发一个应用程序。应用程序根据登录用户是管理员还是普通用户提供不同的视图。我想使用“Google Apps 域”作为身份验证类型。这样我域的所有用户都可以登录应用程序并使用它。

在这里，应用程序无法区分登录为管理员或普通用户。不知何故，我应该让一个用户成为管理员，一旦该用户登录，应用程序应该为该用户使用管理员视图。有没有办法告诉应用程序特定用户是管理员？

如果我们有自己的 USER 表，我们可以将任何用户标记为管理员。每当用户登录应用程序时，应用程序可以查询 USER 表以检查用户是否为管理员？但在我的情况下，这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:24:47.907

为什么你描述的不可能？表示登录用户的对象是`google.appengine.api.users.User`. 该对象具有 user_id 属性。您可以将该 ID 用作您自己的用户模型中的一个字段，您可以在其中添加一个字段来确定他们是否是管理员。

# html - 如何在 HTML、CSS 中显示特定的行格式？

> ID：16191320
> 
> 赞同：0
> 
> 时间：2013-04-24T11:53:56.560
> 
> 标签：html, css

我正在尝试在 html+css 中创建链接行，其格式应如下所示：

（伪代码）

```
<body class="class_with_minmaxwidth_set_in_css">
    <div class="container">
      <div class="row">
        <div class="fixed_left_40px"></div>
        <div class="fluid_center_which_changes_with_window_size"></div>
        <div class="fixed_right_40px"></div>
      </div>
      ... repeat more row divs
    </div>
</body> 
```

我已经尝试了为其中的三个 div 中的每一个使用浮动、位置和显示的各种组合，但仍然无法设置正确的组合。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:55:43.253

如果要对齐`div`a 中的元素`line`，请使用`display: inline:block`

```
<div class="row">
    <div class="fixed_left_40px"></div>
    <div class="fluid_center_which_changes_with_window_size"></div>
    <div class="fixed_right_40px"></div>
</div> 
```

CSS：

```
 .row div{
    display: inline-block;

    height: 40px;
}

.fixed_left_40px{
    width: 40px;    
    background: blue;
}

.fixed_right_40px{
    background: red;
    width: 40px;
} 
```

# [工作小提琴](http://jsfiddle.net/4RZ79/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:59:31.687

`display: table`非常适合：

[演示](http://jsfiddle.net/8LZ9B/)

```
<div class="container">
    <div class="row">
        <div class="fixed">40px</div>
        <div class="fluid">fluid</div>
        <div class="fixed">40px</div>
    </div>
</div> 
```

* * *

```
.container {
    display: table;
    width: 100%;
}

.row {
    display: table-row;
}

.row div {
    display: table-cell;
}

.row div.fixed {
    width: 40px;
}

.row div.fluid {
   background: lightGreen;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T11:57:57.133

```
.row div {
    display: inline-block;
}

.row .fixed_left_40px {
    float: left;
    width: 40px;
}

.row .fixed_right_40px {
    float: right;
    width: 40px;
} 
```

见[http://jsfiddle.net/Bsrur/](http://jsfiddle.net/Bsrur/)

# entity-framework - 减少 EF 中的大量包含

> ID：16191322
> 
> 赞同：0
> 
> 时间：2013-04-24T11:54:01.543
> 
> 标签：entity-framework, include

有什么方法可以缩短这个包含语句？

```
var query = Context.Businesses
 .Include(b => b.Categories)
 .Include(b => b.Branches.Select(br => br.Address))
 .Include(b => b.Branches.Select(br => br.BranchType))
 .Include(b => b.Branches.Select(br => br.CustomFields))
 .Include(b => b.Branches.Select(br => br.Phones))
 .Include(b => b.Branches.Select(br => br.OpeningTimes.Select(ot => ot.WorkingPeriods))); 
```

我考虑过使用 SPROC，但我不确定它如何知道返回的内容。

那么有没有一种非硬编码的方法可以比它更短呢？也许是一个处理 ? 的所有属性的外部 lambda `Branch`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:17:07.890

你可以做一些类似于[这个问题](https://stackoverflow.com/questions/3356541/entity-framework-linq-query-include-multiple-children-entities)的答案的事情。所以在你的情况下，做一个这样的扩展方法：

```
public static class DataContextExtensions
{
   public static IQueryable<Business> BusinessesComplete(this DataContext context){
         return context.Businesses
             .Include(b => b.Categories)
             .Include(b => b.Branches.Select(br => br.Address))
             .Include(b => b.Branches.Select(br => br.BranchType))
             .Include(b => b.Branches.Select(br => br.CustomFields))
             .Include(b => b.Branches.Select(br => br.Phones))
             .Include(b => b.Branches.Select(br => br.OpeningTimes.Select(ot => ot.WorkingPeriods)));
     }
} 
```

然后像这样使用它：

```
Business business = context.BusinessesComplete().Where(b => ...etc); 
```

# c - GCC 认为 ARM 上的 int 指针未对齐

> ID：16191323
> 
> 赞同：4
> 
> 时间：2013-04-24T11:54:04.070
> 
> 标签：c, gcc, arm, memory-alignment

我有以下测试程序：

```
#include <string.h>
int q(int *p) {
    int x;
    memcpy(&x,p,sizeof(int));
    x+=12;
    memcpy(p,&x,sizeof(int));
    return p[0];
} 
```

当我使用 GCC 4.7.2 for arm-linux-gnueabihf 编译它时，编译器怀疑指针访问可能未对齐，在程序集输出中注释加载和存储，例如：

```
 ldr     r0, [r0, #0]    @ unaligned 
```

如果我用 编译`-mno-unaligned-access`，编译器根本不会发出直接加载和存储，而是调用库`memcpy`。但实际上，这种情况下的指针永远不应该是未对齐的。这是gcc中的一个忽略，还是我弄错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:17:42.537

我认为`gcc`确实对在调用中`int*`被强制转换为 a感到困惑，并假设这样的指针是最坏的。它本可以尝试查看底层指针是否正确对齐。您是否尝试过更高的优化级别？可能是在更高的层次上变得更聪明。`void*``memcpy``gcc`

也有可能`gcc`不保证`int`所有代码中的指针对齐，但这是不明智的，而且不太可能。

`int*p`由于第 6.2.3.2 和 7 条，允许编译器假设正确对齐：

> 指向对象类型的指针可以转换为指向不同对象类型的指针。如果结果指针未正确对齐 68) 对于引用的类型，则行为未定义。

Note 68) 是关于正确对齐的传递性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:53:39.510

在 C 编译器中，没有什么比值的加载和存储更好的优化了`int`，这些值在设计上是机器的自然大小。

将函数写为

```
int q(int *p) {
    return *p += 12;
} 
```

这避免了对库例程的两次调用，否则您指望优化器内联并减少到简单的加载和存储，并表达就地修改整数值参数并返回结果的意图。

使用`memcpy`分配整数会混淆意图。

如果这个问题是将一个更大的问题减少到最小尺寸的混淆示例的结果，那么我的实现可能不会直接帮助。但即使类型`p`是`some_complex_struct *`而不是`int *`，建议仍然适用。赋值运算符有效。`memcpy`在有意义的地方优先使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:11:33.163

如果你的linux内核版本之前到2.6.28。GCC 会抛出这个`Warning`。 `-munaligned-access`支持在未对齐的地址上访问内存。这需要这些系统的内核启用此类访问 或者，不支持未对齐的访问，所有代码都必须使用 -mno-unaligned-access 进行编译。上游 Linux 内核版本自动且无条件地支持由 GCC 发出的未对齐访问，因为此选项自版本 2.6.28 起处于活动状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T08:59:40.750

这是我提出的解决方案，实现了一些数据字段访问的替代方案：

```
// #define USE_MEMCPY
// #define USE_PACKED
#ifdef __cplusplus
template <typename T> void SET(T *__attribute__((may_alias)) p, T val) {
    *p=val;
}
template <typename T> T GET(T *__attribute__((may_alias)) p) {
    return *p;
}
#else
#ifdef USE_MEMCPY
#include <string.h>
#define _SET(p,val,line) \
  ({ typeof(val) _temp_##line = (val); \
       memcpy((void*)(p),(void*)&_temp_##line,sizeof(_temp_##line)); }) 
#define _GET(p,line) \
  ({ typeof(*(p)) _temp_##line; \
       memcpy((void*)&_temp_##line,(void*)(p),sizeof(_temp_##line)); \
       _temp_##line; })

#define SET(p,val) _SET(p,val,__LINE__)
#define GET(p) _GET(p,__LINE__)
#else /* no memcpy */
#ifdef USE_PACKED
#define SET(p,val) (((struct { typeof(val) x __attribute__((packed)); } __attribute__((may_alias))*)p)->x=(val))
#define GET(p) (((struct { typeof(*p) x __attribute__((packed)); } __attribute__((may_alias))*)p)->x)
#else
#define SET(p,val) (*((typeof(val) __attribute__((may_alias))*)p)=(val))
#define GET(p) (*((typeof(*p) __attribute__((may_alias))*)p))
#endif
#endif
#endif 
```

然后我可以这样写函数：

```
int q(int *p) {
    SET(p,GET(p)+12);
    return p[0];
} 
```

# javascript - HTML5 Canvas 在某些移动浏览器中的性能问题。

> ID：16191324
> 
> 赞同：15
> 
> 时间：2013-04-24T11:54:04.367
> 
> 标签：javascript, html, html5-canvas, android-browser, mobile-website

嗨，我有一个应该能够在智能手机和桌面浏览器上运行的 Web 应用程序。虽然我期待在像 Iphone 这样的小型设备上会出现一些奇怪的行为，但我非常有信心它会在 Android Galaxy Tab 上运行良好，这是我目前可以运行测试的 Android 设备。

现在我在 Galaxy Tab 上安装了一堆浏览器来测试：

*   安卓原生浏览器
*   安卓版 Chrome
*   火狐安卓版

在我用过的桌面上

*   火狐
*   谷歌浏览器

最后我有一个 Iphone 来测试。

该网站使用 HTML5 画布进行基于像素和精灵的绘图，没有花哨的转换、过滤器或效果，主要是简单的路径和多边形。我确实会听触摸事件并`requestAnimationFrame`用于适当的重绘。

总体而言，该应用程序在桌面浏览器上运行良好，在 iOS Safari (iPhone) 和 Firefox-on-Android 上也运行良好。然而，Androids Native Browser 给我带来了麻烦。我已经设置了它，以便当 javascript 没有响应时屏幕会变成红色，并且在触摸屏幕时它几乎总是会闪烁。

所以我想知道Android Native App和HTML5是否存在任何已知问题。由于本机浏览器的名称不存在，因此很难通过谷歌搜索相关信息。**对我有什么想法可以在哪里获得更多信息？有什么想法可能导致本机 Android 浏览器滞后？**

关于这个问题有几个想法：

*   iOS 不支持 requestAnimationFrame，因此我将其替换为基于超时的替换。如果我在 Android 的本机浏览器上使用该替换，问题仍然存在。

*   我经常使用 AJAX (google clojure xhrio) 从服务器检索数据。难道是数据检索回调阻塞了我的事件管道？

*   是否已知日志控制台消息 (console.log) 会减慢应用程序的速度？他们可以触发浏览器重新运行 DOM 树或任何相关的东西吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-25T06:47:59.843

我在许多浏览器中用画布做了很多实验。我注意到的一些性能问题：

首先，关于你的猜测：

*   当`requestAnimationFrame`浏览器支持时，绘图内容和应用程序本身的响应速度更快。始终可以使用`setTimeout`or`setInterval`作为后备，但您需要注意时机。这个[强大的 polyfill](https://gist.github.com/paulirish/1579671)可能会有所帮助，但与原生 requestAnimationFrame 相比没有任何帮助。

*   如果每帧（或几乎）调用console.log，是的，性能会下降。由于原生 Android 浏览器没有控制台对象，因此每次调用它都会产生一个错误，这也会导致您的应用程序变慢。你可以这样做：

    `if(typeof console === "undefined"){ console = {}; }`

*   对于密集的实时应用程序， [Web 套接字](https://developer.mozilla.org/en-US/docs/WebSockets)比 http 请求更快。不幸的是，旧的原生 android 浏览器不支持此功能。如果无法使用 Web 套接字，则应尽量减少 http 请求。

注意： Android 版[Chrome](https://developers.google.com/chrome/mobile/docs/faq)支持此处引用的大多数 HTML5 功能，包括`requestAnimationFrame`和`websockets`.

更多信息：

*   使用上下文 2d 绘制文本`fillText`太昂贵了，但在某些浏览器中，这甚至更糟。在另一个画布中预渲染您的文本或使用位图字体。（在原生 Android 浏览器中，在将`filltext`绘图替换为预渲染后，在我制作的一些游戏中，性能从 10-15 FPS 增长到 30-45 FPS）。

*   避免缩放和旋转上下文，因为它们也会导致性能下降。如果您只需要缩放或旋转一次精灵，请使用预渲染。

*   您需要最小化实时绘图。尽可能预渲染你的东西。仅重绘已更改且需要更新的内容。

*   尝试编写[内存高效](http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/)且垃圾收集器友好的代码。

还有很多事情要做。我只是列举了一些。

提示：对您不确定它们是否是性能杀手的功能进行一些压力测试并捕获基准测试结果。

在移动应用程序中，特别是实时应用程序中，所有优化都是受欢迎的，无论是过度优化还是内存增加。

欲了解更多信息，请点击以下链接：

*   [http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)（这个绝对应该访问）
*   [http://www.html5rocks.com/en/features/performance](http://www.html5rocks.com/en/features/performance)

[还可以在Posts & Tutorials](http://www.html5rocks.com/en/tutorials/)中搜索性能。

**编辑**
这个[jsfiddle 代码片段](http://jsfiddle.net/gfcarv/63vBB/)显示了这个答案中涵盖的一些内容，并提供了一个粗略的 fps 计数器来进行基准测试。自己编辑这个小提琴并检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T22:07:24.857

根据您所绘制的内容，Html5 画布最常见的性能改进策略是利用图层（即多个画布）并且只更新需要重绘的图层，而不是在每个动画帧上重绘整个内容。你可以自己滚动这样的东西，或者你可以使用[http://www.concretejs.com/](http://www.concretejs.com/)之类的东西，这是一个轻量级的 Html5 画布框架，可以实现命中检测、分层、缓存、像素比支持、下载等外围功能. 你会做这样的事情：

```
var wrapper = new Concrete.Wrapper({
  width: 500,
  height: 300,
  container: el
});

var layer1 = new Concrete.Layer();
var layer2 = new Concrete.Layer();

wrapper.add(layer1).add(layer2);

// something happens which requires you to redraw layer2, but not layer1...
layer2.sceneCanvas.context.fillStyle = 'red';
layer2.sceneCanvas.context.fillRect(0, 0, 200, 100); 
```

# vb.net - Ext.Net X.GetCmp 方法不适用于 FileUploadField

> ID：16191327
> 
> 赞同：2
> 
> 时间：2013-04-24T11:54:14.353
> 
> 标签：vb.net, ext.net

这是我的第一个问题。我几乎每天都在堆栈溢出，但这是我第一次自己找不到答案，不得不在这里发布。

我正在`Ext.Net`动态创建页面（如果重要，在 VB.net 中），基于 XML 配置，具有各种控件和任意数量的控件。因此，对于 XML 中的每个字段，我创建控件并为其分配一个 ID（ID 来自 XML）。我有一个“提交”按钮，单击该按钮后，再次解析 XML，获取每个字段的 ID，并使用`Ext.Net.X.GetCmp`. 然后，一旦我有了控制权，我就会得到价值并用它做一些事情。除了 control type 之外，一切都像魅力一样`FileUploadField`。据此，由于某种原因，[不适](http://forums.ext.net/showthread.php?16885-how-to-get-the-FileUploadField-fullpath-in-code-behind-use-it-s-I)`GetCmp`用于`FileUploadField`.

所以，我的问题是：有什么方法可以`FileUploadField`根据它的 ID 获取控件吗？而且，只是想知道，为什么`GetCmp`不能使用这种控制？

非常感谢您，并为我的英语不好感到抱歉。

**编辑：**

好的，我已将我的 Ext.Net 更新到最新版本 (2.2)。现在一切看起来都很奇怪，但没关系，如果它有效。除了外观，我看不出行为有任何变化。GetCmp 仍然给我同样的东西。顺便说一句，即使我没有创建控件，X.GetCmp(Of Ext.Net.FileUploadField)(ControlID) 也会给我一个 FileUploadField，而不是 null。唯一的事情是 hasFile=false 总是，并且文件字节是空的。

**编辑2：**

我已经运行了你的示例代码，它就像一个魅力。我开始认为“isUpload”是关键。我整天都在谷歌搜索，想看看我在哪里以及为什么要写这个 {isUpload=true}，但我没有看到任何有用的东西。你能给我解释一下吗？仅适用于 DirectMethods？是强制性的？非常感谢！

**编辑 3：**

我现在觉得自己太傻了。有用。刚刚在 JavaScript 的 DirectMethod 调用中添加了一个简单的 isUpload:true 。这么多天来解决这个愚蠢的事情。对于下一个人：检查您的 isUpload ;)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:32:07.857

> > 所以，我的问题是：有没有办法根据它的 ID 获取 FileUploadField 控件？

仅重新创建该控件。您在一个 AJAX 请求（DirectEvent/DirectMethod）期间呈现一个控件，并且它不会在另一个 AJAX 请求期间持续存在，除非您手动重新创建它。它的行为与标准 ASP.NET 控件相同。

控件可以在 Page_Init 中重新创建，并且必须使用相同的 ID 重新创建。在这种情况下，控件的 LoadPostData 应该从 POST 集合中提取正确的值。[这是一个相关的讨论](http://forums.asp.net/t/1186195.aspx)。

> > 而且，只是想知道，为什么 GetCmp 不适用于这种控件？

它不适用于 Ext.NET v1，但适用于 Ext.NET v2。下面是一个示例。

不过，它只是从 POST 中提取文件。X.GetCmp<>() 返回一个代理控件，它不是真正的控件。它只是提取动态呈现控件的 POST 值并在客户端更新这些控件（更改其属性并调用其方法）的便捷方法。

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    protected void RenderFileUploadField(object sender, DirectEventArgs e)
    {
        FileUploadField fileUploadField = new FileUploadField()
            {
                ID = "FileUploadField1",
                Width = 300,
                Listeners =
                {
                    Change =
                    {
                        Handler = @"App.direct.GetFileName(this.id, {
                                        isUpload : true
                                    });"
                    }
                }
            };
        this.Form.Controls.Add(fileUploadField);
        fileUploadField.Render();
    }

    [DirectMethod]
    public void GetFileName(string id)
    {
        X.Msg.Alert("FileName", X.GetCmp<FileUploadField>("FileUploadField1").PostedFile.FileName).Show();
    }
</script>

<!DOCTYPE html>
<html>
<head runat="server">
    <title>Ext.NET v2 Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" />
        <ext:Button
            runat="server"
            Text="Create a FileUploadField"
            OnDirectClick="RenderFileUploadField" />
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:40:20.117

你可以使用简单的javascript：

```
var fileinput = document.getElementById("fileinput"); 
```

因为 javascript 只搜索你需要小心的 DOM。每个 Ext.Net 组件将获得一堆包装器和子组件以及“不必要的”兄弟/父/子（用于标题、标签、底部和顶部栏等..）

如果您为控件提供了 ID，您应该可以通过以下方式获取它：

```
App.{control-id} 
```

这将返回构造函数。您应该能够`FileBytes`随时使用 App 命名空间从 ExtJS 获取（请参阅[BREAKING CHANGES](http://examples.ext.net/#/Getting_Started/Release_Documents/BREAKING_CHANGES/)）

FileBytes 的完成获取如下所示：

```
App.{control-id}.FileBytes 
```

# opencv - 我应该用什么方法来用移动的相机跟踪一个移动的物体（使用树莓派的资源）

> ID：16191329
> 
> 赞同：0
> 
> 时间：2013-04-24T11:54:23.527
> 
> 标签：opencv, video-capture, raspberry-pi, motion-detection, blobs

我正在使用 C++ 中的 OpenCV 和 cvBlob 通过连接到 RaspberryPi 的网络摄像头进行运动检测。我想将它提高一个档次，并制作一个机器人来检测和跟踪向它行驶的运动并左转/环以将运动物体保持在视野中心。但我很快就遇到了障碍——我找不到任何关于使用活动的、移动的相机进行运动跟踪的资料，这些资料更多的是业余水平。我只找到了学术论文，例如关于光流的论文。当然，如果我知道那是适合我需要的算法，我可以尝试通过其中之一，但是浏览所有论文并从中选择一篇超出了我的理解水平。

所以我将不胜感激，如果有人能指出最简单的方法（毕竟，RaspberryPi 的资源非常有限），我可以确定所选的 blob（我计划跟踪最大 blob 的移动超过一组size) 在水平轴上移动，与由安装有摄像头的机器人的移动引起的背景移动相比。垂直轴上的移动在此应用程序中无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T12:20:15.710

如果您使用 blob 的左右 x 坐标，您应该能够通过测量从左右图像边界到对象左右 x 坐标的距离来确定对象是否正在移动。如果机器人向左或向右移动，如果测量距离开始下降，物体就会停止。

# javascript - 我在此代码上收到“组件不可用”和“索引大小错误：Dom 异常”错误的任何特殊原因

> ID：16191330
> 
> 赞同：0
> 
> 时间：2013-04-24T11:54:23.870
> 
> 标签：javascript, html, dom, canvas

我是 Javascript/HTML5 新手，我正在构建一个简单的二十一点游戏。我正在从一本书中学习，我认为我的代码很好（检查了很多）并且我知道我的图像文件的名称正确。为了简单起见，我将所有这些都包含在一个 html 文件中。这不会加载到画布中的任何特殊原因。Chrome 和 Firefox 似乎都特别关注交易和 newGame 功能。任何建议将不胜感激。（也忽略丑陋的缩进对于stackoverflow工具来说仍然是新的。）

谢谢

```
var cwidth = 800;
    var cheight = 600;
    var cardw = 75;
    var cardh = 107;
    var playerxp = 100;
    var playeryp = 300;
    var housexp = 500;
    var houseyp = 100;
    var housetotal;
    var playertotal;
    var pi = 0;
    var hi = 0;
    var deck = [];
    var playerhand = [];
    var househand = [];
    var back = new Image();

    function init () {
        ctx = document.getElementById('canvas').getContext('2d');
    	ctx.font = "italic 20pt Georgia";
    	ctx.fillstyle = 'blue';
    	builddeck();
    	back.src = 'cardback.png';
    		canvas1 = document.getElementById('canvas');
    		window.addEventListener('keydown', getkey, false);
    	shuffle();
    	dealstart();	
    }

    function getkey(event) {
    	var keyCode;
    	if (event == null)
    	{
    		keyCode = window.event.keyCode;

    		window.event.preventDefault();
    	}
    	else {
    		keyCode = event.keyCode;
    		event.preventDefault();
    	}

        switch(keyCode) {

        	case 68:
        	deal();
        	break;

        	case 72:
        	playerdone();
        	break;

        	case 78:
        	newgame();
        	break;

        	default:
        	alert("press d, h or n please.");

        }	
    }

    function dealstart() {
    	playerhand[pi] = dealfromdeck(1);

    	ctx.drawImage(playerhand[pi].picture, playerxp, playeryp, cardw, cardh);
    	playerxp = playerxp+30;
    	pi++;

    	househand[hi] = dealfromdeck(2);
    	ctx.drawImage(back, housexp, houseyp, cardw, cardh);
    	housexp = housexp+20;
    	hi++;

    	playerhand[pi] = dealfromdeck(1);
    	ctx.drawImage(playerhand[pi].picture, playerxp, playeryp, cardw, cardh);
    	playerxp = playerxp+30;
    	pi++;

    	househand[hi] = dealfromdeck(2);
    	ctx.drawImage(househand[hi].picture, housexp, houseyp, cardw, cardh);
    	housexp = housexp+20;
    	hi++;
    }

    function deal() {

    	playerhand[pi] = dealfromdeck(1);
    	ctx.drawImage(playerhand[pi].picture, playerxp, playeryp, cardw, cardh);
    	playerxp = playerxp+30;
    	pi++;

    	if (more_to_house()) {
    		househand[hi] = dealfromdeck(2);
    		ctx.drawImage(househand[hi].picture, housexp, houseyp, cardw, cardh);
    		housexp = housexp+20;
    		hi++;
    	}
    }

    function more_to_house() {
    	var ac = 0;
    	var i;
    	var sumup = 0;

    	for(i = 0; i < hi; i++) {
    		sumup += househand[i].value;

    		if (househand[i].value==1){ac++;}
    	}

    		if (ac>0) {
    			if ((sumup+10)<=21){

    				sumup+=10;
    			}
    		} 

    		housetotal = sumup;

    		if (sumup<17){
    			return true;
    		}

    		else{
    			return false;
    		}

    }

    function dealfromdeck(who){
    	var card;
    	var ch = 0;

    	while ((deck[ch].dealt>0)&&(ch<51)){
    		ch++;
    	}

    	if (ch>=51) {
    		ctx.fillText("NO MORE CARDS IN DECK. Reload.", 200, 250);
    		ch = 51;
    	}

    	deck[ch].dealt = who;

    	card = deck[ch];
    	return card;
    }

    function builddeck() {
    	var n;
    	var si;
    	var suitname = ["clubs", "hearts", "spades", "diamonds"];
    	var i;
    	i=0;
    	var picname;
    	var nums = ["a", "2", "3", "4", "5", "6", "7", "8", "9", "10", "j", "q", "k"];

    	for (si=0; si<4; si++) {
    		for(n=0; n<13; n++) {
    			picname = suitname[si]+"-"+nums[n]+"-75.png";
    			deck[i] = new MCard(n+1, suitname[si], picname);
    			i++;
    		}
    	}
    }

    function MCard(n, s, picname){

    	this.num = n;
    	if (n>10) n = 10;
    	this.value = n;
    	this.suit = s;
    	this.picture = new Image();
    	this.picture.src = picname;
    	this.dealt = 0;
    }

    function add_up_player (){
    	var ac = 0;
    	var i;
    	var sumup = 0;
    		for(i=0; i<pi; i++){
    			sumup += playerhand[i].value;

    			if (playerhand[i].value==1)
    			{
    				ac++;
    			}
    		}

    		if (ac>0) {
    			if((sumup+10)<=21){
    				sumup+=10;
    			}
    		}

    		return sumup;
    }

    function playerdone() {
    	while (more_to_house()) {
    		househand[hi] = dealfromdeck(2);
    		ctx.drawImage(back, housexp, houseyp, cardw, cardh);
    		housexp = housexp+20;
    		hi++;
    	}
    	showhouse();
    		playertotal = add_up_player();
    		if (playertotal > 21) {

    			if (housetotal > 21) {
    				ctx.fillText("You and the house both went bust.", 30, 100);
    			}
    			else{
    				ctx.fillText("You went over and lost.", 30 , 100);
    			}

    		}
    				else
    				if (housetotal > 21) {
    					ctx.fillText("You Won.  The house went bust.", 30, 100);
    				}

    			else
    			  if (playertotal >= housetotal) {
    			  	if (playertotal > housetotal) {
    			  		ctx.fillText("You won.", 30, 100);
    			  	}
    			  	else {
    			  		ctx.fillText("You draw.", 30 , 100);
    			  	}

    			  }	

    			  else
    			  	if(housetotal <= 21) {
    			  		ctx.fillText("You Lost.", 30, 100);
    			  	}
    			  else {
    			  	ctx.fillText("You won because the house went over.");
    			  }
    			}

    function newgame() {
    	ctx.clearRect(0, 0, cwidth, cheight);
    	pi = 0;
    	hi = 0;
    	playerxp = 100;
    	housexp = 500;
    	dealstart();
    }

    function showhouse() {
    	var i;
    	housexp = 500;
    	for (i=0; i<hi; i++){
    		ctx.drawImage(househand[i].picture, housexp, houseyp, cardw, cardh);
    		housexp = housexp+20;
    	}
    }

    function shuffle() {
    	var i = deck.length - 1;
    	var s;
    	while (i>0) {
    		s = Math.floor(Math.random()*(i+1));
    		swapindeck(s,i);
    		i--;
    	}
    }

    function swapindeck(j, k) {
    	var hold = new MCard(deck[j].num, deck[j].suit, deck[j].picture.src);
    	deck[j] = deck[k];
    	deck[k] = hold;
    }
```

```
body {
    background-color: white;
    color: black;
    font-size: 18px;
    font-family: Verdana, Geneva, sans-serif;
}

footer {
    display: block;
    font-family: Tahoma, Geneva, sans-serif;
    text-align: center;
    font-style: oblique;
}

header {
  width: 100%;
}
```

```
<html>
       <head>
       <title>BlackJack</title>

    </head>

    <body onLoad = "init();">
    <header>Press d for deal or 1 more card, h for hold, n for new game.</header>
    <canvas id="canvas" width="800" height = "500">
    Your Browser doesn't support the Html5 element canvas.
    </canvas>
    <footer>
    </footer>
    </body>
</html>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-06T02:08:29.983

当我运行你的代码时，我实际上得到了这个错误，对于你指定的同一行：

> 未捕获的 InvalidStateError：无法在“CanvasRenderingContext2D”上执行“drawImage”：提供的 HTMLImageElement 处于“损坏”状态。

这意味着您尝试绘制的图像在要绘制的目录中找不到。

因此，我用外部链接替换了您拥有的静态代码图像，并且代码工作正常：

```
var cwidth = 800;
    var cheight = 600;
    var cardw = 75;
    var cardh = 107;
    var playerxp = 100;
    var playeryp = 300;
    var housexp = 500;
    var houseyp = 100;
    var housetotal;
    var playertotal;
    var pi = 0;
    var hi = 0;
    var deck = [];
    var playerhand = [];
    var househand = [];
    var back = new Image();

    function init() {
        ctx = document.getElementById('canvas').getContext('2d');
        ctx.font = "italic 20pt Georgia";
        ctx.fillstyle = 'blue';
        builddeck();
        back.src = 'http://www.jimknapp.com/Cards/Non-Bicycle_files/image001.jpg';
        canvas1 = document.getElementById('canvas');
        window.addEventListener('keydown', getkey, false);
        shuffle();
        dealstart();
    }

    function getkey(event) {
        var keyCode;
        if (event == null) {
            keyCode = window.event.keyCode;

            window.event.preventDefault();
        } else {
            keyCode = event.keyCode;
            event.preventDefault();
        }

        switch (keyCode) {

            case 68:
                deal();
                break;

            case 72:
                playerdone();
                break;

            case 78:
                newgame();
                break;

            default:
                alert("press d, h or n please.");

        }
    }

    function dealstart() {
        playerhand[pi] = dealfromdeck(1);

        ctx.drawImage(playerhand[pi].picture, playerxp, playeryp, cardw, cardh);
        playerxp = playerxp + 30;
        pi++;

        househand[hi] = dealfromdeck(2);
        ctx.drawImage(back, housexp, houseyp, cardw, cardh);
        housexp = housexp + 20;
        hi++;

        playerhand[pi] = dealfromdeck(1);
        ctx.drawImage(playerhand[pi].picture, playerxp, playeryp, cardw, cardh);
        playerxp = playerxp + 30;
        pi++;

        househand[hi] = dealfromdeck(2);
        ctx.drawImage(househand[hi].picture, housexp, houseyp, cardw, cardh);
        housexp = housexp + 20;
        hi++;
    }

    function deal() {

        playerhand[pi] = dealfromdeck(1);
        ctx.drawImage(playerhand[pi].picture, playerxp, playeryp, cardw, cardh);
        playerxp = playerxp + 30;
        pi++;

        if (more_to_house()) {
            househand[hi] = dealfromdeck(2);
            ctx.drawImage(househand[hi].picture, housexp, houseyp, cardw, cardh);
            housexp = housexp + 20;
            hi++;
        }
    }

    function more_to_house() {
        var ac = 0;
        var i;
        var sumup = 0;

        for (i = 0; i < hi; i++) {
            sumup += househand[i].value;

            if (househand[i].value == 1) { ac++; }
        }

        if (ac > 0) {
            if ((sumup + 10) <= 21) {

                sumup += 10;
            }
        }

        housetotal = sumup;

        if (sumup < 17) {
            return true;
        } else {
            return false;
        }

    }

    function dealfromdeck(who) {
        var card;
        var ch = 0;

        while ((deck[ch].dealt > 0) && (ch < 51)) {
            ch++;
        }

        if (ch >= 51) {
            ctx.fillText("NO MORE CARDS IN DECK. Reload.", 200, 250);
            ch = 51;
        }

        deck[ch].dealt = who;

        card = deck[ch];
        return card;
    }

    function builddeck() {
        var n;
        var si;
        var suitname = ["C", "H", "S", "D"];
        var i;
        i = 0;
        var picname;
        var nums = ["A", "2", "3", "4", "5", "6", "7", "8", "9", "0", "J", "Q", "K"];

        for (si = 0; si < 4; si++) {
            for (n = 0; n < 13; n++) {
                picname =  "https://deckofcardsapi.com/static/img/" + nums[n] + suitname[si] + ".png";
                deck[i] = new MCard(n + 1, suitname[si], picname);
                i++;
            }
        }
    }

    function MCard(n, s, picname) {

        this.num = n;
        if (n > 10) n = 10;
        this.value = n;
        this.suit = s;
        this.picture = new Image();
        this.picture.src = picname;
        this.dealt = 0;
    }

    function add_up_player() {
        var ac = 0;
        var i;
        var sumup = 0;
        for (i = 0; i < pi; i++) {
            sumup += playerhand[i].value;

            if (playerhand[i].value == 1) {
                ac++;
            }
        }

        if (ac > 0) {
            if ((sumup + 10) <= 21) {
                sumup += 10;
            }
        }

        return sumup;
    }

    function playerdone() {
        while (more_to_house()) {
            househand[hi] = dealfromdeck(2);
            ctx.drawImage(back, housexp, houseyp, cardw, cardh);
            housexp = housexp + 20;
            hi++;
        }
        showhouse();
        playertotal = add_up_player();
        if (playertotal > 21) {

            if (housetotal > 21) {
                ctx.fillText("You and the house both went bust.", 30, 100);
            } else {
                ctx.fillText("You went over and lost.", 30, 100);
            }

        } else
        if (housetotal > 21) {
            ctx.fillText("You Won.  The house went bust.", 30, 100);
        } else
        if (playertotal >= housetotal) {
            if (playertotal > housetotal) {
                ctx.fillText("You won.", 30, 100);
            } else {
                ctx.fillText("You draw.", 30, 100);
            }

        } else
        if (housetotal <= 21) {
            ctx.fillText("You Lost.", 30, 100);
        } else {
            ctx.fillText("You won because the house went over.");
        }
    }

    function newgame() {
        ctx.clearRect(0, 0, cwidth, cheight);
        pi = 0;
        hi = 0;
        playerxp = 100;
        housexp = 500;
        dealstart();
    }

    function showhouse() {
        var i;
        housexp = 500;
        for (i = 0; i < hi; i++) {
            ctx.drawImage(househand[i].picture, housexp, houseyp, cardw, cardh);
            housexp = housexp + 20;
        }
    }

    function shuffle() {
        var i = deck.length - 1;
        var s;
        while (i > 0) {
            s = Math.floor(Math.random() * (i + 1));
            swapindeck(s, i);
            i--;
        }
    }

    function swapindeck(j, k) {
        var hold = new MCard(deck[j].num, deck[j].suit, deck[j].picture.src);
        deck[j] = deck[k];
        deck[k] = hold;
    }
```

```
body {
        background-color: white;
        color: black;
        font-size: 18px;
        font-family: Verdana, Geneva, sans-serif;
    }

    footer {
        display: block;
        font-family: Tahoma, Geneva, sans-serif;
        text-align: center;
        font-style: oblique;
    }

    header {
        width: 100%;
        display: block;
    }
```

```
<!DOCTYPE html>
<html>

<head>
    <title>BlackJack</title>
</head>

<body onLoad="init();">
    <header>Press d for deal or 1 more card, h for hold, n for new game.</header>
    <canvas id="canvas" width="800" height="500">
        Your Browser doesn't support the Html5 element canvas.
    </canvas>
    <footer>
    </footer>
</body>

</html>
```

如果您确实收到此错误，我已指定，在使用外部链接时，可能是因为您有一个广告拦截器阻止图像从外部加载

# c++ - 如何在opengl中以特定频率闪烁（轻弹）2d对象

> ID：16191340
> 
> 赞同：0
> 
> 时间：2013-04-24T11:54:57.550
> 
> 标签：c++, winapi, opengl

我需要以一定的频率闪烁两个 2d 对象。我在 Visual C++ Express Edition 中使用这个 OpenGL (glut) 和 C++。操作系统是 Windows XP Sp3，32 位。

我想我已经成功地实现了基本应用程序，但是我无法弄清楚如何以一定的频率制作 flash 对象。你对我有什么建议吗？我做的代码是这样的。

```
void display(void) {

glClear( GL_COLOR_BUFFER_BIT);

    glBegin(GL_POLYGON);
    glColor3f(0.0, 0.0, 0.0);
    glVertex3f(140.0, 250.0+300.0, 0.0); //bottom left corner
    glVertex3f(140.0+300.0, 250.0+300.0, 0.0); //bottom right corner
    glVertex3f(140.0+300.0, 250.0, 0.0); //top right corner
    glVertex3f(140.0, 250.0, 0.0);
    glEnd();

    glBegin(GL_POLYGON);
    glColor3f(1.0, 1.0, 1.0);
    glVertex3f(640.0+200.0, 250.0+300.0, 0.0); //bottom left corner
    glVertex3f(640.0+200.0+300.0, 250.0+300.0, 0.0); //bottom right corner
    glVertex3f(640.0+200.0+300.0, 250.0, 0.0); //top right corner
    glVertex3f(640.0+200.0, 250.0, 0.0);
    glEnd();

    glFlush();
}

int main(int argc, char **argv) {
    glutInit(&argc, argv);
    glutInitDisplayMode ( GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH);

    glutInitWindowPosition(0,0);
    glutInitWindowSize(1280,800);
    glutGameModeString("1280x800:32@60");
    glutEnterGameMode();
    glutSetWindowTitle("OpenGL SSVEP stimulator");

    glDisable(GL_DEPTH_TEST);

    glClearColor(0.0, 0.0, 0.0, 0.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0,1280,800,0.0,0.0,1.0);

    glutDisplayFunc(display);

    glutMainLoop();

    return 0;
} 
```

为了闪现，我想到了这样的东西（伪代码）：

```
int leftFrequency=12;
int rightFrequency=20;
int i=0;
while(running) {
    if(i%leftFrequency)
        blackSquare;
    }
    else {
        whiteSquare;
    }
    if(i%rightFrequency)
        blackSquare;
    }
    else {
        whiteSquare;
    }
} 
```

但我不知道把这段代码放在哪里。在 display() 函数中可能吗？我在哪里可以增加 i 变量？我试图将所有内容都放在 display() 函数中，但是两个方块不闪烁。i 变量增加到 3。我没有错误类型。

也许它不正确闪烁的逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:05:21.520

如果要达到一定的频率，那么您需要根据时间轻弹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:56:52.407

创建一个全局变量（或使其`i`成为静态局部变量）并将您的闪烁代码（最后一个代码片段）放入显示函数中。

启用双缓冲`glutInitDisplayMode(… | GLUT_DOUBLE)`并将`glFlush()`显示替换为`glutSwapBuffers()`.

`i`在显示末尾添加一个增量。

注册`glutPostRedisplay`为 GLUT 空闲函数，即在`main`调用之前在您的函数中`glutMainLoop()`

```
glutIdleFunc(glutPostRedisplay); 
```

# java - 尝试使用 SQLQuery 创建触发器时出现异常

> ID：16191341
> 
> 赞同：0
> 
> 时间：2013-04-24T11:54:59.193
> 
> 标签：java, mysql, sql, hibernate, triggers

我有一个这样的 SQL `sqlStr`：

```
DELIMITER $$ 
CREATE TRIGGER TEST_T 
AFTER INSERT ON TEST 
FOR EACH ROW 
BEGIN 
    INSERT INTO TEST_LOG VALUES(NEW.ID, 3);
END $$ 
```

我像这样使用这个字符串，在运行我的应用程序时创建我的触发器：

```
Transaction t = sessionFactory.getCurrentSession().beginTransaction();
SQLQuery query = sessionFactory.getCurrentSession().createSQLQuery(sqlPart);
query.executeUpdate();
sessionFactory.getCurrentSession().flush();
t.commit(); 
```

但我收到一个例外，上面写着：

```
WARN  2013-04-24 16:12:48,238 [main] org.hibernate.util.JDBCExceptionReporter : SQL Error: 1064, SQLState: 42000
ERROR 2013-04-24 16:12:48,239 [main] org.hibernate.util.JDBCExceptionReporter : You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER $$ 
CREATE TRIGGER TEST_T 
AFTER INSERT ON TEST' at line 1 
```

请注意，此`sqlStr`内容在 MySQL 中单独执行时就可以了。但是在这里它不能被执行。为什么？

# c# - 是否可以使用 LINQ 进行列表操作？

> ID：16191342
> 
> 赞同：6
> 
> 时间：2013-04-24T11:55:03.857
> 
> 标签：c#, linq, list

这可能是一个愚蠢的问题，但我一直使用 linq 来选择项目。

但我想知道是否可以使用其关键字执行以下简单任务。

```
List<OrdersInfo> ordersList
.
.
.
foreach(OrdersInfo OI in ordersList)
        if(OI.TYPE == "P")
            OI.TYPE = "Project";
        else
        OI.TYPE = "Support"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T12:22:45.140

您可以使用 List 类的 ForEach 方法。

```
ordersList.ForEach(oi => oi.TYPE = oi.TYPE == "P" ? "Project" : "Support" ); 
```

如果你想拥有 IEnumerable 类型的 ForEach 方法，你可以创建自己的 ForEach 扩展

```
public static void ForEach<T>(this IEnumerable<T> en, Action<T> action)
{
    foreach(T item in en)
    {
        action(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T11:56:33.277

不，[LINQ（语言集成查询）](http://msdn.microsoft.com/it-it/library/bb397926.aspx)是一种*查询*语言，它确实在简洁的*查询定义*方面大放异彩，但在这方面并不总是很好（速度和/或内存问题）。

如果您想修改集合，请保持您已经这样做的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:24:44.273

[ForEach](http://msdn.microsoft.com/library/vstudio/bwabdf9z.aspx)不是 Linq 解决方案，但它看起来像：

```
ordersList.ForEach(OI => OI.TYPE = OI.TYPE == "P" ? "Project" : "Support"); 
```

`List<T>`仅在instance 上可用，在`IEnumerable<T>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T12:00:20.380

LINQ 用于查询集合，为了修改您当前的循环更具可读性和更好的方法，但如果您想要 LINQ 选项，那么：

如果`OrderInfo`是类（引用类型），那么您可以修改对象的属性，（您**不能**将它们分配为 null 或新的引用）。

```
var ordersList = new List<OrdersInfo>();
ordersList.Add(new OrdersInfo() { TYPE = "P" });
ordersList.Add(new OrdersInfo() { TYPE = "S" });
ordersList.Add(new OrdersInfo() { TYPE = "P" });
ordersList.Select(r => (r.TYPE == "P" ? r.TYPE = "Project" : r.TYPE = "Support")).ToList(); 
```

你的类定义为：

```
class OrdersInfo
{
    public string TYPE { get; set; }
} 
```

这是屏幕截图 ![在此处输入图像描述](https://i.stack.imgur.com/naDAI.png)

***有趣的是，我没有将结果分配回`ordersList`***

# html - 在 HTML 中的输入元素上更改鼠标光标

> ID：16191343
> 
> 赞同：5
> 
> 时间：2013-04-24T11:55:07.903
> 
> 标签：html, css, drag-and-drop, mouse-cursor

我有各种 HTML 元素，可以通过 Drag'n'Drop 移动。为了指出删除元素（给用户）的有效区域，我正在更改光标外观。我通过简单地通过包含一个简单的“cursor:xxx”的 JS 应用 CSS 类来做到这一点。这适用于 DIV 和 SPAN。

但是当我尝试使用文本输入或文本区域来做到这一点时，光标就变成了“|” （文本编辑光标）。

有没有办法覆盖此默认行为或是否有任何解决方法（不必用任何假人替换这些元素，因为这将花费大量时间，因为某些功能会在这些元素上中继）

CSS：

```
body.draggingInvalid ,
body.draggingInvalid * {
    cursor:not-allowed !important;
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
    user-select: none;
} 
```

HTML：

```
<input type="text" style="width: 200px; height: 20px;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:58:21.263

尝试使用*!important*

```
input {
    cursor: pointer !important;
} 
```

这将覆盖所有输入元素的“光标”属性。

**编辑：**

如果这不起作用，请仔细检查您的*选择器*。您可能想在**body**和**.draggingInvalid之间添加空格**

```
body .draggingInvalid {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T10:34:53.220

首先让我们创建输入并给它一个名为 changeCrusor 的类

```
<input id='test' class="changeCrusor" placeholder='nedys answer'> 
```

第二个让我们创建自己的类（在你的情况下，也许有些东西会覆盖你可以使用的输入的默认行为**！重要但它真的不推荐做事的方式**

```
.changeCrusor {cursor: text !important;} 
```

# c# - 以编程方式打开 ComboBox DropDown

> ID：16191347
> 
> 赞同：28
> 
> 时间：2013-04-24T11:55:24.817
> 
> 标签：c#, .net, winforms

是否可以**直接**以编程方式打开 WindowsForms 组合框？还没有找到这样做的方法或属性。如果不是，有哪些可能的解决方案不涉及大量黑客攻击。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-24T12:47:23.990

使用[ComboBox.DroppedDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.droppeddown.aspx)属性：

```
comboBox1.DroppedDown = true; 
```

# jakarta-ee - Heroku 应用服务器或 servlet 容器上的 Java 完整 EE（最佳实践）

> ID：16191357
> 
> 赞同：1
> 
> 时间：2013-04-24T11:55:59.527
> 
> 标签：jakarta-ee, heroku, glassfish-embedded

假设我需要 Heroku 上的“完整”Java EE 应用程序。什么是“更好”的方法？（在性能和内存使用方面）

1.  嵌入式 glassfish 服务器

2.  使用嵌入式码头并使用框架等构建“EE功能”。

希望我的问题足够清楚，并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:20:59.160

我对heroku一无所知，但是您要做的是将应用程序服务器功能放入另一种容器类型中，例如servlet容器-这几乎总是一种不好的做法。

如果您喜欢使用 JavaEE 功能，那么请使用 JavaEE 应用程序服务器。如果没有，请使用其他框架。

我们被锁定到 Tomcat 7 时遇到了同样的问题，但我们喜欢使用 JavaEE 功能，所以我们最终创建了一个包含大多数 JavaEE jar 的巨大 WAR 文件——尽管如此，这不是一个好的做法，但我们没有那里有很多选择。

但是，如果您有机会选择环境，我强烈建议您使用完整的 JavaEE 应用程序服务器，从其所有开箱即用的服务中受益，并保持您的应用程序小巧方便。

# php - netbeans 7.2 从文件开头搜索

> ID：16191358
> 
> 赞同：-1
> 
> 时间：2013-04-24T11:56:00.507
> 
> 标签：php, javascript, netbeans-7

在旧版本的 Netbeans 中，每当您按 CTRL + F 并使用`Next`按钮浏览结果时，在您到达最后一个结果并`Next`再次按时，它会再次从文件开头转到第一个结果。Netbeans 7.2 不再这样做了。有没有办法重新激活它？在选项中找不到任何东西...

附加信息：PHP 和 JS 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:00:02.970

确保选中“环绕”复选框。

# rest - 是否可以使用 MongoLabs 为公共可编辑数据创建安全的 API？

> ID：16191359
> 
> 赞同：2
> 
> 时间：2013-04-24T11:56:01.363
> 
> 标签：rest, mlab

这与[MongoLab 数据库是否存在 ReadOnly REST API 密钥有关，或者它是否始终为 ReadWrite](https://stackoverflow.com/questions/11250145/is-there-readonly-rest-api-key-to-a-mongolab-database-or-is-it-always-readwrite?rq=1)以及[Mongolab REST API 如何进行身份验证](https://stackoverflow.com/questions/12276146/how-does-mongolab-rest-api-authenticate?rq=1)

我想让我的网络应用程序的未经身份验证的用户能够创建资源并共享它们。创建的资源是一个链接数组`['link1', 'link2', 'link3']`。

我正在考虑直接从客户端使用 MongoLabs，这可以通过他们的[REST api](https://support.mongolab.com/entries/20433053-REST-API-for-MongoDB)实现。

但问题是，据我所知，如果我这样做，就不可能阻止破坏者轻易清除整个收藏品。

这是正确的，如果是这样，是否有一个简单的解决方案（不运行自定义后端）来做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:18:22.253

首先，您可以创建一个“历史记录”，因此如果出现问题，您可以调用一个简单的命令来恢复记录。其次，您可能会筛选连接的客户是否存在滥用行为；例如，测量某个时间集中删除或更新命令的数量。如果这被触发，您可以调用您的恢复过程。

笔记; 我对 MongoLabs 没有任何经验，但这 - 对我来说 - 将是创建公共 api 的合适保障。

# knockout.js - 淘汰赛js中的多个数据绑定

> ID：16191365
> 
> 赞同：20
> 
> 时间：2013-04-24T11:56:11.723
> 
> 标签：knockout.js

我有两个文本属性数据 Date 和 City 是可观察的。我需要在单个 div 中连接两个文本属性数据。并为两个文本应用单独的样式。当前场景使用 knockoutjs 数据绑定属性：

```
<div class="date" data-bind="text:Date" />
<div class="city" data-bind="text:City" /> 
```

预期的 ：

```
<div class="date city" data-bind=" text:Date text:City" /> 
```

输出 : ***2013-05-24***纽约

请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-24T12:04:36.043

您不能在一个元素上使用两个相同的绑定。相反，您应该创建一个计算格式，它使用您要显示的两个值来格式化文本。

例如（假设您的 Date 和 City 是可观察的）：

```
viewModel.DateCity = ko.computed(function() {
  return viewModel.Date() + " - " + viewModel.City();
}); 
```

然后在您的数据绑定中，您只需绑定到计算的。

```
<div class="date city" data-bind="text:DateCity" /> 
```

另一种选择是直接组合绑定中的值。

```
<div class="date city" data-bind="text: Date() + ' - ' + City()" /> 
```

我个人认为计算方法是一种更清洁的方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-23T09:53:36.167

你可以简单地写： -

```
data-bind = "text: Date() + City()" 
```

如果你想添加任何字符串**ex:- 2013-05-24 : New York**，你可以编码为：

```
data-bind = "text: Date() + ':' + City()" 
```

这种方式对我有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T12:23:39.477

要为每个部分使用单独的样式，您需要单独的 HTML 元素来附加这些样式。`span`对每个部分使用 a会起作用。

```
<div>
    <span class="date" data-bind="text:Date"></span>
    <span class="city" data-bind="text:City" ></span>
</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-19T18:46:48.567

您可以添加 2 个跨度或像这样调用它

```
<div class="date" data-bind="text:Date() +' '+ city()" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-17T14:04:16.967

使用[ko.punches](http://mbest.github.io/knockout.punches/)你可以做到

```
<div class='date city'>{{ Date() }} {{ City }}</div> 
```

具有出色插件的另一种选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-24T06:25:25.353

使用“，”或“+”号进行多个数据绑定。

```
<div class="date city" data-bind=" text:Date(), text: City" />

<div class="date city" data-bind=" text:Date() + City" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-19T17:36:21.100

尝试使用这种格式：

```
data-bind="text: city() + ', ' + state() + ' ' + zipcode()" 
```

# google-maps-api-3 - 未显示的自定义控件

> ID：16191366
> 
> 赞同：1
> 
> 时间：2013-04-24T11:56:12.600
> 
> 标签：google-maps-api-3

我正在将 v2 移植到 v3 应用程序地图，但有一件事我无法开始工作。我有一个没有显示的自定义控件，任何东西。我不确定问题出在哪里，所以我会发布我认为相关的所有内容，如果需要，请询问更多这是构造函数：

请注意，仍然有来自 v2 的评论

```
function Semaforo(){}
//Semaforo.prototype = new GControl();                                
Semaforo.prototype.semaforo = document.createElement("img");
Semaforo.prototype.initialize = function(map) {
    var container = document.createElement("div");
    var semaforoDiv = document.createElement("img");

    semaforoDiv.setAttribute("class", "semaforo");
    this.setButtonStyle_(semaforoDiv);
    this.semaforo = semaforoDiv;
    container.appendChild(semaforoDiv);
    semaforoDiv.setAttribute("src", "img/semaforo_rojo.png");
    map.getContainer().appendChild(container);      
    return container;
} 
```

还有一些方法：

```
Semaforo.prototype.setColor = function(color, mapa) {
  this.semaforo.setAttribute("src", "img/semaforo_" + color + ".png");
  if(color == "rojo")
  {
    this.semaforo.setAttribute("alt", "Tr�fico dif�cil");
        this.semaforo.setAttribute("title", "Tr�fico dif�cil");
  }
  else if(color == "ambar")
  {
    this.semaforo.setAttribute("alt", "Tr�fico irregular");
        this.semaforo.setAttribute("title", "Tr�fico irregular");
  }
  else
  {
    this.semaforo.setAttribute("alt", "Tr�fico fluido");
        this.semaforo.setAttribute("title", "Tr�fico fluido");
  }
}
Semaforo.prototype.getDefaultPosition = function() {
    return new google.maps.ControlPosition.TOP_RIGHT;
    //return new GControlPosition(G_ANCHOR_TOP_RIGHT, new GSize(0, 0));             //TO DO
}
Semaforo.prototype.setButtonStyle_ = function(button) {
    button.style.width = "19px";
    button.style.height = "53px";
    button.style.cursor = "default";
}

function getIconoSemaforo(color, mapa){
    var semaforo = new Semaforo();
    semaforo.setColor(color, mapa);
    return semaforo;
} 
```

这是我调用构造函数并尝试制作/显示控件的地方

```
function incluirDatosXML()
{
    for (var i=0; i<ciudadDato.length; i++)
    {           
        if (i==0)
        {
            if (semaforoDato[i]!="no")
            {
                var semaforo = new Semaforo(this.semaforo, map[1]);

                map[1].controls[google.maps.ControlPosition.TOP_RIGHT].push(this.semaforo);
                //map[1].addControl(semaforo);
                semaforo.setColor(semaforoDato[i], map[1]); 

                /*google.maps.event.addListener(map[1], 'idle', function() {
                    map[1].controls[google.maps.ControlPosition.TOP_RIGHT].push(this.semaforo);
                  });*/
            }           
        }           
        if (i==1)
        {
            if (semaforoDato[i]!="no")
            {
                var semaforo = new Semaforo(this.semaforo, map[2]);
                //map[2].addControl(semaforo);
                semaforo.setColor(semaforoDato[i], map[2]);
                //map[2].controls[google.maps.ControlPoistion.TOP_RIGHT].push(this.semaforo);
            }
        }           
        if (i==2)
        {
            if (semaforoDato[i]!="no")
            {
                var semaforo = new Semaforo(this.semaforo, map[3]);
                //map[3].addControl(semaforo);
                semaforo.setColor(semaforoDato[i], map[3]);
                //map[3].controls[google.maps.ControlPoistion.TOP_RIGHT].push(this.semaforo);
            }
        }               
        $("#clima"+(i+1)).attr("class",climaDato[i]+"_mini");           
        $("#temp"+(i+1)).html(temperaturadDato[i]+"&deg;");
    }
} 
```

所以你所看到的就是我到目前为止测试的内容，即使之前的测试还有一些评论

# c# - 如何使用 Mono.Cecil 解析字节数组中的 IL 指令

> ID：16191369
> 
> 赞同：4
> 
> 时间：2013-04-24T11:56:21.067
> 
> 标签：c#, cil, mono.cecil

我正在使用 CodeDOM 动态编译源代码，现在我想使用 Cecil 处理生成的特定方法的 IL 代码，CodeDOM 为我提供了作为字节数组的方法的 IL 代码，有什么方法可以创建 MethodBody， （或者只是一个 Mono.Cecil.Cil.Instruction 数组）来自该字节码而不保存程序集并从那里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-23T21:55:50.093

Cecil 中有解析二进制 IL 的功能。它在命名空间的类[`CodeReader`](https://github.com/jbevain/cecil/blob/6edabe0525a17bda3613c2f4e5b28db568cb2c21/Mono.Cecil.Cil/CodeReader.cs#L20)中`Mono.Cecil.Cil`。该方法[`ReadCode`](https://github.com/jbevain/cecil/blob/6edabe0525a17bda3613c2f4e5b28db568cb2c21/Mono.Cecil.Cil/CodeReader.cs#L141)或多或少可以满足您的需求。但是这个类的设置方式是你不能只传入一个`byte[]`. 通常，您需要解析元数据令牌，例如方法调用。`CodeReader`需要一个`MetadataReader`via 构造函数来执行此操作，`MetadataReader`而反过来又需要一个`ModuleDefinition`.

* * *

如果您不使用 Cecil，还有一个替代方案。使用[`SDILReader`](https://www.codeproject.com/Articles/14058/Parsing-the-IL-of-a-Method-Body)：

```
// get the method that you want to extract the IL from
MethodInfo methodInfo = typeof(Foo).GetMethod("Bar", BindingFlags.Static | BindingFlags.NonPublic);

Globals.LoadOpCodes();

// doesn't work on DynamicMethod
MethodBodyReader reader = new MethodBodyReader(methodInfo);
List<ILInstruction> instructions = reader.instructions;
string code = reader.GetBodyCode(); 
```

* * *

另一种选择`ILReader`来自[ILVisualizer 2010 解决方案](https://docs.microsoft.com/en-us/archive/blogs/haibo_luo/ilvisualizer-2010-solution)。

```
DynamicMethod dynamicMethod = new DynamicMethod("HelloWorld", typeof(void), new Type[] { }, typeof(Program), false);

ILGenerator ilGenerator = dynamicMethod.GetILGenerator();
ilGenerator.Emit(OpCodes.Ldstr, "hello, world");       
ilGenerator.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine", new Type[] { typeof(string) }));
ilGenerator.Emit(OpCodes.Ret);

MethodBodyInfo methodBodyInfo = MethodBodyInfo.Create(dynamicMethod);
string ilCode = string.Join(Environment.NewLine, methodBodyInfo.Instructions);

// get the method that you want to extract the IL from
MethodInfo methodInfo = typeof(Foo).GetMethod("Bar", BindingFlags.Static | BindingFlags.NonPublic);
MethodBodyInfo methodBodyInfo2 = MethodBodyInfo.Create(methodInfo);
string ilCode2 = string.Join(Environment.NewLine, methodBodyInfo2.Instructions); 
```

# c# - 泛型类列表问题

> ID：16191372
> 
> 赞同：1
> 
> 时间：2013-04-24T11:56:24.417
> 
> 标签：c#, generics

所以我有一个名为 VariableSeries 的通用类，一个从它派生的名为 Indicator 的抽象类，然后是实现该抽象类的各种类（我们称它们为指标）。我想要一个指标列表并能够使用它。

```
public class VariableSeries<T>
{
    protected List<T> Series;
    public int CurrentBar { get; private set; }

    public T this[int index]
    {
        get
        {
            if (index > CurrentBar)
                throw new Exception("Tried to look too far in the past, data does not exist.");

            return Series[CurrentBar - index];
        }
    }
    ...
} 
```

我有一个从 VariableSeries 派生的指标类：

```
public abstract class Indicator<T> : VariableSeries<T>
{
    ...
} 
```

现在我想要一个各种类型的指标列表。我的第一个想法是只声明一个列表，但这并没有真正起作用。而且我不能只是向它抛出一个接口并强制转换为它，因为我需要使用索引，它利用了泛型类型。

因此，假设我有以下指标（众多指标之一）：

```
public class MovingAverage<T> : Indicator<double>
{
    ...
} 
```

有没有办法做到以下几点：

```
List<???> Indicators = new List<???>();
Indicators.Add(new MovingAverage<type is provided dynamically>());
do stuff with Indicators[0][0]; 
```

也许某种无需指定类型即可转换为泛型类的方式，例如 ((VariableSeries<>)Indicators[0])[0]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:13:51.050

`???`in your`List<???>`必须是具体类型。在您的情况下，这种具体类型必须是一个共同共享的基本类型或接口。

您所有的类都共享一个基本类型`VariableSeries<T>`，但这不是具体/特定的。所以`List<VariableSeries<T>>`是不可能的。

如果您所有的指示符都使用通用类型`double`，那么您可以使用`List<VariableSeries<double>>`，但恐怕情况并非如此。

问题是：你打算如何处理这份清单？遍历它们，然后呢？询问他们的价值？什么价值？哪种类型？双标？一个字符串？编译器不知道！

一种解决方案可能是创建这样的界面：

```
public interface IVariableSeries
{
    object this[int index] { get; }
} 
```

在您的列表中明确实现此接口`VariableSeries<T>`并将此接口用作您的具体类型：`List<IVariableSeries>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:14:37.353

您可以使抽象类实现一个接口，该接口具有所有类共有的所有方法，并且没有类型参数。

```
class VariableSeries<T> : IUntypedInterface 
```

然后，您可以使用 a`List<IUntypedInterface>`将所有内容放在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:26:24.257

您可以使用反射做一些事情。例如，您可以使用以下命令创建具有动态 T 的 MovingAverage：

```
Type dynamicType = typeof(int); // or any other, e.g. user selected type
var instance = (dynamic)Activator.CreateInstance(typeof(MovingAverage<>).CreateGenericType(dynamicType)); 
```

问题当然是您在编译时不知道实例的类型。因此，您不能对其调用任何方法，也不能对其进行强制转换，当然类型在编译时是未知的。这就是为什么我把它包装成动态的。您可以调用任何方法，它将在后台反映到该类型并查找您调用的方法签名。

`MovingAverage<>`您可以通过执行检查实例是否为

```
typeof(MovingAverage<>).Equals(instance.GetType().GetGenericTypeDefinition()) 
```

请注意，当实例实际上是 MovingAverage 的派生类型时，这将返回 false。你也可以检查一下，但它有点复杂。

走动态路线在语言中当然是一条危险的道路，否则它非常依赖静态类型检查。您将没有重构支持，并且您必须在运行代码时进行大量测试。一个拼写错误，你的程序就会抛出异常。

另外，我建议您熟悉 .Net 反射。你正在进入一个危险的世界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:02:32.310

添加一个泛型方法并将类型传递给该方法。此代码将采用通用方法。

列表指标 = new List(); Indicators.Add(new MovingAverage());

# ios - 使用 TouchXML 如何计算以特定文本开头的标签

> ID：16191376
> 
> 赞同：0
> 
> 时间：2013-04-24T11:56:29.493
> 
> 标签：ios, xml-parsing, touchxml

假设我有一个带有标签 Reg0、Reg1、Reg2 的**XML**文件。. . “Reg”前缀是固定的。

如何使用**TouchXML 计算**以 Reg 文本开头的标签数量？

我可以在整个文档中搜索 Reg 文本，但这可能不是正确的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:08:06.470

`hasPrefix`您可以使用 if或 using 来检查 xml 文档中的当前元素`rangeOfString`。我建议您使用`NSXMLParser`内置于 iOS 中的。使用 `NSXMLParser`你可以检查`elementName`解析 XML 文档时，你可以检查你正在寻找的字符串

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName hasPrefix:@"Reg"])
        regCount++;
} 
```

或者您也可以`rangeOfString`用于`elementName`

```
if ([elementName rangeOfString:@"Reg"].location!=NSNotFound)
        regCount++; 
```

# .net - VB.NET 4.0 和 4.5 版本之间的兼容性问题

> ID：16191381
> 
> 赞同：0
> 
> 时间：2013-04-24T11:56:50.073
> 
> 标签：.net, vb.net, asp.net-4.0, .net-4.5, ftdi

我正在使用 WIN8 64 位计算机在 VB.NET 上编写程序。我安装了 .NET 4.5 框架。

我很难在具有 .NET 4.0 框架的 WINXP 32 位计算机上运行该程序。

我尝试从 bin 文件夹运行 .EXE 文件，但它说它不是有效的 win32 应用程序。

我尝试发布该程序并将其安装在另一台计算机上，但效果不佳。

我还尝试在项目 -> 属性 -> 应用程序选项卡下更改框架。

没有任何效果。有人知道我应该如何在另一台计算机上运行该程序吗？

[在使用 FTDI 芯片 ( http://www.ftdichip.com/Drivers/D2XX.htm](http://www.ftdichip.com/Drivers/D2XX.htm) )的驱动程序时，更改框架也会导致我的应用程序出现问题。有什么想法吗？FTDI 网站没有针对不同 Windows 版本的不同 DLL

我将不胜感激任何建议，谢谢， Eyal

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:59:19.007

您需要确保项目属性中的两件事：

1.  应用程序 -> 目标框架：这必须是 .NET Framework 4，而不是 .NET Framework 4.5
2.  平台目标：这必须是 x86 或（更好）任何 CPU。它不能是 x64。

# c++ - 无法打开 /dev/mem，请尝试检查权限

> ID：16191382
> 
> 赞同：0
> 
> 时间：2013-04-24T11:56:49.853
> 
> 标签：c++, raspberry-pi

我正在尝试运行该程序并将输出保存到文本文件中：

```
//Include ArduPi library
#include "eHealth.h"

//Needed for eHealth
eHealthClass eHealth;

// The loop routine runs over and over again forever:
void loop() {

  float ECG = eHealth.getECG();

  printf("ECG value :  %f V\n",ECG);
  delay(1000);
}

int main (){
   //setup();
   while(1){
      loop();
   }
   return (0);
} 
```

它运行了几秒钟，然后我收到以下错误：

```
Failed to open /dev/mem, try checking permissions.
Failed map the physical GPIO registers into the virtual memory space
Failed to open /dev/mem, try checking permissions.
Failed to map the physical BSCO (I2C) registers into the virtual memory space 
```

任何建议都会很棒。

谢谢。

# sql-server - 计算箱量 T-SQL

> ID：16191384
> 
> 赞同：0
> 
> 时间：2013-04-24T11:56:54.643
> 
> 标签：sql-server, tsql

我正在尝试计算盒子数量/最小订单数量，需要一点帮助。

如果说我需要的数量是 386 但盒子数量是 500 我需要退回 500 作为订单数量

同样，如果所需数量是 540 并且盒子数量是 500 我需要退回 1000 作为订单数量

我需要这个在 SQL 中

任何帮助将不胜感激

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:23:24.503

用于计算盒子数量的简单可重用函数。

```
CREATE FUNCTION udf_CalculateBoxQuantity
(
    @RequiredAmount INT,
    @BoxQuantity INT
)
RETURNS INT
AS
BEGIN
    DECLARE @Ret INT

    SET @Ret = @BoxQuantity * CEILING((CAST(@RequiredAmount AS DECIMAL(20,10)) / CAST(@BoxQuantity AS DECIMAL(20,10))))

    RETURN @Ret  
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:22:34.710

好问题。

我会这样解决它，用不同的@reqQuantity 值尝试一下，看看它是如何工作的。

```
DECLARE @reqQuantity INT = 386
,@boxSize INT = 500
SELECT CASE WHEN @reqQuantity % @boxSize = 0 THEN @reqQuantity ELSE (@reqQuantity/@boxSize+1)*@boxSize END AS OrderQuantity 
```

# c# - Asp.net FindControl +“具有相同ID的多个控件”

> ID：16191388
> 
> 赞同：1
> 
> 时间：2013-04-24T11:57:02.757
> 
> 标签：c#, asp.net, dynamic-controls

我对 ASP.Net 的行为非常奇怪。当我运行以下代码时，抛出异常“具有相同 ID 的多个控件”。添加控件但使用`FindControl`.

真正奇怪的是，如果我在调用之前放置一个断点并`FindControl`在引发异常的直接窗口中运行调用（到目前为止如此一致），但是当我恢复调试器时，一切正常（！！！）。机器运行完全相同的代码，但它不会再次抛出异常。

关于这个疯狂的事情的最后一件事，今天早些时候，相同的代码在 Page_Load 中，一切正常，但我重新组织了代码并将其移至单独的方法（由 Page_Load 调用）。我越来越有信心这是一个 ASP.Net 错误......

```
 dlAdvanced.DataSource = dsAdvanced;
    dlAdvanced.DataBind();

    // Load Advanced Values Controls
    #region ADV controls
    foreach (DataListItem dli in dlAdvanced.Items)
    {
        DataRow row = dsAdvanced.Tables[0].Rows[dli.ItemIndex];

        switch ((string)row["Type"])
        {
            default:
                TextBox tb = new TextBox();
                tb.ID = "Input";
                dli.FindControl("InputPlace").Controls.Add(tb);
                break;
            case "System.Int32":
            case "System.Decimal":
                TextBox tbn = new TextBox();
                tbn.ID = "Input";
                Image img = new Image();
                img.SkinID = "NumberRequired";
                img.ApplyStyleSheetSkin(this);
                dli.FindControl("InputPlace").Controls.Add(tbn);
                dli.FindControl("InputPlace").Controls.Add(img); // Exception happens here
                break;
            case "System.DateTime":
                golf.golfControls.CalendarBox cal = new golf.golfControls.CalendarBox();
                cal.ID = "Input";
                cal.SkinID = "Calendar";
                cal.ApplyStyleSheetSkin(this);
                dli.FindControl("InputPlace").Controls.Add(cal);
                break;
            case "System.Boolean":
                RadioButton rb1 = new RadioButton();
                rb1.Text = "True";
                rb1.ID = "Input";
                rb1.GroupName = "grp" + dli.ItemIndex.ToString();
                RadioButton rb2 = new RadioButton();
                rb2.Text = "False";
                rb2.ID = "Input2";
                rb2.GroupName = "grp" + dli.ItemIndex.ToString();
                dli.FindControl("InputPlace").Controls.Add(rb1);
                dli.FindControl("InputPlace").Controls.Add(rb2);
                break;
        }
    }
    #endregion 
```

**编辑**：我只是想到了一些东西并且它起作用了：

```
 DataRow row = dsAdvanced.Tables[0].Rows[dli.ItemIndex];

        var inputPlace = dli.FindControl("InputPlace");

        switch ((string)row["Type"])
        {
            default:
                TextBox tb = new TextBox();
                tb.ID = "Input";
                inputPlace.Controls.Add(tb);
                break;
            case "System.Int32":
            case "System.Decimal":
                TextBox tbn = new TextBox();
                tbn.ID = "Input";
                Image img = new Image();
                img.SkinID = "NumberRequired";
                img.ApplyStyleSheetSkin(this);
                inputPlace.Controls.Add(tbn);
                inputPlace.Controls.Add(img);
                break;
            case "System.DateTime":
                golf.golfControls.CalendarBox cal = new golf.golfControls.CalendarBox();
                cal.ID = "Input";
                cal.SkinID = "Calendar";
                cal.ApplyStyleSheetSkin(this);
                inputPlace.Controls.Add(cal);
                break;
            case "System.Boolean":
                RadioButton rb1 = new RadioButton();
                rb1.Text = "True";
                rb1.ID = "Input";
                rb1.GroupName = "grp" + dli.ItemIndex.ToString();
                RadioButton rb2 = new RadioButton();
                rb2.Text = "False";
                rb2.ID = "Input2";
                rb2.GroupName = "grp" + dli.ItemIndex.ToString();
                inputPlace.Controls.Add(rb1);
                inputPlace.Controls.Add(rb2);
                break;
        } 
```

所以目前，我的代码工作正常，但这个问题没有解决，所以如果有人知道这个错误，请赐教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T15:18:35.153

**问题实际上来自一个试图在代码的其他地方再次添加这些控件的事件**。

*我只是回答我自己的问题，所以这是一个封闭的问题，请不要对这种负责任的行为投反对票。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:14:23.883

这不是错误，您所有的控件都具有相同的 ID`tb.ID = "Input";` `cal.ID = "Input";`等

尝试在每个 ID 之后添加一个唯一的字符串，例如

```
tb.ID = "input" + dli.ItemIndex.ToString(); 
```

# java - 如何使用 JCR XPath 在 jcr:content/@jcr:data 中搜索？

> ID：16191395
> 
> 赞同：1
> 
> 时间：2013-04-24T11:57:42.367
> 
> 标签：java, xpath, aem, jcr

我想在 CQ 5.6 (AEM) 实例中包含的 JCR 存储库中搜索`.jsp`包含给定字符串的所有文件`xxx`。作为 JCR 对 XPath（或 JCR-SQL2）的解释的新手，我在表达查询方面不太成功。

这将为我提供所有`.jsp`文件：

```
//*[jcr:contains(., '.jsp')] 
```

这就是我希望限制上面`.jsp`包含的文件列表的方式`xxx`：

```
//*[jcr:contains(., '.jsp')][jcr:contains(jcr:content/@jcr:data, 'xxx')]
//*[jcr:contains(., '.jsp') and jcr:contains(jcr:content/@jcr:data, 'xxx')]
//*[jcr:contains(., '.jsp')]/jcr:content[jcr:contains(@jcr:data, 'xxx')]/.. 
```

`@jcr:data`属于类型`Binary`。以上似乎都不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:10:49.483

看起来查询应该在 nt:file 节点上，而不是在 jcr:data 节点上。请参阅此对 JCR-Jackrabbit-Xpath 表达式的答案，以[获取节点内包含的文件的搜索内容文本](https://stackoverflow.com/a/11942340/252840)。

使用 querybuilder 的快速测试显示了来自 CQ 中 JSP 文件的结果（在此示例中，它们包含“/foundation/global.jsp”）：

```
http://localhost:4502/bin/querybuilder.json?type=nt:file&nodename=*.jsp&group.1_fulltext=foundation/global.jsp 
```

给出：

```
{
  success: true,
  results: 10,
  total: 21,
  offset: 0,
  hits: [
    {
      path: "/libs/cq/personalization/components/offerpage/body.jsp",
      excerpt: " --%&gt;&lt;%@include file=&quot;/libs/<strong>foundation/global.jsp</strong>&quot;%&gt;&lt;% I18n i18n = new I18n(slingRequest); String icnCls = ...",
      name: "body.jsp",
      title: "body.jsp",
      lastModified: "2013-04-24 11:45:05",
      created: "2013-04-24 11:32:58",
      size: "3 KB",
      mimeType: "text/plain"
    },
...
} 
```

# php - 没有memcache支持的phpfox没有工作？

> ID：16191403
> 
> 赞同：0
> 
> 时间：2013-04-24T11:58:10.717
> 
> 标签：php, phpfox

有没有办法在没有 memcache 服务的情况下使用 Phpfox？因为我使用的是 hostgator 共享服务器，作为不提供任何 memcache 服务的共享服务器，它仅在专用服务器中可用。

我正在使用 Phpfox1.5 以前托管在亚马逊服务器上，在那里可以使用 mecache 服务，但它对我来说非常昂贵，所以我想将我的网站从亚马逊更改为 hostgator 托管服务。

> 致命错误：在第 64 行的 /home/latisse/public_html/spicypeeps.com/include/library/phpfox/cache/storage/memcache.class.php 中找不到类“Memcache”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:01:30.093

当然，只需在其上包含一个带有[此类](https://raw.github.com/kajala/mmvc/master/sys/MemcacheDummy.php)的文件：

```
<?php
// Dummy Memcache for a development environment where Memcache is not installed. Part of mmvc library, https://github.com/kajala/mmvc
// Dependencies: none

//if ( defined('MEMCACHE_COMPRESSED') )
//  die( "Memcache seems to be already installed, MemcacheDummy.php should never be included in this case\n" );

define( 'MEMCACHE_COMPRESSED', 1234 ); // dummy value

/**
 * Dummy Memcache class for a development environment where Memcache is not installed.
 * Note that this class does not do ANYTHING and it is only a convenience for 
 * the development environment and should never be used in production server.
 */
class Memcache
{
    function __construct()
    {
    }

    function connect( $host, $port )
    {
        assert( is_string($host) );
        assert( is_numeric($port) );
        return true;
    }

    function set( $key, $obj, $compressed=false, $expires=0 )
    {
        assert( is_string($key) );
        assert( $compressed === false || $compressed == MEMCACHE_COMPRESSED );
        assert( is_numeric($expires) );
        return true;
    }

    function get( $key )
    {
        assert( is_string($key) || is_array($key) );
        return false;
    }
}

?> 
```

注意：代码不是我的，它是在 BSD 许可下获得许可的。原作者：[链接](https://github.com/kajala/mmvc)

# riak - Riak 1.3.1 不会在 lucid、Ec2 实例上启动

> ID：16191407
> 
> 赞同：0
> 
> 时间：2013-04-24T11:58:18.620
> 
> 标签：riak

我已经在带有 libssl 的 EC2 实例 lucid amd64 上安装了 riak (apt-get)。

运行 riak start 时，我得到：

```
Attempting to restart script through sudo -H -u riak
Riak failed to start within 15 seconds,
see the output of 'riak console' for more information.
If you want to wait longer, set the environment variable
WAIT_FOR_ERLANG to the number of seconds to wait. 
```

运行 riak 控制台：

```
Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot /usr/lib/riak/releases/1.3.1/riak
-embedded -config /etc/riak/app.config
-pa /usr/lib/riak/lib/basho-patches
-args_file /etc/riak/vm.args -- console

Root: /usr/lib/riak

Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:2:2] [async-threads:64] [kernel-poll:true]

/usr/lib/riak/lib/os_mon-2.2.9/priv/bin/memsup: Erlang has closed. 

Erlang has closed
{"Kernel pid terminated",application_controller,"{application_start_failure,riak_core,     {shutdown,{riak_core_app,start,[normal,[]]}}}"}

Crash dump was written to: /var/log/riak/erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,riak_core,   {shutdown,{riak_core_app,start,[normal,[]]}}}) 
```

错误日志：

```
2013-04-24 11:36:20.897 [error] <0.146.0> CRASH REPORT Process riak_core_handoff_listener with 1 neighbours exited with reason: bad return value: {error,eaddrinuse} in    gen_server:init_it/6 line 332
2013-04-24 11:36:20.899 [error] <0.145.0> Supervisor riak_core_handoff_listener_sup had   child riak_core_handoff_listener started with riak_core_handoff_listener:start_link() at undefined exit with reason bad return value: {error,eaddrinuse} in context start_error
2013-04-24 11:36:20.902 [error] <0.142.0> Supervisor riak_core_handoff_sup had child riak_core_handoff_listener_sup started with riak_core_handoff_listener_sup:start_link() at undefined exit with reason shutdown in context start_error

2013-04-24 11:36:20.903 [error] <0.130.0> Supervisor riak_core_sup had child riak_core_handoff_sup started with riak_core_handoff_sup:start_link() at undefined exit with reason shutdown in context start_error 
```

我是 Riak 的新手，基本上试图通过“Fast Track”文档运行。

配置中的默认核心 IP 设置均未更改。它们仍然设置为 {http, [ {"127.0.0.1", 8098 } ]}, {handoff_port, 8099 }

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-16T19:31:19.820

I know this is old but there is some solid documentation about the errors in the `crash.dump` file on the [Riak site](http://docs.basho.com/riak/latest/ops/running/recovery/errors/).

# html - 将 div 扩展到屏幕大小之外

> ID：16191408
> 
> 赞同：0
> 
> 时间：2013-04-24T11:58:19.923
> 
> 标签：html, css

我的问题特定于背景图像。我已将背景图像应用于身体并将其水平居中。对于每一页，我将在标题下方添加一个段落，每个段落的大小都会不同，从而导致滚动。背景图像必须在段落后面流动，但我不能让正文标签扩展以包含段落，这意味着当您向下滚动时背景图像会被切断。我不想设置特定的高度，因为这会使页面滚动到段落之外。我已经尝试了几乎所有我能想到的相对/绝对位置和高度/最小高度的组合。

```
<html>
    <body>
        <div class="paragraph">
            <p>text!</p>
        </div
</html> 
```

CSS

```
html {
    background:             url('/images/bg.png');
    margin:                 0;
    padding:                0;
    height:                 100%;
    min-height:             100%;
}

body {
    margin:                 0;
    padding:                0 0 50px 0;
    background-image:       url('../images/fullheader.gif');
    background-position:    center 20px;
    background-repeat:      no-repeat;
    position:               absolute;
    top:                    0px;
    bottom:                 0px;
    right:                  0px;
    left:                   0px;
    min-height:             100%;
}

.paragraph {
    width:                  640px;
    padding:                10px 20px;
    margin:                 400px auto 0 auto;
    min-height:             100%;
} 
```

如果有帮助，我可以发布屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:32:35.143

如果您的目标是保持背景的高度足以覆盖段落的大小，并且限制**不重复** 且不**扭曲方面收音机**，那么有一个简单而干净的解决方案 在正文标签中定位背景。将其大小设置为 auto 水平大小和高度 100% 该段落包含在正文中将推动正文高度，这将推动背景高度而不会扭曲纵横比

```
body {
    width:100%; <!-- or what ever.....-->
    background:url("whatever.jpg") no-repeat;
    background-size:auto 100%;
} 
```

这是给你的[小提琴](http://jsfiddle.net/Fico/6Nedb/)。我使用了维基百科图像。玩它修改段落的数量等......希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:01:52.433

像这样将css添加到正文中

```
 body {
             background:#fff url(background.jpg) repeat-y top center;
             margin:0px;
             padding:0px;
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:14:50.767

如果垂直重复不是一个选项，并且您的 bg 图像当然不能无穷无尽，我认为在一些滚动后不切断图像的唯一方法是修复它的位置：

```
body {
    background-attachment: fixed;
} 
```

不，可能还有另一种解决方案，但在大多数情况下，这看起来不太好：设置`background-size`，例如：

```
body {
    background-size: contain;
} 
```

# database - 时间序列的 Cassandra 数据模型

> ID：16191410
> 
> 赞同：3
> 
> 时间：2013-04-24T11:58:29.967
> 
> 标签：database, nosql, cassandra, time-series, bigdata

我正在研究用于存储时间序列的 Cassandra 数据模型（我是 Cassandra 新手）。我有两个应用程序：盘中股票数据和传感器数据。

股票数据将以一分钟的时间分辨率保存。七个数据字段构建一个时间框架：交易品种、日期时间、开盘价、最高价、最低价、收盘价、成交量

我将主要通过符号和日期查询数据。例如，给我日期时间订购的 2013 年 1 月 1 日到 2013 年 1 月 31 日之间 AAPL 的所有数据。cassandra 查询的建议是查询整个列。因此，您可以使用 Open、High、Low、Close、Volume 键创建五行。每个符号和分钟都有自己的列。例如“AAPL:2013-01-04T130400Z”。这将产生一个包含五行和 n*NT 列的表格，其中 n = 符号数，nT = 分钟数。大多数时候我会查询日期范围。即一天中的所有分钟。所以我可以重新排列数据，使其具有名为“AAPL:2013-01-04”的列和行：OpenT130400Z、HighT130400Z、LowT130400Z、CloseT130400Z、VolumeT130400Z。这将产生一个包含 n*nD 列（n：符号数，nD：天数）和 5*nM 行（nM：每天的分钟数/条目数）的表。

总结一下：我有列，其中包含一个符号一整天的信息。

我在这里找到了如何在 cassandra 中处理时间序列数据的描述[http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra](http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra) 但我真的不明白，如果他们使用小时（1332960000）作为列名或作为行键！？我知道他们使用小时作为行键并将小时间步长作为列。所以他们会有一个固定的列号。但这在阅读方面会有缺点，因为我必须对键进行范围查询！我对吗？

第二个问题：如果我有传感器数据，它比 1 分钟的库存数据更精细（假设我必须以微秒的分辨率保存时间步长）我将如何处理这个问题？如果我使用列来保存传感器通道和小时的组合，以及自上一小时以来的微秒行，这将导致 3,600,000,000 行和 n*nH 列（n：传感器数，nH：小时数）。我无法将自上一小时以来的微秒用于列，因为我有 36 亿个点，高于允许的 20 亿列数。

我得到了吗？你怎么看这个问题？如何解决？

谢谢！

最好的，马耳他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:58:17.840

所以我对你关于股票数据的第一个问题有一个建议。一个简单的实现可能如下所示：

行键：

栏目格式：

名称：当前日期时间，粒度为一分钟

Value：Open,High,Low,Close,Volume的复合列

所以你会有类似的东西

```
苹果 = [2013-05-02-15:38:00 | 441.78:448.59:440.63:15066146:445.52] ... [2013-05-02-15:39:00 | 441.78:448.59:440.63:15066146:445.52] ... [2013-05-02-15:40:00 | 441.78:448.59:440.63:15066146:445.52]

```

这将在一年内为您提供大约 50 万列，因此可能在 4 年内都可以。我不会去尝试达到 20 亿的上限。您可以做的是在行键上定义一个拆分因子。这完全取决于您的使用模式，但一个简单的可能是在年份，因此列族条目可能看起来像这样，带有一个复合行键，这将保证每行总是少于一百万列。

```
苹果：2013 = [05-02-15:38:00 | 441.78:448.59:440.63:15066146:445.52] ... [05-02-15:39:00 | 441.78:448.59:440.63:15066146:445.52] ... [05-02-15:40:00 | 441.78:448.59:440.63:15066146:445.52]

```

# eclipse - 在 Eclipse 中将项目关联到 Sonar

> ID：16191413
> 
> 赞同：9
> 
> 时间：2013-04-24T11:58:37.613
> 
> 标签：eclipse, sonarqube

我有带有 MyEclipse 10 Java 企业开发插件的 Eclipse Indigo 3.7 基础：

*   我已经为 eclipse 安装了 Sonar 插件。
*   安装 Sonar 服务器并从 localhost (localhost:9000) 在本地运行它
*   从Windows>Preferences>Sonar>Servers测试了 Eclipse 中的服务器连接。连接成功。
*   对于我的项目，为声纳（声纳：声纳）运行 Maven 目标。构建成功。我可以在 localhost 中浏览结果。（本地主机：9000）

我的问题是将项目与声纳相关联。当我右键单击我的项目时，配置 > 与声纳关联，我得到一个没有任何反应的屏幕。

基本上屏幕有 2 个字段，Project 和 Sonar Project。项目字段包含我的项目的名称，声纳项目字段列出此消息 - “单击此处开始搜索远程声纳项目”

*   我单击该字段并输入我的 groupid:artifactid 但没有任何反应。
*   我还尝试输入 Sonar 仪表板中列出的项目名称，但这也无济于事。

当我右键单击我的项目时，在上下文菜单中我无法看到“声纳”选项。

帮助我将我的项目与 Eclipse 中的 Sonar 相关联。请让我知道我错过了什么。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-10T15:17:29.093

我在 Eclipse 中的 Liferay 项目（liferay-plugins-sdk.6.2.0）也遇到了同样的问题，这是我如何让它工作的：

*   安装eclipse插件，并测试服务器连接
*   安装 Sonar 服务器并启动它（例如 on `yourhost:9000`）
*   转到`yourhost:9000`并登录（管理员/管理员，除非您更改它）
*   转到设置 -> 系统 -> 配置
*   创建新项目（`+Create`在右上角）
*   我用过 key=Liferay6.2 和 name=liferay-plugins-sdk-6.2.0

完成上述步骤后，我回到了我的 eclipse 项目，并且`Configure > Associate with Sonar`能够搜索/找到 liferay 项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-29T08:34:29.713

使用 Sonar Eclipse 时，您只能将 Eclipse 项目与相应的 Sonar 模块相关联（除非您正在处理单模块项目，这实际上很少见）。

这意味着您无法关联根项目（这是合乎逻辑的，因为根据定义，根项目在 Sonar 中没有源）。您必须右键单击所有导入的 Maven 模块，并在一次运行中将它们全部关联起来。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-21T12:47:01.930

Go to your project folder in eclipse workspace from the terminal and run following command:

```
 mvn sonar:sonar 
```

This command will create your sonar project. Try associating the project again. Make sure you enter the name associated with your project from your pom file. (Clear the text field)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-02T09:59:02.673

## 经过这么多分析后的最佳答案（我遇到了同样的问题）

1.  忘记先添加关联 SonarQube
2.  如果你想添加声纳组 ID 创建`sonar-project.properties`

只需添加以下代码

```
# Required metadata
sonar.projectKey=javapractice
sonar.projectName=javapractice
sonar.projectVersion=1.0

# Comma-separated paths to directories with sources (required)
sonar.sources=src

# Language
sonar.language=java

# Encoding of the source files
sonar.sourceEncoding=UTF-8 
```

4.  从 github 下载 sonnar-runner。
5.  从 github 下载声纳示例
6.  下载声纳
7.  从命令提示符根据您的操作系统运行声纳
8.  转到类似路径的声纳示例`c:/sonar example/java/.. /.. *.properties`路径（在 src 旁边）
9.  跑声纳跑者`c:/.... / sonnar-runner.bat -e`
10.  之后转到浏览器`http://localhost:9000`（登录：`admin`/ `admin`）
11.  您的项目将显示在浏览器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-15T16:07:06.527

在项目上选择*Maven ，然后选择**Select Maven Profiles*，然后在 Eclipse 中选择*with-sonar 。*这将在项目上启用声纳功能。现在，当您右键单击项目时，您将看到*声纳选项。*

# linq - 在 linq 查询中使用 case 语句

> ID：16191414
> 
> 赞同：2
> 
> 时间：2013-04-24T11:58:37.637
> 
> 标签：linq, entity-framework, entity-framework-4

我有一个这样的 linq 查询：

```
 var trfplanList = (from at in entities.tdp_ProviderAccomodationType
                        join ap in entities.tdp_ProviderAccomodationTariffPlan on at.PATID equals ap.FK_PATID
                        join ac in entities.tdp_ProviderAccomodationCategory on ap.FK_PACID equals ac.PACID
                        where at.FK_ProviderID == CityID && at.IsApproved == 0 && ap.IsApproved == 0 && ac.AccomodationCategory == "Double Occupy"
                        orderby at.AccomodationType,ap.FromDate,ap.SType 
                        select new AccomodationTariff
                        {
                            AccomodationType = at.AccomodationType,
                            SType = ap.SType,
                            FromDate = Convert.ToDateTime(ap.FromDate),
                            ToDate = Convert.ToDateTime(ap.ToDate),
                            RoomTariff = Convert.ToDecimal(ap.Rate),
                            ExPAXRate = Convert.ToDecimal(at.PerPaxRate)
                        }).ToList(); 
```

我有两个问题：

1.  在 select new {} 块中分配时不能转换值吗？它给了我一个项目错误。

2.  我想在从数据库中选择时使用“案例” `ExPAXRate`，例如在我以前编写的 SQL 中：

    CASE ap.SType WHEN 'Off Season' THEN at.PerPaxRateOS ELSE at.PerPaxRate END AS ExPAXRate

我可以在 linq 查询中使用类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:11:55.127

> 在 select new {} 块中分配时我不能转换值吗

不，你不能（很遗憾）。EF 不知道如何将其转换为 SQL。

> 我想用“案例”

您可以使用三元运算符 ( `?`)：

```
ExPAXRate = at.OffSeason ? at.PerPaxRateOS : at.PerPaxRate 
```

（假设`at.OffSeason`存在）。

转换问题的解决方案可能是先投影到匿名类型，然后在内存中`AccomodationTariff`：

```
...
select new
{
    AccomodationType = at.AccomodationType,
    SType = ap.SType,
    FromDate = ap.FromDate,
    ToDate = ap.ToDate,
    RoomTariff = ap.Rate,
    ExPAXRate = at.PerPaxRate
}).AsEnumerable()
.Select(x => new AccomodationTariff
{
    AccomodationType = x.AccomodationType,
    SType = x.SType,
    FromDate = Convert.ToDateTime(x.FromDate),
    ToDate = Convert.ToDateTime(x.ToDate),
    RoomTariff = Convert.ToDecimal(x.Rate),
    ExPAXRate = Convert.ToDecimal(x.PerPaxRate)
}).ToList(); 
```

# highcharts - 检测点击，并在 Highcharts 中设置堆叠区域的样式？

> ID：16191417
> 
> 赞同：0
> 
> 时间：2013-04-24T11:58:53.700
> 
> 标签：highcharts

示例图表：[http ://www.highcharts.com/demo/area-stacked-percent](http://www.highcharts.com/demo/area-stacked-percent)

我希望能够检测到不同区域（蓝色亚洲、海军非洲等）的点击，这样我就可以对我为亚洲或非洲拥有的所有系列做一些事情。注意：我希望能够检测对填充区域的点击，而不是区域/系列点。

我想我可以使用 area.events.click 来完成，查找坐标并确定坐标是否在特定区域内，但这似乎需要大量工作才能实现这样的简单事情。是否有一种内置的方式来收听这样的事件？

此外，在相关说明中 - 是否可以为区域添加悬停和选定样式？

编辑：似乎可以通过设置来检测区域上的点击`plotOptions.series.trackByArea`，`true`但似乎这样我无法区分点击点和点击区域。有什么想法可以可靠地区分它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:21:41.470

您可以通过单击区域和显示系列名称来检测它

[http://jsfiddle.net/c2P63/5/](http://jsfiddle.net/c2P63/5/)

```
events: {
                    click: function(event) {
                        alert(this.name);
                        alert(event.x);
                        alert(event.y);
                    }   
                } 
```

# r - R：从csv中提取正确的时间日期

> ID：16191422
> 
> 赞同：2
> 
> 时间：2013-04-24T11:59:12.110
> 
> 标签：r, csv, time-series, text-parsing

我有一个 csv，其中包含一些时间序列数据，日期时间格式如下：

```
mydata <- read.csv("mydata.csv")
> mode(mydata$t_5min[1])
[1] "numeric" 
```

看起来 R 将其解释为一个因素，因为它无法理解格式：

```
mydata$t_5min[1]
[1] 1/3/2012 16:00
27698 Levels: 10/10/2012 10:00 10/10/2012 10:05 10/10/2012 10:10 10/10/2012 10:15 ... 9/6/2012 9:55 
```

我尝试使用 strptime，这在单个条目上似乎可以正常工作：

```
> strptime(x=mydata$t_5min[2],format="%d/%m/%Y %H:%M", tz="")
[1] "2012-04-01 06:10:00"
> mode(strptime(x=mydata$t_5min[2],format="%d/%m/%Y %H:%M", tz=""))
[1] "list" 
```

但是如果我用 sapply 尝试这个，我会收到以下错误：

```
mydata$t_5min <- sapply(mydata$t_5min, strptime, format="%d/%m/%Y %H:%M", tz="")
Error in `$<-.data.frame`(`*tmp*`, "t_5min", value = list(sec = 0, min = 0L,  : 
replacement has 9000 rows, data has 1000 
```

我尝试了 timeDate 库，结果稍好：

```
> as.timeDate(mydata$t_5min[1])
GMT
[1] [2012-01-03] 
```

但是，我需要精确度。但是，timeDate 函数中的示例代码似乎不起作用（或者我用错了，但有点简短）：

```
as.timeDate(mydata$t_5min[2], units=c("min"))
Error in as.timeDate(mydata$t_5min[2], units = c("min")) : 
unused argument(s) (units = c("min")) 
```

**将这个时间数据转换为 R 可以使用的东西的正确方法是什么？**

以下是复制这些结果的一些数据：

```
t_5min,n,value
1/3/2012 16:00,16,48.125
1/3/2012 16:05,28,44.39285714
1/3/2012 16:10,29,37.44827586
1/3/2012 16:15,28,30.39285714
1/3/2012 16:20,28,23.67857143
1/3/2012 16:25,29,19.10344828
1/3/2012 16:30,28,16.35714286
1/3/2012 16:35,29,14.34482759
1/3/2012 16:40,28,11.71428571 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:13:18.530

您可以使用`read.zoo`以正确格式直接读取数据：

```
library(zoo)
## you repalce text=... here by file = "mydata.csv"
read.zoo(text='
t_5min,n,value
1/3/2012 16:00,16,48.125
1/3/2012 16:05,28,44.39285714
1/3/2012 16:10,29,37.44827586
1/3/2012 16:15,28,30.39285714
1/3/2012 16:20,28,23.67857143
1/3/2012 16:25,29,19.10344828
1/3/2012 16:30,28,16.35714286
1/3/2012 16:35,29,14.34482759
1/3/2012 16:40,28,11.71428571',header=TRUE,format="%d/%m/%Y %H:%M", tz="",sep=',')

                    n    value
2012-03-01 16:00:00 16 48.12500
2012-03-01 16:05:00 28 44.39286
2012-03-01 16:10:00 29 37.44828
2012-03-01 16:15:00 28 30.39286
2012-03-01 16:20:00 28 23.67857
2012-03-01 16:25:00 29 19.10345
2012-03-01 16:30:00 28 16.35714
2012-03-01 16:35:00 29 14.34483
2012-03-01 16:40:00 28 11.71429 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:18:39.573

尝试这个：

```
> as.POSIXlt(as.character(df$t_5min), format="%d/%m/%Y %H:%M")
[1] "2012-03-01 16:00:00" "2012-03-01 16:05:00" "2012-03-01 16:10:00"
[4] "2012-03-01 16:15:00" "2012-03-01 16:20:00" "2012-03-01 16:25:00"
[7] "2012-03-01 16:30:00" "2012-03-01 16:35:00" "2012-03-01 16:40:00" 
```

# git - Git：删除.gitignore文件后忽略文件

> ID：16191429
> 
> 赞同：0
> 
> 时间：2013-04-24T11:59:30.393
> 
> 标签：git

我有一个 magento 设置，在其中创建了一个 .gitignore 文件，如下所示：

```
########   MAGENTO RELATED FILES AND FOLDERS    ######
var/*
media/*
app/etc/local.xml
minified/css/*
minified/css_secure/*
minified/js/*
minified/media/* 
```

后来我发现由于这条规则`var`，`media`dirs 也被忽略并且不是提交的一部分。所以我尝试评论`var/*`和`media/*`行，我尝试删除`.gitignore`文件，提交并推送到远程仓库。但没有任何效果。

有没有机会让他们重新受到追踪？请注意只有一个`.gitignore`文件。

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:10:52.370

git 跟踪内容；目录不是内容，它们是结构。您可以做的是，将空的占位符文件放入`var/`并`media/`跟踪它们。这会将目录结构置于 git 的监督之下。

您可以在 .gitignore中保留`var/*`和行，只需为占位符文件添加一个例外，例如`media/*`

```
!var/README.md
!media/README.md 
```

# android - 如何将数据库条目与列表视图项相关联

> ID：16191435
> 
> 赞同：0
> 
> 时间：2013-04-24T11:59:53.383
> 
> 标签：android, sqlite, listview, listitem

我将很快解释我想要做什么。我有一个用数据库`listView`中的数据填充的自定义`SQLite`。长按列表项后，它就会被添加到收藏夹：我在数据库中有一个单独的列，其中“1”分配给添加到收藏夹的条目。到此为止，一切都很好。

我现在要做的是用星星标记最喜欢的列表项。我想查询 db like`SELECT text (id?) FROM info WHERE favourite = 1`并在相应的列表项附近放置一个星号。问题是我不知道如何`checkbox`通过其`position`（或`text`？）调用特定的列表项（？）并将其标记为选中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T08:08:29.090

这是带有复选框的列表的 CursorAdapter 示例。

```
public class ItemCursorAdapter extends CursorAdapter {

private final LayoutInflater inflater;
    private int itemNameIndex;
    private int itemCheckIndex;
    private DBHelper dbHelper;
public ItemCursorAdapter(Context context, Cursor cursor, boolean autoRequery) {
        super(context, cursor, autoRequery);
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        itemNameIndex = cursor.getColumnIndex(DBHelper.ITEM.NAME);
        itemCheckIndex = cursor.getColumnIndex(DBHelper.ITEM.CHECK);
        dbHelper = DBHelper.getInstance(context);
    }
public void bindView(View view, Context context, Cursor cursor) {
        String name = cursor.getString(itemNameIndex);
        boolean checked = cursor.getInt(itemCheckIndex) > 0;
        TextView nameTxt = (TextView) view.findViewById(R.id.item_name);
        CheckBox checkChk = (CheckBox) view.findViewById(R.id.item_check);
        checkChk.setOnCheckedChangeListener(new onItemCheckChangeListener(name));
        nameTxt.setText(name);
        checkChk.setChecked(checked);
    }
@Override
    public View newView(Context context, Cursor c, ViewGroup parent) {
        View view = inflater.inflate(R.layout.row_item, null);
        return view;
    }
private class onItemCheckChangeListener implements OnCheckedChangeListener {
private String itemName;
public onItemCheckChangeListener(String itemName) {
            this.itemName = itemName;
        }
@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            dbHelper.changeItemCheck(itemName, isChecked);
        }
}
}
And here example of table inside DBHelper
public static interface ITEM extends BaseColumns {
String TABLE_NAME = "itemTable";
String NAME = "itemName";
String CHECK = "itemCheck";
}
Method to get cursor for list
public Cursor getAllItemCursor() {
return getReadableDatabase().rawQuery("SELECT * FROM " + ITEM.TABLE_NAME, null);
}

and to update checkbox status to db 
public void changeItemCheck(String itemName, boolean isChecked) {
ContentValues values = new ContentValues();
values.put(ITEM.CHECK, isChecked);
getWritableDatabase().update(ITEM.TABLE_NAME, values, ITEM.NAME + " =? ", new String[] { itemName });
} 
```

# ios - 在 ios 的谷歌地图上添加多个图钉

> ID：16191436
> 
> 赞同：2
> 
> 时间：2013-04-24T11:59:54.300
> 
> 标签：ios, ios5, ios6, annotations, google-maps-sdk-ios

我想在加载谷歌地图时添加多个图钉。

我有一个附近位置的纬度和经度值列表。如何使用图钉在地图上显示所有这些位置。我正在使用适用于 iOS 的 Google SDK。

我正在使用以下代码，但它对我不起作用。

```
NSMutableArray *array = [NSMutableArray arrayWithObjects:@"12.981902,80.266333",@"12.982902,80.266363", nil];

CLLocationCoordinate2D pointsToUse[5];

for (int i = 0; i < [array Size]; i++)
{
    pointsToUse[i] = CLLocationCoordinate2DMake([[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:0] floatValue],[[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:1] floatValue]);

    [array removeObjectAtIndex:0];

    GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
    options.position = pointsToUse[i];
    [mapView_ animateToLocation:pointsToUse[i]];
    [mapView_ addMarkerWithOptions:options];
} 
```

我已经尝试过足够的搜索，但没有足够的文档来回答我的问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:36:21.467

这对我有用：

```
for(GMSMarker*marker in array)
    {
        GMSMarker *mkr= [[GMSMarker alloc]init];
        [mkr setPosition:CLLocationCoordinate2DMake(<coord>)];

        [mkr setAnimated:YES];
        [mkr setTitle:<Title>];
        [mkr setSnippet:<Snippet>];
        [mkr setMap:mapView_];
    } 
```

使用最新的谷歌地图 SDK。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T11:54:58.493

```
self.view = mapView_;     
for(int i=0;i<[array count];i++)
{       
   GMSMarker *marker = [[GMSMarker alloc] init];
   marker.animated=YES;
   marker.position = CLLocationCoordinate2DMake(latitude,longitude);
   marker.title = @"name";
   marker.snippet = @"snippet";
   marker.map = mapView_;
} 
```

这对我有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T08:29:37.767

为了快速，我们可以使用

```
for i in 0..<array.count() {
    var marker = GMSMarker()
    marker.animated = true
    marker.position = CLLocationCoordinate2DMake(latitude, longitude)
    marker.title = "name"
    marker.snippet = "snippet"
    marker.map = mapView_
} 
```

# jquery - 复选框和单选按钮选择的值未使用 Jquery 清除

> ID：16191444
> 
> 赞同：0
> 
> 时间：2013-04-24T12:00:10.987
> 
> 标签：jquery, ajax, asp.net-mvc-3

当我单击取消按钮时，我需要清除控件（文本框、复选框和单选按钮）中输入或选择的值。

不幸的是，复选框和单选按钮选择的值在取消 btn 单击时未更改，并且文本框值被清除。

控件位于具有 id 的 div 中`divUser`。如何清除复选框选择和单选按钮？

```
$("#btnCancel").click(function () {          
    $('input, select,input:radio', $('#divUser')).val(''); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:14:03.377

要取消选择或取消选中单选按钮和复选框，您需要删除该`checked`属性：

```
$("input:radio,input:checkbox").removeAttr('checked'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:01:53.857

尝试

```
$("#btnCancel").click(function ()
{
   $('input, select,input:radio,#divUser').val('');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:14:50.753

```
$("#btnCancel").click(function () {          
    $('input', $('#divUser')).val(''); 
    $('select,input:radio', $('#divUser')).attr('checked', false); 
}); 
```

这里的技巧是更改检查属性而不是值。

# c++ - 因使用双重逻辑非 (!!) 运算符而感到困惑

> ID：16191446
> 
> 赞同：35
> 
> 时间：2013-04-24T12:00:16.180
> 
> 标签：c++, bitwise-operators, logical-operators

我有一些广泛使用`!!`. 我有点困惑，因为据我所知`!!`，它不是一个单独的操作员，而是两个`!`接一个。所以这意味着这`!!foo`与 just 相同`foo`。

有什么地方和/或理由`!!`真正有意义吗？我在想它是否可能有一点明智的意义？`foo`所以你首先对结果执行一些位操作`!`？但我似乎不记得`!`被用作一个有点明智的操作员，似乎也没有找到任何参考告诉我它是。据我所知`!`，仅用作逻辑运算符，在这种情况下

`!!foo == foo`

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-24T12:03:10.693

它不像双重否定那么简单。例如，如果您有`x == 5`，然后应用两个 ！运算符 ( `!!x`)，它将变为 1 - 因此，它用于标准化`{0, 1}`范围内的布尔值。

请注意，您可以将零用作布尔值 false，将非零值用作布尔值 true，但您可能需要将结果标准化为 0 或 1，这`!!`是有用的时候。

它与 相同`x != 0 ? 1 : 0`。

另外，请注意，如果不在集合**中，这将不是真的：**`foo``{0, 1}`

`!!foo == foo`

```
#include <iostream>

using namespace std;

int main()
{
        int foo = 5;

        if(foo == !!foo)
        {
                cout << "foo == !!foo" << endl;
        }
        else
        {
                cout << "foo != !!foo" << endl;
        }

        return 0;
} 
```

打印`foo != !!foo`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-24T12:02:15.067

它可以用作`foo`转换为布尔表达式的速记。出于某种原因，您可能只想将非布尔表达式转换为 true 或 false。

`foo = !!foo`如果它不为零，它将变成，如果`foo`它已经是，则将其保留。`1``0`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T12:02:07.560

如果`foo != 0`，那么`!!foo == 1`。转换为 bool 基本上是一个技巧。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T12:04:11.630

如果`foo`不是 bool 类型，那么`!!foo`将是。所以`!!foo`可以是 1 或 0。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T12:41:10.597

此技术用于在布尔上下文中对变量进行安全评估。如果您与 bool ( `operator bool()`) 进行正常对话，则无关变量（具有不同类型）可能会以不需要的方式参与布尔表达式。`operator!`实现了返回否定布尔值的定义。它的结果必须再次被否定。只需看看[Safe bool idiom](http://en.wikibooks.org/wiki/More_C++_Idioms/Safe_bool)。

# mercurial - mercurial 忽略整个存储库中的 .zip 文件

> ID：16191449
> 
> 赞同：1
> 
> 时间：2013-04-24T12:00:20.980
> 
> 标签：mercurial, hgignore

我正在使用 Mercurial 进行版本控制。我试图忽略存储库中的 zip 文件，我的 hgignore 文件位于项目的根目录中

我从[http://www.selenic.com/mercurial/hg.1.html#patterns](http://www.selenic.com/mercurial/hg.1.html#patterns)获得了以下代码。

```
syntax: glob
**.zip

syntax: regexp
re:.*\.zip$ 
```

但这些对我不起作用。

我也试过

```
hg addremove 
```

和

```
hg forget -I '*' 
```

但它没有帮助。您能告诉我如何正确忽略存储库中的 zip 文件吗？感谢帮助。

编辑

我的问题是 zip 文件已经添加到存储库中。我首先忘记了他们并承诺。现在它忽略了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:05:28.333

只需`*.zip`在里面写`.hgignore`就可以做到这一点。里面的模式`.hgignore`没有根，所以`*.zip`无论它出现在哪里都会匹配一个 zip 存档。

# php - 与 CURL (PHP) 的 SSL 连接在 Linux 上运行，相同的代码在 Windows 上失败

> ID：16191450
> 
> 赞同：4
> 
> 时间：2013-04-24T12:00:31.803
> 
> 标签：php, windows, curl, ssl, nusoap

[我使用Nusoap](http://nusoap.sourceforge.net/)编写了一个使用我们银行 WSDL 服务的脚本。请求使用证书签名。该脚本在 Ubuntu、Apache 2.2、PHP 5.4 上运行良好。

当试图在 Windows 7（64 位、Apache 2.2、PHP 5.4）上实现相同的目标时，我得到了 Curl 抛出的这个错误：

```
**SSL read: error:140940E5:SSL routines:SSL3_READ_BYTES:ssl handshake failure, errno 0** 
```

我禁用了防火墙和防病毒软件。我可以提供 Curl 选项详细信息，或任何其他代码或信息。谢谢！

**解决方案：**

curl_setopt($this->ch, CURLOPT_SSLVERSION, 3);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:43:58.020

要使用 SSL 连接，您必须`php_openssl.dll`在**php.ini中启用**

当您使用 curl 时，一个常见问题是 openssl 模块默认使用错误的 SSL 版本。大多数情况下，您应该将 SSL 版本设置为 3。

```
curl_setopt($curl, CURLOPT_SSLVERSION,3); 
```

几天前我遇到了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T12:52:57.027

如果您在基于 linux 的服务器上使用 nfephp-org lib，您可以使用该代码来更改 ssl 协议：

```
$nfe = new ToolsNFe(MY_CONFIG_PATH);
$nfe->setSSLProtocol('SSLv3'); 
```

当 MY_CONFIG_PATH 是你的配置文件的路径。

Se você estátentando usar o nfephp-org e está com esse erro em servidores linux, mude o protocolo ssl, como no código acima。

# c++ - 动态改变大小但允许重用对象且不分配内存的集合

> ID：16191460
> 
> 赞同：0
> 
> 时间：2013-04-24T12:00:50.607
> 
> 标签：c++

从网络我收到某些条目。这是证券交易所报价，类似于：“HP 100 1”、“HP 101 10”、“HP 102 3”等。

一个网络数据包可能包含一个或多个条目。从理论上讲，网络数据包可以包含多少条目是有限制的：`Maximum transmission unit of the network / sizeof(entry)`. 但是，此限制可能会因启动应用程序的机器和位置而异。

每次收到新数据包时，我都需要将条目存储在集合中。我删除了以前的项目，只是将新项目放在集合中。假设现在集合包含当前数量的项目，并且我收到了新数量的项目，而不是：

*   如果 NEW <= CURRENT 集合应该允许我 1) 重新配置第一个 NEW 项目。2) 将集合长度调整为新的 3) 不要丢弃其余的项目，因为它们将在下一个数据包处理期间被重用
*   如果 NEW > CURRENT 集合应该 1) 确保集合的容量足以存储新项目，如果它不足以调整集合的大小并设置所需的项目数量。2）允许我重新配置新项目。

所以这个想法很简单：

*   收藏应该增长，很快它的大小应该变成〜`Maximum transmission unit of the network / sizeof(entry)`
*   之后，不应分配新对象，仅应重用和重新配置已分配的对象。即使收集长度减少到 1，其余 1000 个项目也不应该被丢弃，因为下一步收集长度将再次变为 1000，我将重用这些项目。

如果任何现有的`stl`或`boost`集合可以这样使用，还是我必须自己写？

实际上我可以为此使用纯数组 - 但大多数缺失的部分将是“自动增长”，因为即使在运行时我也无法计算最大大小。

另一种选择 - 我可以使用任何现有的集合，但另外存储自己的“大小”。并且永远不要减少集合的大小，而是始终使用“大小”的“我的”副本。因为我从不减少集合大小，所以它永远不会丢弃项目。这应该可行，但会有点“棘手”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:10:15.693

容量[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)会根据需要增加，但不会减少。这似乎符合您的需求。

只需[将](http://en.cppreference.com/w/cpp/container/vector/push_back)项目推入矢量，完成后[清除](http://en.cppreference.com/w/cpp/container/vector/clear)矢量。然后将向量重新用于下一组项目。

或者，您可以[调整](http://en.cppreference.com/w/cpp/container/vector/resize)向量的大小，并将项目放置在给定的[索引](http://en.cppreference.com/w/cpp/container/vector/operator_at)处。为后续的项目集在同一个向量上重复执行此操作。

在这两种情况下，向量都将保留其容量。

您甚至可以为向量[保留](http://en.cppreference.com/w/cpp/container/vector/reserve)初始容量。

请注意，从技术上讲，这不会重用对象（resize 选项中的现有对象除外），但它会重用分配的内存。但在实践中，由于您每次都在修改对象，这应该就足够了（尤其是在使用 POD 对象时）。

# c++ - 条件运算符：有多大的灵活性？

> ID：16191461
> 
> 赞同：0
> 
> 时间：2013-04-24T12:00:50.810
> 
> 标签：c++, conditional-operator

我想执行以下操作：

```
if(x == true)
{
    // do this on behalf of x
    // do this on behalf of x
    // do this on behalf of x
} 
```

使用条件运算符，这是正确的吗？

```
x == true ? { /*do a*/, /*do b*/, /*do c*/ } : y == true ? ... ; 
```

这是畸形的吗？

我没有使用条件运算符嵌套多个级别。

在我看来，我打算使用的表达式非常简洁，使得条件运算符值得使用。

PS我不是在问A。我应该使用哪个？B.哪个更好 C.哪个更合适

PS 我在问如何将 if-else 语句转换为三元条件运算符。

在这个问题上给出的关于编码标准等的任何建议都是不受欢迎的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:05:45.143

不要将布尔值与真假进行比较。没有意义，因为它们已经是真假了！写吧

```
if (x)
{
    // do this on behalf of x
    // do this on behalf of x
    // do this on behalf of x
} 
```

您的第二个示例无法编译，因为您使用`{`and `}`。但这可能

```
x ? ( /*do a*/, /*do b*/, /*do c*/ ) : y ? ... ; 
```

但这确实取决于`/*do a*/`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:14:59.700

使用逗号运算符将不同的表达式串在一起是符合语言规则的，但这会使代码更难阅读（因为您必须找出逗号，这并不总是容易的，尤其是在表达式不是很简单的情况下。

另一个因素当然是您只能对`if (x) ... else if(y) ...`类型条件状态执行此操作。

有时，似乎人们更喜欢“短代码”而不是“可读代码”，如果你在“谁能用最少的行写这个”的竞争中，这当然很棒，但对于其他一切，尤其是“在展示”或与同样需要理解它的同事分享——一旦软件项目变得足够大，通常很难理解代码是如何工作的，而没有混淆，这会使代码更难阅读。我真的没有看到以第二个示例描述的方式使用条件语句有任何好处。这个例子可能很糟糕，但一般来说，我会说“不要那样做”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:22:41.007

当然可以（使用 C++11）。我还没有尝试过解决方案，但是按照[Herb Sutters 的方式](http://herbsutter.com/2013/04/05/complex-initialization-for-a-const-variable/)，您可以使用 ether 一个函数调用或一个立即执行的 lambda：

```
cond ? 
  [&]{
    int i = some_default_value;
    if(someConditionIstrue)
    {
        Do some operations ancalculate the value of i;
        i = some calculated value;
    }
    return i;
} ()  
  : 
somefun() ; 
```

我没有尝试编译它，但在这里你有一个结果，它是用 lambda 或普通函数计算的。

# vb.net - 根据“日期”字段查找一周中的星期一

> ID：16191463
> 
> 赞同：2
> 
> 时间：2013-04-24T12:00:53.837
> 
> 标签：vb.net

这是我的问题，我想以日期格式返回给定一周的星期一。

到目前为止，我在这里付出了努力。

代码：

```
Dim Diff
Dim cDate
Dim prday
prday = [table.datefield]
Diff = Cint(0 - (Weekday(prday, 2)))
cDate = DateAdd("d", Diff, prday)
Result = cDate 
```

然而，这相当不幸地返回 24/12/1899。不完全是我想要的……2013 年会很好。关于我哪里出错的任何提示？

笔记：

从数据库表中提取的特定日期是在不同的应用程序中完成的。此代码应该生成将显示在标签上的日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T12:42:04.467

唯一的问题是你想如何对待周日约会。

```
'Sunday as first day of week
Dim someDate As DateTime = DateTime.Parse("Apr 28, 2013")
'calculate monday
'note:  for Sunday this returns next Monday, i.e Apr 28, 2013 returns Apr 29th
Dim monDate As DateTime = someDate.AddDays(DayOfWeek.Monday - someDate.DayOfWeek)

'Monday as first day of week
Dim someDate As DateTime = DateTime.Parse("Apr 28, 2013")
'calculate monday
If someDate.DayOfWeek = DayOfWeek.Sunday Then someDate = someDate.AddDays(-1)
Dim monDate As DateTime = someDate.AddDays(DayOfWeek.Monday - someDate.DayOfWeek) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:45:08.557

定义扩展方法

```
Imports System.Runtime.CompilerServices

Module DateExtensions

    <Extension()> 
    Public Function GetMonday(ByVal dt As DateTime) as DateTime
        While dt.DayOfWeek <> DayOfWeek.Monday
           dt = dt.AddDays(-1)
        End While
        return dt
    End Function
End Module 
```

并称它为

```
prday = prday.GetMonday() 
```

或者我们可以让它通用

```
Public Function GetPreviousDayOfWeek(ByVal dt As DateTime, prevDay As DayOfWeek) as DateTime
    While dt.DayOfWeek <> prevDay
       dt = dt.AddDays(-1)
    End While
    return dt
End Function 
```

正如@dbasnett 所指出的，数学比循环快，我们可以处理星期天是一周的第一天的情况。所以更好的方法应该是

```
Public Function GetMonday(ByVal dt As DateTime) as DateTime
    Dim diff = Thread.CurrentThread.CurrentCulture.DateTimeFormat.FirstDayOfWeek - DayOfWeek.Monday
    dt = dt.AddDays(diff)
    return  dt.AddDays(DayOfWeek.Monday - dt.DayOfWeek)
End Function 
```

# groovy - 将 tsv 文件解析为地图的 Groovier 方法

> ID：16191464
> 
> 赞同：1
> 
> 时间：2013-04-24T12:00:53.967
> 
> 标签：groovy

我有一个“key \t value”形式的tsv文件，我需要读入地图。目前我这样做：

```
referenceFile.eachLine { line ->
    def (name, reference) = line.split(/\t/)
    referencesMap[name.toLowerCase()] = reference
} 
```

有没有更短/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:51:54.740

已经很短了。我能想到的两个答案：

第一个避免创建临时地图对象：

```
referenceFile.inject([:]) { map, line ->
    def (name, reference) = line.split(/\t/)
    map[name.toLowerCase()] = reference
    map
} 
```

第二个功能更强大：

```
referenceFile.collect { it.split(/\t/) }.inject([:]) { map, val -> map[val[0].toLowerCase()] = val[1]; map } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:42:13.573

这是 tim_yates 添加到 melix 答案中的评论，我认为这是最短/最清晰的答案：

```
referenceFile.collect { it.tokenize( '\t' ) }.collectEntries { k, v -> [ k.toLowerCase(), v ] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:18:03.580

我能想到的唯一其他方法是使用您在 Commons IO 中找到的迭代器：

```
@Grab( 'commons-io:commons-io:2.4' )
import org.apache.commons.io.FileUtils

referencesMap = FileUtils.lineIterator( referenceFile, 'UTF-8' )
                         .collectEntries { line ->
  line.tokenize( '\t' ).with { k, v ->
    [ (k.toLowerCase()): v ]
  }
} 
```

或者使用 CSV 解析器：

```
@Grab('com.xlson.groovycsv:groovycsv:1.0')
import static com.xlson.groovycsv.CsvParser.parseCsv

referencesMap = referenceFile.withReader { r ->
  parseCsv( [ separator:'\t', readFirstLine:true ], r ).collectEntries {
    [ (it[ 0 ].toLowerCase()): it[ 1 ] ]
  }
} 
```

但它们都不是更短，也不一定更好......

虽然我更喜欢选项 2，因为它可以处理以下情况：

```
"key\twith\ttabs"\tvalue 
```

因为它处理带引号的字符串

# gwt - 从 GWT Highcharts 中获取选择编号

> ID：16191466
> 
> 赞同：1
> 
> 时间：2013-04-24T12:00:55.053
> 
> 标签：gwt, highcharts

我有 2 个系列的面积图。两者都有相同的数据，但值不同。当我选择一个点时，我想知道点的索引。例如。当我选择第一个点时，我想取“1”等等。喜欢[这里](http://jsfiddle.net/aLFRG/)。

例如他们使用

```
formatter: function() {
 return 'point ' + this.point.myIndex; 
```

}

但它适用于 javascript

`formatter: function() { return 'point ' + this.point.myIndex; }`

有人知道如何从 gwt 包装器 Moxie Apps GWT Highcharts 中做到这一点吗？

# java - java.sql.SQLException: ORA-01861: 文字与格式字符串不匹配

> ID：16191467
> 
> 赞同：0
> 
> 时间：2013-04-24T12:00:57.577
> 
> 标签：java, jdbc

我在 java 中遇到了这个 sql 查询的异常。

```
 statement2.executeUpdate("INSERT INTO visit_header " 
+ "VALUES ('"+visitnumber+"','"+date+"','"+cookie+"','"+ip+"','"+duration+"','"+pageref
+"','"+startpagename+"','"+endpagename+"','"+pgvw+"','"+starttime+"','"+endtime+"','"
+country+"','"+state+"','"+city+"','"+browser+"','"+os+"','"+device+"')"); 
```

例外是：

```
java.sql.SQLException: ORA-01861: literal does not match format string. 
```

我没有得到我要去的地方。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:06:29.933

首先，你真的不应该通过连接字符串来创建 SQL 语句。这使您对 SQL 注入黑客持开放态度。您应该使用 PreparedStatement 并设置值，这样 JDBC 就可以正确地转义它们。

该错误很可能是由于开始时间和结束时间的格式错误。您可能需要显示堆栈跟踪以及您尝试插入的一些示例数据。我建议尝试在这行代码之后立即中断，复制生成的串联字符串，然后直接在数据库中运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:04:42.287

也许在您的字段（如 pgvw）中包含 ' 或 \，或者您的日期和开始时间在使用之前未格式化。

# javascript - 下载文件时如何单击另存为按钮？

> ID：16191470
> 
> 赞同：-2
> 
> 时间：2013-04-24T12:01:03.077
> 
> 标签：javascript, html, google-chrome

例如，单击链接时：

```
<a href="1.txt">Download</a> 
```

将弹出另存为窗口。是否可以使用 JavaScript 单击窗口上的按钮？或者，可以在单击按钮时设置回调函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:10:02.937

我在这里扩展我的评论并将其作为答案。

一般来说，您不应该与浏览器处理下载的方式有任何关系。在您的情况下（如果我错了，请纠正我），您想单击“另存为”窗口上的“保存”按钮 - 这是您的浏览器不允许您执行的操作（换句话说，没有 API为他们）。试想一下，如果您能做到这一点，您可以在用户访问您的网站时触发数百万次此类保存。那将是一个非常糟糕的浏览器示例。

通常，从服务器端发送一个标头：

```
Content-Disposition: attachment; filename="abc.xyz" 
```

这应该足以触发下载。您不必担心浏览器处理它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:32:32.777

如果我理解正确，您希望文件下载而不是自动打开，对吗？[查看有关如何使用 PHP http://webdesign.about.com/od/php/ht/force_download.htm](http://webdesign.about.com/od/php/ht/force_download.htm)执行此操作的说明

如果您不使用 php - 请告诉我您使用的是哪种语言，我会尝试找出代码。

# performance - 我需要工具来在我的项目中查找使用情况和未使用的 javascript 文件

> ID：16191476
> 
> 赞同：-2
> 
> 时间：2013-04-24T12:01:14.857
> 
> 标签：performance, javascript

我的项目我使用了很少的第三方 javascript 库。但是很少有非常大的。所以我想找出我的应用程序中每个 javascript 文件的用法（换句话说，我在哪里和所有使用了这个 js 文件在我的应用）。

如果有人建议这个工具将帮助充分。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T12:07:32.957

您可以尝试使用[JSPerf](http://jsperf.com/)来测量 JavaScript 性能。如果您上传代码，该站点将允许您运行基准测试。

微软还有一个用于 Visual Studio 2008 的工具，称为[Microsoft Visual Studio AJAX Profiling Extensions](http://archive.msdn.microsoft.com/AjaxView)，它可以测量部分 Web 应用程序（包括 JavaScript）的性能。

如果您使用的是 Internet Explorer，您还可以使用[MS Performance](http://blogs.msdn.com/b/ie/archive/2010/06/28/measuring-web-page-performance.aspx) JavaScript 对象。

这里也问了一个类似的线程：[测量 JavaScript 性能](https://stackoverflow.com/questions/13789635/measuring-javascript-performance)

# hadoop - 从 mapreduce 读取配置单元表

> ID：16191477
> 
> 赞同：2
> 
> 时间：2013-04-24T12:01:20.117
> 
> 标签：hadoop, mapreduce, hive

我目前正在编写一个 mapreduce 程序来查找两个配置单元表之间的区别。我的 hive 表在一个或多个列上分区。所以文件夹名称包含分区列的值。

有什么方法可以读取 hive 分区表。

可以在 mapper 中读取吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:33:55.733

由于默认情况下，底层 HDFS 数据将在分区 hive 表中组织为

```
 table/root/folder/x=1/y=1
 table/root/folder/x=1/y=2
 table/root/folder/x=2/y=1
 table/root/folder/x=2/y=2...., 
```

您可以在驱动程序中构建这些输入路径中的每一个，并通过对 FileInputFormat.addInputPath(job, path) 的多次调用来添加它们。每个您构建的文件夹路径调用一次。

下面粘贴示例代码。注意如何将路径添加到 MyMapper.class。在此示例中，我使用 MultipleInputs API。表由“part”和“xdate”分区。

```
public class MyDriver extends Configured implements Tool {
    public int run(String[] args) throws Exception {
        Configuration conf = getConf();
        conf.set("mapred.compress.map.output", "true");
        conf.set("mapred.output.compression.type", "BLOCK"); 

        Job job = new Job(conf);
        //set up various job parameters
        job.setJarByClass(MyDriver.class);
        job.setJobName(conf.get("job.name"));
        MultipleInputs.addInputPath(job, new Path(conf.get("root.folder")+"/xdate="+conf.get("start.date")), TextInputFormat.class, OneMapper.class);
        for (Path path : getPathList(job,conf)) {
            System.out.println("path: "+path.toString());
            MultipleInputs.addInputPath(job, path, Class.forName(conf.get("input.format")).asSubclass(FileInputFormat.class).asSubclass(InputFormat.class), MyMapper.class);
        }
        ...
        ...
        return job.waitForCompletion(true) ? 0 : -2;

    }

    private static ArrayList<Path> getPathList(Job job, Configuration conf) {
        String rootdir = conf.get("input.path.rootfolder");
        String partlist = conf.get("part.list");
        String startdate_s = conf.get("start.date");
        String enxdate_s = conf.get("end.date");
        ArrayList<Path> pathlist = new ArrayList<Path>();
        String[] partlist_split = partlist.split(",");
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        Date startdate_d = null;
        Date enxdate_d = null;
        Path path = null;
        try {
            startdate_d = sdf.parse(startdate_s);
            enxdate_d = sdf.parse(enxdate_s);
            GregorianCalendar gcal = new GregorianCalendar();
            gcal.setTime(startdate_d);
            Date d = null;
            for (String part : partlist_split) {
                gcal.setTime(startdate_d);
                do {
                    d = gcal.getTime();
                    FileSystem fs = FileSystem.get(conf);
                    path = new Path(rootdir + "/part=" + part + "/xdate="
                            + sdf.format(d));
                    if (fs.exists(path)) {
                        pathlist.add(path);
                    }
                    gcal.add(Calendar.DAY_OF_YEAR, 1);
                } while (d.before(enxdate_d));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return pathlist;
    }

    public static void main(String[] args) throws Exception {
        int res = ToolRunner.run(new Configuration(), new MyDriver(), args);
        System.exit(res);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-30T01:39:33.687

是的，它可以很容易地在 Mapper 中读取。这个答案基于@Daniel Koverman 提到的想法。

将Context对象传递给Mapper.map()，就可以通过这种方式获取文件分割路径

```
// this gives you the path plus offsets hdfs://.../tablename/partition1=20/partition2=ABC/000001_0:0+12345678
context.ctx.getInputSplit().toString();

// or this gets you the path only
((FileSplit)ctx.getInputSplit()).getPath(); 
```

这是一个更完整的解决方案，可以解析出实际的分区值：

```
class MyMapper extends Mapper<KEYIN, VALUEIN, KEYOUT, VALUEOUT> {

    // regex to parse out the /partitionName=partitionValue/ pairs
    private static Pattern partitionRegex = Pattern.compile("(?<=/)(?<name>[_\\-\\w]+)=(?<value>[^/]*)(?=/)");

    public static String parsePartitionValue(String path, String partitionName) throws IllegalArgumentException{
        Matcher m = partitionRegex.matcher(path);
        while(m.find()){
            if(m.group("name").equals(partitionName)){
                return m.group("value");
            }
        }
        throw new IllegalArgumentException(String.format("Partition [%s] not found", partitionName));
    }

    @Override
    public void map(KEYIN key, VALUEIN v, Context ctx) throws IOException, InterruptedException {
        String partitionVal = parsePartitionValue(ctx.getInputSplit().toString(), "my_partition_col");
   }
} 
```

# c# - 如何检查全局 asax 或捆绑包中的现有文件？

> ID：16191478
> 
> 赞同：0
> 
> 时间：2013-04-24T12:01:24.070
> 
> 标签：c#, asp.net-mvc, bundle

我使用捆绑包。但如果找不到文件，它不会发送异常。

如果文件不存在，我需要检查存在的文件并捕获异常。我试过了：

```
var cssCommon = "/Common/common.css";

if (!System.IO.File.Exists(server.MapPath("~") + cssCommon))
{
   throw new FileNotFoundException(cssCommon);
} 
```

但总是有例外

如何检查全局 asax 或捆绑设置中的现有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-23T10:46:20.063

我更喜欢使用 a`BundleHelper`来完成这项任务。

赫尔曼在这里有一个很好的：[https ://stackoverflow.com/a/25784663/732377](https://stackoverflow.com/a/25784663/732377)

为了完整起见，复制到这里，但所有的荣誉都应该归功于赫尔曼！

```
public static class BundleHelper
{
    [Conditional("DEBUG")] // remove this attribute to validate bundles in production too
    private static void CheckExistence(string virtualPath)
    {
        int i = virtualPath.LastIndexOf('/');
        string path = HostingEnvironment.MapPath(virtualPath.Substring(0, i));
        string fileName = virtualPath.Substring(i + 1);

        bool found = Directory.Exists(path);

        if (found)
        {
            if (fileName.Contains("{version}"))
            {
                var re = new Regex(fileName.Replace(".", @"\.").Replace("{version}", @"(\d+(?:\.\d+){1,3})"));
                fileName = fileName.Replace("{version}", "*");
                found = Directory.EnumerateFiles(path, fileName).Where(file => re.IsMatch(file)).FirstOrDefault() != null;
            }
            else // fileName may contain '*'
                found = Directory.EnumerateFiles(path, fileName).FirstOrDefault() != null;
        }

        if (!found)
            throw new ApplicationException(String.Format("Bundle resource '{0}' not found", virtualPath));
    }

    public static Bundle IncludeExisting(this Bundle bundle, params string[] virtualPaths)
    {
        foreach (string virtualPath in virtualPaths)
            CheckExistence(virtualPath);

        return bundle.Include(virtualPaths);
    }

    public static Bundle IncludeExisting(this Bundle bundle, string virtualPath, params IItemTransform[] transforms)
    {
        CheckExistence(virtualPath);
        return bundle.Include(virtualPath, transforms);
    }
} 
```

然后在配置中：

```
 bundles.Add(new ScriptBundle("~/test")
    .IncludeExisting("~/Scripts/jquery/jquery-{version}.js")
    .IncludeExisting("~/Scripts/lib*")
    .IncludeExisting("~/Scripts/model.js")
    ); 
```

但是，您可能还想查看此常见问题的其他解决方案。

nrodic 在这里非常简单：[https ://stackoverflow.com/a/24812225/732377](https://stackoverflow.com/a/24812225/732377)

# module - 使用 Angular JS 时如何加载 AMD 模块？

> ID：16191480
> 
> 赞同：5
> 
> 时间：2013-04-24T12:01:31.933
> 
> 标签：module, angularjs, amd, commonjs

出于某种奇怪的原因[，Angular JS 有自己的模块系统，它既不是 AMD 也不是 CommonJS](http://docs.angularjs.org/guide/module)。

我有许多 AMD 格式的现有模块。我想在 Angular 应用程序中使用它们。

我想避免重写任何 AMD 模块。如果可能的话，我也想避免使用 Angular 自己的模块系统。

使用 Angular 时是否可以使用 AMD 模块？是否可以避免 Angular 的自定义模块系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:23:26.653

您确实需要以“Angular 方式”定义 Angular 组件（例如 angular.module('yourApp').directive('someDirective', ...)），但您当然可以使用 AMD 来包装 Angular 组件和将非 Angular 组件引入 Angular。看看[这个种子项目](https://github.com/elsom25/angular-requirejs-html5boilerplate-seed)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T04:56:30.833

你不能用 AMD 定义替换 Angular 的模块定义。你现在必须在 AMD 定义中包装你的 Angular 代码。

另一件需要注意的是，目前还没有真正的“延迟加载”模块的方法。您最终必须在主角度模块定义中要求您将在应用程序中使用的所有角度模块，因此目前使用 AMD 的好处是有限的。

开发团队表示他们将在未来某个时候支持延迟加载，这是现在在 AMD 中打包文件的唯一原因。

# php - 比较PHP中的日期和月份

> ID：16191486
> 
> 赞同：0
> 
> 时间：2013-04-24T12:01:45.900
> 
> 标签：php, date, time

我有以下代码从数据库中的时间戳获取日期，然后将其与特定日期进行比较，并相应地将变量设置为某个值：

```
 $leavedate=$this->leavedate;
    $leavestamp=strtotime($leavedate[0]['LoppumisPvm']);
    $leave=date('d M',$leavestamp);
    echo "the leave is: ".$leave; //this one prints: 12 Apr

        $leavequarter="";
       if(strtotime($leave)>= strtotime('01 Jan') && strtotime(($leave)<= strtotime('15 Jan'))){$leavequarter=1;}
       elseif(strtotime($leave)>= strtotime('01 Apr') && strtotime(($leave)<= strtotime('15 Apr'))){$leavequarter=2;}
       elseif(strtotime($leave)>= strtotime('01 Jul') && strtotime(($leave)<= strtotime('15 Jul'))){$leavequarter=3;}
       elseif(strtotime($leave)>= strtotime('01 Oct') && strtotime(($leave)<= strtotime('15 Oct'))){$leavequarter=4;}

    echo $leavequarter; 
```

第一个回声有效，我得到了`12 Apr`基本上应该适合第二个`if`语句的东西，但是，第二个回声不打印任何东西，即使我`echo "test`在那些 if 语句中放了类似“没有被执行”的东西。我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:08:46.277

您错误地嵌套了代码：

```
elseif(strtotime($leave)>= strtotime('01 Apr') && strtotime(($leave)<= strtotime('15 Apr'))) 
```

它应该是：

```
elseif(strtotime($leave)>= strtotime('01 Apr') && strtotime($leave)<= strtotime('15 Apr'))
                                                           ^                             ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:22:58.210

试试这个代码：

```
if((strtotime($leave)>= strtotime('01 Jan')) && (strtotime($leave)<= strtotime('15 Jan'))){$leavequarter=1;}
    elseif((strtotime($leave)>= strtotime('01 Apr')) && (strtotime($leave)<= strtotime('15 Apr'))){$leavequarter=2;}
    elseif((strtotime($leave)>= strtotime('01 Jul')) && (strtotime($leave)<= strtotime('15 Jul'))){$leavequarter=3;}
    elseif((strtotime($leave)>= strtotime('01 Oct')) && (strtotime($leave)<= strtotime('15 Oct'))){$leavequarter=4;}   
echo $leavequarter; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:14:54.587

首先，我不会用strtotime来做这一切。这是资源消耗并且取决于语言环境。

最好使用日期功能。

```
$leavedate = $this->leavedate;
$leavestamp = strtotime($leavedate[0]['LoppumisPvm']);
$leave = date('d M', $leavestamp);
echo "the leave is: " . $leave; //this one prints: 12 Apr

$leavequarter = "";
if (date('m', $leavestamp) == 1 && date('d', $leavestamp) >= 1 && date('d', $leavestamp) <= 15)
{
    $leavequarter = 1;
}
elseif (date('m', $leavestamp) == 4 && date('d', $leavestamp) >= 1 && date('d', $leavestamp) <= 15)
{
    $leavequarter = 2;
}
elseif (date('m', $leavestamp) == 7 && date('d', $leavestamp) >= 1 && date('d', $leavestamp) <= 15)
{
    $leavequarter = 3;
}
elseif (date('m', $leavestamp) == 10 && date('d', $leavestamp) >= 1 && date('d', $leavestamp) <= 15)
{
    $leavequarter = 4;
}

echo $leavequarter; 
```

但你想做什么？我想你想得到一年中的季度，但这只会给出 1 月 1 日到 1 月 15 日的结果，4 月、7 月和 10 月的结果也是如此。

老实说，我认为这就是你想要的：

```
$leavedate = $this->leavedate;
$leavestamp = strtotime($leavedate[0]['LoppumisPvm']);
$leave = date('d M', $leavestamp);
echo "the leave is: " . $leave; //this one prints: 12 Apr

$leavequarter = (int) ((date('m', $leavestamp) - 1) / 3) + 1;
echo $leavequarter; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:11:03.027

语法错误第三个 strtotime got double (( 涵盖第二个状态如何

```
 if(strtotime($leave)>= strtotime('01 Jan') && strtotime($leave)<= strtotime('15 Jan')){$leavequarter=1;}
   elseif(strtotime($leave)>= strtotime('01 Apr') && strtotime($leave)<= strtotime('15 Apr')){$leavequarter=2;}
   elseif(strtotime($leave)>= strtotime('01 Jul') && strtotime($leave)<= strtotime('15 Jul')){$leavequarter=3;}
   elseif(strtotime($leave)>= strtotime('01 Oct') && strtotime($leave)<= strtotime('15 Oct')){$leavequarter=4;} 
```

# jakarta-ee - 从 Java EE + Struts2 导出到 DOC 文件

> ID：16191492
> 
> 赞同：1
> 
> 时间：2013-04-24T12:02:03.743
> 
> 标签：jakarta-ee, struts2, jasper-reports, docx, doc

有人知道任何允许我将信息导出为 doc 格式的 java 库，我很欣赏多样性。

我的项目正在使用 Java EE 和 STRUTS2。所以我需要评估和比较选项。

例如 JASPERREPORTS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:11:30.980

一个不错的选择是[Apache POI](http://poi.apache.org/)。我已经将它与 Excel 文档一起使用，但它也支持处理 .doc 文件。

[这](http://tkgospodinov.com/writing-microsoft-word-documents-in-java-with-apache-poi/)是一个例子。

# devexpress-windows-ui - 如何将 Devexpress 调度程序与自定义数据表连接

> ID：16191497
> 
> 赞同：0
> 
> 时间：2013-04-24T12:02:12.363
> 
> 标签：devexpress-windows-ui

```
DataSet1 ds1 = new DataSet1();

ds1.tblSchedul.Rows.Add(0, "t_test", "4/10/2013 11:30:00 AM", "0", "D", "", "", "", "4/10/2013 8:15:45 AM", "2", "sub", "0");
tblSchedulBindingSource.DataSource = ds1.tblSchedul; 
```

但它不起作用。有什么可能的解决方案？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T11:01:40.430

您需要为数据库表使用约会映射。首先，在DataTabel 中加载数据库表，并使用映射的方法来映射字段。

尝试查看此代码：[Devexpress Mapping](http://pastebin.com/Js4wzt2J)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:59:42.623

```
 using System.Threading;
   using System.Text.RegularExpressions;
   using System.Data.Odbc;
   using DevExpress.XtraEditors.Controls;
   using DevExpress.XtraEditors;

   namespace Project
  {
  public partial class frmSchedule : Form
  {

      DataSet scheduleDataset;
      SQLConnection scheduleConn;
      SQLDataAdapter scheduleAdapter;
         private void Form1_Load(object sender, EventArgs e)
                {            
                        schedulerControl1.Start = DateTime.Now;
                        scheduleDataset = new DataSet();
                        scheduleConn = objconnection.getConnection();// DatabaseConnection
                        scheduleConn.Open();               
                        fillData("SELECT * FROM table_name"); 
                }

         private void fillData(string query)
            {
                scheduleDataset = new DataSet();
                scheduleAdapter = new SQLDataAdapter(query, scheduleConn);
                scheduleAdapter.RowUpdated += new SQLRowUpdatedEventHandler(scheduleAdapter_RowUpdated);
                scheduleAdapter.Fill(scheduleDataset, "table_name");

                this.appointmentsBS.DataSource = scheduleDataset;
                this.appointmentsBS.DataMember = "table_name";
                this.appointmentsBS.Position = 0;

                                    this.schedulerStorage1.Appointments.DataSource = this.appointmentsBS;
                                    this.schedulerStorage1.Appointments.Mappings.field1= "Field1";         
                                    this.schedulerStorage1.Appointments.Mappings.Field2= "Field2";

                               AppointmentCustomFieldMapping IDD = new AppointmentCustomFieldMapping("IDD", "IDD");
                               schedulerStorage1.Appointments.CustomFieldMappings.Add(IDD);

                SQLCommandBuilder cmdBuilder = new SQLCommandBuilder(scheduleAdapter);
                scheduleAdapter.InsertCommand = cmdBuilder.GetInsertCommand();
                scheduleAdapter.DeleteCommand = cmdBuilder.GetDeleteCommand();
                scheduleAdapter.UpdateCommand = cmdBuilder.GetUpdateCommand();
            }
}
} 
```

# ftp - 从 ftp pc 获取文件并使用 python 将其保存在 telnetted pc 中

> ID：16191498
> 
> 赞同：0
> 
> 时间：2013-04-24T12:02:13.350
> 
> 标签：ftp, telnet

我正在尝试编写一个`python`脚本来连接一台 pc 使用`telnet`并从该 telneted pc 我试图开始`ftp`与其他 pc 的连接。我能够连接 telnet 和 FTP，但传输的文件没有存储在 telnet 的 pc 中，而是存储在我执行脚本的 pc 中。

任何人都可以建议一种如何在 telnetted pc 中保存文件的方法。

```
 via telnet        via ftp
host pc-------------PC 1-----------PC 2   > 
```

我需要从 pc 2 获取文件并需要存储在 pc1 中。现在它只存储在主机中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T05:52:57.453

```
If you are using Pexpect try  this piece of code in your script...                                                                                                                                                                                       ss.expect(':')
ss.sendline('username')
ss.expect(':')
ss.sendline("password" + "\n")
time.sleep(30)
print "connected 
ss.expect('$ ')
ss.sendline("ftp ipaddress") 
```

# javascript - phonegap ajax 调用出现错误'$ 未定义'

> ID：16191500
> 
> 赞同：1
> 
> 时间：2013-04-24T12:02:14.807
> 
> 标签：javascript, ajax, cordova

我在 Phonegap 应用程序中发出 AJAX 请求。代码是：

```
function remoteCall()
{
  alert("Remote call func called");

  try
  {
    $.ajax({
       url: 'http://192.168.1.200/testing/testConn.php',
       contentType: "application/json; charset=utf-8",
       dataType:"json",
       success: function(data)
       {
          if(data == '')
              alert("No data received from server");
          else
          alert("Data received from server = "+data.postcode);
       },
       error: function(jqXHR, textStatus, errorThrown)
       {
           console.log(textStatus);
           alert('FAIL !!!');
       },

     });
  }//end of try().
  catch(e)
  {
        alert("error = "+e.message);
  }

}//END OF FUNC remoteCall. 
```

我还添加了以下行`<head>`以避免 jQuery 冲突。

```
<script>jQuery.noConflict();</script> 
```

我的服务器端文件是：

```
<?php

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: X-Requested-With");

$retArray = array();
$retArray['postcode']= 'm14';
$retArray['brand']= '1';
$retArray['product_type']= '1';

$jsondata =  json_encode($retArray);

return $jsondata;
?> 
```

我收到第一条警报消息，但后来我收到错误消息，“$ 不是未定义的”。我不知道如何解决这个问题；谁能帮忙？

我能够克服“$未定义”的错误，现在我没有收到任何错误，也没有收到任何输出......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:05:12.097

确保在添加包含代码的 js 文件之前添加 jquery 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:05:11.520

`<script>jQuery.noConflict();</script>`意味着您必须将 jQuery 对象引用为`jQuery`而不是`$`. `$`将您的引用从to更改为`jQuery`它应该可以工作。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:48:04.527

我解决了我的问题... :)

以下几行解决了我的 $ 和 jQuery 问题

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.7.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/jquery-ui.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

（感谢阿里和cfs :)）

在服务器文件中，我将返回更改为回显

```
<?php

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: X-Requested-With");

$retArray = array();
$retArray["postcode"]= "m14";
$retArray["brand"]= "1";
$retArray["product_type"]= "1";

$jsondata =  json_encode($retArray);
echo $jsondata;

?> 
```

现在我可以获取服务器详细信息。

感谢大家的回复.... :)

# jquery - 关于 jQuery 函数返回的文档

> ID：16191502
> 
> 赞同：0
> 
> 时间：2013-04-24T12:02:18.733
> 
> 标签：jquery

我一直在查看 jQuery 函数的 API 文档，但我找不到任何任意函数，该函数究竟返回了什么。例如：

```
$(this).appendTo($someElement); 
```

appendTo 函数返回什么。我查看了文档，它只是说它返回一个 jQuery 对象，但没有具体说明什么对象。

我想知道，因为我希望能够链接我的陈述，而不用担心我到底在链接哪些元素。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:32:45.970

通常，jQuery 函数将始终接收选定的对象。所以在你的情况下，你会`$(this)`回来的。

当然也有例外：

*   [筛选](http://api.jquery.com/filter/)
*   [孩子们](http://api.jquery.com/children/)
*   [结尾](http://api.jquery.com/end/)
*   ...

从函数的名称中应该可以很清楚地看到。如果它似乎在做某事，而不是返回某事，它将返回您使用该函数的同一对象。

# asp.net - 如何避免在asp.net的xml文件中插入重复值

> ID：16191507
> 
> 赞同：0
> 
> 时间：2013-04-24T12:02:38.910
> 
> 标签：asp.net, xml

在我的 asp.net 网站中，我有一个 xml 文件

```
<Image Header="About">
<Imagepath>group.jpg</Imagepath>
<imagetitle>together is fun!</imagetitle>
</Image> 
```

我有一个页面，在那个页面中我有一个文本框和一个文件上传控件。如何避免在 xml 文件中插入重复节点？

```
string spath = Server.MapPath("~/multipleimage.xml");
XmlDocument doc = new XmlDocument();
doc.Load(spath);

XmlNode Image = doc.CreateNode(XmlNodeType.Element, "Image", null);
XmlAttribute att = doc.CreateAttribute("Header");
att.Value = "AboutPAPCP";
Image.Attributes.Append(att);

XmlNode Imagepath = doc.CreateNode(XmlNodeType.Element, "Imagepath", null);
string imagepath = FleUpdgallery.FileName;
Imagepath.InnerText = imagepath;                    

string filename = Path.GetFileName(FleUpdgallery.FileName);
FleUpdgallery.SaveAs(Server.MapPath("~/uploads/" + filename));
Image.AppendChild(Imagepath);

doc.SelectSingleNode("//RootImage").AppendChild(Image);
doc.Save(spath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:15:03.410

尝试使用 XPath 查看节点是否已存在。像这样：

```
string spath = Server.MapPath("~/multipleimage.xml");
XmlDocument doc = new XmlDocument();
doc.Load(spath);

//use XPath to search for the node named Image with an attribute Header="AboutPAPCP"
XmlNodeList existingImages = doc.SelecteNodes("*/Image[@Header='AboutPAPCP']");
//if it wasn't found, then it is safe to insert a new node
if (existingImages == null || existingImages.count == 0)
{
    XmlNode Image = doc.CreateNode(XmlNodeType.Element, "Image", null);
    XmlAttribute att = doc.CreateAttribute("Header");
    att.Value = "AboutPAPCP";
    Image.Attributes.Append(att);

    XmlNode Imagepath = doc.CreateNode(XmlNodeType.Element, "Imagepath", null);
    string imagepath = FleUpdgallery.FileName;
    Imagepath.InnerText = imagepath;                    

    string filename = Path.GetFileName(FleUpdgallery.FileName);
    FleUpdgallery.SaveAs(Server.MapPath("~/uploads/" + filename));
    Image.AppendChild(Imagepath);

    doc.SelectSingleNode("//RootImage").AppendChild(Image);
    doc.Save(spath);
} 
```

# css - 为什么 Internet Explorer 9 不显示前 50 个元素的 CSS？

> ID：16191511
> 
> 赞同：0
> 
> 时间：2013-04-24T12:02:59.690
> 
> 标签：css, internet-explorer-9

我有一个在线测试，其中包括 24 个问题，每个问题都有 4 个可能的答案。我已经设置了 CSS，以便这些答案是带有标签和悬停效果的单选按钮。

这是它在 Chrome、Firefox、IE 10、Opera、iPad、Android 中的外观图片 - 除了 IE 9 之外的所有内容：

![正常测试 CSS 行为](https://i.stack.imgur.com/PGLTQ.png)

然而在 IE 9 中，问题 1 看起来像这样：

![在 IE 9 中测试失败](https://i.stack.imgur.com/mV6BT.png)

当用户回答第 13 个问题时，它看起来像这样，CSS 开始处理应用样式的第 51 个元素：

![第 51 个元素 CSS 开始工作](https://i.stack.imgur.com/mQapy.png)

然后之后的每个问题看起来都是正确的。

![从那时起，CSS 在 IE 9 中工作](https://i.stack.imgur.com/fD2vJ.png)

这是一个测试链接，您可以在其中看到嵌入在 iframe 中的代码：

[http://improvedemployees.com/softskills/soft-skills-test/](http://improvedemployees.com/softskills/soft-skills-test/)

这是原始测试代码的链接（它的行为相同）：

[http://api.improvedemployees.com/soft-skills/softskills-test2.aspx?v=4&companyid=10812&testid=1&campaign=](http://api.improvedemployees.com/soft-skills/softskills-test2.aspx?v=4&companyid=10812&testid=1&campaign=)

要查看此问题的实际效果，请输入几个字符作为它询问的名称，然后单击几次下一步以进入问题 1。

为什么 Internet Explorer 9 拒绝显示前 50 个元素的 CSS？注意：此测试中的元素少于 200 个，因此我认为不应该存在任何限制问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:17:36.830

原因是以下命令应用于 .radiolabel 类：

```
behavior: url(/css/border-radius.htc); 
```

我添加了这一点，以使圆角边框效果向后兼容。

删除那条线，现在所有的效果都如预期的那样。

这也解释了为什么它在我的开发环境而不是我的生产环境中工作 - 它指的是 /css/border-radius.htc 而在我的开发环境中获取文件我应该使用相对路径或 /web /css/...

感谢@Zeta 指出透明效果。我花了一段时间才找到这个，但那个 .htc 文件中的代码是罪魁祸首。我很高兴知道您使用什么工具来发现这一点？

这也消除了 SCRIPT87 错误——它们也是由 .htc 文件中的一些不可靠的代码引起的。

你可以在这里看到它终于工作了：

[http://api.improvedemployees.com/soft-skills/softskills-test2.aspx?v=4&companyid=10812&testid=1&campaign=](http://api.improvedemployees.com/soft-skills/softskills-test2.aspx?v=4&companyid=10812&testid=1&campaign=)

感谢所有帮助过的人。

![即工作！](https://i.stack.imgur.com/y3LwA.jpg)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-24T12:12:58.950

对我来说它在 IE 10 中运行良好

![我的 IE 10 工作正常](https://i.stack.imgur.com/ZRpyS.png)

我按 f12 并将浏览器模式设置为 IE 9

然后它不起作用，因为我通过选择浏览器模式 = E10 关闭了兼容性，它工作正常，如图所示。

所以检查你最后使css与IE9兼容或改变你的JS

我观察到一些内联 css 覆盖 css 所以请检查一下

# jquery - Pageloader 作为示例 mega.co.nz

> ID：16191518
> 
> 赞同：1
> 
> 时间：2013-04-24T12:03:22.800
> 
> 标签：jquery, web, loading, loader

我在 jquery 中寻找一个漂亮干净的加载屏幕，作为示例：mega.co.nz 它干净漂亮，有人知道吗？

谢谢

克里斯

# jquery - Access-Control-Allow-Origin 不允许来源，但定义了通配符？

> ID：16191524
> 
> 赞同：4
> 
> 时间：2013-04-24T12:03:40.873
> 
> 标签：jquery, ajax, cors

我正在开发一个项目（前端），它将与另一个域中的另一个（API）进行通信。

现在，我在本地工作，配置如下：

*   **前端**：`http://127.0.0.1:9000`
*   **接口**：`http://127.0.0.1:9100`

在我的 API 程序中，我定义了一个 OPTIONS 请求，它返回这些标头以及 HTTP 状态代码 200 ：

```
Access-Control-Allow-Headers:accept, origin, x-requested-with, content-type
Access-Control-Allow-Methods:GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Origin:*
Access-Control-Max-Age:15
Content-Length:0 
```

使用 jQuery，我向这个 url 发出 Ajax 请求。例如，这是 OPTIONS 查询的请求标头：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4
Access-Control-Request-Headers:accept, origin, x-requested-with, content-type
Access-Control-Request-Method:POST
Connection:keep-alive
Host:127.0.0.1:9100
Origin:http://127.0.0.1:9000
Referer:http://127.0.0.1:9000/login
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31 
```

这成功了（状态代码：200 OK），然后`http://127.0.0.1:9100/auth/login`按预期对 POST 进行了 POST，但我在我的网络面板中得到了这个：

> 状态：已取消 | 类型：待定

如果我查看控制台，我会收到此错误：

> XMLHttpRequest 无法加载`http://127.0.0.1:9100/auth/login`。Access-Control-Allow- Origin`http://127.0.0.1:9000`不允许 Origin。

但是，正如我们所见，Access-Control-Allow-Origin 被定义为“*”。我还尝试将其更改为“127.0.0.1:9000”和“ `http://127.0.0.1:9000`”，控制台上出现相同的错误。

现在，关于我的 jQuery ajax 命令的一些细节。ajax 本身非常简单：

```
jQuery.ajax({
    'url': '/auth/login',
    'type': 'POST',
    'data': {'login': 'abc', 'password': 'def'},
    'timeout': 15000
}).done(function (data, status, xhr) {
    console.log ('ok');
}).fail(function (xhr, status, description) {
    console.error('oups');
}); 
```

但是 API 的基本 URL 是在之后通过 jQuery.ajaxPrefilter 方法添加的：

```
jQuery.ajaxPrefilter (function (options) {
    var url = document.createElement('a');
    url.href = options.url;
    options.url = 'http://127.0.0.1:9000' + url.pathname;
}); 
```

这样做是为了避免在 url 更改时更改多个文件。我不知道这是否是问题的根源，但到目前为止，即使有关 CORS 配置的一切似乎都正常，我也无法使 POST 请求正常工作。

我做错什么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:16:39.390

好的，实际上答案很简单，但是您需要知道它。

标头不仅在 OPTIONS 请求上可用，而且在所有请求（甚至是 GET/POST/PUT/DELETE 请求）上都可用。

这就是为什么它对我不起作用。

# java - JNI 找不到本地方法（test\Test.java:11: 找不到符号）

> ID：16191529
> 
> 赞同：0
> 
> 时间：2013-04-24T12:03:51.760
> 
> 标签：java, c++, java-native-interface

我正在关注jni 上的[本教程。](http://www.javamex.com/tutorials/jni/getting_started.shtml)

1) 步骤用方法制作了一个 test\Test.java 文件

```
public native static int getDouble(int n); 
```

2) 编译生成头文件。（javac，javah）

3）创建一个VC Win32项目（应用程序类型：DLL）

4) 更改项目属性以包括

```
%JAVA_HOME%\include;%JAVA_HOME\include\win32\ 
```

5）将粘贴的test_Test.h复制到vc项目中。

6) 构建 > 配置管理器（将平台更改为 x64）

7) 构建解决方案 + 将生成的 .dll 文件复制到 Test.java 类路径

8) 更改 Test.java 以包括调用本机函数调用。

```
package test;

public class Test {

    public native static int getDouble(int n);

    public static void main(String[] args) {
        System.loadLibrary("jni_example");

        for (int n = 1; n <= 20; n++) {
            System.out.println(n + " x 2 = " + getDoubled(n));
        }
    }
} 
```

9）再次尝试编译测试会出现问题。

```
D:\workspace\jni_example>ls
jni_example.dll  test  test_Test.h

D:\workspace\jni_example>javac -classpath . test\Test.java
test\Test.java:11: cannot find symbol
symbol  : method getDoubled(int)
location: class test.Test
                        System.out.println(n + " x 2 = " + getDoubled(n));
                                                           ^
1 error 
```

当我注释掉 System.out 行时，它当然可以正常工作而无需打印任何内容。

```
D:\workspace\jni_example>java -version
java version "1.6.0_30"
Java(TM) SE Runtime Environment (build 1.6.0_30-b12)
Java HotSpot(TM) 64-Bit Server VM (build 20.5-b03, mixed mode) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:06:00.070

这是拼写错误。 `getDoubled()`相对`getDouble()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:09:47.067

您收到错误是因为您写了一个错字。你在打电话

```
System.out.println(n + " x 2 = " + getDoubled(n)); 
```

但是你声明它像

```
public native static int getDouble(int n); 
```

`getDouble`注意和之间的区别`getDoubled`。

将声明更改为

```
public native static int getDoubled(int n); 
```

这解决了问题。

# asp.net - 我如何只更新gridview中的1列？

> ID：16191531
> 
> 赞同：0
> 
> 时间：2013-04-24T12:04:16.240
> 
> 标签：asp.net, gridview

我有一个包含多列的网格视图，但是我只想更新数据库中的这些列之一。我已将所有其他列设置为只读，以便唯一可编辑的字段是我要编辑的字段，但是当我更新此字段时，所有其他字段都会被删除，但我希望它们保持不变。我该如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:41:12.750

使gridview 字段为TemplateFields，然后您可以访问字段的EditItemTemplate。在 editItemTemplate 中，代替 Textbox（默认情况下），您将文本框替换为您不需要编辑工具的字段的标签。

类似的问题在这里[http://forums.asp.net/t/1099084.aspx/1](http://forums.asp.net/t/1099084.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:58:01.723

当您更新数据库值时，您还可以更新所有其他只读值。并且每次更改一个可编辑的列值。

# edsdk - 录制电影时接收 LiveView EDSDK

> ID：16191535
> 
> 赞同：1
> 
> 时间：2013-04-24T12:04:23.180
> 
> 标签：edsdk

在录制过程中是否可以从相机中获取视图？我有实时取景，当我切换到录制模式时，我失去了实时取景，它位于相机的 TFT 上，但我想将其保留在我的应用程序中。这是可能的 ？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T10:36:31.743

您需要在线程循环中将其与 OpenCV 一起使用，同时从 liveview 存储到目录的文件中读取。

# ruby-on-rails-3 - 使用 Formtastic 的 :as => :check_boxes 时如何禁用某些复选框

> ID：16191538
> 
> 赞同：3
> 
> 时间：2013-04-24T12:04:27.867
> 
> 标签：ruby-on-rails-3, formtastic

```
<%= semantic_form_for [:admin, @admin] do |f| %>
    <%= f.inputs do %>
        <%= f.input :name %>
        <%= f.input :email, :as => :email %>
        <%= f.input :password, :as => :password %>
        <%= f.input :password_confirmation, :as => :password %>
        <%= f.input :admin_roles, :as => :check_boxes, :required => true, :disabled => [1] %>
    <% end %>
    <%= f.actions %>
<% end %> 
```

-

```
<%= f.input :admin_roles, :as => :check_boxes, :required => true, :disabled => [1] %> 
```

将数组传递给上述代码会禁用 id=1 的复选框，这很好。但是我想检查每个复选框的型号，也看看它是否有特定的值，所以我可以禁用它。

```
do_not_disable_checkbox if admin_role.do_not_show_me_boolean_field 
```

我是否需要迭代我的每个 :admin_roles 并为每个输出一个复选框？或者我可以像上面那样在一行中完成吗？我是 rails 和 ruby​​ 的新手，我无法绕开它，希望能得到一些帮助，让我朝着正确的方向前进。

# javascript - NVD3饼图如何自定义颜色

> ID：16191542
> 
> 赞同：34
> 
> 时间：2013-04-24T12:04:41.590
> 
> 标签：javascript, d3.js, nvd3.js

我正在尝试使用 NVD3 [http://nvd3.org/livecode/#codemirrorNav](http://nvd3.org/livecode/#codemirrorNav)饼图。但我想更改默认颜色。我如何改变颜色。我做不到。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-10-04T10:38:11.780

如果您想为饼图使用特定颜色

```
chart.color(function(d){
    return d.data.color
}); 
```

然后，将您的数据组织为：

```
[
  {
    key: "Cumulative Return",
    values: [
      { 
        "label": "One",
        "value" : 29.765957771107,
        "color" : "#8c564b"
      } ,
      { 
        "label": "Three",
        "value" : 32.807804682612,
        "color" : "#e377c2"
      } 
    ]
  }
] 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-04-24T16:18:47.227

您可以通过将数组传递给“color()”选项来添加颜色。所以只需添加：

```
.color(['blue', 'green', 'yellow']) 
```

如果您想将这些颜色用于 3 个元素。

注意：如果您有超过 3 个元素，则某些颜色将被多次使用。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-04-24T12:42:24.067

要使用您自己的颜色，您必须覆盖现有的颜色，我不想修改原始代码。

~~所以这就是我所做的。~~

```
 var myColors = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"];
    d3.scale.myColors = function() {
        return d3.scale.ordinal().range(myColors);
    };

    nv.addGraph(function() {
      var chart = nv.models.pieChart()
          .x(function(d) { return d.label })
          .y(function(d) { return d.value })
          .showLabels(true).color(d3.scale.myColors().range());

        d3.select("#chart svg")
            .datum(data)
          .transition().duration(1200)
            .call(chart);

      return chart;
    }); 
```

~~我所做的只是添加`.color(d3.scale.myColors().range())`~~

**`UPDATE :`**

检查 Christopher Chiche 的答案，以获得完美的解决方案。

```
.color(['blue', 'green', 'yellow']) 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T18:45:59.180

这是一个让我知道的注释，我在 nv.addGraph 中设置了 chart.color，这不能正常工作，而是使用默认值。然后我把它设置在这个之外，它工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-22T13:54:32.517

我`.color(function(d) {return [d.value > 0 ? 'blue' : 'red']});`用来让它根据数据值改变颜色。

希望这对某人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-19T12:59:05.397

这里是类似于 JS 版本的 Typescript 解决方案。假设您想要 10 种不同颜色的前 10 名结果：

在这里，我将为您提供适用于我的 PieChart 或 MultiBarChart 的示例

*   创建一个全局颜色数组，例如 colors = ["#D9D9D9", "#4B11A6", ....];
*   数据必须格式化为 Object : myGraph { key: "Title", values : { streams to push }}
*   然后在创建数据表时，只需推送每个流的颜色：

让流 = {}; 让数据 = []; 让我=0；

```
dataTable.forEach((period) => {
    stream = { 'label': period.key, 'value': period.value, 'color': this.colors[i] };

if(period.value !== 0) {
 data.push(stream);}
 i++;
});
this.myGraph = data; 
```

if 条件只是为了防止图表中出现空块

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-13T13:00:10.460

我使用以下概念来添加自定义颜色：

```
// for define variable of custom colors 
var colors = ["red", "green", "blue"];
...
chart {
    color: function(d,i){
        return (d.data && d.data.color) || colors[i % colors.length]
    }
} 
```

对于基于 JSON 数据的动态颜色，只需添加新的 json obj `color`，例如下面的概念..

```
// or set custom colors directly in the data
data = [{
        key: "One",
        y: 5,
        color: "yellow"
    },{
        key: "Two",
        y: 2,
        color: "gray"
    },{
        key: "Three",
        y: 9
    },
     ...
]; 
```

# jquery - 带有加/减切换功能的滑动菜单

> ID：16191545
> 
> 赞同：0
> 
> 时间：2013-04-24T12:04:53.327
> 
> 标签：jquery

我有滑动切换菜单，单击它会打开隐藏的 div。h4 标签中有 4 个标题，它们在 div 中有自己的描述，并且 div 是隐藏的。因此，当用户单击标题时，隐藏的 div 会向下滑动并显示内容。现在我需要一个加号/减号切换，以便用户可以理解标题下的内容。这是我的代码

```
 <div class="getInsSection">
    <!--Start sec1-->
    <div class="sec1">
        <h4>HEADING 1 <span>-</span></h4>
      <div class="hideit first">
        <p>
            Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.
        </p>
      </div>
    </div>
    <!--End sec1-->

    <!--Start sec2-->
    <div class="sec2">
        <h4>HEADING 2</h4>
      <div class="hideit">
        <p>
            Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.
        </p>
      </div>
    </div>
    <!--End sec2-->

    <!--Start sec3-->
    <div class="sec3">
        <h4>HEADING 3</h4>
      <div class="hideit">
        <p>
            Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.
        </p>
      </div>
    </div>
    <!--End sec3-->

    <!--Start sec4-->
    <div class="sec4">
        <h4>HEADING 4</h4>
      <div class="hideit">
        <p>
            Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.
        </p>
      </div>
    </div>
    <!--End sec4-->

  </div> 
```

jQuery代码

```
 $(window).load(function () {
    $('.first').show();
 });
 $(document).ready(function (){
    $('.hideit').hide();
    $('div:has(".hideit")').find('h4').click(function() {
       var elem = $(this).next('.hideit');
       if (elem.is(':visible')) {
           elem.slideUp();
       } else {
           ($('.hideit').slideUp()) (elem.slideDown());
       }
    });
 }); 
```

这是演示的[链接](http://jsbin.com/oyufid/3/edit)。

# sql - 将不相关的查询组合成一个查询以产生计数

> ID：16191549
> 
> 赞同：2
> 
> 时间：2013-04-24T12:04:58.690
> 
> 标签：sql, sql-server, sql-server-2008

我希望每天运行一个存储过程来生成计数报告。

例如，.csv 看起来像这样：

```
 Daily,1
    Deaths,0
    In-House EKG,4
    In-House Xray,2
    Suicidal Patients,12
    HIV,0 
```

他们各自的查询如下所示：

```
-- Daily and Death Counts
select
    SUM(CASE WHEN location != '[OUT]' THEN 1 ELSE 0 END) as 'Daily',
    SUM(CASE WHEN death = 1 THEN 1 ELSE 0 END) as 'Deaths'
from
    patient_data

-- In-House Tasks
select 
    SUM(CASE WHEN cat_id = 72 THEN 1 ELSE 0 END) as 'In-House EKG',
    SUM(CASE WHEN cat_id = 73 THEN 1 ELSE 0 END) as 'In-House XRay',    
from
    organizer_tasks

-- Suicidal Patients
select 
    count(distinct(pid)) as 'Suicidal Inmates'
from 
    problems pr 
        inner join problem_list pl on pl.id = pr.problem_list_id 
where 
    pr.status = 'open'
    and pl.title like '%suicide%'

-- HIV

select 
    count(distinct(pid)) as 'HIV'
from 
    problems pr 
        inner join problem_list pl on pl.id = pr.problem_list_id 
        inner join patient_data pd on pr.pid = pd.pid
where 
    pr.status = 'open'
    and pl.title like '%hiv%' 
```

如您所见，每组数据来自不同的表，并且没有关系。我怎样才能完成我想要的结果集？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:10:28.243

```
-- Daily and Death Counts
select * from (
    select
        SUM(CASE WHEN location != '[OUT]' THEN 1 ELSE 0 END) as 'Daily',
        SUM(CASE WHEN death = 1 THEN 1 ELSE 0 END) as 'Deaths'
    from
        patient_data
) tmp unpivot (Number for Type in ([Daily], [Deaths])) t

union all

-- In-House Tasks
select * from (
    select 
        SUM(CASE WHEN cat_id = 72 THEN 1 ELSE 0 END) as 'In-House EKG',
        SUM(CASE WHEN cat_id = 73 THEN 1 ELSE 0 END) as 'In-House XRay'
    from
        organizer_tasks
) tmp unpivot (Number for Type in ([In-House EKG], [In-House XRay])) t

union all

-- Suicidal Patients
select 'Suicidal Inmates',
    count(distinct(pid))
from 
    problems pr 
        inner join problem_list pl on pl.id = pr.problem_list_id 
where 
    pr.status = 'open'
    and pl.title like '%suicide%'

union all

-- HIV

select 'HIV',
    count(distinct(pid))
from 
    problems pr 
        inner join problem_list pl on pl.id = pr.problem_list_id 
        inner join patient_data pd on pr.pid = pd.pid
where 
    pr.status = 'open'
    and pl.title like '%hiv%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:13:30.780

用 Union 试试这个，它是一个 Query 中的形式：

```
 select
        SUM(CASE WHEN location != '[OUT]' THEN 1 ELSE 0 END) as 'Daily'   
    from
        patient_data    
UNION ALL
    select   
        SUM(CASE WHEN death = 1 THEN 1 ELSE 0 END) as 'Deaths'
    from
    patient_data

UNION ALL
-- In-House Tasks
    select 
        SUM(CASE WHEN cat_id = 72 THEN 1 ELSE 0 END) as 'In-House EKG'  
    from
    organizer_tasks
UNION ALL
    select
        SUM(CASE WHEN cat_id = 73 THEN 1 ELSE 0 END) as 'In-House XRay'
    from
        organizer_tasks 
UNION ALL
-- Suicidal Patients
    select 
        count(distinct(pid)) as 'Suicidal Inmates'
    from 
        problems pr 
            inner join problem_list pl on pl.id = pr.problem_list_id 
    where 
        pr.status = 'open'
        and pl.title like '%suicide%' 
```

# iphone - 如何测试来自 sendAsynchronousRequest:queue:completionHandler: 的部分响应？

> ID：16191551
> 
> 赞同：1
> 
> 时间：2013-04-24T12:05:02.250
> 
> 标签：iphone, objective-c, nsurlconnection

我有以下代码：

```
NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://some-example-domain.com/api"]
                                          cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                      timeoutInterval:30.0];

[NSURLConnection sendAsynchronousRequest:theRequest
                                   queue: [NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                           if (!error && data) {
                               // success!! - no errors and data returned
                               NSLog(@"success");
                           } else {
                               // error!! - something whent wrong
                               NSLog(@"failure: %@", [error localizedDescription]);
                           }

                       }
 ]; 
```

效果很好 -*除了*服务器只发送部分所需响应（例如来自 API 的 JSON 响应的一半）的奇怪情况（根据我的“if”语句它仍然是“成功的”）

有什么方法可以使用这种基于块的方法来检查接收到的数据是否完整？

我曾尝试研究 NSURLResponse *response - 但不能完全弄清楚如何使用它（或者，如果它在这种情况下确实有用）。关于如何测试块返回的“部分接收”数据的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:51:54.717

此查询可能有两种不同的失败模式未处理，您需要单独检查它们：

*   "successful" HTTP connection, but an malformed response
*   "successful" HTTP connection, but status code indicates a problem on the server

In the case of `NSURLConnection`, the `error` is only set when the connection fails, not when a problem is reported from the server (for example: a `404` error or a `330` response).

Generally, when you are talking to an `HTTP` or `HTTPS` service, you'll need to check the `-statusCode` in the `NSURLResponse`, which in the case of these services will actually be an `NSHTTPURLResponse`. If there's an error on the server, such as `408` for request timed out on the server, you need to handle that separately from a connection failure (which will cause the `error` to be set).

Even if you get back a nice `[response statusCode] == 200`, you will likely still want to check for malformed responses, which you'll need to do when you parse the data that comes back. This is a less likely scenario, but if the server is flakey, you may get a partial response or an encoding failure.

# vba - VBA Word - 更改小数分隔符

> ID：16191557
> 
> 赞同：3
> 
> 时间：2013-04-24T12:05:18.830
> 
> 标签：vba, ms-word

我周围的一些人在 windows/office 中使用国家本地化。不幸的是，这导致我的宏无法进行简单的数学运算，因为它们使用逗号作为小数位，而我编辑的 pov-ray 文件仅使用逗号作为列表分隔符，点作为小数点。我知道在 Excel 中可以使用覆盖系统小数分隔符

```
With Application.
    .DecimalSeparator = "."
    .ThousandsSeparator = ","
    .UseSystemSeparators = False
End With 
```

然而，在 MS Word 中没有像 DecimalSeparator 这样的 Application 属性。MS Word 中是否有一种在宏运行时覆盖系统分隔符的简单方法？或者我是否需要在读取 povray 文件期间努力替换它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:51:24.837

由于不是很有耐心，我以“更艰难的方式”做到了。我声明了公共变量

```
Public strDecimal As String 
```

然后在 main sub 的开头，我将其值设置为：

```
strDecimal = Application.International(wdDecimalSeparator) 
```

然后在源代码中，我替换了所有读入，例如

```
CDbl(strShort(5)) 
```

和

```
CDbl(Replace(strShort(5), ".", strDecimal)) 
```

和所有的写出，比如

```
Selection.TypeText Text:=CStr(Int(1000 * bondRadius) / 1000) 
```

和

```
Selection.TypeText Text:=CStr(Replace(Int(1000 * bondRadius) / 1000, strDecimal, ".")) 
```

它不像覆盖系统设置那样优雅，但它花费了我不多的时间并且它对我有用。如果有人能看到原因，为什么它有时会失败，请留下一些评论。

我将使用 barrowc 的评论 (thanx) 中的信息来查看它是只读还是读写值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-04-26T17:56:57.920

```
sub ReplaceCommabetweenDigits(sData as String)

 sData = Replace(sData, "0,0", "0.0")
sData = Replace(sData, "0,1", "0.1")
sData = Replace(sData, "0,2", "0.2")
sData = Replace(sData, "0,3", "0.3")
sData = Replace(sData, "0,4", "0.4")
sData = Replace(sData, "0,5", "0.5")
sData = Replace(sData, "0,6", "0.6")
sData = Replace(sData, "0,7", "0.7")
sData = Replace(sData, "0,8", "0.8")
sData = Replace(sData, "0,9", "0.9")
sData = Replace(sData, "1,0", "1.0")
sData = Replace(sData, "1,1", "1.1")
sData = Replace(sData, "1,2", "1.2")
sData = Replace(sData, "1,3", "1.3")
sData = Replace(sData, "1,4", "1.4")
sData = Replace(sData, "1,5", "1.5")
sData = Replace(sData, "1,6", "1.6")
sData = Replace(sData, "1,7", "1.7")
sData = Replace(sData, "1,8", "1.8")
sData = Replace(sData, "1,9", "1.9")
sData = Replace(sData, "2,0", "2.0")
sData = Replace(sData, "2,1", "2.1")
sData = Replace(sData, "2,2", "2.2")
sData = Replace(sData, "2,3", "2.3")
sData = Replace(sData, "2,4", "2.4")
sData = Replace(sData, "2,5", "2.5")
sData = Replace(sData, "2,6", "2.6")
sData = Replace(sData, "2,7", "2.7")
sData = Replace(sData, "2,8", "2.8")
sData = Replace(sData, "2,9", "2.9")
sData = Replace(sData, "3,0", "3.0")
sData = Replace(sData, "3,1", "3.1")
sData = Replace(sData, "3,2", "3.2")
sData = Replace(sData, "3,3", "3.3")
sData = Replace(sData, "3,4", "3.4")
sData = Replace(sData, "3,5", "3.5")
sData = Replace(sData, "3,6", "3.6")
sData = Replace(sData, "3,7", "3.7")
sData = Replace(sData, "3,8", "3.8")
sData = Replace(sData, "3,9", "3.9")
sData = Replace(sData, "4,0", "4.0")
sData = Replace(sData, "4,1", "4.1")
sData = Replace(sData, "4,2", "4.2")
sData = Replace(sData, "4,3", "4.3")
sData = Replace(sData, "4,4", "4.4")
sData = Replace(sData, "4,5", "4.5")
sData = Replace(sData, "4,6", "4.6")
sData = Replace(sData, "4,7", "4.7")
sData = Replace(sData, "4,8", "4.8")
sData = Replace(sData, "4,9", "4.9")
sData = Replace(sData, "5,0", "5.0")
sData = Replace(sData, "5,1", "5.1")
sData = Replace(sData, "5,2", "5.2")
sData = Replace(sData, "5,3", "5.3")
sData = Replace(sData, "5,4", "5.4")
sData = Replace(sData, "5,5", "5.5")
sData = Replace(sData, "5,6", "5.6")
sData = Replace(sData, "5,7", "5.7")
sData = Replace(sData, "5,8", "5.8")
sData = Replace(sData, "5,9", "5.9")
sData = Replace(sData, "6,0", "6.0")
sData = Replace(sData, "6,1", "6.1")
sData = Replace(sData, "6,2", "6.2")
sData = Replace(sData, "6,3", "6.3")
sData = Replace(sData, "6,4", "6.4")
sData = Replace(sData, "6,5", "6.5")
sData = Replace(sData, "6,6", "6.6")
sData = Replace(sData, "6,7", "6.7")
sData = Replace(sData, "6,8", "6.8")
sData = Replace(sData, "6,9", "6.9")
sData = Replace(sData, "7,0", "7.0")
sData = Replace(sData, "7,1", "7.1")
sData = Replace(sData, "7,2", "7.2")
sData = Replace(sData, "7,3", "7.3")
sData = Replace(sData, "7,4", "7.4")
sData = Replace(sData, "7,5", "7.5")
sData = Replace(sData, "7,6", "7.6")
sData = Replace(sData, "7,7", "7.7")
sData = Replace(sData, "7,8", "7.8")
sData = Replace(sData, "7,9", "7.9")
sData = Replace(sData, "8,0", "8.0")
sData = Replace(sData, "8,1", "8.1")
sData = Replace(sData, "8,2", "8.2")
sData = Replace(sData, "8,3", "8.3")
sData = Replace(sData, "8,4", "8.4")
sData = Replace(sData, "8,5", "8.5")
sData = Replace(sData, "8,6", "8.6")
sData = Replace(sData, "8,7", "8.7")
sData = Replace(sData, "8,8", "8.8")
sData = Replace(sData, "8,9", "8.9")
sData = Replace(sData, "8,0", "8.0")
sData = Replace(sData, "9,1", "9.1")
sData = Replace(sData, "9,2", "9.2")
sData = Replace(sData, "9,3", "9.3")
sData = Replace(sData, "9,4", "9.4")
sData = Replace(sData, "9,5", "9.5")
sData = Replace(sData, "9,6", "9.6")
sData = Replace(sData, "9,7", "9.7")
sData = Replace(sData, "9,8", "9.8")
sData = Replace(sData, "9,9", "9.9")

End sub 
```

# qt - 使用 Qt 从麦克风录制音频到 wav 文件

> ID：16191561
> 
> 赞同：2
> 
> 时间：2013-04-24T12:05:21.620
> 
> 标签：qt, audio, microphone, recording

我正在尝试做一个应用程序，目的是能够记录短语并将它们作为 wav 文件自动保存在选定的目录中。为此，我正在尝试使用 QAudioRecorder 类。当我点击录音按钮时，我对着麦克风说话，.wav 文件被保存到我选择的目录中，并使用我想要的名称，但是当我播放文件时，它只是噪音。我认为我没有正确使用录音课程。

到目前为止我所拥有的是：

```
void RecordingWidget::startRecording()
{
    if(audioRecorder->state() == QMediaRecorder::StoppedState)
    {

        //Set Audio Input
        audioRecorder->setAudioInput(audioRecorder->defaultAudioInput());

        // Sets Output location where to store the file
        if(!m_outputLocationSet)
            setOutputLocation();

        // Set recording Settings
        QAudioEncoderSettings settings;
        settings.setCodec("audio/amr");     // Not sure what to put here
        settings.setSampleRate(16000);
        settings.setBitRate(32);
        settings.setQuality(QMultimedia::HighQuality);
        settings.setEncodingMode(QMultimedia::ConstantQualityEncoding);

        audioRecorder->setEncodingSettings(settings);
        audioRecorder->record();
    }

    else {
        stopRecording();
    }
} 
```

任何人都可以帮助我，非常感谢任何指导！谢谢。

# android - 在警报对话框中显示文本视图

> ID：16191562
> 
> 赞同：6
> 
> 时间：2013-04-24T12:05:22.723
> 
> 标签：android, textview, android-alertdialog

在我的代码中，我有一个`AlertDialog`和一个`TextView`. 我想`TextView`在我的中显示这个，`AlertDialog`但我不知道该怎么做。我不知道如何`View`在`AlertDialog`.

我可以展示我的代码，但我认为它没有用。

谢谢

编辑：

感谢您的所有回答。我刚刚做了一个测试，它工作得很好。

这是我的工作代码：

```
package com.example.testalertdialog;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

    LinearLayout layout;
    AlertDialog ad;
    TextView tv1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        layout = new LinearLayout(this);
        ad = new AlertDialog.Builder(this).create();
        tv1 = new TextView(this);
        setContentView(layout);
        tv1.setText("Test");
        ad.setView(tv1);
        ad.show();

    }
} 
```

Edit2：但是为什么这段代码不起作用？

```
package com.example.testalertdialog;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;

@SuppressLint("HandlerLeak")
public class MainActivity extends Activity implements OnClickListener{

    LinearLayout layout;
    AlertDialog ad;
    TextView tv1;
    Button b1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        layout = new LinearLayout(this);
        tv1 = new TextView(this);
        b1 = new Button(this);
        b1.setOnClickListener(this);
        layout.addView(b1);
        ad = new AlertDialog.Builder(this).create();
        setContentView(layout);
        tv1.setText("Test");
}

    @Override
    public void onClick(View v) {
        if (v == b1) {

        ad.setMessage("Chargement");
        ad.show();
        ad.setView(tv1);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-24T12:10:32.430

```
AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setTitle("Title");
alert.setMessage("Message");
// Create TextView
final TextView input = new TextView (this);
alert.setView(input);

alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int whichButton) {
     input.setText("hi");
    // Do something with value!
  }
});

  alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int whichButton) {
      // Canceled.
  }
});
alert.show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T14:38:29.320

在部分自定义布局中 - 您可以为您的 alertDialog 创建自定义布局，不仅在 textview 中，而且在任何内容中。

[简化链接](http://developer.android.com/guide/topics/ui/dialogs.html)：这是我游戏中的代码

```
//create builder
AlertDialog.Builder builder = new AlertDialog.Builder(GWGPlay.this);
//inflate layout from xml. you must create an xml layout file in res/layout first
LayoutInflater inflater = GWGPlay.this.getLayoutInflater();
View layout = inflater.inflate(R.layout.guesskeyword    /*my layout here*/, null);
builder.setView(layout);
//set 2 main buttons
builder.setPositiveButton("Answer", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    endGame(true);
                }
            });

builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });

            builder.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:14:41.490

使用该`setView`方法的另一个示例：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
LayoutInflater inflater = getActivity().getLayoutInflater();
builder.setView(inflater.inflate(R.layout.name_dialog, null));
builder.create().show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T07:44:03.527

在drawable中创建一个文件名custom_window_dialog_frame.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape android:shape="rectangle"> <!-- this shape is used as shadow -->
        <padding android:bottom="3dp"
            android:left="3dp"
            android:right="3dp"
            android:top="3dp"/>
        <solid android:color="#44000000"/>
       <!--   <corners android:radius="5dp"/> -->
    </shape>
  </item>
   </layer-list> 
```

然后转到 values 文件夹打开 styles.xml 并粘贴下面的代码

```
<style name="CustomDialog" parent="@android:style/Theme.Dialog">
<item name="android:backgroundDimEnabled">true</item>
<item name="android:windowBackground">@drawable/custom_window_dialog_frame</item>
<item name="android:windowNoTitle">true</item>
</style> 
```

创建一个您想要显示的布局。就我而言，我已经在文件 dialog_layout_pro.xml 中完成了

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#dedede"
>
<TextView
    android:id="@+id/tv_dialog"
    android:layout_margin="30dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:gravity="center"
    android:textColor="#444444"
    android:text="Please wait..."
    android:textSize="30sp" />
  </RelativeLayout> 
```

在 MyTestClass.java 类

```
 Dialog cusDialog;
 cusDialog = new Dialog(MyTestClass.this, R.style.CustomDialog);
 cusDialog.setContentView(R.layout.dialog_layout_pro);
 cusDialog.setCancelable(false);
 cusDialog.show();
} 
```

自定义对话框如下图所示。享受编码:)

![图像中的 CustomDialog 最终结果](https://i.stack.imgur.com/pym6f.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T14:30:36.337

试试这个示例代码段，

```
 Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.custom);
        dialog.setTitle("Title...");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.text);
        text.setText("Android custom dialog example!");
        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.ic_launcher);

        Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T12:11:36.507

可以`AlertDialog`使用该`setView`方法将视图添加到 a 中。

例子：

```
AlertDialog dialog = new AlertDialog.Builder(this).create();
dialog.setView(your_textview);
dialog.show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T12:12:43.950

尝试这个

[http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

在这里你需要设置你自己的布局。

像这样

```
final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.custom); 
```

它会给你`textview`内部对话框。

尝试这个

//文本视图的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#B7B7B8" 
        android:text="Hello"/>

</LinearLayout> 
```

代码：-

```
AlertDialog dlg = new AlertDialog.Builder(context)
    .setView(R.layout.textview)
    .setTitle("Message")
    .setMessage(msg)
    .setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            //retval = 0;
            Toast.makeText(context,
                msg, Toast.LENGTH_SHORT).show();
        }
    }).create();
dlg.show(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-09T21:33:41.600

简短回答：您在 show() 之后调用 setView() 此代码被忽略/不再处理。您需要最后调用 show()

```
 ad.setMessage("Chargement");
        ad.show();
        ad.setView(tv1); 
```

# c# - 将 UpdatePanel 用于 asp.net 树视图 SelectedNodeChanged 事件

> ID：16191564
> 
> 赞同：1
> 
> 时间：2013-04-24T12:05:29.990
> 
> 标签：c#, asp.net, textbox, treeview, updatepanel

我有`TextBox`并且`treeview`喜欢，

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
<asp:TextBox ID="txtName" runat="server" Width="150px" ReadOnly="true"
BorderStyle="Double">
</asp:TextBox>
</ContentTemplate>  
</asp:UpdatePanel>  

<asp:TreeView ID="TreeView1" runat="server" ImageSet="Arrows"   
OnSelectedNodeChanged="TreeView1_SelectedNodeChanged" >
<NodeStyle Font-Names="Verdana" Font-Size="8pt" ForeColor="Black" HorizontalPadding="5px"
NodeSpacing="0px" VerticalPadding="0px" />
<SelectedNodeStyle CssClass="treeHover"></SelectedNodeStyle>
</asp:TreeView> 
```

`SelectedNodeChanged`事件编码，

```
protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
{      
    txtName.Text = TreeView1.SelectedNode.Text;
} 
```

我的更新面板无法正常工作，我想知道我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T04:42:14.460

试试这个....

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
    <asp:TextBox ID="txtName" runat="server" Width="150px" ReadOnly="true"
    BorderStyle="Double">
    </asp:TextBox>
    </ContentTemplate>  
     <Triggers>
            <asp:AsyncPostBackTrigger ControlID="TreeView1" EventName="SelectedNodeChanged" />
            </Triggers>
    </asp:UpdatePanel>  

    <asp:TreeView ID="TreeView1" runat="server" ImageSet="Arrows"   
    OnSelectedNodeChanged="TreeView1_SelectedNodeChanged" >
    <NodeStyle Font-Names="Verdana" Font-Size="8pt" ForeColor="Black" HorizontalPadding="5px"
    NodeSpacing="0px" VerticalPadding="0px" />
    <SelectedNodeStyle CssClass="treeHover"></SelectedNodeStyle>
    </asp:TreeView> 
```

# java - 来自颜色字符串的 Java int hex

> ID：16191566
> 
> 赞同：2
> 
> 时间：2013-04-24T12:05:32.137
> 
> 标签：java, hex

我有一个 json 响应，它产生以下内容：

ledColor : `"0xff00ff00"`-> 这代表绿色。

我如何在 java / android 中实现以下功能。

将包含的字符串转换为包含`"0xff00ff00"`的 int`0xff00ff00`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:51:05.927

使用`Long.decode`然后转换为 int：

```
 long foo = Long.decode("0xff00ff00");
    int bar = (int)foo;
    System.out.println("As int: " + bar); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:08:00.237

要获取十六进制字符串的 int 值，请使用[Integer.decode](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#decode%28java.lang.String%29)。

例如：

```
int val = Long.decode("0xff00ff00").intValue();
System.out.println(val); 
```

打印出 -16711936。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T12:08:06.683

根据预期结果的大小使用[`Long.decode`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Long.html#decode%28java.lang.String%29)or函数。[`Integer.decode`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#decode%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T13:35:38.413

请注意 - 请注意，Android API 似乎“忽略”了 Java 没有明确支持“无符号”整数的概念这一事实。

您可能想查看以下链接：

*   [如何创建十六进制 ARGB 值（诺基亚）](http://www.developer.nokia.com/Community/Discussion/showthread.php?72588-How-to-create-a-hexidecimal-ARGB-colorvalue-from-R-G-B-values)
*   [Java中的无符号数](http://www.javamex.com/java_equivalents/unsigned.shtml)

我在这里做了一个非常简单的演示应用程序，在某种程度上解释了它。希望能帮助到你！（使用风险自负！）

```
package com.test;

public class AgbUtil {

    public static int argbFromString(String argbAsString) throws Exception {

        if (argbAsString == null || argbAsString.length() < 10)
            throw new Exception("ARGB string invalid");

        String a =  argbAsString.substring(2, 4);
        String r =  argbAsString.substring(4, 6);
        String g =  argbAsString.substring(6, 8);
        String b =  argbAsString.substring(8, 10);

        System.out.println("aStr: " + a + " rStr: " + r + " gStr: " + g + " bStr: " + b);

        int aInt = Integer.valueOf(a, 16);
        int rInt = Integer.valueOf(r, 16);
        int gInt = Integer.valueOf(g, 16);
        int bInt = Integer.valueOf(b, 16);

        System.out.println("aInt: " + aInt + " rInt: " + rInt + " gInt: " + gInt + " bInt: " + bInt);

        // This is a cheat because int can't actually handle this size in Java - it overflows to a negative number
        // But I think it will work according to this: http://www.developer.nokia.com/Community/Discussion/showthread.php?72588-How-to-create-a-hexidecimal-ARGB-colorvalue-from-R-G-B-values
        // And according to this: http://www.javamex.com/java_equivalents/unsigned.shtml
        return (aInt << 24) + (rInt << 16) + (gInt << 8) + bInt; 
    }

    public static void main(String[] args) {
        System.out.println("Testing");
        try {
        System.out.println("0xff00ff00: " + argbFromString("0xFF00ff00")); // Green
        System.out.println("0xffff0000: " + argbFromString("0xffff0000")); // Red
        System.out.println("0xff0000ff: " + argbFromString("0xff0000ff")); // Blue
        System.out.println("0xffffffff: " + argbFromString("0xffffffff")); // White
        System.out.println("0xff000000: " + argbFromString("0xff000000")); // Black
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我不了解Android，所以我在这里可能完全错了！

# php - MySQL Query 127 秒执行

> ID：16191567
> 
> 赞同：0
> 
> 时间：2013-04-24T12:05:35.387
> 
> 标签：php, mysql, sql, database-schema

我有这个 SQL 查询：

```
SELECT * FROM magnitudes t1 INNER JOIN value_magnitudes t2 ON t1.id = t2.magnitude_id WHERE t1.floor_id = 42 AND t2.reading_date = (SELECT Max(reading_date) FROM value_magnitudes WHERE t2.magnitude_id = t1.id); 
```

我的数据库架构是：

```
CREATE TABLE magnitudes (
  id INTEGER UNSIGNED  NOT NULL   AUTO_INCREMENT,
  name VARCHAR(255)  NULL  ,
  sdi_id VARCHAR(255)  NULL  ,
  sdi_id_floor VARCHAR(255)  NULL  ,
  visible TINYINT(1) UNSIGNED  NULL  ,
  history TINYINT(1) UNSIGNED  NULL  ,
  created_at DATETIME  NULL  ,
  updated_at DATETIME  NULL  ,
  floor_id INT(11)  NULL  ,
  unit VARCHAR(255)  NULL  ,
  kind_id INT(11)  NULL  ,
  sample_time INT(11)  NULL  ,
  history_from DATETIME  NULL DEFAULT 2011-02-22 11:18:07   ,
PRIMARY KEY(id));

CREATE TABLE value_magnitudes (
  id INTEGER UNSIGNED  NOT NULL   AUTO_INCREMENT,
  value FLOAT  NULL  ,
  magnitude_id INT(11)  NULL  ,
  sdi_belongs_id VARCHAR(255)  NULL  ,
  reading_date DATETIME  NULL  ,
  created_at DATETIME  NULL  ,
  updated_at DATETIME  NULL    ,
PRIMARY KEY(id)); 
```

我真正想要的是，得到最后一个取决于`value_magnitudes`最后一个`updated_at``magnitudes.id on values_magnitudes.magnitude_id`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:09:18.880

```
SELECT TOP 1 VM.* FROM value_magnitudes VM, magnitudes M  WHERE M.id = VM.id ORDER BY updated_at DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:10:58.840

`SELECT VM.* FROM value_magnitudes VM, magnitudes M WHERE M.id = VM.id ORDER BY updated_at DESC LIMIT 0,1;`

# jquery - 如何在 jquery 中仅获得过滤后的结果？

> ID：16191569
> 
> 赞同：0
> 
> 时间：2013-04-24T12:05:35.943
> 
> 标签：jquery

我正在对 xml 文件进行过滤搜索。到目前为止，如果我只选择一个属性，我已经成功地显示了正确的节点。Bur 当我想显示具有两个相同属性的节点时，我得到所有具有至少一个正确属性的节点。这是我的代码：

```
function loadFilter(xml){
    filterResults(xml);
}

function filterResults(xml)
{
    match=true;
    var candidate = $(xml).find("candidate");
    for (var i=0;i<candidate.length;i++)
    {
        var sex_key = $("#sex").val(); 
        var sex_value = $(candidate[i]).attr("sex");

        var eye_color = $("#eye-color").val();
        var eye_color_value = $(candidate[i]).attr("eyecolor");

        var transport = $("#transport").val();
        var transport_value = $(candidate[i]).attr("transport");

        var extra = $("#extra").val();
        var extra_value = $(candidate[i]).attr("extra");

        if( checkValue(sex_key, sex_value) == true)
        {
            match = true;
            displayFilteredCandidate();
        }

        if( checkValue(eye_color,eye_color_value) == true )
        {
            match = true;
            displayFilteredCandidate();
        }

        if( checkValue(transport,transport_value) == true )
        {
            match = true;
            displayFilteredCandidate();
        }

        if( checkValue(extra,extra_value) == true )
        {
            match = true;
            displayFilteredCandidate();
        }

        function displayFilteredCandidate(){
            console.log($(candidates[i].getElementsByTagName("img")[0]));
            var candidateName = $(candidates[i]).attr("name")+" "+$(candidates[i]).attr("surname");
            var candidateImage = $(candidates[i].getElementsByTagName("img")[0]).attr("src");
            var cand = CandidateThumb(candidateName,"../candidates/"+candidateImage,candidates[i]);
            cand.data({node:candidates[i]}).click(candidateClick);
            $("#mainContent").append("<div id='candidates'></div>");
            $("#candidates").append(cand);                  
        }
    }
}

function checkValue(key, value)
{
    var match = false;

    if(key == value)
    {
        match = true;
    } else {
        match = false;
    }
    console.log(match);
    return match;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:12:57.980

这是因为只要*其中一个属性*匹配，您就将 match 设置为 true。你要

```
if (
    checkValue(sex_key, sex_value) == true &&
    checkValue(eye_color,eye_color_value) == true &&
    checkValue(transport,transport_value) == true &&
    checkValue(extra,extra_value) == true
) {
    match = true;
    displayFilteredCandidate();
} 
```

这样您就可以检查所有属性，并且仅在*所有*属性都匹配时才显示候选人。

编辑：如果你想匹配*至少两个*，就这样做

```
if (
    checkValue(sex_key, sex_value) +
    checkValue(eye_color,eye_color_value) +
    checkValue(transport,transport_value) +
    checkValue(extra,extra_value)
    >= 2
) {
    match = true;
    displayFilteredCandidate();
} 
```

（这是建立在这样一个事实的基础上的，即如果您将布尔值与 + 相加，它们将变为整数（1 表示真，0 表示假）。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:16:57.233

```
function filterResults(xml)
{
    var numToMatch = 2;
    var matched = 0;
    var sex_key = $("#sex").val(); 
    var eye_color = $("#eye-color").val();
    var transport = $("#transport").val();
    var extra = $("#extra").val();
    var candidate = $(xml).find("candidate").each(function(){

    if(this.attr("sex") == sex_key)
        matched++;
    if(this.attr("eyecolor") == eye_color)
        matched++;
    if(this.attr("transport") == transport)
        matched++;
    if(this.attr("extra") == extra)
        matched++;
    if(matched >= numToMatch)
        displayFilteredCandidate();
} 
```

我想如果你想使用你的比较功能并且因为我觉得它很酷，你可以这样做：

```
function filterResults(xml)
{
    var numToMatch = 2;
    var matched = 0;
    var sex_key = $("#sex").val(); 
    var eye_color = $("#eye-color").val();
    var transport = $("#transport").val();
    var extra = $("#extra").val();
    var candidate = $(xml).find("candidate").each(function(){

    matched += checkValue(this.attr("sex"), sex_key);
    matched += checkValue(this.attr("eyecolor"), eye_color);
    matched += checkValue(this.attr("transport"), transport);
    matched += checkValue(this.attr("extra"), extra);
    if(matched >= numToMatch)
        displayFilteredCandidate();
} 
```

# jboss - 如何在单个 JBoss 上运行两个应用程序而不创建多个实例

> ID：16191571
> 
> 赞同：0
> 
> 时间：2013-04-24T12:05:40.017
> 
> 标签：jboss

我有一个监听 1099 端口的应用程序。我还有另一个引用相同端口（1099）的应用程序。我已经在单个 JBoss 中部署了这两个应用程序。当我运行 JBoss（使用 jboss-6.1.0.Final）时，它会引发错误。有没有其他方法可以在不创建另一个 JBoss 实例的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:32:31.007

两个进程不应该监听同一个端口。您应该在应用程序中配置端口，然后为它们使用不同的端口。

# html - 如何以 HAML 形式转义 HTML？

> ID：16191576
> 
> 赞同：0
> 
> 时间：2013-04-24T12:05:54.837
> 
> 标签：html, ruby-on-rails, haml

当我进行编辑时，我的 HAML 表单会使用`&ampersand;`文本字段中的值呈现。我已经设置`escape_html`为true，但它仍然呈现`&ampersand;`我在这里犯了什么错误？这是正确的语法吗？

我的表格：

```
= f.text_field :display_name, escape_html => true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-24T16:04:42.717

作为序言，我只是在学习 haml （截至几个小时前），但我认为我至少有一个好地方让你开始，因为我认为你的问题是你需要将它设置为`false`，而不是`true`或者你应该尝试 unescape的HTML。我认为你最好的选择是看看这个haml的参考。

> “Rails XSS 保护
> 
> Haml 支持 Rails 的 XSS 保护方案，该方案在 Rails 2.3.5+ 中引入，在 3.0.0+ 中默认启用。如果启用，Haml 的 :escape_html 选项默认设置为 true - 就像在 ERB 中一样，打印到 Haml 模板的所有字符串都默认转义。与 ERB 一样，标记为 HTML 安全的字符串也不会转义。Haml 也有自己的语法，用于将原始字符串打印到模板。
> 
> 如果启用 XSS 保护时 :escape_html 选项设置为 false，Haml 默认不会转义 RUBY 字符串。但是，如果将标记为 HTML 安全的字符串传递给 Haml 的转义语法，它不会被转义。
> 
> 最后，所有返回已知为 HTML 安全的字符串的 Haml 助手都被标记为此类。此外，字符串输入会被转义，除非它是 HTML 安全的。”

来自[http://haml.info/docs/yardoc/file.REFERENCE.html#rails_xss_protection](http://haml.info/docs/yardoc/file.REFERENCE.html#rails_xss_protection)

我不是专家，但据我所知，如果您将`:escape_html`选项设置为`true`，您将始终获得经过清理的 html。如果您使用的是最新版本的 haml，则默认设置为 true。尝试将其设置为`false`，而不是。

我刚刚发现的另一个有用的东西是对 html 进行转义。您可以尝试使用 != 在包含要保留未清理的 html 的 haml 前面。例如 -`!= "I feel <strong>!"`编译为我觉得！。

来自[http://haml.info/docs/yardoc/file.REFERENCE.html#unescaping_html](http://haml.info/docs/yardoc/file.REFERENCE.html#unescaping_html)

如果您已经知道这些内容或者它没有回答您的问题，我希望这会有所帮助和抱歉。祝你好运！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-24T12:14:47.563

我认为 Ruby 有一些功能`.html_safe`，`raw()`所以当你保存它时，它会给你干净的文本。

# sql - 用另一行的一些值更新每一行

> ID：16191581
> 
> 赞同：1
> 
> 时间：2013-04-24T12:06:18.260
> 
> 标签：sql, sql-server, database

我想用 SQL 编写一个更新查询，如下所示：

```
UPDATE A
SET A.PARENT_ID = [ID of another row]
FROM MY_TABLE AS A 
```

我想要做的是，对于将应用此更新的每一行，我希望它`[ID of another row]`从如下查询中计算部分：

```
SELECT A.NAME, B.NAME, MAX(B.ID)
FROM MY_TABLE A, MY_TABLE B
WHERE A.NAME = B.NAME 
```

所以基本上：

1.  当它正在更新一行时，它会尝试查找与当前正在更新的行同名的其他行。
2.  其中，它将尝试获取具有最高 的行`ID`。
3.  然后它会将`PARENT_ID`当前正在更新的行的`ID`值更新为它找到的行的值。

在 SQL Server 2008 中执行类似操作的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:18:04.893

那么，具有相同的每一行都`Name`应该具有相同的`ParentID`，并且这应该是该名称的最高分配 ID 值？

这应该这样做：

```
;with Highest as (
    select ID,Name,ParentID,MAX(ID) OVER (PARTITION BY Name) as NewParentID
    from MY_TABLE
)
update Highest set ParentID = NewParentID 
```

进一步阅读：

*   [`OVER`条款](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.100%29.aspx)
*   [公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.100%29.aspx)
*   [`UPDATE`](http://msdn.microsoft.com/en-gb/library/ms177523%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:22:20.617

请尝试 INNER JOIN 更新：

```
UPDATE A
SET A.PARENT_ID = B.mx
FROM MY_TABLE A
INNER JOIN (SELECT C.PARENT_ID mx, MAX(C.ID) OVER (PARTITION BY C.NAME)
            FROM MY_TABLE C
)B 
ON A.PARENT_ID=B.PARENT_ID 
```

提供`PARENT_ID`是独一无二的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:24:00.387

怎么样？：

```
UPDATE A
SET A.PARENT_ID = (SELECT MAX(B.ID)
           FROM MY_TABLE B
           WHERE A.NAME = B.NAME)
FROM MY_TABLE AS A 
```

# c# - C# 自定义关闭、最小化和最大化按钮

> ID：16191583
> 
> 赞同：2
> 
> 时间：2013-04-24T12:06:25.363
> 
> 标签：c#, c#-4.0, user-controls

我一直在尝试创建自己的程序，使用自定义关闭最大化和最小化按钮（如在 Visual Studio 或 Word 2013 等中......（我的边框样式设置为“无”））所以我一直在尝试要做的是创建三个按钮。一个带有关闭选项，（工作正常）一个带有最小化选项，（也可以正常工作）和一个带有最大化按钮。单独的最大化按钮可以正常工作，但我希望它像标准的 Windows 按钮一样，这样当表单最大化时，它将恢复表单以前的状态（正常），我知道可以用

```
this.WindowState = FormWindowState.Normal; 
```

但如果你明白我的意思，它应该是一个按钮。我尝试过的是制作一个布尔值，当表单最大化时（使用“if”语句），它的值设置为 true，当表单未最大化时（else 函数）设置为 false。现在，当单击最大化按钮时，表单将最大化，因此布尔值将设置为 true，但是当我再次单击时，没有任何反应！关闭和最小化等其他功能也很好用，我什至做了一个“恢复”按钮，效果很好！

任何帮助表示赞赏，这是我的代码：

```
 bool restore;

    private void set_Restore()
    {
        {
            if (this.WindowState == FormWindowState.Maximized) //Here the "is" functions is
            {
                restore = true; //Sets the bool "restore" to true when the windows maximized
            }
            else
            {
                restore = false; //Sets the bool "restore" to false when the windows isn't maximized
            }
        }
    }

    private void MaximizeButton_Click(object sender, EventArgs e)
    {
        {
            if (restore == true)
            {
                this.WindowState = FormWindowState.Normal; //Restore the forms state
            }
            else
            {
                this.WindowState = FormWindowState.Maximized; //Maximizes the form
            }
        }
    } 
```

好吧，我有三个警告，这是我认为错误的一个：

字段“WindowsFormsApplication2.Form1.restore”从未分配给，并且始终具有其默认值 false。

我认为它说布尔“恢复”从未使用过，并且始终具有默认值 FALSE，它不应该因为我的 set_Restore 在最大化时。

另外两个警告是：

分配了变量“restore”，但从未使用过它的值 分配了变量“restore”，但从未使用过它的值

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:50:37.547

您正在您的方法中创建一个*新*的本地恢复变量`set_Restore()`：

```
bool restore = true; 
```

尝试将其更改为：

```
restore = true; 
```

我什至不认为该变量是必需的。我认为你可以这样做：

```
private void MaximizeButton_Click(object sender, EventArgs e) {
  if (this.WindowState == FormWindowState.Maximized) {
    this.WindowState = FormWindowState.Normal;
  } else {
    this.WindowState = FormWindowState.Maximized;
  }
} 
```

# android - 从名称中获取地点的描述

> ID：16191588
> 
> 赞同：2
> 
> 时间：2013-04-24T12:06:34.370
> 
> 标签：android, google-places-api, google-places

我在这里有一个小问题。在我的应用程序中，用户输入一个地点的名称，然后我应该向他显示具有他输入的地点名称的地点列表。所以显然我需要将输入的名称发送到 Google Places，我希望它会返回给我一个描述列表，以唯一标识每个地方。那么有没有办法得到这个？PS：我搜索了很多，我没有找到如何从它的名字中得到一个地方的描述。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:29:13.173

基于文本查询搜索位置列表的默认 API 调用：

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=PLACE_NAME&sensor=false&key=YOUR_GOOGLE_API_KEY](https://maps.googleapis.com/maps/api/place/textsearch/json?query=PLACE_NAME&sensor=false&key=YOUR_GOOGLE_API_KEY)

这将返回一个 JSON 数组，其中包含根据您在 PLACE_NAME 字段中输入的内容找到的所有 Google Places 位置，每个位置都包含一些基本信息。

如果您想要更详细的描述，您可以致电：

[https://maps.googleapis.com/maps/api/place/details/json?reference=REFERENCE_OF_PLACE&sensor=false&key=YOUR_GOOGLE_API_KEY](https://maps.googleapis.com/maps/api/place/details/json?reference=REFERENCE_OF_PLACE&sensor=false&key=YOUR_GOOGLE_API_KEY)

其中 REFERENCE_OF_PLACE 是您要获取信息的地点的参考 ID（在 textsearch 调用中检索）。

可以通过在[Google API 控制台注册来检索 google api 密钥](https://code.google.com/apis/console/)

可以在[此处](http://mobile.dzone.com/news/android-tutorial-how-parse)找到如何检索和解析 JSON 的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:35:43.500

Android 提供了 Geocoder 类，您可以通过该类获取 Locations 的详细信息。

[检查这个](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName%28java.lang.String,%20int%29)

# c# - 首先在 StringBuilder 中存储的 File.AppendText 或 File.WriteAllText 消耗的资源更少，速度更快？

> ID：16191591
> 
> 赞同：10
> 
> 时间：2013-04-24T12:06:48.913
> 
> 标签：c#, performance, streamwriter, .net

我必须将数千个动态生成的行写入文本文件。我有两个选择，哪个消耗更少的资源并且比另一个更快？

**A. 使用 StringBuilder 和 File.WriteAllText**

```
StringBuilder sb = new StringBuilder();

foreach(Data dataItem in Datas)
{
    sb.AppendLine(
        String.Format(
            "{0}, {1}-{2}",
            dataItem.Property1,
            dataItem.Property2,
            dataItem.Property3));
}

File.WriteAllText("C:\\example.txt", sb.ToString(), new UTF8Encoding(false)); 
```

**B. 使用 File.AppendText**

```
using(StreamWriter sw = File.AppendText("C:\\example.txt"))
{
    foreach (Data dataItem in Datas)
    {
        sw.WriteLine(
            String.Format(
                "{0}, {1}-{2}",
                dataItem.Property1,
                dataItem.Property2,
                dataItem.Property3));
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-24T14:28:33.717

您的第一个版本将所有内容放入 a`StringBuilder`然后写入，将消耗最多的内存。如果文本非常大，则可能会耗尽内存。它有可能更快，但也可能更慢。

第二个选项将使用更少的内存（基本上，只是`StreamWriter`缓冲区），并且性能非常好。我会推荐这个选项。它执行得很好——可能比第一种方法更好——并且没有同样的内存耗尽的可能性。

您可以通过增加输出缓冲区的大小来加快速度。而不是

```
File.AppendText("filename") 
```

使用以下命令创建流：

```
const int BufferSize = 65536;  // 64 Kilobytes
StreamWriter sw = new StreamWriter("filename", true, Encoding.UTF8, BufferSize); 
```

64K 的缓冲区大小比默认的 4K 缓冲区大小提供更好的性能。你可以更大，但我发现大于 64K 的性能提升很小，而且在某些系统上实际上*会降低*性能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T12:25:18.640

您确实至少有一个其他选择，使用[`File.AppendAllLines()`](http://msdn.microsoft.com/en-us/library/dd383356.aspx)

```
var data = from item in Datas
            select string.Format("{0}, {1}-{2}", item.Property1, item.Property2, item.Property3);

File.AppendAllLines("Filename", data, new UTF8Encoding(false)); 
```

从理论上讲，这将比您的第一种方法使用更少的内存，因为一次只有一行将被缓冲在内存中。

不过，它可能与您的第二种方法几乎完全相同。我只是向你展示第三种选择。这个唯一的好处是你可以给它一个 Linq 序列，这有时很有用。

I/O 速度将使任何其他考虑相形见绌，因此您应该专注于最小化内存使用，正如上面提到的 juharr （当然还要考虑过早优化的危险！）

这意味着使用您的第二种方法，或者我放在这里的方法。

# fabricjs - 有什么方法可以在织物 js 中拉伸/折叠画布网格？

> ID：16191592
> 
> 赞同：0
> 
> 时间：2013-04-24T12:07:02.757
> 
> 标签：fabricjs

我正在考虑使用输入字段拉伸/折叠画布网格。我也尝试了grid.js。但这不适用于fabric js，尽管我很努力。

是否可以通过用户输入拉伸/折叠画布网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T11:32:48.913

我已经使用我在 jsfiddle 中找到的其他一些人的解决方案提出了一个解决方案，但我现在找不到该参考链接。我刚刚定制了该解决方案以使用我的代码。感谢那家伙。这是我的解决方案 -

```
function draw_grid(grid_size) {

    grid_size || (grid_size = 25);
    currentCanvasWidth = canvas.getWidth();
    currentcanvasHeight = canvas.getHeight();

    // Drawing vertical lines
    var x;
    for (x = 0; x <= currentCanvasWidth; x += grid_size) {
        this.grid_context.moveTo(x + 0.5, 0);
        this.grid_context.lineTo(x + 0.5, currentCanvasHeight);
    }

    // Drawing horizontal lines
    var y;
    for (y = 0; y <= currentCanvasHeight; y += grid_size) {
        this.grid_context.moveTo(0, y + 0.5);
        this.grid_context.lineTo(currentCanvasWidth, y + 0.5);
    }

    grid_size = grid_size;
    this.grid_context.strokeStyle = "black";
    this.grid_context.stroke();
} 
```

我希望有一天会有人。

# android - CheckingButton 背景资源 ID android

> ID：16191596
> 
> 赞同：6
> 
> 时间：2013-04-24T12:07:15.413
> 
> 标签：android, android-button

我有一个按钮

```
Button button = (Button)findViewById(R.id.button);
button.setBakgroundResource(R.drawable.icon); 
```

如果我想检查哪个背景资源按钮有，可以这样做吗？如何。

例如 ：

```
if (button.getResourceId()==R.drawable.icon) 
```

做一点事...

**更新：条件是错误的，我希望它是真实的，图像不匹配**

vi.findViewById(R.id.button1).setOnClickListener(new OnClickListener(){

```
 @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            v.findViewById(R.id.button1).setBackgroundResource(R.drawable.boutton_off);

            Drawable aImg = (Drawable)v.findViewById(R.id.button1).getBackground();
            Drawable bImg = v.getResources().getDrawable(R.drawable.boutton_off);

            if(aImg==bImg){

                System.out.println("On");

            }else 
                System.out.println("off");

            //main.popMessage(position);

        }

    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-01T15:17:13.057

如果您为按钮设置多个可绘制背景，则按如下方式检查它

```
 if(button.getBackground().getConstantState()==getResources().getDrawable(R.drawable.name1).getConstantState())
{
//Your code
}
else if(button.getBackground().getConstantState()==getResources().getDrawable(R.drawable.name2).getConstantState())
{
//Your code
}
else
{
//Your code
} 
```

`button.getBackground().getConstantState().equals(getResources().getDrawable(R.drawable.name1).getConstantState())`如果上面的代码不起作用，您可以使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T12:17:31.233

这似乎是不可能的。资源被解析为 Drawable ，这就是您可以返回标准功能的所有内容。也许有一种方法可以以另一种方式将可绘制对象解析回 id，但是此功能并未在按钮类中实现。

如果您需要轻松访问该 resourceId 并且您正在从代码设置资源源，您可以编写实现 Android Button 的 ButtonClass 并重载/创建 setBackgroundResource 以将 id 保存在您可以访问的其他字段中。当然，如果按钮获得他的 BackgroundRessource 不是由于您这边的函数调用，这当然是行不通的。

这里有一些代码。

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.Button;

public class MyButton extends Button {
    private int bgId;

    public MyButton(Context context) {
        super(context);
    }
    public MyButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public MyButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    @Override
    public void setBackgroundResource(int resId) {
        super.setBackgroundResource(resId);
        bgId = resId;   
    }

    public int getBackgroundId() {
        return bgId;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-26T01:24:07.327

我通过使用 hashmap 解决了这个问题。经过大量浪费时间搜索如何获取后台资源。当我想设置后台资源但又不想丢失我设置的内容时，我做了这样的事情：

```
HashMap<Button,Integer> hashMap;
myButton.setBackgroundResources(R.drawable.my_image);
hashMap.put(myButton,R.drawable.my_image); 
```

现在，如果您想将该图像与另一张图像进行比较：

```
if(hashMap.get(myButton)==R.drawable.my_image)
{
 myButton.setBackgroundResources(R.drawable.another_image);
 hashMap.put(myButton,R.drawable.another_image);
} 
```

**请记住：如果您使用现有键放置了另一个资源，则该值将被覆盖**， *不要忘记在使用之前初始化hashmap，* 希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:14:42.850

我认为 getBackground() 是您正在寻找的。它返回一个drawable，所以你可以像这样检查它：

```
Button myButton = ...;
Drawable myDrawable = getResources().getDrawable(R.drawable. ... ); //the one you are looking for
if(myButton.getBackground().equals(myDrawable)){
....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-21T06:13:53.270

```
ImageView imageView = (ImageView) v.getTag();

if (hashMap.get(imageView) == R.drawable.hover) {
    imageView.setBackgroundResource(R.drawable.hover1);
    imageView.setTag(imageView);
    hashMap.put(imageView, R.drawable.hover1);
} else {
    imageView.setBackgroundResource(R.drawable.hover);
    imageView.setTag(imageView);
    hashMap.put(imageView, R.drawable.hover);
}
imageView.setScaleType(ScaleType.FIT_CENTER); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-12T00:28:13.043

正如@Nihal 回答的那样很棒，但是 getResources() 现在已经被贬低了，在这种情况下你可以直接去 getDrawable()

对于 JAVA：

```
 if(button.getBackground().getConstantState()==getDrawable(R.drawable.name1).getConstantState())
{
//Your code
}
else if(button.getBackground().getConstantState()==getDrawable(R.drawable.name2).getConstantState())
{
//Your code
}
else
{
//Your code
} 
```

对于科特林

```
 if(button.background.constantState==getDrawable(R.drawable.name1)?.getConstantState){
//Your code
}
else if(button.background.constantState==getDrawable(R.drawable.name2)?.getConstantState){
//Your code
}
else
{
//Your code
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-24T12:22:41.827

```
Drawable aImg = (Drawable)done.getBackground();
Drawable bImg = getResources().getDrawable(R.drawable.ic_launcher);
if(aImg==bImg){

} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-24T12:16:18.577

你可以做这样的事情.. 1.无论你为你的按钮设置什么背景，也将此背景设置为按钮的 ID。意味着`button.setId(R.drawable.image);`

2.然后检查条件..

```
int temp = button.getId();
    if(temp == R.drawable.image){
    //Do something...
    } 
```

希望对你有帮助...

# javascript - 我需要一个特定效果的 3d 相机

> ID：16191606
> 
> 赞同：-4
> 
> 时间：2013-04-24T12:07:38.780
> 
> 标签：javascript, html, webgl

需要动画效果与此相同或几乎相等的相机：

[http://www.ambiera.com/coppercube/demo.php?demo=3rdpersoncam&mode=webgl](http://www.ambiera.com/coppercube/demo.php?demo=3rdpersoncam&mode=webgl)

如果有人可以提供帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:12:20.323

简单地说，你雇佣了一个知道他/她在做什么的开发人员。或者，您购买 Coppercube。我们不能为您创建一个数千行的脚本。

# perl - 如何在 Perl 脚本中使用 TAP 格式化程序模块并在命令行上运行相同的模块

> ID：16191608
> 
> 赞同：0
> 
> 时间：2013-04-24T12:07:44.013
> 
> 标签：perl, command-line, tap, formatter

我试过这种语法：

```
use TAP::Harness;
 my @tests = glob( 't/*.t' );
 my $harness = TAP::Harness->new({ formatter_class => 'TAP::Formatter::HTML',
                                   merge => 1 });
 $harness->runtests( @tests ); 
```

然后我将脚本作为 perl file.pl 执行

结果：

> 无法在 file.pl 第 32 行加载 TAP::Formatter::HTML。
> 
> 1..14
> 
> #看起来您的测试在 14 点之后以 2 退出。

然后我尝试了另一种方法：

```
 prove -m -Q --formatter=TAP::Formatter::HTML >output.html 
```

结果：

> 在 C:/Perl/lib/App/Prove.pm 第 528 行没有找到命名的测试和“t”目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:53:25.477

我也无法让`formatter_class`arg 使用`TAP::Formatter::HTML`.

但是，以下内容应与`formatter`arg 一起使用：

```
use strict;
use warnings;
use TAP::Harness;
use TAP::Formatter::HTML;

my @tests = glob "t/*.t";

my $fmt = TAP::Formatter::HTML->new;    # Set up the formatter
   $fmt->output_file( 'results.html' ); # options in $fmt

my $harness = TAP::Harness->new( { formatter => $fmt } );

$harness->runtests( @tests ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:19:19.490

这对我来说很好。

```
#!/usr/bin/perl
use strict;
use warnings;
use TAP::Harness;

my @tests = glob( 't/*.t' );
my $harness = TAP::Harness->new();
$harness->runtests( @tests ); 
```

检查`TAP::Harness`.

它的`man`页面说：

> 构造函数返回一个新的“TAP::Harness”对象。它接受一个可选的 hashref 。

子程序中允许其键的 hashref 列表`new`可以在其`man`页面中找到。

[在此处](http://search.cpan.org/~ovid/Test-Harness-3.26/lib/Test/Harness.pm)查看其在线文档。

# c# - 如何找到号码。不读取文本文件的字节数？

> ID：16191609
> 
> 赞同：0
> 
> 时间：2013-04-24T12:07:45.623
> 
> 标签：c#, string, streamreader

我有 c# 代码读取文本文件并将其打印出来，如下所示：

```
StreamReader sr = new StreamReader(File.OpenRead(ofd.FileName));
byte[] buffer = new byte[100]; //is there a way to simply specify the length of this to be the number of bytes in the file?
sr.BaseStream.Read(buffer, 0, buffer.Length);

foreach (byte b in buffer)
{
      label1.Text += b.ToString("x") + " ";
} 
```

无论如何我可以知道我的文件有多少字节？

我想知道`byte[] buffer`提前的长度，以便在 Read 函数中，我可以简单地`buffer.length`作为第三个参数传入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T12:11:19.573

```
System.IO.FileInfo fi = new System.IO.FileInfo("myfile.exe");
long size = fi.Length; 
```

为了找到文件大小，系统必须从磁盘中读取。因此，上面的示例执行从磁盘读取数据但不读取文件内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T12:11:31.433

`StreamReader`如果要读取*二进制*数据，目前还不清楚为什么要使用。改用就好`FileStream`了。您可以使用该[`Length`](http://msdn.microsoft.com/en-us/library/system.io.filestream.length.aspx)属性来查找文件的长度。

但是请注意，这并不意味着您应该只调用`Read`并*假设一次调用将读取所有数据。你应该循环直到你读完所有内容：

```
byte[] data;
using (var stream = File.OpenRead(...))
{
    data = new byte[(int) stream.Length];
    int offset = 0;
    while (offset < data.Length)
    {
        int chunk = stream.Read(data, offset, data.Length - offset);
        if (chunk == 0)
        {
            // Or handle this some other way
            throw new IOException("File has shrunk while reading");
        }
        offset += chunk;
    }
} 
```

请注意，这是假设您确实*要*读取数据。如果您甚至不想打开流，请使用[`FileInfo.Length`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.length.aspx)其他答案所示。请注意，两者`FileStream.Length`和`FileInfo.Length`的类型均为`long`，而数组的长度限制为 32 位。对于大于 2 gigs 的文件，您希望发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:11:37.090

您可以使用[FileInfo.Length](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.length.aspx)方法。看一下链接中给出的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:12:54.697

我想这里的东西应该会有所帮助。

我怀疑您可以在不阅读文件的情况下先发制人地猜测文件的大小...

[如何在块中使用 File.ReadAllBytes](https://stackoverflow.com/questions/11597295/how-do-i-use-file-readallbytes-in-chunks)

如果是大文件；那么分块阅读可能会有所帮助

# c++ - 是否有在 MFC 对话框中定义的控件列表或控件容器

> ID：16191612
> 
> 赞同：0
> 
> 时间：2013-04-24T12:07:55.187
> 
> 标签：c++, mfc, controls, containers, cdialog

我在询问 mfc 对话框中的列表或控件容器？我并不是说像这个问题那样列出对话框的子窗口[Loop through MFC Child Dialogs, MDIFrames etc](https://stackoverflow.com/questions/1762933/loop-through-mfc-child-dialogs-mdiframes-etc)，我想要的是在对话框类中定义为变量的控件列表，这些控件应用了 DDX_Control 方法。

我需要在对话框中定义所有控制变量的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:18:48.157

哪有这回事。DDX 使用控件是因为在对话框类的 DoDataExchange 方法中调用了相应的 DDX_* 函数。没有可以解析的表，因此无法动态确定在 DoDataExchange 方法中调用了哪个 DDX_* 函数。

```
void CMySampleDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    //{{AFX_DATA_MAP(CReprendBudgetDlg)
    DDX_Text(pDX, IDC_EDIT1, m_name1);
    DDX_Text(pDX, IDC_EDIT2, m_name2);
    //}}AFX_DATA_MAP
} 
```

但是您可以通过您自己的一些函数“覆盖” DDX_* 函数，这些函数会将控件 ID 放入数组中。因此，一旦执行了 DoDataExchage 函数，该数组将包含 DDX 使用的所有控件 ID。

```
void AFXAPI MY_DDX_Text(CDataExchange* pDX, int nIDC, CString& value, CWordArray & ddxcontrols)
{
  DDX_Text(pDX, nIDC, value);
  if (!pDX->bSaveAndValidate)
    ddxcontrols.Add(nIDC) ;
}

#define DDX_Text(a,b,c) MY_DDX_Text(a,b,c)  // now we can continue to use DDX_Text
                                            // and the Class Wizard will be happy

class CMySampleDlg : public CDialog
{
 ...
  protected:
    CWordArray m_ddxcontrols ;  // array that will contain all control IDs use by DDX
  ...
}

void CMySampleDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    //{{AFX_DATA_MAP(CReprendBudgetDlg)
    DDX_Text(pDX, IDC_EDIT1, m_name1, m_ddxcontrols);
    DDX_Text(pDX, IDC_EDIT2, m_name2, m_ddxcontrols);
    //}}AFX_DATA_MAP
} 
```

所以你所要做的就是

*   为所有 DDX_* 函数编写 MY_DDX_* 函数（它们在 afxdd_.h 中定义）。
*   在所有对话框中替换对 DDX_* 函数的所有调用我的 MY_DDX_* 函数
*   将 m_ddxcontrols 成员放入所有对话框中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:03:53.193

我不知道，但您可以将控制资源 ID 从 DoDataExchange 块复制到一个带有零终止符的数组中：

```
const UINT myControls[] =
{
  IDC_EDIT1,      IDC_EDIT2,      IDC_EDIT3,
  IDC_BUTTON1,    IDC_BUTTON2,    IDC_BUTTON3,
  IDC_STATIC1,    IDC_STATIC2,    IDC_STATIC3,
  0
}; 
```

然后你可以使用这个数组来迭代你想要的控件：

```
for (const UINT* p = myControls; *p; ++p)
{
    CWnd *wnd = GetDlgItem(*p);
    ...
} 
```

不是动态解决方案，但足够简单。

# php - 在第一个 % 之后和最后一个 % 之前匹配的正则表达式

> ID：16191614
> 
> 赞同：-1
> 
> 时间：2013-04-24T12:07:57.140
> 
> 标签：php, regex, parsing, html-parsing, substitution

我需要一个正则表达式，它可以匹配以下字符串中“%”标记内的内容：

> 1) 呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜

即使表格是这样的：

> 2) Bla bla bla %yada yada yada% bla bla %yada #1 yada%

我认为`/%([^%]*)%/`可以，但在第二种情况下，它与第二部分（%yada #1 yada%）不匹配，仅与第一部分匹配。

即使“%”标记之间的子字符串包含“#1”之类的内容，表达式也必须匹配。先感谢您

问候

```
function replace($search, $replace, $subject, $link)
    {
        if (preg_match('/#[1-9]/', $search) == 1 && $link == null)
        {
            echo preg_replace($search, $replace, $subject);
        }
        if (preg_match('/%[a-zA-Z0-9# ]+%/', $search) == 1 && $link != null && $replace == null)
        {
            echo preg_replace('/%[a-zA-Z0-9# ]+%/', '<a href=$link>$1</a>', $subject, 1) . '<br>';
        }
    }

$string = 'bla bla #1 bla bla %bla bla% bla #2 %bla bla #3 bla%';
$newString = replace('/%[a-zA-Z0-9# ]+%/', null, $string, 'www.google.com');
echo $newString;
preg_match('/%[a-zA-Z0-9# ]+%/', $newString)); // 0 = no match 
```

因此，在第二次通话中，我没有得到匹配。希望这可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:09:44.130

看你的电话... 第二个参数不`preg_match`应该...`$subject``$search`

此外，用于`return`实际返回某些东西，而不是`echo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:12:05.413

`%.*%`

这将匹配

1) 一个 %

2) 任意数量的任意字符

3) 一个%

而且由于它会贪婪地匹配而不是懒惰地匹配，它会匹配最广泛的 %...% 它可以，而不是在第一个停止。

例如，它的惰性版本是 %.*?% （把 ? 放在 * 之后使它变得惰性）并且它会在第一个而不是最后一个 % 之后关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:14:12.880

试试这个表达

```
%[a-zA-Z0-9# ]*% 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:11:38.763

`/%.+?%/`应该做的伎俩。
请参阅正则表达式的贪婪。
`[^%]`停在第一个`%`。但是您想包含两个`%`s 之间的所有字符。

# android - Android ORM 数据库

> ID：16191623
> 
> 赞同：0
> 
> 时间：2013-04-24T12:08:07.773
> 
> 标签：android, database, sqlite, orm

我正在对未来应用程序的技术进行一些研究，并对对象数据库感兴趣，并希望了解更多关于 android 平台的技术。

有人可以指出我正确的方向，任何好的方向和利弊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:12:40.713

很高兴看到您正在尝试新事物，也许这个主题将为您提供更多信息：[orm-on-android-sqlite-and-database-scheme](https://stackoverflow.com/questions/2973982/orm-on-android-sqlite-and-database-scheme)

# windows - Windows 商店应用程序认证失败 - 缺少新用户注册服务

> ID：16191626
> 
> 赞同：0
> 
> 时间：2013-04-24T12:08:13.603
> 
> 标签：windows, windows-store-apps, windows-store

*   我们的 Windows 商店应用程序特别适合我们的客户。
*   它需要用户凭据才能登录。
*   它没有任何注册页面。
*   新用户无法访问我们的应用程序（他们应该是我们的客户。）
*   对于新用户，管理员将创建一个帐户并将其共享给用户。
*   第一次，要求用户更改密码。

这就是我们的客户访问我们的应用程序的方式

我们向 windows 商店提交了我们的免费商业应用程序。

但它被拒绝了，理由是“*要求用户登录的应用程序必须在应用程序描述中预先指定用户必须拥有的访问权限类型以及如何获取它，或者**提供一种机制让新用户从“** _* _

我们没有这样的页面。我们如何进行重新提交？

我们是否需要提供诸如“我们的应用程序只能由我们的客户访问”之类的描述

或者

提供支持电子邮件地址并说“联系我们的支持团队/管理员以创建新帐户”

或者

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:39:05.780

描述说明了一切。在应用程序的描述更新中准确包含您所说的内容。此外，在您的应用程序主页上包含此信息，以提高安全性。

请注意 DropBox 是如何做到的。当您安装应用程序时，您的第一个屏幕有登录框和“或创建帐户”的链接，然后将您带到网页以创建帐户。

您可以将此链接到您网站上的页面，该页面允许用户联系您的组织以获得帐户或注册一个然后获得批准等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T12:37:54.423

只需显示一个说明，告诉用户此应用程序仅适用于注册客户。有关更多详细信息，您可以给我们写信给您的电子邮件 ID，或者可以在首页上完整描述登录过程。

# java - 处理不同协议会话类型的设计建议

> ID：16191627
> 
> 赞同：0
> 
> 时间：2013-04-24T12:08:15.360
> 
> 标签：java, .net, spring, oop, architecture

我正在尝试考虑在服务器端处理会话的插件能力和可维护性结构。我确信这个问题在许多地方都向任何服务提供者提出过。

会话可以是不同的协议：HTTP、Webservice、ProtocolX、ProtocolY。

所以基本上每种会话类型都会因它实现的协议而异。

每个会话都将使用它自己的协议与服务器“对话”，但其余逻辑将是相同的（例如，针对 DB 验证客户端......等等）

所以当然我马上想到了会话适配器层和“sessionProtocol 接口”，它们将由每种会话类型实现。

任何人都可以提供和设计建议将所有这些东西放在一起或任何其他建议？（这种情况下的已知设计模式也将受到热烈欢迎）。

谢谢，雷。

# jsf-2 - primefaces 自动完成功能在数据表之外工作正常，但在其中不工作

> ID：16191628
> 
> 赞同：1
> 
> 时间：2013-04-24T12:08:16.257
> 
> 标签：jsf-2, process, autocomplete, primefaces, datatable

我在下面有这个自动完成组件，它在数据表之外工作，但在它里面不起作用

我看不出原因：

```
 <p:dataTable id="table" var="car" editable="true" editMode="cell"
                            widgetVar="carsTable" rowKey="#{car.idarticleFourniseur}"
                            value="#{articlesMB.listarticlefournisseurs}" rows="3">

                            <p:ajax event="cellEdit" listener="#{articlesMB.onCellEdit}"
                                update=":messages" />

                            <p:column headerText="Id">
                                <h:outputText value="#{car.idarticleFourniseur}" />
                            </p:column>

                            <p:column headerText="Nom">
                                <h:outputText value="#{car.libelle}" />
                            </p:column>

                            <p:column headerText="Fournisseur">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{car.fournisseur.personne.nom}" />
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:autoComplete id="dfdd" var="p" itemLabel="#{p.personne.nom}"
                                            itemValue="#{p}" dropdown="true" process="@this"
                                            value="#{articlesMB.selectedFournisseur}"
                                            forceSelection="true" converter="#{fournisseursConverter}"
                                            completeMethod="#{articlesMB.complete}">
                                            <p:column>  
                                                 #{p.personne.nom} - #{p.personne.prenom}  
                                              </p:column>
                                        </p:autoComplete>

                                    </f:facet>
                                </p:cellEditor>
                            </p:column>

                        </p:dataTable>

                        <p:autoComplete id="dfd" var="p" itemLabel="#{p.personne.nom}"
                            itemValue="#{p}" dropdown="true" process="@this"
                            value="#{articlesMB.selectedFournisseur}" forceSelection="true"
                            converter="#{fournisseursConverter}"
                            completeMethod="#{articlesMB.complete}">
                            <p:column>  
                                                 #{p.personne.nom} - #{p.personne.prenom}  
                                              </p:column>
                        </p:autoComplete> 
```

第二个自动完成工作正常，但第一个（在数据表中）不起作用（完成没有出现）

你有什么主意吗

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T07:32:22.193

您可以就地使用而不是 celleditor

```
<p:inplace editor="true" label="#{contactRole.userDto.fullContactData}" emptyLabel="#{msgs['constructionSite.text.contact']}">
                                    <p:autoComplete value="#{contactRole.userDto}" 
                                        id="contact1" completeMethod="#{assignContactBean.completeContacts}"  
                                        var="c" itemLabel="#{c.fullContactData}" itemValue="#{c}"
                                        converter="#{assignContactBean}" forceSelection="true" scrollHeight="200"/>
                            </p:inplace> 
```

# html - Css 转换 IE

> ID：16191630
> 
> 赞同：1
> 
> 时间：2013-04-24T12:08:22.533
> 
> 标签：html, internet-explorer, css

您好，这是一种如何在 IE 中进行这项工作的方法？ [http://www.victorgallo.cz/Cube/index.html](http://www.victorgallo.cz/Cube/index.html)

我正在搜索 IE 转换，但它似乎不受支持..这里有什么不同的方式吗？在其他浏览器中：Firefox、Chrome、Opera 它可以工作。我讨厌 IE！

```
 #cubeSpinner .two {
-webkit-transform: rotateY(90deg) translateZ(300px);
-moz-transform: rotateY(90deg) translateZ(300px);
-o-transform: rotateY(90deg) translateZ(300px);
transform: rotateY(90deg) translateZ(300px);
background-image: url(images/main.jpg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:13:53.570

IE9（带`-ms-`前缀）和不带前缀的 IE10 支持 CSS 转换。[http://caniuse.com/#feat=transforms2d](http://caniuse.com/#feat=transforms2d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:11:56.920

css3 不受支持，即除 IE10 之外。您可以尝试使用 jQuery.animate() [jQuery 文档](http://api.jquery.com/animate/)

# sql-server - 行号获取

> ID：16191634
> 
> 赞同：2
> 
> 时间：2013-04-24T12:08:38.167
> 
> 标签：sql-server, stored-procedures

我的表包含大约 5000 行。我想知道表格中的特定行位置。我的存储过程是：

```
 CREATE PROC Sp_getrownumber(@MemberID INT) 
AS 
    SELECT Row_number() 
             OVER (  ORDER BY joiningdate ASC) AS Rownumber, 
           M.memberid, 
           P.name, 
           M.joiningdate 
    FROM   tblmemberdata M 
           JOIN tblpersonaldetails P 
             ON M.memberid = P.memberid 
```

但是当我尝试 2 获取特定行时，行号显示为 1。代码是：

```
 CREATE PROC Sp_getrownumber(@MemberID INT) 
AS 
    SELECT Row_number() 
             OVER (  ORDER BY joiningdate ASC) AS Rownumber, 
           M.memberid, 
           P.name, 
           M.joiningdate 
    FROM   tblmemberdata M 
           JOIN tblpersonaldetails P 
             ON M.memberid = P.memberid 
    WHERE  M.memberid = @MemberID 
```

如何获取确切的行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:12:09.070

将其修改为：

```
alter proc SP_GetRowNumber
(@MemberID int)
as
SELECT * FROM (
  SELECT
ROW_NUMBER() OVER (ORDER BY JoiningDate ASC) AS Rownumber,
M.MemberID,P.Name,M.JoiningDate
FROM tblMemberData M join tblPersonalDetails P on M.MemberID=P.MemberID
) AS Counts
WHERE MemberID = @MemberID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:14:46.737

您所看到的是因为**仅**`ROW_NUMBER()`适用于本地，而不适用于整个桌子！`SELECT`

 **试试这个：

```
CREATE PROC Sp_getrownumber(@MemberID INT) 
AS
    SELECT *
    FROM (
        SELECT Row_number() 
                 OVER (ORDER BY joiningdate ASC) AS Rownumber, 
               M.memberid, 
               P.name, 
               M.joiningdate 
        FROM   tblmemberdata M 
        JOIN tblpersonaldetails P 
               ON M.memberid = P.memberid
    ) tblRowCounter
    WHERE M.memberid = @MemberID; 
```

*此代码完成的是对保留*原始行号的内存表执行过滤。

**然而！**请注意， SQL**中没有行编号**。SQL 只*知道*有一大堆数据属于一个表。子句`ORDER BY joiningdate ASC`里面的语句**非常重要**！更改该列或添加更多列可能会更改行号。`OVER`

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:14:47.237

```
CREATE PROC Sp_getrownumber(@MemberID INT) 
AS 
    ;WITH Numbered AS (
      SELECT Row_number() 
               OVER (  ORDER BY joiningdate ASC) AS Rownumber, 
             M.memberid, 
             P.name, 
             M.joiningdate 
       FROM   tblmemberdata M 
           JOIN tblpersonaldetails P 
             ON M.memberid = P.memberid 
    )
    SELECT *
    FROM Numbered
    WHERE memberid = @MemberID 
```****

# jquery - 一半的 jQuery 脚本可以工作，其他的不行

> ID：16191637
> 
> 赞同：0
> 
> 时间：2013-04-24T12:08:45.843
> 
> 标签：jquery, magento

在过去的观看日，我一直在努力解决我遇到的这个问题。我有一个页面，您可以将其视为产品查找器：在此处查看：http: [//media-surfer.nl/test/](http://media-surfer.nl/test/)

我想将此页面包含在我经营的芒果商店中：http: [//ongedierteproducten.nl/bieb](http://ongedierteproducten.nl/bieb)

我知道 Magento 使用原型和 scriptaculous，所以我使用了 jQuery.noConflict(); 虽然这启用了拇指功能，但排序菜单仍然不起作用。

如果有人能给我指点，我会欣喜若狂。

亲切的问候，杰森。

magento 页面中的 jQuery：

```
<!-- collapse expand jquery -->
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function(){

        jQuery(".inhoud").hide();
        jQuery(".show_hide").show();

    jQuery(document).on('click','.show_hide', function(event) { 

        jQuery(".inhoud").parent().animate({
            width: '160'
          }, 500, function() {
            // Animation complete.
          });

        var $inhoud = jQuery(this).next(".inhoud");

        if($inhoud.hasClass("active")) 
        {
            jQuery(this).parent().animate({
                width: '160'
              }, 500, function() {
                // Animation complete.
              });
            $inhoud.removeClass("active");
            jQuery("div.inhoud").hide();
        } else {
            jQuery(this).parent().animate({
                width: '769'
              }, 500, function() {
                // Animation complete.
              });

            $inhoud.addClass("active");
            jQuery(this).next("div.inhoud").show();
        }

    });

}); 
```

```
<!-- filter plugin -->
<script charset="utf-8" type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function() {
        var _filterPortfolio = jQuery('#portfolio').filterPortfolio({
            initFilter: '#all', 
            itemUL: '#itemUL',
            filterButtons: [ 
                {'link': '#all', 'dom': 'li'}, 
                {'link': '#kruipt', 'dom': 'li.kruipt'}, 
                {'link': '#vliegt', 'dom': 'li.vliegt'}, 
                {'link': '#staart', 'dom': 'li.staart'} 
            ], 

            orderReverse: true,
            sortOption: {
                adjustHeight: 'auto',
                easeIn: 'fadeIn',
                easeOut: 'fadeOut'
            }
        });         

        jQuery("select#easeInType").change(selChange);  
        jQuery("select#easeOutType").change(selChange);             
        function selChange(){
            var _easeIn = jQuery('select#easeInType').val();
            var _easeOut = jQuery('select#easeOutType').val();              
            _filterPortfolio.updateAnimation(_easeIn, _easeOut);
            jQuery('#selections').hide();
        }

        jQuery('#toggleImg').on('click', function(event){
            jQuery('#selections').toggle();
        })                      

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:25:15.063

您可以将每个 jQuery 代码包装在一个[匿名函数](http://forum.jquery.com/topic/jquery-anonymous-function-calls)中，如下所示：

```
<script type="text/javascript">
;(function($){
    // all jQuery code:
    $(document).ready(function(){
    // your code
    });
})(jQuery); 
```

如果可能，您应该将所有 js 代码放在 .js 文件中，而不是内联。

# php - Facebook 聊天 API：身份验证

> ID：16191639
> 
> 赞同：0
> 
> 时间：2013-04-24T12:08:46.643
> 
> 标签：php, facebook

只是尝试使用 Facebook 聊天 API 开始我的一个小项目，但我已经失败了。这主要是来自 Facebook 开发网站的示例代码。

为什么这不连接？我得到的只是“发生错误”。

```
<?php
// Copyright 2004-present Facebook. All Rights Reserved.

$STREAM_XML = '<stream:stream '.
  'xmlns:stream="http://etherx.jabber.org/streams" '.
  'version="1.0" xmlns="jabber:client" to="chat.facebook.com" '.
  'xml:lang="en" xmlns:xml="http://www.w3.org/XML/1998/namespace">';

$AUTH_XML = '<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" '.
  'mechanism="X-FACEBOOK-PLATFORM"></auth>';

$CLOSE_XML = '</stream:stream>';

$RESOURCE_XML = '<iq type="set" id="3">'.
  '<bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">'.
  '<resource>fb_xmpp_script</resource></bind></iq>';

$SESSION_XML = '<iq type="set" id="4" to="chat.facebook.com">'.
  '<session xmlns="urn:ietf:params:xml:ns:xmpp-session"/></iq>';

$START_TLS = '<starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>';

function open_connection($server) {
  print "[INFO] Opening connection... ";

  $fp = fsockopen($server, 5222, $errno, $errstr);
  if (!$fp) {
    print "$errstr ($errno)<br>";
  } else {
    print "connnection open<br>";
  }

  return $fp;
}

function send_xml($fp, $xml) {
  fwrite($fp, $xml);
}

function recv_xml($fp,  $size=4096) {
  $xml = fread($fp, $size);
  if ($xml === "") {
     return null;
  }

  // parses xml
  $xml_parser = xml_parser_create();
  xml_parse_into_struct($xml_parser, $xml, $val, $index);
  xml_parser_free($xml_parser);

  return array($val, $index);
}

function find_xmpp($fp,  $tag, $value=null, &$ret=null) {
  static $val = null, $index = null;

  do {
    if ($val === null && $index === null) {
      list($val, $index) = recv_xml($fp);
      if ($val === null || $index === null) {
        return false;
      }
    }

    foreach ($index as $tag_key => $tag_array) {
      if ($tag_key === $tag) {
        if ($value === null) {
          if (isset($val[$tag_array[0]]['value'])) {
            $ret = $val[$tag_array[0]]['value'];
          }
          return true;
        }
        foreach ($tag_array as $i => $pos) {
          if ($val[$pos]['tag'] === $tag && isset($val[$pos]['value']) &&
            $val[$pos]['value'] === $value) {
              $ret = $val[$pos]['value'];
              return true;
          }
        }
      }
    }
    $val = $index = null;
  } while (!feof($fp));

  return false;
}

function xmpp_connect($options, $access_token) {
  global $STREAM_XML, $AUTH_XML, $RESOURCE_XML, $SESSION_XML, $CLOSE_XML, $START_TLS;

  $fp = open_connection($options['server']);
  if (!$fp) {
    return false;
  }

  // initiates auth process (using X-FACEBOOK_PLATFORM)
  send_xml($fp,  $STREAM_XML);
  if (!find_xmpp($fp, 'STREAM:STREAM')) {
    return false;
  }
  if (!find_xmpp($fp,  'MECHANISM', 'X-FACEBOOK-PLATFORM')) {
    return false;
  }

  // starting tls - MANDATORY TO USE OAUTH TOKEN!!!!
  send_xml($fp,  $START_TLS);
  if (!find_xmpp($fp, 'PROCEED', null, $proceed)) {
    return false;
  }
  stream_socket_enable_crypto($fp, true, STREAM_CRYPTO_METHOD_TLS_CLIENT);

  send_xml($fp, $STREAM_XML);
  if (!find_xmpp($fp, 'STREAM:STREAM')) {
    return false;
  }
  if (!find_xmpp($fp, 'MECHANISM', 'X-FACEBOOK-PLATFORM')) {
    return false;
  }

  // gets challenge from server and decode it
  send_xml($fp, $AUTH_XML);
  if (!find_xmpp($fp,  'CHALLENGE', null, $challenge)) {
    return false;
  }
  $challenge = base64_decode($challenge);
  $challenge = urldecode($challenge);
  parse_str($challenge, $challenge_array);

  // creates the response array
  $resp_array = array(
    'method' => $challenge_array['method'],
    'nonce' => $challenge_array['nonce'],
    'access_token' => $access_token,
    'api_key' => $options['app_id'],
    'call_id' => 0,
    'v' => '1.0',
  );
  // creates signature
  $response = http_build_query($resp_array);

  // sends the response and waits for success
  $xml = '<response xmlns="urn:ietf:params:xml:ns:xmpp-sasl">'.
    base64_encode($response).'</response>';
  send_xml($fp, $xml);
  if (!find_xmpp($fp, 'SUCCESS')) {
    return false;
  }

  // finishes auth process
  send_xml($fp, $STREAM_XML);
  if (!find_xmpp($fp,'STREAM:STREAM')) {
    return false;
  }
  if (!find_xmpp($fp, 'STREAM:FEATURES')) {
    return false;
  }
 send_xml($fp, $RESOURCE_XML);
  if (!find_xmpp($fp, 'JID')) {
    return false;
  }
  send_xml($fp, $SESSION_XML);
  if (!find_xmpp($fp, 'SESSION')) {
    return false;
  }

  // we made it!
  send_xml($fp, $CLOSE_XML);
  print ("Authentication complete<br>");
  fclose($fp);

  return true;
}

//Gets access_token with xmpp_login permission
function get_access_token($app_id, $app_secret, $my_url){

  $code = $_REQUEST["code"];

  if(empty($code)) {
    $dialog_url = "https://www.facebook.com/dialog/oauth?scope=xmpp_login".
     "&client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url) ;
    echo("<script>top.location.href='" . $dialog_url . "'</script>");
  }
   $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&client_secret=" . $app_secret
    . "&code=" . $code;
   $access_token = file_get_contents($token_url);
    parse_str($access_token, $output);

    return($output['access_token']);
}

function _main() {
  print "Test platform connect for XMPP<br>";
  $app_id='APP ID';
  $app_secret='APP SECRET';
  $my_url = "URL OF THIS PHP FILE";
  $uid = '1496822489';
  $access_token = get_access_token($app_id,$app_secret,$my_url);
  print "access_token: ".$access_token."<br>";

  $options = array(
    'uid' => $uid,
    'app_id' => $app_id,
    'server' => 'chat.facebook.com',
   );

  // prints options used
  print "server: ".$options['server']."<br>";
  print "uid: ".$options['uid']."<br>";
  print "app id: ".$options['app_id']."<br>";

  if (xmpp_connect($options, $access_token)) {
    print "Done<br>";
  } else {
    print "An error ocurred<br>";
  }

}
// first test
function goOnline() {
$message = '<presence />';
send_xml($fp, $message);
}
?>
<!DOCTYPE html>
<html>
<head>
<title>test fb api</title>
</head>
<body>
<?php _main(); ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T14:45:07.953

这似乎对每个人都有效..可能会发生的事情是..当我们将用户 ID 用于 xmpp 时。facebook 要求我们在前面加上 -。例如..如果我的用户 id 是 777，我的 jabber id 将是 -777@chat.facebook.com 另一件事是你可能传递你的应用程序密码而不是应用程序密钥中的 app_id ..你显然有 xmpp_login 权限所以这不应该是一个问题..只是点照顾。我不能说这些是否有帮助..但只是一些建议。

# ios - 如何在IOS中调整UITextField的大小

> ID：16191640
> 
> 赞同：0
> 
> 时间：2013-04-24T12:08:48.527
> 
> 标签：ios, objective-c, xcode

**-**随着文本字段的相应增长，如何增加文本字段的高度**以容纳多行。**

**-**我想要类似**android**`multiple line attribute`的东西。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:10:41.423

`UITextField`不支持多行文本放置`UITextView`在`UITextField`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:11:11.520

查看 UITextView 而不是 UITextField。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:12:27.763

将[HPGrowingTextView for iOS](https://www.cocoacontrols.com/controls/hpgrowingtextview)用于多行文本视图**

# mysql - 在子查询中处理 null

> ID：16191641
> 
> 赞同：3
> 
> 时间：2013-04-24T12:08:48.683
> 
> 标签：mysql, sql, join, null

我有两张桌子。假设一个有操作列表（我工作的原始表有一个发送和接收的消息列表），另一个是用户表，其中包含用户的全名。我已经复制了我现在所拥有的问题。

在操作表（消息表）中找到的用户可能不存在于用户表中。我正在使用子查询来针对操作表的原始查询中的用户名选择用户的全名。当用户表中不存在操作表中的用户时，MySQL 返回*NULL*，这是预期的。但相反，我希望它返回原始用户名。

比如说，`praveen`用户表和操作表中是否都有。所以，我得到这样的东西：`Praveen Kumar likes something.`。说，我有另一个用户名，`bluff`它不存在于 users 表中，并且操作变成了这样：`NULL shares something.`. 在这里而不是*NULL*，是否可以返回用户名本身，例如`bluff shares something.`？

此处提供了我的[SQL Fiddle](http://sqlfiddle.com/#!2/d2bdd/1)、架构详细信息和其他参考资料。让我知道我是否可以以更好的方式做到这一点。谢谢。

**MySQL 5.5.30 模式设置**

```
CREATE TABLE `users`
    (`username` varchar(15), `fullname` varchar(15))
;

INSERT INTO `users`
    (`username`, `fullname`)
VALUES
    ('praveen', 'Praveen Kumar'),
    ('jeff', 'Jeff Atwood')
;

CREATE TABLE `actions`
    (`user` varchar(7), `action` varchar(7))
;

INSERT INTO `actions`
    (`user`, `action`)
VALUES
    ('praveen', 'Like'),
    ('jeff', 'Comment'),
    ('praveen', 'Answer'),
    ('praveen', 'Share'),
    ('jeff', 'Comment'),
    ('bluff', 'Share'),
    ('jeff', 'Like')
; 
```

**询问**

```
SELECT *, (
  SELECT `fullname` FROM `users` WHERE `user` = `username`
) AS `name` FROM `actions` 
```

**[结果](http://sqlfiddle.com/#!2/d2bdd/1/0)**

```
+---------+---------+---------------+
| USER    | ACTION  | NAME          |
+---------+---------+---------------+
| praveen |    Like | Praveen Kumar |
|    jeff | Comment | Jeff Atwood   |
| praveen |  Answer | Praveen Kumar |
| praveen |   Share | Praveen Kumar |
|    jeff | Comment | Jeff Atwood   |
|   bluff |   Share | (null)        |
|    jeff |    Like | Jeff Atwood   |
+---------+---------+---------------+ 
```

**预期产出**

```
+---------+---------+---------------+
| USER    | ACTION  | NAME          |
+---------+---------+---------------+
| praveen |    Like | Praveen Kumar |
|    jeff | Comment | Jeff Atwood   |
| praveen |  Answer | Praveen Kumar |
| praveen |   Share | Praveen Kumar |
|    jeff | Comment | Jeff Atwood   |
|   bluff |   Share | bluff         |
|    jeff |    Like | Jeff Atwood   |
+---------+---------+---------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:14:49.460

你可以像这样使用`LEFT JOIN`with`CASE`语句：

```
SELECT User, Action 
       ,CASE WHEN Fullname IS NULL 
             THEN User 
             ELSE Fullname 
              END as Name
FROM actions a
LEFT JOIN users u
ON a.User = u.username; 
```

输出

```
|    USER |  ACTION |          NAME |
-------------------------------------
| praveen |    Like | Praveen Kumar |
|    jeff | Comment |   Jeff Atwood |
| praveen |  Answer | Praveen Kumar |
| praveen |   Share | Praveen Kumar |
|    jeff | Comment |   Jeff Atwood |
|   bluff |   Share |         bluff |
|    jeff |    Like |   Jeff Atwood | 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/d2bdd/14)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T12:12:52.343

利用`IFNULL`

```
SELECT *, IFNULL((
  SELECT `fullname` FROM `users` WHERE `user` = `username`
),`user`) AS `name` FROM `actions` 
```

[SQLFiddle](http://sqlfiddle.com/#!2/d2bdd/9)

**编辑：**

也`COALESCE`做同样的事情

```
SELECT *, COALESCE((
  SELECT `fullname` FROM `users` WHERE `user` = `username`
),`user`) AS `name` FROM `actions` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-07T05:38:13.573

感谢接受的答案，我在我的生产代码中使用了这个，性能非常好。注意 LIMIT 1 的 mysql 用法（类似于 sql server 的 SELECT TOP 1）。并注意COALESCE和CONCAT的组合用法，即如果郊区为null，则不附加额外的逗号，因为'，' + null = null，然后使用coalesce然后变成空字符串。

```
SELECT 
    COALESCE((SELECT Customer.Name From Customer WHERE Quote.CustomerId = Customer.Id LIMIT 1), '') As CustomerName, 
    Description, 
    (CONCAT(COALESCE(DeliveryStreet, ''), COALESCE(CONCAT(', ', DeliverySuburb), ''), COALESCE(CONCAT(', ', DeliveryCity), ''), COALESCE(CONCAT(', ', DeliveryPostcode), ''))) as DeliveryAddress, 
    COALESCE(DATE_FORMAT(CreatedDate, '%d %b %y'), '') as QuoteCreatedDate, 
    COALESCE((SELECT User.Name FROM QuoteStatusHistory INNER JOIN Status ON Status.Id = QuoteStatusHistory.StatusId INNER JOIN User ON QuoteStatusHistory.UserId = User.Id WHERE QuoteStatusHistory.QuoteId = Quote.Id AND QuoteStatusHistory.StatusId = 1 ORDER BY QuoteStatusHistory.CreatedDate DESC LIMIT 1), '') as CreatedBy, 
    COALESCE((SELECT DATE_FORMAT(QuoteStatusHistory.CreatedDate, '%d %b %y') FROM QuoteStatusHistory WHERE QuoteStatusHistory.QuoteId = Quote.Id AND QuoteStatusHistory.StatusId = 2 ORDER BY QuoteStatusHistory.CreatedDate DESC LIMIT 1), '') as OrderDate, 
    COALESCE((SELECT User.Name FROM QuoteStatusHistory INNER JOIN Status ON Status.Id = QuoteStatusHistory.StatusId INNER JOIN User ON QuoteStatusHistory.UserId = User.Id WHERE QuoteStatusHistory.QuoteId = Quote.Id AND QuoteStatusHistory.StatusId = 2 ORDER BY QuoteStatusHistory.CreatedDate DESC LIMIT 1), '') as OrderedBy, 
    COALESCE((SELECT DATE_FORMAT(QuoteStatusHistory.CreatedDate, '%d %b %y') FROM QuoteStatusHistory WHERE QuoteStatusHistory.QuoteId = Quote.Id AND QuoteStatusHistory.StatusId IN (3, 4) ORDER BY QuoteStatusHistory.CreatedDate DESC LIMIT 1), '') as DispatchDate, 
    QuotePrice,
    COALESCE((SELECT Status.Name FROM QuoteStatusHistory INNER JOIN Status ON Status.Id = QuoteStatusHistory.StatusId WHERE QuoteStatusHistory.QuoteId = Quote.Id ORDER BY QuoteStatusHistory.CreatedDate DESC LIMIT 1), '') as QuoteStatus 
FROM Quote 
```

# .htaccess - 我已经使用 .htaccess 删除了 .php 扩展名，但下一部分将不起作用

> ID：16191646
> 
> 赞同：0
> 
> 时间：2013-04-24T12:08:59.677
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

访问：

```
Options +FollowSymLinks

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [L,QSA] 
```

从 dis line 它将无法正常工作

```
RewriteRule ^blog/([a-zA-Z]+)/$ blog.php?cat=$2 
```

我的网址`http://localhost/Seo/blog.php?cat=SEO`

我想把它转换成`http://localhost/Seo/blog/cat/SEO`

扩展名已删除，但下一个博客部分无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:15:12.597

您的规则中缺少“猫”：

```
RewriteRule ^blog/cat/([a-zA-Z]+)/$ blog.php?cat=$2 
```

由于您的 URL 看起来像*http //localhost/Seo/blog/ **cat** /SEO*

此外，您需要将该规则放在您已有的规则**之前。**

# java - JMeter 负载测试期间出现无法解释的日志记录问题

> ID：16191647
> 
> 赞同：3
> 
> 时间：2013-04-24T12:09:00.423
> 
> 标签：java, log4j, jmeter

我正在使用 JMeter 对媒体服务器进行负载测试。我编写了扩展的自定义采样器`AbstractJavaSamplerClient`。对于我使用 log4j 的日志记录（只使用了一个 rootCategory appender）。

*   当线程组中的线程数相对较少（少于 800）时 - 一切正常。
*   当线程组中的线程数相对较大（大于 1400）时 - 会发生一些无法解释的日志记录问题。

可以考虑两种情况。在第一种情况下`ConsoleAppender`使用，在第二种情况下 - `FileAppender`。

*   在第一种情况下，日志文件突然终止。然而，测试计划成功执行，JMeter 日志（jmeter.log）也正常终止。没有抛出异常。

*   在第二种情况下，日志文件也被突然终止，但其原因是可以理解的：

    ```
    log4j:ERROR Failed to flush writer,java.io.IOException: File too large
        at java.io.FileOutputStream.writeBytes(Native Method)
        at java.io.FileOutputStream.write(FileOutputStream.java:318)
        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
        at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
        at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
        at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
        at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
        at org.apache.log4j.helpers.QuietWriter.flush(QuietWriter.java:59)
        at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:324)
        at org.apache.log4j.WriterAppender.append(WriterAppender.java:162)
        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
        at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
        at org.apache.log4j.Category.callAppenders(Category.java:206)
        at org.apache.log4j.Category.forcedLog(Category.java:391)
        at org.apache.log4j.Category.debug(Category.java:260)
        at com.nsacdn.common.AbstractHTTPDownloader.downloadChunk(Unknown Source)
        at com.nsacdn.common.AbstractHTTPDownloader.downloadAllChunks(Unknown Source)
        at com.nsacdn.hls.HlsDownloader.download(Unknown Source)
        at com.nsacdn.common.DownloadSampler.runTest(Unknown Source)
        at org.apache.jmeter.protocol.java.sampler.JavaSampler.sample(JavaSampler.java:191)
        at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:428)
        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:256)
        at java.lang.Thread.run(Thread.java:722) 
    ```

但是日志文件的大小非常小 - 不到 10 M。硬盘驱动器上有足够的可用空间。我在 Ubuntu 12.04 x64 上运行测试。中的文件大小`/etc/security/limits.conf`没有限制（据我了解，默认情况下，此操作系统中的文件大小没有限制）。

我试图模拟日志记录过程。我编写了一个简单的应用程序，它创建了 2000 个并行线程，这些线程使用相同的 log4j 配置在日志中总共写入了大约 70 M。这个应用程序在目标机器上运行良好。

最后，我将日志文件大小替换`FileAppender`为`RollingFileAppender`并将限制设置为 2 M。在这种情况下，日志记录过程正确执行。

ConsoleAppender 和 FileAppender 的奇怪行为如何解释？
有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T20:40:11.043

我会检查 JMeter 应用程序本身的日志文件。JMeter 具有用于记录信息（来自侦听器）的日志文件，而 JMeter 具有用于记录来自应用程序的信息的文件。在 2.9 版中，可以在以下位置找到

安装目录/bin/jmeter.log

你可能一直在做一些只是抽出错误的事情。

# iphone - 在当前时间目标上增加一毫秒

> ID：16191653
> 
> 赞同：0
> 
> 时间：2013-04-24T12:09:13.763
> 
> 标签：iphone, ios, objective-c, cocoa-touch

有没有办法在目标 c 的当前时间中增加一毫秒。我将从服务器获取时间戳并希望以毫秒重复显示（我不想使用系统时间）。感谢任何帮助。

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:17:39.443

将时间戳读入 NSDate。比使用

```
+ (id)dateWithTimeInterval:(NSTimeInterval)seconds sinceDate:(NSDate *)date 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:23:03.067

您需要使用`NSTimer`该类的对象。一些示例代码：

```
 -(void)startTimer {

        theTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/1000.0 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];

        //the method updateTimer will be called once every millisecond
    }

    -(void)updateTimer {
        //add one millisecond to the global time variable and display it in a label
    }

    -(void)stopTimer {
        [theTimer invalidate];  //pauses the timer
    } 
```

**编辑**

对于使用全局时间变量，`NSDate`可能是正确的类。您可以使用时间间隔初始化对象，例如。现在600秒前：

```
NSDate *globalDateTime = [[NSDate alloc] initWithTimeIntervalSinceNow:-600]; 
```

将时间增加 1 毫秒：

```
globalDateTime = [globalDateTime dateByAddingTimeInterval:1.0/1000.0]; 
```

并在字符串中填充您的全局时间变量：

```
NSDateFormatter *dateFormatter      = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"HH:mm:ss"]; // use yyyy-MM-dd if you need to show the year, month or day
NSString *dateTimeString            = [dateFormatter stringFromDate:globalDateTime]; 
```

NSTimeInterval 类“在 10,000 年的范围内产生亚毫秒精度。”

Refer to apple's [documentation](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html) on NSDate for more details:

# c++ - 从 T 类型的数组初始化 T* 类型的 Stl Vector

> ID：16191662
> 
> 赞同：4
> 
> 时间：2013-04-24T12:09:43.940
> 
> 标签：c++, arrays, vector, c++11, stl

如果我有一个数组，例如：

```
struct S {... };

S m_aArr[256]; 
```

我想用它来构造一个向量，例如：

```
std::vector<S*> m_vecS; 
```

有没有办法做到这一点，而不是循环并推回`&m_aArr[i]`？我知道我不能使用传统的方法在数组上使用`std::begin`和`std::end`，因为向量是指针之一，而原始数组是对象之一，所以我们不能只传入一块内存。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T12:16:15.260

您可以使用标准库进行迭代并为您推回：

```
std::transform(std::begin(m_aArr), std::end(m_aArr),
               std::back_inserter(m_vecS), std::addressof<S>); 
```

`m_aArr`这将通过将[`std::addressof<S>`](http://en.cppreference.com/w/cpp/memory/addressof)函数应用于它们来转换每个元素。然后迭代器将每个转换后的元素`push_back`编入。`m_vecS`[`std::back_inserter`](http://en.cppreference.com/w/cpp/iterator/back_inserter)

要在 C++11 之前执行此操作，您将无法访问`std::begin`、`std::end`或`std::addressof`，因此它看起来更像这样：

```
std::transform(m_aArr, m_aArr + 256, std::back_inserter(m_vecS), boost::addressof<S>); 
```

这使用[`boost::addressof`](http://www.boost.org/doc/libs/1_53_0/libs/utility/utility.htm#addressof).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T12:16:35.673

你可以让[`std::transform`](http://en.cppreference.com/w/cpp/algorithm/transform)执行循环：

```
transform(std::begin(a), std::end(a), std::back_inserter(v), 
          [] (S& s) { return &s; }); 
```

请注意，您不需要完全限定 name `std::transform`，因为函数名称将由[ADL](https://en.wikipedia.org/wiki/Argument-dependent_name_lookup)找到。

这是一个完整的程序来测试它的行为：

```
#include <iostream>
#include <vector>
#include <algorithm> // <== Required for std::transform
#include <iterator>  // <== Required for std::back_inserter, std::begin, std::end

struct S
{
    S() : i(0) { }
    S(int i_) : i(i_) { }
    int i;
};

int main()
{
    S a[256] = { 42 }; // Copy-initializes first element from 42,
                       // default-constructs all other elements

    std::vector<S*> v;
    transform(std::begin(a), std::end(a), std::back_inserter(v), 
              [] (S& s) { return &s; });

    std::cout << v.size() << std::endl; // Prints 256
    std::cout << v[0]->i << std::endl; // Prints 42
    std::cout << v[1]->i << std::endl; // Prints 0
} 
```

这是一个[**活生生的例子**](http://ideone.com/q9oiLO)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:27:43.730

使用[`std::generate_n()`](http://en.cppreference.com/w/cpp/algorithm/generate_n)它执行单个分配`std::vector`而不是潜在的多个 via的解决方案[`std::vector::push_back()`](http://en.cppreference.com/w/cpp/container/vector/push_back)：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>

int main()
{
    struct S {};
    S a[128];
    S* ap = a;

    std::vector<S*> v(sizeof(a)/sizeof(a[0]));
    std::generate_n(std::begin(v), v.size(), [&]() { return ap++; });

    for (size_t i = 0; i < v.size(); i++)
    {
        if (&a[i] != v[i]) // Ensure same address at each element.
        {
            std::cerr << "Error\n";
            break;
        }
    }
    return 0;
} 
```

[在http://ideone.com/73nKST](http://ideone.com/73nKST)在线查看。

# highcharts - 检测点击，并在 Highcharts 的面积图上为 x 轴添加悬停/选定样式？

> ID：16191665
> 
> 赞同：1
> 
> 时间：2013-04-24T12:09:51.357
> 
> 标签：highcharts

示例图表：[http ://www.highcharts.com/demo/area-stacked-percent](http://www.highcharts.com/demo/area-stacked-percent)

1）我可以有一个悬停样式，也许还有一个选定的 x 轴样式，就像在 Highstocks 中一样（将鼠标移到图表上以查看悬停时的垂直线）：[http ://www.highcharts.com/stock /演示/区域](http://www.highcharts.com/stock/demo/area)

2）我可以检测到这一行的点击吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:22:40.897

> 我可以有一个悬停样式，也可以是 x 轴的选定样式，就像在 Highstock 中一样

当然可以。*禁用*for`Hover`系列并*启用*. _`cross hairs`[**`plotOptions`**](http://api.highcharts.com/highcharts#plotOptions)

```
 plotOptions: {
        series: {
            marker: {
                states: {
                    hover: { enabled: true   }
                        }
                  } 
            }
       } 
```

**启用十字准线**

```
tooltip: {
            crosshairs: true
        } 
```

> 我可以检测到对此行的点击吗？

要在单击该行时触发警报，只需添加

```
plotOptions: {
            series: {
                 point: {
                    events: {
                        click: function() {
                            alert ('Clicked on the line');
                        }
                    }
                }
            }
        } 
```

您的两个问题的综合答案，摆弄的版本是[**`here`**](http://jsfiddle.net/gopinaghr/qAL6M/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:23:08.727

1) 是：见 tooltip.crosshairs：[http ://api.highcharts.com/highcharts#tooltip.crosshairs](http://api.highcharts.com/highcharts#tooltip.crosshairs)

2) 我不确定。您可以检测到对系列的点击，这应该会为您提供点击十字准线所需的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:44:04.910

是的，您可以为此使用十字准线

```
tooltip:{
    crosshairs: true,
    shared: true
} 
```

这里 shared true 将在同一工具提示中显示两行的信息

# php - ZF2不同控制器的不同菜单

> ID：16191672
> 
> 赞同：0
> 
> 时间：2013-04-24T12:10:08.737
> 
> 标签：php, zend-framework, menu, navigation, zend-framework2

我对 ZF2 中的菜单有疑问。

例如，我有一个模块和两个控制器。在布局中，我可以渲染菜单：

```
<?php echo $this->navigation()->menu('mainMenu'); ?>
<?php echo $this->navigation()->menu('settingsMenu'); ?> 
```

但我想根据当前控制器分别渲染它们，并且在布局中它必须是这样的：

```
$this->menu; 
```

如何根据控制器将变量“菜单”注册为菜单。我试图在“onBootstrap”方法中做到这一点，但我失败了。

* * *

我是这样做的：

模块.php：

```
public function onBootstrap(MvcEvent $e)
{
    $e->getApplication()->getEventManager()->attach(MvcEvent::EVENT_DISPATCH, array($this, 'headMenuAttach'));
}

public function headMenuAttach(MvcEvent $e)
{
    $controller = $e->getTarget();

    if (method_exists($controller, 'getHeadMenu')) {
        $menu = $controller->getHeadMenu();
        $controller->layout()->setVariable('MainMenu', $menu);
    }
} 
```

布局：

```
$this->navigation()->menu($this->MainMenu); 
```

控制器：

```
public function getHeadMenu()
{
    return 'settingsMenu';
} 
```

ZF2 方式是否正确？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:17:48.693

您必须通过扩展 DefaultNavigationFactory 创建第二个导航对象，正如 Jurian[在此处](https://stackoverflow.com/questions/12972316/how-to-set-up-2-navigations-in-zf2 "Jurians 解释如何设置第二个导航")解释的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:58:11.083

您可以使用共享事件管理器将事件定位到特定命名空间，从而单独定位您的模块。

```
/**
 * On bootstrap event
 * 
 * @param \Zend\Mvc\MvcEvent $e
 */
public function onBootstrap(MvcEvent $e)
{
    // .. other stuff here //

    /**
     * Only in our application namespace
     * Put this part inside Application Modules Module.php
     */
    $e->getApplication()->getEventManager()->getSharedManager()
        ->attach('Application', 'dispatch', function($e) {
        $controller = $e->getTarget();
        $controllerClass = get_class($controller);
        $moduleNamespace = substr($controllerClass, 0, strpos($controllerClass, '\\'));

        // Attach Nav 1 here
        if (method_exists($controller, 'getHeadMenu')) {
            $menu = $controller->getHeadMenu();
            $controller->layout()->setVariable('MainMenu', $menu);
        }

    }, 100);

    /**
     * Only in our MyModule namespace
     * Put this part inside MyModule Modules Module.php
     */
    $e->getApplication()->getEventManager()->getSharedManager()
        ->attach('MyModule', 'dispatch', function($e) {

        // Attach Nav 2 here

    }, 100);
} 
```

您可能希望将每个条目放在它自己的 Modules Module.php 引导方法中，但您明白了。

您只针对模块命名空间中的调度事件，而不是附加到系统范围内的所有调度事件。

# translation - Templavoila 在元素的开头添加链接

> ID：16191676
> 
> 赞同：0
> 
> 时间：2013-04-24T12:10:15.190
> 
> 标签：translation, typo3, typoscript, templavoila

[我的问题与这个问题](https://stackoverflow.com/q/12265957/621765)非常相似，但它无法解决我的问题。在双语页面上，我使用 Templavoila 来处理我的 FCE。为了启用元素的翻译，我在它的 XML 中添加了以下代码：

```
<meta type="array">
    <langChildren type="integer">1</langChildren>
    <langDisable>1</langDisable>
    <langDatabaseOverlay>1</langDatabaseOverlay>
</meta> 
```

在默认语言中一切正常，但之后我复制了一个内容来翻译它。在那里，它`<a id="the content id"></a>`在每个翻译的元素之前添加一个。

完整的字符串看起来像

```
<a id="c1644"></a><div id="c609" ... 
```

where`c1644`是已翻译元素`c609`的 id，是具有默认语言的元素的 id。

有没有办法去掉这个锚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T09:50:44.697

也许在 setup.ts 中：

```
tt_content.stdWrap.prepend > 
```

在这里找到：http: [//www.blog.jpk.in/2011/06/23/how-to-remove-unnecessary-anchor-tags-like-etc/](http://www.blog.jpk.in/2011/06/23/how-to-remove-unnecessary-anchor-tags-like-etc/)

# c++ - 如何将 c/cpp 库的标准输出捕获到 QPlaintextEdit？

> ID：16191678
> 
> 赞同：2
> 
> 时间：2013-04-24T12:10:16.650
> 
> 标签：c++, qt, user-interface, qt4, cross-platform

我有 qt4 GUI 程序，其中包含一些用于 zlib 和 OpenSSL EVP 库的 c 和 c++ 库。程序在 Linux 中运行良好。唯一的问题是所有标准输出都将进入终端。我希望这些库中的所有标准输出到`QPlaintextEdit`. 我读过关于`readyReadStandardOutput()`. 但我不想制作一个子进程。那么伙计们有没有办法在不编辑那些库的情况下将这些输出捕获到 QPlaintextEdit。？当我在 Windows 系统中运行相同的程序时会发生什么？由于 Windows 不允许在 GUI 程序中进行控制台输出。

# html - 创建视图时忽略 SQL Server 2008 列中的 html 标记

> ID：16191685
> 
> 赞同：0
> 
> 时间：2013-04-24T12:10:36.167
> 
> 标签：html, sql-server-2008

我有一个保存电子邮件通信的数据库表。包含主要邮件详细信息的表中的列包含邮件标题和所有关联的邮件标题和邮件正文 HTML 标记以及电子邮件文本。此列中的示例条目可能是：

```
<sender tag details...> 
   <email header details> 
   <more header details> 
   <font: Arial Bold, 14>Hi Joe</font><br> <br>Here are the details requested.<br> <br>Steve. 
```

从这里我只想提取到一个视图中：

```
Hi Joe<br> <br>Here are the details requested.<br> <br>Steve. 
```

即我不想要或不需要标题详细信息或与字体有关的任何内容，但我确实需要文本和间距。

数据库是 SQL Server 2008，列的数据类型是`text`. 我没有修改源表或列的选项，因此它必须是一个视图。

在 VB 中，我会阅读每一行，查找`<>`标签，如果它们之间的值不是`br`，我会简单地忽略并移至该行的下一个元素。想知道如何在 SQL Server 中完成同样的事情？

有什么想法吗？

斯图

# ios - iPhone 应用程序在选择 TableViewCell 时冻结 - 在暂停/中断后间歇性地冻结

> ID：16191686
> 
> 赞同：4
> 
> 时间：2013-04-24T12:10:39.707
> 
> 标签：ios, iphone, tableviewcell

在过去的两周里，我一直在努力解决这个问题 - 在搜索我的代码或堆栈溢出后无法找到解决方案。

问题：

我有一个带有表格视图的视图控制器，带有单元格。大多数时候，当我单击其中一个单元格将我推送到另一个视图控制器时，它工作正常。但是有时当我单击一个单元格时，应用程序会冻结。它不会崩溃 - 只是冻结。然后我通常必须按下主页按钮，再次启动应用程序 - 此时启动需要永远，导致应用程序崩溃。然后我再次启动应用程序，它返回到我的应用程序的第一页。

我发现很难复制 - 在正常启动时使用它工作正常。当我将应用程序置于后台一段时间或设备锁定时，似乎通常会发生这种情况。不完全确定这会如何影响事情，除了内存清理所需的变量。

请注意，我使用 PrettyKit 库，因此我的单元格是 PrettyTableViewCells。

崩溃报告：

```
Incident Identifier: A58F4152-0593-481D-8269-1A8115739349
CrashReporter Key:   2dc2c9f2bdbc6370165a53719bc7610fcbe36ddd
Hardware Model:      iPhone4,1
Process:         Yoga [50409]
Path:            /var/mobile/Applications/DEE2950F-4629-43D4-BA6E-349E4119094F/Yoga.app/Yoga
Identifier:      Yoga
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-04-23 10:41:02.152 +1000
OS Version:      iOS 6.1.3 (10B329)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
Yoga [50409] has active assertions beyond permitted time: 
{(
    <BKProcessAssertion: 0x1f590b90> identifier: Suspending process: Yoga[50409] permittedBackgroundDuration: 10.000000 reason: suspend owner pid:26 preventSuspend  preventThrottleDownCPU  preventThrottleDownUI 
)}

Elapsed total CPU time (seconds): 8.260 (user 8.260, system 0.000), 67% CPU 
Elapsed application CPU time (seconds): 5.953, 49% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   CoreFoundation                  0x313a21fa -[__NSSetM addObject:] + 326
1   Foundation                      0x31dfd1f8 __44-[NSISEngine fixupIntegralizationViolations]_block_invoke_0 + 868
2   Foundation                      0x31dfe9a4 -[NSISEngine withoutOptimizingAtEndRunBlockWithAutomaticOptimizationDisabled:] + 104
3   Foundation                      0x31dfce8a -[NSISEngine fixupIntegralizationViolations] + 90
4   Foundation                      0x31dfe766 -[NSISEngine optimize] + 74
5   Foundation                      0x31dffc4e -[NSISEngine constraintDidChangeSuchThatMarker:shouldBeReplacedByMarkerPlusDelta:] + 82
6   Foundation                      0x31dffcc8 -[NSISEngine tryToChangeConstraintSuchThatMarker:isReplacedByMarkerPlusDelta:undoHandler:] + 56
7   Foundation                      0x31e0564e -[NSLayoutConstraint _tryToChangeContainerGeometryWithUndoHandler:] + 266
8   Foundation                      0x31e059d6 -[NSLayoutConstraint _setSymbolicConstant:constant:] + 382
9   UIKit                           0x3368e14a -[UIView(UIConstraintBasedLayout) _autoresizingConstraints_frameDidChange] + 342
10  UIKit                           0x33253c32 -[UIView(Geometry) setFrame:] + 558
11  UIKit                           0x3329ec4c -[UITableViewCellContentView setFrame:] + 48
12  Foundation                      0x31d03ff2 _NSSetRectValueAndNotify + 106
13  UIKit                           0x332a18cc -[UITableViewCellLayoutManager layoutSubviewsOfCell:] + 2188
14  UIKit                           0x332a0968 -[UITableViewCell layoutSubviews] + 56
15  UIKit                           0x332557fe -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
16  QuartzCore                      0x32fffd86 -[CALayer layoutSublayers] + 210
17  QuartzCore                      0x32fff924 CA::Layer::layout_if_needed(CA::Transaction*) + 456
18  QuartzCore                      0x33000858 CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 12
19  QuartzCore                      0x3300023e CA::Context::commit_transaction(CA::Transaction*) + 234
20  QuartzCore                      0x3300004c CA::Transaction::commit() + 312
21  QuartzCore                      0x32fffeac CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 56
22  CoreFoundation                  0x3141f6ca __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
23  CoreFoundation                  0x3141d9bc __CFRunLoopDoObservers + 272
24  CoreFoundation                  0x3141dd12 __CFRunLoopRun + 738
25  CoreFoundation                  0x31390eb8 CFRunLoopRunSpecific + 352
26  CoreFoundation                  0x31390d44 CFRunLoopRunInMode + 100
27  GraphicsServices                0x34f692e6 GSEventRunModal + 70
28  UIKit                           0x332a62fc UIApplicationMain + 1116
29  Yoga                            0x000af198 0xae000 + 4504
30  libdyld.dylib                   0x395a9b1c start + 0

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x39660648 kevent64 + 24
1   libdispatch.dylib               0x39590974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x39590654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x396700fc __psynch_mutexwait + 24
1   libsystem_c.dylib               0x395b9124 pthread_mutex_lock + 388
2   WebCore                         0x373a6418 _WebTryThreadLock(bool) + 184
3   WebCore                         0x373a634a WebRunLoopLock(__CFRunLoopObserver*, unsigned long, void*) + 42
4   CoreFoundation                  0x3141f6ca __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
5   CoreFoundation                  0x3141d9bc __CFRunLoopDoObservers + 272
6   CoreFoundation                  0x3141dde8 __CFRunLoopRun + 952
7   CoreFoundation                  0x31390eb8 CFRunLoopRunSpecific + 352
8   CoreFoundation                  0x31390d44 CFRunLoopRunInMode + 100
9   WebCore                         0x373a4500 RunWebThread(void*) + 440
10  libsystem_c.dylib               0x395c930e _pthread_start + 306
11  libsystem_c.dylib               0x395c91d4 thread_start + 4

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x3965feb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x39660048 mach_msg + 36
2   CoreFoundation                  0x3141f040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x3141dd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x31390eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x31390d44 CFRunLoopRunInMode + 100
6   Foundation                      0x31cdd3d0 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x31d60e80 __NSThread__main__ + 968
8   libsystem_c.dylib               0x395c930e _pthread_start + 306
9   libsystem_c.dylib               0x395c91d4 thread_start + 4

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib          0x39670594 __select + 20
1   CoreFoundation                  0x314231f2 __CFSocketManager + 674
2   libsystem_c.dylib               0x395c930e _pthread_start + 306
3   libsystem_c.dylib               0x395c91d4 thread_start + 4

Thread 5 name:  JavaScriptCore::BlockFree
Thread 5:
0   libsystem_kernel.dylib          0x3967008c __psynch_cvwait + 24
1   libsystem_c.dylib               0x395c1d2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x395c1aa0 pthread_cond_timedwait + 40
3   JavaScriptCore                  0x3535fc70 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 104
4   JavaScriptCore                  0x35471552 JSC::BlockAllocator::blockFreeingThreadMain() + 78
5   JavaScriptCore                  0x35483fa8 WTF::wtfThreadEntryPoint(void*) + 12
6   libsystem_c.dylib               0x395c930e _pthread_start + 306
7   libsystem_c.dylib               0x395c91d4 thread_start + 4

Thread 6 name:  JavaScriptCore::Marking
Thread 6:
0   libsystem_kernel.dylib          0x3967008c __psynch_cvwait + 24
1   libsystem_c.dylib               0x395c1d2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x395cbf14 pthread_cond_wait + 36
3   JavaScriptCore                  0x35404f3c JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode) + 144
4   JavaScriptCore                  0x35404e7c JSC::MarkStackThreadSharedData::markingThreadMain() + 140
5   JavaScriptCore                  0x35483fa8 WTF::wtfThreadEntryPoint(void*) + 12
6   libsystem_c.dylib               0x395c930e _pthread_start + 306
7   libsystem_c.dylib               0x395c91d4 thread_start + 4

Thread 7 name:  WebCore: CFNetwork Loader
Thread 7:
0   libsystem_kernel.dylib          0x3965feb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x39660048 mach_msg + 36
2   CoreFoundation                  0x3141f040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x3141dd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x31390eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x31390d44 CFRunLoopRunInMode + 100
6   WebCore                         0x3743ed02 WebCore::runLoaderThread(void*) + 138
7   JavaScriptCore                  0x35483fa8 WTF::wtfThreadEntryPoint(void*) + 12
8   libsystem_c.dylib               0x395c930e _pthread_start + 306
9   libsystem_c.dylib               0x395c91d4 thread_start + 4

Unknown thread crashed with unknown flavor: 5, state_count: 1 
```

代码：

我通过日志记录确定代码在冻结之前成功通过了我的 didSelectRowAtIndexPath 和 prepareForSegue 方法。因此我相信这与表格单元格的构造有关吗？还是我没有解决的一些内存问题？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"logPracticeDetails" sender:indexPath];
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *indexPath = sender;

    if ([segue.identifier isEqualToString:@"logPracticeDetails"])
    {
        YLLogPracticeViewController *controller = segue.destinationViewController;
        controller.logPractice = [self.logEntry.logEntryPractices objectAtIndex:indexPath.row];
    }
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T15:06:01.187

对于仍然有类似问题的任何人，我发现原因是我的项目中的**AutoLayout**。

我所要做的只是为我停用自动**布局**`UIViewController`，然后冻结停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T07:58:21.190

```
[self performSegueWithIdentifier:@"logPracticeDetails" sender:indexPath];
[self.tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

说得像

```
[self.tableView deselectRowAtIndexPath:indexPath animated:YES];
[self performSegueWithIdentifier:@"logPracticeDetails" sender:indexPath]; 
```

首先您取消选择，然后转到下一页

# java - Tomcat热部署时如何覆盖war文件？

> ID：16191689
> 
> 赞同：2
> 
> 时间：2013-04-24T12:10:45.767
> 
> 标签：java, apache, tomcat, war

我正在使用 Tomcat 7.0 进行 Web 应用程序部署......现在我仍然使用停止服务器并删除旧的战争文件并粘贴新的战争文件然后启动服务器......现在我听说了热部署服务并愿意为我的网站进行热部署...我在堆栈溢出中搜索了各种问题并根据答案进行了尝试，但它不起作用..我有一个作为**adweb.war**的战争文件并进行了一些更新并产生了相同的**adweb.war**在 WebApps 文件夹中被覆盖...我该怎么做？请以简单的步骤回答，以便我可以轻松理解.. 请不要将此标记为重复，因为我写了这个问题，因为该主题的答案不足，而且有些答案对于像我这样的初学者来说非常难以理解。所以我希望这个问题能帮助像我这样的初学者......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-26T13:30:33.333

使用 Tomcat 7，在不关闭 tomcat 的情况下更新战争的任务变得更加容易。有多种方法可以做到这一点。

我建议您遵循以下任一方法：

1.  使用 Tomcat 管理器 GUI
2.  使用 Tomcat 的 Deploy 任务使用基于 ANT 的部署。

在任何这些情况下，您都需要重命名您的 war 文件，从 adweb.war 到 adweb##.war 和 context.xml（如果需要）并上传到远程/本地 tomcat 设置。

每次你需要升级你的war时，只需在重命名war文件时使用比前一个更高的版本号。

请注意，执行热部署时，上下文路径 /adweb 也应更新为 /adweb##。

成功部署新版本后（在管理器 UI 中显示），您可以停止/取消部署以前的版本。如果没有，tomcat 仍将使用最新版本，所有新请求将被重定向到新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-12T09:41:02.110

我的答案并不完美，但可以作为一种解决方法。当你的 tomcat 运行时，删除现有的 war 文件，然后粘贴你当前的 war 文件，几秒钟后，你可以在控制台上看到你的 war 已经部署。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:09:06.580

不确定此链接是否适合您的要求。但是您将获得有关热部署的一些信息，请查看此[热部署 tomcat](http://tomcat.apache.org/tomcat-5.5-doc/deployer-howto.html#Deploying_on_a_running_Tomcat_server)

# textpad - TextPad：查找所有不以模式开头的行并用退格替换

> ID：16191693
> 
> 赞同：0
> 
> 时间：2013-04-24T12:10:54.237
> 
> 标签：textpad

我想在没有找到特定模式的行的开头引入一个退格字符。请指教。

谢谢，萨加尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:41:30.870

如果您的意思是要“删除第一个字符”，那么您可以这样做：

1）写下你想要找到的正则表达式模式。例如，如果要`Remove me`在行首匹配，请使用：

`^R\(emove me\)`

这里我们使用 ^ 将位置断言到字符串的开头。我们还捕获除了我们希望保留在反向引用中的字符串之外的所有内容，以便以后使用。

2) 用我们在反向引用中抓取的任何内容替换我们找到的匹配项，在这种情况下`emove me`，实际上是*退格*第一个字符。

3）确保检查正则表达式并且光标位于文件的开头，然后点击`Replace All`.

**前**

![前](https://i.stack.imgur.com/bmJs2.png)

**后：**

![在此处输入图像描述](https://i.stack.imgur.com/OKZ3d.png)

# php - 想在php中传递字符串变量中的变量

> ID：16191699
> 
> 赞同：0
> 
> 时间：2013-04-24T12:11:12.253
> 
> 标签：php, arrays, string, variables

我想在字符串中传递变量，以便稍后在脚本中为其分配值。

```
$message="hi $(name) your salary $(salary) is credited in your XYZ account";
foreach($arrmsgvar as $key => $value){  
    $temp=array_search($value[1],$upfileformat);        
    if($temp){
       $replacement='$row['.$temp.']';
       $message=str_replace($value[0],$replacement,$message);   
    }
 } 
```

**我在 $message 中收到字符串“hi $row[1] 您的薪水 $row[2] 已记入您的 XYZ 帐户”**

```
$xdata="";
foreach($Spreadsheet as $key => $row){  
   $xdata.= "`$memid`|`$source`|`$mobile`|`$message`|`0`|`$msgid`||";
}
echo $xdata; 
```

**并得到`1`| `2`| `12345678`| `hi $row[1] your salary $row[2] is credited in your XYZ account`| `0`| `4`||** **,在 $xdata**

如何在 $xdata 最终输出中获得 $row 数组的值？有人会告诉我这样做的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:35:53.483

```
$messages = array();
$message  = "hi %s your salary %d is credited in your %s account";
foreach ($arrmsgvar as $key => $value){  
  $temp = array_search($key, $upfileformat);
  if ($temp !== false) {
    $messages[$key] = sprintf($message, $name, $salary, $account);
  }
}
var_dump($messages); 
```

我不完全确定许多变量来自哪里，但是上面的代码会给你一个关于如何实现的想法，`sprintf`值 `$name`，，可以替换为文本值应该是什么。`$salary``$account`

[http://php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:14:03.627

与其使用您自己的字符串替换，不如使用[sprintf](http://php.net/manual/en/function.sprintf.php)。

# jsf - primefaces 一些组件空白

> ID：16191701
> 
> 赞同：0
> 
> 时间：2013-04-24T12:11:18.293
> 
> 标签：jsf, primefaces

我创建了一个本地网站来导入一串 GPS 坐标。布局是基本的，但主要由 primefaces 组件组成：

*   p:布局
*   p:布局单元
*   p:selectOneList
*   p:g地图
*   p:折线图

经过一些编码后，我注意到 gMap 和 lineChart 不再工作了。起初我认为这是与它相关的空对象的原因（gMap 的 defaultMapModel 和 lineChart 的 CartesianChartModel）。即使创建新对象并将示例数据关联到它，这些组件仍然是空白的。

即使删除 gMap 中的模型属性似乎也不起作用。

以下是我认为重要的代码： **index.xhtml：**

```
<p:layoutUnit position="west" size="255" header="Options" resizable="false" closable="false" collapsible="true">  
    <div class="row-fluid">
        <h4><i class="icon-calendar icon-white"></i>Calendar</h4>
        <p:calendar mode="inline" id="inlineCal"/>
    </div>
    <div class="row-fluid">
        <h4><i class="icon-random icon-white"></i>Tracks</h4>
        <h:form prependId="false">
            <p:selectOneListbox id="basic" style="width: 97%;" value="#{geoTrackController.geoTrack}">  
                <f:selectItems value="#{geoTrackController.allGeoTracks}" itemLabel="#{geoTrackController.geoTrack.id}"  itemValue="#{geoTrackController.geoTrack.id}" />
            </p:selectOneListbox>
        </h:form>
    </div>
</p:layoutUnit>

<p:layoutUnit position="center">
    <p:layout fullPage="false">

        <p:layoutUnit position="south" size="200" header="Speed (km/h)" resizable="false" closable="false" collapsible="true">  
            <p:lineChart id="linear" value="#{geoTrackController.linearModel}" legendPosition="e" zoom="true" minY="0" maxY="130" style="height:140px" widgetVar="chart" />
        </p:layoutUnit>  

        <p:layoutUnit position="center">
            <p:gmap id="geomap" center="50.52, 4.22" zoom="7" type="HYBRID" style="width:100%;height:97%;" model="#{geoTrackController.mapModel}" streetView="true" /> 
        </p:layoutUnit>  

    </p:layout>
</p:layoutUnit> 
```

**控制器**

```
@Named
@SessionScoped
public class GeoTrackController implements Serializable {

    @EJB
    private GeoTrackBean tbean;
    private GeoTrack geoTrack = new GeoTrack();
    private CartesianChartModel linearModel;
    private MapModel map;
    ;
    private String center = "50.8333, 4";
    private String gpsDump;

    @PostConstruct
    public void init() {
        createMapModel();
        createLinearModel();
    }

    public GeoTrackController() {

    }

    public GeoTrack getGeoTrack() {
        return geoTrack;
    }

    public void setGeoTrack(GeoTrack geoTrack) {
        this.geoTrack = geoTrack;
    }

    public void trackChangeEvent(ValueChangeEvent e) {
        createMapModel();
        createLinearModel();
    }

    public List<GeoTrack> getAllGeoTracks() {
        return tbean.getAllGeoTracks();
    }

    public String getGpsDump() {
        return gpsDump;
    }

    public void setGpsDump(String gpsDump) {
        this.gpsDump = gpsDump;
    }

    public String getCenter() {
        return center;
    }

    public void submit() {
        tbean.addOrUpdateGeoTrack(geoTrack);
        createMapModel();
        createLinearModel();
    }

    public MapModel getMapModel() {
        return map;
    }

    public void onPolylineSelect(OverlaySelectEvent event) {
        addMessage(new FacesMessage(FacesMessage.SEVERITY_INFO, "Polyline Selected", null));
    }

    public void addMessage(FacesMessage message) {
        FacesContext.getCurrentInstance().addMessage(null, message);
    }

    public CartesianChartModel getLinearModel() {
        return linearModel;
    }

    private void createMapModel() {
        map = new DefaultMapModel();

        if (this.geoTrack != null) {
            Polyline path = new Polyline();
            LatLng temp = new LatLng(0.00, 0.00);
            for (GeoCoordinate c : this.geoTrack.getCoordinates()) {
                LatLng coord = new LatLng(c.getLatitude(), c.getLongitude());
                if (!temp.equals(coord)) {
                    path.getPaths().add(coord);
                }
            }

            path.setStrokeWeight(4);
            path.setStrokeColor("#FF9900");
            path.setStrokeOpacity(0.7);

            map.addOverlay(path);
        }
    }

    private void createLinearModel() {
        linearModel = new CartesianChartModel();

        LineChartSeries speedChart = new LineChartSeries();
        speedChart.setLabel("Speed");
        if (this.geoTrack != null) {
            for (GeoCoordinate c : this.geoTrack.getCoordinates()) {
                speedChart.set(c.getDateTime().toString(), c.getSpeed());
            }
            linearModel.addSeries(speedChart);
        } else {
            speedChart.set(new Date(), 0);
        }
    }
} 
```

# primefaces - primefaces 3.5 selectonemenu 不显示数据

> ID：16191704
> 
> 赞同：1
> 
> 时间：2013-04-24T12:11:26.020
> 
> 标签：primefaces, selectonemenu

两天以来，我遇到了 PrimeFaces 3.5 selectOneMenu 对象的奇怪问题。我正在一个 EJB 项目中使用这种架构 JPA + EJB + JAX-WS，并且我从 Web 项目中的 JAX-WS 服务创建了一个客户端。然后将 Web 服务客户端封装在一个 ManagedBean 中以与我的 PrimeFaces 接口绑定。我的 ManagedBean 如下：

```
import java.util.List;
import javax.ejb.Stateless;
import javax.inject.Named;
import tg.moov.imereport.service.DownStream;
import tg.moov.imereport.service.DownStreamWSService;

@Named
@Stateless
public class DownStreamMBean {
    private DownStreamWSService service;

    public DownStreamMBean() {
        service = new DownStreamWSService();
    }

    public List<DownStream> getDownStreamsService() {
        return service.getDownStreamWSPort().getDownStreams();
    }

} 
```

selectOneMenu 代码如下：

```
<h:form>
  <p:selectOneMenu value="#{downStreamTotalMBean.ds.IDDownStream}"> 
    <f:selectItems value="#{downStreamMBean.downStreamsService}" var="item"
      itemValue="#{item.IDDownStream}" itemLabel="#{item.nom}"/>                         
  </p:selectOneMenu>
</h:form> 
```

这是 DownStream 类：

```
package tg.moov.imereport.service;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

/**
 * <p>Java class for downStream complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="downStream">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="IDDownStream" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *         &lt;element name="IPAddress" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *         &lt;element name="login" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *         &lt;element name="nom" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *         &lt;element name="password" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *         &lt;element name="path" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "downStream", propOrder = {
    "idDownStream",
    "ipAddress",
    "login",
    "nom",
    "password",
    "path"
})
public class DownStream {

    @XmlElement(name = "IDDownStream")
    protected String idDownStream;
    @XmlElement(name = "IPAddress")
    protected String ipAddress;
    protected String login;
    protected String nom;
    protected String password;
    protected String path;

    /**
     * Gets the value of the idDownStream property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getIDDownStream() {
        return idDownStream;
    }

    /**
     * Sets the value of the idDownStream property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setIDDownStream(String value) {
        this.idDownStream = value;
    }

    /**
     * Gets the value of the ipAddress property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getIPAddress() {
        return ipAddress;
    }

    /**
     * Sets the value of the ipAddress property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setIPAddress(String value) {
        this.ipAddress = value;
    }

    /**
     * Gets the value of the login property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getLogin() {
        return login;
    }

    /**
     * Sets the value of the login property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setLogin(String value) {
        this.login = value;
    }

    /**
     * Gets the value of the nom property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getNom() {
        return nom;
    }

    /**
     * Sets the value of the nom property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setNom(String value) {
        this.nom = value;
    }

    /**
     * Gets the value of the password property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getPassword() {
        return password;
    }

    /**
     * Sets the value of the password property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setPassword(String value) {
        this.password = value;
    }

    /**
     * Gets the value of the path property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getPath() {
        return path;
    }

    /**
     * Sets the value of the path property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setPath(String value) {
        this.path = value;
    }

} 
```

Web 服务正常工作并显示数据，但 selectOneMenu 不显示任何内容。请有人帮助我。如果需要，我可以提供更多信息。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:02:57.943

您需要在 selectOneMenu 上为您的自定义类使用转换器。

请参阅 BalusC 他在此处的解释[对象在 selectonemenu](http://balusc.blogspot.nl/2007/09/objects-in-hselectonemenu.html)

在 primefaces 中，`<p:selectOneMenu>`有一个`converter=""` 属性，您也可以使用它来链接转换器，而不必使用单独添加它`<f:converter>`

# jquery - 如何用另一个 DOM 替换 $(this) 中的 DOM

> ID：16191705
> 
> 赞同：0
> 
> 时间：2013-04-24T12:11:27.380
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我有一个如下的 HTML 内容

```
<div class="form-field">
     <div style="width: auto; display: inline-block; min-width: 108px;" class="form-field-header">
      <div class="form-field-header-caption">facility</div>
      </div>
      <div style="display: inline-block;" class="form-field-body">
      <input class="form-field-required" readonly="" maxlength="20" value="" type="text" data-binding-view-property="Value" data-binding-model-object="inwork" data-binding-model-property="fac">
       <textboxcontrol class="form-field-required" data-binding-view-property="Value" maxlength="20" data-binding-model-object="inwork" data-binding-model-property="fac"></textboxcontrol>
       </div>
  </div> 
```

对于上面的 HTML 内容，我正在编写一个 jQuery 代码来替换插件提供的 DOM 元素。jQuery脚本如下

```
$(window).load(function () {
    $(".form-field").find('textboxcontrol').each(function () {
        var options = {
            "attributeName": 'test',
            "defaultValue": "",
            "isViewonly": 0,
            "isReadOnly": 0,
            "filterAttribute": 0
        };
        field = $.fn.textBoxControl(options);
        $(this).replaceWith(field);
    });
}); 
```

`field`变量将具有类似的数据

```
<input class="textboxControl" maxLength="2147483647" value="" type="text"> 
```

作为一个 DOM（即`field[0].outerHTML`在 firebug DOM 中）

`$(this)`- 将从 HTML 内容中选择标签。上面写的代码正在替换 DOM。请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:36:23.083

提出了用此解决方案替换线路的解决方案。`$(this).replaceWith(field[0].outerHTML)`总之谢谢大家。

# ruby-on-rails - 使用 Carrierwave 上传的时间戳

> ID：16191712
> 
> 赞同：2
> 
> 时间：2013-04-24T12:11:53.163
> 
> 标签：ruby-on-rails, carrierwave

我有一个模型，其中包含几个使用 Carrierwave 存储在 S3 上的 PDF，并希望在视图中显示这些文件的*upload_at*时间戳。

我看不出有任何方法可以在 Carrierwave 中实现这一点。现在我计划在模型中添加一个*Uploaded_timestamp*字段，但我正在寻找一种更优雅的方式来实现这一点。

欢迎提出建议。

# php - 在大量图片中快速搜索骗子

> ID：16191713
> 
> 赞同：0
> 
> 时间：2013-04-24T12:11:54.967
> 
> 标签：php, linux

在我的抓取脚本中，我需要检查每张新抓取的图片是否有重复。我在linux服务器上使用php。有谁知道快速检查的方法。我有大约 200k-300k 的图片，并且欺骗检查需要很多时间。最简单的 MD5 检查已经实现。但是当图片大小不匹配时，我需要找到骗子。谢谢。

# emacs - 将所有议程文件放置在标签栏组 emacs 中

> ID：16191716
> 
> 赞同：1
> 
> 时间：2013-04-24T12:11:57.127
> 
> 标签：emacs, elisp

我正在使用标签栏来定义文件组。一些在“Emacs 缓冲区”组中，其他在“Dired”组中，而所有其他的，ATM，在“用户缓冲区”组中。

我想在使用议程文件时添加另一个组 - 我希望它们出现在一个名为“议程缓冲区”的指定组中，而不是让所有文件都出现在“用户缓冲区”中并乱扔我的选项卡视图”。那怎么可能呢？

目前这是我的配置：

```
(defun tabbar-buffer-groups ()
  "Return the list of group names the current buffer belongs to.
This function is a custom function for tabbar-mode's tabbar-buffer-groups.
This function group all buffers into 3 groups:
Those Dired, those user buffer, and those emacs buffer.
Emacs buffer are those starting with “*”."
  (list
   (cond
    ((string-equal "*" (substring (buffer-name) 0 1)) "Emacs Buffer")
    ((eq major-mode 'dired-mode) "Dired")
    ((eq major-mode 'sr-mode) "Dired")
    (t "User Buffer")
    )))

(setq tabbar-buffer-groups-function 'tabbar-buffer-groups) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:12:05.140

向函数添加条件，如下所示：

```
(defun tabbar-buffer-groups ()
  "Return the list of group names the current buffer belongs to.
This function is a custom function for tabbar-mode's tabbar-buffer-groups.
This function group all buffers into 3 groups:
Those Dired, those user buffer, and those emacs buffer.
Emacs buffer are those starting with “*”."
  (list
   (cond
    ((string-equal "*" (substring (buffer-name) 0 1)) "Emacs Buffer")
    ((member (buffer-file-name) (mapcar 'expand-file-name org-agenda-files)) "Agenda")
    ((eq major-mode 'dired-mode) "Dired")
    ((eq major-mode 'sr-mode) "Dired")
    (t "User Buffer")
    ))) 
```

# git - 如何在 git 中将文件从一个分支合并到另一个分支？

> ID：16191717
> 
> 赞同：0
> 
> 时间：2013-04-24T12:11:58.407
> 
> 标签：git, github

我在我的分叉存储库中使用`MainRepo`.in 的分叉存储库我有一个分支名称`Demo2`。在这个分支中，我有 2 个文件名是`file1`和`file2`。

知道我想将总文件从 合并`Demo2`到`mergeTesting`。为此，我创建了一个新`mergeTesting`分支。为此，我运行了以下命令

```
 I/Github/MainRepo[master]> git branch mergeTesting
 I/Github/MainRepo[master]> git checkout mergeTesting
 I/Github/MainRepo[mergeTesting]> git fetch origin
 I/Github/MainRepo[mergeTesting]> git merge origin/Demo2
 I/Github/MainRepo[mergeTesting]>git push --set-upstream origin mergeTesting 
```

成功，合并完成并推送到我的分叉存储库。

知道我想从`mergeTesting`分支中删除整个文件。为此我运行了以下命令

```
 I/Github/MainRepo[mergeTesting]> git rm 
     I/Github/MainRepo[mergeTesting]> git push origin 
```

成功，删除完成并推送到我的分叉存储库。

知道，在我的`mergeTesting`分支中，他们没有文件。

一段时间后，我想将文件从 . 合并 `Demo2`到`mergeTesting`. 为此，我运行了以下命令。

```
 I/Github/MainRepo[mergeTesting]> git fetch origin
 I/Github/MainRepo[mergeTesting]> git merge origin/Demo2 
```

但是知道，它显示已经是最新的，但是如果我运行以下命令，它不会显示任何文件。

```
 I/Github/MainRepo[mergeTesting]> ls 
```

如何在第二次合并文件。

谁能帮我？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:26:40.767

如果没有看到您执行的命令的*确切*顺序，很难判断您做错了什么。

但是，在我看来，在您开始更改内容之前可能忘记了“git checkout mergeTesting”。或者也许你的“推动”没有做任何事情。

我建议您完全重复之前执行的步骤，并保留确切命令和输出的副本。然后编辑此问题，并将详细信息剪切并粘贴到其中。

# jquery - jquery 为每个具有相似 id 的所有元素

> ID：16191727
> 
> 赞同：14
> 
> 时间：2013-04-24T12:12:24.213
> 
> 标签：jquery, each

我在页面上有很多元素-`ID1, ID2 ID3 ...`

我想操纵所有元素。有没有更简单的方法来做到这一点。

```
$("#ID").each(function(){ ... }); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T12:13:39.467

您可以使用`^`选择器。

**例子**

```
$('div[id^="ID"]') 
```

`^=`选择`ID`属性以`ID`（即 ID1、IDID、IDS、ID2 等）开头的 DOM

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T12:14:18.707

给他们一个班级，这样你就可以按班级选择他们？

```
$('.class').each(function(i,e) { // }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-09T08:31:01.290

```
$('element[id^="ID"]').each(function () {
console.log(this.value);
}); 
```

其中 element 是目标 html 元素的名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-02T20:28:37.523

如果 ID 部分不一定在开头，您可以这样做：

```
$( "[tagName][id*='ID']" ) 
```

这是选择器的完整列表：[https ://api.jquery.com/category/selectors/](https://api.jquery.com/category/selectors/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T12:15:26.973

```
 function(ID)
  {
        ... $("#ID"+ID) ...
  }

  for (i=1;i<3;i++)
  {
       function(i);
  } 
```

# java - JVM optimisation of hashCode() on List

> ID：16191731
> 
> 赞同：1
> 
> 时间：2013-04-24T12:12:34.610
> 
> 标签：java, list, optimization, hash, jvm

Imagine a simple case:

```
class B{
    public final String text;
    public B(String text){
        this.text = text;
    }
}

class A {
    private List<B> bs = new ArrayList<B>;

    public B getB(String text){
        for(B b :bs){
           if(b.text.equals(text)){
               return b;
           }
        }
        return null;
    }

    [getter/setter]
} 
```

Imagine that for each instance of A, the `List<B>` is **large** and we need to call `getB(String)` **often**. However assume that it is also possible for the list to change (add/remove element, or even being reassigned).

At this stage, the average complexity for getB(String) is O(n). In order to improved that I was wondering if we could use some clever caching.

Imagine we cache the `List<B>` in a `Map<String, B>` where the key is `B.text`. That would improve the performance but it won't work if the list is changed (new element or deleted element) or reassigned (`A.bs` points to a new reference).

To go around that I thought that, along with the `Map<String, B>`, we could store a hash of the list `bs`. When we call `getB(String)` method, we compute the hash of the list `bs`. If the hash hasn't changed, we fetch the result from the map, if it has we reload the map.

The problem is that computing the hash for a `java.util.List` goes through all the element of the list and computes their hash, which is at least O(n).

**Question**

What I'd like to know is whether the JVM will be faster at computing the hash for the List than going through my loop in the `getB(String)` method. May be that depends on the implementation of hash for `B`. If so what kind of things could work? In a nutshell, I'd like to know whether this is stupid or could bring some performance improvement.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:34:02.783

Without actually explaining why, you seem for some reason to believe that it is essential to keep the list structure as well. The only reasonable reason for this is that you need the order of the collection to be kept consistent. If you switch to a "plain" map, the order of the values is no longer constant, e.g. kept in the order in which you add the items to the map.

If you need both to keep the order (list behaviour) *and* access individual items using a key, you can use a `LinkedHashMap`, which essentially joins the behaviour of a `LinkedList` and a `HashMap`. Even if `LinkedHashMap.values()` returns a collection and not a list, the list behaviour is guaranteed within the collection.

Another issue with your question is, that you cannot use the list's hash code to safely determine changes. If the hash code has changed, you are indeed sure that the list has changed as well. If two hash codes are identical, you can still not be sure that the lists are actually identical. E.g. if the hash code implementation is based on strings, the hash codes for "1a" and "2B" are identical.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:18:17.100

> If so what kind of things could work?

Simply put: don't let anything else mutate your list without you knowing about it. I suspect you currently have something like:

```
public List<String> getAllBs() {
    return bs;
} 
```

... and a similar setter. If you stop doing that, and instead just have appropriate mutation methods, then you can make sure that your code is the *only* code to mutate the list... which means you can either remember that your map is "dirty" or just mutate the map at the same time that you mutate the list.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:26:00.983

You could implement your own class `IndexedBArrayList` which extends `ArrayList<B>`.

Then you add this functionality to it:

*   A `private HashMap<String, B> index`
*   All mutator methods of ArrayList are overridden to keep this index hash map updated in addition to calling the corresponding super-method.
*   A new `public B getByString(String)` method which uses the hash map

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:20:42.497

From your description it does not seem that you need a `List<B>`.
Replace the `List` with a `HashMap`. If you need to search for `B`s the best data structure is the hashmap and not the list.

# java - 如何在双打中将小数设置为只有 2 位？

> ID：16191734
> 
> 赞同：2
> 
> 时间：2013-04-24T12:12:42.343
> 
> 标签：java, android

在我的回应中，我得到的价值是`80.00000`

```
DecimalFormat df = new DecimalFormat("##.##");
TextField.setText(df.format(Double.parseDouble(custom.getValue()))); 
```

我的问题是我得到 80.000，我正在做一个 parseDouble，它将返回一个原始的 double 类型，我正在对这个 double 进行格式化`2 decimals`。

为什么我得到`80`而不是`80.00`？

我改变了我的方式并尝试了这个。

```
TextField.setText(String.format("%2f",Double.parseDouble(custom.getValue()))); 
```

现在我`80.000000`得到而不是`80.00`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T12:14:54.777

应该`"%.2f"`代替`"%2f"`

```
TextField.setText(String.format("%.2f",Double.parseDouble(custom.getValue()))); 
```

你忘记添加`.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:17:27.843

> 为什么我得到 80 而不是 80.00？

第一个例子应该是：

```
DecimalFormat df = new DecimalFormat("##.00"); 
```

否则，任何非有效小数位数都将被抑制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T12:32:14.763

`java.text.NumberFormat`是一个不错的选择

```
final NumberFormat nf = NumberFormat.getInstance();
nf.setMinimumFractionDigits(2);
nf.setMaximumFractionDigits(2);
nf.setGroupingUsed(false);
System.out.println(nf.format(123456789.123456789)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:18:27.393

在 String.format 参数中更改`%2f`为。`%.2f`

# rule-engine - 为什么不使用规则引擎？或规则引擎的开销

> ID：16191740
> 
> 赞同：3
> 
> 时间：2013-04-24T12:12:54.803
> 
> 标签：rule-engine

我已经阅读了几篇讨论使用规则引擎的用例的帖子。他们中的许多人说您不应该将其用于工作流程管理。

我参考的帖子：

1.  [规则引擎的优缺点](https://stackoverflow.com/questions/250403/rules-engine-pros-and-cons)
2.  [何时不应使用规则引擎](https://stackoverflow.com/questions/775170/when-should-you-not-use-a-rules-engine)
3.  [使用规则引擎的指南](http://www.jessrules.com/guidelines.shtml)

但是我还没有得到任何关于规则引擎在使用时添加到系统的所有开销的简单解释？

如果我将它用于工作流管理怎么办？会不会是内存开销？

有人可以关注一下吗？

我还将介绍我们将使用规则引擎的场景：

我们有一个投标引擎，其输入根据业务分析师的预测经常变化。因此，简单来说，我们将对基于规则提供的一些值采取行动。例如：如果业务分析师将价值设为 2 美元，那么规则引擎将决定要发送给客户的投标价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:46:42.703

简而言之：规则引擎用于做出决策；工作流用于运行流程。

您需要一个 rues 引擎来用“软”逻辑替换已编译代码中的部分或全部“IF”和“ELSE”，无需更改/重新编译主代码即可更改。您向它提供一个规则和一个数据（称为“事实对象”或“源对象”），引擎会根据该规则评估该数据。这是规则引擎的唯一目的。大多数引擎可以将针对您的数据的规则评估的输出作为 True 或 False 返回，或者调用“操作”（代码中的一种方法）来进一步处理您的数据。

您使用工作流程来运行工厂、仓库或军事设施。工作流允许您停止传送带并等待事件发生，或者在老板签署后继续审批流程。等等。通常，工作流在内部使用规则引擎作为其核心的一部分来决定下一步该做什么。

希望这能澄清一点:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:23:30.230

因为没有标准的规则引擎，并且根据您使用的语言和平台，该实施的实施和实施的后果可能会发生很大变化，因此无法直接回答您的问题。不过，我会努力为你投下一点光。

规则引擎所做的是提供一种在您的代码中实现一组条件的方法，或者更重要的是，允许在您的代码之外设置条件并由它解释，以便其他利益相关者可以根据需要更改规则.

您需要查看您正在尝试解决的确切问题，您正在尝试解决的平台，然后决定在这种特定情况下，规则引擎是否是最佳解决方案。链接的问题在这方面提供了一些很好的指导。

请记住，如果您有一个可以通过这种方式解决的问题，或者可以通过另一种方式解决的问题，那么每个解决方案都会有一些开销——有些可能会影响性能，有些会影响开发时间或可维护性。您需要确定您的系统对用户来说什么是重要的，并允许它指导您找到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T20:16:16.450

为了全面披露，我在 InRule Technology 工作，这是一家业务规则管理系统供应商。

在其中一个链接的帖子中提出了一点，即当您使用任何第三方解决方案时，当然会有开销。规则引擎也不例外。然而，关键是通过仔细规划和建模（1）将传递到规则引擎的对象和数据以及（2）规则本身的复杂性来最大化规则引擎的执行效率。

但是，如果您在代码中而不是在规则引擎中执行此操作，则开销没有什么不同。在低端，对象/数据和规则具有中等复杂性，我们将它们归类为短期决策，并且正如预期的那样，开销最小。随着该数据和/或那些规则的复杂性增加，执行时间将增加。但是，就性能而言，我们看到的指标并没有引发危险信号。

# jquery - div上的jQuery悬停不包括图像

> ID：16191746
> 
> 赞同：0
> 
> 时间：2013-04-24T12:13:03.873
> 
> 标签：jquery, hover

我在 div 上放置了一个悬停动画，如下所示：

```
$('#divID').hover(function(){
$('#divID').animate({'margin-top': '-200px'}, 200);
}); 
```

这一切都很好，但是当我将图像放在该 div 中时，我将鼠标悬停在该图像而不是 div 的可用空间上，该函数不会触发，因为该图像是另一个对象。

无论div的内容如何，​​我都希望该函数触发。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:17:09.763

**编辑**

搞定了：行为是正确的，因为您实际上要离开 div。不要将事件应用到孩子身上，[**你很高兴**](http://jsfiddle.net/LFrKN/2/)：

```
$('#google').not($('#google').children()).mouseleave(function(e){
    e.stopPropagation();
    $('#google').stop().animate({'margin-top': '0px'}, 200);
}); 
```

* * *

那么基本上这不应该发生。您可以尝试使用直接`mouseenter`事件而不是`hover`，但悬停确实使用 mouseenter 。对我来说，似乎还有另一个问题。

尝试这样的事情：

```
$('#divID').mouseenter(function(){
    $('#divID').stop().animate({'margin-top': '-200px'}, 200);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T12:50:26.107

而不仅仅是悬停事件，您还应该使用 mouseout 事件。所以现在你的脚本将是：

```
 $('#mostread').hover(function(){
$('#mostread').animate({'margin-top': '-200px'}, 200);

});

 $('#mostread').mouseout(function(){
$('#mostread').animate({'margin-top': '+200px'}, 200);
}); 
```

# c# - C# WindowsForm 将字符串添加到 GridView 中的有界数据

> ID：16191747
> 
> 赞同：1
> 
> 时间：2013-04-24T12:13:07.300
> 
> 标签：c#, gridview, windows-forms-designer

我正在使用从 DataTable 获取数据源的 dataGridView。其中一列名为“productPrice”，gridView 列“Price”与其绑定。“productPrice”数据只包含价格，我想在该列的每一行中添加“$”字符。我该怎么做 ？

- 我没有使用 ASP.NET，所以我可以做 Eval("productPrice")+"$"，我使用的是 WindowsForm。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:26:41.567

您必须使用`DefaultCellStyle.Format = "c"`价格**网格**列。
*（“c”表示货币）*
[检查此链接](https://stackoverflow.com/questions/10715276/currency-format-in-datagridview-in-windows-application)

# c# - 如何将按钮字体设置为 Marlett

> ID：16191751
> 
> 赞同：6
> 
> 时间：2013-04-24T12:13:26.747
> 
> 标签：c#, winforms, button, fonts, truetype

我正在尝试将按钮字体设置为系统的 Marlett 字体。但是，虽然我手动设置了字体，但使用了其他字体。此外，当我使用字体对话框为该按钮选择字体时，没有列出 Marlett。

为什么会这样？如何在 .NET Windows 窗体控件中使用 Marlett 字体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T12:31:04.777

虽然我不知道设计器背后的代码是什么，但我一直发现自定义安装的字体**不会**出现在设计器中。好消息是该`Font`属性是环境属性，因此如果您希望所有控件都具有相同的属性，`Font`您**只需**将其设置为`Form`. 但是，您似乎只想拥有一个控件，`Font`所以让我们这样做：

```
ctrl.Font = new Font("Marlett", 8.5f); 
```

例如，它将将该控件设置`Font`为`Marlett`和大小`8.5`。

如果您希望整套控件具有相同的属性`Font`，**并且可以将它们放置在像 a 这样的容器中`Panel`**，那么您只需`Font`设置`Panel`; 因为再次，它是一个环境属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T12:29:53.997

```
 button1.Font = new Font("Marlett",8, FontStyle.Regular); 
```

将此代码放在您想要更改的按钮名称 Button1 中（在 iinitializecomponet 之后的 constrcutor 或表单 Load 事件中）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-19T08:34:44.980

默认情况下，设计人员似乎希望将 GdiCharSet 设置为 0。这会导致 Marlett 字体回退到另一种字体。

如果将 GdiCharSet 更改为 1，它将正常渲染。

还要注意它在 .designer.cs 中所做的更改，这也将解释为什么当您从代码手动设置字体时它确实有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-30T00:48:10.197

这最终对我有用。

```
ctrl.Font = new System.Drawing.Font("Marlett", 12f, FontStyle.Regular, GraphicsUnit.Point, ((byte)(1))); 
```

最后一个 ((byte)(1)) 将 GdiCharSet 设置为 1，@Paul 在其他答案之一中指出了这一点。

# javascript - 通过使用 javascript 在数组中搜索关键字来选择下拉列表中的值

> ID：16191755
> 
> 赞同：2
> 
> 时间：2013-04-24T12:13:33.237
> 
> 标签：javascript, html, drop-down-menu

```
 HTML PART
 <select id="carlist" name="cars">
 <option value="volvo">Volvo</option>
 <option value="fiat">Fiat</option>
 <option value="audi">Audi</option>
 </select>

 JAVASCRIPT PART
 cars=["volvo","fiat","audi"];
 var best = "fiat";
 for (var i=0;i<cars.length;i++)
 {
 if (cars.value == best.value)
 (
  document.getElementById('carlist').selectedIndex= 2;
  } 
```

下拉的最终结果总是 audi 因为最后一行中的 .selectIndex 为 2。我在最后一行做了哪些更改，以便下拉列表的值根据变量“最佳”更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:18:17.587

```
cars=["volvo","fiat","audi"];
var best = "audi";
for (var i=0;i<cars.length;i++)
{
  if (cars[i] == best)
  {
    document.getElementById('carlist').selectedIndex= i;
  }
} 
```

[JS小提琴](http://jsfiddle.net/SASbr/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:18:13.150

尝试这个

```
 var selectobject=document.getElementById("carlist")
    for (var i=0; i<selectobject.length; i++){
    if(selectobject.options[i].value == best)
         ocument.getElementById('carlist').selectedIndex= i;
    }
    } 
```

在for循环中写这个逻辑

或者

```
cars=["volvo","fiat","audi"];
 var best = "fiat";
 for (var i=0;i<cars.length;i++)
     if (cars[i] == best)
       document.getElementById('carlist').selectedIndex= i; 
```

# c# - 如何将 C# 报表表中的字符串转换为越南货币？

> ID：16191760
> 
> 赞同：1
> 
> 时间：2013-04-24T12:13:42.033
> 
> 标签：c#, report, currency

我有一个 ac# 报告，其中包含一个代表货币的字符串列。

现在我尝试将字符串值转换为货币：

```
= FormatCurrency(Fields!SOTIEN_GUI.Value, 0) 
```

这行得通，但价值现在是美元（例如：7.000 美元）

我该怎么做才能得到像 "₫ 7.000" 这样的结果？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:24:10.040

我假设，您已经创建了 .rdlc 报告文件。要设置当前区域设置，以便以您喜欢的格式显示货币，您应该执行下一步。

首先，您应该找到 Language 报告属性。为此，只需单击报告对象周围的空闲位置。在“属性”窗口中，VS 将显示报告的属性。

其次，找到 Language 属性，并将其更改为您喜欢的那些。顺便说一句，[这里](https://stackoverflow.com/questions/13678506/currency-symbol-is-changed-when-i-moved-to-second-page-in-rdlc-report)有描述。

所以，你会得到这样的东西： ![在此处输入图像描述](https://i.stack.imgur.com/U81xY.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:26:48.240

您可以使用 ToString() 方法，而不是使用 FormatCurrency。
[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)
你可以看看这个线程：[如何将字符串格式化为越南货币？](https://stackoverflow.com/questions/12225182/how-to-format-a-string-as-vietnamese-currency)
如您所见，可以使用 ToString() 方法（或示例中的 string.Format() 方法）：

```
var value = 8012.34m;
var info = System.Globalization.CultureInfo.GetCultureInfo("vi-VN");
Console.WriteLine(String.Format(info, "{0:c}", value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:28:37.497

这是在某些特殊情况下，比如 Excel 还是什么？在常规 C# 中，我认为你想要做的是使用类似的东西：

```
moneyValue.ToString("C", new CultureInfo("vi-VN")); 
```

# django - 文件分块上传：避免保存两次

> ID：16191764
> 
> 赞同：1
> 
> 时间：2013-04-24T12:13:49.830
> 
> 标签：django, file-upload, django-models, django-forms, django-views

我使用自定义函数上传文件，将其拆分为块，如此[处](https://docs.djangoproject.com/en/1.5/topics/http/file-uploads/#handling-uploaded-files)所述。我的问题是在上传我的文件两次`save()`后调用`handle_uploaded_file()`，一次进入“MEDIA_URL/my_path”目录，一次进入“MEDIA_URL”。但我只想上传一个，一个有块的。可以强制`save()`进行“分块”上传吗？还是我应该使用不同的方法？谢谢你。

*   模型.py

    ```
    class ShapeFile(models.Model):
        name = models.CharField(max_length=100)
        srid = models.ForeignKey(SpatialRefSys)
        user = models.ForeignKey(User)
        color_table = models.ForeignKey(ColorTable)
        file = models.FileField(upload_to="my_path")
        class Meta:
            unique_together = ('name', 'user') 
    ```

*   表格.py

    ```
    class UploadForm(ModelForm):
        class Meta:
            model = ShapeFile
            fields = ('name','user','srid','file','color_table')
            widgets = {'srid': TextInput(),
                       'user': HiddenInput() 
    ```

*   视图.py

    ```
    def handle_uploaded_file(fileName, filePath):
        with open(filePath, 'wb+') as destination:
            for chunk in fileName.chunks():
                destination.write(chunk)

    @login_required
    def shapeIng(request):
        if request.method == 'POST':
            form = UploadForm(request.POST, request.FILES)
            if form.is_valid():
                req = request.POST

                # Split uploaded file into chunks
                fileName = request.FILES['file']
                filePath = ShapeFile(file=fileName).file.path
                handle_uploaded_file(fileName, filePath)

                form.save()

                messages.success(request, 'Shapefile upload succesful!')
                return redirect('shapeCreated')
            else:
                messages.error(request, 'Something went wrong uploading Shapefile.')
        else: # request.method == 'GET'
            form = UploadForm(initial={'user': request.user})
        return render_to_response('my_app/base_shapeIngestion.html',
                                  {'form': form},
                                  context_instance=RequestContext(request)) 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:15:38.520

将您的视图功能更改为：

```
def testupload2(request):
    if request.method == 'POST':
        file_name=request.FILES['file']
    form = SomeForm(request.POST, request.FILES)
    if form.is_valid():
        dest_file = open('C:/prototype/upload/'+ str(file_name), 'wb+')
        path = 'C:/prototype/upload/'+ str(file_name)
        for chunk in  request.FILES['file'].chunks():
            dest_file.write(chunk)
        dest_file.close()

    t = get_template("testupload2.html")

    lst = os.listdir('C:/downloads/prototype/prototype/upload/')

    html = t.render(Context({'MEDIA_URL':'http://127.0.0.1:8000/site_media/'}))
    return HttpResponse(html) 
```

# automation - Jenkins/Hudson 构建计划周期跨越午夜（晚上 9 点到凌晨 2 点）

> ID：16191774
> 
> 赞同：3
> 
> 时间：2013-04-24T12:14:11.553
> 
> 标签：automation, jenkins, continuous-integration, hudson, cronexpression

我想在 Jenkins 中安排一份工作，在晚上 18 点到凌晨 2 点之间的某个时间运行。

**所以我在定期生成/计划字段**中输入了以下公式：

 **`H H(18-2) * * *`

但是，当我保存作业时，有一个例外：

```
javax.servlet.ServletException: java.lang.IllegalArgumentException: n must be positive
at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:719)
at org.kohsuke.stapler.Stapler.invoke(Stapler.java:770)
(...)
Caused by: java.lang.IllegalArgumentException: n must be positive
at java.util.Random.nextInt(Unknown Source)
at hudson.scheduler.Hash$1.next(Hash.java:72)
at hudson.scheduler.BaseParser.doHash(BaseParser.java:100)
at hudson.scheduler.CrontabParser.term(CrontabParser.java:328)
at hudson.scheduler.CrontabParser.expr(CrontabParser.java:180)
at hudson.scheduler.CrontabParser.startRule(CrontabParser.java:60)
... 60 more 
```

我输入时出于测试目的：

`H H(0-2) * * *`它工作正常。

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-23T21:01:36.403

目前这似乎是不可能的，看看这个错误：

[https://issues.jenkins-ci.org/browse/JENKINS-18313](https://issues.jenkins-ci.org/browse/JENKINS-18313)

我的第一个答案包括这个建议的解决方法，它不起作用：

```
H H(18-23,0-2) * * * 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-02T09:25:42.113

我遇到了同样的问题，非常令人沮丧，一个建议是 2 个时间表，我已经测试过这种方法并且它有效。

```
H H(18-23) * * *
H H(0-1) * * * 
```

请注意，如果您指定 0-1，即从午夜到凌晨 1.59

希望这可以帮助

诺埃尔/**

# actionscript-3 - 将模型传递给阶段实例的视图构造函数

> ID：16191776
> 
> 赞同：0
> 
> 时间：2013-04-24T12:14:13.547
> 
> 标签：actionscript-3, flash, model-view-controller, flash-cs5

我正在寻找一种优雅的解决方案来为作为舞台实例的 View 设置 Model 参数。

我的 View 构造函数如下所示：

```
public function View($model:Model, $controller:IController=null){ ... } 
```

我的子类构造函数：

```
public function ViewSubClass($model:Model, $controller:IController=null){ ... } 
```

这个想法是，子类将是一个 UI 元素，我宁愿只在舞台上使用它，而不必手动定位它。我已经放弃了删除占位符元素并使用它们的位置来附加真正的 UI 元素的可能性，但这对我来说似乎有点生硬。

我想我总是可以将 View 中 $model 参数的默认值设置为 null，但并非所有视图都是舞台实例，所以我也不完全想这样做。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:50:26.210

Flash 无法填充构造函数参数。这就是为什么我[总是建议](https://stackoverflow.com/a/15628239/854556)避免 View 的构造函数参数。如果这是你自己的班级，我建议继续修复父班级，这样它就不需要这个了。

如果不是，您可以使用

```
公共函数 VewSubClass() {
   超级（空，空）；
}
```

我会担心你实际上*需要*模型和控制器，所以我会让 setter 在 View 子类上可用，然后在[实例到达 stage 时](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)填充这些变量。

```
公共函数集模型（值：模型）：无效{
    _model = 价值；
    //根据接收到的模型做超级构造函数所做的任何事情
}
公共函数集控制器（值：IController）：无效{
   _控制器=值；
   //ETC。
}

```

请注意，视图可能不需要了解控制器，我也不建议将*整个*模型提供给视图——只是它需要的几个属性。因此，如果班级*是*您的，那么您将处于更好的位置来纠正这些（IMO）架构问题。

根据您提供的签名，我不会惊讶*地*发现模型和控制器内部存储是私有的，而不是受保护的，这意味着无论如何您都面临着重写（假设模型和视图上需要控制器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:20:59.683

我通过将 ViewSubClass 构造函数更改为：

```
public function ViewSubClass ($model:Model=null, $controller:IController=null){ ... } 
```

不知道为什么我认为构造函数必须完美匹配超类的构造函数。如果有的话，我仍然愿意接受更优雅的解决方案。感谢您的关注。

-Veo

# php - 检索目录 PHP 中多个文件的内容

> ID：16191779
> 
> 赞同：0
> 
> 时间：2013-04-24T12:14:19.760
> 
> 标签：php, directory, file-get-contents

我需要在一个目录中获取多个文件的内容，但这是最好的方法吗？

我在用

```
$data = file_get_contents('./files/myfile.txt'); 
```

但我想要每个文件，而不必像上面那样单独指定文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:20:49.443

您可以 dir 目录并循环访问它以获取所有文件的内容。

```
 <?php
    $path = './files';
    $d = dir($path);
    $contents = '';
    while (false !== ($entry = $d->read())) {
       if (!($entry == '..' || $entry == '.')) {
           $contents .= file_get_contents($path.'/'.$entry);
       }
    }
    $d->close();
    ?> 
```

如果您只想要 .txt 文件，您可以更改上面代码的 if 语句：

```
 if (!($entry == '..' || $entry == '.')) { 
```

至：

```
 if (substr($entry, -4) == '.txt') { 
```

这将产生一个变量 $contents ，它是字符串类型，并且包含 ./files 目录中的所有文件（或者只有 txt 文件，如果您选择第二种解决方案）的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:18:13.800

```
/** 
* Change the path to your folder. 
* This must be the full path from the root of your 
* web space. If you're not sure what it is, ask your host. 
* 
* Name this file index.php and place in the directory. 
*/ 
    // Define the full path to your folder from root 
    $path = "/home/content/s/h/a/shaileshr21/html/download"; 

    // Open the folder 
    $dir_handle = @opendir($path) or die("Unable to open $path"); 

    // Loop through the files 
    while ($file = readdir($dir_handle)) { 

        $data = file_get_contents('$filet'); 

    } 
    // Close 
    closedir($dir_handle); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T12:28:17.243

您可以使用`glob`来获取特定的文件扩展名并`file_get_contents`获取内容

```
$content = implode(array_map(function ($v) {
    return file_get_contents($v);
}, glob(__DIR__ . "/files/*.txt"))); 
```

# javascript - 将 Ajax 响应用作数组

> ID：16191787
> 
> 赞同：0
> 
> 时间：2013-04-24T12:14:43.323
> 
> 标签：javascript, arrays, jquery

我正在使用 javascript 库 caled JSCharts 来生成折线图、条形图等。一切正常，我可以提供一个工作示例：

```
var myData = new Array(['2013-01-24', 117], ['2013-01-25', 91], ['2013-01-26', 90], ['2013-01-27', 128], ['2013-01-28', 168], ['2013-01-29', 169], ['2013-01-30', 146], ['2013-01-31', 48], ['2013-02-01', 66], ['2013-02-02', 48], ['2013-02-03', 90], ['2013-02-04', 138], ['2013-02-05', 77], ['2013-02-06', 55], ['2013-02-07', 79], ['2013-02-08', 63], ['2013-02-09', 35], ['2013-02-10', 63], ['2013-02-11', 90], ['2013-02-12', 80], ['2013-02-13', 48], ['2013-02-14', 62], ['2013-02-15', 71], ['2013-02-16', 52], ['2013-02-17', 95], ['2013-02-18', 69], ['2013-02-19', 94], ['2013-02-20', 119], ['2013-02-21', 725], ['2013-02-22', 1348], ['2013-02-23', 1244], ['2013-02-24', 607], ['2013-02-25', 585], ['2013-02-26', 941], ['2013-02-27', 1466], ['2013-02-28', 1015], ['2013-03-01', 1626], ['2013-03-02', 965], ['2013-03-03', 875], ['2013-03-04', 841], ['2013-03-05', 969], ['2013-03-06', 710], ['2013-03-07', 566], ['2013-03-08', 660], ['2013-03-09', 622], ['2013-03-10', 651], ['2013-03-11', 679], ['2013-03-12', 812], ['2013-03-13', 754], ['2013-03-14', 669], ['2013-03-15', 661], ['2013-03-16', 328], ['2013-03-17', 529], ['2013-03-18', 552], ['2013-03-19', 647], ['2013-03-20', 462], ['2013-03-21', 452], ['2013-03-22', 157], ['2013-03-23', 188], ['2013-03-24', 103], ['2013-03-25', 152], ['2013-03-26', 155], ['2013-03-27', 165], ['2013-03-28', 952], ['2013-03-29', 1135], ['2013-03-30', 915], ['2013-03-31', 996], ['2013-04-01', 400], ['2013-04-02', 204], ['2013-04-03', 145], ['2013-04-04', 164], ['2013-04-05', 1248], ['2013-04-06', 517], ['2013-04-07', 300], ['2013-04-08', 494], ['2013-04-09', 248], ['2013-04-10', 220], ['2013-04-11', 245], ['2013-04-12', 152], ['2013-04-13', 109], ['2013-04-14', 293], ['2013-04-15', 207], ['2013-04-16', 120], ['2013-04-17', 528], ['2013-04-18', 266], ['2013-04-19', 286], ['2013-04-20', 313], ['2013-04-21', 162], ['2013-04-22', 310]);
console.log("myData: " + Object.prototype.toString.call(myData));
var myChart = new JSChart('116376655202954_3months_page_views_chartcontainer', 'line');
myChart.setDataArray(myData);
myChart.setSize(960, 320);
myChart.setAxisNameX('');
myChart.setAxisValuesColorX('#FFFFFF');
myChart.setAxisNameY('');
myChart.setTitle('Page Views in the last 3 months');
Chart.draw(); 
```

我的问题是，现在我向一个 php 文件发出 Ajax GET 请求，该文件向我发送以下响应：

```
['2013-02-24', 10], ['2013-02-25', 17], ['2013-02-26', 23], ['2013-02-27', 13], ['2013-02-28', 11], ['2013-03-01', 12], ['2013-03-02', 6], ['2013-03-03', 20], ['2013-03-04', 21], ['2013-03-05', 18], ['2013-03-06', 12], ['2013-03-07', 17], ['2013-03-08', 10], ['2013-03-09', 7], ['2013-03-10', 6], ['2013-03-11', 13], ['2013-03-12', 24], ['2013-03-13', 20], ['2013-03-14', 15], ['2013-03-15', 12], ['2013-03-16', 4], ['2013-03-17', 21], ['2013-03-18', 18], ['2013-03-19', 21], ['2013-03-20', 10], ['2013-03-21', 4], ['2013-03-22', 2], ['2013-03-23', 9], ['2013-03-24', 7], ['2013-03-25', 13], ['2013-03-26', 2], ['2013-03-27', 9], ['2013-03-28', 15], ['2013-03-29', 14], ['2013-03-30', 29], ['2013-03-31', 19], ['2013-04-01', 6], ['2013-04-02', 4], ['2013-04-03', 7], ['2013-04-04', 5], ['2013-04-05', 56], ['2013-04-06', 3], ['2013-04-07', 2], ['2013-04-08', 11], ['2013-04-09', 4], ['2013-04-10', 7], ['2013-04-11', 1], ['2013-04-12', 6], ['2013-04-13', 2], ['2013-04-14', 2], ['2013-04-15', 6], ['2013-04-16', 3], ['2013-04-17', 13], ['2013-04-18', 5], ['2013-04-19', 7], ['2013-04-20', 4], ['2013-04-21', 4], ['2013-04-22', 8] 
```

这是我的 GET 请求代码：

```
function submitForm(t) {
    var page_id = String("#" + $(t).attr('id'));
    $.ajax({type:'GET', url: 'charts.php', data:$(page_id).serialize(), success:
        function(response) {
            document.getElementById('<?php echo $account['id']; ?>_fan_removes').style.display = "block";
            console.log(response);
            var myFanRemovesData = new Array(response);
            console.log(myFanRemovesData);
            var myChart = new JSChart('116376655202954_fan_removes', 'line');
            myChart.setDataArray(myFanRemovesData);
            myChart.setSize(960, 320);
            myChart.setAxisNameX('');
            myChart.setAxisValuesColorX('#FFFFFF');
            myChart.setAxisNameY('');
            myChart.setTitle('Page Fan Removes in the last 2 months');
            myChart.draw();
        }});
    return false;
}; 
```

我知道响应是一个字符串，我希望它像在工作示例中一样放置，但我无法让它正常工作。`myData`and是 [object Array] 但如果我在`myFanRemovesData`两者上都使用 console.log 我会收到以下信息：对于`myData`：

```
[Array[2], Array[2], Array[2], Array[2], Array[2], Array[2], Array[2], Array[2], ... ] 
```

这是一个数组数组和 for `myFanRemovesData`：

```
["['2013-02-24', 10], ['2013-02-25', 17], ['2013-02-…-04-20', 4], ['2013-04-21', 4], ... "] 
```

我试图将响应转换为数组，但没有明显的成功。我不知道下一步该做什么，所以任何建议和指导都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:20:21.260

您的 php 文件正在返回一个字符串。在 Jquery 中解析之前，您需要将其转换为 JSON。

有关更多信息，请查看本教程：[http ://www.islandsmooth.com/2010/04/send-and-receive-json-data-using-ajax-jquery-and-php/](http://www.islandsmooth.com/2010/04/send-and-receive-json-data-using-ajax-jquery-and-php/)

# android - Android中正确的活动切换？如何？

> ID：16191798
> 
> 赞同：0
> 
> 时间：2013-04-24T12:14:59.610
> 
> 标签：android, android-activity

我在 Eclipse 中有默认的 Android 项目布局。当前的版本带有“dummyText”和顶部的切换器。（我在向导期间选择了那个。）

我想使用顶部选择栏来切换屏幕。在主要、设置和结果之间。
如何检测当前活动？

因为..如果我有一个开关，比如：

```
switch (getArguments().getInt(ARG_SECTION_NUMBER)) { ... } 
```

如果当前屏幕是顶部选定的屏幕，它将进入无限循环。
（例如：值 1 = 主屏幕。你打开应用程序，它的值是 1。它在主屏幕上。它会一次又一次地无限期地打开主屏幕。如果你选择其他值，比如 2，它会转到正确的屏幕，它不会循环。）

我该如何解决这个问题？
（我正在用一个新的 Intent 打开另一个 Activity，然后我调用`startActivityForResult(...)`.

**更新 #1：**
开关进入“DummySectionFragment”，它在`onNavigationItemSelected`.

看起来像这样：

```
Fragment fragment = new DummySectionFragment();
    Bundle args = new Bundle();
    args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
    fragment.setArguments(args);
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.container, fragment).commit(); 
```

所以基本上这看起来是正确的......对我来说。开关被激活，相应的值被发送到 Dummy，并且开关可以正常工作以启动正确的 Activity。我只需要编写一个 if 语句，如果当前 Activity 与“待调用”匹配，则应用程序什么也不做。

我应该如何实现这个？
（我知道代码有点乱，怪罪谷歌它的样本。）

**如果你不熟悉我使用的谷歌示例/代码，这里是**：
[https ://gist.github.com/anonymous/4edaefa42dd1be96e6e4](https://gist.github.com/anonymous/4edaefa42dd1be96e6e4)

这是“空白活动”->“下拉”之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:51:28.710

我认为您没有按预期使用示例。一种方法是将开关放在 中，并在其中根据所选项目`onNavigationItemSelected`启动正确的片段（而不是）。`DummySectionFragment`

所以这个示例是建立在 Fragments 之上的，你应该将它们用于不同的部分，而不是启动一个新的 Activity。

另一种方法是`DummySectionFragment`使用`ARG_SECTION_NUMBER`来决定要膨胀的布局，并为不同的部分膨胀不同的布局。在任何情况下，每个部分启动一个新活动都不是这个示例应该工作的方式。

编辑：这里是使用片段的好指南：

[http://developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# javascript - 如果页面上出现按钮，则自动单击它

> ID：16191804
> 
> 赞同：0
> 
> 时间：2013-04-24T12:15:13.333
> 
> 标签：javascript, greasekit

```
<a href="javascript:void(0)" class="PrmryBtnMed"
 id = "VERYLONGTEXT"

onclick="$(this).parents('form').submit(); return false;"><span>Dispatch to this address</span></a> 
```

如果我要给人类下达指令，我会说：

1.  寻找`<span>Dispatch to this address</span>`链接；如果出现点击它。（如果有多个这样的链接（例如有两个），只需单击第一个（或其中任何一个）

我正在使用 Greasekit，所以我希望使用 JavaScript 来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:45:20.847

**更新：**现在检查元素的内容

```
var el = document.querySelector(".PrmryBtnMed"); //should only return first one
if (el && (el.textContent.trim() == 'Dispatch to this address')) {
  el.click();
} 
```

查看[querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)和[textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)了解更多信息

我还为您添加了一个 JsFiddle：http: [//jsfiddle.net/NrGVq/1/](http://jsfiddle.net/NrGVq/1/)

* * *

另一种方法是搜索整个页面，以防它不在匹配的元素内

```
var inPage = document.documentElement.innerHTML.indexOf('text to search') > 0,
    el = document.querySelector(".PrmryBtnMed");

if (inPage && el) el.click(); 
```

# php - 企业应用程序中没有推送通知

> ID：16191807
> 
> 赞同：0
> 
> 时间：2013-04-24T12:15:33.273
> 
> 标签：php, iphone, ios, push-notification

我为 iPad 开发了一个简单的应用程序，其中包含推送通知作为一项功能。

我创建了它的应用程序 ID 并启用了推送通知并下载了用于开发和分发的证书。

我也为两者创建了**.pem文件。**

在使用开发配置文件时，一切正常，推送通知工作完美。

但是当我开始使用分发配置文件进行检查时，推送通知没有出现。

我还更改了 php 文件并从中删除了沙箱。我检查了所有内容，但似乎找不到丢失的内容。

我们是否需要为企业应用程序做任何专有的事情以在其中启用推送通知？

提前致谢。

此致

# javascript - 单击时更改 JavaScript 按钮样式

> ID：16191808
> 
> 赞同：4
> 
> 时间：2013-04-24T12:15:34.993
> 
> 标签：javascript, button, background

我已经将这段 JavaScript 放在一起，但由于我是新手，我正在努力处理代码。我想要做的是当一个按钮被点击它会改变背景颜色的不透明度。下面的代码执行此操作，但现在我希望再次单击该按钮时将其恢复为正常状态。

我怎样才能做到这一点？谢谢..

> 正常状态：background="rgba(255,0,0,0.8)"; 按下状态： background="rgba(255,0,0,0.6)";

```
function highlight(id) {
document.getElementById(id).style.background="rgba(255,0,0,0.6)";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T12:23:35.730

我会使用一个 CSS 类：

```
.opacityClicked{
  background:rgba(255,0,0,0.8);
}
.opacityDefault{
  background:rgba(255,0,0,0.6);
} 
```

并将您的功能更改为：

```
function highlight(id) {
    var element = document.getElementById(id);
    element.class = (element.class == "opacityClicked") ? "opacityDefault" : "opacityClicked";
} 
```

或者，如果您只想使用 JavaScript

```
var isClicked = false;
function highlight(id) {
    isClicked = !isClicked;
    var element = document.getElementById(id);
    element.style.background = (isClicked  == true) ? "rgba(255,0,0,0.6)" : "rgba(255,0,0,0.8)";
} 
```

**更新（*见评论：如果你使用 2 个按钮*）：**

```
var buttonClicked = null;
function highlight(id) {
    if(buttonClicked != null)
    {
        buttonClicked.style.background = "rgba(255,0,0,0.8)";
    }

    buttonClicked  = document.getElementById(id);
    buttonClicked.style.background =  "rgba(255,0,0,0.6)";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:41:27.410

你可以像这样快速地做一些事情：

首先，向您的页面添加一个隐藏的输入元素，如下所示：

```
<input type="button" id="foobar" value="FooBar!" onclick="highlight('foobar')" style="background-color:rgba(255,0,0,0.8);" />

<input type="hidden" id="one_neg_one" value="1" />  <= hidden element 
```

接下来，把它放在你的 highlight 函数中：

```
function highlight(id) {
    var a = 7;
    var o = document.getElementById("one_neg_one");
    var newa = (a + (parseInt(o.value) * -1)) * 0.1;
    document.getElementById(id).style.background="rgba(255,0,0," + newa + ")";
    o.value = o.value * -1;
} 
```

这应该可行，尽管我同意之前的回答，即您应该为此使用 css 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-16T11:27:52.853

@Ruben-J 回答很好。虽然存在语法错误 - 您应该改用**element.className**而不是 element.class。

[https://developer.mozilla.org/en-US/docs/Web/API/Element/className](https://developer.mozilla.org/en-US/docs/Web/API/Element/className)

以下是使用正确语法的更新答案：

```
function highlight(id) {
   var element = document.getElementById(id);
   element.className = (element.className == "opacityClicked") ? "opacityDefault" : "opacityClicked";
} 
```

还注意到这个答案没有显示 HTML。确保通过 id 元素，**而不是 id 的名称**。

# url - 使用 appery.io 云 IDE 对 box api 的 Https 重定向 url 支持

> ID：16191810
> 
> 赞同：0
> 
> 时间：2013-04-24T12:15:35.387
> 
> 标签：url, redirect, https, box-api

我使用*appery.io 云*IDE 开发了一个应用程序。

此 ide 仅支持 http 协议，但***box*** api 需要 https 协议来重定向 url。

有没有办法输入http url而不是https？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:03:47.643

出于安全考虑，整个 API 都需要 HTTPS。

# iphone - iPhone后台应用程序-为什么whatsapp可以工作而skype不能

> ID：16191812
> 
> 赞同：0
> 
> 时间：2013-04-24T12:15:42.070
> 
> 标签：iphone, ios, background-process, skype, whatsapp

我正在尝试了解后台应用程序在 iPhone 上的工作方式。具体来说，当应用程序处于后台时，Skype 无法保持连接，因此您将无法在后台接听电话/消息。

另一方面，Whatsapp 一直处于连接状态，即使在后台，您也可以接收消息。

有人可以解释每个应用程序背后的技术细节，它们之间的区别，以及是什么阻止 Skype 像 Whatsapp 一样工作，所以它始终保持连接？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:29:13.143

这是因为 Whatsapp 使用所谓的推送通知。这允许使用它的应用程序接收警报/消息/通知，即使该应用程序未在 iOS 设备上打开。

据我所知，甚至 Skype 也使用它们来通知来电和新消息。您可能在设置 -> Skype -> 通知中禁用了它们。

欲了解更多信息：[http :](http://ipod.about.com/od/usingios4/qt/How-Iphone-Multitasking-Works.htm)
[//ipod.about.com/od/iphonesoftwareterms/g/iphone-push-notifications.htm http://ipod.about.com/od/usingios4/qt/How-Iphone-Multitasking-Works](http://ipod.about.com/od/iphonesoftwareterms/g/iphone-push-notifications.htm)
[.htm](http://ipod.about.com/od/usingios4/qt/How-Iphone-Multitasking-Works.htm)

# gwt - 异步“mymodule.nocache.js”脚本加载，onModuleLoad 未触发

> ID：16191813
> 
> 赞同：1
> 
> 时间：2013-04-24T12:15:46.967
> 
> 标签：gwt

有没有办法用脚本异步标签加载“mymodule.nocache.js”并触发 onModuleLoad？脚本“mymodule.nocache.js”和“BDAC1610913660F7525C05DB3B100E5D.cache.html”都加载正常，但“onModuleLoad”从未启动。

另一个类似的案例 - 我想从 JS 注入 GWT 应用程序（例如按下按钮）。再次使用“onModuleLoad”没有运气。

提示按 GWT 引导顺序：

> 一旦 GWT 选择脚本启动，它的 onModuleLoad() 就可以在外部文档被解析后的任何时候被调用。

无论如何手动启动 GWT 应用程序，没有“onModuleLoad() 可以在外部文档被解析后的任何时候调用”。

# duplicates - 将图像保存为不重复的 ALAsset

> ID：16191814
> 
> 赞同：0
> 
> 时间：2013-04-24T12:15:47.073
> 
> 标签：duplicates, alassetslibrary, alasset

我想使用 dropbox api 下载图像并将它们保存在我的 ALAssetLibrary 中的自定义相册（“DropBox”）中。但是我不想保存重复项。那么检查图像是否已经存在于相册中的最佳方法是什么。ALAssetLibrary 中是否有某种散列可以用于此目的？我不介意对我下载的图像的 NSData 进行散列处理，但是对相册中的所有图像执行此操作会非常重要。也许以某种方式将哈希存储在元数据中？

非常感谢！

akw

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:31:47.623

到目前为止，我找到了一个对我有用的解决方案：

我“滥用”EXIF 用户评论标签来保存哈希值（在我的情况下，只是保管箱路径）。

从 DropBox 下载图像后，我将其保存`writeImageDataToSavedPhotosAlbum`并存储在`kCGImagePropertyExifUserComment`.

这样，我只需要扫描 ALAssetsGroup 中的这些标签，如果存在，我根本不需要下载图像。工作正常。

# jquery - 使用 jQuery 删除 Dom 元素

> ID：16191815
> 
> 赞同：0
> 
> 时间：2013-04-24T12:15:50.293
> 
> 标签：jquery, twitter-bootstrap, playframework-2.0

我尝试在这样的播放应用程序中使用 jquery 从 dom-tree 中删除 div：

```
<form class="form-search">
    <input type="text" class="input-medium search-query" placeholder="@Messages.get("frontend.wiki.search.placeholder")">
    <button type="submit" class="btn btn-primary" id="searchButton" onclick="search()">@Messages.get("frontend.wiki.search")</button>
</form>

@* most read articles *@
<div class="row" id="mostread">
    @components.wikitable(Messages.get("frontend.wiki.mostread"), WikiArticle.findAllMostReadArticles(5))
</div>

.....

<script type="text/javascript">
    var search = function() {
        $('#mostread').empty();
    }
</script> 
```

当我单击按钮时，页面上的“最常阅读”部分会消失一秒钟，但之后一切都恢复了原样。这是为什么？也使用引导程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:18:42.020

[`.detach()`](http://api.jquery.com/detach/)如果您打算稍后重新插入它，请使用它：

```
var elem = $('#mostread').detach(); 
```

如果您不关心重新插入，只需使用 remove()：

```
$('#mostread').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:31:00.603

与其将按钮类型保留为“提交”，不如将其保留为“按钮”，所以现在应该是

```
<button type="button" class="btn btn-primary" id="searchButton" onclick="search()">@Messages.get("frontend.wiki.search")</button> 
```

# iphone - 使用具有多种语言的故事板

> ID：16191817
> 
> 赞同：1
> 
> 时间：2013-04-24T12:15:57.807
> 
> 标签：iphone, ios, xcode, localization, uistoryboard

我想以多种语言（如 6 或 7 种语言）**本地化**我的应用程序，但我不想添加与故事板副本一样多的内容。所以，对于 6 种不同的语言，我想要：

*   一个故事板
*   6 Localizable.strings

在我的故事板中，所有组件都是插座，因此我可以以编程方式对它们进行本地化。

我的问题是我无法使用没有情节提要本地化（但有 localizable.strings）的语言加载应用程序，我收到一个错误：

```
Could not find a storyboard named 'XXXX' in bundle NSBundle. 
```

有没有办法只使用一个带有多个可本地化文件的故事板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:32:26.080

听起来您的故事板仍在 en.lproj 文件夹中。当您在配置为使用另一种语言的系统上启动时，将使用来自该语言的 lproj 的资源，而不是来自 en.lproj 的资源。您需要将您的故事板标记为未在 Xcode 中本地化，这样它就不会被部署到您构建的应用程序中的 en.lproj 文件夹中。还要确保它仍然作为资源包含在项目的适当目标中。您应该能够在选择故事板的情况下从文件检查器中完成所有这些操作。

如果您的目标是 iOS 6.0 及更高版本，则可以使用 Base.lproj 功能。使用该功能，您的应用程序只需提供一个情节提要，并且多个字符串文件和情节提要的字符串在运行时被相应语言的字符串文件中的字符串替换。

您可以在此处阅读有关 base.lproj 的更多信息： [https ://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/InternationalizeYourApp/InternationalizeYourApp/InternationalizeYourApp.html](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/InternationalizeYourApp/InternationalizeYourApp/InternationalizeYourApp.html)

# ruby-on-rails - Rake db:migrate - 我如何撤消所有迁移并重做它们

> ID：16191820
> 
> 赞同：55
> 
> 时间：2013-04-24T12:16:04.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, migration, reset, rollback

是否有适用于所有迁移的快速 rake db:rollback 命令？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-04-24T12:46:06.650

# 回滚所有迁移

要回滚所有迁移，最好的解决方案是@Claudio Floreani 提出的解决方案：

```
rake db:migrate VERSION=0 
```

这将回滚每次迁移。[您可以在他的回答](https://stackoverflow.com/a/32252937/1167828)中阅读为什么这是最好的方法。然后，再次运行所有迁移

```
rake db:migrate 
```

* * *

# 重置数据库

## 重置

```
rake db:migrate:reset #runs db:drop db:create db:migrate 
```

此方法删除数据库并再次运行迁移。

## 加载最后一个模式

```
rake db:reset 
```

此方法将删除数据库并从最后一个模式加载数据。

您可以在这篇文章中查看更多信息：[Rake db:migrate db:reset 和 db:schema:load 之间的区别](https://stackoverflow.com/questions/10301794/difference-between-rake-dbmigrate-dbreset-and-dbschemaload)

感谢@Claudio Floreani 和所有评论以改进答案的用户。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-08-27T15:01:50.023

如果您真的想**回滚所有迁移**，而不仅仅是将数据库带到原始状态或最后一个模式，您必须运行：

```
rake db:migrate VERSION=0 
```

这实际上会在每次迁移中一直回滚，并确保每次迁移都是可逆的。

如果你现在发出

```
rake db:migrate:status 
```

您会看到所有迁移仍然存在，但它们处于“关闭”（未应用）状态。

其他暗示`rake db:reset`或的命令`rake db:drop`（例如在@Orlando 或@Alex Falke 的答案中）根本不会进行任何回滚：也就是说，它们不能确保每次迁移都是可逆的。

此外，`rake db:drop`不能在其他用户访问数据库时运行，而可以实时执行回滚（即使通常不推荐这样做）。最后但同样重要的是，简单地删除并重新创建数据库也会删除架构迁移表：如果有人在删除`rake db:migrate:status`数据库后运行，他将被回答“架构迁移表尚不存在”并且不会有任何线索可以应用哪些迁移（除非他还知道或可以列出它们）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-24T12:25:14.187

只需使用`rake db:reset`，这将删除您的数据库（与撤消所有迁移相同）并重置为最后一个模式。

**更新**：将使用更正确的方法`rake db:migrate:reset`。这将删除数据库，再次创建它并运行所有迁移，而不是重置为最新模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-11T15:47:01.457

如果出现权限问题（就像我发生的那样），也许您可​​以尝试像我对 ruby​​mine 所做的那样删除所有数据库表（只需打开数据库工具窗口，选择所有表并右键单击 -> 删除），它应该类似于其他 IDE。一些表，如 sqlite_master 和 sqlite_sequence 在 drop 中被方便地忽略了。

这让我可以做到

```
rails db:migrate 
```

一切正常。当然，您会丢失所有数据！

# javascript - WP enqueue 方法无法加载自定义脚本

> ID：16191823
> 
> 赞同：0
> 
> 时间：2013-04-24T12:16:11.297
> 
> 标签：javascript, jquery, wordpress, plugins

只需要一些关于 WP en queue 的信息，我已经在各种网站上学习了一些教程，因为我是一个非常基本的网页设计师，我主要使用 HTML CSS，至少这是我最了解的。

我无法最好地解释我哪里出错了，但我可以发布代码供人们查看，以向您展示我是否正确执行了此操作。如果对任何人有帮助，我目前正在使用 WAMP 在本地构建站点。我从 Google CDN 调用 Jquery 我已经注销了 WordPress 附带的 jQuery（因为我不确定它使用的是最新版本）。

我已经重新注册了它，但即使是一个简单的 Jquery 文件也无法加载。目前我正在尝试加载滚动以锚定 jQuery 文件。

这是functions.php代码

```
<?php function vstep_scripts_basic()
  {
    wp_deregister_script( 'jquery' );

wp_register_script( 'jquery', 'http//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', array(), null, false );

wp_register_script( 'jquery.anchor', get_template_directory_uri() . '/js/jquery.anchor.js', array( 'jquery' ) );  

wp_enqueue_script( 'jquery.anchor' );

}
add_action( 'wp_enqueue_scripts', 'vstep_scripts_basic' );
?> 
```

现在这也显示在浏览器页面中，所以他对我说它正在正确加载，但 Jquery 仍然无法正常工作。

```
<script type='text/javascript'src='http://localhost/wordpresshttp//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-content/themes/vstep/js/jquery.anchor.js?ver=3.5'></script> 
```

我的网站导航正确，但不包括平滑滚动效果。HTML 版本工作正常，但 wordpress 版本不是我不认为这是代码的简单错误，因为它只是从 HTML 到 wordpress 更改路径和位置的复制粘贴作业。除了网站是从到底部滚动的所有一页。

我的想法，anchor.jquery 末尾的ver?3.5 是否会导致问题？
我是否错误地注销了 jquery（滚动效果与 jquery 1.9.1 捆绑在一起，因此我使用 1.9.1 而不是 2.0.0 ）

路径是否适合在本地主机上使用？

它是 get_template_uri 还是 get_plugin？

我只是想不出任何帮助将不胜感激。

谢谢~

图姆图姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:18:18.243

您在脚本网址中有错字：`http//`

改变

```
wp_register_script( 'jquery', 'http//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', array(), null, false ); 
```

至

```
wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', array(), null, false ); 
```

或者

```
wp_register_script( 'jquery', '//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', array(), null, false ); 
```

# list - Haskell列表中元素的索引

> ID：16191824
> 
> 赞同：18
> 
> 时间：2013-04-24T12:16:11.373
> 
> 标签：list, haskell, indexing

当我使用 map 时，如何获取我在 haskell 中的元素的索引？

例如，我有这个列表`l = "a+bc?|(de)*fg|h"`，我想知道我在使用该`map or scanl`函数时所在元素的确切索引。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-24T12:27:22.067

修改 Nikita Volkov 的回答，您可以使用如下函数：

```
-- variant of map that passes each element's index as a second argument to f
mapInd :: (a -> Int -> b) -> [a] -> [b]
mapInd f l = zipWith f l [0..] 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-24T12:24:34.643

首先，如果您在处理列表时需要索引，则表明您正在实现次优算法，因为列表不是像数组那样基于索引的结构。如果您需要处理索引，最好考虑使用[**向量**](http://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/Data-Vector.html)。

关于您的实际问题，您可以使用以下代码将列表中的项目与递增整数配对，然后映射结果：

```
Prelude> zip [0..] "a+bc?|(de)*fg|h" :: [(Int, Char)]
[(0,'a'),(1,'+'),(2,'b'),(3,'c'),(4,'?'),(5,'|'),(6,'('),(7,'d'),(8,'e'),(9,')'),(10,'*'),(11,'f'),(12,'g'),(13,'|'),(14,'h')] 
```

# eclipse - eclipse，远程系统资源管理器，自定义命令

> ID：16191826
> 
> 赞同：1
> 
> 时间：2013-04-24T12:16:16.203
> 
> 标签：eclipse, plugins

我在 Windows 机器上并使用 Eclipse 在 UNIX 远程编辑一些文件。我使用远程系统资源管理器通过 SSH 浏览文件，效果非常好（与 N++ 资源管理器相比，它是一个火箭）。现在 UNIX 文件在 ClearCase 版本控制下，我想在 Eclipse 的远程系统资源管理器中有一些“右键单击”选项，与一些 unix 命令相关联（在我的例子中是 ClearCase 命令）。

我应该开始学习为此制作一个简单的插件吗？

注意：有一些 ClearCase 随时可用的插件，但它们都需要在 Windows 机器上安装 ClearCase 客户端（我这样做了），但出于安全目的，我们的管理员不允许 Windows 客户端访问版本数据库 :)

所以现在我使用 putty 控制台（Eclipse 控制台）来签入/签出文件，然后用 Eclipse 编辑它们。有机会像我上面解释的那样做一次吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T00:00:41.637

不可能有插件，因为通过 Eclipse 插件的 ClearCase 命令将在您的本地机器上执行，而不是在 ssh 会话中。

这些 cleartool 命令（checkout/checkin）必须在视图启动的地方执行（即在 ssh 会话所在的 unix 远程服务器上）

# javascript - 如何使用 codebird.js 搜索 twitter API 以匹配用户？

> ID：16191829
> 
> 赞同：1
> 
> 时间：2013-04-24T12:16:20.123
> 
> 标签：javascript, twitter, twitter-oauth

我真的很难让这个 twitter 库（[https://github.com/mynetx/codebird-js](https://github.com/mynetx/codebird-js)）返回搜索结果而不是用户时间线。

我找不到将搜索参数传递给它的位置。

这是我目前的代码：

```
 var cb = new Codebird();
        cb.setConsumerKey("<fill in>","<fill in>");
        cb.setToken('<fill in>','<fill in>');  

        cb.__call('users/search', {
            'user' : '<fill in>',  // ??
            }
        );

        function tweets_callback (result)
        {
            // do something with the result 
        } 
```

但它一直抛出一个错误，有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:34:16.000

根本没有记录！这就是你的做法：

```
 var cb = new Codebird();
    cb.setConsumerKey("<fill in>","<fill in>");
    cb.setToken('<fill in>','<fill in>');  

    cb.__call('users/search', {
        'q' : '<fill in>',
        'callback' : 'search_callback',
        }
    );

    function search_callback (result)
    {
        // do something with the result 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T22:01:01.527

第 5 行应该是：

```
cb.__call('users_search', { 
```

这记录在这里：[https ://github.com/jublonet/codebird-js#3-mapping-api-methods-to-codebird-function-calls](https://github.com/jublonet/codebird-js#3-mapping-api-methods-to-codebird-function-calls)

# vb.net - 如何修复水晶报表的大小

> ID：16191830
> 
> 赞同：0
> 
> 时间：2013-04-24T12:16:25.417
> 
> 标签：vb.net, crystal-reports-2008

我正在使用 VS2008 开发 vb.net 应用程序。因为我有账单模块，因为我通过固定边界（高 8 英寸和宽 6 英寸）来设计报告。ut 问题是，当数据项大于 5 项时，报告会扩展，并且页脚部分会打印在其他页面上，这是不应该发生的。有没有办法在 1 页上打印一些项目，其中包含完整的账单详细信息，而其他账单上的剩余 deta 项目具有相同的格式

请帮我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:31:46.010

Ya5，您可以在分页选项选项卡中使用部分专家进行操作，根据您可以在页面设置选项和页眉和 f00ter 选项（账单详细信息）中设置您的页边距，您可以在页面设置选项和页眉和 f00ter 选项（账单详细信息）中设置两种方式的页面后或可见记录页。.

# c# - WebBrowser 开始以小尺寸呈现

> ID：16191831
> 
> 赞同：0
> 
> 时间：2013-04-24T12:16:26.057
> 
> 标签：c#, windows-phone-8

我目前正在创建一个 WebBrowser，如下所示；

```
WebBrowser webBrowser = new WebBrowser();
webBrowser.Height = 400;
webBrowser.Width = 600; 
```

并将其添加到我的画布上；

```
currentCanvas.Children.Add(webBrowser); 
```

但我有一个问题，它开始渲染的尺寸比它最终的尺寸要小。

当它开始渲染时；

![在此处输入图像描述](https://i.stack.imgur.com/vVueC.jpg)

当它完成渲染时；

![在此处输入图像描述](https://i.stack.imgur.com/KvTB9.jpg)

有谁知道我如何让 WebBrowser 以完成渲染时的大小（全尺寸）开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T12:06:03.520

通过将视口元标记移动到标记顶部来解决`<head>`它

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0"> 
```

# sql-server - EF 多对多

> ID：16191843
> 
> 赞同：0
> 
> 时间：2013-04-24T12:17:09.777
> 
> 标签：sql-server, entity-framework

如何为 EF 构建这些表？

第一张表：

```
public class model1
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

第二张表：

```
public class model2
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

具有第一个和第二个以及几个字段的连接的表：

```
public class model3
{
    public int (id from model1){ get; set; }
    public int (id from model2) { get; set; }
    public int (id from model2){ get; set; }
    public decimal Name{ get; set; }
    public decimal Description{ get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:27:20.917

我认为这可以解决问题（提供您描述的表结构）

```
public class model3
{
    public virtual model1 Model1 { get; set; }
    public virtual model2 Model2 { get; set; }
    public virtual model2 SecondModel2 { get; set; }

    // if you want the ID fields explicitly,
    // EF will map the keys by property name, 
    // optionaly you can use the ForeignKeyAttribute
    public int Model1Id { get; set; }
    public int Model2Id { get; set; }
    public int SecondModel2Id { get; set; }

    public decimal Name{ get; set; }
    public decimal Description{ get; set; }
} 
```

但是您可能需要重新考虑结构 - 您提出的结构看起来有点可疑 - model1 和 model2 具有相同的字段，所以也许它们不应该被定义为单独的类。model3 类也有一些公共字段，所以也许值得将它们提取到一个公共类中——EF 处理继承。

但是，要获得多对多关系，您需要以下内容：

```
public class Foo
{
    public int Id {get;set;}
    public virtual ICollection<Bar> Bars {get;set;}
}

public class Bar
{
    public int Id {get;set;}
    public virtual ICollection<Foo> Foos {get;set;}
} 
```

这将创建一个 Foo 表、一个 bar 表和一个 FooBars（或 BarFoos）关联表。

# android - 可扩展列表视图指示器显示标题高度？

> ID：16191844
> 
> 赞同：6
> 
> 时间：2013-04-24T12:17:11.530
> 
> 标签：android, expandablelistview, indicator

我使用了一个可扩展的列表视图，组指示器显示在列表的右侧，在这个列表中，我的标题名称是单行，我的输出是这样的

![在此处输入图像描述](https://i.stack.imgur.com/fzA0L.png)

在上图中，我的指标看起来不错。在下图中，我的指标看起来不太好它扩展了，为什么会发生这种情况

![在此处输入图像描述](https://i.stack.imgur.com/HU0J8.png)

这是我的代码

```
 mExpandableList = (ExpandableListView)findViewById(R.id.expandable_list);
    mExpandableList.setIndicatorBounds(width - GetPixelFromDips(40), width - GetPixelFromDips(10)); 
```

xml 是

```
 <ExpandableListView
    android:id="@+id/expandable_list"        
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:groupIndicator="@drawable/group_indicator" /> 
```

group_indicator.xml 是

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:drawable="@drawable/arrow_down"     android:state_expanded="true"/>
    <item android:drawable="@drawable/arrow_up"/>
</selector> 
```

任何人有想法帮助这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:10:53.900

我以更复杂的方式解决了这个问题，但它有效：

带有可扩展列表的布局文件片段：

```
<ExpandableListView
  android:id="@+id/accordion"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:groupIndicator="@android:color/transparent"
  android:scrollbars="none" >
</ExpandableListView> 
```

列表组元素的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/accordion_main_background"
    android:minHeight="50dip"
    android:orientation="vertical"
    android:padding="@dimen/screenPromoTaskRootPadding" >

    <TextView
        android:id="@+id/accordionTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dip"
        android:layout_toLeftOf="@+id/accordionIndicator"
        android:background="@color/accordionOrangeBackColor"
        android:paddingLeft="2dip"
        android:paddingRight="2dip"
        android:textColor="@color/blackTextColor"
        android:textSize="@dimen/accordMainTextSize" />

    <ImageView
        android:id="@+id/accordionIndicator"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/arrow_up_np" />

</RelativeLayout> 
```

并在活动中。adaptDataCollection 只是一个包含 ExpandableListAdapter 数据的列表。它也是 Accordion 实现的片段，因此列表组将在选择一个元素后折叠其他元素。

```
ExpandableListView accordion = (ExpandableListView) findViewById(R.id.accordion);
accordion.setOnGroupClickListener(this);

@Override
public boolean onGroupClick(ExpandableListView paramExpandableListView, View paramView, int paramInt, long paramLong) {
    ImageView icon=(ImageView)paramView.findViewById(R.id.accordionIndicator);
    for (int i = 0; i < adapterDataCollection.size(); i++) {
        if (i == paramInt) {
            if (paramExpandableListView.isGroupExpanded(i)) {
                paramExpandableListView.collapseGroup(i);
                icon.setImageResource(R.drawable.arrow_up_np);
            } else {
                paramExpandableListView.expandGroup(i);
                icon.setImageResource(R.drawable.arrow_down_np);
            }
        } else {
            paramExpandableListView.collapseGroup(i);
            icon.setImageResource(R.drawable.arrow_up_np);
        }
    }
    paramExpandableListView.invalidate();
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-05T14:41:32.813

您应该使用 9 个补丁图像作为箭头。您可以参考下图。

[![right_arrow_9_patch_image](https://i.stack.imgur.com/29Xw7.png)](https://i.stack.imgur.com/29Xw7.png)

对于向下箭头，您可以使用下图

[![down_arrow_9_patch_image](https://i.stack.imgur.com/29Xw7.png)](https://i.stack.imgur.com/LuD14.png)

**不要忘记**将“.9”附加到图像名称，如“ **your_image_name.9.png** ”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T09:40:22.587

[您可以通过 [layer-list] http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)设置指标高度

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:bottom="2dp"
        android:drawable="@drawable/shrink"
        android:top="2dp"/>

</layer-list> 
```

选择器

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/layer_shrink" android:state_expanded="true"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:04:18.553

当您在您的adapterClass 上膨胀它时，请查看您在custom_group_layout.xml 上使用的 `getGroupView()`视图。您的指示器的视图可能有一个 fill_parent ，这就是为什么当您分组包含更多文本行时您的项目会拉伸他的图标。

[一个例子](http://en.wikicode.org/index.php/Custom_ExpandableListView)

# twitter-bootstrap - 使用引导程序和 ASP MVC Razor 防止 Visual Studio 在 i 元素后删除空间

> ID：16191847
> 
> 赞同：0
> 
> 时间：2013-04-24T12:17:22.530
> 
> 标签：twitter-bootstrap, visual-studio-2012

我正在使用带有 Razor 视图引擎的 ASP MVC，并且还在我的 Web 应用程序中使用 Bootstrap 模板。在我的应用程序的许多地方，我使用`<i>`元素来显示图标。

问题是当我格式化视图 VS2012 删除`<i>`元素后的尾随空格和使页面看起来很糟糕的实际测试时。

有没有办法配置VS2012来离开那个空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:29:08.227

查看工具 -> 选项 -> 文本编辑器 -> HTML -> 格式。单击该窗口中的“特定于标签”按钮，您应该能够编辑标签的格式，包括 i。

# php - 如何在捆绑包中使用不同的身份验证配置？

> ID：16191848
> 
> 赞同：0
> 
> 时间：2013-04-24T12:17:22.553
> 
> 标签：php, laravel, laravel-3

是否可以为 bundle 定义不同的 Auth 配置？`application/config/auth.php`也是捆绑包的默认设置，但我需要为系统的不同捆绑包使用不同的身份验证模块。

此外，在文件夹上创建一个新`BUNDLE/config/`文件夹不会影响任何内容。因此，无论如何它都会加载默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:32:02.553

简短的回答是你不能...... Auth 和 Config 都不是为每个捆绑包而设计的。

长答案是你可以使用你的包的 start.php 文件来[覆盖每个配置设置](http://laravel.com/docs/config#setting-options)，例如

```
// bundles/my-bundle/start.php
Config::set('auth.driver', 'fluent');
Config::set('auth.table', 'my_users'); 
```

# ant - Ant Build：从类文件夹中的 Ivy 依赖战争文件中提取类文件

> ID：16191849
> 
> 赞同：0
> 
> 时间：2013-04-24T12:17:25.893
> 
> 标签：ant, jenkins, build-process, ivy

我有一个项目依赖于另一个项目中的一些其他 Java 类。在 Eclipse 中，这两个项目正在运行，没有任何错误。

现在我想用 Jenkins 和 Ant 构建具有依赖关系的项目。

我使用此配置从 Ivy 获得依赖项：

```
<publications>
    <artifact name="${version.name}" type="war" ext="war"/>
</publications>

<dependencies>
    <dependency org="de.company.sh" name="rest-db" rev="latest.integration"/>
</dependencies> 
```

build.xml 中的检索：

```
<!-- retrieve dependencies from ivy -->
<target name="retrieve" depends="prepare, prepare.productive, prepare.beta">
    <!-- Fetch parameters from properties -->
    <property file="build.properties" />
    <!-- Resolve module -->
    <ivy:resolve file="ivy.xml" />
    <!-- Retrieve dependencies -->
    <ivy:retrieve pattern="${build}/deps/[organization]/[module]/[artifact]-[revision].[ext]" />
</target> 
```

Jenkins 的控制台日志：

```
[ivy:resolve] Apr 24, 2013 1:42:06 PM   org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
[ivy:resolve] INFO: Basic authentication scheme selected
[ivy:resolve] downloading    http://localhost:7080/nexus/content/repositories/snapshots/de/company/sh/rest-db/1.0.3269/wars/rest-db-1.0.3269.war ... 
```

**到目前为止一切正常**

但是现在我有一个问题，我不能从 war 文件中包含类文件。从war文件到相关类文件的文件夹结构：rest-db-1.0.3269.war\WEB-INF\classes\de\company\sh...

这是我的尝试，但没有成功:-(

```
<!-- create war file from java classes -->
<target name="war" depends="compile">

    <!-- Move rest-db where it is needed
    <war destfile="${build}/lib/rest-db.war" webxml="WEB-INF/web.xml">
        <zipfileset dir="${build}/classes" includes="**/*.class"/>
    </war>
     -->
    <!-- -->
    <zip destfile="${build}/deps/de.company.sh/rest-db" basedir="${build}" update="true" />

    <!-- Copy all necessary Spring libraries -->
    <copy todir="${build}/lib">
        <!-- All files directly located in the lib/ directory -->
        <fileset dir="${lib}">
            <include name="*.jar" />
        </fileset>
    </copy> 
```

...

```
 <!-- Move rest-db where it is needed
    <copy todir="${build}/classes">
        <fileset dir="${build}/deps/de.company.sh/rest-db">
            <include name="*.*" />
        </fileset>
    </copy>
     --> 
```

我希望你对我有一些绝妙的建议:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:31:05.317

听起来您正试图在已使用 ivy 下载的工件中声明对工件的依赖？

也许包装器解析器是您需要查看的地方。功能强大，虽然设置起来有点复杂。

示例见：

*   [ivy 对外部 JAR 的依赖](https://stackoverflow.com/questions/2987108/ivy-dependency-on-external-jar/7464028#7464028)
*   [gradle - 如何在 jar 中声明 jar 的依赖关系](https://stackoverflow.com/questions/3445696/gradle-how-to-declare-a-dependency-of-a-jar-in-a-jar/3454359#3454359)

# opencv - 如何加速 svm.predict？

> ID：16191858
> 
> 赞同：3
> 
> 时间：2013-04-24T12:17:51.897
> 
> 标签：opencv, machine-learning, computer-vision, svm, object-detection

我正在编写一个滑动窗口来提取特征并将其输入 CvSVM 的预测函数。但是，我偶然发现 svm.predict 函数相对较慢。

基本上，窗口以固定的步长在图像尺度上滑动穿过图像。

*   遍历图像加上为每个窗口提取特征的速度大约需要 1000 毫秒（1 秒）。
*   包含由 adaboost 训练的弱分类器导致大约 1200 毫秒（1.2 秒）
*   但是，当我将特征（已被弱分类器标记为正）传递给 svm.predict 函数时，整体速度减慢到大约 16000 毫秒（16 秒）
*   在使用 TBB 的线程传递给 svm.predict 之前，首先尝试收集所有“积极”特征导致 19000 毫秒（19 秒），可能是由于创建线程所需的开销等。

我的 OpenCV 构建被编译为包括 TBB（线程）和 OpenCL（GPU）功能。

有没有人设法加快 OpenCV 的 SVM.predict 功能？

我已经被这个问题困住了很长一段时间，因为通过我的测试数据运行这个检测算法来进行统计和阈值调整是令人沮丧的。

非常感谢您阅读本文！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:01:43.347

（上面发布的答案是为了正式化我的评论：）

SVM 的预测算法需要 O( *nSV* * *f* ) 时间，其中*nSV*是支持向量的数量，*f*是特征的数量。支持向量的数量可以通过使用更强的正则化训练来减少，即通过增加超参数*C*（可能以预测准确性为代价）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:58:35.577

我不确定您要提取哪些特征，但从特征的大小（3780）来看，我会说您正在提取 HOG。在课堂上有一种非常健壮、优化和快速的 HOG“预测”方式`cv::HOGDescriptor`。您需要做的就是

1.  提取你的 HOG 进行训练
2.  将它们放入 svmLight 格式
3.  使用 svmLight 线性核训练模型
4.  计算预测所需的 3780 + 1 维向量
5.  将向量提供给对象的`setSvmDetector()`方法`cv::HOGDescriptor`
6.  使用`detect()`或`detectMultiScale()`检测方法

以下文档包含有关如何实现您正在尝试做的事情的非常好的信息：http: [//opencv.willowgarage.com/wiki/trainHOG](http://opencv.willowgarage.com/wiki/trainHOG)虽然我必须警告您原始程序中存在一个小问题，但它教你如何正确处理这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-10T06:58:52.050

正如 Fred Foo 已经提到的，您必须减少支持向量的数量。根据我的经验，5-10% 的训练基数就足以具有良好的预测水平。

使其工作更快的另一种方法：

1.  减小特征的大小。3780太贵了。我不确定在您的情况下这种特征大小可以描述什么，但根据我的经验，例如，对汽车标志等图像的描述可以有效地打包成 150-200 大小：
    *   PCA 可用于减小特征的大小并降低其“噪声”。有一些例子说明它如何与 SVM 一起使用；
    *   如果没有帮助 - 尝试其他图像描述原则，例如 LBP 和/或 LBP 直方图
2.  LDA（单独或与 SVM 一起使用）也可以使用。
3.  首先尝试线性 SVM。如果您的集合原则上是线性可分的，那么它的速度要快得多，并且您的特征大小 3780（3780 维）足以在更高维度上具有良好的分离“空间”。如果不够好 - 尝试使用一些非常标准的设置（如 C = 1 和 gamma = 0.1）的 RBF 内核。只有在那之后 - POLY - 最慢的一个。

# iphone - NSUrlRequest 本身在 url 中添加 %0

> ID：16191860
> 
> 赞同：0
> 
> 时间：2013-04-24T12:18:02.830
> 
> 标签：iphone, base64, nsurlrequest

正在`NSURLRequest`添加`%0`。_ `request`我创建了字符串并将其转换为 base 64，然后发送到 url，但`NSURLRequest`会自动添加`%0`。下面是我正在使用的代码。

这是如何转换为`base 64`.

```
 NSData *plainTextData = [totalStr dataUsingEncoding:NSUTF8StringEncoding];
 NSString *base64String = [plainTextData base64EncodedString];
 NSLog(@"encoded url:%@",base64String); 
```

当 Api 调用时。

```
NSString *urlStr = [NSString stringWithFormat:@"http://mabct.co/api/checkin/%@", [code valueForKey:@"code"]];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:
                                [NSURL URLWithString:urlStr]];
                                // [urlStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];

NSString *responseString = [MyEventApi sendRequest:request];

NSError *error;
NSData *jsonData = [responseString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *results = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];
NSLog(@"dict in API-------------%@",results);
return results; 
```

这是转换为 base 64 的字符串

```
eyJldmVudElkIjoiNDAiLCJzZWF0IjoiMTBfS2FyYW4gU3VraGlqYV8yNC0wNC0yMDEzIDE3OjE3IiwidXNlcklkIjoiMTAifQ== 
```

这就是`NSURLRequest`发送的内容。

```
eyJldmVudElkIjoiNDAiLCJzZWF0IjoiMTBfS2FyYW4gU3VraGlqYV8yNC0wNC0y%0D%0AMDEzIDE3OjE3IiwidXNlcklkIjoiMTAifQ== 
```

这就是我发送的编码

```
"{"eventId":"47","seat":"10_Karan Makhija_24-04-2013 10:06","userId":"10"}" 
```

我没有得到什么是错的，请指导上述内容。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:35:51.377

我看到它`%0D%0A`被添加到您的原始字符串中。我google了一下，发现：

> %0D%0A 是 的编码 ASCII 不可打印字符，在 Microsoft 平台上是 NewLine 所以：
> 
> 1.  考虑一下您是否在编辑文件时不小心按回车键替换了某些 HTML。
> 
> 2a. 请注意您的编辑器使用什么编码来保存文件（通常是 ASCII、ANSI 或 Unicode）
> 
> 2b。您的网络服务器（一个 IIS6，可能在 Windows 2003 服务器上运行）以 UTF-8 编码提供文件，这很好 - 但您可能需要验证它是否使用与保存文件相同的编码实际读取文件文件。

如果您想检查，这里是[SOURCE 。](http://productforums.google.com/forum/#!topic/webmasters/fCXHNophyQc)

## 编辑

确保您的网络服务器和客户端使用相同的编码（即`NSUTF8StringEncoding`或任何其他，但相同）

此外，Web 服务器上还有 IF base 64 编码。按照[此](http://agerson.net/base64-encode-and-decode-nsstring-cocoa)链接，用于实现此类编码/解码的类别。我希望这能帮到您。

# wordpress - 让 index.html 优先于 index.php

> ID：16191861
> 
> 赞同：3
> 
> 时间：2013-04-24T12:18:03.093
> 
> 标签：wordpress, indexing

我有一个 wordpress 网站。现在索引页是 index.php

问题是我不希望服务器使用**index.php**作为默认值，而是使用**index.html**。

**index.html**只是一个临时页面（正在建设中），直到 wordpress 站点准备就绪。

目前该域优先于**index.php** - 我如何将其赋予 index.html？

注意：我在根目录中**没有htaccess 文件....我相信您在其中指定了它？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:22:13.147

这取决于您现在的服务器配置，某些 .htaccess 文件您可能也无权访问。您可以在自己的 htaccess 中定义/否决它，例如：

```
DirectoryIndex index.html index.php 
```

优先级取决于您在该行中设置文件名的顺序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:21:41.633

制作一个 .htaccess 文件，其中包含“DirectoryIndex index.html”（无 qoutes）。

# php - magento分页号码不起作用

> ID：16191866
> 
> 赞同：2
> 
> 时间：2013-04-24T12:18:07.300
> 
> 标签：php, magento, pagination, numbers

我正在研究现有的 magento 网站，这是我的第一个 magento 开发。

有“每页项目”选项，但没有显示分页。

我需要用 1,2,3,4 之类的数字显示分页...我已经通过更改管理区域配置 -> 常规 -> 设计 -> 分页中的选项进行了尝试。

还尝试了通过谷歌搜索发现的许多其他技巧，但很幸运。

有人可以向我展示对我的产品进行分页的正确方法，或者提供有助于分页的有用链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:44:19.160

看看这个链接[Magento 分页](http://workingmagento.blogspot.com.es/2010/12/magento-custom-pagination.html)

**编辑：**

您还可以在以下位置配置更多选项：`System > Configuration > Catalog > Catalog > Frontend`

例如每页显示的产品数量等。

# css - 当元素高于约 32,000 像素时，Chrome 中的背景渐变会中断

> ID：16191872
> 
> 赞同：2
> 
> 时间：2013-04-24T12:18:14.973
> 
> 标签：css, google-chrome, background, gradient, linear-gradients

我有一个案例，允许用户查看通常分页的表格的全部内容，并且在极少数情况下元素会变得很长。在 Chrome 中，当元素的高度超过 32,000 像素时，背景渐变会分崩离析，呈现为纯黑色和各种其他块。

[http://jsfiddle.net/isherwood/hBm4C/1/](http://jsfiddle.net/isherwood/hBm4C/1/)

```
background: -webkit-gradient(linear, left top, left bottom, 
    color-stop(0%,#ccc), color-stop(100%,#f5f5f5)); 
```

[我在这里](https://stackoverflow.com/questions/7233649/webkit-linear-gradient-causes-banding-in-chrome-safari)看到了 2011 年的类似讨论，但这似乎有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:53:20.083

好的，这有点奇怪，显然是 Chrome 中的一个错误

如果您从样式中删除边框，它会奇迹般地工作正常：

[http://jsfiddle.net/hBm4C/2/](http://jsfiddle.net/hBm4C/2/)

```
.gradient-tall {
width: 150px;
height: 35000px;
display: inline-block;
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ccc), color-stop(100%,#f5f5f5));
vertical-align: top; 
```

}

使用 box-shadow 可以实现渐变和边框：

```
.gradient-tall {
    width: 150px;
    height: 35000px;
    display: inline-block;
    box-shadow:0 0 0 1px #777;
    background:#ccc;
    background-image:-webkit-linear-gradient(#ccc 1%, #f5f5f5 99%);
    vertical-align: top;
} 
```

[http://jsfiddle.net/hBm4C/3/](http://jsfiddle.net/hBm4C/3/)

# android - 视图不适合画布比例的画布

> ID：16191873
> 
> 赞同：3
> 
> 时间：2013-04-24T12:18:15.227
> 
> 标签：android, android-canvas, android-view

当我尝试将我的画布缩放到绘制 SCALED 视图时，我的视图实际上已缩放，但视图被剪裁了。（可能是因为它的布局参数？）

```
public void onDraw(Canvas canvas) {
    canvas.scale(2f, 2f);
    view.draw(canvas);
} 
```

简单的图像：

![在此处输入图像描述](https://i.stack.imgur.com/rK36g.png)

调用新的 onDraw 后的图像，例如当我单击此按钮时：

![在此处输入图像描述](https://i.stack.imgur.com/jH52J.png)

缩放画布时，按钮应为全尺寸。您有任何解决方法的想法吗？

ps调用

```
view.invalidate();
view.requestLayout(); 
```

没有帮助。

* * *

我正在使用`MyDragShadowBuilder`，因为我希望我的视图在拖动视图时放大一倍。

```
private final class MyDragShadowBuilder extends DragShadowBuilder {

        public MyDragShadowBuilder(View view) {
            super(view);
        }

        @Override
        public void onDrawShadow(Canvas canvas) {
            final View view = getView();
            if (view != null) {
                canvas.scale(2f, 2f);
                view.draw(canvas);
            } else {
                Log.e("DragShadowBuilder", "Asked to draw drag shadow but no view");
            }
        } 
```

我使用 WRAP_CONTENT 布局属性将我的视图添加到我的绝对布局实现中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-06T08:17:29.473

我遇到了同样的麻烦。一段时间后，我找到了一种让它工作的方法:) 这将原始视图缩放了 4 倍。

```
private static class MyDragShadowBuilder extends View.DragShadowBuilder {

    private static final int SCALING_FACTOR = 4;

    public MyDragShadowBuilder(View view) {
        super(view);
    }

    @Override
    public void onProvideShadowMetrics(Point shadowSize, Point shadowTouchPoint) {
        View v = getView();
        final int width = v.getWidth() * SCALING_FACTOR;
        final int height = v.getHeight() * SCALING_FACTOR;
        shadowSize.set(width, height);
        shadowTouchPoint.set(width / 2, height / 2);
    }

    @Override
    public void onDrawShadow(Canvas canvas) {
        canvas.scale(SCALING_FACTOR, SCALING_FACTOR);
        getView().draw(canvas);
    }

} 
```

# mysql - Generate reports from data that was removed?

> ID：16191878
> 
> 赞同：0
> 
> 时间：2013-04-24T12:18:20.643
> 
> 标签：mysql, database, report

I need to generate a report which shows subscriptions for a object for a specific period. The problem is the objects on which a subscription is taken can be removed. So if the object is removed then i cannot generate a report for it anymore, simply because it is not known in the database anymore.

My current solution would be to introduce a "deleted" tag/db column that indicates if a object was removed. This way i can create reports even for removed objects.

This works nicely, but when the reports get more complex you will get more objects/tables with the "deleted" column, which might become less manageable.

Other solution i thought about are:

*   create reports when object is removed. Problem here is when new reports are introduced, new reports cannot be created from removed object.
*   save removed data to another form/table/format. Problem here is that you might not have saved enough for future reports and it is a a lot more work.

Any ideas on this subject? Or maybe even other, better, solutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T08:52:39.477

Just to answer my own question: i bumped into the soft delete while doing further research and there is a lot of information regarding soft delete and it seems to be a good solution for the problem.

# c++ - 有什么方法可以处理 libxml sax 解析中的错误？

> ID：16191886
> 
> 赞同：0
> 
> 时间：2013-04-24T12:18:42.013
> 
> 标签：c++, libxml2

由于某种原因，我必须在我的 c++ 代码中使用 libxml，并且我的程序正在使用 sax 方法解析 xml 文件。有什么方法可以处理解析中的错误或异常吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:28:49.640

您可以像这样编写自己的错误处理程序：

```
static void my_error(void *user_data, const char *msg, ...) {
    va_list args;

    va_start(args, msg);
    g_logv("XML", G_LOG_LEVEL_CRITICAL, msg, args);
    va_end(args);
}

static void my_fatalError(void *user_data, const char *msg, ...) {
    va_list args;

    va_start(args, msg);
    g_logv("XML", G_LOG_LEVEL_ERROR, msg, args);
    va_end(args);
} 
```

（[这里](http://www.jamesh.id.au/articles/libxml-sax/libxml-sax.html#errors)的例子）

[`xmlSetGenericErrorFunc`](http://www.xmlsoft.org/html/libxml-xmlerror.html#xmlSetGenericErrorFunc)并使用and注册它们[`xmlSetStructuredErrorFunc`](http://www.xmlsoft.org/html/libxml-xmlerror.html#xmlSetStructuredErrorFunc)。

没有上下文的注册示例：

```
xmlSetGenericErrorFunc(NULL, my_fatalError); 
```

# pdf - 在 TCPDF 中插入 SVG 图像时的白色图像

> ID：16191894
> 
> 赞同：0
> 
> 时间：2013-04-24T12:19:09.933
> 
> 标签：pdf, svg, tcpdf

我正在尝试使用 TCPDF::ImageSVG 方法在 PDF 中插入一些 SVG 图像，但是当我尝试这个时，我得到了一个空白。如果我尝试启用 TCPDF::setRasterizeVectorImages 图像显示在 PDF 文件中，但它当然是光栅化的，所以它的质量不好。你有什么主意吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T20:18:49.430

不幸的是，TCPDF 的 SVG 处理非常有限，问题的原因取决于您尝试使用的 SVG。更高版本的 TCPDF 支持更多 SVG 功能，因此如果您还没有这样做，请尝试使用更高版本的 TCPDF。

如果更新无法解决问题，并且您被迫使用光栅图像，则可以以文件大小为代价来提高质量。您可以通过在 TCPDF 之外以高 DPI 对它们进行光栅化来做到这一点。完成此操作后，获取新的高分辨率光栅图像并使用与`Image`任何其他光栅图像一样的方法将其添加到 PDF 中。在工作中，我们通常将光栅化到 300dpi，但您的应用程序可能要求更多或更少。

如果添加到 PDF 中的图像比您预期的大得多，请指定至少一个尺寸，以便 TCPDF 知道您打算使用该图像的页面大小。

# c# - 将数据表导出到 Excel asp

> ID：16191895
> 
> 赞同：2
> 
> 时间：2013-04-24T12:19:16.747
> 
> 标签：c#, asp.net, excel

我有一个将数据导出到 excel 文件的网页。我遇到的唯一问题是，当我尝试打开 excel 文件时，我收到一条消息，提示“您尝试打开的文件的格式与文件扩展名指定的格式不同。验证文件没有损坏并且来自在打开文件之前受信任的来源。”。我怎样才能摆脱这个消息。为了进行导出，我使用了我在另一篇文章中找到的函数。这是代码...

```
private void ExporttoExcel(DataTable table)
{
    //Response.Clear();
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.ClearContent();
    HttpContext.Current.Response.ClearHeaders();
    HttpContext.Current.Response.Buffer = true;
    HttpContext.Current.Response.ContentType = "application/excel";
    HttpContext.Current.Response.Write(@"<!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.0 Transitional//EN"">");
    HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=TestingReports");
    HttpContext.Current.Response.Charset = "UTF-8";
    HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("windows-1252");
    // Sets font
    HttpContext.Current.Response.Write("<font style='font-size:10.0pt; font-family:Calibri;'>");
    HttpContext.Current.Response.Write("<BR><BR><BR>");
    // Sets the table border, cell spacing, border color, font of the text, background, foreground, font height
    HttpContext.Current.Response.Write("<Table bgColor='#ffffff' cellSpacing='0' cellPadding='0' style='font-size:10.0pt; font-family:Calibri; background:white;'> <TR>");
    // Am getting my grid's column headers
    int columnscount = table.Columns.Count;

    // Write in new column
    for (int j = 0; j < columnscount; j++)
    {
        HttpContext.Current.Response.Write("<Td style='font-size:15.0pt; text-align:center; width:80.0pt; border-width:1.0pt; border-color:#000000; border-style:solid; height:22.0pt;'>");
        // Get column headers  and make it as bold in excel columns
        HttpContext.Current.Response.Write("<B>");
        HttpContext.Current.Response.Write(table.Columns[j].ToString());
        HttpContext.Current.Response.Write("</B>");
        HttpContext.Current.Response.Write("</Td>");
    }
    HttpContext.Current.Response.Write("</TR>");

    // Write in new row
    foreach (DataRow row in table.Rows)
    {
        HttpContext.Current.Response.Write("<TR>");
        for (int i = 0; i < table.Columns.Count; i++)
        {
            HttpContext.Current.Response.Write("<Td style='width:80.0pt; text-align:center; border-width:0.5pt; border-color:#000000; border-style:solid; height:22.0pt;'>");
            HttpContext.Current.Response.Write(row[i].ToString());
            HttpContext.Current.Response.Write("</Td>");
        }
        HttpContext.Current.Response.Write("</TR>");
    }
    HttpContext.Current.Response.Write("</Table>");
    HttpContext.Current.Response.Write("</font>");
    HttpContext.Current.Response.Flush();
    HttpContext.Current.Response.End();

    //Response.Write("TestingReports.xls");
    //Response.Flush();
    //Response.End();
} 
```

任何帮助都感激不尽。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:26:22.367

下面的方法用于从您的 c# 代码导出到 excel 中。

```
// fileName = your file name like test.xls
// dt = your data table
// caption = it is caption which display on top of excel file.

 public static void Export(string fileName, DataTable dt, string Caption)
        {

            HttpContext.Current.Response.Clear();
            HttpContext.Current.Response.ClearHeaders();
            HttpContext.Current.Response.ClearContent();
            HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("windows-1254");
            HttpContext.Current.Response.Charset = "windows-1254"; //ISO-8859-13 ISO-8859-9  windows-1254

            HttpContext.Current.Response.AddHeader(
                "content-disposition", string.Format("attachment; filename={0}", fileName));
            HttpContext.Current.Response.ContentType = "application/ms-excel";
            string header = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n<title></title>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=windows-1254\" />\n<style>\n</style>\n</head>\n<body>\n";

            using (StringWriter sw = new StringWriter())
            {
                using (HtmlTextWriter htw = new HtmlTextWriter(sw))
                {
                    //  Create a form to contain the grid

                    Table table = new Table();
                    table.GridLines = GridLines.Horizontal;
                    //table.CellSpacing = 17;                                      

                    if (Caption.Trim() != "")
                        table.Caption = "<span style='background-color: #FFFFFF; color: #666666; font-size: 14pt; font-weight: bold; padding: 5px 0px; height: 30px;'>" + Caption + "</span>";

                    TableRow row = null;
                    row = new TableRow();
                    for (int i = 0; i < dt.Columns.Count; i++)
                    {
                        TableHeaderCell headerCell = new TableHeaderCell();
                        headerCell.Text = dt.Columns[i].ColumnName;
                        PrepareControlForExport(headerCell);
                        row.Cells.Add(headerCell);
                    }
                    table.Rows.Add(row);
                    foreach (DataRow rows in dt.Rows)
                    {
                        row = new TableRow();
                        for (int i = 0; i < dt.Columns.Count; i++)
                        {
                            TableCell RowCell = new TableCell();
                            RowCell.Text = rows[i].ToString();
                            PrepareControlForExport(RowCell);
                            row.Cells.Add(RowCell);
                        }
                        table.Rows.Add(row);
                    }

                    //  render the table into the htmlwriter
                    table.RenderControl(htw);

                    //  render the htmlwriter into the response
                    HttpContext.Current.Response.ContentType = "text/csv";
                    HttpContext.Current.Response.Write(header + sw.ToString());
                    HttpContext.Current.Response.End();

                 }
            }
        }

        private static void PrepareControlForExport(Control control)
        {
            for (int i = 0; i < control.Controls.Count; i++)
            {
                Control current = control.Controls[i];
                if (current is LinkButton)
                {
                    control.Controls.Remove(current);
                    control.Controls.AddAt(i, new LiteralControl((current as LinkButton).Text));
                }
                else if (current is ImageButton)
                {
                    control.Controls.Remove(current);
                    control.Controls.AddAt(i, new LiteralControl((current as ImageButton).AlternateText));
                }
                else if (current is HyperLink)
                {
                    control.Controls.Remove(current);
                    control.Controls.AddAt(i, new LiteralControl((current as HyperLink).Text));
                }
                else if (current is DropDownList)
                {
                    control.Controls.Remove(current);
                    control.Controls.AddAt(i, new LiteralControl((current as DropDownList).SelectedItem.Text));
                }
                else if (current is CheckBox)
                {
                    control.Controls.Remove(current);
                    control.Controls.AddAt(i, new LiteralControl((current as CheckBox).Checked ? "True" : "False"));
                }
                else if (current is Label)
                {
                    control.Controls.Remove(current);
                    control.Controls.AddAt(i, new LiteralControl((current as Label).Text));
                }

                if (current.HasControls())
                {
                    ReportExport.PrepareControlForExport(current);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:27:23.413

将您的内容类型更改为`application/ms-excel`并在文件名中**包含扩展名。**IE

```
Response.ContentType = "application/ms-excel";
Response.AppendHeader("Content-Disposition", "attachment;filename=MyFileName.xls"); 
```

我之前用 3 种不同的方式写了[一篇关于此的文章。](http://www.naveenbhat.in/2012/06/export-data-to-excel-without-using.html)您可以使用其中一种方法。

HTML表格方式：

```
 public void ExportToExcel(DataTable table)
    {
        HttpContext context = HttpContext.Current;
        context.Response.Clear();

        //Begin Table
        context.Response.Write("<table><tr>");

        //Write Header
        foreach (DataColumn column in table.Columns)
        {
            context.Response.Write("<th>" + column.ColumnName + "</th>");
        }
        context.Response.Write("</tr>");

        //Write Data
        foreach (DataRow row in table.Rows)
        {
            context.Response.Write("<tr>");
            for (int i = 0; i < table.Columns.Count; i++)
            {
                context.Response.Write("<td>" + row[i].ToString().Replace(",", string.Empty) + "</td>");
            }
            context.Response.Write("</tr>");
        }

        //End Table
        context.Response.Write("</table>");

        context.Response.ContentType = "application/ms-excel";
        context.Response.AppendHeader("Content-Disposition", "attachment;filename=MyFileName.xls");
        context.Response.End();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:26:56.930

虽然您所做的工作可能会奏效，但读取中型到大型文件也需要很长时间。检查[这个excel阅读器。](http://exceldatareader.codeplex.com/)既然你有数据集，你所要做的就是循环创建一个文件流，你就会有你的 excel 文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:28:52.063

当文件尝试在 Excel 2007 中打开时，使用“application/x-msexcel”或“application/vnd.ms-excel”MIME 类型在 Microsoft Excel 中打开网页内容的网站可能会遇到以下警告提示：

“您尝试打开的文件 '[filename]' 的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您要打开现在的文件？” （是 | 否 | 帮助）

如果用户单击是，文件将按预期打开。如果用户单击“否”，则文件可能仍然打开，或者可能会提示第二次，如果用户再次选择“否”则不会打开。

[有关http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx)的更多信息

# c++ - 多客户端程序

> ID：16191897
> 
> 赞同：1
> 
> 时间：2013-04-24T12:19:26.417
> 
> 标签：c++, c++builder, indy

我想知道我是否有一个服务器应用程序和一堆连接的客户端。如果第一个客户端请求一些数据，然后在中间，第二个客户端请求数据怎么办。会发生什么？第一个客户端连接会中断吗？

我正在使用 IndyServer Indy Client TCP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:01:08.597

TCP 服务器打开一个客户端可以连接的端口。连接由客户端 IP/客户端端口/服务器 IP/服务器端口四个组件定义。

Indy TCP 服务器在单独的线程中处理连接。所以只要你的连接处理代码是线程安全的，处理就会分开，线程之间不会互相干扰。

# rtc - 如何隐藏 RTC 中的构建？

> ID：16191900
> 
> 赞同：1
> 
> 时间：2013-04-24T12:19:41.467
> 
> 标签：rtc

如何在 RTC 中隐藏构建定义？

我可以将构建的“项目或团队区域”更改为仅包含开发人员的指定团队。此操作是否应向不在此构建的“项目或团队区域”中的团队成员隐藏构建定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:14:03.393

是的，它应该。
这看起来与我在 RTC 中隐藏 Stream 或组件的方式相同，正如我在“[如何在 RTC 源代码控制中隐藏特定用户的流？](https://stackoverflow.com/questions/16145966/how-to-hide-a-stream-from-particular-users-in-rtc-source-control/16146290#16146290) ”中详细说明的那样。

但是，[此线程](https://jazz.net/forum/questions/29814/why-does-a-build-engine-need-a-project-or-team-area)没有提及可见性，仅允许：

*   从构建定义中请求构建
*   修改构建定义

所以它可能不会做你想做的事。

* * *

在许可方面：

请注意，从给定的流程区域开始查找流程权限并查找其父链。权限可能会在团队区域级别被覆盖，因此同一项目中的不同团队可能具有不同的权限。另请注意，权限是为特定用户（即运行 JBE 或 Ant 任务的用户）查找的，它们不是直接为引擎本身定义的。

> 例如，**如果您想阻止团队 A 的引擎处理团队 B 的请求**，那么您将定义：
> 
> *   两个构建用户，`bobA`和`bobB`，
> *   和两个引擎，`engineA`和`engineB`（分别与`teamA`和相关联`teamB`），
> 
> with 中`bobA`授予了相关权限`teamA`，但不授予相关权限，而`teamB`for 则相反`bobB`。
> 在运行这两个 JBE 时，一个会指定`-userId bobA -engineId engineA`，而另一个会使用`bobB`and `engineB`。
> 
> 构建用户还应该有权修改相关引擎的构建定义，因为在确定构建请求之后，构建定义的流程区域负责：
> 
> *   构建的所有进一步操作（更新其状态和状态，提供下载/日志等）和
> *   定义本身（构建完成后更新平均构建时间）。

# python - 使用 PySide/Qt 打印完整文档

> ID：16191906
> 
> 赞同：0
> 
> 时间：2013-04-24T12:19:51.863
> 
> 标签：python, qt, printing, pyside

目前，我正忙于开发一个将 PDF 转换为 PNG 并使用 PNG 图像将其打印到打印机的应用程序。

问题是我可以打印出一张图像，但我不明白如何调整它的大小，使其在纸上始终是全尺寸。Offcourse 我想设置一些边距，但是图像必须以完全适合的方式重新调整大小。

问题是我真的不知道如何做到这一点，因为文档非常有限。

这是我当前打印图像的代码：

```
#set up printer
printer = QtGui.QPrinter(QtGui.QPrinter.HighResolution)
printer.setPrinterName('Adobe PDF') #I print to my Adobe PDF software printer
#set up image
image = QtGui.QImage(pngFiles[0])
#paint & print
painter = QtGui.QPainter()
painter.begin(printer)
painter.drawImage(100,100, image)
painter.end() 
```

我认为解决方案在这一行：painter.drawImage(100,100, image)

它使图像的边距为 100，但不缩放。如何以适合文档的方式缩放图像？我特别在寻找一种可以查看打印机默认文档大小的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:15:57.650

[您可以使用QPrinter::paperSize](http://qt-project.org/doc/qt-4.8/qprinter.html#paperSize-2)获取文档的大小。

要在绘制图像时调整图像大小，请使用[QPainter::drawImage](http://qt-project.org/doc/qt-4.8/qpainter.html#drawImage-7)的重载版本，它采用 QRectF，而不是 QPoint。然后将缩放图像以适合目标 QRectF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:12:26.407

根据与 Sashoalm 的对话，我可以调整图像的大小并将其很好地贴合在纸上进行打印。我已经剥离了我的实验代码，它应该像这样工作。

```
from PIL import Image
imagefile = 'image.png'

def scale(w, h, x, y, maximum=True):
    nw = y * w / h
    nh = x * h / w
    if maximum ^ (nw >= x):
        return nw or 1, y
    return x, nh or 1

#set up print printer.
printer = QtGui.QPrinter(QtGui.QPrinter.HighResolution)
#dlg = QtGui.QPrintDialog(printer, self)
printer.setPrinterName('Adobe PDF')

#check image size with PIL:  
image = Image.open(imagefile)
imageWidth, imageHeight = image.size

paperPixels = printer.pageRect(QtGui.QPrinter.DevicePixel)
paperPixels = paperPixels.getRect() #get tuple of the "pixels on the paper"
paperWidth = paperPixels[2]
paperHeight = paperPixels[3]

#set margins for paper
paperMargin = 100
#find out the image size
paperWidth = paperWidth - (paperMargin*2) #times two, for left and right.. 
paperHeight = paperHeight - (paperMargin*2)

#scale image within a rectangle.
paintWidth, paintHeight = scale(imageWidth, imageHeight, paperWidth, paperHeight, True)            
#construct the paint dimensions area
paintRect = QtCore.QRectF(paperMargin, paperMargin, paintWidth, paintHeight)

#start painting
image = QtGui.QImage(imagefile)
painter = QtGui.QPainter()
painter.begin(printer)
painter.drawImage(paintRect, image)
painter.end()
#now the page gets printed out and the image should fit the paper. 
```

# android - 由于通知中支持滑动清除哪个 Android 版本？

> ID：16191907
> 
> 赞同：0
> 
> 时间：2013-04-24T12:19:53.097
> 
> 标签：android, notifications, sharedpreferences

我的应用程序有一个首选项，它与用户滑动通知时发生的情况有关。

但是，如果正在使用的 Android 版本不支持滑动清除通知，我想删除该项目（因为向用户显示无用的偏好是没有意义的）。因此，我需要在运行时确定它是否受支持。

**从哪个 API 版本开始，此功能包含在股票 android 中？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:30:29.333

> 如果正在使用的 Android 版本不支持滑动清除通知，我想删除该项目（因为向用户显示无用的偏好是没有意义的）。

在所有以前版本的 android 中，都有一个**清除所有通知**的选项 ，

如果您打算清除特定通知，那么我同意您的看法。

然而 android 从**Ice Cream Sandwich**版本中引入了该功能

请参阅此链接以获取更多信息[http://developer.android.com/about/versions/android-4.0-highlights.html](http://developer.android.com/about/versions/android-4.0-highlights.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:23:18.953

此功能包含在 Android 4.0 ICS API 14 中。

# javascript - 我想在 javascript 中创建选择标签，我想从我的数据库中添加记录

> ID：16191908
> 
> 赞同：0
> 
> 时间：2013-04-24T12:19:58.997
> 
> 标签：javascript, html, javascript-events

*以下代码创建选择标签。我在这里创建选项。并为其赋值。实际上我想将我所有的“grad_id”添加到数据库中的选择下拉列表中。但是在 javascript 中。*

```
var gradeSelect=document.createElement('Select');
gradeSelect.id="grade[]";
gradeSelect.name="grade[]";

var opt1=document.createElement('option');
opt1.value="obj";
opt1.textContent="obj";

gradeSelect.appendChild(opt1); 
```

*在“obj”的地方，我想从数据库中添加 id。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:01:18.640

请注意，javascript 在客户端的浏览器中执行，因此无法从那里直接访问数据库（我假设您正在谈论服务器上的传统数据库，而不是 WebSQL、LocalDB 或类似的东西。

例如，javascript*可以访问的是*[DOM](https://developer.mozilla.org/en-US/docs/DOM)。例如，您可以创建元素并将其插入 DOM（就像您在示例中所做的那样），但您也可以访问已经存在的元素。

您还可以创建[AJAX](https://developer.mozilla.org/en-US/docs/AJAX)请求。这是对服务器的异步请求，您可以使用它来获取所需的数据。

但是，您选择访问您的数据库，如果没有一些服务器端代码，您将无法管理。看到您的问题，尚不清楚您使用什么技术来生成 html（PHP.ASP、JSP、Ruby 等...）。但无论你使用什么模式，它仍然是平常的：

1.  **创建一个**从中获取数据的页面。该页面应该是**XML**或**[JSON](https://developer.mozilla.org/en-US/docs/JSON)**（或在非常基本的情况下为 HTML），并且只包含您想从服务器获取的数据。
2.  在客户端 (javascript)上，为您在上一步中创建的页面**创建 AJAX 请求。**通过这种方式，您可以将所需的数据发送到 javascript，在那里您可以使用它做任何您想做的事情。
3.  最后转换和使用数据。

假设您能够执行前两个步骤，并且您将数据保存在（例如）[JSON](https://developer.mozilla.org/en-US/docs/JSON)中。你有一个包含 JSON 字符串的变量。像这样：

```
var response = '[ { "id": 1, "text": "First" }, { "id": 2, "text": "Second" } ]'; 
```

你不需要像这样输入它，你从服务器上得到它。

该怎么办？[从中创建一个 javascript 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)：

```
var responseObj = JSON.parse(response); 
```

这将返回一个对象，该对象是一个包含 id 和 text 属性的 2 个对象的数组。

然后循环遍历它：

```
var gradeSelect=document.createElement('Select');
gradeSelect.id="grade[]";
gradeSelect.name="grade[]";

for (var i = 0; i < responseObj.length; i++) {
    var current = responseObj[i];
    var opt=document.createElement('option');

    opt.value = current.id;
    opt.textContent = current.text;

    gradeSelect.appendChild(opt);
} 
```

随意在[MDN 门户](https://developer.mozilla.org/en-US/)中浏览，您可以从中学到很多东西。

这是你要找的吗？

* * *

**编辑**：

查看您的示例，您只需要来自服务器的 ID：

```
var response = '[ 1, 2, 3, 5, 10, 20, 1000 ]';
var responseObj = JSON.parse(response); // Will return a list of numbers 
```

接着：

```
var gradeSelect=document.createElement('Select');
gradeSelect.id="grade[]";
gradeSelect.name="grade[]";

for (var i = 0; i < responseObj.length; i++) {
    var current = responseObj[i];
    var opt=document.createElement('option');

    opt.value = current;
    opt.textContent = current

    gradeSelect.appendChild(opt);
} 
```

* * *

**编辑2**：

另一种方法是将值呈现到原始响应中。这样就不需要额外的 ajax 请求。

如果我正确理解您的评论，您正在做这样的事情：

```
<html>
<head>
    ...
</head>
<body>
    ...
    <div id="hidden_container">
        <input type="hidden" class="grade_id" value="1" />
        <input type="hidden" class="grade_id" value="2" />
        <input type="hidden" class="grade_id" value="3" />
        <input type="hidden" class="grade_id" value="4" />
    </div>
</body>
</html> 
```

请注意，我已经使用具有 ID 的容器 div 包装了隐藏字段。这将帮助我选择内容。

现在您需要解析这些输入并将它们转换为数字数组。

```
var inputs = document.getElementById('hidden_container').getElementsByTagName('input');
var numbers = [];    

for (int i = 0; i < inputs.length; i++) {
    numbers.push(inputs[i].value);
} 
```

`numbers`变量是一个数字数组。如果你检查我上面的代码，你可以使用这个变量代替`responseObj`，你就完成了。

这种方法的问题是为什么你一开始没有通过 php 呈现选项。如果您可以渲染隐藏字段，您也可以渲染选择选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:54:58.080

看看这个例子。我想它会帮助你！

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

# html - 页眉始终位于顶部，页脚始终位于底部

> ID：16191910
> 
> 赞同：0
> 
> 时间：2013-04-24T12:20:07.197
> 
> 标签：html, css

基本上我试图让我的页眉固定在页面的顶部，同时我还需要我的页脚必须在页面的底部，无论内容是少还是多。但我不希望我的页脚位置修复。因此，当有大量数据页脚移动时。如果我不修复标题，我现在使用的代码会很好用。

```
<body>
<div id="header">header</div>
<div id="content">content</div>
<div id="footer">footer</div>
</body> 
```

为此的CSS是

```
 *{ margin:0px; padding:0px;}
    html{
    margin:0;
    padding:0;
    height:100%;
    }
    body {
    min-height:100%;
    position:relative;
    }
    #header {
    padding:10px;
    background:#5ee;
    }
#content {
    padding:10px;
    padding-bottom:80px;   /* Height of the footer element */
}
#footer {
    width:100%;
    height:80px;
    position:absolute;
    bottom:0;
    left:0;
    background:#ee5;
} 
```

这是代码，我还没有修复我的标题，但我需要一些帮助来修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:23:10.727

您正在寻找的是专门称为“粘性页脚”。

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:30:28.007

如果我理解你的话，在我看来你是在寻找一个粘性标题。尝试用以下替换您的两条规则

```
 #header{
        background: none repeat scroll 0 0 #55EEEE;
        padding: 10px;
        position: fixed;
        top: 0;
        width: 100%;
     }
     #content{
        background: none repeat scroll 0 0 #FF0000;
        color: #FFFFFF;
        height: 2000px;
        margin: 40px 0 0;
        padding: 10px 10px 80px;
     } 
```

这是更改`#content`高度影响页脚位置但不影响页眉的[演示。](http://jsfiddle.net/U5pDm/)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-24T12:21:50.063

用这个

```
position:fixed; 
```

对于您的标题。

至于页脚 - 使用这个[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# java - 悬停菜单选择在 IE 中不起作用

> ID：16191912
> 
> 赞同：0
> 
> 时间：2013-04-24T12:20:10.590
> 
> 标签：java, drop-down-menu, selenium, menu, menuitem

我正在使用以下功能将鼠标悬停在菜单上并选择一个子项。它在 Firefox 和 Chrome 中运行良好，但在 IE 中似乎不起作用。在 IE WebDriver 中可以定位到'source'元素和'destination'元素，但是点击不是在'destination'元素上。（“源”元素上的悬停按预期完成，“目标”元素被显示。“目标”元素也被突出显示，但 WebDriver 无法单击该项目）

```
public synchronized void mouseHoverOverMenuSelect(String SourceDisplayName, String DestinationDisplayName) {
    Actions builder = new Actions(ex.driver);
    WebElement source = getElement(SourceDisplayName);
    Action mouseHoverover = builder.moveToElement(source).build();    
    mouseHoverover.perform();
    WebElement destination = getElement(DestinationDisplayName);    
    mouseHoverover = builder.moveToElement(source).click(rm.element).release().build();    
    mouseHoverover.perform();
} 
```

Selenium 独立版本：2.31.0

IEDriverServer 版本：2.25.2 到 2.32.3

平台：Windows 7

IE浏览器版本：9.0.8112.16421

请让我知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:49:02.847

上述函数中使用了以下元素：

```
WebElement source = xpath(.//*[@id='Support']/span/a)
WebElement destination = linkText(Education Center) 
```

菜单周围的 HTML 如下：

```
<UL id=mainMenu class=nav sizcache="6" sizset="0">
    <LI id=Support onselectstart="return false;" onmouseover='setTimeout(function (){setBlocker("subMenuOfSupport")},10)' onmouseout=removeBlocker(); onmouseleave=removeBlocker(); onclick="javascript:activeMenu('Support');" ; valign="center" sizcache="6" sizset="12" jQuery1366868215713="18">
        <SPAN align="center" sizcache="6" sizset="12">
            <A onselectstart="return false;" onclick="showPage('Support');" target=contentMain>
                <P style="WIDTH: 59px">Support&nbsp;</P>
                <P class=down-arrow></P>
            </A>
        </SPAN>
        <UL style="Z-INDEX: 1000; MARGIN: 38px 0px 0px -77px; DISPLAY: none" id=subMenuOfSupport sizcache="6" sizset="13" jQuery1366868215713="5">
            <LI id="Education Center" onselectstart="return false;" class="last active" sizcache="6" sizset="13" jQuery1366868215713="19">
                <A style="HEIGHT: 10px" onselectstart="return false;" onclick="showSearchCriteria('Education Center','educationCenter','subMenuOfSupport');" target=contentMain>Education Center</A>
            </LI>
        </UL>
    </LI>
</UL> 
```

# python - python GTK：包含应用程序正在关闭的信息的对话框

> ID：16191916
> 
> 赞同：0
> 
> 时间：2013-04-24T12:20:25.893
> 
> 标签：python, pygtk

我有个问题

我关闭的应用程序必须从 Web 应用程序中注销。这需要一些时间。我想通过“注销”信息通知用户

```
class Belt(gtk.Window):

def __init__(self):
    super(Belt, self).__init__()
    self.connect("destroy", self.destroy)

def destroy(self, widget, data=None):
    if self.isLogged:
        md = gtk.MessageDialog(None, gtk.DIALOG_MODAL | gtk.DIALOG_DESTROY_WITH_PARENT, ico, gtk.BUTTONS_NONE, txt)
        md.showall()
        self.send('users/logout.json', {}, False, False)
    gtk.main_quit()

def main(self):
    if self.iniError is False:
        gtk.gdk.threads_init()
        gtk.gdk.threads_enter()
        gtk.main()
        gtk.gdk.threads_leave()

if __name__ == "__main__":
    app = Belt()
    app.main() 
```

当我尝试在销毁方法中显示对话框时，只会出现窗口，没有图标和文本。我想，这个对话框没有确认按钮，只有信息，并且对话框必须与所有应用程序一起销毁。

有任何想法吗？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:31:14.940

基本上，GTK 必须有机会一直处理事件队列。如果其他一些处理需要很长时间并且在此期间没有处理事件队列，您的应用程序将变得无响应。这通常不是您想要的，因为它可能会导致您的窗口无法更新、保持灰色、出现奇怪的伪影或其他类型的可见故障。它甚至可能导致您的窗口系统使窗口变灰并提供终止可能已冻结的应用程序。

解决方案是确保正在处理事件队列。有两种主要方法可以做到这一点。如果需要很长时间的部分包含许多增量步骤，您可以自己定期处理队列：

```
def this_takes_really_long():
    for _ in range(10000):
        do_some_more_work()
        while gtk.events_pending():
            gtk.main_iteration() 
```

在一般情况下，您将不得不求助于某种异步处理。典型的方法是将阻塞部分放入自己的线程中，然后通过空闲回调向主线程（位于主循环中）发出信号。在您的代码中，它可能看起来像这样：

```
from threading import Thread

import gtk, gobject

class Belt(gtk.Window):

    def __init__(self):
        super(Belt, self).__init__()
        self.connect("destroy", self.destroy)

        self.show_all()

        self.isLogged = True
        self.iniError = False

    def destroy(self, widget, data=None):
        if self.isLogged:
            md = gtk.MessageDialog(None, gtk.DIALOG_MODAL | gtk.DIALOG_DESTROY_WITH_PARENT, 0, gtk.BUTTONS_NONE, "Text")
            md.show_all()
            Thread(target=self._this_takes_very_long).start()

    def main(self):
        if self.iniError is False:
            gtk.gdk.threads_init()
            gtk.gdk.threads_enter()
            gtk.main()
            gtk.gdk.threads_leave()

    def _this_takes_very_long(self):
        self.send('users/logout.json', {}, False, False)
        gobject.idle_add(gtk.main_quit)

if __name__ == "__main__":
    app = Belt()
    app.main() 
```

# magento - Magento 自定义选项在将产品添加到购物车时不保存错误数据

> ID：16191923
> 
> 赞同：0
> 
> 时间：2013-04-24T12:21:04.483
> 
> 标签：magento, error-handling, product, options

我在 Magento 1.7 上工作。我在每个产品中都设置了自定义选项。

我的问题是当我客户在产品的文件上传选项中上传文件时，如果该文件是不允许的文件类型，那么 Magneto 会针对该问题触发错误。这样做时，当页面重新加载时，它不会保存客户在其他自定义选项中输入或选择的内容，并且客户必须再次感受一切。

您可以在此处查看[http://www.patternroom.com.au/test.html](http://www.patternroom.com.au/test.html) 如果您在文件上传选项之一中上传“*.txt”文件，您将收到错误消息，同时您将丢失所有数据您之前输入的。最终，您必须再次输入所有内容。

在出现此类验证错误的情况下如何保存自定义选项数据的任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:20:27.737

使用 javascript 检查，以便在表单发布之前进行验证。默认情况下，它遵循模型检查。对于该表格，请张贴

# django - 登录成功或失败时，Django 社交身份验证返回 json

> ID：16191924
> 
> 赞同：0
> 
> 时间：2013-04-24T12:21:09.950
> 
> 标签：django, json, facebook, django-socialauth

我对 django 很陌生，我正在编写一个应用程序，我想尽可能地将客户端和服务器端分开，以便多个客户端可以访问我的服务器端功能。

现在我正在使用 Django 社交身份验证和 Facebook 登录。我不想在登录成功或失败时重定向到另一个页面，而是希望返回 json 成功或失败。这可能吗？

# asp.net - UpdatePanel 中的 HTML5 属性“必需”，不起作用（asp.net 4）

> ID：16191926
> 
> 赞同：0
> 
> 时间：2013-04-24T12:21:22.830
> 
> 标签：asp.net, html, updatepanel

在我的 .aspx 文件中，我有一个带有一些文本框和一个按钮的 UpdatePanel。如果我将“必需”属性添加到文本框，回发将停止工作。我可以在 Firebug 中看到它根本没有发布。如果我删除“require”属性，它就会正常工作。我在这里做错了什么，还是一种解决方法？

更新面板的代码：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <%# GetComments (DataBinder.Eval(Container, "DataItem.id")) %>
        <div class="contact_form">
            <ul>
                <li>
                    <h2>Skriv en kommentar til oss!</h2>
                </li>
                <li>
                    <asp:TextBox ID="txtName" runat="server" CssClass="txtBox" placeholder="Ditt navn" required  />
                    <span class="form_hint">Ditt navn skal stå her</span>
                </li>
                <li>
                    <asp:TextBox ID="txtCaptcha" runat="server" CssClass="txtBox" required placeholder="Skriv resultatet av 10 pluss 6 her" />
                    <span class="form_hint">Du klarer vel å regne ut 10+6? :-)</span>
                </li>
                <li>
                    <asp:TextBox ID="txtComment" runat="server" TextMode="MultiLine" required placeholder="Din kommentar"  />
                </li>                                                                        
                <li>
                    <asp:Button ID="cmdSaveComment" CssClass="button" runat="server" CommandName="SaveComment" CommandArgument='<%# Eval("id")%>' Text="Puliser kommentar" />
                </li>                                                                        
            </ul>
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:38:42.810

我想你不会出错。因此，**如果指定了[必填](http://www.html5tutorial.info/html5-required.php)字段，则必须在提交表单之前填写输入字段**。

尝试在文本框中给出一些值。

**编辑**

不过，我应该提到我之前的回答作为评论。但是，这似乎是[此处](http://asphtml5.codeplex.com/wikipage?title=Using%20HTML5%20input%20controls%20in%20UpdatePanel)提到的错误。

# android - 如何在保持子项原始比例的同时缩放布局

> ID：16191932
> 
> 赞同：3
> 
> 时间：2013-04-24T12:21:43.187
> 
> 标签：android, animation, scale

我可以将布局（例如 LinearLayout）从 0.5 缩放到 1.0，同时保持布局内 TextView 的大小和位置为 1.0 在整个转换过程中（溢出部分应该隐藏）？

我看到 IOS 中的比例动画保持儿童的比例，我如何在 Android 中实现这一点？

另外，在开始动画时，动画块的父布局已经为其腾出空间，但是在IOS中，父级在动画期间逐渐腾出空间，我是否可以选择在Android中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T09:03:53.353

这可以通过 Property Animation API 轻松完成。

还没有在 LinearLayout 上尝试过，但是如果视图子级的“layout_width”和“layout_height”正确排序，您可以使用 ValueAnimator 类通过 LayoutParams.width 和高度来缩放父视图。

唯一的挫折是 API 11 及更高版本。

# android - 如何动画两个图像视图从中心到彼此相对？

> ID：16191948
> 
> 赞同：2
> 
> 时间：2013-04-24T12:22:49.090
> 
> 标签：android, animation

我想将两个图像从屏幕中间设置为彼此相对的动画。如下图。

![在此处输入图像描述](https://i.stack.imgur.com/dcJyV.png)

到目前为止我所做的一切都是现在我只能从左到右为一个图像设置动画，反之亦然，但现在我想从中间为它们设置动画。

这是我的代码：

```
b1 = (Button) findViewById(R.id.button1);
        logo = (ImageView) findViewById(R.id.imageView1);

        Display display = getWindowManager().getDefaultDisplay();
        width = display.getWidth();
        final Animation posX = new TranslateAnimation(0, width - 50, 0, 0);
        posX.setDuration(1500);
        posX.setFillAfter(true);

        b1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                logo.startAnimation(posX);
                logo.setVisibility(View.VISIBLE);
            }
        }); 
```

**编辑：**

```
<RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="40dp"
        android:background="@drawable/set_user_profile_back"
        android:paddingLeft="10dp"
        android:paddingRight="10dp" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="50dp"
            android:contentDescription="@string/hello_world"
            android:src="@drawable/prev_btn" />

        <ImageView
            android:id="@+id/ImageView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView1"
            android:contentDescription="@string/hello_world"
            android:src="@drawable/next_btn" />
    </RelativeLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:32:36.037

```
 ImageView img1 = findViewById(R.id.img1);
    ImageView img2 = findViewById(R.id.img2);

        Animation img1_Anim = AnimationUtils.loadAnimation(this,
                R.anim.img1_animation);
        img1_Anim.setAnimationListener(AnimationListener);
        img1.startAnimation(img1_Anim);

Animation img2_Anim = AnimationUtils.loadAnimation(this,
                R.anim.img2_animation);
        img2_Anim.setAnimationListener(AnimationListener);
        img2.startAnimation(img2_Anim);

    private AnimationListener AnimationListener = new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {

            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {

            }
        }; 
```

**img1_animation**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true" >

    <translate
        android:duration="500"
        android:fromXDelta="50%"
        android:toXDelta="0%" />

</set> 
```

**img2_animation**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true" >

    <translate
        android:duration="500"
        android:fromXDelta="50%"
        android:toXDelta="100%" />

</set> 
```

# javascript - 在叶子节点上设置点击事件

> ID：16191951
> 
> 赞同：0
> 
> 时间：2013-04-24T12:22:54.570
> 
> 标签：javascript, xslt

我有这种类型的 html :-

```
<ul>
  <li>Activities<ul>
      <li>Physical1<ul>
          <li>Cricket<ul>
              <li>One Day</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Test1<ul>
          <li>Test At Abc</li>
        </ul>
      </li>
      <li>Test2<ul>
          <li>Test At Xyz</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<br> 
```

这是我加载 xml 文件和 xslt 的完整代码。并使用 xslt 获取 ul li 列表。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>Untitled Page</title>
    <script>
        var xml = loadXMLDoc("abc.xml");
        var xsl = loadXMLDoc("a.xsl");

        function loadXMLDocActiveX(location) {
            var doc = new ActiveXObject("MSXML2.FreeThreadedDOMDocument");
            doc.async = false;
            doc.load(location);
            return doc;
        }

        function loadXMLDocOther(location) {
            xhttp = new XMLHttpRequest();
            xhttp.open("GET", location, false);
            xhttp.send("");
            return xhttp.responseXML;
        }

        function loadXMLDoc(dname) {
            if (window.ActiveXObject) {
                return loadXMLDocActiveX(dname);
            }
            else if (window.XMLHttpRequest) {
                return loadXMLDocOther(dname);
            }
        }

        function transformActiveX(xml, xsl, target, selected) {
            var transform = new ActiveXObject("MSXML2.XSLTemplate");
            transform.stylesheet = xsl;
            var processor = transform.createProcessor();
            processor.input = xml;

            if (selected) {
                processor.addParameter("selected", selected);
            }

            processor.transform();
            target.innerHTML = processor.output;
        }

        function transformOther(xml, xsl, target, selected) {
            var xsltProcessor = new XSLTProcessor();
            xsltProcessor.importStylesheet(xsl);

            if (selected) {
                xsltProcessor.setParameter(null, "selected", selected);
            }

            var resultDocument = xsltProcessor.transformToFragment(xml, document);
            target.innerHTML = "";
            target.appendChild(resultDocument);
        }

        function displayResult() {
            var targetElement = document.getElementById("load");

            // code for IE
            if (window.ActiveXObject) {
                transformActiveX(xml, xsl, targetElement);
            }
            // code for Mozilla, Firefox, Opera, etc.
            else if (document.implementation && 
                     document.implementation.createDocument) {
                transformOther(xml, xsl, targetElement);
            }
        }
    </script>
</head>
<body onload="displayResult()">
    <div id="load">
    </div>
</body>
</html> 
```

我想在单击叶节点时设置单击叶​​节点，其文本设置在我的 `<div id="result"/>` 例如：-单击`One Day`其最后一个没有子节点的子节点，然后将其文本复制到`div`标签中。
它怎么可能......我认为它与jquery函数点击一起工作。
谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:31:42.900

听起来你需要修改 HTML，无论如何试试这个：

[工作演示](http://jsfiddle.net/7xZTZ/1/)

```
$('li:not(:has(*))').click(function(){
     $('#result').text($(this).text());
});

<div id="result"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:26:14.810

这将选择所有没有孩子的 li。然后只需附加点击事件。（假设有效的 HTML）

```
$('li:not(:has(*))').click(.....) 
```

# css - 图像未正确调整大小

> ID：16191966
> 
> 赞同：1
> 
> 时间：2013-04-24T12:23:30.320
> 
> 标签：css

一位使用 Tor 浏览器的朋友说，对他来说，调整图像大小是不对的。检查找不到错误。对我来说还可以。本站使用skeleton.css [http://euphonia.com.br/](http://euphonia.com.br/)

图片：[http ://euphonia.com.br/?attachment_id=80](http://euphonia.com.br/?attachment_id=80)

由于我不想留下这个错误，有谁知道如何修复？感谢关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:35:19.903

这可能不起作用的原因有很多。第一个也是最基本的可能只是您的朋友使用不同的浏览器（我认为是带有 Tor 的 Firefox），因此 CSS 呈现不同。

使用 Chrome 查看后，运行 Tor 没有问题，所以这可能是您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:38:17.823

我认为问题在于你有一个没有约束的浮动图像，所以它可以自由溢出，并且如果并且仅当 Tor 不允许媒体查询时，它会在不同的分辨率下给你意想不到的结果......根据项目的判断是有困难。尝试使用简单的谷歌搜索“Tor 媒体查询”并阅读。

我建议要么：从响应式设计中改造整个网站，要么：告诉 Tor 人他们需要处理它。您的博客有哪些潜在的 Tor 驱动流量？1？2个人？恐怕还不够操心。

# html - 从您的 Web 服务建议本机应用程序

> ID：16191970
> 
> 赞同：2
> 
> 时间：2013-04-24T12:23:46.337
> 
> 标签：html, ios, iphone, safari

我前段时间在 Apple Keynote 中看到他们将实施（或已经实施）一项功能，允许您从 Web 服务内部推广您的本地应用程序。

如果我没记错的话，给出的例子是一个餐厅餐桌预订系统。当您进入网络服务预订餐桌时，浏览器会询问您是否不想使用来自同一服务提供商的本机应用程序进行预订，该应用程序可在 App Store 中找到。如果您选择这样做，那么手机将下载本机应用程序并为您打开它。

这个功能有实现吗？我在任何地方都找不到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:29:40.980

Apple 在 iOS 6 中添加了一个特殊的横幅，您可以将其添加到您的移动站点。此横幅将放置在您网站的顶部。横幅将检测应用程序是否已安装，并允许用户打开或下载应用程序。

[您将在使用应用横幅推广应用](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)中找到所需的一切

# html - 将图像内容保存在 html 文件中

> ID：16191974
> 
> 赞同：5
> 
> 时间：2013-04-24T12:23:57.417
> 
> 标签：html, css, image

是否可以将图像保存在html中？我想用几张图片创建 html。也许我需要用 base64 解码图像内容并将其粘贴到 html 标记中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T12:29:28.427

是的，它可能，检查这个简单的例子：http: [//jsfiddle.net/MH7gF/](http://jsfiddle.net/MH7gF/)

`<img alt="" src="data:image/png;base64(...)" />`

还有简单的[转换器](http://www.base64-image.de/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T12:27:23.473

看来您正在寻找使用 CSS 数据 URI。[http://css-tricks.com/data-uris/](http://css-tricks.com/data-uris/)您需要将图像编码为 base64 并使用 HTML 或 CSS 中的这些数据 URI 之一进行设置，因为它适用于两者。

`<img width="16" height="16" alt="star" src="data:image/gif;base64,..." />`

```
li { 
  background: url(data:image/gif;base64,...) no-repeat left center;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T12:29:15.657

您想使用图像而不需要将其上传到某个地方吗？

您可以将[Mads Kristensen 的图像用于 base64 转换器](http://webcodertools.com/imagetobase64converter)工具，该工具将返回您上传的图像的 base64。

例如，我的头像：

`<img alt="" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4gv4SUNDX1BST0ZJTEUAAQEAAAvoAAAAAAIAAABtbnRyUkdCIFhZWiAH2QADABsAFQAkAB9hY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAA9tYAAQAAAADTLQAAAAAp+D3er/JVrnhC+uTKgzkNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBkZXNjAAABRAAAAHliWFlaAAABwAAAABRiVFJDAAAB1AAACAxkbWRkAAAJ4AAAAIhnWFlaAAAKaAAAABRnVFJDAAAB1AAACAxsdW1pAAAKfAAAABRtZWFzAAAKkAAAACRia3B0AAAKtAAAABRyWFlaAAAKyAAAABRyVFJDAAAB1AAACAx0ZWNoAAAK3AAAAAx2dWVkAAAK6AAAAId3dHB0AAALcAAAABRjcHJ0AAALhAAAADdjaGFkAAALvAAAACxkZXNjAAAAAAAAAB9zUkdCIElFQzYxOTY2LTItMSBibGFjayBzY2FsZWQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAACSgAAAPhAAAts9jdXJ2AAAAAAAABAAAAAAFAAoADwAUABkAHgAjACgALQAyADcAOwBAAEUASgBPAFQAWQBeAGMAaABtAHIAdwB8AIEAhgCLAJAAlQCaAJ8ApACpAK4AsgC3ALwAwQDGAMsA0ADVANsA4ADlAOsA8AD2APsBAQEHAQ0BEwEZAR8BJQErATIBOAE+AUUBTAFSAVkBYAFnAW4BdQF8AYMBiwGSAZoBoQGpAbEBuQHBAckB0QHZAeEB6QHyAfoCAwIMAhQCHQImAi8COAJBAksCVAJdAmcCcQJ6AoQCjgKYAqICrAK2AsECywLVAuAC6wL1AwADCwMWAyEDLQM4A0MDTwNaA2YDcgN+A4oDlgOiA64DugPHA9MD4APsA/kEBgQTBCAELQQ7BEgEVQRjBHEEfgSMBJoEqAS2BMQE0wThBPAE/gUNBRwFKwU6BUkFWAVnBXcFhgWWBaYFtQXFBdUF5QX2BgYGFgYnBjcGSAZZBmoGewaMBp0GrwbABtEG4wb1BwcHGQcrBz0HTwdhB3QHhgeZB6wHvwfSB+UH+AgLCB8IMghGCFoIbgiCCJYIqgi+CNII5wj7CRAJJQk6CU8JZAl5CY8JpAm6Cc8J5Qn7ChEKJwo9ClQKagqBCpgKrgrFCtwK8wsLCyILOQtRC2kLgAuYC7ALyAvhC/kMEgwqDEMMXAx1DI4MpwzADNkM8w0NDSYNQA1aDXQNjg2pDcMN3g34DhMOLg5JDmQOfw6bDrYO0g7uDwkPJQ9BD14Peg+WD7MPzw/sEAkQJhBDEGEQfhCbELkQ1xD1ERMRMRFPEW0RjBGqEckR6BIHEiYSRRJkEoQSoxLDEuMTAxMjE0MTYxODE6QTxRPlFAYUJxRJFGoUixStFM4U8BUSFTQVVhV4FZsVvRXgFgMWJhZJFmwWjxayFtYW+hcdF0EXZReJF64X0hf3GBsYQBhlGIoYrxjVGPoZIBlFGWsZkRm3Gd0aBBoqGlEadxqeGsUa7BsUGzsbYxuKG7Ib2hwCHCocUhx7HKMczBz1HR4dRx1wHZkdwx3sHhYeQB5qHpQevh7pHxMfPh9pH5Qfvx/qIBUgQSBsIJggxCDwIRwhSCF1IaEhziH7IiciVSKCIq8i3SMKIzgjZiOUI8Ij8CQfJE0kfCSrJNolCSU4JWgllyXHJfcmJyZXJocmtyboJxgnSSd6J6sn3CgNKD8ocSiiKNQpBik4KWspnSnQKgIqNSpoKpsqzysCKzYraSudK9EsBSw5LG4soizXLQwtQS12Last4S4WLkwugi63Lu4vJC9aL5Evxy/+MDUwbDCkMNsxEjFKMYIxujHyMioyYzKbMtQzDTNGM38zuDPxNCs0ZTSeNNg1EzVNNYc1wjX9Njc2cjauNuk3JDdgN5w31zgUOFA4jDjIOQU5Qjl/Obw5+To2OnQ6sjrvOy07azuqO+g8JzxlPKQ84z0iPWE9oT3gPiA+YD6gPuA/IT9hP6I/4kAjQGRApkDnQSlBakGsQe5CMEJyQrVC90M6Q31DwEQDREdEikTORRJFVUWaRd5GIkZnRqtG8Ec1R3tHwEgFSEtIkUjXSR1JY0mpSfBKN0p9SsRLDEtTS5pL4kwqTHJMuk0CTUpNk03cTiVObk63TwBPSU+TT91QJ1BxULtRBlFQUZtR5lIxUnxSx1MTU19TqlP2VEJUj1TbVShVdVXCVg9WXFapVvdXRFeSV+BYL1h9WMtZGllpWbhaB1pWWqZa9VtFW5Vb5Vw1XIZc1l0nXXhdyV4aXmxevV8PX2Ffs2AFYFdgqmD8YU9homH1YklinGLwY0Njl2PrZEBklGTpZT1lkmXnZj1mkmboZz1nk2fpaD9olmjsaUNpmmnxakhqn2r3a09rp2v/bFdsr20IbWBtuW4SbmtuxG8eb3hv0XArcIZw4HE6cZVx8HJLcqZzAXNdc7h0FHRwdMx1KHWFdeF2Pnabdvh3VnezeBF4bnjMeSp5iXnnekZ6pXsEe2N7wnwhfIF84X1BfaF+AX5ifsJ/I3+Ef+WAR4CogQqBa4HNgjCCkoL0g1eDuoQdhICE44VHhauGDoZyhteHO4efiASIaYjOiTOJmYn+imSKyoswi5aL/IxjjMqNMY2Yjf+OZo7OjzaPnpAGkG6Q1pE/kaiSEZJ6kuOTTZO2lCCUipT0lV+VyZY0lp+XCpd1l+CYTJi4mSSZkJn8mmia1ZtCm6+cHJyJnPedZJ3SnkCerp8dn4uf+qBpoNihR6G2oiailqMGo3aj5qRWpMelOKWpphqmi6b9p26n4KhSqMSpN6mpqhyqj6sCq3Wr6axcrNCtRK24ri2uoa8Wr4uwALB1sOqxYLHWskuywrM4s660JbSctRO1irYBtnm28Ldot+C4WbjRuUq5wro7urW7LrunvCG8m70VvY++Cr6Evv+/er/1wHDA7MFnwePCX8Lbw1jD1MRRxM7FS8XIxkbGw8dBx7/IPci8yTrJuco4yrfLNsu2zDXMtc01zbXONs62zzfPuNA50LrRPNG+0j/SwdNE08bUSdTL1U7V0dZV1tjXXNfg2GTY6Nls2fHadtr724DcBdyK3RDdlt4c3qLfKd+v4DbgveFE4cziU+Lb42Pj6+Rz5PzlhOYN5pbnH+ep6DLovOlG6dDqW+rl63Dr++yG7RHtnO4o7rTvQO/M8Fjw5fFy8f/yjPMZ86f0NPTC9VD13vZt9vv3ivgZ+Kj5OPnH+lf65/t3/Af8mP0p/br+S/7c/23//2Rlc2MAAAAAAAAALklFQyA2MTk2Ni0yLTEgRGVmYXVsdCBSR0IgQ29sb3VyIFNwYWNlIC0gc1JHQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAAAABQAAAAAAAAbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWFlaIAAAAAAAAAMWAAADMwAAAqRYWVogAAAAAAAAb6IAADj1AAADkHNpZyAAAAAAQ1JUIGRlc2MAAAAAAAAALVJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUMgNjE5NjYtMi0xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLXRleHQAAAAAQ29weXJpZ2h0IEludGVybmF0aW9uYWwgQ29sb3IgQ29uc29ydGl1bSwgMjAwOQAAc2YzMgAAAAAAAQxEAAAF3///8yYAAAeUAAD9j///+6H///2iAAAD2wAAwHX/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCABJAEkDASIAAhEBAxEB/8QAHAAAAgMAAwEAAAAAAAAAAAAABQYEBwgBAgMA/8QAOBAAAQMDAgMECAUDBQAAAAAAAQIDBAAFERIhBjFBBxNRYQgUIjIzcYGRUnKhscEj0fAVFkJlkv/EABoBAAIDAQEAAAAAAAAAAAAAAAMFBAYHAQL/xAAoEQACAgIBAwMDBQAAAAAAAAABAgADBBExBRIhBhNRIkHBFDSRsfD/2gAMAwEAAhEDEQA/AOnbKA7wxdgOfqq/4rK0JCS5Hzz7v+9ah7U1lzhy6gHnFXWZYCPaYPL2N/1qqenh24xH+4jHqB3YDDNrQtMp55sEFtba9QHukDY/fFXh2R3q2v8AFLXEHGF4bW7CQUQkvAAlaj72w6b/AFNU7w+6tiQ+pso9oJSrPIjFPUW3SI3Dbb7tiXJVIVlp04ylPLlzOelMsisWAqZ4wx9YPxNUsXuDOa7+PJbUz0UFbUQiy47qP6TwJA6GqFvdiunD/Z9ClPOOwe9SFOslWVN55Z+mKSbDxZe4chSoF9dOFbod3B/tVYHSBcGNb8GWWzIRdAiammzksH2l5FVn2x3qI9wlLhuLTreGBk+dC7Jx1Iu7HqlwSG5gGQpPurHl50ndps8se+SUrTlORt51Hw+mumSBZyDD3W1jHLLFDhsuruTSHHO8KDgHrpwcU56VeBpA4Flqfv8AgIOACcnrVjd4fw1ZcnavqVlT3CFX4b/GU64cO2VIkyhFUl5QOG2MjA1q5DfpuaV7Z6NXFzkh1MmfaoyY6BoX3ql96TnlgbDzNW/wYuFwdZfVI8RluY9hyUtP/Nfn8s4pngccQjhuQkpWrw5VWl6jfjEpjj6fn8xoemm1Q9nMz/wr2DcYuXph27R40W3IkhLw9ZGt9CeejGefLJxzq5LpxHZrBLTHnW1llyOE/wBFATltA2B+W21P5mRnbekpdRuoKTv1zVOdu8JtziyA96kJDctrLiEOBCyUbfXZXLyo1PUX6jcK7vHg8Q2LQMbYVefmMs2ZauKrfofcbdiTRpGFbiq1uvYnLaluLtzjTjKjlLpVpWB5+Nc8Enh2xvyyJLzanTpYTIODHPMhQ6E/i605p4z7losvEZAxnoaIq5GExGOTo/MmOKckAOACIp2Ls+uttcSuZJbIa3GDkmkvt1UUSoERrLi9CspQMk5OP4qyrxxalDKlawhCvOq+jRpnE/ECZkdlb6NYa1FJwEA+0dXTJz9qlYj3+771/Agr6kav2a+TFbgOzzrXM764xXGFPt62wrfKPpTtrHnXnxAYETiZVrt6tXqwUXiD7KVqx7A+QG58SfCuNavwipb2m3Tt94pyKFpsNanwIyXi9FyUtwq64A8qCSLstSwpKyKKcR8PympCyhs6TvSbelGASHlAEClmIlbgdsZ3F05jIxxRMiOtLS+tSkHIBUSD9KB9pV9l8RyIM2bIQ2uKhXctJJycnc/XH6UtJvMfWcOo1HllQ2oXeoc2XKM2NcmXEkABvVpxjoDTvHwUSwPrR+Yuty2K9o8xgfuDBh+rygFPbBsq3UM9M+FTpd/C1JZYye7GkknOcVXdxkT46hJlR1BCNtSVBXlvihj98klSvVwUpVsTjApkMIN5kNs0qfMc7peJEl8QWXiXHFkDfOkdSaYOE+O5VqUvhaK8llYQChxKcLXnORnxqtrRKagh2Y8sqXjHnnwqLHh3KdOTJShaH1rLjZx/m1Hr6WuT9BGx+YB+pPQO4HRP9SybK8F3mYp3IXr31c6YdSfEUhJusmAW3JkfvmnPZWFbONqHMBXPzGc1P/3JZv8Asfuml2Zg202lCOJJpyEtQMJpy4RUykErAORzFZt9I1DlukR22VqSHiScHGwrSbyyGc5wo+dZu9KFwKlW7Pgv+KqHpot+rAPEsfWl1iM0p63klC1HJ3xmvZKnA2H05ylwKwDzFdIScQhjJKicCvdZcCQ223nxrWUQFNGZ2WIaHHZER5sqWMawFEZxn50KlvwGzhlAWvwBzQwJBXjGtROAkHbNFLVb0uOF9/CWm/e0jbP4R40KrDLHQMK+TocSZY4Tkt5L8hOED3EY2pxjQlrSXErwoYxjpQM3BthgJQ2hkK2BUcnHyHP6VLjMXacGlNSBFbCTgOD2l+eOnyqw4taUjtUbMU3M1h2x1C93lR5jXqziG3iMa1+JFBf9Jh+Ln/up6ItzTtMYadxydYP7iufV1+B+1dysKvLYPYPP8TtGU+Ovah8TTTzx7o+HyrOXpKL1y4Ksctef0rRbvwD8qzn6RvxYfzV/FYZ6dAGWJq3XP2hlTQ30JYGtKlkEgAHFfS5Trq+51BCQPa09PKo8L3h+YV1HN78w/etQrsbsAmdso3CVtbOjvAMKV7LY8M0zRW2RpZK9LLSfuepNAIfw2PzD+amTfgK/OKb42lXciWDuMcbTHgElbKo619Vasn70W0aVJJ3AzjG/Slqy/CT8qZIXwk/mP7U5pIYcRdaNfedJGAghQIJqBpb/AMJqTO98/Oo1EPkzwOJ//9k=" />`

对于 CSS 是一样的：

`background-image: url(data:image/jpeg;base64,{tons of letter/numbers here});`

是的，base64 非常大。因此不要使用太多，您的 .html/css 文件也会很大。

# java - How to print a cheque through the receipt printer in Java?

> ID：16191976
> 
> 赞同：0
> 
> 时间：2013-04-24T11:20:39.963
> 
> 标签：java

I have **pos58 receipt printer**(printer made in China), this printer supports **ESC-POS Commands**. I want to print out a cheque in Java without JavaPos api. Just I don't know how do this.

Is there some way to implement it? Or what the library is? Or are there any examples of that?

Thanks for advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:44:36.467

The easiest way would be to find a way to write a text stream (or even better byte stream) to the printer (this really depends how the printer is connected COM port? USB?)

I have worked with numerous POS printers over the years and once you can get ANY text at all you should find the escape codes to handle the details of paper loading etc quite easy to manage.

# xml - 使用 Perl/LibXML 获取子元素匹配条件的 XML 父元素

> ID：16191977
> 
> 赞同：1
> 
> 时间：2013-04-24T12:24:10.057
> 
> 标签：xml, perl, xml-libxml

我正在使用 XML::LibXML（仅限于 v1.58）。感[谢博罗丁](https://stackoverflow.com/users/622310/borodin)在[这篇](https://stackoverflow.com/a/16170307/2176841)文章中我正确地获得了`PROPERTY NAME="Name"`if的值`CLASSNAME="SharedGtTranslator"`。我还想要获取`VALUE.OBJECT`包含上述内容的整个父元素，并将其输出到另一个 XML 文件。

因此，如果 XML 文件如下所示：

```
<CIM CIMVERSION="2.0" DTDVERSION="2.0">

  <DECLARATION>
    <DECLGROUP>
      <LOCALNAMESPACEPATH>
        <NAMESPACE NAME="ecm"/>
      </LOCALNAMESPACEPATH>

      <!-- Ecm -->

      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="Ecm">
          <PROPERTY NAME="FileName" TYPE="string">
            <VALUE>/opt/sign/log/ecm.log</VALUE>
          </PROPERTY>
          <PROPERTY NAME="Log" TYPE="sint32">
            <VALUE>0</VALUE>
          </PROPERTY>
          <PROPERTY NAME="Name" TYPE="string">
            <VALUE>ECM</VALUE>
          </PROPERTY>
          <PROPERTY NAME="TimerClaim" TYPE="sint32">
            <VALUE>5000</VALUE>
          </PROPERTY>
          <PROPERTY NAME="TimerConnect" TYPE="sint32">
            <VALUE>8000</VALUE>
          </PROPERTY>
          <PROPERTY NAME="TimerNegotiate" TYPE="sint32">
            <VALUE>5000</VALUE>
          </PROPERTY>
          <PROPERTY NAME="TimerReconnect" TYPE="sint32">
            <VALUE>500</VALUE>
          </PROPERTY>
        </INSTANCE>
      </VALUE.OBJECT>

      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="Ecm_Host">
          <PROPERTY.REFERENCE NAME="Parent">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="Ecm">
                <KEYBINDING NAME="Name">
                  <KEYVALUE>ECM</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
          <PROPERTY.REFERENCE NAME="Child">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="Host">
                <KEYBINDING NAME="Address">
                  <KEYVALUE>gtttcnss7v19</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
        </INSTANCE>
      </VALUE.OBJECT>

      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="Ecm_ProcessClass">
          <PROPERTY.REFERENCE NAME="Parent">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="Ecm">
                <KEYBINDING NAME="Name">
                  <KEYVALUE>ECM</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
          <PROPERTY.REFERENCE NAME="Child">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="ProcessClass">
                <KEYBINDING NAME="ClassID">
                  <KEYVALUE>3</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
        </INSTANCE>
      </VALUE.OBJECT>

      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="Ecm_ProcessClass">
          <PROPERTY.REFERENCE NAME="Parent">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="Ecm">
                <KEYBINDING NAME="Name">
                  <KEYVALUE>ECM</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
          <PROPERTY.REFERENCE NAME="Child">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="ProcessClass">
                <KEYBINDING NAME="ClassID">
                  <KEYVALUE>1</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
        </INSTANCE>
      </VALUE.OBJECT>

      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="Ecm_ProcessClass">
          <PROPERTY.REFERENCE NAME="Parent">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="Ecm">
                <KEYBINDING NAME="Name">
                  <KEYVALUE>ECM</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
          <PROPERTY.REFERENCE NAME="Child">
            <VALUE.REFERENCE>
              <INSTANCENAME CLASSNAME="ProcessClass">
                <KEYBINDING NAME="ClassID">
                  <KEYVALUE>15</KEYVALUE>
                </KEYBINDING>
              </INSTANCENAME>
            </VALUE.REFERENCE>
          </PROPERTY.REFERENCE>
        </INSTANCE>
      </VALUE.OBJECT>
      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="SharedGtTranslator">
          <QUALIFIER NAME="Configstate" TYPE="string">
            <VALUE>planned</VALUE>
          </QUALIFIER>
          <PROPERTY NAME="Name" TYPE="string">
            <VALUE>HLR$4,0,1,3,7240*-->HLR HLR LocalSPC: 410 SSN: 6</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NatureOfAddress" TYPE="sint32">
            <VALUE>3</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NetworkID" TYPE="sint32">
            <VALUE>1</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NumberSeries" TYPE="sint32">
            <VALUE>7240*</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NumberingPlan" TYPE="sint32">
            <VALUE>1</VALUE>
          </PROPERTY>
          <PROPERTY NAME="TranslationType" TYPE="sint32">
            <VALUE>0</VALUE>
          </PROPERTY>
        </INSTANCE>
      </VALUE.OBJECT>
      <VALUE.OBJECT>
        <INSTANCE CLASSNAME="SharedGtTranslator">
          <QUALIFIER NAME="Configstate" TYPE="string">
            <VALUE>planned</VALUE>
          </QUALIFIER>
          <PROPERTY NAME="Name" TYPE="string">
            <VALUE>HLR$4,0,1,3,7250*-->HLR HLR LocalSPC: 410 SSN: 6</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NatureOfAddress" TYPE="sint32">
            <VALUE>3</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NetworkID" TYPE="sint32">
            <VALUE>1</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NumberSeries" TYPE="sint32">
            <VALUE>7250*</VALUE>
          </PROPERTY>
          <PROPERTY NAME="NumberingPlan" TYPE="sint32">
            <VALUE>1</VALUE>
          </PROPERTY>
          <PROPERTY NAME="TranslationType" TYPE="sint32">
            <VALUE>0</VALUE>
          </PROPERTY>
        </INSTANCE>
      </VALUE.OBJECT>
    </DECLGROUP>

  </DECLARATION>
</CIM> 
```

新文件将仅包含以下内容：

```
<CIM>
  <DECLARATION>
    <DECLGROUP>
          <VALUE.OBJECT>
            <INSTANCE CLASSNAME="SharedGtTranslator">
              <QUALIFIER NAME="Configstate" TYPE="string">
                <VALUE>planned</VALUE>
              </QUALIFIER>
              <PROPERTY NAME="Name" TYPE="string">
                <VALUE>HLR$4,0,1,3,7240*-->HLR HLR LocalSPC: 410 SSN: 6</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NatureOfAddress" TYPE="sint32">
                <VALUE>3</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NetworkID" TYPE="sint32">
                <VALUE>1</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NumberSeries" TYPE="sint32">
                <VALUE>7240*</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NumberingPlan" TYPE="sint32">
                <VALUE>1</VALUE>
              </PROPERTY>
              <PROPERTY NAME="TranslationType" TYPE="sint32">
                <VALUE>0</VALUE>
              </PROPERTY>
            </INSTANCE>
          </VALUE.OBJECT>
          <VALUE.OBJECT>
            <INSTANCE CLASSNAME="SharedGtTranslator">
              <QUALIFIER NAME="Configstate" TYPE="string">
                <VALUE>planned</VALUE>
              </QUALIFIER>
              <PROPERTY NAME="Name" TYPE="string">
                <VALUE>HLR$4,0,1,3,7250*-->HLR HLR LocalSPC: 410 SSN: 6</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NatureOfAddress" TYPE="sint32">
                <VALUE>3</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NetworkID" TYPE="sint32">
                <VALUE>1</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NumberSeries" TYPE="sint32">
                <VALUE>7250*</VALUE>
              </PROPERTY>
              <PROPERTY NAME="NumberingPlan" TYPE="sint32">
                <VALUE>1</VALUE>
              </PROPERTY>
              <PROPERTY NAME="TranslationType" TYPE="sint32">
                <VALUE>0</VALUE>
              </PROPERTY>
            </INSTANCE>
          </VALUE.OBJECT>
    </DECLGROUP>

  </DECLARATION>
</CIM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:01:13.820

如果您需要这些`VALUE.OBJECT`结构，那么我建议您先找到这些结构，然后在其中查找`PROPERTY`为您提供名称的元素。

这段代码符合这个想法。它查找数据中所有具有属性等于的子`VALUE.OBJECT`元素的元素。对于这些元素，使用 显示整个元素的 XML，通过查找子元素，然后查找属性等于的子元素来找到并显示名称。`INSTANCE``CLASSNAME``SharedGtTranslator``toString``INSTANCE``PROPERTY``NAME``Name`

我还改变了从文件中解析数据的方式，因为你说你被一个`XML::LibXML`没有`load_xml`方法的版本卡住了。

请注意，该`findnodes`方法将始终返回节点列表，如果调用在列表上下文中，则作为 Perl 列表，如果`XML::LibXML::NodeList`在 scdalar 上下文中，则作为对象。无论 XPath 表达式有多个匹配、一个匹配还是零匹配都是如此，如果您有任何疑问，您应该在处理继续之前检查找到的节点数。

```
use strict;
use warnings;

use XML::LibXML;

my $doc = XML::LibXML->new(no_blanks => 1)->parse_file($file1);

my @value_objects = $doc->findnodes('//VALUE.OBJECT[INSTANCE[@CLASSNAME = "SharedGtTranslator"]]');

for my $value_object (@value_objects) {

  print "\n";
  print $value_object->toString(1), "\n";
  print "\n";

  my @names = $value_object->findnodes('INSTANCE/PROPERTY[@NAME = "Name"]');
  print $names[0]->textContent, "\n";
} 
```

# php - How to toggle between two methods execution on click of a same tag in CI

> ID：16191980
> 
> 赞同：1
> 
> 时间：2013-04-24T12:24:16.070
> 
> 标签：php, javascript, jquery, codeigniter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:38:17.437

Use server side session for this , anchor tag link to `index_fanme_Asc` url .

```
public function index_fname_Asc()
{
   // i didn't test .. you can change into ci session 
   if ( isset($_SESSION['hasClicked']) && $_SESSION['hasClicked'] ){

        $this->index_fname_Dsc();
        return ;
   }

   $_SESSION['hasClicked'] = true;

   $this->load->view("admin/myview1");
}

public function index_fname_Dsc()
{
     $_SESSION['hasClicked'] = false;

     $this->load->view("admin/myview2");
} 
```

hope this will works

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:33:20.937

You could easily switch between these href's by using data from the controller. For example:

```
public function index_fname_Asc()
{
  $data['sort'] = 'ASC';  
  $this->load->view("admin/myview1",$data);

}

public function index_fname_Dsc()
{
  $data['sort'] = 'DESC';  
  $this->load->view("admin/myview2");
} 
```

Then in the view:

```
if($sort == "ASC"){
 echo "<td <a href=" . site_url("// My method's Url") .">First Name</a></td>"
}else{

 //Other href
 } 
```

Hope this helps!

# excel - vba：将范围转换为公式

> ID：16191983
> 
> 赞同：0
> 
> 时间：2013-04-24T12:24:20.027
> 
> 标签：excel, vba

我想定义图表的值范围。

从名称开始，我可以使用

```
.SeriesCollection(count).name = "=Spektren!$B$1" 
```

但是“B”实际上是我保存的一个参数`col`，因此我想用 Cells 来解决这个问题。然而

```
 Sheets("Spektren").Cells(1, col)
 Sheets("Spektren").Range(Sheets("Spektren").Cells(1, col), Sheets("Spektren").Cells(1, col)) 
```

两者都插入单元格的值，而不是其公式。即使我尝试

```
Sheets("Spektren").Cells(1, col).Formular 
```

这不会改变。更糟糕的是，如果我对这些值执行此操作，则无法再显示数据。

因此，这留下了如何将众所周知的范围转换为有效的 Excel 单元格公式的基本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:57:43.923

很难找到，但终于找到了（使用`.Address`）：

```
Sheets("Spektren").Range(Sheets("Spektren").Cells(1, col), Sheets("Spektren").Cells(1, col)).Address 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:49:53.670

如果值为`col`is`B`那么这应该工作：

```
Sheets("Spektren").Range(col & "1").Formular 
```

# c# - 在多个 WPF 视口中渲染相同的模型

> ID：16191985
> 
> 赞同：1
> 
> 时间：2013-04-24T12:24:22.253
> 
> 标签：c#, wpf, multithreading, 3d, modeling

我正在开发一个有 4 个视口的 WPF 应用程序。我构建了一个相当复杂的 3D 模型，包含 50,000-100,000 个三角形。然后我想在所有 4 个视口中显示相同的 3D 模型。我这样做的方式是，模型在所有 4 个视口（实际上是 HelixViewports，来自 Helix 3D Toolkit for WPF）中显示大约需要 10 秒。我从未使用过多线程，但我认为这可能是个好主意。我需要模型在不到 2 秒的时间内在所有 4 个视口中渲染。我可能也在低效地编写我的代码，下面是一个示例。谢谢你的帮助！

渲染（）函数（C#）：

```
//Each Viewport must have it's own ModelVisual3D
        ModelVisual3D renderModel = new ModelVisual3D();
        ModelVisual3D renderModel2 = new ModelVisual3D();
        ModelVisual3D renderModel3 = new ModelVisual3D();
        ModelVisual3D renderModel4 = new ModelVisual3D();

        Model3DGroup modelGroup = new Model3DGroup();

        //Here is an example of the 2 different ways 
        //I add components to the Models:

        //Add the cylinder to the viewport 
        if (isCylinder)
        {

            //Each viewport must have its' own 
            PipeVisual3D ballBat = dO.getRound();
            PipeVisual3D ballBat2, ballBat3, ballBat4;
            ballBat2 = new PipeVisual3D();
            ballBat2.Content = ballBat.Content;
            ballBat3 = new PipeVisual3D();
            ballBat3.Content = ballBat.Content;
            ballBat4 = new PipeVisual3D();
            ballBat4.Content = ballBat.Content;

            this.mainViewport.Children.Add(ballBat);
            this.mainViewport2.Children.Add(ballBat2);
            this.mainViewport3.Children.Add(ballBat3);
            this.mainViewport4.Children.Add(ballBat4);
        }

        //OR this way:

        //Add inner top wane to the viewport
        if (isTopWane)
        {
            modelGroup.Children.Add(dO.getTopWane());

        }

        //Add inner bottom wane to the viewport
        if (isBottomWane)
        {
            modelGroup.Children.Add(dO.getBottomWane());
        }

        //Then, at the end of all my IF checks, this is how I
        //'Draw' the models into the viewports:

        //Each ModelVisual3D has the same content
        renderModel2.Content = renderModel.Content;
        renderModel3.Content = renderModel.Content;
        renderModel4.Content = renderModel.Content;

        //"Paint" the viewports
        this.mainViewport.Children.Add(renderModel);
        this.mainViewport2.Children.Add(renderModel2);
        this.mainViewport3.Children.Add(renderModel3);
        this.mainViewport4.Children.Add(renderModel4); 
```

此外，知道我正在一台配备 16GB 内存、核心 i7 处理器和 NVIDIA Quadro 3000M 显卡的笔记本电脑上测试这个应用程序可能会有所帮助。我一直在寻找加速我的应用程序的方法，并将继续这样做，如果有人有建议或可以向我指出有用的信息，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:01:40.973

为什么不将整个模型放在一个 GeometryModel3D 中？你有35000-40000个三角形，这意味着你有35000-40000个GeometryModel3D！？那是巨大的...

您应该有一个包含 Model3DGroup 的 Visual（相当于一个场景或包含多个部分的模型），其中包含与您的模型一样多的 GeometryModel3D（而不是三角形！）。每个 GeometryModel3D 包含一个 MeshGeometry3D，其中包含一个模型的所有三角形、索引、法线、uv 坐标。

# python - Python：有效地将多个对象的值收集到列表或类似中

> ID：16191992
> 
> 赞同：0
> 
> 时间：2013-04-24T12:24:45.183
> 
> 标签：python, list

我正在用 python 编写一个脚本，该脚本正在从工程软件访问结果数据库。它由几个对象组成，每个对象由 ID、类型、结果等组成。

它们都通过以下方式访问：

```
object.values[i].ID
object.values[i].result
etc. 
```

问题是，是否可以提取 ID 和结果并将它们放入两个列表中，这比使用 for 循环遍历整个对象更有效。

这是某种标准化的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:55:59.150

如果目标是在单个列表中提取两个属性，则可以使用列表推导：

```
l = [[item.ID, item.result] for item in object.values] 
```

如果您需要将它们放在两个单独的列表中，请使用手工制作的循环，或者在先前计算的结果上使用它：

```
ids, results = zip(*l) 
```

# java - 从java程序调用postgresql数据库的函数

> ID：16191994
> 
> 赞同：0
> 
> 时间：2013-04-24T12:24:49.000
> 
> 标签：java, database, arrays, postgresql, arraylist

有一个具有以下函数存根的 Postgresql 数据库

```
CREATE OR REPLACE FUNCTION net_train(terms text[], perceptron_id integer)
  RETURNS void AS
$BODY$begin
-- stub
end;$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION net_train(text[], integer)
  OWNER TO postgres; 
```

如何通过在java中调用程序将一组术语（也希望知道如何传递第二个参数）传递给这个函数？输入项数组写成

```
ArrayList<String> ProcessedTherms = new ArrayList<String>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:50:45.470

我们用ibatis做映射，不过应该是差不多的：

```
Connection conn = ps.getConnection(); //ps is prepared statement
ArrayList arr = (ArrayList) param;
final Array sqlArray = conn.createArrayOf("integer", arr.toArray()); // we had integers, should be similar for String
ps.setArray(i, sqlArray);// i is position of parameter 
```

# python - 从字典列表中提取字符串

> ID：16191996
> 
> 赞同：1
> 
> 时间：2013-04-24T12:24:53.763
> 
> 标签：python, list, dictionary

如何仅打印此词典列表中的“中间”或“状态”？

* * *

```
list = [{'status': 'OK', 'mid': '6269'}, {'status': 'OK', 'mid': '6270'},{'status': 'OK', 'mid': '6271'}, {'status': 'OK', 'mid': '6272'}, {'status': 'OK', 'mid': '6273'}, {'status': 'OK', 'mid': '6274'},{'status': 'OK', 'mid': '6288'}, {'status': 'OK', 'mid': '6289'}] 
```

* * *

我试过了：`print list[0]['mid']`但它只为列表中的第一项提供“中间”值？我怎样才能做到这一点`list`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T12:25:41.067

使用列表推导：

```
data = [{'status': 'OK', 'mid': '6269'},
        {'status': 'OK', 'mid': '6270'},
        {'status': 'OK', 'mid': '6271'},
        {'status': 'OK', 'mid': '6272'},
        {'status': 'OK', 'mid': '6273'},
        {'status': 'OK', 'mid': '6274'},
        {'status': 'OK', 'mid': '6288'},
        {'status': 'OK', 'mid': '6289'}]

print [item['mid'] for item in data] 
```

PS：不要命名你的变量`list`，你不能使用内置的`list`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:16:30.333

虽然上面的答案是正确的，但我会尝试解释为什么 OP 的原始代码不起作用。

1.  首先是变量的名称。对原始问题的评论解释得很好
2.  你说为什么 print list[0]['mid'] 只给出第一个值。原因是您只给出 list[0]，它是一个包含两个键的字典，状态和中间，并且您试图获取与“中间”键对应的值，这将是一个值

如果您在使用简单的 for 循环之前没有使用过 List Comprehensions，它的范围从 0 到列表的长度。或用于迭代列表类型中的项目。

# java - 如何使用 java 和 jena 在给定本体中生成命名类和对象属性名称的列表

> ID：16191998
> 
> 赞同：0
> 
> 时间：2013-04-24T12:24:59.657
> 
> 标签：java, jena, owl

这是代表艺术家、音乐家和音乐热门信息的猫头鹰本体

```
<rdf:RDF xml:base="http://www.semanticweb.org/ontologies/2013/3/MyArt">
  <owl:Ontology rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt"/>
  <!-- 
       ///////////////////////////////////////////////////////////////////////////////////////
       //
       // Object Properties
       //
       ///////////////////////////////////////////////////////////////////////////////////////
  -->
  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#hasComposed -->
  <owl:ObjectProperty rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#hasComposed">
    <rdfs:subPropertyOf rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#hasCreated"/>
  </owl:ObjectProperty>

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#hasCreated -->
  <owl:ObjectProperty rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#hasCreated"/>

  <!-- 
       ///////////////////////////////////////////////////////////////////////////////////////
       //
       // Classes
       //
       ///////////////////////////////////////////////////////////////////////////////////////
  -->

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#ArtisticWork -->
  <owl:Class rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#ArtisticWork"/>

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#Composition -->
  <owl:Class rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#Composition">
    <rdfs:subClassOf rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#ArtisticWork"/>
  </owl:Class>

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#MusicalHit -->
  <owl:Class rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#MusicalHit">
    <rdfs:subClassOf rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#Composition"/>
  </owl:Class>

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#Person -->
  <owl:Class rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#Person"/>

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#PopularMusician -->
  <owl:Class rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#PopularMusician">
    <owl:equivalentClass>
      <owl:Restriction>
        <owl:onProperty rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#hasCreated"/>
        <owl:someValuesFrom rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#MusicalHit"/>
      </owl:Restriction>
    </owl:equivalentClass>
    <rdfs:subClassOf rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#Person"/>
  </owl:Class>

  <!-- 
       ///////////////////////////////////////////////////////////////////////////////////////
       //
       // Individuals
       //
       ///////////////////////////////////////////////////////////////////////////////////////
  -->

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#imagine -->
  <owl:NamedIndividual rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#imagine">
    <rdf:type rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#MusicalHit"/>
  </owl:NamedIndividual>

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#jealousGuy -->
  <owl:NamedIndividual rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#jealousGuy">
    <rdf:type rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#MusicalHit"/>
  </owl:NamedIndividual>

  <!-- http://www.semanticweb.org/ontologies/2013/3/MyArt#lennon -->
  <owl:NamedIndividual rdf:about="http://www.semanticweb.org/ontologies/2013/3/MyArt#lennon">
    <rdf:type rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#Person"/>
    <hasComposed rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#imagine"/>
    <hasComposed rdf:resource="http://www.semanticweb.org/ontologies/2013/3/MyArt#jealousGuy"/>
  </owl:NamedIndividual>

</rdf:RDF> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:30:45.017

将本体加载到[`OntModel`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntModel.html)中，然后您可以使用[`OntModel#listObjectProperties`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntModel.html#listObjectProperties%28%29)和[`OntModel#listClasses`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntModel.html#listClasses%28%29)来获取对象属性和类。但是，您需要从后者中过滤掉未命名的类，因为`listClasses`它会返回一个遍历所有类的迭代器，而不仅仅是命名类。对于该过滤，看起来您可以使用各种`OntClass#isXXX`方法，例如，[`OntClass#isComplementClass`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntClass.html#isComplementClass%28%29)检查类是命名类还是非命名类表达式。

如果您是 Jena 的新手，[Apache Jena](http://jena.apache.org/)页面有很多资源和文档可以帮助您入门。