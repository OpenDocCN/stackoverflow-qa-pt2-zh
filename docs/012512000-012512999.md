# StackOverflow 问答 12512000-12512999

# c# - 字母和空格的正则表达式

> ID：12512016
> 
> 赞同：1
> 
> 时间：2012-09-20T11:51:27.347
> 
> 标签：c#, .net, regex, c#-4.0

我在 C# 中有一个字符串变量，我想检查这个字符串是否包含字母。

我使用以下正则表达式来评估此条件，但在`if`我使用的语句中返回 false。

我不知道为什么？

我的 C# 代码：

```
 string cellValue ="Row Merging Done here";
 if (Regex.IsMatch(cellValue, @"^[a-zA-Z]+$"))
 {
     messageBox.show("Message found");
 } 
```

如何评估这个正则表达式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T11:55:12.877

您不需要识别空格：`@"^[a-zA-Z ]+$"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T11:55:24.483

您是否需要检查字符串是否至少包含一个单词？如果是这样，你不需要开始和结束的符号：

```
if (Regex.IsMatch(cellValue, @"[a-zA-Z]+")) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T11:56:03.360

您可以使用：[RegExr](http://gskinner.com/RegExr/)来评估您的表达式

# php - 为表单创建一个后退按钮

> ID：12512017
> 
> 赞同：0
> 
> 时间：2012-09-20T11:51:39.507
> 
> 标签：php, html

我使用以下代码创建了一个两步表单：

```
<form class="form" method="POST" action="<?php bloginfo('url'); ?>/contact-us/">
    <? if (!$_POST['step']) { ?>
    <h1>Step 1 of 2</h1><br />
    <input type="hidden" name="step" value="1" />               
    <table border="0" width="100%">
        <tr>
            <td>
                <input type="text" name="title" id="title" value="Title*" />
            </td>
        </tr>
    </table>        
    <button class="continue-button" type="submit" name="submit">Continue</button>
    <? } else if ($_POST['step'] == 1) {
        foreach($_POST as $name => $value) {
        if ($name <> "step") { echo "<input type=\"hidden\" name=\"$name\" value=\"$value\" />"; }
    } ?>
    <h1>Step 2 of 2</h1><br />
    <input type="hidden" name="step" value="2" />
    <table border="0" width="100%">
        <tr>
            <td>
                <input type="text" name="name" id="name" value="Name*" />
            </td>
        </tr>
    </table>        
    <button class="continue-button" type="submit" name="submit">submit</button>
    <? } else if ($_POST['step'] == 2) { //do stuff 
        echo "Do stuff here";
    } ?>
</form> 
```

如何在第 2 步中添加后退按钮？将添加几个步骤，而不仅仅是 2 个，因此用户需要能够在这些步骤中前进和后退，同时保留他们填写的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:03:01.300

**尝试这个**

```
<form class="form" method="POST" action="<?php bloginfo('url'); ?>/contact-us/">
    <? if (!$_POST['step']) { ?>
    <h1>Step 1 of 2</h1><br />
    <input type="hidden" name="step" value="1" />               
    <table border="0" width="100%">
        <tr>
            <td>
                <input type="text" name="title" id="title" value="<?= $_REQUEST["title"]?>"  placeholder="Title*" />
            </td>
        </tr>
    </table>        
    <button class="continue-button" type="submit" name="submit">Continue</button>
    <? } else if ($_POST['step'] == 1) {
        $field  ="";
        foreach($_POST as $name => $value) {
        if ($name <> "step") { echo "<input type=\"hidden\" name=\"$name\" value=\"$value\" />";  $field .= $name."=".$value."&";}
    } ?>
    <div><a href="<?php bloginfo('url'); ?>/contact-us/?<?= $field ?>" >Back</a></div>
    <h1>Step 2 of 2</h1><br />
    <input type="hidden" name="step" value="2" />
    <table border="0" width="100%">
        <tr>
            <td>
                <input type="text" name="name" id="name" value="Name*" />
            </td>
        </tr>
    </table>        
    <button class="continue-button" type="submit" name="submit">submit</button>
    <? } else if ($_POST['step'] == 2) { //do stuff 
        echo "Do stuff here";
    } ?>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:04:55.293

首先将其添加到您的页面顶部

```
// keep the data
$_SESSION['data'] = $_POST;
$_SESSION['step'] = $_REQUEST['step']; 
```

还将语句替换为`if`如下内容：

```
if ($_REQUEST['step'] == 1) {
    // continue 
```

在表单上写入动态值

```
<input type="text" name="title" id="title" 
value="<?php echo $_SESSION['data']['title']; ?>" /> 
```

使用`link`for`Back`和`Next`：

```
<a href="/?step=<?php echo $_SESSION['step'] - 1; ?>">Back</a>

<a href="/?step=<?php echo $_SESSION['step'] + 1; ?>">Next</a> 
```

我想它对你有用！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:52:51.300

要前后导航，您需要将前一个表单中的数据再次传回给它，因此您需要将每个表单的值存储在某个地方。您最好的选择是创建一个`session`并将每个表单信息存储在会话变量中。然后，当您加载每个表单时，您应该检查数据是否已存储在会话中。

然后您可以添加一个 jquery 按钮来更改步骤的值并提交表单。为此，您需要在“step”隐藏输入中输入一个 id，例如“step”

```
<input type="hidden" name="step" id="step" value="2" /> 
```

然后添加一个按钮

```
<button class="back-button" type="submit" name="back" onclick="$('#step').val('1');">Back</button> 
```

这将更改步骤输入的值，然后提交表单，将您带回之前的表单。

您需要有另一个隐藏的输入来告诉表单它来自哪里，这样它就会知道是查看会话数据（您是要倒退）还是 POST 数据（如果您要前进）。

# html - Joomla 图片网址更改 - 不使用编辑器

> ID：12512018
> 
> 赞同：0
> 
> 时间：2012-09-20T11:51:41.837
> 
> 标签：html, joomla

嗨，我正在使用 Joomla 2.5 构建一个站点。我的文章没有使用编辑器，因为我需要 JS。我的文章中有一张带有路径的图片：

```
<img src="images/bar-closed.jpg" width="375px" height="36"/> 
```

当我在浏览器中查看我的 src 代码时，它变为：

```
<img src="/mysite4/images/bar-closed.jpg" width="375px" height="36"/> 
```

插入“mysite4”目录。有谁知道为什么会发生这种情况以及如何阻止它发生？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:46:51.647

你可以：

*   将 joomla 实例移动到父目录
*   在父目录中写入 .htacces 重写（不推荐）
*   创建链接到 joomla 子文件夹的子域
*   使用绝对网址，例如 www.your-domain.com/mysite4/images/bar-closed.jpg

顺便提一句。你的问题有什么意义？如果您使用 joomla 的一些变体进行开发，您的生产网站无论如何都会在最终（子）域下，例如 www.example.com。因此，目前在源中显示什么相对 url**真的无关紧要。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:07:30.063

这是 SEF 插件的结果。可以使用插件管理器禁用它（对于整个网站）。它称为*System-SEF*。

# android - 是否可以在Android上运行C程序

> ID：12512023
> 
> 赞同：3
> 
> 时间：2012-09-20T11:51:59.837
> 
> 标签：android, c, android-ndk

我有一个用 C 语言编写的具有标准`main()`功能的程序。

是否可以在 Android 上运行该程序，例如从我的应用程序或从许多 shell 应用程序之一启动它？如果是这样，我需要采取哪些步骤来实现这一目标？我可以只用 NDK 编译应用程序吗？

我知道有一些关于如何将 C 函数链接到 Android 代码的已回答问题，主要是指出 NDK 教程，但至少对我来说，没有一个是清楚的。似乎 NDK 只是使用 C 函数，而不是运行完全 C 编译的程序。这个对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:55:00.857

您需要做的就是使用交叉编译器为正确的架构（通常是 ARM）编译它（如何获得它取决于您的 linux 发行版）。然后你可以像任何其他可执行文件一样从你的（基于Java的）执行它：

```
Process process = Runtime.getRuntime().exec(commandLine); 
```

请参阅[以编程方式在 android 上运行 shell 命令的任何方式？](https://stackoverflow.com/questions/3350283/any-way-to-run-shell-commands-on-android-programmatically)有关“执行”部分的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:09:04.297

NDK 包括从 C 源代码构建可执行文件所需的所有工具，可在 Linux、Mac 和 Windows 上下载。你应该使用的魔法魔法**包括 $(BUILD_EXECUTABLE)**

# javascript - 空 ul 的 li 计数

> ID：12512031
> 
> 赞同：2
> 
> 时间：2012-09-20T11:52:33.857
> 
> 标签：javascript, jquery, html, dom

我正在运行以下代码来查找 ul 中的 li 计数。

```
 <html>
      <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script>
        $(document).ready(function() {      
           $("ul").each(function(index) {
              alert($(this).find('li').size());         
           });

       });
  </script>
 </head>
 <body>
    <ul/>
    <ul></ul>
    <ul><li>li1</li><li>li2</li></ul>
 </body>
</html> 
```

我收到警报为 2、0、2。为什么我将 li 的计数设为 2？我怎样才能让它为0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:56:21.980

您不能像这样`<ul/>`（至少在 HTML 中）自行关闭 ul 标记，因此它会包装您的其他两个`ul`元素并`li`递归地包含每个元素。像第二个一样正确关闭你的 ul 标签，它可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:56:01.720

那是因为您的第一个 ul 标签包装了其他 ul 标签。现在第一个 ul 标签有 2 个 li 标签属于第三个 ul。您的标记无效，我们将在不同的浏览器中得到不同的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T11:56:53.437

```
HTML != XHTML 
```

如果您的标题是`<!DOCTYPE html>`，请替换

```
<ul/> 
```

经过

```
<ul></ul> 
```

只有 SVG 和 MathML 元素可以在适当的 HTML4 或 HTML5（不是 XHTML）文档中自动关闭。

# c# - WCF 服务以 Json 格式返回对象

> ID：12512032
> 
> 赞同：1
> 
> 时间：2012-09-20T11:52:35.397
> 
> 标签：c#, asp.net, json, wcf

我有一个 WCF 服务，我正在构建一个名为的对象`FinalList`，其中包含一个名为 Chart 的对象和一个`List<Data>`. 我想以以下格式返回我的 ajax 函数 json 数据：

> {"d":{"chart":{"caption":"Year","exportatclient":"1","exportenabled":"1","exporthandler":"chartExporter","labelDisplay":"wrap" ,"numberprefix":"","showborder":"1","slantLabels":"1","useroundedges":null,"yaxisname":"点击数"},"data":[{"label" :"1960s","link":null,"tooltext":null,"value":3},{"label":"1970s","link":null,"tooltext":null,"value":56 },{"label":"1980s","link":null,"tooltext":null,"value":98}]}}

但是我的服务返回是这样的：

> {"d":{"__type":"FinalList:#MyNamespace.FusionChartsFields","chart":{"__type":"Chart:#MyNamespace.FusionChartsFields","caption":"Year","exportatclient":" 1","exportenabled":"1","exporthandler":"chartExporter","labelDisplay":"wrap","numberprefix":"","showborder":"1","slantLabels":"1", "useroundedges":null,"yaxisname":"点击数"},"data":[{"__type":"Data:#MyNamespace.FusionChartsFields","label":"1960s","link":null, "tooltext":null,"value":3},{"__type":"Data:#MyNamespace.FusionChartsFields","label":"1970s","link":null,"tooltext":null,"value":56},{"__type":"Data:#MyNamespace.FusionChartsFields","label":"1980s","link ":null,"tooltext":null,"value":98}]}}

当我使用 WebServices (asmx) 时，我只需要将我的类声明为“对象”而不是 FinalList，那么结果就是我需要的正确 json 格式。

我已经尝试将它转换为字符串，它给我带来了正确的东西，但包括 '\' （例如 {"d":{\"chart\":{\"caption\":\"Year\") 这不是什么我想。

有谁知道我如何删除这些“__type”和类名？

我正在使用.Net 4

我的 FinalList 类如下：

```
public class FinalList
    {
        private Chart _chart;
        private List<Data> _data = new List<Data>();

        public Chart chart
        {
            get { return _chart; }
            set { _chart = value; }
        }

        public List<Data> data
        {
            get { return _data; }
            set { _data = value; }
        }
    } 
```

我的服务合同包含

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] 
```

在其声明之上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:25:45.553

您对 WCF 服务使用什么行为？如果您正在使用，`<enableWebScript />`那么切换到`<webHttp/>`服务行为配置将解决您的问题。

正如 Cyber​​maxs 所说，如果您使用的是 ASP.NET Ajax 客户端，那么这不是问题，您可以继续使用`<enableWebScript />`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:20:39.540

基本上，结果被包装在一个额外的类型中（大概是为了允许多个结果？）并且每个返回的对象都有一个 __type 属性。即使是简单的结果值也至少包括包装类型，所以即使说字符串结果也包括 d: 类型。

如果您在客户端上使用 MS AJAX，则没有问题 - 客户端知道如何将此 JSON 解析为干净的对象。但是，如果您使用其他一些机制——例如 jQuery 或 Prototype 来检索结果集，您将返回一个时髦的对象，例如，您必须使用 result.d.LastName，这很难看。

尝试这个，

```
[OperationContract]
[WebInvoke(BodyStyle=WebMessageBodyStyle.WrappedRequest,RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T15:16:54.127

尝试添加如下构造函数：

```
public class FinalList
{
    private Chart _chart;
    private List<Data> _data = new List<Data>();

    public Chart chart
    {
        get { return _chart; }
        set { _chart = value; }
    }

    public List<Data> data
    {
        get { return _data; }
        set { _data = value; }
    }

    protected internal FinalList() { }

} 
```

# printing - 印刷中的页数

> ID：12512034
> 
> 赞同：1
> 
> 时间：2012-09-20T11:52:46.293
> 
> 标签：printing, ms-word, vsto, office-interop

是否可以知道我在 MS Word 中打印的是哪一页？或者最近打印了哪一页？我正在尝试使用 vsto 找出答案。有类似`Application.PrintOut()` 和属性之类的方法，`Application.PrintPreview`但找不到我正在打印的页面。

# visual-studio-2010 - 自定义 Linq-to-SQL DBML 模板

> ID：12512035
> 
> 赞同：2
> 
> 时间：2012-09-20T11:52:46.450
> 
> 标签：visual-studio-2010, linq-to-sql, interface, code-templates

我正在使用 Linq-to-sql 生成用于数据库交互的代码。我需要生成的代码包含每个具体类的接口，并且相信实现这一点的唯一简单方法是修改 Linq-to-SQL 代码生成模板。

我看过 Damien Guard 的指南（http://damieng.com/blog/2008/09/14/linq-to-sql-template-for-visual-studio-2008），但是我有 2 个限制禁止这种方法：

1.  我在VS2010上；和
2.  我正在开发一个无法安装未经批准的工具/等的开发环境。

是否有任何其他方法可以修改 Linq-to-sql 代码如何生成 VS2010 的模板，不需要安装 3rd 方模板/等？

或者，是否有任何其他简单的方法可以对接口进行逆向工程以匹配现有的具体类？

# c# - 从生成的 Excel 文件（EPPLUS 库）生成 PDF 报告

> ID：12512036
> 
> 赞同：13
> 
> 时间：2012-09-20T11:52:46.917
> 
> 标签：c#, asp.net, epplus

我正在使用 EPPLUS 生成 Excel 文件……到目前为止，一切都很好。现在我必须生成相同的报告，但是是 PDF 格式。

有没有办法让我完成这个？最好，我想使用 Excel 文件本身，因为我用来提供 Excel 文件的数据集是不完整的......我做了一些 SQL 查询来获取丢失的字段......

这是我获取生成的 Excel 文件的方法：

```
Response.Clear();
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment; filename=RelatorioTempoMediano.xlsx");
Response.BinaryWrite(p.GetAsByteArray());
Response.End(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-06T14:17:29.943

我找到了一个可能的解决方案。EPPlus 包的创建者有一个 PdfReport 库。

[https://github.com/VahidN/EPPlus.Core/issues/8](https://github.com/VahidN/EPPlus.Core/issues/8)

[https://github.com/VahidN/PdfReport.Core/blob/master/src/PdfRpt.Core.FunctionalTests/ExcelToPdfReport.cs](https://github.com/VahidN/PdfReport.Core/blob/master/src/PdfRpt.Core.FunctionalTests/ExcelToPdfReport.cs)

在那里你可以看到图书馆。安装`pdfreport.core` 我已经稍微修改了代码以通过运行示例使其适应您的要求。

**实用类**

```
public class Utilities
{
    public class ExcelDataReaderDataSource : IDataSource
    {
        private readonly string _filePath;
        private readonly string _worksheet;

        public ExcelDataReaderDataSource(string filePath, string worksheet)
        {
            _filePath = filePath;
            _worksheet = worksheet;
        }

        public IEnumerable<IList<CellData>> Rows()
        {
            var fileInfo = new FileInfo(_filePath);
            if (!fileInfo.Exists)
            {
                throw new FileNotFoundException($"{_filePath} file not found.");
            }

            using (var package = new ExcelPackage(fileInfo))
            {
                var worksheet = package.Workbook.Worksheets[_worksheet];
                var startCell = worksheet.Dimension.Start;
                var endCell = worksheet.Dimension.End;

                for (var row = startCell.Row + 1; row < endCell.Row + 1; row++)
                {
                    var i = 0;
                    var result = new List<CellData>();
                    for (var col = startCell.Column; col <= endCell.Column; col++)
                    {
                        var pdfCellData = new CellData
                        {
                            PropertyName = worksheet.Cells[1, col].Value.ToString(),
                            PropertyValue = worksheet.Cells[row, col].Value,
                            PropertyIndex = i++
                        };
                        result.Add(pdfCellData);
                    }
                    yield return result;
                }
            }
        }
    }

    public static class ExcelUtils
    {
        public static IList<string> GetColumns(string filePath, string excelWorksheet)
        {
            var fileInfo = new FileInfo(filePath);
            if (!fileInfo.Exists)
            {
                throw new FileNotFoundException($"{filePath} file not found.");
            }

            var columns = new List<string>();
            using (var package = new ExcelPackage(fileInfo))
            {
                var worksheet = package.Workbook.Worksheets[excelWorksheet];
                var startCell = worksheet.Dimension.Start;
                var endCell = worksheet.Dimension.End;

                for (int col = startCell.Column; col <= endCell.Column; col++)
                {
                    var colHeader = worksheet.Cells[1, col].Value.ToString();
                    columns.Add(colHeader);
                }
            }
            return columns;
        }
    }

    public static IPdfReportData CreateExcelToPdfReport(string filePath, string excelWorksheet)
    {
        return new PdfReport().DocumentPreferences(doc =>
        {
            doc.RunDirection(PdfRunDirection.LeftToRight);
            doc.Orientation(PageOrientation.Portrait);
            doc.PageSize(PdfPageSize.A4);
            doc.DocumentMetadata(new DocumentMetadata { Author = "Vahid", Application = "PdfRpt", Keywords = "Test", Subject = "Test Rpt", Title = "Test" });
            doc.Compression(new CompressionSettings
            {
                EnableCompression = true,
                EnableFullCompression = true
            });
        })
            .DefaultFonts(fonts =>
            {
                fonts.Path(TestUtils.GetVerdanaFontPath(),
                    TestUtils.GetTahomaFontPath());
                fonts.Size(9);
                fonts.Color(System.Drawing.Color.Black);
            })
            .PagesFooter(footer =>
            {
                footer.DefaultFooter(DateTime.Now.ToString("MM/dd/yyyy"));
            })
            .PagesHeader(header =>
            {
                header.CacheHeader(cache: true); // It's a default setting to improve the performance.
                header.DefaultHeader(defaultHeader =>
                {
                    defaultHeader.RunDirection(PdfRunDirection.LeftToRight);
                    defaultHeader.ImagePath(TestUtils.GetImagePath("01.png"));
                    defaultHeader.Message("Excel To Pdf Report");
                });
            })
            .MainTableTemplate(template =>
            {
                template.BasicTemplate(BasicTemplate.ClassicTemplate);
            })
            .MainTablePreferences(table =>
            {
                table.ColumnsWidthsType(TableColumnWidthType.Relative);
                table.MultipleColumnsPerPage(new MultipleColumnsPerPage
                {
                    ColumnsGap = 7,
                    ColumnsPerPage = 3,
                    ColumnsWidth = 170,
                    IsRightToLeft = false,
                    TopMargin = 7
                });
            })
            .MainTableDataSource(dataSource =>
            {
                dataSource.CustomDataSource(() => new ExcelDataReaderDataSource(filePath, excelWorksheet));
            })
            .MainTableColumns(columns =>
            {
                columns.AddColumn(column =>
                {
                    column.PropertyName("rowNo");
                    column.IsRowNumber(true);
                    column.CellsHorizontalAlignment(HorizontalAlignment.Center);
                    column.IsVisible(true);
                    column.Order(0);
                    column.Width(1);
                    column.HeaderCell("#");
                });

                var order = 1;
                foreach (var columnInfo in ExcelUtils.GetColumns(filePath, excelWorksheet))
                {
                    columns.AddColumn(column =>
                    {
                        column.PropertyName(columnInfo);
                        column.CellsHorizontalAlignment(HorizontalAlignment.Center);
                        column.IsVisible(true);
                        column.Order(order++);
                        column.Width(1);
                        column.HeaderCell(columnInfo);
                    });
                }
            })
            .MainTableEvents(events =>
            {
                events.DataSourceIsEmpty(message: "There is no data available to display.");
            })
            .Generate(data => data.AsPdfFile(TestUtils.GetOutputFileName()));
    }
} 
```

**TestUtils**（修改后 GetBaseDir 抛出服务器映射路径）

```
public static class TestUtils
{
    public static string GetBaseDir()
    {
        return HttpContext.Current.Server.MapPath("~/");
    }

    public static string GetImagePath(string fileName)
    {

        return Path.Combine(GetBaseDir(), "Images", fileName);
    }

    public static string GetDataFilePath(string fileName)
    {

        return Path.Combine(GetBaseDir(), "Data", fileName);
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static string GetOutputFileName([CallerMemberName] string methodName = null)
    {
        return Path.Combine(GetOutputFolder(), $"{methodName}.pdf");
    }

    public static string GetOutputFolder()
    {
        var dir = Path.Combine(GetBaseDir(), "App_Data", "out");
        if (!Directory.Exists(dir))
        {
            Directory.CreateDirectory(dir);
        }
        return dir;
    }

    public static string GetWingdingFontPath()
    {
        return Path.Combine(GetBaseDir(), "fonts", "wingding.ttf");
    }

    public static string GetTahomaFontPath()
    {
        return Path.Combine(GetBaseDir(), "fonts", "tahoma.ttf");
    }

    public static string GetVerdanaFontPath()
    {
        return Path.Combine(GetBaseDir(), "fonts", "verdana.ttf");
    }

    public static Font GetUnicodeFont(
                string fontName, string fontFilePath, float size, int style, BaseColor color)
    {
        if (!FontFactory.IsRegistered(fontName))
        {
            FontFactory.Register(fontFilePath);
        }
        return FontFactory.GetFont(fontName, BaseFont.IDENTITY_H, BaseFont.EMBEDDED, size, style, color);
    }

    public static void VerifyPdfFileIsReadable(byte[] file)
    {
        PdfReader reader = null;
        try
        {
            reader = new PdfReader(file);
            var author = reader.Info["Author"] as string;
            if (string.IsNullOrWhiteSpace(author) || !author.Equals("Vahid"))
            {
                throw new InvalidPdfException("This is not a valid PDF file.");
            }
        }
        finally
        {
            reader?.Close();
        }
    }

    public static void VerifyPdfFileIsReadable(string filePath)
    {
        VerifyPdfFileIsReadable(File.ReadAllBytes(filePath));
    }
} 
```

**控制器方法**

```
 public ActionResult DownloadFile()
    {
        var report = Utilities.Utilities.CreateExcelToPdfReport(
            filePath: Server.MapPath("~/App_Data/Financial Sample.xlsx"),
            excelWorksheet: "Sheet1");

        Utilities.TestUtils.VerifyPdfFileIsReadable(report.FileName);

        string filename = Path.GetFileName(report.FileName);
        string filepath = report.FileName;
        byte[] filedata = System.IO.File.ReadAllBytes(filepath);
        string contentType = MimeMapping.GetMimeMapping(filepath);

        var cd = new System.Net.Mime.ContentDisposition
        {
            FileName = filename,
            Inline = true,
        };

        Response.AppendHeader("Content-Disposition", cd.ToString());

        return File(filedata, contentType);
    } 
```

> > 您需要将字体和图像文件夹添加到您的解决方案中，以便实用程序可以找到所需的文件。

# java - 如何在已编译的类中获得类似 DOM 的 Java 方法结构的表示？

> ID：12512046
> 
> 赞同：2
> 
> 时间：2012-09-20T11:53:22.877
> 
> 标签：java, reflection, bytecode

我需要从（编译的）Java 类中的方法收集某些信息。除其他外，我想找出所有现有的方法调用以及每个方法调用的接收者。

是否有一个库可以方便地表示已编译的类及其声明的方法（类似于 DOM 视图），可以将我从解释字节码中抽象出来我自己？

# java - 具有固定标题的可滚动内容，不使用 JTable

> ID：12512048
> 
> 赞同：2
> 
> 时间：2012-09-20T11:53:38.507
> 
> 标签：java, swing, jtable, jscrollpane, jtableheader

我想修复我的内容的标题，这样它就不会随着内容向下滚动。是否可以使用 a 来实现，如果可以，请您说明如何在不使用 JTable 的情况下实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:24:57.673

`JScrollPane`拥有

```
public void setRowHeader(JViewport rowHeader) 
```

参见例如[http://www.java2s.com/Code/Java/Swing-JFC/Scrollpaneruler.htm](http://www.java2s.com/Code/Java/Swing-JFC/Scrollpaneruler.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:24:29.437

*   [JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)中的[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)有[TableHeader 固定在 Rectangle](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#width)

*   有三种（标准）方式不`TableHeader`固定`Point`

    1.  `JTable`[由LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)`JScrollPane`的 som （注意取决于or的类型）放入resizeable`LayoutManager``area``Container`

    2.  `JTable`在`JScrollPane`可能是可拖动的

    3.  `JTable`可调整大小`ColumnModel`

# iphone - 如何使用 NSLayoutConstrains（自动布局）解决方法为我的视图设置动画？

> ID：12512049
> 
> 赞同：1
> 
> 时间：2012-09-20T11:53:40.577
> 
> 标签：iphone, xcode, animation, ios6, autolayout

我正在努力为新的 iPhone 5 配置我的应用程序。所以我开始研究 cocao touch 的自动布局指南（[链接][1]）和 WDC 大师班。

但是我还不清楚一件事。我怎样才能使我的观点动起来。

在我以前的应用程序中，我使用了常规的 UIView 动画，例如：

```
 [UIView  beginAnimations:nil context:NULL];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            [UIView setAnimationDuration:0.75];
            MyView.frame = CGRectMake(0,100, 100, 100);
            [UIView commitAnimations]; 
```

或 CGAffineTransform 方法。

有人可以告诉我使用自动布局时最好的解决方法是什么，因为我无法引用框架并且不再进行框架声明？设置计时器并删除和添加约束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:29:34.440

约束实际上与动画完全无关。

但是，您应该使用最新的基于块的动画方法，例如`animateWithDuration:animations:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:40:57.643

是的，当您使用自动布局时，所有的**setFrame**方法都会被删除。在您的情况下，如果您希望视图移动一定数量的像素，您可以尝试移动视图的**中心**而不是设置视图的框架并将视图周围的约束的优先级设置为低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:25:22.497

你应该使用

```
[MyView layoutIfNeeded]; 
```

在动画块中。

# javascript - 等待另一个页面在 JavaScript 中加载

> ID：12512053
> 
> 赞同：1
> 
> 时间：2012-09-20T11:53:56.197
> 
> 标签：javascript, jquery, dom

是否有可能使用 JavaScript 打开一个新窗口并使用 jQuery 等待新页面完成加载？

我尝试了以下方法，但没有奏效：

```
var win = window.open(url,'',windowSpec);
$(win.window).load(
    function () {
        alert('Finished loading');
    }
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:26:57.360

由于打开的url在同一台服务器上，说明两个windows可以通信。

在窗口中打开的页面上添加

```
$(window).load(function() {
    var opener = window.opener || window.dialogArguments;
    if (opener) {
           opener.yourmethod();
       }
}); 
```

并在启动`window.open`命令使用的页面上

```
function yourmethod(){
  alert('Finished loading');
} 
```

**[http://jsfiddle.net/nmXdc/1的](http://jsfiddle.net/nmXdc/1)**演示**
（*点击打开的窗口位于[http://jsfiddle.net/FPcMk/1/](http://jsfiddle.net/FPcMk/1/)*）**

# xcode - Xcode 4.5 新模拟器无法正确显示

> ID：12512057
> 
> 赞同：8
> 
> 时间：2012-09-20T11:54:11.247
> 
> 标签：xcode, ios-simulator

我刚刚安装完 xCode 4.5 并一直在尝试了解新的模拟器。我想在旧屏幕尺寸和新屏幕尺寸下测试我的应用程序。但是，当在模拟器下我去硬件并将手机尺寸更改为 4 英寸尺寸时，它会将模拟器更改为全屏，没有主页按钮，被放大，我必须滚动导航，这真的是令人沮丧和烦人。

由此

![在此处输入图像描述](../Images/f882016cc552b44ff9ea9323a9df928a.png)

对此

![在此处输入图像描述](../Images/60d8fb33b47d742cba34b33ed7721db4.png)

有人能告诉我这是否注定要发生吗？我想用模拟器保持正常的 iPhone 外观，放大的可滚动模拟器很糟糕，看起来很糟糕并且让调试很痛苦。我确信苹果不会让这种看起来很差的东西成为模拟器的正常外观，所以我猜我做错了什么。

另一个问题是，如果我在主屏幕上可以看到正常 iPhone 屏幕尺寸下的自定义应用程序列表，然后将其更改为 4 英寸模拟器屏幕尺寸，我在模拟器上安装的自定义应用程序不是出于某种原因显示。

任何帮助将非常感激！！

编辑：

我发现我在窗口下更改了模拟器的比例并将其更改为 50 或 75%。但是还有一个问题，为什么 iPhone 5 模拟器中没有 Home 键？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T15:58:52.083

你在用什么电脑？我有一台 13 英寸的 MacBook，我也遇到了同样的事情。一些主题说它与您的屏幕分辨率有关，如果您的屏幕“太小”，那么模拟器将不会在代表物理设备的框架中看到需要。请参阅 Nathan Gopen 在[XCode 4.3.1 iPad 模拟器](https://stackoverflow.com/questions/9624757/xcode-4-3-1-ipad-simulator)中的回答。（我还注意到，当您将标准 iPhone 重新缩放到 75% 或 50% 时，框架会消失。）

如果您需要主页按钮，您可以在硬件 > 主页按钮或 Shift+Cmd+H 中找到它。是的，我知道，这很糟糕......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T10:58:20.853

这对我有用：

1.  转到模拟器菜单
2.  转到硬件
3.  点击设备
4.  点击 iPhone

这将恢复 iPhone 模拟器框架。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-22T16:16:22.837

对我有用的是...

1.  转到 XCode，
2.  打开 XCode 主菜单选项
3.  点击“打开开发者工具”
4.  点击“iOS模拟器”
5.  通过转到“硬件”菜单更改为您想要的模拟器。
6.  关闭模拟器
7.  再次运行您的项目。

当我切换到非视网膜 iPad 选项时，XCode 崩溃了，这就是我的解决方案。

模拟器似乎记得上次选择的硬件选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T07:17:55.003

我认为这与屏幕分辨率无关。我在 1920x1200 上运行它，它是一样的。我想这只是为了减少Apple的工作量，因为拥有一个漂亮的模拟器对于开发来说并不是必需的。但是，是的，我同意我喜欢将虚拟 iPhone 视为模拟器。并且为您的网站生成应用程序的屏幕截图非常容易。

在 1920x1200 屏幕上当然不需要缩放或滚动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T10:55:16.950

这只是发生在我身上，我确实花了一段时间试图弄清楚这一点。通过将比例设置为 100%，我的问题得到了 Cal 上面所说的解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-10T00:33:08.383

我认为这与视网膜显示设置有关...

当我在我的 macbook pro（w/rd）上启动 iOS 模拟器时，iPhone 框架出现了。我将框架移到连接的显示器上，它仍然作为 iPhone 框架。我关闭了 xCode。

当我重新启动时，iOS 模拟器在我连接的显示器上启动并且缺少手机框架，只显示屏幕。放大或缩小并不重要。

我再次将未加框的屏幕移到笔记本电脑的屏幕上，然后关闭了模拟器。当我重新启动它时，它从带有手机框架的笔记本电脑屏幕上开始。

我认为它与分辨率的关系不如视网膜显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-07T04:06:53.927

不确定这是否是长期解决方案，但以下步骤对我有所帮助。

> 1.  转到 Windows >> 缩放
> 2.  根据您的意愿选择不同的选项（我选择了 75%）

# c++ - 地址、reinterpret_cast 和多重继承

> ID：12512058
> 
> 赞同：9
> 
> 时间：2012-09-20T11:54:11.377
> 
> 标签：c++, pointers, multiple-inheritance, reinterpret-cast

任何人都可以解释以下代码的行为吗？

1.  为什么我们`b = 3`在第一种情况下，即是真`b2 == &d`的？
2.  为什么在案例 2 中可以？`b2`和的地址我已经打印出来了`d`，它们是不同的。

```
#include <iostream>

using namespace std;

class A
{
public:
    A() : m_i(0) { }

protected:
    int m_i;
};

class B
{
public:
    B() : m_d(0.0) { }

protected:
    double m_d;
};

class C
    : public A
    , public B
{
public:
    C() : m_c('a') { }

private:
    char m_c;
};

int main()
{
    C d;
    B *b2 = &d;

    cout << &d << endl;
    cout << b2 << endl;

    const int b = (b2 == &d) ? 3 : 4; ///Case1: b = 3;
    const int c = (reinterpret_cast<char*>(b2) == reinterpret_cast<char*>(&d)) ? 3 : 4; //Case 2:  c = 4;

    std::cout  << b << c << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T12:12:01.633

d 是 C 类型的。当你将指向 C 的指针转换为指向 B 的指针时，它会被调整为指向 C 的 B 子对象（如果 B 不需要这种调整，一般需要多重继承， A 会有一个，因为 C 继承自 A 和 B）。因此，在分配和比较时，调整完成。

在另外两次，&d 被转换为 void*（隐式）或 char*（使用 reinterpret_cast）并且没有进行任何调整（您明确要求不使用 reinterpret_cast 进行调整，并且在转换时没有理由进行调整要 void*，它只会无缘无故地使往返复杂化，对于 A)，您将再次得到类似的结果，因此表示方式不同。

顺便说一句，如果您使用了`reinterpret_cast<B*>(&d)`，则不会再次进行任何调整，但是将结果用作 B* 会很快导致问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:12:16.847

在情况 1 中，比较自动将 C 指针转换为 B 指针。在这种情况下，这意味着实际地址发生了变化，因为您使用多重继承，并且 B 在您的基类列表中排在第二位。更具体地说，指针必须偏移（至少）sizeof(A)。然而，在第二种情况下，没有执行这种自动转换，因此“A 前缀”使两个指针不相等。

# java - 使用 Maven 运行 JBehave 的问题

> ID：12512059
> 
> 赞同：3
> 
> 时间：2012-09-20T11:54:12.593
> 
> 标签：java, maven, maven-plugin, jbehave

我试图让一个 JBehave 故事在 Maven 中执行，它完全忽略了 JBehave 插件。我花了几个小时使用不同的配置，但看起来插件根本没有被执行。任何建议/提示将不胜感激！

我所有的 JBehave 课程都在：

> src/at/java

我的 pom.xml 的相关部分：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.5</version>
    <executions>
        <execution>
            <id>add-test-source</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>add-test-source</goal>
            </goals>
            <configuration>
                <sources>
                    <source>src/at/java</source>
                 </sources>
            </configuration>
    </execution>
</executions>
</plugin>

<plugin>
    <groupId>org.jbehave</groupId>
    <artifactId>jbehave-maven-plugin</artifactId>
    <executions>
        <execution>
            <id>run-stories-as-embeddables</id>
            <phase>integration-test</phase>
            <configuration>
                <includes>
                     <include>**/*.java</include>
                </includes>
            </configuration>
           <goals>
               <goal>run-stories-as-embeddables</goal>
          </goals>
       </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.11</version>
    <executions>
        <execution>
            <id>integration-test</id>
            <phase>integration-test</phase>
            <goals>
                <goal>test</goal>
           </goals>
           <configuration>
               <skip>false</skip>
              <includes>
                   <include>**/*.java</include>
               </includes>
           </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:06:57.377

最好是将测试类的位置更改为 src/test/java 并根据 JBehave 的文档更改故事的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T11:56:23.957

使用 maven 运行的 JBehave 遵循 Maven 规则来定位代码和文本工件。对于测试范围，您必须将它们放在 src/test/java 和 src/test/resources 中。编译范围是 src/main/java 和 src/main/resources。

使用带有 maven 的 JBehave，您可以使用两个范围（测试或编译），您只需在插件配置中设置您想要的范围，然后选择放置工件的位置。它默认编译。

在您的情况下，您正在添加一个新的测试源，因此您必须将范围设置为测试：

[在此处查看详细信息。](http://jbehave.org/reference/stable/maven-goals.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T20:57:58.453

也许 jbehave-maven-plugin 找不到编译的测试类（场景），因为它在错误的类路径中查找。

请查看您的目标目录并搜索可嵌入类 -> 目标/类或目标/测试类？

为了解决这个问题，我必须设置 jbehave-maven-plugin 的范围来测试我的项目 pom.xml 的配置。

这是一个例子

```
<plugin>
            <groupId>org.jbehave</groupId>
            <artifactId>jbehave-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>run-stories-as-embeddables</id>
                    <phase>integration-test</phase>
                    <goals>
                        <goal>run-stories-as-embeddables</goal>
                    </goals>
                    <configuration>
                        <scope>test</scope>
                        <includes>
                            <include>**/*Scenarios.java</include>
                        </includes>
                        <ignoreFailureInStories>true</ignoreFailureInStories>
                        <ignoreFailureInView>false</ignoreFailureInView>
                    </configuration>
                </execution> 
```

# android - Android - 从 wav 文件中获取幅度变化

> ID：12512061
> 
> 赞同：2
> 
> 时间：2012-09-20T11:54:15.217
> 
> 标签：android, android-ndk, avaudioplayer, audio

我正在开发 android 应用程序，它将记录 wav 文件，然后它应该从声音数据中生成波形。

我正在使用 AudioRecorder 从麦克风录制声音。`

```
bufferSize = AudioRecord.getMinBufferSize(44100,AudioFormat.CHANNEL_IN_STEREO,AudioFormat.ENCODING_PCM_16BIT);

AudioRecord recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
        44100,AudioFormat.CHANNEL_IN_STEREO,AudioFormat.ENCODING_PCM_16BIT, bufferSize);

    recorder.startRecording();

    isRecording = true;

    recordingThread = new Thread(new Runnable() {

        @Override
        public void run() {
            writeAudioDataToFile();
        }
    },"Innovolt AudioRecorder Thread");

    recordingThread.start(); 
```

这将作为 wav 文件存储在内存中。到这一步没问题。

现在我必须从录制的声音文件中获取幅度变化。

有没有办法从录制的 wav 文件中获取振幅数组而不播放它？`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-24T17:08:41.830

我最近为此录音目的制作了图书馆。你只需要这样做：-

```
recorder = OmRecorder.wav(
new PullTransport.Default(mic(), new PullTransport.OnAudioChunkPulledListener() {
    @Override public void onAudioChunkPulled(AudioChunk audioChunk) {
      animateVoice((float) (audioChunk.maxAmplitude() / 200.0));
    }
  }), file()); 
```

你可以很容易地得到幅度！您可以找到有关此的更多信息：-

[https://github.com/kailash09dabhi/OmRecorder](https://github.com/kailash09dabhi/OmRecorder)

# r - 为什么 write.csv 和 read.csv 不一致？

> ID：12512062
> 
> 赞同：11
> 
> 时间：2012-09-20T11:54:16.177
> 
> 标签：r, import, export, export-to-csv, read.table

问题很简单，考虑下面的例子：

```
m <- head(iris)
write.csv(m, file = 'm.csv')
m1 <- read.csv('m.csv') 
```

这样做的结果是它`m1`与原始对象的不同之处`m`在于它有一个名为“X”的新的第一列。如果我真的想让它们相等，我必须使用额外的参数，比如这两个例子：

```
write.csv(m, file = 'm.csv', row.names = FALSE)
# and then
m1 <- read.csv('m.csv') 
```

或者

```
write.csv(m, file = 'm.csv')
m1 <- read.csv('m.csv', row.names = 1) 
```

问题是，造成这种差异的原因是什么？特别是，为什么如果`write.csv`并且`read.csv`应该遵守 Excel 约定，为什么不导入最初导出的相同对象？对我来说，这是一种非常反直觉的行为，非常不受欢迎。

（如果我使用这些函数的 csv2 变体，结果完全一样）

提前致谢！

* * *

这些是 data.frames `m`，`m1`如果您不想使用 R 来查看示例：

```
> m
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa

> m1
  X Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1 1          5.1         3.5          1.4         0.2  setosa
2 2          4.9         3.0          1.4         0.2  setosa
3 3          4.7         3.2          1.3         0.2  setosa
4 4          4.6         3.1          1.5         0.2  setosa
5 5          5.0         3.6          1.4         0.2  setosa
6 6          5.4         3.9          1.7         0.4  setosa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:51:58.250

这是我的猜测...

`write.table`将 data.frame 写入文件并且 data.frames 始终具有行名，因此默认情况下不写入行名会丢弃信息。（是的，`write.table`也会写一个矩阵，矩阵不必有行名，但 data.frames 可能比矩阵更常用。）

`read.table`返回一个 data.frame 但 CSV 文件没有任何行名概念，因此有人可能会争辩说，默认情况下假设 CSV 的第一列是行名是违反直觉的。

现在可能有一种方法可以使这两个函数保持一致，但我认为写入文本文件并不是从一个 R 会话输出/输入数据到另一个的最佳方式。`save`使用, `load`, `saveRDS`,`readRDS`等更安全/更快。

# css - 如何有选择地为 YUI 模块加载/使用 CSS？

> ID：12512063
> 
> 赞同：1
> 
> 时间：2012-09-20T11:54:14.780
> 
> 标签：css, yui, yui3, tabview

我使用以下代码加载 YUI 模块。

```
YUI().use('tabview', 'datatable', 'datasource-local', 'node', 'node-load', function(Y) 
{ 
    ......
}); 
```

这将加载模块和所有相应的 CSS 文件。

但我想有选择地使用 CSS。假设我不想为 TabView 加载 CSS。我怎样才能做到这一点？

我尝试了以下 -

```
YUI({ fetchCSS: false }).use('tabview', 'datatable', 'datasource-local', 'node', 'node-load', function (Y) 
{
    ......
}); 
```

很明显，上面的代码不会为任何模块加载 CSS 文件。如何禁用标签视图的 CSS 以便我可以使用自己的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:35:29.420

皮肤配置中有“覆盖”属性。这允许您为某些模块使用不同的皮肤。

您可以使用自己的 css 文件创建一个皮肤，并告诉加载程序将此皮肤用于您想要的模块（在您的示例中为 tabview）。

我不确定您是否可以为不同的皮肤提供不同的源文件夹。

[http://yuilibrary.com/yui/docs/api/classes/config.html#property_skin](http://yuilibrary.com/yui/docs/api/classes/config.html#property_skin)

您也可以尝试定义一个 CSS 模块并“使用”它。

[http://yuilibrary.com/yui/docs/api/classes/config.html#property_modules](http://yuilibrary.com/yui/docs/api/classes/config.html#property_modules)

我希望它对你有帮助！

# android - Android：可以创建这种类型的圆圈吗？

> ID：12512066
> 
> 赞同：1
> 
> 时间：2012-09-20T11:54:23.763
> 
> 标签：android, android-canvas, geometry

我用谷歌搜索，但不知道在 android 中使用画布绘制这样的圆圈是否可能。如果可能的话，那么如何做到这一点。下面是图像。

我不知道使用画布以块格式创建圆圈的任何方法

![在此处输入图像描述](../Images/4758c24cabb5f2b1cbee45d51ae3c73d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:06:28.503

我可以想到3个选项：

1.  将其创建为存储在 Drawables 或 Assets 中的位图，然后将其绘制到画布上。您可以在加载它或通过缩放画布时根据需要对其进行缩放。

2.  您可以画一个圆圈，然后以不同的颜色绘制 3 条线以创建“Y”形，根据需要调整线的粗细（或使用矩形）

3.  使用算法计算段，然后使用 drawPath 单独创建段。

[编辑] 哦！Elemental的解决方案要好得多...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:11:10.220

我相信使用 Canvas.drawArc 并将 usecenter 参数设置为 true 是可能的。

看看[android 文档](http://developer.android.com/reference/android/graphics/Canvas.html#drawArc%28android.graphics.RectF,%20float,%20float,%20boolean,%20android.graphics.Paint%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:59:34.380

创建 3 个不同的 Bipmap

hdip ldip mdip

而不是搜索或 XML

# c# - 检查是否安装了福昕阅读器？

> ID：12512070
> 
> 赞同：1
> 
> 时间：2012-09-20T11:54:29.910
> 
> 标签：c#, pdf, installation, foxit, foxit-reader

使用 C# 我想检测 Windows 机器上是否安装了 foxit 阅读器。我怎样才能做到这一点？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:56:37.117

[答案](https://stackoverflow.com/questions/908850/get-installed-applications-in-a-system)就在这里。您应该查看注册表并找到名称“foxit reader”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:56:34.437

我会做以下事情：

*   拿一台空白机器。
*   安装 FoxIt 阅读器。
*   看看它安装在哪里。
*   `File.Exists`与一起使用该函数`Environment.GetSpecialFolder`来检查可执行文件是否存在。

或者，如果安装路径可能不同，您可以：

*   拿一台空白机器。
*   安装 FoxIt 阅读器。
*   查找已添加的注册表项。
*   使用这些`RegistryKey`功能检查相关键是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:57:45.113

文件可能安装不正确。这同样适用于应用程序本身存储的注册表项。A`File.Exists`实际上并不表示它已安装（并注册为查看器）。

我会亲自检查 Windows Installer 数据库中的`Product`. [检查卸载注册表](https://stackoverflow.com/a/7722393/296526)是一种可能的方法，但是您也可以使用 Windows API 调用来调用[MsiQueryProductState 。](http://msdn.microsoft.com/en-us/library/aa370363%28v=vs.85%29.aspx)

# objective-c - 在Objective c中计算LRC

> ID：12512071
> 
> 赞同：2
> 
> 时间：2012-09-20T11:54:39.403
> 
> 标签：objective-c

我想计算通过蓝牙发送的消息的 LRC。这是例如一条消息：

（消息结构为 STX MESSAGE FS EXT LRC）

02 1212004123422826E0B8C0F000F0A00182620000THYRON SYSTEMS沃特​​福德UKR 1C 03 60

```
STX = 02
MESSAGE = 1212004123422826E0B8C0F000F0A00182620000THYRON SYSTEMS WATFORD UKR
FS = 1C
EXT = 03
LRC = 60 
```

我要做的是通过对通信消息中的每个字符（不包括 STX 字符但包括 EXT characterr）执行模 2 二进制和来计算 LRC。

在计算 LRC 之前，我必须将此 NSString 转换为 HexaString ：

31323132 30303431 32333432 32383236 45304238 43304630 30304630 41303031 38323632 30303030 54485952 4f4e2053 59535445 4d532057 4154464f 52442055 4b521c03

使用方法：

```
- (NSString *) stringToHex:(NSString *)str
{   
    NSUInteger len = [str length];
    unichar *chars = malloc(len * sizeof(unichar));
    [str getCharacters:chars];

    NSMutableString *hexString = [[NSMutableString alloc] init];

    for(NSUInteger i = 0; i < len; i++ )
    {
        [hexString appendFormat:@"%02x", chars[i]];
    }
    free(chars);

    return [hexString autorelease];
} 
```

然后我必须将它转换为字节数组。使用方法：

```
- (NSData*) hexToBytes:(NSString *) hexaStr {

    NSMutableData* data = [NSMutableData data];
    int idx;
    for (idx = 0; idx+2 <= hexaStr.length; idx+=2) {
        NSRange range = NSMakeRange(idx, 2);
        NSString * hexStrTmp = [hexaStr substringWithRange:range];
        NSScanner* scanner = [NSScanner scannerWithString:hexStrTmp];
        unsigned int intValue;
        [scanner scanHexInt:&intValue];
        [data appendBytes:&intValue length:1];
    }
    return data;
} 
```

然后我尝试用以下内容计算我的 LRC，应该是 60：

```
- (void) calculateLRC:(NSString *) text {

    NSData * data = [self hexToBytes:text];

    NSUInteger size = [data length] / sizeof(const char);
    const char * array = (const char*) [data bytes];

    char checksum = 0;

    for( uint32_t i = 0 ; i < size; i++) {

        checksum += * array++;
    }

    NSLog(@"Checksum = %c", checksum);

    self.LRC_Check = checksum;
} 
```

问题是“校验和”中没有值“60”。有人可以帮我吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:17:35.437

我有答案！

在`- (void) calculateLRC:(NSString *) text`我必须替换的方法中：

```
checksum += * array++; 
```

和 ：

```
checksum ^= * array++; 
```

我认为模数字符是目标 C 中的“%”...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-18T14:37:14.537

我需要迅速做到这一点

这似乎有效。.需要做一些严格的测试虽然..

```
var str = computeLRC(hexString:"373203")
print(str) 
```

// 返回 06

```
func computeLRC (hexString: String ) -> String {
    var checksum : UInt16 = 0
    var my = ""
    for i in stride(from: 0, to: hexString.count, by: 2) {

        let indexStartOfText = hexString.index( hexString.startIndex, offsetBy: i)
        let indexEndOfText = hexString.index( indexStartOfText, offsetBy: 2)
        let substring3 = hexString[indexStartOfText..<indexEndOfText]

        let intResult =  Int(String(substring3) , radix: 16)
        guard let myUnicodeScalar = UnicodeScalar(intResult!) else {
            return ""
        }
        // convert UnicodeScalar to Character
        let myCharacter = Character(myUnicodeScalar)

        my += String(myCharacter)
    }

    for myChar in my {
        var byte: UInt16 = Array(String(myChar).utf16)[0]
        checksum ^= byte
    }

    return String(format:"%02X", checksum)

} 
```

# javascript - 在无限大的父级中计算 HTML SPAN 的可能宽度？

> ID：12512081
> 
> 赞同：2
> 
> 时间：2012-09-20T11:55:02.407
> 
> 标签：javascript, jquery, html

在 Javascript 或 jQuery 中，我想计算特定 SPAN 元素的宽度，如果其父元素无限大？（即它的“首选”宽度）

最干净的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:58:04.087

我能想到的最好方法是在一个无限大的容器中实际克隆并将跨度附加到文档中，并通过 jQuery 获取它的宽度。

HTML：

```
<span id="myspan">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ultricies pulvinar felis, nec posuere lectus mattis et. Aliquam erat volutpat. Donec non turpis vitae nunc placerat scelerisque. Nunc scelerisque lobortis lacus at hendrerit. Curabitur convallis euismod congue. Sed venenatis pulvinar magna vel cursus. Sed eleifend mi eget mi fringilla non euismod arcu venenatis. Proin interdum scelerisque diam. In ut nisi id sem imperdiet euismod. Duis vitae lorem ut mauris auctor vehicula non vel risus.
</span> 
```

JS：

```
function getPrefferedWidth($el){
    var clone = $el.clone(),
    parent = $el && $el.parent().length>0 ? $el.parent() : $('body'),
    container = $(document.createElement('div')),
    wrapper = $(document.createElement('div'));

    container.css({overflow: 'visible',width: '10000000px'});
    wrapper.css({overflow: 'hidden', width: 0});

    container.append(clone);
    wrapper.append(container);
    parent.append(wrapper);

    var width = clone.width();
    wrapper.remove();

    return width;
}
$(document).ready(function(){
    alert(getPrefferedWidth($('#myspan')));
}); 
```

现在 css 不允许您拥有无限宽度的事实，如果您`span`包含内联文本，则可以使用 css 规则`white-space: nowrap`。这样一来，您的跨度就不会出现换行符，并且它将水平延伸到无穷大！它可能更清洁：

```
function getPrefferedWidth($el){
    var clone = $el.clone(),
    parent = $el && $el.parent().length>0 ? $el.parent() : $('body'),
    container = $(document.createElement('div'));

    clone.css({'white-space':'nowrap'});
    container.css({overflow: 'hidden', width: 0, height: 0});

    container.append(clone);
    parent.append(container);

    var width = clone.width();
    container.remove();
    return width;
}
$(document).ready(function(){
    alert(getPrefferedWidth($('#myspan')));
});​ 
```

# sphinx - 如何知道从 Sphinx 中检索到的表记录？

> ID：12512087
> 
> 赞同：0
> 
> 时间：2012-09-20T11:55:16.673
> 
> 标签：sphinx

来自 sphinx.conf：

```
source src0 {
    type = pgsql
    sql_host = localhost
    sql_user = <db user>
    sql_pass = <pwd>
    sql_db = <db name>
    sql_port = 5432
    sql_query = \
        SELECT id, header, text, "app_main" as table_name \
        FROM app_main
    sql_query_info = SELECT * FROM app_main WHERE id=$id
    sql_attr_string = table_name
}

source src1 {
    type = pgsql
    sql_host = localhost
    sql_user = <db user>
    sql_pass = <pwd>
    sql_db = <db name>
    sql_port = 5432
    sql_query = \
        SELECT id, header, text, "app_product" as table_name \
        FROM app_product
    sql_query_info = SELECT * FROM app_product WHERE id=$id
    sql_attr_string = table_name
}

index global_index {
    source = src0
    source = src1
    path = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/data/global_index
    docinfo = extern
    charset_type = utf-8
} 
```

命令

```
client.Query(S, '*') 
```

返回

```
{'status': 0, 'matches': [{'id': 5, 'weight': 30, 'attrs': {}}], 'fields': ['header', 'text'], 'time': '0.000', 'total_found': 1, 'warning': '', 'attrs': [], 'words': [{'docs': 1, 'hits': 2, 'word': 'styless'}], 'error': '', 'total': 1}) 
```

为什么 attrs dict 是空的？这是获取表名的正确方法吗？如果不是，那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:02:20.577

确保在更改配置文件后重建索引

最好在更改配置后重新启动 sphinx

在查询中指定实际的索引名称，而不是仅使用 '*' - 所有索引都应具有必需的属性

# delphi - WebBrowser 和 OLECMDID_SELECTALL

> ID：12512088
> 
> 赞同：3
> 
> 时间：2012-09-20T11:55:20.660
> 
> 标签：delphi, cursor, twebbrowser, selectall

当我使用以下命令打开 Google 网页时：

```
WebBrowser1.Navigate('http://www.google.com.au/advanced_search?hl=en'); 
```

它在编辑框中打开光标。
所以当我使用：

```
WebBrowser1.ExecWB(OLECMDID_SELECTALL,OLECMDEXECOPT_PROMPTUSER,vaIn, vaOut); 
```

它只复制光标所在的位置。不是整个网页，这是我想要复制的。我的代码是：

```
procedure Pause()
begin
//code to pause until page loads.
end;

procedure TForm2.Button22Click(Sender: TObject);
var s:String;
    vaIn, vaOut: OleVariant;
begin
    s:='http://www.google.com.au/advanced_search?hl=en';
    WebBrowser1.Navigate(s);
    while WebBrowser1.ReadyState <> READYSTATE_COMPLETE do
      begin
          Pause(1000);
      end;
//------->I need to put code here so the SELECTALL line of code works.<----------
//------->So the cursor isn't in to editbox but as if it has clicked  <---------- 
//------->the webpage                                                 <----------
    WebBrowser1.ExecWB(OLECMDID_SELECTALL,OLECMDEXECOPT_PROMPTUSER,vaIn, vaOut);
end; 
```

如何选择整个网页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:44:07.783

在全选之前尝试聚焦主体：

```
((WebBrowser1.Document as IHTMLDocument2).body as IHTMLElement2).focus();
WebBrowser1.ExecWB(OLECMDID_SELECTALL, OLECMDEXECOPT_PROMPTUSER, vaIn, vaOut); 
```

话虽如此，更好的方法是使用`document.body.innerText`抓取文本，而不是像您那样模拟选择/复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:10:46.363

[http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/eef2f809-cadf-44a3-956e-e75925a4b85e](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/eef2f809-cadf-44a3-956e-e75925a4b85e) 建议在复制前明确选择全部。这种方式仅在页面没有框架时直接有效（Google Advanced 有 IFRAME 并且 IHTMLBodyElement.CreateTextRange 失败）

但是像这样的后期绑定代码在 XE2/Win7x64/IE9 中有效：

```
procedure TForm2.btn2Click(Sender: TObject);
var HTML_Doc, oRange: OleVariant;
begin
  HTML_Doc := WebBrowser1.Document;
  oRange := HTML_Doc.body.createTextRange;
  oRange.select();

  WB_Copy(webbrowser1);
end; 
```

WBCopy 取自 WBFunks 单元[http://codingrus.ru/readarticle.php?article_id=721](http://codingrus.ru/readarticle.php?article_id=721)并归结为带有 OLECMDID_COPY、OLECMDEXECOPT_DODEFAULT 参数的 ExecWB 调用。

# php - Yii activerecord 字段反序列化

> ID：12512091
> 
> 赞同：0
> 
> 时间：2012-09-20T11:55:46.350
> 
> 标签：php, mysql, serialization, yii

我有一个带有以下字段的 yii 模型（来自继承的数据库）：

*   ID
*   标题
*   系列

Series 是一个序列化的 php 普通数组。我正在寻找一些东西（可能在 beforeFind() 方法中）首先取消序列化该字段并进行搜索（一个 in_array() 就足够了）。我已经看到了一个解决方案，它覆盖了 IP 地址的 findByAttribute()，但我不明白函数参数如何在条件下工作。

是否有类似的示例或执行该操作的方法？

# c# - Schema First WCF Web 服务模型的优势？

> ID：12512093
> 
> 赞同：2
> 
> 时间：2012-09-20T11:55:50.720
> 
> 标签：c#, .net, wcf, schema

我在开发 WCF Web 服务时熟悉 Code_First 方法，但现在我的客户要求为同一个 Web 服务使用模式优先方法。

有人可以分享一下方案优先方法的优势，以及采用模式优先方法的任何具体原因。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:07:44.903

[以下链接](http://msdn.microsoft.com/en-us/magazine/ee335699.aspx)为您提供了使用**Schema First WCF Web 服务模型**的优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:58:43.263

> “模式优先的方法特别适用于需要使用现有模式的场景，因为它们可能已经在开发生命周期的早期阶段进行建模，以便与利益相关者达成协议。这是政府中的常见情况如果您正在构建符合现有行业标准（例如开放旅游联盟 (OTA)）的应用程序，您可能还需要使用现有模式。
> 
> 合同定义的两种方法之间的选择还应基于您的方案、资源和团队中可用的技能。例如，如果您正在构建一个不需要支持在其他平台上运行的客户端的 WCF 服务，您可能不想考虑架构优先的方法。另外，如果你对 WCF 中的契约编程结构非常熟悉，对序列化过程有很好的理解，并且能够专注于层次结构而不是对象图，那么你可以遵循代码优先的方法并获得相同的结果”

引自 - [http://msdn.microsoft.com/en-us/magazine/ee335699.aspx](http://msdn.microsoft.com/en-us/magazine/ee335699.aspx)

# c++ - 对希望编写 vb 代码的新人的帮助

> ID：12512095
> 
> 赞同：0
> 
> 时间：2012-09-20T11:55:57.400
> 
> 标签：c++, vb.net, printing, printers

我希望在我最后一年的大学项目中使用 vb。

我想要做的是在用户按下 word 打印后，例如，出现一个 vb 应用程序，询问用户是否要发送打印作业然后发送它，这个应用程序的目的最终将能够发送打印从家里到另一个目的地的工作，vb 是否适合这个想法，或者另一种语言更好，我从哪里开始？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:06:35.353

这个答案[在 .NET 中编写虚拟打印机](https://stackoverflow.com/questions/257768/writing-a-virtual-printer-in-net)有一些很好的信息，特别是有关 Windows 驱动程序开发工具包的帖子。

# android - Android 处理有关更新的数据库版本

> ID：12512100
> 
> 赞同：0
> 
> 时间：2012-09-20T11:56:05.247
> 
> 标签：android, database, sqlite, upgrade

有没有关于如何最好地处理 android 中的数据库升级的文档？

我正在开发一个应用程序，并一直在我自己的手机上对其进行测试。一切正常，在过去的几次部署中，我不得不向我的表中添加一些列，并且由于如果旧数据库版本低于某个数据库版本，则会执行升级语句。

但是，当我尝试在另一部手机上运行该应用程序时，由于没有以前的版本，因此会出现错误，因此未添加该列。

是否有关于如何处理数据库升级和版本控制的最佳实践或文档？我尝试在谷歌上搜索特定问题，但并没有带来很多好处。

这是我目前正在使用的相关代码：

```
private static final int DATABASE_VERSION = 11;

private static class LocalLoginDatabaseHelper extends SQLiteOpenHelper {
    LocalLoginDatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d(TAG,DATABASE_CREATE);
        db.execSQL(DATABASE_CREATE);
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        if(oldVersion < 11) {
            Log.d(TAG + "Upgrade",DATABASE_ALTER);
            db.execSQL(DATABASE_ALTER);
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:53:14.877

无耻插件：我知道你已经解决了这个问题，但我正在开发一组开源 DSL，它可以轻松创建 SqliteOpenHelper/ContentProvider/Contract API 并通过迁移管理升级[http://robotoworks.com/mechanoid-plugin/机械人数据库](http://robotoworks.com/mechanoid-plugin/mechanoid-db)

它还处于早期阶段，我正忙于编写文档，但它已经对在 Android 中使用 sqlite 的任何人有用，并且使用它的人越多，它就会变得更好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:57:54.257

> 有没有关于如何最好地处理 android 中的数据库升级的文档？

使用[`SQLiteOpenHelper`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)，它可以让您控制何时检测到架构更改，以便您可以升级数据库。

* * *

**更新**

> 但是，当我尝试在另一部手机上运行该应用程序时，由于没有以前的版本，因此会出现错误，因此未添加该列。

您`DATABASE_CREATE`还需要有该列。对于新安装（或在用户对您的应用程序执行清除数据之后），没有现有数据库，因此调用`onCreate()`, not 。`onUpgrade()`

# gcc - 基于 ARM 的嵌入式 Linux 系统的交叉编译

> ID：12512101
> 
> 赞同：8
> 
> 时间：2012-09-20T11:56:18.250
> 
> 标签：gcc, embedded, arm, cross-compiling

我尝试为基于 ARM 的嵌入式（定制）Linux 系统编译一些 C 代码。我用一个名为 arm-linux-gnueabi-gcc-4.4 的交叉编译器设置了一个 Ubuntu VM，因为它看起来像我需要的。现在，当我用这个 gcc 编译我的代码时，它会生成一个像这样的二进制文件：

```
$ file test1
test1: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked
(uses shared libs), for GNU/Linux 2.6.31,
BuildID[sha1]=0x51b8d560584735be87adbfb60008d33b11fe5f07, not stripped 
```

当我尝试在嵌入式 Linux 上运行这个二进制文件时，我得到

```
$ ./test1
-sh: ./test1: not found 
```

权限就足够了。我只能想象二进制格式有问题，所以我查看了一些工作二进制作为参考：

```
$ file referenceBinary
referenceBinary: ELF 32-bit LSB executable, ARM, version 1, dynamically linked
(uses shared libs), stripped 
```

我看到存在一些差异，但我不知道我需要修复什么以及如何修复它。有人可以解释哪个区别是关键的吗？

我看到的另一件事是依赖项：

```
$ ldd test1
    libc.so.6 => not found (0x00000000)
    /lib/ld-linux.so.3 => /lib/ld-linux.so.3 (0x00000000) 
```

（有趣的是，虽然它不能执行二进制文件，但它在目标系统上工作。）嵌入式系统只有一个`libc.so.0`可用的。我想我需要告诉编译器我要链接的 libc 版本，但据我了解，gcc 只是链接到它附带的版本，这是正确的吗？我能做些什么呢？

编辑：这是我使用的 Makefile：

```
CC=/usr/bin/arm-linux-gnueabi-gcc-4.4
STRIP=/usr/bin/arm-linux-gnueabi-strip          
CFLAGS=-I/usr/arm-linux-gnueabi/include             
LDFLAGS=-nostdlib
LDLIBS=../libc.so.0

SRCS=test1.c
OBJS=$(subst .c,.o,$(SRCS))

all: test1

test1: $(OBJS)
    $(CC) $(LDFLAGS) -o main $(OBJS) $(LDLIBS)
    $(STRIP) main

depend: .depend

.depend: $(SRCS)
    rm -f ./.depend
    $(CC) $(CFLAGS) -MM $^>>./.depend;

clean:
    rm -f $(OBJS)

include .depend 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:21:20.833

您可能应该做的是安装`libc6`在嵌入式系统上。阅读有关类似问题的[主题。](http://www.linuxquestions.org/questions/linux-embedded-78/compile-code-for-arm-processor-703336/)帖子 #5 中的解决方案是安装：

```
libc6_2.3.6.ds1-13etch9_arm.deb
linux-kernel-headers_2.6.18-7_arm.deb
libc6-dev_2.3.6.ds1-13etch9_arm.deb 
```

您的另一个选择是`libc`从嵌入式系统获取您的虚拟机，然后将其传递给`gcc`链接器并使用该`-static`选项。

上述线程中也提到了此解决方案。[在此处](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)阅读有关静态链接的更多信息。

**其他要尝试的事情：**

在[这个线程](https://forum.sparkfun.com/viewtopic.php?f=11&t=32040)`-mabi=apcs-gnu`中，如果您正在使用它，他们建议从您的 makefile 中删除该标志。

`-nostdlib`如果您从命令行编译，[本文](http://balau82.wordpress.com/2010/12/05/using-ubuntu-arm-cross-compiler-for-bare-metal-programming/)建议使用 feedint gcc标志。

或者您可以切换到使用`arm-none-eabi-gcc`编译器。可以在[此处](http://www.kunen.org/uC/gnu_tool.html)和[此处](https://github.com/jsnyder/arm-eabi-toolchain)找到有关此的参考。

# ruby-on-rails - 我可以在 RSpec 请求中访问 Application Helper 方法吗？

> ID：12512108
> 
> 赞同：19
> 
> 时间：2012-09-20T11:56:40.377
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

鉴于我`full_title`在 ApplicationHelper 模块中有一个方法，我如何在 RSpec 请求规范中访问它？

我现在有以下代码：

`app/helpers/application_helper.rb`

```
 module ApplicationHelper

    # Returns the full title on a per-page basis.
    def full_title(page_title)
      base_title = "My Site title"
      logger.debug "page_title: #{page_title}"
      if page_title.empty?
         base_title
      else
        "#{page_title} - #{base_title}"
      end
    end 
```

`spec/requests/user_pages_spec.rb`

```
 require 'spec_helper'

   describe "User Pages" do
      subject { page }

      describe "signup page" do 
          before { visit signup_path }

          it { should have_selector('h2', text: 'Sign up') } 
          it { should have_selector('title', text: full_title('Sign Up')) } 

      end
    end 
```

在运行此规范时，我收到以下错误消息：

`NoMethodError: undefined method full_title' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x00000003d43138>`

根据 Michael Hartl 的[Rails Tutorial](http://ruby.railstutorial.org/chapters/filling-in-the-layout#code-user_pages_spec)中的测试，我应该能够访问我的用户规范中的应用程序帮助方法。我在这里犯了什么错误？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-06-12T19:31:55.947

另一种选择是将其直接包含在 spec_helper 中

```
RSpec.configure do |config|
  ...
  config.include ApplicationHelper
end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-19T22:59:11.183

我正在使用每个 gem 的当前最新版本做[Ruby on Rails 教程](https://www.railstutorial.org/)（Rails 4.0 版本）。我遇到了类似的问题，想知道如何将 ApplicationHelper 包含到规范中。我让它使用以下代码：

# 规范/rails_helper.rb

```
RSpec.configure do |config|
  ...
  config.include ApplicationHelper
end 
```

# 规范/请求/user_pages_spec.rb

```
require 'rails_helper'

describe "User pages", type: :feature do
  subject { page }

  describe "signup page" do 
    before { visit signup_path }

    it { is_expected.to have_selector('h2', text: 'Sign up') } 
    it { is_expected.to have_selector('title', text: full_title('Sign Up')) } 
  end
end 
```

# 宝石文件

```
...
# ruby 2.2.1
gem 'rails', '4.2.1'
...
group :development, :test do
  gem 'rspec-rails', '~> 3.2.1' 
  ...
end

group :test do
  gem 'capybara', '~> 2.4.4'
  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:33:37.910

`spec/support/utilities.rb`根据本书的清单 5.26创建助手。

# php - 如何在 PHPExcel 中设置单元格填充？

> ID：12512110
> 
> 赞同：11
> 
> 时间：2012-09-20T11:56:41.697
> 
> 标签：php, phpexcel

有谁知道如何在 PHPExcel 中设置单元格填充？搜索了 30 分钟，仍然找不到合适的解决方案。没有关于此的有用文档。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-28T15:06:34.620

也许

```
$objPHPExcel->getActiveSheet()->getStyle('A1')->getAlignment()->setIndent(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-16T02:23:28.267

补充一点，请注意，这仅在水平对齐设置为左或右时才有效。

应该在此之前（如果尚未完成）

```
$objPHPExcel->getActiveSheet()->getStyle('A1')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_LEFT); 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:47:16.490

Cell Padding 是一个 HTML 概念，在 Excel 中没有类似的东西。您将如何在 MS Excel 本身中设置单元格填充？

您可以管理的最好的方法可能是设置单元格的高度和宽度。

**编辑**

我一直在谷歌上搜索这个，甚至[微软](http://answers.microsoft.com/en-us/office/forum/office_2007-excel/excel-2007-is-there-a-way-to-create-cell-margins/716e6b06-fe98-404b-91dd-095ea544b4d3?msgId=075deee5-f2d8-4f78-b161-ffcfa666fee0)都说 Excel 中没有等效的单元格填充。最好的选择似乎是使用单元格对齐缩进（结合列宽）进行水平填充；以及垂直填充的行高和垂直对齐。这些可以在 PHPExcel 中设置。

# jenkins - 为 Jenkins 安装 Gerrit 触发器

> ID：12512111
> 
> 赞同：4
> 
> 时间：2012-09-20T11:56:49.890
> 
> 标签：jenkins, hudson, hudson-plugins, jenkins-plugins, gerrit

我完全坚持安装 Gerrit Trigger。我安装了 Jenkins 版本。1.482 与 Gerrit Trigger (v2.6.0) 插件。我无法配置它。

我安装了一个测试 gerrit 服务器（v2.4.2）。我有一个管理员用户。我尝试将 Gerrit Trigger 配置为使用此访问来构建补丁（这是一个测试系统，我不想费心添加真实用户）。

在 Gerrit 触发器选项中，我配置了 gerrit 访问权限。测试连接按钮显示连接正常。虽然我得到`The connection to Gerrit is not started yet. Check the Gerrit URL in the settings`. 顶部的警告。我还尝试在底部推动重启。

我已经阅读了插件的 Hudson 和 Jenkins 页面上的文档。我仍然无法配置插件。

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:45:53.387

可能测试后点击按钮**保存**，这是您忘记保存的常见错误！我遇到过几次

![在此处输入图像描述](../Images/65b981f88c67294f13d98fe36da98e34.png)

[在https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)中查看更多解释

否则不清楚你的问题是什么，因为这是正常情况。

# html - 垂直对齐Div内的Span

> ID：12512114
> 
> 赞同：0
> 
> 时间：2012-09-20T11:56:56.097
> 
> 标签：html, css

我运行以下代码以创建位于屏幕中间的三列。我遇到的问题是，当我向每个跨度添加不同数量的内容时，一个最终会比其他两个高得多。主页上的背景是黑色的，每个跨度都是白色的。

```
<div style="width:100%; text-align:center; min-width:1200px;">
<span style="display: inline-block; width:300px; height:300px; background-color:#fff; ">
        Content
</span>
<span style="display: inline-block; width:300px; height:300px; background-color:#fff;">
        Content
</span>

<span style="display: inline-block; width:300px; height:300px; background-color:#fff; margin:0px; padding:0px;">
        Content blah blah blah
</span>
</div> 
```

我怎样才能使它所有的跨度都是相同的垂直位置。我已将高度设置为所有相同的值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:08:14.170

css 属性`display: table-cell;vertical-align:middle`将使块垂直居中。

```
<div style="width:100%; text-align:center; min-width:1200px;">
<span style="width: 300px; height: 300px; background-color: rgb(255, 255, 255); display: table-cell; vertical-align: middle;">
        Content
</span>
<span style=" width:300px; height:300px; background-color:#fff; display: table-cell; vertical-align: middle;">
        Content
</span>

<span style=" width:300px; height:300px; background-color:#fff; margin:0px; padding:0px; display: table-cell; vertical-align: middle;">
        Content blah blah blah
</span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:13:01.190

对于现代浏览器，您可以使用[`columns` ^(W3C 文档)](http://www.w3.org/TR/css3-multicol/#introduction)css 属性。

**html**

```
<div class="container">
    <div class="columns">
      All content
    </div>
</div> 
```

**css**

```
.container{
    width:100%;
    min-width:1200px;
    background-color:black;
}
.columns{
    -moz-columns:300px 3;
    -webkit-columns:300px 3;
    columns:300px 3;
    width:900px;
    text-align:center;
    background-color:white;
    margin:0 auto;
} 
```

演示在[http://jsfiddle.net/b2fNk/1](http://jsfiddle.net/b2fNk/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:20:40.343

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">

body{
background:black;
}

.mydiv{
margin-left:100px;
width:300px;
float:left;
}
</style>
</head>
<body>

<div style="width:100%; text-align:center; min-width:1200px;">

<div class="mydiv"><span style="display: inline-block; width:300px; background-  color:#fff; ">
       blahblah blah blah blahblah blah blah  blahblah blah blah
</span></div>
<div class="mydiv"><span style="display: inline-block; width:300px; background-color:#fff;">
        Hello Wolrd!blah blah blahblah blah blah
</span>
</div>
<div class="mydiv"><span style="display: inline-block; width:300px; background-color:#fff; margin:0px; padding:0px;">
        Content blah blah blah
</span></div>
</div>

</body>
</html> 
```

# android - 使用 longclick 在 textview 中显示选择指针并突出显示文本

> ID：12512119
> 
> 赞同：3
> 
> 时间：2012-09-20T11:57:07.397
> 
> 标签：android

我有一个 TextView，我想在其上实现 LongClickListner 并选择其中的部分文本......但是选择指针没有出现，文本也没有突出显示。我知道选择了文本，因为当我使用 view.getselectionstart() 和 view.getselectionend() 它们返回正确的值...在我使用的代码下方：

```
textView.setOnLongClickListener(new OnLongClickListener() {

public boolean onLongClick(View v) {
   Selection.setSelection((Spannable) textView.getText(),5, 10);
   v.setSelected(true);
   return true;
}
 }); 
```

这没有显示任何东西.....但是当我尝试记录选择开始和结束时：

```
Log.d("SELECTED TEXT LISTNER",Selection.getSelectionStart(textView.getText())
+ " " +Selection.getSelectionEnd(textView.getText())); 
```

返回正确的值（5、10）......任何帮助我如何显示选择指针并在longclick上突出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:13:51.947

在 XML 中：

```
android:textIsSelectable="true" 
```

以编程方式：

```
textView.setTextIsSelectable(true); 
```

您不需要实现自己的`onLongClickListener`，因为默认行为如您所述。

# jquery - Spring MVC 和 JSP webapp 中的 JQuery Datatables 分页

> ID：12512122
> 
> 赞同：1
> 
> 时间：2012-09-20T11:57:21.323
> 
> 标签：jquery, jsp, datatables

我正在使用 Datatables JQuery 插件，只需填充一个`<table>`使用 JSTL 的 forarch。

我想向表中添加服务器端分页功能。我使用*maxResults*和*page*为分页准备了服务方法。

表格的单元格通过按钮、下拉菜单和单元格内的事件进行了非常自定义，因此我认为我不能直接使用**“sAjaxSource”**（可以吗？）

我正在考虑捕获数据表的分页更改事件，并在每次更改时使用 currentPage 和 maxResults 发出 ajax 请求……但这似乎并不直接支持，没有诸如*pageChanged*或 smth 之类的事件。

你会如何处理我的情况？谢谢

# sql - 从域外连接到 sql server 的问题

> ID：12512123
> 
> 赞同：0
> 
> 时间：2012-09-20T11:57:26.540
> 
> 标签：sql, sql-server

我在通过 SSMS 或我的 C# 应用程序连接到 sql server 时遇到问题。需要注意的一件事是我不在我的工作领域。但我过去曾在家工作过，没有任何问题。也许有一次，但我重新启动并且它起作用了。但它今天不工作。Microsoft SQL Server 错误 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:34:38.893

确定正确的端口是否已打开并正在侦听（默认为 TCP 端口 1433），您可能需要为此与网络管理员交谈。

SQL Server Browser 服务可能还需要运行。

如果不是上述情况，则可能是身份验证问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:32:16.540

终于设法修复它。登录到 sql server 配置管理器并在 sql server services 下我注意到所有服务都已停止。刚刚手动启动 SQL Server (MSSQLSERVER)，一切恢复正常。感谢大家的时间和投入。非常感激。

# django - Django、djblets、datagrid - 如何使用关系？

> ID：12512126
> 
> 赞同：2
> 
> 时间：2012-09-20T11:57:32.563
> 
> 标签：django, datagrid

假设我有这个模型：models.py

```
class Tool:
   name = models.CharField()
   price = models.DecimalField()

class Storage:
    tool = models.ForeignKey('tools')
    count = models.Integerfield() 
```

然后在 datagrids.py

```
class StorageDataGrid(DataGrid):
    tool = Column()
    count = Column()
    price = ?

def __init__(self, request):
        DataGrid.__init__(self, request, queryset=Storage.objects.all())
        self.default_columns = ['tool', 'count', 'price'] 
```

问题是，如何定义价格列。或者如何将它放在查询集中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:55:15.870

所以到目前为止我发现的唯一方法是通过以下方式实际扩展 Storage 的模型定义：

```
def price(self):
    return tool.price 
```

# php - 在 PHP 的 spl_autoload_register() 的 create_function() 代码中去掉全局变量

> ID：12512134
> 
> 赞同：0
> 
> 时间：2012-09-20T11:57:52.827
> 
> 标签：php, function, variables, syntax, global-variables

我正在尝试摆脱以下自定义函数中的全局变量。它的作用是注册类目录中文件中自动定义的类，并将它们重新定义为具有指定后缀的扩展类。

```
autoload_classes();
print_r(get_declared_classes());   

function autoload_classes() {
    global $class_files, $dirpath;
    $dirpath = dirname(__FILE__) . '/classes/';
    $class_files = array_map(create_function( '$a', 'return basename($a, ".php");' ), glob($dirpath . '*.php'));
    spl_autoload_register(
        create_function('$class_name', '
            global $class_files, $dirpath;
            if (in_array($class_name, $class_files)) 
                include($dirpath . $class_name . ".php");' )
    );

    foreach ($class_files as $class_name) {
        $class_name_alpha = $class_name . "_alpha";
        eval("class $class_name_alpha extends $class_name {};");    
    }
} 
```

我试过这样，但它会导致错误。我该如何解决？

```
autoload_classes();
print_r(get_declared_classes());   

function autoload_classes() {

    $dirpath = dirname(__FILE__) . '/classes/';
    $class_files = array_map(create_function( '$a', 'return basename($a, ".php");' ), glob($dirpath . '*.php'));
    spl_autoload_register(
        create_function('$class_name', '        
            if (in_array($class_name, ' . var_export($class_files, true) . ')) 
                include(' . $dirpath . ' . $class_name . ".php");
        ')
    );

    foreach ($class_files as $class_name) {
        $class_name_alpha = $class_name . "_alpha";
        eval("class $class_name_alpha extends $class_name {};");    
    }
} 
```

我的一些服务器低于 PHP v5.3，所以不能使用闭包。感谢您的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:28:53.560

好的，这行得通。我认为`var_export()`仅对数组是必需的，但包含字符串的变量也需要它。

```
autoload_classes();
print_r(get_declared_classes());   

function autoload_classes() {

    $dirpath = dirname(__FILE__) . '/classes/';
    $class_files = array_map(create_function( '$a', 'return basename($a, ".php");' ), glob($dirpath . '*.php'));
    spl_autoload_register(
        create_function('$class_name', '        
            if (in_array($class_name, ' . var_export($class_files, true) . ')) 
                include(' . var_export($dirpath, true) . ' . $class_name . ".php");
        ')
    );

    foreach ($class_files as $class_name) {
        $class_name_alpha = $class_name . "_alpha";
        eval("class $class_name_alpha extends $class_name {};");    
    }
} 
```

# actionscript-3 - ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。AS3

> ID：12512138
> 
> 赞同：1
> 
> 时间：2012-09-20T11:58:03.353
> 
> 标签：actionscript-3, flash, actionscript, removechild, addchild

我正在尝试使用 hitTestObject 函数制作一个带有子弹射击和船只相互碰撞的太空入侵者类型游戏，但我无法获得 removeChild(); 功能可以在没有上述错误的情况下工作。这是我应该怎么做的代码。

```
import flash.ui.Keyboard;
import flash.events.KeyboardEvent;
import flash.events.Event;
import flash.display.MovieClip;

var count:int = 1;

//adding the components
var NewBullet:MovieClip = new Bullet;

    var Ship_M:MovieClip = new Ship; 
    Ship_M.x = 270;
    Ship_M.y = 470;
    addChild(Ship_M);

    var Ship_E:MovieClip = new E_Ship;
    Ship_E.x = 270;
    Ship_E.y = 5;
    addChild(Ship_E);

stage.addEventListener(Event.ENTER_FRAME , Rec);
function Rec(e:Event):void{
  if (NewBullet.hitTestObject(Ship_E))
  {
    removeChild(Ship_E);
    removeChild(NewBullet);

  }

   if (Ship_E.hitTestObject(Ship_M))
   {
      removeChild(Ship_E);
      removeChild(Ship_M);
    }

    }

function Moves(e:Event):void{

            NewBullet.y -= 30;

    if (NewBullet.y < 0 )
        {

         removeChild(NewBullet);

          count++;
    removeEventListener(Event.ENTER_FRAME, Moves);

        }

          trace (count);
    }

//For Moving the Spaceship          
stage.addEventListener(KeyboardEvent.KEY_DOWN, Move);

function Move (event:KeyboardEvent):void{

 switch(event.keyCode)

    {
        case 37: 
            if (Ship_M.hitTestObject(Stop_L1))
            {
                Ship_M.x -=  0;
            }
            else
            {
                Ship_M.x -=  10;
            }
        break;

        case 38:
            if (Ship_M.hitTestObject(Stop_U1))
            {
                Ship_M.x -=  0;
            }
            else
            {
                Ship_M.y -=  10;
            }

        break;

        case 39:
            if (Ship_M.hitTestObject(Stop_R1))
            {
                Ship_M.x -=  0;
            }
            else
            {
                Ship_M.x +=  10;
            }

        break;

        case 40:
            if (Ship_M.hitTestObject(Stop_D1))
            {
                Ship_M.x -=  0;
            }
            else
            {
                Ship_M.y +=  10;
            }

        break;

        case 32:
        addChild(NewBullet);
        NewBullet.x = Ship_M.x;
        NewBullet.y = Ship_M.y;

        addEventListener(Event.ENTER_FRAME, Moves);
        break;

        default:

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:47:00.200

在您的特定情况下您可能不需要这个，但我有一个辅助函数来删除一个孩子并使其符合 GC 的条件，如下所示：

```
private function remove(child:DisplayObject):void
{
    if(child && child.parent)
    {
        child.parent.removeChild(child);
        child = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:08:34.577

替换你的

```
removeChild(SomeSprite); 
```

和

```
if (SomeSprite.parent)
    SomeSprite.parent.removeChild(SomeSprite); 
```

对象父级只能调用 removeChild。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:58:50.767

很可能您会执行两次 removeChild(NewBullet)，第一次是到达 Ship_E 时，第二次是离开边界时。一个简单的解决方案是每当您的 NewBullet 从舞台上移除时，为其设置一个标志，说“启用”，这意味着项目符号可以触发事件，并在您必须检查项目符号时在整个代码中检查它。

注意，你只有一颗子弹，这正常吗？

# php - PHP 和 AJAX：如何发送/处理错误响应？

> ID：12512140
> 
> 赞同：2
> 
> 时间：2012-09-20T11:58:04.290
> 
> 标签：php, javascript, xml, ajax

这有3个要素。

*   HTML 表单
*   AJAX 连接发送表单值并接收和解析来自 PHP 脚本的响应
*   PHP 脚本决定值是好还是坏并发送回适当的响应（可能是 XML 格式以便于 javascript 函数解析？）

当 PHP 查看并处理发送的数据，将其插入数据库或对其进行任何操作时，它需要发回响应或响应集合，以便 javascript 可以向用户显示正确的错误消息. 也许还在输入错误的元素周围放置红色边框或其他东西。

这通常是如何完成的，在两端？我在想 PHP 应该只发回简单的数字错误代码，而 javascript 会在不同的 div 中设置正确的文本错误消息。但我不太确定，我也不确定我应该在谷歌上搜索什么来找到答案。

（顺便说一句，我不是在谈论 HTTP 错误代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:11:24.653

使用此 jquery ajax 函数将数据发布到 php 文件
然后对数据执行任何操作（在数据库中发送或制作一些集合），然后回显您将在成功部分中捕获的结果。
然后把你的结果放在一个 div 或者你想要的地方。

```
$.ajax({           
            type: "POST",  
            url:"scripts/dummy.php",  
            data:"dummyData="+dummyData,

            beforeSend: function()
            {                   

            },
            success: function(resp)
            {               
                $("#resultDiv").html(resp);
            }, 

            complete: function()
            {

            },

            error: function(e)
            {  
            alert('Error: ' + e);  
            }  

    }); //end Ajax 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:15:41.743

您所要求的称为验证。
有服务器端验证和客户端验证。

第一个是最重要的，因为您不希望用户破坏您的数据库。第二个对您的客户很重要。因为它可以让他迅速响应表格中无效的任何内容（红色边框）。

如果您想验证表单客户端，通常使用 Javascript 完成。对于服务器端验证，我会使用 JSON 作为服务器和客户端之间的通信，因为 php 和 javascript 都知道如何处理它。

对于 php： http:
[//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)
[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

对于 JS。只需访问结果参数：

```
 success: function(response){
        var json = $.parseJSON(response.responseText);
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:31:40.657

Ajax 联系表示例：（最初是荷兰语，有点旧且编码错误）

请记住，此示例需要 jquery。只需从他们的网站下载 jquery.js 并将其添加到 HTML 中的脚本中

表单.html

```
<form id="frm_contact" name="contactformulier">
<label>Naam<span style="color:red">*</span></label><br/>
<input type="text" size="15" maxlength="50" name="naam" />
<br/><br/>

<label>Bedrijf</label><br/>
<input type="text" size="15" maxlength="50" name="bedrijf" />
<br/><br/>

<label>Email<span style="color:red">*</span></label><br/>
<input type="text" size="15" maxlength="50" name="tmail" />
<br/><br/>

<label>Bericht<span style="color:red">*</span></label><br/>
<textarea name="tekst">
</textarea>
<br/><br/>
(<span style="color:red">*</span>) Required fields!
<br/><br/>
<div id="subbutton">Send</div>
</form>
<div id="error-msg"></div> 
```

form.html (javascript 代码)

```
<script>
$(document).ready(function(){
var err="";
$("#subbut").click(function(){
$.post("PHP/ajax_contact.php", $("#frm_contact").serialize(),
function(data){
switch(data){
case '0':
err="<span><center>Thanks for contacting us!</center></span>";
$("#frm_contact").hide();
break;
case '1':
err="Invalid email!";
break;
case '2':
err="Fill in all fields please!";
break;
case '3':
err="Error sending this mail.";
break;
default:
err="<center>Mail server is offline.</center>"; //Or whatever error
$("#frm_contact").hide();
}
$("#error-msg").html("<br/>"+err+"<br/>");
});
});
});
</script> 
```

PHP/ajax_contact.php

```
<?php

function check_email_address($email) {
  if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
    return true;
}
return false;
}

$naam = trim($_POST['naam']);
$bedrijf = trim($_POST['bedrijf']);
$tmail = trim($_POST['tmail']);
$tekst = trim($_POST['tekst']);
if(isset($naam ) && isset($tmail) && isset($tekst)){
    if(!empty($naam) && !empty($tmail) && !empty($tekst)){
        if(check_email_address($tmail)){
            $to      = 'name@something.com';
            $subject = 'Some subject';
            $message = 'Name: '.$naam.'  ////  Company: '.$bedrijf.'
-------------------------------------------------------
'.$tekst.'
-------------------------------------------------------
Sended on: '.date("F j, Y, g:i a").' - from: www.somthing.com';
            $headers = 'From: '. $tmail . "\r\n" .
                'Reply-To: '. $tmail . "\r\n" .
                'X-Mailer: PHP/' . phpversion();

            mail($to, $subject, $message, $headers);
            echo '0'; //Succes <3
        }else{
            echo '1'; //Invalid mail adres
        }
    }else{
        echo '2'; //Empty fields
    }
}else{
    echo '3'; //Fail post
}

?> 
```

# lisp - 如何检查返回的项目是否是列表本身？

> ID：12512143
> 
> 赞同：1
> 
> 时间：2012-09-20T11:58:18.250
> 
> 标签：lisp, common-lisp

早晨 -

我正在尝试查看是否有办法检查从列表返回的项目是否是列表本身。

例如

```
(elt '(a (b c) d) 1) 
```

有没有办法检查返回的项目是一个列表？

我尝试使用长度，

```
(length (elt '(a (b c) d) 1)) 
```

但如果给定一个不是列表的项目，则会引发错误。

简而言之，我正在寻找一种方法来遍历列表的每个元素并检查它是否是列表。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T12:09:45.997

listp 告诉你：

```
(listp (elt '(a (b c) d) 1)) 
```

# xcode - 在 Xcode 中更新滑动手势删除时的 sqlite 3 字段值

> ID：12512150
> 
> 赞同：0
> 
> 时间：2012-09-20T11:58:48.780
> 
> 标签：xcode, sqlite, uitableview, sql-update, uiswipegesturerecognizer

大家好，我有一个应用程序可以将 sqlite 数据库中的数据加载到表视图中。此视图中显示的字段是在 sqlite 数据库中将字段设置为值 = YES 的条目。所以当应用程序加载时，它会自动检查数据库并加载所有具有值的字段：Fav = YES。这就是为什么，当我滑动删除时，我需要该条目消失，但另外我需要它来更改相应数据库中字段的值并将其设置为 Fav = NO。这是我的代码片段，希望有人可以帮助我！
FavReal 是类名

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if(editingStyle == UITableViewCellEditingStyleDelete)
    {

        @try {

        sqlite3_stmt *compiled_statement10;

        if(sqlite3_open([PathDB UTF8String], &db2) == SQLITE_OK) {

            FavReal *SelectedFav;

            //remove the deleted object from your data source.
            //If you're data source is an NSMutableArray, do this
            NSString *formatedSql2 = [NSString stringWithFormat:@"UPDATE Sheet1 SET Fav = 'NO' WHERE field3 = '%@'" , SelectedFav.description ];
            const char *sql = [formatedSql2 UTF8String];
            int success2 = sqlite3_step(compiled_statement10);

            // sqlite3_reset(compiled_statement1);
            if (success2 != SQLITE_ERROR) {
                NSLog(@"Successfully deleted");
                sqlite3_last_insert_rowid(db2);
            }

            if (sqlite3_prepare_v2(db2, sql, -1, &compiled_statement10, NULL) != SQLITE_OK) {
                NSLog(@"!!!!!!!!!!!!!!!!!!!ERRRRROOOOOOORRRRRRRRR!!!!!!!!!!!!!!!!!!!!!!!!!");
                //NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
            }
            int success = sqlite3_step(compiled_statement10);

            // sqlite3_reset(compiled_statement1);
            if (success != SQLITE_ERROR) {
                NSLog(@"Successfully deleted the Favorite item named : %@",SelectedFav.description);
                sqlite3_last_insert_rowid(db2);

            }

            [self.theFav removeObjectAtIndex:indexPath.row];
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

        }}

    @catch (NSException *exception) {

        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db2));

    }
    @finally {
        //   sqlite3_finalize(sqlStatement);
        sqlite3_close(db2);

        return theFav;
    }
}
} 
```

请注意，此代码没有让我到达我要去的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:49:15.800

尝试这样的事情：

```
if (sqlite3_open(..., &db2) != SQLITE_OK) {
    return error;
}
@try {
    sqlite3_stmt *update_statement;
    const char *sql = ...;
    if (sqlite3_prepare_v2(db2, sql, -1, &update_statement, NULL) != SQLITE_OK) {
        return error;
    }
    @try {
        int success = sqlite3_step(update_statement);
        if (success != SQLITE_DONE) {
            return error;
        }
    }
    @finally {
        sqlite3_finalize(update_statement);
    }
@finally {
    sqlite3_close(db2);
} 
```

# html - 我可以用简写设置三个边框的 CSS 边框宽度吗？

> ID：12512152
> 
> 赞同：0
> 
> 时间：2012-09-20T11:58:57.610
> 
> 标签：html, css

我已经为 .message 类设置了 CSS 边框。

但是我想让它只有顶部边框是可见的内联样式。有人可以告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:02:16.080

您可以使用速记符号设置所有边框，然后覆盖您想要以不同方式呈现的一个边框，例如：

```
.message {
    border: 2px solid #f90;
    border-top: 2px solid transparent;
} 
```

或者，为简洁起见，您可以简单地覆盖该`border`(`color`或) 的一个属性：`width``style`

```
.message {
    border: 2px solid #f90;
    border-top-width: 0; /* or whatever */
    border-top-style: none; /* or whatever */
    border-top-color: transparent; /* again, or whatever... */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:04:36.280

如果您使用速记，则必须设置所有宽度，因此您将无法使用从 .message 类应用的宽度。

```
.test { border-width: 1px 0 0 0 } /* top right bottom left */ 
```

# asp.net-mvc-3 - 打印一个稍后在 Razor 视图中已知的值

> ID：12512153
> 
> 赞同：0
> 
> 时间：2012-09-20T11:59:12.587
> 
> 标签：asp.net-mvc-3, razor

Razor 中是否有一种方法可以在页面上打印一些 HTML，而稍后在视图中知道该值？

例如：我想打印一个昂贵计算的总和，并且该总和应该在 HTML 中的项目之前。但是对于下面的示例，它总是会打印 0。我只想计算总和一次。

我想在视图中解决这个问题，而不是在 csharp 助手或客户端（css、javascript 等）

```
@{
  var sum = 0;
}

<table>
@* I would like to print here the sum which is known after the foreach loop*@
 <tr><td>total: @sum</td></tr>

    @foreach (var item in items)
    {
      <tr>
        @{ 
          var x= item.expensiveCalculation(); 
          sum+= x;
        }
        //print item with x
        <td>@x</td>

      </tr>
    }

</table> 
```

编辑：非常重要的是，昂贵的计算（）每个项目只计算一次！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:00:29.033

您的模型不适合视图的要求。句号。

因此，当您的模型不适应您的视图的要求时，您继续定义一个视图模型，以便所有昂贵的操作都在控制器内完成。

所以：

```
public class ItemViewModel
{
    public decimal Price { get; set; }
    public string Name { get; set; }
} 
```

现在您的视图变成了视图模型的强类型，并且不再有昂贵的操作：

```
@model IEnumerable<ItemViewModel>
<table>
    <tr>
        <td>
            total: @Model.Sum(item => item.Price)
        </td>
  </tr>
  @foreach (var item in Model)
  {
      <tr>
          <td>@item.Name - @item.Price<td>
      </tr>
  }
</table> 
```

现在在您的控制器操作中准备此视图模型并将其传递给视图：

```
public class SomeAction()
{
    IEnumerable<Item> items = ... go and fetch your domain models from wherever you are fetching them
    // now let's build the view model
    var model = new MyViewModel
    {
        Items = items.Select(x => new ItemViewModel
        {
            Name = x.Name,
            Price = x.expensiveCalculation()
        })
    };

    // and we are obviously passing the view model to the view, not the domain model
    return View(model);
} 
```

如您所见，我们在控制器中为每个元素执行昂贵的操作，以便将其绑定到视图模型的相应属性`Price`（视图模型预先计算的属性。

下次当你在 ASP.NET MVC 中遇到问题时，不要忘记视图模型是解决问题的方法。

# wcf - WCF 中的并发调用，同时调用了耗时的服务调用

> ID：12512156
> 
> 赞同：0
> 
> 时间：2012-09-20T11:59:46.600
> 
> 标签：wcf, web-services, silverlight, c#-4.0

我正在 WCF Web 服务中进行一些耗时的文件操作，所以在此调用完成之前，我无法从我的应用程序进行任何其他服务调用。

所以我计划使用 TPL

```
 Task.Factory.StartNew(() =>
            {                    
                CheckFileandCopy(path,fileName);
            }); 
```

它可以工作，并返回 true，但问题是，完成的事件没有实际结果，因为进程在单独的线程中运行，所以没有得到实际的完成事件，一旦任务完成，我如何返回完成事件完成，以及**如何在调用耗时方法时进行并发调用**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:13:38.427

你基本上有两个选择：

*   做**异步调用客户端**。如果您生成包含异步方法的代理（例如，请参阅[此 msdn 页面](http://msdn.microsoft.com/en-us/library/ms730059.aspx)，这将很容易。
*   使事情**异步，服务器端**。这与您在示例中所做的类似。唯一缺少的是带有*实际*结果的回调。为此，您可以使用[双工方案](http://msdn.microsoft.com/en-us/library/ms731064.aspx)，其中客户端能够接收来自服务的调用，就像客户端也是服务一样。请注意，并非所有场景/绑定都支持这一点。

在这两种情况下，阅读[这篇](http://msdn.microsoft.com/en-us/library/ms731193.aspx)关于会话和并发的 msdn 文章可能有助于理解事情。

# python - 在python中逐行求和两个包含浮点数的文本文件

> ID：12512159
> 
> 赞同：0
> 
> 时间：2012-09-20T12:00:03.587
> 
> 标签：python, text, gzip, sum, text-files

所以我有 4,000 个大的压缩文本文件。由于它们的大小，我需要逐行总结它们。理想情况下（我认为）我想打开一个，然后循环遍历其他 3,999 个，然后简单地将它们的值相加到第一个中。这是我到目前为止所拥有的

```
with gzip.open('foo1.asc.gz','r') as f:
    for i in xrange(6):  # Header is 6 lines
        f.next()
    line = f.readline()
    foo1=map(float, line.strip().split())
    print foo1 
```

这将返回我需要求和的值`foo1`；所以输出是一个逗号分隔的浮点数列表（例如，`[1.2, 6.0, 9.3...]`）。

因此，为了清楚起见，如果我要这样做，`foo2 = [1.2, 6.0...]`那么我可以 sum`foo1`并`foo2`得到`[2.4, 12.0...]`, overwriting `foo1`。然后继续遍历每一行以覆盖`foo1`. 当然，这需要遍历 4k 文件。

如果有人可以帮助我完成 2 个循环和/或求和运算，我将不胜感激。

***** 更新***** 现在使用以下代码：**

 **```
foo1=[]
with gzip.open('foo1','r') as f:
    skip_header()
    for line in f:
        foo1.append([float(i) for i in line.strip().split()])

with gzip.open('foo2','r') as f:
    skip_header()
    for (i, line) in enumerate(f):
        foo1[i] = [j + float(k) for (j, k) in zip(foo1[i], line.strip().split())] 
```

这有效但很慢。我的输入大约需要 11 分钟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:10:41.360

### 以正常的python方式......

你不是在迭代这些线......

```
~ $ cat test.txt 
1.0
2.0
3.0
4.5
5.0
6.0 
```

但是，您可以阅读所有行，然后对其应用浮点数：

```
>>> with open('test.txt', 'r') as f:
...      lines = f.readlines()
...      foo1=map(float, lines)
...      print foo1
... 
[1.0, 2.0, 3.0, 4.5, 5.0, 6.0]
>>> sum(foo1)
21.5 
```

### 但是，您应该使用 NumPy！

*总结所有文件的粗略解决方案*

```
import numpy as np

totalsum=0
ListofFiles = ['foo1','foo2']
# from the help of np.loadtxt
# Note that `If the filename extension is .gz or .bz2, the file is first decompressed`
# see the help for that function.
for FileName in ListofFiles:
    totalsum=totalsum+np.sum(np.loadtxt(FileName,skiprows=6)) 
```

*对来自不同文件的元素求和的解决方案*

```
# use with caution it might hog your memory
import numpy as np

totalsum=0
ListofFiles = ['foo1','foo2']

arrayHolder = np.loadtxt(FileName,skiprows=6)
for idx,FileName in enumerate(ListofFiles[1:]):
    arrayHolder=np.hstack((arrayHolder,np.loadtxt(FileName,skiprows=6)))  
# see documentation for numpy.hstack and my example below.

# now you have a huge numpy array. you can do many things on it
# e.g
# sum each file if the above test.txt had an identical file named test1.txt
np.sum(arrayHolder , axis=0)
# output would be:
array([2.0, 4.0, 6.0, 9.0, 10.0, 12.0])
# sum each ith element accross files
np.sum(arrayHolder , axis=1)

# more extended
In [2]: a=np.array([1.0,2.0,3.0,4.5,5.0,6.0])
In [4]: b=np.array([1.0,2.0,3.0,4.5,5.0,6.0]) 
In [9]: c=np.vstack((a,b))  
In [10]: c
Out[10]:
array([[ 1\. , 2\. , 3\. , 4.5, 5\. , 6\. ],
[ 1\. , 2\. , 3\. , 4.5, 5\. , 6\. ]])
In [11]: np.sum(c, axis=0)
Out[11]: array([ 2., 4., 6., 9., 10., 12.])
In [12]: np.sum(c, axis=1)
Out[12]: array([ 21.5, 21.5])

# as I said above this could chocke your memory, so do it gradualy, 
# dont try on all 4000 files at once ! 
```

请注意，对于 Pierre 提供的解决方案，该解决方案将运行得更快，因为许多 NumPy 函数是编写的，并且是 C 和优化的。如果您需要在 4000 行上运行，我希望 for 循环会更慢...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:16:16.663

You'll probably have to keep one list in memory, the one storing the lines of your first file.

```
with gzip.open(...) as f:
    skip_header()
    foo1 = [[float(i) for i in line.strip().split()] for line in f] 
```

*   Note: here, we're building the list at once, meaning that the whole content of `f` is loaded in memory. That can be an issue if the file is large. In that case, just do:

    ```
    foo1 = []
    with gzip.open(...) as f:
        skip_header()
        for line in f:
            foo1.append([float(i) for i in line.strip().split()]) 
    ```

Then, you could open a second file, loop on its lines and add the values to the corresponding entry of `foo`:

```
with gzip.open(file2) as f:
    skip_header()
    for (i, line) in enumerate(f):
        foo1[i] = [j + float(k) for (j, k) in zip(foo1[i], line.strip().split())] 
```

There shouldn't be much problem, unless you have a different number of columns in your files.

If your file are really large, memory can be an issue. In that case, you may want to work by chunks: read only a few hundred lines from the first file and store them in a list, then proceed as described, using as many lines as you read in the first file, then start again for another few hundred lines...

**EDIT**

Given the computation times you describe in the *edit*, this solution is clearly suboptimal. You can't load a whole file in memory, so you'll have to work by chunk. It might be better to follow a workflow as:

1.  Create an empty list `foo1`.
2.  Open the first file, read a given chunk of lines, transform these lines into a numpy `ndarray` and append this array to `foo1`.
3.  Repeat step two for another chunk of lines, till you read the whole input file

At this point, you should have a `foo1` list with as many entries as chunks you defined, each entry being a numpy array. Now

1.  Open the second file, read as many lines as you did in step #2, transform these lines into a numpy array `foo2_tmp`
2.  Add `foo2_tmp` to `foo_1[0]`, *in place*: that is, do `foo_1[0] += foo2_tmp`. Remember, `foo_1[0]` is your first chunk, a `ndarray`.
3.  Repeat step 5\. for another chunk of lines, and update the corresponding entry in `foo_1`
4.  Repeat step 6\. till you read your second file
5.  Repeat steps 4.-7\. for your third file

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:18:29.517

This is untested. Note that it's probably in-efficient (and may not even be allowed) to attempt to have 4,000 filehandles open at once, so the file at a time approach is the most practical. Below uses a `defaultdict` which allows for mis-matching numbers of rows in each file, but still enables summing of overlapping row numbers.

```
from itertools import islice
from collections import defaultdict
from glob import iglob

def sum_file(filename, dd):
    file_total = 0.0
    with gzip.open(filename) as fin:
        for lineno, line in enumerate(islice(fin, 6, None)): # skip headers
            row_total = map(float, line.split())                
            dd[lineno] += row_total
            file_total += row_total
    return file_total

dd = defaultdict(float)
for filename in iglob('foo*.asc.gz'):
    print 'processed', filename, 'which had a total of', sum_file(filename, dd)

print 'There were', len(dd), 'rows in total'
for lineno in sorted(dd.keys()):
    print lineno, 'had a total of', dd[lineno] 
```**

# java - 关于构建 xforms 编辑器的问题？

> ID：12512167
> 
> 赞同：0
> 
> 时间：2012-09-20T12:00:39.577
> 
> 标签：java, xml, validation, xforms

抱歉，这个问题可能看起来有点模糊。但我的问题描述是我想构建一个 xForm 编辑器（最好在 GWT 中）。如果有人能给我一些提示、链接或材料，我将不胜感激，我应该研究这些提示、链接或材料来回答我的以下问题。

1.  当我在编辑器中拖放控件时，如何生成等效的 xml 代码？

2.  然后如何确保这个生成的 xml 符合 xforms 模式定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:35:24.473

你可以看到[Orbeon Form builder](http://www.orbeon.com/forms/orbeon-form-runner)是如何工作的，如果你认为你想开发类似的东西，然后尝试查看代码。由于 Orbeon 是在 Java/J2EE 上开发的开源，您可以获取源代码。这将是一个很好的起点。

干杯。

# ajax - Safari 6 缓存 POST 请求

> ID：12512168
> 
> 赞同：3
> 
> 时间：2012-09-20T12:00:39.563
> 
> 标签：ajax, caching, post, ios6, safari6

> **可能重复：**
> [iOS6 Safari 缓存 $.ajax 结果](https://stackoverflow.com/questions/12506897/ios6-safari-caching-ajax-results)

此处指出的问题： [iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/ios6-safari-caching-ajax-results)

我的Q是：

1.  是否有指向一些苹果文档的指针来解释这种变化的性质？他们认为这是一个错误（何时修复？）还是一个功能？
2.  与此同时，除了向客户端应用程序/站点发出的所有 POST 请求添加缓存破坏器之外，还能做什么？
3.  是否有可以从服务器返回的标头来禁止 safari 6 浏览器的这种行为？

# java - FlyingSaucer ITextRenderer 完成错误（不平衡的保存/恢复和空白 PDF）

> ID：12512169
> 
> 赞同：1
> 
> 时间：2012-09-20T12:00:43.223
> 
> 标签：java, itext, flying-saucer

我正在使用带有 IText 的 Flying Saucer，以便从 HTML 文件生成 PDF，特别是利用`org.xhtmlrenderer.pdf.ITextRenderer`该类。我的代码很简单。生成代码被封装在这样的方法中：

```
/* PDfGenerator class only has ONE instance */
public PdfGenerator() {
    this.renderer = new ITextRenderer(); //This is a class variable that only gets instantiated ONCE
}

public void generatePDF(String outputFilePath, String htmlContent) {
    renderer.setDocumentFromString(htmlContent);
    renderer.layout();
    renderer.createPDF(new BufferedOutputStream(
          new FileOutputStream(new File(outputFilePath)), BUFFER_SIZE), true);
    renderer.finishPDF();
} 
```

编辑：

我的生成器类实际上是由 Spring 作为单例对象管理的。我有一个管理器类，它有一个 ExecutorService 作为 PDF 生成任务的队列。该管理器使用单例生成器来生成对象。因此，我只实例化 ITextRenderer 一次并重用它。现在我将队列设置为同时操作最多 2 个线程。我刚刚意识到这是否可能导致了这种情况，因为我遇到了两个线程正在使用我的一个渲染器来渲染两组单独的 PDF 的情况。

现在，我才意识到我实际上每次渲染都调用了两次“完成”！一个在`createPDF()`错误调用中（传递 true 作为第二个参数），一个显式调用`finishPDF()`.

*这已经运行了很长一段时间，并且大部分*时间都成功地生成了 PDF 。我偶尔会遇到两种不同类型的错误：

1.  由于不平衡的保存/恢复状态运算符而导致的运行时异常。示例堆栈跟踪如下：

    ```
    java.lang.RuntimeException: Unbalanced save/restore state operators.
    at com.lowagie.text.pdf.PdfContentByte.restoreState(Unknown Source) ~[itext-2.0.8.jar:na]
    at org.xhtmlrenderer.pdf.ITextOutputDevice.setClip(ITextOutputDevice.java:737) ~[core-renderer-R8.jar:na]
    at org.xhtmlrenderer.pdf.ITextRenderer.paintPage(ITextRenderer.java:387) ~[core-renderer-R8.jar:na]
    at org.xhtmlrenderer.pdf.ITextRenderer.writePDF(ITextRenderer.java:348) ~[core-renderer-R8.jar:na]
    at org.xhtmlrenderer.pdf.ITextRenderer.createPDF(ITextRenderer.java:315) ~[core-renderer-R8.jar:na]
    at org.xhtmlrenderer.pdf.ITextRenderer.createPDF(ITextRenderer.java:280) ~[core-renderer-R8.jar:na] 
    ```

2.  生成的 PDF 有缺失/变形的部分，或者最坏的情况是空白页。

对于问题 2，我相当有信心这是由于调用了 finishPDF() 两次。但是，对于问题 1，它发生*在*对 finishPDF() 的调用执行之前，所以我实际上不知道这是否是导致问题的原因。

有没有人在将飞碟与 iText 一起使用时处理这两个问题的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:34:33.860

我遇到的问题基本上是**在不同的线程上同时访问同一个 ITextRenderer 实例，从而弄乱了当前正在运行的 PDF 生成作业的处理。**

我已经让 Executor 服务只使用 1 个线程并使生成作业按顺序进行，根据我的观察，只要我一次处理一个，我就可以重用相同的 ITextRenderer。

我已经向飞碟库的开发人员发送了一个查询以确认这一点，我会在他们回复时更新这篇文章。

顺便说一句，我只需要弄清楚使用 1 个线程和 1 个预实例化的 ITextRenderer 实例生成或使用多个线程但每个线程实例化 ITextRenderer 是否更有效。

# python-3.x - Python 3.2.3 str 不可用于字典？

> ID：12512170
> 
> 赞同：-1
> 
> 时间：2012-09-20T12:00:43.743
> 
> 标签：python-3.x

> **可能重复：**
> [TypeError：“str”对象不可调用（Python）](https://stackoverflow.com/questions/6039605/typeerror-str-object-is-not-callable-python)

我正在烧毁 Python 3.2.3。但我的教科书大约是2.7和3.0。从教科书来看，这还不错：

```
dict1 = {'one':1, 'two':2, 'three': {'three.1': 3.1, 'three.2': 3.2 }}
str1 = str(dict1) 
```

为什么我的 Python 应该大喊：TypeError: 'str' object is not callable

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:19:28.697

You probably instantiated an object called 'str' earlier. This would result in the given error.

Python lets you override the type object str (meaning strings) without warning.

For example, the following code would produce your error:

```
str = 'foo'
dict1 = {'one':1, 'two':2, 'three': {'three.1': 3.1, 'three.2': 3.2 }}
str1 = str(dict1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:18:51.750

You may have defined a variable called `str` before, conflicting with the `str()` function

# sql - SQL "group by" like - 分组算法

> ID：12512171
> 
> 赞同：0
> 
> 时间：2012-09-20T12:00:47.303
> 
> 标签：sql, algorithm, group-by, jtable, grouping

我有一个超过 2 列的表（比如说 A、B 和 C）。一列包含一些数字（C），我想做一个“分组”，比如分组，对C中的数字求和，但我不知道这样做的算法。

我尝试按每一列对表格进行排序（从最后一个到第一个，除了数字列（C），所以在这种情况下：排序（B）然后排序（A）），然后，只要`n`行在A中包含相同的值和 B 在`n-1`第 行中，我将第 1 行的数字添加`n`到`n-1`第 1 行（在 C 列中），然后删除第`n`th 行。否则，如果行中的 A 或 B 值与行`n`中的 A 或 B 值不同`n-1`，我将移至下一行。然后我重复算法直到表中的最后一行。但不知何故，这并不是一直有效，特别是当有更多列时（有些行仍未分组，可能是因为排序方法）。

我想知道这是否是一个好的分组算法，我需要在排序方法中寻找问题，或者我需要使用另一种（排序和/或分组）算法以及哪个算法。谢谢你。

LE：显然，在彻底检查了代码并修复了像我这样的初级程序员经常犯的一些小错误之后，我使用的算法运行良好 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:39:57.610

我认为这样做的一个好方法是将您的行包装到一个类中，实现 equals 方法，然后使用 Map 将值相加：

```
public class MyRow {
    private Long columnA;
    private String columnB;
    private int columnC;

    @Override
    public boolean equals(final Object other) {
        if (!other instanceof MyRow) {
            return false;
        }
        final MyRow otherRow = (MyRow) other;
        return this.columnA.equals(otherRow.getColumnA()) && this.columnB.equals(otherRow.getColumnB);
    }
} 
```

然后您可以遍历所有行，并创建一个 Map 来保存 C 的总和。

```
final Map<MyRow, Integer> computedCSums = new HashMap<MyRow, Integer>();

for (final MyRow myRow : myRows) {
    if (computedCSums.get(myRow) == null) {
        computedCSums.put(myRow, myRow.getColumnC());
    } else {
        computedCSums.put(myRow, computedSums.get(myRow) + myRow.getColumnC());
    }
} 
```

然后，要获得任何行的分组 C 的总和，您只需执行以下操作：

```
computedCSum.get(mySelectedRow); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T02:50:25.310

我认为关于 group by 应该考虑三件事

1.  小于或等于是抽象
    比较两行A，B根据它的列（C1..Cn）是这样的：比较从C1到Cn的每一列，如果我们能得到哪个小于，则返回，或者如果两个值相等，然后我们去比较下一个，重复这个直到返回。

2.  我们选择哪种算法
    1）建立一个二叉搜索树或哈希表来存储元组，当我们得到一个元组时，搜索相等的元组，如果有，则合并具有相同组值的元组，否则将其放入我们的搜索结构
    2）读取一些元组，然后排序，遍历缓冲区并合并我更喜欢 1 而不是 2 的同一组。

3.  内存大小
    如果输出输入很大，我们必须考虑内存限制。我们可以使用合并算法来处理这个问题。如果内存超过了我们的限制，那么当我们读完输入时，将内存中的元组按组列顺序写入磁带，然后将结果集合并到磁带中。

# java - 使用 Java JBDC CacheRowSet 在多个表上保存数据？

> ID：12512172
> 
> 赞同：0
> 
> 时间：2012-09-20T12:00:48.093
> 
> 标签：java, mysql, jdbc, rowset, cachedrowset

正如上面的问题。我可以使用 JOIN 查询语句在 CachedRowSet 上一次将数据保存到多个表吗？

示例 sql 查询语句如下

> SELECT * FROM student INNER JOIN class ON student.class_id = class.id

是否有可能或者我应该使用 JoinRowSet 或其他东西？任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:12:11.717

你应该使用 JoinRowSet

参考[http://www.visualbuilder.com/java/jdbc/tutorial/joinrowset/](http://www.visualbuilder.com/java/jdbc/tutorial/joinrowset/)

使用 2 CachedRowSet 也是可以实现的。但无法保证数据完整性。

另请参阅更多详细信息

[http://docs.oracle.com/javase/tutorial/jdbc/basics/cachedrowset.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/cachedrowset.html)

# javascript - Pageinit 多次触发

> ID：12512174
> 
> 赞同：0
> 
> 时间：2012-09-20T12:01:11.853
> 
> 标签：javascript, cordova, jquery-mobile

我正在开发一个 jQuery Mobile 和 PhoneGap 应用程序。我正在使用这段代码：

```
$('#contact').live('pageinit', function() {
    //$.mobile.loading('show');
    theme();
    getData('contact/list',contactList);
    //$.mobile.loading('hide');
}); 
```

第一次访问页面时，效果很好。在第二次尝试中，事件被多次触发。我尝试使用`bind`但它不起作用。

我认为这与`live`事件有关。每次我初始化页面时都会绑定它，这使它成为多个。以这种方式链接时问题得到解决：`window.location.href`-它重新创建 DOM。不幸的是我不能使用它。

有没有其他方法可以处理`pageinit`？

我试图早点找到它，但没有成功。还看了：[click() 多次触发](https://stackoverflow.com/questions/3460562/click-firing-multiple-times)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:38:22.997

我通常使用该`on()`方法而不是`live()`（现在已弃用）。我给我的每个页面容器一个`id`，所以在索引页面上它可能是`index`，然后我可以绑定到如下事件：

```
$(document).on("pageinit", "#index", function() {
    //do stuff here
}); 
```

页面显示的工作方式也相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:41:59.373

理论上，任何可以被“live”绑定的事件都可以直接绑定。直接绑定的好处是它将（iirc）覆盖先前绑定的处理程序。因此，您将只有一个处理程序，因此在后续加载时不会多次触发它。

尝试类似：

```
$("#contact").pageInit(function() {
  theme();
  getData('contact/list', contactList);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:50:23.550

在 jquery mobile 中绑定事件时，您必须非常小心，以确保它们不会被多次绑定。在 jquery mobile 中导航到新页面不会像在更传统的导航中那样“重置”绑定事件。您面临的问题很可能是由于每次访问页面时都会绑定到事件的函数，这意味着您访问页面的次数越多，执行该函数的次数就越多。为了确保事件只绑定一次，我建议在初始页面的标题中绑定。这样一劳永逸地绑定了事件，每当这个页面启动时，函数就会运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T14:33:09.967

您可以尝试将 data-ajax="false" 添加到您提交的任何可能创建页面的多个版本（多次触发事件）的表单中。

# c++ - 程序的退出状态

> ID：12512177
> 
> 赞同：1
> 
> 时间：2012-09-20T12:01:29.140
> 
> 标签：c++, c

我遇到了一种情况，我必须获取程序的退出状态，即`exit()`函数返回的数字。

在 LINUX 中，使用`$?`命令我得到了状态。有没有其他方法可以在 Windows 中获得这种状态？

我注意到的另一件事是，如果我们将负数传递给`exit()`函数，它会使我的 IDE 崩溃，并且`$?`在这种情况下命令也无法提供状态。我检查了`exit()`函数，它的引用说我们可以传递一个整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:40:58.620

程序返回值在不同的操作系统上意味着不同的东西。在 Unix-y 系统上，只有 0-255 的值是有效的（1 个无符号字节）。请注意，这意味着不允许使用负值，这可能是您的 IDE 问题的原因。FreeBSD 在 中引入了许多特定含义[`sysexits.h`](http://www.freebsd.org/cgi/man.cgi?query=sysexits&sektion=3)，虽然这在我使用过的 Linux 发行版中肯定存在，但唯一真正被普遍接受的含义是`0`成功和非`0`失败。正如所`Pete Becker`指出的，`EXIT_SUCCESS`和`EXIT_FAILURE`是标准定义的宏（`0`分别`1`在 Unix-y 平台上，但实现定义）。

在 Windows 上，您会得到一个 32 位有符号整数（允许使用负数，不知道它们是否意味着什么）。再次，`0`是成功，其他价值观意味着[各种各样的事情](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681381%28v=vs.85%29.aspx)。像`echo $?`，您可以使用`echo %errorlevel%`在控制台中查看最后一个程序的退出代码。

另请注意，我的`N3337`（非常接近 C++11 标准的草案）在`section 3.6.1 paragraph 5`：

> 如果控制到达末尾`main`没有遇到`return` 语句，效果就是执行`return 0;`

# javascript - slickgrid 自定义下拉编辑器

> ID：12512178
> 
> 赞同：2
> 
> 时间：2012-09-20T12:01:29.997
> 
> 标签：javascript, slickgrid

我正在 slickgrid 上工作，其中一个单元格需要显示一个下拉列表（选择列表），其中的值来自一个安静的服务。这些值对于每一行都是不同的。

我应该能够从此列表（下拉列表）中选择一个值，并且它应该将该值保留在单元格中。

如果有人可以帮助解决这个问题，我会很高兴。

```
this.productColumns = [
            {
                id: 'statusid',
                name: 'Status',
                field: 'statusid',
                width: 65,
                sortable: true
            },
            {
                id: 'grade',
                name: 'Grade',
                field: 'grade',
                width: 80,
                sortable: true
            },
            {
                id: 'position',
                name: 'Position',
                field: 'originalPosition',
                width: 80,
                sortable: true
            },
            {
                id: 'tyresize',
                name: 'Tyre Size',
                field: 'tyreSize',
                editable: true,
                width: 140,
                sortable: true
            },
            {
                id: 'tyredetail',
                name: 'Tyre Detail',
                field: 'tyredetail',
                editable: true,
                width: 125,
                editor: this.selectRangeEditor

            }
   ]

      selectRangeEditor: function (args) {

        var $select = $("");
        var defaultValue = "";
        var scope = this;
        this.init = function () {
            var tyreOptionsList = new TyreOptionsModel(args.item.id);
            tyreOptionsList.deferred.done(function () {
                var opt_values = tyreOptionsList.toJSON();
                var count = 0;
                for (var cnt in opt_values) {
                    if (opt_values.hasOwnProperty(cnt)) {
                        count++;
                    }
                }
                option_str = ""
                var i ;
                for (i = 0; i < count-1; i++) {
                    val = opt_values[i].tyreOptionId;
                    txt = opt_values[i].tyreDetail;
                    option_str += "<OPTION value='" + val + "'>" + txt + "</OPTION>";
                }
                $select = $("<SELECT tabIndex='0' class='editor-select'>" + option_str + "</SELECT>");
                $select.appendTo(args.container);
                $select.focus();
            });
        };

       this.destroy = function () {
          $(args.container).empty();
        };

        this.focus = function () {
          $select.focus();
        };

        this.serializeValue = function () {
          return $select.val();
        };

        this.applyValue = function (item, state) {
          item.attributes[args.column.field] = state;
        };

        this.loadValue = function (item) {
          defaultValue = item.attributes[args.column.field];
            $select.val(defaultValue);
        };

        this.isValueChanged = function () {
           return ($select.val() != defaultValue);
       };

       this.validate = function () {
           return {
               valid: true,
               msg: null
           };
       };

        this.init();
        return $select.val();
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:35:08.193

你看到我对[这个问题](https://stackoverflow.com/questions/3211956/slickgrid-select-editor?rq=1)的回答了吗？

如果您能够在生成页面时从其余服务中获取每一行的选项，您可以在客户端使用我的解决方案......

正如我从您的评论中了解到的，问题是如何在用户更改某些字段后回发在网格中所做的更改......

我通过添加以下代码解决了这个问题，注意表单提交的 JS 代码，在服务器端处理传入的数据，使用 RESTfull 服务保存它。

```
<div id="myGrid" style="width:90%;height:250px;"></div>
<form action="" method="POST">
  <input id="save_grid_changes" disabled="disabled" type="submit" value="Save changes to {{obj_type}}(s)">
  <input type="hidden" name="obj_type" value="{{obj_type}}">
  <input type="hidden" name="data" value="">

</form>

<script>
$(document).ready(function() {

    grid = new Slick.Grid($("#myGrid"), griddata, columns, options);

    $("form").submit(
      function() {
        // commit the last edit ...
        grid.getEditController().commitCurrentEdit(); 
        grid.resetCurrentCell();
        $("input[name='data']").val( $.toJSON(griddata) );
        // ("input[name='data']").val($.param(data));
    });
  });  
</script> 
```

# c - 复制字符串数组时的错误结果

> ID：12512184
> 
> 赞同：0
> 
> 时间：2012-09-20T12:01:39.733
> 
> 标签：c, arrays, pointers

我有以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char* user;
char* passwd;
int nr;

void test()
{
    int i=0;
    for(i=0;i<argc;i++)
    printf("Hello %s \n",user);
}

int main(int argc,char*argv[])
{
    int i;
    nr=argc;
    for (i=0; i<argc; i++)
    {
        user=strdup(argv[i]);

    }

    test();
return 0;
} 
```

结果是`argv[argc]`在所有位置上。我怎样才能解决这个问题？我想在循环之外有那个 test() 。

**

> *编辑*

** 在此处的答案之后，这是我的新代码，它不起作用。谁能说出为什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char* user;

void test(int n)
{
    int i=0;
    for(i=0;i<n;i++)
    printf("%s \n",user[i]);
}
int main(int argc,char*argv[])
{
     user = (char*) malloc(argc*sizeof(char));
int i;
for (i=0;i<argc;i++)
{
user[i]=argv[i];
}
test(argc);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:05:51.020

您在 for 循环的每次迭代中都分配给密码和用户。您看到的最终值来自上一次迭代。此外，由于覆盖先前`strdup`调用的指针，存在内存泄漏。实际上，您不需要循环：

```
int main(int argc,char*argv[])
{
  if(argc == 3) {
    user=strdup(argv[1]);
    passwd=strdup(argv[2]);
  } else {
    // error: usage
  }
  test();
  return 0;
} 
```

如果您想拥有多个用户/密码组合：

```
char *user[256], *passwd[256]; 

void test(int n) {
  int i;
  for(i=0;i<n;i++)
    printf("Hello %s \n",user[i]);
}

int main(int argc,char*argv[])
{
  int i;
  for(i = 0; i < argc && i < 256; i+=2) {
    user[i]=strdup(argv[i]);
    passwd[i]=strdup(argv[i+1]);
  } 
  test(argc);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:07:27.960

当然; 在 test() 中，除了循环变量之外，您不使用 i，而在 main() 中，您不断覆盖 user 和 passwd 的先前值。实际上，您所做的是：

```
user   = strdup(argv[0]);  /* Note: argv[0] is the program name. */
passwd = strdup(argv[0]);
user   = strdup(argv[1]);
passwd = strdup(argv[1]);
user   = strdup(argv[2]);
passwd = strdup(argv[2]);
user   = strdup(argv[3]);
passwd = strdup(argv[3]);
printf("%s %s \n", user, passwd); 
```

有了这些信息，你能修复你的程序吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:08:42.873

因为您在每次迭代中都会`user`覆盖指针。`passwd`因此，您只会看到最后一个字符串。

如果您能说出您的程序目标，则可以提供更好的答案。因为我不确定您是否要读取一个`user`和`passwd`或一组用户和密码。

编辑后，我看到您想读取字符串数组：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char** user;
// or char *user[100]; /* If you want a fix length array of pointers. Now, you dont have to malloc. /*
char* passwd;
int nr;

void test(int argc)
{
    int i=0;
    for(i=0;i<argc;i++)
    printf("Hello %s \n",user[i]);
}

int main(int argc,char*argv[])
{
    int i;
    nr=argc;
    user = malloc(argc*sizeof(char*));

    for (i=0; i<argc; i++)
    {
        user[i]=strdup(argv[i]);

    }
    test(argc);
return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:30:01.037

```
$ cat trash.c
#include <stdio.h>
#include <string.h>

void test(FILE* stream, char* usr, char* pass) {
    fprintf( stream, "%s@%s\n", usr, pass);
}

int main(int argc, char** argv) {

    int i = 1;
    if (argc % 2) {

        while(argv[i]) {

            test(stdout, argv[i], argv[i + 1]);
            i += 2;
        }
    }
    return 0;
}

$ clang trash.c
$ ./a.out user1 pass1 user2 pass2
user1@pass1
user2@pass2
$ 
```

另外，如果您调用`strdup()`，请不要忘记释放内存，因为 strdup 调用了`malloc()`.

# c# - 在 IDL 库中包含 C# 接口

> ID：12512188
> 
> 赞同：0
> 
> 时间：2012-09-20T12:01:58.147
> 
> 标签：c#, c++, com, idl, midl

我在 C# 中定义了一个接口，例如：

```
[ComVisible(true), Guid("E37EBA3C-FB2E-4D4A-8A90-F6FAA99E85C9")]
public interface TestClass
{
    public void test_function();
} 
```

我想将它包含在 IDL 中定义的库中。我试图通过从 C# 接口生成一个 .tlb 并将其包含在 importlib 中来实现这一点。但是，当我编译我的 idl 文件时，我在我的库中没有看到这个接口，但是我通过导入他们的 idl 文件看到了我在这个库中定义的所有其他接口。

```
import "AnotherClass.idl"
library COMMONPROGRAMS{
    importLib(stdole32.tlb)
    importLib(stdole2.tlb)
    importLib(TestClass.tlb)

    interface TestClass;
    interface AnotherClass;
} 
```

总之，我想知道：

*   是否可以在 IDL 库中包含 C# 接口？
*   如果是这样，我该怎么做？

欢迎所有答案。提前感谢您提交的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:52:49.040

当您导入 TLB 时，`importlib`您看不到当前 TLB 中的接口，因为它们不是该 TLB 的一部分。这些接口已经在`TestClass`类型库中定义，因此它们在库中不能有另一个定义`CommonPrograms`。

如果您想在别处定义接口但使其成为 TLB 的一部分，则需要使用`import TestClass.idl`. 从 TLB 生成 IDL 的一种方法是在 OLE/COM 对象查看器中打开 TLB 并选择`File->Save As`，然后对其进行编辑。我想这不是你想要的，因为你很可能希望这个过程自动化。

但是，`importlib`您仍然可以`TestClass`从 CommonPrograms 类型中引用接口，所以这通常不是一个大障碍，但这显然取决于您的要求。

# objective-c - 没有网络/互联网时将文档保存到 iCloud

> ID：12512189
> 
> 赞同：2
> 
> 时间：2012-09-20T12:01:59.823
> 
> 标签：objective-c, ios, file-upload, icloud

我是 iCloud 新手，我正在通过以下方式将我的文档保存到 iCloud

```
NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil]; 
```

用这个方法

```
– setUbiquitous:itemAtURL:destinationURL:error: 
```

`ubiq`如果返回true ，我通过上述方法将保存的文档从NSDocument文件夹移动到ubiquitous文件夹。有网络时它工作正常。没有网络时，如果我需要将文档保存到 iCloud，我该怎么办？我为此进行了冲浪，但找不到与此相关的任何内容。有人可以建议我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T14:57:28.390

如果无法访问 iCloud，您显然无法在其中保存任何内容。通过警报显示适当的错误消息，并告诉用户出了什么问题以及如何修复它。

# c# - 从 TreeView 检索节点上的绑定对象

> ID：12512191
> 
> 赞同：4
> 
> 时间：2012-09-20T12:02:06.147
> 
> 标签：c#, .net, wpf, treeview, caliburn.micro

我不是 WPF 方面的专家，所以如果我的问题措辞奇怪，请原谅我。如果有什么不合理的地方，我会非常乐意详细说明。

我有一个绑定类的 observablecollection 的树视图。当我的程序启动时，我读取特定目的地的每个 C 源代码文件，将其名称和文件路径存储在提到的类中。

![在此处输入图像描述](../Images/88a8e3956438068057646020df11ea06.png)

这是我的 XAML：

```
<TreeView Name="ProgramTree" ItemsSource="{Binding ProgramItemCollection}" 
                                      cal:Message.Attach="[Event PreviewMouseRightButtonDown] = [Action TestRight($dataContext,$eventArgs)];
                                      [Event PreviewMouseDoubleClick] = [Action NodeDoubleClick($dataContext,$eventArgs)]">

    <TreeView.Resources>
        <!--DataTemplate for Program Nodes (Top) and binds FileItemNodes-->
        <HierarchicalDataTemplate DataType="{x:Type my:ProgramItem}"
                                        ItemsSource="{Binding FileItemCollection}">
            <Border Width="100" BorderBrush="RoyalBlue" 
                                            Background="RoyalBlue"  BorderThickness="1" 
                                            CornerRadius="2" Margin="2" Padding="2" >
                <StackPanel Orientation="Horizontal">
                    <Image Style="{StaticResource IconStyle}" Margin="2" Source="{StaticResource FolderIcon}" />
                    <TextBlock Margin="2" Text="{Binding ProgramName}"
                                                           Foreground="White" FontWeight="Bold"/>
                </StackPanel>
            </Border>
        </HierarchicalDataTemplate>
        <!--DataTemplate for File Nodes (Subnodes of Program Nodes)-->
        <HierarchicalDataTemplate DataType="{x:Type my:FileItem}">
            <Border Width="80"  Background="LightBlue" CornerRadius="2" Margin="1" >
                <StackPanel Orientation="Horizontal">
                    <Image Margin="2" />
                    <TextBlock Margin="2" Text="{Binding NodeName}" />
                </StackPanel>
            </Border>
        </HierarchicalDataTemplate>
    </TreeView.Resources> 
```

代码隐藏：

```
public class FileItem
{
    public string NodeName { get; set; }
    public string FullName { get; set; }
    public string Extension { get; set; }
}

public class ProgramItem : PropertyChangedBase
{
    private ObservableCollection<FileItem> fileItemCollection;
    ... 
```

我现在要做的是在节点上挂钩双击事件并打开相关文件。

```
 public void NodeDoubleClick(object sender, MouseButtonEventArgs e)
    {
        TreeViewItem treeViewItem = VisualUpwardSearch(e.OriginalSource as DependencyObject);

        if (treeViewItem != null)
        {
            //Open file
        }
    }

    private static TreeViewItem VisualUpwardSearch(DependencyObject source)
    {
        while (source != null && !(source is TreeViewItem))
            source = VisualTreeHelper.GetParent(source);

        return source as TreeViewItem;
    } 
```

我可以毫无问题地检索双击的节点（treeviewitem）。问题是我想从我双击访问文件路径属性的节点中检索 FileItem 的对象。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T12:29:06.103

可以通过解析 TreeViewItem 的 DataContext：

```
FileItem fileItem = (treeViewItem.DataContext as FileItem); 
```

更优雅的方法是在 FileItem 类中使用 MouseInput 绑定和命令。

在 FileItem 的数据模板中：

```
<StackPanel Orientation="Horizontal">
    <StackPanel.InputBindings>
        <MouseBinding MouseAction="LeftDoubleClick" 
                      Command="{Binding OpenFileCommand}" />
    </StackPanel.InputBindings>
    <Image Margin="2" />
    <TextBlock Margin="2" Text="{Binding NodeName}" />
</StackPanel> 
```

在您的 FileItem 中：

```
public class FileItem
{
   public FileItem()
   {
       this.OpenFileCommand 
           = new SimpleCommand(()=> Process.StartNew(this.FullName));
   }

   public string NodeName { get; set; }
   public string FullName { get; set; }
   public string Extension { get; set; }
   public ICommand OpenFileCommand { get; set;}
} 
```

PS：如果你不习惯 WPF 的命令，一个简单的 ICommand 的基本实现可能是：

```
public class SimpleCommand : System.Windows.Input.ICommand
{
    public SimpleCommand(Action action)
    {
        this.Action = action;
    }

    public Action Action { get; set; }

    public bool CanExecute(object parameter)
    {
        return (this.Action != null);
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        if (this.Action != null)
        {
            this.Action();
        }
    }
} 
```

对于这种情况，命令要有效得多。你不需要走可视化树，你根本不需要代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:23:59.237

检查的`DataContext`属性`TreeViewItem`并尝试将其转换为`FileItem`类型。

您也可以将 FileItem 的模板定义为 simple `DataTemplate`，而不是`HierarchicalDataTemplate`.

# grid - 具有级联下拉列表的 Kendo UI 网格

> ID：12512192
> 
> 赞同：8
> 
> 时间：2012-09-20T12:02:11.830
> 
> 标签：grid, kendo-ui, cascadingdropdown

我的 Razor 布局上有一个 Kendo UI Grid，它从控制器中获取数据。

在这个网格中，我希望有一组 3 个 DropDownLists，它们是：

`ProductGroups`, `Products`,`Services`

我希望实现的行为是，当我在网格中添加一行时，我`ProductGroups`首先选择，然后使用按（值）`Products`过滤的产品列表更新 DropDown 。`GroupId`然后选择`Product`并像第一个一样，使用按（值）`Services`过滤的服务更新 DropDown 。`productId`

我不太清楚如何实现这一点，有人可以帮助我吗？

谢谢大家的帮助。

此致。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T21:34:19.660

这是我为 GridEditMode.InCell 所做的。我有客户和基金，每个客户都有自己的基金列表，所以当用户选择客户时，我只需要显示特定于该客户的基金

查看：Kendo Grid UI 设置

```
 c.ForeignKey(p => p.ClientId, Model.Clients, "Id", "ClientName")
      .Title("Client")
      .Width(100);
    c.ForeignKey(p => p.FundId, Model.Funds, "Id", "Description")
      .EditorViewData(new {funds = Model.Funds})
      .EditorTemplateName("FundForeignKeyEditor")
      .Title("Fund")
      .Width(100);
   })
   .Editable(x => x.Mode(GridEditMode.InCell))
   .Events(e => e.Edit("gridEdit")) 
```

现在，当用户单击 Fund 时，您需要对资金的数据源进行过滤，您可以使用 JavaScript 在“gridEdit”事件上执行此操作。您将此代码放在与上面的代码相同的视图/文件中

```
<script type="text/javascript">
    function gridEdit(e) {
        var fundDropDown = e.container.find("#FundId").data("kendoDropDownList");

        if (fundDropDown) {
            fundDropDown.dataSource.filter({ field: "ClientId", operator: "eq", value: e.model.ClientId });

</script> 
```

Fund 具有“FundForeighKeyEditor”编辑器模板，您必须将其添加到 Views\Shares\EditorTemplate 文件夹中。您可以使用任何名称，只需确保文件模板的名称与 EditorTemplateName 的名称匹配。就我而言，我使用“FundForeignKeyEditor”作为 EditorTemplate 和 FundForeighKeyEditor.cshtml 文件

FundForeighKeyEditor.cshtml

```
@model FundViewModel

@(
        Html.Kendo().DropDownListFor(m => m)
            .BindTo((System.Collections.IEnumerable)ViewData["funds"])
            .DataTextField("Description")
            .DataValueField("Id")
) 
```

这是一个 FundViewModel，它包含 ClientId，因此我可以对其执行过滤

```
public class FundViewModel
{
    public string Id { get; set; }
    public string ClientId { get; set; }
    public string Description { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T10:47:48.977

最简单的方法是在 每个列的编辑器模板中使用级联下拉列表： [http ://demos.kendoui.c​​om/web/dropdownlist/cascadingdropdownlist.html。](http://demos.kendoui.com/web/dropdownlist/cascadingdropdownlist.html)

如果您正在使用弹出编辑，您可以考虑自定义弹出菜单，如下所示： [http ://www.kendoui.c​​om/code-library/mvc/grid/custom-popup-editor.aspx](http://www.kendoui.com/code-library/mvc/grid/custom-popup-editor.aspx)

如果您使用的是内联编辑，您应该使用这种方法来自定义编辑器模板： [http ://docs.kendoui.c​​om/documentation/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/editor-templates](http://docs.kendoui.com/documentation/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/editor-templates)

如果您使用的是 InCell - 可以说这是不可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T06:30:31.130

这适用于内联编辑模式。我还没有尝试过其他的。

绑定第一个下拉列表的更改事件，找到目标下拉列表，并更改其数据源。`data-selector-type`是我添加到级联链中每个下拉列表的属性，以使选择变得容易。

```
function clientDropDownEditor(container, options) {           
  var clientCombo = $('<input  id="client' + options.uid + '"  data-selector-type="client" data-text-field="Name" data-value-field="Name" data-bind="value:' + options.field + '"/>')
      .appendTo(container)
      .kendoComboBox({
          dataTextField: "Name",
          dataValueField: "Name",
          dataSource: {
              transport: {
                  read: "json/data/getClients"
              }
          },
          change: function (e) {
              // Find the element with the required selector type in the same TR
              var kendoComboSites = e.sender.element.closest("tr").find("[data-selector-type=site]").data("kendoComboBox");

              kendoComboSites.dataSource.transport.options.read.url = "json/data/GetClientSites/" + e.sender.element.val() + "/" + $("#Id").val();
              kendoComboSites.dataSource.read();
              kendoComboSites.refresh();

          }
      }).data("kendoAutoComplete");
} 
```

# facebook-graph-api - Facebook Graph API 发表评论失败

> ID：12512193
> 
> 赞同：0
> 
> 时间：2012-09-20T12:02:11.643
> 
> 标签：facebook-graph-api

我正在使用 FB 图形 API 对不同的帖子发表评论，但并非每次都有效。有些帖子可以被“评论”，而其他帖子每次都失败。我正在使用 Facebook 用户身份验证令牌（不是组或应用令牌）来发表评论。

返回的错误是`(#200) Permissions error`。

起初我以为这篇文章不是公开的，我的用户没有评论它的权限，但是当我通过网络浏览器访问它并以同一用户身份登录时 - 他可以手动发表评论。因此，通过网络它正在工作，并通过 API 产生权限错误 #200。

再说一遍 - 我可以毫无问题地评论某些帖子。

这是我的代码示例，我认为这是一个相当标准的代码：

```
$oFacebook = new Facebook($config);
try {
    $oFacebook->api('/'.$iEventId.'/comments', 'POST', array(
        'message' => $sComment,
        'access_token' => $sAccessToken
    ));
} catch (Exception $e){
    print_r($e->getMessage()); 
} 
```

$sComment 是小的纯文本。
$sAccessToken 保存在数据库访问令牌中。当我在 FB 调试工具中对其进行测试时，它说令牌具有`publish_stream`发布评论所需的范围。

同样的情况可以通过[Graph API explorer](https://developers.facebook.com/tools/explorer)重现，所以我认为这不是与代码相关的问题。

在重现性方面，这里有一个不能通过 API 评论的帖子 ID：381578255242674。您可以在资源管理器中生成随机访问令牌并尝试 POST 到 /381578255242674/comments。

这是一个可以评论的帖子 ID：265070490272041。

有什么建议么？

# windows-8 - 如何在不提交到商店的情况下安装 Windows 8 应用程序

> ID：12512196
> 
> 赞同：46
> 
> 时间：2012-09-20T12:02:15.913
> 
> 标签：windows-8, windows-runtime, winrt-xaml

对于客户，我需要展示我们的 Windows 8 Metro 应用程序。当我部署我的解决方案或项目时，我得到了一个 exe，但我无法安装它。我收到一个 MessageError，我只能在应用程序容器中启动 exe。

如何创建我的应用程序版本以将其提供给我的客户，而无需将其加载到 Microsoft Store？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-20T12:19:48.550

Use the PowerShell cmdlet [add-appxpackage](http://technet.microsoft.com/en-us/library/hh856048.aspx). For example:

```
add-appxpackage C:\myapp.appx 
```

See [http://blogs.msdn.com/b/uk_faculty_connection/archive/2012/04/03/installing-enterprise-metro-apps-without-using-microsoft-store.aspx](http://blogs.msdn.com/b/uk_faculty_connection/archive/2012/04/03/installing-enterprise-metro-apps-without-using-microsoft-store.aspx) for more info.

# windows - 在 Windows 上轮换 apache 日志文件的最佳方法

> ID：12512202
> 
> 赞同：0
> 
> 时间：2012-09-20T12:02:47.113
> 
> 标签：windows, apache, logging, windows-server-2003

作为 Windows 服务器平台的新手，我需要一些输入来确定轮换 apache 日志文件的最佳方式。服务器版本为 Apache/2.0.47 (Win32)。

Apache 附带了 rotatelogs.exe。我发现这个（相当）旧帖子[http://www.sitebuddy.com/Apache/Cat/Logging](http://www.sitebuddy.com/Apache/Cat/Logging)说

> 结论：它是不可用和危险的（它会吃掉你所有的内存/文件处理程序......等等......）。您甚至不能在 4 个以上的站点上使用 rotatelogs.exe，Apache 将在启动时锁定（在 Apache 2.2.0 上测试）。

同一个人创建了一个 dll 文件[http://www.sitebuddy.com/mod_log_rotate](http://www.sitebuddy.com/mod_log_rotate)，我不确定我们的托管公司是否愿意在生产服务器上实施。

因此，由于我们正在运行这个相当旧的 Apache 版本（我坚持使用它，因为它实际上是 WebSphere 附带的 IBM HTTP Server），所以我害怕 rotatelog.exe，任何人都知道什么是最好的选择实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:07:29.533

我们的托管合作伙伴决定不允许使用 rotatelogs.exe，因为他们对其他客户有一些问题。因此，解决方案是创建一个 PowerShell 脚本，停止服务，轮换日志并再次启动服务。

# asp.net - FreeTextBox 复制粘贴的内容

> ID：12512203
> 
> 赞同：3
> 
> 时间：2012-09-20T12:02:48.770
> 
> 标签：asp.net, freetextbox

我正在使用 FreeTextBox：

```
<FTB:FreeTextBox ID="txtFreeTextBox" RemoveServerNameFromUrls="false" ToolbarLayout="ParagraphMenu,FontFacesMenu,FontSizesMenu,FontForeColorsMenu|Bold,Italic,Underline,Strikethrough;Superscript,Subscript,RemoveFormat|JustifyLeft,JustifyRight,JustifyCenter,JustifyFull;BulletedList,NumberedList,Indent,Outdent;CreateLink,Unlink,InsertImageFromGallery,InsertRule,InsertTable|Cut,Copy,Paste;Undo,Redo,Print" runat="Server" Width="100%" BackColor="239,239,240"ImageGalleryUrl="../../ftb.imagegallery.aspx?rif=Public/RootImages/&cif=Public/RootImages/">
</FTB:FreeTextBox> 
```

问题是当我粘贴到它时，它会粘贴两次。有什么可以解决的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:08:59.397

我在使用浏览器模式设置为 Internet Explorer 9 的 IE9 时遇到了这个问题（它在 IE9 Comp View 中正常工作）。我找到的解决方法是覆盖我页面 html 中的默认 CancelEvent 函数。我在结束体标签的正上方添加了这个：

```
<script type="text/javascript">
    FTB_FreeTextBox.prototype.CancelEvent = function (ev) {
        try{
            ev.preventDefault();
            ev.stopPropagation();
        }
        catch (e) {
            if (FTB_Browser.isIE) {
                ev.cancelBubble = true;
                ev.returnValue = false;
            }
        }
    };
</script> 
```

希望它也适合你！

# r - 使用 ggplot2 在 y.axis.title 中的上标、粗体和颜色

> ID：12512209
> 
> 赞同：2
> 
> 时间：2012-09-20T12:03:13.827
> 
> 标签：r, ggplot2

我有问题或使用冲突

```
ylab(expression(paste(log~Biovolume~µm^3~L^-1)))+
opts(axis.title.y=theme_text(size=16,face="bold",
colour="black",angle=90,vjust=4.3)) 
```

同时。当我单独使用每个命令时，它可以正常工作，但是一起使用时，x 轴会消失而没有任何错误消息。不幸的是，我需要两个命令来表达数学部分 ( `ylab(expression(paste(.....))`) 以及 y 轴标题的大小和颜色`opts(....)`。我现在在不同的论坛上搜索以找到解决方案。我的想法是把y-axis.title的大小、颜色等属性放在`ylab()`命令里面，但是没有成功。所以，也许你有任何想法或解决方案

```
ggplot(R28meansd, aes(treat, meanbiov, shape=factor(disp))) + 
    geom_point(size=5,position=pd) + 
    geom_errorbar(aes(ymin=meanbiov-sdbiov,ymax=meanbiov+sdbiov), 
                  colour="black",width=.1,position=pd,size=.7) 
    opts(aspect.ratio=1.4) + 
    theme_bw() + 
    opts(axis.title.y=theme_text(size=16, face="bold",
         colour="black",angle=90,vjust=4.3)) +
    ylab(expression(paste(log~(Biovolume~µm^3~L^-1)))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:30:46.293

如果没有可重现的数据集，我无法测试您的确切条件。但是，您可以使用 中的语句在 y 轴上实现粗体字体`expression()`，这似乎覆盖了 ggplot 的`face`参数。GGplot 的`angle`、`vjust`、`size`和 color 参数似乎仍然存在。

```
ylab(expression(bold(paste(log~(Biovolume~µm^3~L^-1)))))+ 
```

# android - 试图整合地图完全困惑......最好的前进方式？

> ID：12512211
> 
> 赞同：1
> 
> 时间：2012-09-20T12:03:24.613
> 
> 标签：android, map, openstreetmap

我一直在寻找在我的网站上实施地图，并且真的碰壁了 - 读了这么多，但我很困惑。我只是想知道是否有人可以提供一点帮助？

我开发了一个 Android 应用程序，它生成一个纬度/经度对列表并将它们存储在远程 MySQL 数据库中。我要做的就是在地图上标记这些点，单击时会弹出一个小窗口，指示有关用户的其他一些信息。

到目前为止，我已经看过 Google Maps API 和 OpenStreetMap，虽然我真的不知道从哪里开始！我不知道我是否应该使用谷歌地图，因为我担心 API 查询限制？我可以做？

如果有人能指出我正确的方向，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:21:15.437

[使用 OpenStreetMap 和OpenLayers](http://openlayers.org/)显示一些标记和弹出窗口并不复杂：

*   [简单的 OpenLayers 标记示例](http://wiki.openstreetmap.org/wiki/OpenLayers_Marker_Example)
*   [来自数据库的动态标记](http://wiki.openstreetmap.org/wiki/OpenLayers_Dynamic_POI)（[示例结果](http://openlayers.org/dev/examples/dynamic-text-layer.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:31:33.437

使用谷歌地图 javascript v3 并进行必要的更改请参考 [https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:37:54.307

Google Maps API 的限制大约是每天 25k（或者是 250k？） - 所以除非你制作的应用程序被证明*非常*受欢迎，否则你不必担心它

# excel - 列表框中的索引值

> ID：12512220
> 
> 赞同：0
> 
> 时间：2012-09-20T12:04:00.460
> 
> 标签：excel, listbox, vba

我有一个列表框，其中填充了一年中的月份，如下所示：

```
Private Sub UserForm_Initialize()
    Dim i As Integer

    For i = 1 To 12
        ListBox1.AddItem MonthName(i)
    Next

End Sub 
```

然后我将选定的值存储为字符串。我感兴趣的是使用 i 的等效值而不是月份名称进行计算。

例如，如果用户选择了July ( `i = 7`)，我想做的是存储第二个字符串，该字符串定义为所选字符串之前的月份，即`i - 1`在本例中为June ( `i = 6`)。

如何在代码中引用 i 的值而不是月份字符串的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:23:34.623

使用 ListBox 的 ListIndex 属性，即

```
Debug.Print Listbox1.ListIndex + 1 
```

随着索引从 0 开始递增 1

小心地假设上个月总是比选择的少1....如果用户选择“一月”会发生什么？

# objective-c - iOS 6 - 处理没有 Default-568h@2x.png 的 iPhone 5 屏幕尺寸

> ID：12512221
> 
> 赞同：9
> 
> 时间：2012-09-20T12:04:01.407
> 
> 标签：objective-c, ios, xamarin.ios, ios6, iphone-5

我们正在开发一款游戏，该游戏在加载时会呈现几个启动画面。

所以我们没有使用 Default.png 或 Default@2x.png，因为在启动时屏幕为空白是有意义的。

那么如何在 iPhone 5 模拟器中获取 iOS 6 来全屏渲染我们的游戏而没有[这里](https://stackoverflow.com/questions/12412063/monotouch-adding-default-568h2x-png-for-iphone-5-retina-4)提到的启动画面图像呢？我们只需要考虑使用闪屏图像吗？这是唯一的方法吗？我认为应该有一些你可以打开的东西`Info.plist`。

我们仍然宁愿不使用启动画面图像，因为它会使我们的应用程序包更大——我们非常接近 50MB。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T12:13:38.507

我不知道 iOS 是否有任何其他方法来检测对 iPhone 5 屏幕尺寸的支持，但也许你可以包括一个空白的初始屏幕？

我完全黑色的 png 不应该占用太多空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-29T19:04:52.680

如果您为启动图像使用空的[资产目录](https://developer.apple.com/library/ios/recipes/xcode_help-image_catalog-1.0/Recipe.html)，则支持 iPhone 5 的屏幕尺寸（根本无需包含任何图像文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:13:25.223

据我所知，添加此默认值是处理 iPhone 5 屏幕的唯一方法。也许你可以只添加只有黑色的默认图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T08:24:46.397

我认为您可以添加 568 启动图像以获得全屏，并在常规设置中清空启动图像选项。

# alfresco - Alfresco - 如何在审计中记录所有自定义属性

> ID：12512223
> 
> 赞同：2
> 
> 时间：2012-09-20T12:04:10.710
> 
> 标签：alfresco

我在 alfresco 中创建了自定义类型并添加了一些属性。
现在，每当有人访问具有此自定义类型的文件时，我都想审核自定义类型的所有属性，但 alfresco 仅审核修改/添加/删除的属性。

如何在审计中记录自定义类型的所有属性？

谢谢，约格什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-18T19:41:10.010

您可能应该阅读[有关审计服务的文档](http://docs.alfresco.com/5.0/concepts/serv-audit-about.html)，然后如果您遇到困难，请提出更具体的问题，包括您尝试过的内容和无效的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T21:54:37.157

露天审计服务有提取器和发电机。生成器可以审计输入路径中不存在的信息。

我认为您应该能够使用生成器来审核您的所有自定义属性。

# iphone - iOS6 地图，我的所有地图上都缺少详细信息披露按钮（蓝色 V 形）！如何取回

> ID：12512224
> 
> 赞同：5
> 
> 时间：2012-09-20T12:04:14.107
> 
> 标签：iphone, mapkit, ios6, ios6-maps

我的理解是迁移到 iOS 6 地图没有问题。但是由于某种原因，我的地图应用程序中现在缺少详细信息披露按钮。有没有办法把这个找回来。哇，完全出乎意料。这已经工作了多年，所以所有代表都很好。

```
#pragma mark MKMapViewDelegate
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

MKPinAnnotationView *pin = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"REUSEME"] autorelease];
UIButton *button = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

if ([annotation isKindOfClass:[MKUserLocation class]]) {
    pin.animatesDrop = YES;
    return nil;
} else {
    [pin setPinColor:MKPinAnnotationColorGreen];
}

pin.rightCalloutAccessoryView = button;
pin.animatesDrop = YES;
pin.canShowCallout = YES;

return pin;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:16:52.033

现在在 iOS 6 中，您必须在将注释添加到 mapView 之前设置委托

在这里看到：[http ://www.openradar.me/12346693](http://www.openradar.me/12346693)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T03:22:32.063

我遇到了同样的问题，在 Storyboard 中设置 MapView 委托对我来说很有效，标注箭头现在可以工作了:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T00:47:55.653

我遇到了同样的问题，我只在注释之后放置了委托并且完美地工作！

```
mapView.delegate = self;
[self.mapView addAnnotation:ann]; 
```

Tks, 考卡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T13:40:55.963

@ErCa 根据 iOS 文档，除非您正在构建自定义视图，否则您永远不应该调用 loadView。

问题出在其他地方。我也有它，一旦找到它就会发布答案。

@ed-potter 你的目标是 iOS4 吗？我问是因为您自动释放 MKPinAnnotationView，这对于 ARC 来说是不必要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T19:53:48.553

这也发生在我身上。确实，由于某种原因，现在需要在 viewDidLoad: 之前设置 MKMapView 委托。我最终做的是在我的 setMapView: 函数中设置 mapView 委托。

所以对于包含 MKMapView 的视图控制器，我有以下属性：

@property（非原子，弱）IBOutlet MKMapView *mapView;

所以我把 setMapView 函数：

-(void)setMapView:(MKMapView *)mapView {

```
_mapView = mapView;

self.mapView.delegate = self;//needed to move setting of the mapView delegate here because they changed when the viewForAnnotations delegate function is called when Apple went to iOS 6 and changed the maps App.  Now all of the annotations are loaded and the views for those annotations are set up before the View Controller even calls viewDidLoad.

[self updateMapView]; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T12:34:29.573

我没有这个问题，我在你的代码和我的代码之间看到的唯一区别是在创建 MKPinAnnotationPinView 对象时，我首先尝试将其出列：

```
 MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"CustomPinAnnotationView"]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T10:47:07.107

我在 iOS 6 的 mapKit 中注意到的是时间是必不可少的。将 MKMapView 的委托设置为延迟（即在 viewDidLoad 中），地图将对已添加的注释使用默认注释样式。我的解决方案是将 mapView.delegate = self 移动到 -(void)loadView 方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-22T23:12:42.540

我有同样的问题，我使用与第一个答案相同的代码：

MKPinAnnotationView *MyPin =(MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"MyPin"];

我还注意到更新到 xcode 4.5/iOS 6 后的其他问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-04T14:37:48.747

`self.mapView.delegate = self`我遇到了同样的问题，也在设置`viewDidLoad`但`mapView:viewForAnnotation:`没有被调用，所以我`leftCalloutAccessoryView`没有得到`UIImageView`我指定的。我回去复习了 Ray Wenderlich[在 iOS 6 教程中的 MapKit 简介](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)，发现：

> 首先选择 MainStoryboard.storyboard。然后通过控制点击地图视图，将视图控制器（位于列表顶部的右侧）设置为地图视图的委托，并从委托条目拖动一条线到视图控制器。

# java - Java Android Arraylist 字符串到 ArrayList 自定义类

> ID：12512226
> 
> 赞同：2
> 
> 时间：2012-09-20T12:04:22.467
> 
> 标签：java, string, arraylist

如何在这里转换**值**：

```
List<String> values = new ArrayList<String> 
```

至 ：

```
ArrayList<Custom> 
```

**编辑**：

```
public class Custom {

    public Custom Parse(String input) {
        // What should I do here?
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:14:56.350

你可以使用：

```
List<Custom> customList = new ArrayList<Custom>();
for (String value: values) {
   customList.add(new Custom(value));
} 
```

虽然最好只添加一个带`String`参数的构造函数：

```
class Custom {
   private final String input;

   public Custom(String input) {
      this.input = input;
   }

   // not needed but implemented for completeness    
   public static Custom parse(String input) {
      return new Custom(input);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:11:02.370

假设您的`Custom`对象列表与`values`列表大小相同。使用一个增强的 for 循环，设置对象的适当字段，如下所示：

```
int i=0;

for(String str:values)
   customList.get(i++).setSomeProperty(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:11:41.110

您可以在此线程上使用 Google Collections 库找到解决方案[Converting a List<String> to a List<Integer> （或任何扩展 Number 的类）](https://stackoverflow.com/questions/4108970/converting-a-liststring-to-a-listinteger-or-any-class-that-extends-number)

# sql-server - 最佳实践：reportservers 和 sql server

> ID：12512227
> 
> 赞同：1
> 
> 时间：2012-09-20T12:04:24.747
> 
> 标签：sql-server, performance, sql-server-2008, reporting-services, sql-server-2012

我们有三台 SQL 服务器，为不同网络服务器上的各种应用程序提供服务。每个应用程序都在使用报告服务功能。每台服务器每月的平均负载约为 40.000 份报告，平均需要 3.1 秒来交付一份报告。

目前情况如下：

*   应用程序 A 在 SQLServer A 上有他的数据库，并在 SQLServer A 上使用 Reporting Services。（SQL 2008）
*   应用程序 B 在 SQLServer B 上有他的数据库，并在 SQLServer B 上使用 Reporting Services。（SQL 2008R2）
*   应用程序 C 在 SQLServer C 上有他的数据库，并在 SQLServer C 上使用
    Reporting Services (SQL 2008R2)。

我们刚刚购买了一台运行 SQL 2012 的新服务器。将所有报告移至 Reporting Server 2012 是否明智？我的想法是会有显着的性能提升。此外，只有一个报告服务器需要管理。但真的是这样吗？当提供报告的数据库在另一台服务器上时，在一台服务器上运行报告时是否会受到处罚？如果 Reporting Services 版本与数据库服务器的版本不同，会不会有问题？

我非常想听听您对此的看法。性能和可管理性是两个关​​键组成部分。

问候并感谢您与我一起思考，

亨罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:04:37.563

您是否使用 SSRS 2012 企业版（这样可以通过在不同服务器上部署部分 SSRS 实现来利用横向扩展）？ [这是](http://msdn.microsoft.com/en-us/library/cc645993.aspx#Reporting)按版本划分的 SSRS 2012 功能列表。此外，您是否使用任何计划的（即快照或计划的交付）报告来平衡负载请求？

# mysql - Zend Framework 2 上的 Mysql 套接字

> ID：12512228
> 
> 赞同：0
> 
> 时间：2012-09-20T12:04:35.017
> 
> 标签：mysql, zend-framework2

在我的服务器上 Mysql 默认套接字路径 = /var/run/mysqld/mysqld.sock。但是 ZF2 需要通过 /tmp/mysql.sock 进行连接。有什么方法可以使用默认套接字路径而不是符号链接连接到 /tmp/mysql.sock。

# c# - C# 性能最佳实践：对象创建与重用

> ID：12512231
> 
> 赞同：2
> 
> 时间：2012-09-20T12:04:43.893
> 
> 标签：c#, performance, object, reusability

我目前正在对现有 C# 网站进行性能调整。有一个类说.. MyUtil.cs。此类已在所有网页中广泛使用。在某些页面上创建了大约 10/12 个实例 (MyUtil)。我运行了“Redgate”性能分析器。根据 RedGate，对象创建是一项代价高昂的操作。请注意，每个实例都会设置特定的属性并执行特定的操作。所以我不能按原样重用对象。我必须重置所有成员变量。

我想优化这段代码。我考虑过以下选项。请帮助我评估哪种方法更好：

(1) 在“MyUtil.cs”类中创建一个“Reset”方法，该方法将重置所有成员变量（其中有 167 个 :(..)，以便我可以在页面类中重用一个对象。

(2) 继续创建多个对象（我在“MyUtil”中有 Dispose() 方法）

(3) 我想到了“对象池”，但我必须再次重置成员。我认为最好在页面级别汇集对象并释放它们，而不是将它们保持在项目级别。

对此的任何答复将不胜感激。提前致谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:10:13.527

每个应用程序都有多种加速不同大小的机会，比如盘子里的食物种类。创建和初始化对象通常可以是其中之一，并且通常可以是一个大对象。

每当我看到对象创建/初始化需要花费大量时间时，我都会回收使用过的对象。这是一项基本技术，它可以产生很大的不同。但只有当我*知道*它会节省一小部分时间时，我才会这样做。不要只是按照一般原则去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:56:08.427

我建议您始终创建新对象而不是重置对象。之所以如此，原因如下

*   GC 足够聪明，可以对对象进行分类并为其分配一代。这取决于代码中对象的使用。分析是基于代码的执行模式以及代码的体系结构完成的

*   如果您使用 GC 并让它管理进程，您将能够从硬件获得最佳结果，因为它还根据可用的硬件配置和可用的系统资源决定垃圾收集阈值。

*   除此之外，您的代码将更加容易和易于管理。- （虽然这不是直接的好处，但也应该至少给它一些权重。）

*   在页面级别创建对象池也不是一个好主意，因为要重用对象，您必须做两件事，从池中获取它并重置其属性，即您还必须管理池，这是额外的负担

*   创建单个实例并通过重置属性重新使用它也可能不是一个好主意，因为当您需要多个对象实例时，它将无法工作。

所以结论是，你应该继续在页面中创建对象，让垃圾收集器完成它的工作。

# javascript - 使用html5画布在一个圆圈中以不同角度显示不同的值

> ID：12512234
> 
> 赞同：5
> 
> 时间：2012-09-20T12:04:50.197
> 
> 标签：javascript, html, math, canvas, degrees

使用 HTML5 Canvas 和 Javascript，我需要在一个圆圈内以不同的角度显示不同的值（可能由一个点表示）。

示例数据：
val 34% @ 0°、
val 54% @ 12°、
val 23% @ 70°，
等等...

如果我有一个 300 x 300 像素的画布，圆的中心位于 x: 150 像素和 y: 150 像素，半径为 150 像素，我将如何计算将值设置为 12 度 54% 的点的位置？

我的数学有点糟糕xD

我将不胜感激任何帮助，如果我不够清楚，请提出问题。

感谢您的收听，并提前感谢您的深刻见解：D

编辑（更详细地解释）：

这是一张图片来说明我要完成的工作： ![插图：不同角度/度数的值](../Images/20453b057d4f1b46e208ebf8303a0fa7.png)

我希望这能让我的问题更容易理解。
（如您所见，与上面的值不同）

泰你的耐心！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T12:09:14.007

您可以使用它来将极坐标（半径、角度）坐标转换为笛卡尔坐标：

```
// θ : angle in [0, 2π[
function polarToCartesian(r, θ) {
    return {x: r*Math.cos(θ), y: r*Math.sin(θ)};
} 
```

例如，如果您想在 12° 处绘制，您可以这样计算点：

```
var p = polarToCartesian(150, 12*2*Math.PI/360);
p.x += 150; p.y += 150; 
```

**编辑：**我的`polarToCartesian`函数将[弧度](http://en.wikipedia.org/wiki/Radian)作为输入，与 Canvas API 中的函数一样多。如果你更习惯学位，你可能需要这个：

```
 function degreesToRadians(a) {
     return Math.PI*a/180;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:24:51.360

给你（[演示](http://jsfiddle.net/mithun/nArUN/1/)）

```
var can = document.getElementById('mycanvas');
var ctx = can.getContext('2d');

var drawAngledLine = function(x, y, length, angle) {
    var radians = angle / 180 * Math.PI;
    var endX = x + length * Math.cos(radians);
    var endY = y - length * Math.sin(radians);

    ctx.beginPath();
    ctx.moveTo(x, y)
    ctx.lineTo(endX, endY);
    ctx.closePath();
    ctx.stroke();
}

var drawCircle = function(x, y, r) {
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI*2, true);
    ctx.closePath();
    ctx.fill();
}

var drawDot = function(x, y, length, angle, value) {
    var radians = angle / 180 * Math.PI;
    var endX = x + length*value/100 * Math.cos(radians);
    var endY = y - length*value/100 * Math.sin(radians);
    drawCircle(endX, endY, 2);
}

var drawText = function(x, y, length, angle, value) {
    var radians = angle / 180 * Math.PI;
    var endX = x + length*value/100 * Math.cos(radians);
    var endY = y - length*value/100 * Math.sin(radians);
    console.debug(endX+","+endY);
    ctx.fillText(value+"%", endX+15, endY+5);
    ctx.stroke();
}

var visualizeData = function(x, y, length, angle, value) {

    ctx.strokeStyle = "#999";
    ctx.lineWidth = "1";
    drawAngledLine(x, y, length, angle);

    ctx.fillStyle = "#0a0";
    drawDot(x, y, length, angle, value);

    ctx.fillStyle = "#666";
    ctx.font = "bold 10px Arial";
    ctx.textAlign = "center";
    drawText(x, y, length, angle, value);
}

ctx.fillStyle = "#FFF0B3";
drawCircle(150, 150, 150);

visualizeData(150, 150, 150, 0, 34);
visualizeData(150, 150, 150, 12, 54);
visualizeData(150, 150, 150, 70, 23)

visualizeData(150, 150, 150, 120, 50);
visualizeData(150, 150, 150, -120, 80);
visualizeData(150, 150, 150, -45, 60); 
```

# uiviewcontroller - iOS6 游戏套件

> ID：12512238
> 
> 赞同：3
> 
> 时间：2012-09-20T12:05:02.827
> 
> 标签：uiviewcontroller, game-center, ios6

我最近尝试使用新的 iOS 6 方法对 iOS 6 上的本地用户进行身份验证，它在身份验证处理程序中返回 -

```
localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error) 
```

如何显示此视图控制器？（仅供参考 - 完成本地播放器身份验证后，GC 会自动关闭窗口）

我在项目中使用故事板。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:34:42.570

一旦你设置了处理程序，它将在不同的情况下被调用。在这些调用中，viewController 参数可以为 nil，或者它实际上可以是一个实例 GKHostedAuthenticateViewController。

**您需要检查 viewController 是否不为零，在这种情况下，您可以像使用任何其他视图控制器一样显示它。**

这里有一些来自 Game Center 编程指南的示例代码

```
- (void) authenticateLocalPlayer
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error){
         if (viewController != nil)
         {
             [self showAuthenticationDialogWhenReasonable: viewController
         }
         else if (localPlayer.isAuthenticated)
         {
             [self authenticatedPlayer: localPlayer];
         }
         else
         {
             [self disableGameCenter];
         }
     }];
} 
```

查看[GKLocalPlayer 类参考](http://developer.apple.com/library/IOS/#documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html)和[游戏中心编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html)

# wpf - 如何处理面向 Windows 应用商店应用程序和 WP7、WP8、WPF 的可移植类库中的图像？

> ID：12512239
> 
> 赞同：23
> 
> 时间：2012-09-20T12:05:04.720
> 
> 标签：wpf, microsoft-metro, windows-runtime, portable-class-library

我正在开发第一个针对以下目标的 PCL：WSA（Windows 商店应用程序）、WPF、WP7、WP8。我们可以说它是一种rolerdex 类型的应用程序，你有联系人，他们有联系方式和图片。（不是，但我无法提供有关应用程序的详细信息，因此我使用了一个非常简单的示例）。这是我的一些问题:)

1.  我应该在 PCL 中有图像吗？

如果是：

1.  如何参考图像以在 WSA 中使用？
2.  在不同项目中使用时，如何最好地使用比例限定符等解决缩放问题？

我没有使用数据库，并且图像不是从外部服务下载的——我想将图像（实际上并不多）保存在本地、应用程序或 PCL 中。

编辑：我只想显示图像。而已。这是一个静态的rolerdex，你不能添加新的人。我只想显示 5 个人及其图像（在 PCL 中）。如果它是 Windows 应用商店应用程序，我如何引用图像？

我有一个绑定，并且 DataContext 设置为 PCL 中的 ViewModel。ViewModel 聚合模型中要显示的数据。我绑定的属性是 MyImage。忽略其他平台，Uri 会是什么样子？其他一切正常。

我真的只是想要这三个问题的帮助，尽管我真的很感谢所有的答案！！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T18:31:36.350

在很多情况下，图像是特定于平台的。他们需要满足设备本身的尺寸和 DPI，并且需要适应应用程序的外观和感觉。对于这些情况，我会让 View 自己决定向用户显示哪些图像，可能基于 ViewModel 提供的某种状态/模式。

但是，在这些情况下，图像需要来自 ViewModel，例如，在邮件应用程序中显示的发件人缩略图的情况下。在这些情况下，我让 ViewModel 返回某种与平台无关的图像概念（例如 byte[]），然后让特定于平台的项目将其转换为他们的 UI 堆栈可以理解的东西（在 XAML 中，这个将是一个 ImageSource）。

代码看起来像这样：

**便携式项目**：

```
using System.IO;
using System.Reflection;

namespace Portable
{
    public class ViewModel
    {
        private byte[] _image = LoadFromResource("Image.png");

        public byte[] Image
        {
            get { return _image; }
        }

        private static byte[] LoadFromResource(string name)
        {
            using (Stream stream = typeof(ViewModel).GetTypeInfo().Assembly.GetManifestResourceStream("Portable." + name))
            {
                MemoryStream buffer = new MemoryStream();
                stream.CopyTo(buffer);

                return buffer.ToArray();
            }
        }
    }
} 
```

**注意：**您需要根据您的目标平台删除或添加 GetTypeInfo()。

在这里，我们从嵌入式资源（属性 -> 构建操作 -> 嵌入式资源）中读取数据，但您可以想象这来自网络或其他地方。

**Windows Store 应用程序项目：** 在 Windows Store 应用程序中，您将有一个值转换器从 byte[] -> ImageSource 转换：

```
using System;
using System.IO;
using Windows.Storage.Streams;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Media.Imaging;

namespace App
{
    public class ByteToImageSourceValueConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, string language)
        {
            InMemoryRandomAccessStream s = new InMemoryRandomAccessStream();

            byte[] bytes = (byte[])value;
            Stream stream = s.AsStreamForWrite();
            stream.Write(bytes, 0, bytes.Length);
            stream.Flush();
            stream.Seek(0, SeekOrigin.Begin);

            BitmapImage source = new BitmapImage();
            source.SetSource(s);

            return source;           

        }

        public object ConvertBack(object value, Type targetType, object parameter, string language)
        {
            throw new NotImplementedException();
        }
    }
} 
```

在 View 后面的代码中，设置 DataContext：

```
DataContext = new ViewModel(); 
```

然后在 View 本身绑定到 ViewModel.Image 属性，并设置转换器：

```
<Page.Resources>
    <local:ByteToImageSourceValueConverter x:Name="ImageConverter"/>
</Page.Resources>

<Grid >
    <Image HorizontalAlignment="Left" Height="242" Margin="77,10,0,0" VerticalAlignment="Top" Width="278" Source="{Binding Image, Converter={StaticResource ImageConverter}}"/>

</Grid> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-20T12:27:21.513

当您需要在具有不同像素密度和不同屏幕尺寸的不同平台上缩放图像时，图像确实存在很大问题。

再加上这一点，图像处理库通常存在不可移植的问题——尤其是当它们在每个平台上使用硬件加速时。

* * *

假设您的 rolodex 应用程序以某种方式允许用户捕获图像，然后将它们上传到某些共享数据库/服务以供以后查看，这就是我可能解决问题的方法。这不是唯一的解决方案——这里没有“一个正确的方法”！

** 捕获和上传图像 **

1.  为了捕获图片（从文件夹或相机），我必须为每个平台使用本机挂钩 - 所以这部分不是 PCL

2.  如果我需要在设备上对图像进行一些处理（例如调整大小或添加缩略图），那么这可能会在每个平台上以不同的方式完成 - 所以不是 PCL。

3.  一旦您有了照片（例如，在 MemoryStream 中编码为 JPEG）并想要将其上传到服务器，那么我可能会使用异步处理程序 HttpWebRequest 来执行此操作（这些是旧方法，与 async/await 无关）在通用 PCL 代码中

4.  服务器上正在运行什么......好吧，那几乎肯定不是 PCL 代码 - 我可能会使用那里的方法将图像调整为设备就绪大小 - 例如不同大小的缩略图

** 显示图像 **

1.  当我需要从数据库中显示某人的图像时，我可能会让服务器返回可用缩略图 URL 的列表 - 这是服务器代码，因此不是 PCL

2.  实际请求联系人列表或联系人详细信息的应用程序代码（可能是 PCL 代码）可能会再次使用 HttpWebRequest。

3.  获取联系人并将其呈现在屏幕上的视图代码？那可能是 XAML - 我只会使用每个平台上的本机 Image 控件来使用和呈现适合情况的缩略图。

** 如果您在本地存储图像 **

1.  如果您在本地存储图像而不是使用中央服务器，那么您可能也需要为此使用非 PCL 代码。每个平台都有相同的基本类型的方法：LoadFile、SaveFile 等 - 每个平台都将提供创建、枚举、读取和写入文件夹和文件的机制，但是每个平台通过不同的文件系统 API（例如 System. WPF 中的 IO、WP7 Silverlight 中的独立存储等）。

2.  一旦你把你的文件变成了一个通用的（ish）结构，那么 PCL 控制代码将能够将每个文件视为一对字符串 - 它所在的文件夹和文件名......

3.  ...并且在您的 UI 层（例如 XAML）中，您可能能够直接引用这些图像文件 - 可能可以使用特定的 ValueConverter 在每个平台上生成正确的文件名或文件流来完成 - 例如在 wp7 中，您可以使用来自 Windows Phone 7 Silverlight 的转换器来自[IsolatedStorage 的绑定图像](https://stackoverflow.com/questions/7400624/windows-phone-7-silverlight-binding-image-from-the-isolatedstorage)

* * *

所以，我的总结是：

*   我会尽可能使用 PCL 代码
*   但实际上，PCL 代码只会在控制和网络中——而不是在图像收集、图像处理或图像渲染中

* * *

其他一些可能有帮助的事情：

*   目前我发现将.Net4.5 async/await 代码与“普通”代码混合是相当困难的——所以即使共享网络代码也可能很难做到——如果你为所有东西编写单独的代码，你实际上可能会节省时间:(
*   为了帮助共享代码，我肯定会尝试使用某种形式的 IoC 或 DI 来尝试在需要的地方注入特定于平台的代码的特定实现（这是我在 MvvmCross 中经常做的事情——这就是 @dsplaisted 在[http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)中的服务位置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T12:57:29.640

我倾向于同意图像处理应该是特定于平台的。作为一般规则，任何与视图相关的内容都不应包含在 PCL 中。上面的答案有一些很棒的技术细节，我不想重复，但想发布一个链接，指向我放在一起讨论使用 PCL 的原则的幻灯片。[http://prezi.com/ipyzhxvxjvp-/sharing-is-caring-code-reuse-in-xaml-applications/](http://prezi.com/ipyzhxvxjvp-/sharing-is-caring-code-reuse-in-xaml-applications/)

希望这可以为整体设计策略提供一些一般性指导，并加强先前答案中的信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T03:26:09.730

大多数人已经说过，答案也是“不可能”。PCL 中的 UI 元素违背了 PCL 的理念，PCL 应该可以跨您所针对的平台使用。

这是 MSDN 在 PCL 上所说的——“*由于不同设备的 UI 之间的行为差​​异，**可移植类库项目**不包含任何 UI 组件***”（来自[http://msdn.microsoft.com/en-us/library /gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx) )

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-08T15:51:48.740

您可以将图像作为“对象”类型放在视图模型上，并使用接口（注入）来创建位图。

```
public interface IBitMapCreator
{
    object Create(string path);
}

public class MyViewModel
{
    private bool _triedToSetThumb;
    private readonly IBitMapCreator _bc;

    public MyViewModel(IBitMapCreator bc, string path)
    {
        _bc = bc;
        SetThumb(path);
    }

    public object Thumb { get; private set; }

    private void SetThumb(string path)
    {
        try
        {
            if (!_triedToSetThumb)
            {
                string ext = Path.GetExtension(path).ToUpper();

                if (
                    ext == ".JPG" ||
                    ext == ".JPEG" ||
                    ext == ".PNG" ||
                    ext == ".GIF" ||
                    ext == ".BMP" ||
                    false
                    )
                {
                    Thumb = _bc.Create(path);
                    OnPropertyChanged(new PropertyChangedEventArgs("Thumb"));
                }
            }
        }
        finally
        {
            _triedToSetThumb = true;
        }
    }

} 
```

在 WPF 版本中，你可以这样做

```
class BitMapCreator : IBitMapCreator
{
    public object Create(string path)
    {
        return BitmapFrame.Create(new Uri(path));
    }
} 
```

通过使用这种方法，您可以直接对图像进行数据绑定，并且不需要转换器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T12:46:37.703

我的第一直觉是说不，鉴于您所描述的，您的 PCL 中不应该有图像。

但是，如果我打算这样做，图像可以通过不同库中的资源存储，您可以在其中为每个平台存储不同的图像，然后进行环境检查以确定要提取的图像。但这种方法真的只有在需要规模时才应该尝试。

通过规模，我的意思是你正在开源这个库，有 1000 个程序将使用它。如果这是供您自己在内部使用 3 或 4 个应用程序，我会说不要费心让自己头疼。只需将图像传递到共享库或通过配置进行设置即可完成。

或者只是不通过 PCL 管理图像。因为图像处理在每个平台上都会发生变化并且不同，尤其是您提到的那些。而且您一定会遇到一些奇怪的错误，它与在其他平台上的工作方式不同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T15:39:00.993

我可能会将实际的图像文件放在每个应用程序中。我认为尝试将它们嵌入 PCL 并没有什么价值。

在便携式 ViewModel 中，您可以通过 Uri 引用图像。不幸的是，每个平台上的 Uri 都需要不同。对于 Windows 应用商店应用程序，它需要类似于`ms-appx:////Assets/image.png`我认为 Windows Phone 的位置`/Assets/image.png`。

所以你需要一些代码来找出正确的 Uri 格式。这可能是一个特定于平台的服务，具有 ViewModel 将调用的可移植接口。您也许还可以创建一个绑定转换器来执行您需要的任何转换。

当然还有其他方法可以做到这一点——这正是我根据你的问题中的信息选择的。

# openlayers - 在 openlayers 中弹出

> ID：12512241
> 
> 赞同：2
> 
> 时间：2012-09-20T12:05:47.060
> 
> 标签：openlayers

popup 和 Frame 和 FrameColud 有什么区别？

而且，似乎弹出的方向取决于标记相对于地图的位置。流行音乐可能在标记上方或下方。

例如：

以上：

![在此处输入图像描述](../Images/7b4ebe38b7018a710ada356a6e082448.png)

以下：

![在此处输入图像描述](../Images/4b2ce17992289f63c6e0f112ebb2b76f.png)

现在，我想知道如何使弹出窗口始终位于标记的上方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T09:41:44.700

好吧，我自己回答这个问题。

您可以`calculateRelativePosition`像这样覆盖 FramedCloud 的函数：

```
OpenLayers.FramedCloud.prototype.calculateRelativePosition=function(){
  return 'tr';
} 
```

而这个函数是继承自`OpenLayers.Popup.Anchored`.

> 计算相对位置：函数（像素）{
> 
> ```
> var lonlat = this.map.getLonLatFromLayerPx(px);
> 
> var extent = this.map.getExtent();
> var quadrant = extent.determineQuadrant(lonlat);
> 
> return OpenLayers.Bounds.oppositeQuadrant(quadrant); 
> ```
> 
> },

# tomcat7 - java.lang.NoClassDefFoundError: org/apache/juli/logging/UserDataHelper

> ID：12512243
> 
> 赞同：1
> 
> 时间：2012-09-20T12:06:04.320
> 
> 标签：tomcat7

我有一个spring-hibernate web应用程序在tomcat服务器版本7.0.25和jdk 1.6.0_25上运行

我不知道为什么，但即使我没有更改我的代码或服务器配置的任何内容，今天早上我也开始出现以下异常。

如果你能分享你的想法和解决方案，我会很棒。提前致谢。

```
java.lang.NoClassDefFoundError: org/apache/juli/logging/UserDataHelper

 ...

 2012-09-20 15:02:01,344 [http-bio-8080-exec-8] ERROR org.apache.coyote.http11.Http11Protocol- 
java.lang.NoClassDefFoundError: Could not initialize class org.apache.tomcat.util.http.Cookies
    at org.apache.coyote.Request.<init>(Request.java:131)
    at org.apache.coyote.AbstractProcessor.<init>(AbstractProcessor.java:44)
    at org.apache.coyote.http11.AbstractHttp11Processor.<init>(AbstractHttp11Processor.java:257)
    at org.apache.coyote.http11.Http11Processor.<init>(Http11Processor.java:55)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.createProcessor(Http11Protocol.java:161)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.createProcessor(Http11Protocol.java:99)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:549)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)

 Exception in thread "http-bio-8080-exec-8" java.lang.NullPointerException
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.release(Http11Protocol.java:136)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.release(Http11Protocol.java:99)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:638)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:32:28.270

这个问题没有做任何事情就消失了，我不知道如何关闭或删除这个问题。

# php - Oracle 从最后一个列表中获取数据的问题

> ID：12512244
> 
> 赞同：0
> 
> 时间：2012-09-20T12:06:08.083
> 
> 标签：php, oracle

我在从数据库中查找最新数据时遇到问题。

当我`select no from book`从 1,2,3 返回时。

但是当我这样做时，据说它应该返回值 3 这返回我 2。

```
SELECT no FROM book WHERE rowid =( SELECT MAX(rowid) FROM book) 
```

奇怪的是，如果你从列表中删除所有数据，它也会让我回到最后一行，直到它有超过 2 个数据。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:10:15.680

看起来您的查询正在寻找 rowid 的最大值，而不是没有。

因此，试试这个：

```
SELECT MAX(no) FROM book; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:08:01.157

您不应该`max(no)`在子查询中使用吗？

```
SELECT no FROM book WHERE rowid =( SELECT MAX(no) FROM book) 
```

RowID 是一个伪列，从 0 开始 -[请参见此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns008.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:16:04.183

Why not just `SELECT MAX(no) FROM book`?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:09:25.537

试试这个

```
select no from book where rowid = (select max(no) from book) 
```

# java - yguard 删除默认类型构造函数

> ID：12512249
> 
> 赞同：0
> 
> 时间：2012-09-20T12:06:26.497
> 
> 标签：java, obfuscation, yguard

当我制作一个混淆的 jar 时，我的 yguard 库有一些问题。

Yguard 像这样删除默认构造函数类型（无参数，无可见性）：

```
 Test(){

   } 
```

你知道为什么它会删除这种类型的构造函数吗？

你有解决这个问题的办法吗？

谢谢，

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:36:46.067

我相信 yGuard 会因为[收缩任务](http://www.yworks.com/products/yguard/yguard_ant_howto.html#shrink "收缩任务")而删除此类构造函数。只需将您的班级排除在这样的缩小范围之外（predi取自[此答案）：](https://stackoverflow.com/questions/13031141/java-obfuscation-using-yguard-with-a-service-provider-interface-in-the-mix "这个答案")

```
<shrink logfile="obfuscate_shrink_log.xml">
<property name="error-checking" value="pedantic"/>
<keep>
    <method name="void main(java.lang.String[])" class="package.path.to.main.Class"/>
    <class name="package.path.to.my.implementation.of.DatatypeLibraryFactory" methods="public"/>
    <class classes="public"/>
</keep> 
```

或者使用 yGuard 文档 ( [http://www.yworks.com/products/yguard/yguard_ant_howto.html#hints](http://www.yworks.com/products/yguard/yguard_ant_howto.html#hints "提示部分") ) 的故障排除部分中描述的技术。

# objective-c - 如何将图像从 mainBundle 中的文件夹提取到数组中？

> ID：12512251
> 
> 赞同：0
> 
> 时间：2012-09-20T12:06:28.617
> 
> 标签：objective-c, xcode, directory, mainbundle

在我的应用程序包中，我有几个项目的几个图像。

ItemA_largepicture.png

ItemA_smallPicture.png

ItemA_overViewPicture.png

ItemB_largepicture.png

ItemB_smallPicture.png

ItemB_overViewPicture.png

ItemC_largepicture.png

ItemC_smallPicture.png

ItemC_overViewPicture.png

...

例如，我想将所有 ItemB 图片提取到一个数组中。我可以按照*王子*的建议去做

```
NSString *bundleRootPath = [[NSBundle mainBundle] bundlePath];
NSArray *bundleRootContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:bundleRootPath error:nil];
NSArray *files = [bundleRootContents filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"self beginswith 'ItemB'"]];
NSLog(@"%@",files); 
```

这工作得很好。下一个问题是所有 ItemB 文件都在名为 ItemB 的文件夹中。不知何故，我需要将包中的路径添加到 ItemB 文件夹。我想

```
NSString *bundleRootPath = [[NSBundle bundleWithPath:@"ItemB"] bundlePath]; 
```

是合乎逻辑的，但这不起作用。谁能解释一下这是如何工作的，以及如何访问该文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:34:44.307

```
NSString *bundleRootPath = [[NSBundle mainBundle] bundlePath];
NSString *itemBPath = [bundleRootPath stringByAppendingPathComponent:@"ItemB"];
NSArray *itemBContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:itemBPath error:nil]; 
```

# asp.net - Asp.Net MVC 复选框+文本框组合 -> 发布

> ID：12512252
> 
> 赞同：0
> 
> 时间：2012-09-20T12:06:30.913
> 
> 标签：asp.net, html, asp.net-mvc, forms

技术：Asp.Net MVC3 / Razor

我正在生成一个动态表单，其中列出了以下类型的问题列表：

*   文本：带有文本框的问题
*   多项选择：带有复选框列表的问题
*   Singlechoice：带有单选按钮列表的问题

所有这一切都完美无缺，当我发布表单时，我使用模型绑定器来匹配模型和选定的答案

**但 ：**

现在我想自定义多选和单选：

*   ***多项选择题：带有或不带有与复选框关联***的附加文本框的复选框列表的问题
**   Singlechoice：带有单选按钮列表的问题，有或没有与***单选按钮关联的附加文本框****

 *当我在我的模型绑定器中获得发布的集合时，我找不到将复选框/收音机与相应的文本框答案相关联的方法

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:25:58.233

我猜您正在尝试让用户选择“其他”并在没有选项匹配的情况下填写他们自己的值。

您可以使用 javascript 执行此操作，将您的单选按钮添加为其他值或其他值，然后将 onBlur 处理程序分配给您的文本框，将您的其他单选按钮的值设置为文本框的值。看这个例子：

[http://jsfiddle.net/rrVps/1/](http://jsfiddle.net/rrVps/1/)*

# c++ - C++ OpenMP 代码中的内存泄漏

> ID：12512262
> 
> 赞同：3
> 
> 时间：2012-09-20T12:06:58.303
> 
> 标签：c++, memory, openmp, memory-leaks

我编写了一个 c++ openmp 代码，它在并行区域中有一个动态分配的内存私有变量，该区域在 while 循环中。动态分配的内存在每个循环的并行区域结束时被释放。在每次分配和释放之后，我正在通过 linux 机器上的 /proc/self/stat 文件监视内存。我发现驻留集大小的内存更少。为什么会这样？代码类似于 -

```
float *dynm;
while(condition)
{
    pragma omp parallel shared(list of variables) private(dynm)
    {
        read_values_from_/proc/self/stat_print_rss;
        dynm = new float[size]; 
        read_values_from_/proc/self/stat_print_rss;
        pragma omp for schedule(static, chunk) nowait
                for(counter)
        {
            do_operation;
        }
        delete []dynm;
        read_values_from_/proc/self/stat_print_rss;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:13:10.440

由于计算 RSS 的方式非常复杂，因此测量 RSS 并不是搜索内存泄漏的一种非常准确的方法。有一些特殊的内存调试器，比如`valgrind`或者内置`glibc`的可以告诉你内存是否泄漏。您还必须了解`glibc`使用两种完全不同的机制来动态分配内存。

对于大型分配，它使用`mmap(2)`系统调用执行私有匿名内存映射。这种方法只能分配大小是系统页面大小的倍数（在大多数现代架构上为 4 KiB）的块，因此不适合小分配。当浪费太多内存时，甚至不适合更大的分配，例如，如果您想分配一个 17 KiB 的块，则必须分配 20 KiB（5 乘以 4 KiB），而 15% 的内存将是浪费了。

对于较小的分配，使用系统提供的堆。有一种叫做*系统中断*的东西，它是进程的数据段结束的地方。它可以随着`brk(2)`系统调用向上移动以分配更多内存并向下移动以释放它。由于每个进程只有一个堆区域并且操作系统将其视为单个块，因此内置了一个特殊的堆管理器`glibc`，可以进一步将该块细分为更小的分配。

C++`new`运算符调用`malloc(3)`from`glibc`以执行内存分配。`malloc(3)`根据要分配的内存块的大小调用上述两种内存分配机制之一。C++运算符`delete`调用`free(3)`是. 内存块被释放后会发生什么很大程度上取决于它最初是如何分配的。`glibc``malloc(3)`

使用该`mmap(2)`机制分配的内存通过使用取消映射来解除分配`munmap(2)`。这会从进程的虚拟地址空间中删除内存映射，并释放用于支持分配的物理内存页面。

对于在堆中分配的内存而言，事情要复杂得多，并且在很大程度上取决于用于管理它的算法。如果被释放的块不是位于堆的末尾，而是位于其他地方，那么堆大小不能减小，因为在高位内存地址上还有其他分配。这只是所谓的*堆碎片*表现出来的众多形式之一。另一个没有看到已用内存减少的可能原因是，堆管理器可能决定不将中断的位置移回，以预期未来可能的分配，并且调用`brk(2)`是一项昂贵的操作。

# events - 邀请朋友参加活动会引发 OAuthException

> ID：12512265
> 
> 赞同：1
> 
> 时间：2012-09-20T12:07:29.363
> 
> 标签：events, facebook-graph-api, invite

我正在尝试使用以下代码邀请登录的 facebook 用户的朋友参加某个活动：-

```
FB.ui({method: 'apprequests',
       message : user.name + " has invited you to an event",
      title : "Invite friends to go along with you",
      },function(response){
        for(i=0;i<response.to.length;i++){
            FB.api('/'+eventId+'/invited/'+user.id,'post',function(resp){
            alert(resp);});
        }
      }); 
```

但我收到此错误

```
error:{"message":"(#200) ","type":"OAuthException","code":200} 
```

我有来自用户的 create_event、manage_pages、publish_stream、photo_upload 权限。谁能给我指点我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:30:53.427

这是一个错误。

[https://developers.facebook.com/bugs/312375168858626?browse=search_5017eadead76b7a22667493](https://developers.facebook.com/bugs/312375168858626?browse=search_5017eadead76b7a22667493)

当开发人员抱怨错误时，Facebook 会解决错误。在上面的链接中，您应该报告您遇到与作者相同的问题。

# apache - Htaccess 用 ? 重写 URL 在重复的网址中

> ID：12512266
> 
> 赞同：1
> 
> 时间：2012-09-20T12:07:32.390
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, http-status-code-301

我们已经从 IIS 转移到 Apache 并使用以下重写规则将 www.example.co.uk/Default.aspx?pagename=About-Us 重定向到新页面 url www.example.co.uk/About-Us/

```
RewriteCond %{REQUEST_URI} ^/Default\.aspx$
RewriteCond %{QUERY_STRING} ^pagename=About-Us$
RewriteRule ^(.*)$  http://www.domain.co.uk/About-Us/ [R=301,L] 
```

问题是这条规则在谷歌 WMT 中显示为重复的内容，并且页面在两个 URL 上都提供......

谁能发现这条规则有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:13:37.233

将您的规则更改为：

```
RewriteCond %{QUERY_STRING} ^pagename=About-Us$ [NC]
RewriteRule ^Default\.aspx$  http://www.domain.co.uk/About-Us/? [R=301,L,NC] 
```

另请注意，搜索机器人需要一些时间才能删除重复的 URI。

# iphone - 图像 90 度旋转 AVCam

> ID：12512267
> 
> 赞同：2
> 
> 时间：2012-09-20T12:07:36.883
> 
> 标签：iphone, ios, gpuimage, avcam

我在 Stackoverflow 中查看了很多问题，但没有一个能解决我的问题。

所以，我正在使用 Apple 的 AVCam 示例：http: [//developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)

因此，当我拍照并将其保存在图像库中时，它很好，但是当我通过裁剪将其显示在屏幕上以及通过使用将其发送到服务器时

```
NSData* pictureData = UIImageJPEGRepresentation(self.snappedPictureView.image, 0.9); 
```

它发送它旋转 90 度！

这是我裁剪它的代码：

```
UIImage* cropped = [image imageByCroppingRect:CGRectMake(0, 0, (image.size.width *             300)/self.view.frame.size.width, (image.size.height * 300)/self.view.frame.size.height)];

imageByCroppingRect is:
- (UIImage *) imageByCroppingRect:(CGRect)area
{
UIImage *croppedImage;
CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], area);
// or use the UIImage wherever you like
croppedImage = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef);

return croppedImage;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:58:43.960

当您裁剪图像时，您会丢失与该图像关联的元数据，告诉它旋转它的正确方法。

相反，您的代码应保留图像的原始旋转，如下所示：

```
- (UIImage *) imageByCroppingRect:(CGRect)rect {

    CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:self.scale orientation:self.imageOrientation];
    CGImageRelease(imageRef);
    return result;
} 
```

# c# - 移除开关盒的设计模式

> ID：12512268
> 
> 赞同：3
> 
> 时间：2012-09-20T12:07:40.533
> 
> 标签：c#, design-patterns, switch-statement, solid-principles, open-closed-principle

我需要根据所提供的验证特定国家/地区的邮政编码是否是强制性的`countryid`。目前我正在使用`switch`声明来执行此操作，但此代码违反了 Open/Closed SOLID 原则。我想知道如何摆脱`switch`这种情况。

```
public class PostCodeVerifyMandatory : IPostCodeVerifyMandatory {
    public bool IsPostCodeRequired(int countryId, string region)
    {
        switch (countryId) {
            case 1:     //UK
            case 12:    //Australia
            case 29:    //Brazil
            case 31:    //Brunei
            case 37:    //Canada
            case 56:    //Denmark
            case 105:   //Japan
            case 110:   //South Korea
            case 114:   //Latvia
            case 136:   //Moldova
            case 137:   //Monaco
            case 145:   //Netherlands
            case 165:   //Poland
            case 166:   //Portugal
            case 183:   //Slovak Republic (Slovakia)
            case 189:   //Spain
            case 196:   //Sweden
            case 197:   //Switzerland
            case 199:   //Taiwan Region
            case 213:   //Ukraine
            case 215:   //USA
            case 221:   //Vietnam
                return true;
            case 232:   //Ireland
                return region == "Dublin";
            default:
                return false;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:10:23.857

您的`switch`语句有效地将整数映射到布尔值，默认值为`false`.

所以在这种情况下，我会简单地创建一个`Dictionary<int,bool>`具有适当值的。由于这些值几乎是固定的，您可以在声明中对其进行初始化：

```
Dictionary<int, bool> dict = new Dictionary<int, bool>() {
  {  1 /* UK */,        true  }, 
  { 12 /* Australia */, false } 
    ...etc...
}; 
```

正如@Nick 指出的那样，爱尔兰的情况意味着您仍然需要一些额外的逻辑，因此您希望 Dictionary 是`private`，并且可以通过您的`IsPostCodeRequired(int,strnig)`方法访问答案。

编辑：
正如@JustinHarvey 指出的那样，最好从数据库中获取这些值。

如果您想对开放/封闭原则*非常*严格，您可以使用[策略](http://en.wikipedia.org/wiki/Strategy_pattern)设计模式 - 您将为每个国家/地区创建一个单独的具体策略对象。如果添加了一个新国家，您将为该国家创建一个新的 ConcreteStrategy 对象。这样您就可以为具有特殊规则的国家/地区添加逻辑，而无需触及您的原始代码。
但是，有特殊规则的国家可能很少，所以除非你*真的*不能在生产后更改代码，否则这就是过度工程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:18:22.140

Maybe something like this:

```
 private Dictionary<int, string> _dict;
            protected Dictionary<int, string> CountryDictionary
            {
                get
                {
                    if (_dict == null)
                    {
                        _dict = new Dictionary<int, string>();
                        _dict.Add(1, "UK");
                        _dict.Add(12, "Australia");
                        // and so on
                    }

                    return _dict;
                }
            }

            public class PostCodeVerifyMandatory : IPostCodeVerifyMandatory
            {
                public bool IsPostCodeRequired(int countryId, string region)
                {
                    return CountryDictionary.ContainsKey(countryId);
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T14:48:30.350

我可能会遵循 c2 Wiki 页面“ [Switch statements 气味](http://c2.com/cgi/wiki?SwitchStatementsSmell)”中的那条建议：

> 使用数据库或 TableOrientedProgramming 有时是适当的“修复”，而不是多态性。例如，商店产品分类最好在具有多对多类别表的数据库中处理，而不是案例语句。

你可以有类似的东西：

```
public class Country 
{
  public List<Region> Regions { get; set; }

  public bool IsPostCodeRequiredByDefault { get; set; }
}

public class Region
{
  private bool? _isPostCodeRequired;

  public Country Country { get; set; }

  public bool IsPostCodeRequired 
  {
    get { return _isPostCodeRequired ?? Country.IsPostCodeRequiredByDefault; }
  }
} 
```

通过使区域成为一流的域概念而不仅仅是一个字符串，这还具有解决次要“原始痴迷”气味的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:19:50.380

尝试这个：

```
public class PostCodeVerifyMandatory : IPostCodeVerifyMandatory
{
    public List<Func<int, string, bool>> Rules { get; private set; }

    public PostCodeVerifyMandatory()
    {
        Rules = new List<Func<int, string, bool>>();
    }

    public bool IsPostCodeRequired(int countryId, string region)
    {
        if(Rules == null)
            return false;

        return (Rules.Any(r => r(countryId, region)));
    }
} 
```

在使用它之前，您必须加载规则集：

```
var simpleCountries = new List<int> 
                {
                    1,  // UK
                    12,  // Australia
                    29,  // Brazil
                    56,   // Brunei
                    //..
                    //..
                    215,   //USA
                    221   //Vietnam
                };

var postCodeVerifier = new PostCodeVerifyMandatory();

// 1 rule for simple countries
postCodeVerifier.Rules.Add((id, region) => simpleCountries.Contains(id)); 

// Special rule for Ireland
postCodeVerifier.Rules.Add((id, region) => id == 232 && region.Equals("Dublin")); 

var a = postCodeVerifier.IsPostCodeRequired(232, "Dublin"); 
```

或使其完全由数据驱动（以字典为例）：

```
var countries = new Dictionary<int, string> 
                {
                    { 1, null },      // UK
                    { 12, null },     // Australia
                    { 29, null },     // Brazil
                    { 56, null },     // Brunei
                    //..
                    //..
                    { 215, null },    //USA
                    { 221, null },    //Vietnam
                    { 232, "Dublin" } // Ireland
                };

var postCodeVerifier = new PostCodeVerifyMandatory();

// 1 rule for all
postCodeVerifier.Rules.Add((id, region) => 
                              countries.ContainsKey(id) && 
                              (countries[id] ?? region) == region); 
```

# c# - PowerPoint 查看器嵌入问题

> ID：12512276
> 
> 赞同：2
> 
> 时间：2012-09-20T12:08:25.460
> 
> 标签：c#

我在主窗体中嵌入了一个 PowerPoint Viewer 以显示一个 pptx 文件。我的电脑上有 2 台显示器，我正在尝试在我的第二台显示器上运行该应用程序。当我在监视器 1 上运行程序时，一切都按预期工作。但是当我在监视器 2 上运行它时（这意味着我更改代码以在第二台监视器上运行应用程序，而不是运行应用程序然后自己将其移动到第二台监视器），PowerPoint Viewer 在第一台监视器上打开，然后移动到程序正在运行的第二个监视器。我相信这与没有正确设置父对象但不太确定的 PowerPoint 对象有关。这是我的代码：

```
[DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
static extern IntPtr FindWindow(IntPtr ZeroOnly, string lpWindowName);

[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern bool SetWindowText(IntPtr hwnd, String lpString);

[DllImport("user32.dll", CharSet = CharSet.Auto)]
public static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, UIntPtr lParam);

public const uint WM_SETFOCUS = 0x0007;
Microsoft.Office.Interop.PowerPoint.Application application;
Microsoft.Office.Interop.PowerPoint.Presentation presentation;

public MainForm()
{
    InitializeComponent();            
    DisplayOnMonitor();
}

private void MainForm_Load(object sender, EventArgs e)
{
    LoadSlideShow();
}

private void LoadSlideShow()
{
    IntPtr screenClasshWnd = (IntPtr)0;
    IntPtr x = (IntPtr)0;

    application = new Microsoft.Office.Interop.PowerPoint.Application();
    presentation = application.Presentations.Open2007(
                    Settings.Default.PowerPointPath,
                    Microsoft.Office.Core.MsoTriState.msoTrue,
                    Microsoft.Office.Core.MsoTriState.msoFalse,
                    Microsoft.Office.Core.MsoTriState.msoFalse,
                    Microsoft.Office.Core.MsoTriState.msoFalse);

    Microsoft.Office.Interop.PowerPoint.SlideShowSettings sst1 = presentation.SlideShowSettings;
    sst1.LoopUntilStopped = Microsoft.Office.Core.MsoTriState.msoTrue;
    Microsoft.Office.Interop.PowerPoint.SlideShowWindow sw = sst1.Run();

    IntPtr pptptr = (IntPtr)sw.HWND;
    SetParent(pptptr, splitContainerControl.Panel1.Handle);

    splitContainerLeft.Panel1.LostFocus += new EventHandler(OnLostFocus);
    splitContainerControl.PreviewKeyDown +=new PreviewKeyDownEventHandler(OnPreviewKeyDown);
    splitContainerLeft.Panel1.AutoSize = true;
    splitContainerControl.Panel1.Focus();
}

private void DisplayOnMonitor()
{
    Screen[] sc;
    sc = Screen.AllScreens;

    this.FormBorderStyle = FormBorderStyle.None;
    this.Left = sc[1].Bounds.Width;
    this.Top = sc[1].Bounds.Height;
    this.StartPosition = FormStartPosition.Manual;
    this.Location = sc[1].Bounds.Location;
    Point p = new Point(sc[1].Bounds.Location.X, sc[1].Bounds.Location.Y);
    this.Location = p;
    this.WindowState = FormWindowState.Maximized;
} 
```

我知道当调用 sst1.Run() 方法时会出现 PowerPoint Viewer，但我试图在此之前（和之后）使应用程序不可见，但它会引发异常。如果有办法指示 sst1 打开哪个显示器，那么我认为它会解决问题，但到目前为止我还没有运气。

任何帮助表示赞赏！

# codeigniter - 将帖子数据从 Joomla 发送到 CodeIgniter

> ID：12512277
> 
> 赞同：1
> 
> 时间：2012-09-20T12:08:31.933
> 
> 标签：codeigniter, post, joomla

我有一个在 CodeIgniter 中实现的系统，我试图通过 POST 在 Rsform 组件的文本区域中将一些数据发送到引用我的 CodeIgniter 系统的 url，我尝试使用 AJAX 请求使用以下代码发送发布数据

```
<script>
alert("jsc");
  var data;
  data='test from joomla!';
      $.ajax({
                type: "POST",
                url : 'http://localhost/cii/index.php/login/getNews/',
                data: {news:data},
                cache: false,

                success: function(html){
                alert(html);
                }
            }); 
```

getNews 控制器：

```
function getNews() {
  //print_r($this->session->userdata);
  header('Access-Control-Allow-Origin: *');
  echo "news is ".$news=$_POST['news'];
  $data = array ( 'username' => "null", 'is_logged_in' => false, 'news'=>$news);
  $this->session->set_userdata($data); //var_dump($_POST); //               
  print_r($this->session->userdata); session_start(); echo session_id(); 
} 
```

但它失败了，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:04:24.913

在 mozilla firefox 中使用 Firebug 之类的东西来观察哪些数据正在发布到应用程序，以检查您的 ajax 调用是否正常工作。

然后在您的 codeigniter 控制器方法中，只需输入此代码即可查看数据是否到达它。

```
function getNews()
{  
    foreach($_POST as $key => $val)  
    {  
        $options[$key] = $this->input->post($key);  
    }  

    var_dump($options);      
} 
```

# c# - 将两个文本框另存为日期时间 asp.net C#

> ID：12512282
> 
> 赞同：0
> 
> 时间：2012-09-20T12:08:46.460
> 
> 标签：c#, asp.net, database, visual-studio-2010, datetime

我有两个文本框，第一个我有这种格式的日期：2012.09.20，第二个我有这种格式的时间：15:30:00。在数据库中，我有列名“Eventstart”类型：DateTime。现在我喜欢从两个文本框中取值并将它们放在这样的地方：

```
DateTime end = Convert.ToDateTime(TextBoxEnd.Text) + Convert.ToDateTime(TextBoxTimeEnd.Text); 
```

但是给我这个错误：错误2运算符'+'不能应用于'System.DateTime'和'System.DateTime'类型的操作数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:10:36.650

听起来你应该使用：

```
DateTime date = Convert.ToDateTime(TextBoxEnd.Text);
DateTime time = Convert.ToDateTime(TextBoxTimeEnd.Text);
DateTime combined = date.Date + time.TimeOfDay; 
```

或者你可以结合*文本*然后解析：

```
DateTime dateTime = Convert.ToDateTime(TextBoxEnd.Text + " " +
                                       TextBoxTimeEnd.Text); 
```

我不确定我是否会使用`Convert.ToDateTime`- 如果您知道文本框的确切格式，您应该使用`DateTime.TryParseExact`. 不过，您应该确定在这种情况下使用哪种文化。如果它是真正固定的精确格式，`CultureInfo.InvariantCulture`可能是合适的。如果它是特定于文化的格式，则使用用户的文化。

您可能还想使用根本不使用文本框的替代 UI 表示，这将避免潜在的麻烦字符串转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:11:52.750

连接您的 TextBoxes 文本并将[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)与格式一起使用`"yyyy.MM.dd HH:mm:ss"`

连接文本后，您应该有：`"2012.09.20 15:30:00"`

```
DateTime dt = DateTime.ParseExact(TextBoxEnd.Text + " " + TextBoxTimeEnd.Text, 
                                  "yyyy.MM.dd HH:mm:ss", 
                                  CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:12:24.910

你有没有尝试过类似的东西

```
DateTime end = Convert.ToDateTime(TextBoxEnd.Text) + TimeSpan.Parse(TextBoxTimeEnd.Text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:10:28.333

首先连接两个值，然后将其添加到 DateTime 变量

例子：

```
string str = date.Text + time.Text;  // assumed date and time are textboxes

DateTime dt=new DateTime();
DateTime.TryParse(str,dt); // returns datetime in dt if it is valid 
```

# javascript - 从 JSON 输出中提取一个属性，然后传递一个套接字

> ID：12512286
> 
> 赞同：0
> 
> 时间：2012-09-20T12:08:53.837
> 
> 标签：javascript, json, node.js, information-extraction

下面的代码是在节点服务器中编写的，使用一个监控模块来测量函数的属性。我的问题是我想**从 JSON 输出中提取其中一个属性，**然后将其传递给套接字。

米是一个功能：

```
stats.meter('reqPerSec').mark; 
```

每秒以 JSON 格式打印：

```
setInterval(function() {
    console.log(stats.toJSON());
}, 1000); 
```

输出：

```
{
   reqPerSec:
   { mean: 0,
     count: 0,
     currentRate: 0,
     '1MinuteRate': 0,
     '5MinuteRate': 0,
     '15MinuteRate': 0
   }
} 
```

例如，我想要 的值`mean`并将其放入`socket.emit`.

```
socket.emit('monitoring', /*value of mean*/); 
```

套接字的调试应该是`"args":[0]`平均值为 0 的值：

```
{"name":"monitoring", "args":[0] } 
```

我不知道如何提取，它应该是这样的

```
function extractData(data) {
    data.reqPerSec.mean;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:58:06.337

基于[这个](https://github.com/felixge/node-measured/blob/master/example/http_requests_per_second.js)例子，你可以得到这样的平均值 -

```
var tmp = collection.toJSON();
console.log("mean = "+tmp.http.requestsPerSecond.mean); 
```

# iphone - ios：以编程方式创建 NavigationBar，但无法设置标题

> ID：12512288
> 
> 赞同：0
> 
> 时间：2012-09-20T12:09:08.460
> 
> 标签：iphone, ios, navigation, uinavigationbar

我在不使用 xib 文件的情况下以编程方式创建 NavigationBar。并创建一个带有文本“left”的左按钮，添加到导航栏，并将标题设置为“Demo”。

代码 ：

```
-(void) createNavBar:(NSMutableArray *)arguments withDict:(NSMutableDictionary *)options
{

    self.navBarController = [[[UINavigationController alloc] init] autorelease];
    navBar = [navBarController navigationBar];
    navBarController.navigationBar.bounds = CGRectMake(0, 0, 320, navBarHeight);
    [navBarController.navigationBar  setBackgroundImage:[[UIImage imageNamed:@"www/images/ios_hd_bg.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 0, 2, 0)]
     forBarMetrics:UIBarMetricsDefault];

    [navBarController view];

    navBarController.navigationItem.title = @"title";

    [navBarController.view setFrame:navBarController.navigationBar.bounds];

    UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
    button = [self renderNavBarTextBtn:@"left" withButton:button direction:@"left"];
    [navBar addSubview:button];

    [[[self webView] superview] addSubview: navBarController.view];
} 
```

但是，程序可以成功设置导航栏背景图片，显示左键，但无法设置标题。这么奇怪？

补充：我使用 cordova 框架来调用 . 并且该接口只是提供给cordova调用。感谢下面的答案，但我仍然无法解决我的问题。

截图：（注：显示左键不显示标题）

![在此处输入图像描述](../Images/9f860ce814e9d5e85b9ae3d93d563ddb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:25:37.677

```
 UIBarButtonItem *_backButton = [[UIBarButtonItem alloc] initWithTitle:@"left" style:UIBarButtonItemStyleDone target:nil action:nil];
    self.navigationItem.backBarButtonItem = _backButton;

    self.navigationItem.title=@"Demo";
    [_backButton release], 
    [_backButton = nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:29:08.750

请试试这个：

```
self.navigationItem.title=@"Your Title"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:50:27.813

您可以设置视图标题，在导航栏上显示标题

```
self.title=@"My Navigation View"; 
```

或者您可以在要显示的视图中设置 navigationBarTitle

```
self.navigationItem.title=@"My Navigation"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:14:38.147

放

```
navBar.title =@"Your title"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:09:52.680

试试这个代码片段：

```
//nativeControls.hideLeftNavButton();

    nativeControls.setupRightNavButton(
        "About",
        "",
        "onRightNavButton"
    );

    nativeControls.showNavBar(); 
```

否则请参阅此博客：http: [//zsprawl.com/iOS/2012/05/navigation-bar-with-nativecontrols-in-cordova/](http://zsprawl.com/iOS/2012/05/navigation-bar-with-nativecontrols-in-cordova/)

# css - 为什么我看不到使用 bootstrap CSS 设置的背景图像，但可以看到外部图像资源？

> ID：12512290
> 
> 赞同：0
> 
> 时间：2012-09-20T12:09:14.293
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我正在使用 Bootstrap 编写 Rails 应用程序。我想为它设置一个图像背景，我已经使用`override.css.scss`文件完成了。`app/assets/images/`查看文件夹中我的图像时，背景显示为白色。

如果我将图像设置为外部资源，则显示正常。

用本地图像覆盖的 CSS：

```
html, body {
    padding-top: 60px;
    background-image: url('app/assets/images/nyc.png');
    /* background-repeat: no-repeat; */
    background-color: transparent;
    height: 1000px;

} 
```

用外部图像覆盖的 CSS：

```
html, body {
    padding-top: 60px;
    background-image: url('http://www.google.com/intl/en_com/images/srpr/logo3w.png');
    /* background-repeat: no-repeat; */
    background-color: transparent;
    height: 1000px; 
} 
```

莫名其妙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:21:00.557

CSS 中的相对 URL 是相对于 CSS 文件的，所以您可能指向了错误的位置？

```
/path/to/app/assets/images/nyc.png
/path/to/style.css 
```

除非您的 CSS 文件位于此处，相对于相关文件，否则您将在该图像上获得 404。

# android - 安卓应用触摸后黑屏

> ID：12512292
> 
> 赞同：0
> 
> 时间：2012-09-20T12:09:17.570
> 
> 标签：android, android-asynctask

好的，我现在可以通过以下步骤一直复制它：

打开应用程序，然后按返回，这会将我带出应用程序。

再次打开应用程序，就在启动页面之后，我得到黑屏并冻结。

在后面按我调用finish(); 这是终止应用程序的正确方法吗？我只能假设某些东西第一次没有正确关闭，导致应用程序在我重新打开时无法正确加载。

有人听说过这个吗？

# ruby-on-rails - 使用 nginx 提供通过子域的路由

> ID：12512294
> 
> 赞同：3
> 
> 时间：2012-09-20T12:09:25.350
> 
> 标签：ruby-on-rails, redirect, nginx, subdomain

所以我有两个域 - www.mysite.com 和 sub.mysite.com

sub.mysite.com 被许多由于各种原因无法更新的遗留应用程序使用，并且它们对该域上的 URL 的请求需要继续工作。但是，代码正在从位于 sub.mysite.com 的 Rails 应用程序中移出，并将集成到 www.mysite.com

目前的计划是在 www.mysite.com/sub 上提供 sub.mysite.com 内容，但我不知道如何让 nginx 从 www.mysite.com/sub 呈现内容好像它来自 sub.mysite.com

我在 nginx 配置中尝试了一些重写规则，但它们一直将我重定向到 www.mysite.com/sub URL，而不是坚持使用 sub.mysite.com 地址。

在我的 nginx 配置的底部，我目前有：

```
server{
  listen 80;
  server_name sub.mysite.com;
  location / {
    proxy_redirect off;
    proxy_pass http://www_server/sub;
  }
} 
```

我所要求的甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:52:47.630

如果我做对了，你想要的是：

```
location ^~ /sub/ {
    rewrite ^/sub/(.*) http://sub.example.com/$1 permanent;
} 
```

希望能帮助到你。

# javascript - 为什么我不能显示“人名：”？

> ID：12512295
> 
> 赞同：0
> 
> 时间：2012-09-20T12:09:34.333
> 
> 标签：javascript, jquery

```
<p id="display1"></p>
<p id="display2"></p>

var person1= {
    name: 'John Smith',
    hobbies: ['surfing', 'diving']
};

$("#display1").append( "<br/>" + "person name :" + person1.name  + "<br/>");

var person2= clone(person1);

$("#display2").append( "<br/>" + "person name :" + person1.name  + "<br/>"); 
```

[演示 jsFiddle](http://jsfiddle.net/centerwow/sGK6u/)

上面的代码 siplay person1 的名字。

为什么它不显示 person2 ？很多谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:12:34.833

您的代码中存在语法错误。`clone`克隆 DOM 对象，为什么不呢？

```
var person2 = person1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:14:34.757

查看这个问题的答案

[在 JavaScript 中深度克隆对象的最有效方法是什么？](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)

涵盖了您需要的内容，如this fiddle所示

[http://jsfiddle.net/sGK6u/1/](http://jsfiddle.net/sGK6u/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:11:48.833

JQuery 的`clone()`唯一克隆 DOM 元素。改用`extend()`：`$.extend({}, person1);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:14:03.177

```
$("#display2").append( "<br/>" + "person name :" + person2.name  + "<br/>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:16:31.990

You are getting error in Clone()...Use "extend" method to copy the object

```
 jQuery.extend(copiedObject,originalObject); 
```

# linux-kernel - 我可以在 Linux 模块中声明的数组/缓冲区有大小限制吗？

> ID：12512297
> 
> 赞同：2
> 
> 时间：2012-09-20T12:09:35.770
> 
> 标签：linux-kernel, kernel-module

我能够 insmod hello.ko 没有任何错误消息。但我的理解是不应该工作，因为 linux 内核堆栈只有 4KB 大小。看来我的理解有些差距。谁能帮我弄清楚我错过了什么？

```
#include<linux/init.h>
#include<linux/kernel.h>
#include<linux/module.h>
MODULE_LICENSE("Dual BSD/GPL");

int popo()
{
    int a[10*1024*1024]={0};
            printk(KERN_WARNING "popo\n");
    }
    static int __init my_init()
    {
      printk(KERN_WARNING "Hello world!\n");
  popo();
  return 0;
}

static void my_exit()
{
  printk(KERN_WARNING "bye!\n");
}

module_init(my_init);
module_exit(my_exit); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:42:06.793

@Eugene：确实。我将本地缓冲区大小设置为 10240 字节，然后 memset() 它；在“制作”时收到警告：

```
...
<...>/kstk.c: In function ‘func’:
<...>/kstk.c:14:1: warning: the frame size of 10244 bytes is larger than 1024 bytes [-Wframe-larger-than=]
  Building modules, stage 2.
Building with KERNELRELEASE = 3.2.0-30-generic-pae
... 
```

gcc 发出“Wframe-larger-than=”警告；但这只是一个警告！

从 gcc 手册页：

```
" -Wframe-larger-than=len
           Warn if the size of a function frame is larger than len bytes.  The computation done to determine the stack frame size is approximate
           and not conservative.  The actual requirements may be somewhat greater than len even if you do not get a warning.  In addition, any
           space allocated via "alloca", variable-length arrays, or related constructs is not included by the compiler when determining whether or
           not to issue a warning.
" 
```

然后我为 ARM 编译了 ko 并运行了一个模拟的 QEMU/ARM VM。猜猜看：它惊人地崩溃了！有许多 printk 的：第一和最后几行 printk 复制如下：

```
ARM /myprj $ insmod ./kstk.ko 
[   13.967453] All okay!
[   13.967508] Hello, world
[   13.971181] Unable to handle kernel paging request at virtual address 0d890cc0
[   13.972465] pgd = 80004000
[   13.972966] [0d890cc0] *pgd=00000000
[   13.973831] Internal error: Oops: 5 [#1] SMP
[   13.974649] Modules linked in: kstk(O)
[   13.975656] CPU: 0    Tainted: G           O  (3.2.21 #1)
[   13.976893] PC is at do_page_fault+0xbc/0x3c4
[   13.977648] LR is at do_page_fault+0x74/0x3c4
[   13.978373] pc : [<804165a4>]    lr : [<8041655c>]    psr: 20000193
[   13.978386] sp : 8e056058  ip : 005e4312  fp : 8e0560e4
[   13.980465] r10: 0d890c00  r9 : 2ab2906c  r8 : 8e056058
[   13.981366] r7 : 00000005  r6 : 0d890cc0  r5 : 8e056018  r4 : 8e0561b0
[   13.982471] r3 : 20000193  r2 : 005e4311  r1 : 8e056000  r0 : 8e056000
[   13.983608] Flags: nzCv  IRQs off  FIQs on  Mode SVC_32  ISA ARM  Segment kernel
[   13.984836] Control: 10c53c7d  Table: 6e05006a  DAC: 00000015
[   13.985768] Process nfsiod (pid: 342, stack limit = 0x8e0542f0)
[   13.986753] Stack: (0x8e056058 to 0x8e056000)
[   13.987920] [<804165a4>] (do_page_fault+0xbc/0x3c4) from [<80416958>] (do_translation_fault+0xac/0xb0)
[   13.989377] [<80416958>] (do_translation_fault+0xac/0xb0) from [<800084b8>] (do_DataAbort+0x48/0xac)
[   13.991682] [<800084b8>] (do_DataAbort+0x48/0xac) from [<8041495c>] (__dabt_svc+0x3c/0x60)
[   13.992351] Exception stack(0x8e0561b0 to 0x8e0561f8)
[   13.992850] 61a0:                                     8e056000 8e056000 005e4311 20000193
[   13.993863] 61c0: 8e056350 8e056038 0d890cc0 00000005 8e0561f8 2ab2906c 0d890c00 8e056284
[   13.994673] 61e0: 005e4312 8e0561f8 8041655c 804165a4 20000193 ffffffff

--snip--

       17.321313] Exception stack(0x8e055d80 to 0x8e055dc8)
    [   17.321962] 5d80: 00000004 00000000 00000003 00000002 8f943c00 00000040 8420804c 84208044
    [   17.322979] 5da0: 00000001 8f943cf8 8e055e24 8e055e5c 8e055d28 8e055e08 00000000 80038024
    [   17.323989] 5dc0: 60000113 ffffffff
    [   17.324468] [<80414a6c>] (__und_svc+0x4c/0x80) from [<80038024>] (do_exit+0x4d0/0x6ec)
    [   17.325468] [<80038024>] (do_exit+0x4d0/0x6ec) from [<800141b0>] (die+0x144/0x1f8)
    [   17.326417] [<800141b0>] (die+0x144/0x1f8) from [<8001cd7c>] (__do_kernel_fault+0x84/0x94)
    [   17.327447] [<8001cd7c>] (__do_kernel_fault+0x84/0x94) from [<804165ec>] (do_page_fault+0x104/0x3c4)
    [   17.328577] [<804165ec>] (do_page_fault+0x104/0x3c4) from [<80416958>] (do_translation_fault+0xac/0xb0)
    [   17.329863] [<80416958>] (do_translation_fault+0xac/0xb0) from [<800084b8>] (do_DataAbort+0x48/0xac)
    [   17.331175] Code: e24cb004 e92d4000 e8bd4000 e5901278 (e5914008) 
    [   17.331939] ---[ end trace f1c8dff59d91e3cd ]---
    [   17.332521] Fixing recursive fault but reboot is needed!
    [   17.333493] BUG: scheduling while atomic: insmod/476/0x00000003
    [   17.334656] Modules linked in: kstk(O)
    [   17.335455] 
    [   17.335779] Pid: 342, comm:               nfsiod
    [   17.336706] CPU: 0    Tainted: G      D    O  (3.2.21 #1)
    [   17.337778] PC is at 0x2ad4ff68
    [   17.338415] LR is at 0x2abca3a0
    [   17.339060] pc : [<2ad4ff68>]    lr : [<2abca3a0>]    psr: 20000010
    [   17.339081] sp : 7e93cc38  ip : 00000000  fp : 7e93ccbc
    [   17.341184] r10: 40000000  r9 : 2ab2906c  r8 : 00000001
    [   17.341682] r7 : 2aae2650  r6 : 2ab28e00  r5 : 000000c0  r4 : 2ac68000
    [   17.342743] r3 : fffffff8  r2 : 2adade14  r1 : 2adade04  r0 : 2ac68090
    [   17.344019] Flags: nzCv  IRQs on  FIQs on  Mode USER_32  ISA ARM  Segment user
    [   17.345280] Control: 10c53c7d  Table: 6e05006a  DAC: 00000015 
```

***道德：开发人员必须注意所有警告！:)***

# java - 在 JAXB 中处理 CDATA

> ID：12512299
> 
> 赞同：2
> 
> 时间：2012-09-20T12:09:41.783
> 
> 标签：java

我需要解析一个 xml 文件（我确实使用 JAXB 解析），但我想将 Xml 文件值的某些部分放入一个字符串中。在我上网后，可以通过使用 CDATA 来实现。以下链接讨论了 CDATA。但我确实对代码有疑问。我应该在哪里以及如何指定我希望将哪些元素作为 CDATA 处理。

[http://jaxb.java.net/faq/JaxbCDATASample.java](http://jaxb.java.net/faq/JaxbCDATASample.java)

我的 XML 如下所示。

```
<root>
    <Service>CDATASERVICE</Service>
    <Child>
        <param>
            <value>
                <struct>
                    <member>
                        <name>Servicename</name>
                        <value>service1</value>
                    </member>
                </struct>
            </value>
        </param>
        <param>
            <value>
                <struct>
                    <member>
                        <name>item1</name>
                        <value>36</value>
                    </member>
                    <member>
                        <name>Cdata</name>
                        <value>
                            <struct>
                                <member>
                                    <name>services</name>
                                    <value>
                                        <array>
                                            <data>
                                                <value>ABCD</value>
                                            </data>
                                        </array>
                                    </value>
                                </member>
                            </struct>
                        </value>
                    </member>
                    <member>
                        <name>item2</name>
                        <value>
                            <int>10</int>
                        </value>
                    </member>
                </struct>
            </value>
        </param>
    </Child>
</root> 
```

我想将以下部分作为上述 XML 文件中的字符串，我怎样才能得到它。

```
 <name>Cdata</name>
                            <value>
                                <struct>
                                    <member>
                                        <name>services</name>
                                        <value>
                                            <array>
                                                <data>
                                                    <value>ABCD</value>
                                                </data>
                                            </array>
                                        </value>
                                    </member>
                                </struct>
                            </value> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:26:29.110

您可以使用为此用例指定的`@XmlAnyElement`an 。`DomHandler`

**成员处理程序**

注释允许您将 XML 文档的`@XmlAnyElement`某些部分保留为 XML。默认情况下，这被保存为 DOM 节点。通过实现 a`DomHandler`您可以利用替代表示，例如 a `String`。

```
package forum12512299;

import java.io.*;
import javax.xml.bind.ValidationEventHandler;
import javax.xml.bind.annotation.DomHandler;
import javax.xml.transform.Source;
import javax.xml.transform.stream.*;

public class MemberHandler implements DomHandler<String, StreamResult> {

    private static final String MEMBER_START_TAG = "<member>";
    private static final String MEMBER_END_TAG = "</member>";

    private StringWriter xmlWriter;

    public StreamResult createUnmarshaller(ValidationEventHandler errorHandler) {
        xmlWriter = new StringWriter();
        return new StreamResult(xmlWriter);
    }

    public String getElement(StreamResult rt) {
        String xml = rt.getWriter().toString();
        int beginIndex = xml.indexOf(MEMBER_START_TAG) + MEMBER_START_TAG.length();
        int endIndex = xml.indexOf(MEMBER_END_TAG);
        return xml.substring(beginIndex, endIndex);
    }

    public Source marshal(String n, ValidationEventHandler errorHandler) {
        try {
            String xml = MEMBER_START_TAG + n.trim() + MEMBER_END_TAG;
            StringReader xmlReader = new StringReader(xml);
            return new StreamSource(xmlReader);
        } catch(Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

**结构**

下面是一个如何从映射`DomHandler`中引用的示例。`@XmlAnyElement`

```
package forum12512299;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Struct {

    private List<String> members;

    @XmlAnyElement(MemberHandler.class)
    public List<String> getMembers() {
        return members;
    }

    public void setMembers(List<String> members) {
        this.members = members;
    }

} 
```

**输入.xml**

下面我将您的 XML 文档简化为有趣的部分：

```
<struct>
    <member>
        <name>item1</name>
        <value>36</value>
    </member>
    <member>
        <name>Cdata</name>
        <value>
            <struct>
                <member>
                    <name>services</name>
                    <value>
                        <array>
                            <data>
                                <value>ABCD</value>
                            </data>
                        </array>
                    </value>
                </member>
            </struct>
        </value>
    </member>
    <member>
        <name>item2</name>
        <value>
            <int>10</int>
        </value>
    </member>
</struct> 
```

**演示**

```
package forum12512299;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Struct.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12512299/input.xml");
        Struct struct = (Struct) unmarshaller.unmarshal(xml);

        for(String string : struct.getMembers()) {
            System.out.println(string);
        }
    }

} 
```

**输出**

```
<name>item1</name><value>36</value>

<name>Cdata</name><value><struct><member><name>services</name><value><array><data><value>ABCD</value>
                            </data>
                        </array>
                    </value>

<name>item2</name><value><int>10</int>
        </value> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T14:33:09.343

您的问题标题中对 CDATA 的引用具有误导性。XML 中的 CDATA 部分是 XML 文件的一部分，如下所示：

```
<![CDATA[ … ]]> 
```

该部分的内容不会被解析为 XML，而是被视为原始字符文本。因此，它是在该部分中`&lt;`为每个人编写的替代方法。`<`

CDATA 不是 XML 信息集的一部分。大多数应用程序不会、不能也不应该关心输入文本是写为 CDATA 部分、“普通”文本还是这两者的混合。只有在实际序列化文件表示的非常低级别，您还需要处理空格、缩进、字符编码等内容，CDATA 才重要。这就是您提到的示例：显然有一种方法可以告诉 JAXB 给定的字符串应该呈现为 CDATA 部分或带有字符引用的“普通”XML。

对于您的应用程序，这似乎没什么用。为了使用 CDATA，您的输入 XML 必须*已经*包含 CDATA 标记。因为它没有（根据我们的示例），所以解析器别无选择，只能将其视为格式良好的 XML。[Blaise](https://stackoverflow.com/a/12513650)的回答已经指出，您仍然可以在数据结构中“按原样”表示子树，无论是作为 DOM 节点还是作为 XML 字符串。

# xpages - xpages 作为签名者运行代理

> ID：12512300
> 
> 赞同：1
> 
> 时间：2012-09-20T12:09:42.653
> 
> 标签：xpages, xpages-ssjs

有很多方法可以在 xpages 上运行旧版 LS 代码，包括 8.5.3 中针对数据源的新 webquerysaveagent 属性。但是我不确定如何在不重新编写 SSJS 中的整个代码的情况下以签名者身份运行代理（因此未勾选以 Web 用户身份运行）。有没有人知道如何实现这一目标？

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:25:41.570

您可以使用*sessionAsSigner* - 方法执行此操作：

```
sessionAsSigner.getCurrentDatabase().getAgent("RunAsSigner").run() 
```

必须禁用“以网络用户身份运行”选项。

要使用数据源运行，您必须使用相应的*NotesDocument*：

```
sessionAsSigner.getCurrentDatabase().getAgent("RunAsSigner").runWithDocumentContext(document1.getDocument()) 
```

# git - 版本控制系统历史处理

> ID：12512303
> 
> 赞同：0
> 
> 时间：2012-09-20T12:10:07.677
> 
> 标签：git, version-control, mercurial, commit

我目前正在编写一个基于简单`Node.js`的修订系统：只是`commit`，没有什么花哨的`brunch`，`revert`只是一个保持技能形状的练习。我使用 sqlite 作为数据后端，具有以下简单的 shema：

```
commitid int
parentid int
branch text
diff blob 
```

现在，当我切换分支时，我需要遍历所有提交并将差异相互应用，这可能适用于 10 次提交，但对于 1000 次提交，这肯定需要一些时间。其他系统喜欢`Hg`或`git`在几秒钟内切换分支，并且（**实际问题**）我想知道它们是否像每 100 次提交一样保留某种缓存，或者如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:58:49.140

好吧，可以肯定的一件事是，在 git 中：

*   你可以有几个父母
*   分支名称不是提交的一部分：同一个提交可以属于多个分支

此外，git 中的 blob 不是 diff，而是完整文件；但据我所知，hg 保持差异。

# python - 标头设置不正确

> ID：12512306
> 
> 赞同：0
> 
> 时间：2012-09-20T12:10:17.337
> 
> 标签：python, python-requests

最小示例：

```
# -*- coding: utf-8 -*-
import requests

xml = """<?xml version='1.0' encoding='utf-8'?>
<a>б</a>"""

print requests.post('http://httpbin.org/post', data=xml, headers={'Authorization': 'a', 'developerToken': 'b', 'clientCostumerID': 'c'}).headers 
```

未设置标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:17:48.617

You are already using the httpbin.org service, it returns you a JSON structure that includes all headers it received:

```
import requests

xml = """<?xml version='1.0' encoding='utf-8'?>
<a>б</a>"""

data = requests.post('http://httpbin.org/post', data=xml, headers={'Authorization': 'a', 'developerToken': 'b', 'clientCostumerID': 'c'}).json

for headername, headervalue in data['headers'].iteritems():
    print '%s: %s' % (headername, headervalue) 
```

When I run the above code, I get:

```
Content-Length: 48
Developertoken: b
Accept-Encoding: identity, deflate, compress, gzip
Connection: keep-alive
Clientcostumerid: c
Accept: */*
User-Agent: python-requests/0.14.0 CPython/2.7.3 Darwin/11.4.0
Host: httpbin.org
Content-Type: 
Authorization: a 
```

# php - 将空字符串绑定到 pdo 准备查询时 HY104 Sql server 错误

> ID：12512308
> 
> 赞同：5
> 
> 时间：2012-09-20T12:10:25.667
> 
> 标签：php, sql-server, pdo, sql-server-2000

我应该将应用程序从 mssql 函数移动到 PDO。一切都运行顺利，直到我发现自己似乎无法解决一个不错的小错误。

这是我准备好的请求：

```
$req_action="INSERT INTO [".DB_SCHEMA."].[dbo].[".ACTION_TABLE."] 
([ID_CONTACT]
,[ID_ADN]
,[TYPE_ACTION]
,[MOTIF_ENTRANT]
,[COMMENTAIRES_APPEL]
,[CODE_CAMPAGNE]
,[EMAIL]
,[SUJET]
,[STATUT_EMAILING]
,[DATE_ENVOI]
,[DELAI_OUVERTURE]
,[MAIL_CLIENT]
,[DATE_OUVERTURE]
,[LIEN_CLIQUE]
,[DELAI_CLIC]
,[DATE_CLIC]
,[DATE_ACTION]
,[USER_ID]
,[LOGIN]
,[DATE_CHARGEMENT]
)
VALUES
(''
,''
,'e-mailing'
,''
,''
,''
,:email
,:sujet
,:statut
,convert(datetime,:date_envoi,103)
,:delai
,:mail
,convert(datetime,:date_ouverture,103)
,:lien_clic
,:delai_clic
,convert(datetime,:date_clic,103)
,convert(datetime,:date_action,103)
,'1'
,'AUTO'
,getdate()
)"; 
```

和我的绑定：

```
$prep_req_action->bindValue(":email",$email,PDO::PARAM_STR);
$prep_req_action->bindValue(":sujet",$sujet,PDO::PARAM_STR);
$prep_req_action->bindValue(":statut",$statut_emailing,PDO::PARAM_STR);
$prep_req_action->bindValue(":date_envoi",$sql_date_envoi,PDO::PARAM_STR);
$prep_req_action->bindValue(":delai",$delai_ouverture,PDO::PARAM_STR);
$prep_req_action->bindValue(":mail",$mail_client,PDO::PARAM_STR);
$prep_req_action->bindValue(":date_ouverture",$sql_date_ouverture,PDO::PARAM_STR);
$prep_req_action->bindValue(":lien_clic",$lien_clique,PDO::PARAM_STR);
$prep_req_action->bindValue(":delai_clic",$delai_clic,PDO::PARAM_STR);
$prep_req_action->bindValue(":date_clic",$sql_date_clic,PDO::PARAM_STR);
$prep_req_action->bindValue(":date_action",$sql_date_action,PDO::PARAM_STR); 
```

问题是每当我的 PHP 变量之一恰好是空字符串（来自自动 csv 文件，它实际上经常发生）SQL 服务器返回错误 HY104（无效精度）。

我所有的字段都是 NULL 授权的，所以我将`PDO::ATTR_ORACLE_NULLS`属性切换`PDO::NULL_EMPTY_STRING`为将空字符串转换为 NULL，但行为完全相同。

我发现的唯一解决方法是在绑定之前测试我的变量是否为空以将其设置为 php null：

```
$lien_clique = (empty($lien_clique)) ? null : $lien_clique; 
```

这实际上有效，但我觉得 NULL_EMPTY_STRING 的 PDO 属性应该为我做这件事，我有大量的查询要更新，我不想用这个 tweek 保护一切。

有没有人知道问题的原因和解决方案的方式？

仅供参考：Linux 上的 PHP 5.3.1、pdo_sqlsrv 3.0 和 SQL Server 2000。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:36:03.350

听起来您在字符串列上设置了大小，并且您的数据库可能需要在插入时指定它。

尝试使用...

```
$stmt->bindValue(":field",$value,PDO::PARAM_STR,$length); 
```

在给出错误的字段上，其中 $length 是数据库中指定的字段大小。不得不这样做很痛苦，但我记得不久前在 ODBC 驱动程序中遇到了这个问题。

# qt - QML FolderListModel 过滤掉文件并仅显示文件夹

> ID：12512318
> 
> 赞同：3
> 
> 时间：2012-09-20T12:10:51.877
> 
> 标签：qt, qml

如何使 FolderListModel 组件过滤文件并仅包含目录。我只想在列表视图中显示目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:03:24.053

我遇到了同样的问题，这是我的解决方法：

```
 nameFilter: ["//\\"];
 showDirs: true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:52:13.533

不确定这个，但您可以尝试：

```
 nameFilters: [ "" ]
         showDirs: true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:34:37.430

查看文档我会说不可能从列表中过滤掉文件。

# javascript - 是否可以在已经显示旧工具提示的同时更改元素工具提示而无需将鼠标移开和移回

> ID：12512324
> 
> 赞同：0
> 
> 时间：2012-09-20T12:11:17.673
> 
> 标签：javascript, html

我有 HTML 锚元素：`<a title="Tooltip">Text</a>`. 然后我将鼠标悬停在锚点上并出现工具提示。然后我运行一些 JavaScript 来通过`element.title = "Another Tooltip"`. 此时工具提示不会被视觉改变，我需要将鼠标移开并移回才能看到新的工具提示。是否可以在不移动鼠标的情况下立即更改工具提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:30:05.340

Maybe you should not use the `title` attribute, but some JavaScript tooltip library, for example [tipsy](http://onehackoranother.com/projects/jquery/tipsy/). This way, you have full control over the behaviour.

# jquery - 检查主网格的一列后隐藏展开子网格选项

> ID：12512325
> 
> 赞同：0
> 
> 时间：2012-09-20T12:11:18.290
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我将 jqgrid 与 ASP.NET MVC 3 一起使用。

我想根据主网格列之一的某个值隐藏子网格的“+”选项。

例如。我有一个包含以下列的网格

*   姓名
*   汽车
*   薪水
*   车数

现在，如果 CarCount > 0，那么我想要一个我已经完成并且正在工作的子网格。

但是对于 CarCount = 0 我不想显示一个空的子网格，所以在这种情况下我想删除扩展选项本身。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:17:19.427

我懂了 ！

我使用了`afterInsertRow`jqgrid 的选项，但是在删除之前这不起作用`gridview: true`

但是我仍然在努力找出为什么我必须删除`gridview:true`看到[这个](https://stackoverflow.com/questions/12513004/why-is-gridviewtrue-used-for-and-what-does-it-mean)

```
afterInsertRow : function(rowid, rowdata)
{
    if (parseFloat(rowdata.CarCount) == 0){
        $("tr[id=" + rowid + "]>td:first").removeAttr("class");
        $("tr[id=" + rowid + "]>td:first").html("&nbsp;");
    }
}, 
```

我希望这对将来的某人有用..

# pdf - 合并拆分 PDF 后大小增加

> ID：12512328
> 
> 赞同：3
> 
> 时间：2012-09-20T12:11:30.940
> 
> 标签：pdf, merge

我正在使用 PDF 在我的应用程序中呈现，对于页面级别的各种其他信息（为不同的 o/p 格式创建 swf、xml 等）页面级别拆分已完成并处理。

环境是 Linux (Fedora 8)。

最终 PDF 是使用拆分的 PDF 重新创建的，但是对于一些使用类似字体而不是大号的 PDF，大小会急剧增加。页数。

使用 iText 和 PDFTK 输出并不令人满意......它只是添加了拆分的 PDF，最终输出与单个 PDF 组合在一起的大小相同。

我认为优化和/或共享资源重复是我在这里所缺少的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:15:13.363

PdfTk 使用强大的旧（不再受支持）版本的 iText。连接 PDF 时，它使用`PdfCopy`类。您应该使用最新版本的 iText 和 PdfSmartCopy。`PdfSmartCopy`存储添加到新文档中的所有对象的哈希值。这允许 iText 重用已经存在的对象。

有关更多信息，请阅读我写的关于 iText 的书的第 6 章：http: [//www.manning.com/lowagie2/samplechapter6.pdf](http://www.manning.com/lowagie2/samplechapter6.pdf)（搜索 PdfSmartCopy）

# c# - Visual Studio 2010 - 出现狂野窗口？

> ID：12512339
> 
> 赞同：2
> 
> 时间：2012-09-20T12:12:07.813
> 
> 标签：c#, visual-studio-2010, window

我按下了一些按钮，突然出现了这个疯狂的下拉菜单：

![在此处输入图像描述](../Images/965aee59c53df56ad447ca1934dbf576.png)

它位于编辑屏幕的顶部，我想再次隐藏它，因为它弄乱了我的屏幕空间。我只运行 ReSharper，我已经查看了那里和 Visual Studio 中的设置，但我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:15:20.870

去`Tools`> `Options`，`Text Editor`> `C#`，取消选中`Navigation bar`。

我有其中之一，但它只有 ~1 行文字高，而不是像你的 ~3 行。我不知道这是怎么发生的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:16:24.673

是导航栏吗？

如果是这样，您可以在“工具”>“选项”中使用此设置将其关闭。

![导航栏](../Images/fb14d8d2d9f90a32dc4c9768025e1947.png)

# android - Android SeekBar 自定义

> ID：12512349
> 
> 赞同：2
> 
> 时间：2012-09-20T12:13:00.283
> 
> 标签：android

我必须为 Android 创建 SeekBar 样式，但不知道如何做到这一点。这是最终结果的图片（我想达到）。

![在此处输入图像描述](../Images/907503ceef1640fa37eb61a9c26273ee.png)

让我们从 SeekBar 的背景开始。我试着把它分成三个部分：左圆端、中间部分的可重复部分和右圆端。并且它们应该与下一个代码（foo_background.xml）一起加入。

```
<?xml version="1.0" encoding="utf-8"?>
<clip xmlns:android="http://schemas.android.com/apk/res/android"
    android:clipOrientation="horizontal" >

    <bitmap
        android:antialias="true"
        android:dither="false"
        android:filter="false"
        android:gravity="left|center_vertical"
        android:src="@drawable/foo_left"
        android:tileMode="disabled" />
    <bitmap
        android:antialias="true"
        android:dither="false"
        android:filter="false"
        android:gravity="center_vertical"
        android:src="@drawable/foo_middle"
        android:tileMode="repeat" />
    <bitmap
        android:antialias="true"
        android:dither="false"
        android:filter="false"
        android:gravity="right|center_vertical"
        android:src="@drawable/foo_right"
        android:tileMode="disabled" />

</clip> 
```

在 SeekBar 的背景可绘制文件中使用。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@android:id/background">
        <clip android:drawable="@drawable/foo_background" />
    </item>
    <item android:id="@android:id/progress">
        <clip android:drawable="@drawable/seek_bar_progress" />
    </item>

</layer-list> 
```

但是由于所有这些东西，我看到一个空的（或者更好地说我没有看到它）SeekBar 进度线。

有谁知道如何以正确的方式做到这一点？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:22:40.983

试试下面的链接，您将获得一些有关搜索栏自定义的信息。

[http://www.techrepublic.com/blog/app-builder/androids-seekbar-your-way/943](http://www.techrepublic.com/blog/app-builder/androids-seekbar-your-way/943)

或者

[http://developer-dot-android.blogspot.in/2012/03/custom-seekbar-tutorial.html](http://developer-dot-android.blogspot.in/2012/03/custom-seekbar-tutorial.html)

这可能会帮助你......

# objective-c - 翻译动画被忽略，直到第二次点击

> ID：12512352
> 
> 赞同：1
> 
> 时间：2012-09-20T12:13:08.367
> 
> 标签：objective-c, cocoa-touch, uiimageview, core-animation, uitapgesturerecognizer

每当识别出点击手势时，我都会运行以下代码。它将 UIImageView 移动到点击位置并旋转 UIImageView。

但是，翻译动画永远不会在第一次点击时运行。我究竟做错了什么？

```
-(void) onTap:(UITapGestureRecognizer *)tap{

    CGPoint point = [tap locationInView:self.view];

    [UIView animateWithDuration:1.2
                          delay:0
                        options:0
                     animations:^{
                         self.icon.center = point;
                     } completion:^(BOOL finished) {
                         //
                     }];

    [UIView animateWithDuration:1.2
                          delay:0
                        options:0
                     animations:^{
                         self.icon.transform = CGAffineTransformRotate(CGAffineTransformIdentity, M_PI);
                     } completion:^(BOOL finished) {
                         //
                     }];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:46:23.413

嗨，你需要这样的代码......

在 .h 文件中你声明一个`CGAffineTransform`变量说`initial`....

在`viewDidLoad`您需要通过此存储初始变换值...

```
initial=self.icon.transform; 
```

那么您需要将您的方法更改为这种类型...

```
 -(void) onTap:(UITapGestureRecognizer *)tap{

        CGPoint point = [tap locationInView:self.view];

        [UIView animateWithDuration:1.2
                              delay:0
                            options:0
                         animations:^{
                             self.icon.center = point;
                         } completion:^(BOOL finished) {
                             //
                         }];

        [UIView animateWithDuration:1.2
                              delay:0
                            options:0
                         animations:^{

if (self.icon.transform.a  == initial.a) 
                         {
                             self.icon.transform = CGAffineTransformRotate(CGAffineTransformIdentity, M_PI);
                         }
                         else
                         {
                             self.icon.transform = initial;
                         }

                         } completion:^(BOOL finished) {
                             //
                         }];

    } 
```

这是一个想法，你需要用它来实现你的逻辑......

# mysql - 具有join和Union All语句的Mysql Query内存不足和超时

> ID：12512355
> 
> 赞同：0
> 
> 时间：2012-09-20T12:13:24.483
> 
> 标签：mysql, mysql-error-1064

我有两个表 item 和 items_sellers，每个项目都可以在多个卖家中使用。

在这里，我从另一种方式获取 ItemId、sellerId 的映射，现在我需要所有这些项目的详细信息。我得到至少 5000 个键（sellerId）值（itemId）对，通过使用这张地图，我需要从这两个表中获取详细信息。

为了得到结果在这里我使用了下面的查询：

```
SELECT 
    table1.column1, 
    table1.column2, 
    table1.column3, 
    table2.column1, 
    table2.column2 
FROM 
    item as table1 
        INNER JOIN ( 
            select 
                key1 as ITEMID, 
                value1 as SELLERID 
            UNION ALL 
            select 
                key2, 
                value2  
            UNION ALL 
            select 
                key3 , 
                value3  
            UNION ALL 
            select 
                key4 , 
                value4 
            UNION ALL
            // ....5000 key value
            pairs
            ) as KEY_VALUE 
            ON table1.item_id = KEY_VALUE.ITEMID 
        INNER JOIN 
            item_sellers as table2 
            ON table1.item_id = table2.item_id 
            AND table2.seller_id = KEY_VALUE.SELLERID
WHERE table1.active = 1 
```

对于 3000 - 4000 UNION ALL 语句，此查询运行得非常好，但是对于 5000+ 键值对（即 5000+ UNION ALL 语句）给出错误，即内存不足异常/查询超时异常。

这个查询有什么问题吗？如果是这样，请通过一些光线吗？

有没有办法优化这个查询？

PS：当我把所有 5000 个键值对放在这个查询中时，查询字符变成 209950 个字符？查询有字数限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:53:08.440

创建一个临时表并插入其中。

```
create temporary table mytable (itemid integer, sellerid integer);
insert into mytable (itemid, sellerid) values
(1,2),(2,10)
;
SELECT 
    table1.column1, 
    table1.column2, 
    table1.column3, 
    table2.column1, 
    table2.column2 
FROM 
    item as table1 
        INNER JOIN mytable as KEY_VALUE 
            ON table1.item_id = KEY_VALUE.ITEMID 
        INNER JOIN 
            item_sellers as table2 
            ON table1.item_id = table2.item_id 
            AND table2.seller_id = KEY_VALUE.SELLERID
WHERE table1.active = 1
;
drop table mytable; 
```

sql 字符串长度会小得多。把它放在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:18:10.407

It looks like your subquery is missing the `from` clause.

```
select 
    key1 as ITEMID, 
    value1 as SELLERID 
UNION ALL 
select 
    key2, 
    value2  
UNION ALL 
// and so on... 
```

How is it even working at all? It looks like the database is (surprisingly) getting past this and then simply doing a cartesian on the set of data - which is causing memory to spike to the point where it can't cope.

You should try:

```
select 
    key1 as ITEMID, 
    value1 as SELLERID 
from
    yourTableName
UNION ALL 
select 
    key2, 
    value2
from
    yourTableName
Union all // etc etc 
```

Having said that, why don't you join to the subquery that contains a where clause to get the rows you need - or use a lookup table between them?

# google-apps-script - 我的 gmail 脚本停止工作，现在我找不到它来删除它

> ID：12512362
> 
> 赞同：0
> 
> 时间：2012-09-20T12:14:05.370
> 
> 标签：google-apps-script

我不断收到通知说我有脚本错误。当我去谷歌文档试图找到电子表格时，它不再存在，所以我无法修复或删除它。我厌倦了整天收到脚本错误电子邮件。我怎么能阻止这个？？？

> “很抱歉，发生服务器错误。请稍等，然后重试。” 计数：“24”
> 
> Start Function Error Message Trigger End 9/18/12 8:26 PM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 18 日晚上 8:26
> 
> 2012 年 9 月 18 日晚上 9:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 18 日晚上 9:26
> 
> 2012 年 9 月 18 日晚上 10:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 18 日晚上 10:26
> 
> 2012 年 9 月 18 日晚上 11:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 18 日晚上 11:26
> 
> 9/19/12 12:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日上午 12:26
> 
> 2012 年 9 月 19 日上午 1:26 activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 1:26 AM 9/19/12 2:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 2:26 AM 9/19/12 3:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 3:26 AM 9/19/12 4:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 4:26 AM 9/19/12 5:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 5:26 AM 9/19/12 6:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 6：26 AM 9/19/12 7:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日上午 7:26 2012 年 9 月 19 日上午 8:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 8:26 AM 9/19/12 9:26 AM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日上午 9:26 12 年 9 月 19 日上午 10:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日上午 10:26 2012 年 9 月 19 日上午 11:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日上午 11:26 2012 年 9 月 19 日下午 12:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 12:26 PM 9/19/12 1:26 PM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 9/19/12 1:26 PM 9/19/12 2:26 PM activityReport 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日下午 2:26 2012 年 9 月 19 日下午 3:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日下午 3:26 2012 年 9 月 19 日下午 4:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日下午 4:26 2012 年 9 月 19 日下午 5:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间 2012 年 9 月 19 日下午 5:26 2012 年 9 月 19 日下午 6:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日下午 6:26 2012 年 9 月 19 日下午 7:26 活动报告 很抱歉，发生服务器错误。请稍等，然后重试。基于时间的 2012 年 9 月 19 日晚上 7:26

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:28:28.303

不幸的是，我不知道如何搜索包含电子表格的脚本，我同意这很麻烦。

[问题跟踪器中](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1639&q=scripts%20searchable&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)有一个未解决的问题，您可能想给它加星标，这有点像为它投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:52:35.840

您的问题意味着您知道错误来自的电子表格。它在您的回收站中吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:08:26.130

您的脚本似乎每隔一小时左右运行一次，您检查过触发器了吗？通常你应该找到一个基于时间的触发器从这个脚本中调用一个函数，如果是这种情况你可以简单地删除它并且错误将不再发生。

# php - 对具有属性的 url 形成操作

> ID：12512364
> 
> 赞同：3
> 
> 时间：2012-09-20T12:14:13.543
> 
> 标签：php, html

我有一个名称属性为 q 的搜索字段，单击提交按钮后，我希望表单转到同一页面（即 index.php），因此我将表单的操作设置为：

```
'index.php?a=nl&b=search'. 
```

我希望导航到的 url 是这样的（所以 action-url + 字段的名称）：

```
'index.php?a=nl&b=search&q=search-term'. 
```

然而，点击后页面导航到

```
'index.php?q=search-term' 
```

有没有办法解决这个问题 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:16:41.213

无需`a=nl&b=search`在表单中添加操作，只需在表单中添加两个额外的隐藏输入：

```
<input type='hidden' name='a' value='nl' />
<input type='hidden' name='b' value='search' /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:16:04.190

添加 a 和 b 在表单中具有所需值的隐藏字段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T12:16:30.377

将表单方法设为 GET 并将字段添加为隐藏字段。

看起来您的表单只有`q`输入字段（以及没有名称属性的提交按钮）。在提交后将要附加到 url 的内容作为隐藏输入添加 - 例如：

```
<form method="get" action="yoururl.com?a=nl&b=search">
<input type="hidden" name="a" value="<?php echo isset($_GET['a']) ? $_GET['a'] : ''; ?>"/>
<input type="hidden" name="b" value="<?php echo isset($_GET['b']) ? $_GET['b'] : ''; ?>"/> 
```

.....表格的其余部分...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T12:18:51.017

像这样的表格应该可以解决问题：

```
<form action="" method="get">
    <input name="q" type="text"/>
    <input name="a" type="hidden" value="nl"/>
    <input name="b" type="hidden" value="search"/>
    <input type="submit" value="Submit"/>
</form> 
```

由于该操作转到同一页面，因此您无需指定它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T12:29:42.703

使用**GET**方法`<form>`，您的表单应如下所示：

```
<form method="get" action="index.php">
    <input type="hidden" value="nl" name="a">
    <input type="hidden" value="search" name="b">
    <input type="text" name="q">
    <input type="submit" value="submit">
</form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T12:22:25.700

所以你说你的表格如下：

```
<form method="POST" action='index.php?a=nl&b=search'>

 <input type="text" name="q">

</form> 
```

在这种情况下，您可以访问**PHP**中的三个变量，如下所示：

```
$_GET['a']
$_GET['b']
$_POST['q'] 
```

因为操作中的变量作为 GET 传递，表单内的字段作为 POST 传递。

如果它们是 GET 或 POST，另一种获取 var 的便捷方法是通过`$_REQUEST`数组访问它们，如下所示：

```
$_REQUEST['a']
$_REQUEST['b']
$_REQUEST['q'] 
```

# jquery - 我可以使用 jQuery 将 javascript 数组映射到 元素？

> ID：12512365
> 
> 赞同：0
> 
> 时间：2012-09-20T12:14:19.627
> 
> 标签：jquery

我有一系列错误消息：json.Errors

有没有一种方法可以使用 jQuery 从这个数组中创建以下内容？

```
 <ul class="message" id="message">
        <li>message1</li>
        <li>message2</li>
    </ul> 
```

在过去，我做了类似以下代码的事情：

```
$.map(json.Errors, function (error) {
   return error + '</br>';
}).join(''); 
```

我不确定它是否有帮助，但也许有人知道如何使用 $.map 来实现此目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:17:17.263

我建议：

```
$.each(json.Errors, function(i,e) {
    $('#message li').eq(i).text(e);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QmeDa/)。

当然，这需要`li`元素和`json.Errors`数组之间的 1:1 关系。

如果您想创建`li`元素（而不是依赖它们已经存在），那么我建议：

```
$.each(json.Errors, function(i, e) {
    $('<li />').text(e).appendTo('#message');
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QmeDa/1/)。

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`eq()`](http://api.jquery.com/eq/).
*   [`jQuery.each()`](http://api.jquery.com/jQuery.each/).
*   [`text()`](http://api.jquery.com/text/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:16:53.950

如果你说它是一个数组，为什么不使用简单的连接呢？

```
$('#message').html('<li>' + json.Errors.join('</li><li>') + '</li>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:19:39.427

```
var errUl = $('<ul class="message" id="message">' + $.map(json.Errors, function(error) {
    return '<li>' + error + '</li>';
}).join('') + '</ul>'); 
```

[**小提琴**](http://fiddle.jshell.net/2baEv/1/)

这将创建一个包含无序列表的已解析 HTML 数据的 jQuery 对象，`errUl`.

参考[http://api.jquery.com/jQuery.map/](http://api.jquery.com/jQuery.map/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T12:19:52.310

如果你想使用地图，你可以做类似下面的事情

```
$("#message").empty().append($(json.Errors).map(function (msg){
  return $("<li>" + msg+ "</li>");
})); 
```

或使用每个

```
$("#message").empty().append($(json.Errors).each(function (){
  return $("<li>" + this+ "</li>");
})); 
```

# android - 广播接收器和警报管理器

> ID：12512366
> 
> 赞同：1
> 
> 时间：2012-09-20T12:14:24.917
> 
> 标签：android, broadcastreceiver, alarmmanager

您好我正在android中构建一个新闻应用程序，因此每次将新数据输入数据库时​​，用户都必须在通知栏中收到通知。所以经过研究我发现我必须使用广播接收器和警报管理器。但我无法理解的是，当应用程序关闭时，它如何知道输入了新数据？以及如何让警报管理器激活应用程序以检查新数据，比如说每 5 分钟？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:54:33.920

该项目可以在使用 AlarmManager 设置时间后每 10000 秒显示一次通知。

**警报活动活动.java：**

```
package co.in.technoguys.AlarmActivity;

import java.util.Calendar;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.DatePicker;
import android.widget.TimePicker;
import android.widget.Toast;

public class AlarmActivityActivity extends Activity {
    int notifyID=1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
    public void startAlert(View view) {
        TimePicker tp=(TimePicker)findViewById(R.id.timePicker1);
        DatePicker dp=(DatePicker)findViewById(R.id.datePicker1);
        Calendar Cal = Calendar.getInstance();
        Cal.set(Calendar.YEAR, dp.getYear());  
        Cal.set(Calendar.MONTH, dp.getMonth());         
        Cal.set(Calendar.DAY_OF_MONTH, dp.getDayOfMonth());         
        Cal.set(Calendar.HOUR_OF_DAY, tp.getCurrentHour());            
        Cal.set(Calendar.MINUTE, tp.getCurrentMinute());                
        Cal.set(Calendar.SECOND, 00);
        long when=Cal.getTimeInMillis();
        Intent intent = new Intent(this, MyBroadcastReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0);
        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,when,20000,pendingIntent);
        Toast.makeText(this, "Notification Triggered on"+tp.getCurrentHour()+":"+tp.getCurrentMinute(),
                Toast.LENGTH_LONG).show();

              }
} 
```

**MyBroadcastReceiver.java：**

```
package co.in.technoguys.AlarmActivity;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyBroadcastReceiver extends BroadcastReceiver {
    int notifyID=1;

  @Override
  public void onReceive(Context context, Intent intent) {
    Intent i=new Intent();
    PendingIntent pi=PendingIntent.getBroadcast(context,0,i,0);
    NotificationManager nm=(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notify=new Notification(R.drawable.ic_launcher,"Notification Triggered",System.currentTimeMillis());
    CharSequence from="Remainder";
    CharSequence message="Meeting Starts at 9 A.M";
    notify.setLatestEventInfo(context, from, message, pi);
    nm.notify(notifyID,notify);
  }

} 
```

**主.xml：**

```
 <TimePicker
            android:id="@+id/timePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true" />

        <DatePicker
            android:id="@+id/datePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/timePicker1"
            android:layout_alignLeft="@+id/timePicker1"
            android:layout_marginBottom="27dp" />

        <Button
            android:id="@+id/startAlert"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/timePicker1"
            android:layout_below="@+id/timePicker1"
            android:layout_marginTop="36dp"
            android:onClick="startAlert"
            android:text="@string/count" />

    </RelativeLayout> 
```

**AndroidManifest.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="co.in.technoguys.AlarmActivity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.VIBRATE" >
    </uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AlarmActivityActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="MyBroadcastReceiver" >
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:46:05.483

如果我理解正确，您不需要运行整个应用程序来检查新数据，因为它应该在单独的后台任务中完成。

您需要的是在 AlarmManager 中注册的警报和将在警报触发时调用的 BroadcastReceiver。接收器检查新数据，如果满足条件，它执行将启动通知活动的意图。

请记住，如果数据库访问需要更多时间，最好在接收者启动的服务中完成。

您可以使用 cwac-wakeful ( [https://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful) ) 节省一些编码（并解决一些常见问题），这也将确保您的数据库检查服务保持清醒只要它做它的工作。它有很好的文档记录，并且有几个可用的示例。

一些值得一读的理论可以在以下网址找到：[http](http://www.vogella.com/articles/AndroidServices/article.html) ://www.vogella.com/articles/AndroidServices/article.html 。它主要是关于服务的，但也有一些关于警报的解释。

# sql-server - TSQL 分组计数

> ID：12512369
> 
> 赞同：2
> 
> 时间：2012-09-20T12:14:45.027
> 
> 标签：sql-server, sql-server-2008, tsql, counter

我的员工有一个名字，一个他必须得分的 Outlet，他必须为这个 Outlet 打分。每个员工可以有许多奥特莱斯，但如果该奥特莱斯属于该员工，则至少只需对 1 个奥特莱斯进行评分。

所以我可能有这样的记录。

```
Mike -----Outlet1---- 20
Mike----- Outlet2----  0
John----- Outlet3---- 44
Larry---- Outlet4----- 0 
```

员工必须在属于他的 1 个网点中至少获得 1 分。因此，我不想计算 Mike，因为他评价了一个 Outlet，我只想返回值 1 作为我的结果集，因为 Larry 没有评价任何 Outlets。

表将是：`Select Name, Outlet, Score from TableName`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:22:44.730

如果我理解正确，您需要计算没有得分的名字。

```
select
  Count(*) as Count
from
(
  select
    Name,
    Sum(Score) as Score
  from
   TableName
  group by
    Name
  having 
    Sum(Score) = 0
) as aa 
```

# javascript - 下面的代码是如何工作的？（Extjs）

> ID：12512371
> 
> 赞同：0
> 
> 时间：2012-09-20T12:14:52.373
> 
> 标签：javascript, extjs, extjs3

我想知道下面的脚本是如何工作的。我正在尝试为每个小时实现一个弹出窗口，以便为用户提供继续的选项，否则它将自动注销。它正在工作，但我怀疑当多个用户登录时会发生什么。当您在您的页面中按注销时，其他人会注销吗？具体来说会

```
Ext.TaskMgr.stop(taskPoll1);
Ext.TaskMgr.stop(taskPoll); 
```

停止当前脚本的 taskPoll ？

```
<script>
var counter = 3600;
var counter1 = 20;
var taskPoll = 
{
  run: function()
  {
    counter -= 1;
    if( counter < 1 )
    {
       Ext.TaskMgr.stop(taskPoll);
       countDownComplete();
       return false;
    } 
    else 
    {
    }
 },
 interval:1000
}
    countDownComplete = function()
    {
      var taskPoll1 = 
      {
         run: function()
         {
            counter1 -= 1;
            if( counter1 < 1 )
            {
                Ext.TaskMgr.stop(taskPoll1);
            Ext.TaskMgr.stop(taskPoll);
        //  Ext.TaskMgr.stopAll();
            logout('imagelogout');
            return false;
        } 
            else 
            {
            Ext.MessageBox.updateText('You will be logged out in next <b>' + counter1+' </b> seconds. Please click on  <b> Continue </b> if you do not wish to be logged out.');

            }
    },
    interval:1000
    }
    Ext.MessageBox.maxWidth=420;
    Ext.MessageBox.buttonText.yes = 'Continue';
    Ext.MessageBox.buttonText.no = 'LogOut';
    Ext.MessageBox.confirm('Attention', 'You will be logged out in next 30 seconds. Please click on <b> Continue </b> if you do not wish to be logged out.',
    function(btn)
    {
      if(btn == 'yes')
      {
            counter=3600;
        counter1=20;
        Ext.TaskMgr.stop(taskPoll1);
        Ext.TaskMgr.start(taskPoll);
        return false;
      } 
      else
      {
        Ext.TaskMgr.stop(taskPoll1);
        Ext.TaskMgr.stop(taskPoll);
      //    Ext.TaskMgr.stopAll();
        logout('imagelogout');
        return false;
      }
    }); 
    Ext.TaskMgr.start(taskPoll1);
    }
    // Ext.TaskMgr.start(taskPoll); is the starting point of timeout Pop up
    Ext.TaskMgr.start(taskPoll);
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:30:49.907

You are talking about a frontend script which runs locally... And I don't know any site where multiple users stays logged in on a single site, so where is the multiuserproblem?

Talking about scope & tasks: For that case I would recommend you to destroy all all task on logout and create new on start, otherwise you may get problems with still running tasks.

# deployment - ssh-add 不持久

> ID：12512376
> 
> 赞同：0
> 
> 时间：2012-09-20T12:15:04.980
> 
> 标签：deployment, ssh, capistrano

我正在使用`cap deploy`在 Rails 应用程序上部署 ruby​​。只要我`ssh-add`在那之前执行，一切都很好。如果我不这样做，该命令会`cap deploy`要求输入密码，因为我的可验证身份似乎不再存在。

怎样才能做到不必`ssh-add`每次都执行`cap deploy`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:44:10.680

你应该使用一个[`ssh-agent`](http://en.wikipedia.org/wiki/Ssh-agent)

[这里](http://mah.everybody.org/docs/ssh)有一些说明让它工作

# python - 无理数检查功能

> ID：12512377
> 
> 赞同：2
> 
> 时间：2012-09-20T12:15:05.183
> 
> 标签：python, math

我正在尝试绘制以下函数：

```
f(x) = 0 if x is rational else 1 # so 1 if x is irrational 
```

我的计划是使用 python 和 matplotlib。如何在 Python 中生成随机无理数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T12:24:00.173

这被称为[狄利克雷函数，](http://en.wikipedia.org/wiki/Dirichlet_function#Dirichlet_function)它是无处连续函数的例子。这是一个简单的数学事实，在任何一对数之间，都有无限个有理数和无限个无理数。

在实践中绘制此函数等效于绘制*f(x)* = 0 和*f(x)* = 1，因为您使用离散像素进行绘制。

有两个陷阱：

*   即使 Python 使用[任意精度](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)的算术，它也只能表示有理数；
*   在实数集中有无理数的[连续统，并且只有](http://en.wikipedia.org/wiki/Cardinality_of_the_continuum)[阿列夫零](http://en.wikipedia.org/wiki/Aleph_zero#Aleph-naught)有理数。因此，任何随机数是无理数的概率为 1；

无论哪种方式，这种“问题”都不应该作为严格的编程问题来处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T12:32:31.967

The answer is you can't.

What you can do is figure out some epsilon after which this number is considered irrational.

It will look the same.

consider this: square root of 2 is an irrational number.

wolframlpah gives you an approximation : 1.4142135623730950488016887242096980785696718753769480...

python only sees 1.4142135623730950488016887242096980785696718753769480 which means: 1+ 4142135623730950488016887242096980785696718753769480/ 10000000000000000000000000000000000000000000000000000

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T12:23:36.930

随机数几乎总是无理数（即概率为 1）

```
def f(x): 
    return 1 
```

几乎总是随心所欲地工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:27:36.067

不能在计算机程序中表示无理数是不正确的。它不适合记忆，你不能打印整个无理数，但你仍然可以用它们做一些计算，并做一些操作，比如“给我前 100 位数字”。您可以将它们表示为一种惰性枚举器。问题是，这并不真正符合您的需求，因为检查这种数字是否有理相当于停止问题，因此无法确定。

但是在区间中选择一个无理数，例如在 0 和 1 之间，并不总是不可能的，它只取决于你想做什么。我最近这样做了，但是这些数字的应用只是因为它们必须进行比较，并且算法的一些决定取决于这些比较。在这里，将它们表示为惰性枚举器可以正常工作：如果进行比较，则从左侧开始并比较每个数字，直到一个数字具有更大的数字。所以我们只是动态生成随机数字并将生成的数字存储在一个数组中，直到它们与我们要比较的数字的对应数字不同。

只是为了弄清楚有限数和无限数之间的区别，我们只需要有限部分：在第一种情况下，数字的长度是固定的和有界的，在第二种情况下，我们只需要存储一个有限的位数，但这个数字可能会超出任何范围，所以如果我们比较足够多的数字，每个有限数都不同于这样的无限数。

# android - Android - OpenCV 的替代品？

> ID：12512392
> 
> 赞同：7
> 
> 时间：2012-09-20T12:16:17.490
> 
> 标签：android, opencv, android-ndk

我需要制作一个图像识别应用程序。我正在阅读 OpenCV 教程，它说我需要从 Google play 安装 OpenCV 管理器，我认为从用户的角度来看这并不好。但是在挖掘了几个小时之后，我注意到 OpenCV 是最流行和最可靠的。OpenCV 有什么好的替代方案，不需要安装另一个应用程序。OpenCV的这个静态初始化是什么。如果我不想安装 OpenCV 管理器，那么我应该对 NDK 有多了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:25:17.507

如果你愿意，你可以在你自己的包中发布 OpenCV，你真的不需要经理。如果您在包中发布 OpenCV，您可以在本机级别 (C/C++) 使用它，但您也可以使用包装器直接在 Java 级别使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:03:04.047

静态初始化是 OpenCV 管理器的替代方案，它的库包含在 apk 中（就像过去一样），用户不需要安装管理器。此外，开发人员正在努力使 Manager 方式为用户部署应用程序更加顺畅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:31:29.070

也许您可以使用 Qualcomm [Vuforia](https://developer.qualcomm.com/mobile-development/mobile-technologies/augmented-reality)库。我从未使用过它，但我听说过很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-08T22:29:50.773

好吧，我想现在用于图像处理的纯 Java 解决方案是[BoofCV](https://boofcv.org/index.php?title=Main_Page)。

他们的网站包含许多您可以根据需要采用的教程 =)

# javascript - jQuery and Google Maps - strange behaviour

> ID：12512395
> 
> 赞同：1
> 
> 时间：2012-09-20T12:16:29.247
> 
> 标签：javascript, jquery, google-maps-api-3

I want to show a polygon on a Google Map.

I have done two things:

*   Read the coordinates from a JSON file (Version 1)
*   Read the coordinates from a variable (Version 2)

Unfortunately only Version 2 works. If I set `paths: paths2` there is just the plain map to see. If I use `paths: paths` everything works fine.

I used Firebug the check how 'paths' and 'paths2' differ but there seems to be no difference.

Here is the code:

```
//Triangle
    var bermudaTriangle;

//Create Map
    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    //Version 1 (Load from JSON-file)
        var paths2 = [];    
        var geojson2 = $.getJSON('./bermuda.json',function(data){
            var foo = data.coordinates;

            $.each(data.coordinates, function (i, n) { 
                var ll = new google.maps.LatLng(n[0], n[1]); 
                paths2.push(ll);
            });
        });

    //Version 2 (Load from Variabel)
        var paths = [];
        var geojson = {"coordinates":[[25,-80],[18,-66],[32,-64],[25,-85]]};

        $.each(geojson.coordinates, function (i, n) { 
            var ll = new google.maps.LatLng(n[0], n[1]); 
            paths.push(ll);
        });

    //Checkpoint for debugging (The variables are the same!!)
        paths;
        paths2;

        bermudaTriangle = new google.maps.Polygon({
            paths: paths,
            strokeColor: "#FF0000",
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: "#FF0000",
            fillOpacity: 0.35
        });

        bermudaTriangle.setMap(map); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:23:05.030

好像它没有获取 json 文件。如果文件位于同一文件夹级别，则删除`./`

`$.getJSON("bermuda.json",function(data){`

或者，如果它是一个文件夹，那么

`$.getJSON("json/bermuda.json",function(data){`

例如。

# c# - 每次 where 子句返回 true 时更改 where 子句中使用的变量

> ID：12512398
> 
> 赞同：0
> 
> 时间：2012-09-20T12:16:37.187
> 
> 标签：c#, linq

我有一个包含大约 300 万条记录的数据库，每条记录都有 id（int，主键）、uniqueNumber（int）和 updateTime（string）。

uniqueNumber 可以属于多个记录。updateTime 表示一天中记录更新的时间，例如 14:33:42

编辑：记录按更新时间排序。

我想让用户定义一个 uniqueNumber 和一个间隔。然后我想查询数据库以获取属于该 uniqueNumber 的所有记录，其中它们的 updateTime 等于一个变量，每次 where 条件为真时，它的值都会按间隔增加。

例如，我想要这样的东西：（这个例子中没有使用数据库）

```
 string currentTime = "12:25:00";
    int interval = 2;

    public void LinqExample()
    {
        string[] arr = new string[4] { "12:23:00", "12:26:00", "12:27:00", "12:28:00"};

        var query = from c in arr
                    where c.Replace(":", "").CompareTo(currentTime.Replace(":", "")) > 0 && Inc()
                    select c;

        // query's output is: "12:26:00", "12:28:00"
    }

    private bool Inc()
    {
        currentTime = DateTime.Parse(currentTime).AddMinutes(interval).ToLongTimeString();
        return true;
    } 
```

我的代码是正确的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:39:11.400

您想要的是带有偏移量的[模运算。](http://en.wikipedia.org/wiki/Modulo_operation)当前时间和记录时间之间的分钟差是一个整数。如果该整数可被区间值整除，那么您将得到一个匹配项：

（假设Entity Framework，用linq-to-sql使用SqlMethods）

```
var now = DateTime.Now;
var curr = new DateTime(now.Year, now.Month, now.Day, now.Hour, now.Minute, 0);

var query = context.Table
.Where(t => t.uniqueNumber == uniqueNumber
.Where(t => t.updateTime > curr) 
.Where (t => EntityFunctions.DiffMinutes(curr, t.updateTime) % interval == 0)
.Select (t => new { t.updateTime, .... } ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:26:34.383

如果存在您想要的代码，似乎需要`CURSOR`通过 EF 在您的表上生成 SQL 查询。但是，正如我所怀疑的那样，EF 从不生成带有游标的代码，因此您无法使用 LINQ 解决您的问题。恕我直言，这样做的唯一方法是编写像这样的表值函数

```
CREATE FUNCTION GetTimesByUniqueNumberWithIntervalAndCondition
(
    @interval int, @uniqueNumber int,@currentTime time
)
RETURNS 
@Times TABLE 
(
    t char(10)
)
AS
BEGIN
    DECLARE timeCursor CURSOR LOCAL FAST_FORWARD READ_ONLY FOR
    SELECT updateTime FROM Table2 WHERE uniqueNumber = @uniqueNumber
    ORDER BY updateTime 

    DECLARE @t char(10);

    OPEN timeCursor
    FETCH NEXT FROM timeCursor INTO @t;

    WHILE @@FETCH_STATUS = 0
    BEGIN
        IF 
            1 = 1 -- place your condition here
        BEGIN
            INSERT @Times(t) VALUES(@t)
            SET @currentTime = DATEADD(MINUTE,@interval,CAST(@t AS time))
        END

        FETCH NEXT FROM timeCursor INTO @t;
    END

    CLOSE timeCursor
    DEALLOCATE timeCursor

    RETURN 
END
GO 
```

并在每次需要选择时查询此函数。

# mysql - Get all polygons that intersect with a circle around a given point

> ID：12512401
> 
> 赞同：0
> 
> 时间：2012-09-20T12:16:47.530
> 
> 标签：mysql, spatial

I am finding a lot on how to find all POINTS that are contained in a circle drawn around a location (using the Haversine formula) in MySQL.

My function should return all polygons that are at least partially intersecting with the circle.

1.  How do I create that circle?

2.  How do I check if a polygon intersects with that circle?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:34:46.390

您忽略了您是否在 2D 或 3D 中工作。鉴于您说`circle`的不是`sphere`，我假设您的意思是 2D。

要查找与圆相交的所有多边形，您需要知道：

a) 每个多边形的原点（更具体地说，多边形的中心）。

b) 圆的原点。

c) 圆的直径（或半径）。

使用这些值，您可以确定圆心与每个多边形的中心之间的距离。如果圆心与多边形中心之间的距离的大小小于圆的半径，则多边形相交。

我不太确定如何将其插入 SQL 查询，因为您首先需要计算每个多边形相对于圆的大小，然后根据圆的半径评估它们。自从我编写 SQL 以来已经有一段时间了，但我想它会类似于以下内容：

*   收集多边形中心和圆心之间的距离大于半径的所有项目。

请参阅此方便的图像以获取更多说明：

![圆形交叉口](../Images/d86ce97af999e0119b0a745b41dae297.png)

这只会提供一种非常粗略和基本的方法来确定交叉点，因为这没有考虑复杂的形状。从本质上讲，这更多地沿着球体与球体相交的线，其中边界球体将包含您的多边形。在某些情况下它可能会提供误报，但您可以轻松地将这些结果传递给更细粒度的碰撞检测，以根据需要过滤掉结果。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-13T21:30:48.063

这是旧的，但它仍然是搜索此问题时最热门的 Google 搜索结果之一。现有的答案没有用，因为它不能合理地在 MySQL 中使用 - 至少不能以任何具有远程可接受性能的方式实现。

解决方案是将 ST_Buffer 与您的点/半径一起使用：

```
ST_Buffer(point, radius) 
```

一个示例查询，对于包含包含多边形数据的列“polygon”的表，返回以 mypoint 为中心、半径为 9 的圆相交的行：

```
SELECT * FROM mytable WHERE ST_Intersects(polygon, ST_Buffer(mypoint, 9)) 
```

# asp.net-mvc - 部分视图中的 MVC3 客户端验证

> ID：12512413
> 
> 赞同：1
> 
> 时间：2012-09-20T12:18:05.400
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-validate, data-annotations, asp.net-mvc-partialview

我有一个视图索引和一个部分视图 SCItems。我使用数据注释进行验证。它适用于索引，但不适用于我的部分 SCItem。我应该使用jquery验证吗？谢谢。SC型号代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Web.WebPages.Html;

namespace PunchClockMobile.Models
{
    public class SCModel
    {
        public List<string> scList = new List<string>();

        [Required(ErrorMessage = "SC ID cannot be empty!")]
        public string scID { get; set; }

        [StringLength(4, ErrorMessage = " Please use 4 characters ")]
        [Range(0, 24, ErrorMessage = " Please use 0-24 range ")]
        [Required(ErrorMessage = "Please enter work duration")]
        public double? Duration { get; set; }

        [Required(ErrorMessage = "Please select a date")]
        public DateTime? Date { get; set; }

        [Required(ErrorMessage = "No task selected!")]
        private List<SelectListItem> _task = new List<SelectListItem>();

        [Required(ErrorMessage = "No task selected!")]
        public string SelectedTask { get; set; }

        [Required(ErrorMessage = "No task selected!")]
        public List<SelectListItem> Task
        {
            get { return _task; }
        }

    }
} 
```

索引代码：

```
@model PunchClockMobile.Models.SCModel
@{
    ViewBag.Title = "SC Number";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Header {
    <h3 style="text-align: left; padding-left: 1px;">
        SC Number</h3>
}
<div data-role="content" class="ui-content" role="main">
    @using (Html.BeginForm())
    {  <fieldset>
          <div data-role="fieldcontain">
        <label class="select">
            SC Number:</label>
        @Html.TextBoxFor(m => m.scID, new { @data_inline = true, @Class = "scIDFormat" })
        <br />
        <br />
        @Html.ValidationMessageFor(m => m.scID)
        <button type="submit" id="scOK" name="scOK">
            OK</button>
        </div>
        <div id="scList">
        </div>
      </fieldset>
       }
    </div>

<script language="javascript" type="text/javascript">

    $(document).ready(function () {
 $("#scOK").click(function () {

            if ($("form").valid()) {
                GetSCItems();
                $("#scList").show();
            }
            return false;
        });
 function GetSCItems() {
        var action = '@Url.Action("GetSCItems", "SCNumber")';
        var scID = $("#scID").val();
        var opt = {
            type: "GET",
            data: { ID: scID },
            url: action,
            success: SCListSuccess,
            error: SCListFailed
        };
        jQuery.ajax(opt);
    }

    function SCListSuccess(data) {
        if (data != undefined) {
            $('#scList').html(data).trigger('create');
            $("#noValues").hide();
        }
        else {
            //error
        }
    }

    function SCListFailed() {
        //error
    }
   });
</script> 
```

SCItems 代码：

```
@model PunchClockMobile.Models.SCModel
@if (@Model.scList.Count != 0)
{

        <div data-role="fieldcontain">
            @Html.TextBoxFor(m => m.scID, new { @id = "scID", Class = "hidden" })
            <strong>@Html.Label("SC DESC:")</strong>
            @Html.TextBoxFor(m => m.scList[5], new { @id = "desc", @dbID = Model.scList[5], data_inline = "true", @readonly = "true", @class = "required" })
        </div>
        <div data-role="fieldcontain">
            <strong>@Html.Label("Product:")</strong>
            @Html.TextBoxFor(m => m.scList[6], new { @id = "prod", @dbID = @Model.scList[2], data_inline = "true", @readonly = "true", Class = "results" })
        </div>
        <div data-role="fieldcontain">
            <strong>@Html.Label("Account:")</strong>
            @Html.TextBoxFor(m => m.scList[7], new { @id = "acc", @dbID = @Model.scList[3], data_inline = "true", @readonly = "true", Class = "results" })
        </div>
        <div data-role="fieldcontain">
            <strong>@Html.Label("Project:")</strong>
            @Html.TextBoxFor(m => m.scList[8], new { @id = "proj", @dbID = @Model.scList[4], data_inline = "true", @readonly = "true", Class = "results" })
        </div>
        <div data-role="fieldcontain">
            @Html.Label("Task:  *")
            @Html.DropDownListFor(x => x.SelectedTask, new SelectList(Model.Task, "Value", "Text"), "Please Select a task", new { @Class = "required" })
            @Html.ValidationMessageFor(x => x.SelectedTask)
        </div>
        <div data-role="fieldcontain">
            <strong>@Html.Label("Date: *")</strong>
            @Html.TextBoxFor(m => m.Date, new { @data_role = "datebox", @autocomplete = "off", @Class = "required", @data_options = " {'mode':'calbox','overrideDateFormat': 'YYYY/mm/dd'" })
            @Html.ValidationMessageFor(m => m.Date)
        </div>
        <div data-role="fieldcontain">
            <strong>@Html.Label("Duration: *")</strong>
            @Html.TextBoxFor(m => m.Duration, new { @maxlength = "4", @Class = "required", @autocomplete = "off" })
            @Html.ValidationMessageFor(m => m.Duration)
        </div>
        <div id="ajaxPostMessage" class="ajaxMessage">
        </div>
        <div data-role="fieldcontain" align="center">
            <div class="search-button">
                <input type="submit" id="add" value="Add record" />
            </div>
        </div>

}

else
{
    <div class="ajaxMessage">
        @ViewBag.OpenID
    </div>
}
<script type="text/javascript">

    $(document).ready(function () {
        $("#Duration").bind('keypress', function (e) {
            return (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 46) ? false : true;
        });

        $("#ajaxPostMessage").hide();
        //GetTask method from SCNumber controller
        $.get('SCNumber/GetTask/' + $("#prod").attr('dbID'), function (response) {
            var task = $.parseJSON(response);
            var ddlSelectedTask = $("#SelectedTask");
            // clear all previous options 
            $("#SelectedTask > option").remove();
            // populate the task 
            for (i = 0; i < task.length; i++) {
                ddlSelectedTask.append($("<option />").val(task[i].Value).text(task[i].Text));
            }
        });

        $("#add").click(function () {
            $.validator.unobtrusive.parse($('form'));  //added
            if ($("form").valid()) {
                var IDs = new Array($("#prod").attr('dbID'), $("#acc").attr('dbID'), $("#proj").attr('dbID'), $("#SelectedTask").val(), $("#Date").val(), $("#Duration").val(), $("#desc").attr('dbID'), $("#scID").val());
                $.ajax({
                    url: '@Url.Action("HandleForm", "SCNumber")',
                    type: 'post',
                    data: { ids: IDs },
                    dataType: 'json',
                    traditional: true,
                    success: function (data) {
                        if (data.success == true) {
                            window.location.href = '@Url.Action("Index", "SCNumber")';
                        }
                        else {
                            $("#ajaxPostMessage").html(data.Error);
                            $("#ajaxPostMessage").show();
                        }
                    }
                });
            }
            return false;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:48:21.157

尝试查看以下帖子，您可能有同样的问题：

[MVC 3 剃刀。部分视图验证不起作用](https://stackoverflow.com/questions/9490322/mvc-3-razor-partial-view-validation-is-not-working)。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:30:30.157

在局部视图的 MVC3 中返回类型是“ **MVCHTMLString** ”，我们可以在服务器端捕获这个字符串并对其应用验证。在您的控制器中

```
 protected string RenderPartialViewToString(string viewName, object model)
        {
            if (string.IsNullOrEmpty(viewName))
                viewName = ControllerContext.RouteData.GetRequiredString("action");

            ViewData.Model = model;

            using (StringWriter sw = new StringWriter())
            {
                ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
                ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
                viewResult.View.Render(viewContext, sw);
                return sw.GetStringBuilder().ToString();
            }
        } 
```

通过将 ViewName 和 Model 传递给此方法，它将返回您的“ **MVCHTMLString** ”视图，以便可以在模型中应用您的验证。并使用 Ajax.BeginForm 而不是 Html.BeginForm 提交部分视图。所以在你的 paratil 视图中

```
 @using (Ajax.BeginForm("GetSCItems", "SCNumber", new AjaxOptions { OnSuccess = "AddSearch", UpdateTargetId = "scList" }))
     {
        <input type="submit" value="save"/>
     } 
```

在控制器中

```
public ActionResult GetSCItems(SCModel model)
{
     // operation 
     return RenderPartialViewToString("SCItems",model)
} 
```

在 AjaxOption 中，将“ **UpdateTargetId** ”指定为 scList，您的结果将在其中附加。

# ajax - ASP.NET MVC 4 - Ajax.BeginForm and html5

> ID：12512417
> 
> 赞同：4
> 
> 时间：2012-09-20T12:18:21.277
> 
> 标签：ajax, html, asp.net-mvc-4, ajax.beginform

## The Setup:

I have updated an app from ASP.NET MVC 3 to ASP.NET MVC 4.

The app worked fine in MVC 3\. The only thing that isn't working in MVC 4 is Ajax.Begin form: the form defaults to full page requests, instead of async AJAX requests.

Essentially, it is a wizard that I have written, but that is irrelevant. Model.Step.ActionName correctly returns a string (see code below).

## The Code:

The code in the View is:

```
@{ 
    using (Ajax.BeginForm(Model.Step.ActionName, null, new AjaxOptions { UpdateTargetId = "wizardStep", OnBegin="isValid", LoadingElementId="PleaseWait", OnSuccess="SetFocusOnForm" }, 
        new {@name="wizardForm", @id="wizardForm" } ))
{

//form contents

}
} 
```

## The Rendering:

I note that Ajax.BeginForm in MVC 4 uses HTML 5\. I show the difference between how MVC 3 and MVC 4 render the form below:

**MVC 3:**

```
<form action="/Solicitors/Company/New/YourDetails" id="wizardForm" method="post" name="wizardForm" onclick="Sys.Mvc.AsyncForm.handleClick(this, new Sys.UI.DomEvent(event));" onsubmit="Sys.Mvc.AsyncForm.handleSubmit(this, new Sys.UI.DomEvent(event), { insertionMode: Sys.Mvc.InsertionMode.replace, loadingElementId: 'PleaseWait', updateTargetId: 'wizardStep', onBegin: Function.createDelegate(this, isValid), onSuccess: Function.createDelegate(this, SetFocusOnForm) });">

// form contents

</form> 
```

**MVC 4:**

```
<form action="/Solicitors/Company/New/LoginDetails" data-ajax="true" data-ajax-begin="isValid" data-ajax-loading="#PleaseWait" data-ajax-mode="replace" data-ajax-success="SetFocusOnForm" data-ajax-update="#wizardStep" id="wizardForm" method="post" name="wizardForm" novalidate="novalidate">

// form contents

</form> 
```

I have no idea if this is correct, but assume it is.

## The Problem:

The problem, however, is that Ajax isn't used, just full page refreshes. So sumat is wrong...

## The Question:

The question is: What is wrong?!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T13:15:51.647

好的，我已经解决了这个问题。

在 MVC 3 应用程序中，我在 web.config 中注释掉了以下内容：

```
<appSettings>
    <add key="webpages:Version" value="1.0" />
    <!--<add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />-->
  </appSettings> 
```

这解释了为什么 asp.net mvc 3 没有呈现 html 5。

在新的 mvc 4 app 中，默认设置有`ClientValidationEnbled=true`和`UnobstrusiveJavaScriptEnabled=true`，如下：

```
<appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    ...
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

所以我的应用需要包含以下 javascript 文件：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

它需要丢弃 microsoft*.js 文件，即：

```
@*<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftMvcValidation.js")" type="text/javascript"></script>*@ 
```

在阅读了@Darin Dimitrov 对以下问题的回复后，我明白了这一点：

[MicrosoftAjax.js、MicrosoftMvcAjax.js 和 MicrosoftMvcValidation.js 从 ASP.NET MVC 3 开始是否已过时？](https://stackoverflow.com/q/8782697/271087)

非常感谢达林。答案值得一读，让自己了解我禁用的两个 appSettings 的含义。

# java - 如何仅签署 XML 的特定部分

> ID：12512424
> 
> 赞同：7
> 
> 时间：2012-09-20T12:18:52.737
> 
> 标签：java, xml, xpath, xml-signature, xml-dsig

我正在尝试通过仅对部分 xml 进行签名来进行一些 XML 签名，但是经过大量搜索后，我无法找到解决方案。

我正在使用 java 使用 Xpath2 转换和 EXCLUSIVE 规范化对 XML 进行签名。如果我有以下 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<msg xmlns="http://someaddress/ad/m1" xmlns:ns1="http://someotheraddres/ad/m2" xmlns:ns2="http://www.w3.org/2000/09/xmldsig#">
<header>
    <id>wsfrwerwerwer</id>
    <name>addr</name>
    <somenode>
        <trace>ND</trace>
    </somenode>
</header>
<payload><ns0:addr xmlns:ns0="http://someaddres/ad/m3"><ns2:data xmlns:ns2="http://someaddres/ad/m3">
            <ns2:name>somevalue</ns2:name>
            <ns2:value>354</ns2:value>
        </ns2:data>
    </ns0:addr>
</payload>
</msg> 
```

并签名，我得到以下输出（真实数据替换为虚拟数据）

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<msg xmlns="http://someaddress/ad/m1" xmlns:ns1="http://someotheraddres/ad/m2" xmlns:ns2="http://www.w3.org/2000/09/xmldsig#">
<header>
    <id>wsfrwerwerwer</id>
    <name>addr</name>
    <somenode>
        <trace>ND</trace>
    </somenode>
</header>
<payload>
    <ns0:addr xmlns:ns0="http://someaddres/ad/m3">
        <ns2:data xmlns:ns2="http://someaddres/ad/m3">
            <ns2:name>somevalue</ns2:name>
            <ns2:value>354</ns2:value>
        </ns2:data>
    </ns0:addr>
    <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
            <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
            <Reference URI="">
                <Transforms>
                    <Transform Algorithm="http://www.w3.org/2002/06/xmldsig-filter2">
                        <XPath xmlns="http://www.w3.org/2002/06/xmldsig-filter2" xmlns:ns0="http://someaddres/ad/m3" Filter="intersect">//*[local-name()='addr']/*</XPath>
                    </Transform>
                </Transforms>
                <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
                <DigestValue>sdlfjdeklsdfngf</DigestValue>
            </Reference>
        </SignedInfo>
        <SignatureValue>femhjgklnlkl</SignatureValue>
        <KeyInfo>
            <X509Data>
                <X509Certificate>swerwerwrwerwerwe</X509Certificate>
            </X509Data>
        </KeyInfo>
    </Signature>
</payload>
</msg> 
```

如果我验证签名，一切都很好，但是这里的问题是，在此之后，我在 XML 中执行了一个 XSLT，它对某些元素执行了一些更改，但没有对`ns0:addr`保持不变的签名元素 ( ) 执行一些更改。即使我明确说应该只对“addr”元素进行签名，但如果我尝试对其任何父元素（ 或 ）执行更改，它也会`payload`在`msg`签名`addr`失败时（根据我的理解）它不应该签名。如果我对其他元素（例如标题内的任何内容）进行更改，则签名仍然有效。

我已经测试了XPath`//*[local-name()='addr']/*`表达式（`ns2:data``msg``addr`

我也尝试过使用不同的转换，例如 UNION 但这根本不起作用。

有人知道问题可能是什么吗？在 Java 中，有没有什么方法可以在为调试目的对 XML 进行签名时准确查看正在签名的内容？

编辑：

稍后运行的 xslt 将执行诸如将命名空间从 ns0:addr 元素移动到根元素 (msg) 之类的事情，并且它将主元素名称和命名空间从 msg 更改为 newmsg（以及不同的默认命名空间），但保留签名数据 ( `ns2:data`) 完好无损。

用于签名的代码或多或少是这里提到的代码[http://docs.oracle.com/javase/7/docs/technotes/guides/security/xmldsig/XMLDigitalSignature.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/xmldsig/XMLDigitalSignature.html)

除了我使用 XPATH2 转换而不是 ENVELOPE 转换：

```
Map<String, String> namespaceMap = new HashMap<String, String>(0);
namespaceMap.put("ns0", "http://someaddres/ad/m3");
XPathType xPathType = new XPathType(xPathParameters, Filter.INTERSECT, namespaceMap);
List<XPathType> xPathList = new ArrayList<XPathType>(0);
xPathList.add(xPathType)
XPathFilter2ParameterSpec xPathFilter2ParameterSpec = new XPathFilter2ParameterSpec(xPathList);
transform = fac.newTransform(CanonicalizationMethod.XPATH2, xPathFilter2ParameterSpec); 
```

而且我使用的是 EXCLUSIVE 而不是 ENVELOPED

```
canonicalisationMethod = fac.newCanonicalizationMethod(CanonicalizationMethod.EXCLUSIVE, (C14NMethodParameterSpec) null); 
```

编辑2：

我已经设法对 xml 签名过程进行了更精细的调试，并得到了以下结果：

`FINER: Pre-digested input: 21-Sep-2012 10:51:39 org.jcp.xml.dsig.internal.DigesterOutputStream write FINER: <ns2:data xmlns="http://someaddress/ad/m1" xmlns:ns0="http://someaddres/ad/m3" xmlns:ns1="http://someotheraddres/ad/m2" xmlns:ns2="http://someaddres/ad/m3"> <ns2:name>somevalue</ns2:name> <ns2:value>354</ns2:value> </ns2:data>`

它似乎在签署正确的数据，但是它也在签名中添加了一些额外的命名空间，这让我想知道这是否是问题所在，因为这些命名空间是从父元素中获取的。

有人知道如何使它不添加所有额外的名称空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:43:06.157

在与 XML 签名进行了多次斗争之后，我终于找到了一个可以接受的解决方案（尽管并不理想）。

事实证明，独占规范化是不够的。您还需要在所有其他转换器之后添加独占转换。按照我上面写的代码片段：

```
List<Transform> transforms = new ArrayList<Transform>()
transforms.add(transform)
fac.newTransform(CanonicalizationMethod.EXCLUSIVE, (TransformParameterSpec) null) 
```

这将使签名元素之外的任何其他名称空间都不会被考虑（尽管它具有允许在签名元素内插入名称空间的附加效果）。

此外，似乎将考虑到已签名元素的 xpath 中的任何元素，因此如果您有以下 xpath `/root/A/B`，它将对标签 B 进行签名，但是您将无法更改 A 或根元素的标签名称。

这可以通过使用其中包含较少元素的 xpath 来克服，例如`//B`.

我相信也有可能克服这个问题，尽管到目前为止我还没有做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:02:19.507

有一些与命名空间相关的参数可以传递给描述[InclusiveNamespaces PrefixList的](http://www.w3.org/TR/xml-exc-c14n/#def-InclusiveNamespaces-PrefixList)[Exclusive XML Canonicalization](http://docs.oracle.com/javase/7/docs/api/index.html?javax/xml/crypto/dsig/CanonicalizationMethod.html)。

您可以尝试使用前缀列表将 ExcC14NParameterSpec 传递给[newCanonicalizationMethod](http://docs.oracle.com/javase/7/docs/api/javax/xml/crypto/dsig/spec/ExcC14NParameterSpec.html#ExcC14NParameterSpec%28java.util.List%29) **()**以查看这是否会影响命名空间的规范化。

# c - isblank 检测到哪些 ANSI 字符？

> ID：12512425
> 
> 赞同：1
> 
> 时间：2012-09-20T12:18:55.203
> 
> 标签：c

正如主题所说 - 对于哪些字符会`isblank(int c)`返回 true ？

在 SO 上没有找到关于该功能的任何条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:17:36.723

除非您将当前语言环境设置为 以外的其他`"C"`值，否则它只会为`' '`和`'\t`' 返回 true。

[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 7.4.1.3`isblank`功能
> 
> ...
> 2 该`isblank`函数测试任何作为标准空白字符的字符，或者是特定于语言环境的字符集之一，这些字符集为`isspace`真并且用于分隔文本行中的单词。标准空白字符如下：空格 ( `' '`) 和水平制表符 ( `'\t'`)。在`"C"`语言环境中，`isblank`仅对标准空白字符返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:21:56.513

取自手册页：

> isblank() 检查空白字符；即空格或制表符。

[http://linux.die.net/man/3/isblank](http://linux.die.net/man/3/isblank)

如果要检查所有空格，请使用`isspace()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:23:55.420

它是特定于语言环境的。

在“C”语言环境中，*只有*空格和水平制表符是空白。在其他语言环境中，可能会有额外的空格，根据`isspace`.

顺便说一句，这是在`isblank`C 标准中的定义。原则上每个标准段落都有一个或多个 SO 问题没有任何问题，但也没有必要仅仅为了填充网站而询问所有问题 ;-)

# dynamics-crm - 连接到 CRM Dynamics Online 时应用 OrganizationServiceProxy

> ID：12512426
> 
> 赞同：3
> 
> 时间：2012-09-20T12:18:59.073
> 
> 标签：dynamics-crm, dynamics-crm-online

我通过此代码使用组织服务成功连接到本地服务器。

```
using (OrganizationServiceProxy proxy = new OrganizationServiceProxy(
  Organization, 
  HomeRealm, 
  CredentialsForClient, 
  CredentialsForDevice)) { ... } 
```

`Organization`是我们的服务器加后缀`OrgName/XRMServices/2011/Organization.svc`。`CredentialsForClient`是我的登录名（或在线时我的实时 ID）。`HomeRealm`并`CredentialsForDevice`设置为`null`。

这似乎对本地版本非常有效，**但是**当我上线时，我收到错误消息。我可以创建`proxy`变量，但是当我尝试执行下面的代码时，异常告诉我我不能有一个`null`值作为终点。由于我的无知，这几乎没有告诉我任何事情。

```
EntityCollection entityCollection = proxy.RetrieveMultiple(fetchExpression); 
```

当然，我`Organization`在上网时使用的是不同的。我从在线版本的 CRM Dynamics 的设置中复制了字符串（就像我为本地版本所做的那样）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:00:13.087

您可能需要下载最新版本的 SDK 并查看示例：[与 Microsoft Dynamics CRM 的简化连接](http://msdn.microsoft.com/en-us/library/gg695810.aspx)。本地连接字符串和在线连接字符串不同。

```
[<add name="Server=CRM Online, organization=YourOrg, user=YourUserName"
         connectionString="Url=https://YourOrg.crm.dynamics.com; Username=YourUserName@YourOrg.onmicrosoft.com; Password=YourPassword"/>][2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T20:33:16.247

您是否看过这个示例，它展示了如何[使用 Microsoft Dynamics CRM Web 服务对用户进行身份验证，](http://msdn.microsoft.com/en-us/library/hh675404.aspx)而无需针对所有类型的连接、本地、在线的任何帮助代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:18:34.127

连接到在线版本时，您必须提供设备凭据和用户凭据。就是这样（Windows live 身份验证方案和所有。）

**编辑**

经过一番研究，我仍然没有找到关于为什么会这样的官方文档。通常，在 MSDN 论坛上，这是为了将设备标识与 windows live 相关联。也许这是为了让微软可以跟踪哪些工作站正在使用 CRM？也许它可以通过限制哪些机器身份可以使用某些帐户连接到 CRM，从而使他们能够在某些时候增强安全性。也许以上所有/都不是。

`OrganizationServiceProxy`除了推测之外，根据我的经验，如果没有针对 CRM 进行身份验证的设备凭据（即通过构造函数或 IServiceManagment 实现使用的身份验证过程） ，我无法执行成功的查询。

下面，您将找到一些我用来执行此操作的旧代码。我现在建议使用@Jason Lattimer 提到的连接字符串。如果您需要处理更多并行性，请考虑使用`IServiceManagement<IOrganizationService>`.

```
 var reader = new AppSettingsReader();

    //instatantiate credential class and populate values
    var cc = new ClientCredentials();
    cc.UserName.UserName = reader.GetValue("WLID", typeof(string)).ToString();
    cc.UserName.Password = reader.GetValue("WLPS", typeof(string)).ToString();

    //repeat for device credentials
    var deviceCredentials = new ClientCredentials();
    deviceCredentials.UserName.UserName = reader.GetValue("deviceWLID", typeof(string)).ToString();
    deviceCredentials.UserName.Password = reader.GetValue("deviceWLPS", typeof(string)).ToString();

    //create a uri for the organization service location
#if DEBUG
    var orgServiceUri = new Uri(reader.GetValue("CrmNonProductionUri", typeof(string)).ToString());
#else
    Uri orgServiceUri = new Uri(reader.GetValue("CrmProductionUri", typeof(string)).ToString());
#endif
    OrganizationServiceProxy retval = new OrganizationServiceProxy(orgServiceUri, null, cc, deviceCredentials);
    retval.EnableProxyTypes(); 
```

所以，最后，我只使用一个配置文件来存储构建我的凭据和 uri 所需的各种值（对于两种环境。）

# asp.net-mvc-3 - The 'model' keyword must be followed by a type name on the same line

> ID：12512428
> 
> 赞同：1
> 
> 时间：2012-09-20T12:19:09.120
> 
> 标签：asp.net-mvc-3, razor

I get an exception saying "The 'model' keyword must be followed by a type name on the same line" when i try to load my page.

QuickTimingSpeakerInfo.Controllers.BracketWidgetModel is a class.

in the cshtml file i have the following:

```
@model QuickTimingSpeakerInfo.Controllers.BracketWidgetModel

<script type="text/javascript">
    $(document).ready(function () {
        $("#SettingsMenuButton-" + '@model.Guid').button({
            icons: {
                primary: "ui-icon-circle-arrow-w"
            },
            text: false
        })
        .click(function () {
            ChooseWidgetInitialize(@Model.TabId, @Model.WidgetId, @Model.EventUID);
        });
    });
</script>... 
```

It was working only a short moment ago. Rebuilding does not solve it. How do i resolve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:18:29.467

问题是我使用了@model.field 而不是@Model.field。错误消息指向第一行，而不是错误所在的实际行。

# hibernate - 添加 JavaDocs Netbeans 7.2 Hibernate

> ID：12512438
> 
> 赞同：3
> 
> 时间：2012-09-20T12:20:07.353
> 
> 标签：hibernate, netbeans, javadoc, netbeans-7, netbeans-7.2

一个非常愚蠢和常见的问题。如何将 Hibernate(3.2.5) 的 javadocs 添加到 Netbeans 7.2 。1) Hibernate java doc的下载链接。2）这是正确的步骤---项目属性>>库>>休眠>>编辑>>选择ed hibernate 3 jar>>javadocs选项卡>>添加我的文件。（但什么也没发生）

**请告诉我帮助我已经尝试了很多但没有一个链接有效**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:03:41.353

在编辑窗口中（就像你之前做的那样）选择**`Javadoc --> Add URL`**并插入这个：`http://docs.jboss.org/hibernate/orm/3.2/api/`

这行得通吗？

**如果此解决方案不适合您，请查看最后几条评论**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T09:04:42.240

老问题，但对于其他有此问题但使用 maven 管理依赖项的人，请尝试以下操作：

```
mvn dependency:sources
mvn dependency:resolve -Dclassifier=javadoc 
```

第一个命令将尝试下载 pom 文件中每个依赖项的源代码。

第二个命令将尝试下载 Javadocs。

# binding - Backbone three.js 视图绑定

> ID：12512439
> 
> 赞同：0
> 
> 时间：2012-09-20T12:20:09.797
> 
> 标签：binding, view, backbone.js, three.js

很抱歉问什么可能是一个非常简单的菜鸟问题。

我有一个视图，它在 Three.js 渲染器中创建几何图形 - 该视图第一次成功渲染。但是，对渲染函数的后续调用会失败，并出现未知的引用错误。

我试图在视图而不是模型中存储对渲染几何的引用，因为模型在多个浏览器（实际上是服务器）之间共享 - 使用 Backboneio.js

视图如下所示：

```
StarSystem.hudContact = BackboneIO.View.extend({
  el: '',
  model: '',
  initialize: function(options) {
    var material = new THREE.LineBasicMaterial({
      color: 0xFFFFFF,
    });

    var geometry = new THREE.Geometry();
    geometry.vertices.push(new THREE.Vector3(0, 0, 0));
    geometry.vertices.push(new THREE.Vector3(0, 0, ((camera[0].position.z - this.model.get('zPos')) / 10000)));

    var line = new THREE.Line(geometry, material);
    line.position.x = ((camera[0].position.x - this.model.get('xPos')) / 10000);
    line.position.y = ((camera[0].position.y - this.model.get('yPos')) / 10000);
    line.position.z = 0;
    line.Name = this.model.get('Name');

    this._hudLine = hudScene.add(line);
    this.model.bind('update', this.render, this);
  },
  render: function(){
  console.log(this._sceneLine.position.x);
    this._hudLine.position.x = ((camera[0].position.x - this.model.get('xPos')) / 10000);
    this._hudLine.position.y = ((camera[0].position.y - this.model.get('yPos')) / 10000);
    this._hudLine.position.z = 0;

  }
}); 
```

因此，可以看出，我试图在 this._hudLine 中存储对行（行）的引用 - 这在第一次渲染时（在初始化调用期间）是已知的，但在此后（在渲染调用中）不知道。

任何关于如何处理这个问题而不必依赖全局数组或在模型中存储信息的方向将不胜感激......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:11:50.443

我实际上不知道 BackboneIO 是什么，但是在骨干网中，您必须将渲染函数绑定`_.bindAll(this,"render")`到类似的`this.model.bind('update',this.render)`工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:05:32.793

参考以下内容解决了该问题：

[主干视图的私有和公共变量](https://stackoverflow.com/questions/7575630/private-and-public-variables-to-a-backbone-view)

非常感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T11:38:20.043

参考以下文章解决了这个问题：

[主干视图的私有和公共变量](https://stackoverflow.com/questions/7575630/private-and-public-variables-to-a-backbone-view)

但是，我认为根本问题在于将视图包装在自执行函数中的原始模板：

```
(function () {
  //view stuff
}).call(this); 
```

而不是：

```
(function () {
  //view stuff
})(); 
```

一个菜鸟问题 - 非常感谢您的帮助！

# javascript - <%= x.ClientID %> 在重复的用户控件中返回错误值

> ID：12512440
> 
> 赞同：0
> 
> 时间：2012-09-20T12:20:14.027
> 
> 标签：javascript, asp.net, .net

我有 asp .net 用户控件，它在 html 模板中托管的一段 javascript 中有 <%= myDiv.ClientID %> 。

此控件在页面上放置多次。问题是上面的语句总是返回页面上最后一个控件中的 div 的客户端 ID。

我检查了 HTML，每个 div 都有自己唯一的 ID。

控件的完整 HTML 是...

```
<script type="text/javascript">
    function ToggleHelpText() {
        try {

            var e = document.getElementById("<%= divHelpText.ClientID %>");

            if (e.style.display == 'block')
                e.style.display = 'none';
            else
                e.style.display = 'block';
        }
        catch (err) {
            alert(err);
        }
    }
</script>
<asp:LinkButton ID="Help" OnClientClick="ToggleHelpText(); return false;" CausesValidation="false"
    OnClick="btnHelp_Click" runat="server">Help</asp:LinkButton>
<div id="divHelpText" runat="server" visible="true" style="display: none">
</div> 
```

什么可能导致这种情况以及解决方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:36:18.473

您的问题是您`ToggleHelpText`多次定义该函数。每个定义都有一个硬编码到其中的控件的 ID，当它们相互覆盖时，您只剩下最后一个定义和最后一个 ID。

作为一个简单的步骤，将您的代码更改为

```
<script type="text/javascript">
 function ToggleHelpText(id) {
     try {
          var e = document.getElementById(id);
          if (e.style.display == 'block')
             e.style.display = 'none';
         else
             e.style.display = 'block';
     }
     catch (err) {
         alert(err);
     }
 }
</script>
<asp:LinkButton
  ID="Help"
  OnClientClick='ToggleHelpText(\'<%= divHelpText.ClientID %>\'); return false;'
  CausesValidation="false"
  OnClick="btnHelp_Click" runat="server">Help</asp:LinkButton>
<div id="divHelpText" runat="server" visible="true" style="display: none">
  </div> 
```

这将继续多次覆盖函数，但现在 ID 本身不会被覆盖，因为它没有硬编码到函数中。

将来您可以弄清楚如何不多次定义该函数。

注意我有点不确定`OnClientClick`. 如果它不起作用，试试这个

```
OnClientClick='ToggleHelpText(<%= "\"" + divHelpText.ClientID + "\""%>); return false;' 
```

或尝试在代码中设置它：

```
Help.OnClientClick =
    "ToggleHelpText('" +
    divHelpText.ClientID +
    "'); return false;"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:52:13.927

一种解决方法可以是

```
<script type="text/javascript">
 function ToggleHelpText(id) {
     try {
          var a = document.getElementById(id);
          var e = a.nextSibling();
         if (e.style.display == 'block')
             e.style.display = 'none';
         else
             e.style.display = 'block';
     }
     catch (err) {
         alert(err);
     }
 }
</script>
<asp:LinkButton
  ID="Help"
  OnClientClick='ToggleHelpText(this.id); return false;'
  CausesValidation="false"
  OnClick="btnHelp_Click" runat="server">Help</asp:LinkButton>
<div id="divHelpText" runat="server" visible="true" style="display: none">
  </div> 
```

如果您不介意使用 Jquery，您将获得更好的 nextsibling() 替代品，因为 nextsibling() 或 nextElementSibling() 存在跨浏览器兼容性问题。

# php - jQuery AJAX call returning an empty response

> ID：12512441
> 
> 赞同：1
> 
> 时间：2012-09-20T12:20:15.983
> 
> 标签：php, html, jquery

I have a web page with a small form in it.

![enter image description here](../Images/b399ddcb3166a65c81555991f552a3ec.png)

HTML code for the page.

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="stylesheets/styles.css" />
<script type="text/javascript" src="scripts/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="scripts/scripts.js"></script>
</head>
<body id="body_services">

<?php

include_once 'DatabaseHandler.php';
$db = DatabaseHandler::getInstance();

//loading taxi service names for updating combobox
$queryLoadSids = $db->prepare("SELECT * FROM taxi_services ORDER BY SID");
$queryLoadSids->execute();
$dropdown = "<select name='serviceID'>";
while ($row = $queryLoadSids->fetch(PDO::FETCH_ASSOC))
{
    $dropdown .= "\r\n<option value='{$row['SID']}'>{$row['Name']}</option>";
}
$dropdown .= "\r\n</select>";

?>

<div id="tasks">
    <ul>
        <li><a id="add" href="#">Add a new taxi service</a></li>
        <li><a id="update" href="#">Update a taxi service</a></li>
        <li><a id="delete" href="#">Delete a taxi service</a></li>
        <li><a id="view" href="#">View taxi services</a></li>
    </ul>
</div>

<form id="cmbServiceIDs" name="sids">
<table width="380" border="0">
  <tr>
    <td><label for="serviceId">Select the Service ID</label></td>
    <td><?php echo $dropdown; ?></td>
    <td><input id="load" type="submit" value="Load" name="btnload" /></td>
  </tr>
</table>
</form>

<form id="frmUpdateService" name="Update" action="" method="post">
<table width="300" border="0">
  <tr>
    <td><label for="sid">Service ID</label></td>
    <td><input type="text" name="sid" value="" style="text-align:right" /></td>
  </tr>
  <tr>
    <td><label for="name">Name</label></td>
    <td><input type="text" name="name" value="" /></td>
  </tr>
  <tr>
    <td><label for="cost">Cost</label></td>
    <td><input type="text" name="cost" value="" /></td>
  </tr>
  <tr>
    <td><label for="active">Active</label></td>
    <td><input type="checkbox" name="active" value="" /></td>
  </tr>
  <tr>
    <td></td>
    <td><input type="reset" value="Cancel" /> <input type="submit" value="Update" name="update" /></td>
  </tr>
</table>
</form>

</body>
</html> 
```

When the Load button is clicked, it should run a query against a DB, return the results to populate the textboxes in the form. I'm using jQuery AJAX for this task.

```
$(function()
{
    $("#frmUpdateService").hide();
    $("#cmbServiceIDs").hide();

    $("#update").click(function()
    {
        $("#cmbServiceIDs").slideDown("slow");
        $("#frmUpdateService").hide();
    });

    $("#cmbServiceIDs").submit(function(e)
    {
        $("#frmUpdateService").fadeIn("slow");
        e.preventDefault();

        $.ajax(
        {
            type        : 'GET',
            url         : 'request.php',
            data        : {'serviceID' : $("#serviceID").val()},
            dataType    : 'json',
            success     : function(response)
            {
                var loadedSID = response[0];
                var loadedName = response[1];
                var loadedCost = response[2];
                var loadedActive = response[3];

                $("#sid").append(loadedSID);
                $("#name").append(loadedName);
                $("#cost").append(loadedCost);
                $("#active").append(loadedActive);
            }
        });
    });
}); 
```

This is the *request.php* page.

```
<?php

include_once 'DatabaseHandler.php';
$db = DatabaseHandler::getInstance();

$param = $_GET['serviceID'];

$queryLoadToUpdate = $db->prepare("SELECT * FROM taxi_services WHERE SID = :serviceID");
$queryLoadToUpdate->bindParam(':serviceID', $param, PDO::PARAM_STR);
$queryLoadToUpdate->execute();
$results = $queryLoadToUpdate->fetchAll(PDO::FETCH_ASSOC);

echo json_encode($results);

?> 
```

But when I run the page and click on the Load button, nothing appears in the textboxes. I looked into the response using Firebug and it shows an empty response. I checked the SQL query as well. No errors there either.

I have no idea what I should check or do next. Can anyone give any suggestions as to why its not working properly here?

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:34:07.557

显然查询*无法*正常工作，因为我为变量提供的值`$param`是`NULL`. 我可以用`var_dump`. 进一步检查使我注意到下拉列表的选定值未正确传递，因为我没有`id`在此行上指定 an 。

```
$dropdown = "<select name='serviceID'>"; 
```

我像这样纠正它。

```
$dropdown = "<select id='serviceID' name='serviceID'>"; 
```

在 jQuery 代码中，更改了这一行

`data : {'serviceID' : $("#serviceID option:selected").val()},`

到此获取所选下拉项的值。

```
data : {'serviceID' : $("#serviceID option:selected").val()}, 
```

# asp.net-mvc - 在 ASP.NET MVC 中创建谷歌图表

> ID：12512449
> 
> 赞同：2
> 
> 时间：2012-09-20T12:20:49.167
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, google-visualization

我正在阅读这个[http://blog.platformular.com/2012/03/20/load-google-chart-by-ajax-using-asp-net-mvc-and-jquery/](http://blog.platformular.com/2012/03/20/load-google-chart-by-ajax-using-asp-net-mvc-and-jquery/)和这个[https://google- developer.appspot.com/chart/interactive/docs/gallery/areachart](https://google-developers.appspot.com/chart/interactive/docs/gallery/areachart)。

如何在 VB.NET 中创建这样的数组？

```
 var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]); 
```

我需要从查询中创建它，而不是像上面链接到的文章中那样从静态数据中创建它：

```
Dim water = db.Tbl_Hydrations.Where(Function(x) x.Hyd_Create_Date >= firstDay And x.Hyd_Create_Date <= lastDay).ToList 
```

如果我可以创建数组，我可以在图表中显示数据。谢谢你的帮助。

**编辑：**

我试过这个：

```
Function WeightAreaChartData() As JsonResult

    Dim data = New Dictionary(Of String, Object)

    data.Add("1", New With {.Name = "China", .Value = "11"})
    data.Add("2", New With {.Name = "China", .Value = "11"})

    Return Json(data, JsonRequestBehavior.AllowGet)

End Function 
```

但是，谷歌图表说，“没有数据。”

它返回的 JSON 是：

```
{"1":{"Name":"China","Value":"11"},"2":{"Name":"China","Value":"11"}} 
```

**最终编辑：**

这是我正在使用的操作：

```
<EmployeeAuthorize()>
Function WeightAreaChartData() As JsonResult

    Dim myData = db.Tbl_Weights.Where(Function(x) x.Weight_Employee_ID).OrderBy(Function(x) x.Weight_Create_Date)

    Dim data = New List(Of Object)

    data.Add(New Object() {"Date", "Your Weight"})

    For Each i As Tbl_Weight In myData

        data.Add(New Object() {DateTime.Parse(i.Weight_Create_Date).Day, i.Weight_Amount})

    Next

    Return Json(data, JsonRequestBehavior.AllowGet)

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:21:38.850

您可以创建此数组：

```
[
   ['Year', 'Sales', 'Expenses'],
   ['2004',  1000,      400],
   ['2005',  1170,      460],
   ['2006',  660,       1120],
   ['2007',  1030,      540]
] 
```

通过使用这个 JsonResult

```
Function WeightAreaChartData() As JsonResult
    Dim data = New Object() {
                   New Object() {"Year", "Sales", "Expenses"},
                   New Object() {"2004", 1000, 400},
                   New Object() {"2005", 1170, 460},
                   New Object() {"2006", 660, 1120},
                   New Object() {"2007", 1030, 540}
              }

    Return Json(data, JsonRequest.Behavior.AllowGet)
End Function 
```

我知道，你的问题远不止这些。但这应该为您指明正确的方向。随时发表评论以获取更多建议。

**编辑**

以[你原来的帖子为例](https://google-developers.appspot.com/chart/interactive/docs/gallery/areachart)

您可以重写它以使用 JsonResult（更改 /Controller/WeightAreaChartData 以指向您的 JsonResult 路由）

```
<html>
  <head>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", { packages: ["corechart"] });
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            $.post('/Controller/WeightAreaChartData', {},
                function (data) {
                    var tdata = new google.visualization.arrayToDataTable(data);

                    var options = {
                        title: 'Company Performance',
                        hAxis: { title: 'Year', titleTextStyle: { color: 'red' } }
                    };

                    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
                    chart.draw(tdata, options);
                });
        }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

# windows - 为什么我不能在 Windows 中通过 testdisk 重写分区表？

> ID：12512450
> 
> 赞同：-1
> 
> 时间：2012-09-20T12:20:52.253
> 
> 标签：windows, boot

在 Windows 我的电脑出现一些问题后，我在启动时收到下一个错误：
*错误：没有这样的设备*
*grub 救援*>

我的 gparted 输出：分区：未分配的文件系统：未分配

磁盘 -l

```
 Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048   314574847   157286400    7  HPFS/NTFS/exFAT
/dev/sda2       314574848   649707567   167566360    7  HPFS/NTFS/exFAT
/dev/sda3       649709568   708300799    29295616   83  Linux
/dev/sda4       708300810   976784129   134241660    f  W95 Ext'd (LBA)
/dev/sda5       708302848   903608319    97652736   83  Linux
/dev/sda6       903614464   917284847     6835192   82  Linux swap / Solaris
/dev/sda7       917284864   976769023    29742080    7  HPFS/NTFS/exFAT 
```

所以我运行了testdisk，它找到了正确的分区

```
Disk /dev/sda - 500 GB / 465 GiB - CHS 60802 255 63
     Partition               Start        End    Size in sectors
>* HPFS - NTFS              0  32 33 19581  96 35  314572800 [Programs]
 P HPFS - NTFS          19581  96 36 40442 108 34  335132720 [Data]
 P Linux                40442 140 19 44089 174 53   58591232
 L Linux                44089 207 23 56247   4 13  195305472
 L Linux Swap           56247 101 47 57098  86 60   13670384
 L HPFS - NTFS          57098  87 14 60801  15 14   59484160 [New Volume] 
```

然后我按回车写入这个分区表，它说成功，需要重新启动。

重新启动后，我的分区表仍然“消失”（Gparted 说）。

那么，testdisk 没有完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:55:09.400

我的 500GB 外置硬盘也有同样的问题。它发生在驱动器正在运行但USB松动时。

我尝试了 testdisk，但是当我打开磁盘管理器时，它显示我的磁盘为 RAW，有 100% 的可用空间。所以我运行了检查磁盘：

> chkdsk/fe:

`e:`驱动器号在哪里

它设法恢复了我的 NTFS 分区，并且磁盘管理器显示了正确的已用空间。我现在唯一的问题是磁盘无法访问:(

# java - 与 .Net 兼容的 RSA 密钥（XML 格式）

> ID：12512455
> 
> 赞同：4
> 
> 时间：2012-09-20T12:21:10.580
> 
> 标签：java, .net, encryption, rsa

如何生成应与 .NET 环境兼容的基于 xml 的 RSA 密钥（私有、公共）。我在 PHP 中尝试了 phpseclib 模块。但它与.NET 不兼容。请建议我用 Java 生成基于 xml 的 RSA 密钥的任何方法？实际上我正在研究基于 linux 的系统。使用这些密钥我将执行加密和解密操作。像

```
<RSAKeyValue>
    <Modulus>4hjg1ibWXHIlH...ssmlBfMAListzrgk=</Modulus>
    <Exponent>AQAB</Exponent>
    <P>8QZCtrmJcr9uW7VRex+diH...jLHV5StmuBs1+vZZAQ==</P>
    <Q>8CUvJTv...yeDszMWNCQ==</Q>
    <DP>elh2Nv...cygE3657AQ==</DP>
    <DQ>MBUh5XC...+PfiMfX0EQ==</DQ>
    <InverseQ>oxvsj4WCbQ....LyjggXg==</InverseQ>
    <D>KrhmqzAVasx...uxQ5VGZmZ6yOAE=</D>
</RSAKeyValue> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T14:37:07.353

Java 中没有开箱即用的支持，但它仍然相当微不足道。首先，您使用 JCA 生成一个 RSA 密钥对`KeyPairGenerator`。

然后，您需要将私钥转换为适当的接口（我们使用`RSAPrivateCrtKey`而不是`RSAPrivateKey`这样我们可以访问 CRT 部分），并使用 Apache Commons Codec 进行 Base64 编码。

```
public static void main(String[] args) throws Exception {
    KeyPairGenerator keyPairGen = KeyPairGenerator.getInstance("RSA");
    KeyPair keyPair = keyPairGen.genKeyPair();
    RSAPrivateCrtKey privKey = (RSAPrivateCrtKey) keyPair.getPrivate();

    BigInteger n = privKey.getModulus();
    BigInteger e = privKey.getPublicExponent();
    BigInteger d = privKey.getPrivateExponent();
    BigInteger p = privKey.getPrimeP();
    BigInteger q = privKey.getPrimeQ();
    BigInteger dp = privKey.getPrimeExponentP();
    BigInteger dq = privKey.getPrimeExponentQ();
    BigInteger inverseQ = privKey.getCrtCoefficient(); 

    StringBuilder builder = new StringBuilder();
    builder.append("<RSAKeyValue>\n");
    write(builder, "Modulus", n);
    write(builder, "Exponent", e);
    write(builder, "P", p);
    write(builder, "Q", q);
    write(builder, "DP", dp);
    write(builder, "DQ", dq);
    write(builder, "InverseQ", inverseQ);
    write(builder, "D", d);
    builder.append("</RSAKeyValue>");

    System.out.println(builder.toString());
}

private static void write(StringBuilder builder, String tag, BigInteger bigInt) {
    builder.append("\t<");
    builder.append(tag);
    builder.append(">");
    builder.append(encode(bigInt));
    builder.append("</");
    builder.append(tag);
    builder.append(">\n");
}

private static String encode(BigInteger bigInt) {
    return new String(Base64.encodeInteger(bigInt), "ASCII");
} 
```

如果您愿意，可以使用适当的 XML API，但我认为没有令人信服的理由不使用`StringBuilder`这种情况。此外，请随意内联`BigInteger`实例。我将它们声明为变量，以使 Java 方法和 XML 元素之间的映射更加明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-10T11:22:28.847

如果有人想做反向操作 - 通过 xml 文件获取 RSAPrivateCrtKey，不要忘记使用正号参数创建 BigInteger 实例。

```
new BigInteger(1, Base64.getDecoder().decode(encodedBigInteger)); 
```

它避免了潜在的异常

```
java.security.SignatureException: Could not sign data
    at sun.security.rsa.RSASignature.engineSign(RSASignature.java:178)
    at java.security.Signature$Delegate.engineSign(Signature.java:1207)
    at java.security.Signature.sign(Signature.java:579)
    ... more
Caused by: javax.crypto.BadPaddingException: Message is larger than modulus
    at sun.security.rsa.RSACore.parseMsg(RSACore.java:214)
    at sun.security.rsa.RSACore.crtCrypt(RSACore.java:166)
    at sun.security.rsa.RSACore.rsa(RSACore.java:122)
    at sun.security.rsa.RSASignature.engineSign(RSASignature.java:175)
    ... 6 more 
```

# elasticsearch - 在elasticsearch上查询索引数据

> ID：12512457
> 
> 赞同：1
> 
> 时间：2012-09-20T12:21:17.650
> 
> 标签：elasticsearch

我用“名称”和“消息”等术语为弹性搜索的数据编制了索引。现在我想以这样一种方式对索引数据应用查询，即我想找到消息中使用的某个短语的频率（计数）。例如消息是“我喜欢吃三明治”，“我喜欢吃汉堡”等，，，现在我想查询在所有索引消息中使用了多少次“喜欢”短语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:52:53.127

听起来您正在寻找术语 Facet API。见这里：[http ://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)

如果需要，您也可以使用特定术语过滤您的方面。请参阅以下页面上的“构面过滤器”：[http ://www.elasticsearch.org/guide/reference/api/search/facets/index.html](http://www.elasticsearch.org/guide/reference/api/search/facets/index.html)

HTH 大卫。

# php - PHP Escape GET 数据

> ID：12512461
> 
> 赞同：1
> 
> 时间：2012-09-20T12:21:38.630
> 
> 标签：php, web-services, get

如果我在 Web 服务调用中使用 GET 参数，我应该使用哪种类型的转义？我正在考虑只使用htmlentities。

示例： [http ://example.com/search.php?search=1234](http://example.com/search.php?search=1234)

搜索.php

使用 $_GET['search'] 对另一个服务进行 Web 服务调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T12:25:10.687

在 URL 中，[`urlencode`](http://php.net/urlencode)数据。

HTML 实体仅在 HTML 上下文中相关。
也许[伟大的逃避现实（或：在文本中使用文本需要知道的内容）](http://kunststube.net/escapism/)可以消除这种困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:30:48.800

只需添加到@deceze 答案，这可能是使用`rawurlencode`.

[urlencode vs rawurlencode？](https://stackoverflow.com/q/996139/1624960)

# javascript - 我希望 facebook 与本地 html 文件上的 javascript 集成

> ID：12512464
> 
> 赞同：-4
> 
> 时间：2012-09-20T12:21:46.693
> 
> 标签：javascript, android, html, facebook

我希望 facebook 与本地 html 文件上的 javascript 集成。喜欢
`file:///Users/anil/Desktop/FB-Javascript/fb1.html`。如果我将此文件放在 ftp 上，facebook 登录注销功能可以正常工作。但我想将此 fb.html 文件嵌入到 android Webview 中。现在我收到这样的错误。

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

如何将本地文件集成到 Facebook。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:23:55.417

我不认为你可以。当您在 Facebook 中设置应用程序时，您必须告诉它您的网站将托管的应用程序域：

![在此处输入图像描述](../Images/c3cedf3f7b91b12a6e89acacaa4e7379.png)

...以及您的网站地址：

![在此处输入图像描述](../Images/ed2821a0c3c5aa70fe81db6e039b7cf5.png)

这不能是`file://`您本地计算机上的地址，它必须是 Facebook 可以重定向或发布响应的地址。

有很多关于在 Android 上集成应用程序的具体指南：

[https://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)

...和移动网络客户端：

[https://developers.facebook.com/docs/guides/mobile/web/](https://developers.facebook.com/docs/guides/mobile/web/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:24:00.350

您需要在 Facebook 的应用程序页面上配置您的应用程序。将您的重定向 URL 配置为在您的应用程序中使用的 URL

# emacs - 如何在 .emacs 中创建特定的窗口设置

> ID：12512471
> 
> 赞同：2
> 
> 时间：2012-09-20T12:21:59.733
> 
> 标签：emacs, startup, key-bindings

我对 emacs 和 Lisp 非常陌生，尽管从使用其他函数式语言的经验来看，模仿我在有用的代码片段中看到的内容对我来说并不难。我在 .emacs 文件中添加了一些不错的窗口切换功能，它们运行良好。

但是在启动时，我想配置一个特定的窗口/框架排列。基本上，我想在每次启动 emacs 时执行以下操作（通常每天最多一次，然后保持打开数天/数周）。

```
1\. Split the screen in half (C-x 2)
2\. Grow the top half bigger by 20 lines (C-u 20 C-x ^)
3\. Open a second frame of emacs (C-x 5 2) 
```

理想情况下，我什至想最大化左显示器上的第一帧和右显示器上的第二帧，但我可以不这样做。

我只是想知道您如何将等效于键命令的功能写入 .emacs 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T14:51:23.683

作为 event_jr 答案的后续，有趣的是，`(kbd)`可以直接将返回值作为键盘宏进行评估。这可以[分配给一个键](https://stackoverflow.com/a/4535803/324105)作为定义常规键盘宏的替代方法，但在您的情况下 - 您希望放置在 .emacs 文件中的一次性序列，其中效率不是问题 - 您*可能会*发现最好以友好的`kbd`格式写出键序列（并带有注释，因为`kbd`处理这些）而不是 的输出`insert-kbd-macro`，如果不调用宏编辑器就很难理解。

```
(execute-kbd-macro (kbd "
 C-x 2           ;; split-window-below
 C-u 20 C-x ^    ;; enlarge-window
 C-x 5 2         ;; make-frame-command
")) 
```

在这里，我刚刚复制并粘贴了键盘宏编辑器的输出，如 event_jr 所示，因此请注意，您可以使用该工具自动生成注释 :)

也就是说，我个人鼓励您编写诸如真正的函数调用之类的东西：

```
(split-window-below)
(enlarge-window 20)
(make-frame-command) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:33:32.190

Emacs中**最好**的功能是自文档帮助，因此您可以通过其他语言的经验轻松弄清楚如何在 Emacs-lisp 中编写所需的命令。

但是因为你想要的是一个直接的键序列，一个宏会为你提供最好的服务，它为你提供了一个开始写作的好地方

这是我输入的键序列：

```
 C-x (  C-x 2 C-u 2 0 C-x ^ C-x 5 2 <switch-frame> C-x ) 
```

我已经录制了一个宏来执行您的要求。然后`M-x` `edit-last-kbd-macro`，我看到：

```
;; Keyboard Macro Editor.  Press C-c C-c to finish; press C-x k RET to cancel.
;; Original keys: C-x 2 C-u 20 C-x ^ C-x 5 2

Command: last-kbd-macro
Key: none

Macro:

C-x 2           ;; split-window-below
C-u 20 C-x ^        ;; enlarge-window
C-x 5 2         ;; make-frame-command 
```

然后`M-x` `name-last-kbd-macro`"foo" `M-x` `insert-kbd-macro`"foo"

```
(fset 'foo
   [?\C-x ?2 ?\C-u ?2 ?0 ?\C-x ?^ ?\C-x ?5 ?2 (switch-frame #<frame  *Minibuf-1* 0x101855410>)]) 
```

将最后一个块添加到您的 .emacs 文件中，并使用

```
(foo) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T14:22:01.647

有一种更“成熟”的方式来配置框架和窗口配置。有三个相关的功能：

```
C-x r f         frame-configuration-to-register
C-x r w         window-configuration-to-register
C-x r j         jump-to-register 
```

跳转到包含框架/窗口配置的寄存器将加载该框架/窗口配置。

窗口配置不是每帧，它（似乎）适用于所有帧。我没有测试框架配置，因为它们在 xmonad 下似乎不起作用。

但是，我不知道您如何在会话之间实际保存它们，所以这更像是一个仅供参考。

# php - 组合多个 MySQL 查询

> ID：12512473
> 
> 赞同：2
> 
> 时间：2012-09-20T12:22:18.463
> 
> 标签：php, mysql, mysqli

所以，我在 PHP 中有这个查询，它按预期工作：

```
SELECT files.ID, 
       files.Name,
       files.Downloads, 
       if (dlratings.userID IS NULL,0,r.vote) AS has_voted
FROM files
LEFT JOIN dlratings
   ON (files.ID = dlratings.fileID AND dlratings.userID = $userID)
WHERE files.Temporary != 1 AND files.Type = $type AND files.Cat_1 = $cat_1 
ORDER BY files.rating DESC, files.DateOrder DESC 
```

现在出现了我的问题：我还想选择与这些选定文件相关联的标签。我正在使用[toxi 方法](http://www.pui.ch/phred/archives/2005/04/tags-database-schemas.html)，这意味着我有一个名为“tagmap”的表，其中包含行`file_id`，`tag_id`并且我有一个表“tags”，其中包含行`tag_id`和`tag_name`。

要在只有一个文件的页面上列出我需要的标签，我使用以下查询：

```
SELECT files.Name,
       GROUP_CONCAT(tags.tag_name ORDER BY tags.tag_name SEPARATOR ', ') AS tags
FROM files
LEFT JOIN tagmap
   ON tagmap.file_id = files.ID
LEFT JOIN tags
   ON tagmap.tag_id = tags.tag_id
WHERE files.ID = $fileID 
```

如何将两者结合起来，以便在第一个查询提供的列表中显示标签？

这是我尝试过的，但它只给了我 1 个结果：

```
SELECT files.ID, 
       files.Name,
       files.Downloads,
       GROUP_CONCAT(tags.tag_name ORDER BY tags.tag_name SEPARATOR ', ') AS tags
       if (dlratings.userID IS NULL,0,r.vote) AS has_voted
FROM files
LEFT JOIN tagmap
   ON tagmap.file_id = files.ID
LEFT JOIN tags
   ON tagmap.tag_id = tags.tag_id
LEFT JOIN dlratings
   ON (files.ID = dlratings.fileID AND dlratings.userID = $userID)
WHERE files.Temporary != 1 AND files.Type = $type AND files.Cat_1 = $cat_1 
ORDER BY files.rating DESC, files.DateOrder DESC 
```

请注意，我通过 php 调用这些查询并使用 mysqli。我尝试了一点，`mysqli_multi_query`但我也完全迷失了那个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:24:41.300

尝试添加 GROUP BY files.ID。这样可以吗？

# extjs - 我应该在 Sencha Touch 2 中扩展 Ext.app.Application 类吗？

> ID：12512476
> 
> 赞同：3
> 
> 时间：2012-09-20T12:22:36.263
> 
> 标签：extjs, sencha-touch, touch, extend

我应该在 Sencha Touch 2 中扩展 Ext.app.Application 类吗？我有几个应用程序通用的功能，例如：为应用程序中配置的所有商店做一些事情。如果是，我如何在 app.js 中启动应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T12:07:32.410

我会回答***ExtJS 4.0.x / 4.1.x***和 SenchaTouch 2.0.x / 2.1.x

你不应该延长`Ext.app.Application`

**为什么？**

您一次只能有一个活动应用程序，应该（需要）始终通过调用来配置和启动`Ext.application({...});`。

与往常一样，有一些方法可以解决这个问题（在两个框架中），然后您可以使用自己的实例。但是不推荐！

**需要什么？**

基本上，唯一需要做的就是在`Ext.application`方法中重新实现和扩展代码，以便它能够处理任何其他类`Ext.app.Application`。我将只添加一个 SenchaTouch 示例，对于 ExtJS，请参见代码下方的 ExtJS4.2 部分。

**SenchaTouch 示例**

```
application: function(appClass,config) {
    var appName = config.name,
        onReady, scope, requires;

    if (!config) {
        config = {};
    }

    if (!Ext.Loader.config.paths[appName]) {
        Ext.Loader.setPath(appName, config.appFolder || 'app');
    }

    requires = Ext.Array.from(config.requires);
    config.requires = [appClass];

    onReady = config.onReady;
    scope = config.scope;

    config.onReady = function() {
        config.requires = requires;
        Ext.create(appClass, config);

        if (onReady) {
            onReady.call(scope);
        }
    };

    Ext.setup(config);
}, 
```

**ExtJS 4.2 的注释**

Sencha 宣布了 ExtJS 4.2，它将允许我们从`Ext.app.Application`类中扩展

# javascript - 用什么换美元。当方法由变量的值给出时

> ID：12512478
> 
> 赞同：1
> 
> 时间：2012-09-20T12:22:42.693
> 
> 标签：javascript, jquery

我需要为常见 jquery 调用的所有部分替换变量。
所以给出以下代码：

```
$('#some_id').html('bar'); 
```

这按预期工作：

```
var selector = '#some_id';
var action = 'html';
var input = 'bar';    
$(selector)[action](input); 
```

所以现在问题变成了，我如何在没有选择器部分的情况下拨打电话，如下所示：

```
$.myFunction('foo'); 
```

这不起作用：

```
var action = 'myFunction';
var input = 'foo';
$.[action](input); 
```

那么正确的模式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:23:52.233

没有期限，它应该可以工作。

```
$[action](input); 
```

# javascript - 如何在我的默认浏览器中使用 vb.net 执行 javascript 函数

> ID：12512480
> 
> 赞同：0
> 
> 时间：2012-09-20T12:22:47.520
> 
> 标签：javascript, vb.net-2010

我有一个 vb.net (2010) 桌面应用程序。我想知道是否可以创建一个打开活动浏览器并立即触发 javascript 函数的函数。也许你们可以帮助我，或者给我一些有用的提示，让我在正确的方向上走得更远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:31:53.710

Is it just to execute a specific javascript function. or do you wish it to load the website and fire a javascript function?

If it's just so you can run some JS you can use wscript shell or cscript shell. If it's to run code from a specific site, this isn't possible

# c# - 没有 MediaTypeFormatter 可用于从媒体类型为“text/plain”的内容中读取“String”类型的对象

> ID：12512483
> 
> 赞同：72
> 
> 时间：2012-09-20T12:23:05.217
> 
> 标签：c#, .net, asp.net-mvc, json, httpclient

这是这种情况：

它们是[Servoy](http://www.servoy.com/)中的外部 Web服务，我想在 ASP.NET MVC 应用程序中使用此服务。

使用此代码，我尝试从服务中获取数据：

```
HttpResponseMessage resp = client.GetAsync("http://localhost:8080/servoy-service/iTechWebService/axws/shop/_authenticate/mp/112818142456/82cf1988197027955a679467c309274c4b").Result;
resp.EnsureSuccessStatusCode();

var foo = resp.Content.ReadAsAsync<string>().Result; 
```

但是当我运行应用程序时，我得到下一个错误：

> 没有 MediaTypeFormatter 可用于从媒体类型为“text/plain”的内容中读取“String”类型的对象。

如果我打开 Fiddler 并运行相同的 url，我会看到正确的数据，但内容类型是 text/plain。但是我在 Fiddler 中也看到了我想要的 JSON ......

是否可以在客户端解决这个问题，或者是 Servoy 网络服务？

**更新：**
使用 HttpWebRequest 而不是 HttpResponseMessage 并使用 StreamReader 读取响应...

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-10-03T23:04:09.753

尝试改用 ReadAsStringAsync()。

```
 var foo = resp.Content.ReadAsStringAsync().Result; 
```

`ReadAsAsync<string>()`它不起作用的原因是因为`ReadAsAsync<>`会尝试使用默认值之一`MediaTypeFormatter`（即`JsonMediaTypeFormatter`, `XmlMediaTypeFormatter`, ...）来读取带有`content-type`of的内容`text/plain`。但是，没有一个默认格式化程序可以读取`text/plain`（它们只能读取`application/json`,`application/xml`等）。

通过使用`ReadAsStringAsync()`，无论内容类型如何，内容都将被读取为字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-27T12:47:00.693

或者您可以创建自己的`MediaTypeFormatter`. 我用这个`text/html`。如果你添加`text/plain`到它，它也会为你工作：

```
public class TextMediaTypeFormatter : MediaTypeFormatter
{
    public TextMediaTypeFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html"));
    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)
    {
        return ReadFromStreamAsync(type, readStream, content, formatterLogger, CancellationToken.None);
    }

    public override async Task<object> ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger, CancellationToken cancellationToken)
    {
        using (var streamReader = new StreamReader(readStream))
        {
            return await streamReader.ReadToEndAsync();
        }
    }

    public override bool CanReadType(Type type)
    {
        return type == typeof(string);
    }

    public override bool CanWriteType(Type type)
    {
        return false;
    }
} 
```

最后，您必须将其分配给该`HttpMethodContext.ResponseFormatter`属性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-08-08T17:33:42.460

我知道这是一个较老的问题，但我觉得[t3chb0t](https://stackoverflow.com/users/235671/t3chb0t)的答案让我找到了最好的方法，并且想分享。你甚至不需要去实现所有格式化程序的方法。我对我正在使用的 API 返回的内容类型“application/vnd.api+json”执行了以下操作：

```
public class VndApiJsonMediaTypeFormatter : JsonMediaTypeFormatter
{
    public VndApiJsonMediaTypeFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/vnd.api+json"));
    }
} 
```

可以像下面这样简单地使用：

```
HttpClient httpClient = new HttpClient("http://api.someaddress.com/");
HttpResponseMessage response = await httpClient.GetAsync("person");

List<System.Net.Http.Formatting.MediaTypeFormatter> formatters = new List<System.Net.Http.Formatting.MediaTypeFormatter>();
formatters.Add(new System.Net.Http.Formatting.JsonMediaTypeFormatter());
formatters.Add(new VndApiJsonMediaTypeFormatter());

var responseObject = await response.Content.ReadAsAsync<Person>(formatters); 
```

超级简单，完全符合我的预期。

# c - 如何获取文件的地址？

> ID：12512485
> 
> 赞同：1
> 
> 时间：2012-09-20T12:23:19.613
> 
> 标签：c, file

我想知道一个文件的地址。

我可以使用 打开一个文件`fopen()`，然后我可以使用文件指针来读取它的内容。是否可以通过地址获取文件的内容？我知道它是从流而不是文件中读取的，但即使知道流的起始地址是什么也会有所帮助。

我看到了`FILE`结构，并注意到其中`base`包含一个指针。我已经阅读了它的价值，但它是`0`。

我究竟做错了什么？我正在尝试的甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:29:35.740

内存 (RAM) 中的事物具有可以读取和写入的地址。磁盘上的文件没有地址。您只能将文件读入内存，然后浏览其内容。

或者您可以`fseek`在流 API 中使用来寻找文件中的特定位置，然后从那里开始在内存中读取它，或者其他什么。

要在 C 中打开和读取文件，您可以执行以下操作：

```
/* fread example: read a complete file */
#include <stdio.h>
#include <stdlib.h>

int main () {
  FILE * pFile;
  long lSize;
  char * buffer;
  size_t result;

  pFile = fopen ( "myfile.bin" , "rb" );
  if (pFile==NULL) {fputs ("File error",stderr); exit (1);}

  // obtain file size:
  fseek (pFile , 0 , SEEK_END);
  lSize = ftell (pFile);
  rewind (pFile);

  // allocate memory to contain the whole file:
  buffer = (char*) malloc (sizeof(char)*lSize);
  if (buffer == NULL) {fputs ("Memory error",stderr); exit (2);}

  // copy the file into the buffer:
  result = fread (buffer,1,lSize,pFile);
  if (result != lSize) {fputs ("Reading error",stderr); exit (3);}

  /* the whole file is now loaded in the memory buffer. */

  // terminate
  fclose (pFile);
  free (buffer);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:40:50.757

内存映射文件可以实现这一点，但它们是特定于操作系统的功能（大多数系统都支持），标准库不提供。

# php - 代码点火器。我可以使用 PHP 的本地会话函数和 $_SESSION 吗？

> ID：12512487
> 
> 赞同：0
> 
> 时间：2012-09-20T12:23:28.150
> 
> 标签：php, codeigniter, session

我刚刚开始使用 CodeIgniter 2。我抵制了一个框架这么久，但终于意识到我的类、函数、配置文件的混搭集合是在多个项目中保持更新的噩梦。

我正在查看 CI 的[会话课程](http://codeigniter.com/user_guide/libraries/sessions.html "CI的会话类")并注意到以下内容：

> 会话数组的一个有用方面是您可以将自己的数据添加到其中，并将其存储在用户的 cookie 中。你为什么想做这个？

啊！由于很多原因，这对我来说听起来很错误。这是我的问题...使用 CodeIgniter 时
是否可以使用 PHP 的本机会话函数和访问？ 或者 CI 中有什么东西会阻止我这样做？任何拒绝直接访问超级全局变量或其他东西的安全功能？`$_SESSION`

[我找到了这个](https://github.com/EllisLab/CodeIgniter/wiki/Native-session "本机会话")，但它看起来像是为 CI 1.5 设计的，我不确定它会如何更新。我想我更愿意为 PHP 的本机会话使用我自己的包装器——如果我真的可以使用 PHP 的本机会话的话。

我还应该补充一点，我也不希望将会话存储在数据库中，以防出现连接/延迟问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:50:30.830

[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

Codeigniter 会话类创建它自己的会话数据。所以它与 PHP 的本机会话无关，是的，您可以使用它们。

一个好处是您可以轻松地将会话数据保存在数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:00:48.650

里面`config.php`有一个默认使用cookies的选项：

```
$config['sess_driver'] = 'cookie'; 
```

**描述**

```
'sess_driver'= the driver to load: cookie (Classic), native (PHP sessions), 
```

所以看起来你可以改变它来使用原生 PHP 会话。

# makefile - 如何在 gnu makefile 中将 glob 模式转换为 patsubst 模式

> ID：12512490
> 
> 赞同：2
> 
> 时间：2012-09-20T12:23:37.340
> 
> 标签：makefile, gnu-make

我有一个与通配符一起使用的模式来查找文件。该模式是在一个变量中指定的，因为它是可配置的（它在一个包含的 makefile 中）。然后我需要使用与 patsubst 相同的模式。有没有简单的方法切换`*`a `%`？显然，通配符模式中只能有一个`*`。

因此，例如，如果我的通配符模式是， `*.c`那么我想获得该模式`%.c`

这也需要适用于以下通配符模式：

```
WILD := *.c *.s *.S
WILD := prefix_*.suffix 
```

对于第一种情况，我有一个解决方案，我只是使用扩展，即使用 patsubst 本身：

```
PATSUBST_PATTERN := $(patsubst *.%,\%.%,$(WILD)) 
```

任何人都可以建议一种方法来做到这一点，而`*`不是在通配符模式的开头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:58:58.727

关于什么

```
WILD := *.c *.s *.S prefix_*.suffix
PATSUBST_PATTERN := $(subst *,%,$(WILD))
$(info $(PATSUBST_PATTERN)) 
```

输出：

```
%.c %.s %.S prefix_%.suffix 
```

# version-numbering - 未找到 Microsoft.VersionNumber.targets

> ID：12512493
> 
> 赞同：0
> 
> 时间：2012-09-20T12:23:49.627
> 
> 标签：version-numbering

当我想用 5 个项目打开 solition 时，一个项目出现如下错误

找不到“\AssemblyInfoTask\Microsoft.VersionNumber.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:36:41.320

项目中有一行引用了用于递增版本号的 MSBuild 任务。您不得安装 MSBuildExtensions。您可以安装 MSBuild（正确）或删除它（见下文）。

查找此行并将其删除：

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\AssemblyInfoTask\Microsoft.VersionNumber.targets"> 
```

**请注意，您可能正在删除重要功能，因此您可能不想重新签入。**

# php - 使用 Uploadify 上传多个文件 - 需要输入字段中的 ID

> ID：12512509
> 
> 赞同：0
> 
> 时间：2012-09-20T12:24:24.327
> 
> 标签：php, javascript, jquery, file-upload, uploadify

我在一页上有多个输入字段。每个输入字段都有一个文本输入和一个文件上传字段。当前的工作流程如下所示：

*   上传后，文件名直接存储在数据库中。（上传.php）
*   我从数据库中得到一个 ID，我需要与上传字段相对应。（uploadify.php - 在会话中写入？）

现在我需要一种方法来跟踪哪个文件上传对应于哪个文本输入。如果我有文件上传字段的 id，我可以与相应的文本输入建立关系，并与从数据库返回的 id 一起将文本存储到相应的上传。

我尝试了[此处](https://stackoverflow.com/a/4657225/426227)描述的方式，但`onSelect`只有一个`file`对象无法为我提供名为 Uploadify 的输入字段的数据。在 Uploadify 的实际版本中，我没有找到另一个可以为我提供此功能的功能。

现在我正在考虑使用`$_SESSION`它，但不知道如何做到这一点。

**客户端**：

```
$('.iconupload').uploadify({
    'swf'            : '<?php echo SUBFOLDER; ?>/swf/uploadify.swf',
    'uploader'       : '<?php echo SUBFOLDER; ?>/includes/uploadify.php',
    'formData'       : {'folder' : '<?php echo IMG_UPLOAD_ICONS; ?>', 'id' : '<?php echo $_SESSION['ID']; ?>', 'type' : 'icon'},
    'multi'          : false,
    'auto'           : true,
    'removeCompleted': false,
    'queueSizeLimit' : 1,
    'simUploadLimit' : 1,
    'fileTypeExts'       : '*.jpg; *.jpeg; *.png; *.gif',
    'fileTypeDesc'       : 'JPG Image Files (*.jpg); JPEG Image Files (*.jpeg); PNG Image Files (*.png), GIF (*.gif)',
    'onUploadError'  : function(file, errorCode, errorMsg, errorString) {
        alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
    },
    'onUploadSuccess': function(file, data, response) {
        //alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
    },
    'onSelect'       : function(file) {
        //var elem_id = $(event.target).attr("id"); //here you get the id of the object.
        //alert (elem_id);
        console.debug(file);
        //$("#"+elem_id).uploadifySettings('formData',{'formID':elem_id})
    }
}); 
```

**服务器端**：

```
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

        $res= mkdir(str_replace('//','/',$targetPath), 0750, true);
        $res2=move_uploaded_file($tempFile,$targetFile);
        $relative_url = str_replace($_SERVER['DOCUMENT_ROOT'],'',$targetFile);
        echo $relative_url;

    if($_REQUEST['type'] == 'icon' && !empty($_REQUEST['id'])){
        $iconid = $db->addIcon($_REQUEST['id'], $relative_url);
        $icons = array();
        if(isset($_SESSION['icons'])){
            $icons = $_SESSION['icons'];
        }
        $icons[$_REQUEST['formID']]= $iconid;
        $_SESSION['icons'] = $icons;
    }
} 
```

也许可以使用`onUploadSuccess`and`data`对象，它可以返回`uploadify.php`并使用一些 Javascript 魔法。但我仍然不知道从哪个输入字段调用 Uploadify ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:37:06.053

您可以使用 jQuery 设置 uploadify [`.each()`](http://api.jquery.com/jQuery.each/)。这将允许您设置要通过 formData 传递的 id，如下所示：

```
$('.iconupload').each(function() {
    var $iconUpload = $(this);

    $iconUpload.uploadify({
        'swf'            : '<?php echo SUBFOLDER; ?>/swf/uploadify.swf',
        'uploader'       : '<?php echo SUBFOLDER; ?>/includes/uploadify.php',
        'formData'       : {'folder' : '<?php echo IMG_UPLOAD_ICONS; ?>', 'id' : '<?php echo $_SESSION['ID']; ?>', 'type' : 'icon', 'uploadId': $iconUpload.attr("id")},
        'multi'          : false,
        'auto'           : true,
        'removeCompleted': false,
        'queueSizeLimit' : 1,
        'simUploadLimit' : 1,
        'fileTypeExts'       : '*.jpg; *.jpeg; *.png; *.gif',
        'fileTypeDesc'       : 'JPG Image Files (*.jpg); JPEG Image Files (*.jpeg); PNG Image Files (*.png), GIF (*.gif)',
        'onUploadError'  : function(file, errorCode, errorMsg, errorString) {
             alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
        },
        'onUploadSuccess': function(file, data, response) {
            //alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
        }
    }
}); 
```

如果您不想将数据保存在uploadify.php 中，可以这样保存`onUploadSuccess`：

```
'onUploadSuccess': function(file, data, response) {
    saveIconData($(iconUpload.attr("id"), file.name);       
}

function saveIconData(id, fileName) {
    // Save via ajax
} 
```

要通过 ajax 保存数据，可以使用 jQuery 的[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)方法。您将像这样设置 ajax 调用：

```
$.ajax({
    url: "urlToPhpFile.php",
    data: { iconID: value, iconFileName: value },
    success: function(result) {
        // do something on success of save
    }
}); 
```

# python - 自动使类可散列

> ID：12512511
> 
> 赞同：4
> 
> 时间：2012-09-20T12:24:29.790
> 
> 标签：python, attributes, python-3.x, hashable

有几种标准方法可以使类可散列，例如（借用[SO](https://stackoverflow.com/questions/2909106/python-whats-a-correct-and-good-way-to-implement-hash/2909119#2909119)）：

```
# assume X has 2 attributes: attr_a and attr_b
class X:
  def __key(self):
    return (self.attr_a, self.attr_b)

  def __eq__(x, y):
    return isinstance(y, x.__class__) and x.__key() == y.__key()

  def __hash__(self):
    return hash(self.__key()) 
```

现在假设我有很多类要设为可散列。它们都是不可变的，具有不可变的属性，并且批量散列所有这些属性是可以接受的（对于具有太多属性的类，我们只想散列几个足以避免大多数冲突的属性）。我可以避免`__key()`为每个班级手动编写方法吗？

`__key()`为它们创建一个定义,`__eq__`和的基类是个好主意`__hash__`吗？特别是，我不确定找到所有应该进入的实例属性`__hash__`是否可行。我知道这[通常是不可能](https://stackoverflow.com/a/191029/336527)的，但在这种情况下，我们可以对对象进行更多假设（例如，它是不可变的 -`__init__`完成后，它的属性都是可散列的，等等）。

（如果继承层次结构不起作用，也许装饰器会起作用？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:30:27.317

实例将其属性存储在`self.__dict__`：

```
>>> class Foo(object):
...     def __init__(self, foo='bar', spam='eggs'):
...         self.foo = foo
...         self.spam = spam
... 
>>> f = Foo()
>>> f.__dict__
{'foo': 'bar', 'spam': 'eggs'} 
```

如果您不在实例上存储任何方法，则默认值`.__key()`可能是：

```
def __key(self):
    return tuple(v for k, v in sorted(self.__dict__.items())) 
```

我们按属性名称对项目进行排序；该`tuple()`调用确保我们返回一个适合该`hash()`调用的不可变序列。

对于更复杂的设置，您必须测试`values()`（跳过函数等）返回的类型，或者使用特定的属性模式或重新调整用途`__slots__`以列出您可以使用的适当属性。

与您的`__hash__`和`__eq__`方法一起，这将为您的所有不可变类创建一个很好的基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:31:12.700

如果您假设属性的约定，则可以这样做。在您的示例中，这将非常简单，因为您的属性以“attr_”开头-因此您可以将 __key 方法编写为：

```
def __key(self):
    return tuple (getattr(self, attr) for attr in self.__dict__ if attr.startswith("attr_") ) 
```

如您所见 - 您可以找到的任何用于生成器表达式的过滤条件的测试都将满足您的需求。

我可以给你的一个建议是让你的类使用 Python 的`__slots__` 特性：这不仅可以让你的属性名称更容易找到，还可以让你的不可变对象更高效地使用并且占用更少的内存。

```
class X:
    __slots__ = ("a", "b", "c")
    def __key(self):
        return tuple (getattr(self, attr) for attr in self.__class__.__slots__ ) 
```

**编辑** 回答OP的第一条评论：

当然，这适用于继承。如果您将始终为它们使用所有对象的属性，则不需要表达式的“if”部分 - 将函数编写为`_key`（而不是在`__key`内部为每个类创建唯一名称）在顶部的类上您的层次结构，它将适用于您的所有类。

# mysql - MySQL 只计算新记录

> ID：12512512
> 
> 赞同：4
> 
> 时间：2012-09-20T12:24:31.983
> 
> 标签：mysql, sql, select, count

如何编写一个 MySQL 查询来完成这个任务？

**表：**作家

```
w_id    w_name
---------------
  1     Michael
  2     Samantha
  3     John
--------------- 
```

**表：**文章

```
a_id   w_id   timestamp   a_name
----------------------------------------
  1      1        1       PHP programming
  2      3        3       Other programming languages
  3      3        5       Another article
  4      2       15       Web design
  5      1       20       MySQL
---------------------------------------- 
```

只需要**计算**那些发表**第一篇文章**不早于**5的****作者**。*（只统计至少发表过一篇文章的作者）*

 *****在此示例中，结果将是：**1** *（一位作家 - Samantha）*

可以[在此 SQLFiddle中测试 SQL 代码](http://sqlfiddle.com/#!2/0e90f)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:33:04.277

You need a double SELECT.

First you fetch `w_id`, together with timestamp of first article:

```
SELECT w_id, MIN(timestamp) as publish FROM articles GROUP BY w_id 
```

Then you request that `publish` is not earlier than 5:

```
SELECT w_id, MIN(timestamp) as publish
    FROM articles
    GROUP BY w_id
    HAVING publish >= 5; 
```

Then you join that "table" with `writers` to get the name, if you want.

But if you only want the count, you do not need the `writers` table at all:

```
 SELECT COUNT(*) AS answer FROM
    ( SELECT w_id, MIN(timestamp) AS publish
        FROM articles
        GROUP BY w_id
        HAVING publish >= 5
) AS counter; 
```

Test: [http://sqlfiddle.com/#!2/0e90f/30/0](http://sqlfiddle.com/#!2/0e90f/30/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:31:09.903

```
select 
  w_name
from writers w
join articles a on w.w_id = a.w_id
group by w.w_id,w.w_name
having min(timestamp)>=5 
```

用小提琴.. [http://sqlfiddle.com/#!2/0e90f/11/0](http://sqlfiddle.com/#!2/0e90f/11/0)

或数..

```
select 
 count(w_name)
from writers w
join articles a on w.w_id = a.w_id
group by w.w_id,w.w_name
having min(timestamp)>=5 
```

用小提琴.. [http://sqlfiddle.com/#!2/0e90f/27/0](http://sqlfiddle.com/#!2/0e90f/27/0)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T12:32:58.443

You need to have a subquery to get the writer's minimum `timestamp`.The result will then be counted sinceyou cannot aggregate a column that is already aggregated (*eg. COUNT(MIN(columnName))*)

```
SELECT COUNT(*) totalWriters
FROM
(
  SELECT  a.w_id, MIN(b.`timestamp`)
  FROM    writers a
          INNER JOIN articles b
            ON a.w_id = b.w_id
  GROUP BY a.w_id
  HAVING MIN(b.`timestamp`) >= 5
) a 
```

# [SQLFiddle Demo](http://sqlfiddle.com/#!2/0e90f/24)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T13:11:52.593

It's easy, here is the query:

```
SELECT count(DISTINCT w_id)
FROM articles
WHERE TIMESTAMP>=5 
AND w_id NOT IN (SELECT w_id FROM articles WHERE TIMESTAMP<5); 
```

See [SQL Fiddle](http://sqlfiddle.com/#!2/19df9/6)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T12:33:32.793

An easy solution:

```
SELECT COUNT(DISTINCT w_id)
FROM writers
WHERE w_id NOT IN
(SELECT w_id from articles
 WHERE timestamp <=5) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-20T12:36:44.677

```
select count(*)
from (
    select w_id, min(`timestamp`) as `timestamp`
    from articles
    group by w_id
) s
where `timestamp` >= 5 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-20T12:45:39.270

```
select count(1) from (
     select w.w_id, count(a.timestamp) cnt from writers w
     inner join articles a on a.w_id = w.w_id
     group by w.w_id
  ) t
inner join articles art on art.w_id = t.w_id
where t.cnt = 1 and art.timestamp > 5 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-20T12:56:07.130

Try this, i have just tested..

```
select*   from ( select tblw.w_id, count(tblart.timestamp) count from writers tblw  inner join articles tblart on tblart.w_id = tblw.w_id   group by tblw.w_id ) temp inner join articles art on art.w_id = temp .w_id where temp .count = 1 and art.timestamp > 5 
```*****

# cordova - 您如何获得通过 PhoneGap 捕获的视频的持续时间？

> ID：12512513
> 
> 赞同：1
> 
> 时间：2012-09-20T12:24:35.427
> 
> 标签：cordova

在上传到服务器之前，我需要知道通过 PhoneGap 捕获的视频的持续时间。[MediaFile.getFormatData](http://docs.phonegap.com/en/2.0.0/cordova_media_capture_capture.md.html#MediaFile.getFormatData)的文档有点含糊，似乎不起作用。

我已经能够成功捕获和上传视频，所以所有这些都可以正常工作，只是持续时间部分不行。

我究竟做错了什么？

在装有 iOS 5.1.1 的 iPhone 4 上运行

```
navigator.device.capture.captureVideo(function(mediaFile) {
        if(mediaFiles.length == 1) {
            $('#video_url').val(mediaFiles[0]);
            var profileVideo = document.getElementById('profile-video');
            profileVideo.src = mediaFiles[0].fullPath;

            var formatData;
            mediaFiles[0].getFormatData(function(data) {
                formatData = data;
            });

            if(formatData.duration > 30) {
                $('#infoMessage').html("Your video is longer than the allowed 30 seconds. Please record a new video. You can trim your video after it's been recorded.")
            }
        }
    }, function(error) {
    }, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:41:56.843

您正在尝试以同步方式调用异步代码。试试这样：

```
mediaFiles[0].getFormatData(function(data) {
    if(data.duration > 30) {
        $('#infoMessage').html("Your video is longer than the allowed 30 seconds. Please record a new video. You can trim your video after it's been recorded.")
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:14:10.517

尝试这个：

```
navigator.device.capture.captureVideo(function(mediaFiles) {
            mediaFiles[0].getFormatData(function(data) {
                if(data.duration > 30) {
                    alert('Your video is longer than the allowed 30 seconds.');
                }
            });
    }, function(error) { alert('An error occured'); }, null); 
```

# javascript - 从 javascript GMT 日期格式获取 h:i 格式的时间

> ID：12512516
> 
> 赞同：2
> 
> 时间：2012-09-20T12:24:54.290
> 
> 标签：javascript

我正在使用 JavaScript。我有以下格式的日期：

```
Tue Sep 18 2012 01:30:00 GMT+0530 (India Standard Time) 
```

我想以下面的格式显示它

```
'Y-m-d h:i:s' 
```

或者

如何仅从`(Tue Sep 18 2012 00:00:00 GMT+0530 (India Standard Time))`JavaScript 中的这种格式获取时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:57:24.703

如果你有一个`Date`对象，你可以这样做：

```
var timeString = myDate.getFullYear() + '-' + (myDate.getMonth()+1) + '-'
+ myDate.getDate() + ' ' + myDate.getHours() + ':' + myDate.getMinutes() + ':' 
+ myDate.getSeconds(); 
```

如果你之前有`String`这样做过：

```
var myDate = new Date('Tue Sep 18 2012 01:30:00 GMT+0530 (India Standard Time) '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:03:00.280

有几个很好的库可以帮助您处理日期（例如[date.js](http://momentjs.com/)、[moment.js](https://github.com/datejs/Datejs)）。

由于您在其中一条评论中提到您不想包含其他 js 文件，因此还有较小的版本（例如[dateFormat](http://stevenlevithan.com/assets/misc/date.format.js)），您可以轻松地复制粘贴或适应您当前的代码。

如果您真的想使用自己的日期格式化程序而不是使用现有的格式化程序，您可以使用 Date 对象提供的方法简单地构建自己的字符串。

这是一个简单的例子：

```
function getMyDateFormat(date) {
    var d = date ? new Date(date) : new Date;
    var dt = [d.getFullYear(), d.getMonth(), d.getDay()].join("-"),
        tm = [d.getHours(), d.getMinutes(), d.getSeconds()].join(":");
    return dt + " " + tm;
} 
```

示例用法：

```
str = getMyDateFormat();  // default (current datetime)
// 2012-8-4 14:3:22

str = getMyDateFormat("Tue Sep 18 2012 01:30:00 GMT+0530 (India Standard Time"); 
// output (in my locale): 2012-8-1 21:0:0 

var now = new Date();
str = getMyDateFormat(now);  // using a date object
// output: 2012-8-4 14:3:22 
```

演示：http: [//jsfiddle.net/6ByFN/](http://jsfiddle.net/6ByFN/)

这是一个用 0 填充单个数字值的变体：http: [//jsfiddle.net/6ByFN/1/](http://jsfiddle.net/6ByFN/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:27:09.653

Moment.js 是一个很好的 JS 库，可以帮助解析和格式化日期。

[http://momentjs.com/](http://momentjs.com/)

# visual-studio-2010 - 防止 ServiceReferences.ClientConfig 越来越大

> ID：12512523
> 
> 赞同：0
> 
> 时间：2012-09-20T12:25:26.347
> 
> 标签：visual-studio-2010, web-services, silverlight, silverlight-5.0, service-reference

我们经常不得不重新构建我们的服务引用，并且我们注意到旧的绑定/端点永远不会被删除。它只添加新绑定并为其命名`Custombinding_IOurService153`。

我们正在使用 4 台 PC 进行这个项目。每个人都有自己从配置文件中获取的 URL。文件越来越大！

我们如何防止这种情况发生？是否有任何隐藏选项仅将当前绑定/端点写入文件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:22:51.637

我建议确保每个开发人员的环境都是相似的，并且您引用的服务托管在一个不会更改的 URL 中。

如果您的服务在本地项目中并且托管在 VS 开发服务器中，请确保为它分配特定端口，而不是让服务器自动分配端口给它。然后每个开发者都会在同一个 URL 引用服务，例如：`http://localhost:33100/OurService.svc`.

如果 URL 和其他参数保持不变，Visual Studio 将不会在您更新服务引用时向 ServiceReferences.ClientConfig 添加新的终结点配置。

# ios5 - iOS 5 SDK - 将 plist 数据推送到 DetailViewController（segue 问题）

> ID：12512529
> 
> 赞同：1
> 
> 时间：2012-09-20T12:26:02.007
> 
> 标签：ios5, plist, segue

当用户选择“LocationsViewController”中的单元格时，我正在尝试推送一些 plist 数据，这些数据已经将我的“LocationsViewController”（UITableViewController）填充到我的“LocationsDetailViewController”（带有 UILabel 的 UIViewController）。

在“LocationsViewController”中，字符串被完美地过滤到表格中，没有错误。但我似乎无法在“LocationsDetailViewController”中更改标签，而且我认为我在 prepareForSegue 方法的某个地方出错了。

有人能在我的代码中发现错误吗？

非常感谢任何帮助或建议。谢谢！！

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"DetailViewControllerSeque"])
    {   LocationsDetailViewController *locationsDetailViewController = [segue destinationViewController];
        NSString *path = [[NSBundle mainBundle] bundlePath];
        NSString *finalPath = [path stringByAppendingPathComponent:@"locationslist3.plist"];
        NSArray *tempArray = [finalPath valueForKey:@"countries"];
        NSString *descriptionString = [tempArray valueForKey:@"countries"];
        locationsDetailViewController.detailDescriptionLabel.text = descriptionString;
    }
}

@end 
```

# c# - ListView 分组和选择

> ID：12512531
> 
> 赞同：3
> 
> 时间：2012-09-20T12:26:07.287
> 
> 标签：c#, wpf

我有一个绑定到对象集合的 ListView。根据用户的选择，对象按其属性分组。

例如，我有水果的基本集合（品种、数量、产地）：

```
Banana, 10, Africa
Apple, 2, France
Pear, 30, France
Banana, 40, Africa 
```

变成，按水果种类分组：

```
Banana
    Banana, 10, Africa
    Banana, 40, Africa

Apple
    Apple, 2, France

Pear
    Pear, 30, France 
```

对于每个对象和组标题，我在 XAML 中添加了一个复选框以供选择。使用组标题中的复选框，我想选择整个组。对于上面的示例，如果我检查标题“香蕉”，则检查同一组中的以下 2 行。

这是我的 ListView 的 XAML：

```
<ListView Name="MyCollectionView" ItemsSource="{Binding}" SelectionMode="Multiple">
  <ListView.GroupStyle>
    <GroupStyle>
      <GroupStyle.HeaderTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <CheckBox Name="SelectAllGroup" />
            <TextBlock Text="{Binding Name}" Margin="10,0,0,0" />
          </StackPanel>
        </DataTemplate>
      </GroupStyle.HeaderTemplate>
    </GroupStyle>
  </ListView.GroupStyle>

  <ListView.View>
    <GridView>
      <GridViewColumn Width="Auto" Header="Sélection" >
       <GridViewColumn.CellTemplate>
         <DataTemplate>
           <CheckBox Margin="0" VerticalAlignment="Center" IsChecked="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}, Path=IsSelected}"/>
         </DataTemplate>
       </GridViewColumn.CellTemplate>
     </GridViewColumn>
     <GridViewColumn Width="Auto" Header="N°" DisplayMemberBinding="{Binding Path=Numero}"/>
     <GridViewColumn Width="Auto" Header="Nom" DisplayMemberBinding="{Binding Path=Nom}" />
     <GridViewColumn Width="Auto" Header="Responsable" DisplayMemberBinding="{Binding Path=Responsable}" />
     <GridViewColumn Width="Auto" Header="Détail" DisplayMemberBinding="{Binding Path=Detail}" />
     <GridViewColumn Width="Auto" Header="Calibre" DisplayMemberBinding="{Binding Path=Calibre}" />
    </GridView>
  </ListView.View>
</ListView> 
```

我怎样才能做到这一点 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:06:06.477

我做了一些与此非常相似的事情，将命令放在标题中的复选框上，然后在命令方法中，如下所示：

```
private void UpdateSelectedFruitGroup()
{
    MyFruitCollection.Where(f => f.Variety == "Banana").ForEach(f => f.IsSelected = true);
} 
```

为了执行 ForEach，您需要将此 Extension 放入静态类中：

```
 public static void ForEach<T>(this IEnumerable<T> enumerable, Action<T> action)
    {
        if (enumerable == null)
            throw new ArgumentNullException("enumerable");

        if (action == null)
            throw new ArgumentNullException("action");

        foreach (var e in enumerable)
        {
            action(e);
        }
    } 
```

基本上它只是遍历集合中的每个项目并对其执行操作。在这种情况下，它设置 IsSelected 属性。

# asp.net - 除了使用 Frames 将多个 aspx 文件组合到一个页面中之外，还有其他方法吗？

> ID：12512532
> 
> 赞同：1
> 
> 时间：2012-09-20T12:26:13.813
> 
> 标签：asp.net, html, frameset

我正在重写一个包含大约 10 个单独框架的站点，每个框架显示一堆单独的 aspx 文件。

是否有现代等效于使用框架来组合多个 aspx 文件，而无需重写构成框架内容的所有单个 aspx 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:44:01.623

将现有的 aspx 页面变成（用户）控件怎么样？这将允许您将它们（任何/全部，一个或任何数字）动态添加到单个页面，或者只是静态地（全部十个）在标记中这样做。

您保留创建 10 个不同页面的任何理由，同时真正希望以某种形式/数字将它们一起显示但保持分离（在其他/较旧的平台中，这类似于`include`文件）

[将 aspx 转换为 ascx](http://msdn.microsoft.com/en-us/library/aa728784%28v=vs.71%29.aspx)的工作量并不大。

根据您接下来的需要，您可能需要做更多的工作，如果您希望每个控件功能不必刷新整个页面（如在框架集中），可能需要使用客户端技术 (AJAX)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:34:33.887

ASP.NET 母版页可能正是您要寻找的。

# c# - 以编程方式使 MSTest 中的测试超时

> ID：12512534
> 
> 赞同：7
> 
> 时间：2012-09-20T12:26:28.413
> 
> 标签：c#, tfs, mstest

我有一种情况，我正在使用单元测试来执行执行测试的外部工具。我可以从工具的退出代码中确定测试是否通过、失败或超时。

有什么方法可以使单元测试失败，它将测试结果设置为超时而不是失败？

我尝试抛出 TimeoutException，但这与使用 Assert 的结果相同。

**编辑：** 我们将单元测试与 TFS 中的测试用例联系起来。在 Microsoft 测试中心中，测试运行中的测试可以有多种状态。其中之一是超时状态。我试图让我的测试失败，以便它正确地显示在这种状态下，并且不会与失败的测试用例混在一起。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-06T18:59:33.577

您可以使用在 Test 属性中添加 Timeout(millisecond) 来设置每个测试的超时限制...

```
[TestMethod, Timeout(2000)] 
```

如果执行时间超过 2 秒，测试将失败。

谢谢马尔科

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:05:20.047

它不是真正的“以编程方式”，但您可以：

*   在 Visual Studio 中[设置运行测试的时间限制](http://msdn.microsoft.com/en-us/library/ms243175%28v=vs.100%29.aspx)
*   如果您从*Microsoft 测试中心*或使用*tcm.exe运行测试，请使用 Microsoft 测试**中心*中的测试设置（请参阅[使用 Tcm 从命令行运行测试](http://msdn.microsoft.com/en-us/library/dd465192)）

     **![](../Images/81406ffd59e62892e7b1dbecdfeaa908.png)** 

 **如果它识别出外部工具返回超时退出代码（这将是“程序化”部分），则您的测试应该等待。

所以测试框架会为你设置测试结果为“超时”。

我想，尤其是如果您的测试是自动化的，那将是一个合适的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:28:24.120

在单元测试中，您使用 2 种颜色进行处理：绿色和红色。没有*超时*颜色。

所以我想如果你的外部工具超时，你可以手动失败测试：

```
Assert.Fail("External tool used to do this test timed out"); 
```

检测您的外部工具是否超时的方式当然取决于您使用的外部工具以及您从单元测试中调用它的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:32:39.287

Your approach throwing a `TimeoutException` seems to be a good choice. However the `TimeoutException` doesn't derive from [UnitTestAssertException](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.unittestassertexception%28v=vs.100%29.aspx).

You may want to do one of the following things:

1.  Throw an [AssertFailedException](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assertfailedexception%28v=vs.100%29.aspx) indicating the reason as string.

2.  Sub-class the [UnitTestAssertException](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.unittestassertexception%28v=vs.100%29.aspx) with a custom `UnitTestTimeOutException` and throw that.

3.  Use `Assert.Fail` as @Darin-Dimitrov [suggested](https://stackoverflow.com/a/12512554/27083).**

# wpf - wpf 上的 Caliburn.Micro 和 MEF

> ID：12512535
> 
> 赞同：13
> 
> 时间：2012-09-20T12:26:56.737
> 
> 标签：wpf, mef, caliburn.micro

我只是在学习 WPF 和 Caliburn.Micro。我正在关注此处提供的代码： [http ://caliburnmicro.codeplex.com/wikipage?title=Customizing%20The%20Bootstrapper&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=Customizing%20The%20Bootstrapper&referringTitle=Documentation)

显然，此代码适用于 Silverlight，但我的项目是 WPF，因此我收到未定义 CompositionHost 的错误。

文档说我需要直接在 wpf 中初始化容器，但是没有文档说明如何。如何直接初始化容器？

编辑 1 引导程序在文档中是这样的：

```
 container = CompositionHost.Initialize(
        new AggregateCatalog(
            AssemblySource.Instance.Select(x => new AssemblyCatalog(x)).OfType<ComposablePartCatalog>()
            )
        );

    var batch = new CompositionBatch();

    batch.AddExportedValue<IWindowManager>(new WindowManager());
    batch.AddExportedValue<IEventAggregator>(new EventAggregator());
    batch.AddExportedValue(container);

    container.Compose(batch); 
```

我将其转换为：

```
 var catalog =
            new AggregateCatalog(
                AssemblySource.Instance.Select(x => new AssemblyCatalog(x)).OfType<ComposablePartCatalog>());

        this.container = new CompositionContainer(catalog);
        var batch = new CompositionBatch();

        batch.AddExportedValue<IWindowManager>(new WindowManager());
        batch.AddExportedValue<IEventAggregator>(new EventAggregator());
        batch.AddExportedValue(this.container);

        this.container.Compose(batch); 
```

但是当我运行应用程序时，我收到 MEF 找不到 IShell 实现的错误

```
 Could not locate any instances of contract IShell. 
```

我相信我对 MEF 的初始化不正确。你能帮我修一下吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T15:16:02.967

在 WPF 中，您需要使用显式`CompositionContainer`构造函数。在我的 WPF 和 Silverlight 共享引导程序中，我使用了以下`#if`-`#else`指令：

```
#if SILVERLIGHT
    container = CompositionHost.Initialize(catalog);
#else
    container = new CompositionContainer(catalog); ;
#endif 
```

**编辑**

引导程序将识别实现`IShell`接口的组件（前提是您的引导程序正在扩展`Bootstrapper<IShell>`基类），因此您需要实现一个装饰有 MEF 导出的类`IShell`。

通常这将是您`ShellViewModel`的，声明如下所示：

```
[Export(typeof(IShell))]
public class ShellViewModel : PropertyChangedBase, IShell
{
   ...
} 
```

[您可以在此处](http://caliburnmicro.codeplex.com/wikipage?title=Customizing%20The%20Bootstrapper&referringTitle=Documentation)阅读有关引导程序设置和自定义的更多信息。

# javascript - javascript: onload 和 onerror 一起调用

> ID：12512539
> 
> 赞同：3
> 
> 时间：2012-09-20T12:27:14.823
> 
> 标签：javascript, scope, d3.js, onload, onerror

我是 JavaScript 新手，因此对变量范围感到困惑......我正在尝试加载图像，并在它不存在时将其替换为另一个 URL。我必须用纯 JavaScript 来做。

在这里，我得到了两个非常相似的版本，但它们的表现不同。唯一的共同点是：它们不起作用。第 3 版需要刷新，不能在 IE 下运行。d是带有number属性的对象，没有问题。

这是他们的共同点

```
.attr("xlink:href", function (d) {
  var img = new Image(); 
```

这里是版本 1：两者`onload`都`onerror`被调用。然而 d 收到了 src，不幸的是它总是 generic.jpg。

```
 function onLoadHandler() {
     d.src = "http://.../peopleimages/" + d.num + ".jpg";
     alert(d.name + " onload called");
  }
  function onErrorHandler() {
     d.src = "http://.../images/generic.jpg";
     alert(d.name + " onerror called");
  }
  img.onload = onLoadHandler();
  img.onerror = onErrorHandler();
  img.src = "http://.../peopleimages/" + d.num + ".jpg";
  return d.src;
  } 
```

这里是版本 2：根据图像的存在，调用 onload 或 onerror。但是警报时 d.src 的值是未定义的。

```
 img.onload = function () {
     alert(d.name + " : loaded");
     d.src = "http://.../peopleimages/" + d.num + ".jpg";
  }
  img.onerror = function () {
     alert(d.name + " : failed");
     d.src = "http://.../images/generic.jpg";
  }

  img.src = "http://.../peopleimages/" + d.num + ".jpg";
  alert(d.src);//undefined
  return d.src;
  } 
```

这里是第 3 版：它可以工作，但不是第一次。我必须刷新才能正确获取图像。也许它会在图像完全加载之前返回。

```
 img.src = "http://.../peopleimages/" + d.num + ".jpg";
  return img.complete ? "http://.../peopleimages/" + d.num + ".jpg" : "http://.../images/generic.jpg";
  } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T12:29:37.380

您正在调用函数，而不是分配！

```
img.onload = onLoadHandler();
img.onerror = onErrorHandler(); 
```

需要是

```
img.onload = onLoadHandler;
img.onerror = onErrorHandler; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T09:57:31.893

第二个示例的问题是，在评估了其他代码之后，图像加载时会触发图像回调。我真的不确定您的代码完成了什么，但尝试这样的事情。

```
 img.onload = function () {
     alert(d.name + " : loaded");
     d.src = "http://.../peopleimages/" + d.num + ".jpg";
     return doSomething(this, d);
  }
  img.onerror = function () {
     alert(d.name + " : failed");
     d.src = "http://.../images/generic.jpg";
     return doSomething(this, d);
  }

  function doSomething(img, d) {
     img.src = "http://.../peopleimages/" + d.num + ".jpg";
     alert(d.src);
     return d.src;
  }; 
```

# scala - Scala：重载 (Seq[T]) 和 (T*)

> ID：12512540
> 
> 赞同：5
> 
> 时间：2012-09-20T12:27:17.533
> 
> 标签：scala, types, overloading, type-erasure

我有一个案例类，以 Seq[T] 作为参数：

```
case class MyClass(value: Seq[T]) 
```

我现在希望能够写作

```
MyClass(t1,t2,t3) 
```

所以我定义

```
object MyClass {
    def apply(value: T*) = new MyClass(value.toSeq)
} 
```

它不起作用，因为案例类定义了

```
object MyClass {
    def apply(value: Seq[T])
} 
```

并且 Seq[T] 和 T* 在擦除后具有相同的类型，所以我不能重载它们。

但我想允许两种访问方式。两种方式都应该允许：

```
MyClass(t1,t2,t3)
MyClass(some_seq_of_T) 
```

由于 Seq[T] 和 T* 几乎是同一类型（至少在擦除之后；并且在具有参数 T* 的函数内部变为 Seq[T]），我认为应该有一种方法可以允许两种方式调用它.

在那儿？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T12:48:20.937

你可以稍微作弊，像这样定义你的同伴：

```
case class MyClass[T](value: Seq[T])

object MyClass {
  def apply[T](first: T, theRest: T*) = new MyClass(first :: theRest.toList)
  def apply[T]() = new MyClass[T](Nil)
} 
```

只要至少有一个参数，第一个就`apply`处理。`MyClass(1,2,3)`scond`apply`处理 0 参数的情况。它们与常规构造函数不冲突。

这样您就可以编写`MyClass(Seq(1,2,3))`,`MyClass(1,2,3)`和`MyClass()`. 请注意，对于空的，您必须告诉它要返回的类型，否则它将假定为`MyClass[Nothing]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:01:09.437

这是没有案例类的解决方案：

```
scala> class A[T] (ts: Seq[T]) { def this(ts: T*)(implicit m: Manifest[T]) = this(ts) }
defined class A

scala> new A(1)
res0: A[Int] = A@2ce62a39

scala> new A(Seq(1))
res1: A[Seq[Int]] = A@68634baf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:37:15.160

不能有两个同名的方法，一个接受一个类型的参数，一个接受一个`Seq[T]`参数`T*`。编译器如何知道一个调用是否像

```
val s = Seq(1,2,3) 
foo(s) 
```

应该调用第一种方法或第二种方法（T = Int）或第二种方法（T = Seq[Int]）？

# python - 跨文件一致性检查

> ID：12512541
> 
> 赞同：0
> 
> 时间：2012-09-20T12:27:18.910
> 
> 标签：python, sed, awk, grep

我在一个文件夹中有几个逗号分隔的文件。线条看起来像这样...

```
1,2,3,4,5
6,7,8
9,10
11,12,13,14,15 
```

所有文件都应该有准确的 5 列。但是有一些文件其中一行或所有行少于 5，如上所示。我怎么知道这些文件的名称？

如果所有行都正好有 4 个逗号，那么就没有问题，并且这些文件被认为是好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:36:50.467

这条线 (find + awk) 对你有用吗？

```
 find . -name *.txt |xargs -I{} awk -F',' 'NF!=5{print FILENAME;exit;}' {} 
```

假设您的文件具有扩展名“txt”

**更新**

OP想要行号：

```
kent$  head *.txt
==> 4.txt <==
1,2,3,4,5
6,7,8
9,10
11,12,13,14,15

==> one.txt <==
1,2,3,4,5
6,7,8
9,10
11,12,13,14,15

==> three.txt <==
11,12,13,14,15

==> two.txt <==
11,12,13,14,15

kent$  find . -name *.txt |xargs -I{} awk -F',' 'NF!=5{print FILENAME,NR}' {}
./one.txt 2
./one.txt 3
./4.txt 2
./4.txt 3 
```

**再次更新**

OP，您应该更清楚地描述您的问题。

所以你想要总行数（总和）：

```
kent$  find . -name *.txt |xargs -I{} awk -F',' 'NF!=5{a[FILENAME]++;} END{if(a[FILENAME]) print FILENAME, a[FILENAME]}' {}
./one.txt 2
./4.txt 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:49:04.060

类似的东西（**注意这检查有 5 列 - 不是有 4`,`的**）：

```
import gzip
from glob import iglob
import csv

for filename in iglob('*.gz'): # or get filenames from wherever
    with gzip.open(filename) as fin:
        if not all(len(row) == 5 for row in csv.reader(fin)):
            print filename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:32:01.087

In Python:

```
def fileIsGood(filename):
    for line in open(filename):
        if len(line.split(",")) != 5:
            return False
    return True

fileNames = ["foo.txt", "bar.bat", "baz.exe"]
for fileName in fileNames:
    if not fileIsGood(fileName):
        print fileName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:35:47.497

我会`count`用来计算`','`每一行的：

```
import gzip
def is_good(fname):
    with gzip.open(fname,'r') as f:
        return all( line.count(',') == 4 for line in f )

#somehow get filenames.  Here I'll assume glob
good_files = [ fname for fname in glob.glob('*.gz') if is_good(fname) ]
# or if you like functional programming:
#good_files = filter(is_good, glob.glob('*.gz')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:36:42.980

```
import os

def check_file(name):
    with open(name, 'r') as f:
        while line = f.readline():
            if line.count(',') != 4:
                return False
    return True

def check(path):
    return [filename for filename in os.listdir(path) if not check_file(filename)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T12:37:20.040

这个扩展的 grep 命令应该可以工作：

```
grep -vEl '^[^,]+(,[^,]+){4}$' 
```

如果文件经过 gzip 压缩，您可以使用 zgrep：

```
zgrep -vEl '^[^,]+(,[^,]+){4}$' 
```

# bash - 使用 expect 自动生成 ssh 密钥对

> ID：12512545
> 
> 赞同：0
> 
> 时间：2012-09-20T12:27:37.997
> 
> 标签：bash, automation, expect

我想自动化命令`ssh-keygen -t rsa`。独特之处在于该命令会在不同的条件下打印出不同的文本。例如，如果是第一次，它会输出`enter passphrase`and `enter passphrase again`。否则，它将提示`Overwrite (y/n):` 。如何在`expect`.

我试过使用模式动作对，比如

> 期望“输入密码” {发送“\r”} \
> 
> ```
>  "Overwrite (y/n): " {send "n\r"} 
> ```

但是，它一次只处理一个提示；我该如何处理提示`enter passphrase again`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:46:31.213

使用`exp_continue`可以帮助您：

```
expect {
    "Overwrite (y/n)?" { send "n\r" ; exp_coninue }
    "Enter passphrase" { send "\r" ; exp_coninue }
    "passphrase again:" { send "\r" }
} 
```

# java - 使用 JSTL 标签将布尔值设置为变量？

> ID：12512547
> 
> 赞同：41
> 
> 时间：2012-09-20T12:27:56.987
> 
> 标签：java, jsp, jstl

我正在使用 JSTL 标签。我有以下代码。

```
<c:set var="refreshSent" value="false"/> 
```

现在变量**refreshSent**有布尔值还是字符串？

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-20T12:35:04.597

这将是一个布尔值。您可以通过比较来检查它

```
<c:if test="${refreshSent eq false}"> 
```

和

```
<c:if test="${refreshSent eq 'false'}"> 
```

第二个是字符串比较。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-01-08T18:37:48.520

它是一个`String`.

以下 JSP 代码：

```
<c:set var="refreshSent" value="false" />
<c:set var="refreshSent2" value="${false}" />
<c:set var="refreshSent3" value="${'false'}" />

<div>
<div>${refreshSent} : ${refreshSent['class']}</div>
<div>${refreshSent2} : ${refreshSent2['class']}</div>
<div>${refreshSent3} : ${refreshSent3['class']}</div>
</div> 
```

在浏览器中输出以下内容：

```
false : class java.lang.String
false : class java.lang.Boolean
false : class java.lang.String 
```

但是，如果您在预期为`refreshSent`a 的 EL 表达式中使用该变量`boolean`，它将`boolean`通过调用转换为 a `Boolean.valueOf(String)`（根据[JSP 规范](https://download.oracle.com/otn-pub/jcp/jsp-2.1-fr-spec-oth-JSpec/jsp-2_1-fr-spec-el.pdf?AuthParam=1546930247_27b70ab135973a22fa114e23cfd73260)）。

因此，如果您使用：

```
<c:if test="${refreshSent}"> 
```

属性的值`test`将设置为布尔`false`值。`${refreshSent}`表达式的结果是 a `String`，但由于`test`属性需要 a `boolean`，因此会调用`Boolean.valueOf("false")`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-11T07:49:50.790

我用这个作为布尔值

```
<c:set var="refreshSent" value="${false}"/>
<c:if test="${refreshSent}">
    some code ........
</c:if> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T12:34:32.873

```
<c:set var="refreshSent" value="false"/> 
```

如果表达式的`value`计算结果为`String`; 那么 的值为`var refreshSent`type `String`。

请参阅[http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)以供参考。

在幕后进行了自动类型转换。

见[http://today.java.net/pub/a/today/2003/10/07/jstl1.html](http://today.java.net/pub/a/today/2003/10/07/jstl1.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-04T08:26:29.073

是的，它可以是布尔值和字符串。

```
<c:if test="${refreshSent}">
    your code...
</c:if> 
```

或者你可以像这样使用

```
<c:if test="${refreshSent eq 'false'}">
    your code...
</c:if> 
```

谢谢。

# wpf - 在通过 XamlReader 解析的 UserControl 上设置 Canvas.Left

> ID：12512548
> 
> 赞同：0
> 
> 时间：2012-09-20T12:27:58.460
> 
> 标签：wpf, canvas, user-controls, drag-and-drop, xamlreader

我玩过一点WPF。我想要做的是将自定义控件从模板调色板窗口拖到另一个窗口的画布上，并在那里创建该自定义控件的克隆。这与您在 Visio 中看到的非常相似。

为了从调色板中克隆模板控件，我滥用了 XamlWriter 和 XamlReader 的序列化和反序列化功能。

在我的下拉回调中，我有以下代码：

```
private void drawingCanvas_Drop(object sender, DragEventArgs e)
{
    DrawingShape shape = (DrawingShape)e.Data.GetData(typeof(DrawingShape));
    if (shape != null)
    {
        Canvas target = this.drawingCanvas;
        Point p = e.GetPosition(target);

        string xamlString = System.Windows.Markup.XamlWriter.Save(shape);
        DrawingShape c = (DrawingShape)System.Windows.Markup.XamlReader.Parse(xamlString);

        Canvas.SetLeft(c, p.X - c.Width / 2);
        Canvas.SetTop(c, p.Y - c.Height / 2);
        target.Children.Add(c);

        this.shapesPalette.shapesGallery.ClearValue(ListView.SelectedIndexProperty);
    }
} 
```

我的用户控件如下所示：

```
<UserControl x:Class="MyNamespace.Graphics.DrawingShape"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="60" d:DesignWidth="60">
    <Grid Width="Auto" Height="Auto" >
        <Grid.RowDefinitions>
            <RowDefinition Height="38"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Canvas HorizontalAlignment="Center" Grid.Row="0" Width="38" Height="38" Canvas.Left="0" Canvas.Top="0">
            <Path x:Name="Path" Width="35.8774" Height="31.2047" Canvas.Left="1.0613" Canvas.Top="3.29528" Stretch="Fill" StrokeLineJoin="Round" Stroke="#FF230FD2" Fill="#FF0096FF" Data="F1 M 19,3.79528L 1.5613,34L 36.4387,34L 19,3.79528 Z "/>
        </Canvas>
        <Label x:Name="Label" HorizontalAlignment="Center" Grid.Row="1">MyLabel</Label>
    </Grid>
</UserControl> 
```

但是，`Canvas.SetLeft()`不要`Canvas.SetTop()`做任何事情。克隆始终添加到目标画布的左上角。如果我使用任何其他 WPF-Control 而不是我的用户控件，则此代码可以正常工作。

我想，克隆的用户控件还不是任何视觉层次结构的一部分，存在问题。但是，我想知道 MS 控件在哪些方面做得更好才能使上述代码正常工作。由于我对 WPF 很陌生，所以我不确定我应该寻找什么来修复我的用户控件。非常感谢任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:03:43.887

我已经不再通过`XamlWriter`/进行克隆`XamlReader`（无论如何它仅用于原型设计），现在在强制布局更新后使用`ActualWidth`/ ：`ActualHeight`

```
private void drawingCanvas_Drop(object sender, DragEventArgs e)
{
    DrawingShape templateShape = (DrawingShape)e.Data.GetData(typeof(DrawingShape));
    if (templateShape != null)
    {
        Canvas target = this.drawingCanvas;
        Point p = e.GetPosition(target);

        DrawingShape addedShape = new DrawingShape();
        addedShape.IsDraggingEnabled = true;

        target.Children.Add(addedShape);
        addedShape.UpdateLayout();
        addedShape.RenderTransform = new TranslateTransform(p.X - addedShape.ActualWidth / 2, p.Y - addedShape.ActualHeight / 2);
        this.shapesPalette.shapesGallery.ClearValue(ListView.SelectedIndexProperty);
    }
} 
```

但是，我希望此解决方案可以与 XamlWriter/XamlReader-cloning 一起使用。

# c# - 如何使用 swig 和 C# 处理字符串数组？

> ID：12512549
> 
> 赞同：4
> 
> 时间：2012-09-20T12:27:57.897
> 
> 标签：c#, swig

我的 C++ 类有一个名为`init`：

```
int init(int argc, char **argv) 
```

另外，我有一个回调：

```
void callback(int num, char **str) 
```

我的问题是 Swig 生成了一个奇怪的 class `SWIGTYPE_p_p_char.cs`，并且没有`string[]`像我预期的那样。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:27:14.763

SWIG 在 arrays_csharp.i 中有一些用于将数组传递给函数的类型映射。然而，没有一个，`char *INPUT[]`但我们可以调整类型映射来做你想做的事：

```
%module test

%include <arrays_csharp.i>

CSHARP_ARRAYS(char *, string)
%typemap(imtype, inattributes="[In, MarshalAs(UnmanagedType.LPArray, SizeParamIndex=0, ArraySubType=UnmanagedType.LPStr)]") char *INPUT[] "string[]"

%apply char *INPUT[]  { char **argv }

int foo(int argc, char **argv); 
```

这使用 SWIG 宏 CSHARP_ARRAYS 为`string`s 数组生成 typedef，然后替换 imtype，以便我们可以提供自己的编组信息。

我认为这应该足够了。如果您愿意，可以使用以下命令向生成的模块添加重载：

```
%pragma(csharp) modulecode = %{
  public static int foo(string[] argv) {
    return foo(argv.Length, argv);
  }
%} 
```

注意：仔细测试一下——我这辈子从来没有写过 C# 程序（但写过很多 SWIG+JNI）。我[在 MSDN 论坛上找到了编组信息，](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/1d743627-6c4b-4eaf-9008-500f25e58617)但除了检查 SWIG 的输出是否正常之外，还没有测试任何这些信息。这似乎与[这个答案](https://stackoverflow.com/a/7644330/168175)相匹配，加上[`SizeParamIndex`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute.sizeparamindex%28v=vs.80%29.aspx).

# c# - 如何在 Opera Mini 和 Opera Mobile 中发布 HTML 表单？

> ID：12512551
> 
> 赞同：0
> 
> 时间：2012-09-20T12:28:07.543
> 
> 标签：c#, asp.net, opera-mini, opera-mobile

有一个 ASP.NET 4.0 网站，这是针对手机的。因为，仍然有很多手机不支持 Javascript，所以我使用了 Native FROM。我准备了一个测试页，这里是：

在 test.aspx 文件中

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs" Inherits="test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" action="test2.aspx" method="POST">
    <div>
        <input type="checkbox"  name="ckeck1"/>
        <input type="text" value="test" id="btnText" name="btnText"/>
        <input type="submit" value="Click"/>
    </div>
    </form>
</body>
</html> 
```

在 test.aspx.cs 文件中什么都没有。在帖子页面 Test2.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.UrlReferrer == null || !Request.UrlReferrer.AbsoluteUri.Contains("test.aspx"))
            Response.Redirect("test.aspx?p=" + Request.QueryString["packagecode"] + "&requestId=" + Request.QueryString["requestId"]);

        if (Request.Form["ckeck1"] != null)
            Response.Write(Request.Form["ckeck1"].ToString() + "<br>");
        if (Request.Form["btnText"] != null)
            Response.Write(Request.Form["btnText"].ToString() + "<br>");
        if (Request.UrlReferrer != null)
            Response.Write("Url: " + Request.UrlReferrer.AbsoluteUri + "<br>");
    } 
```

该代码几乎适用于所有移动浏览器..

但是，在**OPERA MINI**和**OPERA MOBILE**中，此代码**不会发布**，而只是刷新页面。

谁能告诉我为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:31:51.273

我想到了。以下是我们必须注意的事项： 1) 没有 GET，只有 POST

```
<form id="form1" action="test2.aspx" method="POST"> 
```

2) Opera 浏览器无法读取 CSS 3.0 - 因此，它会显示页面但根本无法发布...

早在 2003 年或 2004 年我就喜欢 Opera，我想我又找到了一个不喜欢它的理由。

# java - 您如何正确地从 HTTPS 页面重定向？

> ID：12512552
> 
> 赞同：2
> 
> 时间：2012-09-20T12:28:08.293
> 
> 标签：java, tomcat, ssl, https

假设我有一个从浏览器到网站的 SSL 连接。
从页面我按下一个按钮，我在网站的另一部分（不同的页面）。在什么情况下会重新协商连接？
在服务器重定向？向前？什么流量？
在这种情况下，正确的流程是什么？请注意，所有站点都是`HTTPS`. 即没有普通`HTTP`区域或外部链接（添加等）。
容器将是tomcat。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:45:51.803

如果服务器请求它进行客户端证书身份验证，通常会重新协商 SSL/TLS 连接（这是通过禁用连接器上的客户端身份验证来完成的，但要求`CLIENT-CERT`在 webapp 中进行身份验证`web.xml`）。

否则，HTTP 请求/响应将作为浏览器进行的正常并发 TCP 连接池的一部分进行交换（这与 HTTP 连接重用有关，而不是与 SSL/TLS 相关），并具有通常的超时设置（不具体到 SSL/TLS）。现代浏览器应该能够重复使用 SSL/TLS 会话，以避免必须为每个会话进行完整的 SSL/TLS 握手。SSL/TLS 会话也有超时，但通常足够长；无论如何，重新建立新连接将由浏览器透明地完成。

[尽管False Start 似乎并不成功](http://www.imperialviolet.org/2012/04/11/falsestart.html)，但也有[各种机制可以减少 SSL/TLS 握手导致的开销](http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html)（支持取决于浏览器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:42:42.930

当您在网页上单击该按钮时，连接就建立了（即对服务器的 GET 或 POST）。HTTP 1.1。为整个请求保持该连接打开以获取所有资源，例如网页的 HTML 和后续图像、CSS、JS 等。如果您想在用户发起的请求之间保持连接打开，您可以查看[keep -活着](http://en.wikipedia.org/wiki/HTTP_persistent_connection)。关于它是否应该用于 https（甚至是 http）存在一些争议。

尽管设置了保持活动状态，但您的浏览器可能会或可能不会尝试在一段时间内保持连接打开，以防您在 60 秒窗口中单击其他内容。上面的链接对此提供了更多详细信息。

Servlet 重定向或转发应该没有重新协商连接的含义或理由。它将使用与用户单击按钮时创建的相同的一个。

# xcode4 - 带有跳过安装的 xcodebuild 存档

> ID：12512553
> 
> 赞同：0
> 
> 时间：2012-09-20T12:28:16.600
> 
> 标签：xcode4, xcodebuild

我的 XCode 项目包含子项目（静态库）。在这个静态库项目的设置`Skip install`选项中设置为`YES`.

我想对我的项目进行存档。此刻我可以用 command 做到这一点`xcodebuild -scheme MyScheme -sdk iphoneos6.0 archive`。但在计划中，`MyScheme`我有行动`Release`配置`Archive`。我也希望能够在`Debug`配置中创建存档。

然后我尝试使用`xcodebuild -target MyTarget -configuration Debug -sdk iphoneos6.0 archive`命令，但它不计算：

`=== BUILD NATIVE TARGET foo OF PROJECT fooProj WITH CONFIGURATION Debug === Check dependencies unsupported build action 'archive'`

我认为由于`Skip install`选项而出现此错误。`target`此外，使用and进行归档和构建`configuration`是首选，而不是使用`scheme`选项，因为方案数据在`.gitignore`文件中，并且不同的开发人员可能对同一个项目有不同的方案。

有什么方法可以对我的项目`target`和`configuration`选项进行存档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:37:42.183

`xcodebuild -project TestBuildProject.xcodeproj -configuration Release -scheme TestBuildProject archive`

所以，存档你的配置必须是发布而不是调试，你必须指定一个方案。

[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)

# arrays - 另一个 Foreach 中的一个 foreach？

> ID：12512559
> 
> 赞同：0
> 
> 时间：2012-09-20T12:28:31.990
> 
> 标签：arrays, asp.net-mvc-3, view, foreach

很难解释我的问题，但我会尽量说得更明确。也对不起我的英语...

实际上，我认为我有这个数组。 ![大批](../Images/9ba73b3864680884ff14bacfb76563b3.png)

检索它的代码如下：

```
 @foreach (var item in Model)
        {
              TimeSpan result = DateTime.Now - item.OrderDate;

              if (result.Days < 31)
              {            
                    <tr border="1" bgcolor="@Odd">
                       <td> @Html.DisplayFor(modelItem => item.Username) </td>    
                       <td> @Html.DisplayFor(modelItem => item.OrderId) </td>  
                        <td>
                            <ul style="list-style-type:none; padding:0; margin:0">
                                @if (item.OrderDetails != null)
                                {
                                    foreach (var o in item.OrderDetails)
                                    {
                                        if (o.Pack == null)
                                        { 
                                            <li>  @Html.DisplayFor(modelItem => o.Product.Name)  </li>
                                        }
                                        else
                                        {  
                                            <li> <text>Pack</text>  @Html.DisplayFor(modelItem =>  o.Pack.Name)  </li>
                                        }
                                    }
                                }  
                            </ul>             
                        </td>
......... other td.............  
                    </tr>
              }                                        // 1116 = 36 months
              else if (result.Days > 31 && result.Days <= 1116)
              {
                  if (item.OrderDetails != null)
                  {
                      foreach (var a in item.OrderDetails)
                      {
                          if (a.Pack != null)
                          {          

                            <tr border="1" bgcolor="@Odd">    
                                <td> @Html.DisplayFor(modelItem => item.Username) </td>
                                <td> @Html.DisplayFor(modelItem => item.OrderId) </td>  

                                <td> 
                                    <ul style="list-style-type:none; padding:0; margin:0"> 
                                        @if (item.OrderDetails != null)
                                        {
                                            foreach (var o in item.OrderDetails)
                                            {
                                                if (o.Pack != null)
                                                {
                                                <li><text>Pack </text> @Html.DisplayFor(modelItem => o.Pack.Name)</li> 
                                                }
                                            }
                                        } 
                                    </ul> 
                                </td>      
    ......... other td.............                         
         </table> 
```

所以，如你所知，我有两种产品：产品和包装。在我的第一个 IF 条件（result.days < 31）中，我检索 Pack 和 Product，例如我的订单号 59，因为订单日期少于 31 天。那就是找工作。

现在，对于我的第二个 IF 条件 >31 和 <1116，我希望它只检索我的 PACK。它也很好用，我只有两包，我的产品没有显示，太好了（不要注意单价和数量列，我只是忘记在截屏时取消注释某些行为什么有一个价格和一个数量，它应该什么都没有。）。但正如你所看到的，当我处于第二种情况时，它会为一个订单检索两次该行，因为我在另一个中有两个 foreach 一个。我怎么能通过它，像我的第一个条件一样只有一个线？

我不知道我是否清楚......您可能想知道我在这里使用两个模型。一个 OrderModel 和一个 OrderDetailModel。第一个包含 OrderId, OrderDate, Username, ClientId 第二个包含 OrderDetailId, OrderId, ProductId, UnitPrice(for product), PackId, UnitPricePack。

非常感谢您的回答、提示、链接等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:12:53.880

这不是必需的：

```
 foreach (var a in item.OrderDetails) 
                  {    
                      if (a.Pack != null) 
                      { 
```

如果你有一个从 31 天到 1116 天的项目，它有产品但没有包，你仍然会得到一个 tr 元素，并且 Product & Pack 列将为空。

如果这对你没有好处，那就做一个 bool var，也许叫做 havePack，

```
 var havepack = false,
                  foreach (var a in item.OrderDetails) 
                  {    
                      if (a.Pack != null) 
                      {         
                          havePack = true;
                      }
                  }
                  if (havePack)
                  {  //now make your <tr> element here 
```

# .net - 使用组合框从 SQL 填充 DataGridView

> ID：12512563
> 
> 赞同：0
> 
> 时间：2012-09-20T12:29:00.597
> 
> 标签：.net

当我选择组合框的索引时出现异常。例外是`The multi-part identifier "System.Data.DataRowView" could not be bound.`

请帮助我如何通过选择组合框的值从datagridview中的sql获取数据”？

```
string connectionString = @"Data Source=YASHPAL-VAIO;Initial Catalog=Akb;Integrated Security=True";
string sq = "SELECT * FROM studentinformation where registrationnumber= '" + comboBox1.SelectedItem + "'";
SqlConnection connection = new SqlConnection(connectionString);
SqlDataAdapter dataadapter = new SqlDataAdapter(sq, connection);
DataSet ds = new DataSet();
connection.Open();
dataadapter.Fill(ds);
connection.Close();
dataGridView1.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:36:27.913

而不是使用 SelectedItem，在这种情况下它将是 DataRowView（如果您已将组合绑定到数据源），尝试使用 SelectedText？

如果这不好，获取选定的组合项，转换为 DataRowView，然后从那里提取值。

# ruby-on-rails - Rails.cache - 工作但不工作

> ID：12512567
> 
> 赞同：3
> 
> 时间：2012-09-20T12:29:14.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached, dalli

我正在使用 Rails.cache （我已经尝试过使用 dalli gem 的默认存储和 memcached - 但我得到相同的行为）它*似乎*正在工作，但不是（日志显示没有进行查询，但实际结果否则显示）...我有一个搜索页面，将前十个查询缓存 1 天：

搜索.rb

```
 def self.top_ten
    Rails.cache.fetch("top_ten_searches_cache", :expires_in => 1.day) do
      Search.order("count DESC").limit(10)
    end    
  end 
```

但是，当我进入搜索页面，反复输入一个新的搜索词时，它开始显示在前十名的结果中！（而我不希望前十个结果在 1 天过去之前发生变化。）当缓存存储为默认值时，日志中不会显示任何查询（因此您认为缓存正在工作），而当使用 dalli/memcached 时，我得到的结果完全相同行为，但在日志中有这个：

```
Cache read: top_ten_searches_cache ({:expires_in=>1 day})
Cache fetch_hit: top_ten_searches_cache ({:expires_in=>1 day}) 
```

究竟是什么`Cache fetch_hit`意思？这是否意味着没有找到缓存并且必须进行查询？

不太确定发生了什么 - 奇怪的是，我使用默认存储或使用 Dalli 的 memcached 得到相同的行为。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T12:58:19.187

您正在缓存范围，而不是查询的实际结果。Rails 使用延迟加载，因此要强制执行查询，您需要放置`.to_a`（或`.all`在 Rails 3 中），例如：

```
def self.top_ten
  Rails.cache.fetch("top_ten_searches_cache", :expires_in => 1.day) do
    Search.order("count DESC").limit(10).to_a
  end    
end 
```

见[这里](https://stackoverflow.com/a/11221230/1520714)。

# design-patterns - JPA 继承和 EJB 多态性

> ID：12512571
> 
> 赞同：2
> 
> 时间：2012-09-20T12:29:34.383
> 
> 标签：design-patterns, jakarta-ee, jpa, ejb, polymorphism

我有一个使用容器管理的事务和容器传播的持久性上下文的 Java EE 6 Web 应用程序

```
@PersistenceContext
private EntityManager em; 
```

在 JPA 层中，我有一个继承策略， where`MyExtendedClassA`和`MyEntendedClassB`both extend `abstract MyClass`。

我使用`stateless` `facade`服务类通过方法`find`, `findAll`, `merge`, `persist`,实现数据访问`remove`：

```
@Stateless
public class MyExtendedClassAFacade {
    @PersistenceContext
    private EntityManager em;
    public void persist(MyExtendedClassA a) {
        // ...
    }
    // other methods
} 
```

到现在为止还挺好。现在我必须对扩展类的*行为实现多态性。*这种行为包括管理数据库中的一些其他实体，因此需要 PersistenceContext（因此我需要使用其他`Stateless`EJB）：

```
@Stateful
public class MyBean {

    @EJB
    private MyClassFacade myClassFacade;   // stateless facade service class

    public void doSomething() {
        for (MyClass c : myClassFacade.findAll()) {
            // here I need to perform operations on the db. 
            // The implementation differs on each extended class.
            // I want to avoid a brute-force coding like:
            if (c.getClass().equals(MyExtendedClassA.class)) {
                @EJB MyExtendedClassAFacade myClassFacadeA;
                myClassFacadeA.doSomething((MyExtendedClassA) c);
            } else if (c.getClass().equals(MyExtendedClassB.class))
                @EJB MyExtendedClassBFacade myClassFacadeB;
                myClassFacadeB.doSomething((MyExtendedClassB) c);
            }
            // Instead, I would like to write something like:
            @EJB AnotherStatelessBean asb;
            asb.doSomething(c);
        }
    }
} 
```

有没有我可以用于这个目标的抽象模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:35:38.347

这是一种 EJB 多态，可以应用于其他情况。它与 JPA 继承没有直接关系。

诀窍是使用`@Local`EJB 的接口：

```
@Local
public interface MyClassFacadeInterface {    
    public void doSomething(MyClass c);
} 
```

并让扩展类的现有 Facade Stateless bean 实现该接口。

之后，`stateless`必须使用`InitialContext.lookup("java:module/MyExtendedClassAFacade")`. 在这里，诀窍是给与实体类相关的外观类名称，以便于查找。业务层要使用的代码是：

```
public void doSomething() {      
    for (MyClass c : myClassFacade.findAll()) {      
        String lookupName = getNameFromClassName(c.getClass().name());
        MyClassFacadeInterface myInt =  (MyClassFacadeInterface) new InitialContex().lookup(lookupName);
        myInt.doSomething(c);
    }      
} 
```

# java - Eclipse android项目不生成jar

> ID：12512577
> 
> 赞同：3
> 
> 时间：2012-09-20T12:29:45.333
> 
> 标签：java, android, eclipse, jar, buildpath

我有一个 Eclipse android 项目，称之为“myproject”。我也一直在同一个工作区中开发一个 android 库项目，称之为“myproject-lib”。

我正确设置了对 myproject-lib 的项目依赖项，并且一切正常。

最近，我在 myproject-lib 中添加了一个新包，并在其中创建了一个文件（一个简单的界面）。从那时起，myproject-lib 将不会在构建后生成 jar 文件。

**问题**表明以下构建路径错误：
*容器'Android Dependencies'引用不存在的库'/home/myname/eclipse/MyProject/myproject-lib/bin/myproject-lib.jar*

构建后为 myproject-lib 生成*bin*目录，它包含一个空的*res*目录和*Android Manifest.xml*。此外，myproject-lib*被*标记为库，请记住，这一直对我有用。

我已经尝试过多次清理和重建，并自动打开和关闭。
我已经删除了我在问题开始之前添加的那个新包（我怀疑这只是一个巧合，我只是不明白这是怎么造成的）。
我试过重新启动eclipse。
我试过重新启动我的机器。

我正在运行 Eclipse Indigo 3.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:21:35.993

事实证明这只是我的一个愚蠢的错误。库项目中有一个错误，所以这就是它不会构建 jar 的原因。

# .htaccess - 使用 .htaccess 配置进行屏蔽的 URL 转发

> ID：12512578
> 
> 赞同：0
> 
> 时间：2012-09-20T12:29:49.660
> 
> 标签：.htaccess

我在不同的提供商上有域和空间。我有**domain1.com**，当用户在浏览器中键入时，他们应该被重定向到**domain2.com/somefolder**。

domain2.com 托管在我可以完全控制 .htaccess 文件的服务器上。所以请向我提供要对**domain2.com/somefolder**的.htaccess 文件进行的更改

我试过了

```
Options +FollowSymlinks
Options All -Indexes
Options Indexes Includes FollowSymLinks ExecCGI
RewriteEngine on
RewriteRule ^&urlink=(.*) http://$1 [P] 
```

但它不起作用。

# wpf - ScrollViewer 内 RadioButtons 的 WPF ListBox - 在选择更改之前滚动

> ID：12512579
> 
> 赞同：0
> 
> 时间：2012-09-20T12:29:50.157
> 
> 标签：wpf, triggers, listbox, radio-button, scrollviewer

我有一个很烦人的问题。我在 ScrollViewer 中有 ListBox。ListBox 充满了 RadioButton 控件。以下代码显示了它：

```
<Grid>
<Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
</Grid.RowDefinitions>
<ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" CanContentScroll="False">
        <ListBox Name="lbActiveProjects" Background="Transparent" 
                         Style="{StaticResource RadioButtonList}" SelectedValuePath="Value.IsMainProject"
                         ItemTemplate="{StaticResource ResourceKey=radioButtonActiveProjectsListItem}"
                         ItemsSource="{Binding Path=Model.Worker.ProjectManager.Projects}"
                         SelectedValue="true" FontSize="{Binding Source={x:Static props:Settings.Default}, 
                                                                                                         Path=SmallerFontSize}"
                         Grid.Row="0" 
                        ><!--ScrollViewer.VerticalScrollBarVisibility="Auto"-->
                <i:Interaction.Triggers>
                        <i:EventTrigger EventName="PreviewMouseUp">
                                <cmd:EventToCommand Command="{Binding SelectionChangedCommand}"
                                                                        CommandParameter="{Binding ElementName=lbActiveProjects, Path=SelectedItem.Value}"/>
                        </i:EventTrigger>
                </i:Interaction.Triggers>
        </ListBox>
</ScrollViewer>
.
.
.
</Grid> 
```

现在，当我在 ListBox 上有足够的项目来显示滚动条时，我无法选择底部项目。每次我尝试这样做时 - ListBox 都会滚动到顶部和 SelectedItem.Value 内部，列表中没有最后一项，而是靠近顶部的一项（例如从底部算起的第三个或某事）。

有没有办法阻止它滚动到顶部（我不需要）或者至少迫使他在滚动之前选择合适的项目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:48:47.327

最简单的解决方案最终是好的解决方案。我想除了删除 ScrollViewer 并让 ListBox 自行滚动其内容之外别无他法。

# javascript - 访问和修改 html body 的内容

> ID：12512583
> 
> 赞同：1
> 
> 时间：2012-09-20T12:30:00.730
> 
> 标签：javascript, html

我是 html 和 javascript 的新手。我一直在尝试使用 javascript 修改输入元素的值。目的是在用户单击该字段时将其设置为空白。代码如下：

```
<html>
<head>
<script>
function fn(){
if(document.input1.value=="name")
document.input1.value="";
}</script></head>
<body>
<input name="input1" type="text" value="name" onClick="fn()"/>
</body></html> 
```

但是，此代码不起作用。我正在使用 chrome 浏览器。当我用表单标签包围输入标签并在脚本中使用`document.form.input1.value`代码时。哪里有问题？我不关心如何在用户单击时空白字段，而是如何从函数访问值。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:32:14.837

这会更好（使用[placeholder](http://davidwalsh.name/html5-placeholder)）：

```
<html>
  <body>
    <input name="input1" type="text" placeholder="name" />​
  </body>
</html> 
```

这是不言自明的。如果您需要解释，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:33:27.693

或者一种替代方法可能只是使用“占位符”属性，它不需要任何额外的 javascript。[见我的 jsfiddle](http://jsfiddle.net/RobMasters/HExCt/)

唯一的区别是文本会在输入新文本时消失，而不是在单击时消失。好处是占位符文本将在清除该字段时自动再次返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:40:15.193

您可能还想尝试[`onFocus`](https://developer.mozilla.org/en-US/docs/DOM/element.onfocus)和[`onBlur`](https://developer.mozilla.org/en-US/docs/DOM/element.onblur)事件：

```
<html>
  <head>
   <script>
     function fn(){
       if(document.getElementById("input1").value=="name")
         document.getElementById("input1").value="";
     }
     function fn2(){
       if(document.getElementById("input1").value=="")
         document.getElementById("input1").value="name";
     }
    </script>
  </head>
  <body>
   <input id="input1" name="input1" type="text" value="name" onFocus="fn();" onBlur="fn2();"/>
  </body>
</html>​ 
```

**[例子](http://jsfiddle.net/SLafA/1/)**

**编辑**：

如果您更喜欢按名称获取元素，则可以使用[`document.getElementsByName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)，但是，这会返回所有匹配元素的列表，然后您会将其视为匹配元素的数组。在上述情况下，您将`document.getElementById("input1")`使用`document.getElementsByName("input1")[0]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:38:06.580

```
<html>
<head>
<script>
function fn(){
if(document.getElementById("input1").value=="name")
document.getElementById("input1").value="";
}</script>
</head>
<body>
<input id="input1" type="text" value="name" onClick="fn()"/>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:38:34.837

你听说过 Jquery 吗？这是一个 javascript 库，可以简化您的工作！

从 jquery 网站下载 jquery 并将其包含到您的项目中

```
<script type="text/javascript" src="[[jquery file.js]]"></script> 
```

然后你可以使用：

```
<script>
    $("#[[yourinputid]]").click(
    function()
    {
    if ($(this).val() == "name")
       $(this).val("")
    });
</script> 
```

jquery = 简单的 javascript ;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T13:04:25.457

或者，您可以将整个输入元素传递到您创建的 javascript 函数中，然后对其进行操作，注意整个元素是如何通过“onClick =”fn(this)" 传递的，这意味着元素本身。通过将元素包含在表单中标签，我相信让您能够按名称调用元素，因为在单个文档中允许重复名称，然后可以在多个表单实例中隔离。

```
<html>
<head>
<script >
function fn(obj)
{    
if(obj.value=="name")
obj.value="";
}
</script>
</head>
<body>
<input name="input1" type="text" value="name" onClick="fn(this)"/>
</body></html> 
```

# c - 来自 makedepend 的警告

> ID：12512584
> 
> 赞同：1
> 
> 时间：2012-09-20T12:30:02.233
> 
> 标签：c, makefile

我正在使用 makedepend 1.0.4 版，尽管使用了 Y 选项（它可以防止搜索标准包含目录），但我收到了警告：

```
$ cat test.c
#include <stdio.h>

int main(void)
{
    return 0;
}
$ makedepend -Y test.c
makedepend: warning:  test.c, line 1: cannot find include file "stdio.h" 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T01:08:37.987

您必须在启用 UNIXOS 标志的情况下下载并重建 makedepend。

详情在这里：[https ://www.libreoffice.org/bugzilla/show_bug.cgi?id=10021](https://www.libreoffice.org/bugzilla/show_bug.cgi?id=10021)

# php - Symfony2 Call to a member function - Fatal Error

> ID：12512591
> 
> 赞同：0
> 
> 时间：2012-09-20T12:30:27.967
> 
> 标签：php, symfony, fatal-error

I'm working on a project that has exercises, and each exercise has one or multiple answers in a relationship of one-to-many.

I'm trying to save in a variable all the answers of an exercise. A fatal error appears:

> Fatal error: Call to a member function getAnswers() on a non-object in C:\wamp\www\backtoschool\prezentari.dev\src\Prezentari\PrezentariBundle\Controller\PageController.php on line 78

**The code is as follows:**

```
public function exerciseAction($lessonid, $firstex, $exerciseid)
{
    $em = $this->getDoctrine()->getEntityManager();

    $exercise = $em->getRepository('PrezentariPrezentariBundle:Exercise')->findByLesson($lessonid);

    $answer = $exercise->getAnswers();

    if ($firstex == 'default') {
        $firstex = 0;
    }
    elseif (isset($exercise[$firstex+1])) {
        $firstex = $firstex + 1;
    }
    else {
        $firstex = 0;
    }
    return $this->render('PrezentariPrezentariBundle:Page:exercise.html.twig', array(
        'exercise' => $exercise[$firstex],
        'lessonid' => $lessonid,
        'firstex' => $firstex,
        'exerciseid' => $exerciseid,
    ));
} 
```

**The entity:**

```
<?php

namespace Prezentari\PrezentariBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Prezentari\PrezentariBundle\Entity\Exercise
 */
class Exercise
{
    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var integer $chapterId
     */
    private $lessonId;

    /**
     * @var integer $type
     */
    private $type;

    /**
     * @var string $description
     */
    private $description;

    /**
     * @var string $image
     */
    private $image;

    /**
     * @var integer $nrex
     */
    private $nrex;

    /**
     * @var date $creationDate
     */
    private $creationDate;

    /**
     * @var integer $hidden
     */
    private $hidden;

    /**
     * @var integer $deleted
     */
    private $deleted;

    /**
     * @var Prezentari\PrezentariBundle\Entity\Lesson
     */
    private $lesson;
    /**
     * @var Prezentari\PrezentariBundle\Entity\Exercise
     */
    private $answers;

    public function __construct()
    {
        $this->answers = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Get lessonId
     *
     * @return integer
     */
    public function getLessonId()
    {
        return $this->lessonId;
    }

    /**
     * Set type
     *
     * @param integer $type
     */
    public function setType($type)
    {
        $this->type = $type;
    }

    /**
     * Get type
     *
     * @return integer 
     */
    public function getType()
    {
        return $this->type;
    }

    /**
     * Set description
     *
     * @param string $description
     */
    public function setDescription($description)
    {
        $this->description = $description;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Set image
     *
     * @param string $image
     */
    public function setImage($image)
    {
        $this->image = $image;
    }

    /**
     * Get image
     *
     * @return string 
     */
    public function getImage()
    {
        return $this->image;
    }

    /**
     * Set nrex
     *
     * @param integer $nrex
     */
    public function setNrex($nrex)
    {
        $this->nrex = $nrex;
    }

    /**
     * Get nrex
     *
     * @return integer 
     */
    public function getNrex()
    {
        return $this->nrex;
    }

    /**
     * Set creationDate
     *
     * @param date $creationDate
     */
    public function setCreationDate($creationDate)
    {
        $this->creationDate = $creationDate;
    }

    /**
     * Get creationDate
     *
     * @return date 
     */
    public function getCreationDate()
    {
        return $this->creationDate;
    }

    /**
     * Set hidden
     *
     * @param integer $hidden
     */
    public function setHidden($hidden)
    {
        $this->hidden = $hidden;
    }

    /**
     * Get hidden
     *
     * @return integer 
     */
    public function getHidden()
    {
        return $this->hidden;
    }

    /**
     * Set deleted
     *
     * @param integer $deleted
     */
    public function setDeleted($deleted)
    {
        $this->deleted = $deleted;
    }

    /**
     * Get deleted
     *
     * @return integer 
     */
    public function getDeleted()
    {
        return $this->deleted;
    }

    /**
     * Add answers
     *
     * @param Prezentari\PrezentariBundle\Entity\Answer $answers
     */
    public function addAnswer(\Prezentari\PrezentariBundle\Entity\Answer $answers)
    {
        $this->answers[] = $answers;
    }

    /**
     * Get exercises
     *
     * @return Doctrine\Common\Collections\Collection
     */
    public function getAnswers()
    {
        return $this->answers;
    }

    /**
     * Set lesson
     *
     * @param Prezentari\PrezentariBundle\Entity\Lesson $lesson
     */
    public function setLesson(\Prezentari\PrezentariBundle\Entity\Lesson $lesson)
    {
        $this->lesson = $lesson;
    }

    /**
     * Get lesson
     *
     * @return Prezentari\PrezentariBundle\Entity\Lesson 
     */
    public function getLesson()
    {
        return $this->lesson;
    }

    public function __toString()
    {
        return $this->getAnswers();
    }
} 
```

# php - 此 SQL 行有效吗？

> ID：12512592
> 
> 赞同：-1
> 
> 时间：2012-09-20T12:30:29.363
> 
> 标签：php, sql, database

尝试做一个页面系统，并想知道这段代码是否有效......

```
$get = mysql_query("SELECT * FROM blog_posts ORDER BY `date` DESC WHERE id > '". $startat ."' AND id < '". $nextPage ."' LIMIT 25") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:31:54.307

不，它无效。`Order By`必须靠近结尾，不能在中间。

另外你不应该使用 mysql_query，它是不安全的。请改用 PDO。

```
SELECT * FROM blog_posts 
WHERE id > '". $startat ."' 
AND id < '". $nextPage ."' 
ORDER BY `date` DESC 
LIMIT 25" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:32:04.417

不，您的子句顺序错误 - 试试这个：

```
$get = mysql_query("
    SELECT 
        * 
    FROM 
        blog_posts 
    WHERE 
        id > '". $startat ."' 
        AND id < '". $nextPage ."' 
    ORDER BY 
        `date` DESC 
    LIMIT 25"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:33:20.063

您的查询应如下所示

```
 <br>
    $get = mysql_query("SELECT * FROM blog_posts WHERE id > \
'". $startat ."' AND id < '". $nextPage ."' 
ORDER BY date DESC  LIMIT 25"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:33:39.920

你的`WHERE`and`ORDER BY`子句是倒退的。尝试：

```
"SELECT * 
FROM blog_posts 
WHERE id > '". $startat ."' AND id < '". $nextPage ."'
ORDER BY `date` DESC 
LIMIT 25" 
```

我希望`$startat`并且`$nextPage`不要来自任何地方的用户输入。你真的应该使用 PDO 或 mysqli - mysql_query 被弃用是有原因的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:34:45.353

不，该`order by`部分应该在`where clause`.

它应该是这样的：

```
SELECT * 
    FROM 
        blog_posts 
    WHERE 
        id > '". $startat ."' 
        AND id < '". $nextPage ."' 
    ORDER BY 
        `date` DESC 
    LIMIT 25" 
```

# asp.net - ASP.NET - "Cannot insert the value NULL into column 'firstName' . . ." when trying to do SQL INSERT

> ID：12512594
> 
> 赞同：1
> 
> 时间：2012-09-20T12:30:42.493
> 
> 标签：asp.net

Running .NET Version 4.0, I'm trying to INSERT into a table using the SqlDataSource.Insert() I get "Cannot insert the value NULL into column 'firstName' . . ."

The markup was generated by the sql wizard, except for the "DefaultValue=" which I added just to test. So with the DefaultValue= in place, the INSERT works, but with this removed I get the error message. The column that SQL server is complaining about is the PK for the table so cannot be nullable, but running the debugger, the field IS populated prior to the call to SqlDataSource.Insert().

Any ideas what I am doing wrong?

Here is the markup :-

```
<h2>
    <asp:Label ID="PageTitle" runat="server"></asp:Label>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ApplicationServices %>" 
        DeleteCommand="DELETE FROM [profiles] WHERE [firstName] = @firstName" 
        InsertCommand="INSERT INTO [profiles] ([firstName], [lastName], [dateOfBirth], [email]) VALUES (@firstName, @lastName, @dateOfBirth, @email)"
        SelectCommand="SELECT * FROM [profiles] WHERE ([firstName] = @firstName)" 
        UpdateCommand="UPDATE [profiles] SET [lastName] = @lastName, [dateOfBirth] = @dateOfBirth, [email] = @email WHERE [firstName] = @firstName">
        <DeleteParameters>
            <asp:Parameter Name="firstName" Type="String" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="firstName" Type="String"  DefaultValue="Bri"/>
            <asp:Parameter Name="lastName" Type="String" DefaultValue="Moss"/>
            <asp:Parameter DbType="Date" Name="dateOfBirth"  DefaultValue="13/04/1961"/>
            <asp:Parameter Name="email" Type="String"  DefaultValue="bri@hotmail.com"/>
        </InsertParameters>
        <SelectParameters>
            <asp:Parameter DefaultValue="Ken" Name="firstName" Type="String" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="lastName" Type="String" />
            <asp:Parameter DbType="Date" Name="dateOfBirth" />
            <asp:Parameter Name="email" Type="String" />
            <asp:Parameter Name="firstName" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource>
</h2> 
```

Here is the call to SqlDataSource.Insert() . . .

```
protected void ProfileSubmit_Click(object sender, EventArgs e)
{
    Page.Validate();
    if (Page.IsValid) 
    {
        SqlDataSource1.Insert();
    }
} 
```

Here is the error message :-

```
Server Error in '/' Application.
--------------------------------------------------------------------------------
Cannot insert the value NULL into column 'firstName', table 'C:\USERS\KATHARINA\DOCUMENTS\VISUAL STUDIO 2010\PROJECTS\HEALTHTRACK\HEALTHTRACK\APP_DATA\ASPNETDB.MDF.dbo.profiles'; column does not allow nulls. INSERT fails.
The statement has been terminated. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
Exception Details: System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'firstName', table 'C:\USERS\KATHARINA\DOCUMENTS\VISUAL STUDIO 2010\PROJECTS\HEALTHTRACK\HEALTHTRACK\APP_DATA\ASPNETDB.MDF.dbo.profiles'; column does not allow nulls. INSERT fails.
The statement has been terminated.
Source Error: 
Line 21:             if (Page.IsValid) 
Line 22:             {
Line 23:                 SqlDataSource1.Insert();
Line 24:             }
Line 25:         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:27:42.973

绑定到（插入）参数的字段是什么？当您说如果您保留它有效时`DefaultValue`，这意味着用于的参数为`firstname`空或未解析，因此`DefaultValue`正在使用中的值。

相反，如果您不提供 a`DefaultValue` *并且*参数为空/未定义，则插入将失败（因为 db 列限制不允许空）。

请参阅[MSDN 示例](http://msdn.microsoft.com/en-us/library/fkzs2t3h%28v=vs.100%29.aspx)

Hth

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T14:22:24.847

苔藓：这不是连接字符串的问题，如果是您的数据库首先没有连接。它正在连接到数据库，这就是导致错误无法向您的表中插入空值的原因。数据库表中的**firstName**列允许为 null 。

# javascript - 使用 parent() 三次，有没有更好的方法？

> ID：12512596
> 
> 赞同：3
> 
> 时间：2012-09-20T12:30:48.677
> 
> 标签：javascript, jquery, html

我有一些看起来像这样的代码：

```
jQuery(this).parent().parent().parent().parent().next(".results-table").css("display", "block"); 
```

基本上，点击表格内的链接后，将显示以下结果表格，问题是该链接在 td 内，在 tr 内，当然在表内，因此重复父选择器。

有没有更好的方法可以做到这一点，我错过了？不幸的是，我没有很多使用 jQuery 的经验。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T12:32:00.780

您可以使用`jQuery(this).closest("table")` [http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T12:32:16.693

```
jQuery(this).parents("table").next(".results-table").css("display", "block"); 
```

或者

```
jQuery(this).closest("table").next(".results-table").css("display", "block"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T12:32:29.017

```
jQuery(this).closest('table').css("display", "block"); 
```

甚至

```
jQuery(this).closest('.results_table').css("display", "block"); 
```

取决于您想要的结果和您的 HTML 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:38:22.310

```
$(this).parents(":eq(3)") 
```

这可能会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:51:37.847

或者..您可以使用事件委托，例如 .on() 而不是 .click()。然后，您可以简单地使用 e.delegateTarget。

例如，

```
$(parent).on("click", link, function(e) {
    jQuery(e.delegateTarget).next(".results-table").css("display", "block");
}); 
```

# c++ - what to put in cpp and what to h files

> ID：12512598
> 
> 赞同：0
> 
> 时间：2012-09-20T12:30:53.063
> 
> 标签：c++

> **Possible Duplicate:**
> [In C++ why have header files and cpp files?](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)
> [C++ - What should go into an .h file?](https://stackoverflow.com/questions/1945846/c-what-should-go-into-an-h-file)

All the functions/methods which are usually defined in .cpp file can be defined inline in .h file. So what is the reason for using .cpp at all? Effectivity? Compilation time?

Are there some standards as what can be kept in .h and what should go to .cpp?

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:36:01.350

相关

[这个](https://stackoverflow.com/questions/1945846/c-what-should-go-into-an-h-file)[问题](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)那个

好吧，基本上编译器能够编译所有文件，无论您将所有代码放在 .h 或 .cpp 文件中。将它们分开有基本的优点

1.  简而言之，您希望将接口与实现分开以实现可见性和可重用性。
2.  它减少了编译时间
3.  当您使用 3dparty 库的头文件时，您真的不关心它的实现，而是关心要调用的函数签名
4.  当您将自己的库作为 util 库提供时，您只想提供头文件供人们使用，并为想要开发您的库的人提供源库 这个列表可以走得更远，但这就是结果我现在的想法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:35:49.867

*   减少编译时间。如果定义都在头文件中，则每次该头文件更改时，都需要对包含该头文件的所有文件进行编译。
*   从实现中隐藏接口。允许发送标头和库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T12:37:14.757

你不能内联所有东西。*对象*可以定义一次且仅一次。只有类和模板可以定义多次，内联只允许重新定义*函数*。

例如，考虑**header.hpp：**

```
extern int a;

struct Foo { static int b; }; 
```

以下内容*必须*进入专用的单个翻译单元：

```
#include "header.hpp"

int a;
int Foo::b; 
```

* * *

另一方面，类*模板*的静态成员可以而且必须确实保留在标题中：

```
template <typename T> struct Foo { static int x; };
template <typename T> int Foo<T>::x; 
```

链接器必须弄清楚如何使对象唯一化。

# azure - Azure 存储：暂存与 . 生产

> ID：12512603
> 
> 赞同：9
> 
> 时间：2012-09-20T12:31:06.990
> 
> 标签：azure, storage

我想在 azure 中维护一个暂存环境和一个生产环境。每个都应该有自己的 blob 存储和 sql 存储。实现这一目标的最佳方法是什么？设置暂存和生产 sql 服务器以及两个 blob 存储帐户？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T15:34:08.173

这就是我管理生产/验收/测试环境的方式（请注意，我没有使用**staging**这个词）。对于每个环境，我创建以下内容（取决于项目）：

*   云服务
*   存储帐户
*   SQL Azure 服务器 + 数据库
*   AppFabric (ACS, ...) 命名空间
*   虚拟机

因此，假设我有一个名为**myapp**的应用程序，那么我的环境将如下所示：

*   生产
    *   云服务：**myapp-prod** .cloudapp.net
    *   存储帐户：**myapp-prod**
    *   SQL Azure Server 包含 1 个数据库：MyApp
*   验收
    *   云服务：**myapp-acce** .cloudapp.net
    *   存储帐户：**myapp-acce**
    *   SQL Azure Server 包含 1 个数据库：MyAppAcce
*   测试
    *   ...

因此，所有环境都有一个在生产部署槽中运行的应用程序版本。每当我想为我的生产环境进行 VIP 交换时，我只使用暂存部署槽（注意生产部署槽和生产环境之间的区别）。

这种方法有几个优点，每个环境都有专用组件（如存储帐户）：

*   在不影响实际应用程序的情况下测试新版本很容易。
*   每个环境可以有不同的安全性（例如，所有开发人员都可以访问测试存储帐户的密钥）
*   如果您正在测试您的应用程序，您可以使用真实的 URL + SSL，而不是那个又长又丑的暂存 URL。
*   测试与 ACS 的集成很容易，因为每个环境都有其专用的命名空间。
*   使用 Visual Studio，您可以轻松管理每个环境的设置。
*   最后但同样重要的是，您必须知道 Windows Azure 存储的可伸缩性目标适用于存储帐户级别。这意味着，如果您对所有环境使用单个存储帐户，则可能会降低应用程序在生产中的性能，因为您正在对在暂存中运行的应用程序进行压力测试。如果您在每个环境中使用一个存储帐户，则在执行某项操作时不会影响其他环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T01:08:53.300

这是一个分步指南。

1）您需要库：Microsoft.Samples.WindowsAzure.ServiceManagement 有一个名为“Windows Azure 服务管理库”的 nuGet 包，其中包含该库。

2) 您需要创建一个 X509Certificate2 并按照此处列出的说明进行操作。确保将您创建的 .CER 文件上传到订阅证书存储。确保将带有 PRIVATE KEY 的 .PFX 副本上传到实际的云服务证书存储。

[为 Windows Azure 管理创建和上传证书](http://msdn.microsoft.com/en-us/library/windowsazure/gg551722.aspx "创建和上传证书")

[http://blogs.msdn.com/b/clouddeployments/archive/2010/05/12/making-calls-to-the-service-management-api-from-a-service-running-in-windows-azure。 aspx](http://blogs.msdn.com/b/clouddeployments/archive/2010/05/12/making-calls-to-the-service-management-api-from-a-service-running-in-windows-azure.aspx "调用服务管理API...")

3) 这些教程也掩盖了这一点：您需要定义服务端点。我在我的 app.config 文件中执行了以下操作

```
 <system.serviceModel>
  <bindings>
    <webHttpBinding>
    <binding name="WindowsAzureServiceManagement_WebHttpBinding" closeTimeout="00:01:00"
             openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00">
      <readerQuotas maxStringContentLength="1048576" maxBytesPerRead="131072" />
      <security mode="Transport">
        <transport clientCredentialType="Certificate" />
      </security>
    </binding>
  </webHttpBinding>
</bindings>
<client>
  <endpoint name="WindowsAzureEndPoint"
            address="https://management.core.windows.net"
            binding="webHttpBinding" bindingConfiguration="WindowsAzureServiceManagement_WebHttpBinding"                contract="Microsoft.Samples.WindowsAzure.ServiceManagement.IServiceManagement" />     
</client>
</system.serviceModel> 
```

4) 完成后，我创建了一个名为“GetServerInstance”的静态类。这是代码：

```
public static class GetServerInstance
  {
      const string SubId = "your azuresubscriptionid";        

    public static bool IsProductionEnvironment()
    {
        //get the current deploymentId
        var currentInstance = RoleEnvironment.DeploymentId;  
        var mgmtChannnel = ServiceManagementHelper.CreateServiceManagementChannel("WindowsAzureEndPoint",GetCertifcate()); //make the endpoint.  
        var serviceDetails = mgmtChannnel.GetHostedServiceWithDetails(SubId, "your-cloud-service-name", true);
        var currentDeploymentSlot = serviceDetails.Deployments.First(p => p.PrivateID == currentInstance).DeploymentSlot;

        if (currentDeploymentSlot == DeploymentSlotType.Staging)            
            return false; //staging server

        if (currentDeploymentSlot == DeploymentSlotType.Production)            
            return true; //production server        

    }

    private static X509Certificate2 GetCertifcate()
    {
        string certificateThumbprint = RoleEnvironment.GetConfigurationSettingValue("CertificateThumbprint");
        if (String.IsNullOrEmpty(certificateThumbprint))
        {
            return null; //I'd throw an exception here and log the error
        }

        var certificateStore = new X509Store(StoreName.My, StoreLocation.LocalMachine);
        certificateStore.Open(OpenFlags.ReadOnly);

        var certs = certificateStore.Certificates.Find(X509FindType.FindByThumbprint, certificateThumbprint, false);
        if (certs.Count != 1)
        {                
            return null; //I'd throw an exception here and log the error
        }

        return certs[0];
    }
} 
```

5) 现在是我的工人角色，我不想在 Staging 上运行，因为它会向人们收取两次费用。我称之为：

```
 if (GetServerInstance.IsProductionEnvironment())
        {
           //Do work! I'm in production
        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:52:17.467

不是一个真正的答案，但我需要比评论中允许的更多的字符:)

我也在处理同样的问题。拥有单独的存储帐户和数据库服务器是可行的方法，但挑战是从配置文件中选择适当的存储帐户/数据库，因为您可以在暂存或生产环境中部署代码。RoleInstance 类没有办法区分暂存和生产。

您剩下的唯一选择是调用服务管理 API 并确定要选择的存储帐户/数据库。给这个等式添加一个更复杂的情况是，当您执行 VIP 交换时，您的暂存槽突然变成了生产槽（反之亦然），现在您必须根据新环境切换存储帐户/数据库连接字符串。

我很想听听其他人在做什么。

# sphinx - Validate that ecore-model is compliant with metamodel

> ID：12512605
> 
> 赞同：0
> 
> 时间：2012-09-20T12:31:10.480
> 
> 标签：sphinx, eclipse-emf-ecore, metamodel

What is the easieset way to see that an ecore-model is the model of a metamodel. I'm not interested in OCL, just that the model is a concrete model derived from the metamodel. I want to do this using Sphinx or any other API in eclipse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:05:59.357

```
myModel.eClass().getEPackage() 
```

为您提供用于当前模型的包，从那里您可以使用包注册表查看它是否与您选择的已注册元模型匹配。

```
EPackage.Registry.eINSTANCE.values() 
```

我建议使用元模型的 NsURI 进行检查。如果模型的代码是用 EMF 正常生成的，那就没问题了，因为 NsURI 是元模型的唯一标识符。

```
myModel.eClass().getEPackage().getNsURI() 
```

# jquery - css style to achieve this background effect

> ID：12512607
> 
> 赞同：3
> 
> 时间：2012-09-20T12:31:12.587
> 
> 标签：jquery, css

I received a design to convert to a website. It looks great and isn't to challenging, except for the menu.

The menu is a simple accordion menu, but the design itself is getting me under.

Here is what the menu should look like (not dropped and dropped respectively):

[Not Dropped http://photostand.co.za/images/7otfr8llxeeochyq4h4i.jpg](http://photostand.co.za/images/7otfr8llxeeochyq4h4i.jpg) [Dropped http://photostand.co.za/images/vyzfbxqj4cdiyaxmfbv6.jpg](http://photostand.co.za/images/vyzfbxqj4cdiyaxmfbv6.jpg)

The thing I'm struggling with is the green back bit.

I know how to rotate, but rotate rotates everything.

This is the accordion script I'm using:

```
$("#accordion > li > div").click(function(){
    if(false == $(this).next().is(':visible')) {
        $('#accordion ul').slideUp(300);
    }
    $(this).next().slideToggle(300);
}); 
```

Here is the CSS:

```
#accordion { list-style: none; padding: 0 0 0 0; width: 175px; font-size:13px; }
#accordion div { font-weight: bold; margin-top: 10px; cursor: pointer; text-align:center; border:2px black solid; vertical-align:center; height:30px; padding: 5 5 5 7px; list-style: circle; }
#accordion ul { text-align:center; list-style: none; padding: 0 0 0 0; }
#accordion ul { display: none; }
#accordion ul li { font-weight: normal; vertical-align:center; height:30px; cursor: auto; padding: 0 0 0 7px; border: thin solid black; margin-top: 2px; width:110px; margin-left:55px; background:#ffffff; }
#accordion ul li:hover { background:#d0d4d7 }
#accordion a { text-decoration: none; color:#000; }
#accordion a:hover { text-decoration: none; color:#000; } 
```

And here is the HTML:

```
<ul id="accordion">
    <div>Park Home</div>
    <li><div>Travel</div>
        <ul>
            <li><a href="#">Activities and Facilities</a></li>
            <li><a href="#">Code of Conduct</a></li>
            <li><a href="#">How to get there</a></li>
            <li><a href="#">Maps</a></li>
            <li><a href="#">What to Expect</a></li>
            <li><a href="#">Fees</a></li>
        </ul>
    </li>
    <li><div>Fauna and Flora</div>
        <ul>
            <li><a href="#">Birding</a></li>
            <li><a href="#">Mammals</a></li>
            <li><a href="#">Reptiles and Amphibians</a></li>
            <li><a href="#">Vegetation</a></li>
            <li><a href="#">Invertabrates</a></li>
        </ul>
    </li>
    <div>Construction Progress</div>
    <div>History</div>
    <div>Careers</div>
    <li><div>Contact Us</div>
        <ul>
            <li><a href="#">Contact Details</a></li>
            <li><a href="#">Enquiries</a></li>
        </ul>
    </li>
</ul> 
```

Could anyone perhaps assist me. Everything I've tried thus far failed.

**UPDATE 1 (20-Sept-12 16:49 CAT)**

I made some progress with this. I actually got it to look how I want it to look. I now just need to have the green bits slide down like the rest. Have a look here: [http://jsfiddle.net/pNxBU/1/](http://jsfiddle.net/pNxBU/1/) (sidenote: The spacing is a bit off since it's taken out of 'context' so to speak.

So now if someone could help me get those things to move with their divs... hmmm...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:38:21.650

我希望这段代码可以帮助你

```
var tranform_property = [ '-moz-transform', '-ms-transform', '-webkit-transform', '-o-transform'];

$("div.rotate-background").each(function(index, element){
   var angle = -((5-(index/2)) * Math.PI) / 180 ;
   var el = $(element);

   for(var i in tranform_property){
     el.css(tranform_property[i], "matrix(" + Math.cos(angle) + "," +
                  Math.sin(angle) + "," +
                  -Math.sin(angle) + "," +
                  Math.cos(angle) + ", " +
                  (-20 + index*2 ) + ", 1)");

     angle = angle * -1;
     el.find(":first-child").css(tranform_property[i], "matrix(" + Math.cos(angle) + "," +
                  Math.sin(angle) + "," +
                  -Math.sin(angle) + "," +
                  Math.cos(angle) + ", " +
                  (15 - index *4) + ", 1)");
  }
}); 
```

我只在 Firefox 和 google-chrome 上测试过。我提供了一个[jsfiddle 示例](http://jsfiddle.net/charlesjourdan/LvjJE/3/)。

**编辑 ：**

[这里](http://jsfiddle.net/charlesjourdan/LvjJE/4/)的例子可能看起来像给定的图像。

如果你想调整矩形位置，我会给你帮助我的[文档](http://dev.opera.com/articles/view/understanding-the-css-transforms-matrix/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:33:41.860

而不是旋转，您可能应该使用一个简单的图像（一个尚未旋转的绿色矩形，上面有一个黑色边框矩形）作为单元格的背景。

那就是：一切都减去文字。

# java - Tomcat: Different welcome-file for local and live setup

> ID：12512608
> 
> 赞同：1
> 
> 时间：2012-09-20T12:31:15.113
> 
> 标签：java, tomcat, servlets, tomcat7, web.xml

I'm a beginner with Tomcat/Java; I have a simple web application for which I would like to show a different `<welcome-file>` in `web.xml` depending on whether the application is being run locally development or deployed live.

Right now I have:

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

For local development I would like the `<welcome-file>` in `web.xml` to be `index-dev.html` for development and `index-live.html` for the deployed live application. Reason being I want to load different `*.css` and `*.js` depending on whether I'm local or live.

Any way in which I can achieve this setup?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:49:08.610

Live 应该总是有一个代理重定向到 tomcat 的 apache httpd。

这有多个优点：

*   如果tomcat宕机，你可以定义一个“请耐心等待/稍后再回来” info.html
*   使用 awstats 可以分析流量
*   你可以定义live JS/CSS-directorys来释放tomcat

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:33:40.627

作为一个选项：制作一个 jsp 文件作为欢迎页面。

在该 jsp 文件中分析当前客户端位置（是否为本地计算机），并转发到相关页面。

**附加编辑：**

您的 jsp 有一个预定义的`request`对象。

使用它来获取客户端 ip，如下所示：

```
<%
    String remoteIp = request.getRemoteAddr();
%> 
```

将其与 localhost 地址进行比较，可以通过以下方式获得：

```
<%
    InetAddress address = InetAddress.getLocalHost();
    String localhostIp = address.getHostAddress();
%> 
```

并用于`jsp:forward`转发到相关页面。

```
<%
    // getting jsp (servlet) client ip
    String remoteIp = request.getRemoteAddr();

    // getting local ip
    InetAddress address = InetAddress.getLocalHost();
    String localhostIp = address.getHostAddress();

    // checking and forwarding
    if(localhostIp.equals(remoteIp)){
%>
     <jsp:forward page="localhost.html"/>
<%}else{%>
    <jsp:forward page="remote.html"/>
<%}%> 
```

**附加编辑：**

确保 localhostIp 仅包含 IP 地址，否则使用`String`方法获取内部带有 ip-address 的子字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:41:11.833

创建一个标题页（将包含在包括欢迎页面在内的所有页面中）。写一个`<c:if>`为你做一个简单的检查。我不认为 servlet 规范支持基于请求机器的 IP 地址的不同欢迎页面。理想情况下，任何网络应用程序都应该从访问它的地方提供相同的页面

# objective-c - Xcode Trigger function and action together

> ID：12512617
> 
> 赞同：0
> 
> 时间：2012-09-20T12:31:53.360
> 
> 标签：objective-c, ios, xcode

i wish that on button click it will switch screen in story board and also trigger function. But the problem is if the button have segue and function only the segue triggered but the function don`t, if i remove the segue the function work OK. Here is my print screen for better understanding, on the right you can see function and action triggers.![enter image description here](../Images/d83a89a27f475a6cf2627fadcb24d383.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:53:06.940

只需从`prepareForSegue:`.

# c# - redirection error asp.net

> ID：12512622
> 
> 赞同：0
> 
> 时间：2012-09-20T12:32:01.047
> 
> 标签：c#, asp.net, razor

I have a problem with my code:

*   I would to redirect to an action with arguments from an cshtml file
*   but the url is not found file Admin cshtml:

    ```
    @{ Layout = "~/Views/Shared/_General.cshtml";
    }
    <table>
        <tr>
            <td><label  title= "Name " runat="server">Name</label></td>
            <td><label  title= "Email " runat="server">Email</label></td>
            <td><label  title= "Password" runat="server">Password</label></td>
            <td><label  title= "Phone" runat="server">Phone</label></td>
        </tr>

        @foreach (var marker in @Model)
        {
            <tr>
                 <td><label  title= "Nom " runat="server" >@marker.ContactName</label>/td>
                 <td><label  title= "mail " runat="server">@marker.ContactEmail</label>/td>
                 <td><label  title= "mot " runat="server" >@marker.Password</label>/td>
                 <td><label  title= "phone " runat="server" >@marker.ContactPhone</label></td>
                 <td><label  id="id" style="visibility:hidden">@marker.Identification</label></td>
                 <td>@Html.ActionLink("Edit", "Edit", new { Identification = @marker.Identification }) | @Html.ActionLink("Delete", "Delete", "Administration")</td>  
            </tr>
        }
    </table>
    <p>
        @Html.ActionLink("Create New", "Create")
    </p> 
    ```

my action is this:

```
[HttpPost]
public ActionResult Edit(string Identification)
{
    DATA2.User u = c.GetUserById(Identification);
    return View(u);
} 
```

How can I correct this code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:38:26.353

在查看您的代码时，首先让我印象深刻的是`runat="server"`. ASP.NET MVC 中没有这样的东西。请将其从您使用过的每个地方移除。

我可以从您的代码中看到的一个问题是您已经使用该`[HttpPost]`属性修饰了控制器操作。不要忘记，当您定义 ActionLink 时，它会生成一个锚标记 ( `<a>`)，该标记又会向服务器发送一个 GET 请求。如果你用`[HttpPost]`属性装饰你的控制器动作，你基本上是说这个动作只能用 POST HTTP 动词调用。如果您希望可以从 ActionLink 访问该操作，则必须删除此属性：

```
public ActionResult Edit(string Identification)
{
    DATA2.User u = c.GetUserById(Identification);
    return View(u);
} 
```

接下来我想我们必须关注编辑链接：

```
@Html.ActionLink("Edit", "Edit", new { Identification = marker.Identification }) 
```

您是说它找不到 Edit 操作，对吗？如果是这种情况，那么您还可以指定控制器操作以及区域（如果此控制器位于区域内）：

```
@Html.ActionLink(
    "Edit", 
    "Edit", 
    "SomeContorller", 
    new { Identification = "marker.Identification" }, 
    null
) 
```

如果您尝试访问的控制器操作未在用于呈现视图的同一控制器内定义，则这是必要的。

# html - AutoCompleteExtender Control in ajax control toolkit

> ID：12512628
> 
> 赞同：0
> 
> 时间：2012-09-20T12:32:18.503
> 
> 标签：html, asp.net, ajaxcontroltoolkit

I have created a web service in .net which will retrieve the city name based on the given input text. The web service is working properly. I have used that web service in an AutoCompleteExtender Control in ajax control toolkit. But i am not getting the list of suggestions if i type anything in the textbox.

The web service structure is:
public string GetCompletionList(string prefixText)

```
<body>
    <form id="form1" runat="server">
<div>
<!--.........................................
.........................................
.........................................-->
<asp:TextBox ID="txtsearchcity" runat="server" class="autosuggest"></asp:TextBox>
<asp:AutoCompleteExtender runat="server" 
        ID="autoComplete1" 
        TargetControlID="txtsearchcity" 
        ServicePath="http://localhost:3935/SearchCity/searchcity.asmx" 
        ServiceMethod="GetCompletionList"
        MinimumPrefixLength="2"
        CompletionInterval="1000" 
        EnableCaching="true" 
        CompletionSetCount="20">
</asp:AutoCompleteExtender>
<!--.........................................
.........................................
.........................................-->
</div>
</form>
</body> 
```

What should be the exact ServicePath and ServiceMethod? Whether the css file is necessary to get the output?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:28:55.767

看看官方文档，[这里](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)。它表示服务方法的签名必须匹配以下内容：

```
public string[] GetCompletionList(string prefixText, int count) 
```

因此，我将首先将具有此签名的方法添加到您现有的 Web 服务中。

另外，我建议您利用一些基于浏览器的工具（脚本调试、http 调试等）来确保：

1.  您的网页上没有发生 javascript 错误
2.  您的 ajax 请求已成功到达服务器
3.  正在从服务返回正确的响应

如果您不太确定从哪里开始，请查看 Chrome 的开发者工具，尤其是[网络面板](https://developers.google.com/chrome-developer-tools/docs/network)。

就您当前的配置（ServicePath、ServiceMethod 等）而言，我认为一切都已到位。

# opencv - Opencv矩阵值显示

> ID：12512632
> 
> 赞同：7
> 
> 时间：2012-09-20T12:32:40.237
> 
> 标签：opencv, matrix

这是问题所在：我使用 OpenCV v.2.4.2 加载灰度图像。现在我想知道例如位置（0,0）处的像素值。我试过了：

```
Mat image=imread("00001.jpg",1);
cvtColor(image,image,CV_RGB2GRAY);
int a=image.at<unsigned>(0,1);
printf("%d ",a); 
```

这实际上是行不通的。如何获取任何数据类型（CV_8U、CV_32S ...）的像素值？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:02:05.770

你在这里犯了两个错误。

读取图像时，您指定 1 作为输入参数。正如[imread](http://docs.opencv.org/doc/tutorials/introduction/display_image/display_image.html#explanation)所解释的，该函数可以读取三种不同格式的图像。

> CV_LOAD_IMAGE_UNCHANGED (<0) 按原样加载图像（包括 alpha 通道，如果存在） CV_LOAD_IMAGE_GRAYSCALE (0) 以强度 1 加载图像
> CV_LOAD_IMAGE_COLOR (>0) 以 RGB 格式加载图像

对于您的情况，您将不得不`CV_LOAD_IMAGE_GRAYSCALE`用作第二个参数

在您使用的下一步中：`image.at<unsigned>(0,1);`它不对应任何东西。您使用`<unsigned>`但编译器说“未签名？未签名什么？？？”

我相信更好的方法是使用正确的标签，如`CV_LOAD_IMAGE_COLOR`or `CV_LOAD_IMAGE_GRAYSCALE`。在下面的示例中，我将图像读入一个通道 ( `CV_LOAD_IMAGE_GRAYSCALE`)，它会自动将其转换为灰度。

```
#include <cv.h>
#include <highgui.h>

#include <iostream>

using namespace std;
using namespace cv;

int main()
{
    Mat gImg = imread("img.png", CV_LOAD_IMAGE_GRAYSCALE);

    uchar val;
    val = gImg.at<uchar>(0,0);

    cout << (int)val << endl;

    imshow("showImg",gImg);
    cvWaitKey(0);

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:32:43.060

有一个简单的方法可以做到这一点。

**Mat**有**Mat.data**给出了一个指向原始数据矩阵的指针。

**要获取第 n 行**和**第 m 列**的像素值，

```
Mat img = imread("filename.jpg",CV_LOAD_IMAGE_COLOR);
unsigned char *input = (unsigned char*)(img.data);

int i,j,r,g,b;
for(int i = 0;i < img.cols;i++){
    for(int j = 0;j < img.rows;j++){
         b = input[img.cols * j + i ] ;
         g = input[img.cols * j + i + 1];
         r = input[img.cols * j + i + 2];
     }
 } 
```

所以，这是关于彩色图像的。对于灰度图像，

```
Mat img = imread("filename.jpg",CV_LOAD_IMAGE_COLOR);
Mat g;
cvtColor(img, g, CV_BGR2GRAY);
unsigned char *input = (unsigned char*)(g.data);

int i,j,r,g,b;
for(int i = 0;i < img.cols;i++){
    for(int j = 0;j < img.rows;j++){
         g = input[img.cols * j + i];
     }
 } 
```

阅读这篇[博文](http://jayrambhia.wordpress.com/2012/06/23/get-data-from-mat-cvmat-in-opencv/)的更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:36:56.553

您可以尝试找出 opencv 用什么来表示它，以便更好地了解要使用的类型：

```
cout << image.depth() << ", " << image.channels() << endl; 
```

另请查看有关元素访问的[讨论。](https://stackoverflow.com/questions/1824787/opencv-multi-channel-element-access/1836580#1836580)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:49:40.063

首先，没有通用的方法可以通过这种方式获取像素值。这意味着如果您要使用`at`. 在这种情况下，您应该这样做，`a=image.at<uchar>(0,1);`因为您将图像转换为 8 位无符号灰度（1 通道）。

您还应该使用 CV_BGR2GRAY 而不是 RGB2GRAY，因为 OpenCV 使用 BGR 作为通道顺序。

您还可以从一开始就将图像读取为灰度并`uchar`再次使用：

```
Mat image = imread("00001.jpg",0);    // note the 0 flag
int a=image.at<uchar>(0,1);
printf("%d ",a); 
```

# php - 在 php 上包含警告

> ID：12512641
> 
> 赞同：-2
> 
> 时间：2012-09-20T12:33:19.537
> 
> 标签：php, include, warnings

我已将我的网站上传到服务器上，然后所有包含停止工作。当我打开该网站时，会弹出此警告：

> 警告：include_once() [function.include-once]：open_basedir 限制生效。
> 文件（/usr/local/apache/htdocs/showcaze/User/User.php）不在允许的路径内： /home/a8739766/
> 中的 (/home/:/usr/lib/php:/tmp)
> public_html/showcaze/login.php 在第 3 行

第 3 行是：

```
include_once $_SERVER['DOCUMENT_ROOT'].'/showcaze/User/User.php'; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:40:31.837

open_base_dir 设置主要用于防止特定用户的 php 脚本访问其他用户帐户中的文件。因此，通常，您自己帐户中的任何文件都应该可以被您自己的脚本读取。

如果您使用的是共享主机，那么您就不走运了。如果您有自己的服务器或在 VPS 上，请修改 httpd 配置文件中的 open_basedir 设置。

或者..您使用了错误的包含，并且您无意访问 basedir 之外的文件。当然，您应该调整您的包含。

# c# - 下拉列表选择的值让我感到困惑？

> ID：12512644
> 
> 赞同：1
> 
> 时间：2012-09-20T12:33:31.087
> 
> 标签：c#, asp.net, events, webforms

当我从下拉列表中选择我的组并单击按钮时，我有 asp.net 页面下拉列表和按钮，然后按钮通过查询字符串发送选定的值（组 ID）然后基于查询字符串中的 ID 的页面查看组详细信息，这是第一次发生但是当我从下拉列表更改组查询字符串仍然具有最后一个 id 和我的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack) FillList();

    if (Request.QueryString["id"] != null)
    {
        FillData();
        div_General.Visible = true;
        div_Special.Visible = true;
        dropdownlist1 .SelectedValue = Request.QueryString["id"];
    }
}

protected void button1_Click(object sender, EventArgs e)
{
    if (dropdownlist1 .SelectedIndex == 0)
    {
        par_ErrorMessage.InnerText = "choose group first  ...";
        par_ErrorMessage.Visible = true;
    }
    else Response.Redirect("Authority.aspx?id=" + dropdownlist1.SelectedValue);
} 
```

当我单击按钮并假设下拉列表页面生命周期中的新值首先进入页面加载并在此代码中时，我发现了这个问题

```
 dropdownlist1 .SelectedValue = Request.QueryString["id"]; 
```

在从 button1_click 读取之前将所选值返回到最后一个

我的 FillList 方法

```
 private void FillList()
{
    oGroup = new Cls_Groups();
    cmb_Group.DataSource = oGroup.LoadGroups();
    cmb_Group.DataBind();

    cmb_Group.Items.Insert(0, "-- اختر مما يلي --");
} 
```

拜托，我需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:42:57.050

**您可以在页面加载**事件后为下拉菜单选择值

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack) 
      {
        FillList();
        Viewstate["id"] = Request.QueryString["id"];
         if (Request.QueryString["id"] != null)
           {
            FillData();
            div_General.Visible = true;
            div_Special.Visible = true;

           }
      }
} 
```

现在在**Page_PreRender**中，您可以像这样在下拉列表中选择值：-

```
protected void Page_PreRender(object sender, EventArgs e)
{
  if(!Page.IsPostBack)
 {
   if (ViewState["id"] != null)
      {
          dropdownlist1 .SelectedValue = ViewState["id"].ToString();
       }
  }
} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:16:00.980

一种解决方法

在您的 aspx 页面中创建一个隐藏字段（hiddenfield1）并在您的 page_Load 方法中进行此更改

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack) FillList();

    if (Request.QueryString["id"] != null)
    {
        FillData();
        div_General.Visible = true;
        div_Special.Visible = true;
        hiddenfield1.Value =  dropdownlist1.SelectedValue.text;
    }
} 
```

没有在您的正文标记中的 aspx 页面中将 onload 函数注册为 on_loadabc()

现在在这个函数中做这个

```
<script type="text/javascript">
function on_loadabc(){

var dd = document.getElementById('<%=dropdownlist1.ClientId %>');
var hdnfield = document.getElementById('<%=hiddenfield1.ClientId %>');
for (var i = 0; i < dd.options.length; i++) {
    if (dd.options[i].text === hdnfield.value ) {
        dd.selectedIndex = i;
        break;
    }
}

}
</script> 
```

希望这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:43:40.730

我认为你犯了错误的下拉`filllist();`方法

您在页面时调用`FillList()`方法，`isnotpostback` 但是当您在用户更改下拉选择时进行重定向时，当然不会发生这种情况`postback` ，所以您`need to fill dropdown list again`

```
if (!IsPostBack) FillList();

    if (Request.QueryString["id"] != null)
    {
        FillData();
        div_General.Visible = true;
        div_Special.Visible = true;
         FillList();
        dropdownlist1 .SelectedValue = Request.QueryString["id"];
    } 
```

# mysql - Mysql：将 2 个查询合二为一（都有自己的 group by ...）

> ID：12512651
> 
> 赞同：1
> 
> 时间：2012-09-20T12:33:43.260
> 
> 标签：mysql

我正在尝试从以下内容中仅进行一个查询，但找不到一种方法（问题是硬编码日期现在取决于祖父列，因此 mysql 不会承认我'我试图在 1 个查询中做到这一点，而不是仅仅为了它而创建一个临时表。

```
select sum(result) 
from 
(
    SELECT 
      round(SUM(sr3.F_RESULT)/count(distinct(sr3.f_subgame_id))) as result,
      sr3.f_team_id
    FROM t_subgames_results sr3
    JOIN t_subgames s3 on s3.f_subgame_id = sr3.f_subgame_id
    JOIN t_seasons_games sg3 on sg3.f_game_id = s3.f_game_id
    WHERE sg3.f_date < '2012-09-14'
      and sr3.f_result>-1
    GROUP BY sr3.f_player_id
) averageByPlayer
group by f_team_id; 
```

如您所见，我需要按团队获得平均结果，但是必须先计算每个球员的平均值（并向上取整），然后再按团队求和。

有没有办法让它只有一个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:41:09.233

如果没有子查询或两个完全不同的表，就无法做你想做的事情。每个`SELECT`只能聚合一组组，而不是两个嵌套级别的组。

但是，*可能*有一种方法可以避免使用临时表。`EXPLAIN`可能会向您展示执行计划，该查询实际上是如何执行的。如果那里没有提到临时表，那么 MySQL 引擎已经优化了它。否则，也许稍微修改查询可能会有所帮助。例如，您可以尝试包含`f_team_id`在内部`GROUP BY`，最好是之前`f_player_id`。

如果这不起作用，您可能希望在[SQL Fiddle](http://www.sqlfiddle.com/)上提供一些示例数据，以便用户可以尝试这些数据以尝试找到不使用临时表的公式。确保包含真实的金额数据，因为优化可能会考虑表格行数。

# php - 嵌套速记 if

> ID：12512652
> 
> 赞同：3
> 
> 时间：2012-09-20T12:33:47.660
> 
> 标签：php, if-statement, shorthand-if

我无法弄清楚的简写 if 语句有点麻烦

```
($product == "vindo") ? $this->getNextVindoInList($id) : $this->getNextGandrupInList($id), 
```

这工作正常，但我想在该语句中再次检查。像这样：

```
if($product == "vindo") {
  if($number != 14) {
    $this->getNextVindoInList($id)
  }
} else {
 if($number != 22) {
    $this->getNextGandrupInList($id)
 }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T12:40:14.750

出于教育目的，我将保持此答案不变。但应该知道这是**不推荐**的。嵌套三元组是个坏主意。与显式 if-else 语句相比，它没有提供任何性能优势，并且使代码更难阅读。

也就是说，请参阅下文，了解它是如何做到的*，*但**不**应该这样做。

* * *

两种方式：

```
($product == "vindo" && $number != 14 ? $this->getNextVindoInList($id) : ($number != 22 ? $this->getNextGandrupInList($id) : '')

// Equivalent of:
if ($product == "vindo" && $number != 14)
    $this->getNextVindoInList($id);
else if ($number != 22)
    $this->getNextGandrupInList($id);

// OR

// Equivalent of your example:
($product == "vindo" ? ($number != 14 ? $this->getNextVindoInList($id) : '') : ($number != 22 ? $this->getNextGandrupInList($id) : '')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:38:17.863

尝试这个！

```
($product == "vindo") ? ($number != 14 ? $this->getNextVindoInList($id) : null ) : (($number != 22) ? $this->getNextGandrupInList($id) : null) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T12:51:59.950

我不会介绍带有嵌套三元运算符的解决方案。为什么？具有显式 if/else 结构的代码传达意图。它显示了到底发生了什么。

为什么要牺牲几行代码的可读性？这是一个相当糟糕的交易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T12:47:00.737

使用以下代码可以简化您的 if 语句：

```
if($product == "vindo" && $number != 14) {
  $this->getNextVindoInList($id)
} else if($number != 22) {
  $this->getNextGandrupInList($id)
} 
```

分类 if 现在不方便，因为 else 也有一个 if 语句。

# parsing - 与解析器的自动完成集成

> ID：12512653
> 
> 赞同：5
> 
> 时间：2012-09-20T12:33:52.717
> 
> 标签：parsing, events, autocomplete, event-handling, tree

解析器通常如何处理自动完成？

如果我们举个例子，我将以下内容传递给解析器：

```
"int i=2" 
```

那么自动完成选项可能包括：

```
"int i=2,"
"int i=2;" 
```

自动完成是否应该成为解析器的一部分？

如果不是，那么在基于事件的解析器的情况下，我猜测解析器将发出一个事件，其中包含解析器状态机中可能的那些分支的 id。然后，自动完成模块将知道为每个此类状态打印什么。

对于基于树的解析器，解析器必须返回一个树结构，该结构以某种方式包含那些可用的分支。

这是怎么做的？当需要自动完成时，哪种类型的解析器最适合处理命令字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T21:30:14.643

您可以从 LR(k) 语法中读取前瞻集（即后面可接受的标记类型），但此类语法往往很大。压缩语法的各种形式（其中 LALR(1) 可能仍然是最常见的）使前瞻集不太精确（它将始终包括有效的标记类型，但也可能包含无效的标记类型）。前瞻集中的无效标记类型也可以通过表压缩和故意包含错误产生（包括以改进错误消息）来引入。

从递归下降解析器读取前瞻集可能会比较棘手，部分原因是此类解析器通常是开放编码的，而不是依赖于转换表。然而，至少在理论上，一个 LL(k) 文法也有可能计算一个前瞻集，尽管它也可能被证明是不精确的。

然而，最有趣的自动补全不是标点符号，而是符号。语法不足以告诉您哪些名称在给定点的范围内，尽管它可能能够告诉您哪些类型的名称是可行的。您需要连接到符号表才能获得准确的自动完成信息。在可以在声明之前使用标识符的语言中，这可能会更加棘手，尽管解析器可能确实在某处保留了未解析名称的列表。

使用解析器生成自动补全信息的另一个困难是解析器倾向于针对语法正确的程序进行优化，并且在检测到语法错误后可能根本无法工作。对于 IDE 用户来说，这真的很烦人。轻微的标点错误会禁用自动完成，直到错误被追踪并修复。（就个人而言，我发现这样的系统太分散了编码的注意力；我宁愿专注于我目前正在编写的内容，也不愿关注代码其他部分中缺少括号的内容。）

IM（H）O，最好使用类似于 Packrat 解析的东西来在插入点挑选出足够的上下文，以便对可能发生的事情有一个合理的概念。如果您可以访问完整的正确数据类型声明，请使用它们，但总会有将文本中看起来像符号的任何内容放入前瞻集中的后备方式（尽管这也可能令人恼火）。

无论如何，祝你好运。

# android - 从 SearchView 中删除过滤器文本时是否可以不显示键盘？

> ID：12512654
> 
> 赞同：1
> 
> 时间：2012-09-20T12:33:57.333
> 
> 标签：android, search, searchview

我在操作栏中使用标准 SearchView。当我使用关闭的键盘从 SearchView 中删除文本时，是否可以不显示键盘？

# jquery - 使用 jQuery 过滤搜索结果——请仔细检查我的代码

> ID：12512655
> 
> 赞同：0
> 
> 时间：2012-09-20T12:34:00.140
> 
> 标签：jquery, animation, filtering

此过滤器有效。每次从下拉菜单中选择一个类别（以艺术术语为例），过滤后的结果都会以动画形式显示。在我继续项目之前，我只是想确保没有明显的代码差异或不兼容性。或者，如果您知道实现相同目标的更优雅的方式，请回复。谢谢。这是小提琴：

[http://jsfiddle.net/Earl1234/qm5Yj/2/](http://jsfiddle.net/Earl1234/qm5Yj/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:40:12.153

好吧，您`#maindiv`没有使用正确的 HTML 语法，而且，当它使用时，它会弄乱布局。

jQuery 不应该更像这样吗？

演示：http: [//jsfiddle.net/SO_AMK/yrwVZ/](http://jsfiddle.net/SO_AMK/yrwVZ/)

jQuery：

```
$(document).ready(function() {
    $("#genre").change(function() {
        var selGenre = $(this).val();
        var selSize = $("#size").val();
        $("#paintings").slideUp(function() {
            $('.eaPaintDiv, .error').hide();
            $('.eaPaintDiv[class*=' + selGenre + '][class*=' + selSize + ']').show();
            if ($('.eaPaintDiv[class*=' + selGenre + '][class*=' + selSize + ']').length == 0) {
                $(".error").show();
            }
            $("#paintings").slideDown();
        });
    });
    $("#size").change(function() {
        var selGenre = $("#genre").val();
        var selSize = $(this).val();
        $("#paintings").slideUp(function() {
            $('.eaPaintDiv, .error').hide();
            $('.eaPaintDiv[class*=' + selSize + '][class*=' + selGenre + ']').show();
            if ($('.eaPaintDiv[class*=' + selSize + '][class*=' + selGenre + ']').length == 0) {
                $(".error").show();
            }
            $("#paintings").slideDown();
        });
    });
});​ 
```

为了外观，我添加了错误。您的过滤有点多余，如果您最初只隐藏选定的画作，可能会搞砸。因此，您可以将它们全部隐藏，然后显示正确的。

PS你可以使用我的[浮动清除方法](https://stackoverflow.com/a/11597829/900747)，而不是一个空的DIV，像这样：

```
#paintings:after {
    display: block;
    content: " ";
    height: 0;
    clear: both;
} 
```

# memory-management - SQLServer 使用过多内存

> ID：12512657
> 
> 赞同：1
> 
> 时间：2012-09-20T12:34:08.707
> 
> 标签：memory-management, sql-server-2008-r2, local, database

我已经在我的台式机（使用 Windows 7）上安装了 SQLServer 2008 R2 Express。我只有一台本地服务器正在运行（./SQLEXPRESS），但 sqlserver 进程正在占用所有可能的 RAM。

对于具有 3GB RAM 的机器，事情开始变得缓慢，所以我限制了服务器中的最大 RAM 量，现在，SQLServer 不断地给出一些内存不足的错误消息。它使用 1GB 的 RAM，只有一台本地服务器和 2 个完全空的数据库，1GB 的 RAM 怎么不够？

当进程启动时，它使用的内存量确实可以接受（大约 80MB），但它一直在增加，直到达到定义的最大值并开始抱怨没有足够的可用内存。在那一点上，我必须重新启动服务器才能再次使用它。

我已经阅读了一个修复程序来解决我从 sqlserver 得到的错误之一：

```
There is insufficient system memory in resource pool 'internal' to run this query 
```

但它已经安装在我的 sqlserver 上。

为什么它使用这么多内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:36:30.887

您可以尝试配置“最大服务器内存”配置选项：

有关其他详细信息，请检查：

[http://technet.microsoft.com/en-us/library/ms178067(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms178067(v=sql.105).aspx) http://support.microsoft.com/kb/321363 [http://social.msdn.microsoft.com /Forums/en-US/sqldatabaseengine/thread/df51cd87-68ce-439a-87fa-d5e5cd93ab31](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/df51cd87-68ce-439a-87fa-d5e5cd93ab31)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:29:33.613

我有这样的问题。您可以增加数据库的缓存大小。在 MSSQL 服务器属性上，选择内存，有“最大服务器内存（以 MB 为单位）”您可以增加此单元格。

或与查询相同的事情：

EXEC sp_configure'显示高级选项',1; 去重新配置；GO EXEC sp_configure'max server memory (MB)',3500; 去重新配置；去

# php - 每页显示随机记录但不一样

> ID：12512660
> 
> 赞同：2
> 
> 时间：2012-09-20T12:34:16.617
> 
> 标签：php

好吧，伙计们，我有这个问题

```
$mysql = "select * from xxx where active = 1 order by Rand() limit $start,12";
mysql_query($mysql); 
```

到目前为止一切都很好。

我想要：当我按下下一个按钮（第 2 页或第 3 页等）以查看接下来的 12 条随机记录但不显示我在上一页中的前 12 条随机记录时！

谢谢你们！ps对不起，我的英语不好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:00:12.830

您需要保留一个数组（例如`$arrRecordIds`）来跟踪之前页面上显示的所有记录的 id。

当您在第一页时：

`$arrRecordIds=array(); // Empty array`

当您在第二页时：

`$arrRecordIds=array_merge($arrRecordIds, $arrNewRecordIds);array_unique( $arrRecordIds );`

如果您的选择查询只是连接 -`where id NOT IN ( implode(',', $arrRecordIds ) )`

这里`$arrNewRecordIds`应该包含页面上记录的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:40:55.813

只需尝试在数组中检索您需要的数据，在 PHP 中使用 shuffle() 将其随机化，并使用一些 JQuery 对结果进行分页，这将是非常棒的，只需一个查询而无需刷新。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:41:03.003

您可以跟踪以前显示的记录`id`并将它们放入一个数组中。

在您的查询中使用`id NOT IN (array)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:22:39.287

应用**系统随机抽样**的概念，

*   给记录编号N，决定n（分页大小，例如：10、20）
*   （样本大小）您想要或需要的 k = N/n = 区间大小
*   随机选择 1 到 k 之间的整数，然后每 k 个单元取

参考： http: [//www.socialresearchmethods.net/kb/sampprob.php](http://www.socialresearchmethods.net/kb/sampprob.php)

尝试在 showdata.php 文件中使用以下脚本

```
$per_page = 12; 
$sqlc = "show columns from coupons"; 
$rsdc = mysql_query($sqlc); 
$cols = mysql_num_rows($rsdc); 
$page = $_REQUEST['page']; 
$start = ($page-1)*12; 

$N = 1000; //Total rows in your table (query to get it dynamically)
$n = $per_page;
$k = ceil($N/$n);

$range[] = $page;

for($i=1;$i<$n;$i++) {
 $range[] = ($page+$k)*$i;
}

$sqln = "SELECT * FROM ( SELECT @rownum:= @rownum+1 AS rindex, n.* FROM xxx n, (SELECT @rownum := 0) r ) AS rows WHERE rindex IN (".implode(',',$range).")";
$rsd = mysql_query($sqln); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-08T21:59:48.760

解决方案 - 这是一种享受。

1.  对所有必需的记录进行选择随机搜索
2.  生成一个随机用户 ID，例如。“史密斯”.rand(1000,10000)
3.  形成一个由所有随机键组成的字符串，直到每页所需的记录数
4.  在上面插入包含相应页码的表/字段中。
5.  在上面重复/循环，直到没有更多页面/记录剩余 - 使用 array_splice(str,from,to) - 然后使用 $notscreen = print_r($splice, true) 将字符串存储到表 -> randompages：

tb.rec-没有 | 用户 ID | 页面 | 字符串（使用 recs 的键直到 recs/page）

122 | aj7894 | p1 | [0]=>100[1]=>400[2]=>056[3]=>129

123 | aj7894 | p2 | [x]99=>[x]240=>[x]7895[x]458=>320

...最多整个页面数组/记录数/所有页面 - 没有数据重复 - 只有 1 列随机存储的 recs 键作为检索

5.  使用带有 WHERE 的 user-id 和 pageno 来为该单个用户和页面提取随机密钥

6.  将字符串转换回数组，并在 SELECT WHERE 查询中使用 implode 中的数组提取特定页面的匹配键记录

7.  re-circ [ user-id & pageno ] 在搜索/视图期间使用 $_GET/POST - 在新视图或新搜索开始时重新初始化

笔记：

- 更好地使用列表进行搜索 - 但需要更多的工作来格式化字符串 - 应该给出最初存储的随机页面结果

*   数组匹配的问题是每页排序记录；最低的是第一 - 对于页面显示来说不是那么随机

*   临时表不好 - 因为当脚本被扔回服务器第二次或更长时间时无法访问 - 它已被 mysql 从内存中丢失

*   php 规则 - 没有脆弱的 cookie 或 java 脚本！

大问题 - 解决了。

重新补偿从您的帖子/答案中获得的帮助。

快乐的时光！

# python - 挂钩到 sqlalchemy 模型

> ID：12512662
> 
> 赞同：13
> 
> 时间：2012-09-20T12:34:17.183
> 
> 标签：python, orm, sqlalchemy, hook

我正在寻找 sqlalchemy 模型的模型创建周期。例如在创建或保存时（如在 Ruby ORM ActiveRecord 中，实际上我正在将模型从 ActiveRecord 移动到 SqlAlchemy）。

事件看起来像我需要的： http: [//docs.sqlalchemy.org/en/rel_0_7/core/event.html](http://docs.sqlalchemy.org/en/rel_0_7/core/event.html)，但我还没有找到更详细的例子。我想听听有人对此的经验。

sqlalchemy 中是否有类似的工具可以根据某些线索（例如 after_create）使用模型/实例进行操作？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-20T13:39:50.783

一旦你掌握了它的窍门，事件就非常简单。这是一个使用事件的快速示例

```
import uuid    

from sqlalchemy.event import listen

from mypackage.models import Base

def generate_license(mapper, connect, target):
    target.generate_license()

class User(Base):
    __tablename__ = "users"
    id = Column(String(36))
    license = Column(String(256))

    def generate_license(self):
        if not self.license:
            self.license = str(uuid.uuid4())
        return self.license

listen(User, 'before_insert', generate_license) 
```

或者，您可以使用装饰器：

```
from sqlalchemy.event import listens_for
…
class User(Base):
    …

@listens_for(User, 'before_insert')
def generate_license(mapper, connect, self):
    … 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-28T14:37:01.733

```
from sqlalchemy.event import listen_for
…
class User(Base):
…
    @listen_for(User, 'before_insert')
    @staticmethod
    def generate_license(mapper, connect, self):
… 
```

这将返回

```
NameError: name 'User' is not defined 
```

# c# - 从字符串中删除数字

> ID：12512664
> 
> 赞同：0
> 
> 时间：2012-09-20T12:34:24.697
> 
> 标签：c#, regex, sharepoint-2010, listitem

当我从 SharePoint 2010 中列表的“作者”列中获取列表值时，将显示以下内容：

2;#SP10设置

现在创建该特定列表项的用户是“SP10Setup”，现在有没有一种简单的方法可以删除 SP10Setup 开头的“2;#”而不影响“SP10Setup”中的数字？

我有一个目前正在删除所有数字的方法

```
//method to strip out unnecessary digits
public static string RemoveDigits(string key)
{

return Regex.Replace(key, @"\d", "");
} 
```

这就是我获取特定列表项值的方式：

```
string author = listItem["Author"].ToString(); 
```

这就是我删除不需要的数字和字符的方式：

```
//calling the RemoveCharacter method
string noDigitsAuthor = RemoveDigits(author);
string cleanedupAuthor = noDigitsAuthor.Replace(";", "").Replace("#", ""); 
```

我从中得到的结果是“SPSetup”，但理想情况下我希望结果是“SP10Setup”。

实现这一目标的最快和最简单的方法是什么......

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:38:14.947

你不应该自己做。使用[SPFieldLookupValue](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldlookup%28v=office.12%29.aspx)类

```
String author = "2;#SP10Setup";
SPFieldLookupValue lookup = new SPFieldLookupValue(author);
string cleanedupAuthor = lookup.LookupValue;
int authorId = lookup.LookupId; 
```

所以你将拥有：

```
cleanedupAuthor = "SP10Setup"
authorId = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:38:06.553

使用正则表达式，如`^\d*;#`. 匹配字符串的`^`开头，`\d*`表示匹配零个或多个数字并且`;#`是文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:39:04.740

如果您的字符串总是相同的长度，您可以使用[http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx)[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx "子串")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:39:13.397

第一个';' 和 '#' 不是数字。但是您可以[在使用正则表达式删除字符串中的文本时获得战利品](http://msdn.microsoft.com/en-us/library/844skk0h.aspx)

# statusbar - 如何更改模态视图 iOS 6 上的状态栏

> ID：12512666
> 
> 赞同：14
> 
> 时间：2012-09-20T12:34:27.910
> 
> 标签：statusbar, ios6

我有以下星座：

主视图（自定义 UIViewController，没有导航控制器或导航栏），包含一个按钮，该按钮模态地连接到第二个表视图控制器，该控制器嵌入在导航控制器中：

MainView -> 导航控制器 -> TableView

在 MainView 上，状态栏为黑色（iOS 6 没有变化 - 即使状态栏设置为默认） 在 TableViewController 上，状态栏应具有默认样式（iOS 5 中为灰色，iOS 6 中导航栏为蓝色） .

在 iOS 5 中，这很容易通过 TableViewController 中的以下代码行来实现：

```
if ([[UIApplication sharedApplication] respondsToSelector:@selector(setStatusBarStyle:)]) {
   [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
} 
```

在 iOS 6 下运行这个会发生。我怎样才能做到这一点？我在项目摘要和 plist 中尝试了所有可能的状态栏设置（如此处所述：[https](https://stackoverflow.com/a/12468689/1685971) ://stackoverflow.com/a/12468689/1685971 ）

此外，在 Storyboard 中，一切看起来都很好。在模拟器或设备上运行应用程序，它看起来不同： ![故事板](../Images/1e3e3bf89527adb85c6d7e604f521b9e.png) ![模拟器](../Images/f2a692fd8ba27c100b312c88256453ee.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T18:37:39.133

试试这个“hack”：你必须在你的第一个视图控制器中添加一个导航栏。那么你有两种可能。

1）设置导航栏的alpha值为0

或者

2）设置栏的y位置为-43px（看这里：[http](http://moduscreate.com/tinting-your-status-bar-in-ios6-and-phonegap/) ://moduscreate.com/tinting-your-status-bar-in-ios6-and-phonegap/ ）

编辑：

要获得正确的颜色，您必须设置不可见 UINavigationBar 的 tintColor。所以默认设置为黑色。在您的按钮操作中，您必须将 tintColor 设置为您的 navigationController.navigationBar.tintColor。在关闭按钮的操作中，您需要将其设置回 [UIColor blackColor]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T05:13:56.600

第一个视图控制器必须有一个导航控制器/栏才能使该功能正常工作。**状态栏不会在整个应用程序中更改颜色**（在 iOS6 中），但会适应您开始视图的导航栏颜色。如果您的起始视图不包含导航栏，则状态栏不会调整颜色。！（见[http://i.stack.imgur.com/n9ubK.png](http://i.stack.imgur.com/n9ubK.png)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T01:29:37.827

您不必将导航栏的样式设置为您的 tableviewcontroller。

试试这个方法。1\. 将导航控制器添加到主视图。2\. 将其属性 hidden 设置为 yes。3.显示tableviewcontroller时，设置导航栏属性hidden为No

导航控制器 -> bar hidden=yes -> MainView -> bar hidden=no -> TableView

# java - Facebook Messenger 应用程序，如对接

> ID：12512674
> 
> 赞同：0
> 
> 时间：2012-09-20T12:34:41.220
> 
> 标签：java, windows, facebook, sidebar, dock

Windows 7 的 Facebook messenger 停靠在屏幕的一侧，不允许任何其他应用程序在其上运行。例如，当我最大化另一个窗口时，它不会覆盖 Facebook 窗口。

我怎么能在java中做到这一点。到目前为止，我可以将窗口停靠在右侧，我将其设置为未装饰并且始终位于顶部。但我希望它像 Facebook Messenger 这样其他窗口可以最大化，但只能在它与我的停靠窗口相遇的地方。

这是一个更棘手的问题 [http://www.dreamincode.net/forums/topic/278553-facebook-messenger-application-sidebar-like-docking-with-swing/](http://www.dreamincode.net/forums/topic/278553-facebook-messenger-application-sidebar-like-docking-with-swing/)

# wcf-security - IIS 上的安全行为不一致

> ID：12512679
> 
> 赞同：1
> 
> 时间：2012-09-20T12:34:54.587
> 
> 标签：wcf-security, iis-express

我们有一个安全的 WCF 服务，它带有 WsHttpBinding、客户端和服务器证书以及带有基于声明的授权的传输安全性。

50% 的时间一切正常。当我们向安全端点发出请求时，我们会得到正确的响应。但是，如果我们在第一次之后立即再次发送相同的请求，我们会得到以下响应：

```
The HTTP request was forbidden with client authentication scheme 'Anonymous'. 
```

如果我们再次发送请求，我们会得到正常的行为。所以奇怪的请求有效，甚至无效。

但是在对问题进行了更多调查之后。我们注意到，如果前一个请求之间至少间隔 1:40 分钟，我们不会收到错误响应。

我们可以从调试器和日志中确认。客户端将凭据发送到服务。如果我们有 Authentication 响应，我们不会输入 System.ServiceModel。在 IIS 跟踪日志中，我们得到了很好的请求：

```
Authentication: SSL/PCT 
User from token: Domain\CertifacteUserName 
```

这是一个错误的要求：

```
Authentication: NOT_AVAILABLE 
User from token: 
```

同样在 IIS 跟踪日志记录中。如果我们发送第二个请求，我们会看到两个请求上的 ConnId 和 RawConnId 相同。如果我们发出多个成功的请求（通过在请求之间留出一些时间），它们对于每个请求都是不同的。

在我看来，IIS 没有收到我们发送的凭据，当它们在那里时。这是由于缓存吗？或者是其他东西？有没有人有解决方案。

# c# - 在读取文件之前，我是否必须检查 ANSI 编码？

> ID：12512681
> 
> 赞同：0
> 
> 时间：2012-09-20T12:34:56.820
> 
> 标签：c#, .net, file, encoding

我正在修改一些 csv 文件。这些文件真的很简单，因为总是只有 " **;** " 作为分隔符，没有**"**、**'**或类似的东西。

因此可以逐行读取文件并分隔字符串。那工作正常。现在人们告诉我：也许您应该检查文件的编码，它应该始终是 ANSI，如果不是，您的输出可能会有所不同和损坏。所以非ansi文件应该以某种方式标记。

我只是说，好吧！但如果我想一想：在这种情况下，我真的需要检查文件的编码吗？我只是将文件的编码更改为其他内容，我仍然能够毫无问题地读取文件。我的代码很简单：

```
using (TextReader reader = new StreamReader(myFileStream))
{
  while ((line = read.ReadLine()) != null)
  {
    //read the line, spererate by ; and other stuff...
  }
} 
```

再说一遍：我真的需要检查文件的 ANSI 编码吗？有人可以给我一个例子，我什么时候会遇到麻烦，或者在读取非 ansi 文件后我什么时候会得到损坏的输出？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:39:51.337

该特定构造函数`StreamReader`将假定数据是 UTF-8；*与 ASCII 兼容，但如果数据使用 128-255 范围内的字节作为单字节代码页（您将在字符串中得到*错误的字符等），则可能会失败，或者如果数据实际上是非常不同的东西，比如 UTF-7、UTF-32 等。

在某些情况下（少数），您可能可以使用字节顺序标记来检测编码，但这是一个循环问题：在大多数情况下，如果您还不*知道*编码，您就不能真正知道*检测*编码（稳健）。所以更好的方法是：首先知道编码。然后，您可以传入***正确***的编码以通过其他构造函数之一使用。

这是一个失败的例子：

```
// we'll write UTF-32, big-endian, without a byte-order-mark
File.WriteAllText("my.txt", "Hello world", new UTF32Encoding(true, false));

using (var reader = new StreamReader("my.txt"))
{
    string s = reader.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:37:34.680

你可以在`UTF-8`encoding 下运行，因为`UTF-8`它有一个很棒的属性，支持带有字节的*ASCII*`1`字符（正如它所期望的那样），但是当它需要时，缩小以支持*Unicode 字符*。

[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

# symfony - 带有 Symfony 2.1 项目的 dompdf

> ID：12512683
> 
> 赞同：0
> 
> 时间：2012-09-20T12:34:58.300
> 
> 标签：symfony, symfony-2.1, dompdf

如何使 dompdf 与 Symfony 2.1 项目一起工作？我遵循了这个[TUTORIAL](http://code.google.com/p/dompdf/wiki/Installation)但我仍然遇到这个异常：

> 注意：使用未定义的常量 DOMPDF_LIB_DIR - 在 [blablabla]/vendor/dino/dompdf/lib/DOMPDF/stylesheet.cls.php 第 16 行中假定为“DOMPDF_LIB_DIR”

如果不是这样，使用 Symfony 2.1 从 html 创建 pdf 的最佳和最简单的库是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:18:27.887

以下是我在 Symfony2 项目中为我提供 DOMPDF 所做的工作：

1.  需要 DinoPDF 作曲家包：php composer.phar 需要 Dino/dompdf，版本 0.1.1（或 dev-master）

2.  DomPDF 初始化文件需要在加载过程中的某处被 required() ：

    *   将 vendor/dino/dompdf/dompdf_config.inc.php.dist 复制到 app/dompdf_config.inc.php
    *   将 vendor/dino/dompdf/dompdf_config.custom.inc.php.dist 复制到 app/dompdf_config.custom.inc.php
    *   添加你的 app/autoload.php：

        ```
        require_once __DIR__.'/dompdf_config.inc.php'; 
        ```

dompdf_config.inc.php 定义了 DOMpdf 安装的路径。DinoPDF 发行版更改了库中的路径，因此必须注意：

**DOMPDF_INC_DIR**：主要的 DOMPDF 类。在 DOMPdf 的 dinoPDF 发行版中，此文件夹从 dompdf/include 重命名为 dompdf/lib/DOMPDF

**DOMPDF_LIB_DIR** : 附加资源 - 字体等。在 DinoPDF 分发的 DOMPdf 中，此文件夹从 dompdf/lib 重命名为 dompdf/lib/vendor

以下是我对 dompdf_config.inc.php 所做的更改：

```
/**
 * The root of your DOMPDF installation
 */
define("DOMPDF_DIR", str_replace(DIRECTORY_SEPARATOR, '/',                     realpath(__DIR__.'/../vendor/dino/dompdf/')));
/**
 * The location of the DOMPDF include directory
 * Main DOMPdf classes
 * In dinoPDF distribution of DOMPdf this folder is renamed from dompdf/include to     dompdf/lib/DOMPDF
 */
define("DOMPDF_INC_DIR", DOMPDF_DIR . "/lib/DOMPDF");

/**
 * The location of the DOMPDF lib directory
 * Additional resources - fonts, etc.
 * In dinoPDF distribution of DOMPdf this folder is renamed from dompdf/lib to     dompdf/lib/vendor
 */
define("DOMPDF_LIB_DIR", DOMPDF_DIR . "/lib/vendor");

/** Include the custom config file if it exists */
if ( file_exists(__DIR__ . "/dompdf_config.custom.inc.php") ){
    require_once(__DIR__ . "/dompdf_config.custom.inc.php");
}

def("DOMPDF_FONT_DIR", DOMPDF_LIB_DIR . "/fonts/"); 
```

这应该正确地包含库，以便它可以在控制器中使用，例如。像这样：

```
/**
 * @Route("/export_pdf", name="export_pdf")
 */
public function exportPDFAction($id)
{   
    $html =
    '<html><body>'.
    '<p>Put your html here, or generate it with your favourite '.
    'templating system.</p>'.
    '</body></html>';

    $dompdf = new \DOMPDF();
    $dompdf->load_html($html);
    $dompdf->render();

    $response = new Response();

    $response->setContent($dompdf->output());
    $response->setStatusCode(200);
    $response->headers->set('Content-Type', 'application/pdf');

    return $response;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T10:21:37.667

有一个更简单的方法，因为 dompdf 本身现在具有基本的作曲家支持：[http ://blog.viison.com/post/58696419659/dompdf-symfony2](http://blog.viison.com/post/58696419659/dompdf-symfony2)

很抱歉没有在此处发布内联步骤，但我前段时间已经写过博客文章了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-07T15:37:41.820

实际上有一种更简单的方法可以将 DomPDF 包含在 Symfony2 项目中。

首先，在您的文件中添加 DomPDF `composer.json`：

```
{   
    "require": {
        // ...
        "dompdf/dompdf": "dev-master"
    }
} 
```

安装后，编辑`app/autoload.php`您的 Symfony 应用程序文件并在末尾（`return`语句之前）添加这些行：

```
// Requirements for DOMPDF
define('DOMPDF_ENABLE_AUTOLOAD', false);
require_once __DIR__.'/../vendor/dompdf/dompdf/dompdf_config.inc.php'; 
```

你完成了！

*但正如 Slavik 上面提到的， dompdf*可能有更好的解决方案，例如使用`wkhtmltopdf`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:41:40.640

您还需要包含该`dompdf_config.inc.php`文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T18:09:32.507

还有其他选择，例如：

**[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)** - 一个基于 WebKit 引擎的控制台 html2pdf 转换工具，它保证了标准兼容。

**[KnpSnappyBundle](https://github.com/KnpLabs/KnpSnappyBundle)** - 将 Symfony2 与 wkhtmltopdf 集成的包

# sql-server - 如何在 SQL Server 数据库中使用 UTF-8 排序规则？

> ID：12512687
> 
> 赞同：91
> 
> 时间：2012-09-20T12:35:35.180
> 
> 标签：sql-server, utf-8

我已经将数据库从 mysql 迁移到 SQL Server（政治），使用 UTF8 的原始 mysql 数据库。

现在我读到[https://dba.stackexchange.com/questions/7346/sql-server-2005-2008-utf-8-collat](https://dba.stackexchange.com/questions/7346/sql-server-2005-2008-utf-8-collation-charset) ​​ion-charset 说 SQL Server 2008 不支持 utf8，这是在开玩笑吗？

SQL Server 托管多个数据库，大部分是拉丁编码的。由于迁移的数据库是用于网络发布的，所以我想保留 utf8 编码。我错过了什么还是需要在应用程序级别进行编码/解码？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-08-20T21:23:27.697

UTF-8 不是字符集，它是一种编码。UTF-8 的字符集是 Unicode。如果要存储 Unicode 文本，请使用`nvarchar`数据类型。

如果数据库使用 UTF-8 存储文本，您仍然不会将文本作为编码的 UTF-8 数据取出，而是将其作为解码的文本取出。

您可以轻松地将 UTF-8 编码的文本存储在数据库中，但是您不会将其存储为文本，而是将其存储为二进制数据 ( `varbinary`)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-20T13:45:14.647

不！这可不是说笑。

看看这里：http: [//msdn.microsoft.com/en-us/library/ms186939.aspx](http://msdn.microsoft.com/en-us/library/ms186939.aspx)

> 固定长度、nchar 或可变长度、nvarchar、Unicode 数据并使用 UNICODE UCS-2 字符集的字符数据类型。

还有这里：[http ://en.wikipedia.org/wiki/UTF-16](http://en.wikipedia.org/wiki/UTF-16)

> 较旧的 UCS-2（2 字节通用字符集）是一种类似的字符编码，在 1996 年 7 月的 Unicode 标准 2.0 版中被 UTF-16 取代。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-09-24T13:26:00.770

看起来这最终会在 SQL Server 2019 中得到支持！ [SQL Server 2019 - 有什么新功能？](https://docs.microsoft.com/en-us/sql/sql-server/what-s-new-in-sql-server-ver15?view=sqlallproducts-allversions#databaseengine)

> 来自 BOL：
> 
> UTF-8 支持
> 
> 完全支持广泛使用的 UTF-8 字符编码作为导入或导出编码，或作为文本数据的数据库级或列级排序规则。`CHAR`和数据类型中允许使用 UTF-8 `VARCHAR`，并且在创建对象的排序规则或将其更改为带有`UTF8`后缀的排序规则时启用。
> 
> 例如，`LATIN1_GENERAL_100_CI_AS_SC`对 `LATIN1_GENERAL_100_CI_AS_SC_UTF8`。UTF-8 仅适用于支持补充字符的 Windows 排序规则，如 SQL Server 2012 中引入的那样。`NCHAR`并且`NVARCHAR`仅允许 UTF-16 编码，并且保持不变。
> 
> 此功能可能会显着节省存储空间，具体取决于使用的字符集。例如，将具有 ASCII 字符串的现有列数据类型从启用 UTF-8 的排序规则更改`NCHAR(10)`为`CHAR(10)`使用启用了 UTF-8 的排序规则，这意味着存储需求减少了近 50%。这种减少是因为`NCHAR(10)`需要 22 个字节来存储，而`CHAR(10)`相同的 Unicode 字符串需要 12 个字节。

2019-05-14 更新：

文档现在似乎已更新，并在“[排序规则和 Unicode 支持](https://docs.microsoft.com/en-us/sql/relational-databases/collations/collation-and-unicode-support?view=sqlallproducts-allversions)”部分解释了我们在 MSSQL 2019 中的选项。

2019-07-24 更新：

[Pedro Lopes 的文章](https://techcommunity.microsoft.com/t5/Azure-SQL-Database/Introducing-UTF-8-support-for-Azure-SQL-Database/ba-p/757748)- Microsoft 高级项目经理关于为 Azure SQL 数据库引入 UTF-8 支持的文章

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-11-24T14:33:06.760

在 T-SQL 中处理 UTF-8 的两个 UDF：

```
CREATE Function UcsToUtf8(@src nvarchar(MAX)) returns varchar(MAX) as
begin
    declare @res varchar(MAX)='', @pi char(8)='%[^'+char(0)+'-'+char(127)+']%', @i int, @j int
    select @i=patindex(@pi,@src collate Latin1_General_BIN)
    while @i>0
    begin
        select @j=unicode(substring(@src,@i,1))
        if @j<0x800     select @res=@res+left(@src,@i-1)+char((@j&1984)/64+192)+char((@j&63)+128)
        else            select @res=@res+left(@src,@i-1)+char((@j&61440)/4096+224)+char((@j&4032)/64+128)+char((@j&63)+128)
        select @src=substring(@src,@i+1,datalength(@src)-1), @i=patindex(@pi,@src collate Latin1_General_BIN)
    end
    select @res=@res+@src
    return @res
end

CREATE Function Utf8ToUcs(@src varchar(MAX)) returns nvarchar(MAX) as
begin
    declare @i int, @res nvarchar(MAX)=@src, @pi varchar(18)
    select @pi='%[à-ï][€-¿][€-¿]%',@i=patindex(@pi,@src collate Latin1_General_BIN)
    while @i>0 select @res=stuff(@res,@i,3,nchar(((ascii(substring(@src,@i,1))&31)*4096)+((ascii(substring(@src,@i+1,1))&63)*64)+(ascii(substring(@src,@i+2,1))&63))), @src=stuff(@src,@i,3,'.'), @i=patindex(@pi,@src collate Latin1_General_BIN)
    select @pi='%[Â-ß][€-¿]%',@i=patindex(@pi,@src collate Latin1_General_BIN)
    while @i>0 select @res=stuff(@res,@i,2,nchar(((ascii(substring(@src,@i,1))&31)*64)+(ascii(substring(@src,@i+1,1))&63))), @src=stuff(@src,@i,2,'.'),@i=patindex(@pi,@src collate Latin1_General_BIN)
    return @res
end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-07-19T21:57:32.013

请注意，从 Microsoft SQL Server 2016 开始，UTF-8 受[`bcp`](https://msdn.microsoft.com/en-us/library/ms162802.aspx)、[`BULK_INSERT`](https://msdn.microsoft.com/en-us/library/ms188365.aspx)和支持[`OPENROWSET`](https://msdn.microsoft.com/en-us/library/ms190312.aspx)。

附录 2016-12-21：SQL Server 2016 SP1 现在为所有版本的 MS SQL （包括 Standard 和 Express）启用 Unicode 压缩（以及大多数其他以前仅限企业的功能）。这与 UTF-8 支持不同，但如果目标是减少西方字母的磁盘空间，它会产生类似的好处。

# javascript - 如何从 jquery 对象映射中过滤唯一的数据属性值

> ID：12512688
> 
> 赞同：0
> 
> 时间：2012-09-20T12:35:34.150
> 
> 标签：javascript, jquery, dom, jquery-plugins, jquery-mobile

我有一个插件可以找到给定父元素中的所有 img 元素。一些图像是我需要从数组中删除的重复图像。我想我可以将它们全部放入一个数组中，然后过滤掉重复项，或者在我遍历地图时进行某种条件检查，但不太确定该怎么做

**jq插件**

```
(function( $ ){
  $.fn.cacheImages = function() {
    this.find('img').map(function(){
      if($(this).attr('data-src') == null ||$(this).attr('data-src') == 'null'){
        return;
      }
      else{
        //do something here if $(this).attr('data-src') has not bed traversed yet
      }
    });
  };
})( jQuery ); 
```

然后称为

```
 $('#something-with-images').cacheImages(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:56:20.507

您可以在使用时将 URL 保存到对象中吗？

```
(function( $ ){

    var srcURLs = {};

    $.fn.cacheImages = function() {

        this.find('img').map(function(){
            var thisSrc = $(this).attr('data-src');

            if(thisSrc == null || thisSrc == 'null' || srcURLs[thisSrc]){
               return;
            }
            else{
                srcURLs[thisSrc] = 1;
                 //do something here if $(this).attr('data-src') has not bed traversed yet
            }

    });

})( jQuery ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:10:16.677

未经测试，但这应该有效，

```
 (function( $ ){
      var list = {};
      $.fn.cacheImages = function() {
        this.find('img').filter(function(){
          var src = $(this).data('src');
             if(src !== 'null' && src !== null && typeof list[src] == 'undefined') {
                 list[src] = true;
                 return true;
             }
          }
        });
      };
    })( jQuery ); 
```

[。筛选（）](http://api.jquery.com/filter/)

# asp.net-mvc - 使用 Visual Studio 或 TFS 在项目之间共享资产（图像/css/js）

> ID：12512691
> 
> 赞同：4
> 
> 时间：2012-09-20T12:35:42.910
> 
> 标签：asp.net-mvc, visual-studio-2012, tfs

有没有一种在不同项目之间共享视觉资产的有效方法？

这将包括图像、CSS 和 JavaScript。

我查看了以下似乎无法回答的 Stack Overflow 问题：

*   [在 Visual Studio 中的不同项目之间共享 css/javascript/images](https://stackoverflow.com/questions/2960392/sharing-css-javascript-images-between-different-projects-in-visual-studio)
*   [Visual Studio - Web 项目之间的资源（CSS/JS/图像）共享](https://stackoverflow.com/questions/1041481/visual-studio-resource-css-js-images-sharing-between-web-projects)
*   [在 Visual Studio 2010 中处理常见的 JavaScript 文件](https://stackoverflow.com/questions/6107464/handling-common-javascript-files-in-visual-studio-2010)

我们使用 TFS，不确定它是否有我们可以使用的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:55:13.243

没有任何内置的 ASP.NET MVC 允许您生成指向其他 ASP.NET 应用程序的链接。所有助手都使用当前应用程序的相关控制器操作。如果您的所有静态文件都位于另一个 ASP.NET 应用程序（一种自定义 CDN）中，那么您可以在 web.config 中定义此应用程序的基本位置，然后构建将服务这些资源的自定义帮助程序：

```
@Html.Resource("/foo.js", "text/javascript") 
```

并且自定义助手将生成此外部资源的绝对 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-02T06:22:31.723

一个方便的解决方案是创建一个“解决方案文件夹”，如[Erik Philips 的解决方案所示。](https://stackoverflow.com/questions/8540292/how-do-you-share-scripts-among-multiple-projects-in-one-solution)

基本上，“解决方案文件夹”只是在您的解决方案中创建的包含所有共享文件的通用共享文件夹，然后您将项目中的这些文件作为链接引用。出于所有实际目的，这些共享文件可以在您的站点中使用，就好像它们存在于您的本地站点文件夹中一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T03:55:57.383

我一直在努力解决同样的问题，我发现对我来说最好的解决方案是简单地为资产文件创建一个“持有人”项目，并在预构建事件的帮助下将所有文件复制到项目中要求他们。这样您只需要在“持有人”项目中编辑它们，但只要您不在其他项目中触摸它们，它们就会始终同步。

# android - IllegalArgumentException，路径分隔符。该应用程序采用 .xml.xml

> ID：12512694
> 
> 赞同：0
> 
> 时间：2012-09-20T12:35:48.497
> 
> 标签：android, sharedpreferences, illegalargumentexception, path-separator

我有一个需要修改 SharedPreferences 的活动。

```
public class AddingEmail extends ListActivity implements OnClickListener{   

    private String newMail;
    private SharedPreferences prefs;
    private PreferenceManager prefMan;
    private EditText emailAdd;
    private EditText emailDel;
    private ArrayList<String> prefList;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addingemail);
    Log.d("On Addig EMAIL ACTIVITY","on Create");

    String name = "com.example.daemon3_preferences";
    prefs = this.getSharedPreferences(name, MODE_PRIVATE); 
```

这是 PreferenceScreen ..

```
public class PreferencesScreen extends PreferenceFragment{

    private final String TAG = "PreferencesScreen";
    private Set<String> emails;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(TAG, "OnCreate");

        addPreferencesFromResource(R.xml.prefs); 
```

我有这个错误：

> java.lang.IllegalArgumentException：文件 /data/data/com.example.daemon3/shared_prefs/com.example.daemon3_preferences.xml.xml 包含路径分隔符

为什么需要 .xml.xml 而不是 .xml？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:16:55.610

在此处将评论线程分解为正式答案。

* * *

而不是打电话

```
String name = "com.example.daemon3_preferences";
prefs = this.getSharedPreferences(name, MODE_PRIVATE); 
```

称之为：

```
prefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

`PreferenceFragment``PreferenceManager`通过尝试使用打开默认首选项来保存您的设置`getSharedPreferences`，您可能会干扰`PreferenceManager`可能导致该特定异常的设置。

# java - 在这种情况下，String 对象如何不可变？

> ID：12512698
> 
> 赞同：1
> 
> 时间：2012-09-20T12:35:52.590
> 
> 标签：java

我同意 String 对象是不可变的这一事实，这意味着它们不能被修改。就像下面的情况一样

```
String str = "Hi";
String str1 = str.concat("Nilesh"); 
```

这里如果长度参数为 0 则返回 str 对象，或者创建一个新的 String 对象并返回其引用。如果我这样做

```
String str = "Hi";
str="Hello"; 
```

它是如何改变的？不可变在哪里出现？请举个例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:38:11.547

不可变的是字符串本身，而不是指向字符串的引用。在您的第二个代码中：

```
String str = "hi";
str = "hello"; 
```

涉及 2 个 String 对象：`"hi"`和`"hello"`.

`str`是一个引用，最初指向第一个，然后在赋值后指向第二个。但是 String 对象`"hi"`不会在该代码中被修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:38:02.327

您将不变性与更改引用混淆了。

这段代码：

```
String str = "Hi"; // str now refers to the String "Hi"
str = "Hello";  // str now refers to the String "Hello" 
```

只是改变所指的`String`对象；是一个保存对对象的引用的*变量。*没有发生任何改变 the或object 的事情。`str``str`*`String``"Hi"``"Hello"`*

 *如果 String 是可变的，它会有一个类似的方法`setValue(String s)`可以被调用来改变它的状态，所以你可以这样做：

```
String str = "Hi";
str.setValue("Hello"); // if String were mutable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:37:49.780

`"Hello"`是完全不同的对象，`String`所以你不能再参考`"Hi"`

> 不变性与引用无关，它与对象状态有关。如果状态改变，则创建新对象。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)

> 如果一个对象在构造后它的状态不能改变，那么它就被认为是不可变的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T12:38:16.483

`str`是一个**变量**。术语“变量”意味着可以为变量分配各种字符串，一次一个。每个字符串仍然是不可变的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T12:41:18.033

如果别人说`"Hello"`的是另外一个`String`。我认为您可以看到`String`使用[`System.identityHashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29). 试试看：

```
String str = "Hi";
System.out.println("try 1: "+System.identityHashCode(str));
str="Hello";
System.out.println("try 2: "+System.identityHashCode(str)); 
```

`System.identityHashCode`通常会返回引用本身（但你不能依赖这个事实）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-17T06:29:24.767

```
String str = "Hi";

str="Hello"; 
```

*String*是不可变的，所以我们不能修改 String 对象。

在这里，将创建两个对象，我们可以通过哈希码进行验证。

字符串 str = "你好";

System.out.println("Str(Hi)-hashcode:"+str.hashCode());

```
str="Hello";

System.out.println("Str(Hello)-hashcode: "+str.hashCode()); 
```

在这两种情况下，*HashCode*值都会不同。

> 第一种情况-> Str(Hi)-hashcode: 2337
> 
> 第二种情况-> Str(Hello)-hashcode: 69609650

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T12:39:12.167

情况1：

```
String str = "Hi";
String str1 = str.concat("Nilesh"); 
```

总共创建了 3 个字符串对象

案例2：

```
String str = "Hi";
str="Hello"; 
```

在这种情况下，创建了 2 个字符串对象。当执行第 1 行时，str 指的是“Hi”。当执行第 2 行时，str 引用“Hello”并隔离“Hi”。str 只是指 line2 之后的“Hello”*

# javascript - javascript/jquery首先要学习哪种设计模式？

> ID：12512699
> 
> 赞同：-1
> 
> 时间：2012-09-20T12:35:59.610
> 
> 标签：javascript, jquery

我想学习制作和组织适当的 javascript 应用程序的模式/过程。我开始使用 OOP 来简化我的代码部分，但是代码仍然很混乱，所以我需要一个过程来有效地构建更大的东西。我应该考虑 MVC、命名空间还是库？不确定我是否要选择一个框架，但非常感谢任何建议/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:58:38.137

这就是你所需要的：

*   [http://dochub.io/#javascript/](http://dochub.io/#javascript/)
*   [http://dochub.io/#jquery/](http://dochub.io/#jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:42:07.020

jQuery 是最好的 Javascript 框架，你可以从官**[网](http://jquery.com/)**开始寻找它。

在**[此博客](http://www.jquery4u.com/)**之后，您还可以找到许多教程和课程。

然后，如果您对与 Javascript 一起使用的**MVC**模式感兴趣，我建议**[Backbone](http://backbonejs.org/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:37:03.213

JavaScript的基础知识好学jquery

由于 jquery 是用 JavaScript 制作的库，因此您可以更好地操作和理解 jquery

# android - MonoDroid 安装问题

> ID：12512702
> 
> 赞同：0
> 
> 时间：2012-09-20T12:36:04.953
> 
> 标签：android, windows-8, xamarin.android

在安装过程中，Monodroid 安装程序似乎无法检测到我机器中已安装的 Android-SDK。它已经安装在“D:\Program Files (x86)\Android\android-sdk”上，并且已经在 Eclipse 上运行良好。

在检查安装日志时，它无法检测到 API 7、8、10 和 12，但检测到了 14。所有 API 的“SDK 平台”和“Android SDK 源”均已安装。

甚至无法检测到“Android SDK”v. 20，但我已经有了 rev。20.0.3 已安装。

当我尝试继续时，它会下载整个 Android SDK 安装程序。

如何让它发挥作用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:29:57.117

[显然](https://code.google.com/p/android/issues/detail?id=18317)，如果安装 Android SDK 的目录包含空格（在您的情况下为“程序文件（x86）”），您可能会在模拟器中遇到一些问题，您会检查并查看是否可以抑制此问题，将 SDK 重新定位到没有空格的路径。

您可能还想尝试离线安装它，如此[处](https://stackoverflow.com/questions/12118684/mono-for-android-offline-installer)所述。

# css - Firefox 中按钮的 CSS 行高样式（减少）

> ID：12512703
> 
> 赞同：0
> 
> 时间：2012-09-20T12:36:06.303
> 
> 标签：css, firefox

如何减少按钮中文本和上边框之间的偏移量。我正在尝试设置行高，但它在 Firefox 中不起作用：[Fiddle](http://jsfiddle.net/QaB7g/)

**CSS：**

```
input[type="button"]
{
    border-color: #D2D2D3 #79797A #4D4D4E #C0C0C1;
    border-style: solid;
    border-width: 1px;
    height: 16px;
    line-height: 7px;
    padding: 1px;
    width: 16px;
    background: #d8dadb;
} 
```

**HTML：**

```
<input type="button" value="+" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:39:38.337

您设置了一个硬的宽度和高度。取出它们或将它们设置为自动，您的按钮将响应填充调整。

```
input[type="button"]
{
    border-color: #D2D2D3 #79797A #4D4D4E #C0C0C1;
    border-style: solid;
    border-width: 1px;
    line-height: 7px;
    padding: 1px;
    background: #d8dadb;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T10:24:09.833

Firefox 错误*（功能）*

[http://www.cssnewbie.com/input-button-line-height-bug/](http://www.cssnewbie.com/input-button-line-height-bug/)

这可能会有所帮助：

```
button::-moz-focus-inner {border: 0; padding: 0;} 
```

# hibernate - Hibernate Criteria 连接查询

> ID：12512705
> 
> 赞同：3
> 
> 时间：2012-09-20T12:36:30.043
> 
> 标签：hibernate, criteria

如何从以下 sql 创建 Hibernate 条件查询？

`String hql = "select e.employeeId,m.meetingId,e.firstname from Employee e join e.meetings m";`

谁能提供相应的条件查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T09:37:56.600

条件查询是：

```
Criteria c = session.createCriteria(Employee.class, "e");
c.createAlias("e.meetings", "m"); // inner join by default
c.setProjection( Projections.distinct( Projections.projectionList()
            .add( Projections.property("e.employeeId"), "employeeId")
            .add( Projections.property("m.meetingId"), "meetingId")
            .add( Projections.property("e.firstname"), "firstname"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T07:33:25.723

试试这个

```
Criteria criteria = sessionFactory.getCurrentSession()
                                  .createCriteria(Employee.class)
                                  .createAlias("meetings", "m", JoinType.LEFT_OUTER_JOIN) 
```

# php - 如何在 php 中使用 curl 将访问密钥作为 HTTP 标头传递

> ID：12512706
> 
> 赞同：4
> 
> 时间：2012-09-20T12:36:30.377
> 
> 标签：php, api, rest

如何在 PHP 中发送下面提到的 CURL 请求？我将在 php 中使用哪些函数？

```
$ curl -H 'X-Sifter-Token: 343b1b831066a40e308e0af92e0f06f0' \
-H 'Accept: application/json' \ 
'http://example.sifterapp.com/api/projects' 
```

我已经尝试过这段代码..但它不起作用..请做必要的事情

```
$curlString = "";

$curlString .= "-H \"X-Sifter-Token: 343b1b831066a40e308e0af92e0f06f0\" \";

$curlString .= "-H \"Accept: application/json\" \";

$url="http://example.sifterapp.com/api/projects";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_HTTPHEADER, $curlString);
$data = curl_exec($ch);
if (curl_errno($ch)) {
print "Error: " . curl_error($ch);
} else {
// Show me the result
var_dump($data);
curl_close($ch);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T12:41:41.213

你没有正确使用`CURLOPT_HTTPHEADER`。从手册：

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

> CURLOPT_HTTPHEADER要设置的 HTTP 标头字段**数组，格式为**`array('Content-type: text/plain', 'Content-length: 100')`

所以你需要：

```
 curl_setopt($ch, CURLOPT_HTTPHEADER, array(
        'X-Sifter-Token: 343b1b831066a40e308e0af92e0f06f0',
        'Accept: application/json',
  )); 
```

# c - Tcl 和 C 线程的动态共享内存空间

> ID：12512708
> 
> 赞同：0
> 
> 时间：2012-09-20T12:36:34.147
> 
> 标签：c, multithreading, tcl

我想在 Tcl 和 C 线程之间有一个动态共享内存空间。

该线程共享内存空间的大小是在运行`xxx_Init (Tcl_Interp *interp) {...}`过程时分配的，但我想根据 Tcl 变量分配一个空间，以优化内存使用。

可能吗？如果是，该怎么做？

编辑：提供的详细代码显示了我想要做什么和我的问题。

指向包含共享数据的结构的指针将作为客户端数据与调用的过程共享，该过程`testCmd`在两个 Tcl 变量之后分配内存空间大小。它还作为客户端数据与新创建的线程共享。C 扩展在下文中有详细说明**，但由于内存空间不在线程之间共享**，应在`xxx_Init (Tcl_Interp *interp) {...}`过程中定义，因此不起作用。但如果我这样做，我就无法获得指定要分配的内存空间大小的 Tcl 变量。

```
 #include <tcl.h>

typedef struct dataHandle_ {
    char *data ;
    long p1 ;
    long p2 ;
} dataHandle_T ;

// Thread function
// Test if we can write memory space allocated by 'testCmd0' function
static void startRoutine (ClientData clientData) {
    dataHandle_T *dH = (dataHandle_T *) clientData;
    //test
    FILE *file;
    file=fopen("testFile.txt", "w");
    while (1) { 
        int mul=dH->p1*dH->p2;
        if (mul<10) {
            dH->data="A";
        } else {
            dH->data="Large str";
        }
        fprintf(file, "Memory size is %d, word is %s ", mul, dH->data);
    }
    fclose(file);
}

// Test command
// Allocating a new memory space for thread shared memory, depending on 2 Tcl variables values
int testCmd(
    ClientData data,
    Tcl_Interp *interp,
    int objc,
    Tcl_Obj *CONST objv[])
{
    dataHandle_T *dH = (dataHandle_T *)data ;

    // Check the number of arguments
    if (objc != 3) {
        Tcl_WrongNumArgs(interp, 1, objv, "arg arg");
        return TCL_ERROR;
    }

    long p1, p2, result ;

    if ( Tcl_GetLongFromObj(interp, objv[1], &p1) != TCL_OK)
        return TCL_ERROR ;

    if ( Tcl_GetLongFromObj(interp, objv[2], &p2)  != TCL_OK)
        return TCL_ERROR ;

    // Is a re-allocation needed?
    if (dH->p1 != p1 || dH->p2 != p2) {
        if (dH->data != NULL)
            Tcl_Free(dH->data) ;
        dH->data = Tcl_Alloc(p1 * p2 * sizeof(char)) ;// Or whatever allocation you need
    }

    return TCL_OK ;

}

// Create thread launching startRoutine procedure with a dataHandle_T as argument
createThread_Cmd(
    ClientData cdata,
    Tcl_Interp *interp,
    int objc,
    Tcl_Obj *const objv[])
{

    // Contain the ID of the newly created thread
    Tcl_ThreadId id;    
    // Thread argument
    ClientData limitData;

    // Transfering global var argument to the created thread
    limitData=cdata;

    // Thread creation
    id=0;
    Tcl_CreateThread(&id, startRoutine, limitData, TCL_THREAD_STACK_DEFAULT, TCL_THREAD_NOFLAGS);

    // Return thread ID to tcl prog to allow thread management
    Tcl_SetObjResult(interp, Tcl_NewIntObj((int) id));
    return TCL_OK;  
}

// Note the casing on the _Init function name
int DLLEXPORT

Test_Init(Tcl_Interp *interp)
{
    // Link with the stubs library to make the extension as portable as possible
    if (Tcl_InitStubs(interp, "8.1", 0) == NULL) {
        return TCL_ERROR;
    }

    // Declare which package and version is provided by this C code
    if ( Tcl_PkgProvide(interp, "BasicTclExtn", "1.0") != TCL_OK ) {
        return TCL_ERROR ;
    }

    // Allocate the storage for the ClientData
    dataHandle_T *hD = (dataHandle_T *)Tcl_Alloc(sizeof(dataHandle_T));

    // Initialise the new structure
    hD->data = NULL ;
    hD->p1 = -1 ;
    hD->p2 = -1 ;

    // Create a command
    Tcl_CreateObjCommand(interp, "test", testCmd, (ClientData)hD, (Tcl_CmdDeleteProc *)NULL);
    Tcl_CreateObjCommand(interp, "createThread", createThread_Cmd, (ClientData)hD, NULL);
    return TCL_OK ;
} 
```

执行以下 Tcl 的代码时：

```
load [file join [pwd] libtest[info sharedlibextension]]
test 1 2

set threadId [createThread]
puts "Created thread $threadId"
after 500
# ==Produce an error==
test 4 3
after 500
test 10 20
# =====
exit 1 
```

代码的输出给出（如果产生错误的部分被注释或没有）：

```
$ tclsh test.tcl
Created thread -1227109568
$ tclsh test.tcl
Created thread -1227019456
alloc: invalid block: 0x431abb: 69 2e
Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:57:40.100

_Init 函数中的一个参数是 Tcl_Interp*。因此，您应该能够使用 Tcl_Eval 或其变体之一在该解释器中执行一些 Tcl 代码。然后你应该能够运行一个 Tcl proc 说它返回你想要的值，然后使用 Tcl_GetObjResult() 从 Interp 中检索值。

以下代码适用于我的 _Init 函数：

```
int res ;
if ( Tcl_Eval(interp, "set myVal") != TCL_OK)
    return TCL_ERROR ;

if (Tcl_GetIntFromObj(interp,Tcl_GetObjResult(interp), &res) != TCL_OK)
    return TCL_ERROR ; 
```

使用以下 Tcl 脚本：

```
set myVal 102
load basicTclExtn.dll 
```

值 102 最终出现在 C++ res 变量中。

根据编辑和评论，我最终得到了以下代码，希望能解决您的问题：

首先是 Tcl C 扩展

```
typedef struct dataHandle_ {
    char *data ;
    long p1 ;
    long p2 ;
} dataHandle_T ;

// Test command
int testCmd(
    ClientData data,
    Tcl_Interp *interp,
    int objc,
    Tcl_Obj *CONST objv[])
{
    dataHandle_T *dH = (dataHandle_T *)data ;

    // Check the number of arguments
    if (objc != 3) {
        Tcl_WrongNumArgs(interp, 1, objv, "arg arg");
        return TCL_ERROR;
    }

    long p1, p2, result ;

    if ( Tcl_GetLongFromObj(interp, objv[1], &p1) != TCL_OK)
        return TCL_ERROR ;

    if ( Tcl_GetLongFromObj(interp, objv[2], &p2)  != TCL_OK)
        return TCL_ERROR ;

    // Is a re-allocation needed?
    if (dH->p1 != p1 || dH->p2 != p2) {
        if (dH->data != NULL)
            Tcl_Free(dH->data) ;
        dH->data = Tcl_Alloc(p1 * p2 * sizeof(char)) ;// Or whatever allocation you need
    }

    return TCL_OK ;

}

// Note the casing on the _Init function name
BASICTCLEXTN_API int Basictclextn_Init(Tcl_Interp *interp)
{
    // Link with the stubs library to make the extension as portable as possible
    if (Tcl_InitStubs(interp, "8.1", 0) == NULL) {
        return TCL_ERROR;
    }

    // Declare which package and version is provided by this C code
    if ( Tcl_PkgProvide(interp, "BasicTclExtn", "1.0") != TCL_OK ) {
        return TCL_ERROR ;
    }

    // Allocate the storage for the ClientData
    dataHandle_T *hD = (dataHandle_T *)Tcl_Alloc(sizeof(dataHandle_T));

    // Initialise the new structure
    hD->data = NULL ;
    hD->p1 = -1 ;
    hD->p2 = -1 ;

    // Create a command
    Tcl_CreateObjCommand(interp, "test", testCmd, (ClientData)hD, (Tcl_CmdDeleteProc *)NULL);

    return TCL_OK ;
} 
```

然后是 Tcl 脚本

```
load basicTclExtn.dll
puts [BasicExtnCmd 10 12]
test 1 2
test 3 4 
```

因此，每次根据要测试的前 2 个参数的值调用 test 时，都会重新分配内存。

# c++ - 使用 boost::dynamic_bitset::to_ulong() 的无异常结果

> ID：12512712
> 
> 赞同：0
> 
> 时间：2012-09-20T12:36:41.727
> 
> 标签：c++, boost

当我尝试使用 dynamic_bitset::to_ulong() 将二进制数转换为十进制数时，发生了一件奇怪的事情。我原来的号码是 1010101，十进制是 85。但是，下面的代码会打印 55。我想不通。我的编译器是 MingW。

```
boost::dynamic_bitset<> db(10,BOOST_BINARY(1010101));
cout<<db.to_ulong()<<endl;  //should be 85. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:40:54.073

十进制的 85 是十六进制的 0x55。检查您的 iostream 标志。

```
#include <iostream>
#include <iomanip>

std::cout << std::dec << n << std::endl;  // formats as decimal 
```

# assembly - 标签移动到寄存器和子的含义是什么？

> ID：12512713
> 
> 赞同：2
> 
> 时间：2012-09-20T12:36:42.743
> 
> 标签：assembly, x86, nasm

```
given a a label 
L1: db "beat it",10,0
L2:

what is the meaning of:
mov eax,L2
sub eax,L1 
```

L2 进行注册，标签中的子注册包括字符串

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T14:38:16.053

`MOV EAX,L2`将标签表示的地址移动到寄存器。

与`MOV EAX,[L2]`which 从该地址获取值（内存的内容）不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-18T10:22:41.887

**这是在运行时执行您应该在汇编时执行的操作`mov eax, L2 - L1`以获取这些标签之间的字节数的一种毫无意义的低效方法。** 即让汇编程序`sizeof`为您计算数组，而不是对常量进行硬编码。

通常你会做一些类似`L1_length equ $ - L1`定义组装时间常数的事情。请参阅[$ 如何在 NASM 中工作，究竟是什么？](https://stackoverflow.com/questions/47494744/how-does-work-in-nasm-exactly)

但无论如何，由于符号不在内部`[]`（这是 NASM，而不是其他类型的 Intel 语法），`L1`它是直接操作数；符号的绝对地址（在这种情况下由标签定义）。

例如，`mov eax, L2`将标号的绝对地址放入EAX，用一条`mov r32,imm32`指令。

# android - 重启后的Android AlarmManager

> ID：12512717
> 
> 赞同：30
> 
> 时间：2012-09-20T12:36:54.057
> 
> 标签：android, restart, reboot, alarms

我有一组重启后需要保留的警报。我试过在启动接收器上使用，但它们不会重新启动。我不确定我是否了解启动接收器以及如何重新启动所有警报。我已经有一个接收器来接收我的通知，但不知道我是否可以使用同一个接收器或者是否需要一个新的接收器？

谁能指出我任何好的教程或帮助我？

干杯

代码 ：

```
 DatabaseHandler db = new DatabaseHandler(this);  
    List<UAlarm> alarms = db.getAllAlarms();        
    AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);  
    for (UAlarm ua : alarms) {  
        String programme = ua.getTitle();  
        String startTime = ua.getStart();  
        String endTime = ua.getEnd();  
        String nowPlaying = ua.getChannel();  
        db.addAlarm(new UAlarm(programme, startTime, endTime, nowPlaying, ""));  
        final UAlarm ut = new UAlarm();  
        ut.setTitle(programme);  
        ut.setStart(startTime);  
        ut.setEnd(endTime);  
        ut.setChannel(nowPlaying);  
        ut.setId(db.getLastEntered());  
        String [] bla = startTime.split(":");  
        int hour = Integer.parseInt(bla[0].trim());  
        int minute = Integer.parseInt(bla[1].trim());  
        minute -= 2;  
        Calendar cal = Calendar.getInstance();  
        cal.set(Calendar.HOUR_OF_DAY, hour);  
        cal.set(Calendar.MINUTE, minute);  
        Intent intenta = new Intent(this, NotificationMenu.class);  
        String name = programme;  
        intenta.putExtra("name", name);  
        intenta.putExtra("id", db.getLastEntered());  
          PendingIntent pendingIntent = PendingIntent.getBroadcast(this, ua.getId(),  
            intenta, PendingIntent.FLAG_CANCEL_CURRENT);  
          am.set(AlarmManager.RTC_WAKEUP,  
            cal.getTimeInMillis(), pendingIntent);      
    }  
} 
```

NotificationMenu 是通知，这就是我使用 AlarmManager 的原因

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-20T12:39:36.750

> 我不确定我是否了解启动接收器以及如何重新启动所有警报。

只需调用您的代码来调用`setRepeating()`（或其他） on `AlarmManager`。

例如，在[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/AlarmManager/Scheduled)中，`PollReceiver`设置为接收`BOOT_COMPLETED`。在`onReceive()`中，它重新安排警报：

```
package com.commonsware.android.schedsvc;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.SystemClock;

public class PollReceiver extends BroadcastReceiver {
  private static final int PERIOD=5000;

  @Override
  public void onReceive(Context ctxt, Intent i) {
    scheduleAlarms(ctxt);
  }

  static void scheduleAlarms(Context ctxt) {
    AlarmManager mgr=
        (AlarmManager)ctxt.getSystemService(Context.ALARM_SERVICE);
    Intent i=new Intent(ctxt, ScheduledService.class);
    PendingIntent pi=PendingIntent.getService(ctxt, 0, i, 0);

    mgr.setRepeating(AlarmManager.ELAPSED_REALTIME,
                     SystemClock.elapsedRealtime() + PERIOD, PERIOD, pi);
  }
} 
```

# java - 测试气味....这是好习惯吗？

> ID：12512724
> 
> 赞同：1
> 
> 时间：2012-09-20T12:37:06.037
> 
> 标签：java, junit4, mockito, spring-test, spring-test-mvc

我有两个测试，它们完全相同...除了两件事，它们调用两个单独的服务调用..因此，当我使用 mockito 时，我有两个单独的期望和验证行...

这就是我所做的：

```
@test
TestA {
   baseTest("player");
}

@test
TestB {
  baseTest("member");

}

BaseTest(type type) {
  ....
  .....
  if type(player) {
    Mockito.when(player service call)
  }
  else {
    Mockito.when(member service call)
  }

  // make the call in code

  //verify

  if(player) {
     verify player specific service call...
  }
  else {

  }
} 
```

我认为以上是测试气味...只是感觉不对...

有没有比在我的 baste 测试中放置 If 语句更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:45:04.733

任何你看到重复的 if 语句的地方，你都可以使用多态性。您应该在超类 BaseTestSuper 中抽象“玩家服务调用”和“成员服务调用”方法，它也将拥有现有的 BaseTest 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:48:30.907

你应该独立开发你的测试代码，并在它们有意义时加入它们。

举个例子。初始化代码（Arrange/Act/Assert 的第一个 A）的一个经验法则是：

1.  您应该在测试中编写测试方法的所有 Arrange 部分。
2.  如果您的方法与所有其他方法共享初始化，则将其放入 @Setup 方法中
3.  如果某些测试方法不共享该初始化，则可能是因为它不适合该测试用例。

所以我的结论是：

1.  编写独立测试
2.  如果他们分享你可以重构的东西
3.  但不要太多（或者像“如果”这样奇怪的事情）！！！增加了复杂性，而不是重用。

事实上@artbristol 的回答是有道理的：如果你使用 if 的替代行为考虑多态性。只是我不确定直到哪一点测试是否复杂（如果代码正在测试类似的类层次结构，这可能是有意义的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:05:22.473

一般来说，你不应该给你的测试增加任何复杂性。首先，您可能会在那里犯错（即使在简单的 if 中）。其次，您的测试不再是文档，这意味着您无法轻易理解测试类的使用场景和行为。

所以它是一种气味。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:43:11.590

我仍然会分别实现 2 个测试类。代码长度和重复对于测试来说并不重要，代码可读性、完整性和正确性是优先考虑的。鉴于此，只需分别实现 2 个测试用例。

# javascript - 从链接中删除动态命名的表单

> ID：12512725
> 
> 赞同：0
> 
> 时间：2012-09-20T12:37:05.910
> 
> 标签：javascript, jquery

我想将表单名称传递给函数，然后确认它们已被读取以删除它，然后我想更改操作然后提交表单。

```
function deletePhone(myForm){
   var r=confirm('Are you sure you want to delete this phone?');
   if(r==true){
       $(myForm).attr("action","index.cfm?deleteThis=1");
       $(myForm).submit();
   }
} 
```

currentrow 是我正在使用的一个变量，因为我正在创建多个表单，并且它保存表单的 currentCount。

```
 <a href="javascript:deletePhone('EditPhone_form_#currentrow#');">X Delete Phone</a> 
```

**例子：**

*   EditPhone_form_1
*   EditPhone_form_2
*   EditPhone_form_3
*   EditPhone_form_4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:44:14.373

似乎当您根据 ID 进行 jQuery 查找时，它的格式不正确。

尝试这个：

```
 function deletePhone(myForm){
       var r=confirm('Are you sure you want to delete this phone?');
       if(r==true){
          $('#'+myForm).attr("action","index.cfm?deleteThis=1");
          $('#'+myForm).submit();
       }
    } 
```

**注意额外添加的#**

编辑：您还没有发布表单的整个 HTML，但大概标签在表单本身中，对吧？如果是，那么你也可以试试这个：

`<a href="javascript:deletePhone($(this));">X Delete Phone</a>`

```
 function deletePhone(link){
       var r=confirm('Are you sure you want to delete this phone?');
       if(r==true){
          var form = link.closest('form');
          form.attr("action","index.cfm?deleteThis=1");
          form.submit();
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:41:56.240

您可以在表单中添加隐藏字段，而不是更改操作。如果是表单名称，您应该使用`$("[name='"+myForm+"']")`to 元素。`myForm`

```
$("[name='"+myForm+"']").append("<input type='hidden' value=1 name=deleteThis />"); 
```

所以你的代码将是。

```
 function deletePhone(myForm){
       var r=confirm('Are you sure you want to delete this phone?');
       if(r==true){
          $("[name='"+myForm+"']").append("<input type='hidden' value=1 name=deleteThis />");
          $("[name='"+myForm+"']").submit();
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:02:31.817

我宁愿看到您使用 jQuery 事件绑定而不是使用 onclick 事件：

```
function deletePhone(e){
    e.preventDefault();
    var r = confirm('Are you sure you want to delete this phone?');
    if(r){
        $(this)
            .closest('form')
            .attr("action","index.cfm?deleteThis=1")
            .submit();
    }
}

$(".remove-phone").on("click", deletePhone); 
```

并使用如下标记：

```
<a href="#" class="remove-phone">X Delete Phone</a> 
```

# css - img：IE 中的内容 css 问题

> ID：12512728
> 
> 赞同：3
> 
> 时间：2012-09-20T12:37:15.273
> 
> 标签：css, internet-explorer, image

我为此创建了一个 CSS 类：

```
.nav-right-EmployeeEmail {
content: url('../app_resources/nav-blue-email60.png');
padding-top:5px;
width:60px;
} 
```

并在 aspx 文件中使用它，如下所示：

```
<img class="nav-right-EmployeeEmail" alt="FT Logo" /></a> <a target="_self" href="index.aspx" title="Help Desk"> 
```

我这样做是为了确保图像/徽标将来是否更改，然后我只需要在 css 文件中更改它，它将反映在每个页面上。

问题是图像没有在 IE9 中显示。我只能看到图像占位符，但看不到实际图像。请注意，在`<img>`标签内`<a>`。任何帮助将不胜感激！

![在此处输入图像描述](../Images/03ac7245380965fd65a98c6357663a8d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:40:40.140

是的，它确保只有在图像更改时才需要更改 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:40:09.313

如果您想要做的是将您的徽标定义给某个元素，请这样做：

```
.nav-right-EmployeeEmail:before {
    content: url(../app_resources/nav-blue-email60.png);
    padding-top:5px;
    width:60px;
} 
```

并像这样创建您的元素，例如：

```
<a class=nav-right-EmployeeEmail target="_self" href="index.aspx" title="Help Desk">some link</a> 
```

演示：http: [//jsfiddle.net/UP88d/](http://jsfiddle.net/UP88d/)

# r - R如何对加权数据进行分箱

> ID：12512736
> 
> 赞同：4
> 
> 时间：2012-09-20T12:37:48.707
> 
> 标签：r, binning

嗨，我正在尝试在 ggplot 中绘制直方图，但我的数据没有所有值，而是值和出现次数。

```
value=c(1,2,3,4,5,6,7,8,9,10)
weight<-c(8976,10857,10770,14075,18075,20757,24770,14556,11235,8042)
df <- data.frame(value,weight)
df
   value weight
1      1   8976
2      2  10857
3      3  10770
4      4  14075
5      5  18075
6      6  20757
7      7  24770
8      8  14556
9      9  11235
10    10   8042 
```

任何人都会知道如何对值进行分箱或如何绘制分箱值的直方图。
我想得到一些看起来像的东西

```
 bin  weight
1   1-2   19833
2   3-4   24845
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:45:39.747

这是一种对数据进行分箱的方法：

```
df$bin <- findInterval(df$value,seq(1,max(df$value),2))
result <- aggregate(df["weight"],df["bin"],sum)
# get your named bins automatically without specifying them individually
result$bin <- tapply(df$value,df$bin,function(x) paste0(x,collapse="-"))

# result
   bin weight
1  1-2  19833
2  3-4  24845
3  5-6  38832
4  7-8  39326
5 9-10  19277

# barplot it (base example since Roman has covered ggplot)
with(result,barplot(weight,names.arg=bin)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:46:32.770

我会添加另一个变量来指定分箱，然后

```
df$group <- rep(c("1-2", "3-4", "5-6", "7-8", "9-10"), each = 2) 
```

使用 ggplot 绘制它。

```
ggplot(df, aes(y = weight, x = group)) + stat_summary(fun.y="sum", geom="bar") 
```

![在此处输入图像描述](../Images/6d80a3c1877ceeba4767599372db0cfd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:43:18.103

只需扩展您的数据：

```
value=c(1,2,3,4,5,6,7,8,9,10)
weight<-c(8976,10857,10770,14075,18075,20757,24770,14556,11235,8042)
dat = rep(value,weight)
# plot result
histres = hist(dat) 
```

如果您想要直方图数据的详细信息，则 histres 包含一些可能有用的信息。

# .net - 为什么我的连接字符串属性在 My.Settings 对象上不可用？

> ID：12512745
> 
> 赞同：1
> 
> 时间：2012-09-20T12:38:12.557
> 
> 标签：.net, vb.net

我创建了一个 .settings 文件并添加了一个名为*InvoiceConnection*的连接字符串设置，但这并没有出现在`My.Settings`对象的 Intellisense 中。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:22:48.083

根据我的评论，您不必创建新的设置文件，只需使用使用`My Project`选项卡中的设置文件时创建的设置文件，然后智能感知将显示您正在寻找的属性。

# c# - 如何在 Silverlight 中使用图像名称（字符串）查找图像

> ID：12512760
> 
> 赞同：1
> 
> 时间：2012-09-20T12:38:33.127
> 
> 标签：c#, silverlight, .net-4.0, silverlight-4.0

我创建了一个包含多个控件的页面，在此我必须获取页面中的图像。我将图像名称作为字符串值。我做了一个 for 循环来查找图像并返回，但是如果循环页面中的所有控件如果它更多并且它也需要很多时间，那么它是乏味的。

// 传递字符串并查找为图像

```
Image imgBack = FindControl<Image>((UIElement)Layout, typeof(Image), strSelectedimg); 
```

// 查找图片的函数

```
public T FindControl<T>(UIElement parent, Type targetType, string ControlName) where T : FrameworkElement
{
        if (parent == null) return null;
        if (parent.GetType() == targetType && ((T)parent).Name == ControlName)
        {
            return (T)parent;
        }
        T result = null;
        int count = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < count; i++)
        {
            UIElement child = (UIElement)VisualTreeHelper.GetChild(parent, i);
            if (FindControl<T>(child, targetType, ControlName) != null)
            {
                 result = FindControl<T>(child, targetType, ControlName);
                 break;
            }
         }
         return result;
     } 
```

有没有其他简单的方法可以使用字符串值在页面中查找图像。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:10:36.827

如果您使用 Silverlight Toolkit，那么您不需要自己维护这个帮助器方法，因为它已经提供了一个类似的扩展方法。

```
using System.Linq;
using System.Windows.Controls.Primitives;

// ...

private void DoStuff()
{
    var myImage = this.MyRootLayoutPanel.GetVisualDescendants().OfType<Image>()
        .Where(img => img.Name == "MyImageName").FirstOrDefault();
} 
```

**或者**，我不知道你的确切情况，但如果你正在制作一个正确的模板`Control`而不是一个简单的`UserControl`or `Page`，你就这样做

```
public class MyFancyControl : Control
{
    public MyFancyControl()
    {
        this.DefaultStyleKey = typeof(MyFancyControl);
    }

    // ...

    public override void OnApplyTemplate()
    {
        var myImage = this.GetTemplateChild("MyImageName") as Image;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:45:57.387

也许您可以在添加图像的同时构建查找。如果您发布在运行时添加图像的代码，我可以给您更准确的答案；但我在想这样的事情：

```
private Dictionary<string, Image> _imageLookup;

private class ImageInfo
{
    public string Name { get; set; }
    public string Uri { get; set; }
}

private void AddImages(ImageInfo[] imageInfos)
{
    this._imageLookup = new Dictionary<string, Image>();
    foreach (var info in imageInfos)
    {
        var img = CreateImage(info.Name, info.Uri);
        if (!this._imageLookup.ContainsKey(info.Name))
        {
            this._imageLookup.Add(info.Name, img);
        }
        AddImageToUI(img);
    }
}

private Image CreateImage(string name, string uri)
{
    // TODO: Implement
    throw new NotImplementedException();
}

private void AddImageToUI(Image img)
{
    // TODO: Implement
    throw new NotImplementedException();
} 
```

然后您可以稍后轻松找到该图像：

```
public Image FindControl(string strSelectedImg)
{
    if (this._imageLookup.ContainsKey(strSelectedImg))
    {
        return this._imageLookup[strSelectedImg];
    }
    else
    {
        return null; // Or maybe throw exception
    }
} 
```

如果您需要查找的不仅仅是图像，您可以使用`Dictionary<string, Control>`or`Dictionary<string, UIElement>`代替。

# java - Java不断检查日期

> ID：12512762
> 
> 赞同：0
> 
> 时间：2012-09-20T12:38:35.907
> 
> 标签：java, date, polling, system-tray

有没有办法让位于系统托盘中的 Java 程序不断检查计算机日期？也许不是每一秒，而是每一分钟左右？可以在不占用所有计算机资源的情况下完成吗？

目前我正在考虑运行一个日期检查方法，它只会检查按钮按下时的日期，但这有点蹩脚，不会像我想要的那样真正工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:41:31.717

您可以使用[-`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)仅使用您的`checkDate`方法所需的资源（+ 一点不明显的开销）。

```
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
Runnable r = new Runnable() {
    @Override
    public void run() {
        checkDate();
    }
};
scheduler.scheduleAtFixedRate(r, 1, 1, TimeUnit.MINUTES); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:41:55.230

您应该查看调度库，如[Quartz](http://quartz-scheduler.org/)或使用 in 提供的`ScheduledExecutorService`支持`java.util.concurrent`。

# iphone - 用于 UIPageControl 的 iOS 拖放

> ID：12512764
> 
> 赞同：1
> 
> 时间：2012-09-20T12:38:37.973
> 
> 标签：iphone, ios, drag-and-drop, uipagecontrol

有没有办法为 iOS 实现将位于 UIPageControl 第一页的自定义图标拖放到第二页的行为（例如将图标从 iPhone 的主屏幕移动到不同的页面）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:25:40.673

`UIPageControl`只是一个控制器，用于显示点以指示可滚动页面的数量`UIScrollView`。

您需要使用`UIScrollView`和使用`UIScrollViewDelegate`.

# java - AnnotationMethodHandlerExceptionResolver 消息转换器

> ID：12512767
> 
> 赞同：1
> 
> 时间：2012-09-20T12:38:46.737
> 
> 标签：java, spring

我想`AnnotationMethodHandlerExceptionResolver`通过添加杰克逊消息转换器进行配置。问题是我已经`<mvc:message-converters>`通过创建一个 bean 配置了消息转换器，并且我不能在`AnnotationMethodHandlerExceptionResolver`既不使用`ref`中引用它`<mvc:message-conferters>`

```
<mvc:annotation-driven>
    <mvc:message-converters register-defaults="false">
        <bean id="mappingJackson2" class="pl.styall.scylla.json.config.CustomMappingJackson2">
            <property name="objectMapper" ref="jacksonObjectMapper" />
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven>

<bean id="outboundExceptionAdapter"
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver">
    <property name="messageConverters">
        <list>
            <ref bean="mappingJackson2" />
        </list>
    </property>
</bean> 
```

我可以为`<mvc:message-converters>`and定义两个 bean `AnnotationMethodHandlerExceptionResolver`，但这可能不是最好的主意。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:40:33.480

这还不支持，但它在 3.2 backlog 上。所以它可能会在 3.2 中得到支持。

[对于](https://jira.springsource.org/browse/SPR-9469)Spring 功能请求，请参阅[添加](https://jira.springsource.org/browse/SPR-9469)[支持。`<ref>``<bean>``<mvc:message-converters>`](https://jira.springsource.org/browse/SPR-9469)

# c# - 如何在句子的第四个字符后添加逗号？

> ID：12512770
> 
> 赞同：-3
> 
> 时间：2012-09-20T12:38:50.710
> 
> 标签：c#

我对C#一无所知，所以我希望这里有人可以提供帮助。所以我的问题是如何在字符串的第四个字符之后添加“，”。就像是：

**你好？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:41:45.950

您可以使用`.Insert()`：

```
string test = "Hello";
test = test.Insert(4, ","); 
```

您应该检查字符串是否足够长，尽管像这样：

```
if (test.Length > 4) {
     test = test.Insert(4, ",");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:41:58.447

您需要使用[String.Insert](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)并将数字 4 作为参数（因为第一个字符在位置 0 上）

```
string s = "hello";
s = s.Insert(4, ","); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:41:18.463

使用[String.Insert](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)。

例如`myString.Insert(4, ",");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:41:11.107

String.Insert 是答案：

```
string test1 = "Hello";
string test2 = test1.Insert(4, ","); 
```

[http://msdn.microsoft.com/en-us/library/system.string.insert.aspx](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:42:47.017

var str =“你好”；

var finalString = string.Format("{0},{1}",str.Substring(0,4),str.Substring(4));

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T12:42:47.777

使用下面的代码

```
 String str = "Hello";
        str = str.Substring(0, 4) + "," + str.Substring(4, str.Length - 4); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T12:42:47.587

首先，字符串是不可变的，因此您必须创建一个新字符串

```
var sampleString = "Testing";

var resultString = sampleString.Insert(3, ",); 
```

结果字符串是“测试”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-20T12:45:39.957

我将提出插入的替代方案，这样将来的用户就可以使用它来编辑更长的字符串并以不同的间隔输入值，例如。

“你好，我的名字是安德斯”变成了“地狱，哦，我的，名字，e是，安德斯”

C# 中的字符串基本上是一个字符数组，所以你可以循环遍历它，当你到达第四个循环时，你可以插入你的 ,

像这样的东西

```
string hello="hello";
string newvar ="";
foreach(int i =0;i<hello.length;i++)
{
    if(i==4)
    newvar+=",";
    newvar+=hello[i];
} 
```

如果你希望它是每四个空格，你可以检查 0%=4/i

您也可以使用[Substring](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx "子串")将其拆分为多个部分放入您的“，”中并将其重新组合在一起，我建议您查看 Microsoft 主页上字符串类的文档

# gridview - 如何在gridview中合并两个单元格

> ID：12512771
> 
> 赞同：4
> 
> 时间：2012-09-20T12:38:55.490
> 
> 标签：gridview, merge

我在gridview中有一些数据，格式如下：

```
A     B
1     
2     adeel
3
4     sml 
```

现在我想将该行与 B 列下的空单元格合并。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:03:02.103

要合并同一列中的行，您可以使用如下代码：

```
public static void GroupRows(GridView GridView1, int cellNum)
{
    int i = 0, rowSpanNum = 1;
    while (i < GridView1.Rows.Count - 1)
    {
        GridViewRow gvr = GridView1.Rows[i];
        for (++i; i < GridView1.Rows.Count; i++)
        {
            GridViewRow gvrNext = GridView1.Rows[i];
            if (gvr.Cells[cellNum].Text != "" && gvrNext.Cells[cellNum].Text == "") ///here, chould change the term to suit other conditions, such like merging the same content of different rows in a same column.
            {
                gvrNext.Cells[cellNum].Visible = false;
                rowSpanNum++;
            }
            else
            {
                gvr.Cells[cellNum].RowSpan = rowSpanNum;
                rowSpanNum = 1;
                break;
            } 
            if (i == GridView1.Rows.Count - 1)
            {
                gvr.Cells[cellNum].RowSpan = rowSpanNum;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-08T14:16:17.627

您可以根据需要使用“layout:coloumnSpan”或“layout:rowSpan”使对象“合并”在两列或两行上。只需将值设置为 2 即可合并超过 2 行/列。

# android - 通过仅知道其宽度权重来设置视图的高度以使其成为正方形

> ID：12512773
> 
> 赞同：0
> 
> 时间：2012-09-20T12:39:02.273
> 
> 标签：android

我有这种情况：填充容器的水平 LinearLayout 和`weightSum=100`，以及内部的两个视图，每个视图的重量为 50。

现在我如何使这两个视图呈正方形（例如高度必须等于它们的宽度）。LinearLayout 的行数是未知的，所以基本上，在这种情况下，我不能将它们包装在带有权重的垂直容器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:13:54.943

> 现在我如何使这两个视图呈正方形（例如高度必须等于它们的宽度）。

如果您只有这两个视图，`LinearLayout`您有两个选择：

1.  不要将您的布局文件直接设置为内容视图，而是将其膨胀，以便您可以引用该文件的根目录。然后`Runnable`在该根视图上发布一个，计算所需的高度并将其设置回`LinearLayout`包装它们的两个孩子中的每一个：

    ```
    final View v = getLayoutInflater().inflate(
            R.layout.views_specialheight, null);
    v.post(new Runnable() {

        @Override
        public void run() {
            setupHeight((ViewGroup) v);
        }
    });
    setContentView(v); 
    ```

    方法在哪里`setupHeight()`：

    ```
    private void setupHeight(ViewGroup vg) {
        int count = vg.getChildCount();
        for (int i = 0; i < count; i++) {
            final View v = vg.getChildAt(i);            
            if (v instanceof LinearLayout) {
                int width = v.getWidth();
                LinearLayout.LayoutParams lp;
                View one = ((LinearLayout) v).getChildAt(0);
                lp = (LinearLayout.LayoutParams) one.getLayoutParams();
                lp.height = width / 2;
                one.setLayoutParams(lp);
                View two = ((LinearLayout) v).getChildAt(1);
                lp = (LinearLayout.LayoutParams) two.getLayoutParams();
                lp.height = width / 2;
                two.setLayoutParams(lp);
            }
        }
    } 
    ```

    如果您只有一个包装`ViewGroup`这些`LinearLayout`行的包装器子类，则此方法将工作得很好。它可以（并且应该）改进，但我相信你明白这一点。

2.  第二个选项是使用自定义`ViewGroup`（这可能取决于你打算用 做什么`LinearLayout`）而不是`LinearLayout`这样：

    ```
    <com.luksprog.oat.views.SpecialHeightViewGroup
         android:layout_width="match_parent"
         android:layout_height="wrap_content" >

       <Button
           android:id="@+id/button1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:background="#0077cc"
           android:text="Button" />

       <Button
           android:id="@+id/button2"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:background="#99cc00"
           android:text="Button" />
    </com.luksprog.oat.views.SpecialHeightViewGroup> 
    ```

这`SpecialHeightViewGroup`是一个像这样的类：

```
class SpecialHeightViewGroup extends ViewGroup {

public SpecialHeightViewGroup(Context context, AttributeSet attrs,
        int defStyle) {
    super(context, attrs, defStyle);
}

public SpecialHeightViewGroup(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public SpecialHeightViewGroup(Context context) {
    super(context);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);
    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    if (widthMode == MeasureSpec.EXACTLY
            || widthMode == MeasureSpec.AT_MOST) {
        measureChildren(MeasureSpec.makeMeasureSpec(widthSize / 2,
                MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(
                widthSize / 2, MeasureSpec.EXACTLY));
        measureChildren(MeasureSpec.makeMeasureSpec(widthSize / 2,
                MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(
                widthSize / 2, MeasureSpec.EXACTLY));
        setMeasuredDimension(widthSize, widthSize / 2);
    } else {
        widthSize = 800; // we don't have restrictions, make it as big as we want
        measureChildren(MeasureSpec.makeMeasureSpec(widthSize / 2,
                MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(
                widthSize / 2, MeasureSpec.EXACTLY));
        measureChildren(MeasureSpec.makeMeasureSpec(widthSize / 2,
                MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(
                widthSize / 2, MeasureSpec.EXACTLY));
        setMeasuredDimension(widthSize, 400);
    }       
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {      
    View one = getChildAt(0);
    one.layout(0, 0, getWidth() / 2, getHeight());
    View two = getChildAt(1);
    two.layout(getWidth() / 2, 0, getWidth(), getHeight());     
}

} 
```

自定义类未经过适当测试，因此可能存在错误（这只是一个示例）。

题外话：你有没有机会尝试在新的 Windows 手机上创建一个 UI（带有瓷砖的东西）？

# asp.net-mvc - 添加到 EntitySet 不起作用

> ID：12512778
> 
> 赞同：0
> 
> 时间：2012-09-20T12:39:15.843
> 
> 标签：asp.net-mvc, entity-framework, orm, database-first

我正在尝试将对象添加到 MVC 项目中的数据库优先 ORM EntitySet。我使用这样的一段代码：

```
public static Boolean CreateListing(string title, string description)
{
    ListingEntities ce = new ListingEntities();
    ce.Ads.AddObject(new Ad()
    {
        ID = Guid.NewGuid(),
        Title = title,
        Description = description,
    });
    return ce.SaveChanges() == 1;
} 
```

但是，SaveChanges 方法会引发由 SqlClient.SqlException 引发的 Data.UpdateException。后者说

“无法将值 NULL 插入 'ID' 列，表 'Listings.dbo.Ads'；列不允许空值。INSERT 失败。语句已终止。”

我完全同意。我只是不明白为什么当我之前设置它时 ID 应该为空。有什么建议么？

谢谢，
内森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:12:39.707

我团队中的其他人将数据库配置为创建自己的 ID，问题得到解决。

# asp.net - 字符串生成器无法正常工作

> ID：12512782
> 
> 赞同：0
> 
> 时间：2012-09-20T12:39:34.817
> 
> 标签：asp.net, checkbox, stringbuilder

**。CS**

```
protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {
        StringBuilder str = new StringBuilder();
        str.Append("<script language='javascript'>($('#phnoe').show();)</script>");
        ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "chp", str.ToString(), true);
    } 
```

**.aspx**

```
<asp:CheckBox ID="ch_p" Text="phone" runat="server" AutoPostBack="true"
        oncheckedchanged="CheckBox1_CheckedChanged"/>
</div><div id="p" style="float:left;"><asp:TextBox style="float: left;" runat="server" id="phnoe" Visible="false"></asp:TextBox></div></div><br /> 
```

output - on checkedchanged //]]> 出现在页面顶部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:46:07.150

你应该改变这个

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "chp", str.ToString(), true); 
```

至

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "chp", str.ToString(), false); 
```

ScriptManager.RegisterStartupScript 添加 javascript 代码，当所有 Dom 内容都呈现在 Page 上时。

由于您已经在字符串生成器中添加脚本标记，因此无需将 addScriptTag 参数设置为 true。

但是在您的 aspx 标记中，您使文本框可见 =“false”。

```
<asp:TextBox style="float: left;" runat="server" id="phnoe" Visible="false">
</asp:TextBox> 
```

所以它不会呈现，您的脚本将无法显示它。

你应该改变你的标记

```
<asp:TextBox style="float: left;" runat="server" id="phnoe" style="display:none;">
</asp:TextBox> 
```

因此，它可以在 Web 上呈现，但不会显示。因为我们将其显示设置为无。

如果您只想在复选框选中显示它，则无需将其设置为服务器端。你可以很容易地用jquery做到这一点。

所以你的标记应该

```
<div>
   <asp:CheckBox ID="ch_p" Text="phone" runat="server"  />
</div>
<div id="p" style="float:left;">
    <asp:TextBox style="float: left;" runat="server" id="phnoe" style="display:none">
    </asp:TextBox>
</div></div><br /> 
```

像使用 jquery 一样制作 Javascript 代码

```
$(function(){
      $('[ID$=ch_p]').on("click",function(){
           if(this.checked)
               $('[ID$=phnoe]').show();
           else 
               $('[ID$=phnoe]').hide();
      });
}); 
```

它将解决您的问题。

希望它会帮助你。

# c# - 插件项目必须是.NET 3.5 其余代码库是.NET 4.0 怎么解决？

> ID：12512785
> 
> 赞同：2
> 
> 时间：2012-09-20T12:39:43.473
> 
> 标签：c#, add-in, autodesk

[我为Inventor 2012](http://usa.autodesk.com/autodesk-inventor/)编写了一个插件，插件似乎必须是 .NET 3.5。我还没有找到启用 .NET 4 的更新。我的代码库的其余部分是 .NET 4.0，因此我无法从我的加载项代码中引用我的其他项目。有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:43:58.913

不，您可以生成一个单独的进程并与之交谈，但除此之外，运气不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:06:44.007

看起来 Inventor 2013 是为 .Net 4 编译的。这不是我现在可以轻松应用的补丁。

# dependency-injection - Guice 后期绑定/辅助注入的问题

> ID：12512786
> 
> 赞同：0
> 
> 时间：2012-09-20T12:39:44.250
> 
> 标签：dependency-injection, guice

我有一些看起来像这样的代码（简化）：

```
public Reader newInstance(Catalog catalog) {
    Mapper mapper = new Mapper(catalog);
    return new Reader(mapper)
}

public main() {
    // expensive operation
    Catalog catalog = readCatalogFromDatabase();

    Reader reader = Reader.newInstance(catalog);
    // do stuff with reader
} 
```

如何重新设计它以便我仍然创建目录，但 Guice 创建阅读器和映射器？我尝试使用辅助注入，但由于 Catalog 不是 Reader 的直接依赖项，我无法弄清楚如何获取接受目录对象的工厂方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:15:15.343

有两种方法可以做到这一点：

1.  让 Guice 绑定您的目录。这可能意味着将 Catalog 实例传递给您的 Module，但 Modules 可以采用任意数量的构造函数参数，所以这没有问题。在您的模块中，这将如下所示：

    ```
    bind(Catalog.class).toInstance(myVeryExpensiveCatalog); 
    ```

2.  如果您确实需要基于未知或可变的 Catalog 实例创建 Reader，那么您的直觉是使用辅助注入。这就是我让它看起来的样子：

    ```
    class Reader {
      interface Factory {
        Reader create(Catalog catalog);
      }

      @Inject Reader(@Assisted Catalog catalog, OtherDependency etc) {
        this.catalog = catalog;
      }
    }

    class YourModule extends AbstractModule {
      @Override public void configure() {
        install(new FactoryModuleBuilder().build(Reader.Factory.class));
      }
    } 
    ```

    然后你可以`Reader.Factory`通过调用来注入和获取你的读者`readerFactory.create(catalog);`。请注意，`create`可以命名任何东西，并且`Factory`可以在任何位置使用任何名称——这些只是我喜欢的名称和位置。

现在，在[AssistedInject 文档](http://google-guice.googlecode.com/git/javadoc/com/google/inject/assistedinject/FactoryModuleBuilder.html)中，您会看到它们也调用`implement`. 如果是一个接口，您只需要这样做`Reader`，因此 Guice 知道要构建什么样的具体类来满足`create`的返回类型。

希望这可以帮助！

# assembly - 汇编：32 位寄存器无法识别？

> ID：12512790
> 
> 赞同：0
> 
> 时间：2012-09-20T12:40:08.220
> 
> 标签：assembly, 32-bit, tasm

我正在尝试使用 32 位寄存器，因为我需要更大的最大整数值。当我尝试使用 EAX、EBX、ECX 或 EDX 时，TASM 显示 UNDEFINED SYMBOL。TASM 正在将寄存器作为变量读取。知道原因吗？我正在使用 DOSBOX 0.74 并在 Windows 7 64 位上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:48:36.190

TASM 与 Borland Turbo Assembler 一样吗？如果老的东西甚至知道 32 位寄存器，我会感到惊讶:-)

TASM v5 来自大约 15 年前。

从记忆中，有一个 TASM32（这可能是你的包的一部分）可以做到这一点，但我建议使用更现代的汇编程序，比如`nasm`.

# java-me - Java ME 中 .amr 文件的语音或音频播放器

> ID：12512799
> 
> 赞同：0
> 
> 时间：2012-09-20T12:40:30.967
> 
> 标签：java-me, midp, mmapi, audio-player

我正在使用诺基亚 S40 系列手机进行录音。我可以录制消息，但无法播放录制的音频消息。

谁能帮助我如何为录制的 .amr 音频文件编写语音播放器代码？有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:04:34.970

这是我录制和播放声音的工作示例，

```
public class VoiceRecordMidlet extends MIDlet {
      private Display display;

      public void startApp() {
            display = Display.getDisplay(this);
            display.setCurrent(new VoiceRecordForm());
      }

      public void pauseApp() {
      }

      public void destroyApp(boolean unconditional) {
            notifyDestroyed();
      }
}

class VoiceRecordForm extends Form implements CommandListener {
      private StringItem message;
      private StringItem errormessage;
      private final Command record, play;
      private Player player;
      private byte[] recordedAudioArray = null;
      public VoiceRecordForm() {
            super("Recording Audio");
            message = new StringItem("", "Select Record to start recording.");
            this.append(message);
            errormessage = new StringItem("", "");
            this.append(errormessage);
            record = new Command("Record", Command.OK, 0);
            this.addCommand(record);
            play = new Command("Play", Command.BACK, 0);
            this.addCommand(play);
            this.setCommandListener(this);
      }
      public void commandAction(Command comm, Displayable disp) {
            if (comm == record) {
                  Thread t = new Thread() {
                        public void run() {
                              try {
                                    player = Manager.createPlayer("capture://audio");
                                    player.realize();
                                    RecordControl rc = (RecordControl) player.getControl("RecordControl");
                                    ByteArrayOutputStream output = new ByteArrayOutputStream();
                                    rc.setRecordStream(output);
                                    rc.startRecord();
                                    player.start();
                                    message.setText("Recording...");
                                    Thread.sleep(5000);
                                    message.setText("Recording Done!");
                                    rc.commit();
                                    recordedAudioArray = output.toByteArray();
                                    player.close();
                              } catch (Exception e) {
                                    errormessage.setLabel("Error");
                                    errormessage.setText(e.toString());
                              }
                        }
                  };
                  t.start();

            }
            else if (comm == play) {
                  try {
                        ByteArrayInputStream recordedInputStream = new ByteArrayInputStream(recordedAudioArray);
                        Player p2 = Manager.createPlayer(recordedInputStream, "audio/basic");
                        p2.prefetch();
                        p2.start();
                  } catch (Exception e) {
                        errormessage.setLabel("Error");
                        errormessage.setText(e.toString());
                  }
            }
      }
} 
```

# c# - 字符串生成器的目的是什么？

> ID：12512801
> 
> 赞同：4
> 
> 时间：2012-09-20T12:40:33.650
> 
> 标签：c#, .net, mysql

我只做过 C++ 和一些 C#，而且我是 MySQL 新手，我不明白这里的字符串生成器的目的。

此代码是用于从网页中提取数据并使用书签将其插入现有 Word 文件的程序的一部分。

**我的代码**

```
using System.Collections.Generic;
using System.Configuration;
using System.Text;
using MySql.Data.MySqlClient;

namespace ARExtractionLibrary
{
    public class DataExtractor
    {
        #region Attributes
        private string _databaseConfig = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        private const int AR_TRACKER_ID = 10;
        private const int AR_NUMBER_ID = 3;
        #endregion

        #region Methods
        public Dictionary<string, Field> GetFieldData(int TicketID)
        {
            MySqlConnection sqlConnection = new MySqlConnection(_databaseConfig);
            Dictionary<string, Field> fieldsDictionary = new Dictionary<string, Field>();

            StringBuilder queryDefaultFields = new StringBuilder();
            queryDefaultFields.Append("SELECT issues.id AS TicketID, issues.subject, issues.description, ");
            queryDefaultFields.Append(" CONCAT(users.firstname,' ', users.lastname) as Author");
            queryDefaultFields.Append(" FROM issues LEFT JOIN users ON users.id =issues.author_id");
            queryDefaultFields.Append("  WHERE issues.id = @TicketID");

            StringBuilder queryCustomFields = new StringBuilder();
            queryCustomFields.Append("SELECT custom_fields.name, custom_fields.field_format, CONCAT(users.firstname,' ',users.lastname) AS value");
            queryCustomFields.Append(" FROM custom_values");
            queryCustomFields.Append(" LEFT JOIN custom_fields ON custom_values.custom_field_id = custom_fields.id");
            queryCustomFields.Append(" JOIN users ON custom_values.value = users.id");
            queryCustomFields.Append(" WHERE custom_values.customized_id = @TicketId");
            queryCustomFields.Append(" AND field_format = 'user'");
            queryCustomFields.Append(" UNION");
            queryCustomFields.Append(" SELECT custom_fields.name, custom_fields.field_format, custom_values.value");
            queryCustomFields.Append(" FROM custom_values");
            queryCustomFields.Append(" LEFT JOIN custom_fields ON custom_values.custom_field_id = custom_fields.id");
            queryCustomFields.Append(" WHERE custom_values.customized_id = @TicketId");
            queryCustomFields.Append(" AND field_format <> 'user'");

            sqlConnection.Open();

            //First query
            MySqlCommand sqlCommand = null;
            sqlCommand = new MySqlCommand(queryDefaultFields.ToString(), sqlConnection);
            sqlCommand.Parameters.AddWithValue("@TicketId", TicketID);

            MySqlDataReader sqlDataReader = sqlCommand.ExecuteReader();
            while (sqlDataReader.Read())
            {
                Field subject = new Field("Subject", sqlDataReader["subject"].ToString());
                fieldsDictionary.Add(subject.Name, subject);

                Field description = new Field("Description", sqlDataReader["description"].ToString());
                fieldsDictionary.Add(description.Name, description);

                Field ticketID = new Field("TicketID", sqlDataReader["TicketID"].ToString());
                fieldsDictionary.Add(ticketID.Name, ticketID);

                Field author = new Field("Author", sqlDataReader["Author"].ToString());
                fieldsDictionary.Add(author.Name, author);
            }
            sqlDataReader.Close();

            //Second query
            sqlCommand = new MySqlCommand(queryCustomFields.ToString(), sqlConnection);
            sqlCommand.Parameters.AddWithValue("@TicketId", TicketID);
            sqlDataReader = sqlCommand.ExecuteReader();

            while (sqlDataReader.Read())
            {
                string fieldName = sqlDataReader["name"].ToString();
                string fieldValue = sqlDataReader["value"].ToString();
                string fieldFormat = sqlDataReader["field_format"].ToString();

                if (fieldsDictionary.ContainsKey(fieldName))
                {
                    fieldsDictionary[fieldName].Values.Add(fieldValue);
                }

                else
                {
                    Field localField = new Field(fieldName, fieldValue, fieldFormat);
                    fieldsDictionary.Add(localField.Name, localField);
                }
            }
            sqlDataReader.Close();
            sqlConnection.Close();

            return fieldsDictionary;
        }

        public Dictionary<int, string> GetARs()
        {
            Dictionary<int, string> ARDictionary = new Dictionary<int, string>();
            MySqlConnection sqlConnection = new MySqlConnection(_databaseConfig);
            StringBuilder sqlCommandIsAR = new StringBuilder();
            sqlCommandIsAR.Append("SELECT issues.id AS TicketID, issues.tracker_id AS Tracker, issues.subject AS Subject, custom_values.custom_field_id, custom_values.value");
            sqlCommandIsAR.Append(" FROM issues LEFT JOIN Custom_values ON custom_values.customized_id = issues.id ");
            sqlCommandIsAR.Append(" WHERE tracker_id = @IsAR AND custom_field_id = @IsARNumber ");

            sqlConnection.Open();

            MySqlCommand commandGetARs = new MySqlCommand(sqlCommandIsAR.ToString(), sqlConnection);
            commandGetARs.Parameters.AddWithValue("@IsAR", AR_TRACKER_ID);
            commandGetARs.Parameters.AddWithValue("@IsARNumber", AR_NUMBER_ID);
            MySqlDataReader sqlDataReader = null;
            sqlDataReader = commandGetARs.ExecuteReader();

            while (sqlDataReader.Read())
            {
                string DictionaryValue = sqlDataReader["TicketID"].ToString() + " - " + sqlDataReader["Subject"].ToString();

                if (sqlDataReader["value"].ToString().Length != 0)
                {
                    DictionaryValue += " [" + sqlDataReader["value"].ToString() + "]";
                }

                int key = int.Parse(sqlDataReader["TicketID"].ToString());
                ARDictionary.Add(key, DictionaryValue);
            }

            sqlDataReader.Close();
            sqlConnection.Close();

            return ARDictionary;
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T12:42:02.170

`StringBuilder`避免每次添加字符串时都必须重新创建字符串。在 C# 中使用`String`类意味着您使用的是不可变对象，但`StringBuilder`在大多数情况下要快得多，因为它不必每次附加到它时都创建一个新字符串。

因此，一般而言，如果您多次附加到 String ，`StringBuilder`将比仅仅执行`str += "text to append"`（其中 str 是 a `String`）更有效。

不过，这里有一些注意事项需要注意，请参阅[此](https://stackoverflow.com/questions/585860/string-join-vs-stringbuilder-which-is-faster)答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T12:45:54.767

### 一般来说

A`StringBuilder`允许您构建一个字符串，而无需在每次变异操作时为字符串的内容重新分配缓冲区（始终使用相同的缓冲区；仅当字符串扩展超出当前容量时才会重新分配）。这使得构建大字符串的整个过程更加高效。

### 在这段代码中

在这种情况下，根本没有动态构建字符串。字符串实际上是硬编码的。这`StringBuilder`是完全没有意义的；如果字符串是这样的硬编码文字，实际上性能会更好：

```
var queryDefaultFields = @"SELECT issues.id AS TicketID, issues.subject, issues.description,
                           CONCAT(users.firstname,' ', users.lastname) as Author
                           FROM issues LEFT JOIN users ON users.id =issues.author_id
                           WHERE issues.id = @TicketID"; 
```

我的猜测是，这段代码的作者要么被误用`StringBuilder`，因为他们记得读过“这样更快”，但从未真正理解为什么，或者犯了疏忽复制粘贴的罪行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T12:42:55.170

为了提高性能，您将添加大量字符串。众所周知，即使是*引用*类型也`string`表现得像`value`类型。

因此，在每次添加字符串时，都会分配一个**新**的字符串对象。

```
string s = "hello"; 
s += " world"; //NEW STRING OBJECT ALLOCATED 
```

相反，在 的情况下`StringBuilder`，没有任何新的分配，而只是*附加*到它的末尾。

```
StringBuilder queryDefaultFields = new StringBuilder();
queryDefaultFields.Append("hello");   //THE SAME queryDefaultFields OBJECT
queryDefaultFields.Append(" world");  //THE SAME queryDefaultFields OBJECT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:43:45.887

由于 StringBuilder 是可变的（与字符串相反），这意味着您可以在任何给定时间使用 Append（或 AppendLine）方法简单地将数据添加到它，只要您有它的引用。

# c# - 可观察到的集合更改不会反映在 Maps Control 上

> ID：12512813
> 
> 赞同：1
> 
> 时间：2012-09-20T12:41:07.510
> 
> 标签：c#, windows-phone-7, bing-maps, mvvmcross

我正在创建一个应用程序，我在 WP7 上使用 MvvmCross 以及 Bing Maps 控件。我正在尝试将 绑定`MapItemsControl` `ItemSource`到包含type 的属性的`ObservableCollection`of 。是一个简单的类，其中包含有关位置的纬度和经度的信息。我填充到其中的位置由我监听的服务获取，并在它获取位置时更新集合。虽然它似乎不起作用，因为地图上没有显示任何位置。为了绑定s，我制作了一个转换器，它可以简单地转换为可以理解的转换器。我知道转换器在我使用它绑定到属性时工作。`LocationDataSource``MapPosition``GeoPoint``GeoPoint``ObservableCollection``ViewModel``GeoPoint``GeoCoordinate``MapItemsControl``Map` `Center`

绑定看起来像这样：

```
<maps:MapItemsControl x:Name="mapControl" ItemsSource="{Binding Locations}">
    <maps:MapItemsControl.ItemTemplate>
        <DataTemplate>
            <maps:Pushpin Location="{Binding MapPosition, Converter={StaticResource GeoPoint}}" Template="{StaticResource pinSiteLoc}" />
        </DataTemplate>
    </maps:MapItemsControl.ItemTemplate>
</maps:MapItemsControl> 
```

ViewModel 看起来像这样：

```
private ObservableCollection<LocationDataModel> _locations;
public ObservableCollection<LocationDataModel> Locations
{
    get { return _locations; } 
    set
    {
        _locations = value;
        FirePropertyChanged(() => Locations);
    }
} 
```

我尝试了各种方法来更新`Locations`集合，这是在加载并准备好`ViewModel`后在事件处理程序中完成的`ViewModel`，我认为这会起作用：

```
Locations = LocationDataService.Locations; 
```

我检查了`LocationDataService.Locations`它不是空的并且包含一个实际位置。我还尝试将集合实例化为`ViewModel`构造函数，然后将`add`每个元素实例化到集合中，这也没有在地图上显示任何内容。

**编辑** 根据评论中的要求。我已经尝试将这样的位置添加到集合中，它`Locations = new ObservableCollection<LocationDataModel>();`在`ViewModel`构造函数中被实例化。然后在事件处理程序中填充如下：

```
private void LocationDataServiceOnLoadingChanged(object sender, EventArgs eventArgs)
{
    if (LocationDataService.IsInventoryLoaded)
    {
        foreach (var location in LocationDataService.Locations)
        {
            Locations.Add(location);
        }
    }
} 
```

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:18:40.693

正如我对该问题的评论中所述，我在 xaml 文件中发现了一个错误，我过早地关闭了`Map`控制标记，如下所示：

```
<maps:Map
    (..)
    />
<maps:MapItemsControl x:Name="mapControl" ItemsSource="{Binding Locations}">
    <maps:MapItemsControl.ItemTemplate>
        <DataTemplate>
            <maps:Pushpin Location="{Binding MapPosition, Converter={StaticResource GeoPoint}}" Template="{StaticResource pinSiteLoc}" />
        </DataTemplate>
    </maps:MapItemsControl.ItemTemplate>
</maps:MapItemsControl> 
```

相反，它必须是：

```
<maps:Map
    (..)
    >
    <maps:MapItemsControl x:Name="mapControl" ItemsSource="{Binding Locations}">
        <maps:MapItemsControl.ItemTemplate>
            <DataTemplate>
                <maps:Pushpin Location="{Binding MapPosition, Converter={StaticResource GeoPoint}}" Template="{StaticResource pinSiteLoc}" />
            </DataTemplate>
        </maps:MapItemsControl.ItemTemplate>
    </maps:MapItemsControl>
</maps:Map> 
```

# mysql - 将 .my.cnf 给 mysql 命令行

> ID：12512814
> 
> 赞同：29
> 
> 时间：2012-09-20T12:41:08.587
> 
> 标签：mysql, command-line

如何将特定的 .my.cnf 配置文件提供给 mysql 命令行？

```
$ mysql --my-config=.my.cnf

```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-20T12:58:49.333

--defaults-file 选项允许您指定要使用的选项文件。给它提供选项文件的完整路径是个好主意。

```
mysql --defaults-file=/home/user/.my.cnf database 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-20T12:52:46.440

在这里：[http](http://dev.mysql.com/doc/refman/5.5/en/option-files.html) ://dev.mysql.com/doc/refman/5.5/en/option-files.html它说您还可以为其他参数指定“defaults-extra-file”。否则，它默认为各种 my.cnf（取决于操作系统）。

# c# - AutoMapper：如果指定类型的源对象为空，则将目标对象的所有属性设置为默认值

> ID：12512817
> 
> 赞同：4
> 
> 时间：2012-09-20T12:41:11.593
> 
> 标签：c#, automapper, automapper-2

如果指定类的源对象为空，是否可以将 AutoMapper 配置为将所有属性设置为默认值？我知道我应该用它`Mapper.AllowNullDestinationValues = false;`来为应用程序中的所有类做我想做的事情。这是我用于测试的示例代码，但它不起作用

```
public class A
{
    static A()
    {
        Mapper.Initialize(
            config =>
                {
                    config.ForSourceType<B>().AllowNullDestinationValues = false;
                    config.CreateMap<B, A>()
                        .ForMember(member => member.Name, opt => opt.Ignore());
                });
        //Mapper.AllowNullDestinationValues = false;

        Mapper.AssertConfigurationIsValid();
    }

    public void Init(B b)
    {
        Mapper.DynamicMap(b, this);
    }

    public int? Foo { get; set; }
    public double? Foo1 { get; set; }
    public bool Foo2 { get; set; }
    public string Name { get; set; }
}

public class B
{
    public string Name { get; set; }
    public int? Foo { get; set; }
    public double? Foo1 { get; set; }
    public bool Foo2 { get; set; }
} 
```

使用此代码：

```
var b = new B() {Foo = 1, Foo1 = 3.3, Foo2 = true, Name = "123"};
var a = new A {Name = "aName"};
a.Init(b);      // All ok: Name=aName, Foo=1, Foo1=3,3, Foo2=True
a.Init(null);   // Should be Name=aName, Foo=null, Foo1=null, Foo2=False, 
                // but a has the same values as on a previous line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:52:06.910

它必须与已经映射的“a”相关。

```
var a = new A {Name = "aName"};
a.Init(b);
a.Init(null); 
```

所有映射都被缓存，因此如果您尝试重新映射相同的实例，自动映射器只会保留原始结果。

为了测试它，请尝试：

```
 var c = new A {Name = "x"};
        c.Init(null); 
```

这是类似问题的[链接。](https://groups.google.com/forum/?fromgroups=#!topic/automapper-users/8ThkaCk_3fc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:05:15.777

如果您设置，它看起来将替换为 null `Mapper.Configuration.AllowNullDestinationValues = false`：

```
public class A
    {
        static A()
        {
            Mapper.Initialize(
                config =>
                {
                    config.ForSourceType<B>().AllowNullDestinationValues = false;
                    config.CreateMap<B, A>()
                        .ForMember(member => member.Name, opt => opt.Ignore());
                });
            Mapper.Configuration.AllowNullDestinationValues = false;

            Mapper.AssertConfigurationIsValid();
        }

        public void Init(B b)
        {
            Mapper.DynamicMap(b, this);
        }

        public int? Foo { get; set; }
        public double? Foo1 { get; set; }
        public bool Foo2 { get; set; }
        public string Name { get; set; }
    } 
```

# java - Android在膨胀布局时动态居中按钮

> ID：12512828
> 
> 赞同：2
> 
> 时间：2012-09-20T12:41:34.337
> 
> 标签：java, android, android-layout, layout-inflater

我需要动态居中布局，但问题是我使用 inflate 方法添加布局。我希望按钮成为中心。

我尝试添加 xml 属性，如重力、layout_gravity。但它没有用。我尝试添加参数，但由于我膨胀了 xml，我无法添加参数。因为我不能使用 addRule 方法。

然后我尝试通过将重力属性添加到根布局来使每个元素居中，但也没有成功。

这是我的代码。

活动主文件.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <SurfaceView
        android:id="@+id/surfaceView1"
        android:layout_width="match_parent"
        android:layout_height="335dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:id="@+id/buttons_layout"
        android:layout_below="@+id/surfaceView1"
        >

        <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="29dp"
        android:text="Button" />

    </RelativeLayout>

</RelativeLayout> 
```

三按钮布局.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="29dp"
        android:text="Button 1" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="29dp"
        android:text="Button 2" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 3" />

</LinearLayout> 
```

这是我的java代码

```
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);

     inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     parent = (ViewGroup)findViewById(R.id.buttons_layout);

     captureButton.setOnClickListener(new OnClickListener() {

     public void onClick(View v) {
        camera.takePicture(null, null, photoCallback);
        captureButton.setVisibility(View.GONE);
        inflater.inflate(R.layout.three_buttons_layout, parent, true);
            }
        }); 
```

我希望 Button1、Button2 和 Button3 居中。

![截屏](../Images/dc5e04d13b2a144f07f04dd9073e0e1a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:56:28.673

水平 LinearLayout 将始终左对齐其子视图。您将不得不使用 RelativeLayout 以获得您想要的定位。我建议给 button1 android:layout_alignParentLeft 属性，button2 android:layout_centerHorizo​​ntal 属性和 button3 android:layout_alignParentRight 属性，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_gravity="center" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="29dp"
    android:text="Button 1" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="29dp"
    android:text="Button 2" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="Button 3" />

</RelativeLayout> 
```

（我只是在评论编辑器中编辑你的代码，所以那里可能有语法错误，但你明白了。）

此外，您应该能够在膨胀视图后在这些按钮上设置您想要的任何属性。只需调用 findViewById(R.id.button1) 它就会返回您想要的视图（只要它在 inflater.inflate 调用之后）。在那张纸条上，您已经为所有按钮提供了相同的 id，这可能不是一个好主意。

希望有帮助！让我知道它是否仍然无法正常工作。

编辑：我刚刚意识到你需要那个RelativeLayout才能拥有android：layout_width =“match_parent”。我已经相应地编辑了上面的 xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:01:01.183

//试试这个

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center" 
    >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 2" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 3" />

</LinearLayout> 
```

//您可以从父级中删除下面的行，使其水平居中

```
android:layout_gravity="center" 
```

# google-docs-api - Google Docs 上传适用于某些帐户，但不适用于其他帐户

> ID：12512830
> 
> 赞同：0
> 
> 时间：2012-09-20T12:41:39.500
> 
> 标签：google-docs-api

我用 C 语言编写了一个客户端来将文件上传到 Google Docs，我获得了一个身份验证令牌，并将其用于上传。但是，我有 4 个 Google 帐户，上传在 2 个帐户上有效，但在其他 2 个帐户上无效。现在，它只在一个帐户上有效。

在身份验证时，所有帐户的行为都相同，并且 ClientLogin 发出一个“Auth=xxx”令牌。我在一个 Google 帐户上 100% 成功使用了令牌，它曾经在另一个帐户上工作过，但从未在另一个帐户上工作过。

唯一的错误是“HTTP/1.1 401 令牌无效”。

一个帐户过去可以工作，现在不行，这没有多大意义。ClientLogin 调用似乎从不要求验证码。

目前我不能花时间转移到 Drive API，这可能会出现同样的问题。

有什么想法吗？

谢谢

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:48:58.587

您应该将您的代码从 ClientLogin 中移出并改用 OAuth 2.0。您没有提及您的脚本使用什么语言，但 Google 在以下位置提供了一些用于执行 OAuth 2.0 的示例：

[https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_oauth_20](https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_oauth_20)

和

[https://developers.google.com/api-client-library/](https://developers.google.com/api-client-library/)

周杰伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:46:44.183

首先单独尝试它们，如果这有效，您可以开始组合直到所有 4 个有效，逐步完成是成功的方法，我无法帮助您编写代码，因为我只是一个菜鸟： ）虽然我认为自己是 PHP 只是一步一步地做，如果你完成了 1，那么它只是复制/粘贴并更改 abit :)

祝你好运:)

# objective-c - 添加应用内购买 (Cocoa) - 简单教程？

> ID：12512831
> 
> 赞同：0
> 
> 时间：2012-09-20T12:41:40.467
> 
> 标签：objective-c, macos, cocoa, in-app-purchase

对于一个完全的菜鸟，是否有任何推荐的教程来实现应用内购买（非消耗品）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:47:54.317

本教程适用于 iOS，但应该对 OSX 稍作修改（您没有将问题标记为 iOS 或 OSX）：

[应用内购买简介](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:00:01.550

您还可以查看本教程：

[应用内购买：完整的演练](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)

万一你遇到一个常见的“无效的产品 ID”错误（我花了很多时间在这个问题上摸不着头脑），这里有一个很好的清单来检查你是否遗漏了任何东西：

[无效的产品 ID](http://troybrant.net/blog/2010/01/invalid-product-ids/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-04T07:49:20.467

您可以为 Obj-C 的此任务使用一个简单的小助手

[https://github.com/wizalx/WIZPurchaseHelper](https://github.com/wizalx/WIZPurchaseHelper)

首先，您必须向 AppDelegate 添加方法：

```
[[WIZPurchaseHelper sharedInstance] validateProductIdentifiers:@[@"yourId0",@"yourId1"]; 
```

其次，您必须为购买屏幕添加功能。例如：

```
[[WIZPurchaseHelper sharedInstance] payWithIdentefier:@"yourIdent"]; 
```

最后别忘了添加委托方法，它会告诉你购买是否成功！

我在购物时一直使用这个助手，但我变成了自己的经理

# neo4j - Neo4j 可以有效地用于在可排序和可过滤的表中显示节点集合吗？

> ID：12512841
> 
> 赞同：0
> 
> 时间：2012-09-20T12:42:06.970
> 
> 标签：neo4j

我意识到这可能不是理想的用法，但除了 Neo4j 的所有图形优点之外，我想以表格格式显示节点集合，例如 People，具有用于排序和过滤的索引属性

我猜节点的类型可以存储为链接，比如 Bob -> type -> Person，这将允许我们检索所有 People

以下是否可以有效地（索引？）并以可扩展的方式完成？

*   检索所有 People 节点并显示他们的所有姓名、年龄、出生城市等（注意：这些数据中的一些是属性，一些是指向其他节点的链接（为了表格显示和简单起见，可以将其非规范化为属性）
*   显示所有按年龄排序的人
*   显示所有年龄 < 30 的人

还有一个快速的如何做上述（或文档中描述如何做的某个地方的链接）会很可爱

非常感谢！

哦，如果上面不是一个好主意，请提出一个存储解决方案，它允许图形检索和关系检索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:59:06.090

如果要对这些人员节点进行操作，可以将它们放入索引中（默认为 Lucene），然后使用 Lucene 检索和排序节点（例如，请参阅[How do I sort Lucene results by field value using a HitCollector?](https://stackoverflow.com/questions/497609/how-do-i-sort-lucene-results-by-field-value-using-a-hitcollector)关于如何在java中进行自定义排序）。例如，这会让你按年龄排序的人等。Neo4j 中的代码可能看起来像

```
Transaction tx = neo4j.beginTx();
idxManager = neo4j.index()
personIndex = idxManager.forNodes('persons')
personIndex.add(meNode,'name',meNode.getProperty('name'))
personIndex.add(youNode,'name',youNode.getProperty('name'))
tx.success()
tx.finish()

'*** Prepare a custom Lucene query context with Neo4j API ***'
query = new QueryContext( 'name:*' ).sort( new Sort(new SortField(     'name',SortField.STRING, true ) ) )
results = personIndex.query( query ) 
```

对于组合索引查找和图遍历，[Cypher](http://docs.neo4j.org/chunked/snapshot/query-start.html#start-node-by-index-query)是一个不错的选择，例如

```
START people = node:people_index(name="E*") MATCH people-[r]->() return people.name, r.age order by r.age asc 
```

为了返回节点和关系的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:50:10.953

当然，这很容易通过 Neo4j 查询语言[Cypher](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)实现。

例如：

```
start cat=node:Types(name='Person') 
match cat<-[:IS_A]-person-[born:BORN]->city
where person.age > 30
return person.name, person.age, born.date, city.name
order by person.age asc
limit 10 
```

您可以在我们的[密码控制台](http://console.neo4j.org)中进行试验。

# jquery-masonry - 我无法使用 jquery masonry 上的项目类单击 div

> ID：12512842
> 
> 赞同：1
> 
> 时间：2012-09-20T12:42:10.207
> 
> 标签：jquery-masonry

我正在使用砌体。砌体加载页面后，我有以下代码：

```
<div id="main_container">
<div id="container" class="masonry" style="position: relative; height: 655px; width: 1128px;">
    <div class="item masonry-brick" style="position: absolute; top: 0px; left: 0px;">
        <img class="images" src="http://www.elektriklihafifticari.com/ca_images/small/67923429.jpg">
        <p class="note"></p>
    </div>
    <div class="item masonry-brick" style="position: absolute; top: 0px; left: 282px;">
        <img class="images" src="http://www.elektriklihafifticari.com/ca_images/small/30446134.jpg">
        <p class="note"></p>
    </div>
</div> 
```

当我单击任何这些“项目砖石”类时，我想向正文添加一个新的 div。我使用休闲代码来做到这一点：

```
$(".item.masonry-brick").click(function(){
    var body_m=$('body');
    var blur_div=$('<div></div>');
    blur_div.attr('class','blurred');
    body_m.prepend(blur_div);
}); 
```

不幸的是，它不起作用。我尝试了许多不同的解决方案，但未能成功。我意识到，如果我将代码更改为：

```
$("#container").click(function(){
    var body_m=$('body');
    var blur_div=$('<div></div>');
    blur_div.attr('class','blurred');
    body_m.prepend(blur_div);
}); 
```

当我点击 div 时，我得到了我想要的`id=container`。有任何想法吗？谢谢。

已编辑。现在情况出现了一个新问题：

html代码是：

```
<div id="container" class="masonry" style="position: relative; height: 335px; width:    846px;">
    <div class="item masonry-brick" style="position: absolute; top: 0px; left: 0px;">
        <img class="images" src="http://www.dostahediye.com/ca_images/small/230352553.jpg" data-id="1000014037951491000">
        <p class="note">teşekkürler</p>
    </div>
    <div class="item masonry-brick" style="position: absolute; top: 0px; left: 282px;">
        <img class="images" src="http://www.dostahediye.com/ca_images/small/660575147.jpg" data-id="1000014037951491001">
        <p class="note">5 kişi lütfen</p>
    </div>
    <div class="item masonry-brick" style="position: absolute; top: 0px; left: 564px;">
        <img class="images" src="http://www.dostahediye.com/ca_images/small/474047220.jpg" data-id="1000014037951491002">
        <p class="note">7 kişi lütfen</p>
    </div> 
```

当我使用下面的代码来识别单击了哪个 div.item.masonry-brick 时，总是会提醒第一个数据 ID '1000014037951491000'。

```
$("#container").on("click",".item.masonry-brick",function(){

    var data_id=$('img',this).data('id');
    alert(data_id); 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:51:05.803

我猜这些`.item.masonry-brick`元素是动态添加的。

您不能像这样在动态生成的元素上附加事件，

改为使用[。](http://api.jquery.com/on)

```
$("#container").on("click",".item.masonry-brick",function(){
    var body_m=$('body');
    var blur_div=$('<div></div>');
    blur_div.addClass('blurred');
    body_m.prepend(blur_div);
}); 
```

# python - 在 objc 中进行 AES 256 解密时遗漏一些字符

> ID：12512843
> 
> 赞同：1
> 
> 时间：2012-09-20T12:42:18.140
> 
> 标签：python, objective-c, aes, ios6

python（2.6）中加密方法的代码：

```
key += PADDING * (32 - len(key))
pad_it = lambda s: s+(16 - len(s)%16)*PADDING
crypt = AES.new(key, AES.MODE_CBC, 'J2-+sfd%932mIt:{')
data = crypt.encrypt(pad_it(data)) 
```

objc（iOS6）中解密方法的代码：

```
CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt,
                                      kCCAlgorithmAES128,
                                      kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES256,
                                      NULL /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesDecrypted ); 
```

我用python加密了一个plist文件，然后用objc解密，但是在objc（iOS6）中调试时，解密的数据在文件内容的末尾丢失了一些字符。

有没有人也遇到过这个问题，有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:51:02.887

kCCOptionPKCS7Padding 设置不正确，因此 iOS6 正在删除最后一个 16 字节块。iOS5，当padding设置不正确时，会被当作未指定。

# iphone - UITabBar 每次更改为新选项卡，无需滚动到中间

> ID：12512847
> 
> 赞同：1
> 
> 时间：2012-09-20T12:42:26.310
> 
> 标签：iphone, objective-c, uitabbarcontroller, uitabbaritem

我想创建一个包含 15 个项目的 tabBar，可以左右滚动并在中间停止，而不仅仅是每次滚动所有 5 个项目（每次 320 个）

我找到了一个代码并将其更改为显示 5 个项目，但是当我滚动它时，所有选项卡都更改了，下一个选项卡显示了 5 个项目，依此类推...

```
- (id)initWithItems:(NSArray *)items {

         self = [super initWithFrame:CGRectMake(0.0, 411.0, 320.0, 49.0)];
         if (self) {
        self.pagingEnabled = YES;
        self.delegate = self;

        self.tabBars = [[[NSMutableArray alloc] init] autorelease];

        float x = 0.0;

        for (double d = 0; d < ceil(items.count / 5.0); d ++) {
            UITabBar *tabBar = [[UITabBar alloc] initWithFrame:CGRectMake(x, 0.0, 320.0, 49.0)];
            tabBar.delegate = self;

            int len = 0;

            for (int i = d * 5; i < d * 5 + 5; i ++)
                if (i < items.count)
                    len ++;

            tabBar.items = [items objectsAtIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(d * 5, len)]];
            [self addSubview:tabBar];
            [self.tabBars addObject:tabBar];
            [tabBar release];
            x += 320.0;
        }

        self.contentSize = CGSizeMake(x, 49.0);
    }
    return self;
} 
```

如何创建**“橡胶效果”**，例如，我可以在第 7 个项目上停下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:26:39.400

您将不得不使用与您引用的设计不同的设计。如果您仔细查看代码，您会注意到每 5 个项目**创建一个新的选项卡栏**。显然，您希望的功能在此设置中不可行。

另一种方法是用你自己的`UIScrollView`. 准确地获得`UITabBar`. 相反，您可以自由地实现与您的应用程序外观相协调的自己的设计。

# javascript - 显示地图 Google Maps JavaScript API v3

> ID：12512849
> 
> 赞同：2
> 
> 时间：2012-09-20T12:42:34.930
> 
> 标签：javascript, google-maps, joomla

大家好，我尝试使用地理定位为我的网站使用 joomla

我获得了纬度和经度，很好......但不要给我看任何地图在我的代码中，我在 div 内绘制地图

这是我的代码

```
 <script type="text/javascript">
     function init() {
     if (navigator.geolocation) {
     navigator.geolocation.getCurrentPosition(function(position) {
     var myLatlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

    var mapOptions= {
     zoom: 14,
     center: myLatlng,
     mapTypeId: google.maps.MapTypeId.ROADMAP
    };

     var map = new google.maps.Map(document.getElementById('map'), mapOptions);
     var marcador = new google.maps.Marker();
     marcador.setPosition(pos);
     marcador.setMap(map);

     }, function() {
     alert("su navegador no acepta geolocalización");
     });
     }
     }   
     google.maps.event.addDomListener(window, 'load', init);
     </script> 
```

在我的脑海里我有这个

```
 <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js?ver=3.1.2'></script> 
```

他在我的身体里

```
<div id="map"></div> 
```

我读过其他有同样问题的帖子，但我在代码中没有发现错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:56:17.150

您的代码中有一些小错误 - 提示：尝试使用 Chrome 中的 Javascript 控制台查看这些错误：

*   您没有在此处定义“pos”：marcador.setPosition(pos);
*   ...并且您想用它创建一个标记，因此您必须使用 LatLng 对象
*   给你的 div 一个宽度和高度（如果你还没有在你的 CSS 文件中这样做的话）

[这是一个 JSFiddle 修复了所有错误](http://jsfiddle.net/BTN2c/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:54:40.840

在哪里`pos`定义？这很可能会导致 JS 错误，从而阻止地图显示。

```
marcador.setPosition(pos); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:55:00.290

给你的 div 一个大小（宽度和高度）：

```
<div id="map" style="width:400px;height:300px"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:55:48.597

您需要为 #map 设置宽度和高度值，并确保调用 init()

这是我的jsfiddle：http: [//jsfiddle.net/3MTtc/1/](http://jsfiddle.net/3MTtc/1/)

# powershell - 向对象添加额外的属性？

> ID：12512850
> 
> 赞同：0
> 
> 时间：2012-09-20T12:42:36.957
> 
> 标签：powershell

我想从远程计算机列表中获取特定位置的文件列表。我希望输出具有文件名、上次写入时间和它来自的计算机名称。

文件的属性不包括计算机名称。那么如何在输出中构建包含计算机名的文件列表呢？

`$serverlist = Get-Content c:\jasonbe\Serverlist.txt foreach ($server in $serverlist) {Get-ChildItem '\\server\c$\location\Ultimate\Retail\Bin\' | Select Name, LastWriteTime, Length Get-ChildItem '\\server\c$\location\Ultimate\Retail\Reports\*.rpt' | Select Name, LastWriteTime, Length }`

希望我有道理:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:56:25.803

尝试像这样更改选择：

```
Select Name, LastWriteTime, Length,  {$server} 
```

# javascript - HTML5 组合多个画布并实时更新

> ID：12512852
> 
> 赞同：0
> 
> 时间：2012-09-20T12:42:43.297
> 
> 标签：javascript, html, html5-canvas

我正在尝试结合改变颜色以响应消费者选择的画布。我已将 PNG 放置在多个具有透明背景的画布上。我需要组合它们并保存最终图像的 png 以传递到篮子并发布到我的服务器。任何人都可以帮忙吗？[您可以在http://www.ewe.potberrys.com/colour_image_3.php](http://www.ewe.potberrys.com/colour_image_3.php)查看页面和代码。请原谅代码的质量。我是新人:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:56:50.680

我建议不要保存PNG。只需将颜色与您的订单一起保存（无论如何您都必须这样做）并使用您在选择器工具中执行的相同方法在篮子中渲染头盔。

可能有可能（但我不是 100% 确定）在 Chrome 中的客户端生成图像并通过隐藏表单发布，但堆栈太实验性了，还没有准备好投入生产。

更简单一点，可以在服务器端使用 ImageMagic 和 PHP 来完成。我不是 PHP 专家，但您可以轻松地用谷歌搜索示例代码 - 有很多。

我的建议：不要打扰。只需整理你的 JavaScript，它就可以使头盔在多个维度的多个地方可用。

# php - 使用 PHP 解析文本文件

> ID：12512853
> 
> 赞同：-1
> 
> 时间：2012-09-20T12:42:43.207
> 
> 标签：php, parsing, file-io

> **可能重复：**
> [帮我用 PHP 解析这个文件](https://stackoverflow.com/questions/1917666/help-me-parse-this-file-with-php)

我需要从文本文件中提取一些文本。假设有一个文本文件`http://site.com/a.txt`

该文件的内容是这样的：

```
var $name= 'name1';
var $age= 'age2';
var $phone= 'phonenumber';
var $a= 'asd';
var $district= 'district23'; 
```

如何在单独的 echo 中获取此文本文件（name1、age2、phonenumber、asd、district）的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:44:36.647

使用该[`file`](http://ir.php.net/manual/en/function.file.php)函数将文件读入数组。然后遍历数组，文件中的每一行将是数组中的另一个元素。因此，请确保您的文件在数据之间有换行符。

当然，最好的办法是在 .php 文件中准备好 PHP 代码，然后将其包含在`include`函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:50:31.670

像这样组织文本文件的内容：name1,age2,phonenumber,asd,district

并这样做：

```
// Get the content of your file
$content = file_get_contents('a.text');
// Set your values with this
list($name, $age, $phone, $a, $district) = explode(',', $content);

// Then feel free to echo wathever you want
echo 'Name ' . $name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:55:18.810

使用数组并对其进行编码：[http ://uk.php.net/manual/en/function.json-encode.php](http://uk.php.net/manual/en/function.json-encode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T12:47:46.320

我建议使用一个类来封装你的数据......

所以想象一下有一个名为“person.php”的文件，看起来像这样......

```
class Person
{
    public $Name;
    public $Age;
    public $Phone;
    public $A;
    public $District;
} 
```

然后，您可以将 person 类用作容器。

```
include_once('person.php');

$person = new Person();
$person->Name = 'John Doe';
$person->Age = 52;
$person->Phone= '+441234 567 890';
$person->A = 'asd';
$person->District = 'District23'; 
```

请注意，“Age”是易变的（即，如果对象存在的时间过长，则年龄会出错！）您可以通过存储出生日期然后在 Person 对象上使用 getAge() 函数来避免这种情况，从而为您提供正确的任何时间点的年龄。

Person 类是一个普通的 PHP 对象，但您可以添加添加与 Person 概念相关的行为的函数，因此 getAge() 函数将存在于 Person 类上。

最后，您可以使用 PHP 的序列化和反序列化函数将对象存储在您喜欢[的](http://www.php.net/manual/en/function.unserialize.php)[任何](http://php.net/manual/en/function.serialize.php)位置。代表您的对象的存储字符串如下所示：

```
O:6:"Person":5:{
    s:4:"Name";s:8:"John Doe";
    s:3:"Age";i:52;
    s:5:"Phone";s:15:"+441234 567 890";
    s:1:"A";s:3:"asd";
    s:8:"District";s:10:"District23";
} 
```

以下是您如何将 序列化为`$person`如下所示：

```
$serializedPerson = serialize($person);
echo $serializedPerson; 
```

从字符串转换回 Person 也很容易：

```
$serializedPerson = 'O:6:"Person":5:{s:4:"Name";s:8:"John Doe";s:3:"Age";i:52;s:5:"Phone";s:15:"+441234 567 890";s:1:"A";s:3:"asd";s:8:"District";s:10:"District23";}';

$newPerson = unserialize($serializedPerson);

echo $newPerson->Name; 
```

**概括**

因此，如果您以这种序列化格式存储数据，则很容易将其直接转换为您可以使用的 PHP 对象，而无需手动解析字符串。如果需要，您可以将字符串存储在文本文件中 - 或数据存储。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:49:10.857

我不会为您提供解决方案代码，而是将其分解为几个步骤。

0) 以机器可读的格式写入文件，例如姓名、年龄、电话号码

1) 逐行读取文件

2）根据您使用的分隔符划分每行，例如“，”

3) 将值读入变量

4) 回声

如果您遇到更具体的问题，请告诉我们。

# r - 使用 plot.mc 的图形

> ID：12512856
> 
> 赞同：1
> 
> 时间：2012-09-20T12:42:44.420
> 
> 标签：r

我需要关于使用 plot.mc 的累积分布图上的一些图形的帮助

我正在做的一个例子如下：

```
Require(mc2d)
ndvar(10000)
test<-mcstoc(rbetagen,type="V",shape1=48, shape2=66.42, min=0, max=4000)
hist(test)
test<-mc(test)
plot(test) 
```

这绘制了“测试”的累积分布。

我想要做的是从 x 轴上的特定点（比如 1800）向上绘制一条垂直线，它触及累积分布线，然后在 Y 轴上对应于 1800 的点绘制一条线x 轴。

我查找了 help(plot.mc) 和 help(plot.stepfun) 但似乎都无法做到这一点。

非常感谢，

提摩太

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:08:57.797

看`?arrows`

```
plot(test)
arrows(x0=0, y0=.745, x1=1800, y1=.745, code=0, lty=2)
arrows(x0=1800, y0=0, x1=1800, y1=.745, code=0, lty=2) 
```

![在此处输入图像描述](../Images/922ed6c58ee813fa0e7c1344c4ffc968.png)

# java - 延迟与解耦架构建议

> ID：12512862
> 
> 赞同：0
> 
> 时间：2012-09-20T12:42:48.960
> 
> 标签：java, spring, design-patterns, architecture, latency

我正在设计系统架构。（Java EE/Spring）

该系统的主要因素是**低延迟**。（从端到端谈论大约 1 ms 和更少）

我们已经为这个实时系统计划了几个组件。

我向各位专家提出的问题：我知道耦合和解耦的所有优点（故障转移、分离、维护、扩展等）

我在这里面临的问题是：

例如，假设我在机器 A（app1）和机器 B（app2）上有两个不同的应用程序。

请求必须通过两台机器。两台机器处理完请求后，最终答案将发送给客户端。

这两者之间的集成延迟肯定会比在同一台机器下拥有这些应用程序（网络时间等）更高。

另一方面，我可以自己更新和维护每个应用程序，而无需依赖同一台机器。故障转移、集群、负载平衡也是如此

你会给我什么建议？我应该考虑什么？延迟与解耦和维护

谢谢，雷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:57:45.247

> 请求必须通过两台机器。两台机器处理完请求后，最终答案将发送给客户端。

它可以增加 0.1 到 0.2 毫秒。这可能是可以接受的。

> 另一方面，我可以自己更新和维护每个应用程序，而无需依赖同一台机器。

您更有可能更新软件而不是硬件。Hadrware 通常可以在非高峰时间（例如周末）进行更新

> 故障转移也是如此，

您拥有的机器越多，您的故障点就越多。

> 聚类

如果您将所有内容都放在一台机器上，您可能不需要集群。

> 负载均衡

如果您需要使用多台机器，这更有意义。

如果您有一个 Web 应用程序，1 毫秒是相当激进的目标。如果您有网络服务，例如交易系统，则可以根据您的要求实现亚毫秒甚至亚 100 微秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:21:43.497

处理相同请求的机器越多，延迟就越多——这是显而易见的。此外，消除应用程序之间的所有边界 - JVM、线程，并将它们实现为在同一线程上按顺序调用的 2 个过程。

在一种情况下，更多的机器可以减少延迟：在一台机器上分配负载等以释放资源（处理器），以消除拥塞。让不同的工具（货币、股票）在不同的机器上交易。

# php - 如何使用 Symfony2、Doctrine2 执行存储过程

> ID：12512868
> 
> 赞同：5
> 
> 时间：2012-09-20T12:43:08.207
> 
> 标签：php, mysql, symfony, stored-procedures, doctrine-orm

我正在使用以下代码：

```
use Doctrine\ORM\Query\ResultSetMapping;
...
...
...
...
$em    = $this->get( 'doctrine.orm.entity_manager' );
$rsm   = new ResultSetMapping();
$query = $em->createNativeQuery( 'CALL procedureName(:param1, :param2)', $rsm )
            ->setParameters( array(
                'param1' => 'foo',
                'param2' => 'bar'
            ) );
$result = $query->getResult();
//$result = $query->execute(); // Also tried

$em->flush();
die(var_dump($result)); 
```

我在 $result 参数中没有得到任何东西。谁能告诉我如何从 Symfony 2.0.15 中的存储过程中获取结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T02:46:00.287

我建议使用 plain `PDO`。在下面的示例中，我调用存储过程并获取`OUT`参数的值。

过程`IN`和`OUT`参数：

```
CREATE PROCEDURE `CLONE_MEMBER_PRODUCT` (IN ID INT, OUT NEW_ID INT)
BEGIN
    /* ... */
END; 
```

`getWrappedConnection()`返回的实例`Doctrine\DBAL\Driver\Connection`只是一个包装器`PDO`

```
/* @var $connection \PDO */
$connection = $this->getEntityManager()
    ->getConnection()
    ->getWrappedConnection();

$stmt = $connection->prepare('CALL CLONE_MEMBER_PRODUCT(?, @NEW_ID)');
$stmt->bindParam(1, $id, \PDO::PARAM_INT);
$stmt->execute();

$stmt = $connection->query("SELECT @NEW_ID");
$id = $stmt->fetchColumn(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:49:42.110

您尚未添加任何结果集映射信息。请参阅[此处](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html#examples)获取示例。

# wcf - 在自定义服务通道中关闭和中止

> ID：12512873
> 
> 赞同：0
> 
> 时间：2012-09-20T12:43:25.357
> 
> 标签：wcf, abort, faulted

我的客户端正在使用一个抛出异常的 WCF 服务（例外：通信对象 System.ServiceModel.Channels.ServiceChannel 不能用于通信，因为它处于故障状态）。所有后续调用都抛出相同的异常。

我在互联网上读到客户端需要关闭（）/中止（）通道，这将解决问题。完全正确吗？

另外我正在使用服务开发人员提供的客户 serviceChannel 工厂。当我创建通道时，它不显示关闭和中止方法。那么，当我在客户端创建自定义服务通道实例时，如何获得这些关闭和中止方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:55:56.397

假设您有一个实现 IClientChannel 接口的代理实例，这里有一种方法（希望是正确的方法）来使用它。

```
IClientChannel clientChannel = (IClientChannel)proxy;
bool success = false;

try
{
    // do something with the proxy
    clientChannel.Close();
    success = true;
}
finally
{
    if (!success)
    {
        clientChannel.Abort();
    }
} 
```

您可能还想检查[一下](https://stackoverflow.com/questions/573872/what-is-the-best-workaround-for-the-wcf-client-using-block-issue)。您可以使用共享类或函数来包装您的操作。

# liferay - 如何修改 Asset Publisher portlet 上显示的链接？

> ID：12512874
> 
> 赞同：3
> 
> 时间：2012-09-20T12:43:31.373
> 
> 标签：liferay, liferay-6, article, assets, journal

要求如下，

当发布新的 Web 内容（对应于特定结构，例如 A）时，它应该在 Asset Publisher portlet 上自动更新（Asset Publisher 的默认功能）。

默认情况下，Web 内容的标题是在 Asset Publisher 上显示为不同 Web 内容的链接。而不是这个，我希望结构 A 的元素（比如名称）的内容显示为链接。单击此链接应打开一个包含相应 Web 内容的**Alloy UI 弹出窗口。**

为此，我使用钩子创建了一个新**的“显示样式”** jsp（调整了**abstracts.jsp**）。

在以下位置编写了此脚本`.jsp`：

```
<%
String personName=null;
JournalArticle journalArticle=null;
String myContent=null;
Document document = null;
Node node=null;
Node node1=null;
Node node2=null;
Node node3=null;
int noOfWords=0;
String pic=null;
String aboutMe=null;

double version=0;

try {
    version=JournalArticleLocalServiceUtil.getLatestVersion(assetRenderer.getGroupId(), "14405");
    journalArticle = JournalArticleLocalServiceUtil.getArticle(assetRenderer.getGroupId() , "14405",version);

    myContent = journalArticle.getContent();    

    document = SAXReaderUtil.read(new StringReader(myContent));        
    node = document.selectSingleNode("/root/dynamic-element[@name='personName']/dynamic-content"); 

    if (node.getText().length() > 0) {            
        personName = node.getText();        
    }    

    node1 = document.selectSingleNode("/root/dynamic-element[@name='pic']/dynamic-content");
    if (node1.getText().length() > 0) {         
        pic = node1.getText();
    }

    node2 = document.selectSingleNode("/root/dynamic-element[@name='noOfWords']/dynamic-content");
    if (node2.getText().length() > 0) {
        noOfWords = Integer.parseInt(node2.getText());        
    }

    node3 = document.selectSingleNode("/root/dynamic-element[@name='aboutMe']/dynamic-content");
    if (node3.getText().length() > 0) {            
        aboutMe = node3.getText(). substring(0,noOfWords)+"....";        
    }
} catch (PortalException e) {
    e.printStackTrace();
} catch (DocumentException e) {
    e.printStackTrace();
}
%> 
```

但是这里`articleId`需要硬编码。

我想在`articleId`发布新的网络内容时获取这里，即动态发布。

这里应该使用哪个 API？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:40:21.813

这种方法在 Liferay 的最新版本 - Liferay 6.1.1 CE GA2 上适用于我，但我认为它也应该在没有任何更改的情况下对以前的版本有效。

简而言之，您可以使用 AssetEntry 实例的 getClassPK() 方法。

在所有显示 jsps 中，您将资产条目作为请求属性：

```
AssetEntry assetEntry = (AssetEntry)request.getAttribute("view.jsp-assetEntry"); 
```

然后获取与资产条目相关联的最新版本的期刊文章，而不是使用：

```
double version = 
        JournalArticleLocalServiceUtil.getLatestVersion(assetRenderer.getGroupId(),
        articleId);
JournalArticle journalArticle = 
        JournalArticleLocalServiceUtil.getArticle(assetRenderer.getGroupId(), 
        articleId, version); 
```

你可以写：

```
JournalArticle journalArticle = 
        JournalArticleLocalServiceUtil.getLatestArticle(assetEntry.getClassPK()); 
```

希望这可以帮助。

# model - 将 ViewBag 转换为模型

> ID：12512875
> 
> 赞同：0
> 
> 时间：2012-09-20T12:43:36.260
> 
> 标签：model, controller, viewbag

```
public ViewResult Details(int ID)
    {           
        tblMp3 item =  db.tblMp3.Single(t => t.ID == ID);
        ViewBag.Mp3Tags= db.tblTags.Where(c => c.tblMp3.Any(a => a.ID == ID)).ToList();
        return View(item);
    } 
```

这是我的控制器，我读到不建议使用 ViewBag 并且我必须使用 Model 替代但不幸的是我不知道如何做到这一点，任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:50:31.127

在您的视图中，将其添加到第一行：

```
@model YouNamespace.tblMp3 
```

之后，您可以使用模型的属性：

```
<p>@Model.Title</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:51:08.783

只需像这样创建新类：

```
public class Mp3ViewModel
{
   public tblMp3 Item { get;set; }
   public SomeClass Mp3Tags { get;set; }
} 
```

并发送查看。

鉴于您使用：

```
@model namespace.Mp3ViewModel 
```

现在你可以使用`Model.Item`和`Model.Mp3Tags`

# javascript - 在 Android 中使用 Jquery Mobile 和 Phonegap 的 Touchmove 和可滚动内容

> ID：12512879
> 
> 赞同：2
> 
> 时间：2012-09-20T12:43:49.543
> 
> 标签：javascript, android, html, cordova, jquery-mobile

好的，所以我发现使用 Jquery Mobile 和 Phonegap 开发 android App 在 android 4+ 中运行良好，但在旧版本（例如 2.2.2）上，可滚动功能中断。所以我尝试使用 iScroll，但出现了相互矛盾的问题，最终我决定编写一个 Javascript 函数来处理它。它以前可以工作，但现在坏了。

所以这里是：

```
<!DOCTYPE HTML>
    <html>

<head>

<title>Cordova</title>

            <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
            <script type="text/javascript" charset="utf-8" src="js/jquery-1.8.1.min.js"></script>
            <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.2.0-beta.1.min.js"></script>

            <style>
            .scrollstyle{
            height: 320px;
            }
            </style>

            <script type="text/javascript">

             document.addEventListener("deviceready", checkVersion, false);

                function checkVersion() {

                    var droidversion = device.version;

                    myversion = droidversion.substr(0,1);

                    alert(myversion);

                    if ( parseInt(myversion) < 3 ) {
                        alert("do the scroll");
                        setTimeout(function () {
                            var startY = 0;
                            //var startX = 0;
                            var b = document.body;
                            b.addEventListener('touchstart', function (event) {
                                startY = event.targetTouches[0].screenY;
                                //startX = event.targetTouches[0].screenX;
                            });

                            b.addEventListener('touchmove', function (event) {
                                event.preventDefault();
                                var posy = event.targetTouches[0].screenY;
                                var h = parent.document.getElementById("scrolldroid");
                                var sty = h.scrollTop;

                                //var posx = event.targetTouches[0].screenX;
                                //var stx = h.scrollLeft;
                                h.scrollTop = sty - (posy - startY);
                                //h.scrollLeft = stx - (posx - startX);
                                startY = posy;
                                //startX = posx;
                            });
                        }, 1000);

                    } else {
                        alert("havent done it!");
                        return false;
                    }
                }

            </script>

            <link rel="stylesheet" href="css/jquery.mobile-1.2.0-beta.1.min.css" type="text/css" />

    </head>
    <body>
            <div data-role="dialog" id="main" data-theme="a">

                <div data-role="header" class="header">

                    <h1>Styles</h1>

                </div><!-- /header -->

                    <div data-role="content" data-them="a">

                        <div id="scrolldroid" class="scrollstyle">

                                <ul data-role="listview">     
                                    <li>OK, that works, but why is the scrollbar</li>
                                    <li> scrolled down to the bottom of the dialog </li>
                                    <li>fsgsgestcontent, and not at the </li>
                                    <li>Line4</li>
                                    <li>Line5</li>
                                    <li>Line6</li>
                                    <li>Line7</li>
                                    <li>Line8</li>
                                    <li>Line9</li>
                                    <li>Line10</li>
                                    <li>Line11</li>
                                    <li>Line12</li>
                                    <li>Line13</li>
                                    <li>Line14</li>
                                    <li>Line15</li>
                                    <li>Line16</li>
                                    <li>Line17</li>
                                    <li>Line18</li>
                                    <li>Line19</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                    <li>fsgsgesthsdgfeagsdgsdgwe4ghesgaegeg</li>
                                </ul>

                        </div>   

                    </div><!-- /content -->

                <div data-role="footer" class="footermodal">
                    <h1>footer</h1>

                </div><!-- /footer -->

            </div>
        </body>
    </html> 
```

我仍然是一名初级开发人员，所以我的代码并不完美，抱歉。但它应该可以工作，在 Android 3+ 中它不执行该功能，因为滚动已经工作。在 Android 2.9.9 或更低版本中可以。它应该使 div 可滚动，但它没有，它曾经是但后来我以某种方式打破了它，我不知道如何。如果有人知道或可以看到它坏了，我会永远爱你告诉我。谢谢。

**编辑**我还在 Eclipse LogCat 中不断收到一个黄色错误，指出：“我们正在等待 WebCore 对着陆的响应，所以错过了一次拖动”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:29:41.103

尝试替换：

```
<div data-role="dialog" id="main" data-theme="a"> 
```

经过

```
<div data-role="page" id="main" data-theme="a"> 
```

并删除 id**为 scrolldroid的 div**

```
<div id="scrolldroid" class="scrollstyle"> </div> 
```

并替换：

```
<div data-role="footer" class="footermodal"> 
```

经过

```
<div data-role="footer" data-position="fixed" data-tap-toggle="false"> 
```

# c# - 关闭表单覆盖

> ID：12512881
> 
> 赞同：1
> 
> 时间：2012-09-20T12:44:01.807
> 
> 标签：c#, winforms, overriding

我已经创建了一个带有很多表单的 winform 应用程序（在 mdi 和对话框中），但是每次关闭一个表单时它都会保留在内存中，所以我想使用 de .Dispose() 选项。

但我不想将此代码添加到所有表单中，我只想放置一个在 FormClose 命令上激活的代码，我可以使用 en override.onFormClose 命令吗？

以及我在应用程序中的哪个位置放置此代码，我在 MDI 表单中尝试过，但没有成功

谢谢，布拉姆

ps 我正在使用 DevExpress 组件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:48:56.540

如果您调用 GC.Collect() 并且表单仍在内存中，那么这是因为在某处存在对它们的引用。

您需要跟踪所有引用并确保它们被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:49:59.113

创建一个单独的基类，实现你的 dispose 方法，然后从这个类继承所有表单

# java - 根据用户输入更改按钮行为

> ID：12512889
> 
> 赞同：1
> 
> 时间：2012-09-20T12:44:23.063
> 
> 标签：java, android, converter, android-edittext, android-button

我正在用 Android 编写一个简单的应用程序。

我遇到过这个问题：我有两个 EditText 和一个 Button。一个 EditText 的值必须是另一个 EditText 的倍数。

当用户在第一个 EditText 中插入一个值然后按下按钮时，另一个 EditText 应该显示使用用户输入计算的值。这在其他经文中也应该是可能的。

就像一个简单的单位转换器。当我`value1`在 EditText1 中插入并按下转换时，应用程序必须在 EditText2 中显示转换后的值，但如果我在 EditText2 中插入 a`value2`并按下转换按钮，则应用程序必须在 EditText1 中显示转换后的值。我的问题是：如何识别最后一个用户输入在哪个 EditText 中？

```
public void convert(View view) {
    EditText textInEuro = (EditText) findViewById(R.id.euroNumber);
    EditText textInDollar = (EditText) findViewById(R.id.dollarNumber);
    if (toDollar) {
        String valueInEuro = textInEuro.getText().toString();
        float numberInEuro = Float.parseFloat(valueInEuro);
        // Here the conversione between the two currents
        float convertedToDollar = unit * numberInEuro;
        // set the relative value in dollars
        textInDollar.setText(Float.toString(convertedToDollar));
    }

    if (toEuro) {
        String valueInDollar = textInDollar.getText().toString();
        float numberInDollar = Float.parseFloat(valueInDollar);
        //Here the conversione between the two currents
        float convertedToEuro = numberInDollar / unit;
        //set the relative value in dollars
        textInEuro.setText(Float.toString(convertedToEuro));
    }
} 
```

这是编写的代码。我曾想过使用 OnClickListener ..但这不是一个好主意..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:47:08.100

您可以将 TextWatcher 添加到您的两个 EditText 中，以便知道哪个最后更新。

```
public class MainActivity extends Activity {

EditText dollar;
EditText euro;

private static final int EURO = 0;
private static final int DOLLAR = 1;

private int lastUpdated = DOLLAR;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    dollar = findViewById(R.id.dollar);
    euro = findViewById(R.id.euro);

    dollar.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            lastUpdated = DOLLAR;

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    });

    euro.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            lastUpdated = EURO;

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    });

}

public void convert(View view) {
    switch (lastUpdated) {
    case EURO:
        //Do work for euro to dollar
        break;
    case DOLLAR:
        //Do work for dollar to euro
        break;
    default:
        break;
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:12:15.757

我有一个不同的方式，你可以试试这个来实现你想要的：

*   当用户首先进入活动时，让他编辑任何编辑文本字段。（一个正在填充，另一个将被禁用，直到他按下按钮）
*   让他点击按钮
*   一旦结果被填满并且他想编辑其中一个编辑文本，其他编辑文本将自动为空

假设您有 editText_1 和 editText_2，并且您的按钮是 button_1。还采用一个名为 convertBoolean 的布尔变量并将其设为默认值。

现在，

```
editText_1.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {               
             if(convertBoolean==false){
                editText_2.setEnabled(false); //disable other edittext when one is being edited                    
            }
        }
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after){            
        }
        @Override
        public void afterTextChanged(Editable s) {
            String s1=editText_1.getText().toString().trim();
            String s2=editText_2.getText().toString().trim();
            if(!s1.equals("") && !s2.equals("") && convertBoolean==true){
                //of both are filled, empty second edittext                    
                editText_2.setText("");
                convertBoolean=false;
            }    
            if(editText_1.getText().toString().trim().equals("") && convertBoolean==false){
                editText_2.setEnabled(true);
            }             
        }
    });
editText_2.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {                
             if(convertBoolean==false){
                editText_1.setEnabled(false); //disable other edittext when one is being edited                    
            }
        }
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after){            
        }
        @Override
        public void afterTextChanged(Editable s) {
            String s1=editText_1.getText().toString().trim();
            String s2=editText_2.getText().toString().trim();
            if(!s1.equals("") && !s2.equals("") && convertBoolean==true){
                //of both are filled, empty first edittext                    
                editText_1.setText("");
                convertBoolean=false;
            } 
            if(editText_2.getText().toString().trim().equals("") && convertBoolean==false){
                editText_1.setEnabled(true);
            } 
        }
    });
button_1.setOnClickListener(new OnClickListener(){
        public void onClick(){
            convertBoolean=true;
            editText_1.setEnabled(true);
            editText_2.setEnabled(true);
        }
}); 
```

# apache - MAMP 2.0.3 - Apache 根本没有重新启动

> ID：12512895
> 
> 赞同：0
> 
> 时间：2012-09-20T12:44:45.570
> 
> 标签：apache, mamp

过去 2 天我一直在尝试在我的本地主机上安装 IonCube，但它不会出现。今天我尝试更改 PHP 版本以强制进行某种硬刷新，而 MAMP 没有更改版本。

看起来，在我看来，Apache 根本没有重新启动，我怎么能用终端命令或其他东西强制它停止？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:12:21.963

简短而甜蜜的是完全重新启动您的机器，如果您只是本地开发人员，那很好。

# tsql - t - sql 如何将记录与 2 列相交

> ID：12512902
> 
> 赞同：0
> 
> 时间：2012-09-20T12:45:19.753
> 
> 标签：tsql, relational-division

我有 2 列

```
Config      Plant
------      -----
ROC         DEP1  
RET         DEP1  
ROC         UAP1
RET         UAP1
SSL         UAP1
ROC         PLP2
RET         PLP2 
```

如何获取`config`所有`plant`s 相同的记录。

在这个例子中，结果应该是

```
ROC
RET 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:47:51.703

```
SELECT Config
FROM theTable
GROUP BY Config
HAVING COUNT(*) = (SELECT COUNT(DISTINCT(Plant)) FROM theTable) 
```

[SQL小提琴](http://sqlfiddle.com/#!6/d925c/1)

# grails - Grails/SpringSecurity：在 LogoutHandler 中获取语言环境

> ID：12512906
> 
> 赞同：0
> 
> 时间：2012-09-20T12:45:45.227
> 
> 标签：grails, spring-security

在 grails 应用程序中，我成功地获得了用户选择的语言（添加到 url，“...？lang=xx_XX”），如下所示：

```
def locale = RequestContextUtils.getLocale(request) 
```

使用 springsecurity，并设置了一个可以正常工作的特殊注销处理程序

```
grails.plugins.springsecurity.logout.handlerNames = ['securityContextLogoutHandler', 'myLogoutHandler'] 
```

我需要在 myLogoutHandler 中获取用户选择的语言环境，但以下不起作用（它只显示浏览器默认语言环境，而不是用户选择的语言环境）

```
class MyLogoutHandler implements LogoutHandler {
    void logout(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication) {
        def locale2 = RequestContextUtils.getLocale(httpServletRequest);
    }
} 
```

我还尝试使用以下方式获取会话区域设置：

```
RequestContextHolder.currentRequestAttributes().getProperties() 
```

但这给出了相同的结果，有人知道如何从 MyLogoutHandler 获取语言环境吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:49:28.663

**解决方法**

会话似乎已被 spring-security 清除，但您仍然可以发送参数。

所以在我得到的注销页面的控制器中：

```
def index = {
    def myParam = "bar"
    redirect(uri: SpringSecurityUtils.securityConfig.logout.filterProcessesUrl + "?foo=" + myParam) // '/j_spring_security_logout'
} 
```

我只是在 LogoutHandler 中获取参数：

```
void logout(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication) {
    def myParam = httpServletRequest.parameterMap.get("foo")[0]
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:07:49.583

我可以使用以下代码获取语言环境：

```
class CustomLogoutSuccessHandler extends SimpleUrlLogoutSuccessHandler {

    private static final ThreadLocal<Authentication> AUTH_HOLDER = new ThreadLocal<Authentication>()

    void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {
        AUTH_HOLDER.set authentication

        // reading locales...
        request.locales.each {locale ->println locale.toString()}

        try {
            super.handle(request, response, authentication)
        }
        finally {
            AUTH_HOLDER.remove()
        }
    }

    @Override
    protected String determineTargetUrl(HttpServletRequest request, HttpServletResponse response) {
        Authentication auth = AUTH_HOLDER.get()

        String url = super.determineTargetUrl(request, response)

        // do something with the url based on session data..

        url
    }
} 
```

# java - 选择项目后如何填充某些文本字段 JSF 2.0

> ID：12512907
> 
> 赞同：0
> 
> 时间：2012-09-20T12:45:49.993
> 
> 标签：java, jsf-2

我想要这样，当用户在 inputText 字段中选择项目时填充数据库中的数据。

我有一个选择菜单列表：

```
<h:selectOneMenu id="blah" value="#{controller.selected.id}" title="#{bundle.CreateTitle_id}" > 
     <f:selectItems value="#{controller.listOfId()}" />
</h:selectOneMenu> 
```

假设有这样的输入文本：

```
<h:inputText value="In here we place value from backing bean"></h:inputText> 
```

从列表中选择一个项目（包含 id）后，我如何使用我的支持 bean 中的其他数据填充文本字段（假设是一个名称）。

这是我的backingBean：

```
@ManagedBean(name = "controller")
@SessionScoped
public class Bean implements Serializable {

private Catalog current;// here i'm holding int id, String name and other stuff...
private DataModel items = null;
@EJB
private probaSession.CatalogFacade ejbFacade;
private PaginationHelper pagination;
private int selectedItemIndex;

public KatalogController() {
}

public Katalog getSelected() {
    if (current == null) {
        current = new Catalog();
        selectedItemIndex = -1;
    }
    return current;
}

private KatalogFacade getFacade() {
    return ejbFacade;
}

public PaginationHelper getPagination() {
    if (pagination == null) {
        pagination = new PaginationHelper(10) {

            @Override
            public int getItemsCount() {
                return getFacade().count();
            }

            @Override
            public DataModel createPageDataModel() {
                return new ListDataModel(getFacade().findRange(new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
            }
        };
    }
    return pagination;
} 
```

//......

```
public ArrayList<Catalog> listOfId()  { 
          ArrayList<Catalog> list=new ArrayList<Catalog>();
   try{

    String upit="select id from Catalog";

   Statement st=connection.createStatement(); 
   ResultSet rs=st.executeQuery(upit);

   while(rs.next()) {

      Katalog k=new Katalog();
      k.setId(rs.getInt(1));
      k.setName(rs.getString(2));

         list.add(k);

   }

 disconnect();

   }
   catch (Exception ex) {
       ex.printStackTrace();
   }

   return list;
} 
```

差不多就是这样。

如果有什么需要解释的，我在这里。它认为这很容易（比如说使用 ajax），但我什至不知道如何开始这样做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:00:56.323

您必须添加一个`f:ajax`（即标准的，许多组件库提供扩展版本）才能`change`在`inputText`

```
<h:selectOneMenu id="blah" value="#{controller.selected.id}" title="#{bundle.CreateTitle_id}" >
  <f:selectItems value="#{controller.listOfId()}" />
  <f:ajax
     event="change"        <-- The event to capture. I believe that if not specified
                                 there is a default event to capture from
                                 each component (for inputText it would be "change")
     render="myForm:foo"  <-- Only repaint "blah"
     listener="#{controller.myBlahListener}"
</h:selectOneMenu>

<h:inputText id="foo" value="#{controller.fooText}"/> 
```

您的侦听器将读取 中的新值`this.getSelected().getId()`，并更改模型以`controller.getFooText()`返回新值（最简单的方法可能是`this.setFooTest(this.getSelected().getId()`，但这取决于您的模型。

# wifi - 无法使用 aircrack 更改我的 wifi 接口的频道

> ID：12512909
> 
> 赞同：0
> 
> 时间：2012-09-20T12:45:52.387
> 
> 标签：wifi, ubuntu-12.04, aircrack-ng

每当我尝试使用 airodump 收听特定的 wifi 频道时，我都会得到：`fixed channel wlan0: -1`
我尝试更改频道，但它总是 -1！

我使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-08T15:53:19.763

你要做的就是执行`ifconfig wlan0 down`

确保您没有连接到任何无线网络，请尝试：
`airodump-ng -<the channel you want> --bssid<the wireless network you want> mon0`

如果它不起作用，请尝试：

*   `ifconfig wlan0 down`然后
*   `ifconfig mon0 down`然后
*   `iwconfig mon0 mode monitor`然后
*   `ifconfig wlan0 up`然后
*   `ifconfig mon0 up`现在试着闻一闻。

# mysql - 在不同机器上休眠两个同时事务

> ID：12512911
> 
> 赞同：2
> 
> 时间：2012-09-20T12:45:57.343
> 
> 标签：mysql, hibernate, transactions

我在远程网络服务器上有一个订购平台，在我的办公室有一台本地生产机器。两个网络服务器都访问同一个远程 MySQL (InnoDB) 数据库。

我的问题：生产需要几分钟，其中有 2-3 笔交易是开放的。在这个时候，我生成新的发票号码并增加它们。最新的发票编号保存在数据库的 Numbers-Table 中。

```
public Long getNewInvoiceNumber() {
    Criteria crit = getSession().createCriteria(Numbers.class);
    Numbers n = ((Numbers)crit.uniqueResult());
    Long newNumber = n.getInvoiceNumber() + 1L;
    n.setInvoiceNumber(newNumber);
    return newNumber;
} 
```

现在，当有人在生产过程中保存新订单时，他们正在访问相同的 Numbers-Table 以生成另一个编号（不是发票）。生产处理的所有订单都保存有正确的发票编号。但是，Numbers-Table 不会更新为最新值，并且发票编号与生产前相同。

我了解其中一项事务收到“陈旧表”消息。但是 MySQL / Hibernate / Java 的行为是什么？我想从其中一个事务中得到一个异常，这样我就可以回滚并且没有这种危险的数据库不一致。

**编辑：** 这是表格的`Numbers`样子：

```
id | invoice_number | tag_number
0  | 16533          | 1055 
```

`id`是主键。我只访问这一行并增加所需的数量。

**编辑 2：** 好的，我看到这个表结构有点糟糕。我将其更新为：

```
id             | number
invoice_number | 16533
tag_number     | 1055 
```

现在我可以独立访问每一行。不知道这是否解决了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:19:08.853

有不同的方法可以同时使用数据库，例如使用乐观锁或悲观锁（你应该小心后者，因为它可能会导致延迟和死锁）。

但我想在您的情况下，您必须在某些事务开始后立即更改 Numbers 表，而不是在它结束时。这将确保为发票预留空位。

查看 Hibernate 的 Id Generators 也很有意义，您可以看到关于如何实现价值生成机制的不同想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:19:34.787

```
public Long getNewInvoiceNumber() {
    Criteria crit = getSession().createCriteria(Numbers.class);
    crit.setLockMode(LockMode.PESSIMISTIC_WRITE);   // LINE ADDED
    Numbers n = ((Numbers)crit.uniqueResult());
    Long newNumber = n.getInvoiceNumber() + 1L;
    n.setInvoiceNumber(newNumber);
    getSession().update(n);              // LINE ADDED
    return newNumber;
} 
```

如果使用 MySQL，则必须使用 InnoDB，应确保 Hibernate 将“FOR UPDATE”添加到为`crit.uniqueResult()`部件生成的 SQL 中。我还会在之后设置一个 Java 断点（停止执行）并手动测试相同的 SQL 查询会导致另一个客户端阻塞。

这更多是为了测试您的 SQL 服务器是否正常并且您的方言设置是否正确，并且该功能基本上适合您。

这会在生成下一个 InvoiceNumber 时强制在 SQL 服务器上进行序列化。

这样，即使 1000 个用户同时尝试开具发票，您也永远不会得到 2 个相同的 InvoiceNumber。

注意： LockOptions 替换 LockMode 以指定有关并发这一方面的模式。请参阅 hibernate 发行说明以获取帮助。

注意：您谈到了持续几分钟的交易。当交易未提交时，其他用户无法生成新的发票编号。也许您需要将其作为嵌套和单独的事务运行。然后，如果由于其他一些处理错误而无法使用该号码，则 InvoiceNumber 中会出现问题漏洞。会计师/会计系统不喜欢发票号码中的漏洞，也不喜欢它们过时的顺序。

相关 MySQL 文档链接[https://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html](https://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)

# file - 如何正确地从 groovy 调用 shell 命令

> ID：12512919
> 
> 赞同：6
> 
> 时间：2012-09-20T12:46:30.363
> 
> 标签：file, shell, groovy, command

我想从我的 groovy 脚本中执行 shell 命令。我测试了以下内容：

```
"mkdir testdir".execute() 
```

这很好用。现在我想创建一个文件，向文件中写入一些内容，然后打开文本编辑器来查看文件。

```
def execute(cmd) {
   def proc =  cmd.execute()
   proc.waitFor()
}

execute("touch file")
execute("echo hello > file")
execute("gedit file") 
```

现在 gedit 可以正确打开，但文件中没有“hello”字符串。这是如何工作的？！？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T12:54:30.233

您不能在该行中进行重定向：

```
execute("echo hello > file") 
```

所以没有任何东西被写入文件。处理此问题的最简单方法可能是将所有命令包装到单个 shell 脚本中，然后执行此脚本。

`echo`否则，您可以从命令中读取标准输出（不带`> file`），然后在 Groovy 中将其写给`file`自己。

或者你可以这样做：

```
execute( [ 'bash', '-c', 'echo hello > file' ] ) 
```

哪个应该起作用，因为您的`execute`方法只会执行[该`List.execute()`方法](http://groovy.codehaus.org/groovy-jdk/java/util/List.html#execute%28%29)

# ios - ios 部署目标 vs Base SDK

> ID：12512926
> 
> 赞同：0
> 
> 时间：2012-09-20T12:46:57.023
> 
> 标签：ios, xcode

我将 Base SDK 设置为 5.1，部署目标设置为 3.0，当我尝试安装该应用程序时，它仍然说它需要更新的软件版本。我正在测试的 iPhone 有 3.0。我应该尝试回退 SDK 版本吗？

# x86 - 乱序执行会导致推测性内存访问吗？

> ID：12512929
> 
> 赞同：4
> 
> 时间：2012-09-20T12:47:02.920
> 
> 标签：x86, arm, cpu-architecture, powerpc, sparc

当乱序处理器遇到类似

```
LOAD R1, 0x1337
LOAD R2, $R1
LOAD R3, 0x42 
```

假设所有访问都会导致缓存未命中，处理器能否在请求 $R1 甚至 0x1337 的内容之前向内存控制器请求 0x42 的内容？如果是这样，假设访问 $R1 将导致异常（例如，分段错误），我们可以认为 0x42 是推测性加载的，对吗？

顺便说一句，当加载存储单元向内存控制器发送请求时，它是否可以在收到前一个请求的答案之前发送第二个请求？

我的问题并不特别针对任何架构。欢迎与任何主流架构相关的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T22:52:17.203

您的问题的答案取决于您的 CPU 的内存排序模型，这与允许乱序执行的 CPU 不同。如果 CPU 实现了总存储排序（例如 x86 或 Sparc），那么您的问题的答案是 0x42 将不会在 0x1337 之前加载

如果 cpu 实现了一个宽松的内存模型（例如 IA-64、PowerPC、alpha），那么在没有内存栅栏指令的情况下，所有关于哪个将首先访问的赌注都是关闭的。除非您正在执行 IO 或处理多线程代码，否则这应该无关紧要。

您应该注意，某些 CPU（例如 Itanium）确实具有宽松的内存模型（因此读取可能是乱序的）但没有任何乱序执行逻辑，因为它们希望编译器以最佳方式对指令和推测指令进行排序而不是在OOE上花费硅空间

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T19:08:45.477

对于具有多个加载存储单元的超标量 CPU，这似乎也是一个合乎逻辑的结论。如今，多通道内存控制器非常普遍。

在乱序指令执行的情况下，大量的逻辑被用于确定指令是否依赖于流中的其他指令——不仅是寄存器依赖，还包括对内存的操作。还有大量用于处理异常的逻辑：CPU 需要完成流中的所有指令，直到出现故障（或者，将其中的某些部分卸载到操作系统上）。

就大多数应用程序看到的编程模型而言，效果永远不会很明显。正如记忆所见，加载并不总是按预期的顺序发生是隐含的——但在使用缓存时无论如何都是这种情况。

显然，在加载和存储的顺序很重要的情况下*——*例如在访问设备寄存器时，必须禁用 OOE。POWER 体系结构`EIEIO`为此目的提供了很好的说明。

ARM Cortex-A 系列的一些成员提供 OOE - 我怀疑这些设备的功率限制，以及明显缺乏强制排序的指令，加载存储总是按顺序完成

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-29T12:19:56.900

与 x86 相关：[为什么要为其他逻辑处理器导致的 Memory Order Violation 刷新管道？](https://stackoverflow.com/q/55563077). 可观察到的结果将遵守 x86 排序规则，但在微架构上是的，它可以提前加载。（当然这是来自缓存；硬件预取是不同的）。

如果地址还没有准备好进行一次加载，OoO exec CPU 确实会重新排序加载执行。或者，如果它在缓存中丢失，则以后的加载可以在数据到达之前运行。但是在 x86 上，要保持正确性。强内存模型（程序顺序 + 带有存储转发的存储缓冲区），核心根据 ISA 的纸上内存模型保证检查最终结果是否合法。（即之前加载的缓存行仍然有效，因此仍然包含我们现在允许加载的数据）。如果没有，请取消依赖于这种可能不安全的推测的飞行指令并回滚到已知的安全状态。

因此，现代 x86 获得了轻松加载排序的性能（大部分时间），同时仍然保持每个加载实际上都是获取加载的内存模型规则。但是，如果你做了一些管道不喜欢的事情，例如虚假共享（这已经够糟糕的了），就会以管道核武器为代价。

其他具有强内存模型 (Sparc TSO) 的 CPU 可能不会这么激进。弱内存模型允许稍后的加载提前完成。

当然这是从*缓存*中读取的；仅在高速缓存未命中时，内存控制器才会看到需求加载请求。但是硬件预取器可以从 CPU 异步访问内存；这就是他们在 CPU 运行加载它的指令之前将数据放入缓存的方式，理想情况下完全避免缓存未命中。

* * *

是的，内存子系统是流水线的，就像 Skylake 中每个核心有 12 到 16 个未完成的请求一样。（L1<->L2 的 12 个 LFB，以及 L2 中的 IIRC 16 个超级队列条目。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T07:23:36.807

兼容的 SPARC 处理器*必须*实现 TSO，但*也*可以实现 RMO 和 PSO。你需要知道你的操作系统在什么模式下运行，除非你碰巧知道你的特定硬件平台没有实现 RMO 和 PSO。

# jquery - Jquery - 检查所有事件

> ID：12512932
> 
> 赞同：0
> 
> 时间：2012-09-20T12:47:13.727
> 
> 标签：jquery

我需要检查所有 jquery 事件的这些元素：

```
 $('#taskAdd, #unit_qtyAdd, #work_unitAdd').live('{all events}', function(){
   //some code here
   } 
```

这是完整的js：

```
$(document).ready(function(){
$('#taskAdd, #unit_qtyAdd, #work_unitAdd').live('{all events}', function(){
term1 = $('#taskAdd').val();
term2 = $('#unit_qtyAdd').val();
term3 = $('#work_unitAdd').val();
term4=$("#job_task_idAdd").val();
$.ajax({
        type: "POST", 
        url: "",    //the url
        data: "s1="+term1+"&s2="+term2+"&s3="+term3+"&s4="+term4,
        success: function(data) {
        $( "#estimatedAdd" ).val('').val( data );
        $( "#chargedAdd" ).val('').val( data );
        }
    });
    });
}); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:54:50.060

正如我在评论中告诉你的那样：

`.live()`现在已弃用，因此请使用`.on()`.

对于验证，我建议您使用**[jquery.validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)**

这是基本用法：

```
$(form).on('click', 'yourSubmitButton', function() {

    $(form).validate();

}); 
```

* * *

如果您指的是数据绑定，要查看您的字段中实时发生的情况，请尝试查看**[Knockoutjs](http://knockoutjs.com/)**。

# objective-c - 如何在 iOS 中创建旋转轮控件？

> ID：12512936
> 
> 赞同：0
> 
> 时间：2012-09-20T12:47:29.550
> 
> 标签：objective-c, ios, rotation, uicontrol

我想为 iPhone 应用程序创建一个旋转小部件。[这里](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)有类似的东西。但在这个选定的部分是在左边（0度）。它从左侧（0 度）开始填充部分。我想在顶部选择部分（90 度）。

请注意，在我的情况下，部分的数量是奇数。所以调整顶部必须在顶部中心适当调整。

任何帮助，将不胜感激。

提前致谢

萨亚利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:23:33.350

You can use the [iCarousel](https://github.com/nicklockwood/iCarousel) library for that. It is very customizable.

Or maybe you want to try out the new `UICollectionView`, you can customize its layout as well so that it looks like a wheel.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:21:04.687

如果您仔细查看您引用的来源，它会准确地解释它设置起点的位置。首先填写标签然后填写图像时，从哪里开始真的无关紧要。

唯一的区别是车轮周围的图形和左侧的指示器。只需旋转它，你就完成了。

# dynamics-crm-2011 - 在javascript中删除记录

> ID：12512937
> 
> 赞同：0
> 
> 时间：2012-09-20T12:47:34.660
> 
> 标签：dynamics-crm-2011

当当前记录被停用时，我需要删除一些与当前记录相关的记录。当记录被停用时，我可以得到该事件，但是我在 Google 和这个网站上环顾了一段时间，以获取删除 javascript 中记录的代码，但我找不到任何内容，尽管我知道肯定有一些。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:26:44.307

> 我可以用插件来做这件事，我只需要知道如何获取记录已被停用

`SetState`您可以在和`SetStateDynamic`消息上注册一个插件（在您的场景中推荐*Pre*事件）。这些消息中的每一个都将`EntityMoniker`在`InputParameters`属性包中传递一个引用被停用的记录的属性。

在您的代码中，您需要：

1.  检查 SetState 请求中的新状态是否已停用（因为当然通常可以重新激活记录，并且您可能也不想尝试删除内容）
2.  拿起`EntityMoniker`从`IPluginExecutionContext.InputParameters`
3.  运行查询以识别和删除相关记录
4.  退出插件以允许`SetState`交易完成

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T19:14:57.890

如果你真的想用 JavaScript 删除记录，[MSDN](http://msdn.microsoft.com/en-us/library/gg309549.aspx)上有一个示例。

它有点啰嗦（它是一个 CRUD 示例 - 创建、检索、更新和删除）。但它应该包含您需要的信息。

请注意，该页面上还有一个不使用 jQuery 的示例（如果使用 jQuery 有问题）。

也就是说，我认为这个操作会发现使用插件更容易实现、测试和维护（所以我会选择 Greg 的答案）。

Additionally a plugin will apply in all contexts, e.g. if you deactivate the record in a workflow your JavaScript will not run, but a plugin will.

# php - 在 echo php 中需要帮助

> ID：12512939
> 
> 赞同：0
> 
> 时间：2012-09-20T12:47:41.187
> 
> 标签：php

我试图在值标签中默认显示一些文本。我试图在表单值中回显 $row。但是，我注意到未定义的变量。任何人都可以找出错误吗？

```
<?php  
$id=$_GET['id'];
$qry=mysql_query('SELECT * FROM pages WHERE pageid="$id"', $con);
if(!$qry)
{
die("Query Failed: ". mysql_error());
}
while($row=mysql_fetch_array($qry))
{
$row=mysql_fetch_array($qry);
}
?>

<div class="block2">
<p><b>Update Article</b></p>
<form action="article_edited.php" method="post" enctype="multipart/form-data"     name="form1" id="form1">
<p>Article Id &nbsp;&nbsp;&nbsp;:

<label for="image"></label>
<input type="text" name="pageid" id="pageid" value="<?php echo $row['pageid']?>" />
</p>
<label for="image"></label>
<p>Image Path:
<input type="text" name="imgpath" id="imgpath" value="<?php echo $row['imgpath'] ?>" />
</p>
<p>Contents &nbsp;&nbsp;&nbsp;:
<label for="cont"></label>
<textarea name="contents" id="contents" cols="50" rows="5" ><?php $row['text']     ?></textarea>
</p>
<p align="center">
<input type="submit" name="Submit" id="Submit" value="Submit" />
</p>
</form> 
```

更新＃1：这是我正在关注的教程：[http ://www.vdesignourweb.com/cmsphpsqlb/cms_editarticle.html](http://www.vdesignourweb.com/cmsphpsqlb/cms_editarticle.html)

更新#2：这是我的表结构：![数据库信息](../Images/5a63a8181ee1a226750b62fbacf7c252.png)

更新#3：我刚刚发现该表没有索引。这可能是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:49:12.263

您只是`$row`在 while 循环中定义。它没有在 while 循环之外定义。您需要将值存储在数组或其他东西中，以便在while循环结束或在while循环期间执行操作！

```
 $results = array();

    while($row=mysql_fetch_array($qry)){
        $results [] = $row;
    }

    foreach($results as $row){
        echo $row['pageid'];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:51:43.150

如果它是一条记录，您可以检查是否有从查询返回的记录，然后使用

`$row=mysql_fetch_array($qry);`

代替

```
while($row=mysql_fetch_array($qry))
{
$row=mysql_fetch_array($qry);
} 
```

你也可以看看`mysql_fetch_row`. 我建议不要使用 mysql_* ，因为它已经过时且已被弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:52:42.623

修改你的while循环如下：

```
$array=array();
while($row=mysql_fetch_array($qry))
{
    $array[]=mysql_fetch_array($qry);
} 
```

然后，在你的文本区域中，让它说

```
<?php echo $row['text'] //you missed the echo statement ?> 
```

或者，`<?php echo //what you want to echo ?>`您可以简单地使用`<?= //what you want to echo here ?>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:52:51.200

它正在获得一条记录，然后您必须使用单条记录

```
 $row=mysql_fetch_array($qry); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:23:48.240

The last time the `while` loop executes, `$row` is set to `false` because `mysql_fetch_array($qry)` returns `false` when there are no more rows. After the loop, `$row['pageid']` does not exist because `$row` is no longer an array.

I can't tell you how to fix it because I am not sure what you are trying to do in your loop. Should the HTML code after the loop be printed for each row?

```
<?php while ($row=mysql_fetch_array($qry)) { ?>
    <div class="block2">
    ...
    </div>
<?php } ?> 
```

If you only want one result, you should write the query so you only get one result and skip the `while` loop.

```
$row = mysql_fetch_array($qry); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T13:31:40.310

我认为你需要这样做，

```
<?php  
$id=$_GET['id'];
$qry=mysql_query('SELECT * FROM pages WHERE pageid="$id"', $con);
if(!$qry)
{
die("Query Failed: ". mysql_error());
}
while($row=mysql_fetch_array($qry))
{
    $rows[]=$row;
}
?>

<div class="block2">
<p><b>Update Article</b></p>
<form action="article_edited.php" method="post" enctype="multipart/form-data"     name="form1" id="form1">
<p>Article Id &nbsp;&nbsp;&nbsp;:
<?php 
foreach($rows as $row){
?>
<label for="image"></label>
<input type="text" name="pageid" id="pageid" value="<?php echo $row['pageid']?>" />
</p>
<label for="image"></label>
<p>Image Path:
<input type="text" name="imgpath" id="imgpath" value="<?php echo $row['imgpath'] ?>" />
</p>
<p>Contents &nbsp;&nbsp;&nbsp;:
<label for="cont"></label>
<textarea name="contents" id="contents" cols="50" rows="5" ><?php $row['text']     ?></textarea>
</p>
<?php }?>
<p align="center">
<input type="submit" name="Submit" id="Submit" value="Submit" />
</p>
</form> 
```

我希望它可以帮助你。

# blackberry - 电话号码检测和呼叫

> ID：12512940
> 
> 赞同：0
> 
> 时间：2012-09-20T12:47:41.967
> 
> 标签：blackberry, detection, phone-number

我正在开发数据来自网络服务的黑莓应用程序。数据包含不同国家的**电话号码**，并且应用程序中还有**呼叫功能**。我已经使用**ActiveRichTextField**在标签字段中显示数据，以便可以检测到电话号码和电子邮件 ID。它还检测到数字和邮件 ID，但它无法检测到某些数字。有没有人知道如何检测数字，例如**+618 12345678/79**和数据排序。感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:57:54.290

如果您要识别另一个给定字符串中的字符串，则需要查看`PatternRepository`. 这是一个系统管理的字符串集合，用于将上下文菜单添加到给定的字符串。

如果在设备上找到您的字符串，它将显示您定义的菜单。所以你需要子类化`ApplicationMenuItem`并提供你自己的`run()`方法。

以下代码将设置您的设备以识别正则表达式，并在找到该模式时创建上下文菜单项：

```
 // MyAppMenuItem extends ApplicationMenuItem
    MyAppMenuItem appMenuItem = new MyAppMenuItem(0);
    ApplicationMenuItem[] applicationMenu = new ApplicationMenuItem[1];
    applicationMenu[0] = appMenuItem;

    // register the pattern to identify the phone number
    PatternRepository.addPattern(
        ApplicationDescriptor.currentApplicationDescriptor(),
        "*** REGEXP String to recognise phone numbers ***", 
        PatternRepository.PATTERN_TYPE_REGULAR_EXPRESSION,
        applicationMenu); 
```

我发现这在 HTML 字段中不起作用（[BlackBerry - 在 HTML 中截取文本](https://stackoverflow.com/questions/5500415/blackberry-intercept-text-in-html)）。但它几乎可以在我的应用程序的所有其他地方以及其他应用程序（如电子邮件）中使用。如果您只希望它在您的应用程序中工作，您可以在您的应用程序退出时取消注册此模式。

请注意，您可以将许多不同的模式添加到`PatternRepository`您想要识别的每种类型的数字或电子邮件地址中。

# scala - 如何在 Squeryl 中执行删除操作

> ID：12512941
> 
> 赞同：2
> 
> 时间：2012-09-20T12:47:44.497
> 
> 标签：scala, squeryl

我有`A and B(a_id:Long)`实体。

`B`取决于`A`。所以我已经设置了`constrainReference(onDelete cascade)`。一切正常。

但是当我删除时，`A`我想根据`B`. 可以以某种方式拦截`B`'s`onDelete()`并使用 Squeryl 方式执行操作，还是我必须手动执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:12:49.053

在您的架构中尝试：

```
override def callbacks = Seq(
        afterDelete(table) call (record => logger.debug("afterDelete"))) 
```

# javascript - jQuery 下划线表示法

> ID：12512946
> 
> 赞同：3
> 
> 时间：2012-09-20T12:47:49.060
> 
> 标签：javascript, jquery

谁能给我解释一下jQuery插件函数中的下划线？我不知道“ *_* ”是什么意思。下面的示例代码：

```
$.fn.bgStretch=function(o){
    this.each(function(){
        var th=$(this),
            data=th.data('bgStretch'),
            _={
                align:'leftTop',
                altCSS:{},
                css:{
                    leftTop:{
                        left:0,
                        right:'auto',
                        top:0,
                        bottom:'auto'
                    },
                    rightTop:{
                        left:'auto',
                        right:0,
                        top:0,
                        bottom:'auto'
                    },
                    leftBottom:{
                        left:0,
                        right:'auto',
                        top:'auto',
                        bottom:0
                    },
                    rightBottom:{
                        left:'auto',
                        right:0,
                        top:'auto',
                        bottom:0
                    }
                },
                preFu:function(){
                    _.img
                        .load(function(){
                            _.checkWidthFu()
                            _.img 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:53:49.167

正如兰兹评论的那样。这是一个变量。
看看变量是如何声明的：

```
var th=$(this),
    data=th.data('bgStretch'),
    _={..} 
```

另一种方法是：

```
var th=$(this);
var data = th.data('bgStretch');
var _ ={...}; 
```

它也可能被称为`_someVar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:56:20.123

只是一个[`variable`](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Variables)

> JavaScript 标识符必须以字母、下划线 (_) 或美元符号 ($) 开头；后续字符也可以是数字 (0-9)。因为 JavaScript 区分大小写，所以字母包括字符“A”到“Z”（大写）和字符“a”到“z”（小写）。

# java - 我在消费者内部得到 NullPointerException

> ID：12512949
> 
> 赞同：1
> 
> 时间：2012-09-20T12:47:54.427
> 
> 标签：java, multithreading

我正在尝试生产者/消费者问题，但我不知道为什么要 `java.lang.NullPointerException`进入消费者。

```
package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class Producer extends CommonClass implements Runnable {

    private int producerNum;

    Producer(PriorityBlockingQueue<Character> queue) {
        queue = queue;
    }

    public void run() {

        char ch;

        for (ch = 'a'; ch <= 'z'; ch++) {
            queue.add(ch);
            System.out.println("Producer" + producerNum + "produced :" + ch);
            try {
                Thread.sleep((int) (Math.random() * 300));

            } catch (InterruptedException e) {
                System.out.println("Error");
            }

        }

    }

} 
```

这是我的消费类

```
package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class Consumer extends CommonClass implements Runnable {

    private int consumerNum;

    Consumer(PriorityBlockingQueue<Character> queue )
    {
        queue = queue;  
    }

    public void run() {
        char c;

        for (int i = 0; i < 27; i++) {
            c = queue.poll();
            System.out.println("Consumer" + consumerNum + "consumed:" + c);
            try {
                Thread.sleep((int) (Math.random() * 300));
            } catch (InterruptedException e) {
                System.out.println("Error");
            }
        }

    }
}

package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class CommonClass {

     PriorityBlockingQueue<Character> queue = new PriorityBlockingQueue<Character>();

}

package com ;

import java.util.concurrent.PriorityBlockingQueue;

public class SyncTest {

    public static void main(String[] args) {

         PriorityBlockingQueue<Character> queue = new PriorityBlockingQueue<Character>();

        Producer p1 = new Producer(queue);
        Thread t1 = new Thread(p1);
        t1.start();

        Consumer c1 = new Consumer(queue);
        Thread ct1 = new Thread(c1);
        ct1.start();

    }
} 
```

这是我得到的例外：

```
Exception in thread "Thread-1" java.lang.NullPointerException
    at com.Consumer.run(Consumer.java:18)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T12:49:44.133

这是直接的问题：

```
Consumer(PriorityBlockingQueue<Character> queue )
{
    queue = queue;  
} 
```

这是一个无操作语句，将参数的值分配回自身。你要：

```
Consumer(PriorityBlockingQueue<Character> queue )
{
    this.queue = queue;  
} 
```

一旦你解决了这个问题，你就会*因为*调用`poll()`（decalred in ）而遇到潜在的问题，如果队列为空`Queue`，它将返回。`null`然后该空引用将被拆箱以将值分配给`c`变量（类型为`char`）。

使用`take()`(declared in `BlockingQueue`) 代替，这将阻塞。您可能还想指定超时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T12:49:13.007

`Use take instead of poll`poll 可能返回 null。

[JavaDoc#poll()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html#poll%28%29)

> 此队列的头部，如果此队列为空，则返回 null

用于`put`添加和采用`get`哪些阻塞方法。

# mysql - MySQL 按最后一个条目分组

> ID：12512952
> 
> 赞同：3
> 
> 时间：2012-09-20T12:48:00.730
> 
> 标签：mysql

我的表 payment_status 有这些字段：

*   ID
*   付款ID
*   地位
*   创建
*   由...制作

许多条目可能具有相同的 payment_id... 所以，我想获得一个 payment_id 的最后状态...

我有这个可以工作的请求，但加载时间太长......我想要一个优化版本来按 payment_id 分组并获取最后一个状态。

```
SELECT pstatus.*
FROM `payment_status` AS pstatus
WHERE pstatus.id = (
   SELECT id
   FROM `payment_status`
   WHERE pstatus.status = '200'
   ORDER BY created DESC
   LIMIT 1
)
GROUP BY pstatus.payment_id
ORDER BY pstatus.payment_id DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:55:17.893

试试这个查询 -

```
SELECT t1.* FROM payment_status t1
  JOIN (SELECT payment_id, MAX(created) max_created
        FROM payment_status
        GROUP BY payment_id
        ) t2
    ON t1.payment_id = t2.payment_id AND t1.created = t2.max_created; 
```

...然后添加您需要的 WHERE 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:52:48.743

尝试使用`JOIN`：

```
SELECT p1.*
FROM payment_status p1
INNER JOIN
(
    SELECT id, MAX(created) MaxCreated
    FROM payment_status 
    WHERE status = '200'
    GROUP BY id
) p2 ON p1.id = p2.id AND p1.created = p2.MaxCreated
ORDER BY p1.payment_id DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:55:02.060

这应该工作

```
SELECT *
FROM  payment_status
WHERE status = '200'    
ORDER BY created DESC
LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:55:00.140

你不应该能够做到这一点吗？：

（假设 created 是时间戳，所以 "last" = "most recent"）

```
SELECT pstatus.*
FROM `payment_status` AS pstatus
GROUP BY pstatus.payment_id, pstatus.status
ORDER BY pstatus.payment_id DESC, pstatus.created DESC 
```

每行返回都应该有具有最新状态的 payment_id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-28T06:23:55.767

我想你正在使用 MySQL 数据库。

在这里，我有一个快速且易读的解决方案：

```
select 
    substring_index(
        group_concat(status order by created desc)
        , ',', 1
    ) as status_latest 
from payment_status 
group by payment_id 
```

我很确定它比其他 SQL 语句快，你可以试试。

# java - 来自 weblogic 的数据库连接

> ID：12512953
> 
> 赞同：0
> 
> 时间：2012-09-20T12:48:19.433
> 
> 标签：java, oracle, jdbc, weblogic

在本地一切正常，但在远程 Weblogic 上却不是。下一个代码运行没有任何异常。

```
 try
    {
     ods = new OracleDataSource();
     connectionString = XmlReader.getConnectionString();
     ods.setURL(connectionString);
     }
    catch (SQLException ex)
    {
        ex.printStackTrace();
    }
    catch (Exception e) {
        e.printStackTrace();
    } 
```

当我在前一个 ods 对象上调用 getConnection() 时，它不会引发任何异常

```
 try
    {
        if (connection == null || connection.isClosed()) {
            connection = ods.getConnection();
        }
    }
    catch(Exception e) {
        e.printStackTrace();
    } 
```

但最后连接对象为空，例如在调用这个之后

```
CallableStatement cstmt = connection.prepareCall( jobquery ); 
```

在数据库上，它看起来像是应用程序创建了连接，但它没有调用“jobquery”中指定的过程。有什么问题？

我的问题很简单：有没有一种方法可以毫无例外地创建 OracleDataSource，然后从中获取空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:50:25.220

除非您错过了原始问题中的某些代码，否则您似乎没有执行 execute()。

例子：

```
callableStatement.executeQuery(); 
```

阅读此[CallableStatement](http://docs.oracle.com/javase/1.5.0/docs/guide/jdbc/getstart/callablestatement.html)教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:55:06.093

[Nambaris 的回答](https://stackoverflow.com/a/12512990/365237)可能会解决您的直接问题。其他需要考虑的点：

1.  在 weblogic 上，您确实应该使用内置[数据源](http://docs.oracle.com/cd/E13222_01/wls/docs90/jdbc_admin/jdbc_datasources.html)并通过 JNDI 名称查找它们
2.  你确定它不会抛出异常，还是因为在stderr上打印出来而没有看到它？您应该使用日志记录机制和异常传播，而不是打印到输出。

这些与您的问题没有直接关系，只是您从长远来看应该做的事情。

# seo - SEO - 内容脱机时该怎么办

> ID：12512957
> 
> 赞同：0
> 
> 时间：2012-09-20T12:48:26.517
> 
> 标签：seo

我将有一个网站，其中内容在网站上保留 15 天，然后被删除。

我对 SEO 了解不多，但我担心的是搜索引擎对“内容”进行索引对 SEO 的影响，然后有一天它突然消失并留下 404。

我能做的最好的事情是处理以最 SEO 友好的方式来来往往的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:54:26.530

最好的方法是使用 HTTP 状态码 410 进行响应；

来自 w3c：

> 请求的资源在服务器上不再可用，并且不知道转发地址。预计这种情况将被视为永久性的。具有链接编辑能力的客户端应该在用户批准后删除对 Request-URI 的引用。如果服务器不知道或无法确定条件是否是永久的，则应该使用状态代码 404（未找到）。除非另有说明，否则此响应是可缓存的。
> 
> 410 响应的主要目的是通过通知接收者资源故意不可用并且服务器所有者希望删除到该资源的远程链接来协助 Web 维护任务。这种事件对于限时促销服务和属于不再在服务器站点工作的个人的资源很常见。没有必要将所有永久不可用的资源标记为“已消失”或将标记保留任何时间 - 这由服务器所有者自行决定。

更多关于状态码[的信息](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:54:11.917

为了保持流量，可以选择不删除但存档旧内容。因此，它仍然可以通过其旧 URL 访问，但在您网站存档中的一些更深的点链接。

如果你真的想删除它，那么返回 404 或 410 是完全可以的。蜘蛛知道该资源不再可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:55:30.640

大多数搜索引擎都使用一种叫做 robots.txt 的文件。您可以指定希望搜索引擎忽略哪些 URL 和路径。因此，如果您的所有内容都位于 www.domain.com/content/*，那么您可以让 Google 忽略您网站的整个分支。

# c++ - 销毁和重新创建对象是否会使指向该对象的所有指针无效？

> ID：12512961
> 
> 赞同：9
> 
> 时间：2012-09-20T12:48:34.417
> 
> 标签：c++, pointers, destructor, object-lifetime

[这是对这个问题](https://stackoverflow.com/q/12472556/57428)的跟进。假设我有这个代码：

```
class Class {
    public virtual method()
    {
        this->~Class();
        new( this ) Class();
    }
};

Class* object = new Class();
object->method();
delete object; 
```

这是[这个答案](https://stackoverflow.com/a/12472665/57428)所暗示的简化版本。

`method()`现在，一旦从对象生命周期内调用析构函数`object`，调用代码中的指针变量就会变得无效。然后在同一位置创建新对象。

这是否使指向调用中对象的指针再次有效？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T13:33:43.380

这在 3.8:7 中得到明确批准：

> ### 3.8 对象生命周期 [basic.life]
> 
> 7 - 如果在对象的生命周期结束后[...]，在原始对象占用的存储位置创建一个新对象，则可以使用指向原始对象的指针[...]操作新对象，如果：（*在这种情况下满足各种要求）*

给出的例子是：

```
struct C {
  int i;
  void f();
  const C& operator=( const C& );
};
const C& C::operator=( const C& other) {
  if ( this != &other ) {
    this->~C(); // lifetime of *this ends
    new (this) C(other); // new object of type C created
    f(); // well-defined
  }
  return *this;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T12:53:47.923

严格来说，这很好。但是，如果不*加倍小心*，它就会变成一块丑陋的UB。例如，任何调用此方法的派生类都不会重新构造正确的类型，或者如果`Class()`抛出异常会发生什么情况。此外，这并没有真正完成任何事情。

它不是严格意义上的 UB，而是一大堆废话和失败，应该一见即焚。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T12:57:26.387

指针在`object`任何时候都不会变得无效（假设你的析构函数没有调用`delete this`）。您的对象从未被释放，它只是调用它的析构函数，即它已经清理了它的内部状态（关于实现，请注意标准严格定义对象在析构函数调用后被销毁）。由于您已使用placement new 在完全相同的地址实例化新对象，因此技术上没问题。

C++ 标准的第 3.8.7 节涵盖了这个确切的场景：

> 如果在一个对象的生命周期结束之后并且在对象占用的存储空间被重用或释放之前，在原始对象占用的存储位置创建一个新对象，一个指向原始对象的指针，一个指向原始对象的引用引用原始对象，或者原始对象的名称将自动引用新对象，一旦新对象的生命周期开始，可用于操作新对象 [...]

也就是说，这只是作为学习代码，作为生产代码才有趣，这太可怕了:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:55:00.967

指针只知道它的地址，一旦你确认新对象的地址就是指针所指向的地址，答案是肯定的。

在某些情况下，人们会认为地址不会改变，但在某些情况下它确实会改变，例如在使用 C 时`realloc()`。但那是另一回事了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:30:50.397

您可能需要重新考虑显式调用析构函数。如果您要执行的代码恰好位于析构函数中，则将该代码移至新方法并从析构函数调用该方法以保留当前功能。析构函数实际上是用于超出范围的对象。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-20T12:58:57.560

在已销毁对象的位置创建新对象不会使任何指针再次有效。它们可能指向一个有效的新对象，但不是您最初引用的对象。

您应该保证在销毁原始对象之前已删除所有引用或以某种方式将其标记为无效。

这将是一个特别难以调试的情况。

# c++ - 限制价值的好方法

> ID：12512962
> 
> 赞同：0
> 
> 时间：2012-09-20T12:48:34.287
> 
> 标签：c++, performance, code-standards

我有一个像素亮度限制为 [0..255] 的代码。并且出于某种原因对其进行了评估，因此我可以获得超出范围的价值。我可以

```
(if x>maxValue) x = maxValue; 
```

或者

```
 x = min(x, MaxValue); 
```

或者

`(x > MaxValue) ? MaxValue : x;`

但我想知道什么是好方法？如何通过较少的比较和良好的代码风格来限制一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:50:58.283

对 x 使用无符号字符而不是 int，字符限制为 [0, 255]。这有点棘手，因为您必须检查溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:13:23.650

> 如何通过较少的比较和良好的代码风格来限制一个值？

一个比较是最少的，任何较小的都意味着没有比较。如果需要，请查看[Compute minimum without branching 。](http://www.geeksforgeeks.org/archives/2643)

对于良好的风格，这是最好的 -

```
if (x > maxValue)
{
    x = maxValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:56:27.797

```
inline long clamp(long x, long min, long max){
    return x>max ? max : (x<min ? min : x);
} 
```

您可以编写一个只接受 0 到 255 之间的值的新类，并且可以隐式转换为 int，但使用像 clamp 或 max 之类的东西就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T13:12:12.473

我猜：

```
(x > MaxValue) ? MaxValue : x; 
```

相当于：

```
(if x>maxValue) x = maxValue;
else x = x; 
```

我知道它很有可能会被优化掉等等，或者停止在自我分配等。所以本质上它与第一个 if 相同，只是语法糖衣。

我会使用`min`它，因为它将提供类型安全，并有助于避免比较混合类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:52:16.547

就良好的编码风格而言，您可以创建自己的类来管理此值限制要求。如果重载赋值运算符，则可以在那里进行比较。

**编辑：** 我想您可以将所有代码放在一个函数中。但我认为与类实例交互会更好。

```
BoundedInt x;
x = 300;
x.value(); // x == 255 
```

# jquery - jQuery.validate 忽略密码

> ID：12512965
> 
> 赞同：0
> 
> 时间：2012-09-20T12:48:46.350
> 
> 标签：jquery, validation, jquery-validate

我使用 jquery.validate.js 来验证我们网站上的表单。今天我将验证插件的版本更新到 v 1.9，从那时起我就遇到了现场密码验证的问题。

我找到了为什么会发生这种情况，现在我正在寻找“正确”的方法来解决它。在以前的版本中，方法属性规则如下：

```
attributeRules: function (element) {
            var rules = {};
            var $element = $(element);

            for (var method in $.validator.methods) {
                var value = $element.attr(method);                      
                if (value) {
                    rules[method] = value;
                }
            }    

            // maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs
            if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {
                delete rules.maxlength;
            }

            return rules;
        } 
```

在 1.9 版本中，它看起来有点不同：

```
attributeRules: function (element) {
            var rules = {};
            var $element = $(element);

            for (var method in $.validator.methods) {
                var value;

                // If .prop exists (jQuery >= 1.6), use it to get true/false for required
                if (method === 'required' && typeof $.fn.prop === 'function') {
                    value = $element.prop(method);
                } else {
                    value = $element.attr(method);
                }

                if (value) {
                    rules[method] = value;
                } else if ($element[0].getAttribute("type") === method) {
                    rules[method] = true;
                }
            }

            // maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs
            if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {
                delete rules.maxlength;
            }

            return rules;
        } 
```

据我了解，在以前的版本中，该方法没有检查输入元素的类型属性，也没有添加“密码”验证器。在 1.9 版中，它检查元素是否具有“密码”类型并添加验证器。

问题：
如何告诉 jQuery.validator 忽略“密码”类型的输入？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:24:44.937

查看[忽略选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)。您可以为其提供任何选择器，因此可能对您有用的是：

```
$('form').validate({
    ignore:'input[type="password"]'
}); 
```

如果这太笼统了，我建议在所有适当的输入中添加一个类`ignoreValidation`，然后`'.ignoreValidation'`在`ignore`选项中使用。

# authentication - aws 上的 Web 应用程序中的用户身份验证

> ID：12512973
> 
> 赞同：3
> 
> 时间：2012-09-20T12:49:11.377
> 
> 标签：authentication, web-applications, amazon-web-services

我正在尝试在 AWS 上托管基于 HTML/JS 的应用程序。我需要为这个应用程序实现一个注册/登录功能，现在我明白我必须在这里有一个数据库（mysql 可以工作吗？）。但是，是否有现成的方式来实现诸如用户注册 AWS 上的应用程序之类的东西？我不想自己处理许多安全和身份验证场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-06T21:54:58.903

适用于浏览器的 AWS 开发工具包是为此而设计的：[https ://aws.amazon.com/sdk-for-browser/](https://aws.amazon.com/sdk-for-browser/)

> 社交登录
> 
> 无需任何服务器端代码即可保护您的 Web 应用程序对 AWS 资源的访问。适用于 JavaScript 的 AWS 开发工具包可让您轻松与 Amazon Cognito 集成，从而为未经身份验证和经过身份验证的用户提供可自定义级别的 API 访问。Amazon Cognito 可以通过 Facebook、Google、Login with Amazon 和任何 OpenID Connect 身份提供商轻松设置。要了解如何执行此操作，请访问 AWS JavaScript 开发博客。

# dojox.grid.datagrid - 从 Dojo Grid 的商店中选择一个项目并在网格上显示其属性之一（对象数组）

> ID：12512975
> 
> 赞同：1
> 
> 时间：2012-09-20T12:49:11.437
> 
> 标签：dojox.grid.datagrid, dojox.grid, dojo

我有一个 Dojo EnhancedGrid，它使用填充了以下数据结构的数据存储：

```
[ 
  { id: 1, desc: "Obj Desc", options: [ { txt: "text", value: 0 }, { obj2 }, { objn } ] },
  { id: 2, ... },
  { id: 3, ... },
  { id: n, ... }
] 
```

目前我正在与辅助商店一起做这一切......但我相信这远不是解决问题的好方法，它太丑了，而且版本不能很好地工作（因为我必须从一个商店发送更改给另一个）。

我不想同时显示所有这些对象，而是只想选择一个对象（使用它的 id）并在网格上显示它的选项对象。同时，grid 上的更改应该对 store 生效，以便以后可以保存。

是否可以查询网格的商店，以便只显示一个对象？如何？是否可以用“选项”属性上的对象列表填充网格？

# php - 站点地图 magento lastmod

> ID：12512977
> 
> 赞同：0
> 
> 时间：2012-09-20T12:49:13.700
> 
> 标签：php, magento, magento-1.7

为了解决 magento 将当前日期放入站点地图的 lastmod 字段的事实。这会导致抓取率低下，我修改了 Sitemap.php (app/code/local/Mage/Sitemap/Model/Sitemap.php) 中的日期，如下所示：

```
 /*
     * Generate categories sitemap
     **/

    $changefreq = (string)Mage::getStoreConfig('sitemap/category/changefreq', $storeId);
    $priority   = (string)Mage::getStoreConfig('sitemap/category/priority', $storeId);
    $collection = Mage::getResourceModel('sitemap/catalog_category')->getCollection($storeId);
    foreach ($collection as $item) {
        $xml = sprintf('<url><loc>%s</loc><lastmod>%s</lastmod><changefreq>%s</changefreq><priority>%.1f</priority></url>',
            htmlspecialchars($baseUrl . $item->getUrl()),
            substr(Mage::getModel('catalog/category')->load($item->getId())->getUpdatedAt(),0,10),  //---> here the changes
            $changefreq,
            $priority
        );
        $io->streamWrite($xml);
    } 
```

这是可行的，但我注意到我的sitemap.xml（www.edenglamode.com/sitemap.xml）中的一些url对于一些lastmod是空的，所以谷歌抱怨了这一点，我尝试对产品进行一些修改并重新生成站点地图但没有办法

```
<url>
 <loc>
   http://www.edenglamode.com/robe-courte-sexy-bustier-avec-ceinture.html
 </loc>
   <lastmod/>
   <changefreq>hourly</changefreq>
  <priority>1.0</priority>
</url> 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:47:19.017

如果产品 lastmod 时间为 NULL，那么您应该加载产品，将 DATE 添加为 lastmod，保存产品并将 DATE 写入您的 XML。下一次它不会有问题，因为 lastmod 存在。然后它将能够写出站点地图条目，而无需等待 Magento 加载“n”保存产品的时间。

Can I enquire as to how you ended up with no lastmod times? Did you import the products en-masse and not open them in admin?

# android - 用于 SMS DB 查询的 Android 光标选择参数

> ID：12512978
> 
> 赞同：0
> 
> 时间：2012-09-20T12:49:29.903
> 
> 标签：android, select, sms, cursor

我正在尝试从一个地址获取所有短信。

因此，在使用光标扫描数据库时，我尝试使用 select。但是，没有返回任何值。我怀疑这是因为数据库中“地址”列中的数字包含空格和/或连字符 (-)。

我的问题是我可以进行查询以忽略字符串中的空格和连字符吗？

PS：我的地址已被精简为不包含空格和连字符，根据我的要求，这是不可更改的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:37:55.727

我遇到了同样的情况并尝试了以下方法。（还不确定，这是否是一个合适的解决方案！:)）

所以，

*   查询对话表中的所有对话
*   循环并遍历所有结果。对于每个：

    *   取地址字段并删除不需要的字符，使其像您拥有的数字格式
    *   与您想要对话的号码进行比较：如果找到 => 休息
*   在循环结束时，您将获得正在搜索短信的号码的线程 ID。

现在，

*   现在收集该线程下所有消息的消息 ID，按类型分隔：“已发送”和“收件箱”

然后，您可以使用这些 id 数组从 ContentProvider 的“已发送”和“收件箱”表中收集消息。

我知道，这个过程有点长，但给了我满意的结果。：） 希望能帮助到你。

# python - python中带有单词边界的正则表达式

> ID：12512980
> 
> 赞同：0
> 
> 时间：2012-09-20T12:49:47.687
> 
> 标签：python, regex

我正在尝试使用正则表达式验证特定字符串，但是我丢失了第一个字符。

字符串是 (06)12345678

我的正则表达式是

```
r'\b\((0[34679]{1})\)?([\- ]{0,1})[0-9]{3,4}([\- ]{0,1})[0-9]{3,5}' 
```

但我在比赛中得到的只是

```
06)12345678 
```

我真的很想要那个（也是。

( 和 ) 是有条件的，因为有时不会有 ()。但是单词边界是为了防止像这样的数字

```
hello123456789 
```

匹配

```
regex = r'\b\(?(0[34679]{1})\)?([\- ]{0,1})[0-9]{3,4}([\- ]{0,1})[0-9]{3,5}'
matches = re.finditer(regex, '(06)12345678)')
for match in matches:
    print match.group(0) 
```

有什么想法吗？

- 例子 -

```
(06)12345678 should match, (06)12345678
06 12345678 should match, 06 12345678
1234567890 should match, 1234567890
=12345678 no match 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:51:03.290

尝试在 first 之前转义第二个“（”，不是第一个，而是最后一个“）” `?`。

现场演示：[http ://refiddle.com/6bs](http://refiddle.com/6bs)

# mysql - 用于远程开发的数据库同步

> ID：12512984
> 
> 赞同：0
> 
> 时间：2012-09-20T12:49:55.753
> 
> 标签：mysql, database, git, mysqldump, data-synchronization

正如标题所描述的，我正在寻找一种有效的方法来同步项目数据库的结构和数据。

由于我还没有找到实现它的“正确方法”，因此我提出了一种解决方案，即在每次 git 提交之前将数据库转储到 SQL 文件中，并在每次 git pull 上导入 SQL 文件。这产生了一种使用 git 管理数据的智能方法，但此解决方案无法扩展，有时会产生比解决方案更多的问题。例如，它不是一种自主方式，因此人为错误经常发生，所有开发团队都应该使用相同的转储工具。

您的自定义解决方案的任何建议也可以。谢谢！

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:00:08.583

借助dbForge Studio for MySQL 中的[模式/数据比较工具，您可以比较和同步或仅查看两个数据库之间的差异。](http://www.devart.com/dbforge/mysql/studio/database-synchronization.html)

# unit-testing - 摆脱子组件对象的“新”运算符

> ID：12512985
> 
> 赞同：5
> 
> 时间：2012-09-20T12:49:57.280
> 
> 标签：unit-testing, language-agnostic, dependency-injection

我一直在阅读 Misko Hevery 关于依赖注入的[经典](http://misko.hevery.com/2008/10/21/dependency-injection-myth-reference-passing/) [文章](http://misko.hevery.com/2008/07/08/how-to-think-about-the-new-operator/)，基本上是“将对象图创建代码与代码逻辑分离”。

主要思想似乎是“摆脱‘新’操作符”，将它们放入专用对象（“工厂”）并注入你所依赖的一切。”

现在，我似乎无法理解如何使这与由其他几个组件组成的对象一起工作，并且他们的工作是将这些组件与外部世界隔离开来。

## 蹩脚的例子

一个 View 类，表示几个字段和一个按钮的组合。所有组件都依赖于图形化的 ui 上下文，但您希望将其隐藏在每个子组件的界面后面。

所以像（在伪代码中，我猜语言并不重要）：

```
 class CustomView() {

   public CustomView(UIContext ui) {
        this.ui = ui
   }

   public void start() {

      this.field = new Field(this.ui);
      this.button = new Button(this.ui, "ClickMe");

      this.button.addEventListener(function () {
           if (field.getText().isEmtpy()) {
              alert("Field should not be empty");
           } else {
              this.fireValueEntered(this.field.getText());
           }
      });
   }

   // The interface of this component is that callers
   // subscribe to "addValueEnteredListener"..)
   public void addValueEnteredListener(Callback ...) {
   }

   public void fireValueEnteredListener(text) {
     // Would call each listeners in turn
   }
} 
```

来电者会做类似的事情：

```
 // Assuming a UIContext comes from somewhere...
ui = // Wherever you get UI Context from ?
v = new CustomView(ui);
v.addValueEnteredListener(function (text) {
 // whatever...
}); 
```

现在，这段代码有三个“新”运算符，我不确定 Misko（和其他 DI 支持者）提倡删除哪一个，或者如何删除。

## 摆脱 new Field() 和 new Button()

### 只需注入它

我不认为这里的想法是实际*注入*Field 和 Button 的实例，可以这样做：

```
 class CustomView() {

   public CustomView(Field field, Button button) {
        this.field = field;
        this.button = button;
   }

   public void start() {

      this.button.addEventListener(function () {
           if (field.getText().isEmtpy()) {
              alert("Field should not be empty");
           } else {
              this.fireValueEntered(this.field.getText());
           }
      });
   }

   // ... etc ... 
```

这无疑使组件的代码更轻巧，而且它实际上隐藏了 UI 的概念，因此 MetaForm 组件在可读性和可测试性方面明显得到了改进。

*但是*，创建这些东西的负担现在落在了客户端上：

```
 // Assuming a UIContext comes from somewhere...

ui = // wherever ui gets injected from 

form = new Form(ui);
button = new Button(ui);

v = new CustomView(form, button);
v.addValueEnteredListener(function (text) {
 // whatever...
}); 
```

这对我来说听起来真的很麻烦，尤其是因为客户知道班级的所有内部人员，这听起来很傻。

### 妈妈知道，给她注射

这些文章似乎提倡的是注入一个工厂来创建组件元素。

```
 class CustomView() {

   public CustomView(Factory factory) {
      this.factory = factory;
   }

   public void start() {

      this.field = factory.createField();
      this.button = factory.createButton();

      this.button.addEventListener(function () {
           if (field.getText().isEmtpy()) {
              alert("Field should not be empty");
           } else {
              this.fireValueEntered(this.field.getText());
           }
      });
   }

   // ... etc ... 
```

然后对调用者来说一切都变得很好，因为它只需要从某个地方获取*工厂*（并且这个工厂将是唯一知道 UI 上下文的，所以为解耦欢呼吧。）

```
 // Assuming a UIContext comes from somewhere...

factory = // wherever factory gets injected from 

v = new CustomView(factory);
v.addValueEnteredListener(function (text) {
 // whatever...
}); 
```

一个可能的缺点是，在测试 MetaForm 时，您通常必须使用“模拟”工厂......创建字段和按钮类的模拟版本。但显然还有另一个缺点......

### 哟工厂好胖！！

工厂将有多大？如果您严格遵循该模式，那么您想要在运行时在应用程序中创建的每个单独的组件（通常是 UI 的情况，对）都必须在至少一个工厂中获得自己的 createXXXXX 方法。

因为现在你需要：

*   Factory.createField 创建字段
*   Factory.createButton 创建按钮
*   Factory.createMetaForm 用于在客户端创建字段、按钮和 MetaForm（比如说 MetaEditPage 要使用一个）
*   显然是一个 Factory.createMetaEditPage 为客户端..
*   ......和它的乌龟一路走来。

我可以看到一些简化这一点的策略：

*   尽可能将在“启动”时创建的图形部分与在运行时创建的部分分开（前者使用像 Spring 这样的 DI 框架，后者使用工厂）
*   将工厂分层，或在同一个工厂中并置相关对象（UIWidgetFactory 对 Field 和 Button 有意义，但您会将其他的放在哪里？在链接到应用程序的工厂中？到其他逻辑级别？）

*我几乎可以听到所有来自 C 人的笑话，即没有 Java 应用程序可以在不调用 ApplicationProcessFactoryCreator.createFactory().createProcess().startApplication() 的废话链的情况下做任何事情......*

所以我的问题是：

*   我在这里完全错过了一点？
*   如果不是，您会建议采用哪种策略来让事情变得可以忍受？

## 附录：为什么我不确定依赖注入会有所帮助

假设我决定使用依赖注入，以及类似 guice 的框架。我最终会编写这样的代码：

```
 class CustomView

    @Inject
    private Field fiedl;

    @Inject
    private Button button;

    public void start() {
      this.button.addEventListener(....

// etc... 
```

然后什么 ？

我的“作曲根”将如何利用它？我当然不能为 Field 和 Button 配置“单例”（带有小写的“s”，如“类的单个实例”）（因为我想创建与 MetaForm 实例一样多的实例？

使用提供者没有意义，因为我的问题不是我想创建哪个按钮实例，而只是我最近想创建它，并带有一些只对这种形式有意义的配置（例如它的文本） .

对我来说，DI 不会有帮助，因为我是组件的新*部分*而*不是*依赖项。而且我想我可以将任何子组件转换为依赖项，并让框架注入它们。只是在这种情况下，注入子组件对我来说看起来*真的*很不自然，而且很直观……所以再一次，我一定错过了一些东西；）

 ***编辑*

特别是，我的问题是我似乎无法理解您将如何测试以下场景：

“当我单击按钮时，如果字段为空，则应该有错误”。

如果我注入按钮，这是可行的，这样我就可以手动调用它的“fireClicked”事件——但感觉有点傻。

另一种方法是只做 view.getButton().fireClicked() ，但这看起来有点难看......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:57:33.237

好吧，您可以使用一些 DI 框架（Spring 或 Guice）并完全摆脱工厂方法。只需在 field/constructor/set 方法上添加一些注释，DI 框架就会完成这项工作。在单元测试中使用模拟框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:37:40.907

不要过分沉迷于“没有新”的教条如何？

我的看法是 DI 适用于 - 你知道的，依赖项或委托。`CustomView`您的示例是关于组合的，恕我直言，拥有实体（您的）明确创建其组件绝对有意义。毕竟，组合的客户端甚至不必知道这些组件的存在、它们是如何初始化的或您如何使用它们。**

# java - 关于自动推送通知

> ID：12512988
> 
> 赞同：2
> 
> 时间：2012-09-20T12:50:13.707
> 
> 标签：java, android, google-cloud-messaging

我正在使用 Google-GCM 服务将通知推送到移动设备并在 Java EE 中构建此应用程序。

*我完全能够将通知推送到移动设备。并且从客户端（移动）我能够接收输入（字符串）。*

*`Henceforth my conceptual question starts: When I'm receiving input from a mobile (let's say: "Hello, Server"), I'm trying to build an automated process on the server-side and in reply it will push a notification (let's say: "Hi client, I'm fine; How are you?") automatically.`*

我想在注册移动设备时自动推送通知。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:24:01.277

GCM 的所有实际实现都包括应用程序接收 RegID 并将 RegID 通常通过 HTTP 服务与其他一些业务特定数据一起传回服务器的阶段。服务器将存储 RegID，将其与其他数据相关联，然后使用它发送消息。

您是否已经实现了将 GCM 注册 ID 自动传送到服务器？如果是这样，在同一段代码中，您不妨将通知推送回去。如果没有，请拼凑一些。服务器端实现自然取决于您的服务器平台。

# oracle - 从 oracle 中的另一个模式引用表

> ID：12512995
> 
> 赞同：0
> 
> 时间：2012-09-20T12:50:39.467
> 
> 标签：oracle, reference

我有 2 个不同的模式（ finn，hr ）。
我有一个来自 hr 的表，其名称为 (hr_employee_info_tbl)，另一个来自 finn 的表，其名称为 FINN_BUDGET_TBL。
我试图从 FINN_BUDGET_TBL 引用 hr_employee_info_tbl 但得到 ora-01031 权限不足。

我必须授予我的用户哪些权限？

-- 创建/重新创建主键、唯一键和外键约束

```
alter table FINN_BUDGET_TBL
  add constraint employee_id_fk foreign key (EMPLOYEE_ID)
  references hr.hr_employee_info_tbl (EMPLOYEE_INFO_ID); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:56:43.967

连接用户 hr，运行：

```
grant select on hr.hr_employee_info_tbl to finn; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:58:01.207

确保您以 FINN_BUDGET_TBL（在本例中为 FINN）的所有者身份登录，并且当前登录的用户已阅读 hr 模式。

```
grant select on hr.hr_employee_info_tbl to FINN; 
```

对当前用户（FINN）“更改任何表”也可能有效，但一般来说，这不是正确的做法。

# php - 当我在 mysql 中有同一个用户的两个条目时重复数据显示

> ID：12512996
> 
> 赞同：1
> 
> 时间：2012-09-20T12:50:41.997
> 
> 标签：php, mysql, sql, duplicates

所以我有两个问题，第一个问题根据 $_SESSION 选择一个数组，然后在第二个选择中使用。

我的问题是，例如，当我使用一个条目时，每件事都可以，表格将如下所示：

```
|DATA| USER1|
|DATA| USER2|
|DATA| USER3| 
```

但是，如果我必须为同一个用户输入条目，我会得到这样的重复：

```
|DATA| USER1| [1]
|DATA| USER1| [2]
|DATA| USER2|
|DATA| USER3|
|DATA| USER1| DUPLICATE of FIRST ENTRY USER ABOVE [1]
|DATA| USER1| DUPLICATE OF SECOND ENTRY USER ABOVE [2] 
```

我的代码如下所示：

```
function make_table($user_id){
   first_query with this select `Select U.user_id
                                   from users U, tasks T
                                  where T.assigned_to = U.user_id 
                                    and T.status='Assigned'
                                    and U.parent_id = $_SESSION[userid]`;

  foreach ($query_result_worker as $row){
            $user_id_worker = $row['user_id'];

  //second_query with this select 

    SELECT T.task_id, T.job_server_id, T.TIMESTAMP, TT.task_type_name, T.STATUS,
           UO.username AS customer_name, UO.user_id AS customer_id, T.STATUS, T.quantity,
           T.order_id, U.username, T.priority, T.assigned_time, U.username, O.order_id
     FROM task_type TT, orders O, users UO, task_assignment T
     LEFT JOIN users U
        ON T.assigned_to = U.user_id
     WHERE T.task_type_id = TT.task_type_id
        AND O.order_id = T.order_id
        AND O.user_id = UO.user_id
        AND T.STATUS = 'Assigned'
        AND T.assigned_to = $ROW [user_id]
        AND T.TIMESTAMP <= CURRENT_TIMESTAMP
     ORDER BY T.priority DESC, DATE (T.TIMESTAMP), T.quantity DESC, T.task_id

    foreach ($result as $tablerow) {
    make the printing table stuff

     }
} 
```

所以我不知道为什么当我有两个条目时它会重复，请帮忙？

PS：如果我为同一用户输入 3 个条目，则同一用户将输入 6 个条目，也会重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:56:12.880

尝试添加`DISTINCT`到您的第一个查询：

```
SELECT DISTINCT U.user_id
FROM
    users U,
    tasks T
WHERE
    T.assigned_to = U.user_id
    AND T.status='Assigned'
    AND U.parent_id = $_SESSION[userid]; 
```

另外，我会避免使用隐式连接，尤其是在将它们与显式外连接混合时。它使查询更难阅读，并且（IMO）更容易出错。请改用`INNER JOIN`语法。

您的第二个查询看起来更像这样：

```
SELECT
    T.task_id,
    T.job_server_id,
    T.TIMESTAMP,
    TT.task_type_name,
    T.STATUS,
    UO.username AS customer_name,
    UO.user_id AS customer_id,
    T.STATUS,
    T.quantity,
    T.order_id,
    U.username,
    T.priority,
    T.assigned_time,
    U.username,
    O.order_id
FROM
    task_type TT
    INNER JOIN task_assignment T
        ON T.task_type_id = TT.task_type_id
    INNER JOIN orders O
        ON O.order_id = T.order_id
    INNER JOIN users UO
        ON UO.user_id = O.user_id
    LEFT JOIN users U
        ON T.assigned_to = U.user_id
WHERE
    T.STATUS = 'Assigned'
    AND T.assigned_to = $ROW[user_id]
    AND T.TIMESTAMP <= CURRENT_TIMESTAMP
ORDER BY
    T.priority DESC,
    DATE(T.TIMESTAMP),
    T.quantity DESC,
    T.task_id 
```

# android - cocos2d Android中的CCTableView

> ID：12512997
> 
> 赞同：0
> 
> 时间：2012-09-20T12:50:51.820
> 
> 标签：android, cocos2d-iphone

我正在用 cocos2d android 开发一个简单的游戏；我想使用表格视图来显示数据。

我用谷歌搜索并知道 cocos2d 中有一个 CCTableView 但我没有得到示例代码来继续。

如何在 cocos2d android 中使用 CCTableView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:27:42.673

标准 cocos2d（ios 或 android 或 cocos2d-x）框架中没有 CCTableView。这是别人写的扩展。如果您使用 Java 或 C++ 进行编码，我想您必须自己移植该类。