# StackOverflow 问答 15673000-15673999

# jquery - JQUERY：如何使用 Jquery 在图像中定位光标的位置？

> ID：15673000
> 
> 赞同：-1
> 
> 时间：2013-03-28T02:06:57.097
> 
> 标签：jquery, image, position, photo

如何使用 Jquery 在图像/照片中定位光标的位置（根是图像/照片的左上角）？

请帮忙！我不知道如何编写这段代码。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:11:52.837

`**[LIVE DEMO](http://jsbin.com/utaguh/4/edit)**`

```
$('img').on('mousemove', function( ev ){

   var mPos= {
      X: ev.clientX-this.offsetLeft,
      Y: ev.clientY-this.offsetTop
   };

   console.log( mPos.X +" "+ mPos.Y );

}); 
```

如果您对`mousemove`使用不感兴趣，例如：`click`或您想要的其他活动。

* * *

使用 jQuery`.on()`方法，您可以注册一个`event`( `ev`) 并将其传递到您的函数中

```
function( ev ){ 
```

而不是创建一个`object`( `var mPos`) 并设置`key`s `X`，`Y`这将存储 mousemove 事件`clientX`并`clientY`减去元素的 `offset`位置。（JS 的`this`关键字引用`img`元素）。

比获取存储的对象值使用`mPos.X`或/和`mPos.Y`

# c# - 带有 MultipartFormDataContent 的 Windows 8 xaml 应用程序问题未上传图像

> ID：15673009
> 
> 赞同：0
> 
> 时间：2013-03-28T02:07:36.153
> 
> 标签：c#, httpwebrequest, winrt-xaml

我正在尝试从用户本地文件夹上传图像文件

我写了这个方法来获取文件流和url，然后上传。问题是，虽然我没有收到任何错误，并且服务器上的图像有自己的 id 等，但它看起来是空的。

我认为我上传的流有问题，当我在那里设置断点时，我看到里面的字节，所以它不是空的

```
public static async Task<string> UploadImage(string url, StorageFile file)
    {
        HttpClient httpClient = new HttpClient();
        httpClient.DefaultRequestHeaders.Add("Authorization", authKey);
        try
        {   
            IRandomAccessStream readStream = await file.OpenAsync(FileAccessMode.Read);
            MultipartFormDataContent form = new MultipartFormDataContent();
            form.Add(new StringContent("name"), "myphoto");
            var content = readStream.AsStream();
            form.Add(new StreamContent(content));
            HttpResponseMessage response = await httpClient.PostAsync(url, form);
            string res = response.Content.ToString();
            return res;
        }
        catch (HttpRequestException hre)
        {
            return string.Empty;
        }
        catch (Exception ex)
        {
            return string.Empty;   
        }            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:01:17.130

毕竟这是一个网络服务问题

# java - 您如何将节点保留在选择用于编辑和/或删除的链接列表中？

> ID：15673013
> 
> 赞同：1
> 
> 时间：2013-03-28T02:08:07.000
> 
> 标签：java, linked-list, nodes

我正在制作一个为您提供菜单的程序：

```
 1\. Show all records. 
 2\. Delete the current record 
 3\. Change the first name in the current record 
 4\. Change the last name in the current record 
 5\. Add a new record 
 6\. Change the phone number in the current record 
 7\. Add a deposit to the current balance in the current record 
 8\. Make a withdrawal from the current record if sufficient funds are available. 
 9\. Select a record from the record list to become the current record. 
 10\. Quit 
```

和一个命令提示符：

```
Enter a command from the list above (q to quit): 
```

我有 4 个链接列表：

1.  名
2.  姓
3.  电话号码
4.  账户余额

我相信你可以假设它们包含什么......

假设我已经添加了一条新记录。

我试图弄清楚如何制作一种方法，在我进行更改或删除它时保持选中节点。

```
public void numberNine()
{
    System.out.println("Enter first name: ");
    String fName = keyboard.next();
    System.out.println("Enter last name: ");
    String lName = keyboard.next();
    if(firstName.contains(fName))
    {
        if(lastName.contains(lName))
        {
           /*I need to set the current record here.
           I also need to print out the current record.
           That means I need to find the corresponding
           information from the linked lists by checking
           the index of the first or last name because
           both share the same index position for the
           correhlating information of the selected person
           for the current record.*/
        }
        else
        {
            System.out.println("No matching record found.");
        }
    }
    else
    {
        System.out.println("No matching record found.");
    }
} 
```

唯一的问题是我并不完全熟悉完成工作所要执行的语法，但是根据我环顾四周后的理解，我可能需要一个看起来有点像这样的方法：

```
public void currentRecord(String fName, String lName)
{
    /*check for index of both fName and lName between the two strings containing
      this information until they match up, then select the telenumber and 
      balance that match the index of the fName and lName and print*/
} 
```

我已经理解了我找到的解释，但是这些解释没有任何语法来帮助我实际实现这一点。有人可以告诉我它是如何完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:50:48.897

```
private static void searchRecord(String firstName, String lastName) {
        boolean recordFound = false;
        if(fName.contains(firstName) && lName.contains(lastName)){
            int index = -1; 

            for (String fn : fName) {
                index++;
                if(fn.equals(firstName)){
                    String ln = lName.get(index);
                    if(ln.equals(lastName)){
                        recordFound = true;
                        System.out.println("Record Found");
                        System.out.println("First Name="+ fName.get(index));
                        System.out.println("Last Name="+ lName.get(index));
                        System.out.println("Phone="+ phone.get(index));
                        System.out.println("Balance="+ balance.get(index));
                    }
                }
            }

        } 
        if(!recordFound) {
            System.out.println("No Record found for first name="+ firstName + " and last name="+lastName);
        }

    } 
```

# python - 是否有任何用于 python 的代码统计工具，例如在线计数函数长度？

> ID：15673014
> 
> 赞同：1
> 
> 时间：2013-03-28T02:08:07.263
> 
> 标签：python, statistics

我想找出行长> 80的python函数（例如）

有什么工具可以做到吗？

此外，我可能需要查找在运行中[未] 调用哪些函数。

简单更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:21:20.837

试试[pylint](https://pypi.python.org/pypi/pylint)。它可以检查您配置的许多编码标准，包括行长。

# r - for循环和粘贴（）合并R中的多个数据帧

> ID：15673016
> 
> 赞同：0
> 
> 时间：2013-03-28T02:08:33.763
> 
> 标签：r, merge, dataframe

我有多个相同的数据框：X1、X2、...、X32

一个数据框的示例：

```
> X1
    value
1 3300320 
```

我想要一个这样的数据框：

```
> XTotal
    value   X
1 3300320   1
2  345098   2
...
32  34355   32 
```

我尝试使用 for 循环和 paste("X", i, sep=""), rbind 等，但每次我得到一个这样的字符串列表：

```
> listDF
1  "X1"
2  "X2"
...
32 "X32" 
```

所以，我不能正确调用每个数据框来将它们的值放入 XTotal 数据框......

我有点迷茫，知道吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:17:58.807

永远不要在循环中增长对象。这是非常低效的，因为它每次都会复制整个对象。

创建 data.frames 的列表使用`get`和`lapply`或`mget`

```
dflist <-  mget(paste('X', 1:32), envir = parent.frame()) 
# also valid
# dflist <- lapply(paste('X', 1:32), get)

# to combine them
DFlist <- do.call('rbind', dflist)

# or, faster
library(data.table)
DFlist <- rbindlist(dflist) 
```

如果 data.frames 没有相同的列/列顺序，请使用`rbind.fill`from`plyr`

```
library(plyr)
DFlist <- rbind.fill(dflist) 
```

真的没有必要`dflist`明确地创建

以下任何一项也可以

```
rbind.fill(mget(paste('X', 1:32), envir = parent.frame()))
rbindlist(mget(paste('X', 1:32), envir = parent.frame()))
do.call(rbind, mget(paste('X', 1:32), envir = parent.frame())) 
```

# java - 来自 Date() 的上周日期

> ID：15673020
> 
> 赞同：1
> 
> 时间：2013-03-28T02:09:11.373
> 
> 标签：java, date

目标：我想使用 Date() 将接下来 12 周的一周中的最后一天（星期日）转换为单独的字符串

我有下面这给了我正确的日期格式。我只需要关于实现目标的最佳解决方案的建议。

```
 DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
    Date date = new Date(0);
    System.out.println(dateFormat.format(date)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:22:59.803

Java 的日期系统让我感到困惑，但我认为你想这样做：

1）而不是制作一个日期，而是制作一个公历。

2) Calendar.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY) 获取本周星期日的日期。

3) 在 for 循环中，将 7 天添加到日历十二次。在每个循环上做一些事情（例如，使用 getTime() 从 GregorianCalendar 获取日期）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:20:55.280

尝试

```
 GregorianCalendar c = new GregorianCalendar();
    for (int i = 0; i < 12;) {
        c.add(Calendar.DATE, 1);
        if (c.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
            System.out.println(DateFormat.getDateInstance().format(c.getTime()));
            i++;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-21T11:16:26.787

首先，一周的最后一天并不总是与星期日相同，因为它取决于您使用的区域设置。

如果您使用的是 Java 8，则解决方案非常简单：

```
LocalDate firstJanuary = LocalDate.parse("01/01/2015",
                           DateTimeFormatter.ofPattern("MM/dd/yyyy"));

//last day of the week
TemporalField fieldUS = WeekFields.of(Locale.US).dayOfWeek();
LocalDate lastDayOfWeek = firstJanuary.with(fieldUS,7);
System.out.println(lastDayOfWeek);

//sunday
LocalDate sunday = firstJanuary.with(DayOfWeek.SUNDAY);
System.out.println(sunday); 
```

并迭代到几周后，只需使用：

```
sunday.plusWeeks(1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-29T06:37:58.467

# joomla - Joomla - 计算用户登录的次数

> ID：15673021
> 
> 赞同：-3
> 
> 时间：2013-03-28T02:09:12.233
> 
> 标签：joomla

场景：我的基于 joomla 的网站有成千上万的注册用户......在管理员后端（在**用户管理器**中），我可以看到每个用户的“**最后访问日期**”......如果我想获得关于每个用户登录的次数和访问日期...

示例：用户=马克，在 2012 年 1 月 12 日、2 月 3 日和 11 月 6 日访问了 3 次网站...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:21:21.147

您可能想要制作一个插件来监听登录事件。但是您必须决定如何存储潜在的大量数据。

# java - Java Swing中的直方图

> ID：15673024
> 
> 赞同：0
> 
> 时间：2013-03-28T02:09:23.500
> 
> 标签：java, swing

![在此处输入图像描述](../Images/628ed2fea96fa785fecd886509bf8019.png)当我尝试制作直方图时，显示的矩形是分开的，如何使它们与另一个相邻（删除空格）

这是我的代码的一部分：

```
public DrawRectangle(int x, int y, int width, int height) {
    this.x = x;
    this.y = 100 - height - 1;
    this.width = width;
    this.height = height;

    box = new Rectangle();

    this.setPreferredSize(new Dimension(width + 1, 100));
}

public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    boite.setLocation(x, y);
    boite.setSize(width, height);
    g2.draw(box);
} 
```

# regex - 正则表达式和重音

> ID：15673030
> 
> 赞同：-1
> 
> 时间：2013-03-28T02:09:51.747
> 
> 标签：regex

这个问题让我发疯，我需要用重音排除这个词，我遇到了问题。特别是我认为这`\b`不适用于带有 áéíóúñ 之类的重音字母例如，我有这个正则表达式：

```
\b(m[ií]s*|m[ií][ao]s*|t[úu]s*|s[u]s*)\b 
```

话：

米匹配

mí - 不匹配

mias - 匹配

mias - 不匹配

我尝试使用`\s`而不是`\b`但我匹配空格我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:22:36.333

此正则表达式将匹配所有没有任何重音字母的单词：

```
\b[a-zA-Z']+\b 
```

包括引号字符意味着带有撇号的单词 - 例如“can't” - 也匹配。

请注意，正则表达式`\w`不适合，因为它包含数字和下划线字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:34:22.800

您正在尝试匹配 unicode 字符，这可能或多或少复杂，具体取决于您使用的语言。此链接可能会帮助您更好地理解：

[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:15:26.630

如果我错了，请纠正我，但如果您使用的是 java，则重音被视为非单词字符，因此您可以使用 \w 与 \W 检测。这可能是您使用的任何语言的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T03:44:25.450

From your question and comments is sounds like:

*   Given the string: mi, tú, tus, mí, mís, mias, Yes. But I am needing to match words with accent, like tú and tus and mí and mís. BUT not mísa –</li>
*   Match : mi, tú, tus, mí, mís, mias
*   Don't Match: mías

This powershell shows the match string is working for all the cases you've listed

```
$Matches = @()
$String = 'mi, tú, tus, mí, mís, mias, Yes. But I am needing to match words with accent, like tú and tus and mí and mís. BUT not mísa – '
([regex]'(?=\b)(mí|m[ií]s*|m[ií][ao]s*|t[úu]s*|s[u]s*)(?=\b)').matches($String) | foreach {
    write-host "at $($_.Groups[1].Index) = '$($_.Groups[1].Value)'"
    } # next match 
```

yields

```
at 0 = 'mi'
at 4 = 'tú'
at 8 = 'tus'
at 13 = 'mí'
at 17 = 'mís'
at 22 = 'mias'
at 83 = 'tú'
at 90 = 'tus'
at 98 = 'mí'
at 105 = 'mís' 
```

# rdbms - 为什么要在使用 DBMS 时定义自己的过程/函数？

> ID：15673032
> 
> 赞同：0
> 
> 时间：2013-03-28T02:10:12.390
> 
> 标签：rdbms, database

这可能是一个奇怪的问题，但我一直在想，如果数据库架构良好，为什么要定义自定义过程/函数？
这些功能/程序是做什么用的？
我想我可以得到很多减票，但我无法抗拒:)

让我解释一下为什么我想知道。在当前工作场所，其他开发人员使用函数/程序来剪切具有多个值的字符串，这些值用逗号分隔。
在我看来，如果没有这些功能，这本来可以实现的。

那么在哪些情况下定义和使用函数或过程是合法的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:24:08.573

设计一个 DBMS 来满足潜在应用程序（DBMS）的所有可能范围是非常困难的。尽管可以有一个内置函数来标记逗号分隔的值字符串，但没有什么能阻止应用程序需要对分号分隔的字符串执行相同的操作，依此类推。

定义自定义函数和过程的能力是扩展应用程序能力或 DBMS 对不同情况的适应性的自然方式。

就合法性而言，这是一件很难定义的事情。您的公司可能有代码库，其中包含要重用的常用函数或过程。

这回答了你的问题了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:28:08.817

您可以创建自定义存储过程来解决无穷大问题。

易于管理的数据；使用事务控制创建操作。多操作上的应用程序优化，对dbms执行单个请求，dbms执行多个。...

但是，许多开发人员说这是不好的做法或有难闻的气味。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T10:16:00.607

使用函数和过程使您的 DBMS 更加灵活，例如 DECLARE -- 类型书籍是记录

```
 (title  varchar(50),

   author  varchar(50),

  subject varchar(100),

  book_id   number); 
```

book1 书；

book2 书；

PROCEDURE printbook （书本）是

开始

dbms_output.put_line ('书名：' || book.title);

dbms_output.put_line('书籍作者：' || book.author);

dbms_output.put_line('书籍主题：'|| book.subject);

dbms_output.put_line('Book book_id : ' || book.book_id);

结尾;

开始——第 1 册规范

book1.title := 'C 编程';

book1.author := '努哈阿里';

book1.subject := 'C 编程教程';

book1.book_id := 6495407;

-- 第 2 册规范

book2.title := '电信计费';

book2.author := '扎拉阿里';

book2.subject := '电信计费教程';

book2.book_id := 6495700;

-- 使用程序打印图书信息

印刷书（书 1）；

印刷本（书 2）；

结尾;

/ 上面的“printbook”功能使您的查询更小更容易

# google-app-engine - python 应用引擎 dev_appserver 不可用 (1.7.6)

> ID：15673033
> 
> 赞同：3
> 
> 时间：2013-03-28T02:10:14.533
> 
> 标签：google-app-engine, python-2.7, dev-appserver

虽然日志说 dev_appserver 已启动浏览器无法连接到它。

```
*** Running dev_appserver with the following flags:
    --skip_sdk_update_check=yes --port=9090 --admin_port=9000
Python command: /usr/bin/python2.7
INFO     2013-03-28 02:00:05,042 devappserver2.py:401] Skipping SDK update check.
WARNING  2013-03-28 02:00:05,049 api_server.py:328] Could not initialize images API; you are likely missing the Python "PIL" module.
WARNING  2013-03-28 02:00:05,054 simple_search_stub.py:976] Could not read search indexes from /var/folders/rc/x4y8pzk14x96nxmk7l66btv00000gn/T/appengine.example.user123/search_indexes
INFO     2013-03-28 02:00:05,056 api_server.py:152] Starting API server at: http://localhost:49602
INFO     2013-03-28 02:00:05,078 dispatcher.py:98] Starting server "default" running at: http://localhost:9090
INFO     2013-03-28 02:00:05,084 admin_server.py:117] Starting admin server at: http://localhost:9000 
```

我什至无法访问 SDK 控制台。我更改了端口，多次删除了 /var/folders/../weirdfolder ，但仍然无法正常工作。

帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T02:27:10.483

我在这里找到了解决方案：[https](https://code.google.com/p/googleappengine/issues/detail?id=9064) ://code.google.com/p/googleappengine/issues/detail?id=9064 问题与最新的 chrome 升级有关

怎么修：

转到 chrome://flags 并将“内置异步 DNS”设置为“禁用”，然后重新启动浏览器“

# java - Java Update Jar 命令不起作用（使用 Runtime.getRuntime().exec()）

> ID：15673035
> 
> 赞同：0
> 
> 时间：2013-03-28T02:10:17.177
> 
> 标签：java, command-line, jar, runtime

所以我正在制作这个构建器，它应该只是制作一个 config.java 文件，将配置信息放入其中。编译它。然后用它更新现有的 jar。我一切正常，我没有收到任何错误，但是当我这样做时，`Runtime.getRuntime().exec("jar uf "+out+" "+ cClass);`它似乎失败了。我已经尝试获取所述命令的输出，但它没有显示任何内容。我也尝试手动执行此操作，并且效果很好。所以我的问题是，出了什么问题，我该如何解决？

```
Runtime.getRuntime().exec("javac "+config);         
File cClass = new File (config.getParentFile().getAbsolutePath() +"/configs.class");
Runtime.getRuntime().exec("jar uf "+out+" "+ cClass); 
```

out是要更新的jar文件，config是config.java cClass是config.class

这是我的整个 UpdateJar 类

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;

public class cmd extends Thread{
private File out;
private File config;
public cmd(File out, File config){
    this.out = out;
    this.config = config;
    this.start();
}
    public void run(){
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
    try {
        Process p = Runtime.getRuntime().exec("jar uvf "+out+" "+config.getParentFile().getAbsolutePath()+("/configs.class"));
        BufferedReader stdInput = new BufferedReader(new 
                 InputStreamReader(p.getInputStream()));
            BufferedReader stdError = new BufferedReader(new 
                 InputStreamReader(p.getErrorStream()));
            System.out.println(stdInput.readLine());
            System.out.println(stdError.readLine());
    } catch (IOException e) {
        e.printStackTrace();
    }
    }
} 
```

它返回的输出是这样的：

```
2013-03-28 20:18:58.363 null
2013-03-28 20:18:58.363 [parsing started RegularFileObject[/Users/jorisbolsens/Desktop/configs.java]]
2013-03-28 20:19:04.364 adding: Users/jorisbolsens/Desktop/configs.class(in = 767) (out= 512)(deflated 33%)
2013-03-28 20:19:04.364 null 
```

出于好奇，我提取了我的 out.jar 的所有文件，发现它`configs.class`实际上被放入了 jar 中，它只是被放入了一个文件夹中。具体来说`users.jorisbolsens.Desktop`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:04:46.650

我解决了这个问题，它是如此简单，以至于我一开始不尝试这个真的很愚蠢。我改变了

```
Runtime.getRuntime().exec("jar uvf "+out+" "+config.getParentFile().getAbsolutePath()+("/configs.class")); 
```

部分到

```
Runtime.getRuntime().exec("jar uvf "+out+" -C "+config.getParentFile().getAbsolutePath()+ " configs.class"); 
```

现在一切正常。我要感谢爱立信的所有帮助。

# java - 了解 tostring() 方法？

> ID：15673036
> 
> 赞同：1
> 
> 时间：2013-03-28T02:10:17.807
> 
> 标签：java

toString() 方法有什么用？我有一个子类，我需要在其中使用 tostring() 方法。我怎样才能用它来打印“C10”。如果我想制作滑道和梯子游戏。这是我收到的错误消息

Chute.java:12：错误：不兼容的类型返回 System.out.print("C10") ；^ 必需：找到字符串：void 1 错误

代码 ：

```
public String toString() 
{
 return System.out.print("C10") ;

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:15:28.180

背后的想法`toString`是生成`String`对象的表示。打印或以任何其他方式使用它完全取决于您。

```
class Snake {
    public String toString() {
        return "C10";
    }
}

public static void main() {
    Snake mySnake = new Snake();
    // This prints "C10"
    System.out.println(mySnake);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:12:09.770

您的`toString()`方法应该返回您的类的字符串表示形式：

```
public String toString()
{
   return "C10";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:12:35.683

在这种情况下，您会收到该错误，因为您根本没有返回任何内容。`System.out.print()`是一种方法，作为副作用，打印提供给标准输出的字符串。

要返回字符串，您需要执行以下操作：

```
public String toString() {
    return "C10";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T02:13:07.287

[`System.out.print`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#print%28java.lang.String%29)是一种无效的方法。它不会返回任何内容，尽管它会打印到您的屏幕上。

如果你想从你的`toString()`方法中返回一些东西，你只需要从方法中返回你想要的东西`System.out.print`。

```
public String toString() {
    return "C10";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T02:16:42.740

在java中，函数应该返回签名中定义的类型

public String 方法返回一个字符串，所以你应该返回值“C10”

```
public String toString() {
    return "C10";
} 
```

您可以在返回之前添加打印功能，可选：

```
public String toString() {
    String value = "C10"; //user var to not copy the value;
    System.out.print(value);
    return value;
} 
```

# google-apps-script - 如何将包含值和公式的行复制到数组中？

> ID：15673038
> 
> 赞同：1
> 
> 时间：2013-03-28T02:10:24.470
> 
> 标签：google-apps-script, google-sheets

是否有一种 API 方法可以完成与人们期望调用的方法相同的`sheet.getRange().getValuesOrFormulas()`功能？那是（伪代码）：

```
for each cell in the range
  if(cell.getFormula() != '')
    cell.getFormula();
  else cell.getValue() 
```

如果没有，是否有人愿意分享自定义功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T17:58:02.137

不，没有办法。

我不知道你会用这个做什么，也不知道它有什么用（因为没有方法可以立即设置它）。无论如何，这里是用公式和范围值填充数组的代码。

```
function valuesAndFormulas() {
  var range = SpreadsheetApp.getActiveSheet().getDataRange();
  var formulas = range.getFormulas();
  var values = range.getValues();
  var merge = new Array(formulas.length);
  for( var i in formulas ) {
    merge[i] = new Array(formulas[i].length);
    for( var j in formulas[i] )
      merge[i][j] = formulas[i][j] !== '' ? formulas[i][j] : values[i][j];
  }
  //now do something with it
  Logger.log(merge);
} 
```

# cufon - Cufon 不能使用多种字体？

> ID：15673039
> 
> 赞同：0
> 
> 时间：2013-03-28T02:10:27.527
> 
> 标签：cufon

我在我的网站上使用 Cufon 使用 3 种不同的字体。

对于我的前 2 个，一切正常。但是，一旦我添加了第三个字体文件，即使没有在这个文件上调用 Cufon.replace，我所有其他指定的元素都会更改为我最后添加的字体。

当我更改头部字体的顺序并将最新的字体移动到第一个时，一切都恢复正常，除了字体 3 没有显示。

不知道有什么问题？？

这是我的代码

```
<script type="text/javascript" src="cufon.js"></script>
<script type="text/javascript" src="font1.js"></script>
<script type="text/javascript" src="font2.js"></script>
<script type="text/javascript" src="font3.js"></script> 
```

这是我的脚本

```
 Cufon.replace('elements', {'font-family': 'font1'} ); 
Cufon.replace('elements', {'font-family': 'font2'} );
Cufon.replace('elements', {'font-family':'font3'} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:13:53.887

试试这个：

```
Cufon.replace('h1', {fontFamily:'font1'});
Cufon.replace('h2', {fontFamily:'font2'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:24:07.853

魔法！写 fontFamily 解决问题！

# javascript - 淘汰赛手风琴绑定断裂

> ID：15673040
> 
> 赞同：3
> 
> 时间：2013-03-28T02:10:28.020
> 
> 标签：javascript, jquery-ui, binding, knockout.js

以下绑定在 1.9 之前有效：

```
ko.bindingHandlers.accordion = {
    init: function(element, valueAccessor) {
        var options = valueAccessor() || {};
        setTimeout(function() {
            $(element).accordion(options);
        }, 0);
        ko.utils.domNodeDisposal.addDisposeCallback(element, function(){
            $(element).accordion("destroy");
        });
    },
    update: function(element, valueAccessor) {
        var options = valueAccessor() || {};
        $(element).accordion("destroy").accordion(options);
    }
} 
```

但是从 1.9 开始，它不再起作用，并且给出了以下错误：

```
Uncaught Error: cannot call methods on accordion prior to initialization; attempted to call method 'destroy' 
```

我很难弄清楚为什么。我查看了 jQuery UI 升级说明，但似乎没有什么相关的。

是什么导致了这种情况，我的绑定需要改变什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T03:50:13.953

> 未捕获的错误：无法在初始化之前调用手风琴上的方法；试图调用方法“销毁”

此错误表示您`destroy`在初始化小部件之前正在调用手风琴小部件的方法。

问题在于您使用的自定义绑定代码`setTimeOut`。setTimeOut 中的代码在您的更新函数之后运行。所以手风琴插件没有在你的元素上初始化，在你的更新函数中你正在调用`destroy`手风琴的方法。

一个简单的替代方法是在调用任何方法之前检查手风琴插件是否在元素上初始化，例如：

```
if(typeof $(element).data("ui-accordion") != "undefined"){
 $(element).accordion("destroy").accordion(options);
} 
```

在这里你可以检查[**Working jsbin**](http://jsbin.com/ijibef/1/edit)。

# html - 投影效果不起作用

> ID：15673041
> 
> 赞同：0
> 
> 时间：2013-03-28T02:10:41.033
> 
> 标签：html, css, web

说到 CSS，我是个菜鸟。随时给我一个php脚本！我需要一些帮助，我浏览了互联网并提出了一个明确的解决方案来为图像添加阴影。但是，它不起作用。我想我的 CSS 在某处有冲突。你能看看我的 jcfiddler 并指出我正确的方向吗？这是我想要的效果... ![在此处输入图像描述](../Images/34620bad6495decafb32a64fa308a067.png)

[JCFiddler/z83Md/1/](http://jsfiddle.net/z83Md/1/)

```
html {
    height: 100%;
    width: 100%;
}
body {
    height: 100%;
    width: 100%;
    margin: 0px;
    padding: 0px;
    border: 0px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    background: #D4E6F4;
    font-size: 13px;
    line-height: 15px;
}
body:before {
    /* top shadow */
    content:"";
    position: fixed;
    top: -20px;
    left: -10px;
    width: 110%;
    height: 20px;
    -webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, .8);
    -moz-box-shadow: 0px 0px 10px rgba(0, 0, 0, .8);
    -ms-box-shadow: 0px 0px 10px rgba(0, 0, 0, .8);
    -o-box-shadow: 0px 0px 10px rgba(0, 0, 0, .8);
    box-shadow: 0px 0px 10px rgba(0, 0, 0, .8);
    z-index: 100;
}
.image {
    background: #ddd;
    -moz-border-radius: 8px;
    border-radius: 8px;
    color: rgba(0, 0, 0, .8);
    text-shadow: 0 1px 0 #fff;
    line-height: 1.5;
}
.image:before, .image:after {
    bottom:15px;
    left:10px;
    width:50%;
    height:20%;
    max-width:300px;
    max-height:100px;
    -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    -webkit-transform:rotate(-3deg);
    -moz-transform:rotate(-3deg);
    -ms-transform:rotate(-3deg);
    -o-transform:rotate(-3deg);
    transform:rotate(-3deg);
}
.image:after {
    right:10px;
    left:auto;
    -webkit-transform:rotate(3deg);
    -moz-transform:rotate(3deg);
    -ms-transform:rotate(3deg);
    -o-transform:rotate(3deg);
    transform:rotate(3deg);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:20:46.787

为什么要在`:before`和`:after`伪选择器上添加阴影？如果您将代码移动到：

```
.image {
    background: #ddd;
    -moz-border-radius: 8px;
    border-radius: 8px;
    color: rgba(0, 0, 0, .8);
    text-shadow: 0 1px 0 #fff;
    line-height: 1.5;
    -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 1);
    -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 1);
    box-shadow:0 15px 10px rgba(0, 0, 0, 1);
    -webkit-transform:rotate(-3deg);
    -moz-transform:rotate(-3deg);
    -ms-transform:rotate(-3deg);
    -o-transform:rotate(-3deg);
    transform:rotate(-3deg);
}
.image:before, .image:after {
    bottom:15px;
    left:10px;
    width:50%;
    height:20%;
    max-width:300px;
    max-height:100px;
} 
```

您将开始获得所需的效果。这是一个[演示](http://jsfiddle.net/69MCk/1/)

# php - 用excel 2007下载表格

> ID：15673043
> 
> 赞同：0
> 
> 时间：2013-03-28T02:11:07.727
> 
> 标签：php, sql, export-to-excel

我有这样的查询表结果：

```
No l Agent l  Custumer
1     A          Devi
2     A          Lisa 
3     A          Dhea
4     B          Shinta
5     B          Wulan
6     B          Arthie
7     C          rIEKE
8     C          dONA
9     C          aNDHI
10    C          fHARA 
```

我想用这样的设计下载excel 2007的表格

```
No l Agent l  Custumer
1      A         Devi
2                Lisa
3                Dhea
4      B         Shinta
5                Wulan
6                Arthie
7      C         rIEKE
8                dONA
9                aNDHI
10               fHARA 
```

如何编码php？

# html - 其他元素和/或浏览器窗口中未知高度的中心元素

> ID：15673048
> 
> 赞同：0
> 
> 时间：2013-03-28T02:11:26.077
> 
> 标签：html, css

## 我希望在另一个其他元素和/或浏览器窗口中居中（水平和垂直）任何宽度/高度的元素。

*理想情况下，我希望有一个解决方案，无论我是尝试将内容集中在页面上的元素内还是在浏览器窗口本身内。*

* * *

我意识到其他问题涉及我正在尝试做的各个方面，但到目前为止我读到的答案对我来说并不令人满意。

我正在寻找一个解决方案：

*   **使用纯 HTML + CSS**（我看到有一些 JS 解决方案）

*   **不使用表格**（或具有“显示：表格”等属性的 div）

*   **不依赖于固定居中元素的高度**（我看到一些解决方案适用于固定高度+负上边距）

*   **将用于****在另一个 div**或**整个浏览器窗口**中居中元素

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:11:26.077

我花了很长时间在网上搜索并自己进行试验。最后，我偶然发现了此处记录的解决方案：

[http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

...它采用了**垂直对齐：中间**和使用伪类**:before**创建的“幽灵元素”（垂直对齐工作所需） ，以避免非语义标记。

**HTML：**

```
<div class="wrapper">
    <div class="centered">
        This div will be centered.
    </div>
</div> 
```

**CSS：**

```
.wrapper {
    width: 100%;
    height: 100%;
    text-align: center;
}

.wrapper:before {
    content: '';
    display: inline-block;
    width: 0px;
    height: 100%;
    vertical-align: middle;
}

.centered {
    display: inline-block;
    vertical-align: middle;
    width: 650px;
} 
```

* * *

**要在整个浏览器窗口**中居中上述内容，需要以下 CSS：

```
html {
    height: 100%;
}

body {
    height: 100%;
    margin: 0px;
    padding: 0px;
} 
```

* * *

**笔记：**

*   此解决方案**不适**用于 -IE7
*   原始解决方案在 ghost 元素上使用**width: 1px**和**margin-right: -0.25em 。**我已替换为**width: 0px****

# redis - 在 Redis 排序集中使用部分键名查找值

> ID：15673054
> 
> 赞同：4
> 
> 时间：2013-03-28T02:11:37.513
> 
> 标签：redis

我有一个排序集，它具有以下键名和值：

```
zrange bargraph:branch:1:category:2:product:4
1) "76"
2) "55"
3) "10"
4) "84" 
```

redis 中是否有一种机制，我可以*在使用 zrange 时使用通配符（也许是？）来获得相同的值？换句话说，redis 是否支持 zrange bargraph:branch:1:category:2*？如果不是，如果我只知道类别 id(2) 而不是产品 id(4) 而不使用不同的排序集，我怎样才能最好地获得所有值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-05-27T18:54:53.653

这是2015年的更新答案。

如果您可以将 Redis 升级到 2.8 以上，带有 MATCH 的 SCAN 命令将适用于此。在那个版本之前，没有那么多，除了在开发环境中，不要使用 KEYS 命令。

[http://redis.io/commands/scan](http://redis.io/commands/scan)

命令行示例：

```
$ redis-cli
127.0.0.1:6379> scan 0 match V3.0:*
1) "0"
2) 1) "V3.0:UNITTEST55660BC7E0C5B"
   2) "V3.0:shop.domain.com:route"
   3) "V3.0:UNITTEST55660BC4A2548"
127.0.0.1:6379> scan 0 match V1.0:*
1) "0"
2) (empty list or set)
127.0.0.1:6379> scan 0 match V3.0:*
1) "0"
2) 1) "V3.0:UNITTEST55660BC7E0C5B"
   2) "V3.0:shop.domain.com:route"
   3) "V3.0:UNITTEST55660BC4A2548" 
```

PHP 中的示例：

```
// Initialize our iterator to NULL
$iterate = null;

// retry when we get no keys back
$redis->setOption(Redis::OPT_SCAN, Redis::SCAN_RETRY);

while ($arr_keys = $redis->scan($iterate, 'match:*')) {
    foreach ($arr_keys as $str_key) {
        echo "Here is a key: $str_key\n";
    }
    echo "No more keys to scan!\n";
} 
```

请注意，php 代码未经测试，来自核心文档，例如此处。生产代码需要根据需要查找的键进行修改。

对于那些在 Ubuntu 上的人，这里是升级 php5-redis 的说明：

1.  在此处下载 2.2.7 包：http: [//pecl.php.net/package/redis](http://pecl.php.net/package/redis)
2.  `$ php -i | grep Redis Redis Support => enabled Redis Version => 2.2.4`
3.  按照 README 中的说明进行 phpize、配置、安装
4.  为命令行 cli 包创建符号链接：`cd /etc/php5/cli/conf.d && sudo ln -s ../../mods-available/redis.ini 20-redis.ini`
5.  `$ php -i | grep Redis Redis Support => enabled Redis Version => 2.2.7`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T15:01:31.270

正如您所提到的，KEYS 效率低下，因为引擎对键执行线性扫描。不幸的是，没有您正在寻找的通配符解决方案

考虑为每个类别的产品密钥使用 SET：

`SADD bargraph:branch:1:category:2 1 2 3 4`

要获取所有设置的类别成员，请执行以下操作：

`SMEMBERS bargraph:branch:1:category:2`

如果您不关心分数的总和，或者每个排序集有不同的项目，您可以像这样对每个产品排序集进行联合：

`ZUNIONSTORE bargraph:branch:1:category:2:product:all 4 bargraph:branch:1:category:2:product1 bargraph:branch:1:category:2:product2 bargraph:branch:1:category:2:product3 bargraph:branch:1:category:2:product4`

现在你可以`zrange bargraph:branch:1:category:2:product:all`

您将上述操作流水线以获得更好的性能

# java - 如何抑制 java.xml Transformer 添加到导入的外部系统实体的 xml:base 属性？

> ID：15673059
> 
> 赞同：1
> 
> 时间：2013-03-28T02:11:55.860
> 
> 标签：java, xml, xslt, dom, xml-parsing

必须有一个 xslt 或 xalan 属性，但我找不到它。

假设我有一个声明外部系统实体的 xml 文件：

```
<?xml version="1.0" standalone="yes" ?>
<!DOCTYPE stuff [
        <!ENTITY imported_fragment SYSTEM "fragment.xml">
        ]>
<stuff>
    <innerstuff name="a">
        <lala>Hello!</lala>
    </innerstuff>

    &imported_fragment;
</stuff> 
```

片段看起来像：

```
<innerstuff name="b">
    <lala>Bye!</lala>
</innerstuff> 
```

如果我使用 javax.xml 类读入并将其写回，我会得到：

```
 <?xml version="1.0" standalone="yes" ?>
<stuff>
    <innerstuff name="a">
        <lala>Hello!</lala>
    </innerstuff>

    <innerstuff name="b" xml:base="file:/full/path/to/fragment.xml">
        <lala>Bye!</lala>
    </innerstuff>
</stuff> 
```

`xml:base`请注意它添加的属性。我该如何抑制这个？

这是我用来读写 xml 文件的代码：

```
 Document dom;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = null;
    try {
        db = dbf.newDocumentBuilder();
        sLogger.info("Parsing file: " + fInputFile);
        dom = db.parse(fInputFile);
    } catch (SAXException | IOException | ParserConfigurationException e) {
       //...
    }

    try {
        Transformer tr = TransformerFactory.newInstance().newTransformer();
        tr.setOutputProperty(OutputKeys.INDENT, "yes");
        tr.setOutputProperty(OutputKeys.METHOD, "xml");
        tr.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
        tr.setOutputProperty(OutputKeys.STANDALONE, "yes");
        //tr.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");
        File outputFile = new File(fOutputDirectory, fInputFile.getName());
        sLogger..info("Writing xml output to: " + outputFile);

        tr.transform(new DOMSource(dom), 
                 new StreamResult(new FileOutputStream(outputFile)));

    } catch (IOException | TransformerException e) {
        //...
    } 
```

编辑：乔皮的回答有效。这是包含他的 XSLT 的 java 代码

```
 try {
        Transformer tr = TransformerFactory.newInstance().newTransformer();
        DOMResult domResult = new DOMResult();
        tr.transform(new DOMSource(dom), domResult);

        StreamSource source = new StreamSource(getClass().getResourceAsStream("removexmlbase.xslt"));
        Transformer tr2 = TransformerFactory.newInstance().newTransformer(source);
        tr2.setOutputProperty(OutputKeys.INDENT, "yes");
        tr2.setOutputProperty(OutputKeys.METHOD, "xml");
        tr2.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
        tr2.setOutputProperty(OutputKeys.STANDALONE, "yes");
        //tr2.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");
        File outputFile = new File(fOutputDirectory, fXMLFile.getName());
        getLog().info("Writing xml output to: " + outputFile);
        // send DOM to file
        tr2.transform(new DOMSource(domResult.getNode()), new StreamResult(new FileOutputStream(outputFile)));

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:31:47.393

用于抑制 xml:base 属性的 XSLT 1.0 模板：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <!-- Suppress xml:base attributes -->
    <xsl:template match="@xml:base"/>

</xsl:transform> 
```

**[工作示例](http://xsltransform.net/bFukv89/1)**

# java - 编写一次代码并在我想再次运行它时添加引用？

> ID：15673060
> 
> 赞同：0
> 
> 时间：2013-03-28T02:11:58.543
> 
> 标签：java, swing, jbutton, tic-tac-toe

有什么方法可以编写一次代码，然后如果我想再次运行相同的代码行，我可以添加另一行引用前一行？

例如：检查井字游戏中的胜利。

*   输入代码以检查是否获胜。
*   每次转弯完成后（使用 JButton）再次运行相同的检查代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:15:32.040

将重复的代码行放入一个单独的方法中，然后在需要检查胜利时简单地调用该方法。

这可能是这样的：

```
public boolean checkForWins() {
    // perform your checking here
} 
```

转弯完成后，您可以像这样引用此代码：

```
if (checkForWins()) {
    // what to do if there is a win
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:14:24.083

听起来您想要一个静态方法，在每回合后调用它。

# jquery - 通过 html2canvas 将 div 转换为图像（内部带有 img 的 div 元素）不捕获图像

> ID：15673066
> 
> 赞同：4
> 
> 时间：2013-03-28T02:12:19.143
> 
> 标签：jquery, html2canvas

我`html2canvas`用来转换`div`为`image/png`. It works fine when there is a text in selected `div`but I have an image in it. 因此，当我单击按钮时，我无法在创建的图像中看到`base64`图像`html2canvas`。

我的代码是这样的；

这是我的脚本：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="html2canvas.js"></script>

<script>
   $(function(){

      $('.savedraft').click(function(){

          html2canvas([ document.getElementById('div2image') ],{
          onrendered: function(canvas) {
          window.open(canvas.toDataURL());

  }
});
      })

      });         

</script> 
```

这是我的身体：

```
<div class="savedraft">Convert</div>
<div id="div2image" >
    <img src="WebSite5/html2canvas-master/tests/assets/image_1.jpg" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T13:10:54.663

将其设置为 div 背景图像，这样应该可以正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T14:13:18.460

使用 canvas.toDataURL("image/png") 指定图片的类型

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-13T06:53:09.137

使用服务器运行项目，它会正常工作！

我遇到了同样的问题，但后来我使用 Visual Studio 运行了这个项目，它完美地捕获了 div 标签内的所有图像。 [阅读链接以获得进一步说明。](https://stackoverflow.com/questions/27754544/html2canvas-not-capturing-image?rq=1)

# php - 使用带引号的 $_GET 的 MySQL 查询

> ID：15673069
> 
> 赞同：0
> 
> 时间：2013-03-28T02:12:51.727
> 
> 标签：php, mysql, get

我无法找到适用于此查询以接收 JSON 数据的语法：

```
$info ='".mysql_real_escape_string ($_GET['clientlist'])."';
$result = mysql_query("SELECT clientname FROM `cms_client` WHERE clientname ='$info' ORDER BY clientname ASC"); 
```

当我把它放在我的浏览器中时： http: [//mydomain.com/myfile.php ?clientname=Redbox](http://mydomain.com/myfile.php?clientname=Redbox)

我得到一个空洞的回应。

当我将查询更改为：

```
//$info ='".mysql_real_escape_string ($_GET['clientlist'])."';
$result = mysql_query("SELECT clientname FROM `cms_client` WHERE clientname ='Redbox' ORDER BY clientname ASC"); 
```

当我把它放在我的浏览器中时：http: [//mydomain.com/myfile.php](http://mydomain.com/myfile.php)

数据库以“Redbox”响应

有人可以帮我正确的语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:18:12.300

将其更改为：

```
$info = mysql_real_escape_string ($_GET['clientlist']); 
```

否则，您的查询中有双引号。

并且网址必须是`http://mydomain.com/myfile.php?clientlist=Redbox`而不是`?clientname=`

# ios - 带有 UITableView 单元的 NSXML 解析器

> ID：15673076
> 
> 赞同：0
> 
> 时间：2013-03-28T02:13:45.853
> 
> 标签：ios, objective-c, nsxmlparser

我有一个 XML 文件，

```
<?xml version="1.0" standalone="yes"?>
<user id="1" name=""><class id="1" name=""><subjects id="1" name=""><books id="1" name="">   
<chapters id="1" name="">
<pages id="0" name="" url="http://172.11.133.12/uploads/mathematic/Page001.html"/>
<pages id="1" name="" url="http://172.11.133.12/uploads/mathematic/Page002.html"/>
</chapters>
<chapters id="2" name="">
<pages id="0" name="" url="http://172.11.133.12/uploads/mathematic1/Page001.html"/>
<pages id="1" name="" url="http://172.11.133.12/uploads/mathematic1/Page002.html"/>
</chapters>
</books></subjects></class></user> 
```

在这里，我使用 NSXML Parser 对其进行了解析，一切正常，这里我需要在 UItableview 中显示章节 ID，当用户选择任何章节时，URL 应该在 Webview 中打开。我已经在 TableView 单元格中显示了所有章节名称，我想知道如何获取每个章节标签的相应 URL 值。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName
attributes:(NSDictionary *)attributeDict
{

currentElement = [elementName copy];

if ([elementName isEqualToString:@"chapters"]) {
    flag = 0;
    chapID = [attributeDict valueForKey:@"id"];

}
if ([elementName isEqualToString:@"pages"]){

    urlValue = [attributeDict valueForKey:@"url"];
} 
```

在这里我需要在章节中存储相应的页面标签......请指导我..

# javascript - 无法从 html 文件调用命名空间中的函数

> ID：15673078
> 
> 赞同：0
> 
> 时间：2013-03-28T02:13:54.547
> 
> 标签：javascript, jquery, html, javascript-namespaces

我有两个 JavaScript 文件，它们在名称空间中有一些功能。但是当我尝试从我的主页调用这个函数时，它会抛出一个错误，告诉“对象#没有方法'LoadAllBooks'”......但是我已经使用 namespace.function 调用了该函数。

这是 JavaScript 文件 Util.js 中的代码

```
var myNameSpace = {
    Book: function (author, title, URL) {
        this.author = author;
        this.title = title;
        this.URL = URL;
    },
    LoadAllBooks: function (metadata, attachPoint) {
        Some Code--
    },
    arr: [],
    oneBook: {}
}; 
```

现在从我的html主页调用上面的函数LoadAllBooks，如下所示。

```
<script>
    var attachpoint = document.querySelector('.buttonAttachPoint');
    $(document).on('load',myNameSpace.LoadAllBooks("ajax/metadata.json",this.attachpoint));
</script> 
```

有人可以告诉我为什么这会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:45:07.590

里面的代码在语法上`Util.js`看起来很好。但是，调用代码存在各种问题。

假设你使用的是 jQuery，你应该有类似的东西：

 ````
//Specify some code to be ran when the document is ready using the $ function
//This could have been done like this also $(document).ready(function () {});
$(function () {
    //Notice that the following line is inide the document ready handler.
    //Always make sure that the code that manipulates DOM nodes is executed only
    //when the document is ready.
    var attachPoint = document.querySelector('.buttonAttachPoint');

    myNameSpace.LoadAllBooks('ajax/metadata.json', attachPoint);
}); 
````

# php - 如何订购DESC并水平显示PHP

> ID：15673079
> 
> 赞同：-3
> 
> 时间：2013-03-28T02:13:57.337
> 
> 标签：php, sql

我想知道如何订购 DESC，然后使所有结果水平显示而不是垂直显示。

```
$sql = "SELECT name WHERE id > 5 ORDER BY id DESC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:29:33.330

您可以使用以下命令将所有名称放在逗号分隔的列表中`group_concat()`：

```
select group_concat(name order by id) as names
from t
where id > 5 
```

然后，您可以从列表中拆分出每个名称。（并且，如果逗号不是正确的分隔符，您可以使用`separator`关键字。）

# javascript - 需要帮助调整changeImage js代码

> ID：15673087
> 
> 赞同：0
> 
> 时间：2013-03-28T02:15:05.903
> 
> 标签：javascript

我是一个 js 初学者，我需要一些帮助来清理这段代码。这是一个 changeImage 情况，我在其中显示一个带有图像的复选框，而不是一个实际的表单复选框。因此，用户可以单击一个空复选框，然后单击将图像更改为复选标记。他们可以再次单击以取消选中。这一切都有效，但这就是问题所在。

单击其中一个复选框图像后，您必须单击两次才能更改另一个复选框图像。我希望它是一个平稳的单击情况，我不知道是什么阻止了这种情况。这是我正在使用的代码片段 -

```
var newsrc = "img/checked.gif";

function changeImage() {
    if(newsrc == "img/checked.gif") {
        document.images["challenge"].src = "img/checked.gif";
        document.images["challenge"].alt = "Completed";
        newsrc = "img/checkBox.gif";
    } else {
        document.images["challenge"].src = "img/checkBox.gif";
        document.images["challenge"].alt = "Unfinished";
        newsrc = "img/checked.gif";
    }
}

function changeImage2() {
    if(newsrc == "img/checked.gif") {
        document.images["goal1"].src = "img/checked.gif";
        document.images["goal1"].alt = "Completed";
        newsrc = "img/checkBox.gif";
    } else {
        document.images["goal1"].src = "img/checkBox.gif";
        document.images["goal1"].alt = "Unfinished";
        newsrc = "img/checked.gif";
    }
} 
```

脚本中共有六个图像。我只展示前两个。你能提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:32:04.957

发生的事情是所有函数都共享同一个`newsrc`变量，当您单击一个时，其他函数也认为它们已被单击。

您最好编写一个切换 src 的函数并在单击任何项​​目时调用该函数。

就像是：

```
function toggleImage(clickedImage){
    var checkedSrc='img/checked.gif';
    var currentSrc=clickedImage.src;
    if(currentSrc.indexOf(checkedSrc) ==  currentSrc.length-checkedSrc.length){
        clickedImage.src='img/checkBox.gif';
        clickedImage.alt='Unfinished';
    }else{
        clickedImage.src='img/checked.gif';
        clickedImage.alt='Complete';
    }
} 
```

在你的 html 中

```
<img id="whatever_1" src="img/checkBox.gif" alt="Unfinished" onclick="toggleImage(this)" />
<img id="whatever_2" src="img/checkBox.gif" alt="Unfinished" onclick="toggleImage(this)" />
<img id="whatever_3" src="img/checkBox.gif" alt="Unfinished" onclick="toggleImage(this)" /> 
```

# javascript - 为什么这段 javascript 代码不能与 html5 一起使用（在本地存储中保存有序列表）？

> ID：15673094
> 
> 赞同：2
> 
> 时间：2013-03-28T02:15:50.870
> 
> 标签：javascript, jquery, html

我有一个 HTML 中的无序列表，我想要它以便内容可编辑并保存在本地，这样当您刷新编辑的列表而不是默认列表时。

HTML：

```
<ul id="items" contenteditable="true">
    <li> Read up on HTML</li>
    <li> Learn new things in HTML5</li>
    <li> Try testing my knowledge by building a mobile app</li>
</ul> 
```

JAVASCRIPT：

```
$(function () {
    var items = document.getElementById('items');
    $(items).blur(function () {
        localStorage.setItem('itemData', this.innerHTML);
    });
    if(localStorage.getItem('itemData')) {
        items.innerHTML = localStorage.getItem('itemData');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:44:25.087

该代码在模糊元素后确实有效。也许这对`keyup`事件会更好。

```
$(items).keyup(function () {
    localStorage.setItem('itemData', this.innerHTML);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:26:06.333

好的，所以我是新手，可能完全没有抓住重点。但是在您发布的代码中，您没有刷新列表。当我制作动态列表时，我将刷新放在制作列表的函数中。例如 $(items).listview('refresh');

# c - C 中同一范围内多次使用 char 缓冲区时使用 char 缓冲区的说明

> ID：15673095
> 
> 赞同：0
> 
> 时间：2013-03-28T02:15:51.957
> 
> 标签：c, char, memset

在 C 编程中，字符缓冲区用于字符串实现。通常我们在使用任何范围内的任何字符缓冲区之前都会清除内容。当 char 缓冲区在同一范围内多次使用时，我需要澄清如何清理 char 缓冲区。例如，在下面的函数中，我使用的是 char buffer[BUF_SIZE]。

```
void function foo(char *p_char)
{
 char buffer[BUF_SIZE];
 memset(buffer, '\0', BUV_SIZE-1);
 strcpy(buffer, p_char);
 ..
 ..
 // after some codes.
 strcpy(buffer, "second time use of buffer");

} 
```

在上面的函数中，缓冲区被使用了两次，第二次我需要调用 memset() 来清除缓冲区中的先前内容吗？同样，当使用 char 缓冲区时，我是否总是在分配值之前清理它（如果值在同一范围内多次分配给缓冲区）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:19:44.627

如果您不将缓冲区设置为空字符，则空终止符之后的字符可能是垃圾，但这通常无关紧要，因为当某些内容读取 char * 字符串时，它通常会在空终止符处停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:20:33.753

如果您正在使用`strcpy`，则`memset`实际上不需要。从`man strcpy`页面可以看出

strcpy() 函数将 src 指向的字符串，**包括**终止的空字节 ('\0') 复制到 dest 指向的缓冲区。字符串不能重叠，并且目标字符串 dest 必须足够大以接收副本。

因为,`\0`也被复制了，所以你真的不需要做`memset`，对于`strings`，终止`NULL \0`字符表示`string`.

**注意**：如果您打算使用`strncpy`，请参考这个问题：[为什么 strncpy 不为空终止？](https://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate)

# ios - 在 NSMutableArray 中访问自定义对象属性时遇到问题

> ID：15673096
> 
> 赞同：0
> 
> 时间：2013-03-28T02:15:57.917
> 
> 标签：ios, objective-c, nsmutablearray

我在这里遇到了某种结构问题，因为我不确定我正在尝试做的事情是否可行：

我有三个自定义类，它们代表从机器代码翻译的指令类型。每个类都具有指令功能和操作数等属性。它们在第三个 VC 中被初始化并转换为实例并放入 NSMutableArray，我成功地将 NSMutableArray 移动到第四个 VC。现在，我需要遍历数组的每个对象（不知道它是哪种类型的类）并访问它的“指令”属性（即 NSString）。那可能吗？

类之一的声明示例：

```
@interface iInstruction : NSObject

@property (strong) NSString *opCode;
@property (strong) NSString *rs;
@property (strong) NSString *rt;
@property (strong) NSString *immediate;
@property (strong) NSMutableString *instruction;

- (id) initWithBinary: (NSString *) binaryInstruction; 
```

如何创建实例并移动到第四个 VC：

```
iInstruction *NewI = [[iInstruction alloc] initWithBinary:binary32Bits];
[TranslatedCode appendFormat:@"%@\n", NewI.instruction];
[instructions addObject: NewI];

disassembledCode.text = TranslatedCode;
FourthViewController *theVCMover = [self.tabBarController.viewControllers objectAtIndex:3];
theVCMover.instructionsInfo = instructions; 
```

我正在尝试做的失败尝试：

```
for (NSUInteger i=0; i < [instructionsInfo count]; i++) {   //instructionsInfo is a property of the fourth VC that I use to move the main array from the third VC
    NSString *function = [instructionsInfo objectAtIndex:i].instruction;  //Of course it says property not found because it only receives the NSMutableArray at runtime

    if (function isEqualToString:@"andi") {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:21:43.970

试试这个：

```
for (iInstruction *instruction in self.instructionsInfo) {
    NSString *function = instruction.instruction;

    // and the rest
} 
```

或者，如果您需要循环计数器：

```
for (NSUInteger i = 0; i < self.instructionsInfo.count; i++) {
    iInstruction *instruction = self.instructionInfo[i];
    NSString *function = instruction.instruction;

    // and the rest
} 
```

**编辑**：因为看起来数组可以有不同的对象，但它们都有一个`instruction`属性，你可以这样做：

```
for (id obj in self.instructionsInfo) {
    NSString *function = [obj valueForKey:@"instruction"]; // use key-value coding

    // and the rest
} 
```

# javascript - 几秒钟后使用javascript自动刷新div？

> ID：15673098
> 
> 赞同：0
> 
> 时间：2013-03-28T02:16:02.147
> 
> 标签：javascript, refresh

我正在寻找一种在不刷新整个页面的情况下每 5 秒刷新一次 div 的方法。

我有一个名为 mod_chat.php 的页面，我将其包含在我的页面 profile.php 中，因此：

```
<?php include('includes/mod_profile/mod_chat/mod_chat.php'); ?> 
```

在 mod_chat.php 中是我想每 5 秒重新加载一次但不刷新整个页面的 div，我尝试过的一切都不起作用，请有人告诉我如何解决这个问题。

这是我尝试过的：

```
<div class="chat_box">
<div class="chat_box_head"><div class="chat_box_head_text">You and  <?php
$chat_set_name = chat_set_name();
while ($chat1 = mysql_fetch_array($chat_set_name)) { ?><?php echo "".$chat1['display_name']."" ?><? } ?></div><div class="chat_close"></div></div>
<div class="chat_content">
<?php
    $chat_set = get_chats_to();
while ($chat = mysql_fetch_array($chat_set)) {
    if (isset($_SESSION['user_id'])) { 
        if ($chat['to_user_id'] == $_SESSION['user_id']){ ?>
             <?php echo "<div class=\"chat_row\">".$chat['content']."<br/><a href=\"#\">{$chat['display_name']}</a></div>"; ?>

        <? } } }?>

       </div> 
```

javascript:

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
   $('.chat_box').load('mod_chat.php');
}, 05000); // refresh every 05000 milliseconds
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:19:16.867

你能做到这一点；

```
function get_chat()   {

$.get('/mod_chat.php', {}, function(data ) {

        $("#div").html(data);
        //optional code, if you wanted the chat box to have a scroller and automatically move to bottom when messages are loaded.
        var textarea = document.getElementById('divid');
            textarea.scrollTop = textarea.scrollHeight;

    });

    //load messages every 4 seconds
    setInterval("get_chat();", 4000);

} 
```

然后在文档加载中，您将调用该函数；

```
 $(document).ready(function(){
        get_chat();
    }); 
```

# bash - 为什么不会 sed 从文件中删除行？

> ID：15673099
> 
> 赞同：2
> 
> 时间：2013-03-28T02:16:16.600
> 
> 标签：bash, sed

我正在尝试从文件中删除特定行，然后将编辑后的行附加到文件中。我得到了最后一部分，但是我删除旧行的 sed 命令不起作用。

```
sed '/^$userinput/d' file1.txt > file2.txt 
```

这最终将所有文件内容添加到新文件中。而不仅仅是我想要保留的线条。用户输入是我要删除的用户给出的行。这是我正在为课堂工作的一个 BASH 项目。我想通过删除它来完全从文件中删除它。

```
sed "/^${1}$/d" file > otherfile 
```

这添加了所有想要和不需要的行

```
sed "/^$1/d" file > otherfile 
```

创建空文件

这是我正在使用的声明。最后把它粘贴进去。

```
update(){
read -p "Enter the course number of the course you would like to update: " updateInput  
grep $updateInput my_course.txt>update.txt  
  typeset -i status  
  typeset grade  
  if [ $? -eq 0 ]  
    then  
        read -p "Status: " status  
        while(true)  
          do  
                if [ $status -eq 0 ]  
                then  
                  break  
                elif [ $status -eq 1 ]  
                then  
                  break  
                else  
                  printf "Enter either a 0 or 1\n"  
                fi  
          done  
        read -p "Grade: " grade  
        while(true)  
          do  
                if [ $status -eq 0 ]  
                then  
                  break  
                elif [ $status -eq 1 ]  
                then  
                  break  
                else  
                  printf "Enter either a 0 or 1\n"  
                fi  
          done  
        read -p "Grade: " grade  
        while(true)  
          do  
            case $grade in  
                    A)  
                    break  
                    ;;  
                  B)  
                  break  
                    ;;  
                  C)  
                    break  
                    ;;  
              *)  
                    read -p "Enter either an A, B, C: " grade  
                ;;  
                esac  
          done  
          sed "/^$updateinput/d" my_course.txt>my_course1.txt  
          awk -F, '  
            /^CSC/{printf$1","$2","$3"," > "update1.txt"}' update.txt  
          printf $status","$grade >> update1.txt  
          cat my_course1.txt > my_course.txt  
          cat update1.txt >> my_course.txt  
          rm update.txt  
          rm update1.txt  
    fi  
    } 
```

我很抱歉没有早点发布。每次我尝试粘贴它时都告诉我有错误。

在文件中放置两行文本并调用状态为 1 且等级为 A 的上述脚本后，这是输出

> CSC3320,系统级编程,3,1,A

这本质上是更改文件的脚本。在函数的开头添加了一个 grep。

```
 grep $updateInput my_course.txt>update.txt  (This is at the beginning of the function. Everything else was at the bottom. )

      sed "/^$updateinput/d" my_course.txt>my_course1.txt  
      awk -F, '  
        /^CSC/{printf$1","$2","$3"," > "update1.txt"}' update.txt  
      printf $status","$grade >> update1.txt  
      cat my_course1.txt > my_course.txt  
      cat update1.txt >> my_course.txt  
      rm update.txt  
      rm update1.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:19:31.047

在这种情况下，您需要这样做，因为`$`意味着行尾正则表达式。

尝试：

```
sed "/^${userinput}/d" file1.txt >> file2.txt 
```

也`>>`将附加到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:32:12.340

`$`是 sed 中的一个特殊字符，意思是“行尾”。如果您想`$userinput`在一行的请求中匹配文字，请使用`see '/^\$userinput/d'`

如果您希望您的 shell`$userinput`用其内容替换变量，请使用双引号而不是单引号：

```
sed "/^$userinput/d" file1.txt > file2.txt 
```

或者更好

```
sed "/^${userinput}/d" file1.txt > file2.txt 
```

这将删除以 的值开头的行`${userinput}`，如果您只想删除与 的值完全相同的行`${userinput}`，请使用

```
sed "/^${userinput}$/d" file1.txt > file2.txt 
```

为我工作：

```
╰─ ☭ cat file 
bar
foobar
foo
asdf
qwer
foo
asdf
╰─ ☭ cat script.sh 
#!/bin/bash
sed "/^${1}$/d" file > otherfile
╰─ ☭ ./script.sh foo
╰─ ☭ cat otherfile 
bar
foobar
asdf
qwer
asdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:55:40.637

我确实尝试过，发现变量值没有被 sed 语句中的 shell 正确替换。所以 sed 命令不是像模式一样搜索值，而是使用变量名作为模式进行搜索

即它试图搜索 $userinput 作为模式@ EOL

这是由于单引号的存在，再次尝试您的命令，但用双引号替换它们：它在我的系统中有效。

代码 ：：

```
Nitin@Kaizen ~>  cat new

#!/bin/bash

echo "the input file :"
cat INPUT2.txt ;

echo "enter line to remove" ;
read rem ;

date >> sed.log ;

sed "/$rem/d" INPUT2.txt >> sed.log;

echo "the output file :" ;
cat sed.log; 
```

跑 ：：

```
Nitin@Kaizen ~ >  ./new

the input file :
aa1
chap1
mk.t
temp.txt
z1
z2

enter line to remove
temp.txt

the output file :
Thu Mar 28 08:18:07 IST 2013
aa1
chap1
mk.t
z1
z2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T17:24:59.423

想出了如何解决它。

```
update(){
read -p "Enter the course number of the course you would like to update: " updateInput
grep -v ^$updateInput my_course.txt>updatedfile.txt
grep ^$updateInput my_course.txt>editedline.txt
if [ $? -eq 0 ]
  then
    while(true)
      do
            read -p "Status: " status
            if [ $status -eq 0 ]
            then
              break
            elif [ $status -eq 1 ]
            then
              break
            else
              printf "Enter either a 0 or 1\n"  
            fi  
      done  
    read -p "Grade: " grade  
    while(true)  
      do  
        case $grade in  
              A)  
                break  
              B)
              break
                ;;
              C)
                break
                ;;
              *)
                read -p "Enter either an A, B, C: " grade
            ;;
            esac
      done
      awk -F, '
        /^CSC/{printf$1","$2","$3"," >> "updatedfile.txt"}' editedline.txt
      printf $status","$grade"\n" >> updatedfile.txt
      cat updatedfile.txt > my_course.txt
      rm updatedfile.txt
      rm editedline.txt
  else
    printf "This course doesn't exist in your courses list.\n"
fi
} 
```

在我使用的代码的开头

```
grep -v regexexperssion file1>file2 
```

获取文件中的所有行而不删除要删除的行。然后我使用 grep 从文件中获取要编辑的实际行。

```
grep regexexperssion file1>file3 
```

在 awk 的底部，我使用 file3 中的行上的用户生成变量执行编辑，然后将其附加到 file1，它是由

```
grep -v regexexpression file1>file2 
```

命令

注意上面的解释与上面使用的实际代码不匹配，因为我认为查看这封信的人会更好地获得更一般的解释。我也知道可能有更好的方法来解决这个问题，并且上面的代码可能会被缩短。任何有关如何改进这一点的意见将不胜感激。感谢所有帮助过我的人。

# lua - Lua 程序提前结束

> ID：15673105
> 
> 赞同：0
> 
> 时间：2013-03-28T02:16:53.000
> 
> 标签：lua

我对 Lua 编程相当陌生，并且已经下载了几个解释器。我的问题是，一旦我的计算机完成执行我的程序，它就会关闭窗口。换句话说，像 print("Hello World") 这样的程序保持打开状态不到半秒。显然，这是我尝试学习lua的一大障碍。我已经尝试使用不同的解释器，虽然网上有几个可用的解释器，但我遇到了我上面描述的所有问题，但一个有点过时，因此无法执行我编写的一些程序。请告诉我我做错了什么。顺便说一句，我通过将程序拖到 lua.exe 或我正在使用的任何程序上来打开程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:31:25.443

> 我通过将程序拖到 lua.exe 或我正在使用的任何程序上来打开程序。

那是您的问题：在 Windows 中，打开这样的命令行程序将打开命令提示符，然后在命令完成后关闭。

您应该从命令提示符运行命令行 Lua 程序。这是在 Unix-y 系统中的样子：

```
$ cat hello.lua
print "Hello from Lua!"

$ lua hello.lua
Hello from Lua! 
```

在 Windows 上，它可能看起来更像：

```
> C:\Programs\Lua5.1\lua.exe hello.lua
Hello from Lua! 
```

您可以通过单击开始，选择运行，然后运行来打开命令提示符`cmd.exe`。然后，由于您已经在命令提示符中，因此窗口不会关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T06:19:44.077

按`Start`+`R`键，将打开如下所示的对话框。**`cmd`**在框中键入“ ”，然后按`Enter`或单击“**确定**” 。

![跑](../Images/429a599180022975c989f5765b74dc9b.png)

下一个终端打开后（如下图所示）；您可以简单地键入`lua`后跟要执行的文件路径/名称。

![命令](../Images/d045abe7f19143f0dede267f0e703862.png)

# java - Android - 使用 DownloadManager 下载后启动 Intent

> ID：15673114
> 
> 赞同：1
> 
> 时间：2013-03-28T02:18:01.050
> 
> 标签：java, android, android-intent, android-activity

我拥有的是多个按钮。使用 if-else 语句，我将文件下载到相应的按钮。现在，我还在 if-else 语句中定义了要通过意图打开的类。我需要它，以便它开始下载文件，然后开始新的活动。我曾经使用 AsyncTask 执行此操作，并在 onPostExecute 中启动新意图，但我认为使用 DownloadManager 会更好。所以，你可能会感到困惑。所以我会通过我的代码来解释......

所以，我在这里设置它：

```
 BroadcastReceiver receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                    long downloadId = intent.getLongExtra(
                            DownloadManager.EXTRA_DOWNLOAD_ID, 0);
                    Query query = new Query();
                    query.setFilterById(enqueue);
                    Cursor c = dm.query(query);
                    if (c.moveToFirst()) {
                        int columnIndex = c
                                .getColumnIndex(DownloadManager.COLUMN_STATUS);
                        if (DownloadManager.STATUS_SUCCESSFUL == c
                                .getInt(columnIndex)) {
                            String uriString = c
                                    .getString(c
                                            .getColumnIndex(DownloadManager.COLUMN_LOCAL_URI));
                        }
                    }
                }
            }
        };

        registerReceiver(receiver, new IntentFilter(
                DownloadManager.ACTION_DOWNLOAD_COMPLETE)); 
```

好的。现在，在我的 if-else 中，我声明要下载的 url，并设置一个字符串等于一个类，另一个字符串等于输出文件：

```
if (andy != null){
                className = "com.cydeon.plasmamodz.Softkeys";
                fileName = "batterymod.zip";
                dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
                Request req = new Request(
                        Uri.parse("https://dl.dropbox.com/s/gfukrwqy4xqrnj9/Android.zip"));
                req.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,
                        fileName);
                enqueue = dm.enqueue(req);
            } 
```

好的。所以一切都很好。现在，我的节目下载：

```
public void showDownload(View view) {
    Intent i = new Intent();
    i.setAction(DownloadManager.ACTION_VIEW_DOWNLOADS);
    startActivity(i); 
```

好的。现在，它下载了。所以，现在它正在下载，我需要开始一个新的活动。而且，我已经研究并尝试了一些东西，但没有任何效果。如您所见，我已经在字符串中设置了一个类。我有我在 onPostExecute 中使用的这段代码，所以我知道它工作正常：

```
 try {
          Intent openNewIntent = new Intent(Bmod.this, Class.forName(className) );
          startActivity( openNewIntent );
        } catch (ClassNotFoundException e) {
          e.printStackTrace();
          }
        } 
```

所以，我会重复我想要的。我想下载一个文件，然后在执行下载后，开始一个新的活动。任何帮助是极大的赞赏。谢谢！

编辑 - 这是一个更新的代码：

```
 public void showDownload(View view) {
    Context context = getApplicationContext();
    CharSequence text = "Download complete";
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
    try {
          Intent openNewIntent = new Intent(Bmod.this, Class.forName(className) );
          startActivity( openNewIntent );
        } catch (ClassNotFoundException e) {
          e.printStackTrace();
          }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:27:03.877

将 startActivity() 调用放在广播接收器的 onReceive() 中，以便在通知您的接收器下载完成时启动活动。

# c - C 中的字符串：为什么会这样？

> ID：15673115
> 
> 赞同：2
> 
> 时间：2013-03-28T02:18:01.590
> 
> 标签：c

我很抱歉问了一些可能看起来有点空洞的问题，因为它显然没有被破坏，但我（新手）对 C 如何处理字符串文字的理解告诉我这不应该工作......

```
char some_array_of_strings[3][200];
strcpy(some_array_of_strings[2], "Some garbage");
strcpy(some_array_of_strings[2], "Some other garbage"); 
```

我认为 C 阻止了对字符串文字的直接修改，这就是为什么在处理字符串时使用指针。这个工作的事实告诉我我误解了一些东西。

另外，如果这有效，为什么...

```
some_array_of_strings[1]="Some garbage"
some_array_of_strings[1]="Some garbage that causes a compiler error due to reassignment" 
```

不行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T02:38:38.940

小心“字符串数组”这个短语。“字符串”不是 C 中的数据*类型*；这是一个数据*布局*。具体来说，一个字符串被定义为

> 由第一个空字符终止并包括第一个空字符的连续字符序列

一个数组`char`可能*包含*一个字符串，而一个`char*`指针可能*指向*一个字符串（的第一个字符）。（标准将指向字符串第一个字符的指针定义为指向字符串的*指针*。）

```
char some_array_of_strings[3][200]; 
```

这定义了一个 3 元素数组，其中每个元素都是 200 个元素的数组`char`。（这是一个二维数组，在 C 中只是一个数组数组。）

```
strcpy(some_array_of_strings[2], "Some garbage"); 
```

字符串字面`"Some garbage"`量是指匿名静态分配的数组`char`；它存在于你的程序的整个执行过程中，你不能修改它。`strcpy()`顾名思义，该调用将该数组的内容*复制*`'\0'`到`some_array_of_strings[]`.

```
strcpy(some_array_of_strings[2], "Some other garbage"); 
```

同样的事情：这会将内容复制`"Some other garbage"`到`some_array_of_strings[2]`中，覆盖您在上一行复制的内容。在这两种情况下，都有足够的空间。

您不是在修改字符串文字，而是通过*从*字符串文字（更准确地说，从我上面提到的匿名数组）复制字节来修改自己的数组。

```
some_array_of_strings[1]="Some garbage"; 
```

这不仅“不起作用”，而且是非法的。C中没有数组的赋值。

让我们举一个更简单的例子：

```
char arr[10];
arr = "hello"; /* also illegal */ 
```

`arr`是数组类型的对象。在大多数情况下，数组类型的表达式被隐式转换为指向数组对象第一个元素的指针。这适用于赋值的双方：对象名称`arr`和字符串字面量`"hello"`。

但是左边的指针只是一个指针*值*。没有指针对象。用技术术语来说，它不是*左值*，所以它不能出现在作业的左侧，就像你写的一样`42 = x;`）。

（如果数组到指针的转换没有发生，它仍然是非法的，因为 C 不允许数组赋值。）

关于赋值左侧数组问题的更多细节：

*数组表达式不*衰减为指针的上下文是当数组表达式为：

*   一元运算`sizeof`符的操作数；
*   一元`&`（地址）运算符的操作数；或者
*   用于初始化数组对象的初始化程序中的字符串文字。

赋值的左侧不是这些上下文中的任何一个，所以在：

```
char array[10];
array = "hello"; 
```

LHS 原则上被转换为指针。但是生成的指针表达式不再是左值，这使得赋值违反了约束。

一种看待它的方法是将表达式`array`转换为指针，然后使赋值非法。另一个是由于赋值是非法的，整个程序不是有效的 C，所以它没有定义的行为，询问是否发生任何转换是没有意义的。

（我对“非法”这个词的使用有点快和松散，但这个答案已经足够长了，所以我不会进入它。）

[推荐阅读： comp.lang.c FAQ](http://www.c-faq.com)的第 6 节；它很好地解释了 C 中数组和指针之间经常令人困惑的关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T02:23:00.440

您没有修改字符串文字，而是将其用作将其复制到字符数组中的源。复制完成后，您的字符串文字与数组中的副本无关。然后您可以自由地操作数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T02:29:09.827

根据您的定义，`char some_array_of_strings[3][200];`表示`some_array_of_strings`是`array`3 个元素，每个元素本身`array`都是 200 个字符或长度`200`字符的字符串。

```
strcpy(some_array_of_strings[2], "Some garbage");
strcpy(some_array_of_strings[2], "Some other garbage"); 
```

在这两个语句中，您实际上是将内容从一个**复制**`char pointer`到另一个`char pointer`，这是有效的。`some_array_of_strings[2]`实际上是类似于`char[200]`which is similar to `char *`。

```
some_array_of_strings[1]="Some garbage";
some_array_of_strings[1]="Some garbage that causes a compiler error due to reassignment"; 
```

在这里，您正在为不受支持的ie**分配**一个赞。区别在于和内容。`char *``"Some garbage"``char[200]``some_array_of_strings[1]``assigning``copying`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T02:29:56.013

```
some_array_of_strings[1]="Some garbage"
some_array_of_strings[1]="Some garbage that causes a compiler error due to reassignment" 
```

在第一行中，您将 some_array_of_strings[1] 分配给字符串文字，因此 some_array_of_strings[1] 或 &some_array_of_strings[1] 的地址指向字符串文字。因此，在第二行中，当您尝试重新分配 some_array_of_strings[1] 时，它会给您错误。

正如 Keith 和 Fred 所说，使用 strcpy 您只需将字符串文字的字符复制到数组中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T02:36:16.923

`some_array_of_strings[2]`是一个 200 个字符的数组。

在大多数表达式中使用它时，它会“衰减”（用于转换的花哨词）为指向数组第一个元素的指针。

`strcpy(some_array_of_strings[2], "Some garbage");`然后`"Some garbage"`通过使用指向数组第一个元素的指针并一个一个地推进它，将一个字符一个字符地复制到该 200 个字符的数组中。

在大多数表达式`"Some garbage"`中，是一个指向包含这些相应字符加上字符串终止字符 ( `'\0'`) 的字符数组的指针。

`some_array_of_strings[1]="Some garbage"`另一方面，尝试将一个指针（指向字符串）分配给指向 200 个字符的第一个元素的常量/不可修改指针，这也是非法的（例如 do `1=2;`）

# .htaccess - htaccess 根据目录位置采取行动

> ID：15673116
> 
> 赞同：1
> 
> 时间：2013-03-28T02:18:04.223
> 
> 标签：.htaccess

我的项目中有一个 .htaccess 文件。我目前共有 4 个环境。我想对其中一个强制执行基本身份验证。我正在使用 git 管理我的环境版本。

我想在每个环境中使用相同的 .htaccess 文件，所以我正在寻找类似的逻辑，如下所示：

```
if localpath = env_x
    prompt authorization
else
    do nothing extra 
```

.htaccess 中是否可以获得类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:26:52.617

您可以[`If`](http://httpd.apache.org/docs/current/mod/core.html#if)用于 Apache 配置中的条件部分。在你的情况下，这可能是

```
<If %{REQUEST_FILENAME} =~ /env_x/>
# basic auth directives
</If> 
```

另请参阅[Apache HTTP Server 中的表达式以](http://httpd.apache.org/docs/current/expr.html)了解可能的情况。

# html - 320px 及以下的媒体查询

> ID：15673117
> 
> 赞同：2
> 
> 时间：2013-03-28T02:18:08.400
> 
> 标签：html, css, media-queries

我正在为网页编写媒体查询，并设法为 480px 及更多内容编写媒体查询。但是当我为 320px 编写媒体查询时，它不能正常工作。我想捕捉大多数手机（iphone4、iphone5、iphone3、华硕银河 7、三星银河 sII、三星银河 s3）的肖像视图，它是 320 像素。我创建的网页在这些设备中使用横向视图，但不适用于纵向视图。任何人都可以指出查询中的错误。这是我使用的媒体查询。

```
@media (max-width: 320px)
{
   html
   {
      font-size:0.1em;
   }

}
@media (max-width: 480px)
{
   html
   {
      font-size:0.20em;
   }
}
@media (max-width: 767px)
{
   html
   {
          font-size:0.38em;
   }
}
@media (min-width: 768px) and (max-width: 979px)
   {
       html
       {
           font-size:0.65em;
       }
   }

   @media (min-width : 980px) and (max-width:1025px)
   {
       html
       {
           font-size:0.7em;
       }
   } 
```

对于 320px，我也尝试过

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) 
and (orientation : portrait)
{ /*Styles */} 
```

和

```
@media only screen 
and (max-width : 320px) {
/* Styles */
} 
```

但他们都没有工作。我做错了什么/错过了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T02:48:59.077

由于您的 480 样式没有最小宽度，并且由于这些样式稍后出现在您的样式表中，因此它们会覆盖您放在它们之前的任何内容。

```
@media (max-width: 320px) {
   html {
      font-size:0.1em;
   }
}
@media (min-width: 321px) and (max-width: 480px) {
   html {
      font-size:0.20em;
   }
}
   ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T03:09:23.620

**一种**

```
@media (max-width: 320px)
{
   html { font-size:0.1em; }
} 
```

**乙**

```
@media (max-width: 480px)
{
 html { font-size:0.20em; }
} 
```

使用上面的方法，考虑一个 320px 的视口。

**A 和 B**是**true**，因为 320 达到 A 的限制并且远低于 B 的最大值。但是由于 B 通过稍后在样式表中声明来覆盖 A，字体大小由后面的声明决定 - B

**向B**添加`min-width:321px`要求将强制 B 为 320px 视口测试 false ——因此 font-size 将保持在 0.1em 直到 B 变为 true（最小宽度为 321px）。

 ****编辑（也许是一种更好的思考方式）**
而不是使用 max、max、max，为什么不利用`min-width`, 直到您达到可能最好使用范围的 UI（如平板电脑）

```
/* Set a base */
html { font-size:62.5% }

/* iPhone landscape range */
@media (min-width:321px) and (max-width:480px) {
    html { font-size:1.2em }
}

/* larger than iPhone landscape, an in the iPad portrait range */
@media (min-width:481px) and (max-width:768px) {
    html { font-size:1.6em }
}

/* bigger than iPad portrait  */
@media (min-width:769px) {
    html { font-size:2em }
} 
```**

# wpf - 选中 RadGridView 标题列中的所有复选框，并启用可过滤列和行虚拟化

> ID：15673119
> 
> 赞同：0
> 
> 时间：2013-03-28T02:18:25.317
> 
> 标签：wpf, mvvm, telerik, virtualization, radgrid

我有一个带有可过滤列的 RadGridView。我需要在列标题中添加一个复选框，以检查作为某些过滤器结果的所有行（如果使用）。

当检查标头列上的复选框时，我只是无法更新贝琳集合中的值，因为用户可能会适用于某些列。

所以，我尝试了以下方法：

```
var rows = EntityDataGridView.ChildrenOfType<GridViewRow>(); 
```

然后我遍历行并更新其数据上下文。此解决方案运行良好，但在启用行虚拟化的情况下效果不佳。它只更新屏幕上的可见行。我们必须处理大量数据，因此我们无法关闭行虚拟化。

我有一个解决方案，但我发布这个是为了获得更多关于如何以更快更好的方式解决这个问题的想法。

我有它的解决方案，我将 RadGridView 的过滤器描述符传递给视图模型，然后手动将过滤器应用于视图模型中的集合，然后更新复选框状态。但是有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:37:21.440

我不知道 Telerik 是如何实现过滤器的。

但是，如果它的**radgrid**使用[**ICollctionView**](http://msdn.microsoft.com/en-us/library/system.componentmodel.icollectionview.aspx)过滤集合，您可以将您的集合创建为**ICollctionView**，并遍历过滤的项目集合。

```
var myCollectionView = CollectionViewSource.GetDefaultView(myDataSource);

...

foreach(var item in myCollectionView.OfType<TypeOfTheElement>())
{
    item.IsChecked = value;
} 
```

请注意，只有当**ICollcetionView**中的 ICollcetionView`ViewModel`与 telerik **radgrid**使用的相同时，这才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:38:47.137

大声笑，这个问题的解决方案非常简单，RadGridView 上的“项目”属性具有过滤的项目，而不是来自数据源的项目。所以，我改用那个！

# git - 如何在 Windows 上的 Git Bash 终端下向 EOF 发出信号以关闭标准输入？Ctrl-D 不起作用

> ID：15673120
> 
> 赞同：12
> 
> 时间：2013-03-28T02:18:31.697
> 
> 标签：git, bash, terminal, stdin, eof

我正在编写一个命令行工具。这个工具可以做的一件事（当然不是唯一的）是从标准输入读取它的输入。当我注意到我不知道如何向它发出 EOF 信号时，我正在交互式地测试它（通过输入输入，而不是在其中输入文件）。

今晚我花了很多时间在谷歌上搜索，但没有发现任何帮助。我也搜索过。请随时向我指出一个重复的问题，但我保证，我做了尽职调查。

编辑：提及我在 Windows 上执行此操作可能会有所帮助（？）。所以我相信终端或多或少是一个品牌的MinGW？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T02:23:47.270

如果您尝试将 EOF 发送到 Windows 下的程序输入，`Ctrl-Z`这就是您要查找的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T02:45:47.363

它是 ^D，ASCII 传输结束字符。所有 GNU-userland 工具都将使用 POSIX 标准。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-12-09T16:17:51.240

我在 Windows 上的 Git Bash 中使用的一个简单解决方法是对程序的输入进行分类。

例如，而不是运行

```
java my_package.Main 
```

你可以跑

```
cat | java my_package.Main 
```

这是因为 cat 程序是一个 linuxy 程序，可以接受来自终端的消息结束，而 java 可以通过管道正确接收消息结束命令。

所以在使用这个命令的时候，你可以在输入信息后输入Ctl-D，java程序会正确看到信息的结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-10T17:40:49.603

“^d ^d”对我有用。只需将此字符串添加到输入的末尾即可成功。

# php - 更新记录时将图像文件放入文件字段

> ID：15673121
> 
> 赞同：0
> 
> 时间：2013-03-28T02:18:39.443
> 
> 标签：php

```
if(isset($_GET['edit']))
{
$Id=$_GET['edit'];
//Get Form Data from Data base against the Id
$Edit_Query="SELECT * FROM products WHERE id='$Id'";
$Result=mysql_query($Edit_Query);    
while($Row=mysql_fetch_array($Result))
    {
        $Id=$Row['id'];
        $Product_Name=$Row['product_name'];
        $Product_Price=$Row['price'];
        $Product_Details=$Row['details'];
        $Category=$Row['category'];
        $Subcategory=$Row['subcategory'];
        $File_Name=$Row['product_picture']; 
    } 
```

现在我将所有变量回显到我的输入字段中...请注意，这`['product_picture']`只是文件名...物理文件已上传到我的上传文件夹中...现在我想将该物理文件自动放入我的文件字段中。 .so 如果用户只是更改其他字段并点击更新按钮......它将更新记录的其余部分，并且文件应该保持原样，因为它在文件夹中以及具有该特定的 db 中`$ID`。

我试过`<input type="file" name="product_picture" value="<php echo $File_Name; ?>">` 了，但它甚至没有回显文件名....

简而言之，就像用户想要更新记录，但他不必也必须更新文件......它应该是可选的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:25:41.593

尝试这个，

使用隐藏字段来存储图像 ID，

```
<input type="hidden" name="image_id" value="image_id"> 
```

然后，您可以使用它为新图像分配以前的 ID，而不必更新 SQL 数据库。

# php - Mediawiki 阻止页面保存并重定向回编辑页面并显示错误消息

> ID：15673126
> 
> 赞同：1
> 
> 时间：2013-03-28T02:19:37.380
> 
> 标签：php, mediawiki

我的 wiki 文章包含指向特定数据集的链接。我想强制这些链接是唯一的（因为没有人可以使用另一个页面中存在的链接创建一个新页面。）我已经为这个扩展编写了大部分代码。我创建了一个表“unique_external_links”，将 url 存储为索引和 URL 所在的页面 id。

这是我写的部分代码：

```
$wgHooks['ParserFirstCallInit'][] = 'UniqueURLSetupParserFunction';
$wgHooks['LoadExtensionSchemaUpdates'][] = 'fnExternalLinksDBHook';
// Allow translation of the parser function name
$wgExtensionMessagesFiles['UniqueUrl'] = dirname( __FILE__ ) . '/UniqueUrl.i18n.php';

// Tell MediaWiki that the parser function exists.
function UniqueURLSetupParserFunction( &$parser ) {
   $parser->setFunctionHook( 'example', 'UniqueURLParserFunction' );
   return true;
}

function UniqueURLParserFunction( $parser, $param1 = '', $param2 = '' ) {

   // The input parameters are wikitext with templates expanded.
   // The output should be wikitext too.
   global $wgRequest, $wgOut;
   $return_url = $wgRequest->getRequestURL();
   $pid = $param2;
   $param1 = trim($param1);
   $url_pattern = '/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/';
   $match = preg_match($url_pattern, $param1);
   if (!$match) {
      // return ERROR not a valid URL!
   }
   $patterns = array('/^(https?:\/\/)/', '/\/$/');
   $replace = array('','');
   $url = preg_replace($patterns, $replace, $param1); 
   if (empty($param2)) {  // creating a new page
      try {
         $dbw = wfGetDB( DB_MASTER );
         $res = $dbw->insert('unique_external_links',
                array('link_url' => $url , 'page_id' => $pid));
      } catch(Exception $e) {
         // return ERROR page with this link already exists!
      }
   } else {  //Trying to edit existing page
      $dbr = wfGetDB( DB_SLAVE );
      $res = $dbr->select(
        'unique_external_links',                                   
        array( 'link_url' ),            
        'link_url = "' .$url.'" AND page_id = "' .$pid.'"'                              
      );
      if ($dbr->numRows($res) == 0) {
        try {
           $dbw = wfGetDB( DB_MASTER );
           $res = $dbw->insert('unique_external_links',
                  array('link_url' => $url , 'page_id' => $pid));
        } catch(Exception $e) {
           //return ERROR Dataset Already Exists
           $response = $wgRequest -> response();
           $response -> header('Location: '.$return_url);
           return $return_url;
        }
      }else {
         //just editing page, not changing link, all is good
         return $param1;
      }
   }
   return $param1;

} 
```

首先，我为草率的代码道歉，真的只是在没有任何扩展经验的情况下很快就将其拍打在一起......正如你所看到的那样，我在某些地方有评论 //return ERROR 我想阻止媒体 wiki 保存如果这些条件之一为真，则页面。我不想保存，而是想将用户返回到编辑页面，并显示一条消息，告诉他们他们提供的链接有问题。

有任何想法吗？我环顾四周，但找不到任何类似的东西，我认为这是因为我真的不知道要问什么问题。我知道有像“ArticleSave”这样的钩子，但我不知道如何将它与解析器结合使用。

任何帮助都会很棒！即使它告诉我要完全重新做我所做的，因为它完全错了哈哈。

**编辑：**我通过在我想返回错误的地方抛出 MWExceptions 来解决这个问题。然后我转到 Exceptions.php 并更新 MWExceptionhandler 以在它看到异常消息与我从该扩展中抛出的消息匹配时采取不同的操作。我承认这是 hacky.. 但有时你能做什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:48:52.690

将此扩展编写为解析器函数可能是错误的方向。如果要拒绝编辑，请使用[EditFilter](http://www.mediawiki.org/wiki/Manual%3aHooks/EditFilter)挂钩。您可能希望将[SpamBlacklist](http://www.mediawiki.org/wiki/Extension%3aSpamBlacklist)扩展作为模型查看，因为它还查看链接以决定是否拒绝编辑。

此外，我在您的扩展程序中看到的一个问题是，一旦使用这些唯一链接之一保存了页面，即使删除了链接（或整个页面！），也无法从 unique_external_links 中删除行，这使得有时无法重新插入已删除的链接。你可能想要解决这个问题。

# c++ - 通过在构造函数主体之前抛出异常来防止构造

> ID：15673132
> 
> 赞同：0
> 
> 时间：2013-03-28T02:20:03.877
> 
> 标签：c++, exception, constructor, throw, ctor-initializer

**C++**

我希望一个类`throw`在其构造函数的主体的左大括号之前出现异常，`{`方法是使用它自己的成员函数来防止构造。我定义了一个成员函数，其目的只是无条件地`throw`异常，具有任意选择的非`void`返回类型和一个类型与该返回类型匹配的虚拟数据成员，以便我可以`throw`通过调用构造这个数据成员来触发构造函数初始化列表中的成员函数。这可行，但并不优雅，因为在非玩具类中，虚拟变量没有其他用途，只能为成员函数运行提供借口，并且成员函数的非`void`返回类型没有其他用途，只是有一个借口可以由相同类型的虚拟数据成员的构造函数调用。

这个玩具可以编译但并不优雅：

```
class Toy
{
public:
    Toy() : dummy(preventer()) {}
private:
    int dummy;
    int preventer() {throw -1; return 0;}
};

#include <iostream>

int main()
{
    try
    {
        Toy t;
    }
    catch (const int& e)
    {
        std::cout << "caught the exception\n";
    }
    return 0;
} 
```

**控制台输出：**

```
caught the exception 
```

`{`如果没有虚拟变量，有没有办法在构造函数主体的左大括号之前抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:30:19.617

是的，您可以使用基类而不是数据成员，然后调用基类的构造函数。

请注意，旧版本的 GNU 调试器`gdb`（几年前）无法解决此类异常。

但是，它适用于 Visual C++，我相信也适用于现代版本的 GNU 工具链。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:46:59.427

您可以像这样避免函数的虚拟返回值：

```
bool called = (function(), true); 
```

右边两个表达式之间的逗号运算符依次计算表达式，丢弃除最后一个结果之外的所有结果。我想知道的是为什么你坚持在打开花括号之前这样做。您到底想在这里实现什么，而通过调用函数作为主体中的第一件事是无法实现的？

请注意，如果您想尽早中止，那么在单独的基类中执行此操作（您可以在那里使用私有继承）可能是最好的解决方案。这是唯一允许您阻止构建其他基础的解决方案，而您的解决方案却没有。

# sugarcrm - SugarCRM：网页链接（仅登录用户可访问）

> ID：15673133
> 
> 赞同：0
> 
> 时间：2013-03-28T02:20:10.097
> 
> 标签：sugarcrm

我目前正在使用 MySites dashlet 将用户链接到另一个网页。问题是任何知道 URL 的人都可以访问同一个页面（上面有专有信息）。

我想在 SugarCRM 中创建一个指向只有当前登录到 CRM 的用户才能访问的网页的链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:52:15.300

是不是内部的 SugarCRM 页面？如果是，您可以使用“auth”参数为 true 的 entryPoint：http: [//support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/02_Application_Framework/Entry_Points/02_Creating_Custom_Entry_Points](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/02_Application_Framework/Entry_Points/02_Creating_Custom_Entry_Points)

# angularjs - 如何从指令的 `link` 函数中获取渲染的内容？

> ID：15673134
> 
> 赞同：1
> 
> 时间：2013-03-28T02:20:12.847
> 
> 标签：angularjs, angularjs-directive

html代码：

```
<div class="test">{{name}}</div> 
```

角代码：

```
var app = angular.module('angularjs-starter', []);

app.controller('MainCtrl', function($scope) {
  $scope.name = 'World';
});

app.directive('test', function(){
  return {
    restrict: 'C',
    link: function(scope, elm, attrs){
      var content = elm.html();
      alert(content);
    }
  }
}); 
```

它会提醒一个字符串`{{name}}`。如何提醒渲染的字符串`World`？

现场演示：[http ://plnkr.co/edit/Mov0AlkdE9B8yKiBjpnp?p=preview](http://plnkr.co/edit/Mov0AlkdE9B8yKiBjpnp?p=preview)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T03:30:49.867

您需要使用[$interpolate](http://docs.angularjs.org/api/ng.%24interpolate)服务来执行此操作

```
app.directive('test', function($interpolate){
  return {
    restrict: 'C',
    link: function(scope, elm, attrs){
      var content = elm.html();
      alert($interpolate(content)(scope))
    }
  }
}); 
```

演示：[小提琴](http://plnkr.co/edit/F1hnUtAhcr23lYQpgIzw?p=preview)

# python - 设置多个变量时的 Python 顺序

> ID：15673136
> 
> 赞同：-1
> 
> 时间：2013-03-28T02:20:20.550
> 
> 标签：python

我正在使用 python 并遇到了这行代码：

```
a, c = c, getMod(a,c) 
```

我正在尝试将这个程序翻译成 TI-84 语言，但我不知道该怎么做。他们有一个特定的顺序，还是比这更复杂？

getMod() 是我设置的一个函数，在这个场景中并不重要。它返回 a%c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:25:03.603

这称为[元组解包](http://en.wikibooks.org/wiki/Python_Programming/Tuples#Packing_and_Unpacking)。本质上，变量被识别的顺序就是它们被分配的顺序。

那行代码在语义上等于：

```
a = c
c = getMod(a, c) 
```

# python - web2py 保管箱集成

> ID：15673138
> 
> 赞同：0
> 
> 时间：2013-03-28T02:20:32.857
> 
> 标签：python, dropbox, web2py, dropbox-api

我在 web2py 中使用 Dropbox 会话时遇到了困难。这是我的默认控制器，有两种方法：

```
def index():
    APP_KEY = 'XXXXXXXXXXX'
    APP_SECRET = 'XXXXXXXXXXX'
    ACCESS_TYPE = 'dropbox'
    sess = dropbox.session.DropboxSession(APP_KEY, APP_SECRET, ACCESS_TYPE)
    request_token = sess.obtain_request_token()
    url = sess.build_authorize_url(request_token, "http://localhost:8000/dropbox/default/welcome")
    redirect(url)

def welcome():
    ## How do I get the session object here??
    access_token = sess.obtain_access_token(request_token)
    client = dropbox.client.DropboxClient(sess)
    return dict(message=T("Welcome user!" + client.account_info())) 
```

我尝试过使用 current.session，也尝试过缓存会话，但它对我不起作用。

有人可以就如何在索引方法中保存保管箱会话并能够在其他方法/控制器中使用它提供一些帮助。代码示例将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:29:32.733

您可以在模型中放置这样的东西（未经测试），因此 dropbox_session 将可用于所有控制器......

```
def __make_dropbox_connection():
    sess = dropbox.session.DropboxSession(APP_KEY, APP_SECRET, ACCESS_TYPE)

    print("DROPBOX Connection established ...")
    return sess

##
dropbox_sess = cache.ram('dropbox',__make_dropbox_connection,None) 
```

# git - 是否可以预先评估 bash 的 PS1 中的值？

> ID：15673140
> 
> 赞同：4
> 
> 时间：2013-03-28T02:20:42.187
> 
> 标签：git, bash

我正在尝试构建一个 Bash 提示符，该提示符将包含我的 git 分支信息（使用 git 的 bash-completion 中的 __git_ps1 ）和一个彩色笑脸，以指示最近运行的命令是否成功。

笑脸是使用这种技术创建的，我在 SO 上找到了它：

```
SMILEY="${GREEN}:)${COLOR_NONE}"
FROWNY="${RED}:(${COLOR_NONE}"
STATUS_EMOTICON="if [ \$? = 0 ]; then echo \"${SMILEY}\"; else echo \"${FROWNY}\"; fi" 
```

这是我要使用的提示行：

```
export PS1="[\t]${RED}[\u@$MACHINE:${BOLD_CYAN}\w${GREEN}\$(__git_ps1 ' %s')${RED}]${COLOR_NONE} \`${STATUS_EMOTICON}\`\n$ " 
```

不幸的是，看起来由 __git_ps1 运行的程序会覆盖该`$?`值，即使在运行`false`.

取出 __git_ps1 调用...

```
export PS1="[\t]${RED}[\u@$MACHINE:${BOLD_CYAN}\w${RED}]${COLOR_NONE} \`${STATUS_EMOTICON}\`\n$ " 
```

...使表情符号正常工作。

所以我显然需要做的是在运行`${STATUS_EMOTICON}` *之前评估，但在输出**之后*`__git_ps1`包括评估值。那可能吗？ *`__git_ps1`*

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T03:05:13.793

不要把`$(cmd)`or``cmd``直接放在你的`PS1`. 相反，使用 Bash 的`PROMPT_COMMAND`var。我通常做的是定义一个函数`_PS1_cmd`并设置`PROMPT_COMMAND=_PS1_cmd`。然后在 中`_PS1_cmd`，我设置了我想包含在`PS1`. 例如：

```
THE-OLD-PROMPT # cat prompt.rc
function _PS1_cmd()
{
    local saveExit=$?

    # This non-zero exit will not affect $? on command line
    g_git_ps1=$( echo TESTING; exit 1 )
    if (( saveExit )); then
        g_smiley=':('
    else
        g_smiley=':)'
    fi

    # Seems like this is not necessary, at least with bash 4.2.37\. But
    # to be safe, always return it.
    return $saveExit
}

PROMPT_COMMAND=_PS1_cmd
PS1='$g_git_ps1 $g_smiley '
THE-OLD-PROMPT # source ./prompt.rc
TESTING :) ( exit 123 )
TESTING :( echo $?
123
TESTING :) echo $?
0
TESTING :) 
```*

# c - C客户端服务器回显程序在客户端显示无效消息

> ID：15673144
> 
> 赞同：2
> 
> 时间：2013-03-28T02:21:11.240
> 
> 标签：c, sockets, gcc, tcp, client-server

我也是套接字编程和 C 的新手。我正在创建一个简单的回显客户端服务器应用程序，该应用程序支持使用线程的多个客户端遵循教程。

**在应用程序中一切正常，除了客户端回显无效消息** 它似乎替换了我输入的最长消息的第一个字符

我正在使用 Windows 7 上的 vmware 开发 Fedora 14 终端

这就是我编译和运行客户端和服务器的方式

**服务器**

```
[sachith@localhost ~]$ gcc -pthread -o s server.c
[sachith@localhost ~]$ ./s
Socket created
bind done
Waiting for incoming connections...
Connection accepted 
```

****客户端 //这里有问题 ****

```
[sachith@localhost ~]$ gcc client.c -o c
[sachith@localhost ~]$ ./c
Socket created
Connected

Enter message : Hello
Server reply :
Hello
Enter message : 123
Server reply :
123lo
Enter message : x
Server reply :
x23lo
Enter message : y
Server reply :
y23lo
Enter message : 
```

以下是我的代码

**//服务器代码**

```
#include<stdio.h>
#include<string.h>  //strlen
#include<sys/socket.h>
#include<arpa/inet.h>   //inet_addr
#include<unistd.h>  //write

int main(int argc , char *argv[])
{
    int socket_desc , client_sock , c , read_size;
    struct sockaddr_in server , client;
    char client_message[2000];

    //Create socket
    socket_desc = socket(AF_INET , SOCK_STREAM , 0);
    if (socket_desc == -1)
    {
        printf("Could not create socket");
    }
    puts("Socket created");

    //Prepare the sockaddr_in structure
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons( 8888 );

    //Bind
    if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
    {
        //print the error message
        perror("bind failed. Error");
        return 1;
    }
    puts("bind done");

    //Listen
    listen(socket_desc , 3);

    //Accept and incoming connection
    puts("Waiting for incoming connections...");
    c = sizeof(struct sockaddr_in);

    //accept connection from an incoming client
    client_sock = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c);
    if (client_sock < 0)
    {
        perror("accept failed");
        return 1;
    }
    puts("Connection accepted");

    //Receive a message from client
    while( (read_size = recv(client_sock , client_message , 2000 , 0)) > 0 )
    {
        //Send the message back to client
        write(client_sock , client_message , strlen(client_message));
    }

    if(read_size == 0)
    {
        puts("Client disconnected");
        fflush(stdout);
    }
    else if(read_size == -1)
    {
        perror("recv failed");
    }

    return 0;
} 
```

**//客户端代码**

```
#include<stdio.h>   
#include<string.h>  
#include<sys/socket.h>  
#include<arpa/inet.h>   

int main(int argc , char *argv[])
{
    int sock;
    struct sockaddr_in server;
    char message[1000] , server_reply[2000];

    //Create socket
    sock = socket(AF_INET , SOCK_STREAM , 0);
    if (sock == -1)
    {
        printf("Could not create socket");
    }
    puts("Socket created");

    server.sin_addr.s_addr = inet_addr("127.0.0.1");
    server.sin_family = AF_INET;
    server.sin_port = htons( 8888 );

    //Connect to remote server
    if (connect(sock , (struct sockaddr *)&server , sizeof(server)) < 0)
    {
        perror("connect failed. Error");
        return 1;
    }

    puts("Connected\n");

    //keep communicating with server
    while(1)
    {
        printf("Enter message : ");
        scanf("%s" , message);

        //Send some data
        if( send(sock , message , strlen(message) , 0) < 0)
        {
            puts("Send failed");
            return 1;
        }

        //Receive a reply from the server
        if( recv(sock , server_reply , 2000 , 0) < 0)
        {
            puts("recv failed");
            break;
        }

        puts("Server reply :");
        puts(server_reply);
    }

    close(sock);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:46:44.923

您必须 memset 接收缓冲区或在单词的最后位置添加 '\0'。例如：

这是你的代码：

```
while( (read_size = recv(client_sock , client_message , 2000 , 0)) > 0 )
{
    //Send the message back to client
    write(client_sock , client_message , strlen(client_message));
} 
```

修改的：

```
memset(client_message, 0x00, 2000);
while( (read_size = recv(client_sock , client_message , 2000 , 0)) > 0 )
{
    //Send the message back to client
    write(client_sock , client_message , strlen(client_message));
} 
```

或修改：

```
while( (read_size = recv(client_sock , client_message , 2000 , 0)) > 0 )
{
    *(client_message + read_size) = '\0';
    //Send the message back to client
    write(client_sock , client_message , strlen(client_message));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T02:52:28.160

我知道这是一个老问题。我确实看到有一个更简单的解决方案。

没有必要做strlen。由于数据的长度已知，只需重用 read_size。

```
while( (read_size = recv(client_sock , client_message , 2000 , 0)) > 0 )
{
  //Send the message back to client
  write(client_sock , client_message , read_size);
} 
```

# javascript - 样式单选按钮下划线文本

> ID：15673151
> 
> 赞同：1
> 
> 时间：2013-03-28T02:21:44.703
> 
> 标签：javascript, html, css, styling, underline

![下面是我想要实现的示例快照](../Images/b89efb318a0a808ceeeda332a15a46ad.png)

所以我会有文字：“牛津......真实的例子”和需要下划线并在下方有一个单选选项的短语（在图片中没有单选按钮，但我还需要一个单选按钮供用户选择）。

如何使用 css 和 javascript 实现这一点？

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:45:12.717

我相信这就是你想要的：

　　`[*`http://jsfiddle.net/DerekL/NRpcn/`*](http://jsfiddle.net/DerekL/NRpcn/)`

（为了简单起见，我在示例中使用了[jQuery ）](http://www.jquery.com/)

```
var list = ["The", "well known", "meanings", "to give"];    //word list
var output = $("#output"),
    html = output.html();

for(var i = 0; i < list.length; i++) {
    //Wrap each keyword with <span>
    html = html.replace(new RegExp("(" + list[i] + ")", "i"), "<span>$1</span>");
}

output.html(html);

$("p>span").each(function (i) {              //Create the index for each one
    var x = $(this).offset().left,                  //Get the x
        y = $(this).offset().top,                   //Get the y
        width = +$(this).width(),                   //Get the width
        $select = $("<div>").addClass("select");

    $select.css({
        top: y + 20,
        left: x,
        width: width
    })
        .html(String.fromCharCode(65 + i))          //Set the index (A, B, C...)
        .appendTo("body");                          //Append it to the container
}); 
```

（该示例将在您调整窗口大小时自动重新计算位置。）

这是实现它的一种方法，还有许多其他方法可以做到这一点。我个人更喜欢这个，因为这不是很容易理解。

# ios - 单元测试ios属性

> ID：15673152
> 
> 赞同：0
> 
> 时间：2013-03-28T02:21:54.137
> 
> 标签：ios, objective-c, unit-testing

今天我有一个小问题要解决。

```
@property(nonatomic, weak) NSmutableArray *itemsToDelete; 
```

实际上问题是当 delete 方法被调用时，for 循环确定 itemsToDelete 是空的。当更改为强时，一切都开始工作。现在我想对我的更改进行单元测试。如何编写单元测试并确保一切正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:08:59.647

您实际上可以使用以下方法测试更改

```
 @autorelease
   {
      initialize your property;
   } 
```

# python - 尝试创建数组时，继续使用 numpy 获取 ValueError

> ID：15673155
> 
> 赞同：1
> 
> 时间：2013-03-28T02:22:00.793
> 
> 标签：python, numpy

我正在尝试使用现有数组的元素创建一个新数组。我不断收到：ValueError: Setting void-array with object members using buffer。

```
import numpy as np
import datetime

date = datetime.date(2013, 4, 5)
results = [(date,0,1,2,3), (date,5,1,5,6), (date,3,4,4,7)] 
stock_dt = np.dtype([('date', object),
                     ('open', np.int8),
                     ('high', np.int8),
                     ('low', np.int8),
                     ('close', np.int8)])

d = np.array(results, dtype=stock_dt)
matches = []
for item in d:
    if item['high'] == 1:
        matches.append(item)

rec = np.array(matches, dtype=stock_dt)

print rec 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T02:40:17.347

问题是它`matches`不是一个元组列表，所以你不能用它制作一个结构化数组。相反，它是结构化数组的列表，需要合并回单个结构化数组。您可以`numpy.lib.recfunctions.stack_arrays`为此使用：

```
In [21]: import numpy.lib.recfunctions as rfn

In [22]: rfn.stack_arrays(matches,usemask=False)
Out[22]: 
array([(datetime.date(2013, 4, 5), 0, 1, 2, 3),
       (datetime.date(2013, 4, 5), 5, 1, 5, 6)], 
      dtype=[('date', 'O'), ('open', 'i1'), ('high', 'i1'), ('low', 'i1'), ('close', 'i1')]) 
```

您还可以考虑完全取消循环：

```
In [23]: d[d['high'] == 1]
Out[23]: 
array([(datetime.date(2013, 4, 5), 0, 1, 2, 3),
       (datetime.date(2013, 4, 5), 5, 1, 5, 6)], 
      dtype=[('date', 'O'), ('open', 'i1'), ('high', 'i1'), ('low', 'i1'), ('close', 'i1')]) 
```

哪个应该更快，启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:36:25.410

改变

```
rec = np.array(matches, dtype=stock_dt) 
```

到

```
rec = np.array(matches) 
```

当您进行迭代时，`matches`您不再处理元组，因此您不应该再次传递`dtype=stock_dt`给`np.array`。

# python - 从 3% 获得 .03 的 Pythonic 方式

> ID：15673156
> 
> 赞同：1
> 
> 时间：2013-03-28T02:22:03.760
> 
> 标签：python

我可以通过几种方式转换为十进制，例如使用正则表达式提取 int 部分并`%`除以`100`或除以第一部分。但我想知道是否有更蟒蛇的方式来做到这一点？`'%'``int()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:23:13.330

右剥离百分比，解析为浮点数，然后除以 100：

```
float(your_string.rstrip('%')) / 100.0 
```

但是，这将允许多个`%`，这可能是也可能不是一件好事。如果您知道最后一个字符将*始终*是 a `%`，则可以对字符串进行切片：

```
float(your_string[:-1]) / 100.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:46:27.697

该数字应带有一个（且只有一个）% 符号，并位于字符串的末尾：

```
def perc2num(p):
    p = p.strip() # get rid of whitespace after the %
    if p.endswith('%') and p.count('%') == 1:
        return float(p[:-1])
    else:
        raise ValueError('Not a percentage.') 
```

`float()`转换将去除数字和 % 之间的空格。

测试：

```
In [11]: perc2num('3.5%')
Out[11]: 3.5

In [12]: perc2num('-0.2')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-12-9a6733e653ff> in <module>()
----> 1 perc2num('-0.2')

<ipython-input-10-44f49dc456d1> in perc2num(p)
      3         return float(p[:-1])
      4     else:
----> 5         raise ValueError('Not a percentage.')

ValueError: Not a percentage.

In [13]: perc2num('-7%')
Out[13]: -7.0

In [15]: perc2num('  23%')
Out[15]: 23.0

In [16]: perc2num('  14.5 %')
Out[16]: 14.5

In [17]: perc2num('  -21.8 %  ')
Out[17]: -21.8 
```

# ruby-on-rails - 如何从 JBuilder 视图委托给模型的 to_builder 方法？

> ID：15673160
> 
> 赞同：7
> 
> 时间：2013-03-28T02:22:20.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionview, jbuilder

假设我有一个 Person 类和一个 Gang 类

```
class Person
  belongs_to :gang
  attr_accessible :name, :secret

  def to_builder
    Jbuilder.new do |app|
      person.id id
      person.name name
    end
  end
end

class Gang
  has_many :people
  attr_accessible :name
end 
```

如何从视图中使用此 to_builder 方法？

例如

```
#app/views/gang/show.json.jbuilder (@gang set by the controller)

json.gang do |json|
  json.name @gang.name
  json.gang_members(@gang.people) do |person|
     #how do I delegate to the person.to_builder here?
  end
end 
```

请注意，我不只是想使用默认的 Person.as_json，因为我不想`secret`在 Person 上呈现属性。

我尝试过的大多数事情最终都呈现了 Person.as_json 的等价物，而不是 Person.to_builder。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T02:31:20.423

您可以使用`Jbuilder#attributes!`. 我是说

```
json.gang do |json|
  json.name @gang.name
  json.gang_members @gang.people.map { |person| person.to_builder.attributes! }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-06T18:40:33.553

用于`Jbuilder#merge!`合并来自人员构建器的属性。

```
json.gang do
  json.name @gang.name
  json.gang_members(@gang.people) do |person| 
    json.merge! person.to_builder.attributes!
  end
end 
```

# ember.js - 如何分析 ember 的页面渲染性能？

> ID：15673161
> 
> 赞同：2
> 
> 时间：2013-03-28T02:22:25.930
> 
> 标签：ember.js

我有一个页面的渲染速度肯定比其他页面慢。它没有进行任何远程调用。足够慢以至于用户提到与其他页面呈现的速度相比，它感觉“缓慢”。有哪些策略可用于分析此渲染以便我可以对其进行优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:43:49.540

通常我做的第一件事是记录绑定。绑定更新的触发频率通常比您预期的要高，并且确实会减慢速度。

```
Ember.LOG_BINDINGS = true 
```

除此之外，您可能还想使用 Ember Instrumentation 模块。[这里](http://tobyho.com/2013/03/12/perf-testing-ember.js-views/)有一篇关于这种技术的很棒的博客文章，但基本思想是：

```
Ember.subscribe('render', {
  before: function(name, start, payload){
    return start
  },
  after: function(name, end, payload, start){
    var duration = Math.round(end - start)
    var template = payload.template
    if (template){ // this is to filter out anonymous templates
      console.log('rendered', template, 'took', duration, 'ms')
    }
  }
}) 
```

# javascript - 如何使用循环使每个页面都有滑动方法？

> ID：15673162
> 
> 赞同：1
> 
> 时间：2013-03-28T02:22:29.030
> 
> 标签：javascript, jquery, jquery-mobile

我是这里的新手。我试图让每个页面都有一个 jQuery 移动网站的滑动方法，如下所示：

```
$("#page1").swipeleft(function () {
    $.mobile.changePage("#page2", {
        transition: "slide"
    });
});
$("#page2").swipeleft(function () {
    $.mobile.changePage("#page3", {
        transition: "slide"
    });
}); 
```

当我尝试制作这样的循环时，它不起作用。

```
var i = 1;
if(i <= 3;) {
    $("#page" + i).swipeleft(function () {
        $.mobile.changePage("#page" + (i + 1), {
            transition: "slide"
        });
    });
}; 
```

我的代码缺少什么？

更新：尝试了这段代码，但似乎不起作用

```
for (var i = 1; i<=3; i++) {
    $("#page"+i).swipeleft(function () {
        $.mobile.changePage("#page"+(i+1), {
            transition: "slide"
        });
    });
} 
```

这是我的代码：http: [//jsfiddle.net/lansinz/FHnp6/1/](http://jsfiddle.net/lansinz/FHnp6/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:34:36.200

您的代码中实际上似乎没有循环。尝试以下

```
//Create a loop for pages 1 to 3
for (var i = 1; i <= 3; i++) {
    //When page is 'swiped' call the nextPage() function
    $('#page' + i).on('swipeleft', nextPage);
}

function nextPage(event) {
    //Get the ID attribute of the element swiped
    var id = $(event.target).attr('id');
    //Get the number at the end of the elements ID (to work out the page number)
    var pageNo = parseInt(id.substr(4), 10);
    //Call the changePage function, increasing the page number by one
    $.mobile.changePage($('#page' + (pageNo + 1)), {
        transition: 'slide'
    });
} 
```

[jsFiddle 链接](http://jsfiddle.net/Dracs/eZgUg/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T06:17:40.247

试试这个简单的方法... $(document).on("swipeleft", '#'+event.target.id, function () { var nextpage = $(this).next('div[data-role=" page"]'); if (nextpage.length > 0) { alert(nextpage.attr('id')); $.mobile.changePage(nextpage, "slide", false, true); } });

```
 $(document).on("swiperight", '#'+event.target.id, function () {
                    var prevpage = $(this).prev('div[data-role="page"]');
                    if (prevpage.length > 0) {
                        $.mobile.changePage(prevpage, { transition: "slide", reverse: true }, true, true);
                    }
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T05:51:52.747

或者用冗长的代码来做这件事的老派方式:)

```
$(document).on('pageshow', '#page1', function(){
    $( "#page1" ).on( 'swipeleft', function(){
        $.mobile.changePage('#page2');
    });
});

$(document).on('pageshow', '#page2', function(){
    $( "#page2" ).on( 'swipeleft', function(){
        $.mobile.changePage('#page3');
    });

    $( "#page2" ).on( 'swiperight', function(){
        $.mobile.changePage('#page1');
    });
});

$(document).on('pageshow', '#page3', function(){
    $( "#page3" ).on( 'swiperight', function(){
        $.mobile.changePage('#page2');
    });
}); 
```

# ruby-on-rails - 在登录错误时设计重定向：ActiveRecord::RecordNotFound in DocumentsController#show

> ID：15673163
> 
> 赞同：0
> 
> 时间：2013-03-28T02:22:35.137
> 
> 标签：ruby-on-rails, ruby, devise

我正在尝试在登录和注册后重定向到特定页面。我有两个模型用户和资源。登录后，我想显示属于用户的文档列表。如果没有文档，那么它应该重定向到 users/:id/document#create 否则 users/:id/document#index。

有什么建议我该怎么做？

我的控制器中定义的重定向路径出现以下错误。

> ActiveRecord::RecordNotFound in DocumentsController#show
> 
> 找不到没有 ID 的文档

**Application_controller.rb**

```
def after_sign_in_path_for(user)
 user_documents_url(user)
end 
```

**路由.rb**

```
 root :to => 'home#index'

   devise_for :users

   resources :users do
        resources :documents
   end
  devise_for :users do get '/users/sign_out' => 'devise/sessions#destroy' end 
```

**路线**

```
root        /                                        home#index
        new_user_session GET    /login(.:format)                         devise/sessions#new
            user_session POST   /login(.:format)                         devise/sessions#create
    destroy_user_session DELETE /logout(.:format)                        devise/sessions#destroy
           user_password POST   /password(.:format)                      devise/passwords#create
       new_user_password GET    /password/new(.:format)                  devise/passwords#new
      edit_user_password GET    /password/edit(.:format)                 devise/passwords#edit
                         PUT    /password(.:format)                      devise/passwords#update
cancel_user_registration GET    /cancel(.:format)                        devise/registrations#cancel
       user_registration POST   /                                        devise/registrations#create
   new_user_registration GET    /sign_up(.:format)                       devise/registrations#new
  edit_user_registration GET    /edit(.:format)                          devise/registrations#edit
                         PUT    /                                        devise/registrations#update
                         DELETE /                                        devise/registrations#destroy
       user_confirmation POST   /confirmation(.:format)                  devise/confirmations#create
   new_user_confirmation GET    /confirmation/new(.:format)              devise/confirmations#new
                         GET    /confirmation(.:format)                  devise/confirmations#show
          user_documents POST   /users/:user_id/documents(.:format)      documents#create
      new_user_documents GET    /users/:user_id/documents/new(.:format)  documents#new
     edit_user_documents GET    /users/:user_id/documents/edit(.:format) documents#edit
                         GET    /users/:user_id/documents(.:format)      documents#show
                         PUT    /users/:user_id/documents(.:format)      documents#update

        /user/:user_id/documents(.:format)       user/documents#index 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:04:36.087

正如我所见，代码本身没有问题。但是您需要在此测试之前通过 FactoryGirl 或存根构建一些“文档”数据。

因为你真的没有任何用户的“文档”数据，当然 Rails 会给你 RecordNotFound 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:20:00.903

根据以下代码使用此方法

```
 def after_sign_in_path_for(resource_or_scope)
     // redirect path
  end 
```

我希望这个能帮上忙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:17:31.420

我通过关注这个[问题](https://stackoverflow.com/questions/14090894/confused-about-nested-resources-and-authentication-in-rails)解决了我的问题。以下是我的 routes.rb

```
 resources :users do
        resources :documents, only: [:index]
   end
   resource :documents, except: [:index] 
```

这给了我 document#index 路径以及 document#new 路径。

# opengl - 如何快速读取OpenGL颜色缓冲区和深度缓冲区？

> ID：15673165
> 
> 赞同：0
> 
> 时间：2013-03-28T02:22:56.293
> 
> 标签：opengl, framebuffer, glreadpixels

我必须每帧读取颜色缓冲区和深度缓冲区。我知道这个`glReadPixels`功能很慢，所以我想知道是否有更快的阅读方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:18:32.020

如果`glReadPixels`不够快，您有几个选择：

1) 无论您需要做什么后处理，都可以通过[glsl](http://www.opengl.org/documentation/glsl/)、[OpenCL](http://www.khronos.org/opencl/)、[CUDA](http://www.nvidia.com/object/cuda_home_new.html)或其他一些[GPGPU](http://gpgpu.org)解决方案在 GPU 上进行

2)在另一个线程上开始处理下一帧时，在一个线程上执行[异步 PBO 读回](http://www.songho.ca/opengl/gl_pbo.html)

3) 优化其他东西，以便缓慢的回读不会影响其他地方的性能

# triggers - 多个脚本（项目）是否有助于触发聚合执行时间？

> ID：15673169
> 
> 赞同：0
> 
> 时间：2013-03-28T02:23:08.187
> 
> 标签：triggers, google-apps-script, quotas

我在文件中有一些函数的 ScriptA，这些函数的触发器都在 UserA 下运行，每天消耗大约 2 小时的运行时间。

我有另一个项目 ScriptB，在其他文件中有一些其他函数，这些函数的触发器都在 UserA（与 ScriptB 用户相同的用户）下运行，每天消耗大约 3 小时的运行时间。

我的 Trigger Aggregate Execution Time 配额（来自[此处](https://script.google.com/dashboard)的配额页面）是按用户还是按脚本汇总的？也就是说，是不是：

1.  UserA 需要 5 小时 (2 + 3) 还是
2.  ScriptA 两个小时，ScriptB 三个小时？

我已经看到[了这个答案](https://stackoverflow.com/questions/11020111/meaning-of-trigger-aggregate-execution-time-in-apps-script-dashboard-quota-limit)，但它没有明确解决我要问的范围界定问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:39:33.823

显然是每个用户而不是 ler 脚本。否则配额就没有意义了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:07:27.327

为了为此收集一些证据：

在[2013 年 3 月的 Google Apps Unscripted 节目中的 4 点 25 分](http://www.youtube.com/watch?v=SKZmfgNesKs&t=265)，Kalyan Reddy 说配额是“每个帐户类型”，正如您在仪表板中看到的那样，配额表是网格化的，并且列也标有这些帐户类型。

我还做了一些测试并制作了一个使用相当多时间的脚本。它开始使在同一帐户下运行的其他脚本最大化，并且该帐户的许多触发脚本开始出现错误“服务使用了一天过多的计算机时间”。但是......有趣的是，几天后这些错误已经消退。我相信在消费者帐户上，我现在每天的执行时间超过 1 小时。

虽然不是对问题的直接回答，并且仍然是逻辑/假设的飞跃，但这两件事让我觉得“每个帐户”比“每个脚本”更可能是正确的。对于任何评论（尤其是 Google 员工），我会将这个问题留待更长时间。

# html - canvas api中的重绘功能

> ID：15673176
> 
> 赞同：2
> 
> 时间：2013-03-28T02:23:33.370
> 
> 标签：html, canvas, qml, qtquick2

我正在尝试使用canvas API（与html5中使用的相同）在qml中制作一个计时器。我需要每隔一秒左右重绘一次屏幕。是否有任何功能可以使用新输入的参数更新屏幕？例如，我使用 arc 函数指定要绘制的时钟弧的角度：

```
ctx.arc(150, 150, 95, 0,1.57,false); 
```

在这种情况下，角度将每隔一秒左右改变一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T15:34:56.683

你不能`setTimeout()`在 QML 中使用，它只能在浏览器的 JS 中使用，在 Qml 中你必须认为是声明性的：

导入 QtQuick 2.0

```
Canvas {
    id: canvas;
    width: 360;
    height: 360;
    contextType: "2d";
    renderStrategy: Canvas.Threaded;
    renderTarget: Canvas.Image;
    antialiasing: true;
    smooth: true;

    onPaint: {
        if (context) {
            context.clearRect (0, 0, width, height);
            context.beginPath ();
            context.moveTo (width / 2, height / 2);
            context.arc (width / 2,
                         height / 2,
                         50,
                         0,
                         angle * Math.PI / 180,
                         false);
            context.closePath ();
            context.fillStyle = "red";
            context.fill ();
        }
    }

    property real angle : 0;

    Timer {
        interval: 1000;
        repeat: true;
        running: true;
        onTriggered: {
            // update your angle property as you want
            canvas.angle = (canvas.angle < 360 ? canvas.angle +6 : 0);
            // repaint
            canvas.requestPaint ();
        }
    }

} 
```

我冒昧地为 Canvas 设置了最佳设置，以使您获得最佳渲染效果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:25:26.340

你可以使用 setTimeOut 吗？

```
setTimeout(update, 1000);

function update() {
    ctx.clearRect(0, 0, width, height);
    ctx.arc(150, 150, 95, 0,1.57,false);
} 
```

如果需要传入变量，则需要使用匿名函数，本文对此进行了说明：[如何将参数传递给 setTimeout() 回调？](https://stackoverflow.com/q/1190642/577306)或查看下面的代码示例。

```
setTimeout(function() {
    update(topicId);
}, 1000) 
```

# c++ - 传递大型物体的最快方法

> ID：15673179
> 
> 赞同：3
> 
> 时间：2013-03-28T02:23:57.110
> 
> 标签：c++, performance, pointers, optimization, reference

以下面的函数为例

```
string print()
{
   return (some string that has been formed);
}; 
```

现在让我们说这个打印函数将形成一个非常大的字符串，需要返回到从另一个类调用它的函数。

现在说这个打印函数可能会被调用数千次。有没有正确和更快的方法来做到这一点？

在 Visual Studio 中，您可以执行此操作

```
void print(string& lines)
{
   lines = (some string that has been formed);
}; 
```

但是 g++ 不会编译它，也不应该这样做，因为这可能是一个临时对象，随时可能消失。所以据我了解，我可以做到这一点

```
void print(const string& lines)
{
}; 
```

如果我只想在不修改它的情况下检索该字符串中的某些内容并快速完成。但我确实想修改它。所以这个我做不到。

这导致我的问题是声明一个指向对象的新指针将是最快的方法？还是更慢？还是只是不值得。即（不确定这是否可行？）

```
void print(string* lines)
{
   string formedString; // the string that has been formed
   lines = formedString&;
}; 
```

最后，如果我在运行时加载对象，并通过以下方式将它们添加到树中：

```
void add(const ItemType& item)
{
   someNode->item = item;
}; 
```

`item`最初是在调用 this 的函数范围内临时存储的对象，`add()`那么将它分配给节点会导致调用函数的堆栈停留更长时间吗？或者这样可以吗？我以后也可以编辑`item`，还是现在卡在 const 上？

只是学习思维的问题:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T02:31:21.573

只需返回字符串并完成它。

编译器将使用返回值优化（或命名的返回值优化）来消除返回字符串时的额外副本。一个真正新的编译器还将有一个移动构造函数和移动赋值运算符 for `std::string`，这将为完成同样的事情提供更大的保证。

编辑（对不起，我最初错过了最后一个问题）：在该函数返回后，分配一个值*不会保留该函数的任何本地内容。*当一个函数返回时，它的所有局部变量*都将*被销毁。如果您将该函数的*值*分配给在它返回后持续存在的东西，那没问题——它将被复制（或可能移动）到目的地。如果您保留对该本地的指针或引用，则在函数返回后它将悬空，因此尝试使用引用或取消引用该指针将导致 UB。

根据情况，后者*可能*是您想要使用 a 的情况，因此函数和外部代码都将共享对数据的访问权限，并且只有在对数据的*两个*引用`shared_ptr`都被销毁时，数据才会被销毁。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T02:31:29.897

在 C++11 或具有基本 C++11 特性的编译器中，答案是：

想要速度？通过值传递，对象支持移动语义。

你的`string`类型（无论是 a`std::string`还是你有什么）应该支持快速移动语义。

如果从函数返回局部变量，在 C++11 下，它将被隐式移动到返回值中。如果您的函数主体从调用者站点可见，并且您有一个变量是函数的返回值，则 NRVO 可能会发生，导致不会发生复制或移动（而是实际构造的对象最终位于呼叫站点）。

每当您最终想要复制传入的参数时，同样在参数中使用按值传递。这可以允许调用者在一些上下文中执行传递移动，并且调用者可以`std::move`在非自动上下文中显式地提供非常好的性能。

如果您不制作副本，请通过`const string&`，它可以绑定到临时文件。

如果您正在修改数据，请通过`string&` *或*通过`string`，然后将新字符串作为返回值的一部分返回。通过快速移动构造，在最坏的情况下，第二个几乎与第一个一样快，并且在某些情况下可能更快（理论上，在第二种情况下，NRVO 的多重链接是可能的！）*

# opengl - 优化渲染是否需要从前到后绘制？

> ID：15673187
> 
> 赞同：13
> 
> 时间：2013-03-28T02:24:53.943
> 
> 标签：opengl, graphics, opengl-es, 3d, opengl-es-2.0

我看到偶尔的文章建议在将顶点发送到 OpenGL（对于任何 OpenGL 变体）时，将顶点从距相机最近到最远的顺序排列。这样做的原因是如果一个顶点位于另一个已经渲染的顶点之后，OpenGL 将不会完全处理/渲染一个顶点。

由于按深度对顶点进行排序是任何项目的成本高昂的组成部分，因为这种排序通常会经常变化，所以这种设计有多普遍或必要？

我之前认为 OpenGL 会“查看”所有提交的顶点，并在渲染整个批次*之前对它们进行自己的深度缓冲，而不管它们的顺序如何。*但如果事实上一个顶点在另一个之前被渲染到屏幕上，那么我可以看到排序如何提高性能。

优化渲染是否需要从前到后绘制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T03:34:55.097

一旦一个图元被光栅化，它的 z 值可以用来执行“early z kill”，这会跳过运行片段着色器。这是从前到后渲染的主要原因。提示：当您有透明（alpha 纹理）多边形时，您必须从后到前渲染。

OpenGL 规范定义了一个状态机，并没有指定渲染实际发生的顺序，只是结果应该是正确的（在一定的公差范围内）。

*为清楚起见进行编辑：我在上面要说的是，只要基元**似乎**已按顺序处理，硬件就可以做任何想做的事情*

但是，大多数 GPU 都是流处理器，并且它们的 OpenGL 驱动程序不会“批量处理”几何图形，除非可能出于性能原因（最小 DMA 大小等）。如果您先输入多边形 A，然后再输入多边形 B，那么它们会一个接一个地输入管道，并且彼此独立（大部分）处理。如果 A 和 B 之间有足够多的多边形，那么 A 很有可能在 B 之前完成，如果 B 在 A 后面，它的片段将通过“early z kill”被丢弃。

*为清楚起见进行编辑：我在上面要说的是，由于 hw 不会“批量”几何图形，因此它不能自动进行从前到后的排序。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T06:53:12.327

您在这里混淆了一些概念。无需重新排序顶点 (*)。但是您应该从前到后绘制不透明的对象。这在 GPU 上启用了所谓的“早期 z 拒绝”。如果 GPU 知道 z 测试不会对像素进行着色，则它不必运行着色器、进行纹理提取等。但这适用于绘图调用中的对象，而不适用于单个对象。

一个简单的例子：你有一个玩家角色和一个天空背景。如果您先绘制玩家，GPU 将永远不必为玩家所在的像素进行纹理查找。如果你反过来做，你首先画出所有的天空，然后把它遮住。

透明几何当然需要拉回前面。

( * )=顶点可以重新排序以获得更好的性能。但是提前做 z 更重要，并且每个对象都做。

# angularjs - 当第三方组件修改文本框值时，如何更新范围/ng-model？

> ID：15673189
> 
> 赞同：1
> 
> 时间：2013-03-28T02:25:31.497
> 
> 标签：angularjs, color-picker, angularjs-scope

我想使用颜色选择器制作一个编辑器。

这是一个简化的示例。 [http://jsfiddle.net/xcUev/8/](http://jsfiddle.net/xcUev/8/)

我将颜色视为角度范围对象的属性。我使用颜色选择器使它可以选择

```
 http://www.html5.jp/library/cpick.html 
```

但是选择颜色后，它不会影响范围。

你有什么想法让它工作，比如如何影响有意地影响这个输入状态的范围。

请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:47:00.837

我尝试绑定（）一个`change`事件，但它从未触发（可能是因为颜色选择器停止了事件的传播）。所以我接下来尝试绑定（）一个`focus`事件，这似乎有效（我注意到文本框失去了焦点，然后在画布隐藏时再次将其恢复）。

HTML：

```
<input type="text" ng-model="data.color" class="html5jp-cpick" cpick> 
```

指示：

```
app.directive('cpick', function() {
    return {
        require: 'ngModel',
        link: function(scope, element, attrs, ngModelCtrl) {
            element.bind('focus', function() {
                ngModelCtrl.$setViewValue(element.val());
                scope.$apply();
            });
        }
    }
}) 
```

[小提琴](http://jsfiddle.net/mrajcok/AQX4H/)

# jquery - 使用 jquery 遍历 DOM 的问题

> ID：15673193
> 
> 赞同：1
> 
> 时间：2013-03-28T02:26:03.557
> 
> 标签：jquery

从下面的脚本返回的数据是一个本地完整的网页，但我不断收到`context: undefined` 我错过了什么吗？我只是想选择身体。

```
$.get(URL, function(html) {
    var body = $("body", html);
}, "html"); 
```

为了详细说明，我想要我刚刚请求的原始 HTML 的 body 元素：

```
[prevObject: st.fn.st.init[67], context: undefined, selector: "body", jquery: "1.9.0",     constructor: function…]
context: undefined
length: 0
prevObject: st.fn.st.init[67]
selector: "body"
__proto__: Object[0] 
```

# rest - Coldfusion REST - 序列化 CFC 数组

> ID：15673199
> 
> 赞同：3
> 
> 时间：2013-03-28T02:27:38.633
> 
> 标签：rest, serialization, coldfusion, cfc, coldfusion-10

您好我正在尝试从我的一个 REST 端点序列化一组 CFC。我在 Adob​​e 帮助中找到了这个[示例：CFC 序列化数组](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-5719eac51353e6bb244-7fe7.html) ，这几乎正是我想要做的（如果需要，我可以发布一些代码）但是当我尝试使用`returnType="myCFC[]"`它时失败了：

> "Message":"数组元素类型不匹配"

奇怪的是，如果我实例化同一个对象并从 .cfm 文件调用该方法，cfdump 会按预期显示包含数据的对象数组。但是从我的 AJAX 调用中，对象的属性值都是空的。但是，如果我使用 return`serializeJSON(myArrayOfCFCs)`属性有数据。但我不想这样做，因为它会否定内容协商的使用。

只是好奇是否有人让这个工作。

更新：

```
 <cffunction name="getPatient" access="remote" httpmethod="GET" returntype="Patient[]" produces="text/json" restpath="/{PatientId}">
    <cfargument name="PatientId" type="numeric" required="true" restargsource="Path" />

    <cfset local.response = ArrayNew(1) />
    <cfset local.patient = getPatientGatewayObject().getPatient(PatientId)>

    <cfset local.patientObject = createObject("component", "Patient").init(argumentCollection=queryRowToStruct(local.patient)) />
    <cfset arrayAppend(local.response, local.patientObject) />

    <cfreturn local.response />

 </cffunction> 
```

这有效，但最终不是我想要的：

```
 <cffunction name="getPatient" access="remote" httpmethod="GET" returntype="Patient" produces="text/json" restpath="/{PatientId}">
    <cfargument name="PatientId" type="numeric" required="true" restargsource="Path" />

    <cfset local.response = ArrayNew(1) />
    <cfset local.patient = getPatientGatewayObject().getPatient(PatientId)>

    <cfset local.patientObject = createObject("component", "Patient").init(argumentCollection=queryRowToStruct(local.patient)) />
    <cfset arrayAppend(local.response, local.patientObject) />

    <cfreturn serializeJSON(local.response) />

 </cffunction> 
```

# android - 在Android中将数组转换为xml

> ID：15673202
> 
> 赞同：-1
> 
> 时间：2013-03-28T02:28:05.043
> 
> 标签：android, xml, arrays

我正在寻找在 Android 中将数组转换为 XML 文件的解决方案。如果您有示例代码或只有说明，您能提供给我吗？我会非常感激。预先感谢。托马斯·勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:53:15.343

此示例代码可能会帮助您：

```
 protected string ConvertToXML(Object[] args, string rootName, string elemName)
    {
        string xmlStr = "<" + rootName + ">";

        foreach (Object arg in args)
        {
            xmlStr += "<" + elemName + ">" + arg.ToString() +
                      "</" + elemName + ">";
        }

        xmlStr += "</" + rootName + ">";

        return xmlStr;
    } 
```

以下是调用函数的方法：

```
Object[] test = { "One", "Two", 3, "Four", 5, "six" };
Response.Write(ConvertToXML(test, "params", "param")); 
```

这应该是输出：

```
<params>
    <param>One</param>
    <param>Two</param>
    <param>3</param>
    <param>Four</param>
    <param>5</param>
    <param>Six</param>
</params> 
```

更新：将其保存到 sd 卡下面的代码可能会有所帮助：

```
String filename = "filename.txt";
File file = new File(Environment.getExternalStorageDirectory(), filename);
FileOutputStream fos;
byte[] data = new String("data to write to file").getBytes();
try {
    fos = new FileOutputStream(file);
    fos.write(data);
    fos.flush();
    fos.close();
} catch (FileNotFoundException e) {
    // handle exception
} catch (IOException e) {
    // handle exception
} 
```

并且您必须将此行添加到清单文件中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# ruby-on-rails - 如何通过中介模型进行计数？

> ID：15673204
> 
> 赞同：0
> 
> 时间：2013-03-28T02:28:10.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图找出给定帐户有多少响应。

以下是我的联想...

```
Account has_many :questions
Question belongs_to :account
Question has_many :responses
Responses belongs_to :question 
```

我敢肯定有很多方法可以处理这个问题，所以就数据库调用而言，无论是最不费力的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:45:09.123

我很确定有更好的方法可以使用原始 sql 实现您想要的，但是使用 ActiveRecord，您应该能够使用以下代码实现您想要的

```
account = Account.first
Response.joins(question: :account).where(accounts: { id: account.id }).count 
```

这将返回第一个帐户的响应数。

# ruby - ruby sinatra 远程连接

> ID：15673206
> 
> 赞同：5
> 
> 时间：2013-03-28T02:28:39.757
> 
> 标签：ruby, apache, sinatra

我正在尝试让 hello world 在 sinatra 中远程工作：

```
require 'sinatra'

get '/' do
  "hello world"
end 
```

在本地它工作正常：

```
curl localhost:4567
hello world 
```

但是当我尝试远程访问它时，出现 404 错误。服务器可见；我有其他 Web 应用程序运行良好（但不是在非标准端口上）。这是一个近乎库存的 ubuntu 安装，因此没有任何 iptables 规则会阻止对端口 4567 的访问。我缺少什么吗？我很难用谷歌搜索这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T06:23:31.047

我认为这不是防火墙问题。添加绑定`set :bind, '0.0.0.0'`如下

```
#app.rb
require 'sinatra'
set :bind, '0.0.0.0'
get "/" do
    "Working"
end 
```

运行这个

```
ruby app.rb 
```

# jquery - 使用代码点火器上传 Jquery 多个文件

> ID：15673212
> 
> 赞同：0
> 
> 时间：2013-03-28T02:29:11.047
> 
> 标签：jquery, codeigniter

在这个[**链接**](http://vortexdev.netii.net/article_18/Integrate_Uploadify_multiple_file_upload__with_CodeIgniter)中有一个js文件**“vortexdev.js”**，在这个JS文件中有一个uploadify函数

```
 ''script'    : base_url + 'index.php?/controller/uploadifyuploader',' 
```

我不知道这个函数是否被调用。当我选择要上传的多个文件时，我只能看到`swf`图像，但没有上传任何内容。

`debug`至少我该怎么做？

**更新**

```
$(document).ready(function() {

  var base_url = $('#hiddenBaseUrl').val();
  var uploadfolder = $('#uploadfolder').val();  
  $('#file_upload').uploadify({
    'uploader'  : base_url + 'flash/uploadify/uploadify.swf',
    'script'    : base_url + 'index.php/uploadify/uploadifyUploader/',
    'cancelImg' : base_url + 'css/uploadify/cancel.png',
    'folder'    : uploadfolder,
    'fileExt'     : '*.jpg;*.gif;*.png;*.zip;*.rar;*.flv;*.mp4;*.mp3',
    'auto'      : false,
    'multi'     : true,

     'onComplete'  : function(event, ID, fileObj, response, data) {

         // here i'm gonna resize the images and display it in the main page 

    }
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:46:56.567

这是 yii 页面，但可以帮助您解决这个问题

[点击上传详情](http://www.yiiframework.com/extension/uploadify/)

# macos - 在 OS X 上 Grep 获取硬盘 ID？

> ID：15673215
> 
> 赞同：0
> 
> 时间：2013-03-28T02:29:26.793
> 
> 标签：macos, bash, command-line, terminal, grep

OS X 10.8.2

我想知道`/dev/disks*`挂载点是什么`/`

所以我跑`$ df -lak /`

我得到：

`Filesystem 1024-blocks Used Available Capacity iused ifree %iused Mounted on /dev/disk0s2 487546976 332107020 155183956 69% 83090753 38795989 68% /`

那么我要在命令中添加什么来获取`/dev/disk0s2`作品呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:06:04.000

`df / | tail -n +2 | awk '{ print $1 }'`如果您只是在寻找快速而肮脏的东西，那就可以了。

# parsing - 为什么有些编译器更喜欢手工制作的解析器而不是解析器生成器？

> ID：15673216
> 
> 赞同：29
> 
> 时间：2013-03-28T02:29:29.973
> 
> 标签：parsing, compiler-construction, vala

根据 Vala 文档：“在 0.3.1 之前，Vala 的解析器是经典的 flex 扫描器和 Bison LALR 解析器的组合。但从[提交 eba85a 开始](https://git.gnome.org/browse/vala/commit/?id=eba85a)，解析器是手工制作的递归下降解析器。” 我的问题是：为什么？

这个问题可以针对任何不使用解析器生成器的编译器。从解析器生成器到手工解析器的这种转变的利弊是什么？为编译器使用解析器生成器（Bison、ANTLR）有什么缺点？

作为旁注：我特别对 Vala 感兴趣，因为我喜欢让语言具有现代特性和简洁语法但可编译成“本机”和“非托管”高级语言（在 Vala 的情况下为 C）的想法。到目前为止，我只找到了 Vala。我正在考虑通过使 Vala（或类似语言）可编译为 C++（由 Qt 库支持）来获得乐趣。但由于我不想发明全新的语言，我正在考虑采用一些现有的语法。显然，手工制作的解析器没有我可能重用的书面形式语法。欢迎您对这个想法发表评论（整个想法很愚蠢吗？）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-03T06:31:49.733

在我的职业生涯中，我编写了六种手工制作的解析器（在大多数情况下是递归下降解析器，也称为自顶向下解析器），并且已经看到解析器生成器生成的解析器，我必须承认我对解析器生成器有偏见。

以下是每种方法的一些优点和缺点。

**解析器生成器**

优点：

*   快速获得一个可以工作的解析器（至少如果你不知道如何手动编码）。

缺点：

*   生成的代码很难理解和调试。
*   难以实施正确的错误处理。生成器将为语法正确的代码创建正确的解析器，但会阻塞不正确的代码，并且在大多数情况下将无法提供正确的错误消息。
*   解析器生成器中的错误可能会停止您的项目。您需要修复其他人代码中的错误（如果源代码可用），等待作者修复它或解决错误（如果可能的话）。

**手工制作的递归下降解析器**

优点：

*   生成的代码很容易理解。递归解析器通常有一个对应于每种语言结构的函数，例如解析“while”语句的parseWhile，解析声明的parseDeclaration 等等。理解和调试解析器很容易。
*   很容易提供有意义的错误消息，从错误中恢复并以在特定情况下最有意义的方式继续解析。

缺点：

*   手动编写解析器代码需要一些时间，特别是如果您没有使用这些东西的经验。

*   解析器可能有点慢。这适用于所有递归解析器，而不仅仅是手写的。具有对应于每种语言构造的一个函数来解析简单的数字文字，解析器可以进行十几个或更多嵌套调用，例如从 parseExpression 到 parseAddition、parseMultiplication 等。 parseLiteral。函数调用在像 C 这样的语言中相对便宜，但仍然需要很长时间。

加速递归解析器的一种解决方案是用通常更快的自下而上子解析器替换递归解析器的一部分。这种子解析器的自然候选者是具有几个优先级的几乎统一语法的表达式（即二元和一元表达式）。表达式的自下而上解析器通常也很容易编写代码，它通常只是一个循环，从词法分析器获取输入标记、一堆值和运算符标记的运算符优先级查找表。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-28T03:38:21.117

LR(1) 和 LALR(1) 解析器非常非常烦人，原因有两个：

1.  解析器生成器不太擅长生成有用的错误消息。
2.  某些类型的歧义，例如 C 风格的 if-else 块，让编写语法变得非常痛苦。

另一方面，LL(1) 语法在这两方面都做得更好。LL(1) 文法的结构使得它们很容易编码为递归下降解析器，因此处理解析器生成器并不是真正的胜利。

此外，对于 Vala，解析器和编译器本身以库的形式呈现，因此您可以使用 Vala 编译器库为 Vala 编译器构建自定义后端，并免费获得所有解析和类型检查等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T01:27:28.747

我知道这不会是确定的，如果你的问题不是特别与 Vala 相关，我不会打扰，但因为它们是......

那时我并没有过多地参与这个项目，所以我对一些细节不是很清楚，但我记得 Vala 切换时的一个重要原因是[dogfooding](http://en.wikipedia.org/wiki/Eating_your_own_dog_food)。我不确定这是主要动机，但我确实记得这是一个因素。

可维护性也是一个问题。该补丁用 Vala 中的一个较小的解析器替换了一个用 C/Bison/YACC 编写的更大的解析器（相对而言很少有人对后两者有丰富的经验）（几乎任何对 valac 感兴趣的人都可能知道并且很熟悉）。

更好的错误报告也是一个目标，IIRC。

我不知道这是否是一个因素，但手写解析器是递归下降解析器。我知道 ANTLR 会生成这些，ANTLR 是用 Java 编写的，这是一个非常重的依赖项（是的，我知道它不是运行时依赖项，但仍然如此）。

> 作为旁注：我特别对 Vala 感兴趣，因为我喜欢让语言具有现代特性和简洁语法但可编译成“本机”和“非托管”高级语言（在 Vala 的情况下为 C）的想法。到目前为止，我只找到了 Vala。我正在考虑通过使 Vala（或类似语言）可编译为 C++（由 Qt 库支持）来获得乐趣。但由于我不想发明全新的语言，我正在考虑采用一些现有的语法。显然，手工制作的解析器没有我可能重用的书面形式语法。欢迎您对这个想法发表评论（整个想法很愚蠢吗？）。

很多 Vala 确实反映了 GObject 做出的决定，在 C++/Qt 中事情可能会或可能不会以相同的方式工作。如果您的目标是用 Qt/C++ 替换 valac 中的 GObject/C，那么您的工作可能比您预期的要多。但是，如果您只想让 Vala 可以访问 C++ 和 Qt 库，那当然是可能的。事实上，Luca Bruno 大约一年前就开始研究这个了（参见[wip/cpp](https://git.gnome.org/browse/vala/log/?h=wip/cpp)分支）。由于时间不足，而不是技术问题，它已经有一段时间没有看到活动了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T02:59:36.473

> 根据 Vala 文档：“在 0.3.1 之前，Vala 的解析器是经典的 flex 扫描器和 Bison LALR 解析器的组合。但从 Commit eba85a 开始，解析器是手工制作的递归下降解析器。” 我的问题是：为什么？
> 
> 在这里，我专门询问 Vala，尽管这个问题可以针对任何不使用解析器生成器的编译器。从解析器生成器到手工解析器的这种转变的利弊是什么？为编译器使用解析器生成器（Bison、ANTLR）有什么缺点？

也许程序员发现了解析器生成器没有发现的一些优化途径，而这些优化途径需要完全不同的解析算法。或者，也许解析器生成器在 C89 中生成代码，而程序员决定为 C99 或 C11 重构会提高易读性。

> 作为旁注：我特别对 Vala 感兴趣，因为我喜欢让语言具有现代特性和简洁语法但可编译成“本机”和“非托管”高级语言（在 Vala 的情况下为 C）的想法。

只是一个简短的说明： C 不是*native*。它源于*可移植性*，因为它旨在抽象出那些在移植时导致程序员如此痛苦的硬件/操作系统特定细节。例如，想想为每个操作系统和/或文件系统使用完全不同的*fopen的痛苦；*我的意思不仅是*功能上的不同*，还*包括输入和输出期望的不同，例如。不同的参数，不同的返回值*。同样，C11 引入了可移植线程；使用线程的代码将能够使用相同的符合 C11 的代码来针对所有实现线程的操作系统。

> 到目前为止，我已经找到了 Vala。我正在考虑通过使 Vala（或类似语言）可编译为 C++（由 Qt 库支持）来获得乐趣。但由于我不想发明全新的语言，我正在考虑采用一些现有的语法。显然，手工制作的解析器没有我可能重用的书面形式语法。欢迎您对这个想法发表评论（整个想法很愚蠢吗？）。

使用手工制作的解析器轻松生成 C++ 代码可能是可行的，所以我不会这么快就放弃这个选项；旧的 flex/bison 解析器生成器可能更有用，也可能不更有用。但是，这不是您唯一的选择。无论如何，我很想广泛研究[规范](http://www.vala-project.org/doc/vala/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T00:04:11.373

奇怪的是，这些作者从野牛变成了 RD。大多数人会朝相反的方向走。

我能看到做 Vala 作者所做的唯一真正原因是更好的错误恢复，或者他们的语法可能不是很干净。

我想你会发现大多数新语言都是从手写解析器开始的，因为作者对他们自己的新语言有一种感觉，并确切地知道他们想要做什么。在某些情况下，作者学习如何编写编译器。C 是一个典型的例子，C++ 也是。在进化的后期，可能会替换生成的解析器。另一方面，现有标准语言的编译器可以通过解析器生成器更快地开发，甚至可能通过现有语法：上市时间是这些项目的关键业务参数。

# python - Mongoengine 更新嵌入文档

> ID：15673222
> 
> 赞同：3
> 
> 时间：2013-03-28T02:30:13.267
> 
> 标签：python, mongoengine

我有以下代码，我正在尝试更新列表字段中的嵌入文档。

```
store = store_service.get_store_from_product_id(product_id)
got_product, idx = get_product_from_store(store, product_id)

product = Product()
product.pid = got_product.pid
product.display_name = display_name
product.description = description
product.rank = rank
product.price = price
product.categories = categories
product.properties = properties

store.catalog.products[idx] = product

print store.catalog.products[idx].__unicode__()

store.save() 
```

当我打印出我的产品时，它具有正确的值，但是当我保存它时，它并没有持续存在。没有抛出错误。有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T10:57:05.820

`store.catalog.products[idx] = product`可以申请`DictField()`。对于`ListField()`. 你可以试试：

```
store.catalog.products = [product] 
```

或者

```
store.catalog.products.append(product) 
```

你需要在对象上调用 save ：

```
store.save() 
```

`atomic updates`在其他情况下可能会有所帮助：

```
Store.objects(id='123400000').update_one(push__catalog__products=product) 
```

# javascript - 替换jquery html对象中的类

> ID：15673223
> 
> 赞同：0
> 
> 时间：2013-03-28T02:30:17.223
> 
> 标签：javascript, jquery, html

我一直在尝试使用 jquery 将函数应用于每个 html 标记，其中包含 html 对象中的某个类（从文件导入），但我无法让它工作。我查看了有关 SE 的其他几个问题，但找不到解决问题的方法。

html 变量在我的实际用例中包含更多代码，但这

```
html = '<pre class = "classy"> text </pre>'
$(html).find('.classy').each( function (x) { 
    $('<pre class = "classy">' + '<h1>' + x + '<h1>' + '</pre>')
})

'<pre class = "classy"> text </pre>' 
```

预期的输出更像

```
'<pre class = "classy"> <h1> text </h1> </pre>' 
```

.replaceWith 也不起作用，所以我认为我在做一些概念上的错误。任何解决方案/提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:33:52.077

尝试

```
var html = '<pre class = "classy"> text </pre>';
var a = $(html);
a.filter('.classy').each( function (i, x) { 
    $(x).wrapInner('<h1></h1>');
}) 
```

这里的变量`a`将具有预期的内容`<pre class = "classy"> <h1> text </h1> </pre>`。

演示：[小提琴](http://jsfiddle.net/arunpjohny/r6Fyz/)

在给定的值下，它甚至可以简化为

```
var a = $(html);
a.each( function (i, x) { 
    $(x).wrapInner('<h1></h1>');
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/r6Fyz/1/)

**注意：**如果您希望内容`a`为 html 字符串

```
var html = $('<div>').append(a.clone()).html(); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/r6Fyz/2/)

# size - Highcharts 气泡图 - 如何获取点的大小

> ID：15673225
> 
> 赞同：1
> 
> 时间：2013-03-28T02:30:19.767
> 
> 标签：size, highcharts, bubble-chart

我想格式化气泡图的工具提示，但我需要知道是什么属性让我知道气泡的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:52:02.467

如果您使用的是格式化程序功能，您将执行以下操作：

```
tooltip :
  formatter: function() {
      return "My bubble size is : " + this.point.z;
  }
} 
```

this.point 在气泡图工具提示格式化程序中还具有以下属性：series、x 和 y

有关更多信息，请参阅：[http ://api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T07:09:02.057

您可以通过访问函数`this.point.shapeArgs.r`来获取半径。`formatter`就像@scott-gearhart 的解决方案一样

# java - 在 for 循环中自动关闭 JOptionPane

> ID：15673227
> 
> 赞同：0
> 
> 时间：2013-03-28T02:30:28.650
> 
> 标签：java

我有点迷茫，我问过我的教授同样的问题，我真的不明白如何实施答案。我的代码（如下）基本上创建了 7 个 ImageIcon，然后我实现了一个 for 循环，它随机调用图片。这很好用，我的问题是如何让每个 ImageIcon 保持 250 毫秒，然后在没有用户输入的情况下关闭它，然后转到下一个图像直到 for 循环完成？

```
package test;
import javax.swing.*;

public class TEST {

    public static void main(String[] args) {
        //create a timer

        //try to assign variables to pictures in an array
        ImageIcon icon = new ImageIcon("/home/james/programmingpics/A_Guitar");
        JOptionPane.showMessageDialog(null, "A Note", "A Note with Guitar", 
        JOptionPane.OK_OPTION, icon);        

        ImageIcon icon1 = new ImageIcon("/home/james/programmingpics/B_Guitar");
        JOptionPane.showMessageDialog(null, "B Note", "B Note with Guitar", 
        JOptionPane.OK_OPTION, icon1);

        ImageIcon icon2 = new ImageIcon("/home/james/programmingpics/C_Guitar");
        JOptionPane.showMessageDialog(null, "C Note", "C  Note with Guitar", 
        JOptionPane.OK_OPTION, icon2);

        ImageIcon icon3 = new ImageIcon("/home/james/programmingpics/D_Guitar");
        JOptionPane.showMessageDialog(null, "D Note", "D Note with Guitar", 
        JOptionPane.OK_OPTION, icon3);

        ImageIcon icon4 = new ImageIcon("/home/james/programmingpics/E_Guitar");
        JOptionPane.showMessageDialog(null, "E Note", "E Note with Guitar", 
        JOptionPane.OK_OPTION, icon4);

        ImageIcon icon5 = new ImageIcon("/home/james/programmingpics/F_Guitar");
        JOptionPane.showMessageDialog(null, "F Note", "F Note with Guitar", 
        JOptionPane.OK_OPTION, icon5);        

        ImageIcon icon6 = new ImageIcon("/home/james/programmingpics/G_Guitar");
        JOptionPane.showMessageDialog(null, "F Note", "F Note with Guitar", 
        JOptionPane.OK_OPTION, icon6);

        ImageIcon[] iconarray = {icon, icon1, icon2, icon3, icon4, icon5, icon6};

        for (int i = 0; i < 1000; i++) {
            int random = 1 * (int) ((Math.random() * 100) % 7);
            System.out.println(iconarray[random]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-21T22:39:46.930

您可以使用 Java.awt.robot 中的“机器人”类和计时器来模拟“用户输入”并在一段时间后关闭 JOptionPane。

# sql - SQL查询查找每月纪念日的用户

> ID：15673228
> 
> 赞同：5
> 
> 时间：2013-03-28T02:30:29.940
> 
> 标签：sql, sql-server, tsql

我正在尝试编写一个查询来查找与我的公司一起庆祝每月周年纪念的用户，以便我们可以向他们发送电子邮件（即，如果今天的日期是 3/27，它将找到在 1/27 注册的人, 2/27, 3/27, 4/27 等，不分年份）。

我的方法是查找其注册日期的“日”部分等于今天日期的“日”部分的用户。

```
SELECT [User Id],[Sign Up Date] 
  FROM [Monthly Account Update] 
 WHERE DATEPART(DAY,[Sign Up Date]) = DAY(GETDATE()) 
```

但是，这当然不适用于以下场景：

1.  在 2 月底，我没有机会在每月 29、30 和 31 天的周年纪念日向人们发送电子邮件，因为这种情况不会发生。理想情况下，当它是 2 月 28 日时，我只想将有 29、30 和 31 个日期的人混为一谈。

2.  对于日期以 30 日结束的每隔一个月，我不会给有 31 日日期的人发送电子邮件。理想情况下，我只想将约会日期为 30 和 31 的人混为一谈。

这些事情中的任何一个都可以通过 SQL 查询来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:35:07.157

你需要一个更复杂的`where`子句。这是一种蛮力方法：

```
SELECT [User Id],[Sign Up Date]
FROM [Monthly Account Update]
WHERE day([Sign Up Date]) = DAY(GETDATE()) or
      (month(getdate()) in (4, 6, 9, 11) and day(getdate()) = 30 and DAY([Sign Up Date]) = 31) or
      (month(getdate()) in (2) and day(getdate()) = 28 and DAY([Sign Up Date]) in (29, 30, 31)) 
```

如果是 2 月，请寻找 28 日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:53:32.363

这里有一些复杂的答案！我们可以大大简化：

```
create function dbo.fnIsMonthlyAnniversary(
    @startDate date,
    @comparisonDate date
)
returns bit
as
begin
    declare @retVal bit
    set @retVal = 0

    declare @deltaMonth int

    set @deltaMonth = datediff( mm, @startDate, @comparisonDate )

    if dateadd( mm, @deltaMonth, @startDate ) = @comparisonDate
    begin
        set @retVal = 1
    end

    return @retVal
end

-- usage:
select dbo.fnIsMonthlyAnniversary( '2012-12-31', CONVERT( date, getdate() ) ) 
```

供您使用：

```
SELECT [User Id],[Sign Up Date] 
  FROM [Monthly Account Update] 
 WHERE 1 = dbo.fnIsMonthlyAnniversary( [Sign Up Date], CONVERT( date, getdate() ) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:20:08.373

减去一个月并包括从最多 4 天的范围内的每一天，其中添加的月份不超过当前日期。

```
DECLARE @Today DATE = '2/28/2013';
SELECT [Current] = @Today, [MonthAgo] = DATEADD(DAY,t.v,DATEADD(MONTH,-1,@Today))
FROM (VALUES(0),(1),(2),(3)) as t(v)
WHERE DATEADD(MONTH,1,DATEADD(DAY,t.v,DATEADD(MONTH,-1,@Today))) <= @Today; 
```

2013 年 2 月 28 日的结果：

```
Current    MonthAgo
---------- ----------
2013-02-28 2013-01-28
2013-02-28 2013-01-29
2013-02-28 2013-01-30
2013-02-28 2013-01-31 
```

2013 年 3 月 27 日的结果：

```
Current    MonthAgo
---------- ----------
2013-03-27 2013-02-27 
```

2013 年 4 月 30 日的结果：

```
Current    MonthAgo
---------- ----------
2013-04-30 2013-03-30
2013-04-30 2013-03-31 
```

...ETC。

**编辑：**

我的上述答案可以通过将其包装到 CTE 中，然后以直接的方式加入您的原始查询来应用。请注意，对于整个查询，内联函数调用始终限制为四行，因此日期函数的性能影响应该可以忽略不计：

```
DECLARE @Today DATE = GETDATE();

; WITH CTE AS (
    SELECT [Current] = @Today, [MonthAgo] = DATEADD(DAY,t.v,DATEADD(MONTH,-1,@Today))
    FROM (VALUES(0),(1),(2),(3)) as t(v)
    WHERE DATEADD(MONTH,1,DATEADD(DAY,t.v,DATEADD(MONTH,-1,@Today))) <= @Today
)
SELECT [User Id],[Sign Up Date] 
FROM [Monthly Account Update]
JOIN CTE ON CTE.[MonthAgo] = [Sign Up Date];
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:00:34.157

尝试这样的事情：

创建一个包含从 1 到 1000 的整数填充的单列 [months] 的永久表 M，并使用如下查询：

```
SELECT [User Id],[Sign Up Date]
FROM [Monthly Account Update] AS U
JOIN M
ON CAST(getdate() AS DATE) = DATEADD(month,M.months,U.[Sign Up Date] 
```

虽然效率不高，但对于少数员工来说，一天跑一次也没问题。如果需要，您还可以将 M.months 添加到 SELECT 列表中并获取精确的周年月数。

# php - 使用 Javascript 在新窗口中将 HTML 输入值传递给表单操作

> ID：15673230
> 
> 赞同：0
> 
> 时间：2013-03-28T02:30:52.677
> 
> 标签：php, javascript, html

这是我的 javascript 和 php 代码。

**js**

```
function validate()
{
      myform.submit();
} 
```

**php**

```
<form action="http://myurl/" method="post" name="myform" target="_blank">
       <input type="id" name="txtid" value="3">
       <input type="button" value="Submit" onClick="validate()">
</form> 
```

如何将**txtid**的值传递给表单操作，以便我的新窗口 URL`http://myurl/3.`知道如何欺骗这个？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:35:04.537

试试这个

```
function validate()
{
      //grabs the value of txtid
      txtid = $('#txtid').val();
      //uses var to redirect to the correct URL

      window.open(http://myurl/"+txtid);

} 
```

# php - 将数组转换为关联数组

> ID：15673232
> 
> 赞同：3
> 
> 时间：2013-03-28T02:30:56.477
> 
> 标签：php, arrays, associative-array

我有一个这样的数组：

```
Array
(
    [0] => name
    [1] => john
    [2] => last
    [3] => doe
    [4] => company
    [5] => sony
) 
```

我需要转换为：

```
Array
(
    [name] => john
    [last] => doe
    [company] => sony
) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T02:33:52.353

```
for ($i = 0; $i < count($myArray); $i += 2)
    $newArray[ $myArray[$i] ] = $myArray[$i+1]; 
```

# java - 与线程同步

> ID：15673233
> 
> 赞同：2
> 
> 时间：2013-03-28T02:31:08.153
> 
> 标签：java, synchronization, synchronized, synchronized-block

我有一个两部分的问题...

1.  我有一个类，其中有一个函数，在给定时间只能由任何一个线程访问。使它成为一个`synchronized`函数或一个`synchronized`块仍然允许多个线程，因为不同的线程在类中访问它。如何确保只有一个线程访问此代码？（见下面的代码示例）

2.  使用同步函数，对该函数的调用会排队。有没有办法只允许最后一次调用函数来访问代码？因此，如果我当前有 Thread1 访问我的函数，则 Thread2 和 Thread3 尝试访问它（按此顺序），一旦 Thread1 完成，将只授予 Thread3 访问权限。

    ```
    public void doATask() {
        // I create a new thread so the interface is not blocked
        new Thread(new Runnable() {

            @Override
            public void run() {
                doBackgroundTask();
            }
        }).start();
    }

    private void doBackgroundTask(MyObject obj) {
        // perform long task here that is only being run by one thread
        // and also only accepts the last queued thread
    } 
    ```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:49:21.020

如果您的示例中的第二个线程可以`return`，您可以使用锁和跟踪执行该方法的最后一个线程的组合。它可能看起来像这样：

```
private volatile Thread lastThread;
private final ReentrantLock lock = new ReentrantLock();

private void doBackgroundTask(Object obj) throws InterruptedException {
    Thread currentThread = Thread.currentThread();
    lastThread = currentThread;
    try {
        // wait until lock available
        lock.lockInterruptibly();
        // if a thread has arrived in the meantime, exit and release the lock
        if (lastThread != currentThread) return; 
        // otherwise
        // perform long task here that is only being run by one thread
        // and also only accepts the last queued thread
    } finally {
        lock.unlock();
    }
} 
```

* * *

带有额外日志记录的完整工作测试，显示线程交错并且 T2 退出而不做任何事情：

```
class Test {

    private volatile Thread lastThread;
    private final ReentrantLock lock = new ReentrantLock();

    public static void main(String[] args) throws Exception {
        final Test instance  = new Test();
        Runnable r = new Runnable() {

            @Override
            public void run() {
                try {
                    instance.doBackgroundTask(null);
                } catch (InterruptedException ignore) {}
            }
        };
        Thread t1 = new Thread(r, "T1");
        Thread t2 = new Thread(r, "T2");
        Thread t3 = new Thread(r, "T3");
        t1.start();
        Thread.sleep(100);
        t2.start();
        Thread.sleep(100);
        t3.start();
    }

    private void doBackgroundTask(Object obj) throws InterruptedException {
        Thread currentThread = Thread.currentThread();
        System.out.println("[" + currentThread.getName() + "] entering");
        lastThread = currentThread;
        try {
            // wait until lock available
            lock.lockInterruptibly();
            // if a thread has arrived in the meantime, exit and release the lock
            if (lastThread != currentThread) return;
            // otherwise
            // perform long task here that is only being run by one thread
            // and also only accepts the last queued thread
            System.out.println("[" + currentThread.getName() + "] Thinking deeply");
            Thread.sleep(1000);
            System.out.println("[" + currentThread.getName() + "] I'm done");
        } finally {
            lock.unlock();
            System.out.println("[" + currentThread.getName() + "] exiting");
        }
    }
} 
```

输出：

```
[T1] entering
[T1] Thinking deeply
[T2] entering
[T3] entering
[T1] I'm done
[T1] exiting
[T2] exiting
[T3] Thinking deeply
[T3] I'm done
[T3] exiting 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T03:05:10.187

你想要的可能是一个等待信号做一些工作的工作线程。`doATask()`只需发送一个信号即可触发工作。累积信号相当于一个信号。

```
final Object lock = new Object();
MyObject param = null;

public void doATask(arg) 
    synchronized(lock)
        param=arg;
        lock.notify();

MyObject awaitTask()
    synchronized(lock)
        while(param==null)
            lock.wait();
        tmp=param;
        param=null;
        return tmp;

// worker thread

public void run()
    while(true)
        arg = awaitTask();
        doBackgroundTask(arg); 
```

# objective-c - UITableView cellForRowAtIndexPath 更新缓慢

> ID：15673237
> 
> 赞同：0
> 
> 时间：2013-03-28T02:31:23.027
> 
> 标签：objective-c, uitableview

在我的 iOS 应用程序中，我有一个`UITableView`带有原型的单元格。每个都`cell`显示一条文本消息，并有一个`label`用于显示与该消息相关的评论数量。目前，在 中`cellForRowAtIndexPath`，我正在向服务器查询`array`保存与消息关联的评论的 an，然后将其设置`label`为`array.count`. 但是，在滚动浏览 时`table`，这会导致评论计数瞬间不准确，因为`cellForRowAtIndexPath`每次`cell`屏幕上出现新消息时都必须查询服务器，因此有时`label`会暂时显示另一条消息（旧的原型单元格）的评论计数，而新的评论计数仍在加载中。这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:37:45.500

您必须在表格视图的后台发出服务器请求，通过导入`dispatch/dispatch.h`然后使用此代码来完成

```
//in the cellForRowAtIndexPath; method
dispatch_queue_t bg = dispatch_queue_create("com.you.test", NULL);
dispatch_async(bg, ^{
    //get stuff from server
}); 
```

# php - 用 PHP 处理 HTML 表单数组

> ID：15673242
> 
> 赞同：0
> 
> 时间：2013-03-28T02:31:51.317
> 
> 标签：php, html, arrays, forms

我很难弄清楚如何处理这个问题：
我正在尝试创建两个数组，在其中为一个班级输入 4 个测验，然后在我的 PHP 代码中循环遍历它们。

```
<tr>
<td>ENGL110</td>
<td><input type="text" name="EnglArray[]"></td>
<td><input type="text" name="EnglArray[]"></td>
<td><input type="text" name="EnglArray[]"></td>
<td><input type="text" name="EnglArray[]"></td>
</tr>

<tr>
<td>MATH242</td>
<td><input type="text" name="MathArray[]"></td>
<td><input type="text" name="MathArray[]"></td>
<td><input type="text" name="MathArray[]"></td>
<td><input type="text" name="MathArray[]"></td>
</tr> 
```

这就是我试图在我的 PHP 代码中检索它的方式

```
$EnglArray = $_POST["EnglArray"];

$MathArray = $_POST["MathArray"];

print_r($EnglArray); 
```

我不知道我做错了什么，但似乎我的数组总是空的，并且`print_r`没有输出任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:02:27.547

这应该有效。

```
<?php
  foreach ($_POST as $key=>$value){
   if (!is_array($value)){
     echo "$key = $value<br />";
   } else {
     echo "$key is an array:<br />";
     foreach ($value as $valKey=>$valVal){
      echo "$valKey = $valVal<br />";
     }

   }
  }
?> 
```

# php - 图像和拇指的 PHP 不同位置

> ID：15673245
> 
> 赞同：1
> 
> 时间：2013-03-28T02:32:13.697
> 
> 标签：php

我找到了一些最有效的解决方案，但没有一个可以 100% 解决问题 我正在寻找的代码将在一个目录中的所有专辑中查找并拉出图像并拉出我在另一个文件夹中的拇指并回显像这样的字符串。

```
echo '<a href="',$img,'" rel="shadowbox"><img src="',$img,'" /></a>'; 
```

问题是我的 href 图像在我的图像文件夹中，而我的 src（缩略图）在另一个目录中。我正在使用 shadowbox 并希望脚本回显一个允许同时扫描两个目录的搅拌。

以下是我正在使用的扫描目录但不会返回相应输入代码的内容 驻留在另一个目录中的缩略图

```
//path to directory to scan. i have included a wildcard for a subdirectory
$directory = "gallery_uploads/*/";

//get all image files with a .jpg extension.
$images = glob("" . $directory . "*.jpg");

$imgs = '';
// create array
foreach($images as $image){ $imgs[] = "$image"; }

//display images
foreach ($imgs as $img) {
     "<a href='$img' rel='shadowbox'><img src='$img' /> ";

     echo'<a href="',$img,'" rel="shadowbox"><img src="',$img,'" /></a>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:17:23.213

这对我有用。不过，您必须确保您的图像在每个目录中具有相同的名称。

让您的上传者保存原始图像非常简单，然后在缩略图目录中保存同名的已调整大小的图像。

```
$gallery_up_dir = "gallery_uploads";
$gallery_thumb_dir = "gallery_thumbs";
$directory = "$gallery_up_dir/*/";

// or get all image files with a .jpg, .JPG, .png, .PNG extension.
$extensions_array = array('jpg', 'JPG', 'png', 'PNG');

$imageArray = array();
foreach($extensionsArray as $ext){
    $images = glob("" . $directory . "*.$ext");

    // fill up the array
    foreach($images as $image){ 
        $imageArray[] = "$image"; 
    }
}

//display images
foreach ($imageArray as $img) {

     echo '<a href="',$img,'" rel="shadowbox"><img src="', 
           str_replace($gallery_up_dir,$gallery_thumb_dir,$img) ,'" /></a>';

} 
```

# javascript - selectedIndex 在 Firefox 中不起作用，来自一个数组元素

> ID：15673248
> 
> 赞同：0
> 
> 时间：2013-03-28T02:32:43.217
> 
> 标签：javascript, dom, selectedindex, getelementsbyname

为什么这段代码在 IE 中有效，而在 Firefox 中无效？

```
elems = document.forms[0].getElementsByTagName("select");
for (i = 0; i < elems.length; i++) {
   if (elems[i].studentid && elems[i].studentid == studid && elems[i].selectedIndex == 0)
      elems[i].selectedIndex = 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:25:21.857

查看相关的 HTML 片段将有很大帮助。

在代码中，它似乎`elems[i]`是一个 select 元素，并且`elems[i].studentid`试图读取一个名为*studentid*的属性。相关的 HTML 可能类似于：

```
<select studentid="..." ...> 
```

没有称为*studentid*的标准 HTML select 元素属性，因此即使该属性已添加到 select 元素中，它也不会在 Firefox（可能还有其他浏览器）中作为属性使用。因此测试失败：

```
elems[i].studentid 
```

Firefox 将返回的位置`undefined`，其计算结果为 false。但是，IE 确实将非标准属性添加为属性，因此如果已设置属性，则 IE 可能会通过测试。

要访问非标准属性，应该使用*getAttribute方法来实现跨浏览器兼容性，因此测试可能是：*

```
elems[i].hasAttribute('studentid') && elems[i].getAttribute('studentid') == studid ... 
```

测试中似乎没有任何价值`hasAttribute`，因此可能会放弃。由于`elems[i]`多次使用，我还将存储结果：

```
var elem = elems[i];
if (elem.getAttribute('studentid') == studid && elem.selectedIndex == 0) {
  elem.selectedIndex = 1;
} 
```

# php - 会话保护

> ID：15673252
> 
> 赞同：-1
> 
> 时间：2013-03-28T02:33:23.850
> 
> 标签：php, session, password-protection

我正在一点一点地创建一个网页，测试部分网页创意。我想学习如何会话保护页面。我已经对页面进行了密码保护，但是任何人都可以通过输入 url 来访问该页面。我想会话保护我的页面，所以没有人可以做到这一点。我有三个页面：index.html，它具有发送password.php的表单，password.php，它使用“if statments”确保密码和用户名是正确的（这里是“if statment”）

```
 if ($username == 'mgmb99'){
    if ($password == 'mgmb91mas'){
    header('Location: youhere.php');
    } else {
    echo 'your username or password is wrong.<a href="http://www.passwordtest.comze.com"> go back to login page </a>';
    }} else {
    echo 'your username or password is wrong.<a href="http://www.passwordtest.comze.com"> go back to login page </a>';
    }; 
```

，以及登录后的页面 youhere.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:46:11.753

```
$_SESSION['connect']=0; 
```

将会话中的连接值设置为 0。

目前这个检查：

```
 if((!$_SESSION['connect'])) 
```

将始终返回 true，因为如果`$_SESSION['connect']`未设置，则为`!$_SESSION['connect']`true。同样`if(!0)`是真实的。

尝试设置`$_SESSION['connect']`为 true 或 1 等，或者，将检查更改为：

```
if(!array_key_exists('connect',$_SESSION)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:47:06.930

`( ! $_SESSION['connect'] )`will 在 session 变量未设置但设置为 0 时为 true。因此，如果要保护 youhere.php，则需要分配另一个值并检查它。

也`session_destroy()`将删除所有会话变量，所以你登录，你去 youhere.php 但如果你刷新站点，你将立即被注销

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:51:30.263

PHP 网站上有大量关于 Sessions 的信息。 [http://www.php.net/manual/en/intro.session.php](http://www.php.net/manual/en/intro.session.php)

这是一个存储和终止会话变量的示例。 [http://www.php.net/manual/en/session.examples.basic.php](http://www.php.net/manual/en/session.examples.basic.php)

设置会话变量：

```
<?php
session_start();
if (!isset($_SESSION['count'])) {
  $_SESSION['count'] = 0;
} else {
  $_SESSION['count']++;
}
?> 
```

要杀死会话变量：

```
<?php
  session_start();
  unset($_SESSION['count']);
?> 
```

# php - PHP XML Parse（专门用于 Tomboy/Gnote 解析以在 Web UI 上显示/编辑/添加）

> ID：15673253
> 
> 赞同：1
> 
> 时间：2013-03-28T02:33:27.683
> 
> 标签：php, xml, xml-parsing

我目前正在研究一个新想法，以便通过 PHP 解析 tomboy/gnote 笔记并显示在网页上，以便添加/编辑/查看笔记。有了这样一个工具，就可以创建一个 OwnCloud 应用程序，从而允许一个完整的解决方案，在所有机器之间进行同步（具有离线访问）并包括一个 Web UI。在后期阶段，人们还可以开发 Android 应用程序。

我对 PHP 和 XML 有点陌生，因此寻求帮助。

**这是一个示例 XML 文件：**

```
<?xml version="1.0"?>
<note version="0.3" xmlns:link="http://beatniksoftware.com/tomboy/link" xmlns:size="http://beatniksoftware.com/tomboy/size" xmlns="http://beatniksoftware.com/tomboy">
<title>TEST Note</title><text xml:space="preserve">
<note-content version="0.1" xmlns:link="http://beatniksoftware.com/tomboy/link" xmlns:size="http://beatniksoftware.com/tomboy/size">TEST Note

Normal text
<size:huge>Huge text</size:huge>
<size:large>Large text</size:large>
<size:small>small text</size:small>
<bold>BOLD Text</bold>
<italic>Italic text</italic>
<strikethrough>Striked text</strikethrough>
<highlight>Highlight text</highlight>
<list><list-item dir="ltr">BulletA
<list><list-item dir="ltr">A1
</list-item><list-item dir="ltr">A2
<list><list-item dir="ltr">A2.1
<list><list-item dir="ltr">A2.1.1
<list><list-item dir="ltr">A2.1.1.1
<list><list-item dir="ltr">A2.1.1.1.1
</list-item></list></list-item></list></list-item><list-item dir="ltr">A2.1.2
</list-item></list></list-item><list-item dir="ltr">A2.2
</list-item></list></list-item><list-item dir="ltr">A3
</list-item></list></list-item><list-item dir="ltr">BulletB</list-item></list>

Normal text with space before

And again</note-content>
</text><last-change-date>2013-03-28T02:11:04.603700Z</last-change-date>
<last-metadata-change-date>2013-03-28T02:11:11.012211Z</last-metadata-change-date><create-date>2013-03-28T01:39:08.607520Z</create-date>
<cursor-position>124</cursor-position><selection-bound-position>124</selection-bound-position><width>496</width>
<height>458</height><x>0</x><y>0</y>
<tags><tag>system:notebook:test</tag></tags><open-on-startup>False</open-on-startup></note> 
```

**这是我目前拥有的代码：**

```
<?php

$file = "example.note";

$xmlFile = file_get_contents($file) or die('Cant open note'); 
$xml = simplexml_load_string($xmlFile);
print_r($xml); 

?> 
```

**这是输出：**

```
SimpleXMLElement Object ( [@attributes] => Array ( 
[version] => 0.3 ) 
[title] => TEST Note 
[text] => SimpleXMLElement Object ( 
[note-content] => TEST Note Normal text Normal text with space before And again ) 
[last-change-date] => 2013-03-28T02:11:04.603700Z 
[last-metadata-change-date] => 2013-03-28T02:11:11.012211Z 
[create-date] => 2013-03-28T01:39:08.607520Z 
[cursor-position] => 124 
[selection-bound-position] => 124 
[width] => 496 [height] => 458 
[x] => 0 [y] => 0 
[tags] => SimpleXMLElement Object ( [tag] => system:notebook:test ) [open-on-startup] => False ) 
```

如您所见，“注释内容”并未完全收集，因此我正在联系 PHP 大师。我怎样才能解析整个 XML 以便能够以普通 HTML 显示它？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:16:40.633

您确实需要遍历树并遍历`<note-content>`. `print_r`不是真正获得准确输出的手段，也不是它的功能。

对于这样的事情，我实际上强烈建议使用`XMLReader`. 它对于像这样格式松散的 xml 非常有效。

您最终需要做的是遍历每个元素，并（可能）将标签更改为`<bold>`html`<strong>`标签。Simplexml 将为此目的而失败。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-23T08:26:22.410

Tomboy 提供了一个 XSLT 文件，可以将 tomboy 笔记转换为 HTML - 您可以在不编写自定义代码的情况下使用它：

[https://git.gnome.org/browse/tomboy/tree/Tomboy/Addins/ExportToHtml/ExportToHtml.xsl](https://git.gnome.org/browse/tomboy/tree/Tomboy/Addins/ExportToHtml/ExportToHtml.xsl)

# jvm - JVM实现JRE

> ID：15673255
> 
> 赞同：5
> 
> 时间：2013-03-28T02:33:40.140
> 
> 标签：jvm, java

1.  JVM 是 JRE 的一个实现。那么每个具有 JVM 的设备都会包含 JRE 对吗？

2.  JDK 包含一组支持开发的类和库。JRE 是否包含相同的内容。如果是这样，为什么他们需要相同的代码，因为我们已经将代码转换为字节码？

如果我错了请纠正我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T02:37:13.137

你的数字 1 有点落后。Java 运行时环境 (JRE) 包含一个 Java 虚拟机 (JVM)，以及标准的 Java 库和其他允许 Java 字节码程序运行的东西。

JDK Java Development Kit 就像 JRE 的超集。它拥有 JRE 的所有东西，但添加了编译器和调试器之类的东西，使您不仅可以运行 Java 字节码，还可以从 Java 源文件创建它。

# google-fusion-tables - 将表格融合到静态 HTML？

> ID：15673256
> 
> 赞同：2
> 
> 时间：2013-03-28T02:33:43.440
> 
> 标签：google-fusion-tables

我有一个页面列出了组织的本地地址，既作为嵌入式 Fusion Tables 地图，又在通过 Google API 填充的表中：http: [//oto-usa.org/wordpress/locations/](http://oto-usa.org/wordpress/locations/)

这运行得非常好，除了 Google 搜索索引器不会“看到”任何一种形式的信息，因此例如“底特律”的站点搜索不会为试图找到我们底特律位置的人返回到此页面的链接。

从搜索引擎素材的功能表中获取静态 HTML 的最直接方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:39:20.243

我通过使用 Google Fusion Tables API for PHP 解决了这个问题，在服务器端生成数据并将其包含在页面文本中。

# sql - 数据压缩 SQL Server 2008 R2

> ID：15673262
> 
> 赞同：1
> 
> 时间：2013-03-28T02:34:20.533
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有`PAGE`压缩类型的表，它的大小是 7 GB。但是当我使用

```
sp_estimate_data_compression_savings 'dbo', 'tableName', null, null, 'PAGE' 
```

它返回`size_with_requested_compression_setting - 3GB`，降低当前表的大小。

我不明白为什么压缩表中的空间节省估计。

建表脚本：

```
 CREATE TABLE [dbo].[_AccumRgT2225](
    [_Period] [datetime] NOT NULL,
    [_Fld2217RRef] [binary](16) NOT NULL,
    [_Fld5936RRef] [binary](16) NOT NULL,
    [_Fld2218RRef] [binary](16) NOT NULL,
    [_Fld5937RRef] [binary](16) NOT NULL,
    [_Fld2219] [datetime] NOT NULL,
    [_Fld2220] [numeric](21, 2) NOT NULL
) ON [PRIMARY]

GO
CREATE UNIQUE CLUSTERED INDEX [_AccumR2225_ByDims_TRRRRT] ON [dbo].[_AccumRgT2225]
(
    [_Period] ASC,
    [_Fld2217RRef] ASC,
    [_Fld5936RRef] ASC,
    [_Fld2218RRef] ASC,
    [_Fld5937RRef] ASC,
    [_Fld2219] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO 
```

# javascript - jQuery .get() 循环所有href

> ID：15673265
> 
> 赞同：0
> 
> 时间：2013-03-28T02:34:43.100
> 
> 标签：javascript, jquery, for-loop, get

```
$(function() {
   $.get('/viewonline',function(data) {
      var members = $('a.username');
      var location = $('a.location');
      var elems = $(data);
for (var i=0; i<members.length;i++) {
   var uname = members[i].text();
   var aname = members[i].href;
 $('.userlist_online').html('<a href="'+ aname +'">'+ uname +'</a>');
}
for (var j=0;j<location.length;j++) {
   var locaname= location[j].text();
   var locaaname = location[j].href;
 $('.userlist_views').html('<a href="'+ locaaname +'">'+ locaname +'</a>');
  }
 },'html');
}); 
```

上面的代码我试图遍历所有`a hrefs`with 和`username`的类`location`。所以上面的代码没有抛出任何错误，但它没有将任何数据发布到 div 中。

任何人都可以帮助我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:56:23.300

这是我对可行的猜测：

```
$(function () {
    $.get('/viewonline', function (data) {

        data = $(data);
        var members = data.find('a.username');
        var location = data.find('a.location');

        for (var i = 0; i < members.length; i++) {
            var uname = $(members[i]).text();
            var aname = members[i].href;
            $('.userlist_online').append('<a href="' + aname + '">' + uname + '</a>');
        }
        for (var j = 0; j < location.length; j++) {
            var locaname = $(location[j]).text();
            var locaaname = location[j].href;
            $('.userlist_views').append('<a href="' + locaaname + '">' + locaname + '</a>');
        }
    }, 'html');
}); 
```

修复完成：

*   **获取`members`并`location`通过在返回的数据中查找元素，而不是在当前文档中。**
*   `$()`在调用之前包装元素`text()`
*   填写列表时使用`append`而不是`html`

# javascript - 将 Rails 中的所有 JS 代码编译成一个匿名函数

> ID：15673266
> 
> 赞同：4
> 
> 时间：2013-03-28T02:34:49.040
> 
> 标签：javascript, ruby-on-rails

我有一个具有以下 JavaScript 文件结构的 rails 应用程序：

```
- assests/javascripts
  - /application
    - module1.js
        .
        .
        .
    - moduleN.js
  - application.js 
```

每个文件如下所示：

```
var module1 = (function(){

    //Lots of code

    return {
        //Public stuff
    }

})(); 
```

模块需要相互访问，因此会暴露一些东西。

**应用程序.js**

```
//= require_tree ./application 
```

我想知道是否有办法将所有代码编译成匿名函数；就像是：

```
(function(){
//= require_tree ./application
})(); 
```

这显然行不通。我目前正在做的是：

**应用程序.js**

```
//= require ./begin.js
//= require_tree ./application
//= require ./end.js 
```

**begin.js**是 just`(function(){`而**end.js**是`})();`.

不是最整洁的解决方案。

这不仅消除了全局变量，而且允许编译器将它们的名称更改为更短的名称，以获得更轻量级的代码和更不可读。我关心代码机密性，不想公开模块名称，使逆向工程更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:45:06.823

使用全局命名空间。

**应用程序.js**

```
//= require_self
//= require_tree ./application

App = {}; 
```

`require_self`在这里很重要，因为默认情况下 Sprockets 将此文件的内容放在底部。

**应用程序/first_module.js**

```
App.FirstModule = (function () {
  //blah blah

  return {
    //public methods
  }
})(); 
```

您试图做的是滥用匿名功能，并且有点违背目的。如果您需要在两个模块之间共享私有变量，它们应该是一个模块。如果模块太大而无法维护，则需要将其分解为具有公共接口的单独模块。

# python - 艰难地学习 Python 中的 for 循环

> ID：15673268
> 
> 赞同：0
> 
> 时间：2013-03-28T02:34:59.067
> 
> 标签：python, loops, python-3.x

抱歉，如果您觉得这很愚蠢，但我对 LPTH 的练习 33 有疑问

[http://www.learnpythonthehardway.org/book/ex33.html](http://www.learnpythonthehardway.org/book/ex33.html)

Zed 要求我们：重写该练习以改用 for 循环和范围。你还需要中间的增量器吗？如果你不摆脱它会发生什么？

我这样做了：

```
numbers = []

def NumbersLoop(x):
    """
   This function will loop as long as x is less than the limit,
   at the same time it will print the numbers list
   """

    limit = int(input('Limit: '))
    increment = int(input('Increment: '))

    for i in (x, limit):
        print('At the top x is : {}'.format(x))
        numbers.append(x)

        x += increment
        print('Numbers now: ', numbers)
        print('At the bottom x is {}'.format(x))

NumbersLoop(1)

print('The numbers: ')

for num in numbers:
    print(num) 
```

但我不明白为什么它只循环到 3。还有可能摆脱中间的增量器吗？我看没有办法做到这一点...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:43:16.343

该代码有一些问题，首先：

```
for i in (x, limit): 
```

您错过了`range`调用，`x`实际上是起点，范围调用不会改变它。

下一个：

```
print('At the top x is : {}'.format(x))
numbers.append(x)

x += increment 
```

`x`不受`range`调用或循环的影响。您要使用的是`i`，这是范围当前所在的数字。

此外，该`range`函数采用以下参数：

```
range(start, stop, increment) 
```

您也不需要 to increment `x`，请尝试以下各种参数：

```
start = 0
stop = 10
inc = 2
for i in range(start, stop, inc):
    print(i) 
```

如果你在 python 中遇到任何问题，你应该做的第一件事就是去[Python 文档](http://docs.python.org/3.3/library/functions.html#func-range)，你几乎总能找到你想要的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:07:17.937

```
for i in (x, limit): 
```

这意味着“运行循环两次：一次使用`i = x`，一次使用`i = limit`”。

再次查看分配规范。它说：

> 重写该练习以使用 for 循环，`range`而不是。

`range`是一个函数。您目前没有在任何地方使用它。你应该在这里使用它。

`range`从概念上创建一系列数字。这意味着您可以循环`for i in`这些数字。有关详细信息，您应该阅读[该函数的文档](http://docs.python.org/2/library/functions.html#range)。

> 是否有可能摆脱中间的增量器？我看没有办法做到这一点...

先让`range`电话正常工作，然后再**试一试**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-22T17:26:31.313

这是一个很好的学习实验；它使学生​​在伸手可及的同时伸长答案。在额外的信用步骤 5 之后，这就是我结束的地方：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

# FUNCTIONS
def genNos(noMin, noMax, noIncrement):
    """Returns numbers 0 through i in an array"""
    numbers = []
    for myNum in range(noMin, noMax, noIncrement):
        # print "At the top noMin is %d" % noMin
        numbers.append(myNum)
        # print "Numbers now: ", numbers
        # print "At the bottom noMin is %d" % noMin
    return numbers

# MAIN PROGRAM
print "The numbers: "
myVal = genNos(7, 21, 2)
print "%r" % myVal

for num in myVal:
    print num 
```

额外学分：

将此 while 循环转换为您可以调用的函数：

1.  功能：genNos
2.  将测试中的 6 (i < 6) 替换为变量。
3.  注意：在函数之外初始化 i 不再起作用；移动“i = 0”以发挥作用。

现在使用此函数重写脚本以尝试不同的数字：

1.  用变量替换数字
2.  将范围传递给函数参数。
3.  注意：只要最小值小于最大值并且最大值大于/等于 noMin+(2*noIncrement)，这将起作用。

将另一个变量添加到您可以传入的函数参数中，它可以让您更改第 8 行的 + 1，以便您可以更改它的增量

1.  添加：（`noIncrement`增加计数的数字）到函数参数，将第三个值传递给函数。

再次重写脚本以使用此功能，看看有什么效果。

1.  我这样做是为了测试上面的所有内容；它工作到这一点。

现在，将其编写为使用 for 循环和范围。你需要中间的增量器吗？如果你不摆脱它会发生什么？

1.  好的，使用 for with range(); [range](https://docs.python.org/2/library/functions.html#range)函数将接受我们所有的参数 - 没问题。

注意：我从不使用 'i' 或 'x' 来表示循环中的变量，除非可能是单元测试；除非您使用唯一名称，否则您无法在 vim 中进行搜索/替换；EG: :%s/myNo/MyVal/g; 但这对于任何程序的搜索和替换都是如此。

此外，似乎 a`for-loop`对编译器的成本高于 a `while-loop`。在使学生达到的情况下，这是一个很好的实验。但是，我不会在实际程序中使用。while 循环万岁！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-26T11:03:50.793

```
# get the input from the user for i
i = int(input("i>"))
# create an empty list and fill it later
numbers = []
# get input from user for the variable to use in while
num = int(input("num>"))

# Get the user input for increment number in while loop
incrementer = int(input("incrementer>"))
# Create a function and use while loop

def yourfunction(i):
    while i < num:
        # if user input for "i" is less than the user input for "num"
        print(f"at the top of i is {i}")
        # once i is printed, Add i to the list
        numbers.append(i)
        #once i is added to the list, print the list
        print("numbers now", numbers)
        # Then increment i by 1
        i += incrementer
        #once incremented, print i and repeat
        print(f"At the bottom of i is {i}")
# Call the function
yourfunction(i)
# print the newly created listsa
print(f"the new list is {numbers}")

for num in numbers:
    print(num) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-18T13:20:02.100

我意识到这是一个老问题，但我想补充一点，因为我刚刚完成了这个问题。

OP 可能一直在想的（如果他使用范围的话）是这样的：

```
numbers = []

def NumbersLoop(x):
    limit = int(input('Limit: '))
    increment = int(input('Increment: '))

    for i in range(x, limit):
        numbers.append(i) #The i would be the newly incremented x on next iteration. != True

        x += increment 
```

**此代码无法正常工作。**

原因是，虽然您可能期望新增加`x+= increment`的值会在下一次迭代中更改范围的起点，从而使`i`增加的量向上跳跃，但它**不会**。

range 函数使用的`x`基本上从你第一次调用它时就已经确定了，所以即使你将值更改为

```
x = 50 
```

下一个数字`i`将是朝着基于原始 x 的极限范围迈出的下一步。

也许这会为下一个人节省一些时间。你用`range(start, end, increment)`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-02T16:33:01.307

我迟到了 6 年，但也在进行 LPTHW 练习。这就是我所说的，只需使用 for 循环和 range 而不是 while 循环：

```
numbers = []

for i in range(0,6):
    print "At the top i is %d" % i
    numbers.append(i)
    print "Numbers now: ", numbers
    print "At the bottom i is ", i + 1

print "The numbers: "

for num in numbers:
    print num 
```

# ruby-on-rails - 本地 gem 的“LoadError：无法加载此类文件”

> ID：15673269
> 
> 赞同：1
> 
> 时间：2013-03-28T02:34:59.803
> 
> 标签：ruby-on-rails, ruby

我在 Rails 应用程序中使用本地 gem（此处为 clearconnect），但在尝试要求它时收到以下错误：

```
LoadError: cannot load such file -- clearconnect 
```

无论我在哪里尝试需要 gem，都会发生这种情况。当问题最初发生时，“require”语句位于 lib 文件中，此后我尝试在“config/application.rb”中以及通过 rails 控制台要求它，但没有成功。要求通过控制台在我的应用程序的 Gemfile 中指定的其他 gem 是成功的，如果这有任何帮助的话。

**到目前为止我尝试过/检查过的事情：**

与我的 gem 对应的 .gem 文件已放在 vendor 目录中，以下行在我的 Gemfile 中：

```
gem 'clearconnect', '0.0.1', :path => 'vendor' 
```

更新 Gemfile 后运行 bundle install 会产生以下结果：

```
Using clearconnect (0.0.1) from source at vendor 
```

'bundle exec gem list' 列出了我的 gem，从 Rails 控制台运行 'Gem.loaded_specs' 也是如此。

我创建了一个新的 Rails 应用程序并以相同的方式包含我的 gem，并收到相同的错误。

在这一点上，我认为问题出在我在 Gemfile 中指定我的 gem 的方式上，或者是 gem 本身的问题（尽管它在本地没有问题）。可以在这里找到宝石：[chrahunt/clearconnect](https://github.com/chrahunt/clearconnect)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:48:43.780

您需要输入 gem 的完整路径，不仅仅是“vendor”，还有“vendor/gems/mygem-VERSION”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:16:27.473

线

`Using clearconnect (0.0.1) from source at vendor`

除了 Gemfile 中指定的路径的存在（通过更改路径以指向另一个位置并且没有收到错误来确认）之外，并没有确认太多。用于验证 gem 已安装的其他点似乎以类似的方式运行，导致真正的问题是 Bundler 不支持在 Gemfile [github issue [here](https://github.com/carlhuda/bundler/issues/2298) ] 中指定本地 .gem 文件。问题中提到的解决方法：

`Put the gem in vendor/cache and run (ironically) 'bundle install --no-cache'.`

工作得很好，我没有任何进一步的错误。我还能够成功地将应用程序部署到 Heroku，而无需任何其他配置。

**总之：**

将要包含在应用程序中的 .gem 文件放在`vendor/cache`目录中。像往常一样在应用程序的 Gemfile 中指定您的 gem（没有 :path），确保明确说明版本号。就我而言，这是：

`gem 'clearconnect', '0.0.1'`

运行（[在这里](https://github.com/carlhuda/bundler/issues/2298#issuecomment-13669810)`bundle install --no-cache`推理），问题应该得到解决。

# java - 使用 iText 在每个页面中进行数字签名

> ID：15673274
> 
> 赞同：0
> 
> 时间：2013-03-28T02:35:10.857
> 
> 标签：java, pdf, itext

我使用 iReport 生成了一个包含 3 页的报告。现在签名只出现在一页中。但我需要使用 iText 对每一页进行签名。

```
PdfReader reader = new PdfReader(fullFilePath);

String outputPath = reportPath + randomUUID + fileExtension;
FileOutputStream fout = new FileOutputStream(outputPath);
stp = PdfStamper.createSignature(reader, fout, '\0', null, true);
PdfSignatureAppearance sap = stp.getSignatureAppearance();
sap.setCrypto(key, chain, null,PdfSignatureAppearance.SELF_SIGNED);
sap.setReason("test");
sap.setLocation("test");

String imagePath = servletContextPath + "/resources/img/signature.png";
File file = new File(imagePath);
byte[] imageByte = new byte[(int) file.length()];

try (FileInputStream fileInputStream = new FileInputStream(file)) {
    fileInputStream.read(imageByte);
    Image image = Image.getInstance(imageByte);
    sap.setImage(image);
}

// comment next line to have an invisible signature
for (int page = 1; page <= reader.getNumberOfPages(); page++){
    sap.setVisibleSignature(signatureRectangle, page, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:00:25.847

```
sap.setVisibleSignature(signatureRectangle, page, null); 
```

*设置*视觉表示，它不会*添加*另一个。因此，您在循环中对该方法的所有调用，但最后一个都是徒劳的。

IText 签名创建代码原样只能为每个签名创建一个可视化表示，虽然根据规范可能有多个小部件可视化相同的签名，但 PDF 查看器可能会拒绝它作为具有多个可视化的签名的合法值是有问题的。

**编辑：**

Adobe，例如，在他们的[数字签名外观](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/acrobat_digital_signature_appearances_v9.pdf)v9 白皮书中写道：

> 文档中签名的位置可能会影响其法律意义。出于这个原因，签名字段永远不会引用多个注释。如果多个位置与签名相关联，则含义可能会变得模棱两可。

因此，他们将来可能会完全停止接受具有多个注释（即可视化）的签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-23T06:20:43.437

除了法律问题，如果您仍想使用 Itext api (version 5.5.*) 对所有页面进行签名，您应该在页面中包含签名外观`preClose(HashMap<PdfName, Integer> exclusionSizes)`的类方法中进行一些修改。`PdfSignatureAppearance`

在类内搜索`writer.addAnnotation(sigField, pagen);`行`PdfSignatureAppearance`并替换为

```
for (int p = 1; p <= writer.reader.getNumberOfPages(); p++) {
   writer.addAnnotation(sigField, p);
} 
```

它将签名的引用添加到所有页面。

# java - 扩展类，如果我按照这种方式，它们会继承参数吗？

> ID：15673279
> 
> 赞同：0
> 
> 时间：2013-03-28T02:36:02.130
> 
> 标签：java, inheritance, extends

如果我像这样创建一个基础对象：

```
public abstract class RIBaseObject{
    static ObjectRegistry sSystemRegistry = new ObjectRegistry();

    public RIBaseObject() {
    }

    public abstract void reset();

} 
```

并在我制作的每个（大多数）类中扩展这个基础对象，考虑到 ObjectRegistry 包含如下参数：

```
public class ObjectRegistry extends RIBaseObject {

    public BufferLibrary bufferLibrary;
    public CameraSystem cameraSystem;

    public ObjectRegistry() {
        super();
    }

} 
```

将在引导类中以这种方式声明 bufferLibrary：

```
RIBaseObject.sSystemRegistry.bufferLibrary = new BufferLibrary(); 
```

让它从任何扩展 BaseObject 的类中访问同一个 bufferLibrary 对象？还是会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:49:52.613

所有子类都将访问基类中的相同静态变量。静态变量每个类加载一次，它们不依赖于实例化。

所以你所有的子类都将共享相同的静态变量，即你的库在你的基类中定义为静态。

静态变量不是继承的，但可以被称为变量隐藏的子类中类似定义的变量隐藏。

所以是的，您将从所有子类访问相同的 bufferLibrary。

# php - 对具有相同键的子数组的元素求和

> ID：15673280
> 
> 赞同：0
> 
> 时间：2013-03-28T02:36:02.377
> 
> 标签：php, arrays, multidimensional-array

```
<?php 
$A = array(
        'A'=>array('a'=>array(
                                'v1'=>1
                                'v2'=>2
                                'v3'=>3

                                ),
                  'b'=>array(
                                'v1'=>1
                                'v2'=>2 
                                'v3'=>3                                
                                )
                   ),
        'B'=>array('a'=>array(
                                'v1'=>1
                                'v2'=>2
                                'v3'=>3

                                ),
                     'b'=>array(
                                'v1'=>1
                                'v2'=>2
                                'v3'=>3                                
                                )
                   ),
        ...
        );

=>$total= array('a'=>array(
                                'v1'=>2
                                'v2'=>4
                                'v3'=>6

                                ),
             'b'=>array(
                                'v1'=>2
                                'v2'=>4 
                                'v3'=>6  
?> 
```

它有效，但不是通用方式。

```
$total_av1 = $A['A']['a']['v1'] + $A['B']['a']['v1'];
$total_av2 = $A['A']['a']['v2'] + $A['B']['a']['v2'];
$total_av3 = $A['A']['a']['v3'] + $A['B']['a']['v3'];

$total_bv1 = $A['A']['b']['v1'] + $A['B']['b']['v1'];
$total_bv2 = $A['A']['b']['v2'] + $A['B']['b']['v2'];
$total_bv3 = $A['A']['b']['v3'] + $A['B']['b']['v3'];

$total = array(
                "a"=>array($total_av1,$total_av2,$total_av3),
               "b"=>array($total_bv1,$total_bv2,$total_bv3)               
               );
echo '<pre>';
print_r($A);               
print_r($total);
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:21:15.050

如果您想花哨（或真的*讨厌* `foreach`）：

源数组：

```
$A = array(
        'Z'=>array('d'=>array(
                                'v1'=>10,
                                'v2'=>20,
                                'v3'=>30

                                )
                   ),
        'A'=>array('a'=>array(
                                'v1'=>1,
                                'v2'=>2,
                                'v3'=>3

                                ),
                  'b'=>array(
                                'v1'=>1,
                                'v2'=>2,
                                'v3'=>3                                
                                )
                   ),
        'B'=>array('a'=>array(
                                'v1'=>1,
                                'v2'=>2,
                                'v3'=>3

                                ),
                     'b'=>array(
                                'v1'=>1,
                                'v2'=>2,
                                'v3'=>3                                
                                )
                   ),
        'C'=>array('a'=>array(
                                'v1'=>9,
                                'v2'=>8,
                                'v3'=>7

                                ),
                     'b'=>array(
                                'v1'=>6,
                                'v2'=>5,
                                'v3'=>4                                
                                )
                   )
        ); 
```

程序：

```
$total=array_reduce($A,function(&$r,$v){
    array_walk($v,function($val,$key)use(&$r){
        if(!isset($r[$key])) $r[$key]=array();
        array_walk($val,function($vv,$vk)use(&$r,$key){
            if(!isset($r[$key][$vk])) $r[$key][$vk]=0;
            $r[$key][$vk]+=$vv;
        });
    });
    return $r;
},array());
print_r($total); 
```

输出：

```
Array
(
    [d] => Array
        (
            [v1] => 10
            [v2] => 20
            [v3] => 30
        )

    [a] => Array
        (
            [v1] => 11
            [v2] => 12
            [v3] => 13
        )

    [b] => Array
        (
            [v1] => 8
            [v2] => 9
            [v3] => 10
        )

) 
```

请注意，我特意添加了一个不规则`$A['Z']`来演示该过程。

需要 PHP >=5.3。[**现场演示**](http://3v4l.org/SmdTY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:56:26.690

这几乎是一样的。

```
$a['v1'] = $A['A']['a']['v1'] + $A['B']['a']['v1'];
$a['v2'] = $A['A']['a']['v2'] + $A['B']['a']['v2'];
$a['v3'] = $A['A']['a']['v3'] + $A['B']['a']['v3'];

$b['v1'] = $A['A']['b']['v1'] + $A['B']['b']['v1'];
$b['v2'] = $A['A']['b']['v2'] + $A['B']['b']['v2'];
$b['v3'] = $A['A']['b']['v3'] + $A['B']['b']['v3'];

$total= array('a'=> $a, 'b'=> $b);

echo "Not so generic <pre>";
print_r($total);
echo "</pre>"; 
```

为了使其通用，您需要嵌套一些正确使用键的循环。

```
for ($i = 1; $i < count($A['A']['a']) + 1; $i++) {
    $total2['a']['v'.$i] = $A['A']['a']['v'.$i] + $A['B']['a']['v'.$i];
    $total2['b']['v'.$i] = $A['A']['b']['v'.$i] + $A['B']['b']['v'.$i];
}
echo "Sort of generic <pre>";
print_r($total2);
echo "</pre>"; 
```

# html - 嵌套表问题

> ID：15673281
> 
> 赞同：0
> 
> 时间：2013-03-28T02:36:06.780
> 
> 标签：html

我有以下嵌套表：

```
 <table style="width: 100%; word-wrap: break-word; table-layout: fixed;">
    <tbody>
        <tr>
            <td class="removeifempty">
                <table style="border-spacing: 0px; border-collapse: collapse; font-family: calibri;
                    font-size: 10pt">
                    <tbody>                            
                        <tr>
                            <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word; padding-top: 0px">Result date: </td>
                            <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word; padding-top: 0px">March 27, 2013 7:18 PM</td>
                        </tr>                            
                        <tr>
                            <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word; padding-top: 0px">Result title:</td>
                            <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word; padding-top: 0px">Testing</td>
                        </tr>
                        <tr>
                            <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word; padding-top: 0px">Performed by:</td>
                            <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word; padding-top: 0px">Smith, Jonh on March 27, 2013 7:20 PM</td>
                        </tr>                           
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

关于上述方法可能有什么问题的任何想法？

在此先感谢，阿迪科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:39:38.710

在 w3c 验证中验证它

[http://validator.w3.org/](http://validator.w3.org/)

我认为这就足够了

# iphone - 我如何等待网页每次在 uiwebview 中完成加载？

> ID：15673282
> 
> 赞同：0
> 
> 时间：2013-03-28T02:36:12.447
> 
> 标签：iphone, uiwebview, webview

我有许多在 uiwebview 中使用正则表达式自动选择的链接。我正在 viewdidfinishload 方法中执行这些步骤。如何在每次选择下一个链接之前等待当前视图完成加载？我需要使用单独的 webview 对象还是可以用相同的方法完成所有这些操作。将自动选择几个单独的链接。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:18:19.810

下面正如 Purva 所说，使用 web view delegate 进行加载请求或错误处理等。您可以在启动加载请求时显示 UIActivityIndi​​cator 并在请求加载成功时停止它。

– webView:shouldStartLoadWithRequest:navigationType:

– webViewDidStartLoad：

– webViewDidFinishLoad：

– webView:didFailLoadWithError:

# sql - 计算服务年限的 SQL 代码

> ID：15673288
> 
> 赞同：0
> 
> 时间：2013-03-28T02:36:49.063
> 
> 标签：sql, oracle

我必须创建一个 oracle sql 来识别在下周内达到里程碑周年纪念的员工。我实际上不得不创建两个代码。一个用于识别今年达到里程碑周年纪念的每位员工，第二个用于识别下周达到里程碑周年纪念的任何员工。

因此，如果我这周运行代码，它将捕获下周有周年纪念日的任何人。对于此代码，我能够创建一个代码来识别特定日期的周年纪念日……但我无法创建一个查看下周所有 7 天并告诉我谁都有周年纪念日的代码。

当查询在今天 2013 年 3 月 27 日运行时，这是用于识别在 2013 年 3 月 31 日星期日有周年纪念日的任何人的查询。

```
SELECT a.full_name AS Full_Name,
       b.adjusted_svc_date AS Service_Date,
       d.name Job_tittle,
       TRUNC ( (TO_NUMBER (TO_CHAR (SYSDATE + 4, 'mmddyyyy'))) -- TO_NUMBER (TO_CHAR (SYSDATE+4, 'MM/DD/YYYY'))
              - TO_NUMBER (TO_CHAR (b.adjusted_svc_date, 'mmddyyyy')))
          AS Years_OF_Service
  FROM per_people_x a,
       per_periods_of_service b,
       per_assignments_x c,
       per_jobs d
WHERE     a.person_id = c.person_id
       AND c.period_of_service_id = b.period_of_service_id
       AND c.job_id = d.job_id
       AND TRUNC (
                (TO_NUMBER (TO_CHAR (SYSDATE + 4, 'mmddyyyy')))
              - TO_NUMBER (TO_CHAR (b.adjusted_svc_date, 'mmddyyyy'))) IN
              (5, 10, 15, 20, 25, 30)
       AND a.person_type_id IN (6, 7) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:19:32.453

我结合了大家提供的信息并且能够获取代码。这是每个星期一运行代码的代码。

```
SELECT ppx.full_name AS Full_Name,
       ps.adjusted_svc_date AS Service_Date,
       pj.name Job_tittle,
         (TO_NUMBER (TO_CHAR (SYSDATE, 'YYYY')))
       - TO_NUMBER (TO_CHAR (ps.adjusted_svc_date, 'YYYY'))
          AS Years_OF_Service
  FROM per_peoples_x ppx,
       per_periods_of_services ps,
       per_assignment_x pax,
       per_jobs pj,
       (SELECT 6 AS d FROM DUAL
        UNION ALL
        SELECT 7 FROM DUAL
        UNION ALL
        SELECT 8 FROM DUAL
        UNION ALL
        SELECT 9 FROM DUAL
        UNION ALL
        SELECT 10 FROM DUAL
        UNION ALL
        SELECT 11 FROM DUAL
        UNION ALL
        SELECT 12 FROM DUAL
        ) days_in_future
 WHERE     ppx.person_id = pax.person_id
       AND pax.period_of_service_id = ps.period_of_service_id
       AND pax.job_id = pj.job_id
       AND   (TO_NUMBER (TO_CHAR (SYSDATE, 'YYYY')))
           - TO_NUMBER (TO_CHAR (ps.adjusted_svc_date, 'YYYY')) IN
              (5, 10, 15, 20, 25, 30)
       AND TO_CHAR (SYSDATE + days_in_future.d, 'mmdd') =
              TO_CHAR (adjusted_svc_date, 'mmdd')
       AND ppx.person_type_id IN (6, 7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:46:19.600

您应该真正修复您的查询以使用 ANSI 标准连接和有意义的别名（可能`px`是 for`per_people_x`而不是`a`.

无论如何，解决问题的一种方法是交叉加入一组数字并在未来几天使用它们。服务年限的计算只是年限之间的差异。周年纪念支票仅使用月份和日期。

```
SELECT a.full_name AS Full_Name,
       b.adjusted_svc_date AS Service_Date,
       d.name Job_tittle,
       year(sysdate+days_in_future.d) - year(adjusted_svc_date) AS Years_OF_Service
  FROM per_people_x a,
       per_periods_of_service b,
       per_assignments_x c,
       per_jobs d,
       (select 0 as d from dual union all select 1 from dual union all select 2 from dual
       ) days_in_future
WHERE     a.person_id = c.person_id
       AND c.period_of_service_id = b.period_of_service_id
       AND c.job_id = d.job_id
       and to_char(sysdate+days_in_future.d, 'mmdd') = to_char(adjusted_svc_date, 'mmdd')
       and year(sysdate+days_in_future.d) - year(adjusted_svc_date) in (5, 10,15, 20, 25, 30)
       AND a.person_type_id IN (6, 7) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:19:44.770

这可能会有所帮助 - 基于 emp 表的一般示例。从雇用日期到 2013 年 3 月的最后一天之间的年月。如果我正确理解了这个问题，那么史密斯在 2013 年 3 月 31 日之前工作了 32 年零 3 个月，而不是周年纪念日。琼斯工作了 32 年零 0 个月——纪念日！我希望可以合理地假设周年纪念日基于年份和飞蛾，而不是每周。

您可以将月份的最后一天更改为任何日期 - 从今天起一周等...例如：Last_Day(Trunc(SYSDATE))+7 等...结果应该是相同的。

```
SELECT * FROM 
(
 SELECT ename
      , EXTRACT(YEAR FROM (Last_Day(Trunc(SYSDATE)) - hiredate) YEAR TO MONTH ) years -- years from last day of Mar-2013 --
      , EXTRACT(MONTH FROM (Last_Day(Trunc(SYSDATE)) - hiredate) YEAR TO MONTH ) mnths       -- months from last day of Mar-2013 --
   FROM scott.emp 
 )
WHERE mnths = 0 -- if months = 0 then it is an anniversary --
/

ENAME    YEARS    MNTHS
-------------------------
SMITH    32        3
ALLEN    32        1
WARD     32        1
JONES    32        0  -- Only this row will be returned with Where mnths = 0 --
...
... 
```

# javascript - 为什么我的 DIV 没有响应我的 Javascript opacity 函数？

> ID：15673292
> 
> 赞同：0
> 
> 时间：2013-03-28T02:37:08.193
> 
> 标签：javascript, html, image, opacity, css

我创建了一个非常简单的 javascript 函数，当我将鼠标悬停在某些单词上时，具有某个特定的元素`id`变得透明。这适用于我的`img`标签，但`div`具有相同 id 的 s 没有改变？

这是我的javascript：

```
function revealCategory1() {
document.getElementById('c2').style.opacity="0.3";
document.getElementById('c3').style.opacity="0.3";
document.getElementById('c4').style.opacity="0.3";
}

function revealCategory2() {
document.getElementById('c1').style.opacity="0.3";
document.getElementById('c3').style.opacity="0.3";
document.getElementById('c4').style.opacity="0.3";
}

function revealCategory3() {
document.getElem..............etc

function resetReveal() {
document.getElementById('c1').style.opacity="1";
document.getElementById('c2').style.opacity="1";    
document.getElementById('c3').style.opacity="1";    
document.getElementById('c4').style.opacity="1";    
} 
```

[http://jsfiddle.net/u6XG2/](http://jsfiddle.net/u6XG2/)

这个 html 正在调用它：

```
<div class="bars">
<span class="categories" id="c1" onMouseOver="revealCategory1()" onMouseOut="resetReveal()">VIDEO</span>
<span class="categories" id="c2" onMouseOver="revealCategory2()" onMouseOut="resetReveal()">ANIMATION</span>
<span class="categories" id="c3" onMouseOver="revealCategory3()" onMouseOut="resetReveal()">DESIGN</span>
<span class="categories" id="c4" onMouseOver="revealCategory4()" onMouseOut="resetReveal()">WEB-DESIGN</span>
</div> 
```

在页面上，这工作得很好。图像变得透明。

```
<div class="logocontainer" >
<img class="logo" id="c1" src="images/DOSED-C1.png" />
<img class="logo" id="c2" src="images/DOSED-C2.png" />
<img class="logo" id="c3" src="images/DOSED-C3.png" />
<img class="logo" id="c4" src="images/DOSED-C4.png" />
</div> 
```

但这不是，`div`s 不会透明。

```
<div class="maincontent">
<div id="c1" class="content" >VIDEO PIECE 1</div>
<div id="c2" class="content" >ANIMATION PIECE 1</div>
<div id="c3" class="content" >DESIGN PIECE 1</div>
<div id="c4" class="content" >WEB-DESIGN PIECE 1</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:40:03.820

您不能有两个（或更多）具有相同 ID 的元素。

以不同的方式命名图像 ID。IE：

```
<img class="logo" id="c1_image" src="images/DOSED-C1.png" /> 
```

然后，对两个 ID 执行操作：

```
function resetReveal() {
    document.getElementById('c1').style.opacity="1";
    document.getElementById('c1_image').style.opacity="1"; 
```

此外，从元素`<spans>`中删除这些 ID 。`.bars`他们目前什么都不做。

```
<span class="categories" onMouseOver="revealCategory1()" onMouseOut="resetReveal()">VIDEO</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T22:36:08.980

很抱歉，这是一个很常见的错误，但所有 ID 都必须是唯一的。它是可以复制的名称标签。

另一种想法是使用类元素和 document.getElementsByClassName 方法，然后通过返回的数组来筛选出你想要的那些元素，这对于不允许名称标签的元素来说是一个很好的选择。

# epplus - 如何为 EPPlus 中的整个列设置样式？

> ID：15673296
> 
> 赞同：12
> 
> 时间：2013-03-28T02:37:22.693
> 
> 标签：epplus

是否可以为 EPPlus 中的整个列设置样式？我希望我可以只使用该`Column`方法，但是当我这样做时，我会得到奇怪的结果：

```
//Sets all cells in all columns to Red
worksheet.Column(1).Style.Font.Color.SetColor(Color.Red);

//Sets some cells in column B to red.
worksheet.Column(2).Style.Font.Color.SetColor(Color.Red); 
```

在这两种情况下，我在添加一些标题行之后设置颜色，但在添加大部分行之前，我没有在其他任何地方设置颜色。在设置水平对齐方式时，我也得到了类似的意外结果。目前我不得不在单元格级别设置样式。

我使用不正确还是这是一个错误？使用 EPPlus 3.1.2.0 和 Excel 2010 (14.0.6129.5000)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-04-05T05:57:10.583

```
 int indexOfColumn = ...;
 worksheet.Column(indexOfColumn).Style.Font.Color.SetColor(Color.Red); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-04T01:02:56.933

尝试使用范围；我也有使用数字的问题。

```
//Get the final row for the column in the worksheet
int finalrows = worksheet.dimension.End.Row;

//Convert into a string for the range.
string ColumnString = "A1:A" + finalrows.ToString();

//Convert the range to the color Red
worksheet.Cells[ColumnString].Style.Font.Color.SetColor(Color.Red); 
```

希望这有效，但我没有尝试过。

# facebook - 用户签到时facebook实时更新

> ID：15673303
> 
> 赞同：1
> 
> 时间：2013-03-28T02:37:45.640
> 
> 标签：facebook, scala, facebook-graph-api, checkin

每当用户检查特定商家的位置时，我的应用程序都需要知道。

FB 实时更新发送一个 POST 请求，通知用户的位置已更改，然后我的应用程序将必须向 FB 发出 GET 请求，以查明用户是否已签入该应用程序正在观看更新的商家位置。

设计/实现它的最佳方法是什么？我的应用程序是否应该存储我们有兴趣跟踪其位置的每个商家的经度/纬度？然后 GET 请求将带回用户当前的经度/纬度位置。我应该比较这两个值吗？不确定这是否是一种准确（和惯用）的方式来确认用户是否进入了非常特定的商家场所？

# ios - UIRefreshControl 上拉刷新？

> ID：15673304
> 
> 赞同：0
> 
> 时间：2013-03-28T02:37:48.467
> 
> 标签：ios, objective-c, uirefreshcontrol

我用 UITableViewController 连接了 NSFetchedResultController。

我很想在我的 UITableView 的底部实现 UIRefreshControl。这意味着我的用户将向下滚动到表格的底部。然后用户将向上滚动以触发 UIRefreshControl。

这可以做到吗？我无法对此进行谷歌搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:43:26.493

不，这是不可能的。 `UITableViewController`自动将 定位`UIRefreshControl`在 tableView 内容的顶部。如果您希望能够做到这一点，我建议您提交[一个增强请求](https://bugreport.apple.com)来请求它。

另外，您难道不能检测到您接近表格底部并自动刷新吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T19:55:46.447

这是实现[bottomRefreshControl](https://github.com/vlasov/CCBottomRefreshControl)属性的 UIScrollView 类（UITableView 和 UICollectionView 类的父类）的 CCBottomRefreshControl**类别**。我确定这就是你要找的。

# ios - iOS - Sqlite 存储为“日期”或“日”、“月”、“年”？

> ID：15673306
> 
> 赞同：0
> 
> 时间：2013-03-28T02:38:11.473
> 
> 标签：ios, sql, sqlite, date, group-by

我想最终生成月度和年度报告。

假设我有一个包含*(price, date, ...)的表***事务**，我想生成一个**按 分组**的报告。 ***`month`***

 ***我应该将日期存储为 3 个单独的字段**日**、**月**和**年**吗？或者我可以将它存储为数据类型的**日期？**`Date`

如果是**date**，查询是什么样的以及如何在 iOS 中实现它？

**注意：我是 iOS 新手**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:51:03.480

在数据库中，您应该始终希望将日期存储为日期，而不是它们的组成字段。

SQLite 提供了各种用于操作和排序日期的函数，因此您可以使用它们。

取消日期的月份非常容易。

使用`date`.***

# php - php 5.4 定义函数

> ID：15673309
> 
> 赞同：0
> 
> 时间：2013-03-28T02:38:34.837
> 
> 标签：php, include, constants

我曾经在 PHP 中有一个包含`define`一些常量的配置文件。自从升级到 PHP 5.4 后，它似乎不再起作用了。

这是一个例子：

```
//config.php
define('CONSTANT', 'foo');

//page.php
require_once 'config.php';

echo CONSTANT; //not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:43:30.157

我认为您的 config.php 文件没有被正确包含，或者没有正确定义常量。`define()`在 php 5.4 中的工作方式与以前相同。

包含配置文件并期望定义常量后，使用`get_defined_constants()`来查看您拥有的内容。这有助于调试常量问题。

# lua - Lua/计算机听还功能？

> ID：15673312
> 
> 赞同：0
> 
> 时间：2013-03-28T02:38:50.153
> 
> 标签：lua, listener, minecraft, computercraft

我正在尝试使用计算机技术在 Tekkit 上制作计算机系统/网络。

Computecraft 是一个基于 Lua 的修改，在 Minecraft/Tekkit 和其他修改包中运行。

基本上，我目前正在使用无线路由器来执行此操作：

```
rednet.open('top') -- Open Connection to the wireless router
print ("test")
input = read()
rednet.receive()  -- Listen for messages send/broadcasted 

if message then
 print (message)
end 
```

我正在尝试对我的所有系统进行更改，如下所示：

```
rednet.open ('top')
 -- Do all normal stuff

rednet.receive()
if message == "Lock202" then 
 os.pullEvent = os.pullEventRaw
 term.clear()
 term.setCursorPos(1,1)
 print ("Alert In Progress, Terminal Locked")
end 
```

通过做所有正常的事情，我希望用户能够导航和使用计算机的功能。但是当调用`rednet.receive()`它时，它会冻结并等待传入​​消息。

我希望它在后台运行，并且仅在收到消息时才采取行动。

我试过查看文档，帮助站点。并考虑将这个问题带到 SO，因为由于可用的 Lua 编码器的范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-13T06:24:09.507

[http://computercraft.info/wiki/Parallel.waitForAll](http://computercraft.info/wiki/Parallel.waitForAll)

这是一个基本上可以多线程你的程序的函数......所以你可以......

```
function listen()
 while true do
  id, msg, distance = rednet.receive()
  FUNCTION_THAT_RUNS_STUFF(id, msg, distance)
  sleep(1)
 end
end

function main_loop()
 while true do
  --do your other stuff in here
 end
end

--end of file run everything
parrallel.waitForAll(listen, main_loop) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T15:42:12.740

我所做的是我有 1 台电脑运行 os.pullEvent，还有很多其他的电脑收集信息并通过 rednet 发送，这使得只有一台电脑像这样卡住了，尽管其他电脑几乎无法使用，当然，如果你做了我所做的，你可以让它检测密钥和 rednet_message 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T08:13:32.120

命令 rednet.receive() 的参数中可以有一个参数，即“超时”。

这是以秒为单位的。它也是一个浮点数（十进制），例如 4.50、1.23。等等

这意味着它将在该时间段内收到。

完成您想要的事情的一个好方法是让另一台计算机不断接收消息，然后向您想要进行模块化接收和写入的计算机发出红石信号

```
function Check()
  If rs.getInput("back") then
     local id, message = rednet.receive(5)
     print("Receiving Message")
  end
end 
```

另一台计算机会这样做：

```
computerid = 50

id, message = rednet.receive()
  rs.setOutput("back",true)
  sleep(1)
  rednet.send(computerid, message)
  rs.setOutput("back",false) 
```

computerid 将等于您要运行的原始计算机的 ID。您还必须在运行代码时定期使用 Check() 函数，除非收到消息，否则它不会影响计算机，在这种情况下，它会在“rednet.receive”中指定的时间内接收论据。

希望这对您有所帮助

——艾威尔道

# apache-zookeeper - 我可以使用不同版本的客户端连接到 Zookeeper 服务器吗？

> ID：15673313
> 
> 赞同：1
> 
> 时间：2013-03-28T02:38:53.713
> 
> 标签：apache-zookeeper

我需要在我的项目 A 中使用 zookeeper java 客户端。

A 有一个依赖 B，它是一个使用 zookeeper 3.3.5 java 客户端连接到“企业服务目录”zookeeper 集群的库。这个集群不在我的控制之下，我不能将它用于我的代码。A 和 B 在同一个类加载器中运行，A 中的代码必须使用 3.3.5 客户端。

还有另一个依赖项 C（它是 Solr 4.2），它在不同的 JVM 中运行。C 使用 zookeeper 3.4.5 java 客户端。

问题是A使用3.3.5客户端，C使用3.4.5客户端，但是我不想搭建两个不同的zookeeper集群。他们可以连接到相同的 zk 集群吗？如果可以，我应该使用哪个版本的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:45:57.227

旧客户端和新服务器是一个非常常见的用例，尤其是。升级时 - 服务器移动到下一个版本，而客户端在旧版本上停留一段时间，缓慢迁移（通常您的客户端比服务器多得多）。所以这得到了很多锻炼。

特别是 3.3 客户端/服务器已经过 ZK 社区的验证，可以与 3.4 客户端/服务器一起使用，因此它应该可以正常工作。

您确实需要担心的一件事是，如果您在 3.4 客户端中使用了 3.3 中没有的新功能，而您的服务器是 3.3。如果你利用3.4 中添加的例如multi，那么你会遇到麻烦。3.3 服务器不支持 Multi 并且会失败。如果两个集群都是 3.4 服务器或 3.3 服务器集群并且客户端是 3.3 或 3.4 并且不使用 3.3 之后添加的功能，那么您应该没问题。

# asp.net - 如何从 DropDownListFor 中提取选定的值

> ID：15673316
> 
> 赞同：0
> 
> 时间：2013-03-28T02:39:31.640
> 
> 标签：asp.net, asp.net-mvc

我需要帮助来提取我在这里选择的内容：

```
<% var equipo = Html.DropDownListFor(model => model.campeonato.equipo, 
                 new SelectList(Model.campeonato.equipo, "idEquipo", "nombre", Model.campeonato.equipo.First().idEquipo), 
                 new { @required = "required", @class = "infofield" });%>

<%:Html.DropDownListFor(model => model.idJugadora, 
                  new SelectList(Model.campeonato.equipo.Where(d=>d.idEquipo.Equals(equipo)).ToList(), "idJugadora", "nombre", Model.campeonato.equipo.First().jugadora), 
                  new { @required = "required", @class = "infofield" })%> 
```

如果我这样做，它不会出现在视图中的下拉列表中：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:57:20.027

您可以通过您发布的模型访问该值。

```
public ActionResult Edit(campeonato campeonato_model)
{
   //Console.Write(equipo_model.equipo);
} 
```

# php - SQL 包含带有 AND/OR/BOTH 的记录

> ID：15673318
> 
> 赞同：0
> 
> 时间：2013-03-28T02:39:44.593
> 
> 标签：php, mysql, sql

我有一组字段供用户选择以缩小搜索结果的范围。最后两个选项是复选框，请在我描述问题后告诉我是否应该更改此选项。

我有一个包含两个选项 A 和 B 的项目列表。这些在数据库中标记为 0 表示否，1 表示是。这些选项可以标记在一个、另一个或两者上。

```
Item 1 (0,1)
Item 2 (1,1)
Item 3 (1,0) 
```

如果用户选中第一个框，我想检索项目 2 和 3。如果用户选中第二个框，我想检索项目 1 和 2。如果他们选中两个框，我想检索所有项目。

我想我需要做类似的事情：

```
WHERE (A = check1 AND ( B = 0 OR B = 1 )) 
  AND (B = check2 AND ( A = 0 OR A = 1 )) 
```

但它不起作用。选中检查 1，我只得到第 3 项，而不是第 2 项和第 3 项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:49:48.010

试试这个：

```
where (check1 = 0 or A = 1) and (check2 = 0 or B = 1) 
```

复选框的“0”表示一切，因此将其包含在逻辑中。

# android - Android Intellij IDEA 12 AIDL

> ID：15673319
> 
> 赞同：3
> 
> 时间：2013-03-28T02:39:48.523
> 
> 标签：android, intellij-idea, aidl

我正在尝试使用 AIDL 在 Android 上创建远程 IPC 服务。我找到了一些解释如何在 Eclipse 中创建此类服务的文档，但没有一个文档解释了 InteliJ IDEA 上的创建过程。

我注意到 IntelliJ 在 File > New > Android Component > Remote Interface 中具有此功能，我使用它创建了一个名为 IRemoteService.aidl 的文件，其内容如下：

```
package MyApp.Android.RemoteServices;
/**
 * Created with IntelliJ IDEA.
 * Máxima Sistemas de Informática S.A.
 * User: regis.oliveira
 * Date: 27/03/13
 * Time: 23:26
 * To change this template use File | Settings | File Templates.
 */
/** Example service interface */
interface IRemoteService {
    /** Request the process ID of this service, to do evil things with it. */
    int getPid();

    /** Demonstrates some basic types that you can use as parameters
     * and return values in AIDL.
     */
    void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat,
            double aDouble, String aString);
} 
```

但是，当我尝试编译项目时，出现以下错误：

```
android-idl-compiler: D:\Docs\Programming\MyApp.Android.RemoteServices\IRemoteService.aidl:10 interface IRemoteService should be declared in a file called MyApp\Android\RemoteServices\IRemoteService.aidl. 
```

有没有人已经在 IntelliJ 中实现了这个？是否有任何文档显示如何在其上使用此功能？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:22:33.827

经过一番尝试，我意识到问题是由与 IntelliJ 同时打开的 Eclipse 引起的。因此，在关闭 Eclipse 并重新启动 IntelliJ 之后，一切都按预期工作。

# jquery - 无法获取元素的整个 innerhtml

> ID：15673321
> 
> 赞同：0
> 
> 时间：2013-03-28T02:39:53.877
> 
> 标签：jquery

我想获取内部 html`li.insert_option` 并将其放在表格中

我的html是这样的

```
 <li class="insert_option">
        <tr  dir="rtl" >
        <td style="text-align:left ; background-color:#CCC"><?php echo $pf->title; ?> </td>
        <td style="text-align:left ; background-color:#CCC">  <input name="id[<?php echo $pf->id; ?>]" type="text" value="" /></td>
        </tr>
     </li> 
```

我的jQuery代码是

```
$('#pack_adder_serviceselect').change(function(){
    $('#new_cat #option_table').html('');

    var id = $(this).val();
    var io = $('#pack_fildset_'+id).find('.insert_option');

    $.each(io , function(){
        $('#new_cat #option_table').append($(this).html());
        console.log($(this).html());
    })
}) 
```

这是我的控制台日志：

```
 xxx
      <input name="id[3]" value="" type="text"> 
```

`tr`和在哪里`td`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:42:33.267

尝试使用 jquery 的 outerhtml() 函数。另外，如果你想要 tr，请考虑调用 parent().outerhtml()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:43:14.693

那是因为你的标记是无效的，当没有包装元素时浏览器不会渲染`tr`和元素，所以 DOM 中没有/元素可供 jQuery 选择。`td``table``tr``td`

# elasticsearch - ElasticSearch - 在部分匹配之前准确排序？

> ID：15673324
> 
> 赞同：2
> 
> 时间：2013-03-28T02:40:05.063
> 
> 标签：elasticsearch

在 ElasticSearch 中呈现部分匹配之前，我需要对确切的字符串匹配进行排序

假设我有三个文件：

*   迈克尔一个
*   迈克尔·B
*   米查

如果我搜索**micha**，它只会返回第三个文档。但是，如果我搜索**micha***，我会按照上面列出的顺序获得所有三个文档。

我的问题是，如何让第三个文档（完全匹配）出现在其他结果之前？

```
 :analysis => {
      :filter => {
        "my_edge_ngram_filter" => {
          "type"     => "edgeNGram",
          "min_gram" => 1,
          "max_gram" => 128,
          "side" => "front",
        },
        "my_phone_filter" => {
          "type"    => "pattern_replace",
          "pattern" => "\\D",
          "replacement" => ""
        }
      },
      :analyzer => {
        "default_index" => {
          "tokenizer" => "uax_url_email",
          "filter" => [
            "standard",
            "lowercase",
            "stop",
            "my_edge_ngram_filter"
          ],
          "type"   => "custom"
        },
        "my_phone_analyzer" => {
          "tokenizer" => "keyword",
          "filter" => [
            "my_phone_filter",
          ],
          "type"   => "custom"
        },
        "default_search" => {
          "type"   => "standard"
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-21T16:08:59.713

您可以使用 multi_field + 提升：

*   一种是通过单词搜索进行映射，并以高于第二个字段的分数来提升它
*   其次是使用您的 ngram 分析器进行映射。

> ```
> "name" : {
>       "type" : "multi_field",
>       "fields" : {
>           "name" : {
>               "type" : "string",
>               "index" : "analyzed",
>               "index_analyzer" : "standard",
>               "search_analyzer" : "standard",
>               "boost" : 10.0
>           },
>           "partial": {
>               "type" : "string",
>               "index" : "analyzed",
>               "index_analyzer" : "your_ngram_analyzer",
>               "search_analyzer" : "standard",
>               "boost" : 1.0
>           }
>   }
>    } 
> ```

然后在这两个字段上进行搜索，例如：

```
"query": {
    "query_string": {
      "query": "micha",
      "fields": [
        "name.partial",
        "name"
      ],
      "default_operator": "and"
    }
  } 
```

PS：您还可以在查询中动态指定字段提升，例如：

```
"query": {
    "query_string": {
      "query": "micha",
      "fields": [
        "name.partial^1",
        "name^10"
      ],
      "default_operator": "and"
    }
  } 
```

# c - 如何从字符串中扫描未知数量的元素？

> ID：15673326
> 
> 赞同：2
> 
> 时间：2013-03-28T02:40:21.867
> 
> 标签：c, arrays, scanf

我正在尝试从一个字符串中扫描多个整数，但我不知道它会有多少，因为它因情况而异。我想扫描多个数字并将它们放入一个数组中。

我一直在尝试这样做，但它不起作用......假设我想从字符串“line”中扫描 C 数字。

```
for(a=0;a<c;a++)
    sscanf(line, " %d ",&v[a]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:16:37.133

假设您有足够的空间来存储整数。

```
char * c_num = NULL;
for(c_num = strtok(line, " \t\n"), a = 0; c_num != NULL && a < c; c_num = strtok(NULL, " \t\n"), a++){
    v[a] = atoi(c_num);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:00:36.680

我写了一段代码来帮助你更清楚地理解它。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void){
    int v[10];
    char buffer[4096];

    char * line = NULL;
    int i, j;

    if(fgets(buffer, 4096, stdin) == NULL){
        return -1; 
    }   

    for(i = 0, line = strtok(buffer, " "); i < 10; i++){
        if(line == NULL){
            break;
        }   

        sscanf(line, "%d", &v[i]);
        line = strtok(NULL, " "); 
    }   
    j = i;

    for(i = 0; i < j; i++){
        printf("%d\n", v[i]);
    }   

    return 0;
}

[neo]:./a.out 
1 2 3 4 5 9999
1
2
3
4
5
9999 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:33:48.253

我终于搞定了！感谢您的所有帮助；）

```
f = fopen(argv[1],"r");
fgets(line,c,f);

line2 = strtok(line, " ");

while (line2 != NULL){

    sscanf(line2, "%d",&v[i]);

    line2=strtok(NULL, " ");
    i++;
} 
```

# ruby-on-rails - Nginx 如何将 SSL 加密数据传递给 Rails 应用程序？

> ID：15673328
> 
> 赞同：3
> 
> 时间：2013-03-28T02:40:28.990
> 
> 标签：ruby-on-rails, ssl, nginx

假设我有一个使用 Unicorn 运行 Rails 应用程序并使用 Nginx 作为反向代理的设置。当 Nginx 被配置为处理 SSL 时，这是否意味着它将加密数据直接原封不动地传递给我的 Rails 应用程序，或者它解密它然后将其发送到我的 Rails 应用程序，以便我的 Rails 应用程序看到未加密的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:05:31.673

这称为 nginx ssl 终止。数据已经被 nginx 解密了，上游的 rails 应用只需要处理未加密的数据，也就是说，你的 rails 应用应该只监听端口 80 (http)，在你的反向代理设置中，你应该有

```
proxy_pass http://rails_app_domain; 
```

不是

```
proxy_pass https://rails_app_domain; 
```

# c# - XNA：有没有办法将 RasterizerState 设置为 WireFrame 一次？

> ID：15673330
> 
> 赞同：0
> 
> 时间：2013-03-28T02:40:41.977
> 
> 标签：c#, xna, wireframe

我有一个要在 WireFrame 模式下查看的网格。我目前正在以这种方式设置我的 GraphicsDevice...

```
TheGraphicsDevice.RasterizerState = new RasterizerState()
{
    FillMode = FillMode.WireFrame,
    CullMode = CullMode.None
}; 
```

这是我想做的，但似乎每次调用 Draw() 时我都必须设置 RasterizerState。

有没有办法将 RasterizerState 设置为 WireFrame 一次？（就像我第一次声明我的 GraphicsDevice 变量时一样？）我已经尝试了所有我能想到的组合，但它似乎只有在我（重新）在 Draw() 方法中设置它时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:56:05.787

如果您正在绘制 3d 项目和 2d 项目的组合（使用 SpriteBatch），则调用`spriteBatch.Begin()`会将填充模式重置回实体。因此，在这种情况下，当您绘制 3d 项目时，您必须将其设置为每帧线框（或将 saveState 与 spritebatch 一起使用）。

如果您只绘制 3d 项目，那么您可以在初始化期间设置一次，而无需继续重置它。

如果您需要在每一帧都设置它，请不要像您的代码片段那样进行设置。这就是为最终需要 gc(ed) 的每一帧分配新的内存。相反，制作一个自定义 RasterizationState 对象并在每一帧重用它。

# c - 在C中制作外壳时正确的管道方法是什么

> ID：15673333
> 
> 赞同：4
> 
> 时间：2013-03-28T02:40:51.317
> 
> 标签：c, shell, fork, pipe

我正在尝试创建自己的外壳，我相信我已经正确完成了分叉，但我无法弄清楚如何正确管道。任何帮助或提示将不胜感激。

基本上我的管道不工作，我花了很长时间试图弄清楚如何让它们在进程之间正确传输数据。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <unistd.h>
#include "ourhdr.h" // from Steven's book Advanced programing in the UNIX Enviroment

extern int makeargv(char *, char * , char ***);
int main()  
{   char **argp;
    int i,j,vpret;
    char buf[80];
    pid_t pid;
    int pnum;   
        //pipe number
    int ploc[16];   
        //pipe location 
        //(this has a max of 12 possible pipes)
    int targ;
    int fdleft[2], fdright[2];

    printf("            <(^_^)> \nHello \n I am your console and I am here to help you \n");
    printf("    If you dont need me anymore just say \"bye\" ");
    fflush(stdout);
    write(1,"\n(>^_^)> ",8);
    while(strcmp(fgets(buf, 80, stdin), "bye\n")!=0)
    {        
        j=makeargv(buf," \n",&argp); //this breaks the line up and returns the number of commands 
        pnum = 0;
        ploc[0] = 0;
        if (j > 16) j = 16;
        for (i=0;i<j;i++)
        {
            if ( strcmp(argp[i], "|") == 0)
            {
                argp[i]= NULL;
                ploc[pnum+1] = (i+1);
                pnum++;
            }

        } 

        for (i = 0; i < (pnum+1); i++) 
        {   
            pipe(fdright);
            if (i != 0)
            {   
                dup2(fdright[1], fdleft[0]);            
            }
            pid = fork();

            switch (pid)
            {
                case -1:
                    err_sys("fork failed");
                    break;
                case 0: // child
                    if (i != pnum)
                    {
                        dup2(fdright[1],1);
                    }
                    if ( i != 0);
                    {
                        dup2(fdright[0],0); 
                    }
                    //printf("(^o^) running pipe[%i]\n" , i);
                    targ =(ploc[i]) ;
                    execvp(argp[targ],&argp[targ]);
                    write(1,"(-_-) I'm sorry the exec failed \n",33);
                    exit(1);
                default:

                    dup2(fdleft[1], fdright[1]);
                    waitpid(pid,NULL, 0);
                    close(fdright[0]);
                    close(fdright[1]);
                    //waitpid(pid,NULL, 0);
            }
        }   
        //waitpid(pid, NULL, 0);
        write(1,"\n(>^_^)> ",8);
    }
    printf("  v(^o^)^ BYE BYE!\n");

} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:25:23.297

各种评论：

1.  `while (strcmp(fgets(buf, 80, stdin), "bye\n")!=0)`

    如果 shell 被赋予 EOF 而不是`bye`. 不要像这样组合两个函数调用。如果您想在一个循环条件下完成所有操作，请使用：

    ```
    while (fgets(buf, sizeof(buf), stdin) != 0 && strcmp(buf, "bye\n") != 0) 
    ```

    我们将在另一次讨论命令行长度的限制。

2.  由于您没有提供`makeargv()`查看，我们必须假设它可以正常工作。

3.  您将事物拆分为命令和管道的循环是：

    ```
    pnum = 0;
    ploc[0] = 0;
    if (j > 16) j = 16;
    for (i = 0; i < j; i++)
    {
        if (strcmp(argp[i], "|") == 0)
        {
            argp[i] = NULL;
            ploc[pnum+1] = (i+1);
            pnum++;
        }
    } 
    ```

    假设我们有一个命令行输入：`ls -l | grep lemon`. 看来您`makeargv()`将返回 5 并设置`argp`如下：

    ```
    argp[0] = "ls";
    argp[1] = "-l";
    argp[2] = "|";
    argp[3] = "grep";
    argp[4] = "lemon";
    argp[5] = 0;         // Inferred - things will crash sooner or later if wrong 
    ```

    你的这个循环会给你：

    ```
    ploc[0] = 0;
    ploc[1] = 3;
    pnum = 1; 
    ```

4.  您的代码在数组中有一对文件描述符`fdleft`，但您从不初始化数组（`pipe()`例如 call ），即使您在调用`dup2()`.

5.  然后主`for`循环必须运行两次，每个命令运行一次。对于管道中三个或更多命令的一般情况（`who | grep me | sort`例如 ），您的第一个命令（`who`）需要其标准输入保持不变，但其标准输出将进入连接`who`和的管道`grep`。“中间”命令（倒数第二个命令，或`grep me`在示例中）每个都需要其标准输入来自前一个管道，并且需要为其标准输出创建一个新管道。最后一个命令（在本例中为第三个命令`sort`）需要其标准输入来自最后一个管道，并且其标准输出保持不变。

    您的代码不会那样做，也不会靠近。

6.  当您使用`pipe()`and then `dup()`or`dup2()`将任何描述符映射到标准 I/O 描述符时，您需要关闭管道的*两端*。你也没有足够的`close()`电话。

7.  您的父进程必须依次启动每个子进程，并且仅在启动所有子进程后等待它们退出。有不同的方法来组织过程。父母可以分叉一次；孩子可能负责启动管道中的主要命令，最后执行最后一个命令本身。父母只有一个直系子女（其他是孙子女），所以它只需要等待一个命令完成。另一种方法是父进程知道管道中的每个进程，并等待它们全部完成。

8.  如果您的父进程在启动其余命令之前等待管道中的每个命令完成，则最终可能会出现死锁。一个孩子向它的管道写入了太多数据，以至于它被内核阻塞，直到某个进程从管道读取，但是从管道读取的进程尚未启动，父进程正在等待子进程退出。您也失去了多处理和并发的好处。

9.  在您的“案例 0”中，您有一个无关的分号。我的编译器警告过我。如果你的没有警告你，你需要使用更多的编译警告或获得更好的编译器。

    ```
    case 0: // child
        if (i != pnum)
        {
            dup2(fdright[1], 1);
        }
        if (i != 0);     // Unwanted semi-colon!
        {
            dup2(fdright[0], 0); 
        } 
    ```

10.  关于 SO 上的 mini-shell 中的管道有很多问题，包括：

    *   [13636252](https://stackoverflow.com/q/13636252)
    *   [13693446](https://stackoverflow.com/q/13693446)
    *   [13905948](https://stackoverflow.com/q/13905948)
    *   [14312939](https://stackoverflow.com/q/14312939)
    *   [13213864](https://stackoverflow.com/q/13213864)

    13636252 的答案几乎是通用的。唯一的障碍是它使用[`char ***`](http://c2.com/cgi/wiki?ThreeStarProgrammer)容易混淆，而且它写得如此紧凑，它具有相互递归的功能，重复最少。OTOH，它工作正常，你的`makeargv()`函数也使用了一个`char ***`参数。

* * *

### 重新编写的代码

这是您的代码重做，以便它工作。它包括`err_sys()`和的实现`makeargv()`。我`makeargv()`只是假设命令行中的单词少于 32 个。无论如何，它都不是一个强大的命令行解析器。它确实允许您输入`ls | wc`并给出正确答案；它还允许`who | grep me | sort`并给出正确的答案；它还允许`ls`并给出正确的答案。不过，管道符号周围的空格是至关重要的（在普通的 shell 中，它们是可选的，因此`who|grep me|sort`也应该可以工作，但它不适用于此代码。

```
#include <assert.h>
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>
#include <sys/wait.h>
#include <unistd.h>

extern int  makeargv(char *line, char *seps, char ***args);
extern void err_sys(const char *msg);
static void dump_argv(char **argv);
static void dump_fds(void);

int main(void)
{
    char buf[80];

    printf("            <(^_^)> \nHello \n I am your console and I am here to help you\n");
    printf("    If you don't need me anymore just say \"bye\"\n");
    fflush(stdout);
    dump_fds();
    printf("(>^_^)> ");
    while (fgets(buf, sizeof(buf), stdin) != 0 && strcmp(buf, "bye\n") != 0)
    {
        pid_t pid;
        char **argp;
        int fdleft[2]  = { -1, -1 };
        int fdright[2] = { -1, -1 };
        int pnum = 0;
        int ploc[16];
        int j = makeargv(buf, " \n", &argp);

        ploc[0] = 0;
        if (j > 16)
            j = 16;
        for (int i = 0; i < j; i++)
        {
            if (strcmp(argp[i], "|") == 0)
            {
                argp[i] = NULL;
                ploc[++pnum] = i+1;
            }
        }

        printf("pnum = %d\n", pnum);
        for (int k = 0; k < pnum+1; k++)
            printf("ploc[%d] = %d\n", k, ploc[k]);

        for (int i = 0; i < pnum+1; i++)
        {
            if (i != pnum)
            {
                if (pnum > 0)
                {
                    if (pipe(fdright) != 0)
                        err_sys("pipe");
                    //printf("%d: fdright = { %d, %d }\n", i, fdright[0], fdright[1]);
                    //dump_fds();
                }
            }

            if ((pid = fork()) < 0)
                err_sys("fork failed");
            else if (pid == 0)
            {
                /* Child */
                int targ;
                //dump_fds();
                if (i != pnum)
                {
                    dup2(fdright[1], 1);
                    close(fdright[0]);
                    close(fdright[1]);
                }
                if (i != 0)
                {
                    dup2(fdleft[0], 0);
                    close(fdleft[0]);
                    close(fdleft[1]);
                }
                targ = ploc[i];
                dump_argv(&argp[targ]);
                dump_fds();
                execvp(argp[targ], &argp[targ]);
                fprintf(stderr, "(-_-) I'm sorry the exec failed\n");
                exit(1);
            }

            if (i != 0)
            {
                //dump_fds();
                //printf("%d: fdleft = { %d, %d }\n", i, fdleft[0], fdleft[1]);
                assert(fdleft[0] != -1 && fdleft[1] != -1);
                close(fdleft[0]);
                close(fdleft[1]);
                //dump_fds();
            }

            printf("PID %d launched\n", pid);
            fdleft[0] = fdright[0];
            fdleft[1] = fdright[1];
        }

        //dump_fds();
        //printf("%d: fdleft = { %d, %d }\n", -1, fdleft[0], fdleft[1]);
        close(fdleft[0]);
        close(fdleft[1]);
        free(argp);
        //dump_fds();

        int corpse;
        int status;
        while ((corpse = waitpid(0, &status, 0)) > 0)
            printf(":-( PID %d status 0x%.4X\n", corpse, status);

        printf("\n(>^_^)> ");
    }
    printf("  v(^o^)^ BYE BYE!\n");
}

static void dump_argv(char **argv)
{
    int n = 0;
    char **args;
    args = argv;
    while (*args++ != 0)
        n++;
    fprintf(stderr, "%d: %d args\n", getpid(), n);
    args = argv;
    while (*args != 0)
        fprintf(stderr, "[%s]\n", *args++);
    fprintf(stderr, "EOA\n");
}

/* Report on open file descriptors (0..19) in process */
static void dump_fds(void)
{
    struct stat b;
    char buffer[32];
    sprintf(buffer, "%d: ", getpid());
    char *str = buffer + strlen(buffer);
    for (int i = 0; i < 20; i++)
        *str++ = (fstat(i, &b) == 0) ? 'o' : '-';
    *str++ = '\n';
    *str = '\0';
    fputs(buffer, stderr);
}

int makeargv(char *line, char *seps, char ***args)
{
    enum { MAX_ARGS = 32 };
    char **argv = malloc(32 * sizeof(char *));  // Lazy!
    if (argv == 0)
        err_sys("out of memory in makeargv()");
    int n;
    char **argp = argv;
    char  *str = line;
    for (n = 0; n < MAX_ARGS - 1; n++)
    {
        str += strspn(str, seps);
        if (*str == '\0')
            break;
        *argp++ = str;
        int len = strcspn(str, seps);
        if (len == 0)
            break;
        str[len] = '\0';
        str += len + 1;
    }
    *argp = 0;
    dump_argv(argv);
    *args = argv;
    return(n);
}

void err_sys(const char *msg)
{
    int errnum = errno;
    char *errmsg = strerror(errnum);
    fprintf(stderr, "%s (%d: %s)\n", msg, errnum, errmsg);
    exit(1);
} 
```

样本输出：

```
$ ./pipes-15673333
            <(^_^)> 
Hello 
 I am your console and I am here to help you
    If you don't need me anymore just say "bye"
29191: ooo-----------------
(>^_^)> who | grep jl | sort
29191: 6 args
[who]
[|]
[grep]
[jl]
[|]
[sort]
EOA
pnum = 2
ploc[0] = 0
ploc[1] = 2
ploc[2] = 5
PID 29194 launched
PID 29195 launched
29194: 1 args
[who]
EOA
PID 29196 launched
29194: ooo-----------------
29195: 2 args
[grep]
[jl]
EOA
29195: ooo-----------------
29196: 1 args
[sort]
EOA
29196: ooo-----------------
:-( PID 29194 status 0x0000
jleffler console  Mar 27 15:11 
jleffler ttys000  Mar 27 16:26 
jleffler ttys001  Mar 27 16:26 
jleffler ttys002  Mar 27 16:26 
jleffler ttys003  Mar 27 16:26 
jleffler ttys004  Mar 27 16:26 
jleffler ttys005  Mar 27 16:26 
:-( PID 29195 status 0x0000
:-( PID 29196 status 0x0000

(>^_^)> ls
29191: 1 args
[ls]
EOA
pnum = 0
ploc[0] = 0
PID 29197 launched
29197: 1 args
[ls]
EOA
29197: ooo-----------------
bash.getopts.update makefile            pipeline.c          pthread-1.c         shuntzeroes.c       timezeromoves.c
cmpfltint.c         mda.c               pipeline.dSYM       pthread-2.c         so.14304827         uint128.c
const-stuff.c       mq-saurabh          pipes-13905948.c    pthread-3.c         so.367309           uname.c
dupdata.sql         mqp-saurabh         pipes-14312939.c    quine.c             so.6964747          unwrap.c
fifocircle.c        multi-pipe-sort.c   pipes-15673333      ranges.sql          so.6965001          xxx.sql
idsdb00246324.ec    multiopts.sh        pipes-15673333.c    recv.c              so.8854855.sql      yyy.sql
incunabulum.c       nextpipe.c          pipes-15673333.dSYM regress.c           strandsort.c
madump.c            pipeline            powa.c              send.c              streplace.c
:-( PID 29197 status 0x0000

(>^_^)> ls -C | wc
29191: 4 args
[ls]
[-C]
[|]
[wc]
EOA
pnum = 1
ploc[0] = 0
ploc[1] = 3
PID 29200 launched
PID 29201 launched
29200: 2 args
29201: 1 args
[ls]
[wc]
[-C]
EOA
EOA
29201: ooo-----------------
29200: ooo-----------------
:-( PID 29200 status 0x0000
      16      46     581
:-( PID 29201 status 0x0000

(>^_^)> bye
  v(^o^)^ BYE BYE!
$ 
```

# php - 作曲家使用较新版本的php

> ID：15673334
> 
> 赞同：21
> 
> 时间：2013-03-28T02:41:09.873
> 
> 标签：php, laravel, composer-php

我如何让作曲家使用我安装的更新版本的 php？我已经下载并在所有本地服务器中使用 php 5.4，但是当我下载 composer 时，它指向我的 mac 的默认 #!/usr/local/bin/env 版本，即 5.3.15。我尝试编辑composer可执行文件并更改使用的php，但它破坏了可执行文件。

我正在尝试使用 composer 安装 Laravel，因此下载了错误的版本。

这是我的作曲家可执行文件的顶部的样子，但下面有一堆奇怪的字符。

```
#!/usr/bin/env php
<?php
/*
 * This file is part of Composer.
 *
 * (c) Nils Adermann <naderman@naderman.de>
 *     Jordi Boggiano <j.boggiano@seld.be>
 *
 * For the full copyright and license information, please view
 * the license that is located at the bottom of this file.
 */

Phar::mapPhar('composer.phar');
define('COMPOSER_DEV_WARNING_TIME', 1366931166);
require 'phar://composer.phar/bin/composer'; 
```

用于 laravel 项目的 composer.json

```
{
    "require": {
        "laravel/framework": "4.0.*@dev"
    },
    "autoload": {
        "classmap": [
            "app/commands",
            "app/controllers",
            "app/models",
            "app/database/migrations",
            "app/database/seeds",
            "app/tests/TestCase.php"
        ]
    },
    "scripts": {
        "post-update-cmd": "php artisan optimize"
    },
    "minimum-stability": "dev"
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-12-24T16:12:19.817

如果您不关心永久设置，以下命令对我有用：

```
/Applications/MAMP/bin/php/php5.6.27/bin/php /usr/local/bin/composer install 
```

语法是：

```
{PATH TO YOUR PHP VERSION} {PATH TO COMPOSER EXECUTABLE} {COMPOSER COMMAND} 
```

知道可执行路径：`which {EXECUTABLE}`会很有帮助。例如：`which composer`给出了我在上面的命令中使用的以下输出：

```
/usr/local/bin/composer 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-28T03:12:55.690

我发现了问题。我将 composer.phar 文件移动到我的 /usr/local/bin/ 目录中，无论我做什么，它始终使用 5.3.15。我从我的 bin 中删除了可执行文件并重新下载了 .phar 并将其移至我的项目根目录并运行“php composer.phar install”，它看起来很有效。

为了清理东西，我做了以下事情：

我将 composer.phar 留在了我的用户配置文件的根目录

```
/Users/davidadams/composer.phar 
```

然后我打开了我的 .bash_profile 并添加了以下别名

```
alias composer='/usr/local/php5/bin/php /Users/davidadams/composer.phar' 
```

这样我就可以在全球范围内使用它，我可以定义我想要使用的 php 版本。希望其他人会发现这很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-29T11:46:24.007

默认情况下，*nix 系统上的 composer 使用环境指定的 PHP 二进制/可执行文件。您可以在第一行看到[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)：

```
#!/usr/bin/env php 
```

您可以告诉 shell 使用更具体的 PHP 版本，例如：

```
#!/usr/local/php5/bin/php 
```

在 Windows 系统上，如果您使用 composer 设置，您可以指定 PHP 二进制文件，然后设置将更改环境以满足这些需求。但是您也可以轻松地重写批处理文件 - 或 - 配置 Windows 操作系统以使用特定的 PHP 二进制文件执行 .phar 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-12T07:40:36.417

```
sudo vim ~/.bash_profile 
```

添加

```
export PATH="/Applications/MAMP/bin/php/php7.3.1/bin:$PATH" 
```

在上面的路径中，我有 php 7.3.1，所以将其更改为您拥有的任何路径

然后按 Esc 然后 :wq

# python - pyPdf：非法的 UTF-16 代理

> ID：15673335
> 
> 赞同：1
> 
> 时间：2013-03-28T02:41:16.777
> 
> 标签：python, pdf, decode, utf-16, pypdf

我有一个破坏 pyPdf 的 pdf 文件：http: [//tovotu.de/tests/test.pdf](http://tovotu.de/tests/test.pdf)

这是示例脚本：

```
from pyPdf import PdfFileWriter, PdfFileReader

outputPdf = PdfFileWriter()

inpdf = open("test.pdf","rb")
inputPdf = PdfFileReader(inpdf)
[outputPdf.addPage(x) for x in inputPdf.pages]

with open("output.pdf","wb") as outpdf:
    outputPdf.write(outpdf) 
```

错误输出在这里： http: [//pastebin.com/0m38zhjQ](http://pastebin.com/0m38zhjQ)

使用来自 GitHub 的 PyPDF2 时，错误是相同的。pdftk 可以像处理任何其他 pdf 一样处理此 pdf。请注意，写作失败，但阅读似乎工作得很好！

您至少可以指出导致该错误的 pdf 的确切部分吗？解决方法会更好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:04:22.747

看起来像 PyPDF2 中的一个错误。在[本节](https://github.com/knowah/PyPDF2/blob/2857d4825ce217d74bb1a2c893940bc3083dda9b/PyPDF2/generic.py#L256)中：

```
if string.startswith(codecs.BOM_UTF16_BE):
    retval = TextStringObject(string.decode("utf-16"))
    retval.autodetect_utf16 = True 
```

它假定任何以 (0xFE, 0xFF) 开头的字符串都可以解码为 UTF-16。您的文件包含一个以这种方式开始但随后包含无效 UTF-16 的字节串。

最简单的解决方法是注释掉它`if`并无条件地使用`# This is probably a big performance hit here`分支。

# matlab - Matlab：从分布中采样

> ID：15673337
> 
> 赞同：1
> 
> 时间：2013-03-28T02:41:36.220
> 
> 标签：matlab, distribution

我需要一些关于从 MATLAB 中的给定分布中获取样本的帮助。假设我有 5 个 bin 和这些 bin 可能产生样本的相应概率。

例如，我可能有 .1, .2, .4, .2, .1 作为与 5 个 bin 对应的概率 - (0-19),(20-39),(40-59), (60-79 ),(80-99)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:51:46.950

如果您知道概率，您要做的是让每个 bin 在数轴上占据与其概率成比例的空间，然后从该数轴中选择一个随机数（从平面分布中）。

简单的例子：想想两个箱子，一个有 40%，另一个有 60%。选择一个从 0 到 1 的随机数，如果是 0.40 或更低，则可以说它是从 bin1 中“拉出”的。如果高于 0.40，则从 bin2 中“拉出”。

这是下面的一个坏技巧，但如果你找不到任何优雅的东西......

```
 a = .1
 b = .2 + a
 c = .4 + b
 d = .2 + c
 e = .1 + d %cumulative probabilities (i.e. cdf)
 random = Random() %from 0 to 1 %pick random number
 if( 0 < random < = a) => bin1
 if( a < random < = b) => bin2
 if( b < random < = c) => bin3
 if( c < random <= d) => bin4
 if( d <= random) => bin5 
```

# python - Raven 的 SentryHandler 正在抑制 StreamHandler 输出到文件

> ID：15673338
> 
> 赞同：5
> 
> 时间：2013-03-28T02:41:37.937
> 
> 标签：python, logging, sentry, raven

我有一个普通的 python (non-Django) 项目，我试图[将 Raven 绑定到 logging setup](http://raven.readthedocs.org/en/latest/config/logging.html)中。

在我们当前的设置下，我们使用一个简单的日志配置：

```
import logging
logging.basicConfig(format='long detailed format',
                    level=logging.DEBUG) 
```

然后将输出重定向到日志文件；这会产生一个很好的、详细的日志，我们可以在需要时查看它。

我们现在要添加 Raven 的错误日志记录，将其绑定到我们当前的日志记录设置中，这样`logging.error`调用**也会**导致将消息发送到 Sentry 服务器。使用以下代码：

```
from raven import Client
from raven.conf import setup_logging
from raven.handlers.logging import SentryHandler

raven = Client(environ.get('SENTRYURL', ''), site='SITE')
setup_logging(SentryHandler(raven, level=logging.ERROR)) 
```

错误已成功发送到 Sentry，但我现在只得到一行文件输出：

```
DEBUG: Configuring Raven for host: <DSN url> 
```

所有其他文件输出——从`logging.debug`到`logging.error`——被抑制。

如果我评论该`setup_logging`行，我会得到文件输出但没有哨兵错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:48:42.153

结果证明这是一个草率的代码案例。我们在启动执行路径的其他地方进行了一些修改，重新初始化了日志记录：

```
logging.root.removeHandler(logging.root.handlers[0]) # Undo previous basicConfig
logging.basicConfig(format='same long format',
                    level=logging.DEBUG) 
```

然而，由于`logging.basicConfig`如果有现有的处理程序不做任何事情`logging.root`，这只是删除了流处理程序，留下哨兵处理程序，然后导致`basicConfig`作为空操作，这意味着我们完全失去了我们的 StreamHandler。

删除这些行并且只有一个`basicConfig`和一个`setup_logging`电话有效。

# sql - SQL Server 2012 协助加入

> ID：15673339
> 
> 赞同：-1
> 
> 时间：2013-03-28T02:41:45.200
> 
> 标签：sql, sql-server-2012

人力资源经理需要按姓氏、其家属名字和家属出生日期列出的员工名单。相关的输出列是employee 表中的emp_last_name 和依赖表中的dep_name 和dep_date_of_birth。使用别名表名。适当地命名每一列。按 emp_last_name 对结果表进行排序。使用 CAST 语句生成可轻松放入一页的列表。

到目前为止，我有这个：

```
SELECT emp_last_name"Employee Last Name", 
        dep_name"Dependent Name", 
       CAST(dep_date_of_birth as char(12))"Dependent Date of Birth"
from employee dependent
ORDER BY emp_last_name; 
```

但我不知道如何加入它，因为有这么多同姓的家属。不，这不是家庭作业。我正在自学 SQL Server，但遇到了一些问题。只是想从那些知道自己在做什么的人那里得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:08:03.833

您可以使用 JOIN

```
SELECT e.emp_last_name "Employee Last Name", 
        d.dep_name "Dependent Name", 
       CAST(d.dep_date_of_birth as char(12))"Dependent Date of Birth"
from employee e INNER JOIN dependent d ON e.emp_ssn = d.dep_emp_ssn
ORDER BY emp_last_name; 
```

或者，您可以像这样加入表格：

```
SELECT e.emp_last_name "Employee Last Name", 
        d.dep_name "Dependent Name", 
       CAST(d.dep_date_of_birth as char(12))"Dependent Date of Birth"
from employee e, dependent d 
WHERE e.emp_ssn = d.dep_emp_ssn
ORDER BY emp_last_name; 
```

如果您还想包括没有家属的员工，请使用 LEFT JOIN：

```
SELECT e.emp_last_name "Employee Last Name", 
        d.dep_name "Dependent Name", 
       CAST(d.dep_date_of_birth as char(12))"Dependent Date of Birth"
from employee e LEFT JOIN dependent d ON e.emp_ssn = d.dep_emp_ssn
ORDER BY emp_last_name; 
```

# python - python中的wordnet相似度计算

> ID：15673341
> 
> 赞同：0
> 
> 时间：2013-03-28T02:42:27.080
> 
> 标签：python, wordnet

我有*一个文件中的医学词汇*列表。我有一个推文列表，这些推文被*标记化并词形化为单词。*

我想检查*推文**中的单词与医疗文件中的*所有单词之间的相似性。我想检查*推文中的单词*与任何医学单词的接近程度。

以上可以实现吗？请帮助我完成上述所有可能的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:03:09.003

由于您的术语属于医学领域，因此您可能需要考虑使用 UMLS。UMLS::Similarity 可以帮助您找到医学术语之间的相似性。 [http://umls-similarity.sourceforge.net](http://umls-similarity.sourceforge.net)

祝你好运，特德

# python - 检查 eval(string) 是否在对象列表中。在 Python 中

> ID：15673344
> 
> 赞同：0
> 
> 时间：2013-03-28T02:42:33.913
> 
> 标签：python, string, object, eval

我有一个对象列表。我有一个用户输入的字符串。我需要检查字符串是否在对象列表中。

例如：

```
string = "book"
object_list = [book, paper, pencil]
if eval(string) in object_list:
  #do this, etc 
```

只要字符串在列表中，它就可以工作。如果字符串是别的东西，比如：string = 'ruler'

然后`if eval(string)...`语句给出错误： `NameError: 'ruler' is undefined.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:50:06.090

不要使用 eval - 只是嗯，要么创建一个 dict 映射，例如：

```
dispatch = {'book': book, ...} 
```

然后使用它并让回溯发生 - 更加可控......

或在最坏的情况下使用`globals()`：

```
if globals()[string] in object_list:
    # do something... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:46:51.787

如果您需要检查字符串是否在列表中，为什么不直接使用，

```
if string in object_list:
    #code 
```

# shell - tee 到压缩文件

> ID：15673359
> 
> 赞同：8
> 
> 时间：2013-03-28T02:44:23.100
> 
> 标签：shell, unix, tee, compression

tee 从标准输入读取并写入标准输出和文件。

```
some_command |& tee log 
```

tee 可以写入压缩文件吗？

```
some_command |& tee -some_option log.bz2 
```

如果 tee 不能这样做，还有其他命令吗？

我可以将输出重定向到压缩文件

```
some_command |& bzip2 > log.bz2 
```

但是使用此命令，标准输出的输出将丢失。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T05:34:04.230

如果你的 shell 是`bash`（4.x 版），你有['process substitution'](http://www.gnu.org/software/bash/manual/bash.html#Process-Substitution)，你可以使用：

```
some_command 2>&1 | tee >(bzip2 -c > log.bz2) 
```

这会将标准错误和标准输出重定向到`tee`（就像`|&`那样，但我更喜欢经典表示法）。的输出副本`tee`被发送到进程而不是文件；该过程`bzip2 -c > log.bz2`将其标准输入以压缩格式写入其标准输出。当然，输出的另一个（未压缩）副本直接进入标准输出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T02:50:53.937

如果您可以在 stderr 上输出输出，则可以重定向它：

```
some_command | tee /dev/stderr | bzip2 > log.bz2 
```

这会将输出发送到 stdout 和 stderr ( `| tee /dev/stderr`)。然后它将标准输出通过管道传输到 bzip2 ( `| bzip2 > log.bz2`)

# sql-server-2008 - 如何从完整路径创建父子层次结构

> ID：15673362
> 
> 赞同：0
> 
> 时间：2013-03-28T02:44:31.350
> 
> 标签：sql-server-2008, hierarchy, directory-structure

我在存储在 SQL Server 2008 中的表中有一个列，其中包含一些文档的完整路径。

我需要将路径转换为父子层次结构，如下所示。我需要这种结构，因为它是我使用它的第三方软件所必需的。

这是如何做到最优雅的？

从：

```
root/Dir1/Dir11/Dir3/Docname1.txt
root/Dir1/Dir12/Dir3/Docname2.txt
root/Dir1/Dir11/Docname3.txt
root/Dir1/Dir11/Dir31/Docname4.txt 
```

至：

```
[Value]                 [Parent]
Docname1.txt            root/Dir1/Dir11/Dir3    
root/Dir1/Dir11/Dir3    root/Dir1/Dir11
root/Dir1/Dir11         root/Dir1
root/Dir1               root

Docname2.txt            root/Dir1/Dir12/Dir3
root/Dir1/Dir12/Dir3    root/Dir1/Dir12
root/Dir1/Dir12         root/Dir1
root/Dir1               root

Docname3.txt            root/Dir1/Dir11
root/Dir1/Dir11         root/Dir1
root/Dir1               root

Docname4.txt            root/Dir1/Dir11/Dir31
root/Dir1/Dir11/Dir31   root/Dir1/Dir11
root/Dir1/Dir11         root/Dir1
root/Dir1               root 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:15:59.830

来自另一个网站的用户的回答：

[http://ask.sqlservercentral.com/questions/100704/how-to-create-a-parent-child-hierarchy-from-full-p.html#answer-100739](http://ask.sqlservercentral.com/questions/100704/how-to-create-a-parent-child-hierarchy-from-full-p.html#answer-100739)

# macos - 如何在 Mac 上远程添加可信证书（无需用户交互）

> ID：15673364
> 
> 赞同：4
> 
> 时间：2013-03-28T02:44:35.337
> 
> 标签：macos, security

是否可以在 Mac OS X 10.8.3 上远程添加可信证书？如果是这样，怎么做？

我目前的方法是使用下面的命令。是否可以对其进行调整，使其无需用户交互即可远程工作？

```
security add-trusted-cert foo.cer 
```

当我尝试上面的命令时，我得到`SecTrustSettingsSetTrustSettings: The authorization was denied since no user interaction was possible.`

我的情况：我正在使用的工具`/bin/sh -xe bar.sh`在目标机器上执行，我可以控制 [1] 它作为哪个用户执行以及 [2] 其内容`bar.sh`当前具有`security add-trusted-cert foo.cer`. 首先解锁钥匙串似乎不是答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:46:16.230

下面的命令有效，但密码可以被其他用户看到，`ps`甚至可能最终出现在命令行历史记录中。*如果有更好的答案可以避免此问题，我很可能会将其标记为已接受的答案。*

`echo "password" | sudo -S /usr/bin/security add-trusted-cert -d -r trustRoot -k /path/to/keychain /path/to/cert`

我从[http://www.bynkii.com/archives/2009/04/stupid_cert_tricks.html得到它](https://web.archive.org/web/20120324035705/http://www.bynkii.com/archives/2009/04/stupid_cert_tricks.html)

# loops - 这个 for 循环是如何工作的？它的目的是什么？

> ID：15673365
> 
> 赞同：0
> 
> 时间：2013-03-28T02:44:38.200
> 
> 标签：loops, for-loop

我是编程新手，从来没有遇到过这样的 for 循环。我最后一次使用 for 循环看起来像`for(I = 0, I<=x.length(); I++)`....所以我试图找出“：”在这个循环中的作用。

代码：

```
for (Cell cell : cl.board){    
    if(cell instanceof Ladder)
    ladders++;
    else if (cell instanceof Chute)
    chutes++;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:32:43.020

它在java中被称为“增强的”for循环。还有一个“for each”循环。

```
for(Cell c:board){
  // do something
} 
```

读作“对于”中的每个元素（`c`即 a `Cell`）`board`

等效的是：

```
for(int i=0;i<board.length;i++){ // assuming board is an array
    Cell c = board[i];
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:51:58.700

您应该指定编写代码的语言。无论如何，假设这是例如 JAVA，我想你可以看看[http://www.leepoint.net/notes-java/flow/loops/foreach.html](http://www.leepoint.net/notes-java/flow/loops/foreach.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:52:17.007

这称为**foreach**循环。它的意思是：

对于列表对象**cl.board中的每个****Cell**类型的对象，请执行以下操作：

 ****if(cell instanceof Ladder) ladders++; else if (cell instanceof Chute) chutes++;**

这仅在**cl.board**是单元格列表时才有效。

欲了解更多信息：[http ://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T02:53:33.460

这是一个 foreach 循环。它不使用索引，而是从集合/数组/映射中一个一个地获取孩子。如果您不需要索引，则可以使用迭代内容`foreach`**

# vb.net - 打印列表框中的内容

> ID：15673366
> 
> 赞同：0
> 
> 时间：2013-03-28T02:44:38.447
> 
> 标签：vb.net

我试图在程序运行后打印我的列表框中的内容（输入的课程，总小时数，数量点，总 GPA）。它正在打开我的打印机选项，但每次都打印一个空白页......

```
Public Class Form1

Dim QualityPoints As Double
Dim CourseName, hours As String

Private Sub btnTotalHours_Click(sender As Object, e As EventArgs) Handles btnTotalHours.Click

    txtBoxTotalHours.Text = NumericUpDown1.Value + NumericUpDown2.Value + NumericUpDown3.Value + NumericUpDown4.Value + NumericUpDown5.Value + NumericUpDown6.Value + NumericUpDown7.Value + NumericUpDown8.Value

End Sub

Private Sub btnTotalQualityPoints_Click(sender As Object, e As EventArgs) Handles btnTotalQualityPoints.Click

    Select Case txtBoxGrade1.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown1.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown1.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown1.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown1.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown1.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown1.Value)

    End Select

    Select Case txtBoxGrade2.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown2.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown2.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown2.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown2.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown2.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown2.Value)

    End Select

    Select Case txtBoxGrade3.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown3.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown3.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown3.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown3.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown3.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown3.Value)

    End Select

    Select Case txtBoxGrade4.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown4.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown4.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown4.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown4.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown4.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown4.Value)

    End Select

    Select Case txtBoxGrade5.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown5.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown5.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown5.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown5.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown5.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown5.Value)

    End Select

    Select Case txtBoxGrade6.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown6.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown6.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown6.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown6.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown6.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown6.Value)

    End Select

    Select Case txtBoxGrade7.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown7.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown7.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown7.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown7.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown7.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown7.Value)

    End Select

    Select Case txtBoxGrade8.Text
        Case "A"
            QualityPoints += (4 * NumericUpDown8.Value)
        Case "B"
            QualityPoints += (3 * NumericUpDown8.Value)
        Case "C"
            QualityPoints += (2 * NumericUpDown8.Value)
        Case "D"
            QualityPoints += (1 * NumericUpDown8.Value)
        Case "F"
            QualityPoints += (0 * NumericUpDown8.Value)
        Case " "
            QualityPoints += (0 * NumericUpDown8.Value)

    End Select

    txtBoxTotalQualityPoints.Text = QualityPoints

End Sub

Private Sub btnClear_Click(sender As Object, e As EventArgs) Handles btnClear.Click

    txtBoxCourse1.Clear()
    txtBoxCourse2.Clear()
    txtBoxCourse3.Clear()
    txtBoxCourse4.Clear()
    txtBoxCourse5.Clear()
    txtBoxCourse6.Clear()
    txtBoxCourse7.Clear()
    txtBoxCourse8.Clear()

    txtBoxGrade1.Clear()
    txtBoxGrade2.Clear()
    txtBoxGrade3.Clear()
    txtBoxGrade4.Clear()
    txtBoxGrade5.Clear()
    txtBoxGrade6.Clear()
    txtBoxGrade7.Clear()
    txtBoxGrade8.Clear()

    txtBoxTotalGPA.Clear()
    txtBoxTotalHours.Clear()
    txtBoxTotalQualityPoints.Clear()

    NumericUpDown1.Value = 0
    NumericUpDown2.Value = 0
    NumericUpDown3.Value = 0
    NumericUpDown4.Value = 0
    NumericUpDown5.Value = 0
    NumericUpDown6.Value = 0
    NumericUpDown7.Value = 0
    NumericUpDown8.Value = 0

    lstBoxResults.Items.Clear()

End Sub

Private Sub btnCalculate_Click(sender As Object, e As EventArgs) Handles btnCalculate.Click

    Dim semester As String
    Dim totalGPA As Double = QualityPoints / txtBoxTotalHours.Text

    semester = CStr(lstBoxResults.Text)
    txtBoxTotalGPA.Text = CStr(totalGPA)
    txtBoxTotalGPA.Text = Math.Round(totalGPA, 3)

    If radButtonFall.Checked Then

        semester = "Fall"

    ElseIf radButtonSpring.Checked Then

        semester = "Spring"

    ElseIf radButtonSummer.Checked Then

        semester = "Summer"

    End If

    lstBoxResults.Items.Add(semester & " " & "Semester : ")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Total Hours : " & txtBoxTotalHours.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Total Qualit Points : " & txtBoxTotalQualityPoints.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Total " & semester & " " & "GPA : " & txtBoxTotalGPA.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Enrolled Courses : ")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse1.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse2.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse3.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse4.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse5.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse6.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse7.Text)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add(txtBoxCourse8.Text)

End Sub

Private Sub btnQuit_Click(sender As Object, e As EventArgs) Handles btnQuit.Click

    End

End Sub

Private Sub PrintDocument1_PrintPage(sender As Object, e As Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage

    Dim font1 As New Font("Arial", 16, FontStyle.Regular)
    e.Graphics.DrawString(lstBoxResults.Text, font1, Brushes.Black, 100, 100)

End Sub

Private Sub btnPrint_Click(sender As Object, e As EventArgs) Handles btnPrint.Click

    PrintDialog1.ShowDialog()
    PrintDocument1.Print()

End Sub 
```

结束类

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:30:28.467

试试这个教程[http://www.knowdotnet.com/articles/printform.html](http://www.knowdotnet.com/articles/printform.html) 这都是关于打印的。你的问题只打印空白导致你的 print_Page 仍然没有得到任何对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:58:36.697

虽然这不能帮助您打印，但您应该将您`Select Case`的 s 替换为以下内容

在班级层面：

```
Private GradeToValue As New Dictionary(Of String, Integer) _
    From {{"A", 4}, {"B", 3}, {"C", 2}, {"D", 1}, {"F", 0}, {" ", 0}} 
```

在您的按钮处理程序中：

```
QualityPoints += (GradeToValue(txBoxGrade1.Text) * NumericUpDown1.Value)
QualityPoints += (GradeToValue(txBoxGrade2.Text) * NumericUpDown2.Value)
' etc. 
```

# mysql - 关于mysql中的表设计还是选择Hbase

> ID：15673373
> 
> 赞同：0
> 
> 时间：2013-03-28T02:45:19.327
> 
> 标签：mysql, database-design, hbase

我们的产品应用场景是这样的：

1.  存储信息。
2.  统计使用数约为8000万。
3.  用户有很多属性，大约 100 万。属性可能有许多不同的类型：Date、Boolean、Long、Int .... 或 Null。

我们对这些信息所做的事情是这样的：

1.  获取一个用户的信息（多个属性）</li>
2.  从计算属性中选择用户。例如：查找其用户`propertyA>10 && propertyB=true &&...`

现在，我们使用的是 Hbase 之类的宽列表，但我认为它可能不适合。当我们拿到一个或几个用户的信息时，经常会发生timeout，所以我们在中间放了一个缓存，但是不能把所有的信息都放到缓存中，然后timeout还在！所以，我认为也许 hbase 不是最好的机会，因为我们的数据不是太大而无法使用 hbase？如果我们选择mysql？

如何解决我们的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:37:33.467

在得出任何结论之前，您需要分析一些事情，其中​​一些是：

1.  你的数据有多大？就记录数量而言没有，但就数据文件的大小而言？
2.  您正在使用哪种 HBase 安装？它是独立的还是集群的？
3.  从 HBase 调用 get/scan 是否超时？

IMO，如果 HBase 不能给你任何好的性能结果，那么它不会降低性能。但是，是的，任何 NoSQL 数据库的真正用途都将在数据成倍增加的集群环境中使用。

如果您想使用 mysql 或任何其他 RDBMS，那么您必须考虑数据库集群、表分片、负载平衡和在应用程序级别实现缓存。

总的来说，我认为您应该查看 HBase 的安装并尝试针对您的应用程序对其进行调整。

# iphone - AVAssetWriterInput H.264 Passthrough to QuickTime (.mov) - 传入 SPS/PPS 以创建 avcC atom？

> ID：15673379
> 
> 赞同：7
> 
> 时间：2013-03-28T02:46:08.267
> 
> 标签：iphone, ios, avfoundation, h.264, avassetwriter

我有一个由类型 1（P 帧）、5（I 帧）、7（SPS）和 8（PPS）组成的 H.264/AVC NAL 流。我想将它们写入 .mov 文件而不重新编码。我正在尝试使用它`AVAssetWriter`来执行此操作。状态的文档`AVAssetWriterInput`：

> 为 outputSettings 传递 nil 指示输入通过附加的样本，在将它们写入输出文件之前不进行任何处理。例如，如果您要附加已采用所需压缩格式的缓冲区，这将很有用。但是，目前仅在写入 QuickTime 电影文件时才支持直通（即 AVAssetWriter 是使用 AVFileTypeQuickTimeMovie 初始化的）。对于其他文件类型，您必须指定非零输出设置。

我正在尝试从这些 NAL 中创建 CMSampleBuffers 并将它们附加到资产编写器输入中，但是我无法以产生格式良好的 .mov 文件的方式输入数据，而且我在任何地方都找不到任何线索关于如何做到这一点。

到目前为止，我得到的最好结果是以附件 B 字节流格式（按 7 8 5 1 1 1....重复的顺序）传递 NAL，并在 VLC 中播放结果。因此，我知道 NAL 包含有效数据，但由于 .mov 文件没有 avcC 原子并且 mdat 原子填充了附件 B 字节流，QuickTime 不会播放视频。

现在我正在尝试使用 4 字节（由`lengthSizeMinusOne`字段指定）长度字段而不是附件 B 分隔符传入 NAL，据我所知，这就是它们应该被打包到 mdat 原子中的方式.

我不知道如何让资产编写者编写 avcC 原子。我添加的每个样本都会被推入 mdat 原子。

**有谁知道我如何将原始 H.264 数据传递到配置为通过（nil outputSettings）的 AVAssetWriterInput 并让它生成正确格式的 QuickTime 文件？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T23:16:02.787

我已经向苹果提交了一份 TSI 并找到了答案。我希望这可以节省将来的时间。

CMSampleBuffers 与它们关联了一个 CMFormatDescription，其中包含对样本缓冲区中数据的描述。

创建格式描述的函数原型如下：

```
OSStatus CMVideoFormatDescriptionCreate (
  CFAllocatorRef allocator,
  CMVideoCodecType codecType,
  int32_t width,
  int32_t height,
  CFDictionaryRef extensions,
  CMVideoFormatDescriptionRef *outDesc
); 
```

我从 Apple 技术人员那里了解到，我可以使用 extensions 参数传入包含 avcC atom 数据的字典。

扩展字典应采用以下形式：

```
[kCMFormatDescriptionExtension_SampleDescriptionExtensionAtoms ---> ["avcC" ---> <avcC Data>]] 
```

[] 代表字典。除了 avcC 之外，该字典还可以潜在地用于传递任意原子的数据。

这是我用来创建`extensions`我传入的字典的代码`CMVideoFormatDescriptionCreate`：

```
 const char *avcC = "avcC";
    const CFStringRef avcCKey = CFStringCreateWithCString(kCFAllocatorDefault, avcC, kCFStringEncodingUTF8);
    const CFDataRef avcCValue = CFDataCreate(kCFAllocatorDefault, [_avccData bytes], [_avccData length]);
    const void *atomDictKeys[] = { avcCKey };
    const void *atomDictValues[] = { avcCValue };
    CFDictionaryRef atomsDict = CFDictionaryCreate(kCFAllocatorDefault, atomDictKeys, atomDictValues, 1, nil, nil);

    const void *extensionDictKeys[] = { kCMFormatDescriptionExtension_SampleDescriptionExtensionAtoms };
    const void *extensionDictValues[] = { atomsDict };
    CFDictionaryRef extensionDict = CFDictionaryCreate(kCFAllocatorDefault, extensionDictKeys, extensionDictValues, 1, nil, nil); 
```

# class - TypeScript“使用”/类的别名

> ID：15673382
> 
> 赞同：3
> 
> 时间：2013-03-28T02:46:21.790
> 
> 标签：class, module, alias, typescript

有没有办法为 TypeScript 类/模块做一个别名或“使用”（如 PHP）。

例子：

如果我有：

```
module Foo {
    class Bar {}
} 
```

通常我必须编写`Foo.Bar`才能在模块之外使用它。有没有办法可以将其别名为其他东西，例如“FooBar”。

如果您有几个子模块（我当前的项目有），这将非常有用，例如：

模块 ABCD { 出口类 E {} }

通常`A.B.C.D.E`是愚蠢的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T00:52:23.153

根据旧 Typescript 语言规范的第 82 页，它指出以下是可能的。因此，您应该能够对“使用”模块进行别名，而不必引用整个层次结构。

```
module A.B.C
{
  import XYZ = X.Y.Z;

  export function ping(x: number) {
    if (x > 0) XYZ.pong(x – 1);
  }
}

module X.Y.Z
{
  import ABC = A.B.C;

  export function pong(x: number) {
    if (x > 0) ABC.ping(x – 1);
  }
} 
```

新的 Typescript 语言规范涵盖了[导入别名声明部分中的类似材料](https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#103-import-alias-declarations)

# c++ - 什么是'-1.#IND'？

> ID：15673389
> 
> 赞同：3
> 
> 时间：2013-03-28T02:47:08.557
> 
> 标签：c++, floating-point

我有一些代码可以让我绘制新月形状，并提取了要绘制的 excel 值。然而，代替一些数字，有一些数字`-1.#IND`。首先，如果有人能解释这意味着什么，因为谷歌返回了 0 个链接。其次，如果有办法阻止它发生。

我的代码有一个简短的类比。除此之外，我还有更多代码，但这只是计算角度。

```
for(int j=0; j<=n; j++)//calculation for angles and output displayed to user
{
    Xnew2 = -j*(Y+R1)/n; //calculate x coordinate
    Ynew2 = Y*(pow(1-(pow((Xnew2/X),2)),0.5));
    if(abs(Ynew2) <= R1)
        cout<<"\n("<<Xnew2<<", "<<Ynew2<<")"<<endl;
} 
```

更多信息

我现在遇到此代码的问题。

```
for(int i=0; i<=n; i++) //calculation for angles and output displayed to user
{                                          
    Xnew = -i*(Y+R1)/n; //calculate x coordinate
    Ynew = pow((((Y+R1)*(Y+R1)) - (Xnew*Xnew)), 0.5); //calculate y coordinate 
```

和

```
for(int j=0; j<=n; j++)//calculation for angles and output displayed to user
{
    Xnew2 = -j*(Y+R1)/((n)+((0.00001)*(n==0))); //calculate x coordinate
    Ynew2 = Y*(pow(abs(1-(pow((Xnew2/X),2))),0.5));
    if(abs(Ynew2) <= R1)
        cout<<"\n("<<Xnew2<<", "<<Ynew2<<")"<<endl; 
```

我在绘制新月时遇到问题，我无法让两个圆圈具有相同的起点？如果这是有道理的，我试图让两个部分的圆圈来绘制一个新月，这样它们就具有相同的起点和终点。我必须使用的唯一用户输入是半径和选择的中心点。

如果有人对如何做到这一点有任何建议，那就太好了，由于圆圈没有连接，目前我正在获得更多的“半甜甜圈”形状。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T02:59:08.267

`#IND`表示不确定的形式。

你所拥有的是被称为`'Not a number'`或简称为[NaN](http://en.wikipedia.org/wiki/NaN)的东西。

引用维基百科，生成由以下人员完成：

> *   以 NaN 作为至少一个操作数的操作。
> *   分割 0/0 和 ±∞/±∞</li>
> *   乘法 0×±∞ 和 ±∞×0
> *   加法 ∞ + (−∞)、(−∞) + ∞ 和等效减法
> *   负数的平方根。
> *   负数的对数
> *   小于 -1 或大于 +1 的数的反正弦或余弦。

你至少在做这些事情中的一件。

**编辑：**

分析您的代码后，有两种可能性：

*   当`n == 0`在第一次迭代中时`j == 0`，`Xnew2`将是`-1.#IND`
*   当`Xnew2`大于时`X`，`Ynew2`将是复杂的 ->`NaN`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T02:57:37.573

您正在对浮点数执行非法操作，例如取负数的平方根。这大概是在 Windows 上。在 Linux 上，您会得到 NaN（不是数字）或 inf。有关详细信息，请参阅[-1 #IND 问题](https://stackoverflow.com/questions/5412768/1-ind-question)；第二个答案中提供的链接很有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T02:58:33.563

这来自 IEEE 754 Nan 的维基百科条目：

> 可以返回 NaN 的操作有以下三种：
> 
> ```
> Operations with a NaN as at least one operand.
> Indeterminate forms
>     The divisions 0/0 and ±∞/±∞
>     The multiplications 0×±∞ and ±∞×0
>     The additions ∞ + (−∞), (−∞) + ∞ and equivalent subtractions
>     The standard has alternative functions for powers:
>         The standard pow function and the integer exponent pown function define 00, 1∞, and ∞0 as 1.
>         The powr function defines all three indeterminate forms as invalid operations and so returns NaN.
> 
> Real operations with complex results, for example:
>     The square root of a negative number.
>     The logarithm of a negative number
>     The inverse sine or cosine of a number that is less than −1 or greater than +1. 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T03:00:07.733

您将负数提高到非倒数的幂（即 1/2、0.5、0.25、0.333333 等），结果为复数。就像 sqrt(-1) 又名 (-1)^(0.5)

此外，您还可以在两行代码中将 0/0 等同起来。

请改用此代码：（它采用您的幂基数的绝对值（防止负值，从而防止虚构答案（复数 = NaN = -1.#IND））如果 n == 0，它还可以防止您除以 0 ...在这种情况下，它会将 0.00001 添加到分母

```
for(int j=0; j<=n; j++)//calculation for angles and output displayed to user
{
Xnew2 = -j*(Y+R1)/((n)+((0.00001)*(n==0)); //calculate x coordinate
Ynew2 = Y*(pow(abs(1-(pow((Xnew2/X),2))),0.5));
if(abs(Ynew2) <= R1)
cout<<"\n("<<Xnew2<<", "<<Ynew2<<")"<<endl;
}
{
Xnew3 = -j*(Y+R1)/((n)+((0.00001)*(n==0));  //calculate x coordinate
Ynew3 = Y*(pow(abs(1-(pow((Xnew3/X),2))),0.5)); //calculate y coordinate
if(abs(Ynew3) <= R1)
cout<<"\n("<<Xnew3<<", "<<Ynew3<<")"<<endl; //show x,y coordinates
} 
```

*将来避免对负数求根（这与将负数提高到非反分数幂相同），避免对负数取对数，避免除以 0 这些都产生 NaN (- 1.#IND)

这段代码可能会更好（它使用条件值来使你的幂的基数为零，如果它小于零以防止虚构的答案）：

```
for(int j=0; j<=n; j++)//calculation for angles and output displayed to user
{
Xnew2 = -j*(Y+R1)/((n)+((0.00001)*(n==0)); //calculate x coordinate
Ynew2 = Y*(pow(((1-(pow((Xnew2/X),2)))*((1-(pow((Xnew2/X),2)))>(0))),0.5));
if(abs(Ynew2) <= R1)
cout<<"\n("<<Xnew2<<", "<<Ynew2<<")"<<endl;
}
{
Xnew3 = -j*(Y+R1)/((n)+((0.00001)*(n==0));  //calculate x coordinate
Ynew3 = Y*(pow(((1-(pow((Xnew3/X),2))))*((1-(pow((Xnew3/X),2))))>(0))),0.5)); //calculate y coordinate
if(abs(Ynew3) <= R1)
cout<<"\n("<<Xnew3<<", "<<Ynew3<<")"<<endl; //show x,y coordinates
} 
```

*******我还想指出他的回答中提到的“Magtheridon96”。现在的代码确保 n 不等于零，否则您可能会被零除，尽管我认为这会产生 #INF 而不是 #IND... 除非“-j* (Y+R1)”也为零，否则它将为 0/0，这将是 #IND*

# python - opencv安装中的python错误

> ID：15673393
> 
> 赞同：0
> 
> 时间：2013-03-28T02:48:09.730
> 
> 标签：python, opencv, build, cmake

我正在尝试在 Linux 中安装 opencv 库，但在 python 脚本生成的日志中出现以下错误：

```
Traceback (most recent call last):
  File "/tmcleod/opencv-2.4.4/modules/java/generator/gen_javadoc.py", line 257, in ?
    import hdr_parser
  File "/tmcleod/opencv-2.4.4/modules/java/generator/../../python/src2/hdr_parser.py", line 641
    decl[1] = ": " + ", ".join([b if "::" in b else self.get_dotted_name(b).replace(".","::") for b in bases])
                                   ^
SyntaxError: invalid syntax 
```

这是生成文件中导致错误的命令：

```
cd /tmcleod/opencv-2.4.4/release/modules/java && /usr/bin/python2 /tmcleod/opencv-2.4.4/modules/java/generator/gen_javadoc.py --modules core,imgproc,objdetect,features2d,video,highgui,ml,calib3d,photo,contrib /tmcleod/opencv-2.4.4/modules/java/generator/src/java /tmcleod/opencv-2.4.4/release/modules/java 2>"/tmcleod/opencv-2.4.4/release/modules/java/get_javadoc_errors.log" 
```

我不知道为什么我需要在安装 C++ 库时生成 java 文档，但问题是导致构建失败。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:24:41.287

这里的问题是 cmake 找到了不理解这个结构的旧版本（2.4）的 python 可执行文件。解决方法是将 cmake 传递给 python 的路径。从 opencv 提取目录：

```
$ mkdir release
$ cd release
$ cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=./build -D PYTHON_EXECUTABLE=/tmcleod/Python-2.7.3/python ..
$ make
$ make install 
```

# vba - Outlook 2007 多选文件夹

> ID：15673394
> 
> 赞同：1
> 
> 时间：2013-03-28T02:48:30.817
> 
> 标签：vba, outlook

第一次问题：D。

我一直在为 Outlook 2007 编写一个 Marco，让用户选择一个文件夹，然后使用该文件夹将所有邮件项目移出它并将其移动到个人 Arhcive 文件夹，其中使用所选文件夹名称作为个人文件夹下的目标.

例如

用户选择一个名为“Test”的随机文件夹

marco 将被预先映射到个人文件夹，然后它会找到具有相同名称的子文件夹并移动邮件项目。

我的问题：

我目前正在使用'. **PickFolder** '语法让用户选择文件夹，我要做的是有一个多选文件夹表单：

*   我将如何使用组合框和列表框表单让所有 fodler 的 Mapi 出现在自定义表单中。

我知道这只会在一个级别上，但这就是我所需要的，因为 200 多个文件夹都在一个级别上。

正如代码一样，它一次可以与一个文件夹一起出色地工作，但我希望提高反.

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:49:14.407

我已经解决了获取完整文件夹列表（下面的代码）的问题，但是如果您在其他部分需要更多帮助，请添加评论，我将扩展我的答案。

我不明白你会用 ComboBox 做什么。因此，对于这个示例，我创建了一个表单并添加了一个 ListBox（称为`ListBox1`）。下面的代码将使用从选定文件夹向下的所有文件夹的名称填充列表框。请阅读评论以了解您还能做什么（例如通过子文件夹递归 - 我知道在这种情况下不需要这样做）。

如果您需要更多帮助或信息，请告诉我。

```
Private Sub PopulateListBoxWithFolders()

    Dim objApp As Outlook.Application
    Dim objNamespace As Outlook.NameSpace
    Dim objFolder As Outlook.MAPIFolder

    ' Clear current contents of listbox
    ListBox1.Clear

    Set objApp = New Outlook.Application

    Set objNamespace = objApp.GetNamespace("MAPI")

    ' Allow user to select folder.
    ' Replace this with either objNamespace.GetDefaultFolder(...) or objNamespace.GetFolderFromID(...)
    ' to avoid the user having to select a folder
    Set objFolder = objNamespace.PickFolder

    ' See if the user cancelled or no folder found
    If Not objFolder Is Nothing Then
        ' Addition of true here recurses through all subfolders
        ProcessFolder objFolder ', True
    End If

End Sub

' Populates the ListBox with the folders. Optionally you can recurse all folders
Sub ProcessFolder(objStartFolder As Outlook.MAPIFolder, Optional blnRecurseSubFolders As Boolean = False, Optional strFolderPath As String = "")

    Dim objFolder As Outlook.MAPIFolder

    Dim i As Long

     ' Loop through the items in the current folder
    For i = 1 To objStartFolder.Folders.Count

        Set objFolder = objStartFolder.Folders(i)

        ' Populate the listbox
        ListBox1.AddItem ListBox1.Text + objFolder.FolderPath

        If blnRecurseSubFolders Then
            ' Recurse through subfolders
            ProcessFolder objFolder, True, strFolderPath + "\" + objFolder.FolderPath
        End If
    Next

End Sub 
```

如果您需要代码来识别多选 ListBox 中的选定项目，那就是这里。要使 ListBox 多选，您应该将`MultiSelect`表单编辑器中的属性设置为`1 - fmMultiSelectMulti`

```
Private Sub btnOK_Click()
    Dim i As Long

    ' Loop through all items in the listbox identifying those that are selected
    With ListBox1
        For i = 0 To .ListCount - 1
            If .Selected(i) Then
                ' Here goes the code to act on the selected item
                ' In the example below it outputs to the Immediate window
                Debug.Print .List(i)
            End If
        Next i
    End With

End Sub 
```

# awk - awk 输入文件中最后一个字段至少包含一个大写字母的所有行

> ID：15673395
> 
> 赞同：1
> 
> 时间：2013-03-28T02:48:35.840
> 
> 标签：awk, capslock

我在这里有一些实时的家庭作业。作为尽职调查，我在过去 2.30 小时内浏览网页并阅读 awk 教程以找到解决方案，毫无希望。这是我想出的那一行：

awk '/[AZ]/ {print $NF}' < tweedle.txt （Tweedle.txt 是一首诗）

**电流输出：**

```
Tweedledee
Tweedledee
battle;
Tweedledee
rattle.
crow,
tar-barrel;
so,
quarrel. 
```

**预期输出** - 以大写开头的最后一个字段

```
Tweedledee
Tweedledee
Tweedledee 
```

只打印大写和小写的最后一个字段。

需要你们的专业知识。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:16:22.087

干得好：

```
awk '$NF ~ /[A-Z]/' < tweedle.txt 
```

内容为：接受其`NF`^(th)字段与 regex 匹配的所有行`/[A-Z]/`。awk 的默认操作是只打印该行，这就是我假设您想要做的。

如果您只想打印最后一个字段包含至少一个大写字母的所有行的最后一个字段（您的问题并没有说得很清楚），

```
awk '$NF ~ /[A-Z]/ {print $NF}' < tweedle.txt 
```

顺便说一句，我是这样测试的：

```
faiz@strange-love:/tmp$ cat tweedle.txt 
a b aBoo
c D
a x y
G
j h g
faiz@strange-love:/tmp$ awk '$NF ~ /[A-Z]/ {print $NF}'  tweedle.txt 
aBoo
D
G
faiz@strange-love:/tmp$ awk '$NF ~ /[A-Z]/'  tweedle.txt 
a b aBoo
c D
G 
```

提供这样的东西真的会让我们更好地理解你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:34:55.520

像这样：

```
 awk '$NF ~ /^[A-Z]/{print $NF}' tweedle.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:16:07.300

在没有看到您的输入文件的情况下，有许多可能的解决方案：

```
awk '$NF~/^[A-Z]/ && $0=$NF' file 
```

或（从您的“当前输出”，这条线也适用）：

```
awk '/[a-z]$/' file 
```

# android - 在android中切换标签但内容不变

> ID：15673396
> 
> 赞同：0
> 
> 时间：2013-03-28T02:48:37.050
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有类 CustomTab 扩展 TabActivity：

```
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.custom_tab);

tabHost = getTabHost();

Intent intentA = new Intent(getBaseContext(), A.class);
Intent intentB = new Intent(getBaseContext(), B.class);
Intent intentC = new Intent(getBaseContext(), C.class);

TabSpec tabA = tabHost
        .newTabSpec("a")
        .setIndicator("",
                getResources().getDrawable(R.drawable.icon_a))
        .setContent(intentA);
TabSpec tabB = tabHost
        .newTabSpec("b")
        .setIndicator(
                "",
                getResources()
                        .getDrawable(R.drawable.icon_b))
        .setContent(intentB);
TabSpec tabC = tabHost
        .newTabSpec("c")
        .setIndicator("",
                getResources().getDrawable(R.drawable.icon_c))
        .setContent(intentC);

tabHost.addTab(tabA);
tabHost.addTab(tabB);
tabHost.addTab(tabC);
tabHost.setCurrentTab(0); 
```

和活动 B：

```
Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.b);

((CustomTab) getParent()).getTabHost().setCurrentTab(3); 
```

我想在运行活动 B 时切换到选项卡 3（活动 C）所以我尝试使用“（（CustomTab）getParent（））.getTabHost（）.setCurrentTab（3）;” 它只改变标签，但内容没有改变，我创建了一个类似但没有收到正确答案的主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:18:38.503

我再次调用 TabActivity 来管理这些东西。

在`TabActivity`

```
int tabNumber = getIntent().getExtras().getInt("tabNumber");
tabHost.setCurrentTab(tabNumber); 
```

并像这样在子 Activity 中调用 TabActivity，就像您的 Activity B 一样，

```
Intent intent = new Intent(BActivity.this,
                            CustomTab.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    intent.putExtra("tabNumber",3);
                    startActivity(intent); 
```

不要为此没有正确的解决方案。但我没有任何其他解决方案。所以，我用了这个。

# java - 如何覆盖 equals 和 tostring 方法

> ID：15673403
> 
> 赞同：0
> 
> 时间：2013-03-28T02:49:47.217
> 
> 标签：java

我试图弄清楚这是如何工作的。我知道这些方法存储在 java.lang.Object 中，但我不知道如何在代码中覆盖它们。这是我设计的一个小程序来测试我的理解（这是不对的）。

地址测试器：

```
import java.util.ArrayList;
import java.util.Scanner;

public class AddressTester
{

    public static void main(String[] args)
    {

        Address home = new Address("123 Loving Fat Girl ln", "Dollywood", "NY",
                "98765");

        Scanner in = new Scanner(System.in);

        System.out.println("-- Enter your home address --");
        System.out.println("123 Loving Fat Girl ln, Dollywood, NY, 98765");

        System.out.print("Enter the street address: ");
        String addr = in.nextLine();

        System.out.print("Enter the city: ");
        String city = in.next();

        System.out.print("Enter the state: ");
        String state = in.next();

        System.out.print("Enter the zipcode: ");
        String zipcode = in.next();

        Address enteredAddress = new Address(addr, city, state, zipcode);

        System.out.println(enteredAddress);

        if (home.equals(enteredAddress))
        {
            System.out.println("You are correct!");
        }
        else
        {
            System.out.println("You are incorrect!");
        }

        ArrayList<Address> addresses = new ArrayList<Address>();
        addresses.add(home);

        if (addresses.contains(enteredAddress))
        {
            System.out.println("The address wasn't found");
        }
        else
        {
            System.out.println("The address was found");
        }

    }

} 
```

地址：

```
public class Address
{
    private String address;
    private String city;
    private String state;
    private String zipcode;

    public Address(String address, String city, String state, String zipcode)
    {
        this.address = address;
        this.city = city;
        this.state = state;
        this.zipcode = zipcode;

    }

    public boolean equals(Object otherObject)
    {
        if(otherObject == this)
        {
            return true;
        }
        if(otherObject != this)
        {
            return false;
        }
        return true;
    }

    public String getAddress()
    {
        return address;
    }

    public void setAddress(String addr)
    {
        this.address = addr;
    }

    public String getCity()
    {
        return city;
    }

    public void setCity(String city)
    {
        this.city = city;
    }

    public String getState()
    {
        return state;
    }

    public void setState(String state)
    {
        this.state = state;
    }

    public String getZipcode()
    {
        return zipcode;
    }

    public void setZipcode(String zipcode)
    {
        this.zipcode = zipcode;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:11:26.247

在这个例子中，我覆盖了 hashCode、toString 和 equals。我的标准是 equals 应该使用 SomeClass 的 someAttribute 在所述类实例之间定义 de equals() 。HashCode 应该以相同的方式与 equals 一起重新定义。

```
@Override
public String toString() {
     return "SomeClass [attribute=" + someAttribute + "]";
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + someAttribute;
    return result;
}
@Override
public boolean equals(Object obj) {
    if (obj == null)
        return false;       
    if (this == obj)
        return true;

    if (getClass() != obj.getClass())
        return false;
    SomeClass other = (SomeClass) obj;
    if (someAttribute != other.someAttribute)
        return false;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:54:42.717

您只是在检查身​​份，这并不是您真正想要的。看看这个关于实现 equals() 的好[参考](http://www.javapractices.com/topic/TopicAction.do?Id=17)：正如他们提到的

> equals 通常应该比较状态，而不是身份。对于映射到数据库记录的“以数据为中心”的类尤其如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:53:40.050

这种问题已经回答了无数次了。

如果您使用的是 Eclipse IDE，它默认为您提供生成、equals、hashCode 和 toString 函数的功能。

您还必须在 equals 方法中使用某种类变量进行比较。

请进行谷歌搜索，以被关于该主题的无数结果所震撼

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:01:54.433

`==`运算符在应用于 的实例时，检查是否在对*同一实例*的`Object`两个引用之间进行比较。如果创建了具有相同地址、城市、州和邮政编码的两个实例，则运算符将在用于比较这两个不同实例时返回。您需要使用一个函数覆盖on以显式检查 4 个字段中的每一个是否匹配，并在这种情况下返回。*`Object``Address``==``false``equals()``Address``true`*

 *构建一个声音`equals()`覆盖的实现很难正确，您绝对应该查看其他海报提供的链接。*

# magento - Magento 如何显示/列出目录类别平面表中的所有类别

> ID：15673406
> 
> 赞同：1
> 
> 时间：2013-03-28T02:50:00.567
> 
> 标签：magento, magento-1.7

我已将“使用平面目录类别”和“使用平面目录产品”启用为“是”以获得更好的性能。但是在启用此选项后，我之前获取所有子类别列表的 cms 页面之一不再工作。我在启用平面数据之前获取子类别的代码是：

```
$_category = Mage::getModel('catalog/category')->load(CATEGORY-ID);    
$_categories = $_category->getCollection()->addAttributeToSelect(array('url_key','name','image','all_children','is_anchor','description'))
                ->addAttributeToFilter('is_active', 1)
                ->addIdFilter($_category->getChildren())
                ->setOrder('position', 'ASC')
                ->joinUrlRewrite(); 
```

注意：我已经检查过，我的两个平面数据表都已成功填充。如果我将“使用平面目录类别”选项更改为“否”，此代码仍然有效。现在，获取类别列表及其子类别的代码应该是什么，因为它可以从“catalog_category_flat_store_*”表中提取数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:23:46.227

在这里，我得到了这段代码

```
 $_category = Mage::getModel('catalog/category')->load(CATEGORY-ID);    
    $_categories = $_category
                    ->getCollection()
                    ->addAttributeToSelect(array('name', 'image', 'description'))
                    ->addIdFilter($_category->getChildren());

    foreach ($_categories as $_category):
       echo $_category->getName();
    endforeach; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:03:17.077

只需删除过滤器并检查。

->addAttributeToFilter('is_active', 1) ->addIdFilter($_category->getChildren())

还做一个 getselect 并检查生成了什么 sql 查询。

以上两个将提供进一步的提示。在此处发布以供进一步评论。

# macos - 在 Mac OS X 10.6.8 上更新 m4

> ID：15673414
> 
> 赞同：2
> 
> 时间：2013-03-28T02:51:00.733
> 
> 标签：macos, m4

我正在尝试将 m4 从版本 1.4.6（OS X 10.6.8 附带的版本）升级到 1.4.16。我已经安装了自制软件，并且我还从源代码构建到 /usr/local/ （并编辑了 /etc/paths 以将 /usr/local 放在 /usr 之上），但系统版本似乎仍然优先。

具体来说，如果我输入`m4 --version', I get`GNU M4 1.4.6 `, but if I type`/usr/local/bin/m4 --versoin `, I get`m4 (GNU M4) 1.4.16 `。如何将新版本设置为默认版本？

...最后，我想更新 autoconf 和 automake。关于安装它们还有什么我应该知道的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T12:06:08.097

当您`m4`在提示符处键入时，您的 shell 会通过`PATH`变量查找命令。你只需要预先`/usr/local/bin`准备好你的路径。例如，在 中`~/.bashrc`，您可以简单地执行以下操作：

```
PATH=/usr/local/bin:$PATH 
```

请注意，这可能会导致目录在 PATH 中多次出现。您可以通过以下方式避免这种情况：

```
echo $PATH | tr : \\n | grep -q '^/usr/local/bin$' || PATH=/usr/local/bin:$PATH 
```

# caching - 我可以将 SDWebImage 与 POST 请求一起使用吗？

> ID：15673415
> 
> 赞同：1
> 
> 时间：2013-03-28T02:51:01.243
> 
> 标签：caching, post, afnetworking, sdwebimage

这是我的情况。

我正在制作一个从服务器下载大量图像的应用程序。我正在使用 AFNeworking，除了图像缓存之外一切都很好。出于安全原因，图像服务器标头必须将缓存控制设置为“私有”（不要问我为什么），因此 AFNetworking 使用的 NSURLCache 是无用的。

现在，缓存图像在这个应用程序中是必不可少的，所以我一直在寻找替代品，我发现 SDWebImage 似乎完全符合我的需要。但是，我想知道如何使用它来下载图像，因为我通过 POST url 请求获取所有内容，因此我必须提供给该方法的 baseURL 几乎总是相同的，只更改我作为 POST 消息发送的参数。

SDWebImage 会独立散列每个图像还是仅使用提供的 url 作为键？

我不在乎我是否无法使用 UIImage 类别，但我确实需要一些方法来缓存我的图像。我将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:49:35.060

好吧，我没有意识到您可以使用任何字符串作为缓存图像的键名。我正在使用用 base64 编码的 params 字典描述来为每个请求获取一个唯一的字符串，并在下载之前检查它是否存在于缓存中。它似乎工作。不如 UIImage 类别方便，但它可以很好地工作。

希望这可以帮助某人。

# java - javax.servlet.ServletContext 和 javax.naming.Context 的区别

> ID：15673417
> 
> 赞同：1
> 
> 时间：2013-03-28T02:51:23.950
> 
> 标签：java, servlets

据我所知，Java ServletContext 和 Context Objects 在 Java EE 程序开发中很常见。但是，我不太确定它们之间有什么区别，尤其是上下文类的用法。

据我了解，ServletContext 是包含从 Web.xml 读取的所有初始化的对象，因此 Web 应用程序中的所有 servlet 都可以共享这些全局配置。

另一方面，我通常只在需要通过 JNDI 查找动态建立数据库连接时才使用 Context Object。除此之外，我不清楚这个类的其他可能用法。

我主要关心的是 ServletContext 和 Context 类的“上下文”字是否代表 Web 应用程序中的相同事物或组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:05:45.063

来自[`ServletContext`javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)

> 定义一组 servlet 用来与其 servlet 容器通信的方法，例如，获取文件的 MIME 类型、分派请求或写入日志文件。

基本上它是 servlet 环境的访问器。任何与 servlet 相关的东西，都可以从那里得到。它实际上只对 Servlet 容器有用。

[JNDI](http://docs.oracle.com/javase/7/docs/api/javax/naming/Context.html) [javadoc](http://docs.oracle.com/javase/7/docs/api/javax/naming/Context.html) _[`Context`](http://docs.oracle.com/javase/7/docs/api/javax/naming/Context.html)

> 此接口表示一个命名上下文，它由一组名称到对象的绑定组成。它包含检查和更新这些绑定的方法。

这是资源的接口。您可以使用可以通过此接口检索的某个标识符配置资源。您不仅限于在 Servlet 容器中使用它。例如，您可以将网络上已连接设备的列表存储在[LDAP](http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)存储库中。要访问此存储库，您可以编写自定义代码来实现该协议并与 LDAP 服务器交互，或者您可以使用[`LdapContext`](http://docs.oracle.com/javase/7/docs/api/javax/naming/ldap/LdapContext.html)实现该类的`Context`类。或者，您可以使用它来查找 JDBC `DataSource`。

不要让他们同名的事实困扰您。他们有不同的目标。

`Context`当您在不同的上下文中看到时，[此答案](https://stackoverflow.com/questions/3918083/what-exactly-is-a-context-in-java)可能会有所帮助。

# r - 如何在R中转换项目集矩阵

> ID：15673419
> 
> 赞同：0
> 
> 时间：2013-03-28T02:51:29.547
> 
> 标签：r

如何转换矩阵

```
A 1 2 3
B 3 6 9
c 5 6 9
D 1 2 4 
```

变成如下形式：

```
 1 2 3 4 5 6 7 8 9
1  0 2 1 1 0 0 0 0 0
2  0 0 1 1 0 0 0 0 0  
3  0 0 0 0 0 1 0 0 1    
4  0 0 0 0 0 0 0 0 0      
5  0 0 0 0 0 1 0 0 1           
6  0 0 0 0 0 0 0 0 2         
7  0 0 0 0 0 0 0 0 0           
8  0 0 0 0 0 0 0 0 0               
9  0 0 0 0 0 0 0 0 0 
```

我有一些实现，但它使用 for 循环我想知道 R 中是否有一些内部函数（例如“应用”）

补充：抱歉混淆。第一个矩阵只是表示项目集，每组项目成对出现，例如第一组是“1 2 3”，将变为（1,2），（1,3）， (2,3)，对应第二个矩阵。

还有另一个问题：如果矩阵非常大（10000000*10000000）并且是稀疏的，我应该使用稀疏矩阵还是 big.matrix？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:00:21.580

从 M 中删除行名给出：

```
m <- matrix(c(1,3,5,1,2,6,6,2,3,9,9,4), nrow=4)

> m
##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    3    6    9
## [3,]    5    6    9
## [4,]    1    2    4

# The indicies that you want to increment in x, but some are repeated
# combn() is used to compute the combinations of columns
indices <- matrix(t(m[,combn(1:3,2)]),,2,byrow=TRUE)

# Count repeated rows
ones <- rep(1,nrow(indices))
cnt <-  aggregate(ones, by=as.data.frame(indices), FUN=sum)

# Set each value to the appropriate count
x <- matrix(0, 9, 9)
x[as.matrix(cnt[,1:2])] <- cnt[,3]

x

##       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
##  [1,]    0    2    1    1    0    0    0    0    0
##  [2,]    0    0    1    1    0    0    0    0    0
##  [3,]    0    0    0    0    0    1    0    0    1
##  [4,]    0    0    0    0    0    0    0    0    0
##  [5,]    0    0    0    0    0    1    0    0    1
##  [6,]    0    0    0    0    0    0    0    0    2
##  [7,]    0    0    0    0    0    0    0    0    0
##  [8,]    0    0    0    0    0    0    0    0    0
##  [9,]    0    0    0    0    0    0    0    0    0 
```

# android - 如何使用多个包名？

> ID：15673421
> 
> 赞同：1
> 
> 时间：2013-03-28T02:51:36.560
> 
> 标签：android, package, android-manifest

在一个 Android 应用程序中使用多个包的正确方法是什么？

如果有多个包，将所有名称放在清单标签中是否正确，如下例所示？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.application"
    package="com.example.pack2"
    package="com.example.pack3"
    android:versionCode="1"
    android:versionName="1.0" > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:35:18.210

清单中的 Android 包和您使用的类的 Java 包是不同的概念。为方便起见，默认情况下它们碰巧是相同的。但是，它们可以完全不同且不相关。

当你声明你的activity、services、content provider和broadcast listener时，你可以通过以下三种方式指定组件类名（假设你的Android包是`org.example.myapp`）

*   类名，即`MyActivity`. 操作系统将假定您的类位于与您的 Android 包同名的 Java 包中，并将其解析为完全限定的类名`org.example.myapp.MyActivity`. 请注意，这种形式等价于`.MainActivity`，它是...
*   相对类名，即`.ui.MyActivity`. 操作系统将假定您的类位于 Java 包中，该包位于与您的 Android 包同名的 Java 包中，并将其解析为完全限定的类名`org.example.myapp.ui.MyActivity`. 注意前导`.`，很重要！否则你会落入...
*   完全合格，即`com.android.example.myapp.MyActivity`。操作系统将使用它作为它需要加载的类的确切名称，并将忽略 Android 包名称。

Android 包名和 Java 包名之间的混淆是由于对两个独立的概念使用相同的术语。的文档[`ComponentName`](http://developer.android.com/reference/android/content/ComponentName.html)并没有使它变得更容易，因为它调用了它的两个组件`package`and `class`，而它们实际上是`Android package`and `Java class`（上面三个变体中的任何一个都可以接受）。

有了更长的序言，您的问题的答案很简单：

您不能在清单中声明多个包。但是，您也不需要这样做。就操作系统而言，Android 包名称实际上就是您的应用程序的标识，仅此而已。您可以在代码中使用任何 Java 包。

警告：

默认情况下，包含所有资源标识符的自动生成`R`类是在与您的 Android 包同名的 Java 包中生成的。因此，如果您的 Android 包名和 Java 包名不同，您有两种选择：

*   `R`使用您的 Android 包的名称从 Java 包中显式导入类
*   使用[`appt`](http://elinux.org/Android_aapt)命令行中的工具和`--custom-package`选项将`R`文件生成到主 Java 包中。（我链接到 eLinux，因为 Android 文档没有太多关于该工具的内容。但它是 Android SDK 的一部分）

虽然这似乎证明了这两个包名称是相关的，但这只是工具所采用的便利。遗憾的是，虽然该`aapt`工具允许为`R`类显式设置目标 Java 包，但 Eclipse 和 IntelliJ 都隐藏了该选项，这使得混淆更加彻底。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:01:52.760

您只需简单地导入包。但是，如果我没记错的话，默认情况下不会看到其他包中的类。你必须包括

```
import <app-package>.R; 
```

app-package 是应用程序包的名称。（不带括号）

还要确保您拥有的任何导入语句都引用了正确的项目 R 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:03:09.443

我认为不可能。你可以这样做，如果 package="com.example.pack2" 并且你想声明一个包 package="com.example.pack3" 的 Activity，你必须使用像 com.example.pack3 这样的完整路径。活动！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:28:58.437

我在市场上有一个应用程序，里面有 5 个包，我只把里面有活动的包放在清单中，如果有帮助的话，我没有遇到任何问题

如果您要将您的应用程序放在 google play 上，它不会接受以 com.example 开头的包名称。

这是一个保留的包名

# maven - 如何强制 maven 更新本地 repo

> ID：15673431
> 
> 赞同：32
> 
> 时间：2013-03-28T02:52:14.173
> 
> 标签：maven, intellij-idea

我在一个项目中编译了一个 jar 文件，以便在第二个项目中使用它。我可以在 .m2 文件夹中看到 jar 文件。但是在第二个项目中，它抱怨找不到工件。我想我必须强制 maven 更新索引/缓存一些东西，但不知道到底是什么。任何提示，谢谢。

更新：感谢所有好的建议。事实证明，第二个项目中的 maven 插件（IntelliJ）没有更新它的索引。我使用它编译好的命令行。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-28T02:56:51.660

运行 maven 时尝试使用`-U`( *aka )* `--update-snapshots`

并确保依赖定义正确

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-06-14T08:38:10.457

您也可以在命令行上使用此命令：

```
mvn dependency:purge-local-repository clean install 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-28T03:00:11.750

如果您要安装到本地存储库中，则不需要特殊的索引/缓存更新。

确保：

1.  您已在本地存储库中正确安装了第一个工件。简单地将文件复制到`.m2`可能无法按预期工作。确保通过以下方式安装它`mvn install`

2.  第二个项目中的依赖项设置正确。检查任何错别字`groupId/artifactId/version`或不匹配的工件`type/classifier`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-02T13:00:10.803

尽管这是一个老问题，但我多次偶然发现这个问题，直到现在才想出如何解决它。*更新 maven 索引*是 IntelliJ 创造的一个术语，如果在您编译第一个项目后它仍然无法正常工作，则很可能您正在使用 2 个不同的 maven 安装。

按`CTRL`+ `Shift`+`A`打开“操作”菜单。键入`Maven`并转到*Maven 设置*。检查*主目录*以使用与通过命令行使用相同的 maven

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-08T14:23:05.787

单击设置并搜索“存储库”，然后选择本地存储库并单击“更新”。就这样。这个动作满足了我的需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-13T00:42:40.650

如果您在对站点进行身份验证时遇到困难，并且 Maven 正在缓存结果，那么只需从元数据存储中删除有关该站点的元数据将迫使 Maven 重新访问该站点。

```
gvim <local-git-repository>/commons-codec/resolver-status.properties 
```

# python - 将多个功能串在一起时遇到问题

> ID：15673433
> 
> 赞同：0
> 
> 时间：2013-03-28T02:52:19.123
> 
> 标签：python, string

基本上我正在编写一个函数，它使用前面的 2 作为输入参数 2 个数字`x`，你想玩的次数，以及`y`猜测的上限。循环会跟踪你赢了多少次......但是每当我运行它时，总数总是 0，我无法弄清楚我哪里出错了这里是代码。（`so_fun`是麻烦开始的地方）虽然它可能是以前的功能中的一个问题，它弄乱了较低的功能......

```
def closer(x,y,z):
    if (abs(x-y))<(abs(x-z)):
        return (True)
    else:
        return (False)

print(closer(4,2,7))

def grumpy(x):
    goal_num=randrange(0,x)
    user_guess=int(input('guess a number between 0 and ' + str(x)))
    comp_guess=randrange(0,user_guess)
    print(closer(goal_num,user_guess,comp_guess))

def so_fun(x,y):
    total=0
    while x>0:
        if grumpy(y):
            total+=1
        x -=1
    print(total) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:58:03.133

问题出在这里：

```
if grumpy(y): 
```

我不认为函数 grumpy 会返回任何东西。因此，此条件始终被评估为 false，并且永远不会执行 if 块。尝试从 grumpy 函数返回一些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:00:03.847

对我来说，原因是你在 if 语句中检查它时没有从“脾气暴躁”返回值。检查这个：

```
from random import randrange

def closer(x, y, z):
    return abs(x-y) < abs(x-z)

def grumpy(end):
    goal_num = randrange(0, end)
    user_guess = int(raw_input('guess a number between 0 and {0}'.format(end)))
    comp_guess = randrange(0, user_guess)
    return closer(goal_num, user_guess, comp_guess)

def so_fun(x, y):
    total = 0
    while x > 0:
        if grumpy(y):
            total += 1
        x -= 1
    print total

so_fun(7,5) 
```

# objective-c - 实例变量被直接访问

> ID：15673434
> 
> 赞同：4
> 
> 时间：2013-03-28T02:52:25.563
> 
> 标签：objective-c, clang

[我从 github https://github.com/0xced/XCDFormInputAccessoryView](https://github.com/0xced/XCDFormInputAccessoryView)下载了 XCDFormInputAccessoryView 。我试图在 xcode 中运行它并收到许多警告

实例变量“---”被直接访问。有什么帮助吗？？

```
- (void) setTextInputs:(NSArray *)textInputs
{
    // Some day, IBOutletCollection will be properly sorted, in the meantime, sort it!
    _textInputs = [textInputs sortedArrayUsingComparator:^NSComparisonResult(UIView *view1, UIView *view2) {
        return [@(view1.tag) compare:@(view2.tag)];
    }];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-26T13:47:11.707

添加`-Wno-direct-ivar-access`到构建设置下的警告标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T03:04:30.067

这是 Cedric 打开`-Weverything`标志的结果，这使得 LLVM 产生迂腐警告。删除构建设置下的标志：

![没有了-Weverything](../Images/759da654cc7aa402b3c2bb24252aac8a.png)

然后重新编译，错误应该会消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-07T23:52:11.193

如果您想保留尽可能多的警告，这是您可以在基本 .xcconfig 文件中使用的策略：

```
TWX_BASE_WARNING_EXCLUSIONS = -Wno-bad-function-cast -Wno-format-nonliteral -Wno-objc-missing-property-synthesis -Wno-pedantic -Wno-unused-macros -Wno-used-but-marked-unused -Wno-selector -Wno-direct-ivar-access

WARNING_CFLAGS = -Weverything $(TWX_BASE_WARNING_EXCLUSIONS) 
```

就个人而言，我已经堆叠了 .xcconfig 文件，因此“基础”与堆栈中的其他文件相反，

```
WARNING_CFLAGS = -Weverything $(TWX_BASE_WARNING_EXCLUSIONS) $(TWX_CONFIGURATION_WARNING_EXCLUSIONS) 
```

并且相同的策略用于管理搜索路径、预处理器定义等。

# html - Django 初学者：项目布局

> ID：15673436
> 
> 赞同：1
> 
> 时间：2013-03-28T02:52:32.563
> 
> 标签：html, django, web

这是我第一次使用 Django，虽然我发现他们提供的教程非常有帮助，但我在推进我的项目时遇到了一个主要问题。

到目前为止，Django 最令人困惑的方面是项目中文件的布局。截至目前，我的项目布局如下：

```
webapp/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
    app/
        __init__.py
        models.py
        tests.py
        views.py 
```

忍受我在这里的命名，我创建了一个 Django 项目“mysite”和一个应用程序“app”。以下是我发现自己不断返回的问题：

1.  我注意到在 mysite/settings.py 中有一个应用程序部分，我是否会在完成后将我在这个项目中编写的应用程序包含在该部分中？

2.  如果我想创建一个简单的 index.html 页面，那么这样的文件在这个项目组织中会放在哪里？

3.  我读过 CSS 或图像文件等静态内容需要包含在一个简单的“静态”目录中。这将在这个项目组织中去哪里？**[这仅用于调试目的，我读过这不应该用于生产]**

我现在的主要目标是在我开始深入研究我正在创建的应用程序的模型和视图之前能够查看一个简单的 html 站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:05:28.803

1.  如果您的应用需要一个或多个设置变量，那么是的，您可以将它们放入`mysite/settings.py`

2.  创建一个新文件夹`mysite/templates/`。这是您要放置模板文件的位置。组织每个应用程序的模板：`mysite/templates/app/`将有您的应用程序视图使用的模板。如果您想提供静态模板，例如简单的 static `index.html`，那么只需将该文件放入`mysite/templates/index.html`，然后将以下内容添加到您的`urls.py`文件中（无需为索引创建视图）：

    ```
    (r'^$', 'django.views.generic.simple.direct_to_template', {'template': 'index.html'}), 
    ```

3.  静态内容最终会`mysite/static`在您运行`collectstatic`命令后出现。请参阅[管理静态文件](https://docs.djangoproject.com/en/1.4/howto/static-files/)。该`collectstatic`命令在 中指定的所有位置搜索静态文件，`STATICFILES_DIRS`并将它们部署到`STATIC_ROOT`(mysite/static) 中指定的文件夹中。

# php - 获取WordPress中the_meta()的具体值？

> ID：15673440
> 
> 赞同：2
> 
> 时间：2013-03-28T02:53:05.007
> 
> 标签：php, wordpress, meta

我正在尝试使用 Wordpress 中的 the_meta() 数组从循环中详尽地获取特定行，并为其分配一个变量（如程序 while 循环）。现在它只是一次拉出所有的行。此查询的结果从数据库返回 3 行。我正在尝试将 div 标签包裹在存储在 the_meta(); 中的返回行之一周围。

我试过爆炸数组并返回第一行，但它只是一次返​​回所有内容。我只想获取一行并将其放入一个变量中，以便我可以使用 CSS 对其进行样式设置。

这是代码：

```
$args = array( 
'post_type' => 'membersprofile', 
'posts_per_page' => 20);        

$loop = new WP_Query( $args );

    while ( $loop->have_posts() ) : $loop->the_post();  

$newvar = explode(" ", the_meta());
echo $newvar[0];

endwhile; 
```

任何帮助将不胜感激！

编辑：感谢 Youn 为我指出正确的方向并为我找到答案，问题是我使用的是仅返回整行的 the_meta()。通过使用 get_post_meta，我能够将变量分配给返回的每一行。有效的代码是：

```
$key_2_value = get_post_meta(get_the_ID(), 'wpcf-shortbio', true);

// check if the custom field has a value
if($key_2_value != '') {
    echo $key_2_value;
} 
```

希望这对其他人有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:29:58.730

尝试使用 get_post_meta() 代替元。它将返回特定页面/帖子的元值。

欲了解更多信息，请访问[http://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-14T09:50:49.720

在循环中，您可以使用

```
<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?>
   <p><?php echo post_custom( 'my_meta_key' ) ; ?></p>
<?php  endwhile; endif; ?> 
```

# php - PHP 理解回调 - preg_replace_callback() 和 preg_match_all() 之间的区别

> ID：15673445
> 
> 赞同：3
> 
> 时间：2013-03-28T02:53:51.917
> 
> 标签：php, callback, preg-match-all, preg-replace-callback

我对使用有点困惑`preg_replace_callback()`

我有一个`$content`里面有一些网址。

以前我用

```
 $content = preg_match_all( '/(http[s]?:[^\s]*)/i', $content, $links );

 foreach ($links[1] as $link ) {
            // we have the link. find image , download, replace the content with image
            // echo '</br>LINK : '. $link;
            $url = esc_url_raw( $link );
            $url_name = parse_url($url); 
            $url_name = $description = $url_name['host'];// get rid of http://..
            $url = 'http://somescriptonsite/v1/' .  urlencode($url)   . '?w=' . $width ;
            } 

    return $url; 
```

但我真正需要的是用我解析的 URL 替换原始 URL ...

所以我尝试了 preg_replace_callback：

```
function o99_simple_parse($content){

$content = preg_replace_callback( '/(http[s]?:[^\s]*)/i', 'o99_simple_callback', $content );

return $content;
} 
```

和 ：

```
function o99_simple_callback($url){
    // how to get the URL which is actually the match? and width ??
        $url = esc_url_raw( $link );
        $url_name = parse_url($url); 
        $url_name = $description = $url_name['host'];// get rid of http://..
        $url = 'http://something' .  urlencode($url)   . '?w=' . $width ; 
        return $url; // what i really need to replace 
    } 
```

我假设回调将以每个匹配项都会调用回调（递归？）并返回 results 的方式工作，从而允许用解析`$url`的 from动态替换 $content 中的 URL `o99_simple_callbac()`。

但是这里的另一个[问题](https://stackoverflow.com/questions/15650994/php-matching-urls-and-using-preg-replace-callback)（尤其是[这个评论](https://stackoverflow.com/questions/15650994/php-matching-urls-and-using-preg-replace-callback#comment22222625_15651158)）引发了我的怀疑。

如果实际上传递了整个匹配数组，那么我之前使用的（在第一个示例中）和回调示例`preg_replace_callback()`之间实际上有什么区别？`preg_match_all()`

我错过了什么/误解了什么？`$content`用解析的 url替换找到的 URL 的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:57:29.323

其他答案可能已经足够了，但让我再举一个更简单的例子。

假设我们有以下数据`$subject`，

```
RECORD Male 1987-11-29 New York
RECORD Female 1987-07-13 Tennessee
RECORD Female 1990-04-14 New York 
```

和下面的正则表达式`$pattern`，

```
/RECORD (Male|Female) (\d\d\d\d)-(\d\d)-(\d\d) ([\w ]+)/ 
```

让我们比较三种方法。

## preg_match_all

首先，香草`preg_match_all`：

```
preg_match_all($pattern, $subject, $matches); 
```

结果是这样的`$matches`：

```
Array
(
    [0] => Array
        (
            [0] => RECORD Male 1987-11-29 New York
            [1] => RECORD Female 1987-07-13 Tennessee
            [2] => RECORD Female 1990-04-14 New York
        )

    [1] => Array
        (
            [0] => Male
            [1] => Female
            [2] => Female
        )

    [2] => Array
        (
            [0] => 1987
            [1] => 1987
            [2] => 1990
        )

    [3] => Array
        (
            [0] => 11
            [1] => 07
            [2] => 04
        )

    [4] => Array
        (
            [0] => 29
            [1] => 13
            [2] => 14
        )

    [5] => Array
        (
            [0] => New York
            [1] => Tennessee
            [2] => New York
        )

) 
```

无论我们是在我的示例中讨论性别字段还是在您的示例中使用 URL 字段，很明显循环*只*`$matches[1]`遍历该字段：

 *```
foreach ($matches[1] as $match)
{
    $gender = $match;
    // ...
} 
```

但是，正如您所注意到的，您对 所做的更改`$matches[1]`，即使您通过引用迭代其子数组，也*不会*反映在 中`$subject`，*即*您不能通过 执行替换`preg_match_all`。

## preg_match_all 与 PREG_SET_ORDER

在我们开始之前`preg_replace_callback`，让我们看一下`preg_match_all`常用的标志之一，`PREG_SET_ORDER`.

```
preg_match_all($pattern, $subject, $matches, PREG_SET_ORDER); 
```

这会输出一些（看似）完全不同的东西！

```
Array
(
    [0] => Array
        (
            [0] => RECORD Male 1987-11-29 New York
            [1] => Male
            [2] => 1987
            [3] => 11
            [4] => 29
            [5] => New York
        )

    [1] => Array
        (
            [0] => RECORD Female 1987-07-13 Tennessee
            [1] => Female
            [2] => 1987
            [3] => 07
            [4] => 13
            [5] => Tennessee
        )

    [2] => Array
        (
            [0] => RECORD Female 1990-04-14 New York
            [1] => Female
            [2] => 1990
            [3] => 04
            [4] => 14
            [5] => New York
        )

) 
```

现在，每个子数组包含*每个 match*的捕获组*集合*，而不是每个*捕获组的**matches*集合。（换句话说，这是另一个数组的转置。）如果你想使用每场比赛的性别（或 URL），你现在必须这样写：

 ***```
foreach ($matches as $match)
{
    $gender = $match[1];
    // ...
} 
```

## preg_replace_callback

就是`preg_replace_callback`这样。*它为每组匹配*调用回调（即，一次包括*其所有捕获组*），就好像您正在使用该`PREG_SET_ORDER`标志一样。也就是使用对比的方式`preg_replace_callback`，

```
preg_replace_callback($pattern, $subject, 'my_callback');
function my_callback($matches)
{
    $gender = $match[1];
    // ...
    return $gender;
} 
```

到`PREG_SET_ORDER`例子。请注意这两个示例如何以完全相同的方式遍历匹配项，唯一的区别是`preg_replace_callback`让您有机会返回一个值以进行替换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T03:03:05.497

它不会传递所有匹配项，但会为每个匹配项调用回调。回调不会接收单个字符串参数，而是字符串列表。`$match[0]`是整个匹配，以及`$match[1]`第一个捕获组（第一个括号之间的正则表达式中的内容）。

所以这就是你的回调应该是这样的：

```
function o99_simple_callback($match){
    $url = $match[1];
    //$url = esc_url_raw( $link );
    $url_name = parse_url($url); 
    $url_name = $description = $url_name['host'];// get rid of http://..
    $url = 'http://something' .  urlencode($url)   . '?w=' . $width ; 
    return $url; // what i really need to replace 
} 
```

另请参阅手册示例[`preg_replace_callback`](http://php.net/preg_replace_callback)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T03:00:15.070

[preg_replace_callback](http://php.net/preg_replace_callback)

1.  使用 preg_replace_callback() 替换模式
2.  使用回调函数生成替换字符串
3.  使用匿名函数生成替换字符串****

# android - 是否确认我不能在颜色状态列表资源中使用主题颜色属性

> ID：15673449
> 
> 赞同：7
> 
> 时间：2013-03-28T02:54:26.290
> 
> 标签：android

是否确认我不能在[颜色状态列表资源](http://developer.android.com/guide/topics/resources/color-list-resource.html)中使用主题颜色属性？

我有以下代码，它**非常完美。**

## 颜色/home_menu_text_view_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#ffffffff" />    <!-- pressed -->
    <item android:state_focused="true" android:color="#ffffffff" />    <!-- focused -->
    <item android:state_selected="true" android:color="#ffffffff" />   <!-- selected -->
    <item android:color="#ff000000" />                                 <!-- default -->
</selector> 
```

## 布局/home_menu_row.xml

```
<!-- Use duplicateParentState, so that we can receive click event from parent linear layout -->
<TextView
    android:id="@+id/name"
    android:gravity="center_vertical"
    android:padding="5dp"
    android:layout_width="0dp"
    android:layout_weight="1"
    android:layout_height="48dp"
    android:duplicateParentState="true"        
    android:textColor="@color/home_menu_text_view_selector"
    android:drawablePadding="10dp" /> 
```

但是，如果我将代码调整为以下内容，它将不再起作用。在默认模式下，它不再变为我想要的颜色。`?android:attr/textColorPrimary`假设在我的情况下是黑色（#ff000000）。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#ffffffff" />    <!-- pressed -->
    <item android:state_focused="true" android:color="#ffffffff" />    <!-- focused -->
    <item android:state_selected="true" android:color="#ffffffff" />   <!-- selected -->
    <item android:color="?android:attr/textColorPrimary" />            <!-- default -->
</selector> 
```

有人问过类似的问题[，选择器资源可以使用样式中定义的颜色吗？](https://stackoverflow.com/questions/3757696/can-a-selector-resource-use-a-color-defined-in-a-style?lq=1)和我一样，但还没有具体的答案。于是，我又把这个球扔了出去。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:06:01.903

## 根据收到的评论编辑

> 仅供参考，我相信这已在 API 23 中修复。您现在应该能够在颜色状态列表中声明属性。——亚历克斯·洛克伍德

## 旧答案

不是因为英语专业知识较少，而是因为核心 Android 专业知识较少，我缺乏文字来解释这一点，仍在写答案以说明我对这个主题的看法。

`Android Attribute (attr)`两者`Android Color`都是完全不同的东西。仅仅因为*attr 还定义了颜色值，您无法将其与单一格式颜色相关联*。

`attr`用于定义有关视图、其*引用、颜色、尺寸、类型*等的**许多其他内容。****即使您不传递任何格式，它也需要使用某些格式的默认值**来应用样式属性。

 ***例如：*您可以使用 ImageView 通过设置为 src 来显示图像，也可以使用一个 LinearLayout 并通过将其设置为背景来显示图像。如果您使用 Layout 而不是 ImageView 来显示图像，那么您不能接受它来进行自动缩放，例如中心裁剪，fitXY，这只有 ImageView 才有可能。*

同样的方式，在编写时`selector`您可以传递颜色，它可以是六色代码或定义的颜色，但您不能设置`attr`为，`color`因为选择器项的**android:color 仅接受颜色值，而 attr 默认情况下还有一些其他格式**，例如类型。

**单行答案：** attr 不是颜色，是的，它有一种格式说颜色，但颜色不是 attr 包含的唯一格式，因此您不能使用 attr 代替颜色。***

# design-patterns - Spock 中使用的设计模式

> ID：15673451
> 
> 赞同：0
> 
> 时间：2013-03-28T02:54:37.150
> 
> 标签：design-patterns, spock

问题：Spock 框架中使用了哪些设计模式示例？

我将在 Spock 框架上做一个演示，在查看了他们的主站点后，我意识到网络上没有很多关于 Spock 的信息。我应该谈论的一个方面是一两个设计模式，所以我想知道几个例子可能是什么。

谢谢。

# facebook - 如何通过 Xcode 或 Android 模拟器测试 phonegap facebook oauth 应用程序？

> ID：15673453
> 
> 赞同：0
> 
> 时间：2013-03-28T02:54:50.353
> 
> 标签：facebook, facebook-graph-api, cordova, facebook-oauth

如果 facebook 要求您使用域..为了使 oauth 工作..，我将如何通过 Xcode（iPad / 或 iOs 模拟器）或通过 Eclipse Android 模拟器测试 phonegap 本机应用程序/facebook oauth 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:32:01.377

您可以在模拟器上安装本机 facebook 应用程序。例如，您可以在下面的链接中找到 facebook apk。

参考： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

# asp.net-mvc - 如何动态更改 ASP.NET MVC 中 /Content 目录中的文件？

> ID：15673454
> 
> 赞同：0
> 
> 时间：2013-03-28T02:55:18.040
> 
> 标签：asp.net-mvc, wcf, asp.net-mvc-4, routes, actionresult

当我从 /Content 目录向用户提供 javascript 文件时，我想`string`用一个值替换该文件中的令牌，以便当用户请求给定文件时，它具有他们期望的所有自定义。

我认为这意味着我需要以某种方式代理对 /Content 目录的请求，执行动态插入，并将文件提供给用户。

*   我有兴趣将此插入作为`stream`内存文件或内存文件执行。我更喜欢使用流，因为它可能更有效的内存。

如何让 ASP.NET 代理此目录？

我尝试过

1.  使用路由指向控制器

2.  WCF 代理 URL

但它们对我来说似乎都很“丑陋”，我想让这个插入/替换在他的项目中尽可能透明。

有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:10:13.633

最简单的方法是在控制器上创建一个动作。

```
public class JavascriptController : Controller
{
    public ActionResult Load(string file)
    {
        var content = System.IO.File.ReadAllText(Server.MapPath(string.Format("~/Content/{0}", file)));

        //make replacements io content here

        return this.Content(content, "application/javascript");
    }
} 
```

然后，您可以像这样访问 javascript（假设您有默认路由）：

```
http://localhost:53287/Javascript/Load?file=file.js 
```

其中 file.js 是您请求的文件的名称。

不用担心 url，如果需要，您可以通过创建另一个路由来自定义它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:39:33.663

考虑到您对动态 javascript 的评论，这是我上面发布的答案的替代答案。

首先，我不知道如何专门使用 mvc 或 wcf 来做到这一点。我知道如何做到这一点的唯一方法是使用较低级别的 HttpModule

看看下面的代码：

```
public class JavascriptReplacementModule : IHttpModule
{
    public class ResponseFilter : MemoryStream
    {
        private Stream outputStream = null;

        public ResponseFilter(Stream output)
        {
            outputStream = output;
        }

        public override void Flush()
        {
            base.Flush();
            this.Seek(0, SeekOrigin.Begin);
            var sr = new StreamReader(this);

            string contentInBuffer = sr.ReadToEnd();

            //Do replacements here

            outputStream.Write(UTF8Encoding.UTF8.GetBytes(contentInBuffer), 0, UTF8Encoding.UTF8.GetByteCount(contentInBuffer));

            outputStream.Flush();
        }

        protected override void Dispose(bool disposing)
        {
            outputStream.Dispose();
            base.Dispose(disposing);
        }
    }

    public void Dispose() { }

    public void Init(HttpApplication context)
    {
        context.PostRequestHandlerExecute += new EventHandler(context_PostRequestHandlerExecute);
    }

    void context_PostRequestHandlerExecute(object sender, EventArgs e)
    {

        var context = (HttpApplication)sender;
        if (context.Request.Url.AbsolutePath.StartsWith("/Content") && context.Request.Url.AbsolutePath.EndsWith(".js"))
        {
            HttpContext.Current.Response.Filter = new ResponseFilter(HttpContext.Current.Response.Filter);
        }
    }
} 
```

并像这样注册模块（确保将完整类型放入 type 属性中）：

```
<system.webServer>
  <modules>
    <add name="JavascriptReplacementModule" type="JavascriptReplacementModule"/>
  </modules>
</system.webServer> 
```

这允许您在输出流到达客户端之前对其进行修改

# for-loop - 两个单独的 for 循环与两个嵌套的 for 循环的运行时间是多少？

> ID：15673461
> 
> 赞同：3
> 
> 时间：2013-03-28T02:56:02.080
> 
> 标签：for-loop, runtime, big-o

在这个例子中，我有两个独立的 for 循环。运行时间是 O(num1 + num2) 吗？

```
for(int i=0; i< num1 ; i++)     
{
   print i;
}

for(int i=0 ; i<num2 ; i++)
{
    print i;
} 
```

对于这个例子，有一个嵌套的 for 循环。运行时间是否会是 O(num1*num2)，因为对于 0 到 num1 中的每个数字，您必须从 0 迭代到 num2？

```
 for(int i=0 ; i<num1 ; i++)
 {
     for(int j=0 ; j<num2 ; j++)
     {  
         print i;
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:05:31.523

你可以更笼统。Big-O 表示法并不是要在给定实际参数的情况下找到准确的值。它是关于确定渐近运行时间。在这种情况下，我们可以将 num1 和 num2 替换为 n，其中 n 是从 0 开始的某个区间的上限。使用这种方法，我们会发现您的第一个示例的运行时间为 O(n)，而第二个示例的运行时间为示例将具有运行时 O(n^2)。第一个例子是线性时间，第二个例子是二次的。您很少需要比这更详细地对算法运行时进行分类。

# paypal - PayPal NVP 部分退款全额退款

> ID：15673462
> 
> 赞同：0
> 
> 时间：2013-03-28T02:56:04.797
> 
> 标签：paypal, paypal-sandbox, paypal-nvp

尽管将 RefundType 指定为“部分”，但 PayPal NVP 部分退款全额退款

这是我正在使用的请求

```
 public string Refund_Partial(string transactionID, string refundType,string Amount)
    {
        string strCredentials = "USER=" + strUsername + "&PWD=" + strPassword + "&SIGNATURE=" + strSignature;
        string strNVP = strCredentials;
        strNVP += "&METHOD=RefundTransaction&VERSION=" + strAPIVersion;

        strNVP += "&TRANSACTIONID=" + transactionID + "&REFUNDTYPE=" + refundType + "¤cy=USD" + "&AMOUNT=" + Amount;
        //Create web request and web response objects, make sure you using the correct server (sandbox/live)
        HttpWebRequest wrWebRequest = (HttpWebRequest)WebRequest.Create(strNVPSandboxServer);
        //Set WebRequest Properties
        wrWebRequest.Method = "POST";
        // write the form values into the request message
        StreamWriter requestWriter = new StreamWriter(wrWebRequest.GetRequestStream());
        requestWriter.Write(strNVP);
        requestWriter.Close();
        // Get the response.
        HttpWebResponse hwrWebResponse = (HttpWebResponse)wrWebRequest.GetResponse();
        StreamReader responseReader = new StreamReader(wrWebRequest.GetResponse().GetResponseStream());
        // and read the response
        string responseData = responseReader.ReadToEnd();
        responseReader.Close();
        return responseData;
    } 
```

谁能让我知道我是否需要包含更多参数才能进行部分退款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:16:35.963

您可以更改货币代码和金额的参数值，从

```
"¤cy=USD" + "&AMOUNT=" + Amount 
```

到

```
"CURRENCYCODE=USD" + "&AMT=" + Amount 
```

看看[RefundTransaction API 操作 (NVP)](https://www.x.com/developers/paypal/documentation-tools/api/refundtransaction-api-operation-nvp)。

可能是 PayPal 正在寻找`AMT`不存在的参数，这就是它全额退款的原因

# android - Android，如何将视频旋转 90 度，而不是 SurfaceView

> ID：15673464
> 
> 赞同：-3
> 
> 时间：2013-03-28T02:56:20.670
> 
> 标签：android

我想在播放视频时将视频旋转 90 度，并且我必须保留其他东西，例如不旋转的按钮。谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:05:08.177

这真的不可能。老实说，您最好使用视频编辑器旋转视频并在我看来使用它。

# security - 在 Weblogic 中保护 Web 应用程序中的 URL 模式

> ID：15673470
> 
> 赞同：0
> 
> 时间：2013-03-28T02:57:09.257
> 
> 标签：security, weblogic, weblogic12c

我正在尝试通过管理控制台保护部署在我的 weblogic 服务器 (12c) 中的 Web 应用程序中的某些资源。以下是我为完成此任务所遵循的步骤

1.  安全领域->我的领域（默认领域）->将安全模型默认更改为“自定义角色和策略”。保存我的更改后没有重新启动服务器，因为它提示我不需要重新启动

2.  导航到主页 -> 配置应用程序 -> 我的应用程序 -> 安全 -> URL 模式 -> 策略，我无法添加“URLPatterns”。

它说如果我使用仅 DD 或自定义角色，我无法修改安全策略。

我哪里错了？任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T19:42:22.380

我是通过向 web.xml 添加安全约束来保护资源，如下所示，然后在 weblogic 的默认领域中创建一个安全组和用户名

```
<security-constraint>
   <display-name>Restricted GET To Employees</display-name>
   <web-resource-collection>
      <web-resource-name>Restricted Access - Get Only</web-resource-name>
      <url-pattern>/restricted/employee/*</url-pattern>
      <http-method>GET</http-method>
   </web-resource-collection>
   <auth-constraint>
      <role-name>Employee</role-name>
   </auth-constraint>
</security-constraint> 
```

# javascript - 在 html 中绘制数学数线

> ID：15673474
> 
> 赞同：2
> 
> 时间：2013-03-28T02:57:47.803
> 
> 标签：javascript, html, css

我想在 html 中动态绘制数字线（如下链接所示）。

[http://www.mathsisfun.com/number-line.html](http://www.mathsisfun.com/number-line.html)

你能指点一些javascript库来实现同样的目标吗？

谢谢，穆吉尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T06:14:27.860

简单的 CSS 示例。请注意，我在 CSS 方面相当垃圾，这可能只适用于 Firefox、Safari*等，*并且在 IE 中看起来像垃圾。

如果您要进行大量不同大小的操作，生成标记的脚本可能会很方便，但它应该生成提供给客户端的 HTML，而不是在客户端使用脚本完成。

```
<!DOCTYPE html>
<html>
  <title>Number Line</title>
  <style type="text/css">
  .lineContainer {
    position:relative;
  }
  .line {
    border-top: 1px solid blue;
    border-right: 1px solid blue;
    width: 21px;
    Height: 8px;
    float: left;
    margin: 0;
    padding: 0;
  }
  .lineRightEnd {
    border-right: 0;
  }
  .numberContainer {
    position: absolute;
    top: 10px;
    margin: 0;
    padding: 0;
  }
  .number {
    width: 22px;
    float: left;
    margin: 0;
    padding: 0;
    text-align: center;
  }

  .numberLeftEnd {
    width: 10px;
    Height: 5px;
    float: left;
    margin: 0;
    padding: 0;
  }
  </style>

</head>
<body>
<p>A number line</p>
<div class="lineContainer">
  <div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line lineRightEnd"></div>
  <div class="numberContainer"><div class="numberLeftEnd"></div><div class="number">-5</div><div class="number">-4</div><div class="number">-3</div><div class="number">-2</div><div class="number">-1</div><div class="number">0</div><div class="number">1</div><div class="number">2</div><div class="number">3</div><div class="number">4</div><div class="number">5</div>
  </div>
</div>
</body>
</html> 
```

# javascript - 单击按钮时如何在AngularJs中设置一个指令的值

> ID：15673475
> 
> 赞同：0
> 
> 时间：2013-03-28T02:58:02.180
> 
> 标签：javascript, angularjs, angularjs-directive

我的代码中有一些注释。但这是它的基础知识。我有一个跨度，我有一个按钮。单击按钮时，我想更新跨度的 html。跨度绑定到控制器属性的值。我尝试使用模型，但它也不起作用。这是我的代码

```
app.controller('CartController', function($scope) {
  this.count = 0;

  this.getCount = function() {
    return count;
  };
  this.addProduct = function() {
    this.count = this.count + 1;
    return this.count;
  };
});

//this is a span with a value set to the number of items in the cart
app.directive('cartCount', function() {
  return {
    restrict: 'A',
    controller: 'CartController',
    template: '<span>{{count}}</span>',
    transclude: true,
    link: function(scope, element, attrs, CartController) {

      //I can initially set the value 
      scope.count = CartController.count;

      //but later how do I watch the value of the CartControllers count property and sync it with the value of this?
    }
  };
});

//this is a button
app.directive('addProduct', function() {
  return {
    restrict: 'C',
    controller: 'CartController',
    link: function(scope, element, attrs, CartController) {

      //when button is clicked I want the cartCount directives value to be updated 
      element.click(function() { 

      });
    }
  };
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:02:29.687

我认为您根本不需要指令，这可以简单得多。

将这些直接放在您的视图中：

```
<span>{{count}}</span>
<a href="#" ng-click="addProduct()">Add Product</a> 
```

然后在你的控制器中：

```
 $scope.count = 0;

  $scope.addProduct = function() {
    $scope.count++;
  }; 
```

工作示例：http: [//jsbin.com/ehohud/1/edit](http://jsbin.com/ehohud/1/edit)

# excel - Excel将行增加1

> ID：15673478
> 
> 赞同：0
> 
> 时间：2013-03-28T02:58:24.230
> 
> 标签：excel

我有一个电子表格，其中第一列在每一行中都包含文本“user_#”。我需要替换每一行中的“#”并替换[用行号替换它，这样 user_1 user_2 user_3 ' ' ' user_n

是否有一个简单的功能可以插入第一行，然后复制并拖动，以便正确填写每一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:01:49.640

您可以简单地将文本“user 1”放在第一行，然后向下拖动列。您需要在下拉列时出现的“自动填充选项”框中选择填充类型为“填充系列”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:06:33.897

使用它，其中 B3 是与您放置此公式的行位于同一行的单元格。

```
 =CONCATENATE("USER_",ROW(B3)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:22:30.947

此外，您可以`="USER_"&ROW(B3)`作为替代方案。如果你需要一个特殊的格式，比如整数，你可以通过使用 this 来确保你得到你想要的`="USER_"&TEXT(ROW(B3),"#")`。当然，如果您使用的是 ROW()，这可能太多了。我只是添加它以防您想引用非整数值。

# twitter-bootstrap - 使用 $http 加载工具提示内容的 angularjs 引导工具提示

> ID：15673481
> 
> 赞同：7
> 
> 时间：2013-03-28T02:58:53.307
> 
> 标签：twitter-bootstrap, angularjs, tooltip

我遇到了我似乎无法弄清楚的小问题。下面的代码有效，除了您第一次将鼠标悬停在链接上。任何帮助是极大的赞赏。

[http://jsfiddle.net/LpK6d/1/](http://jsfiddle.net/LpK6d/1/)

```
<div ng-app="myApp">
<a
    class="pop-over"
    data-original-title="default value"
    data-placement="top">test link</a>
</div> 
```

```
var app = angular.module("myApp", []);

app.directive('popOver', function($http) {
  return {
    restrict: 'C',
    link: function(scope, element, attr) {

        element.bind('mouseover', function(e) {
            $http.get("http://ip.jsontest.com/?callback=someFunction")
              .success(function(data) {
                 attr.$set('originalTitle', data);
                 element.tooltip();                  
              });
            })
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-24T07:51:38.213

好的，所以`.tooltip()`在 AJAX 调用之前调用似乎是个好主意，但是该方法将`data-original-title`or复制`'title'`到其内部变量中，因此我们无法更改它:(。

问题是调用 tooltip() 它只是监听 onmouseover 事件。您必须调用`.tooltip('show')`以使其以编程方式显示。

这是工作小提琴：http: [//jsfiddle.net/rB5zT/49/](http://jsfiddle.net/rB5zT/49/)

这是正确的方法：

```
var app =  angular.module("myApp", [])
app.directive('popOver', function($http) {
 return {
  restrict: 'C',
  link: function(scope, element, attr) {
    var i =0;
    element.tooltip();
    $(element).bind('mouseover',function(e) {

        $http.get("test").success(function(){
           attr.$set('originalTitle', "Some text "+i++);  
            element.tooltip('show');
         });
        });
   }
 }
}); 
```

# php - PHP判断一个字符串是人名还是其他文本

> ID：15673482
> 
> 赞同：0
> 
> 时间：2013-03-28T02:59:01.033
> 
> 标签：php, text-analysis

我发现的最接近的现有问题是[这个](https://stackoverflow.com/questions/1261338)或[这个](https://stackoverflow.com/questions/3258688/)

我想编写一个接受字符串的函数或类，然后根据可以编程的任何标准将返回它是真实人名的概率。目前，我预计它会严重偏向于英语或欧洲名称或其他名称的英语音译。（例如，“bob”、“bob smith”和“smith”都应该返回 1.0，“sfgoisxdzzg”应该返回 .001 甚至 .0000001 之类的值）

有谁知道这是否已经完成/正在完成？（即使是另一种语言）我的第一个想法是我必须编写某种机器学习脚本。我的问题是我对任何机器学习理论都一无所知。

所以，我的问题的第二部分是：机器学习是解决这个问题的可行选择吗？如果是这样，我应该从哪些资源开始学习如何做到这一点？如果没有，你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:13:49.530

我用于过滤的这种贝叶斯方法在联系提交和报价表单请求方面取得了相当大的成功。该表格使用评分并处理来自世界各地的各种语言的请求。如果他们仅在各个领域未通过 3 或 4 次测试，那么我会将它们标记为垃圾邮件尝试。显然，像“123456”这样的电话号码会立即引发红旗。评论中的BBCode也是一个死赠品。

```
<?php
function nameCheck($var) {
        $nameScore = 0;
        //If name < 4 score + '3'
        $chars_count = strlen($var);
        $consonants = preg_replace('![^BCDFGHJKLMNPQRSTVWXZ]!i','',$var);
        $consonant_count = strlen($consonants);
        $vowels = preg_replace('![^AEIOUY]!i','',$var);
        $vowel_count = strlen($vowels);
        //We're expecting first and last name.
        if ($chars_count < 4){
            $nameScore = $nameScore + 3;    
        }

        //if name > 4 and no spaces score + '4'
        if (($chars_count > 4)&& (!preg_match('![ ]!',$var))){
            $nameScore = $nameScore + 4;    
        }

        if (($chars_count > 4)&&(($consonant_count==0)||($vowel_count==0))){
            $nameScore = $nameScore + 5;            
        }

        //if name > 4 and vowel to consonant ratio < 1/8 score + '5'
        if (($consonant_count > 0) && ($vowel_count > 0) && ($chars_count > 4) && ($vowel_count/$consonant_count < 1/8)){
            $nameScore = $nameScore + 5;    
        }
        //Needs at least 1 letter.
        if (!preg_match('![A-Za-z]!',$var)){
            $nameScore = $nameScore + 10;           
        }

        return $nameScore;
    }

//added for testing
$var = $_GET['email'];
echo nameCheck($var);
?> 
```

即使有人同花，我也会让它模仿我的尝试，这样我就可以修正我的得分。中文或韩文通常会有一些误报，但大多数情况下，任何用英文填写表格的人都会通过。像“无锡”这样的名字确实存在。

# python - 如何输出通过 python 的 gui 输入的信息？

> ID：15673485
> 
> 赞同：0
> 
> 时间：2013-03-28T02:59:09.360
> 
> 标签：python, pyqt4

这是我第一次尝试在 python 中使用 gui，我需要帮助输出我在运行 gui 时设置的信息。在我点击提交按钮后，它应该打印出类似于下面的所有内容。如果需要任何进一步的信息，我会编辑它。例如性别：男性姓名：姓名年龄：#等

```
import sys
from PyQt4 import QtGui, QtCore
class Gui(QtGui.QMainWindow):
    def __init__(self):
        super(Gui, self).__init__()
        self.initUI()
    def initUI(self):
        #Frame
        self.setGeometry(100, 100, 400, 600)
        self.setWindowTitle('Python Printer')
        #Button
        self.btn1 = QtGui.QPushButton("Submit", self)
        self.btn1.setGeometry(QtCore.QRect(90, 560, 75, 30))
        self.btn1.clicked.connect(self.buttonClicked)
        self.btn2 = QtGui.QPushButton("Cancel", self)
        self.btn2.setGeometry(QtCore.QRect(170, 560, 75, 30))
        self.btn2.clicked.connect(self.buttonClicked)
        #Text Field
        self.texta = QtGui.QPlainTextEdit("Name",self)
        self.texta.setGeometry(QtCore.QRect(75,155,150,25))
        self.textb = QtGui.QPlainTextEdit("Surname",self)
        self.textb.setGeometry(QtCore.QRect(75,125,150,25))
        self.textc = QtGui.QPlainTextEdit("#",self)
        self.textc.setGeometry(QtCore.QRect(75,215,30,25))
        self.textd = QtGui.QPlainTextEdit("##/##/####",self)
        self.textd.setGeometry(QtCore.QRect(75,275,120,25))
        self.texte = QtGui.QPlainTextEdit("",self)
        self.texte.setGeometry(QtCore.QRect(75,345,150,25))
        #Label
        self.labl1 = QtGui.QLabel("Gender",self)
        self.labl1.setGeometry(QtCore.QRect(75,30,150,25))
        self.labl2 = QtGui.QLabel("Legal Name",self)
        self.labl2.setGeometry(QtCore.QRect(75,100,150,25))
        self.labl3 = QtGui.QLabel("Age",self)
        self.labl3.setGeometry(QtCore.QRect(75,190,150,25))
        self.labl4 = QtGui.QLabel("Birthdate (MM/DD/YYYY)",self)
        self.labl4.setGeometry(QtCore.QRect(75,250,150,25))
        self.labl5 = QtGui.QLabel("Email",self)
        self.labl5.setGeometry(QtCore.QRect(75,320,150,25))
        #Combo Box
        self.combox = QtGui.QComboBox(self)
        self.combox.addItem("Select")
        self.combox.addItem("Male")
        self.combox.addItem("Female")
        self.combox.addItem("Other")
        self.combox.setGeometry(QtCore.QRect(75,50,150,25))
        self.show()
    def buttonClicked(self):
        print("Profile")
        #output
def main():
    app = QtGui.QApplication(sys.argv)
    ex = Gui()
    sys.exit(app.exec_())
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:32:23.197

```
def buttonClicked(self):
    print("Profile") 
```

这将打印到标准输出。如果您想向用户显示一些信息，您可以使用[`QMessageBox::warning`](http://qt-project.org/doc/qt-4.8/qmessagebox.html#warning)：

```
def buttonClicked(self):
    # check the input data
    ...
    if errors:
        QMEssageBox.warning(self, 'Errors', 'Please fix the following errors: ...')
        return
    else:
        # process the input data 
```

# scheme - 方案不可分割

> ID：15673487
> 
> 赞同：1
> 
> 时间：2013-03-28T02:59:13.487
> 
> 标签：scheme, racket

我正在尝试编写一个程序来定义不能被 2、3 或 5 整除的所有整数的流。这就是我写的：

```
(define not-d
   (stream-filter (lambda (x) (not (divisible? x (and 2 3 5))))
                 integers)) 
```

我用以下方法测试它：

```
(define (take n s)  ;; list of first n things from stream s
  (if (= n 0)
      '()
      (cons (stream-car s) (take (- n 1) (stream-cdr s))))) 
```

但是它不起作用......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:05:30.103

这根本行不通：

```
(not (divisible? x (and 2 3 5))) 
```

试试这个：

```
(and
 (not (divisible? x 2))
 (not (divisible? x 3))
 (not (divisible? x 5))) 
```

# java - 如何从 ArrayList 转换 到一个 int 数组？

> ID：15673488
> 
> 赞同：-6
> 
> 时间：2013-03-28T02:59:13.533
> 
> 标签：java, arraylist

我如何从这个转换：

```
 ArrayList<int[]> 
```

-至-

```
 int[] 
```

?

例子

```
private ArrayList<int[]> example = new ArrayList<int[]>(); 
```

至

```
private int[] example; 
```

例如`ArrayList({1,2,3},{2,3,4}) to {1,2,3,2,3,4}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:30:15.710

这个问题的（稍微）棘手的部分是你必须在开始之前计算出输出数组需要多大。所以解决方案是：

1.  遍历列表以求和列表中数组的大小
2.  分配输出数组
3.  使用嵌套循环将整数复制到输出数组。

我不会为你编写这个代码。您应该能够自己编写代码。如果没有，你需要*变得有能力*......通过尝试自己去做。

* * *

如果输入和输出类型不同，那么使用 3rd 方库可能会有更简洁的解决方案。但是您正在使用的事实使您`int[]`不太可能找到现有的库来帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:16:46.953

关于这个的快速食谱：计算每个数组中的元素数量，创建一个数组来保存所有元素，复制元素:)

```
import java.util.ArrayList;

// comentarios em pt-br
public class SeuQueVcConsegue {

    public static void main(String[] args) {

        ArrayList<int[]> meusNumerosDaSorte = new ArrayList<int[]>();
        meusNumerosDaSorte.add(new int[]{1,2,3});
        meusNumerosDaSorte.add(new int[]{4,5,6});

        // conta os elementos
        int contaTodosOsElementos = 0;
        for( int[] foo : meusNumerosDaSorte){
            contaTodosOsElementos += foo.length;
        }

        // transfere os elementos
        int[] destinoFinal = new int[contaTodosOsElementos];
        int ponteiro = 0;
        for( int[] foo : meusNumerosDaSorte){
            for( int n : foo){
                destinoFinal[ponteiro] = n;
                ponteiro ++;
            }
        }

        // confere se esta correto :)
        for(int n : destinoFinal){
            System.out.println(n);
        }

    }
} 
```

# linux - GCC 编译因 pthread 和选项 std=c99 而失败

> ID：15673492
> 
> 赞同：10
> 
> 时间：2013-03-28T02:59:59.357
> 
> 标签：linux, gcc, pthreads, fedora

我有一个无法使用 -std=c99 编译的示例程序

任何帮助表示赞赏

```
#include <pthread.h>
int main(void) {
    pthread_rwlock_t    myLock;
    return 0;
}

output of the two compiles:
gcc pthread_test.c
[brad@fedora17onbradsmacpro src]$ gcc  pthread_test.c
[brad@fedora17onbradsmacpro src]$

gcc -std=c99 pthread_test.c[brad@fedora17onbradsmacpro src]$ gcc -std=c99 pthread_test.c
pthread_test.c: In function ‘main’:
pthread_test.c:5:2: error: unknown type name ‘pthread_rwlock_t’
[brad@fedora17onbradsmacpro src]$ 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-28T03:21:44.500

读写锁是非标准的，并且在`<pthread.h>`.

`-std=c99`要求严格遵守标准（尽可能），并禁用语言扩展和额外的库。

如果您改为通过`std=gnu99`，您将获得 C99 编译器版本以及 gcc 默认提供的所有扩展和附加功能。

# java - 如果长度超过 1308 字节，Http POST 请求没有得到响应

> ID：15673498
> 
> 赞同：0
> 
> 时间：2013-03-28T03:00:28.610
> 
> 标签：java, web-services, soap, http-post

我有一个奇怪的问题，我不知道如何调试它。

我需要向 WebService 服务器发出 POST SOAP 请求。

我的Java代码是：

```
 String urlParameters = "<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soap:Body>
..................
</soap:Body>
</soap:Envelope>";
        URL url;
        HttpURLConnection connection = null;  
        try {
        //Create connection
        url = new URL(targetURL);
        connection = (HttpURLConnection)url.openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", "text/xml; charset=utf-8");
        connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
        connection.setRequestProperty("SOAPAction", "http://xxxxx/Foo" );

        connection.setUseCaches (false);
        connection.setDoInput(true);
        connection.setDoOutput(true);

        //Send request
        DataOutputStream wr = new DataOutputStream (connection.getOutputStream ());
        wr.writeBytes (urlParameters);
        wr.flush ();
        wr.close ();

        //Get Response  
          InputStream is = connection.getInputStream();
          BufferedReader rd = new BufferedReader(new InputStreamReader(is));
          String line;
          StringBuilder response = new StringBuilder(); 
          while((line = rd.readLine()) != null) {
            response.append(line);
            response.append('\r');
          }
          rd.close(); 
```

现在，如果 urlParameters 小于或等于 1308 字节，那么它工作正常，我可以得到响应。但是，如果长度超过 1308 字节（即，如果我在字符串中再添加一个字符），那么它将无法工作（它似乎甚至没有离开客户端机器，它永远不会到达服务器）

我尝试使用soapUI，它也给了我同样的问题。我在 Ubuntu 12.04 上运行

是的，我对 CURL 也有同样的问题。如果请求长度有效，则输出如下：

```
* About to connect() to epermit port 8085 (#0)
*   Trying 192.168.14.100... connected
> POST /xxx/xxx.asmx HTTP/1.1
> User-Agent: curl/7.22.0 (i686-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: xxx:8085
> Accept: */*
> Content-Type:text/xml; charset=utf-8
> SOAPAction:"xxxxx"
> Content-Length: 1304
> Expect: 100-continue
> 
< HTTP/1.1 100 Continue
< HTTP/1.1 200 OK
< Cache-Control: private, max-age=0
< Content-Type: text/xml; charset=utf-8
< Server: Microsoft-IIS/7.5
< X-AspNet-Version: 4.0.30319
< X-Powered-By: ASP.NET
< Date: Thu, 28 Mar 2013 03:52:55 GMT
< Content-Length: 324
< 
* Connection #0 to host epermit left intact
* Closing connection #0
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><xxxx xmlns="xxxxxxx" /></soap:Body></soap:Envelope> 
```

当我提出大于 1308 字节的请求时：

```
* About to connect() to xxxxxxxxxxx port 8085 (#0)
*   Trying 192.168.14.100... connected
> POST /xxxxxxx/xxxxxxx.asmx HTTP/1.1
> User-Agent: curl/7.22.0 (i686-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: xxxxxxxx:8085
> Accept: */*
> Content-Type:text/xml; charset=utf-8
> SOAPAction:"xxxxxxxxxxxxxxxxx"
> Content-Length: 1309
> Expect: 100-continue
> 
< HTTP/1.1 100 Continue 
```

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:04:12.957

数据以一系列数据包的形式通过网络发送。这些数据包的大小 <= 网络的 MTU，通常小于 1500 个八位字节。我怀疑服务器正在获取其中两个数据包，并且只读取第一个数据包。然后尝试解析不完整的数据时失败。

# python - django多对多模型简单逻辑

> ID：15673500
> 
> 赞同：0
> 
> 时间：2013-03-28T03:00:35.633
> 
> 标签：python, database, django, django-models, foreign-key-relationship

我试图理解 django 模型中的这种多字段逻辑。

我有两个 django 模型：`location`和`image`.

我还有另一个名为`location_has_image`. 该模型以这种形式定义。

```
class location_has_image(models.Model):
  of_location = models.ForeignKey(location,related_name="of_location")
  of_image = models.ForeignKey(image,related_name="of_image") 
```

我的问题是，当我保存新对象`location`和`image`对象时，我是否必须将一些东西保存到这个模型中？还是会`location_has_image`自动将其设置为那些新创建的对象？还是我在这里想错了？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:07:28.903

您应该改用*ManyToManyField*。它为您创建中间连接表并对其进行管理。

来自 Django 文档的示例：

```
from django.db import models

class Publication(models.Model):
    title = models.CharField(max_length=30)

    def __unicode__(self):
        return self.title

    class Meta:
        ordering = ('title',)

class Article(models.Model):
    headline = models.CharField(max_length=100)
    publications = models.ManyToManyField(Publication)

    def __unicode__(self):
        return self.headline

    class Meta:
        ordering = ('headline',) 
```

示例： [https ://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)

现场文档： [https ://docs.djangoproject.com/en/dev/ref/models/fields/#ref-manytomany](https://docs.djangoproject.com/en/dev/ref/models/fields/#ref-manytomany)

# c++ - C++ 中 default_random_engine 和 normal_distribution 背后的数学

> ID：15673507
> 
> 赞同：2
> 
> 时间：2013-03-28T03:01:53.243
> 
> 标签：c++, math, random, mersenne-twister

谁能带我到某个地方，真正谈论支撑这两个 normal_distribution 和 default_random_engine 的数学。据我了解使用梅森捻线机？如果是这样，任何人都可以向我指出一些在线资源的方向，该资源解释了这种伪随机算法的实际工作原理，如果它使用的是它，因为我在 mersenne twister 上找不到太多。此外，如果数字是统一的，大多数伪随机算法输出是，那么 normal_distribution 如何使其正态分布？它是否使用逆变换、box muller 或 ziggurat ？任何帮助我都会非常感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T04:19:28.383

你问的有几个问题。第一个涉及生成伪随机数序列的方法，通常是整数。维基百科对[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister) (MT) 和[Linear Congruential Generator](http://en.wikipedia.org/wiki/Linear_congruence_generator) (LCG) 进行了合理的描述，两者都执行该功能。这些旨在或多或少地在整个有效范围内均匀分布整数，并代表生成更复杂分布所需的核心功能。

从其他分布生成数字可以通过从生成均匀分布的整数伪随机抽取的方法之一中提取数字来执行。有很多方法可以做到这一点：

1.  [**逆变换采样**](http://en.wikipedia.org/wiki/Inverse_transform_sampling_method)- 如果分布的 CDF 的逆具有闭合形式，则可以使用来自 U(0,1) 的绘图从底层 PDF 生成绘图。
2.  **身份**- 一些分布可以通过使用其他分布的身份来生成。[正态分布](http://en.wikipedia.org/wiki/Normal_distribution)属于这一类，因为它的逆 CDF 没有封闭形式。有[几种方法](http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_from_normal_distribution)可用于从标准正态分布生成绘图。
3.  **用户定义的分布**- 如果没有封闭形式，或者没有合适的身份可用于生成变量，开发人员可以通过采样和创建 PDF 的直方图来近似 PDF。然后可以使用它来构建 CDF 及其逆的近似值，从中可以进行绘制。
4.  [**拒绝采样**](http://en.wikipedia.org/wiki/Rejection_sampling)- 此方法通过拒绝来自不同 PDF 的不符合所需 PDF 属性的绘图来从 PDF 生成变量。

如果您正在寻找 Mersenne Twister 的 C++ 类库的具体实现细节，您可以查看[Boost 源代码](http://www.boost.org/doc/libs/1_53_0/boost/random/mersenne_twister.hpp)，这将提供一些关于 Boost 如何实现它的见解。AFAIK，C++11 标准没有指定如何实现，只指定它应该如何表现。实现留给编译器开发人员，但如果许多更常见的编译器使用 Boost 实现以外的其他东西，我会感到惊讶（更新：尽管 MSalters 的以下观察是特定编译器执行其他操作的原因之一）。[Boost normal_distribution 类](http://www.boost.org/doc/libs/1_53_0/boost/random/normal_distribution.hpp)也是如此。

# javascript - 从 android 活动调用 javascript 函数

> ID：15673509
> 
> 赞同：5
> 
> 时间：2013-03-28T03:02:01.497
> 
> 标签：javascript, android, html

我想从一个 android 活动中调用一个 javascript 函数，但它似乎不起作用。我使用了 android webview 函数 webview.loadUrl("javascript:function()"); 这是我的安卓代码：

```
package com.example.web;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebView;

public class MainActivity extends Activity {

    WebView webview;
    int i=30;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        webview = (WebView)findViewById(R.id.webView1);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.loadUrl("file:///android_asset/index.html");
        webview.loadUrl("javascript:change(i)");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是我的html代码：

```
 <html>
<body>
<div id="texta">text</div>
<script>

function change(num){
document.getElementById("texta").innerHTML=num;
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T03:14:30.323

在您尝试执行 javascript 时，您的页面可能尚未完全加载。你能试一下吗：

```
webView.setWebViewClient(new WebViewClient() {

   public void onPageFinished(WebView view, String url) {
        view.loadUrl("javascript:change(i)");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:29:04.587

试试看：

```
String URL = "file:///android_asset/filename.html";
webviewBrowser=(WebView)findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true);
webview.setWebViewClient(new WebViewClient(webview.loadUrl(URL)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T14:46:11.750

尝试改变这一点：

```
webview.loadUrl("javascript:change(i)"); 
```

对此

```
webview.loadUrl("javascript:change(" + i +")"); 
```

您编写“i”的方式不是Java代码中的变量“i”，而只是一个名为“i”的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T13:39:54.457

什么是“i”，如果“i”是数字，则指定数字，如果“i”是字符，请用双引号将其括起来，您正在调用一些参数的方法，请纠正您的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-23T12:04:01.693

试试 webview.loadUrl("javascript:change(\""+i"\")");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T03:51:01.613

尝试：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    webview = (WebView)findViewById(R.id.webView1);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.loadUrl("file:///android_asset/index.html");
    webview.loadUrl("javascript:change("+String.valueOf(i)+")");

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-12T12:36:22.170

[![在此处输入图像描述](../Images/91d78041592c31094bd65fc5afe01c83.png)](https://i.stack.imgur.com/Re8e1.png)

```
 protected void onCreate(Bundle savedInstanceState) 
 {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);
   final Activity MyActivity = this;
   text=(EditText)findViewById(R.id.textValue);
   Show=(Button)findViewById(R.id.textButton);
   webView= (WebView) findViewById(R.id.webView);
   getWindow().setFeatureInt(Window.FEATURE_PROGRESS,
                                    Window.PROGRESS_VISIBILITY_ON);
   webView.setWebChromeClient(new WebChromeClient() {
   public void onProgressChanged(WebView view, int progress) {

   MyActivity .setTitle("Loading...");
     MyActivity .setProgress(progress * 100);

     if (progress == 100)
     MyActivity .setTitle("Android Dhina");
    }
   });
     webView.setWebViewClient(new WebViewClient());
     webView.addJavascriptInterface(new WebAppInterface(this), "Android");

     webView.getSettings().setJavaScriptEnabled(true);
     webView.loadUrl("file:///android_asset/web.html");

     Show.setOnClickListener(new OnClickListener()
      {
       @Override
       public void onClick(View v) 
       {
         webView.loadUrl("javascript:callFromAndroidActivity
                          (\""+text.getText().toString()+"\")"); }
        }); 
```

# sql - varchar 数据类型需要返回具有一定数值的行

> ID：15673516
> 
> 赞同：1
> 
> 时间：2013-03-28T03:02:32.497
> 
> 标签：sql, sql-server

我必须使用一个函数创建一个视图，该函数将在成百上千列之间用逗号格式化值。然后我需要在视图上运行一个 select 语句来查找值大于 800 的项目。我遇到的问题是，在定义 WHERE 语句时，我收到以下错误：

> 消息 245，级别 16，状态 1，第 4
> 行将 varchar 值“17.50”转换为数据类型 int 时转换失败。

我认为这是因为我在视图中创建的数据类型，但我不确定如何以允许我编写 select 语句以查看值 < 800 的方式编写它，并且将保持具有的格式要求成百列和千列之间的逗号。

这是选择语句：

```
SELECT VendorName
FROM VendorStatistics
WHERE InvLineItemTotal < 800 
```

这是创建 w 视图的原始代码：

```
CREATE VIEW VendorStatistics
AS
SELECT VendorName, COUNT(Invoices.InvoiceID) AS CountOfInvoices, CONVERT(varchar, SUM(InvoiceLineItemAmount), 1) AS InvLineItemTotal
FROM Vendors JOIN Invoices
    ON Vendors.VendorID = Invoices.VendorID
    JOIN InvoiceLineItems
    ON Invoices.InvoiceID = InvoiceLineItems.InvoiceID
GROUP BY VendorName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:27:35.060

`SUM(InvoiceLineItemAmount) AS InvLineItemTotalNumeric`您的视图应在其输出中包含原始求和的数字字段。使用该字段进行数字比较：

```
SELECT VendorName
FROM VendorStatistics
WHERE InvLineItemTotalNumeric < 800 
```

仅使用格式化字段`InvLineItemTotal`进行显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:47:22.443

你有没有尝试过？

```
SELECT VendorName
FROM VendorStatistics
WHERE convert(float, InvLineItemTotal) < 800.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:54:07.513

出于多种原因，这是一个坏主意，但如果您必须为作业执行此操作，请更改视图以将实数和格式化数字都包含为字符串。

```
CREATE VIEW VendorStatistics
AS
SELECT VendorName, COUNT(Invoices.InvoiceID) AS CountOfInvoices, CONVERT(varchar, SUM(InvoiceLineItemAmount), 1) AS InvLineItemTotal, SUM(InvoiceLineItemAmount) as InvoiceLineItemSum
FROM Vendors JOIN Invoices
    ON Vendors.VendorID = Invoices.VendorID
    JOIN InvoiceLineItems
    ON Invoices.InvoiceID = InvoiceLineItems.InvoiceID
GROUP BY VendorName 
```

现在可以查询：

```
SELECT VendorName
FROM VendorStatistics
WHERE InvoiceLineItemSum < 800.0 
```

甚至

```
SELECT VendorName, InvLineItemTotal
FROM VendorStatistics
WHERE InvoiceLineItemSum < 800.0 
```

# symfony - 我可以使用两个不同的 form_label 标签吗？

> ID：15673517
> 
> 赞同：0
> 
> 时间：2013-03-28T03:02:35.487
> 
> 标签：symfony

我正在使用[单独的模板](http://symfony.com/doc/current/cookbook/form/form_customization.html#method-2-inside-a-separate-template)来定义表单中的块。

我还想`form_label`在与我的表单相同的模板中自定义 a （此处的[方法 1](http://symfony.com/doc/current/cookbook/form/form_customization.html#method-1-inside-the-same-template-as-the-form)）。这是因为我已经定义了我的`form_label`块以呈现我的实际输入字段，但是对于`ArrayCollections`，我想以不同的方式呈现事物。

例如，我想渲染一个`emails`数组。这是我的代码：

```
<h4>{{ form_label(form.emails) }}</h4>
{% for email in form.emails %}
  {{ form_row(email) }}
{% endfor %} 
```

对于`form.emails`标签，我只希望它输出文本（在本例中为“电子邮件”），而对于实际`input`字段，我想使用我在模板中定义的内容（`label`带有 class 的标签`control-label`等）。因此，它按我的愿望为每个工作`email`，而不是为`form_label(form.emails)`部分工作。

这可能吗？因为我已经用过

```
{% form_theme form 'TechrescueAdminBundle:Form:fields.html.twig' %} 
```

我也不能用

```
{% form_theme form _self %} 
```

还有其他方法吗？如果没有，有什么解决办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:44:35.780

你不能直接设置类而不是使用一个新块吗？

```
{{ form_label(form.item, null, {'label_attr' : {'class': 'control-label'}}) }} 
```

来自：[Symfony2，如何使表单标签类/属性与​​其输入不同？](https://stackoverflow.com/questions/10919619/symfony2-how-to-make-a-form-label-class-attr-different-than-its-input)

# ruby-on-rails - 如何让列自动计算？导轨

> ID：15673520
> 
> 赞同：1
> 
> 时间：2013-03-28T03:03:14.083
> 
> 标签：ruby-on-rails, postgresql

我在表格中有每日股票价格，并且我添加了一个我想自动计算的列。我不希望它是手动计算，因为股票价格是我使用金融 api 导入模型的东西。

因此我只是使用`ActiveRecord-import`然后让该列自动填充。

有问题的列是百分比变化和过去 5 天的平均值。我觉得这是我可以在数据库端设置的东西，以便自动填充这些列。几乎就像 Excel 能够只写`=a1/b1`，然后填充整个表格。

这在 Rails 模型或 postgresql 中是否可行？（使用 rails 3.2 和 postgresql 9.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:00:26.047

还有另一个选项更接近您的想法：**“计算字段”**或**“生成的列”**。实际上是一个以行类型为参数的函数。我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html#XFUNC-SQL-COMPOSITE-FUNCTIONS)：

> 函数表示法和属性表示法之间的等价性使得可以在复合类型上使用函数来模拟“计算字段”

您的示例可能如下所示：

```
CREATE TABLE tbl (a_id int, a int, b int);
INSERT INTO tbl VALUES (1,3,7), (2,4,8), (3,9,2); 
```

模拟计算域的函数`calc`：

```
CREATE OR REPLACE FUNCTION calc(tbl)
  RETURNS numeric LANGUAGE sql IMMUTABLE  AS
$func$
    SELECT round($1.a::numeric/$1.b, 2)
$func$; 
```

称呼：

```
SELECT *, t.calc FROM tbl t;  -- note the table-qualified call! 
```

回报：

```
 a_id | a | b | calc
------+---+---+------
    1 | 3 | 7 | 0.43
    2 | 4 | 8 | 0.50
    3 | 9 | 2 | 4.50 
```

具有更多详细信息和解释的相关答案：
[PostgreSQL 中的计算/计算列](https://stackoverflow.com/questions/8250389/computed-calculated-columns-in-postgresql/8250729#8250729)
[如何进行忽略年份的日期数学？](https://stackoverflow.com/questions/15169410/how-do-you-do-date-math-that-ignores-the-year/15179731#15179731)
[将常见查询存储为列？](https://stackoverflow.com/questions/11165450/store-common-query-as-column/11166268#11166268)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:16:42.057

我知道`DB`侧面有 2 个选项，您可以尝试使用 a `view`，其中包含获取动态字段的逻辑，或者您可以使用 a`trigger`在任何表更改时自动填充它们

**更新：** **触发器** 只不过是在您对表执行任何更新（插入/更新/删除）时自动触发的函数，这里有更多信息：[http ://www.postgresql.org/docs /9.1/static/sql-createtrigger.html](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)

**视图**是给定 sql 查询的伪名称，您可以将逻辑编写为

```
create view test as select 1+1 as dynamic_col 
```

然后将其用作

```
select * from test; 
```

在上述情况下输出应为 2，但可以根据您的要求自定义视图

这里有更多信息：[http ://www.postgresql.org/docs/9.2/static/sql-createview.html](http://www.postgresql.org/docs/9.2/static/sql-createview.html)

# ios - 添加超过 4 个子视图时 Auto Layout 无法满足约束

> ID：15673522
> 
> 赞同：0
> 
> 时间：2013-03-28T03:03:19.130
> 
> 标签：ios, autolayout

自动布局正在做一些对我来说没有意义的事情，但希望对你们中的一个人来说：

我有一个 UIView containerView 和 5 个 UIViews coverview1-coverview5。我想在 containerView 中将这 5 个封面视图彼此相邻放置：相同的宽度，相同的底部对齐，任何地方都没有间距，例如 |[ __ ][ __ ][ __ ][ __ ][ __ ]|

所以我在做：

```
[coverviewContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: 
  @"H:|[coverview1(>=0)][coverview2(==coverview1)][coverview3(==coverview1)][coverview4(==coverview1)][coverview5(==coverview1)]|" options:NSLayoutFormatAlignAllBottom metrics:nil views:viewsDictionary]]; 
```

我得到：

```
Unable to simultaneously satisfy constraints.
(
  "<NSLayoutConstraint:0x1d5ae4f0 ItemView:0x1d58f6f0.centerX == ItemView:0x1d580410.centerX>",
  "<NSLayoutConstraint:0x1d5ae470 ItemView:0x1d58f6f0.centerX == ItemView:0x1d59b480.centerX>",
  "<NSLayoutConstraint:0x1d5aed70 ItemView:0x1d580410.centerX == ItemView:0x1d59b480.centerX>"
)
Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1d5ae470 ItemView:0x1d58f6f0.centerX == ItemView:0x1d59b480.centerX> 
```

奇怪的是，如果我执行以下任何操作，我都不会收到警告：

```
[coverviewContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: 
  @"H:|[coverview1(>=0)]|" options:NSLayoutFormatAlignAllBottom metrics:nil views:viewsDictionary]];
//or 
[coverviewContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: 
  @"H:|[coverview1(>=0)][coverview2(==coverview1)]|" options:NSLayoutFormatAlignAllBottom metrics:nil views:viewsDictionary]];
//or
[coverviewContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: 
  @"H:|[coverview1(>=0)][coverview2(==coverview1)][coverview3(==coverview1)]|" options:NSLayoutFormatAlignAllBottom metrics:nil views:viewsDictionary]];
//or
[coverviewContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: 
  @"H:|[coverview1(>=0)][coverview2(==coverview1)][coverview3(==coverview1)][coverview4(==coverview1)]|" options:NSLayoutFormatAlignAllBottom metrics:nil views:viewsDictionary]];
//or
[coverviewContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: 
  @"H:|[coverview1(>=0)][coverview2(==coverview1)][coverview3(==coverview1)][coverview5(==coverview1)]|" options:NSLayoutFormatAlignAllBottom metrics:nil views:viewsDictionary]]; 
```

（最后两个不一样，因为我把coverview4换成了coverview5）

为什么我最多只能添加 4 个视图？为什么添加第 5 个会导致视图 centerX 对齐突然出现问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T11:10:44.827

错误消息中有一个很好的提示：

> 无法同时满足约束。

因此，研究错误中显示的约束：

```
 "<NSLayoutConstraint:0x1d5ae4f0 ItemView:0x1d58f6f0.centerX == ItemView:0x1d580410.centerX>",
  "<NSLayoutConstraint:0x1d5ae470 ItemView:0x1d58f6f0.centerX == ItemView:0x1d59b480.centerX>",
  "<NSLayoutConstraint:0x1d5aed70 ItemView:0x1d580410.centerX == ItemView:0x1d59b480.centerX>" 
```

我们可以看到有两个约束在`ItemView`instance上指定了相同的东西`0x1d58f6f0`。第一个说它`centerX`应该与`ItemView`instance相同`0x1d580410` `centerX`。

第二个说它`centerX`应该与`ItemView`instance相同`0x1d59b480` `centerX`。

因此，我们有两个相互矛盾的约束。他们都试图告诉在`ItemView`哪里放置它的水平中心，并且他们都给出了不同的指示。想想两个人同时对你大喊大叫，告诉你站在两个不同的地方。

自动布局运行时最好处理这个问题。两个相互冲突的约束？忽略其中之一。在这种情况下，它会忽略或“打破”约束`0x1d5ae470`。

你的其他有效限制呢？为什么他们使用四个视图而不是五个视图？我们必须考虑到 Auto Layout 运行时会尝试根据您的意愿在*容器视图*中布局视图。有四个视图，它可以做你想做的事。有五个视图，它*试图*做你想做的事，但失败了。这取决于设置的约束。如果视图必须水平连续对齐，那么在给定容器视图大小的情况下可以这样做吗？如果没有，您将需要水平宽度约束，允许`ItemView`宽度减小，以便五个可以很好地组合在一起。

要考虑的另一件事是您是否`coverview1`通过`coverview5`编程方式创建了这些视图，或者它们是否在 Xib 中设置。两者都有问题。如果您以编程方式添加它们，则需要设置`translatesAutoresizingMaskIntoConstraints`标志以`NO`防止默认情况下添加自动调整大小约束，并且无疑会与您设置的约束冲突。

或者，如果您在 Xib 中创建了这些视图，则需要以编程方式删除任何现有的 Interface Builder 强加给您的约束。否则，这些可能再次与您使用可视格式语言以编程方式添加的内容发生冲突。

# python - 如何分析或改进侄女基于摩尔斯电码的简单压缩算法？

> ID：15673523
> 
> 赞同：12
> 
> 时间：2013-03-28T03:03:21.723
> 
> 标签：python, algorithm, python-3.x, morse-code

我 8 岁的侄女昨天在学校上了一堂摩尔斯电码课，她的任务是将各种短语转换为摩尔斯电码。其中一个短语包括她的年龄，而不是写作**`---..`**，她写作**`3-2.`**是因为（用她的话），“这样写的少。” 这个初级的“压缩算法”激发了我的好奇心，所以我写了一点代码来实现它。

但是，我们在此过程中进行了一些更改。我向她指出，如果你写的只是**`.....-----`**，没有任何方法可以判断作者的意思是`50`或`eeeeettttt`。实际上，每个单词的每个字母和每个单词之间都有一个停顿，所以这不是问题，但我们的方案没有这个问题。我拿出一些方格纸，建议用另一个符号填充每个符号的莫尔斯电码，以方便编码并消除方案中的歧义。我很好的建议使用`+`，因为“没有人用句子写过这些。” （哎呀，我最近毕业于数学学位，但很公平。）

由于我们中的一些人*确实*使用`+`，并且我们都使用连字符和句点/点，这会与我们对摩尔斯电码的标准定义相冲突，因此这些符号分别替换为`p`、`h`和`d`。当然，这给我们带来了如何处理未在我们的扩展摩尔斯电码中定义的符号的问题。我的侄女想简单地忽略它们，所以我们就这么做了。为了文本信息的大小写敏感，代码中的大写字母不小写；它们只是按原样进行并用`+`.

### 算法总结：

1.  莫尔斯电码右填充为 5 个字符`+`
2.  我们扩展了摩尔斯电码来代替、`p`for和for 。`+``d``.``h``-`
3.  未在我们的“扩展”摩尔斯电码中定义的符号将完整地传递。
4.  除非仅出现一个连续字符，否则将替换连续的符号，在这种情况下省略该数字。

### 潜在的陷阱：

1.  我的填充方案可能会降低压缩的有效性。
2.  使用大于 5 个字符的块可以提高压缩率
3.  如果我的侄女或我对压缩算法有所了解，我们可能会使用它来使它们成功。
4.  这显然不适合生产，但由于有许多用于此类目的的有效压缩算法，我暂时忽略了这个问题。
5.  ？？？

### 例子：

在我们的算法中，“Hello, World”转换为

```
H++++.++++.-..+.-..+---++,+++++++++W++++---++.-.++.-..+-..++ 
```

并压缩到

```
H4+.4+.-2.+.-2.+3-2+,9+W4+3-2+.-.2+.-2.+-2.2+ 
```

这是我放在一起的 Python 代码：

```
#!/usr/bin/python3

import itertools
import string

class MorseString(str):
    def __init__(self, string):
        # or, pad values during iteration but this seems neater
        self._char_morse_map = {"a":".-+++", "b":"-...+", "c":"-.-.+", "d":"-..++", \
                                "e":".++++", "f":"..-.+", "g":"--.++", "h":"....+", \
                                "i":"..+++", "j":".---+", "k":"-.-++", "l":".-..+", \
                                "m":"--+++", "n":"-.+++", "o":"---++", "p":".--.+", \
                                "q":"--.-+", "r":".-.++", "s":"...++", "t":"-++++", \
                                "u":"..-++", "v":"...-+", "w":".--++", "x":"-..-+", \
                                "y":"-.--+", "z":"--..+", "1":".----", "2":"..---", \
                                "3":"...--", "4":"....-", "5":".....", "6":"-....", \
                                "7":"--...", "8":"---..", "9":"----.", "0":"-----",
                                " ":"+++++", ".":"d++++", "+":"p++++", "-":"h++++"}

        self._morse_char_map = dict()
        for letter, code in self._char_morse_map.items():
            self._morse_char_map[code] = letter

        self._string = string

        # convert the string to "Morse code". Could also use c.lower()
        self._morse_string = "".join([self._char_morse_map.get(c, c.ljust(5, "+")) for c in self._string])

    def compress(self):
        def grouper(n, k):
            return str(n) + k if n > 1 else k

        # could just use lambda
        return "".join([grouper(len(list(g)), k) for k, g in itertools.groupby(self._morse_string)])

    def decompress(self):
        i = 0
        start = 0
        chars = list()
        sc = self.compress()
        while i < len(sc):
            curr = sc[i]
            i += 1
            if not(curr in string.digits):
                num = 1 if start + 1 == i else int(sc[start:i-1])
                chars.append("".join(curr * num))
                start = i

        code = "".join(chars)
        chars = list()

        for i in range(0, len(code), 5):
            piece = "".join(code[i:i+5])
            chars.append(self._morse_char_map.get(piece, piece[0]))

        return "".join(chars)

def main():
    s0 = "Hello, World"
    ms0 = MorseString(s0)
    print(ms0._morse_string)
    print(ms0.compress())
    assert(s0 == ms0.decompress())

    s1 = "Hello  2 world."
    ms1 = MorseString(s1)
    assert(s1 == ms1.decompress())

    s2 = "The quick brown fox jumped over the lazy dog."
    ms2 = MorseString(s2)
    assert(s2 == ms2.decompress())

    s3 = "abc  -.+"
    ms3 = MorseString(s3)
    ms3
    assert(s3 == ms3.decompress())

if __name__ == "__main__":
    main() 
```

有哪些简单的方法可以 a) 改进我们的算法，并且 b) 相对容易向我 8 岁的侄女解释？虽然最后一点显然是主观的，但我还是尽量满足她的好奇心。

我也欢迎对代码进行任何改进，因为它的结构不太好（我相当肯定它的结构很差，实际上，但它又快又脏），尽管这完全是为了我的利益，因为我还没有让我的侄女使用 Python (YET)。

### 更新

这是代码的更新版本，它试图结合 user1884905 对算法的修改和 Karl 对代码本身的改进。

```
import itertools
import string

_char_morse_map = {"a":".-", "b":"-...", "c":"-.-.", "d":"-..", \
                   "e":".", "f":"..-.", "g":"--.", "h":"....", \
                   "i":"..", "j":".---", "k":"-.-", "l":".-..", \
                   "m":"--", "n":"-.", "o":"---", "p":".--.", \
                   "q":"--.-", "r":".-.", "s":"...", "t":"-", \
                   "u":"..-", "v":"...-", "w":".--", "x":"-..-", \
                   "y":"-.--", "z":"--..", "1":".----", "2":"..---", \
                   "3":"...--", "4":"....-", "5":".....", "6":"-....", \
                   "7":"--...", "8":"---..", "9":"----.", "0":"-----",
                   " ":"", ".":"d", "+":"p", "-":"h"}

_morse_char_map = {
    code: letter
    for letter, code in _char_morse_map.items()
}

def encode(s):
    return "".join(_char_morse_map.get(c, c) + "+" for c in s)

def decode(encoded):
    return "".join(decode_gen(encoded))

def decode_gen(encoded):
    word = ""
    for c in encoded:
        if c != "+":
            word += c
        else:
            yield _morse_char_map.get(word, word) if word != "" else " "
            word = ""

def compress(s):
    def grouper(n, k):
        return str(n) + k if n > 1 else k

    return "".join(grouper(len(list(g)), k) for k, g in itertools.groupby(s))

def decompress(compressed):
    return "".join(decompress_gen(compressed))

def decompress_gen(compressed):
    digits = ""
    for c in compressed:
        if c in string.digits:
            digits += c
        else:
            number = int(digits) if digits else 1
            yield "".join(c * number)
            digits = "" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:58:53.180

可以进行一个简单的更改来压缩输出（至少在大多数情况下）是保持两个字母之间暂停的想法，并让您的`+`- 符号表示这个暂停（即加号用作新字符 -字符而不是使用它们作为填充）。

这将使所有数字都`0-9`变长一个字符，但会使很多常见的字母变短。

例如`a`,和将变为, `e`, and而不是, , and 。（并且可以表示而不是）`i``t``.-+``.+``..+``-+``.-+++``.++++``..+++``-++++``space``+``+++++`

所以你的`Hello, World`例子会变成：

```
H+.+.-..+.-..+---+,++W+---+.-.+.-..+-..+ 
```

代替

```
H++++.++++.-..+.-..+---++,+++++++++W++++---++.-.++.-..+-..++ 
```

并压缩到

```
H+.+.-2.+.-2.+3-+,2+W+3-+.-.+.-2.+-2.+ 
```

代替

```
H4+.4+.-2.+.-2.+3-2+,9+W4+3-2+.-.2+.-2.+-2.2+ 
```

理解这个推理，霍夫曼编码似乎只是自然的下一步，其基本思想是使最常见的字符占用尽可能少的空间。

**编辑：**

另请参阅此 wikipedia-image 的[二分搜索](http://en.wikipedia.org/wiki/Dichotomic_search)表，显示靠近树顶部的最常出现的字符。

![摩尔斯电码树](../Images/548aadb6101a64a240296629189ae57e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:09:40.827

我不会为此上课；照原样，您为每个字符串重新创建映射。使用类仍然可以避免这种情况，但实际上只设置这些映射然后编写一个普通函数来编码字符串更简单。“莫尔斯电码字符串”与普通字符串并没有本质上的区别，并且将压缩和解压缩功能附加到它并没有任何意义。写一堆函数就行了；当你有一个真正有意义的抽象时，担心 OOP。

如所写，您的解压功能毫无意义；压缩不是解压缩的一部分，并且您已将莫尔斯电码的解压缩与*解码*回同一函数中的纯字符串结合起来。这是一团糟。

* * *

```
self._morse_char_map = dict()
for letter, code in self._char_morse_map.items():
    self._morse_char_map[code] = letter 
```

这是用 dict 理解更简洁地写的：

```
self._morse_char_map = {
    code: letter
    for letter, code in self._char_morse_map.items()
} 
```

* * *

```
"".join([...]) 
```

这里不需要方括号；只需提供一个生成器表达式`join`，并利用特殊的语法规则。

* * *

```
chars = list() 
```

这写得更整洁`chars = []`，但让我们尝试在更高的层次上改进它......

* * *

```
while i < len(sc):
    curr = sc[i]
    i += 1
    if not(curr in string.digits):
        num = 1 if start + 1 == i else int(sc[start:i-1])
        chars.append("".join(curr * num))
        start = i 
```

一种技巧：与其设置一个空列表并反复将事物累积`''.join`在一起，不如编写一个生成器并让结果传递。当您将逻辑正确分离到自己的函数中时，这会变得更容易：

```
def decompress(compressed):
    return ''.join(decompress_gen(compressed))

def decompress_gen(compressed):
    start = 0
    i = 0
    while i < len(compressed):
        curr = compressed[i]
        i += 1
        if not(curr in string.digits):
            num = 1 if start + 1 == i else int(compressed[start:i-1])
            yield "".join(curr * num)
            start = i 
```

现在，显然我们真的想用循环遍历`compressed`符号`for`；手动增加索引看起来真的很糟糕。为了完成这项工作，我们需要一次查看一个字符的数据，并记住我们已经看到的数字的任何部分。我们可以随时进行算术运算，但让我们`int`通过建立一个作为计数一部分的字符缓冲区来保留对的使用：

```
def decompress_gen(compressed):
    number_digits = ''
    for char in compressed:
        if char in string.digits:
            number_digits += char
        else:
            number = int(number_digits) if number_digits else 1
            yield "".join(char * number)
            number_digits = '' 
```

* * *

```
chars = list()

for i in range(0, len(code), 5):
    piece = "".join(code[i:i+5])
    chars.append(self._morse_char_map.get(piece, piece[0]))

return "".join(chars) 
```

此时，`code`是一个字符串，因此`''.join`在创建时不需要`piece`。但同样，我们可以在这里使用生成器（好吧，生成器表达式）：

```
return ''.join(
    self._morse_char_map.get(piece, piece[0])
    for piece in (
        code[i: i + 5]
        for i in range(0, len(code), 5)
    )        
) 
```

# c++ - 为什么单个线程比多个线程快，即使它们本质上具有相同的开销？

> ID：15673524
> 
> 赞同：5
> 
> 时间：2013-03-28T03:03:34.380
> 
> 标签：c++, windows, multithreading, cpu, metrics

我在 8 核处理器上运行 64 位 Windows 7。我运行了以下内容：

```
 #include "stdafx.h"
    #include <iostream>
    #include <Windows.h>
    #include <process.h>
    #include <ctime>

    using namespace std;

    int count = 0;
    int t = time(NULL);

    //poop() loops incrementing count until it is 300 million.
    void poop(void* params) {
        while(count < 300000000) {
            count++;
        }

        cout<< time(NULL) - t <<" \n";
    }

    int _tmain(int argc, _TCHAR* argv[])
    {
        //_beginthread(poop, 0, NULL);      
        //_beginthread(poop, 0, NULL);
        poop(NULL);

        cout<<"done"<<endl;

        while(1);

        return 0;
    } 
```

我将结果与取消注释 beginThread 时的结果进行了比较。事实证明，单线程版本最快完成了这个！实际上，添加更多线程会使该过程花费更长的时间。计数 3 亿使该过程花费了 8 多秒，我认为这足以排除对 beginThread 的函数调用 + 其他小开销。

我做了一些研究，多线程进程变慢的一般结论是开销。但在这种情况下，无论我运行多个线程还是单个线程，变量计数（存在于数据段中，因为它是一个预先分配的变量 afaik）被访问的次数是相等的。所以基本上，开销（如果是开销问题）并不是因为访问全局变量的成本高于访问局部变量的成本。

查看我的任务管理器，单线程进程使用 13% 的 cpu（大约 1/8 个内核），添加线程会以大约 1/8 的增量增加 cpu 使用率。所以就cpu功率而言，假设任务管理器准确地描述了这一点，添加线程会使用更多的cpu。这进一步让我感到困惑..我如何使用更多的整体 cpu，具有单独的内核，但总体上需要更长的时间来完成任务？

TLDR：为什么会这样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T03:05:45.100

您的代码本质上是错误的。

`count++`是一个三步操作，读取值，递增它，然后将它存储回变量中。
如果两个线程同时`count++`在同一个变量上运行，其中一个将覆盖另一个的更改。

因此，多线程版本最终会做额外的工作，因为每个线程都会破坏其他线程的进度。

如果你做`count`一个局部变量，时间应该看起来更正常。

或者，您可以使用互锁增量，这是线程安全的，但需要额外的开销来跨线程同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T03:31:18.283

正如您最初问题的一些评论者指出的那样，您存在正确性和性能问题。首先，您的所有线程都在同时访问**计数**。这意味着无法保证线程实际上将全部**计数**到 3 亿。您可以通过在**便便**函数中声明**计数来解决此正确性错误**

 **```
void poop(void* params) {
    int count  = 0;
    while(count < 300000000) {
        count++;
    }
    cout<< time(NULL) - t <<" \n";
} 
```

请注意，这对**t**来说不是问题，因为它只能由线程读取而不是写入。**然而，这是cout**的一个问题，因为您还从多个线程写入。

此外，正如评论中所指出的，您的所有线程都在访问一个内存位置。这意味着当线程更新**计数**时，必须刷新并重新加载保存它的缓存行。这是非常低效的内存访问。通常，当您访问数组中的连续元素而不是单个变量时会发生这种情况（坏主意，见上文）。对此的解决方案是填充您的阵列以确保每个条目都是您的 L1 缓存行大小的精确倍数，这显然是特定于您的目标处理器的。另一种选择是重组您的算法，以便：每个线程处理一个大块的连续元素，或者每个线程访问元素的方式使得线程不访问相邻的位置。

当您使用 Windows 时，您可能需要考虑为您的代码使用更高级别的抽象，而不是 Win32 线程函数。[并行模式库](http://msdn.microsoft.com/en-us/library/gg675934.aspx)适合这里的账单（英特尔的线程构建模块也是如此[）](http://threadingbuildingblocks.org/)。

```
 concurrency::parallel_invoke(
        [=] { poop(nullptr); },
        [=] { poop(nullptr); }
    ); 
```

这允许 PPL 将您的任务安排在线程池上，而不是您的应用程序必须显式创建线程。

您可能还认为，对于非常小的任务，启动额外线程的开销可能超过并行运行的收益。**

# java - 如何在android的sqlite数据库中存储html页面

> ID：15673525
> 
> 赞同：1
> 
> 时间：2013-03-28T03:03:39.707
> 
> 标签：java, android, sqlite

你如何在android的sqlite数据库中存储一个html页面？我试图将 html 页面转换为字节数组以存储在数据库中。请帮助我如何将插入存储到数据库中，然后在 webview 中打开该负载...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:07:46.423

不要转换为字节。将其作为字符串存储在数据库中 - 它只是文本。至于在 webview 中打开它 - 您将从数据库中读取它，然后调用 loadData() 将其加载到 webview 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:53:31.583

我也认为转换为字符串是最好的解决方案。在这里粘贴一些可能对您有所帮助的代码。获取字符串中的html并保存到db..（省略保存到db代码）

```
private String getDownloadButtonOnly(String url){
    HttpGet pageGet = new HttpGet(url);
ResponseHandler<String> handler = new ResponseHandler<String>() {
    public String handleResponse(HttpResponse response) throws ClientProtocolException, IOException {
        HttpEntity entity = response.getEntity();
        String html; 

        if (entity != null) {
            html = EntityUtils.toString(entity);
            return html;
        } else {
            return null;
        }
    }
};

pageHTML = null;
try {
    while (pageHTML==null){
        pageHTML = client.execute(pageGet, handler);
    }
} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

    Pattern pattern = Pattern.compile("<h2>Direct Down.+?</h2>(</div>)*(.+?)<.+?>", Pattern.DOTALL);
    Matcher matcher = pattern.matcher(pageHTML);
    String displayHTML = null;
    while(matcher.find()){
        displayHTML = matcher.group();
    }

return displayHTML;
}

// after retreiving string from db, 

 String summary = "<html><body>You scored <b>192</b> points.</body></html>";
//load the data
 webview.loadData(summary, "text/html", null); 
```

看看这个：- [http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

# cordova - Phonegap 中的慢速 JQuery Mobile 面板

> ID：15673526
> 
> 赞同：2
> 
> 时间：2013-03-28T03:03:48.487
> 
> 标签：cordova, jquery-mobile, panel

我在 JQM 中为 Phonegap 应用程序实现了一个滑动面板，但由于某种原因，当我尝试在 Android 4.x 上打开它时，它需要 1500 毫秒才能出现，但在 Android 2.x、iOS 和 Blackberry 中它会立即显示。

```
$(document).on("touchstart","img#openLeft", function()
{
     $('#mydiv').panel("toggle");
} 
```

您能否告诉我在不删除滑动动画的情况下，我可以遵循什么策略来使面板显示得更快？

谢谢！

PS 我正在使用 JQuery Mobile 1.3.0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T16:06:02.733

我最终修改了 JQM-1.3.0.css 来解决这个问题，结果发现它们没有硬件加速。

在：

*   @-webkit-keyframes slideinfromright
*   @-moz-keyframes slideinfromright
*   @keyframes slideinfromright
*   @-webkit-keyframes slideinfromleft
*   @-moz-keyframes slideinfromleft
*   @keyframes slideinfromleft
*   @-webkit-keyframes slideouttoleft
*   @-moz-keyframes 向左滑动
*   @keyframes 向左滑动
*   @-webkit-keyframes slideouttoright
*   @-moz-keyframes slideouttoright
*   @keyframes slideouttoright
*   。滑出
*   .slide.in
*   .slide.out.reverse
*   .slide.in.reverse

我改变了所有`-webkit-transform: translateX(x);`的`-webkit-transform: translate3d(x,0,0);`

而且我还更改了我的动画，`data-display="push"`它似乎比它工作得更快，`data-display="reveal"`因为它在翻译时开始动画，而不是等待内容翻译并在之后显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:02:59.533

如文档所示，这些由硬件加速。可能是您的 4.0 设备性能不佳。

`data-animate="false"`您可以通过添加到窗格的 div来禁用动画。它在[文档](http://view.jquerymobile.com/1.3.0/docs/widgets/panels/)中提到。

# javascript - 验证电子邮件的正则表达式：非法字符

> ID：15673527
> 
> 赞同：0
> 
> 时间：2013-03-28T03:03:50.380
> 
> 标签：javascript

使用没有插件的 Jquery 进行表单验证，它们很容易使用。试图自学正则表达式并在墙上。

```
var email = $('#email').val();

// Validate email address

// Regular expression to match email address:
var emailReg = \S+@\S+;

if(email.match(emailReg)) {
    // Pass
}
else {
    // Fail
    $('#email').css("background","yellow");
    var counter2 = setTimeout("$('#email').css('background','white')", 3000);
    return false;
} 
```

我知道这是世界上最简单的正则表达式，只是试图获得功能，稍后我会变得更复杂。

不断收到 SyntaxError: 非法字符 \S (here) +@S+

不明白为什么。已经搜索了这个站点并尝试了几十个总是出现控制台错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:05:27.257

在它周围添加`/`。

```
var emailReg = /\S+@\S+/;
               ^       ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:07:02.627

您需要将正则表达式放在正斜杠中，如下所示：

```
var emailReg = /\S+@\S+/; 
```

这样它就知道它是一个正则表达式对象，而不仅仅是随机运算符放在一起

你也可以这样做：

```
var emailReg = new RegExp("\S+@\S+"); 
```

如果您不只是编写静态正则表达式（例如，从用户输入获取正则表达式），此方法很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:09:51.833

正则表达式在 js 中用正斜杠括起来。尝试 var emailReg = /\S+@\S+/;

# java - 在openGL或更具体地说是LWJGL中，一个人如何相对于相机旋转？

> ID：15673528
> 
> 赞同：0
> 
> 时间：2013-03-28T03:03:51.490
> 
> 标签：java, c++, opengl, 3d, lwjgl

我正在制作一个 3d 游戏`LWJGL`。在这个游戏中，每当我按下箭头键时，我都希望屏幕朝那个方向旋转，而不管当前方向如何。我正在努力在代码中实现这一点。使用基于旋转向量 3f 的三个`glRotatef`函数并不能做到这一点。上下旋转工作，因为`glRotatef(rotation.x, 1, 0, 0)`首先被调用，但只有当你不向上或向下看时，左右才有效。如果是，则围绕通用 y 轴旋转，然后相机旋转。我看到另一个实现可以使用`gluLookAt()`，但我想我会遇到同样的问题。

**编辑** 我认为我通过改变调用 glRotatef() 的顺序来解决我的问题，具体取决于我想要旋转的方向。我认为这会起作用，因为在我的游戏中，我一次只会旋转一个轴。它在某种程度上起作用，但在某些方向上却没有。

```
 if(updown){
             glRotatef(rotation.x, 1, 0, 0);
             glRotatef(rotation.y, 0, 1, 0);
        } else if(leftright){
             glRotatef(rotation.y, 0, 1, 0);
             glRotatef(rotation.x, 1, 0, 0);
        }
        glTranslatef(position.x, position.y, position.z); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:20:53.900

gluLookAt 可能会让您更快地到达那里，但您需要手动围绕原点坐标旋转眼睛坐标。使用 gluLookAt 如果您计划围绕所有 3 个轴旋转，您还需要计算一个向上向量。

我有一种预感，您只需要在执行 glRotate 之前添加一个 glTranslate ，以便相机可以绕着轨道运行。

如果您显示一些代码，您可能会获得更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:57:31.377

我已经解决了这个问题并继续前进。因为我一次只将一个轴旋转 90 度，所以我遍历了所有 64 个可能的方向并手动应用了必要的转换。

# javascript - google map api返回相同的结果

> ID：15673529
> 
> 赞同：0
> 
> 时间：2013-03-28T03:04:05.880
> 
> 标签：javascript, google-maps-api-3, coldfusion

有人可以告诉我为什么 google map api v3 返回相同的结果。这是api中的错误吗？当我将地址地理编码为悉尼时，我遇到了这样的问题。

我在我的coldfusion应用程序中使用google map api，用户输入郊区并获得该地区最近的经销商。

# c++ - 如何在 Eclipse CDT 中为 C/C++ 程序获取控制台输入

> ID：15673530
> 
> 赞同：3
> 
> 时间：2013-03-28T03:04:11.720
> 
> 标签：c++, c, eclipse-cdt, eclipse-juno

我在 Windows7 上通过 cygwin 使用 gcc4 和 gdb 进行了 eclipse June CDT。我似乎无法从控制台获取输入。我四处搜索，它可能与 Eclipse 的 EOF 有关，这可以通过在运行/调试配置中取消选中“将进程输入和输出连接到终端”来解决。但我似乎无法取消选中它。

任何人都可以建议解决此问题的最佳方法。

```
#include <stdio.h>
#include <stdlib.h>

void menu();
int main(void) {

    menu();
    return 0;
}

void menu()
{
    int i=0;
     printf(" \n1\. Push to Queue");
         printf(" \n2\. Pop from Queue");
         printf(" \n3\. Display Data of Queue");
         printf(" \n4\. Exit\n");
         while(1)
         {
              printf(" \nChoose Option: ");
              scanf("%d",&i);
              switch(i)
              {
                    case 1:
                    {
                         int value;
                         printf("\nEnter a valueber to push into Queue: ");
                         scanf("%d",&value);
                        // push(value);
                        // display();
                         break;
                    }
                    case 2:
                    {
                        // delQueue();
                        // display();
                         break;
                    }
                    case 3:
                    {
                        // display();
                         break;
                    }
                    case 4:
                    {
                         exit(0);
                    }
                    default:
                    {
                         printf("\nwrong choice for operation");
                    }
              }
         }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:49:30.317

找到了一对相关的相关SO问题：

*   [Eclipse CDT 控制台输出未显示在带有路径的调试中，并且未显示在没有路径的运行中](https://stackoverflow.com/questions/9528523/eclipse-cdt-console-output-not-showing-up-in-debug-with-path-and-not-showing-up)
*   [使用 Windows 和 MinGW 用 Eclipse 编写的 C++ 程序无法将输出显示到控制台视图](https://stackoverflow.com/questions/5959908/c-program-cannot-display-output-to-console-view-in-eclipse)

长话短说，他们说 cygwin 与其他操作系统相比被视为“不同”的缓冲区，因此控制台不像（可能）应该那样“交互”。一些解决方案建议显式刷新缓冲区，而其他解决方案则提供配置选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:02:47.723

您需要为 Eclipse 配置命令行参数：在运行配置>参数下

在这里阅读

还可以考虑使用 Ant 作为构建脚本。从长远来看效果更好。

# ipad - iPad，iOS6 viewWIllAppear 和视图出现在屏幕上之间的延迟很长

> ID：15673536
> 
> 赞同：1
> 
> 时间：2013-03-28T03:04:50.037
> 
> 标签：ipad, memory-management, ios6, uiviewcontroller, uistoryboard

我正在使用一个相当复杂的基于故事板的 iPad 应用程序。我的工作流程如下一个集合视图推送另一个视图，它以模态方式呈现另一个视图。

模态呈现的第三个视图相当复杂，有 19 个子视图，其中一些是图像视图。该应用程序在 viewDidLoad 中组织视图层次结构方面做了很多工作。viewWillAppear 或 viewDidAppear 中没有其他内容。

困扰我的是，如果我将日志记录语句放在 viewDidLoad 中，我会看到 viewDidLoad 在用户启动故事板 segue 后的 1.5 秒内完成。然后调用 viewWillAppear。**之后，屏幕会在那里停留 3 到 80 秒（是的，八十秒！）。**有时视图显示相对较快，有时则需要很长时间。

**这是我的 viewDidLoad 占用太多内存的症状吗？**换句话说，延迟是因为iOS清理了足够的内存以使我的视图出现吗？

在 xCode 中点击停止按钮后，我重新启动应用程序，执行一系列步骤以呈现视图控制器，这是第一次运行：

/

```
/80 seconds!
    2013-03-27 22:56:30.311 iconmaker[2076:907] -[GLFirstViewController viewWillAppear:] [Line 597] viewWillAppear
    2013-03-27 22:57:50.351 iconmaker[2076:907] -[GLFirstViewController viewDidAppear:] [Line 604] viewDidAppear

//after popping the view controller and repeating:
//less than 2 seconds
2013-03-27 22:59:23.698 iconmaker[2076:907] -[GLFirstViewController viewWillAppear:] [Line 597] viewWillAppear
2013-03-27 22:59:24.306 iconmaker[2076:907] -[GLFirstViewController viewDidAppear:] [Line 604] viewDidAppear 
```

更新：关闭设备，然后重新启动后，视图控制器显示非常快，第一次运行不到 2 秒。这是推送/弹出控制器 4 次后的分配分析。

![在此处输入图像描述](../Images/3013e365a2b959f0c487d1ecb6539f06.png)

**这是内存释放问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:07:05.043

在分析应用程序后，我发现有两个问题在起作用：

1) 我将大型 UIImages 作为二进制数据保存到 coredata 中，如果使用 NSFetchedResultsControllers，则不应这样做，因为它们会提取所有图像数据并将其保存在内存中。

2) iOS6 改变了 viewDidUnload 的工作方式——它永远不会被调用，所以我添加了一些调用来在我的视图控制器消失时手动释放对象。

最终结果是内存占用现在大约为 4mb 基线，随着我推动以前有问题的控制器而变得更高。此外，我可以多次推送/弹出控制器而不会出现内存不足的崩溃。

![在此处输入图像描述](../Images/81f15bdbd136bfb6b59d656513941099.png)

# testing - 詹金斯：如果正在测试的课程没有改变，我如何跳过测试工作？

> ID：15673537
> 
> 赞同：1
> 
> 时间：2013-03-28T03:04:52.163
> 
> 标签：testing, build, jenkins, conditional, jobs

我在 Jenkins 中设置条件构建作业时遇到了很多麻烦。这是我的设置：

我有一系列工作，例如：**JobA <- JobB <- JobC <- JobC-tests**，其中**<-**表示“为”生产工件。因此，**JobA**产生**JobB 所**依赖的工件，依此类推（从右到左阅读，这意味着“依赖于”）。

下游作业之一，假设**JobC**使用 2 个 SCM 存储库，我们称它们为 fooC 和 barC。**JobC-tests**有另一个文件集，称为 barC-tests。

**JobC-tests**需要很长时间。**JobC**非常快。我想避免运行**JobC 测试**，除非 barC 或 barC 测试已更改。

我想将我的构建设置为像这样工作：

1.  如果 fooC 发生变化，则构建 JobC 但不构建 JobC-tests。
2.  如果 barC 发生变化，则构建 JobC，然后在 JobC 完成时构建 JobC-tests。
3.  如果 barC-tests 发生变化，请使用最后成功的 JobC 工件构建 JobC-tests。
4.  如果 JobC 是手动启动的，请不要构建 JobC-tests。
5.  如果 JobC-tests 是手动启动的，则不要构建 JobC。
6.  JobC 阻塞上游作业 (JobB)。

我尝试使用[Conditional BuildStep 插件](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)，但这对我来说似乎根本不起作用。我将 JobC 设置为从 SCM 触发中排除 barC，并将 JobC-tests 设置为轮询 barC，在 JobC-tests 中使用条件构建步骤仅在由 SCM 更改触发时构建 JobC。对 barC-tests 的更改不会触发任何构建，如果这完全可行的话，那会很好。我遇到的问题是 JobC 测试根本没有触发 JobC。

我还尝试创建一个“轮询”作业来轮询对 barC 的更改，然后在构建 JobC 时阻塞，然后构建 JobC 测试。但是，轮询作业变成了上游作业，并且由于 JobC 阻塞了上游作业，我遇到了死锁。

任何帮助或想法将不胜感激。

# c# - 使用内部构造函数和私有设置器对域对象进行单元测试

> ID：15673539
> 
> 赞同：0
> 
> 时间：2013-03-28T03:04:55.447
> 
> 标签：c#, unit-testing, mocking

我在一个名为 Tools.Client 的项目中定义了一个 Person 类，它是一个 Web 服务 API 的包装器。Person 是使用服务返回的 XML 构造的。

```
public class Person
{
  internal Person(XElement personElement)
  {
    this.FirstName = personElement.Element("first_name").Value;
    this.LastName = personElement.Element("last_name").Value;

    this.Jobs = new List<Job>();
    foreach (var jobElement in personElement.Elements("jobs"))
    {
      this.Jobs.Add(new Job(jobElement));
    }
  }

  public string FirstName {get; private set;}
  public string LastName {get; private set;}
  public ICollection<Job> {get; private set;}
} 
```

我在一个名为 Tools.Analysis 的单独项目中有另一个名为 Analyzer 的类，它包含针对从 API 客户端检索到的数据运行的分析逻辑。

```
private readonly ICollection<Person> _people;
public Analyzer(ICollection<Person> people)
{
  _people = people;
}

public AnalysisResult Analyze()
{
  var result = new AnalysisResult();

  foreach (var person in _people)
  {
    // do some analysis, store data in the result
  }

  return result;
} 
```

我想为 Analyzer 类的 Analyze 方法编写单元测试，但我不确定如何解决以下问题：

1.  Person 有一个带有 XElement 参数的内部构造方法。我不想在我的单元测试中创建手动 XElement 对象。

2.  Person 有私人设置器（我认为应该如此，我不希望 Tools.Client 的用户更改从 API 返回的数据）。对具有类似结构的 Job 的额外依赖加剧了这个问题。

我可以想到一些解决方案，但不知道随着时间的推移哪个是最可维护的：

1.  **创建 IPerson 和 IJob 接口**并使用这些接口的模拟或简单测试实现。
2.  **公开公共设置器**以便于测试（同样，我不太喜欢这样）。我想我也可以使用带有 InternalsVisibleTo 属性的内部设置器（不像公共那么糟糕，但仍然不是我想要的）。
3.  **将 XML 解析移到构造函数之外**，并让构造函数获取参数 firstName、lastName、jobs。构造函数仍然可以是内部的，我只需要在我的程序集中使用 InternalsVisibleTo 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:46:44.970

我认为您应该将 xml 解析从`Person`一个单独的类似工厂的类中移出，制作`Person`不可变的类似值对象的类。这样您就不需要模拟它们，您应该能够创建 和 的真实实例以`Person`进行`Job`测试`Analyzer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:55:44.820

我同意你不想让你的二传手公开。你现在有一个不可变的类，你不应该轻易放弃它。

值对象上的接口是可以的，但它们通常是过度设计的。如果有更好的解决方案，请避免这种情况。

选择选项 3。 XML 解析实际上是另一个类的责任；`Person`应该只是一个数据对象。

如果你不能这样做，至少创建一个没有它的构造函数。这不是很好，因为您的构造函数可能会出现分歧（它们不能轻易地相互调用），但它比您所在的位置要好得多。

```
public class Person
{
  internal Person(XElement personElement)
  {
    this.FirstName = personElement.Element("first_name").Value;
    this.LastName = personElement.Element("last_name").Value;

    this.Jobs = new List<Job>();
    foreach (var jobElement in personElement.Elements("jobs"))
    {
      this.Jobs.Add(new Job(jobElement));
    }
  }

  internal Person(string firstName, string lastName, ICollection<Job> jobs)
  {
     //set properties
  }

  public string FirstName {get; private set;}
  public string LastName {get; private set;}
  public ICollection<Job> {get; private set;}
} 
```

# javascript - jquery ui可拖动在ie9 div margin auto中不起作用

> ID：15673543
> 
> 赞同：1
> 
> 时间：2013-03-28T03:05:19.943
> 
> 标签：javascript, jquery, internet-explorer-9, draggable, margin

我有点沮丧，因为这是我第一次无法让在 IE7 和 IE8 中工作的代码在 IE9 中做同样的事情。

当我试图将一个 div 居中在另一个 div 中并使孩子成为一个可拖动的并且`text-align:center`为父母和`margin:auto`孩子做通常的事情时，问题就出现了。

```
#center-menu-container {
    float: left;
    margin-left: 10px;
    width: 880px;
    z-index: 100; /*IE7 fix to lay above image map*/
    text-align: center;
} 
```

和孩子 div

```
#levelmenu {
    margin: auto;
    width: 150px; 
} 
```

我设法在[jsFiddle](http://jsfiddle.net/gtMxc/)重现了这个问题。只需注释 css 面板的第 23 行即可使其可拖动。

# html - 如何在流体容器中垂直居中 div？

> ID：15673545
> 
> 赞同：0
> 
> 时间：2013-03-28T03:05:27.537
> 
> 标签：html, css

我希望能够将包含元数据（例如标题和作者）的 div 垂直居中在具有流体宽度的容器中。在下面的示例中，我希望 .meta div 在文章中垂直居中，这是流体宽度。

我尝试关注这篇文章（[http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)），但它不起作用。

**HTML**

```
<div class="container">
    <h3>Test</h3>
    <article>
        <div class="meta">
            <div class="title"></div>
            <div class="author"></div>
                    <img src="" />
        </div>
    </article>
</div> 
```

**CSS（使用 LESS）**

```
.container {
    h3 {
        margin: -5px 0 0 0;
        padding: 32px 0px 16px 0;
        .freight-sans-pro;
        font-size: 1.375em;
        line-height: 1em;
        font-weight: 200;
    }
    article {
        max-height: 375px;
            overflow: hidden;
        position: relative;
        z-index: 900;
        margin-bottom: 2px;
        background-color: @color-black;
        line-height: 0em;
        a {
            max-height: 375px;
            display: block;
            img { opacity: .5; .opacity-transition; }
        }
        .meta {
            width: 100%;
            position: absolute;
            bottom: 40%;
            z-index: 500;
            padding: 0px 10%;
            color: @color-white;
            font-size: 20px;
            text-align: center;
            .title {
                margin: 0;
                font-size: 2em;
                line-height: 1em;
                font-weight: 700;
                text-shadow: 0px 2px 20px rgba(0, 0, 0, 0.7);
                padding-bottom: 8px;
                text-decoration: none;
                display: block;
            }
            .author {
                margin: 0;
                font-size: .8em;
                line-height: .75em;
                font-style: italic;
                text-transform: uppercase;
                text-shadow: 0px 2px 20px rgba(0, 0, 0, 0.7);
                text-decoration: none;
                display: block;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:22:55.827

尝试了您的 Less，但在 codepen.io 中出现错误，因此无法调试。

你可以尝试这样简单的事情：

```
.container {
  border: 2px solid blue;
  width: 180px;
  height: 120px;
  overflow: hidden;
  display: table-cell;
  vertical-align: middle;
 } 
```

检查它在[这里工作](http://codepen.io/domkoscielak/pen/DEisb)

您可能会发现这篇文章也很有用：http: [//logconsole.com/vertical-align-center-image/](http://logconsole.com/vertical-align-center-image/)

这是关于垂直居中的图像，但在大多数情况下，您可以只使用 div 更改图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:29:56.363

在你想要居中的地方试试这个。我更改了@domkoscielak 的代码以使其正常工作。

```
.meta {
  width: 180px;
  height: 120px;
  top: 50%;
  margin-top: -60px; /*half of height*/
  position: absolute;
} 
```

# r - 为什么 rbindlist 比 rbind “更好”？

> ID：15673550
> 
> 赞同：143
> 
> 时间：2013-03-28T03:05:35.883
> 
> 标签：r, data.table, rbind, rbindlist

我正在阅读`data.table`有关 SO 的文档，并从这里的一些对话中注意到，这`rbindlist`应该比`rbind`.

我想知道为什么`rbindlist`优于`rbind`以及在哪些场景中`rbindlist`真正擅长`rbind`？

在内存利用率方面有什么优势吗？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2013-03-28T03:16:17.583

`rbindlist`是 的优化版本`do.call(rbind, list(...))`，以使用时速度慢而著称`rbind.data.frame`

* * *

## 真正出类拔萃的地方在哪里

一些问题表明`rbindlist`亮点在哪里

[data.frames 列表的快速矢量化合并](https://stackoverflow.com/questions/4863341/how-to-merge-a-list-of-data-frames-by-row/12718498#12718498)

[使用 do.call 和 ldply 将一长串 data.frames（约 100 万）转换为单个 data.frame 时遇到问题](https://stackoverflow.com/questions/9728407/trouble-converting-long-list-of-data-frames-1-million-to-single-data-frame-us/9730292#9730292)

这些具有显示它的速度有多快的基准。

* * *

## rbind.data.frame 很慢，这是有原因的

`rbind.data.frame`进行大量检查，并将按名称匹配。（即 rbind.data.frame 将考虑列可能按不同顺序排列的事实，并按名称匹配），`rbindlist`不进行这种检查，并将按位置加入

例如

```
do.call(rbind, list(data.frame(a = 1:2, b = 2:3), data.frame(b = 1:2, a = 2:3)))
##    a b
## 1  1 2
## 2  2 3
## 3  2 1
## 4  3 2

rbindlist(list(data.frame(a = 1:5, b = 2:6), data.frame(b = 1:5, a = 2:6)))
##     a b
##  1: 1 2
##  2: 2 3
##  3: 1 2
##  4: 2 3 
```

* * *

## rbindlist 的其他一些限制

由于已经修复了一个错误，它**曾经**很难处理：`factors`

[rbindlist 两个 data.tables，其中一个具有因子，另一个具有列的字符类型](https://stackoverflow.com/questions/15933846/)（[错误 #2650](http://r-forge.r-project.org/tracker/index.php?func=detail&aid=2650&group_id=240&atid=975)）

列名重复存在问题

请参阅 [警告消息：在 rbindlist(allargs) 中：强制引入的 NA：data.table 中可能存在错误？](https://stackoverflow.com/questions/14584510/)（[错误＃2384](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2384&group_id=240&atid=975)）

* * *

## rbind.data.frame 行名可能令人沮丧

`rbindlist`可以处理`lists` `data.frames`and `data.tables`，并且将返回一个没有行名的 data.table

`do.call(rbind, list(...))` 你可以使用see进入混乱的行名

[在 do.call 中使用 rbind 时如何避免重命名行？](https://stackoverflow.com/questions/14972998/how-to-avoid-renaming-of-rows-when-using-rbind-inside-do-call/14973062#14973062)

* * *

## 内存效率

就内存而言`rbindlist`是在 中实现的`C`，因此内存效率很高，它用于`setattr`通过引用设置属性

`rbind.data.frame`在 中实现`R`，它做了很多分配和使用`attr<-`（`class<-`并且`rownames<-`所有这些都将（在内部）创建创建的 data.frame 的副本。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-06-01T19:32:49.963

By `v1.9.2`，`rbindlist`已经发展了很多，实现了许多功能，包括：

> *   绑定时选择最高`SEXPTYPE`的列 - 在`v1.9.2`关闭[FR #2456](https://github.com/Rdatatable/data.table/issues/378)和[Bug #4981](https://github.com/Rdatatable/data.table/issues/93)中实现。
> *   正确处理`factor`列 - 首先在`v1.8.10`关闭[Bug #2650](https://github.com/Rdatatable/data.table/issues/139)中实现，并扩展到仔细绑定*有序*因子`v1.9.2`，关闭[FR #4856](https://github.com/Rdatatable/data.table/issues/359)和[Bug #5019](https://github.com/Rdatatable/data.table/issues/84)。

此外，在 中`v1.9.2`，`rbind.data.table`还获得了一个`fill`参数，允许通过填充缺失的列进行绑定，在 R 中实现。

现在`v1.9.3`，在这些现有功能上还有更多改进：

> *   `rbindlist`获得一个参数`use.names`，默认情况下是`FALSE`为了向后兼容。
> *   `rbindlist`还获得一个参数`fill`，默认情况下也是`FALSE`为了向后兼容。
> *   这些功能都是用 C 语言实现的，并且在添加功能时要小心编写，以免影响速度。
> *   由于`rbindlist`现在可以按名称匹配并填充缺失的列，因此`rbind.data.table`只需`rbindlist`立即调用。唯一的区别是`use.names=TRUE`默认情况下为`rbind.data.table`, 向后兼容。

`rbind.data.frame`主要是由于可以避免（通过移动到C）的副本（@mnel 也指出了这一点）而减慢了很多。我认为这不是唯一的原因。`rbind.data.frame`当每个 data.frame 有很多列并且有很多这样的 data.frames 要绑定时，检查/匹配列名的实现也可能会变慢（如下面的基准所示）。

但是，`rbindlist`缺少某些功能（例如检查因子级别或匹配名称）对它的速度比`rbind.data.frame`. 这是因为它们是用 C 语言精心实现的，针对速度和内存进行了优化。

这是一个基准，它突出了有效绑定，同时按列名匹配以及使用来自`rbindlist`. 数据集由 10000 个数据帧组成，每个数据帧大小为 10*500。`use.names``v1.9.3`

*注意：此基准已更新，包括与`dplyr`'s的比较`bind_rows`*

```
library(data.table) # 1.11.5, 2018-06-02 00:09:06 UTC
library(dplyr) # 0.7.5.9000, 2018-06-12 01:41:40 UTC
set.seed(1L)
names = paste0("V", 1:500)
cols = 500L
foo <- function() {
    data = as.data.frame(setDT(lapply(1:cols, function(x) sample(10))))
    setnames(data, sample(names))
}
n = 10e3L
ll = vector("list", n)
for (i in 1:n) {
    .Call("Csetlistelt", ll, i, foo())
}

system.time(ans1 <- rbindlist(ll))
#  user  system elapsed 
# 1.226   0.070   1.296 

system.time(ans2 <- rbindlist(ll, use.names=TRUE))
#  user  system elapsed 
# 2.635   0.129   2.772 

system.time(ans3 <- do.call("rbind", ll))
#   user  system elapsed 
# 36.932   1.628  38.594 

system.time(ans4 <- bind_rows(ll))
#   user  system elapsed 
# 48.754   0.384  49.224 

identical(ans2, setDT(ans3)) 
# [1] TRUE
identical(ans2, setDT(ans4))
# [1] TRUE 
```

在不检查名称的情况下绑定列只需要 1.3 秒，而检查列名和适当绑定只需要多 1.5 秒。与基础解决方案相比，这比`dplyr`'s 版本快 14 倍和 18 倍。

# c# - 在 C# 中，如何锁定表单？

> ID：15673557
> 
> 赞同：0
> 
> 时间：2013-03-28T03:06:26.630
> 
> 标签：c#, sql-server, wait, freeze

我试图在屏幕上显示请稍候框时锁定主窗体，但它不起作用。这是我的困境。

我有 2 个表格。用户单击刷新按钮以加载 SQL Server 列表的主表单，以及在加载列表时显示的请等待表单。SQL Server 线程在使用 C# 时默认是一个单独的线程，它会锁定主线程以处理 SQL 请求。

我可以添加一个后台工作人员，但是我无法更新我的组合框以将列表显示为它的 UI 控件。如果我为此使用处理程序，请等待框的 show_dialog() 将停止锁定主窗体。

在主线程再次激活后，如何在不运行左键队列的情况下锁定此表单？我添加了用户等待时需要执行的代码。

```
 public void PullServers()
    {
        bool ServersFound = false;
        foreach (string Value in SQL.LocateSqlInstances())
        {
            this.cmbServer.Items.Add(Value);
            ServersFound = true;
        }

        if (!ServersFound)
        {
            this.cmbServer.Items.Add(Strings.Lang("ddServerNoneFound"));
            this.cmbServer.SelectedIndex = 0;
        }
        else
        {
            if (!s.empty(General.setting("SQLSERVER")))
            {
                this.cmbServer.Text = General.setting("SQLSERVER");
            }
            else
            {
                this.cmbServer.SelectedIndex = 0;
            }
        }

        this.picRefreshServers.Image = Properties.Resources.Refresh;
    }

    public static Array LocateSqlInstances()
    {
        using (DataTable sqlSources = System.Data.Sql.SqlDataSourceEnumerator.Instance.GetDataSources())
        {
            string Servers = null;
            foreach (DataRow source in sqlSources.Rows)
            {
                string instanceName = source["InstanceName"].ToString();

                if (!s.empty(instanceName))
                {
                    Servers += source["ServerName"].ToString() + "\\" + instanceName + "[[SERVBREAK]]";
                }
            }

            string[] ServersList = Servers.Split(new string[] { "[[SERVBREAK]]" }, StringSplitOptions.RemoveEmptyEntries);
            return ServersList;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:58:47.363

我认为您与 BackgroundWorker 走在了正确的轨道上。我发现以下模式对我很有效。

在您的主窗体中，您需要执行以下步骤。

1.  创建一个 BackgroundWorker 来执行长时间运行的操作。
2.  启动 BackgroundWorker。
3.  将等待表单显示为模式对话框。

```
// Step 1:
BackgroundWorker bg = new BackgroundWorker()
bg.DoWork += new DoWorkEventHandler(bg_DoWork);
bg.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bg_RunWorkerCompleted);

// Step 2:
bg.RunWorkerAsync();

// Step 3:
waitingForm = new WaitingForm();
waitingForm.ShowDialog(); 
```

如您所知，您无法从`bg_DoWork`处理程序更新 UI，因为它不在 UI 线程上运行。因此，只需在此处获取您需要的数据并`bg_RunWorkerCompleted`使用 e.Result 参数将其传递给处理程序。

```
private void bg_DoWork(object sender, DoWorkEventArgs e)
{
    Array servers = SQL.LocateSqlInstances();
    e.Result = servers;
} 
```

在`bg_RunWorkerCompleted`UI 线程上运行，因此在这里更新您的控件是安全的。您应该在此处关闭等待表单，然后更新您的 UI。

```
private void bg_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // Close the Waiting form.
    waitingForm.Close();

    // Retrieve the result of bg_DoWork().
    Array servers = e.Result as Array;

    bool ServersFound = false;
    foreach (string Value in servers)
    {
        this.cmbServer.Items.Add(Value);
        ServersFound = true;
    }

    if (!ServersFound)
    {
        this.cmbServer.Items.Add(Strings.Lang("ddServerNoneFound"));
        this.cmbServer.SelectedIndex = 0;
    }
    else
    {
        if (!s.empty(General.setting("SQLSERVER")))
        {
            this.cmbServer.Text = General.setting("SQLSERVER");
        }
        else
        {
            this.cmbServer.SelectedIndex = 0;
        }
    }

    this.picRefreshServers.Image = Properties.Resources.Refresh;
} 
```

# emgucv - 矩形 - Emgu CV

> ID：15673560
> 
> 赞同：0
> 
> 时间：2013-03-28T03:06:34.600
> 
> 标签：emgucv, rectangles

我试图从图像中区分圆形和矩形对象。我使用轮廓和公式标记了圆形：

```
metric = 4*pie*contour.Area / (contour.perimeter^2) 
```

由于我快完成了，我想知道这个公式的替代方案，它适用于矩形。我数学有点弱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:16:58.687

Emgu cv 提供了一个关于在图像中查找形状的简单教程。
它可以让您找到圆形、三角形和正方形。你可以在这里查看[形状教程](http://www.emgu.com/wiki/index.php/Shape_%28Triangle,_Rectangle,_Circle,_Line%29_Detection_in_CSharp)。

希望这可以帮助您解决问题。

# sql - SQL Server 2012 加入

> ID：15673561
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:06:41.547
> 
> 标签：sql, sql-server

公司负责项目管理的副总裁需要一份所有员工的清单以及他们在各种项目上工作的小时数。结果表应列出员工的姓氏和名字（emp_last_name 和 emp_first_name）、项目编号（work_pro_number）和工作时间（work_hours）。

结果表应列出所有员工，无论他们是否被分配从事项目工作。使用别名作为表名。给每列一个适当的列名。使用 CAST 和 CONVERT 命令生成可轻松放入一页的列表。按 emp_last_name 和 emp_first_name 对输出进行排序。哪些员工或员工被分配到一个项目，但没有在项目上工作任何时间？

使用`JOIN`,`ORDER BY`并将名字和姓氏组合成一列

好的。是的，现在我有：

```
SELECT  
   emp_last_name "Last Name", 
   emp_first_name "Employee First Name", 
   work_pro_number "Project Number", 
   work_hours "Hours Worked" 
FROM 
   employee e 
JOIN 
   assignment a ON (e.emp_superssn = a.work_emp_ssn) 
ORDER BY 
   emp_last_name` 
```

但是我仍然对从事不同项目编号的人有疑问。即 Hyder Amin 在项目编号 20 和 30 中工作我如何结合，这样它将拥有 Hyer amin 并且两个项目都列出了 20、30（或其他）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:43:02.790

请尝试以下查询..

```
select e.emp_last_name, 
    e.emp_first_name,
    (SELECT stuff(( SELECT ', ' + convert(varchar(10),work_pro_number) FROM assignment WHERE e.emp_superssn = assignment.work_emp_ssn FOR XML PATH('')), 1,2,'')) AS work_pro_number,
    sum(work_hours) AS work_hours 
FROM employee e 
LEFT JOIN assignment a ON e.emp_superssn = a.work_emp_ssn
GROUP BY e.emp_last_name, e.emp_first_name, e.emp_superssn
ORDER BY emp_last_name, emp_first_name 
```

# c# - 从 asmx webservice 返回 System.Spatial.Geography

> ID：15673562
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:06:50.380
> 
> 标签：c#, serialization, asmx

我不得不承认我很愚蠢，因为我没有测试过从 asmx webservice 返回 System.Spatial.Geography 的概念。问题是我设计了一个完整的数据库，用示例数据填充它，我为此创建了一个实体模型，毕竟当我想编写一个可以从数据库返回数据的 asmx Web 服务时，我得到了错误，那个系统.Spatial.Geography 不可序列化。

有没有办法在不重新设计我的数据库（和实体）或使用地理包装类的情况下返回我的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:28:25.913

你很幸运，我的朋友。您可以使用一种常见的空间交换格式通过线路发送数据。查看一些格式化程序（例如[gml](http://msdn.microsoft.com/en-us/library/system.spatial.gmlformatter%28v=vs.103%29.aspx)）。您可以以多种标准格式发送它，Gml、“众所周知的文本”又名 WKT 和“众所周知的二进制”又名 WKB。WKB 是最小的，因为它只是一个简单的数据流。WKT 格式可能会变得非常冗长，但它确实可以很好地压缩。希望这可以帮助！

# ios - 将 ViewController 链接到我的代码？

> ID：15673566
> 
> 赞同：0
> 
> 时间：2013-03-28T03:07:04.680
> 
> 标签：ios, xcode, frameworks

我为 iOS 创建了一个空应用程序并添加了一个 ViewController，其中出现以下错误

```
Application windows are expected to have a root view controller at the end of application launch 
```

其他谷歌搜索似乎都没有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:40:25.893

如果使用情节提要，请从 AddDelegate 中的 didFinishLoading 中删除所有内容（返回 yes; 除外）。然后在构建设置中将默认情节提要设置为您的情节提要。将视图控制器添加到情节提要中，确保它的侧面有白色箭头指向它。应该是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:15:30.877

创建视图控制器子类和 nib 是不够的。您必须在应用程序委托的`application:didFinishLaunchingWithOptions:`方法中实际实例化您的视图控制器。您可能希望使用该`initWithNibName:bundle:`方法来执行此操作，并将生成的 VC 分配给`rootViewController`由应用程序委托创建的窗口的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:17:36.730

如果您使用故事板，您可能需要做的就是将一个添加到项目并从那里进行配置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T03:43:19.373

将以下代码放入`application:didFinishLaunchingWithOptions:`

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

# path - 可移植路径和 PHP CLI

> ID：15673567
> 
> 赞同：0
> 
> 时间：2013-03-28T03:07:14.913
> 
> 标签：path, php

所以我又一次忘记了 CLI 没有定义 $_SERVER['DOCUMENT_ROOT'] 。

在将由 cron 运行的 PHP 脚本中获取可移植/相对路径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:09:03.960

你的意思是：

```
 $thePath= dirname(__FILE__); 
```

# c# - 自定义加密 #2

> ID：15673568
> 
> 赞同：0
> 
> 时间：2013-03-28T03:07:15.483
> 
> 标签：c#, encryption

我写了一个自定义加密的代码。这是一个挑战。现在由于某些原因它不起作用，例如：

加密（“abc”，“大家好”）返回：sdfhsjfjs 解密（“abc”，“sdfhsjfjs”）返回：diuifidu

```
 public int CountCharInStringAccordingToArray(string Text)
{
    int Count = 0;
    foreach (char x in Text)
    {
        Count++;
    }
    return Count - 1;
}

public int CountCharInString(string Text)
{
    int Count = 0;
    foreach (char x in Text)
    {
        Count++;
    }
    return Count;
}
public string Encrypt(string Key, string PlainText)
{
    int[] TempKey = new int[CountCharInString(Key)];
    int[] TempText = new int[CountCharInString(PlainText)];
    int[] EncryptedInt = new int[CountCharInString(PlainText)];
    char[] EncryptedChar = new char[CountCharInString(PlainText)];
    for (int i = 0; i < CountCharInStringAccordingToArray(Key); i++)
    {
        TempKey[i] = (int)Key[i];
    }
    for (int i = 0; i < CountCharInStringAccordingToArray(PlainText); i++)
    {
        TempText[i] = (int)PlainText[i];
    }
    int Index = 0;
    for (int i = 0; i < CountCharInStringAccordingToArray(PlainText); i++)
    {
        if (Index == CountCharInStringAccordingToArray(Key))
        {
            Index = 0;
        }
        EncryptedInt[i] = TempKey[Index] + TempText[i];
        Index++;
        EncryptedChar[i] = (char)EncryptedInt[i];
    }
    return new string(EncryptedChar);
}

public string Decrypt(string Key, string EncryptedText)
{
    int[] TempKey = new int[CountCharInString(Key)];
    int[] TempText = new int[CountCharInString(EncryptedText)];
    int[] DecryptedInt = new int[CountCharInString(EncryptedText)];
    char[] DecryptedChar = new char[CountCharInString(EncryptedText)];
    for (int i = 0; i < CountCharInStringAccordingToArray(Key); i++)
    {
        TempKey[i] = (int)Key[i];
    }
    for (int i = 0; i < CountCharInStringAccordingToArray(EncryptedText); i++)
    {
        TempText[i] = (int)EncryptedText[i];
    }
    int Index = 0;
    for (int i = 0; i < CountCharInStringAccordingToArray(EncryptedText); i++)
    {
        if (Index == CountCharInStringAccordingToArray(Key))
        {
            Index = 0;
        }
        DecryptedInt[i] = TempText[i] - TempKey[Index];
        Index++;
        DecryptedChar[i] = (char)DecryptedInt[i];
    }
    return new string(DecryptedChar);
} 
```

我也知道字符串有一个长度属性，只是我忘记更正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:53:21.767

换行

```
return Count - 1; 
```

在`CountCharInStringAccordingToArray`到

```
return Count; 
```

您的代码的表示：

```
String That(String key, String text, int sign) {
    return new String(Enumerable.Range(0, text.Length).Select((x, i) => (char)(text.ToArray()[i]+sign*key.ToArray()[i%key.Length])).ToArray());
}

public String Encrypt(String key, String text) {
    return That(key, text, 1);
}

public String Decrypt(String key, String text) {
    return That(key, text, -1);
} 
```

它的工作原理很简单。看图：

![EgB5n.jpg](../Images/2cee3a8140792860896660aeb0a40a77.png)

中的字符`key`被重复使用以添加到`text`并产生一个认为已*加密*的序列。解密只是通过减法进行的反向操作。

一个字节可以存储的最大值是，但**可见字符**`0x0ff`的最大值是，即和。**`0x7e``~``0x7e+0x7e=0xfc`**

 **所以**只要**你的key和text在可见字符范围内，就不会造成溢出。也就是说，您可以正确地将加密序列解密为原始序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:11:35.403

[获取字符串长度和输出字符串](http://www.java2v.com/Tutorial/CSharp/0100__String/Getstringlengthandoutputstring.htm)

使用系统；

```
class MainClass {   
  public static void Main() {   
    string str1 = "ABCDEabcde1234567890";   

    Console.WriteLine("str1: " + str1); 

    Console.WriteLine("Length of str1: " + str1.Length);   
  }
} 
```**

# git - 在一个分离的头上获取一系列提交到一个分支上

> ID：15673571
> 
> 赞同：1
> 
> 时间：2013-03-28T03:07:27.697
> 
> 标签：git

我有五个超然的提交。我不能`--set-upstream`，因为我不在分支上。我是否需要签出一个新的分支，然后单独挑选并提交所有五个分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:46:39.257

罗斯，看起来你可以做一个新的分支

```
If you want to keep them by creating a new branch, this may be a good time
to do so with:

 git branch new_branch_name <SHA of fifth commit> 
```

# perl - 按下向上键时如何像shell一样执行以显示最新输入

> ID：15673577
> 
> 赞同：1
> 
> 时间：2013-03-28T03:07:52.957
> 
> 标签：perl

我写了一个小程序来读取输入，打印结果，然后循环。喜欢`REPL`。

当我按下键盘上的向上键并编辑这个输入时，我想获得我之前输入的输入，比如做什么`bash`或做什么`zsh`。我不知道实施。我也搜索了网络，但没有我想要的结果。有人可以为我指路吗？或者给我一些文章阅读？

关键是：如何在屏幕上打印 EDITABLE 行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:22:21.750

我没有个人经验，但我的理解是[Term::ReadLine](http://search.cpan.org/perldoc?Term%3a%3aReadLine)提供带有历史记录的命令编辑功能。它甚至是`perl`分布的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T03:11:09.580

你只需要：

*   存储用户输入的历史，就像 bash 和 zsh 一样；
*   监听`↑`按键，就像 bash 和 zsh 一样；
*   `↑`按下时显示最后一条命令。就像，你猜对了，bash 和 zsh。

*这就是编程的全部意义：将我们**不*知道如何解决的大问题分解成我们知道如何解决的小问题，或者更容易弄清楚如何解决。因此，如果您不知道如何做我上面列出的任何事情，请尝试编写一些代码、阅读 API 文档、在 Google/Stack Overflow 上寻找答案，或者 - 再一次 - 将它们分解为子问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T06:28:23.560

if your point is "**print**" maybe you need Term::Screen. example code here: [code](http://forum.ubuntu.org.cn/viewtopic.php?f=21&t=194771).

otherwise if your point is "**history**", man/perldoc Term::ReadLine.

# javascript - 测试包含异步代码的函数

> ID：15673578
> 
> 赞同：1
> 
> 时间：2013-03-28T03:08:02.973
> 
> 标签：javascript, unit-testing, asynchronous, qunit

使用 qUnit，如果您的测试中有异步代码，我了解如何使用`asyncTest()`，但是如果您有一个包含异步代码的函数怎么办？

换句话说，异步请求不在测试中，而只是正在测试的代码的一部分。

以这段代码为例：

```
function makeAjaxCall(){
    $.get('/mypage', {}, function(data){
        // Do something with `data`
    },'json');
} 
```

如何`makeAjaxCall()`在测试中调用，然后对`data`从 ajax 请求返回的内容运行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:26:44.567

在这种情况下，您可以使用[jQuery Global Ajax 事件处理程序。](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)在调用之前绑定它，完成测试后取消绑定，可能通过 Qunit 中的模块方法。

类似（未经测试）：

```
asyncTest(function() {
  expect(1);

  $(document).ajaxSuccess(function(e, xhr, settings) {
     var jsonRep = JSON.parse(xhr.responseText);
     // assert on jsonRep
     //ok(true);
  });
  $(document).ajaxError(function(e) {
     ok(false);
  });
  $(document).ajaxComplete(function() {
     start();

     $(document).unbind('ajaxSuccess ajaxError ajaxComplete');
  });

  makeAjaxCall();
}); 
```

请注意，全局处理程序[无权访问已解析的内容](http://bugs.jquery.com/ticket/7289)，您必须自己使用 JSON.parse 重新解析它们。不理想，但我不知道另一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:15:46.150

似乎没有人关心[mockAjax](https://github.com/jakerella/jquery-mockjax)，所以这些天我发现了更好的东西： **[sinonJS](http://sinonjs.org/)**！你知道这个名为**[Fiddler](http://www.telerik.com/fiddler)**的奇妙工具的自动响应功能吗？sinonJS 允许你在客户端做同样的事情，它是一种 ajax 旁路代理。**如果你有兴趣看一个例子，请告诉我**......所以 sinonJS 可以在不访问服务器的情况下响应任何 ajax 请求，如果你想模拟你的客户端，如果你想对你的 javascript 代码进行单元测试，这就是一种魔法。

# javascript - 我们可以为两个 javascript 文件添加相同的命名空间吗？

> ID：15673580
> 
> 赞同：0
> 
> 时间：2013-03-28T03:08:06.103
> 
> 标签：javascript, html, javascript-namespaces

我试图将我所有的 javascript 函数放在一个命名空间中。我有两个 javascript 文件，我试图将这两个文件的所有函数都放在一个命名空间中。因此，当我为两个文件定义相同的命名空间时。第一个被第二个覆盖。我已经在两个文件中定义了我的命名空间，如下所示。有没有一种方法可以阻止其他将所有功能放到一个文件中？谢谢您的帮助。

```
var mynamespace={
foo:function(){Som code},
bar:function(){some code}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:10:29.100

是的你可以。在每个文件中：

```
var mynamespace = mynamespace || {}; 
```

然后为您拥有的文件选择下一行：

```
mynamespace.foo = function () { 
```

或者

```
mynamespace.bar = function () { 
```

基本上，它所做的是分配一个当前值`mynamespace`to`mynamespace`如果它存在的话。否则，它会创建一个新对象。请注意，根据您是否在`mynamespace`上面声明，您可能需要将这条线放在顶部：

```
if (typeof mynamespace === 'undefined') { var mynamespace = {} } 
```

# c# - 没有输入字段的ac#控制台应用程序可以被SQL注入吗

> ID：15673581
> 
> 赞同：0
> 
> 时间：2013-03-28T03:08:11.097
> 
> 标签：c#, sql, console, code-injection

我有一个控制台应用程序，它以文件为目标并执行 SQL 查询和其他事情。基本上是一个服务器。但是，它没有任何孩子的文本输入字段。还可以注射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:10:06.320

是的。

如果它对来自任何来源的攻击者可控数据进行操作，它仍然可能受到攻击。

例如：

*   如果它接受 URL，攻击者可以添加或修改恶意查询字符串参数
*   如果它对数据库中的现有数据进行操作，攻击者可以尝试通过其他应用程序设置该数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:09:39.347

仅当它正在读取命令行参数或解释其他外部输入（外部文件）时——否则，不。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:10:05.053

如果您不使用参数化查询，则任何动态构建的 SQL 查询仍有可能发生 SQL 注入。

如果你动态构建它，这意味着数据来自*某个地方*。可能是文件、系统调用、命令行参数或 Internet 调用。如果输入源可以被破坏，SQL 注入是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:14:45.103

是的 - 如果有任何东西通过网络传输，它很容易受到中间人的攻击。如果所有内容都本地包含在一台机器上，则可能性要小得多；但是，这仍然很有可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T05:05:59.470

这取决于您如何在控制台应用程序中使用 SQL 查询，如果您的 SQL 查询没有从命令行输入或文件输入或任何输入中获取任何输入，那么就没有注入。

# mysql - Workbench 没有在服务中安装 Mysql。我应该手动做吗？如何？

> ID：15673582
> 
> 赞同：4
> 
> 时间：2013-03-28T03:08:27.293
> 
> 标签：mysql, mysql-workbench

我刚刚安装了 mysql workbench CE 5.2。我试图创建并打开一个连接，它说“无法连接到 '127.0.0.1' (10061) 上的 MYSQL 服务器”

我查看了stackoverflow上的答案。最终，我找到了服务的方式。我看到没有Mysql。

dev.mysql.com 说我应该使用“mysqld”安装它，但在工作台安装程序中找不到它。

我应该怎么办？如果有办法，请一步一步告诉它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:13:48.633

您是否在本地机器上安装了 MySql 服务器？Workbench 只是一个 GUI 程序，可以更轻松地访问数据库 - 无论是在本地机器上还是在远程机器上。

只需在本地计算机上安装 mysql。见[http://dev.mysql.com/downloads/](http://dev.mysql.com/downloads/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:36:32.617

有一个适用于 Windows 的 MySQL 安装程序，它可以安装您在这方面所需的一切。包括几个不同的服务器版本、连接器、Workbench 等工具。此安装程序应该是您的第一次尝试。

当然你也可以单独安装服务器。下载 msi 并运行安装程序。确保正确命名您的服务。mysqld 通常不是我们在 Windows 上用于服务的名称。我推荐 MySQL56 之类的东西（用于 5.6 服务器）。

# bash - 在循环中从单独文件中读取的多个文件上运行 cleartool findmerge

> ID：15673585
> 
> 赞同：2
> 
> 时间：2013-03-28T03:08:55.390
> 
> 标签：bash, clearcase

我正在尝试`findmerge`循环运行以合并一组特定的文件，这些文件的位置存储在文本文件中。如下所示：

```
while read p; do
    cleartool findmerge $p -type f -fversion .../main/LATEST -merge
done < filesToBeMerged.txt 
```

在这里，`filesToBeMerged.txt`如下所示：

```
./MyProject/src/com/acme/AcmeManager.java
./MyProject/src/com/acme/AcmeLogger.java
./MyProject/build.xml 
```

等等。

但是，当我运行上述命令时，它只处理文件中的“第一”行，然后停止。我需要做什么才能循环遍历文件中的所有行？或者像 Perl 脚本这样的东西会更适合这个吗？

**编辑：** 添加 bash 版本：

```
GNU bash, version 3.00.15(1)-release (x86_64-redhat-linux-gnu)
Copyright (C) 2004 Free Software Foundation, Inc. 
```

**编辑 2：** 添加 bash 脚本，`autoMerge.sh`：

```
f="./filesToBeMerged.txt"
fcontent=$(cat "${f}")

while read line; do
  echo "Starting to merge: ${line}"
  cleartool findmerge "${line}" -type f -fversion .../main/LATEST -merge
done <<< "${fcontent}"
#done < "${f}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:47:26.853

我通常先把文件放在一个变量中：

```
f="/full/path/to/filesToBeMerged.txt"

while read line; do
  echo "${line}"
done < "${f}" 
```

您也可以尝试替代方案

```
f="/full/path/to/filesToBeMerged.txt"

while read line; do
  echo "${line}"
done < <"$(cat ${f})" 
```

或者

```
fcontent=$(cat "${f}")

while read line; do
  echo "${line}"
done <<< "${fcontent}" 
```

我更喜欢使用带引号和大括号的变量：not `$p`, but **`"${p}"`**。

```
 cleartool findmerge "${p}" -type f -fversion .../main/LATEST -merge 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T09:25:26.230

你原来的方法应该有效。放入`set -xo`你的脚本，看看发生了什么。

# grep - 在 Bourne Shell 脚本中同时使用 While 和 Grep

> ID：15673589
> 
> 赞同：0
> 
> 时间：2013-03-28T03:09:26.623
> 
> 标签：grep, sh

我正在用 Bourne Shell Script 构建一个学生数据库，这实际上是我第一次看到这样编写的代码，所以我非常不适应。我需要这样做，以便当用户输入课程时，程序会检查用户输入与我已经拥有的课程数据库，如果课程不存在，则提示用户输入新课程。这就是我正在尝试的：

```
 echo "course-1: \c"
   read course1
   while [[ grep -i "$course1" course3.dat == 1]]
   do
        echo "course does not exist"
        echo "course-1: \c"
        read course1  
   done
   echo "course-2: \c"
   read course2
   while [[ grep -i "$course2" course3.dat == 1]]
   do
        echo "course does not exist"
        echo "course-2: \c"
        read course2
   done 
```

但我收到错误“预期的条件二元运算符”和“'-i' 附近的语法错误”。我一直在尝试谷歌的答案，但我没有想出任何有用的东西。所以我想知道你们中是否有人可以帮助我？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:20:25.287

`[[`是 的快捷方式`/bin/test`，这不是您想要的。（这是有关它的[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?test)。）

试试这个：

```
while ! grep -i "$course1" course3.dat 
```

或者

```
until grep -i "$course1" course3.dat 
```

当`grep`grep 成功（即匹配行）时，表达式的计算结果为 true，并且 ! 倒置。直到内置了与while相反的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:19:29.540

`[[`并且`[`是“测试”，这*就是*您想要的。

但是，不同的 shell 有不同的语法；ksh 或 bash 可以解释“[[”，但 Bourne shell（通常是 /bin/sh）不会。

# binding - 使用带有 C++ 库的 Javascript 应用程序对 SVG 路径执行操作

> ID：15673591
> 
> 赞同：1
> 
> 时间：2013-03-28T03:09:47.550
> 
> 标签：binding, svg, computational-geometry

我一直在为 SVG 开发一个图形编辑器，以在线上供我的用户通过他们的网络浏览器访问它。它基于 SVG 编辑并用 Javascript 编写。

目前的应用程序缺少所谓的“布尔运算”，即用户选择 2 个或更多形状并将它们连接在一起的能力。

我找到了一个名为 LIB2GEOM 的 C++ 库，它应该处理这些操作，我相信这也是 Inkscape 使用的。

那么他们是否有可能将这个库与我的应用程序链接起来，因为它不是用 Javascript 编写的？

```
 <div id="svgcontainer"></div>
    <script>

    function path2poly() 

 {
  var subj_polygons = [[{X:10,Y:10},{X:110,Y:10},{X:110,Y:110},{X:10,Y:110}],
                  [{X:20,Y:20},{X:20,Y:100},{X:100,Y:100},{X:100,Y:20}]]; 
  var clip_polygons = [[{X:50,Y:50},{X:150,Y:50},{X:150,Y:150},{X:50,Y:150}],
                  [{X:60,Y:60},{X:60,Y:140},{X:140,Y:140},{X:140,Y:60}]];
  var scale = 100;
subj_polygons = scaleup(subj_polygons, scale);
 clip_polygons = scaleup(clip_polygons, scale);
var cpr = new ClipperLib.Clipper();
cpr.AddPolygons(subj_polygons, ClipperLib.PolyType.ptSubject);
cpr.AddPolygons(clip_polygons, ClipperLib.PolyType.ptClip);
var subject_fillType = ClipperLib.PolyFillType.pftNonZero;
var clip_fillType = ClipperLib.PolyFillType.pftNonZero;
var clipTypes = [ClipperLib.ClipType.ctUnion];
var clipTypesTexts = "Union";
var solution_polygons, svg, cont = document.getElementById('svgcontainer');
var i;
for(i = 0; i < clipTypes.length; i++) {
solution_polygons = new ClipperLib.Polygons();
cpr.Execute(clipTypes[i], solution_polygons, subject_fillType, clip_fillType);
//console.log(JSON.stringify(solution_polygons));

 alert(polys2path(solution_polygons, scale));
 }

 }

// helper function to scale up polygon coordinates
function scaleup(poly, scale) {
 var i, j;
if (!scale) scale = 1;
for(i = 0; i < poly.length; i++) {
for(j = 0; j < poly[i].length; j++) {
  poly[i][j].X *= scale;
  poly[i][j].Y *= scale;
 }
}
return poly;
}

// converts polygons to SVG path string
function polys2path (poly, scale) {
var path = "", i, j;
if (!scale) scale = 1;
for(i = 0; i < poly.length; i++) {
for(j = 0; j < poly[i].length; j++) {
  if (!j) path += "M";
  else path += "L";
  path += (poly[i][j].X / scale) + ", " + (poly[i][j].Y / scale);
 }
 path += "Z";
 }
 return path;

}
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:57:53.520

您可以尝试使用[emscripten](https://github.com/kripken/emscripten)将其交叉编译为 JS

# c++ - C++在gettor函数中使用模板

> ID：15673595
> 
> 赞同：4
> 
> 时间：2013-03-28T03:10:02.120
> 
> 标签：c++, templates

假设有两种类型的对象 A 和 B 以及两个 getter 函数

```
objA* getA(int id) and objB* getB(int id) 
```

对象 A 和 B 是互斥的。即如果一个对象是A，那么它不是B。当使用ID 来查找对象时，我使用的代码如下。所以我只是想知道该函数是否可以使用模板返回可能指向 A 或 B 的非 NULL 对象指针。如果 id 无效，则返回 null。

```
void find(int id)
{
    objA* pa = getA(id);
    if (pa != NULL)
    {
      return;
    }

    objB* pb = getB(id);
    if (pb != NULL)
    {
      return;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:14:44.030

我认为[Boost Variant](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)有你需要的东西。它是对可能是几种类型之一的单个对象的抽象。然后您的函数签名变为：

```
boost::variant<A*, B*> find(int id); 
```

# c# - 如何使用 LINQ 从 DataTable 中获取具有相同特定列内容的记录

> ID：15673603
> 
> 赞同：0
> 
> 时间：2013-03-28T03:10:32.570
> 
> 标签：c#, datatable, duplicates

我有一张包含个人数据的表格，如下所示：

```
 Identifier Name Phone Address
 .............................
     1       aa    23    abc
     2       bb    22    abd
     2       cc    11    aaa
     3       dd    44    amd
     4       fa    33    agd
     2       ds    14    dad
     3       as    55    fgg 
```

我想使用 LINQ 获取具有相同标识符的记录，以获得类似的内容

```
 Identifier Name Phone Address
 .............................
     2       bb    22    abd
     2       cc    11    aaa
     2       ds    14    dad
     3       dd    44    amd
     3       as    55    fgg 
```

我可以按标识符排序并复制到一个新的 DataTable，然后解析它并获取具有相同标识符的记录，但我猜这会很昂贵。有没有更短的方法？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:21:17.607

类似下面的代码将过滤重复项并将其提取到具有相同架构的新 DataTable 中。代码假定`Identifier`是一个`int`. 如果适用，请替换为适当的名称和类型。

```
var extractedDuplicates = (from row in table.AsEnumerable()
                           group row by row.Field<int>("Identifier") into rows 
                           where rows.Count() > 1
                           from row in rows
                           select row).CopyToDataTable(); 
```

试一试，看看能走多远。如果有任何机会没有任何重复，您将希望将其拆分为多个语句，`CopyToDataTable()`如果没有要复制的行则会抛出。

```
var duplicateRows = from row in table.AsEnumerable()
                    group row by row.Field<int>("Identifier") into rows 
                    where rows.Count() > 1
                    from row in rows
                    select row;

DataTable extractedDuplicates;
if (duplicateRows.Any())
    extractedDuplicates = duplicateRows.CopyToDataTable();
else
    extractedDuplicates = table.Clone(); 
```

当然，如果您不需要新的 DataTable，则完全省略此代码的第二部分，只需使用`duplicateRows`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T03:21:28.060

```
select * from YourTable a where a.Identifier in 
(
     select aa.Identifier from YourTable aa group by aa.Identifier 
     having (count(aa.Identifier ) > 1)
) 
```

# ios - 成为贝宝移动交易的中间人

> ID：15673607
> 
> 赞同：0
> 
> 时间：2013-03-28T03:11:19.780
> 
> 标签：ios, paypal, payment-processing

使用 paypal iOS sdk，可以：

1-从一个用户那里支付 X 美元加上 Y 的费用 2-将 X+Y 存入您的贝宝帐户 3-向另一个用户支付 X

我正在寻找一种可以做到这一点的方法，并且出于所有意图和目的，两端的用户只会看到常规的 paypal api 支付工作流程。

我查看了文档，第 1 步和第 2 步看起来很简单，我只是对如何在没有用户干预的情况下*自动执行第 3 步感到困惑。*我的第一个猜测是使用 API 的“汇款”功能从我的帐户向第二个用户汇款，但我相信这将消除撤销整个交易的机会（以防需要退款）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:41:37.080

您所描述的称为链式付款（有关[https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro)的更多信息），但 iOS SDK 目前不支持它们. 但即使使用链式支付，您也无法自动撤销交易的两条腿。

# java - Java .split 奇怪的结果

> ID：15673610
> 
> 赞同：0
> 
> 时间：2013-03-28T03:11:33.527
> 
> 标签：java, android, adb

我正在尝试拆分一个字符串，但它似乎没有给出正确的输出这是正在传递的字符串

```
1#0:250:250: 
```

我首先这样做

```
String[] dataArray = data.split("#"); 
```

这给了我

```
1
0:250:250: 
```

然后我这样做

```
for( int i = 0; i < totalPlayers; i++)
            {
                String[] pos = dataArray[i++].split(":");
                if( Integer.parseInt( pos[0] ) == ID )
                {
                    //do nothing
                }
                else
                {
                assets[i].setPosition( Integer.parseInt( pos[1] ),     Integer.parseInt( pos[2] ) );
                }
            } 
```

我收到一条错误消息说 ArrayIndexOutOfBoundsException，如果我打印出 pos[0] 我得到 1，如果我打印出 pos[1] 我得到 ArrayIndexOutOfBoundsException，为什么我的字符串没有被拆分成

```
0
250
250 
```

?

干杯

帆布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:17:17.733

第一次，`i`将`0`。这基本上意味着`dataArray[0]`，即`1`。因此，当您这样做时：-

```
String[] pos = dataArray[i++].split(":"); 
```

您`pos`在数组**（即）** `pos[0]`中只有 1 个元素，即`1`. 因此，如果您尝试访问`pos[1]`or `pos[2]`，您将获得`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:22:07.530

您的代码中有一个错误导致它拆分`1`而不是`0:250:250:`. 回想一下，后缀自增运算符（例如`i++`）在变量用于表达式*后会自增。*所以循环中的第一行真的是在说`String[] pos = dataArray[i].split(":"); i = i + 1;`.

简单的解决方法是更改`i++`​​为`++i`，这实际上会使该行运行为`i = i + 1; String[] pos = dataArray[i].split(":");`. 然而，这个确切的错误就是为什么`++`在复杂语句中使用运算符可能会令人困惑并且通常不鼓励使用。此外，在语句之外增加循环变量`for`可能会导致额外的混乱。

由于您真正想要表达的想法是“成对循环遍历数组”，因此我建议您编写类似的内容

```
for (int i = 0; i < totalPlayers; i += 2) {
    String[] pos = dataArray[i + 1].split(":");
    // (the same as above)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:18:39.983

pos 被创建了两次，一次只有 1 作为一个元素。第二次它将有 0、250、250。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:20:13.287

我相信这个问题是由于 split 函数采用正则表达式（regex）。

因为冒号是正则表达式中的特殊字符，所以必须用反斜杠对其进行转义。

在 Java 中，您必须使用另一个反斜杠来转义一个反斜杠。

因此，请尝试在“\\:”上拆分，而不仅仅是“:”

# easyxdm - 当有 2 个通道时，使用 EasyXDM 接口（用于跨域 IFrame 通信）方法调用远程方法两次

> ID：15673612
> 
> 赞同：1
> 
> 时间：2013-03-28T03:11:47.843
> 
> 标签：easyxdm

我在一个主机页面上有 2 个 IFrame，想在主机页面和 IFrame 之间建立双向通道。为此，我使用了 easyXDM 接口类，并且能够设置主机页面和 iFrame 之间的通信。

主机页面在一个域上，所有 IFrame 都在不同的域上，但所有 3 个 IFrame 都在同一个域上。

我已经使用 easyXDM 接口类在主机页面上设置了 2 个通道，并指定了所需的属性，例如本地方法、远程方法等。

主机页面有一个名为发布的本地方法，并且此发布方法在所有 IFrame 上都是远程的。

我遇到的问题是，当从一个 IFrame 调用发布方法时，会为主机页面上的所有 IFrames 通道调用发布。

主机页面上的代码如下所示：

```
channel1 = new easyXDM.Interface(
    {
        local: "/name.html",
        remote: "PathToIFrame1.html",
        container: document.getElelmentById('Div1')
    }
    , {
        remote: {
            receive: {}
        },
        local: {
            publish: { method: function () { } }
        }
    }
    );

channel2 = new easyXDM.Interface(
    {
        local: "/name.html",
        remote: "PathToIFrame2.html",
        container: document.getElelmentById('Div2')
    }
    , {
        remote: {
            receive: {}
        },
        local: {
            publish: { method: function () { } }
        }
    }
    ); 
```

IFrame 端的代码如下所示：

```
remote = new easyXDM.Interface({}, 
            {
            remote: {
                publish: {
                    isVoid: true
                }
            },
    local: {
        Receive: {
            isVoid: true,
            method: function (a, b) {                  

            }
        }            
    }

   }); 
```

}

当从 IFrame 端调用发布方法时，通道 1 和通道 2（在主机端）的发布方法都被调用。

有人可以建议这里可能有什么问题。

# php - 在此 PHP URL 缩短代码中包含“http://”

> ID：15673621
> 
> 赞同：1
> 
> 时间：2013-03-28T03:13:39.853
> 
> 标签：php, url, href

这是我目前拥有的代码。我将如何调整它以每次都包含`http://`在返回的结果中？`href`目前，`http://`不在返回的结果中，除非它在原始字符串变量`$text`中。`href`如果它不在原版中，我希望将其添加到`$text`. 谢谢！

```
function urlfixer($text){

   $pattern  = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
   $callback = create_function('$matches', '
       $url       = array_shift($matches);
       $url_parts = parse_url($url);

       $text = parse_url($url, PHP_URL_HOST) . parse_url($url, PHP_URL_PATH);
       $text = preg_replace("/^www./", "", $text);

       $last = -(strlen(strrchr($text, "/"))) + 1;
       if ($last < 0) {
           $text = substr($text, 0, $last) . "&hellip;";
       }

       return sprintf(\'<a rel="nofollow" href="%s">%s</a>\', $url, $text);
   ');

   return preg_replace_callback($pattern, $callback, $text);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:15:50.283

因为你不知道你的 $url 上是否有 http:// 或者不只是把它贴在开头，然后确保它被剥离以防万一。

```
$url = 'http://' . str_replace('http://','',$url);
return sprintf('<a rel="nofollow" href="%s">%s</a>', $url, $text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:24:44.463

```
$url       = array_shift($matches);
if( substr($url,0,6)!='http://' ) {
    $url='http://'.$url;
} 
```

像这样的事情应该这样做

# c++ - 链接到 DLL 的未处理异常

> ID：15673625
> 
> 赞同：1
> 
> 时间：2013-03-28T03:13:54.307
> 
> 标签：c++, multithreading, winapi, console-application, ace

链接到我创建的 DLL 时出现问题。抛出的异常是`Unhandled exception at 0x000007FA17461069 (ntdll.dll)`. 奇怪的是，只有当我在 win32 应用程序中链接 DLL 而不是在 win32 控制台应用程序中时才会发生这种情况。问题似乎与线程创建有关。

调用栈如下：

```
msvcr110d.dll!_callthreadstartex() Line 354            C
msvcr110d.dll!_threadstartex(void * ptd) Line 337      C 
```

DLL 包含 ACE Proactor 框架的实现，使用操作系统 I/O 完成端口。它在控制台应用程序中运行良好，但在 win32 窗口应用程序中运行良好。

任何帮助，将不胜感激。

编辑：根据以下评论的要求：

引发异常的代码行是`ACE_Service_Config::open(GetCommandLineA());`

我使用 ACE 配置框架，因此我使用 svc.conf 文件动态加载我的 DLL。这是唯一需要写入`main`控制台程序功能的代码行。

在捕获 WM_CREATE 消息后，我尝试编写此行。它崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:04:02.293

当您创建控制台应用程序时，ACE 将重新定义 main 以确保它被正确初始化。当制作一个 win32 windows 应用程序时，这个技巧不起作用。您必须自己调用 ACE::init() 和 ACE::fini()，有关如何执行此操作的示例，请参见 ACE_wrappers/tests/ACE_Init_Test.cpp。

# pdf - 使用 JavaScript 将 Excel 转换为 PDF

> ID：15673628
> 
> 赞同：2
> 
> 时间：2013-03-27T22:55:33.883
> 
> 标签：pdf, javascript

如何以自动方式将 Excel 文档（文件）转换为 PDF？我正在尝试使[此处](https://superuser.com/a/28303/212009)找到的解决方案适应Excel。到目前为止，我有这个：

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var docPath = WScript.Arguments(0);
docPath = fso.GetAbsolutePathName(docPath);

var pdfPath = docPath.replace(/\.xls[^.]*$/, ".pdf");
var objExcel = null;

try
{
    WScript.Echo("Saving '" + docPath + "' as '" + pdfPath + "'...");

    objExcel = new ActiveXObject("Excel.Application");
    objExcel.Visible = false;

    var objExcel = objExcel.Workbooks.Open(docPath);

    var wdFormatPdf = 17;
    objExcel.SaveAs(pdfPath, wdFormatPdf);
    objExcel.Close();

    WScript.Echo("Done.");
}
finally
{
    if (objExcel != null)
    {
        objExcel.Quit();
    }
} 
```

我得到这个输出：

```
Saving 'somefile.xlsx' as 'somefile.pdf'...
Done.
..\SaveXLSXAsPDF.js(27, 9) (null): The object invoked has disconnected from its clients. 
```

PDF 文件已创建，但它无效并且无法在阅读器中打开。我在想格式 17 可能不适合 Excel。有谁知道正确的号码或如何使它工作？

[编辑：我在这里](http://msdn.microsoft.com/en-us/library/office/bb241279%28v=office.12%29.aspx)发现了正确的数字（57），但现在我收到了这个错误：

```
r:\Web\Roman\SaveXLSXAsPDF.js(27, 13) Microsoft JScript runtime error: Class doesn't support Automation 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T23:15:17.617

你在第 15 行破坏了 objExcel：

```
var objExcel = objExcel.Workbooks.Open(docPath); 
```

这些代码行需要使用不同的变量，例如：

```
var objWorkbook = objExcel.Workbooks.Open(docPath);

var wdFormatPdf = 57;
objWorkbook.SaveAs(pdfPath, wdFormatPdf);
objWorkbook.Close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T23:17:13.577

尝试使用`.ExportAsFixedFormat`属性而不是`.SaveAs`. 第一个适用于在 Excel 中创建 PDF 文件，但不适用于不支持 PDF 格式的 SaveAs。

我想你需要这样的东西：

```
objExcel.ExportAsFixedFormat(0, pdfPath) 
```

# java - 使用 am 实用程序进行 Android 方法分析中缺少方法

> ID：15673639
> 
> 赞同：1
> 
> 时间：2013-03-28T03:15:00.650
> 
> 标签：java, android, debugging, testing, android-debug

我正在使用 android shell 工具*做*一些方法分析。我的观点是方法分析需要应用程序的进程 ID。因此，应用程序必须在应用程序分析之前启动，以便它可以获取进程 ID。但是如果我开始分析，那么我可能会错过一些初始代码执行。这意味着我可能会错过一些方法调用。有什么解决方法吗？我的目标是记录自应用程序启动以来的所有方法调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:22:11.000

代替命令行工具添加：

```
 Debug.startMethodTracing(); 
```

在您的代码中（请参阅[http://developer.android.com/reference/android/os/Debug.html#startMethodTracing()](http://developer.android.com/reference/android/os/Debug.html#startMethodTracing())）。

如果您想分析整个应用程序，将此方法添加到[Application.onCreate()](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29)可能是一个不错的起点。

如果您没有源代码，则必须使用另一种方法（DDMS，am profile）。 `am start`还可以选择开始分析

```
am start [-D] [-W] [-P <FILE>] [--start-profiler <FILE>]
               [--R COUNT] [-S] <INTENT> 
```

因此，如果您使用`<INTENT>`它启动 Activity 可能会很有用。

# mysql - 未处理的异常：创建帐户时出错

> ID：15673640
> 
> 赞同：0
> 
> 时间：2013-03-28T03:15:09.660
> 
> 标签：mysql, admin

我正在尝试使用 MySQL 设置数据库，但此错误不断弹出：`Unhandled exception: Error creating account blank@blank. Error executing 'Access denied; you need (at least one of)the create user privileges for this operation.` 我想知道是否以及如何更改我自己的帐户设置，以便能够再次添加新用户并能够做其他事情事物。我目前为此使用的程序是 MySQL 工作台，我最近将服务器放到了 Microsoft 网络矩阵网站上。我不完全确定这是否会导致任何奇怪的影响，但我只想安全。多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:39:57.897

使用 root 用户在 MySQL 工作台中创建一个新连接。在 MySQL 工作台中使用该用户登录并转到查询窗口。假设您想要访问所有内容并拥有所有权限，请发出以下 SQL 语句。将“您”替换为您的用户名。

```
GRANT ALL PRIVILEGES ON * . * TO 'you'@localhost;
GRANT ALL PRIVILEGES ON * . * TO 'you'@'%'; 
```

这会给你几乎所有的东西。

这是[文档](http://dev.mysql.com/doc/refman/5.5/en/adding-users.html)

# javascript - JavaScript 和 DOM 绑定

> ID：15673642
> 
> 赞同：5
> 
> 时间：2013-03-28T03:15:18.107
> 
> 标签：javascript, dom

我正在阅读[它声明](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/ecma-script-binding.html)的 DOM 标准：

> DOMImplementationRegistry 是一个全局变量，具有以下功能： getDOMImplementation(features) ...等

我试图了解但找不到有关以下内容的信息：

*   谁提供这个`DOMImplementationRegistry` 对象的实现？
*   JavaScript 如何获得所需的 DOM 实现？它是用 JavaScript 实现的（用于在 JavaScript 中使用）吗？
*   我怎样才能访问这个变量（`DOMImplementationRegistry`）？

你能给我解释一下或提供一个有用的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:39:08.710

正如规范所说，它是一个全局变量。据我所知，它没有在 Chrome 和 Firefox 中实现，否则您可以从 Chrome 或 Firefox 控制台将它用作例如`DOMImplementation`对象（您可以在浏览器的控制台）。

此页面[https://developer.mozilla.org/en-US/docs/DOM/DOMImplementationRegistry](https://developer.mozilla.org/en-US/docs/DOM/DOMImplementationRegistry)声明此功能未在 Firefox 中实现。我没有找到与 Chrome 相关的类似声明。

*   你的问题：谁提供了这个 DOMImplementationRegistry 对象的实现？

谁正在实现 DOM 接口，例如 Chrome 或 Firefox 等浏览器。您可以使用他们的实现来运行他们的 Web 控制台。

*   您的问题：JavaScript 如何获得所需的 DOM 实现？

它写在您链接的规范中。`DOMImplementationRegistry.getDOMImplementation(features)`如果全局变量`DOMImplementationRegistry`存在，则应调用 javascript 语句

*   你的问题：我怎样才能访问这个变量（DOMImplementationRegistry）？

如果实现，它应该是一个全局变量

*   你的问题：它是用 JavaScript 实现的（用于在 JavaScript 中使用）吗？

是的，您包含的规范中定义的接口是用javascript实现的，以便javascript代码使用

# actionscript-3 - AS3 Flash 中的播放列表循环

> ID：15673643
> 
> 赞同：0
> 
> 时间：2013-03-28T03:15:23.700
> 
> 标签：actionscript-3, media-player, flash

我对 Flash 很不好，我就是不能这样做。我有 php 生成的播放列表。我用 LoaderInfo() 得到它，然后用 split() 将数据添加到数组中。

```
var paramObj:Object = LoaderInfo(this.root.loaderInfo).parameters;
var str:String = paramObj.playlist;
var array:Array = str.split(","); 
```

这是问题所在。我知道如何从播放列表中播放 1 首歌曲，一次或在循环中使用如下代码：

```
sound.addEventListener(Event.COMPLETE, onLoadComplete, false, 0,
true);
function onLoadComplete(evt:Event):void {
channel = sound.play();
var pauseSong:Number = channel.position; 
    channel.addEventListener(Event.SOUND_COMPLETE, soundCompleteHandler);
}
function soundCompleteHandler(e:Event):void {

channel = sound.play();
channel.addEventListener(Event.SOUND_COMPLETE, soundCompleteHandler);
} 
```

，但我不能使代码循环播放播放列表中的所有歌曲 - 第一，第二等，首先......如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:56:11.437

您制作了一组加载声音，将一个单独的侦听器放在列表的第一个（第 0 个）声音上，该声音将启动播放，所有其他声音都应该有另一个侦听器，它只会通知您的程序声音已加载。一旦第一个声音开始播放，您添加一个听众`channel`，它将选择下一首歌曲并播放它（如果可用）。如果它不可用，您的代码应在基于帧的循环中等待（Event.ENTER_FRAME 侦听器进行一次检查），直到它最终加载，并恢复播放列表播放。

# jquery - Javascript 在 application.js 文件中加载，但在 Rails 3.2 中不起作用

> ID：15673652
> 
> 赞同：1
> 
> 时间：2013-03-28T03:16:05.623
> 
> 标签：jquery, ruby-on-rails-3

我什至不想问这个问题，因为我确信这很明显，但我花了几个小时寻找答案却找不到答案。

我有一个使用“slideup”函数的简单 javascript (jquery) 代码。我在我的表单部分使用它来显示或隐藏基于选择的字段。如果我将代码直接放入表单中，它会完美运行。如果我将它放入 assets/javascript 文件夹，它会包含在 application.js 文件中，但不起作用。

为了测试，我还输入了一个 javascript 警报，只是为了查看它是否正在加载，并且警报会触发。我这辈子都想不通。

这是位于我的 app/assets/javascript/form.js 中的 javascript：

```
$('#Postponement').change(function () {
    if ($("#NewWeddingDate").is(":hidden")) {
      $("#NewWeddingDate").show("slow");
    } else {
      $("#NewWeddingDate").slideUp();
    }
  })

$(function(){
  alert('got to application.js!');
}) 
```

这是相关的表单代码（我使用的是 Formtastic）：

```
<div id='Postponement' >

    <%= f.input :Postponement, :label => "Will the wedding be postponed?", :input_html => { :id => 'Postponement' }, :as => :select, :include_blank => false, :collection => ['Yes', 'No'], :selected => 'Yes' %> <br />

    </div>

    <div id = 'NewWeddingDate' >

    <%= f.input :NewWeddingDate, :label => "The new wedding date is:", :input_html => { :id => 'NewWeddingDate' }, :as => :date_select, :start_month => Time.now.month, :start_year => Time.now.year, :end_year => Time.now.year + 10, :order => [:month, :year] %><br />

    </div> 
```

我的 application.html.erb 包含`<%= javascript_include_tag "application" %>`并且如果我将该 javascript 代码直接添加到 _form.html.erb 文件中，它可以正常工作。我绝对是这方面的新手，所以我确信这很明显。我可以将代码留在 _form.html.erb 中，但我正在尝试以正确的（Rails）方式做事。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:22:14.987

尝试在加载文档后运行您的代码。现在，它可能会在#Postponement 甚至存在之前立即执行，除非您将其放置在部分表单中。例如：

```
$(function() {
    $('#Postponement').change(function () {
        if ($("#NewWeddingDate").is(":hidden")) {
          $("#NewWeddingDate").show("slow");
        } else {
          $("#NewWeddingDate").slideUp();
        }
    })
}); 
```

将你的函数放在DOM 中`$()`确保它[在 DOM 完全就绪后](http://api.jquery.com/ready/)运行。

# xcode - 身份“iPhone Developer”与任何有效的、未过期的证书/私钥对都不匹配

> ID：15673657
> 
> 赞同：1
> 
> 时间：2013-03-28T03:16:27.413
> 
> 标签：xcode, xcode4.5, code-signing

我以前从来没有发生过，我之前已经下载了示例代码，但现在我收到了这个错误：

![在此处输入图像描述](../Images/1c5226c4a20c988c251b025db1efcdbd.png)

我看到一些与此错误有关的问题，但他们说要检查您的“代码签名”，但我看不出那里有什么问题......

![在此处输入图像描述](../Images/4377d1c354e75c6d164ac5f1237ef18b.png)

请帮忙，我吓坏了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:04:55.217

该错误意味着配置文件不存在所以

1.  检查 plist 文件中的捆绑标识符。
2.  转到 Codesign Identity 并单击下拉菜单并单击匹配的配置文件（匹配的配置文件以黑色显示）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T21:33:33.160

由于问题涉及代码签名，您只需取消选中摘要属性上的“代码签名应用程序”框。它对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T17:51:24.647

我正在遭受同样的问题。大多数答案都说诸如捆绑标识符，配置文件或诸如此类的废话。

如果人们知道这些是什么，他们就不会上网了，好吗？

检查这个

[http://www.techotopia.com/index.php/Testing_Apps_on_the_iPhone_](http://www.techotopia.com/index.php/Testing_Apps_on_the_iPhone_) –_Developer_Certificates_and_Provisioning_Profiles

它解释了一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T08:57:06.653

可能的修复（对我有用）：我将方案“iOS 设备”更改为“iPad 6.1 模拟器”或“iPhone 6.1 模拟器”，然后我重建了项目而没有此错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-08T21:09:07.100

我遇到了同样的错误，我发现了这个：[如何在 XCode 4.6 上制作 IPA？](https://stackoverflow.com/questions/18248363/how-to-make-an-ipa-on-xcode-4-6)

这些步骤对我有用： 1\. 转到 /Applications。

2.  右键单击 XCode 并选择“显示包内容”。
3.  将Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/SDKSettings.plist 复制到您的桌面。（确保实际复制和粘贴。不要拖放）
4.  打开它并在 DefaultProperties 下将 CODE_SIGNING_REQUIRED 设置为 NO。
5.  将其复制回来并替换原始文件。
6.  重新启动 XCode。
7.  打开你的项目。
8.  在 Project Navigator 中选择您的项目并打开项目的 Build Settings 部分（而不是任何特定目标）
9.  在代码签名下找到代码签名身份，对于调试和发布模式，将任何 iOS SKD 设置为不进行代码签名。
10.  现在您应该能够构建您的项目而不会出现任何错误。

# icefaces - SessionRenderer 不渲染抛出 ViewExpiredException

> ID：15673659
> 
> 赞同：1
> 
> 时间：2013-03-28T03:16:37.117
> 
> 标签：icefaces

8.2 与 Seam 和 JSF 1.2 。我的问题是在我的支持 bean 中有一个方法，我在将页面呈现给用户之前初始化某些值。在后台 bean 方法中，我使用了 SessionRenderer.addCurrentSession("all")。

在我的页面中，在用户选择页面中的下拉菜单后，我将部分提交页面到在同一个支持 bean 中定义的 valueChangeListener 方法。在那里操作值之后，我试图通过使用 SessionRenderer.render("all") 从更改侦听器方法呈现视图。

这是我得到 ViewExpiredException: Execute push on unknown view 的地方。

服务器日志还显示 [ViewStateManagerImpl] Missing View Root in Restore state in ice session [session id] view number: 1

请帮我解决这个问题！

我的 faces-config.xml 看起来像

```
<managed-bean-name>renderMgr</managed-bean-name> 

<managed-bean-class> 

    com.icesoft.faces.async.render.RenderManager

</managed-bean-class> 

<managed-bean-scope>application</managed-bean-scope> 
```

```
<managed-bean-name>RulesBean</managed-bean-name> 

<managed-bean-class>

    com.xxxx.rpa.session

</managed-bean-class> 

<managed-bean-scope>session</managed-bean-scope> 

<managed-property> 

    <property-name>renderManager</property-name> 

    <value>#{renderMgr}</value> 

</managed-property> 
```

在我的 web.xml 中，我设置了 context-param

```
 <param-name>com.icesoft.faces.synchronousUpdate</param-name>

    <param-value>false</param-value> 
```

```
 <param-name>com.icesoft.faces.concurrentDOMViews</param-name> 

    <param-value>true</param-value> 
```

# r - 将函数应用于 data.table 的每一行

> ID：15673662
> 
> 赞同：21
> 
> 时间：2013-03-28T03:17:00.573
> 
> 标签：r, data.table

我正在寻找一种方法来有效地将函数应用于 data.table 的每一行。让我们考虑以下数据表：

```
library(data.table)
library(stringr)

x <- data.table(a = c(1:3, 1), b = c('12 13', '14 15', '16 17', '18 19'))
> x
   a     b
1: 1 12 13
2: 2 14 15
3: 3 16 17
4: 1 18 19 
```

假设我想`b`按空格分割列的每个元素（从而为原始数据中的每一行产生两行）并加入结果数据表。对于上面的示例，我需要以下结果：

```
 a V1
1: 1 12
2: 1 13
3: 2 14
4: 2 15
5: 3 16
6: 3 17
7: 1 18
8: 1 19 
```

*如果列`a`仅具有唯一值*，则以下方法将起作用：

```
x[, list(str_split(b, ' ')[[1]]), by = a] 
```

以下*几乎*可以工作（除非原始数据表中有一些相同的行），但是当`x`有很多列并将列 b 复制到结果时很难看，我想避免这种情况。

```
>     x[, list(str_split(b, ' ')[[1]]), by = list(a,b)]
   a     b V1
1: 1 12 13 12
2: 1 12 13 13
3: 2 14 15 14
4: 2 14 15 15
5: 3 16 17 16
6: 3 16 17 17
7: 1 18 19 18
8: 1 18 19 19 
```

解决这个问题的最有效和最惯用的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T13:51:01.393

怎么样 ：

```
x
   a     b
1: 1 12 13
2: 2 14 15
3: 3 16 17
4: 1 18 19

x[,list(a=rep(a,each=2), V1=unlist(strsplit(b," ")))]
   a V1
1: 1 12
2: 1 13
3: 2 14
4: 2 15
5: 3 16
6: 3 17
7: 1 18
8: 1 19 
```

给出评论的广义解决方案：

```
x[,{s=strsplit(b," ");list(a=rep(a,sapply(s,length)), V1=unlist(s))}] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-11T19:59:12.493

```
x[, .(a,strsplit(b,' ')), by=1:nrow(x)] 
```

`by=nrow(x)`是强制每组 1 行的简单方法

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-30T03:29:47.477

```
x[, .(a,strsplit(b,' ')), by = .I] 
```

看起来更美

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T03:28:45.920

一种选择是添加行号

```
x[, r := 1:nrow(x)] 
```

然后分组`r`：

```
x[, list(a, str_split(b, ' ')[[1]]), by = r] 
```

我想知道是否有更好的解决方案？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T03:28:57.783

最有效和惯用的方法是使用矢量化函数。

在这种情况下，某种`regex`会做你想做的事

```
 x[, V1 := gsub(" [[:alnum:]]*", "", b)]

   a     b V1
1: 1 12 13 12
2: 2 14 15 14
3: 3 16 17 16
4: 1 18 19 18 
```

如果要返回每个拆分组件，并且知道每个组件中有两个，则可以使用`Map`将结果强制`strsplit`转换为正确的形式

```
x[, c('b1','b2')  := do.call(Map, c(f = c, strsplit(b, ' ')))]

x
   a     b b1 b2
1: 1 12 13 12 13
2: 2 14 15 14 15
3: 3 16 17 16 17
4: 1 18 19 18 19 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-06T10:13:13.503

/方法也适用于数据表`dplyr`。`tidyr`

```
library(dplyr)
library(tidyr)
x %>% 
  separate(b, into = c("b1", "b2")) %>% 
  gather(b, "V1", b1:b2) %>%
  arrange(V1) %>%
  select(a, V1) 
```

或者，使用标准评估表：

```
x %>% 
  separate_("b", into = c("b1", "b2")) %>% 
  gather_("b", "V1", c("b1", "b2")) %>%
  arrange_(~ V1) %>%
  select_(~ a, ~ V1) 
```

列中不同数量的值的`b`情况只是稍微复杂一些。

```
library(stringr)

x2 <- data.table(
  a = c(1:3, 1), 
  b = c('12 13', '14', '15 16 17', '18 19')
)

n <- max(str_count(x2$b, " ")) + 1
b_cols <- paste0("b", seq_len(n))
x2 %>% 
  separate_("b", into = b_cols, extra = "drop") %>% 
  gather_("b", "V1", b_cols) %>%
  arrange_(~ V1) %>%
  select_(~ a, ~ V1) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T04:07:24.477

查看输入和所需的输出，这应该可行 -

```
x <- data.frame(a=c(1,2,3,1),b=c("12 13","14 15","16 17","18 19"))
data.frame(a=rep(x$a,each=2), new_b=unlist(strsplit(as.character(x$b)," "))) 
```

# c# - 如何使用 C# DotNetZip 提取子目录？

> ID：15673665
> 
> 赞同：0
> 
> 时间：2013-03-28T03:17:21.103
> 
> 标签：c#, extract, subdirectory, dotnetzip

我有一个 MyFile.zip，它有一个主目录“MyMainFolder”，其中有几个子目录，我想提取其中一个（MySubFolder）......及其所有子目录和内容。

我试图弄清楚如何“进入” MyMainFolder ，以便我可以提取“MySubFolder”。

我有一些代码可以提取一个文件夹，只要我要查找的文件夹作为 zip 中的主文件夹存在……我可以检测主文件夹是否称为“MyMainFolder”，因此它知道要查看该文件夹和从那里提取而不是在主 zip 根目录中查找 MySubFolder）。

```
using (ZipFile zip1 = ZipFile.Read(fileName))
{
    zipFile = ZipFile.Read(@""+fileName);
    var result = zipFile.Any(entry => entry.FileName.Contains("MySubFolder"));

   if (result == false)
   {
            MessageBox.Show("MyMainFolder detected....Extracting from MyMainFolder...");
            // something here that will extract JUST MySubFolder and contents
   } else {
    foreach (var e in selection)
   {             
           var selection = (from e in zip1.Entries where (e.FileName).Contains("NySubfolder") select e)               
           e.Extract(outputDirectory);        
   }
  }
} 
```

到目前为止，我已经尝试在 if-else 的每个部分中放置一个单独的 using，并尝试创建一个单独的 selectionX，在其中我尝试强制根文件夹名称（对于这个实验，它始终是“MyMainFolder”）成为它所浏览内容的一部分，认为我可以提取 MySubFolder，但我也无法让它工作。我尝试合并我在 stackflow 和 elsehwere 上找到的其他几种方法，例如使用“如何提取文件，但忽略 zipfile 中的路径”和其他此类帖子的部分内容来尝试找到一种“跳过”主根目录的方法解压时的文件夹。（以便它仅获取“MySubFolder”（和内容）并提取到 outputDirectory（不是 MyMainFolder\MySubFolder ...）

任何帮助表示赞赏。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:33:26.107

枚举整个内容，直到我找到我正在寻找的东西，但作为一个实验，我想看看它是否可以用另一种方式完成。

由于我无法检查根文件夹中子文件夹的名称，我想我可以在解析它时匹配我正在寻找的内容，只提取我想要的内容，然后只需更改输出路径。

```
using (ZipFile zip1 = ZipFile.Read(fileName))
{
    zipFile = ZipFile.Read(@""+fileName);
    var result = zipFile.Any(entry => entry.FileName.Contains("MySubFolder"));

    if (result == false)
    {
        // something here that will extract JUST MySubFolder and content
        string TestX = Path.GetDirectoryName(e.FileName) ;
        string MyNewPath = outputDirectory+@"\"+TestX ;
        e.Extract(MyNewPath);
    } else {
        foreach (var e in selection)
   {             
        var selection = (from e in zip1.Entries where (e.FileName).Contains("MySubfolder")
        .select e)               
        e.Extract(outputDirectory);        
   }
} 
```

类似的东西..不是很有用，但很有趣，帮助我学到了一点。（如果没有别的，一个如何不做事的例子..hehe）谢谢

# assembly - 汇编 - 使用其他目标文件中的符号作为立即值

> ID：15673670
> 
> 赞同：1
> 
> 时间：2013-03-28T03:18:01.077
> 
> 标签：assembly, arm, raspberry-pi

我正在为我的树莓派编写一个玩具操作系统，并使用[xv6](http://pdos.csail.mit.edu/6.828/xv6/)作为参考。

当我尝试加载在另一个文件（在 C 中）中定义的“entrypgdir”符号时，我的代码出现编译错误。

_start.S:

```
#include "mem.h"

.globl entry
entry:
    mov r0, #(V2P_NOCAST(entrypgdir)) 
```

V2P_NOCAST 是一个在 .h 文件中定义为的简单宏

内存.h：

```
#define V2P_NOCAST(va) ((va) - KERNBASE) 
```

和错误：

```
$ arm-none-eabi-gcc -c -o build/_start.o source/_start.S
source/_start.S: Assembler messages:
source/_start.S:17: Error: undefined symbol entrypgdir used as an immediate value 
```

我很好奇，因为 xv6 就是这样做的，

```
movl    $(V2P_WO(entrypgdir)), %eax 
```

它编译得很好，

```
$ gcc -m32 -c -o entry.o entry.S 
```

我的工具链有问题吗？还是在ARM中不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:14:15.277

试试这个

```
entry:
    ldr r0, =(V2P_NOCAST(entrypgdir)) 
```

指令中的中间值`mov`需要嵌入到指令中，因此需要在编译时知道以及地址使用，您不能通过 mov 加载任何 32 位值，这会迫使您退回到`ldr`.

# django - 计算逻辑是否应该使用 Django 进入模型或视图

> ID：15673671
> 
> 赞同：1
> 
> 时间：2013-03-28T03:18:05.233
> 
> 标签：django, django-models, django-forms, django-views, date-arithmetic

我正在编写一个 Django Web 应用程序，它提供了一个用户界面来进行数值分析计算。我想要一个使用 POST 提交一组数据的表单。这就是我卡住的地方。在收到 POST 数据后，我应该将所有计算调用放在模型还是视图中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T03:28:19.413

来自[Django 文档](https://docs.djangoproject.com/en/dev/faq/general/#django-appears-to-be-a-mvc-framework-but-you-call-the-controller-the-view-and-the-view-the-template-how-come-you-don-t-use-the-standard-names)

业务逻辑应该进入模型内部。视图用于定义数据呈现给用户的方式。

> “视图”描述了呈现给用户的数据。不一定是数据的外观，而是呈现哪些数据。该视图描述了您看到的数据，而不是您如何查看它。
> 
> 视图应该从业务逻辑中清除，并且应该只用于获取要在模板上显示/呈现的数据，或者换句话说，让视图仅用于视图逻辑。

# c# - 使用 WCF 服务中的参数选择数据库中的表

> ID：15673672
> 
> 赞同：0
> 
> 时间：2013-03-28T03:18:09.857
> 
> 标签：c#, sql, database, wcf, azure

我仍然是编写 C# 和 SQL 的初学者，想知道是否有人可以帮助我解决这个基本问题。我已经浏览了整个互联网，但仍然卡住了。

我正在尝试编写 WCF 服务来访问我的数据库。我只需要一种方法：

```
public PathDto GetPath(string src, string trg)
    {
        using (var context = new PathsEntities())
        {
            var p = (
                    from a
                    in context.src
                    where a.Target = trg
                    select a).Distance, Path;
        }
    } 
```

其中参数`src`是表名，字符串`trg`是实体的主键。

Visual Studio 给了我错误：...`pathsService does not contain a definition for src`因为它试图查找表“src”而不是变量中包含的字符串。

如何在查找语句中使用我的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:34:36.737

我将假设您正在使用 DbContext EF5.0 的东西

```
public PathDto GetPath(string tableType, string id)
{
    using (var context = new PathsEntities())
    {
            var type = Type.GetType(tableType);
            var p = context.Set(type).Find(id);
            return (PathDto)p;
    }
} 
```

似乎您不使用 EF 5.0 并且只获得了 EF 4.0 并且正在使用 ObjectContext。试试这个......不知道它是否有效，因为我并没有真正使用 EF 4.0。或者下载 EF 5.0

```
public PathDto GetPath(string tableType, string id)
{
    using (var context = new PathsEntities())
    {
            var type = Type.GetType(tableType);
            var p = context.GetObjectByKey(new EntityKey(tableType, "id", id));
            return (PathDto)p;
    }
} 
```

# ruby-on-rails - 复制对象的属性，包括回形针上传的图像 Rails 3

> ID：15673679
> 
> 赞同：0
> 
> 时间：2013-03-28T03:20:08.790
> 
> 标签：ruby-on-rails, upload, duplicates, paperclip

我是 Rails 新手，想弄清楚为什么这不起作用！我正在尝试复制属于另一个用户的对象，并将其设为我的。一切正常，但有两件事：1\. 图像确实信息重复但图像显示为损坏

1.  用户可以一遍又一遍地复制对象。

我的代码：

```
class EventsController < ApplicationController    
  def calee
    @event = Event.find(params[:id])
    @image = @event.event_image
    if @event.user_id != current_user.id
      @event = @event.amoeba_dup
      @event.user_id = current_user.id
      @event.event_image = @image
      @event.save
    redirect_to :back
  end
end 
```

我加入了@image 行，希望能解决附件问题。当我检查元素时，显示应该找到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:21:47.637

尝试类似：

```
 class EventsController < ApplicationController    
      def calee
        @event = Event.find(params[:id])
        new_event = @event.dup
        new_event.user_id = current_user.id
        new_event.save
        redirect_to :back
      end
    end 
```

# objective-c - 在 Objective-C 中可以声明实例变量的区域之间有什么区别？

> ID：15673680
> 
> 赞同：2
> 
> 时间：2013-03-28T03:20:10.737
> 
> 标签：objective-c

我对 iOS 和 Objective-C 编程越来越熟悉了，但是声明实例变量的地方对我来说仍然是一个令人困惑的地方。

*   大多数时候，它们似乎是在类的 .h 文件中声明的，作为接口的一部分。
*   其他时候，它们在 .m 文件的接口中声明。
*   我见过的另一种方式是当它们在 .h 文件中声明时，但是在接口的“单独划分”中，因为没有更好的术语，如下所示：

    ```
    @interface MapViewController : UIViewController {

        UIPopoverController *popoverController;

    }

    .... 
    ```

放置它们的正确方法在哪里？这完全是主观的吗？我的印象是，对于其他类需要访问的实例变量，将它们作为主要属性放在 .h 文件中，但对于只有类需要在类范围内访问的变量，将它们放在 .m 中界面。然后 .h 的特殊划分使我感到困惑。

有人可以对此有所了解吗？

# java - bufferedwriter 写奇怪的外来字符？

> ID：15673683
> 
> 赞同：1
> 
> 时间：2013-03-28T03:20:42.337
> 
> 标签：java, bufferedwriter

我正在编写一个小程序，它只需要一个文件，并在空格后修剪最后 4 个字符并将它们写入一个新文件。当我告诉它这样做然后将它们打印到控制台时，它工作正常。他们表现得很好，一切正常。但是当我使用 BufferedWriter 将它写入一个新文件时，当我检查它时，它会在该文件中给我一个奇怪的字符串。这是我的代码：

```
package trimmer;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Scanner;

public class trimmer {

private File file;
private File newfile;

private Scanner in;

public void Create() {

    String temp, temp1;

    try {

        setScanner(new Scanner(file));
    } catch (FileNotFoundException e) {
        System.out.println("file not found!!");

    }

    if (!newfile.exists()) {
        try {
            newfile.createNewFile();
            FileWriter fw = new FileWriter(newfile.getAbsoluteFile());
            BufferedWriter bw = new BufferedWriter(fw);
            while (in.hasNextLine()) {
                temp1 = in.nextLine();
                temp = temp1.substring(temp1.lastIndexOf(' ') + 1);
                System.out.println(temp);
                bw.write(temp);
            }
            bw.close();
            System.out.println("done!");

        } catch (IOException e) {
            System.out.println("Could not make new file: " + newfile + " Error code: " + e.getMessage());
        }
    }

}

public Scanner getScanner() {
    return in;
}

public void setScanner(Scanner in) {
    this.in = in;
}

public File getFile() {
    return file;
}

public void setFile(File file) {
    this.file = file;
}

public File getNewfile() {
    return newfile;
}

public void setNewfile(File newfile) {
    this.newfile = newfile;
}

} 
```

当我检查文件时，它看起来像这样：

```
䐳噔吳商吳啍唳噎吳剄唳剄䘳剄唳噎吳商䠳卉䌳䕎䜳䱁䠳卉䴳㉕倳乓䐳䍐䐳啐吳䍖吳乓吳啍䔳䥘䌳噔匳剕唳乓唳䅍䌳䕎䜳䱁䴳㉕倳乓䐳䍐䐳啐吳䍖䠳卉吳乓吳啍䔳䥘䌳噔匳剕唳乓唳䅍 
```

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:26:30.223

FileWriter 使用平台默认字符编码。If this is not the encoding that you want, then you need to use an OutputStreamWriter with the appropriately chosen character encoding.

# python - 使用 BeautifulSoup 确定脚本标签是在头部还是正文中

> ID：15673685
> 
> 赞同：1
> 
> 时间：2013-03-28T03:20:48.100
> 
> 标签：python, beautifulsoup

我正在查询带有漂亮汤的标签

```
scriptResults = soup3('script')
soup3 = BeautifulSoup(page3) 
```

我如何确定找到的每个脚本结果是在 head 还是 body 标记中？

最简单的方法是提取头部，提取主体，然后分别检查每个中的脚本标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:40:47.093

您可以在传递给 BS 之前拆分源：

```
parts = html.split('</head>')
head = parts[0]
body = parts[1]

head_soup = BeautifulSoup(head)
body_soup = BeautifulSoup(body) 
```

在此之后，只需检查每个汤中是否存在脚本标签。

# google-chrome - 如何将视频文件流式传输到 Google TV 的 Chrome 浏览器？

> ID：15673695
> 
> 赞同：0
> 
> 时间：2013-03-28T03:21:40.700
> 
> 标签：google-chrome, streaming, vlc, google-tv, logitech

我试图在本地 HTTP 服务器提供的 html 文件中使用带有“.asx”文件和“标签”的 VLC 设置本地流媒体服务器（请参阅：[http ://wiki.videolan.org/Simple_Stream_VLC_to_Website](http://wiki.videolan.org/Simple_Stream_VLC_to_Website)) 在同一台机器上（作为 VLC）。VLC 完美地流式传输本地文件（例如，如果我从本地网络中 PC 上的任何 Web 浏览器打开 HTTP 地址，包括 Chrome，它可以完美运行）。但是，我正在寻找一种从服务器流式传输内容并使用内置 Chrome 浏览器应用程序在 Google TV（即 Logitech Revu）上查看的方法，因此我使用的是 http/html。我去过在浏览器中流式传输视频（通过闪存？）的网站。我想用我自己的本地内容复制它。任何帮助是极大的赞赏。我也希望从收集的任何数据中创建一个强大的教程。谢谢你。

ps 我对服务器端的解决方法持开放态度，因为我的主要目标是在 Google TV 的原生 Chrome 应用程序的网页内流式传输视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:44:08.790

您将需要研究 HLS。本质上，您需要一个网络捕手。 [http://4pcbr.com/topic/a_story_about_hls_video_handling](http://4pcbr.com/topic/a_story_about_hls_video_handling)和 [http://www.jasonshah.com/http-live-streaming-and-android/](http://www.jasonshah.com/http-live-streaming-and-android/)和[http://en.wikipedia.org/wiki/HTTP_Live_Streaming](http://en.wikipedia.org/wiki/HTTP_Live_Streaming)

# scheme - 使用 Racket 简化表达式

> ID：15673698
> 
> 赞同：1
> 
> 时间：2013-03-28T03:21:45.670
> 
> 标签：scheme, expression, racket, simplify

我有一个函数可以区分方程并将其作为列表打印到屏幕上。我现在要做的是一个函数，它接受像这样返回的表达式：'(+ (* x 0) (* 2 1)) 并简化答案。摆脱 x*0，因为它总是计算为零并将 2*1 替换为 2，最终只返回 2，因为 2 + 0 是 2。这是我到目前为止所拥有的，显然它非常缺乏，任何帮助获得这个开始将不胜感激。

```
(define (simplify expr)
  (if (not (list? expr))
      expr
      (if (null? (cdr expr)) 
          (car expr)
          (case (car expr)
           ((+
               ))

       )) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:31:05.037

假设您只有带有 '* 和 '+ 作为运算符的二进制表达式，那么使用要简化的表达式的递归下降来编码代数的基本规则就很容易了。如此：

```
(define (simplify exp)
 (cond ((number? exp) exp)
       ((symbol? exp) exp)
       ((list?   exp)
        (assert (= 3 (length exp)))
        (let ((operator  (list-ref exp 0))
              (operand-1 (simplify (list-ref exp 1)))   ; recurse
              (operand-2 (simplify (list-ref exp 2))))  ; recurse
          (case operator
            ((+)
             (cond ((and (number? operand-1) (= 0 operand-1)) operand-2)
                   ((and (number? operand-2) (= 0 operand-2)) operand-1)
                   ((and (number? operand-1) (number? operand-2)) 
                    (+ operand-1 operand-2))
                   (else `(,operator ,operand-1 ,operand-2))))

            ((*)
             (cond ((and (number? operand-1) (= 0 operand-1)) 0)
                   ((and (number? operand-2) (= 0 operand-2)) 0)
                   ((and (number? operand-1) (= 1 operand-1)) operand-2)
                   ((and (number? operand-2) (= 1 operand-2)) operand-1)
                   ((and (number? operand-1) (number? operand-2)) 
                    (* operand-1 operand-2))
                   (else `(,operator ,operand-1 ,operand-2))))
            (else 'unknown-operator))))
       (else 'unknown-expression))) 
```

这仅对表达式执行一次传递。通常，您希望执行通行证，直到结果不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:39:13.350

这类问题的一般解决方案并不是*那么*简单。为了让你开始，考虑使用重写规则，看看`simplify`文章[A Hacker's Introduction to Partial Evaluation 的](http://wry.me/misc/peval.html)第 4 节中显示的过程：

```
We can use rewrite rules to simplify algebraic expressions. For example,

> (simplify '(+ (* 3 x) (* x 3)))
; (* 6 x)

This works by applying a list of rules to all parts of the subject expression
repeatedly until no more simplifications are possible:

(define *simplification-rules*
  '(((+ ?x ?x)          (* 2 ?x))
    ((* ?s ?n)          (* ?n ?s))
    ((* ?n (* ?m ?x))   (* (* ?n ?m) ?x))
    ((* ?x (* ?n ?y))   (* ?n (* ?x ?y)))
    ((* (* ?n ?x) ?y)   (* ?n (* ?x ?y)))))

The left hand column has patterns to match, while the right hand holds responses. 
The first rule says, if you see (+ foo foo), rewrite it into (* 2 foo). Variables 
like ?x can match anything, while ?m and ?n can only match numbers. 
```

# python - 查找元素和打印值

> ID：15673704
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:22:15.110
> 
> 标签：python, xml, xml-parsing

我想解析嵌套元素。我不介意使用[XPath](http://docs.python.org/2/library/xml.etree.elementtree.html#xpath-support)或[Element](http://docs.python.org/2/library/xml.etree.elementtree.html#finding-interesting-elements)。例如，我想打印的一些值位于：

```
>>> root[0][0][0][0][0].tag
'{http://www.domain.com/somepath/Schema}element'
>>> root[0][0][0][0][0].text
'findme' 
```

遍历 XML 文档、解析和打印`element`值的理想方法是什么？这是我正在使用的架构示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<data xsi:schemaLocation="http://www.domain.com/somepath/Schema file.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.domain.com/somepath/Schema">
    <one stuff0="" stuff1="">
        <two stuff0="" stuff1="">
            <three>
                <four stuff0="234234" stuff1="234324">
                    <element>findme</element>
                </four>
                <four stuff0="234234" stuff1="234324">
                    <element>findme2</element>
                </four>
                <four stuff0="234234" stuff1="234324">
                    <element>findme3</element>
                </four>
            </three>
        </two>  
    </one>
    <one stuff0="" stuff1="">
        <two stuff0="" stuff1="">
            <three>
                <four stuff0="234234" stuff1="234324">
                    <element>findme4</element>
                </four>
                <four stuff0="234234" stuff1="234324">
                    <element>findme5</element>
                </four>
                <four stuff0="234234" stuff1="234324">
                    <element>findme6</element>
                </four>
            </three>
        </two>  
    </one>
</data> 
```

我尝试了以下方法，但没有返回结果。即使这确实有效，它也不会看到根[1](http://docs.python.org/2/library/xml.etree.elementtree.html#xpath-support) [0] [1](http://docs.python.org/2/library/xml.etree.elementtree.html#xpath-support) [0][0] 下的元素，依此类推：

```
>>> for tagname in root[0][0][1][0][0].findall('element'):
...   name = tree.get('element')
...   print name
...
>>> 
```

根据这个[问题](https://stackoverflow.com/a/1786786/666891)，我还尝试了以下方法但没有成功：

```
>>> for elem in doc.findall('one/two/three/four'):
...     print value.get('stuff1'), elem.text
...
>>> 
```

**发现问题：**

由于缺乏命名空间规范，我在阅读[ElementTree 中使用 XPath 的需要帮助](https://stackoverflow.com/a/1319417/666891)后了解到该元素没有被读取。所以下面的例子有效：

```
>>> import xml.etree.cElementTree as ET
>>> for event, element in ET.iterparse("schema.xml"):
...     if element.tag == "{http://www.domain.com/somepath/Schema}element":
...        print element.text
...
findme
findme2
findme3
findme4
findme5
findme6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:01:14.613

如果没有看到您的 XML 文档，我无法确定，但我认为您想要做的是：

**测试.xml**

```
<?xml version="1.0"?>
<root>
  <group>
    <element>This is the first text</element>
  </group>
  <group>
    <element>This is the second text</element>
  </group>
  <group>
    <element>This is the third text</element>
  </group>
</root> 
```

**测试.py**

```
import xml.etree.cElementTree as ET

for event, element in ET.iterparse("test.xml"):
    if element.tag == "element":
       print element.text 
```

在终端中运行这些文件我得到：

```
mike@tester:~$ python test.py
This is the first text
This is the second text
This is the third text 
```

# android - 如何处理大量接近警报？

> ID：15673705
> 
> 赞同：0
> 
> 时间：2013-03-28T03:22:20.550
> 
> 标签：android, android-alarms, android-location

我已经在 Android 上构建了一个基于接近警报的应用程序，它按预期工作并完美地触发警报。

作为一个持续的努力，我现在想解决这个应用程序的可伸缩性方面。所以基本上我试图解决一个场景，每个用户可能会订阅 10 到 20 个类别，每个类别可能在特定城市有 100 个 POI（购物等兴趣点）。因此，一次将有 2000 多个警报必须在用户的手机上注册。

这有两个后果：

1.  通过网络从存储库为订阅者获取 2000 个警报的大小可能为 10-20 MiB，并在通过慢速连接加载时挂在 Android 设备上。
2.  即使加载了所有警报，它也会消耗设备上的大量内存。

为了缓解这种情况，我正在寻找一种适当扩展此应用程序的策略。有没有办法我可以找到有关当前位置的扩展信息，并请求仅在一公里范围内加载警报？或任何其他推荐的策略来处理此要求。这方面的代码示例会很棒......

谢谢， Biplab

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:32:34.980

为什么不做一些简单的事情——查询网络服务并让它返回在传入位置（用户位置）的纬度和经度 1 度范围内订阅的所有位置。然后每隔半小时左右通过警报检查客户端上的位置，并根据您的新位置查询新列表。

# r - mean/sd 作为一个值，而不是一个向量

> ID：15673707
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:22:36.380
> 
> 标签：r, vector, mean

R 中的 mean 和 sd 函数返回长度为 1 的数值向量。
我想将均值和标准差计算为单个值，而不是向量。

这看起来很简单：只需取 mean/sd 返回的向量的第一个元素。（diffs[[i]] 是一个数值向量）

```
meanvec<-mean(diffs[[i]])
mean<-meanvec[1] 
```

但是，这会导致另一个长度为 1 的向量！！

```
Browse[1]> meanvec
[1] 0.9940868
Browse[1]> mean
[1] 0.9940868
Browse[1]> class(meanvec)
[1] "numeric"
Browse[1]> class(mean)
[1] "numeric" 
```

如何获得平均值和 sd 作为一个简单值，而不是长度为 1 的数字向量？非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T03:26:18.557

R 中不存在单一值。就 R 而言，标量是长度为 1 的向量，对此您无能为力。但是，您可以使用长度为 1 的向量，就好像它是 R 中的标量一样，所以我看不出问题出在哪里？

请注意，由于缺少标量和特定于标量的 & 优化操作，R 中存在一些低效率。这些已经在类似于 R 的新语言的上下文中进行了讨论，但经过修改以解决它的一些弱点，包括缺乏真正的标量。

Ross Ihaka 在以 JSM2010 (PDF)[形式给出的论文文本中](http://www.stat.auckland.ac.nz/~ihaka/downloads/JSM-2010.pdf)讨论了标量问题。当时的一些博客评论员也谈到了罗斯的想法：

*   克里斯蒂安·罗伯特：[“重新开始，创造更好的东西”](http://xianblog.wordpress.com/2010/09/13/simply-start-over-and-build-something-better/)
*   安德鲁·格尔曼：[“Ross Ihaka to R: Drop Dead”](http://andrewgelman.com/2010/09/13/ross_ihaka_to_r/)

# java - 无法在“/usr”找到 $JAVA_HOME，继续使用系统提供的 Java

> ID：15673709
> 
> 赞同：23
> 
> 时间：2013-03-28T03:23:09.133
> 
> 标签：java, macos, ec2-api-tools

Mac OS X 上任何 Java 命令的输出都带有前缀“无法在“/usr”找到 $JAVA_HOME，继续使用系统提供的 Java...”。例如，

```
$ java -version
无法在“/usr”找到 $JAVA_HOME，继续使用系统提供的 Java...
java版本“1.6.0_43”
Java(TM) SE 运行时环境 (build 1.6.0_43-b01-447-11M4203)
Java HotSpot(TM) 64 位服务器 VM（内部版本 20.14-b01-447，混合模式）

```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-28T03:23:09.133

Java home 环境变量设置不正确，可能是由于来自过时指南（例如 EC2 命令行工具）的说明。

无论您在何处设置 JAVA_HOME（例如 .bashrc），都将其更改为：

```
export JAVA_HOME="$(/usr/libexec/java_home)" 
```

从 Mac OS X 10.5 开始，该可执行文件是设置 JAVA_HOME 的受支持方法。

[https://developer.apple.com/library/content/qa/qa1170/_index.html](https://developer.apple.com/library/content/qa/qa1170/_index.html)

# ide - 用于 REBOL 的 Sublime Text 2 插件

> ID：15673712
> 
> 赞同：4
> 
> 时间：2013-03-28T03:23:26.353
> 
> 标签：ide, editor, rebol

Sublime Text 2 有最新的 REBOL 插件吗？我正在使用来自[http://www.ross-gill.com/page/TextMate_and_REBOL](http://www.ross-gill.com/page/TextMate_and_REBOL)的 TextMate ，但它已经很老了。另外，对于学习 REBOL/Red，什么是好的交互式学习环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:43:49.793

我使用 SciTe ( [http://www.scintilla.org](http://www.scintilla.org) )，它已经为 Rebol 语法做好了准备，所有的配置文件都是非常简单的文本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:59:20.160

TextMate 包的最新版本在这里：[https](https://github.com/rgchris/rebol-tmbundle) ://github.com/rgchris/rebol-tmbundle我欢迎贡献。

不确定为什么当荧光笔工作时年龄是一个问题（并且已经过测试可以与 Sublime Text 一起使用）。您能否详细说明随着时间的推移发生了什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T08:18:52.457

有一个新的，基于 rgchris 的工作，它与 Sublime Text 3 兼容：

[rebol-red-sublime](https://github.com/onetom/rebol-red-sublime)

我正在成功使用它。

# twitter-streaming-api - Tweetstream 将推文打印到控制台但不是页面

> ID：15673713
> 
> 赞同：0
> 
> 时间：2013-03-28T03:23:42.290
> 
> 标签：twitter-streaming-api, tweetstream

我正在使用 tweetstream gem，我正在跟踪的推文显示在控制台上，但在我加载它时没有显示在页面上。这是我的控制器中的操作：

```
def stream
TweetStream::Client.new.track('javascript') do |status|
  puts "#{status.text}"
end 
```

结尾

这是视图：

```
<% TweetStream::Client.new.track('javascript') do |status| %>
  <%= puts "[#{status.user.screen_name}] #[{status.text}]" %>
<% end %> 
```

这是我的第一个 Rails 应用程序，所以我对此很陌生。任何人都知道为什么它打印到控制台但没有显示在视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T06:34:18.107

据我了解，您必须从数据库中提取 Tweetstream。所以设置一个守护进程使用：

```
TweetStream::Daemon.new('tracker', :log_output => true).track("twitter junk") do |tweet|
      ######put tweet.text into db############
end 
```

从控制台启动守护进程：

```
ruby daemonname.rb start 
```

从应用程序从数据库中提取推文。

# list - 使用模式匹配查找 List 中的下一个元素

> ID：15673715
> 
> 赞同：0
> 
> 时间：2013-03-28T03:24:21.833
> 
> 标签：list, scala, pattern-matching

我在玩 scala 模式匹配，试图创建一个 findNext 函数：

```
findNext(1,List(1,2,3)) == 2
findNext(2,List(1,2,3)) == 3
findNext(3,List(1,2,3)) == 1

def findNext(needle : Int, haystack : List[Int]): Int = {
    haystack match {
       case Nil => /* handle it */
       case needle::Nil => needle
       case front::needle::back => back.head
       case needle::back::Nil => back.head
    }
} 
```

我可以使它仅适用于微不足道的情况。

这可以使用模式匹配来完成吗？我知道我可以使用列表中的方法使其工作，但这只是一个玩具程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:42:11.387

```
def findNext(needle : Int, haystack : List[Int]): Option[Int] = {
  @annotation.tailrec def loop(needle : Int, haystack : List[Int], trueHead: Int): Option[Int] =
    haystack match {
      case Nil => None
      case `needle` :: next :: _ => Some(next)
      case `needle` :: Nil => Some(trueHead)
      case _ :: tail => loop(needle, tail, trueHead)
    }
  haystack match {
    case Nil | _ :: Nil => None
    case _ => loop(needle, haystack, haystack.head)
  }
} 
```

有关模式匹配中的反引号，请参[见此答案](https://stackoverflow.com/a/10863176/406435)。

用法：

```
scala> findNext(1,List(1,2,3))
res0: Option[Int] = Some(2)

scala> findNext(2,List(1,2,3))
res1: Option[Int] = Some(3)

scala> findNext(3,List(1,2,3))
res2: Option[Int] = Some(1)

scala> findNext(4,List(1,2,3))
res3: Option[Int] = None

scala> findNext(1,List(1,1))
res4: Option[Int] = Some(1)

scala> findNext(1,List(1))
res5: Option[Int] = None

scala> findNext(1,List())
res6: Option[Int] = None 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T03:44:34.543

由于可能找不到针，因此最好在`Option[Int]`此处返回。仅使用模式匹配，您可以通过以下方式解决它：

```
@tailrec def findNext(needle: Int, haystack: List[Int]): Option[Int] = {
    haystack match {
      case Nil => None
      case front::next::back if front == needle => Some(next)
      case head::tail => findNext(needle, tail)
    }
  } 
```

或者更简单：

```
 @tailrec def findNext(needle: Int, haystack : List[Int]): Option[Int] = {
    haystack match {
      case Nil => None
      case head::tail if head == needle => tail.headOption
      case head::tail => findNext(needle, tail)
    }
  } 
```

请注意，如果在 haystack 中未找到匹配项，则返回 None ，这与您上面的示例不同。然后可以将函数的结果与默认答案结合起来，如下所示：

```
val haystack = List(1,2,3,4)
findNext(4, haystack) getOrElse haystack.head 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T04:07:36.430

`haystack`如果最后一个元素是在条件`needle`句的帮助下，这会回到原始的头部`if`。保存最后一个元素是 的情况下的`findNextR`保存值`needle`。

```
def findNext(needle: Int, haystack: List[Int]): Option[Int]  =  {
  @annotation.tailrec def findNextR(needle: Int, haystack: List[Int], savedHead: Int): Option[Int]  =  {
    haystack match{
      case Nil => None
      case head :: tail => if (head == needle && tail.isEmpty) Some(savedHead)
                                   else if (head == needle) Some(tail.head)
                                   else findNextR(needle, tail, savedHead)
    }
  }
 findNextR(needle, haystack, haystack.head)
}

scala> :load findNext.scala
Loading findNext.scala...
findNext: (needle: Int, haystack: List[Int])Option[Int]

scala> findNext(1, List(1,2,3))
res0: Option[Int] = Some(2)

scala> findNext(2, List(1,2,3))
res1: Option[Int] = Some(3)

scala> findNext(3, List(1,2,3))
res2: Option[Int] = Some(1) 
```

# javascript - Javascript/Node.js：如何在函数调用中将局部变量定义为参数的一部分？

> ID：15673716
> 
> 赞同：3
> 
> 时间：2013-03-28T03:24:27.187
> 
> 标签：javascript, function, arguments

通常，我定义和调用这样的函数 - 特别是当我们使用标志时：

```
function cat(doMeon, doCloseEyes)
{
  if (doMeon) console.log("Meon...");
  if (doCloseEyes) console.log("Hmm, I closed my eyes..."); 
}
...
// And then call, using flags. Names are temporary, only for readability
cat(doMeon=true, doCloseEyes=true); 
```

请注意，我们可以只执行“cat(true, true)”，但这会破坏可读性。

但是这引入的问题是这两个变量现在在全局范围内。我们不应该污染全球范围。但我们不能这样做：

```
// Doesn't work...
cat(var doMeon=true, var doCloseEyes=true); 
```

有没有一种方法可以在这里用作最佳实践？（注意：在外部定义这些变量并不是一个好主意。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:41:58.743

传递具有可读性的参数的一种方法是将包含每个参数的对象作为命名属性传递：

IE

```
cat({
    doMeon: true,
    doCloseEyes: true
}); 
```

在函数内部，您可以执行以下操作：

```
function cat(_props) {
    if (_props.doMeon) console.log("Meon...");
    if (_props.doCloseEyes) console.log("Hmm, I closed my eyes..."); 
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:46:47.673

您可以创建两个函数：

```
function catDoMeon()
{
  console.log("Meon...");
}

function catDoCloseEyes()
{
  console.log("Hmm, I closed my eyes..."); 
}

catDoMeon();
catDoCloseEyes(); 
```

# ruby-on-rails - 为什么我的 Rails 应用程序/网站上没有显示广告？

> ID：15673718
> 
> 赞同：2
> 
> 时间：2013-03-28T03:24:33.207
> 
> 标签：ruby-on-rails, ruby, adsense

我基本上是在尝试添加一个简单的广告横幅代码和另一种包含在脚本中的广告类型，但它们没有显示出来。我试图把它放到我的`show.html.erb`视图中，这基本上是人们的个人资料。

这是完整的代码，显示了我试图包含广告脚本的位置。我需要将代码放在其他地方吗？

```
<script src="/jquery.js" type="text/javascript"></script>
<link href="/src/facebox.css" media="screen" rel="stylesheet" type="text/css"/>
<script src="/src/facebox.js" type="text/javascript"></script> 
<script language="javascript">

 jQuery(document).ready(function($) {
  $('a[rel*=facebox]').facebox() 
}) 

</script>

<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= @user.name %>
       </h1>
      </section>
    <section>
      <%= render 'shared/stats' %>

    </section>
  <br>
  </aside>

  <div class="span10">
    <%= render 'follow_form' if signed_in? %>
    <% if @user.microposts.empty? %>
<h3>Profile</h3>
<% end %>
    <% if @user.microposts.any? %>
      <h3>Browse Text</h3>
      <ol class="microposts">
        <%= render @microposts %>

      </ol>

<script type="text/javascript" src="http://www.URLofAdProvider.com/widget/11xxxxxxxx/"></script>         

    <% end %>
  </div>
  </div>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-xxxxxxxxxxxx";
/* Ad1 */
google_ad_slot = "xxxxxxxxxxx";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

底部的两个脚本是广告脚本。我不能让他们中的任何一个出现。有谁知道为什么我不能显示它们？

# python - 带有 urllib 和口音的 Python3

> ID：15673726
> 
> 赞同：3
> 
> 时间：2013-03-28T03:25:15.223
> 
> 标签：python, encoding, character-encoding, python-3.x, urllib

我尝试访问带有重音符号的 URL，但它不起作用：

```
#!/usr/bin/python3.3
# -*- coding: utf-8 -*- 

import urllib.request

response = urllib.request.urlopen("http://nominatim.openstreetmap.org/search.php?city=Lévis&format=json")
content = response.read()
print(content) 
```

当我执行此代码时，我有此错误作为回报

```
UnicodeEncodeError: 'ascii' codec can't encode character '\xe9' in position 22: ordinal not in range(128) 
```

所以我试试这个

```
response = urllib.request.urlopen("http://nominatim.openstreetmap.org/search.php?city=Lévis&format=json".encode("UTF-8")) 
```

但是还是报错

```
AttributeError: 'bytes' object has no attribute 'timeout' 
```

你有什么想法我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T09:11:02.190

您需要转义查询参数，如@Cairnarvon 所说：

```
import urllib.parse

city = 'Lévis'
query = "city=%s&format=json" % (urllib.parse.quote(city),)
response = urllib.request.urlopen("http://nominatim.openstreetmap.org/search.php?" + query) 
```

# java - java android将Serializable数据对象发送到USB

> ID：15673731
> 
> 赞同：1
> 
> 时间：2013-03-28T03:25:39.563
> 
> 标签：java, android, serialization, usb, packet

我有一个可序列化的数据对象，我想通过 USB 作为数据包发送。它必须以 64 字节数据包的形式发送。在 CI 中会设置一个指向我的对象的指针并逐字节发送对象的大小。我在 java 中找不到“sizeof”功能？我有一个 64 字节的缓冲区，我已经可以用它发送一个数据包。如何将部分 fdata 加载到我的 USB 缓冲区中？

```
FileDataFormat fdata;

public class FileDataFormat implements Serializable {

    public static final Integer numofswitches = 8;  //use 1-7
    // set for 10 channels for future
    byte switchesEnabled = 0; //switchesEnabled

    String[][] switch_name = new String[numofswitches][20];  //auxLabels's
    int[] configurableMaxCurrentTenths = new int[numofswitches];                    //configurableMaxCurrentTenths
    byte softStartByte = 0;         //softStartByte
    byte delayedButtonPressEnable = 0;      //delayedButtonPressEnable
    byte[] delayedButtonPressTimeDelayTenths = new byte[numofswitches];         
    byte currentReadingSelectedChannels = 0;
    byte threshholdEnabled = 0; //threshholdEnabled
    byte[] triggerChannel = new byte[numofswitches]; //triggerChannel
    boolean[] expressionType = new boolean[numofswitches]; //expression type > or <
    float[] hysteresis = new float[numofswitches];
    float[] threshhold = new float[numofswitches];

    public FileDataFormat() {

    }
} 
```

# c++ - 使用图形库的棋盘格

> ID：15673736
> 
> 赞同：0
> 
> 时间：2013-03-28T03:26:01.843
> 
> 标签：c++, graphics

我正在尝试创建一个具有交替颜色的棋盘。我正在使用矩形向量并为每个单独的矩形着色。

```
for (int i=0; i<8; ++i)
    for (int j=0; j<8; ++j)
    {
        grid.push_back(new Rectangle(Point(i*50,j*50),50,50));
        if (i%2==1)
            grid[grid.size()-1].set_fill_color(Color(lemon_chiffon));
        else if (j%2==1)
            grid[grid.size()-1].set_fill_color(Color(moss_green));

        if(j%2==1)
            grid[grid.size()-1].set_fill_color(Color(moss_green));
        else if (i%2==0)
            grid[grid.size()-1].set_fill_color(Color(lemon_chiffon)); 
```

我尝试使用不同的值来确定颜色，而我最接近棋盘的是[this](http://i.imgur.com/AY5TEWS.png)。我知道这是一个数学问题，希望有人能帮助我理解我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:11:15.910

你真的很亲近。问题是你的`if`陈述不太正确。有一种更简单的方法可以做你想做的事。您想知道您正在使用的行和列是偶数还是奇数。当它们相同时，你想给它涂上一种颜色，当它们不同时，你想给它涂上另一种颜色。我会做这样的事情：

```
for (i = 0; i < 8; i++)
{
    for (j = 0; j < 8; j++)
    {
        bool rowIsEven = ((j % 2) == 0); // Is the row an even numbered row?
        bool colIsEven = ((i % 2) == 0); // Is the column an even one?
        grid.push_back(new Rectangle(Point(i*50,j*50),50,50));
        if (rowIsEven == colIsEven)
        {
            grid[grid.size()-1].set_fill_color(Color(lemon_chiffon));
        }
        else
        {
            grid[grid.size()-1].set_fill_color(Color(moss_green));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:15:31.820

对于初学者来说，使用括号和空格可以使您的代码对其他人更具可读性，我认为如果您没有其他任何东西可以改变网格，这将解决您的问题：

```
for (int i=0; i<8; ++i) {
    for (int j=0; j<8; ++j) {
        Rectangle gridSquare = new Rectangle(Point(i*50,j*50),50,50);
        if(((i % 2) == 1) == ((j % 2) == 1)) {
            gridSquare.set_fill_color(Color(moss_green));
        } else {
            gridSquare.set_fill_color(Color(lemon_chiffon));
        }
        grid.push_back(gridSquare);
    }
} 
```

在进行方格图案时，您需要编写 4 种情况

1.  ((i % 2) == 1) && ((j % 2) == 1) //都是奇数
2.  ((i % 2) == 1) && ((j % 2) == 0) //奇数行，偶数列
3.  ((i % 2) == 0) && ((j % 2) == 1) //偶数行，奇数列
4.  ((i % 2) == 0) && ((j % 2) == 0) //两者都是偶数

现在你出错的地方是你没有同时检查 Row **AND** Column。您当前的逻辑是：

*   是奇数行
*   其他是奇数列
*   是奇数列
*   是偶数列

它需要是

*   是奇数行和奇数列
*   否则是奇数行和偶数列
*   Else 是偶数行和奇数列
*   否则是偶数行和偶数列

# php - 从一张表中检索多条记录

> ID：15673738
> 
> 赞同：0
> 
> 时间：2013-03-28T03:26:10.460
> 
> 标签：php

我有一张显示兴趣的表格。每个兴趣都有一个 ID。目前，查询只为一个 ID 带回一个人。它基本上是网站上的一个过滤器，按兴趣对结果进行排序。

```
$catwhere = " and e.person_id IN (select escint_person from person_interests_person where escint_person = e.person_id and escint_interest = 26) "; 
```

我希望它显示来自多个兴趣的结果。

所以在我的基本逻辑中它看起来像这样

```
$catwhere = " and e.person_id IN (select escint_person from person_interests_person where escint_person = e.person_id and escint_interest = 26,27,28,29) "; 
```

但显然这不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:27:56.633

您需要`IN`在第二个查询中使用子句。

```
where escint_person = e.person_id and escint_interest IN( 26,27,28,29 ) 
```

# jquery - 在 Javascript 中访问 ModelState

> ID：15673743
> 
> 赞同：2
> 
> 时间：2013-03-28T03:26:26.460
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, modelstate

我正在尝试在我的 asp.net mvc 4 应用程序上放置一个 jQuery 动画加载器，当用户单击提交按钮时，它会以白色的颜色覆盖整个屏幕，请稍候。这一切都有效。我遇到的问题是，当我的表单上出现验证错误时，客户端验证会启动（我想保留它）并且它被困在 jquery 加载程序屏幕后面。我这样称呼装载机：

```
 $(function () {
            $("#submitbtn").click(function () {
                $("#loading").fadeIn();
            });
        }); 
```

在我的`$(document).ready(....`功能中。我的第一个想法是使用

```
 @if (ViewData.ModelState.IsValid)
        {
            <text>$(function () {
                $("#submitbtn").click(function () {
                    $("#loading").fadeIn();
                });
            });</text>
        } 
```

但是当页面加载时这是有效的，它会写出来（我应该知道我的错误）。现在我很茫然，我不知道该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:49:22.513

我会根据我对您问题的理解来尝试一下。所以你有了：

```
 $(function () {
        $("#submitbtn").click(function () {
            $("#loading").fadeIn();
            if (validFormInputs()) {                   
                yourForm.submit();
            }
            else {
                // hide the laoder again
                $("#loading").fadeOut(); // or .hide or however you want to hide it
            }
        });
    }); 
```

现在，如果提交操作发生得太快，加载器可能根本不会显示，因为提交是回发而不是 ajax 发布。如果在服务器端存在客户端验证未捕获的错误，则您可以再次返回视图，而不必在 javascript 上做一些特殊的事情。因此，您的方法可能如下所示：

```
[HttpPost]
public ActionResult Edit(YourModel input) {
    if (!ModelState.IsValid) {
        return View(input);
    }

    // do something here, redirect or return the view again
} 
```

再次请注意，此代码用于回发操作，而**不是**用于 ajax 帖子。

**更新：** 所以基本上这里是步骤：

1.  捕获提交按钮的点击事件`$("#submitbtn").click(function ()...`
2.  展示你的装载机`$("#loading").fadeIn();`
3.  进行客户端验证`validFormInputs()`
4.  如果验证失败，则隐藏您的加载程序`$("#loading").fadeOut();`

    4a。假设您正在使用验证插件，或者在任何情况下，您都应该显示错误消息

5.  如果验证成功，则提交表单`yourForm.submit();`

6.  如果服务器端验证失败，则返回视图`return View(input);`

# bison - 当使用 flex/bison 预先知道 n 时，如何解析由 n 行组成的数据结构？

> ID：15673747
> 
> 赞同：1
> 
> 时间：2013-03-28T03:26:38.327
> 
> 标签：bison, lex

当预先知道 N 时，flex/bison 是否适合解析包含由表示 x、y、z 坐标的三个浮点数组成的 N 个顶点的数据结构？如果是这样，解析器/词法分析器设置会是什么样子？

# 要填充的所需结构（将创建一个数组）

```
struct Vertex
{
   float x;
   float y;
   float z;
}; 
```

输入文本

```
Vertices: n
  x1 y1 z1
  x2 y2 z2
  ...
  xN yN zN 
```

# 我认为是正确的（flex/bison 的新功能，所以可能是错误的）

## 解析器定义中定义的标记

```
%token VERTICES_IDENTIFIER
%token COLON
%token NUM 
```

## 词法分析器规则

```
Vertices { return VERTICES_IDENTIFIER;}
:        { return COLON; }
[0-9]+   |
[0-9]+"."[0-9]* {return NUM;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:47:54.867

你没有放你的语法文件；所以，我猜是这样的：

```
%{
int num_vertices, idx;
%}
...
%%
file: VERTICES_IDENTIFIER ':' NUM { num_vertices = $3; idx = 0; }
    | NUM NUM NUM             { set_vertice(idx++, $1, $2, $3); }
    ; 
```

..并编写函数`set_vertice(no, x, y, z);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:47:19.230

你的解析器规则会像这样，改编自@xtof pernaud。定义列表是递归定义的。

```
%{
int num_vertices;
int idx;
%}
...

program : count_definition vertex_definitions { /* check that the number of vertices 
                                                   stored = num_vertices */ 
                                              }
        ;

count_definition : VERTICES_IDENTIFIER COLON NUM { num_vertices = $3; idx = 0; 
                                                   /* allocate data structure */ 
                                                 }
                 ;

vertex_definitions : vertex_definitions vertex_definition
                   | vertex_definition
                   ;

vertex_definition : NUM NUM NUM { /* check that idx does not exceed num_vertices */
                                  store_vertex(idx++, $1, $2, $3); 
                                } 
```

当我第一次阅读这个问题时，我认为维度（3）的数量是可变的，以及点（顶点）的数量（N）。如果您发现需要将工具扩展到可变数量的维度，您可能会发现在您定义的顶点的每个浮点列表之间引入分隔符（如分号）很有用。

根据您的需要，您可能会发现可以使用随每次`store_vertex()`调用动态增长的数据结构，然后您根本不需要`num_vertices`在输入文件中声明。

# css - 并排 DIV 未对齐

> ID：15673750
> 
> 赞同：1
> 
> 时间：2013-03-28T03:26:57.100
> 
> 标签：css

我正在尝试创建几个并排放置的 DIV，每个 DIV 占据容纳它们的 div 宽度的一半。与 float: left 并排工作正常，但我的元素没有正确排列。我做了一个 jsfiddle 来告诉你我的意思。 [http://jsfiddle.net/kzFqU/](http://jsfiddle.net/kzFqU/)

如您所见，它看起来还不错，但是如果您将结果设为非常宽的正方形，则输入的正确对齐方式会变得很糟糕。

```
<div class="container-narrow">
<div class="form_field">
    <label>Full Width</label>
    <input type="text" name="what">
</div>
<div class="form_field halfwidth">
    <label>Half Width</label>
    <input type="text" name="what">
</div>
<div class="form_field halfwidth">
    <label>Also Half Width</label>
    <input type="text" name="what">
</div>
<div class="form_field">
    <label>Full Width</label>
    <input type="text" name="what">
</div> 
```

和CSS

```
body {
padding-top: 20px;
padding-bottom: 40px;
padding-left: 20px;
padding-right: 20px;
background:whitesmoke;
}

.container-narrow {
    margin: 0 auto;
    background:white;
    border-radius: 10px;
    padding:10px;
}

.form_field {
    padding: 10px;
}

.form_field input {
    width:100%;
}

.form_field label {
    margin-bottom:0px;
}

.form_field input {
    clear:both;
}

.halfwidth {
    width: 45%;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:35:20.213

尝试在半角元素之后清除浮动，例如：

```
.form_field:before,
.halfwidth:before {
    clear: both;
    display: block;
    content: "\0020";
    visibility: hidden;
} 
```

上述解决方案是解决问题的一些自我清除善良！查看[演示](http://jsfiddle.net/kzFqU/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:33:11.083

在第二个半角 div 之后添加以下内容：

```
<div style="clear:both"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:35:22.683

问题似乎与应用的填充有关`.form_field`。我想这会达到你想要的效果：http: [//jsfiddle.net/cx8T2/](http://jsfiddle.net/cx8T2/)

```
.halfwidth {
    width: 50%;
    float: left;
}

...

<div class="halfwidth">
    <div class="form_field">
        <label>Half Width</label>
        <input type="text" name="what">
    </div>
</div>
<div class="halfwidth">
    <div class="form_field">
        <label>Also Half Width</label>
        <input type="text" name="what">
    </div>
</div> 
```

使用[`box-sizing`](http://www.w3.org/TR/css3-ui/#box-sizing0)CSS3 中的属性也可以在不需要您更改标记的情况下使用，但旧浏览器不支持它：

```
.halfwidth {
    box-sizing: border-box;
    width: 50%;
    float: left;
} 
```

# image - 如何叠加两个图像并将它们保存到一个图像中？（闪光 CS5）

> ID：15673752
> 
> 赞同：0
> 
> 时间：2013-03-28T03:27:32.047
> 
> 标签：image, flash, overlay, flash-cs5

我是 Flash 的菜鸟。而且我不是程序员。与Photoshop（图像设计）相得益彰。

这是我的问题。我找到了一个简单的绘图应用程序并对其进行了修改，只有**界面**，而不是编码。

它提供了一个“保存按钮”，可以将绘图（在***MovieClip***上绘制）保存到磁盘驱动器中。然后我对其进行了修改，将另一层放在***MovieClip*** a ***Graphic***的顶部。但是当我尝试保存它时，它只会将***MovieClip***保存为 .png 图像。我想要的是它将***MovieClip***连同其顶部的***Graphic一起保存到一个.png 图像中。***我怎样才能做到这一点？

如果我将代码提供给“保存按钮”，也许会更有帮助？

** /* 节省 */

```
 private function export():void
    {
        var bmd:BitmapData = new BitmapData(600, 290);

        bmd.draw(board);

        var ba:ByteArray = PNGEncoder.encode(bmd);

    private function completeHandler(event:Event):void {
        var loader:URLLoader = URLLoader(event.target);
        trace("completeHandler: " + loader.data);
    }

    private function saveSuccessful(e:Event):void
    {
        saveDialog = new SaveDialog();

        addChild(saveDialog);

        saveDialog.closeBtn.addEventListener(MouseEvent.MOUSE_UP, closeSaveDialog);
    }

    private function closeSaveDialog(e:MouseEvent):void
    {
        removeChild(saveDialog);
    }

    private function save(e:MouseEvent):void
    {
        export();
    }** 
```

编辑：我放了 'bmd.draw(topLayer);' 在第一次 draw() 调用下，但是当我发布预览时，它显示“访问未定义的属性 topLayer”。我首先检查了它的属性，它提到了这个“实例：topLayer”，它是一个图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:51:41.883

检查代码。`fileReference.save(someOtherName)`某处应该有一个结构，可能有不同的名称`fileReference`，但它会在附近声明为`FileReference=new FileReference()`。然后，跟踪`someOtherName`上面的内容，它应该是`PNGEncoder.encode()`另一个变量的输出，它的类型应该是`BitmapData`. 找出在该位图数据上绘制的内容，将有一条线`bitmapData.draw(someMovieClip)`。查明这`someMovieClip`是否只是程序中使用的层。您可以在该线之后添加一条类似的线来绘制您的形状（您应该有它的名称，以便您可以在代码中引用它），这将在您绘制的东西上绘制您的 Graphic。

如果您绘制的整个图形都可以放在一个屏幕上，只需对正在运行的应用程序进行屏幕截图，将其加载到 Photoshop 中，然后将您的图形正确地放在它保存的任何内容之上即可。或者，使用现有保存的图像作为背景层，将屏幕截图作为前景，清除不是您的图形的区域，并获得更多乐趣。

编辑：好的，就是这样：你有`export()`功能（在你的复制粘贴中是不完整的，顺便说一句），以及我提到的所有相关部分。有一个`draw()`电话，一个`PNGEncoder.encode()`电话和一个`BitmapData`对象。`draw()`您应该在第一次调用之后添加另一行代码，如下所示：

```
bmd.draw(yourGraphic); 
```

`YourGraphic`是您在 MovieClip 上方手动添加的图形的名称，您可以在舞台上的属性中对其进行编辑。应该做。

回复：我已经`bmd.draw(topLayer);`进行了第一次 draw() 调用，但是当我发布预览时，它显示“访问未定义的属性 topLayer”。我首先检查了它的属性，它提到了这个“实例：topLayer”，它是一个图形。

# sql - SQL Server - 比较存储为字符串或 nvarchar 的日期或日期时间？

> ID：15673764
> 
> 赞同：0
> 
> 时间：2013-03-28T03:28:57.730
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我根据日期时间格式做了一个日期。但是，我将它作为字符串/nvarchar 而不是日期时间存储在我的数据库中。我可以比较这些日期吗？这是一个不好的做法吗？

到目前为止，我正在使用 nvarchar 存储日期时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:32:51.143

是的，您仍然可以比较它们，但这肯定是一种不好的做法，因为您需要将此字符串转换为日期数据类型才能在它们之间进行比较。如果您在列上定义了索引，则它们将不再使用，因为该列将被转换，并且会导致大型数据库的性能下降。

比较日期的示例如下：

```
SELECT *
FROM   tableName
WHERE  CONVERT(DATETIME, dateSTRColumn, XXX) > GETDATE() 
```

其中`XXX`是以字符串形式存储的日期的当前格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:32:17.300

您将不得不使用[cast 或 convert](http://msdn.microsoft.com/en-us/library/ms187928.aspx)来解析字符串中的日期时间或直接比较原始字符串。后者是可能的，具体取决于字符串的存储格式。例如，如果日期以 'YYYYMMDD' 格式存储，您可以简单地比较 string1 < string2。

# ruby - 在Ruby中查找字符串是否是重复的子字符串

> ID：15673766
> 
> 赞同：0
> 
> 时间：2013-03-28T03:28:59.077
> 
> 标签：ruby, string

问题是：如果一个字符串可以表示为某个字符串的 k 个连接副本，则该字符串称为 k 字符串。例如，字符串“aabaabaabaab”同时是一个 1 字符串、一个 2 字符串和一个 4 字符串，但它不是一个 3 字符串、一个 5 字符串或一个 6 字符串等等. 显然，任何字符串都是 1 字符串。

给你一个字符串 s，由小写英文字母和一个正整数 k 组成。你的任务是对字符串 s 中的字母进行重新排序，使得结果字符串是一个 k 字符串。

输入 第一个输入行包含整数 k (1 ≤ k ≤ 1000)。第二行包含 s，s 中的所有字符都是小写英文字母。字符串长度 s 满足不等式 1 ≤ |s| ≤ 1000，其中 |s| 是字符串 s 的长度。

输出 重新排列字符串 s 中的字母，使得结果是一个 k 字符串。在单个输出行上打印结果。如果有多个解决方案，请打印其中任何一个。

如果解决方案不存在，请打印“-1”（不带引号）。

这是我的代码：

```
k = gets.to_i
str = gets.chomp.split(//)
n = str.length/k
map = Hash.new(0)
map2 = Hash.new(0)
str.each { |i| map[i] += 1 }

x = str.uniq.permutation(n).map(&:join).each do |string|
  string.each_char { |c| map2[c] += k }
  if map2 == map
    puts string*k
    exit
  end
  map2 = Hash.new(0)
end

puts '-1' 
```

对我来说，这个解决方案似乎应该可以工作，但它在测试用例上失败了。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:37:32.450

这是我的解决方案。

只需创建一个段，然后输出它`k`的时间。如果一个字符没有出现 k 次（或它的倍数），则提前停止并输出 -1。

```
k = gets.to_i
str = gets.chomp.split(//)
counts = Hash.new(0)
str.each { |i| counts[i] += 1 }

out = ''
str.uniq.each do |c|
  if counts[c] % k != 0
    puts -1
    exit
  end
  out = out + c*(counts[c]/k)
end

puts out*k 
```

# java - 通过 linux top 的 Java 内存使用率保持小幅增长？

> ID：15673769
> 
> 赞同：0
> 
> 时间：2013-03-28T03:29:53.777
> 
> 标签：java, memory-management, centos

我们有一个在 centos 机器上运行的套接字监听程序。令人担忧的是，通过顶部显示的应用程序的内存使用量不断增加。另一方面，如果我们使用 jstat gcutil，它会显示永久代的一些小幅增加，但到目前为止，它们不是 FGC，而是很多 YGC。这可能表明任何内存问题吗？最大内存和初始内存都设置为 256M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:37:11.640

> 这可能表明任何内存问题吗？

也许。您所描述的*可能是*由应用程序中的错误引起的内存泄漏。如果这是问题所在，那么最终应用程序将填满 Java 堆 .... 并以`OutOfMemoryError`.

如果您想确认这一点，请尝试使用更小的堆运行应用程序；即较小的最大堆大小。如果您有泄漏，应用程序将在较短的时间后崩溃。

有很多资源可用于查找 Java 内存泄漏。这里有一些：

*   [解决Java内存泄漏的一般策略？](https://stackoverflow.com/questions/1473510/general-strategy-to-resolve-java-memory-leak)
*   [如何查找 Java 内存泄漏](https://stackoverflow.com/questions/40119/how-to-find-a-java-memory-leak)
*   [http://netbeans.org/kb/articles/nb-profiler-uncoveringleaks_pt1.html](http://netbeans.org/kb/articles/nb-profiler-uncoveringleaks_pt1.html)
*   [http://rejeev.blogspot.com.au/2009/04/analyzing-memory-leak-in-java.html](http://rejeev.blogspot.com.au/2009/04/analyzing-memory-leak-in-java.html)

* * *

对此还有其他可能的解释……包括“没有问题”。但是如果你得到了OOME，那么你确实有一个真正的问题。

# html - 如果有空间，如何使用css让内容溢出到另一个div？

> ID：15673775
> 
> 赞同：0
> 
> 时间：2013-03-28T03:30:20.507
> 
> 标签：html, css

我有一个主要内容区域和一个右栏内容区域。右栏中的内容通常很短。如果那里没有内容，我如何使主要内容区域的内容溢出到右侧。

**CSS**

```
#left {
    width: 440px;
    float: left;
}
#right {
    margin-top: 60px;
    width: 250px;
    float: right;
    padding-left: 20px;
    border-left: 1px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:42:43.807

**逻辑**

如果另一个容器是空的，那么让内容流入另一个容器——这是逻辑。CSS 中没有逻辑机制。您必须至少有一些 JavaScript 或一些服务器端逻辑（有条件地更改服务器发送的静态 HTML）。

如果另一个容器为空，JavaScript（或服务器端）中的逻辑可以将布局更改为允许内容流动的布局。这种流程将如何发生，以及是否可以单独使用 CSS，是另一回事。这只是首先解决相关逻辑。

**内容流**

仅靠 CSS 很难让内容流入另一个容器。一般来说，这不是内容在浏览器中的流动方式。我认为您可以合理获得的最接近的方法是使用[CSS3 Columns](http://www.w3.org/TR/css3-multicol/)，但 IE9 或更早版本不支持它们。更重要的是，当前标准不支持使用[不同宽度的列](http://www.w3.org/TR/css3-multicol/#the-multi-column-model)。所以这似乎已经排除了 CSS3 列。

内容流的唯一选择似乎是通过 JavaScript 或在服务器端将内容分解为适当大小的片段，并将内容片段放置在适当的列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:40:43.177

很难确定右侧边栏中是否有任何内容——纯 CSS 无法做到这一点。但是，如果您希望中心内容仍然溢出，`overflow`请在您的 CSS 中调用一个属性：

```
#left {
    width: 440px;
    float: left;
    overflow-x: visible;
} 
```

如果您不想换行，请查看该`white-space`属性。

# ios - 在 iOS 中加载更多分页滚动视图

> ID：15673776
> 
> 赞同：0
> 
> 时间：2013-03-28T03:30:45.070
> 
> 标签：ios, uiscrollview

我有一个应用程序，我可以在其中拥有超过 3000 页的分页滚动视图，但加载需要一分钟多的时间。有没有办法在用户滚动时连续和瞬时加载更多的滚动视图页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:21:50.883

您是否考虑过使用新的`UICollectionView`布局视图（它是 的子类`UIScrollView`）？它们与 UITableView 类似，可以按需加载内容，但呈现方式要灵活得多。仅iOS6，但在这一点上并非不合理。

# asp.net - 在网格视图中添加文本框

> ID：15673779
> 
> 赞同：0
> 
> 时间：2013-03-28T03:30:54.167
> 
> 标签：asp.net, gridview, textbox

我想将内容更改`grid view`为`textbox`.
这是我的代码的一部分

```
public class TextBoxTemplate : ITemplate
{
    public void InstantiateIn(Control container)
    {
        TextBox txtBox = new TextBox();
        txtBox.ID = "txtBox";

        container.Controls.Add(txtBox);
    }
} 
```

//dtTeaching 是网格视图的数据源

```
foreach (DataColumn col in dtTeaching.Columns)
{       
   if (col.ColumnName.Contains("Name"))
   {
       TemplateField tfName = new TemplateField();
       tfName.ItemTemplate = new TextBoxTemplate();
       tfName.HeaderText = "Programme Name";
       gvTeaching.Columns.Add(tfName);
   }
 }

 gvTeaching.DataSource = dtTeaching;
 gvTeaching.DataBind();

 for (int i = 0; i < gvTeaching.Rows.Count; i++)
 {
     TextBox k = (TextBox)gvTeaching.Rows[i].Cells[0].Controls[0];
     k.Text = "test";
 } 
```

但结果是网格视图中不会显示任何内容。
没有`textbox`没有内容，只有 3 个空白行，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:56:56.977

你为什么不使用[模板字段](http://msdn.microsoft.com/en-us/library/aa479353.aspx)。
为什么在设计时在运行时？

这是模板字段的示例

```
<asp:TemplateField HeaderText="FirstName" SortExpression="FirstName">
  <EditItemTemplate>
    <asp:TextBox ID="TextBox1" runat="server"
        Text='<%# Bind("FirstName") %>'></asp:TextBox>
  </EditItemTemplate>
  <ItemTemplate>
    <asp:Label ID="Label1" runat="server"
        Text='<%# Bind("FirstName") %>'></asp:Label>
    <asp:Label ID="Label2" runat="server"
        Text='<%# Bind("LastName") %>'></asp:Label>
  </ItemTemplate>
 </asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:43:52.323

你能拿：

```
TemplateField tfName = new TemplateField();
tfName.EditTemplate = new TextBoxTemplate();
tfName.HeaderText = "Programme Name";
gvTeaching.Columns.Add(tfName); 
```

您可以尝试添加 EditTemplate 来编辑 GridView 中的值。

或者您可以简单地在 GridView 上添加这些字段。
喜欢：
……

```
<Columns>
   <asp:TemplateField>
      <ItemTemplate>
         <asp:Label ID="lbl" runat="server" Text='<%#Bind("ColumnName") %>' />
      </ItemTemplate>
      <EditTemplate>
         <asp:TextBox ID="txt" runat="server" Text='<%#Bind("ColumnName")%>' />
      </EditTemplate>
   </asp:TemplateField>
</Columns> 
```

当网格将显示在页面上时，数据将放置在标签中，当您编辑该行时，它将显示在文本框中。

# jquery - jQuery.submit() 最终会调用原生 DOM submit() 方法吗？

> ID：15673781
> 
> 赞同：1
> 
> 时间：2013-03-28T03:31:07.897
> 
> 标签：jquery, forms, submit, form-submit

使用 jQuery，我最近想知道这两个相似的代码片段是否等效：

```
$('form[name="unique-name"]').submit(); // (call jQuery.submit() on the 
                                        //  collection of 1 form node) 
```

对比

```
$('form[name="unique-name"]')[0].submit(); // (call the native HTMLFormElement.submit()
                                           //  DOM method on the single form in the collection) 
```

两者在我的代码 (IIRC) 中产生相同的结果，但不管我开始怀疑 jQuery 是否只是传递到本机 DOM 方法，或者它是否完全在做其他事情。在 jQuery 源代码中挖掘之后，我找不到任何本地 DOM submit() 被调用的地方。

在阅读[文档](http://api.jquery.com/submit/)和搜索之后，我仍然无法确定 jQuery 是否提供了“更好”的 submit() 或者它们是否只是通过整个集合传递到本机 DOM submit()。它是哪一个？如果可能，请指出我的来源或文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:39:27.823

是的，除非你调用`event.stopPropagation()`.

我有根据的猜测是`submit()`：

```
 postDispatch: function( event ) {
        // If form was submitted by the user, bubble the event up the tree
        if ( event._submit_bubble ) {
            delete event._submit_bubble;
            if ( this.parentNode && !event.isTrigger ) {
                jQuery.event.simulate( "submit", this.parentNode, event, true );
            }
        }
    }, 
```

# php - 按另一个数组键对数组值进行排序

> ID：15673782
> 
> 赞同：3
> 
> 时间：2013-03-28T03:31:10.943
> 
> 标签：php, arrays, sorting

我有 2 个数组：

```
Array
(
    [field_bathrooms] => Bathrooms
    [field_bedrooms] => Bedrooms
    [field_king_beds] => King Beds
    [field_kitchen] => Kitchen
    [field_queen_beds] => Queen Beds
    [field_sleeps_max] => Sleeps
    [field_sofa_beds] => Sofa Beds
    [field_sqft] => Square Footage
    [field_twin_beds] => Twin Beds
)

Array
(
    [0] => Bathrooms
    [1] => Square Footage
    [2] => King Beds
    [3] => Sofa Beds
    [4] => Sleeps
    [5] => Twin Beds
    [6] => Queen Beds
    [7] => Kitchen
    [8] => Bedrooms
) 
```

我想通过第二个数组的键对第一个数组进行排序，所以最终结果是这样的数组：

```
Array(
[field_bathrooms] => Bathrooms
[field_sqft] => Square Footage
[field_king_beds] => King Beds
[field_sofa_beds] => Sofa Beds
[field_sleeps_max] => Sleeps
[field_twin_beds] => Twin Beds
[field_queen_beds] => Queen Beds
[field_kitchen] => Kitchen
[field_bedrooms] => Bedrooms
) 
```

我必须承认我对 PHP 和 MySQL 还比较陌生。希望你们中的某个人能让我重回正轨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:56:08.000

您可以编写一个引用地图（倒数第二个数组）的自定义排序函数：

```
$map = array_flip($second_array);

uasort($first_array, function($a, $b) use ($map) {
    return $map[$a] - $map[$b];
});

print_r($first_array); 
```

也可以看看：[`array_flip()`](http://php.net/array_flip) [`uasort()`](http://php.net/uasort)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T04:08:09.873

这将在一行中完成您想要的操作：

```
$result = array_flip( array_replace( array_flip($arr2), array_flip($arr1) ) );

print_r($result); 
```

解释一下：由于您想按数组中的值而不是键进行排序，因此我们使用[`array_flip`](http://www.php.net/manual/en/function.array-flip.php)翻转每个数组中的数组和值。然后，我们用[`array_replace`](http://php.net/manual/en/function.array-replace.php)第一个数组中的匹配值替换第二个数组中的值（保持当前顺序）。然后我们使用[`array_flip`](http://www.php.net/manual/en/function.array-flip.php)将键和值放回我们开始的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:42:56.177

你的代码可以是这样的：

```
$indx;
for ($i = 0; i < Aarray1size; i++)
{

    $key = Array1[i];
    for ($j = 0; j < array2size; j++)
    {
         if(Array2[j] == $key)
          {
                index = j;
          }
    }
    Array1[i] = Array2[index];
    index = 0;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:55:58.997

无能为力

```
<?

$arr1 = array(
    'field_bathrooms' => 'Bathrooms',
    'field_bedrooms' => 'Bedrooms',
    'field_king_beds' => 'King Beds',
    'field_kitchen' => 'Kitchen',
    'field_queen_beds' => 'Queen Beds',
    'field_sleeps_max' => 'Sleeps',
    'field_sofa_beds' => 'Sofa Beds',
    'field_sqft' => 'Square Footage',
    'field_twin_beds' => 'Twin Beds'
);

$arr2 = array(
    'Bathrooms',
    'Square Footage',
    'King Beds',
    'Sofa Beds',
    'Sleeps',
    'Twin Beds',
    'Queen Beds',
    'Kitchen',
    'Bedrooms',
);

$result = array();
foreach($arr2 as $val)
{
    foreach($arr1 as $k => $v)
    {
        if ($val == $v)
        {
            $result[$k] = $v;
            unset($arr1[$k]);
            break;
        }
    }
}
var_dump($result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T03:57:48.610

```
$array1 = array
(
    'field_bathrooms' => 'Bathrooms',
    'field_bedrooms' => 'Bedrooms',
    'field_king_beds' => 'King Beds',
    'field_kitchen' => 'Kitchen',
    'field_queen_beds' => 'Queen Beds',
    'field_sleeps_max' => 'Sleeps',
    'field_sofa_beds' => 'Sofa Beds',
    'field_sqft' => 'Square Footage',
    'field_twin_beds' => 'Twin Beds',
);

$array2 = array
(
    0 => 'Bathrooms',
    1 => 'Square Footage',
    2 => 'King Beds',
    3 => 'Sofa Beds',
    4 => 'Sleeps',
    5 => 'Twin Beds',
    6 => 'Queen Beds',
    7 => 'Kitchen',
    8 => 'Bedrooms',
);

$array3 = array();
foreach ($array2 as $val)
{
  $key = array_search($val, $array1);
  $array3[$key] = $val;
}

var_dump($array3); 
```

# c# - 移动平台大部分时间都可以工作，但偶尔会失败和/或紧张

> ID：15673783
> 
> 赞同：0
> 
> 时间：2013-03-28T03:31:13.650
> 
> 标签：c#, unity3d, game-physics

我正在编写一个 2D 游戏，并试图让移动平台工作。在进行了一些先前的调查之后，我几乎可以正常工作。这个想法是有 2 个带有碰撞器的平台对象：1 个是可见对象，另一个是设置了 isTrigger 的不可见对象（因为玩家只会通过触发器）。移动平台子项（触发器之一）的代码在此处设置。

```
using UnityEngine;
using System.Collections;

public class MovingPlatformChild : MonoBehaviour
{
public string parentPlatform = "";

void Start ()
{
    transform.parent = GameObject.Find(parentPlatform).transform;
}

// Update is called once per frame
void Update ()
{

}

void OnTriggerEnter(Collider playerObject)
{
    Debug.Log ("enter moving platform");
    if(playerObject.gameObject.name.Contains("Player"))
    {
        playerObject.transform.parent = gameObject.transform;
    }
}
int i = 0;
void OnTriggerStay(Collider playerObject)
{
    Debug.Log ("stay" + i++);
    if(playerObject.transform.position.y >= transform.position.y)
    {
        playerObject.transform.parent = gameObject.transform;
    }
    else
    {
        playerObject.transform.parent=null;
    }
}
void OnTriggerExit(Collider playerObject)
{
    Debug.Log ("EXIT");
    if(playerObject.gameObject.name.Contains("Player"))
    {
        playerObject.transform.parent=null;
    }
}
} 
```

Start() 函数只是使其成为可见平台的子级。这也可以直接在 Unity 编辑器中完成，而不是通过代码。

OnTriggerEnter 函数将播放器对象添加为触发平台对象的子对象，触发平台对象是可见平台的子对象。所以他们应该一起行动。

OnTriggerStay 试图验证仅当玩家在平台顶部时这仍然是正确的。当玩家在触发器内时，如果玩家在平台顶部，那么它会保持连接状态。否则，它不是。这样就不会在底端发生任何事情。

OnTriggerExit 函数只是在退出触发器时将播放器对象作为子对象移除。

这有点工作（但我们知道有点不够好）。它有时会起作用，但玩家会非常紧张。此外，在站在平台顶部下降的过程中，似乎没有调用 TriggerStay 函数（这意味着玩家不再在触发器内）。这是通过我的 Debug “stay” 语句观察到的。最后，有时玩家也会直接从平台跌落。

这段代码中有什么会让玩家跌倒平台，或者在上升过程中如此紧张？我错过了一些重要的东西吗？如果您需要更多代码，请告诉我。

下面是非触发平台（触发平台的父级，位置相同）的移动代码。之后我也会分享播放器的更新功能。

```
void Start () 
{
    origY = transform.position.y;
    useSpeed = -directionSpeed;
}

// Update is called once per frame
void Update ()
{
    if(origY - transform.position.y > distance)
    {
        useSpeed = directionSpeed; //flip direction
    }
    else if(origY - transform.position.y < -distance)
    {
        useSpeed = -directionSpeed; //flip direction
    }
    transform.Translate(0,useSpeed*Time.deltaTime,0);
} 
```

现在播放器代码：

```
 void Update()
{
    CharacterController controller = GetComponent<CharacterController>();
    float rotation = Input.GetAxis("Horizontal");
    if(controller.isGrounded)
    {
        moveDirection.Set(rotation, 0, 0); //moveDirection = new Vector3(rotation, 0, 0);
        moveDirection = transform.TransformDirection(moveDirection);

        //running code
        if(Input.GetKey(KeyCode.LeftShift) || Input.GetKey(KeyCode.RightShift)) //check if shift is held
        { running = true; }
        else
        { running = false; }

        moveDirection *= running ? runningSpeed : walkingSpeed; //set speed

        //jump code
        if(Input.GetButtonDown("Jump"))
        {
            //moveDirection.y = jumpHeight;
            jump ();
        }
    }
    moveDirection.y -= gravity * Time.deltaTime;
    controller.Move(moveDirection * Time.deltaTime);
} 
```

编辑：我在这张 imgur 专辑中添加了平台和播放器的规格：

[http://imgur.com/a/IxgyS](http://imgur.com/a/IxgyS)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:28:02.933

这在很大程度上取决于触发盒的高度，但值得研究。在你的`TriggerStay`中，你有一个关于玩家 y 坐标的 IF 语句。如果触发框相当大并且平台的速度足够快，那么在向上和更新滴答之间，玩家 Y 坐标可能会暂时小于触发 Y 坐标。这将导致他失去亲缘关系，只是在几刻之后又重新获得了它。这可能是“抖动”的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:39:08.160

我遇到的问题包括

1.  移动平台是使用 Translate 编写的。我使用刚体和刚体.Move 函数重写了它。这并没有立即帮助，但是......
2.  我意识到我附加到播放器的 CharacterMotor 脚本（Unity 提供了这个）包括移动平台支持。我将 MovementTransfer 值设置为 PermaLocked，并取消选中脚本上的“使用 FixedUpdate”框，现在 99% 的时间都可以正常工作。我曾经做过一次特定的行为并滑倒了，但我无法重现它。

希望这可以帮助任何可能正在寻找答案的人！

# javascript - 节点永远错误

> ID：15673785
> 
> 赞同：2
> 
> 时间：2013-03-28T03:31:14.070
> 
> 标签：javascript, node.js, forever

我正在尝试使用 node-forever，但是当我尝试启动它时出现错误。

**我将此文件称为 start.js**

```
var forever = require('forever-monitor');

  var child = new (forever.Monitor)('app-index.js', {
    'silent': false,
    'watch': true,
    'logFile': '/srv/http/mywebsite.com/logs/forever.log', // Path to log output from forever process (when daemonized)
    'outFile': '/srv/http/mywebsite.com/logs/node-stdout.log', // Path to log output from child stdout
    'errFile': '/srv/http/mywebsite.com/logs/node-stderr.log'  // Path to log output from child stderr
  });

  child.on('exit', function () {
    console.log('admin/app-index.js has exited');
  });

  child.start(); 
```

**这是我运行 node start.js 时发生的情况**

```
path.js:360
        throw new TypeError('Arguments to path.join must be strings');
              ^
TypeError: Arguments to path.join must be strings
    at path.js:360:15
    at Array.filter (native)
    at Object.exports.join (path.js:358:36)
    at exports.attach (/srv/http/mywebsite.com/public/admin/node_modules/forever-monitor/lib/forever-monitor/plugins/watch.js:45:20)
    at Object.bootstrap (/srv/http/mywebsite.com/public/admin/node_modules/forever-monitor/lib/forever-monitor/monitor.js:35:28)
    at exports.App (/srv/http/mywebsite.com/public/admin/node_modules/forever-monitor/node_modules/broadway/lib/broadway/app.js:47:21)
    at new exports.Monitor (/srv/http/mywebsite.com/public/admin/node_modules/forever-monitor/lib/forever-monitor/monitor.js:118:16)
    at Object.<anonymous> (/srv/http/mywebsite.com/public/admin/start.js:3:15)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-14T18:56:02.150

问题是你已经`watch: true`设置但没有设置`watchDirectory`。

默认`watchDirectory`为空，但必须是字符串路径。这似乎没有很好的记录。

在您的情况下，以下应该可以解决您的问题：

```
var child = new (forever.Monitor)('app-index.js', {
    'silent': false,
    'watch': true,
    'watchDirectory': '/srv/http/mywebsite.com/public/',
    // ... etc.
}); 
```

# jquery - jquery加起来只有两个

> ID：15673789
> 
> 赞同：1
> 
> 时间：2013-03-28T03:31:55.103
> 
> 标签：jquery

每次单击按钮并且存在 id 时，我试图让我的程序将 1 添加到计数器；但我的问题是，当您第三次单击时，它只会提示 2 而不是 3，我希望它尽可能上升到有没有更好的方法来实现这一点，谢谢

这是我的代码：

```
Var q=1;
if ($("#"+val).length==0){
alert (q)
}else
{
q=q+1
alert (q)
} 
```

请这里是我的按钮单击的完整代码，注意 var q 是在全局模式下声明的：我不是这个程序的专家请有人修改我的代码以便我可以让它工作

```
$(document).on('click',".add", function(){

var add=($(this).attr('id')) //this collect the id

var q=1;
        var val=($(this).attr("name"))

 if ($("#"+val).length==0) {

        alert(q)
 }else{
q=q+1
 alert(q)
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:34:22.007

将您的变量 q 声明为全局变量，以便它在整个页面生命周期中都可用，直到您刷新页面。

```
 <script>
     var q = 1;
     function Myfunction()
     {
     // put your logic here and use the q 
     }  
     </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:35:33.090

你需要声明你`Var q=1;`是全局的。

**例子**

```
Var q=1;
$('SELECTOR').click(function(){ /* increment code */ }); 
```

如果只是拼写错误，请忽略或请`;`结束声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:10:13.477

将您的设置`q`为 0 开始。比你可以跳过`if - else`...

```
var q = 0;
$(document).off('click', 'SELECTOR').on('click', 'SELECTOR', function() {
    q++;
    alert(q);
)}; 
```

编辑：

好吧，起初，你`var q`并不像你想象的那样全球化。它应该在您的点击处理程序之外。如您所写，每次单击 q 都会设置为 1 `.add`。

我上面的代码替换了你所有的代码。但我会对其进行调整以更适合您的需求......（我们曾经都是初学者）

```
var q = 0;
$(document).off('click', '.add').on('click', '.add', function() {
    var add = $(this).attr('id');
    var val = $(this).attr("name");
    if($('#'+val).length != 0) {
        q++;
        alert(q);
    } 
    else {
        alert(q);
    }
)}; 
```

注意：我首先使用`.off()`以防万一。我喜欢这样，如果你不这样做，你只能离开`.on()`......

希望这对您有所帮助。

# java - Java：同一个 servlet 中的多个数据资源

> ID：15673790
> 
> 赞同：0
> 
> 时间：2013-03-28T03:32:01.370
> 
> 标签：java, servlets

“javax.naming.Context”在 Java EE 开发中常用。通过在 context.xml 中使用给定的资源名称调用其查找函数，使用它来建立动态数据库连接非常方便。示例代码如下所示，其中“db_name”是您用来标识数据库资源的名称。

```
Context ctx = new InitialContext(); 
DataSource ds = ctx.lookup("java:comp/env/jdbc/db_name"); 
```

我关心的是使用相同上下文查找资源和使用不同上下文查找资源之间有什么区别。哪种方法更有意义或更合适？假设所有数据库资源都在同一个 context.xml 文件中定义。例如：

```
Context ctx = new InitialContext(); 
DataSource ds1 = ctx.lookup("java:comp/env/jdbc/db_name_ds1");
DataSource ds2 = ctx.lookup("java:comp/env/jdbc/db_name_ds2"); 
```

和

```
Context ctx_ds1 = new InitialContext(); 
Context ctx_ds2 = new InitialContext(); 
DataSource ds1 = ctx_ds1.lookup("java:comp/env/jdbc/db_name_ds1");
DataSource ds2 = ctx_ds2.lookup("java:comp/env/jdbc/db_name_ds2"); 
```

感谢您的分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:01:06.803

除了您创建了一个不必要的额外 java 对象外，没有任何区别。但是，如果 jndi 服务器是远程的，您将创建两个不同的网络连接并且无需管理它们——这绝对不是一个人应该做的。

# c++ - result_of 有什么区别 和 decltype ?

> ID：15673792
> 
> 赞同：14
> 
> 时间：2013-03-28T03:32:03.893
> 
> 标签：c++, c++11

我看到`std::async`指定如下：

```
template <class F, class... Args>                   // copied out of the standard
future<typename result_of<F(Args...)>::type>
async(F&& f, Args&&... args); 
```

我原以为它会这样声明：

```
template <class F, class... Args>
auto async(F&& f, Args&&... args) ->
  future<decltype(forward<F>(f)(forward<Args>(args)...)>; 
```

那是等价的，还是有某种方式使用 比使用`result_of`更可取`decltype`？（我知道这`result_of`适用于类型，而`decltype`适用于表达式。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T21:27:33.370

您的版本不适用于例如指向成员的指针。更接近但仍不准确的版本是：

```
template <class F, class... Args>
auto async(F&& f, Args&&... args)
-> future<decltype( ref(f)(forward<Args>(args)...) )>; 
```

剩下的唯一区别`std::result_of`是这会将仿函数作为左值转发（您的版本也有这个问题）。换句话说，这种调用（通过 an `std::reference_wrapper<F>`）的结果是`typename std::result_of<F&(Args...)>::type`。

这是一个尴尬的情况，标准库的几个组件（仅举几例，除了我们刚刚见证的组件：`std::thread`, `std::bind`, `std::function`）是根据难以捉摸的*INVOKE(f, a0, a1, ..., aN)*伪表达式，它不完全等同于`f(a0, a1, ... aN)`. 由于`std::result_of`它是这些组件之一，并且实际上用于计算*INVOKE*的结果类型，这就是您注意到的差异。

因为没有`std::invoke`与`std::result_of`类型特征相匹配的东西，我认为后者仅用于描述相关标准库组件的返回类型，当您的代码调用它们时。如果您想要一种简洁且自我记录的编写方式，例如返回类型（与`decltype`到处撒播相比，这是一个非常有价值的可读性目标），那么我建议您编写自己的别名：

```
template<typename F, typename... A>
using ResultOf = decltype( std::declval<F>()(std::declval<A>()...) ); 
```

（如果您希望将别名用作`ResultOf<F(A...)>`而不是，`ResultOf<F, A...>`那么您需要一些机制来对函数签名进行模式匹配。）

这个别名的另一个好处是它对 SFINAE 友好，不像`std::result_of`. 是的，这是它的另一个缺陷。（公平地说，尽管这已针对即将发布的标准进行了修改，并且实施已经在效仿。）

如果您使用这样的特性，您将不会丢失任何东西，因为您可以调整指向成员的指针，这要归功于`std::mem_fn`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T03:36:58.420

从功能的角度来看完全没有区别。但是，该`decltype`版本使用*trailing-return-type*，这是从编程角度来看的一个区别。

在 C++11 中，`std::result_of`不是绝对必要的，可以使用`decltype`，就像您使用的方式一样。但`std::result_of`向后兼容第三方库（较旧的库），例如具有`result_of`. 不过我看不出有多大优势。

就个人而言，我更喜欢使用`decltype`它，因为它更强大并且适用于*任何*实体，而`result_of`仅适用于可调用实体。因此，如果我使用`decltype`，我可以在任何地方使用它。但是`result_of`，我不得不偶尔切换到`decltype`（即当实体*不可*调用时）。[在 github](https://github.com/snawaz/foam/blob/master/composition/operator.h)上看到这个，我`decltype`在所有函数的返回类型中都使用了这个。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T07:00:27.513

您的问题已经有所不同：“我知道它`result_of`适用于类型，而`decltype`适用于表达式。”

它们都提供相同的功能（`std::result_of`甚至在`decltype`当今实现），并且*您的示例*的差异几乎不存在，因为您已经拥有构建表达式所需的变量。

也就是说，当您只有类型时，差异归结为语法糖。考虑：

```
typename std::result_of< F( A, B, C ) >::type 
```

对比

```
decltype( std::declval<F>()( std::declval<A>(), std::declval<B>(), std::declval<C>() ) 
```

请记住，`std::result_of`在这些情况下这是一种选择。

请注意，在某些情况下`decltype`可以以不能使用的方式使用`std::result_of`。考虑一下，据我所知`decltype( a + b )`，您找不到`F`创建等效项的方法。`std::result_of< F( A, B ) >`

# vmware - 主机和来宾虚拟机的交互

> ID：15673799
> 
> 赞同：0
> 
> 时间：2013-03-28T03:32:35.850
> 
> 标签：vmware, vmware-workstation

有谁知道如何将我主机上的 Python 脚本的输出发送到来宾虚拟机。我在来宾 VM 上有一个 Python 脚本，它从主机上的脚本中获取一个值作为输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T20:48:37.523

如果机器可以访问共享网络文件夹，您可以使用您的 python 脚本在该文件夹中创建一个文件名，并从来宾的该文件夹中读取该文件名。读取文件名后，来宾可以删除文件，这让主机知道输入已被接受。如果您只需要简单的通信，这很容易设置。您实际上可以通过文件名本身或文件内部发送数据，具体取决于您需要发送的数据量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:51:34.997

您可以在主机和来宾系统之间使用复制/粘贴（VMWare 的功能），或者如果这是这两个脚本之间的持续连接，您可以使用套接字连接。

# linux - 使用 bash 编辑文本文件并显示输出

> ID：15673806
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:33:22.797
> 
> 标签：linux, bash, shell, unix, scripting

我有一个包含如下课程的文本文件：

```
csc 4567 - Computer Programming
This course is about stuff...blah blah blah
4.0000 credit hours 
```

我需要编写一个 bash 脚本来获取文本文件并提取必要的信息以显示课程编号、课程名称、课程学分。没有空格，只有逗号。课程学分作为整数。

我可以使用命令行提取信息，但是在编写 bash 脚本时我迷路了。我猜我应该将 grep 和 sed 与 bash 一起使用？我不确定。这就是我所拥有的（这显然不是正确的）。任何意见，将不胜感激。

```
while read courses.txt
do
  $courseLine=grep -iE '^csc [0-9]{4}'
  $creditHours=grep -iE '^[0-4]'
  $courseNumber=${courseLine#/s/s*}
  $courseName=${courseLine%/s/s*}
  printf "$courseNumber,$courseName,$creditHours"
done 
```

以上我要完成的是：读取文件行保存“csc 4567 - Comp prog”作为课程行保存“4”作为学分保存课程行中第二个空格剩余的所有内容作为课程编号保存第二个空格右侧的所有内容课程行作为课程名称，然后显示我想要的输出。

它应该打印 csc4567,Computer Programming,4

是的，这是家庭作业，但由于我是论坛的新手，它不会让我这样标记帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:08:28.560

```
#/bin/bash
while read line
do
 if [[ $line =~ ^(csc\ [0-9]+)\ \-(.*)+ ]]; then
      a="$a${BASH_REMATCH[1]},${BASH_REMATCH[2]}"
elif [[ $line =~ ^([0-9]+)([0-9\.\,])+\ credit ]]; then
    a="$a,${BASH_REMATCH[1]}\n"
#else
  # a="$a,$line" 
fi

done < "a1.txt"
echo -e $a 
```

# apache-pig - 猪拉丁参数正则表达式匹配

> ID：15673807
> 
> 赞同：0
> 
> 时间：2013-03-28T03:33:38.787
> 
> 标签：apache-pig

我的猪脚本中有一个过滤器，它基本上应该从命令行获取一个值，或者如果没有提供命令，则应该假设没有过滤并继续。

例如，脚本中的行如下：

```
b = FILTER a by STATE matches '$VALUEMATCH'; 
```

在命令行中，我可以提供：

```
pig -param VALUEMATCH='VA' SCRIPT.pig 
```

如果我不在命令行中提供这个，我基本上希望脚本继续使用 STATE 的所有值。

所以基本上希望 %default VALUEMATCH 是全部。那么，正确的默认语句应该是什么？

```
%default VALUEMATCH = '*' 
```

不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:35:15.737

删除`=`并使用`.*`

```
%default VALUEMATCH '.*' 
```

# c - 要求澄清类型转换

> ID：15673808
> 
> 赞同：0
> 
> 时间：2013-03-28T03:33:40.193
> 
> 标签：c, casting

编辑：好的，我想我现在明白了：

情况1：

```
#include <stdio.h>
#define function(_a) ((_a)*2)

int main () {
    int (*func)(int) = function(0); // function(0) = 0
    func(7);
...
} 
```

语法没问题，但是，在运行时，main 将尝试访问地址 NULL ，这将导致 windows 中的软件崩溃/unix 环境中的分段错误。

案例二：

```
#include <stdio.h>
#define function(_a) ((_a)*2)

int main () {
    int (*func)(int) = function;
    func(7);
...
} 
```

编译错误，因为“函数”实际上是一个宏，而不是一个实际的函数，因此，指向函数的指针不能指向它，可以这么说。

案例3（正确代码）：

```
 #include <stdio.h>

    int function(int _a){return ((_a)*2);};

    int main () {
        int (*func)(int) = function;
        func(7);
    ...

} 
```

这次我做对了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:38:57.497

这条线不是你想的那样。

```
 int (*func)(int) = 0; 
```

它是一个变量（称为 func），指向具有签名的函数的指针，`int somename(int)`您将其设置为 0。

为了更好地理解，请考虑以下内容：

```
int myfunction(int a) { return 5;} 
```

那么这将工作

```
 int (*func)(int) = myfunction; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:37:52.457

`int (*func)(int) = 0;`mean`func`是一个**函数指针**ie `pointer to a function`，因此在语句中首先`(*func)`返回一个`integer`ie `int`，并将 an`integer`作为参数 ie `(int)`。赋值`int (*func)(int)`为`0`意味着**函数指针**被赋值为指向`NULL`。

# php - kohana 3 使用 get 创建路线

> ID：15673811
> 
> 赞同：0
> 
> 时间：2013-03-28T03:34:17.663
> 
> 标签：php, kohana

这与路由有关。因此，对于通过 url 获取参数，您基本上按照您设置的路由格式将数据传递给 url。

这是使用链接。我创建了路由，将数据传递到url中，并使用请求方法获取参数以供控制器使用。喜欢`URL::site("site/$color/$size")`

如果我通过表单提交构建 url 怎么办？例如，如果我想创建一个基本的搜索查询。

当我通过 get 方法提交表单时，如何让我的表单提交看起来像这样`search/orange/large`而不是这样。`search.php?color=orange&size=large`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:06:28.537

您可以使用[路由过滤器](http://kohanaframework.org/3.3/guide/kohana/routing#route-filters)（v3.3）或[回调](http://kohanaframework.org/3.2/guide/kohana/routing#lambdacallback-route-logic)（3.1、3.2）并手动设置路由参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:31:42.207

你可以这样做...

```
public function action_index()
  {
    // this will only be executed if you submmitted a form in your page
    if(Arr::get($_POST,'search')){
      $errors = '';

      $data = Arr::extract($_POST,array('color','size'));

      // you can now access data through the $data array:
      // $data['color'], $data['size']

      // perform validations here
      if($data['color']=='') $error = 'Color is required';
      elseif($data['size']=='') $error = 'Size is required';

      if($error==''){
        $this->request->redirect('search/'.$data['color'].'/'.$data['size']);
      }
    }

    // load your search page view here

    echo 'this is the search page';

  } 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:41:58.897

根据[定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)，[GET 方法](http://www.cs.tut.fi/~jkorpela/forms/methods.html#tech)将提交的信息作为 URL 参数。如果您特别想以类似的 URL 结尾`site/$color/$size`，您可以使用[POST-REDIRECT-GET 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

一个部分示例，来自我的一个站点上的控制器（页面上有一个名为 的提交按钮`clear_cache_button`）：

```
public function action_index()
{
    $session = Session::instance();

    $is_post = (Request::current()->post('submit_button') !== NULL);
    $is_clear_cache = (Request::current()->post('clear_cache_button') !== NULL);

    $p = Database::instance()->table_prefix();
    $people = DB::query(Database::SELECT, "
            SELECT *
            FROM `".$p."Tabe`;
        ")->cached(600, $is_clear_cache)->execute()->as_array('RegID');

    if ($is_clear_cache)
    {
        HTTP::redirect(Request::current()->uri());
    }
    ...
    ...
    ...
} 
```

# magento - MAGMI 未从远程 URL 导入图像

> ID：15673814
> 
> 赞同：0
> 
> 时间：2013-03-28T03:34:34.647
> 
> 标签：magento, magmi

我正在尝试通过 MAGMI 将产品导入 Magento。CSV 是由不同的应用程序生成的。CSV文件如下

```
sku,name,image,image_label
BLE02U,Hand Cream,http://s3.amazonaws.com/some_bucket_name/product_codes/50b82c2b315bb06f5a000037/product_code_images/original.jpg,awesome image 
```

当我运行 MAGMI 时，没有报告错误。产品出现在 Magento 的后端，但图像已损坏。查看我本地 magento 安装的媒体文件夹表明没有下载任何图像，因为只有我手动上传的产品的图像。

我安装了图像属性处理器，并且正在使用以下正则表达式重命名图像

```
re::((\d|[a-z]){24})\/product_code_images\/original\.([a-z]{3})::$1\.$3 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:05:29.593

好吧，原来我错误地配置了 MAGMI。我没有设置根 magento 路径。请注意，默认情况下这是不正确的，您必须对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T10:56:41.397

@Muk（下方评论）：假设您在根文件夹中安装了 magmi，然后转到：www.yourshop.com/magmi/web/magmi.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T12:26:58.660

我有同样的问题，但是：

PHP 警告：curl_setopt_array(): CURLOPT_FOLLOWLOCATION 在启用安全模式或在...中设置 open_basedir 时无法激活

我刚刚禁用了 open_basedir，它就像一个魅力。

*   经销商编号：Ubuntu
*   说明：Ubuntu 12.04.5 LTS
*   发布时间：12.04
*   代号：精确

Magmi v0.7.20_git

# css - 绝对定位的动态按钮堆叠？

> ID：15673816
> 
> 赞同：1
> 
> 时间：2013-03-28T03:34:39.947
> 
> 标签：css, button, positioning

所以我正在使用 jQuery 循环插件制作一个 jQuery 幻灯片。

部分代码生成`<input type="button">`一个值 from `1`to `i`（其中`i`等于幻灯片总数）

我正在尝试设置这些按钮的样式，以便它们出现在幻灯片中的图像顶部。但是，当我尝试绝对定位按钮时，它们都堆叠在一起。我明白为什么会发生这种情况，我只是不明白如何解决它。

这就是我定位 JavaScript 正在生成的按钮的方式。

```
input[type=button] {
position: absolute;
left: 400px;
} 
```

如何防止按钮堆叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:44:37.693

如果 Position 是绝对的，则必须分别为每个定义 left 和 top ，否则它将堆叠，

或者你可以`position:relative`使用`margin:5px; float:left;`

谢谢你，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:41:52.093

与其尝试绝对定位，不如尝试浮动图像。

```
input[type=button] {
position: relative;
float: center;
padding: 10px;
} 
```

这应该消除堆叠，您还可以轻松添加边框并将其自定义为您想要的任何内容。这只是对我认为必要的一般性描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:42:05.110

我使用标签而不是按钮，但我认为它不会有太大的不同。无论如何，如果你想让它垂直，我会这样：

HTML：

```
<h1>Example</h1><br />
        <h1>Example1</h1><br />
        <h1>Example2</h1><br /> 
```

CSS：

```
h1{
      position: relative;
      float: none;
      padding-bottom: 10px;
} 
```

这是相当简单的 CSS 工作，因此不会让您走得太远，但这是一个好的开始。此外，除非您只处理一个对象而不是多个对象，否则我绝不建议使用绝对定位，因为它会创建堆叠的外观。希望这可以帮助。

# android - Android中的旧调试密钥库

> ID：15673826
> 
> 赞同：0
> 
> 时间：2013-03-28T03:35:24.857
> 
> 标签：android, android-keystore

我在 Eclipse 中有一个示例 hello world android 项目。我想检查一下 debug.keystore 。我正在调试模式下运行应用程序。我检查了eclipse中的构建路径--->首选项--->android--->build。但是当我检查 debug.keystore 文件时，它显示文件的修改日期为 2012 年。所以出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:38:44.863

没有错误。Android SDK 会在您第一次构建应用程序时生成一个调试密钥库，并将其用于在同一台机器上构建的所有应用程序，除非您明确指定不同的调试密钥库。

# sql-server-2008 - 恢复发布数据库后恢复复制

> ID：15673829
> 
> 赞同：0
> 
> 时间：2013-03-28T03:35:55.163
> 
> 标签：sql-server-2008, transactional-replication

我们正在使用事务复制。我有名为 D1 的发布者数据库和名为 D2 的订阅者数据库。D1 正在 DR 环境中传送日志。我们在发布者 (D1) 上启用了“与备份同步”选项。现在我的数据已经备份，但由于某种原因它没有发送到分发服务器，D1 崩溃了。我们正在恢复不同服务器上的备份数据库并再次设置发布和订阅。

那么，任何尚未进入分发数据库的数据现在都将被复制还是不复制？

如果我们删除发布并删除 D1 数据库并使用“保留复制设置”从 DR 环境中恢复它，尽管发布已经存在，但它不会复制数据..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T04:15:34.507

这个可以吗？这是来自另一个站点：http: [//blogs.msdn.com/b/sqlsakthi/archive/2012/03/14/re-configure-replication-after-restoring-publication-database-from-backup-replication-scenario。 aspx](http://blogs.msdn.com/b/sqlsakthi/archive/2012/03/14/re-configure-replication-after-restoring-publication-database-from-backup-replication-scenario.aspx)

编写出版物脚本 -> 删除订阅 -> 删除出版物 -> 重新创建它们

您可以使用“与备份同步”来避免这些情况，但代价是日志读取器延迟较高，具体取决于发布数据库中日志备份的频率。[从http://msdn.microsoft.com/en-us/library/ms152560.aspx](http://msdn.microsoft.com/en-us/library/ms152560.aspx)阅读有关“与备份同步”选项的更多信息

# java - 如何调用 java 类方法在 Apache OFBiz 中返回一个 excel 文件？

> ID：15673842
> 
> 赞同：0
> 
> 时间：2013-03-28T03:37:44.500
> 
> 标签：java, report, apache-poi, ofbiz

我打算从一个小部件来实现这个。用户将一个 ID 输入控制器，然后输入 java 类，该类将生成报告并将 Excel 文件发送给用户。

但是ofbiz似乎有点压倒性。你能给我一些想法来实现这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:57:10.333

有不同的方法可以做到这一点，这实际上取决于你想要做什么。最简单的方法是：在 ofbiz UI 上创建一个指向控制器的链接/按钮。如果您已经有一个使用小部件创建的屏幕，那很简单。然后向控制器添加一个 java 事件。您的事件方法将作为参数 servlet 请求和响应对象。在该方法中创建您的 excel 文件，准备它，并将其写入响应对象的输出流。控制器条目中的响应类型应为“无”，因为您在事件中手动编写响应。所以你不需要渲染一个新的屏幕或任何东西。效果将是，每当用户单击按钮时，它将调用控制器，而控制器又将返回 excel 文件。高温高压

# android - 不同设备授权失败（Android Google Map API v2）

> ID：15673843
> 
> 赞同：1
> 
> 时间：2013-03-28T03:37:49.643
> 
> 标签：android, google-maps, google-maps-android-api-2

我在平板电脑（华硕 TF201）上的应用程序中成功运行了谷歌地图。但是，它不能在我的其他 Android 手机（三星、HTC...）上运行。

我使用keytool生成的SHA1，在google api控制台注册，得到调试密钥。导入lib并逐步设置权限。

控制台出现在我运行它的任何地方：

```
[2013-03-28 11:19:18 - google-play-services_lib] Could not find google-play-services_lib.apk! 
```

也出现在运行良好的平板电脑上。

如果使用以下 logcat 则失败：

```
 03-28 11:10:56.382: E/Google Maps Android API(32067): Failed to load map.  Could not contact Google servers.
    03-28 11:03:54.165: E/Google Maps Android API(9610): Authorization failure.
    03-28 11:03:55.135: D/dalvikvm(9610): GC_CONCURRENT freed 286K, 13% free 10643K/12231K, paused 24ms+3ms, total 89ms
    03-28 11:03:55.580: E/Google Maps Android API(9610): Failed to load map.  Could not contact Google servers.
    03-28 11:03:55.595: E/Google Maps Android API(9610): Failed to load map.  Could not contact Google servers.
    03-28 11:03:56.085: E/Google Maps Android API(9610): Failed to load map.  Could not contact Google servers.
    ... 
```

我找不到我错过了哪些步骤。如果你知道，请给我一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:19:26.983

我自己解决了这个问题！

在谷歌[控制台](https://code.google.com/apis/console/)>>`API ACess``Edit allowed Android apps...`

`SHA1 Key; Android app packet name`

数据包名称需要设置为结构的**叶子**。例如，`com.peter.example1`有效但`com.peter`无效。虽然我仍然不知道为什么它可以在设置错误的平板电脑上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:28:17.050

```
Could not find google-play-services_lib.apk! 
```

Map API v2 使用谷歌服务，可能并非在所有设备上都可用。您应该检查它是否明确存在，如此处所述

[谷歌播放服务 | 设置](http://developer.android.com/google/play-services/setup.html)

```
Authorization failure 
```

也许您没有使用生产密钥导出 apk？如果您通过在 Eclipse 上按运行安装它使用调试密钥，如果您选择导出已签名的 apk，您可以使用不同的密钥。

我所做的所有设置你可以在这里找到，看看你是否遗漏了什么

[Map API v2 授权失败](https://stackoverflow.com/questions/13803833/map-api-v2-authorisation-failure/13805807#13805807)

# c - 如何在C中给客户特定的IP地址

> ID：15673846
> 
> 赞同：12
> 
> 时间：2013-03-28T03:38:12.427
> 
> 标签：c, sockets, client-server, ip-address

我正在尝试在 C 中实现一个简单的客户端和服务器，但我在网上找不到如何为客户端设置特定 IP 地址的示例。这是我到目前为止得到的：

```
sockfd = socket(PF_INET, SOCK_STREAM, 0);
if (sockfd == -1)
{
    <some code to handle error>
}
address.sin_family = AF_INET;
address.sin_addr.s_addr = inet_addr(<addressOfTheServer>);
address.sin_port = htons(<portToConnectToServer>);
len = sizeof(address);

int result = connect(sockfd, (struct sockaddr *)&address, len); 
```

在服务器端，我检查客户端 IP 地址，我总是得到 127.0.0.1

我想改变一些不同的东西。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-28T05:23:39.840

如果您希望您的客户端使用特定的网络接口进行连接（例如，因为您有多个网卡），那么您首先需要在ing[`bind(2)`](http://linux.die.net/man/2/bind)之前调用该接口的 IP 地址。`connect`例如，如果您有两个 IP 地址为 192.168.1.100 和 10.101.151.100 的网络接口，那么要使用 192.168.1.100 地址进行连接，您可以这样做：

```
// Error checking omitted for expository purposes
int sockfd = socket(AF_INET, SOCK_STREAM, 0);

// Bind to a specific network interface (and optionally a specific local port)
struct sockaddr_in localaddr;
localaddr.sin_family = AF_INET;
localaddr.sin_addr.s_addr = inet_addr("192.168.1.100");
localaddr.sin_port = 0;  // Any local port will do
bind(sockfd, (struct sockaddr *)&localaddr, sizeof(localaddr));

// Connect to the remote server
struct sockaddr_in remoteaddr;
remoteaddr.sin_family = AF_INET;
remoteaddr.sin_addr.s_addr = inet_addr(server_ip);
remoteaddr.sin_port = htons(server_port);
connect(sockfd, (struct sockaddr *)&remoteaddr, sizeof(remoteaddr)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T16:02:07.237

好的，所以我将解决方案与从计算机上获取 IP 地址一起：

```
 /*dl_senderprog.c - debian linux send to server a client, datagram*/

 /***********************************************************************

 140203  lets see if we can bind to a port

 ts7500:/var/www/jon/uvir_sensor_lab/source/socket#
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket# vi senderprog_bind.c
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket# gcc -g senderprog_bind.c -o senderprog_bind
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket# ./senderprog_bind
 Sender:Client-Usage: ./senderprog_bind <hostname> <message>
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket#
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket#
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket# ./senderprog_bind 10.0.1.26 "dot,33,22"
 MY IP address:10.0.1.242: on port: 1043
 Sender: Client-gethostname() is OK...
 Sender: Client-socket() sockfd is OK...
 Sender: Using port: 14950
 Sender: Client-sendto() is OK...
 Sender: sent 9 bytes to 10.0.1.26
 Sender: Client-sockfd successfully closed!
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket#
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket#
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket# # it worked!!!!!
 ts7500:/var/www/jon/uvir_sensor_lab/source/socket#

 ***********************************************************************/

 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
 #include <errno.h>
 #include <string.h>
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <netinet/in.h>
 #include <arpa/inet.h>
 #include <netdb.h>

 #include <sys/ioctl.h>
 #include <net/if.h>

 /* the port users will be connecting to 14950 is the port on the windows machine
    that I have the server running on */
 #define TOPORT 14950
 #define MYPORT 1043

 void my_ip( char *myniccard, char *myipaddr) {
      int fd;
      struct ifreq ifr;

      myipaddr[0]=0;

      fd = socket(AF_INET, SOCK_DGRAM, 0);

      /* I want to get an IPv4 IP address */
      ifr.ifr_addr.sa_family = AF_INET;

      /* I want IP address attached to "eth0" */
      //strncpy(ifr.ifr_name, "eth0", IFNAMSIZ-1);
      strncpy(ifr.ifr_name, myniccard, IFNAMSIZ-1);

      ioctl(fd, SIOCGIFADDR, &ifr);

      close(fd);

      /* display result */
      sprintf(myipaddr,"%s"
        , inet_ntoa(((struct sockaddr_in *)&ifr.ifr_addr)->sin_addr));
      printf("MY IP address:%s: on port: %d\n", myipaddr, MYPORT);

      }   // my_ip

 int main(int argc, char *argv[ ])
 {
 int sockfd;
 /* connectors address information */
 struct sockaddr_in their_addr;
 struct sockaddr_in localaddr;
 char myipaddressm[22];   //buffer for ip address
 char *myniccardm ="eth0";   // check with ipconfig for correct ethernet port

 struct hostent *he;
 int numbytes;

 if (argc != 3) {
      fprintf(stderr, "Sender:Client-Usage: %s <hostname> <message>\n", argv[0]);
      exit(1);
      }

 my_ip(myniccardm, myipaddressm);

 /* get the host info */
 if ((he = gethostbyname(argv[1])) == NULL) {
      perror("Sender: Client-gethostbyname() error lol!");
      exit(1);
      }
  else
      printf("Sender: Client-gethostname() is OK...\n");

 if((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {
       perror("Sender: Client-socket() error lol!");
       exit(1);
       }
   else
       printf("Sender: Client-socket() sockfd is OK...\n");

 // Bind to a specific network interface
 // (this is unusual, as you normally do not want a specific
 //  port for the client, but we have a specific server in
 //  this case that will not accept connects unless its on
 //  a specific port )
 localaddr.sin_family = AF_INET;
 localaddr.sin_addr.s_addr = inet_addr(myipaddressm);
 localaddr.sin_port = htons(MYPORT);  // Any local port will do
 bind(sockfd, (struct sockaddr *)&localaddr, sizeof(localaddr));

 /* host byte order */
 their_addr.sin_family = AF_INET;
 /* short, network byte order */
 printf("Sender: Using port: %d\n",TOPORT);
 their_addr.sin_port = htons(TOPORT);
 their_addr.sin_addr = *((struct in_addr *)he->h_addr);
 /* zero the rest of the struct */
 memset(&(their_addr.sin_zero), '\0', 8);

 if((numbytes = sendto(sockfd, argv[2],
                       strlen(argv[2]),
                       0,
                       (struct sockaddr *)&their_addr,
                       sizeof(struct sockaddr))) == -1) {
       perror("Sender: Client-sendto() error lol!");
       exit(1);
       }
   else
       printf("Sender: Client-sendto() is OK...\n");

 printf("Sender: sent %d bytes to %s\n", numbytes, inet_ntoa(their_addr.sin_addr));

 if (close(sockfd) != 0)
       printf("Sender: Client-sockfd closing is failed!\n");
   else
       printf("Sender: Client-sockfd successfully closed!\n");
 return 0;

 }//main

 /*******************************************EOF***********************/ 
```

我已经在我的 debian linux 嵌入式 arm ts-7500 单板计算机上运行了它。

# css - D3 可缩放包布局

> ID：15673853
> 
> 赞同：2
> 
> 时间：2013-03-28T03:39:04.417
> 
> 标签：css, d3.js

我正在尝试实现 [https://github.com/mbostock/d3/wiki/Gallery](https://github.com/mbostock/d3/wiki/Gallery)上提供的可缩放包布局代码。但是当我实现代码时，气泡内的文本会重叠。那么我该如何避免这种情况问题或解决这个问题。

# java - 将另一个 java 文件中返回的数据插入到当前 java 文件（相同的包/项目）中的 Derby DB

> ID：15673854
> 
> 赞同：0
> 
> 时间：2013-03-28T03:39:23.740
> 
> 标签：java, jdbc, derby

我在 NetBeans IDE 的项目文件夹中的同一个包下有两个 .java 文件。

我正在尝试使用以下方法使用 JDBC 将数据插入到 Derby DB：

```
public static void insertDisease(int id, String diseaseName, String diseaseDefinition) {
    try {
        stmt = conn.createStatement();
        stmt.execute("insert into " + tableName + " values (" + id + ",'" + diseaseName + "','" + diseaseDefinition + "')");
        stmt.close();
    } catch(SQLException sqlExcept) {
        sqlExcept.printStackTrace();
    }
} 
```

我在另一个 .java 文件（在同一个包中）中使用以下方法返回了我需要的数据：

```
public List<String> nameOf() {
    String nameStr = null;
    List<String> nameResults = new ArrayList<String>();

    for(int j=101;j<=110;j++) {
        refNum = j;

        try {                
            //crawl and parse HTML from definition and causes page
            Document docN = Jsoup.connect("http://www.abcde.edu/encylopedia/article/000" + refNum + ".htm").get();

            // scrape name data
            Elements name = docN.select("title");

            nameStr = name.get(0).text();
            //System.out.println(nameStr);

            nameResults.add(nameStr);

        } catch (Exception e) {
            nameStr = "No data";
            nameResults.add(nameStr);
            //System.out.println("Reference number " + refNum + " does not exist.");
        }            
    }
    return nameResults;
} 
```

我应该如何实现我的主要方法？这就是我现在所拥有的：

```
public static void main(String[] args) throws InstantiationException, IllegalAccessException, SQLException {
    createConnection();
    for(int i=101;i<=110;i++) {
        insertDisease(i, ?, ?);
    }
    viewTable(conn, dbURL);
} 
```

应该输入什么作为第 2 和第 3 参数（问号），以便将第 101 到第 110 的疾病名称相应地插入到我的 Derby DB 中？

例如，该表应如下所示：

```
id      name           definition
101     stomachache    stomach hurts
102     headache       head hurts
103     toothache      tooth hurts 
```

提前致谢！

# ios - 每次显示 UIViewController 时调用一个方法

> ID：15673862
> 
> 赞同：1
> 
> 时间：2013-03-28T03:40:28.500
> 
> 标签：ios, objective-c, uiview, uiviewcontroller

我想在每次显示 a 时显示整页图像广告`UIViewController`。我想我必须在`viewDidAppear`or中调用该方法`ViewWillAppear`，但它们被调用一次。

```
- (void) viewDidAppear:(BOOL)animated{
    [self showAds];
}

- (void) showAds{
    //Do Something
} 
```

每次显示 uiviewcontroller 时我应该怎么做才能调用方法（即使它已经创建）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T04:04:19.457

`ViewWillAppear`每次`UIViewController`显示 a 时都会调用，但在应用返回前台时不会调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T04:37:35.327

您可以通过以下代码使用通知来实现您的目标，这种情况特别是当您的应用程序处于后台并且用户按下 HOME 按钮以激活它时。

仅当您的应用程序在 viewDidLoad 中进入 Forground 时注册通知。

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(handleEnteredBackground)
                                             name: UIApplicationDidBecomeActiveNotification
                                           object: nil]; 
```

编写应用程序进入Forground时调用的方法

```
-(void)handleEnteredBackground
{
    NSLog(@"%s",__FUNCTION__);
    // Your stuff here
} 
```

不要忘记在 viewDidUnload 方法中删除观察者

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

每次您的应用程序进入Forground 时发布新通知

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{

    [[NSNotificationCenter defaultCenter] postNotificationName:UIApplicationDidBecomeActiveNotification object:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T03:46:25.110

每次都应该调用 ViewWillAppear。采用：

```
- (void) viewWillAppear:(BOOL)animated{
    [self showAds];
} 
```

# ruby - 如何一次访问两个数组元素

> ID：15673863
> 
> 赞同：0
> 
> 时间：2013-03-28T03:40:30.310
> 
> 标签：ruby, ruby-on-rails-3

我有一组用户对象：@users = User.all。现在我想用这样的东西填充一个两列的表。但是下面的代码不起作用。它告诉我`first_name`是一个未定义的方法。（我也不知道如何跳过迭代）：

```
<table class="member_table">
  <% for i in 0..@users.length %>
    <tr>
      <td><%= @users[i].first_name %></td>
      <td><%= @users[i+1].first_name %></td>
    </tr>
    <% skip one iteration %>
  <% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:52:46.970

我倾向于使用[`Enumerable#each_slice`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice).

该`each_slice`方法将您的数组转换为“切片”数组，您将其大小指定为第一个参数，如下所示：

```
(0...10).each_slice(2).to_a
=> [[0, 1], [2, 3], [4, 5], [6, 7], [8, 9]] 
```

使用您的示例，您最终会得到：

```
<table class="member_table">
  <% @users.each_slice(2) do |first_user, second_user| %>
    <tr>
      <td><%= first_user.first_name %></td>
      <td><%= second_user.first_name unless second_user.nil? %></td>
    </tr>
  <% end %>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:46:09.310

下次，发布错误消息的全文。

您将超出数组范围并尝试取消引用`nil`. `nil`没有办法`first_name`。

假设您的阵列中有两个用户，U0 和 U1。您的数组现在长度为 2。

您现在正在循环这个数组：

*   i = 0，然后打印 U0 和 U1
*   i = 1，然后打印 U1 并尝试打印不存在的 U2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:01:35.837

我肯定会选择 theTRON 的解决方案。但是，在您的情况下，当您尝试访问`@users[N]`where时会触发异常`N >= @users.length`

例如 ：

```
test = [1,2,3]
test[1]     # => 2
test.length # => 3
test[3]     # => not defined 
```

# paypal - 您的金融机构表示无法成功验证此交易。

> ID：15673864
> 
> 赞同：0
> 
> 时间：2013-03-28T03:40:37.660
> 
> 标签：paypal

我在 BigCommerce 结账时收到此断断续续的消息。

您的金融机构表示无法成功验证此交易。为防止未经授权的使用，此卡不能用于完成您的购买。您可以通过选择另一种付款方式或使用不同的卡来完成购买。

我的 API 在 Paypal Payments Pro 中是正确的，Check out 工作正常，然后就不起作用。试了几张卡，有时候卡可以，有时候不行。这是错误消息。

您的金融机构表示无法成功验证此交易。为防止未经授权的使用，此卡不能用于完成您的购买。您可以通过选择另一种付款方式或使用不同的卡来完成购买。

我在另一个 BigCommerce 网站上设置了相同的帐户，从来没有遇到过问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T14:43:22.743

如果您有另一个 BigCommerce 网站并且正在使用 PayPal 帐户，请确保您的起始发票号码相距足够远，否则您将向 PayPal 发送重复的发票号码并最终返回错误。我遇到了同样的错误，我刚刚设置了必须将我商店的一个起始发票编号（在商店设置/杂项下）设置为一个非常高的数字。这解决了问题。感谢 BigCommerce 技术支持人员！

（您应该能够通过查看商店日志来查看遇到的错误）

# javascript - 从链接中删除 JavaScript

> ID：15673865
> 
> 赞同：1
> 
> 时间：2013-03-28T03:40:39.463
> 
> 标签：javascript

链接的代码如下：

```
<td class="buttonColumn">
<a href="javascript:confirmDialog('Are you sure you want go?', 'http://google.com');" class="actionButtonNew">Leave to Google</a>
</td>

<td class="buttonColumn">
<a href="javascript:confirmDialog('Are you sure you want go?', 'http://yahoo.com');" class="actionButtonNew">Leave to Yahoo</a>
</td> 
```

页面上有多个按钮，格式完全相同，也需要更改。我在想这样的事情：

```
var fix = document.getElementsByClassName('actionButtonNew');
for (var i=0; i<fix.length; i++) { 
```

我不确定如何完成代码。我试过这个：

```
var fix = document.getElementsByClassName('actionButtonNew');
for(var i = 0; i < fix.length; i++) {
    try {
        var l = fix[i];
        var h = fix[i].parentNode.getElementsByClassName('actionButtonNew')[0].href.replace("javascript:confirmDialog('Are you sure you want to go?',", "");
        l.href = h;
    } catch(e) {}
} 
```

我知道这是非常混乱和糟糕的。它确实将链接更改为：' http: [//google.com](http://google.com) '）；

所以我想我可能走在正确的轨道上。请帮我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:11:24.307

这是一个想法：与其处理在某些极端情况下必然会中断的混乱正则表达式，不如`confirmDialog`用一个无需确认即可重定向的函数替换：

```
window.noConfirm = function(m, url) {
    document.location.href = url;
}

var fix = document.getElementsByClassName('actionButtonNew');
for (var i = 0; i < fix.length; i++) {
    fix[i].href = fix[i].href.replace('confirmDialog', 'noConfirm');
} 
```

[http://jsfiddle.net/AV4tB/](http://jsfiddle.net/AV4tB/)

还有一个有趣的想法：改变它调用一个立即修复链接的函数，然后触发点击：

```
window.fixMe = function(m, url) {
    this.href = url;
}

var linksToFix = document.getElementsByClassName('actionButtonNew');
for (var i = 0; i < linksToFix.length; i++) {
    window.a = linksToFix[i];
    linksToFix[i].href = linksToFix[i].href.replace('confirmDialog(', 'fixMe.call(a, ');
    linksToFix[i].click();
} 
```

[http://jsfiddle.net/AV4tB/1/](http://jsfiddle.net/AV4tB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:50:50.787

对用户说“你真的想这样做吗？”很烦人。每次他们点击一个链接。毕竟，后退按钮通常会让他们直接返回，或者如果他们很快的话，退出键会取消导航。

由于 A 元素可能并非都是链接（有些是目标），因此您可以使用`document.links`集合获取页面中的所有链接，然后对其进行迭代：

```
// Function to call
function navPrompt() {
  var text = this.textContent || this.innerText
  return confirm('Are you sure you want to go to ' + text + '?');
}

// Attach to all listeners
window.onload = function() {

  var links = document.links;
  var i = links.length;
  while (i--) {
    links[i].onclick = navPrompt;
  }
} 
```

另一方面，如果您想删除确认框并更改：

```
href="javascript:confirmDialog('Are you sure you want go?', 'http://google.com');" 
```

到：

```
href="http://google.com" 
```

你可以做：

```
window.onload = function() {

  var link, links = document.links;
  var i = links.length;
  while (i--) {
    link = links[i];
    link.href = link.href.replace(/.*(http[^\'\"]+).+/i,'$1');
  }
} 
```

这将删除 URL 并将其分配给 href 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:54:23.210

试试这个：

```
var fix = document.getElementsByClassName('actionButtonNew');
for (var i = 0; i < fix.length; i++) {
    fix[i].href = fix[i].href.replace(/javascript:confirmDialog\(\'Are you sure you want go\?\'\, \'(http\:\/\/.*\.(.){2,3})'\);/gi,'$1');
} 
```

它使用正则表达式仅用链接替换确认 JS。
例如`"javascript:confirmDialog('Are you sure you want go?', 'http://yahoo.com');"`变成`"http://yahoo.com"`

# python - Python：按位置替换字符串中的字符

> ID：15673872
> 
> 赞同：1
> 
> 时间：2013-03-28T03:41:41.853
> 
> 标签：python

尝试仅按位置替换字符串中的字符。

这是我所拥有的，任何帮助将不胜感激！

```
for i in pos:
    string=string.replace(string[i],r.choice(data)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:46:03.357

为什么不直接更换呢？

```
for i in pos:
    newhand=newhand.replace(newhand[i],r.choice(cardset)) 
```

去：

```
for i in pos:
    newhand[i]=r.choice(cardset) 
```

这是假设这`hand`是一个列表而不是字符串。
如果`hand`是程序中此时的字符串，
我建议将其保留为列表，因为字符串无法更改，因为它们是[不可变的](http://en.wikipedia.org/wiki/Immutable_object)

如果你想保持手作为一个字符串，你总是可以这样做：

```
newhand = ''.join([(x,r.choice(cardset))[i in pos] for i,x in enumerate(newhand)]) 
```

但这将转换`newhand`为一个列表，然后将其加入一个字符串，然后再将其存储回`newhand`.

此外，该行：

```
if isinstance(pos, int):
                pos=(pos,) 
```

应改为：

```
pos = [int(index) for index in pos.split(',')] 
```

您不需要`isinstance`，因为那将始终返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:56:54.747

如果您还想继续使用字符串，这就是解决方案：

```
newhand = '{0}{1}{2}'.format(newhand[:i], r.choice(cardset), newhand[i + 1:]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T03:59:07.507

您的问题在于替换功能。当您调用 replace 函数时，它会将第一个参数的*所有*实例替换为第二个参数。

因此，如果 newhand = AKAK9，newhand.replace("A","Q") 将导致 newhand = QKQK9。

如果可能，将字符串更改为列表，然后执行以下操作以更改特定索引：

```
for i in pos:
    newhand[i]=r.choice(cardset) 
```

如果需要，您可以使用 str() 将 newhand 列表更改回字符串：

```
hand = ''.join(str(e) for e in newhand_list) 
```

# jquery - 如何使用 jQuery 从 xml 数据打印数组？

> ID：15673879
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:42:27.973
> 
> 标签：jquery, html, xml, arrays, onload

我只是想从 XML 文件中打印一个 jQuery 数组。这是我的代码。正如您从 html 代码中看到的那样，我正在尝试打印 stockList。另外，我是否正确执行了 onBodyLoad？

HTML：

```
 <body onload="onBodyLoad()">
      <div id="stockList"></div>
      <br />
      <br />
      <br />
      <div id="stockInfo"></div>
   </body> 
```

jQuery：

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "stocks.xml",
        dataType: "xml",
        success: function (onBodyLoad) {
            var stocklist = new Array();
            var stockinfo = new Array();
            $(onBodyLoad).find('Stock').each(function () {
                var company = $(this).find('Company').text();
                var market = $(this).find('Market').text();
                var sector = $(this).find('Sector').text();
                var price = $(this).find('Price').text();
                $(onBodyLoad).find('YearRange').each(function () {
                    var low = $(this).find('Low').text();
                    var high = $(this).find('High').text();
                });
                $(onBodyLoad).find('Dividend').each(function () {
                    var amount = $(this).find('Amount').text();
                    var yieldx = $(this).find('Yield').text();
                    var frequency = $(this).find('Frequency').text();
                });
                stocklist = $(company);
                $('#stockList').append('<div><p>' + stocklist + '</p></div');
            });
        }
    });
}); 
```

XML:

```
<Stock symbol="GOOG">
    <Company>Google</Company>
    <Market>NASDAQ</Market>
    <Sector>Software</Sector>
    <Price>$487.80</Price>
    <YearRange>
        <Low>$331.55</Low>
        <High>$488.50</High>
    </YearRange>
    <Dividend available="false"/>
</Stock>
<Stock symbol="BA">
    <Company>Boeing Company</Company>
    <Market>NYSE</Market>
    <Sector>Aerospace</Sector>
    <Price>$79.05</Price>
    <YearRange>
        <Low>$63.70</Low>
        <High>$89.58</High>
    </YearRange>
    <Dividend available="true">
        <Amount>$1.20</Amount>
        <Yield>$1.50</Yield>
        <Frequency>QTR</Frequency>
    </Dividend>
</Stock> 
```

期望输出：
谷歌
波音公司

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:20:54.970

要收集公司名称，对其进行排序并打印：

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "stocks.xml",
        dataType: "xml",
        success: function (xmlData) {
            var companyNames = [];
            $(xmlData).find('Stock').each(function () {
                var company = $(this).find('Company').text();
                companyNames.push(company);
            });
            companyNames.sort();
            $.each(companyNames, function (index, name) {
                $('#stockList').append('<div><p>' + name + '</p></div>');
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:19:49.120

像这样修改你的代码：

```
<body>
      <div id="stockList"></div>

   </body> 
```

**脚本：**

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "stocks.xml",
        dataType: "xml",
         success: function(xml){
         var newArray = [];
            $(xml).find('Stock').each(function () {
                var company = $(this).find('Company').text();

               newArray.push(company );

            });

           newArray.sort();

            $(companyNames).each( function (index, name) {
            $('#stockList').append('<div><p>' + name + '</p></div>');
        });

        }
    });
}); 
```

# ios - 苹果拒绝任何访问 UDID 的应用程序，不支持 Retina，iPhone 5 显示器？

> ID：15673882
> 
> 赞同：12
> 
> 时间：2013-03-28T03:42:34.397
> 
> 标签：ios, ios4, appstore-approval

[从TNW](http://thenextweb.com/apple/2013/03/21/after-a-year-of-warnings-apple-will-no-longer-accept-any-apps-that-use-udids-as-of-may-1st/)得到消息，该消息称，“`Starting May 1, the App Store will no longer accept new apps or app updates that access UDIDs. Please update your apps and servers to associate users with the Vendor or Advertising identifiers introduced in iOS 6."`

我的问题很简单，5 月 1 日之前发布并访问 UDID的**OLDER APPS怎么样？**另外，如果应用程序不支持视网膜显示怎么办？他们是否将其从 App Store 中删除？如果是这样，我害怕听到**YES**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T05:10:53.610

苹果没有授予访问 UDID 的权限，这非常糟糕，但是有一些解决方法。查看[链接](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)

无论如何，苹果不会从他们已经审查过的应用商店中删除任何应用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T05:04:24.867

他们不会删除旧应用程序，但最好用新规则更新它应用程序。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T04:37:50.693

我不这么认为，如果 Apple 需要删除最近访问 UUID 的当前应用程序，那么在删除它们之前需要时间进行审查。

# javascript - javascript在wordpress文本小部件中不起作用

> ID：15673887
> 
> 赞同：0
> 
> 时间：2013-03-28T03:43:02.710
> 
> 标签：javascript, jquery, wordpress

我正在我的 workpress 博客上举办一场比赛，并在文本小部件区域放置了一些 javascript 代码。插入代码并刷新我的博客后，页面重新加载，只有 javascript 输出广告没有其他内容。我的博客没有出现。代码如下。我使用了几个据称允许在小部件中使用 javascript/php/jquery 的插件，但没有一个有效。FIY，我对javascript知之甚少，下面的代码是我在这个网站上找到的。

```
var myArray = [];
myArray[0] = "Benny & Lily";
myArray[1] = "Minnie and Mack";
myArray[2] = "Daisy";
myArray[3] = "Casey the Boxer";
myArray[4] = "GizmoGeodog";
myArray[5] = "Sam";
myArray[6] = "Max's Mom";
var len = myArray.length;
var chosen = [];
for(var i = 0; i <= 3; i++) {
    var randy = Math.floor(Math.random() * len);
    chosen[i] = myArray[randy];
    for(k = 0; k <= i - 1; k++) {
        if(chosen[k] == chosen[i]) {
            i--; // duplicate found so decrement i
        }
    }
}
document.write(chosen); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:56:36.180

经过大量测试后，我意识到我的主题导致了问题。我在本地服务器上添加了一个新的 wordpress 安装，并上传了我当前的主题以及其他一些主题（它们都来自 Elegent Themes）。问题只发生在我的主题上。感谢@metadept 和@djthoms 的帮助。

# c# - 更新按钮数组并导出

> ID：15673888
> 
> 赞同：0
> 
> 时间：2013-03-28T03:43:03.390
> 
> 标签：c#, winforms, export-to-excel

我正在创建一个生成按钮网格的小程序。然后我使用我创建的单独的导出类将此网格导出到 MS Excel。加载表单时会生成`numericUpDown`网格，当我按下 Gen 按钮时，网格会成功导出到 Excel。但是，当我修改网格的大小并减少行数并再次单击 Gen 按钮时，导出的数据未正确更新，下图解释了我的意思：

![在此处输入图像描述](../Images/994e1e7a09fd8771cce7de9e6f911315.png)

这是我在表单后面的代码：

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
        buttons = new Button[col][];
        states = new FormState[col][];
        for (Int32 c = 0; c < col; c++)
        {
            buttons[c] = new Button[col];
            states[c] = new FormState[col];
        }

    }

    private void loadMe()
    {
        panel1.Controls.Clear();
        placeRows();

    }
    private void Form1_Load(object sender, EventArgs e)
    {
        loadMe();

    }

     private void btnGen_Click(object sender, EventArgs e)
     {
         loadMe();

     }
} 
```

我知道我可能必须重置按钮阵列，但不太确定如何使其工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:52:54.920

您的`buttons`数组仅在应用程序启动期间创建一次，并且每个 Generate 仅覆盖单元格中的按钮，而旧按钮保持不变；所以 Export 类仍然使用你`buttons`迄今为止添加到数组中的所有内容。

在不重写代码的情况下修复它的最简单方法是将`buttons = new Button[col][];`部分从`Form1`ctor 移动到`loadMe`方法。

# c++ - 正确使用右值引用作为参数

> ID：15673889
> 
> 赞同：67
> 
> 时间：2013-03-28T03:43:08.530
> 
> 标签：c++, c++11, rvalue-reference

我们以下面的方法为例：

```
void Asset::Load( const std::string& path )
{
    // complicated method....
} 
```

这种方法的一般用途如下：

```
Asset exampleAsset;
exampleAsset.Load("image0.png"); 
```

既然我们知道大多数时候 Path 是一个临时的右值，那么添加这个方法的右值版本有意义吗？如果是这样，这是一个正确的实现吗？

```
void Asset::Load( const std::string& path )
{
    // complicated method....
}
void Asset::Load( std::string&& path )
{
     Load(path); // call the above method
} 
```

这是编写方法的右值版本的正确方法吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-28T04:55:40.787

对于您的特定情况，第二个重载是无用的。

使用只有一个重载 for 的原始代码，`Load`该函数被调用用于左值和右值。

使用新代码，第一个重载是为左值调用的，第二个是为右值调用的。但是，第二个重载调用第一个。最后，调用一个或另一个的效果意味着将执行相同的操作（无论第一个重载做什么）。

因此，原代码和新代码的效果是一样的，只是第一个代码更简单。

决定一个函数是否必须按值、左值引用或右值引用来接受参数，很大程度上取决于它的作用。当您想要移动传递的参数时，您应该提供一个采用右值引用的重载。那里有几个关于移动语义的很好的[参考资料](https://stackoverflow.com/questions/3106110/what-are-move-semantics)，所以我不会在这里介绍。

**奖金**：

为了帮助我表达我的观点，请考虑这个简单的`probe`类：

```
struct probe {
    probe(const char*  ) { std::cout << "ctr " << std::endl; }
    probe(const probe& ) { std::cout << "copy" << std::endl; }
    probe(probe&&      ) { std::cout << "move" << std::endl; }
}; 
```

现在考虑这个函数：

```
void f(const probe& p) {
    probe q(p);
    // use q;
} 
```

调用`f("foo");`会产生以下输出：

```
ctr
copy 
```

这里没有惊喜：我们创建了一个临时`probe`传递的`const char*` `"foo"`. 因此是第一条输出线。然后，这个临时文件被绑定到并在里面创建`p`一个副本。因此是第二条输出线。`q``p``f`

现在，考虑`p`按值取值，即`f`改为：

```
void f(probe p) {
    // use p;
} 
```

现在的输出`f("foo");`是

```
ctr 
```

在这种情况下，有些人会感到惊讶：没有副本！通常，如果您通过引用获取参数并将其复制到函数中，那么最好按值获取参数。`p`在这种情况下，编译器可以直接从输入（ ）构造参数（在这种情况下），而不是创建一个临时文件并复制它`"foo"`。有关更多信息，请参阅[想要速度？按值传递。](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)戴夫亚伯拉罕斯。

该指南有两个值得注意的例外：构造函数和赋值运算符。

考虑这个类：

```
struct foo {
    probe p;
    foo(const probe& q) : p(q) { }
}; 
```

构造函数接受一个`probe`by const 引用，然后将其复制到`p`. 在这种情况下，遵循上述指南不会带来任何性能改进，并且`probe`无论如何都会调用 ' 的复制构造函数。但是，`q`按值取值可能会产生一个重载解决问题，类似于我现在将介绍的带有赋值运算符的问题。

假设我们的类`probe`有一个非抛出`swap`方法。那么其赋值运算符的建议实现（暂时用 C++03 术语思考）是

```
probe& operator =(const probe& other) {
    probe tmp(other);
    swap(tmp);
    return *this;
} 
```

然后，按照上面的指导，最好这样写

```
probe& operator =(probe tmp) {
    swap(tmp);
    return *this;
} 
```

现在进入带有右值引用和移动语义的 C++11。您决定添加一个移动赋值运算符：

```
probe& operator =(probe&&); 
```

现在在临时上调用赋值运算符会产生歧义，因为两个重载都是可行的，并且没有一个优先于另一个。要解决此问题，请使用赋值运算符的原始实现（通过 const 引用获取参数）。

实际上，这个问题并不是构造函数和赋值运算符所特有的，任何函数都可能发生。（不过，您更有可能使用构造函数和赋值运算符来体验它。）例如，调用`g("foo");`when`g`具有以下两个重载会引起歧义：

```
void g(probe);
void g(probe&&); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T04:11:19.967

除非您正在做的不是调用 的左值引用版本`Load`，否则您不需要第二个函数，因为右值将绑定到 const 左值引用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-22T08:36:25.587

> 既然我们知道大多数时候 Path 是一个临时的右值，那么添加这个方法的右值版本有意义吗？

可能不会......除非你需要在内部做一些`Load()`需要非常量参数的棘手事情。例如，也许你想`std::move(Path)`进入另一个线程。在这种情况下，使用移动语义可能是有意义的。

> 这是编写方法的右值版本的正确方法吗？

不，你应该反过来做：

```
void Asset::load( const std::string& path )
{
     auto path_copy = path;
     load(std::move(path_copy)); // call the below method
}
void Asset::load( std::string&& path )
{
    // complicated method....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:29:01.980

这通常是一个问题，您是否会在内部复制（显式或隐式）传入对象（提供`T&&`参数），或者您将只使用它（坚持`[const] T&`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-19T04:02:39.397

如果您的`Load`成员函数没有从传入字符串分配，您应该简单地提供`void Asset::Load(const std::string& Path)`.

如果您确实从传入的分配`path`，例如分配给成员变量，那么在这种情况下，提供它可能会稍微更有效率`void Asset::Load(std::string&& Path)`，但您需要一个不同的实现来分配 ala `loaded_from_path_ = std::move(Path);`。

潜在的好处是给调用者，因为`&&`他们可能会收到成员变量拥有的自由存储区域，避免`delete[]`内部缓冲区的悲观离子`void Asset::Load(const std::string& Path)`以及下次分配调用者的字符串时可能的重新分配到（假设缓冲区也足够大以适应其下一个值）。

在您陈述的场景中，您通常传递字符串文字；这样的调用者不会从任何`&&`重载中受益，因为没有调用者拥有的`std::string`实例来接收现有数据成员的缓冲区。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-20T07:31:27.740

这是我在尝试决定函数签名时所做的事情

1.  `(const std::string& const_lvalue)`参数是只读的
2.  `(std::string& lvalue)`我可以修改参数（通常**在 中放一些东西**），所以更改对调用者来说是可见的
3.  `(std::string&& rvalue)`我可以修改参数（通常**从 中窃取一些东西**），零后果，因为调用者将不再看到/使用这个参数（考虑它在函数返回后自毁）

这三个都是“通过引用传递”，但它们表现出不同的意图。2+3 类似，它们都可以修改参数，但 2 希望调用者看到修改，而 3 则不会。

```
// (2) caller sees the change argument
void ModifyInPlace(Foo& lvalue){
  delete lvalue.data_pointer;
  lvalue.data_pointer = nullptr; 
}

// (3) move constructor, caller ignores the change to the argument
Foo(Foo&& rvalue)
{
  this->data_pointer = that.data_pointer;
  that.data_pointer = nullptr;
} 
```

# python - 如何逐行打印成对的元素？

> ID：15673893
> 
> 赞同：0
> 
> 时间：2013-03-28T03:43:50.037
> 
> 标签：python, python-3.x

```
guessesRemaining=12
Summary=[]

code=['1','2','3','4']

while guessesRemaining > 0:
report=[]
guess=validateInput()
guessesRemaining -= 1
if guess[0] == code[0]:
    report.append("X")
if guess[1] == code[1]:
    report.append("X")
if guess[2] == code[2]:
    report.append("X")
if guess[3] == code[3]:
    report.append("X")

tempCode=list(code)
tempGuess=list(guess)

if tempGuess[0] in tempCode:
    report.append("O")
if tempGuess[1] in tempCode:
    report.append("O")
if tempGuess[2] in tempCode:
    report.append("O")
if tempGuess[3] in tempCode:
    report.append("O")

ListCount=report.count("X")
if ListCount > 0:
    del report[-ListCount:]

report2=report[0:4]
dash=["-","-","-","-"]
report2=report+dash
report3=report2[0:4]
report4="".join(report3)
guess2="".join(guess)
Summary+=[guess2,report4]

print(Summary) 
```

validateInput() 调用了一个我没有在这里添加的函数。我试图弄清楚如何在 12 次猜测的过程中一次打印一行结果。通过三个猜测，我收到...

```
['4715', 'OO--', '8457', 'O---', '4658', 'O---'] 
```

当我想收到...

```
['4715', 'OO--'] 
['8457', 'O---']
['4658', 'O---'] 
```

我尝试以多种方式添加 \n ，但我不知道如何实现它。非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:28:58.380

> 我尝试以多种方式添加 \n ，但我不知道如何实现它。

如果您首先正确地构建数据，这将有很大帮助。

```
Summary+=[guess2,report4] 
```

这意味着“将 中的每个项目分别附加`[guess2,report4]`到`Summary`”。

看来您的意思是“将`[guess2,report4]`其视为要附加到的单个项目`Summary`”。为此，您需要使用`append`列表的方法：

```
Summary.append([guess2, report4]) 
```

现在我们有了一个配对列表，我们希望将每个配对显示在单独的行上，这样会容易得多：

```
for pair in Summary:
    print(pair) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:26:07.137

if`Summary`仅用于打印，不用于后续步骤，

```
Summary+=[guess2,report4,'\n']

for i in Summary:
  print i, 
```

另一种方法是使用[如何将列表拆分为大小均匀的块中的一种解决方案？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:45:27.493

我认为你需要类似的东西

```
In [1]: l = ['4715', 'OO--', '8457', 'O---', '4658', 'O---']

In [2]: l1 = l[::2] # makes a list ['4715', '8457', '4658']

In [3]: l2 = l[1::2] # makes ['OO--', 'O---', 'O---']

In [4]: for i in zip(l1, l2):
   ...:     print i
   ...:
('4715', 'OO--')
('8457', 'O---')
('4658', 'O---') 
```

# ajax - AngularJS 和 Google Ajax 爬虫

> ID：15673898
> 
> 赞同：2
> 
> 时间：2013-03-28T03:44:20.880
> 
> 标签：ajax, seo, angularjs

所以基本上我试图让 angularJs Routes 看起来像这样

```
 www.example.com/ajax.html#!product=1234 
```

而不是这样

```
www.example.com/ajax.html#/product/1234 
```

有希望吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T11:48:23.153

您只需要配置[`$location`服务](http://docs-angularjs-org-dev.appspot.com/guide/dev_guide.services.%24location)并调用：

```
$locationProvider.hashPrefix("!") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T09:07:56.830

如果您运行 ruby​​ 应用程序并希望遵守 google ajax 抓取方案 - 有一个 gem 可以为任何机架应用程序实现抓取方案......

```
gem install google_ajax_crawler 
```

关于如何使用它的文章在[http://thecodeabode.blogspot.com.au/2013/03/backbonejs-and-seo-google-ajax-crawling.html](http://thecodeabode.blogspot.com.au/2013/03/backbonejs-and-seo-google-ajax-crawling.html)，源代码在 [https://github.com/benkitzelman /google-ajax-crawler](https://github.com/benkitzelman/google-ajax-crawler)

# database - 项目中的链接表过多

> ID：15673902
> 
> 赞同：0
> 
> 时间：2013-03-28T03:44:54.317
> 
> 标签：database, database-design, h2

我正在为基于 Swing 的零售 ERP（销售点和会计）应用程序使用 H2 数据库。

我们的应用程序中有两个数据库，即 MainDB 和 CompanyDB。

主数据库存储所有用户信息和公司信息。每当用户创建公司时，这些数据将存储在 MainDB 的 company_table 中，随后将为每个公司创建 CompanyDB。

我们在 MainDB 和 CompanyDB 中有相同的主表（大约 60 个）。每当在应用程序中创建或编辑任何主数据库时，我都会插入和更新这两个数据库。

最近我开始了解 Linked Table，它在很多场合对我都非常有用。

我的问题是，如果我为 CompanyDB 中的所有主服务器创建链接表

1.  我可以只为 CompanyDB 中的所有主人提供链接表吗？

2.  我无法为所有事务和其他表引用外键，因为主表是链接表。没有外键关系是否可以接受？

3.  创建大约 60 个链接表，会降低性能吗？

目前，我对表现非常满意。

请提供建议并对此有所了解。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:56:48.110

1.  我可以只为 CompanyDB 中的所有主人提供链接表吗？是的，这是可能的，甚至认为不是很常见。这实际上取决于用例。

2.  没有外键关系是否可以接受？如果您在 MainDB 中的两个表之间定义外键关系，那么即使您在 CompanyDB 中进行更新，仍然会检查这一点。您不能跨数据库建立外键关系，但这是否可行取决于用例。例如，在 NoSQL 数据库中，您通常没有任何外键关系。

3.  创建大约 60 个链接表，会降低性能吗？链接表的数量不是问题。但请注意，每个链接表单独比常规表慢。这是否可以接受取决于用例。

# python - Python，制作二维列表

> ID：15673906
> 
> 赞同：-5
> 
> 时间：2013-03-28T03:45:47.983
> 
> 标签：python

需要一种基于变量构建二维列表的快速方法。这将是正确的输出

```
[[0,1,2], [3,4,5]] 
```

相反，我得到的输出是......

```
[[0, 1, 2], [0, 1, 2]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:52:36.097

根据您的示例，一些建议

```
>>> zip(*[iter(range(10))]*3)
[(0, 1, 2), (3, 4, 5), (6, 7, 8)]

>>> [range(n,n+3) for n in range(1,10,3)]
[[1, 2, 3], [4, 5, 6], [7, 8, 9]]

>>> it = iter(range(10))
>>> [list(islice(it,3)) for _ in range(3)]
[[0, 1, 2], [3, 4, 5], [6, 7, 8]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:55:47.447

使用列表推导来做到这一点。将第一个 i 替换为您要使用的任何填充字符。

```
 l = [[i for i in range(width)] for j in range(height)] 
```

# asp.net-mvc - 在 MVC 中访问 sharepoint 2007 mySite 链接

> ID：15673911
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:46:23.967
> 
> 标签：asp.net-mvc, sharepoint

我正在 MVC 中开发一个内部站点，以显示来自共享点 2007 站点的一些信息。

在共享点上，每个用户在顶部导航中都有一个 MySite 和 MyLinks。我需要访问 MyLinks 并将它们存储在 List<> 中以在我的应用程序中使用它们。我怎样才能做到这一点...

注意：我是 sharepoint 的新手，对此知之甚少。

任何能让我朝着正确方向前进的帮助都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:21:32.560

我对 MVC 没有任何想法，但这样的东西应该适合你

```
using Microsoft.Office.Server;
using Microsoft.Office.Server.UserProfiles;

UserProfileManager userProfileManager = new UserProfileManager(ServerContext.Current);
UserProfile currentUser = userProfileManager.GetUserProfile(true);
QuickLinkManager quickLinkManager = currentUser.QuickLinks;

foreach (QuickLink quickLink in quickLinkManager.GetItems())
{
    Console.WriteLine(quickLink.Url);
} 
```

不要忘记添加引用`Microsoft.Sharepoint`和添加命名空间`Microsoft.Sharepoint`和`Microsoft.Sharepoint.Administration`

**编辑**`Microsoft.Sharepoint`从以下路径 添加参考`C:\Program Files\Common files\Microsoft Shared\Web Server Extensions\12`。

# ios - 使用父坐标获取子视图控制器的框架

> ID：15673912
> 
> 赞同：0
> 
> 时间：2013-03-28T03:46:24.200
> 
> 标签：ios, uiview, uiviewcontroller, uitableview

我有一个视图控制器，它实例化一个子视图控制器，我将它的框架原点 x 从父视图的 viewdidload 设置为 50 并且工作正常，但是当子视图控制器 viewdidload 触发时，我想获取子视图的框架以参考父视图查看控制器的视图，但得到 0。我想是参考子视图控制器而不是父视图控制器获取框架，这是我想要得到的。

本质上，我正在尝试实现平移手势以在父级周围移动子级，这就是为什么我需要它的框架在父级的几何图形中。可能吗？

最终结果是 topview 控制器后面的表格视图，它是类似于 facebook 应用程序中的表格视图。

根

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboardAlpha" bundle:nil];
    self.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"Prime"];

    _layerPosition1 = _topViewController.view.frame.origin.x;
}
- (void)setTopViewController:(UIViewController *)topViewController
{
    CGRect topViewFrame = _topViewController ? _topViewController.view.frame : self.view.bounds;
    topViewFrame.origin.x += 50;
    [_topViewController.view removeFromSuperview];
    [_topViewController willMoveToParentViewController:nil];
    [_topViewController removeFromParentViewController];

    _topViewController = topViewController;

    [self addChildViewController:self.topViewController];
    [self.topViewController didMoveToParentViewController:self];

    [_topViewController.view setAutoresizingMask:self.autoResizeToFillScreen];
    [_topViewController.view setFrame:topViewFrame];
    _topViewController.view.layer.shadowOffset = CGSizeZero;
    _topViewController.view.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.view.layer.bounds].CGPath;

    [self.view addSubview:_topViewController.view];
}

- (NSUInteger)autoResizeToFillScreen
{
    return (UIViewAutoresizingFlexibleWidth |
            UIViewAutoresizingFlexibleHeight |
            UIViewAutoresizingFlexibleTopMargin |
            UIViewAutoresizingFlexibleBottomMargin |
            UIViewAutoresizingFlexibleLeftMargin |
            UIViewAutoresizingFlexibleRightMargin);
} 
```

孩子

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    SoulPrimeOmegaViewController *parent = (SoulPrimeOmegaViewController *)self.parentViewController;
    _layerPosition2 = parent.topViewController.view.frame.origin.x;
} 
```

# angularjs - 在 AngularJS 中，我可以将 ng-repeat $index 附加到 ng-model 指令的属性名称吗？

> ID：15673913
> 
> 赞同：6
> 
> 时间：2013-03-28T03:46:24.223
> 
> 标签：angularjs

无论如何将 ng-repeat $index 附加到 ng-model 指令的值？

```
<div class="row" ng-repeat="item in GiantList">
    <input type="text" value="" ng-model="saveData.MyProperty+[$index+1]">
</div> 
```

理想情况下，这意味着：

> $scope.saveData = [{ "MyProperty1" : "Bob" }, { "MyProperty2" : "Sam" }, { "MyProperty3" : "Chris" }]

我已经尝试了所有我能想到的语法组合，但都无济于事。

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T04:04:53.507

尝试

```
<input type="text" value="" ng-model="saveData['MyProperty'+($index+1)]"> 
```

演示：[小提琴](http://plnkr.co/edit/oIaKmp4I0IlBb4BNLHPZ?p=preview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T04:03:42.373

我不确定我是否理解你的问题，但试试这个：

[http://plnkr.co/edit/3qClmN](http://plnkr.co/edit/3qClmN)

```
saved[$index]['friend'+($index+1)] 
```

# c# - 选择只返回一个元素

> ID：15673914
> 
> 赞同：0
> 
> 时间：2013-03-28T03:46:24.627
> 
> 标签：c#, linq, linq-to-xml

也许我累了，但我不明白为什么这只会返回一个结果。Programs 下有三个 Program 元素，但我只得到 Excel 作为结果。我错过了什么，为什么？

XML:

```
<ServerRole>
  <ServerType>Windows</ServerType>
  <Programs>
    <Program>Excel</Program>
    <Program>Outlook</Program>
    <Program>Word</Program>
  </Programs>
</ServerRole> 
```

代码片段：

```
var proggies = xlServerRoles.Descendants("ServerRole")
    .Where(prg => prg.Element("ServerType").Value == "Windows");

foreach (var prog in proggies.Descendants("Programs").Select(p => new
{
    programName = p.Element("Program").Value
}))
{
    alInstalledPrograms.Add(prog.programName.ToString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:56:43.707

这是因为`Programs`您的 Xml 中只有一个，所以循环`foreach`只循环一次，以便更正：

```
 foreach (var prog in proggies.Descendants("Program").Select(p => new
        {
            programName = p.Value
        }))
        {
            alInstalledPrograms.Add(prog.programName.ToString());
        } 
```

您可以直接在循环中获取后代`Program`，而不是`Programs`. 对于缩短方法，您甚至不需要循环：

```
var alInstalledPrograms = xlServerRoles.Descendants("ServerRole")
            .Where(prg => prg.Element("ServerType").Value == "Windows")
            .Descendants("Program")
            .Select(p => p.Value)
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:55:01.370

你`Element("Program")`在你期望的地方使用*复数* `Elements`，但你的循环不会让你按原样到达那里。尝试更多类似的东西

```
var installedPrograms = (from serverRole in xlServerRoles.Descendants("ServerRole")
                         where serverRole.Element("ServerType").Value == "Windows"
                         from program in serverRole.Element("Programs").Elements("Program")
                         select program.Value).ToList(); 
```

# kendo-ui - KendoUI SPA - 是否可以在不包含在 div 中的情况下呈现布局？

> ID：15673916
> 
> 赞同：0
> 
> 时间：2013-03-28T03:46:37.800
> 
> 标签：kendo-ui

我正在使用 KendoUI-Web 创建一个 SPA，我的登录视图布局有一个粘性页眉和页脚。为此，构成视图的 div 必须是 body 的直接子级。我使用以下代码：

```
objLoginPage_Layout = new kendo.View('loginPage-layout');
objLoginPage_Layout.render($('body')); 
```

但是，当我查看 Chrome 开发人员工具时，我发现布局包含在一个 div 中。这个 div 破坏了我的 CSS。

如何告诉 KendoUI 不要将布局包装在 div 中？

问候，

斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:31:56.537

使用 KendoUI 窗口。

我正在和你做同样的事情。

这是他们的示例[http://demos.kendoui.c​​om/web/window/index.html](http://demos.kendoui.com/web/window/index.html)

* * *

如果您需要，我可以分享我的代码，这很简单，但请先尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T04:15:54.277

尝试：

```
var theView = new kendo.View(template, { wrap: false }); 
```

[http://docs.kendoui.c​​om/api/framework/view#methods-render](http://docs.kendoui.com/api/framework/view#methods-render)

# perl - 如何在perl中打印十进制变量

> ID：15673919
> 
> 赞同：0
> 
> 时间：2013-03-28T03:46:47.567
> 
> 标签：perl

下面是我的十进制变量：

```
my $variable = 1.0; 
```

当我尝试打印变量时，

```
print "$variable\n"; 
```

我得到了 1.0。

但是，如果我将其传递给函数：

```
&printvariable("$variable\n");

sub  printvariable()
{
    print "My variable is: @_";
} 
```

现在，它打印为，`My variable is: 1`

为什么这个十进制值在函数中被四舍五入？有没有办法打印函数中的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T03:57:42.677

你说的不是真的。

```
$ perl -e'my $variable=1.0; print "$variable\n";'
1 
```

`$variable=1.0;`,`$variable=1;`并且`$variable= 4-3;`都将数字*1*分配给`$variable`, 并且插值将*1*`1`字符串化为。它无法知道产生值 was `1.0`or的代码`4-3`，也不应该是重要的。

如果要显示小数点，请将三个字符的字符串分配`1.0`给`$variable`

```
$ perl -e'my $variable = "1.0"; print "$variable\n";'
1.0 
```

或将数字转换为该字符串。

```
$ perl -e'my $variable = 1.0; printf "%.1f\n", $variable;'
1.0 
```

# ios - UIView/ViewController 名称【图】

> ID：15673921
> 
> 赞同：1
> 
> 时间：2013-03-28T03:46:51.473
> 
> 标签：ios, uiview, uiviewcontroller

附图左上角的UIView/UIViewController叫什么名字？

还有一个更普遍的问题：iOS 开发人员在哪里可以找到所有可用 UIView 和 ViewController 的完整图解列表？

对不起，没有足够的声誉来附上图片，请点击链接：[带有iphone界面模型的图片](http://i.stack.imgur.com/MjiL9.png)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:49:26.513

这不是一个控制器，它是一个`UIActionSheet`. 此外，XCode 文档对于浏览 iOS 类非常有用。要访问它，请按 XCode 右上角的按钮，标记为“Organizer”。

更多`UIActionSheet`，你通过调用声明一个：

`initWithTitle:delegate:cancelButtonTitle:destructiveButtonTitle:otherButtonTitles:`

确保将您的控制器设置为委托并实现：

`actionSheet:clickedButtonAtIndex:`

指定单击按钮时应该发生的情况。

为了最初显示 Action Sheet，它有很多`showFrom...`方法来指定它在屏幕上的显示位置（至少对于 iPad）。

# javascript - javascript 闭包可以用来做什么？

> ID：15673925
> 
> 赞同：1
> 
> 时间：2013-03-28T03:47:53.223
> 
> 标签：javascript, closures

我一直在想——JavaScript 闭包可以用来做什么？

我知道如何编写它们，也知道它们是如何工作的，但我就是不知道如何使用它们。

```
function closure() {
  var name = "John";
  function displayName() {
    return 'Hello, ' + name;
  }
  return displayName;
} 
```

到目前为止，我只发现了它们的一种用途——封装数据，因此它在函数之外是不可见的。

但是它们还能用来做什么呢？我应该用闭包编写 OOP 吗？我是否需要将所有代码都放在一个闭包中，以免弄乱全局范围？

任何澄清都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:00:38.033

也可以用来保护你的代码在 colsure 内，防止闭包外不同库之间的命名冲突。例如，每当我创建一个 JQuery 插件时，我都会将它创建为一个自调用闭包，在其中我传入“JQuery”，但由于函数定义中命名的 $ 变量的本地范围，可以安全地引用闭包内的 $。即使有其他库将 $ 变量用于不同目的

```
(function($){ //use $ safely inside the closure })
(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:07:27.963

就个人而言，除了封装或创建私有上下文等显而易见的事情外，我喜欢单例 JavaScript 设计模式：

```
function Singleton() {
    // cached instance
    var instance = this;

    //proceed as normal - adding some variables
    this.variable1 = 1000;
    this.variable2 = 3000000;

    Singleton = function() {
        return instance;
    }
}

var singleton1 = new Singleton();
var singleton2 = new Singleton();

if(singleton1 === singleton2) {
    console.log("Singleton works :)");
}
else {
    console.log("Singleton doesn't work :/");
} 
```

您可以将此代码直接粘贴到 Chrome JavaScript 控制台中。

当然，您可以根据自己的需要对其进行调整。还有一些缺点 - 您可以覆盖 Singleton 函数，并且您将无法再访问实例。但这是另一个问题。

我很久以前在 Stoyan Stefanov (O'Reilly) 的 JavaScript 模式一书中找到了它。检查一下，因为还有其他有用的设计模式和闭包应用程序示例。根据这本书：

```
You can use closure to store some private data, which is accessible by the returned function but not to the outside code. 
```

# vim - Vim - 选择括号之间的文本，多行

> ID：15673927
> 
> 赞同：2
> 
> 时间：2013-03-28T03:48:19.793
> 
> 标签：vim, selection

```
value(val_1)
value(val_100)
value(val_10) 
```

我想选择括号之间的文本并为多行执行此操作，我可以使用一行，`f``(``v``a``(`但我不知道如何选择剩余的 2 行。

**编辑（解决方案）**

我想要的是用每行唯一的文本更改括号内的文本，首先，我想选择文本，删除它然后手动更改文本，@rosipov 告诉有一个插件来做选择部分，这很棒，但@romainl 给了我另一个方向，也有效。

`f(ci(foo<Esc>jci(bar<Esc>jci(baz<Esc>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:21:27.853

你想选择这个：

```
value([val_1])
value([val_100])
value([val_10]) 
```

或选择：

```
value([val_1)]
[value(val_100)]
[value(val_10]) 
```

不幸的是，第一个是不可行的。但根据您要对所选文本执行的操作，例如更改它，一个合理的近似值将是：

```
f(l<C-v>jj$cnew value)<Esc> 
```

但是我确信很多 Vimmer 可能会通过替换来解决这个问题：

```
:,+2s/(.*/(new value) 
```

第二个简单地完成：

```
f(lv3/)h 
```

或者

```
f(ljjt) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:13:53.803

在这种情况下，您可能会对 EasyMotion 插件感兴趣：[https ://github.com/Lokaltog/vim-easymotion](https://github.com/Lokaltog/vim-easymotion)

使用插件它将是：`f``(``v``Leader``Leader``f``)``c`

或者：`Leader``Leader``f``(``a``v``Leader``Leader``f``)``c`

`c`代表第三个右括号的字母在哪里，`a`代表第一个开头 p。

**编辑：**没有插件可以通过行号来完成。

假设您使用第 1-3 行：`f``(``v``3``G``f``)`

where`3``G`代表“转到第 3 行”，适用于视觉和正常模式。

# c++ - NSTask 的碳当量？

> ID：15673928
> 
> 赞同：1
> 
> 时间：2013-03-28T03:48:25.587
> 
> 标签：c++, macos, shell, boost, macos-carbon

OS X 10.6.8、Carbon、C++ 应用程序。

我想从 shell 运行命令并将结果作为字符串返回，然后用作另一个函数的参数。

`df / | tail -n +2 | awk '{ print $1 }'`

但是我没有看到与 Carbon、C++ 等效的 NSTask，据我所知，我需要使用 Objective-C 来使用 NSTask

我也没有看到 Boost 有什么可提供的。

谁能指出我正确的方向？

编辑：所以试图记住我的 UNIX 日子，`popen`在读取模式下使用并从文件指针中获取我想要的结果怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:44:04.107

当然你也可以这样写：

```
int myPipe[2];
int err = pipe(&myPipe); // write to myPipe[1] in child, read from myPipe[0] in parent

int child_pid = fork();
if(child_pid == 0)
{
    err = dup2(myPipe[1], 1); // redirect standard output to the input of the pipe
    execl("/path/to/program", "arg1", "arg2");
}

int pipefd = myPipe[0];
char buffer[255];
err = read(pipefd, buffer, 255); 
```

不要忘记添加一些检查并等待子进程。

但是，如果您可以使用 Cocoa，但不知道如何加入 C++ 和 Objective-C 代码 - 只需使用 Objective-C++ 将代码放置到扩展名为 .mm 的文件中。

# iphone - 在不设置 drawInRect 的情况下捕获叠加图像

> ID：15673929
> 
> 赞同：0
> 
> 时间：2013-03-28T03:48:26.880
> 
> 标签：iphone, uiimage, screen-capture, camera-overlay

我需要在不设置 drawInRect 的情况下拍摄叠加图像。当我设置 drawInRect 它给出设置大小的输出。我需要在不使用以下代码的情况下以新尺寸拍照。

```
 - (void)captureStillImageWithOverlay:(UIImage*)overlay
{
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in [[self stillImageOutput] connections]) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual:AVMediaTypeVideo]) {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) {
            break;
        }
    }

    NSLog(@"about to request a capture from: %@", [self stillImageOutput]);

    [[self stillImageOutput] captureStillImageAsynchronouslyFromConnection:videoConnection
                                                         completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) {
                                                             CFDictionaryRef exifAttachments = CMGetAttachment(imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
                                                             if (exifAttachments) {
                                                                 NSLog(@"attachements: %@", exifAttachments);
                                                             } else {
                                                                 NSLog(@"no attachments");
                                                             }

                                                             NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
                                                             UIImage *image = [[UIImage alloc] initWithData:imageData];

                                                            CGSize imageSize = [image size];

                                                             CGSize overlaySize = [overlay size];

                                                             UIGraphicsBeginImageContext(imageSize);

                                                             [image drawInRect:CGRectMake(0, 0, imageSize.width, imageSize.height)];

                                                             CGFloat xScaleFactor = imageSize.width / 320;
                                                             CGFloat yScaleFactor = imageSize.height / 480;

                                                               [overlay drawInRect:CGRectMake(30 * xScaleFactor, 100 * yScaleFactor, overlaySize.width * xScaleFactor, overlaySize.height * yScaleFactor)]; // rect used in AROverlayViewController was (30,100,260,200)

                                                            // [overlay drawInRect:CGRectMake(30 * xScaleFactor, 100 * yScaleFactor, overlaySize.width * xScaleFactor, overlaySize.width* yScaleFactor)];

                                                             UIImage *combinedImage = UIGraphicsGetImageFromCurrentImageContext();

                                                             UIGraphicsEndImageContext();
                                                            // NSData * data = UIImagePNGRepresentation(image);
                                                            // [data writeToFile:@"foo.png" atomically:YES];

                                                              [self setStillImage:combinedImage];
                                                             [image release];
                                                             [[NSNotificationCenter defaultCenter] postNotificationName:kImageCapturedSuccessfully object:nil];

                                                         }];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:32:08.783

试试这个代码：

```
 UIGraphicsBeginImageContext(self.view.bounds.size);
// retrieve the current graphics context
    CGContextRef context = UIGraphicsGetCurrentContext();
// render view into context
    [self.view.layer renderInContext:context];
// create image from context
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    image=[self cropImage:image];
    UIGraphicsEndImageContext();

    - (UIImage *)cropImage:(UIImage *)oldImage 
    {
            CGSize imageSize = oldImage.size;
            UIGraphicsBeginImageContextWithOptions(CGSizeMake( imageSize.width,imageSize.height - 150),NO,0.);
            [oldImage drawAtPoint:CGPointMake( 0, -80) blendMode:kCGBlendModeCopy alpha:1.];
            UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();
            return croppedImage;
    } 
```

# python - 如何在python中使用正则表达式从文件中提取数据？

> ID：15673930
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:48:30.783
> 
> 标签：python, regex

我有一个文件，在那个emailid，电话号码和我的出生日期在那里。在python中使用正则表达式，如何一一找到3个字段？所需的输出看起来像

```
Emailid: x@gmail.com
Phoneno: 1234567890
dateofbirth: xx-xx-xx 
```

我知道如何单独查找字段。但我不知道如何一次找到 3 个。下面的代码段显示了如何从文件中找到电子邮件 ID。此代码输出看起来像

```
Emaildid: x@gmail.com 
```

# …………………………………………………………………………………………………………………………

```
import sys,re

pattern=r'''(?P<emailid>[a-zA-Z\.]*\@[a-zA-Z]*\.c[a-zA-Z]*)'''

regobj = re.compile(pattern, re.VERBOSE)

for line in sys.stdin:
  results= regobj.finditer(line)
for result in results:
  sys.stdout.write("%s\n"%result.group('emailid')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:02:00.090

您可以使用以下方法遍历字符串中 RE 模式的所有非重叠匹配`finditer`：

```
import sys,re

pattern = re.compile(r'''(?P<emailid>[a-zA-Z.]*@[a-zA-Z]*\.c[a-zA-Z]*).*?(?P<phone>\(?[0-9]{3}\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}).*?(?P<dob>[0-9]{2}-[0-9]{2}-[0-9]{2})''', re.DOTALL)

for result in pattern.finditer(sys.stdin.read()):
    sys.stdout.write("Emailid: %s\n"%result.group('emailid'))
    sys.stdout.write("Phoneno: %s\n"%result.group('phone'))
    sys.stdout.write("dateofbirth: %s\n"%result.group('dob')) 
```

# ios - CFStringTokenizer 不标记小写句子

> ID：15673931
> 
> 赞同：2
> 
> 时间：2013-03-28T03:48:36.557
> 
> 标签：ios, objective-c

我正在尝试使用 CFStringTokenizer 和 kCFStringTokenizerUnitSentence 将字符串拆分为句子。我遇到的第一个问题是句子需要大写才能被识别为句子。如果不是，它只是认为它是前一句的一部分。

我正在拆分用户输入的文本，所以我希望文本非常不干净。

我还能用 CFStringTokenizer 做些什么来检测未大写的句子吗？还是我必须使用另一种拆分方法？

我按照这个 SO 问题的答案进行了实施： [如何使用 CFStringTokenizer 获取句子数组？](https://stackoverflow.com/questions/6877659/how-to-get-an-array-of-sentences-using-cfstringtokenizer)

* * *

注意：经过更多测试后，似乎使用 kCFStringTokenizerUnitSentence，如果是“！” 或“？” 后跟一个不大写的句子，它会识别该句子。此外，如果这些标点符号之一后面是一个在“！”之间没有空格的句子 和第一个字，还是会分开。

所以我需要解决的一个情况是'。后跟一个不大写的句子。

* * *

我发现的另一个选项，如果您从 textField 获取文本，则使用此：

```
textField.autocapitalizationType = UITextAutocapitalizationTypeSentences; 
```

它会自动将句子大写，因此您不必担心转换为 CFStringTokenizer。它仍然没有考虑缩写等边缘情况，但至少在我的情况下，如果自动大写错误，用户可以选择删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:22:43.970

您可以先将输入字符串转换为全部大写，然后运行它`CFStringTokenizer`并使用范围来获取原始输入字符串的子字符串。但是在这里你必须小心，因为某些字符在转换为大写后可能会超过 1 个字符。

# javascript - 未捕获的类型错误：无法调用未定义的方法“推送”

> ID：15673932
> 
> 赞同：4
> 
> 时间：2013-03-28T03:48:38.733
> 
> 标签：javascript, google-chrome, google-maps-api-3, syntax-error

我已经被这个错误困扰了好几天了，任何善良的灵魂可以破译这个错误吗？警报显示了所需的正确数据，但不知何故 push() 方法不起作用..提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T05:49:59.957

这并不容易分辨，但根据评论，您调用`push`方法的对象可能是`undefined`. 这`object`应该是一个`array`.

替换这一行：

```
layer[result['layerId']].push(result); 
```

使用以下代码：

```
if("undefined" != typeof layer[result['layerId']]) {
    layer[result['layerId']].push(result);
}
else {
    layer[result['layerId']] = new Array();
    layer[result['layerId']].push(result);
} 
```

让我知道它是否有效。

# php - mysql：如何从数据库中最新的 3 个月获取数据？

> ID：15673934
> 
> 赞同：1
> 
> 时间：2013-03-28T03:49:05.810
> 
> 标签：php, mysql, sql, select

我被困在 mysql 中使用命令查询最近 3 个月的行。这是示例：

这是分贝：

```
row 1 : 2012/02/10 - id : 1
row 2 : 2012/03/15 - id : 2
row 3 : 2012/05/04 - id : 3
row 4 : 2012/06/04 - id : 4 
```

今天是 ：`2013/03/28`

我如何编写命令从数据库中最新的 3 个月获取数据行：真正的结果将是：第 2 3 4 行

更新 - - -

```
Table name = sa_cms_post | col date : createdAt datetime - 0000-00-00 00:00:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:56:32.913

试试这个，

```
SELECT  *
FROM    sa_cms_post
WHERE   MONTH(createdAt) BETWEEN
                         MONTH(CURDATE()) AND MONTH(CURDATE() + INTERVAL 3 MONTH) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:15:17.567

如果我理解正确，*最新的 3 个月*实际上是指从表中获取*3 个尾随月份*的行，而当前日期对你来说并不重要。在这种情况下，这有效（[SQLFiddle 演示](http://sqlfiddle.com/#!2/74df3/4)）：

```
SELECT *
FROM sa_cms_post
WHERE createdAt > date_sub(
    (SELECT max(createdAt) FROM sa_cms_post),
    INTERVAL 3 month
) 
```

# objective-c - 适用于 iOS 5 的 Facebook SDK 3.2 与 FBWebDialogs 错误

> ID：15673937
> 
> 赞同：0
> 
> 时间：2013-03-28T03:49:39.743
> 
> 标签：objective-c, ios5, facebook-ios-sdk

我正在使用 Facebook iOS SDK 3.2，并且在传入 activeSession 时调用 FBWebDialog presentRequestsDialogModallyWithSession:message:title:parameters:handler 时出现以下错误。

" ***由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'-[__NSCFDictionary objectForKeyedSubscript:]: 无法识别的选择器发送到实例"

这是我的代码：

```
[FBWebDialogs presentRequestsDialogModallyWithSession:[FBSession activeSession]
  message:msg title:nil parameters:nil
  handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
    ...
  }]; 
```

看起来 NSDictionary objectForKeyedSubscript 仅在 iOS6 或更高版本中可用，但我需要为这个项目定位 iOS 5.0。

无论如何我可以让 FacebookSDK 3.2 使用 iOS5 向 Facebook 发布请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:24:02.207

尝试 SDK 3.5。[https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.5/](https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.5/) 根据该页面“最新的 SDK 支持 iOS 5.0 及更高版本”。

# function - 如何让这个 Scala 倒计时功能工作？

> ID：15673939
> 
> 赞同：1
> 
> 时间：2013-03-28T03:50:00.343
> 
> 标签：function, scala, recursion, println

基本上我想要这段代码做的是定义一个函数，timeCount，每次调用它时，我希望从 21 中减去 1，打印出结果，并让结果等于 timeNum。所以，我想从 21 中减去 1，得到 20，打印出 20，然后使 timeNum 等于 20。然后下次调用该函数时，它将等于 19、18 等，等等，.. .

但是，此代码不起作用。我怎样才能得到我想要发生的事情？

```
def timeCount() = {
  var timeNum = 21
  var timeLeft = timeNum-1
  println(timeLeft)
  var timeNum = timeLeft
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:05:55.993

```
class TimeCount(initial: Int) extends Function0[Int] {
  var count = initial

 def apply = {
    count = count - 1
    count
 }
} 
```

像这样使用它：

```
scala> val f = new TimeCount(21)
f: TimeCount = <function0>

scala> f()
res0: Int = 20

scala> f()
res1: Int = 19

scala> f()
res2: Int = 18 
```

我根据您的要求进行了两项更改，我将数字从函数的构造函数的参数开始，我返回了计数而不是打印它，因为这些看起来更有用如果您真的只想打印它, 更改`Function0[Int]`为`Function0[Unit]`和更改`count`为`println(count.toString)`

当然，这不是线程安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:59:22.067

正如下面的编译器错误所述，您定义了`var`两次相同的内容。

```
console>:11: error: timeNum is already defined as variable timeNum
         var timeNum = timeLeft
             ^ 
```

请记住，可以修改 a 的值`var`，但不能再次定义它。

`timeNum` `var`此外，您在函数调用中声明并初始化。结果是，一旦编译完成，您将重复打印相同的值 (20)。

另外，`timeLeft` `var`是多余的。

# java - URLStreamHandler 是一个受限类

> ID：15673942
> 
> 赞同：1
> 
> 时间：2013-03-28T03:50:15.923
> 
> 标签：java, google-app-engine, http, servlets

我收到此错误：

```
java.lang.NoClassDefFoundError: java.net.URLStreamHandler is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at com.gargoylesoftware.htmlunit.protocol.javascript.Handler.<init>(Handler.java:50)
    at com.gargoylesoftware.htmlunit.WebClient.<clinit>(WebClient.java:144) 
```

运行我的 GAE 应用程序时，错误在此代码块内：

```
 // Setup the headless browser
    webClient = new WebClient();
    webClient.setWebConnection(new UrlFetchWebConnection(webClient)); 
```

我的应用程序配置为：

```
<dependency>
    <groupId>net.sourceforge.htmlunit</groupId>
    <artifactId>htmlunit</artifactId>
    <version>2.13-SNAPSHOT</version>
</dependency> 
```

我相信`HTMLUnit`有一个补丁可以让它在 GAE 环境中工作，我会遗漏什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:16:27.970

看起来我忘了做'mvn clean'，因为我使用了早期版本的 HtmlUnit，工件仍然在那里。

现在它起作用了！

# ruby-on-rails - Rails 关联：创建特定于客户的订单

> ID：15673943
> 
> 赞同：1
> 
> 时间：2013-03-28T03:50:21.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我已经阅读了很多与此相关的帖子，但它仍然没有为我点击。我有一个示例，我试图使其尽可能简单，以便我可以理解如何进行外键分配。

## 假设我们有 2 个模型...

***用户.rb***

```
Class User < ActiveRecord::Base
   has_many :microposts
end 
```

***微博.rb***

```
Class Micropost < ActiveRecord::Base
   belongs_to :user
end 
```

我在 microposts_controller 的另一篇文章中找到了一些代码...

```
def create
   @micropost = current_user.microposts.build(params[:micropost])
   if @micropost.save
     ...
   else
     ...
   end
end 
```

### 问题

*   'current_user' 是 rails 方法吗？
*   如果模型被称为客户，'current_customer' 会起作用吗？
*   应用程序如何知道哪个用户正在创建微博？（这可能是一个愚蠢的方式来表达这个问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:07:51.360

**答案**

1.  No`current_user`不是 Rails 方法。它由一些身份验证框架提供，并且大多数应用程序都实现了一个`current_user`帮助方法，该方法返回通常在会话或实例变量上设置的当前用户。

2.  不，因为该方法不是由模型定义的。`current_customer`行不通。有一些方法可以使用动态方法来给定具有另一个名称的模型，例如`Customer`您可以编写一个 method_missing 来提供所需的输出，但这对于将要使用的内容可能需要做更多的工作。

3.  回到问题 1。该方法`current_user`将返回一个实例，`User`该实例是当前登录的用户，那么结果将类似于`@current_user.microposts.build`

current_user 的代码通常看起来像

```
def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

这几乎是说找到一个`remember_token`以前存储在 cookie 中的用户，或者使用`@current_user`已经设置的 if。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:54:00.297

`current_user`通常由像 Devise 这样的身份验证框架提供。它可以通过查看登录时创建的会话来确定该用户。是的，如果至少使用 Devise 创建了一个名为 Customer 的模型，那么 current_customer 将在“客户”登录后工作。

# vb.net - Visual Basic - 随机数

> ID：15673945
> 
> 赞同：2
> 
> 时间：2013-03-28T03:50:45.663
> 
> 标签：vb.net

我有一些 VB 代码给我一个随机数，1 介于 20 (X) 之间。但是，在 20 次尝试中，我会得到两次相同的数字。我怎样才能得到一个随机数序列而不重复它们？如果我单击一个按钮 20 次，我基本上希望 1-20 以随机顺序显示。

```
 Randomize()
    ' Gen random value

    value = CInt(Int((X.Count * Rnd())))

    If value = OldValue Then
        Do While value = OldValue
            value = CInt(Int((X.Count * Rnd())))    
        Loop
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:14:10.520

For 1 to 20, use a data structure like a LinkedList which holds numbers 1 to 20\. Choose an *index* from 1 to 20 at random, take the number at that index, then pop out the number in that location of the LinkedList. Each successive iteration will choose an index from 1 to 19, pop, then 1 to 18, pop, etc. until you are left with index 1 to 1 and the last item is the last random number. Sorry for no code but you should get it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:48:05.420

概念是，您必须将`add`其添加`generated random number`到 a`list`中，并且在将其添加到 之前`list`，请确保a`new number`不在`contains`其中。试试这个代码，

```
 Dim xGenerator As System.Random = New System.Random()
        Dim xTemp As Integer = 0
        Dim xRndNo As New List(Of Integer)

        While Not xRndNo.Count = 20

            xTemp = xGenerator.Next(1, 21)

            If xRndNo.Contains(xTemp) Then
                Continue While
            Else
                xRndNo.Add(xTemp)
            End If

        End While 
```

[**注：**测试与`IDE`]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:01:35.513

为此，您需要存储所有先前生成的数字，而不仅仅是一个，就像您在 OldValue 命名变量中所做的那样。因此，将所有先前生成的数字存储在某处（列表）。并将新生成的数字与列表中的所有数字进行比较，在你的while循环中，并继续生成数字，而数字不等于列表中的任何一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T15:12:12.327

将数字添加到列表中，然后以随机顺序选择它们，在选择它们时删除它们。

```
Dim prng As New Random
Dim randno As New List(Of Integer)

Private Sub Button1_Click(sender As Object, _
                          e As EventArgs) Handles Button1.Click
    If randno.Count = 0 Then
        Debug.WriteLine("new")
        randno = Enumerable.Range(1, 20).ToList 'add 1 to 20 to list
    End If
    Dim idx As Integer = prng.Next(0, randno.Count) 'pick a number
    Debug.WriteLine(randno(idx)) 'show it
    randno.RemoveAt(idx) 'remove it
End Sub 
```

# wireless - 在显示的四个站点中，站点 C、D 中的哪个站点应该更靠近 A，为什么？

> ID：15673955
> 
> 赞同：0
> 
> 时间：2013-03-28T03:51:29.287
> 
> 标签：wireless, wifi

下图显示了用于无线 LAN 的 802.11 MAC 子层协议的操作示例。在显示的四个站点中，站点 C、D 中的哪个站点应该更靠近 A，为什么？

[http://www.4shared.com/download/Z5pAEx_d/pics.jpg?tsid=20130328-034821-6bef16d4](http://www.4shared.com/download/Z5pAEx_d/pics.jpg?tsid=20130328-034821-6bef16d4)

我的回答：我认为D站需要更靠近A，因为D站的NAV发生在CTS之后。这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:57:30.830

D不在A的传输范围内，这就是为什么它的NAV没有被A的RTS更新。C在A的传输范围内，这就是为什么它的NAV会被A的RTS更新。

因此，简单地说，C 比 D 更接近 A。

此外，D 在 B 的传输范围内（D 的 NAV 由 B 的 CTS 更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:21:31.740

我会说C更接近。假设图片中的 NAV 与相关站的 NAV 设置有关，可以看出 C 站的 NAV 在 RTS 传输时设置 (A -> B)，而 D 站仅在 CTS (B -> A ） 传播。这意味着 D 没有收到 RTS，因为它离 A 太远了。它确实收到了 CTS，因为它离 B 足够近，可以听到它的传输。

# r - 在使用包预测时取消记录时间序列

> ID：15673962
> 
> 赞同：4
> 
> 时间：2013-03-28T03:52:01.760
> 
> 标签：r, time-series

您好，我使用包预测来进行时间序列预测。**我想知道如何**在最终预测图上取消记录系列。使用预测包，我不知道如何取消记录我的系列。这是一个例子：

```
library(forecast)
data <- AirPassengers
data <- log(data) #with this AirPassengers data not nessesary to LOG but with my private data it is...because of some high picks...
ARIMA <- arima(data, order = c(1, 0, 1), list(order = c(12,0, 12), period = 1)) #Just a fake ARIMA in this case... 
plot(forecast(ARIMA, h=24)) #but my question is how to get a forecast plot according to the none log AirPassenger data 
```

![在此处输入图像描述](../Images/160f0c494ca0bee6696275ebde57d8bf.png)

*所以图像被记录下来。我想拥有相同的 ARIMA 模型，但没有记录数据。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T00:11:03.210

没有必要使用@ndoogan 提出的 hack。`forecast.Arima`具有用于撤消转换的内置工具。以下代码将执行所需的操作：

```
fc <- forecast(ARIMA, h=24, lambda=0) 
```

更好的是，将转换构建到模型本身中：

```
ARIMA <- Arima(data, order=c(1,0,1), list(order=c(1,0,1),period=12)), lambda=0)
fc <- forecast(ARIMA, h=24) 
```

请注意，您需要使用包中的`Arima`函数`forecast`来执行此操作，而不是包中的`arima`函数`stats`。

@Hemmo 是正确的，这种反变换不会给出预测分布的平均值，因此不是最优的 MSE 预测。但是，它将给出预测分布的中位数，因此将给出最优 MAE 预测。

最后，@Swiss12000 使用的假模型没有什么意义，因为季节性部分的频率为 1，因此与非季节性部分混淆。我想你可能是指我在上面的代码中使用的模型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T13:47:42.960

@ndoogan 的答案的问题是对数不是线性变换。这意味着 E[exp(y)] != exp(E[y])。[Jensen 不等式](http://en.wikipedia.org/wiki/Jensen%27s_inequality)实际上给出了 E[exp(y)] >= exp(E[y])。这是一个简单的演示：

```
set.seed(1)
x<-rnorm(1000)
mean(exp(x))
[1] 1.685356
exp(mean(x))
[1] 0.9884194 
```

这是一个关于预测的案例：

```
# Simulate AR(1) process
set.seed(1)
y<-10+arima.sim(model=list(ar=0.9),n=100)

# Fit on logarithmic scale
fit<-arima(log(y),c(1,0,0))

#Simulate one step ahead
set.seed(123)
y_101_log <- fit$coef[2]*(1-fit$coef[1]) + 
             fit$coef[1]*log(y[100]) + rnorm(n=1000,sd=sqrt(fit$sigma2))

y_101<-exp(y_101_log) #transform to natural scale

exp(mean(y_101_log)) # This is exp(E(log(y_101)))
[1] 5.86717          # Same as exp(predict(fit,n.ahead=1)$pred) 
                     # differs bit because simulation

mean(y_101)          # This is E(exp(log(y_101)))=E(y_101)
[1] 5.904633

# 95% Prediction intervals:

#Naive way:
pred<-predict(fit,n.ahead=1)
c(exp(pred$pred-1.96*pred$se),exp(pred$pred+1.96*pred$se))
pred$pred pred$pred 
 4.762880  7.268523 

# Correct ones:
quantile(y_101,probs=c(0.025,0.975))
    2.5%    97.5% 
4.772363 7.329826 
```

这也为您的问题提供了一般意义上的解决方案：

1.  适合您的模型
2.  模拟来自该模型的多个样本（例如，如上所述的提前一步预测）
3.  对于每个模拟样本，进行逆变换以获得原始比例的值
4.  从这些模拟样本中，您可以将期望值计算为普通平均值，或者如果您需要置信区间，则可以计算经验分位数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T04:46:52.923

这有点像黑客，但它似乎可以做你想做的事。根据您的拟合模型`ARIMA`：

```
fc<-forecast(ARIMA,h=24)
fc$mean<-exp(fc$mean)
fc$upper<-exp(fc$upper)
fc$lower<-exp(fc$lower)
fc$x<-exp(fc$x) 
```

现在绘制它

```
plot(fc) 
```

![在此处输入图像描述](../Images/28123ab10e336d06af0961155d6b2b13.png)

# java - 发布 HTTP 数据无法在 Android 和 HTTP 服务器之间发布

> ID：15673963
> 
> 赞同：0
> 
> 时间：2013-03-28T03:52:04.340
> 
> 标签：java, android, http, post, http-post

我已经构建了一个应用程序，它将数据发送到一个 HTTP 服务器，我已经使用 test.php 文件验证该服务器正在工作，然后验证数据在 Android 应用程序和服务器之间成功传递。无论如何，我修改了源代码以发送不同的数据字符串：

```
http://gamedemo.hostzi.com/apply.cgi?submit_button=Wireless_MAC&change_action=&action=Apply&wl_macmode=allow&wl_maclist=32&wait_time=3&wl_mac_filter=1&start=&wl_macmode1=allow&m0=00%3A1E%3A33%3AFE%3A0D%3A38&m16=00%3A00%3A00%3A00%3A00%3A00&m1=00%3A00%3A00%3A00%3A00%3A00&m17=00%3A00%3A00%3A00%3A00%3A00&m2=00%3A00%3A00%3A00%3A00%3A00&m18=00%3A00%3A00%3A00%3A00%3A00&m3=00%3A00%3A00%3A00%3A00%3A00&m19=00%3A00%3A00%3A00%3A00%3A00&m4=00%3A00%3A00%3A00%3A00%3A00&m20=00%3A00%3A00%3A00%3A00%3A00&m5=00%3A00%3A00%3A00%3A00%3A00&m21=00%3A00%3A00%3A00%3A00%3A00&m6=00%3A00%3A00%3A00%3A00%3A00&m22=00%3A00%3A00%3A00%3A00%3A00&m7=00%3A00%3A00%3A00%3A00%3A00&m23=00%3A00%3A00%3A00%3A00%3A00&m8=00%3A00%3A00%3A00%3A00%3A00&m24=00%3A00%3A00%3A00%3A00%3A00&m9=00%3A00%3A00%3A00%3A00%3A00&m25=00%3A00%3A00%3A00%3A00%3A00&m10=00%3A00%3A00%3A00%3A00%3A00&m26=00%3A00%3A00%3A00%3A00%3A00&m11=00%3A00%3A00%3A00%3A00%3A00&m27=00%3A00%3A00%3A00%3A00%3A00&m12=00%3A00%3A00%3A00%3A00%3A00&m28=00%3A00%3A00%3A00%3A00%3A00&m13=00%3A00%3A00%3A00%3A00%3A00&m29=00%3A00%3A00%3A00%3A00%3A00&m14=00%3A00%3A00%3A00%3A00%3A00&m30=00%3A00%3A00%3A00%3A00%3A00&m15=00%3A00%3A00%3A00%3A00%3A00&m31=00%3A00%3A00%3A00%3A00%3A00&end= 
```

它没有传递数据！任何想法为什么？

ps

我使用了一个教程 - 但是当我编辑源以发送特定的数据字符串时 - 而不是在文本字段中输入的文本（我不再需要使用），我似乎已经屠杀了源代码。

教程：

[http://mobiledevtuts.com/android/android-http-with-asynctask-example/](http://mobiledevtuts.com/android/android-http-with-asynctask-example/)

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.ProgressBar;
import android.widget.TimePicker;
import android.widget.Toast;

import java.io.IOException;
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.opengl.Visibility;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

import com.nfc.linkingmanager.DeviceConfig.MyAsyncTask;

    public class AddEditCountry extends Activity {

         private long rowID; 
         private EditText nameEt;
         private EditText capEt;
         private EditText codeEt;
         private TimePicker timeEt;

         public class DeviceConfig extends Activity implements OnClickListener{

                private EditText value;
                private Button btn;
                private ProgressBar pb;
                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.deviceconfig);
                    value=(EditText)findViewById(R.id.editText1);
                    btn=(Button)findViewById(R.id.button1);
                    pb=(ProgressBar)findViewById(R.id.progressBar1);
                    pb.setVisibility(View.GONE);
                    btn.setOnClickListener(this);
                }

                @Override
                public boolean onCreateOptionsMenu(Menu menu) {
                    getMenuInflater().inflate(R.menu.main, menu);
                    return true;
                }

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                        if(value.getText().toString().length()<1){

                            // out of range
                            Toast.makeText(this, "please enter something", Toast.LENGTH_LONG).show();
                        }else{
                            pb.setVisibility(View.VISIBLE);
                            new MyAsyncTask().execute(value.getText().toString());      
                        }

                } 

                private class MyAsyncTask extends AsyncTask<String, Integer, Double>{

                    @Override
                    protected Double doInBackground(String... params) {
                        // TODO Auto-generated method stub
                        postData(params[0]);
                        return null;
                    }

                    protected void onPostExecute(Double result){
                        pb.setVisibility(View.GONE);
                        Toast.makeText(getApplicationContext(), "command sent", Toast.LENGTH_LONG).show();
                    }
                    protected void onProgressUpdate(Integer... progress){
                        pb.setProgress(progress[0]);
                    }

                    public void postData(String valueIWantToSend) {
                        // Create a new HttpClient and Post Header
                        HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost("http://admin:admin@192.168.1.1/apply.cgi");

                        try {
                            // Add your data
                            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                            nameValuePairs.add(new BasicNameValuePair("submit_button", "Wireless_MAC");
                            nameValuePairs.add(new BasicNameValuePair("change_action", "");
                            nameValuePairs.add(new BasicNameValuePair("action", "Apply");
                            nameValuePairs.add(new BasicNameValuePair("wl_macmode", "allow");
                            nameValuePairs.add(new BasicNameValuePair("wl_maclist", "32");
                            nameValuePairs.add(new BasicNameValuePair("wait_time", "3");
                            nameValuePairs.add(new BasicNameValuePair("wl_mac_filter", "1");
                            nameValuePairs.add(new BasicNameValuePair("start", "allow");
                            nameValuePairs.add(new BasicNameValuePair("wl_macmode1", "allow");
                            nameValuePairs.add(new BasicNameValuePair("m0", "00%3A1E%3A33%3AFE%3A0D%3A38");
                            nameValuePairs.add(new BasicNameValuePair("m16", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m1", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m17", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m2", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m18", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m3", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m19", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m4", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m20", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m5", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m21", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m6", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m22", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m7", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m23", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m8", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m24", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m9", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m25", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m10", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m26", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m11", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m27", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m12", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m28", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m13", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m29", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m14", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m30", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m15", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("m31", "00%3A00%3A00%3A00%3A00%3A00");
                            nameValuePairs.add(new BasicNameValuePair("end", "");

                            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                            // Execute HTTP Post Request
                            HttpResponse response = httpclient.execute(httppost);

                        } catch (ClientProtocolException e) {
                            // TODO Auto-generated catch block
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                        }
                    }

           @Override
           public void onCreate(Bundle savedInstanceState) 
           {
              super.onCreate(savedInstanceState); 
              setContentView(R.layout.add_country);

              nameEt = (EditText) findViewById(R.id.nameEdit);
              capEt = (EditText) findViewById(R.id.capEdit);
              codeEt = (EditText) findViewById(R.id.codeEdit);
              timeEt = (TimePicker) findViewById(R.id.timeEdit);

              Bundle extras = getIntent().getExtras(); 

              if (extras != null)
              {
                 rowID = extras.getLong("row_id");
                 nameEt.setText(extras.getString("name"));  
                 capEt.setText(extras.getString("cap"));  
                 codeEt.setText(extras.getString("code"));    
                 String time = extras.getString("time");
                 String[] parts = time.split(":");
                 timeEt.setCurrentHour(Integer.valueOf(parts[0]));
                 timeEt.setCurrentMinute(Integer.valueOf(parts[1]));
                 timeEt.setIs24HourView(false);
                 DecimalFormat df =   new DecimalFormat  ("00");
                 String minutes = df.format(min);

              }

              Button saveButton =(Button) findViewById(R.id.saveBtn);
              saveButton.setOnClickListener(new OnClickListener() {

                  public void onClick(View v) 
                  {
                     if (nameEt.getText().length() != 0)
                     {
                        AsyncTask<Object, Object, Object> saveContactTask = 
                           new AsyncTask<Object, Object, Object>() 
                           {
                              @Override
                              protected Object doInBackground(Object... params) 
                              {
                                 saveContact();
                                 return null;
                              }

                              @Override
                              protected void onPostExecute(Object result) 
                              {
                                 finish();
                              }
                           }; 

                        saveContactTask.execute((Object[]) null); 
                     }

                     else
                     {
                        AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                        alert.setTitle(R.string.errorTitle); 
                        alert.setMessage(R.string.errorMessage);
                        alert.setPositiveButton(R.string.errorButton, null); 
                        alert.show();
                     }
                  } 
             });
           }

               private void saveContact() 
               {
                  DatabaseConnector dbConnector = new DatabaseConnector(this);

                  if (getIntent().getExtras() == null)
                  {
                      dbConnector.insertContact(nameEt.getText().toString(),
                              capEt.getText().toString(),
                              timeEt.getCurrentHour().toString() + ":"
                                  + timeEt.getCurrentMinute().toString(),
                              codeEt.getText().toString());

                  }
                  else
                  {
                     dbConnector.updateContact(rowID,
                             nameEt.getText().toString(),
                                capEt.getText().toString(),
                                  timeEt.getCurrentHour().toString() + ":"
                                      + timeEt.getCurrentMinute().toString(),
                                  codeEt.getText().toString());
                  }
               }
    }}} 
```

问题：

```
Description Resource    Path    Location    Type
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 139    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 138    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 137    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 136    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 143    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 142    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 141    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 140    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 147    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 146    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 145    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 144    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 151    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 150    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 149    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 148    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 154    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 155    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 152    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 153    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 158    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 159    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 156    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 157    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 162    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 163    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 160    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 161    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 166    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 167    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 164    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 165    Java Problem
The method onCreate(Bundle) is undefined for the type AsyncTask<String,Integer,Double>  AddEditCountry.java /TEST App/src/com/app/test  line 187    Java Problem
The constructor DatabaseConnector(AddEditCountry.DeviceConfig.MyAsyncTask) is undefined AddEditCountry.java /TEST App/src/com/app/test  line 258    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 169    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 168    Java Problem
The method onCreate(Bundle) of type AddEditCountry.DeviceConfig.MyAsyncTask must override or implement a supertype method   AddEditCountry.java /TEST App/src/com/app/test  line 185    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 170    Java Problem
The type com.test.app.DeviceConfig.MyAsyncTask is not visible   AddEditCountry.java /TEST App/src/com/app/test  line 57 Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 129    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 130    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 131    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 132    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 133    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 134    Java Problem
Syntax error, insert ")" to complete Expression AddEditCountry.java /TEST App/src/com/app/test  line 135    Java Problem 
```

附言

*   当我尝试在建议的行上添加 ) 时 - 它只是将更多问题添加到问题日志中。: (

*   当我单击提交按钮时，它要求文本框包含数据：我只想发送我的数据并尽可能删除此要求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:26:46.937

尝试改变这个：

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("submit_button=Wireless_MAC&change_action=&action=Apply", valueIWantToSend)); 
```

至：

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("submit_button", "Wireless_MAC");
    nameValuePairs.add(new BasicNameValuePair("change_action", "");
    nameValuePairs.add(new BasicNameValuePair("action", "Apply");
    nameValuePairs.add(new BasicNameValuePair("value", valueIWantToSend); 
```

# php - Exec函数调用大量进程

> ID：15673964
> 
> 赞同：0
> 
> 时间：2013-03-28T03:52:09.337
> 
> 标签：php, command, exec

所以，这是我的简单代码：

```
<?php
for ($i = 0; $i < 2; $i++) {
    exec('php -q file.php ' . $i . ' > /dev/null &');
    echo 'Pros launched... ' . $i . '<br />';
}
?> 
```

问题在于，每次我运行此代码时，它主要使用 100% 的服务器资源并使服务器停机......而这导致使用 argv[1] == 0 ($i = = 0)...

有任何想法吗？

# oracle - Oracle - 从一个表中的其他记录中选择总和

> ID：15673966
> 
> 赞同：0
> 
> 时间：2013-03-28T03:52:19.070
> 
> 标签：oracle

我对这样的 SQL 查询有疑问：

我的标签1：

> Kode ---- Perkiraan --- Lvl --- GD --- DK --- REFF ---- N1 ------ N2 -----N3 ----- N4
> 
> ```
> 10.000 Group I     1    G   D              0      0     0     0
> 10.100 test 1      2    G   D    10.000    0      0     0     0
> 10.101 test 1AA    3    D   D    10.100   10     20    15    15
> 10.102 test 1BB    3    D   D    10.100   15      5     0    20
> 10.200 test 2      2    G   D    10.100    0      0     0     0
> 10.201 test 2AA    2    D   D    10.200   30      0    10    20
> 10.202 test 2BB    2    D   D    10.200    0     50     3    50
> 20.000 Group II    1    G   K              0      0     0     0
> 20.100 test XY     1    G   K    20.000    0      0     0     0
> 20.101 test XY1    2    D   K    20.100   20     10    50    60
> 20.102 test XY2    2    D   K    20.100   10     10    50    50
> 20.200 test II     2    D   K    20.000    5      2     0     3 
> ```

N4 列来自条件：

> 如果 DK = D，N1 + N2 - N3
> 如果 DK = K，N1 + N3 - N2

就我而言，我想用这样的结果进行查询：

> Kode ---- Perkiraan --- Lvl --- GD --- DK --- REFF ---- N1 ------ N2 -----N3 ----- N4
> 
> ```
> 10.000    Group I     1   G   D           55    50     0     0
> 10.100    test 1      2   G   D   10.000  25    25    15    25
> 10.101    test 1AA    3   D   D   10.100  10    20    15    15
> 10.102    test 1BB    3   D   D   10.100  15     5     0    20
> 10.200    test 2      2   G   D   10.100  30    50    13    67
> 10.201    test 2AA    2   D   D   10.200  30     0    10    20
> 10.202    test 2BB    2   D   D   10.200   0    50     3    47
> 20.000    Group II    1   G   K           35    22   200   223
> 20.100    test XY     1   G   K   20.000  30    20   100   110
> 20.101    test XY1    2   D   K   20.100  20    10    50    60
> 20.102    test XY2    2   D   K   20.100  10    10    50    50
> 20.200    test II     2   D   K   20.000   5    2      0     3 
> ```

1.  标准 1：lvl = 2，3 级的总和值或与 REFF 列中的值相匹配。

2.  标准 2：lvl = 1，2 级的总和值或与 REFF 列中的值相匹配。

3.  条件 3：lvl = 3，列 N2 和 N3 是记录值，或者可能来自查询连接或来自其他表的总和。

有人可以帮助我请......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:09:27.267

谢谢先生...

在我的例子中，我们可以在 MyTab1 中看到：我们可以在 KODE 字段中看到，从 10.000 到 10.102 的值 10.000 是顶级 (lvl)，10.100 是第二级，10.101 是第三级。第 3 级是详细数据，在我的例子中，第 3 级是交易数据。

第 1 行和第 2 行的默认值为 0（我称 'G' = General，参见字段 GD。'G' General 和 'D' 为 Detail ）。

我想查询结果，例如顶部的示例。其中级别 (lvl) 2 的条件公式是**所有级别 3 和 REFF = 10.100**和级别 1 的公式总和（级别 2 的总和）。

例子：

> ```
> Kode   Perkiraan  Lvl  GD   DK REFF     N1     N2    N3    N4    
> 10.000 Group I     1    G                0      0     0     0
> 10.100 test 1      2    G   D  10.000    0      0     0     0     
> 10.101 test 1AA    3    D   D  10.100   10     20    15    15    
> 10.102 test 1BB    3    D   D  10.100   15      5     0    20 
> ```
> 
> 我想要这样的结果：
> 
> ```
> 10.100 test 1      2    G   D  10.000   25     25    15    35
> 
> N1 = 25 is from 10+15     
> N2 = 25 is from 20+5     
> N3 = 15 is from 15+0     and      
> N4 = 35 is from ( if Field DK = D, N1 + N2 - N3 and if DK = K then N1 + N3 - N2 ). 
> ```

1级就是这种情况。

我很难进行查询..

感谢您的关注和最诚挚的问候..

穆利亚迪。
印度尼西亚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:04:10.707

我不完全理解你的问题，但我会调查

```
sum (y) over (partition by xx order by z) 
```

ETC

# sql - 推荐的数据库角色数 SQL Server 2008 R2

> ID：15673971
> 
> 赞同：-1
> 
> 时间：2013-03-28T03:52:57.010
> 
> 标签：sql, database, sql-server-2008-r2

有人知道在 SQL Server 2008 R2 数据库上推荐的数据库角色数量是多少。

我有一个具有 130 个数据库角色的数据库（我继承了该数据库）......我知道这会导致用户出现问题，所以我想知道建议是什么，最大值是多少。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:02:34.777

角色的最大数量几乎没有限制。但是角色应该是让数据库安全管理更容易，太多肯定不会让管理和维护更容易。

# ruby-on-rails - Heroku dev 上的 Postgres 进程分叉错误

> ID：15673975
> 
> 赞同：2
> 
> 时间：2013-03-28T03:53:17.423
> 
> 标签：ruby-on-rails, postgresql, heroku

我目前的 Heroku RoR 应用程序出现问题，导致它无法与 Postgres 数据库通信。在尝试加载我的应用程序时，我遇到了一般的“出现问题”问题。

运行`heroku logs`返回以下内容：

```
2013-03-28T03:46:01+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-03-28T03:46:01+00:00 heroku[web.1]: State changed from starting to up
2013-03-28T03:46:01+00:00 app[web.1]: [2013-03-28 03:46:01] ERROR SignalException: SIGTERM
2013-03-28T03:46:01+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2013-03-28T03:46:05+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-03-28T03:46:05+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-03-28T03:46:07+00:00 heroku[web.1]: Process exited with status 137
2013-03-28T03:48:19+00:00 app[web.1]: Started GET "/projects" for 0.0.0.0 at 2013-03-28 03:48:19 +0000
2013-03-28T03:48:19+00:00 app[web.1]: PG::Error (could not fork new process for connection: Cannot allocate memory
2013-03-28T03:48:19+00:00 app[web.1]: 
2013-03-28T03:48:19+00:00 app[web.1]: could not fork new process for connection: Cannot allocate memory
2013-03-28T03:48:19+00:00 app[web.1]: 
2013-03-28T03:48:19+00:00 app[web.1]: ):
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize'
2013-03-28T03:48:19+00:00 app[web.1]: could not fork new process for connection: Cannot allocate memory
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `new'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:326:in `initialize'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `connect'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
2013-03-28T03:48:19+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
2013-03-28T03:48:19+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:67:in `rescue in call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:61:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `_run__3713961688065884330__call__3295828753336647570__callbacks'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `block in call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:223:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:479:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-03-28T03:48:19+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-28T03:48:19+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-03-28T03:48:19+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
```

关键部分在开头：

```
2013-03-28T03:48:19+00:00 app[web.1]: PG::Error (could not fork new process for connection: Cannot allocate memory
2013-03-28T03:48:19+00:00 app[web.1]: 
2013-03-28T03:48:19+00:00 app[web.1]: could not fork new process for connection: Cannot allocate memory
2013-03-28T03:48:19+00:00 app[web.1]: 
2013-03-28T03:48:19+00:00 app[web.1]: ): 
```

我发现[了这个](https://stackoverflow.com/questions/14014138/django-operationalerror-could-not-fork-new-process-for-connection)问题，我试图限制退货的数量，但这似乎不是问题。我的数据库中只有两个项目，它们都有以下模型：

```
class Project < ActiveRecord::Base
  attr_accessible :description, :image, :name, :url
end 
```

哪些是文本/字符串字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T04:09:18.803

我注意到你在大约 15 分钟前发布了这个。在过去的半小时里，我也开始在 heroku 上看到这个错误（连接到 dev/free postgres db）。我想知道这是不是他们的问题？他们的状态页面没有给出任何提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:58:34.687

如您所知，此错误的关键部分是：

```
could not fork new process for connection: Cannot allocate memory 
```

这表明主机、容器或 ulimit 上下文没有更多可用内存。创建一个新进程需要为堆栈和其他各种基本数据结构分配内存。它没有太多内存，因此无法分叉一个进程表明您完全没有 RAM。

在普通主机上，您将登录（如果可以），检查正在运行的进程，杀死有问题的进程，设置问题服务的内存限制等。这在 Heroku 上并不是一个真正的选项，但您*可以*：

*   减少您正在使用的并发连接数；和
*   为每个连接减少`work_mem`和`maintenance_work_mem`

如果您超出了容器中可用的 RAM，这将有所帮助。如果整个主机内存不足，它对你没有任何好处。

*在升级*到更大的 Heroku 计划后，我为遇到类似问题的客户提供了一些紧急支持。对于发生的事情，我们从来没有得到可靠的答案，但客户最终 - 在几次尝试和几天之后 - 创建了他们数据库的追随者（副本），然后故障转移到它。这解决了问题，表明问题可能与托管该数据库实例的容器有关。如果您可以成功创建关注者，请尝试此操作。您可能必须减少连接数`work_mem`等才能做到这一点。

一般来说，请考虑 PostgreSQL 在活动连接数量相对较少且连接池良好的情况下表现最佳。使用 20 或 30 个池连接通常会比使用 200 或 300 且没有池器时获得更好的吞吐量。减少连接数，直到问题消失，您也可能会看到性能提高。

（披露：我在 2ndQuadrant 工作，这是另一家 PostgreSQL 支持和服务公司）。

# java - java.io.IOException - IO 流读取结束

> ID：15673977
> 
> 赞同：7
> 
> 时间：2013-03-28T03:53:30.387
> 
> 标签：java, sftp

代码似乎在`session.connect`.

```
com.jcraft.jsch.JSchException: Session.connect: java.io.IOException: End of IO Stream Read 
```

**堆栈跟踪**

```
com.jcraft.jsch.JSchException: Session.connect: java.io.IOException: End of IO Stream Read
    at com.jcraft.jsch.Session.connect(Session.java:534)
    at com.jcraft.jsch.Session.connect(Session.java:162)
    at session.connect in uploadFile(ftpService.java:280) 
```

**代码**

```
try {
    JSch jsch = new JSch();
    Session session = null;
    session = jsch.getSession(ftpUserName, ftpServer, 22);
    session.setClientVersion("StrictHostKeyChecking");
    //session.setConfig("StrictHostKeyChecking", "no");
    session.setPassword(ftpPassword);
    session.connect();

    Channel channel = session.openChannel("sftp");
    channel.connect();
    ChannelSftp sftpChannel = (ChannelSftp) channel;
    //sftpChannel.get("remotefile.txt", "localfile.txt");
    String path="C:\\srcFolder";
    String remotePath="C:\\destFolder";
    try {
        sftpChannel.put(new FileInputStream(new File(path)), remotePath  );
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        Logger.error(e);
        e.printStackTrace();
    }
    final Vector files = sftpChannel.ls(".");
    for (Object obj : files) {
        System.out.println("f:"+obj);
    }
    sftpChannel.exit();
    session.disconnect();
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-24T17:12:13.483

旧版本的 Jsch（例如 0.1.52）和最新版本的 openssh（例如 OpenSSH_7.2p2）存在互操作性问题。升级到 Jsch 0.1.54 后问题就消失了。

# php - php 获取 facebook 喜欢的特定 url

> ID：15673984
> 
> 赞同：0
> 
> 时间：2013-03-28T03:54:09.953
> 
> 标签：php, facebook, facebook-like

我正在尝试获取特定网址的类似计数，并且我尝试了多种方法并进行了搜索，但未能找到解决方案……这是我尝试过的：

方法一：

```
$fburl = 'http%3A%2F%2Fwww.olympusmons.com%2Fradio%2F%3Fid%3D1377';
$json_string = file_get_contents('http://api.facebook.com/restserver.php?method=links.getStats&urls=' . $url);
$json = json_decode($json_string, true); 
```

方法二：

```
$fql  = "SELECT url, normalized_url, share_count, like_count, comment_count, ";
$fql .= "total_count, commentsbox_count, comments_fbid, click_count FROM ";
$fql .= "link_stat WHERE url = '".$url."'";

$apifql="https://api.facebook.com/method/fql.query?format=json&query=".urlencode($fql);
$fb_json=file_get_contents($apifql);
return json_decode($fb_json); 
```

方法三：

```
$json_string = file_get_contents('http://graph.facebook.com/?ids=' . $url);
$json = json_decode($json_string, true); 
```

现在，如果我转到该网址（[http://graph.facebook.com/?ids=http://www.olympusmons.com/radio/?id=1377](http://graph.facebook.com/?ids=http://www.olympusmons.com/radio/?id=1377)），这最后一种方法总是返回 4 但真正的值应该是0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:00:00.003

值 4 表示此 url 的分享数，没有喜欢或评论，所以都等于 0。

看看这个有评论... [https://graph.facebook.com/?ids=http://www.example.com/](https://graph.facebook.com/?ids=http://www.example.com/)

# ruby-on-rails - Heroku 仅在生产中“出了点问题”。ActionView:MissingTemplate 错误但模板存在

> ID：15673985
> 
> 赞同：0
> 
> 时间：2013-03-28T03:54:17.017
> 
> 标签：ruby-on-rails, heroku

我只在 Heroku 上的生产中遇到“出了点问题”500 错误，并且仅针对我的一个页面，其中几乎没有几乎完全非动态的内容。

在日志中，它显示以下内容：

```
ActionView::MissingTemplate (Missing template pages/contact, application/contact with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
            2013-03-28T03:42:28+00:00 app[web.1]:   * "/app/app/views"
            2013-03-28T03:42:28+00:00 app[web.1]: 
```

但是，模板肯定在那个位置。Heroku run rake routes 显示正确的路线。我遵循其他论坛的建议，将 uglifier、coffeescript 和 haml-rails 从我的 gemfile 的资产组中移出。Gemfile 现在看起来像这样：

```
 source 'http://rubygems.org'

    gem 'mail'
    gem 'rails', '3.2.13'
    gem 'pg'
    gem 'twitter'
    gem 'jquery-rails'
    gem 'rake', '10.0.4'
    gem 'sass', "~> 3.2.7"
    gem 'haml-rails'
    gem 'coffee-rails'
    gem 'uglifier'
      gem 'therubyracer'
      gem 'sass-rails'

    group :development do
      gem 'rspec-rails'
      gem 'annotate'
      gem 'faker', '0.3.1'
    end

    group :test do
      gem 'ruby-debug19', :require => 'ruby-debug'
      gem 'rspec-rails'
      gem 'webrat', '0.7.1'
      gem 'spork', '0.9.0.rc8'
      gem 'factory_girl_rails', '1.0'
      gem 'autotest', '4.4.6'
      gem 'autotest-rails-pure', '4.1.2'
      gem 'autotest-fsevent', '0.2.5'
      gem 'autotest-growl', '0.2.9'
      gem 'ZenTest' , '4.8.3'
    end

    # Bundle edge Rails instead:
    # gem 'rails', :git => 'git://github.com/rails/rails.git'

    # Use unicorn as the web server
    # gem 'unicorn'

    # Deploy with Capistrano
    # gem 'capistrano'

    # To use debugger (ruby-debug for Ruby 1.8.7+, ruby-debug19 for Ruby 1.9.2+)
    # gem 'ruby-debug'
    # gem 'ruby-debug19', :require => 'ruby-debug'

    # Bundle the extra gems:
    # gem 'bj'
    # gem 'nokogiri'
    # gem 'aws-s3', :require => 'aws/s3'

    # Bundle gems for the local environment. Make sure to
    # put test-only gems in this group so their generators
    # and rake tasks are available in development mode:
    # group :development, :test do
    #   gem 'webrat'
    # end

    # To use ActiveModel has_secure_password
    # gem 'bcrypt-ruby', '~> 3.0.0'

    # To use Jbuilder templates for JSON
    # gem 'jbuilder'

    # Use unicorn as the app server
    # gem 'unicorn'

    # Deploy with Capistrano
    # gem 'capistrano'

    # To use debugger
    # gem 'debugger' 
```

我在日志或其他 Stack Overflow 问题中没有看到任何其他有用的信息。有没有新鲜的眼睛看到我看不到的东西？

```
 2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:36:in `render_template'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/streaming.rb:225:in `_render_template'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:110:in `_render_template'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/renderer/renderer.rb:17:in `render'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
            2013-03-28T03:42:28+00:00 app[web.1]: 
            2013-03-28T03:42:28+00:00 app[web.1]: ActionView::MissingTemplate (Missing template pages/contact, application/contact with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
            2013-03-28T03:42:28+00:00 app[web.1]:   * "/app/app/views"
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:103:in `render_to_body'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/lookup_context.rb:109:in `find'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/renderer/template_renderer.rb:10:in `render'
            2013-03-28T03:42:28+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:39:in `render'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:88:in `render'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_view/path_set.rb:58:in `find'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:16:in `render'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actio
            npack-3.2.13/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/rendering.rb:10:in `process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/core_ext/benchmark.rb:5:in `ms'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:414:in `_run__115463730327225923__process_action__2482471898787976109__callbacks'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:167:in `process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `instrument'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/rescue.rb:29:in `process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/base.rb:121:in `process'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/rendering.rb:45:in `process'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/notifications.rb:123:in `block in instrument'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/abstract_controller/callbacks.rb:17:in `process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal.rb:246:in `block in action'
            2013-03-28T03:42:27+00:00 heroku[router]: at=info method=GET path=/contact host=polar-plains-8193.herokuapp.com fwd="98.164.80.126" dyno=web.1 connect=3ms service=15ms status=500 bytes=643
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal.rb:203:in `dispatch'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:73:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/head.rb:14:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/flash.rb:242:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `_run__402893550312028338__call__2852970105878458306__callbacks'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/rack/logger.rb:32:in `call_app'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/cookies.rb:341:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:
            36:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/routing/route_set.rb:612:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/tagged_logging.rb:22:in `tagged'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/request_id.rb:22:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `block in call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/query_cache.rb:64:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:223:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/static.rb:63:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
            2013-03-28T03:42:28+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
            2013-03-28T03:42:28+00:00 app[web.1]: 
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:479:in `call'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
            2013-03-28T03:42:28+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
            2013-03-28T03:42:28+00:00 app[web.1]: 
            2013-03-28T03:42:28+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/rack/log_tailer.rb:17:in `call' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:07:15.843

要确认 contact.html.erb 已进入 Heroku，请尝试运行以下命令：

```
heroku run bash
cat app/views/pages/contact.html.erb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:09:40.340

在放弃之前，我决定用一个非常奇怪的冰雹玛丽预感来解决问题，它解决了这个问题。

我将有问题的文件“contact.html.erb”、“contact.css.erb”复制并粘贴到名为“contacto.html.erb”等的新镜像文件中，而不是“contact”。

将路线更改为：匹配 '/contact' => 'pages#contacto' 并推送到 heroku。错误消失了。更令人惊讶的是，在我删除了原始文件并用“contact”代替了contacto重命名了这些相同的文件后，它仍然有效。

我真的不明白这项工作背后的伏都教是什么。我最初只是尝试路由解决方法。我什至早先从那些“联系人”文件中删除了所有内容并将它们推送到heroku，替换所有内容并再次推送它们，没有任何更改。

# c# - 当一个事件在特定时间内未触发时获取通知

> ID：15673988
> 
> 赞同：0
> 
> 时间：2013-03-28T03:54:44.333
> 
> 标签：c#, winforms, timer

在我的 winform 应用程序中，我经常提出一个事件。如果该事件未引发超过 2 分钟，我需要向用户显示一条消息。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:17:58.003

您已经用计时器标签标记了您的问题。使用计时器 8) 在第一个事件场合启动它。然后在事件中使用一些静态布尔标志来标记该事件的发生。检查 Timer Tick 事件中的标志。如果它是真的 - 那么好的。如果为假则不行。然后在 Tick 事件中出现错误标志。

# jquery - 在 header.php 中为特定类别页面包含自定义 jQuery

> ID：15673990
> 
> 赞同：1
> 
> 时间：2013-03-28T03:54:52.993
> 
> 标签：jquery, wordpress

我有一些需要特定广告横幅的类别页面，我正在尝试使用带有自定义 jQuery 代码的条件 (is_category``) 来完成此操作。

编码：

```
<?php if(is_category('Faces')): ?>
<script type="text/javascript">

jQuery('#banner-area img').attr('src', '123.jpg');

</script>
<?php endif; ?> 
```

这页纸：

[http://www.loft-asia.com/category/faces/](http://www.loft-asia.com/category/faces/)

而且它不起作用......我已经尝试了一个警告框并且它起作用了，所以页面上的条件脚本正在工作。

我究竟做错了什么？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:34:03.107

我想你应该等待适当的时机来执行你的脚本：[$(document).ready()](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:42:41.830

现在，你有这个块重复四次：

```
<script type="text/javascript">

/jQuery(document).ready(function() {
  jQuery('#banner-area img').attr('src', '123.jpg');
});

</script> 
```

您需要添加一次并删除`\`当前

```
<script type="text/javascript">
jQuery(document).ready(function($) {
  $('#banner-area img').attr('src', '123.jpg');
});
</script> 
```

# java - 无法启动意图

> ID：15673993
> 
> 赞同：0
> 
> 时间：2013-03-28T03:55:08.917
> 
> 标签：java, android, eclipse, audio, fatal-error

我一遍又一遍地尝试，但我找不到解决方案，错误日志一直告诉我它无法启动意图，我不知道该怎么做。当我单击“动物”按钮和“人类”按钮时会发生错误。另外，“人”按钮是指打嗝，请帮忙。谢谢你。

**错误日志**

```
03-27 20:44:57.342: E/AndroidRuntime(5348): [FRANDRO_ERR_HANDLER] com_android_internal_os_RuntimeInit_BlueErrorHandler
03-27 20:44:57.342: E/AndroidRuntime(5348): FATAL EXCEPTION: main
03-27 20:44:57.342: E/AndroidRuntime(5348): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.triplec.letthewindout_fart/com.triplec.letthewindout_fart.Animals}: java.lang.NullPointerException
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1662)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1678)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.os.Looper.loop(Looper.java:130)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.app.ActivityThread.main(ActivityThread.java:3740)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at java.lang.reflect.Method.invoke(Method.java:507)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at dalvik.system.NativeStart.main(Native Method)
03-27 20:44:57.342: E/AndroidRuntime(5348): Caused by: java.lang.NullPointerException
03-27 20:44:57.342: E/AndroidRuntime(5348):     at com.triplec.letthewindout_fart.Animals.onCreate(Animals.java:28)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-27 20:44:57.342: E/AndroidRuntime(5348):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1626) 
```

这是**我的清单**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest 
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
package="com.triplec.letthewindout_fart"
android:versionCode="5"
android:versionName="5" xmlns:android="http://schemas.android.com/apk/res/android">

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/fart_sign"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.triplec.letthewindout_fart.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.triplec.letthewindout_fart.Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.triplec.letthewindout_fart.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.triplec.letthewindout_fart.Animals"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.triplec.letthewindout_fart.ANIMALS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.triplec.letthewindout_fart.Burp"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.triplec.letthewindout_fart.BURP" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.triplec.letthewindout_fart.Mainu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.triplec.letthewindout_fart.MAI" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

<activity 
android:name="com.google.ads.AdActivity"
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
/>

</application> 
```

**我的动物.java**

```
package com.triplec.letthewindout_fart;

import java.io.IOException;

import com.google.ads.AdRequest;
import com.google.ads.AdView;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Animals extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.animals);

    AdView ad = (AdView)findViewById(R.id.adView);
    ad.loadAd(new AdRequest());

    final MediaPlayer sound01 = MediaPlayer.create(this, R.raw.alpaca_mating_call);
    final MediaPlayer sound02 = MediaPlayer.create(this, R.raw.angry_cat);
    final MediaPlayer sound03 = MediaPlayer.create(this, R.raw.bluejay_call);
    final MediaPlayer sound04 = MediaPlayer.create(this, R.raw.cat_meow);
    final MediaPlayer sound05 = MediaPlayer.create(this, R.raw.cow);
    final MediaPlayer sound06 = MediaPlayer.create(this, R.raw.dog_kennel);
    final MediaPlayer sound07 = MediaPlayer.create(this, R.raw.frogs);
    final MediaPlayer sound08 = MediaPlayer.create(this, R.raw.growling_snarling_dogs);
    final MediaPlayer sound09 = MediaPlayer.create(this, R.raw.horse_blow);
    final MediaPlayer sound10 = MediaPlayer.create(this, R.raw.horse_neigh);
    final MediaPlayer sound11 = MediaPlayer.create(this, R.raw.kitten_meow);
    final MediaPlayer sound12 = MediaPlayer.create(this, R.raw.laughing_kookaburra_birds);
    final MediaPlayer sound13 = MediaPlayer.create(this, R.raw.lion_roar);
    final MediaPlayer sound14 = MediaPlayer.create(this, R.raw.quack);
    final MediaPlayer sound15 = MediaPlayer.create(this, R.raw.raccoon);
    final MediaPlayer sound16 = MediaPlayer.create(this, R.raw.rooster);
    final MediaPlayer sound17 = MediaPlayer.create(this, R.raw.trex);
    final MediaPlayer sound18 = MediaPlayer.create(this, R.raw.warbling_vireo);
    final MediaPlayer sound19 = MediaPlayer.create(this, R.raw.zebra_call);

    // play sound files on clicks
    Button s01 = (Button) findViewById(R.id.btalpaca); 
    s01.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound01.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound01.start();                
            }

    });
    Button s02 = (Button) findViewById(R.id.btangry); 
    s02.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound02.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound02.start();
        }
    });

    Button s03 = (Button) findViewById(R.id.btblue); 
    s03.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound03.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound03.start();
        }
    });

    Button s04 = (Button) findViewById(R.id.btcat); 
    s04.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound04.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound04.start();
        }
    });

    Button s05 = (Button) findViewById(R.id.btcow); 
    s05.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound05.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound05.start();
        }
    });

    Button s06 = (Button) findViewById(R.id.btdog); 
    s06.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound06.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound06.start();
        }
    });

    Button s07 = (Button) findViewById(R.id.btfrog); 
    s07.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound07.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound07.start();
        }
    });

    Button s08 = (Button) findViewById(R.id.btgrowl); 
    s08.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound08.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound08.start();
        }
    });

    Button s09 = (Button) findViewById(R.id.bthorse); 
    s09.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound09.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound09.start();
        }
    });

    Button s10 = (Button) findViewById(R.id.bthorse2); 
    s10.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound10.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound10.start();
        }
    });

    Button s11 = (Button) findViewById(R.id.btkitten); 
    s11.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound11.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound11.start();
        }
    });

    Button s12 = (Button) findViewById(R.id.btlaugh); 
    s12.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound12.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound12.start();
        }
    });

    Button s13 = (Button) findViewById(R.id.btlion); 
    s13.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound13.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound13.start();
        }
    });

    Button s14 = (Button) findViewById(R.id.btquack); 
    s14.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound14.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound14.start();
        }
    });

    Button s15 = (Button) findViewById(R.id.btracoon); 
    s15.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound15.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound15.start();
        }
    });

    Button s16 = (Button) findViewById(R.id.btrooster); 
    s16.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound16.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound16.start();
        }
    });

    Button s17 = (Button) findViewById(R.id.btt); 
    s17.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound17.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound17.start();
        }
    });

    Button s18 = (Button) findViewById(R.id.btwarb); 
    s18.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound18.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound18.start();
        }
    });

    Button s19 = (Button) findViewById(R.id.btzebra); 
    s19.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound19.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            sound19.start();
        }
    });

}
} 
```

最后，这是我的“主要”，错误日志在我的项目中说了一些关于致命的（唯一称为“主要”的东西）是一个 XML，所以我不知道它为什么这样做。

**我的“主要”**

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/warning"
android:orientation="vertical"
>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

 <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        ads:adSize="BANNER"
        ads:adUnitId="a1513e8c7087157"
        ads:loadAdOnCreate="true" >
</com.google.ads.AdView>

        <Button
            android:id="@+id/bKing"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="King Farthur"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bLawn"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Lawn Mower"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bString"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="String Cheese"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bShort"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Short Ripper"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bSharp"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Sharp Fart"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bMotor"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Motor Bike"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bTrial"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Fart Trail"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bRigid"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Rigid Fart"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bGirl"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Girl Fart"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bLong"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Long Fart"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bQuick"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Quick Fart"
            android:textSize="20sp" />

        <Button
            android:id="@+id/bWindy"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:text="Windy Fart"
            android:textSize="20sp" />

    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:58:22.287

```
setContentView(R.layout.animals);
                        ^^^^^^^ --> This is wrong. It should be main here. 
```

上述说法是错误的。它应该是

```
setContentView(R.layout.main); 
```

因为您在问题中提到的`adView`包含main.xml 的布局**。**因为，您将布局设置为，`animals`而不是`main`您的`(AdView)findViewById(R.id.adView);`return `null`，因为布局`adView`中不存在`animals`。