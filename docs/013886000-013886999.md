# StackOverflow 问答 13886000-13886999

# android - 在主线程上使用 setDataSource 真的无效吗？

> ID：13886001
> 
> 赞同：3
> 
> 时间：2012-12-14T20:45:08.253
> 
> 标签：android, android-mediaplayer

我最近注意到我在我的 Android 开发者控制台中收到了以下崩溃的报告：

```
android.os.NetworkOnMainThreadException
at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
at java.net.InetAddress.getHostByAddrImpl(InetAddress.java:440)
at java.net.InetAddress.getHostName(InetAddress.java:313)
at android.media.MediaPlayer.checkHostdata(MediaPlayer.java:869)
at android.media.MediaPlayer.isLocalhost(MediaPlayer.java:940)
at android.media.MediaPlayer.setDataSourceBase(MediaPlayer.java:980)
at android.media.MediaPlayer.setDataSource(MediaPlayer.java:1085)
[the rest is irrelevant] 
```

似乎在[MediaPlayer.setDataSource](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.lang.String%29)方法的某个地方有一些代码会触及导致 StrictMode 吠叫的网络。这有点令人惊讶，因为在主线程上调用 setDataSource 似乎是常见的做法。

所以我的问题是，处理这个问题的最佳方法是什么？我应该将 mediaPlayer 移出主线程吗？我应该忽略它吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:51:21.023

好吧，从战略上讲，这感觉有点过于激进的逻辑，如果真的没有进行阻塞网络 I/O 调用的风险，`StrictMode`将来可能会得到修复。`getHostByAddrImpl()`

从策略上讲，您应该将`setDataSource()`调用移至后台线程，特别是当源指向网络时（`http`、`rtsp`等）。

# python - 处理 FIFO 队列，但如果项目太旧则丢弃它们

> ID：13886004
> 
> 赞同：1
> 
> 时间：2012-12-14T20:45:23.837
> 
> 标签：python, multithreading, python-2.7

我编写了一个[基本实用程序](https://github.com/jasonsperske/PubNubBlink)，它在一个线程中侦听消息，将它们添加到 FIFO 队列并在另一个线程中处理它们。每条消息都需要固定的时间来处理（它正在等待闪烁的灯停止闪烁），但消息可以随机到达（`patterns`在代码中是一个正则表达式字典以匹配传入的消息，如果找到匹配项，则将其添加到队列以及要闪烁的颜色模式）。

```
blink_queue = Queue()
def receive(data) :
    message = data['text']

    for pattern in patterns:
        if re.match(pattern, message):
            blink_queue.put(patterns[pattern])
            break
    return True

def blinker(q) :
    while True:
        args = q.get().split()
        subprocess.Popen(
            [blink_app] + args,
            startupinfo=startupinfo,
            stderr=subprocess.PIPE,
            stdout=subprocess.PIPE)
        time.sleep(blink_wait)
        q.task_done()

def subscribe():
    print("Listening for messages on '%s' channel..." % channel)
    pubnub.subscribe({
        'channel'  : channel,
        'callback' : receive
    })

blink_worker = Thread(target=blinker, args=(blink_queue,))
blink_worker.daemon=True
blink_worker.start()

sub_thread = Thread(target=subscribe)
sub_thread.daemon=True
sub_thread.start()

sub_thread.join() 
```

如何在 Python 中实现一个 FIFO 队列，如果它变大，它会自动修剪最旧的（第一个）队列。我是创建另一个观看线程，还是在`subscribe`线程上检查大小？我是 Python 的新手，所以如果有一个完全合乎逻辑的数据类型，请随时称我为菜鸟，并把我送到正确的方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T22:20:15.437

原来有一个逻辑类型[`collections.deque`](http://docs.python.org/2/library/collections.html#collections.deque)。从文档中：

> 如果未指定 maxlen 或为 None，则双端队列可能会增长到任意长度。否则，双端队列限制为指定的最大长度。一旦有界长度的双端队列已满，当添加新项目时，相应数量的项目将从另一端丢弃。

（[这](https://github.com/jasonsperske/PubNubBlink/commit/dc45082fc77ebbcaf20c575e616917eca4eeaf0d)是实现此数据类型的提交）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:50:27.880

为此，如果队列太大，我将继承[Queue](http://docs.python.org/2/library/queue.html)并重载该`put`方法以按照您想要的方式删除项目。`Queue`

例如

```
class NukeOldDataQueue(Queue.Queue):
    def put(self,*args,**kwargs):
        if self.full():
            try:
                oldest_data = self.get()
                print('[WARNING]: throwing away old data:'+repr(oldest_data))
            # a True value from `full()` does not guarantee
            # that anything remains in the queue when `get()` is called
            except Queue.Empty:
                pass
        Queue.Queue.put(self,*args,**kwargs) 
```

您可能还需要传递`block=False`参数或操作`timeout`参数，具体取决于意外丢弃新数据的严重程度或阻塞`put()`调用是否可以接受。

# eclipse - 如何撤消在 Eclipse 首选项中的 Eclipse 构建中将目标运行标记为已忽略？

> ID：13886005
> 
> 赞同：11
> 
> 时间：2012-12-14T20:45:34.343
> 
> 标签：eclipse, maven, m2e

我错误地单击了*“在 Eclipse 首选项中的 Eclipse 构建中将目标运行标记为已忽略（实验性）”*：

![在此处输入图像描述](../Images/97d7523e24dba06894b5f62b21644d31.png)

我在哪里/如何撤消这个？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-23T12:33:37.890

m2e 使用文件`YOUR_WORKSPACE/.metadata/.plugins/org2.eclipse.m2e.core/lifecycle-mapping-metadata.xml`来存储全局生命周期映射。

您可以手动打开此文件并删除相应的条目。之后，您应该使用窗口 > 首选项 > maven > 生命周期映射中的“重新加载工作区生命周期映射元数据”重新加载全局生命周期映射。但是您也可以在 Eclipse 未运行时编辑该文件。在这种情况下，您不必重新加载任何内容。

如果您只添加了一个忽略，那么您可以完全删除该文件（也许为了安全起见在某处进行备份）。如果您想删除一个但留下其他人，那么请选择 <pluginExecution> 和 </pluginExecution> 之间的所有内容供您选择。

我希望这个能有一点帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T12:37:23.370

我知道我很晚才回答这个问题，但是我在新版本中遇到了这个问题，这对开发人员很有用。由于此插件配置仅用于存储 Eclipse m2e 设置。它对 Maven 构建本身没有影响。即使您想删除更改，也会在 pluginManagement 中添加新插件，其 groupID 和 artifactID

```
<groupId>org.eclipse.m2e</groupId>
<artifactId>lifecycle-mapping</artifactId> 
```

Maven目标如下

```
<goals>
        <goal>generate-application-xml</goal>
</goals> 
```

# android - 将片段的上下文传递给类并显示警告对话框

> ID：13886014
> 
> 赞同：1
> 
> 时间：2012-12-14T20:46:36.753
> 
> 标签：android, fragment

我目前正在开发一个 android 项目，但我遇到了上下文和 AlertDialogs 的问题。

我有一个扩展了 Fragment 的类，它创建了一个名为的标准 Java 类的实例，该类`Common`具有从 Fragment 传递给它的上下文。在`Common`课堂上，我有一些代码来显示一个警报对话框并根据用户单击的内容返回一个布尔值。

使用扩展 Activity 的标准类，我可以使用以下命令创建 Common 类的实例：

```
Common common = new Common(this); 
```

然后我可以使用下面的代码在这个类中调用我的显示警报对话框函数。

```
common.showYesNoDialog("This is my message", false); 
```

对于标准`Activity`类，上面的代码工作正常。我的问题是这个。

在扩展片段的类中，我无法传递`this`给公共类，因此我必须使用以下代码：

```
Common common = new Common(getActivity().getApplicationContext()); 
```

我正常使用以下代码：

```
common.showYesNoDialog("This is my message", false); 
```

当我调用上面的函数时，出现以下错误：

```
FATAL EXCEPTION: main
android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application. 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:55:16.750

您应该使用`getActivity()`而不是，`getActivity().getApplicationContext()`因为 getActivity() 返回一个 Activity，它是 Context 的子类。

# c# - CRM 2011 插件中的线程/环境上下文

> ID：13886017
> 
> 赞同：8
> 
> 时间：2012-12-14T20:46:54.493
> 
> 标签：c#, multithreading, dynamics-crm-2011, threadpool, cross-cutting-concerns

我们最近有几次提出这样的问题：在 Dynamics CRM 2011 中，是否`Execute()`保证一个插件执行（即方法的传递）保持在同一个线程上。

我想使用环境上下文模式来实现跟踪，以避免将跟踪服务传递给任何可能想要跟踪的类。问题是我们知道插件每个注册步骤只实例化一次，然后从同一个实例提供所有后续操作；这意味着我不能只拥有一些像`Tracing.Current`我分配当前`ITracingService`实例的静态属性，我很高兴。如果我这样做了，最后开始的操作将覆盖所有其他可能仍在运行的操作的实例（这种并发并不少见）。

现在，如果我可以确定`Execute()`方法下的所有内容都保留在同一个线程中，我仍然可以使用环境上下文，利用`[ThreadStatic]`静态字段的属性：

```
public static class Tracing
{
    [ThreadStatic]
    private static ITracingService _current;

    public static ITracingService Current
    {
        get
        {
            if (null == _current)
            {
                _current = new NullTracingService();
            }

            return _current;
        }

        set { _current = value; }
    }
} 
```

我会在输入`Execute()`方法时设置它并在最后清除它，以便删除对跟踪服务实例的引用。

*在 MSCRM 插件的上下文中，*我唯一能找到的关于线程的事情是，显然各个线程来自 ThreadPool - 无论对我的问题可能产生什么后果。

有没有人更深入地了解如何使用 MSCRM 插件处理线程 - 或者关于如何在这种特殊情况下使用 SOLID 代码优雅地处理跟踪的横切关注点的任何其他想法（AOP/动态拦截在这里没有选项）？

感谢您的任何帮助和指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T20:00:07.470

简单而聪明的答案：如果你这样做会很痛，那就不要那样做。:)

您对使用环境上下文模式的自我要求与 CRM 的设计模式相冲突。想一想 CRM 是如何工作的——它为您传递了一个`IServiceProvider`您需要的一切，包括跟踪服务。它为您处理所有复杂的多线程和优化，并且只要求您不要试图用花哨的模式或静态变量或线程技巧来超越它。

我的建议是使用相同的模式 - 将 传递`IServiceProvider`给任何需要它的类或方法。简单得多 - 再加上以后遇到奇怪的错误时，您不会质疑您是否成功地超越了微软的工程师。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:09:11.317

CRM 创建单个插件对象，然后根据需要使用线程来处理请求。因此，您唯一可以确定的是，您将同时为单个插件对象运行多个线程。

线程是通过 IIS 管理的，如果可能的话将被重用。所以如果你想确保每次`Execute`被调用，它都有一个新的`ITracingService`，你必须设置它。如果你只是想确保每次`Execute`被调用，它都有一个，你只需要做一个`if`语句来检查它。

由于您的后备变量是`ThreadStatic`，因此您无需担心线程问题，但由于 IIS 尝试重用线程，因此每次`Execute`调用它都不会为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:31:39.450

恐怕我只能在这里猜测整个插件/线程/静态问题，但是您提出的建议确实有点复杂。因此，作为替代方案，您是否考虑过使用跟踪侦听器？

如果您`Trace.Writeline`在整个应用程序中使用，那么单个跟踪侦听器将捕获所有这些消息。这样您就不必传递跟踪对象。

例如：

```
Execute(...)
{
    if(System.Diagnostics.Trace.Listeners
        .Count(l => typeof(l) == MyCustomTraceListener) == 0)
    {
        System.Diagnostics.Trace.Listeners.Add(new MyCustomTraceListener());
    }

    DoWork();
}

DoWork()
{   
    System.Diagnostics.Trace.WriteLine("I'm doing work!");
} 
```

相关链接：

[跟踪侦听器](http://msdn.microsoft.com/en-us/library/4y5y10s7.aspx)和[演练：创建自定义跟踪侦听器](http://msdn.microsoft.com/en-us/library/ff650498.aspx)

# python - 大熊猫中的重建人物传说

> ID：13886019
> 
> 赞同：6
> 
> 时间：2012-12-14T20:47:09.310
> 
> 标签：python, pandas

绘制一个图形后，我得到一个图形图例，如下所示：![在此处输入图像描述](../Images/47ca771225e6149aafc454b1f4e875cd.png)

```
DataFrame1.plot(legend=False)
patch,labels=ax.get_legend_handels_labels()
DateFrame1.legend(loc='best')
plt.show() 
```

如何删除 (Temp,2005) 中的 'Temp' ，让它变成 2005 年？

DataFrame1 有三个键：Month、Year、Temp。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T02:12:15.483

你非常接近，你只需要用这些年来更新你的传奇：

```
ax = df.plot()

years = [2005, 2007, 2008, 2009, 2011, 2012]
# you can get years from you dataframe (but without seeing the dataframe I can't say exactly how)
# legend also accepts a Series or numpy array
ax.legend(years, loc='best')
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:12:08.437

使用独特的方法来获得每个不同的年份：

```
DataFrame1.plot(legend=False)
patch,labels=ax.get_legend_handels_labels()
DateFrame1.legend(str(unique(DataFrame1['Year'].value)),loc='best')
plt.show() 
```

所以它工作正常。

# ruby-on-rails - 使用omniauth的Linkedin技能数据

> ID：13886021
> 
> 赞同：1
> 
> 时间：2012-12-14T20:47:18.657
> 
> 标签：ruby-on-rails, omniauth, linkedin

我正在尝试使用`omniauth`and获取用户的linkedin数据`omniauth-linkedin`。

对于技能，我正在获取类似的数据`#<Hashie::Mash id=16 skill=#<Hashie::Mash name="AJAX">>, #<Hashie::Mash id=17 skill=#<Hashie::Mash name="Linux">>, #<Hashie::Mash id=18 skill=#<Hashie::Mash name="Apache">>, #<Hashie::Mash id=19 skill=#<Hashie::Mash name="RSpec">>, #<Hashie::Mash id=20 skill=#<Hashie::Mash name="JSON">>...`

我有以下`omniauth.rb`

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, Settings.linkedin_key, Settings.linkedin_secret, 
           :scope => 'r_fullprofile r_emailaddress r_network', 
           :fields => ["id", "email-address", "first-name", "last-name", 
                       "headline", "industry", "picture-url", "public-profile-url", 
                       "location", "skills", "date-of-birth", "phone-numbers",        
                       "educations", "three-current-positions" ]
end 
```

对于技能**，我需要熟练**的技能，如下所示[http://developer.linkedin.com/documents/profile-fields#skills](http://developer.linkedin.com/documents/profile-fields#skills)

不知道我错过了什么。

# prolog - 初学者序言

> ID：13886022
> 
> 赞同：3
> 
> 时间：2012-12-14T20:47:20.880
> 
> 标签：prolog

我是 prolog 新手，有一个菜鸟问题：

假设我有这些代码行：

```
p(1).
p(2):-!.
p(3). 
```

我正在跑步`p(X)`。

问题：我得到`X=1 , X=2`.
为什么不`X`等于`3`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:59:16.467

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T06:17:10.290

the cut "!" is executed before p(3)... that is why it does not display X=3...

# javascript - Javascript 字段验证

> ID：13886026
> 
> 赞同：0
> 
> 时间：2012-12-14T20:47:42.653
> 
> 标签：javascript, forms

我有三个字段 ForteID、disposition 和 Cancel_Disposition。现在我的javascript中有这段代码，它可以工作：

```
function validateForteID(){
  if(document.csform.ForteID.selectedIndex==0)
  {
    alert("Please select your Forte ID.");
    document.csform.ForteID.focus();
    return false;
  }
  if(document.csform.disposition.selectedIndex==0)
  {
    alert("Please select a disposition.");
    document.csform.disposition.focus();
    return false;
  }
  if(document.csform.Cancel_Disposition.selectedIndex==0)
  {
    alert("Please select a disposition.");
    document.csform.Cancel_Disposition.focus();
    return false;
  }
  return true;
} 
```

我想要做什么但不完全确定如何去做，但如果字段 Disposition 是 LOC 或 Backout，那么我希望它执行这部分代码：

```
if(document.csform.Cancel_Disposition.selectedIndex==0)
{
  alert("Please select a disposition.");
  document.csform.Cancel_Disposition.focus();
  return false;
} 
```

但前提是处置是 LOC 或 Backout。如果我需要更多解释，请告诉我，提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:23:46.840

```
var cancel_disposition_value = document.csform.Cancel_Disposition[document.csform.Cancel_Disposition.selectedIndex].value;
if(cancel_disposition_value=='LOC' || cancel_disposition_value=='Backout')
{
    alert("Please select a disposition.");
    document.csform.Cancel_Disposition.focus();
    return false;
} 
```

# zend-form - ZF2，如何创建表单视图助手？

> ID：13886032
> 
> 赞同：2
> 
> 时间：2012-12-14T20:48:32.597
> 
> 标签：zend-form, zend-framework2

我想改变 ZF2 显示表单元素的方式。我想我必须创建自己的视图助手，但我不知道如何。我用谷歌搜索了它，但没有找到任何有用的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:50:30.567

查看[现有 Zend\Form\View\Helper* 的源代码](https://github.com/zendframework/zend-form/tree/master/src/View/Helper)

基本上你扩展了这些并覆盖了你想要修改的东西的所需功能。

之后，您需要注册自己的视图助手。这很容易在 Module.php 中完成`getViewHelperConfig()`

```
public function getViewHelperConfig() 
{
    return array(
        'invokables' => array(
            'customViewHelperCallName' => 'Namespace\Form\View\Helper\Classname'
        )
    );
} 
```

# browser - Android Web 应用程序 webview 为平板电脑和智能手机显示相同的网页

> ID：13886033
> 
> 赞同：0
> 
> 时间：2012-12-14T20:16:02.360
> 
> 标签：browser, webview

我创建了一个具有本机 webview 元素来显示网页的 web 应用程序。在我的galaxy nexus 上，东西以我期望的大小显示，一切看起来都很好。

在我的 xoom 平板电脑上安装应用程序后，所有文本和图像都以与我的智能手机上相同的比例显示，导致应用程序看起来很糟糕，文本和图像显示像素。这类似于蜂窝如何能够将智能手机大小的应用程序扩大到更大的平板电脑屏幕。一切正常，但它看起来很糟糕，因为你基本上放大了已经全尺寸的东西。

两种设备具有相同的分辨率（1280 x 800），这就是为什么它们会以相同的方式显示网页是有道理的。

有什么方法可以让更大的屏幕显示网页，从而缩小图像和文本而不是像素化（如果那是一个词）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:52:28.333

当您设置大小时，请使用 dp 而不是 px，我还会查看您的 hdpi、ldpi、mdpi 文件夹和其中的媒体

# css - 站点背景图像居中并固定？

> ID：13886034
> 
> 赞同：1
> 
> 时间：2012-12-14T20:48:38.490
> 
> 标签：css, background, position

我正在一个具有固定宽度 div 居中的网站上工作，我想在 div 的两侧有两个设计，我可以使用两个 div。问题是我这样做的方式，这些图像会增加站点宽度，如果窗口太小，会导致出现水平滚动条。即使整个内容 div 都适合屏幕。

CSS

```
.container {
    margin: 0 auto;
    width: 500px;
}

.span {
    margin-right: 0;
    width: 500px;
}

.logo {
    margin-top: 25px;
}

.logo-img {
    height: 60px;
    left: -21px;
    position: relative;
}

.swirls {
    height: 0px;
}

.left-swirls {
    position: relative;
    top: -50px;
    right: 100px;
    width: 188px;
    z-index: -1;
}

.right-swirls {
    position: relative;
    top: -50px;
    left: 215px;
    width: 200px;
    z-index: -1;
}

.nav {
    background-color: #0ff;
}

.content {
    background-color: #00f;
    height: 200px;
} 
```

HTML

```
<div class="container">
        <div class="span logo">
            <img src="http://imageshack.us/a/img839/2507/logongv.png" class="logo-img"/>
        </div>
        <div class="span swirls">
            <img src="http://imageshack.us/a/img831/3254/leftswirls.png" class="left-swirls" />
            <img src="http://imageshack.us/a/img600/7424/rightswirls.png" class="right-swirls" />
        </div>
    <div class="span last nav">
        Nav Bar
    </div>
    <div class="span content">
        Body content
    </div>
</div> 
```

可以在此处查看该问题的示例：http: [//jsfiddle.net/e4j6b/8/](http://jsfiddle.net/e4j6b/8/)

我试图让背景图像相对于 div 而不是浏览器的侧面居中。

有没有办法让背景图像居中，就像带有边距的 div：0 auto？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:16:43.617

如果您希望 .left-swirls 和 .right-swirls 不增加文档的宽度，那么它们应该是背景图像。（对于现代浏览器，多个背景图像可以正常工作。）

示例：http: [//jsfiddle.net/MbGSP/1/](http://jsfiddle.net/MbGSP/1/)

```
body {
  background: url(http://imageshack.us/a/img831/3254/leftswirls.png) center center no-repeat,
              url(http://imageshack.us/a/img600/7424/rightswirls.png) center center no-repeat;
} 
```

您可以将背景图像水平和垂直居中，`center center`用于位置。

# java - 将一组 JLabels 添加到 Java 中的单个面板？

> ID：13886036
> 
> 赞同：1
> 
> 时间：2012-12-14T20:48:52.180
> 
> 标签：java, arrays, swing, jpanel, jlabel

我有一系列 JLabels，它们似乎有效。如果我做一个 System.out.print(days[index]); 我得到了包含的实际信息，并且标签存在并且有效。

当我尝试在面板的任何索引处添加标签时，我得到一个空指针异常，我不知道为什么？

```
public class DrawCalendar extends JPanel{

private JLabel month = new JLabel("Month");
private JLabel[] days = {
    new JLabel("Sunday"),
    new JLabel("Monday"),
    new JLabel("Tuesday"),
    new JLabel("Wednesday"),
    new JLabel("Thursday"),
    new JLabel("Friday"),
    new JLabel("Saturday")
};
    private JPanel dayBoxes;
    private JPanel topLabels;

    public DrawCalendar(int month){

        topLabels.add(days[1]);  //the NullPointerException caused here
        add(topLabels);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:55:53.987

在哪里`private JPanel topLabels;`初始化？你可能想要这样的东西：

```
topLabels = new JPanel(); 
```

在您`DrawCalendar`的构造函数中，或者只是在声明行中隐式执行：

```
private JPanel topLabels = new JPanel(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:53:09.217

topLabels 尚未实例化。它是 JPanel 类型，但直到它不是 JPanel

```
 topLabels = new JPanel(); 
```

在那之前，它是空的。

# c# - 无论如何在C#中获取所有文件名没有例外？

> ID：13886037
> 
> 赞同：5
> 
> 时间：2012-12-14T20:48:56.517
> 
> 标签：c#

更新：我很高兴放弃 C# 要求，只看到任何可以列出所有以管理员或系统身份运行的文件的程序，我的问题是有人见过这样的事情吗？

枚举目录中的文件有多种方法，但都遇到相同的问题：

“指定的路径、文件名或两者都太长。完全限定文件名必须小于 260 个字符，目录名必须小于 248 个字符。”

“访问路径 'C:\Users\All Users\Application Data' 被拒绝”

等等

即使在管理员、单用户机器下运行，似乎也无法在不遇到异常\错误的情况下列出所有文件。

仅仅获取windows下所有文件的列表真的是一项不可能完成的任务吗？有没有人能够使用 C# 或任何其他方法获得他们机器上所有文件的完整列表？

[这个来自 MS](http://msdn.microsoft.com/en-us/library/dd997370.aspx)的链接，标题为“枚举目录和文件”，没有显示如何枚举目录和文件，它只显示了不会抛出的内容的一个子集：DirectoryNotFoundException、UnauthorizedAccessException、PathTooLongException、

更新：这是在 C 上运行并尝试枚举所有文件和错误的示例代码。即使以管理员身份运行它，也有一些文件夹不仅可以访问，而且我什至无法将其所有权更改为管理员！例如：“C:\Windows\CSC”

只需查看“错误 {0}.csv”日志文件，即可了解管理员无法访问的位置。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;

class Program
{

static System.IO.StreamWriter logfile;
static System.IO.StreamWriter errorfile;
static void Main(string[] args)
{
    string directory = @"C:\";

    logfile = new System.IO.StreamWriter(string.Format(@"E:\Files {0}.csv", DateTime.Now.ToString("yyyyMMddHHmm")));
    errorfile = new System.IO.StreamWriter(string.Format(@"E:\Errors {0}.csv", DateTime.Now.ToString("yyyyMMddHHmm")));
    TraverseTree(directory, OnGotFileInfo, OnGotException);

    logfile.Close();
    errorfile.Close(); 
}

public static void OnGotFileInfo(System.IO.FileInfo fileInfo)
{
    logfile.WriteLine("{0},{1},", fileInfo.FullName, fileInfo.Length.ToString("N0"));
}

public static void OnGotException(Exception ex, string info)
{
    errorfile.WriteLine("{0},{1}", ex.Message, info);
}

public static void TraverseTree(string root, Action<System.IO.FileInfo> fileAction, Action<Exception, string> errorAction)
{
    // Data structure to hold names of subfolders to be 
    // examined for files.
    Stack<string> dirs = new Stack<string>(20);

    if (!System.IO.Directory.Exists(root))
    {
        throw new ArgumentException();
    }
    dirs.Push(root);

    while (dirs.Count > 0)
    {
        string currentDir = dirs.Pop();
        string[] subDirs;
        try
        {
            subDirs = System.IO.Directory.GetDirectories(currentDir);
        }
        // An UnauthorizedAccessException exception will be thrown if we do not have 
        // discovery permission on a folder or file. It may or may not be acceptable  
        // to ignore the exception and continue enumerating the remaining files and  
        // folders. It is also possible (but unlikely) that a DirectoryNotFound exception  
        // will be raised. This will happen if currentDir has been deleted by 
        // another application or thread after our call to Directory.Exists. The  
        // choice of which exceptions to catch depends entirely on the specific task  
        // you are intending to perform and also on how much you know with certainty  
        // about the systems on which this code will run. 

        catch (System.Exception e)
        {
            errorAction(e, currentDir);
            continue;
        }

        string[] files = null;
        try
        {
            files = System.IO.Directory.GetFiles(currentDir);
        }

        catch (System.Exception e)
        {
            errorAction(e, currentDir);
            continue;
        }

        // Perform the required action on each file here. 
        // Modify this block to perform your required task. 
        foreach (string file in files)
        {
            try
            {
                // Perform whatever action is required in your scenario.
                System.IO.FileInfo fi = new System.IO.FileInfo(file);
                fileAction(fi);
            }
            catch (System.Exception e)
            {
                // If file was deleted by a separate application 
                //  or thread since the call to TraverseTree() 
                // then just continue.
                errorAction(e ,file);
                continue;
            }
        }

        // Push the subdirectories onto the stack for traversal. 
        // This could also be done before handing the files. 
        foreach (string str in subDirs)
            dirs.Push(str);
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T21:22:21.860

是的，至少很难毫无例外地枚举*所有文件。*

这里有几个问题：

*   CLR 不支持某些路径（长路径 - PathTooLongException）
*   文件夹/文件的安全限制
*   引入重复的连接/硬链接（理论上循环以在递归迭代中使用 StackOverflow）。
*   基本的共享违规限制（如果您尝试读取文件）。

对于 PathTooLongException：我认为您需要处理相应 Win32 函数的 PInvoke。CLR 中所有与路径相关的方法都限制为 256 个字符。

安全限制 - 如果您在系统下运行（不确定）或具有备份权限，您可能能够枚举所有内容，但任何其他帐户都保证无法访问默认配置的系统上的所有文件。您可以 PInvoke 本机版本并处理错误代码，而不是获取异常。您可以通过直接首先检查 ACL 来减少进入目录的异常数量。

# git - Git 分支：跟踪上游

> ID：13886042
> 
> 赞同：8
> 
> 时间：2012-12-14T20:49:13.960
> 
> 标签：git

我不知道我是否在滥用 Git，或者我是否遇到了配置问题。

我将我的 Github 存储库克隆到机器 A 和 B 上，然后在机器 AI 上执行：

```
git checkout -b branchA
// make edits
git add .
git commit -am "initial"
git push 
```

然后在机器 BI 上执行：

```
git pull
git checkout branchA
// make edits
git commit -am "edits"
git push 
```

在机器 AI 上然后执行：

```
git pull 
```

然而它说：

```
There is no tracking information for the current branch 
```

所以我必须这样做：

```
git branch --set-upstream branchA origin/branchA 
```

为什么我必须设置上游，当它最初将其推送到 origin/branchA 时没有问题？

我正在使用 msygit 1.8。在 Windows 上。

PS当我`pull`在机器B上做时，为什么`branchA`默认不跟踪新分支？`git branch`不显示它（但它与`-r`）。我可以在默认情况下跟踪所有新的远程分支吗`pull?`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T21:21:01.993

因为`git config push.default`不返回任何内容，这意味着使用“git 1.8.0.msysgit.0”，您的`git push`意思是`git push origin :`，refspec ' `:`' 代表“匹配”分支。

在这里，它在远程端创建匹配`branchA`。

但这并不能使它成为一个远程跟踪分支。
换句话说，`branch.branchA.merge`没有设置任何东西。
这就是 git pull 失败的原因：它不知道应该合并到哪个远程分支到 local `branchA`。

* * *

请注意，您的第一个`git push`应该显示以下消息：

```
warning: push.default is unset; its implicit value is changing in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the current behavior after the default changes, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11\. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git) 
```

所以，对于 Git2.0，那个 git push 会失败。
推送的唯一方法`branchA`是明确设置其上游分支（使用相同的名称）：

```
git push -u origin branchA 
```

# javascript - 长工具提示需要更好的可维护性

> ID：13886044
> 
> 赞同：-1
> 
> 时间：2012-12-14T20:49:21.397
> 
> 标签：javascript, jquery, html, css

我一直在使用 HTML `title`attr + *jquery-cluetip*插件作为工具提示。但是，有时我的工具提示包含几个句子，这会导致很长的`title`attr 和 html 标记。这与我的编码风格冲突。为了更好的可维护性，我倾向于组织我的代码以避免尽可能多的水平滚动。

请建议其他处理长工具提示的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:53:17.867

我完成它的一种方法是添加一个带有工具提示类的跨度标签。在父元素的悬停上，您可以使其显示。一件好事是它可以在 CSS 中完成，而且格式通常更简单。

这是一个早期答案的链接，它给出了我正在谈论的一个例子。这里有两个 span 标签。一个用作链接，另一个用作工具提示。 [https://stackoverflow.com/a/4441477/379650](https://stackoverflow.com/a/4441477/379650)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:57:38.310

水平滚动是什么意思？在代码中滚动还是在浏览器中滚动？

如果您的意思是水平浏览器滚动，您可以使用`max-width`

# objective-c - NSAlert+Blocks - 需要帮助设置新的扩展

> ID：13886049
> 
> 赞同：0
> 
> 时间：2012-12-14T20:49:51.340
> 
> 标签：objective-c, macos, objective-c-blocks, objective-c-category

我正在尝试使用块进行 NSAlert。（我希望添加的最后一个按钮是取消按钮......见下文）当我尝试在我的代码中调用它时，我收到一条错误消息，指出正在向类发送无法识别的选择器。我是否不正确地设置了我的扩展程序？

这是我的电话：

```
[NSAlert showSheetModalForWindow:self.window
                              WithTitle:@"Allow Sync"
                                 message:message
                      informativeText:@"Data entered into Easy Spend Log will be shared."
                             alertStyle:NSWarningAlertStyle
                    cancelButtonTitle:@"Don't Allow"
                    otherButtonTitles:@[@"Allow",@"Always Allow"]
                              onDismiss:^(int buttonIndex)  {
                            if (buttonIndex == 0)
                                [self.syncEngine allowSync:YES alwaysAllow:NO forConnection:connection];
                            else
                                [self.syncEngine allowSync:YES alwaysAllow:YES forConnection:connection];
                        }
                                onCancel:^ {
                            [self.syncEngine allowSync:NO alwaysAllow:NO forConnection:connection];
                        }]; 
```

NSAlert+Blocks.h

```
#import <Foundation/Foundation.h>

typedef void (^DismissBlock)(int buttonIndex);
typedef void (^CancelBlock)();

@interface NSAlert (Blocks)

+ (NSAlert*)    showSheetModalForWindow:(NSWindow*) window
                                    WithTitle:(NSString*) title
                                      message:(NSString*) message
                            informativeText:(NSString*) text
                                  alertStyle:(NSAlertStyle) style
                         cancelButtonTitle:(NSString*) cancelButtonTitle
                         otherButtonTitles:(NSArray*) otherButtons
                                    onDismiss:(DismissBlock) dismissed
                                     onCancel:(CancelBlock) cancelled;

@end 
```

NSAlert+Blocks.m

```
#import "NSAlert+Blocks.h"

static DismissBlock _dismissBlock;
static CancelBlock _cancelBlock;

@implementation NSAlert (Blocks)

+ (NSAlert*) showSheetModalForWindow:(NSWindow*) window
                                WithTitle:(NSString*) title
                                  message:(NSString*) message
                        informativeText:(NSString*) text
                              alertStyle:(NSAlertStyle) style
                     cancelButtonTitle:(NSString*) cancelButtonTitle
                     otherButtonTitles:(NSArray*) otherButtons
                                onDismiss:(DismissBlock) dismissed
                                 onCancel:(CancelBlock) cancelled {

_cancelBlock  = [cancelled copy];
_dismissBlock  = [dismissed copy];

NSAlert *alert = [[NSAlert alloc] init];
[alert setMessageText:message];
[alert setInformativeText:text];
[alert setAlertStyle:style];

for(NSString *buttonTitle in otherButtons)
    [alert addButtonWithTitle:buttonTitle];

[alert addButtonWithTitle:cancelButtonTitle];

[alert beginSheetModalForWindow:window modalDelegate:self didEndSelector:@selector(alertDidEnd:returnCode:contextInfo:)];
return alert;
}

+ (void)alertDidEnd:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo {

if(returnCode == [alert [buttons count]-1])
{
    _cancelBlock();
}
else
{
    _dismissBlock(returnCode - 1); // cancel button is button 0
}
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:49:42.043

一旦我设置了一个测试项目，问题就变得很明显。对类别 .m 文件中的警报的调用是错误的。

我已将工作代码发布到 github 上。[https://github.com/AaronBratcher/NSAlert-Blocks](https://github.com/AaronBratcher/NSAlert-Blocks)

# .net - 共享成员的每个会话服务中的 wcf 实例化行为

> ID：13886052
> 
> 赞同：1
> 
> 时间：2012-12-14T20:50:12.837
> 
> 标签：.net, wcf, iis, instance

这是我的场景：我有一个托管在 IIS 中的 wcf 服务。wcf 服务由两个主要类组成：MyWcf 和 MyClass。MyWcf 由所有服务端点组成：

```
<ServiceContract(SessionMode:=SessionMode.Allowed)> Public Interface IMyWcf
    <OperationContract()> Function GetListing As DataTable
End Interface
<ServiceBehavior(InstanceContextMode:=InstanceContextMode.PerSession, ConcurrencyMode:=ConcurrencyMode.Multiple)> Public Class MyWcf
    Implements IMyWcf
    Public Function GetListing As DataTable Implements IMyWcf.GetListing
        Return MyClass.GetSomeDataTable
    End Function
End Class 
```

MyClass 包含所有共享成员

```
Friend Class MyClass
    Friend Shared Function GetSomeDataTable As DataTable
        'some code
    End Function
End Class 
```

我要确定的是：通过这种设置，如果两个客户端同时调用 GetListing 函数，它们是使用相同的 GetSomeDataTable 函数实例（因为该函数是共享的）还是两个客户端都结束了获取 GetSomeDataTable 函数的不同/唯一实例（以及 MyClass 中的所有其他共享成员）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:13:38.887

[开发 WCF 应用程序的技术](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx#S2)

Windows Communication Foundation 可以维护客户端和特定服务实例之间的私有会话。当客户端为配置为会话感知的服务创建新代理时，客户端会获得一个新的专用服务实例，该服务实例独立于同一服务的所有其他实例。

# c# - 如何在不使用安装程序的情况下在 Windows 8 开始屏幕上放置桌面应用程序快捷方式？

> ID：13886054
> 
> 赞同：2
> 
> 时间：2012-12-14T20:50:18.417
> 
> 标签：c#, windows-8

我的桌面应用程序只是一个 exe 文件。由于一些不重要的原因，我无法使用会在 Windows 8 开始屏幕中添加图标的安装程序。可以用 C# 以编程方式添加吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:11:49.757

如果你右键单击exe，你可以点击pin-to start ![固定开始](../Images/a0ebbbbc10a66230fb09632fc1e96c30.png)

这适用于我在图像中的示例，它是一个独立的 exe，没有任何类型的安装。然后它将出现在开始栏上。![在此处输入图像描述](../Images/34b18354a436e6b567dd694d6738673d.png)

希望这可以帮助。

**编辑**：之后我意识到你以编程方式说。看起来开始页面的链接放在 C:\Users[UserName]\AppData\Roaming\Microsoft\Windows\Start Menu\Programs![在此处输入图像描述](../Images/0dd469c88387983eab16094a83a20d69.png) 所以也许你可以告诉它在那里存放一个快捷方式？

**编辑 2** 这个先前的问题也可能有帮助：[在目录中创建应用程序快捷方式](https://stackoverflow.com/questions/234231/creating-application-shortcut-in-a-directory)。它在 C# 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:24:32.407

查看[用于启用桌面通知的代码示例](http://msdn.microsoft.com/en-us/library/windows/desktop/hh802762%28v=vs.85%29.aspx)，其先决条件是存在安装到“开始”屏幕的快捷方式。该示例是带有 COM 的 C++，但您应该能够将这个小部分合并到 C# 应用程序中（或直接在 C# 中重写示例代码）。

# android - 如何在android应用程序中导出数据库

> ID：13886061
> 
> 赞同：0
> 
> 时间：2012-12-14T20:51:05.503
> 
> 标签：android, sqlite

我已经创建了一个数据库 android 应用程序，它在模拟器上正常工作，但是当我将它传输到我的设备时，它说表不存在，我使用了 'openOrCreateDatabase()' 方法，数据库没有附带 apk 文件，当我运行 ap，我的数据库是只读的，这意味着我已经有很多数据了，只需要查看它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:12:22.900

您的 apk 文件中的内容（例如资产）是只读的，因此您不能将其用作实时数据库。如果您在 sqlite 数据库中已有数据，则必须将数据复制到实时数据库中。另一方面，如果您有其他格式（例如 csv），则必须创建一个阅读器，将其添加到您的实时数据库中。

# ms-word - Word 2010 加载项针对 .net 4.5 框架？

> ID：13886062
> 
> 赞同：0
> 
> 时间：2012-12-14T20:51:07.697
> 
> 标签：ms-word, visual-studio-2012, .net-4.5

我正在使用现有的 word 2010 插件项目升级到 VS 2012。

当我尝试将项目更改为针对 .net 4.5 进行编译时，出现以下错误：“此项目类型不支持您选择的 .NET Framework 版本。”

是否有适用于 .net 4.5 的新 vs 2010 插件模板？不支持这种情况吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:51:24.523

Word 2010 加载项仅支持 .net 4.0。

[http://social.msdn.microsoft.com/Forums/pl-PL/vsto/thread/14a645f3-4ecd-4815-9fdd-eb2756b70945](http://social.msdn.microsoft.com/Forums/pl-PL/vsto/thread/14a645f3-4ecd-4815-9fdd-eb2756b70945)

# php - 按 3 个表的不同行数排序？

> ID：13886066
> 
> 赞同：0
> 
> 时间：2012-12-14T20:51:38.657
> 
> 标签：php, mysql

我有 3 张桌子 - `News, Content and Edits`。

每个表中的每一行都包含一个`user_id`字段。

我想做的是列出这 3 个表的主要贡献者。

所以我需要计算`user_id`每个表中每个不同出现的次数，并从最高计数到最低计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:54:50.453

像这样：

```
SELECT 
    user_id,
    COUNT(*) AS all_actions 
FROM (
    SELECT user_id FROM News
    UNION ALL
    SELECT user_id FROM Content
    UNION ALL
    SELECT user_id FROM Edits
) tmp_table
GROUP BY user_id
ORDER BY all_actions DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:56:00.837

这应该这样做。

```
SELECT all_user_ids.user_id as `user_id`, COUNT(all_user_ids.user_id) as `count`
FROM
(SELECT user_id FROM news
UNION ALL
SELECT user_id FROM content
UNION ALL
SELECT user_id FROM edits) AS all_user_ids
GROUP BY `user_id`
ORDER BY `count` DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:57:03.713

这将是每个表的实例

```
SELECT DISTINCT(COUNT(user_id)) as num FROM news GROUP BY user_id ORDER BY num DESC LIMIT 0,3 
```

# core-data - 在核心数据实用程序教程中未调用 setNilValueForKey

> ID：13886070
> 
> 赞同：1
> 
> 时间：2012-12-14T20:51:57.120
> 
> 标签：core-data, key-value, key-value-coding

Apple 的[Core Data Utility Tutorial](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreDataUtilityTutorial/Articles/06_runClass.html)建议实施`setNilValueForKey:`和测试其效果：

> 使用键值编码将进程 ID 设置为 nil。构建并运行该实用程序。再次，会发生什么？最后，注释掉 setNilValueForKey: 方法并再次测试。

我尝试使用此代码将进程 ID 设置为 nil：`[run setValue:nil forKey:@"processID"];`但这不会调用`setNilValueForKey:`. 为什么不？

这是我的实现；我添加的 NSLog 语句从未出现。

```
- (void) setNilValueForKey:(NSString*)key {
    NSLog(@"setNilValueForKey: %@",  key) ;
    if ( [key isEqualToString:@"processID"] ) {
        [self setValue:@0  forKey:key ] ;
    }
    else {
        [super setNilValueForKey:key] ;
    }
} 
```

我发现了[类似的 stackoverflow 讨论](https://stackoverflow.com/questions/12392142/what-values-am-i-supposed-to-be-getting-from-apples-core-data-utility-tutorial)，但没有人回答这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T13:26:49.283

`setNilValueForKey:`如果使用动态生成的访问器方法，似乎永远不会调用它。

如果您为“Run.m”中的“processID”属性提供自定义设置方法：

```
- (void)setProcessID:(NSInteger)processID
{
    [self willChangeValueForKey:@"processID"];
    [self setPrimitiveValue:@(processID) forKey:@"processID"];
    [self didChangeValueForKey:@"processID"];
} 
```

然后

```
[run setValue:nil forKey:@"processID"] 
```

导致`setNilValueForKey:`被调用。

这只是我通过尝试和错误所经历的，我没有官方参考。但是“核心数据实用程序教程”自 Mac OS X 10.4 以来就存在，其中动态生成的访问器方法（据我所知）尚不存在。所以*可能*是关于`setNilValueForKey:`10.5 未更新的部分。但这纯粹是我的猜测。

# sql - Ruby on rails 转换为 sql 查询

> ID：13886073
> 
> 赞同：0
> 
> 时间：2012-12-14T20:52:08.133
> 
> 标签：sql, ruby-on-rails, ruby, database

我做了第一个，想检查我是否做对了？我也不知道如何做 2 号 Ruby ORM 考虑以下两个在“客户”和“订单”表上的活动记录定义。orders 表有一个外键“cust_key”，它引用了“customers”的主键，也称为“cust_key”。

```
Table:
customers-
          cust_key
          address

orders-
          order key
          cust_key
          order_priority
          total_price

1 class Customer < ActiveRecord::Base
2 set_table_name "customers"
3 set_primary_key "cust_key"
4 has_many :orders, :foreign_key => "cust_key”
5 End

1 class Order < ActiveRecord::Base
2 set_table_name "orders"
3 belongs_to :customer, :foreign_key => "cust_key"
4 set_primary_key "order_key”
5 end

Consider the following piece of Ruby-on-Rails code.
1 <table>
2 <% Customers.all.each.do |c| %>
3 <tr>
4 <td><%= c.address %></td>
5 <td><%= c.orders.count() %></td>
6 </tr>
7 <% end %>
8 </table> 
```

问题：

1.  提供执行这段 Ruby-on-Rails 所产生的 SQL 查询。总共将执行多少个 SQL 查询？

2 查询
SELECT address FROM customers

```
 SELECT COUNT(*) FROM orders where orders.cust_key= customers.cust_key; 
```

1.  编写一个 jsp 片段，它只发出一个 SQL 查询并创建与上面的 Ruby-on-Rails 片段相同的 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T09:41:12.170

我知道这是一个老问题，你可能已经忘记了，但是......如果你改变：

```
<% Customers.all.each.do |c| %>
  <tr>
    <td><%= c.address %></td>
    <td><%= c.orders.count() %></td>
  </tr>
<% end %> 
```

至

```
<% Customers.includes(:orders).each.do |c| %>
  <tr>
    <td><%= c.address %></td>
    <td><%= c.orders.length %></td>
  </tr>
<% end %> 
```

您将在一次 SQL 调用中显示客户信息。

*包含*方法，更改请求，以便它使用带有连接的单个查询，以收集所有客户及其相应的订单记录

请注意，我使用了长度而不是计数，因为 count 将为每个客户 (c) 对象调用 SQL 计数，而 length 将查看在第一个 SQL 调用中已经收集的订单数据的长度。

# jquery - 如何在 jQuery DataTables 中的搜索框附近放置一个 columnFilter

> ID：13886077
> 
> 赞同：1
> 
> 时间：2012-12-14T20:52:20.823
> 
> 标签：jquery, datatables

有没有办法将 columnFilter 放置在 jQuery DataTables 中的搜索框附近？以及如何为此 columnFilter 下拉列表添加标签？

下面的代码将过滤器放在标题上：

```
$('#example').dataTable({
   "bJQueryUI": true
}).columnFilter({
   sPlaceHolder: "head:before",
   aoColumns: [null, { type: "select" }, null, null, null]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:10:32.273

一开始作者说这个datatable插件不支持把filter放到其他位置，但是最后我发现[这个](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/external.html)可以满足你可以把filter放到其他位置的需求。

# image-processing - 在 OpenCV 中使用 Hough 检测接近圆形的形状

> ID：13886079
> 
> 赞同：4
> 
> 时间：2012-12-14T20:52:33.227
> 
> 标签：image-processing, opencv, geometry, detect, hough-transform

我仍然是 OpenCV 的初学者，我正在尝试使用具有以下参数的 HoughCircles 检测圆圈：

```
HoughCircles(gray, circles, CV_HOUGH_GRADIENT,2, gray.rows/8, 200, 90, 0, 130 ); 
```

但是，`HoughCircles`没有检测与圆形非常相似的形状，如下图所示。

您对如何解决此类问题有想法吗？

先感谢您。

![在此处输入图像描述](../Images/844095db75944f225e7931594df06cd0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:22:23.357

霍夫用于寻找接近完美的圆。它对孔洞和噪声具有鲁棒性，但对变形不鲁棒。

您可能想尝试找到衡量“圆形相似度”的方法。您可以通过比较长度与表面来分析轮廓。如果它接近 pi，你就知道你有一个圆形。

# mysql - 制作一个在mysql中保存更新日志的表

> ID：13886080
> 
> 赞同：0
> 
> 时间：2012-12-14T20:52:34.040
> 
> 标签：mysql, updating

我想制作一个表格，每天跟踪一个单独的更新表格。例如，我目前有一个跟踪库存的表格，我想每天运行一次报告，提供诸如添加了多少新商品、售出多少商品等信息，并有每个查询在表中存储为单独的列。这可能吗？我已经进行了一些研究，试图找到解决方案，但还没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:03:02.000

*   方式1：使用数据库触发器，它可以在您插入/更新/删除一行时发出事件，

*   方式2：在您的代码中，如java，在内存计数器中跟踪插入/删除事件（您可以使用spring aop来检测事件，并使用内存或memcache来保存数字），并使用预定程序编写数据到一个表，并每天重置它们，（在java中，jdk提供了那里的类，或者你可以使用quartz框架），

# sql - sql查询根据给定的时间范围选择组内的第一次出现

> ID：13886081
> 
> 赞同：0
> 
> 时间：2012-12-14T20:52:38.047
> 
> 标签：sql, tsql

> **可能重复：**
> [如何按小时或按 10 分钟分组时间](https://stackoverflow.com/questions/5002661/how-to-group-time-by-hour-or-by-10-minutes)

随着 MSSQL 得到这个结果：

![在此处输入图像描述](../Images/b1bdf592939747bf7a993e42997e0f01.png)

从以下查询：

```
SELECT [DATESTAMP],[ZONE],[ALARM] 
FROM [UNIT].[dbo].[LOG] 
WHERE [DATESTAMP] BETWEEN @StartDate AND @EndDate 
    AND [ALARM] ='ERROR' 
    AND [ZONE] IN ('BOX 11','BOX 12') 
ORDER BY DATESTAMP DESC 
```

我将如何更改查询以仅获取行 2,5,9,13,17,19,20 ？

这意味着我只想要跨越大约 1 分钟的组中的第一行（最旧的）。在该组内，而不会出现比 15 分钟更频繁的错误，Freewheelin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:50:40.763

结束了：

```
SELECT  MIN([DATESTAMP]) as FirstOccurance FROM ....
WHERE ....
....
GROUP BY DATEPART(minute, [DATESTAMP])
ORDER BY FirstOccurance DESC 
```

-再次感谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:11:59.190

如果我理解你，你想要每个特定分钟的最早条目，对吗？如果是这样，试试这个：

```
SELECT
    DateStamp,
    ZONE,
    Alarm
FROM
    [UNIT].[dbo].[LOG]  
    JOIN 
    (   SELECT 
            DateMinute = DATEADD(second, -DATEPART(second, DateStamp), DateStamp),
            Earliest = MIN(DateStamp)
        FROM
            [UNIT].[dbo].[LOG]  
        GROUP BY
            DATEADD(second, -DATEPART(second, DateStamp), DateStamp)
    ) X ON [UNIT].[dbo].[LOG].DateStamp = X.Earliest 
```

# app-store-connect - iTunes Connect 批量上传多种语言的屏幕截图

> ID：13886086
> 
> 赞同：11
> 
> 时间：2012-12-14T20:53:26.590
> 
> 标签：app-store-connect

我的应用程序有更新，我必须上传新的屏幕截图。仅一种语言就需要很长时间，但我有 8 种语言，并且需要我手动上传每种语言的新屏幕截图。

有什么办法可以批量处理吗？有什么实用工具吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-09T21:43:05.500

Checkout Deliver ( [http://github.com/krausefx/deliver](http://github.com/krausefx/deliver) )，它允许您从命令行上传所有设备的不同语言的屏幕截图。

它使用`itmstransporter`引擎盖下：[https ://github.com/KrauseFx/deliver/blob/master/lib/deliver/itunes_transporter.rb](https://github.com/KrauseFx/deliver/blob/master/lib/deliver/itunes_transporter.rb)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T14:15:26.233

Would like to know about such batch uploader too!

My ways for speeding up the upload:

1.  open the pages with different languages in several tabs or browsers and uploading them in parallel (may be it is better to create several copies of folders with screenshots, so that every tab will turn to its own folder, because it seems like uploading blocks the folder

2.  if you are uploading the same! screenshots to the different languages, you'd better upload them for one language, and then use the "Activate new language" procedure. In this case your previously uploaded screenshots from the default localization will be copied.

# objective-c - UITableView 动态内容不会出现

> ID：13886089
> 
> 赞同：3
> 
> 时间：2012-12-14T20:53:38.730
> 
> 标签：objective-c, ios, uitableview, uiviewcontroller

我将 a 嵌入`UITableView`到子类`UIViewController`中。这`UITableView`使用带有图像和文本的单个动态原型，这两者都可以根据加载到其中的内容而有所不同。我遇到的问题是绝对没有`UITableView`出现在 subclassed 上`UIViewController`。`UITableView`本身似乎没有出现。

我在子类中创建了一个`IBOutlet`，如下所示：`UITableView``UIViewController`

```
@property (weak, nonatomic) IBOutlet UITableView *functionTableView; 
```

正确链接回`UITableView`.

在`viewDidLoad`父级的方法中，`UIViewController`我有以下代码：

```
self.functionTableView.delegate = self;
self.functionTableView.dataSource = self;
[self.functionTableView reloadData]; 
```

我也为班级声明了代表。我正在使用的数据源目前是一个`NSMutableArray`包含数据的对象。我已经实现了`UITableViewDataSource`和`UITableViewDelegate`方法如下：

```
#pragma mark - Table view data source delegate

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSLog(@"tableView:numberofRowsInSection %u", [[EmulatorModel sharedEmulatorModel].currentFunctionBank count]);
    return [[EmulatorModel sharedEmulatorModel].currentFunctionBank count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Updating Cell %d", indexPath.row);
    NSLog(@"For Function %@", [EmulatorModel sharedEmulatorModel].currentFunctionBank[indexPath.row]);
    static NSString *CellIdentifier = @"FunctionCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    LivioFunction *func = nil;
    if ([EmulatorModel sharedEmulatorModel].currentFunctionBank[indexPath.row] != [NSNull null]) {
        func = [EmulatorModel sharedEmulatorModel].currentFunctionBank[indexPath.row];
        NSLog(@"Cell Text: %@", func.label);
        cell.textLabel.text = func.label;
        NSLog(@"Cell Image %@", func.artwork);
        cell.imageView.image = func.artwork;
    } else {
        cell.textLabel.text = @" ";
        cell.imageView.image = [UIImage imageNamed:@"HD_fav.png"];
    }

    NSLog(@"cell: %@", cell);

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Table view row selected: %d", indexPath.row);
    if ([EmulatorModel sharedEmulatorModel].currentFunctionBank[indexPath.row]) {
        id fn = nil;
        fn = ([EmulatorModel sharedEmulatorModel].currentFunctionBank)[indexPath.row];

        if (fn && [fn isKindOfClass:[LivioFunction class]]) {
            LivioFunction *function = (LivioFunction*)fn;
            if (function.functionID == indexPath.row && function.type == LVCFunctionTypeMenu) {
                [self resetButtonImages];
                [self resetButtonLabels];
            }
        }

        [LivioConnectLib sendUserSelect:indexPath.row inputType:LVCInputTypeFunction];
    }
} 
```

`NSLog's`正在吐出正确的数据，而我在其中使用的重新加载数据导致`viewDidLoad`数据源`delegate`方法被调用。所以我在第一次尝试 iOS UI 时感到困惑和沮丧。想法？

**编辑：**请求 lldb 调试器输出到`po [[UIApp keyWindow] recursiveDescription]`

```
(id) $0 = 0x0018c7d0 <UIWindow: 0xde9e830; frame = (0 0; 768 1024); layer = <UIWindowLayer: 0xde9a9d0>>
| <UILayoutContainerView: 0xde9fa30; frame = (0 0; 768 1024); transform = [0, -1, 1, 0, 0, 0]; autoresize = W+H; layer = <CALayer: 0xde9fab0>>
|    | <UINavigationTransitionView: 0xde9fdc0; frame = (0 0; 1024 768); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0xde9fe40>>
|    |    | <UIViewControllerWrapperView: 0x182430; frame = (0 64; 1024 704); autoresize = RM+BM; layer = <CALayer: 0x17f4e0>>
|    |    |    | <UIView: 0xdedf2c0; frame = (0 0; 1024 704); autoresize = RM+BM; layer = <CALayer: 0xdedf2f0>>
|    |    |    |    | <UIImageView: 0xdedf320; frame = (0 0; 1024 704); autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xdedf360>>
|    |    |    |    | <AutoScrollLabel: 0xdedecd0; baseClass = UIScrollView; frame = (433 386; 366 48); text = 'Livio Emulator'; clipsToBounds = YES; autoresize = RM; userInteractionEnabled = NO; layer = <CALayer: 0xdedeb80>; contentOffset: {0, 0}>
|    |    |    |    |    | <UILabel: 0xdedef20; frame = (81.5 5; 203 38); text = 'Livio Emulator'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0xdedef90>>
|    |    |    |    |    | <UILabel: 0xdedefc0; frame = (283 5; 203 38); text = 'Livio Emulator'; clipsToBounds = YES; hidden = YES; userInteractionEnabled = NO; layer = <CALayer: 0xdedf110>>
|    |    |    |    |    | <UILabel: 0xdedf140; frame = (566 5; 203 38); text = 'Livio Emulator'; clipsToBounds = YES; hidden = YES; userInteractionEnabled = NO; layer = <CALayer: 0xdedf290>>
|    |    |    |    | <UIImageView: 0xdedd820; frame = (733 169; 67 25); autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xdedd640>>
|    |    |    |    | <UIImageView: 0xdeddb90; frame = (524 200; 175 178); autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xdedd700>>
|    |    |    |    | <UILabel: 0xdedf1b0; frame = (432 431; 368 27); text = 'Connect an app '; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xdedc440>>
|    |    |    |    | <UIButton: 0xdede910; frame = (57 169; 100 52); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0xdede9a0>>
|    |    |    |    |    | <UIButtonLabel: 0xdedeab0; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xdedeb20>>
|    |    |    |    | <UIButton: 0xdede070; frame = (57 229; 100 50); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0xdede000>>
|    |    |    |    |    | <UIButtonLabel: 0xdede100; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xdede030>>
|    |    |    |    | <UIButton: 0xdedf3e0; frame = (325 455; 368 38); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0xdedf4d0>>
|    |    |    |    |    | <UIButtonLabel: 0xdedf590; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xdedf600>>
|    |    |    |    | <UIButton: 0xdedf650; frame = (325 487; 368 34); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0xdedf780>>
|    |    |    |    |    | <UIButtonLabel: 0xdedf7f0; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xdedf860>>
|    |    |    |    | <UITableView: 0xe97d800; frame = (226 164; 276 338); clipsToBounds = YES; alpha = 0; opaque = NO; autoresize = W+H; layer = <CALayer: 0xdede2c0>; contentOffset: {0, 0}>
|    |    |    |    |    | <UITableViewCell: 0xdedfbc0; frame = (0 308; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0xdedf090>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0xdedfcc0; frame = (0 0; 276 43); layer = <CALayer: 0xdedf0c0>>
|    |    |    |    |    |    |    | <UIImageView: 0xdedfd00; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0xdedfd40>>
|    |    |    |    |    |    |    | <UILabel: 0xdee01b0; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0xdee0220>>
|    |    |    |    |    |    | <UIView: 0xdedfdc0; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xdedfdf0>>
|    |    |    |    |    | <UITableViewCell: 0x197220; frame = (0 264; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0x197320>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0x196b50; frame = (0 0; 276 43); layer = <CALayer: 0x196b90>>
|    |    |    |    |    |    |    | <UIImageView: 0x196bc0; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0x19b0d0>>
|    |    |    |    |    |    |    | <UILabel: 0x19cf90; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0x19d000>>
|    |    |    |    |    |    | <UIView: 0xdeddf90; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xdeddfc0>>
|    |    |    |    |    | <UITableViewCell: 0xdedd100; frame = (0 220; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0xdedd200>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0xdedd060; frame = (0 0; 276 43); layer = <CALayer: 0xdedd230>>
|    |    |    |    |    |    |    | <UIImageView: 0xdedd260; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0xdedd2a0>>
|    |    |    |    |    |    |    | <UILabel: 0xdeddc40; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0xdeddcf0>>
|    |    |    |    |    |    | <UIView: 0xdedf060; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xdeddf60>>
|    |    |    |    |    | <UITableViewCell: 0xdedcd70; frame = (0 176; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0xdea80d0>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0xdedd5a0; frame = (0 0; 276 43); layer = <CALayer: 0xdedd750>>
|    |    |    |    |    |    |    | <UIImageView: 0xdedf9b0; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0xdedd780>>
|    |    |    |    |    |    |    | <UILabel: 0xdedbdc0; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0xded9e10>>
|    |    |    |    |    |    | <UIView: 0xdedd0d0; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xdedf030>>
|    |    |    |    |    | <UITableViewCell: 0x19fc80; frame = (0 132; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0x19fd80>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0x18f4b0; frame = (0 0; 276 43); layer = <CALayer: 0x19d680>>
|    |    |    |    |    |    |    | <UIImageView: 0x191b20; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0x19d6b0>>
|    |    |    |    |    |    |    | <UILabel: 0x1934b0; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0x1975e0>>
|    |    |    |    |    |    | <UIView: 0xdedfa20; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xdedd0a0>>
|    |    |    |    |    | <UITableViewCell: 0x1931b0; frame = (0 88; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0x18ec60>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0x199550; frame = (0 0; 276 43); layer = <CALayer: 0x18cb70>>
|    |    |    |    |    |    |    | <UIImageView: 0x18c6a0; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0x189a90>>
|    |    |    |    |    |    |    | <UILabel: 0x198fe0; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0x197960>>
|    |    |    |    |    |    | <UIView: 0xdeddcb0; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xdedf720>>
|    |    |    |    |    | <UITableViewCell: 0xde73230; frame = (0 44; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0xdeb92e0>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0xdedc070; frame = (0 0; 276 43); layer = <CALayer: 0xdedc560>>
|    |    |    |    |    |    |    | <UIImageView: 0xdedd7e0; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0xdedda50>>
|    |    |    |    |    |    |    | <UILabel: 0xdeddaa0; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0xde9fc80>>
|    |    |    |    |    |    | <UIView: 0xdeddd60; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xdee02c0>>
|    |    |    |    |    | <UITableViewCell: 0x1a03e0; frame = (0 0; 276 44); text = ' '; autoresize = W; layer = <CALayer: 0x190eb0>>
|    |    |    |    |    |    | <UITableViewCellContentView: 0x197a40; frame = (0 0; 276 43); layer = <CALayer: 0x197ac0>>
|    |    |    |    |    |    |    | <UIImageView: 0x19f440; frame = (0 0; 43 43); clipsToBounds = YES; opaque = NO; layer = <CALayer: 0x185c30>>
|    |    |    |    |    |    |    | <UILabel: 0xdeda920; frame = (53 0; 213 43); text = ' '; clipsToBounds = YES; layer = <CALayer: 0xdeb8d80>>
|    |    |    |    |    |    | <UIView: 0xdedb8b0; frame = (0 43; 276 1); autoresize = W+TM; layer = <CALayer: 0xded9de0>>
|    |    |    |    |    | <UIImageView: 0xdede5d0; frame = (271 287; 5 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0xdedd530>>
|    | <UINavigationBar: 0xde9bab0; frame = (0 20; 1024 44); clipsToBounds = YES; opaque = NO; autoresize = W; layer = <CALayer: 0xde9bbe0>>
|    |    | <UINavigationBarBackground: 0xde9d750; frame = (0 0; 1024 44); opaque = NO; autoresize = W; userInteractionEnabled = NO; layer = <CALayer: 0xde9d7e0>>
|    |    | <UINavigationItemView: 0x186830; frame = (512 21; 0 0); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x18c3a0>>
|    |    | <UINavigationItemButtonView: 0x190cf0; frame = (7 7; 104 30); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x196840>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:13:32.233

从 lldb 调试器输出：`alpha`您的`UITableView`为 0。

`<UITableView: 0xe97d800; frame = (226 164; 276 338); clipsToBounds = YES; alpha = 0; opaque = NO; autoresize = W+H; layer = <CALayer: 0xdede2c0>; contentOffset: {0, 0}>`

# mysql - 查询不再适用于 MySQL 5

> ID：13886090
> 
> 赞同：1
> 
> 时间：2012-12-14T20:53:44.133
> 
> 标签：mysql, database, mysql5

```
SELECT xp.productid, xp.product, xc.classid, xiW.date, xco.optionid, xco.option_name, xiW.id, xiW.image_path, xiW.path_on_server
    FROM xcart_products xp
    INNER JOIN xcart_variants xv ON xp.productid = xv.productid
    INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
    INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
    INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
    LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid
    GROUP BY xco.optionid
    ORDER by xp.product ASC 
```

我收到错误说明：xp.productid 不在 GROUP BY 中

然后我添加它并得到 xp.product is not in GROUP BY

我添加它并得到 xc.classid 不在 GROUP BY 中

我添加了它并一直向下走 -

```
SELECT xp.productid, xp.product, xc.classid, xiW.date, xco.optionid, xco.option_name, xiW.id, xiW.image_path, xiW.path_on_server
    FROM xcart_products xp
    INNER JOIN xcart_variants xv ON xp.productid = xv.productid
    INNER JOIN xcart_variant_items xvi ON xv.variantid = xvi.variantid
    INNER JOIN xcart_class_options xco ON xvi.optionid = xco.optionid
    INNER JOIN xcart_classes xc ON xco.classid = xc.classid AND xc.class = 'COLOR'
    LEFT JOIN xcart_images_W xiW ON xiW.id = xvi.variantid
    GROUP BY xco.optionid, xp.productid, xp.product, xc.classid, xiW.date, xco.option_name, xiW.id, xiW.image_path, xiW.path_on_server
    ORDER by xp.product ASC 
```

这不可能是正确的吧？它确实可以运行，但我认为 GROUP BY 在 MySQL 5 中的处理方式与 MySQL 4 中的处理方式略有不同，或者我的查询在四个中几乎没有功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:07:52.037

显然您已启用[ONLY_FULL_GROUP_BY](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_only_full_group_by)模式

只需禁用它，您就可以再次对这个出色的 mysql 扩展感到满意`GROUP_BY`

# ads - 是否可以在 Google News App 中添加广告

> ID：13886097
> 
> 赞同：-1
> 
> 时间：2012-12-14T20:54:16.527
> 
> 标签：ads, smartphone, google-news

我用 Google News API 实现了智能手机应用程序。我想知道是否可以（我的意思是合法）在这些应用程序上添加广告？

我使用了 RSS 提要（API 已弃用）。在这个[链接](http://support.google.com/news/bin/news/bin/answer.py?hl=en&hlrm=fr&answer=40796)中它说：“我们邀请您对 Google 的 RSS 提要进行非商业用途”，但我不确定是否能找到一个好的非商业定义。它必须是无广告的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:58:15.303

非商业意味着您可以将其用于个人用途而非商业用途。在您的供稿中显示广告很可能构成非个人用途。毕竟：您想展示广告以便赚钱。那是一门生意。

我也可以很容易地想象，在公司网站或在提要旁边显示广告的个人网站上显示 RSS 提要也被解释为商业用途。

当然，我不是律师（这里的大多数人也不是律师，因为程序员关注的是 Stack Overflow），但在这种情况下，我倾向于谨慎行事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T09:23:56.940

在谷歌链接中清楚地提到了什么是商业的。

Feed 的商业用途（例如，销售产品或服务，增加网站流量）。

所以我认为展示广告不是商业广告。

# java - Android proguard 忽略除一个之外的所有类

> ID：13886100
> 
> 赞同：1
> 
> 时间：2012-12-14T20:54:30.640
> 
> 标签：java, android, proguard

我需要帮助关闭所有功能并禁用 Proguard 为除一个之外的所有类所做的一切。一个类应该被混淆（包含安全的东西）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T16:31:31.543

-不要收缩

-不要优化

-不要混淆

-keep,allowshrinking,allowoptimization,allowobfuscation class org.mypackage.MyClass

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-14T21:21:24.453

```
Use this Line into the proguard 
Enter all package name for disable things of proguard

 -dontwarn your_package_name.** 
```

# c++ - 用户定义类型的数组成员初始化

> ID：13886101
> 
> 赞同：6
> 
> 时间：2012-12-14T20:54:32.230
> 
> 标签：c++, constructor, c++11

g++ 4.7 支持数组成员初始化，我开始使用它。

下面的代码无法编译。

```
struct A
{
   A(int){};
   A(const A&) = delete;
   A& operator=(const A&) = delete;
   ~A(){};
};

struct B
{
   B():
      a{{0},{1}}
   {};
   A a[2];
};

B b; 
```

gcc 4.8（预发行版）的错误消息是：

```
n.cc: In constructor ‘B::B()’:
n.cc:12:20: error: use of deleted function ‘A::A(const A&)’
           a{{0},{1}}
             ^
n.cc:4:8: error: declared here
        A(const A&) = delete;
        ^ 
```

有没有办法让这段代码工作？我不能轻易更改 A 的构造函数和析构函数。我似乎需要一个移动构造函数或复制构造函数来初始化数组，但这似乎违反直觉，因为我真正想要的只是就地构造。

如果我将 a[2] 拆分为 2 个成员 a0 和 a1，并分别构造它们，它会起作用。然而，这看起来很可疑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:21:46.373

在聚合 (8.5.1) 的*列表初始化*(8.5.4p1) 中，对聚合元素执行的初始化形式是复制初始化 (8.5.1p2)，即使初始化是*直接列表初始化*：

> 当聚合由初始化列表初始化时，如 8.5.4 中所指定，初始化列表的元素被视为聚合成员的初始化，按递增的下标或成员顺序。每个成员都是从相应的*initializer-clause*复制初始化的。

但是，仅仅因为执行的初始化形式是复制初始化，并不意味着发生了复制。根据[不可复制类型](https://stackoverflow.com/questions/13693871/copy-list-initialization-of-non-copyable-types)的复制列表初始化，*复制列表初始化*应该与*直接列表初始化*相同，但不允许使用显式构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:12:06.430

数组是聚合，聚合初始化总是使用复制初始化。C++11 §8.5.1/1：

> ***聚合*是一个数组**或类，没有用户提供的构造函数，没有用于非静态数据成员的*大括号或等号初始化器*，没有私有或受保护的非静态数据成员，没有基类，也没有虚函数。

§8.5.1/2：

> 当聚合由初始化列表初始化时，如 8.5.4 中所指定，初始化列表的元素被视为聚合成员的初始化，按递增的下标或成员顺序。**每个成员都是从相应的*initializer-clause*复制初始化的。**…

（强调我的。）

此外，如果存在用户声明的复制构造函数，编译器不会隐式生成移动构造函数（第 12.8/9 节）；因为您有一个定义为已删除的用户声明的复制构造函数，`A`它既没有复制也没有移动构造函数。显式添加移动构造函数有效：

```
struct A
{
   A(int) { }
   A(A const&) = delete;
   A& operator = (A const&) = delete;
   A(A&&) = default;
   ~A() = default;
};

struct B
{
   B() : a{{0}, {1}} { }
   A a[2];
};

int main()
{
   B b;
} 
```

[[在线演示](http://liveworkspace.org/code/A3cXH%245)]

这几乎与您想要的一样接近。

# php - 紧凑的多维数组

> ID：13886102
> 
> 赞同：0
> 
> 时间：2012-12-14T20:54:36.920
> 
> 标签：php, multidimensional-array

我有一个类似的数组：

```
Array
(
[0] => Array
    (
        [id] => 1
        [name] => Mario
        [type] => Doctor
        [operations] => brain
        [balance] => 3.00
    )

[1] => Array
    (
        [id] => 3
        [name] => Luca
        [type] => Doctor
        [operations] => hearth
        [balance] => 6.00
    )

[2] => Array
    (
        [id] => 3
        [name] => Luca
        [type] => Doctor
        [operations] => hands
        [balance] => 4.00
    )

[3] => Array
    (
        [id] => 3
        [name] => Luca
        [type] => Doctor
        [operations] => foots
        [balance] => 1.00
    )

) 
```

我必须为 id 合并它，所以只获取数组（0 和 1）的 2 个元素，Luca（id 3）必须统一进行操作，在一个新的数组中，类似这样，所以将来打印更清晰的操作统一和不分。

```
[...]
)
[1] => Array
(
  [id] => 3
  [name] => luca
  [type] => doctore
  [operations] => Array (6.00 hearts,
                         4.00 hands,
                         1.00 foots) 
```

)

我不知道如何解决我的麻烦...有人可以帮助我吗？非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:11:36.557

```
<?php

$input = array(
    array('id' => 1, 'name' => 'Mario', 'type' => 'Doctor', 'operations' => 'brain', 'balance' => 3.00),
    array('id' => 3, 'name' => 'Luca', 'type' => 'Doctor', 'operations' => 'hearth', 'balance' => 6.00),
    array('id' => 3, 'name' => 'Luca', 'type' => 'Doctor', 'operations' => 'hands', 'balance' => 4.00),
    array('id' => 3, 'name' => 'Luca', 'type' => 'Doctor', 'operations' => 'foots', 'balance' => 1.00),
);

$output = array();

foreach ($input as $person)
{
    // Add the person to the output, if needed.
    if (array_key_exists($person['id'], $output) === false)
    {
        $output[$person['id']] = 
            array( 
                'id' => $person['id'],
                'name' => $person['name'],
                'type' => $person['type'],
                'operations' => array(),
            );
    }

    // Add the operation to the array of operations.
    $output[$person['id']]['operations'][] =
        array(
            'type' => $person['operations'],
            'balance' => $person['balance'],
        ));
}

foreach ($output as $person)
{
    if (count($person['operations']) === 1)
    {
        // If the array contains only 1 item, pull it out of the array.
        $output[$person['id']]['operations'] = $person['operations'][0];
    }
}

print_r($output); 
```

# visual-studio-2010 - SMTP 电子邮件错误

> ID：13886109
> 
> 赞同：1
> 
> 时间：2012-12-14T20:55:00.143
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio 2010。当用户点击提交时，我正在尝试向 1 个电子邮件地址发送电子邮件。我收到以下错误：

错误：语法错误，命令无法识别。服务器响应为：5.0.0 您的电子邮件系统必须在发送邮件之前进行身份验证：

这是我后面的代码中的代码：

```
public void SendMail(string FromEmail, string ToEmail, string Subject, string Body)
    {
        System.Net.Mail.MailMessage eMail = new System.Net.Mail.MailMessage();
        eMail.From = new System.Net.Mail.MailAddress(FromEmail);
        //MailMessage eMail = new MailMessage();
        //eMail.From = new MailAddress(FromEmail);
        eMail.To.Add(ToEmail);
        eMail.Subject = Subject;
        eMail.IsBodyHtml = true;
        eMail.Body = Body;
        SmtpClient SMTP = new SmtpClient();
        //SMTP.Host = "mail.authsmtp.com";
        //SMTP.UseDefaultCredentials = true;
        //SMTP.EnableSsl = true;
        SMTP.Send(eMail);
        eMail.Dispose();
    } 

protected void btnSubmit_Click(object sender, EventArgs e)
        {

   StringBuilder sbBody = new StringBuilder();
                string FromEmail = "smit@college.edu";
                string ToEmail = "smit@college.edu";
                string Subject = "Application for" + " " + txtFirstName.Text + " " + txtLastName.Text + " " + "created on:" + " " + txtDateCreated.Text;
                sbBody.Append("Click link below to view application for" + " " + txtFirstName.Text + " " + txtLastName.Text);
                sbBody.Append("<br/>");
                sbBody.Append("<br/>");
                sbBody.Append("AdminDisplay.aspx?ID=@ID");
                sbBody.Append("<br/>");
                sbBody.Append("Thank you,");
                sbBody.Append("Admin");
                SendMail(FromEmail, ToEmail, Subject, sbBody.ToString());  

            } 
```

这是我的 web.config：

```
<system.net>
        <mailSettings>
            <smtp from="smit@college.edu">
                <network host="mail.authsmtp.com" defaultCredentials="true" />
            </smtp>
        </mailSettings>
    </system.net> 
```

我大部分时间都在做这个，需要让它工作。谢谢

# symfony - Symfony 2 - 上线前要做什么？

> ID：13886111
> 
> 赞同：0
> 
> 时间：2012-12-14T20:55:02.180
> 
> 标签：symfony, configuration, production

直到现在，我一直在编写 Symfony 2 应用程序并且从未负责发布。所以我只调用了 Smyfony 2`app_dev.php`并且只使用了开发配置。现在我要处理 Symfony 2 的发布，在上线之前要考虑什么？

*   我在哪里可以为不同的环境设置不同的配置（数据库连接等）以及如何调用它们？
*   如何确保无法通过`app_dev.php`实时服务器调用应用程序？
*   以及在实时推送 Symfony 2 应用程序时需要注意的任何其他提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:04:01.377

首先，我们对此进行了记录：[http](http://symfony.com/doc/current/cookbook/deployment-tools.html) ://symfony.com/doc/current/cookbook/deployment-tools.html那篇文章只是回答了第一个和第三个问题，第二个问题的答案：

> 如何确保无法通过实时服务器上的 app_dev.php 调用应用程序？

您应该将网站的根目录指向该`web`目录。例如，如果您的网站位于：

```
mysite.com/
    public_html/
        ... your site files/directories 
```

你应该这样：

```
mysite.com/
    app/
        ...
    src/
        ...
    vendor/
        ...
    public_html/ <--- this is the old web directory
        ...
        app.php 
```

您也可以阅读如何将`web`目录更改`public_html`为文档：[http ://symfony.com/doc/current/cookbook/configuration/override_dir_structure.html](http://symfony.com/doc/current/cookbook/configuration/override_dir_structure.html)

这样做的原因是为了保护您的所有应用程序代码。用户无法访问所有`app/.`,`vendor/.`和`src/.`文件，因此无法读取配置，也无法读取参数。

最后，您可以更改`app.php`为`index.php`获取类似`mysite.com/app.php/blog/foobar`. 但最好创建一个简单的 HTACCESS mod_rewrite 规则来发送所有请求`app.php`，这样您就可以使用`mysite.com/blog/foobar`.

`.htaccess`在根：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(.*?)$ app.php$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:07:13.900

> 我在哪里可以为不同的环境设置不同的配置（数据库连接等）以及如何调用它们？

如果您没有对项目进行太多更改，那么您的配置文件位于 app/config 下

> 如何确保无法通过实时服务器上的 app_dev.php 调用应用程序？

同样，如果您没有对项目进行太多更改，您唯一需要关心的是确保您的 Web 服务器从 /web 运行网站（其余的由 .htaccess 完成）

> 以及在实时推送 Symfony 2 应用程序时需要注意的任何其他提示。

您可以密切关注 app/logs 中的日志文件

# c# - 如何创建一个 int 数组列表？

> ID：13886115
> 
> 赞同：29
> 
> 时间：2012-12-14T20:55:17.043
> 
> 标签：c#, .net, syntax

我想创建一个列表，它的每个元素都是一个数组，类似于 C 语言中的结构数组。可以在 c# 中完成吗？如果可以，该怎么做？非常感谢！

*错误的： `List<int[]> arrayList = new List<int[]>;`*

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-14T20:57:35.073

您在新子句末尾缺少括号。

`List<int[]> arrayList = new List<int[]>();`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-14T21:00:13.050

如果你知道你的起始值，你也可以像这样初始化它：

```
List<int[]> arrayList = new List<int[]>
{
    new int[] { 1, 2, 3, 4 },
    new int[] { val1, val2, val3 },
    otherIntArray
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-14T21:00:04.217

```
List<Int[]> arrList = new List<Int[]>();
int[] ArrayOfInts = new int[10]; 
```

按要求填写

```
arrList.Add(ArrayOfInts); 
```

# c# - “-1.4210854715202E-14”不是属性“高度”的有效值

> ID：13886118
> 
> 赞同：1
> 
> 时间：2012-12-14T20:55:25.063
> 
> 标签：c#, wpf

我收到此错误，但我不知道为什么：

> “-1.4210854715202E-14”不是属性“高度”的有效值

它作为一个消息框弹出。单击确定后，消息框消失了。当我介入时，在它发生的源代码中追踪它，没有错误，消息框根本没有出现。

这真的让我很困扰：问题出在哪里，我该如何追踪它？

一些源代码：

```
 public ICommand SetZScanStartCommand
        {
            get
            {
                if (this._setZScanStartCommand == null)
                    this._setZScanStartCommand = new RelayCommand(() => SetZScanStart());

                return this._setZScanStartCommand;
            }
        } 
```

然后：

```
 private void SetZScanStart()
        {
            _zScanStart = this._liveImage.ZPosition;
            _zRangeMin = this._liveImage.ZPosition;
            OnPropertyChanged("ZRangeMin");
            OnPropertyChanged("ZScanStart");
            OnPropertyChanged("ZScanNumSteps");
            OnPropertyChanged("ZScanThickness");
        } 
```

SetZScanStartCommand() 对传递编辑框值的按钮单击的响应。一个编辑框给出起点，还有一个编辑框同样给出终点。起点和终点之间的差异给出了长度。我们正在计算步数，定义为长度除以步长；在我们崩溃的例子中，起点是 6.6，终点是 1.0，步长为 0.5，所以步数应该是 (6.6 - 1.0) / 0.5 = 11；注意它是圆形的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:47:49.313

我相信这与`float`您的代码中减去一些变量有关。

我会先看看你的`float`变量，也许用另一种非浮点类型替换它们，看看会发生什么。

# python - 为什么 Python 的 dict.keys() 返回一个列表而不是一个集合？

> ID：13886129
> 
> 赞同：103
> 
> 时间：2012-12-14T20:56:12.483
> 
> 标签：python, python-2.x

我本来希望 Python 的 keys 方法返回一个集合而不是一个列表。因为它最类似于 hashmap 的键所提供的保证。具体来说，它们是唯一的并且没有排序，就像一个集合。但是，此方法返回一个列表：

```
>>> d = {}
>>> d.keys().__class__
<type 'list'> 
```

这只是 Python API 中的一个错误，还是我错过了其他一些原因？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-12-14T20:58:45.130

一个原因是它`dict.keys()`早于将集合引入语言。

请注意，`dict.keys()`Python 3 中的返回类型已更改：该函数现在返回“类似集合”的[视图](http://docs.python.org/3.8/library/stdtypes.html#dict-views)而不是列表。

> 对于类似集合的视图，为抽象基类定义的所有操作`collections.abc.Set`都可用（例如，`==`、`<`或`^`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-04T20:35:45.940

因为订购是有保证的。

在 Python [3.7.0](https://docs.python.org/3.7/whatsnew/3.7.html)中，dict 对象的插入顺序保存特性已被声明为 Python 语言规范的官方部分。因此，您可以依赖它。

在 Python 3.6 中，如果你使用 cpython，它是有序的。

在早期版本中，可能每个人都希望 3.7

在

# unity3d - HLA RTI 和 Unity3d

> ID：13886130
> 
> 赞同：0
> 
> 时间：2012-12-14T20:56:20.907
> 
> 标签：unity3d, simulation, high-level-architecture

对于一个模拟项目，我们希望将 Unity3d 与 Portico 的 HLA RTI 连接起来。但问题是我们不知道这是否可能。如果是，它是如何工作的。顺便说一句，我们可以使用另一个 RTI。它不一定是门廊。但是我们的游戏引擎必须是 Unity。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-02T17:27:23.783

It surely is possible.

You will need to create some federation in Unity.

You do have commercial rtis from Pitch and Mak, for instance.

There's a plugin from Mak that already does that.

Best regards, Daniel

# php - 复杂的？Eplode（）变量我无法弄清楚

> ID：13886133
> 
> 赞同：0
> 
> 时间：2012-12-14T20:56:39.043
> 
> 标签：php, foreach, explode

我有一个变量，我们称它为`$var`回显如下内容：

`32-Widgets: 18,28-Widgets: 24,57-Widgets: 45,44-Widgets: 24,55-Widgets: 45`

该变量是由表单提交和 jQuery Sortables 的组合创建的（这就是为什么一切都以一个变量而不是两个变量结束的原因）。顺序非常重要。

我想结束的是两个变量（可以是数组），它们是：

```
$newVar1 = 32,18,24,45,24
$newVar2 = Widgets: 18,Widgets: 24,Widgets: 45,Widgets: 24,Widgets: 45 
```

我是这样开始的：

`$newVars = explode(",",$var);`

但我不知道从那里去哪里。我尝试了各种说法，例如：

```
foreach ($newVars as $newVar) :
    //Various explode() functions tried here.
endforeach; 
```

如果有人知道我缺少什么，我当然会感谢您的帮助。

谢谢你，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:00:19.557

它不是很漂亮，但它会成功的。

```
<?php

$str = "32-Widgets: 18,28-Widgets: 24,57-Widgets: 45,44-Widgets: 24,55-Widgets: 45";

$entries = explode(",", $str);
$parts1 = array();
$parts2 = array();

foreach ($entries as $e)
{
    $temp = explode("-", $e);
    $parts1[] = $temp[0];
    $parts2[] = $temp[1];
}

print_r($parts1);
print_r($parts2);

?> 
```

运行示例：http: [//ideone.com/KkL06f](http://ideone.com/KkL06f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:14:33.540

你有没有尝试过这样的事情：

```
public function just_a_test() {
    $var = "32-Widgets: 18,28-Widgets: 24,57-Widgets: 45,44-Widgets: 24,55-Widgets: 45";
    $vars = explode(',', $var);
    $partsA = $partsB = array();
    foreach ($vars as $aVar) {
        preg_match('/^(\d+)-(Widgets: \d+)$/i', $aVar, $parts);
        $partsA []= $parts[0];
        $partsB []= $parts[1];
    }
    echo '<pre>';
    print_r($partsA);
    print_r($partsB);
    echo '</pre>';
} 
```

通过对每个数组调用 implode() ，您可以轻松地得到像您这样的输出。

# php - 用php构建mysql搜索系统，制作索引

> ID：13886139
> 
> 赞同：0
> 
> 时间：2012-12-14T20:56:50.497
> 
> 标签：php, mysql

我已经询问了有关在没有 lucene、sphinx、solr 等库的情况下创建搜索系统的最佳方法的问题。

人们不断告诉我诸如您可以创建索引之类的事情，我可以使用专用表在 mysql 中模拟索引，在许多表中搜索并不是一个好主意。最好有一个索引。index 可以是单个结构化数据库表或外部引擎，例如我不会使用的 sphinx 或 lucene。

请解释一下索引实际上是什么意思？我只知道我应该为 ID 分配 PRIMARY KEY 并使其自动递增，PRIMARY KEY 将使其成为唯一的，因此 ID 号将不一样。人们告诉我的这些索引是与 PRIMARY KEY 旁边的 INDEX 直接相关还是什么？

我在互联网上的任何地方都找不到解释，所以如果有人帮助我，我会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:23:25.830

MySQL 归根结底实际上只是一个非常复杂且功能强大的字符串解析引擎。您发送的所有数据都以类似字符串的值形式存储在文件中。MySQL 是用 C 语言构建的，它负责管理处理以执行您运行的所有查询。

索引是您的表中的数据列表，其映射方式与主 ID 的映射不同。索引的基本目标是允许您使用的 MySQL 引擎更快地搜索您的表。这是因为在实践中，索引能够排除表中已知不存在您要查找的记录的大部分部分。主键是 id 值的索引，但您可以在任意列上创建索引，如下所示：

```
CREATE INDEX user_id_index ON meta (user_id); 
```

一个表可以有多个索引用于不同的事物，这没关系。通常你会发现你正在通过不同的值引用一个表，也许你会想要为每个值创建一个索引。明智地索引很重要，因为索引错误的列可能会减慢查询速度。您必须阅读整个链接才能很好地理解正在发生的事情，但请记住，索引基本上是一个文件，它允许通过您的一个表中的列进行查找更快地发生：

[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

# iis-7 - IIS7 重写规则 HTTPS

> ID：13886141
> 
> 赞同：0
> 
> 时间：2012-12-14T20:56:55.390
> 
> 标签：iis-7, url-rewriting

我在 IIS 7.5 中安装了 PHP，它运行良好。我尝试使用的应用程序需要重写规则。我已经从 .htaccess 文件中导入了规则，只要协议是 http，重写就可以正常工作。如果使用 https，则以下规则失败。我并没有像大多数帖子似乎解释的那样尝试重定向到 https，我试图通过以下规则来支持 https...

```
 <rule name="Imported Rule 3" stopProcessing="true">
                <match url="^([^/\.]+)/?$" ignoreCase="false" />
                <action type="Rewrite" url="index.php?page={R:1}" appendQueryString="true" />
            </rule>
            <rule name="Imported Rule 4" stopProcessing="true">
                <match url="^([^/\.]+)/([^/]+)/?$" ignoreCase="false" />
                <action type="Rewrite" url="index.php?page={R:1}&amp;id={R:2}" appendQueryString="true" />
            </rule>
            <rule name="Imported Rule 5" stopProcessing="true">
                <match url="^([^/\.]+)/([^/]+)/([^/]+)/?" ignoreCase="false" />
                <action type="Rewrite" url="index.php?page={R:1}&amp;id={R:2}&amp;subpage={R:3}" appendQueryString="true" />
            </rule> 
```

如果我得到像`http://myserver/search`上述规则这样的 URL，那就太好了！如果我转到`https://myserver/search`页面响应 HTTP 错误 404.0 - 未找到。

想法？

谢谢！

# asp.net - 使用 nvarchar(MAX) 构建查询，但在 where 子句中转换失败

> ID：13886145
> 
> 赞同：0
> 
> 时间：2012-12-14T20:57:24.910
> 
> 标签：asp.net, sql, sql-server-2008, stored-procedures

我有一个存储过程，它使用一个名为`@Command (nvarchar(MAX))`. 然后我根据给定的输入相应地添加参数。

```
declare @Command nvarchar(max)
if(@CaseFileID IS NOT NULL)
BEGIN
select @Command='
  select [ServerCredentialsID],[CaseFileID],EIKSLT.[LocationType],EPT.PaymentType,[TaskID],[DateActive]
      ,[LengthOfPurchase],[Username],[Password],[IPDomain],[Port],[DES],[Website],[AmountPaid],[Latitude]
      ,[Longitude],[HasAttachments],[TimeStamp],[CaseElement],[Temporary],[StatusID] 
      FROM Element17a_IKSServerCredentials EIKSSC 
      JOIN ElementsIKSLocationTypes EIKSLT ON EIKSSC.LocationBeingUsedID= EIKSLT.IKSLocationBeingUsedID 
      JOIN ElementsPaymentTypes EPT ON EIKSSC.PaymentMethodID=EPT.PaymentTypeID 
      where  EIKSSC.CaseFileID='''+cast(@CaseFileID as nvarchar(MAX))+''' ' 
```

@CaseFileID 被声明为一个 int，在表中它是一个 int。当我尝试

```
where  EIKSSC.CaseFileID = ' + @CaseFileID + ' ' 
```

然后该值甚至不显示（在错误中看起来像`"EIKSSC.CaseFileID= '"`）

我只是不明白。

注意：SQL Server 2008 管理工作室

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:16:51.933

这是因为 @CaseFileID 是 VARCHAR 即使您没有显示它。
你`IF`应该是

```
if(@CaseFileID > '') 
```

如果即使这样也不起作用，那么您需要交换到 LEFT 联接，因为 INNER JOIN 将删除其他 2 个表中无法匹配的记录。

最后，因为 CaseFileID 是一个 int，所以不需要引号。尽管 SQL Server 会在`WHERE`子句中将“9”隐式转换为整数 9，但这并不是必需的。

```
declare @Command nvarchar(max)
if(@CaseFileID > '')
BEGIN
select @Command='
  select [ServerCredentialsID],[CaseFileID],EIKSLT.[LocationType],EPT.PaymentType,[TaskID],[DateActive]
      ,[LengthOfPurchase],[Username],[Password],[IPDomain],[Port],[DES],[Website],[AmountPaid],[Latitude]
      ,[Longitude],[HasAttachments],[TimeStamp],[CaseElement],[Temporary],[StatusID] 
      FROM Element17a_IKSServerCredentials EIKSSC 
      LEFT JOIN ElementsIKSLocationTypes EIKSLT ON EIKSSC.LocationBeingUsedID= EIKSLT.IKSLocationBeingUsedID 
      LEFT JOIN ElementsPaymentTypes EPT ON EIKSSC.PaymentMethodID=EPT.PaymentTypeID 
      where  EIKSSC.CaseFileID='+cast(@CaseFileID as nvarchar(MAX)) 
```

# c# - 数字图像处理 保存图像

> ID：13886147
> 
> 赞同：0
> 
> 时间：2012-12-14T20:57:27.757
> 
> 标签：c#, image-processing, bitmap, save

我正在尝试保存我在程序中处理过的图像。例如在原始图像中添加伪彩色

我尝试了几种方法，每次都出现错误。

> GDI+ 中出现一般错误。

谁能告诉我如何正确实现保存方法？

这是最新的尝试：

```
 using System;
using System.Collections.Generic;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Text;
using System.Windows.Forms;

namespace IMGPROC
{

    public partial class Form1 : Form
    {
        public Bitmap original_image, proc_image;

        public Form1()
        {
            InitializeComponent();
            original_image = null;
            proc_image = null;

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        public void Form1_Paint(object sender, PaintEventArgs e)
        {
            if (original_image != null)
            {
                Graphics g = e.Graphics;
                Rectangle r = new Rectangle(10, 50, original_image.Width, original_image.Height);
                g.DrawImage(original_image, r);

            }

        }

        //                OPEN IMAGE FILE
        /******************************************************************************************/

        private void openToolStripMenuItem_Click_1(object sender, EventArgs e)
        {
            // show the openFile dialog box            
            Graphics g = this.CreateGraphics();
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                original_image = new Bitmap(openFileDialog1.FileName);

            }

            Rectangle r = new Rectangle(10, 50, original_image.Width, original_image.Height);
            g.DrawImage(original_image, r);
        }

        //                SAVE IMAGE FILE
        /******************************************************************************************/

        private void saveAsToolStripMenuItem_Click(object sender, System.EventArgs e)
        {
            SaveFileDialog save = new SaveFileDialog();
            save.Filter = "Bitmap Image (.bmp)|*.bmp|Gif Image (.gif)|*.gif |JPEG Image (.jpeg)|*.jpeg |Png Image (.png)|*.png |Tiff Image (.tiff)|*.tiff |Wmf Image (.wmf)|*.wmf |All files (*.*)|*.*";
            save.FilterIndex = 4;
            save.InitialDirectory = "C:\\";
            save.RestoreDirectory = true;

            if (save.ShowDialog() == DialogResult.OK)
            {
                proc_image.Save(save.InitialDirectory);
            }
        }

        //                 EXIT APPLICATION
        /************************************************************************************/

        private void exitToolStripMenuItem_Click_1(object sender, EventArgs e)
        {
            Dispose();
            Application.Exit();
        }

        private void btnRed_Click(object sender, System.EventArgs e)
        {

            Graphics g = this.CreateGraphics();

            int width = original_image.Width;
            int height = original_image.Height;

            Color pixel;

            Rectangle r = new Rectangle(535, 50, original_image.Width, original_image.Height);
            Rectangle r2 = new Rectangle(0, 0, original_image.Width, original_image.Height);
            Rectangle r3 = new Rectangle(10, 50, original_image.Width, original_image.Height);

            g.DrawImage(original_image, r3);

            Bitmap proc_image = new Bitmap(width, height, PixelFormat.Format24bppRgb);

            for (int y = 0; y < height; ++y)
            {
                for (int x = 0; x < width; ++x)
                {
                   pixel = original_image.GetPixel(x, y);
                   proc_image.SetPixel(x, y, Color.FromArgb(pixel.R, 0, 0));   
                }
            } g.DrawImage(proc_image, r);

        }

        private void btnGreen_Click(object sender, System.EventArgs e)
        {

            Graphics g = this.CreateGraphics();

            int width = original_image.Width;
            int height = original_image.Height;

            Color pixel;

            Rectangle r = new Rectangle(535, 50, original_image.Width, original_image.Height);
            Rectangle r2 = new Rectangle(0, 0, original_image.Width, original_image.Height);
            Rectangle r3 = new Rectangle(10, 50, original_image.Width, original_image.Height);

            g.DrawImage(original_image, r3);

            Bitmap bitmap_colour = new Bitmap(width, height, PixelFormat.Format24bppRgb);

            for (int y = 0; y < height; ++y)
            {
                for (int x = 0; x < width; ++x)
                {

                  pixel = original_image.GetPixel(x, y);
                  bitmap_colour.SetPixel(x, y, Color.FromArgb(0, pixel.G, 0));

                }
            } g.DrawImage(bitmap_colour, r);

        }

        private void btnBlue_Click(object sender, System.EventArgs e)
        {

            Graphics g = this.CreateGraphics();

            int width = original_image.Width;
            int height = original_image.Height;

            Color pixel;

            Rectangle r = new Rectangle(535, 50, original_image.Width, original_image.Height);
            Rectangle r2 = new Rectangle(0, 0, original_image.Width, original_image.Height);
            Rectangle r3 = new Rectangle(10, 50, original_image.Width, original_image.Height);

            g.DrawImage(original_image, r3);

            Bitmap bitmap_colour = new Bitmap(width, height, PixelFormat.Format24bppRgb);

            for (int y = 0; y < height; ++y)
            {
                for (int x = 0; x < width; ++x)
                {
                   pixel = original_image.GetPixel(x, y);
                   bitmap_colour.SetPixel(x, y, Color.FromArgb(0, 0, pixel.B));
                }

            } g.DrawImage(bitmap_colour, r);

        }

        private void pseudocolorToolStripMenuItem_Click(object sender, System.EventArgs e)
        {
            checkImageOpen();

            btnRed.Visible = true;
            btnGreen.Visible = true;
            btnBlue.Visible = true;

            Graphics g = this.CreateGraphics();

            int width = original_image.Width;
            int height = original_image.Height;

            Rectangle r = new Rectangle(535, 50, original_image.Width, original_image.Height);
            Rectangle r2 = new Rectangle(0, 0, original_image.Width, original_image.Height);
            Rectangle r3 = new Rectangle(10, 50, original_image.Width, original_image.Height);

            g.DrawImage(original_image, r3);

        }

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:07:26.983

```
if (save.ShowDialog() == DialogResult.OK)
{
    proc_image.Save(save.FileName);
} 
```

无法将某些内容保存为目录，即使可以，您也不想使用初始目录..

# php - 将 php 代码作为文本回显

> ID：13886149
> 
> 赞同：1
> 
> 时间：2012-12-14T20:57:33.723
> 
> 标签：php

我想回显动态生成的代码块。例如：

```
<?php
$cid = $camp_id;

$hostname = "$host";
$db_user = "$dbuser";
$db_pass = "$dbpass";
$db_name = "$dbname";

$mysqli = new mysqli();
$mysqli->connect($hostname, $db_user, $db_pass, $db_name);
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: " . $mysqli->connect_error;
}

etc....
?> 
```

我可以访问 $camp_id 和其他变量，因为它们在包含的文件中。我尝试将此代码存储在带有 <pre> 和 <code> 标记的变量中，然后回显，但无法使其工作。

另外我怎样才能插入 $camp_id 到这个。以下是我认为的示例（我知道这只是为了理解是不正确的。

```
$generated_code = "<.code><?php $cid = <?php echo $camp_id;?> $hostname = $host; etc... </code > ?>"; 
```

我在代码和 pre 之前使用了空格和点，因为如果不是，它不会显示为标签..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:04:56.620

您需要遵循[PHP 中字符串](http://php.net/string)的规则，然后您需要遵循 HTML 的规则，或者更好的是，输出纯文本：

```
<?php
header('Content-Type: text/plain;');

echo '<?php
$cid = ' . $camp_id .';

etc....

?>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:07:58.347

你也可以这样尝试：

```
<?php
    ob_start();
?>

    <code>$cid = <?php echo $camp_id; ?> , $hostname = <?php echo $host; ?></code>

<?php
    echo ob_get_clean();
?> 
```

根据情况和您的代码是什么样的，使用 ob_start() 和 ob_get_clean() 函数可以让您的代码在颜色编码的 IDE 中更清晰易读，因为您的输出看起来不会像一个纯色块，而是会像它应该在 html 中以获得更好的可读性。

# angularjs - 有没有人使用 iScroll 和 Angularjs

> ID：13886154
> 
> 赞同：1
> 
> 时间：2012-12-14T20:57:58.040
> 
> 标签：angularjs, iscroll

新手来了...

在 Angularjs 中构建应用程序，现在我想加入 iScroll 功能。有没有人这样做过？如果是这样，你能分享一些技巧吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T18:50:50.703

这有点晚了，但我发布了一个 AngularJS 指令，它有助于让 iScroll 正常工作。见[https://github.com/ibspoof/ng-iScroll](https://github.com/ibspoof/ng-iScroll)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T11:51:47.593

我尝试了[ng-iScroll](https://github.com/ibspoof/ng-iScroll)，但最终写了[angular-iscroll](https://github.com/mtr/angular-iscroll)，因为我希望能够在运行时打开和关闭 iScroll，而 ng-iScroll 不必要地复杂（例如，您不需要在角指令）。

此外，我还开发了[core-layout](https://github.com/mtr/core-layout)，[这是一个演示 Web 应用程序](https://mtr.github.io/core-layout/examples/)，展示了如何在响应式设计应用程序中使用 angular-iscroll 指令，同时支持滚动抽屉（滑出）菜单和模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:14:07.880

对于 angularjs google 小组来说，这似乎是一个更好的问题。那是我找到这个讨论的地方（谷歌搜索）

[https://groups.google.com/forum/?fromgroups=#!searchin/angular/iscroll/angular/EBHrwhPPJyg/VnubgpLKq9IJ](https://groups.google.com/forum/?fromgroups=#!searchin/angular/iscroll/angular/EBHrwhPPJyg/VnubgpLKq9IJ)

# yii - 在 GridView 中引用模块组件类

> ID：13886155
> 
> 赞同：2
> 
> 时间：2012-12-14T20:58:02.810
> 
> 标签：yii, yii-extensions

我正在将引导程序加载到模块中：

```
'modules'=>array(
    'admin'=>array(
        'preload'=>array('bootstrap'),
        'components'=>array(
            'bootstrap'=>array(
                'class'=>'ext.bootstrap.components.Bootstrap',
                'responsiveCss' => true,
            ),
        )
    ),
), 
```

在 GridView 我试图创建一个 TbButtonColumn：

```
array(
    'class'=>'bootstrap.widgets.TbButtonColumn',
    'htmlOptions'=>array('style'=>'width: 50px'),
), 
```

这将返回一个 CException

> 未定义属性“CWebApplication.bootstrap”。

因为它指向主配置应用程序中显然不存在的引导程序，所以在模块中加载引导程序时如何引用它？

我试过了：

> components.bootstrap.widgets.TbButtonColumn
> 
> admin.components.bootstrap.widgets.TbButtonColumn
> 
> admin.bootstrap.widgets.TbButtonColumn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:35:55.230

罪魁祸首在[TbGridView 中`init()`](https://bitbucket.org/Crisu83/yii-bootstrap/src/ee531ea4d03a7d7ca3930a2af647b327bd28e6de/widgets/TbGridView.php?at=default#cl-78 "https://bitbucket.org/Crisu83/yii-bootstrap/src/ee531ea4d03a7d7ca3930a2af647b327bd28e6de/widgets/TbGridView.php?at=default#cl-78")：

```
$popover = Yii::app()->bootstrap->popoverSelector;
$tooltip = Yii::app()->bootstrap->tooltipSelector; 
```

将它们更改为此将有助于：

```
if (!($module=Yii::app()->controller->module)){// access as application component (original behavior)
    $popover = Yii::app()->bootstrap->popoverSelector;
    $tooltip = Yii::app()->bootstrap->tooltipSelector;
}
else {// access as module component 
    $popover = $module->bootstrap->popoverSelector;
    $tooltip = $module->bootstrap->tooltipSelector;
} 
```

同样的两行`TbListView`也在，所以如果你使用`TbListView`，你可以做同样的改变。

* * *

更新：这似乎已经存在[问题](https://bitbucket.org/Crisu83/yii-bootstrap/issue/149/tbgridview-didnt-work-if-it-resides-in-yii "https://bitbucket.org/Crisu83/yii-bootstrap/issue/149/tbgridview-didnt-work-if-it-resides-in-yii")，那里发布的解决方案看起来更好：

```
$module = ( Yii::app()->controller->module ? Yii::app()->controller->module : Yii::app() );

$popover = $module->bootstrap->popoverSelector;
$tooltip = $module->bootstrap->tooltipSelector; 
```

# google-apps-script - 为什么 Google Apps 脚本 XmlElement 字符串比较评估不正确？

> ID：13886156
> 
> 赞同：0
> 
> 时间：2012-12-14T20:58:05.157
> 
> 标签：google-apps-script

我有一个 XmlElement。我正在对其包含的文本进行字符串比较。无论如何，比较应该通过。直到最近，代码已经成功运行。然而，它现在失败了。

```
// caller ....
  processRow('my title', atag);
  ...

function processRow(title, rowtag) {
  // rowtag.getText() returns the string 'my title'

  if (rowtag.getText() == title) {
    // ... this section is never entered 
```

在调试模式下，我看到正在比较两个相同的 String 对象。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:09:53.517

事实证明，xml 内容中存在一个额外的空间。差异没有反映在变量检查窗口中；但是，记录器日志正确显示了字符串。

# ruby - 为什么 IRB 不根据 IRB.conf 哈希忽略 EOF

> ID：13886158
> 
> 赞同：1
> 
> 时间：2012-12-14T20:58:41.023
> 
> 标签：ruby, irb

我正在尝试启动 IRB 并在一个命令中运行一个文件 foo.rb，

```
irb foo.rb 
```

当 foo.rb 完成后，我想要另一个 IRB 提示符。相反，它会打印 IRB 提示，然后退出。

我检查了 IRB 文档并更改了`IRB.conf[:IGNORE_EOF] = true`. 我确认了 IRB 中的哈希值。我想要的行为是由这个哈希设置的吗？如果是这样，我还能做错什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:19:31.850

`irb`有关该配置的文档：

```
**conf.ignore_eof = true/false**
   Whether ^D (control-d) will be ignored or not.  If false is set, ^D means quit. 
```

所以，不，那个设置并不意味着做你正在寻找的东西。据我所知，没有办法用`irb`. 最接近的方法是`irb`不带参数开始，然后用于`require './foo.rb'`运行该文件。

# vlc - 如何使用 VLC 从实时视频流中获取隐藏式字幕

> ID：13886159
> 
> 赞同：1
> 
> 时间：2012-12-14T20:58:41.187
> 
> 标签：vlc, caption, wowza

我希望能够流式传输直播电视，但也包括隐藏式字幕。我的工作流程是使用 Blackmagic Designs Decklink 卡（视频源为 SDI）并使用 VLC 捕获和转码视频，然后将其发送到 Wowza 服务器以进行打包以进行 HTTP 流式传输。我有这个为视频工作，但我不知道如何让隐藏式字幕出现在我的播放器中。我在网页、iPad 和 iPhone 上使用 VLC 播放器、Quicktime、Flowplayer 来查看流，它们都没有在源视频中显示隐藏式字幕。隐藏式字幕都是 608 和 708。在过去的 3 天里，我一直在阅读关于 vlc 和隐藏式字幕、wowza 和隐藏式字幕、x264 和隐藏式字幕、vbi、teltext 甚至字幕的所有内容，但我不知道在哪里比我开始时更近。

我正在使用具有 4GB ram 的 core i7，runign ubuntu 10.04 64bit。我用以下内容编译了vlc：

```
./configure  '--enable-xvideo' '--enable-sdl' '--enable-avcodec' '--enable-avformat' '--enable-swscale' '--enable-mad' '--enable-a52' '--enable-libmpeg2' '--enable-dvdnav' '--enable-faad' '--enable-vorbis' '--enable-ogg' '--enable-theora' '--enable-mkv' '--enable-flac' '--enable-caca' '--enable-alsa' '--enable-qt4' '--enable-ncurses' '--enable-realrtsp' '--enable-twolame' '--enable-real' '--enable-x264' '--with-decklink-sdk=/home/bimls/bmd/Blackmagic_Decklink_SDK_9.6.4/Linux' '--enable-zvbi' 
```

我使用以下内容来捕获和流式传输实时视频：

```
cvlc decklink:// --decklink-card-index="0" --decklink-mode="ntsc" --rtsp-timeout 0 --sout='#transcode{venc=x264{subme=1, ref=1, bframes=16, b-adapt=1, bpyramid=none, weightp=0 }, vcodec=h264, vb=1300, acodec=mp4a, ab=96, threads=4}:rtp{dst=127.0.0.1:8888,mux=ts}'' --vbi-page=100 --no-vbi-opaque --vbi-position=0 
```

我的一些问题是：

*   这是让隐藏式字幕出现的正确方法吗？如果不是，请问我做错了什么？
*   怎么知道要查找什么 vbi-page，因为范围似乎是“--vbi-page integer [-2147483648 .. 2147483647]>”
*   转码会破坏隐藏式字幕数据吗？

所以，请任何帮助将不胜感激！谢谢！

# mule - 骡子奇怪的流动行为

> ID：13886161
> 
> 赞同：0
> 
> 时间：2012-12-14T20:58:45.860
> 
> 标签：mule

我正在使用 mule 3.2.0 并在 java-class 中调用 muleclient.send 方法，该方法将soap-request发送到mule流（此处不存在），将其发送到接收请求的http端点，将其记录到我的数据库具有代理模式并将其传播到具有 Dispatcher 转换器的“ServiceFlow” - java 类，该类使用 MuleClient.send(String url, Object payload, Map messageProperties) 方法的调用将有效负载数组的一个对象分派到端点。然后它由 cxf:jax-ws-client 处理，再次登录到数据库并传输到 Dispatcher 的另一个实例（其中传入的有效负载再次是 Object[] 类型）。那里有执行服务调用的 http 端点。这部分工作正常。但是在收到响应时出现了麻烦。我已经把 Test1(2,3, 4）在我的流程中打印调用链的转换器（他们只是执行 System.out.println()），并看到它们以奇怪的顺序被调用：我有它像 1,3 然后是 TestTransformer（这也是sysouter）然后我在主流程“服务流程”的调用者中收到错误“NullPayload”，然后我收到测试 4 和测试 2 输出。模式“1Proxy”中的 responseTransformer-refs 将被忽略，就像在“ServiceProxy”中一样。我一直在寻找一个星期的解决方案，但找不到。在调试中，我可以看到名为“TestTransformer”的转换器具有预期的有效负载（Object []），但是当我在类调用者中收到它时，它显示为“NullPayload”。我现在可以看到我的一个端点具有路径元素而不是 ref，不确定这是否会对流量造成任何影响，但会检查它。还尝试使用“响应”块来确保我的流程按预期运行。任何建议表示赞赏。谢谢

这是我的配置的样子：

```
<http:endpoint  name="httpService"  address="${service.soap}" exchange-pattern="request-response" responseTimeout="${timeout}" />
<vm:endpoint  name="vmService"  path="vmService" exchange-pattern="request-response"/>

<pattern:web-service-proxy 
    name="ServiceProxy" 
    inboundEndpoint-ref="httpService" 
    transformer-refs="to-string logging" 
    responseTransformer-refs="to-string logging"
    outboundEndpoint-ref="vmService" />

<flow name="ServiceFlow" >
    <inbound-endpoint ref="vmService"/>
    <cxf:jaxws-service serviceClass="pkg.ServiceImpl" wsdlLocation="${service.wsdl}" enableMuleSoapHeaders="false" validationEnabled="true"/>
  <custom-transformer class="pkg.Dispatcher">
     <spring:property name="vmFlowPath" value="vm.logService"/>
  </custom-transformer>
  <custom-transformer name="TestTransformer" class="pkg.TestTransformer"/>
</flow>

<vm:endpoint  name="vm1In"  path="vm1In" exchange-pattern="request-response"/>
<vm:endpoint  name="vm1Out"  path="vm1Out" exchange-pattern="request-response"/>

<custom-transformer name="arrayGenerator" class="pkg.ArrayGenerator"/>
<custom-transformer name="objectExtractor" class="pkg.ObjectExtractor"/>
<custom-transformer name="faultChecker" class="pkg.FaultChecker"/>  
<custom-transformer name="objectLogging" class="pkg.ObjectLogger">

<pattern:web-service-proxy 
    name="1Proxy" 
    inboundEndpoint-ref="vm1In" 
    transformer-refs="arrayGenerator objectLogging" 
    responseTransformer-refs="objectLogging objectExtractor faultChecker"
    outboundEndpoint-ref="vm1Out" />

<flow name="logService">

<vm:inbound-endpoint path="vm.logService exchange-pattern="request-response"/>

<custom-transformer class="Test1"/>

<vm:outbound-endpoint ref="vm1In">
    <cxf:jaxws-client 
        serviceClass="pkg.ServiceImpl" 
        operation="import"
        enableMuleSoapHeaders="false"/>
    <object-to-string-transformer/>

</vm:outbound-endpoint>
<object-to-xml-transformer> 

<xm:xml-to-object-transformer returnClass="pkg.WSResponseClass"/>

<custom-transformer class="Test2"/>
</flow>

<flow name="DispatcherToServiceFlow">
    <custom-transformer class="Test3"/>
    <vm:inbound-endpoint path="vm1.Out"/>

    <custom-transformer class="pkg.Dispatcher">
        <spring:property name="vmFlowPath" value="vm.import"/>
    </custom-transformer>

</flow> 

<flow name="import">
    <vm:inbound-endpoint path="vm.import" exchange-pattern="request-response"/>

    <http:outbound-endpoint address="${importService}" responseTimeout="${timeout}" exchange-pattern="request-response" />

    <object-to-string-transformer/>
<custom-transformer class="Test4"/>
</flow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:52:05.850

好吧，我的问题确实是“路径”元素，而不是使用“ref”元素来引用现有的 vm 端点，例如

```
<inbound-endpoint ref="vm1Out"/> 
```

# android - 拖动和按下按钮 - android

> ID：13886163
> 
> 赞同：3
> 
> 时间：2012-12-14T20:59:03.527
> 
> 标签：android, button, ontouchlistener

我有几个按钮，我想按下其中一个并拖动另一个按钮。你能告诉我`MotionEvent`应该使用哪个或其他功能吗？我正在使用`onTouchListener`.

有一张图片，您可以在其中看到我想要做什么（首先`ACTION_DOWN`在第 1 个按钮上并拖动第 2-7 个按钮仍然按下屏幕），最后按下每个白色按钮：

![在此处输入图像描述](../Images/af95688fed7cda34af3320b606a8d313.png)

下面是我的 onTouch 按钮代码：

```
button1 = (Button) findViewById(R.id.button1);

        button1.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                    switch (event.getAction())
                    {
                        case MotionEvent.ACTION_DOWN:
                            soundIDs[0] = sound.play(R.raw.sample1);
                            button1.setBackgroundResource(R.drawable.white_clicked);
                            break;
                        case MotionEvent.ACTION_UP:
                        case MotionEvent.ACTION_CANCEL:
                            sound.stop(soundIDs[0]);
                            button1.setBackgroundResource(R.drawable.white);
                            break;
                    }
            return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:32:15.977

您只在一个按钮上设置了 OnTouchListener。这不会帮助您知道指针何时移动（例如用户拖动手指）到另一个按钮。

您可以在包含按钮的视图上设置 OnTouchListener。然后检查 ACTION_DOWN、ACTION_MOVE 和 ACTION_UP 事件。然后，您必须进行一些简单的点击检测来确定要激活哪个按钮。

类似于以下内容：

```
getWindow().getDecorView()
    .findViewById(android.R.id.content)
    .setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            int action = event.getAction();
            if (action != MotionEvent.ACTION_DOWN 
                && action != MotionEvent.ACTION_MOVE 
                && action != MotionEvent.ACTION_UP) return false;

            Rect hitRect = new Rect();
            Button button;
            for(int i = 0; i < myButtons.size(); i++) {
                button = myButtons.get(i);
                button.getHitRect(hitRect);
                if (hitRect.contains((int)event.getX(), (int)event.getY())) {
                    button.setText("hit!");
                }
            }
            return true;
        }

    }); 
```

其中 myButtons 是按钮的 ArrayList（在您的示例中为钢琴键）。

此外，如果用户的触摸离开按钮但没有点击另一个按钮，您可能希望修改它以正确停用当前活动的按钮。

我在具有连续 3 个按钮的布局的 android 设备上测试了上述代码。在所有按钮上拖动手指会导致每个按钮的文本变为“命中！”

就像我上面说的，你只是在一个按钮上设置了触摸监听器，那是行不通的。在此示例中，我在活动的整个视图上设置了触摸侦听器。

# java - RSS Feed 解析并在 ListView 中显示结果，然后在点击帖子时显示正文

> ID：13886167
> 
> 赞同：0
> 
> 时间：2012-12-14T20:59:27.277
> 
> 标签：java, android, parsing, rss, feed

我的目标是从我选择的 url 中选择一个 rss 提要，提取数据，在列表视图中列出不同的帖子，然后单击，打开帖子并在布局文件中显示帖子的正文。

到目前为止，目前我可以拉 rss，在列表中显示帖子，当点击帖子时我没有任何动作。

**新目标：**打开新活动以显示来自 rss 提要的帖子名称和帖子正文。

## AndroidRssReader.java

```
 public class AndroidRssReader extends ListActivity {

private RSSFeed myRssFeed = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy); 
    try {
        //http://www.gov.hk/en/about/rss/govhkrss.data.xml
        URL rssUrl = new URL("http://feeds2.feedburner.com/greentechmedia-all-content.rss");
        SAXParserFactory mySAXParserFactory = SAXParserFactory.newInstance();
        SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
        XMLReader myXMLReader = mySAXParser.getXMLReader();
        RSSHandler myRSSHandler = new RSSHandler();
        myXMLReader.setContentHandler(myRSSHandler);
        InputSource myInputSource = new InputSource(rssUrl.openStream());
        myXMLReader.parse(myInputSource);

        myRssFeed = myRSSHandler.getFeed();

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if (myRssFeed!=null)
    {
        TextView feedTitle = (TextView)findViewById(R.id.feedtitle);
        TextView feedDescribtion = (TextView)findViewById(R.id.feeddescribtion);
        TextView feedPubdate = (TextView)findViewById(R.id.feedpubdate);
        TextView feedLink = (TextView)findViewById(R.id.feedlink);
        feedTitle.setText(myRssFeed.getTitle());
        feedDescribtion.setText(myRssFeed.getDescription());
        feedPubdate.setText(myRssFeed.getPubdate());
        feedLink.setText(myRssFeed.getLink());

        ArrayAdapter<RSSItem> adapter = 
            new ArrayAdapter<RSSItem>(this,
                    android.R.layout.simple_list_item_1,myRssFeed.getList());
        setListAdapter(adapter);
    }
} 
```

## rsslist.xml

```
<TextView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rowtext"
android:layout_width="fill_parent"
android:layout_height="25px"
android:textSize="10sp" /> 
```

## 主.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<TextView
android:id="@+id/feedtitle"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:textColor="@color/EnlightenBlue"
android:textSize="20sp" />

<TextView
android:id="@+id/feeddescribtion"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal" />

<TextView
android:id="@+id/feedpubdate"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal" />

<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:autoLink="web"
android:id="@+id/feedlink" />
<ListView
android:id="@android:id/list"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" />
<TextView
android:id="@android:id/empty"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="No Data" />
</LinearLayout> 
```

我的清单中确实有互联网作为许可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:10:03.780

看起来您从未运行过异步任务。此外，您似乎正在尝试在`onCreate()`Activity 的方法中声明您的异步任务。您可能需要移至`onCreate()`Activity 本身的外部但仍位于其内部。

# python - 如何使用 pass 语句

> ID：13886168
> 
> 赞同：415
> 
> 时间：2012-12-14T20:59:30.383
> 
> 标签：python

我正在学习 Python，我已经到了关于`pass`语句的部分。我正在使用的指南将其定义为通常用作占位符的空语句。

我仍然不完全理解这意味着什么。将使用该语句的简单/基本情况`pass`是什么？为什么需要它？

* * *

## 回答 #1

> 赞同：496
> 
> 时间：2012-12-14T21:02:09.703

假设您正在设计一个带有一些您还不想实现的方法的新类。

```
class MyClass(object):
    def meth_a(self):
        pass

    def meth_b(self):
        print "I'm meth_b" 
```

如果您省略`pass`，则代码将无法运行。

然后你会得到：

```
IndentationError: expected an indented block 
```

总而言之，该`pass`语句没有什么特别的作用，但它可以充当占位符，如此处所示。

* * *

## 回答 #2

> 赞同：243
> 
> 时间：2014-03-24T14:51:43.987

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-07-10T19:25:10.840

除了用作未实现函数的占位符外，它`pass`还可用于填写 if-else 语句（“显式优于隐式。”）

```
def some_silly_transform(n):
    # Even numbers should be divided by 2
    if n % 2 == 0:
        n /= 2
        flag = True
    # Negative odd numbers should return their absolute value
    elif n < 0:
        n = -n
        flag = True
    # Otherwise, number should remain unchanged
    else:
        pass 
```

当然，在这种情况下，可能会使用`return`而不是赋值，但在需要突变的情况下，这效果最好。

这里的使用`pass`对于警告未来的维护者（包括你自己！）不要在条件语句之外放置多余的步骤特别有用。在上面的例子中，`flag`是在两个特别提到的情况下设置的，但在 - 情况下没有设置`else`。如果不使用`pass`，未来的程序员可能会移到`flag = True`条件之外——因此`flag`在*所有*情况下都设置。

* * *

另一种情况是文件底部经常出现的样板函数：

```
if __name__ == "__main__":
    pass 
```

在某些文件中，最好将其留在那里`pass`以便以后更轻松地编辑，并明确说明当文件单独运行时不会发生任何事情。

* * *

最后，正如其他答案中提到的，当捕获到异常时什么都不做可能很有用：

```
try:
    n[i] = 0
except IndexError:
    pass 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-01-12T21:21:38.603

最好和最准确的思考`pass`方式是明确告诉解释器什么都不做。以同样的方式下面的代码：

```
def foo(x,y):
    return x+y 
```

意思是“如果我调用函数 foo(x, y)，将标签 x 和 y 代表的两个数字相加并返回结果”，

```
def bar():
    pass 
```

意思是“如果我调用函数 bar()，什么都不做。”

其他答案非常正确，但对于一些不涉及占位的事情也很有用。

例如，在我最近编写的一段代码中，需要将两个变量相除，除数可能为零。

```
c = a / b 
```

如果 b 为零，显然会产生 ZeroDivisionError。在这种特殊情况下，在 b 为零的情况下，将 c 保留为零是所需的行为，因此我使用了以下代码：

```
try:
    c = a / b
except ZeroDivisionError:
    pass 
```

另一种不太标准的用法是为调试器放置断点的方便位置。例如，我想要一些代码在 for...in 语句的第 20 次迭代中闯入调试器。所以：

```
for t in range(25):
    do_a_thing(t)
    if t == 20:
        pass 
```

断点通过。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-14T21:09:06.313

一个可以“按原样”使用的常见用例是重写一个类只是为了创建一个类型（在其他方面与超类相同），例如

```
class Error(Exception):
    pass 
```

因此，您可以引发和捕获`Error`异常。这里重要的是异常的类型，而不是内容。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-12-10T05:49:39.167

`pass`在 Python 中基本上什么都不做，但与注释不同，解释器不会忽略它。因此，您可以通过使其成为占位符来在很多地方利用它：

1：可在课堂上使用

```
class TestClass:
    pass 
```

2：可用于循环和条件语句：

```
if (something == true):  # used in conditional statement
    pass

while (some condition is true):  # user is not sure about the body of the loop
    pass 
```

3：可用于功能：

```
def testFunction(args): # The programmer wants to implement the body of the function later
    pass 
```

`pass`主要用于程序员目前不想给出实现，但仍想创建某个类/函数/条件语句以供以后使用。由于 Python 解释器不允许空白或未实现的类、函数或条件语句，它会给出错误：

> IndentationError：需要一个缩进块

`pass`可以在这样的场景中使用。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-05-08T06:43:44.617

您可以说**pass**意味着**NOP**（无操作）操作。在这个例子之后你会得到一个清晰的画面：

**C程序**

```
#include<stdio.h>

void main()
{
    int age = 12;

    if( age < 18 )
    {
         printf("You are not adult, so you can't do that task ");
    }
    else if( age >= 18 && age < 60)
    {
        // I will add more code later inside it 
    }
    else
    {
         printf("You are too old to do anything , sorry ");
    }
} 
```

现在你将如何用 Python 编写它：

```
age = 12

if age < 18:

    print "You are not adult, so you can't do that task"

elif age >= 18 and age < 60:

else:

    print "You are too old to do anything , sorry " 
```

但是您的代码会出错，因为它需要在**elif**之后缩进块。这里是**pass**关键字的作用。

```
age = 12

if age < 18:

    print "You are not adult, so you can't do that task"

elif age >= 18 and age < 60:

    pass

else:

    print "You are too old to do anything , sorry " 
```

现在我想你很清楚了。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-05-27T13:51:29.437

pass 语句什么都不做。当语法上需要语句但程序不需要操作时，可以使用它。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-03-08T01:42:23.837

老实说，我认为[官方 Python 文档](https://docs.python.org/2/tutorial/controlflow.html#pass-statements)描述得很好，并提供了一些示例：

> *pass*语句什么都不做。当语法上需要语句但程序不需要操作时，可以使用它。例如：
> 
> `>>> while True: ... pass # Busy-wait for keyboard interrupt (Ctrl+C) ...`
> 
> 这通常用于创建最小类：
> 
> `>>> class MyEmptyClass: ... pass ...`
> 
> 当您处理新代码时，可以使用另一个位置*通道*作为函数或条件体的占位符，让您可以在更抽象的层面上继续思考。*pass*被默默地忽略：
> 
> `>>> def initlog(*args): ... pass # Remember to implement this! ...`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-05T15:45:49.073

如果你想导入一个模块，如果它存在，忽略导入它，如果那个模块不存在，你可以使用下面的代码：

```
try:
    import a_module
except ImportError:
    pass
# The rest of your code 
```

如果您避免编写*pass*语句并继续编写其余代码，则会引发 IndentationError，因为打开 except 块后的行没有缩进。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-14T21:05:06.307

正如书中所说，我只将它用作临时占位符，即

```
# code that does something to to a variable, var
if var == 2000:
    pass
else:
    var += 1 
```

然后在后面填写场景`var == 2000`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-11T04:48:02.293

除了“我不想让任何东西去这里”的“主要”用法之外，这是我刚刚找到的一个，假设`gen`是`Iterator`：

```
i = 0
obj = None

for i, obj in enumerate(gen):
    pass 
```

这将获得最后一个`yield`ed的对象`gen`和 的长度`gen`，一次完成。（类似于`while`在 C 中以分号结尾的循环，想想看。）

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-06-10T05:37:54.143

Python 中的 pass 语句用于语法上需要语句但您不希望执行任何命令或代码时。

pass 语句是一个空操作；执行时没有任何反应。pass 在你的代码最终会去但尚未编写的地方也很有用（例如，在存根中）：

例子：

```
#!/usr/bin/python

for letter in 'Python':
   if letter == 'h':
      pass
      print 'This is pass block'
   print 'Current Letter :', letter

print "Good bye!" 
```

这将产生以下结果：

```
Current Letter : P
Current Letter : y
Current Letter : t
This is pass block
Current Letter : h
Current Letter : o
Current Letter : n
Good bye! 
```

如果 letter 的值为 'h'，上述代码不会执行任何语句或代码。当您创建代码块时， pass 语句很有帮助，但不再需要它。

然后，您可以删除块内的语句，但让块保留 pass 语句，这样它就不会干扰代码的其他部分。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-01-09T18:52:36.410

Pass 指的是忽略……就这么简单。如果给定条件为真并且下一条语句为*pass*，它会忽略该值或迭代并继续下一行。

例子：

```
for i in range (1, 100):
    if i%2 == 0:
        pass
    else:
        print(i) 
```

输出：打印 1-100 的所有奇数

这是因为偶数的模等于零，因此它忽略该数字并继续下一个数字。由于奇数的模数不等于 0，循环的*else*部分被执行并被打印出来。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2019-05-19T03:45:04.577

pass 用于避免 Python 中的缩进错误。

如果我们采用 C、C++ 和 Java 等语言，它们的大括号如下：

```
 if(i==0)
 {}
 else
 {//some code} 
```

但是在 Python 中，我们使用缩进而不是大括号，因此为了避免此类错误，我们使用*pass*。

记得当你在做一个测验和

```
if(dont_know_the_answer)
    pass 
```

示例程序，

```
for letter in 'geeksforgeeks':
    pass
print 'Last letter: ', letter 
```

# python - 使用 BioPython 根据序列过滤 FASTA 文件

> ID：13886170
> 
> 赞同：2
> 
> 时间：2012-12-14T20:59:44.360
> 
> 标签：python, biopython, fasta

我有一个fasta文件。从该文件中，我需要获取在序列的末尾和/或开头包含`GTACAGTAGG`and的唯一序列，并将它们放入新的 fasta 文件中。`CAACGGTTTTGCC`所以这里有一个例子：

```
>m121012_054644_42133_c100390582550000001523038311021245_s1_p0/7/2516_3269
***GTACAGTAGG***GTACACACAGAACGCGACAAGGCCAGGCGCTGGAGGAACTCCAGCAGCTAGATGCAAGCGACTA
TCAGAGCGTTGGGTCCAGAACGAAGAACAGTCACTCAAGACTGCTTT***CAACGGTTTTGCC***

>m121012_054644_42133_c100390582550000001523038311021245_s1_p0/7/3312_3597
CGCGGCATCGAATTAATACGACTCACTATAGGTTTTTTTATTGGTATTTTCAGTTAGATTCTTTCTTCTTAGAGGGTACA
GAGAAAGGGAGAAAATAGCTACAGACATGGGAGTGAAAGGTAGGAAGAAGAGCGAAGCAGACATTATTCA

>m121012_054644_42133_c100390582550000001523038311021245_s1_p0/7/3708_4657
***CAACGGTTTTGCC***ACAAGATCAGGAACATAAGTCACCAGACTCAATTCATCCCCATAAGACCTCGGACCTCTCA
ATCCTCGAATTAGGATGTTCTCCCCATGGCGTACGGTCTATCAGTATATAAACCTGACATACTATAAAAAAGTATACCAT
TCTTATCATGTACAGTAGG***GTACAGTAGG***

>m121012_054644_42133_c100390582550000001523038311021245_s1_p0/7/4704_5021
***GTACAGTAGG***GTGGGAGAGATGGCAGAAAGGCAGAAAGGAGAAAGATTCAGGATAACTCTCCTGGAGGGGCGAG
GTGCCATTCCCTGTGGTCACTTATTCTAAAGGCCCCAACCCTTCAAC***CAACGGTTTTGCC***

>m121012_054644_42133_c100390582550000001523038311021245_s1_p0/8/4223_4358
AAATATTGGGTCAAAGAACCGTTACTTTTCTTATATATGCGGCGCGAGGTTTTATATACTGATAAGAACCTACGCCATGG
GACATCTAATTCAGAGGGAAGAAGGTCCATGTCTGTTTGGATGAAATTGAGTCTG 
```

（`*`添加用于突出显示）

我需要一些方法来获取在序列的末尾和/或开头包含 GTACAGTAGG 和 CAACGGTTTTGCC 的唯一序列，并将它们放在新的 fasta 文件中。我对此很陌生。我什至不确定是否可以做到。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:29:00.213

虽然检查字符串在结尾和/或开头是否具有特定序列对于 Python 来说确实是一项非常简单的任务（请参阅[`str.startswith`](http://docs.python.org/2/library/stdtypes.html#str.startswith)和[`str.endswith`](http://docs.python.org/2/library/stdtypes.html#str.endswith)），但这并不能解决从 FASTA 文件中提取序列作为字符串的问题。这里有一些问题，例如序列必须与其注释分开，而且它们可以跨越多行。因此，将字符串方法直接应用于文件的行不会产生所需的结果。

这就是为什么您需要一个实际的 FASTA 格式*解析器*。解析器将处理一个 FASTA 文件，并将注释和序列作为 Python 字符串提供给您。BioPython 确实提供了一个，你可以这样做：

```
from Bio import SeqIO
def filter_records(source, substrings):
    for rec in source:
        if any(rec.seq.startswith(sub) or rec.seq.endswith(sub)
                 for sub in substrings):
             yield rec

substrings = ('GTACAGTAGG', 'CAACGGTTTTGCC')
SeqIO.write(filter_recors(SeqIO.parse('my.fasta', 'fasta'),
            'filtered.fasta', 'fasta') 
```

我还可以推荐使用[`pyteomics`](http://pypi.python.org/pypi/pyteomics)（我参与开发的基于 Python 的蛋白质组学微框架）来操作 FASTA 文件：

```
from pyteomics import fasta
def filter_fasta(source, substrings):
    for descr, seq in source:
        if any(seq.startswith(sub) or seq.endswith(sub) for sub in substrings):
            yield descr, seq

substrings = ('GTACAGTAGG', 'CAACGGTTTTGCC')
fasta.write(filter_fasta(fasta.read('my.fasta'), substrings), 'filtered.fasta') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T03:37:14.913

这是在 Biopython 中执行此操作的一种方法：

```
from Bio import SeqIO

source = 'fasta_file_name.fa'
outfile = 'filtered.fa'
sub1 ='GTACAGTAGG'
sub2 = 'CAACGGTTTTGCC'

def seq_check(seq, sub1, sub2):
    # basically a function to check whether seq starts or ends with sub1 or sub2
    return seq.startswith(sub1) or seq.startswith(sub2) or \
        seq.endswith(sub1) or seq.endswith(sub2)

seqs = SeqIO.parse(source, 'fasta')
filtered = (seq for seq in seqs if seq_check(seq.seq, sub1, sub2))
SeqIO.write(filtered, outfile, 'fasta') 
```

我们正在使用生成器表达式（以 'filtered' 开头的行），因此过滤是在程序读取源文件时完成的。这具有节省内存的优点。

我们还创建了一个新函数来检查序列的开始和结束，以使程序更具可读性。理论上，您可以在生成器表达式中进行检查，但这会使行变得不必要地长。

希望有帮助:)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:32:43.030

可能不是最好的方法，具体取决于序列的大小，但这将完成工作。

```
import re
data_file ="location_of_fasta_file"
sequence = ''
Valid = False
for line in open(data_file):
    line = line.rstrip()
    if re.match("^>",line):
        if re.findall('^GTACAGTAGG',sequence) or re.findall('GTACAGTAGG$',sequence) or re.findall('^CAACGGTTTTGCC',sequence) or re.findall('CAACGGTTTTGCC$',sequence):
            print header_line
            print sequence
        header_line=line
        sequence = ''
        continue
    else:
        sequence += line
# below is needed to allow printing of final sequence which is not followed by a new fasta entry
if re.findall('^GTACAGTAGG',sequence) or re.findall('GTACAGTAGG$',sequence) or re.findall('^CAACGGTTTTGCC',sequence) or re.findall('CAACGGTTTTGCC$',sequence):
    print header_line
    print sequence 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T21:07:12.897

Python 有一个内置于字符串的方法，称为startswith()，还有一个称为endswith()。因此，您可以测试它是否以一个开头并以另一个结尾，反之亦然。

# solrcloud - shards 如何在 solrcloud 中了解彼此？

> ID：13886182
> 
> 赞同：0
> 
> 时间：2012-12-14T21:01:13.967
> 
> 标签：solrcloud

如果我们用 2 个分片启动 SolrCloud。通过哈希函数算法（Murmur），文档分布在 2 个分片上。据称，我们可以将查询发送到任何一个核心，并且它将转到写入分片，因为分片彼此了解。我想知道他们是怎么认识彼此的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:32:07.103

solr 与 zookeeper ensemble 一起成为 solrcloud。所以它是一个**zookeeper**，使 solrcloud 中的节点可以相互通信。您可以将 zookeeper 视为 solrcloud 配置的中央存储库。

现在您可以向云中的任何节点发送查询，该节点将咨询 zookeeper 以了解分片中哪些其他节点还活着，并将查询分发给集群中的所有活着的节点。集群中的每个节点都执行查询并将结果发送回分发请求的节点。被查询的节点会将分片中所有节点返回的搜索结果组合起来发送回客户端。

# java - LWJGL：在opengl 3+中返回Matrix4f的gluLookAt？

> ID：13886183
> 
> 赞同：1
> 
> 时间：2012-12-14T21:01:20.533
> 
> 标签：java, c++, opengl, lwjgl

我正在尝试用第三人称相机编写一个小游戏，我只是想知道 gluLookAt 函数。它适用于 Opengl 1.1，但我使用的是 3.2，所以我需要一些可以将 Matrix4f 返回给我的东西，但我在互联网上没有找到任何东西，除了 C++ 中的一些代码，我发现**很难**将它翻译成LWJGL（他们的 API 不一样，不，先生）。例如，我尝试重新制作此代码（[此链接](http://www.lighthouse3d.com/cg-topics/code-samples/opengl-3-3-glsl-1-5-sample/)）：

```
// ----------------------------------------------------
// View Matrix
//
// note: it assumes the camera is not tilted,
// i.e. a vertical up vector (remmeber gluLookAt?)
//

void setCamera(float posX, float posY, float posZ,
           float lookAtX, float lookAtY, float lookAtZ) {

float dir[3], right[3], up[3];

up[0] = 0.0f;   up[1] = 1.0f;   up[2] = 0.0f;

dir[0] =  (lookAtX - posX);
dir[1] =  (lookAtY - posY);
dir[2] =  (lookAtZ - posZ);
normalize(dir);

crossProduct(dir,up,right);
normalize(right);

crossProduct(right,dir,up);
normalize(up);

float aux[16];

viewMatrix[0]  = right[0];
viewMatrix[4]  = right[1];
viewMatrix[8]  = right[2];
viewMatrix[12] = 0.0f;

viewMatrix[1]  = up[0];
viewMatrix[5]  = up[1];
viewMatrix[9]  = up[2];
viewMatrix[13] = 0.0f;

viewMatrix[2]  = -dir[0];
viewMatrix[6]  = -dir[1];
viewMatrix[10] = -dir[2];
viewMatrix[14] =  0.0f;

viewMatrix[3]  = 0.0f;
viewMatrix[7]  = 0.0f;
viewMatrix[11] = 0.0f;
viewMatrix[15] = 1.0f;

setTranslationMatrix(aux, -posX, -posY, -posZ);

multMatrix(viewMatrix, aux);
} 
```

在“float aux [16]”之前我可以理解所有内容，然后我的脑海里就会变得一团糟，尤其是最后。有人可以帮我说清楚吗？也许有人已经做了“gluLookAt-clone”之类的？

**编辑：**

谢谢你，布雷特，现在我必须明白如何用代码来表达了）。你说“aux”是一个矩阵，但我们只给它3个浮点数，所以它最好是一个向量，但是如果它是一个向量，那么我如何将它与4x4 ViewMatrix相乘？而且我找不到只用数字填充 Matrix4f 的方法，lib 中没有方法可以做到这一点（很可能是因为我是菜鸟，我找不到它，但是嘿，我真的找不到）

**最终编辑：**

最后我让它工作了。我只是不了解所需的完整矩阵内容。这是最终的工作代码，如果有人感兴趣（我猜不是，但无论如何））。为了处理它，不要忘记在开始时设置投影矩阵。

```
void setCamera(float posX, float posY, float posZ,
            float lookAtX, float lookAtY, float lookAtZ) {
 Vector3f dir = new Vector3f(lookAtX - posX, lookAtY - posY, lookAtZ - posZ);
 Vector3f up = new Vector3f(0, 1f, 0);
 Vector3f right = new Vector3f();
dir.normalise();

 Vector3f.cross(dir,up,right);
 right.normalise();

 Vector3f.cross(right,dir,up);
 up.normalise();

 Matrix4f aux = new Matrix4f();

 viewMatrix = new Matrix4f();
 viewMatrix.m00 = right.getX();
 viewMatrix.m01  = right.getY();
 viewMatrix.m02 = right.getZ();
 viewMatrix.m03 = 0.0f;

 viewMatrix.m10  = up.getX();
 viewMatrix.m11  = up.getY();
 viewMatrix.m12 = up.getZ();
 viewMatrix.m13 = 0.0f;

 viewMatrix.m20 = -dir.getX();
 viewMatrix.m21  = -dir.getY();
 viewMatrix.m22 = -dir.getZ();
 viewMatrix.m23 =  0.0f;

 viewMatrix.m30  = 0.0f;
 viewMatrix.m31  = 0.0f;
 viewMatrix.m32 = 0.0f;
 viewMatrix.m33 = 1.0f;

//setup aux as a translation matrix by placing positions in the last column
aux.m30 = -posX;
aux.m31 = -posY;
aux.m32 = -posZ;

//multiplication(in fact translation) viewMatrix with aux
 Matrix4f.mul(viewMatrix, aux, viewMatrix);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:26:57.960

我有一个我使用的第一人称相机类（在 OpenGL 3.2 上），它处理运动：x、y 和 z 位置以及俯仰、偏航和滚动。我这样做的方法是更新每个周期的位置和渲染的一部分，我通过创建一个新的视图矩阵并将其作为统一发送到我的顶点着色器来从相机应用这些更新。

这是完成此操作的方法：

```
@Override
public void applyTranslations(int uniformLocation) {
    viewMatrix = new Matrix4f();
    Matrix4f.rotate(MatrixUtils.degreesToRadians(pitch), new Vector3f(1, 0, 0), viewMatrix, viewMatrix);
    Matrix4f.rotate(MatrixUtils.degreesToRadians(yaw), new Vector3f(0, 1, 0), viewMatrix, viewMatrix);
    Matrix4f.rotate(MatrixUtils.degreesToRadians(roll), new Vector3f(0, 0, 1), viewMatrix, viewMatrix);
    Matrix4f.translate(new Vector3f(-x, -y, -z), viewMatrix, viewMatrix);
    viewMatrix.store(matrix44Buffer); matrix44Buffer.flip();
    glUniformMatrix4(uniformLocation, false, matrix44Buffer);
} 
```

其中 uniformLocation 是我的 viewMatrix 制服在我的着色器中的位置。

步骤是：

1.  创建一个新的 4x4 矩阵
2.  为 x、y 和 z 轴应用旋转
3.  对 x、y 和 z 轴应用平移
4.  将矩阵发送到着色器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:07:12.630

该代码只是按照[`gluLookAt()`文档](http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml)中的描述填充矩阵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:12:15.877

直到`float aux[16]`，代码正在创建一个正交基（3 个相互垂直的向量作为“轴”）。[正交旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)的属性允许`viewMatrix`直接设置元素。`aux`然后（可能）填充为平移矩阵，然后将变换与`multMatrix`.

# jsf - JSF 渲染阶段（为什么要执行我的代码？）

> ID：13886185
> 
> 赞同：10
> 
> 时间：2012-12-14T21:01:22.190
> 
> 标签：jsf, jsf-2

我目前正在研究 JSF 应用程序的性能。我注意到即使渲染设置为 false，代码仍在执行。例如，以这段代码为例：

```
<h:panelGroup rendered="#{bean.render}">
    <my composite component here/>
</h:panelGroup> 
```

尽管 #{bean.render} 返回 false，但我可以从调试日志中清楚地看到，我的复合组件的代码正在渲染阶段执行。看起来代码在 #{bean.render} 甚至被调用之前就已经被执行了。它不会在返回给客户端的 HTML 中呈现，但似乎服务器仍在执行代码。

谁能解释一下？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T13:17:48.477

复合组件是在渲染响应阶段构建的。JSF 需要先填充组件树，然后根据组件树生成 HTML。您在复合组件内部显然引用了一些在视图构建期间必须评估的 bean 属性。

如果您想有条件地控制复合组件的构建而不是渲染，那么您需要使用条件视图构建时间标记而不是`rendered`属性。JSTL 为此提供了`<c:if>`and `<c:choose>`。

```
<c:if test="#{bean.build}">
    <my:composite />
</c:if> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:27:26.443

Jsf 必须知道您的组件是否被渲染或禁用或其他。假设您说 disabled="false" 它显示在 clint 端，并且客户端可能会更改值并提交表单，即使客户端禁用了 javascript，jsf 也会检查它在服务器端是否禁用 false 或 true。如果这是真的，那么由于 jsf 的流程验证阶段，它是不可接受的并且永远不会出现在您的 bean 中，与 render="false" 相同

# mysql - mysql：更新或创建提交日期比数据库新的条目

> ID：13886194
> 
> 赞同：0
> 
> 时间：2012-12-14T21:02:06.450
> 
> 标签：mysql

正如标题中所说，我想插入一个新值，或者如果它的主键已经存在，则更新该行，但前提是数据库值比给定的新值旧。

查询是这样的，但是 where 语句有问题

```
INSERT INTO myTable(field1_key, field2, datefield) VALUES('val1', 'val2', '2012-12-12 12:12:12')   
ON DUPLICATE KEY UPDATE
field2='val2'
datefield='2012-12-12 12:12:12'
WHERE datefield <'2012-12-12 12:12:12' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:05:23.187

如果它较新，只需用相同的值“替换”它：

```
INSERT INTO myTable(field1, field2, datefield) VALUES ('val1', 'val2', '2012:12:12 12:12')
ON DUPLICATE KEY UPDATE
datefield=IF(datefield < VALUES(datefield), VALUES(datefield), datefield),
field2=IF(datefield < VALUES(datefield), VALUES(field2), field2) 
```

# r - 数据框上的 R 公式

> ID：13886196
> 
> 赞同：1
> 
> 时间：2012-12-14T21:02:11.620
> 
> 标签：r, plyr

我想将我在一系列模型中使用的公式添加到 data.frame

```
require(plyr)
require(nlme)
str(baseball)
ba <- baseball[1:100,]
m01 <- gls( g ~ ab+I(r^2)+cos(pi*h),data=ba,correlation = corARMA(p=1))
m02 <- gls( g ~ I(ab^3)+r+cos(pi*h)+sin(pi*h),data=ba,correlation = corARMA(p=1))
m03 <- gls( g ~ ab+r,data=ba,correlation = corARMA(p=1)) 
```

我有 3 个模型，然后我想要两列：模型名称和公式

```
mof <-ldply(ls(pattern=glob2rx("m0*")))

mof <-ddply(mof, .(V1),transform, form =formula(V1)) 
```

这使

```
Error en as.data.frame.default(x[[i]], optional = TRUE) : 
  cannot coerce class '"formula"' into a data.frame 
```

我尝试了很多不同的东西，但无法让它发挥作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:20:22.567

当您使用语言元素时，一些规则会发生变化。您显然想要一两个字符列来标记您的结果，但是您在第一个“mof”对象中构造的是一个字符向量，其中只有模型的名称，而不是模型本身。

```
> str(mof)
'data.frame':   3 obs. of  1 variable:
 $ V1: chr  "m01" "m02" "m03" 
```

要使用字符向量从工作区检索模型，您需要使用`get`. 然后，它们将可用于使用功能`formula`和进行进一步处理`as.character`。然后您需要在最后“返回”到字符模式，因为类公式的对象不是有效的数据框组件。多合一的嵌套调用将是：

```
> forms.mat <- sapply( lapply( lapply(mof$V1, get) , formula), as.character)
> forms.mat
     [,1]                        [,2]                                      [,3]    
[1,] "~"                         "~"                                       "~"     
[2,] "g"                         "g"                                       "g"     
[3,] "ab + I(r^2) + cos(pi * h)" "I(ab^3) + r + cos(pi * h) + sin(pi * h)" "ab + r" 
```

您可以重新排列（以使波浪号重新回到 LHS 和 RHS 表达式之间并粘贴在一起（使用 collapse=""）：

```
> apply(forms.mat[ c(2,1,3),], 2, paste, collapse="")
[1] "g~ab + I(r^2) + cos(pi * h)"               "g~I(ab^3) + r + cos(pi * h) + sin(pi * h)"
[3] "g~ab + r" 
```

* * *

您可能通过使用列表来简化这一点：

```
> mof2 <- list(m01,m02,m03)  # Skipping the search of the workspace and reconstitution 
> lapply(mof2, formula)
[[1]]
g ~ ab + I(r^2) + cos(pi * h)
<environment: 0x2ef997c60>

[[2]]
g ~ I(ab^3) + r + cos(pi * h) + sin(pi * h)
<environment: 0x19fef52d0>

[[3]]
g ~ ab + r
<environment: 0x19fef68d8>

> sapply( lapply(mof2, formula), as.character )
     [,1]                        [,2]                                      [,3]    
[1,] "~"                         "~"                                       "~"     
[2,] "g"                         "g"                                       "g"     
[3,] "ab + I(r^2) + cos(pi * h)" "I(ab^3) + r + cos(pi * h) + sin(pi * h)" "ab + r" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:09:38.877

第一列是可以的模型名称，

```
mof <-ldply(ls(pattern=glob2rx("m0*"))) 
```

第二列应该是模型的公式

```
names(mof)[1] <- "model"
mof$formula <- as.character(lapply(mof$model,formula)) 
```

并且效果很好，之后我将添加带有更正 AIC 的列和其他用于模型选择的东西，但这很好用。

感谢所有评论者！

# php - 如何“自动使用”命名空间中的所有类？

> ID：13886197
> 
> 赞同：1
> 
> 时间：2012-12-14T21:02:23.070
> 
> 标签：php, namespaces

我正在使用使用命名空间的 Doctrine 框架。我想保留这些命名空间，但避免让我的开发人员担心在他们将处理的文件中使用所述命名空间。

例如，我有一个存储库和实体的命名空间，目前需要使用“Entity\MyEntity”或“Repository\MyRepo”进行访问。我希望这些可以通过“MyEntity”和“MyRepo”访问。

有没有办法从给定的命名空间“自动使用”类（对于该命名空间之外的类/代码）？

# bluetooth - 让您的计算机可被发现

> ID：13886199
> 
> 赞同：1
> 
> 时间：2012-12-14T21:02:45.027
> 
> 标签：bluetooth

我计算机上的 .net 应用程序需要使计算机可被发现，启动服务，然后等待接受传入连接。我的应用程序/计算机是从属设备，连接设备是主设备。所以我以编程方式将我的本地无线电模式更改为可发现，启动我的服务并等待......但是当设备应该连接到我的应用程序/计算机时，什么也没有发生。

Windows 帮助和支持有这个：

```
Control Panel ->search for bluetooth -> click on change bluetooth settings ->
To make your computer discoverable to Bluetooth enabled devices, 
select the check box for Allow Bluetooth devices to find this computer. 

When a Bluetooth enabled computer is in discovery mode, it broadcasts a 
wireless signal that allows it to be detected by other computers or devices. 
This is sometimes called pairing mode. If you check this box, your computer 
will still be able to detect Bluetooth enabled devices that are in discovery mode,
but they will not be able to detect your computer. 
```

我不太确定上下文是什么。如果我选中该框，那么其他设备将能够检测到我（因为我设置为可发现），但无法连接？？？？？？所以我的服务一直在监听，无法检测到任何传入的请求？我对吗？

# command - 如何在 Windows 7 上使用命令提示符将文件提取到 Jar 文件中？

> ID：13886200
> 
> 赞同：1
> 
> 时间：2012-12-14T21:02:51.710
> 
> 标签：command, extract, prompt

我想将文件提取到 jar 文件中，我可以用命令提示符做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:08:54.127

将文件插入/压缩到 jar (foobar.jar)

```
jar cvf foobar.jar foo.txt bar.txt 
```

提取所有这些

```
jar xvf foobar.jar 
```

例如仅提取 foo.txt

```
jar xvf foobar.jar foo.txt 
```

# cgal - CGAL：与 Exact_circular_kernel_2 的安排

> ID：13886201
> 
> 赞同：1
> 
> 时间：2012-12-14T21:02:54.790
> 
> 标签：cgal

我正在尝试使用`Exact_circular_kernel_2`. 当我在 Arrangement 中插入一个 Circle 时，出现分段错误。
这是我的代码：

```
CGAL::Circle_2< CGAL::Exact_circular_kernel_2 > circle1( CGAL::Point_2< CGAL::Exact_circular_kernel_2 >(1,1), 2 );
CGAL::Exact_circular_kernel_2::Circle_2 circle2 = circle1;
CGAL::Circular_arc_2< CGAL::Exact_circular_kernel_2 > arc( circle2 );
CGAL::Arr_circular_line_arc_traits_2< CGAL::Exact_circular_kernel_2 >::Curve_2 curve = arc;
CGAL::Arrangement_2< CGAL::Arr_circular_line_arc_traits_2< CGAL::Exact_circular_kernel_2 > > myArrangement;
cout<<curve<<endl;
cout<<myArrangement.is_valid()<<endl;
insert ( myArrangement, curve );
cout<<"done"<<endl; 
```

代码在没有警告的情况下编译，无论我使用`circle1`还是`circle2`在第 3 行，结果都是一样的。

该程序在分段错误发生之前打印以下内容：

> 1/1 1/1 2/1 1 0 1/1 -1/1 2/1 1 1/1 0 1/1 -1/1 2/1 1 1/1
> 1

`myArrangement`因此和的值的值`curve`似乎是有效的。

任何想法我做错了什么？

我知道我可以使用另一个内核，但我想比较不同内核的性能，所以不使用这个内核并不是一个真正的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:58:36.323

我无法重现该问题。

下面是一个稍微干净一点的版本，但你的版本也适用于我的平台，Ubuntu 12.04、g++ 4.6.3、CGAL 4.1（或至少接近 4.1），你的是什么？

```
#include <iostream>
#include <CGAL/Exact_circular_kernel_2.h>
#include <CGAL/Arr_circular_line_arc_traits_2.h>
#include <CGAL/Arrangement_2.h>

typedef CGAL::Exact_circular_kernel_2                           Kernel;
typedef Kernel::Point_2                                         Point_2;
typedef Kernel::Circle_2                                        Circle_2;
typedef CGAL::Arr_circular_line_arc_traits_2<Kernel>            Traits;
typedef Traits::Curve_2                                         Curve_2;
typedef CGAL::Arrangement_2<Traits>                             Arrangement;
int main()
{
  Circle_2 circle(Point_2(1,1), 2);
  Curve_2 curve(circle);
  Arrangement arr;
  std::cout << curve << std::endl;
  std::cout << arr.is_valid() << std::endl;
  CGAL::insert(arr, curve);
  std::cout << "done" << std::endl;
  return 0;
} 
```

# python - 使用 python 和 selenium webdriver 的网页数据提取自动化

> ID：13886205
> 
> 赞同：-4
> 
> 时间：2012-12-14T21:03:02.417
> 
> 标签：python, selenium

我可以知道让它正常工作我需要在我的电脑上安装什么软件吗？

***更新***

我得到的错误是：

运行时出现此错误`pip install -U selenium`。在脚本的中途，它得到以下 SyntaxError：

```
 Traceback (most recent call last):
      File "<string>", line 14, in <module>
      File "C:\Python32\Scripts\build\rdflib\setup.py", line 6, in <module>
        from rdflib import __version__
      File "rdflib\__init__.py", line 64, in <module>
        from rdflib.term import URIRef, BNode, Literal, Variable
      File "rdflib\term.py", line 367
        except TypeError, te:
                        ^
    SyntaxError: invalid syntax
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 14, in <module>

  File "C:\Python32\Scripts\build\rdflib\setup.py", line 6, in <module>

    from rdflib import __version__

  File "rdflib\__init__.py", line 64, in <module>

    from rdflib.term import URIRef, BNode, Literal, Variable

  File "rdflib\term.py", line 367

    except TypeError, te:

                    ^

SyntaxError: invalid syntax

----------------------------------------
Command python setup.py egg_info failed with error code 1 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:10:10.323

[您只需要这里](http://pypi.python.org/pypi/selenium)的 python和[这里](http://www.python.org/download/)的 selenium 。

Windows 7 或其他系统：

要安装`selenium`，解压`tr.gz`文件，`cd`进入目录，然后`python setup.py install`.

或者你可以这样使用`pip`：

`pip install -U selenium`

* * *

专门针对linux，使用

```
$ sudo apt-get install python-pip
$ sudo pip install selenium 
```

在windows上安装：

[从这里](http://pypi.python.org/pypi/setuptools)下载 selenium，从[这里](http://pypi.python.org/pypi/selenium)下载setuptools 。在您选择的任何地方提取它们，在这种情况下，我将它们提取到.`c:\Users\User\Desktop\..`

cd 进入目录然后执行`python setup.py install`如果它说找不到 python 尝试`c:\Python27\python.exe setup.py install`首先安装设置工具： ![在此处输入图像描述](../Images/f58deaa7b1c7e134a36a7ba2c1e6b597.png)

接下来 cd 进入 selenium 目录并执行以下操作`python setup.py install`： ![在此处输入图像描述](../Images/d6d39902eff55e87b4526360b7d53dbd.png)

如果一切顺利，就不应该出现任何错误，并且您已经准备好使用 selenium。 ![在此处输入图像描述](../Images/248c2bc0c89ecd7688b488052d8d39e2.png)

# cryptography - 使用两个公钥加密文件

> ID：13886209
> 
> 赞同：2
> 
> 时间：2012-12-14T21:03:28.490
> 
> 标签：cryptography, public-key-encryption, pgp

我不确定这是否是这个问题的正确位置，因为这可能更像是一个基于理论的问题。但我也对以下的 C# 实现感兴趣。以及它的可行性

我打算使用 PGP 对文件进行加密和解密。是否可以使用两个公钥（我的公钥和接收者的公钥）加密文件，以便我能够使用其中一个私钥解密文件。这种情况可行吗？那么我应该采取什么方向来正确实施相同的方法。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T06:39:31.903

在高级别（如果您使用任何 PGP API），是的，您可以将两个或更多公共 PGP 密钥传递给 OpenPGP API（或软件）并加密数据。然后，您将能够使用与任何使用的公共 PGP 密钥相对应的 PGP 密钥来解密数据。

在较低级别 - OpenPGP 总是生成一个对称密钥来加密数据，然后使用一个或多个公共 PGP 密钥对该密钥进行加密，因此使用多少个密钥没有区别。

现在，使用什么取决于您使用的平台和开发环境（因为这是一个编程站点，我们假设您要在代码中加密数据）。对于 Linux 和 C，存在 GnuPG 库。对于 Java 和 C#，BouncyCastle 中有一些 PGP 支持。最后，我们的 SecureBlackbox 库的 OpenPGPBlackbox 为多种平台和语言（包括 .NET、VCL、ActiveX 和 C++）提供了完整的 OpenPGP 功能。

附带说明一下，您接受的答案是完全错误的，因此我强烈建议您不接受它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T22:06:19.817

看看这个维基页面：

[http://en.wikipedia.org/wiki/Pretty_Good_Privacy](http://en.wikipedia.org/wiki/Pretty_Good_Privacy)

您将看到实际数据是用随机密钥加密/解密的，而这个随机密钥是用相应的公钥/私钥加密/解密的。

因此，您不必使用两个密钥来加密文件（数据）。您仍然使用一个随机密钥加密数据。唯一的区别是您使用多个公钥（例如您的和接收者的）加密这个随机密钥。

结果，你们中的任何人都可以使用私钥解密随机密钥并解密数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:17:00.137

这个问题也可能属于crypto.stackexchange.com，但在这里也可以。我不确定您是否了解 PGP 的原理。公钥用于加密，私钥用于解密。因此，如果您使用您的公钥对其进行加密，则接收者将使用他/她的私钥来解密和/或签名。

有关更多信息，我建议您阅读有关 RSA 或 ElGamal 算法的信息。希望对您有所帮助：

*   [http://en.wikipedia.org/wiki/RSA](http://en.wikipedia.org/wiki/RSA)
*   [http://en.wikipedia.org/wiki/ElGamal_encryption](http://en.wikipedia.org/wiki/ElGamal_encryption)
*   [http://en.wikipedia.org/wiki/ElGamal_signature_scheme](http://en.wikipedia.org/wiki/ElGamal_signature_scheme)

这两种算法都提供了一个很好的起点。或者您可能想加入斯坦福大学提供的一些在线课程：

*   [https://www.coursera.org/course/crypto](https://www.coursera.org/course/crypto)
*   [https://www.coursera.org/course/crypto2](https://www.coursera.org/course/crypto2)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-14T21:08:07.027

我可以看到它工作的唯一方法是拥有一个包含两个文件的 zip 或 tar 存档：一个使用密钥 1 加密，另一个使用密钥 2。

如果文件是文本，您可以将同一原始文件的两个不同加密版本粘贴到一个文档中。

无法加密文件，因此可以使用我知道的两个不同的密钥对其进行解密。

# php - 用于强制下载 apk 文件的标头

> ID：13886212
> 
> 赞同：3
> 
> 时间：2012-12-14T21:03:39.693
> 
> 标签：php, android, header, download, apk

我正在编写一个脚本来增加 APK 文件下载的计数器，然后将文件发送到浏览器进行下载。

这是我所拥有的：

```
<?php
    $file = "android.apk";

    function force_download($file){
    header("Pragma: public", true);
    header("Expires: 0"); // set expiration time
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Type: application/force-download");
    header("Content-Type: application/octet-stream");
    header("Content-Type: application/download");
    header("Content-Disposition: attachment; filename=".basename($file));
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: ".filesize($file));
    die(file_get_contents($file));
    }

    force_download($file 
```

问题是使用像Firefox这样的浏览器，它会下载但它就像'android.apk - 0 bytes'。所以它本质上不会下载文件的内容。

我可能做错了什么？解决方案？

**重要提示**：它必须在移动设备上工作。

);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:46:11.517

我已经意识到我不需要使用复杂的标头信息，特别是如果脚本将从服务器移动到 .apk mime 类型不是本机的服务器，因此对于新手来说可能很难设置。

一个简单的重定向就可以了：

```
$file_name = $_GET['f']; //$_GET['f'] has the link to the file like http://mydomain.com/file/android.apk

//Do database query or increase download counter

header('location: '.$file_name); 
```

瞧！我增加了计数器，下载将被推送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:19:52.287

我从未访问过不强制下载的 .apk 链接，所以我不确定强制下载的需要是什么。至于增加计数器，我可能只是链接到在计数器完成后转发到 apk 文件的页面。

例如将某人链接到：getapk.php?apkid=1

然后在 getapk.php 上做这样的事情：

```
 $update = mysql_query("UPDATE apps SET downloads...");
 if ( $update ) { header("Location: appname.apk"); } 
```

当然，这会遗漏很多细节，但如果您需要其他任何帮助，我很乐意提供更多细节。

# bash - 将 Ctrl-A 和 Ctrl-D 从 shellscript 发送到 GNU 屏幕

> ID：13886216
> 
> 赞同：3
> 
> 时间：2012-12-14T21:03:50.467
> 
> 标签：bash, signals, send, gnu-screen

如何将 CTRL-A 和 CTRL-D 的信号从 shell 脚本发送到屏幕？下一个代码对我不起作用。屏幕进程仍在前台运行，我希望它在后台执行。任何的想法？

```
#!/bin/sh
#TweetBot notifications with Growl

cd ~/node-tweetbot/
screen -S "tweet" node app.js -X stuff "'^A' '^D'" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:08:51.897

您可以简单地`screen`以分离模式启动。从手册页：

```
 -d -m   Start screen in "detached" mode. This creates a new session but
           doesn't  attach  to  it.  This  is  useful  for  system startup
           scripts. 
```

所以这：

```
screen -S tweet -d -m node app.js 
```

将启动您的屏幕会话分离。您可以稍后通过运行附加到它：

```
screen -x tweet 
```

# travis-ci - 删除 Travis CI 旧版本

> ID：13886218
> 
> 赞同：34
> 
> 时间：2012-12-14T21:04:06.417
> 
> 标签：travis-ci

这是我使用 Travis CI 的第一天。我犯了一些错误，我尝试再次删除和添加存储库，但 Travis CI 构建历史仍然存在，旧提交的链接断开。

有没有机会删除那些旧版本？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-12-22T02:04:00.043

您可以使用`travis`命令行工具

首先使用登录，`travis login`然后您可以执行以下操作

```
LAST_BUILD_NUMBER=68
for i in $(seq 1 $LAST_BUILD_NUMBER ); do  travis logs $i --delete --force ; done 
```

这将删除“日志”，因此除了标题之外没有任何信息，并且任何机密信息都将不再可见。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-14T21:58:03.083

用户无法删除构建，但如果您真的希望删除它们，我认为您最好的选择是通过电子邮件发送支持 (support@travis-ci.org) 并要求他们手动删除它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-15T00:27:24.210

根据[https://twitter.com/travisci/status/557932883571392512](https://twitter.com/travisci/status/557932883571392512)

至少从 2015/01/21 开始，您现在可以从 Web UI 中删除 [日志]：

[![travis web ui 删除日志](../Images/dbd8b4c1ca82f402412a3dba22f2f825.png)](https://i.stack.imgur.com/uyXrs.gif)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-23T21:33:52.863

作为 henrikhodne，构建删除是不可能的。

来自提出问题的[https://github.com/travis-ci/travis-ci/issues/877](https://github.com/travis-ci/travis-ci/issues/877) ( [mirror](https://web.archive.org/web/20170423213400/https://github.com/travis-ci/travis-ci/issues/877) )：

> 永久关闭此问题，因为这不在近期的路线图上。（2015 年 7 月 23 日）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-08-24T17:03:54.043

另一种清除一切的方法会导致：

*   从 Travis CI 中删除所有构建历史
*   从 Travis CI 中删除 repo
*   从 GitHub 中删除 repo 数据（所有问题、PR、wiki、**一切**）
*   删除所有悬空提交`git push -f`

首先确保您在 Travis 和远程存储库中拥有所有设置的屏幕截图/备份/... + 您拥有远程存储库的***1to1***镜像（意味着您的***所有***分支都已正确下载到本地存储库）。这应该是可能的`git clone`，`git fetch`甚至可能是`git checkout`每个分支，这样你就可以在本地获得所有可用的历史记录（如果我忘记了某个步骤，请纠正我）。

然后你想去你的远程服务器，例如 GitHub 并删除存储库 ( `Settings`- `Danger Zone`- `Delete this repository`)。您所有的问题、PR、维基、任何设置现在都**消失**了。然后再次在 GitHub 上创建同名存储库（**不要！**用任何东西初始化它，没有许可证，没有自述文件，什么都没有）。

现在所有将通过本地清理的悬空提交`git gc`都从远程仓库中消失了（隐秘的 GitHub 链接消失了！）。任何应该是裸`repo.git`文件夹的东西都应该被覆盖（除非 GitHub 没有做傻事）。

继续并转到 Travis CI 个人资料：

```
https://travis-ci.org/profile/<username> 
```

按下方`Sync account`并`My account`检查 Travis 存储库。所有设置和构建历史现在也应该消失了。

现在要么删除 GitHub 存储库并再次重新同步，要么继续恢复：

```
git push -u origin <branch name>  # repeat for each branch 
```

转到您的设置备份（例如屏幕截图）并按照以前的方式设置所有内容。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-01-04T00:09:40.093

你可以点击`Remove log`按钮

![截屏](../Images/72d2ca15e2a2e89b1356e2f3b7bb57eb.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-08T03:54:22.570

我能够简单地擦除 Travis 构建历史。

我正在通过我的 Github 帐户登录到 travis-ci.org。

我进入 travis-ci-org，然后点击 + 以显示所有存储库：

[![去回购](../Images/4787969c37278f6afa52f720637a7295.png)](https://i.stack.imgur.com/if7Wt.png)

然后我通过翻转这个切换关闭了有问题的 repo 的 Travis CI：

[![在此处输入图像描述](../Images/ef8d1b9a16cee43bca3365432d03cf9e.png)](https://i.stack.imgur.com/4EGMZ.png)

在 Github 中，我重命名了我的 repo。

然后我点击左上角的“同步帐户”。

[![同步帐号](../Images/dee9fd727ee6f36a0de9464658655e41.png)](https://i.stack.imgur.com/EXsdQ.png)

对于我的最后一步，我在新的 repo 名称下重新打开了该开关。

瞧——没有特拉维斯的历史。我手动触发了构建，现在一切都很干净。

# android - 带有 CheckBox setChecked(true) 的 Android Spinner 不起作用

> ID：13886220
> 
> 赞同：5
> 
> 时间：2012-12-14T21:04:07.333
> 
> 标签：android

如果我尝试设置 CheckBox 的选中状态，它不起作用，我已经阅读了其他人的许多线程，我所能得到的是它每次都返回一个不同的复选框，但我正在设置这个新的复选框，所以为什么它没有在我的微调器中检查？

```
 classesName.setAdapter(new SpinnerAdapter() {

        @Override
        public void unregisterDataSetObserver(DataSetObserver observer) {

        }

        @Override
        public void registerDataSetObserver(DataSetObserver observer) {

        }

        @Override
        public boolean isEmpty() {

            return false;
        }

        @Override
        public boolean hasStableIds() {

            return false;
        }

        @Override
        public int getViewTypeCount() {

            return 0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {

            LayoutInflater inflater = Registeration.this.getLayoutInflater();
            View spinView = inflater.inflate(R.layout.classes_registeration_ddl, null);
                CheckBox rbtn = (CheckBox) spinView.findViewById(R.id.radioButtonClassesReg);
                    rbtn.setChecked(true);

return spinView;

        }

        @Override
        public int getItemViewType(int arg0) {

            return 0;
        }

        @Override
        public long getItemId(int arg0) {

            return arg0;
        }

        @Override
        public Object getItem(int arg0) {

            return classesArr[arg0];
        }

        @Override
        public int getCount() {

            return classesArr.length;
        }

        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = Registeration.this.getLayoutInflater();
            View spinView = inflater.inflate(R.layout.classes_registeration_ddl, null);
                CheckBox rbtn = (CheckBox) spinView.findViewById(R.id.radioButtonClassesReg);
                    rbtn.setChecked(true);
return spinView;
            }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:40:19.387

原因是 android ListView 的代码在 getDropDownView 之后运行以跟踪选定的状态。您可以使用自定义 CheckBox 类解决此问题，该类覆盖 isChecked 并根据父数据返回 true/false。

# java - IDE 外的 Java 应用程序未使用 Weka 类

> ID：13886227
> 
> 赞同：2
> 
> 时间：2012-12-14T21:05:17.030
> 
> 标签：java, netbeans, weka

尝试在 Netbeans IDE 之外运行我的应用程序时遇到一些问题。我有一个 GUI，它正在调用我自己的一些类和方法，而这些类和方法又在调用一些 Weka 类。Weka 类给出了一个输出，该输出显示在 GUI 上。现在，当我在 IDE 上执行此操作时，输出会正确显示。但是，当我尝试创建应用程序的 jar 并尝试从 IDE 外部运行 jar 时，不会显示 Weka 类的输出。不过，我用来对数据进行一些解析和处理的类工作正常。最初我认为这是没有正确包含外部 jar 的问题，但我检查了 *PROJECT_HOME*/dist/lib 文件夹，并且 weka.jar 文件似乎在那里。有人可以帮我解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:46:53.013

我可以告诉你的一件事是我在 IDE 之外开发了一个应用程序。您只需要在您的应用程序目录中获取 WEKA 包文件夹并将其作为包导入您的 java 类应用程序中，然后直接调用 WEKA 分类器或您希望的任何其他工作。例如，我正在使用 PART Classifier 以下代码工作并且不言自明。

```
import java.io.*;
import java.util.Random;
import weka.core.Instances;
import weka.classifiers.Classifier;
import weka.classifiers.rules.PART;
import weka.classifiers.Evaluation;

public class Prediction 
 {

     public double Create(String Rf1,String Rf2,String Rf3) throws Exception
    {
        input p = new input();
    double res=p.classify(Rf1,Rf2,Rf3);
    return res;
    }
 }

  class input
    {
        public double classify(String file1,String file2,String file3) throws Exception
        {
     // ------------> 1\. Reading from an ARFF file

            FileReader fr = new FileReader(file1);
            BufferedReader br = new BufferedReader(fr);

                Instances data = new Instances(br);
            br.close();

            // setting class attribute
            data.setClassIndex(data.numAttributes() - 1);

            // -------------> 2\. Building a Classifier

            String[] options = new String[1];
            options[0] = "M 2 -C 0.25 -Q 1"; // confidenceFactor = 0.25, minNumObject = 2
            PART tree = new PART(); // new instance of tree
            tree.setOptions(options); // set the options
            tree.buildClassifier(data); // build classifier
            // -------------> 3\. Cross-validation

            Evaluation eval = new Evaluation(data);
            eval.crossValidateModel(tree, data, 10, new Random(1));

            // check --------------> 4\. Train

            Instances train = new Instances(data);
            Instances test = new Instances(train);

            // train classifier
            Classifier cls = new PART();
            cls.buildClassifier(train);

            // evaluate classifier and print some statistics
            Evaluation eval1 = new Evaluation(train);
            eval1.evaluateModel(cls, test);

            //System.out.println(eval1.toSummaryString("\nResults\n======\n", false));

            // ----------------> 5\. Statistics

            String[] options1 = new String[2];
            options1[0] = "-t";
            options1[1] = file1;

            // ----------------> 6\. Classifying instances

            // load unlabeled data
            FileReader fr2 = new FileReader(file2);
            BufferedReader br2 = new BufferedReader(fr2);

            Instances unlabeled = new Instances(br2);

            // set class attribute
            unlabeled.setClassIndex(unlabeled.numAttributes() - 1);

            // create copy
            Instances labeled = new Instances(unlabeled);  
            double clsLabel[];
            clsLabel = new double[100];
            int count = 0;

            // label instances
            for (int i = 0; i < unlabeled.numInstances(); i++)
            {
                clsLabel[i] = tree.classifyInstance(unlabeled.instance(i));
                labeled.instance(i).setClassValue(clsLabel[i]);
                count++;
            }

            // save labeled data
            FileWriter fw = new FileWriter(file3);
            BufferedWriter bw = new BufferedWriter(fw);

            bw.write(labeled.toString());
            bw.newLine();
            bw.flush();
            bw.close();
            fw.close();

                for(int i=0;i<count;i++)
                System.out.println(clsLabel[i]);
            return clsLabel[0];
        } // main
    } // class 
```

# powershell - Windows Server 2008 R2 PowerShell 和 Internet Explorer 9

> ID：13886233
> 
> 赞同：2
> 
> 时间：2012-12-14T21:05:58.350
> 
> 标签：powershell, internet-explorer-9, windows-server-2008-r2

这是一个在 Server 2003 下运行良好的 Powershell 脚本。我们需要迁移到 Server 2008 R2 并且该脚本无法正常工作。具体来说，脚本在等待 IE 完成页面加载时没有休眠。

```
$objIE = New-Object -ComObject "InternetExplorer.Application"
if($objIE.ReadyState -notmatch "0|1|2|3|4")
{
    $objIE = [System.Runtime.InteropServices.Marshal]::GetActiveObject("InternetExplorer.Application")
    if($objIE.ReadyState -notmatch "0|1|2|3|4")
    {
        Stop-Process -processname iexplore
        $objIE = New-Object -ComObject "InternetExplorer.Application"
    }
}

$objIE.Visible = $giShowResults

$objIE.Navigate($gsURL + "APAdmin.asp?cmd=login&loginname=" + $gsAdminName + "&password=" >>+ $gsAdminPassword)
while($objIE.Busy -eq $true)
{                        
    $dtNow = Get-Date
    Start-Sleep 1 # Sleep for one second
}
$objIE.Navigate($gsURL + "APAdmProcessClosings.asp?cmd=run&AutomatedProcess=y")
while($objIE.Busy -eq $true)
{
    Start-Sleep 1 # Sleep for one second
} 
```

当我在 Visible 设置为 true 的情况下运行时，我可以看到 IE 打开，加载 APAdmin.asp 页面，然后脚本说它在没有运行 APAdmProcessClosings.asp 页面的情况下完成。

我已经搜索了网络，但还没有找到任何原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:10:54.747

看来增强的安全配置是问题所在。一旦我将该站点添加到受信任站点列表中，该作业就会成功运行。

# vb.net - 将 C++ 转换为 VB.NET

> ID：13886235
> 
> 赞同：0
> 
> 时间：2012-12-14T21:06:14.417
> 
> 标签：vb.net, winapi, sendmessage

目的是使用 winapi sendmessage 将消息从 vb.net 应用程序发送到另一个应用程序。我无法让它工作。非常感谢您的帮助

这是我所拥有的，但它似乎不起作用

```
Public Class WinAPI
    Private hwnd As Integer
    Private Declare Auto Function FindWindow Lib "user32" _
           (ByVal lpClassName As String, _
           ByVal lpWindowName As String) As IntPtr

    'FindWindowByClass
    Private Declare Auto Function FindWindow Lib "user32" _
             (ByVal lpClassName As String, _
             ByVal zero As IntPtr) As IntPtr

    'FindWindowByCaption
    Private Declare Auto Function FindWindow Lib "user32" _
             (ByVal zero As IntPtr, _
             ByVal lpWindowName As String) As IntPtr

    Private Declare Auto Function SendMessage Lib "user32" _
        (ByVal hWnd As IntPtr, _
         ByVal Msg As Integer, _
         ByVal wParam As IntPtr, _
         ByRef lParam As COPYDATASTRUCT) As Boolean

    Public Const WM_COPYDATA As Integer = &H4A

    <StructLayout(LayoutKind.Sequential)> _
    Structure COPYDATASTRUCT
        Dim dwData As Long
        Dim cbData As Long
        Dim lpData As IntPtr
    End Structure

    Public Sub SendToeSignal(ByVal strMessage As String)
        hwnd = FindWindow(vbNullString, "eSignalSink")
        ' hwnd = FindWindow("eSignalSink", "vbNullString")
        Dim DataStruct As New COPYDATASTRUCT
        ' strMessage = "1" & "," & strMessage & Chr(0) & vbCr 'Null terminated & carriage return
        strMessage = "1" & "," & strMessage & vbCr 'Null terminated & carriage return

        DataStruct.dwData = 1
        DataStruct.cbData = strMessage.Length * Marshal.SystemDefaultCharSize
        DataStruct.lpData = Marshal.StringToCoTaskMemAuto(strMessage)

        SendMessage(hwnd, WM_COPYDATA, 0, DataStruct)
        Marshal.FreeCoTaskMem(DataStruct.lpData)

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:59:35.980

看起来你有一个 VB6 风格的定义，[`COPYDATASTRUCT`](http://www.pinvoke.net/default.aspx/Structures/COPYDATASTRUCT.html) 而不是你的 try this。

从上面的 PInvoke 链接：

```
<StructLayout(LayoutKind.Sequential)> _
Structure COPYDATASTRUCT 
   Public dwData As IntPtr
   Public cdData As Integer
   Public lpData As IntPtr
End Structure 
```

* * *

首先，请帮自己一个忙，[`Option Strict`](http://msdn.microsoft.com/en-US/library/zcd4xwzs%28v=vs.100%29.aspx)特别是在使用 API 函数时启用。您正在您的应用程序之间发送一个结构，并且需要确保您可以在接收应用程序中检索它。我对您的示例代码进行了一些更改，它确实有效，在主窗体名为的测试程序中接收数据`TestApp`。

**您的修改示例**

```
Option Strict On
Imports System.Runtime.InteropServices

Public Class Form1

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        Dim myWinAPI As WinAPI = New WinAPI
        myWinAPI.SendToeSignal("Hello World")
        ' Add any initialization after the InitializeComponent() call.
    End Sub
End Class

Public Class WinAPI

    Private hwnd As IntPtr
    Private Declare Auto Function FindWindow Lib "user32" _
           (ByVal lpClassName As String, _
            ByVal lpWindowName As String) As IntPtr

    'FindWindowByClass
    Private Declare Auto Function FindWindow Lib "user32" _
           (ByVal lpClassName As String, _
            ByVal zero As IntPtr) As IntPtr

    'FindWindowByCaption
    Private Declare Auto Function FindWindow Lib "user32" _
           (ByVal zero As IntPtr, _
            ByVal lpWindowName As String) As IntPtr

    Private Declare Auto Function SendMessage Lib "user32" _
           (ByVal hWnd As IntPtr, _
            ByVal Msg As Integer, _
            ByVal wParam As IntPtr, _
            ByRef lParam As COPYDATASTRUCT) As Boolean

    Public Const WM_COPYDATA As Integer = &H4A

    <StructLayout(LayoutKind.Sequential)> _
    Structure COPYDATASTRUCT
        Dim dwData As IntPtr
        Dim cbData As Integer
        Dim lpData As IntPtr
    End Structure

    Public Sub SendToeSignal(ByVal strMessage As String)
        hwnd = FindWindow(IntPtr.Zero, "TestApp")
        Dim DataStruct As New COPYDATASTRUCT
        strMessage = "1" & "," & strMessage & vbCr 'Null terminated & carriage return

        DataStruct.dwData = CType(1, IntPtr)
        DataStruct.cbData = strMessage.Length * Marshal.SystemDefaultCharSize
        DataStruct.lpData = Marshal.StringToCoTaskMemAuto(strMessage)

        SendMessage(hwnd, WM_COPYDATA, IntPtr.Zero, DataStruct)
        Marshal.FreeCoTaskMem(DataStruct.lpData)

    End Sub

    Public Sub New()

    End Sub
End Class 
```

**接收申请**

```
Imports System.Runtime.InteropServices
Imports System.Text

Public Class Form1
    <StructLayout(LayoutKind.Sequential)> _
    Structure COPYDATASTRUCT
        Dim dwData As IntPtr
        Dim cbData As Integer
        Dim lpData As IntPtr
    End Structure
    Public Const WM_COPYDATA As Integer = &H4A
    Dim split() As String = New String() {",", " "}
    Dim myData() As String

    Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
        MyBase.WndProc(m)
        If m.Msg = WM_COPYDATA Then
            Dim CD As COPYDATASTRUCT = DirectCast(m.GetLParam(GetType(COPYDATASTRUCT)), COPYDATASTRUCT)
            Dim B As Byte() = New Byte(CD.cbData - 1) {}
            Dim lpData As IntPtr = CD.lpData
            Marshal.Copy(lpData, B, 0, CD.cbData)
            Dim strData As String = Encoding.[Default].GetString(B)
            myData = strData.Split(split, StringSplitOptions.None)
        End If
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T21:45:22.060

感谢第一个几乎适用于我的应用程序的示例。接收器应用程序需要 ANSI ( WinAmp ) 中的字符串，所以我不得不更改该行：

```
DataStruct.lpData = Marshal.StringToCoTaskMemAuto(strMessage) 
```

至

```
DataStruct.lpData = Marshal.StringToCoTaskMemAnsi(strMessage) 
```

除此之外，它就像一个魅力，第一个示例正确地为 x64 - x32 获得了指针。只希望我在 24 小时任务中首先找到这个

赢 10\. Visualstudio2017 vb.net

# ruby - datamapper，如何按月和年过滤日期字段？

> ID：13886237
> 
> 赞同：1
> 
> 时间：2012-12-14T21:06:24.863
> 
> 标签：ruby, datamapper

使用 datamapper，如何按月和年过滤日期字段？

我可以用今天的日期过滤所有记录。

```
:date => Date.today 
```

但我很好奇是否有一个优雅的解决方案来返回 2012 年 12 月以来的所有记录。

```
posts.all
+----+------------+
| id | date       |
+----+------------+
| 1  | 2009-10-20 |
| 2  | 2012-11-18 |
| 3  | 2012-12-10 |
| 4  | 2012-12-14 |
+----+------------+

posts.all(:date => Date.today)
+----+------------+
| id | date       |
+----+------------+
| 4  | 2012-12-14 |
+----+------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:33:46.807

我认为您最好的选择是使用日期范围形式（这将导致 SQL“BETWEEN”查询）：

```
posts.all(:date => (Date.parse('2012-12-01') .. Date.parse('2012-12-31'))) 
```

对于其他年份/月份，您必须查找或计算该月的最后日期，而不是像上面的示例中那样对它们进行硬编码。

```
def month_range(year, month)
  d0 = Date.parse([year, month, 1].join('-'))
  (d0 .. (d0>>1)-1)
end
posts.all(:date => month_range(2012, 12)) 
```

# c# - 读取关节位置和时间戳

> ID：13886243
> 
> 赞同：0
> 
> 时间：2012-12-14T21:06:39.787
> 
> 标签：c#, variables, kinect, kinect-sdk

如果我想使用 Kinect 传感器实时读取和存储获得的数据/值到变量，关于骨骼关节，我该怎么做？

如何将该数据/值保存到一个不会更新的变量，除非我要求一个新值。我希望能够将我得到的值保留在不同的变量中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:26:46.720

与保存任何其他变量类型没有什么不同。

```
JointCollection _savedJoint;
DateTime _savedJointTime;

private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame == null || skeletonFrame.SkeletonArrayLength == 0)
            return;

        // resize the skeletons array if needed
        if (_skeletons.Length != skeletonFrame.SkeletonArrayLength)
            _skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];

        // get the skeleton data
        skeletonFrame.CopySkeletonDataTo(_skeletons);

        foreach (var skeleton in _skeletons)
        {
            // skip the skeleton if it is not being tracked
            if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
                continue;

            // do other checks and actions if needed...

            // save off the joint
            _savedJoint = skeleton.Joints[JointType.HandLeft];
            _savedJointTime = DateTime.Now;
        }
    }
} 
```

如果要保存多个关节，可以创建一个数组。如果您想将所有内容打包在一起，您可以创建一个存储所有内容的类。

# c++ - 代码在 C++ 中阻止进程的端口，Windows 7

> ID：13886249
> 
> 赞同：2
> 
> 时间：2012-12-14T21:07:13.670
> 
> 标签：c++, windows, winsock

我正在开发一个 Windows 防火墙作为我的最后一年项目。为此，我想阻止 C++ 中进程的端口。应该使用哪个 API 来执行此操作，或者是否有任何 KERNEL MODE API 可以被覆盖`PsSetCreateNrocessNotifyRoutine`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:46:42.087

对于 Windows Vista 及更高版本，您应该使用[Windows Filtering Platform](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366510.aspx)，它可以从用户模式和内核模式访问。有关示例，请参见[本文。](http://www.codeproject.com/Articles/29026/Firewall-using-Vista-s-Windows-Filtering-Platform)

# php - 如何将多对象关联 JSON 数组转换为 Javascript 数组

> ID：13886250
> 
> 赞同：1
> 
> 时间：2012-12-14T21:07:17.180
> 
> 标签：php, javascript, json, associative-array

> **可能重复：**
> [如何在 JavaScript 中解析 JSON](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

我正在从 PHP 中提取一个多对象关联数组。下面是一个例子：

```
$displayArray[] = array("Name"=>"Joe", "Important"=>"1", "Group"=>"Family");
$displayArray[] = array("Name"=>"Jane", "Important"=>"0", "Group"=>"Family");
echo json_encode($displayArray); 
```

使用 AJAX，返回的 JSON 字符串是这样的：

```
[{"Name":"Joe","Important":"1","Group":"Family"},{"Name":"Jane","Important":"0","Group":"Family"}] 
```

我想将此 JSON 数据转换为 Javascript 数组。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:26:42.773

看起来你正在使用 jQuery。[.ajax()](http://api.jquery.com/jQuery.ajax/)的返回不是您通过 PHP 回显给浏览器的对象。相反，您可以使用成功回调访问返回的数据，例如：

```
var myData;

$.ajax({ type: 'POST', 
       url: 'ReadToggle.php', 
       dataType:'json', 
       async: false })
       success: function(data) {
                    myData = data;
       }
}) 
```

然后，您可以像标准 javascript 对象一样解析 myData，例如：

```
myData[index] 
```

我认为大多数人倾向于编写代码来处理成功函数本身中返回的对象，例如：

```
var myData;

$.ajax({ type: 'POST', 
       url: 'ReadToggle.php', 
       dataType:'json', 
       async: false })
       success: function(data) {
                    console.log(data);
                    console.log(data[0]);
       }
}) 
```

# javascript - 初始加载时主干视图未正确显示

> ID：13886253
> 
> 赞同：0
> 
> 时间：2012-12-14T21:07:43.387
> 
> 标签：javascript, html, view, backbone.js

我有一个主页视图，我想在页面初始加载时隐藏一些 div。然而，所有的 div 在初始加载时都是可见的。如果我在此屏幕上的选项卡并返回，则 div 将被隐藏。主函数在内部调用

```
$(document).ready(app.init) 
```

所以我知道dom已经准备好了。这是几乎可以工作的视图渲染功能，只是不会在加载时隐藏 div。这是要调用的最后一个函数，因此没有其他任何影响它。

```
$('#course').slideUp();
$('#scores').slideUp();
$('#next').slideUp();
$("#content_home").trigger("create");
return this; 
```

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:20:17.803

一种可能性是您有时间问题。你有没有尝试过：

```
render: function() {
    window.setTimeout(function() {
        $('#course').slideUp();
        $('#scores').slideUp();
        $('#next').slideUp();
        $("#content_home").trigger("create");
    }, 1);
    return this;
} 
```

这将使您的动画在渲染（以及任何名称）完成后才开始。

# android - 连接到计算机时更新和删除 MediaScanner 上的文件

> ID：13886255
> 
> 赞同：0
> 
> 时间：2012-12-14T21:07:53.073
> 
> 标签：android, usb

我正在编写一个应用程序来创建、更新和删除“SD 卡”上的文件。如果我在 Nexus 7 上运行它，我需要通知媒体扫描仪服务文件已创建/删除/更新。我已经从这个线程实现了 SingleMediaScanner 类：[Android How to use MediaScannerConnection scanFile](https://stackoverflow.com/questions/4646913/android-how-to-use-mediascannerconnection-scanfile)。如果设备未连接到计算机，则效果很好。如果我连接它，我会立即看到最新的文件。

但如果设备通过 USB 连接到计算机，则效果不佳。创建文件工作正常。但是从我的应用程序更新文件不起作用。如果我这样做并将其复制到我的计算机上，我仍然会获得将设备连接到计算机时存在的版本（断开并连接设备可以解决此问题）。如果我将文件从我的计算机复制到设备，我可以立即在我的应用程序中使用新文件。如果我删除一个文件，它看起来仍然存在于我的计算机上，但大小为 0 字节。这也可以通过断开和连接设备来解决。

我真的很困惑。这是设计使然吗？我能做些什么来解决这个问题吗？

# python - 带有 if 语句的 While 循环比 while 循环快

> ID：13886258
> 
> 赞同：6
> 
> 时间：2012-12-14T21:08:01.797
> 
> 标签：python, performance, if-statement, python-3.x, while-loop

我正在对循环中 if 语句的速度及其对速度的影响进行一些测试。我发现，if 语句始终如一地提高了性能。我的代码：

```
import time
t = time.time

start = t()
x = 0
while x < 10000000:
    x += 1
time1 = t()
x = 0
while x < 10000000:
    x += 1
    if True:
        pass
time2 = t()

print(start)
print(time1 - start) # Time for simple while-loop
print(time2 - time1) # Time for while+if 
```

示例输出为：

```
1355517837.993
1.7850000858306885
1.7209999561309814 
```

这完全违反直觉。while-if-loop 的工作速度比标准的 while-loop 快得多。几乎每次我运行它都会发生这种情况；也许 20 次中有 1 次需要更长的时间。有谁知道为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T21:21:26.027

dis 表明 if 语句 while 循环有更多步骤。

```
In [4]: dis.dis(t2)
  2           0 LOAD_CONST               1 (0)
              3 STORE_FAST               0 (x)

  3           6 SETUP_LOOP              26 (to 35)
        >>    9 LOAD_FAST                0 (x)
             12 LOAD_CONST               2 (10000000)
             15 COMPARE_OP               0 (<)
             18 POP_JUMP_IF_FALSE       34

  4          21 LOAD_FAST                0 (x)
             24 LOAD_CONST               3 (1)
             27 INPLACE_ADD
             28 STORE_FAST               0 (x)
             31 JUMP_ABSOLUTE            9
        >>   34 POP_BLOCK
        >>   35 LOAD_CONST               0 (None)
             38 RETURN_VALUE

In [5]: dis.dis(t1)
  2           0 LOAD_CONST               1 (0)
              3 STORE_FAST               0 (x)

  3           6 SETUP_LOOP              35 (to 44)
        >>    9 LOAD_FAST                0 (x)
             12 LOAD_CONST               2 (10000000)
             15 COMPARE_OP               0 (<)
             18 POP_JUMP_IF_FALSE       43

  4          21 LOAD_FAST                0 (x)
             24 LOAD_CONST               3 (1)
             27 INPLACE_ADD
             28 STORE_FAST               0 (x)

  5          31 LOAD_GLOBAL              0 (True)
             34 POP_JUMP_IF_FALSE        9

  6          37 JUMP_ABSOLUTE            9
             40 JUMP_ABSOLUTE            9
        >>   43 POP_BLOCK
        >>   44 LOAD_CONST               0 (None)
             47 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T21:13:07.993

我猜编译器会删除 if True 块，因为它是常量。

当我跑步时，我从你那里得到的结果大多相反。我可能只是执行环境的随机影响。

1355519587.2 0.832797050476 1.04382395744

1355519590.03 0.863899946213 1.09347200394

1355519593.72 0.831655025482 1.05389809608

1355519599.71 0.831452131271 1.41783499718

1355519602.99 0.815280914307 1.05724310875

1355519605.72 0.826404094696 1.05700492859

1355519608.94 0.827296972275 1.07807898521

# html - Excel VBA 将 HTML 换行符 (\r\n) 转换为 Excel 中的换行符

> ID：13886261
> 
> 赞同：1
> 
> 时间：2012-12-14T21:08:14.230
> 
> 标签：html, excel

我想知道如何使用 VBA 并将 HTML 换行符（如 \r \n）转换为 Excel 单元格中的换行符。例如，我从 HTML 页面复制了以下文本字符串：

```
hello my name is pete \r\n\r\n here are a list of things I would like to do today: \r\n\r\n *wake up \r\n\r\n *eat breakfast 
```

我希望它像这样显示在 Excel 中：

```
hello my name is pete

here are a list of things I would like to do today:

- wake up
- eat breakfast 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:14:29.313

我认为您可能正在寻找的是字符串的直接文本替换。以下将对当前活动的单元格执行此操作：

```
ActiveCell.Replace What:="\r\n", Replacement:=vbLf, LookAt:=xlPart, MatchCase:=False 
```

# php - 在 Codeigniter/PHP 的子目录中放置私有函数不起作用

> ID：13886263
> 
> 赞同：0
> 
> 时间：2012-12-14T21:08:28.723
> 
> 标签：php, codeigniter

我完全和完全困惑。我浏览了所有文档，但找不到解决方案。设置：CI 2.1.3，QNAP 服务器。

问题：我不能在控制器上使用私有函数：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Signup extends CI_Controller {

public function index()
{
    _loadcontent();
}

private function _loadcontent()
{
        $this->load->view('welcome_message');
}
}

/* End of file signup.php */
/* Location: ./application/controllers/account/signup.php */ 
```

它不起作用并给出 HTTP 错误 500（内部服务器错误）。但是，将文件放在主控制器目录中是可行的。有人有任何线索吗？这是一个错误吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:12:38.723

您需要使用 调用该函数`$this`。

```
public function index()
{
    $this->_loadcontent();
} 
```

# hibernate - 在谷歌应用引擎上使用自定义休眠用户类型

> ID：13886271
> 
> 赞同：1
> 
> 时间：2012-12-14T21:09:35.870
> 
> 标签：hibernate, google-app-engine, usertype

我已经为此苦苦挣扎了一段时间，但我似乎找不到任何有效的解释。

我正在开发一些包含用户类的应用程序。这个用户类有一个属性e-mail，它的类型是EmailAddress。这个类包含一些业务逻辑，首先是不可变的。我创建了一个自定义用户类型（Hibernate）来处理 EmailAddress 类的持久性。但是，GAE 不喜欢它。当我部署我的应用程序并对其进行测试（或在我的机器上本地运行它）时，该字段始终为空。但是，昨天晚上我在本地 MySQL 安装上进行了测试，没有任何参考 GAE，它工作正常。

如果我检查日志文件，我看不到任何错误或警告。应用程序启动良好。

有谁可以告诉我这是否正常？GAE 不允许这种休眠行为对我来说似乎很奇怪，但也许有一个正当的理由。如果你愿意，我可以给你一个示例应用程序，它可以部署在 Tomcat 和 GAE 上。

# javascript - Javascript 二进制文件下载，以及 Chrome 扩展中的 ajax 文件 POST 上传

> ID：13886274
> 
> 赞同：2
> 
> 时间：2012-12-14T21:09:42.633
> 
> 标签：javascript, ajax, file-upload, google-chrome-extension, xmlhttprequest

我正在编写一个 chrome 扩展内容脚本，它将自己嵌入到某些页面上，当存在某些文件类型链接（.doc、.torrent 等）时，它将下载该文件，然后将文件 POST 到 python 网络服务器将保存该文件。python服务器正在工作，并处理正常的multipart/form-data POST请求，并在我使用我为它编写的html接口时成功保存了文件。

我有 javascript 正确下载文件：

```
var req = new XMLHttpRequest();
req.open('GET', 'http://foo.com/bar.torrent', false);
req.overrideMimeType('text/plain; charset=x-user-defined');
req.send(null);
if (req.status != 200) return '';
var response = req.responseText; 
```

然后当我尝试创建一个 POST 请求并上传它时

```
// Define a boundary, I stole this from IE but you can use any string AFAIK
var boundary = "---------------------------7da24f2e50046";
var xhr = new XMLHttpRequest();
var body = '--' + boundary + '\r\n'
         // Parameter name is "file" and local filename is "temp.txt"
         + 'Content-Disposition: form-data; name="upfile";'
         + 'filename="temp.torrent"\r\n'
         // Add the file's mime-type
         + 'Content-type: application/bittorrent\r\n\r\n'
         + response + '\r\n';
         //+ boundary + '--';
xhr.open("POST", "http://python.server/", true);
xhr.setRequestHeader(
    "Content-type", "multipart/form-data; boundary="+boundary

);
xhr.onreadystatechange = function ()
{
    if (xhr.readyState == 4 && xhr.status == 200)
        alert("File uploaded!");
}
xhr.send(body); 
```

它认为它已成功上传，但是当我尝试打开文件时，它说数据已损坏。我认为这是某种编码问题，但我不是 100% 确定。

任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:36:06.957

您的上传方法不起作用，因为所有二进制字符都编码为 UTF-8。我在[这个问题](https://stackoverflow.com/questions/8262266/xmlhttprequest-multipart-related-post-with-xml-and-image-as-payload)[的答案](https://stackoverflow.com/a/10073841/938089?xmlhttprequest-multipart-related-post-with-xml-and-image-as-payload)中发布了解释和解决方案。

在您的情况下，您不需要手动创建帖子数据。以智能的方式请求初始数据，并使用[`FormData`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)对象发布二进制数据。例如：

```
var x = new XMLHttpRequest();
x.onload = function() {
    // Create a form
    var fd = new FormData();
    fd.append("upfile", x.response); // x.response is a Blob object

    // Upload to your server
    var y = new XMLHttpRequest();
    y.onload = function() {
        alert('File uploaded!');
    };
    y.open('POST', 'http://python/server/');
    y.send(fd);
};
x.responseType = 'blob';    // <-- This is necessary!
x.open('GET', 'http://foo.com/bar.torrent', true);
x.send(); 
```

注意：我在最初的请求中`false`替换为。当也可以异步创建请求时`true`避免使用同步。`XMLHttpRequest`

如果您不理解答案，这里有更多示例，其中有详尽的解释：

*   [XMLHttpRequest：使用 XML 和图像作为有效负载的 Multipart/Related POST](https://stackoverflow.com/a/10073841/938089?xmlhttprequest-multipart-related-post-with-xml-and-image-as-payload) -`FormData`不使用，而是手动创建发布数据。
*   [Upload a File in a Google Chrome Extension](https://stackoverflow.com/a/10002486/938089?upload-a-file-in-a-google-chrome-extension) - 一个使用 Web Workers（带有 FormData polyfill）上传文件的示例 Chrome 扩展
*   [Google chrome rehost image extension](https://stackoverflow.com/questions/11378630/google-chrome-rehost-image-extension/11382138#11382138) - 从页面中抓取图像，并使用 Chrome 扩展将图像上传到 imgur。

# c# - 实体框架、绑定上下文和 DDD

> ID：13886280
> 
> 赞同：1
> 
> 时间：2012-12-14T21:09:54.707
> 
> 标签：c#, domain-driven-design, repository-pattern, entity-framework-5

我正在尝试使用 EF 和 edmx 文件创建有界上下文。一开始所有实体都在同一个 edmx 文件中，然后我将模型拆分到另一个项目中，然后更改 Dbset 并改用 IDbSets。我创建了其他 edmx 文件，我正在尝试使用其他 edmx 中的一个/多个表。当然，当我运行自定义工具（右键单击 edmx 文件，运行自定义工具）时，tt 文件会将表/Idbset 从一个位置删除到另一个位置。你们是做什么的？如果您需要一个包含少量表的上下文，并且您不想要一些与您添加到该上下文的表相关的表，该怎么办。希望有人理解我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:55:31.557

你可以只用你需要的表创建多个 edmx(s) 吗？例如 ABC.edmx 有三个表 A、B 和 C。您通过 T4 生成的三个实体属于有界上下文 ABC。您可以创建另一个具有表 D、E 和 F 的 DEF.edmx。实体 D、E 和 F 属于有界上下文 DEF。

# mysql - 连续调用重复 MySQL UNIX_TIMESTAMP() 结果

> ID：13886286
> 
> 赞同：4
> 
> 时间：2012-12-14T21:10:13.547
> 
> 标签：mysql

为什么这段代码`UNIX_TIMESTAMP()`每次调用都返回相同的值？

```
DECLARE myStamp1 FLOAT;

DECLARE myStamp2 FLOAT; 

DECLARE n INT;

SET myStamp1 = UNIX_TIMESTAMP();

SELECT SLEEP(1) INTO n;

SET myStamp2 = UNIX_TIMESTAMP();

SELECT myStamp1, myStamp2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:18:56.347

该`FLOAT`数据类型的尾数只有 23 位，基本上相当于 7 个十进制数字的精度。（是的，从技术上讲，该限制更准确地指定为六位数字。）但重点是 a`FLOAT`表示不超过七位十进制数字的精度。

现在，`UNIX_TIMESTAMP()`函数正在返回一个十进制数字的整数值。因此，一秒钟的更改将仅更改第 10 个（最低位）十进制数字（或将 9 翻转为 0）。但这还不足以产生不同的 FLOAT 值。（最终，FLOAT 的值会发生变化，但任何一秒的差异都不太可能导致不同的`FLOAT`值。）

我建议您尝试使用`BIGINT`,`DECIMAL(10,0)`或`TIMESTAMP`数据类型，或者`DOUBLE`如果需要（？）浮点类型的可伸缩性，请使用 a 。

* * *

## 摘自 MySQL 文档

`<snip>`

每个返回当前日期或时间的函数在查询执行开始时每个查询只计算一次。这意味着在单个查询中多次引用诸如 NOW() 之类的函数总是会产生相同的结果。（为了我们的目的，单个查询还包括对存储程序（存储例程、触发器或事件）的调用以及该程序调用的所有子程序。）这个原则也适用于 CURDATE()、CURTIME()、UTC_DATE() 、UTC_TIME()、UTC_TIMESTAMP() 以及它们的任何同义词。

`</snip>`

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

（您显示的代码必须在存储程序中，因为该`DECLARE`语句仅在存储程序中有效。）

# javascript - 将 div 移动到 $(document).ready 上的位置

> ID：13886287
> 
> 赞同：2
> 
> 时间：2012-12-14T21:10:14.060
> 
> 标签：javascript, jquery

我希望我的标题不在视线范围内，然后在页面加载时动画到位。

目前，我从带有淡出/淡入的登录页面进行了过渡，并且在此过渡发生之前，标题不应开始动画到位。此外，这种转变只会在我来自我的登陆页面时发生。

关于如何做到这一点的任何想法？

这是我的淡入/淡出脚本：

```
$(document).ready(function() {
    $("body").css("display", "none");
    $("body").fadeIn(2000);

    $("a.transition").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        $("body").fadeOut(1000, redirectPage);      
    });

    function redirectPage() {
        window.location = linkLocation;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:35:33.987

如何在链接位置的末尾附加一个主题标签？比如#dashboard什么的。然后在加载页面时，您可以检查主题标签是否存在。如果是这样，则为主体设置动画并在主体淡入回调的标题中添加淡入淡出。

就像是

```
$(document).ready(function() {
    if(window.location.hash)
    {
       $('body').hide();
       //move the header to the top
       $('#header').css('top', -50);
       $('body').fadeIn(2000, function(){
           $('#header').animate({ top: '+=50', }, 2000, function() { 
              // Animation complete. 
           });
       });
    }
    else
    {
       $("body").hide();
       $("body").fadeIn(2000);
       $("a.transition").click(function(event){
            event.preventDefault();
            linkLocation = this.href + '#dashboard';
            $("body").fadeOut(1000, redirectPage);      
        });
    }
});
function redirectPage() {
    window.location = linkLocation;
} 
```

# vb.net - VB.Net WebKitBrowser Enter 键问题

> ID：13886289
> 
> 赞同：1
> 
> 时间：2012-12-14T21:10:28.037
> 
> 标签：vb.net, webkit

我正在使用 vb.net 2012 进行编程，但我遇到了 WebKit.Net 框架的问题。

在我的 webkitbrowser 对象加载了一个页面后，我输入了登录凭据，现在选项卡按钮被勾住了，但是当我按 Enter 键时（就像人们通常在网站上登录而不是实际点击登录按钮一样）它会专注于另一个表单对象（选项卡索引 0）并点击输入，它不会将输入按钮挂钩到 webkitbrowser。

我添加了以下内容，但没有奏效。

```
Private Sub WebKitBrowser2_MouseClick(sender As Object, e As MouseEventArgs) Handles WebKitBrowser2.MouseClick
    Me.WebKitBrowser2.Focus()
End Sub 
```

我希望有人能解决这个问题？

# xpath - Web 配置转换条件/匹配以根据父节点属性选择节点

> ID：13886291
> 
> 赞同：9
> 
> 时间：2012-12-14T21:10:36.100
> 
> 标签：xpath, web-config-transform

我有一个看起来像这样的变换

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <a>
    <b>
      <c>
        <d>
          <e name="UpdateLanguageProfile">
            <f xdt:Transform="Replace" xdt:Locator="Condition(/..@name='UpdateLanguageProfile')">
              stuff here
            </f>
          </e>
        </d>
      </c>
    </b>
  </a> 
```

所以我希望 xdt:Locator 只有在父节点具有具有指定值的属性时才选择 f 节点。

xdt:Locator 被翻译成以下 xpath 表达式：

```
/a/b/c/d/e/f[/..@name='UpdateLanguageProfile'] 
```

这是无效的。

所以问题是，我可以在 Condition 中放入什么，即 XPath 方括号，以便根据父节点中的属性选择 f 节点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T21:10:36.100

答案是 xdt:Locator 和 xdt:Transform 不需要在同一个节点上。在我见过的每个示例中，它们恰好位于同一个节点上。

你可以这样做：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <a>
    <b>
      <c>
        <d>
          <e name="UpdateLanguageProfile" xdt:Locator="Match(name)">
            <f xdt:Transform="Replace">
              stuff here
            </f>
          </e>
        </d>
      </c>
    </b>
  </a> 
```

# php - 我究竟做错了什么？CURL PHP Cookie

> ID：13886293
> 
> 赞同：0
> 
> 时间：2012-12-14T21:10:48.150
> 
> 标签：php, cookies, curl

我正在使用 curl 登录网站，它设法让我登录并显示“感谢登录 Jack Brown”的页面，我可以看到会员区。

但是，我的服务器“/tmp/cookie.txt”上没有创建 cookie 文件

由于我已经登录，然后我想再次使用 curl 从成员区域检索数据，但是在运行页面的这一部分时，我只得到“请登录以继续”。

第一段代码用于登录（这可以让我登录，但不要创建 cookie 文件）：

```
<?php

$email    = 'email@here.com';
$password = 'passwordhere';
$rememberMe = '';
$redirect = '';
// initial login page which redirects to correct sign in page, sets some cookies
$URL = 'https://www.website.co.uk/home';
$coookie = tempnam ("/tmp", "CURLCOOKIE");

$ch  = curl_init();

curl_setopt($ch, CURLOPT_URL, $URL);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.10 (maverick) Firefox/3.6.13');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);        
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$page = curl_exec($ch);

$URL2 = "login url is normally here"; // this is our post url

$postdata = "_58_login=".$email."&_58_password=".$password."&_58_rememberMe=".$rememberMe."&_58_redirect=".$redirect; 

$post = substr($post, 0, -1);

// set additional curl options using our previous options
curl_setopt($ch, CURLOPT_URL, $URL2);
curl_setopt($ch, CURLOPT_REFERER, $URL);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);

$page = curl_exec($ch); // make request

// try to find the actual login form
if (!preg_match('/Thanks for loggin in/is', $page, $form)) {
    die('Erorr: Could not login!');
}
var_dump($page); // should be logged in

// END OF LOGIN 
```

下一段代码在同一个文档中，用于在成员区域打开另一个页面，我可以从中提取内容，但是这个页面只是返回说我没有登录：

```
$URLOPEN = 'http://www.website.co.uk/membersareacontent';
$URL5 = 'http://www.website.co.uk/thanksforlogginin';

curl_setopt($ch, CURLOPT_URL, $URLOPEN);
curl_setopt($ch, CURLOPT_REFERER, $URL5);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101206 Ubuntu/10.10 (maverick) Firefox/3.6.13');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);        
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$page2 = curl_exec($ch);
var_dump($page2); // should be show members content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:24:02.340

可能是因为变量名称在顶部声明时有一个额外的名称，`o`然后是您稍后在 cURL 中使用的变量名称：

```
$coookie = tempnam ("/tmp", "CURLCOOKIE"); // Notice coookie with the extra o

curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie); // Spelled with only two o's here
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);  // Spelled with only two o's here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:23:11.710

编辑：sbeliv01 指出 cookie 拼写错误如果不尝试将其添加到代码顶部以显示是否有任何错误：

```
error_reporting(E_ALL);
ini_set("display_errors",1); 
```

此代码用于检查文件是否可写入，并确保 cookie 文件可写入：

```
// change $cookie_file_path to yours
$fp = fopen($cookie_file_path,'wb') or die("can't open cookie file");
fclose($fp); 
```

我还注意到你没有在这里设置你的 cookie 选项：

```
// set additional curl options using our previous options
$ch  = curl_init();
curl_setopt($ch, CURLOPT_URL, $URL2);
curl_setopt($ch, CURLOPT_REFERER, $URL);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);        
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
```

# python - Python程序崩溃

> ID：13886297
> 
> 赞同：0
> 
> 时间：2012-12-14T21:11:25.757
> 
> 标签：python, permissions, crash

因此，我设计了一个在计算机上运行的程序，查找一直困扰我们的文件的特定方面，并在传递标志时删除文件。不幸的是，该程序似乎几乎随机关闭/崩溃。我说几乎是随机的，因为程序总是在删除文件后退出，尽管它通常会在成功后继续运行。

我运行了一个并行的 Python 程序，它以相同的时间间隔向上计数，但没有做任何其他事情。该程序不会崩溃/退出，并保持打开状态。

是否可能存在 R/W 访问问题？我以管理员身份运行该程序，所以我不确定为什么会这样。

这是代码：

```
import glob
import os
import time
import stat

#logging
import logging
logging.basicConfig(filename='disabledBots.log')
import datetime

runTimes = 0
currentPhp = 0
output = 0
output2 = 0
while runTimes >= 0:
    #Cycles through .php files
    openedProg = glob.glob('*.php')
    openedProg = openedProg[currentPhp:currentPhp+1]
    progInput = ''.join(openedProg)
    if progInput != '':
        theBot = open(progInput,'r')

        #Singles out "$output" on this particular line and closes the process
        readLines = theBot.readlines()
        wholeLine = (readLines[-4])
        output = wholeLine[4:11]

        #Singles out "set_time_limit(0)"
        wholeLine2 = (readLines[0])
        output2 = wholeLine2[6:23]

        theBot.close()
    if progInput == '':
        currentPhp = -1

    #Kills the program if it matches the code
    currentTime = datetime.datetime.now()
    if output == '$output':
        os.chmod(progInput, stat.S_IWRITE)
        os.remove(progInput)
        logging.warning(str(currentTime) +' ' + progInput + ' has been deleted. Please search for a faux httpd.exe process and kill it.')
        currentPhp = 0

    if output2 == 'set_time_limit(0)':
        os.chmod(progInput, stat.S_IWRITE)
        os.remove(progInput)
        logging.warning(str(currentTime) +' ' + progInput + ' has been deleted. Please search for a faux httpd.exe process and kill it.')
        currentPhp = 0
    else:
        currentPhp = currentPhp + 1
        time.sleep(30)

    #Prints the number of cycles    
    runTimes = runTimes + 1
    logging.warning((str(currentTime) + ' botKiller2.0 has scanned '+ str(runTimes) + ' times.'))
    print('botKiller3.0 has scanned ' + str(runTimes) + ' times.') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:32:20.200

首先，如果你的代码基于这样的东西，那么弄清楚发生了什么会容易得多......

```
for fname in glob.glob('*.php'):
    with open(fname) as fin:
        lines = fin.readlines()
    if '$output' in lines[-4] or 'set_time_limit(0)' in lines[0]:
        try:
            os.remove(fname)
        except IOError as e:
            print "Couldn't remove:", fname 
```

错误，目前这实际上不是第二个，您现有的代码太棘手了，无法遵循句号，更不用说所有可能导致我们还不知道的奇怪错误的位！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:26:32.933

```
if os.path.exists(progInput): 
    os.chmod(progInput, stat.S_IWRITE)
    os.remove(progInput) 
```

还：

您从未在循环中重置 output 或 output2 变量？

这是故意的吗？

# javascript - 访问动态创建的元素

> ID：13886303
> 
> 赞同：0
> 
> 时间：2012-12-14T21:12:05.833
> 
> 标签：javascript, jquery, html

当用户点击我的链接时，模态元素是动态生成的。我试图在创建模态时将一些代码注入模态。我的问题是 JavaScript 不能针对我的模态，因为它是动态生成的。我该怎么做？

我试过使用`on()`，但我得到了我的模态找不到的错误。

```
$(document).on('click', '.open-modal', function() {
  console.log( $('.my-modal') ); //cannot find .my-modal
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:29:07.003

从您的评论来看，如果您正在关注 Bootstrap 示例，那么您可能意味着使用#my-modal（或 #myModal，如果您将它们跟随到 T），因为它们是通过 ID 而不是类来识别模态的。

**编辑：** 引导模式依赖于一些预先格式化的 html，所以我不确定你的模式是如何动态生成的。

# java - java.util.Date 不能转换为 Object[]

> ID：13886312
> 
> 赞同：-1
> 
> 时间：2012-12-14T21:12:57.133
> 
> 标签：java

我正在使用 java 反射在运行时调用方法。如何将日期对象转换为对象数组？

IE，

```
Method m = ....;
Object[] result = (Object[]) m.invoke(...);

public Date getDate() {
   return new Date();
} 
```

会给：

```
java.lang.ClassCastException: java.util.Date cannot be cast to [Ljava.lang.Object; 
```

**编辑**：是的，我应该将它添加到一个对象数组中并返回它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:21:40.747

你不需要调用是一个可变参数方法。你可以做。

```
 Object result = method.invoke (instance , new Date ()); 
```

无需创建数组。

如果它是您想要更改的结果，您可以包装它，但我怀疑没有真正需要这样做。我会看看你是否真的需要一个数组

# linux - Mono如何删除匹配正则表达式的文件

> ID：13886322
> 
> 赞同：0
> 
> 时间：2012-12-14T21:13:46.853
> 
> 标签：linux, shell, mono, rm

作为项目的一部分，Mono 程序必须将一系列图像写入电影。因此，图像首先被缓存在`/tmp/`文件夹/中，因为它们有可能是前一个会话的静止图像。我想删除这些图像。因此我使用以下命令：

```
Process proc = new Process();
proc.EnableRaisingEvents = false;
proc.StartInfo.FileName = "rm";
proc.StartInfo.Arguments = "/tmp/output*";
proc.Start();
proc.WaitForExit(); 
```

但是，当程序执行时，我收到以下警告：`/bin/rm: cannot remove '/tmp/output*': No such file or directory.`.

但是，当我`/bin/rm /tmp/output*`在终端中（在用户模式下）执行时，该命令在识别文件时似乎没有问题。

为什么这个命令不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:38:13.587

为此产生一个外部进程是可怕的。只需使用标准`System.IO`API，例如：

```
foreach (var file in Directory.EnumerateFiles ("/tmp", "output*")) {
    try {
        File.Delete (file);
    } catch {
        ; // optionally report error
    }
} 
```

您还可以使用带`SearchOption`参数的重载在子目录中递归搜索。请参阅[http://msdn.microsoft.com/en-us/library/dd383571.aspx](http://msdn.microsoft.com/en-us/library/dd383571.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:15:54.507

因为您应该运行 shell 以将 glob 模式扩展`/tmp/output*`为有序的文件路径数组。

^(您可以`sh -c "rm /tmp/output*"`作为 Mono 进程运行，但这很难看)

但是你不需要外壳。例如，您可以使用[mono readdir](http://docs.go-mono.com/index.aspx?link=M%3aMono.Unix.Native.Syscall.readdir)构建要删除的文件路径的数组（或列表），然后通过调用执行[unlink(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/unlink.2.html)系统调用的函数来删除它们（我让您找到如何在 Mono 中执行此操作）。

# oracle - Oracle11g Express Edition SYSTEM 模式被锁定

> ID：13886323
> 
> 赞同：5
> 
> 时间：2012-12-14T21:13:48.140
> 
> 标签：oracle, oracle11g, database-administration

最近我在我的 Windows 7（64 位）操作系统中安装了 oracle 11g Express Edition。我在安装 Oracle 时设置了 SYSTEM 模式的密码。我试图登录 SYSTEM 模式。但由于密码错误，我无法登录。现在帐户被锁定。我找不到密码，因为我没有解锁任何其他模式。

请帮我重新设置或找到密码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T05:51:00.090

```
> sqlplus / as sysdba
sql> alter user system identified by *newpassword* account unlock; 
```

# android - Android 线程和 ArrayAdapter

> ID：13886325
> 
> 赞同：1
> 
> 时间：2012-12-14T21:13:50.780
> 
> 标签：android, multithreading, google-app-engine, listview, runnable

我从 Google App Engine 获取数据作为字符串，所以我必须在一个线程中完成。接下来我想在 ListView 中显示它，我正在尝试执行类似以下代码的操作：

```
public void ShowContacts (){    
    new Thread(new Runnable() {         
        @Override
        public void run() {
            try
            {
                final RestClient client = new RestClient("http://xxx.appspot.com/client");
                client.AddParam("userName", "user");
                client.Execute(RequestMethod.GET);
                _listView.post(new Runnable() {                 
                    @Override
                    public void run() {
                        String s = client.getResponse();
                        String[] items = s.split(";");

                        //adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, items);                         
                        //_listView.setAdapter(adapter);                            
                    }
                });                             
            }
            catch (Exception e)
            {

            }
        }
    }).start();
} 
```

这段代码对我不起作用。有没有办法从线程中获取一些值并将其设置为全局变量或直接在线程中构造一个 ArrayAdapter 或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:19:36.703

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)从服务器获取数据并添加到 ListView 为：

```
public class getDatafromserver extends AsyncTask<String, Void, String> {

          @Override

      protected void onPreExecute() {
      }

      @Override
      protected String doInBackground(String... params) {

         final RestClient client = new 
                             RestClient("http://xxx.appspot.com/client");
            client.AddParam("userName", "user");
            client.Execute(RequestMethod.GET);
          String s = client.getResponse();
          return s  ;
      }      

      @Override
      protected void onPostExecute(String result) {                           
                    String[] items = result.split(";");

                    adapter = new ArrayAdapter<String>(this, 
                android.R.layout.simple_list_item_1, android.R.id.text1, items);                         
                    _listView.setAdapter(adapter);  
      }
} 
```

从您的 Ui 线程启动此 AsyncTask：

```
new getDatafromserver().execute(""); 
```

# json - 在保存在 Newtonsoft.Json.Linq 对象上的 Web API 上解析 JSON JObject

> ID：13886326
> 
> 赞同：1
> 
> 时间：2012-12-14T21:14:06.647
> 
> 标签：json, api

嗨，我正在使用 Jquery 在帖子中将 JObject 发送到我的 Web API，但我在使用 Newtonsoft.Json 库解析它时遇到问题。我想是因为我有像 Jaosn Array 这样的东西，但是当我尝试从 JObject 转换为 JArray 时，我没有得到它

我在 WEB API 中获取数据，但我无法使用在线示例进行解析。

在这篇文章的末尾。我需要一些帮助来解析该对象。任何的想法？

我的控制器如下所示：

```
// POST api/returnvalues/5

public string Post(int id, JObject value)
{
  var temp = value;

  ....

}

and my Jquery to send the information is like this.

function PostAPIRequest(address) {

var jObject = JSON.stringify(FilterValuesArray);

var responseJson = null;
$.ajax({
url: address,
type: 'POST',
dataType: 'json',
data: { JObject: jObject },
success: function (data) {
responseJson = data
ProcessDataResponse(responseJson);
//TODO: REFRESH THE DATA GRID
},
error: function (xhr, ajaxOptions, thrownError) {
//TODO redirect to the error page and send error email there.
alert(xhr.status);
alert(thrownError);
}
})
}

JSON

{
"JObject": "[{\"key\":\"20\",\"value\":\"us\"},{\"key\":\"30\",\"value\":\"mini\"},{\"key\":\"31\",\"value\":\"audi\"},{\"key\":\"21\",\"value\":\"4,5,13,14,15,\"},{\"key\":\"29\",\"value\":\"8,\"},{\"key\":\"32\",\"value\":\"7,\"}]"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:52:29.713

嗨，我找到了这个问题的解决方案，我想和你分享。

问题是我如何使用错误的 JSON 格式构建 JSON。结果，使用 JObject 和 Jtoken 的解析不起作用。但是使用格式良好的 JSON 解析可以使用标准示例 uisng JObject 和 JToken

这篇文章详细介绍了如何创建正确的 JSON，该 JSON 正在发送到 Web API **问题 JSON.stringify 向我的 Json 对象** [添加额外的 \ 和“” JSON.stringify 的问题向我的 Json 对象添加额外的 \ 和“”](https://stackoverflow.com/questions/13916673/issue-with-json-stringify-adding-a-extra-and-to-my-json-object)

格式良好的 Json 将如下所示：

```
 {
    "JObject": [{"key":"20","value":"us"},{"key":"30","value":"mini"},{"key":"31","value":"audi"},{"key":"21","value":"4,5,13,14,15,"},{"key":"29","value":"8,"},{"key":"32","value":"7,"}]
    } 
```

[JSON.stringify 向我的 Json 对象添加额外的 \ 和 "" 的问题](https://stackoverflow.com/questions/13916673/issue-with-json-stringify-adding-a-extra-and-to-my-json-object)

# c# - 使用 C# 将 Excel 第一列读入数组

> ID：13886330
> 
> 赞同：6
> 
> 时间：2012-12-14T21:14:27.567
> 
> 标签：c#, excel, excel-interop

我正在尝试将第一列的值读入数组。最好的方法是什么？以下是我到目前为止的代码。基本上我正在尝试获取该列的数据范围，以便可以将单元格值拉入系统数组。

```
Microsoft.Office.Interop.Excel.Application xlsApp = new Microsoft.Office.Interop.Excel.Application();

if (xlsApp == null)
{
    Console.WriteLine("EXCEL could not be started. Check that your office installation and project references are correct.");
    return null;
}

//xlsApp.Visible = true;

Workbook wb = xlsApp.Workbooks.Open(filename, 0, true, 5, "", "", true, XlPlatform.xlWindows, "\t", false, false, 0, true);
Sheets sheets = wb.Worksheets;
Worksheet ws = (Worksheet)sheets.get_Item(1);

//***Breaks Here***
ListColumn column = ws.ListObjects[1].ListColumns[1];
Range range = column.DataBodyRange;
System.Array myvalues = (System.Array)range.Cells.Value; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T21:42:49.937

这是我最终用来让它工作的东西。一旦您知道 Columns 实际上返回了一个范围，那么以这种方式存储它似乎可以编译并运行良好。这是我的 ExcelReader 类中的工作方法。我计划将其用于 WebDriver 上的测试驱动数据。

```
 public static string[] FirstColumn(string filename)
    {
        Microsoft.Office.Interop.Excel.Application xlsApp = new Microsoft.Office.Interop.Excel.Application();

        if (xlsApp == null)
        {
            Console.WriteLine("EXCEL could not be started. Check that your office installation and project references are correct.");
            return null;
        }

        //Displays Excel so you can see what is happening
        //xlsApp.Visible = true;

        Workbook wb = xlsApp.Workbooks.Open(filename,
            0, true, 5, "", "", true, XlPlatform.xlWindows, "\t", false, false, 0, true);
        Sheets sheets = wb.Worksheets;
        Worksheet ws = (Worksheet)sheets.get_Item(1);

        Range firstColumn = ws.UsedRange.Columns[1];
        System.Array myvalues = (System.Array)firstColumn.Cells.Value;
        string[] strArray = myvalues.OfType<object>().Select(o => o.ToString()).ToArray(); 
        return strArray;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:43:02.393

首先，我会计算出实际使用了多少行：

```
Excel.Range allCellsInColumn = xlWorksheet.Range["A:A"];
Excel.Range usedCells = allCellsInColumn.Find("*", Missing.Value, Missing.Value, Missing.Value,
    Excel.XlSearchOrder.xlByRows, Excel.XlSearchDirection.xlPrevious, false, Missing.Value, Missing.Value); 
```

一旦你有了，你可以检索值：

```
System.Array values = usedCells.Values; 
```

一旦您在数组中获得了值，您就可以跳过其中没有任何内容的元素。我不认为有一种方法可以只检索其中包含某些内容的单元格而不一次循环遍历它们，这在 Interop 中非常耗时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:29:28.157

您的数据在列表中吗？您的代码似乎正在寻找一个可能不存在的 Excel 列表。如果不是，您可以将整个第一列 ( `A:A`) 放入 Range 中并获取它的值：

```
Range firstCol = ws.Range("A:A");
System.Array values = range.Value as System.Array; 
```

# grails - Grails - 无法将子记录添加到父记录

> ID：13886331
> 
> 赞同：0
> 
> 时间：2012-12-14T21:14:30.040
> 
> 标签：grails, grails-orm

尝试按照[此处](http://grails.org/doc/2.1.0/ref/Domain%20Classes/addTo.html)显示的示例，我正在尝试创建一个链接到父记录的记录。

就我而言，我有两个类：传感器和读数。我可以毫无问题地创建传感器，但无论我如何尝试创建读数，我似乎都失败了:(

我已经旋转轮子足够长的时间了，我认输了，希望有人能发现我的愚蠢错误。

还有一件事 - 我想使用 JSON 发布数据。但是通过调试过程，我什至没有查看 JSON 值，我已经对它们进行了硬编码，但它仍然无法正常工作。

ReadingsController.groovy

```
package grailshelloworld

import grails.converters.JSON
import groovy.json.JsonSlurper

class ReadingsController {

    def scaffold=Readings

        def save = {

                def slurper = new JsonSlurper()
                def result = slurper.parseText(request.reader.text)

                def s = new Sensor (sensorid: "SID", sensorname: "name", sensordescription: "description")
                        .addToReadings(reading: "blah")
                        .save()

                render ([ok: false] as JSON)

    }
} 
```

传感器.groovy

```
package grailshelloworld

class Sensor {

    String sensorid
    String sensorname
    String sensordescription

    static hasMany = [readings: Readings]

    static constraints = {
        sensorid blank:false, nullable: false 
        sensorname blank:false, nullable: false
    }
} 
```

Readings.grooovy

```
package grailshelloworld
import java.util.Formatter.DateTime;
class Readings {
    String reading
    static belongsTo = [sensor: Sensor]
} 
```

当前错误：参数类型不匹配...

```
<dt>Class</dt><dd>java.lang.IllegalArgumentException</dd><dt>Message</dt><dd>argument type mismatch</dd></dl><h2>Around line 15 of <span class="filename">grails-app/controllers/grailshelloworld/ReadingsController.groovy</span></h2>
<pre class="snippet"><code class="line"><span class="lineNumber">12:</span>     def slurper = new JsonSlurper()</code><code class="line"><span class="lineNumber">13:</span>        def result = slurper.parseText(request.reader.text)</code><code class="line"><span class="lineNumber">14:</span></code><code class="line error"><span class="lineNumber">15:</span>     def s = new Sensor (sensorid: &quot;SID&quot;, sensorname: &quot;name&quot;, sensordescription: &quot;description&quot;)</code><code class="line"><span class="lineNumber">16:</span>           .addToReadings(reading: &quot;blah&quot;)</code><code class="line"><span class="lineNumber">17:</span>          .save()</code><code class="line"><span class="lineNumber">18:</span></code></pre><h2>Around line 195 of <span class="filename">PageFragmentCachingFilter.java</span></h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:34:19.413

您是否尝试过明确地创建一个新的`Readings`？

```
def s = new Sensor (sensorid: "SID", sensorname: "name", sensordescription: "description")
                    .addToReadings(new Readings(reading: 'blah'))
                    .save() 
```

错误是说“第 15 行左右”，这是`def s = ...`语句的开始。

我知道文档说它可以按照您尝试的方式完成 - 但值得一试。

# php - Yii Lazy Loading 通过表/模型获取值

> ID：13886333
> 
> 赞同：0
> 
> 时间：2012-12-14T21:14:33.293
> 
> 标签：php, activerecord, yii, yii-cmodel

在 Yii 中，我设置了一个使用 through 选项的关系。

```
public function relations()
    {
        return array(
            'users_relationships' => array(
                self::HAS_MANY, 'EnvironmentUsers', 'environment_id', 'together'=>true 
            ),
            'users' => array(
                self::HAS_MANY, 'Users', array('user_id' => 'user_id'), 'through' => 'users_relationships', 'together'=>true 
            ),

        );
    } 
```

我像这样访问它：

```
 foreach($model -> users as $value):
    $model-> user_id;
    endforeach; 
```

当我想访问用户模型中的值时，效果很好。但是当我尝试访问 EnvironmentUsers 模型中的值时，它会抛出通知值找不到。

```
foreach($model -> users as $value):
    $model-> is_environemnt_administrator;
    endforeach; 
```

我的问题是，当在 Yii 中懒加载时，我怎样才能访问 through 表中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:32:19.463

在您的第二个循环中，您应该调用良好的相关模型！看来您是在打电话`users`而不是`users_relationships`

```
foreach($model->users_relationships as $value):
    $model-> is_environemnt_administrator;
    endforeach; 
```

# flexslider - Flexslider 仅显示最后一张幻灯片，直到它循环浏览所有幻灯片，但仅使用淡入淡出动画

> ID：13886334
> 
> 赞同：13
> 
> 时间：2012-12-14T21:14:37.520
> 
> 标签：flexslider

这个让我难住了。我已经多次使用 Flexslider 没有任何问题，但是对于我现在正在构建的网站，它只是拒绝正常工作。

最后一张幻灯片将在加载时显示并保持可见，直到它循环浏览所有幻灯片，此时一切将开始正常工作。

我已经尝试了各种各样的事情，减少了它，但似乎无法弄清楚。唯一改变这种行为的是如果我将动画更改为滑动而不是淡入淡出。但我绝对想要褪色。我绝对想弄清楚为什么会这样。

似乎它可能是一个 CSS 问题，但我找不到它。

这是我正在做的事情：http: [//www.coppercityinn.com.php53-4.dfw1-2.websitetestlink.com/](http://www.coppercityinn.com.php53-4.dfw1-2.websitetestlink.com/)

**编辑：**

我做了几个超级精简的测试用例，只加载了基本的 HTML、Flexslider CSS/JS 和 jQuery，没有别的，而且 bug 仍然存在。

使用淡入淡出动画，有错误： http: [//www.coppercityinn.com.php53-4.dfw1-2.websitetestlink.com/wp-content/themes/coppercity/test-fade.html](http://www.coppercityinn.com.php53-4.dfw1-2.websitetestlink.com/wp-content/themes/coppercity/test-fade.html)

**编辑 2**

我是一个白痴。我将容器的类名从“flexslider”更改为“hero”，但没有更新 flexslider.css 以反映这一点。[叹]

感谢您的关注。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T05:29:11.323

user1910673 做对了！

以下CSS ..

```
.slides li {display:none} 
```

..修复了我的褪色问题！

我希望我可以投票但没有 15 名声望。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T17:20:45.023

我遇到了这个问题，但这与我的 CSS 无关。我发现这篇文章很有帮助：

[http://processwire.com/talk/topic/2283-solving-the-annoying-flexslider-fade-delay/](http://processwire.com/talk/topic/2283-solving-the-annoying-flexslider-fade-delay/)

它说将“slideToStart”设置为您的最后一张幻灯片。IE。如果您有 7 张幻灯片，则从 6 开始。这解决了我的问题。

这不是一个理想的解决方案，但它适用于我的目的。

编辑：

抱歉，更好的解决方法是确保我的幻灯片有 display:none

然后，您从哪张幻灯片开始并不重要。

原来这是我的CSS。

# linux - Linux内核中浮点的使用

> ID：13886338
> 
> 赞同：94
> 
> 时间：2012-12-14T21:15:00.187
> 
> 标签：linux, floating-point, linux-kernel

我正在阅读 Robert Love 的“Linux Kernel Development”，我遇到了以下段落：

> **否（容易）使用浮点数**
> 
> 当用户空间进程使用浮点指令时，内核管理从整数到浮点模式的转换。内核在使用浮点指令时必须做什么因架构而异，但内核通常会捕获一个陷阱，然后启动从整数模式到浮点模式的转换。
> 
> 与用户空间不同，内核没有对浮点的无缝支持的奢侈，因为它不能轻易地陷入困境。在内核中使用浮点需要手动保存和恢复浮点寄存器，以及其他可能的琐事。简短的回答是：*不要这样做！*除了极少数情况外，内核中没有浮点运算。

我从未听说过这些“整数”和“浮点”模式。它们到底是什么，为什么需要它们？这种区别是否存在于主流硬件架构（例如 x86）上，还是特定于一些更奇特的环境？从进程和内核的角度来看，从整数模式到浮点模式的转换究竟需要什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-14T21:54:26.870

*因为...*

*   许多程序不使用浮点或不在任何给定的时间片上使用它；*和*
*   保存 FPU 寄存器和其他 FPU 状态需要时间；*所以*

*...操作系统内核可能会简单地关闭 FPU。*Presto，没有要保存和恢复的状态，因此更快的上下文切换。（这就是*模式*的意思，它只是意味着启用了 FPU。）

如果程序尝试 FPU 操作，程序将陷入内核，内核将打开 FPU，恢复任何可能已经存在的保存状态，然后返回以重新执行 FPU 操作。

在上下文切换时，它知道实际执行状态保存逻辑。（然后它可能会再次关闭 FPU。）

顺便说一句，我相信这本书对内核（而不仅仅是 Linux）避免 FPU 操作的原因的解释......并不完全准确。¹

内核*可以*陷入自身并在很多事情上都这样做。（定时器、页面错误、设备中断等。）真正的原因是内核并不特别*需要*FPU 操作，并且还需要在根本没有 FPU 的架构上运行。因此，它只是避免了管理自己的 FPU 上下文所需的复杂性和运行时间，因为它不执行总是有其他软件解决方案的操作。

有趣的是，如果内核想要使用 FP ，必须多久保存一次 FPU 状态**。. .** 每一次系统调用，每一次中断，每一次内核线程之间的切换。即使偶尔需要内核 FP，²在软件中执行它可能会更快。

* * *

^(1.也就是说，*大错特错。*
2\. 我知道一些关于内核软件包含浮点算术*实现的情况。* 一些架构在硬件中实现了传统的 FPU 操作，但将一些复杂的 IEEE FP 操作留给了软件。（想想：*非正规算术。）* 当一些奇怪的 IEEE 极端情况发生时，它们会陷入软件，该软件包含可以陷阱的操作的迂腐正确仿真。)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-14T21:57:24.203

对于某些内核设计，当“内核”或“系统”任务被任务切换时，浮点寄存器不会被保存。（这是因为 FP 寄存器很大，需要时间和空间来保存。）因此，如果您尝试使用 FP，值将随机“噗”。

此外，一些硬件浮点方案依赖内核通过陷阱处理“奇数”情况（例如，零除法），并且所需的陷阱机制可能处于比内核任务当前运行的更高“级别”。

由于这些原因（以及更多原因），当您在任务中第一次使用 FP 指令时，一些硬件 FP 方案将陷入困境。如果您被允许使用 FP，则在任务中打开一个浮点标志，如果没有，您将被行刑队枪杀。

# objective-c - 检测屏幕上没有从原始位置移动的 3 个手指 iOS

> ID：13886339
> 
> 赞同：0
> 
> 时间：2012-12-14T21:15:02.677
> 
> 标签：objective-c, ios, multi-touch

我的应用程序需要能够检测用户是否将 3 根手指放在屏幕上的任何位置，以便在 3 根手指没有从原始位置移动时调用方法。这是我第一次在应用程序中使用多点触控，所以有人可以告诉我解决这个问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:17:53.947

我建议使用 UILongPressGestureRecognizer 配置为需要三个触摸（和最小的移动）。

# codeigniter - 独立的第 3 方模块

> ID：13886343
> 
> 赞同：3
> 
> 时间：2012-12-14T21:15:28.987
> 
> 标签：codeigniter

我将启动新的 Codeigniter 应用程序并尝试找到一种方法将 3rd 方模块源（例如 Tank Auth）与我自己的代码分开，我需要设置一个文件树，如下所示：

*   /project_root/
    *   /system *（框架系统 - 完成）*
    *   /3rd_party/
        *   /dists/
        *   /application/ *（已安装 3d 方库/模块 -**问题主题**）*
    *   /application/ *（我的申请 - 完成）*
    *   /site/ *（站点根目录，工作树 - 完成）*

/system`/application` `/site`使用`index.php`和`application/config/config.php`设置完成。

是否有任何正确的方法可以使用配置设置来实现上述树？我是 Codeigniter 的新手，不知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:16:27.930

对于带有 Codeigniter 的模块化结构，**模块化扩展 - HMVC**是首选解决方案：

[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)

对于您的设置，您可以将其添加到您的`config.php`：

```
$config['modules_locations'] = array(
    // absolute path                    relative path
    APPPATH.'3rd_party/application/' => '../../3rd_party/application/',
); 
```

*   /project_root/
    *   /系统
    *   /3rd_party/
        *   /dists/
        *   /应用/
            *   **tank_auth**
            *   **我的模块**
            *   **some_other_third_party_code**
    *   /应用/
    *   /地点/

“相对路径”相对于应用程序根目录中的任何子目录，例如`models`, `controllers`,`helpers`等。例如，在 CI 中，如果您使用以下命令，您可以从“视图”目录加载“模型”：

```
$this->load->model('../views/some_model'); 
```

...这不是你通常会做的事情——但这就是 HMVC 加载程序的工作方式。HVMC 可用于加载 CI 通常可以加载的任何内容，但可以从“模块”目录加载。您可以拥有任意数量的不同模块或模块路径。

模块可以（但不是必须）加载控制器并像它们自己的迷你应用程序一样工作。您还可以跨模块或从默认应用程序根加载依赖项。您仍然可以在模块旁边使用默认应用程序目录。要指定要从模块路径加载特定资产，只需在路径中包含模块名称：

```
// Loads the "tank_auth" library (works from the tank_auth module)
$this->load->library('tank_auth');

// Loads the "tank_auth" library (works from anywhere in your application)
$this->load->library('tank_auth/tank_auth'); 
```

这也适用于模型、助手等。

要访问其中的控制器，`tank_auth/controllers/login`您将使用 URL `http://example.com/tank_auth/login`。您还可以使用该`modules::run()`方法在另一个控制器中运行控制器，这可以让您在自己的逻辑中“包装”模块的控制器方法，而无需触及它们：

```
class my_login extends MX_Controller {
    function index() {
        modules::run('tank_auth/login');
    }
} 
```

它有很好的记录，并且已经存在多年。我几乎在我做过的每个 Codeigniter 项目中都使用了 HMVC，我强烈推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:17:37.637

你不需要担心 HMVC（虽然它很棒），你也不需要`MY_Loader`。

我会通读[http://ellislab.com/codeigniter/user-guide/libraries/loader.html](http://ellislab.com/codeigniter/user-guide/libraries/loader.html) - 即关于**应用程序“包”的部分**

在这里，您将看到一个名为

```
$this->load->add_package_path() 
```

您可以在其中为加载程序指定其他路径以查找您的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T23:24:55.320

问题是加载库的[加载器类](http://ellislab.com/codeigniter/user-guide/libraries/loader.html)`$this->load->library("path/to/module")`使用硬编码的“库”作为文件夹名称（[检查 Loader.php 的源代码](http://www.tig12.net/downloads/apidocs/codeigniter/libraries/Loader.php.source.html)）。因此，换句话说，您所有的模块和库都必须驻留在库文件夹中

> *   /project_root/
>     
>     
>     *   /system（框架系统 - 完成）
>     *   /图书馆/
>         *   /3rd_party/
>             *   /应用/

然后用`$this->load->library('3rd_party/application/tankh_auth.php`)`加载它们

解决这个问题的唯一方法（而不是使用库文件夹）是通过[编写自己的](http://ellislab.com/codeigniter/user-guide/general/core_classes.html). `application`在您的文件夹中创建 Loader.php ，特别`application/core`是通过覆盖库方法

```
class My_Loader extends CI_Loader {

  function __construct() {
        parent::__construct();

}

public function library($library = '', $params = NULL, $object_name = NULL){

  //override this method with your custom loader code 

   //eg  

  include_once($filepath."/".$library); //where your $filepath is path to your library,  

  $this->_ci_loaded_files[] = $filepath;  
  return $this->_ci_init_class($class, '', $params, $object_name);

  //again look at original methods and/or  write your own by referencing those
}

} 
```

# php - 没有 php 标记的 NetBeans 语法高亮

> ID：13886352
> 
> 赞同：0
> 
> 时间：2012-12-14T21:16:02.960
> 
> 标签：php, netbeans

有谁知道即使没有标签也可以使 NetBeans 为 php 文件保持 php 语法突出显示的方法？

我知道，通常情况下，你不会想要这个，因为它会将 PHP 突出显示应用于 HTML，但是，我使用的代码库都是 PHP CLI，并且只使用 shebang，而不是标签。

基本上，我希望 NetBeans 仍然突出显示如下所示的 php 代码

```
#!/usr/bin/php -F

echo "Hello World!\n"; 
```

而不是看起来像这样的代码：

```
#!/usr/bin/php
<?php

 echo "Hello World\n";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T21:33:37.820

您可以在评论后添加“<?php”，例如：

```
#!/usr/bin/php -F
#<?php

echo "Hello World!\n"; 
```

这不会影响 php-cli 中的运行并且在 Netbeans 中运行良好

# asp.net-mvc - 使用实体框架替代 DevExpress？

> ID：13886355
> 
> 赞同：1
> 
> 时间：2012-12-14T21:16:26.050
> 
> 标签：asp.net-mvc, entity-framework, devexpress, devart

最近我一直在使用 DevExpress 的试用版和最新版本的实体框架在一个网站上工作，但我的试用版已经用完了。有没有人知道我可以在它的地方使用的免费替代品？我想保持整个 MVC 流程继续进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:49:44.303

DevExpress 仅提供 MVC 的扩展（而不是其根）。只要您可以不使用图表、表格和其他控件的扩展版本就可以了。否则，如果您在他们的控制上死心塌地或投入了大量资金，您可能会考虑购买套餐。

此外，需要明确的是，EF 是一个免费提供的库（如果你有 NuGet，它[很容易获得](http://nuget.org/packages/entityframework)）所以任何依赖它的东西都是安全的：

```
Install-Package Entity-Framework -Version 5.0.0 
```

这会将最新的可靠构建安装到您的项目中。

# android - android相机在最小化后工作

> ID：13886360
> 
> 赞同：1
> 
> 时间：2012-12-14T21:16:49.983
> 
> 标签：android, camera, minimize

您可能会注意到，当我们最小化它时（例如，当我们启动一个新应用程序时），Android 手机中的相机会停止工作。我的问题是：有没有办法用安卓相机创建一个应用程序，即使我们最小化它也会记录下来，这样它就可以在我们在手机上做不同的事情时录制视频？或者只有在我们不使用 MediaStore 的情况下创建这样的相机时才有可能？如果您分享一些可能对我有帮助的链接或代码，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:58:00.107

我相信这个问题的答案是必须使用

```
public final void setPreviewTexture (SurfaceTexture surfaceTexture)

Added in API level 11
Sets the SurfaceTexture to be used for live preview. 
Either a surface or surface texture is necessary for preview, 
and preview is necessary to take pictures. 
```

来自[https://developer.android.com/reference/android/hardware/Camera.html](https://developer.android.com/reference/android/hardware/Camera.html)。从[https://developer.android.com/reference/android/graphics/Sur​​faceTexture.html](https://developer.android.com/reference/android/graphics/SurfaceTexture.html)：

```
The image stream may come from either camera preview or video decode. 
A SurfaceTexture may be used in place of a SurfaceHolder when specifying the 
output destination of a Camera or MediaPlayer object. Doing so will cause all the 
frames from the image stream to be sent to the SurfaceTexture object rather than 
to the device's display. 
```

我真的很想试试这个并向你发送一些代码，但我没有比姜饼更新的手机，这是用蜂窝引入的。

使用`surface`与 Activity 关联的，在Activity 被最小化`surfaceDestroyed`之间的某个时间被调用，但奇怪的是，不是在手机进入睡眠状态时调用： [SurfaceHolder 回调如何与 Activity 生命周期相关？](https://stackoverflow.com/questions/11495842/how-surfaceholder-callbacks-are-related-to-activity-lifecycle/13671391#13671391)但我希望 a不会以这种方式被破坏。`onPause``onStop``surfaceTexture`

# python - 在python中过滤文本以获取数值

> ID：13886363
> 
> 赞同：1
> 
> 时间：2012-12-14T21:17:00.013
> 
> 标签：python, regex

我知道我可以使用正则表达式在 python 中过滤文本中的数字，但这是最好的方法吗？

假设我有一个字符串列表：

```
a="gamma function: 78"
b="factorial value: 120"
c="random number: 33" 
```

是否有一个很好的功能可以执行以下操作？

```
for string in [a,b,c]:
    return numbers(string)
78
120
33 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T21:22:47.530

是的，我会说正则表达式是解决此问题的理想工具：

```
def numbers(s):
    return int(re.search(r"\d+", s).group(0)) 
```

对于具有多个数字的字符串：

```
def numbers(s):
    return [int(match) for match in re.findall(r"\d+", s)] 
```

甚至

```
def numbers(s):
    return (int(match) for match in re.finditer(r"\d+", s)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:26:56.660

只需过滤掉生成器表达式中的非数字：

```
a="gamma function: 78"
b="factorial value: 120"
c="random number: 33"

numbers = []
for string in [a,b,c,]:
    numbers.append( int("".join(char for char in string if char.isdigit()))) 
```

将其粘贴到控制台上，我得到：

```
>>> numbers
[78, 120, 33] 
```

# jquery - Kendo UI 网格 - 绑定到 json 不显示任何内容

> ID：13886364
> 
> 赞同：0
> 
> 时间：2012-12-14T21:17:07.267
> 
> 标签：jquery, grid, kendo-ui

这是我第一次使用 Kendo UI，我正在尝试使用从 json 文件提供的数据建立一个简单的网格。

当页面加载时，它没有显示任何内容，也没有给我任何类型的错误，我做错了什么吗？

```
var Data = new kendo.data.DataSource({
          transport: {
              read: {
                  url: "http://localhost:88/Animation.svc/GetProspect",
                  dataType: "json"
              }
          },

      });

      $("#grid").kendoGrid({
          dataSource: Data,
          columns: [
    {
        field: "Date",
        title: "Date"
    },
    {
        field: "Name",
        title: "Name"

    }],
     height: 200,
    scrollable: true,
    pageable: true,
    sortable: {
    mode: "multiple"
    }
      }); 
```

这是 json 格式的样子： [{"Date":"12-31-2010","Name":"A","LastName":"B"}, {"Date":"12-31- 2011","姓名":"B","姓氏":"C"}]

# menu - 我应该更改 Windows 8 的开始菜单链接名称吗？

> ID：13886367
> 
> 赞同：0
> 
> 时间：2012-12-14T21:17:42.370
> 
> 标签：menu, windows-8

在 Windows 8 中，Microsoft 删除了“开始”菜单，因此您无法轻松查看已安装的可单击运行的程序片段。这个对吗？

因此，当您在 Windows 8 下安装程序时，您现在必须知道已安装内容的开始链接名称中的几个字母，因此您可以键入 Windows 键和这几个字母，然后显示启动图标编程。正确的？

因此，我的软件菜单快捷方式似乎需要在每个开始菜单链接名称中包含一个共同的两个字母，以便用户可以按下 Windows 键并键入这两个字母以查看已安装的软件开始链接。正确的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:14:24.920

> “在 Windows 8 中，Microsoft 已删除开始菜单，因此您无法轻松查看已安装的程序片段，可以单击以运行。这是正确的吗？”

开始菜单已被“重新构想”到新的开始菜单中，其中包含可以接收实时更新的磁贴。不再是列出每个程序的静态名称的开始菜单，每个应用程序现在都有一个磁贴，可以显示与应用程序相关的新信息（例如，天气应用程序可以显示您所在城市的当前温度以及晴天与阴天的图形等.)。

> “因此，当您在 Windows 8 下安装程序时，您现在必须知道已安装程序的启动链接名称中的几个字母，因此您可以键入 Windows 键和这几个字母，然后显示启动图标编程。对吗？”

当您键入 Windows 键时，您将进入新的开始菜单。然后，当您键入这几个字母时，即会自动调用 Search（您也可以随时通过 Windows 键 + Q 调用）。

> “所以看来我的软件菜单快捷方式需要在每个开始菜单链接名称中包含一个共同的两个字母，这样用户就可以按下 Windows 键并键入这两个字母来查看已安装的软件开始链接。正确的想法？”

由于它正在调用搜索，因此您实际上并不需要共同的两个字母。只需将您的应用程序命名为对应用程序功能有意义的令人难忘的名称，然后用户可以键入应用程序的名称或其前几个字母，以按照您使用搜索的描述来显示它。

用户还可以浏览“开始”菜单以找到您的应用程序，并在“开始”菜单上将类似的应用程序组合在一起以使应用程序更易于查找（这里是有关[创建和命名组](http://blogs.msdn.com/b/zxue/archive/2012/03/07/win8-howto-10-customize-metro-ui-app-tiles-and-groups.aspx)的操作方法信息）。

# jquery - 如何使用 jQuery 迭代 JSON 序列化 System.Data.DataTable 中的记录

> ID：13886368
> 
> 赞同：0
> 
> 时间：2012-12-14T21:17:42.697
> 
> 标签：jquery, json, datatable, each

JSON 看起来像这样：

```
 [  {"animal":"dog", "sound": "bark"}, 
      {"animal":"cat", "sound": "meow"} ] 
```

我想迭代括号 [] 内的每条记录 {...}，首先是狗记录，然后是猫记录。如果可以使用 $.each() 依次引用每条记录，那是怎么做的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:22:49.587

我假设我们从 JSON 字符串开始，而不是实际的 javascript 数组表示法（我不清楚你从什么开始的问题）。这是一些示例用法：

```
var json = '[{"animal":"dog", "sound": "bark"},{"animal":"cat", "sound": "meow"}]';
var jsonObjectArray = $.parseJSON(json);
$.each(jsonObjectArray, function(i, obj) {
    // do something
    console.log(obj.animal);
    console.log(obj.sound);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:23:13.847

使用 JSON 格式的数组，您可以直接访问变量名称。

如果您从字符串创建此 JSON，那么 @Mike 是对的，您必须先解析 JSON。我假设您从服务器 POST 返回了 JSON。

```
var animals_json = '[{"animal":"dog", "sound": "bark"}, {"animal":"cat", "sound": "meow"}]';
var animals_parsed = $.parseJSON(animals_json);
$.each(animals_parsed, function (i, elem) {
    console.log(elem.animal + " makes a " + elem.sound);
}); 
```

如果您的 JSON 是从服务器端返回的，例如 PHP 页面，那么您可以在不解析的情况下使用它：

```
// SERVER SIDE
<?php
   //... create JSON
   $animals = array(
            array('animal' => 'dog', 'sound' => 'bark'), 
            array('animal' => 'cat', 'sound' => 'meow')
    );
?>

// CLIENT SIDE
<html>
<script>
    // RETURN FROM PHP PAGE ECHO VIA AJAX PERHAPS //
    var animals = <?php echo json_encode($animals) ?>;

    $.each(animals, function (i, elem) {
        console.log(elem.animal + " makes a " + elem.sound);
    });
</script>
</html> 
```

# jquery - asp.net 获取尚未创建的文本框的值

> ID：13886374
> 
> 赞同：0
> 
> 时间：2012-12-14T21:18:59.783
> 
> 标签：jquery, asp.net, ajax, textbox

我有一个输入类型文本，在单击 div 后通过 asp.net 动态创建：

```
divID.innerHtml = "<input type='text' runat='server' id='box' value='' />"; 
```

我想要做的是当再次单击 div 时，以获取 asp.net 中文本框的值。

问题是 - 文本框不存在，所以编译器给我一个试图使用它的名字的错误。

有没有办法做到这一点？

我还认为也许有一种方法可以以某种方式使用 jquery 将值传递给 asp.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:25:06.650

与其将文本框创建为 ，不如`HTML`创建控件并将其添加到页面中。

IE

```
 ''IN VB
  Dim tb as New TextBox() with {.ID = "box", .ClientIDMode =  UI.ClientIDMode.Static }

  // In C#
  TextBox tb = new TextBox {
    ID = "box",
     ClientIDMode = UI.ClientIDMode.Static
  }; 
```

使用`ClientIDMode=Static`将确保您在代码隐藏中设置的 ID 将是呈现给 HTML 的 ID，而不是 .net 更改它。

然后将此添加到您的 divID

```
 divID.Controls.Add(tb) 
```

您现在可以在回发时访问它。在您的回发方法中，您将需要`FindControl`获取控件 - 这是因为它不是您页面上的已知控件。我在 divID 上使用 FindControl，这将在该 div 内部查找我们之前创建的文本框。

```
 ''VB
 Dim tb as TextBox = CType(divID.FindControl("box"), TextBox)

 // C#
TextBox tb = (TextBox)divID.FindControl("box"); 
```

如果需要，您还可以通过 JQuery 调用来访问此 TextBox 的值`$("#box").val()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:55:51.913

我建议使用更以 ASP 为中心的方法，例如 Darren 发布的方法。

但是，*所有*表单输入都会在 PostBack（全部或部分）期间提交以供处理。

*因此，如果将名称为* `box`¹的文本输入控件添加到 HTML `form`- 动态地或从先前的请求中 - 则可以通过[`Request.Form`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)相应的 PostBack 访问提交的表单值：

```
string boxValue = Request.Form["box"]; 
```

请注意，这只会获取与表单一起提交的值，如果它存在的话；它不会*创建*任何神奇的代码隐藏对象或以其他方式影响控制树。作为接收新值的副作用，控制树可能会被更改，例如向此 PostBack 页面添加新控件。

* * *

¹ HTML 表单输入应该有一个 name 属性；id 属性不用于 HTML 表单提交。此外，名称属性可以重复，从而导致“控制数组”。要访问这些作为多个值提交的内容，请使用[Request.Form.GetValues(name)](http://msdn.microsoft.com/en-us/library/4ba5htte.aspx)。

# autoconf - autoconf automake LDADD 语法

> ID：13886382
> 
> 赞同：1
> 
> 时间：2012-12-14T21:19:53.993
> 
> 标签：autoconf, automake

autoconf (automake) 不接受

`packagename_LDADD = wx-config --libs`

并希望您`packagename_LDFLAGS`改用。

问题是`LDFLAGS`在命令行中放置了错误的位置以使此参数起作用。可以`LDADD`强制服用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:23:16.850

Automake 不知道这`wx-config --libs`是您希望扩展的 shell 表达式。

通常，您在这里要做的是提升检测和调用`wx-config`autoconf m4 宏（或使用 wx 小部件提供的宏），并将*结果*用作 automake 中的显式变量引用。那时，automake 将意识到这是一个要添加和慢煮的库列表。

# excel - 如何从excel调用VBA函数

> ID：13886383
> 
> 赞同：3
> 
> 时间：2012-12-14T21:19:58.970
> 
> 标签：excel, vba

我有一个 excel 文件，我必须在其中放置验证规则。我有一个单元格说“客户时间”，用户可以在其中输入时间，但它是自定义时间。用户可以这样输入时间

```
23:45
98:20
100:30 
```

用户不能输入字符串和除冒号以外的特殊字符。我制作了一个宏，它可以根据客户需求完美运行。这里是宏

```
Public Function isValidTime(myText) As String
Dim regEx
Set regEx = New RegExp   'Regular expression object
regEx.Pattern = "^[0-9]+([:]+[0-9]+)*$"  ' Set pattern.
If regEx.test(myText) Then
isValidTime = myText
Else
isValidTime = "Null"
End If
End Function 
```

注意：要测试此宏，您必须在 Tool 中转到 VBA ide，然后参考，然后选择 microsoft visual basic vbascript 5.5

现在我想在 excel 中调用它。我可以像 =IsValidTime("23:43") 一样调用并获得结果，但客户对此不感兴趣。客户需要一个excel，他/她在其中输入值，值将根据上述标准进行验证并获得确切的值或Null。

我不知道如何解决这个任务。我也从数据中验证了日期和时间，然后是数据验证并设置了规则，它工作得很好，我的这条规则也需要同样的方法。任何帮助将不胜感激......

谢谢卡兹米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:35:48.450

您可以`Worksheet_Change`在工作表内使用事件。在 VBE 中，选择工作表并`Workhseet`从左侧下拉列表和`Change`右侧进行选择。

输入以下代码：

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Address = "$A$1" Then 'assumes user input cell is A1

    With Application
        .ScreenUpdating = False
        .EnableEvents = False
    End With

    On Error GoTo ErrTrap

    Target.Value = isValidTime(Target.Value)

End If

KeepMoving:

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
    End With

    Exit Sub 

ErrTrap:

    MsgBox Err.Number & Err.Description
    Resume KeepMoving

End Sub

Public Function isValidTime(myText) As String

Dim regEx

Set regEx = New RegExp   'Regular expression object

regEx.Pattern = "^[0-9]+([:]+[0-9]+)*$"  ' Set pattern.

If regEx.test(myText) Then

    isValidTime = myText

Else
    isValidTime = "Null"

End If

End Function 
```

# java - 更新部分 XML 文件，保留所有格式

> ID：13886386
> 
> 赞同：4
> 
> 时间：2012-12-14T21:20:17.800
> 
> 标签：java, xml, clojure

我需要更新 XML 文件中的多个节点（只需将一个文本元素替换为另一个），这样生成的 XML 文件将保留其所有格式（在可能的情况下）。

例如，以下是源文档：

```
<project>
    <!-- Some long comment -->
    <!-- On several lines -->
    <name>Name</name> <!-- And here too -->
    <version>1.2.3</version>

</project> 
```

这是所需的结果文档（请注意版本已更改）：

```
<project>
    <!-- Some long comment -->
    <!-- On several lines -->
    <name>Name</name> <!-- And here too -->
    <version>3.2.1</version>

</project> 
```

所以结果保留了源的所有格式，只有版本标签内容发生了变化。

不幸的是，我找不到使用标准 Clojure（或 Java）库的方法。当然，它们确实支持 XML 字符串表示的基本缩进，但这对我来说还不够。

有没有办法用一些 XML 操作库来做到这一点（最好在 Clojure 中，但我猜 Java 也很好），或者我必须退回到纯文本/正则表达式替换？（真的，我不希望[XML 标签从我的眼睛中泄漏出来](https://stackoverflow.com/a/1732454/788207)，这应该是最后的手段......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:06:59.213

也许是一种混合方法，使用 clojure.xml 解析 XML 以找到您想要替换的确切文本，并确保您正在更改正确的位置。然后使用字符串替换来改变它。我很[犹豫是否建议使用正则表达式来解析 XML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# asp.net - 让非程序员编辑 VB.net 网站的简单 Windows 编辑器？

> ID：13886390
> 
> 赞同：1
> 
> 时间：2012-12-14T21:20:26.457
> 
> 标签：asp.net, vb.net, security, cart, shopping

所以我对 ASP.Net 还是很陌生。现在，我正在免费与某人合​​作，作为一种学习体验。

他们希望我在 ASP.Net 中创建一个站点，我也在使用 Visual Basic.net，但他们希望能够自己编辑站点以用于较小的事情。现在他们正在尝试为一家餐厅建立一个网站，我认为他们希望拥有它，以便人们可以在线下订单。对于接单。

他们还希望能够随意添加内容，而无需在想要对菜单进行小幅更改时打扰程序员“即我”。

那么是否有非程序员可以对网站进行更改的编辑器？除了拉出记事本，我认为这对他们来说可能太多了。像 Microsoft FrontPage 或 Expression Web 4，但免费？

另外，由于我以前从未真正建立过真正的实体网站，你实际上需要做什么来建立它？购买域名，购买网络服务器，将文件放在服务器上等。

另外，我应该尝试研究哪种类型的安全性，因为我以前从未真正处理过信用卡信息。

我在 Visual Studio 2010 的 VB.net 中执行此操作。

这不是餐厅，沟通错误，他们正在为餐厅出售各种商品，其中可能包括大量冷冻食品，银器等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:34:30.900

从头开始构建它是一个错误。你需要一个叫做内容管理系统（CMS）的东西来允许他们编辑它。有几个可用于基于 .Net 的服务器，包括 Orchard、dotNetNuke、CM1...

> 我认为他们正在尝试为一家餐厅建立一个网站，他们希望拥有它，以便人们可以在线下订单。

您认为？你不确定？是时候得到一些真正的要求了。而且，FWIW，我见过的大多数尝试过在线订购的小餐馆，即使是外卖，也很快又退缩了，或者至少重新部署了订购系统，以便只有服务员可以使用它。像必胜客这样的外卖连锁店是个例外，但他们的需求比一个没有经验的开发人员所能满足的要大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:34:14.250

如果您希望您的客户编辑网站，我认为您需要 CMS。选择哪一个看这个[问题](https://stackoverflow.com/questions/243655/what-is-the-best-open-source-net-content-management-system-cms)。

对于生产网站，您需要购买域名和托管。

为了处理信用卡，您需要使用一些提供商，例如贝宝或其他一些拥有商户帐户的公司。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:13:44.160

查看[WebMatrix](http://www.microsoft.com/web/webmatrix/)。这可能是您实现目标的最快/最简单的方法。探索包括 CMS 在内的功能（正如其他答案已经正确建议的那样），以允许非程序员“编辑”。

# javascript - 使用 PHP 和 Javascript 的下拉 onchange 方法

> ID：13886391
> 
> 赞同：0
> 
> 时间：2012-12-14T21:20:39.010
> 
> 标签：javascript, php, drop-down-menu, dom-events, onchange

我有两个从 MySQL 数据库中读取数据的下拉菜单。我使用 PHP 连接到数据库。第二个下拉菜单应根据第一个下拉菜单上的选择进行填充。这个过程对我来说似乎如下（如果我错了，请纠正我）：

1.  PHP 部分连接到 MySQL 数据库并填充 dropdown1。
2.  用户在 dropdown1 上选择一个值并调用 onchange 事件。
3.  在 onchange 函数（它是 Javascript）中，一个查询被发送到 MySQL 数据库以根据 dropdown1 选择获取 dropdown2 的值（这里又是 PHP，对吗？）。
4.  dropdown2 被填充。

我不知道如何同时使用 Javascript 和 PHP 来完成这项任务（上面的第 3 点）；或者也许这根本不是这样做的方法。请指教！

这是我的代码。正如您在下面看到的，我在 PHP 代码中放置了一个 Javascript 函数，我认为这是错误的。这就是我卡住的地方！

```
<php
$sql="SELECT distinct category FROM table1";
$result=mysql_query($sql);

$optionsCat="";
while($row = mysql_fetch_row($result)){
    $optionsCat.="<option value=\"$row[0]\">$row[0]</option>";
}

function genSubCat($catID){
$sql="SELECT distinct subcategory FROM table1 where category=".$catID;
$result=mysql_query($sql);

$optionsSubCat="";
while($row = mysql_fetch_row($result)){
    $optionsSubCat.="<option value=\"$row[0]\">$row[0]</option>";
}
}

?>
<select name="catDropDown" onChange="genSubCat(this)">
    <option value="0">Select category</option>
    <?php echo $optionsCat?>
</select>
<select name="subcategoryDropDown">
    <option value="0">Select subcategory</option>
    <?php echo $optionsSubCat?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:55:32.423

这里我们有一个简单的页面，上面有输入。在其中输入一个单词，然后单击输入。Ajax 将调用 myphp.php 脚本并返回您在原始分区下方键入的相同单词。

`test.html`：

```
<!DOCTYPE html>
<html lang="en">
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript"> 
$(document).ready(function() {
$("#faq_search_input").blur(function(){
   var faq_search_input = $(this).val();
   var dataString = 'keyword='+ faq_search_input;
   if(faq_search_input.length>1){
      $.ajax({type: "GET", url: "myphp.php", data: dataString,
              success: function(server_response) {
                 document.getElementById("searchresultdata").style.display = "block";
                 $('#searchresultdata').html(server_response).show();
              }
          });
       }
       return false;
   });
});

</script>
  </head>
  <body>
<div class="searchholder">
    <input  name="query" class="quicksearch" type="text" id="faq_search_input" />
<div id="searchresultdata" class="searchresults" style="display:none;"> </div>
</div>
  </body>
</html> 
```

`myphp.php`：

```
 <?PHP
    echo $_GET['keyword'];
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:46:58.207

我认为您应该首先学习使用基于网络的语言。您提供的代码完全错误。您正在尝试通过 HTML 访问 PHP 代码？我的意思是来吧！

第一条规则：基于服务器的语言不能与基于客户端的语言进行通信。

您必须发送请求并获取响应，并且您想要执行该下拉操作的方式是将请求发送到 PHP 代码并从中获取相关数据。正如 Trufa 在评论中所说，您可能想查看[jQuery](http://jquery.com/)库，但在此之前我认为您需要检查[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

# javascript - JSONRequest.get 示例代码

> ID：13886395
> 
> 赞同：-2
> 
> 时间：2012-12-14T21:20:51.277
> 
> 标签：javascript, json, get

这是我第一次使用 JSON，我是 web 开发中的菜鸟。在他们的网站 (http://www.json.org/JSONRequest.html) 上，他们建议使用 JSONRequest.get。但是，我不断收到错误“未定义 JSONRequest”。我的代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta Content-Type= application/jsonrequest >

<title>Insert Events Page</title>
</head>
<body> 

<h2>List of ALL events: </h2><br>
<script type="text/javascript">
try {
    JSONRequest.get("http://localhost:8888/mma/event/allevents", function(sn, response, exception){
            alert(exception || response);
    });
}
catch(e) {
    alert(e);
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-16T04:14:43.843

您需要包含包含 JSONRequest 对象的文件。我不知道是否是官方网站，但可以从[https://code.google.com/p/web-opm/source/browse/js/json/?name=client&r=f7c9a4447ed55570b0b056bbb90e82d310fb986f下载](https://code.google.com/p/web-opm/source/browse/js/json/?name=client&r=f7c9a4447ed55570b0b056bbb90e82d310fb986f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:37:09.790

这直接来自您引用的网站：

来源： http: [//www.json.org/JSONRequest.html](http://www.json.org/JSONRequest.html)

> 例子：
> 
> ```
> requestNumber = JSONRequest.get(
>     "https://json.penzance.org/request",
>     function (requestNumber, value, exception) {
>         if (value) {
>             processResponse(value);
>         } else {
>             processError(exception);
>         }
>     }
> ); 
> ```
> 
> JSONRequest.get验证参数后，将请求排队并返回请求号。当请求的结果已知时，将在稍后调用 done 函数值。
> 
> GET 操作不会发送任何 cookie 或隐式身份验证信息。任何身份验证信息都必须放在 url 中。
> 
> 请求可以使用 http 或 https。此选择与页面的安全性无关。
> 
> ```
> GET /request HTTP/1.1
> Accept: application/jsonrequest
> Host: json.penzance.org 
> ```
> 
> 服务器确认请求后，直到超时间隔到期才能产生响应。如果超过时间限制，或者如果在发送完整响应之前关闭连接，则请求失败。
> 
> ```
> HTTP/1.1 200 OK
> Content-Type: application/jsonrequest
> Content-Length: xxxx 
> ```

# javascript - 遍历主干集合

> ID：13886398
> 
> 赞同：0
> 
> 时间：2012-12-14T21:20:58.693
> 
> 标签：javascript, backbone.js, underscore.js

我刚刚开始在我的应用程序中集成backbone.js。我有一个关于遍历集合中每个模型的问题。

我基本上想获取集合中每个模型的 url 并将这些 url 附加到其相应的模型。我现在正在这样做，我只是想知道是否有其他方法可以做到这一点？

```
getItemsURLs: function(collection){

    var idsInCollection = [];

    collection.each(function(model) {
       idsInCollection.push(model.get('id'));
    });

    makeServiceCall({
        data: idsInCollection,
        success: function(data) {
            collection.each(function(model,i) {
                model.set({ url: data.urls[i]});
            });
        }
    }); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:28:20.963

使用`pluck`更简洁：

```
var idsInCollection = collection.pluck('id'); 
```

*（正如 asawyer 所指出的，`pluck`比`map`or更简洁`each`。）*

# objective-c - 从 NSDictionary 访问值

> ID：13886399
> 
> 赞同：1
> 
> 时间：2012-12-14T21:20:58.517
> 
> 标签：objective-c, ios, nsdictionary

我如何获取或访问 nsdictionary 中的值，我只想从冷却器中获取 valuetext

```
data (
        (
                {
            Caption = Chiller;
            MetricClass = 10;
            Value = "109.4000015258789";
            ValueText = "109.4";
        },
                {
            Caption = "Chiller Product";
            MetricClass = 10;
            Value = "37.40000152587891";
            ValueText = "37.4";
        },
                {
            Caption = Freezer;
            MetricClass = 10;
            Value = 104;
            ValueText = "104.0";
        },
                {
            Caption = "Freezer Product";
            MetricClass = 10;
            Value = "42.79999923706055";
            ValueText = "42.8";
        }
    ),
        (
                {
            Caption = Chiller;
            MetricClass = 10;
            Value = "109.4000015258789";
            ValueText = "109.4";
        },
                {
            Caption = "Chiller Product";
            MetricClass = 10;
            Value = "48.20000076293945";
            ValueText = "48.2";
        },
                {
            Caption = Freezer;
            MetricClass = 10;
            Value = 104;
            ValueText = "104.0";
        },
                {
            Caption = "Freezer Product";
            MetricClass = 10;
            Value = "53.59999847412109";
            ValueText = "53.6";
        }
    ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:33:13.797

这看起来不像是有效的（JSON）数据......但如果它只是一个 NSDictionaries 的 NSArray，那么这应该可以工作：

```
for (NSDictionary *dict in data)
{
    NSLog(@"%@", dict[@"Caption"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:58:02.667

谢谢大家的时间和回复，从回复中我知道我需要做什么。

```
 for (NSArray *test in [dictobject valueForKey:@"ValueText"]) {

                [arrayobject addObject:[test objectAtIndex:2]];
            } 
```

再次感谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:14:34.793

正如@Hot 所说，您拥有一组字典数组，并且可以轻松使用新的文字语法。

例子：

```
test: NSArray * data = @[
                   @[
                       @{
                           @"Caption" : @"Chiller",
                           @"MetricClass" : @10,
                           @"Value"  : @"109.4000015258789",
                           @"ValueText" : @"109.4",
                           },
                       @{
                           @"Caption" : @"Chiller Product",
                           @"MetricClass" : @10,
                           @"Value"  : @"37.40000152587891",
                           @"ValueText" : @"37.4",
                           },
                       @{
                           @"Caption" : @"Freezer",
                           @"MetricClass" : @10,
                           @"Value" : @104,
                           @"ValueText" : @"104.0",
                           },
                       @{
                           @"Caption" : @"Freezer Product",
                           @"MetricClass" : @10,
                           @"Value"  : @"42.79999923706055",
                           @"ValueText" : @"42.8",
                           }
                       ],
                   @[
                       @{
                           @"Caption" : @"Chiller",
                           @"MetricClass" : @10,
                           @"Value"  : @"109.4000015258789",
                           @"ValueText" : @"109.4",
                           },
                       @{
                           @"Caption" : @"Chiller Product",
                           @"MetricClass" : @10,
                           @"Value"  : @"48.20000076293945",
                           @"ValueText" : @"48.2",
                           },
                       @{
                           @"Caption" : @"Freezer",
                           @"MetricClass" : @10,
                           @"Value" : @104,
                           @"ValueText" : @"104.0",
                           },
                       @{
                           @"Caption" : @"Freezer Product",
                           @"MetricClass" : @10,
                           @"Value"  : @"53.59999847412109",
                           @"ValueText" : @"53.6",
                           }
                       ]
                   ];
NSLog(@"Value: %@", data[0][0][@"Value"]);
NSLog(@"Value: %@", [[[data objectAtIndex:0]objectAtIndex:0]objectForKey:@"Value"]); 
```

> 值：109.4000015258789
> 值：109.4000015258789

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T22:03:01.227

您所拥有的是一个 NSArray，其中包含 NSArrays，其中包含 NSDictionaries。（在 NSLog 转储中，数组用括号括起来，`()`而字典用 括起来`{}`。）

您需要“剥洋葱”——用于`objectAtIndex`访问数组条目，`objectAtIndex`再次访问内部数组的条目，然后`objectForKey`从字典中获取值。

# jquery - 将 div 的高度设置为 100%，然后减去特定数量？

> ID：13886405
> 
> 赞同：0
> 
> 时间：2012-12-14T21:21:21.433
> 
> 标签：jquery

我已经尝试做多种事情来让它工作，但似乎无法让它工作。我有一个自动固定到底部的 div。有一个内容框可以拉伸页面的高度，我需要它停在它碰到底部 div 的底部。谁能引导我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:27:50.043

也许我误解了你，但似乎是你正在寻找的：

```
$('#content-box').height($(window).height()-$('#bottom').height()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:29:21.227

这不能用纯 CSS 完成，只能通过 Java Script 完成。但是，有一个简单的解决方案，它是某种 hack，但有效。

hack 是应用`margin-bottom`CSS 属性，其值等于提到的页脚的高度。这应该从页面底部推送内容，以便正确显示页脚和内容。

请看这个小提琴：http: [//jsfiddle.net/bS7tz/](http://jsfiddle.net/bS7tz/)

# sql - 在 Powershell 中执行存储过程时出错

> ID：13886407
> 
> 赞同：1
> 
> 时间：2012-12-14T21:21:23.367
> 
> 标签：sql, powershell, powershell-2.0

我有一个 powershell 脚本，它接受我计划用来执行存储过程的用户输入。sproc 接受多个参数来自定义返回的数据。但是，当我运行此 powershell 代码时，出现以下错误：

```
Cannot index into a null array.
At C:\Report.ps1:119 char:42
+     foreach ($Row in $global:DataSet.Tables[ <<<< 0].Rows)
+ CategoryInfo          : InvalidOperation: (0:Int32) [], RuntimeException
+ FullyQualifiedErrorId : NullArray 
```

这是我用来执行对存储过程的调用的 powershell 代码。

```
# Create Shared Helper Objects
$nl = [Environment]::NewLine

function msg
{
    param($message,$fgcolor="white",$bgcolor="black")
    $output = Write-Host $message -ForegroundColor $fgcolor -BackgroundColor $bgcolor
    write-output $output
}
Set-Location "C:\"

$month = Read-Host "Enter Report Month"
$year = Read-Host "Enter Report Year"
msg "$nl Choose a product" "White"
$prompt = ' [D] Desktop  [M] Mobile'
switch (Read-Host $prompt) {
"D" {$product = "Desktop"; break}
"M" {$product = "Mobile"; break}
}
msg "$nl Select a Make" "White"
$prompt = ' [F] First [L] Last '
switch (Read-Host $prompt) {
"F" {$SiteMake = "First"; break}
"L" {$SiteMake = "Last"; break}
}
msg "$nl Select a Product" "White"
$prompt = ' [E] Extra [B] Basic'
switch (Read-Host $prompt) {
"E" {$SitePackage = "Extra"; break}
"B" {$SitePackage = "Basic"; break}
}

# Create Database Connection Function
function ConnectSproc
{
param ($SQLServer, $SQLDBName, $SqlQuery)
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection  
$SqlConnection.ConnectionString = "Server = $SQLServer; Database = $SQLDBName; Integrated Security = True"  
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand  
$SqlCmd.CommandText = $SqlQuery
$SqlCmd.CommandType = [System.Data.CommandType]::StoredProcedure
    # Report Month
    $SqlCmd.Parameters.Add("@ReportMonth",[system.data.SqlDbType]::VarChar) | out-Null
    $SqlCmd.Parameters["@ReportMonth"].Direction = [system.data.ParameterDirection]::Input
    $SqlCmd.Parameters["@ReportMonth"].value = $month
    # Report Year
    $SqlCmd.Parameters.Add("@ReportYear",[system.data.SqlDbType]::VarChar) | out-Null
    $SqlCmd.Parameters["@ReportYear"].Direction = [system.data.ParameterDirection]::Input
    $SqlCmd.Parameters["@ReportYear"].value = $year
    # Product
    $SqlCmd.Parameters.Add("@Product",[system.data.SqlDbType]::VarChar) | out-Null
    $SqlCmd.Parameters["@Product"].Direction = [system.data.ParameterDirection]::Input
    $SqlCmd.Parameters["@Product"].value = $product
    # Site Make
    $SqlCmd.Parameters.Add("@SiteMake",[system.data.SqlDbType]::VarChar) | out-Null
    $SqlCmd.Parameters["@SiteMake"].Direction = [system.data.ParameterDirection]::Input
    $SqlCmd.Parameters["@SiteMake"].value = $SiteMake
    # Site Package
    $SqlCmd.Parameters.Add("@SitePackage",[system.data.SqlDbType]::VarChar) | out-Null
    $SqlCmd.Parameters["@SitePackage"].Direction = [system.data.ParameterDirection]::Input
    $SqlCmd.Parameters["@SitePackage"].value = $SitePackage
$SqlCmd.Connection = $SqlConnection  
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter  
$SqlAdapter.SelectCommand = $SqlCmd  
$DataSet = New-Object System.Data.DataSet  
$SqlAdapter.Fill($DataSet) | Out-Null  
$SqlConnection.Close()  
$DataSet.Tables[0]
}

ConnectSproc "servername" "databasename" "mysproc" 
```

我不知所措。任何帮助，将不胜感激！

更新：实际上看起来程序甚至没有正确执行。这可能会解释我得到的错误。现在我不确定为什么 sproc 没有执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:44:43.217

我想到了。它最终成为在函数内部创建的 $DataSet 变量并且没有以“$global:”为前缀的范围问题

为了解决它，我改变了

`$DataSet = New-Object System.Data.DataSet`并将`$global:DataSet = New-Object System.Data.DataSet`其作为`$global:DataSet.Tables[0]`函数外部引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:35:48.030

也许调用`Fill()`失败。暂时注释掉 的`| Out_Null`部分`$SqlAdapter.Fill($DataSet) | Out-Null`，看看是否能说明问题。

# iphone - 运行两个 NSTimer 而不让第一个 NSTimer 影响第二个？

> ID：13886413
> 
> 赞同：2
> 
> 时间：2012-12-14T21:21:50.340
> 
> 标签：iphone, objective-c, nstimer

我试图运行 2 个 NSTimer。我注意到它不起作用。是否有可能运行 2 个 NSTimer？我试图在球移动时开始反击。但是如果我开始它，当计数器到达下一秒时，敌人的球会从头开始。当然，这场比赛还没有结束。

这是我的“项目”：

```
//.h
@interface ViewController : UIViewController {

    IBOutlet UIButton *startButton;
    NSTimer *randomMain;
    CGPoint pos; 
    IBOutlet UIImageView *enemy;
    IBOutlet UIImageView *player;

    IBOutlet UIButton *startCounter;

    IBOutlet UILabel *seconds;
    NSTimer *timer;
    int MainInt;
}

-(IBAction)start2:(id)sender;

- (IBAction)start;

//.m

@implementation ViewController

-(void)countup {
    MainInt += 1;
    seconds.text = [NSString stringWithFormat:@"%i", MainInt];
}

-(IBAction)start2:(id)sender {
    MainInt = 0;
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countup)userInfo:nil repeats:YES];   
}

- (IBAction)start {
    [startButton setHidden:YES];
    randomMain = [NSTimer scheduledTimerWithTimeInterval:(0.03) target:self selector: @selector(onTimer) userInfo:(nil) repeats:YES];
}

-(void)onTimer{   
    [self checkCollision];

    enemy.center = CGPointMake(enemy.center.x+pos.x,enemy.center.y+pos.y);

    if (enemy.center.x > 320 || enemy.center.x < 0)
        pos.x = -pos.x;
    if (enemy.center.y > 480 || enemy.center.y < 0)
        pos.y = -pos.y;
}

- (void)checkCollision {

    if( CGRectIntersectsRect(player.frame,enemy.frame))
    {
        [randomMain invalidate];
        [startButton setHidden:NO];

        CGRect frame = [player frame];
        frame.origin.x = 137.0f;
        frame.origin.y = 326.0;
        [player setFrame: frame];

        CGRect frame2 = [enemy frame];
        frame2.origin.x = 137.0f;
        frame2.origin.y = 20.0;
        [enemy setFrame: frame2];

       UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"You hit the ball!" message: [NSString stringWithFormat:@"Try it again!"] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alert show];
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *myTouch = [[event allTouches] anyObject];
    player.center = [myTouch locationInView:self.view];    
}

-(void)viewDidLoad {   
    [super viewDidLoad];
    // X Speed Y Speed
    pos = CGPointMake(5.0,4.0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:15:19.927

尝试在不同的线程中运行第二个计时器。即，将其写入在单独线程中运行的函数中。在设置第二个计时器的位置调用该函数。

# python - Pypy 特定错误

> ID：13886415
> 
> 赞同：3
> 
> 时间：2012-12-14T21:21:56.830
> 
> 标签：python, pypy

我有以下代码：

```
#!/usr/bin/env python
#!/usr/bin/env pypy

class my_components(object):
    COMP0 = 0
    COMP1 = 1
    COMP1 = 2
    __IGNORECOMP = -1

def attribute_dictionary(o):
    d = { }
    for attr in dir(o):
        if attr[:2] != '__':
            print o,attr
            d[attr] = o.__getattribute__(o, attr)
    return d

def main():
    print attribute_dictionary(my_components)

if __name__ == '__main__':
    main() 
```

我用来在python中有效地做花哨的枚举。

它在 python 中效果很好，打印：

```
<class '__main__.my_components'> COMP0
<class '__main__.my_components'> COMP1
<class '__main__.my_components'> _my_components__IGNORECOMP
{'COMP0': 0, 'COMP1': 2, '_my_components__IGNORECOMP': -1} 
```

但是，当我使用 pypy（切换前两行）运行它时，它会失败并显示：

```
<class '__main__.my_components'> COMP0
Traceback (most recent call last):
  File "app_main.py", line 53, in run_toplevel
  File "./pypy_Test.py", line 25, in <module>
    main()
  File "./pypy_Test.py", line 21, in main
    print attribute_dictionary(my_components)
  File "./pypy_Test.py", line 17, in attribute_dictionary
    d[attr] = o.__getattribute__(o, attr)
TypeError: unbound method __getattribute__() must be called with my_components instance as first argument (got type instance instead) 
```

任何见解都将受到欢迎。

-谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:37:13.767

您正在调用`__getattribute__`传递*类*，而不是该类的实例。从[`__getattribute__`文档](http://docs.python.org/2/reference/datamodel.html#object.__getattribute__)中：

> 无条件调用以实现类实例的属性访问。

将类作为 cPython 中的第一个参数，这完全可以工作，这是一个令人高兴的巧合。正式地，第一个参数应该是一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:37:00.833

> TypeError：`__getattribute__()`必须以 my_components 实例作为第一个参数调用未绑定的方法（改为获取类型实例）

这就是说（至少对于 PyPy），第一个参数`__getattribute__`必须是 class 的实例`my_components`。

相反，`o`是类`my_components`本身，而不是实例。

尝试改变

```
d[attr] = o.__getattribute__(o, attr) 
```

到

```
d[attr] = getattr(o, attr) 
```

# sql - 我怎样才能以更高效的方式编写此代码？

> ID：13886417
> 
> 赞同：5
> 
> 时间：2012-12-14T21:22:12.000
> 
> 标签：sql, ruby-on-rails-3, performance

在我们的应用程序中，人们有 1 个或多个项目。这些项目有开始日期和结束日期。人们的可用天数有限。

现在我们有一个页面，每周显示给定人员的可用性。目前显示 18 周。

我们目前计算给定一周的可用时间的方式是这样的：

```
def days_available(query_date=Date.today)
  days_engaged = projects.current.where("start_date < ? AND finish_date > ?",     query_date, query_date).sum(:days_on_project)
  available = days_total - hours_engaged
end 
```

这意味着要显示上面描述的页面，应用程序将向数据库触发 18(!) 个查询。我们的页面列出了表格中多人的可用性。对于这些页面，查询量很快变得惊人。

它也很慢。

**我们如何以更高效的方式处理可用性检索？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:08:51.657

在处理实体中的日期范围时，这是很常见的情况。简单快捷的方法是在 SQL 中：

将您的事件加入到一个数字生成的日期表中（请参阅 [从日期范围生成天数](https://stackoverflow.com/questions/2157282/generate-days-from-date-range)），以便您在一个人或多个人被占用的每一天都有一行。一旦您以这种形式获得数据，只需按日期的周日期部分分组并计算每个分组的行数。

您可以将此扩展为按人分组以进行多人查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:20:51.367

从 SQL 的角度来看，我建议使用存储过程并传入您的日期/范围要求，然后您可以为一个用户或可能的多个用户返回一个记录集。这样，您的代码只需访问 db 一次。

然后，您可以通过迭代一次输出记录集数据。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T06:39:55.007

使用存储过程将您的查询触发到 SQL 以获取数据。

在您的情况下将参数传递给 SQl 查询的是今天的日期。

在 SQL 存储过程中应用你的条件和逻辑，使用过程是从 SQL 中检索数据的好和最快的方法，它也可以防止你的代码被 SQL 注入。

从您的代码中调用该 SP，因为我不知道 raisl 上的 Ruby，我无法为您提供有关如何从中调用存储过程的步骤。

之后，根据您的存储过程提取的数据将在数据表或类似的东西中可用。

获取数据后，您可以执行所有您需要的操作

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T09:45:02.173

查看执行了什么查询。您可以进一步向您的查询做出解释

```
explain select * from  project where start_date < any_date and end_date> any_date2 
```

你看查询的计划。使用此计划来优化您的查询。例如：如果您有使用字段 end_date 的索引，请替换条件(end_date> any_date2 and start_date < any_date) 。如果您在此字段上有索引，此步骤将使用索引。但它的步骤是依赖于数据库的。示例适用于 nysql。如果要在 mysql 中使用索引，则必须在 where 的左侧使用索引条件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T23:46:21.380

您的问题中没有足够的信息来确切地知道您要在这里实现什么，例如代码片段没有使用返回的数据库查询，因此您可以将其删除以使其更快。也许这只是您发布的代码中的一个错误？

话虽如此，您应该研究一些技术来实现您的功能。

我会看看使用数据仓库技术。我会将您的“可用性信息”视为**星型模式**中的事实表，将“日期”和“人员”视为维度表。

然后，您可以使用查询来获取诸如本周该项目的用户列表及其可用性之类的内容。

数据仓库有一大堆资源，您可以利用它来帮助使其表现良好，但也有很多术语可能会令人困惑，但对于这种类型的“我需要在几组事物中对数据进行切片和切块” （人和时间）'，数据仓库技术可以非常强大。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-24T05:25:03.637

由于我不了解 ruby​​ on rails，从 sql 的角度来看，我建议您编写一个存储过程并返回一个数据集。并从前端对数据集进行必要的表操作。这将减少对 DB 的不必要调用。

# javascript - 哪些错误事件不会触发 window.onerror？

> ID：13886421
> 
> 赞同：10
> 
> 时间：2012-12-14T21:22:28.120
> 
> 标签：javascript, error-handling

MDN[声明如下](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)：

> 一些/许多`error`事件不会触发`window.onerror`，您必须专门监听它们

这很好，但哪些不调用[`onerror`](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T21:31:03.693

看起来 quirksmode 详细说明了它将捕获和不会捕获的错误： [http ://www.quirksmode.org/dom/events/error.html](http://www.quirksmode.org/dom/events/error.html)

如果它有帮助，您特别`throw`会发现任何错误。

# salesforce - 无法将 SOQL 查询中的行输出到

> ID：13886422
> 
> 赞同：1
> 
> 时间：2012-12-14T21:22:27.773
> 
> 标签：salesforce, apex-code, visualforce, soql

我收到此错误：

```
Description Resource    Path    Location    Type
Save error: Unknown property 'OpportunityStandardController.getLines'   AlexHelloWorld.page /SFDC/src/pages line 0  Force.com save problem 
```

VF 页面：

```
<apex:page standardController="Opportunity" extensions="AlexHelloWorld">
    <apex:form >
        <apex:pageBlock title="Edit account for {!$User.FirstName}">
            <apex:pageMessages />
            <apex:pageBlockButtons >

            </apex:pageBlockButtons>
            <apex:pageBlockSection >
                <apex:outputText value="Test - {!retVal}">
                </apex:outputText>
            </apex:pageBlockSection>
            <apex:pageBlockSection >
                <apex:outputText value="OppId - {!opportunity.id}" />
                <apex:outputText value="UserId - {!$User.Id}" />
            </apex:pageBlockSection>
            <apex:pageBlockSection>
                <apex:repeat value="{!getLines}" var="line" id="theRepeat">
                    <tr>
                        <td valign="top"><apex:outputField value="{!line.Id}" /></td>
                        <td valign="top"><apex:outputField value="{!line.OpportunityId}" /></td>
                        <td valign="top"><apex:outputField value="{!line.PricebookEntryId}" /></td>
                        <td valign="top"><apex:outputField value="{!line.Quantity}" /></td>
                    </tr>
                </apex:repeat>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
</apex:page> 
```

控制器：

```
public with sharing class AlexHelloWorld {

    public boolean  showFedEx{get;set;}
    public String   mystr{get;set;}
    public Id       opportunityId{get;set;}

    //public Opportunity opportunity{get;set;}
    public Decimal retVal{get;set;}

    //Main controller class
    public AlexHelloWorld(ApexPages.StandardController controller)
    {
        mystr = [SELECT Email from User where Id =:Userinfo.getUserId()].Email;
        showFedEx = true;
        retVal = 5*5;
        System.debug('zzzzz');
    }

    public List<OpportunityLineItem> getLines()
    {       
        List<OpportunityLineItem> oli = [SELECT Id, OpportunityId, PricebookEntryId, Quantity FROM OpportunityLineItem where id =:System.currentPageReference().getParameters().get('id')];

        return oli;     
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:07:39.767

简单错误:) 您应该跳过函数名称中的“get/set”。我同意这不是世界上最明确的错误信息。

您的 VF 页面应该调用`{!lines}`，而不是`{!getLines}`（Visualforce 不区分大小写，Apex 也不区分）。然后它会编译得很好。

```
...
<apex:repeat value="{!lines}" var="line" id="theRepeat">
... 
```

它是如此基本，我什至不确定在文档中链接到哪里（没有冒犯），也许是[http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/pages_quick_start_controller_getter_methods。 htm](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/pages_quick_start_controller_getter_methods.htm)

* * *

一个小问题 - 如果您有 Opportunity[标准控制器](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/apex_pages_standardcontroller.htm)，您可能希望在构造函数中执行此操作：

```
Opportunity opp = (Opportunity) controller.getRecord(); 
```

事实上，您可以忽略整个控制器端并直接从 Visualforce 显示行项目相关列表（但如果您想对它们进行排序，这对您没有帮助）。

```
<apex:repeat value="{!Opportunity.OpportunityLineItems}" var="line" id="theRepeat">
    <tr>
        <td valign="top"><apex:outputField value="{!line.Id}" /></td>
        <td valign="top"><apex:outputField value="{!line.OpportunityId}" /></td>
        <td valign="top"><apex:outputField value="{!line.PricebookEntryId}" /></td>
        <td valign="top"><apex:outputField value="{!line.Quantity}" /></td>
    </tr>
</apex:repeat> 
```

# concurrency - Sinatra + websocket + 赛璐珞

> ID：13886426
> 
> 赞同：10
> 
> 时间：2012-12-14T21:22:52.750
> 
> 标签：concurrency, websocket, sinatra, celluloid

嗨，有人知道如何放置一个在[Celluloid:IO](http://celluloid.io/)之上运行并使用 websocket 的 Sinatra 应用程序的快速代码示例吗？

我知道用于赛璐珞的 Reel 的存在（*“Reel 是建立在 Celluloid:IO 之上的快速、非阻塞的‘事件’网络服务器”* ......并且立即支持 websockets）但我还是想继续使用Sinatra，因为我喜欢它，我已经习惯了它，我宁愿不重写很多代码......

希望你能帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:05:30.787

Celluloid::IO 有一个名为**Reel** ( [http://github.com/celluloid/reel](http://github.com/celluloid/reel) ) 的事件 HTTP/WebSocket 服务器，这是您想要的最佳设置，但除了 Thin 和 Rainbows 之外，这仍然是相当新的。这超出了 Sinatra 并且必须涉及**Rack**本身。到目前为止，它一直是特定于某些 HTTP 服务器的，并且每个“机架处理程序”都以自己的方式接近 WebSocket。现在它有点标准化了，但在 Rack 2.0 中它将成为永久性的。我猜这种临时的方式会保留下来，但在 2.0 中变得比现在在 +1.5.* 中更成熟。

这即将发布到 Reel 的 master 分支，但现在在 halgorium 的 fork 的一个分支中，这里：

[https://github.com/halorgium/reel/tree/hijacked-websocket](https://github.com/halorgium/reel/tree/hijacked-websocket)

这个问题的持续进展是在这里：

[https://github.com/celluoid/reel/issues/42](https://github.com/celluloid/reel/issues/42)

此功能的实现涉及与在 Sinatra 下的 Rack 中称为**劫持API 的相当新且有些临时的功能进行交互。**它相当复杂，但一旦你掌握了它，它就很酷了。这方面的完整信息在这里：

> **...这一切都在 github 线程中决定：** [https ://github.com/rack/rack/pull/481](https://github.com/rack/rack/pull/481)

根据@rhk 的说法，目前还没有通过 Sinatra 的 Rack 劫持对 WebSockets 的正式支持，而且除了中间件之外没有任何计划。因此，根据您的服务器和实施风格的选择，它始终是您有选择地处理的事情。

我处理它的方式是使用 Reel，但**Puma** ( [http://puma.io](http://puma.io) ) 也非常好。任何支持 hijack_io 的 HTTP 服务器都将运行相同的操作。我这样做的方式在下面链接的要点中进行了说明。它使用**websocket-protocol-ruby**来实际处理与客户端的交互，在客户端，我使用 portal.js 而不仅仅是普通的 HTML5 方法。我相信它会好很多。

**Portal.js：** [https ://github.com/flowersinthesand/portal](https://github.com/flowersinthesand/portal)

**websocket-protocol-ruby：** [https ://github.com/faye/websocket-protocol-ruby](https://github.com/faye/websocket-protocol-ruby)

正如 github 上的 Rack API 线程中所提到的，这一切都取决于这一部分：

```
env['rack.hijack'].call
@env = env
@io = env['rack.hijack_io'] 
```

hijack_io 有两种使用方式，但正如我所说，它非常涉及 Rack。那里没有太多的 Sinatra 代码，因为它不是真正的 Sinatra 东西。同样，正如我所提到的，它甚至没有真正计划变得无缝。这将是一个 sinatra/contrib 的东西或其他一些中间件。所以这是我的方式，在我使用 hijack_io 的一个例子中，作为一个粗略的草图。

> **...要点：** [https ://gist.github.com/digitalextremist/5441315](https://gist.github.com/digitalextremist/5441315)

# java - 将选项传递给 chrome 驱动程序 selenium

> ID：13886430
> 
> 赞同：11
> 
> 时间：2012-12-14T21:23:18.270
> 
> 标签：java, selenium, webdriver, selenium-chromedriver

我正在尝试禁用 chrome 控制台的输出。如果我通过 --start-maximized 选项它工作正常。我可能有错误的命令？

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
capabilities.setCapability("chrome.switches", Arrays.asList("--silent"));
chrome = new ChromeDriver(_chromeservice,capabilities); 
```

我也试过

```
 ChromeOptions options = new ChromeOptions();
 options.addArguments("silent");
 chrome = new ChromeDriver(options); 
```

输出

> 已启动 ChromeDriver 端口=26703 版本=23.0.1240.0 日志=/Brett/workspace/TestNG/chromedriver.log [1214/161331:ERROR:ipc_sync_channel.cc(378)] 取消挂起的发送 [1214/161331:ERROR:ipc_sync_channel.cc( 378)] 取消挂起的发送 [1214/161331:ERROR:ipc_sync_channel.cc(378)] 取消挂起的发送块引用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-09T22:41:38.990

在这个[Chromedriver 票证](https://code.google.com/p/chromedriver/issues/detail?id=116)（关于`silent`选项）的提示下，我查看了 的来源[`ChromeDriverService.java`](https://code.google.com/p/selenium/source/browse/java/client/src/org/openqa/selenium/chrome/ChromeDriverService.java)，并找到了对`"webdriver.chrome.logfile"`.

添加`-Dwebdriver.chrome.logfile="/dev/null"`到我的`java`命令后，日志再次变得可读：无用的 ChromeDriver 日志消失了，而`System.out.println`调用和异常仍然显示在控制台中。

我从`java`以下参数开始（Linux / Mac）：

```
DIR=path/to/dir/containing/selenium/and/stuff
cd "$DIR" && java -cp "$DIR\
:$DIR/output\
:$DIR/bin/selenium-server-standalone-2.33.0.jar" \
-Dwebdriver.chrome.driver="$DIR/bin/chromedriver" \
-Dwebdriver.chrome.args="--disable-logging" \
**-Dwebdriver.chrome.logfile="/dev/null"** \
AllTests 
```

如果您使用的是 Windows：

```
set DIR=path\to\dir\containing\selenium\and\stuff
cd "%DIR%" && java -cp "%DIR%;%DIR%\output;%DIR%\bin\selenium-server-standalone-2.33.0.jar" ^
-Dwebdriver.chrome.driver="%DIR%\bin\chromedriver.exe" ^
-Dwebdriver.chrome.args="--disable-logging" ^
**-Dwebdriver.chrome.logfile=NUL** ^
AllTests 
```

* * *

我的类路径 ( `-cp`) 的组成说明：我的测试位于“$DIR/output”的目录中。Selenium jar 文件放在“$DIR/bin/selenium-server-standalone-2.33.0.jar”中。“AllTests”是我的班级名称，其中包含`public static void main(String[] args)`- 这会启动我的测试。

其他参数不言自明，请根据需要进行调整。为方便起见（在 shell/批处理脚本中使用），我在变量中声明了公共目录`DIR`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-29T21:30:55.433

当我设置 chrome 时

> ```
>  selenium-chrome-driver-2.48.2.jar
>   chromedriver 2.20
>   selenium-java-2.48.2.jar 
> ```
> 
> 以上答案都不适合我，因为我看到一些答案已经有几年了，所以我会发布对我有用的答案。
> 
> ```
>  ChromeOptions chromeOptions = setupChromeOptions();
>     System.setProperty("webdriver.chrome.logfile", "\\path\\chromedriver.log");
>     System.setProperty("webdriver.chrome.driver", "\\path\\chromedriver.exe");
>     System.setProperty("webdriver.chrome.args", "--disable-logging");
>     System.setProperty("webdriver.chrome.silentOutput", "true");
>     driver = new ChromeDriver(chromeOptions); 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T08:05:46.460

请尝试“ `--disable-logging`”。

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
capabilities.setCapability("chrome.switches", Arrays.asList("--disable-logging"));
chrome = new ChromeDriver(_chromeservice,capabilities); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T18:28:55.760

至少从 Selenium 3 开始，您可以使用 ChromeDriverService 及其内部类 Builder 来以静默模式启动驱动程序。

一个oneliner：

```
new ChromeDriver(new ChromeDriverService.Builder().withSilent(true).build()); 
```

构造函数是直截了当的，您创建一个新的服务构建器，将静默设置为 true（这是关键部分），最后将其构建到 ChromeDriver 的构造函数所需的 ChromeDriverService 中。

# html - 需要帮助将 JS 代码结果/返回放在 div 中

> ID：13886432
> 
> 赞同：2
> 
> 时间：2012-12-14T21:23:33.647
> 
> 标签：html, raphael

我在网上找到了这个 jsfiddle，它正是我一直在寻找的……问题是它使用纯 JS 创建了视觉效果。我想把它放在一个 div 中，这样我就可以控制它了......就像定义精确的位置、边距、添加不透明度等......

这是jsfiddle：http: [//jsfiddle.net/7jHPv/52/](http://jsfiddle.net/7jHPv/52/)

现在“我正在”通过 JS 代码本身将视觉效果放在页面上，想知道如何在该容器 div 中“加载”它。

因此，以 jsfiddle 上的示例为例，而不是位于代码给出的位置，而是使其遵循我归因于容器 div 的边距......通过将其放在 div 内。

我看到这个：

```
return {
   path: path
}; 
```

我可以更改那里的退货以将其“添加”到容器 div 中吗？或者其他的东西...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:30:40.087

代替

```
var paper = new Raphael(100, 300, 0, 100, side); 
```

做出定义

```
var paper = new Raphael("container", 100, side); 
```

其中容器是您的 div 的名称。从那里你可以控制 div 的位置、边距/填充和其他任何东西

# youtube-api - file_get_contents('YOUTUBE API') 返回缓存/未更新/旧信息

> ID：13886441
> 
> 赞同：3
> 
> 时间：2012-12-14T21:24:22.383
> 
> 标签：youtube-api

[https://gdata.youtube.com/feeds/api/users/EXAMPLE/uploads?v=2&alt=jsonc](https://gdata.youtube.com/feeds/api/users/EXAMPLE/uploads?v=2&alt=jsonc)

当直接从浏览器访问这个 url 时，它将 100% 的时间返回正确的数据。如果添加了一个视频，它就在那里，如果一个视频已被删除，它就消失了。

通过 file_get_contents('https://gdata.youtube.com/feeds/api/users/EXAMPLE/uploads?v=2&alt=jsonc'); 获取此数据时

数据似乎已缓存或未更新/当前数据...

如果您继续刷新页面，它将显示/隐藏新视频，以及显示/隐藏已删除的视频大约 5-10 分钟，然后它会准确。

当我使用 $.getJSON() 或 $.ajax() 获取数据时，也会发生同样的事情......

数据不应该和浏览器中访问url的时候一样吗？

我只是想获取用户“EXAMPLE”上传的最新视频。

```
public function ajaxUpdateVideoFeed()
{
        header("Content-type: application/json");
        $json = file_get_contents('https://gdata.youtube.com/feeds/api/users/EXAMPLE/uploads?v=2&alt=jsonc');
        $data = json_decode($json, TRUE);
        $videoId = $data['data']['items'][0]['id'];
        echo json_encode($videoId);die();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:56:48.197

尝试在 url 调用的末尾附加一个随机数。每次调用 url 时，`https://gdata.youtube.com/feeds/api/users/EXAMPLE/uploads?v=2&alt=jsonc&r=RAND` 哪里会是一些任意随机生成的数字。`RAND`不确定这是否适合您，但可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:53:55.400

我有一个类似的问题。我正在尝试通过 $.ajax() 调用检索特定视频的当前状态，并且响应数据似乎保持缓存状态。如果我从浏览器尝试 url，数据就会更新。

```
$.ajax({
    url: 'https://gdata.youtube.com/feeds/api/videos/YouTubeID?v=2&alt=json'
    type: "post",
    dataType: 'json',
    cache: false,
    success: function(response, textStatus, jqXHR){ 
        var ytState = response.entry.app$control.yt$state.name;
    },
    error: function(jqXHR, textStatus, errorThrown){
        console.log( "The following error occured: "+ textStatus + errorThrown );
    },
    complete: function(){   
    }
}); 
```

我尝试过 json、jsonp、cached=false、附加时间戳、将我的开发人员密钥附加到 url，但没有成功。

* ***编辑**

通过在我的 ajax 请求中使用 POST 与 GET 似乎消除了我类似的缓存问题。

**编辑编辑**

没关系，我很烂。使用 POST 会产生 400 错误。

# ruby - Savon - SOAP - ruby - 400 错误请求

> ID：13886445
> 
> 赞同：2
> 
> 时间：2012-12-14T21:24:44.673
> 
> 标签：ruby, soap, savon

我正在尝试使用 Savon 通过 Ruby 发出 SOAP 请求，但我收到了来自服务器的 400 Bad Request 响应。

这是我试图提出的请求（根据soapUI）：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:apis="http://www.csisoftwareusa.com/ApiService">    
    <soap:Header/>    
    <soap:Body>
      <apis:AuthenticateConsumer>
         <!--Optional:-->
         <apis:consumerName>?</apis:consumerName>
         <!--Optional:-->
         <apis:consumerPassword>?</apis:consumerPassword>
      </apis:AuthenticateConsumer>    
    </soap:Body> 
</soap:Envelope> 
```

这是我对 Ruby 提出的要求；它返回 400 Bad Request 错误：

```
<SOAP-ENV:Envelope>
  <SOAP-ENV:Body>
    <ins0:AuthenticateConsumer>
      <ins0:consumerName>?</ins0:consumerName>
      <ins0:consumerPassword>?</ins0:consumerPassword>
    </ins0:AuthenticateConsumer>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
Http Headers: SOAPAction: "http://www.csisoftwareusa.com/ApiService/AuthenticateConsumer", Content-Type: text/xml;charset=UTF-8, Content-Length: 504 
```

这是我能够用 Python 提出的请求。此请求成功：

```
<SOAP-ENV:Envelope>
  <SOAP-ENV:Header/>
  <ns0:Body>
    <ns1:AuthenticateConsumer>
      <ns1:consumerName>?</ns1:consumerName>
      <ns1:consumerPassword>?</ns1:consumerPassword>
    </ns1:AuthenticateConsumer>
  </ns0:Body>
</SOAP-ENV:Envelope>
Http headers: {'SOAPAction': u'"http://www.csisoftwareusa.com/ApiService/AuthenticateConsumer"', 'Content-Type': 'text/xml; charset=utf-8'} 
```

我需要将此 API 调用集成到 Rails 应用程序中，因此在 Python 中执行此操作不是有效的解决方案。

我想知道是否有人能看到我缺少的东西。空`<SOAP-ENV:Header />`标签是问题吗？如果是，我如何将其添加到 Savon 请求中？

谢谢，斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:11:35.957

这里的问题在于我的 http 标头：因为 url 中有空格，所以必须对 url 进行编码。但是，在将它传递给 Savon 之前，我必须对其进行编码，然后 Savon 再次对其进行编码 - 这个双重编码的 url 失败。请参阅：[https ://stackoverflow.com/questions/14482251/ruby-savon-soap-request-double-escapes-spaces-in-url](https://stackoverflow.com/questions/14482251/ruby-savon-soap-request-double-escapes-spaces-in-url)

谢谢，斯图尔特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T03:22:59.663

我收到了 HTTP 400，因为我的请求有重复的命名空间。

我的代码：

```
require 'savon'

namespaces = {
  "xmlns:soap": "http://schemas.xmlsoap.org/soap/envelope/",
  "xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
  "xmlns:xsd": "http://www.w3.org/2001/XMLSchema",
}

client = Savon.client(
 ...
 :namespace => namespaces
} 
```

我删除了 :namespace 选项，错误消失了。

**我是怎么发现的？**

使用**build_request**而不是**调用**并打印请求正文：

```
client.build_request(:search, message: {...})
puts request.body 
```

将你从调试中得到的请求粘贴到 SoapUI 中，并一一进行更改，直到请求在 SoapUI 中成功。

# java - Spring STS中如何通过Pom.xml将Spring 3.1.x版本升级到3.2

> ID：13886446
> 
> 赞同：2
> 
> 时间：2012-12-14T21:24:54.883
> 
> 标签：java, spring, spring-mvc, sts-springsourcetoolsuite

我目前刚刚尝试通过我的 pom.xml 文件从 Spring 3.1.x 升级到 Spring 3.2.0，现在我遇到了以下异常。除了更新 STS 中的 pom.xml 文件的版本之外，我还需要做什么？

```
2012-12-14 15:53:43 -0500 - org.springframework.core.env.ConfigurableEnvironment.merge(Lorg/springframework/core/env/ConfigurableEnvironment;)V<P><span class="captionText">For reference, the Error ID is b5f5e10f-612f-4f54-a36d-f65d6d7b9496.</span> - java.lang.NoSuchMethodError: org.springframework.core.env.ConfigurableEnvironment.merge(Lorg/springframework/core/env/ConfigurableEnvironment;)V
    at org.springframework.context.support.AbstractApplicationContext.setParent(AbstractApplicationContext.java:395)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:585)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:117)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1200)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:615)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:647)
    at blackboard.tomcat.valves.LoggingRemoteIpValve.invoke(LoggingRemoteIpValve.java:44)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662) 
```

# ruby-on-rails-3 - 在 Rails 中构建日历导航（控制器和视图链接）

> ID：13886448
> 
> 赞同：3
> 
> 时间：2012-12-14T21:24:58.927
> 
> 标签：ruby-on-rails-3, url, parameters, controller

单击 时试图获得下个月`link_to`。我在视图中完成了以下操作。

**index.html.erb**

```
 <table class="rota">
  <thead>
  <tr>
    <!-- Element will carry the month number for initializing this table correctly. -->
    <th class="month"-<%= @date_range.month %>">Days</th>
    <% @hospitals.each do |hsp| %>
        <th class="hospital-<%= hsp.shortname %>"><%= hsp.name %></th>
    <% end %>
  </tr>
  </thead>
  <tbody>
  <% @date_range.each do |d| %>
      <tr>
        <th><%= d.to_s(:short) %></th>
        <% @hospitals.each do |hsp| %>
            <td class="day-<%= d.to_s(:short) %> hospital-<%= hsp.shortname %>">&nbsp;</td> <!--Class on each td to make it identifiable -->
        <% end %>
      </tr>
  <% end %>
  </tbody>
</table>

<%= form_tag rota_days_path, :method => 'get' do %>
    <p>
      <%= link_to 'Previous Month', rota_days_path(:beginning_of_month => @beginning_previous) %>
      <%= link_to 'Next Month', rota_days_path(:beginning_of_month => @beginning_next) %>
    </p>
<% end %> 
```

**控制器.rb**

```
 class RotaDaysController < ApplicationController
      # GET /rota_days
      # GET /rota_days.json
      # load_and_authorize_resource
      respond_to :json, :html
      def index
        @rota_days = RotaDay.all
        @hospitals = Hospital.all
        @t1 = Date.today.at_beginning_of_month
        @t2 = Date.today.end_of_month
        @dates = (@t1..@t2)  #Concat variable t1 + t2 together
        # @next_month = Date.today + 1.month(params[: ??? ] #Old

        if params[:next_month]
         # @next_month = Date.today >> 1
          @next_month = params[:next_month] + 1.month
          @t1 = @next_month.at_beginning_of_month
          @t2 = @next_month.end_of_month
          @dates = (@t1..@t2)
        end

        @title = "Rota"

        respond_to do |format|
          format.html # index.html.erb
          format.json { render json: @rota_days }
        end
      end 
```

我已经确定这可能不起作用的原因在于我的控制器中的以下内容，`@next_month = params[:next_month] + 1.month`最后两个调用的方法仅在时间/日期对象上定义。但不适用于 fixnum/string 对象。我知道我错过了一些东西

**更新**

我发现实际的问题是 `params[:next_month] 是一个字符串，我正在尝试向它添加一个日期。这意味着我需要将字符串转换为日期/时间对象。

**控制台输出：**

```
Started GET "/rota_days" for 127.0.0.1 at 2012-12-14 22:14:36 +0000
Processing by RotaDaysController#index as HTML
  User Load (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  RotaDay Load (0.0ms)  SELECT `rota_days`.* FROM `rota_days` 
  Hospital Load (1.0ms)  SELECT `hospitals`.* FROM `hospitals` 
  Rendered rota_days/index.html.erb within layouts/application (23.0ms)
  Role Load (0.0ms)  SELECT `roles`.* FROM `roles` INNER JOIN `roles_users` ON `roles`.`id` = `roles_users`.`role_id` WHERE `roles_users`.`user_id` = 1 AND `roles`.`name` = 'Administrator' LIMIT 1
Completed 200 OK in 42ms (Views: 39.0ms | ActiveRecord: 1.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:47:31.340

我已经采用了您的代码并对其进行了一些改进以处理月份之间的导航

```
class RotaDaysController < ApplicationController
  respond_to :json, :html

  def index
    @title = "Rota"
    @rota_days = RotaDay.all
    @hospitals = Hospital.all

    # Find the beginning of the month we are currently displaying
    #   it can be either passed in through the params[:beginning_of_month]
    #   which is a string we parse into a date by calling '2013-01-01'.to_date
    #   By wrapping the .to_date call in .try(:to_date), the call will not throw
    #   a NoMethodError if no params[:beginning_of_month] is passed in and thus
    #   we would call nil.to_date => throws NoMethodError
    #
    #   If no parameter is passed in we want to display the current month
    @beginning_current = params[:beginning_of_month].try(:to_date) || Date.current.beginning_of_month

    # Let's build the date range of the month to display
    #   The nice thing about date / time ranges is that you can iterate over them
    #   in the view to create the calendar interface we are looking for
    @date_range = (@beginning_current.beginning_of_month..@beginning_current.end_of_month) 

    # Build references for previous and next month for navigation
    #   We can use the beginning of the previous and next month as a reference
    #   for which month to display.
    @beginning_next     = (@beginning_current + 1.month).beginning_of_month.to_s
    @beginning_previous = (@beginning_current - 1.month).beginning_of_month.to_s      

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @rota_days }
    end
  end
end 
```

在视图中，您可以在 link_to 帮助器中使用这些字符串。

```
<%= form_tag rota_days_path, :method => 'get' do %>
  <p>
    <%= link_to 'Previous Month', rota_days_path(:beginning_of_month => @beginning_previous) %>
    <%= link_to 'Next Month', rota_days_path(:beginning_of_month => @beginning_next) %>
  </p>
<% end %> 
```

您还可以迭代日期范围以在视图中显示每个日期

```
<% @date_range.each do |day| %>
  ...
<% end %> 
```

我希望这有帮助。随意问任何你喜欢的问题，但我可能要等到明天才能回复你。

# xml - WSO2 ESB 将结果数组存储在属性中

> ID：13886451
> 
> 赞同：1
> 
> 时间：2012-12-14T21:25:11.417
> 
> 标签：xml, xpath, wso2, wso2esb, esb

基本上，我从数据服务调用中获得了一组结果，我需要将此数组传递给 java。我试图以某种方式将结果数组存储在属性调解器中，然后将其传递给 java。

以下是数据服务结果的示例：

```
<testResponse>
   <result>
      <PARAM1>0</PARAM1>
      <PARAM2>20</PARAM2>
      <PARAM3>40</PARAM3>
   </result>
</testResponse> 
```

这是我正在调用的 java 函数的示例：

```
public static String testFunction(int[] array); 
```

这是此 java 函数的有效负载：

```
<payloadFactory>
        <format>
            <p:testFunction xmlns:p="http://test.com">
                <xs:array xmlns:xs="http://test.com">$1</xs:array>
           </p:testFunction>
        </format>
        <args>
            <arg xmlns:ns="http://org.apache.synapse/xsd" expression="$ctx:PROPERTYARRAY"/>
        </args>
</payloadFactory> 
```

我对如何设置“PROPERTYARRAY”感到困惑。

现在我正在做类似的事情：

```
<property xmlns:ns="http://org.apache.synapse/xsd" name="PROPERTYARRAY" expression="//testResponse/result/" scope="default" type="STRING"/> 
```

这个日志是“02040”。

如何以数组格式获取它并发送到我的 java 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:34:40.723

试试这样；

```
 <property name="propertyarray" expression="$body"/> 
```

# java - 抽象类中的具体方法可以返回子类中定义的变量吗？

> ID：13886453
> 
> 赞同：0
> 
> 时间：2012-12-14T21:25:17.843
> 
> 标签：java, polymorphism, abstract-class

就在我开始熟悉接口时，我遇到了抽象类的绊脚石。在我的理解中，它们可以用来为子类提供一些功能，但强制子类指定未定义的函数（如果有的话）。

然而，我遇到的所有示例都只处理可能是静态的功能 - 没有引用实例变量。

我试图隐藏`getName()`抽象类中的一些常见函数，但能够在子类中定义所述名称。

```
public interface Application {
    public String getName();
}

/**
 * Specify some default behaviour to keep leaf classes free of common code
 */
public abstract class DefaultApplication implements Application {
    public static final String NAME = "DefApp";

    @Override
    public String getName() {
        return NAME;
    }
}

public class MyApp extends DefaultApplication {
    public static final String NAME = "My App";
}

// Main class
Application myApp = new MyApp();
System.out.println(myApp.getName()); // Prints "DefApp" 
```

我认为这`protected String name`可能有效，但这也会返回抽象类中的实例变量。`getName()`是在每个子类中重新定义的唯一解决方案吗？我不会这么介意，但这不是我试图将方法虹吸到抽象类中的唯一情况。

谢谢！

编辑：
如果相关（建议我可以考虑的其他方法），Application 是一个插件 api，而 MyApp 是一个提供的示例应用程序。DefaultApplication 是基础项目的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:36:35.597

你不能覆盖任何静态的东西。静态方法不属于特定对象，而是属于类本身；当您编写时`return NAME`，编译器会将其读取为`return DefaultApplication.NAME`.

在这种情况下，您可以`getName()`在每个子类中覆盖您已经提出的，或者您可以使该字段非静态，并执行以下操作：

```
abstract class DefaultApplication implements Application {
  private final String name;

  protected DefaultApplication(String name) {
    this.name = name;
  }

  protected DefaultApplication() {
    this("DefApp");
  }

  public String getName() {
    return name;
  }
}

class MyApp extends DefaultApplication {

  public MyApp() {
    super("My App");
  }

} 
```

这将为每个实例添加一个额外的字段，`DefaultApplication`但只要您没有数百万个实例，这并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:00:40.143

注释的想法让我很感兴趣，所以我想我会把它扔在这里。这是打印“我的应用程序”的一种非常复杂且不完全推荐的方式：

```
import java.lang.annotation.Inherited;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

interface Application {
    public String getName();
}

@Inherited
@Retention(RetentionPolicy.RUNTIME)
@interface ApplicationName {
  String value();
}

@ApplicationName("DefApp")
abstract class DefaultApplication implements Application {
    @Override
    public String getName() {
        return getClass().getAnnotation(ApplicationName.class).value();
    }
}

@ApplicationName("My App")
class MyApp extends DefaultApplication {
}

public class Main {
  public static void main(String[] args) {
    Application myApp = new MyApp();
    System.out.println(myApp.getName());
  }
} 
```

# java - 数组/数据集构造函数问题

> ID：13886454
> 
> 赞同：1
> 
> 时间：2012-12-14T21:25:19.000
> 
> 标签：java, arrays, parameters, constructor

我正在创建一个程序，它获取用户的信息并输出最小值、最大值、平均值、总和，并计算其中有多少值。我真的很难弄清楚如何创建 100 个项目的默认构造函数以及用户应该定义的数组大小。

*   创建一个新的数据集对象。创建对象的客户端指定可以添加到集合中的最大项目数。（用一个 int 参数编写一个构造函数。）

*   还要编写一个默认构造函数，它创建一个能够处理 100 个项目的 DataSet。

*   将整数数据项添加到 DataSet。如果已将最大数量的项目添加到集合中，则简单地忽略该项目。

这是我的代码

```
 import javax.swing.*;
    import java.util.*;
    public class DataSet {

        private int count; // Number of numbers that have been entered.
        private double sum; // The sum of all the items that have been entered.
        private double min;
        private double max;

        //Adds numbers to dataset.    
            public void addDatum(double num) {
            count++;
            sum += num;
            if (count == 1){
            min = num;
            max = num;
        } else if (num < min){
            min = num;
        } else if (num > max){
            max = num;
        }
    }

    public boolean isEmpty() 
    {
        if(count == 0)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    //Return number of items entered into the dataset.     
    public int getCount() {
        return count;
    }

    //Return the sum of all the numbers that have been entered.   
    public double getSum() {
        return sum;
    }

    //Return the average of all the numbers that have been entered.       
    public double getAvg() {
        return sum / count;
    }

    //return Maximum value of data entered.
    public double getMax(){
        return max;
    }

    //return Minimum value of data entered.
    public double getMin(){
        return min;
    }

    public static void main (String[] args){

        Scanner scanner = new Scanner(System.in);
        DataSet calc = new DataSet();
        double nextnumber = 0;

        while (true){
            System.out.print("Enter the next number(0 to exit): ");
            nextnumber = scanner.nextDouble();
            if (nextnumber == 0)
                break;
            calc.addDatum(nextnumber);
        }

        System.out.println("Min = "+calc.getMin());
        System.out.println("Max = "+calc.getMax());
        System.out.println("Mean = "+calc.getAvg());       
        System.out.println("Count = "+calc.getCount());
        System.out.println("Sum = "+calc.getSum());
    }

} //end class DataSet 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:01:26.407

您上面的代码不包含任何构造函数，因此只有默认的 DataSet() 构造函数可用。在您的 DataSet 类中，您需要定义这两个构造函数以满足您的要求。此外，您将需要创建一个集合类型（即整数数组）来存储添加到数据集的数字（这似乎是您的要求的一部分）。使用下面的代码，当您在 main 方法中创建 DataSet 类的实例时，您可以通过说

```
DataSet myDataSet = new DataSet(); 
```

或者您可以使用用户指定数量的元素创建它，例如

```
DataSet myDataSet = new DataSet(30); //for thirty elements in the array 
```

 `````
public class DataSet {

 int[] myArray;
 public DataSet() //Zero parameters constructor
 {
   //initialize your array to 100 elements here
   myArray = new int[100];  //the array can hold 100 elements
 }

 public DataSet(int max) //One parameter constructor
 {
  //initialize your array to 'max' elements here
  myArray = new int[max]; //the array can hold max number of elements
 }

 public void AddNum(int num)
 {
   //logic to add number to the array here :P

 }
} 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:40:31.597

声明数组的语法是`type[] name;`（有变体，但这是最常见的）

所以一个 int 数组被声明为：

```
int[] someIntegers; 
```

可以通过多种方式创建新数组。正常的方法是创建一个空数组，其中所有元素都初始化为其默认值（原始数据类型为零或 false，对象数组为 null）。语法是：

```
someIntegers = new int[4]; // ie. [0, 0, 0, 0] 
// or
int n = ...; // intitalise n some how
someIntegers = new int[n]; 
// this way we can get different length arrays at runtime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:43:16.507

您必须添加一个变量来保存最大数量的数字。

```
int max = 0; 
```

然后你需要两个构造函数：

```
Dataset() {
    max = 100;
}

Dataset(int max) {
    this.max = max;
} 
```

然后当你得到输入时，你必须在做任何事情之前检查你是否达到了数量限制。

```
System.out.print("Enter the next number(0 to exit): ");
nextnumber = scanner.nextDouble();
if (count < max) {
    if (nextnumber == 0) {
        break;
    }
    calc.addDatum(nextnumber);
} 
`````

# c++ - 测试正方形是否与带有directx的c ++中的多边形重叠（可选）

> ID：13886456
> 
> 赞同：0
> 
> 时间：2012-12-14T21:25:27.907
> 
> 标签：c++, directx, raytracing, hittest

我将如何检查正方形区域内是否存在三角形多边形？（IE 描绘了一个覆盖一组二维多边形的正方形网格。）

或者更好的是，我如何确定这些正方形之一被给定多边形（如果有的话）占据的百分比。

我以前使用过directx，但似乎无法在他们的文档中找到正确的功能组合。- 虽然感觉光线追踪的东西可能是相关的。

我使用 c++，如果有帮助可以使用 directx。感谢您的任何建议或想法。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:35:41.833

您可能会考虑使用[裁剪器](http://www.angusj.com/delphi/clipper.php)库来进行通用 2D 多边形裁剪、面积计算、相交测试等。它相当紧凑且易于处理，并且有很好的使用示例。

它是 Vatti 裁剪算法的一种实现，可以处理许多奇怪的边缘情况（这对你来说可能是多余的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:34:02.493

有几种方法可以做到这一点，它本质上是一个剪裁问题。

一种方法是使用 Cohen-Sutherland 算法：[http ://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland](http://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland)

您将运行该算法 3 次（每个三角形边缘一次）。

然后，您可以通过计算 area(clipped_triangle) / area(square_region) 找到所占面积的百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T08:56:12.937

您可能会考虑使用裁剪器库来进行通用 2D 多边形裁剪、面积计算、相交测试等。它相当紧凑且易于处理，并且有很好的使用示例。

它是 Vatti 裁剪算法的一种实现，可以处理许多奇怪的边缘情况（这对你来说可能是多余的）

[Can ho 青瓷城](http://stda.vn/du-an/celadon-city-tan-phu/1396)- [vinhomes 中央公园](http://vinhomescentralpark.info)

# java - 如何诊断Android ConcurrentModificationException

> ID：13886457
> 
> 赞同：0
> 
> 时间：2012-12-14T21:25:38.923
> 
> 标签：java, android, concurrency, runtime-error

我有一个正在通过 Eclipse 调试的 Android Google Maps 应用程序。我收到此错误：

```
 12-14 16:19:50.106: E/AndroidRuntime(2487): FATAL EXCEPTION: main
12-14 16:19:50.106: E/AndroidRuntime(2487): java.util.ConcurrentModificationException
12-14 16:19:50.106: E/AndroidRuntime(2487):     at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:573)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:41)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at com.google.android.maps.MapView.onDraw(MapView.java:494)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.View.draw(View.java:6740)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.View.draw(View.java:6743)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.View.draw(View.java:6743)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewRoot.draw(ViewRoot.java:1407)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.os.Looper.loop(Looper.java:123)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at java.lang.reflect.Method.invokeNative(Native Method)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at java.lang.reflect.Method.invoke(Method.java:521)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
12-14 16:19:50.106: E/AndroidRuntime(2487):     at dalvik.system.NativeStart.main(Native Method) 
```

我从不明确使用迭代器（我的代码没有，尽管显然某些调用包括一个），并且我确保任何类型的列表只能通过从返回的内容访问`Collections.synchronizedList`，这应该可以解决这个问题，以我有限的理解. 因为我不知道我的代码库中的什么会导致这种情况，所以我不能真正发布代码片段。有谁知道其他“正常”原因？或者如何从 logcat 打印输出中获取任何有意义的位置（据我所知，唯一的文件引用是库文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:35:03.080

> 我假设它是自动生成的或库代码？

它是库代码。

> 我可能会做什么会导致我没有编写的代码出现问题？

您正在修改在主应用程序线程中迭代的后台线程中的集合，例如通过在后台线程中添加或删除覆盖。

不幸的是，Android 版 Google Maps API 的经典版本和 V2 版本都不是开源的，因此很难从堆栈跟踪中准确判断发生了什么。我的猜测是您正在后台线程中添加或删除覆盖。

# c# - 删除包含文件夹而不是文件夹它自己？

> ID：13886459
> 
> 赞同：1
> 
> 时间：2012-12-14T21:26:17.827
> 
> 标签：c#, .net

> **可能重复：**
> [DirectoryInfo.Delete vs Directory.Delete](https://stackoverflow.com/questions/13884781/directoryinfo-delete-vs-directory-delete)

我编写此代码以清空一些我经常删除的文件，例如 Windows 中的 temp 和 MSN cahes 文件。

代码1

我可以添加新路径以轻松应用 DeleteContains 方法我只需将路径添加到列表中

代码2

不允许我添加我想要的路径，我必须为每个路径创建新的字符串数组和一个新的循环

无论如何要使用code1删除文件夹的包含而不是文件夹及其包含？

在code1中的foreach中的任何工作都可以作为code2工作？

因为某些文件夹可以被删除或删除它们会导致某些应用程序出现问题，并且这些应用程序将无法再次运行

"C:\Users\user\AppData\Local\Temp"

而其他文件夹可以删除它没有问题，如 MSN 兑现

"C:\Users\user\AppData\Local\Microsoft\Windows Live\Contacts"

代码1

```
 private void Clear_Click(object sender, EventArgs e)
    {
        List<DirectoryInfo> FolderToClear = new List<DirectoryInfo>();

        // here is a list of files  I want to delete  

        FolderToClear.Add(new DirectoryInfo("path1"));
        FolderToClear.Add(new DirectoryInfo("path2"));
        FolderToClear.Add(new DirectoryInfo("path3"));
        FolderToClear.Add(new DirectoryInfo("path4"));

        foreach (DirectoryInfo directory in FolderToClear)
        {
            directory.Delete(true);
        }
    } 
```

代码2

```
 private void DeleteContents(string Path)
    {
        string[] DirectoryList = Directory.GetDirectories(Path1);
        string[] FileList = Directory.GetFiles(Path1);

        foreach (string xin FileList)
        {
            File.Delete(x);
        }
        foreach ( string x in DirectoryList)
        {
            Directory.Delete(x, true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:40:49.453

尝试：

```
DirectoryInfo directory = new DirectoryInfo("Path");
foreach (FileInfo fi in directory.GetFiles())
{
    fi.Delete();
} 
```

更好的是，这是一个递归，它将删除您提供的 DirectoryInfo 下的所有文件和子目录。

注意：这里没有任何东西可以处理文件锁，所以如果你打开文件，它会爆炸。这应该让你开始。

```
 public void KeepTheseFolders(DirectoryInfo dirInfo)
    {
        DeleteFolder(new DirectoryInfo("Path1"), false);
        DeleteFolder(new DirectoryInfo("Path2"), false);
        DeleteFolder(new DirectoryInfo("Path3"), false);
        DeleteFolder(new DirectoryInfo("Path4"), false);
    }

    public void DeleteFolder(DirectoryInfo dirInfo, bool deleteDirectory)
    {
        //Check for sub Directories
        foreach (DirectoryInfo di in dirInfo.GetDirectories())
        {
            //Call itself to delete the sub directory
            DeleteFolder(di, true);
        }

        //Delete Files in Directory
        foreach (FileInfo fi in dirInfo.GetFiles())
        {
            fi.Delete();
        }

        //Finally Delete Empty Directory if optioned
        if (deleteDirectory)
        {
            dirInfo.Delete();
        }
    } 
```

添加它，以便您可以保留原始文件夹

# javascript - var prime = num != 1; 是什么意思？意思是？

> ID：13886460
> 
> 赞同：2
> 
> 时间：2012-12-14T21:26:20.493
> 
> 标签：javascript

我知道这类似于[另一个 SO 问题](https://stackoverflow.com/questions/1100159/javascript-variables-what-does-var-x-a-do)，但该变量`prime`应该是除 之外的任何数字`1`，而且在我看来，它会被赋予布尔值`num != 1`。谁能告诉我这行代码实际上在做什么？

**这是使用它的代码**

```
function isPrime( num ) { 
  var prime = num != 1; // Everything but 1 can be prime 
  for ( var i = 2; i < num; i++ ) { 
    if ( num % i == 0 ) { 
      prime = false; 
      break; 
    } 
  } 
  return prime; 
} 
```

**编辑：** 我假设这条线做了这样的事情：

```
if( num != 1) {
    prime = num;
} 
```

但我仍然想知道这行代码*为什么*或*如何做到这一点。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:28:36.160

换句话说：

如果 num == 1，将*prime*设置为 false 并跳过循环。

否则，进入循环并使用标准逻辑来确定*prime*的值。

这样做是因为标准逻辑（循环内部）不适用于数字 1。

因此，正如 pst 所说，您检查循环外的边缘情况。

这有助于保持循环内部的逻辑干净。

* * *

为了使其更具可读性（并且对所有值都正确），我会像这样重写它：

```
function isPrime( num ) { 

    if (num <= 1) {
        return false;
    }

    for ( var i = 2; i < num; i++ ) { 
        if ( num % i == 0 ) { 
            return false; 
        } 
    } 

    return true; 
} 
```

一旦 i 大于，您也可以退出循环`num / 2`以提高效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:32:01.970

正如您正确思考的那样，该语句`var prime = num != 1;`将布尔表达式的结果分配给`(num != 1)`变量`prime`。这种特殊情况包含在每种质数检查代码中，因为`1`它本身不是质数。

如果您只检查不超过输入值平方根的除数，您的算法可能会更快。[您可以在此处](http://en.wikipedia.org/wiki/Trial_division)阅读相关内容，并且可能会注意到检查 if`num > i*i`比`sqrt(num) > i`.

此外，如果您输入负值或零值，您拥有的算法仍可能返回错误值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T21:27:40.480

[1 不是质数](http://en.wikipedia.org/wiki/Prime_number#Primality_of_one)

这是一个边缘情况检查，因为`for(i = 2;..)`（下面）“跳过” 1: 因为循环从不运行，`prime`只设置一次`false`（这是对`i != 1`, when的评估`i = 1`）。

但是，我发现它令人困惑并且会使用：

```
if (i <= 1) {
  return false;
} else {
  // other stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T21:34:36.673

那行代码的重点是合二为一：

*   首先，他们需要创建一个布尔变量
*   其次，他们需要检查数字是否为 1，那么它不是素数

他们只是同时做这两件事。

# foxpro - FoxPro 9.0 使用聚合连接表

> ID：13886463
> 
> 赞同：1
> 
> 时间：2012-12-14T21:26:34.020
> 
> 标签：foxpro

我想汇总我的决赛桌，但不知道如何解决加入部分。我有一个 Do While 循环，它通过我的表contracts.dbf 将每一行传递到一个过程中。此过程 test33 使用此信息并从其他表中挑选出所需的数据。我想要的聚合是每个循环的所有结果，所以如果contracts.dbf 中有101 行，那么joining.dbf 将是101 列宽。

```
DELETE FILES *.tmp RECYCLE
SELECT distinct depot_nr FROM bs_case;
INTO table contracts.tmp

SELECT RECNO() as rownum,;
    depot_nr as depot_nr;
FROM contracts.tmp
NbContracts =RECCOUNT()
COPY TO test3.dbf
CLOSE TABLES

counter = 1

DO WHILE counter < NbContracts
    SELECT depot_nr as depot_nr;
    WHERE rownum = counter FROM test3
    test33(depot_nr, counter)
    counter = counter + 1
ENDDO
CLOSE TABLES 

PROCEDURE test33(depot_nr_in, NbofTimes)
use bs_case alias bs
SELECT  Depot_nr                as depot_nr,;
        Psres3pcgb              as psres3pcgb;
    WHERE Depot_nr = depot_nr_in FROM bs INTO TABLE toJoin.tmp

DO CASE 
    CASE NbofTimes = 1
        SELECT * FROM toJoin.tmp 
        COPY TO joining.dbf
    CASE NbofTimes = NbContracts
        ?counter
        SELECT * FROM bsP.tmp as one LEFT JOIN joining.dbf as aggregated; && ERROR HERE
        ON (one.depot_nr = aggregated.depot_nr) into table joining.dbf
        CLOSE TABLES
        ENDPROC
    Otherwise 
        SELECT * FROM toJoin.tmp as one LEFT JOIN joining.dbf as aggregated;   && ERROR HERE
        ON (one.depot_nr = aggregated.depot_nr) into table joining.dbf
        CLOSE TABLES
ENDCASE
CLOSE TABLES
CLOSE DATABASES
ENDPROC 
```

数据看起来像

```
bs_case
===================================
depot_nr      Psres3pcgb
22              123
31              222
22              345
32              444
23              222
22              222

contracts.dbf
===================================
22
31
32
23 
```

我的过程将contracts.dbf 中的每个值作为参数。这是通过 do while 循环完成的。

我希望最终结果是每次运行 test33 过程的表格。例如

```
Loop 1
===============
   22
the result

Loop2
==============
    22          31
test33(22)   test33(31)

Loop3
==============
    22          31             32
test33(22)   test33(31)     test33(32)

Loop4
==============
    22          31             32              23
test33(22)   test33(31)     test33(32)     test33(23) 
```

test33(##) 的每个结果都是一列值。我希望这可以更好地了解我要做的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:38:19.800

除非您需要为将来的运行存储结果，否则您永远不需要 SELECT INTO TABLE 或 COPY TO。

在我看来，您可能根本不需要子例程或循环。您能否展示一些示例数据和所需的结果。使用 CREATE CURSOR 和 INSERT INTO 显示示例数据，因此任何想要帮助的人都可以复制这些行并创建测试数据。

# qt4 - Graphicsitem/像素图未在图形场景中显示

> ID：13886465
> 
> 赞同：2
> 
> 时间：2012-12-14T21:26:42.913
> 
> 标签：qt4

```
ui->setupUi(this);
scene = new QGraphicsScene(this);
ui->graphicsView->setScene(scene);
//scene->setSceneRect(-200,-200,300,300);
//ui->graphicsView->setRenderHint(QPainter::Antialiasing);

QPixmap pic (":/Single_linked_list.png");
//pic.load(":/Single_linked_list.png");
QGraphicsPixmapItem *item = new QGraphicsPixmapItem (/*pic*/);
item->setPixmap(pic);
scene->addPixmap(pic);

scene->addItem(item);
scene->
// scene->show();

//painter.drawPixmap(/*scene->sceneRect().bottomLeft().x()+0.1*/0.10,/* scene->sceneRect().bottomLeft().y()-0.1*/0.10, pic); 
```

以上是我将图片添加到图形项的代码。无论我做什么，它都显示图形场景，但不显示 pixmap/pixmapitem。出了什么问题，我该如何解决？

我还打算进一步为该图像设置动画。哪个容器最适合这个，图形场景中的 picmap 或 pixmap 项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:55:57.423

检查 QPixmap 对象是否已使用给定资源正确初始化。你可以通过调用 QPixmap::isNull() 来做到这一点。如果它为空，则它没有正确初始化，问题出在资源上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:52:27.893

您的场景设置似乎很好。您可以通过在场景的任何所需位置添加 QGraphicsRectItem 来检查您的场景是否正常工作。

将像素图添加到现有场景 -

```
QGraphicsPixmapItem *newItem=new QGraphicsPixmapItem(QPixmap(":/Single_linked_list.png"));
scene->addItem(newItem); 
```

这会将像素图项添加到场景中并显示它。您不需要显式调用它来显示图像。

如果您想应用普通动画，如平移、旋转或缩放，您可以简单地使用 setPos、setScale 或 setTransform 函数。为了更好的控制，可以使用 Qt 提供的 Animation Framework。它适用于任何 QGraphicsItem，即也适用于 QGraphicsPixmapItem。查看文档以获取更多参考。

观看此视频以了解 Qt GraphicsView 基础知识 - [http://www.youtube.com/watch?v=b35JF4LqtBs](http://www.youtube.com/watch?v=b35JF4LqtBs)并查看此链接以了解简单的 QGraphicsItem 动画 - [http://www.youtube.com/watch?v=fmSs2mNGh9I](http://www.youtube.com/watch?v=fmSs2mNGh9I)

# javascript - 如何在 iframe 中添加类和/或动画元素

> ID：13886469
> 
> 赞同：0
> 
> 时间：2012-12-14T21:26:52.277
> 
> 标签：javascript, jquery

我创建了一个小部件，其他人可以通过 iframe 将其加载到他们的 html 中。将我的自定义 js 文件（作为 iframe src）加载到 iframe 中一切正常。我还从 ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js 加载 jquery。然后，我的自定义 js 使用 $.get() 从与 js 文件位于同一域的服务器以不同的时间间隔加载和解析一些 json。我使用 json 创建在 iframe 中添加的 html 元素。同样，所有这些都按预期工作。

我遇到的问题是我想为我在 iframe 中添加的 html 设置动画。我正在使用以下函数来处理动画：

```
function embeddedUnMarkAsNew($el) {
    $el.animate({color:"black"}, 500)
}

function embeddedMarkAsNew(timeToMark, $el){
    alert("marking for this time: "+timeToMark)
    //start animation
    $el.animate({color:"red"}, 500);
    //end animation when duration runs
    setTimeout(function() { 
        embeddedUnMarkAsNew($el);
    }, timeToMark)
    return false
} 
```

EmbeddedMarkAsNew() 内部的警报使用正确的 timeToMark 触发，但元素不动画。我已将动画更改为 addClass() 只是为了尝试一下，尽管该类确实在检查器中显示为被添加，但元素本身并不反映这个添加的类。

我已经在 iframe 之外的元素上使用了这种技术。在导致我的问题的 iframe 中执行此操作是什么原因？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:21:33.233

jquery 默认情况下不能使用彩色动画，要使用彩色动画，您需要一个库，例如[bitstorm 颜色动画 jquery 插件](http://www.bitstorm.org/jquery/color-animation/)

要从 iframe 获取元素，您需要 .contants() jquery 方法[，这里](http://jsfiddle.net/oceog/XqtL4/)是演示：

```
function embeddedMarkAsNew(timeToMark, $el) {
    // alert("marking for this time: "+timeToMark)
    //start animation
    $el.animate({
        color: '#FF0000'
        }, 500)
        .delay(timeToMark)
        .animate({color: "#000000"},500);
    return false
}

function demo_fill_iframe() {
        var iframe=$('#iframe').contents().find('body');
        iframe.append($('<div id="test">').text('TEXT'));
}
//create div in iframe
demo_fill_iframe();

//run function!
embeddedMarkAsNew(10000,$('#iframe').contents().find('#test'));
embeddedMarkAsNew(1000,$('#test2'));
​ 
```

如您所见，iframe 内的动画没有任何变化。另请注意，我使用`delay()`而不是调用具有以下优点的子函数 -`delay`将等待第一个动画完成然后运行第二个动画，如果您只需要更改颜色，`delay`是最佳选择。另外我希望你在函数中交换参数的顺序，这样你就可以跳过第二个选项并将其设置为默认值：

```
function embeddedMarkAsNew($el,timeToMark,AnimationTime) {
    //default time is 1000
    timeToMark=timeToMark!==undefined?timeToMark:1000
    AnimationTime=AnimationTime!==undefined?AnimationTime:500;
    //start animation
    $el.animate({
        color: '#FF0000'
        }, AnimationTime)
        .delay(timeToMark)
        .animate({color: "#000000"},AnimationTime);
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:54:36.463

您遇到的问题与基本浏览器安全性有关。

跨域脚本不能以这种方式执行，因为它会给人们带来无数的安全问题。

但是，您可以尝试使用 window.postMessage。

看看这里的文档：[https ://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

基本上，您将需要该页面（iframe）中的事件侦听器，该事件侦听器需要接收包含与其需要执行的操作相关的数据的消息。需要告诉它做某事的包含页面调用 window.postMessage。

```
otherWindow.postMessage(message, targetOrigin); 
```

otherWindow 可以通过执行以下 JavaScript 来侦听已分发的消息：

```
window.addEventListener("message", receiveMessage, false);

function receiveMessage(event)
{
  if (event.origin !== "http://example.org:8080")
    return;

  // ...
} 
```

不过要小心，您需要检查 event.origin 以确保不仅任何 ol' 来源都能够以这种方式发布消息。

高温高压

# javascript - 使用 jQuery 回退为 Zepto 编写自定义插件

> ID：13886475
> 
> 赞同：1
> 
> 时间：2012-12-14T21:27:12.400
> 
> 标签：javascript, jquery, zepto

我正在研究带有 jQ​​uery 后备的[Zepto](http://zeptojs.com/)（如 Zepto 的网站上所见），看看它是否适用于即将到来的项目。

我希望使用 $.extend 构建一个自定义插件，但在 Zepto 的示例中注意到它们`$`像 jQuery 一样将 Zepto 作为变量传递。有没有办法传入加载的任何库？

**Zepto插件：**

```
;(function($){
  $.extend($.fn, {
    foo: function(){ 
    }
  })
})(Zepto) 
```

**jQuery插件：**

```
(function( $ ) {
  $.fn.myPlugin = function() {
  };
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T16:37:34.687

编辑：更新的答案。

我最初的想法是简单地`$`作为参数传递，这可行，但如果插件要分布在各个项目中，则不提供很好的可移植性。

相反，您应该使用`OR`运算符来检测是否已加载，如果没有则`Zepto`回退。`jQuery`

```
;(function($){
    $.extend($.fn, {
        foo: function(){ 
        }
    })
})(window.Zepto || window.jQuery) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:34:26.250

用于`jQuery.noConflict()`避免与另一个使用`$`别名的库发生冲突。这种方式`$`永远是 Zepto，你可以为 jQuery 使用任何其他你想要的别名，或者只使用`jQuery`对象本身

如果您将其作为;的参数传递，您仍然可以`$`在包裹的 j​​Query 代码中使用它。`document.ready``document.ready`

API 参考：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# java - 一个框架中有多个 JPanel / 有一个背景图像和另一个在顶部带有组件的层

> ID：13886476
> 
> 赞同：3
> 
> 时间：2012-12-14T21:27:12.213
> 
> 标签：java, swing, jframe, jpanel, jlabel

我有一个带有 JPanel 的 JFrame，其中有一个带有 ImageIcon() 的 JLabel。一切正常，问题是我现在想在 JFrame 中添加另一个 JPanel，其中包含按钮等所有其他内容。但它仍然在顶部显示背景图像，而第二个 JPanel 则没有。

有人能帮我吗？这是我的代码的摘录：

```
JFrame window = new JFrame("Http Download");

/*
 * Background Section
 */
JPanel panel1 = new JPanel();

JLabel lbl1 = new JLabel();

/*
 * Component Section
 */
JPanel panel2 = new JPanel();

JLabel lbl2 = new JLabel();

/*
 * Dimension Section
 */
Dimension windowSize = new Dimension(800, 600);
Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();

public HTTPDownloadGUI() {

    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    panel1.setLayout(null);
    panel1.setSize(windowSize);
    panel1.setOpaque(false);

    panel2.setLayout(null);
    panel2.setSize(windowSize);
    panel2.setOpaque(false);

    lbl1.setSize(windowSize);
    lbl1.setLocation(0, 0);
    lbl1.setIcon(new ImageIcon(getClass().getResource("bg1.png")));
    panel1.add(lbl1);

    lbl2.setBounds(0, 0, 100, 100);
    //lbl2.setIcon(new ImageIcon(getClass().getResource("bg2.png")));
    lbl2.setBackground(Color.GREEN);
    panel2.add(lbl2);

    panel1.add(panel2);

    window.add(panel1);

    int X = (screen.width / 2) - (windowSize.width / 2);
    int Y = (screen.height / 2) - (windowSize.height / 2);

    window.setBounds(X,Y , windowSize.width, windowSize.height);
    window.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:39:59.017

1.  避免空布局，这里有更多的麻烦，那么它们是值得的
2.  将框架布局设置为`BorderLayout`
3.  将标签添加到框架
4.  将标签布局设置为`BorderLayout`
5.  创建您的面板并将其 opaque 属性设置为 false
6.  正常添加其他组件
7.  将面板添加到标签

查看

*   [将图像作为背景放置在扩展的 JFrame 上是否有任何问题？](https://stackoverflow.com/questions/12592696/are-there-any-issues-with-placing-image-as-background-on-an-extended-jframe/12592799#12592799)
*   [将 JLabel 放在 JLabel 的顶部，其中包含图像](https://stackoverflow.com/questions/12253979/place-jlabel-on-top-of-jlabel-with-image-in/12254063#12254063)

举些例子

**更新示例**

*   `panel1`是主要背景...
*   Set`panel1`的布局为`BorderLayout`
*   添加`lbl1`到`panel1`
*   Set`lbl1`的布局为`BorderLayout`
*   将`panel2`的布局设置为您想要使用的任何内容...
*   将`panel2`的不透明度属性设置为`false`( `panel2.setOpacity(false)`)
*   添加`lbl2`到`panel2`
*   添加`panel2`到`lbl1`
*   添加`panel1`到你想要的每一个。

![在此处输入图像描述](../Images/bad1c8c4b02c5e950f004b3aeb8cb48d.png)

```
public class TestLayout17 {

    public static void main(String[] args) {
        new TestLayout17();
    }

    public TestLayout17() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        /*
         * Background Section
         */
        JPanel panel1 = new JPanel();
        JLabel lbl1 = new JLabel();
        /*
         * Component Section
         */
        JPanel panel2 = new JPanel();
        JLabel lbl2 = new JLabel();
        /*
         * Dimension Section
         */
        Dimension windowSize = new Dimension(800, 600);
        Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();

        public TestPane() {

            setLayout(new BorderLayout());

            panel1.setLayout(new BorderLayout());

            lbl1.setLayout(new BorderLayout());
            URL url = getClass().getResource("/bg1.gif");
            System.out.println(url);
            try {
                BufferedImage image = ImageIO.read(url);
                Image smaller = image.getScaledInstance(-1, image.getHeight() / 2, Image.SCALE_SMOOTH);
                lbl1.setIcon(new ImageIcon(smaller));
            } catch (Exception e) {
                e.printStackTrace();
            }
//            lbl1.setIcon(new ImageIcon(url));
            panel1.add(lbl1);

            add(panel1);

            panel2.setLayout(new GridBagLayout());
            panel2.setOpaque(false);

            lbl2.setBorder(new EmptyBorder(8, 8, 8, 8));
            lbl2.setBackground(Color.GREEN);
            lbl2.setText("Say hello");;
            lbl2.setOpaque(true);
            panel2.add(lbl2);

            lbl1.add(panel2);

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:56:42.430

似乎什么都没有显示的原因`panel2`是因为没有什么可显示的。只需设置 text for`lbl2`将显示其`JPanel`本身是可见的：

```
JLabel lbl2 = new JLabel("Some text"); 
```

但是，我建议不要使用`null`布局，因为它会使开发人员承担设置位置和尺寸的开销，而[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)可以轻松地为您管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:46:04.730

我建议你听从 MadProgrammer 的建议。如果您选择使用 null 布局，请确保要删除以前的布局`JPanel`并将新布局添加到内容窗格`window.setContentPane(panel2);`并调用`window.repaint()`.

# erlang - Erlang shell - 控制两个进程

> ID：13886478
> 
> 赞同：2
> 
> 时间：2012-12-14T21:27:17.907
> 
> 标签：erlang

我有一个关于 erlang shell 和 erlang vm 的问题。

我们必须在 Erlang 中编写简单的客户端-服务器应用程序，但仅限于本地环境，所以没有套接字或任何东西。

我想写一些类似于通信服务器的东西，人们可以注册并向其他人发送消息。问题是，如果我打开`erl`并启动我的服务器/注册它，我只能从 erlang shell 控制一个进程，所以这没有什么好玩的，因为我无法与任何人交谈。

是否可以打开连接到同一 vm 实例的 2 个 erlang shell 或编译客户端程序，从 erlang shell 启动服务器，然后在同一个 vm 中运行编译的客户端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T21:40:05.640

*   可以打开连接到一个 VM 的两个 shell（常规和 rem shell）。
*   您可以从一个 shell 控制多个进程，只需生成它们即可。
*   您可能真正想要的是许多 erl VM 相互通信，即使在一台主机上也是如此。只需在分布式模式下运行它们（例如使用 -sname），从现在开始，您就可以与使用相同 cookie 的任何人进行通信。

学习 erlang 时要看的地方之一：http: [//learnyousomeerlang.com/distribunomicon#alone-in-the-dark](http://learnyousomeerlang.com/distribunomicon#alone-in-the-dark)

# javascript - jQuery getJSON 在对话框关闭之前没有足够的时间执行

> ID：13886479
> 
> 赞同：0
> 
> 时间：2012-12-14T21:27:17.597
> 
> 标签：javascript, jquery, jquery-ui-dialog, getjson

我正在使用 jQuery 的 UI Dialog`my-ui-dialog`在屏幕上绘制一个对话框 ( ) 并向用户展示一些`<input>`s 和其他控件。当用户单击对话框的“*确定*”按钮时，我希望 UI 对话框向我的服务器（通过`getJSON`）触发 AJAX/JSON 消息，允许服务器处理该调用，然后在收到来自服务器的响应后关闭对话框。然后用户应该被重定向（通过`window.location`）到另一个网页。

这是我的代码：

```
$("#my-ui-dialog").dialog({
    modal: true,
    autoOpen: false,
    height: 255,
    width: 300,
    buttons: {
        "OK" : function() {
            var f = $("#fizz").val();

            $.getJSON(
                "/myserver/do-something",
                {
                    fizz: f
                },
                function() {
                    $("#my-ui-dialog").dialog('destroy');
                }
            );

            // When I leave this in the code works great.
            // When I comment the alert out, the getJSON call never
            // hits the server-side.
            alert("Returned from the backend...");

            window.location = "/myserver/some-other-url"
            $(this).dialog("close");
        },
        Cancel : function() {
            $(this).dialog("close");
        }
    }
}); 
```

当我把那个`alert`盒子留在里面并等待几秒钟（警报框绘制到屏幕上）时，该`getJSON`方法似乎有足够的时间来访问服务器并返回。但是，如果我注释掉`alert`该请求，则该请求甚至都不会到达我的服务器。我可以通过在监听的处理程序的开头添加一条日志消息来说明这一点`/myserver/do-something`。这也是一个 Java Web 应用程序，我没有看到任何 Tomcat 收到请求的证据，也没有看到`HTTP`使用 Firebug 调试时生成的请求。所有这 3 个都表明请求根本没有命中服务器。

我在这里有什么选择？我可以让 jQuery 休眠几秒钟吗？这感觉像是一个丑陋的解决方案。必须有更好的方法来使用 jQuery API...在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:29:22.647

关闭对话框并`window.location`在`getJSON`回调中编写代码。这就是为什么会有回调。

# html - 使响应式网格元素适合高度

> ID：13886481
> 
> 赞同：4
> 
> 时间：2012-12-14T21:27:27.640
> 
> 标签：html, css, responsive-design, grid-layout

我正在尝试使用响应式网页设计（通过列堆叠），我目前正在使用此网格进行布局：[http](http://www.responsivegridsystem.com/) ://www.responsivegridsystem.com/我认为它非常整洁。

我唯一能在墙上运行的就是让它“足够聪明”，也可以尝试按照它们的高度来安装我的柱子。我到目前为止是这样的：[http](http://gridtest.uconsult.dk/) ://gridtest.uconsult.dk/我正在寻找的是这样的：http: [//gridtest.uconsult.dk/gridheight.png](http://gridtest.uconsult.dk/gridheight.png)以便网格试图适应行的高度以及列数。

这在某种程度上可能吗？:-) 我应该为此使用其他网格还是必须编写一些 hacky javascript 来实现我想要的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:32:44.580

不要重新发明轮子！David DeSandro 已经推出了几个 jquery 插件来为你做这件事。 [Masonry](http://masonry.desandro.com/)是第一个并且效果很好，[Isotope](http://isotope.metafizzy.co/)是更新的版本，它扩展了原始思想以及诸如排序之类的附加功能。两者都可以很好地创建您希望的动态网格系统。

# dojo - 如何使用 dojo.query 将 id 添加到搜索元素

> ID：13886488
> 
> 赞同：1
> 
> 时间：2012-12-14T21:28:09.917
> 
> 标签：dojo

我正在尝试使用 dojo.query 将 id 添加到元素中。我不确定这是否可能。我尝试使用下面的代码添加 id，但它不起作用。

```
dojo.query('div[style=""]').attr("id","main-body");

<div style="">
  content
</div> 
```

如果这是不可能的，还有其他方法吗？使用 javascript 还是 jquery？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:53:59.607

您向元素添加 id 的方式是正确的。

该代码在 Firefox 17 和 Chrome 23 中运行良好，但在 IE9 中存在问题。我怀疑你可能有同样的问题。

在 IE9 中，查询`div[style=""]`不返回任何结果。有趣的是，它在兼容模式下运行良好！

t 似乎在**正常模式下的****IE9**中，如果 HTML 元素具有内联的**空样式**属性，则在将元素添加到 DOM 时**不会保留该属性。**

 ******所以一个解决方案是使用不同的查询来找到你想要的 div。您可以尝试查找样式属性为空**或**根本没有样式属性的 div。

像这样的查询应该可以工作：

```
div[style=""], div:not([style]) 
```

看看下面的例子：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test Page</title>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/dojo/1.8.2/dojo/dojo.js"></script>
    <script type="text/javascript">
        dojo.require("dojo.NodeList-manipulate");//just for the innerHTML() function

        dojo.addOnLoad(function () {
            var nodeListByAttr = dojo.query('div[style=""], div:not([style])');
            alert('Search by attribute nodeList length:' + nodeListByAttr.length);
            nodeListByAttr.attr("id", "main-body");

            var nodeListByID = dojo.query('#main-body');
            alert('Search by id nodeList length:' + nodeListByID.length);
            nodeListByID.innerHTML('Content set after finding the element by ID');
        });
    </script>
</head>
<body>
    <div style="">
    </div>
</body>
</html> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:44:14.757

@Nikanos 的回答涵盖了我想补充的查询问题，即任何查询都返回一个元素数组，如果是 Dojo，它是[`dojo/NodeList`](http://dojotoolkit.org/reference-guide/1.8/dojo/NodeList.html).

问题是您要将相同的分配`id`给多个 DOM 节点，尤其是查询包含`div:not([style])`. 我建议使用更具体的查询*，`div`例如`body`*：

```
var nodes = dojo.query('body > div:first-child');    
nodes.attr("id", "main-body"); 
```

为了使它更健壮，不要操作所有节点，只操作第一个节点（即使应该只有一个节点）：

```
dojo.query('body > div:first-child')[0].id = "main-body"; 
```

这项工作也在 IE9 中，查看实际操作：http: [//jsfiddle.net/phusick/JN4cz/](http://jsfiddle.net/phusick/JN4cz/)

[用Modern Dojo](http://dojotoolkit.org/documentation/tutorials/1.8/modern_dojo/)编写的相同示例：http : [//jsfiddle.net/phusick/BReda/](http://jsfiddle.net/phusick/BReda/)******

# ruby - 在 Mountain Lion 中构建宝石时出错

> ID：13886494
> 
> 赞同：3
> 
> 时间：2012-12-14T21:28:35.690
> 
> 标签：ruby, macos, gem, nokogiri

我刚买了一台新的 MacBook Pro（显然是 w/ML）。我要做的第一件事是安装开发工具。我用 rvm 安装了 Ruby，还安装了 Homebrew。我必须下载 XCode 命令行工具。

```
$ gcc -v
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

我能够`mongo`很好地安装 gem，但是当我尝试安装时`nokogiri`，我收到以下错误：

```
$ gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /Users/johnsmith/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
checking for libxml/parser.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

在那条消息之后，它列出了一大堆配置选项，然后说：

```
/Users/johnsmith/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:369:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first. 
```

看来我有开发工具，所以我无法弄清楚问题所在。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:18:52.020

我不得不环顾四周，但我在 github 上找到了解决方案： [https ://github.com/sparklemotion/nokogiri/issues/442#issuecomment-7978408](https://github.com/sparklemotion/nokogiri/issues/442#issuecomment-7978408)

> 缺少 libxml2。
> 
> 我发现需要一个额外的步骤来解决 Mac OS X 10.8 Mountain Lion 上的 Homebrew 0.9 的上述问题，即创建一个“/usr/bin/gcc-4.2”链接：

```
brew install libxml2 libxslt
brew link libxml2 libxslt
wget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.13.1.tar.gz
tar xvfz libiconv-1.13.1.tar.gz
cd libiconv-1.13.1
./configure --prefix=/usr/local/Cellar/libiconv/1.13.1
make
sudo make install
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2
gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.8.0/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.8.0/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.26 --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:25:55.343

在这种情况下，您需要 libxml 的开发头文件，这些头文件未作为编译器工具的一部分提供。通常您需要安装[Homebrew](http://mxcl.github.com/homebrew/)或[MacPorts](http://www.macports.org)之一来帮助安装这些依赖项。

如果您不熟悉，这里的提示有点难以在噪音中发现，但是：

```
checking for libxml/parser.h... *** extconf.rb failed *** 
```

这些`.h`文件随开发包一起提供，并且是针对这些库编译扩展所必需的。

# javascript - 使用 sorttable.js 对表格进行自动排序

> ID：13886497
> 
> 赞同：5
> 
> 时间：2012-12-14T21:28:50.060
> 
> 标签：javascript, html, sorting, sorttable.js

我正在尝试使用此脚本对 html 表进行排序：[http ://www.kryogenix.org/code/browser/sorttable/](http://www.kryogenix.org/code/browser/sorttable/)

JS 代码本身：[http ://www.kryogenix.org/code/browser/sorttable/sorttable.js](http://www.kryogenix.org/code/browser/sorttable/sorttable.js)

我使用了该`customkey`选项，当我单击标题时它可以工作。我想`customkey`在页面加载时根据它自动排序。我怎样才能做到这一点？我想使用这个特定的脚本。我试过`window.onload`但没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T23:34:12.430

加载页面后，只需单击要排序的标题列。尝试使用以下`javascript`代码。我假设页面中只有一个表。也许您需要更具体地使用`getElementsByTagName`或`getElementById`代替。`[1]`是列号。在此之前您不需要附加点击处理程序，因为该任务是由`sorttable.js`.

```
<script src="js/sorttable.js"></script>
<script>
    window.onload = function() {
        (document.getElementsByTagName( 'th' )[1]).click();
    };
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-28T06:21:28.347

我解决了这个问题略有不同。在我想要点击页面加载的任何表头上，我添加了`data-autoclick="true"`. 然后在我的主应用程序 JavaScript 中，我添加了

```
<script>
    window.onload = function() {
        $('[data-autoclick="true"]').click();
    };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-03T00:10:38.427

如何使用

```
table.sortable th:not(.sorttable_sorted):not(.sorttable_sorted_reverse):not(.sorttable_nosort):after { 
        content: " \25B4\25BE" 
    } 
```

在动态表中。

# ruby-on-rails - 使用 `validate` 方法时如何跳过验证？

> ID：13886500
> 
> 赞同：1
> 
> 时间：2012-12-14T21:29:11.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, skip

我正在使用 Ruby on Rails 3.2.9。我实现了一个[自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)，我想在使用该`validate`方法时跳过验证（在迁移文件中创建新对象）。一般来说，我可以将[`:without_protection => true`](http://api.rubyonrails.org/classes/ActiveRecord/AttributeAssignment.html#method-i-assign_attributes)其用作方法的参数，`create!`但在我的情况下（参见下面的代码），它似乎不起作用：不会跳过验证。

```
class Article < ActiveRecord::Base
  validate do
    # custom validation code
  end
end 
```

如何跳过验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:33:32.600

您必须确保禁用所有其他验证才能使其生效。ActiveRecord 不能选择性地禁用验证，但可以完全忽略它们。

例如：

```
class Article < ActiveRecord::Base
  validate :something,
    :if => :validations_are_turned_on?

  validate :always

protected
  def validations_are_turned_on?
    !@validations_disabled
  end
end 
```

用适当的条件标记任何非必要的验证`:if`应该可以工作。在这种情况下，如果`@validations_disabled`未设置，则所有验证都将运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:39:45.577

没有保护**不会**关闭验证，它允许您批量分配受保护的属性。在不验证的情况下保存：

```
new_record = Article.new
new_record.save(:validate => false) 
```

# php - ajax abort 不会在服务器上中止，仅用于客户端

> ID：13886501
> 
> 赞同：3
> 
> 时间：2012-12-14T21:29:12.230
> 
> 标签：php, jquery, ajax

显然我用

```
var x=ajax.....

if(x){x.abort();} 
```

但这不会导致我的 php 文件中的流产，顺便说一下，虽然该选项默认设置为 ignore_user_abort(false)

这意味着如果连接丢失，则脚本将不会继续执行。

问题是它似乎继续执行代码，尽管 js 客户端上的 ajax 已中止。

如何通过js完成客户端和服务器端php停止的成功中止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:32:00.563

在大多数情况下，这不是 AJAX 的工作方式。一旦向服务器发出请求，服务器就会开始执行它。即使 PHP 设置为在客户端连接断开时停止脚本执行，在 Web 服务器配置中，它也不会进行此类检查，直到实际尝试将输出发送到客户端。因此，如果您正在执行一个典型的 AJAX 类型的脚本，其中只有一个输出事件，那么客户端中止不会对服务器端产生任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:40:26.337

如果您需要确认某事已中止，您必须发送另一个请求以询问您的工作是否完成。这意味着在你打电话之后，`xhr.abort()`你必须向类似的东西发送一个请求，`/abort/jobId`以确定它是否能够在完成处理之前中止。

没有什么神奇的方法可以保证 PHP 脚本在`abort()`调用后立即停止。

# c++ - 在 N 元构造函数上显式？

> ID：13886507
> 
> 赞同：10
> 
> 时间：2012-12-14T21:29:36.627
> 
> 标签：c++, constructor, c++11, explicit-constructor

在本演示文稿中：http: [//qtconference.kdab.com/sites/default/files/slides/mutz-dd-speed-up-your-qt-5-programs-using-c++11.pdf](http://qtconference.kdab.com/sites/default/files/slides/mutz-dd-speed-up-your-qt-5-programs-using-c++11.pdf)

作者建议 N 元构造函数受益于 C++11 版本的`explicit`关键字。

如果您有多个构造函数参数，C++11 中的哪些变化使这个关键字变得有用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T21:34:35.800

`A`在 C++11 中，如果您有一个具有多个参数的类的非显式构造函数（这里我`A::A(std::string, int, std::string)`用作示例），您可以使用大括号初始化来初始化该类型的参数：

```
void foo(A a);
foo({"the", 3, "parameters"}); 
```

同样，您可以对返回值执行相同的操作：

```
A bar() {
  return {"the", 3, "parameters"};
} 
```

但是，如果构造函数是 ，则`explicit`这些将无法编译。因此，`explicit`关键字现在对所有构造函数都很重要，而不仅仅是转换构造函数。

# notepad++ - notepad++ find and replace regex

> ID：13886509
> 
> 赞同：1
> 
> 时间：2012-12-14T21:29:51.227
> 
> 标签：notepad++, replace

I have in txt file lines like this:

```
(1, 'Peach', '["8","9"]'),
...
(31, 'Apple', '["8","9"]'),
(32, 'Orange', '["8","0"]'),
(33, 'Mango', '["8","0"]'),
...
(344, 'Melon', '["8","9"]'), 
```

and I want them **without numbers**. Like this:

```
('Peach', '["8","9"]'),
...
('Apple', '["8","9"]'),
('Orange', '["8","0"]'),
('Mango', '["8","0"]'),
...
('Melon', '["8","9"]'), 
```

What regex "replace with..." I should use ?

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:33:14.180

search for:

```
^\([0-9]+,\s* 
```

replace with `\(`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:39:08.733

Try this:

Find `\([0-9]+,\s*`

Replace `(`

# openssl - openssl genrsa。如何创建密钥标准 pkcs #15

> ID：13886515
> 
> 赞同：0
> 
> 时间：2012-12-14T21:30:36.490
> 
> 标签：openssl, standards, rsa

如何创建 RSA 密钥，私有的和公共的。使用 md5 和强制性标准 PKCS#15？

我正在这样做：Сreate private key with md5\.

```
openssl genrsa -out private.key 2048 -md5 
```

创建公钥：

```
openssl rsa -in private.key -pubout > public.key 
```

ps 甚至如何从关键的既定标准中找出来？

# objective-c - wordpress api如何获取用户的链接

> ID：13886519
> 
> 赞同：0
> 
> 时间：2012-12-14T21:30:55.477
> 
> 标签：objective-c, ios, macos, wordpress, api

任何人都知道如何通过 Wordpress API 检索用户的链接？（那些自己发布（不是作为帖子）并被分配到各种类别的）

我知道如何获取所有帖子，但这显然不包括链接。

例如，我将图像附加到这样的帖子中：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://public-api.wordpress.com/rest/v1/%@", method]]]; 
```

在这种情况下，请求是：

```
https://public-api.wordpress.com/rest/v1/sites/123456/posts 
```

Wordpress 有这个 REST API，但那里似乎没有关于用户链接的任何内容：

[https://developer.wordpress.com/docs/api/](https://developer.wordpress.com/docs/api/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:29:33.030

根据 Wordpress.com 工作人员的回复，这些链接已弃用，不会添加到 REST API：

> “链接管理器在 WordPress 核心版本 3.5 中已被弃用，因此我们不会将它添加到 REST API 中”

难怪我不知道怎么去找他们

# r - 如何在矩阵中找到大于 R 的 -Inf 的最小值？

> ID：13886520
> 
> 赞同：1
> 
> 时间：2012-12-14T21:30:58.003
> 
> 标签：r, min, infinity

我有一个值矩阵，其中一些是-Inf。如何找到大于-Inf 的最小值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T21:38:36.933

这边走：

```
foo <- matrix(c(1,2,-Inf,3),nrow=2,ncol=2)
min(foo[foo>-Inf])
[1] 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T22:47:21.733

```
min( foo[ is.finite(foo) ] #... 
```

# background - 更改 setEnable JLabel 的默认灰色

> ID：13886523
> 
> 赞同：0
> 
> 时间：2012-12-14T21:31:06.010
> 
> 标签：background, default

当我将 setEnable 检查为 false 时，如何更改默认背景灰色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T12:03:58.667

很简单，用这个

```
UIManager.put("Label.disabledForeground",Color.RED); 
```

# gwt - GWT TextInputCell 值更改处理程序

> ID：13886524
> 
> 赞同：3
> 
> 时间：2012-12-14T21:31:10.673
> 
> 标签：gwt, celltable

我开始使用`CellTable`小部件。我需要一个可编辑的文本单元格，所以我尝试`TextInputCell`了，但令我沮丧的是，我找不到“值更改处理程序”。

如何在单元格内容更改时收到通知？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T21:47:22.493

您不需要单元格的更改处理程序。您在列上设置了 FieldUpdater。它具有 update() 方法，当该列中单元格的值发生变化时会触发该方法。例如：

```
myEditableColumn.setFieldUpdater(new FieldUpdater<T, String>() {
    @Override
    public void update(int index, T object, String value) {
        // do something when value changes
    }
}); 
```

# ruby-on-rails-3 - 获取Hobo中未保存对象的祖先对象

> ID：13886525
> 
> 赞同：0
> 
> 时间：2012-12-14T21:31:11.157
> 
> 标签：ruby-on-rails-3, hobo

我正在开发一个 Hobo 应用程序，试图将几个模型正确地结合在一起。

`Activity`对象有很多`Page`孩子。他们也有很多`DataSet`孩子。

`Page`对象有几种不同的孩子。我们将讨论`Widget`儿童，但有几种类型具有相同的问题。a 的实例`Widget`属于 a`Page`但也`belongs_to`与 a 有关系`DataSet`。这是重要的一点：`DataSet`必须属于包含`Activity`。所以对于任何给定的`@widget`：

```
@widget.page.activity === @widget.data_set.activity 
```

通过保存验证在模型中强制执行此约束很容易。诀窍是在`Widget`'s 表单中显示一个可用 s 的选择菜单，`DataSet`其中仅包含`DataSet`当前的 s`Activity`

我能够使用这样的标签来为现有对象工作：

```
<data_set-tag: options="&DataSet.activity_is(&this.page.activity)" /> 
```

但是，对于*new* `Widget`，这会失败，因为`&this`or 或`&this.page`尚未设置。即使对于包含页面 ID 的路由`/pages/:page_id/widgets/new`，我也无法真正获得s`Activity`列表的范围`DataSet`。

如果这是正确的 Rails，我会进入相关的控制器方法并`Activity`提供给视图`@activity`或类似的东西，但在 Hobo 中，控制器似乎是 95% Magic™，我不知道在哪里开始。当前的知识`Activity`必须存在于某处；我怎么把它弄出来？

这是 Rails 3.0.x 上的 Hobo 1.3.x。

* * *

ETA：产生错误的代码在`form`标签中`Widget`，如下所示：

```
<extend tag="form" for="Widget">
  <old-form merge>
    <field-list: fields="&this.field_order">
      <data_set-tag: options="&DataSet.activity_is(&this.page.activity)" />
    </field-list>
  </old-form>
</extend> 
```

正如我上面所说，这适用于编辑现有`Widget`的 s，但不适用于新`Widget`的 s；错误是`undefined method 'page' for nil:NilClass`。Bryan Larsen 的回答似乎暗示不`&this.page`应该为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:40:43.413

看起来您试图将这个问题发布到 Hobo 用户邮件列表 - 我收到了一条审核消息，但您的帖子似乎没有发布，我也找不到它让它通过。请尝试重新发布它，列表中有几个乐于助人的人不在这里监视 Hobo 标签。

在 Hobo 1.3 中，新动作不支持部分 AJAX，所以真的没有什么魔力。您可以将操作替换为您自己的操作：

```
def new_for_page
  @activity = Activity.find(...)
  @page = Page.find(params[:page_id])
  @widget = @page.widgets.new
end 
```

上面提到了一点魔法：如果你在 WidgetsController 中，分配给 @widget 也会分配给`this`.

但正如您所说，知识显然存在于某处，您的自定义控制器操作不应该是必需的。

这个陈述似乎是错误的： *然而，对于一个新的 Widget，这会失败，因为 &this 或 &this.page 还没有设置。*

看起来您正在正确使用所有者操作。 `/pages/:page_id/widgets/new`是路线。在 widgets_controller 中是`new_for_page`动作。在 new 或 new_for 操作中，`this`设置为对象的未保存版本。在您的操作中，它应该已使用`Page.find(params[:page]).widgets.new`. 换句话说，两者`this`和`this.page`都应该被填充。

我敢肯定你不是凭空发表声明的，所以可能还有其他事情发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:29:26.893

最后，它变成了语法。代替

```
<data_set-tag: options="&DataSet.activity_is(&this.page.activity)" /> 
```

我需要

```
<data_set-tag: options="&DataSet.activity_is(@this.page.activity)" /> 
```

（注意`@`）。

我们实际上把它做成了一个辅助方法，所以最终的代码是

```
<data_set-tag: options="&DataSet.activity_is(activity_for(@this))" /> 
```

# spring - 是什么导致 Hibernate 选择出现此 NullPointerException？

> ID：13886528
> 
> 赞同：5
> 
> 时间：2012-12-14T21:31:20.837
> 
> 标签：spring, hibernate

我正在使用 Hibernate 4.1.8.Final/Spring 3.1 并得到以下异常：

```
java.lang.NullPointerException
            at org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushin$
            at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(Abstract$
            at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventLis$
            at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1185)
            at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1240) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:43:15.830

这可能是 Hibernate 4.1.8 Core 中的一个开放错误。

这是一个 JIRA 问题 HHH-7821：[https](https://hibernate.onjira.com/browse/HHH-7821) ://hibernate.onjira.com/browse/HHH-7821 。

似乎错误报告者在从 4.1.6 升级到 4.1.8 后开始偶尔看到它。记者提到它是一个涉及到的应用程序，并试图获得一个孤立的可重现场景。

我不知道这是否与您的情况相同（因为您发布的所有内容都是 Stacktrace），但您可能希望查看该情况（以及其他引用[的 JIRA HHH-7829](https://hibernate.onjira.com/browse/HHH-7829)），如果相关，请评论/监控进度关于那些开放的 JIRA 问题。

# actionscript-3 - 适用于移动应用的纯 AS3 AIR 地图

> ID：13886529
> 
> 赞同：0
> 
> 时间：2012-12-14T21:31:26.243
> 
> 标签：actionscript-3, air

我正在构建的 iOS/Android 应用程序需要一个地图组件，只是想知道这里的专家会推荐使用什么？

该应用程序正在使用纯 AS3 开发并遇到 MapQuest。我只需要能够删除多个标记并单击标记以获取信息。没有方向，搜索等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:19:36.090

您可以考虑将[StageWebView](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)实例与 HTML 版本的 Google 地图一起使用。您应该能够在网络上找到有用的文章。示例：[http](http://www.igorcosta.org/?p=350) ://www.igorcosta.org/?p= 350 无论如何，这可能会变得棘手。：-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:33:06.377

我认为谷歌地图仍然是一个好主意，但我不确定它是否可以在移动设备上运行： [http ://www.gotoandlearn.com/play.php?id=104](http://www.gotoandlearn.com/play.php?id=104)

请注意 Google Maps API for Flash 已被弃用。注意（表单[Google Maps API 页面](https://developers.google.com/maps/documentation/flash/)）：

> Google Maps API for Flash 已于 2011 年 9 月 2 日正式弃用。该 API 将继续工作到 2014 年 9 月 2 日。我们鼓励您将代码迁移到 Maps JavaScript API 的第 3 版。

如果没有，您可能必须创建一个本机扩展。

# internationalization - 语言资源包为空

> ID：13886530
> 
> 赞同：0
> 
> 时间：2012-12-14T21:31:36.143
> 
> 标签：internationalization, xpages

我正在致力于使网站国际化。我按照有关如何创建它们的说明进行操作，但 .properties 文件是空的。关于问题可能是什么的任何提示？

谢谢克莱姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T01:26:23.460

您不需要首先创建属性文件。您在数据库属性中指定多种语言，Domino Designer 将在保存 XPage 或项目重建时为您创建和填充属性文件。如果您想通过您自己的消息从代码中使用它们，您只需要手动创建属性文件。

# toplink - toplink 模型类中的构造函数

> ID：13886533
> 
> 赞同：0
> 
> 时间：2012-12-14T21:31:44.013
> 
> 标签：toplink

我可以在 toplink 中有一个非默认的多参数构造函数吗？例如

```
public class Employee {
   private String empId;
   public Employee(String empId) {
      this.empId = empId;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:43:57.563

是的，但是默认构造函数仍必须可用于 toplink。Toplink 使用默认构造函数和设置器/属性来初始化您的对象。

# forms - Symfony2 表单生成器实体类型选择值

> ID：13886537
> 
> 赞同：3
> 
> 时间：2012-12-14T21:32:06.017
> 
> 标签：forms, symfony, entity

我是 symfony 2 的新手。有人可以帮我构建 symfony2 表单类型构建器吗？

我有一个带有`Product`实体的表单，我想在表单中使用选择框来列出我的`User`实体中的所有用户。当我创建带有`Product`详细信息的表单时，没有`userid`. 用户选择框没有选择来自`Product`Entity 的值`userId`。

```
namespace ATL\ProductBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Form\FormBuilderInterface;
use Doctrine\ORM\EntityRepository;

class ProductGeneralType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options){       
            $builder->add("name", null, array(
                "label" => "Name",
                "required" => true,
                "attr" => array(
                    "class" => "span5",
                )
            ))->add("description",null,array(
                "label" => "Description",
                "required" => true,
                "attr" => array(
                    "class" => "span8"
                )
            ))->add("visible",null,array(
                "label" => "Visible"
            ))->add("userId","entity",array(
                "label" => "User",
                "class" => "ATLUserBundle:User",
                "query_builder" => function(EntityRepository $er){
                    return $er->createQueryBuilder("u")->where("u.enabled = 1")->orderBy("u.username", "ASC");
                },
            ));
    }

    public function getName(){
        return "product";
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver){
        $resolver->setDefaults(array(
            "data_class" => "ATL\ProductBundle\Entity\Product"
        ));
    }   
} 
```

`Name`，`Description`并且`Visible`可以从数据库中获取。但`User`没有`userId`从`Product`实体中选择。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:04:28.307

我解决了我的问题，在我的`Product`实体中，我的实体映射名称`User`是`users`. 我将其更改`userId`为`users`，它已修复。

# jsp - 从 JSP 中的另一个页面获取参数

> ID：13886539
> 
> 赞同：0
> 
> 时间：2012-12-14T21:32:10.477
> 
> 标签：jsp

我有所谓的**admin.jsp**的第一页，其中包括以下内容：

```
 <c:if test="${param.action == 'testA'}">
              <jsp:include page="testA.jsp" />
      </c:if> 
```

在**testA.jsp**中，它包含以下内容：

```
 <%@include file="testB.jsp" %>
      <%@include file="testC.jsp" %> 
```

**testC.jsp**中有很多 html 代码，例如：

```
 <input type="hidden" id="checkA" value="check1">
      <input type="hidden" id="checkB" value="check2"> 
```

我想在**testB.jsp**中使用它。我确实尝试使用 request.getParameter("checkA") 或 request.getParameter("checkB") 但它返回 null。谁能帮我吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:37:53.767

```
<portlet:defineObjects />
<%= renderRequest.getAttribute("add") %><br> 
```

# ios - NSFilemanager 上传新文件，但 UIWebView 显示缓存版本

> ID：13886540
> 
> 赞同：0
> 
> 时间：2012-12-14T21:32:11.130
> 
> 标签：ios, caching, uiwebview, nsfilemanager

我正在构建的应用程序需要定期检查更新文件的已知位置。它恰好是PDF。如果 x 时间已过，应用程序需要上传文件的新副本。以下代码片段有效。它下载文件。但该应用程序显示 PDF 的缓存版本而不是新版本。我通过查看应用程序包确认了这一点。这段代码运行后，Documents目录下肯定多了一个新文件。但是在捆绑包的 tmp/DiskImageCache-[random gibberish string] 中有一个旧版本的 PDF 的副本 - 这就是我的 UIWebView 显示的内容。

我搜索了 NSFileManager 文档，当然，也掀起了一场风暴，但我无法找到一种方法让应用程序显示新上传的文件，而不是显示 PDF 的缓存版本。

非常感谢您为解决此问题提供的任何帮助。

```
 -(void) checkFile:(NSString *)url andSaveTo:(NSString __autoreleasing *)filename {

    NSFileManager *manager = [NSFileManager defaultManager];
    NSError *error = nil;      
    NSDictionary *attributes = nil;

    if ([manager fileExistsAtPath:filename]) {

       attributes = [manager attributesOfItemAtPath:filename error:nil];

        double updateInterval = [[attributes fileCreationDate] timeIntervalSinceNow];
        cacheInterval = CacheInterval;

        if (ABS(updateInterval) > CacheInterval) {
         [self downloadFile:url andSaveTo:fileName];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:35:02.180

您始终可以通过将随机数作为参数附加到您的 url 来阻止缓存

例如：address/yourfilehere.pdf?rand=0323094230948203984 并每次给你的长随机参数一个新的随机生成的数字

# php - jQuery单选按钮显示不同的东西依赖

> ID：13886544
> 
> 赞同：0
> 
> 时间：2012-12-14T21:32:20.283
> 
> 标签：php, javascript, jquery, html, ajax

我想用 jQuery 做的事情是让我可以在同一组中使用三个单选按钮。When one is selected the other two shouldn't be active. 我希望能够使用 jQuery 在最终结果中显示单独的 HTML 块，但是我无法使用我正在使用的东西来正确运行一些简单的东西。

这是我目前必须使用的代码：

```
 $(document.ready(function()
{
    $("input[name='rdiobut']").change(function(){
        if ($("input['rdiobut']:checked".val() == 'a'))
        $("#rdiocont").text("There is no expiration date.");
        else if ($("input[name='rdiobut']:checked".val() == 'b'))
        $("#rdiocont").text("Tell me how many days until expire");
        else ($("input[name='rdiobut']:checked".val() == 'c'))
        $("#rdiocont").text("Pick the date to expire from a calendar");
    });
}); 
```

这是 jQuery 转到的表：

```
<tr><td>Expire Settings:</td><td>Does Not Expire: <input type="radio" name="rdiobut" value="a" checked="check" /> &nbsp;&nbsp;&nbsp;<strong>OR</strong> Expires By Days <input type="radio" name="rdiobut" value="b" /> &nbsp;&nbsp;&nbsp;<strong>OR</strong> Select a Date to Expire On <input type="radio" name="rdiobut" value="c" /></td></tr><tr id="rdiocont"><td>No Expiration Date</td></tr><tr id="rdiocont"><td>Expires by Days</td></tr><tr id="rdiocont"><td>Choose Expiration by Calendar</td></tr> 
```

有人对我可能做错的事情有任何建议或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:31:57.970

好的，您的代码中有一些错误。在这里你有它，所有清理和工作就像我认为你想要的那样（[工作示例](http://jsfiddle.net/fabio_silva/c7FGn/)）：

***jQuery***

```
$(document).ready(function()
{
    $("input[name='rdiobut']").change(function(){
        if ($("input[name='rdiobut']:checked").val() == 'a')
            $("#rdiocont").text("There is no expiration date.");
        else if ($("input[name='rdiobut']:checked").val() == 'b')
            $("#rdiocont").text("Tell me how many days until expire");
        else if ($("input[name='rdiobut']:checked").val() == 'c')
            $("#rdiocont").text("Pick the date to expire from a calendar");
    });
}); 
```

***HTML***

```
<table>
    <tr>
        <td>Expire Settings:</td>

        <td>
            Does Not Expire: 
            <input type="radio" name="rdiobut" value="a" checked="checked" /> &nbsp;&nbsp;&nbsp;
            <strong>OR</strong> 
            Expires By Days 
            <input type="radio" name="rdiobut" value="b" /> &nbsp;&nbsp;&nbsp;
            <strong>OR</strong> 
            Select a Date to Expire On 
            <input type="radio" name="rdiobut" value="c" />
        </td>
    </tr>

    <tr id="rdiocont">
        <td>(Select an option)</td>
    </tr>

</table> 
```

一些注意事项：

*   不要对各种元素使用相同的 id（就像你在 中使用的那样`<tr id="rdiocont">`）；
*   是的`$(document).ready`，不是`$(document.ready`- 等待结束`)`
*   就像@Ryan 所说，不要评估 else 语句中的表达式。如果您真的想评估表达式，请继续使用`else if`（不一定要有 else 语句）。
*   在您的第一次评估中，它是`input[name='rdiobut']`而不是`input['rdiobut']`。你也没有关闭`)`之后`:checked"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:36:40.477

首先，你的最后一个 else 语句，你试图评估一个表达式，就好像它是一个 if 语句一样。

其次，这是单选按钮的默认行为，只要它们具有相同的名称。

# c# - 在构建输出中打印一条消息（这不是警告）

> ID：13886546
> 
> 赞同：19
> 
> 时间：2012-12-14T21:32:24.543
> 
> 标签：c#, visual-studio-2010

在构建时，我希望能够在构建输出窗口中打印一条消息，而不会将其归类为警告。即在 Visual Studio 错误列表中，我希望它仅在您打开“消息”过滤器时才显示。

所以，我想要与 `#warning Warning Message` 但我不希望它被归类为警告的相同功能。

**语境：**

我有很多项目目前会产生很多警告。我首先想做的是防止引入**新的**警告。所以，我有：

1.  打开“警告为错误”
2.  通过并用于`#pragma warning disable/restore`消除现有的警告。

但是，对于我禁用的警告，我想打印一条消息，表明这里有一个需要调查的警告（因为我还没有调查这些警告需要做什么）。例如，许多警告是“过时”类型的警告，我们确实需要在某些时候去做一些工作。所以，我不希望这些警告消失。

理想情况下，我会做这样的事情：

```
#pragma warning disable 0618
#message Existing Warning: 0618: IObsoleteInterface is obsolete.
class MyClass : IObsoleteInterface
#pragma warning restore 0618 
```

我对处理这个问题的其他方法持开放态度。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T18:30:29.823

根据 MSDN，您不能扩展：http `#pragma`: [//msdn.microsoft.com/en-us/library/x74w198a.aspx](http://msdn.microsoft.com/en-us/library/x74w198a.aspx)

但是，如果 ErrorList 不是严格要求，您可以解决这个问题：您可以使用注释来突出显示对您很重要的事情。如果您在评论开头添加特殊标记，您将能够在任务列表窗口中跟踪它。
因此，您的代码将如下所示：

```
#pragma warning disable 0618
//TODO: Existing Warning: 0618: IObsoleteInterface is obsolete.
class MyClass : IObsoleteInterface
#pragma warning restore 0618 
```

之后，如果您打开视图 -> 任务列表 -> 在下拉列表中选择评论，您将在那里看到您的评论。
有 3 个预定义标记：TODO、HACK 和 UNDONE - 您可以添加自己的类似 MESSAGE 并更改其优先级，以使您的代码看起来与您最初期望的相似：

```
#pragma warning disable 0618
//MESSAGE: Existing Warning: 0618: IObsoleteInterface is obsolete.
class MyClass : IObsoleteInterface
#pragma warning restore 0618 
```

您可以在此处找到有关令牌的更多信息：http: [//msdn.microsoft.com/en-us/library/zce12xx2 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zce12xx2%28v=vs.100%29.aspx)

值得一提的是，如果您使用 Resharper，它还有另一个 TODO 工具。我会在这里找到它：ReSharper -> 工具 -> 待办事项

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T05:41:02.927

您应该查看[csc 任务的 WarningsNotAsErrors](http://msdn.microsoft.com/en-us/library/s5c8athz%28v=vs.100%29.aspx)参数。当使用 TreatWarningsAsErrors=true 为该参数指定“可接受”警告列表时，您应该记录现有警告，而新警告将显示为错误。

当然，这并不完全是现有的警告与新的警告，而是一种使用您愿意留下的准确警告编号的方法。

但我的第一个建议是解决这些问题。一旦隐藏在构建之外，它们很少得到解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T07:13:48.437

如果您使用“Premium”或“Ultimate”版本的 Visual Studio，它具有使用规则集进行代码分析的功能。

对于任何项目，当您右键单击并转到属性时，选择代码分析选项卡，它具有各种开箱即用的设置，例如将警告视为错误，禁用某些警告。

您可以将警告配置为忽略或视为错误。您可以使用开箱即用的 Microsoft 规则集，或者您可以根据您的要求构建自定义规则集（这不是很困难并​​且适合我的要求）。

要为托管代码启用代码分析：

1.  在解决方案资源管理器中选择一个项目。
2.  在项目菜单上，单击属性。
3.  单击代码分析。
4.  选择 Enable Code Analysis on Build（定义 CODE_ANALYSIS 常量）。

有关配置代码分析的详细信息，请访问： [http ://seesharper.wordpress.com/2010/04/02/code-analysis-in-team-build-2010/](http://seesharper.wordpress.com/2010/04/02/code-analysis-in-team-build-2010/)

用于构建自定义规则集：

[http://msdn.microsoft.com/en-us/library/dd264974.aspx](http://msdn.microsoft.com/en-us/library/dd264974.aspx)

[http://blogs.msdn.com/b/codeanalysis/archive/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio- 2010.aspx](http://blogs.msdn.com/b/codeanalysis/archive/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio-2010.aspx)

学习规则集和代码分析：

[http://msdn.microsoft.com/en-us/library/dd264996.aspx](http://msdn.microsoft.com/en-us/library/dd264996.aspx)

# php - 使用 PHP 的 RecursiveIteratorIterator 遍历多维数组

> ID：13886553
> 
> 赞同：3
> 
> 时间：2012-12-14T21:32:57.070
> 
> 标签：php, multidimensional-array, iterator, spl

我必须缓存一个树结构并稍后访问它。问题：我真的不知道如何声明数据以使其适合`RecursiveIteratorIterator`等。这可能是一个非常n00bish的问题，但我尝试了很多组合并且没有想法:-(

从概念上讲，数据如下所示：

```
ROOT code : 1111, label : Universe
   - code : 2000, label : Asia
      - code : 3203, label : Hongkong
           -code : 2081, label: Greater Area
           -code : 2041, label: Downtown
      - code : 4020, label : Shanghai
   - code : 6201, label : Africa
   - code : 321, label : North America 
```

我想访问给定代码的所有直接孩子，例如亚洲香港和上海。 `RecursiveIteratorIterator`似乎让这很容易。

```
// looking for Asia with code = 2000
$iterator = new RecursiveIteratorIterator(new Universe_Tree($tree));
foreach ($iterator as $key => $item) {
       if ($item->code == 2000) {
            var_dump($iterator->callGetChildren());

       }
} 
```

Universe_Tree 类还没有做太多事情：

```
class Universe_Tree extends ArrayIterator implements RecursiveIterator  {

    public function hasChildren() {
        return (is_array($this->current()));
    }

    public function getChildren() {
        return new self($this->current());
    }

} 
```

我最好的方法是创建每个节点的对象并将它们存储在嵌套数组中

```
$universe = new stdClass();
$universe ->code = 1111;
$universe ->label = "Universe"; 

$tree = array(
  array($universe,
    array(
       $asia,
      (array($shanghai,$hongkong)),
       $europe
        // and so on
       )
      ); 
```

不幸`$iterator->callGetChildren()`的是不返回子元素，只返回当前元素。可能是因为节点没有正确嵌套在一起。我还尝试使用 parentId 嵌套数组，但这会导致错误消息`ArrayIterator`表明这不是数组或对象，尽管根据`var_dump`它是一个数组。我还能尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:03:59.720

这是一种回答。实际上我放弃了，转而采用了基于 SimpleXML 的解决方案。真的很简单，代码很少。最终有人会遇到这个问题，我的“解决方案”也可能是他的一种方式。所以我会把它包括在这里：

```
// data represented as xml
$xmlstring = <<<XML
<orgtree>
  <level number="1">
        <unit label="Universe" code="1111">
            <level number="2">
                <unit label="Asia" code="2000"></unit>
                    <level number="3">
                        <unit label="Hongkong" code="3203"></unit>
                           <level number="4">
                               <unit label="Greater Area" code="2081"></unit>
                               <unit label="Downtown" code="2041"></unit>
                           </level>
                    </level>
                </unit>
            <unit label="Africa" code="6201"></unit>
            <unit label="North America" code="321"></unit>
            </level>
        </unit>
    </level>
</orgtree>
XML;

   $xml = simplexml_load_string($xmlstring);
   // use xpath to select part of xml
   foreach ($xml->xpath('//unit[@code="2000"]') as $parentUnit)
   {
        $subtree = $parentUnit->level;
        foreach ($subtree->unit as $unit) {
                 var_dump($unit["label"]);
        }
   } 
```

# .htaccess - 在 VPS 主机中更新 PHP 版本

> ID：13886560
> 
> 赞同：2
> 
> 时间：2012-12-14T21:33:34.937
> 
> 标签：.htaccess, hosting

我们希望将托管在虚拟服务器中的网站的 PHP 版本从 5.2.17 更新到 5.3，但一直没能做到。

我们向 ISP 询问了指示，但他们需要几天时间才能答复，我们需要尽快对其进行更新。

如果有人至少可以给我们一个建议或指导来实现它，我们将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:46:06.740

您可以在 public_html 中使用自己的 php.ini，但必须对其进行配置，这不是一个好主意。

最好的办法是使用 ISP ini 文件。这应该适用于任何 ISP：

.1 找出您需要的 PHP 版本的 ini 文件的位置。

例如，路径应该类似于`/usr/local/phpNN/lib/php.ini`NN 为 53 的位置。

.2 使用（Bash）SSH 登录到您的站点帐户。`Putty`如果您没有合适的应用程序，您可以下载来执行此操作。

.3 使用如下命令复制对应`php.ini`的主目录：

`cp /usr/local/phpNN/lib/php.ini ~/php.ini`

.4 在 .htaccess 文件的末尾添加`/public_html`：

`AddHandler application/x-httpd-php53 .php`

`SuPHP_ConfigPath /home/MyAccountName`

.5 使用以下代码确认 PHP 版本：

```
<?php phpinfo(); ?> 
```

# jquery - 使用 Div 作为与 jQuery 数据的链接

> ID：13886562
> 
> 赞同：0
> 
> 时间：2012-12-14T21:33:45.733
> 
> 标签：jquery, html

我有一个`<div>`我想用作链接的。

是否使用 JQuery 的`data`方法将我想要链接的 URL 链接到“良好实践”的方式来完成此操作？

在`<div>`嵌套标签上触发点击事件`<a>`开始变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:58:51.147

另一种选择，如果`<a>`嵌套在`<div>`您正在谈论的内部：

```
$('#someDiv').click(function(){
    window.location.href = $(this).find('a').attr('href');
}); 
```

尽管查看更多代码将有助于找到最佳答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:43:22.777

您可以将 a 添加`data-url`到`div`，然后使用 jquery 查看`data-url`单击`div`的内容，然后最后使用将页面导航到该 url`window.location.href = url;`

HTML：

```
<div id="container" data-url="http://google.com">Click me</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

jQuery：

```
​$('#container').click(function() {
   var url = $(this).attr('data-url');
   window.location.href = url; 
)};​​​​​ 
```

查看工作示例 - [http://jsfiddle.net/JfAHp/](http://jsfiddle.net/JfAHp/)

# java - 获取 HttpUrlConnection 输出流时，Java Applet 在 IE 中挂起

> ID：13886565
> 
> 赞同：0
> 
> 时间：2012-12-14T21:33:56.620
> 
> 标签：java, applet, httpurlconnection

我有一个在 Chrome 中工作的签名文件上传器小程序，但在 IE 中运行时似乎挂起。在 IE 中，我可以一次成功上传一个文件（或一组文件），但下次我尝试上传另一个文件时，浏览器冻结，我必须关闭浏览器。当我尝试检索 HttpUrlConnection 对象的输出流时，它似乎正在发生。这是我的代码：

```
public void upload(URL url, URL returnUrl, List<FileIconPanel> files) {
    HttpURLConnection conn = null;

    try {
        conn = (HttpURLConnection) url.openConnection();
        conn.setDoOutput(true);
        conn.setDoInput(true);
        conn.setUseCaches(false);
        conn.setChunkedStreamingMode(1024);
        HttpURLConnection.setFollowRedirects(false);
        conn.setRequestProperty("content-type", "application/zip");
        conn.setRequestMethod("POST");

        //This zip output stream will server as our stream to the server and will zip each file while 
        // it sends it to the server.
        ZipOutputStream out = new ZipOutputStream(conn.getOutputStream());
        for (int i = 0; i < files.size(); i++) {
            //For each file we will create a new entry in the ZIP archive and stream the file into that entry.

            File f = (File) files.get(i).getFile();
            ZipEntry entry = new ZipEntry(f.getName());
            out.putNextEntry(entry);
            InputStream in = new FileInputStream(f);
            int read;
            byte[] buf = new byte[1024];

            while ((read = in.read(buf)) > 0) {
                out.write(buf, 0, read);
            }

            out.closeEntry();
        }

        //Once we are done writing out our stream we will finish building the archive and close the stream.
        out.finish();
        out.close();

        // Now that we have set all the connection parameters and prepared all
        //  the data we are ready to connect to the server.
        conn.connect();

        // read & parse the response
        InputStream is = conn.getInputStream();
        StringBuilder response = new StringBuilder();
        byte[] respBuffer = new byte[4096];
        while (is.read(respBuffer) >= 0) {
            response.append(new String(respBuffer).trim());
        }
        is.close();
    } catch (IOException ioE) {
        ioE.printStackTrace();
        logger.info("An unexpected exception has occurred. Contact your system administrator");
    } catch (Exception e) {
        e.printStackTrace();
        logger.info("An unexpected exception has occurred. Contact your system administrator");
    } finally {
        //Once we are done we want to make sure to disconnect from the server.
        if (conn != null) conn.disconnect();
    }
} 
```

我可以在日志文件中看到它正在冻结这一行：

```
ZipOutputStream out = new ZipOutputStream(conn.getOutputStream()); 
```

我第二次尝试上传文件。此代码在 java 6 下的 IE 中也可以工作。自从我更新到最新版本后，它就出现了这个问题。

在再次使用小程序之前，我是否需要确保关闭某些东西？在过去的两天里，我一直在反对这个。当然希望有人可以帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:10:50.037

我知道发生了什么，但我不知道导致问题的具体细节。我至少想出了一个解决方法...我正在使用 jquery 对话框来显示小程序。我是即时执行此操作的，因此每次打开对话框时，它都会再次构建小程序。这很奇怪，因为我实际上在每次关闭对话框时都删除了包含小程序的 div 元素，所以我认为这会确保旧的小程序实例也被销毁。Chrome 似乎足够聪明，可以摧毁它并创建一个新的（或类似的东西），但 IE 有问题。

# javascript - knockout.js 永远用 chrome 中的大数组渲染 html

> ID：13886568
> 
> 赞同：2
> 
> 时间：2012-12-14T21:34:07.580
> 
> 标签：javascript, google-chrome, knockout.js

我有一个 1406 的数组，其中每个对象都有三个字符串属性。但它永远不会在 Chrome 中呈现，只会冻结页面。它在 IE 中工作得很好。问题来自 push.apply。我正在使用 knockout.js 2.20。为什么这需要永远？我将一项发送到数组中，它工作得很好。淘汰赛不应该能够处理数组中的 1406 个项目吗？

```
 <div data-bind="foreach: powerSchoolCourses">
                            <div data-bind="html: courseName"></div>
                        </div>

    var convertedPowerSchoolCourses = ko.utils.arrayMap(powerSchoolCourses, function (jsonArrayFromService) {
                        return new PowerSchool(item);
                    });
    self.powerSchoolCourses.push.apply(self.powerSchoolCourses, convertedPowerSchoolCourses );

        function PowerSchool(data) {
            var self = this;
            self.courseName = ko.observable(data.courseName);
            self.courseNumber = ko.observable(data.courseNumber);
            self.id = ko.observable(data.id);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:48:57.233

关于这段代码：

```
var convertedPowerSchoolCourses = 
  ko.utils.arrayMap(powerSchoolCourses, function (jsonArrayFromService) {
      return new PowerSchool(item);
}); 
```

我认为您可能给[arrayMap](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)函数提供了错误的参数。第一个参数应该是来自您的服务的原始数据，第二个参数中的函数有一个应该在函数内部使用的参数。所以我认为你真正需要做的是：

```
var convertedPowerSchoolCourses = 
  ko.utils.arrayMap(jsonArrayFromService, function (item) {
      return new PowerSchool(item);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:48:10.730

我应该首先这样做。重新启动我的计算机对 Chrome 做了一些事情。现在工作正常，很抱歉造成混乱。规则 #1 如果出现问题，请务必重新启动计算机。

# php - 我需要更改什么文件才能在我的 magento 站点上配置 xdebug？

> ID：13886571
> 
> 赞同：0
> 
> 时间：2012-12-14T21:34:15.203
> 
> 标签：php, magento, xdebug

我正在尝试设置 xdebug 以与我的 Komodo IDE 一起正常工作。我正在运行一个 Magento 站点，但找不到合适的 php.ini 文件来添加配置信息。我运行了一个 phpinfo 命令并检查了位置，它位于 usr/local/lib/php.ini 上。当我进行研究以找到该文件的位置时，我读到的所有内容都说要远离该文件。

还有那个文件在哪里？它在public_html中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:27:20.693

我建议您使用 NetBeans（使用 Xdebug 非常容易配置）。

你应该在你的`php.ini`：

```
zend_extension=/usr/lib/php5/20100525+lfs/xdebug.so
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000
display_errors = 1 
```

检查路径`/usr/lib/php5/20100525+lfs/xdebug.so`并使用您的路径。

为了获得更好的 Xdebug 体验，我建议您为浏览器使用以下 2 个插件之一：

*   Firefox 的简单 Xdebug -> [https://addons.mozilla.org/en-us/firefox/addon/easy-xdebug/](https://addons.mozilla.org/en-us/firefox/addon/easy-xdebug/)
*   Chrome 的 Xdebug 助手 -> [https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc](https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:08:15.070

是的，这是您需要编辑以启用和配置 xDebug 的文件。人们警告您远离该文件，因为编辑`php.ini`不是新手应该做的事情。但是，配置 xDebug 也不是新手应该做的事情。

只要您备份文件并仅编辑本地副本，就可以了。

# google-sheets - 将包含冒号的数据传递给函数

> ID：13886574
> 
> 赞同：0
> 
> 时间：2012-12-14T21:34:21.473
> 
> 标签：google-sheets

似乎下面 A1 单元格中的冒号混淆了功能。它可能认为这是一个范围选择器。如何修复此功能以使其正常工作？

```
A1: NASDAQ:AAPL

=GoogleFinance(A1, "close", TODAY()-1,  1, 1) 
```

这将返回 #N/A... 如果我将字符串“NASDAQ:AAPL”硬编码为参数 1，它将起作用。如果我在 A1 中只使用 AAPL，它将起作用。在某些情况下，需要交换以使符号唯一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:50:18.590

一个可能的原因是单元格中有错误的空格（可能在文本之前或之后）。

没有这样的空格，我无法重现您的错误。

# html - SWF 拒绝垂直缩放

> ID：13886575
> 
> 赞同：0
> 
> 时间：2012-12-14T21:34:23.757
> 
> 标签：html, flash

我试图在一个简单的 HTML 页面中嵌入一个 SWF，以便它可以缩放以填充浏览器窗口。我没有创建这个 SWF，也没有编辑它的工具，但它做了一些很奇怪的事情——它水平缩放以填充浏览器，但拒绝垂直缩放：

![在此处输入图像描述](../Images/ad79b915b821b2cb72ec43002ba7d30d.png)

这是HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<title>Conforming HTML 4.01 Transitional Template</title>
</head>
<body>

<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="100%" height="100%">
<param name="movie" value="Snow001.swf" />
<param name="quality" value="high" />
<PARAM NAME="SCALE" VALUE="default">
<embed src="Snow001.swf" quality="high" type="application/x-shockwave-flash" width="100%" height="100%" SCALE="default" pluginspage="http://www.macromedia.com/go/getflashplayer" />
</object>

</body>
</html> 
```

我已经盯着这个 HTML 太久了，我看不出它有什么问题。这是我的代码还是 SWF 本身的问题？如果这是 SWF 的问题，我需要让 Flash 人员做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:43:30.703

尝试添加这个 CSS：

```
html, body, object { height: 100%; } 
```

# ios - 从 UITabBar 预加载视图

> ID：13886580
> 
> 赞同：2
> 
> 时间：2012-12-14T21:34:34.827
> 
> 标签：ios, uitabbarcontroller, preload

我有一个加载 UITabBarController 的类。每个选项卡都会打开一个 UINavigationController。

我正在尝试在我的 UINavigationControllers 中预加载视图。我试过这样做：

```
UITabBarController * tabBarController = (UITabBarController *)self.centerController;
NSArray *myViewControllers = tabBarController.viewControllers;
for (UINavigationController *navViewController in myViewControllers)
{
    [navViewController loadView];
} 
```

我尝试了不同的东西，但它永远不会被加载。难道我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T23:51:51.663

谢谢 Or Arbel，您实际上帮助我理解了这个问题。我不得不调用`view`UINavigationController 中的第一个 UIViewController。这是有效的代码：

```
UITabBarController * tabBarController = (UITabBarController *)self.centerController;
NSArray *myViewControllers = tabBarController.viewControllers;
for (UINavigationController *navViewController in myViewControllers)
{
    [[navViewController.viewControllers objectAtIndex:0] view];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-22T22:39:10.840

如果您使用自动布局，则必须告诉视图相应地布局其子视图。

试试这个

```
UITabBarController * tabBarController = (UITabBarController *)self.centerController;
NSArray *myViewControllers = tabBarController.viewControllers;
for (UINavigationController *navViewController in myViewControllers) {
     UIViewController *ctrl = navViewController.topViewController;
     [ctrl.view setNeedsLayout];
     [ctrl.view layoutIfNeeded];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T22:40:13.580

尝试

```
UITabBarController * tabBarController = (UITabBarController *)self.centerController;
NSArray *myViewControllers = tabBarController.viewControllers;
for (UINavigationController *navViewController in myViewControllers)
{
    [navViewController view];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-04T11:48:08.610

```
extension UITabBarController {
    func preload() {
        children.forEach { _ = $0.view }
    }
} 
```

# git - .bashrc 用于使用 GIt

> ID：13886584
> 
> 赞同：0
> 
> 时间：2012-12-14T21:34:42.567
> 
> 标签：git, bash

使用具有这些功能的 git 的 .bashrc 是什么。向您显示大量信息但不会阻止您查看终端或分散您注意力的东西。

我已经尝试过 Ultimate Bashrc 并且我喜欢它，但是我一直在寻找具有更多功能的东西。

它必须具备的条件：

*   当前分支和颜色编码的视图
*   当前登录的用户

此外，如果有一些东西可以与屏幕一起使用，以向您显示您当前所在的屏幕，并且所有打开的屏幕都将真正有助于提高工作效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:50:05.147

我用它来告诉我我在哪个分支上。

```
function git_branch() {
    tmp=$?
    branch=`git branch 2> /dev/null | awk '/\*/ { print substr($0, 3); }'`
    if [ "X$branch" != "X" ]; then
        echo -n "$branch "
    fi
    exit $tmp
}
export PS1="\[\033[1;37m\]\$(git_branch)\[\033[0m\][\u@\h:\w]\$? \\$ " 
```

# javascript - 如何在 mousedown 事件之前获取 selection.range？

> ID：13886585
> 
> 赞同：0
> 
> 时间：2012-12-14T21:34:46.270
> 
> 标签：javascript, jquery, selection, jquery-events, rangy

**我不明白**为什么我不能得到正确的范围对象。我很难解释这个问题。

例如：我有五个 div，每个 div 包含一个短语。从逻辑上讲，如果我在其中一个 div 中触发`mousedown`事件，我可以获得事件目标。好的，这是初级的。

但是，如果我在事件上使用范围对象`mousedown`，则事件目标始终是我单击的，但`range.startContainer`指向前一个 div；

看看这个**[小提琴](http://jsfiddle.net/khela/cqxd4/)**：

* * *

```
 1 LineLineLine
 2 LineLineLineLineLine
 3 LineLineLineLine
 4 LineLineLine
 5 LineLineLineLine 
```

**重现问题的步骤（参见控制台）：**

1.  在第一行按住鼠标按钮（控制台说“未定义” **[*]**）
2.  释放鼠标按钮（范围现在安全地指向第一行）
3.  在第四行按住鼠标按钮（控制台说“第一行”）
4.  控制台显示上一个单击的行

**[*]** *未定义，因为文档还没有范围，但这无关紧要，因为我可以即时创建一个并将他注入到文档中。*

我可以推断出 mousedown 事件是在范围之前执行的。或者不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:52:19.253

我认为您无法在 mousedown 上获得正确的范围，触发器比范围检测更快。您可以使用 mouseup （[演示](http://jsfiddle.net/cqxd4/3/)）：

```
$("div.line").mouseup(setPos); 
```

或者添加一个小延迟（[演示](http://jsfiddle.net/cqxd4/2/)）：

```
$("div.line").mousedown(function() {
    setTimeout(setPos, 4);
}); 
```

# php - 将 JSON 从 iOS 发布到 PHP

> ID：13886590
> 
> 赞同：1
> 
> 时间：2012-12-14T21:35:27.073
> 
> 标签：php, ios, json, post

我一直在尝试通过 php 页面将 JSON 数据从 iOS 应用程序发送到 mySQL 数据库。出于某种原因，我的 POST 数据在 php 页面中不可用。

```
- (IBAction)jsonSet:(id)sender {   
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:@"firstvalue", @"firstkey", @"secondvalue", @"secondkey", nil];
    NSData *result =[NSJSONSerialization dataWithJSONObject:dict options:0 error:&error];
    NSURL *url = [NSURL URLWithString:@"http://shred444.com/testpost.php"];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", jsonRequestData.length] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:jsonRequestData];

    NSURLResponse *response = nil;
    NSError *error = nil;

    NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

我知道 php 页面被调用，并确认写入数据库，

我的 php 文件中的前几行获取 POST 数据

```
<?php
// Put parameters into local variables
$email = $_POST["firstkey"];
... 
```

但由于某种原因，$email 也是一个空字符串。我感觉问题出在 iOS 代码中，因为我可以使用 APIkitchen.com 来测试我的页面并且我可以确认它有效（仅当我排除 Content-type 和 Content-Length 字段时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:40:01.740

PHP 不会将 JSON POST 正文解码为 $_POST 数组（因此您不能使用`$email = $_POST["firstkey"];`）。您需要将传入数据提取到数组（或对象）。PHP文件的代码行：

```
$jsonString = file_get_contents('php://input');
$jsonArray = json_decode($json_string, true); 
```

$jsonArray 将代表您发送的 JSON 结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:30:51.623

似乎有效的是：

```
$handle = fopen('php://input','r');
$jsonInput = fgets($handle);
// Decoding JSON into an Array
$decoded = json_decode($jsonInput,true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T10:15:36.267

瓦莱拉的回答中有一个小错字

```
$jsonString = file_get_contents('php://input');
$jsonArray = json_decode($jsonString, true);

$email = $jsonArray('firstkey'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-23T10:12:36.760

这对我有用：

```
$jsonString = file_get_contents('php://input');
$jsonArray = json_decode($jsonString, true);

// with [] instead of ()
$email = $jsonArray['firstkey']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-19T04:54:45.523

```
<?php

$handle = fopen('php://input','r');
$jsonInput = fgets($handle);
$decoded = json_decode($jsonInput,true);
print_r($decoded['firstkey']);

?> 
```

# css - 动态创建带有渐变的箭头

> ID：13886593
> 
> 赞同：3
> 
> 时间：2012-12-14T21:35:43.407
> 
> 标签：css

如何在 CSS3 中动态生成这样的形状：

![在此处输入图像描述](../Images/391518747cad7a2f45cdabee0d96be99.png)

忽略边界，因为重要的方面是：

```
- The gradient in the arrow body, and that the gradient lasts from the tip to the end of the arrow.
- The length of the square part will vary. 
```

`:after`我尝试了在元素末尾添加三角形的常规方法`div`，但我无法使渐变正确地跨越尖端和主体。

小提琴：http: [//jsfiddle.net/rtuY9/8/](http://jsfiddle.net/rtuY9/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:12:51.397

你可以试试这样的 - [**DEMO**](http://jsfiddle.net/NSS95/1/)

```
div {
    width: 50px;
    height: 100px;
    position: relative;
    margin: 100px;

    background: -webkit-linear-gradient(top, #1e5799 0%,#2989d8 100%);
    background:    -moz-linear-gradient(top, #1e5799 0%, #2989d8 100%);
}

div:after {
    z-index: -1;
    content: "";
    display: block;
    position: absolute;
    left: -125px;
    top: -51px;
    margin: 100px;
    height: 100px;
    width: 100px;
    background: #c00;

    -webkit-transform:rotate( -45deg );
       -moz-transform:rotate( -45deg );
            transform:rotate( -45deg );

    background: -webkit-linear-gradient(45deg, #1e5799 0%, #2989d8 50%, #ffffff 50%, #ffffff 100%);
    background:    -moz-linear-gradient(45deg, #1e5799 0%, #2989d8 50%, #ffffff 50%, #ffffff 100%);
} 
```

# c# - 我正在使用 string.join 将工作中的 .NET 4.0 应用程序转换为 .NET 3.5

> ID：13886596
> 
> 赞同：-5
> 
> 时间：2012-12-14T21:36:04.257
> 
> 标签：c#

我正在将工作中的 .NET 4.0 应用程序转换为 .NET 3.5。请帮帮我这是代码：

```
NameValueCollection qs = new NameValueCollection();
qs["aid"] = "aaa";
qs["fields"] = "1";
qs["aaa"] = "d";

tb.Text = String.Join("&", from item in qs.AllKeys select item + "=" + qs[item]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:41:01.477

.NET 3.5 不包含

[`String.Join(String, IEnumerable<String>)`](http://msdn.microsoft.com/en-us/library/dd783876.aspx)

超载。因此，您必须使用

[`String.Join(String, String[])`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)

超载。要将 an 转换`IEnumerable<String>`为字符串数组，请使用[`ToArray`扩展方法](http://msdn.microsoft.com/en-us/library/bb298736.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:41:35.403

`String.Join`在 .NET 3.5 中不接受`IEnumerable<string>`但确实接受`string[]`. 您可以简单地添加对`ToArray`LINQ 查询的调用：

```
NameValueCollection qs = new NameValueCollection();
qs["aid"] = "aaa";
qs["fields"] = "1";
qs["aaa"] = "d";

tb.Text = String.Join("&", (from item in qs.AllKeys select item + "=" + qs[item]).ToArray()); 
```

# android - Android facebook feed 对话框不显示

> ID：13886598
> 
> 赞同：0
> 
> 时间：2012-12-14T21:36:08.763
> 
> 标签：android, facebook

当我点击按钮时，应用程序停止了。

```
public class MainActivity extends ListActivity {   
        private  Facebook mFacebook;

Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
        dialogButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                postToWall();
            }
        });
        dialog.show();     
    }
 public void postToWall() {
Bundle parameters = new Bundle();
        parameters.putString("description", "description about link");
        parameters.putString("picture","link of picture your want add with share post.");
        parameters.putString("link", "Link you want to share");
        parameters.putString("name","Name of link");
        parameters.putString("caption","describe your caption text");

            mFacebook.dialog(this, "stream.publish", parameters,new DialogListener() {

                @Override   
                public void onFacebookError(FacebookError arg0) {
                }

                public void onError(DialogError arg0) {
                }

                public void onComplete(Bundle arg0) {
                }

                public void onCancel() {
                }
            });
         } 
```

堆栈跟踪：

```
12-14 21:26:11.198: E/AndroidRuntime(1021): FATAL EXCEPTION: main
12-14 21:26:11.198: E/AndroidRuntime(1021): java.lang.NullPointerException
12-14 21:26:11.198: E/AndroidRuntime(1021):     at com.example.imdb.Display.postToWall(Display.java:447)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at com.example.imdb.Display$1.onClick(Display.java:399)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at android.view.View.performClick(View.java:4202)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at android.view.View$PerformClick.run(View.java:17340)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at android.os.Handler.handleCallback(Handler.java:725)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at android.os.Looper.loop(Looper.java:137)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at java.lang.reflect.Method.invokeNative(Native Method)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at java.lang.reflect.Method.invoke(Method.java:511)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-14 21:26:11.198: E/AndroidRuntime(1021):     at dalvik.system.NativeStart.main(Native Method) 
```

此外，还有一条警告说 Facebook 类型的方法 dialog(Context, String, Bundle, Facebook.DialogListener) 已弃用。这有关系吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:49:58.967

您的 mFacebook 对象为空，您应该这样做`mFacebook = new Facebook ("yourappIDString")`。您必须将 appID 传递给构造函数此外，为了回答您的弃用问题，Facebook[消息来源](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Facebook.java)指出

> 新代码应该使用 [Session](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/Session.java)来管理会话状态， 使用[Request](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/Request.java)来发出 API 请求，

因此，如果您想保持合规性，则需要重写一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:37:26.323

mFacebook 可能为空。一探究竟。

# c++ - 链接相互引用的排序类。前锋不起作用

> ID：13886601
> 
> 赞同：-1
> 
> 时间：2012-12-14T21:36:29.277
> 
> 标签：c++, compilation, linker, makefile

我有以下两个课程：

Foo 具有构造函数 Foo(Bar*, int, int)

和 Bar 调用 new Foo(this, int, int)

我认为在 Bar.h 中前向声明 Foo 和/或在 Foo.h 中声明 Bar 可以解决问题。

（返回的错误是 new Foo 上的“未定义引用”）

我正在使用 Clang 进行编译。

目前的链接顺序（但在两种情况下都会发生相同的错误）是 Foo 然后是 Bar。

关于我做错了什么的任何想法？

代码大致如下。不幸的是，我无法显示任何真实的代码片段

```
 #include Bar.h 

 class Bar ; 

 class Foo { 
 public: 
 Foo(Bar* bar, int arg1, int arg2) ; 
 void method1()  {
     I access bar->field here
 } 
```

然后 Bar 的代码是

```
 #include Foo.h 

  class Bar { 
  public:

   Bar() { 
    Cache* cache = new Cache(this, 0, 0) ; 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:44:23.903

它应该看起来像这样（省略包括警卫）：

**foo.h**

```
class Bar;

class Foo {
  public:
    Foo(Bar*, int, int);
}; 
```

**酒吧.h**

```
class Bar {
  public:
    Bar();
}; 
```

**foo.cc**

```
#include "foo.h"
// Note: no need to include bar.h if we're only storing the pointer

Foo::Foo(Bar*, int, int) { ... } 
```

**酒吧.cc**

```
// Note: the opposite order would also work
#include "bar.h"
#include "foo.h"

Bar::Bar() {
  new Foo(this, int, int);
} 
```

如果您从链接器获得“未定义的引用”，则您可能`Foo::Foo`使用与定义它的签名不同的签名声明，或者根本没有定义它，或者没有与它编译成的目标文件链接。

# jquery - jQuery 测验和横向答案

> ID：13886603
> 
> 赞同：1
> 
> 时间：2012-12-14T21:36:32.713
> 
> 标签：jquery

我用 jQuery 制作了一个测验脚本，其中包含一些基于真/假的问题。每个问题有 2 个选择。如果您为问题 1 选择选项 1 的正确答案，它会自动选择选项 2 的错误答案（横向来看，这是合乎逻辑的 - 您不能对单个问题回答 2 次）。

使用我的脚本，我遇到了一个问题，说起来容易，但编码起来更困难：如果我点击问题 1 的正确答案两次，我的分数会增加 2 倍。如果我为同一个问题选择另一个答案（在这种情况下选择 1 为 False），则会出现同样的问题。我可以选择所有答案，但这不合逻辑……</p>

我搜索以“阻止”每个问题的“单击”选项，但我不知道如何。我玩过 vars，但没有说服力。

```
quizz = function(){
  vars = {
     score  : 0,
     scroll : 1
  };

  // Scroll to the next question
  q = {
     next: function(which){
        if (vars.scroll === 1){
           $d.scrollTo(which, 500);
        }
     },
     // If good answer is clicked, increase the score
     score: function(which){
        if (which.hasClass("t")){
           vars.score++;
        }
     }
  };
};

// Init the quizz
quizz();

// On questions click
$(".quizz .r").on("click", function(e){
  var $t = $(this),
      $q = $t.closest(".q"),
      q_ans = $t.attr("class").split("r ")[1],
      q_id = $q.attr("id"),
      ac = "active";

  $t.addClass(ac);
  $q.find("."+ q_ans).addClass(ac);
  q.score($t);

  if (q_id == "q7"){
     e.preventDefault();
  } else {
     q.next($q.next());
  }

  $(".result p").html("Score : "+ vars.score);

   e.preventDefault();
}); 
```

这是我的尝试：http: [//jsfiddle.net/uZQbS/](http://jsfiddle.net/uZQbS/)

如果你有一个想法......提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:45:01.080

这将防止一个正确答案多次增加分数：

```
 // If good answer is clicked, increase the score
     score: function(which){
        if (which.hasClass("t")){
           vars.score++;
           which.removeClass("t"); //added
        }
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:51:07.150

刚刚找到了一个使用*禁用*类的解决方案。

```
// On questions click
$(".quizz .r").on("click", function(e){
    var $t = $(this),
        $q = $t.closest(".q"),
        q_ans = $t.attr("class").split("r ")[1],
        q_id = $q.attr("id"),
        ac = "active";

    if ($q.is(":not(.disable)")){
       $t.addClass(ac);
       $q.find("."+ q_ans).addClass(ac);
       $q.addClass("disable");
       q.score($t);

       if (q_id == "q7"){
          e.preventDefault();
       } else {
          q.next($q.next());
       }

      $(".result p").html("Score : "+ vars.score);
   }

   e.preventDefault();
}); 
```

# d3.js - this.__chart__ 在 d3 选择中指的是什么？

> ID：13886606
> 
> 赞同：1
> 
> 时间：2012-12-14T21:36:35.920
> 
> 标签：d3.js

我一直在[d3.box](https://github.com/d3/d3-plugins/blob/master/box/box.js)和[d3.bullet](https://github.com/d3/d3-plugins/blob/master/bullet/bullet.js)中闲逛。在这两种情况下，当前比例都是使用类似下面的东西来检索的......

```
var x0 = this.__chart__ || d3.scale.linear()
  .domain([0, Infinity])
  .range(x1.range()); 
```

...`x1`当前比例对象在哪里。我意识到这个成语是用来更新箱线图或子弹图的，但有人能解释一下吗？`this.__chart__`指的是什么？规模物体？为什么是有条件的？( `||`) 当当前尺度不可能有这么大的范围时，为什么`x0`的域会覆盖 0 到无穷大的范围？

抱歉，如果我的问题没有明确说明。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:27:41.467

上下文是包含图表的`this`DOM 元素：即`g`元素。将一些变量绑定到 DOM 元素，例如`this.myvar = state`，提供了一种处理图表特定状态的方法。对一个特定图表 g 元素的多次更新调用，将都可以访问同一个变量。

Mike 和 Jason`__chart__`在各种图表以及[d3 轴组件](https://github.com/mbostock/d3/blob/master/src/svg/axis.js)中使用了属性名称，以跟踪图表的特定状态。

没错，在这种情况下，它是存储在 g 元素`__chart__`属性中的比例。请参阅 bullet.js 的摘录：

```
 // Compute the new x-scale.
  var x1 = d3.scale.linear()
      .domain([0, Math.max(rangez[0], markerz[0], measurez[0])])
      .range(reverse ? [width, 0] : [0, width]);

  // Retrieve the old x-scale, if this is an update.
  var x0 = this.__chart__ || d3.scale.linear()
      .domain([0, Infinity])
      .range(x1.range());

  // Stash the new scale.
  this.__chart__ = x1; 
```

`x1`因此，根据当前数据确定比例。它将存储在 中`__chart__`，以供将来使用新数据更新此图表时使用。

The previous scale is taken from `this.__chart__` and kept in `x0`. The `this.__chart__` will return `undefined` when the chart is just being constructed (i.e. the enter phase). In that case `x0` will instead become `d3.scale.linear().domain([0, Infinity]).range(x1.range())`. See [short circuit eval](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Short-Circuit_Evaluation).

The old scale is needed for smooth transition. When new data points are entered, we first want to plot them on the chart using the old scale. After that we will transition all points (new and updated) according to the new scale.

Regarding the [0, Infinity] domain. So, a scale with this domain will only be used when the chart is just constructed. That means it provides a way to setup the initial transition when introducing the chart. A infinite domain with a finite range means that all points are scaled to 0\. So, when the chart is set up, all points will be plotted at 0 and transition to the proper values according the x1 scale.

# hibernate - 何时使用 EntityManager.clear()？

> ID：13886608
> 
> 赞同：48
> 
> 时间：2012-12-14T21:36:49.287
> 
> 标签：hibernate, orm

自定义 JPA 映射器类有一个方法：

```
removeUser()

1\. execute 'DELETE' HQL query to remove user
2\. call getEntityManager().flush();
3\. call getEntityManager().clear(); 
```

如果我理解 clear() 正确，它将从上下文中删除所有持久实体。[-资源](http://www.javabeat.net/2007/04/jpa/)

但是，我也在[这里](http://www.developerfusion.com/article/84945/flush-and-clear-or-mapping-antipatterns/)阅读，

```
you should define clear architecture- and design guidelines about where a 
clear() can be called. 
```

关于何时调用 clear() 的明确指导方针是什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-14T23:25:53.370

文章对此进行了解释。清除实体管理器会清空其关联的缓存，迫使新的数据库查询稍后在事务中执行。使用事务绑定实体管理器时，几乎不需要清除实体管理器。我认为有两个理由要清除：

*   在进行批处理时，为了避免由于长时间的脏检查而导致巨大的缓存占用内存并增加刷新时间
*   当您执行 DML 或 SQL 查询时，它完全绕过实体管理器缓存（如您的示例中所示）。在这种情况下，由于查询，缓存所持有的状态并不能反映数据库中的内容，因此您需要清除缓存以避免这种不一致。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-15T09:49:24.587

是的，这完全取决于平台的架构风格作为文档点。

*   例如，如果在您的应用程序中 EM 是线程关联的，那么事务管理的解决方案之一是实现 Session-Per-Request 模式，该模式在用户请求的每次开始时启动事务，并在请求的每一端提交并清除缓存为了防止脏读。这只是一个简单的例子
*   另一个示例是在 SOA 平台中。对于每个服务也可以在开始时打开一个事务并在最后提交它并清除（如果其他服务使用相同的 EM 并且需要避免脏读）
*   我将重播前两种常见情况 - 批处理一种，并在所有可能的情况下绕过 EM。所以在这种情况下，查询将被迫从 DB 中查询，而不是从缓存中查询。
*   您应该知道您使用的是 L1 和 L2 缓存，而 L1 是 EM 清除的缓存。当您读取大量数据时（应该不是这种情况）（然后还需要在一段时间内进行清除。

如您所见，取决于您平台的案例、架构和风格。直接针对您的方法 - 按方法刷新和清除缓存不是一个好习惯，它是一种反模式方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-30T03:53:46.567

**TL;DR：`EntityManager.clear`如果您要执行一组 JPA 操作，而您不需要大多数已加载的实体，请使用**

我最近遇到了一个性能问题，这[促使我询问如何获得额外的日志记录](https://stackoverflow.com/questions/70512765/is-there-any-logs-i-can-enable-for-spring-data-jpa-to-see-why-it-is-slow-in-tomc)。在我得到答案之前，我发现了如何解决这个问题，并且通过`EntityManager.clear()`.

我使用它的一个用例是隔离可能密集的操作并加载大量实体​​以供实体管理器管理。就我而言，有一个步骤是我执行授权检查。对于其余事务中的大部分业务逻辑，我不需要它会使用的大部分数据（用户配置文件、低级别实体访问检查等）。

我发现即使我不使用它们，它也会在会话的剩余时间内保持不变，即使我的处理已经完成，最终也需要刷新。

通过在`clear`刷新发生之前执行它，它会从实体管理器中释放它们并且不再受管理。

# bash - 管道 curl 输出到电子邮件

> ID：13886609
> 
> 赞同：0
> 
> 时间：2012-12-14T21:36:52.213
> 
> 标签：bash, curl

我想将 curl 命令的输出通过管道传输到电子邮件，但是当我运行此脚本时收到一个空附件文件：

```
#!/bin/bash

STATUS=$(curl -I example.com)

echo $STATUS | mail -s "Test" an@email.com 
```

我也尝试过分组，但这也没有用：

```
#!/bin/bash    
{
curl -I example.com
} | mail -s "Test" an@email.com 
```

操作系统：红帽 6.3

```
# mail -V
12.4 7/29/08 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:42:12.867

假设您的邮件二进制文件是[这个](http://linux.die.net/man/1/mail)，请尝试添加该选项`-a -`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:19:56.917

编辑：

尝试简单

```
curl -SIo /dev/stdout example.com 2>/dev/null | mail -s "Test" an@email.com 
```

好吧，如果是邮件问题。您的描述似乎很奇怪，您使用的是哪个版本的邮件？

或者`sendmail`直接要求：

```
/usr/sbin/sendmail an@email.com < <(
    echo $'From: an@email.com\nTo: an@email.com\nDate: '$(
        env LANG=C date +%c)$'\nSubject: Test'
    echo
    curl -SIo /dev/stdout 2>/dev/null example.com) 
```

你甚至可以构建一些更复杂的工作：

```
MyVar="$(curl -SIo /dev/stdout 2>/dev/null example.com)"
/usr/sbin/sendmail an@email.com < <(
    echo $'From: an@email.com\nTo: an@email.com\nDate: '$(
        env LANG=C date +%c)$'\nSubject: Server resp: '${MyVar%%$'\r'*}
    echo
    echo "$MyVar") 
```

因此，您可以在**主题**中获得初始服务器响应。

这不是*保留* `sendmail`功能！

多年来我一直在使用这种方法，首先是在 下`sendmail`，但是这与我曾经使用过的所有*MTA使用***相同的语法**（即直接调用`../sbin/sendmail`二进制文件或包装器，使用格式化的邮件作为标题 + 空行 + 正文）现在（sendmail、qmail、postfix、exim）。

 ***注意**一些（旧）MTA 抱怨*CR*的存在（或不存在）或`\r`在行尾，也许有些`sed 's/$/\r/'`可以提供帮助。*

# php - 如何在文本输入中显示选项值

> ID：13886611
> 
> 赞同：0
> 
> 时间：2012-12-14T21:37:04.350
> 
> 标签：php, jquery, html

下面我有一个包含四个文本输入的表单：

```
<form id='updateForm'>

        <p><strong>Current Assessment's Date/Start Time:</strong></p>
        <table>
         <tr>
        <th>&nbsp;</th>
        <td><input type='text' id='currentId' name='Idcurrent' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Assessment:</th>
        <td><input type='text' id='currentAssessment' name='Assessmentcurrent' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Date:</th>
        <td><input type='text' id='currentDate' name='Datecurrent' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Start Time:</th>
        <td><input type='text' id='currentTime' name='Timecurrent' readonly='readonly' value=''/> </td>
        </tr>
        </table>    
    </form> 
```

现在在下面我有一个下拉选项：

```
$sessionHTML .= sprintf("<option value='%s' style='color: %s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL; 
```

现在我正在做的是使用下面的代码将下拉菜单中显示的值显示在其相关的文本输入中：

```
$('#sessionsDrop').change( function(){
        if( $(this).val() !== '' ){
            var text = $(this).find('option:selected').text();
            var split = text.split(' - ');
            $('#currentAssessment').val( split[0] );     
            $('#currentDate').val( split[1] );     
            $('#currentTime').val( split[2] );     
        }
    }); 
```

但我遇到的唯一问题是如何显示`<option value='%s' ... $dbSessionId ...`要在文本输入中显示的选项的值`#currentId`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:45:06.590

```
$('#currentId').val($(this).find('option:selected').val()); 
```

# .htaccess - www 到非 www 重定向问题

> ID：13886613
> 
> 赞同：0
> 
> 时间：2012-12-14T21:37:05.647
> 
> 标签：.htaccess, mod-rewrite, redirect

我已经想出了如何将我的所有页面从**example.com**获取到**www.example.com**，但是我发现的任何代码都不能起到完全相​​反的作用。我需要从**www.example.com**转到**example.com**。

这是我的代码。有人可以帮我重写它，让它反其道而行之吗？我进行 404 或无限循环的任何编辑。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} !^$
RewriteRule ^/?(.*) http://www.%{HTTP_HOST}/ [L,R=301,NE] 
```

- - -编辑 - - -

```
Options +MultiViews
RewriteEngine On
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^/?(.*) http://%1/$1 [L,R=301,NE] 
```

-----编辑2-----

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^/?(.*) http://%1/$1 [L,R=301,NE]

Options +MultiViews

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^ /%1.php [L] 
```

我选择了，`Options +MultiViews`因为你给我的是`Options -MultiViews`它总是把我带到“未找到，这里有类似的文件”页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:54:35.200

尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^/?(.*) http://%1/$1 [L,R=301,NE] 
```

* * *

编辑：

为避免与 mod_negotiation 冲突，请尝试在上述规则*之后添加：*

```
Options -MultiViews

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^ /%1.php [L] 
```

# objective-c - 是否可以在使用 UICollectionViewFlowLayout 的 UICollectionView 中交换 2 个单元格？

> ID：13886617
> 
> 赞同：13
> 
> 时间：2012-12-14T21:37:30.820
> 
> 标签：objective-c, uicollectionview

假设我有一个 UICollectionView 使用 UICollectionViewFlowLayout 和以下格式：

```
1 2 3
4 5 6
7 8 9 
```

我触摸单元格 9 并将其拖到单元格 6 上，将单元格 9 移动到单元格 6 所在的位置，将单元格 6 移动到单元格 9 所在的位置：

```
1 2 3
4 5 9
7 8 6 
```

有没有什么方法可以轻松地将单元格 6 移动到单元格 9 所在的位置并为其设置动画，以及将单元格 9 移动到单元格 6 所在的位置并为其设置动画？还是我必须继承 UICollectionViewLayout？如果我必须继承 UICollectionViewLayout，这将如何完成？我已经尝试明确设置单元格的中心

`-(UICollectionViewLayoutAttributes*)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath`

但没有成功。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T19:03:27.637

经过多次头部撞击，我找到的解决方案是使用`moveItemAtIndexPath:toIndexPath`inside of `performBatchUpdates:completion`. 根据以下[文档](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/instm/UICollectionView/performBatchUpdates:completion: "文件")`performBatchUpdates:completion`：

> 如果您想在一个动画操作中插入、删除、重新加载或在集合视图中移动单元格，而不是在几个单独的动画中，您可以使用此方法。使用更新参数中传递的阻塞来指定您要执行的所有操作。

所以，我基本上做的是

```
[self performBatchUpdates:^{
    [self moveItemAtIndexPath:fromIp toIndexPath:toIp];
    [self moveItemAtIndexPath:toIp toIndexPath:fromIp];
} completion:^(BOOL finished) {
    // update data source here
    // e.g [dataSource exchangeObjectAtIndex:fromIp.row withObjectAtIndex:toIp.row];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:48:41.360

您是否尝试过直接使用 moveItemAtIndexPath:toIndexPath: 重新排序项目？

- 确保您实际上重新排序了基础模型集合，以便在您下次完全重新加载时保持更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T11:40:46.370

SWIFT代码：

```
 self.collectionView.performBatchUpdates({
            self.collectionView.moveItem(at: selectedIndexPath, to: targetIndexPath)
            self.collectionView.moveItem(at: targetIndexPath, to: selectedIndexPath)
        }, completion: nil) 
```

# c# - 需要在传递的参数上加载特定的 css

> ID：13886619
> 
> 赞同：0
> 
> 时间：2012-12-14T21:37:36.310
> 
> 标签：c#, css, asp.net-mvc-3

我正在使用来自[Dynamic CSS using Razor Engine](http://www.codeproject.com/Articles/171695/Dynamic-CSS-using-Razor-Engine)的示例，我有以下内容：

这是在我的 _Layout.cshtml 中：

```
<link href="@Url.Action("Index", "Css")" rel="stylesheet" type="text/css" /> 
```

这是我的 CssController：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using RazorEngine;

namespace SuburbanCustPortal.Controllers
{
    public class CssController : Controller
    {
        //
        // GET: /Css/

        public string Index(string id)
        {
          Console.WriteLine("id: " + id);
          Response.ContentType = "text/css";
          return Razor.Parse(System.IO.File.ReadAllText(Server.MapPath("/Content/Site.css")));
        }

    }
} 
```

我的问题出在哪里，我需要在他们第一次访问该站点时传入的 guid (id) 上加载一个特定的 CSS 文件。上面索引中的 id 显示为 null，但它正在加载。

例子：

> mysite.com/account/login/xxxx-xxxx-xxxx-xxxx/

我需要根据该 guid 加载 css。

是否可以从 _Layout.cshtml 中获取该值，或者是否有另一种处理方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:46:18.933

您可以将该 Guid 放入会话中：

账户控制人：

```
public ActionResult LogIn(Guid identifier)
{
     Session["Identifier"] = identifier;
     return View();
} 
```

在布局中：

```
<link href="@Url.Action("Index", "Css", new { id = Session["Identifier"] })" rel="stylesheet" type="text/css" /> 
```

CSS控制器：

```
public string Index(Guid id)
    {
      Console.WriteLine("id: " + id);
      Response.ContentType = "text/css";
      return Razor.Parse(System.IO.File.ReadAllText(Server.MapPath("/Content/Site.css")));
    } 
```

您可以随时从任何控制器更改会话变量

# php - .htaccess 重定向后如何通过 ajax 请求保留 POST 数据？

> ID：13886631
> 
> 赞同：5
> 
> 时间：2012-12-14T21:38:20.490
> 
> 标签：php, apache, .htaccess, mod-rewrite, redirect

**.htacess**

```
RewriteCond %{REQUEST_URI} ^/api/(.+)$
RewriteRule ^api/(.+)$ /index.php?api=%1 [QSA,L] 
```

示例 ajax url 请求：'http://hostname.com/api/ext/list.php?query=de'

我希望能够以这种格式将 url 重定向到以下 index.php?api={requested_filename}¶m1=value1¶m2=value2 ...

因为整个站点是通过 index.php 中的引导过程进行处理的，该过程具有加载配置、模板等的路由部分...

例如，当我尝试使用 jquery 代码时，重定向后 POST 数据会丢失。

```
$.ajax({
            url: '/api/contact.php',
            type: 'POST',
            data: { 
                email: $("#contactEmail").val(),
                name: $("#contactName").val(),
                message: $("#contactMessage").val()
                                // etc ...
            }
}); 
```

我读到您无法在 http 重定向上保留数据。但是所有框架如何避免这种情况呢？我编写了很多代码，每一个都是通过 index.php 引导的，并且 .htaccess 文件中有用于启用漂亮 url 的重写规则。因此，例如在 Yii 中，我会调用带有一些 POST 数据的 url “api/uploads/latests.json”，后端的控制器将接收该数据。我在这里想念什么？

注意：我已经测试了**[P]** mod_rewrite 参数，我认为这个服务器没有启用 mod_proxy。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T21:52:56.833

重写和重定向之间是有区别的。

Rewrite 是一个 apache（和其他服务器）模块，它将遵循一组条件/规则将请求的 url 映射到服务器上的文件（例如：引导程序将所有 url 重写为单个文件，通常是 index.php。mvc 可能将 /model/controller/view uri 映射到调用适当 mvc 文件的 index.php）。

重定向实际上会更改您所在的页面。有人请求页面 A.php，该页面显示“您要查找的内容在 B.php 上”，因此您的浏览器转到 B.php。

重写将保留 post 参数，因为 url 不会改变。重写只会更改被请求的脚本，但对于浏览器来说，页面看起来仍然存在于请求的 url。

重定向不会保留发布参数，因为服务器会将您完全重定向到另一个页面。

您似乎正在尝试做的是重写，而不是重定向。获取 post 参数应该没有问题。

要解决此问题，您如何在 index.php 中检查没有 post 参数？您确定正在调用您期望的控制器吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T21:41:57.060

所有 POST 数据在重定向时都会丢失。没有办法通过 htaccess 重写/重定向规则来保存它。

客户端（我知道的所有主要浏览器）收到的重定向（全部 301,302,303）被视为一个新的 url 来发出 GET 请求。浏览器不会自动将旧的 post 参数附加到该 URL 上——即使重定向的来源是 POST 请求。

我发现的唯一方法是重写内部代码并将 POST 参数转换为 GET 参数并将它们粘贴在新 url 的末尾。然后，在 php 中，您发出标头位置更改（或您选择的库使用的任何重定向调用）：

```
header("Location: http://www.example.com/?my_old_post_args=123"); 
exit; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-28T10:45:00.437

对于任何人有这个问题我有山姆问题，我使用这样的东西

```
RewriteRule ^services/MainService/(.*)$ http://193.9.162.91/mobile-feed/mobile.list.news.images.php?original_request=$1 [R=301,L] 
```

这不适用于 ajax 帖子我必须将 RewriteRule 更改为

```
RewriteRule ^services/MainService/(.*)$ http://193.9.162.91/mobile-feed/mobile.list.news.images.php?original_request=$1 [QSA,L] 
```

这项工作和我拥有的 php 文件中

```
$inputJSON = file_get_contents('php://input');
$input= json_decode( $inputJSON, TRUE ); //convert JSON into array
print_r($input); 
```

# java - 如何让子类返回自己的类型？

> ID：13886632
> 
> 赞同：3
> 
> 时间：2012-12-14T21:38:29.233
> 
> 标签：java, generics

这里我们有多个使用相关语法的自定义查询 DSL。我正在创建一个`AbstractBuilder`，以便所有的共性都可以写在一个地方。问题在于这会导致方法链接出现问题。当我尝试从一个方法链接到`AbstractBuilder`一个子类时，如果不进行强制转换，它就无法工作。

使用这些课程：

```
class AbstractBuilder{
    protected final StringBuilder bldr = new StringBuilder();

    AbstractBuilder addValue( String name, String value ){
        bldr.append( name ).append( '=' ).append( value )append( ',' );
        return this;
    }

    String toString(){
        return bldr.toString();
    }
}

class IntBuilder extends AbstractBuilder{

    IntBuilder addValue( String name, int value ){
        bldr.append( name ).append( '=' ).append( value )append( ',' );
        return this;
    }
} 
```

这有效

```
new IntBuilder().addValue( "age", 12 ).addValue( "name", "Bruce" ).toString();` but `new IntBuilder().addValue( "name", "Bruce" ).addValue( "age", 12 ).toString(); 
```

除非你做出丑陋的演员表，否则不会：

```
((IntBuilder) (new IntBuilder().addValue( "name", "Bruce" ))).addValue( "age", 12 ).toString(); 
```

现在我想我可以重写每个方法并通过调用他们的父母（通过`super.addValue( name, value );`）来实现它们，但这真的很难看。

我怎样才能让每个方法都返回当前类而不是定义它的类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T21:38:29.233

您可以使用泛型来实现这一点。

```
class BaseBuilder<B extends BaseBuilder>{
    protected final StringBuilder bldr = new StringBuilder();
    private Class<B> builderImplementationClass;

    protected BaseBuilder( Class<B> builderImpl ){
        builderImplementationClass = builderImpl;

        if( this.getClass() != builderImpl )
            throw new IllegalStateException( "Should match." );
    }

    B addValue( String name, String value ){
        bldr.append( name ).append( '=' ).append( value )append( ',' );
        return builderImplementationClass.cast( this );
    }

    String toString(){
        return bldr.toString();
    }
}

class IntBuilder extends AbstractBuilder<IntBuilder>{

    public IntBuilder(){
        super( IntBuilder.class );
    }

    IntBuilder addValue( String name, int value ){
        bldr.append( name ).append( '=' ).append( value )append( ',' );
        return this;
    }
} 
```

基本上，您使所有方法都返回一个类型的值，`B`并确保将`B`其设置为您当前的实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:48:21.123

ArtB 的解决方案很好，但您可以使用以下方法使其更简单：

```
private static class AbstractBuilder <T extends AbstractBuilder<T>> {
    protected StringBuilder bldr = new StringBuilder();

    public T addValue( String name, String value ){
        bldr.append( name ).append( '=' ).append( value ).append(',');
        @SuppressWarnings("unchecked")
        T result = (T)this;
        return result;
    }

    public String toString(){
        return bldr.toString();
    }
}

private static class IntBuilder extends AbstractBuilder<IntBuilder> {

    public IntBuilder addValue( String name, int value ){
        bldr.append( name ).append( '=' ).append( value ).append(',');
        return this;
    }
} 
```

注意我还用两个私有 StringBuilder 变量修复了这个错误，这几乎肯定不是你想要的。

# eclipse - ANT 是否打开终端窗口并运行命令？

> ID：13886634
> 
> 赞同：0
> 
> 时间：2012-12-14T21:38:31.113
> 
> 标签：eclipse, ant, terminal, flash-builder

我在 ANT 中有一个命令/可执行文件，它打开然后立即关闭。

```
 <exec executable="${FLEX_HOME}/bin/fdb" spawn="false" >
        <arg line="run '${application}'"/>
    </exec> 
```

我猜它必须与终端一起运行（因为我双击它并且终端是打开的）？我对这种类型的程序不是很熟悉吗？有没有办法让这个程序保持打开状态和/或使用 ANT 向它发送命令？

**更多上下文**
上面的文件“fdb”是对 Flash Player 调试器的引用。编译应用程序后，我尝试使用 fdb 调试应用程序并获取跟踪语句。以下是有关 FD 的更多信息，[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ffb.html#WS2db454920e96a9e51e63e3d11c0bf62063-7ff3](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ffb.html#WS2db454920e96a9e51e63e3d11c0bf62063-7ff3)。

Flash Builder / Eclipse 有一个控制台，如果可以通过它进行输出，它会更好地调试和跟踪，但这可能是另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:36:20.483

无法解决您问题的主要部分，但使用 FB 内置的 ANT 自动将输出发送到 FB 控制台窗口。

您应该能够通过 WINDOW > SHOW VIEW > OTHER... 打开 ANT 视图，然后选择 ANT

# jsf-2 - 使用 Jrebel 和 JSF Mojarra 2.1.7 不反映 xhtml 更改

> ID：13886637
> 
> 赞同：0
> 
> 时间：2012-12-14T21:38:38.123
> 
> 标签：jsf-2, jrebel

Java 更改会立即反映，但 xhtml 页面上的更改不会在页面刷新后显示。

叛逆者.xml

```
<classpath>
    <dir 
        name="${rebel.workspace.path}Projects/test/target/classes">
    </dir>                      
</classpath>
<web>
    <link target="\">
        <dir 
            name="${rebel.workspace.path}Projects/test/src/main/webapp" />
    </link>
</web> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:50:03.253

确保您的目标属性与您的 web 应用程序的上下文根匹配。并且 rebel.xml 存在于您部署的 webapp 中。在这一点上，问题中没有足够的支持细节来提供任何其他建议。

# php - XML xPath 获取父属性，子属性生成一个查询

> ID：13886640
> 
> 赞同：0
> 
> 时间：2012-12-14T21:38:58.867
> 
> 标签：php, xml, xpath

我有这个 XML：

```
 <Parent>
  <Children name='RandomValueIdontKnow'>
   <x>1</x>
   <x>2</x>
   <x>3</x>
   <x>4</x>
  </Children>
 </Parent> 
```

我想在一个查询中获取`Children`的`name`属性值**和**所有的值`x`

到目前为止我尝试了什么..：

```
xpath("Children/@name|x"); 
```

但它只提供了`name`属性值并忽略了`x`值..
我试图`Parent`从 xml 中删除并执行以下查询：

```
xpath("@name|x"); //grabs name's attribute value and all of the x's values 
```

它工作得很好，由于某种原因，当有父母或其他东西时它会停止..这让我有点困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:48:53.560

对于 XPath 1.0，请尝试：

```
(/*/Children/@name|/*/Children/x) 
```

对于 XPath 2.0，请尝试：

```
/*/Children/(@name|x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:48:54.793

`x`不是根节点，所以你必须重复`Children`：

```
"Children/@name|Children/x" 
```

# javascript - 在 JavaScript 中解析 JSON ISO8601

> ID：13886642
> 
> 赞同：3
> 
> 时间：2012-12-14T21:39:12.533
> 
> 标签：javascript, datetime, iso8601

仍在学习 JavaScript 日期处理的细微差别以及某处**看起来**像错误的地方。

使用 .ToUniversalTime()... 从 C# 返回记录就像一个魅力，但是，JavaScript 对返回的某些日期/时间犹豫不决。

好消息：2012-12-14T21:25:44.273Z toLocaleTimeString() 返回下午 2:25:44

坏的：2012-12-14T21:25:44.18Z 返回无效日期

丑陋的：最后的 .18Z 是什么...应该是 .018Z 还是 .180Z？而且，它是 C# 错误还是 JavaScript 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:47:27.643

是的，这是一个 IE9 错误，它在 IE10 中确实有效。但是，您可以使用[Moment.js](http://momentjs.com/)使这项工作始终如一地跨浏览器，是的 - 它确实在 IE9 中工作。

```
// This works in IE10 and Chrome, fails in IE9
alert(new Date("2012-12-14T21:25:44.18Z"));

// This works everywhere
alert(moment("2012-12-14T21:25:44.18Z")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T15:57:19.773

用于`Date.parse`解析 ISO-8601 日期时间。

# php - PHP & XML：xpath 能否在结果中包含命名空间，而不仅仅是在搜索中？

> ID：13886644
> 
> 赞同：0
> 
> 时间：2012-12-14T21:39:34.097
> 
> 标签：php, xml, xpath, namespaces, rss

我有一个包含名称空间的 RSS 提要。我需要在结果中显示命名空间信息以及常规节点。我正在尝试 xpath，但现在卡住了，似乎无法找到满足我需要的答案（或者至少是我理解的答案——他们可能正在回答我的问题，但我不明白。）

这是我的 RSS 提要（进行了一些编辑以删除多余的节点）：

```
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
<channel>
   <item>
      <title>...</title>
      <link>...</link>
      <description>...</description>
      <author>...</author>
      <pubDate>05/14/2008</pubDate>
         <media:content url="http://www.url.com">
            <media:title>...</media:title>
         </media:content>
   </item>
   <item>
      <title>...</title>
      <link>...</link>
      <description>...</description>
      <author>...</author>
      <pubDate>06/17/2008</pubDate>
         <media:content url="http://www.url.com">
            <media:title>...</media:title>
         </media:content>
   </item>
</channel> 
```

这是到目前为止的代码：

```
if (file_exists($filePath)) {
    $items = simplexml_load_file($filePath);
    $items->registerXPathNamespace("media","http://search.yahoo.com/mrss/");
    $items = $items->xpath('//item');
    usort($items, "toSort"); // sorts using an included function

    // output the file
    foreach($items as $item) {
        echo '<div class="grayBx">';
        echo $item->content->attributes()->url;
        echo '<h2>' . $item->title . '</h2>';
        echo '<p>' . $item->description . '</p>';
        echo '<p><a href="' . $item->link . '">read more &gt;&gt;</a></p>';
        echo '</div>';
        echo '<div class="clearBoth">&nbsp;</div>';
    }
} 
```

现在，据我了解，xpath 将 simplexml_load_file 更改为数组类型，并且在大多数情况下也可以更轻松/更快地进行搜索。问题是，当我使用 xPath 时，它会从结果中删除 media: 命名空间，而 media 结果是缩略图的存储位置，我需要在页面上显示图像。

我被困住了，我不确定这是否是正确的道路。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:02:51.203

您需要获取`SimpleXMLElement::children`允许您传递命名空间的命名空间元素：

```
foreach($items as $item) {
    // media is an array with the media:* children of the item (ie media:content)
    $media = $item->children('http://search.yahoo.com/mrss/');
    echo '<div class="grayBx">';
    echo $media[0]->attributes()->url; // media:content->attrinutes()->url
    echo '<h2>' . $item->title . '</h2>';
    echo '<p>' . $item->description . '</p>';
    echo '<p><a href="' . $item->link . '">read more &gt;&gt;</a></p>';
    echo '</div>';
    echo '<div class="clearBoth">&nbsp;</div>';
} 
```

# encryption - 在公共存储库中使用 Travis-CI 构建通知挂钩保持 API 密钥完整性

> ID：13886645
> 
> 赞同：11
> 
> 时间：2012-12-14T21:39:39.880
> 
> 标签：encryption, continuous-integration, environment-variables, yaml, travis-ci

## 上下文：

我已经[开源了一个](https://github.com/excellenteasy/grunt-pathfinder)由 Travis-CI 测试的存储库。Travis 为测试运行提供了[构建通知](http://about.travis-ci.org/docs/user/notifications/)挂钩，因此您可以在 IRC、Flowdock、Campfire 和 HipChat 中获得通知。要配置这些钩子，您必须将设置添加到您的`.travis.yml`配置文件中，该文件是公开的。对于 Hipchat，它看起来像这样：

```
notifications:
  hipchat: [api token]@[room name] 
```

如果我只是将我的令牌以纯文本形式放在那里，每个人都可以看到我的 API 令牌并访问/发送垃圾邮件我的聊天室。这就是 Travis 添加[安全环境变量](http://about.travis-ci.org/docs/user/build-configuration/#Secure-environment-variables)的原因。基本上，您可以使用您的密钥加密字符串并将它们专门绑定到存储库，因此 Travis 可以访问秘密 API 密钥。

你在本地做什么：

```
gem install travis
travis encrypt github-user/repo MY_SECRET_ENV=super_secret 
```

你投入了什么`.travis.yml`

```
secure: <encrypted string here> 
```

## 问题：

不幸的是，文档并不过分冗长，谷歌没有帮助，stackoverflow 也没有帮助**，**我无法让它工作。

[这是我的第一次尝试](https://github.com/excellenteasy/grunt-pathfinder/blob/28a75631ba89af2519b14bfc51dcf06377b38353/.travis.yml#L8)：

`travis encrypt github-user/repo HIPCHAT=super_secret`

```
secure: <encrypted string here>
notifications:
  hipchat: <%= ENV['HIPCHAT'] %>@hipchat-room 
```

由于这不起作用，我去了freenode上的travis irc，[这就是他们的建议](https://github.com/excellenteasy/grunt-pathfinder/blob/a553ec2da2081a37dbc043e9d6dd08fb6acdbe8a/.travis.yml#L8)

`travis encrypt github-user/repo key@hipchat-room`

```
notifications:
  hipchat:
    secure: <encrypted string here> 
```

正如您可能已经猜到的（为什么我要再次写这个问题？）这也不起作用。我希望你能帮我解决这个问题。非常感谢

编辑：我很怀疑自己。我对 API 密钥进行了三次检查，它正在工作。这取决于特拉维斯。

2编辑：因为这似乎是一个错误，这里是相应的[GitHub 问题](https://github.com/travis-ci/travis-core/issues/157)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:56:01.120

斯蒂芬，

你能试试这个：

```
notifications:
  hipchat:
    - secure: "encrypted string" 
```

如果你不想弄乱你的提交历史，你可以将它推送到一个单独的分支上，Travis 应该为你测试那个分支。

——亨里克

# c# - 如何从c#中另一个线程上的方法获取结果

> ID：13886652
> 
> 赞同：1
> 
> 时间：2012-12-14T21:40:09.800
> 
> 标签：c#, asynchronous, invoke

我在这里很困惑，不确定框架（4.0）是否支持我迄今为止在网上找到的一些答案。

我有以下结构

```
public class Form1() 
{

    public int GenerateID(OtherThreadObj oto)
    {
       int result;
       if (this.InvokeRequired)
                {
                    return (int)this.Invoke((MethodInvoker)delegate { GenerateIDSafe(oto); });
                // now this doesn't work obviously. I was looking at .begininvoke, end, etc and got really lost there

                }
                else
                {
               return   GenerateIDSafe(oto);
                }
    }

    private int GenerateIDSafe(OtherThreadObj oto)
    {

    return oto.id.ToSuperID(); // Assume ToSuperID some extension method.

    }

    } 
```

现在的想法是从另一个线程调用生成 ID 并获取该返回值。

```
 public class OtherThreadObj 
    {

    private Form1 parentform;

    private int GetSuperID()
    {

    return parentform.GenerateID(this);

    }
    } 
```

很明显，上述内容并不好，因为我没有在.Invoke 上得到正确的回报。我完全不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:00:23.387

你几乎在那里：

```
public int GenerateID(OtherThreadObj oto)
{
    int result;
    this.Invoke((MethodInvoker)delegate { result = GenerateIDSafe(oto); });
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:01:12.600

使用回调函数或委托。这是一个在异步处理完成后传递给另一个函数以调用的函数。

在下面的示例中，GetMeValue 异步调用 GetValue，而 GotTheValue 用于回调。组织事物的更​​好方法是将回调直接传递给 GetValue 并让它异步运行。例如，如果您正在寻找更好的示例，Silverlight 中的网络就是这种情况。

更好的方法是了解 C# 中的“异步”运算符

```
public class Producer{ 
    public static int GetValue(){
    //... long running operation
    }
}

public class FormConsumer{

   public void GetMeValue(){
       int v = 0;
       // setting up for async call
       Action asyncCall = () => { v = Producer.GetValue();};

       // this is the delegate that will be called when async call is done
       AsyncCallback = (acbk)=> {
            this.Invoke((MethodInvoker)delegate{ 
                GotTheValue(v)
            });
       };

       // execute the call asynchronously
       asyncCall.BeginInvoke(acbk, null); 
   }

   public void GotTheValue(int v){
     // this gets called on UI thread 
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:04:48.983

在 .net 4.0 中，您可以使用任务并行库[(TPL)](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，这使得多线程比以前的范例容易得多。下面的代码在不同的线程上运行方法“GenerateID”。然后我得到结果并将其显示在我的主线程上。

```
using System.Threading.Tasks;

namespace Console
{
    class Program
    {
        static void Main(string[] args)
        {
            Task<int> task = Task<int>.Factory.StartNew(() =>
                {
                    return GenerateID();
                 });

            int result = task.Result;

            System.Console.WriteLine(result.ToString());

            System.Console.ReadLine();
        }

        static private int GenerateID()
        {
            return 123;
        }
    }
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T22:09:20.280

或者另一个说明清楚的例子：

```
void do_access ()
{
   if (ctrl.InvokeRequired) {      
      ctrl.Invoke (new MethodInvoker (do_access));
      return;
   }
   ctrl.Text = "Hello World!";
} 
```

# javascript - 如何在 Internet Explorer 9 中使用 JSON.parse 和 json2.js？

> ID：13886653
> 
> 赞同：1
> 
> 时间：2012-12-14T21:40:20.640
> 
> 标签：javascript, jquery, ajax, jquery-forms-plugin

我正在使用 JSON.parse 将 JSON 字符串转换为 JSON 对象。它适用于 Google Chrome、Firefox、Opera 和 Safari，但不适用于 IE9。每次我使用 JSON.parse Internet Explorer 都会引发“SCRIPT1014：无效字符”错误。我已将 json2.js 包含在脚本中，因为 IE8 不支持 JSON.parse，但它仍然有效，但无济于事。我怎样才能使这项工作？

```
function run() {
        $("#testing").ajaxSubmit({
            success: function (data) {
                console.log(data);
                var parsedjson = JSON.parse(data);
                var truejson = parsedjson[0];
            }
        });
    }

LOG: <pre>[{"group":null,"name":"lion.jpg","type":"image/png","size":5269,"progress":"1.0","url":"/Upload/UploadHandler.ashx?f=lion.jpg","thumbnail_url":"data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBhQSERQUExMWFRQWFxcZGRgYGBgaGxwiGxodGhwaHBoYHCYfHRojGhgYHy8iIycpLCwsGiAxNTAqNSYsLCkBCQoKDgwOGg8PGiwkHyQsLCwvLCksLCksLCwsKSwsLCwsLCwsLCksLCwsLCwsLCwsKSwsLCwsLCwsLCwsLCksLP/AABEIAIAAsAMBIgACEQEDEQH/xAAbAAADAQEBAQEAAAAAAAAAAAAEBQYDAgcAAf/EADoQAAECBAQDBwIFAwQDAQAAAAECEQADITEEEkFRBWFxEyIygZGh8AaxQsHR4fEUUnIjJGKSM4KiB//EABkBAAMBAQEAAAAAAAAAAAAAAAECAwAEBv/EACARAAICAgIDAQEAAAAAAAAAAAABAhEhMQMSIkFRYRP/2gAMAwEAAhEDEQA/ACZp7iNiYxGABWV2ozQWlDkA2SI1AjzkUhkcoUCovt6x0hLg6c4/FSqEgWFI7C2FKlrCKxdhRh2JfyB1Ni0dKTsHFDByZamSrKwIIdSkpfmHLkQPijOQCRKBTvmp5kO3nCyTSwN0l8AsdhFKKQK6wwwPDOzSsu+f25QIvGzAM+VFq39iI4TxYmgI3sT8MIo07D/KYwmquBGa8WnDI7QgqUSQhCaFRAc10SBcx9KCblR6UHrC7jM1aly+zsUkpbqx+wL8o6IqtjRg1s0xXHMYUpJXLkJIUoplpD2NFLU5NqGlTCvgv1f/AFU5WHUwUlCj2tO9lZ3ajtV4Bx301Om+OarXu7/ABAHBvovsp2ZKlLNnFEj+4u9WS7CzttF+0GnY9SvBc4IdqCgF5KTUv4y9v8R72ihlSXYBm0YM3Lp0gfgsiXkNGTLS4SzOHYHdqVhYv6gUFqJbKmrM1BfpSkc/ZKmytfCplS2alGvfWrfeNkp0/KBMLjEqAIJa7/NXgpM6uoF/nKn3jtilRBs/Qmpe3X2PKMZxa+w+bXr5R3ip+o6/B7Qtm8RBUz9CD79HjSaRkc4tlAhtCPTT84nwoguovz05dGeG2IxV6hjq/OsLZUutnDneod/S0cnI7ZaITIxArr6Fv0rHySWNdOt+kY4ZgrVi5/do3Bb4LW9XMBBE8zGk1zIfVnMbJSTXtNKskawi4hICXUCzMKdYNwuJ7v7xPWhVxw+DVMtBfMpSgLgm/SNsOUrKAAEpcAgczV/KAUK7pEZYbFMQx1Ig2OklocozTFrWuYJaHauU1NAhKSk6Dy0eP2fLMohSC4F8pyqY7AkD2gGZL7VJy5ql1NQJUB4noBQk7wt4B9Oq7Y4jtlCUCfxZs7XDk0HPrGSTWTeykCBPltlSki5ys77hNHDPaFyuAyZSiQMyu8zrUTQPYMG+0NMGkqUlSg0smgY0DeIkcn9o7xaUIIDAFRdjUut2rza3KloKtIOGweTgRNl5VIAGjXpV/MN0eM+IfT5SkZFgdk+XMGcGtT0+8N0qR2dCBmzAEMGyioHMiF2N4spCTlDsCQKFwL+v3imBWiJm8TWe4xKnyBzWps40fTlFbhZCZKAmoIT73+w9ojeBArnS3aiVTS4/EajyGYxRYzGXqFJs4Pn5becTf0KN18UKcRMQbLlSMtGtmcF7OST5RNfVXEDhsQjKxM7KoAMeXeFbkOzecG8UnJU0+TXMADl0KS+U/wDKlmh1O4bLxcsulIKkZQopqHFO8GOrHpGTSn5Cu2sHfCuOqXKyrqzEGzFwAzmgqNRDdGMUQApXe0qaEXFnvyhVwzgKZMzIpa5gyZTmQkBiGY5aRRI4OGT4tGIv+sW47poWf0VYvGzCpk3ahFQ+19dv1hSuTMzMo6OH1B57jpFTicMAFDW/z2+CF80AmvX93+VgTs0UIlzCHLludOojXCT3lknc+nneNsZLSHIB9YE4ZIUJUxxdZI5Wp9zEGVRsiYCu27Pr8eCVrLUbpXzhelGU01/hvaCZcx672MPFitA03CJZlWqA7bwuODCVd38J0dveHMzCLygkhYNlDnVjzAo+sDFILpIpT48AIOkkFiGezfLRjiBlUDq+lPUQdOKS6bkCkLp0xRKQDTnGMMuF40jMLpXeluYfWHkmWEyasQAWFgfhMKMMGbQesGYefnUJRAYu1upjLJhJx3hE84gzpPbTMqUkNOI7IpPeZGZI7NVFAkENmSRFSpCVkK8QClkG9MxCT/11EC8UwQFPwkimrA1fcaM+8fkye1KMBDyfZJMVKnZP8enz5hTKlJnLCjNUoSnBSgAJS8xNQFLzO1WS2pjjhqlyJKTNnqmkKIyKUF5UlVEBd1KAvUgOwNIMkyXXMSk5c5FdMwT+Ia0e9qefPEsECMqyCxDqbwiwr1aN28VEFZsneFdzFKQmzrQHNAxBS/kWh9PwZmISlaaAlwn7A7xJ4Zf+6B0VOWN/wt+Qi4XP7iQpLkAs2jNvXygSWTRYDKXh8yCJDd5LkDR6uGu1Ibyp6R3ElRBcOQQdwW5VEL5RWpZUgsbEM7u9SHq0MZQWuhASkqCi1wKFujgmFcfYVIZ4OaVrclwO6Kbc9Q7xQ4WYCBCzAzEAsAK/BByEMe75gR0ceBJH7xfDujOm6HJ1cahukSs/GJSaaVHQmgr5xVrnsO9r9jHjP1JLmCesFZYKUGegqwB8hA5a2aLKzFcSTVSi9QAOf8wwRJZgPPyFfePKxPUCK2UDU7VEen8Kx3ay0KDOwChsTcxHrY6lR8cHV2/nbn+0dGTUDRt605w2mS6BzaBWFDc1P7QFGmM3Z2QZUsFI5cmhWopm1QMpetKGsMVKKpZLd4j5cQDNm5ACBs/7QZ4BHIox8opVUAVfkehF4/OHSMy1KJguswKKwMgsNd3B0LesfYWVlFNWIbn9jyhLGo0xBygm5+aQHhp3eBdiKuf05RrPnMS9OusfuENQVCgLsbRRCso5uBMxKV/3VYuzvRRA5kGleW0tjfqjECd/TDh6O3UzHtFdmRqsHK/ZjcnleHfD+KLmzgBMSL0UO6qlBSoNmaCcVwjEHEJmmch0gpCRLATVswLlzVI1DNHRBJkZNizB8BUCkLPeBBUUg946qA0AcAZiKMTCX6mxolpXcZjmqzsLWOt67w2+rZOJCBlnoQNQhwpW5BNiNucRnF1zZhZaitrOBQNE2orYezehdgitUhM0JGYTVKSasWUSAd66xb8OkmZKSa1YsTUPoekTWHnp/pRKcBTtlAa71H7c4cyMYTJR2Y7zJIOYCqRlIrcFr6NWJzdvAY4Q/wALhW8RszAH8o3WAgufCdX9iOsR8j62UcRLw5kLQvNlJGVbOCzZWpclmimVikKl5gtKszgse6WqS1060NXDQzTishTvQwRjsiw9N+nXo1oeoxTgbRB8M4avtDlW6CygCSbfh3ZotcIlKk90MBvRv2g8creDSWMny5nOlfSPIuNcQM2bMVQlayQPOntHpvH05MPMLsSki+9PzjyfiSQLWHysbk3QFoHl4Wve9BFX9IcTTLnIluwXTqTY+0SgUpQpbeMsPjFS56CksQxfT5+kLFeQbPblSmSQakwDjmSHPtC3C/WEpaQFqCFAVc09d42xmIBIr68/nvB5K9BizefjXYVANnArGWILiia8+m5vGv8ASFSnLFreWnrGuJFW2t+kJTayG0hOnCrDqUp9WAZI67iMpKAZCkSy60glJdnIFvMUhvJxDKal4wxnDwmZ2qKf3JFv8hzEDr8CnZMDiSZhSczLY90tUOzjzpvBP9SQLjM38QH9UcAStfdYL8QZw42LUCgXDwhwE2cFFCisGgGa4csCD/b6xZJMk20OlYuZmSkOV0IAbWzH/rFNwjjS86Emb2ge97A+YYt66RKy8MM65ylljTszlOWo7tQzHSrgWcxgjiy+0KQUkhLsXsliagk2qzqbnDpNLAjZ6XPwvbpLCoNC0Ss3AArKctvl4uuEEGSlQ1D+t/eA52ABLjcxOUG1ZRNHn3GOEBMugZRdjt0jf6WJXIUgtmS7B71v7X584d8XwGdRfwpBfazwjwiAiYUqAIIBAO/9vmOekST9DNBmHwGTGTZo7i1IAdNi6WKq0zEsf/XnAsv6fUC8pdSXbLzu4OvIQ3mZFgKSUrUKps4NDpqI64DxAKCjMcOT3gGf/JhVQiksipDLBYLIqSV+MOAACAQdW02EU2Hw9CDZT089aQqlKzAG5uDq20E8U+p5OCl9piF5UuwoSSSHYAcofgikzcjFv16jLhiDR1J5bn8o8l4iglh/9b9Y9P47xuTxDATFyFBRlFK7gM1wof4qJjy+fMYkHUluTcoedWKtHysWAlmBb56wtwy3xCNiR594GNsRJpmS5Deh/SMcGvNMA2H3LQiVJsN2NcQkOpw5c1OpcvaG2InLUiSUqPeQlwajMnuu2hoIVTTUtqS3nr94c8LdUkAh8kz2XUe4MRQ5dqxDWYB1Vv8AaogYzXFDqDSg9fKFWJxde8jxPbRnu1ukbTZmWWQL0eh1BYbwzkAIRLYk257R2stRdQQ3V+cC4WeokAgjMRf2FrgvDiWpwdjX5qfKMETTsI7IJtVCv5OlvSPw4FJQxGhAIoRyB2cjzhqcMlThOVxY33N9By5QFNm9yxD7io/kxtAbsQzpZlh6lFUqqU0NS4DjMaMRtasKcDhHmkprmTVqAhJFg1D4TXc2iqmofupoKuf55fYwBh8AElZIdkmovcBnvqPSGc8COJXfTfFM+GQzOHSpq1vfet4KXigmhtSo3if+nMAMMicEqVlKknIUtlFQVAsHrGMzGTElgcwWagaAMBXfxUhu5qHOLUlaWCav8rrEtxPCJzHtDTQDRhyirw6kzEJVb5bygDFYIKc6/tCTh7QVITcPMuYkWfqx0v1rC+RiVSitnVKKnzsogEttzIFIwUhSJhSAUAHumrUpXnV4BVxZZnBKUZUBEyWtZB72c5goJpRKw4aveMaK7Bbo9I4djtLBLAaOb5Rq7CJz/wDUEf1GHkIK0oTnLuCo0H4UodRI5XjHAcdyBnSGCUgAsz+K+pIYbON4F4mlM1fiAXLzZhMQQakggTEHM7aHbWrPCVUwNWhr9G/SCJODnFKs0ybKW4qBZ0gBTEFmod4gOJBQZ3BCjfoKR6LhuLBGHyJ8TAVqGIqHsesSnGkBRSlR/Gls1b0YG/KDd5B+CXhct1MT3QRVw4fZ4+xGCSiYSk28Q6PVhbWkMsHhsi1AUANAbgaAuGJqQ7jUQDjZxLgKSkuTUAFvK/nfSNswThFgnMWCafnQDen3h39O/wDkmMXCkOG/4qBFNKH3icQhKUOCrNe7gnWlvSKH6Sw61LM3L/pBJQS4opQcAh3q22kT6/B0yuxWDSok9HOwL160t0gaXhx2OYEsouT0ewNGdhGqMaDKWpj/AKqipOoCSQEvR6BtN4OxksJ7OUljkqabV6O4hXTVixdgkiSA738O9qm1NY3zFNSNqkv6GAlYlmAA6g6vXlUnWBuLTSJRdRQDqatXXqNQ8azSdHcrjCXURcEDVNzpvtT9IDxnFEJUpKh4Aklrf3s/nVr20MC4TAFKkE1fw1snK5UA4qQ4GwrciC14RJWs/wBykBQIepYdTQEjSBdmPzDzFFki5VR9S1SN3OkVPC8EhBYaa3PU71foIm5uZKQoUqouCGvTo/6weCcqEFSiStIWHY5QkkpflQdVQZPQbKEKzS1KNQaN0fTf9oVYnCpS80jwhj0Ykk9KneDsOkdkkM1XYW29A33gWfKVldVQVAq2YF0hv8mfkIp6MTQVOSErBuVky6d22VPJQF+ZMNk4pMxBDhxdzTofm0Y41Xc7l8ygQet+toXJUUMFOK95nNfwnlr6RloShl2WZCkksoMczDWn5GsTmFwIUpTWzlnZ9B6Xil4dhz2U5dCSEgkjYKp1hWjKh2LkZjozt8MRk6K0LP6YBZahJNVVFakFo+mycyxV1OVKUaEmwNLV9GhklHczhKas5VYVYMNSTHYSDNqHKWQaMH8R9H+8FNhMkYWqSR/yNNYU4mWVrGQM6sxOgrQc+kVC5bjvDl5RjhsGSDTzNv5aGk6QqViJfDAaLdXi5AO5YAWNq9YW4/ANZPUm/S9utmiuk4Q5HAuWG/X7wp4phgAH5WrVucSU2O4omk8OKsxAqlg2tTZtI1T2kheUkoWGoD4tRyLF4b4FFQGYvQPr/wBSx5RhxTBdqrMVEULnZjQUsL15xdaJllw7Ch0KPhQTlS/iPiA9VH0jrFYjMV5O9o76k+w/Q711xP8AppF3rbUkBh7NSBexZCQL1c1Y3qTzJiTxgmmkjlCGUVNQ7UIYORtt6xkpBOZS2YkhKWuXN0ksQGGznzjGRMdR7RXcWpIS1CWqQDzYDyMacOkqV35hdRcBrACmUDZobZpSs3wvDyVFS1FRNA+7t6lz6wYB3jfMQrTQUHsY+TPAqNCOfP7D3juQh0s5LsK+cZYwjJ4O5eGTVRtb9A7dPSEkudlmFdAlyBzUosS+9Egc2h5PFMo5fGhRxGSkKlhVkqQpjYkVApzLwJ+gdimIAQl3okaa1BHrAuNxORAoSFPfQivlGmKxJC/Ef9QAkNRxcjbukehgSctqEkuSXUzCKjdhTPmkhxdz0q1TuH+bhTcSkuK5k1FGynLmPrRwTTrG3EZx7JIQQCVnvAUHh5OD3vEz0o0YcQAKFIyuyWd9VtztlNdKQPwWxlwJf+ySqhEyYopD6Cj3sVA7wMVXQoMS4cCz0vDbFy0ISJaQyUICAEj+23KtS8C9ooEHK7pHiorqTvE5q2XWj6XhlIRVQAAer3FQK2H7RhIWXKiAVEknWtBqBVi0dcYmJlSn/EVNetufx4+4XNBQGb7avDqJNythK8KSXJJFO6AwGvwxrhJ3eKdAPej/AJR+zV9z38h+UL5GHUlRJPcIpWtfsBGqjdxhMGZFO6MzeQLfPOBMdwsKUGDBNX+8FKmgSh3vwku4qd36uIJd0ps+oGtnblSFcTf0E83CnNqNA1Wb5WBcXIIQQARRyXyg8qacobY9WQJDsonX7UhNNmJrmWVCxAqL2feGDeD/2Q==","delete_url":"/Upload/UploadHandler.ashx?f=lion.jpg","delete_type":"DELETE","error":null}]</pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:56:25.367

答案是删除围绕返回的 json 字符串的“pre”标签，因为 Internet Explorer 会抛出这些标签以保留文本的结构。表单插件确实适用于 Internet Explorer，但仅适用于相同域的情况。不幸的是，IE9 不支持 CORS。通过这样做解决了这个问题......

```
function imageUploader() {
        $("#testing").ajaxSubmit({
            success: function (data) {
                if (jQuery.browser.msie == true) {
                    var newdata = data.replace('<pre>', '');
                    var newdata2 = newdata.replace('</pre>', '');
                    var parsedjson = JSON.parse(newdata2);
                    var truejson = parsedjson[0];
                    var image = "<img src=" + truejson.thumbnail_url + " alt=" + truejson.name + "/>";
                    $("div#previewIe").html(image);
                } else {
                    var parsedjson = JSON.parse(data);
                    var truejson = parsedjson[0];
                    var image = "<img src=" + truejson.thumbnail_url + " alt=" + truejson.name + "/>";
                    $("div#previewIe").html(image);
                }
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:23:07.250

您正在使用 jQuery 表单插件。正如 Kyle 所说，json2.js 在这里是无关紧要的。

IE9[不支持通过 ajax 提交文件](http://caniuse.com/xhr2)。

因此，jQuery Form Plugin 将表单提交到隐藏的 iframe 作为一种解决方法，[这有其局限性](http://www.malsup.com/jquery/form/#file-upload)。这些限制就是您遇到的问题。

> 如果响应类型是 HTML 或 XML，这很好，但如果响应类型是脚本或 JSON，则效果不佳，这两种类型通常都包含在 HTML 标记中找到时需要使用实体引用来表示的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T01:58:19.920

**jQuery.browser**该属性在 jQuery 1.9 中被删除，只能通过 jQuery.migrate 插件使用。请尝试改用特征检测。

见：[http ://api.jquery.com/jquery.browser/](http://api.jquery.com/jquery.browser/)

# azure - Umbraco 部署到 Windows azure

> ID：13886656
> 
> 赞同：3
> 
> 时间：2012-12-14T21:40:39.377
> 
> 标签：azure, umbraco

我有一个使用 SQL CE 数据库在本地创建的新 Umbraco 4.9 站点，现在我希望将所有内容推送到 Windows azure。有人可以建议一种简单的方法来完成这项任务吗？我还想在本地继续开发，并在需要时尽可能轻松地推动 Azure。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:58:40.570

最简单的方法是 AZURE 网站。

一个共享主机，您可以在 Team Foundation Server 或 Visual Studio 中连续使用。

这是一个详细的说明帖子，您如何做到这一点：

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/26/deploying-windows-azure-website-using-visual-studio-web-publish-wizard.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/26/deploying-windows-azure-website-using-visual-studio-web-publish-wizard.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:09:50.743

这里的关键是将数据库结构和数据移动到服务器。我只做过一次，如果我不得不再做一次，我会寻找一种不那么乏味、更自动化的方法来做。但是，我是使用 Azure 数据库管理器的查询窗口完成的，唯一的障碍是查询大小限制。

*   首先，我使用 SQL Management Studio 为数据库生成了减去数据的脚本——这是一个相对较小的原始文本，支持浏览器的 SQL 管理查询窗口可以处理这个问题。
*   其次，数据。我再次为数据库生成了脚本，但跳过了 CREATES，这次备份了输出中的数据。当您意识到数据库中已经存在的东西（在本地开发之后，行版本和日志被轻率地创建）数量超过 Azure 面板可以处理时，就会出现问题。
    *   所以，为了克服这个问题，扫描生成的脚本（如果你有完整的备份，或者使用 SQL 来操作数据库数据），并在你认为合适的时候删除一堆不必要的记录——像 Umbraco 日志表一样清空它，并保存历史记录模板等等。

现在这很丑陋，当时是 hack 和 slash 的进步，但它让我到了部署的地步，从那以后我就不必这样做了，因此没有对改进过程进行真正的调查。

# jquery - 设置 jQuery .css 函数时遇到一些问题

> ID：13886657
> 
> 赞同：2
> 
> 时间：2012-12-14T21:40:43.877
> 
> 标签：jquery, css, vbulletin

我正在尝试创建一个 jQuery 函数，该函数会自动将特定图像的大小调整为其父级的宽度。如果相关，则适用于 vbulletin 4.2.0

这是相关的（简化的）代码：

```
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
        var newWidth = $('.floatcontainer.doc_header').css("width");
        $('.logo-image').css("width", newWidth);

        });
    </script>
</head>

<div class="floatcontainer.doc_header" style="width: 90%; height: 200px;">
    <img class=".logo-image" src="/img/headerimg.jpg"/> //the image is naturally 1092x200
</div> 
```

解决了！我终于想出了在哪里编辑这张图片的css，所以我不需要用jQuery来做。不完全是我正在寻找的解决方案，但是嘿 - 谁在抱怨！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:42:00.123

缺少正确的**类选择器**

```
 $('.floatcontainer doc_header')
                    ^--- Missing the class selector 
```

应该是

```
 $('.floatcontainer.doc_header')  // Make sure there is no space
                   ^---- 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/tk5qG/1/)**

**更新**

我知道问题是什么

```
<img class=".logo-image" 
```

有**一个带点的类..**

所以正确的选择器是

```
$('.\\.logo-image') 
```

**并不是**

```
$('.logo-image') 
```

这就是它没有找到特定图像的原因

**[更新的小提琴](http://jsfiddle.net/sushanth009/tk5qG/3/)**

如果您希望它与您指定的选择器一起使用，则将 HTML 中的类更改为

`<img class="logo-image"` **^--- 这里没有点**.. 所以选择器是 `$('.logo-image')`

`<img class=".logo-image"` **^--- 点存在**.. 所以选择器是 `$('.\\.logo-image')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:44:20.297

尝试这个：

```
$('.logo-image').width($('.floatcontainer.doc_header').width()); 
```

此外，您不应该在元素类中使用点！

也可以改为更改 css：

```
 .logo-image { width: 100%; } 
```

# c# - entityManager.GetTransaction().Commit() 返回 void，如何获取实体的自动生成 ID？

> ID：13886659
> 
> 赞同：0
> 
> 时间：2012-12-14T21:41:00.013
> 
> 标签：c#, .net, nhibernate, persistence

我在我的项目中使用 NHibernate & Net Persistence API 和 C#。我有以下保存方法：

```
 public void Save(IGenericEntity entity)
        {
            _entityManager = GetEm();
            _entityManager.GetTransaction().Begin();
            _entityManager.Persist(entity);
            _entityManager.Flush();            
            _entityManager.GetTransaction().Commit();            
            _entityManager.Clear();
        } 
```

现在说实体有一个字段 ID（这是从 db 自动生成的值）。现在我正在保存这个实体，我想要自动生成的 ID 或保存的实体作为回报，但是.Commit() 返回类型是无效的。任何人都可以请指导一下吗？

我在 Java 中使用过休眠，并且通过调用 .save() 它返回保存的实体（具有自动生成的 ID）。如何在上述情况下实现相同的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:49:35.540

调用#flush 后，您的实体将包含 id。试试这个测试：

```
Save( entity );
assertNotNull( entity.getId() ); 
```

# c# - 弹出强制显示 silverlight 5

> ID：13886662
> 
> 赞同：0
> 
> 时间：2012-12-14T21:41:14.177
> 
> 标签：c#, popup, silverlight-5.0

Silverlight 5，C# 我在同一个类上有两个方法...第一个方法调用第二个方法来创建 POPup。第二种方法创建一个弹出窗口

```
 msgWindow = new Popup(); 
  (bla,bla,bla) 
```

---这是我的问题：---设置后如何强制显示

```
msgWindow.IsOpen = true; 
```

然后返回第一种方法继续做其他事情。（顺便说一下，在第一种方法完成后会显示弹出窗口）。

# css - div 表浮动

> ID：13886668
> 
> 赞同：1
> 
> 时间：2012-12-14T21:41:20.467
> 
> 标签：css

我有这样的 div 标签，里面有 3 个表。

```
<div>
    <table>
        <tr><td>ABC</td><td>ABC</td></tr>
    </table>

    <table>
        <tr><td>XYZ</td><td>XYZ</td></tr>
    </table>

     <table>
        <tr><td>LMN</td><td>LMN</td></tr>
    </table>

</div> 
```

输出是

`ABC ABC
XYZ XYZ
LMN LMN` 

我怎样才能变成这样的东西？

```
ABC ABC         XYZ XYZ       LMN LMN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:43:57.833

默认情况下它们是块级的，使它们内联。

*   [https://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)
*   [http://jsfiddle.net/3W8bb/](http://jsfiddle.net/3W8bb/)

**例子**

```
table {
  display: inline-block;
  /** this works too */
  display: inline-table
}​ 
```

您也可以按照@j08691 的建议让它们浮动

```
table { float: left } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:45:00.410

您可以将表格向左浮动并在其右侧设置边距，就像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/rBbzQ/)**

```
​table{
    float:left;
    margin-right:80px;
} 
```

# function - 在主题的 function.php 文件中设置 Wordpress 函数

> ID：13886670
> 
> 赞同：0
> 
> 时间：2012-12-14T21:41:35.860
> 
> 标签：function, wordpress-theming, wordpress

我正在尝试在我的主题的 function.php 文件中创建以下函数，并通过我的 taxonomy.php 文件调用它

```
query_brands_geo('dealers', 'publish', '1', $taxtype, $geo, $brands); 
```

所有变量都在 taxonomy.php 中设置。

如果我将它直接放在我的 taxonomy.php 文件中，则以下查询非常有效。为了使这项工作成为一项功能，我缺少什么？

作为一个函数，对于 2-6 重复的参数，我得到了这个错误语句：

> 警告：query_brands_geo() 缺少参数 2

```
function query_brands_geo($posttype, $poststatus, $paidvalue, $taxtype, $geo, $brands) {
    /* Custom Query for a brand/geo combination to display dealers with a certain brand and geography */
    //Query only for brands/geography combo and paid dealers

    $wp_query = new WP_Query();

     $args = array(
       'post_type' => '$posttype',
       'post_status' => array($poststatus),
       'orderby' => 'rand', 
       'posts_per_page' => 30,
       'meta_query' => array(
           array(
               'key' => 'wpcf-paid',
               'value' => array($paidvalue),
               'compare' => 'IN',
           )
       ),
        'tax_query' => array(
            'relation' => 'AND',
                array(
                    'taxonomy' => $taxtype,
                    'field' => 'slug',
                    'terms' => $geo
                ),
                array(
                    'taxonomy' => 'brands',
                    'field' => 'slug',
                    'terms' => $brands
                )

            )

        );
    $wp_query->query($args);

}
add_action( 'after_setup_theme', 'query_brands_geo' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:18:13.767

你说你想使用你放在functions.php中的这个函数，并让它在你的taxonomy.php文件中执行。是的，但是您发布的代码表明您正在将其作为操作执行（功能代码后跟 : `add_action(...`）。所以你在那里所做的就是你把你的函数挂在了`after_setup_theme`钩子上。因此，您（我想）放置在 taxonomy.php 中的调用不会执行该功能，它实际上是在主题设置后由 WP 自动执行的，当`do_action('after_setup_theme'...)`由 WordPress 执行时！在这种情况下，只传递了一个参数，因此您会收到错误消息：*缺少参数 2...* 所以取出该`add_action(...)`行，将您的函数保留在 functions.php 中，然后通常在 taxonomy.php 中调用它。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:02:33.863

你需要从你的函数中返回一些东西，所以在函数代码的末尾改变它：

```
$wp_query->query($args); 
```

有了这个 ：

```
$result = $wp_query->query($args);
wp_reset_query();
return $result; 
```

并在 taxonomy.php 中适当地调用它，知道函数的结果对象，当这样调用时：

```
$myquery = query_brands_geo($arg1, $arg2, ...); // Etc. 
```

将是一个查询结果对象，因此您必须循环遍历它等（请参阅其他地方的 WordPress 代码与循环）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T08:03:11.600

好的，我进行了测试，它的工作原理如下：更正您的功能代码，如下所示：

```
function query_brands_geo($posttype, $poststatus, $paidvalue, $taxtype, $geo, $brands) {
/* Custom Query for a brand/geo combination to display dealers with a certain brand and geography */
//Query only for brands/geography combo and paid dealers

 $args = array(
   'post_type' => '$posttype',
   'post_status' => array($poststatus),
   'orderby' => 'rand', 
   'posts_per_page' => 30,
   'meta_query' => array(
       array(
           'key' => 'wpcf-paid',
           'value' => array($paidvalue),
           'compare' => 'IN',
       )
   ),
    'tax_query' => array(
        'relation' => 'AND',
            array(
                'taxonomy' => $taxtype,
                'field' => 'slug',
                'terms' => $geo
            ),
            array(
                'taxonomy' => 'brands',
                'field' => 'slug',
                'terms' => $brands
            )

        )

    );
query_posts($args);

} 
```

然后在 taxonomy.php 中，如下所示：

```
query_brands_geo('post', 'published', ..., ..., ...);
while ( have_posts() ) : the_post(); 

the_content(); // Etc.

endwhile; // end of the loop. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T19:51:51.247

我刚刚在 WP 网站上对此进行了测试，它可以工作，所以如果你尊重相同的逻辑，它也应该适合你：

```
 function query_brands_geo($posttype, $poststatus) {
              $args = array(
               'post_type' => $posttype,
               'post_status' => array($poststatus) 
                );
                $result = new WP_Query($args);
                wp_reset_query();
                return $result;
            }

            $result = query_brands_geo('post', 'published');
            while ( $result->have_posts() ) : $result->the_post(); 
                the_content();
            endwhile; // end of the loop. 
```

# jquery - 如何在动态创建的文本框上设置焦点？

> ID：13886675
> 
> 赞同：0
> 
> 时间：2012-12-14T21:41:59.570
> 
> 标签：jquery, autocomplete

我有以下场景，一个静态文本框和一个按钮来添加更多动态文本框。当用户输入关键字时，我正在显示建议 [jquery autocomplete]。对于静态文本框，自动编译功能在 document.ready 中，对于动态文本框，它在 "onkeypress" 中。

在动态文本框中，自动建议工作正常，但问题在于焦点。重点没有转向建议下拉菜单。

我在下面试过

```
 function getLocationList(id)
    {

      //  $('.autocomplete').css('background','none repeat scroll 0 0 #B9E5FB');

       $('.autocomplete').autocomplete({ autoFocus: true });//not working

    // Ajax Auto suggestion box.. stuff
      var optionsLocation, b;
      jQuery(function() {
      optionsLocation = { serviceUrl: '/App_Handlers/xxx.ashx',
      minChars: 2,
      delimiter: /(,|;)\s*/,
      deferRequestBy: 0, //miliseconds
      noCache: false,
      width: 300
      };
      b = $("#" +id).autocomplete(optionsLocation);
      });

    } 
```

也尝试了以下但不工作

```
 $('.autocomplete').focus();
            $('.jobCenterArea').blur(); 
```

有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:49:12.277

通过在将动态文本框添加到 html 文档后立即提供以下代码来解决此问题

```
$('.autocomplete').autocomplete({ autoFocus: true });//not working

// Ajax Auto suggestion box.. stuff
  var optionsLocation, b;
  jQuery(function() {
  optionsLocation = { serviceUrl: '/App_Handlers/xxx.ashx',
  minChars: 2,
  delimiter: /(,|;)\s*/,
  deferRequestBy: 0, //miliseconds
  noCache: false,
  width: 300
  };
  b = $("#" +id).autocomplete(optionsLocation);
  }); 
```

谢谢大家的i/p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:03:08.373

这是关于委托事件的半相关问题：[Direct vs. Delegated - jQuery .on()](https://stackoverflow.com/questions/8110934/direct-vs-delegated-jquery-on)

考虑到`live`现在已弃用，我建议使用`on`：

```
$(document).on('focus', '.autocomplete', function(e) {
  //insert your code here for the event
}); 
```

请注意，这`document`不是在这种情况下您可以绑定的唯一内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:44:22.837

使用 $.live() 之类的

```
 $('.autocomplete').live('focus', function(){
       // callback code here
  }); 
```

# android - 如何在 Android 中翻转使用源矩形的图像？

> ID：13886677
> 
> 赞同：0
> 
> 时间：2012-12-14T21:42:20.943
> 
> 标签：android, android-canvas

我正在使用 Canvas.drawBitmap(Bitmap bitmap, Rect src, Rect dst, Paint paint) 绘制图像。我想翻转图像以进行左右移动，但我不能使用这种方法使用矩阵。我可以使用 canvas.rotate 进行旋转，但这对翻转没有用，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T23:05:55.077

您可以使用缩放 + 翻译来做到这一点。以下代码从左到右翻转：

```
canvas.scale(-1, 1);
canvas.translate(-canvas.getWidth(), 0);
canvas.drawBitmap(bmp, 0, 0, null);
canvas.setMatrix(null); 
```

如果不平移，您的位图将使用负坐标绘制 - 在屏幕左边缘之外。

# windows - 为什么文档中这个简单的 imageMagick 命令不起作用？

> ID：13886678
> 
> 赞同：2
> 
> 时间：2012-12-14T21:42:23.187
> 
> 标签：windows, command-line, imagemagick

```
C:\Program Files\ImageMagick-6.8.0-Q16>convert dragon.gif'[64x64]' read_dragon.gif
convert.exe: unable to open image `dragon.gif'[64x64]'': No such file or directo
ry @ error/blob.c/OpenBlob/2638.
convert.exe: unable to open module file `C:\Program Files\ImageMagick-6.8.0-Q16\
modules\coders\IM_MOD_RL_GIF'[64X64]'_.dll': No such file or directory @ warning
/module.c/GetMagickModulePath/683.
convert.exe: no decode delegate for this image format `dragon.gif'[64x64]'' @ er
ror/constitute.c/ReadImage/550.
convert.exe: no images defined `read_dragon.gif' @ error/convert.c/ConvertImageC
ommand/3078. 
```

但是，以下工作没有问题：

```
convert dragon.gif dragon.png 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:02:55.517

在常规的 Unix shell 中，单引号会被 shell 解析掉。我不确定 Windows shell 是否这样做。这行得通吗？

```
convert dragon.gif[64x64] read_dragon.gif 
```

或这个？

```
convert "dragon.gif[64x64]" read_dragon.gif 
```

# asp.net - jqgrid自定义客户端搜索与loadonce真的吗？

> ID：13886681
> 
> 赞同：3
> 
> 时间：2012-12-14T21:42:43.240
> 
> 标签：asp.net, jqgrid

我在构建与我的 jqgrid 相关的搜索块时遇到问题。

我希望这个搜索是基于客户端的，我使用 loadonce: true 从我的 asmx 服务获取数据。

那么如何使用条件进行复杂的搜索。（在网格之外，我的意思是不要使用jqGrid提供的默认搜索块，因为我可能会在其他页面中实现搜索块）

# hibernate - JBoss EAP 5.1.2 上的 Hibernate4 日志记录错误

> ID：13886682
> 
> 赞同：6
> 
> 时间：2012-12-14T21:42:45.317
> 
> 标签：hibernate, jboss, hibernate-4.x

我希望也许有人以前遇到过这个问题并可以提供建议。我正在 Hibernate 4 和 Spring 3 上编写一个应用程序。这是我的依赖树：

```
+- javax.servlet:servlet-api:jar:2.5:provided
+- org.springframework:spring-webmvc:jar:3.1.3.RELEASE:compile
|  +- org.springframework:spring-asm:jar:3.1.3.RELEASE:compile
|  +- org.springframework:spring-beans:jar:3.1.3.RELEASE:compile
|  +- org.springframework:spring-context:jar:3.1.3.RELEASE:compile
|  +- org.springframework:spring-context-support:jar:3.1.3.RELEASE:compile
|  +- org.springframework:spring-core:jar:3.1.3.RELEASE:compile
|  +- org.springframework:spring-expression:jar:3.1.3.RELEASE:compile
|  \- org.springframework:spring-web:jar:3.1.3.RELEASE:compile
+- org.springframework:spring-orm:jar:3.1.3.RELEASE:compile
+- org.springframework:spring-jdbc:jar:3.1.3.RELEASE:compile
+- org.springframework:spring-tx:jar:3.1.3.RELEASE:compile
|  +- aopalliance:aopalliance:jar:1.0:compile
|  \- org.springframework:spring-aop:jar:3.1.3.RELEASE:compile
+- org.springframework.security:spring-security-core:jar:3.1.3.RELEASE:compile
+- org.springframework.security:spring-security-web:jar:3.1.3.RELEASE:compile
+- org.springframework.security:spring-security-config:jar:3.1.3.RELEASE:compile
+- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Final:compile
+- org.hibernate:hibernate-core:jar:4.1.8.Final:compile
|  +- antlr:antlr:jar:2.7.7:compile
|  +- org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile
|  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:compile
|  +- dom4j:dom4j:jar:1.6.1:compile
|  +- org.javassist:javassist:jar:3.15.0-GA:compile
|  \- org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:compile
+- org.hibernate:hibernate-entitymanager:jar:4.1.8.Final:compile
+- org.hibernate:hibernate-validator:jar:4.3.0.Final:compile
+- javax.validation:validation-api:jar:1.0.0.GA:compile
+- commons-lang:commons-lang:jar:2.4:compile
+- commons-beanutils:commons-beanutils:jar:1.8.3:compile
+- commons-beanutils:commons-beanutils-core:jar:1.8.3:compile
+- commons-beanutils:commons-beanutils-bean-collections:jar:1.8.3:compile
+- commons-logging:commons-logging:jar:1.1.1:compile
+- org.aspectj:aspectjrt:jar:1.7.1:compile
+- org.aspectj:aspectjweaver:jar:1.7.1:compile
+- log4j:log4j:jar:1.2.17:compile
+- javax.servlet:jstl:jar:1.2:compile
+- cglib:cglib:jar:2.2.2:compile
|  \- asm:asm:jar:3.3.1:compile
+- org.slf4j:slf4j-log4j12:jar:1.7.2:compile
+- org.slf4j:slf4j-api:jar:1.7.2:compile
+- junit:junit:jar:4.10:compile
|  \- org.hamcrest:hamcrest-core:jar:1.1:compile
+- org.dbunit:dbunit:jar:2.4.9:test
|  \- commons-collections:commons-collections:jar:3.2.1:test
+- org.apache.derby:derby:jar:10.9.1.0:compile
+- org.springframework:spring-test:jar:3.1.3.RELEASE:test
+- org.seleniumhq.selenium:selenium-java:jar:2.26.0:test
|  +- org.seleniumhq.selenium:selenium-android-driver:jar:2.26.0:test
|  \- org.seleniumhq.selenium:selenium-remote-driver:jar:2.26.0:test
|  |     +- cglib:cglib-nodep:jar:2.1_3:test
|  |     +- org.json:json:jar:20080701:test
|  |     \- com.google.guava:guava:jar:13.0.1:test
|  +- org.seleniumhq.selenium:selenium-chrome-driver:jar:2.26.0:test
|  +- org.seleniumhq.selenium:selenium-htmlunit-driver:jar:2.26.0:test
|  |  +- org.seleniumhq.selenium:selenium-api:jar:2.26.0:test
|  |  +- net.sourceforge.htmlunit:htmlunit:jar:2.10:test
|  |  |  +- xalan:xalan:jar:2.7.1:test
|  |  |  |  \- xalan:serializer:jar:2.7.1:test
|  |  |  +- org.apache.commons:commons-lang3:jar:3.1:test
|  |  |  +- org.apache.httpcomponents:httpmime:jar:4.2.1:test
|  |  |  +- commons-codec:commons-codec:jar:1.6:test
|  |  |  +- net.sourceforge.htmlunit:htmlunit-core-js:jar:2.10:test
|  |  |  +- xerces:xercesImpl:jar:2.9.1:test
|  |  |  |  \- xml-apis:xml-apis:jar:1.3.04:test
|  |  |  +- net.sourceforge.nekohtml:nekohtml:jar:1.9.16:test
|  |  |  \- net.sourceforge.cssparser:cssparser:jar:0.9.7:test
|  |  |     \- org.w3c.css:sac:jar:1.3:test
|  |  \- org.apache.httpcomponents:httpclient:jar:4.2.1:test
|  |     \- org.apache.httpcomponents:httpcore:jar:4.2.1:test
|  +- org.seleniumhq.selenium:selenium-firefox-driver:jar:2.26.0:test
|  |  +- commons-io:commons-io:jar:2.2:test
|  |  \- org.apache.commons:commons-exec:jar:1.1:test
|  +- org.seleniumhq.selenium:selenium-ie-driver:jar:2.26.0:test
|  |  +- net.java.dev.jna:jna:jar:3.4.0:test
|  |  \- net.java.dev.jna:platform:jar:3.4.0:test
|  +- org.seleniumhq.selenium:selenium-iphone-driver:jar:2.26.0:test
|  +- org.seleniumhq.selenium:selenium-safari-driver:jar:2.26.0:test
|  +- org.seleniumhq.selenium:selenium-support:jar:2.26.0:test
|  \- org.webbitserver:webbit:jar:0.4.14:test
|     \- io.netty:netty:jar:3.5.2.Final:test 
```

问题是 Hibernate 对 jboss-logging.jar 的依赖。当我将它部署到 JBoss 5.1.2 Enterprise Server 时，我收到以下错误：

`Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.MethodValidationPostProcessor#0' defined in ServletContext resource [/WEB-INF/classes/spring/servlet-context.xml]: Cannot resolve reference to bean 'validator' while setting bean property 'validator'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'validator' defined in ServletContext resource [/WEB-INF/classes/spring/application-context.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (1) are: PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'validationMessageSource' threw exception; nested exception is java.lang.NoSuchMethodError: org.jboss.logmanager.LogContext.getAttachment(Ljava/lang/String;Lorg/jboss/logmanager/Logger$AttachmentKeyLjava/lang/Object; at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:329)`

显然 jboss-logging.jar 和 EAP 服务器有些不兼容。我尝试从 Hibernate 依赖项中排除该 jar，但随后遇到此错误：

`Caused by: java.lang.ClassNotFoundException: org.jboss.logging.BasicLogger at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:311) at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1163) at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:862) at org.jboss.classloader.spi.base.BaseClassLoader.doLoadClass(BaseClassLoader.java:502) at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:447) at java.lang.ClassLoader.loadClass(ClassLoader.java:247)`

我没有找到太多告诉我如何解决这个依赖问题的东西，所以我希望有人知道如何去做。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:31:23.113

好吧，在与同事合作时，我们找到了解决 JBoss 和 Hibernate 4 所遇到问题的解决方法。如果我们明确告诉 JBoss EAP 我们的日志实现（-D org.jboss.logging.provider=slf4j） ，它不会扫描日志实现，也没有我看到的 NoSuchMethod 异常。因此，除了设置一个系统属性外，我们无需进行任何其他更改。

# facebook - 某些用户的电子邮件不会从 Facebook API 调用返回

> ID：13886684
> 
> 赞同：3
> 
> 时间：2012-12-14T21:42:50.370
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我有一个 Facebook 应用程序，我使用 JavaScript JDK。

我很好地请求了电子邮件许可：

对于新用户，我重定向到授权窗口：

```
top.location = 'https://graph.facebook.com/oauth/authorize?client_id=' + APP_ID + '&scope=email&redirect_uri=XXX'; 
```

然后尝试获取它：

```
FB.getLoginStatus(function (response) {
    if (response.authResponse) {
        FB.api('/me', function (response) {
            console.log(response.email);
        }
    }
 } 
```

对于现有用户（如果他们的电子邮件未定义），我什至尝试重新请求电子邮件权限并重新获取它：

```
FB.login(function(response){
    if(response.status == 'connected'){
            FB.api('/me?fields=email,id',  function(response) {
                  console.log(response.email);
              });
    }
},{scope: 'email'}); 
```

问题是，对于某些用户，我在 /me 的响应中收到电子邮件，而对于其他未定义的用户。有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-29T07:13:59.603

这不是问题的解决方案，但我最近已经解决了它以使其工作。

因为，facebook 为所有 facebook 用户分配了一个带有 id 的电子邮件地址： `[username]@facebook.com` ，如果请求没有返回用户的电子邮件地址，我决定使用这封电子邮件。

IE

```
$email = isset($fb_user["email"])?$fb_user["email"]:$fb_user["username"] . "@facebook.com"; 
```

同样，这不是解决方案，只是一种解决方法。

希望这可以帮助。

# ruby-on-rails - 带有 accept_nested_attributes_for 的自定义表单

> ID：13886687
> 
> 赞同：1
> 
> 时间：2012-12-14T21:42:59.833
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes

我想创建一个以两种方式工作的表单。我将解释我的模型现在是如何工作的：

我有一个这样的用户：

```
class User < ActiveRecord::Base

  belongs_to :dependency
  has_many :requests

end 
```

和一个请求：

```
class Request < ActiveRecord::Base

  belongs_to :user
  has_and_belongs_to_many :users
  accepts_nested_attributes_for :users

end 
```

在这种情况下，我们有一个用户有很多请求，而一个请求拥有并属于许多用户。多对多的关系。

所以我需要创建一个表单：

1.  询问 user_id（如果存在），然后在表 requests_users 中创建该用户与创建的请求之间的关系。

2.  如果用户不存在，则使用（嵌套属性）创建新用户并与新请求建立链接，并在表 users 中插入新用户。（这种方式目前有效，但我不知道如何实现一个并以相同的形式考虑这个 2）

现在我有创建用户并将其与请求相关联的表单。但我需要展位箱。我在检查

```
belongs_to :user, :autosave => true

def autosave_associated_records_for_user
end 
```

先询问用户是否存在，但如果不存在，我找不到在表单上显示其他字段的方法。

请帮助我解决这个问题或使用ajax或其他东西做一个解决方案。

谢谢。

# jquery-mobile - jquery mobile中的转换加载消息

> ID：13886689
> 
> 赞同：0
> 
> 时间：2012-12-14T21:43:03.703
> 
> 标签：jquery-mobile, message, transitions

我有一个问题：这是我的脚本，单击即可调用

```
$("#next").live("click", function() {
    $.mobile.loading( 'show', {
        text: 'loading',
        textVisible: true,
        theme: 'b',
        html: "" 
    });
    $('.giocatore').remove();
    var pagina = parseInt($('#home').attr('pagina'));
    $('#home').attr('pagina',pagina+1);
    $('#back').append('<a id="prev" data-role="button" data-theme="a" href="" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">Prec</a>').trigger('create');
    caricalista();
}); 
```

它对我的网页做了一些事情。我希望在它做某事的时候，当我在 jquery mobile 中从一个页面传递到另一个页面时，页面会向我显示一个加载消息或一些过渡，比如“pop”。

现在使用我的代码，页面向我显示加载消息，但在脚本执行后它仍然存在

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:00:26.970

你怎么知道你的代码什么时候完成了？你必须用你的代码宣布执行了某些事情。之后，您只需要隐藏加载消息。尝试 jQuery 发布订阅

看这个视频。你会得到你需要的

[https://tutsplus.com/lesson/custom-events-and-the-observer-pattern/](https://tutsplus.com/lesson/custom-events-and-the-observer-pattern/)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:58:59.017

您可以使用自定义事件。

在你完成你的工作后，只需触发它完成的公告。将此行添加到现有函数的最后一个：

```
$(document).trigger('customEvent'); 
```

现在在函数之外订阅该公告：

```
$(document).on('customEvent', function () {
     // hide your loading message
}); 
```

希望这有帮助

# wpf - 控件之间的 WPF 拖放

> ID：13886695
> 
> 赞同：0
> 
> 时间：2012-12-14T21:43:34.000
> 
> 标签：wpf

**警告：** 我的 WPF 是零散的。

**问题：** 如何识别从一个 TreeView 拖放到另一个 TreeView 的对象？

**背景：** 我有两个树视图，我正在制作原型以在它们之间拖放。放下后，我想做一些事情，比如从源到目标画一条线，但我没有找到一种方法来找出源是什么。

目前，似乎源可能必须在 MouseDown 上“注册”自己，然后让 DragDrop 转到此注册点，例如表单级别属性，以获取端点。

有没有更好的办法？

# android - 如何控制 ItemizedOverlay 上 OverlayItems 的顺序？

> ID：13886701
> 
> 赞同：3
> 
> 时间：2012-12-14T21:44:05.510
> 
> 标签：android, android-mapview, itemizedoverlay, overlayitem

首先，我在这里继承了很多代码，尽管我已经梳理了几次寻找这种行为的原因，但我很困惑。

我希望最后一个被轻拍`OverlayItem`的东西在其余部分之上，即使它看起来很傻。我所看到的是，当它`MapView`正在制作动画（使 居中`OverlayItem`）时，它完全符合我的要求，然后当它完成时，“选定的”再次跳到背景。

这是默认行为吗？或者我的代码中有什么东西把这一切都搞砸了？

动画时：

![在此处输入图像描述](../Images/ca549235fc081c6fbeb4a42840ff4f52.png)

居中动画完成后：

![在此处输入图像描述](../Images/7c9c13e34d2a2634d57f439bcc46cf09.png)

我可以看到一些解决此问题的方法（`OverlayItem`在方法中自己绘制所选`draw()`对象或确保所选对象是最后绘制的对象），但是在这种情况下人们会怎么做？或者这只是我需要撤消的代码深处的一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:11:24.487

我相信，当您将重点放在一个特定`OverlayItem`的地方时，它就会出现在前面。就像是：

```
 myItemizedOverlay.setFocus(overlayItem); 
```

有了这个，你不需要一直玩项目订单。

--已编辑--

```
//Define this class level field
private Handler mHandler = new Handler();

//Use this after starting animation
mHandler.postDelayed(new Runnable() {

    @Override
    public void run() {
        myItemizedOverlay.setFocus(overlayItem);
        mapView.invalidate();  
    }
}, 500); 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:39:01.867

**编辑：**似乎 ItemizedOverlay`.setFocus(item)`是在顶部绘制单个项目的方法（在 a 之后`mapview.invalidate()`）。我无法让它按照我想要的方式工作，因为当`mapview`动画移除焦点并且绘图顺序变回来时。

非常感谢[Android Mapview：控制多种类型的 OverlayItems 的排序？](https://stackoverflow.com/questions/11182343/android-mapview-control-ordering-of-multiple-types-of-overlayitems)用于向我指出绘图顺序行为。

目前，这是我的强硬解决方案。您可以通过覆盖in来完全控制`OverlayItem`s 的显示顺序。 `getIndexToDraw``ItemizedOverlay`

```
protected int getIndexToDraw(final int drawingOrder) 
```

该`drawingOrder`参数与传入的参数具有相同的索引`createItem`。您返回绘制标记的顺序（稍后绘制更大的数字，这意味着“在顶部”）。

在我的特殊情况下，我有一个`ArrayList`要排序的项目，并确保所选项目`OverlayItem`始终位于列表的最后。然后我的`getIndexToDraw`方法是这样的：

```
@Override
protected int getIndexToDraw(final int drawingOrder)
{
    return drawingOrder;
} 
```

为了以`OverlayItems`与我将它们存储在我的`ArrayList`.

# ajax - 隐藏ajax内部html

> ID：13886706
> 
> 赞同：0
> 
> 时间：2012-12-14T21:44:26.587
> 
> 标签：ajax, jquery

```
function handleServerResponse() {
       if (xmlhttp.readyState == 4) {
         if(xmlhttp.status == 200) {
           document.getElementById("message").innerHTML=xmlhttp.responseText; 
         }
         else {
            alert("Error during AJAX call. Please try again");
         }
       } 
```

所以上面是 ajax 代码的一部分，它返回一个 HTML 并将其加载到 div 名称消息中。我想做的就是在此之后 5 秒后隐藏 div 消息。我搜索了很多，但没有具体的答案。有人可以帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:49:38.563

您只需要`setTimeout`使用内联函数启动一个来隐藏`message`div。

基本要点：

`setTimeout(function() { /* do something */}, 5000); // Timeout in milliseconds`

结合您的代码：

```
function handleServerResponse() {
   if (xmlhttp.readyState == 4) { 
      if(xmlhttp.status == 200) {      
         document.getElementById("message").innerHTML=xmlhttp.responseText;
         document.getElementById("message").style.display = 'block';
         setTimeout(function() {
            document.getElementById("message").style.display = 'none';
         }, 1000 * 5 /* dismiss after 5 seconds */);
      } else { 
         alert("Error during AJAX call. Please try again"); 
      } 
   }   
} 
```

# asp.net - 来自 KnockoutJs ViewModel 的 Web Api Post

> ID：13886707
> 
> 赞同：3
> 
> 时间：2012-12-14T21:44:26.133
> 
> 标签：asp.net, knockout.js, asp.net-web-api

我没有在 web api post 上找到太多信息。这是我发现的一篇博客文章，其中讨论了如何从淘汰赛中进行 POST。[带有 KnockoutJs ViewModel 的 Web Api POST](http://conficient.wordpress.com/2012/11/30/posting-knockout-json-data-to-webapi-httppost-methods/)

视图模型：

```
<script type="text/javascript">

var QuickEntry = function (_itemPartNumb, _itemDescription, _itemQuanities) {
    this.ItemPartNumb = ko.observable(_itemPartNumb);
    this.ItemDescription = ko.observable(_itemDescription);
    this.ItemQuanties = ko.observable(_itemQuanities);
};

function QuickEntriesViewModel() {

    var self = this;
    self.quickEntries = ko.observableArray([]);

    for (var i = 0; i < 10; i++) {
        self.quickEntries.push(new QuickEntry());            
    }

    self.addNewRow = function () {
        self.quickEntries.push(new QuickEntry());            
    }.bind(self);

    self.addToCart = function() {
        var items = ko.toJSON(self);

        $.ajax({
            url: '/DesktopModules/blah/API/Data/Post',
            type: 'POST',
            data: items,
            datatype: "json",
            processData: false,
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                alert(data);
            },
            statusCode: {
                404: function () {
                    alert('Failed');
                }
            }
        });
    };
};

ko.applyBindings(new QuickEntriesViewModel()); 
```

数据控制器（Web API）

```
[HttpPost]
public string Post(quickEntries values)
{
    string response = string.Empty;
    response = values.Items != null ? "some data" : "nothing at all";

    return response;
}

//class
public class quickEntries
{
    public MyQuickEntry[] Items { get; set; }
}

public class MyQuickEntry
{
    public string ItemPartNumb { get; set; }
    public string ItemDescription { get; set; }
    public string ItemQuanties { get; set; }
} 
```

这是从提琴手传递给 web api POST 方法的内容：

> {"quickEntries":[{"ItemPartNumb":"bob","ItemDescription":"bob","ItemQuanties":"bob"},{},{},{},{},{},{}, {}、{}、{}]}

有没有人有将 json 对象数组传递给 web api 的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:07:08.203

问题是您发送的是 ViewModel，而不是对象数组：

```
var items = ko.toJSON(self); 
```

这会将整个 ViewModel 对象转换为 JSON。尝试仅转换数组：

```
var items = ko.toJSON(self.quickEntries); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:22:27.193

事实证明我需要重命名我的班级。

```
public class RootObject
{
    public List<QuickEntry> quickEntries { get; set; }
}

public class QuickEntry
{
    public string ItemPartNumb { get; set; }
    public string ItemDescription { get; set; }
    public string ItemQuanties { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T04:04:36.040

以下不是直接的答案 - 但一些有用的链接用于将 Knockout 与 Web API 一起使用（虽然我还没有尝试过使用 Knockout 进行开发，但这些文章提供了丰富的信息）

1.  [单页应用程序：使用 ASP.NET 构建现代的响应式 Web 应用程序](http://msdn.microsoft.com/en-us/magazine/dn463786.aspx)
2.  [KNOCKOUTJS 和 WEBAPI 技巧适用于 POCO，儿童。](http://driftboatdave.com/2014/04/03/knockoutjs-and-webapi-tricks-are-for-poco-kids/)
3.  [单页应用：KnockoutJS 模板](http://www.asp.net/single-page-application/overview/introduction/knockoutjs-template)
4.  [使用 AngularJS 向 Web API 发送参数](http://humblebee.me/2014/01/12/using-angularjs-to-send-parameters-to-web-api/)

# c - 在linux中模拟C中的F11键

> ID：13886708
> 
> 赞同：1
> 
> 时间：2012-12-14T21:44:27.210
> 
> 标签：c

我需要知道如何模拟 F11 键，它将 gnome-terminal 的控制台窗口切换到 Linux 中的全屏。

我使用 Linux Mint 14（基于 Ubuntu 12.10）并使用 gcc 编译器的操作系统。该程序是用C编写的

我已经在其他地方寻找过这个，但大多数东西都是用于窗户的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:37:34.917

您可以使用转义序列调整许多终端（从终端内）的大小：

> `ESC` `[` `4` `;`高`;`宽`t`

在 C 中，这看起来像：

```
printf("\e[4;%d;%dt", height, width); 
```

没有直接的方法来确定最大可用大小。

# android - 在嵌套的 FragmentTabHost 中选项卡切换后片段不可见

> ID：13886710
> 
> 赞同：5
> 
> 时间：2012-12-14T21:44:38.423
> 
> 标签：android, android-fragments, android-tabhost, android-nested-fragment

我的一个片段的布局中有一个 FragmentTabHost（我们称之为 parentFragment）。现在，我在 parentFragment 的 onCreateView 中以编程方式初始化进入 tabhost 的每个片段。创建 parentFragment 后，一切似乎都可以正常工作，并且正确显示了第一个选项卡的片段。

但是一旦我切换选项卡一次，片段就会消失（我可以看到 tabhost 的背景颜色，但看不到 tabcontent-container 的内容）。当我切换回它时，第一个片段也消失了。正如我的日志记录显示的那样，这些片段实际上是在创建的，但它们是不可见的。

我认为它与（重新）创建片段有关，因为我也尝试使用带有 FragmentPagerAdapter 的 ViewPager。在那里，我可以愉快地在前两个片段之间切换（由于 setOffscreenPageLimit() ==1 而预加载），但是（重新）创建的片段也是空白的。

有什么想法吗？

这是我的一些代码：

**parentFragment 的 XML 的提取：**

```
...
            <android.support.v4.app.FragmentTabHost
                android:id="@android:id/tabhost"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TabWidget
                        android:id="@android:id/tabs"
                        android:layout_width="match_parent"
                        android:layout_height="40dp"
                        android:layout_alignParentTop="true" />

                    <FrameLayout
                        android:id="@android:id/tabcontent"
                        android:layout_width="0dp"
                        android:layout_height="0dp" />

                    <FrameLayout
                        android:id="@+id/realtabcontent"
                        android:layout_below="@android:id/tabs"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" />
                </RelativeLayout>
            </android.support.v4.app.FragmentTabHost>
... 
```

**parentFragment 的 XML 的提取：**

```
...
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        Log.d(TAG, "onCreateView");
        ViewGroup layoutContainer = (ViewGroup) inflater.inflate(R.layout.fragment_app_details_test, container, false);

            tabHost = (FragmentTabHost) layoutContainer.findViewById(android.R.id.tabhost);
        tabHost.setup(getActivity(), getChildFragmentManager(), R.id.realtabcontent);
        tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("TAB1"),
                FragmentSubTab1.class, null);
        tabHost.addTab(tabHost.newTabSpec("tab2").setIndicator("TAB2"),
                FragmentSubTab2.class, null);
        tabHost.addTab(tabHost.newTabSpec("tab3").setIndicator("TAB3"),
                FragmentSubTab3.class, null);

        return layoutContainer;
    }
... 
```

**子选项卡片段中的简单布局膨胀：**

```
...
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ViewGroup layoutContainer = (ViewGroup) inflater.inflate(R.layout.subfragment1, container,
                false);

        initUi(layoutContainer);
        return layoutContainer;
    }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:02:07.217

我之前没有处理过 FragmentTabHost 但我建议您使用操作栏方法 setNavigationMode(ActionBar.NAVIGATION_MODE_TABS) 在您的应用程序中实现选项卡导航（此处的文档：http: [//developer.android.com/guide/topics /ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)）这个提议的方法似乎工作量更少，并且使用更少的片段持有者。您基本上可以实例化您的选项卡，将它们添加到后台堆栈并通过 onTabSelected 或 onTabUnselected 方法根据所选选项卡显示/隐藏它们。

希望能帮助到你。

# ide - 更改 Webmatrix IDE 颜色主题

> ID：13886714
> 
> 赞同：1
> 
> 时间：2012-12-14T21:45:11.253
> 
> 标签：ide, themes, webmatrix, webmatrix-2

我已经开始使用 webmatrix，我不得不承认它运行良好。
但是定制不是很直观。我已经设法将代码编辑器颜色主题更改为深色，但我找不到更改整个 IDE 的颜色主题的方法。
谷歌在这个问题上不是很有帮助，甚至可以做到吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:15:06.173

不能更改整个主题`WebMatrix`，但可以更改编码窗口的主题。这可以通过`ColorThemeManager`从那里安装免费扩展来完成，您可以下载其他人或创建自己的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:15:28.313

在查看“选项”中的选项后，没有任何迹象表明可以更改外观。

# javascript - Javascript 和女孩的回调——两者都有问题

> ID：13886727
> 
> 赞同：2
> 
> 时间：2012-12-14T21:46:07.760
> 
> 标签：javascript, node.js, asynchronous, callback

我刚刚涉足了服务器端 javascript 的美妙世界，并且仍然掌握了异步处理的窍门。在搞砸了一个节点项目之后，我意识到这个 javascript 就像我过去的很多女朋友一样——他们只是不会回调。无论如何，我希望有人可以帮助我......这是代码，下面有解释：

```
//this is the function I'm calling to
function queryDb(connection, sql){
  connect(connection, function(){
        connection.query(sql, function(err, results){
                if(!err){
                  return results;
                  end(connection);
                }
                else{
                  throw err;
                }
    });

  });
} 
```

这是我打电话的地方。在调用之后我想要执行一些代码，但直到这个函数完成处理（它实际上是对数据库的查询，所以需要更长的时间，我的 js 只是继续运行）。

```
var queryResults = db.queryDb(db.connection, "SELECT * FROM Clients");
    if(queryResults){
         console.log(queryResults);
         req.dbResults = queryResults;
         next();
     }
     else{
         console.log('The query results where not returned here is the queryResults variable: ' + queryResults);
     } 
```

我想要发生的是从父函数返回的结果，然后由子函数运行的回调对结果进行处理。我试过这个：

```
 queryDb(db.connection, "SELECT * FROM Clients", function(){
    if(results){
       console.log(results);
       req.dbResults = results;
       next();
    }
    else{
       console.log('The query results where not returned here is the queryResults variable: ' + results);
    }
 }); 
```

但是我无法在“调用函数”的回调中访问父函数返回的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:53:18.477

```
function queryDb(connection, sql){  <--2 arguments

queryDb(db.connection, "SELECT * FROM Clients", function(){ <-- passing 3 
```

你没有对第三个参数做任何事情，所以你的回调不会被调用。

在您的最后一个示例中，调用是异步的，因此您尝试做的事情不会奏效。

并修复代码以使用那个神秘的 3 参数。

```
function queryDb(connection, sql, callback) {
    connect(connection, function () {
        connection.query(sql, function (err, results) {
            if (!err) {
                callback(results);
                end(connection);
            } else {
                throw err;
            }
        });

    });
} 
```

# xml - WiX XmlConfig：卸载时未删除的元素

> ID：13886728
> 
> 赞同：1
> 
> 时间：2012-12-14T21:46:11.833
> 
> 标签：xml, wix, wix3.6, wix-extension

我在卸载安装时添加到 XML 文件中的元素时难以删除。这是我的设置： XML 文件在安装前已经存在于机器上，安装后无法删除，因为此安装程序用于应用程序的“加载项”。我确实在安装时向 XML 文件添加了一些元素，但只想在卸载时删除其中一些元素。

我一直在网上寻找答案，找不到适合我情况的答案。我试过复制这篇文章的语法：[Deleting XML elements in WiX](https://stackoverflow.com/questions/2068743/deleting-xml-elements-in-wix)，但它仍然不起作用。但是，在安装时，我确实删除了现有元素，以便在安装时进行替换（如果元素已经存在）。因此，换句话说，删除一个元素在安装时有效，但具有完全相同的标签（除了`Id`attr 当然）它不适用于卸载。

这是我的代码：

```
<Component Id="C_Component" Guid="GUID-HERE">
    <File Id="MainProductFile" ... />
    <!-- XmlConfigs for installation are here -->
    <util:XmlConfig Id="XMLDEL_binding"
              File="[FILE_DIR_PATH]\File.config"
              Sequence="1"
              On="uninstall"
              Action="delete"
              ElementPath="/configuration/system.serviceModel/bindings/customBinding"
              VerifyPath="/configuration/system.serviceModel/bindings/customBinding/binding[\[]@name='!(wix.binding.name)'[\]]"
              Node="element" />
    <util:XmlConfig Id="XMLDEL_endpoint"
              File="[FILE_DIR_PATH]\File.config"
              Sequence="2"
              On="uninstall"
              Action="delete"
              ElementPath="/configuration/system.serviceModel/client"
              VerifyPath="/configuration/system.serviceModel/client/endpoint[\[]@name='!(wix.endpoint.name)' and @bindingConfiguration='!(wix.endpoint.bindingConfiguration)'[\]]"
              Node="element" />
</Component> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:11:52.850

我终于弄清楚了问题所在。我意识到`[FILE_DIR_PATH]`卸载没有价值。此属性由 a 获得`RegistrySearch`。因此，我所要做的就是将属性声明为`Secure`：

```
<Property Id="FILE_DIR_PATH" Secure="yes">
    <RegistrySearch ... />
</Property> 
```

我发现这可以解决一些问题，同时尝试使用另一个安装程序修复问题。我发现这篇文章很有用：[Wix 安装程序在修复](https://stackoverflow.com/questions/5996613/wix-installer-blanks-out-registry-setting-when-repairing).

我还发现 Rob Mensching 的博客文章对这种性质的问题很有用：[http ://robmensching.com/blog/posts/2010/5/2/The-WiX-toolsets-Remember-Property-pattern](http://robmensching.com/blog/posts/2010/5/2/The-WiX-toolsets-Remember-Property-pattern)

# jquery - jquery根据另一列中的值有条件地更改表中数字的符号

> ID：13886731
> 
> 赞同：-1
> 
> 时间：2012-12-14T21:46:53.093
> 
> 标签：jquery, conditional

我有一个包含 3 列的表（tradeID、BuySell 和 lot）。手数列包含一个数字，BuySell 列包含 ab 或 n s。如果 BuySell 列包含 as，那么更改 th elots 列符号的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:09:55.690

工作演示 - [http://jsfiddle.net/27gS2/3/](http://jsfiddle.net/27gS2/3/)

```
<table id='tblData' style="border: 1px solid #000000">
    <tr>
        <td>TradeID</td>
        <td>Buy/Sell</td>
        <td>Lots</td>
    </tr>
    <tr>
        <td>1</td>
        <td>B</td>
        <td>10</td>
    </tr>
    <tr>
        <td>2</td>
        <td>S</td>
        <td>20</td>
    </tr>
    <tr>
        <td>3</td>
        <td>S</td>
        <td>-30</td>
    </tr>
</table>

$("#tblData tr").each(function () {
    var text = $(this).find("td:eq(1)").text();

    if (text == "S") {
        var lot = parseInt($(this).find("td:eq(2)").text());
        lot = lot * (-1);
        $(this).find("td:eq(2)").text(lot);
    }
}); 
```

# android - 此 GCM 代码中的错误是什么

> ID：13886740
> 
> 赞同：2
> 
> 时间：2012-12-14T21:47:45.777
> 
> 标签：android, push-notification, google-cloud-messaging

我正在尝试在云中注册设备（Google Cloud Messaging **GCM**）

但应用程序面临一些错误

你能帮我解决这个问题吗

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test09_gsm"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />

    <permission android:name="com.example.test09_gsm.permission.C2D_MESSAGE" android:protectionLevel="signature" />

    <uses-permission android:name="com.example.test09_gsme.permission.C2D_MESSAGE" /> 

    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" /> 
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.test09_gsm.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
             <intent-filter>
                 <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                 <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                 <category android:name="com.example.test09_gsm" />
             </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

她的班级

```
package com.example.test09_gsm;

import com.google.android.gcm.GCMBaseIntentService;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class GCMIntentService extends GCMBaseIntentService {
    public static String TAG = "GCMIntentService";

    public GCMIntentService(String senderId)
    {
        super(senderId);
        Log.d("GCMIntentService", senderId);
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        Log.d("onError", arg1);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId){
        Log.d("onRecoverableError", errorId);
        return false;
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
        Log.d("onMessage", String.valueOf(arg1));
    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {
        Log.d("onRegistered", arg1);
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        Log.d("onUnregistered", arg1);
    }
} 
```

主要活动

```
package com.example.test09_gsm;

import com.google.android.gcm.GCMRegistrar;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals(""))
        {
          GCMRegistrar.register(this, "XXXXXXXXXXXX");
        }
        else
        {
          Log.v("Info : ", "Already registered");
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

日志猫

```
12-15 00:28:28.935: E/Trace(4569): error opening trace file: No such file or directory (2)
12-15 00:28:29.085: D/GCMRegistrar(4569): resetting backoff for com.example.test09_gsm
12-15 00:28:29.085: V/GCMRegistrar(4569): Registering app com.example.test09_gsm of senders XXXXXXXXXXXX
12-15 00:28:29.160: D/libEGL(4569): loaded /system/lib/egl/libEGL_mali.so
12-15 00:28:29.165: D/libEGL(4569): loaded /system/lib/egl/libGLESv1_CM_mali.so
12-15 00:28:29.165: D/libEGL(4569): loaded /system/lib/egl/libGLESv2_mali.so
12-15 00:28:29.170: D/(4569): Device driver API match
12-15 00:28:29.170: D/(4569): Device driver API version: 10
12-15 00:28:29.170: D/(4569): User space API version: 10 
12-15 00:28:29.170: D/(4569): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Wed Sep 12 17:53:53 KST 2012 
12-15 00:28:29.205: D/OpenGLRenderer(4569): Enabling debug mode 0
12-15 00:28:29.985: V/GCMBroadcastReceiver(4569): onReceive: com.google.android.c2dm.intent.REGISTRATION
12-15 00:28:29.985: V/GCMBroadcastReceiver(4569): GCM IntentService class: com.example.test09_gsm.GCMIntentService
12-15 00:28:29.985: V/GCMBaseIntentService(4569): Acquiring wakelock
12-15 00:28:30.000: D/dalvikvm(4569): newInstance failed: no <init>()
12-15 00:28:30.000: D/AndroidRuntime(4569): Shutting down VM
12-15 00:28:30.000: W/dalvikvm(4569): threadid=1: thread exiting with uncaught exception (group=0x40e372a0)
12-15 00:28:30.000: E/AndroidRuntime(4569): FATAL EXCEPTION: main
12-15 00:28:30.000: E/AndroidRuntime(4569): java.lang.RuntimeException: Unable to instantiate service com.example.test09_gsm.GCMIntentService: java.lang.InstantiationException: can't instantiate class com.example.test09_gsm.GCMIntentService; no empty constructor
12-15 00:28:30.000: E/AndroidRuntime(4569):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2388)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at android.app.ActivityThread.access$1600(ActivityThread.java:140)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1309)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at android.os.Looper.loop(Looper.java:137)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at android.app.ActivityThread.main(ActivityThread.java:4898)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at java.lang.reflect.Method.invokeNative(Native Method)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at java.lang.reflect.Method.invoke(Method.java:511)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at dalvik.system.NativeStart.main(Native Method)
12-15 00:28:30.000: E/AndroidRuntime(4569): Caused by: java.lang.InstantiationException: can't instantiate class com.example.test09_gsm.GCMIntentService; no empty constructor
12-15 00:28:30.000: E/AndroidRuntime(4569):     at java.lang.Class.newInstanceImpl(Native Method)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at java.lang.Class.newInstance(Class.java:1319)
12-15 00:28:30.000: E/AndroidRuntime(4569):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2385)
12-15 00:28:30.000: E/AndroidRuntime(4569):     ... 10 more 
```

现在我该如何解决这个问题并接收注册 ID 并使用它

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T21:52:41.830

`GCMIntentService`在将默认构造函数添加到as后尝试 ：

```
public GCMIntentService() {
        super("IntentService");
    } 
```

# ipython - Ipython中函数的参数位置感知自定义选项卡完成器

> ID：13886741
> 
> 赞同：0
> 
> 时间：2012-12-14T21:47:47.163
> 
> 标签：ipython, ipython-notebook

[我已经按照http://wiki.ipython.org/index.php?title=Cookbook/Custom_completers](http://wiki.ipython.org/index.php?title=Cookbook/Custom_completers)的建议成功地为要在我的 ipython 笔记本中使用的函数添加了自定义选项卡完成器。

但是，我希望自定义完成者知道当前参数在按下选项卡的位置。如果它是手头函数的第一个参数，则填写与第一个参数相关的值，如果是第二个，则填写第二个参数的有效值，依此类推。

有什么方法可以实现这种位置制表符完成器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:16:06.240

现在，我已将所有参数的所有可能值的合并列表放入函数的选项卡完成器中。由于不同 args 的值是互斥的，即使更优雅的解决方案会更好，我的目的也是如此。

# css - 使 ASP.net 响应移动设备

> ID：13886745
> 
> 赞同：1
> 
> 时间：2012-12-14T21:48:07.693
> 
> 标签：css, asp.net-mvc

我们的网页是用 ASP.net Web Forms 和 MVC 制作的。我们想让它们可用于移动设备。有没有人对如何做到这一点有很好的参考？或者关于如何制作响应式网页的任何建议？

我正在考虑制作 2 个母版页。一个用于移动设备，一个用于台式机，但我认为可能有更好的方法来做到这一点..

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T21:58:58.633

你需要的是一种叫做 CSS 媒体查询的东西。基本上，您为特定的屏幕尺寸创建不同的 CSS 规则。例如

```
@media screen and (max-width: 700px) and (min-width: 520px) {
  body {
    background: red;
  }
} 
```

每当您的浏览器窗口/屏幕宽度大于 520 像素且小于 700 像素时，会将主体背景设置为红色。

尝试在谷歌上搜索“CSS 媒体查询”和“响应式设计”，这将为您指明正确的方向

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:36:53.030

我使用了以下方法，因为我们必须支持旧浏览器（如 IE7），并且我们不想传输适用于所有可能设备的标记和样式......

本文介绍了如何将移动页面添加到asp应用程序中：

[http://www.asp.net/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application](http://www.asp.net/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T23:44:53.613

@Slavenko 为您指明了正确的方向。我想最重要的是，有多个为响应式设计构建的框架，这些框架利用了媒体查询。我最喜欢的是[TwitterBootstrap](http://twitter.github.com/bootstrap/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T14:10:22.930

我一直在修补使用 CSS 框架或使用 Web 表单进行替代渲染，感觉就像是坐在服务器端控件之上的黑客攻击。

Telerik 最近在其 ASP.NET Web 窗体控件套件中添加了一组响应功能。网上的演示样样让人印象深刻。您可以在以下位置找到这些演示： [http ://demos.telerik.com/responsive-web-design-aspnet/samples.aspx](http://demos.telerik.com/responsive-web-design-aspnet/samples.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-31T23:57:55.037

只需将主潜水宽度设置为 1200 像素，然后它会自动生成移动责任

# ruby-on-rails - 使用 link_to 将变量从视图传递到控制器时出现“参数数量错误（0 表示 1）”错误

> ID：13886750
> 
> 赞同：0
> 
> 时间：2012-12-14T21:48:53.450
> 
> 标签：ruby-on-rails, ruby, argument-passing, link-to

我正在尝试使用 link_to 将变量从视图传递给控制器​​。这是我在视图中的代码：

```
<%= link_to 'Send Chant', :controller => 'send_chants', :action => 'index', :content => @chant.content %></b> 
```

这是我的“send_chants”控制器中的索引操作的样子：

```
class SendChantsController < ApplicationController
  def index(content)

    puts content

  end
end 
```

单击“发送颂歌”链接后，我得到一个 ArgumentError '参数数量错误（0 代表 1）'

我确定我错过了一些简单的东西。有什么想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T21:51:44.153

控制器动作不带参数。所有参数都通过参数哈希传递..尝试类似...

```
class SendChantsController < ApplicationController
  def index
    puts params[:content]
  end
end 
```

# ios - 错误：“_OBJC_CLASS_$_NgnEngine”

> ID：13886753
> 
> 赞同：0
> 
> 时间：2012-12-14T21:49:00.510
> 
> 标签：ios, linker, clang

在互联网上查找此错误的解决方案后，我找到了以下解决方案：

1.  我确保检查目标
2.  我确保该文件在编译源中

我做到了，但仍然有同样的错误：

```
 "_OBJC_CLASS_$_NgnEngine", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:53:44.993

听起来您正在使用为设备构建的静态库（armv7、armv7s 架构），现在您尝试在需要 i386 的 iPhone 模拟器中使用它。

如果是这种情况，请为 i386 重新构建它，或者更好地创建一个包含所有架构的*胖*库。

`lipo -info`您可以在命令行中检查库中包含哪些架构。

# java - 如何在我的 Eclipse 中使用用户界面？

> ID：13886755
> 
> 赞同：-1
> 
> 时间：2012-12-14T21:49:08.757
> 
> 标签：java, android, eclipse, user-interface

我的名字是斯蒂芬在巴西，我是菜鸟。我开始学习如何为 android 开发应用程序，我需要一个方向。

网上有很多用户界面包，但我想知道如何在我的应用程序中应用，所以也许我创建了自己的界面包

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:56:16.137

我将从这里开始[http://developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)。这将向您展示如何打开一个 android 项目并导航到布局文件，您可以在其中使用调色板或在 xml 中添加元素。

我认为谷歌提供了很好的文档来帮助你。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:55:42.930

我会建议你从那个开始：是简单的 Eclipse ；) [Eclipse Indigo](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2) 是我使用的用户界面，但我不知道它是否适用于开发 Android 应用程序。试着告诉我们：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:00:46.953

Android 应用程序的图形用户界面是使用层次结构`View`和`ViewGroup`对象构建的。`View`对象通常是 UI 小部件，例如按钮或文本字段，`ViewGroup`对象是不可见的视图容器，用于定义子视图的布局方式，例如网格或垂直列表。

Android 提供了对应于子类的 XML 词汇表，`View`因此`ViewGroup`您可以使用 UI 元素的层次结构在 XML 中定义您的 UI，从而创建您自己的 UI 包。

参考：http: [//developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

# mysql - MySQL ODBC 驱动程序 5.2w 导致日期时间错误 5.1.10 工作正常

> ID：13886757
> 
> 赞同：2
> 
> 时间：2012-12-14T21:49:22.687
> 
> 标签：mysql, odbc, driver, dsn

当运行托管在 IIS 中的 ac# web 服务时，它在我使用 MySQL 驱动程序 5.1.10 时运行完美，但是当我更新到最新的驱动程序 5.2 时，我收到以下错误

```
ERROR [HY000] [MySQL]ODBC 5.2(w) Driver][mysqld-5.5.28-log]Incorrect datetime value:      '2012-12-14 14:01:13.553000000' for column 'Date' at row 1 
```

我正在使用系统 DSN。

我在 Windows 7 上运行 MySQL 服务器版本 5.5 x64，它尝试将值保存到的数据类型是 DateTime，如错误消息所示。有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:28:53.397

我遇到了同样的问题，而且似乎以前版本的 ODBC 连接器（5.1.10 和更早版本）对 C# DateTime 字段的处理方式非常不同。可能是连接器的早期版本只是截断了足够多的 DateTime 以使其在 MySQL 中工作，而当前版本保留了更多的小数数据。

我还注意到一些奇怪的行为，`Decimal`变量完全使连接器崩溃，没有描述性错误消息。我的解决方案是改用`Double`类型。

**编辑** 我发现了我不久前看到的 ODBC/Connector v5.1.11 的变更日志，它确认了 Bugs Fixed 列表中值的不同[处理](http://dev.mysql.com/doc/relnotes/connector-odbc/en/news-5-1-11.html)`DateTime`：

> 在使用 SQLBindParameter 和 SQL_C_TIMESTAMP 类型的准备好的语句中忽略了时间戳的小数秒部分。例如，比较两个仅在小数部分不同的时间戳值的准备查询将认为这些值相同。（错误 #12767761、错误 #60648）

有趣的是，直到[MySQL 5.6.4](http://dev.mysql.com/doc/refman/5.6/en/news-5-6-4.html) DATETIME 和 TIMESTAMP 字段的精度只有几秒（没有毫秒或微秒），所以以前版本的连接器的“不正确”行为忽略了小数秒，MySQL 很高兴。由于连接器现在不忽略小数数据，如果此数据通过存储过程或预准备语句传入，则会生成错误。所以目前的解决方案是：

1) 更新到[MySQL 5.6](http://www.mysql.com/downloads/mysql/)（现在是 GA）

2) 使用一种[巧妙的技术](https://stackoverflow.com/questions/1004698/how-to-truncate-milliseconds-off-of-a-net-datetime)`DateTime`从保留类型及其所有其他属性的同时剥离小数数据：

```
DateTime dt = DateTime.Now //Or any existing DateTime value
dt = dt.AddTicks( - (dt.Ticks % TimeSpan.TicksPerSecond)); 
```

3) 如果您根本不想处理 C# 和`DateTime`类型的细微差别，并且意识到在使用数据库时使用字符串数据的潜在安全后果，您总是可以构建自己的日期字符串或使用`ToString`方法a`DateTime`并将字符串传递给 MySQL：

```
// convert DateTime to string with formatting for MySQL
string dateformysql = mydatetime.ToString("yyyy-MM-dd HH:mm:ss"); 
```

参考资料：
[如何从 .NET DateTime 中截断毫秒数](https://stackoverflow.com/a/1005222/1997767)
[为什么 MySQL 不支持毫秒/微秒精度？](https://stackoverflow.com/questions/2572209/why-doesnt-mysql-support-millisecond-microsecond-precision)
[ODBC 连接器 5.1.11 更新日志](http://dev.mysql.com/doc/relnotes/connector-odbc/en/news-5-1-11.html)

# c - setsockopt() 中的错误：数值参数超出域

> ID：13886761
> 
> 赞同：4
> 
> 时间：2012-12-14T21:49:54.957
> 
> 标签：c, linux, sockets

我有一个工作代码在安装了内核**2.6.18-194.el5 #1 SMP x86_64**的 RedHat 上运行。

当我将代码移动到使用 CentOS 6.3 的新安装机器时，相同的代码失败了

> 分配套接字选项时出错：**域外的数值参数**

后者机器的内核版本是**2.6.32-279.el6.x86_64 #1 SMP**

下面分别是机器中工作和失败的代码。

```
 struct timeval          tv;

    tv.tv_sec       = 0;
    tv.tv_usec      = 1500000;

    if (setsockopt(sockfd, SOL_SOCKET, SO_RCVTIMEO, &tv, sizeof(struct timeval)) != 0)
    {
            LM_ERR("Error assigning socket option: %s", strerror( errno ));
            return FALSE;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T22:07:53.057

尝试使用

```
tv.tv_sec       = 1;
tv.tv_usec      = 500000; 
```

我见过一些不接受`tv_usec`高于 10^6 的实现。

**编辑：**这个问题很有趣，可以稍微挖掘一下。在内核源代码中查找`SO_RCVTIMEO`，我在以下代码中找到了以下代码`net/core/sock.c`：

```
int sock_setsockopt(struct socket *sock, int level, int optname,
            char __user *optval, unsigned int optlen)
{

   / ... /    
   switch (optname) {

   / ... /    

   case SO_RCVTIMEO:
        ret = sock_set_timeout(&sk->sk_rcvtimeo, optval, optlen);
        break;

   / ... /    
} 
```

该`sock_set_timeout()`函数的开头确实包含一些范围检查：

```
static int sock_set_timeout(long *timeo_p, char __user *optval, int optlen)
{
    struct timeval tv;

    if (optlen < sizeof(tv))
        return -EINVAL;
    if (copy_from_user(&tv, optval, sizeof(tv)))
        return -EFAULT;
    if (tv.tv_usec < 0 || tv.tv_usec >= USEC_PER_SEC)
        return -EDOM;

    /* ... */
} 
```

现在我们知道的足够多`git blame`-ing :) 更改是通过以下更改集引入的：

```
commit ba78073e6f70cd9c64a478a9bd901d7c8736cfbc 
Author: Vasily Averin <vvs@sw.ru> 
Date:   Thu May 24 16:58:54 2007 -0700

[NET]: "wrong timeout value" in sk_wait_data() v2

sys_setsockopt() do not check properly timeout values for 
SO_RCVTIMEO/SO_SNDTIMEO, for example it's possible to set negative timeout
values. POSIX do not defines behaviour for sys_setsockopt in case negative
timeouts, but requires that setsockopt() shall fail with -EDOM if the send and
receive timeout values are too big to fit into the timeout fields in the socket
structure. 
In current implementation negative timeout can lead to error messages like
"schedule_timeout: wrong timeout value".

Proposed patch:
- checks tv_usec and returns -EDOM if it is wrong
- do not allows to set negative timeout values (sets 0 instead) and outputs
  ratelimited information message about such attempts.

Signed-off-By: Vasily Averin <vvs@sw.ru>
Signed-off-by: David S. Miller <davem@davemloft.net> 
```

我相信提交评论解释了一切。据我所知，此更改包含在 2.6.22-rc3 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T22:06:23.620

那不应该是

```
tv.tv_sec   = 1;
tv.tv_usec  = 500000; 
```

因为 100 万微秒 == 1 秒？

# css - 禁用 div 缩放，但允许缩放页面（备用 div）

> ID：13886763
> 
> 赞同：44
> 
> 时间：2012-12-14T21:50:03.040
> 
> 标签：css, html, zooming, fixed

有没有办法禁用 div 或网站上任何特定元素的缩放？例如，如果我希望页面是可缩放的，而不是#Header div，有没有办法让一个可缩放，而另一个不可缩放？

基本上，当您在移动设备上缩放时，它也会缩放标题，但我希望标题始终为固定大小（不可缩放）。

我知道您可以使用此代码来禁用整体缩放：

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T04:25:14.190

如果没有巧妙的技巧，你就无法做到这一点。

但是，您可以（并且应该）使用以下 CSS 来修复移动设备上的缩放问题：

```
header {
    position: fixed;
    ...
}

@media only screen and (max-width: 720px) {
    header {
        position: absolute;
    }
} 
```

此代码`position: absolute`在显示宽度小于或等于 720 像素时启用，并且标题成为页面的一部分，而不是固定在顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:58:53.210

我不认为你可以直接这样做。一种可能的选择是通过 js 事件检测缩放并相应地缩放元素。

另一种选择是“打破” CTRL 键以禁用缩放您的网站，但这只是一个很大的禁忌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T11:46:33.263

简而言之，您当然可以做到这一点。

您可以根据从各种新窗口和内部宽度和高度属性计算的 dpi 变化捕获窗口调整大小事件并调整浮动 div 的大小。

因此，当您*放大时*，您希望*缩小*浮动 div 以使其保留原始 dpi，反之亦然。

这将是一个史诗般的小提琴 - 很快重新审视这个答案，因为我可能不得不做这样的事情。已经注意到一些跨浏览器与 dpi 的不一致，所以是的，很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-18T09:44:20.850

面临同样的问题，最终禁用平移/缩放

```
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
</head> 
```

并通过这个伟大的库有选择地重新启用它

[https://soulfresh.github.io/pan-z/?path=/docs/pan-z--pan-z](https://soulfresh.github.io/pan-z/?path=/docs/pan-z--pan-z)

无需太多配置就可以很好地工作。

我的html结构如下

```
<body>
  <header>Sticky unzoomed header</header>
  <main id='main'>Zoomable content</main>
</body> 
```

然后我在主要元素上启用了平移缩放

```
const PanZ = require('@thesoulfresh/pan-z')
new PanZ().init(document.getElementById('main')) 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-08-25T08:39:48.387

如果您使用 Angular，有一种方法可以为您的标题 div 提供一个 id，然后在控制器中编写以下代码：

`document.getElementById("viewport").setAttribute('content','user-scalable=yes, width=device-width, minimum-scale=1, maximum-scale=1');`

我在我的项目中使用过，效果很好..

# c++ - 警告：控制到达非 void 函数 C++ 的末尾

> ID：13886765
> 
> 赞同：-1
> 
> 时间：2012-12-14T21:50:11.157
> 
> 标签：c++

我正在尝试实现 Prims 算法来查找给定图的最小生成树。代码现在可以编译，但可执行文件（而不是打印 MST）会打印“segmentation fault:11”。此外，我收到警告：

```
Warning: control reaches end of non-void function 
```

有人能帮我理解它有什么问题吗？提前致谢。

```
double Graph::getWeight(int v, int w)
{
    if(edge(v,w))
    {
        Node* t = adj[v];
        while(t != NULL)
        {
            t = t->next;
            if((t ->v) == w)
            return t->weight;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T21:52:30.420

警告指的是您的`getWeight`函数说它将返回 a`double`但实际上仅`double`在某些条件下返回 a 。如果任一`if`语句为假（即 if`edge(v,1)`为假或 if`t->v == w`始终为假），则该函数不返回任何内容。

如果条件不成立，也许您想返回一些默认值。

这是否是您的分段错误的原因是另一回​​事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:04:52.863

如果我理解正确，您的函数会尝试检索顶点`v`和之间给定边的权重`w`。如果该边不存在，或者它们之间的权重不存在于图形数据中，则该函数不会返回任何内容。

即使您知道您的数据结构将形成良好的格式，您也应该确保操作它的代码可以对不良数据做出反应。

```
#include <exception>
#include <string>

/* ... */

double Graph::getWeight(int v, int w)
{
    if(edge(v,w))
    {
        Node* t = adj[v];
        while(t != NULL)
        {
            t = t->next;
            if((t ->v) == w)
                return t->weight;
        }
    }
    std::string msg = "malformed graph: no edge between ";
    msg += v;
    msg += " and ";
    msg += w;
    throw std::runtime_error(msg);
} 
```

如果图表格式不正确，上述内容至少会在运行时警告您。你甚至可以让它抛出两个不同的异常，具体取决于发生了什么问题（`edge(v,w)`为假或循环找不到正确的权重）。

如果您知道您的图表格式不正确，您可以尝试修复它，看看它是否也修复了您遇到的段错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T22:00:18.210

这部分只是一个更好的编码实践：

```
double Graph::getWeight(int v, int w)
{
    double result = 0.0;
    if(edge(v,w))
    {
        Node* t = adj[v];
        while(t != NULL)
        {
            t = t->next;
            if((t ->v) == w)
            result=t->weight;
        }
    }
    return result;
} 
```

# c# - 创建一个简单的正则表达式

> ID：13886769
> 
> 赞同：2
> 
> 时间：2012-12-14T21:50:40.527
> 
> 标签：c#, regex

我正在尝试创建一个匹配具有以下条件的单词的正则表达式：

*   匹配可以包含以下字符的单词：æøå 和数字。
*   如果一个单词包含以下任何字符，则它是无效的：
    `+ - & | ! ( ) { } [ ] ^ " ~ * ? : \`

因此，例如，这些词是可以的：

> testæøå
> test12
> 12test

但这些应该失败：

> t+
> st 测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:55:55.627

怎么样`[^+\-|!(){}\[\]\^"~*?:\\]+`。这将匹配不包含您要排除的字符的任何内容。您必须检查我是否正确地在封闭`[`和`]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:06:49.003

万一您不知道，C# 中的正则表达式比字符串操作慢得多：C# 中的正则 [表达式](http://www.dotnetperls.com/regex)
然而，如果您使用 Regex.Compiled 对其进行优化，则可以提高速度。但是，这确实会导致您的程序启动速度变慢。如果这将是任何基于 Web 的（C#/Silverlight），我强烈建议使用字符串操作和搜索正则表达式，否则对于使用该页面的任何人来说，这将是非常慢的。

您可以轻松地匹配字符的 Unicode 或 ASCII 代码并从那里接受/拒绝单词，从而获得更好的性能。

如果您决定使用正则表达式，请考虑使用 Perl 或其他脚本语言，它们使用正则表达式进行字符串操作要快得多。

# ruby-on-rails - 如何测试重定向到外部 URL？

> ID：13886773
> 
> 赞同：1
> 
> 时间：2012-12-14T21:51:35.727
> 
> 标签：ruby-on-rails, url, testing, ruby-on-rails-3.2, http-redirect

我正在使用[rack-rewrite](https://github.com/jtrupiano/rack-rewrite)来重定向旧版 URL。重定向到新内部路径的旧路径，我可以很好地测试，如下所示：

```
require 'test_helper'

class MiscellaneousTest < ActionDispatch::IntegrationTest

    test 'redirect about.php' do
        get_via_redirect '/about.php?country=US'
        assert_equal '/us/about', path

        get_via_redirect '/about.php?country=CA'
        assert_equal '/ca/about', path

        # default
        get_via_redirect '/about.php'
        assert_equal '/ca/about', path
    end
end 
```

但我想知道的是：如何测试旧路径现在映射到外部 URL 的案例？

例如，如果检测到以下旧路由：`/blog/12345/something-cool-to-say`它现在将映射到以下外部 URL：`http://blog.far.far.away.com/12345/something-cool-to-say`通过：

```
$BLOG_URL = 'http://blog.far.far.away-example.com'
r301 %r{^/blog/([0-9]{5})/(.*)\.php}, "#{BLOG_URL}/$1/$2" # token, slug 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:54:17.123

尝试这个：

```
assert_redirected_to 'http://some.host/with/a/path' 
```

# sql - ORDER BY with NULLS 首先使用列别名

> ID：13886777
> 
> 赞同：1
> 
> 时间：2012-12-14T21:52:19.207
> 
> 标签：sql, sql-server

虽然[这种技术](https://stackoverflow.com/questions/1498648/sql-how-to-make-null-values-come-last-when-sorting-ascending)对标准列很有效，但我遇到了一些我不明白的事情。我正在重写查询中的结果以用于报告目的，并且需要按别名列“PARENT”排序，如下所示：

```
select fun.MODULE_ID
    , fun.FUNCTION_ID
    , COALESCE(fun.parent_function, fun2.function_id) as PARENT
    , fun.DESCRIPTION
    , fun.FUNCTION_PURPOSE
from MODULE_FUNCTION fun
LEFT JOIN MODULE_FUNCTION fun2
    ON fun.function_id = fun2.function_id
    AND fun2.function_id IN (SELECT parent_function FROM MODULE_FUNCTION)
ORDER BY MODULE_ID
    , PARENT
    , FUNCTION_ID 
```

这很好用，但我的列 'PARENT_FUNCTION' 及其别名 'PARENT' 包含空值。我希望这些在底部。所以当我这样做时：

```
ORDER BY MODULE_ID
    , case when PARENT is null then 1 else 0 end, PARENT
    , FUNCTION_ID 
```

我得到“**无效的列名'PARENT'。** ”

有任何想法吗？（对 SQL 来说还是很新的东西！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:54:52.707

SQL Server 不允许您在查询中的其他地方使用列别名，**除了**在`ORDER BY`子句中**（但不是在 内的表达式中`ORDER BY`）**，因此您必须重新键入原始列定义。有关对此的更深入解释（比我能给出的要好得多），请参阅[此页面](http://sqlblog.com/blogs/tibor_karaszi/archive/2010/10/03/why-can-t-we-have-column-alias-in-order-by.aspx "为什么我们不能在 Order By 中有列别名")

试试这个：

```
ORDER by MODULE_ID
   , case when COALESCE(fun.parent_function, fun2.function_id) is null then 1 else 0 end
   , FUNCTION_ID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T22:23:08.997

在`ORDER BY`子句中使用列别名时，它只能单独使用。如果您尝试在表达式中使用它，SQL Server 将尝试将其解析为其中一个基表中的列。

例如

```
DECLARE @T TABLE(X INT, Y int)

INSERT INTO @T 
VALUES (1,3),(2,2),(3,1) 
```

* * *

```
SELECT X AS Y
FROM @T 
ORDER BY Y

Y
-----------
1
2
3 
```

* * *

```
SELECT X AS Y
FROM @T 
ORDER BY Y + 0

Y
-----------
3
2
1 
```

第一个结果集按列别名排序，第二个结果集按`Y`基表中的列排序。

您可以像在另一个答案中一样重复基础表达式，也可以使用派生表/cte 来投影列，然后您**可以**在`order by`.

```
;WITH CTE
     AS (SELECT fun.MODULE_ID,
                fun.FUNCTION_ID,
                COALESCE(fun.parent_function, fun2.function_id) AS PARENT,
                fun.DESCRIPTION,
                fun.FUNCTION_PURPOSE
         FROM   MODULE_FUNCTION fun
                LEFT JOIN MODULE_FUNCTION fun2
                  ON fun.function_id = fun2.function_id
                     AND fun2.function_id IN (SELECT parent_function
                                              FROM   MODULE_FUNCTION))
SELECT *
FROM   CTE
ORDER  BY MODULE_ID,
          CASE
            WHEN PARENT IS NULL THEN 1
            ELSE 0
          END,
          PARENT,
          FUNCTION_ID 
```

# java - 在 Android 应用程序中访问 C++ Web 服务

> ID：13886778
> 
> 赞同：2
> 
> 时间：2012-12-14T21:52:21.410
> 
> 标签：java, android, web-services

在创建用 Java 开发的 Android 应用程序时，如何访问用 C++ 编写的 Web 服务。我读了一些关于使用 ksoap2 的例子。但只是想知道 URL 和 soapAction 就足够了，或者我是否需要任何特殊的访问类来使用用 C++ 编写的 Web 服务（使用 SOAP 协议）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T20:02:36.973

当您使用 SOAP 协议时，在实现客户端时使用哪种语言编写服务器并不重要。

您需要做的就是处理请求，将其发送到所需的 url 并接收响应。

但是您也可以使用 Web 服务消费者层，该层将封装低级操作（请求生成、http 操作、响应解析、错误处理等）
，这是非常受欢迎的方式 :)。

# iis - 使用 PowerShell 从具有多个条目的字符串创建 Web 绑定

> ID：13886784
> 
> 赞同：1
> 
> 时间：2012-12-14T21:52:49.507
> 
> 标签：iis, powershell

我是 PowerShell 新手，已经面临巨大挑战。目标是读取 csv 文件。文件的每一行都是一个带有绑定参数的字符串，例如：

> "网站 1","116.167.74.172:443:www.xyz.com
> 116.167.74.174:443:www.xyz.com"
> 
> "网站 2",":80:www.xyz.com 116.167.74.172:80:"
> 
> "网站 3","116.167.75.155:443: 116.167.75.163:443:"
> 
> "网站 4",":80:"

要使用的命令是：

```
New-WebBinding -Name "Default Web Site" -IPAddress "*" -Port 80 -HostHeader TestSite 
```

问题是：如何读取一个字符串并将其分解为 3 个参数：**IP**、**Port**和**HostHeader**，即使我没有指定所有 3 个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:50:46.443

您可以使用带有命名捕获组的正则表达式来简化此操作。让我建议你总是把端口放在 ip 地址的右边，如果有一个 ip 地址的话。然后，假设文件的给定行当前位于 $strLine 中，则以下内容将执行您要查找的操作。

```
$pattern = '"[^"]+","(?<ip_address>(?:\d{1,3}\.){3}\d{1,3})?:?(?<port>\d{1,5})?:?(?<hostheader>.*)?'  
$strLine -match $pattern  
$ipaddress = if ($matches.ContainsKey('ip_address')) { $matches['ip_address'] } else { "*" }  
$port = if ($matches.ContainsKey('port')) { $matches['port'] } else { "80" }  
$hostheader = if ($matches.ContainsKey('hostheader')) { $matches['hostheader'] } else { "TestSite" }  

New-WebBinding -Name "Default Web Site" -IPAddress $ipaddress -Port $port -HostHeader $hostheader 
```

# javascript - 下拉菜单记住选择和重定向用户

> ID：13886793
> 
> 赞同：2
> 
> 时间：2012-12-14T21:53:27.923
> 
> 标签：javascript, redirect, drop-down-menu

我正在制作一个带有下拉菜单的登录页面，它将用户重定向到一个新目录。

[http://steerbox.com/countryselect/](http://steerbox.com/countryselect/)

该部分正在工作，现在我需要添加代码以在选择国家/地区时设置 cookie，以便下次用户访问登录页面时，他们将自动被重定向到该国家/地区的目录，而无需从下拉菜单中进行选择再次。

我发现 jquery 和 javascript 会在选择下拉菜单时设置 cookie，但我似乎无法让下拉菜单既设置 cookie 又重定向用户。以下是我当前用于下拉和重定向的脚本：

```
<Script language="JavaScript">
function goto(form) { var index=form.select.selectedIndex
if (form.select.options[index].value != "0") {
location=form.select.options[index].value;}}
</SCRIPT>
<FORM NAME="form1">
<SELECT NAME="select" ONCHANGE="goto(this.form)" SIZE="1">
<OPTION VALUE="">Select Country
<OPTION VALUE="chile">Chile
<OPTION VALUE="colombia">Colombia
<OPTION VALUE="bolivia">Bolivia
</select>
</FORM> 
```

谢谢！院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:50:17.870

我同意[yckart 的评论](https://stackoverflow.com/questions/13886793/drop-down-menu-to-remember-selection-and-redirect-user#comment19130111_13886793)并建议使用 localStorage。

支持非常好（[此处显示](http://caniuse.com/#search=localst)），除非您需要支持 IE7 或更低版本，否则应该没问题。

您可以像这样设置和检索数据：

```
localStorage.varName = 'bling';
var myVal = localStorage.varName;
// or:
localStorage['a little more flexibility'] = 'bling'; 
```

要使用它，您可以执行以下操作：

```
<script type="text/javascript">
    if (localStorage && localStorage.country) {
        location = localStorage.country;    
    }

    function formChanged(form) {
        var val = form.options[form.selectedIndex].value;
        if (val !== 'non-value') {
          if (localStorage) {
            localStorage.country = val;
          }
          location = val;
        }
    }
</script>

<FORM NAME="form1">
  <select onchange="formChanged(this);" NAME="country" SIZE="1">
    <OPTION VALUE="non-value">Select Country
    <OPTION VALUE="chile">Chile
    <OPTION VALUE="colombia">Colombia
    <OPTION VALUE="bolivia">Bolivia
  </select>
</FORM> 
```

[http://jsfiddle.net/K4Jkc/](http://jsfiddle.net/K4Jkc/)

一种更保守的方法是在进行重定向之前将存储在 localStorage（如果有的话）中的值与选择列表中的选项进行比较，如下面的 jsFiddle 所示：

[http://jsfiddle.net/K4Jkc/1/](http://jsfiddle.net/K4Jkc/1/)

# php - php代码错误？

> ID：13886800
> 
> 赞同：-3
> 
> 时间：2012-12-14T21:53:58.897
> 
> 标签：php, debugging

在浏览器中`var_dump`返回以下代码的末尾。`bool(false)`只是想知道是否有人能发现我的错误，因为 mysql tb =“intervals”中根本不存在任何条目（目前）。干杯。

```
//Connection code etc

$findinterval = mysql_query("SELECT * FROM intervals ORDER BY id ASC LIMIT 1");

if($findinterval == false){
    $start_interval = "x";
} else {
    $result = mysql_fetch_array($findinterval);
    $start_interval = $result['start_interval'];
    $start_interval->modify('+1 hour');
}

if($date>=$start_interval OR $start_interval == 'x'){
    $insertinterval = mysql_query("INSERT INTO intervals VALUES ('','$date')")
    var_dump($insertinterval);

//.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:59:23.597

来自 PHP 手册：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。

使用 mysql_error() 获取最后一个错误。

```
$result = mysql_query('select .....');
if (!$result) {
   die('Invalid query: ' . mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:04:24.980

试试这个

改变这个：

```
$start_interval = $result['start_interval']; 
```

到：

```
$start_interval = new DateTime($result['start_interval']);
$start_interval->modify('+1 hour');
$start_interval = $start_interval->format('Y-m-d'); // Do not forget to change this!!! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:06:29.687

我不知道我为什么这样做，但这是一个开始：

```
$findinterval = mysql_query("SELECT * FROM intervals ORDER BY id ASC LIMIT 1");

if(!$findinterval)
{
echo 'OMG, query failed';
}

while ($result = mysql_fetch_array($findinterval)) {

$start_interval = new DateTime($result['start_interval']);
$start_interval->modify('+1 hour');
$start_interval = $start_interval->format('Y-m-d');

}

if($date>=$start_interval OR $start_interval == 'x')
{
$insertinterval = mysql_query("INSERT INTO intervals VALUES ('','$date')");
if(!$insertinterval) {
    echo 'OMG, failed again!';
    }
} 
```

[把剩下的弄清楚](http://php.about.com/od/phpwithmysql/ss/mysql_php_2.htm)

# android - 在 Android 中处理未知的 URI 方案（比特币示例）

> ID：13886804
> 
> 赞同：6
> 
> 时间：2012-12-14T21:54:19.897
> 
> 标签：android, android-intent, bitcoin

我想在 Android 应用程序的 PreferenceScreen 中集成一个“通过比特币捐款”按钮。

有一些适用于 Android 的比特币客户端正在运行，比特币 wiki 定义了一个应该用于 BTC 支付的[URI 方案。](https://en.bitcoin.it/wiki/URI_Scheme)

我试过下面的代码

```
findPreference(getString(R.string.preference_donateBitcoin)).setOnPreferenceClickListener(new OnPreferenceClickListener() {

            @Override
            public boolean onPreferenceClick(Preference preference) {
                String url = getString(R.string.pref_donateBitcoin_uri);
                Intent i = new Intent(Intent.ACTION_VIEW);
                i.setData(Uri.parse(url));
                startActivity(i);
                return false;
            }
        }); 
```

没有在手机上安装 BTC。我尝试使用以下 URI 启动意图：`bitcoin:19iSEgNkJnEUtNDuuTkkZrU44PVKYMVfhz?amount=1`期待 Android 告诉我没有安装处理程序。

相反，我得到了一个`ActivityNotFoundException`

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=bitcoin:19iSEgNkJnEUtNDuuTkkZrU44PVKYMVfhz?amount=1 } 
```

我的问题是关于正确处理（阅读“最佳实践”）设备未知的 URI 方案。

*   如何检查某个 URI 方案是否至少可以由一个应用程序处理？（如果更多，我想是一个选择屏幕）
*   参考比特币但不参考任何特定客户，通过比特币支付时最好的意图是什么*？*未安装 BTC 客户端时如何处理？

[编辑]：这个问题是错误的，因为我搞砸了我的手机备份，并假定比特币钱包应用程序安装时没有安装。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:00:14.657

> 如何检查某个 URI 方案是否至少可以由一个应用程序处理？（如果更多，我想是一个选择屏幕）

任何一个：

*   抓住`ActivityNotFoundException`, 或

*   使用`PackageManager`and`resolveActivity()`或`queryIntentActivities()`查看是否有任何匹配您的`Intent`

> 参考比特币但不参考特定客户，通过比特币支付时最好的意图是什么？

你必须向比特币应用程序的作者提出这个问题，或者鼓励他们采用`Uri`标准，如果他们还没有这样做的话。

根据您列出的应用程序清单，您`Intent`看起来应该可以工作。至少，在使用[AppXplore](https://play.google.com/store/apps/details?id=com.sonyericsson.androidapp.AppExplore&hl=en)时，我看到了一个`ACTION_VIEW`用于`Uri`值的活动，其方案为`bitcoin`. 因此，您可能希望联系此应用程序的开发人员，看看您是否可以准确确定您的集成出错的地方。

> 未安装 BTC 客户端时如何处理？

提议通过`market:` `Uri`.

# tsql - 根据 max(date) 跨多个表选择记录

> ID：13886809
> 
> 赞同：1
> 
> 时间：2012-12-14T21:55:04.373
> 
> 标签：tsql, sql-server-2005, max

我有两张表：一张用于初始评估，一张用于重新评估。格式是这样的：

`initialAssessment`：

*   `assessmentId`
*   `personId`
*   `assessmentDate`
*   `totalScore`

`Reassessments`：

*   `assessmentId`
*   `personId`
*   `assessmentDate`
*   `totalScore`

每个表包含每人 1 条记录。最近的评估可能未包含在重新评估表中。出于这个原因，我需要在两个表之间选择最近的评估以及给定人员的相应总分。我尝试了以下查询，但我得到了多行：

```
 SELECT personId, MAX(assessmentDate) AS maxSubmittedDt, TotalScore
 FROM (
    SELECT personId, assessmentDate, TotalScore
    FROM  initialAssessment
    WHERE personId = 1
    UNION
    SELECT personId, assessmentDate, TotalScore
    FROM Reassessments
    WHERE personId = 1) AS u
 Group BY personId, TotalScore
 Order By personId 
```

我的问题是，如何在初始评估和重新评估表之间选择最近的评估及其对应的分数？如果重要的话，我使用的是 SQl server 2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T00:42:46.300

```
SELECT personId, assessmentDate, TotalScore
FROM (
     SELECT personId, assessmentDate, TotalScore, ROW_NUMBER() OVER (Partition by personId Order by assessmentDate desc) as RowId
     FROM (
        SELECT personId, assessmentDate, TotalScore
        FROM  initialAssessment
        WHERE personId = 1
        UNION
        SELECT personId, assessmentDate, TotalScore
        FROM Reassessments
        WHERE personId = 1
      ) a
) b
WHERE RowId = 1 
```

它会是这样的。

[http://www.codeproject.com/Articles/308281/How-to-Use-ROW_NUMBER-to-Enumerate-and-Partition-R](http://www.codeproject.com/Articles/308281/How-to-Use-ROW_NUMBER-to-Enumerate-and-Partition-R)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:44:02.650

我注意到您的 SQL 没有应用您从嵌套联合创建的别名“u”。此外，您的主要选择没有应用在下面的 Group By 中应用的 personId。尝试以下操作：

```
SELECT u.personId AS offenderCD, MAX(u.assessmentDate) AS maxSubmittedDt, u.TotalScore
FROM (
SELECT personId, assessmentDate, TotalScore
FROM  initialAssessment
WHERE personId = 1

UNION

SELECT personId, assessmentDate, TotalScore
FROM Reassessments
WHERE personId = 1) AS u
Group BY u.personId, u.assessmentDate, u.TotalScore
Order By u.personId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T01:25:37.580

如果您只想查询一个人，您可以使用 TOP (n) + ORDER BY：

```
SELECT TOP (1) personId, assessmentDate, TotalScore
FROM (
    SELECT personId, assessmentDate, TotalScore
    FROM  initialAssessment
    WHERE personId = 1
    UNION
    SELECT personId, assessmentDate, TotalScore
    FROM Reassessments
    WHERE personId = 1) AS u
) s
ORDER BY assessmentDate DESC
; 
```

[但是， @Brian White 的建议](https://stackoverflow.com/a/13897563/297408)是适用的，无论您想在一次查询中获得多少人的结果。

# python - tkinter 条目小部件和变量

> ID：13886812
> 
> 赞同：0
> 
> 时间：2012-12-14T21:55:12.690
> 
> 标签：python, python-3.x, tkinter

我坐在一个我无法弄清楚自己的情况下。

当我使用 Entry 小部件进行用户交互时，我很难找到验证数据的正确方法。

情况：

我有两个 Entry 小部件，用户必须在其中输入两个必须是浮点数的变量。

虽然我可以运行一个只有在输入的值为浮点数时才能正常工作的程序，但如果我将其留空或输入字母会关闭 - 因此我想验证该条目是否为浮点数：

```
variableentry = Entry(root and so on)
variableentry.grid() 
```

我正在使用：

```
variablename = float(variableentry.get()) 
```

当我：

```
print(type(variablename) 
```

我得到消息：

```
<class 'float'> 
```

因此我无法使用

```
#...
try:
    if(variablename is not float):
    messagebox.showerror("Error", "Incorrect parameter")
    return 
```

这显然不起作用，因为变量名属于“float”类而不是float，我尝试了不同的输入方式而不是if语句中的float - 没有任何运气。

有任何想法吗？

提前，谢谢！

最好的祝福，

卡斯帕

编辑：

我找到了：

```
from Tkinter import *

class ValidatingEntry(Entry):
    # base class for validating entry widgets

    def __init__(self, master, value="", **kw):
        apply(Entry.__init__, (self, master), kw)
        self.__value = value
        self.__variable = StringVar()
        self.__variable.set(value)
        self.__variable.trace("w", self.__callback)
        self.config(textvariable=self.__variable)

    def __callback(self, *dummy):
        value = self.__variable.get()
        newvalue = self.validate(value)
        if newvalue is None:
            self.__variable.set(self.__value)
        elif newvalue != value:
            self.__value = newvalue
            self.__variable.set(self.newvalue)
        else:
            self.__value = value

    def validate(self, value):
        # override: return value, new value, or None if invalid
        return value 
```

来自[http://effbot.org/zone/tkinter-entry-validate.htm](http://effbot.org/zone/tkinter-entry-validate.htm)

然而，其余的代码不是写在课堂上的（我知道这不是最优的，但这是老师要求的）会影响上面的例子吗？我将如何使它适合我的需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:24:52.607

您要做的是尝试将输入框的内容转换为浮点数，如果无法转换则报告错误消息。这样做很好，但是要捕获由给定的字符串无法转换时`variablename = float(variableentry.get())`引发的错误，您必须将该行包装在 try 块中，并捕获由. 如果没有异常，您可以继续执行代码：`float``float`

```
try:
    variablename = float(variableentry.get())
except ValueError:
    # error messagebox, etc
else:
    # do stuff with variablename 
```

# c# - 新的重复对象的主键冲突

> ID：13886813
> 
> 赞同：4
> 
> 时间：2012-12-14T21:55:20.990
> 
> 标签：c#, entity-framework, primary-key, entity-framework-5

我正在使用带有代码优先方法的 Entity Framework 5。

我有两个彼此具有多对多关系的类，`Movie`并且`Person`. A通过 a`Movie`与 a 相关。每个都可以有多个字符。`Person``Character``Movie`

```
public class Movie {
    public int Id { get; set; }
    public string Title { get; set; }
    public int? Year { get; set; }
    public virtual ICollection<Character> Characters { get; set; } 

    public Movie() {
        Characters = new HashSet<Character>();
    }
}

public class Character {
    public string Name { get; set; }    
    public virtual Movie Movie { get; set; }    
    public virtual Person Person { get; set; }
}

public class Person {
    public int Id { get;set; }
    public string Name { get; set; }
    public virtual ICollection<Character> Characters { get; set; }

    public Person() {
        Characters = new HashSet<Character>();
    }
} 
```

有时一个`Movie`可以有一个`Person`播放多个`Character`。在这种情况下尝试添加时遇到问题`Movie`...

假设 Movie1 有 2 个角色都由 Person1 扮演。保存更改时，EF 将从 Character1 开始，并看到数据库中不存在 Person1 并将其插入`Person`到`dbo.Person`. 然后它将转到 Character2 但看到 Person1 已经存在并且将引发主键冲突。

在我的`MovieRepository`我有一个`Add(Movie entity)`方法。我遍历每`Character`一个`Movie`并检查`Person`数据库中是否存在相关的。如果他们这样做，那么我将`Person`属性设置为现有的`Person`. 这在正常情况下有效，但如果`Person`根本不存在，那么我不确定如何避免 PK 违规，这是我的问题:)

```
public class MovieRepository : Repository<Movie> {
    public MovieRepository(MovieContext context) : base(context) {}

    public override void Add(Movie entity) {
        foreach (var character in entity.Characters) {
            var person = Context.People.FirstOrDefault(p => p.Id == character.Person.Id);
            if (person != null)
                character.Person = person;
        }
        Context.Movies.Add(entity);
    }
} 
```

只是为了添加更多信息。我使用存储库模式和工作单元模式来保存我的存储库和上下文。所以`UnitOfWork`类负责`SaveChanges()`。

尝试这样做`MovieRepository.Add()`可能不是完成此任务的最佳/适当方式。我期待着任何和所有的建议。

只是为了进一步澄清，我从 Rotten Tomatoes API 获取数据，json 看起来像这样......

```
{data : [{
    Id: 12345,
    Title: 'Movie1',
    Year: 2010,
    Character: [{
        Name: 'Character1',
        Person: { Id: 1, Name: 'Person1' }
    },{
        Name: 'Character2',
        Person: { Id: 2, Name: 'Person2' }
    }]
}]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:27:46.447

您如何为 2 个字符发送同一个人对象？它是否已经有一个唯一的密钥集？否则它们将被实体框架视为两个独立的对象。如果您已经定义了唯一键，则可以先检查 Local 集合，然后检查上下文，或者将人员添加到上下文中。

```
// Only works if the unique key is already defined.
var person =
    Context.People.Local.FirstOrDefault(p => p.Id == character.Person.Id) ??
    Context.People.FirstOrDefault(p => p.Id == character.Person.Id);

if (person == null)
    Context.People.Add(person); 
```

但是，我建议可能更改您的聚合，以便此方法根本不会添加人员。您可以将添加人员和添加“电影”（作为 {Movie, Character} 的聚合）视为 2 个单独的操作。如果您单独管理人员（这样一个人可以有零个或多个字符），这将是有意义的。

这会更有意义，因为电影不“拥有”人，这是多对多的关系。

例如在 UI 中：添加带有角色的电影时，您可以选择扮演角色的人，或者此时添加一个新角色。因此，当发送要保存的电影时，您将始终拥有一个 character.PersonId，它将指向已保存的人员对象。

当然，这可能不适用于您的特定场景，只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:20:50.047

如果我正确理解了这个问题，这只发生在：

1.  该人以前不存在于数据库中
2.  该人在电影中扮演多个角色？

更明确地说，如果一个已经存在于数据库中的人在电影中扮演两个角色，你是否也会遇到同样的失败？

听起来您可能需要确保在第二次使用新人之前坚持（保存）他们？

就像是：

```
public class MovieRepository : Repository<Movie> {
public MovieRepository(MovieContext context) : base(context) {}

public override void Add(Movie entity) {
    foreach (var character in entity.Characters) {
        var person = Context.People.FirstOrDefault(p => p.Id == character.Person.Id);
        if (person != null) {
            character.Person = person;
        } else {
            personRepository.Save(character.Person)
        }
    }
    Context.Movies.Add(entity);
} 
```

# css - 图标字体（@font-face）未在 localhost 上呈现

> ID：13886817
> 
> 赞同：1
> 
> 时间：2012-12-14T21:55:42.943
> 
> 标签：css, permissions, nginx, icons, font-face

我在我的 locahost 和 mysite.com 上都使用了[font-awesome icon-font，它们都是 nginx 服务器。](http://fortawesome.github.com/Font-Awesome/)奇怪的是，当我尝试从[Glyphicons](http://glyphicons.com/)实现类似的图标字体集时，图标仅在 mysite.com 上呈现，**而不**在我的 localhost 上呈现。

这是图标的正常外观与它们在我的本地主机上的外观：

**正常：** ![普通的](../Images/944d609164af082767f12b9e83b1609f.png) **破灭：** ![破获](../Images/9835af6c9aedaed0056ee4eb80808a81.png)

问题是`font-family: 'Glyphicons'`我的本地主机上无法识别该属性，因为简单地注释掉`font`mysite.com 上的 CSS 属性会重新创建红框外观：

```
.glyphicons i::before {
  position: absolute;
   left: 0;
  top: 0;
  font: 24px/1em 'Glyphicons'; // commenting out this line re-creates the red box pattern
  font-style: normal;
  color: #1D1D1B;
  color: red;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:12:33.637

我要感谢@David（见上面的评论）帮助我回答我自己的问题。问题是文件权限问题。我刚刚将 Glyphicons 文件夹添加到我的本地主机应用程序文件夹（即 /html）中，但它没有正确的权限。只需在命令行中键入以下内容即可解决问题：

```
html TimPeterson$ chmod -R 777 assets/glyphicons/   /*this command allows access to all (777) for all files and folders (-R) within the glyphicons folder*/ 
```

所以它不是 CSS、mime-types 或任何其他与我最初认为的 Nginx 相关的东西。

# matlab - Matlab / Octave加法，丢失精度

> ID：13886821
> 
> 赞同：3
> 
> 时间：2012-12-14T21:55:59.990
> 
> 标签：matlab, octave

在 Matlab/octave 中，当我添加两个数字时，我丢失了一些数字。

```
>>> 23.0 + 0.65850
ans =  23.659 
```

我如何取回一个双倍的`23.65850`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T22:21:08.430

*该数字仅*出于显示目的而四舍五入。`format`如果您想更改它，请查看该命令。

```
octave> 23 + 0.65850
ans =  23.659
octave> format free
octave> 23 + 0.65850
ans = 23.7
octave> format long g
octave> 23 + 0.65850
ans =              23.6585 
```

查看`help format`其他选项，但请记住，这*只会*影响显示。您*不会*失去任何精度。

# search - ColdFusion 10.0 ORMSearch 返回两个单独的查询：实体 + 分数 - 错误 3338790

> ID：13886824
> 
> 赞同：2
> 
> 时间：2012-12-14T21:56:27.950
> 
> 标签：search, coldfusion, entity, coldfusion-10

[我可能想知道是否有人对 ColdFusion 10.0 - Bug 3338790](https://bugbase.adobe.com/index.cfm?event=bug&id=3338790)有解决方案 。简而言之，这会导致 ORMSearch 返回一个具有两个结构的数组：实体和分数。我无法弄清楚如何将这两个数组与 CFML 或 AS3 结合起来——我尝试过追加、循环等。

我非常感谢您提供的任何帮助。谢谢你。

AK

# html - 定义列表与带有标题的无序列表 - 哪个更有意义？

> ID：13886828
> 
> 赞同：2
> 
> 时间：2012-12-14T21:56:50.600
> 
> 标签：html, accessibility, semantic-markup

假设您有一个电视节目列表，其中有一个节目标题和一个节目描述。您还希望残障人士也可以**访问该列表。**

使用定义列表是否更有意义：

```
<dl>
    <dt>...title...</dt><dd>...description...</dd>
    ...
</dl> 
```

还是带有标题的无序列表？

```
<ul>
    <li><h3>...title...</h3><p>...description...</p></li>
    ...
</ul> 
```

哪个更具有语义意义并且对**屏幕阅读器**的反应更好？（知道它们都可以以相同的方式设置样式）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T16:36:41.433

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:10:40.317

我更喜欢前者。首先，仅基于*内容*对我来说似乎更有意义。

但这就是我。我认为标记应该反映文档结构，既然（如你所说）CSS 可以以任何一种方式设置样式，为什么不让标记反映内容呢？包含包含标题标题的项目的列表，后跟描述对我来说似乎有点矫枉过正。

但是，嘿。你知道他们对意见的看法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T22:21:21.223

在这种情况下，使用定义列表更有意义。除此之外，真的有必要使用列表吗？仅在带有标签（x = 2-6）的页面上适当地使用您的标题标签并将所有内容应用在该标题下可能更有意义。特别是电视节目，使用“列表”来显示它们的定义或其他任何内容可能没有意义。同样，它们可以设置样式，所以我只担心语义学。

希望这有助于扎克

# ruby - 刚刚在 OSX 上安装了 Sass - 这是什么？> 警告：您的 PATH 中没有 /Users/Orion/.gem/ruby/1.8/bin，gem 可执行文件将无法运行

> ID：13886835
> 
> 赞同：1
> 
> 时间：2012-12-14T21:57:43.797
> 
> 标签：ruby, sass

对 Ruby 或 Sass 不太熟悉。

它似乎已经安装，但我应该做些什么改变？

```
WARNING:  Installing to ~/.gem since /Library/Ruby/Gems/1.8 and
  /usr/bin aren't both writable.
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/installer.rb:149: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040777
WARNING:  You don't have /Users/Orion/.gem/ruby/1.8/bin in your PATH,
  gem executables will not run.
Successfully installed sass-3.2.3
1 gem installed
Installing ri documentation for sass-3.2.3...
Installing RDoc documentation for sass-3.2.3... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T22:09:46.667

它说出了什么问题：

您正在使用 OS X 附带的过时系统 ruby​​，它安装在您的用户目录之外。

这样你就可以

*   通过执行在系统范围内安装 gems`sudo gem install sass`
*   通过在 ~/.bash_profile 中执行此操作将 bin 目录添加到您的 PATH `PATH=$PATH:/Users/Orion/.gem/ruby/1.8/bin` `export PATH`

*   或者我最推荐的： [安装 RVM](https://rvm.io/)，它将为您提供更现代的 ruby​​ 并使事情变得更容易。

安装 RVM：

```
$ \curl -L https://get.rvm.io | bash -s stable --ruby
rvm install 1.9.3
rvm use 1.9.3 
```

这就是你所需要的。Ruby 1.8 仍然可以用于大多数项目，但到目前为止，除非你有遗留的 gems/apps，否则真的没有理由使用它。如果您需要其他 rubies，您可以使用 RVM 和 switch 轻松安装它们。

# ruby-on-rails - 计算rails中的模型集合

> ID：13886842
> 
> 赞同：0
> 
> 时间：2012-12-14T21:58:14.017
> 
> 标签：ruby-on-rails, count

目前我有 3 个模型`User`：`Collection`和`Item`。

A`User`有很多`Items`通过`Collections`
An`Item`有很多`Users`通过`Collections`

要获得`User`' 的集合，我可以做`user.items`相应的显示。

我想要做的是聚合这个列表的重复项。

说一个`User`添加`Item 1`，然后`Item 2`再另一个`Item 1`。
清单应该是：

```
User

-Item 1 Name - Item 1 Description - Item 1 Category - Qty 2
-Item 2 Name - Item 2 Description - Item 2 Category - Qty 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:29:00.900

查看[Enumerable#group_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)

您可以使用以下内容对所有项目进行分组：

```
user.items.group_by(&:id) 
```

...这将为您提供一个散列，其中键是项目 ID，值是共享该 ID 的项目数组。然后，您可以将单个项目进一步折叠到一个计数：

```
Hash[user.items.group_by(&:id).map {|k,v| [k, v.size]}] 
```

...这将为您提供一个哈希，其中键是项目 ID，值是具有该 ID 的项目数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:38:17.570

在您的控制器中：

```
item_groups = user.items.group_by(&:id)
@item_counts = item_groups.map {|item_id,items| [items.first, items.size]} 
```

在您看来：

```
@item_counts.each do |item, size|
  ... item.name, size or whatever you want to print 
```

# java - 在运行时切换一组键盘快捷键

> ID：13886850
> 
> 赞同：1
> 
> 时间：2012-12-14T21:58:53.707
> 
> 标签：java, swing, keyboard-shortcuts, key-bindings

小型单窗口应用程序（游戏）具有由 GUI 按钮控制的图形对象。我有一组映射到它们的键盘快捷键（即箭头键）。选择动态更改快捷方式集是否相当容易？例如，JOption 在箭头键和 WASD 之间进行选择？

虽然我仍在为绑定而苦苦挣扎，但这是我对开关本身的想法：

```
// KeyStroke objects to be used when mapping them to the action
KeyStroke keyUp, keyLeft, keyRight, keyDown;

JRadioButton[] kbdOption = new JRadioButton[2];

kbdOption[0] = new JRadioButton("Arrow Keys");
kbdOption[1] = new JRadioButton("WASD");

if (kbdOption[0].isSelected()) {
    keyUp = KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0);
    keyLeft = KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0);
    keyRight = KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0);
    keyDown = KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0);
} else if (kbdOption[0].isSelected()) {
    keyUp = KeyStroke.getKeyStroke(KeyEvent.VK_W, 0);
    keyLeft = KeyStroke.getKeyStroke(KeyEvent.VK_A, 0);
    keyRight = KeyStroke.getKeyStroke(KeyEvent.VK_D, 0);
    keyDown = KeyStroke.getKeyStroke(KeyEvent.VK_S, 0);
} 
```

由于我无法自己测试它，它看起来不错吗？范围是否合适（也就是说，我可以在构建 GUI 其余部分的相同方法中实际使用它，还是应该从其他地方调用 if-else）？它会在程序运行时即时更改绑定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:39:18.437

我倾向于使用 Alex Stybaev 的第一反应：只需添加所有绑定。像这样的东西：

```
gamePanel.getActionMap().put("left", leftAction);
gamePanel.getActionMap().put("right", rightAction);
gamePanel.getActionMap().put("up", upAction);
gamePanel.getActionMap().put("down", downAction);

InputMap inputMap =
    gamePanel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);

inputMap.put(KeyStroke.getKeyStroke("LEFT"),  "left");
inputMap.put(KeyStroke.getKeyStroke("RIGHT"), "right");
inputMap.put(KeyStroke.getKeyStroke("UP"),    "up");
inputMap.put(KeyStroke.getKeyStroke("DOWN"),  "down");

inputMap.put(KeyStroke.getKeyStroke("A"), "left");
inputMap.put(KeyStroke.getKeyStroke("D"), "right");
inputMap.put(KeyStroke.getKeyStroke("W"), "up");
inputMap.put(KeyStroke.getKeyStroke("S"), "down");

inputMap.put(KeyStroke.getKeyStroke("KP_LEFT"),  "left");
inputMap.put(KeyStroke.getKeyStroke("KP_RIGHT"), "right");
inputMap.put(KeyStroke.getKeyStroke("KP_UP"),    "up");
inputMap.put(KeyStroke.getKeyStroke("KP_DOWN"),  "down");

inputMap.put(KeyStroke.getKeyStroke("NUMPAD4"), "left");
inputMap.put(KeyStroke.getKeyStroke("NUMPAD6"), "right");
inputMap.put(KeyStroke.getKeyStroke("NUMPAD8"), "up");
inputMap.put(KeyStroke.getKeyStroke("NUMPAD2"), "down"); 
```

# rest - ExtJS disableCache 不起作用

> ID：13886852
> 
> 赞同：0
> 
> 时间：2012-12-14T21:59:06.747
> 
> 标签：rest, extjs

我使用 ExtJS 4 和一个`RESTProxy`. 每次我发送请求（PUT 或 GET）时，我的请求中都会包含缓存：

`http://localhost:9000/todos?_dc=1355520254945`

这是我的商店定义：

```
Ext.define('MyStore'), {  
     extend: 'Ext.data.Store',  
     model: 'MyModel',  
     proxy: {  
         type: 'rest',  
         url: '/todos',  
         disableCaching: false  
     }  
 }); 
```

我也用过`disableCaching: false`，但是不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:23:51.023

尝试这个：

```
noCache: false 
```

因为 disableCaching 字段不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T20:02:05.110

您可以像这样全局关闭缓存

```
<script src="ext-all.js" type="text/javascript"></script>

<script type="text/javascript">
     Ext.data.Connection.disableCaching = false;      // for file uploads
     Ext.data.proxy.Server.prototype.noCache = false; // for all stores loads
     Ext.Ajax.disableCaching = false;                 // for all Ext.Ajax.request()
</script>
<script type="text/javascript" src="app.js"></script> 
```

# perl - 如何使用 Perl 提供 Kerberos 协商身份验证 HTTP 服务器端

> ID：13886860
> 
> 赞同：2
> 
> 时间：2012-12-14T21:59:43.677
> 
> 标签：perl, http, webserver, kerberos

我正在尝试编写一个基于 Perl 的 Web 应用程序，它使用 Kerberos 5 Negotiate Authentication 对其用户进行身份验证。我正在使用的 Perl Web 框架是 Perl Dancer，它处于非 CGI、自包含的操作模式。我在 Linux 的 Fedora 发行版上运行它。

协商身份验证可以使用从用户浏览器转发的现有 Kerberos 票证，或使用常规基本身份验证来允许用户建立他们的第一个 Kerberos 票证。这样做的最终效果是支持协商身份验证的站点无缝集成到 SSO 环境中。

CPAN 有 Authen::Krb5 模块，我怀疑它是提供协商身份验证的基础，但是我只能在 CPAN 上找到客户端模块。这些客户端模块可用作真正简单的基本身份验证的后端，或用于建立第一个协商身份验证票证，但不能执行协商身份验证本身（例如 Authen::Krb5::Easy）。

我在[这里](http://mbechler.eenterphace.org/blog/index.php?/archives/5-php_krb5-beta-Negotiate-auth-with-GSSAPI-for-PHP.html)找到了 PHP 的实现。随附[的操作指南](http://mbechler.eenterphace.org/blog/index.php?/archives/6-Doing-GSSNegotiate-SSO-using-Mozilla-Firefox,-MIT-Kerberos-and-PHP.html)提供了一个很好的高级概念，说明协商身份验证应该如何工作，以及如何在 Web 应用程序中使用为 Perl（或任何语言）编写的协商身份验证库。理想情况下，我想使用一个与这个 PHP 具有类似接口的 Perl 库。

是否存在 Perl 协商身份验证服务器端库？如果不存在，最好的写法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:28:39.753

您`mod_auth_kerb`或从服务器环境中`mod_auth_spnego`读取。`REMOTE_USER`你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:55:40.577

我做了更多的搜索，基本上所有实现 Negotiate/SPENGO/RFC4559 服务器端的库都是用 C 编写的，通常基于 Apache 的 mod_auth_kerb。

虽然没有出现 Perl 库，但我确实找到了一个用于 Python 2 的库，称为[PyKerberos](http://trac.calendarserver.org/browser/PyKerberos/trunk)。它似乎在源代码中得到了很好的解释（其他库严重缺乏的东西），而且，作为奖励，这个 Python 2 模块似乎可以从发行包存储库（Fedora 中的 python-kerberos）中广泛获得。

目前，我的问题的最佳答案似乎是通过 Perl 的 Inline::Python 模块从 Perl 调用 PyKerberos。这个解决方案可能很慢（Perl -> Python -> C），但由于我的应用程序没有任何严格的性能要求，它应该足够了。

# windows-8 - Win 8 js代码安全

> ID：13886862
> 
> 赞同：0
> 
> 时间：2012-12-14T22:00:02.610
> 
> 标签：windows-8, microsoft-metro, windows-store-apps, winjs

我正在用 js 开发一个 win 8 游戏。

当我部署我的应用程序时，任何用户都可以看到我的代码文件吗？我的文件有一些数据库密码，我需要使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:18:02.940

如果您的 REST 服务是公开的，那么实际上并没有什么好的方法可以防止人们使用您的 REST 服务。当然，您可以混淆事物、对代码进行数字签名、传递证书等。但最终，有人总有可能对您的代码进行逆向工程、模拟受信任的客户端或直接诊断网络流量。

这里更好的解决方案是专注于减轻不必要的攻击。验证进入每个 Web 服务调用的输入，不信任*任何内容*，并对您的 API 进行[威胁分析](http://en.wikipedia.org/wiki/Threat_%28computer%29#Threat_analysis)。例如，如果您正在编写 Battleship 游戏，请让服务器跟踪每艘船的位置，并且永远不要将这些信息暴露给客户端，从而允许他们编写可能作弊的假客户端。做评分服务器端，所以人们不能只是发布假分数并获得高分榜。

话虽如此，除非您正在编写下一个魔兽世界，否则不太可能有人对您的游戏足够关心以跳过任何箍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:40:31.290

每个人都可以访问您的应用程序的每个源文件。您只需转到*C:\Program Files\WindowsApps\*即可查看所有已安装的应用程序。如果您安装了 HTML5 应用程序，您会注意到任何人都可以自由访问所有 .html 和 .js 文件。

您可能想要创建一个不容易进行逆向工程的简单 C# 库，并将应用程序的“安全关键”部分放入其中。您可以在此 MSDN 页面中查看如何将 C# 集成到 HTML/JS 应用程序中：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh779077%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh779077%28v=vs.110%29.aspx)

# android - 在 android 中使用 SmsManager.sendTextMessage 方法发送空白短信

> ID：13886865
> 
> 赞同：0
> 
> 时间：2012-12-14T22:00:16.087
> 
> 标签：android, sms, illegalargumentexception, smsmanager

我创建了一个 android 应用程序，它的功能之一是发送短信，当我尝试发送空白短信时，它会引发异常。

这是代码：

```
SmsManager sm=SmsManager.getDefault();
sm.sendTextMessage("9999", null, messageBody,sentPI, deliveredPI); 
```

messageBody 可能是空字符串，也可能是字符串，之前的方法在 messageBody 为空字符串时抛出 IllegalArgumentException！

我该怎么做才能发送空白短信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:04:05.973

查看[文档](http://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29 "文档")后：

这种方法：

投掷

```
IllegalArgumentException    if destinationAddress or text are empty 
```

# excel - 如果小于某个值，则删除数据标签

> ID：13886866
> 
> 赞同：1
> 
> 时间：2012-12-14T22:00:16.197
> 
> 标签：excel, vba

我有应用于图表的数据标签，现在我正在尝试删除那些小于 1% 的标签。这是我所拥有的 -

```
Dim cht As Chart

Set cht = ActiveChart

If Range("B8") < 0.01 Then
    cht.SeriesCollection(1).DataLabels.Select
    Selection.Delete
End If 
```

我不太确定我做错了什么，但所有数据标签都被删除了。你知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:04:10.743

您正在删除此代码中整个系列的 DataLabels。

您需要做的是删除系列上特定点的 DataLabel。

这应该这样做：

```
Dim cht As Chart

Set cht = ActiveChart

If Range("B8") < 0.01 Then
    cht.SeriesCollection(1).Points(1).DataLabel.Delete
End If 
```

`SeriesCollection(1)`是图表中的第一个系列。`Points(1)`是图表上的第一个点。根据您的代码的需要进行调整。

# php - 多少个sql查询太多了？

> ID：13886874
> 
> 赞同：-2
> 
> 时间：2012-12-14T22:01:19.653
> 
> 标签：php, mysql, sql

多少 SQL 查询太多了？我有以下一段代码，它在一个循环中，根据所选月份在 28-31 次之间循环。它用于根据数据库中的日期更改 css 类。每次调用 $rows 变量时，它会重新运行查询吗？这段代码有效吗？

```
$sql = ("SELECT * FROM dates WHERE dates.from<='".$date."' AND dates.to>='".$date."'");
$result = mysql_query($sql);
$rows = mysql_num_rows($result);
if ($rows >= 1)
{
    $row = mysql_fetch_array($result);

    if ($rows == 2)
        $calendar .= '<td class="calendar-day-booked">';
    else
    {
        if ($row['from'] == $date)
            $calendar .= '<td class="calendar-day-from">';
        elseif ($row['to'] == $date)
            $calendar .= '<td class="calendar-day-to">';
        else        
            $calendar .= '<td class="calendar-day-booked">';
    }
}
else
    $calendar.= '<td class="calendar-day">'; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T22:07:16.350

什么太多没有明确的答案，因为有太多的参数，例如有多少用户，你的数据库在什么样的硬件上，等等。

如果您的问题是“这对最终用户来说会不会太慢？” 那么你应该分析代码，看看它是如何执行的。

要回答关于是否每次分配 $rows 时是否有查询的问题，答案是肯定的 - 每次获得 $rows 时都会运行 SQL 查询。

主观上，我会说这是低效的。如果这是我的代码，我会重写它，以便 SQL 获取整个月份（例如相应地设置日期范围），然后在 PHP 中处理返回的数据，循环遍历数据并一次处理所有月份。我可能会遍历返回的数据一次，构建一个以日期为键的数组，然后将它们全部内爆。

# knockout.js - 在 Knockout 中绑定后可以访问 viewModel 吗？

> ID：13886878
> 
> 赞同：1
> 
> 时间：2012-12-14T22:01:39.583
> 
> 标签：knockout.js

我使用 Knockout 创建了一个主详细信息 ui。主节点上的 itemselected 事件处理程序绑定给定数据项的详细信息视图。到目前为止一切正常，但我想访问绑定到详细信息区域的数据，以便在更新后将其发布到服务器。

我是 Knockout 的新手，所以请告知是否有更好的方法。

```
//the master binding code
$.ajax({
url: getURL,
success: function (data) {
var viewModel = new itemModel(data);
var scope = document.getElementById("listContainer");
ko.cleanNode(scope);
ko.applyBindings(viewModel, scope);
}

//the viewmodel with event hander
function itemWrapper(item) {
    this.SolutionSet = ko.observable(item.SolutionSet);
    this.Insight = ko.observable(item.Insight);
    this.DateFrom = ko.observable(item.DateFrom);
    this.DateTo = ko.observable(item.DateTo);
}

var itemModel = function (data) {
    var self = this;
    var observableData = ko.utils.arrayMap(data, function (item) {
        return new itemWrapper(item);
    });

    self.items = ko.observableArray(observableData);
    onItemSelected = function (data) {
        var scope = document.getElementById("itemEditor");
        ko.cleanNode(scope);
        ko.applyBindings(data, scope);
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:06:53.253

我假设您有一个表格或其他东西，然后您正在编辑您的详细信息？

只需将提交保留在您的视图模型中

```
var itemModel = function (data) {
   this.onFormSubmit = function (item) {
     //call ajax and pass you item
   }
}

<form data-bind="submit: itemModel.onFormSubmit">
   fields here like so
   <input data-bind='value: itemModel.DateFrom , valueUpdate: "afterkeydown"'/> 
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:10:51.480

您的`onItemSelected`函数可能应该读取`self.onItemSelected`（否则它是一个全局变量`window`）。

您可以使用您的第二个视图模型技术，或者如 Boone 建议的那样，只需将表单放在第一个视图模型的范围内，然后让 Knockout 解析它。

添加：

```
...
self.selectedItem = ko.observable();
self.onDetailsSubmit = function () { 
    self.selectedItem(null);
    // anything else you want to do
};
... 
```

到您的视图模型并使用所选项目的索引对其进行更新（或将其保留为空以隐藏表单）。

```
<form data-bind="visible: selectedItem()">
    <!-- ko with: items()[selectedItem()] -->
    <input type="text" data-bind="value: SolutionSet" />
    <input type="text" data-bind="value: Insight" />
    <input type="text" data-bind="value: DateFrom" />
    <input type="text" data-bind="value: DateTo" />
    <button data-bind="click: $parent.onDetailsSubmit">Submit</button>
    <!-- /ko -->
</form> 
```

我是凭记忆写的，希望它有效。

# knockout.js - 如何在 Knockout 中使用 $context？

> ID：13886879
> 
> 赞同：1
> 
> 时间：2012-12-14T22:01:51.730
> 
> 标签：knockout.js

在阅读了关于[Binding Context](http://knockoutjs.com/documentation/binding-context.html)的 Knockout 文档后，我希望

这个 HTML：

```
<div data-bind="with: blah">
    <pre data-bind="text: ko.toJSON($context, null, 2)"></pre>
</div> 
```

这个JS：

```
var viewModel = {
    blah: {
        hello: "hello",
    }
};

ko.applyBindings(viewModel); 
```

会打印这个：

```
blah: {
    hello: "hello",
} 
```

但是，我收到以下错误：

错误：无法解析绑定。消息：错误：传递一个返回 ko.computed 值的函数；绑定值：文本：ko.toJSON($context, null, 2)

应该如何使用？

[JsFiddle](http://jsfiddle.net/mdavis/fmWMq/1/)供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:16:45.760

刚刚想通了。$context 和 $parentContext 只保存该上下文的特殊属性。因此，为了得到我所期望的，我必须将 HTML 更改为：

```
<div data-bind="with: blah">
    <pre data-bind="text: ko.toJSON($context.$data, null, 2)"></pre>
</div> 
```

[更新了 JsFiddle](http://jsfiddle.net/mdavis/fmWMq/2/)

# c - 从简单的浮点计算中得到错误的输出

> ID：13886880
> 
> 赞同：-1
> 
> 时间：2012-12-14T22:02:04.473
> 
> 标签：c, floating-point, floating-point-conversion

> **可能重复：**
> [C++：“float”的 printf() 格式规范是什么？](https://stackoverflow.com/questions/7197589/c-what-is-the-printf-format-spec-for-float)

我对编程完全陌生，只是入门级别（仍然非常新手且容易出错:)

我的问题如下。我正在用 C 编写一个程序，将 27 华氏度转换为摄氏度。

代码如下：

* * *

```
int main (void)

{
    float F = 27;
    float C = (F - 32) / 1.8;

    printf ("27 degrees Fahrenheit is %i degrees Celsius ", C);

    return 0;    
} 
```

得到以下输出：

```
27华氏度是-2147483648摄氏度

```

没想到结果这么冷。我的计算器应该是-2.77。可能有什么问题？由于这样的计算，世界可能会冻结！))

我想这是我要问的基本原理，但对我来说听起来很有趣。感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:04:11.900

```
printf ("27 degrees Fahrenheit is %f degrees Celsius ", C); 
```

`%i`是 的格式说明符`int`。对于传递 a`double`或 a `float`，您需要`%f`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:06:09.733

在您的`printf()`文件中，您指定`C`指向的内存应该被解释为一个 int（32 位或 64 位，具体取决于您的系统和编译器）。但存储在该内存位置的实际值是`float`.

所以`printf()`会感到困惑并输出`int`内存中用于的位的值`float`

# java - 此示例中使用的令牌是什么？

> ID：13886881
> 
> 赞同：0
> 
> 时间：2012-12-14T22:02:05.920
> 
> 标签：java

有人可以告诉我这段代码中的令牌是什么吗？我最近刚刚在 Java 中发现了标记，并试图了解为什么要使用它们。我以为令牌被用作断点，但在这里它几乎看起来像是用来限制

```
private String printResult()
{
    StringBuilder result = new StringBuilder();
    String swimType=null;
    String length=null;
    String width=null;
    String depth=null;
    String volume=null;
    String radius=null;
    String pnlName = null;
    try {
        File resultFile = new File("Report.txt");
        Scanner resultScanner = new Scanner(resultFile);

        while(resultScanner.hasNext())
        {
            StringTokenizer strToken = new StringTokenizer(resultScanner.nextLine(), ":");
            if(strToken.hasMoreTokens())
            {
                pnlName = strToken.nextToken();
                swimType = strToken.nextToken();

                if("Box".equalsIgnoreCase(swimType))
                {
                    length = strToken.nextToken();
                    width = strToken.nextToken();
                    depth = strToken.nextToken();
                    volume = strToken.nextToken();
                    result.append(createResultStr(swimType, length, width, depth, volume));
                }
                else
                {
                    radius = strToken.nextToken();
                    depth = strToken.nextToken();
                    volume = strToken.nextToken();                      
                    result.append(createResultStr(swimType, radius, depth, volume));
                }

            }               
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:06:20.873

标记化是您根据字符拆分字符串的过程。您可能希望以逗号分隔。您通过标记器传递字符串，给出'，'作为分隔符。然后，当您从分词器中读取每个项目时，它们会根据分隔符进行拆分。我见过的一种常见方法是阅读直播。分词器在换行符上拆分流，然后使用另一个分词器在逗号或制表符上拆分每一行。

文本的处理通常包括解析格式化的输入字符串。*解析* 是将文本划分为一组离散的部分或*标记，* 它们以一定的顺序可以传达语义含义。**StringTokenizer** 类提供了这个解析过程的第一步，通常称为*词法分析器* （词法分析器）或*扫描器*。 **StringTokenizer** 实现了**Enumeration** 接口。因此，给定一个输入字符串，您可以使用**StringTokenizer**枚举其中包含的各个标记。

要使用**StringTokenizer**，您需要指定一个输入字符串和一个包含分隔符的字符串。 *分隔符*是分隔标记的字符。分隔符字符串中的每个字符都被视为有效分隔符，例如，**“,;:”** 将分隔符设置为逗号、分号和冒号。默认的分隔符集由空白字符组成：空格、制表符、换行符和回车符。

**StringTokenizer** 构造函数如下所示：

```
StringTokenizer(String str) 
StringTokenizer(String str, String delimiters) 
StringTokenizer(String str, String delimiters, boolean delimAsToken) 
```

在所有版本中，*str* 都是将被标记的字符串。在第一个版本中，使用了默认分隔符。在第二个和第三个版本中，*delimiters* 是一个指定分隔符的字符串。在第三个版本中，如果*delimAsToken* 为**true**，则在解析字符串时分隔符也会作为标记返回。否则，不返回分隔符。 

前两种形式不将分隔符作为标记返回。一旦你创建了一个**StringTokenizer** 对象，**nextToken( )**方法就用于提取连续的标记。hasMoreTokens **( )**方法在有更多令牌被提取时返回**真 。**由于**StringTokenizer** 实现了**Enumeration**，因此也实现了 **hasMoreElements( )**和 **nextElement( )**方法，它们的作用分别与**hasMoreTokens( )**和**nextToken( )**相同。

这是一个创建**StringTokenizer** 来解析“key=value”对的示例。连续的“key=value”对组用分号分隔。

```
// Demonstrate StringTokenizer.
import java.util.StringTokenizer;

class STDemo {
    static String in = "title=Java-Samples;" +
        "author=Emiley J;" +
        "publisher=java-samples.com;" +
        "copyright=2007;";

    public static void main(String args[]) {
        StringTokenizer st = new StringTokenizer(in, "=;");
        while (st.hasMoreTokens()) {
            String key = st.nextToken();
            String val = st.nextToken();
            System.out.println(key + "\t" + val);
        }
    }
} 
```

该程序的输出如下所示：

```
title Java-samples 
author Emiley J 
publisher java-samples.com 
copyright 2007 
```

**请注意**
，如果 delimiter 为 null，则此构造函数不会引发异常。但是，尝试在生成的 StringTokenizer 上调用其他方法可能会导致`NullPointerException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:06:47.443

似乎输入文件包含特定结构的数据并且`:`是分隔符，因此它逐个标记读取数据并将值分配给变量，并进一步附加到某个`result`字符串

# r - 使用 NA 搜索大于/小于值

> ID：13886883
> 
> 赞同：5
> 
> 时间：2012-12-14T22:02:36.340
> 
> 标签：r, subset

我有一个数据框，我已经为其计算并添加了一`difftime`列：

```
 name   amount   1st_date   2nd_date  days_out
    JEAN  318.5 1971-02-16 1972-11-27  650 days
 GREGORY 1518.5       <NA>       <NA>   NA days
    JOHN  318.5       <NA>       <NA>   NA days
  EDWARD  318.5       <NA>       <NA>   NA days
  WALTER  518.5 1971-07-06 1975-03-14 1347 days
   BARRY 1518.5 1971-11-09 1972-02-09   92 days
   LARRY  518.5 1971-09-08 1972-02-09  154 days
   HARRY  318.5 1971-09-16 1972-02-09  146 days
   GARRY 1018.5 1971-10-26 1972-02-09  106 days 
```

我想将其分解并计算 days_out 为 0-60、61-90、91-120、121-180 的小计。

出于某种原因，我什至不能可靠地编写括号表示法。我希望

members[members$days_out<=120, ] 只显示 Barry 和 Garry，但我得到了很多行，例如：

```
NA.1095     <NA>     NA       <NA>       <NA>  NA days
NA.1096     <NA>     NA       <NA>       <NA>  NA days
NA.1097     <NA>     NA       <NA>       <NA>  NA days 
```

这些在原始数据中不存在。没有人是没有名字的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:07:29.203

这是`<`和其他关系运算符的标准行为：当被要求评估是否`NA`小于（或大于，或等于，或...）某个其他数字时，它们返回`NA`，而不是`TRUE`or `FALSE`。

这是一个示例，应该清楚正在发生的事情并指出一个简单的修复方法。

```
x <- c(1, 2, NA, 4, 5)
x[x < 3]
# [1]  1  2 NA
x[x < 3 & !is.na(x)]
# [1] 1 2 
```

* * *

要查看为什么所有由`NA`'s 索引的行都具有 row.names 之类`NA.1095`的 ,`NA.1096`等，请尝试以下操作：

```
data.frame(a=1:2, b=1:2)[rep(NA, 5),]
#       a  b
# NA   NA NA
# NA.1 NA NA
# NA.2 NA NA
# NA.3 NA NA
# NA.4 NA NA 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T22:52:19.723

如果您在控制台上工作，则该`subset`功能没有那个烦人的“功能”，这实际上是由于关系运算符的行为而`[`不是关系运算符。

```
subset(members, days_out <= 120) 
```

如果您正在编程，那么您可以在“幕后”使用`which`或 Josh 的结合`& is.na(.)`：`which`

```
members[ which(members$days_out <= 120), ] 
```

# python - python 正则表达式破折号

> ID：13886884
> 
> 赞同：1
> 
> 时间：2012-12-14T22:02:36.773
> 
> 标签：python, regex

我正在尝试在 python 中匹配以下行，但是该行不起作用。

示例文本是：

```
usr/local/java/latest/bin/java-Djava.util.logging.config.file=/usr/local/tomcat/foobarcode/conf/ 
```

示例蟒蛇：

```
re.match(r"/usr/local/java/latest/bin/java[-]Djava[.]util[.]logging[.]config[.]file[=]/usr/local/tomcat/(\.*)/conf/\.*", pidInfo) 
```

任何可以提供的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:08:48.343

这是您要执行的操作的固定版本：

```
>>> s = '/usr/local/java/latest/bin/java-Djava.util.logging.config.file=/usr/local/tomcat/foobarcode/conf/'
>>> re.match(r'/usr/local/java/latest/bin/java-Djava\.util\.logging\.config\.file=/usr/local/tomcat/(.*)/conf/.*', s)
<_sre.SRE_Match object at 0x1004a0648> 
```

问题：

1.  您不需要`.`作为通配符转义
2.  `\.`当用作文件名中的点时，您确实需要（优雅地）转义（`[.]`工作得很好，只是不太优雅的 IMO）
3.  `/`文件名中缺少根
4.  `-`并且`=`字符不需要转义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:05:22.417

问题是你逃脱了`.`. 这使它成为一个字面上的时期。您希望将其保留为未转义，以便它成为通配符：

```
re.match(r"/usr/local/java/latest/bin/java-Djava[.]util[.]logging[.]config[.]file=/usr/local/tomcat/(.*)/conf/.*", pidInfo) 
```

此外，您的输入示例不包含前导`/`，但这可能是复制粘贴错误。（请注意，没有必要逃避`=`and `-`）。

# runtime - 代码作为查询工作，使用 currentdb.execute 产生语法错误

> ID：13886886
> 
> 赞同：0
> 
> 时间：2012-12-14T22:02:46.593
> 
> 标签：runtime

我有以下代码：

`v_sql = "INSERT INTO tbl_eval_general ( id_empleado, id_evaluador, id_tipo_evaluación ) " & _ "SELECT Empleado_bloques.id_empleado, Empleado_bloques.id_evaluador, Empleado_bloques.id_tipo_evaluación " & _ " FROM Tipo_evaluación INNER JOIN Empleado_bloques ON Tipo_evaluación.id_tipo_evaluación = Empleado_bloques.id_tipo_evaluación " & _ " WHERE (((Empleado_bloques.id_empleado)= " & Me.id_empleado & "));" CurrentDb.Execute v_sql, dbFailOnError`

 `这是 v_sql 得到的：

`INSERT INTO tbl_eval_general ( id_empleado, id_evaluador, id_tipo_evaluación ) SELECT Empleado_bloques.id_empleado, Empleado_bloques.id_evaluador, Empleado_bloques.id_tipo_evaluación
FROM Tipo_evaluación INNER JOIN Empleado_bloques ON Tipo_evaluación.id_tipo_evaluación = Empleado_bloques.id_tipo_evaluación
WHERE (((Empleado_bloques.id_empleado)= 125));`

如果我将生成的代码复制并粘贴为 SQL 并创建一个查询，它就可以工作。但是，在运行代码时，它可以工作（创建记录），然后我收到以下错误消息：

`Run-time error ‘3075: Syntax error (missing operator) in query expression 'INSERT INTO tbl_eval_general (id_empleado, id_evaluador, id_tipo_evaluación) SELECT Empleado_bloques.id_empleado, Empleado_bloques, id_evaluador, Empleado_bloques.id_bpo_evaluadón FROM Tipo_evaluación INNER JOIN Empleado_bloques ON Tipo_evaluadón.id_bpo_evaluaóón = Empleado_bloques.id tipo evaluación WHERE`

它与 Access 使用查询编辑器生成的代码相匹配。我会很感激为什么查询可以在编辑器上工作但不能在 Currentdb.execute 中工作的任何想法。

非常感谢。阿曼多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:20:03.540

我发现了错误。这是一个愚蠢的错误。我稍后在代码中的 DLOOKUP 上使用了相同的 v_sql 变量。v_sql 有我在上面发布的 INSERT 代码。DLOOKUP 正在生成错误消息，因为它只需要条件。`

# c++ - 共享库符号名称

> ID：13886887
> 
> 赞同：2
> 
> 时间：2012-12-14T22:02:48.993
> 
> 标签：c++, python, c, interop, ctypes

我希望能够使用 ctypes python 模块从 python 中使用 C/C++ 函数。

我`int doit()`在`.c`/`.cpp`文件中有一个函数。当我尝试加载共享库时：

```
Frr=CDLL("/path/FoCpy2/libFrr.so")
Frr.doit(c_int(5)) 
```

`.c`我发现使用该变体时它工作得非常好。当调用 C++ 时，调用此函数的好方法是（使用`nm libFrr.so`using发现`nm -gC libFrr.so`只是简单的生成`doit()`）：

```
Frr._Z4doitv(c_int(5)) 
```

我在 Stackexchange 上读到没有从 python 调用 C++ 的标准方法，并且存在“非标准名称修改”问题。“Z4”是那个问题的一部分吗？我猜非标准名称修饰会出现在更高级的语言功能（如类方法、模板）中，但也适用于这些基本功能？是否可以在 C++ 代码的简单情况下强制使用简单的 C 函数名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:10:57.943

调用 c++ 库函数总是一团糟，实际上即使您使用的是 C++，您也必须使用相同的编译器等以确保其正常工作。

唯一通用的解决方案是将您的 c++ 函数定义为`extern "C"`并确保遵循相关限制 - 请参阅[此处](https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c)以获取解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:35:02.660

您可以使用`extern "C"`使函数“看起来像”外部世界的 C 函数（即禁用名称修饰）。是的，你是对的，C++ 拥有的更复杂的特性和函数类型主要需要名称修饰，并且名称修饰方案从未标准化（也没有二进制兼容性），因此它因编译器而异以及版本之间（但大多数主流编译器现在已经解决了一些永久性的问题，但编译器供应商之间仍然不同）。并且对于普通的旧自由函数也需要重载的原因是因为 C++ 支持重载（相同的函数名称但具有不同的参数），因此，编译器会将参数规范（例如，类型）编码为重载名称。当然，如果你使用`extern "C"`您会失去所有需要名称修饰的功能，因此，它或多或少只能归结为 C 函数。

您可以`extern "C"`在每个功能的基础上使用任何一个，如下所示：

```
extern "C" int doit(); 
```

或者对于整体标题：

```
extern "C" {

// all the function declarations here ...

}; 
```

但是，特别是对于 Python，我强烈建议您使用一个库，该库允许您构建 Python 类和函数，这些类和函数反映了您的 C++ 类和函数，这使生活变得更加轻松，并隐藏了所有这些外部“C”业务. 我建议使用[Boost.Python](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/)，请参阅此[入门页面](http://wiki.python.org/moin/boost.python/class)，它使将函数和类导出到 Python 变得轻而易举。我想其他人也会推荐[SWIG](http://www.swig.org/)，但我从未使用过它。

# ssl - 使用网络解决方案在 heroku 上添加 SSL 证书

> ID：13886890
> 
> 赞同：1
> 
> 时间：2012-12-14T22:02:55.090
> 
> 标签：ssl, heroku, openssl

我正在尝试向 Heroku 添加 SSL 证书。该证书是从 Network Solutions 购买的。我没有创建自己的 .csr 文件，他们做到了。

NetworkSolutions，下载了他们的 .crt 文件包

*   AddTrustExternalCARoot.crt
*   NetworkSolutions_CA.crt
*   UTNAddTrustServer_CA.crt
*   WWW.mydomain.COM.crt

我试图按照这个教程

[https://devcenter.heroku.com/articles/ssl](https://devcenter.heroku.com/articles/ssl)

我已经合并了像这里的 crt 文件（http://stackoverflow.com/questions/11125587/trouble-with-heroku-ssl-endpoint?answertab=votes#tab-top ）

如果我没有任何密钥文件。可以从 crt 文件生成密钥文件吗？

博洛

# java - 使用 JavaFX 媒体播放器从另一个类播放音频文件

> ID：13886891
> 
> 赞同：1
> 
> 时间：2012-12-14T22:02:53.810
> 
> 标签：java, swing, media-player, javafx, netbeans-7

媒体播放器类很好。但是，我无法播放存储在另一个类中的 mp3 文件（单击鼠标时）。有人可以检查我的代码吗？

```
 package mediaplayer;

     import javafx.application.Application;
     import javafx.scene.Group;
     import javafx.scene.Scene;
     import javafx.scene.media.Media;
     import javafx.stage.Stage;

     public class MediaPlayer extends Application {
         private static final String MEDIA_URL = "http://download.oracle.com/otndocs/products/javafx/oow2010-2.flv";
         private static String arg1;

         @Override public void start(Stage stage) {
             stage.setTitle("Media Player");
             Group root = new Group();
             Scene scene = new Scene(root,600,265);
             // create media player
             Media media = new Media((arg1 != null) ? arg1 : MEDIA_URL);
             javafx.scene.media.MediaPlayer mediaPlayer = new javafx.scene.media.MediaPlayer(media);
             mediaPlayer.setAutoPlay(true);
             MediaControl mediaControl = new MediaControl(mediaPlayer);
             scene.setRoot(mediaControl);
              scene.getStylesheets().add(MediaPlayer.class.getResource("mediaplayer.css").toExternalForm());
             // show stage
             stage.setScene(scene);
             stage.show();
         }

         public static void main(String[] args) {
             if (args.length > 0) {
                 arg1 = args[0];
             }
             Application.launch(args);
         }
     } 
```

这是我试图用来播放我的音频文件的类：

```
 package mediaplayer;

     import java.awt.Cursor;

     /**
      *
      * @author Yves
      */
     public class LacherPrise extends javax.swing.JFrame {

         /**
          * Creates new form LacherPrise
          */
         public LacherPrise() {

             this.setVisible(true);
             // définition de la taille de la fenêtre de l’éditeur
             setBounds(200, 100, 800, 600);

             initComponents();
         } 
```

当我运行程序时（在下面的鼠标单击上），我收到以下两个错误： 错误号 1：线程“AWT-EventQueue-0”中的异常 java.lang.UnsupportedOperationException：尚未实现错误号 2：线程“线程 3 中的异常” " java.lang.IllegalStateException: Toolkit not initialized 我需要有关如何实现异常的帮助。

```
private void audio010MouseClicked(java.awt.event.MouseEvent evt) {                                      
    //getting URL to a sound file stored locally
    String MEDIA_URL = "file:///C:/Users/Yves/Documents/NetBeansProjects/ExamenFinSessionJavaFX/src/RessourcesLacherPrise/Aff010.mp3";
    Media media = new Media(MEDIA_URL.toString());
    MediaPlayer MediaPlayer = new MediaPlayer();
    MediaPlayer.play(MEDIA_URL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T15:14:51.837

我认为主要问题是 JavaFX 工具包尚未初始化。看看下面的问题：

[JavaFX 2.1：工具包未初始化](https://stackoverflow.com/questions/11273773/javafx-2-1-toolkit-not-initialized/11277371#11277371)

只需将其放在代码的开头即可解决问题：
`new JFXPanel();`

# javascript - 访问 app.locals 中的 req 和 res

> ID：13886897
> 
> 赞同：0
> 
> 时间：2012-12-14T22:03:26.850
> 
> 标签：javascript, node.js, express, connect

尝试为 express 3.0 应用程序编写一些辅助方法。这是一个问候用户的示例：

```
 app.locals.greet = function(req,res) {
    return "hey there " + req.user.name;
  } 
```

但是，`req`并且`res`在该函数中不可用。我将如何编写可以在我的玉模板中使用的助手？我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:25:32.097

看看我的配置`app.js`文件！这应该对您有用，因为变量将在该上下文中可用。

```
app.configure(function(){
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');

app.use(connect.compress());
app.use(express.static(__dirname + "/public", { maxAge: 6000000 }));
app.use(express.favicon(__dirname + "/public/img/favicon.ico", { maxAge: 6000000 }));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(express.cookieParser());
app.use(express.session({
    secret: config.sessionSecret,
    maxAge: new Date(Date.now() + (1000 * 60 * 15)),
    store: new MongoStore({ url: config.database.connectionString })
}));
app.use(function(req, res, next){
    console.log("\n~~~~~~~~~~~~~~~~~~~~~~~{   REQUEST   }~~~~~~~~~~~~~~~~~~~~~~~".cyan);
    res.locals.config = config;
    res.locals.session = req.session;
    res.locals.utils = viewUtils;
        res.locals.greet = function(){
                //req and res are available here!
                return "hey there " + req.user.name;
        };
    next();
});
app.use(app.router);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T02:07:21.030

以下是一个简单示例的三个部分，展示了辅助函数如何使用`req.locals`：

### 辅助功能：

```
app.locals.greet = function(user) {
  return "hey there " + user.name;
} 
```

### 查看模板：

```
h1= greet(user) 
```

### 渲染功能：

```
function(req, res) {
  res.render('myview', {user: req.user});
}; 
```

如果您需要有关设置的更多信息，请[在此处](https://stackoverflow.com/questions/13571069/access-req-in-expressjs-3-views/13571615#13571615)和[此处](https://stackoverflow.com/questions/6331776/accessing-express-js-req-or-session-from-jade-template/13572244#13572244)`req.locals`查看我的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T16:28:21.390

您需要添加一个中间件函数/处理程序，该函数/处理程序将在路由器调用它的渲染方法之前使用`req`/对象设置这些值。`res`同样，需要在定义了您需要知道的信息之后定义此处理程序。（即会话中间件之后）

```
// AFTER sessions/auth/etc -- app.use(express.session(...))
app.use(function (req, res) {
    // set any locals using req/res
    res.locals.user = req.user;
    res.locals.greet = function () {
        return "hey there " + req.user.name;
    }
});
// BEFORE router -- app.use(express.router); 
```

有关更多信息，请参阅[res.locals](http://expressjs.com/api.html#res.locals)上的 API 文档。

# android - 使用绑定服务的自定义适配器 - 何时解除绑定？

> ID：13886899
> 
> 赞同：3
> 
> 时间：2012-12-14T22:03:28.160
> 
> 标签：android, android-adapter, aidl

设置：将数据馈入的自定义适配器`ListView`。数据基于外部服务计算的一些数字。我正在使用 AIDL 来绑定服务并获取我需要的数据。

问题：我如何知道何时解除绑定服务？连接对适配器本身是私有的，检测整个应用程序正在关闭的唯一方法是覆盖`unregisterDataSetObserver`。或者至少我没有找到另一种方法，并且这个方法与使用内容提供者+内容观察者的相同适配器配合得很好。但不适用于 AIDL - 我收到`ServiceConnectionLeaked`错误消息。

我知道我可以向我的适配器添加一个“unbindFromService”方法并从我的活动的 onDestroy() 调用它，但这对我来说不够优雅。如果可能的话，我更喜欢一些“诚实”的触发器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:37:32.060

在您的 CustomAdapter 中实施`ActivityLifecycleCallbacks`，然后从您的活动调用中实施

```
mAdapter.setActivity(this); 
```

适配器类

```
public class CustomAdapter  extends ArrayAdapter<String> implements ActivityLifecycleCallbacks{

    Activity mActivity;

    public void setActivity(Activity activity) {
           /* or you could remove setactivity and do below operation in Constructor */
        mActivity = activity;
        mActivity.getApplication().registerActivityLifecycleCallbacks(this);
    }

    @Override
    public void onActivityDestroyed(Activity activity) {
        /*unregister so that you do not get callbacks after activity is destroyed*/
        if(activity instanceof MainActivity)   
              mActivity.getApplication().unregisterActivityLifecycleCallbacks(this);

            /*unregister your activity or in any other callbacks*/
    }

    /* skipped other dummy functions*/

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T08:42:47.350

`Connection is private to adapter`是错的。***适配器是无上下文的，因此服务不应该是适配器私有的***。

如果没有上下文，您的适配器将永远无法绑定到服务。本质上，您有一个函数为适配器提供一个上下文以绑定到服务。因此，绑定的连接不是您的适配器私有的：它是传递的上下文允许创建它。

真正的问题是 AFAIK 没有办法听上下文。意思是，假设您在适配器中保存了上下文实例：没有办法让适配器侦听此上下文并以某种方式知道 Activity 已完成。这导致您接受不够优雅的解决方案：您的活动应该通知正在使用其上下文的适配器！否则，您最终会得到一个更加复杂的解决方案。

* * *

请注意，评论中的整个辩论都与您的“服务对适配器私有”有关。实际上，执行此操作的优雅方法是拥有一个提供连接的 ServiceProvider 接口，这将由您的活动实现。您的适配器应该使用传递的 ServiceProvider 进行初始化。一些函数是`getConnection`和`isRunning`。这样，您的 Activity 将在 Adapter 使用它时处理连接。（***同步***）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:37:38.093

我会使用服务将新数据插入 SQLite 表或刷新 ContentProvider，然后使用 SimpleCursorAdapter（向后兼容的 android.support.v4.widget.SimpleCursorAdapter）和 LoaderManager、SQLiteCursorLoader/CursorLoader、Loader 模式来显示List 或 ListFragment 上的数据。

SQLiteCursorLoader 不是由 Android SDK 提供的，但 Mark Murphy 在 GitHub 上有一个，所以如果你想将新数据持久保存在本地 SQLite DB 中，可以查看它。

由于服务可以独立于 SQLite 中的基础数据和列表的适配器，因此您可以在完成插入新数据或刷新提供程序时取消绑定它，以便您可以继续使用推荐的模式来取消绑定服务（请参阅此问题：[Android：如何安全地取消绑定服务](https://stackoverflow.com/questions/8614335/android-how-to-safely-unbind-a-service)）并查看[http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle)。

我真的希望这能给你一个提示。祝你好运！

# jquery - jQuery 显示具有一系列值的元素

> ID：13886900
> 
> 赞同：0
> 
> 时间：2012-12-14T22:03:48.687
> 
> 标签：jquery

我试图让 jQuery 根据两个值之间的属性值显示/隐藏元素。

我有如下标记：

```
<a class="page_link" href="javascript:go_to_page(0)" longdesc="0">1</a>
<a class="page_link" href="javascript:go_to_page(1)" longdesc="1">2</a>
<a class="page_link" href="javascript:go_to_page(2)" longdesc="2">3</a>
<a class="page_link" href="javascript:go_to_page(3)" longdesc="3">4</a>
<a class="page_link active_page" href="javascript:go_to_page(4)" longdesc="4">5</a>
<a class="page_link" href="javascript:go_to_page(5)" longdesc="5">6</a>
<a class="page_link" href="javascript:go_to_page(6)" longdesc="6">7</a>
<a class="page_link" href="javascript:go_to_page(7)" longdesc="7">8</a>
<a class="page_link" href="javascript:go_to_page(8)" longdesc="8">9</a> 
```

我有一些看起来像这样的 jQuery：

```
//Now, we need to paginate the pagination
var page_link_count = $('.page_link').length(); 

//Hide all the .page_links
$('.page_link').css('display','none'); 

//Show active_page
$('.active_page').css('display','block'); 

//Show up to four .page_link on either side of active_page
var active_page_value = $('.active_page').attr('longdesc'); 

$('.page_link').each(function(){

    var longdesc = $(this).attr('longdesc');

    // This next part might be what's getting me...
    if( longdesc <= active_page_value+4 && longdesc >= active_page_value-4){

        $(this).css('display','block');

    }

}); 
```

我想说的是，如果任何具有 page_link 类的元素的 longdesc 属性值大于 active_page longdesc - 4 的总和的值，或者小于 active_page longdesc + 4 的总和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:11:00.457

您需要先**解析数字**，然后再添加它们。将改为附加这些值

```
if( (longdesc <= parseInt(active_page_value ,10) +4)
     &&( longdesc >= parseInt(active_page_value,10) -4)) 
```

* * *

**JS**

```
//Now, we need to paginate the pagination
var page_link_count = $('.page_link').length; 

//Hide all the .page_links
$('.page_link').css('display','none'); 

//Show active_page
$('.active_page').css('display','block'); 

//Show up to four .page_link on either side of active_page
var active_page_value = $('.active_page').attr('longdesc'); 

var min = parseInt(active_page_value,10) - 4;
var max = parseInt(active_page_value,10) + 4;

$('.page_link').each(function(){
    var longdesc = $(this).attr('longdesc');

    if( longdesc <= max && longdesc >= min){
        $(this).css('display','block');
    }

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:10:52.860

有两点要改变：

**改变**

```
var page_link_count = $('.page_link').length(); 
```

**到**

```
var page_link_count = $('.page_link').length; 
```

**和**

```
var active_page_value = $('.active_page').attr('longdesc'); 
```

**到**

```
var active_page_value = +$('.active_page').attr('longdesc'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:17:37.870

过于复杂的事情......这就是你所需要的。

```
//Hide all the .page_links
$('.page_link').hide(); 

//Show active_page
$('.active_page').show(); 

//Show all links before active
$('a.active_page').show();
$('a.active_page').prevAll().show(); 
```

*注意：最后两个可以合并，但我不想让你感到困惑。

# xml - xslt 重新排列 xml 节点（删除其中一些）并根据属性值创建具有名称的新节点

> ID：13886910
> 
> 赞同：1
> 
> 时间：2012-12-14T22:05:03.180
> 
> 标签：xml, xslt

我有这个xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<General>
    <Ports>
        <Port>
            <PortID>32434</PortID>
            <PortName>PortName 1</PortName>
            <Section>
                <SectionHeader ID="63">General overview</SectionHeader>
                <PAR ID="111">bla bla bla</PAR>
            </Section>
            <Section>
                <SectionHeader ID="61">Max Size</SectionHeader>
                <PAR ID="222">blu blu blu</PAR>
            </Section>
        </Port>
        <Port>
            <PortID>777</PortID>
            <PortName>PortName 2</PortName>
            <Section>
                <SectionHeader ID="63">General overview</SectionHeader>
                <PAR ID="333">bla2 bl2a bla2</PAR>
            </Section>
            <Section>
                <SectionHeader ID="61">Max Size</SectionHeader>
                <PAR ID="444">blu2 blu2 blu2</PAR>
            </Section>
        </Port>
    </Ports>
</General> 
```

并且我需要在转换后拥有这个 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Ports>
    <Port>
        <PortID>32434</PortID>
        <PortName>PortName 1</PortName>
        <PAR_111>bla bla bla</PAR_111>
        <PAR_222>blu blu blu</PAR_222>
    </Port>
    <Port>
        <PortID>777</PortID>
        <PortName>PortName 2</PortName>
        <PAR_333>bla2 bl2a bla2</PAR_333>
        <PAR_444>blu2 blu2 blu2</PAR_444>
    </Port>
</Ports> 
```

基本上有几件事 xsl 需要涵盖： 1\. 重新排列节点并仅选择 PortID、PortName 和 PAR 到转换后的 xml（省略其他节点）。2\. 取PAR节点，创建名称由名称（PAR）及其属性值（ID）组合而成的节点。

我正在尝试使用 for-each 和其他一些技术，但我失败了。这是我当前**不工作**的版本。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes" />
    <xsl:strip-space elements="*" />

    <xsl:for-each select="//Port">
        <xsl:copy-of select="*[name()='PortID' or name()='PortName']" />
        <xsl:copy-of select="Section/*[name()='PAR']">
            <xsl:element name="PAR_{@ID}">
                <xsl:value-of select="." />
            </xsl:element>
        </xsl:copy-of>
    </xsl:for-each>

</xsl:stylesheet> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:11:34.390

您`xsl:for-each`需要在`xsl:template`. 但是，不要使用 ，而是`xsl:for-each`尝试使用基于模板的方法（推送而不是拉取）：

**XML 输入**

```
<General>
    <Ports>
        <Port>
            <PortID>32434</PortID>
            <PortName>PortName 1</PortName>
            <Section>
                <SectionHeader ID="63">General overview</SectionHeader>
                <PAR ID="111">bla bla bla</PAR>
            </Section>
            <Section>
                <SectionHeader ID="61">Max Size</SectionHeader>
                <PAR ID="222">blu blu blu</PAR>
            </Section>
        </Port>
        <Port>
            <PortID>777</PortID>
            <PortName>PortName 2</PortName>
            <Section>
                <SectionHeader ID="63">General overview</SectionHeader>
                <PAR ID="333">bla2 bl2a bla2</PAR>
            </Section>
            <Section>
                <SectionHeader ID="61">Max Size</SectionHeader>
                <PAR ID="444">blu2 blu2 blu2</PAR>
            </Section>
        </Port>
    </Ports>
</General> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="General|Section">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="SectionHeader"/>

    <xsl:template match="PAR">
        <xsl:element name="PAR_{@ID}">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<Ports>
   <Port>
      <PortID>32434</PortID>
      <PortName>PortName 1</PortName>
      <PAR_111>bla bla bla</PAR_111>
      <PAR_222>blu blu blu</PAR_222>
   </Port>
   <Port>
      <PortID>777</PortID>
      <PortName>PortName 2</PortName>
      <PAR_333>bla2 bl2a bla2</PAR_333>
      <PAR_444>blu2 blu2 blu2</PAR_444>
   </Port>
</Ports> 
```

# windows-8 - 为什么像 KnockoutJS 这样的第三方 javascripts 不能通过 Windows 应用程序认证工具包？

> ID：13886913
> 
> 赞同：5
> 
> 时间：2012-12-14T22:05:14.103
> 
> 标签：windows-8, winjs

当涉及到 jQuery 中的 DOM 操作时，我知道 MSApp.execUnsafeLocalFunction 问题，但即使是[这里的 jQuery 链接](http://www.incloud.de/2012/08/windows-8-using-jquery-for-app-development/)的修改版本也无法通过 Windows 商店进行验证。

这里的模式似乎是我所有的 Nuget 拉取的脚本都未能通过验证。有人知道为什么吗？

```
Error Found: The bytecode generation test detected the following errors:

File \\?\C:\Program Files\...\Scripts\require.js has JavaScript syntax or other problems.
File \\?\C:\Program Files\...\Scripts\r.js has JavaScript syntax or other problems.
File \\?\C:\Program Files\...\Scripts\knockout-2.2.0.js has JavaScript syntax or other problems.
File \\?\C:\Program Files\...\Scripts\knockout-2.2.0.debug.js has JavaScript syntax or other problems.
File \\?\C:\Program Files\...\Scripts\knockout.mapping-latest.js has JavaScript syntax or other problems.
File \\?\C:\Program Files\...\Scripts\knockout.mapping-latest.debug.js has JavaScript syntax or other problems.
File \\?\C:\Program Files\...\Scripts\jquery-1.8.3.js has JavaScript syntax or other problems. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T22:44:57.530

尝试使用 UTF8 字节顺序标记 (BOM) 编码保存文件。我有一个类似的问题，解决了这个问题。

> 在 VS > 文件菜单 > 高级保存选项 > 选择带有签名代码页 65001 的 UTF-8

[http://msdn.microsoft.com/en-us/library/windows/apps/hh849088.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh849088.aspx) 不是针对您的问题，而是字节码缓存。

高温高压

# mercurial - Mercurial to Bitbucket - Subrepository - Repository is unrelated 错误

> ID：13886914
> 
> 赞同：5
> 
> 时间：2012-12-14T22:05:21.270
> 
> 标签：mercurial, bitbucket

以下是我为构建 repo 和 subrepos 所采取的步骤。

一切都托管在 Bitbucket 上。

1.  根据最佳实践，创建了一个骨架存储库来保存所有子存储库。克隆到我的机器上。
2.  将主项目克隆为 subrepo1（在 mainrepo 目录结构中）。
3.  将主要项目添加到 mainrepo 作为 subrepo1。
4.  mainrepo 的提交按预期工作。
5.  成功推送 mainrepo 和 subrepo1 到 Bitbucket。
6.  继续将另一个 subrepo2 克隆到 mainrepo 目录。
7.  将 subrepo2 作为 subrepo2 添加到 mainrepo
8.  mainrepo 的提交按预期工作。
9.  在“搜索更改”之后推送 mainrepo 会导致“Repository is unrrelated”错误 错误仅发生在新添加的 subrepo2 上。

这是目录结构： mainrepo --subrepo1（主项目）--subrepo2（类库）

我花了无数个小时试图让这个工作，我一定错过了一些明显的东西。

是什么导致了这个错误，我错过了什么？随着项目的发展，我需要能够添加额外的子存储库。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T08:19:50.617

我制作示例的步骤如下：

1.  `MainRepo`在 BitBucket 上创建
2.  `SubRepo`在 BitBucket 上创建
3.  克隆`MainRepo`
4.  克隆`SubRepo`为子目录`MainRepo`
5.  手动创建`.hgsub`包含内容的文件`SubRepo = ../SubRepo`
6.  将`.hgsub`文件添加到`MainRepo`、提交和推送
7.  `SubRepo2`在 BitBucket 上创建
8.  克隆`SubRepo2`为子目录`MainRepo`
9.  手动编辑`.hgsub`和添加`SubRepo2 = ../SubRepo2`
10.  `MainRepo`再次提交并推送

从那时起，我可以编辑两个子存储库中的任何一个，并在工作台中查看它们时发现它们发生了变化`MainRepo`。然后我可以将更改提交到子存储库，提交子存储库状态`MainRepo`并通过一次推送来推送所有三个存储库`MainRepo`

您在其他问题 ( ) 中所说的由 TortoiseHg 设置的方式`subrepo = subrepo`不适用于 BitBucket，因为它们的结构如何。我认为您只能在顶层拥有这样的存储库：

```
bitbucket.org/SteveKaye/MainRepo
bitbucket.org/SteveKaye/SubRepo 
```

而让这条线`subrepo = subrepo`试图建立一个这样的结构：

```
bitbucket.org/SteveKaye/MainRepo
bitbucket.org/SteveKaye/MainRepo/SubRepo 
```

当您推送它时，它看起来像是在尝试推送`SubRepo`，`MainRepo`这将解释您收到的不相关的存储库错误消息。

语法是这样的`.hgsub`，equals 的左边定义了工作副本中存储库所在的文件夹，equals 的右边定义了从哪里获取它。当等号的右边是相对路径时，它定义了子存储库相对于主存储库在中央服务器上的位置。因此，在上面的示例中，您上一个文件夹，`bitbucket.org/SteveKaye`并且`SubRepo`包含在该文件夹中。

文档说：

> Mercurial 存储库的源路径可以是相对或绝对路径或 URL。通常建议使用源路径与工作目录路径相同的普通相对路径：这将确保始终可以“就地”找到子存储库。
> 
> 如果无法“就地”托管子存储库，例如由于中央存储库或托管服务的限制，则可以使用其他相对路径。使用这种非平凡的相对路径的结果是无法克隆克隆。

这看起来与您在使用 BitBucket 时的情况有关，我希望您的克隆无法像最后一句中所说的那样被克隆。

# windows-7 - 使用 Windows Server 2003 双启动 Windows 7 Home Premium

> ID：13886916
> 
> 赞同：0
> 
> 时间：2012-12-14T22:05:25.100
> 
> 标签：windows-7, windows-server-2003, bootloader

我有一台安装了 Windows 7 Home Premium 的机器。我已经对 Windows 2003 服务器 C 驱动器进行了备份（使用 Acronis）。然后我将C盘恢复到Win7机器上的一个分区。

我曾多次尝试将 Windows 2003 操作系统驱动器添加到引导加载程序以在启动时进行选择。我相信我的尝试失败了，因为这两个操作系统的启动方式不同。

有谁知道如何完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:34:53.443

1.  您可以先从 Win 2003 分区根文件夹“\”复制 (ntldr + ntdetect.com + boot.ini) 到磁盘上的活动分区“\”。（如果活动分区未映射，请使用 DiskManagement 将其临时映射到驱动器号，例如 S:)

2.  在 Windows 7 BCD 中为基于 ntldr 的操作系统（XP、Server 2003）添加加载程序条目可以使用 bcdedit.exe 或使用[Visual BCD 编辑器](http://www.boyans.net)- 启动工具，右键单击以获取弹出菜单并选择创建 NT 加载程序。将创建的加载程序的驱动器更改为 S：（活动分区）。

3.  最终必须调整 boot.ini 中的 ARC 路径。使用[ArcPath 实用程序](http://www.boyans.net/ArcPaths/ArcPaths.htm)获取磁盘/分区的精确映射。

重新启动后，您应该会得到一个双启动菜单。

（重命名加载程序的引导菜单条目 -> 更改其“描述”元素。）

希望这对您的双启动有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:18:26.980

您可以使用“bcdedit”创建/更新引导条目

这应该有助于：

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff541231(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541231(v=vs.85).aspx)

# python - python map vs itertools.map：使迭代器版本表现得像前者

> ID：13886917
> 
> 赞同：4
> 
> 时间：2012-12-14T22:05:38.103
> 
> 标签：python, map, itertools

考虑以下示例代码。给出这个例子只是为了强调 和 之间的不同`map`功能`itertools.imap`。我真正想做的事情不能用列表理解来完成，因为在我真正的问题中，我不是创建一个列表，而是用小数组填充一个更大的 numpy 数组。所以响应下面的代码，请不要建议：`[f(x) for x in range(3)]`

例子：

```
g = []

def f(x):
    g.append(x) 
```

我得到的结果`map`和 itertools.map：

```
map(f, range(3)) # Results in g = [0,1,2]

itertools.imap(f, range(3)) # Does not change g 
```

我希望`g`按功能进行更改`map`。但是，我听说它`map`会（或确实）表现得像 `itertools.imap`Python 3 中的那样。即使我使用的是 Python 2.7，我也想学习使用迭代器版本的地图的正确方法。我如何使用`itertools.imap`来达到与使用相同的结果`map`？

我可以：

```
b = itertools.imap(f, range(3))
list(b) # This gives g = [0,1,2] if starting with an empty g. 
```

这是正确的方法，还是有更好的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T22:08:37.160

`itertools`函数返回生成器；它们仅在迭代时运行。所以在你运行它完成之前`itertools.imap(f, range(3))`实际上*不会做*`list`任何事情，例如 with 。

根据[http://docs.python.org/2/library/itertools.html#recipes](http://docs.python.org/2/library/itertools.html#recipes)，使用迭代器的最有效方法是使用零长度双端队列：

```
collections.deque(itertools.imap(f, range(3)), maxlen=0) 
```

但是，如果你调用一个函数是为了它的副作用，你应该使用命令式而不是函数式语法：

```
for i in range(3):
    f(i) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:11:55.917

您使用`map()`不正确。它不应用于函数调用的副作用，而应用于转换可迭代对象。

您可以使用`list(itertools.imap(f, range(3)))`来获得您想要的行为，但我认为您应该更改整个方法以使用正常的 for 循环：

```
for i in range(3):
    f(i) 
```

这清楚地表明`f()`没有使用来自调用的返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T22:09:37.520

不同之处在于`map`Python 2.x 中相当于`list(map(...))`Python 3。就是这样 - 没什么特别的......

# javascript - 使用 Knockout 限制按键上的非数字输入

> ID：13886919
> 
> 赞同：0
> 
> 时间：2012-12-14T22:06:05.310
> 
> 标签：javascript, knockout.js

我想使用敲除（不是特别是 jQuery 或任何其他 jQuery 库）来限制输入上的非数字输入（在按键上）。我有许多数字输入字段，因此该解决方案应该很容易应用于其他 Knockout observables/inputs。

我该怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:12:35.710

在对可观察对象使用订阅回调之前，我已经这样做了。此处概述了该功能[http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)

因此，您可以执行以下操作：

```
var myNonNumericObservable = ko.observable();
myNonNumericObservable.subscribe(function(newValue) {
    var strippedValue = newValue.replace(/\D/g,'');
    if (strippedValue != newValue) {
        myNonNumericObservable(strippedValue);
    }
}); 
```

# c# - 如何使用背后的 C# 代码（Asp Web 表单）使用 WSDL 文件中定义的服务？

> ID：13886926
> 
> 赞同：1
> 
> 时间：2012-12-14T22:06:44.320
> 
> 标签：c#, wcf, web-services, soap, wsdl

> **可能重复：**
> [如何使用 WSDL](https://stackoverflow.com/questions/1302525/how-to-use-a-wsdl)

1 - 用户将在一个网站页面中填写表格并按提交 ( [http://www.vivointernet.com.br/](http://www.vivointernet.com.br/) ) 2 - 提交调用创建 xml 文件的函数（需要在此作业中开发） (wsdl 格式) 即附加文件 (BlenderServices.xml) 3 - 您需要使用 EnviarMailing 方法（已经在 BlenderServices.xml 上）。参数“campanha”的值为“SiteVivo”，其他参数（nome（姓名）、电子邮件、endereco（地址）、电话（电话）等）您将从表单中获取并保存为 BlenderService.wsdl 格式。

所以，基本上格式已经定义好了。是 BlenderService.wsdl 格式。我需要做的是编写在用户按下提交并传递参数时将调用它的函数。并以附加的 xml 格式保存该信息.... //这里是 BlendServices.xml 文件....

[https://dl.dropbox.com/u/46576111/BlenderServices.wsdl](https://dl.dropbox.com/u/46576111/BlenderServices.wsdl)

请告诉文件中提到了哪些服务以及如何使用 C# 使用这些服务。我是 Webservices 的新手，但知道架构但不知道 C# 代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:21:48.763

尝试访问此页面： [如何使用 WSDL](https://stackoverflow.com/questions/1302525/how-to-use-a-wsdl) 这解释了在 C# 中使用 WSDL 的基础知识。

# mysql - 在不重启服务器的情况下更改 mysql 变量

> ID：13886930
> 
> 赞同：1
> 
> 时间：2012-12-14T22:07:10.267
> 
> 标签：mysql

当我重新启动mysql时，网站变得太慢了大约10分钟。我认为这是因为innodb_buffer池和查询缓存。innodb`buffer pool =8G`和`query cache = 2G.`

我正在改变我`.cnf`的优化，但我有 200 个在线用户，并且将服务器放慢 10 分钟让用户很生气。

无论如何我可以在不重启mysql的情况下更改mysql变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:31:08.737

那些不是让你在重启后变慢的变量，那些是让你在几分钟后变得更快的变量，当一切都在内存中时。

有些全局变量可以用 更改`SET global varname=...`，有些则不能。所以，这一切都取决于。只是提醒一下：如果您对它们感到满意...不要忘记将它们添加到配置中，以备需要重新启动时使用。您不会是第一个以这种方式意外使用重要配置的人。

拥有多台 mysql 服务器并让一台离线重新加载（另一台获取所有查询）可能是一件好事，但当然可能会很昂贵。

# java - 如何判断哪个库记录了错误

> ID：13886937
> 
> 赞同：0
> 
> 时间：2012-12-14T22:07:21.827
> 
> 标签：java, logging, libraries

我在控制台中收到以下内容。它不是来自我的代码。我在步骤过滤器中放置了几个库，例如 WebLogic、sun、javax。有没有办法告诉哪个库生成了这个消息？我真的不想单步执行我用来尝试找到它的所有库类。

```
[Fatal Error] :1:80: The element type "body" must be terminated by the matching end-tag "</body>". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:30:19.710

当这种情况发生在我身上时，我通常会首先联系 Google。这些天来，大多数错误消息都是由某个地方的某个人发布的，尽管您必须确保从中删除您的细节（在这种情况下，“body”听起来很具体）。

如果 Google 没有帮助或只是花费了太长时间，我通常最终会在我的 lib 目录上运行二进制搜索工具。结果并不漂亮。但是，一旦我知道哪个 jar 包含该消息，我就可以放大到更漂亮的格式以获取详细信息。

# mysql - Mysql select IN 如果id不存在则返回null

> ID：13886940
> 
> 赞同：1
> 
> 时间：2012-12-14T22:07:25.057
> 
> 标签：mysql, select

我有一张这样的桌子：

```
+----+---------+---------+
| Id | column1 | column2 |
+----+---------+---------+
|  1 | a       | b       |
|  2 | a       | b       |
+----+---------+---------+ 
```

和这样的查询`SELECT * FROM table WHERE id IN (1,2,3)`

我需要什么查询才能得到这样的结果（我需要为不存在的 id 获取空值）：

```
+----+---------+---------+
| Id | column1 | column2 |
+----+---------+---------+
|  1 | a       | b       |
|  2 | a       | b       |
|  3 | null    | null    |
+----+---------+---------+ 
```

# 编辑

感谢您到目前为止的回复。

有没有更“动态的方式”来做到这一点，上面的查询只是一个例子。实际上，我需要检查大约 1000 个 ID！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:18:53.763

你可以使用这样的东西：

```
SELECT ids.ID, your_table.column1, your_table.column2
FROM
  (SELECT 1 as ID
   UNION ALL SELECT 2
   UNION ALL SELECT 3) ids left join your_table
  on ids.ID = your_table.ID 
```

第一个子查询在不同的行中返回您需要的每个值。然后你可以尝试加入每一行`your_table`。如果您使用 a `left join`，则显示第一个子查询中的所有值，如果与 匹配`your_table`，则显示来自`your_table`的值，否则您将获得空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:19:29.623

不幸的是，这不是 SQL 的工作方式。我认为您的应用程序确定它要求的 id 和返回的 id 之间的差异是非常微不足道的。

因此，与其破解或一些奇怪的查询来模拟你的结果，为什么不让你的应用程序处理它呢？

我仍然无法理解用例可能是什么，您将通过可能存在或不存在的 id 查询数据库上的行。

# android - Android 待处理异常

> ID：13886941
> 
> 赞同：2
> 
> 时间：2012-12-14T22:07:26.567
> 
> 标签：android, exception

我的应用程序是一个混合 html5 + JS + android，它在 webview 中运行并通过 JS 接口与 Andorid 进行如此多的通信。

我收到一些报告说它在某些设备上 2 秒后失败。我添加了 ACRA，所以我可以得到报告，但我没有得到任何东西。

所以我尝试自己测试它，为了引发异常，我添加了一个代码来操作 Javascript 界面函数中的主线程视图，该函数由 html 中的按钮触发。这引发了一个例外：**只有创建视图层次结构的原始线程才能接触其视图。**现在应用程序启动，当我点击按钮时，它异常退出，ACRA 发送报告。

然后我把操作代码放在一个 JS 接口的函数中，该函数在应用程序启动后立即被调用。现在应用程序在一秒钟后关闭。但 ACRA 不会发送任何错误。即使是 ExceptionHandler 也没有抓住它，而是抓住了第一种情况。

这是第二种情况的日志：

```
59): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@43f8d990 (uid=10019 pid=329)
12-15 01:18:07.047: WARN/dalvikvm(409): JNI WARNING: JNI method called with exception raised
12-15 01:18:07.047: WARN/dalvikvm(409): in Landroid/webkit/BrowserFrame;.stringByEvaluatingJavaScriptFromString (Ljava/lang/String;)Ljava/lang/String; (NewString)
12-15 01:18:07.057: WARN/dalvikvm(409): Pending exception is:
12-15 01:18:07.057: INFO/dalvikvm(409): Landroid/view/ViewRoot$CalledFromWrongThreadException;: Only the original thread that created a view hierarchy can touch its views 
```

我不知道这个待处理的异常是什么？我在网上找不到任何东西。我想知道为什么 ACRA 或异常处理程序不捕获它？

```
class JavaScriptInterface
{
    MyActivity parent;
    JavaScriptInterface(MyActivity parent)
    {
        this.parent = parent;
    }

    public void immediatelyCalled() 
    // Webview load index.html in oncreate of activity and js inside html calls this function immediately
    {
        parent.textview1.setText("test"); 
        // raise an exception which ACRA or Exception Handler dont catch
        // Problem is here
    }

    public void buttonCalled() 
    // This is called when a button is tapped in html
    {
        parent.textview1.setText("test"); 
        // raise an exception which Exception Handler and ACRA catch
    }
} 
```

这是我的活动：

```
public class MyActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
setContentView(R.layout.main);

        class MyExceptionHandler implements Thread.UncaughtExceptionHandler
        {
            @Override
            public void uncaughtException(Thread thread, Throwable throwable)
            {
                Log.d("ExceptionHandler", "Caught exception: " + throwable.getClass().getName() + ": " + throwable.getMessage());
            }
        }

        MyExceptionHandler handler = new MyExceptionHandler();
        Thread.setDefaultUncaughtExceptionHandler(handler);

        this.wv = (WebView) findViewById(R.id.webview);
        this.wv.addJavascriptInterface(new JavaScriptInterface(this), "android");
        this.ws = this.wv.getSettings();
        this.ws.setJavaScriptEnabled(true);
        this.wv.loadUrl("file:///android_asset/index.html");

    }
} 
```

这是 index.html 的一部分：

```
<script type="text/javascript">
android.immediatelyCalled();
</scritp>
<button onclick="android.buttonCalled()"></button> 
```

在 AVD 2.2 和 Xperai Arc 4.0.3 上测试，两者相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:31:03.507

我认为该方法 immediateCalled() 是在另一个线程中调用的，而不是您正在创建“MyActivity parent”（UI 线程，您的应用程序主线程）的线程。因此，分配给 ui 线程且与运行 javascript 代码的进程无关的未捕获异常处理程序无法捕获在 setText 处发生的此异常（访问属于另一个线程的视图）。

我认为如果你附上 parent.textview1.setText("test"); 你当然可以捕捉到异常。在 try catch 块中。如果您以这种方式修改 setText 调用，您应该能够避免异常：

```
parent.textView1.post(new Runnable() {
    public void run() {
        parent.textview1.setText("test");
    }
}); 
```

您必须将父参数标记为最终参数。不幸的是，我这里没有日食可以测试，而且已经很晚了 :) 祝你好运！

# regex - Django中的Slug Url正则表达式

> ID：13886944
> 
> 赞同：7
> 
> 时间：2012-12-14T22:07:33.430
> 
> 标签：regex, django, url, slug

在阅读了很多关于正确使用 slug 从对象列表中创建详细视图的信息之后。但是，我仍然无法让它为我工作。我在模板中显示对象列表，例如：

```
{% for thing in thing_list %}
   <div class='thing-detail'><a href='{% url detail %}'><img src='theimage.png' />
{% endfor %} 
```

但是我得到一个`NoReverseMatch`错误`detail`。

我认为我的正则表达式有问题，或者我缺少一种更好的方法。

正则表达式：

```
url(r'^thing/(?P<slug>[\w-]+)/$', 'views.detail', name='detail'), 
```

看法：

```
def detail(request, slug):
    thing = get_object_or_404(Thing, slug=slug)
    return render(request, 'detail.html', {'thing': thing}) 
```

模型：

```
class Thing(models.Model):
    user = models.ForeignKey(User)
    created_on = models.DateTimeField(auto_now_add=True)
    slug = models.SlugField()

    def save(self, **kwargs):
        slug = '%s' % (self.user)
        unique_slugify(self, slug)  ## from http://djangosnippets.org/snippets/1321/
        super(Thing, self).save() 
```

谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T22:13:22.960

您没有传递任何参数来构建`detail`URL。你可能想要这样做：

```
{% url "detail" thing.slug %} 
```

这将创建一个`detail`填充了给定 slug 的 URL。

# eclipse - 需要帮助在 Eclipse 中设置（Tomcat）Web 应用程序以进行调试

> ID：13886946
> 
> 赞同：1
> 
> 时间：2012-12-14T22:07:48.050
> 
> 标签：eclipse, debugging, tomcat

多年来，我一直在使用 eclipse 和 tomcat，但总是在外部部署我的 web 应用程序，从来没有遇到过问题。现在我想使用 eclipse 来调试我的网络应用程序，但我不知道如何让它工作。我首先尝试通过 Eclipse 部署现有的 Web 应用程序，但经过数小时尝试不同的事情后，我决定重新开始。不幸的是，我没有走得更远。我希望如果我能弄清楚事情是如何与一个新的 web 应用程序一起工作的，我可以让事情在我现有的情况下工作。抱歉，这会很长，但这是我在最新的 eclipse (Juno) 上尝试的步骤：

*   在 /usr/java 安装了新版本的 tomcat 7.0.34。

*   在 Eclipse 中，使用“服务器”视图添加服务器，指向新安装（我没有添加任何资源，因为还没有可用的资源）。启动服务器正常工作并按预期获得 404 `http://localhost:8080/`... 然后我停止了它。

*   创建了一个新的“动态 web 项目”，命名为 TomcatDebug，将位置设置为 ~/tomcat-debug，选择上面刚刚创建的服务器（唯一一个），选择默认配置，tomcat-debug 为空，因此为构建路径选择默认值, 模块设置的默认值并让它生成 web.xml。

*   在“tomcat-debug”文件夹中，它创建 WebContent、build 和 src。我将示例“hello, world”index.html 放入 WebContent。

*   现在创建了 TomcatDebug 项目，所以我尝试运行它，告诉它“在服务器上运行”，然后它转到`http://localhost:8080/TomcatDebug/`但给出了 404。我什至尝试添加 index.html，但它仍然给出 404。

这是尽可能基本的，所以我做错了什么？

继续尝试解决这个问题，我停止了服务器，将服务器设置更改为“使用 tomcat 安装”，但是当我重新启动时仍然以相同的方式得到 404。我尝试更改我的模块上下文路径，但仍然是 404。

我完全被难住了。我相信我尽可能地遵循了所有的巫师。我哪里做错了？

谢谢参观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:35:04.727

右键单击您的 index.html**运行方式 -> 在服务器上运行**，您将看到 Tomcat 将自动运行该页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:53:56.393

我有一段时间没有通过eclipse运行tomcat了，所以无法回答这个问题。但是，要了解您正在尝试做的事情（通过 tomcat 在 eclipse 中调试 webapp），您不一定需要这样做。这可能会为您服务：

**编辑**：嗯，[在这里寻找说明](http://wiki.apache.org/tomcat/FAQ/Developing)（“调试”部分）。下面是我是如何做到的（JUNO 和 TC 7），并且在第 1 点有一个烦人的怪癖。

1.  编辑 startup.sh（假设 *NIX/OS X）——最后一行可能是

    `exec "$PRGDIR"/"$EXECUTABLE" start "$@"`

    将其更改为

    `exec "$PRGDIR"/"$EXECUTABLE" jpda start "$@"`

    激活[调试](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/index.html)。（还有其他可能更好的方法 - 我认为tomcat / VM可能会在继续之前暂停侦听器，所以当你不调试时这并不理想）

2.  在 Eclipse 中，在“远程 Java 应用程序”集下创建一个调试配置。默认端口应该没问题，并且可能是主机。选择您的项目。

3.  在“源”选项卡中添加与您的调试相关的源。

4.  启动服务器并运行新的调试配置。应用程序应该在您设置的断点处停止。

# c# - 如何在 3 组不同的照片之间随机化？

> ID：13886947
> 
> 赞同：0
> 
> 时间：2012-12-14T22:07:51.713
> 
> 标签：c#, forms, random, picturebox

我有一个重大问题。想不出解决办法。请帮忙...

我有一个带有图片框的表单。

在我的解决方案资源文件夹中，我保存了 3 个不同的文件夹（a、b、c）。每个文件夹包含 3 张不同的照片。

**每隔 10 秒**，我会在图片框中显示**随机文件夹中的随机照片**。

照片一定不能重复。一旦照片被选中并显示在图片框中，它就不会再次出现。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:11:39.880

首先，您将在 90 秒后得到重复（或没有），因为每 10 秒您只有 9 张照片更改......

话虽如此，您可以预先将所有照片（或名称/位置等信息）加载到集合中，然后[对其进行随机排序](https://stackoverflow.com/questions/375351/most-efficient-way-to-randomly-sort-shuffle-a-list-of-integers-in-c-sharp)。此时，只需按顺序显示图像。

# r - 公式左侧/右侧 I() 的奇怪行为

> ID：13886954
> 
> 赞同：-1
> 
> 时间：2012-12-14T22:08:36.567
> 
> 标签：r, formula

```
set.seed(98234)
y <- rnorm(100)
x <- rnorm(100)
lm0 <- lm(y ~ x)
lm1 <- lm(I(y) ~ I(x)) 
```

一切都很好，我想我们可以同意“lm0”是人们期望发生的。`lm1`等于`lm0`（根据系数判断）。也是如此

```
set.seed(98234)
lm3 <- lm(I(rnorm(100)) ~ rnorm(100))
set.seed(98234)
lm4 <- lm(rnorm(100) ~ I(rnorm(100))) 
```

但是当`I()`不在公式的两边或两边时，我没有从上面得到结果：

```
set.seed(98234)
lm2 <- lm(I(rnorm(100)) ~ I(rnorm(100)))
set.seed(98234)
lm5 <- lm(rnorm(100) ~ rnorm(100)) 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:29:15.300

参数的左侧从不分解为组件，因此`I`不需要分组符号。

```
lm(I(a+b+c+d/e)~f) 
```

将与

```
lm(a+b+c+d/e~f) 
```

然而

```
lm(a~b+c+d/e) 
```

不一样

```
lm(a~I(b+c+d/e)) 
```

甚至

```
lm(a~b+c+I(d/e)) 
```

# ocaml - Ocaml : 异常 Graphics.Graphic_failure("Xlib 错误: BadPixmap (invalid Pixmap parameter)")

> ID：13886957
> 
> 赞同：0
> 
> 时间：2012-12-14T22:08:48.520
> 
> 标签：ocaml

我对caml中的一个小功能有疑问。这是我的功能：

```
let show img = 
  let h = height img in 
  let w = width img in
  open_graph (" "^string_of_int w^"x"^string_of_int h);
  set_window_title "Seam Carving";
  draw img;
  if Graphics.key_pressed() then 
    match Graphics.read_key() with
      | 'q' -> close_graph()
      | _ -> ()
;; 
```

当我单击按钮“q”时，出现此错误： `Fatal error: exception Graphics.Graphic_failure("Xlib error: BadPixmap (invalid Pixmap parameter)")`或分段错误。

有人可以向我解释这种错误的原因吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:33:03.940

您的问题将不会得到答复，因为其中没有足够的信息。

一般来说，如果你遇到 OCaml 的 Segmentation Fault，它是一个 MAJOR BUG，所以你应该在[OCaml bug tracker](http://caml.inria.fr/mantis)上填写一个 bug 报告，并上传一个重现错误的程序。

# asp.net - Thinktecture.IdentityModel 与 SimpleMembership

> ID：13886958
> 
> 赞同：5
> 
> 时间：2012-12-14T22:09:13.093
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, authentication, thinktecture-ident-model

我想使用 ASP.NET SimpleMembership 对使用我的 WebAPI 的用户进行身份验证。Thinktecture 有一个很棒的身份验证库，名为 Thinktecture.IdentityModel (http://thinktecture.github.com/Thinktecture.IdentityModel.45/)，其中一个示例将 Forms Auth 与 Basic Auth ( [source](http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/) ) 联系起来。但是，该示例使用 Membership.ValidateUser() 如果没有 ASP.NET Membership 提供程序就无法工作，SimpleMembership （[source](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)）不支持（**编辑**：这不完全正确，请参阅下面的 Mark 回答）。

* * *

**编辑**：

这是我所做的：

1) 创建一个新的 MVC Internet 应用程序

2) 通过 NuGet 安装 Thinktecture.IdentityModel

3）通过脚手架创建模型和api控制器：

```
public class Goober
{
    public int GooberId { get; set; }
    public string GooberWords { get; set; }
} 
```

4）运行项目，创建一个新用户并使用 Fiddler 创建一个新 Goober

5) 为 GetGoober(int id) 添加 [Authorize]

6）在 WebApiConfig.cs 添加：

```
var authConfig = new AuthenticationConfiguration();

authConfig.AddBasicAuthentication((userName, password) =>
    Membership.ValidateUser(userName, password));

config.MessageHandlers.Add(new AuthenticationHandler(authConfig)); 
```

当我运行该项目并使用 Fiddler 访问 api/goober/1 时，我得到一个**401 www-Authenticate: unspecified**。但是，如果我首先使用 AccountController 登录，然后使用 Fiddler，我会得到**200**，一切都很好。

**编辑**

好的，我认为这个问题与我最初的问题无关。我怀疑它与模板中 SimpleMembership 的初始化有关。当我打开项目并运行调试然后使用 Fiddler 访问 api 时，我无法通过 Auth。但是，当我只需单击 Web 前端上的“注册”链接时，我就会通过 Auth。我猜这是因为在 AccountController 上调用了 InitializeSimpleMembershipAttribute，所以在调用控制器之前不会初始化？

* * *

我尝试使用 WebSecurity.Login() 代替 Membership.ValidateUser() 但这不起作用。

我不知道如何实际实现这一点。有人有建议吗？还是我试图从错误的角度解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:19:13.650

You are correct that ASP.NET Membership provider is not compatible with the `SimpleMembershipProvider` however `SimpleMembershipProvider` does support `ValidateUser`, see [here](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.validateuser%28v=vs.111%29.aspx). Assuming SimpleMembership is correctly configured and initalised you should still be able to call `Membership.ValidateUser()`.

If you have already tried `Membership.ValidateUser()` and got an error please let me know and we can try resolve it.

**Update**

So having followed your reproduction steps I have managed to pin-point an error. Having brought the Thinktecture `AuthenticationHandler` handler inline and run in debug. 30 seconds after a request to the api controller a database connection error is being raised. This is failing asynchronously and silently.

After some fiddling around I believe it is the `DefaultConnection` connection string which is at fault.

Like me your default connection probably contains a file name like this: AttachDBFilename=|DataDirectory|\aspnet-MvcApplication3-20121215104323.mdf"

When ValidateUser is called inside the delegate registered at app start up (for validating the credentials) it appears to be failing to resolve `|DataDirectory|` I found that by updating this path to the full name my connection problems went away.

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MvcApplication3-20121215104323;Integrated Security=SSPI;AttachDBFilename=C:\mydatabase\file\path\example\aspnet-MvcApplication-20121215104323.mdf" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

I then found this post [here](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/dc31ea59-5718-49b6-9f1f-7039da425296/), it indicates that the AppDomain has not had it's data directory set correctly at this point.

So once the config set up and the connection string altered with a proper file path and a user name "test" and a password "testing" this request through fiddler got a 200:

```
GET http://localhost/api/goober/1
User-Agent: Fiddler
Host: localhost
Authorization: Basic dGVzdDp0ZXN0aW5n 
```

***As an aside***

I found that to get the forms authorisation token to also allow access to the api controllers I had to add this. Otherwise the Thinkteckture code sets the principle back to anonymous:

Add this

```
authConfig.InheritHostClientIdentity = true; 
```

To counteract [this](https://github.com/thinktecture/Thinktecture.IdentityModel.45/blob/master/IdentityModel/Thinktecture.IdentityModel/Tokens/Http/AuthenticationHandler.cs) (line 52):

```
if (_authN.Configuration.InheritHostClientIdentity == false)
{
   //Tracing.Information(Area.HttpAuthentication, "Setting anonymous principal");
   SetPrincipal(Principal.Anonymous);
} 
```

# java - 如何将 ANTLR 语法构建输出到屏幕（例如到 JOptionPane，如 ANTLRworks CTRL-r）

> ID：13886961
> 
> 赞同：2
> 
> 时间：2012-12-14T22:09:18.703
> 
> 标签：java, reflection, build, antlr, grammar

我可以将语法文件加载到我的 java 项目（在 netbeans 中）并生成/构建我的词法分析器和解析器类，通过反射加载它们，然后解析我需要解析的内容。

我想要的是一个简单的例子，它将来自词法分析器和解析器的生成/构建的结果重定向到一个字符串，这样我就可以将错误放到像 JOptionPane 这样的弹出窗口中。就像 ANTLRworks 在您执行 CTRL-R（至少在 Windows 中）显示 Error(123) 语法时所做的那样。g:100:12: ...Warning...etc...

现在我已经在使用 DiagnosticCollector 了，但这并不总是像 ANTLRworks 中的 CTRL-r 那样提供足够的细节。用户纠正语法的想法是为了纠正错误。

这是我的代码片段

```
 Tool tool = new Tool(new String[]{userDir + grammarPath + grammarName + ".g"});
            //tool.setOutputDirectory(userDir + grammarPath );
            tool.process();
            if(tool.getNumErrors()>0) {
                errors=true;
                unableToLoadGrammar_AddLine("1\. Detected "+tool.getNumErrors()+" Error(s)"+tool.toString()+"\n");
            } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:48:30.717

调用方法`org.antlr.tool.ErrorManager`：`setErrorListener`

```
public class ToolTest {
    public static void main(String[] args) {

        org.antlr.Tool tool = new org.antlr.Tool(new String[] { "GrammarWithErrors.g" });

        final ArrayList<String> messages = new ArrayList<String>();

        ErrorManager.setErrorListener(new ANTLRErrorListener() {

            @Override
            public void warning(Message msg) {
                messages.add("Warning: " + msg.toString());
            }

            @Override
            public void info(String msg) {
                messages.add("Info: " + msg.toString());
            }

            @Override
            public void error(ToolMessage msg) {
                messages.add("Tool Error: " + msg.toString());
            }

            @Override
            public void error(Message msg) {
                messages.add("General Error: " + msg.toString());
            }
        });

        tool.process();

        System.out.println("Done processing...");

        for (String msg : messages) {
            System.out.println(msg);
        }
    }
} 
```

将错误的语法传递给上面的代码会产生以下输出：

```
Done processing...
General Error: error(100): GrammarWithErrors.g:1:14: syntax error: antlr: MismatchedTokenException(74!=52)
Tool Error: error(150):  grammar file GrammarWithErrors.g has no rules
General Error: error(100): GrammarWithErrors.g:82:7: syntax error: assign.types: NoViableAltException(0@[]) 
```

请注意，`Tool`仍然直接对`System.err`和进行操作`System.out`。如果您想处理来自 的*所有内容*`Tool`，则还必须调用`System.setErr`and `System.setOut`。

# ios - 绘制 UIButton/UIBarButtonItem 以使用父栏的 tintColor？

> ID：13886967
> 
> 赞同：0
> 
> 时间：2012-12-14T22:10:03.683
> 
> 标签：ios, cocoa-touch, uikit, core-graphics, uibarbuttonitem

我有点进退两难。这不是一个交易破坏者，但如果有一个像样的答案，我很感兴趣。

我一直在使用 a`UIButton`和 a 内的自定义子视图`UIBarButtonItem`（作为条形按钮项的`customView`）。我的自定义子视图*不是*a`UILabel`也不是 a `UIImage`，这就是我正在做我正在做的事情的原因。这`UIBarButtonItem`是我导航栏上的一个项目，导航栏`tintColor`有一套。我希望`UIButton`具有 的圆角矩形外观`UIBarButtonItemStyleBordered`，这意味着它也应该采用`tintColor`其父栏的 。

当前的解决方案已经实现了`png`从 UIKit for `UINavigationBarDefaultButton.png`and family 中提取文件。如果我不设置属性，这看起来会*很棒；*`tintColor`相反，当我想要亮橙色（不是我使用的颜色，但你明白我的意思）时，按钮仍然是“iOS 海军蓝”。这让我陷入了两难境地：让 UIButton 看起来和表现得像那种`UIBarButtonItem`风格的最佳方法是什么，*包括*继承`tintColor`属性？我可以自己在按钮上设置该属性；这没什么大不了的。

我想`UIButton`在 CoreGraphics 中绘制它的背景吗？是否有一个框架/库已经实现了这个？如果我在做不可能的梦，请告诉我。我对手工完成 CoreGraphics 还不是很厉害，但它绝对不在可能的范围之外。

如果无法做到这一点，我知道我总是可以采用`UIView`我试图修改的很酷的自定义并将其保存为图像（因此`UIImage`在 a 内部使用`UIBarButtonItem`），但我想看看这是否是可能的。

这就是我正在处理的（下）。后退按钮看起来很棒，但这只是因为我没有弄乱它。我希望它`rightBarButtonItem`使用我`tintColor`设置的，但是为了给它`UIBarButtonItemStyleBordered`一个集合的外观`customView`，我不得不让按钮使用`png`文件作为它的背景。下面是您所看到的，即使`tintColor`设置在`UIBarButtonItem`（因为它使用 a `png`）。

![导航栏](../Images/34a289a944a467610bb936b0df02983f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:30:19.987

我确实在 Stack Overflow 上找到[了这个问题/答案](https://stackoverflow.com/a/7377827/194869)，这让我离得足够近，我可以翼翼地解决剩下的问题。这是一篇关于如何`UIImage`用 a着色 a 的详细文章`UIColor`；我已将它提取到一个函数中，并在[此处](https://gist.github.com/4313707)发布了一个要点。

结合这一点，我定义了一个类别方法`UIButton`，让我可以使用该背景图像创建一个按钮，着色，然后将其放入一个空的`UIBarButtonItem`.

```
+ (id)buttonWithBarStyleAndTintColor:(UIColor *)tintColor customView:(UIView *)customView {
    UIImage *defaultNormal = [UIImage imageNamed:@"UINavigationBarDefaultButton.png"];
    UIImage *defaultPressed = [UIImage imageNamed:@"UINavigationBarDefaultButtonPressed.png"];
    UIImage *back = [TintImageWithTintColor(defaultNormal, tintColor)
                     stretchableImageWithLeftCapWidth:5.0
                     topCapHeight:0.0];
    UIImage *pressed = [TintImageWithTintColor(defaultPressed, tintColor)
                        stretchableImageWithLeftCapWidth:5.0
                        topCapHeight:0.0];

    UIButton *button = [self buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0, 0, 34.0f, 30.0f);
    [button addSubview:customView];
    customView.userInteractionEnabled = NO;
    customView.frame = CGRectCenterRectInRect(customView.frame, button.frame);
    [button setBackgroundImage:back forState:UIControlStateNormal];
    [button setBackgroundImage:pressed forState:UIControlStateSelected];
    [button setBackgroundImage:pressed forState:UIControlStateHighlighted];
    return button;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:21:59.263

您可以尝试将 UIButton 类型设置为自定义并确保其颜色清晰，与您的自定义视图相同，这样唯一可见的视图将是 UIBarButtonItem 色调颜色。

此外，如果您愿意投资，还有一个名为 PaintCode 的工具可以为您编写 CoreGraphics 的代码。

# mysql - 使用 vmc 隧道将数据插入到 cloudfoundry mysql 数据库中

> ID：13886972
> 
> 赞同：0
> 
> 时间：2012-12-14T22:10:59.437
> 
> 标签：mysql, privileges, cloud-foundry, vmc

我正在尝试**将数据插入到 cloudfoundry mysql 数据库**中，如下所示：

```
vmc tunnel myapp --port 10000 mysql 
```

然后：

```
mysql> source /home/julien/Documents/donnees/projets/Site-Rencontres/java/src/main/resources/misc/sql/geolocation.sql
ERROR 1142 (42000): INSERT command denied to user 'udYra*****'@'172.30.*.*' for table 'geolocation' 
```

令我印象深刻的是，我检索到的用户`java.lang.System.getenv("VCAP_SERVICES");`与上面的用户不同：

```
"user":"ukqM8******" 
```

我的问题是双重的：

1.  如何使用数据预填充 cloudfoundry 数据库？
2.  为什么上述用户与我从 VCAP_SERVICES 环境变量中检索到的用户不同？

**编辑**：我能够使用 vmc 隧道的选项成功连接到 mysql ，然后从 mysql 客户端`none`指向端口。`10000`我现在遇到了 mysql 权限问题，我在 SO 上打开了另一个线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:26:39.317

用户不同的原因是 Caldecott 对您检查 VCAP_SERVICES 的应用程序使用了不同的绑定。

# javascript - 显示具有相同属性的相似产品

> ID：13886975
> 
> 赞同：0
> 
> 时间：2012-12-14T22:11:14.813
> 
> 标签：javascript, forms

我正在使用 wordpress 建立一个网站来销售产品。产品数据馈送来自供应商的服务器。当有人点击一个产品时，我想在页面底部显示几个类似的产品。

由于每个产品都有价格、尺寸、颜色等属性，所以我的方法是以隐藏的形式捕获这些属性，然后在供应商的产品列表中进行搜索并返回结果。

你会这样做吗？如果是这样，我如何限制结果并只返回 4 个产品？

# javascript - 无法让 jqueryrotate 正常工作

> ID：13886980
> 
> 赞同：1
> 
> 时间：2012-12-14T22:11:29.303
> 
> 标签：javascript, jquery

我没有任何运气让 jqueryrotate example #2 on this [page](http://code.google.com/p/jqueryrotate/wiki/Examples)在一个简单的 html 页面上工作。我究竟做错了什么？谢谢您的帮助。

这是我的代码 -

```
 <!DOCTYPE html>

<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
<STYLE type="text/css">
 #img { margin:100px 100px;}
</STYLE>
</head>
<body>

<script type="text/javascript">
$("#img").rotate({ 
   bind: 
     { 
        mouseover : function() { 
            $(this).rotate({animateTo:180})
        },
        mouseout : function() { 
            $(this).rotate({animateTo:0})
        }
     } 

});
</script>

<img id="img" src="https://www.google.com/images/srpr/logo3w.png">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:15:49.470

您的代码可以正常工作，请参见[此处](http://jsfiddle.net/Trufa/pQcrU/)。

您可能应该使用[ready](http://api.jquery.com/ready/)。

```
$(document).ready(function() {
    $("#img").rotate({
        bind: {
            mouseover: function() {
                $(this).rotate({
                    animateTo: 180
                })
            },
            mouseout: function() {
                $(this).rotate({
                    animateTo: 0
                })
            }
        }

    });
});​ 
```

另外，我不建议使用 id`#img`这不是错的，它只是一种丑陋的 IMO。

# java - Android 下载文件得到 FileNotFoundException

> ID：13886987
> 
> 赞同：2
> 
> 时间：2012-12-14T22:12:08.103
> 
> 标签：java, android

```
 else if (v.getId() == R.id.update) {

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy);

        try {
            URL url = new URL("http://darkliteempire.gaming.multiplay.co.uk/testdownload.txt");

            //create the new connection

            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

            //set up some things on the connection

            urlConnection.setRequestMethod("GET");

            urlConnection.setDoOutput(true);

            //and connect!

            urlConnection.connect();

            //set the path where we want to save the file

            //in this case, going to save it on the root directory of the

            //sd card.

            File SDCardRoot = new File("/sdcard/"+"download/");

            //create a new file, specifying the path, and the filename

            //which we want to save the file as.

            File file = new File(SDCardRoot,"test.txt");

            //this will be used to write the downloaded data into the file we created

            FileOutputStream fileOutput = new FileOutputStream(file);

            //this will be used in reading the data from the internet

            InputStream inputStream = urlConnection.getInputStream();

            //this is the total size of the file

            int totalSize = urlConnection.getContentLength();

            //variable to store total downloaded bytes

            int downloadedSize = 0;

            //create a buffer...

            byte[] buffer = new byte[1024];

            int bufferLength = 0; //used to store a temporary size of the buffer

            //now, read through the input buffer and write the contents to the file

            while ( (bufferLength = inputStream.read(buffer)) > 0 ) 

            {

            //add the data in the buffer to the file in the file output stream (the file on the sd card

            fileOutput.write(buffer, 0, bufferLength);

            //add up the size so we know how much is downloaded

            downloadedSize += bufferLength;

            int progress=(int)(downloadedSize*100/totalSize);

            //this is where you would do something to report the prgress, like this maybe

            //updateProgress(downloadedSize, totalSize);

            }

            //close the output stream when done

            fileOutput.close();
        } catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (ProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

此代码不断出现 FileNotFoundException，但文件在那里，如果您按照 url 可以看到它。

它必须以特定方式托管吗？还是我得到它的方式有问题

编辑：这是 logcat 消息

```
12-14 22:29:19.890: W/System.err(24557): java.io.FileNotFoundException:     http://darkliteempire.gaming.multiplay.co.uk/testdownload.txt
12-14 22:29:19.890: W/System.err(24557):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
12-14 22:29:19.890: W/System.err(24557):    at com.MasterZangetsu.kentrocksoc.MainActivity.onClick(MainActivity.java:99)
12-14 22:29:19.890: W/System.err(24557):    at android.view.View.performClick(View.java:3591)
12-14 22:29:19.890: W/System.err(24557):    at android.view.View$PerformClick.run(View.java:14263)
12-14 22:29:19.895: W/System.err(24557):    at android.os.Handler.handleCallback(Handler.java:605)
12-14 22:29:19.895: W/System.err(24557):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-14 22:29:19.895: W/System.err(24557):    at android.os.Looper.loop(Looper.java:137)
12-14 22:29:19.895: W/System.err(24557):    at android.app.ActivityThread.main(ActivityThread.java:4507)
12-14 22:29:19.895: W/System.err(24557):    at java.lang.reflect.Method.invokeNative(Native Method)
12-14 22:29:19.895: W/System.err(24557):    at java.lang.reflect.Method.invoke(Method.java:511)
12-14 22:29:19.895: W/System.err(24557):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-14 22:29:19.895: W/System.err(24557):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-14 22:29:19.895: W/System.err(24557):    at dalvik.system.NativeStart.main(Native Method)
12-14 22:29:20.170: W/WifiStateTracker(2010): getNetworkInfo : NetworkInfo: type: WIFI[], state: DISCONNECTED/DISCONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T08:56:50.383

在您的代码中注释下面的一行。urlConnection.setDoOutput(true);

# deployment - 将exe复制到不同的计算机时程序崩溃

> ID：13886989
> 
> 赞同：0
> 
> 时间：2012-12-14T22:12:11.950
> 
> 标签：deployment, windows-7, .net-4.0, reference, sharpdevelop

我使用 Sharp Develop 4.2 在装有 .NET 4.0 的 Windows 7 计算机上用 c# 编写了一个程序。然后，我将其更改为 Sharp Develop 中的版本，构建它，并将 bin\Release 文件夹中的 .exe 复制到另一台具有 .NET 4.0 的 Windows 7 计算机。它在不加载初始表单的情况下立即崩溃，并且没有给出特定错误。我的 MainForm 方法是这样的：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;
using System.Data;
using System.Data.SqlClient;
using System.ComponentModel;
using System.Globalization;
using System.IO;
using System.Drawing.Printing;
using System.Diagnostics;
using System.Text;

namespace BiasTracker1._
{
public partial class MainForm : Form
{
//Here are my initial variables

public static SqlConnectionStringBuilder sqlBldr = new SqlConnectionStringBuilder();
public static DataSet ds = new DataSet();
public static DataTable DisplayTable = ds.Tables.Add("DisplayTable");
SqlDataAdapter RawDataDA;
SqlCommandBuilder RawSampleSCB;
public static DataTable InstrumentDetail = ds.Tables.Add("InstrumentDetail");
public static string DatabaseOwner;
System.Windows.Forms.DataVisualization.Charting.Chart CurrentChart;
public static DataTable ImportDataTable = new DataTable();
public static string NewTransfer;
public static bool ValidatePerCell = true;
public static Image chart1Image;
public static string Title;
public static string NIRLabString;
bool ChangesNotDisplayed = false;
Point PreviousChartLocation;
List<System.Windows.Forms.DataVisualization.Charting.DataPoint> SelectedPoints = new List<System.Windows.Forms.DataVisualization.Charting.DataPoint>();
List<DataRow> SelectedRows = new List<DataRow>();
static double EPS = 2.22045e-016;
double FPMIN = 2.22507e-308 / EPS;
public static CustomPrintDoc pd = new CustomPrintDoc();
int NumOfParametersInReport = 0;
public static SqlConnectionStringBuilder SimPlusConn;
public static string SimPlusProductGUID;
public static string SimPlusSiteCode;
public double[] cof = new double[] {-1.3026537197817904,0.64196979235649026,0.019476473204185836,-0.009561514786808631,-0.000946595344482036,0.000366839497852761,0.000042523324806907,-0.000020278578112534,-0.000001624290004647,0.00000130365583558,0.000000015626441722,-0.000000085238095915,0.000000006529054439,0.000000005059343495,-0.000000000991364156,-0.000000000227365122,0.000000000096467911,0.000000000002394038,-0.000000000006886027,0.000000000000894487,0.000000000000313092,-0.000000000000112708,0.000000000000000381,0.000000000000007106,-0.000000000000001523,-0.000000000000000094,0.000000000000000121,-0.000000000000000028};
Point? prevPosition = null;
ToolTip tooltip = new ToolTip();

public MainForm()
{
     try
     {
          InitializeComponent();
     }
     catch(Exception ex)
     {
          MessageBox.Show("Failed in Initialization.\n" + ex.ToString());
     }
     //Test SQL Connection
     FileStream ConnectionStream;
     try
     {
          ConnectionStream = new FileStream(@"C:\BiasTracker\settings.ini",FileMode.OpenOrCreate);
     }
     catch(DirectoryNotFoundException ex)
     {
          MessageBox.Show("Not able to find ini... Creating one.");
          Directory.CreateDirectory(@"C:\BiasTracker");
          ConnectionStream = new FileStream(@"C:\BiasTracker\settings.ini",FileMode.OpenOrCreate);
     }
     try
     {
          StreamReader ConnectionRdr = new StreamReader(ConnectionStream);
          string line = null;
          if((line = ConnectionRdr.ReadLine()) != null)
          {
               sqlBldr.DataSource = line;
               sqlBldr.Password = ConnectionRdr.ReadLine();
               sqlBldr.UserID = ConnectionRdr.ReadLine();
               sqlBldr.InitialCatalog = ConnectionRdr.ReadLine();
          }
          else
          {
               sqlBldr.DataSource = ".\\SQLEXPRESS";
               sqlBldr.Password = "password";
               sqlBldr.UserID = "sa";
               sqlBldr.InitialCatalog = "BiasMaster";
               StreamWriter ConnectionWtr = new StreamWriter(ConnectionStream);
               ConnectionWtr.WriteLine(".\\SQLEXPRESS");
               ConnectionWtr.WriteLine("password");
               ConnectionWtr.WriteLine("sa");
               ConnectionWtr.WriteLine("BiasMaster");
               ConnectionWtr.WriteLine("applications\\SQLEXPRESS");
               ConnectionWtr.WriteLine("password");
               ConnectionWtr.WriteLine("sa");
               ConnectionWtr.WriteLine("BiasMaster");
               ConnectionWtr.Dispose();
          }
          ConnectionStream.Close();
          ConnectionStream.Dispose();
          ConnectionRdr.Dispose();
     }
     catch(Exception ex)
     {
          MessageBox.Show("Not Able to read connection string\n" + ex.ToString());
     }
     System.Data.SqlClient.SqlConnection tmpConn;
     tmpConn = new SqlConnection(sqlBldr.ConnectionString);
     try                   //Test the connection and existence of the database
     {
          tmpConn.Open();
          tmpConn.Close();
     }
     catch
     {
          MessageBox.Show("Database Connection not Found.");
          tmpConn.Close();
     }

     SqlDataAdapter SettingsDA = new SqlDataAdapter("SELECT * FROM Settings WHERE SettingDesc = 'Owner'",sqlBldr.ConnectionString);
     DataTable SettingsTable = new DataTable();
     SettingsDA.Fill(SettingsTable);
     DatabaseOwner = SettingsTable.Rows[0][1].ToString();

     MakeTreeView();

} 
```

MakeTreeView 被带有消息框的 try catch 包围。

我的表单加载这些控件：

```
privateSystem.Windows.Forms.ToolStripMenuItemsimPlusImportToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripStatusLabeltoolStripStatusLabel1;
privateSystem.Windows.Forms.ToolStripMenuItemsyncWithSharedServerToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemsyncToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemsetDBConnectionToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemtestToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemdetectOutliersToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemsaveToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemexcludeSelectedToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemgraphActionsToolStripMenuItem;
privateSystem.Windows.Forms.ComboBoxcomboBox7;
privateSystem.Windows.Forms.ToolStripMenuItemprintReportToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemaddToReportToolStripMenuItem;
privateSystem.Windows.Forms.DataVisualization.Charting.Chartchart4;
privateSystem.Windows.Forms.DataVisualization.Charting.Chartchart3;
privateSystem.Windows.Forms.Panelpanel2;
privateSystem.Windows.Forms.DataVisualization.Charting.Chartchart2;
privateSystem.Windows.Forms.ComboBoxcomboBox6;
privateSystem.Windows.Forms.Labellabel7;
privateSystem.Windows.Forms.Buttonbutton3;
privateSystem.Windows.Forms.DataVisualization.Charting.Chartchart1;
privateSystem.Windows.Forms.Buttonbutton2;
privateSystem.Windows.Forms.ToolStripMenuItemremoveProductFormInstrumentToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemcopyInstrumentProductListToAnotherInstrumentToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemaddProductToInstrumentToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemaddParameterToProductToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemtablesToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemtXTToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemcSVToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItembiasDataToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemimportToolStripMenuItem;
privateSystem.Windows.Forms.Labellabel1;
privateSystem.Windows.Forms.ComboBoxcomboBox1;
privateSystem.Windows.Forms.Labellabel2;
privateSystem.Windows.Forms.ComboBoxcomboBox2;
privateSystem.Windows.Forms.Labellabel3;
privateSystem.Windows.Forms.ComboBoxcomboBox3;
privateSystem.Windows.Forms.Labellabel4;
privateSystem.Windows.Forms.ComboBoxcomboBox4;
privateSystem.Windows.Forms.Labellabel5;
privateSystem.Windows.Forms.ComboBoxcomboBox5;
privateSystem.Windows.Forms.Labellabel6;
privateSystem.Windows.Forms.DateTimePickerdateTimePicker1;
privateSystem.Windows.Forms.DateTimePickerdateTimePicker2;
privateSystem.Windows.Forms.ToolStripMenuItemparameterToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemproductToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuIteminstrumentToolStripMenuItem1;
privateSystem.Windows.Forms.ToolStripMenuItemlocationToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemcompanyToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemnewToolStripMenuItem;
privateSystem.Windows.Forms.ToolStripMenuItemfileToolStripMenuItem;
privateSystem.Windows.Forms.MenuStripmenuStrip1;
privateSystem.Windows.Forms.StatusStripstatusStrip1;
privateSystem.Windows.Forms.TabPagetabPage2;
privateSystem.Windows.Forms.DataGridViewdataGridView1;
privateSystem.Windows.Forms.TreeViewtreeView1;
privateSystem.Windows.Forms.Buttonbutton1;
privateSystem.Windows.Forms.Panelpanel1;
privateSystem.Windows.Forms.TabPagetabPage1;
privateSystem.Windows.Forms.TabControltabControl1; 
```

我唯一能想到的是我正在使用对另一台计算机无法访问的东西的引用。我以为是图表控件，但 .NET 4.0 包含了这些。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:51:33.390

我找到了罪魁祸首。是这样的：

```
DatabaseOwner = SettingsTable.Rows[0][1].ToString(); 
```

我使用 AppDomain.UnhandledException 找到了它。如果其他人遇到类似问题，这是一个很好的工具。 [http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

# javascript - ajaxtoolkit 进度更新 javascript

> ID：13886991
> 
> 赞同：1
> 
> 时间：2012-12-14T22:12:21.243
> 
> 标签：javascript, asp.net, asp.net-ajax, modalpopupextender

我正在使用 ajaxtoolkit modalpopupextender 来显示处理消息。它在典型的回发（按钮单击等）上运行良好。

但是，我在 javascript 中调用回发并且进度消息没有显示，除非我在 javascript 中添加“警报”。

这是我的javascript：

```
function getOrder() {
    beginRequest('', '')
    var hid = document.getElementById("ctl00_ContentPlaceHolder_hid");
    //alert(hid.value);

    __doPostBack("SaveOrder", hid.value);
    endRequest('', '')
} 
```

我显然不想发出“警报”，所以有人有解决方案或遇到这个问题吗？

这是与此相关的另一个 javascript 体验（典型的东西）：

```
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequest);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequest);    

var mdlCtl = document.getElementById('ctl00_hfModalCtlID').value;

function beginRequest(sender, args){
    $find(mdlCtl).show();
}

function endRequest(sender, args) {
    $find(mdlCtl).hide();
} 
```

我很困惑为什么“警报”会在显示处理消息的 javascript 中有所不同......？

想法？想法？

# windows - 如何在 Parallels 中运行 Windows 8 的 Mac 上设置 Git

> ID：13886993
> 
> 赞同：2
> 
> 时间：2012-12-14T22:12:27.860
> 
> 标签：windows, macos, git, parallels

我想知道在 Macbook Pro 上设置 Git 的最佳方法是 OS X Mountain Lion 10.8 和 Windows 8 Pro in Parallels？

我不太确定什么是最好的工作流程。我应该在两个平台上都安装 Git，还是应该将所有文件存储在一个平台上并在该平台上安装 Git？

我问的原因是因为我打算将 Windows 上的 Visual Studio 用于学校项目，并使用 Sublime Text/XCode 来开发 Web 开发和 iOS 应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:39:43.790

最佳实践是在两个工作站上都​​安装 Git，每个工作站都有一个完整的 repo。
理想情况下，您可以从任一工作站推送到 GitHub 等 git repo 托管服务。

那样：

*   您在每台计算机上都获得了完整的 repo（包含所有文件的完整历史记录）
*   即使没有网络，您也可以在其中任何一个上工作
*   您可以将您的工作保存在云端

问题可能与设置有关。
看：

*   “[使用 git 时 Mac/Windows 的文件权限问题](https://stackoverflow.com/questions/3603476/file-permission-issue-with-mac-windows-when-using-git)”：
    `git config --global core.filemode false`
*   “ [Git (GitHub): Multiplatform development and autocrlf option?](https://stackoverflow.com/questions/12031212/git-github-multiplatform-development-and-autocrlf-option) ”
    你可以在 OS X 和 Windows 上设置`autocrlf`为`true`你的情况。
    （即使[我更喜欢将其设置为 false](https://stackoverflow.com/questions/2825428/why-should-i-use-core-autocrlf-true-in-git)）

# c# - 正则表达式用文字替换部分查询字符串

> ID：13886998
> 
> 赞同：0
> 
> 时间：2012-12-14T22:12:55.137
> 
> 标签：c#, .net, regex, vb.net

我有一个小问题，因为我`Like`在我的 .Net 应用程序中传递了几个 SQL Server 查询（我无法控制），我需要转义一些字符以使它们成为数据库的文字。

例如，假设我尝试查询的字段类似于：

`This_is [a] long_text field with [literal] characters in it`

我的查询看起来像这样：

`SELECT * FROM [MyTable] where [MyField] Like 'This_% [literal]%'`

现在，这**应该**得到该数据，挑战是 SQL Server 没有将`_`and`[`字符视为文字字符，因此我必须将查询更新为：

`SELECT * FROM [MyTable] where [MyField] Like 'This[_]% [[]literal]%'`

然后它就起作用了。

* * *

所以，我的问题是我想编写一个 VB.Net 函数，它使用 RegEx 来查找`Like`语句的一部分，然后替换字符。

类似于以下内容：

```
Public Function ConvertQuery(strSQL as string)

... Some kind of Regex that searches for the word "Like" 
    and then takes everytihng between the 2 "'" characters
    Then replaces the "_" with "[_]" and "[" with "[[]"

Return ChangedString
End Function 
```

我知道我提供了非常糟糕的细节，我知道我想要什么，我只是不知道如何使用 RegEx 来做到这一点。

另外，如果有更聪明的方法来使用 SQL Server`Like`语句执行此操作，也**请**告诉我！！！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:20:40.223

看到那个`C#`标签，我假设你可以用 C# 回答。

```
string input = "This_is [a] long_text field with [literal] characters in it";
var output = Regex.Replace(input, @"[_\[]","[$0]"); 
```

**编辑**

```
string input = "SELECT * FROM [MyTable] where [MyField] Like 'This_% [literal]'";
var output = Regex.Replace(input, @"(?<=Like[ ]*\'.+?)[_\[]", "[$0]"); 
```

# asp.net-mvc - 局部视图中的联系表

> ID：13886999
> 
> 赞同：1
> 
> 时间：2012-12-14T22:12:56.757
> 
> 标签：asp.net-mvc, redirect, asp.net-mvc-partialview, asp.net-mvc-ajax

我不得不承认，从 Web 表单到 MVC 的转变确实让我大吃一惊。与 Web 窗体相比，我似乎无法完全理解 MVC 的功能，并且在尝试执行看似简单的任务时，我继续遇到一个又一个的障碍。再加上 javascript/jquery 的基本知识，我大部分时间都在摸不着头脑。

我一直在努力将我公司构建的自定义 CMS 从 Web 表单转换为 MVC。此 CMS 允许创建页面和操作站点导航，从而创建页面模型以及相关视图和控制器。

虽然客户可以编辑 99% 的网站，但有些元素是静态的，并且在特定页面上按需加载。例如，*联系*页面存在于 CMS 中，但站点会根据需要注入实际的联系表单。

在 Web 表单中构建时，此联系表单只是一个用户控件，具有处理回发的自己的逻辑。我认为这里的逻辑转换是创建局部视图，但我在完成这项任务时遇到了可笑的困难。虽然我已经能够为这个联系表单创建模型、视图和控制器，但我似乎无法让它正常工作。

经过 3 天的时间在 Stack Overflow 上寻求建议后，我完成了几乎所有工作来完成这项工作。但是，我不知道如何从局部视图执行看似简单的重定向来挽救我的生命。我尝试了许多方法，包括在[Doug.Instance](http://geekswithblogs.net/DougLampe/archive/2011/08/05/redirecting-from-a-partial-view-the-right-way-in-asp.net.aspx)中描述的一种，但没有任何运气。发布后，即使控制器使用“return PartialView”，部分视图也会作为整个视图返回。如果我再次发布它，它会返回原来显示的部分视图。此外，我的`Redirect`变量在成功后没有更新，并且`OnSuccess`javascript 没有触发。

下面是我的代码。请帮帮我，因为我的头发快用完了...

**页面视图（为了简洁而缩短）**

```
...
@if (Model.ID == 8)
{
  //LOAD CONTACT FORM
  @Html.Action("Contact","ContactForm")
}... 
```

**联系表局部视图（为简洁起见）**

```
@model NCOWW.Models.ContactForm

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript">
  // Labels over the inputs.
  window.addEvent("load", function () {
    var myForm = document.id('contactForm');
    myForm.getElements('[type=text], textarea').each(function (el) {
      new OverText(el);
    });
  });
  function FormComplete() {
    if ($("#Redirect").val() != '') {
      document.location = $("#Redirect").val();
    } 
  } 
</script>
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "contactForm", OnSuccess = "FormComplete" }))
{
  @Html.ValidationSummary(true)
  <div id="contactForm">
    @Html.HiddenFor(model => model.Redirect)

    @Html.TextBoxFor(model => model.Name, new { tabindex = 1, @class = "half", Title = @Html.DisplayNameFor(model => model.Name) })
    @Html.ValidationMessageFor(model => model.Name)

       @Html.TextAreaFor(model => model.Comments, new { tabindex = 13, Title =     @Html.DisplayNameFor(model => model.Comments) })
    @Html.ValidationMessageFor(model => model.Comments)

    <br />
    <input type="submit" value="Submit" name="Submit" class="button" />
  </div>
} 
```

**联系表格控制器（为简洁起见）**

```
public ActionResult Contact(ContactForm c)
    {
      try
      {
        MailMessage message = new MailMessage();
        message.IsBodyHtml = true;
        message.From = new MailAddress(c.Email);
        message.Body += "<b>Name:</b> " + c.FullName + "<br/><br/>";
        message.Body += "<b>Questions/Comments:</b><br> " + c.Comments;

        SmtpClient client = new SmtpClient();
        client.Send(message);
        c.Redirect = "/formsuccess";

        return PartialView("contactForm", c);
      }
      catch
      {
        return PartialView();
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:40:59.107

您遇到的问题在 ajax 中很常见。您需要注意的是，当 ajax 呈现响应时，它不知道您返回的 javascript。

你需要有某种方式来注册你的javascript才能触发它。

现在该怎么做？我创造了一种对我有用的方法：

在已重新加载的页面上具有 javascript 功能。

```
function RedirectToLocation(url) {
//your javascript event here
        } 
```

您的 ajax 调用，我有 ajax 操作链接，但开始形式几乎相同

您感兴趣的部分是 AjaxOptions。和事件 OnSuccess。这将在调用成功时触发。

链接示例：

> @Ajax.ActionLink("Comments", "AddComment", "Task", new { id = Model.Task.TaskId, TaskStatus = (int)State.Closed }, **new AjaxOptions { HttpMethod = "Get", UpdateTargetId = "showResults ", OnSuccess = "RedirectToLocation" }** , null)

[在这里您可以阅读更多关于 ajax 选项的信息](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions.onsuccess%28v=vs.108%29.aspx)

只需在您的代码示例中为您的操作结果指出问题

```
try
      {
        MailMessage message = new MailMessage();
        message.IsBodyHtml = true;
        message.From = new MailAddress(c.Email);
        message.Body += "<b>Name:</b> " + c.FullName + "<br/><br/>";
        message.Body += "<b>Questions/Comments:</b><br> " + c.Comments;

        SmtpClient client = new SmtpClient();
        client.Send(message);
        c.Redirect = "/formsuccess";

        return PartialView("contactForm", c);
      }
      catch
      {
        return PartialView();  <-- will render what, better will be if it renderes error mesasge partial view
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:32:27.227

通过在部分视图中添加**操作名称来尝试**

> @using (Ajax.BeginForm( **"Action Name"** ,new AjaxOptions { UpdateTargetId = "contactForm", OnSuccess = "FormComplete" })) {

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:03:10.290

一旦我开始重新思考我真正想要实现的目标，我就能让它发挥作用。`PartialView("contactForm", c);`我最终没有返回，而是返回了`Json(c);`。然后我解析了返回的 Json 并从那里重定向。最终的工作代码如下。

**页面视图（为了简洁而缩短）**

```
...
@if (Model.ID == 8)
{
  //LOAD CONTACT FORM
  @Html.Action("Contact","ContactForm")
}... 
```

**联系表局部视图（为简洁起见）**

```
@model NCOWW.Models.ContactForm

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript">
  // Labels over the inputs.
  window.addEvent("load", function () {
    var myForm = document.id('contactForm');
    myForm.getElements('[type=text], textarea').each(function (el) {
      new OverText(el);
    });
  });
  function FormComplete(result) {
    if (result.Redirect != null && result.Redirect != '') {
      document.location = result.Redirect;
    }
  }
</script>
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "contactForm", OnSuccess = "FormComplete" }))
{
  @Html.ValidationSummary(true)
  <div id="contactForm">
    @Html.HiddenFor(model => model.Redirect)

    @Html.TextBoxFor(model => model.Name, new { tabindex = 1, @class = "half", Title = @Html.DisplayNameFor(model => model.Name) })
    @Html.ValidationMessageFor(model => model.Name)

       @Html.TextAreaFor(model => model.Comments, new { tabindex = 13, Title =     @Html.DisplayNameFor(model => model.Comments) })
    @Html.ValidationMessageFor(model => model.Comments)

    <br />
    <input type="submit" value="Submit" name="Submit" class="button" />
  </div>
} 
```

**联系表格控制器（为简洁起见）**

```
public ActionResult Contact(ContactForm c)
{
  try
  {
    MailMessage message = new MailMessage();
    message.IsBodyHtml = true;
    message.From = new MailAddress(c.Email);
    message.Body += "<b>Name:</b> " + c.FullName + "<br/><br/>";
    message.Body += "<b>Questions/Comments:</b><br> " + c.Comments;

    SmtpClient client = new SmtpClient();
    client.Send(message);
    c.Redirect = "/formsuccess";

    return Json(c);
  }
  catch
  {
    //ERROR CATCH CODE
  }
} 
```