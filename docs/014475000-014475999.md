# StackOverflow 问答 14475000-14475999

# git - 在“git rm -rf”之后恢复暂存但未提交的文件

> ID：14475003
> 
> 赞同：16
> 
> 时间：2013-01-23T08:07:32.253
> 
> 标签：git, git-rm, git-fsck

在我的本地机器上，我从文件夹中删除了文件。

```
git init
git add --all 
```

然后我写了（不要问我，为什么！:)）

```
git rm -rf 
```

我还没有承诺。现在我的项目中有空文件夹。`.git`文件夹中有`objects`53 Mb 的文件。

如何恢复我的文件？我尝试过像 Drill Disc 和 Stellar 这样的程序，但没有找到我的文件。而且我无法从 GIT 回滚。

如何恢复丢失的文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T08:38:36.140

**（更新）**改用`git fsck`它，它是一个内置命令，用于检索您曾经添加到 git 存储库的文件。

```
git fsck --lost-found --unreachable 
```

在命令处理之后，检索到的文件将被放置在`.git/lost-found/other`，文件名为 sha256 哈希。虽然原来的名字还是丢失了，但内容会回来的。

* * *

您可以在您的目录中找到您的文件`.git/objects`。

假设有一个`.git/objects/2f/ae996f8f8f9298b41ba4fdbac3d62014f9579e`对象，可以执行

```
git cat-file -p 2fae996 
```

获取丢失文件的内容。

但我很抱歉，我不知道重建您的目录或自动执行此操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T08:12:27.487

你有没有尝试过 ：

```
git reset --hard 
```

?

希望有效:)

# ios - 如何以编程方式获取 iPhone 屏幕尺寸？

> ID：14475008
> 
> 赞同：11
> 
> 时间：2013-01-23T08:08:08.357
> 
> 标签：ios, objective-c, iphone, uiscreen

> **可能重复：**
> [如何使用代码获取屏幕大小？](https://stackoverflow.com/questions/3635483/how-to-get-screen-size-using-code)

```
 NSLog(@"Top Left View : Width %f height%f",self.topLeftView.frame.size.width,self.topLeftView.frame.size.height); 
```

我已从对象库中拖动“视图”并将其放在 xib 文件中。

但是，如果我想获取屏幕尺寸来检查它是 iphone 4、iPhone 3 还是 iphone 5 或任何 iOS 设备呢？

这样我就可以相应地安排其他视图。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T08:10:40.257

您可以使用：

```
CGsize screenSize      = [[[UIScreen mainScreen] bounds] size];
CGFloat widthOfScreen  = screenSize.width;
CGFloat heightOfScreen = screenSize.height; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-23T08:10:52.767

`UIScreen`你可以通过属性 知道它

```
[[UIScreen mainScreen] bounds].size.height;
[[UIScreen mainScreen] bounds].size.width; 
```

iPhone 5 和 iPod touch 5gen 的高度为 568

对于其他 iPhone 和 iPod，高度为 480

编辑：在 iOS 8 上，高度和宽度取决于方向，所以这个尺寸用于纵向，在横向上，这个尺寸将用于宽度。所以，最好的选择是阅读两者并尽最大努力

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T08:10:26.730

你可以得到 iPhone 屏幕的大小为

```
CGSize size = [UIScreen mainScreen].bounds.size; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T08:11:13.357

```
UIScreen *screen = UIScreen.mainScreen; 
```

它有你需要的一切，包括边界和比例（视网膜和非视网膜可能不同）。

# ruby - 配置安装 Ruby 1.9.3-p374 时出错

> ID：14475009
> 
> 赞同：1
> 
> 时间：2013-01-23T08:08:11.810
> 
> 标签：ruby, osx-mountain-lion

我将不胜感激安装`Ruby 1.9.3-p374`在`Mountain Lion OS X`.

我是 ruby​​ 新手，目前正在尝试从 1.8.7 升级，但每当我输入`rvm install 1.9.3-p374`命令行时，我都会得到：

```
user-macbook-pro-2:~ user$ rvm install 1.9.3-p374
No binary rubies available for: downloads/ruby-1.9.3-p374.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /Users/user/.rvm/rubies/ruby-1.9.3-p374, this may take a while depending on your cpu(s)...
ruby-1.9.3-p374 - #downloading ruby-1.9.3-p374, this may take a while depending on your connection...
ruby-1.9.3-p374 - #extracted to /Users/user/.rvm/src/ruby-1.9.3-p374 (already extracted)
ruby-1.9.3-p374 - #configuring
Error running './configure --enable-shared --disable-install-doc --prefix=/Users/user/.rvm/rubies/ruby-1.9.3-p374 --with-opt-dir=/Users/user/.rvm/usr', please read /Users/user/.rvm/log/ruby-1.9.3-p374/configure.log
There has been an error while running configure. Halting the installation.

ruby-1.9.3-p374 is not installed.
To install do: 'rvm install ruby-1.9.3-p374' 
```

任何有关如何解决此问题的帮助将不胜感激。错误部分重复如下：

```
 Error running './configure --enable-shared --disable-install-doc --prefix=/Users/user/.rvm/rubies/ruby-1.9.3-p374 --with-opt-dir=/Users/user/.rvm/usr', please read /Users/user/.rvm/log/ruby-1.9.3-p374/configure.log
    There has been an error while running configure. Halting the installation.

    ruby-1.9.3-p374 is not installed. 
```

configure.log 读取

```
[2013-01-23 08:00:31] ./configure --enable-shared --disable-install-doc --prefix=/Users/user/.rvm/rubies/ruby-1.9.3-p374 --with-opt-dir=/Users/user/.rvm/usr
checking build system type... i386-apple-darwin12.2.0
checking host system type... i386-apple-darwin12.2.0
checking target system type... i386-apple-darwin12.2.0
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:45:03.457

在尝试更新之前我已经安装了 xcode，但是安装“Xcode 的命令行工具（OS X Mountain Lion）-2012 年 11 月'，21423）”似乎已经对其进行了排序-感谢大家的建议

# android - ListFragment 选定项目

> ID：14475014
> 
> 赞同：3
> 
> 时间：2013-01-23T08:08:25.543
> 
> 标签：android

我在 ListFragment 上有一个 ListView，它使用 SimpleCursorAdapter 来生成我的列表。我想在我的 ListView 中突出显示选定的项目，我尝试过：

```
v.setBackgroundResource(R.color.listselect_light_blue); 
```

在 onListItemClick 但它的工作很奇怪，当我单击其中一个项目并且我希望它是单行时它选择两行，我还设置了选择模式

```
<ListView android:id="@id/android:list"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" 
           android:choiceMode="singleChoice"   
           android:cacheColorHint="#00000000"
            /> 
```

我试过 ListSelector 但是当我点击一个项目时它不会突出显示，直到我滚动列表并突出显示。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    getListView().setSelector(R.drawable.listview_selector);

} 
```

和 ：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_focused="false" android:drawable="@color/listselect_light_blue" />
</selector> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:06:07.797

如果要突出显示中的选定项目，请尝试这种方式`Listview`。

这对我有用。

在使用 setSelector(..) 之前，首先在 Listfragment 中设置 Adapter。

```
 setListAdapter(mAdapter);
 getListView().setSelector(R.drawable.fragment_listselector); 
```

**片段列表选择器.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
        android:exitFadeDuration="@android:integer/config_mediumAnimTime">
    <item android:state_activated="true"
            android:drawable="@drawable/list_item_active_pattern"  />
    <item  android:drawable="@drawable/list_bg_pattern" />
</selector> 
```

当调用 onItemClick(..) 时，放置此代码。

```
 @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
    {   
            getListView().setItemChecked(position, true);
            getListView().setSelection(position);
            getListView().setSelected(true);

    } 
```

# android - 如何在服务状态检查电话

> ID：14475015
> 
> 赞同：1
> 
> 时间：2013-01-23T08:08:30.120
> 
> 标签：android

我正在开发一个应用程序，我在其中检查手机的服务状态，但是当手机处于飞行模式时它没有响应，或者手机没有 SIM 卡，那么它也无法工作。请帮我代码如下

```
TelephonyManager telMng=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
        telMng.listen(new PhoneStateListener(){

                     @Override
                public void onServiceStateChanged (ServiceState serviceState){
                  super.onServiceStateChanged(serviceState);
                  String phonestate;
                 switch(serviceState.getState())
                  {
                 case ServiceState.STATE_IN_SERVICE:

                     Toast.makeText(getApplicationContext(), "phone is in service", Toast.LENGTH_LONG).show();
                     break;
                 case ServiceState.STATE_OUT_OF_SERVICE:
                     Toast.makeText(getApplicationContext(), "Phone is not in Service state", Toast.LENGTH_LONG).show();
                     break;
                     default:phonestate="Unknown";
                  }
                 /*

                  switch(serviceState.getState()){
                  case ServiceState.STATE_EMERGENCY_ONLY: phonestate ="STATE_EMERGENCY_ONLY"; ;break;
                  case ServiceState.STATE_IN_SERVICE: phonestate ="STATE_IN_SERVICE"; ;break;
                  case ServiceState.STATE_OUT_OF_SERVICE: phonestate ="STATE_OUT_OF_SERVICE"; ;break;
                  case ServiceState.STATE_POWER_OFF: phonestate ="STATE_POWER_OFF"; ;break;
                  default:phonestate = "Unknown";
                  } 
                  */  
            } 
        },  
        PhoneStateListener.LISTEN_SERVICE_STATE);

    }  
                                                                                                                                              i tried above code but its not working when phone is in flight mode or have not sim insert inside the phone what should i do plz help 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:59:18.560

检查手机是否处于飞行模式以及是否存在 SIM 卡，请参阅此链接

飞行模式链接： [如何在 Android 上检测飞行模式？](https://stackoverflow.com/questions/4319212/how-can-one-detect-airplane-mode-on-android)

SIM 卡链接： [如何检查 SIM 卡在安卓设备中是否可用？](https://stackoverflow.com/questions/3981007/how-can-i-check-whether-the-sim-card-is-available-in-an-android-device)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T14:51:22.223

以上不是正确的答案，因为它仅告诉您 SIM 卡是否在使用中。

TelephonyManager.listen(PhoneStateListener() { ... }, PhoneStateListener.LISTEN_SERVICE_STATE);

应立即并定期发出服务状态。如果混合使用 sim state 和 service state，你会得到错误的结果——你会停止服务，但 sim state 仍然是准备好的。

# android - 使用描边颜色、角和实体可绘制图形创建可绘制图形

> ID：14475018
> 
> 赞同：2
> 
> 时间：2013-01-23T08:08:49.663
> 
> 标签：android, android-drawable

我想创建一个形状：solid 是 Bitmap（重复图块），stroke 是一种颜色。我使用图层列表：

```
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/additional_image"
        android:drawable="@drawable/bg_detail_loop"
        >
    </item>
    <item android:id="@+id/rounded_corners"
        android:drawable="@drawable/shape_box_dlg">
    </item>
</layer-list> 
```

文件 bg_detail_loop.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" 
    android:filter="true"
    android:gravity="center"
    android:tileMode="repeat"
    android:src="@drawable/tile_detail"
    /> 
```

文件 shape_box_dlg.xml：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <stroke
        android:width="2dip"
        android:color="#EE6A1F" />
    <gradient android:angle="270" />
    <corners android:radius="6dp" />
</shape> 
```

但是，在角落里，背景位图没有剪辑。我想转角。有人帮我吗？谢谢

# mysql - MySQL OR 语句：同一列还是多列？

> ID：14475023
> 
> 赞同：2
> 
> 时间：2013-01-23T08:09:19.027
> 
> 标签：mysql

有时 MySQL 不想在带有“或”语句的查询中使用索引。我想知道什么更好 - 在同一列上使用“或”语句，或者创建多个列更好。我希望你能明白我的意思。以下是示例。

```
select from table where column1='1' or column1='2' or column1='3';

select from table where column1='1' or column2='1' ir column3='1'; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:15:18.857

您可以使用`IN`子句`select from table where column1 in ('1','2','3')`

# java - 无法在 PHP 中重现 Java MessageDigest 哈希

> ID：14475027
> 
> 赞同：2
> 
> 时间：2013-01-23T08:09:35.083
> 
> 标签：java, php, hash, cryptography

方法中的digest.update(salt) 在`getHash(...)`下面的代码示例中如何工作？我需要复制 PHP 中的逻辑。该`testHash()`方法具有一些嵌入的测试值。如果我注释掉，我可以得到匹配`digest.update(salt)`。我在 PHP 中尝试了以下组合来获得匹配但没有运气（伪代码）：

*   `sha256($salt.$pass)`
*   `sha256($pass.$salt)`
*   `sha256($pass.sha256($salt))`
*   `sha256($salt.sha256($pass))`
*   `sha256(sha256($pass).sha256($salt))`
*   `sha256(sha256($salt).sha256($pass))`

代码：

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

public class Owasp {

    private final static int ITERATION_NUMBER = 5;

    public void testhash() throws IOException, NoSuchAlgorithmException, UnsupportedEncodingException {
        byte[] bSalt = base64ToByte("123456");
        byte[] bDigest = getHash(ITERATION_NUMBER, "somepass", bSalt);
        String sDigest = byteToBase64(bDigest);
        System.out.println(sDigest);
    }

    public byte[] getHash(int iterationNb, String password, byte[] salt) throws NoSuchAlgorithmException, UnsupportedEncodingException {
        MessageDigest digest = MessageDigest.getInstance("SHA-256");
        digest.reset();
        digest.update(salt);
        byte[] input = digest.digest(password.getBytes("UTF-8"));
        for (int i = 0; i < iterationNb; i++) {
            digest.reset();
            input = digest.digest(input);
        }
        return input;
    }

    public static byte[] base64ToByte(String data) throws IOException {
        BASE64Decoder decoder = new BASE64Decoder();
        return decoder.decodeBuffer(data);
    }

    public static String byteToBase64(byte[] data) {
        BASE64Encoder endecoder = new BASE64Encoder();
        return endecoder.encode(data);
    }

    public static void main(String[] args) throws NoSuchAlgorithmException, UnsupportedEncodingException, IOException {
        Owasp t = new Owasp();
        t.testhash();
    }
} 
```

**编辑**

我已经添加了我一直在使用的 PHP 代码。这并不理想，因为我没有列举我测试过的所有案例。使用我用 -g 编译的 rt.jar 文件单步调试 Netbeans 中的调试器，看起来它被存储为 $salt.$pass。使用 PHP 代码我无法找到匹配项。

PHP代码：

```
<?php
//Without salt
$pass = "somepass";

$hash = hash('sha256', $pass, true);
for($i = 0; $i < 5; $i++) {
    $hash = hash('sha256', $hash, true);
}

echo "Java output without salt: " . "r+G0EnbjURjk99+wMvjnJV51d/tVX8tAn+7VAUCPXRY=" . "\n";
echo "PHP output without salt : " . base64_encode($hash) . "\n";

//With salt
$pass = "somepass";
$salt = "123456";

//I've tried all sorts of combinations and manipulation.
$hash = hash('sha256', $salt.$pass, true);
for($i = 0; $i < 5; $i++) {
    $hash = hash('sha256', $hash, true);
}

echo "Java output with salt: " . "vxZP4vmc+dixEhsZW58+zViLn7XXymirCP7kbl2KtT0=" . "\n";
echo "PHP output with salt : " . base64_encode($hash) . "\n"; 
```

**更新**

几个小时以来，我一直在关注 Netbeans 中的调试器，试图弄清楚`digest.update($salt)`调用时发生了什么。MessageDigestSPI 是关键。`engineUpdate(byte[] input, int offset, int len)`被调用，但我找不到实现。所有的 engineUpdate 方法都可能指向，`engineUpdate(ByteBuffer input)`但我无法确认。我以前做过 Java 工作，但那是几年前的事了。我已经尝试了每一个 hex2bin'ed、packed、unpacked 和 Base64'ed 的方法，但都没有运气:( 我会及时通知大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:36:03.200

该算法基本上`hash(hash(hash(hash(...hash(password)...)))))`是由**迭代Nb**参数指定的次数。

使用盐的正确方法是将其与密码连接，然后对其进行哈希处理。这是在您的代码中通过执行 a `digest.update(salt)`，然后使用密码调用摘要来完成的。它基本上与以下内容相同：

```
 String saltedPassword = password + new String(salt, "UTF-8");
  byte[] input = digest.digest(saltedPassword.getBytes("UTF-8")); 
```

当然，就像任何适当的盐一样，您需要将其与散列密码一起存储，以便将来能够验证它。

[您可以在此 Wikipedia 链接](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)上获得有关 salt 如何存储密码哈希的更多信息。[此外，在其他 StackOverflow 问题中](https://stackoverflow.com/questions/674904/salting-your-password-best-practices?rq=1)存储密码时使用盐的一些最佳实践。

# c# - WCF 服务 - 了解在构造函数中调用了哪个方法

> ID：14475031
> 
> 赞同：1
> 
> 时间：2013-01-23T08:09:51.503
> 
> 标签：c#, wcf

有没有可能在构造函数中识别出我的服务的哪个方法被调用？

我的例子：我想建立一个可以通过 暂停的服务`SetPauseService(true)`，这样他就不会在暂停时做任何工作。我不想检查每个方法中的暂停标志，所以我试图在构造函数中存档它。我的问题是，用户必须`SetPauseService(false)`在服务暂停时调用才能再次激活服务。

```
[ServiceContract]
public class MyService
{

    private static bool isPaused;

    public MyService()
    {
        if (/*<Pseudo>*/ InvokedMethod != "SetPauseService" /*</Pseudo>*/)
        {
            if (isPaused)
            {
                throw new Exception("Cannot be executed, service is paused!");
            }
        }
    }

    [OperationContract]
    public void SetPauseService(bool status)
    {
        isPaused = status;
    }

    [OperationContract]
    public void DoWork()
    {
        /* ... */
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:28:15.290

我相信您正在寻找的内容可以在以下位置找到：

```
OperationContext.Current.IncomingMessageHeaders.Action 
```

这将暴露被调用的操作。这是你需要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:15:10.897

我认为在这种情况下有三种选择；

1.  编写 WCF 实例行为，检查服务是否暂停。我假设 WCF 服务的实例上下文模式不是每次调用（例如，您没有为每次调用创建一个新的服务实例）。然后，您可以实现一个实例行为以返回您的服务类的一个实例，以及为什么实现您将有权访问该请求。您可以检查被调用的方法并可能处理响应或丢弃请求。也许您可以使用其他行为类型来实现这一点；可能有更合适的（您可以在此处查看它们[http://msdn.microsoft.com/en-us/magazine/cc163302.aspx](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)）。

2.  在您的方法中使用属性来检查服务是否已暂停。您可以在调用方法之前使用 PostSharp 并注入代码。您可以在方法调用之前检查暂停状态并决定是否执行。参考[postsharp](http://www.sharpcrafters.com/)

3.  将您的方法代码封装在某些操作中以检查服务是否已暂停。您可以编写一个接受`Action`s 作为参数的通用函数；前任。

    ```
    public void CheckPauseStatusAndExecuteIfTrue(Action action)
    {
        if (!this.isPaused)
        {
            action();
        }
    } 
    ```

    ...

    ```
    [OperationContract]
    public void DoWork()
    {
        this.CheckPauseStatusAndExecuteIfTrue(() =>
        {
            //// write your method behavior
        });
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:22:53.123

如果它在那里，它可能在 OperationContext.Current 中。我只是不会依赖它：构造是由 WCF 控制的。如果您尝试，请确保使用“PerCall”模式。

更好的方法是实现自定义参数检查器。（实现 IParameterInspector 并将其绑定在一个行为中）您可以使用方法 object BeforeCall(string operationName, object[] inputs) 来完成这项工作。

无论哪种方式，我都会投票反对“暂停”服务，因为连接会从客户端堆积起来。简单地停止服务主机，处理客户端中的“暂停”并在完成工作后重新启动它可能会更好。

# java - 我只得到空值： Object selectedValue = jPane.getValue(); (jPane = 新的 JOptionPane(...)

> ID：14475032
> 
> 赞同：0
> 
> 时间：2013-01-23T08:09:56.373
> 
> 标签：java, swing, null, joptionpane

```
 private void cancelButtonPressed() {  
    jPane = new JOptionPane("quit?", JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_OPTION, null, buttons, buttons[1]);
    jPane.setName("WPane");
    dialog = jPane.createDialog(jPane.getParent(), "Confirm Dialog");

    dialog.setVisible(true);
    dialog.dispose();

    Object selectedValue = jPane.getValue();
    System.out.println("selectedValue:" + selectedValue);
    if(selectedValue == null)
        System.out.println("selectedValue:" + selectedValue);
        //return CLOSED_OPTION;
    if(buttons == null) {
        if(selectedValue instanceof Integer) {
            //return ((Integer)selectedValue).intValue();
            System.out.println("selectedValue instanceof Integer, selectedValue:" + selectedValue);
        //return CLOSED_OPTION;
        }
    }
    for(int counter = 0, maxCounter = buttons.length;
        counter < maxCounter; counter++) {
        if(buttons[counter].equals(selectedValue)){
            System.out.println("buttons[counter].equals(selectedValue) selectedValue:" + selectedValue);
            //return counter;
        }
    }
    //return CLOSED_OPTION;
} 
```

在构造函数中，我设置了按钮的名称：

```
 buttons[0]= new JButton("Yes");
    buttons[1]= new JButton("No");
    buttons[0].setName("Yes_Next_Btn");
    buttons[1].setName("No_Back_Btn"); 
```

问题是，我需要`setNames`组件：`JOptionPane`和按钮。所以我不使用 : `JOptionPane.showConfirmDialog`。

在这种情况下：当我点击按钮时（是，否）我没有得到任何价值，只有当我点击“X”时，我才能退出`null`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:24:59.460

如果您将`JButtons`选项作为选项放入`JOptionPane`，那么您需要指定单击它们时会发生什么。由于您似乎没有任何`Action`或`ActionListener`绑定到您的按钮，因此没有任何反应。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class JOptionPaneTest {

    public void createAndShowJOptionPane() {
        final JButton b1 = new JButton("Yes, please");
        b1.setName("yes_please");
        final JButton b2 = new JButton("No, thx");
        b2.setName("no_thx");
        final JButton b3 = new JButton("Leave me alone");
        b3.setName("leave_me_alone");
        Object[] options = new Object[]{b1, b2, b3};

        final JOptionPane optionPane = new JOptionPane("Message", JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_CANCEL_OPTION, null, options, options[2]);
        final JDialog dialog = optionPane.createDialog("Title");
        b1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println(b1.getText());
                optionPane.setValue(0);
                dialog.dispose();
            }
        });
        b2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println(b2.getText());
                optionPane.setValue(1);
                dialog.dispose();
            }
        });
        b3.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println(b3.getText());
                optionPane.setValue(2);
                dialog.dispose();
            }
        });
        dialog.setVisible(true);

        if ((Integer)optionPane.getValue() == 0) {
            System.out.println("Woohoo!");
        }
    }

    public static void main(String[] argv) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JOptionPaneTest test = new JOptionPaneTest();
                test.createAndShowJOptionPane();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T09:25:41.843

问题是，`JOptionPane`不会向按钮添加任何侦听器，因此当您单击它们时，什么也没有发生。

尝试用`String`s 替换按钮...

```
public class TestOptionPane06 {

    public static void main(String[] args) {
        new TestOptionPane06();
    }

    public TestOptionPane06() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

//                JButton buttons[] = new JButton[2];
//                
//                buttons[0] = new JButton("Yes");
//                buttons[1] = new JButton("No");
//                buttons[0].setName("Yes_Next_Btn");
//                buttons[1].setName("No_Back_Btn");

                String values[] = new String[2];
                values[0] = "Yes";
                values[1] = "No";

                JOptionPane jPane = new JOptionPane("quit?", JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_OPTION, null, values, values[1]);
                jPane.setName("WPane");
                JDialog dialog = jPane.createDialog(jPane.getParent(), "Confirm Dialog");

                dialog.setVisible(true);
                dialog.dispose();

                Object selectedValue = jPane.getValue();
                System.out.println("selectedValue:" + selectedValue);
                if (selectedValue == null) {
                    System.out.println("selectedValue:" + selectedValue);
                }
                //return CLOSED_OPTION;
                if (values == null) {
                    if (selectedValue instanceof Integer) {
                        //return ((Integer)selectedValue).intValue();
                        System.out.println("selectedValue instanceof Integer, selectedValue:" + selectedValue);
                        //return CLOSED_OPTION;
                    }
                }
                for (int counter = 0, maxCounter = values.length;
                                counter < maxCounter; counter++) {
                    if (values[counter].equals(selectedValue)) {
                        System.out.println("buttons[counter].equals(selectedValue) selectedValue:" + selectedValue);
                        //return counter;
                    }
                }
            }

        });
    }

} 
```

# c# - 适用于 Windows Phone 8 的 UrbanAirship dll

> ID：14475037
> 
> 赞同：0
> 
> 时间：2013-01-23T08:10:30.717
> 
> 标签：c#, push-notification, windows-phone-8, urbanairship.com, mpns

任何人都可以请指出我在哪里可以下载 UrbanAirShip 的 Windows Phone 8 库。我已阅读以下有关 Windows Phone 8 推送通知的文档，但是我没有注意到任何用于下载 Windows Phone 8 的 dll 的链接。

[https://docs.urbanairship.com/display/DOCS/Client%3A+Windows+8](https://docs.urbanairship.com/display/DOCS/Client%3A+Windows+8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:53:49.630

我们可以在下面的链接中下载 Windows Phone 8 和 Windows 8 的资源。但是只有测试版可用。

[http://urbanairship.com/resources/developer-resources](http://urbanairship.com/resources/developer-resources)

# garbage-collection - JVM 分钟长 GC

> ID：14475044
> 
> 赞同：6
> 
> 时间：2013-01-23T08:10:56.057
> 
> 标签：garbage-collection, jvm, terracotta

如下所示，在一切正常运行的过程中，一个 stop-the-world GC 操作耗时 +60 秒。它可以被确定为整个世界的停止，因为（兵马俑）客户端掉线，抱怨它（兵马俑服务器）在那段时间没有响应。

这是年轻/未成年人GC吗？如果是，可能是因为年轻一代的饥饿（伊甸园+幸存者？）。

只有 109333(KB) 是免费的吗？

我将开始绘制不同的内存容器，任何其他建议可以做些什么来进一步诊断这些问题？

```
date, startMem=24589884, endMem=24478495, reclaimed=111389, timeTaken=0.211244 (1172274.139: [GC 24589884K->24478495K(29343104K), 0.2112440 secs])
date, startMem=24614815, endMem=24505482, reclaimed=109333, timeTaken=61.301987 (1172276.518: [GC 24614815K->24505482K(29343104K), 61.3019860 secs])
date, startMem=24641802, endMem=24529546, reclaimed=112256, timeTaken=2.68437 (1172348.921: [GC 24641802K->24529546K(29343104K), 2.6843700 secs]) 
```

Sun JVM 是 1.6，使用以下配置：

> -Xms28672m -Xmx28672m -XX:+UseConcMarkSweepGC -XX:+PrintGCTimeStamps -XX:+PrintGC

合理的配置调整以进一步调试 GC：

```
'-XX:+PrintGCDateStamps' Print date stamps instead of relative timestamps
'-XX:+PrintGCDetails' Will show what cpu went for (user, kern), gc algorithm used 
'-XX:+PrintHeapAtGC' will show all of the heaps memory containers and their usage
'-Xloggc:/path/to/dedicated.log' log to specific file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:39:47.397

`-XX:+UseConcMarkSweepGC`启用并发收集

![默认VS。 内容管理系统](../Images/fe374003c1bccda21be4ca7143b364b0.png)

总时间是 stop-the-world 阶段（JVM 阻塞）和并发阶段（JVM 执行用户代码）的总和。

您应该启用详细的 GC 日志记录以进一步调查，因为您不知道有多少 +60 秒阻塞了 JVM。

# css - CSS 背景位置

> ID：14475055
> 
> 赞同：7
> 
> 时间：2013-01-23T08:11:27.067
> 
> 标签：css, css-sprites, background-position

这里的小问题，我有一个精灵图像，其中包含具有正常和悬停效果的图标..

这是我现在拥有的CSS..

```
.wi{
    background-image:url(images/icons/small/wi.png);
    background-repeat:no-repeat;
    display:block;
    overflow:hidden;
    height:24px;
    width:24px;
}

.wi-delete{background-position:0 0;}
.wi-edit{background-position:-24px 0;}
.wi-fullscreen{background-position:-48px 0;}
.wi-imageedit{background-position:-72px 0;}
.wi-download{background-position:-96px 0;}
.wi-tags{background-position:-130px 0;}
.wi-windowed{background-position:-154px 0;} 
```

如您所见，图标的正常状态始终为背景位置`Y = 0`，因此悬停图像都在`Y = -24px`

我的图标 html 是：

```
<div id="something" class="wi wi-delete"></div> 
```

**问题是：可以只更改 Y 位置，因此我可以为所有图标悬停状态分配一条 CSS 行，而不是为每个图标设置一条 CSS 行？**

就像是：

```
.wi:hover{
background-position: auto -24px;
} 
```

反而

```
.wi-delete:hover{background-position:0 -24px;}
.wi-edit:hover{background-position:-24px -24px;}
..and so on.. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T08:22:51.907

我感受到了你的痛苦！

它不适用于所有浏览器。

建议拆分`background-position`到`background-position-x`并`background-position-y`能够轻松更改仅一个轴。遗憾的是，W3C 人员认为将其添加到标准中还不够有用。您可以在此处阅读有关它的更多信息[Bugzilla 线程](https://bugzilla.mozilla.org/show_bug.cgi?id=550426)和[在 w3c 网站上](http://www.w3.org/Style/CSS/Tracker/issues/9)

但是它确实适用于 Chrome，似乎只有 Firefox 不支持主流浏览器。但它仍然不在标准中，可能直到 CSS 4 才出现。

# android - 谷歌地图android v2中的自定义信息窗口

> ID：14475059
> 
> 赞同：34
> 
> 时间：2013-01-23T08:11:35.770
> 
> 标签：android, google-maps, maps, google-maps-android-api-2

我正在使用 Google Map API V2，并且我为地图创建了自定义`InfoWindow`。`Marker`在此`InfoWindow`我有一个按钮。

我的问题是无法将 Onclicklistener/functioning 设置为该按钮（虚拟）。任何人都给我一些想法来解决这个问题：

![在此处输入图像描述](../Images/6f2f55c33db2a66ffe3ce9cc1f0306e6.png)

这是代码片段：

```
public class MarkerView extends FragmentActivity implements OnMarkerClickListener,OnInfoWindowClickListener{

private GoogleMap mMap;
private Marker chennai;
private View infoWindow;
@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    setContentView(R.layout.basic_demo);

    infoWindow=getLayoutInflater().inflate(R.layout.custom_info_contents, null);

    mMap=((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
    chennai=mMap.addMarker(new MarkerOptions().position(new LatLng(13.0810, 80.274)).anchor(2, 1).title("Android").snippet("Snippet").icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));
    mMap.setInfoWindowAdapter(new CustomInfoAdapter());
    mMap.setOnInfoWindowClickListener(null);
    mMap.setOnMarkerClickListener(this);
    Button dummy=(Button) infoWindow.findViewById(R.id.dummy);
    dummy.setVisibility(View.VISIBLE);
    dummy.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(MarkerView.this, "Dummy Button", Toast.LENGTH_SHORT).show();

        }
    });
}

class CustomInfoAdapter implements InfoWindowAdapter{

    @Override
    public View getInfoContents(Marker arg0) {
        displayView(arg0);
        return infoWindow;
    }

    @Override
    public View getInfoWindow(Marker arg0) {

        return null;
    }

}

public void displayView(Marker arg0) {

    ((ImageView)infoWindow.findViewById(R.id.badge)).setImageResource(R.drawable.arrow);
    ((ImageView)infoWindow.findViewById(R.id.badge)).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(MarkerView.this, "Arrow Image", Toast.LENGTH_SHORT).show();

        }
    });
     ((TextView)infoWindow.findViewById(R.id.title)).setText(arg0.getTitle());
     ((TextView)infoWindow.findViewById(R.id.snippet)).setText(arg0.getTitle());

}

@Override
public boolean onMarkerClick(Marker arg0) {
    if(arg0.equals(chennai)){

        infoWindow.setClickable(false);

    }
    return false;
}

@Override
public void onInfoWindowClick(Marker arg0) {
    Toast.makeText(MarkerView.this, "Info window", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-23T10:19:43.630

请参考此[链接中的](https://developers.google.com/maps/documentation/android/marker)**信息窗口点击事件**

信息窗口不是实时视图，而是将视图呈现为地图上的图像。因此，您在视图上设置的任何侦听器都将被忽略，并且您无法区分视图各个部分的点击事件。建议您不要在自定义信息窗口中放置交互式组件（例如按钮、复选框或文本输入）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-07-12T12:00:11.227

您必须实施自定义标记；它是这样的：

```
custommarker.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical|center_horizontal"
android:background="#ADD8E6"
android:gravity="center_vertical|center_horizontal"
android:orientation="horizontal" >

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="5dp"
    android:adjustViewBounds="true"
    android:contentDescription="@string/app_name"
    android:src="@drawable/sabarmati" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/snippet"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:textColor="@android:color/black"
        android:textSize="15sp" />

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:textColor="@android:color/black"
        android:textSize="10sp"
        android:textStyle="bold" />
</LinearLayout>

</LinearLayout> 
```

活动：

```
public class PlacesMapActivity extends android.support.v4.app.FragmentActivity
    implements OnClickListener, LocationListener {
/**
 * Note that this may be null if the Google Play services APK is not
 * available.
 */
ImageButton btn_home;
private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);

    SupportMapFragment fragment =   (SupportMapFragment)getSupportFragmentManager()
            .findFragmentById(R.id.map);
    mMap = fragment.getMap();
    mMap.setMyLocationEnabled(true);

    // mMap = ((SupportMapFragment) getSupportFragmentManager()
    // .findFragmentById(R.id.map)).getMap();

    MarkerOptions markerOptions = new MarkerOptions();
    markerOptions.title("First Location");
    markerOptions.snippet("This Is Test Location");

    LatLng latlng = new LatLng(23.0333, 72.6167);

    markerOptions.position(latlng);
    // markerOptions.title("Ahmedabad Cordinat Found here");

    // Marker m = mMap.addMarker(markerOptions);

    ***mMap.setInfoWindowAdapter(new InfoWindowAdapter() {
        @Override
        public View getInfoWindow(Marker arg0) {
            return null;
        }
        @Override
        public View getInfoContents(Marker marker) {
            View myContentView = getLayoutInflater().inflate(
                    R.layout.custommarker, null);
            TextView tvTitle = ((TextView) myContentView
                    .findViewById(R.id.title));
            tvTitle.setText(marker.getTitle());
            TextView tvSnippet = ((TextView) myContentView
                    .findViewById(R.id.snippet));
            tvSnippet.setText(marker.getSnippet());
            return myContentView;
        }
    });***

    mMap.addMarker(new MarkerOptions()
            .position(latlng)
            .title("This is Sabarmati Ashram")
            .snippet("Ahmedabad")
            .icon(BitmapDescriptorFactory
                .defaultMarker(BitmapDescriptorFactory.HUE_RED)));

    mMap.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {

        @Override
        public void onInfoWindowClick(Marker arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getBaseContext(),
                    DetailsOfPlacesActivity.class);
            startActivity(intent);
        }
    });

    btn_home = (ImageButton) findViewById(R.id.activity_map_ibtn_home);
    btn_home.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
        }
    });
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T10:37:29.277

出现在 Google 地图标记上的 InfoWindow 内的 UI 元素不可点击。所以最好使用自定义弹出窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-17T16:36:19.247

[由于@TamiL 解释的原因](https://stackoverflow.com/a/14477270/4170242)，您无法单击该按钮。
但是，您可以单击`InfoWindow`，因此，存储应该可以单击的 (s) 的 ID `Marker`，`InfoWindow`将 a 添加`GoogleMap.OnInfoWindowClickListener`到地图中，如下所示：

```
map.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener()
{
    @Override
    public void onInfoWindowClick(Marker marker)
    {
        // Called when ANY InfoWindow is clicked
    }
}); 
```

然后，当`onInfoWindowClick`调用 时，将 clicked`Marker`的 ID 与您之前存储的 ID 进行比较，如果其中任何一个匹配，则执行应在`Button`的 click 侦听器中执行的任何代码。

如果您的所有s 都可以点击，您就不必处理保存`Marker`ID:s 的问题！`Marker``InfoWindow`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-30T11:56:12.660

我已经为这个问题构建了一个示例 android studio 项目。

因此，您可以使用可点击的按钮或 ImageView 等创建 Google map v2 Custom Infowindow，

**输出屏幕截图： -**

[![在此处输入图像描述](../Images/c04d24b56057313ebd0b5a4a6ad3a9e3.png)](https://i.stack.imgur.com/GTpqU.png)

[![在此处输入图像描述](../Images/6e065a09685da80224b85c857497bc58.png)](https://i.stack.imgur.com/3p84l.png)

[![在此处输入图像描述](../Images/7fc977cf03a73bab36eae93f5d8dc6b4.png)](https://i.stack.imgur.com/SULJg.png)

**下载完整的项目源代码点击** **[这里](https://www.dropbox.com/sh/ku97ajose03bpvt/AADGMLxT0n_kTp5rMK1b8SdSa?dl=0)**

**请注意：**您必须在 Androidmanifest.xml 中添加您的 API 密钥

# ios - 如何在ios中将Web视图数据作为UIImage

> ID：14475060
> 
> 赞同：1
> 
> 时间：2013-01-23T08:11:39.323
> 
> 标签：ios, objective-c, uiwebview

我有用户的 QA 代码取决于 Web 视图中的名称、Id。现在我想像我这样尝试过的图像视图（或 UIImage）中那样获取 Web 视图 QA 代码，

```
UIGraphicsBeginImageContext(webview.bounds.size);
[webview.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但我只得到了网络视图框架，但没有显示内容（QA 代码图像）。请给我建议。谢谢

# c# - 为什么我的计算不起作用？

> ID：14475061
> 
> 赞同：2
> 
> 时间：2013-01-23T08:11:39.130
> 
> 标签：c#, mouse, mousemove

这更像是一个为什么这个工作不起作用的问题。我显然必须遗漏一些东西，因为我一生都无法弄清楚为什么计算宽度和高度值会给我与开始时相同的静态值。但是当我替换硬编码值时，它工作得很好。所以很明显我的计算很糟糕，但我似乎无法弄清楚为什么。任何人都可以帮忙吗？如果您需要更多信息，请询问。

```
 if(objectList[selectedIndex].Selected == true)
 {
      //The width would be mouselocationx - objectlocationx
      //The height would be mouselocationy - objectlocationy
      //Off set the position so it doesnt snap to mouse location
      //WHY THE *%$!! DOESNT THIS WORK!!?!?!?!?!?!?
      //int width = e.X - objectList[selectedIndex].X;
      //int height = e.Y - objectList[selectedIndex].Y;
      //Why is this so hard??
      //Point location = objectList[selectedIndex].Location;
      //location.X = e.X - (e.X - objectList[selectedIndex].Location.X);
      //location.Y = e.Y - (e.Y - objectList[selectedIndex].Location.Y);
      objectList[selectedIndex].X = e.Location.X - 12;
      objectList[selectedIndex].Y = e.Location.Y - 12;
      objectLocationXLabel.Text = "OBJX: " + objectList[selectedIndex].X.ToString();
      objectLocationYLabel.Text = "OBJY: " + objectList[selectedIndex].Y.ToString();
      panel1.Invalidate();
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:22:13.137

完全不清楚你想做什么。但是您的注释代码至少存在两个问题：

```
location.X = e.X - (e.X - objectList[selectedIndex].Location.X); 
```

相当于

```
location.X = objectList[selectedIndex].Location.X; 
```

`Point`是一个值类型。所以当你这样做时：

```
Point location = objectList[selectedIndex].Location;
location.X = ...; 
```

`location`已修改，但未修改`objectList[selectedIndex].Location`。

编辑以回应评论：我认为您必须确定`MouseDown`事件中的偏移量，将其存储在成员中并在`MouseMove`.

# asp.net - 限制html中的列宽

> ID：14475069
> 
> 赞同：1
> 
> 时间：2013-01-23T08:12:20.970
> 
> 标签：asp.net, html, css

我已经建立了下表：

```
 <table id="viewConfigurationTable" style="width:700px">
    <tr>
        <td style="width:100px">Id</td>
        <td style="width:100px">Name</td>
        <td style="width:200px">Status</td>
        <td style="width:300px">Ctids</td>
        <td style="width:300px">CreationDate</td>
    </tr>

    <% foreach (var config in Model.AliveConfigurations)
       {
    %>
    <tr>
        <td><%=config.Id%></td>
        <td><%=config.Name%></td>
        <td><%=config.Status%></td>
        <td><%=config.Ctids%></td>
        <td><%=config.CreationDate%></td>

    </tr>
    <%
        }
    %>
</table> 
```

然而，`Ctids`专栏有时会变得很宽。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:17:51.503

从我的角度来看，表格宽度是“不可用的”，你可以尝试使它们`div`的宽度。

但是，如果您确实需要固定表格，请更改`TD`'s 的宽度以匹配表格宽度，`table-layout:fixed`作为样式添加到表格中并设置`TD`'s 来断词：`word-wrap:break-word`.

[jsFiddle 示例](http://jsfiddle.net/MJFHG/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:25:12.940

尝试这个：

```
 <style type="text/css">
    table {
      width: 25%;//use this value for the table size compared to the screen size.
    }
    table td {
      width:auto;
      border: 1px solid red;
    }
  </style>

    <table id="viewConfigurationTable">
        <tr>
            <td>Id</td>
            <td>Name</td>
            <td>Status</td>
            <td>Ctids</td>
            <td>CreationDate</td>
        </tr>

        <% foreach (var config in Model.AliveConfigurations)
           {
        %>
        <tr>
            <td><%=config.Id%></td>
            <td><%=config.Name%></td>
            <td><%=config.Status%></td>
            <td><%=config.Ctids%></td>
            <td><%=config.CreationDate%></td>

        </tr>
        <%
            }
        %>
    </table> 
```

看[这里](http://jsfiddle.net/MJFHG/2/)

# ffmpeg - 将视频从 RTSP 放到 HTML 页面的最佳方式？

> ID：14475088
> 
> 赞同：1
> 
> 时间：2013-01-23T08:13:22.263
> 
> 标签：ffmpeg, video-streaming, h.264, rtsp, vlc

我有一个带有 H264 身份验证的 RTSP 流的 URL - MPEG-4 第 10 部分编解码器。Lik 看起来像这样：rtsp://login:pass@xxx.xxx.xxx.xxx:557

有没有办法在 HTML 页面中显示视频？

是否需要使用一些解码服务器，如 ffmpeg 或 vlc？或者我们可以直接放到页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:19:29.127

它可以直接作为链接放置。它将使用您的默认播放器播放它，而不是在网页本身上播放。示例页面：[http ://bcdn1.wpc.cdn.bigcdn.com/001D7A/bcdn2/bbb-rtsp.html](http://bcdn1.wpc.cdn.bigcdn.com/001D7A/bcdn2/bbb-rtsp.html)

```
<body>

<div id="rtsp_movie">

    <a href="rtsp://xxxx"><img border="0"
                           alt="EXAMPE RTSP"
                           width="426"
                           height="240"/>click
    to play RTSP</a>

</div>

</body> 
```

# ajax - 如何使用 Ext.Ajax 向 jsFiddle 的 echo api 发出 AJAX 请求？

> ID：14475089
> 
> 赞同：1
> 
> 时间：2013-01-23T08:13:22.457
> 
> 标签：ajax, json, extjs, request, jsfiddle

我正在尝试对 jsFiddle 的 JSON echo api 使用`Ext.Ajax`. 它成功发出请求，但返回的对象是空的，*而不是*我发送的 JSON 对象（它应该是）。

代码：

```
Ext.Ajax.request({
    url: '/echo/json/',
    jsonData: { foo: 'bar' },
    success: function(resp) {
        console.log('success!');
        console.log(Ext.decode(resp.responseText)); //empty object..? why?
    },
    failure: function(resp) {
        console.log('failure!');
    },
}); 
```

小提琴：http: [//jsfiddle.net/nANE7/](http://jsfiddle.net/nANE7/)

为什么响应只是一个空对象？它要回显的 foobar JSON 信息在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:14:57.933

试试这个：

```
Ext.Ajax.request({
    url: '/echo/json/',
    params: { 
        json: Ext.encode(
            {
                param1:'bar'
            }
        ) 
    },
    success: function(resp) {
        console.log('success!');
        console.log( resp );
        console.log(Ext.decode(resp.responseText)); //empty object..? why?
    },
    failure: function(resp) {
        console.log('failure!');
    },
}); 
```

# php - PHP从内部函数调用外部函数变量

> ID：14475090
> 
> 赞同：0
> 
> 时间：2013-01-23T08:13:35.677
> 
> 标签：php, function, variables

我有一个问题如何调用变量。

在 Js 中，如果我写`$A = $this->A`inside of `B()`，我可以`$this->A`通过`$A`inside of `C()`; 但在 PHP 中似乎这种方式行不通。

请建议一种可以在 C() 内部读取 $this-A 而无需提供函数变量的方法。

```
class X {

    function B(){
        function C(){
           $this->A;  // Can not call A here
           $A; // No work either

        }
        $A = $this->A; // 

        $this->A; // Can call A here
    }

    private $A;
} 
```

这里是`Global $A` [从外部获取变量，在 PHP 中的函数内部](https://stackoverflow.com/questions/5060465/get-variables-from-the-outside-inside-a-function-in-php)

但是，如果是全局的，这里的全局是指不在类中的整个脚本。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:17:29.817

你不能在函数中定义函数，避免它，这很糟糕！该功能将不受范围限制。函数总是全局的。

虽然它会在第一次运行时工作，但此类代码的执行只会在那时定义函数（之前的调用将不可用），并且在下一次调用时会崩溃并出现“重新定义的函数错误”。

知道了这一点，您的代码所做的就是定义一个实际上在类之外的全局函数“C”，因此无法访问私有属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:25:35.453

正如 Sven 所说，函数内的函数很糟糕，但是忽略了您也可以这样做以将非函数范围变量暴露在函数内

```
class X {

    function B(){
        $A = $this->A; //
        function C(){
           global $A; // No work either
        }
        $this->A; // Can call A here
    }

    private $A;
} 
```

从评论中编辑：

```
class X { 

    public $inputvar; 
    public $outputvar; 

    public function B($changeinput) { 
        $this->inputvar = $changeinput; 
    } 

    public function C($secondinput) { 
        $this->outputvar = $this->inputvar." == ".$secondinput; 
    } 

    public function return_var() { 
        return $this->outputvar; 
    }
}

$testclass = new X(); 

$testclass->B("test input"); 
$testclass->C("second input"); 
$testclass->inputvar = "BLAAH"; 

echo $testclass->return_var(); 
```

# c# - C#根据输入参数从url下载一个zip文件

> ID：14475093
> 
> 赞同：1
> 
> 时间：2013-01-23T08:13:51.577
> 
> 标签：c#, download, http-post

我有一个要求，我必须根据输入参数使用 c#（大小可以在 10mb - 400mb 之间变化）从服务器下载一个 zip 文件。例如，下载 userId = 10 和 year = 2012
的报告。网络服务器接受这两个参数并返回一个 zip 文件。如何使用 WebClient 类来实现这一点？
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T08:19:02.827

您可以通过扩展 WebClient 类来做到这一点

```
class ExtWebClient : WebClient
    {

        public NameValueCollection PostParam { get; set; }

        protected override WebRequest GetWebRequest(Uri address)
        {
            WebRequest tmprequest = base.GetWebRequest(address);

            HttpWebRequest request = tmprequest as HttpWebRequest;

            if (request != null && PostParam != null && PostParam.Count > 0)
            {
                StringBuilder postBuilder = new StringBuilder();
                request.Method = "POST";
                //build the post string

                for (int i = 0; i < PostParam.Count; i++)
                {
                    postBuilder.AppendFormat("{0}={1}", Uri.EscapeDataString(PostParam.GetKey(i)),
                                             Uri.EscapeDataString(PostParam.Get(i)));
                    if (i < PostParam.Count - 1)
                    {
                        postBuilder.Append("&");
                    }
                }
                byte[] postBytes = Encoding.ASCII.GetBytes(postBuilder.ToString());
                request.ContentLength = postBytes.Length;
                request.ContentType = "application/x-www-form-urlencoded";

                var stream = request.GetRequestStream();
                stream.Write(postBytes, 0, postBytes.Length);
                stream.Close();
                stream.Dispose();

            }

            return tmprequest;
        }
    } 
```

用法：如果你必须创建 POST 类型的请求

```
class Program
{
    private static void Main()
    {
        ExtWebClient webclient = new ExtWebClient();
        webclient.PostParam = new NameValueCollection();
        webclient.PostParam["param1"] = "value1";
        webclient.PostParam["param2"] = "value2";

        webclient.DownloadFile("http://www.example.com/myfile.zip", @"C:\myfile.zip");
    }
} 
```

用法：对于 GET 类型的请求，你可以简单地使用普通的 webclient

```
class Program
{
    private static void Main()
    {
        WebClient webclient = new WebClient();

        webclient.DownloadFile("http://www.example.com/myfile.zip?param1=value1&param2=value2", @"C:\myfile.zip");
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T08:24:42.703

```
string url = @"http://www.microsoft.com/windows8.zip";

WebClient client = new WebClient();

    client.DownloadFileCompleted +=    new AsyncCompletedEventHandler(client_DownloadFileCompleted);

    client.DownloadFileAsync(new Uri(url), @"c:\windows\windows8.zip");

void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
{
    MessageBox.Show("File downloaded");
} 
```

# php - 通过使用 PHP 选择复选框来删除多行

> ID：14475096
> 
> 赞同：14
> 
> 时间：2013-01-23T08:14:15.940
> 
> 标签：php, html, mysql, checkbox, isset

我想从 MYSQL 数据库中删除多行。我创建了这个 delete.php 文件来选择各种链接并使用复选框删除它们。

```
<html>
<head>

<title>Links Page</title>

</head>

<body>

<h2>Choose and delete selected links.</h2>

<?php

$dbc = mysqli_connect('localhost','root','admin','sample')
or die('Error connecting to MySQL server');

$query = "select * from links ORDER BY link_id";

$result = mysqli_query($dbc,$query)
or die('Error querying database');

$count=mysqli_num_rows($result);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="form1" method="post" action="">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="3" bgcolor="#FFFFFF"><strong>Delete multiple links</strong> </td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Link ID</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Link Name</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Link URL</strong></td>
</tr>

<?php

while ($row=mysqli_fetch_array($result)) {
?>

<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox" type="checkbox" value="<?php echo $row['link_id']; ?>"></td>
<td bgcolor="#FFFFFF"><?php echo $row['link_id']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $row['link_name']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $row['link_url']; ?></td>
</tr>

<?php
}
?>

<tr>
<td colspan="4" align="center" bgcolor="#FFFFFF"><input name="delete" type="submit" value="Delete"></td>
</tr>
<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="form1" method="post" action="">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
 <tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="3" bgcolor="#FFFFFF"><strong>Delete multiple links</strong> </td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">#</td>
<td align="center" bgcolor="#FFFFFF"><strong>Link ID</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Link Name</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Link URL</strong></td>
 </tr>

<?php

while ($row=mysqli_fetch_array($result)) {
?>

<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox" type="checkbox" value="<?php echo $row['link_id']; ?>"></td>
<td bgcolor="#FFFFFF"><?php echo $row['link_id']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $row['link_name']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $row['link_url']; ?></td>
</tr>

<?php
}
?>

<tr>
<td colspan="4" align="center" bgcolor="#FFFFFF"><input name="delete" type="submit" value="Delete"></td>
</tr>

<?php

// Check if delete button active, start this 

if(isset($_POST['delete']))
{
    $checkbox = $_POST['checkbox'];

for($i=0;$i<count($checkbox);$i++){

$del_id = $checkbox[$i];
$sql = "DELETE FROM links WHERE link_id='$del_id'";
$result = mysqli_query($sql);
}
// if successful redirect to delete_multiple.php 
if($result){
echo "<meta http-equiv=\"refresh\" content=\"0;URL=view_links.php\">";
}
 }

mysqli_close($dbc);

?>

</table>
</form>
</td>
</tr>
</table>

</body>

</html> 
```

这似乎没有删除任何行。我的数据填充在表中。我想问题出在PHP代码上。请帮帮我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T08:17:22.283

你应该把它当作一个这样的数组，

```
<input name="checkbox[]" type="checkbox" value="<?php echo $row['link_id']; ?>"> 
```

只有这样，您才能对其进行计数并将其循环以进行删除。

您还需要将数据库连接传递给查询。

```
$result = mysqli_query($dbc, $sql); 
```

你的不包括它：

```
$result = mysqli_query($sql); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-23T08:20:07.710

`name="checkbox[]"`在您的`input`元素中使用数组表示法。这将为您`$_POST['checkbox']`提供数组。在查询中，您可以将其用作

```
$sql = "DELETE FROM links WHERE link_id in ";
$sql.= "('".implode("','",array_values($_POST['checkbox']))."')"; 
```

那是一个单一的查询来删除它们。

**注意**：您需要对传入的值进行转义`$_POST['checkbox']`或`mysql_real_escape_string`类似以防止*[SQL 注入](https://www.owasp.org/index.php/SQL_Injection)*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-05T11:53:01.947

```
<?php $sql = "SELECT * FROM guest_book";
                            $res = mysql_query($sql);
                            if (mysql_num_rows($res)) {
                            $query = mysql_query("SELECT * FROM guest_book ORDER BY id");
                            $i=1;
                            while($row = mysql_fetch_assoc($query)){
                            ?>

<input type="checkbox" name="checkboxstatus[<?php echo $i; ?>]" value="<?php echo $row['id']; ?>"  />

<?php $i++; }} ?>

<input type="submit" value="Delete" name="Delete" />

if($_REQUEST['Delete'] != '')
{
    if(!empty($_REQUEST['checkboxstatus'])) {
        $checked_values = $_REQUEST['checkboxstatus'];
        foreach($checked_values as $val) {
            $sqldel = "DELETE from guest_book WHERE id = '$val'";
           mysql_query($sqldel);

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-19T22:36:16.027

使用 PHP 代码删除多个复选框

```
<input type="checkbox" name="chkbox[]  value=".$row[0]."/>
<input type="submit" name="delete" value="delete"/>
<?php
if(isset($_POST['delete']))
{
 $cnt=array();
 $cnt=count($_POST['chkbox']);
 for($i=0;$i<$cnt;$i++)
  {
     $del_id=$_POST['chkbox'][$i];
     $query="delete from $tablename where Id=".$del_id;
     mysql_query($query);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T08:33:01.720

有时你可能会/可能不会意识到的事情

使用 IE 时不会总是被 $_POST['delete'] 拾取。Firefox 和 chrome 应该可以正常工作。我使用单独的 istead 来解决 IE 的问题

至于您没有在上面的代码中删除，您似乎正在回显 2x 组复选框，它们都提取相同的数据？这只是复制+粘贴错误，还是您的代码实际上是这样的？

如果您的代码是这样的，那将是问题，因为用户可能会勾选一个复选框数组项，但另一个将未选中，因此删除的 php 代码会变得混乱。重命名第二个复选框或删除该 html 块确定您不需要显示相同的列表两次吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-01T12:08:41.233

```
 $deleted = $_POST['checkbox'];
 $sql = "DELETE FROM $tbl_name WHERE id IN (".implode(",", $deleted ) . ")"; 
```

# ektron - 通过 API 获取 Ektron Workarea 中内容的 XLIFF 文件

> ID：14475097
> 
> 赞同：1
> 
> 时间：2013-01-23T08:14:19.733
> 
> 标签：ektron

SO中已经有两个关于同一主题的问题。哪些是（在 Ektron中[创建内容的 XLIFF 文件，](https://stackoverflow.com/questions/14472903/creating-xliff-file-of-a-content-in-ektron)[在 ektron 中导出内容](https://stackoverflow.com/questions/12330302/content-export-in-ektron)）。由于这两个线程都没有结束，我在这里讨论的是同一个主题，但没有更多细节。

我需要通过 ektron 用于提供相同选项的 API 在工作区中生成特定内容的 XLIFF 文件。我已经浏览了相应的工作区文件和数据库中的相应表。但无法弄清楚 XLIFF zip 文件是否存储在某处。似乎它没有存储在任何物理目录中。而且它没有作为 XLIFF 文件存储在任何表中。我需要提取内容的 XLIFF 文件使用 API，我该如何实现？当我在工作区文件中调查时，XLIFF 是通过以下方式生成的：根据内容和语言的选择，

```
 <div class="ektronBorder">
                    <iframe src="localizationjobs.aspx" height="360" width="100%" title="History"></iframe>
                </div> 
```

有什么方法可以通过 API 生成和存储 XLIFF 文件，而不是依赖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:54:12.280

没有“1 函数” api 来执行这两项工作，但是要导出到 xliff，以下代码块应该可以帮助您入门，您需要更改一些变量名称/引用：

```
Ektron.Cms.BusinessObjects.Localization.L10nManager l10nMgr = new Ektron.Cms.BusinessObjects.Localization.L10nManager(this.requestInfoRef);
LocalizationExportJob exportJob = this.CreateExportJob(title, l10nMgr);
exportJob.XliffVersion = xliffVersion;
exportJob.MaxCompressedFileSize = maxCompressedFileSize;
l10nMgr.StartExportForTranslation(exportJob);

private LocalizationExportJob CreateExportJob(string title, Ektron.Cms.BusinessObjects.Localization.L10nManager l10nMgr)
{
    long[] taxonomyIds = this.GetSelectedLocaleTaxonomyIds();
    if (String.IsNullOrEmpty(title))
    {
        title = this.defaultJobTitle;
        if (taxonomyIds != null && 1 == taxonomyIds.Length)
        {
            long id = taxonomyIds[0];
            Ektron.Cms.API.Content.Taxonomy taxonomyApi = new Ektron.Cms.API.Content.Taxonomy();
            Ektron.Cms.TaxonomyRequest req = new Ektron.Cms.TaxonomyRequest();
            req.TaxonomyId = id;
            req.TaxonomyLanguage = this.commonApi.ContentLanguage;
            Ektron.Cms.TaxonomyData data = taxonomyApi.ReadTaxonomy(ref req);
            if (data != null)
            {
                title = data.TaxonomyName;
            }
        }
    }

    LocalizationExportJob job = new LocalizationExportJob(title);
    job.SourceLanguageId = this.GetSelectedSourceLanguage();
    foreach (long id in taxonomyIds)
    {
        job.AddItem(LocalizableCmsObjectType.LocaleTaxonomy, id);
    }

    return job;
} 
```

不幸的是，导入的可访问性要少得多，并且只能在 Ektron 业务逻辑中找到。（嵌入在 DLL 中）

# python - Django - 使用通用外键时如何创建可分页的“加入”查询？

> ID：14475108
> 
> 赞同：1
> 
> 时间：2013-01-23T08:15:21.587
> 
> 标签：python, django, django-models, django-queryset, django-contenttypes

我想更改此查询以返回 RELATED 字段：

```
msgs = my_unit.messages_in_the_queue.all().select_related("message_content__description") 
```

然而，

```
>>> msgs.values()[0]
{... 'message_type_id': 31, 'object_id': 4, ...} # <--where is the "description"?? 
```

和

```
>>> msgs.values("message_content__description")[0]
FieldError: Cannot resolve keyword 'message_content__description' into field. Choices are: acknowledged_time, id, message_type, object_id, sent_time, destination 
```

到目前为止，我发现的唯一解决方案是手动使用它：

```
for queued_message in MyUnit.messages_in_the_queue.all().select_related():
    do_something_with(queued_message.message_content.description) 
```

但是，这不是 QuerySet，因此不可分页 -**有没有办法将其变成返回所需相关字段的可分页查询？**

以下是模型：

```
class MessageQueueModel(models.Model):
    destination = models.ForeignKey(MyUnit, related_name="messages_in_the_queue")
    sent_time = models.DateTimeField(default=None, null=True, blank=True)
    acknowledged_time = models.DateTimeField(default=None, null=True, blank=True)

    #the message:
    message_type = models.ForeignKey(ContentType, null=True, blank=True)
    object_id = models.PositiveIntegerField(null=True, blank=True)
    message_content = generic.GenericForeignKey('message_type', 'object_id')

class CommandModel(models.Model):
    description = models.CharField(max_length=100)
    command_xml = models.TextField() 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:36:00.100

这不是如何`select_related`工作的。您不能要求添加特定字段，而只能要求添加关系。

这也不是如何`values()`工作的：如果您希望将连接字段添加到您的值列表中，您需要在字段列表中请求它。

最后，这也不是泛型关系的工作方式。您不能跨通用关系加入，因为它不是真正的外键。

然而，这两件事都说，我不明白你原来的查询集有什么问题。您实际上想要“分页”什么，为什么您最初获得的查询集不适合？（当然，为什么你认为你不能对普通列表进行分页？）

# android - 移除 Android 应用标题栏

> ID：14475109
> 
> 赞同：78
> 
> 时间：2013-01-23T08:15:29.870
> 
> 标签：android, layout, titlebar

我了解清单中的这些属性：

```
android:theme="@android:style/Theme.NoTitleBar"     
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

可以去掉标题栏。但是，当我修改我的应用程序时，我会经常检查图形布局。当我查看图形布局时，我仍然看到标题栏。我想以一种我在游戏开发过程中不必看到的方式移除标题栏。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2017-05-29T11:52:59.360

简单的方法是把它放在你的`onCreate()`：

```
// Java
getSupportActionBar().hide(); 
```

```
// Kotlin
supportActionBar?.hide() 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-01-23T08:19:42.707

1.  在设计选项卡中，单击 AppTheme 按钮

2.  选择“AppCompat.Light.NoActionBar”选项

3.  单击确定。

[![Android Studio中布局.xml的设计视图顶部的图标行，带有对比图标的下拉框将更改主题。](../Images/cc2e12a98c7e77c6419815cd42a79adc.png)](https://i.stack.imgur.com/Qs2iO.png)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-04-15T18:19:36.913

for Title Bar

`requestWindowFeature(Window.FEATURE_NO_TITLE);`

for fullscreen

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

Place this after

```
super.onCreate(savedInstanceState); 
```

but before

```
setContentView(R.layout.xml); 
```

This worked for me.try this

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2015-07-03T12:44:37.077

我能够使用应用到清单中的 app 元素的 App Compatibility 库主题为 Android 2.1 及更高版本的设备执行此操作：

```
<application
    ...
    android:theme="@style/AppTheme" />

<style name="AppTheme" parent="@style/Theme.AppCompat.Light.NoActionBar">
    ...
   <item name="windowNoTitle">true</item>
   <item name="android:windowNoTitle">true</item>
</style> 
```

注意：您需要`com.android.support:appcompat-v7`在 build.gradle 文件中包含该库

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-12-28T11:28:41.100

我想介绍两个选项：

1.  在 JAVA 代码中更改 SupportActionBar 的可见性
2.  在项目的 style.xml 中选择另一个样式

1：添加getSupportActionBar().hide()；到您的 onCreate 方法。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getSupportActionBar().hide();
    setContentView(R.layout.activity_main);
} 
```

2：另一种选择是更改应用程序的样式。查看“app->res->values”中的styles.xml并更改

```
<!-- Base application theme. -->
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
</style>

<!-- Base application theme. -->
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
</style> 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-11-15T18:39:37.170

就用这个

```
getSupportActionBar().hide(); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-11-14T17:14:47.440

如果您使用 AppCompat v7、v21

```
getSupportActionBar().setDisplayShowTitleEnabled(false); 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-03-10T12:23:50.283

使用它从您的 Androidmainfest.xml 中的 android 应用程序中删除标题

```
android:theme="@android:style/Theme.NoTitleBar" 
```

或者你可以在你的活动中使用它

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
setContentView(R.layout.activity_main); 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-03-27T11:23:19.177

如果你有`import android.support.v7.app.ActionBarActivity;`并且你的类扩展`ActionBarActivity`了，那么在你的`OnCreate`：

```
android.support.v7.app.ActionBar AB=getSupportActionBar();
AB.hide(); 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-01-23T08:19:05.633

在图形编辑器中，确保您在顶部选择了您的主题。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2019-06-07T13:47:10.037

很明显，但`App Theme`设计中的选择只是为了在布局编辑时显示一个草稿，与手机中的实际应用程序无关。

仅仅改变manifest文件( `AndroidManifest.xml`)是不够的，因为需要预定义的样式是`styles.xml`. 更改布局文件也是无用的。

所有建议的解决方案对我`Java`来说`Kotlin`都失败了。其中一些使应用程序崩溃。如果从来没有人（像我一样）在应用程序中使用标题栏，那么静态解决方案会更干净。

对我来说，2019 年唯一有效的解决方案（Android Studio 3.4.1）是：

在`styles.xml`（在 app/res/values 下）添加以下行：

```
 <style name="AppTheme.NoActionBar">
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
    </style> 
```

之后`AndroidManifest.xml`（在应用程序/清单下）

代替

```
android:theme="@style/AppTheme"> 
```

经过

```
android:theme="@style/AppTheme.NoActionBar"> 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-01-24T11:38:03.207

在您`res/values/styles.xml`的现代 Android Studio 项目（2019/2020）中，您应该能够更改默认父主题

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"> 
```

我更进一步，让它看起来像这样

```
<!-- Base application theme. -->
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
    <item name="android:windowFullscreen">true</item>
</style> 
```

这是基于从 Microsoft PWA builder [https://www.pwabuilder.com/生成的代码](https://www.pwabuilder.com/)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2020-09-02T20:23:29.147

android中的标题栏称为Action bar。因此，如果您想从任何特定活动中删除它，请转到 AndroidManifest.xml 并添加主题类型。比如`android:theme="@style/Theme.AppCompat.Light.NoActionBar"`。

例子：

```
<activity
    android:name=".SplashActivity"
    android:noHistory="true"
    android:theme="@style/Theme.AppCompat.Light.NoActionBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-01-23T08:20:12.147

在图形布局中，您可以选择工具栏上的主题。（看起来像星星的那个）。

选择`NoTitleBar`并玩得开心。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-03-19T23:08:03.683

要打开设计窗口：res->layouts->activity_manifest.xml 然后单击“代码”和“拆分”旁边的“设计”按钮。在左上角。

[![在此处输入图像描述](../Images/304458f4850e44c3f5b53dc3fa3a2f68.png)](https://i.stack.imgur.com/HdYvk.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-07-02T10:56:04.837

只需将活动设计视图中的主题更改为 NoActionBar[就像这里的一样](http://i.stack.imgur.com/SPl0r.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-08-05T05:40:16.800

使用此从顶部删除标题和图像。

前：

```
setContentView(R.layout.actii); 
```

写下这段代码：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

# mongodb - 持久性和 mongoDB

> ID：14475110
> 
> 赞同：1
> 
> 时间：2013-01-23T08:15:29.997
> 
> 标签：mongodb, database-connection, g-wan

我正在尝试像这样坚持我的 mongoDB 连接：

```
mongo **ptr = (mongo**)get_env(argv, US_VHOST_DATA);

if(!ptr[0]) {
  mongo_replica_set_init( conn, "cluster" );
  mongo_replica_set_add_seed( conn, "mongo1.mongood.com", 27017 );
  mongo_replica_set_add_seed( conn, "mongo3.mongood.com", 27017 );
  mongo_replica_set_add_seed( conn, "mongo4.mongood.com", 27017 );
  mongo_replica_set_add_seed( conn, "mongo5.mongood.com", 27017 );
  mongo_replica_set_add_seed( conn, "mongo6.mongood.com", 27017 );
  mongo_replica_set_client( conn );
  mongo_cmd_authenticate( conn, "dbname", "dbuser", "dbpass" );

  ptr[0] = (mongo*)calloc(1, sizeof(conn));
} else {
  conn[0] = *ptr[0];
}
int count = 0;
count = mongo_count( ptr[0], "dbname", "coll", NULL);

mongo_destroy( ptr[0] );

xbuf_xcat(reply, "<h3>%d</h3>", count); 
```

但显然，它不起作用......我的目标是避免每个请求的连接时间（~30ms）

这是可行的吗？这个例子有什么问题？

该代码不会抱怨，但它只是返回 -1 而不是正确的计数。

谢谢您的帮助。

* * *

[编辑] 删除 else 块并删除 mongo_destroy 行按预期工作 \o/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:43:31.297

我从未使用过 mongo，但是查看您的代码，您正在为 ptr[0] 分配空间，但您没有为其分配任何内容，因此后续调用将始终返回 -1。而 else 块什么也不做，因为您使用 ptr[0] 而不是 conn 进行所有 mongo 调用，所以要么删除 else 块，要么更正所有 mongo 调用以使用 conn 而不是 ptr[0] 并且不要忘记在 calloc 之后将 conn 分配给 ptr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:24:14.197

查看随 G-WAN 下载提供的[mysql.c 示例。](http://gwan.com/source/mysql.c)它以不会让您感到困惑的方式完成相同的工作。

# ruby-on-rails - 带有用户可编辑模板的 Rails 邮件程序

> ID：14475112
> 
> 赞同：1
> 
> 时间：2013-01-23T08:15:35.563
> 
> 标签：ruby-on-rails, devise, actionmailer, devise-invitable

我正在 Rails 中构建一个 cms，我希望站点管理员能够在其中自定义电子邮件模板。所以邮件视图需要通过网络界面进行编辑。我正在使用带有 Devise 的 Rails 3.2 进行身份验证。

可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:44:28.283

我最终使用[液体模板](http://liquidmarkup.org/)来做到这一点。效果很好，更重要的是，它的安全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:29:00.503

我对此的解决方案是允许用户创建降价电子邮件。您可以使用[redcarpet](https://github.com/vmg/redcarpet)或许多其他[markdown 解析工具](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=markdown)。但是，根据您想要执行的操作，您可能需要手动清理用户输入。

# magento - 我如何检查用户是否从另一家商店登录了商店

> ID：14475115
> 
> 赞同：-1
> 
> 时间：2013-01-23T08:15:56.343
> 
> 标签：magento, single-sign-on

我的“Magento”网站上有两家商店，有两个不同的域名。我在客户配置中共享了域，因此如果用户注册第一个商店，他也可以使用相同的凭据登录第二个商店。

现在我想要的是，如果客户登录第一家商店，该用户会自动登录第二家商店。

我怎样才能做到这一点？我虽然关于 cookie，但我无法为不同的域设置 cookie。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T08:52:10.423

我不是“Magento”的人，但我可以为你提出一些建议。如果您的用户/登录表在您的商店之间共享，那么您有一个登录标志，因此如果用户登录到 store1 设置此标志，现在如果用户导航到 store2，您需要检查此标志并基于您可以在 store2 上创建用户会话的标志状态

# java - Java：需要关于图形的解释

> ID：14475118
> 
> 赞同：3
> 
> 时间：2013-01-23T08:16:20.103
> 
> 标签：java, swing, graphics

我想了解更多有关图形以及如何使用它的信息。

我有这门课：

```
public class Rectangle 
{
    private int x, y, length, width;
    // constructor, getters and setters

    public void drawItself(Graphics g)
    {
        g.drawRect(x, y, length, width);
    }
} 
```

还有一个像这样的非常简单的框架：

```
public class LittleFrame extends JFrame 
{
    Rectangle rec = new Rectangle(30,30,200,100);      

    public LittleFrame()
    {
        this.getContentPane().setBackground(Color.LIGHT_GRAY);
        this.setSize(600,400);
        this.setVisible(true);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public static void main(String[] args)
    {
        new LittleFrame();
    }
} 
```

我想做的就是把这个矩形添加到我的 LittleFrame 的容器中。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:26:57.433

我建议您创建一个额外的类，其扩展`JPanel`如下：

```
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JPanel;

public class GraphicsPanel extends JPanel {

    private List<Rectangle> rectangles = new ArrayList<Rectangle>();

    public void addRectangle(Rectangle rectangle) {
        rectangles.add(rectangle);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        for (Rectangle rectangle : rectangles) {
            rectangle.drawItself(g);
        }
    }
} 
```

然后，在您的`LittleFrame`班级中，您需要将此新面板添加到框架内容窗格中，并将您的添加`Rectangle`到要绘制的矩形列表中。在`LittleFrame`构造函数的最后，添加：

```
GraphicsPanel panel = new GraphicsPanel();
panel.addRectangle(rec);
getContentPane().add(panel); 
```

# sql-server - 设置 SSIS 数据库包路径

> ID：14475119
> 
> 赞同：5
> 
> 时间：2013-01-23T08:16:31.593
> 
> 标签：sql-server, vb.net, ssis

我正在尝试以编程方式执行位于数据库中的 SSIS 包。

我正在使用这个 API：

```
Imports Microsoft.SqlServer.Dts.Runtime 
```

我有一张描述要打包的路径（在数据库中）的图像，但我无法弄清楚如何在*LoadFromSqlServer*方法中正确设置*packagePath*属性。

 *这是描述我在数据库中的包路径的图像：

![在此处输入图像描述](../Images/edea8deab9e687de997b472b0405c9e1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T20:47:08.463

您将需要添加对 Microsoft.SqlServer.Management.IntegrationServices 的引用。对我来说，它没有出现在 SQL Server 文件夹中，我只能在 GAC 中找到它。

`C:\Windows\assembly\GAC_MSIL\Microsoft.SqlServer.Management.IntegrationServices\11.0.0.0__89845dcd8080cc91\Microsoft.SqlServer.Management.IntegrationServices.dll`

该程序集还依赖于

`C:\Windows\assembly\GAC_MSIL\Microsoft.SqlServer.Management.Sdk.Sfc\11.0.0.0__89845dcd8080cc91\Microsoft.SqlServer.Management.Sdk.Sfc.dll`

```
Sub Main()
    '
    ' Do not fault me for my poor VB skills nor my lack of error handling
    ' This is bare bones code adapted from 
    ' http://blogs.msdn.com/b/mattm/archive/2011/11/17/ssis-and-powershell-in-sql-server-2012.aspx

    Dim folderName As String
    Dim projectName As String
    Dim serverName As String
    Dim packageName As String
    Dim connectionString As String
    Dim use32BitRuntime As Boolean
    Dim executionId As Integer

    Dim integrationServices As Microsoft.SqlServer.Management.IntegrationServices.IntegrationServices
    Dim catalog As Microsoft.SqlServer.Management.IntegrationServices.Catalog
    Dim catalogFolder As Microsoft.SqlServer.Management.IntegrationServices.CatalogFolder
    Dim package As Microsoft.SqlServer.Management.IntegrationServices.PackageInfo

    ' Dimensions in your example
    folderName = "SSISHackAndSlash"
    ' dimCalendar in your example
    projectName = "SSISHackAndSlash2012"
    serverName = "localhost\dev2012"

    ' dimCalendar in your example (no file extension)
    packageName = "TokenTest.dtsx"
    connectionString = String.Format("Data Source={0};Initial Catalog=msdb;Integrated Security=SSPI;", serverName)

    integrationServices = New Microsoft.SqlServer.Management.IntegrationServices.IntegrationServices(New System.Data.SqlClient.SqlConnection(connectionString))
    ' There is only one option for an SSIS catalog name as of this posting
    catalog = integrationServices.Catalogs("SSISDB")

    ' Find the catalog folder. Dimensions in your example
    catalogFolder = catalog.Folders(folderName)

    ' Find the package in the project folder
    package = catalogFolder.Projects(projectName).Packages(packageName)

    ' Run the package. The second parameter is for environment variables
    executionId = package.Execute(use32BitRuntime, Nothing)

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:01:50.200

如果要查找部署在 SQL Server 中的包位置。

1.  打开 SSMS。
2.  连接到集成服务。
3.  转到查看并单击“对象资源管理器详细信息”。
4.  现在您选择您的包以了解 SQL Server 中的包路径。看看下面的截图。

忽略服务器名称，因为它将是该`LoadFromSqlServer`方法的参数。

所以包路径应该是：\Stored Package\MSDB\Data Collector\PerfCountersUpload。

![在此处输入图像描述](../Images/c4578789dfb7b8574a1259efff7667e9.png)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T11:57:55.587

除了blinkc[答案](https://stackoverflow.com/a/14510415/1970317)。

这是代码的 C# 版本：

```
string folderName = "name";
string projectName = "name";
string serverName = "localhost";
string packageName = "name";
string connectionString = string.Format("Data Source={0};Initial Catalog=msdb;Integrated Security=SSPI;", serverName);

var integrationServices = new IntegrationServices(newSystem.Data.SqlClient.SqlConnection(connectionString));
var catalog = integrationServices.Catalogs["SSISDB"];
var catalogFolder = catalog.Folders[folderName];

var package = catalogFolder.Projects[projectName].Packages[packageName];

long execId = package.Execute(false, null); 
```

就我而言，我必须添加 4 个 dll：

```
Microsoft.SqlServer.ConnectionInfo.dll
Microsoft.SqlServer.Management.IntegrationServices.dll
Microsoft.SqlServer.Management.Sdk.Sfc.dll
Microsoft.SqlServer.Smo.dll 
```

可以找到所有依赖项`C:\Windows\assembly\GAC_MSIL\`*

# javascript - 访问从移动 facebook graph api 上传的照片

> ID：14475127
> 
> 赞同：1
> 
> 时间：2013-01-23T08:17:25.073
> 
> 标签：javascript, jquery, asp.net, facebook, facebook-graph-api

我无法访问从 facebook 移动应用程序上传的照片，我有“user_photos”权限，当我调用相册 api 时，它会为我获取移动上传相册，但是当我尝试访问此相册的照片时它返回空，同样的问题是 Instagram 照片，有什么帮助吗？

**专辑通话**

```
string url = "https://graph.facebook.com/" + {UID} + "/albums?fields=cover_photo,count,name&access_token=" + {Access_token}; 
```

**相册照片**

```
string url = "https://graph.facebook.com/" + {albumId} + "/photos?fields=picture,source&limit=" + pageSize + "&offset=" + offset + "&access_token=" + {Access_token}; 
```

# iphone - 加快来自 iphone 中服务器的响应检索器

> ID：14475129
> 
> 赞同：0
> 
> 时间：2013-01-23T08:17:28.870
> 
> 标签：iphone, ios, objective-c, cocoa-touch, background-thread

我正在使用以下代码从服务器获取结果

```
 NSString *queryString = @"MyString"

        NSString *response = [NSString stringWithContentsOfURL:[NSURL URLWithString:queryString] encoding:NSUTF8StringEncoding error:&err];

        NSLog(@"%@",response);

        if (err != nil)
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Error"
                                                           message: @"An error has occurred. Kindly check your internet connection"
                                                          delegate: self
                                                 cancelButtonTitle:@"Ok"
                                                 otherButtonTitles:nil];
            [alert show];
            [indicator stopAnimating];
        }
        else
        {
//BLABLA
} 
```

这段代码的问题是，如果服务器显示滞后并且需要 3 秒才能获得此响应

```
NSString *response = [NSString stringWithContentsOfURL:[NSURL URLWithString:queryString] 
```

我的 iPhone 屏幕卡住了 3 秒。我怎样才能让它在后台运行，这样它就不会减慢或卡住手机

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:22:42.737

您正在做的是从主线程发送 HTTP 请求。正如你所说，这会堵塞用户界面。您需要生成一个后台线程并向您的服务器发出请求，当响应返回时，您需要从主线程更新 UI。这是 UI 编码中的常见模式。

```
__block__  NSString *response;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

    //your server url and request. data comes back in this background thread
    response; = [NSString stringWithContentsOfURL:[NSURL URLWithString:queryString] encoding:NSUTF8StringEncoding error:&err];

    dispatch_async(dispatch_get_main_queue(), ^{
        //update main thread here.
        NSLog(@"%@",response);

        if (err != nil)
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Error"
                                                           message: @"An error has occurred."
                                                          delegate: self
                                                 cancelButtonTitle:@"Ok"
                                                 otherButtonTitles:nil];
            [alert show];
            [indicator stopAnimating];
        }
    });
}); 
```

你也可以`performSelectorInBackground:withObject:`用来生成一个新线程，然后执行的选择器负责设置新线程的自动释放池、运行循环和其他配置细节——参见Apple*线程编程指南中的*[“使用 NSObject 生成线程”](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW13)。

 *正如我在上面发布的那样，使用[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)可能会更好。GCD 是一种较新的技术，在内存开销和代码行方面效率更高。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T08:23:45.410

您可以使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use#creating_an_asynchronous_request)，它是我最喜欢的获取和发送信息的工具。*

# html - 根据渲染的 div 和可用的视口调整 div 的大小

> ID：14475131
> 
> 赞同：1
> 
> 时间：2013-01-23T08:17:29.837
> 
> 标签：html, autoresize

我是一名在一个小型部门网站上工作的医生。我在包装器 "maincontainer" 中使用了两列设计。包装器包含一个“topsection”、一个左浮动的“navigation”、一个位于右侧的“contentcolumn”div 和一个固定位置的“footer”。包装器“maincontainer”具有背景颜色并且是集中式的。

如果需要滚动，我希望将“maincontainer”重新调整为高度 contentcolumns + 140px。基于我有限的知识，我使用的是 JS 代码（如下）。但是，如果我将任何图像放在“contentcolumn”中，“maincontainer”仍然很短，并且“contentcolumn”超过了“maincontainer”。
我寻求帮助以纠正这种行为。

谢谢

维韦克

完整代码在这里：http: [//jsfiddle.net/AuURL/](http://jsfiddle.net/AuURL/)

调整大小.js

```
$(document).ready(function() {
 var maincontainer_height=document.getElementById('contentcolumn').clientHeight + 140;
 $("#maincontainer").css("height",maincontainer_height + "px");
});

$(document).ready(function() {
$(window).resize(function() {
 var maincontainer_height=document.getElementById('contentcolumn').clientHeight + 140;
 $("#maincontainer").css("height",maincontainer_height + "px");
});
}); 
```

# wpf - 为什么定义TreeView.ItemTemplate 后TreeView 不会自动为Childnodes 选择DataTemplates？

> ID：14475132
> 
> 赞同：1
> 
> 时间：2013-01-23T08:17:30.617
> 
> 标签：wpf, mvvm, treeview, datatemplate, icollectionview

我不明白 wpf 在这里做了什么（使用 .NET 3.5 和 C#）：

在我的应用程序资源中，我为不同类型的 ViewModel 定义了几个 DataTemplates 和 HierarchicalDataTemplates。到目前为止，这运作良好，我的窗口中的 TreeView 显示了预期的节点。我不得不说每个 ViewModel 中的所有 Childelements 都是以 ICollectionView 的形式出现的。现在我决定使用 ICollectionView 的特性，对 TreeView 的“根节点”进行分组、排序和过滤。我使 TreeView 看起来像这样：

```
<TreeView ItemsSource="{Binding Path=Elements.Groups}">
  <TreeView.ItemTemplate>
    <HierarchicalDataTemplate ItemsSource="{Binding Path=Items}" ItemTemplate="{StaticResource SOMEITEMTEMPLATENAME}">
      <TextBlock Text="{Binding Path=Name}"/>
    </HierarchicalDataTemplate>
  </TreeView.ItemTemplate>
</TreeView> 
```

ViewModel 看起来像这样：

```
class RootViewModel
  : INotifyPropertyChanged
{

  public ICollectionView Elements
  {
     get
     {
       ICollectionView view = CollectionViewSource.GetDefaultView(_elementsFromModel.Select(x => new FirstChildViewModel(x));
       view.GroupDescriptions.Add(new PropertyGroupDescription("Name"));
       view.Filter = delegate(Object x) { /*do some filter stuff here*/ };

       return view;
     }
  }
}

class FirstchildViewModel
  : INotifyPropertyChanged
{
  /*some other stuff here*/

  public ICollectionView Items
  {
    get;
  }
} 
```

现在的问题是 TreeView 没有为更深的子元素自动选择正确的模板。那么这有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:43:55.353

您已经明确定义了**TreeView.ItemTemplate**，因此 WPF 将仅使用`ItemTemplate`. 您必须为类型定义**HierarchicalDataTemplate**，它对应于`Groups`元素类型。

但是定义组的直接方法是定义`GroupStyle`属性。[您可以在msdn](http://msdn.microsoft.com/en-us/library/ff407126.aspx)上阅读有关 ICollectionView 功能的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:45:01.187

经过一些研究，最好的解决方案是像这样定义 TreeView：

```
<TreeView ItemsSource="{Binding Path=Elements}">
  <TreeView.GroupStyle>
    <GroupStyle>
      <GroupStyle.ContainerStyle>
        <Style TargetType="{x:Type GroupItem}">
          <Setter Property="Template">
            <Setter.Value>
              <ControlTemplate TargetType="{x:Type GroupItem}">
                <TreeViewItem>
                  <TreeViewItem.Header>
                    <TextBlock Text="{Binding Path=Name}"/>
                  </TreeViewItem.Header>

                  <ItemsPresenter Margin="-20,0,0,0"/>
                </TreeViewItem>
              </ControlTemplate>
            </Setter.Value>
          </Setter>
        </Style>
      </GroupStyle.ContainerStyle>
    </GroupStyle>
  </TreeView.GroupStyle>
</TreeView> 
```

现在组节点能够展开和折叠不同的子节点使用不同的数据模板。感谢@stukselbax 为我指明了正确的方向。

# java - Android：如何从 URL 获取或读取 XML 到 String

> ID：14475135
> 
> 赞同：1
> 
> 时间：2013-01-23T08:17:40.617
> 
> 标签：java, android

如何读取 XML，然后将其转换/转换为变量字符串，我尝试使用 Jsop 库，但没有成功，使用 JSoup 我得到 html 格式。

我想阅读下面的字符串链接：http: [//bowingdown.wordpress.com/feed/](http://bowingdown.wordpress.com/feed/)

然后把它放到String中，我想如下，例子；

```
String data = "<rss xmlns:content=blablabla><channel>blablbabla</channel></rss>"; 
```

我已经在这里阅读了[对 XML 文件的 HTTP 请求](https://stackoverflow.com/questions/5162063/http-request-for-xml-file/5162372#5162372)，但没有成功。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:26:18.483

使用 xml 解析技术，例如`XmlPullParser`,`SAX parser`或`DOM parser`.

XML Pull parser 是 android 开发者网站推荐的解析器[这里](http://www.vogella.com/articles/AndroidXML/article.html)有一个 Pull parser 的教程。

# android - 如何在webview中隐藏软键盘上方的线性布局

> ID：14475140
> 
> 赞同：2
> 
> 时间：2013-01-23T08:18:16.247
> 
> 标签：android, android-linearlayout, android-softkeyboard

我有个问题。我想在'Glaxy Tab 10.1'的软键盘上方隐藏栏（栏有两个按钮：[prev]，[next] in linearlayout）。这仅在 webview 中可见。

如何隐藏`linearlayout`上面的软键盘？

如何控制`linearlayout`上面的软键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:44:53.713

您正在寻找的是 Activity 的[`windowSoftInputMode`](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)属性。你在你的 AndroidManifest.xml 文件中设置它，并给它一个值，例如：

*   `adjustResize`：“活动的主窗口总是调整大小，以便为屏幕上的软键盘腾出空间。”

*   `adjustPan`：“活动的主窗口没有调整大小来为软键盘腾出空间。相反，窗口的内容会自动平移，这样当前的焦点就不会被键盘遮挡，用户总是可以看到他们正在输入的内容。这是通常不如调整大小可取，因为用户可能需要关闭软键盘才能到达窗口的模糊部分并与之交互。”

只要您将布局包装在 ScrollView 中，adjustResize 可能对您有用。如果您在背景中有位图图像，它可能会产生负面影响，因为它也会被调整大小，在这种情况下，您可能需要使用 adjustPan。

```
<activity android:windowSoftInputMode="adjustResize" /> 
```

或者

```
<activity android:windowSoftInputMode="adjustPan" /> 
```

# c++ - 从套接字和 STDIN 提升 Asio 多线程

> ID：14475141
> 
> 赞同：1
> 
> 时间：2013-01-23T08:18:26.153
> 
> 标签：c++, multithreading, boost-asio

我只想拥有一个从套接字异步侦听并从`boost::asio::posix::stream_descriptor`分配给标准输入的聊天客户端。

如果我在单线程应用程序中运行此代码，一切正常。

如果我`io_service.run()`从 2 个或更多线程调用，来自标准输入的异步操作永远不会正常，但仍然执行来自套接字的异步读取。

这是代码：

```
MasterClient::MasterClient(boost::asio::io_service& io_service,boost::asio::ip::tcp::resolver::iterator iter, string nickName)
:it(iter),chatNick(nickName)
{
    this->fdIn_ = str_ptr(new boost::asio::posix::stream_descriptor(io_service,::dup(STDIN_FILENO)));
    this->dirServer_ = new(connectedPeer);
    this->dirServer_->sock = socket_ptr(new boost::asio::ip::tcp::socket(this->io_service_));
    boost::asio::async_connect(*(this->dirServer_->sock), this->it,
        boost::bind(&MasterClient::connectionHandler, this,
                boost::asio::placeholders::error));
} 
```

主要的：

```
int main(int argc, const char * argv[])
{
boost::asio::io_service io_service(2);
    boost::asio::io_service::work work(io_service);
    boost::asio::ip::tcp::resolver resolver(io_service);
    boost::asio::ip::tcp::resolver::query query(argv[1], argv[2]);
    boost::asio::ip::tcp::resolver::iterator iterator = resolver.resolve(query);
    string nick;
    cout << "Inserire un nickname per la sessione di chat: " << flush;
    getline(cin,nick);
    MasterClient cli(io_service,iterator,nick);
cli.run();
} 
```

和 MasterClient::run()

```
void MasterClient::run()
{
// Create a pool of threads to run all of the io_services.
std::vector<boost::shared_ptr<boost::thread> > threads;
boost::asio::io_service::work work(this->io_service_);
for (std::size_t i = 0; i < 1; ++i)
{
    boost::shared_ptr<boost::thread> thread(new boost::thread(boost::bind(&boost::asio::io_service::run, &io_service_)));
    threads.push_back(thread);
}

// Wait for all threads in the pool to exit.
for (std::size_t i = 0; i < threads.size(); ++i)
    threads[i]->join();
} 
```

这里我称之为异步读数：

```
void MasterClient::clientDelegate()
{
if(this->connectToServer())
{
    this->mainMenu();

    boost::asio::async_read_until(*fdIn_, inBuff_, '\n',
            boost::bind(&MasterClient::fdInMenuHandler,
                    this,
                    boost::asio::placeholders::error,
                    boost::asio::placeholders::bytes_transferred));

    (*(this->dirServer_->sock)).async_read_some(boost::asio::buffer(this->buff_),
            boost::bind(&MasterClient::serverHandler,
                    this,
                    boost::asio::placeholders::error,
                    boost::asio::placeholders::bytes_transferred,
                    this->dirServer_->sock));
    this->io_service_.post(boost::bind(&MasterClient::printer,this));
}else
{
    if(this->isDebugging)
        cout << "Error in ClientDelegate." << endl;
}
if(this->isDebugging)
    cout << "ClientDelegate END" << endl;
} 
```

连接处理程序，其中调用了 clientDelegate：

```
void MasterClient::connectionHandler(const boost::system::error_code& error)
{
cout << "connected" << endl;
try
{
    if(error)
        throw boost::system::system_error(error);
    else
    {
        this->dirServer_->endpoint = boost::asio::ip::tcp::endpoint((*(this->dirServer_->sock)).remote_endpoint());
        this->clientDelegate();
    }
}catch(const boost::system::system_error& e)
{
    cerr << "Boost Exception in ConnectHandler ---> " << e.what() << endl;
    this->io_service_.stop();
}
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:44:38.167

根据[boost::asio::posix::stream_descriptor](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/posix__stream_descriptor.html)的文档，在多个线程中使用同一个实例是不安全的。在多线程情况下，通常将处理程序包装到一个链中以进行序列化。

在您的情况下，我看不到为同一个客户端连接使用多个线程的意义。

# python - BadKeyError：Google App Engine 中的字符串键无效

> ID：14475142
> 
> 赞同：0
> 
> 时间：2013-01-23T08:18:30.273
> 
> 标签：python, html, google-app-engine, jinja2

在我的项目中（使用 Python、Html 和 Jinja2），我有一个带有电影图片的主页，每张图片都指向带有电影数据的特定页面。当我尝试使用电影数据呈现页面时，出现以下错误：

```
Traceback (most recent call last):
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line  
1536, in __call__
rv = self.handle_exception(request, response, e)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 
1530, in __call__
rv = self.router.dispatch(request, response)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 
1278, in default_dispatcher
return route.handler_adapter(request, response)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 
1102, in __call__
return handler.dispatch()
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572,  
in dispatch
return self.handle_exception(e, self.app.debug)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, 
in dispatch
return method(*args, **kwargs)
File "C:\Users\User\Desktop\imovie-good\main.py", line 67, in get
movie_data = db.get(self.request.get('movie_key'))
File "C:\Program Files 
(x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 1537, in get
return get_async(keys, **kwargs).get_result()
File "C:\Program Files 
(x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 1496, in 
get_async
keys, multiple = datastore.NormalizeAndTypeCheckKeys(keys)
File "C:\Program Files   
(x86)\Google\google_appengine\google\appengine\api\datastore.py", line 178, in   
NormalizeAndTypeCheckKeys
keys = [_GetCompleteKeyOrError(key) for key in keys]
File "C:\Program Files 
(x86)\Google\google_appengine\google\appengine\api\datastore.py", line 2739, in 
_GetCompleteKeyOrError
key = Key(arg)
File "C:\Program Files 
(x86)\Google\google_appengine\google\appengine\api\datastore_types.py", line 378, in  
__init__
raise datastore_errors.BadKeyError('Invalid string key %s.' % encoded)
BadKeyError: Invalid string key . 
```

这是我的python代码：

```
 import webapp2
    import jinja2
    import os
    import datetime
    import time
    import cgi
    from google.appengine.ext import db
    from google.appengine.api import users
    from google.appengine.api import images

    jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

    class Movie(db.Model):
        name = db.StringProperty()
        release_date = db.StringProperty()
        duration = db.StringProperty()
        director = db.StringProperty()
        actors = db.StringProperty(multiline=True)
        summary = db.StringProperty(multiline=True)
        picture = db.BlobProperty()
        trailer = db.StringProperty(multiline=True)
        date = db.DateTimeProperty(auto_now_add=True)

    class Movie_Data(webapp2.RequestHandler):
        def get(self):
            movie_key = self.request.get('movie_key')
            movie_data = Movie.get(movie_key)

    template_values = {'movie_data': movie_data}
            template = jinja_environment.get_template('movie_data.html')
            self.response.out.write(template.render(template_values))

    class Image(webapp2.RequestHandler):
        def get(self):
            movie = db.get(self.request.get('img_id'))
            if movie.picture:
                self.response.headers['Content-Type'] = 'image/jpeg'
                self.response.out.write(movie.picture)
            else:
                self.response.out.write("No Image")

    class Main(webapp2.RequestHandler):
        def get(self):
            movies = db.GqlQuery("SELECT * "
                                "FROM Movie "
                                "ORDER BY release_date DESC LIMIT 5")
            template_values = { 'movies': movies}                                   
            template = jinja_environment.get_template('home_page.html')
            self.response.out.write(template.render(template_values))

    class Admin(webapp2.RequestHandler):
        def get(self):
            template_values = {}
            template = jinja_environment.get_template('admin.html')
            self.response.out.write(template.render(template_values))

        def post(self):
            name = self.request.get('name')
            release_date = self.request.get('release_date')
            c = time.strptime(release_date,"%m/%d/%Y")
            release_date = time.strftime("%m%d%Y",c)
            duration = self.request.get('duration')
            director = self.request.get('director')
            actors = self.request.get('actors')
            summary = self.request.get('summary')
            picture = self.request.get('img')
            trailer = self.request.get('trailer')

            movie = Movie(key_name = name)
            movie.release_date = release_date
            movie.duration = duration
            movie.director = director
            movie.actors = actors
            movie.summary = summary
            movie.picture = db.Blob(picture)
            movie.trailer = trailer
            movie.put()
            self.redirect('/')

    app = webapp2.WSGIApplication([('/admin', Admin), ('/', Main), ('/img', Image), ('/movie_data', Movie_Data)], debug=True) 
```

这是我的主页 html：

```
 <html>
    <body>
        <table>
            <th>Top Movies</th>

            {% for movie in movies %}
            <tr>
                <td>{{movie.key().name() }} &nbsp</td>
            </tr>
            <tr>
                <td><a href = "/movie_data?movie_key = {{movie.key()}}"> <img src = "/img?img_id={{movie.key()}}"> </td>

            </tr>

            {% endfor %}

            <a href = "/admin">admin</a>

        </table>
    </body>
</html> 
```

这是我的 movie_data html 代码：

```
 <html>
    <body>
        <div>
            <table>
                <tr>
                    <td rowspan ="6">{{ movie_data.picture }}</td>
                    <td> Movie Name: {{movie_data.name}}</td> 
                </tr>
                <tr>
                    <td> Release Date: {{movie_data.release_date}}</td> 
                </tr>
                <tr>
                    <td> Duration (minutes): {{movie_data.duration}}</td> 
                </tr>
                <tr>
                    <td> Director: {{movie_data.director}}</td> 
                </tr>
                <tr>
                    <td> Actors: {{movie_data.actors}}</td> 
                </tr>
                <tr>
                    <td> Summary: {{movie_data.summary}}</td> 
                </tr>
                <tr>
                    <td colspan ="2"> {{movie_data.trailer}} </td>
                </table>
        </div>      
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:19:45.823

不要在您的网址中使用空格：

```
/movie_data?movie_key={{movie.key()}} 
```

# sql-server - 我可以在 2 个字段上创建唯一约束并在布尔字段上创建条件吗

> ID：14475143
> 
> 赞同：4
> 
> 时间：2013-01-23T08:18:32.263
> 
> 标签：sql-server, tsql, sql-server-2005

> **可能重复：**
> [简单的​​ CHECK 约束不是那么简单](https://stackoverflow.com/questions/7210680/simple-check-constraint-not-so-simple)

我们有一个包含用户角色的表。它看起来像这样：

```
Id, RoleId, PersonId, Active 
```

活动列用于软删除功能：当您删除用户的角色时，您实际上设置`active`为`false`. 因此，您可以有多个具有相同`roleid-personid-active`组合的行，但仅当活动位设置为 false 时。所以这是有效的数据：

```
Id   RoleId   PersonId   Active
1    1        1          false
2    1        1          false
3    1        1          false
4    1        1          false 
```

但这不是，因为您在任何时候都只能拥有一个活动角色（因此不应插入记录 3）：

```
Id  RoleId  PersonId  Active
1   1       1         false
2   1       1         true
3   1       1         true 
```

我的问题是：我可以在`RoleId, PersonId and Active`, where `active`equals上创建一个唯一的约束`true`吗？

附言。sql server 版本是2005

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:52:04.080

您可以在 上使用唯一约束`RoleId`，以及适用于所有非活动角色和所有活动角色`PersonId`的计算列。`Id``null`

```
create table Roles
(
  Id int identity primary key,
  RoleId int not null,
  PersonId int not null,
  Active bit,
  ActiveInt as case Active when 0 then Id end,
  constraint UQ_RolePersonActive unique (RoleId, PersonId, ActiveInt)
) 
```

# joomla2.5 - 如何删除发布选项 joomla 前端创建文章？

> ID：14475154
> 
> 赞同：1
> 
> 时间：2013-01-23T08:19:29.300
> 
> 标签：joomla2.5

我正在使用 Joomla 2.5。我想从前端删除/隐藏发布、语言和元数据选项（创建文章），以便网站用户只需输入文章的主题和内容并提交文章。
另一个问题 - 我如何以编程方式发布 Joomla 文章？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:57:52.193

这是无法做到的，因为这些字段是 Joomla! 的一部分！文章管理器表格。这些是 Joomla 的核心功能。但是如果你真的想要它，它们可能可以使用“模板覆盖方法”来删除 -

[http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

# android - 如何从数组列表中获取测验答案？

> ID：14475156
> 
> 赞同：2
> 
> 时间：2013-01-23T08:19:31.297
> 
> 标签：android, text, arraylist, radio-button

我是安卓新手。我正在做一个测验应用程序的项目。我在显示问题和答案时遇到问题。

我的问题是我已将问题和答案存储在数组中。问题和答案正在显示，但未按顺序显示。

我从数据库中得到了问题和答案。它们按顺序排列，但在我的数组列表中它不按顺序排列。问题和答案不匹配。

如何通过匹配正确的顺序以正确的顺序显示问题。

请帮助我，并提前非常感谢。

`code`

```
 protected void onPostExecute(String file_url) {
        pDialog.dismiss();  
        ques1=new ArrayList<String>(new HashSet<String>(ques1));

        System.out.println(" Question array:"+ques1);
        String[] quesArr = new String [ques1.size()];
        quesArr = ques1.toArray(quesArr);
        for(String s: quesArr){
            Collections.sort(ques1, new Comparator<String>() {

                @Override
                public int compare(String lhs, String rhs) {
                    // TODO Auto-generated method stub
                    return 0;
                }

            });
        System.out.println("All Array Questions:"+s);
            final TextView txtque = (TextView) findViewById(R.id.que_txt);
            final String text=ques1.get(j).toString();
            System.out.println("Array:"+text);
            txtque.setText(text);
        }

        try { 
          int i = 0;
        //  answ1=new ArrayList<String>(new HashSet<String>(answ1));
        JSONObject c = groups.getJSONObject(i);

        String answer = c.getString(TAG_ANSW);

        System.out.println("Checking ::"+answer);
        answ=answer;
        HashMap<String, String> map1 = new HashMap<String, String>();
        answ1.add(answer);
            System.out.println(" Answer array:"+answ1);
            String[] answArr = new String [answ1.size()];
            answArr = answ1.toArray(answArr);
            for(String A: answArr){
                Collections.sort(answ1, new Comparator<String>() {
                    @Override
                    public int compare(String s1, String s2) {
                        return s1.compareToIgnoreCase(s2);
                    }
                });
            System.out.println("All Array Answers:"+A);
            }

            final TextView txtRadio = (TextView) findViewById(R.id.rdtxt);
            btn_practicerg =(RadioGroup) findViewById(R.id.rdgroup);
            btn_practice1 = (RadioButton) findViewById(R.id.RB1);
             btn_practice1.setText(String.valueOf(answArr[0]));
            btn_practice2 = (RadioButton) findViewById(R.id.RB2);
            btn_practice2.setText(String.valueOf(answArr[1]));
            btn_practice3 = (RadioButton) findViewById(R.id.RB3);
            btn_practice3.setText(String.valueOf(answArr[2]));
            btn_practice4 = (RadioButton) findViewById(R.id.RB4);
            btn_practice4.setText(String.valueOf(answArr[3]));

            btn_practicerg.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(RadioGroup group, int checkedId) 
                {
                    RadioButton checkedRadioButton = (RadioButton) findViewById(checkedId);

                }
            });
             } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
            btn_practicerg.clearCheck();

            Button nextBtn = (Button) findViewById(R.id.nxt_btn);
            nextBtn.setOnClickListener(new Button.OnClickListener(){
            public void onClick(View v){
                 j++;
                 TextView txtque = (TextView) findViewById(R.id.que_txt);
                    txtque.setText(ques1.get(j).toString());                
                 k++;
                 btn_practice1.setText(answ1.get(k).toString());
                 k++;
                 btn_practice2.setText(answ1.get(k).toString());
                 k++;
                 btn_practice3.setText(answ1.get(k).toString());
                 k++;
                 btn_practice4.setText(answ1.get(k).toString());

            }
            });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:21:51.630

您将问题存储在 HashSet 中，这不会保留顺序。另外，您的比较器总是返回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:00:57.003

还有另一种更简单的方法我永远不会选择哈希集我发现它们非常复杂

创建一个包装类 class qa { String ques; 字符串和；}

现在创建一个此类 ArrayList 类型的数组列表并以这种方式填充值，您可以将所有数据放在一个地方，并且由于您是新手，因此可以简化您的任务。

# java - 每次我想调用 doInBackground() 时是否应该创建一个新的 Java SwingWorker 实例？

> ID：14475157
> 
> 赞同：5
> 
> 时间：2013-01-23T08:19:35.013
> 
> 标签：java, multithreading, swing

我的扩展 SwingWorker 类执行一个可能会重复发生的后台任务，该任务需要源自 GUI 的输入变量。

我看到 2 个编码选项：

1.  每次我使用它时都启动一个新的类实例并将变量传递给构造函数。我想我应该确保没有太多实例。如果有怎么办？多吨或其他方法？

2.  更新变量并再次调用执行？如果是这样，我如何确保我没有打扰？

这些选择之一是要走的路还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:36:17.833

SwingWorker 是非进入的，这意味着你不能再次执行它，就像线程一样。

来自 JavaDocs

> SwingWorker 仅设计为执行一次。多次执行 SwingWorker 不会导致调用 doInBackground 方法两次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T08:27:17.213

请使用选项 1。

不可变对象通常更容易使用。例如，您可以防止在工作人员仍在工作时更新变量的问题，并且您不必考虑内存可见性。

对象实例化在 Java 中相当便宜，所以这不会是性能问题，您可以在每次需要时创建一个新实例。

# asp.net - 水平定位控件和标签

> ID：14475162
> 
> 赞同：0
> 
> 时间：2013-01-23T08:19:57.947
> 
> 标签：asp.net

我问自己为什么要水平显示 TextBox 和 Label：

```
<tr>
    <td>
        <asp:TextBox ID="txtDateFrom" onkeypress="return CheckValid();"  runat="server"></asp:TextBox>
        <asp:Label ID="lblErrorBirthDay" runat="server" ForeColor="Red" Text="(***)" Visible="false"></asp:Label><asp:RequiredFieldValidator
            ID="RequiredFieldValidator3" runat="server" ErrorMessage="(*)" ControlToValidate="txtDateFrom"></asp:RequiredFieldValidator>
    </td>
</tr> 
```

它给出了结果：

`|__________________|(***)`

和这个

```
<tr>
    <td>
        <dx:ASPxDateEdit ID="txtDateFrom" runat="server" CssClass="txtLongerBlack12" ></dx:ASPxDateEdit>
        <asp:Label ID="lblErrorBirthDay" runat="server" ForeColor="Red" Text="(***)" Visible="false"></asp:Label><asp:RequiredFieldValidator
            ID="RequiredFieldValidator3" runat="server" ErrorMessage="(*)" ControlToValidate="txtDateFrom"></asp:RequiredFieldValidator>
    </td>
</tr> 
```

给

```
|__________________|
(***) 
```

我该怎么做才能使第二个剪辑也水平显示两个控件（DateEdit 和 Label）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:55:37.683

我猜想 ASPxDateEdit 控件正在输出一个块级 HTML 元素，例如 a `<div>`，这意味着`<span>`Label 的输出将在下面。您可以使用 CSS 来控制它，例如将两个元素都向左浮动。

# javascript - JavaScript 和继承中的私有静态

> ID：14475164
> 
> 赞同：5
> 
> 时间：2013-01-23T08:20:09.067
> 
> 标签：javascript

我了解私有静态机制在 javascript 中的工作原理；但这会影响继承。例如：

```
var Car = (function() {
    var priv_static_count = 0;
    return function() {
        priv_static_count = priv_static_count + 1;   
    }
})();
var SedanCar = function () {};
SedanCar.prototype = new Car();
SedanCar.prototype.constructor = SedanCar; 
```

有什么办法可以避免这个陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:25:24.600

首先，JavaScript 中没有“私有静态”之类的东西。您在这里使用的是一个简单的闭包，它由[立即调用函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)创建。

您的问题不太清楚，但我想您想计算创建的 Car 实例，但它不起作用，因为当您实例化子类时，计数器不会增加（问题 1）。相反，当您定义子类时，计数器只增加一次（问题 2）。

由于 JavaScript 具有基于原型的继承模型，因此您必须创建一个可以用作原型的对象。但我建议你不要调用父类的构造函数（这将解决问题的第二部分）。这是一种在 JavaScript 世界中随处使用的非常常见的模式（请参阅[Simple JavaScript Inheritance](http://ejohn.org/blog/simple-javascript-inheritance/)、[Backbone](http://backbonejs.org/)、[CoffeScript](http://coffeescript.org/)等），如果您不需要支持非常旧的浏览器 (IE6-8)，那么实现起来非常简单。它是这样的：

```
SedanCar.prototype = Object.create(Car.prototype) 
```

现在问题的第一部分很容易解决。每次实例化孩子时只需调用父构造函数。这也是一个相当不错的模式，并且它内置于许多其他语言（Java 等）中。在 JavaScript 中，您必须手动完成，如下所示：

```
var SedanCar = function () {
    // Parent class initialization
    Car.call(this /*, and, other, arguments, to, the, parent, constructor */)

    // Child class initialization
}; 
```

这将调用`this`绑定到新创建对象的父构造函数。父构造函数进行初始化，然后子构造函数分担工作。在您的示例中，父级将按照您的预期增加计数器。

# wix - 安装时更改文件名

> ID：14475166
> 
> 赞同：15
> 
> 时间：2013-01-23T08:20:18.900
> 
> 标签：wix, windows-installer

如果我有`A.txt`作为一个组件

我可以将其安装为`B.txt`（不同的名称，无论如何）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-23T16:40:24.220

尝试将 Name="b.txt" 添加到
`<File Id="testFile1" Name="testFile1.txt" Source="c:\TestFile1.txt" />`

# php - 如果不是循环，则生成随机数检查 db 列的值是否相同

> ID：14475168
> 
> 赞同：0
> 
> 时间：2013-01-23T08:20:23.267
> 
> 标签：php

我已经检查了很多关于循环的解决方案，但仍然不能适用于我的问题。尽管如此，仍然对循环感到困惑。我想**生成随机数**，然后**检查**生成的数字是否**等于表列的内容，如果它相同，它将再次生成，直到它没有相同的值。**

希望大家帮助我，所以我们开始吧。

我在数据库中有一个名为“list”的表，它的结构为**id**和**img** ，它包含的值为

**清单表：**

```
id | img
 1 |  1
 2 |  2
 3 |  3
 4 |  4 
```

**数字.php**

```
$new_array = array();
$query = "SELECT img FROM list";
$query = mysql_query($query);
while ($query_get = mysql_fetch_array($query)) {
    $new_array[] = $query_get[0]; //Store img values into an array
}

$rand = rand(1,5); //Generates random number 1 to 5
$search_r = array_search($rand, $new_array); //Checks if the random number has the same value to the array

while($search == "") { //Until random number gets number 5 it would stop looping
    $rand = rand(1,5);
}
echo $rand; //and echo the number 5 here. 
```

结果仍然是**我的浏览器上的不停加载屏幕**

那么我有这段代码来确定随机数和数组是否具有相同的值。但它只擅长一个循环。

```
if (array_search($rand,$new_array)) {
    echo "random number has the same value inside the array" . $rand;
} else {
    echo "random number does not have the same value inside an array" . $rand;
} 
```

简而言之，我的表**img 中的值是 1,2,3 和 4**，我正在**生成数字 1 到 5**。在生成的数字**输出 5 之前，它会 echo**。如果生成的数字得到**1 到 4 ，它将再次生成，直到得到 5**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:24:26.500

使用`do...while`循环：

```
do {
    $rand = rand(1, 5);
} while (in_array($rand, $new_array)); 
```

虽然我不确定为什么需要生成这样的随机数。为什么需要这个号码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:08:39.657

在这种情况下，递归函数可能很有用。

1.  内部函数创建一个随机字符串
2.  在数据库中检查它
3.  如果存在则再次移动调用递归函数
4.  否则返回字符串

# bash - 如何验证十进制数字？

> ID：14475170
> 
> 赞同：3
> 
> 时间：2013-01-23T08:20:43.080
> 
> 标签：bash, shell

嗨，我正在处理一项任务并卡在这部分，我如何验证 shell 中的十进制数字/数字？

它可以接受数字，但不能接受十进制数字。我希望它能够接受两者。

这是我到目前为止所拥有的

```
if echo $value | egrep '^[0-9]+$' >/dev/null 2>&1 ; then
echo "OK"
else
echo "There Is An Error"
echo "Please Try Again"
fi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:40:15.593

您可以使用 bash 来检查表达式，而不是使用 grep：

```
#!/bin/bash

value=98.23
if [[ "$value" =~ ^[0-9]+(\.[0-9]+)?$ ]]
then
   echo good
else
   echo bad
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:28:12.187

改用这个正则表达式 `^[0-9]*(\.[0-9]+)?$`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T03:08:52.087

使用 bash 的模式匹配：

```
shopt -s extglob
while read line; do
    if [[ $line == ?([-+])+([0-9])?(.*([0-9])) ]] ||
       [[ $line == ?(?([-+])*([0-9])).+([0-9]) ]]
    then
        echo "$line is a number"
    else 
        echo "$line NOT a number"
    fi
done << END
1
-1
a
1a
1.0
1.
.0
.
-.0
+
+0
+.0
END 
```

输出

```
1 is a number
-1 is a number
a NOT a number
1a NOT a number
1.0 is a number
1\. is a number
.0 is a number
. NOT a number
-.0 is a number
+ NOT a number
+0 is a number
+.0 is a number 
```

模式：

*   可选符号，后跟一个或多个数字，后跟可选的点和零个或多个数字
*   可选符号，后跟零个或多个数字，后跟一个强制点，后跟一个或多个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-22T13:39:06.743

试试这个：它也检查负数和十进制数。 

```
echo $value | egrep '^-[0-9]+$|^[0-9]+$|^[0-9].[0-9]+$|^-[0-9].[0-9]+$' > /dev/null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T08:28:54.620

这个怎么样：

```
if [ ! -z $(echo "$value" | grep -o "^[1-9][0-9]*\.\?[0-9]*$") ]; then echo ok; fi 
```

`-z`测试空字符串。`[ ! -z "" ]`因此，如果给定字符串以匹配模式开头，则否定将被满足。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T12:41:27.297

在标准外壳（`[[`非标准）`test`中将为您进行验证。

```
if test "$value" -eq 0 -o "$value" -ne 0 2> /dev/null; then
  : # $value is an integer
else
  : # $value is not an integer
fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-24T08:45:43.373

适用于 Bash 3.0 和 4.0。

```
isInteger() {
    [[ $1 =~ ^[0-9]+$ ]];
}
isDecimal() {
    [[ $1 =~ ^[0-9]+\.[0-9]+$ ]] && ! isInteger $1;
}

computer:~ # isDecimal 123 && echo true || echo false
false
computer:~ # isDecimal 12.34 && echo true || echo false
true
computer:~ # isDecimal 12.34a && echo true || echo false
false
computer:~ # isDecimal 0.0000001 && echo true || echo false
true 
```

要检查是否为数字，只需针对这两个函数进行测试。

# symfony - JMSSerializerBundle 复杂生成值

> ID：14475171
> 
> 赞同：6
> 
> 时间：2013-01-23T08:20:44.183
> 
> 标签：symfony, fosrestbundle, jmsserializerbundle

我需要在 symfony 2 上为我的网站实现 RESTful API，所以我使用 FOSRestBundle + JMSSerializerBundle

我的实体有这样的序列化程序 yml：

```
Acme\DemoBundle\Entity\Product:
    exclusion_policy: ALL
    accessor_order: custom
    custom_accessor_order: [id, title]
    properties:
        id:
            expose: true

        title:
            expose: true

    virtual_properties:
        getMainPhoto:
            serialized_name: photo 
```

问题是`getMainPhoto`将我的网址返回到**全尺寸**图像。我想在向 api 客户端发送响应之前预处理这个 url，我可以在其中生成新的 url 来调整此类图像的大小版本。我已经在 sf2 中有可以完成这项工作的服务：

```
$resized_url = $someService->generateResizedUrl($item->getMainPhoto(), 640, 480); 
```

但我不知道如何将这项服务与 JMSSerializer 一起使用。也许 FOSRestBundle\JMSSerializerBundle 在它发送响应之前有一些回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:21:47.623

看看[文档](http://jmsyst.com/libs/serializer#documentation)。您可以使用许多事件和/或注释来挂钩序列化过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T21:02:39.093

您可以排除原始 url，然后使用[http://jmsyst.com/libs/serializer/master/event_system#serializer-post-serialize](http://jmsyst.com/libs/serializer/master/event_system#serializer-post-serialize)事件添加调整大小的 url。

您必须编写一个侦听器，在“产品”实例被序列化时进行侦听。

# python - 使用 Glade + Python 的对象类型“GtkGrid”无效

> ID：14475174
> 
> 赞同：0
> 
> 时间：2013-01-23T08:21:05.330
> 
> 标签：python, python-2.7, gtk

我正在尝试为我目前正在编写的日志解析器应用程序制作一个简单的 gui，我在使用 glade 设计整个事情时遇到了一些麻烦。该脚本在 python 2.7.3 中，机器上安装了 GTK。

```
<object class="GtkGrid" id="grid1"> 
```

这可能是造成麻烦的原因，但我无法找出原因。父母是一个窗口。我想在调整窗口大小后使用网格进行相对放置。如果我使用“布局”或“固定”元素而不是网格，一切正常，但每个元素的放置会比使用网格更麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:51:51.973

[GtkGrid](http://developer.gnome.org/gtk3/stable/GtkGrid.html) is available since GTK 3, so make sure your application uses GTK 3 (using [PyGObject](http://live.gnome.org/PyGObject)), and not GTK 2 (using PyGTK).

Here's the official [Python GTK+ 3 tutorial](http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html).

# php - PHP可以执行终端命令吗

> ID：14475175
> 
> 赞同：0
> 
> 时间：2013-01-23T08:21:12.630
> 
> 标签：php

> **可能重复：**
> [使用 PHP 执行 linux 命令](https://stackoverflow.com/questions/503633/executing-linux-commands-with-php)

我有一个创建文件的 PHP 文件`.xfdf`我想知道 PHP 是否有一种执行命令的方式，就像您在终端窗口中键入的那样？创建文件后，我必须运行以下命令`.xfdf`以生成`.pdf`文件

```
pdftk /var/www/pdf/TimeCard.pdf fill_form /var/www/pdf/results/Brandon_01_23_13.xfdf output /var/www/pdf/results/testNew.pdf flatten 
```

该命令需要能够接受 PHP 变量，以便为用户定制。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:24:21.087

是的，您可以使用[exec()](http://php.net/manual/en/function.exec.php)、[pcntl_exec()](http://php.net/manual/en/function.pcntl-exec.php)、[system()](http://php.net/manual/en/function.system.php)。

```
$command = 'pdftk /var/www/pdf/TimeCard.pdf fill_form /var/www/pdf/results/Brandon_01_23_13.xfdf output /var/www/pdf/results/testNew.pdf flatten';
exec($command); 
```

使用这些命令时要非常小心，它们非常有用/强大，但因此，黑客可能会通过它获得对整个服务器的访问权限（取决于权限，但足以破坏您的站点）。

如果您需要发送用户上传的文件名/文本，请检查它们（例如检查文件路径是否在正确的位置，而不是`../../../something.pdf`检查 MIME 类型和扩展名）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:24:25.627

是的，您可以使用：

1.  [系统](http://es1.php.net/manual/en/function.system.php)
2.  [执行](http://es1.php.net/manual/en/function.exec.php)
3.  [通路](http://es1.php.net/manual/en/function.passthru.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T08:25:56.840

根据您的具体要求，您可以使用`exec()`,`system()`或`shell_exec()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T08:23:42.813

使用[system()](http://php.net/manual/en/function.system.php)或[eval()](http://at2.php.net/manual/en/function.eval.php)函数。

但要确保用户不能注入任意命令！

# .net-micro-framework - 在 Camera.PictureCaptured 之后重新启动 Camera.StartStreamingBitmaps

> ID：14475177
> 
> 赞同：2
> 
> 时间：2013-01-23T08:21:30.373
> 
> 标签：.net-micro-framework, .net-gadgeteer

我有一个 .Net Gadgeteer 相机应用程序，可将位图从相机流式传输到屏幕。按一下按钮，它会停止从相机流式传输位图，拍照，将其写入 SD 卡，然后重新启动流式传输。这是代码的简化版本（没有保存到 SD 卡的东西）：

```
using Microsoft.SPOT;
using GT = Gadgeteer;
using Gadgeteer.Modules.GHIElectronics;
namespace SimpleStopStreamingApp
{
    public partial class Program
    {
        void ProgramStarted()
        {
            camera.CameraConnected += new Camera.CameraConnectedEventHandler(camera_CameraConnected);
            camera.BitmapStreamed += new Camera.BitmapStreamedEventHandler(camera_BitmapStreamed);
            camera.PictureCaptured += new Camera.PictureCapturedEventHandler(camera_PictureCaptured);
            button.ButtonPressed += new Button.ButtonEventHandler(button_ButtonPressed);
        }
        void camera_CameraConnected(Camera sender)
        {
            camera.StartStreamingBitmaps(new Bitmap(camera.CurrentPictureResolution.Width, camera.CurrentPictureResolution.Height));
        }
        void camera_BitmapStreamed(Camera sender, Bitmap bitmap)
        {
            display_T35.SimpleGraphics.DisplayImage(bitmap, 0, 0);
        }
        void button_ButtonPressed(Button sender, Button.ButtonState state)
        {
            camera.StopStreamingBitmaps();
            camera.TakePicture();
        }
        void camera_PictureCaptured(Camera sender, GT.Picture picture)
        {
            camera.StartStreamingBitmaps(new Bitmap(camera.CurrentPictureResolution.Width, camera.CurrentPictureResolution.Height));
        }
    }
} 
```

但是，当我尝试重新启动流式传输（在 PictureCaptured 事件处理程序中）时，我得到了异常。

```
#### Exception System.Exception - 0xffffffff (1) ####
#### Message: 
#### GHI.Premium.USBHost.USBH_Webcam::StartStreaming_Internal [IP: 0000] ####
#### GHI.Premium.USBHost.USBH_Webcam::StartStreaming [IP: 0005] ####
#### Gadgeteer.Modules.GHIElectronics.Camera::StartStreamingBitmaps [IP: 007e] ####
#### Gadgeteer.Modules.GHIElectronics.Camera::OnPictureCapturedEvent [IP: 0037] ####
#### System.Reflection.MethodBase::Invoke [IP: 0000] ####
#### Gadgeteer.Program::DoOperation [IP: 001a] ####
#### Microsoft.SPOT.Dispatcher::PushFrameImpl [IP: 0054] ####
#### Microsoft.SPOT.Dispatcher::PushFrame [IP: 001a] ####
#### Microsoft.SPOT.Dispatcher::Run [IP: 0006] ####
#### Gadgeteer.Program::Run [IP: 0020] #### 
```

`A first chance exception of type 'System.Exception' occurred in GHI.Premium.USBHost.dll Error invoking method "Gadgeteer.Modules.GHIElectronics.Camera" (check arguments to Program.BeginInvoke are correct)`

（注意，如果我将位图存储为实例变量并将其传递给对 StartStreamingBitmaps 的两个调用，而不是每次都创建一个新的位图，我会得到同样的异常。）

这是怎么回事？应该如何停止相机流式传输以捕获和图像，然后重新启动它流式传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:20:18.497

这几乎听起来像是`StartStreamingBitmaps`预计将在一个线程上运行（由注释到`check arguments to Program.BeginInvoke are correct`）。

看着这个：

```
void camera_PictureCaptured(Camera sender, GT.Picture picture)
{
  camera.StartStreamingBitmaps(new Bitmap(camera.CurrentPictureResolution.Width, camera.CurrentPictureResolution.Height));
} 
```

我对这个**Gadgeteer**模块一无所知，但如果你正确连接它，我认为你的 new`GT.Picture`已经包含在`picture`传入的参数中。

**在相机完成拍摄后**，您几乎似乎正在尝试从相机流式传输图像。

您可以编辑您的帖子并提供更多详细信息吗？你能验证这个`camera_PictureCaptured`事件是你的异常被抛出的地方吗？通过将事件处理程序修改为：

```
void camera_PictureCaptured(Camera sender, GT.Picture picture)
{
  try
  {
    camera.StartStreamingBitmaps(new Bitmap(camera.CurrentPictureResolution.Width, camera.CurrentPictureResolution.Height));
  } catch (Exception err)
  {
    throw new Exception("PictureCaptured: " + err.Message);
  }
} 
```

如果这个事件处理程序不是引发异常的那个，请尝试`try...catch`在您的其他事件处理程序中放置类似的例程，直到您发现真正导致问题的事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T21:11:03.240

停止流式传输位图时尝试删除回调：

```
void button_ButtonPressed(Button sender, Button.ButtonState state)
{
    camera.BitmapStreamed -= new Camera.BitmapStreamedEventHandler(camera_BitmapStreamed);
    camera.StopStreamingBitmaps();
    camera.TakePicture();
}

void camera_PictureCaptured(Camera sender, GT.Picture picture)
{
    camera.BitmapStreamed += new Camera.BitmapStreamedEventHandler(camera_BitmapStreamed);
    camera.StartStreamingBitmaps(new Bitmap(camera.CurrentPictureResolution.Width, camera.CurrentPictureResolution.Height));
} 
```

# symfony - FOSUserBundle 的多实体管理器

> ID：14475180
> 
> 赞同：40
> 
> 时间：2013-01-23T08:21:36.117
> 
> 标签：symfony, doctrine-orm, fosuserbundle

如果相当容易的话，在 Symfony 中使用基于 URL 的不同实体管理器/连接。使用以下路由配置

```
connection:
    pattern:  /a/{connection}
    defaults: { _controller: AcmeTestBundle:User:index } 
```

并来自以下食谱；

[如何使用多个实体管理器和连接](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

我的控制器看起来像这样；

```
class UserController extends Controller
{
    public function indexAction($connection)
    {

        $products = $this->get('doctrine')
            ->getRepository('AcmeStoreBundle:Product', $connection)
            ->findAll()
        ;
        .................. 
```

我将能够从不同的 em/connection/database 获取产品信息。

现在，如果我在我的路由中添加这样的东西；

```
login:
    pattern:  /a/{connection}/login
    defaults: { _controller: FOSUserBundle:Security:login } 
```

如何轻松使*登录*以使用连接变量中定义的*连接？*

此设置假定每个数据库都有自己的用户登录信息（fos_user 表）。

**编辑：更新的路由信息**

**编辑2：**

不过，我还是 PHP/Symfony/Doctrine 的新手，所以如果我在这里完全错了，请原谅我。我试图在*FOS\UserBundle\Doctrine\UserManager*手动设置连接。下面是类的构造函数

```
//
use Doctrine\Common\Persistence\ObjectManager;
//

public function __construct(EncoderFactoryInterface $encoderFactory, CanonicalizerInterface $usernameCanonicalizer, CanonicalizerInterface $emailCanonicalizer, ObjectManager $om, $class)
{
    parent::__construct($encoderFactory, $usernameCanonicalizer, $emailCanonicalizer);

    $this->objectManager = $om;
    $this->repository = $om->getRepository($class);

    $metadata = $om->getClassMetadata($class);
    $this->class = $metadata->getName();
} 
```

在控制器中，我们可以使用以下方法将 em 更改为 'testing'

```
$em = $this->get('doctrine')->getManager('testing');
$repository = $this->get('doctrine')->getRepository($class, 'testing') 
```

为此，我将代码更改为以下代码以使用 EntityManager 而不是 ObjectManager。

```
//
//use Doctrine\Common\Persistence\ObjectManager;
use Doctrine\ORM\EntityManager;
//

public function __construct(EncoderFactoryInterface $encoderFactory, CanonicalizerInterface $usernameCanonicalizer, CanonicalizerInterface $emailCanonicalizer, EntityManager $om, $class)
{
    parent::__construct($encoderFactory, $usernameCanonicalizer, $emailCanonicalizer);

    $this->objectManager = $om;
    $this->repository = $om->getRepository($class);

    $metadata = $om->getClassMetadata($class);
    $this->class = $metadata->getName();
} 
```

我的应用程序运行良好，没有错误。

从它与控制器的工作方式来看，我尝试通过向该行添加一个参数来更改连接，但它仍然使用默认连接。

```
$this->repository = $om->getRepository($class, 'testing'); 
```

我还能在这里错过什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-28T10:39:26.933

如您所见，FOSUserBundle 只能有一个 EntityManager。您可以从设置**orm.xml中看到它**

```
<service id="fos_user.entity_manager" factory-service="doctrine" factory-method="getManager" class="Doctrine\ORM\EntityManager" public="false">
    <argument>%fos_user.model_manager_name%</argument>
</service> 
```

参数 %fos_user.model_manager_name% 在设置中指定为 model_manager_name

```
fos_user:
    db_driver:            ~ # Required
    user_class:           ~ # Required
    firewall_name:        ~ # Required
    model_manager_name:   ~ 
```

因此，构造函数中出现了 EntityManager 的实例，它不接受 getRepository 中的第二个参数。因此，标准的 FOSUserBundle 只能用于一个数据库。

* * *

但这不是故事的结束，它是 Symfony :) 我们可以写出 UserManager，它可以使用不同的数据库连接。在设置中看到 fos_user.user_manager 是 fos_user.user_manager.default。我们在 orm.xml 中找到它

```
<service id="fos_user.user_manager.default" class="FOS\UserBundle\Doctrine\UserManager" public="false">
    <argument type="service" id="security.encoder_factory" />
    <argument type="service" id="fos_user.util.username_canonicalizer" />
    <argument type="service" id="fos_user.util.email_canonicalizer" />
    <argument type="service" id="fos_user.entity_manager" />
    <argument>%fos_user.model.user.class%</argument>
</service> 
```

我们可以重写这个类来添加一个额外的参数来决定你想要使用什么样的连接。通过ManagerFactory，您可以获得所需的ObjectManager。我为这两个数据库写了一个简单的例子（如果你需要更多的数据库，你可以为这个服务编写你的工厂）

在 services.yml 中定义你的服务

```
services:
    acme.user_manager.conn1:
        class: Acme\DemoBundle\Service\UserManager
        public: true
        arguments:
            - @security.encoder_factory
            - @fos_user.util.username_canonicalizer
            - @fos_user.util.email_canonicalizer
            - @doctrine
            - 'conn1_manager'
            - %fos_user.model.user.class%

    acme.user_manager.conn2:
        class: Acme\DemoBundle\Service\UserManager
        public: true
        arguments:
            - @security.encoder_factory
            - @fos_user.util.username_canonicalizer
            - @fos_user.util.email_canonicalizer
            - @doctrine
            - 'conn2_manager'
            - %fos_user.model.user.class% 
```

你的经理

```
/**
 * Constructor.
 *
 * @param EncoderFactoryInterface $encoderFactory
 * @param CanonicalizerInterface  $usernameCanonicalizer
 * @param CanonicalizerInterface  $emailCanonicalizer
 * @param RegistryInterface       $doctrine
 * @param string                  $connName
 * @param string                  $class
 */
public function __construct(EncoderFactoryInterface $encoderFactory, CanonicalizerInterface $usernameCanonicalizer,
                            CanonicalizerInterface $emailCanonicalizer, RegistryInterface $doctrine, $connName, $class)
{
    $om = $doctrine->getEntityManager($connName);
    parent::__construct($encoderFactory, $usernameCanonicalizer, $emailCanonicalizer, $om, $class);
}

/**
 * Just for test
 * @return EntityManager
 */
public function getOM()
{
    return $this->objectManager;
} 
```

和简单的测试

```
/**
 * phpunit -c app/ src/Acme/DemoBundle/Tests/FOSUser/FOSUserMultiConnection.php
 */
class FOSUserMultiConnection extends WebTestCase
{
    public function test1()
    {
        $client = static::createClient();

        /** @var $user_manager_conn1 UserManager */
        $user_manager_conn1 = $client->getContainer()->get('acme.user_manager.conn1');

        /** @var $user_manager_conn2 UserManager */
        $user_manager_conn2 = $client->getContainer()->get('acme.user_manager.conn2');

        /** @var $om1 EntityManager */
        $om1 = $user_manager_conn1->getOM();
        /** @var $om2 EntityManager */
        $om2 = $user_manager_conn2->getOM();

        $this->assertNotEquals($om1->getConnection()->getDatabase(), $om2->getConnection()->getDatabase());
    }
} 
```

对不起，答案太大了。如果有什么不清楚到最后，我把代码放在[github上](https://github.com/i4got10/symfony-standard/tree/fos_multi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T10:29:41.570

FosUserBundle 不能拥有多个实体管理器。

我发现使用 2 个数据库的最简单方法是覆盖 SecurityController 的“checkLoginAction”。

```
<?php
//in myuserBunle/Controller/SecurityController.php

class SecurityController extends BaseController
{

    /**
    * check the user information 
    */

    public function checkLoginAction(Request $request){
            $username = \trim($request->request->get("_username"));
            $user    =   $this->container->get('fos_user.user_manager')->findUserByUsername($username);
        $userDB2 =   .....

            $password = \trim($request->request->get('_password'));

            if ($user) {
              // Get the encoder  for the users password
              $encoder      =  $this->container->get('security.encoder_factory')->getEncoder($user);
              $encoded_pass =  $encoder->encodePassword($password, $user->getSalt());

              if (($user->getPassword() == $encoded_pass) || $this->checkSecondEM()) {
                $this->logUser($request, $user);
                return new RedirectResponse($this->container->get('router')->generate($this->container->get('session')->get('route'), $request->query->all() ));
              } else {
                // Password bad
                  return parent::loginAction($request);   
              }
            } else {
              // Username bad
                return parent::loginAction($request);   
            }
        }

} 
```

# mysql - SQL 算法尽可能接近线性时间并调整 select 语句

> ID：14475182
> 
> 赞同：1
> 
> 时间：2013-01-23T08:21:39.173
> 
> 标签：mysql, select, big-o

我在 Ubuntu 上使用 MySQL 5.5 版。
我的数据库表设置如下：

```
DDL：

    创建表'asx'（
        '代码' char(3) NOT NULL,
        '高'十进制（9,3），
        '低'十进制（9,3），
        '关闭'十进制（9,3），
        'histID' int(11) NOT NULL AUTO_INCREMENT,
        主键（'histID'），
        唯一键“代码”（“代码”）
    )

    创建表'asxhist'（
       '日期' 日期不为空，
       '平均'十进制（9,3），
       'histID' int(11) 非空，
       主键（'日期'，'histID'），
       KEY 'histID' ('histID'),
       约束“asxhist_ibfk_1”外键（“histID”）参考“asx”（“histID”）
       更新级联
    )

t1：

| 代码 | 高 | 低 | 关闭 | histID（主键）|
| 阿克斯 | 10.000 | 9.500 | 9.800 | 1      
| 抓住 | 42.000 | 41.250 | 41.350 | 2      

t2：

| 日期 | 平均 | histID (外键) |
| 2013-01-01| 10.000 | 1 |
| 2013-01-01| 39.000 | 2 |
| 2013-01-02| 9.000 | 1 |
| 2013-01-02| 38.000 | 2 |
| 2013-01-03| 9.500 | 1 |
| 2013-01-03| 39.500 | 2 |
| 2013-01-04| 11.000 | 1 |
| 2013-01-04| 38.500 | 2 |

我正在尝试完成一个产生此结果的选择查询：

| 代码 | 高 | 低 | 关闭 | asxhist.average |
| 阿克斯 | 10.000 | 9.500 | 9.800 | 11.000, 9.5000 |
| 抓住 | 42.000 | 41.250 | 41.350 | 38.500,39.500 |

```

表 2 中的最新信息与表 1 以 csv 格式返回。我设法做到了这一点：

```
 SELECT code, high, low, close, 
    (SELECT GROUP_CONCAT(DISTINCT t2.average ORDER BY date DESC SEPARATOR ',') FROM t2 
    WHERE t2.histID = t1.histID)
    FROM t1; 
```

不幸的是，这会返回与 hID 关联的所有值。我正在查看 xaprb.com 的 firstleastmax-row-per-group-in-sql 解决方案，但我整天都在敲我的头，轻微的头晕似乎正在削弱我理解我应该如何使用它的能力益处。如何将结果限制为最近的 5 个值，并考虑到表的大小最终将是兆字节，尝试保持在 O(n ² ) 或更少？（或者我可以吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:42:36.717

Temporary work around using `SUBSTRING_INDEX` and not a feasible solution for huge data

```
SELECT code, high, low, close,
    (SELECT SUBSTRING_INDEX(GROUP_CONCAT(asxhist.average), ',', 3)
        FROM asxhist
        WHERE asxhist.histID = asx.histID
        ORDER BY date DESC)
FROM asx; 
```

From what I gather Limit option in GROUP_CONCAT is still under feature-request.

Also on stackoverflow [hack MySQL GROUP_CONCAT](https://stackoverflow.com/questions/1522509/how-to-hack-mysql-group-concat-to-fetch-a-limited-number-of-rows)

# tsql - 将 Navision 过滤器转换为 SQL，其中

> ID：14475184
> 
> 赞同：0
> 
> 时间：2013-01-23T08:21:53.637
> 
> 标签：tsql, filter, navision, dynamics-nav

我在下一个格式的表格中有一个字段，其中`1_2..1_10|1_6|1_8|`包括`1_2..1_10`和其他。`1_2``1_3`

我如何选择数据，在哪里`number = 1_3`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:16:50.240

**第一个建议：**获得修改数据库结构的权利，并弄清楚如何更好地存储 Navision 字符串。

**第二个建议：** CLR

我假设您对这些概念中的每一个都比较熟悉。如果你不是，他们在整个网络上都有很好的记录。

我的方法是使用 CLR 函数，因为 C# 很容易处理一些在 SQL 中很尴尬的高级事物。伪行走会像这样。

**执行**

1.  创建一个 CLR 函数并在 SQL 服务器实例上实现它。
2.  使用 SQL 结果集更改查询以根据导航过滤器值“1_3”查找 CLR 函数的返回值。

**CLR 功能逻辑**

1.  创建 ac# 函数，该函数接受过滤器字段的值并返回一个字符串值。
2.  CLR 函数将过滤器字段按 | char 成一个列表。
3.  在 CLR 函数内部创建第二个列表。遍历第一个列表。当您找到一个范围字符串时，将其拆分为“..”并手动将范围之间的每个可用值添加到第二个列表中。当您找到一个不是范围的值时，只需将其添加到第二个列表中。
4.  在“|”上将第二个列表的内容连接在一起 性格。
5.  返回连接的值。

**SQL 逻辑**

```
SELECT Field1,Field2...CLRFunctionName(FilterValue) AS FixedFilterValue FROM Sometable WHERE FixedFilterValue LIKE '%1_3%'; 
```

# mysql - 这个数据库转储设计可以吗？

> ID：14475193
> 
> 赞同：0
> 
> 时间：2013-01-23T08:22:23.370
> 
> 标签：mysql, sql, dump, opencsv

我编写了一个 Java 程序来执行以下操作，并希望对我的设计提出意见：

1.  从 CSV 文件中读取数据。该文件是一个包含 6 列的数据库转储。
2.  将数据写入 MySQL 数据库表。

数据库表如下：

```
 CREATE TABLE MYTABLE
    (
   ID int PRIMARY KEY not null auto_increment,
   ARTICLEID int,
   ATTRIBUTE varchar(20),
   VALUE text,
   LANGUAGE smallint,
   TYPE smallint
    ); 
```

1.  我创建了一个对象来存储每一行​​。
2.  我使用 OpenCSV 将每一行读入 1 中创建的对象列表。
3.  迭代这个对象列表并使用 PreparedStatements，我将每一行写入数据库。

该解决方案应该高度适应需求的变化，并展示出良好的方法、稳健性和代码质量。

这个设计好看吗？

我尝试的另一种方法是使用 'LOAD DATA LOCAL INFILE' sql 语句。那会是更好的选择吗？

编辑：我现在正在使用 OpenCSV，它正在处理在实际字段中使用逗号的问题。现在的问题是没有写入数据库。谁能告诉我为什么？

```
public static void exportDataToDb(List<Object> data) {
    Connection conn = connect("jdbc:mysql://localhost:3306/datadb","myuser","password");

    try{
        PreparedStatement preparedStatement = null;
        String query = "INSERT into mytable (ID, X, Y, Z) VALUES(?,?,?,?);";
        preparedStatement = conn.prepareStatement(query);

        for(Object o : data){   
            preparedStatement.setString(1, o.getId());
            preparedStatement.setString(2, o.getX());
            preparedStatement.setString(3, o.getY());
            preparedStatement.setString(4, o.getZ());
        }
        preparedStatement.executeBatch();

    }catch (SQLException s){
        System.out.println("SQL statement is not executed!");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:50:54.010

从纯粹的算法角度来看，除非您的源 CSV 文件很小，否则最好

1.  准备你的插入语句
2.  开始交易
3.  从中加载一行（或几行）
4.  将小批量插入数据库
5.  返回 3\. 虽然还有一些行
6.  犯罪

这样，您可以避免将整个转储加载到内存中。

但基本上，您可能最好使用`LOAD DATA`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:02:45.193

如果没有。行数很大，那么代码将在第 2 步失败并出现内存不足错误。您需要找出一种方法来获取块中的行并为该块执行带有准备好的语句的批处理，继续直到处理完所有行。这将适用于任何否。行数以及批处理将提高性能。除此之外，我认为设计没有任何问题。

# javascript - jQuery mobile在过渡后禁用垂直滚动

> ID：14475194
> 
> 赞同：1
> 
> 时间：2013-01-23T08:22:23.807
> 
> 标签：javascript, html, css, jquery-mobile, jquery-events

我有一个关于在 jQuery mobile 中滚动的问题。我试图在左侧获得一个垂直导航栏，可以通过页面标题中的按钮展开或折叠它。所以我有如下命名的容器：

```
#navbar |  #header (with Button #showNavBar)
        |  #content
        |
        |  #footer 
```

起初，#navbar 在我的内容区域后面（带有页眉和页脚）。通过单击按钮#showNavBar，我正在执行以下操作：

```
 header.animate({
           left: "200px"                  
        }, { duration: 300, queue: false });
 content.animate({
           left: "200px"
        }, { duration: 300, queue: false }); 
```

所以用户可以看到左侧的导航栏。至此，一切正常。但是麻烦开始了。现在可以滚动到右侧以查看完整的内容区域。但是无法滚动标题...

有没有人提示我如何避免动画后的 x 滚动？我已经尝试过“溢出-x：隐藏！重要；” 到内容容器和正文，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:02:25.970

尝试

```
 $(document).delegate('.ui-content', 'touchmove', false);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:38:25.553

好的，重新考虑整个问题后，我只是缩小了身体的宽度，因此没有必要滚动内容区域。

这是我现在的做法。身体在动画中获得了新的宽度。

```
var viewport = {
    width  : $(window).width(),
    height : $(window).height()
};

function openme() { 
    $(function () {
        topbar.animate({
           left: "200px"                  
        }, { duration: 300, queue: false });
        pagebody.animate({
           left: "200px", width: (parseInt(viewport['width']) - 200) + "px", 
        }, { duration: 300, queue: false });

      console.log("open me" + (parseInt(viewport['width']) - 200) + "px");
    });
}

function closeme() {
    var closeme = $(function() {
        topbar.animate({
            left: "0px"
        }, { duration: 180, queue: false });
        pagebody.animate({
            left: "0px", width: "100%",
        }, { duration: 180, queue: false });

        console.log("close me");
    });
} 
```

希望这对任何人都有帮助。感谢瑞秋如此耐心并给了我帮助！

# ios - 如何创建线程来检查时间？

> ID：14475195
> 
> 赞同：0
> 
> 时间：2013-01-23T08:22:28.933
> 
> 标签：ios, grand-central-dispatch, nsthread

我必须设置一个时间来每天两次检查来自服务器的更新数据，假设是上午 9 点和晚上 9 点，但我不知道该怎么做。

创建一个线程，每次运行并使用设置检查当前时间，如果它们相等，那么任务呢？这种方式好不好？我认为这是糟糕的表现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:42:58.320

也许当您的应用程序启动时，您可以获得当前时间（也可以获得当前时间的 timeInterval，称为 timeInterval0）`[NSDate date]`，如果您的当前时间 < 今天上午 9:00，您可以获得今天上午 9:00 的 timeInterval，称为 timeInterval1。然后你可以得到现在和你的目标时间之间的秒数，然后使用 NSTimer 调用你的方法，延迟是秒之间的时间。

在您的方法中，您可以检查更新，并且您还必须如上所述计算下一个 9:00 之间的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:35:46.100

使用线程，但不是每秒检查一次，如果它相等。你可以使用 NSNotification。当时间相同时，它会发送通知以获取数据。

您可以阅读：[iOS 定时后台处理](https://stackoverflow.com/questions/6245763/ios-timed-background-processing)

也可以通过本教程：http: [//mobile.tutsplus.com/tutorials/iphone/ios-multitasking-local-notifications/](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-local-notifications/)

我也在读书。对我来说也有新的东西。最好的是 NSLocalNotifications。看看这个：[提醒应用程序](https://stackoverflow.com/questions/8892619/creating-a-time-based-reminder-app-in-iphone)

本地通知的文档：[本地通知](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)

# jquery - 在使用 Codeflex 的多列组合框中根据所选记录单击箭头时选择页面索引

> ID：14475201
> 
> 赞同：0
> 
> 时间：2013-01-23T08:23:15.627
> 
> 标签：jquery, asp.net-mvc-4, jquery-flexbox

我在我的应用程序中将 Flexbox 用于多个列网格。当我选择了一条记录然后单击箭头时，我希望所有记录和页面索引应该显示当前选定的值。

**脚步**

**首先**，单击箭头并显示所有记录，然后我已移至第二页索引。（附加屏幕截图 - Screen-1.png） ![屏幕-1](../Images/3cb4fd394f9c1a9a95e9b084c8d29a68.png)

**其次**，然后我选择了页面索引 2 上的记录（id - 9）。然后按照屏幕截图单击箭头。这里我显示的是整个记录，而不是仅显示选定的记录。（附加的屏幕截图 - Screen-2.png） ![屏幕-2](../Images/ce1080731efd7f1bf7f9ac47fc762153.png)

**第三**，当我单击箭头时，它会显示我的第一个索引而不是我的已选择记录所在的第二个索引。所以在这里我想自动选择索引 2..（附加的屏幕截图 - Screen-3.png） ![屏幕-3](../Images/3b2d4a518ad5e718ca59a5fd40bddbd0.png)

等待你的答复。

# zend-framework2 - Zend Framework 2 - 如何更改控制器插件中的视图脚本？

> ID：14475202
> 
> 赞同：2
> 
> 时间：2013-01-23T08:23:31.870
> 
> 标签：zend-framework2

我对 Zend Framework 2 有疑问。

我想为每个操作提供 2 个视图脚本，以显示适用于 PC 和智能手机的视图。我知道如何更改布局：

```
$viewModel->setTemplate(layout_path) 
```

但我不知道如何更改视图脚本。

我在索引视图文件夹中有以下文件`Application/view/application/index`，用于`IndexController`：

```
index.php  (view file for PC)

index_sp.php  (view file for smartphone) 
```

如何`index_sp.php`在控制器或控制器插件中更改视图脚本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T11:43:50.767

If you want to change the actual layout view file you can do this inside your controller:

```
// example to change base layout for ajax requests
if($this->getRequest()->isXmlHttpRequest()) {
    $this->layout('layout/ajax-layout');
} 
```

If you want to change the view used by the current view model / action you can do this inside your controller/action:

```
$viewModel = new ViewModel(array(
    'form'      => $form
    'something' => $something
));
$viewModel->setTemplate('mymodule/newview.phtml');

return $viewModel; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T10:10:25.897

```
public function doSomethingCrazyAction()    {
    $view = new ViewModel(array(
        'message' => 'Hello world',
    ));

    // This is the way to change render(view)..
    $view->setTemplate('modulename/controllername/phtml-file-name');

    return $view;
} 
```

文档：http : [//framework.zend.com/manual/current/en/modules/zend.view.quick-start.html](http://framework.zend.com/manual/current/en/modules/zend.view.quick-start.html)

# ruby-on-rails - 如何使用 mailman gem 获取电子邮件发送日期和时间？

> ID：14475206
> 
> 赞同：0
> 
> 时间：2013-01-23T08:23:45.877
> 
> 标签：ruby-on-rails, mailman-gem

我制作了一个脚本来从电子邮件帐户获取传入消息。有没有办法在不使用正则表达式解析的情况下获取消息发送日期时间`message.header`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:10:16.170

好吧，很简单`message.date`：）

# iphone - 尺寸检查器中没有自动调整窗口大小的选项（XCode 4.5.2）

> ID：14475207
> 
> 赞同：7
> 
> 时间：2013-01-23T08:23:50.200
> 
> 标签：iphone, ios, xcode, ipad

在 XCode 4.5.2 中，当我创建一个新的 XIB 文件时，我没有在大小检查器（右侧）中使用自动调整大小窗口的选项。但如果我使用在另一个项目中创建的旧 Xib 文件，我可以看到自动调整大小选项。

我现在看到的：

![没有选项用于自动调整大小](../Images/c807632c9792e1b3ecd76c3c6be374aa.png)

但我想看到/有如下图所示的选项： ![具有自动调整大小的选项](../Images/b3bdd288616a98562a0860817d730707.png)

我正在使用 XCode 4.5.2

我怎样才能有自动调整大小的选项？提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T08:50:43.420

在 Xcode 中，转到 File Inspector 窗口，只需取消选中为“Use Autolayout”提供的复选框，然后切换到 Size 检查器，您将在那里看到自动调整大小窗口。

# c# - 如何从 flowLayoutPanel 中获取我添加的用户控件属性

> ID：14475209
> 
> 赞同：0
> 
> 时间：2013-01-23T08:23:50.407
> 
> 标签：c#, controls

我正在使用 flowLayoutPanel 并向其中添加我的自定义用户控件，我可以向其中添加 mu usercontrol 但我不知道添加后如何使用它。

在这一部分中，我添加了我的用户控件：

```
...
ExtensionUserControl extension = new ExtensionUserControl(this, AMI_ClientInstance);
//Add Obj Name (Extension Number)
extension.ExtensionNumber = Obj.ObjName;
flowLayoutPanel1.Controls.Add(extension as ExtensionUserControl);
... 
```

另一个地方我想拥有我添加的用户控件的属性，我尝试使用此代码但它得到错误，它说无法将 Windows 控件转换为 ExtensionUserControl

```
ExtensionUserControl extension = flowLayoutPanel1.Controls[1]; 
```

请完全告诉我在将其添加到面板后如何拥有我的用户控件属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:04:01.690

你确定 Controls[1] 是 ExtensionUserControl 吗？我觉得：

```
foreach(Control ctl in flowLayoutPanel1.Controls)
{
     if(ctl is ExtensionUserControl)
       {
            (ExtensionUserControl)ctl......//do something u want
       }
} 
```

我还没有测试它，只是想，如果它不起作用，对不起

# algorithm - 有效地克隆大图

> ID：14475210
> 
> 赞同：-2
> 
> 时间：2013-01-23T08:23:56.687
> 
> 标签：algorithm, graph

假设我们有一个非常大的图。就像 facebook 用户图一样。我们如何有效地创建此类图的克隆。有没有标准的有效算法？

我正在寻找一种算法。我们可以假设该图是主存储器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:29:48.343

对于“facebook 大小”，它可能在磁盘上。如果你*真的*要复制，最快的方法是不引入seek。通常这意味着简单地复制文件。

无论哪种方式，我可能根本不会复制它，而是写时复制。换句话说：使用您拥有的对象并存储上下文，但是一旦您从另一个上下文中写入对象，您就会创建一个副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:28:11.563

真的没有办法用少于 N 的操作来“克隆” N 个字节。我不认为有任何方法特别有效。无论您的图表占用多少字节，这就是克隆它需要多少时间。

# android - Fragment 中的 DialogFragment 和回调

> ID：14475214
> 
> 赞同：1
> 
> 时间：2013-01-23T08:24:22.840
> 
> 标签：android

我已经阅读了很多关于如何使用片段的文档，但我还有一个疑问。我有一个控制 3 个片段的活动，现在在其中一个片段中我调用 DialogFragment 并按照谷歌的教程定义了一个回调活动的接口。一切正常，但这是将数据传递给触发对话框的片段的唯一方法吗？我认为将数据直接传递给片段而不是从活动传递会更方便。有什么方法可以做到这一点吗？先感谢您。

# list - Vaadin - 如何绑定 POJO 列表

> ID：14475217
> 
> 赞同：1
> 
> 时间：2013-01-23T08:24:31.153
> 
> 标签：list, data-binding, combobox, vaadin, pojo

在 Vaadin 7 中，我试图将我的电话号码组合框绑定到嵌套在 POJO 中的 POJO 列表。例如：我有 PersonVo，其中包含一个 List 电话；PersonCommunicationVo 包含电话号码的值。

我用来绑定 PersonVo 的其他属性的是：

```
BeanFieldGroup<PersonVo>personBinder = new BeanFieldGroup<PersonVo>(PersonVo.class);
personBinder.setItemDataSource(person);
myFormLayout.addComponent(personBinder.buildAndBind("Firstname", "firstName"));
myFormLayout.addComponent(personBinder.buildAndBind("Country", "country.name")); 
```

这里是 PersonVo：

```
@Table(name = "CONTACT.T_PERSON")
@Entity
@Audited
public class PersonVo {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id",updatable = false)
    private Long personId;

    @Column(name = "FIRSTNAME")
    private String firstName;

    @Column(name = "LASTNAME")
    private String lastName;

    @Column(name = "TITLE")
    private String title;

    ...

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "personId")
    @AuditMappedBy(mappedBy = "personId")
    private List<PersonCommunicationVo> **phoneNumbers**;

    ... 
```

和 PersonCommunicationVo：

```
@Entity
@Table(name = "CONTACT.PERSON_COMMUNICATION")
@Audited

public class PersonCommunicationVo {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id",updatable = false)
    private Long persCommId;

    @Column(name = "PERSON_ID")
    private Long personId;

    @ManyToOne
    @JoinColumn(name = "COM_TYPE_ID")
    private CommunicationTypesVo communicationType;

    @Column(name = "VALUE")
    private String **value**; 
```

我想做的是根据 PersonCommunicationVo 的**值**将我的电话号码组合框绑定到来自 PersonVo**的**电话号码列表。但困难在于根据在组合框中选择的内容在列表中找到正确的 PersonCommunicationVo。例如：我在组合框中选择了电话号码 +32 123 456 789，这个值应该映射到 phoneNumbers.get(indexOfSelectedItem).getValue()。为了更新电话号码，添加一个新的等...

 **谢谢您的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T12:46:30.850

也许我不了解您的数据模型，如果是这样，您能否发布 PersonVo、PhoneVo(?) 和 PersonCommunicationVo 并进一步解释一下为什么要像您一样保存它。为什么您的 personvo 包含电话列表？我以前从未与 beanfieldgroup 合作过，但我想到了类似的东西：

```
ComboBox cb = new ComboBox("Phones", person.getPhones())
personBinder.bind(cb, "phones");
myFormLayout.addComponent(cb); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-01-08T13:18:44.767

您可以尝试这样的事情（java 1.7 语法和 Vaadin7）：

```
...
    FieldGroup fGroup = new FieldGroup( new BeanItem<PersonVo> (personInstance) );
...
    BeanItemContainer<PersonCommunicationVo> numbers = new BeanItemContainer<>( PersonCommunicationVo.class );
    numbers.addAll( personInstance.getPhoneNumbers() );

    ComboBox phoneCombo = new ComboBox( "Phone Numbers", numbers );
    phoneCombo.setItemCaptionMode( ItemCaptionMode.PROPERTY );
    phoneCombo.setItemCaptionPropertyId( "**value**" );

    fGroup.bind (phoneCombo, "**phoneNumbers**")

    myFormLayout.addComponent(phoneCombo);
... 
```**

# c# - 返回一个具有多列值的字符串 linq

> ID：14475222
> 
> 赞同：1
> 
> 时间：2013-01-23T08:24:43.547
> 
> 标签：c#, linq

我有一个查询。

是否可以在 linq 中返回一个具有多列值的字符串？

像这样

```
string ProductName = ((from P in DataModel.DIS_PRODUCT
                       join M in DataModel.SET_PACK_UNIT on P.PUNIT_ID equals M.ID
                       where P.PRODUCT_ID == ProdictId
                       select P.PRODUCT_NAME +" " + P.WEIGHT + " "+ M.UNIT_SYMBLE)
                       .Take(1)
                     ).ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:31:34.197

你正在使用`Take(1)`这意味着你仍然得到一个`IEnumerable<string>`或一个`IQueryable<string>`。只需使用`First()`（或可能`FirstOrDefault()`）代替，`Take(1)`您也可以挂断`ToString()`电话。

```
string productName = (from P in DataModel.DIS_PRODUCT
                      join M in DataModel.SET_PACK_UNIT
                        on P.PUNIT_ID equals M.ID
                      where P.PRODUCT_ID == ProdictId
                      select P.PRODUCT_NAME + " " + P.WEIGHT + " "+ M.UNIT_SYMBLE)
                     .FirstOrDefault(); 
```

这仅在您的 LINQ 提供程序支持字符串连接操作时才有效。另一种方法是只获取你想要的列，然后在调用者处连接：

```
var query = from P in DataModel.DIS_PRODUCT
            join M in DataModel.SET_PACK_UNIT
              on P.PUNIT_ID equals M.ID
            where P.PRODUCT_ID == ProdictId
            select new { P.PRODUCT_NAME, P.WEIGHT, M.UNIT_SYMBLE };

var result = query.FirstOrDefault();
if (result != null)
{
    string productName = result.PRODUCT_NAME + " " +
                         result.WEIGHT + " " +
                         result.UNIT_SYMBLE;
    // Use the name
}
else
{
    // No results
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T01:11:38.563

另一种更清晰的方法如下

```
var ProductsQueryItem = (from p in Products
              select new
              {
                  Name = e.ProductName+ " " + e.weight +e.UNIT_SYMBLE
              })
.FirstOrDefault(); 
```

现在您可以直接使用 ProductsQueryItem .Name

# iphone - 如何检查我的当前时间是否在开始时间和结束时间之间？

> ID：14475225
> 
> 赞同：-4
> 
> 时间：2013-01-23T08:24:53.527
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, ios4

> **可能重复：**
> [如何检查 NSDate 是否发生在其他两个 NSDate 之间](https://stackoverflow.com/questions/1072848/how-to-check-if-an-nsdate-occurs-between-two-other-nsdates)

在我的应用程序中，我有这样的字符串时间，

开始时间（字符串）：上午 10:00

结束时间（字符串）：下午 12:22

我现在的时间是上午 11.55

如何检查我的当前时间是否在开始时间和结束时间之间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:29:56.473

使用这种方式：

首先将您的字符串转换为`NSDate`using `NSDateFormatter`.

然后直接将这两个日期与始终为的 currentDate 进行比较`[NSDate date]`。

您可以使用 NSDate 的这两个实例方法。

`isGreaterThan:`和`isLessThan:`

或者，

```
if (! (([currentDate compare:startDate]==NSOrderedAscending) && ([currentDate compare:endDate]==NSOrderedDescending)){
    NSLog(@"Valid date");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T08:31:35.180

首先尝试删除 AM 和 PM

就像它的 PM 然后在那个时间范围内加上 +12。

然后检查天气“：”之前的当前时间数字大于开始时间，小于结束时间..如果它返回true，那么您可以检查“：”之后的数字。

# html - Chrome中的可滚动div问题

> ID：14475226
> 
> 赞同：0
> 
> 时间：2013-01-23T08:24:53.187
> 
> 标签：html, css

我有一个正在切换可见性的 div。div 还具有可滚动的属性溢出。该代码在 Firefox 中工作正常。但在 Chrome 中，即使 div 可见性设置为隐藏，也可以看到滚动条。如何解决这个问题？

CSS：

```
.dhHelp{
position:absolute;
top:5px;
left:6px;
visibility: hidden;
width: 120px;
height: 220px;
z-index:999;
background-color:black;
border: solid #33ccff 2px;
font-size: 10px;
overflow:scroll;
color:white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:29:01.313

实际上 in `visibility : hidden`- 元素会占用它的空间，所以滚动条就在那里，
然后尝试`display:none`- 使用此属性它不会占用页面中的空间并且将被隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:29:09.497

overflow:scroll 语句强制在任何浏览器中显示滚动条。如果您愿意，可以尝试 display:none，不显示 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:30:42.623

chrome 中有一个已知问题。如果您希望它消失，请使用高度，宽度：0。

# android - GCM 推送通知与 Android 应用程序中的 asp.net 服务器

> ID：14475237
> 
> 赞同：1
> 
> 时间：2013-01-23T08:25:41.807
> 
> 标签：android, google-cloud-messaging

我已经在我现有的 android 应用程序中集成了**GCM**推送通知。现在更新应用程序后。有些设备收到通知，有些没有。在已安装的 6 个设备中，只有两个正在安装。在 Galaxy Nexus 和三星 S3 中无法接收。可能是什么原因？？？？？？

```
regId = GCMRegistrar.getRegistrationId(getApplicationContext());

 if (regId.equals("")) 

            GCMRegistrar.register(getApplicationContext(), SENDER_ID); 
```

这是获取注册 ID 的代码。现在我已将此 ID 发送到第三方服务器（asp.net 服务器）。在服务器端，我们将这些 id 存储在数据库中。这些 id 被发送到**GCM**服务器。

提前致谢。

# c# - C#解析大型平面文件数据并插入数据库

> ID：14475238
> 
> 赞同：1
> 
> 时间：2013-01-23T08:25:42.237
> 
> 标签：c#

我的平面文件大小> 1GB。我需要解析文件并插入数据库。

**方法一：** 解析平面文件并将其转换为csv。然后在sql中使用批量插入。

**问题：**

使用[异步](http://blogs.msdn.com/b/csharpfaq/archive/2012/01/23/using-async-for-file-access-alan-berman.aspx)进行文件读取，我被抛出 System.OutOfMemoryException

这样做需要将近 30 分钟（取决于大小）。

我是否需要有效地使用数据结构来减少时间或任何其他有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:28:51.530

也许在[这里检查问题](https://stackoverflow.com/questions/4273699/how-to-read-a-large-1-gb-txt-file-in-net)。具体来说，如果您使用的是 .Net 4.0，它会提到[MemoryMappedFile](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)的使用。

但是，如果您只想将其插入数据库，是否真的需要通过 C# 引入它？考虑按照[此处](http://www.developerfusion.com/code/5357/bulk-insert-from-flat-file-using-transactsql/)的文章使用 SQL 进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:20:12.453

您可以像这样将简单的 FileStream 与 BinaryReader 一起使用

```
Boolean isSaving = true, savedOk = false;                  
new Task(new Action(() =>
{
    try
    {
        string fileName = "filename.txt";
        using (FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read))
        {
            BinaryReader br = new BinaryReader(fs);
            long size = new FileInfo(fileName).Length;
            int bytesPerRead = (int)(size < 512000 ? size : 512000);
            byte[] past = br.ReadBytes(bytesPerRead);
            int offset = 0;

            while (offset < size)
            {
                //TODO - SAVE YOUR BYTE ARRAY TO DB USING WCF OR LOCAL PROC 

                offset = offset + bytesPerRead;
                bytesPerRead = (int)(size - offset < 512000 ? size - offset : 512000);
                past = br.ReadBytes(bytesPerRead);                                    
            }
            savedOk = true;
       }
    }
    catch (Exception ex) { savedOk = false; }
    isSaving = false;                        

 })).Start();
 while (isSaving) 
 { 
    //DOUPDATES 
 }; 
```

# bash - 用于将 .tar.gz 创建为特定文件扩展名的 bash 脚本代码

> ID：14475243
> 
> 赞同：0
> 
> 时间：2013-01-23T08:26:20.060
> 
> 标签：bash, shell

我是 shell 脚本的新手。我有一个要求，找出或列出 .bak（它应该只是 .bak，在列出时不应选择其他 .bak.tar.gz 文件）文件，然后压缩它们并创建 .tar .gz 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:28:41.593

希望这些代码有所帮助。`*.bak`将匹配所有`.bak`文件。

```
tar -czf example.tar.gz *.bak 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:07:51.780

你可能需要这个：

```
#uncomment 1 of the next 2 lines : the first DOES the cmd, the 2nd only echo it

#thecmd="tar"
thecmd="echo tar"

export thecmd

for bakfile in ./*.bak ; do
   [ -f "${bakfile}" ] && ${thecmd} -czf "${bakfile}.tar.gz" "${bakfile}" 
done 
```

这还会在将文件压缩为 file.tar.gz 之前测试文件是否是常规文件（而不是目录、管道或块设备）（注意：尽量避免在变量名中使用保留字和变量名。有很多）

# android - android中的横向和纵向方向

> ID：14475245
> 
> 赞同：1
> 
> 时间：2013-01-23T08:26:27.353
> 
> 标签：android

我将活动横向设置为强制性的。它锁定屏幕，然后在活动中解锁屏幕。

但是现在活动屏幕从纵向变为横向。

也就是说，锁定屏幕后，它会从横向变为纵向。

强制设置活动横向后如何始终保持横向？即使它是锁定屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:28:59.893

在 AndroidMainfest.xml

```
 <activity
        android:name=".path.to.Activity"
        android:configChanges="orientation"
        android:screenOrientation="landscape" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:34:40.403

您可以使用 Activity 中的方法 Call 以编程方式强制更改方向，`setRequestOrientation()`就像这样。

用于纵向

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

& 用于景观方向

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

**或者**

如果要修复方向，请像这样添加清单

```
<activity
        android:name=".activity.MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:configChanges="orientation"> 
```

**编辑：**

有关更多详细信息，请参阅此链接

[http://developer.samsung.com/android/technical-docs/Handling-Orientation-in-Android](http://developer.samsung.com/android/technical-docs/Handling-Orientation-in-Android)

# c# - MultipartMemoryStreamProvider：文件名？

> ID：14475248
> 
> 赞同：18
> 
> 时间：2013-01-23T08:26:40.110
> 
> 标签：c#, asp.net-web-api

我已经在这里问过如何在 Web Api 中读取上传的文件而无需保存它们。MultipartMemoryStreamProvider 回答了这个问题，但是如何使用此方法获取文件名以从中导出上传文件的类型？

亲切的问候

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T09:07:02.973

[在此](https://dotnetnuke.svn.codeplex.com/svn/trunk/Community/DotNetNuke.Web/InternalServices/FileUploadController.cs)DotNetNuke 代码中有一个示例（参见`PostFile()`方法）。

**根据@FilipW 评论**更新...****

 **获取您需要的内容项，然后访问文件名属性。

像这样的东西：

```
 var provider = new MultipartMemoryStreamProvider();
        var task = request.Content.ReadAsMultipartAsync(provider).
             ContinueWith(o =>
                 {
                     //Select the appropriate content item this assumes only 1 part
                     var fileContent = provider.Contents.SingleOrDefault();

                     if (fileContent != null)
                     {
                         var fileName = fileContent.Headers.ContentDisposition.FileName.Replace("\"", string.Empty);
                     }
                 });//Ending Bracket 
```**

# vim - 在 Vim 中将现有 C 源文件更改为 80 列宽

> ID：14475250
> 
> 赞同：1
> 
> 时间：2013-01-23T08:26:45.810
> 
> 标签：vim, coding-style, indentation

我有几个 C 文件，其中行超过 80 列。我需要将它们包装到 80 列边界，同时保持正确的 C 语法。这在 Vim 中可行吗？

我在网上看到了几种在普通文本文件上执行此操作的解决方案。此外，还发现了在即将被编辑的 C 文件中进行包装的技巧。但不适用于现有的 C 文件。

除了 Vim 之外，任何实现此目的的工具也都受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:31:29.300

如果您编辑 c-sources，很可能您设置了 cindent 选项。不幸的是 textwidth 选项不适用于 cindent。

为了您的艺术风格，虽然它是一个非常好的程序，但也不推荐，因为它不支持长行的中断。

为了得到你想要的，我使用 gnu indent 并将 equalprg 设置为

```
let &equalprg= "indent -l80 -i" . &shiftwidth . " <optional args>" 
```

并添加

```
map <leader>i mzgg=G`z 
```

到我的`~/.vimrc`. 按下`<leader>i`重新格式化整个文件而不改变光标的位置。

另一种可能性是添加一个自动命令，在每次写入时缩进源代码，例如

```
autocmd BufWrite *.c execute "%!".&equalprg 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:36:47.393

使用 vim 你可以使用`:set tw=79`and来做到这一点`gggqG`。但是，它不是上下文感知的，因此您需要恢复某些行（例如，其中包含长字符串的行）。

对于外部工具，您可能需要查看[Artistic Style](http://astyle.sourceforge.net/)，它重新格式化不难重新格式化的行（例如，包含 a 的行`{`）。

# android - Android按钮调用另一个函数

> ID：14475256
> 
> 赞同：1
> 
> 时间：2013-01-23T08:27:16.493
> 
> 标签：android, button

我尝试使用我的 Android 按钮来更改 at_command 的值

如果我调用logcat 会`"intOfFloat(float f)"`显示`btnLeftListener`

```
01-23 16:17:28.610: E/AndroidRuntime(1154): java.lang.NullPointerException 
```

请帮我解决这个问题:)

```
String at_cmd = "";
FloatBuffer fb;
IntBuffer ib;
int  PORT=5556;
float speed = (float)0.1;
int seq = 1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);    
    btnLeft=(Button)findViewById(R.id.LeftBtn);
    btnLeft.setOnClickListener(btnLeftListener);
}
public Button.OnClickListener btnLeftListener=
      new Button.OnClickListener(){
      @Override
        public void onClick(View arg0) {
            at_cmd = "AT*PCMD=" + (seq++) + ",1," + intOfFloat(-speed)+",0,0,0";
    }

};
public int intOfFloat(float f) {
    fb.put(0, f);
    return ib.get(0);
} 
```

日志猫

```
01-23 16:17:28.591: W/dalvikvm(1154): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-23 16:17:28.610: E/AndroidRuntime(1154): FATAL EXCEPTION: main
01-23 16:17:28.610: E/AndroidRuntime(1154): java.lang.NullPointerException
01-23 16:17:28.610: E/AndroidRuntime(1154):     at com.example.dronedivideandroid.DroneMain.intOfFloat(DroneMain.java:60)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at com.example.dronedivideandroid.DroneMain$1.onClick(DroneMain.java:70)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at android.view.View.performClick(View.java:4084)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at android.view.View$PerformClick.run(View.java:16966)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at android.os.Handler.handleCallback(Handler.java:615)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at android.os.Looper.loop(Looper.java:137)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at java.lang.reflect.Method.invoke(Method.java:511)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-23 16:17:28.610: E/AndroidRuntime(1154):     at dalvik.system.NativeStart.main(Native Method)
01-23 16:17:28.631: W/ActivityManager(163):   Force finishing activity com.example.dronedivideandroid/.DroneMain
01-23 16:17:28.641: W/WindowManager(163): Failure taking screenshot for (246x410) to layer 21010
01-23 16:17:29.150: W/ActivityManager(163): Activity pause timeout for ActivityRecord{4154a830 com.example.dronedivideandroid/.DroneMain}
01-23 16:17:29.351: I/Choreographer(262): Skipped 37 frames!  The application may be doing too much work on its main thread.
01-23 16:17:30.591: I/Process(1154): Sending signal. PID: 1154 SIG: 9
01-23 16:17:30.601: I/ActivityManager(163): Process com.example.dronedivideandroid (pid 1154) has died.
01-23 16:17:30.601: I/WindowState(163): WIN DEATH: Window{414043e0 com.example.dronedivideandroid/com.example.dronedivideandroid.DroneMain paused=false}
01-23 16:17:30.691: W/InputMethodManagerService(163): Got RemoteException sending setActive(false) notification to pid 1154 uid 10047
01-23 16:17:40.091: W/ActivityManager(163): Activity destroy timeout for ActivityRecord{4154a830 com.example.dronedivideandroid/.DroneMain}
01-23 16:19:52.800: D/dalvikvm(248): GC_CONCURRENT freed 383K, 7% free 8537K/9095K, paused 6ms+5ms, total 46ms
01-23 16:23:49.971: E/ThrottleService(163): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory)
01-23 16:27:27.310: D/dalvikvm(248): GC_CONCURRENT freed 384K, 7% free 8537K/9095K, paused 17ms+6ms, total 56ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:30:47.743

您的变量之一未初始化，因此您应确保以下变量具有值：

`seq`, `speed`, `fb`, `ib`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:00:33.753

可能这将是正确的答案，因为我在设备上对此进行了测试...!!!!!!

```
import java.nio.FloatBuffer;
import java.nio.IntBuffer;

 import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {
String at_cmd = "";
FloatBuffer fb;
IntBuffer ib;
int  PORT=5556;
float speed = (float)0.1;
int seq = 1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_main);
   Button  btnLeft=(Button)findViewById(R.id.button1);
    btnLeft.setOnClickListener(btnLeftListener);
}
public OnClickListener btnLeftListener=
      new OnClickListener(){

    @Override
    public void onClick(View arg0) {
         at_cmd = "AT*PCMD=" + String.valueOf(seq++) + ",1," + intOfFloat(-speed)+",0,0,0";

         System.out.println("Ans----->"+at_cmd);
    }

};
public int intOfFloat(float f) {
    if(fb != null) fb.put(0, f);
    if(ib != null) return ib.get(0);
    else return 0;

}

} 
```

我得到了以下输出......！！！

AT*PCMD=1,1,0,0,0,0。

否则检查它...！！！！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:30:55.320

确保变量`fb`和`ib`在使用它们之前被初始化（不为空）

```
public int intOfFloat(float f) {
if(fb != null) fb.put(0, f);
if(ib != null) return ib.get(0);
else return 0;
} 
```

# google-app-engine - 在 grails install-plugin app-engine 期间，未解决的依赖项阻止了 Google App Engine 上的 Grails 部署

> ID：14475259
> 
> 赞同：2
> 
> 时间：2013-01-23T08:27:26.930
> 
> 标签：google-app-engine, grails, grails-plugin, grails-2.0

我正在按照此视频中描述的步骤 - [http://www.youtube.com/watch?v=wP-aZdXymro](http://www.youtube.com/watch?v=wP-aZdXymro)在 GAE 上部署我的 grails 应用程序。我正在运行 Grails-2.2.0 并且我已经卸载了休眠插件。但是，当我尝试安装 app-engine 插件时，我收到以下消息 -

```
==> grails install-plugin app-engine
| Configuring classpath
| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for     more information):

- org.grails:grails-datastore-gorm-plugin-support:1.0.0.RELEASE
- org.grails:grails-datastore-gorm-jpa:1.0.0.RC3
- org.grails:grails-datastore-jpa:1.0.0.RC3
- org.grails:grails-datastore-web:1.0.0.RELEASE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:50:46.367

请不要使用 install-plugin，它已被弃用。从您的 application.properties 中删除所有插件。然后，将其添加到您的 BuildConfig.groovy：

```
compile ":app-engine:0.8.10" 
```

之后，您可以检查哪些插件仍需要数据存储插件（如果有）：

```
 dependency-report 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:59:22.543

Grails 不适用于 GAE。如果您想利用 Groovy 语法，最好使用 Gaelyk ( [https://gaelyk.appspot.com/](https://gaelyk.appspot.com/) )，或者将 Grails 应用程序部署到更传统的云提供商，如 Heroku、Cloudbees、AWS 等.

# mysql - mysql - 正则表达式查找以字母开头的列

> ID：14475260
> 
> 赞同：1
> 
> 时间：2013-01-23T08:27:31.407
> 
> 标签：mysql, regex

我试图在 mysql 中提出一个正则表达式，它会搜索以字母开头的列。到目前为止，我想出了这个不起作用

SELECT * FROM table WHERE column LIKE REGEXP '[A-Za-z]%'

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:32:11.163

```
SELECT * FROM table WHERE column REGEXP '^[A-Za-z]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:32:05.367

你很接近：

```
'^[A-Za-z]' 
```

您正在处理正则表达式，因此暂时忘记了正常的 SQL 模式匹配语法。

查看[此页面](http://dev.mysql.com/doc/refman/5.6/en/regexp.html)以获取有关正则表达式的更多信息。

由于 REGEXP 不区分大小写，除非与二进制字符串一起使用，因此您可以指定`[a-z]`或`[A-Z]`。

`[^characters]`如果您不希望它以某个字符开头，则可以使用否定字符类，但请注意，未指定的所有其他字符都将匹配。

```
'^[^A-Za-z]' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:36:15.617

```
SELECT * FROM your_table_name WHERE your_column_name REGEXP '^[a-z]' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T08:31:40.157

尝试这个。

```
SELECT * FROM table WHERE column LIKE REGEXP '([A-Z]|[a-z])+%' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T08:31:56.930

```
SELECT * FROM user WHERE password REGEXP '^[a-zA-w]' 
```

# c# - 多线程是应用程序性能改进的答案吗

> ID：14475264
> 
> 赞同：4
> 
> 时间：2013-01-23T08:27:45.603
> 
> 标签：c#, multithreading

我有一个控制台应用程序，它执行以下操作：

1.  读取输入文件。输入文件具有运行到数千行的逐行数据
2.  预处理输入文件并转换为中间文件。中间文件的行数相等。
3.  一次从中间文件中读取一行，形成一个 Web 请求并将其发送到 Web 服务器。
4.  一次从网络服务器读取每个请求的响应，处理（解析）它并将其写入输出文件。输出的行数也与输入文件相同。

现在，目前该应用程序运行良好，但速度很慢。我想提高应用程序的性能，使其更快一些。

1.  有人可以告诉我在这种情况下可能使用的各种方法吗？

2.  如果多线程是问题的答案，有人可以建议一些起始指针吗？

编辑：所有请求都将发送到同一台服务器。就服务器而言，我对其容忍度知之甚少或一无所知（如果归结为这一点，我可能会考虑限制对服务器的请求线程数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:49:45.450

### 穿线还是不穿线？就是那个问题...

对问题的多线程部分的一个简单而正确的答案是：是的，只要 1）根据算法是可行的，并且 2）它涉及 I/O 绑定操作，或者您在 CPU 绑定操作中有多个内核

### 第一点：可行性

1.  为了执行第 2 步，您必须完成第 1 步。还没有多线程
2.  第 3 步需要完成第 2 步，**但**涉及独立的逐行活动（每行一个请求）。答对了！！
3.  第 4 步需要在第 3 步完成所有请求。多线程到此结束。

### 第二点：操作类型

Web 请求是 I/O 绑定操作。你得到最大的利益。由于您正在向同一台服务器执行请求，无论是否容错，您都必须限制查询速率。需要适当*调整*并发请求的数量，但是如果您在代码中使用常量（如`const int NUMBER_OF_THREADS = 4;`），那么您有一个很好的起点。

### 提案

*使用信号量来处理并发请求。*

像以前一样，通过读取文件并转换为中间文件来启动程序。

完成后，创建一个固定大小的数组（您说最终文件具有相同的行数，因此您可以分配它），然后为每一行启动一个循环：

1.  获取一个以`NUMBER_OF_THREADS`常量初始化的信号量，这将允许主线程激活 4 个并发线程
2.  通过将行、目标数组和索引传递给线程来启动线程（实际上不需要将所有这些都作为参数传递，即如果列表是类成员）

循环之后，等待`AutoResetEvent`我将简要讨论的

在线程中，执行以下操作：

1.  执行网络请求
2.  处理结果
3.  将结果保存到对应的目标数组行
4.  使用方法增加**跨线程共享**的变量（此处未讨论）`Interlocked.Increment()`
5.  `if`共享变量`equals`行数，`then`释放`AutoResetEvent`我提到的这样你就可以解锁主线程

### 调音

从 4 个并发线程开始。尝试将它们增加到 8 并查看性能。我建议你不要超过 12 个线程，但这里的其他人可能会说这可能太多了......这只是尝试失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:44:23.267

我将创建一个基于内部消息队列和生产者-消费者链的应用程序。

`* -> * -> * -> *`

其中每个`*`都是一个线程：读取、处理、查询 WS、后处理。当`*`生产队列已满或消费队列为空时，节点会休眠。

如果需要，您可以在每个点创建多个消费者（很可能在 WS 处理程序中），如下所示：

```
 / * \ 
* -> * ->  *  -> *
         \ * / 
```

架构准备好后，您可以通过更改每个点的队列大小来调整应用程序。

此外 - 您可以使用线程池来处理每个处理节点，因此确保您的处理器使用最多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:38:08.597

在读取文件的同时，您也在写入文件。首先想到的是以大块（BufferedReader）读取文件，以确保您的磁盘不会搜索太多。

至于您的服务器，根据我的经验，大多数 Web 服务器每秒都可以容忍多个请求。如果您自己托管服务器，我会简单地使用异步网络请求并弄清楚会发生什么......但是，从它的声音来看，您正在创建一个简单的网络爬虫，在这种情况下，我强烈建议您耐心等待：造成麻烦别人的服务器从来都不是一个好主意。给您一个提示：我们的网络爬虫始终限制为每台服务器每秒 1 个请求。

# ios - 如何在iOS中将触摸传递给手势识别器？

> ID：14475266
> 
> 赞同：0
> 
> 时间：2013-01-23T08:27:55.667
> 
> 标签：ios, cocoa-touch, uigesturerecognizer

我有一个 UIView ViewA，我们正在添加到一个 scrollView ViewB。ViewA 有其他子视图（其中之一是 ViewC）。现在，我们在 ViewA 上有了触摸方法（开始、结束等）。ViewC 有一个点击识别器。我如何通过触摸？

现在，ViewA 中的 touches 方法正在被击中。手势识别器不工作。

任何人都可以提出任何建议吗？

谢谢。阿山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:00:04.493

您可以使一个*UIGestureRecognizer* (A) 依赖于另一个 (B) - 这样一个 UIGestureRecognizer (A) 就无法在第二个失败的情况下工作。

在您的情况下，您可以将*UIGestureRecognizer* (A) 添加到顶视图，并将另一个 (B) 添加到其下方的视图中，这需要识别其他一些用户交互。底部视图中的一个 (B) 无法在另一个 (A) 出现故障的情况下开始工作。

有关可能满足您需求的更多*UIGestureRecognizer*行为，您可以阅读`requireGestureRecognizerToFail` [此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/requireGestureRecognizerToFail%3a)并熟悉超级有用的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:33:27.830

我会建议您使用适合您想要做的事情的 UIGestureRecognizer，而不是直接实现触摸方法。根据 Apple 文档，您不应该再使用触摸方法。

如果您想将手势从一个视图传递到另一个视图，为什么不在第二个视图的 .h 文件中声明一个方法，并在触发手势时从第一个视图调用它？

如果 viewB 是 viewA 的子视图，则更简单，因为您将在 viewA 中引用 vewB。

希望这有帮助！

# git - 如何在 Ubuntu 服务器上从 git 安装和支持 node.js 应用程序

> ID：14475268
> 
> 赞同：2
> 
> 时间：2013-01-23T08:27:58.673
> 
> 标签：git, node.js, ubuntu, amazon-ec2

从**Ubuntu**服务器上的**git安装****node.js**和**应用程序**的完整命令堆栈（Amazon EC2 上的 Ubuntu 12.04）

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:27:58.673

# ＃安装

## #安装oracle java

sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer

## #insatll 混帐

sudo apt-get 安装 git

## #安装节点、npm 和永远

sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs npm
sudo npm install forever -g

## #下载服务器存储库

:~$ mkdir webserver
:~$ cd webserver$
:~/webserver$ git init
:~/webserver$ git remote add origin [https://webserverteam@bitbucket.org/webserverteam/server.git](https://webserverteam@bitbucket.org/webserverteam/server.git)
:~/webserver$ git config - -global user.name "webserverteam"
:~/webserver$ git config --global user.email "webserverteam@gmail.com"
:~/webserver$ git config --global push.default "matching"
:~/webserver$ git配置 --global branch.autosetuprebase 始终
:~/webserver$ git config --global color.status auto
:~/webserver$ git config --global color.branch auto
:~/webserver$ git config branch.master.remote origin
: ~/webserver$ git config branch.master.merge refs/heads/master
:~/webserver$ git pull

## #安装依赖

:~/webserver$ npm intsall

## #edit 您需要的设置（如果需要）

:~/webserver$ nano app.js

## #设置iptables

#普通用户无法访问 80 端口，所以我们在 8080 上运行服务器并重定向 80->8080
sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080

## #run 网络服务器应用程序：

:~/webserver$ 永远启动 app.js

# ＃支持

## #每次重启后

#不幸的是，我无法“保存\启动后运行”具有琐碎权限的 iptables
：~$ sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080
:~$ cd webserver$
： ~/webserver$ 永远启动 app.js

# #来自 git 的简单更新

:~$ cd webserver$
#check running forever processes
:~/webserver$ forever list
#kill forever process number 0
:~/webserver$ forever stop 0
:~/webserver$ git pull
:~/webserver$ forever start app.js

# #来自git的完整更新

:~$ cd webserver$
:~/webserver$ 永远列表
:~/webserver$ 永远停止 0
:~/webserver$ git fetch --all
:~/webserver$ git reset --hard origin/master
:~/webserver$ git拉
你需要的#edit设置（如果你需要）
：~/webserver$ nano app.js
:~/webserver$ forever start app.js****

# swing - 如何在 JPanel、Java Swing 的中心添加 JToolBar？

> ID：14475278
> 
> 赞同：4
> 
> 时间：2013-01-23T08:28:46.367
> 
> 标签：swing, jpanel, border-layout, jtoolbar

我是 Java Swing 的新手。我想设计一个`JToolBar`。`JToolBar`应该放在 的中心`JPanel`。是否可以？

```
javax.swing.JPanel pane = new javax.swing.JPanel(); 
BorderLayout border = new BorderLayout(); 
pane.setLayout(border); 
JToolBar toolBar = new JToolBar(); 
pane.add(toolBar,BorderLayout.CENTER); 
javax.swing.JButton button1 = new javax.swing.JButton("Click Me"); 
toolBar.add(button1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:13:54.887

阅读有关[如何使用工具栏的信息](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)。

以下代码直接取自[doc](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)。

```
public ToolBarDemo() {
    super(new BorderLayout());
    ...
    JToolBar toolBar = new JToolBar("Still draggable");
    addButtons(toolBar);
    ...
    setPreferredSize(new Dimension(450, 130));
    add(toolBar, BorderLayout.PAGE_START);
    add(scrollPane, BorderLayout.CENTER);
} 
```

看这里的用法`BorderLayout` 。并对代码进行必要的更改。

**更新：**

我试过使用你的代码来显示这样的输出。我使用了带有维度的[addSeparator方法。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToolBar.html#addSeparator%28%29)`This is just a try to solve the problem. I am not sure whether this approach is the correct way.`

![enter image description here](../Images/e6dfd2943d3a59484d12b959543a3e1a.png)

```
public static void main(String[] args) {
    JFrame frame = new JFrame();
    JPanel panel = new JPanel(new BorderLayout()); 
    JToolBar toolBar = new JToolBar(); 
    panel.add(toolBar,BorderLayout.PAGE_START);

    toolBar.addSeparator(new Dimension(150, 0));

    JButton button1 = new JButton("Click Me"); 
    toolBar.add(button1);
    frame.setLayout(new BorderLayout());
    frame.add(panel, BorderLayout.CENTER);
    frame.setSize(new Dimension(400, 100));
    frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T08:31:51.607

如果您`JPanel`有 a`BorderLayout`并且您将`JToolBar`in并且您在,中`BorderLayout.CENTER`有组件`NORTH`，那么我看不出它不起作用的原因。`SOUTH``EAST``WEST`

# javascript - 使用 AngularJS 创建渲染条件

> ID：14475284
> 
> 赞同：48
> 
> 时间：2013-01-23T08:28:58.533
> 
> 标签：javascript, angularjs

我知道如何在 AngularJS 中创建**视图**条件，它将根据条件显示或隐藏 dom 元素：

```
<div ng-show="{{isTrue}}">Some content</div> 
```

但是如何创建一个**渲染**条件来确定是否渲染 div？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-23T09:31:06.650

**angularjs 1.1.5 及以上用户更新（1.0.7 不支持）：**

> 相关提交： [https ://github.com/angular/angular.js/commit/2f96fbd17577685bc013a4f7ced06664af253944](https://github.com/angular/angular.js/commit/2f96fbd17577685bc013a4f7ced06664af253944)

Angular 现在有一个条件渲染指令：`ngIf`.

用法：

```
<div ng-if="conditional_expression"></div> 
```

> 请注意，当使用 ngIf 删除元素时，它的作用域被破坏，并且在元素恢复时创建一个新作用域

[文档：directive-ngIf](http://code.angularjs.org/1.1.5/docs/api/ng.directive:ngIf "ngIf 的文档")

**对于旧版 angularjs 用户：**

`ngShow`指令有条件地隐藏/显示元素。这将在其中一个新的稳定版本中进行更改，现在可以在`unstable`版本中使用`1.1.5`.

如果您想有条件地添加/删除 DOM 上的项目，请使用可以使用`ngSwitch`.

```
<div ng-switch="showMe">
    <div ng-switch-when="true">Hello!</div>
</div> 
```

实际上，该指令是为处理超过 1 个案例而创建的，但您也可以这样使用它。有关更复杂用法的示例，请参阅[此](https://stackoverflow.com/questions/14425497/angularjs-ngrepeat-with-multiple-object-types/14425547#14425547)答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:43:58.107

推荐的方法是使用**ng-include**

示例：http: [//jsfiddle.net/api/post/library/pure/](http://jsfiddle.net/api/post/library/pure/)

```
<div ng-app="">
  <div ng-controller="Ctrl">
    <select ng-model="template" ng-options="t.name for t in templates">
     <option value="">(blank)</option>
    </select>
    url of the template: <tt>{{template.url}}</tt>
    <hr/>
    <div ng-include src="template.url"></div>
  </div>

  <!-- template1.html -->
  <script type="text/ng-template" id="template1.html">
    Content of template1.html
  </script>

  <!-- template2.html -->
  <script type="text/ng-template" id="template2.html">
    Content of template2.html
  </script>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:43:37.070

至少有两种方法可以做到这一点：

*   使用模板渲染一些部分
*   使用带有条件渲染函数的简单表达式（参见下面的[小提琴](http://jsfiddle.net/XKT65/)和描述）

对于简单的组件，我建议坚持渲染功能。很容易理解。

```
$scope.render = function(condition) {        
   return condition ? "This is rendered when condition == TRUE" : "This is rendered when condition == FALSE";
}; 
```

并简单地将其包含在您的 HTML 中，如下所示：

```
{{render(true)}} 
```

你也可以用 angular 指令来包装它，这会给你很好的标记和无限的可能性！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:33:35.520

查看[angular-ui](http://angular-ui.github.com/) `if`指令。我相信这会很好地为您服务。

# c++ - Netbeans 远程 C++ 开发

> ID：14475288
> 
> 赞同：2
> 
> 时间：2013-01-23T08:29:14.193
> 
> 标签：c++, compilation, netbeans-7, remote-debugging

我的 netbeans 项目是基于 windows 的 c++ 应用程序，在 Linux (VMware) 上编译。

项目需要使用一些额外的库进行编译。我在项目属性中添加到 General、C++ Compile 和 Linker 窗口的路径和库名称。

**编译结果为：**

```
Copying project files to /root/.netbeans/remote/10.10.10.191/diman-pc-Windows-x86_64/ at root@10.10.10.191:22
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory `/root/.netbeans/remote/10.10.10.191/diman-pc-Windows-x86_64/N/VS_netbeans2/audioLoader'
"/usr/bin/gmake"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/audioloader
gmake[2]: Entering directory `/root/.netbeans/remote/10.10.10.191/diman-pc-Windows-x86_64/N/VS_netbeans2/audioLoader'
mkdir -p dist/Debug/GNU-Linux-x86
g++ -m32    -o dist/Debug/GNU-Linux-x86/audioloader build/Debug/GNU-Linux-x86/_ext/341086193/CAudioFileLoaderControl.o build/Debug/GNU-Linux-x86/_ext/341086193/audioLoader.o -L../../dclib/ebsdk/lib -lEb -lEbOS 
/usr/bin/ld: cannot find -lEb
collect2: ld returned 1 exit status
gmake[2]: *** [dist/Debug/GNU-Linux-x86/audioloader] Error 1
gmake[2]: Leaving directory `/root/.netbeans/remote/10.10.10.191/diman-pc-Windows-x86_64/N/VS_netbeans2/audioLoader'
gmake[1]: *** [.build-conf] Error 2
gmake[1]: Leaving directory `/root/.netbeans/remote/10.10.10.191/diman-pc-Windows-x86_64/N/VS_netbeans2/audioLoader'
gmake: *** [.build-impl] Error 2 
```

这意味着 netbenas 找不到我添加的库。

1.  当我开始编译时，netbeans 将所有项目文件复制到它在 Linux 主机中创建的文件夹中。*（检查）*。

2.  从添加库路径中，我提供了它只复制`*.so`文件而不是复制`*.a`文件*(CHECKED)*。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T18:02:00.927

这意味着链接器在路径 -L../../dclib/ebsdk/lib 上找不到 libEb。这不是 netbeans 错误。

# c++ - 如何将 IntPtr 类型的参数从 c# 项目传递到我的 COM DLL 项目

> ID：14475289
> 
> 赞同：1
> 
> 时间：2013-01-23T08:29:28.283
> 
> 标签：c++, c#-4.0, com, atl, typelib

我有一个类型库项目“MyLib”，我必须在其中添加一个新方法，如下所示。从我的 C# 客户端应用程序调用时，它应该`IntPtr`作为参数。

以下是“MyLib”项目中方法的 IDL 定义：

```
[id(9), helpstring("method PrintFile"), local] 
HRESULT PrintFile([in] HANDLE pDevMode); 
```

谁能告诉我在我的 IDL 文件中我应该为那个特定的参数使用什么类型？

以下是我的 C# 客户端项目代码：

```
PrintDialog PrntDlg = new PrintDialog();
PrintDocument printDocument = new PrintDocument();

printDocument.DocumentName = "filename";

PrntDlg.Document = printDocument;

PrntDlg.AllowSelection = true;
PrntDlg.AllowSomePages = true;

if (PrntDlg.ShowDialog() == DialogResult.OK)
{                  
    IntPtr PDevMode = PrntDlg.PrinterSettings.GetHdevmode();
    MyLib.PrintFile(PDevMode);
} 
```

当我`HANDLE`在 IDL 定义中使用时，会引发以下异常：

> 无法将“System.__ComObject”类型的 COM 对象转换为接口类型...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:38:21.413

You can simply use `void *` (or `LPVOID`) to pass an unformatted pointer to the unmanaged COM interface. Take a look at this [table](http://msdn.microsoft.com/en-us/library/sak564ww%28v=vs.110%29.aspx).

However creating pointers in C# to make the client fit the library is often a sign of bad API design. You should create an object or wrapper that fit's the purpose you are trying to achive and pass an instance of that object to the method. This increases compatibility and makes it easier to write clients.

# javascript - 调用 javascript 函数并点击同一锚标记中的链接

> ID：14475300
> 
> 赞同：4
> 
> 时间：2013-01-23T08:30:33.290
> 
> 标签：javascript, html, cookies, anchor, jquery-cookie

这是否可以在重定向到新页面（在我的示例中为 sample.html）之前调用 javascript 函数（例如，在此处保存 cookies（））。

在导航到新页面之前，我需要保存 cookie。

```
a href=/dashboard/sample.html onclick="savecookies()" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:36:02.437

是的，您可以通过 JQuery 来完成。您可以使用类设置任何锚链接

```
<a href="#someUrl" class="navigator (other class)" >MyAwesomeLink</a> 
```

然后在 Jquery

```
 $(".navigator").click(function(e){
     var url = $(this).attr('href').replace('#','');
    /** Save your cookie stuff here **/ 
    window.location.href = "PATH"+url;
    e.preventDefault();
    } 
```

您甚至可以“取消预防”并让 href 没有“#”符号，但我更喜欢这种方式恕我直言，如果您处理它会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T08:33:20.260

使用这样的东西：

```
$('a').click(function() {
   saveCookie();  // save cookies
   document.location.href = "sample.html";  // forward user to new page

   return false;  // ignore default src of anchor
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:41:12.177

您不需要通过 JS 代码重定向，只需获取链接并将单击函数绑定到它即可执行您的函数，然后返回 true；

```
$(function(){
    $('a').click(function() {
       //alert('clicked');
       saveCookie();
       return true;
    });
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:34:17.217

创建一个函数并粘贴用于保存 cookie 的代码，然后在函数末尾粘贴导航代码。

# android - 在kindle fire上完全隐藏软键工具栏

> ID：14475301
> 
> 赞同：1
> 
> 时间：2013-01-23T08:30:39.363
> 
> 标签：android, kindle, kindle-fire

我可以看到kindle fire播放的视频没有软键工具栏，怎么做这个效果？

我可以完全隐藏软键工具栏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:48:19.530

如果您查看 Kindle SDK 文档 - [https://developer.amazon.com/sdk/fire/cx-guidelines.html#Fullscreen](https://developer.amazon.com/sdk/fire/cx-guidelines.html#Fullscreen) - 您会看到有几个选项。一个隐藏所有内容，另一个留下一个小的拖动手柄以快速恢复工具栏

# iphone - 为什么将 MBProgressHUD 的 hide 设置为 YES，但 isHidden 方法为 NO？

> ID：14475304
> 
> 赞同：6
> 
> 时间：2013-01-23T08:30:45.673
> 
> 标签：iphone, ios, objective-c, uiview, mbprogresshud

`MBProgressHUD`当我从 Internet 下载内容时，我正在使用视图来显示加载状态。下载完成后，我调用 hide 方法来隐藏视图。我想用一个定时器通过查看视图的隐藏来判断下载是否完成，即isHidden方法。但是当我将视图的隐藏设置为**YES**，然后检查 isHidden 方法时，它返回**NO**。我不知道为什么视图会这样？

一些片段如下：

```
MBProgressHUD   *HUD; // instance variable 
```

在下载完成方法中：

```
[HUD hide:YES];
NSLog(@"HUD isHidden: %@",[HUD isHidden] ? @"YES" : @"NO"); 
```

调用该方法时，输出为 NO。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:54:48.100

根据 MBProgressHUD 的实现，他们不会使用 UIView 的 hidden 属性来隐藏它。他们只是将 MBProgressHUD 的 alpha 设置为 0，以便它不可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T09:10:24.163

**我找到：**

In `MBProgressHUD` `isHidden`Method 默认设置为**NO**，这样您就可以获得所有时间（*当您检查时*）`NO`。你不签入superviews。

对于检查`MBProgressHUD`状态**隐藏/显示**。

设置 `[HUD setHidden:YES];`之后`[HUD hide:YES];`然后之后它会正常工作。

```
NSLog(@"HUD isHidden: %@",[HUD isHidden] ? @"YES" : @"NO");
//Output in consol YES 
```

# wpf - 如何获取包含数据模板对象的逻辑树项

> ID：14475305
> 
> 赞同：0
> 
> 时间：2013-01-23T08:30:46.503
> 
> 标签：wpf, silverlight, xaml, datatemplate, hierarchicaldatatemplate

我有一个名为“TextModel”的对象。我为它定义了一个 HierarchicalDataTemplate。

像这样：

```
<HierarchicalDataTemplate DataType="{x:Type local:TextModel}"
                          ItemsSource="{Binding Children}">
  <TextBlock x:Name="TextPresenter"
             Text="{Binding Text}"
             Style="{StaticResource TextModelStyleMouseOver}" />
</HierarchicalDataTemplate> 
```

此 TextModel 包含在我的 TreeView 中的每个 TreeViewItem 中。而且，在代码隐藏中，我使用 VisualTreeHelper.HitTest 来获取我单击的 TreeViewItem，但它没有将 TreeViewItem 作为 HitTest 结果之一提供给我。HitTest 结果是：TextBlock（以及 Border、Grid 和 ScrollViewer）——我定义的 HierarchicalDataTemplate 中的那个。

我尝试使用 LogicalTreeHelper.GetParent(textBlockFromTheHitTestResults) 但它返回了一个空值。

感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:41:26.557

`HitTest`有一个可用于过滤结果的[重载：](http://msdn.microsoft.com/en-us/library/ms608753.aspx)

```
VisualTreeHelper.HitTest(
    root,
    o => o is TreeViewItem ? HitTestFilterBehavior.ContinueSkipChildren : HitTestFilterBehavior.Continue,
    r =>
        {
            if (r.VisualHit is TreeViewItem)
            {
                DoSomethingWithTreeViewItem((TreeViewItem)r.VisualHit);
                return HitTestResultBehavior.Stop;
            }

            return HitTestResultBehavior.Continue;
        },
    new PointHitTestParameters(point)); 
```

# ios - ios/Objective C - UIDocumentInteractionController - 'Open In' 方法总是返回 NO

> ID：14475313
> 
> 赞同：1
> 
> 时间：2013-01-23T08:31:15.160
> 
> 标签：ios, objective-c, uidocumentinteraction

我希望有人可以帮助我解决 UIDocumentInteractionController 遇到的一个非常令人沮丧的问题。

我需要调用“presentOpenInMenuFromRect”方法，以允许用户在另一个应用程序中打开文件。在这个阶段，我只是在做一个概念验证，所以我只是使用一个非常基本的文件类型来进行测试。

我已经使用下面的代码设置了我的 UiDocumentInteractionController，并验证了文件路径 URL 是正确的，因为我可以成功调用 presentPreviewAnimated 方法，并且文档确实在预览模式下可以正常打开。

我遇到的问题是，无论我使用什么文件类型，“presentOpenInMenuFromRect”总是返回 NO。到目前为止，我使用了以下常见的文件类型，但都无济于事：jpg、png、pdf、txt、rtf 和 html。

如果有人遇到此问题，我将不胜感激。当然，设备至少应该将这些文件中的一个识别为具有关联的应用程序（并且它预览正常的事实实际上并不能证明这一点？）我想知道我在做一些更根本错误的事情吗？我在 iPhone btw 上调试，所以这不是模拟器的怪癖。

任何建议都会非常非常欢迎！提前致谢。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSURL *filePath = [NSURL fileURLWithPath:[documentsDirectory stringByAppendingPathComponent:@"test.txt"]];

documentInteractionController = [UIDocumentInteractionController interactionControllerWithURL:filePath];
documentInteractionController.delegate = self;
[documentInteractionController retain];

// The following line does work, so we know the UIDocumentInteractionController and filepath are fundamentally correct
// [documentInteractionController presentPreviewAnimated:YES];

// Method ALWAYS returns NO, no matter what file type is used
if (![documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES])
    NSLog(@"Failed to show Open In menu"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:07:39.850

只是以为我会为其他有同样问题的人发布更新...我现在认为“打开方式”菜单未出现的原因是由于没有安装带有文件扩展名的应用程序这一简单事实我用过。

现在这似乎相当明显，但当时我假设一些更常见的文件类型将与系统应用程序等相关联 - 但是在安装 Adob​​e Reader 后，这现在似乎适用于 pdf。

# php - 在添加外键关系 mysql (5.5.29) 时会出现错误 1050：

> ID：14475314
> 
> 赞同：0
> 
> 时间：2013-01-23T08:31:17.407
> 
> 标签：php, mysql

在添加外键关系时，MySQL 给出`ERROR 1050`：

我有 2 个表并试图与其他表建立外键关系，但它给出了以下错误。

> 错误 1005：无法创建表 'yellowbikes.#sql-1e8_82'（错误号：121）

SQL 语句：

```
ALTER TABLE `yellowbikes`.`schedule` 
  ADD CONSTRAINT `bike_number`
  FOREIGN KEY (`bike_number` )
  REFERENCES `yellowbikes`.`bike` (`bike_number` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION
, ADD INDEX `bike_number_idx` (`bike_number` ASC) 
```

> 错误：运行故障回复脚本时出错。详情如下。
> 
> **错误 1050：**表 'schedule' 已存在

SQL 语句：

```
CREATE TABLE `schedule` (
   `bikeid` int(11) NOT NULL,
   `bike_number` varchar(24) NOT NULL,
   PRIMARY KEY (`bikeid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:42:20.207

检查以确保它们都是同一类型。`Schedule`有类型`utf8`。检查 whthr`yellowbikes`的类型`default`？！？！如果是这样，请将其更改为`utf8`

**编辑：**

您还可以检查您的 MySql DB 是否为 MyISAM。如果是这样，请将其更改为 InnoDB，因为如果您需要数据库来强制执行外键约束，或者您需要数据库将一组 DML 操作所做的更改作为单个工作单元来处理，那么您将选择 InnoDB 而不是 MyISAM，因为这些功能MyISAM 引擎中没有。

# javascript - 为什么我的代码不能在 Internet Explorer 上运行？

> ID：14475319
> 
> 赞同：0
> 
> 时间：2013-01-23T08:31:36.453
> 
> 标签：javascript, jquery

为什么我的代码不能在 Internet Explorer 上运行：

![在此处输入图像描述](../Images/c10efa11c96e181549d6f3c36575031d.png)

64行从这里开始：

```
$(function () {
    $('#id_laufzeit_bis').datepicker().on('changeDate', recalculate_deadline);
    $('#id_kuendigungsfrist').change(recalculate_deadline);
    $('#id_kuendigungsfrist_type').change(recalculate_deadline);

    $('#id_kuendigung_moeglichbis').change(check_reminder_date);
    $('#id_erinnerung_am').datepicker().on('hide', check_reminder_date);

    //$('#id_vertrag_verlaengerung').change(recalculate_deadline);
    //$('#id_vertrag_verlaengerung_type').change(recalculate_deadline);
}); 
```

完整代码在这里：[http ://wklej.org/hash/a8884a307f3/](http://wklej.org/hash/a8884a307f3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:04:09.730

如果你`.js`直接在 Internet Explorer 中打开一个**JavaScript** (丢失并引发此错误。

*   按下`F12`可在 Internet Explorer 上打开 Web Developer 工具。然后重新加载您的网站。

作为 Web 开发人员，您可能还希望始终启用在没有开发人员控制台的情况下显示脚本错误：

*   在**Internet 选项对话框的****高级**选项卡中，有一个复选框可以启用脚本错误的显示。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:58:10.597

看起来您对 jquery-ui 库有疑问。您似乎正在尝试在定义并可用之前访问 datepicker 方法。

我使用 document.ready 使这段代码在 IE 8 上运行

```
$(document).ready(function() {  
 $('#id_laufzeit_bis').datepicker().on('changeDate', recalculate_deadline);
}); 
```

查看完整的工作页面[@http://jsfiddle.net/n7fMK/1/](http://jsfiddle.net/n7fMK/1/)

希望这可以帮助。**

# java - Android - 如何强制孩子覆盖有代码的父方法

> ID：14475329
> 
> 赞同：10
> 
> 时间：2013-01-23T08:32:12.147
> 
> 标签：java, android, inheritance, methods

这是场景 - >假设有 3 个类，我想做一些类似的事情：

```
public class GameObject {
    public void updateBounds() {
        // do something
    }
}

public abstract class Enemy extends GameObject {
    public abstract void updatePosition(){ //<-- this will not compile, 
                                    //but this is what i want to do, to force 
                                    //child to override parent method
        updateBounds();
    }

}

public class Minion extends Enemy {
    @Override
    public void updatePosition() {
        super.updatePosition(); // <-- how do i throw an exception if this line
                                // is not called within this method of the
                                // child?
        // now do something extra that only Minion knows how to do
    }
} 
```

*   您如何设计 Enemy 类以使其具有执行某些操作但需要每个孩子都覆盖它的方法？
*   您如何强制孩子（必须重写该方法）也调用父母的方法？

这几乎就像 `Activity`具有 onCreate、onStart、onResume 等的 Android 类。方法是可选的，但如果你使用它，它会强制你调用 super. 它不能是抽象的，因为我希望在调用方法时运行一些代码（仅在父类的方法中）。如果你知道他们是怎么做到的，你会加分吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T08:41:06.907

Android Sources 使用`mCalled`在准抽象方法实现中设置为 true 的布尔值调用。在您的情况下，这将在原始`updatePosition()`.

然后，当您要调用时`updatePosition()`，请通过以下方式调用它：

```
private void performUpdatePosition() {
    mCalled = false;
    updatePosition();
    if (!mCalled) throw new SuperNotCalledException();
} 
```

`updatePosition()`看起来像这样

```
protected void updatePosition() {
    mCalled = true;
    updateBounds();
} 
```

编辑：

现在想来，android做的方式有点绕。因为所有的调用`updatePosition()`都在通过`performUpdatePosition()`，你不再需要在里面有一些`updatePosition()`可以被覆盖的代码，但不应该。

更好的方法是将所需的操作简单地移动到`performUpdatePosition()`：

```
private void performUpdatePosition() {
    updateBounds();
    updatePosition();
}

protected void updatePosition() {
    //Do nothing by default
} 
```

这样被调用者就不必担心调用`super.updatePosition`。如果子类不覆盖该函数，则不会发生任何额外的事情，而如果它们这样做，则覆盖将添加到先前的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-11T14:13:42.847

也许您可以在类中定义一个基方法，而不是调用子方法

```
public void updatePosition()
{
    //do what you need to do before the child does it's stuff
    onUpdatePosition();
    //do what you need to do after the child does it's stuff
}

protected abstract void onUpdatePosition(); 
```

这样，当您调用 updatePosition() 时，孩子必须拥有自己的 onUpdatePosition()，并且您知道父母所做的事情每次都会发生

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T08:41:24.920

> 您如何设计 Enemy 类以使其具有执行某些操作但需要每个孩子都覆盖它的方法？

为此，您的父类方法需要定义为抽象方法，这是子类知道父类中定义的方法需要在子类中定义的唯一方式。

> 您如何强制孩子（必须重写该方法）也调用父母的方法？

如果父类是抽象类，则覆盖方法。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-23T08:38:54.660

怎么样

```
public abstract class Enemy extends GameObject{
    public abstract void updatePositionCommon(){ 
        //code common to all

        updatePosition();
    }
    public abstract void updatePosition(){ 
        //override this method in children
    }

} 
```

# java - 我可以从js前端访问spring mvc存储 的会话变量吗

> ID：14475330
> 
> 赞同：0
> 
> 时间：2013-01-23T08:32:14.020
> 
> 标签：java, javascript, spring, session

我阅读了关于堆栈溢出的另一个答案，其中解释了 spring mvc 从 jsp 页面存储的会话变量的使用。

我想知道的是，对于使用 spring 作为后端的 Web 应用程序，我可以从 HTML 前端中的 JavaScript 代码访问此类会话变量吗？如果是，那么如何从 JavaScript 访问会话变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:41:35.247

您将不得不遍历会话变量并打印出将会话属性设置为数组的脚本。

例如在你的jsp代码中：

添加以下行

```
<script>
var session= new Array();
<%
for (Enumeration e = session.getAttributeNames() ; e.hasMoreElements() ;) {
     Object obj= e.nextElement();
     %>session['<%=obj%>']='<%=(String)session.getAttribute(obj)%>';<%
   }
%>
</script> 
```

这是假设您的会话属性是字符串。

现在您可以在浏览器 javascript 中访问会话属性

例如：`session['key1']` 将给出与服务器中的 key1 对应的 Session 属性的字符串表示形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:37:45.220

不，不是直接的。

考虑到会话变量存在于**服务器**的内存中，而 JavaScript 在**客户端**的浏览器中执行。一旦清楚这一点，也应该清楚为什么您不能直接访问客户端 JavaScript 中的会话变量。

如果您需要在 JavaScript 代码中读取会话变量，有一些方法可以解决。

1.  您可以将该值呈现为页面上的 JavaScript 变量
2.  您创建了一个简单的 AJAX 服务 (REST/JSON)，以便您的页面可以使用 JavaScript 中的 AJAX 向服务器发出请求并获取会话变量值

# django - django admin：在更改列表视图中将所选项目保留在不同页面上

> ID：14475333
> 
> 赞同：1
> 
> 时间：2013-01-23T08:32:26.280
> 
> 标签：django, django-models, django-forms, django-admin, django-views

关于管理员的问题：在更改[列表页面](https://docs.djangoproject.com/en/dev/intro/tutorial02/#customize-the-admin-change-list)中，是否可以在转到另一个页面并返回时保留页面的选定项目。

我是说：

1.  我在第 1 页；
2.  我选择了一些项目；
3.  然后我转到第 2 页；
4.  我选择其他项目；
5.  我回到第 1 页；
6.  我之前的选择丢失了。

是否可以将该选择保留在某处（cookie，会话，...）？

谢谢，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:18:45.797

我认为，您可以在管理员中使用 jquery 和 cookie 操作：

*   准备 js 文件，其中包含一些代码来处理选择项目时的点击，并将选定的值作为数组存储在 cookie 中（使用 jquery.cookie.js 插件，这真是个好东西）；js文件的核心可能是：

    (function($) { $(document).ready(function($) { //js 代码 }); })(django.jQuery);

*   在 admin.py 中指向 js 文件：

    类 SomenameAdmin(admin.ModelAdmin): 类媒体: js = ("/static/javascript/test.js",)

    admin.site.register(Somename, SomenameAdmin)

# ios - 更改 xib 名称

> ID：14475334
> 
> 赞同：2
> 
> 时间：2013-01-23T08:32:26.237
> 
> 标签：ios, xib

我已经更改了 xib 名称，但所做的更改并未反映在 xib 的 xml 文件中。我只是通过在项目导航器中重命名文件来更改名称。我错过了什么吗？

**编辑：** 该项目受版本控制。我已经尝试过重构。

**编辑 2：** 问题是我没有更改从 xib 引用的所有者名称，这就是 xib 的 xml 中的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:47:56.260

您是否尝试打开相应的 .m 或 .h 文件，选择类名，右键单击并选择 Refactor -> Rename... ？

这应该会更新 .m、.h 和 .xib 文件以及项目文件。

# c# - 在服务器机器上找不到路径

> ID：14475335
> 
> 赞同：0
> 
> 时间：2013-01-23T08:32:33.990
> 
> 标签：c#, path, local-network

我有一个在本地服务器上运行的 asp.net 项目。

“D:\Scan\ScannedDocs\Images”中有两个 jpg 图像。我想合并这些图像并在单击按钮后保存到“D:\BPMSITE\BPM.Marketing\MyFiles\2013_1”。服务器机器上的两条路径。

```
System.Drawing.Image imagef = Bitmap.FromFile("D:\\Scan\\ScannedDocs\\Images\\f0000007.jpg"); 
```

我尝试了一些组合，`"@"` 但`"/"` 找不到文件。

问题 s 源文件夹超出 webroot。

解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:35:34.947

对于 WebApps 映射相对路径，您可以使用 Server.MapPath 方法，更多信息在这里：http: [//msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:38:51.467

向 IIS 用户授予权限是解决方案。谢谢

# linux - linux 函数 setenv 和 putenv

> ID：14475344
> 
> 赞同：1
> 
> 时间：2013-01-23T08:33:04.753
> 
> 标签：linux, unix, operating-system

> **可能重复：**
> [关于 putenv() 和 setenv() 的问题](https://stackoverflow.com/questions/5873029/questions-about-putenv-and-setenv)

众所周知，我们可以使用函数**setenv**和**putenv**来改变环境变量。它们有什么区别？他们是否需要分配内存？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:35:43.263

从`setenv`的[手册页](http://linux.die.net/man/3/setenv)：

> `setenv()` 如果 name 尚不存在，则该 函数将变量 name 添加到具有 value 值的环境中。如果 name 确实存在于环境中，那么如果 overwrite 不为零，则其值将更改为 value；如果 overwrite 为零，则 name 的值不会改变。此函数复制由 name 和 value 指向的字符串（与 对比`putenv(3)`）。

另外，[这](https://stackoverflow.com/a/5876818/1984421).

# php - 未找到卷曲元素错误

> ID：14475349
> 
> 赞同：0
> 
> 时间：2013-01-23T08:33:35.017
> 
> 标签：php, curl

当我通过 CURL 获取网页内容然后我收到页面内容但得到错误查询结果不存在时，我陷入了困境。我总是遇到未找到元素的错误。

但是当我将 URL 放入浏览器时，得到了适当的结果。我该如何解决？

我使用的网址是`http://164.100.9.38/judis/handle/123456789/30346/simple-search?query=%28%28petitioner:ajay%29%29&from_advanced=true&query11=&query9=&query8=&conjunction8=AND&conjunction9=AND&query10=&conjunction6=AND&conjunction7=AND&field5=judge&field4=petitioner&field3=respondent&field2=caseyear&field9=abstract&field8=type&field7=datejudgement&conjunction10=AND&field6=headnotes&query4=ajay&query5=&query6=&query7=&field1=casenumber&query1=&query2=&query3=&conjunction3=AND&conjunction2=AND&conjunction5=AND&conjunction4=AND&field10=citation&conjunction1=AND&field11=keyword&num_search_field=11`

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:59:02.343

您需要先登录网站或先创建会话。他们正在使用会话。令人惊讶的是，他们在 page 上提供了会话 ID `http://164.100.9.38/judis/styles.css.jsp`。

所以**先****请求`http://164.100.9.38/judis/styles.css.jsp`**。它会设置cookie。然后请求你通常的方式。

保留您的会话 cookie 使用`CURLOPT_COOKIEFILE`和`CURLOPT_COOKIEJAR`选项。

```
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt'); 
```

# php - pdftk fill_form utf8 问题

> ID：14475350
> 
> 赞同：7
> 
> 时间：2013-01-23T08:33:38.343
> 
> 标签：php, pdf, fpdf, pdftk, fdf

> **可能重复：**
> [使用 utf-8 字符在 PHP 中将 FDF / XFDF 表单展平为 PDF](https://stackoverflow.com/questions/3973283/flatten-fdf-xfdf-forms-to-pdf-in-php-with-utf-8-characters)

我正在使用 pdftk 用来自 fdf 的数据填充模板 pdf。数据具有正确的 utf-8 字符，但是当我使用 fill_form 时，生成的 pdf 文件有格式错误。（我**不**使用`flatten`）

`š`我对, `đ`, `č`, `ć`,等字母有疑问`ž`。

谢谢。

**更新** **我的解决方案**

最后，我放弃了 pdftk，我最终使用了[fpfd](http://www.fpdf.org/)，更准确地说，我使用[了这个](http://www.fpdf.org/en/script/script93.php)脚本。我在这里也遇到了几个问题，与 pdf 文件有关。但是我使用 pdftk 来修复该 pdf（正如脚本本身所建议的那样），最后它帮助了我：它用字符填充了我的 pdf 表单，而不会弄乱它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:47:53.270

pdftk（从 v1.44 开始）无法使用 FDF 表单填充处理标准 ASCII 之外的字符。有人确实尝试修改 pdftk 以允许多字节字符支持亚洲语言，但从评论中我不确定它是否真的有效。

[http://blog.rubypdf.com/2007/07/19/pdftk-supports-chinese-path-now/](http://blog.rubypdf.com/2007/07/19/pdftk-supports-chinese-path-now/)

**相关问题：**

[使用 utf-8 字符在 PHP 中将 FDF / XFDF 表单展平为 PDF](https://stackoverflow.com/questions/3973283/flatten-fdf-xfdf-forms-to-pdf-in-php-with-utf-8-characters)

[pdftk + xfdf + php 无法处理变音符号](https://stackoverflow.com/questions/11665394/pdftk-xfdf-php-cant-handle-umlauts)

# dynamics-crm-4 - 当任何输入的 Excel 表被传递到 Microsoft CRM Dynamics 4.0 时，我们如何识别任何实体的缺失记录

> ID：14475351
> 
> 赞同：0
> 
> 时间：2013-01-23T08:33:40.740
> 
> 标签：dynamics-crm-4

我想使用数据管理下的 csv 文件导入选项在 Microsoft CRM Dynamics 4.0 中导入联系人记录。

问题是我想在上传时使用 csv 文件记录来检测 CRM 中已经存在的记录。

请帮忙，有什么办法可以做到这一点。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:24:39.560

如 SDK 中所述，为“创建”事件创建一个联系人插件，然后编写代码来检测重复项。

[客户关系管理 4.0 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=38)

[插件开发](http://msdn.microsoft.com/en-us/library/cc151096.aspx)

# java - java项目编译问题

> ID：14475353
> 
> 赞同：0
> 
> 时间：2013-01-23T08:33:52.867
> 
> 标签：java, android, jar, compilation

我需要编译这个项目： [https ://github.com/boatmeme/microsoft-translator-java-api](https://github.com/boatmeme/microsoft-translator-java-api)

我在 Eclipse 中创建了一个名为“microsoft-translator-java-api”的项目，并将所有从“com”文件夹开始的项目文件复制到我的新项目的 src 文件夹中。一切正常，但我有一些错误说我需要一个名为“json-simple”的依赖库，然后我去这里：[http](http://code.google.com/p/json-simple/downloads/list) ://code.google.com/p/json-simple/downloads/list 并下载最新的版本（1.1.1）并通过右键单击我的项目并单击“构建路径”将其导入我的项目，然后单击“添加外部档案”并将其导入我的项目......现在一切都很好我没有任何错误...

现在，我需要创建一个 jar 文件。为此，我右键单击我的项目并单击“导出”，然后从列表中选择 java->jar 文件，单击下一步，选择我的项目并取消选中右侧面板上的 .classpath 和 .project，然后单击完成并创建我的 .jar 文件...

我在我的 android 项目中需要这个文件，当在我的项目中包含这个文件并运行项目时我得到错误。这是我的日志：

> 01-23 11:44:41.016: E/AndroidRuntime(285): 致命异常: AsyncTask #1 01-23 11:44:41.016: E/AndroidRuntime(285): java.lang.RuntimeException: 执行 doInBackground 时发生错误() 01-23 11:44:41.016: E/AndroidRuntime(285): 在 android.os.AsyncTask$3.done(AsyncTask.java:200) 01-23 11:44:41.016: E/AndroidRuntime(285):在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273) 01-23 11:44:41.016: E/AndroidRuntime(285): 在 java.util.concurrent.FutureTask.setException(FutureTask.java: 124) 01-23 11:44:41.016: E/AndroidRuntime(285): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307) 01-23 11:44:41.016: E/AndroidRuntime( 285): 在 java.util.concurrent.FutureTask.run(FutureTask.java:137) 01-23 11:44:41.016: E/AndroidRuntime(285): 在 java.util.concurrent.ThreadPoolExecutor。runWorker(ThreadPoolExecutor.java:1068) 01-23 11:44:41.016: E/AndroidRuntime(285): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561) 01-23 11:44: 41.016: E/AndroidRuntime(285): at java.lang.Thread.run(Thread.java:1096) 01-23 11:44:41.016: E/AndroidRuntime(285): 由: java.lang.NoClassDefFoundError: org .json.simple.JSONValue 01-23 11:44:41.016: E/AndroidRuntime(285): at com.memetix.mst.MicrosoftTranslatorAPI.retrieveResponse(MicrosoftTranslatorAPI.java:161) 01-23 11:44:41.016: E/ AndroidRuntime(285): 在 com.memetix.mst.MicrosoftTranslatorAPI.retrieveString(MicrosoftTranslatorAPI.java:199) 01-23 11:44:41.016: E/AndroidRuntime(285): 在 com.memetix.mst.translate.Translate.execute (Translate.java:61) 01-23 11:44:41.016: E/AndroidRuntime(285): at com.memetix。MicrosoftTranslatorAndroidTestActivity$MyAsyncTask.doInBackground(MicrosoftTranslatorAndroidTestActivity.java:34) 01-23 11:44:41.016: E/AndroidRuntime(285): at com.memetix.MicrosoftTranslatorAndroidTestActivity$MyAsyncTask.doInBackground(MicrosoftTranslatorAndroidTestActivity.java:1) 01-23 11: 44:41.016: E/AndroidRuntime(285): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) 01-23 11:44:41.016: E/AndroidRuntime(285): 在 java.util.concurrent。 FutureTask$Sync.innerRun(FutureTask.java:305) 01-23 11:44:41.016: E/AndroidRuntime(285): ... 4 更多os.AsyncTask$2.call(AsyncTask.java:185) 01-23 11:44:41.016: E/AndroidRuntime(285): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 01- 23 11:44:41.016: E/AndroidRuntime(285): ... 还有 4 个os.AsyncTask$2.call(AsyncTask.java:185) 01-23 11:44:41.016: E/AndroidRuntime(285): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 01- 23 11:44:41.016: E/AndroidRuntime(285): ... 还有 4 个

当我使用“microsoft-translator-java-api”的预编译版本时，一切正常，项目运行良好。但是用我自己编译的不是...

你可以在这里找到预编译的 jar 文件：[https ://github.com/downloads/boatmeme/microsoft-translator-java-api/microsoft-translator-java-api-0.6.1-jar-with-dependencies.jar](https://github.com/downloads/boatmeme/microsoft-translator-java-api/microsoft-translator-java-api-0.6.1-jar-with-dependencies.jar)

这是我编译的文件： [https ://dl.dropbox.com/u/15006326/java/microsoft-translator-java-api-0.6.1-jar-with-dependencies.jar](https://dl.dropbox.com/u/15006326/java/microsoft-translator-java-api-0.6.1-jar-with-dependencies.jar)

有人可以检查一下并帮助我吗？我只需要在语言 .java 文件中添加波斯语（fa）语言并重新编译它......但这对我不起作用。需要这个项目： [https ://github.com/boatmeme/microsoft-translator-android-test](https://github.com/boatmeme/microsoft-translator-android-test)

仅修改 language.java 文件...请帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:43:57.247

从日志中可以看出，有一个`NoClassDefFoundError`意思是Java在运行时找不到一个在编译时可用的类。

`json-simple`已在编译时包含，但在运行时未包含。该`org.json.simple`项目被打包*在*预编译的 jar 中。

因此，要么配置 Eclipse 以构建一个*可运行的 jar*，该 jar 应该将所需的库打包到 jar 中，或者为 jar 创建一个 Manifest 并使用[Class-Path 标头](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)添加依赖项。

[使用Java Decompiler](http://java.decompiler.free.fr/?q=jdgui)将下载的二进制文件与您编译的 jar 进行比较也可能很有用，这应该可以清楚地表明差异。

# c++ - c ++初始化字符串指针数组

> ID：14475354
> 
> 赞同：0
> 
> 时间：2013-01-23T08:33:57.930
> 
> 标签：c++

`std::string`我想初始化从构造函数获得的大小指针数组。另外，我想对两个`int`数组执行相同的操作，但下面的代码无法编译：

```
class MyQuickInitArray
{
public:
    MyQuickInitArray(int size)
    {
        if(size <= 0)
        {
            throw new std::exception;
        }

        _size = size;
        _counter = 0;
        A = new std::string[size];
        B = new int[size];
        C = new int[size];
    }

    std::string& operator[](int j) {
        if(j > _size)
        {
            throw std::out_of_range("out of range");
        }

        if(((B[j]<0) || (B[j]>=_counter)) || (C[B[j]]!=j))
        {
            // A[j] points to junk
            _counter++;
            A[j] = new std::string;
            B[j] = _counter-1;
            C[_counter-1] = j;
            return A[j];
        }

        // the cell was instantiated before
        return A[j];
    }

    ~MyQuickInitArray(){};

private:
    std::string* A[];
    int B[];
    int C[];
    int _size;
    int _counter;
}; 
```

如何正确声明从 ctor 获得的大小数组？

**编辑：**

发生的错误是：

```
incompatible types in assignment of ‘std::string* {aka std::basic_string<char>*}’ to ‘std::string* [0] 
```

对于`int`数组：

```
incompatible types in assignment of ‘int*’ to ‘int [0]’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:37:29.800

它们不是在 C++ 中声明静态数组的有效方式，需要在编译时知道数组大小。如果没有一些特殊的扩展，下面的代码无法在标准 C++ 中编译。

```
std::string* A[];
int B[];
int C[]; 
```

如果你只是在玩指针，那很好。**但是，您最好考虑使用`std::vector`**

```
#include <vector>
std::vector<std::string> A;
std::vector<int> B;
std::vector<int> C; 
```

我可能会将您的代码重写为以下内容：

```
class MyQuickInitArray
{
public:
    MyQuickInitArray(int size)
      : A(size),
        B(size),
        C(size),
        size_(size),
        counter_(0)
    {     
    }

    std::string operator[](int j) const 
    {
        return A.at(j);
    }

private:
    std::vector<std::string> A;
    std::vector<int> B;
    std::vector<int> C;
    int size_;
    int counter_;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:51:36.990

我认为您想使用`std::vector<std::string>`或 `std::vector<int>`代替您的数组成员。整个代码会更简单。

但是，如果您真的想使用数组，那么您可以尝试（不是我推荐的）：

```
class MyQuickInitArray
{
public:
    MyQuickInitArray(int size):_size(0),_counter(0),A(nullptr),B(nullptr),C(nullptr)
    {
        if(size <= 0)
        {
            throw new std::exception;
        }

        _size = size;

        typedef std::string* pSTR;
        A = new pSTR[size];
        B = new int[size];
        C = new int[size];
    }

    std::string& operator[](int j) {
        if(j > _size)
        {
            throw std::out_of_range("out of range");
        }

        if(((B[j]<0) || (B[j]>=_counter)) || (C[B[j]]!=j))
        {
            // A[j] points to junk
            _counter++;
            A[j] = new std::string;
            B[j] = _counter-1;
            C[_counter-1] = j;
            return *A[j];
        }

        // the cell was instantiated before
        return *A[j];
    }

            ~MyQuickInitArray(){
               for(int j=0; j<_size; ++j)
                   if(((B[j]<0) || (B[j]>=_counter)) || (C[B[j]]!=j))
                      delete A[j];                       
               delete[]A; delete[]B; delete[]C;};
            }

private:
    std::string** A;
    int *B;
    int *C;
    int _size;
    int _counter;
}; 
```

# c# - 使用 C# Windows 窗体以相同的形式将文本从一个文本框传递到另一个文本框

> ID：14475360
> 
> 赞同：0
> 
> 时间：2013-01-23T08:34:28.430
> 
> 标签：c#, winforms, visual-studio-2010

我正在尝试做一些非常简单的事情（至少我是这么认为的）。我有一个带有 a 的表格，`Split Container`每个部分（它们都是两个）只有 a`textBox`并且我的想法是当我在 textBox1 写作时将这个文本可视化为`textBox2`. 我知道如何将一些数据从一个盒子传递到另一个盒子，但我不知道如何获取值`textBox`并将其传递给另一个盒子。我再次想提一下，这 2 个文本框是一种形式，所以我想这应该是一项非常容易的任务。这是我的代码：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            //how to get the text from textBox1?
            textBox2.AppendText("I want to pass the text form textBox1");
        }
    } 
```

而且，我正在使用`Visual Studio 2010`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:35:59.520

是不是很简单：-

```
textBox2.Text = textBox1.Text; 
```

?

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T08:38:51.883

```
 private void textBox1_TextChanged(object sender, EventArgs e)
        {                
            textBox2.Text = textBox1.Text;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:36:10.167

试试这个

```
 `private void textBox1_TextChanged(object sender, EventArgs e)
        {
            //how to get the text from textBox1?
            textBox2 = textBox1.Text;
        }` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T15:15:34.807

如果您只想从 textbox1 获取文本，请使用以下命令：

```
private void textBox1_TextChanged(object sender, EventArgs e)
        {
            //how to get the text from textBox1?
            textBox2 = textBox1.Text;
        } 
```

但是如果你想将文本从 textbox1 添加到 textbox2 使用这个：

```
private void textBox1_TextChanged(object sender, EventArgs e)      
{
            //how to get the text from textBox1?
            textBox2.AppendText(textbox1.text);
        } 
```

# c# - 将粘贴从一个表单复制到另一个 c#

> ID：14475365
> 
> 赞同：0
> 
> 时间：2013-01-23T08:34:57.627
> 
> 标签：c#

我想做什么：

1.  通过表格上的条码搜索产品`Form1`；
2.  如果找不到：
    1\. 打开`Inventory`表格 2\. 按名称或描述搜索产品
    3\. 在`ListView click`找到的产品上复制其条形码并将其粘贴到`Form1`条形码文本框中。

所有这些都是正确完成的。问题是每次我从`Inventory`表单添加产品时都会打开一个*新产品。* `Form1`

这些值未在同一处处理`Form1`，因此假设我销售 4 种产品：

*   其中2个是通过`Form1`条码搜索添加的
*   其中2个是通过`Inventory`搜索表单添加的

最后我得到了 3 个打开`Form1`的表格，一个有 2 个产品，两个有单个产品的表格（通过`Inventory`表格添加）。我需要它们合而为一。

谢谢

//-------------------------Form1---------- ----------------------

```
private void btnInventory_Click(object sender, EventArgs e)

    {
        Inventory Inventory = new Inventory();
        Inventory.Show();
    }

 private string _theValue;

    public string TheValue
    {
        get
        {
            return _theValue;
        }
        set
        {
            _theValue = value;
            txtItems.Text = value;

        }
    } 
```

// - - - - - - - - - - - - - - -存货 - - - - - - - - - ---------------

```
private void ShowForm1()
    {

        string value = label9.Text;
        Form1 newForm = new Form1();
        newForm.TheValue = value;
        this.Close();
        newForm.ShowDialog();
    }

private void lvList_Click(object sender, EventArgs e)

    {
        label9.Text = lvList.SelectedItems[0].SubItems[0].Text;
        this.ShowForm1();

    } 
```

* * *

***抱歉耽搁了，我不得不等 8 小时才再次发帖***

谢谢你的回复。

我刚试过 **Form1**

```
 private void btnInventory_Click(object sender, EventArgs e)
     {

         Inventory _inv = new Inventory();
         if (DialogResult.OK == _inv.ShowDialog())
             {
                 txtItems.Text = _inv.fugi;
             }

     } 
```

**并以库存形式**

```
private string test;
        public string fugi
        {
            get { return test; }
            set { test = label9.Text; }
        }

private void lvList_Click(object sender, EventArgs e)
        {

            label9.Text = lvList.SelectedItems[0].SubItems[0].Text;
            this.DialogResult = DialogResult.OK;
            this.Close();

        } 
```

**txtItems.Text**没有从库存表单中获取**test的值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:44:29.750

它打开一个新对话框，因为你告诉它在`ShowForm1`，我个人会改变你的 btnInventory 点击如下

```
private void btnInventory_Click(object sender, EventArgs e)
{
    Inventory _inv = new Inventory();
    if(DialogResult.OK == Inventory.ShowDialog())
    {
          valueIWantToSet = _inv.Accessor;
    }
} 
```

访问器，您需要使自己类似于

```
public TypeOfVar Accessor
{
    get{return m_privateVariableThatIWillMakeAndSetToMyBarcode;}
} 
```

编辑：一旦你得到你的条形码值，你需要设置`DialogResult`如下

```
 this.DialogResult = DialogResult.OK; 
```

然后在关闭表单之前设置您希望访问条形码的变量

Edit2：您的`ShowForm1`最终结果与此类似（可能要重命名此方法！）

```
{
this.DialogResult = DialogResult.OK;
m_myVar = SelectedItem..;
this.Close;
} 
```

**更新答案**

您仍然遇到问题，因为您没有`set`正确使用该属性，您的获取是正常的。c# 中有一个关键字称为`value`，应该用于设置器。该值将采用 = 符号右侧的任何值..您可以这样想...

`fugi = label9.Text`

在上面的行中，`fugi`使用您的属性获取器来获取需要设置为的值`label9.Text`。该`=`标志表示您打算使用该属性的设置器并将值设置`value`为`label9.Text`。

使用带有 getter 和 setter 的属性，因此您不必提供对底层变量的访问到您不想访问的地方，然后可以选择根据需要设置或获取此变量。

这意味着您的问题仍然存在，您尚未设置 的值`test`，它仍然是默认字符串值。所以你有几种方法可以解决你的问题。

第一种方法只是为 label9.Text 提供一个 getter 并消除对私有变量的需要。

```
public string Fugi //Properties should really start with capital letter
{
    get{return label9.Text;}
} 
```

第二种是在 btnInventoryClick 中调用 getter 之前设置 test 的值并删除 setter 方法

```
private void lvList_Click(object sender, EventArgs e)
{
   test = label9.Text; 
```

第三个`test`是按照方法2所示设置，但也将Fugi的设置方法更改为以下，以允许在其他地方设置此测试变量。

`set{text = value;}`

# django - Django：表单值在一步中重定向到 url

> ID：14475366
> 
> 赞同：1
> 
> 时间：2013-01-23T08:35:00.247
> 
> 标签：django, django-forms

如何从表单中获取值，并在一个步骤中重定向到名为`MyView`like的视图`MyView/formvalue1/formvalue2`？我有一个解决方案，但我认为这不是正确的方法。

详细地：

我正在尝试按照教程中的建议使用 Django-ratings

```
urlpatterns = patterns('',
    url(r'rate-my-post/(?P<object_id>\d+)/(?P<score>\d+)/', AddRatingFromModel(), {
        'app_label': 'blogs',
        'model': 'post',
        'field_name': 'rating',
    }),
) 
```

我有一个 VoteForm 视图，它呈现 VoteForm.html。在 VoteForm.html 中表单动作应该是什么？如果我把它 /rate-my-post/ 那么我不能正则表达式，因为 url 就像`rate-my-post/?objectid=x&score=y`，那么它不能被正则表达式，因为 Django 没有看到 之后的 url `?`。

我的解决方案是：我创建了另一个名为 junk 的视图，表单现在发送给它，垃圾视图获取表单值，然后垃圾将 HttpResponseRedirect 重定向到 rate-my-post。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:19:21.833

您应该使用与处理表单相同的视图（和相同的 url）来呈现表单（查看[django 文档](https://docs.djangoproject.com/en/1.4/topics/forms/#using-a-form-in-a-view)中的这个示例）。成功处理您的表单后，使用[反向](https://docs.djangoproject.com/en/1.4/topics/http/urls/#reverse)重定向到您需要的页面。

就像是 -

```
def vote_form(request):
    if request.method == 'POST': # If the form has been submitted...
        form = VoteForm(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
            # Process the data in form.cleaned_data
            # ...
            return HttpResponseRedirect(reverse('my_view_name', 
                                                kwargs={'objectid':x, 'score': y}))
    else: # We're just rendering the html form
        form = VoteForm() # An unbound form

    return render(request, 'vote.html', {
        'form': form,
    }) 
```

# c# - 清理导入的数据以确保可以将其转换为有效的 JSON

> ID：14475371
> 
> 赞同：1
> 
> 时间：2013-01-23T08:35:06.877
> 
> 标签：c#, ios, json

我有一个使用我的客户导入的数据的移动应用程序。他们不可避免地会从 Word 或其他包含在序列化时创建无效 JSON 的字符的程序中导入剪切和粘贴的数据。奇怪的是，目前这些坏数据可以在我的 C# 代码中序列化，并且可以毫无问题地发送到我的 iOS 应用程序，当它从 iOS 设备返回时，JSON 似乎已损坏。

我需要一种方法来清理这些导入的数据以去除坏字符，这样不会破坏我的 JSON。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:37:16.783

您无需执行任何清理即可对您的数据进行 JSON 编码。无论您将什么输入 JSON 编码器 - 您将*始终*获得有效的 JSON。

# html - 评论 css 在 vs2010 下的 aspx 页面上不起作用？

> ID：14475373
> 
> 赞同：2
> 
> 时间：2013-01-23T08:35:26.633
> 
> 标签：html, css, visual-studio-2010

我正在处理一个 ASPX 文件

我想评论一条 CSS 行。( `ctrl` `k` `c`)

但是它在 CSS 中不起作用。仅在 html 上

我该如何解决？

![在此处输入图像描述](../Images/a51b0a2395dcf9109f1296762f88b35b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:39:40.580

我认为 Visual Studio 只查看文件扩展名，而不是特定的上下文。由于这是 ASPX 文档中的内联样式，它只会执行 HTML（或 ASPX 等效）注释。如果您使用内联 Javascript，它也可能会失败。

如果您使用具有正确 .css 扩展名的样式表，它应该可以按预期工作并执行单行注释 ( `// ...`) 或块注释 ( `/* ... */`)。我相信 VS 会做后者，但我已经有一段时间没有使用它了。

（PS：创建一个说明问题的动画 gif 的奖励积分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:42:25.877

在 aspx 页面中注释 css 行没有默认方法。所以它只是在行中添加 asp 注释。

但是您可以录制自己的宏来执行操作。参考这个链接：

[为 CSS 发表评论](http://www.brianschmitt.com/2009/09/how-to-comment-uncomment-code-selection.html)

# android - Android：如何在 onSavedInstanceState 中将地理点放入 Bundle

> ID：14475374
> 
> 赞同：1
> 
> 时间：2013-01-23T08:35:28.117
> 
> 标签：android, google-maps

我正在使用 Google Map API 开发应用程序的路上，我*绘制了两点 ( `GeoPoint`) 成功*的路径。

而当从纵向变为横向时，*地图会失效*（因为活动生命周期），你知道吗？所以，我*失去了两分*。

我知道我们必须在方法中保存两点**`onSavedInstanceState(Bundle outState)`**。因此，我**想**`GeoPoint`在从纵向更改为横向时再次保存两个点（ ）以进行绘制。

我不知道**如何将其放入`GeoPoint`该`Bundle`方法中**。请告诉我？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:41:27.730

[API 文档](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/GeoPoint)告诉我`Geopoint`有一个带有两个参数的构造函数：纬度，经度。这两个属性都有吸气剂。因此，要么获取这些并将它们放入 中`Bundle`，要么扩展类并[使其成为 parcellable](https://stackoverflow.com/questions/7181526/example-of-implementing-parcelable)，或者制作一个包装类。任何一种解决方案都可以正常工作。

试试这个，我怀疑它会工作得很好。

```
public class ParcelableGeoPoint implements Parcelable {
    private GeoPoint point;    

    public ParcelableGeoPoint(int lat, int lon){
        point = new GeoPoint(lat, lon);
    }

    public ParcelableGeoPoint(Parcel in){
        int[] data = new int[2];
        in.readIntArray(data);
        point = new GeoPoint(data[0], data[1]);
    }

    public int describeContents(){
        return 0;
    }

    public GeoPoint unwrap() {
        return point;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeIntArray(new int[] {point.getLat(), point.getLon()});
    }
    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public ParcelableGeoPoint createFromParcel(Parcel in) {
            return new ParcelableGeoPoint(in); 
        }

        public ParcelableGeoPoint[] newArray(int size) {
            return new ParcelableGeoPoint[size];
        }
    };
} 
```

然后，把它放在你的`Bundle`with`bundle.putParcelable("MYPOINT", geopointParcelable)`

# php - fwrite(); 在特定行之前和之后

> ID：14475375
> 
> 赞同：1
> 
> 时间：2013-01-23T08:35:30.437
> 
> 标签：php, xml

我现在正在使用函数 fwrite(); 在 PHP 中。但我想在特定规则之后找到我的新事物。

这将是输出。

```
<?xml version="1.0" encoding="utf-8" ?> 
<logs>
    <log type="text">the new log</log>
    <log type="text>the old log</log>
    <log type="login">some other log.</log>
</logs> 
```

我怎样才能在新日志中而不是最后获得新日志。我只能找到类似 file_get_contents 和 str_replace 的东西。但这似乎真的没有效率。

我的PHP代码：

```
$file = $this->path.'logs.xml';
    // Open our file. And Create file if it doesn't exsist
    $fopen = fopen($file, "w+");

    // Looks if file is empty.
    if(filesize($file) == 0) {

        /*
         * Put your data in XML data.
         */
        $xmlData = "<?xml version=\"1.0\" encoding=\"utf-8\" ?> \r\n";
        $xmlData .= "<logs> \r\n";
            $xmlData .= "\t<log type=\"".$data[0]."\">\r\n";
                $xmlData .= "\t\t<author>".$data[1]."</author>\r\n";
                $xmlData .= "\t\t<action>".$data[2]."</action>\r\n";
                $xmlData .= "\t\t<result>".$data[3]."</result>\r\n";
                $xmlData .= "\t\t<note>".$data[4]."</note>\r\n";
            $xmlData .- "\t</log>\r\n";
        $xmlData .= "</logs>";

    } else {

    }

    if(is_writeable($file)) {

        fwrite($fopen, $xmlData);
        return true;

    }
    return false;
    fclose($fopen); 
```

衷心感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:40:22.473

好吧，您很幸运，您的数据是 XML 格式的。PHP 有一堆易于使用的库（扩展）来处理 XML 数据。例如[SimpleXML](http://php.net/manual/en/book.simplexml.php)或功能更强大的[DOM](http://php.net/manual/en/book.dom.php)（默认情况下启用这两个扩展）。

```
<?php
    $filename = $this->path.'logs.xml';

    if (!file_exists($filename)) {
       // Here's your code from above, although it would be easier to use
       // the libraries here, as well
    } else {
       $logs = simplexml_load_file($filename);
       // See if there's a "text" log element
       $txtlog = $logs->xpath('./log[@type = "text"]');
       ...
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:41:58.087

您可以使用该`array_splice`方法。这样你就可以在数组的任意位置插入一个新元素。

```
$file = $this->path.'logs.xml';

$content = file($file); //is array with all lines as elements.

/*
0: <?xml version="1.0" encoding="utf-8" ?> 
1: <logs>
2:    <log type="text>the old log</log>
3:    <log type="login">some other log.</log>
4: </logs>
*/

//insert the new line at position 2
array_splice( $content, 2, 0, '    <log type="text">the new log</log>' );

/*
0: <?xml version="1.0" encoding="utf-8" ?> 
1: <logs>
2:    <log type="text">the new log</log>
3:    <log type="text>the old log</log>
4:    <log type="login">some other log.</log>
5: </logs>
*/

$fopen = fopen($file, "w+");
fwrite($fopen, implode("\n", $content);
fclose($fopen); 
```

# c++ - 如何停止循环线程

> ID：14475380
> 
> 赞同：1
> 
> 时间：2013-01-23T08:35:44.853
> 
> 标签：c++, qt, qthread

我想在发出信号时停止循环线程所以这是我的代码

```
void  MyThread::stopWatchingThread()
{
    qDebug()<<"MyThread::stopWatchingThread()";    
    Keep_running=false;
    qDebug()<<"MyThread::stopWatchingThread Keep_running"<<Keep_running;
    ...
}

void MyThread::run()
{
  qDebug()<<"MyThread::run()";
  qDebug()<<"MyThread::run Keep_running"<<Keep_running;  
  while(Keep_running)
    {
     ...
     }
  qDebug()<<"MyThread::run Keep_running"<<Keep_running;
  Keep_running=false;
  qDebug()<<"MyThread::run Keep_running"<<Keep_running;
}

void Watcher::Init()
{
    WatchingThread=new MyThread(this->L_RootToWatch);
    connect(this,SIGNAL(stopmonotiring()),WatchingThread, SLOT(stopWatchingThread()));
...
}
void Watcher::StartWatching()
{
    WatchingThread->start();
}

void Watcher::StopWatching()
{
    emit stopmonotiring();        
} 
```

所以一切都很顺利，但我的问题是发射后`Keep_running`永远不会获得`false`价值，因此永远循环。我错过了什么 ？任何帮助将不胜感激。`MyThread::run()``stopWatchingThread``while`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:54:27.163

不要在 Qt 中显式创建线程类。相反，创建一个工作对象，将该对象移动到，`QThread`然后调用`start()`. `QThread`这是一个简单的例子：

```
class Worker : public QObject
{
  Q_OBJECT
public:
  Worker( QObject * parent = 0 )
    : QObject( parent )
  {}

public slots:
  void doWork( ... )
  { 
    // do work here
  }

  void stopMonitoring()
  { 
    emit finished();
  }

signals:
  void finished();
};

int main()
{
  Worker * w = new Worker();
  QThread * thread = new QThread();
  QObject::connect( w, SIGNAL(finished()), thread, SLOT(quit())
  QObject::connect( w, SIGNAL(finished()), w, SLOT(deleteLater())
  QObject::connect( thread, SIGNAL(finished()), thread, SLOT(deleteLater())
  w->moveToThread( thread );
  thread->start();

  // some other object emits a signal connected to the 'doWork()' slot.
} 
```

我省略了一些标准的 QApplication 样板，但如果你使用 Qt，你已经有了。这应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:45:58.027

由于您的 run() 方法处于阻塞状态并且从未进入事件循环，因此永远不会调用 slot stopWatchingThread。您必须调用 exec() 并且不能通过 run() 中的旋转循环阻塞事件循环。要么，要么让观察者线程直接调用 stopWatchingThread 而不是使用信号/插槽连接。我会选择后者。keepRunning 将被多个线程访问，因此您必须使用 QMutex、QReadWriteLock 或 QAtomic 来保护它。（从 QMutex 开始，这是最简单的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:42:58.257

如果您在线程中使用事件循环，只需将`quit()`信号发布到线程对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:47:28.120

也许您的 C++ 编译器优化了`Keep_running`. 尝试将其声明为`volatile`，这会告诉编译器此变量可能会“意外”更改，例如来自其他线程或硬件中断。

# c# - 使用 C# 以编程方式在客户端机器上安装 SSL 证书

> ID：14475383
> 
> 赞同：1
> 
> 时间：2013-01-23T08:35:50.190
> 
> 标签：c#, wcf

我已经使用 c# 开发了一个桌面应用程序，它通过互联网在远程服务器上使用 WCF 我需要使用 SSL 保护 WCF 服务器和桌面应用程序（客户端）之间的通信。我的问题是如何在客户端安装我的应用程序时自动或通过一些代码在客户端机器中安装 SSL。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:50:26.160

我从您的上述评论中了解到，您希望保护通过渠道流动的数据。

这可以通过 c# 代码实现 - 通过将 *.cert 文件作为项目的一部分并传入 X509Certificate2 类 .ctor 来实现。

详情请参考之前的smiliar帖子——

[问题 SSL 证书 C#](https://stackoverflow.com/questions/5713071/problem-ssl-certificate-c-sharp)

希望这对你有帮助！

# php - 包含一个包含在 php 中的文件 [(!)Warning]

> ID：14475390
> 
> 赞同：2
> 
> 时间：2013-01-23T08:36:11.610
> 
> 标签：php, path, include

> **可能重复：**
> [PHP：当我包含另一个目录中的文件时，为什么会出现这种奇怪的行为？](https://stackoverflow.com/questions/3099357/php-why-such-weird-behaviour-when-i-include-a-file-from-another-directory-which)

我在包含一个包含文件的文件时遇到问题。

*   core.inc.php 路径：`www/test/includes/core.inc.php`

*   core.inc.php 中包含的文件： `include_once ('../../connectdb.php');`

*   connectdb.php 路径：`www/connectdb.php`

*   index.php 路径：`www/test/index.php`

*   index.php 中包含的文件：`include_once ('included/core.inc.php');`

当我运行 index.php 时，会弹出以下警告：

`(!) Warning: include_once(../../connectdb.php): failed to open stream: No such file or directory in G:\wamp\www\test\includes\core.inc.php on line 7`

`(!) Warning: include_once(): Failed opening '../../connectdb.php' for inclusion (include_path='.;C:\php\pear') in G:\wamp\www\test\includes\core.inc.php on line 7`

为了动态地更改包含的路径，最佳实践是什么？请帮我解决我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:41:08.823

为避免此类问题，您可以使用 PHP 魔术常量`__DIR__`，它将被当前文件的目录替换。

例如：

```
include_once(__DIR__ . '/relative/path/to/file-to-include.php'); 
```

请注意，这`__DIR__`仅适用于 PHP 5.3+。在该版本以下，您可以替换`__DIR__`为`dirname(__FILE__)`

顺便说一句，[**自动加载**](http://php.net/manual/en/language.oop5.autoload.php)是避免包含混乱的好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:39:09.323

包含的文件`index.php`：`include_once ('./includes/core.inc.php');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:11:21.583

您在 index.php 中指向 core.inc.php 的相对路径是错误的。

你在说：“从 index.php 的位置，在目录上，它就在那里。” 但是“www”目录中没有文件“core.inc.php”。

正确的路径是“includes/core.inc.php”：从当前目录“www/test”一个目录到“includes”，就在那里。

任何提及 using`__DIR__`或`__FILE__`magic 常量也可以，但这是一种不同的方法：它将通过使用相对添加来创建文件的绝对路径。它的工作原理相同，但看起来更复杂。

如果您正在使用类，请尝试实现自动加载。然后你不需要显式地包含文件，你只需使用类。

# django - 在Django中获取对象的所有相关对象？

> ID：14475391
> 
> 赞同：1
> 
> 时间：2013-01-23T08:36:12.873
> 
> 标签：django, django-models

假设我有一个包含相关（外键）字段的模型。同样，这些外键字段可能引用可能包含或可能不包含相关字段的模型。请注意，Django 中的关系字段可能是一对一、多对一或多对多。

现在，给定一个模型的实例，我想递归地和动态地获取与其相关的模型的所有实例，无论是直接还是间接。从概念上讲，我想遍历相关对象并返回它们。

例子：

```
class Model1{
   rfield1 = models.ForeignKey("Model2")
   rfield2 = models.ManyToManyField("Model3")
   normalfield1 = models.Charfield(max_length=50)
}
class Model2{
   sfield = models.ForeignKey("Model3")
   normalfield = models.CharField(max_length=50)
}
class Model3{
   normalfield = models.CharField(max_length=50)
} 
```

比方说，我有一个 model 实例`Model1 model1`，我想获取与它直接相关的对象，即所有 Model2 和 Model3 对象，以及间接相关的对象，即与之前检索到的 Model2 对象相关的所有 Model3 对象。*我还想考虑在OTHER MODEL*上定义相关字段的一对一字段的情况。

另外，请注意，我可能不知道我当前正在处理的实例的模型。假设在前面的例子中，我现在可能不是模型`model1`的一个实例`Model1`。所以我想动态地执行所有这些。

为此，我认为我需要一种方法来获取对象的所有相关字段。

1.  如何获取对象的所有相关字段？
2.  我应该如何使用它们来获取实际的相关对象？

或者有没有办法更好地做到这一点？非常感谢！

更新：

我已经知道如何执行 1，而 2 基本上直接来自 1。:) 稍后更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T09:35:46.950

如果你有 model1 获取所有它的多对多字段名称（等）很容易，因为这是众所周知的，这些都存储在元的 'local_many_to_many' 列表中：

> [model1._meta.local_many_to_many 中字段的field.name]

外键有点棘手，因为它们与元的“local_fields”列表中的所有其他字段一起存储。因此，我们需要确保它具有某种关系。这可以按如下方式完成：

> [model1._meta.local_fields 中字段的 field.name if field.rel]

此方法不需要了解您的模型。如果名称不够，还可以对字段对象进行进一步询问。

# opengl - 更新openGL中所有顶点数据并重新计算法线的最佳方法

> ID：14475393
> 
> 赞同：2
> 
> 时间：2013-01-23T08:36:16.437
> 
> 标签：opengl, 3d, vbo

Q1：我有一个 3D 模型，它有一个顶点数组。每个元素都有 x、y 和 z 值。现在我创建了一个动态 vbo 缓冲区来在 OpenGL 中渲染这个数组。问题是我必须更新每一帧的所有顶点[这取决于一些逻辑。但可以肯定的是，这不是一个简单的转换：我的意思是它不能对所有顶点使用单个转换矩阵来完成。现在对于每一帧，我映射 vbo 缓冲区，然后更新数据并取消映射，然后渲染它。更新在 for 循环中完成。现在我想知道有没有更快的方法来做到这一点？

几点：我必须更新所有顶点。这是我的要求，我不能使用顶点子集。

Q2：我必须重新计算法线，因为顶点已经更新。为了平滑着色，我需要在一个缓慢的顶点处获取所有法线的结果。有没有更快的方法呢？基本上更快地重新计算法线以实现平滑着色。

我已经知道的一些事情：

1.  使用 SSE 优化正常计算。
2.  使用 TBB 或 openMP 来并行化循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:39:24.663

我认为转换反馈是您正在寻找的。

使用变换反馈，您可以在运行时修改顶点数据并将其用于另一个渲染，所有这些操作都可以通过 GPU 本身在顶点着色器中使用变换反馈来实现。

它在 Opengl 3.0 及更高版本中受支持。

[这](http://prideout.net/blog/?tag=opengl-transform-feedback)是一个关于如何使用转换反馈的简单示例。

[这](http://www.g-truc.net/post-0269.html)是有关反馈缓冲区使用的一些详细信息。

# email - 替代从 iOS 5.1 应用程序（如 Twitter）打开首选项

> ID：14475403
> 
> 赞同：1
> 
> 时间：2013-01-23T08:37:01.217
> 
> 标签：email, ios5, settings

我一直在尝试在我的应用程序中添加一个按钮，就像 Twitter 在 iOS 5.1 中所做的那样

![在此处输入图像描述](../Images/f0b72523bb428fdcf967cd9d78758653.png)

当他没有配置电子邮件帐户时，将用户发送到邮件设置。我不知道 Twitter 是否可以做到这一点，因为它是 iOS 中的一个框架。

较旧的解决方案，例如：

[打开网址](https://stackoverflow.com/questions/9627451/how-to-open-preferences-settings-with-ios-5-1)

不工作。

在 iOS 5.1 上执行此操作的有效方法是什么？

# r - summarise() - 计算因子的百分比和计数

> ID：14475405
> 
> 赞同：1
> 
> 时间：2013-01-23T08:37:06.950
> 
> 标签：r, dataframe, plyr, summary

我正在尝试使用 plyr-packge 中的 summarise() 来计算因子中每个级别的出现百分比。编辑：嘌呤霉素数据位于基础 R 安装中

**我的数据如下所示：**

```
library(plyr)
data.p <- as.data.frame(Puromycin[,3])
names(data.p) <- "Treat.group" 
```

**我已经这样做了：**

```
 summarise(  data.p, "Frequencies"= count(data.p), 
"Percent" = count(data.p)/ sum(count(data.p)[2] )) 
```

**得到了这个：**

```
 Frequencies.Treat.group Frequencies.freq Percent.Treat.group Percent.freq
1                 treated               12                  NA    0.5217391
2               untreated               11                  NA    0.4782609 
```

但我不希望生成 3\. 列。这是不必要的，只显示NA。

**我如何编写代码，这样我就没有得到那个 NA 列？**

任何指针表示赞赏:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:56:53.253

您的错误来自：

```
count(data.p)/ sum(count(data.p)[2] ) 
```

如果您查看分子，我们会得到：

```
R> count(data.p)
  Treat.group freq
1     treated   12
2   untreated   11 
```

因此出现警告是因为您将第一列除以一个数字，`treated/12`即`NA`. 为避免这种情况，只需选择 的第二列`count(data.p)`：

```
summarise(data.p, 
             "Frequencies"= count(data.p), 
             "Percent" = count(data.p)[,2]/ sum(count(data.p)[2])) 
```

# grasp - GRASP信息专家和GRASP凝聚力有什么区别？

> ID：14475406
> 
> 赞同：4
> 
> 时间：2013-01-23T08:37:07.237
> 
> 标签：grasp

这两个概念非常相似，很难分辨哪个是哪个。

请举例说明如何区分它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:37:54.690

所有 GRASP 概念都是相互关联的，因此您应该一起考虑它们：

1.  “信息专家”——问题是“哪个对象应该有需要的行为？” （请参阅 [http://en.wikipedia.org/wiki/Domain-driven_design](http://en.wikipedia.org/wiki/Domain-driven_design)）喜欢这个问题的答案之一。
2.  “凝聚力” - 问题是“对象有多少不同的行为” [http://en.wikipedia.org/wiki/GRASP_(object-oriented_design)](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29)

你不应该在没有编码实践的情况下学习这些概念，编写代码/进行重构 - 你会得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T06:10:44.527

GRASP 设计模式，正如这里所说的非常正确（[来自 GRASP 的 Information Expert 和来自 MVC 的 Modell 是否相同？](https://stackoverflow.com/questions/22718037/is-information-expert-from-grasp-and-modell-from-mvc-the-same?rq=1)）是设计原则，支持您评估您的设计决策和实现。

GRASP 中的“内聚”是一种与“耦合”并列的评估设计模式。因此，您必须使用它们来分析您的设计，以确定它的内聚性和松散耦合性，这直接增强了可重用性和可扩展性。

另一方面，“信息专家”可以帮助您确定应该赋予哪个班级特定的责任。它告诉您将某种责任分配给拥有**最多信息**的类。|

因此，在一个简单的购物车用例中，您可以根据数量和单价提供 ShoppingItem 来计算项目价格（），并提供 ShoppingCart 来计算总价格（）。

这成为一个关键因素，请注意大多数 GOF 设计模式实际上都支持这个 GRASP 概念。

最重要的是。如果您在设计中应用了信息专家模式，它应该在评估您的设计方面为您提供高度的凝聚力。这就是 Information Expert 和 Cohesion 将如何携手并进，就像所有其他 GRASP 模式一样。

资源：[http ://www.cs.bgu.ac.il/~oosd051/uploads/stuff/ApplyingUMLandPatterns.pdf](http://www.cs.bgu.ac.il/~oosd051/uploads/stuff/ApplyingUMLandPatterns.pdf)

# android - Android中的文件下载器

> ID：14475407
> 
> 赞同：-1
> 
> 时间：2013-01-23T08:37:12.490
> 
> 标签：android, download, android-music-player

我想创建一个音乐播放器

*   有列表项
*   onclick 每个项目
*   从 url 下载 .amr 文件并在文件夹中播放音乐播放器中保存的文件

如何创建 onclick 下载文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:31:44.123

是的，使用 AsyncTask 并在对话框中显示下载进度：

// 将对话框声明为您的活动 ProgressDialog mProgressDialog 的成员字段；

// 在 onCreate 方法中实例化它

```
mProgressDialog = new ProgressDialog(YourActivity.this);
mProgressDialog.setMessage("A message");
mProgressDialog.setIndeterminate(false);
mProgressDialog.setMax(100);
mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

DownloadFile downloadFile = new DownloadFile();

downloadFile.execute("Put here the URL .amr file");

private class DownloadFile extends AsyncTask<String, Integer, String> {
    @Override
    protected String doInBackground(String... sUrl) {
        try {
            URL url = new URL(sUrl[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            // this will be useful so that you can show a typical 0-100% progress bar
            int fileLength = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/file_name.extension");

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            // publishing the progress....
            publishProgress((int) (total * 100 / fileLength));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
    }
    return null;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog.show();
}

@Override
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);
    mProgressDialog.setProgress(progress[0]);
} 
```

}

# pentaho - 在水壶中，java脚本中的输出字段是什么以及如何在其中使用setVariable

> ID：14475408
> 
> 赞同：0
> 
> 时间：2013-01-23T08:37:16.037
> 
> 标签：pentaho

在水壶中，java脚本中的输出字段是什么以及如何在其中使用setVariable。我试图在其中设置变量，但它给了我错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T07:22:28.610

javascript 步骤从前面的步骤中获取输入，并且可以从输入字段中访问。如果要将相同的字段传递给输出，则需要我们输出字段。

此外，如果您想在 javascript 步骤中设置变量，您可以使用

```
setVariable("variablename","value","type"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T12:10:09.623

他们是两个不同的东西。javascript 如果在流中连接，则将所有字段（列）作为输入，并可以使用常规 javascript 操作它们。

如果您想要一个将成为流一部分的新变量，您需要做的就是： var X;

然后您可以将此 X 写为步骤底部的输出。给它一个名字并使用它

因此，如果您使用 x = fieldA + fieldB 之类的东西，您可以在流上使用 x 。

用于在一项工作中设置变量以在另一项工作中使用的设置变量更像是编程中的全局/公共。

如果您想了解更多信息，可以参加我的课程，只需单击[pentaho 水壶教程](http://pentahokettletutorial.com) ，这两个步骤都有课程（视频）

# c# - 迭代 BindingNavigator 中的所有控件

> ID：14475410
> 
> 赞同：1
> 
> 时间：2013-01-23T08:37:21.213
> 
> 标签：c#, winforms, controls, toolstripbutton

我有一些 Windows 窗体，每个窗体都有一些控件，包括按钮、ComboBox ......而且在每个窗体中我都有一个 Bindingnavigator 控件，我向它添加了一些新的工具条按钮，我如何编写一个获取 3 个参数的通用方法和迭代表单上的所有控件（包括该工具条按钮）并启用/禁用特殊控件的启用状态？我的方法签名是这样的：

```
Public SetStatusOf(Form frm,string controlName,bool status) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:51:09.410

从问题和我的理解来看，你需要这个：

```
 foreach (Control c in frm.Controls)
    {
        if (c.Name.Equals(controlName))
            c.Enabled = status;
    } 
```

但你也可以直接使用

```
frm.Controls[controlName].Enabled = status; 
```

# javascript - 密码字段获得焦点后启用表单登录按钮

> ID：14475412
> 
> 赞同：0
> 
> 时间：2013-01-23T08:37:23.130
> 
> 标签：javascript, jquery, html, css

大家好，我有一个登录页面，其中包含两个输入用户名和密码以及一个按钮。我想在密码字段填写第一个字符后在该按钮上放一个类。我该怎么做，谢谢。如果可以仅使用 css 来做到这一点，那就太棒了，或者使用一个小脚本在该按钮上添加一个类。

```
<form>
   Username  <input type="text" name="first" id="first" /><br/><br/>
   Password  <input type="text" name="last" id="last" />
    <br/>
</form>

<input class="crbl" type="submit" name="last" id="last" value="login button" /> 
```

css

```
/*Normal State*/
.crbl{
    margin-top:10px;
   border:1px solid #555555;
    border-radius:5px;
}
/*after password field has one character filled in state*/
.class{
???
} 
```

小提琴：

[http://jsfiddle.net/uGudk/16/](http://jsfiddle.net/uGudk/16/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:44:04.457

你可以使用`toggleClass`和`keyup`方法。

```
// caching the object for avoiding unnecessary DOM traversing. 
var $login = $('.crbl'); 
$('#last').keyup(function(){
   $login.toggleClass('className', this.value.length > 0);
}); 
```

[http://jsfiddle.net/5eYN5/](http://jsfiddle.net/5eYN5/)

请注意，ID 必须是*唯一的*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:42:34.327

您可以使用 javascript 来做到这一点。您需要输入密码的第一件事是输入以下事件

```
Password  <input type="text" name="last" id="last" onkeyup="myFunction(this);"/> 
```

然后定义 javascript 函数：

```
function myFunction(element) {
    if (element.value != '') {
         document.getElementById('last').attr('class','password-1');
    } else {
         document.getElementById('last').attr('class','password-0');
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:44:24.767

**确保您的 ID 是唯一的**.. 因为您在小提琴中有两个同名的 ID.. 我将密码 id 更改为“密码”...

用于`keyup()`检查按下的键..并`addClass()`添加类..

试试这个

```
$('#password').keyup(function(){
  if($(this).val()==''){
    $('#last').removeClass('newclassname'); //if empty remove the class
  }else{
    $('#last').addClass('newclassname');  // not not empty add
  }
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/uGudk/23/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T08:45:48.967

你可以试试这个[演示](http://jsfiddle.net/muthusamy/uGudk/19/)

```
 jQuery(document).ready(function(){
        jQuery('#last').keyup(function(event){
            var password_length =jQuery("#last").val().length;
            if(password_length >= 1){
           jQuery("#last_button").addClass('someclass');
            }
else
{
jQuery("#last_button").removeClass('someclass');
}   
        });   

    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T08:47:17.577

这是处理整个输入的最佳方式，使用“on()”Jquery 方法。使用第一个父母

```
 <form id="former">
   Username  <input type="text" name="first" id="first" /><br/><br/>
   Password  <input type="text" name="last" id="last" />
    <br/>
</form>
<input class="crbl" type="submit" name="last" id="last_btn" value="login button" /> 
```

然后在 Jquery

```
$("#former").on('keydown, keyup, keypress','#last',function(e){
    var value = $(this).val();
    if ( value.length > 0 ) {
        $("#last_btn").addClass('class'):
    }else{
        $("#last_btn").removeClass('class');
    }
}); 
```

使用“on”方法，您可以处理许多输入事件，如您所见......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T08:53:26.853

```
 <script type="text/javascript">
            $('#YourTextBoxId').keyup(function (e) {
                if ($(this).val().length == 1) {
                    $(this).toggleClass("YourNewClassName");
                }
                else if ($(this).val().length == 0) {
                    $(this).toggleClass("YourOldClassName");
                }
            })
        </script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-23T09:07:50.967

对此进行测试：http: [//jsfiddle.net/uGudk/33/](http://jsfiddle.net/uGudk/33/)

请考虑对所有表单元素使用唯一的 id，并使用唯一的输入名称。

```
$(document).ready(function(){
   $("input[name=last]").keydown(function () {
       if($(this).val().length > 0){
          $(this).attr("class", "class");
           //or change the submit button
           $("input[type=submit]").attr("class", "class");
           //or if you want to enable it if originally disbaled
           $("input[type=submit]").removeAttr("disabled");
       }
    });   
}); 
```

# c++ - 在游戏中显示帧的最快方法

> ID：14475413
> 
> 赞同：-2
> 
> 时间：2013-01-23T08:37:23.863
> 
> 标签：c++, c

我正在使用`system("cls")`and创建游戏`printf`。我有一个用于该字段的二维字符数组。我每 0.5 秒刷新一次屏幕并显示整个字段，但屏幕闪烁严重。无论如何我可以使它顺利。
我的操作系统是 Windows。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:47:26.720

使用 ncurses（或 pdcurses，在 Windows 上可能更容易设置。）如果不能，请不要清除屏幕，因为这会导致闪烁。相反，将光标再次定位到左上角 (0, 0) 然后绘制。要将光标定位在 0、0 处，您可以执行以下操作：

```
#include <windows.h>
// ...
HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE); 
COORD position = {0, 0};
SetConsoleCursorPosition(handle, position); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:39:00.730

另一种选择是[创建第二个屏幕缓冲区](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682088%28v=vs.85%29.aspx)。您可以直接写入此内容，因为它不可见。当您准备好新帧时，将可见缓冲区与第二个缓冲区交换。这会立即显示新帧，您现在可以在原始缓冲区中绘制。

这种技术被广泛使用，被称为*双缓冲*。

# java - 如何从 android 应用程序中使用 asmx 网络服务，它在 android 应用程序中返回一个对象？

> ID：14475417
> 
> 赞同：1
> 
> 时间：2013-01-23T08:37:37.537
> 
> 标签：java, android, web-services, asmx

我是 Android 开发新手，从我的 android 应用程序调用 asmx Web 服务时遇到了一些问题。

我正在使用以下代码从我的 android 应用程序调用 asmx webservices。

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        SoapObject request=new SoapObject(NAMESPACE,Method_Name);

        PropertyInfo p=new PropertyInfo();
        p.setName("Item");
        p.setValue(itm);
        p.setType(itm.getClass());
        request.addProperty(p);

           SoapSerializationEnvelope envelope=new  SoapSerializationEnvelope               (SoapEnvelope.VER12);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);
        envelope.addMapping(NAMESPACE, "ItemById",new Item().getClass());
        HttpTransportSE androidTSE=new HttpTransportSE(URL);

        androidTSE.call(Soap_Action, envelope);
        SoapObject response=(SoapObject) envelope.getResponse();
        itm.ItemId=Integer.parseInt(response.getProperty(0).toString());
        itm.Itemname=response.getProperty(1).toString();
        Log.i("ItemName",itm.Itemname);
        tv.setText(itm.Itemname); 
```

当我调用该服务时，我将 Itemname 设为 0。但该应用程序在我的 dotNET 应用程序中运行良好。

可能是什么问题？如何知道连接是否已建立？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:30:53.417

你替换下面的方法

```
 HttpTransportSE androidTSE=new HttpTransportSE(URL); 
```

进入

```
 AndroidHttpTransport androidTSE= new AndroidHttpTransport(URL, Timeout);
 androidTSE.debug = true;
 androidTSE.call(SOAP_ACTION, envelope); 
```

# java - 空 NoClassDefFoundError 的原因可能是什么？

> ID：14475426
> 
> 赞同：0
> 
> 时间：2013-01-23T08:38:22.663
> 
> 标签：java, exception, classloader

我收到消息值为 null 的 NoClassDefFoundError。我不知道哪个类有初始化问题。顶级跟踪是类的构造函数，而不是类的静态部分。这种异常的原因是什么？

```
java.lang.NoClassDefFoundError
    at com.company.xyz.FooBar.<init>(FooBar:76) 
    .... 
```

FooBar第76行的代码：

```
drv = data.get( i ).getDrivers();
drvnameToAdd = Msg.getMsg( "msgkey" ); <-- line 76
allNotImported.add( drvnameToAdd ); 
```

来自 Msg 类的一些代码：

```
private static final ResourceBundle LANGUAGE_RESOURCES;
static {
    LANGUAGE_RESOURCES = ResourceBundle.getBundle( "com.company.xyz.i18n.LanguageResources" );
}

public static String getMsg( String msgID ) {
    String msg;
    try {
        msg = LANGUAGE_RESOURCES.getString( msgID );
    } catch( Throwable e ) {
        msg = "$" + msgID + "$";
    }
    return msg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:04:41.667

大多数时候 java.lang.NoClassDefFoundError 不是实际问题。在此之前应该有另一个例外。对此类的任何访问都将触发 NoClassDefFound ，但这仅意味着未加载该类。它没有告诉你为什么。第 76 行可能有答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:41:04.970

我认为您正在使用依赖于另一个 .jar 文件的库 (.jar) 文件，但当前项目中没有包含该依赖的 .jar 文件。请列出完整的错误消息，以便我们查看确切的问题 =D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:34:24.550

最有可能的是，您的代码针对特定版本的库编译，并针对另一个版本运行。这基本上是一个链接错误。识别导致问题的库并不总是微不足道的，但行号应该表明在错误发生时正在加载哪个类。

*更新*：在您发布的堆栈跟踪中，错误源自 com.company.xyz.FooBar 类的构造函数（第 76 行），毫无疑问是 gov.nasa.programs.supersecret.bases.alphacentauri 的替代品。

该类必须依赖于此时无法加载的另一个类，这很可能是因为它不存在于编译它的确切版本中。请注意，实际问题可能在链条的下游，因此如果您排除它，请务必查看该类的依赖关系。

# backbone.js - 使用backscorejs模板在underscorejs模板中迭代_.each时获得未定义

> ID：14475430
> 
> 赞同：0
> 
> 时间：2013-01-23T08:38:33.877
> 
> 标签：backbone.js, underscore.js, codeigniter-restserver

我正在使用库 philsturgeon/codeigniter-restserver 获取 JSON 当我检查控制台的响应部分时，我得到了返回的正确 JSON 值，例如

```
this: [{name:test,address:test},{name:test2,address:test2}]. 
```

在前面，我希望这些值显示在模板中。但它只会`{"readyState":1}`在我这样做时返回`<%= JSON.stringify(ledgers) %>`。

我从我的视图中调用模板，如下所示：

```
$("#container-left").html(this.template({ledgers:app.ledgers.fetch()})); 
```

我的 REST 控制器功能如下所示：

```
public function index_get()
{

    $this->response($this->db->get('ledgers')->result());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:45:40.293

您没有`fetch`正确使用该方法。因为`fetch` 调用时不返回数据，所以您需要提供`success`回调来填充模板：

```
var self = this;
app.ledgers.fetch({
    success: function(model, response, options) {
        $("#container-left").html(self.template({ledgers: model}));
    }
}); 
```

该`_.each`函数本身不会返回任何内容，因此当您输出返回值时，您会得到未定义的值。

您需要在函数内输出数据`<%= name %>`

```
<% _.each(ledgers, function(data){  %> <%= name %> <% }) %> 
```

演示[JSFiddle](http://jsfiddle.net/yfr4g/)。

# crystal-reports - 多个字段的摘要（平均值，最小值，最大值） - Crystal Reports

> ID：14475431
> 
> 赞同：0
> 
> 时间：2013-01-23T08:38:36.097
> 
> 标签：crystal-reports

Visual Studio 中的水晶报表

我希望能够在多个字段中显示总最小值、最大值和/或平均值。

我的场景：
在一次测量中，测量了几个探头。有多个相同的测量值。

在数据集中（我们称之为测量）是称为 K1、K2、...、K10 的字段（探针 1 到 10）。我显示 K1、K2、...的系列平均值（多次测量）但是是否可以制作公式或字段，在其中我可以从 K1 - K10 的所有行（所有测量中的所有探针）获得总平均值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:08:50.063

如果所有探头 K1 到 K10 在您的测量中具有相同的权重，那么平均（行上的平均（第 j 行的 Ki））= 平均 (Ki,j)，对吗？

因此创建一个公式平均每行 = (K1 + K2 +... +K10)/10

然后插入一个汇总字段作为“平均每行”的平均值

考虑到最小值和最大值，不涉及权重，因此公式将为每行最小值 = Min(MakeArray({K1},{K2},...) 每行最大值 = Max(MakeArray({K1},{K2 },...) 然后相应地插入摘要

# c# - 从“始终复制”切换到“如果更新则复制”的风险

> ID：14475433
> 
> 赞同：13
> 
> 时间：2013-01-23T08:38:37.983
> 
> 标签：c#, visual-studio

为了避免重建尚未触及的库，我将某些文件的*Copy to Output Directory从**Copy always*更改为*Copy，如果*在某些 c# 项目中较新。

更改设置的文件将其*构建操作*设置为*Content*、*Embedded Resource*或*Resource*之一。

随之而来的风险是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T08:46:57.840

除了这可能已经过时（例如，由于嵌入了资源），我现在唯一能想到的风险是您可以使用过时的文件，以防某些程序在不更新文件时间戳（或修改此时间戳）的情况下更改某些内容. 例如，您可以对文件进行一些本地更改，然后使用某种文件版本控制系统（如 SVN 或 HG）恢复其内容。然后，Visual Studio 可能不会注意到恢复的文件，也可能不会复制它。

# matlab - 单元格操作 - 为每个单元格添加操作

> ID：14475435
> 
> 赞同：0
> 
> 时间：2013-01-23T08:38:41.417
> 
> 标签：matlab

我有一个`mat2cell A`12*12 块单元格，每个单元格 8*8 像素。然后我有`mat2cell B`8*8 块单元格，每个单元格 8*8 像素。

我想进行操作，使每个单元格`mat2cell` `B`与整个单元格相加`mat2cell A`。

```
A = mat2cell(x, [8 8 8 8 8 8 8 8 8 8 8 8] , [8 8 8 8 8 8 8 8 8 8 8 8]);
B = mat2cell(y, [8 8 8 8 8 8 8 8] , [8 8 8 8 8 8 8 8]); 
```

我想`A{1,1}`添加到每个单元格`B{1,1}`, `B{1,2}`, `B{3,5}`, 与 A{1,2} 相同，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:22:06.970

我不完全清楚你的意思`"whole cell in mat2cell A"`。在 A 中，您有 144 (12*12) 个单元格，并且您想将这些单元格中的每一个都添加到 B 中的每个单元格中？

如果是这种情况，那么我将首先将 A 中的所有 144 个单元压缩成一个 8*8 像素的单元。如果您要将 A 的每个元素添加到 B，那么首先将 A 的所有元素添加到一起，然后再一次添加到 B。

所以从 A 开始，这会给你一个 3 维数值数组 - 第 3 维是你的 144 个单元格

```
Amat=cell2mat(A(:)');
A3D = reshape(b,8,8,144); 
```

然后，您可以对 3 维上的所有像素求和，将结果放回元胞数组中

```
Asum = {sum(A3D,3)}; 
```

现在，您在 8*8 像素的单个单元格中获得了 A 的总和值，然后您可以将其复制以匹配数组 B 的大小。

```
AA = repmat(Asum,8,8); 
```

最后添加两个单元格数组使用 cellfun

```
C = cellfun(@plus,AA,B,'UniformOutput',false); 
```

这将添加 A 的每个元素，从 A{1,1} 到 A{12,12} 到 B{1,1} 然后 B{1,2} 等等直到 B{8,8}

# java - Android中使用的onPrepareOptionsMenu

> ID：14475436
> 
> 赞同：1
> 
> 时间：2013-01-23T08:38:51.460
> 
> 标签：java, android, menu

我想使用android菜单功能。
而且我已经设置了onPrepareOptionsMenu()，
并设置了内容。
但我有问题，我的垫没有菜单图标可以点击。
我还需要设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:15:58.730

由于 Android 3.0 (Honeycomb) 是专为平板电脑制作的，没有更多的硬件菜单按钮（但手机仍然有一个），因此要在平板电脑上使用 ActionBar，您可以按照以下教程进行操作：

[http://www.dreamincode.net/forums/topic/274639-android-actionbar-tutorial/](http://www.dreamincode.net/forums/topic/274639-android-actionbar-tutorial/)

并阅读：

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T11:42:12.207

如果您的设备有硬件菜单键，则不会出现右上角的[溢出选项菜单图标（看起来像 3 个点）。](http://developer.android.com/design/patterns/actionbar.html)

您的设备必须至少在 3.x 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:44:18.540

在平板电脑中，您已在活动中实施 ActionBar。要启用和使用 ActionBar，您必须为您的活动使用 Titlebar。只需在 style.xml 中创建具有标题栏的主题并将其存储在 value-xlarge 目录中以用于大屏幕。并通过使用此 getActionBar() 获取 ActionBar 对象。

注意：如果您的 minSDK 低于 11，则必须使用 API 11 或更高版本，然后您已检查操作系统版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:00:44.570

如果您设置`android:targetSdkVersion`大于 10 并且您`NoTitleBar`在运行 Android 3+ 且没有菜单按钮的设备中使用主题，则后退按钮旁边不会显示软件菜单按钮。如果您希望启用该选项，请将您的 targetSdkVersion 设置为 10 并测试您的设备是否会显示软件菜单按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T08:53:17.087

而不是使用

> onPrepareOptionsMenu(),

用于在创建菜单选项后更新文本和其他内容，使用

> public boolean onCreateOptionsMenu（菜单菜单）

菜单项的选择可以通过

> 公共布尔 onOptionsItemSelected（MenuItem 项）

可以找到许多用于菜单创建、更新和选择的示例。

# jquery - 从 url 获取 JSON 给出错误 [object object] not found

> ID：14475438
> 
> 赞同：2
> 
> 时间：2013-01-23T08:38:54.470
> 
> 标签：jquery, json

我正在从 url 请求 JSON 数据，但它给出的错误为

**GET http://localhost:10560/[object%20Object] 404（未找到）**

```
 var mydata;
$.getJSON({
    url: 'http://free.worldweatheronline.com/feed/weather.ashx?q=City,Country&callback=?&format=json&num_of_days=2&key=1111111111111111',
    dataType: 'json',
    success: function (data) {
        mydata = data;
        console.log(mydata);
    }
}); 
```

如何获取json文件并解析它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:35:56.340

您对 jQuery.getJSON() 的使用不正确，文档：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

使用任一：

```
var mydata;
$.getJSON("http://free.worldweatheronline.com/feed/weather.ashx?q=City,Country&callback=?&format=json&num_of_days=2&key=1111111111111111",function(data){
   console.log(data)
}) 
```

或者：

```
var mydata;
$.ajax({
   url: 'http://free.worldweatheronline.com/feed/weather.ashx?q=City,Country&callback=?&format=json&num_of_days=2&key=1111111111111111',
   dataType: 'jsonp',
   success: function (data) {
       mydata = data;
       console.log(mydata);
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:21:10.803

你可以在这里检查它的一种方法 - 使用[服务 Jquery Json](https://rvieiraweb.wordpress.com/2013/01/21/consuming-webservice-net-json-using-jquery/)

# html - Button 中的 HTML 表单属性

> ID：14475440
> 
> 赞同：0
> 
> 时间：2013-01-23T08:38:55.487
> 
> 标签：html, forms, button

我的 html 文件中有两个表单。他们都通过一键提交。我可以用这个按钮连接两个表单吗？类似的东西 `<button form="firstFormId secondFormId"> Save </button>`。这会有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:08:11.010

您有多种解决方案可以做到这一点，如果您正在使用它，我会使用 javascript，甚至更好的是 jQuery。

如果您不使用 jquery，则可以使用 javascript 执行以下操作：

在页面某处放置一个“提交”链接：

```
<a href="javascript: submitform()">Submit</a> 
```

为每个表单分配一个唯一的名称，比如“myform1”和“myform2”。然后在您的页面中包含以下内容：

```
<script type="text/javascript">
    function submitform(){
          document.myform1.submit(); // submit form 1
          document.myform2.submit(); // submit form 2
    }
</script> 
```

在将名称分配给表单之后，您甚至可以简单地放置以下链接，而不是调用外部函数，以使事情尽可能简单：

```
<a href="javascript: document.myform1.submit();document.myform2.submit();">Submit</a> 
```

如果您使用的是 jQuery，我建议采用这种方式，您可以简单地将给定的类分配给两种表单，比如说“submit-me”，然后添加到您的代码中：

```
$('.submit-me').submit() 
```

在以上所有内容中，我肯定会推荐最后一个，它依赖于 jQuery。它易于维护，可重用（意味着它可以应用于任何具有 class 的表单`submit-me`，并且所有工作都由 jQuery 完成。请注意，在所有示例中，您不再需要表单的“经典”提交按钮。

未经测试，但我希望它能满足要求！:-)

# http - 为什么服务器不能用http推送数据？

> ID：14475444
> 
> 赞同：0
> 
> 时间：2013-01-23T08:39:12.890
> 
> 标签：http, protocols

为什么 http 基于**请求/响应**？为什么服务器不能用http直接向客户端推送数据，必须是客户端请求的响应？在连接开始时，我知道客户端必须发送请求，但为什么之后客户端必须继续请求/响应/请求/响应。long polling、comet、Bosh等**服务器推送**方式也是基于req/resp方式，没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:01:22.893

你所有的问题都ok！[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)定义了 WebSocket 协议。HTTP 1.1 支持不需要您遵循请求/回复模式的双向类 TCP 套接字。最初的规范只支持 UTF-8 字符编码，但现在有了现代浏览器，二进制数据也可以通过网络发送。使用 WebSockets 提供了一种构建 Web 应用程序的新方式，但它不断增长的浏览器支持使其成为现代网站的可行选择。

Node.js 是将 WebSocket 与[Socket.IO](http://socket.io)库一起使用的最简单方法。一定要检查一下。

# linux - lspci 未显示 HyperV 网络适配器

> ID：14475445
> 
> 赞同：3
> 
> 时间：2013-01-23T08:39:16.850
> 
> 标签：linux, networking, debian, hyper-v

我目前正在尝试在 HyperV 上设置一个 debian 虚拟机（最终目标是在 azure 中运行这台机器，它在后台使用 HyperV 虚拟化），但我无法启动网络。

该机器最初是在 VirtualBox 中创建并导出为 VHD 映像，然后在 hyperV 服务器中重新导入。已删除所有 VirtualBox 来宾添加并安装了 hyperV linux 集成工具。

服务器配置为为主机的其中一个网络适配器提供外部虚拟网络，并且我已将此虚拟网络的 natwork 适配器添加到我的 VM 中。

但是，当我在来宾上运行 lspci 时，我看到：

```
root@debian:-# lspci 
00:00.0 Host bridge: Intel Corporation 44013X/2X/DX - 824438X/2X/DX Host bridge ( AGP disabled) (rev 03) 
00:07.0 ISA bridge: Intel Corporation 82371AB/EB/MB PIIX4 ISA (rev 01) 
00:07.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01) 
00:07.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 02) 
00:08.0 VGA compatible controller: Microsoft Corporation Hyper-V virtual VGA 
```

我在[这里](http://wiki.debian.org/WindowsServerHyperV#step-by-step-installation)读到模拟网络设备位于`1011:0009`，但`lspci -d 1011:0009`没有显示任何内容。

我真的不知道从哪里开始，任何帮助将不胜感激:)

-安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:32:09.077

添加网络适配器时，您必须使用旧版网络适配器，然后将其设置为连接。

[在 Windows Server 的 Hyper-V 中运行 Debian](http://wiki.debian.org/WindowsServerHyperV)有一个关于 HyperV 和 Debian 的教程

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T12:05:40.313

（非传统）网络适配器没有显示行。只需加载内核模块（`hv_netvsc`）并使用`ifconfig -a`查看，如果接口在那里......

要构建这个内核模块，请查看[http://dietrichschroff.blogspot.de/2013/03/hyper-v-compile-linux-kernel-with.html](http://dietrichschroff.blogspot.de/2013/03/hyper-v-compile-linux-kernel-with.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-29T13:05:09.963

通过在 /etc/sysconfig/network-scripts/ifcfg-eth0 和 Virtual Machine Manager 2012 的 vm 硬件配置中定义 mac 地址，我已经能够使用 Hyper-V 网络适配器（非旧版）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T12:00:13.477

似乎您已经在使用一些 Hyper-v 模块（Microsoft Corporation Hyper-V virtual VGA），您可以`lsmod | grep hv`看到加载的 Hyper-V 模块（、、、、）`hv_vmbus`您`hv_netvsc`还可以通过运行来查看实际接口。我建议不要编译新内核，而是进行发行版升级：`hv_blkvsc``hv_storvsc``ip link show`

如果你运行的是 Debian 6 (Squeeze)，你可以升级到 7 (Wheezy)，很简单：每次都回答 Y。

```
apt-get update  
apt-get upgrade  
nano /etc/apt/sources.list replace every squeeze with wheezy, ctrl+x, Y,enter.  
apt-get update  
apt-get upgrade  
apt-get dist-upgrade  
reboot 
```

您的新内核将被选中，登录，然后您可以`lsmod | grep hv`看到加载的 Hyper-V 模块（`hv_vmbus`, `hv_netvsc`, `hv_blkvsc`, `hv_storvsc`），连接您的非旧版网络适配器，`ip link show`然后您会看到它（您可以通过检查 MAC 来确定）。
但为什么要留在那里？现在您可以按照相同的说明进入 Debian 8.2 (jessie)，但这次在您的源列表中使用“jessie”。
我无法直接从 6 转到 8。
如果您遇到“公钥不可用”的问题，请按照[此处](https://stackoverflow.com/questions/1139127/how-to-trust-a-apt-repository-debian-apt-get-update-error-public-key-is-not-av)的说明进行操作。

享受。

# php - PHP-文件下载

> ID：14475449
> 
> 赞同：0
> 
> 时间：2013-01-23T08:39:28.900
> 
> 标签：php

我已经为培训上传了多个文件，并根据 training_ID 列出了它们。如何下载与 training_id 关联的具有多个文件的单个文件？我有 .txt、.pdf、.docx 和 .pptx 文件类型。这是我尝试过的 PHP 文件。

```
<?php
$id= $_GET['id'];
$mysqli = new mysqli("localhost","root","pass","test");
if ($mysqli->connect_errno)
{
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}
$query = "SELECT Material_Name,Material_Data from Training_Material where     Training_Id='{$id}'";
$result = $mysqli->query($query);
if($result) 
{
    $row = mysqli_fetch_assoc($result);
    header("Content-Disposition: attachment; filename=". $row['Material_Name']);    
    echo $row['Material_Data'];
    @mysqli_free_result($result);
}
else 
{
    echo "Error! Query failed: <pre>{$mysqli->error}</pre>";
}
?> 
```

没有发生此文件下载。

这里 DB 中的 Material_Data 列包含使用 file_get_contents 方法获取的上传文件的内容。我应该怎么做才能使下载发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:43:49.270

在我有多个可用许可证数据的站点之一上，我所做的是将所有必需的许可证文件复制到临时文件夹，创建一个包含所有内容的 zip 存档，然后将 zip 文件推送给最终用户并删除临时文件数据.

这有几个好处单文件下载，压缩文件，所以下载减少带宽压力。在编译 zip 和磁盘 IO 以移动文件时，处理器使用也有一些缺点。然而，我认为在现代硬件上，IO/CPU 几乎与最大的网站无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:44:50.397

您应该像这样发送内容类型标头：

```
header("Content-Type: plain/text"); 
```

# list - 使用 lisp 中的嵌套列表删除列表的重复元素

> ID：14475452
> 
> 赞同：1
> 
> 时间：2013-01-23T08:39:34.270
> 
> 标签：list, lisp, common-lisp, duplicate-removal, nested-lists

lisp 中的 remove-duplicates 函数仅适用于 (abcd) 之类的简单列表。我的问题是如何从包含嵌套列表的列表中删除重复元素。所以例如

我有一个嵌套列表如下： ( (0 1) (0 2) (0 1) (0 3) )

我想删除在上面的列表中重复两次的 (0 1) 列表之一以获得：

( (0 1) (0 2) (0 3) )

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T08:57:05.917

给`:test #'equal` ，`remove-duplicates`它会做你想做的事。

正如我们在[CLHS: Satisfying a Two-Argument Test](http://www.lispworks.com/documentation/HyperSpec/Body/17_ba.htm)中看到的，`:test`默认为`#'eql`未给出时，并且两个类似`(0 1)`的列表不是`eql`，除非它们是*同一个列表*( `eq`)。

```
CL-USER> (remove-duplicates '((0 1) (0 2) (0 1) (0 3)) :test #'equal)
((0 2) (0 1) (0 3)) 
```

# objective-c - NSOutlineView + XIB

> ID：14475454
> 
> 赞同：0
> 
> 时间：2013-01-23T08:39:42.430
> 
> 标签：objective-c, xcode4

刚刚进入 NSOutlineViews 并看到它们是一个有用的控件。

是否可以将**Xib**显示为**根项**？

可炸食品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:49:15.697

是的，当您使用基于视图的`NSOutlineView`. [首先使用registerNib:forIdentifier: 注册](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTableView/registerNib%3aforIdentifier%3a)要为单元格显示的笔尖：（`windowDidLoad`在窗口控制器中是一个好地方，awakeFromNib 也是一种可能）。

```
NSNib *cellNib = [[NSNib alloc] initWithNibNamed:@"MyCell" bundle:nil];
[self.outlineView registerNib:cellNib forIdentifier:@"MyIdentifier"]; 
```

接下来，您`outlineView:viewForTableColumn:item:`将使用先前指定的标识符获得一个（可能回收的）nib 实例：

```
- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item
{
    NSView *cellView = [outlineView makeViewWithIdentifier:@"MyIdentifier" owner:self];

    // optional configuration here

    return cellView;
} 
```

我有一篇[博文 + mac app 示例代码](http://joris.kluivers.nl/blog/2013/01/03/nib-based-table-views/)来演示这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:47:31.897

是的。您只需将其切换为使用基于视图的单元格。

在您的委托中，实施`outlineView:viewForTableColumn:item:`以提供正确的 XIB。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T08:55:31.737

是的，它是可能的，这是**Mac OS X**`NSOutlineView`中另一个很棒的可视化控件。作为 NSTableView 的后代，它代表分层数据。您可以折叠和展开节点，查看父母和他们的孩子。在本文中，我们将描述如何使用 NSOutlineView 来显示 DASchema 对象，它本质上是树状数据的一个很好的例子。

 **欲了解更多信息，请查看[这里](http://wiki.remobjects.com/wiki/Displaying_Data_in_NSOutlineView)**

# crm - 在 zoho crm 中显示用户列表

> ID：14475459
> 
> 赞同：0
> 
> 时间：2013-01-23T08:40:29.350
> 
> 标签：crm, zoho

我是 zoho CRM 的新人。我正在尝试显示将由 zoho 经理搜索的用户列表。是否有任何 API 可以找出列表？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:59:12.027

您可以使用 getUsers 方法获取组织中的用户列表。

[https://www.zoho.com/crm/help/api/getusers.html](https://www.zoho.com/crm/help/api/getusers.html)

# java - MultipleChatUser XMPP asmack 加入

> ID：14475461
> 
> 赞同：3
> 
> 时间：2013-01-23T08:40:48.353
> 
> 标签：java, xmpp, openfire, asmack

我是这个 OpenFire 和 asmack 的新手，我希望用户具有多用户聊天的功能，所以我四处搜索，我发现 MUC 我已经实现了这个用于创建房间并向其他用户发送邀请这些作品，其他用户收到邀请，但其他用户无法加入房间。

我在收到其他用户邀请时这样做

这里的连接是这个用户的连接，房间是我们在邀请中得到的房间名称。

**MultiUserChat muc3 = new MultiUserChat(connection,room);**

**muc3.join("testbot3");**

testbot3 只是一些随机名称。

**但这会引发 404 错误。**

我是否需要在发送邀请之前加入用户，即如果 A 用户向 B 发送邀请，在发送邀请之前 A 需要默认加入这些用户到房间，然后取决于 B 拒绝或只是保持安静。

我正在做的是 B 在我试图加入上述代码的 B 的 InvitationListner 中收到来自 A 的邀请。

我已经尝试了很长时间，现在我不确定出了什么问题，有人可以提供如何执行此操作的示例代码，这对我有很大帮助。

谢谢

这是有关我的问题的更多信息

当我去检查 Openfire 时，我可以看到用户创建的房间，并且他自己被添加为所有者，所以我认为创建房间不会有问题。

***可能这可能是房间被锁定的问题，因为我已经阅读了房间没有完全创建时房间被锁定，我想这是我们创建房间时填写表格的问题，我没有填写表单中的密码这可能是个问题吗？***

**请在处理程序中查看下面的代码，我正在调用一个方法“checkInvitation”，它与上面发布的代码相同，但我得到 404。你能告诉我我的代码有什么问题吗？**

需要添加的昵称可以是任何东西还是需要用户特定的东西？

公共无效创建聊天室（）{

```
 MultiUserChat muc = null;

    try {
      muc = new MultiUserChat(connection, "myroom@conference.localhost");
      muc.create("testbot");

      // Get the the room's configuration form
      Form form = muc.getConfigurationForm();
      // Create a new form to submit based on the original form
      Form submitForm = form.createAnswerForm();
      // Add default answers to the form to submit
      for (Iterator fields = form.getFields(); fields.hasNext();) {
          FormField field = (FormField) fields.next();
          if (!FormField.TYPE_HIDDEN.equals(field.getType()) && field.getVariable() != null) {
              // Sets the default value as the answer
              submitForm.setDefaultAnswer(field.getVariable());
          }
      }
      // Sets the new owner of the room
      List owners = new ArrayList();
      owners.add("admin@localhost");
      submitForm.setAnswer("muc#roomconfig_roomowners", owners);
      // Send the completed form (with default values) to the server to configure the room
      muc.sendConfigurationForm(submitForm);
      muc.join("d");

      muc.invite("b@localhost", "Meet me in this excellent room");

      muc.addInvitationRejectionListener(new InvitationRejectionListener() {
          public void invitationDeclined(String invitee, String reason) {
              // Do whatever you need here...
              System.out.println("Initee "+invitee+" reason"+reason);
          }
      });

    } catch (XMPPException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

    public void setConnection(XMPPConnection connection) {
    this.connection = connection;
    if (connection != null) {
        // Add a packet listener to get messages sent to us
        PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        connection.addPacketListener(new PacketListener() {
            public void processPacket(Packet packet) {
                Message message = (Message) packet;
                if (message.getBody() != null) {
                    String fromName = StringUtils.parseBareAddress(message
                            .getFrom());
                    Log.i("XMPPClient", "Got text [" + message.getBody()
                            + "] from [" + fromName + "]");
                    messages.add(fromName + ":");
                    messages.add(message.getBody());
                    // Add the incoming message to the list view
                    mHandler.post(new Runnable() {
                        public void run() {
                            setListAdapter();
                            checkInvitation();
                        }
                    });
                }
            }
        }, filter);

        mHandler.post(new Runnable() {
            public void run() {
                checkInvitation();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T10:52:49.840

404 错误表示：

```
404 error can occur if the room does not exist or is locked 
```

因此，请确保您的房间没有被锁定或存在！下面的代码是我在收到邀请时加入房间的方式：

```
private void setChatRoomInvitationListener() {
    MultiUserChat.addInvitationListener(mXmppConnection,
            new InvitationListener() {

                @Override
                public void invitationReceived(Connection connection,
                        String room, String inviter, String reason,
                        String unKnown, Message message) {

                    //MultiUserChat.decline(mXmppConnection, room, inviter,
                        //  "Don't bother me right now");
                    // MultiUserChat.decline(mXmppConnection, room, inviter,
                    // "Don't bother me right now");
                    try {
                       muc.join("test-nick-name");
                       Log.e("abc","join room successfully");
                       muc.sendMessage("I joined this room!! Bravo!!");
                    } catch (XMPPException e) {
                       e.printStackTrace();
                       Log.e("abc","join room failed!");
                    }
                }
            });
} 
```

希望这有助于您的错误！

**编辑：**这就是我配置房间的方式：

```
 /*
         * Create room
         */
        muc.create(roomName);

        // muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT));
        Form form = muc.getConfigurationForm();
        Form submitForm = form.createAnswerForm();

        for (Iterator fields = form.getFields(); fields.hasNext();) {
            FormField field = (FormField) fields.next();
            if (!FormField.TYPE_HIDDEN.equals(field.getType())
                    && field.getVariable() != null) {
                show("field: " + field.getVariable());
                // Sets the default value as the answer
                submitForm.setDefaultAnswer(field.getVariable());
            }
        }

        List<String> owners = new ArrayList<String>();
        owners.add(DataConfig.USERNAME + "@" + DataConfig.SERVICE);
        submitForm.setAnswer("muc#roomconfig_roomowners", owners);
        submitForm.setAnswer("muc#roomconfig_roomname", roomName);
        submitForm.setAnswer("muc#roomconfig_persistentroom", true);

        muc.sendConfigurationForm(submitForm);
        // submitForm.
        show("created room!");
        muc.addMessageListener(new PacketListener() {
            @Override
            public void processPacket(Packet packet) {
                show(packet.toXML());
                Message mess = (Message) packet;
                showMessageToUI(mess.getFrom() + ": " + mess.getBody());
            }
        }); 
```

通过这种配置，我可以轻松加入房间而无需密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-27T12:32:34.370

您可以使用代码片段加入聊天：

```
public void joinMultiUserChatRoom(String userName, String roomName) {
        // Get the MultiUserChatManager
        MultiUserChatManager manager = MultiUserChatManager.getInstanceFor(connection);

        // Create a MultiUserChat using an XMPPConnection for a room
        MultiUserChat multiUserChat = manager.getMultiUserChat(roomName + "@conference.localhost");

        DiscussionHistory history = new DiscussionHistory();
        history.setMaxStanzas(-1);
        try {
            multiUserChat.join(userName, "", history, connection.getPacketReplyTimeout());
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T06:19:15.533

邀请朋友：

```
 /**
     * Invites another user to this room.
     *
     * @param userAddress the address of the user to invite to the room.(one
     *   may also invite users not on their contact list).
     * @param reason a reason, subject, or welcome message that would tell
     *   the the user why they are being invited.
     */
    public void invite(String userAddress, String reason)
    {
        multiUserChat.invite(userAddress, reason);
    } 
```

# c++ - 从字符串中删除一组字符

> ID：14475462
> 
> 赞同：1
> 
> 时间：2013-01-23T08:40:52.260
> 
> 标签：c++, string

如何在 C++ 中从字符串中删除所有指定的字符？例如，如果我有一个字符串`" &New &York "`，我想从集合中删除字符，删除`{' ','&'}`后的字符串将如下所示`"NewYork"`。我不想编写一个函数来迭代一个字符串并检查字符串中的每个字符是否是不受欢迎的集合的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:43:49.407

你可以试试这个：

```
str.erase(
  std::remove_if(str.begin(), str.end(), [](char chr){ return chr == '&' || chr == ' ';}),
  str.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:49:06.900

用这个

```
#include <string>
#include <algorithm>
#include <cctype>

int main()
{
    std::string s = "the#qu1ck&br0wn ***fox %%jumped 0ver @@the lazy dog";
    s.erase( std::remove_if(s.begin(), s.end(), std::isalnum),
             s.end() );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:54:08.320

在 char 数组上执行此操作的最简单，可能也是最简单的方法（您并没有真正指定您的“字符串”是什么，所以我假设最简单的类型）是这样的：

```
#include <cstring>

void erase(char *str, char *evilchars)
{
    char *ptr1 = str;
    char *ptr2 = str;

    while(*ptr1)
    {
        *ptr2 = *ptr1;
        if(!strchr(evilchars, *ptr1))
            ++ptr2;
        ++ptr1;
    }

    *ptr2 = 0;
} 
```

# python - 在给定最小尺寸的情况下，按单个尺寸（x 或 y）缩放图像

> ID：14475463
> 
> 赞同：0
> 
> 时间：2013-01-23T08:40:52.860
> 
> 标签：python, image-scaling

我知道我可以用一堆嵌套的 if 语句来做到这一点，但是我不禁觉得有一种更优雅的方式。我猜这真的只是一个数学问题，但如果确实有的话，我对pythonic答案很感兴趣。

我有一张可以是任何尺寸/纵横比的图像。

它必须按比例放大或缩小，以使其覆盖至少 55w x 168h

这里的复杂之处在于，它需要通过一个函数进行缩放，该函数仅采用一个值，该值指定将适合图像的正方形的边的长度。

例如，假设我们有一个大小为 1000w x 500h 的图像，我们将其缩放到 200，那么生成的图像必须适合边长为 200 的正方形，这意味着生成的图像将是 200w x 100h。

相反，如果我们的图像是 200x1000 并且我们缩放到 200，我们最终会得到 40x200。

因此，要将 1000x500 的图像缩放到 55x168，我们需要将其缩放到 336，给出 336x168 的大小，因为这是可以容纳在 336x336 边正方形内的最大图像。

要缩放 200x1000 的图像以覆盖 55x168，我们需要将其缩放到 275 并最终得到 55x275。

希望这比泥浆更清楚！感谢您的任何想法。

**理由：**对于那些对我为什么通过正方形的值进行缩放感兴趣的人，这是 Picasa 通过 URL 注入缩放图像的方式。例如采用以下 2 个 URL：

*   [https://lh3.googleusercontent.com/-rvkbjZgBMDs/UEHYD3VmGVI/AAAAAAAADwM/UekknfI838s/s150/IMG_20120901_172419.jpg](https://lh3.googleusercontent.com/-rvkbjZgBMDs/UEHYD3VmGVI/AAAAAAAADwM/UekknfI838s/s150/IMG_20120901_172419.jpg)
*   [https://lh6.googleusercontent.com/-6BHPw9kYIQc/UEHYBS5z-dI/AAAAAAAADwA/QkEWF3H797A/s150/IMG_20120901_172405.jpg](https://lh6.googleusercontent.com/-6BHPw9kYIQc/UEHYBS5z-dI/AAAAAAAADwA/QkEWF3H797A/s150/IMG_20120901_172405.jpg)

请注意，两者都有 URL 组件`s150`，但是一个图像是 150x112，另一个是 112x150。150 是这些图像都适合的正方形的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:03:25.753

我认为您可能需要详细说明细节，但我假设该函数可以访问图像或其尺寸，否则无法进行计算。

但是在手边，这样的事情应该可以工作：

```
def percent_to_scale_to(image, box_side_px):
    img_width, img_height = Image(image).size()  # or however you get w/h
    greater_img_dimension = max(img_width, img_height)
    scale_percent = (float(box_side_px) / float(greater_img_dimension)) * 100.0 
```

您可能需要查看一些调用的签名，并且不要期望它仅适用于剪切和粘贴，但作为伪代码，它可能会为您提供一种方法的想法。:)

您需要注意整数除法，这可能会产生意外行为。这就是为什么在除法之前转换为浮点数的原因；否则结果会在小数点处被截断，这在大多数情况下会产生零返回值。如果您还不熟悉，对 Python 的除法行为进行一些快速研究可能是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:06:53.100

```
def name_of_function(img_x, img_y):  # for lack of a better name
    image_dimensions = (img_x, img_y)
    min_dimensions = (55.0, 168.0)
    scale = min(image_dimensions[i]/min_dimensions[i] for i in range(2))
    return max(i/scale for i in image_dimensions)

name_of_function(1000, 500)
# 336.0
name_of_function(200, 1000)
# 275.0 
```

很确定这就是你要找的东西。

# java - 用于执行 java 桌面应用程序的可运行 jar 或 bat 文件

> ID：14475468
> 
> 赞同：0
> 
> 时间：2013-01-23T08:41:09.387
> 
> 标签：java, deployment, jar, batch-file, executable-jar

据我所知，有两种标准方法可以分发 Java 桌面应用程序：

1.  通过一个可运行的 jar 文件
2.  通过调用 jar 文件开始执行的 bat 文件

我想知道这些方法中最好的方法是什么，相对优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:52:53.167

该列表缺少最好的一个！

1.  ..
2.  ..
3.  [Java 网络启动](https://stackoverflow.com/tags/java-web-start/info).

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）*桌面应用程序。*它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、体系结构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

如果不清楚，从用户的角度来看，我将 JWS 投票为“最佳”。优点的细节在描述的第 2 段和第一段的最后一句中几乎都有表达。不要忘记下一段的第一句话..

> 默认情况下，类似小程序的安全沙箱应用于使用 JWS 启动的代码。..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:04:12.643

对于 Windows，可以考虑像[Launch4j这样的包装器。](http://launch4j.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:45:33.407

我认为可运行的 jar 将是桌面应用程序的一个不错的选择。当我将它用于我的桌面应用程序时，它更加舒适和用户友好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:53:06.800

我认为这将取决于谁是您的应用程序的用户。如果用户是非技术人员，您最好使用可运行的 jar，因为他们不太可能将参数传递给您的程序。

如果他们是你的团队成员或其他技术人员，你可以给他们一个 .bat 来玩你的应用程序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T08:49:53.840

开源软件总是使用 .bat 或 .sh 文件来分发 java 应用程序。我认为这种方式会是一个不错的选择。

# java - 默认 servlet - 这是否正常工作？

> ID：14475469
> 
> 赞同：1
> 
> 时间：2013-01-23T08:41:10.850
> 
> 标签：java, servlets

我在java中设置了一些servlet。它们由路径名标识。但是，如果请求的不存在，我想调用我的“默认 servlet”。我试图以这种方式解决它（请参阅我的代码）。我成功测试了它，但我不确定它是否会变得不稳定（例如“servlet one”被转发到由某些线程管理或操作系统引起的其他东西引起的默认servlet......）

```
Server server = new Server(8080);
WebAppContext context = new WebAppContext();
context.setContextPath("/");
HandlerCollection handlers = new HandlerCollection();
handlers.addHandler(context);
RequestLogHandler requestLogHandler = new RequestLogHandler();
handlers.addHandler(requestLogHandler);
server.setHandler(handlers);

context.setResourceBase("WebContent");
context.addServlet(new ServletHolder(new MyFirstServlet()), "/servlet one/*");
context.addServlet(new ServletHolder(new MySecondServlet()), "/servlet two/*");
context.addServlet(new ServletHolder(new DefaultServlet()), "/*");
context.setInitParameter("dirAllowed", "true");

server.start(); 
```

我将 java 与码头库一起使用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:43:00.483

[Servlet (3.0) 规范](http://jcp.org/en/jsr/detail?id=315)要求容器一致地匹配 URL 模式：

> 1.  容器将尝试找到请求路径与 servlet 路径的完全匹配。成功的匹配选择 servlet。
> 2.  容器将递归地尝试匹配最长的路径前缀。这是通过使用`/`字符作为路径分隔符一次将路径树下移一个目录来完成的。最长的匹配决定了选择的 servlet。
> 3.  如果 URL 路径中的最后一段包含扩展（例如`.jsp`），则 servlet 容器将尝试匹配处理扩展请求的 servlet。`.`扩展被定义为最后一个字符之后的最后一段的一部分。
> 4.  如果前三个规则都没有导致 servlet 匹配，则容器将尝试提供适合所请求资源的内容。如果为应用程序定义了一个“默认”servlet，它将被使用。许多容器为服务内容提供了一个隐式的默认 servlet。
> 
> 容器必须使用区分大小写的字符串比较进行匹配。

因此，相同的 URL 每次都应该匹配相同的模式集。

# php - 无法将值“-1”插入数据库

> ID：14475471
> 
> 赞同：0
> 
> 时间：2013-01-23T08:41:12.097
> 
> 标签：php, mysql

我无法将值“-1”插入数据库，表设置字段为`int(10)`. 我不知道问题是什么。你可以帮帮我吗。谢谢你。

```
$sql2="INSERT INTO attendance_count(username,date,count_time,appendix)VALUES('$applicant','$date1','-1','$altext')";
mysql_query($sql2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:42:14.860

不要放单引号，因为它是一个 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:42:41.593

确保列不是`UNSIGNED`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:43:17.320

> 文档说它不会存储文字“-”字符，这意味着它现在可能正在做其他带符号的 INTEGER 字段一直在做的事情，而是存储一个符号位来表示负数。
> 
> 您仍然会在数字前看到一个减号，因为它是由 MySQL 作为该符号位的结果生成的。
> 
> 如果你不了解符号位，可以考虑有符号字节如何存储 -128 到 127 的数字，而无符号字节可以存储 0 到 255 的数字。这是因为有符号数的 8 位中的一个是用于存储 +/-（1 为负数，0 为正数），而其余位提供高达 2^7 的数字（-128 或 127）。
> 
> 因此，例如，如果位 1111 有符号位，它们将等于 -7（负 +4+2+1），但如果它们是无符号的，它们将等于 15（8+4+2+1）。它仍然存储相同数量的位。
> 
> 您可能想知道为什么有符号数的负数界限可以使用第 8 位，而正数界限仅限于 7 位的总和（第 8 位少 1）。这是因为 10000000 被认为同时是负数和第 8 位，因为它的 -0 表示否则与 00000000 表示 0 是多余的。负零和正零之间没有区别，因此负的最高有效位始终是该值该位本身（但为负）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T08:45:53.757

您输入值 -1 的列应该是`SIGNED`

`INT(SIGNED) values can be a minimum of-2147483648 to a maximum of 2147483647 INT(UNSIGNED) values can be a minimum of 0 to a maximum of 4294967295`

# php - 用户搜索查询

> ID：14475477
> 
> 赞同：0
> 
> 时间：2013-01-23T08:41:27.667
> 
> 标签：php, mysqli

我正在尝试进行一个查询，该查询将获取输入的项目并搜索数据库。我知道我是怎么做到的，但是这个查询就是不想工作。

这是查询

```
$getcamp = $db->query("SELECT * FROM `campaigns` 
WHERE `requirements` LIKE '%$keyw%' OR `description` LIKE '%$keyw%' OR `name` 
LIKE '%$keyw%' OR `countries` LIKE '%$country%' OR `id` LIKE '%$camp%' OR `category` 
LIKE '%$cat%' AND `active` = '1' ORDER BY `added`") 

or die($db->error); 
```

有很多`OR`中断，我尝试用括号括起来有几个不同的变体，但查询仍然不起作用，也没有错误，它仍然显示表中的所有内容而不是搜索的内容。我不是最好的这类查询，因为通常我只写搜索 1 或 2 个项目，这个搜索很多。

如果我只搜索该语句中的前 3 个，它会正常工作，但是一旦我开始添加它，它就会中断，即使我在前 3 个周围加上括号，我只是不确定我在做什么错误的。

另外请注意，我的主机没有 mysqlnd 支持，这就是为什么我没有使用准备好的语句，但我的变量事先被转义了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:46:42.337

如果您的变量之一为空，它将选择所有行。

您应该执行以下操作（这是一个基本示例，以便您理解这个想法）：

```
$orArray = array();
$orQuery = "";
if (!empty($keyw) && strlen($keyw) > 2) { // and other SQL injection checks
    $orArray[] = "`requirements` LIKE '%{$keyw}%' ";
}

if (!empty($orArray())) {
    $orQuery = implode(' OR ', $orArray);
}

$query = "SELECT * FROM `campaigns` WHERE ( {$orQuery} ) AND active = 1 "; 
// You also should check if $orQuery is empty, if it is, you need to remove AND. 
// Well, in that case you wouldn't do the query at all. 
```

应该这样做，但是您需要检查每个变量。

PS：我建议为字符串搜索设置一个最小值（3 是一个很好的起点）。

PS2：这可能不是问题，但我指出它是因为这是您的脚本逻辑中的缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:58:50.657

我相信这个问题实际上是，你在“or”之后有“and”。您应该将所有 ors 放入额外的括号中。

为了更好地说明考虑这个 php 代码：

```
<?php

var_dump(1 || 2 && 0);
var_dump((1 || 2 ) && 0); 
```

和输出：

```
xxx@www0 ~/sp $ php -q a.php 
bool(true)
bool(false) 
```

注意`||`是或，`&&`是和

# svn - 使用 TimeCapsule 文件夹的 SVN 存储库

> ID：14475478
> 
> 赞同：0
> 
> 时间：2013-01-23T08:41:32.910
> 
> 标签：svn

我将使用 TimeCapsule 上的 Destination Folder 文件夹创建一个 SVN 存储库。当我尝试执行 svn import destination-folder /Volumes/Data/... -m "Initial Import" 它告诉我： svn: Invalid URL '/Volumes/Data/.... 有人试图这样做事情成功了吗？我犯了一个错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:45:25.870

我不认为使用 TimeCapsule 作为存储库的位置是个好主意

您必须阅读`svn help import`有关此命令的正确格式

`svn import [PATH] URL`

最后一个参数是**repo 的 URL**（其中一个受 Subversion 协议支持），对于本地可访问的存储库（必须已经存在），您**必须**使用`file:///`协议，而不是纯路径

# spring - 如何在 Spring-Hibernate 集成中使用 ResultSetMetaData？

> ID：14475480
> 
> 赞同：2
> 
> 时间：2013-01-23T08:41:40.833
> 
> 标签：spring, hibernate, jsp, spring-mvc

在我的 JSP 页面中，我在数据库中显示员工详细信息并以硬编码的形式给出表列名称。现在我需要知道如何动态获取表列名称？

我知道 ResultSetMetaData 仅在 JSP 中使用它。但是我不知道在 JSP 中使用 Spring-Hibernate Integration 时如何获取列名。

请任何人帮助解决这个问题？

我的 JSP 页面将是，

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ include file="include.jsp" %>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<form:form action="displayuser.html"  commandName="displayuser">  

<table width="100%" align="center">

 <tr style="background-color:#6B8E23  ;">
  <td align="center">Employee Id</td>
  <td align="center">Employee Name</td>
  <td align="center">Employee Password</td>
    <td align="center">Gender</td>
  <td align="center">Designation</td>
 </tr>

 <core:forEach items="${DisplayuserDetail}" var="userObj">
    <tr style="background-color:#9ACD32 ;">
       <td align="center"><core:out value="${userObj.empId}"/></td>
       <td align="center"><core:out value="${userObj.empName}"/></td>
       <td align="center"><core:out value="${userObj.empPassword}"/></td>
       <td align="center"><core:out value="${userObj.gender}"/></td>
       <td align="center"><core:out value="${userObj.designation}"/></td>
    </tr>
 </core:forEach>

</table>

</form:form>

</body>
</html> 
```

在此先感谢...您的帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:34:00.207

如果您的 Hibernate 持久对象使用注释，您可以从域对象中[读取注释。](https://stackoverflow.com/questions/4296910/is-it-possible-to-read-the-value-of-a-annotation-in-java)

或者，看看[这个关于获取 SQL 列名](https://stackoverflow.com/q/2605385/217324)的问题的答案是否有帮助。

# html - 搜索图像未正确显示

> ID：14475482
> 
> 赞同：0
> 
> 时间：2013-01-23T08:41:59.850
> 
> 标签：html, css

当我使用 type=image of input name =searchsel_list 时，我得到的图像显示正确，但我没有得到想要在单击该搜索时显示的结果，所以我更改了它的 type=submit 所以我得到了结果但是现在图像没有显示

```
<div id="tabr"><form id="quick-search" action="csearch.php?epage=csearch"  method="post" >
<p>
<label for="qsearch">Search:</label>
<input class="tbox" id="qsearch" type="text" name="tsearch" placeholder="Search Selected Candidate" title="Type name and hit ENTER" />
<input type="submit" class="btn" alt="Search" name="searchsel_list" title="Search"  />
</p>
</form></div> 
```

CSS

```
 #tabr form#quick-search {
    padding: 0; margin: 30px 0 0 30px;
    width: 270px; height: 33px;
    background: #fff url(../images/header-search.gif) no-repeat;
    border: none;   
}
#tabr form#quick-search p {
    margin: 0; padding: 0;      
    border: none;
}
#tabr form#quick-search input {
    border: none;
    background: transparent;
    color: #BABABA;
    margin: 0; padding: 5px;
    font-size: .9em;    
    float: left;        
}
#tabr form#quick-search .tbox {
    margin: 6px 0 0 5px;
    width: 220px;   
    display: inline;    
}
#tabr form#quick-search .btn{
    width: 24px; height: 24px;      
    margin: 5px 0 0 0;  padding: 0; 
}
#tabr form#quick-search label {
    display: none;
} 
```

我试过了，但即使这样也行不通

```
<button type="submit" class="btn" alt="Search" name="searchsel_list" title="Search"><img src="images/header-search.gif" /></button> 
```

我怎样才能再次显示图像，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:50:50.570

我看到你只为它自己的表单指定了一个背景，没有为提交指定一个背景，向它添加另一个类

**示例**：

```
<input type="submit" class="btn quickSubmit" name="searchsel_list" title="Search"  /> 
```

**CSS**

```
.quickSubmit {
    background-image: url(path/to/your/image);
        background-position:  0px 0px;
        background-repeat: no-repeat;
        width: add image width;
        height: add image height;
        border: 0px;
        text-indent: -9999px; /* this is to hide the submit buttons text */
} 
```

编辑：

抱歉，现在我`btn`也看到您的班级，要么将其删除并用我的示例替换它，要么使用`btn`上面的示例更改您的班级状态

# python - 为什么 scipy.stats.nanmean 给出的结果与 numpy.nansum 不同？

> ID：14475485
> 
> 赞同：4
> 
> 时间：2013-01-23T08:42:14.793
> 
> 标签：python, numpy, floating-point, scipy, floating-point-precision

```
>>> import numpy as np
>>> from scipy import stats
>>> a = np.r_[1., 2., np.nan, 4., 5.]
>>> stats.nanmean(a)
2.9999999999999996
>>> np.nansum(a)/np.sum(~np.isnan(a))
3.0 
```

我知道浮点表示的局限性。只是好奇为什么更笨拙的表达似乎会给出“更好”的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T09:39:42.573

首先，这里是`scipy.nanmean()`为了让我们知道我们要比较的是什么：

```
def nanmean(x, axis=0):
    x, axis = _chk_asarray(x,axis)
    x = x.copy()
    Norig = x.shape[axis]
    factor = 1.0-np.sum(np.isnan(x),axis)*1.0/Norig

    x[np.isnan(x)] = 0
    return np.mean(x,axis)/factor 
```

在数学上，这两种方法是等价的。在数值上，它们是不同的。

您的方法涉及单个部门，并且碰巧：

*   分子 ( `1\. + 2\. + 4\. + 5.`) 可以精确地表示为 a `float`；和
*   分母 ( `4.`) 是 2 的幂。

这意味着除法的结果是精确的，`3.`。

`stats.nanmean()`涉及首先计算 的平均值`[1., 2., 0., 4., 5.]`，然后对其进行调整以考虑`NaNs`。碰巧，这个均值 ( `2.4`) 不能完全表示为 a `float`，因此从这一点开始计算是不精确的。

我没有考虑太多，但可以构建一个角色颠倒的例子，并且`stats.nanmean()`会给出比其他方法更准确的结果。

让我感到惊讶的是，`stats.nanmean()`这不仅仅是做这样的事情：

```
In [6]: np.mean(np.ma.MaskedArray(a, np.isnan(a)))
Out[6]: 3.0 
```

在我看来，这似乎是比它目前所做的更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:51:16.867

答案在以下代码中`stats.nanmean`：

```
x, axis = _chk_asarray(x,axis)
x = x.copy()
Norig = x.shape[axis]
factor = 1.0-np.sum(np.isnan(x),axis)*1.0/Norig
x[np.isnan(x)] = 0
return np.mean(x,axis)/factor 
```

我相信这与`1.0 - np.sum`总和的减法有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:03:52.707

正如@eumiro 所提到的， stats.nanmean 以一种迂回的方式计算平均值，这与您所做的简单的单线方式不同

从相同的参考代码，

`np.sum(np.isnan(x),axis)`返回`numpy.int32`当乘以 * 时`1.0`，会产生浮点近似值，而不是当结果为整数时会得到的结果，从而导致结果不同

```
>>> numpy.int32(1)*1.0/5
0.20000000000000001
>>> int(numpy.int32(1))*1.0/5
0.2
>>> type(np.sum(np.isnan(x),axis))
<type 'numpy.int32'> 
```

# mysql - 如何在mysql中查找列不为空的次数？

> ID：14475488
> 
> 赞同：1
> 
> 时间：2013-01-23T08:42:23.733
> 
> 标签：mysql, sql, database, jdbc

我在 mysql 表中有一堆列，其名称以“X_”开头（例如：X_N、X_Pad、X_Server 等）。现在，这些列可以为空。

我想找出以'X_'开头的列最不为NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:50:10.863

> [`COUNT(expr)`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_count)
> 
> 返回 SELECT 语句检索的行中 expr 的非 NULL 值的计数。

以下查询将为每列返回非空计数：

```
SELECT
COUNT(*)     AS Total,
COUNT(X_N)   AS NNC_N,
COUNT(X_Pad) AS NNC_Pad
FROM table; 
```

* * *

您可以使用此查询从表中获取匹配列的列表：

```
SELECT COLUMN_NAME
FROM  INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = '<database_name>'
AND   TABLE_NAME = '<table_name>'
AND   COLUMN_NAME LIKE 'x\_%';

-- Output:
-- X_N
-- X_Pad
-- X_Server 
```

您可以使用此查询来构建查询：

```
SELECT CONCAT('SELECT ', GROUP_CONCAT('COUNT(`', COLUMN_NAME, '`) AS `NNC of ', COLUMN_NAME, '`'), ' FROM `', TABLE_NAME, '`')
FROM  INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = '<database_name>'
AND   TABLE_NAME = '<table_name>'
AND   COLUMN_NAME LIKE 'x\_%';

-- Output (added whitespace for readability):
-- SELECT
-- COUNT(`X_N`)      AS `NNC of X_N`,
-- COUNT(`X_Pad`)    AS `NNC of X_Pad`,
-- COUNT(`X_Server`) AS `NNC of X_Server`
-- FROM `<table_name>` 
```

备用：

```
SELECT GROUP_CONCAT('SELECT \'', COLUMN_NAME, '\' AS `Col`, COUNT(`', COLUMN_NAME , '`) AS `NNC` FROM `', TABLE_NAME , '`' SEPARATOR ' UNION ALL ')
FROM  INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = '<database_name>'
AND   TABLE_NAME = '<table_name>'
AND   COLUMN_NAME LIKE 'x\_%';

-- Output (added whitespace for readability):
-- SELECT 'X_N'      AS `Col`, COUNT(`X_N`)      AS `NNC` FROM `<table_name>` UNION ALL 
-- SELECT 'X_Pad'    AS `Col`, COUNT(`X_Pad`)    AS `NNC` FROM `<table_name>` UNION ALL 
-- SELECT 'X_Server' AS `Col`, COUNT(`X_Server`) AS `NNC` FROM `<table_name>` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:21:58.223

从 db.tbl 中选择计数（X_N）、计数（X_Pad）、计数（X_Server）；

可以的。

如果你只需要一个方法来生成这个 SQL，你可以使用

```
SELECT CONCAT("select ", GROUP_CONCAT("count(",column_name, ")"), " from ", table_schema, '.', table_name)
FROM information_schema.columns
WHERE table_schema='db' AND table_name='tbl' AND column_name LIKE 'X\_%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T08:45:49.507

大概是这样的？（未经测试）

```
SELECT 
(SELECT COUNT(id) FROM My_Table WHERE X_1 != NULL) as x1,
(SELECT COUNT(id) FROM My_Table WHERE X_2 != NULL) as x2,
(SELECT COUNT(id) FROM My_Table WHERE X_3 != NULL) as x3,
(SELECT COUNT(id) FROM My_Table WHERE X_4 != NULL) as x4; 
```

# java - java获取给定月份和给定年份的第一个日期和最后一个日期

> ID：14475489
> 
> 赞同：14
> 
> 时间：2013-01-23T08:42:24.590
> 
> 标签：java, date, calendar

我正在尝试获取给定月份和年份的第一个日期和最后一个日期。我使用以下代码以 yyyyMMdd 格式获取最后日期。但无法获得这种格式。然后我想要相同格式的开始日期。我仍在努力。任何人都可以帮助我修复以下代码。

```
public static java.util.Date calculateMonthEndDate(int month, int year) {
    int[] daysInAMonth = { 29, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
    int day = daysInAMonth[month];
    boolean isLeapYear = new GregorianCalendar().isLeapYear(year);

    if (isLeapYear && month == 2) {
        day++;
    }
    GregorianCalendar gc = new GregorianCalendar(year, month - 1, day);
    java.util.Date monthEndDate = new java.util.Date(gc.getTime().getTime());
    return monthEndDate;
}

public static void main(String[] args) {
    int month = 3;
    int year = 2076;
    final java.util.Date calculatedDate = calculateMonthEndDate(month, year);
    SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
    format.format(calculatedDate);
    System.out.println("Calculated month end date : " + calculatedDate);
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-09-01T02:23:29.187

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-17T12:25:12.330

只需您可以使用日历类。你应该分配你想要的月份变量

```
 Calendar gc = new GregorianCalendar();
        gc.set(Calendar.MONTH, month);
        gc.set(Calendar.DAY_OF_MONTH, 1);
        Date monthStart = gc.getTime();
        gc.add(Calendar.MONTH, 1);
        gc.add(Calendar.DAY_OF_MONTH, -1);
        Date monthEnd = gc.getTime();
        SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");

        System.out.println("Calculated month start date : " + format.format(monthStart));
        System.out.println("Calculated month end date : " + format.format(monthEnd)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-04T16:05:24.363

**第一天：**

```
Calendar.getInstance().getActualMinimum(Calendar.DAY_OF_MONTH); 
```

**一个月的最后一天：**

```
Calendar.getInstance().getActualMaximum(Calendar.DAY_OF_MONTH); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-23T08:47:08.187

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
format.format(calculatedDate);
System.out.println("Calculated month end date : " + calculatedDate); 
```

将其更改为

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
String formattedDate =  format.format(calculatedDate);
System.out.println("Calculated month end date : " + formattedDate); 
```

了解更多详情

[http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html#format(java.util.Date)](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html#format(java.util.Date))

另一种方法

```
package com.shashi.mpoole;

import java.text.SimpleDateFormat; 
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

public class DateMagic {

     public static String PATTERN = "yyyyMMdd";

     static class Measure {
           private int month;
           private int year;
           private Calendar calendar;

           public Measure build() {

                calendar = Calendar.getInstance();
                calendar.set(year, month, 1);

                return this;
           }

           public Measure(int year, int month) {
                this.year(year);
                this.month(month);
           }

           public String min() {
                  return format(calendar.getActualMinimum(Calendar.DATE));
           }

           public String max() {
                  return format(calendar.getActualMaximum(Calendar.DATE));
           }

           private Date date(GregorianCalendar c) {
                  return new java.util.Date(c.getTime().getTime());

           }

           private GregorianCalendar gc(int day) {
                  return new GregorianCalendar(year, month, day);
           }

           private String format(int day) {

                  SimpleDateFormat format = new SimpleDateFormat(PATTERN);
                  return format.format(date(gc(day)));
           }

           public void month(int month) {
                  this.month = month - 1;
           }

           public void year(int year) {
                  this.year = year;
           }
      }

      public static void main(String[] args) {

             Measure measure = new Measure(2020, 6).build();

             System.out.println(measure.min());
             System.out.println(measure.max());

    }

} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-23T09:02:21.977

获取**开始日期**

```
 GregorianCalendar gc = new GregorianCalendar(year, month-1, 1);
    java.util.Date monthEndDate = new java.util.Date(gc.getTime().getTime());
    System.out.println(monthEndDate); 
```

（***注***：开始日期中的**天**=1）

对于格式化的

```
SimpleDateFormat format = new SimpleDateFormat(/////////add your format here);
System.out.println("Calculated month end date : " + format.format(calculatedDate)); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-12-13T05:31:45.173

试试下面的代码一个月的最后一天： -

```
Calendar c = Calendar.getInstance();      
c.set(2012,3,1); //------>  
c.set(Calendar.DAY_OF_MONTH, c.getActualMaximum(Calendar.DAY_OF_MONTH));  

SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");  
System.out.println(sdf.format(c.getTime())); 
```

[http://www.coderanch.com/t/385759/java/java/date-date-month](http://www.coderanch.com/t/385759/java/java/date-date-month)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-29T18:24:14.853

虽然，不完全是 OP 问题的答案，但以下方法会将**当前月份**的第一个和最后一个日期作为 Java 8+ LocalDate 实例给出。

```
public static LocalDate getCurrentMonthFirstDate() {
    return LocalDate.ofEpochDay(System.currentTimeMillis() / (24 * 60 * 60 * 1000) ).withDayOfMonth(1);
}

public static LocalDate getCurrentMonthLastDate() {
    return LocalDate.ofEpochDay(System.currentTimeMillis() / (24 * 60 * 60 * 1000) ).plusMonths(1).withDayOfMonth(1).minusDays(1);
} 
```

*旁注：使用`LocalDate.ofEpochDay(...)`代替可以`LocalDate.now()`大大提高性能。此外，使用millis-in-a-day 表达式而不是最终值，它`86400000`的性能更好。我最初认为后者会比表达式表现更好：P*

**为什么这个答案**： *即使这不是 OP 问题的正确答案，我仍然在这里回答，因为当我搜索“java 8 get month start date”时谷歌显示了这个问题:)*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-01T06:23:21.960

```
 GregorianCalendar gc = new GregorianCalendar(year, selectedMonth-1, 1);
           java.util.Date monthStartDate = new java.util.Date(gc.getTime().getTime());
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(monthStartDate);
        calendar.add(calendar.MONTH, 1);
        calendar.add(calendar.DAY_OF_MONTH, -1);
           java.util.Date monthEndDate = new java.util.Date(calendar.getTime()) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-07T08:46:35.167

```
public static Date[] getMonthInterval(Date data) throws Exception {

    Date[] dates = new Date[2];

    Calendar start = Calendar.getInstance();
    Calendar end = Calendar.getInstance();

    start.setTime(data);
    start.set(Calendar.DAY_OF_MONTH, start.getActualMinimum(Calendar.DAY_OF_MONTH));
    start.set(Calendar.HOUR_OF_DAY, 0);
    start.set(Calendar.MINUTE, 0);
    start.set(Calendar.SECOND, 0);

    end.setTime(data);
    end.set(Calendar.DAY_OF_MONTH, end.getActualMaximum(Calendar.DAY_OF_MONTH));
    end.set(Calendar.HOUR_OF_DAY, 23);
    end.set(Calendar.MINUTE, 59);
    end.set(Calendar.SECOND, 59);

    //System.out.println("start "+ start.getTime());
    //System.out.println("end   "+ end.getTime());

    dates[0] = start.getTime();
    dates[1] = end.getTime();

    return dates;
} 
```

# lucene.net - Lucene.Net 是否支持 XOR 布尔查询？

> ID：14475496
> 
> 赞同：2
> 
> 时间：2013-01-23T08:42:46.400
> 
> 标签：lucene.net, orchardcms, boolean-logic

我正在构建一个使用 Lucene 搜索的 Orchard 模块，但它看起来不支持 XOR（匹配 A 或 B，但不能同时匹配）。这是我必须自己动手还是我错过了某个启用它的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:31:21.240

Lucene 本身并不支持 XOR 操作。但是，您可以通过如下编写查询来模拟此行为：

`+(A B) -(+A +B)`

# php - 无法将多张图片上传到其上传文件夹

> ID：14475500
> 
> 赞同：1
> 
> 时间：2013-01-23T08:43:03.733
> 
> 标签：php, codeigniter

从下面的代码中，我尝试上传 4 张图片，但我只能将最后一张图片上传到我的`upload`文件夹。

我的图像验证和所有其他任务都运行良好。但只有我有多个图像上传到其区别文件夹的问题。

请检查我的以下代码并帮助解决我的问题。

MyController.php

```
class Booksetups extends CI_Controller  {
    public function __construct()
    {
        parent:: __construct();
        $this->load->helper('url');
        $this->load->helper('form');
        $this->load->library('session');
        $this->load->model('Booksmodel');
        $this->load->library('form_validation');
        $this->load->library('pagination');
    }

    public function valid_upload()
    {
        $this->load->library('upload');

        $config['upload_path'] = 'uploads/';
        $config['allowed_types'] = 'gif|jpg|jpeg|png';
        $config['max_size']         =   2048;
        $config['max_width']        =   385;
        $config['max_height']       =   410;

        $this->upload->initialize($config);

        if (!$this->upload->validate_upload('img1')  || !$this->upload->validate_upload('img2')  || !$this->upload->validate_upload('img3')  || !$this->upload->validate_upload('img4') ) {
            $this->form_validation->set_message('valid_upload', $this->upload->display_errors());
            return FALSE;
        } else {
            return TRUE;
        }
    }

    function book($book_id = 0)
    {
        $config = array();
        $config['base_url'] = 'http://localhost/thebestbookfinder.com/Booksetups/book/pgn/';
        $config["total_rows"] = $this->Booksmodel->record_count();
        $config['uri_segment'] = 4;
        $config['per_page'] = 17;
        $config['full_tag_open'] = '<div id="pagination">';
        $config['full_tag_close'] = '</div>';

        $this->pagination->initialize($config);
        $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;

        $this->form_validation->set_error_delimiters('<div  class="error">', '</div>')->set_rules('book_title', '"Title"','trim|required|min_length[4]|max_length[150]|xss_clean');
        $this->form_validation->set_error_delimiters('<div  class="error">', '</div>')->set_rules('edition_id', '"Edition Name"','trim|min_length[1]|max_length[150]|xss_clean');

        //---------------------validating images---------------------------

        $this->form_validation->set_rules('img1', 'Image 1', 'trim|xss_clean|callback_valid_upload');
        $this->form_validation->set_rules('img2', 'Image 2', 'trim|xss_clean|callback_valid_upload');
        $this->form_validation->set_rules('img3', 'Image 3', 'trim|xss_clean|callback_valid_upload');
        $this->form_validation->set_rules('img4', 'Image 4', 'trim|xss_clean|callback_valid_upload');

        //-----------Here i am uploading my images into my specified folder-------------------------------
        if ($this->form_validation->run() === TRUE) {
            $this->upload->do_upload('img1');
            $this->upload->do_upload('img2');
            $this->upload->do_upload('img3');
            $this->upload->do_upload('img4');
            $this->Booksmodel->entry_insert();
            $this->session->set_flashdata('msg', '1 row(s) inserted.');
            redirect(current_url());
        }
        ................
        ................ 
```

My_Upload.php

```
Class My_Upload extends CI_Upload
{

    public function __construct(){
        parent::__construct();
    }

    public function validate_upload($field = 'img1')
    {

        // Is $_FILES[$field] set? If not, no reason to continue.
        if (! isset($_FILES[$field])) {
            $this->set_error('upload_no_file_selected');
            return FALSE;
        }

        // Is the upload path valid?
        if (! $this->validate_upload_path()) {
            // errors will already be set by validate_upload_path() so just return FALSE
            return FALSE;
        }

        // Was the file able to be uploaded? If not, determine the reason why.
        if (! is_uploaded_file($_FILES[$field]['tmp_name'])) {
            $error = ( ! isset($_FILES[$field]['error'])) ? 4 : $_FILES[$field]['error'];

            switch ($error) {
            case 1:
                // UPLOAD_ERR_INI_SIZE
                $this->set_error('upload_file_exceeds_limit');
                break;
            case 2:
                // UPLOAD_ERR_FORM_SIZE
                $this->set_error('upload_file_exceeds_form_limit');
                break;
            case 3:
                // UPLOAD_ERR_PARTIAL
                $this->set_error('upload_file_partial');
                break;
            case 4:
                // UPLOAD_ERR_NO_FILE
                $this->set_error('upload_no_file_selected');
                break;
            case 6:
                // UPLOAD_ERR_NO_TMP_DIR
                $this->set_error('upload_no_temp_directory');
                break;
            case 7:
                // UPLOAD_ERR_CANT_WRITE
                $this->set_error('upload_unable_to_write_file');
                break;
            case 8:
                // UPLOAD_ERR_EXTENSION
                $this->set_error('upload_stopped_by_extension');
                break;
                default :   $this->set_error('upload_no_file_selected');
                break;
            }

            return FALSE;
        }

        // Set the uploaded data as class variables
        $this->file_temp        =   $_FILES[$field]['tmp_name'];
        $this->file_size        =   $_FILES[$field]['size'];
        $this->_file_mime_type($_FILES[$field]);
        $this->file_type        =   preg_replace("/^(.+?);.*$/", "\\1", $this->file_type);
        $this->file_type        =   strtolower(trim(stripslashes($this->file_type), '"'));
        $this->file_name        =   $this->_prep_filename($_FILES[$field]['name']);
        $this->file_ext     =   $this->get_extension($this->file_name);
        $this->client_name  =   $this->file_name;

        // Is the file type allowed to be uploaded?
        if (! $this->is_allowed_filetype()) {
            $this->set_error('upload_invalid_filetype');
            return FALSE;
        }

        // if we're overriding, let's now make sure the new name and type is allowed
        if ($this->_file_name_override != '') {
            $this->file_name = $this->_prep_filename($this->_file_name_override);

            // If no extension was provided in the file_name config item, use the uploaded one
            if (strpos($this->_file_name_override, '.') === FALSE) {
                $this->file_name .= $this->file_ext;
            }

            // An extension was provided, lets have it!
            else
            {
                $this->file_ext  = $this->get_extension($this->_file_name_override);
            }

            if (! $this->is_allowed_filetype(TRUE)) {
                $this->set_error('upload_invalid_filetype');
                return FALSE;
            }
        }

        // Convert the file size to kilobytes
        if ($this->file_size > 0) {
            $this->file_size = round($this->file_size/1024, 2);
        }

        // Is the file size within the allowed maximum?
        if (! $this->is_allowed_filesize()) {
            $this->set_error('upload_invalid_filesize');
            return FALSE;
        }

        // Are the image dimensions within the allowed size?
        // Note: This can fail if the server has an open_basdir restriction.
        if (! $this->is_allowed_dimensions()) {
            $this->set_error('upload_invalid_dimensions');
            return FALSE;
        }

        // Sanitize the file name for security
        $this->file_name = $this->clean_file_name($this->file_name);

        // Truncate the file name if it's too long
        if ($this->max_filename > 0) {
            $this->file_name = $this->limit_filename_length($this->file_name, $this->max_filename);
        }

        // Remove white spaces in the name
        if ($this->remove_spaces == TRUE) {
            $this->file_name = preg_replace("/\s+/", "_", $this->file_name);
        }

        /*
* Validate the file name
* This function appends an number onto the end of
* the file if one with the same name already exists.
* If it returns false there was a problem.
*/
        $this->orig_name = $this->file_name;

        if ($this->overwrite == FALSE) {
            $this->file_name = $this->set_filename($this->upload_path, $this->file_name);

            if ($this->file_name === FALSE) {
                return FALSE;
            }
        }

        /*
* Run the file through the XSS hacking filter
* This helps prevent malicious code from being
* embedded within a file.  Scripts can easily
* be disguised as images or other file types.
*/
        if ($this->xss_clean) {
            if ($this->do_xss_clean() === FALSE) {
                $this->set_error('upload_unable_to_write_file');
                return FALSE;
            }
        }
        $this->set_image_properties($this->upload_path.$this->file_name);
        return TRUE;
    }

    public function do_upload($field = 'img1')
    {
        /*
* Move the file to the final destination
* To deal with different server configurations
* we'll attempt to use copy() first.  If that fails
* we'll use move_uploaded_file().  One of the two should
* reliably work in most environments
*/
        if (! @copy($this->file_temp, $this->upload_path.$this->file_name)) {
            if (! @move_uploaded_file($this->file_temp, $this->upload_path.$this->file_name)) {
                $this->set_error('upload_destination_error');
                return FALSE;
            }
        }

        /*
* Set the finalized image dimensions
* This sets the image width/height (assuming the
* file was an image).  We use this information
* in the "data" function.
*/
        return TRUE;
    }
} 
```

MyViewForm.php

```
<?php echo form_open_multipart('Booksetups/book');?>

<?php echo form_hidden('book_id',$fbook_id['value']);?>

<input type="file" name="img1" />
<input type="file" name="img2" />
<input type="file" name="img3" />
<input type="file" name="img4" />
<?php 
    echo  form_submit($submitbtn);
    echo form_reset($resetbtn);
?>

<?php echo form_close();?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:26:41.833

使用uploadify jquery 插件。它易​​于使用且完全自定义，具有实时进度条和更多功能。

[上传演示](http://www.uploadify.com/demos/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:45:33.587

调试你的 do_upload 函数，你没有在任何地方使用局部变量 $ 字段

# c# - 更新组合框中 SelectedItem 中的文本

> ID：14475504
> 
> 赞同：-3
> 
> 时间：2013-01-23T08:43:23.720
> 
> 标签：c#, sql

当我们在 selecteditem 中编辑时如何更新组合框中的 selecteditem。这是我的编码：

```
SqlConnection CON2 = new SqlConnection();
                    CON2.ConnectionString = "Data Source=.;Initial Catalog=TWPLSOFTWARE;Integrated Security=True";
                    CON2.Open();
                    SqlCommand CMD1 = new SqlCommand("UPDATE ITEM_GROUP SET ITEM_GROUP_NAME=@IGN WHERE ITEM_GROUP_NAME=@IGN", CON2);
                    CMD1.Parameters.Add(new SqlParameter("@IGN", comboBox2.Text.ToString()));
                    textBox1.Text = "";
                    CMD1.ExecuteNonQuery(); 
```

我在这个编码中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:47:40.807

您的查询不会更新任何内容。

假设您有一个名为“Foo”的条目，并且您想将其更新为“Bar”，您的查询现在看起来像：

```
UPDATE ITEM_GROUP SET ITEM_GROUP_NAME='Bar' WHERE ITEM_GROUP_NAME='Bar' 
```

您必须指定现有名称（或者最好是 ID），而不是 WHERE 子句中的新名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:57:14.483

让我解释一下您的查询到底是做什么的，**什么都没有**；

```
"UPDATE ITEM_GROUP SET ITEM_GROUP_NAME=@IGN WHERE ITEM_GROUP_NAME=@IGN" 
```

您尝试将 all 更新`ITEM_GROUP_NAME`为`@IGN`, where `ITEM_GROUP_NAME`'s are `@IGN`，这意味着您尝试将 all`ITEM_GROUP_NAME`的值更新为自身（哪些值是`@IGN`）。

请更仔细地查看这些文章；

*   [`SQL UPDATE Statement`](http://www.w3schools.com/sql/sql_update.asp)
*   [`Update (SQL) from Wikipedia`](http://en.wikipedia.org/wiki/Update_%28SQL%29)

# qtp - 如何将用户定义的值赋予默认具有“选择”选项的 Weblist

> ID：14475506
> 
> 赞同：0
> 
> 时间：2013-01-23T08:43:31.157
> 
> 标签：qtp

有人可以告诉我，如何为 Weblist 提供用户指定的值（它实际上是一个下拉列表，记录后它只显示“选择”值，如果该值存储在我的浏览器中，则 cookie 选择有效）我想给我的用户每次定义的值。如果我使用“设置”选项，脚本不会运行。

我该怎么做。？请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:56:01.117

通常，您只能`Select`在 WebList 上使用现有值。因此是`Select`方法而不是`Set`方法。

您可以通过在列表中添加额外`option`内容并选择该选项来操作 DOM。您可以通过对象的本机操作（即 QTP 调用它的方式）来做到这一点。您可以通过 访问本机方法（`add`在此示例中）`.WebList("myWebList").object.add OptionToAdd`，尽管您需要添加一个选项对象。

作为替代方案，您还可以将`.value`现有的属性更改`option`为所需的值并选择该值。

# c++ - “Designed Patterns Explained”中的桥接模式示例

> ID：14475513
> 
> 赞同：1
> 
> 时间：2013-01-23T08:43:53.313
> 
> 标签：c++, oop, design-patterns, bridge

我正在研究“Designed Patterns Explained”中的桥接模式示例。我正在查看的示例是示例 10.3，可以在以下位置找到

[http://www.netobjectives.com/resources/books/design-patterns-explained/cpp-code-examples/chapter10#10-3](http://www.netobjectives.com/resources/books/design-patterns-explained/cpp-code-examples/chapter10#10-3)

我的具体困惑在于 Shape 类及其派生类。

```
#pragma once
#include "Drawing.h"

class Shape
{
public:
    Shape(Drawing *aDrawing);
    virtual void draw()= 0;

protected:
    Drawing *myDrawing;
    void drawLine( double, double, double, double);
    void drawCircle( double, double, double);

public:
    ~Shape(void);
}; 
```

在 Circle 类中，我们有

```
#pragma once
#include "Shape.h"

class Circle : public Shape
{
public:
    Circle(Drawing*, double, double, double);
    virtual void draw();
    virtual void drawCircle(double, double, double)=0;

public:
    ~Circle(void);
protected:
    double _x, _y, _r;
}; 
```

所以我的问题是：`drawCircle`既然方法实际上是在基类中实现的，为什么在继承类中可以是纯虚拟的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-15T10:27:17.067

想象一下，您正在构建一个模块来使用不同的 API（Windows GDI、一些智能手机 API、OpenGL 等）绘制形状。有一个典型的层次结构`abstract Shape` `<---` `concrete Circle`，`abstract Shape` `<---` `concrete Rectangle`你必须重新编译和重新部署`Circle`，`Rectangle`每次你添加一个新的框架，每次在现有的框架中发生一些变化。此类更改甚至可能涉及修改这些类的构造函数，因此您的模块的用户也必须更改他们的代码。

示例：您有一个可以使用的模块的第一个版本，具有以下接口`Circle`：

```
class Circle : public Shape
{
  public:
    Circle(int x, int y, int radius);

    void draw(...);
}; 
```

然后，恰好其中一个平台的优化原因迫使您提前知道`DPI`当前平台的分辨率（在实际绘制圆圈之前）。因此，您将不得不更改构造函数：

```
class Circle : public Shape
{
  public:
    Circle(int x, int y, int radius, int dpi);

    void draw(...);
}; 
```

并且您的代码的客户将不得不重新编译他们的应用程序。当然会有一些技巧可以避免这种情况（例如引入`CircleWithDpi`），但它们会导致高度耦合且难以维护的代码。如果你使用桥接模式，你可以让你的清晰设计保持原样，并且仍然表达你的领域（一般来说，“圆”的概念不应该知道任何关于“dpi 分辨率”的东西）。

所以有：

```
class Circle : public Shape
{
  public:
    Circle(int x, int y, int radius);

    virtual void draw(...) = 0;
}; 
```

和

```
class CircleImpl : public Circle
{
  public:
    CircleImpl(int x, int y, int radius, int dpi);
    //perform some calculations before drawing for optimization

    void draw(...);
    //draw using appropriate API
}; 
```

和

```
class ShapeFactory
{
  public:
    virtual Circle* CreateCircle(int x, int y, int radius) = 0;
}; 
```

当然，您将有许多`CircleImpl`s - 每个用于您的模块支持的不同平台（所以`CircleImplGDI`，，，`CircleImplTk`等`CircleImplOpenGL`）。

在实现中，`ShapeFactory`您将`CircleImpl`适当地创建一个特定的，并且您的模块的客户端不必知道任何关于它的信息。此示例是您提供链接的示例的简化版本。请注意，现在，当使用可能`CircleImpl`的 s 之一时，因为`Circle`没有实例化抽象类，所以这也应该清除您关于抽象派生类的问题。

这种模式背后的主要思想是有两个抽象层次：`Shape`是一个抽象的几何概念，`Circle`比`Rectangle`更具体，`Shape`但在绘制它们的许多技术可能性的背景下，它们仍然是相当抽象的。当您了解上下文时，存在特定形状的具体表示：例如 - 在光栅上绘制或使用矢量图形。

另一个抽象级别使您可以推迟有关代码的更多决定 - 起初我们推迟决定我们拥有哪些形状。然后，`Circle`我们`Rectangle`推迟决定如何绘制它们。延迟决策为我们提供了解耦、灵活的代码（如“添加 DPI”示例所示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:48:43.593

任何类中都允许使用纯虚方法，只要您不尝试创建该类的实例。

# c# - MVC4 忽略参数

> ID：14475517
> 
> 赞同：1
> 
> 时间：2013-01-23T08:44:00.333
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

尝试在 Visual Studio 2010 中使用 MVC RC4 Web API 设置新站点，但它似乎不起作用：参数值永远不会传递给该方法。

在 mvc2 中一切正常，但自从升级到 mvc 4 后，大部分事情开始分崩离析。

```
public ActionResult DownloadApp(string id, bool download = false){} 
```

我正在尝试传递下载参数，但控制器没有捕捉到它

```
RedirectResult (Url.Action("DownloadApp", "Account") + "?download=true"); 
```

就像我提到的，它在 MVC 2 中运行良好。我被迫使用`Queryparameter`我不想使用的。有什么办法可以让它像以前一样在 MVC 4 中工作。路线如下：

```
RouteTable.Routes.MapRoute(
                  "Default",
                  "api/{controller}/{action}/{id}",
                  new { controller = "account", action = "index", id = "" },
                  namespaces
                  ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T08:52:04.963

试试这个方法：

```
new RedirectResult(Url.Action("DownloadApp", "Account", new { download = true })); 
```

# android - /usr/bin/bash: 无法执行二进制文件

> ID：14475519
> 
> 赞同：2
> 
> 时间：2013-01-23T08:44:10.773
> 
> 标签：android

我在 android 手机上运行包含 JNI 代码的应用程序，但 CDT 构建控制台提供输出：-

sh bash E:\adt-bundle-windows-x86\android-ndk-r8d\ndk-build all /usr/bin/bash: /usr/bin/bash: 无法执行二进制文件

****构建完成******

 **请帮忙看看这是什么错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:48:43.563

通常，该错误消息意味着 Linux 无法将该文件识别为 shell 脚本或可执行文件。

通常原因是在错误的体系结构上运行可执行文件 - 如果您尝试在 ARM CPU 上运行 x86 可执行文件，则会出现此消息。

`/usr/bin/id`可能被覆盖了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T15:27:36.127

从 ENTRYPOINT 更改为 CMD。

```
ENTRYPOINT ["bash"]
CMD ["bash"] 
```**

# windows - 通过批处理脚本与控制台程序交互

> ID：14475520
> 
> 赞同：0
> 
> 时间：2013-01-23T08:44:14.777
> 
> 标签：windows, batch-file

我想通过批处理脚本启动一个控制台程序。启动控制台程序工作正常。我正在通过`call xxx.exe para para`. 问题是控制台程序在启动后需要这样的输入。

```
call xxx.exe para para
please type in password:_ 
```

是否可以从批处理脚本中输入密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:03:03.350

无论您使用的是*batch*还是*bash*，就像最初看起来的那样，您可以尝试这个简单的管道：

```
echo YourPassword| program.exe parameters... 
```

请注意，如果它确实是一个批处理脚本，请务必确保您的密码和 之间没有多余的空格`|`，否则它将*作为密码的一部分与*密码一起传递。在 bash 中，如果我没记错的话，这样的空格将被忽略（或者只有将回显字符串括在引号中，我不完全确定）。

无论如何，上述方法并不总是有效，因为某些程序以忽略从另一个命令管道传输的输入流的方式实现密码读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:29:51.793

您将问题标记为“Windows”和“Batch”，并在问题中询问了“batch”。这个问题的答案是：是的，`set`像这样使用：

```
set /p password=please type in password: 
```

如果您真的在询问“bash”外壳，您应该重新标记您的问题（并更改文本）。

# mysql - 使用来自用户约束的映射连接两个表

> ID：14475524
> 
> 赞同：1
> 
> 时间：2013-01-23T08:44:23.073
> 
> 标签：mysql, sql

我想根据用户提供的一些约束来连接两个表。我不知道如何用语言表达，所以我将用一个例子来解释我想要做什么：

我有两张桌子：

```
l_id    |    l_fileid                           c_id    |    c_fileid
---------------------                           ---------------------
1       |       X1                                1     |       X2
2       |       X1                                3     |       X2
3       |       X1                                2     |       Y2
4       |       X1                                
5       |       Y1                                
2       |       Y1 
```

用户提供了类似的映射`X1 -> X2, Y1 -> Y2` ，因此结果如下所示：

```
l_id    |    l_fileid    |    c_fileid
-------------------------------------
1     |       X1       |       X2
2     |       X1       |       NULL
3     |       X1       |       X2
4     |       X1       |       NULL
5     |       Y1       |       NULL
2     |       Y1       |       Y2 
```

我已经设法写下一个可以做到这一点的查询，但我希望这**不是最好的方法**。到目前为止，这是我想出的：

```
SELECT * FROM (
    (SELECT * FROM L WHERE l_fileid='X1')
    LEFT JOIN
    (SELECT * FROM C WHERE c_fileid='X2')
    ON l_id=c_id
)
UNION 
SELECT * FROM (
    (SELECT * FROM L WHERE l_fileid='Y1')
    LEFT JOIN
    (SELECT * FROM C WHERE c_fileid='Y2')
    ON l_id=c_id
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:06:34.627

我相信这样的事情应该有效。

```
SELECT * FROM l
LEFT JOIN c ON l_id=c_id AND l_fileid='X1' AND c_fileid='X2'
UNION
SELECT * FROM l
LEFT JOIN c ON l_id=c_id AND l_fileid='Y1' AND c_fileid='Y2' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:22:33.730

编辑：对问题的最新编辑看起来不错。修改答案以匹配。

试试这个：

```
select l_id, l_fileid, c_fileid from l left outer join c on 
   l_id=c_id and 
     ((l_fileid='x1' and c_fileid='x2') or 
      (l_fileid='y1' and c_fileid='y2')) 
```

产生：

```
+ --------- + ------------- + ------------- +
| l_id      | l_fileid      | c_fileid      |
+ --------- + ------------- + ------------- +
| 1         | x1            | x2            |
| 2         | x1            |               |
| 3         | x1            | x2            |
| 4         | x1            |               |
| 5         | y1            |               |
| 2         | y1            | y2            |
+ --------- + ------------- + ------------- + 
```

我的完整脚本在这里，如果这有助于其他人想出答案：

```
create table l (
    l_id  int,
    l_fileid varchar(10)
);

create table c (
    c_id  int,
    c_fileid varchar(10)
);

insert into l (l_id, l_fileid) values (1, 'x1');
insert into l (l_id, l_fileid) values (2, 'x1');
insert into l (l_id, l_fileid) values (3, 'x1');
insert into l (l_id, l_fileid) values (4, 'x1');
insert into l (l_id, l_fileid) values (5, 'y1');
insert into l (l_id, l_fileid) values (2, 'y1');

insert into c (c_id, c_fileid) values (1, 'x2');
insert into c (c_id, c_fileid) values (3, 'x2');
insert into c (c_id, c_fileid) values (2, 'y2');

 select l_id, l_fileid, c_fileid from l left outer join c on 
   l_id=c_id and 
     ((l_fileid='x1' and c_fileid='x2') or 
      (l_fileid='y1' and c_fileid='y2')) 
```

# php - 在自由文本中创建 url 链接

> ID：14475531
> 
> 赞同：-3
> 
> 时间：2013-01-23T08:44:30.553
> 
> 标签：php

> **可能重复：**
> [链接 PHP 文本](https://stackoverflow.com/questions/9250216/linkify-php-text)

嗨，我有一个来自数据库的字段，其中包含 http 链接以及普通文本。

我需要找到一种使用 PHP 显示此信息的方法，以便在适用时显示文本和链接。

以下是我的 sql 查询：

```
 $sql =
   "select bw_supporting_doc
    from cm3rm2 with(nolock)
    where number = '$id'"; 
```

此 sql 语句的输出为：

`Please find below the link to the FSS: http://blahblack.html`

我需要在[http://blahblack.html](http://blahblack.html)显示为普通文本时将其显示为链接。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:50:17.603

```
function hyperlink($text){
    $text = preg_replace("#(http://)+?([.]?[a-zA-Z0-9_/-])*#", "<a href=\"\\0\" target=\"_blank\">\\0</a>", $text);
    return $text;
} 
```

这可能会完成这项工作

示例用法： `$str = 'this is a random string which contains a link http://www.yahoo.com'`;

`echo hyperlink($str);`

# jquery - 是否可以在日期时间选择器中更改日期格式？

> ID：14475534
> 
> 赞同：5
> 
> 时间：2013-01-23T08:44:42.767
> 
> 标签：jquery, jquery-ui

我发现了一个很棒的基于 jQuery-ui [http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)的日期时间选择器，但突然意识到我无法修改日期格式......尝试了这样的事情：

```
jQuery('.datetimepicker').datetimepicker({
        timeFormat: 'HH:mm'
    }).formatDate('yy-mm-dd'); 
```

有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T08:51:34.463

您可以使用以下代码：

```
jQuery('.datetimepicker')
    .datetimepicker({ 
        dateFormat: 'yy-mm-dd', 
        timeFormat: 'HH:mm' 
     }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:47:46.390

试试这个：

这会将日期格式设置为`"yy-mm-dd"`

```
 $.datepicker._defaults.dateFormat = "yy-mm-dd"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T08:48:44.143

是的，有可能，请查看日期选择器的[API 文档](http://api.jqueryui.com/datepicker/#option-dateFormat)`dateFormat`中的选项

这将起作用，

```
jQuery('.datetimepicker').datetimepicker({
        timeFormat: 'HH:mm',
        dateFormat: "yy-mm-dd"
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T08:52:51.167

是的，可以格式化日期。请参阅 此 API 中给出的[链接](http://docs.jquery.com/UI/Datepicker/formatDate)

```
$.datepicker.formatTime(format, timeObj, options) 
```

请参阅此[url](http://trentrichardson.com/examples/timepicker/)中的格式选项卡。在页面底部，您可以找到格式化日期的选项

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T08:53:00.263

试试这个 ：

jQuery('.datetimepicker').datetimepicker({ dateFormat: "D MM d, yy" });

并查看更多文档：[http ://trentrichardson.com/examples/timepicker/#tp-formatting](http://trentrichardson.com/examples/timepicker/#tp-formatting)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T08:55:30.477

可能的，这是一个示例链接。我想从这个例子中提取不会是一个问题:)

[http://jqueryui.com/resources/demos/datepicker/date-formats.html](http://jqueryui.com/resources/demos/datepicker/date-formats.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-18T14:24:20.710

只是要补充一点，上述方法都不适合我，但以下方法有效：

```
$(".datetimepicker").DateTimePicker({
    dateFormat: 'yyyy-mm-dd'
}); 
```

问候

利亚姆

# model-view-controller - Mvc 捆绑，带有内容的缓存还是带有文件名的缓存？

> ID：14475541
> 
> 赞同：0
> 
> 时间：2013-01-23T08:45:16.497
> 
> 标签：model-view-controller, caching, bundling-and-minification, asp.net-optimization

我决定从我的 Mvc Web 应用程序中引用的静态内容中删除所有版本。但我需要缓存。

我想知道浏览器是按文件名还是按内容缓存内容？例如，如果我捆绑了一个没有版本信息的 Jquery 1.6 版（即 jquery.js），然后我将 1.8 版的 jquery 与以前的文件名（jquery.js）放在一起。会发生什么 ？浏览器是否获取新文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:16:26.993

捆绑通过文件的实际内容在捆绑 url(?v=12345) 中生成缓存代码，因此每次更改捆绑的实际内容时，浏览器都会缓存不同的捆绑 url。

# ios - 使用 NSDictionary

> ID：14475549
> 
> 赞同：-5
> 
> 时间：2013-01-23T08:45:41.370
> 
> 标签：ios, objective-c, cocoa-touch

鉴于这本词典：

```
"vals":[
{
"ID":"1",
"NAME":"Jack"
},
{
"ID":"2",
"NAME":"Jason"
},
{
"ID":"3",
"NAME":"Sheryl"
},
{
"ID":"4",
"NAME":"Clark"
},
{
"ID":"5",
"NAME":"Markus"
}] 
```

我正在使用pickerView的方法：

```
NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

那么，给定 NSInteger `row`，我如何获得该 ID 的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:50:02.470

非常基本的方法：

```
for (NSDictionary *idDictionary in [root objectForKey:@"vals"])
{
    NSInteger idValue = [[idDictionary objectForKey:@"ID"] integerValue];
    if (idValue == row)
        return [idDictionary objectForKey:@"NAME"]
} 
```

尽管您可能应该记得 pickerView 行从 0 开始，所以您需要考虑到这一点

编辑：您应该在循环之后添加一个 return nil 或 @"" 以捕获该项目丢失的情况。但正如 xlc0212 上面指出的那样，不同的数据结构会更好。我的建议是有一本像这样的字典：

```
NSDictionary *myDict = @{@"vals" : @[@"Jack", @"Jason", @"Sheryl", @"Clark", @"Markus"]};
NSString *value = [[myDict objectForKey:@"vals"] objectAtIndex:row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:53:19.737

作为`vals`字典数组，您可以从数组中选择一行：

```
NSArray *values = [dict objectForKey:@"vals"];
NSDictionary *value = [values objectAtIndex:row];
return (NSString *) [value objectForKey:@"NAME"]; 
```

`row`与 ID 不匹配，因为您的 ID 从 1 开始，`row`值从 0 开始。如果由于某些原因需要 ID，我宁愿建议在选择选择器行时获取它：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    self.myID = [[[self.myData objectForKey:@"vals"] objectAtIndex:row] objectForKey:@"ID"]
} 
```

无论如何，如果您的 ID 总是只是像 1,2,3,4,5... 这样的索引（没有像 1,2,5,10 这样的孔），那么您的 ID 是相等的`row+1`，您不需要搜索它。

# ruby - 从完全不同的 sinatra 应用程序运行 Rspec？

> ID：14475555
> 
> 赞同：1
> 
> 时间：2013-01-23T08:45:58.453
> 
> 标签：ruby, sinatra, rspec2

我目前正在尝试运行一个 sinatra 框架，该框架从 repo 下载代码，对代码执行 rspec，然后处理来自 RSpec 的结果。但是，当我从不同的应用程序调用它时，我无法让 rspec 运行。

我不断收到以下错误：

```
/Users/dir/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': rspec-core is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
    from /Users/dir/.rvm/gems/ruby-1.9.3-p194/bin/rspec:22:in `<main>' 
```

在运行大量输出之后，它基本上归结为 ruby​​ 在执行 bundle exec 之前没有切换到正确的目录。我已经尝试了几乎任何方法来让它工作但没有成功......似乎即使我更改目录，它也会继续尝试在我正在使用的应用程序上运行 RSpec，而不是我想要的应用程序做。

```
 Dir.chdir('../target_app'){
    exe = "bundle exec rspec spec"
    `#{exe}`
  } 
```

我也尝试过这样的反引号、exec 和 system()，但没有成功。

```
`cd ../target_app && bundle exec rspec spec` 
```

我也尝试过 ChildProcess 之类的方法，但没有成功：

```
 p = ChildProcess.build('bundle', 'exec', 'rspec', 'spec')
  p.io.inherit!
  p.cwd = '../target_app'
  p.start 
```

任何有关如何解决此问题的线索或帮助将不胜感激！

编辑：

我也试过`bundle install --binstub --path vendor`

使用此代码：

```
 Dir.chdir('../target_app'){
    puts `pwd`.chomp
    exe = "bin/rspec spec -o ../tmp.txt"
    puts exe
    `#{exe}`
  } 
```

我得到这个输出：

```
/Users/me/dev/target_app
bin/rspec spec -o ../tmp.txt
/Users/me/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/rubygems_integration.rb:223:in `block in replace_bin_path': can't find executable rspec (Gem::Exception)
    from bin/rspec:16:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:01:34.617

为 Bundler 生成 binstub`bundle install --binstubs`并使用 binstub 代替 rspec，以便始终使用正确的 rspec 和 Gemfile。

[http://gembundler.com/v1.2/man/bundle-exec.1.html](http://gembundler.com/v1.2/man/bundle-exec.1.html)（该在线手册页中有关 binstubs 的更多信息）

# java - 如何对对象的Arraylist进行排序

> ID：14475556
> 
> 赞同：15
> 
> 时间：2013-01-23T08:46:01.060
> 
> 标签：java, collections, arraylist

我有 ArrayList，其中包含足球队（Team 类）。团队有积分，我想按积分数对它们进行排序。

```
 public class Team {
     private int points;
     private String name;

     public Team(String n)
     {
         name = n;
     }

     public int getPoints
     {
         return points;
     }

     public void addPoints(boolean win)
 {
            if (win==true)
            {
    points = points + 3;
            }

            else if (win==false)
            {
            points = points + 1;
            }

}
 //...
 } 
```

主类：

```
 List<Team> lteams = new ArrayList<Team>;

 lteams.add(new Team("FC Barcelona"));
 lteams.add(new Team("Arsenal FC"));
 lteams.add(new Team("Chelsea"));

 //then adding 3 points to Chelsea and 1 point to Arsenal

 lteams.get(2).addPoints(true);
 lteams.get(1).addPoints(false);

 //And want sort teams by points (first index with most points). 
```

我做了我的比较器。

```
 public class MyComparator implements Comparator<Team> {

    @Override
    public int compare(Team o1, Team o2) {
        if (o1.getPoints() > o2.getPoints())
         {
             return 1;
         }
        else if (o1.getPoints() < o2.getPoints())
        {
            return -1;
        }
        return 0;    
    } 

} 
```

现在我想使用它（在主课中）

```
 Colections.sort(lteams, new MyComparator()); 
```

我想看看：

1.  切尔西
2.  兵工厂
3.  巴塞罗那

但它没有排序。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T08:51:13.063

来源：[这里](https://stackoverflow.com/questions/2535124/how-to-sort-an-arraylist-of-objects-by-a-property)

您可以使用[`Collections.sort`](http://java.sun.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)自定义[`Comparator<Team>`](http://java.sun.com/javase/6/docs/api/java/util/Comparator.html).

```
 class Team {
        public final int points;
        // ...
    };

    List<Team> players = // ...

    Collections.sort(players, new Comparator<Team>() {
        @Override public int compare(Team p1, Team p2) {
            return p1.points- p2.points;
        }

    }); 
```

或者，您可以制作`Team implements`[`Comparable<Team>`](http://java.sun.com/javase/6/docs/api/java/lang/Comparable.html). 这定义*了*`Team`所有对象的自然顺序。使用 a`Comparator`更灵活，因为不同的实现可以按名称、年龄等排序。

### 也可以看看

*   [`Comparable`Java：实现和 和有什么区别`Comparator`？](https://stackoverflow.com/questions/1440134/java-what-is-the-difference-between-implementing-comparable-and-comparator)

* * *

为了完整起见，我应该提醒大家，`return o1.f - o2.f`由于可能的溢出，必须非常小心地使用减法比较快捷方式（阅读：*Effective Java 2nd Edition: Item 12: Consider implementation`Comparable`*）。据推测，曲棍球不是一项运动员可以得分的运动会导致问题的数量=）

### 也可以看看

*   [Java Integer：什么是更快的比较或减法？](https://stackoverflow.com/questions/2728793/java-integer-what-is-faster-comparison-or-subtraction/2728858#2728858)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-23T09:10:32.163

```
public class Team {
   private int points;
   private String name;

public Team(String n, int p) {
    name = n;
    points = p;
}

public int getPoints() {
    return points;
}

public String getName() {
    return name;
}

public static void main(String[] args) {
    List<Team> lteams = new ArrayList<Team>();

    lteams.add(new Team("FC Barcelona", 0));
    lteams.add(new Team("Arsenal FC", 2));
    lteams.add(new Team("Chelsea", 3));

    Collections.sort(lteams, new MyComparator());

    for (Team lteam : lteams) {
        System.out.println(lteam.name + ": " + lteam.points + " points");
    }
} 
```

}

```
class MyComparator implements Comparator<Team> {
@Override
public int compare(Team o1, Team o2) {
    if (o1.getPoints() > o2.getPoints()) {
        return -1;
    } else if (o1.getPoints() < o2.getPoints()) {
        return 1;
    }
    return 0;
}} 
```

**输出：**
切尔西：3 分
阿森纳足球俱乐部：2 分
巴塞罗那足球俱乐部：0 分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T00:07:55.687

实际上没有必要像这样定义自定义比较器。

相反，当您想要对 ArrayList 进行排序时，您可以轻松地定义一个。

# 由于 JAVA 8 使用 lamda

```
 // Sort version.
    Iteams.sort(Comparator.comparing(Team::getPoints));

    // Complete version.
    Iteams.sort((o1, o2) -> o1.getPoints().compareTo(o2.getPoints())); 
```

如果对象在第一个上相等，则还有**第二个比较器的选项：**

```
 // e.g. if same points, then compare their names.
    Iteams.sort(Comparator.comparing(Team::getPoints).thenComparing(Team::getName)); 
```

另请注意，默认排序选项是***升序***，但您可以使用以下命令将其设置为***降序***：

```
 // e.g. Sort by points descending.
    Iteams.sort(Comparator.comparing(Team::getPoints).reversed()); 
```

这样，您可以随时以不同的方式对 ArrayList 进行排序，只需添加所需的方法即可。

# php - 我可以使用 MVC 在单个文件中生成多个页面所需的所有内容吗？

> ID：14475557
> 
> 赞同：0
> 
> 时间：2013-01-23T08:46:08.803
> 
> 标签：php, model-view-controller, mod-rewrite

我正处于使用 PHP 学习模型、视图、控制器框架的早期阶段。[多亏了这里](http://php-html.net/tutorials/model-view-controller-in-php/)的教程，我已经掌握了窍门。据我了解，控制器将调用模型，以便可以运行适当的代码，以便正确呈现可查看的内容。

问题是，基于那个特定的教程，我似乎必须为每个页面创建一个全新的文件，只是为了调用模型以呈现数据可见。

例如，在我的 controller.php 文件中，我有：

```
require_once("model.php");  

class Controller 
{  
    public $file;
    public $league;

    public function __construct($file, $league)  
    {
        $this->file = $file;  
        $this->league = $league;
    }   

    public function invoke()  
    {
        // Everything that needs to be done in PHP will be done here so that once 
        // whatever file is included, it will just fit in fine and echo out perfectly
        require_once($this->file.".php"); 
    }
} 
```

在我的 model.php 文件中，我有：

```
class Model 
{
    private $file;
    private $league;

    public function __construct($file, $league)
    {
        $this->file = $file;
        $this->league = $league;
    }

    More code. You get the idea...
} 
```

在我的 teams.php 文件中，我有：

```
$controller = new Controller("teams", "nba");  
$controller->invoke(); 
```

但是，由于teams.php 必须调用模型并且最终需要require_once("teams.php")，所以我必须为视图创建一个全新的文件。因此，现在显示将出现在 teams_display.php 上。无论如何，mod rewrite 是否可以帮助促进所有页面都发生在 index.php 文件中的框架，同时给用户一种他们不是的错觉？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:07:48.220

MVC 不是一个框架，而是一种设计模式。本教程将帮助您理解 MVC 模式，但如果您想使用真正的框架，您可以查看[Zend Framework](http://framework.zend.com)。

在您的情况下 index.php 是入口点，mod rewrite 将所有请求重定向到 index.php，index.php 根据用户请求重定向到适当的控制器。例如 `http://localhost/teams/nba`，“teams”是控制器，“nba”是动作。

您必须创建一个 TeamController 并在**控制器**中创建一个“nba”动作。该模型正在处理 DB 层，因此使用 getNbaList 方法创建一个 Team**模型**来检索所有 NBA 球队。您必须在您的操作中调用模型，然后您可以将**视图**（主要是 html）提供给您从模型中获得的所有团队。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:29:25.667

正如一些人已经提到的那样。MVC 不是一个框架。

MVC 是相当古老的设计模式，[最初](http://www.itu.dk/courses/VOP/E2005/VOP2005E/8_mvc_krasner_and_pope.pdf)是为 smalltalk 定义的。多年来认为它已经有所[发展](http://martinfowler.com/eaaDev/uiArchs.html)并产生了几种相关的模式，这些模式已经适应在 Web 中使用。

MVC 的核心思想是关注点分离。这就是为什么 MVC 和所有受 MVC 启发的模式都由两层组成：

*   *表示层*，处理所有形式的接口
*   *模型层*，处理存储和业务逻辑。

由于这是两个不同的层，他们不应该知道其他人的内部结构。否则你最终会泄漏抽象。

### 表示层

在实现良好的 MVC 结构中，控制器仅更改模型层的状态（在极少数情况下 - 当前视图实例的状态）。控制器不负责模型层或其中任何结构的实例化。

MVC 中的视图实例应该负责产生对用户的响应。在某些情况下，它可能只需要发送一个 HTTP 位置标头，而在其他情况下 - 它通过组合多个模板生成 HTML 输出。从模型层查看它需要的请求数据。

> 在这种情况下，*“用户”*不是人，而是与网站通信的浏览器。

### 模型层

该层通常由三组主要结构组成：

*   [领域对象](http://c2.com/cgi/wiki?DomainObject)，处理特定业务实体的逻辑
*   存储抽象（通常 -[数据映射器](http://www.martinfowler.com/eaaCatalog/dataMapper.html)），能够存储来自域对象的数据
*   [services](http://en.wikipedia.org/wiki/Service_%28systems_architecture%29)，包含应用程序逻辑（域对象和存储抽象之间的交互）

表示层通过服务与模型层交互。控制器向它们发送数据，这会改变模型层的状态，而视图实例则从它们那里请求数据。

如果您有兴趣，这里有更多关于模型层的[解释](https://stackoverflow.com/a/5864000/727208)。

### 附言

避免使用 PHP 框架。它们中没有一个实际上实现了 MVC。相反，它们中的大多数都是纯 Rails 克隆，它本身从未打算成为生产阶段的框架（[此处](https://stackoverflow.com/a/11984678/727208)解释）。

# c# - 使用 OLEDB 从 Stream 读取 AccessFile 到 DataSet

> ID：14475561
> 
> 赞同：5
> 
> 时间：2013-01-23T08:46:31.490
> 
> 标签：c#, c#-4.0, ms-access, stream, oledb

我使用 Oledb 将 AccessFile(.accdb) 读取到 DataSet，我不知道表名或列，常规实现是：

```
public void GetAccessDB(string filepath){

this.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " + filepath;
// get Table Names
this.TableNames = new List<string>();
using (System.Data.OleDb.OleDbConnection oledbConnection = new System.Data.OleDb.OleDbConnection(this.ConnectionString))
{
oledbConnection.Open();
System.Data.DataTable dt = null;
dt = oledbConnection.GetOleDbSchemaTable(System.Data.OleDb.OleDbSchemaGuid.Tables, null);
foreach (System.Data.DataRow row in dt.Rows)
{
  string strSheetTableName = row["TABLE_NAME"].ToString();
  if (row["TABLE_TYPE"].ToString() == "TABLE")
     this.TableNames.Add(strSheetTableName);
}
oledbConnection.Close();
}

this.Dataset = new System.Data.DataSet();
using (System.Data.OleDb.OleDbConnection oledbConnection = new System.Data.OleDb.OleDbConnection(this.ConnectionString))
{
  foreach (string table in this.TableNames)
  {
    string command = string.Format("SELECT * FROM {0};", table);
    using (System.Data.OleDb.OleDbCommand cmd = new System.Data.OleDb.OleDbCommand(command, oledbConnection))
    {
      cmd.CommandType = System.Data.CommandType.Text;
      oledbConnection.Open();
      System.Data.OleDb.OleDbDataReader dr = cmd.ExecuteReader();
      this.Dataset.Load(dr, System.Data.LoadOption.OverwriteChanges, table);
      oledbConnection.Close();
    }
  }
}
} 
```

但是我需要从 Stream 中获取访问文件，并且我不能将它临时写入磁盘，所以你的建议是什么？

我需要这个超载`GetAccessDB(Stream AccessFile)`？我搜索并找到了[This](http://www.c-sharpcorner.com/forums/thread/127120/using-oledb-with-memorystream.aspx)，但这对我来说并不清楚，我最终需要通过 Access File 中的所有表获取 DataSet 。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:05:53.657

我不知道 OleDb 中有任何用于内存数据库的 api 函数。也许，你能安装一个 RAMDisk 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:23:30.683

如果您可以控制`MS SQL Server`，那是个好消息。我目前看到 2 个替代方案：

1.  创建一个[CLR](http://msdn.microsoft.com/en-us/library/ms254498%28v=vs.80%29.aspx)程序集，一旦在上传的文件表中进行插入，它将处理（异步是一个好主意）文件。它将`MS Access`使用上传文件的内容在服务器上创建一个临时文件。然后，用 . 打开它`OleDB`，解析它并将其中的信息插入到一个 SQL 表中，该表将提取的信息与第一个表中的上传文件记录进行映射。然后，您可以去查找第二个表中的数据。

2.  另一种选择是向 SQL 发送一个命令，该命令将执行以下操作：

    1.  使用上传的文件字节在[文件系统上创建一个文件](http://www.simple-talk.com/sql/t-sql-programming/reading-and-writing-files-in-sql-server-using-t-sql/)。
    2.  然后，将该文件用作[链接服务器](http://msdn.microsoft.com/en-us/library/aa213778%28SQL.80%29.aspx)
    3.  用于`SELECT`查询Access数据库

您可能已经注意到，这两个选项都涉及在 SQL Server 上创建（至少是临时的）文件。

# multithreading - 使用 interlocked.CompareExchange 扩展 Interlocked.Add 作为 Interlocked.add(ref float,ref float)

> ID：14475562
> 
> 赞同：2
> 
> 时间：2013-01-23T08:46:35.810
> 
> 标签：multithreading, c#-4.0, thread-safety, extend, interlocked

* * *

```
 public static class InterlockedEx
{
    // AddToTotal safely adds a value to the running total.
    public static float Add(ref float totalValue,float addend)
    {
        float initialValue, computedValue;
        do
        {
            // Save the current running total in a local variable.
            initialValue = totalValue;

            // Add the new value to the running total.
            computedValue = initialValue + addend;

            // CompareExchange compares totalValue to initialValue. If
            // they are not equal, then another thread has updated the
            // running total since this loop started. CompareExchange
            // does not update totalValue. CompareExchange returns the
            // contents of totalValue, which do not equal initialValue,
            // so the loop executes again.
        } while (initialValue != Interlocked.CompareExchange(
            ref totalValue, computedValue, initialValue));
        // If no other thread updated the running total, then 
        // totalValue and initialValue are equal when CompareExchange
        // compares them, and computedValue is stored in totalValue.
        // CompareExchange returns the value that was in totalValue
        // before the update, which is equal to initialValue, so the 
        // loop ends.

        // The function returns computedValue, not totalValue, because
        // totalValue could be changed by another thread between
        // the time the loop ends and the function returns.
        return computedValue;
    }
} 
```

你可以调用 add 像'Interlocked.Add(ref int32,int32) 或 Interlocked.Add(ref int64,int64)'

我这样称呼它：InterlockedEx.Add(ref subtotalVolume[i], v.Volume);

谁能给个建议，让它运行正常。

该函数的结果不等于正常函数（不使用 TPL）。

# javascript - jquery - 知道前两个父母的最快选择器

> ID：14475568
> 
> 赞同：1
> 
> 时间：2013-01-23T08:47:00.137
> 
> 标签：javascript, jquery, jquery-selectors, selector

我有以下设置：

```
 var el = $("#overParent");
 // Do whatever with el here.
 var cls = $(".valueElement", "#parent"); // Get elements with class valueElement inside element with id parent
 // Do whatever 
```

这是有效的，但我想知道我是否可以让它更快。我知道那`#parent`是里面的一个元素，`#overParent`它已经被选中了。我可以以某种方式使用它来仅扫描 el然后`#overparent`获取`#parent`具有指定类的元素吗？

类似的东西：`$(".valueElement", "#parent", el)`但根据文档`$`只需要 2 个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:49:22.583

如果您通过 ID 查找元素，则仅使用：

```
var $element = $('#id'); 
```

不提供任何上下文进行搜索将始终是最快的方式。

同样，在这里您提供一个 ID 作为搜索的上下文，然后`"#parent"`是最快的选择器。理论上你可以用`"#overParent > #parent"`它来实现你的意思，但它实际上意味着更多的工作要做并且会更慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:49:26.353

像这样的选择器`'#theId'`不会让 jQuery 扫描文档，因为它使用`document.getElementById`.

如果您想查找知道其 id 的元素，即使您知道其父元素，也请**始终**使用`$('#theid')`.

事实上，如果你提供父元素作为上下文，jQuery 将调用`document.getElementById` **并**检查父元素是否包含找到的元素。因此，这要慢得多。

从源代码：

```
 // Speed-up: Sizzle("#ID")
    if ( (m = match[1]) ) {
        if ( nodeType === 9 ) {
            elem = context.getElementById( m );
            // Check parentNode to catch when Blackberry 4.6 returns
            // nodes that are no longer in the document #6963
            if ( elem && elem.parentNode ) {
                // Handle the case where IE, Opera, and Webkit return items
                // by name instead of ID
                if ( elem.id === m ) {
                    results.push( elem );
                    return results;
                }
            } else {
                return results;
            }
        } else {
            // Context is not a document
            if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
                contains( context, elem ) && elem.id === m ) {
                results.push( elem );
                return results;
            }
        } 
```

同样，如果要选择具有类的所有元素，请不要指定父级，这无济于事。

在您的情况下，由于您似乎想使用父级来限制集合，只需使用

```
$(".valueElement", "#parent"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:53:18.470

只需坚持使用常规的 id 选择器：

```
$('#element'); 
```

即使您已经选择了父元素，它仍然是最快的：http: [//jsperf.com/id-test-123](http://jsperf.com/id-test-123)

我只是在这里猜测，但我认为浏览器使用查找表通过 id 属性查找元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T08:55:55.867

根据[文档](http://api.jquery.com/id-selector/)...

```
var el = $("#overParent"); 
```

这是非常有效的，然后附加了另一个选择器....

> 对于 id 选择器，jQuery 使用 JavaScript 函数 document.getElementById()，效率极高。当另一个选择器附加到 id 选择器时，例如 h2#pageTitle，jQuery 在将元素识别为匹配之前执行额外的检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T14:57:22.777

@搅拌机

如果您正在使用类并缓存上下文元素，则提供上下文会更快：

[http://jsperf.com/id-test-123/3](http://jsperf.com/id-test-123/3)

# c# - XmlSerializer 序列化类内容

> ID：14475576
> 
> 赞同：0
> 
> 时间：2013-01-23T08:47:38.683
> 
> 标签：c#, xml-serialization, xmlserializer

我有两个类，让我们称它们`A`为`B`：

```
public class A
{
    public int foo;
    public int bar;
}

public class B
{
    public class A;
} 
```

现在，当我序列化对象时`B`，`XmlSerializer`它正在做你期望它做的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<B>
    <A>
        <foo>0</foo>
        <bar>0</bar>
    </A>
</B> 
```

但我需要`XmlSerializer`序列化类的内容`A`但忽略根`<A>`标记，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<B>
    <foo>0</foo>
    <bar>0</bar>
</B> 
```

我知道我可以让成员`A`加入，`B`但这些都是大类，我希望这是最后的手段。我曾尝试搜索 MSDN/Google/Internet，但我似乎无法找到正确的措辞来找到有意义的结果，如果之前有人问过这个问题，我很抱歉。

有什么办法可以`XmlSerializer`不写类的根标签而是写它的成员吗？最好不要重新组织课程，但如果没有其他办法，我也会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:50:00.143

`XmlSerializer`不是那么灵活——你可以告诉它忽略一个属性，但它会完全忽略它。

请注意，以这种方式序列化的任何内容都将很难，如果不是不可能，以后再次正确反序列化。

你为什么不直接把`foo`and`bar`作为属性`B`呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:08:34.773

关于什么：

```
public class A
{
    public int foo;
    public int bar;
}

public class B
{
    [XmlElement(ElementName = "ABetterName")]
    public A Inner;
} 
```

尽管这不是您要查找的内容，但它可能更可取，因为它可以让您为元素提供更好的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:18:08.743

您可以使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)并自己构建 XML。
就像是：

```
XDocument doc = new XDocument(
    new XElement("B",
        new XElement("foo", a.foo),
        new XElement("bar", a.bar)
    )
); 
```

# c# - C# 中的重置绑定

> ID：14475580
> 
> 赞同：1
> 
> 时间：2013-01-23T08:47:47.607
> 
> 标签：c#

我有一个功能

```
public DataSet Select(string sql)
{
    //Get data source from database to DataSet
} 
```

在 DataDriverExample 类和 form_load 中，我绑定到 datagridview。

```
public BindingSource bs = new BindingSource()
public void form_load()
{
    DataSource ds = DataDriverExample.Select("Select * from XYZ");
    bs.DataSource = ds;
    dataGridView.DataSoure = bs;
    dataGridView.DataMember = "TableResult";
    txtAbc.Bindings.Add("text",bs,"TableResult.Col1");
} 
```

它有效，但我有按钮添加（向数据库添加新记录）

```
public void btnAdd_click()
{
    DataDriverExample.Insert("Insert into XYZ values (\"Test\",\"Hello\",\"Bla\")");
    DataSource ds = DataDriverExample.Select("Select * from XYZ");
    bs.DataSource = ds;
    bs.ResetBinding(true);
} 
```

在我的数据库中它现在有新记录，但我收到错误`Cannot bind to the property or column on the DataSource` 对不起我的英语不好。任何人都可以帮助我。Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:57:00.663

要清理您的代码，请为您的绑定创建另一种方法，例如：

```
 private void LoadData()
{
    bs.ResetBinding(true);
    txtAbc.DataBindings.Clear()
    DataSource ds = DataDriverExample.Select("Select * from XYZ");
    bs.DataSource = ds;
    dataGridView.DataSoure = bs;
    dataGridView.DataMember = "TableResult";
    txtAbc.Bindings.Add("text",bs,"TableResult.Col1");
 } 
```

然后只需调用 LoadData(); 在您的表单加载和添加方法上

```
 public BindingSource bs = new BindingSource()
   public void form_load()
   {
   LoadData();
   } 
```

添加：

```
public void btnAdd_click()
{
    DataDriverExample.Insert("Insert into XYZ values (\"Test\",\"Hello\",\"Bla\")");
    LoadData();
} 
```

希望这可以帮助

问候

# delegation - 使用 SAML 2.0 委托令牌的 ADFS 委托

> ID：14475581
> 
> 赞同：0
> 
> 时间：2013-01-23T08:47:49.417
> 
> 标签：delegation, adfs2.0, saml-2.0

我设法将 ADFS 2.0 配置为 SAML 2.0 Idp，并使用 Shibboleth 作为 SAML 2.0 SP 实现了 SSO 场景。现在我想实现一个委托场景，其中 ADFS 将充当 Idp，为非 WIF 应用程序颁发 SAML 2.0 委托令牌。有谁知道这是否支持？我读到 SAML 2.0 委托是使用 SAML ECP 配置文件执行的。ADFS 2.0 是否支持 ECP 配置文件？谢谢马努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:35:16.437

ECP 需要 PAOS 绑定。如果您查看 ADFS 元数据，唯一的绑定是 HTTP Redirect / POST / Artifact 和 SOAP。

# eclipse - 如何在团队中开发多个 Trigger.io 插件？

> ID：14475585
> 
> 赞同：1
> 
> 时间：2013-01-23T08:47:56.527
> 
> 标签：eclipse, svn, plugins, workflow, trigger.io

我正在与我的团队一起开发多个基于 Trigger.io 的原生插件。由于最近的更改，我对工作流程并不完全确定，也无法在文档中找到任何关于它的信息。出现的一些问题：

1）应该为所有插件使用一组检查器项目还是每个插件都有自己的一组？

2) 检查器项目的哪些部分应该通过版本控制来维护，哪些应该保持在本地？*（仅供参考：我们使用 SVN）*

3）（Android）为每个插件使用一个检查器项目时，将它们全部导入为 Eclipse 中的 Java 项目的最佳方法是什么？注意：每个检查器项目都有 3 个子项目，它们在不同的插件中具有相同的名称，所以它们必须重命名？假设我有 5 个插件正在开发中，这意味着我必须将 15 个 Java 项目导入 Eclipse。这真的是它的本意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:20:30.337

开发插件的最有效方法仍然是我们正在研究的东西，现在的情况可能不如它可能的那么好（特别是对于开发多个插件），但就像现在一样：

1) 每个插件都应该有自己的一组检查器项目。

2) Toolkit 放在 plugins 文件夹中的大部分内容可能是最好的版本控制。您可以放心地忽略检查器项目中的`.trigger`文件夹和任何`bin`、`gen`或`build`文件夹。如果您试图在版本控制中保留更少的文件，那么您肯定需要的是 中的`assets/src`文件夹`ForgeInspector`，以及您自己的任何源代码`ForgeModule`，则检查器项目的其余部分应由 Toolkit 重新生成。

3) 我建议每个插件使用一个 Eclipse 工作区，因为当您更新检查器时，工具包会重新生成大量代码，我认为目前无法重命名项目。

* * *

我想我会简要介绍一下这 3 个项目是什么以及为什么会有 3 个：

`ForgeCore`- 这是 Trigger.io 应用程序的预构建核心库，两者都使用它`ForgeInspector`，`ForgeModule`因此它需要是一个单独的项目，两者都可以引用

`ForgeInspector`- 这是为了尽可能地复制你的插件的实际使用方式，所以基本上是一个精简的 Trigger.io 应用程序，它是独立的，`ForgeModule`这样你就可以看到你的插件中有哪些代码以及需要放置哪些代码到 build_steps.json 中，因此它也将在构建时应用于真正的 Trigger.io 应用程序。

`ForgeModule`- 这包含您的插件代码

# android - 通过 kSoap 将对象发送到 Web 服务

> ID：14475589
> 
> 赞同：2
> 
> 时间：2013-01-23T08:48:29.760
> 
> 标签：android, soap, android-ksoap2

我有一个登录视图，从视图中，当用户输入用户名、密码时，我需要将它们发送到网络服务。然后该服务将验证凭据并返回一个 ID.(customerid)。

该服务需要发送一个“凭据”类的对象。

班上：

```
public class Credetials {

    private String username;
    private String password;

    public Credetials(){}

    public String getUserName(){
        return this.username;
    }
    public void setUserName(String uname){
        this.username=uname;
    }

    public String getPassword(){
        return this.password;
    }
    public void setPassword(String password){
        this.password=password;
    }

} 
```

观点/活动：

```
loginButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            /* reading username and password*/
            String username=loginname.getText().toString();
            String password=logincode.getText().toString();

            Credetials credentials=new Credetials();
            credentials.setUserName(username);
            credentials.setPassword(password);

            Log.d("username", credentials.getUserName());
            Log.d("password", credentials.getPassword());
            **// here i have proper username and password.**

            new callGetCustomerId().execute(credentials);

        }
    });
class callGetCustomerId extends AsyncTask<Object, Void, String>{
    @Override
    protected String doInBackground(Object... params) {

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        request.addProperty("credentials", params[0]);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try{
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapObject response = (SoapObject) envelope.getResponse();

            return response.toString();

        }catch(Exception e){
            return e.getMessage();
        }

    }
    @Override
    protected void onPostExecute(String result){
        super.onPostExecute(result);
        Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();

    }
} 
```

问题：

现在的问题是它总是进入 catch 块。该错误显示为**“无法序列化：blah blah ..Credentials@413 ....”**之类 的东西，任何人都可以帮我解决我做错了什么。??

我已经发送了单个字符串参数，之前它工作正常......所以我相信我发送“凭据”对象的方式可能是错误的......！！

编辑：

这是来自网络服务

```
<xs:complexType name="getCustomerId">
 <xs:sequence>
  <xs:element name="credetials" type="tns:credentials" minOccurs="0"/>
 </xs:sequence> 
```

## 编辑2：

在尝试了很多事情之后，我有以下响应转储。

```
aht responseDump is :
<?xml version="1.0" ?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body><S:Fault xmlns:ns4="http://www.w3.org/2003/05/soap-envelope">     <faultcode>S:Server</faultcode>
<faultstring>java.lang.NullPointerException</faultstring>
<detail><ns2:exception xmlns:ns2="http://jax-ws.dev.java.net/"     class="java.lang.NullPointerException" 
note="To disable this feature, set   com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace system property to false">
<ns2:stackTrace><ns2:frame class="presentation.ws.ElderlyWebServiceImpl"  file="ElderlyWebServiceImpl.java" line="196" method="getNurseId"/>
<ns2:frame class="sun.reflect.GeneratedMethodAccessor1173" line="unknown" method="invoke"/><ns2:frame class="sun.reflect.DelegatingMethodAccessorImpl" 
```

file="DelegatingMethodAccessorImpl.java" line="25" method="invoke"/>

所以这就是我的回应......我需要在客户端做些什么吗？或者服务需要改变什么？

## 编辑：3

这就是代码现在的样子..

## 班上

```
public class Credetials implements KvmSerializable{

    /**
 * 
 */
private static final long serialVersionUID = 920795244030577363L;
    /**
 * 
 */

    private String username;
    private String password;

    public Credetials(){}

    public Credetials(String username,String password){
        this.username=username;
        this.password=password;
    }
    public Object getProperty(int index) {
        Object object = null;
        switch (index)
        {
            case 0:
            {
                object = this.username;
                break;
            }
            case 1:
            {
                object = this.password;
                break;
            }

        }
        return object;
    }

    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return 2;
    }

    public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo propertyInfo) {
        // TODO Auto-generated method stub
        switch (index)
        {
            case 0:
            {
                propertyInfo.name = "username";
                propertyInfo.type = PropertyInfo.STRING_CLASS;
                break;
            }
            case 1:
            {
                propertyInfo.name="password";
                propertyInfo.type = PropertyInfo.STRING_CLASS;
                break;

            }
        }
    }

    public void setProperty(int index, Object obj) {
        // TODO Auto-generated method stub
        switch (index)
        {
        case 0:
        {
            this.username = obj.toString();
            break;
        }
        case 1:
        {
            this.password = obj.toString();
            break;
        }
    }

    }
} 
```

## 这是活动：

```
private static final String SOAP_ACTION = "";
private static final String NAMESPACE = "mynamespace";
private static final String METHOD_NAME = "getCustomerId";
private static final String URL = "myurl";

The asynctask
----------------

class callGetCustomerId extends AsyncTask<Object, Void, String>{
    @Override
    protected String doInBackground(Object... params) {

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

        Credetials cred=new Credetials("username","password");

        PropertyInfo credPropertyinfo=new PropertyInfo();
        credPropertyinfo.setName("credentials");
        credPropertyinfo.setValue(cred);
        credPropertyinfo.setType(cred.getClass());

        request.addProperty(credPropertyinfo);

    SoapSerializationEnvelope envelope = new  SoapSerializationEnvelope(SoapEnvelope.VER11);

     envelope.setOutputSoapObject(request);
     envelope.addMapping(NAMESPACE, Credetials.class.getSimpleName(), Credetials.class);
     HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
     androidHttpTransport.debug=true;

     try{
            //Log.d("intotry", "inside try");
            androidHttpTransport.call(SOAP_ACTION, envelope);

            System.out.println("aht requestDump is :"+androidHttpTransport.requestDump);
            System.out.println("aht responseDump is :"+androidHttpTransport.responseDump);

            SoapObject response = (SoapObject) envelope.bodyIn;

            //return response.toString();
            return "call success";

        }catch(Exception e){
            //return e.getMessage();
            return e.toString();
        }

    }
    @Override
    protected void onPostExecute(String result){
        super.onPostExecute(result);

        Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();
        //

    }
} 
```

## WSDL

```
<xs:complexType name="credentials">
<xs:sequence>
<xs:element name="password" type="xs:string" minOccurs="0"/>
<xs:element name="username" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="getCustomerId">
<xs:sequence>
<xs:element name="credetials" type="tns:credentials" minOccurs="0"/>
</xs:sequence>

</xs:complexType>
<xs:complexType name="getCustomerIdResponse">
<xs:sequence>
<xs:element name="return" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType> 
```

我已经在输出转储上面写了。

# asp.net-mvc-4 - 如何检查用户是否在 ASP MVC4 Simple Membership 中担任角色？

> ID：14475590
> 
> 赞同：3
> 
> 时间：2013-01-23T08:48:33.250
> 
> 标签：asp.net-mvc-4

我熟悉：

```
WebSecurity.IsCurrentUserInRole("Admin") 
```

但这似乎不再起作用。如果在我使用 SimpleMembership 时用户处于角色中，是否有另一种方法可以签入我的控制器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T08:51:01.890

您可以使用

```
if (User.IsInRole("Admin"))
{

} 
```

和 webConfig

```
<system.web>
    <roleManager enabled="true" />
    .... 
```

评论后

你可以使用这样的东西：

```
foreach (string rolesForUser in Roles.GetRolesForUser(User.Identity.Name))
{
    if (User.IsInRole(rolesForUser))
    {

    }
} 
```

我认为有一种优雅的方法可以做到这一点......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:50:56.787

您还需要设置 RoleProvider

由于您使用的是 SimpleMembership，因此您可能也应该使用`SimpleRoleProvider`。您可以通过调用`Roles.CreateRole`或使用 RoleManager Web 界面以编程方式创建角色。

```
<roleManager enabled="true" defaultProvider="simple">
  <providers>
    <clear/>
    <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider, 
                             WebMatrix.WebData"/>
  </providers>      
</roleManager> 
```

# testing - 如果我在 jmeter 中使用 CSV 文件，我应该如何配置线程数？

> ID：14475591
> 
> 赞同：0
> 
> 时间：2013-01-23T08:48:33.627
> 
> 标签：testing, jmeter, load-testing, performance-testing

我通过 CSV 数据集配置在 jmeter 中设置 CSV 文件，该文件包含 6 个用户名和密码。
线程组页面中的线程数应该是多少。

另外，如果我想检查 100 个用户，我应该怎么做？
我应该增加 CSV 文件中的用户数还是应该使用线程数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:36:14.827

答案实际上取决于您的测试做什么以及您要注入的负载。

但要进行实际测试，您的 CSV 文件应该有与虚拟用户（JMeters 中的线程）一样多的登录。

并且您应该确保 2 个线程永远不会使用同一个用户（如果您的应用程序不接受它）。

# css - 我有 3 个导航图标，当一个导航图标悬停在它上面时，它后面应该显示一个实心圆圈

> ID：14475600
> 
> 赞同：0
> 
> 时间：2013-01-23T08:49:15.780
> 
> 标签：css, navigation, hover

导航链接/图标：[http ://d.pr/i/tawN](http://d.pr/i/tawN)

当我将鼠标悬停在它们上时，它应该如下所示：[http ://d.pr/i/VKI7](http://d.pr/i/VKI7)

最终，我希望当前页面的图标也是不同的颜色（class="current"）

我尝试使用边界半径来执行此操作，但并不顺利。需要JS吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:02:44.503

在所有支持border-radius属性的浏览器中，使用边框半径应该会产生一个非常平滑的圆：http: [//jsfiddle.net/Mveqj/](http://jsfiddle.net/Mveqj/)

```
div {
    width:100px;
    height:100px;
    -webkit-border-radius: 100px;
    -moz-border-radius: 100px;
    border-radius: 100px;
    background: #000;
} 
```

要让您的图标在具有活动类别时具有不同的颜色，您需要将当前图标换成另一个颜色正确的图标。

我建议为此使用精灵，这样您只需在启用“活动”类时调整图像的背景位置。

更多关于烈酒的信息：http: [//www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

# c++ - 在 C++ 中收集模式元素

> ID：14475604
> 
> 赞同：1
> 
> 时间：2013-01-23T08:49:40.207
> 
> 标签：c++, regex, c++11, iterator, pattern-matching

我需要从匹配某种模式的字符串中收集元素。例如，让我们有以下 URI 片段：

```
std::string uri = "/api/customer/123/order/456/total"; 
```

这应该与以下模式匹配：

```
std::string pattern = "/api/customer/:customerNum:/order/:orderNum:/total"; 
```

在分析该模式时，我想收集其中的“变量”，即以冒号开头和结尾的子字符串。以下片段（改编自 [Split a string using C++11](https://stackoverflow.com/questions/9435385/split-a-string-using-c11)）几乎可以完成这项工作：

```
std::set<std::string> patternVariables(const std::string &uriPattern)
{
    std::regex re(":([^:]+):");            // find a word surrounded by ":"

    std::sregex_token_iterator
    first ( uriPattern.begin(), uriPattern.end(), re),
    last;

    std::set<std::string> comp = {first, last};

    return comp;
} 
```

该片段的问题在于它收集了包括“：”标记在内的变量。什么是收集*没有*冒号的变量的惯用方法（即`\1`在匹配项中，而不是匹配项本身）？我可以手动迭代正则表达式匹配并在循环中累积匹配，但我怀疑可能存在与`{first, last}`表达式类似的更优雅的东西。

假设我的上下文很清楚，也欢迎任何考虑到它的评论：

*   在我的模式中标记变量的更好约定
*   更好的正则表达式的建议
*   对工作流程中的下一步进行前瞻性思考：将模式与实际 URI 匹配，返回一个变量映射及其值（包括相同变量可能多次出现的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:31:54.430

也许我应该完全删除我的问题。班级`regex_token_iterator`已经预料到了这种需求。这个想法是在其构造函数中使用可选的第四个参数：

```
std::sregex_token_iterator
first ( uriPattern.begin(), uriPattern.end(), re, 1),
last; 
```

意思是“`1`我对匹配第一个子表达式感兴趣”。默认值`0`表示“我对匹配项感兴趣”，`-1`表示“我对匹配项之间的文本感兴趣”。

（仍然欢迎其他评论）。

# html - 为什么 Chrome 使用相同 CSS 的不同字体？

> ID：14475605
> 
> 赞同：2
> 
> 时间：2013-01-23T08:49:41.940
> 
> 标签：html, css, google-chrome, fonts

我有一个`span`和一个`input`元素，它们共享相同的字体 CSS 定义。为什么 Chrome 会为它们使用不同的字体？我将如何解决这个问题？

## ![检查输入元素](../Images/259dc2a399abebc64d3660df458f2fb0.png)

![检查跨度元素](../Images/c3841ab586c5140895c745dcee6c41b3.png)

我的目标是让它们在 IE9、Chrome 和 FF 中看起来完全一样。

* * *

CSS 定义（固定），如果它们仍然重要的话。

```
* {
    font-family: Verdana,Helvetica,Arial,sans-serif; /* Moving here fixed it */
}
body {
    /*font-family: Verdana,Helvetica,Arial,sans-serif; -- This caused the issue*/
    font-size: .8em;
    margin: 0;
    padding: 0;
    color: #000;
}
.button 
{
    text-align:center;
    min-width:80px;
    display:inline-block;
    white-space:nowrap;
    background-color:#4A8CF6;
    color:#FFF;
    padding:4px;
    margin:1px;
    border:0;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
    font-size: .8em;
} 
```

* * *

*解决方案*

问题是 span 元素继承自我的 body 的 CSS 定义，而 input 元素没有。我已经在我的 CSS 中定义了字体，`body { font-family:...; }`就像我的计算结果显示一样，我认为使用`display: inline-block;`会强制它们都从 body 继承字体，但事实并非如此。

解决方案是切换到使用`* { font-family:...; }`字体定义。按钮和可点击类简单地定义了大小和颜色等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T08:57:35.297

如果您希望它们具有相同的字体，则必须逐字指定输入元素，如下所示：

```
/* Or input[type=submit] depending on your needs */
span, input { 
    font-family: Arial, sans-serif; /* Your font here */
} 
```

否则，浏览器将使用您的问题显示的默认值。您正在查看**Computed Styles**下的内容，这表明 Chrome 已经为您确定了值，因为您没有指定它们。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T08:53:37.027

您应该在样式表的开头应用 CSS 重置规则。其目的是使所有元素在所有浏览器中具有相同的外观。

例子：

[http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

也可能有用的相关问题：[https ://stackoverflow.com/questions/116754/best-css-reset](https://stackoverflow.com/questions/116754/best-css-reset)

# orm - CoolStorage 无法设置一对一关系

> ID：14475606
> 
> 赞同：1
> 
> 时间：2013-01-23T08:49:42.847
> 
> 标签：orm, one-to-one, coolstorage

问题是我无法理解如何在两个对象之间建立 OneToOne 关系，以使第一个对象与第二个对象具有链接，而第二个对象与第一个对象具有链接。这是代码：

```
[MapTo("Model")]
public class Model : CSObject<Model, int>
{
    [OneToOne(LocalKey = "ModelID", ForeignKey = "ModelID")]
    public Product Product { get { return (Product)GetField ("Product"); } set { SetField ("Product", value); } } 
}

[MapTo("Product")]
public class Product : CSObject<Product, int>
{
    [OneToOne(LocalKey = "ProductID", ForeignKey = "ProductID")]
    public Model Model { get { return (Model)GetField ("Model"); } set { SetField ("Model", value); } }
} 
```

问题是，当我创建产品和模型并将模型的属性“产品”设置为创建的并保存时，产品的“模型”属性不会设置并保持为 NULL。我已经尝试使产品和模型属性的所有本地和外键都相同（例如“ModelID”），但它并没有解决问题。这样做的正确方法是什么？

我想制作其中一个可以解决问题`[OneToMany]`，但会返回一个集合，而我需要一个属性返回一个对象。

**更新**

这是一个简单的解决方案，人们称之为拐杖：

```
[OneToMany]
public CSList<Product> _ProductList { get { return (CSList<Product>)GetField ("_ProductList"); } set { SetField ("_ProductList", value); } }

[NotMapped]
public Product Product {
    get {
        CSList<Product> list = this._ProductList;
        if (list.Count > 0)
            return list [0];
        return null;
    }
    set {
        if (value != null) {
            CSList<Product> list = this._ProductList;
            list.RemoveAll ();
            list.Add (value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:24:58.043

您可以建立这两种关系 [ManyToOne]。这将适用于您的场景。

# ios - 在 Json Parsing 中解析双引号和单引号

> ID：14475615
> 
> 赞同：0
> 
> 时间：2013-01-23T08:50:29.147
> 
> 标签：ios, objective-c, json, ipad, encoding

我正在解析一个 JSON url。我得到`\u00e2\u20ac\u0153`的不是单引号，`\u00e2\u20ac\u009d`而是双引号。就我而言，我正在做`NSUTF8StringEncoding`，但仍然没有得到单引号和双引号。

这是网络浏览器中的响应：

> {"status":"1","data":[{"id":"1345","title_en":"","content_en":"妈妈说，\u00e2\u20ac\u0153我喜欢这个。\u00e2 \u20ac\u009d\n\nJake 说，\u00e2\u20ac\u0153我不明白\u00e2\u20ac\u2122t 明白了。\u00e2\u20ac\u009d\n","image":"1396","pos":"2 ","video_type":"0","video":"0","video_alt":"","sound_type":"1","sound":"1123","sound_alt":"","作者":"","type":"0","book_id":"148","user_id":"24","title":"美术馆","author_url":"maureen-d-1" ”book_url“：”艺术博物馆","video_filename":"","sound_filename":"atmuseum2.m4a"}]}

是否可以使用`NSUTF8StringEncoding`或其他方式解析上述响应。或者我需要从 php 端完成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:11:05.017

你使用 NSJSONSerialization 吗？在我的应用程序中，我这样做：

```
NSError* localError;
id jsonObjects = [NSJSONSerialization JSONObjectWithData:data
                                                 options:NSJSONReadingMutableContainers
                                                   error:&localError]; 
```

在“数据”变量中，我有来自服务器的响应。我也从服务器接收 UTF 编码的文本（如 \u00e2\u20ac），但最后我得到了正常的字符串。“jsonObjects”将包含本机类型的数据：

```
 if ([jsonObjects isKindOfClass:[NSDictionary class]])
    {
        NSNumber* age = [jsonObjects objectForKey:@"age"];
    //...etc
    } 
```

# java - 为什么即使不涉及事务，我也可以使用休眠方式插入/更新数据？

> ID：14475619
> 
> 赞同：0
> 
> 时间：2013-01-23T08:50:46.197
> 
> 标签：java, hibernate

众所周知，在 Hibernate 中，如果没有事务提交，则更改不会影响数据库。但是我发现了一些奇怪的东西。代码如下：

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("Spring.xml");
    SessionFactory sessionFactory = (SessionFactory) ctx.getBean("sessionFactory");
    Session session = sessionFactory.openSession();
    Model model = new Model();
    ...
    session.save(model);
    session.flush();
    session.close(); 
```

即使没有交易，模型也被保存到数据库中，任何人都可以解释一下吗？任何意见将不胜感激！谢谢！

PS：我正在使用mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:02:29.700

session.flush 命令保存了事务。如果是错误的，你应该使用事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:49:30.363

通常hibernate需要线路`session.beginTransaction();`才能工作。你没有写，你的应用程序工作，我猜你的应用程序运行在提供事务管理的应用程序服务器中。例如 jboss、weblogic...

但是，这并不意味着没有交易。您是否将自动提交设置为 true？

顺便说一句， session.flush() 和 txn.commit() 是不同的。

刷新是将底层持久存储与内存中保存的持久状态同步的过程。

在 session.flush() 之后，您仍然可以调用 txn.rollback() 来回滚所有更改。

**编辑**

哦，我看到你用过弹簧。你在春天配置了 txnmanager 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:52:19.800

Hibernate 不需要事务，基于数据库的应用程序中最常见的问题只是通过事务更容易解决，这就是为什么**通常**每个人都使用 Hibernate 的事务。但这仅仅是巧合/约定/懒惰。

Hibernate 的所有需求都是一个`java.sql.Connection`，如果你的容器提供了一个，即使当前没有配置事务管理器，Hibernate 也可以。

事实上，Hibernate 并不知道可能存在事务管理器。所以`session.flush()`将使用`ApplicationContext`获取连接，生成 SQL 并使用 JDBC 将生成的 SQL 代码发送到数据库。

从 Hibernate 的角度来看，这就是发生的一切。

将数据提交到数据库的原因可能有多种：

1.  您忘记在连接上打开自动提交。
2.  你的 web 容器/spring 配置会自动连接一个与 HTTP 请求同步的事务管理器。
3.  您的代码被称为另一种方法，该方法用`@Transactional`;注释 在这种情况下，您继承现有事务。

# ruby-on-rails - 如何根据rails中的用户输入字段过滤任务？

> ID：14475625
> 
> 赞同：0
> 
> 时间：2013-01-23T08:50:59.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想制作一个搜索表单，用户可以在其中根据国家、城市、位置、性别、年龄、出生日期等搜索其他任务。这是我的搜索表单...

```
 <%= form_for(@othertask, url: "/other_task", :html =>{:method => :post}) do |f| %>
 <%= select_tag "country", options_for_select([], params[:country]), {:multiple => false, :class => "countries", :'data-country' => "IN", :id => "countries_states1"} %>
 <%= select_tag :state, options_for_select([], params[:state]), { :class => "states", :'data-country' => "countries_states1", :'data-state' => ""} %>
 <%= text_field_tag :city, params[:city], :placeholder => "City"%>                
 <%= text_field_tag :dob, params[:dob], :placeholder => "date of birth", :id => "dp2" %>
 <%= select_tag :highlyeducation, options_for_select(["ME/MTech","MCom","MCA","BE/BTech","MBA","BCA/BSc","BCom"], params[:higheducation]), {:multiple => false} %>
 <%= radio_button_tag :gender,'Male', params[:male] %>Male
 <%= radio_button_tag :gender,'Female', params[:female] %>Female <br/><br/>
 <%= f.submit "Search", class: "btn btn-large" %> 
```

这是我的控制器——

```
 def create

    if @other_tasks = Micropost.joins(:user).where('users.city' => params[:city], 'users.country' => params[:country])  
    render 'index'
    else
      @other_tasks = []
    render 'index'
    end
 end 
```

用户可以通过填写零个、一个、两个或所有字段进行搜索。为此，如果我使所有可能的组合来获取所有任务，则需要编写大量查询。如何仅使用一个查询根据用户输入获取任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:12:23.423

我不明白任务是如何连接到您域中的微博的，以及您为什么使用创建操作来搜索任务。我认为澄清这些问题将有助于您获得更好的答案。

您需要做的是将所有可搜索字段分组到一个数组中，并在 params 中为该字段接收的值不为空时应用过滤器：

```
def create
  @other_tasks =  Micropost.joins(:user)
  search_fields = [:country, :state, :city, :dob, :highlyeducation]
  search_fields.each do |f|
    @other_tasks = @other_tasks.where("users.#{f} = ?", params[f]) unless params[f].blank?
  end
  render :index
end 
```

# javascript - 如何在使用jQuery单击后仅附加一次数据

> ID：14475626
> 
> 赞同：1
> 
> 时间：2013-01-23T08:51:00.210
> 
> 标签：javascript, jquery, timeout, append

所以，我有这个小功能：

```
carousel_controls_buttons.live('click', function(e){
    setTimeout(function(){
       info_board_span.append(info_board_description);
       e.preventDefault();
    }, 450);
}); 
```

我想要做的是`info_board_description`在两次、三次快速点击后停止追加一次以上。当我这样做时，这些数据会附加一次以上，并且我有内容重复。我怎样才能停止这个一段时间，这个 450 毫秒？谢谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:57:09.193

使用布尔值来控制它。

```
var flag = true;
carousel_controls_buttons.live('click', function(e){
    e.preventDefault();
    if (flag) {
       setTimeout(function(){
           info_board_span.append(info_board_description);
           flag = true;
       }, 450);
       flag = false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:00:02.027

您可以使用`clearTimeout`功能：

```
var t = '';
carousel_controls_buttons.live('click', function(e){
    clearTimeout(t);
    t = setTimeout(function(){
          info_board_span.append(info_board_description);
          e.preventDefault();
    }, 450);
}); 
```

示例：http: [//jsfiddle.net/xhSvC/](http://jsfiddle.net/xhSvC/)

请注意，`live`不推荐使用方法，您应该改用`on`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T08:59:13.807

虽然其他答案应该有效，但我想向您介绍`debounce`&的概念`throttle`。

[http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)是一个你可以用来实现你需要的插件，即确保一个函数每x秒只执行一次。

> 油门与去抖动
> 
> 节流和去抖动都会限制函数的执行，但哪种情况适合特定情况？
> 
> 好吧，简单地说：虽然节流将函数的执行限制为每延迟毫秒不超过一次，但去抖动保证函数只会执行一次（给定指定的阈值）。

```
carousel_controls_buttons.live('click', function(e) {
    $.debounce(450, function() {
       info_board_span.append(info_board_description);
       e.preventDefault();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:56:23.143

在那边放一个计数说 var count=0; 命中时增加并检查条件如果 count==1 如果不离开则附加它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T08:58:24.057

有一个事件可以实现这一目标：

```
carousel_controls_buttons.one('click', function() {
  setTimeout(function(){
       info_board_span.append(info_board_description);
       e.preventDefault();
    }, 450);
}); 
```

# php - 在 codeigniter 中的多个应用程序之间共享配置

> ID：14475629
> 
> 赞同：2
> 
> 时间：2013-01-23T08:51:12.373
> 
> 标签：php, codeigniter

我正在尝试在 1 个 codeigniter 应用程序下创建多个应用程序，但是其中一些将共享相同的配置，例如数据库配置。

```
-application
  -config
  -models
  -project_1
    -config
    -controllers
    -models
  -project_2
    -config
    -controllers 
```

是否可以在应用程序文件夹的第一级加载配置，如果配置文件不存在，则查找应用程序级的文件夹？我知道当我使用 add_package_path() 手动加载配置时，这是可能的，但自动加载不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:57:56.243

为什么不保持简单：

```
<?php

    // This app has no config. Use the shared one
    require_once('/path/to/common/config.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:29:24.763

你应该使用包：

[http://ellislab.com/codeigniter/user-guide/libraries/loader.html](http://ellislab.com/codeigniter/user-guide/libraries/loader.html)

我倾向于在 web 根目录中创建一个名为“share”的包，即 packages/share

在您的包文件夹中，您可以创建一个类似于核心 CI 应用程序配置、帮助程序、模型、视图等的文件夹结构。

假设您只想拥有一个 DB 文件，您可以将 db 配置文件放在 packages/share/config 中，并在应用程序数据库文件中使用以下内容调用此文件：

```
include_once(FCPATH . 'packages/share/config/database.php'); 
```

# maven - Maven 错误 - 无法解析项目的依赖关系

> ID：14475632
> 
> 赞同：0
> 
> 时间：2013-01-23T08:51:28.223
> 
> 标签：maven

我正在按照给出的步骤

[http://seleniumhq.org/docs/03_webdriver.jsp#java](http://seleniumhq.org/docs/03_webdriver.jsp#java)

当我运行 'mvn clean install' 时，出现以下错误：

```
[ERROR] Failed to execute goal on project MySel20Proj: Could not resolve dependencies for project MySel20Proj:MySel20Proj:jar:1.0: Failed to collect dependencies for [org.seleniumhq.selenium:selenium-java:jar:2.28.0 (compile), com.opera:operadriver:jar:1.1 (compile)]: Failed to read artifact descriptor for org.webbitserver:webbit:jar:0.4.14: Could not transfer artifact org.sonatype.oss:oss-parent:pom:6 from/to central (http://repo.maven.apache.org/maven2): Read timed out -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:56:59.553

检查这个[Opera 驱动程序](http://mvnrepository.com/artifact/com.opera/operadriver/0.7.3)。此驱动程序不是 Selenium 的默认部分，因为它是由第 3 方开发的。看看这个[页面](http://seleniumhq.org/download/)，如果你向下滚动一点，有一个包含 3rd 方驱动程序的列表，其中包含指向它们的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:49:47.830

I feel that the Support for Opera in Selenium 2.28 is not present till date... Please correct me If I am wrong

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:36:53.263

貌似是网络问题，我又试了下，成功了！无论如何感谢您的帮助。

# asp.net-mvc - MVC 如何通过客户端验证来验证 DateTime 字段

> ID：14475635
> 
> 赞同：1
> 
> 时间：2013-01-23T08:51:34.747
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

在我的视图模型中，我设置了一个具有此属性的字段。

如果用户以正确的格式输入日期和时间，一切正常。

如果用户没有以正确的格式插入日期时间，则会出现错误。

我也想在客户端进行验证。

你能告诉我怎么做吗？

```
 [Required]
    [Display(Name = "Start DateTime")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MM/dd/yyyy HH:mm}")]
    public System.DateTime DateTimeStart { get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:17:10.403

从类型的属性中获取格式异常`DateTime`是非常烦人的问题。在`DateTime`.

`DataAnnotaions`在服务器端工作并充分利用它们，您需要`ModelState.IsValid()`在控制器中添加。

```
public ActionResult Index(MyViewModel model)
{
    if(ModelState.IsValid())
    {
       // valid data received...
    }
    else
    {
       // Invalid data, add model error here and return view...
    }
} 
```

*如果您要在客户端*进行这些工作，那么您需要`JavaScript`在代码中包含两个附加文件，即`jquery.validate.js`与核心库`jquery.validate.unobtrusive.js`一起。`jQuery`默认情况下，所有这些文件都在基本 MVC 项目中并包含在`Layout`.

> 请务必注意包含这些文件的顺序。`jQuery`核心应始终位于顶部，然后是验证库。

*   **jQuery.js**
*   **jquery.validate.js**
*   **jquery.validate.unobtrusive.js**

> `web.config`确保在MVC 项目的文件中打开了验证标志。转到此文件并找到以下内容并设置它们（ `true`如果它们为假）。

```
<appSettings>
  <add key="ClientValidationEnabled" value="true"/> 
  <add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
</appSettings> 
```

这应该将您的验证设置为在客户端工作。[您可以使用RegularExpression](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute(v=vs.110).aspx)装饰模型属性。

```
 [Required]
 [RegularExpression("^(([0-2]?[0-9]|3[0-1])/([0]?[1-9]|1[0-2])/[1-2]\d{3}) (20|21|22|23|[0-1]?\d{1}):([0-5]?\d{1})$", ErrorMessage = "Invalid date")]
 public string DateTimeStart { get; set; } 
```

这将验证`datetime`in`dd-mm-yyyy hh:mm`格式。

此外，在这种情况下，您还可以将属性设为`string`类型，因为正则表达式会处理您的日期格式。

除此之外，您还可以**[创建自定义 DataAnnotation。](http://weblogs.asp.net/brijmohan/asp-net-mvc-3-custom-validation-using-data-annotations)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:10:39.247

首先，您使用什么来允许用户输入日期？

如果您使用的是[Jquery DatePicker](http://jqueryui.com/datepicker/)，那么请参阅[此示例](http://jsfiddle.net/xVyKw/)，用户无法以错误的格式输入日期（除了检查元素和更改文本框值，可以忽略。）

使用 Jquery Datepicker 的示例代码：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Datepicker - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });
  </script>
</head>
<body>

<p>Date: <input type="text" id="datepicker" /></p>

</body>
</html> 
```

如果您不使用 DatePicker，我强烈建议您使用它。

如果您是 datepicker 的新手，您可以阅读以下列出的文章以开始使用：

*   [ASP.NET MVC中jquery Date Picker介绍](http://yassershaikh.com/introduction-to-jquery-date-picker-in-asp-net-mvc/)
*   [jQuery 用户界面。小部件。日期选择器（日历）](http://basicuse.net/articles/pl/scripting_languages/javascript/jquery_ui_widgets_datepicker_calendar)

# ruby-on-rails - rails 3 activescaffold --ID--奇怪的行为

> ID：14475638
> 
> 赞同：0
> 
> 时间：2013-01-23T08:51:45.993
> 
> 标签：ruby-on-rails, activescaffold

这是我灵魂的尖叫））
我以前从未见过这种行为。
active_scaffold 3.0.3 rc

我正在尝试添加自定义操作：

```
config.action_links.add 'zip_consumer_images', 
  :controller => '/services',
  :label => 'images', 
  :page => true, 
  :type => :member 
```

还有我的路线：

```
get 'services/zip_consumer_images' => 'services#zip_consumer_images'

namespace :admin do 
    resources :events do
      as_routes
      member do
        get 'images'
      end
    end
end 
```

当我尝试 /admin/events 时出现错误：

**没有路线匹配 {:action=>"zip_consumer_images", :id=>"--ID--", :controller=>"admin/services"}**

另一个奇怪的行为是有时它会起作用。我知道这听起来很奇怪，但是经过 10-20 次尝试**/admin/events**一次后它可以正常工作，并且我看到我的自定义操作标记为带有正确链接 **services/zip_consumer_images?id=10的****图像**。

 **有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:51:39.077

尝试使用**collection**而不是**member**：

```
命名空间 :admin 做
    资源：事件做
      as_routes
      收集做
        获取“图像”
      结尾
    结尾
结尾

```**

# mysql - 如何在 id 或 name 上搜索某些采购订单

> ID：14475639
> 
> 赞同：0
> 
> 时间：2013-01-23T08:51:47.520
> 
> 标签：mysql

我们希望使用单个搜索框根据采购订单 ID（主键）或采购订单名称过滤采购订单。

我们使用 like 参数在 name 字段上进行搜索，但它似乎不适用于主键。它仅在我们对 id(s) 使用相等运算符时才有效。但是，如果我们可以使用 like for id(s) 过滤采购订单，那将是更可取的。这该怎么做？

```
create table purchase_orders (
id int(11) primary key,
name varchar(255),

...
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:01:00.823

### 选项1

```
SELECT *
FROM purchase_orders
WHERE id LIKE '%123%'; -- tribute to TemporaryNickName 
```

这太可怕了，性能方面:)

### 选项 2a

添加一个接收字符串版本的文本列`id`。也许添加一些触发器来自动填充它。

### 选项 2b

`id`将列的类型更改为`CHAR`或`VARCHAR`（我认为`CHAR`应该首选主键）。

在两个 2a 中。和 2b。`FULLTEXT`在这种情况下，向该列添加一个索引（可能是一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:05:02.847

我认为 LIKE 应该有效。我假设您的 SQL 编写不正确。假设您有订单名称“ABCDEF”，那么您可以使用以下查询结构找到它。

```
SELECT id FROM purchase_orders WHERE name LIKE '%CD%'; 
```

为了解释它， % 符号意味着它是一个通配符。结果，此查询将选择其中包含“CD”的任何字符串。

根据表结构，varchar 可以包含 255 个字符。我认为这是一个相当大的字符串，它可能会消耗大量资源，并且会花费更多时间来使用 SQL 函数（如**LIKE** ）搜索某些内容。您可以随时通过 id 搜索它

> `WHERE id = something`. 顺便说一句，这是更快的方式

，但我不认为订单 ID 是用户友好的数据，而是让用户使用产品名称。我的建议是使用 apache Lucene 或者 MySQL 的全文搜索功能（可以提高搜索性能）。

[Apache Lucene](http://lucene.apache.org/core/)

[MySQL全文搜索功能](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

这些工具旨在以更快的方式通过大字符串列表搜索特定模式或单词。许多网站使用它来构建自己的迷你搜索引擎。我发现mysql全文搜索功能几乎不需要学习曲线并且直接使用=D

# design-patterns - decorator.xml 中的可配置站点网格模式

> ID：14475641
> 
> 赞同：0
> 
> 时间：2013-01-23T08:51:56.537
> 
> 标签：design-patterns, configuration, decorator, sitemesh

是否可以在 decorator.xml 中添加一些可配置的参数？我需要做类似的事情：

```
<decorator name="sample" page="sample.jsp">
      <pattern>/sample.${my.own.ext}</pattern>
</decorator>

<decorator name="example" page="example.jsp">
      <pattern>/example.${my.own.ext}</pattern>          
</decorator> 
```

并在一些配置文件 mycfg.parameters 中放置：

my.own.ext=myhtm

因此可以更改为其他服务

除了为其他服务创建许多 decorator.xml 文件之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:42:53.617

您可以在构建时使用[Maven 资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)来替换 decorator.xml 文件中的参数。

在您的 maven pom.xml 文件中，您可以像这样定义属性/资源：

```
<project>
  ...
  <properties>
    <my.own.ext>html</my.own.ext>
  </properties>

  <resources>
    <resource>
      <directory>src/main/webapp</directory>
      <filtering>true</filtering>
      <includes>
        <include>WEB-INF/decorator.xml</include>
      </includes>
    </resource>
  <resources>
  ...
</project> 
```

如果您不使用 maven ，您可以[在 Ant 中执行相同的操作。](http://ant.apache.org/manual/Tasks/copy.html)

或者，您可以使用[Sitemesh Configuration: Medium Level, Assembly 中](https://github.com/sitemesh/sitemesh3/wiki/Design-Doc%3A-Configuration)描述的方法在运行时使用 init-param/system 属性变量配置装饰器选择器。例如：

```
String extension = System.getProperty("extension");
javax.servlet.Filter filter = new SiteMeshFilterBuilder()
    .addDecoratorMapping("/sample." + extension, "/sample.jsp")
    .addDecoratorMapping("/example." + extension, "/example.jsp")
    .build(); 
```

# arrays - PostgreSQL 的 id 匹配列表

> ID：14475647
> 
> 赞同：1
> 
> 时间：2013-01-23T08:52:12.627
> 
> 标签：arrays, postgresql

我正在`media`使用一些过滤器扩展我的项目选择，其中之一是`category`. 媒体和类别之间的关系是多对多的，这意味着我有一个关系表`media_categories`。我正在发送`integer[]`带有类别 ID 的类别过滤器。如何匹配两个数组以获取公共元素？

这是我的存储过程：（见代码中的注释）

```
CREATE OR REPLACE FUNCTION mediabase.select_media(sysenvironment character varying, statusid integer, wildcard character varying, categoryIds integer[])
  RETURNS refcursor AS
$BODY$
    DECLARE ref refcursor;

    BEGIN
      OPEN ref FOR 

    SELECT 
        media.id, 
        media.title, 
        media.unique_filename, 
        media.owner_id, 
        media.status_id, 
        media.location_name_id, 
        media.upload_user_id, 
        media.upload_ip, 
        media.metadata_id, 
        media.type_id, 
        media.description, 
        media.system_environment, 
        media.upload_date, 
        media.gps_location, 
        media.language_id, 
        (SELECT ARRAY (SELECT publication_id FROM mediabase.media_publications WHERE media_id = media.id)) as publication_ids,
        media.limitations, 
        (SELECT ARRAY (SELECT category_id FROM mediabase.media_categories WHERE media_id = media.id)) as category_ids,
        (SELECT ARRAY (SELECT keyword_id FROM mediabase.media_keywords WHERE media_id = media.id)) as keyword_ids,
        media.credits,
        metadata.width, 
        metadata.height, 
        metadata.equipment, 
        metadata.copyright, 
        metadata.creation_time, 
        metadata.file_format, 
        metadata.resolution, 
        metadata.resolution_unit, 
        metadata.gps_longitude, 
        metadata.gps_latitude, 
        metadata.artist, 
        metadata.color_space, 
        metadata.gps_altitude, 
        metadata.software_used, 
        metadata.user_comment
    FROM 
        mediabase.media, 
        mediabase.metadata
    WHERE media.metadata_id = metadata.id
    AND (media.status_Id = statusId OR statusId = -1)
    AND media.system_environment = sysEnvironment
    AND (lower(media.title) LIKE lower('%'||lower(wildcard)||'%') OR lower(media.description) LIKE lower('%'||lower(wildcard)||'%') OR lower(metadata.artist) LIKE lower('%'||lower(wildcard)||'%'))
    -- Problem start
    -- in the following line I'm trying to make the match with no success
    AND (SELECT ARRAY (SELECT category_id FROM mediabase.media_categories WHERE media_id = media.id)) IN (categoryIds) 
    -- Problem end
    ORDER BY media.upload_date DESC;

      RETURN ref;                       
    END;
    $BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:39:06.657

嗯，我猜你正在寻找 postgre 数组函数 <@ （包含在）

[http://www.postgresql.org/docs/9.2/static/functions-array.html](http://www.postgresql.org/docs/9.2/static/functions-array.html)

条件必须类似于：

```
AND (SELECT ARRAY (SELECT category_id FROM mediabase.media_categories WHERE media_id = media.id)) <@ categoryIds 
```

# android - 我的wap有很多bug让我很困惑

> ID：14475648
> 
> 赞同：1
> 
> 时间：2013-01-23T08:52:24.740
> 
> 标签：android, wap

这些天我创建了wap。我发现一个问题，如果我设置一个代理它可以连接。如果没有设置代理，则无法连接。但在此之前必须设置代理连接。

错误是：

```
01-23 11:04:41.400: W/System.err(9328): java.net.ConnectException: failed to connect to localhost/127.0.0.1 (port 80) after 10000ms: isConnected failed: ECONNREFUSED (Connection refused)
01-23 11:04:41.400: W/System.err(9328):     at libcore.io.IoBridge.isConnected(IoBridge.java:214)
01-23 11:04:41.410: W/System.err(9328):     at libcore.io.IoBridge.connectErrno(IoBridge.java:152)
01-23 11:04:41.410: W/System.err(9328):     at libcore.io.IoBridge.connect(IoBridge.java:112)
01-23 11:04:41.410: W/System.err(9328):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-23 11:04:41.410: W/System.err(9328):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
01-23 11:04:41.410: W/System.err(9328):     at java.net.Socket.connect(Socket.java:872)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-23 11:04:41.410: W/System.err(9328):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:99)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
01-23 11:04:41.410: W/System.err(9328):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
01-23 11:04:41.410: W/System.err(9328):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
01-23 11:04:41.410: W/System.err(9328):  at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188) 
```

它有`HttpURLConnection 的getOutputStream()`方法错误。

只有在设置代理时有例外。谁遇到同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:55:13.293

看起来您正在向 localhost (127.0.0.1) 发出请求

这在手机或模拟器上运行时不起作用，因为手机/emu 没有在端口 80 上服务的 Web 浏览器。

从可公开访问的地址提供您的网页，并将您的`http://localhost`或替换`http://127.0.0.1`为可公开访问的地址。

如果您需要从手机加载 html 文件，请不要使用 HTTP 类，请使用文件类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:56:22.927

这是[答案。](https://stackoverflow.com/a/11535247/1436931).

**网络请求只能在 ANDROID >= 3.0 的后台线程上进行**

# ios - 一个 FetchedResultsController 用于一个 UIViewController 中的两个 UITableView

> ID：14475652
> 
> 赞同：0
> 
> 时间：2013-01-23T08:52:45.800
> 
> 标签：ios, uitableview, core-data

我正在使用最新的 SDK 和 XCode 4.5.2 开发一个使用 Core Data 的 iOS 应用程序。

在一个`UIViewController`我将有两个`UITableView`,`shopsList`和`productsList`. 我想使用**Core Data**，这是我第一次使用它。因此，我开始使用 Xcode Master Detail 模板，并且在以下位置找到了这段代码`MasterViewController.m`：

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    NSArray *sortDescriptors = @[sortDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
} 
```

如果我有这个`UIViewController`界面：

```
@interface FirstViewController : UIViewController<CLLocationManagerDelegate, UITableViewDataSource, UITableViewDelegate, UISearchBarDelegate>
{
    CLLocationManager* locationManager;
    BOOL isMenuHidden;
    BOOL isShopsListOpen;
    BOOL isProductsListOpen;
    long int selectedShopRow;
    long int selectedProductRow;
    NSIndexPath* shopCheckedIndexPath;
    NSIndexPath* productCheckedIndexPath;
}

@property (unsafe_unretained, nonatomic) IBOutlet UITableView *shopsList;
@property (unsafe_unretained, nonatomic) IBOutlet UITableView *productsList;

[ ... ] 
```

如果我有一个`shop`和一个`product` `NSManagedObject`。

我怎样才能适应`- (NSFetchedResultsController *)fetchedResultsController`这两个工作`UITableView`？

我可能需要`NSFetchedResultsController`，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:36:39.970

首先在应用委托中分配 viewController 的 managedObjectContext 。

```
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (strong, nonatomic) NSFetchedResultsController *productsListFetchedResultsController;
@property (strong, nonatomic) NSFetchedResultsController *shopsListFetchedResultsController; 
```

在您的数据模型中创建 2 个实体，并根据需要在 appdelegate 中填充一些可用数据。

在 viewWillAppear 中，您将 2 个实体获取到 2 个 NSFetchedResultsController，只需在实用程序面板中拖动基本的 fetchResult 块代码并将上下文更改为 self.manageObjectContext，实体名称为关联名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:02:24.647

解决方案是使用两个`NSFetchedResultsController`. 我的一个应用程序中有类似的设置。

我建议将获取的结果控制器定义为`@property`视图控制器的 s。

*重要提示*：不要忘记检查在您的 FRC 委托回调中调用了哪个控制器，例如`controller:didChangeObject:...`.

# windows-phone-7 - Windows Phone 8 推送通知

> ID：14475659
> 
> 赞同：1
> 
> 时间：2013-01-23T08:53:06.917
> 
> 标签：windows-phone-7, windows-runtime, push-notification, windows-phone-8, mpns

Windows Store 8 App 的 PUSH Notification 结构不同于 Windows Phone 8 应用程序（在注册、身份验证等方面），至少这是我从以下两个链接中收集到的。

1.  [视窗商店](http://msdn.microsoft.com/en-us/library/windows/apps/hh913756.aspx)。
2.  [视窗电话 8。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558%28v=vs.105%29.aspx)

    我决定从此[链接](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202967%28v=vs.105%29.aspx)运行示例。我下载了它，运行它并等待 URI 返回，但没有任何反应。完全没有反应。我正在使用 Visual Studio 2012。

    1.  我在这里犯了什么错误？
    2.  为什么 Windows Store 8 应用程序和 Windows Phone 8 PUSH 通知服务有不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:00:38.240

我不确定您在问题 1 中问的是什么。

总体而言，Win8 和 WP8 推送通知是不同的，因为它们最终在操作系统本身上支持不同的 UX。Win8 和 WP8 需要不同的数据来支持它们的磁贴、toast 通知和原始通道。因此，您需要不同的消息格式来支持每个平台。因此，WP8 上的 MPNS（Microsoft 推送通知服务）和 Win8 上的 WPNS（Windows 推送通知服务）的服务是分开的。

# c# - Windows 8 商店应用程序读取智能卡

> ID：14475662
> 
> 赞同：1
> 
> 时间：2013-01-23T08:53:19.450
> 
> 标签：c#, windows-8, windows-store-apps, windows-rt

> **可能重复：**
> [使用 Windows 8 / WinRT 的 Metro 应用程序中的 PInvoke](https://stackoverflow.com/questions/8881335/pinvoke-in-metro-apps-with-windows-8-winrt)

是否可以在 Windows 8 和 Windows 8 RT 中使用 pinvoke.net？

像`[DllImport(" winscard.dll ")]`什么？

我知道 Windows 桌面应用程序可以做到这一点，但 Windows 8 商店应用程序怎么样，尤其是 Windows RT？

# python - Linux - 用 Python 模拟鼠标点击

> ID：14475666
> 
> 赞同：3
> 
> 时间：2013-01-23T08:53:32.310
> 
> 标签：python, linux, mouse

我想在 Linux 系统（Ubuntu）中模拟 Python 中的鼠标点击（如果可能的话，还有键盘输入），所以我能够为外部程序创建一个宏。

我进行了一些研究，发现了这样的问题[，](https://stackoverflow.com/questions/1181464/controlling-mouse-with-python)它们使用 win32api 或 ctypes 来完成这项工作。但是由于我在 Ubuntu 中工作，所以这些不适合我。

我还发现[了 Xaut](http://sourceforge.net/projects/xautomation/)（以前的 Xautomation），据说它可以模拟 Linux 系统上的鼠标和键盘交互。但是它对我来说很难安装，而且无论如何它都缺少文档和示例。

我真的很喜欢 win32api 解决方案，它非常简单。Linux没有类似的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:02:47.233

与 Windows 不同，Linux 在设计上是一个安全系统，因此注入/拦截用户事件并不简单 :-)

但是有一些工具可以在 Linux 上做同样的事情（至少当他们有 xauth 凭证时，所以不会窥探/破解同一台计算机上的其他用户）。试试[xdotool](http://www.semicomplete.com/projects/xdotool/xdotool.xhtml)，它提供了广泛的命令来查找和选择窗口，然后向它们发送事件。

xdotool 适用于大多数 Linux 发行版（[基于 debian 和 rpm](http://rpm.pbone.net/index.php3?stat=3&limit=1&srodzaj=3&dl=40&search=xdotool)）。

注意：出于安全原因，X11 中的合成事件设置了一个标志，某些软件会忽略所有带有此标志的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-13T14:50:46.197

你可以使用这个：

```
import pyautogui 
x= #x position
y= #y position
pyautogui.click(x,y) 
```

要安装 pyautogui，请访问官方安装页面文档：[https ://pyautogui.readthedocs.io/en/latest/install.html](https://pyautogui.readthedocs.io/en/latest/install.html)

要自动编写文本，请使用：

```
import pyautogui
pyautogui.write('write this example') 
```

# sql - 如何使用 pl/sql 查找连续序列

> ID：14475667
> 
> 赞同：2
> 
> 时间：2013-01-23T08:53:36.160
> 
> 标签：sql, oracle10g

我是一名 pl/sql 程序员，在寻找同一日期的系列连续性时遇到问题，假设我有类似的系列

1000,1001, 1002,1003, 1004,1005, 1016,1017, 1018,1019, 1020,1021, 1035,1036, 1037,1038, 1039,1040

我正在寻找输出

```
from_series ------------- to_series
      1000 ------------- 1005
      1016 ------------- 1021
      1035 ------------- 1040   

```

我确实尝试过，但我面临的问题是以防万一

```
SELECT *
FROM  retort_t r
where NOT EXISTS
        (
        SELECT  'X'
        FROM    retort_t
        r.series_NO-ISSUE_NO=1 );

SELECT *
FROM  retort_t r
where NOT EXISTS
        (
        SELECT  'X'
        FROM    retort_t
        ISSUE_NO=r.series_NO+1 ); 
```

我通过将上述两个查询对齐来获得结果。很少的记录没关系，但我的记录在 lac 中，从加入这两个查询中获取数据需要很长时间。

请让我以适当的方式以正确的间隔整理数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:39:42.510

假设一个简单的表结构如：

```
CREATE TABLE T (x INT);
INSERT INTO T (x) VALUES 
    (1000), (1001), (1002), (1003), 
    (1004), (1005), (1016), (1017), 
    (1018), (1019), (1020), (1021), 
    (1035), (1036), (1037), (1038), 
    (1039), (1040); 
```

您可以使用 ROW_NUMBER() 获取序列号的静态值，然后可以按此值分组以获取范围内的最小值和最大值：

```
SELECT  MIN(x) AS RangeStart, MAX(x) AS RangeEnd
FROM    (   SELECT  X,
                    X - ROW_NUMBER() OVER(ORDER BY x) AS GroupBy
            FROM    T
        ) t
GROUP BY GroupBy; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!1/7686d/2)**

# c# - 如何减少 WCF 肥皂消息大小以节省带宽？

> ID：14475670
> 
> 赞同：1
> 
> 时间：2013-01-23T08:53:45.100
> 
> 标签：c#, wcf, service, bandwidth

我编写了一个`MessageSizeInspector`类来检查服务从客户端接收到的消息的大小。这是它的样子：

```
//the actual implementation logs more!
//but in this question, my only concerns is request.ToString()
public sealed class MessageSizeInspector : 
            BehaviorExtensionElement,   //to enable it to be used in config
            IDispatchMessageInspector,  //service-side inspector
            IEndpointBehavior           //so we can apply it on endpoint
{
   if (request != null )
   {
      Logger.Verbose("Message = {0}\n", request.ToString()));
   }       
   //more  
} 
```

它记录这种格式的消息：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <To s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://localhost:8961/EngineService</To>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IEngineService/GetMousePatternID</Action>
  </s:Header>
  <s:Body>
    <GetMousePatternID xmlns="http://tempuri.org/">
      <args>
        <accelerator xmlns="http://schemas.datacontract.org/2004/07/Runaware.Insight.EngineService" />
        <accessKey xmlns="http://schemas.datacontract.org/2004/07/Runaware.Insight.EngineService" />
        <controlId xmlns="http://schemas.datacontract.org/2004/07/Runaware.Insight.EngineService">66222</controlId>

        <!--- deleted the rest to avoid verbosity -->

      </args>
    </GetMousePatternID>
  </s:Body>
</s:Envelope> 
```

如您所见，实际消息*很小*，但 XML 元素和名称空间使它变得*太大*。特别是命名空间与实际消息相比太大了。

我的问题是：我们怎样才能减少*肥皂*信息的大小？由于`xmlns`所有元素都相同，WCF 可以对此进行优化，但事实并非如此。我们可以让它使用我们选择的更短的命名空间吗？很少有诸如`accelerator`and之类的元素`accessKey`甚至没有任何价值（您可以通过向右滚动看到），但它们仍然存在！我们可以让 WCF 忽略它们并`null`在服务端假设它们的值（或默认值）吗？

简而言之，我们可以做些什么来节省带宽？

我假设上面的消息来自客户端，格式完全相同，具有相同的 XML 元素和命名空间。

服务器是用 C# 和 WCF 编写的，客户端是使用[Windows Web 服务 API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd430435%28v=vs.85%29.aspx)用 C++ 编写的。服务和客户端都是我写的。所以我可以完全控制它们。如果需要，我可以更改它以节省带宽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-12T02:22:05.750

除了其他人已经说过的答案（例如：WCF 压缩）......

尝试在 DataContracts、DataMembers 以及 ServiceContracts 上设置名称和命名空间。

例子：

```
 [DataContract(Name = "a", Namespace = "")]
 class Person
 {
     [DataMember(Name = "a")]
     public string FullName;
     [DataMember(Name = "b)]
     public int Age;
 } 
```

这将使 Person 在命名空间“”中被称为“a”，而属性 FullName 被称为“a”，从而使 XML 更短，例如：

> ```
> <a> -- Represents the Person class
>     <a>Name of the person</a> -- Represents the FullName property
>     <b>38</b>
> </a> 
> ```

属性和类必须具有与 DataContract 和 DataMembers 不同的“短”名称。

参考：[https ://bkiener.wordpress.com/2010/05/04/optimize-data-contracts-for-better-wcf-performance/](https://bkiener.wordpress.com/2010/05/04/optimize-data-contracts-for-better-wcf-performance/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:01:07.033

嗯，我的第一种方法是使用[WCF Compression](http://code.msdn.microsoft.com/WCF-Compression-Example-9ffab49c)。我只能给你链接，因为我没有这方面的经验。但我认为，这将是一个很好的改进。

问题是，你对客户有影响吗？因为它的配置也必须被编辑。

编辑：您的评论之一回答了问题。:o)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:01:26.630

欢迎使用 SOAP 和许多人遇到的无知问题。XML 很好，SOAP 也很好，但是有一个基于文本的表达系统的开销。带宽冲击很大，尤其是对于小消息。

您可以做的不多 - 在 IIS 中进行外部压缩，然后删除 soap / xml 并使用 JSON 访问 web api。web servviec/soap 标准是相当 - 嗯 - 明确和标准。绕过它（放弃要求，使用其他东西）是真正处理它的唯一方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T08:59:54.647

既然您可以完全控制一切，为什么不改用[WebAPI](http://www.asp.net/web-api)呢？

在做出最终决定之前先看看这个问题：[Do I need WCF if I can use ASP.net Web API](https://stackoverflow.com/questions/13532967/do-i-need-wcf-if-i-can-use-asp-net-web-api)

# java - jdbc mysql与jasper服务器连接出错

> ID：14475671
> 
> 赞同：0
> 
> 时间：2013-01-23T08:53:54.537
> 
> 标签：java, mysql, jasperserver

我正在使用碧玉服务器 CP 5.0.0。我已经像这样配置了数据源属性

设置数据源类型和属性

```
Driver (required):com.mysql.jdbc.Driver
URL (required):jdbc:mysql://localhost:3306/jasperserver 
```

单击*测试连接时连接失败*

当我运行报告时出现**错误**

```
Error Message

com.jaspersoft.jasperserver.api.JSExceptionWrapper: com.mysql.jdbc.Driver

Error Message
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

Error Trace

java.lang.ClassNotFoundException: com.mysql.jdbc.Driver at 
```

我一直在寻找这个很长时间没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:12:26.103

您应该添加`mysql drivers jar file`到`build path`您的项目中。

# ios - iOS - uitabbarcontroller 之前的登录视图

> ID：14475673
> 
> 赞同：1
> 
> 时间：2013-01-23T08:54:03.480
> 
> 标签：ios, uitabbar, mpmovieplayer

我想`UITabBar`在登录成功时显示界面。`UITabBar`我在中声明了接口`AppDelegate`，但是登录成功后我不知道如何调用接口。

这是我的代码：

appdelegate.m

```
 -(void)loadInterface
{
    [self configureiPhoneTabBar];
}

    -(void)configureiPhoneTabBar
    {
        UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
        UIViewController *controller1 = [[tabBarController viewControllers] objectAtIndex:0];
        [self configureTabBarItemWithImageName:@"home_ON.png" : @"home.png" andText:@"Trang chủ" forViewController:controller1];

        UIViewController *controller2 = [[tabBarController viewControllers] objectAtIndex:1];
        [self configureTabBarItemWithImageName:@"channel_ON.png" : @"tvChannel.png" andText:@"Kênh" forViewController:controller2];
    } 
```

和`loginviewcontroller.m`

```
- (IBAction)btnLogin:(id)sender {
    [self performSegueWithIdentifier:@"idenLogin" sender:self];
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [delegate loadInterface];
} 
```

其次，当您触摸“播放”按钮时，布局视频显示并且可以正常工作，但我想自动旋转

注意：这是iphone上的界面，我在摘要中修复了肖像，我仍然显示风景，怎么办？

你能下载[我的代码演示吗？](http://www.mediafire.com/?z2aqnd08tz9lbj8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:15:57.003

我在我的 AppDelegate 中创建了一个名为 WindowState 或类似的对象，该对象管理应该是窗口的 rootViewController。最初它将是登录或启动，然后您可以在 WindowState 类中运行检查并侦听通知，例如。MyAppDidSignInNotification 然后将您的应用程序的 rootViewController 更改为 UITabBarController 或其他任何内容。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  self.windowState = [[FASWindowState alloc] initWithWindow:self.window];
  [self.window makeKeyAndVisible];

  return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:07:09.533

简而言之，您需要登录屏幕的模式视图。

这是我的做法（来自应用程序委托类）。请注意，我在故事板中设计了我的登录视图。

```
- (void) showLoginView
{
        assert(loginController == nil);
        assert(activityView == nil);

        UITabBarController *tabbar = (UITabBarController *)self.window.rootViewController;
        loginController = [tabbar.storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
        loginController.delegate = self;
        [tabbar presentModalViewController:loginController animated:YES];
} 
```

# android - 如何在android中使用PackageManager构造包URI

> ID：14475678
> 
> 赞同：4
> 
> 时间：2013-01-23T08:54:17.290
> 
> 标签：android, android-package-managers

我需要构造 PackageUri 以便使用 action.delete 卸载包。我使用 PackageMananger 获得了 PackageInfo 对象。有没有办法使用 PackageInfo 构造 PackageUri？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:04:06.110

我明白了，假设我们有 PackageInfo pinfo

```
String pkg= "package:"+ pinfo.packageName;
Uri pkg_uri= Uri.parse(pkg); 
```

现在我们有包 uri，要卸载

```
Intent intent = new Intent(Intent.ACTION_DELETE, pkg_uri);
startActivity(intent); 
```

# oracle - 触发器中新行上的 Lob 定位器

> ID：14475694
> 
> 赞同：2
> 
> 时间：2013-01-23T08:55:51.600
> 
> 标签：oracle, plsql, triggers, blob

我正在尝试创建一个触发器，它将表中的 blob 复制到 table`B`中新创建的行中`A`。`ORA-22275`但是，当应该执行触发器时，我收到错误（指定的 lob 定位器无效）。我可以想象我访问新行的 blob 的方式不是正确的方式，有人能指出我正确的方向吗？

触发器代码：

```
CREATE OR REPLACE TRIGGER COPY_BLOB
BEFORE INSERT ON TABLE_A
FOR EACH ROW
DECLARE
  src blob;
BEGIN
     SELECT bytes INTO src FROM table_b WHERE id = :new.ref_id; 
     DBMS_LOB.COPY(:new.bytes, src, DBMS_LOB.GETLENGTH(src), 1, 1);
END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:26:39.437

你的触发器应该是：

```
SELECT bytes 
  INTO :new.bytes 
  FROM table_b 
 WHERE id = :new.ref_id; 
```

根本不需要使用 DBMS_LOB 包。

# c++ - C++ 性能从磁盘写入和读取

> ID：14475696
> 
> 赞同：4
> 
> 时间：2013-01-23T08:56:10.367
> 
> 标签：c++, performance

> **可能重复：**
> [用 C++ 快速编写二进制文件](https://stackoverflow.com/questions/11563963/writing-a-binary-file-in-c-very-fast)

我在内存中有大量无符号 32 位整数（15 亿个条目）。我需要将它们写入文件并将它们读回主内存。

现在，我使用：

```
ofstream ofs;
ofs.open(filename);
for (uint64_t i = 0 ; i < 1470000000 ; i++)
ofs << integers << " " ; 
```

和

```
ifstream ifs;
ifs.open(filename);
for (uint64_t i = 0 ; i < 1470000000 ; i++)
ifs >> integers ; 
```

这需要几分钟来执行。任何人都可以帮助我，是否有任何图书馆方法可以更快地做到这一点？或任何建议，以便我可以进行性能测试？任何人都可以向我展示一些`mmap`用于执行上述操作的简单 C++ 代码（在 Linux 上）吗？

编辑：示例案例

```
#include<iostream>
#include <stdint.h>
#include <cstdio>
#include <cstdlib>
#include <sstream>

using namespace std;

main()
{
      uint32_t* ele = new uint32_t [100] ;
      for(int i = 0; i < 100 ; i++ )
      ele[i] = i ;

      for(int i = 0; i < 100 ; i++ ){
          if(ele[i] < 20)
          continue ;
          else
          // write  ele[i] to file
          ;   
      }

 for(int i = 0; i < 100 ; i++ ){
          if(ele[i] < 20)
          continue ;
          else
          // read  number from file
          // ele[i] = number * 10 ;
          ;   
      }

     std::cin.get();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:13:10.863

首先要做的是确定时间的去向。格式化和解析文本并非易事，可能需要一些时间，但考虑到文件的大小，实际的写入和读取也是如此。第二件事是确定数据必须有多“可移植”：最快的解决方案几乎可以肯定是 `mmap`（或其 Windows 等效项）将数组直接写入文件，而不是读取或写入。然而，这并没有提供可移植的表示，甚至升级编译器也可能使数据不可读。（对于今天的 32 位整数不太可能，但它在过去发生过）。

一般来说，如果时间是要阅读和写作，你会想用`mmap`. 如果要进行格式化和解析，您将需要研究某种二进制格式——如果它使生成的文件更小，这也有助于读写。最简单的二进制格式，使用普通网络标准写入值，只需要：

```
void
writeInt( std::ostream& dest, int32_t integer )
{
    dest.put( (integer >> 24) & 0xFF );
    dest.put( (integer >> 16) & 0xFF );
    dest.put( (integer >>  8) & 0xFF );
    dest.put( (integer      ) & 0xFF );
}

int32_t
readInt( std::istream& source )
{
    int32_t results = 0;
    results  = source.get() << 24;
    results |= source.get() << 16;
    results |= source.get() <<  8;
    results |= source.get();
    return results;
} 
```

（显然需要添加一些错误检查。）

如果许多整数实际上很小，您可以尝试一些可变长度编码，例如 Google Protocol Buffers 中使用的编码。如果您的大多数整数都在 -64...63 范围内，这可能会导致文件只有四分之一大小（这同样会缩短读写所需的时间）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:14:44.727

如果您知道大小，只需 fwrite/fread 一个数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T09:18:59.117

通过为输入和输出流使用更大的缓冲区，您可能会获得更好的性能：

```
ofstream ofs;
char * obuffer = new char[bufferSize];
ofs.rdbuf ()->pubsetbuf (obuffer, bufferSize);
ofs.open (filename);

ifstream ifs;
char * ibuffer = new char[bufferSize];
ifs.rdbuf ()->pubsetbuf (ibuffer, bufferSize);
ifs.open (filename); 
```

解析整数也是`ifs >> integers ;`相当慢的方法。尝试读取行，然后使用`std::strtol()`来解析它们。IME，它明显更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:24:12.557

如果您只想复制，可以使用它来获得更好的性能：

```
std::ifstream  input("input");
std::ofstream  output("ouptut");
output << input.rdbuf(); 
```

或者设置缓冲区大小可能会提高速度：

```
char cbuf[buf_size];
ifstream fin;
fin.rdbuf()->pubsetbuf(cbuf,buf_size); 
```

我在回答中没有考虑 long int 问题，因为我根本不知道它们为什么会影响流性能，但我希望它无论如何都会有所帮助。

# workflow-foundation-4 - 如何从 ac# 代码调用工作流

> ID：14475697
> 
> 赞同：-1
> 
> 时间：2013-01-23T08:56:18.900
> 
> 标签：workflow-foundation-4

我有一个 WF Written 我想调用工作流并从 WF 中取回结果我在工作流中有输入和输出参数，但我想知道如何从我的 C# 按钮单击事件中调用工作流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:19:48.543

您需要成为WF“主持人”；更具体地说，您使用 WorkflowInvoker 或 WorkflowApplication：http: [//msdn.microsoft.com/en-us/library/dd489463.aspx](http://msdn.microsoft.com/en-us/library/dd489463.aspx)

特别是，如果您需要从工作流中获取输出值，您可以使用“Completed”事件：

```
wfApp.Completed = 委托（WorkflowApplicationCompletedEventArgs e）
{
    val 值 = e.Outputs["MyValue"];
    Console.WriteLine("值为 {0}", value);
};

```

# java - 我可以强制正在运行的 Java 应用程序从控制台进行垃圾收集吗

> ID：14475698
> 
> 赞同：0
> 
> 时间：2013-01-23T08:56:21.403
> 
> 标签：java, garbage-collection

我可以强制正在运行的 Java 应用程序从控制台进行垃圾收集吗？

只是为了抢占一些回复：

*   我知道我可以用 JVisualVM 做到这一点，但我只有控制台访问权限，没有 X-Windows 访问权限
*   我知道 System.gc() 只请求垃圾收集它不会强制它，但这似乎是 3\. 工作，所以我正在寻找一种外部调用的方法。
*   我知道你不应该对正在运行的应用程序进行垃圾收集，我这样做是作为检查潜在内存泄漏过程的一部分。
*   该应用程序正在生产中运行我无法修改其环境，jvm 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:59:53.383

JVisualVM 可以连接到远程进程，如果

*   相关端口开放
*   java 进程以正确的参数启动以允许远程连接

因此，您无需在同一台机器上的 xWindows 环境中实现魔法……

传递给 java 的示例或参数

```
-Dcom.sun.management.jmxremote.port=9005\   
-Dcom.sun.management.jmxremote.authenticate=false\ 
-Dcom.sun.management.jmxremote.ssl=false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:36:27.437

创建一个仅执行 System.gc() 的简单 Java 代理。使用它的 pid 附加到目标 JVM 并运行它。从这里开始： http: [//docs.oracle.com/javase/6/docs/jdk/api/attach/spec/com/sun/tools/attach/VirtualMachine.html](http://docs.oracle.com/javase/6/docs/jdk/api/attach/spec/com/sun/tools/attach/VirtualMachine.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T11:55:50.187

实际上JDK中的jmap工具会触发full GC。试试 jmap histo

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T08:59:22.573

不。您不能强制垃圾收集器执行垃圾收集。使用 System.gc() 只能请求垃圾收集器执行垃圾收集。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T09:30:51.420

考虑使用 Oracle JRockit JVM 运行您的程序。在那里，您可以使用 JRCMD 并发出 JVM 级别的管理命令/监控，包括强制 GC。没错，（在 JRockit 和其他地方）， System.gc()*不一定*做*任何事情*！

# html - 样式化 HTML 时事通讯

> ID：14475702
> 
> 赞同：0
> 
> 时间：2013-01-23T08:56:40.990
> 
> 标签：html, css, newsletter

HTML 时事通讯。有时看起来很漂亮，但目前它对我来说更像是一场编码噩梦。我习惯于将 html 和 css 分开，但是在编写 HTML 时事通讯时，这并不是一个真正的选择（或者是吗？）

那么样式化 html 时事通讯的最佳实践是什么？`<style>`将所有css放在代码顶部的单个标签中？使用 style 属性为每个元素单独设置样式？或者弄乱足够的表格宽度以使其看起来正确？也许一切都有点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:02:21.763

电子邮件设计和开发这是最糟糕的事情之一。主要是因为不同客户端的渲染和解析方法不同。Gmail、Yahoo、Outlook 都有自己的“发言权”。您必须组合设置的样式，`<style>`但还要放置一些内联样式，例如表格宽度或单元格。

在您学会使用什么以及如何使用之前，您需要花费很多时间，这需要数十封电子邮件。

我可以建议的一件事是使用自动化工具来检查您的电子邮件，例如[Litmus](http://litmus.com/)。

此外，请阅读特定电子邮件客户端不喜欢哪些标签或样式。为此，我会推荐[CampaignMonitor](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:03:25.993

对于 HTML 时事通讯，请将您的 css 保持为内联并使用“TABLES”，一些电子邮件客户端不支持 DIV'S，例如 MS Outlook..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:08:01.650

它们是编码的噩梦。避免使用 style-Tag（一些 Webmail 客户端无论如何都会把它们去掉），轻松使用内联样式（并非所有邮件客户端都适用 - 最好将自己限制在一些基本的错字上），避免使用背景图像（因为它们不起作用始终如一，有时根本不使用），使用大量嵌套表格（但尽量不要切碎图像以将部件放置在相邻的表格单元格中，因为某些邮件客户端可能会在表格单元格之间引入间隙），最重要的是，测试您的模板每个主要的邮件客户端（在浏览器中将它们作为 HTML 页面进行测试几乎毫无用处，因为许多邮件客户端在显示代码之前都会对其进行更改）。并使用与发送真实时事通讯完全相同的程序对其进行测试，因为某些程序会在发送时引入代码更改。

The best suggestions I can make from painful experience are a) keep it simple, b) buy a tested newsletter template and adapt it carefully to your needs and c) don't send HTML newsletters.

# c - 变量值的莫名变化

> ID：14475703
> 
> 赞同：0
> 
> 时间：2013-01-23T08:56:40.973
> 
> 标签：c

我正面临变量值的莫名其妙的变化。现在我对C语言不是很熟悉，大部分代码我是一只手在键盘上写的，另一只手在K&R中跟踪一个页面，所以请温柔一点。

我在 Visual Studio 2010 中有一个 C 项目，它是 pupnp 库的 Lua 绑定。这是一些相关的代码；

文件：luaUPnPdefinitions.h（摘录）

```
#ifndef LuaUPnPdefinitions_h
#define LuaUPnPdefinitions_h
...
// tracker for library being started or not
volatile static int UPnPStarted;
...
#endif  /* LuaUPnPdefinitions_h */ 
```

文件：LuaUPnP.h（完整文件）

```
#ifndef LuaUPnP_h
#define LuaUPnP_h

#include "upnp.h"
#include "upnptools.h"
#include "uuid.h"
#include <lua.h>
#include <lauxlib.h>
#include "luaIXML.h"
#include "darksidesync_aux.h"
#include "luaUPnPdefinitions.h"
#include "luaUPnPsupport.h"
#include "luaUPnPcallback.h"

#endif  /* LuaUPnP_h */ 
```

文件：LuaUPnP.c（摘录）

```
#include "luaUPnP.h"  // only include in this file
...
static int L_UpnpSendAdvertisement(lua_State *L)
{
    int result = UpnpSendAdvertisement(checkdevice(L, 1), luaL_checkint(L,2));
    if (result != UPNP_E_SUCCESS) return pushUPnPerror(L, result, NULL);
    lua_pushinteger(L, 1);
    return 1;
}
... 
```

文件：LuaUPnPsupport.h（摘录）

```
#ifndef LuaUPnPsupport_h
#define LuaUPnPsupport_h

//#include <ixml.h>
#include <lua.h>
#include <lauxlib.h>
#include "luaIXML.h"
#include "upnptools.h"
#include "luaUPnPdefinitions.h"
...
UpnpDevice_Handle checkdevice(lua_State *L, int idx);
...
#endif  /* LuaUPnPsupport_h */ 
```

文件：LuaUPnPsupport.c（摘录）

```
#include "luaUPnPsupport.h"  // only include in this file
...
UpnpDevice_Handle checkdevice(lua_State *L, int idx)
{
    pLuaDevice dev;
    luaL_checkudata(L, idx, LPNP_DEVICE_MT);
    if (! UPnPStarted) luaL_error(L, UpnpGetErrorMessage(UPNP_E_FINISH));
    dev = (pLuaDevice)lua_touserdata(L, idx);
    return dev->device;
} 
```

现在解决问题；`UPnPstarted`静态变量基本上跟踪 pupnp 库后台进程是否已启动。`L_UpnpSendAdvertisement`现在当在某个点（可重现）调试函数时，然后`UPnPstarted == 1`，但是当我点击这条线时；

```
int result = UpnpSendAdvertisement(checkdevice(L, 1), luaL_checkint(L,2)); 
```

并进入它，调试器跳转到`checkdevice`函数（在文件 LuaUPnPsupport.c 中），并且值`UPnPstarted`立即更改为`UPnPstarted == 0`.

我迷路了。它是一个静态变量，所以应该共享，为什么它会改变值，只是通过进入另一个函数？在调试器中，监视窗口中的值以红色点亮，表示它们刚刚更改。最初我认为文件包含在错误的顺序中，并且`UPnPstarted`变量被重复（或有 2 个实例），但是在向监视窗口添加监视时；`&UPnPstarted`为了跟踪变量的内存位置，当我进入函数时没有看到变化，所以在我看来它指的是相同的内存位置。

我只是不明白。关于正在发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:01:22.527

将变量标记为`static`并不意味着将在翻译单元之间共享一个实例（本质上是一个`.c`源文件加上它提取的所有标题）。每个翻译直到都有自己的定义，`UPnPStarted`因为每个`.c`文件都包含定义的头文件`UPnPStarted`。

这意味着当`UpnpSendAdvertisement()`第一次调用该函数时，它正在访问它自己的版本`UPnPStarted`，该版本没有被修改，并且将具有其初始的、未更改的值`0`。

要跨翻译单元共享相同的变量，请使用`extern`at 声明并提供一个定义：

```
/* In the header file. */
extern volatile int UPnPStarted; 
```

然后在一个，而且只有一个`.c`文件中：

```
volatile int UPnPStarted; 
```

# c++ - 使用 boost asio 进行内存管理

> ID：14475712
> 
> 赞同：0
> 
> 时间：2013-01-23T08:57:09.460
> 
> 标签：c++, memory-management, boost, c++11, boost-asio

我经常发现我的 asio 事件队列如下：

```
handler_that_destroys_object()
handler_that_acts_on_object() 
```

我目前通过将对象存储在共享指针中并在 handler_that_acts_on_object() 中使用指向该对象的弱指针来解决此问题。

我不喜欢这样，因为它迫使我在我不想使用的地方使用共享指针。

有没有更好的方法来绕过强制对象所有者的共享指针？

例如，对对象本身内的对象使用某种共享计数，这样就不会强制对象的分配器使用共享指针。

我想要的似乎像weak_ptr和shared_from_this，对象的存在作为隐式引用计数。

# 更新

这似乎也可以按我的意愿工作（这可能不是一个好方法，但只是为了解释我想要什么）

```
#include <boost/shared_ptr.hpp>
#include <boost/weak_ptr.hpp>
#include <boost/noncopyable.hpp>

struct SelfCounting
    : boost::shared_ptr<SelfCounting>
//  , boost::noncopyable<SelfCounting> /* Does not work */
{
    int d;
};

BOOST_AUTO_TEST_CASE(SelfCounting_automatic) {
    boost::weak_ptr<SelfCounting> p;
    {
        SelfCounting t;
        p = boost::shared_ptr<SelfCounting>(t);
    }
    BOOST_CHECK(!p.lock());
}

BOOST_AUTO_TEST_CASE(SelfCounting_boost_sp) {
    boost::weak_ptr<SelfCounting> p;
    {
        boost::shared_ptr<SelfCounting> t(new SelfCounting());
        p = boost::shared_ptr<SelfCounting>(t);
    }
    BOOST_CHECK(!p.lock());
} 
```

它运行时没有受到 valgrind 的任何抱怨，尽管它可能存在问题。

# jquery - $ 未定义，jQuery 未定义，AJS.$ 未定义

> ID：14475718
> 
> 赞同：1
> 
> 时间：2013-01-23T08:57:22.877
> 
> 标签：jquery, jira-plugin

我正在尝试编写一个 jira 小工具。除此之外，我正在使用第三方 jqplot 脚本。我得到 $ 是未定义的，因为一切都是那些脚本。在此处查看包含并加载到我的页面中的库：

```
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/basic.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/dropdown.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/icons.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/tables.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/forms.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/messages.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/firebug.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/dialog.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/inline-dialog.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/tabs.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/toolbar.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/ajax.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/common.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/common.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/icons.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/gadgets-common.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/5.0.7/_/download/resources/com.atlassian.jira.gadgets:common-lite/base.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/5.0.7/_/download/resources/com.atlassian.jira.gadgets:common-lite/common.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:inline-layer/layer.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:autocomplete/autocomplete.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/5.0.7/_/download/resources/com.atlassian.jira.gadgets:autocomplete/layer.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0-SNAPSHOT/_/download/resources/com.teradata.jira.gadgets.defectgadget:defectgadget-resources/defectgadget.css" media="all" rel="stylesheet" type="text/css">
<link href="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0-SNAPSHOT/_/download/resources/com.teradata.jira.gadgets.defectgadget:defectgadget-resources/jqplot.css" media="all" rel="stylesheet" type="text/css">
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:jquery-lib/jquery.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:jquery-compatibility/jquery-compatibility.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:aui-core/atlassian.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/jquery.aop.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs-gadgets-base/dropdown.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/raphael.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/raphael.shadow.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.os.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery-ui.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery-ui-1.7-bug-fixes.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.form.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.hotkeys.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.moveto.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/context-path.cp.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/event.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/cookie.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/dialog.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/icons.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/inline-dialog.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/firebug.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/forms.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/messages.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/tabs.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/template.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/whenitype.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/toolbar.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.autocomplete.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.is-dirty.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.progressbar.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.selection.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.5.5/_/download/resources/com.atlassian.auiplugin:ajs/jquery.throbber.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:templates/soyutils.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:templates/error.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:templates/warning.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:templates/info.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:util/namespace.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:util/util.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:util/sysMsg.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/mockXHR.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/makeRequestToJQueryAjaxCallbackTransformer.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/mapToMakeRequestOptions.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/OAuth.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/trustedApps.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/anonymous.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/jQuery.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/ajax.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajax/events.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/templater.namespace.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadgets.templater.base.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadgets.templater.custom.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadgets.templater.form.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadgets.templater.table.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/form.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/table.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/events.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/gadgets.namespace.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadget.base.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadget.standard.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadget.configured.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadget.configurable.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/ajs.gadget.factory.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets/gadget-common-fields.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/templater.namespace.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadgets.templater.base.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadgets.templater.custom.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadgets.templater.form.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadgets.templater.table.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/form.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/table.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/events.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/gadgets.namespace.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadget.base.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadget.standard.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadget.configured.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadget.configurable.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/ajs.gadget.factory.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/3.1.21/_/download/resources/com.atlassian.gadgets.publisher:ajs-gadgets-lite/gadget-common-fields.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/describeBrowser.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/copyObject.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/util.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/trace.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/meta.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/Class.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/Control.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/Descriptor.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/Keyboard.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/Mouse.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/getOptionsFromAttributes.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/SmartAjax.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/LayerManager.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util-lite/hasFixedParent.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/5.0.7/_/download/resources/com.atlassian.jira.gadgets:common-lite/gadget-common.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/5.0.7/_/download/resources/com.atlassian.jira.gadgets:common-lite/gadget-common-fields.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:browser-properties/Navigator.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/observer.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/aui-experimental.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/getDocHeight.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/os.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/JSONiefix.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/version.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/JSON.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/parseUri.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/effects.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/parseOptionsFromFieldset.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/handleAccessKeys.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/setSelectionRange.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/jquery.pjax.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/SessionStorage.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/LocalStorage.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/persistence.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/XSRF.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:util/bindDefaultCustomEvent.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:content-retrievers/ContentRetriever.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:content-retrievers/AjaxContentRetriever.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:content-retrievers/DOMContentRetriever.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:inline-layer/InlineLayer.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:inline-layer/InlineLayer.OptionsDescriptor.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:inline-layer/InlineLayer.create.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:inline-layer/InlineLayer.StandardPositioning.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:inline-layer/InlineLayer.IframePositioning.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:list/Group.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:list/ItemDescriptor.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:list/GroupDescriptor.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:list/List.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:autocomplete/JIRA.Dropdown.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:autocomplete/AutoComplete.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:autocomplete/RESTAutoComplete.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:autocomplete/IssueAutoComplete.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:autocomplete/UserAutoComplete.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0/_/download/resources/jira.webresources:autocomplete/initAutoCompleteFields.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0-SNAPSHOT/_/download/resources/com.teradata.jira.gadgets.defectgadget:defectgadget-resources/defectgadget.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0-SNAPSHOT/_/download/resources/com.teradata.jira.gadgets.defectgadget:defectgadget-resources/barRenderer.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0-SNAPSHOT/_/download/resources/com.teradata.jira.gadgets.defectgadget:defectgadget-resources/categoryAxisRenderer.js" type="text/javascript"></script>
<script src="http://localhost:2990/jira/s/en_US6c3e1m/734/3/1.0-SNAPSHOT/_/download/resources/com.teradata.jira.gadgets.defectgadget:defectgadget-resources/pointLabels.js" type="text/javascript"></script>
<script type="text/javascript">
    jQuery.noConflict();
    (function () { //myscript accessing jqplot javascript in pointLabels.js etc.
})();
</script> 
```

我错过了上面列表中 js 包含/链接的顺序吗？我想通过firebug检查脚本是否正在加载，但我是firebug的新手，你能帮我做这件事吗？上面的代码在 iframe 对象中。我能够看到来自 firebug 的代码，但无法在脚本选项卡中看到它并且无法设置断点。

正如 jira 人所建议的那样，我尝试使用 AJS.$ 而不是 $。我尝试了 jQuery 而不是 $，但没有运气。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:01:28.670

首先，您需要检查是否包含 jquery 文件。jQuery 文件应该在其他插件之前包含。

您可以在 firefox 中使用 JSViewer 插件来查看加载了哪些脚本文件。

# javascript - ext JS 登录会话

> ID：14475722
> 
> 赞同：0
> 
> 时间：2013-01-23T08:57:44.793
> 
> 标签：javascript, extjs

![在此处输入图像描述](../Images/6e1624f813e6c9c7ae76bd54ef2e8618.png)

大家好，我是 Ext JS 的新手。这是我第一次使用这些东西。我有一些问题，如何显示会话用户名。任何人都可以展示一些回调到 JS 文件的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:41:38.370

您必须使用 PHP（服务器端）而不是 javascript 来生成会话用户名

```
 Ext.create('Ext.panel.Panel', {
    title: 'Hello<?PHP echo $username;?>',
    width: 200,
    html: '------ ',
    renderTo: Ext.getBody()
}); 
```

# database - 跨不同 Linux 机器的 Db2 数据移动

> ID：14475725
> 
> 赞同：1
> 
> 时间：2013-01-23T08:57:59.037
> 
> 标签：database, db2, data-migration

我们正计划迁移到一个新服务器，并且我们已经在其上安装了 db2 9.7。

这是将所有数据从旧服务器中的数据库移动到新服务器的最佳选择。

两台服务器都有 linux 作为操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:28:20.347

对旧服务器的数据库进行**离线备份并将其****scp**到新服务器

在新服务器中，创建一个**新**数据库并使用旧服务器的备份**恢复数据库**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-24T06:42:22.660

它说 SQL1051N 路径“/data/home/db2inst1”不存在或无效。

您需要使用此服务器/机器上可用的路径/挂载点对目标服务器执行重定向还原。

# ruby-on-rails - 是否可以生成 0 到 100 作为 select_tag 的选择？

> ID：14475726
> 
> 赞同：0
> 
> 时间：2013-01-23T08:58:04.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我现在有像这段代码一样的输入字段。
但我想制作选择标签，我可以在其中选择从 0 到 100 的数字。
有没有办法轻松生成该选择标签？

```
<%= f.number_field :age %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:05:44.197

如下所示：

```
<%= f.select :age, (0..100).to_a.map{|n| [n, n]} %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:01:58.187

```
select("user[]", "age", 0..100.to_a.map{|n| [n, n]}, {}, { :index => nil }) 
```

或者

```
f.select :age, options_for_select( 0..100.to_a.map{|n| [n, n]}, @object.age ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:06:18.817

```
 <%= f.select("person", "age", [1..100], { :include_blank => true })%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:06:49.127

```
<%= f.select :age, options_for_select((0..100).to_a) %> 
```

# java - QueryBasedValueHolder 无法转换为 UnitOfWorkValueHolder JPA

> ID：14475732
> 
> 赞同：0
> 
> 时间：2013-01-23T08:58:22.843
> 
> 标签：java, jpa

我被它困住了，我试图坚持一个实体（出租车）和一个孩子（库存）。

```
public void updatePriceByType(Cab cab) { 

  try { 
    for(Inventory inventory : cab.getInventories()){
      inventory.setCab(cab); 
      em.persist(em.merge(inventory));
    } 
    em.persist(em.merge(cab)); 
  } 
  finally {
    if (null != em) { 
      em.close(); 
    } 
  } 
} 
```

获取异常如下图：

```
Caused by: javax.persistence.RollbackException: java.lang.ClassCastException: org.eclipse.persistence.internal.indirection.QueryBasedValueHolder cannot be cast to org.eclipse.persistence.internal.indirection.UnitOfWorkValueHolder
at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)
at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:512)
... 44 more
Caused by: java.lang.ClassCastException: org.eclipse.persistence.internal.indirection.QueryBasedValueHolder cannot be cast to org.eclipse.persistence.internal.indirection.UnitOfWorkValueHolder
at org.eclipse.persistence.internal.indirection.TransparentIndirectionPolicy.buildBackupClone(TransparentIndirectionPolicy.java:92)
at org.eclipse.persistence.internal.indirection.TransparentIndirectionPolicy.backupCloneAttribute(TransparentIndirectionPolicy.java:78)
at org.eclipse.persistence.mappings.ForeignReferenceMapping.buildBackupClone(ForeignReferenceMapping.java:225)
at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildBackupClone(ObjectBuilder.java:498)
at org.eclipse.persistence.descriptors.changetracking.DeferredChangeDetectionPolicy.buildBackupClone(DeferredChangeDetectionPolicy.java:219)
at org.eclipse.persistence.descriptors.changetracking.DeferredChangeDetectionPolicy.revertChanges(DeferredChangeDetectionPolicy.java:283)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.resumeUnitOfWork(UnitOfWorkImpl.java:5248)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.synchronizeAndResume(UnitOfWorkImpl.java:5197)
at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.synchronizeAndResume(RepeatableWriteUnitOfWork.java:548)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1154)
at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:35:37.863

在 merge() 的结果上调用 persist() 没有意义，因为 merge() 将持久化或更新对象。最初需要调用merge的cab对象是从哪里来的？它是在另一个 EntityManager/事务中读取的还是序列化的？

该错误不应发生，因此您可能希望在其上记录错误。确保您首先尝试最新版本。还要检查您是否没有使用属性访问，并且在您的 get/set 方法中有副作用。

# c# - 在 C# 中强制转换泛型类

> ID：14475734
> 
> 赞同：6
> 
> 时间：2013-01-23T08:58:29.197
> 
> 标签：c#, generics, casting

我在转换泛型类型时遇到问题。

例如我有课：

```
public class Dog
{
}

public class Husky : Dog
{

}

public class MyWrapper<T> where T : class
{
} 
```

然后我想做这样的事情，但我不知道怎么做

```
MyWrapper<Husky> husky = new MyWrapper<Husky>();
List<MyWrapper<Dog>> dogs= new List<MyWrapper<Dog>>();
dogs.Add(husky); // how to cast husky to MyWrapper<Dog>? 
```

编辑：改为`Animal<T>`，`MyWrapper<T>`所以这将是更充分的例子

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T09:11:55.220

您可以在 C# 4 或更高版本中使用接口的[通用协变。](http://msdn.microsoft.com/en-us/library/dd799517.aspx)为此，您需要定义一个协变接口（使用`out`）并`MyWrapper`实现该接口：

```
public class Dog 
{
}

public class Husky : Dog
{
}

public class MyWrapper<T> : IMyWrapper<T> where T : class
{
}

public interface IMyWrapper<out T> where T : class
{
} 
```

然后你可以这样做：

```
var husky = new MyWrapper<Husky>();
var dogs = new List<IMyWrapper<Dog>>();
dogs.Add(husky); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T09:03:01.010

恐怕你不能——虽然`Husky`是一个`Dog`，但`Animal<Husky>`不是一个`Animal<Dog>`。

有关类似问题，请参阅[.NET Casting Generic List 。](https://stackoverflow.com/questions/674715/net-casting-generic-list)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-23T09:03:39.117

有什么理由不按如下方式安排类继承？我不确定为什么 Animal 需要接受类型参数。

```
public abstract class Animal
{
}

public class Dog : Animal
{
}

public class Husky : Dog 
{
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-23T09:14:59.097

为此，您需要**协方差**-*向上转换泛型类型*-。

但仅支持 C# 协方差：

*   代表。
*   接口。

出于这个原因，我只找到了一个解决方案：**创建一个标记界面`IAnimal<T>`**：

```
public class Dog
{
}

public class Husky : Dog
{

}

public interface IAnimal<out T>
    where T : class
{
}

public class Animal<T> : IAnimal<T> where T : class
{
} 
```

现在这将起作用：

```
 List<IAnimal<Dog>> list = new List<IAnimal<Dog>>();
        list.Add(new Animal<Husky>()); 
```

在 MSDN 上了解有关协变和逆变的更多信息：

*   [http://msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

## 更新

无论如何...通用约束有什么意义`T : class`？你只知道这`T`是一个类，但它可能没有公共构造函数，或者它可能是一块石头而不是一条狗，谁知道呢？

或者，这个类层次结构的意义何在？正如其他人在他们的回答中指出的那样，您的层次结构不是非常面向对象的：a Dog **IS an animal** so `Dog` **DERIVES** `Animal`。

只需更改它，您就不再需要使用泛型类型参数。

也许你更喜欢组合而不是继承，但我倾向于决定这个问题的最佳选择：

*   如果我说专业类型，我可以说“B is A”吗？=>**然后我选择继承**。

*   如果我谈论专业类型，我可以说“B is part of A” =>**然后我选择 composition**。

**实际上，我相信协方差可以解决您的问题，但我觉得这是该语言功能的错误用例。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-23T09:08:25.130

not possible `Animal<Husky>` is not derived from `Animal<Dog>`.

# c# - 在应用程序设置上调用 Upgrade() 时出现 ArgumentNullException

> ID：14475735
> 
> 赞同：3
> 
> 时间：2013-01-23T08:58:35.370
> 
> 标签：c#, .net-3.5, application-settings

我有一个 Windows 服务，它使用用户范围设置并在服务启动期间使用以下代码加载它们：

```
Properties.Settings.Default.Reload();
if (Properties.Settings.Default.UpgradeRequired)
{
  Properties.Settings.Default.Upgrade();
  Properties.Settings.Default.UpgradeRequired = false;
} 
```

在一台生产机器上，该服务无法启动，我`ArgumentNullException`从该`Reload()`方法中获得了以下堆栈跟踪：

```
System.ArgumentNullException: Value cannot be null.
Parameter name: path
  at System.IO.Directory.GetParent(String path)
  at System.Configuration.LocalFileSettingsProvider.GetPreviousConfigFileName(Boolean isRoaming)
  at System.Configuration.LocalFileSettingsProvider.Upgrade(SettingsContext context, SettingsPropertyCollection properties, Boolean isRoaming)
  at System.Configuration.LocalFileSettingsProvider.Upgrade(SettingsContext context, SettingsPropertyCollection properties)
  at System.Configuration.ApplicationSettingsBase.Upgrade() 
```

没有记录该`Upgrade()`方法可能会抛出`ArgumentNullException`. 有谁知道这意味着什么和/或如何在不重建服务的情况下解决它？

# php - 移动上传的文件php不起作用

> ID：14475737
> 
> 赞同：1
> 
> 时间：2013-01-23T08:58:47.427
> 
> 标签：php, upload, imagettftext

我想移动一个使用 imagettftext 创建并保存为 png 的文件。如您所见，在下面的代码中，我使用了 move_uploaded_file 但无济于事。请帮忙。

时间

```
// Set the content-type
header('Content-Type: image/png');

// Create the image from created image
//$im = imagecreatetruecolor(180, 180);
$im = @imagecreatefromjpeg('poloroid.jpg');

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
//imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
//$text = 'John...';
$fbid = $_POST["id"]; 
$text = $_POST["want"];
$fb_email =$_POST["email"];
$fb_name=$_POST["name"];

$uploads_dir = '/uploaded_files';
// Replace path by your own font path
$font = 'verdana.ttf';

//image file name
$name ="$fbid.png";

// Add some shadow to the text
imagettftext($im, 20, 0,  25, 126, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 25, 125, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
//imagepng($im);
imagepng($im,$name,9);
move_uploaded_file($name,"$uploads_dir/$name");
imagedestroy($im); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:01:33.803

您不是在上传文件，而是在生成一个文件！

`imagepng`具有`filename`参数，因此您可以将其保存到驱动器中：

```
$uploads_dir = '/uploaded_files/';
$name = $uploads_dir.$fbid.'.png';
imagepng($im,$name,9);
imagedestroy($im); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:13:15.860

尝试使用`rename` 而不是`move_uploaded_file`

# php - 用于更改多个数据库的 PHP 脚本

> ID：14475739
> 
> 赞同：0
> 
> 时间：2013-01-23T08:58:52.433
> 
> 标签：php, database

我只是想知道我是否存在一个 php 脚本

1 - 设置一个 mysql 连接（主机、用户、密码）

2 - 直观地选择我想要更改的数据库

3 - 设置 sql 语句（来自 .sql 文件或网络表单上的文本）

4 - 在所有选定的数据库上执行指定的 sql 语句

**要解决的问题**:: 我在同一台服务器上有 +100 个具有相同结构的数据库，在每个数据库上执行一个简单的“ALTER TABLE”是一项无聊/耗时的任务，我目前使用 phpMyAdmin 手动执行此操作，但我知道存在更好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:15:41.980

我不确定可能存在哪些预制脚本，但是您正在查看一次性的东西，不是吗？为什么不直接写一个脚本？

它看起来像这样（伪代码）

```
$yourDatabases = array($database1, $databas2, ....);

foreach($yourDatabases as $database){
    connect($database);
    query("your alter table");
    close($database);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:03:49.717

我想你指的是`phpmyadmin`

# javascript - 如何使用变量名访问 Javascript 循环中嵌套对象内的元素？

> ID：14475741
> 
> 赞同：4
> 
> 时间：2013-01-23T08:58:58.897
> 
> 标签：javascript, jquery, arrays, object, nested

我一无所知。我有一个这样的 JSON 字符串，我需要检查提供的“属性”（`postsome`在以下示例中）：

```
var index_file =
[{
 "indexAB":[
    { "postsome": ["keyword_abc", "keyword_def"] },
    { "testsome": ["keyword_111", "keyword_222"] }
  ]
},{
 "index_random": [
    { "postsome": ["keyword_abc"] }
  ]
}] 
```

我有任意数量的索引（“indexAB”，“index_random”），`n`里面有对象。

我需要“找到”我的财产`postsome`，但我无法让它工作，因为我正在努力以正确的方式访问该对象。

所以：

```
for (var i = 0, l = indices.length; i < l; i += 1) {

        doc._id = "postsome",
        index_name = "indexAB";

    indices[i]["indexAB"];             // ok, returns object on correct iteration
    indices[i][index_name];            // undefined
    indices[i].indexAB[0][doc._id]     // ok, returns undefined or keywords
    indices[i][index_name][0][doc._id] // undefined 
} 
```

**问题：**
如何使用变量名访问循环中的嵌套对象`index_name`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:08:00.140

这不是您问题的直接答案，但我相信它实际上可能对您有所帮助，而不是为您提供一种访问对象中值的复杂方法。

如果不是这个 JSON 对象：

```
var index_file =
[{
 "indexAB":[
    { "postsome": ["keyword_abc", "keyword_def"] },
    { "testsome": ["keyword_111", "keyword_222"] }
  ]
},{
 "index_random": [
    { "postsome": ["keyword_abc"] }
  ]
}]; 
```

你会有这个更简单的数据结构：

```
var index_file =
{
  "indexAB": {
    "postsome": ["keyword_abc", "keyword_def"],
    "testsome": ["keyword_111", "keyword_222"]
  },
  "index_random": {
    "postsome": ["keyword_abc"]
  }
}; 
```

那么它会**更**容易访问，只需使用：

```
var value = index_file.indexAB.postsome[0]; // no loops, no nothing
//  value == "keyword_abc" 
```

见：[**演示**](http://jsbin.com/imusoz/1/edit)

我认为你应该改变的是你的数据模型，因为目前它与 JSON 的想法相去甚远，而且访问其中的数据总是非常困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:12:21.880

几个问题

*   “indexAB”只存在于数组的第一个元素上
*   变量名中不能有点。

我建议您在进一步推迟它之前测试 indexAB 是否是对象的属性。请参见下面的示例：

固定的

```
var indices = index_file;
for (var i = 0, l = indices.length; i < l; i++) {

    var doc_id = "postsome";
    var index_name = "indexAB";

    indices[i]["indexAB"];             // ok, returns object on correct iteration
    indices[i][index_name];            // undefined
    if ("indexAB" in indices[i]) {
      indices[i].indexAB[0][doc_id]     // ok, returns undefined or keywords
      indices[i][index_name][0][doc_id] // undefined 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:04:19.647

`index_name`是`undefined`因为之前的行引发了错误

`doc._id = "postname" // this causes an error`

只需使用一个简单的字符串

```
doc = "postname" 
```

# playframework-2.0 - Ebean 乐观锁定 - 版本列与所有列？

> ID：14475748
> 
> 赞同：2
> 
> 时间：2013-01-23T08:59:36.133
> 
> 标签：playframework-2.0, ebean, optimistic-locking

我看到 Ebean 支持这两种方式，但使用 @version 或所有方法之间的实际区别是什么？有什么理由不在 Ebean 的任何地方使用 @version 吗？

[http://www.avaje.org/occ.html](http://www.avaje.org/occ.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:38:51.220

如果您自己可以控制模型，我不知道有什么理由继续使用“所有列”版本。我看到的“全部”方法的优点是：

1.  这对开发人员来说更容易——根本不涉及任何编码，因此这种方法甚至适用于不知道什么是并发检查的开发人员。
2.  这是万无一失的。通过根据预期值检查每一列，您可以确保您永远不会覆盖某人的更改

另一方面，它的效率较低（检查所有列比仅检查单个列要多）。我在 Play Framework 中也遇到了级联删除问题，其中 ebean 认为数据库中的数据已更改。

我能想出的版本方案的缺点是

*   如果您有时在更新对象时忘记更新您的版本字段，那么您将不会获得这些更新的任何锁定保护。这个错误真的很难找到，因为大多数时候一切都会完美运行。
*   如果数据库中还没有版本或“上次更改”字段，则必须添加一个新列，这自然会占用一些空间和时间。

我认为这些缺点中的任何一个都不严重。如果您知道自己在做什么（并且您已经通过提出问题证明了这一点；））并且您确信自己不会忘记更新您的版本字段，那么继续吧！

# apache - Apache Daemon 尝试在 CentOS 上 Ping 但无法正常工作（SELinux 问题）

> ID：14475755
> 
> 赞同：0
> 
> 时间：2013-01-23T09:00:02.810
> 
> 标签：apache, centos, ping, selinux

我在 php 中开发了一个应用程序。它的功能之一是 ping 外部服务器。然而，当这个动作被触发时，什么也没发生。我检查了 SELinux 日志并生成了一个允许 apache 守护进程 ping 的策略（如果以 apache 用户身份登录，ping 工作正常）。安装该策略后，SELinux 日志上没有显示错误，但在 httpd 日志上出现了很多次：

```
ping: recvmsg: Permission denied 
```

我知道这是一个 SELinux 配置问题（可能是套接字连接？），因为如果我禁用它，它工作得很好，但这不是我的选择。

我已将 ping 命令的输出重定向到一个文本文件，并且在触发操作后，结果如下：

```
PING myhost (myip) 56(84) bytes of data.

--- myhost ping statistics ---
4 packets transmitted, 0 received, 100% packet loss, time 13002ms 
```

所以我有点卡在这一点上。任何人都可以帮助我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:33:36.200

全新安装后，一切正常。孩子们，不要乱搞政策。

# perl - 如何实时读取外部程序的 STDOUT？

> ID：14475758
> 
> 赞同：0
> 
> 时间：2013-01-23T09:00:06.940
> 
> 标签：perl, process, external, stdout

让我详细说明。

说我有 perl 程序

（这是从 perl [http://perldoc.perl.org/perlfaq8.html#How-can-I-open-a-pipe-both-to-and-from-a-command%3f](http://perldoc.perl.org/perlfaq8.html#How-can-I-open-a-pipe-both-to-and-from-a-command%3f)无耻地复制和编辑的 ）

```
 use IPC::Open3;

 use Symbol qw(gensym);   

 use IO::File;
 local *CATCHOUT = IO::File->new_tmpfile;
 local *CATCHERR = IO::File->new_tmpfile;

 my $pid = open3(gensym, ">&CATCHOUT", ">&CATCHERR", "ping -t localhost");

 #waitpid($pid, 0);   

seek $_, 0, 0 for \*CATCHOUT, \*CATCHERR;

 while( <CATCHOUT> ) {

print $_;
} 
```

但上述程序的问题在于，在这种情况下，它会读取属于程序 ping.exe 的 STDOUT 的一种 readtoEnd()，并允许一次读取所有内容。

但是我想要做的是在将 STDOUT 写入 STDOUT 时读取它。

如果我删除 waitforpid() 那么程序会立即退出，所以这也无济于事。

那可能吗 ？如果是这样，请您指出正确的方向。

更新：德拉斯！！！！我错过了| 符号...这对于将输出从 ping 输出到 perl 脚本至关重要！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:34:39.063

```
use IPC::Open3 qw( open3 );

open(local *CHILD_STDIN, '<', '/dev/null') or die $!;

my $pid = open3(
   '<&CHILD_STDIN',
   my $child stdout,
   '>&STDERR',
   'ping', '-t', 'localhost',
);

while (<$child_stdout>) {
   chomp;
   print("Got: <<<$_>>>\n");
}

waitpid($pid, 0); 
```

但这可以写成

```
open(my $ping_fh, '-|', 'ping', '-t', 'localhost') or die $!;

while (<$ping_fh>) {
   chomp;
   print("Got: <<<$_>>>\n");
}

close($ping_fh); 
```

这只是显示了正确的用法。如果这些不起作用，这是一个不相关的问题：`ping`在未连接到终端时正在缓冲它的 IO。您可以使用伪 tty 来欺骗它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:11:07.377

perl 的优点（或缺点）之一是做事的方法不止一种。这有效：

```
perl -e 'open(F,"ping localhost|"); while(<F>) { s/ms/Milliseconds/; print $_; }' 
```

只需输入 s/ms/Milliseconds/ 以显示正在读取和更改数据 不确定 Open3 到底有什么问题

# django - 在 django 中为测试生成报告

> ID：14475760
> 
> 赞同：2
> 
> 时间：2013-01-23T09:00:24.853
> 
> 标签：django, testing, report

我正在使用基于 django.test.TestCase 的类方法来测试我的 django 应用程序。当我执行测试时，它只显示通过的测试数量。我应该怎么做才能在控制台上获得哪个测试通过和哪个失败的输出，就像 Proboscis 框架的输出一样。 [http://packages.python.org/proboscis/](http://packages.python.org/proboscis/)

这会产生这样的输出..

```
$ python run_tests.py

test_should_return_false_for_positive_numbers (tests.examples.unit.tests.unit.TestIsNegative) ... ok
test_should_return_false_for_zero (tests.examples.unit.tests.unit.TestIsNegative) ... ok
test_should_return_true_for_negative_numbers (tests.examples.unit.tests.unit.TestIsNegative) ... ok
Make sure our complex string reversal logic works. ... ok

----------------------------------------------------------------------
Ran 4 tests in 0.001s

OK 
```

但是 proboscis 不会捕获基于 django.tests.TestCase 类的测试。请告诉我我现在应该做什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:16:12.823

`verbosity`使用选项运行测试

```
python manage.py test --verbosity=2 app1 app2

-v VERBOSITY, --verbosity=VERBOSITY
                    Verbosity level; 0=minimal output, 1=normal output,
                    2=verbose output, 3=very verbose output 
```

# doctrine-orm - Zend Framework 2 + Doctrine：在模型中获取实体管理器

> ID：14475761
> 
> 赞同：0
> 
> 时间：2013-01-23T09:00:25.360
> 
> 标签：doctrine-orm, zend-framework2

编辑1：似乎我没有很好地解释自己。Foo 类**不是**实体。只是一个通用模型，我想访问实体管理器。

编辑2：我认为我的问题没有答案。基本上，我想要一个可以访问 EntityManager 的类，而无需服务管理器调用该类，这仅仅是因为它可能被一个也未被服务管理器调用的类调用。换句话说，我试图实现 Zend_Registry 在 ZF1 中实现的目标。我必须找到另一种方法来做我想做的事情。

我正在尝试在模型中访问 Doctrine 的实体管理器，其方式与在控制器中所做的类似：

```
$this->getServiceLocator()->get('Doctrine\ORM\EntityManager'); 
```

ZF2 手册（http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.quick-start.html）说：

> 默认情况下，Zend Framework MVC 注册一个初始化器，它将注入 ServiceManager 实例，它是 Zend\ServiceManager\ServiceLocatorInterface 的实现，到任何实现 Zend\ServiceManager\ServiceLocatorAwareInterface 的类中。

所以我创建了以下类：

```
<?php
namespace MyModule\Model;

use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class Foo implements ServiceLocatorAwareInterface
{
    protected $services;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
         $this->services = $serviceLocator;
    }

    public function getServiceLocator()
    {
         return $this->services;
    }

    public function test()
    {
        $em = $this->getServiceLocator()->get('Doctrine\ORM\EntityManager');
    }
} 
```

然后，从另一个类中，我这样称呼这个类：

```
$foo = new \MyModule\Model\Foo();
$foo->test() 
```

引发以下错误：

> PHP 致命错误：在非对象上调用成员函数 get()

所以，我想我在某个地方遗漏了一些东西，但是什么？在哪里？如何？也许有一个更容易访问实体管理器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:06:58.400

我认为，您唯一缺少的是将模型类添加到可调用列表中并通过服务管理器检索它。

所以基本上把它添加到你的*module.conf.php 中*：

```
return array(
    'service_manager' => array(
        'invokables' => array(
            'MyModule\Model\Foo' => 'MyModule\Model\Foo',
        ),
    ),
); 
```

并像这样实例化您的模型对象（如果在控制器中）：

```
$foo = $this->getServiceLocator()->get('MyModule\Model\Foo');
$foo->test(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:14:09.540

从您的问题中，我看到您主要有两个误解，一个是关于您的设计策略（在您的模型上注入 EntityManager），另一个是关于服务管理器（ServiceLocatorAwareInterface）的工作方式。在我的回答中，我将尝试专注于第二个。

Initializers 是 php 闭包，在从服务管理器访问的每个实例上调用，然后再将其返回给您。

下面是一个初始化器的例子：

```
// Line 146 - 150 of Zend\Mvc\Service\ServiceManagerConfig class + comments

$serviceManager->addInitializer(function ($instance) use ($serviceManager) {
        if ($instance instanceof ServiceManagerAwareInterface) {
            $instance->setServiceManager($serviceManager);
        }
    }); 
```

正如您所看到的，每次要求 Service Manager 返回实现 ServiceManagerAwareInterface 接口的实例/对象时，它都会设置/注入 Service Manager 实例。

顺便说一句，在您之前的代码中，您省略了正确实现接口，因为您没有定义`setServiceManager`方法。但是，这不是您唯一的问题。首先，如果您希望服务管理器将自己注入您的模型中，您需要通过工厂调用/构造模型实例（在此过程中它将调用初始化程序），例如，如果您的类具有复杂的依赖关系。

[编辑]

例子：

在你的 MyModule

```
namespace MyModule;
use Zend\ModuleManager\Feature\ServiceProviderInterface;
use MyModule\Model\Foo;

class Module implements ServiceProviderInterface{

//Previous code

public function getServiceConfig()
{
    return array(
        'instances' => array(
            'myModelClass'        => new Foo(),
            ),
       );

} 
```

现在，当您需要一个 Foo 实例时，您应该调用 Service Manager：

$serviceManager->get('myModelClass');

不要忘记定义`setServiceManager`方法，否则你没有正确实现 ServiceManagerAwareInterface！

# python - Google App Engine 中的 UnicodeDecodeError

> ID：14475762
> 
> 赞同：1
> 
> 时间：2013-01-23T09:00:28.707
> 
> 标签：python, html, google-app-engine, jinja2

在我的项目中（使用 Python、Html 和 Jinja2），我有一个带有电影图片的主页，每张图片都指向带有电影数据的特定页面。当我尝试使用电影数据显示页面时，出现以下错误（我尝试删除每个元素，例如删除moving.summary，然后在上述参数上标记错误）：

```
 Traceback (most recent call last):
      File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
        rv = self.handle_exception(request, response, e)
      File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
        rv = self.router.dispatch(request, response)
      File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
        return route.handler_adapter(request, response)
      File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
        return handler.dispatch()
      File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
        return self.handle_exception(e, self.app.debug)
      File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
        return method(*args, **kwargs)
      File "C:\Users\User\Desktop\imovie-good\main.py", line 77, in get
        self.response.out.write(template.render(template_values))
      File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 894, in render
        return self.environment.handle_exception(exc_info, True)
      File "C:\Users\User\Desktop\imovie-good\movie_data.html", line 7, in top-level template code
        <td> Movie Name: {{movie_data.name}}</td>
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128) 
```

这是我的python代码：

```
 import webapp2
    import jinja2
    import os
    import datetime
    import time
    import cgi
    from google.appengine.ext import db
    from google.appengine.api import users
    from google.appengine.api import images

    jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

    class Movie(db.Model):
        name = db.StringProperty()
        release_date = db.StringProperty()
        duration = db.StringProperty()
        director = db.StringProperty()
        actors = db.StringProperty(multiline=True)
        summary = db.StringProperty(multiline=True)
        picture = db.BlobProperty()
        trailer = db.StringProperty(multiline=True)
        date = db.DateTimeProperty(auto_now_add=True)

    class Movie_Data(webapp2.RequestHandler):
        def get(self):
            movie_key = self.request.get('movie_key')
            movie_data = Movie.get(movie_key)

    template_values = {'movie_data': movie_data}
            template = jinja_environment.get_template('movie_data.html')
            self.response.out.write(template.render(template_values))

    class Image(webapp2.RequestHandler):
        def get(self):
            movie = db.get(self.request.get('img_id'))
            if movie.picture:
                self.response.headers['Content-Type'] = 'image/jpeg'
                self.response.out.write(movie.picture)
            else:
                self.response.out.write("No Image")

    class Main(webapp2.RequestHandler):
        def get(self):
            movies = db.GqlQuery("SELECT * "
                                "FROM Movie "
                                "ORDER BY release_date DESC LIMIT 5")
            template_values = { 'movies': movies}                                   
            template = jinja_environment.get_template('home_page.html')
            self.response.out.write(template.render(template_values))

    class Admin(webapp2.RequestHandler):
        def get(self):
            template_values = {}
            template = jinja_environment.get_template('admin.html')
            self.response.out.write(template.render(template_values))

        def post(self):
            name = self.request.get('name')
            release_date = self.request.get('release_date')
            c = time.strptime(release_date,"%m/%d/%Y")
            release_date = time.strftime("%m%d%Y",c)
            duration = self.request.get('duration')
            director = self.request.get('director')
            actors = self.request.get('actors')
            summary = self.request.get('summary')
            picture = self.request.get('img')
            trailer = self.request.get('trailer')

            movie = Movie(key_name = name)
            movie.release_date = release_date
            movie.duration = duration
            movie.director = director
            movie.actors = actors
            movie.summary = summary
            movie.picture = db.Blob(picture)
            movie.trailer = trailer
            movie.put()
            self.redirect('/')

    app = webapp2.WSGIApplication([('/admin', Admin), ('/', Main), ('/img', Image), ('/movie_data', Movie_Data)], debug=True) 
```

这是我的主页 html：

```
 <html>
    <body>
        <table>
            <th>Top Movies</th>

            {% for movie in movies %}
            <tr>
                <td>{{movie.key().name() }} &nbsp</td>
            </tr>
            <tr>
                <td><a href = "/movie_data?movie_key = {{movie.key()}}"> <img src = "/img?img_id={{movie.key()}}"> </td>

            </tr>

            {% endfor %}

            <a href = "/admin">admin</a>

        </table>
    </body>
</html> 
```

这是我的 movie_data html 代码：

```
 <html>
    <body>
        <div>
            <table>
                <tr>
                    <td rowspan ="6">{{ movie_data.picture }}</td>
                    <td> Movie Name: {{movie_data.name}}</td> 
                </tr>
                <tr>
                    <td> Release Date: {{movie_data.release_date}}</td> 
                </tr>
                <tr>
                    <td> Duration (minutes): {{movie_data.duration}}</td> 
                </tr>
                <tr>
                    <td> Director: {{movie_data.director}}</td> 
                </tr>
                <tr>
                    <td> Actors: {{movie_data.actors}}</td> 
                </tr>
                <tr>
                    <td> Summary: {{movie_data.summary}}</td> 
                </tr>
                <tr>
                    <td colspan ="2"> {{movie_data.trailer}} </td>
                </table>
        </div>      
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:37:59.613

我不认为取决于字符串`movie_data.name`。产生错误的实体更有可能是`movie_data.image`. 根据[服务 blob 文档](https://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob)查看您的相关代码。

实际上，您需要一个单独的处理程序来提供图像，请参阅[图像文档](https://developers.google.com/appengine/docs/python/images/usingimages?hl=en#Serving)中的示例或只需替换：

```
{{ movie_data.picture }} 
```

和

```
<img src='data:image/png;base64,{{movie_data.picture.encode("base64")}}'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:18:27.513

Jinja2 仅限 unicode：[您必须将仅由 ASCII 字符组成的 unicode 对象或字节串传递给 render 函数](http://jinja.pocoo.org/docs/api/#unicode)。

所以我猜你`movie.name`是一个包含非ASCII字符的字节字符串。

我建议你：

a) 将 unicode 存储在数据库中，或

b）在模板内转换为 unicode（我不确定这在 Jinja2 中是否可行）。如果可能，此语法类似于：

```
<td> Movie Name: {{unicode(movie_data.name, "utf8")}}</td> 
```

我强烈推荐方法a）。如果使用 b) （如果该语法在 jinja 模板中甚至是合法的），您需要知道字节字符串的编码。

一个通用的 Python 提示是始终使用 unicode 字符串。意义：

1.  尽快将外部字符串输入转换为 unicode（以下是 HTML 表单处理的示例）。这称为解码。`unicode(my_byte_string, encoding)`（或`my_byte_string.decode(encoding)`）。`encoding`可以是“ascii”、“utf8”等。
2.  尽可能晚地将 unicode 转换为字节字符串（如果有的话）。如果您需要通过网络传输 unicode 或写入文件，通常需要转换为字节字符串。这称为编码。`my_unicode_string.encode(encoding)`
3.  在源代码中使用 unicode 文字。使用`movie.name = u"Iron Man"`代替`movie.name = "Iron Man"`

**编辑**

看起来您将电影保存到`Admin.post`方法内的数据库中。要将 unicode 值存储在数据存储中，请使用如下代码：

```
name = unicode(self.request.get('name'), "utf8")
# and so on for all the StringProperty values 
```

**编辑 2**

根据[Python 2.7、Appengine 数据存储和 Unicode](https://stackoverflow.com/questions/9631127/python-2-7-appengine-data-store-unicode)`self.request.get("...")` ，您在使用 webapp 或 webapp2 时不需要解码。

我会在`post`方法中添加一些断言来检查您从请求中获得的值是否实际上是 unicode：

```
assert isinstance(self.request.get("name"), unicode) 
```

并检查您从数据存储中获取的对象属性是否为 unicode（在 Main.get 中）：

```
movies = db.GqlQuery("...")
assert all(isinstance(movie.name, unicode) for movie in movies) 
```

# php - 加入多个ON条件的查询在codeigniter中不起作用？

> ID：14475763
> 
> 赞同：3
> 
> 时间：2013-01-23T09:00:34.570
> 
> 标签：php, mysql, codeigniter

我需要这样的查询

```
SELECT * FROM (`users`) 
     LEFT JOIN `users_phone_numbers`     
              ON `users`.`id`= `users_phone_numbers`.`user_id` 
     LEFT JOIN `phone_number`
             ON (`phone_number`.`id`= `users_phone_numbers`.`phone_num_id` AND users_phone_numbers.is_active = 1)
WHERE `users`.`id` = 56 
```

我在codeigniter中有这样的代码

```
$this->db->select('*');
$this->db->from('users');
$this->db->join('users_phone_numbers',
                              'users.id= users_phone_numbers.user_id',
                              'left');
            $this->db->join('phone_number',
                              '(phone_number.id= users_phone_numbers.phone_num_id AND users_phone_numbers.is_active = 1)',
                              'left'); 
$this->db->where('users.id = '. $id); 
 $result =  $q->result_array(); 
```

但我得到了这个错误

![但我得到了这个错误](../Images/39045a623eff59e61e51c0bbc2787549.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:22:59.360

如果您检查 Codeigniter 对条件函数的处理，您将看到以下内容：

```
// Strip apart the condition and protect the identifiers
if (preg_match('/([\w\.]+)([\W\s]+)(.+)/', $cond, $match)) 
```

Codeigniter 正在从查询中删除左括号。你不能移动 WHERE 子句中的 LEFT JOIN 附加子句来解决这个问题吗？

编辑：

```
$this->db->select('*');
$this->db->from('users');
$this->db->join('users_phone_numbers',
                              'users.id= users_phone_numbers.user_id',
                              'left');
            $this->db->join('phone_number',
                              'phone_number.id= users_phone_numbers.phone_num_id)',
                              'left'); 
$this->db->where(array('users.id => '. $id, 'users_phone_numbers.is_active' => 1)); 
 $result =  $q->result_array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-09T05:52:06.907

您需要删除`join`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T05:25:31.753

```
 $this->db->join('phone_number',
                              'phone_number.id= users_phone_numbers.phone_num_id AND users_phone_numbers.is_active = 1',
                              'left'); 
```

删除上面的括号。当没有括号时它对我有用

# windows - 从 CMD 在桌面上创建计算机（Windows XP 中的我的电脑）快捷方式？

> ID：14475769
> 
> 赞同：1
> 
> 时间：2013-01-23T09:00:47.880
> 
> 标签：windows, command-line, icons, cmd

如何从 CMD 在桌面上从计算机创建快捷方式（右键单击管理选项的真正快捷方式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:32:13.980

这是一个例子：

*   在某处创建一个空白文本文件。在我的测试中，我使用了 C:\
*   打开文本文件，并粘贴以下 vbscript 代码：

```
Const MY_COMPUTER = &H11&
Dim Act, Desktop, Link, ObjF, ObjFItem, Shell
 Set Act = CreateObject("Wscript.Shell")
 Set Shell = CreateObject("Shell.Application")
 Set ObjF = Shell.Namespace(MY_COMPUTER)
 Desktop = Act.SpecialFolders("Desktop")
 Set Link = Act.CreateShortcut(Desktop & "\Computer.lnk")
 Set ObjFItem = ObjF.Self
  Link.TargetPath = ObjFItem.Path
  Link.WindowStyle = 1
  Link.IconLocation = "Shell32.dll, 15"
  Link.Description = "Shortcut To My Computer"
  Link.WorkingDirectory = Desktop
  Link.Save 
```

*   `.vbs`使用扩展名保存文件。
*   从命令行运行，例如：

`C:\Documents and Settings\bridge> c:\test.vbs`（假设您调用了文件`test.vbs`）。

*   您可以通过编辑上面的文件来自定义快捷方式，例如创建的快捷方式的描述或名称。

# c# - 当运行时为 HTML5 时，Plupload (1.5.4) 在 Chrome24 上不起作用

> ID：14475770
> 
> 赞同：2
> 
> 时间：2013-01-23T09:00:53.410
> 
> 标签：c#, jquery, asp.net-mvc-3, plupload

`Plupload (1.5.4)``Chrome24`运行时不工作`HTML5`？？？

它适用于小于 24 的所有版本的 chrome

```
<script type="text/javascript">
$("#html5_uploader").pluploadQueue({
runtimes: 'html5',
url: '/Plupload.ashx',
max_file_size: '500mb',
chunk_size: '1mb',
unique_names: true,
filters: [{ title: "Image files", extensions: "jpg,gif,png,tif,tiff,jpeg"}]
});
</script>
<form>
<h4>HTML 5 runtime</h4>
<div id="html5_uploader">You browser doesn't support native upload. Try Firefox 3 or Safari 4.</div>
</form> 
```

上面的代码上传大小小于 chunk_size 的图像，但如果图像大小大于 chunk_size 则不上传。

# javascript - javascript中缺少逻辑

> ID：14475773
> 
> 赞同：0
> 
> 时间：2013-01-23T09:00:58.993
> 
> 标签：javascript, html, css

你好，

与输入相邻的按钮。该按钮默认是隐藏的，当输入获得焦点时将可见，如果输入失去焦点，它将再次隐藏。

我写了一个代码来实现这一点。但问题是按钮的事件没有被触发，因为它在输入失去焦点的那一刻被隐藏了。

我没有任何想法来实现这一目标。有人可以帮助我吗？

这是代码

```
<html>
 <head>
 <style>
  .icon{
   visibility:hidden;
  }
 </style>
 </head>
 <body>

   <input type="text" onFocus="onOver('f4_1')" onBlur="onOut('f4_1')"/>
   <input type="button" class="icon" value="?" id="f4_1" onClick="alert('hi..')"/>

<script>
    function onOver(f4Id){
      document.getElementById(f4Id).style.visibility = "visible";
    }

    function onOut(f4Id){
        document.getElementById(f4Id).style.visibility="hidden";
    }
</script>
 </body>

</html> 
```

**注意：**使用纯javascript实现。不要使用任何 jQuery。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:04:12.013

实际上，这些事件的顺序因浏览器而异。如果我没记错的话，如果您单击它，Internet Explorer 会触发该按钮，而 Firefox 则不会。

无论如何，可以通过添加一个小延迟来解决问题。将您的功能更改`onOut`为：

```
function onOut(f41d) {
    setTimeout(function(){document.getElementById(f41d).style.visibllity="hidden";},25);
} 
```

现在该按钮将几乎立即隐藏。人眼应该不会注意到，但计算机可以分辨出差异并允许您单击按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:32:25.347

事件处理非常重要，理解它们何时被触发是最重要的 `onmousedown`事件将覆盖文本框的 onBlur 效果，这是必需的。

检查工作 **[示例在这里](http://jsfiddle.net/Ypg92/)**

```
 <input type="text" onFocus="onOver('f4_1')" onBlur="onOut('f4_1')"/>
   <input type="button" class="icon" value="?" id="f4_1" onmousedown="alert('M Kicked')"/>

<html>
 <head>
 <style>
  .icon{
   visibility:hidden;
  }
 </style>
 </head>
 <body>

   <input type="text" onFocus="onOver('f4_1')" onBlur="onOut('f4_1')"/>
   <input type="button" class="icon" value="?" id="f4_1" onmousedown="alert('M Kicked')"/>

<script>
    function onOver(f4Id){
      document.getElementById(f4Id).style.visibility = "visible";
    }

    function onOut(f4Id){
        document.getElementById(f4Id).style.visibility="hidden";
    }
</script>
 </body>

</html> 
```

# jquery - 使用 jQuery 1.9 敲除 2.2.0 错误

> ID：14475781
> 
> 赞同：14
> 
> 时间：2013-01-23T09:01:29.203
> 
> 标签：jquery, knockout.js, jquery-1.9

我复制了一个 knockoutjs 示例：

```
 <!DOCTYPE html>
    <html>
    <head>
      <script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.0/knockout-min.js"></script>

    <meta charset=utf-8 />
    <title>JS Bin</title>

    </head>
    <body>

    <h2>Participants</h2>
    Here are the participants:
    <div data-bind="template: { name: 'person-template', data: buyer }"></div>
    <div data-bind="template: { name: 'person-template', data: seller }"></div>

    <script id="person-template" type="text/html">
        <h3 data-bind="text: name"></h3>
        <p>Credits: <span data-bind="text: credits"></span></p>
    </script>

    <script type="text/javascript">
         function MyViewModel() {
             this.buyer = { name: 'Franklin', credits: 250 };
             this.seller = { name: 'Mario', credits: 5800 };
         }
         ko.applyBindings(new MyViewModel());
    </script>
    </html> 
```

当我将 jQuery 更新到**版本 1.9**时，出现以下错误：

```
Uncaught TypeError: Object function (e,t){return new st.fn.init(e,t,X)} has no method 'clean' 
```

如果有人能解释错误是在 jQuery 还是 KO 中，我将不胜感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T09:10:13.553

**原因**

您没有使用最新版本的 Knockout。之前的版本 2.2.0 与 jQuery 1.9.x 及更高版本不兼容。请参阅[此淘汰赛开发线程](https://github.com/SteveSanderson/knockout/pull/796)：

> Knockout 2.2.0 使用 jQuery.clean() 已被弃用并且在 1.9 中不存在。

这意味着 Knockout 2.2.0 正在调用未定义的 jQuery 方法，从而触发了您指定的 JS 错误。

**解决方案**

1.  考虑更新到与 jQuery 1.9 兼容**[的最新版本的 Knockout](http://knockoutjs.com/downloads/index.html)**
2.  如果不能，请使用**[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate/#readme)**，它为 jQuery 1.9 添加了向后兼容性
3.  如果一切都失败了，你需要恢复到**[jQuery 1.8](http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js)**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T09:09:46.580

将 Knockout 更新到 2.2.1 为我解决了这个问题：

*   **2.2.0**：http: [//jsfiddle.net/UDSBC/2/](http://jsfiddle.net/UDSBC/2/)
*   **2.2.1**：http: [//jsfiddle.net/UDSBC/1/](http://jsfiddle.net/UDSBC/1/)

所以只需改变：

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.0/knockout-min.js"></script> 
```

到：

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.1/knockout-min.js"></script> 
```

它会起作用的。

# java - 同一对象的过度实例化？

> ID：14475789
> 
> 赞同：0
> 
> 时间：2013-01-23T09:02:09.110
> 
> 标签：java, optimization, jvm, java-7, dalvik

考虑以下代码作为该想法的完全简化示例：

```
public class Main {
    public static void foreach(int[] x, intVoid action) {
        for (int i = 0; i < x.length; ++i) {
            action.apply(x[i]);
        }
    }

    public static void main (String[] args) {
        int[] h = new int[] {2, 3, 5, 7, 11, 13};
        for (int i = 0; i < 10; ++i) {
            foreach(h, new intVoid() {
                public void apply(int x) {
                    System.out.println(x * 2);
                }
            });
        }
    }
}

interface intVoid {public void apply(int x);} 
```

在 for 循环中`foreach`，从逻辑的角度来看，我们使用完全相同的参数进行调用，因为我们接口的匿名实现不依赖于上下文中的任何内容。问题是——它会被实例化 10 次还是只被实例化一次？或者，类似地，它是否等同于以下代码：

```
public class Main {
    public static void foreach(int[] x, intVoid action) {
        for (int i = 0; i < x.length; ++i) {
            action.apply(x[i]);
        }
    }

    public static void main (String[] args) {
        int[] h = new int[] {2, 3, 5, 7, 11, 13};
        intVoid action = new intVoid() {
            public void apply(int x) {
                System.out.println(x * 2);
            }
        };
        for (int i = 0; i < 10; ++i) {
            foreach(h, action);
        }
    }
}

interface intVoid {public void apply(int x);} 
```

我有时会遇到这种情况，在需要的地方准确定义实现非常方便，但有时我还需要确保不会尝试多次创建同一个对象。如果运行时有优化，那么我对如何在不同的实现中进行处理很感兴趣，特别是如果我将这些代码转换为在 Android 的 Dalvik VM 中运行会发生什么。
我知道我可以自己测试这一切，但我想知道是否有人已经对这个问题有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:05:09.420

> 问题是——它会被实例化 10 次还是只被实例化一次？

10 次，因为这是你告诉它要做的。看到 JVM（或 Dalvik）注意到它`apply`没有副作用并且对象没有状态，我会感到惊讶，因此您不需要创建单独的实例。有*可能*——Hotspot 相当令人印象深刻——但对我来说这似乎是一个不太可能的优化。

当然，创建每个对象可能很便宜 - 但根据您的第二个代码片段创建*一个对象仍然会更好。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T09:05:02.610

每次`new`执行都会实例化一次。逃逸分析可能会在它被 JITed 之后消除它，例如在 10,000 次之后，但我不认为它确实如此。

如果它足够聪明地不创建单独的实例，那么它足够聪明地消除它，这是更好的。

# javascript - 重新排序图片库

> ID：14475792
> 
> 赞同：0
> 
> 时间：2013-01-23T09:02:17.267
> 
> 标签：javascript, drag-and-drop, yui, yahoo

我有一个无序列表的图像缩略图。每个缩略图链接到全尺寸图像。我使用 YUI3 库来允许对缩略图图像进行拖放重新排序（只是开箱即用的示例代码）。

问题是指向全尺寸图像的链接：它不可拖动。只有缩略图下方的小部分（带有标题和值）是可拖动的。

```
<ul>
<li class="imgcontainer">
    <div>
        <a href="/image.jpg">
        <img src="thumbnail.jpg" border="0" alt="" />
        </a>
    </div>
    <div class="left">Title</div>
    <div class="right">$2.00</div>
    <div class="clear"></div>
</li>
<!-- ... -->
</ul> 
```

允许用户重新排序此类图片库中的图片的最佳方式是什么？将拖动手柄图标添加到列表项的一角？创建一个“重新排序模式”，其中链接锚被删除，只留下可拖动的图像？还是可以设置成链接仍然可以拖动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:18:08.043

您的问题是默认情况下锚标记不是有效的拖动句柄。您可以通过在拖动实例上使用 removeInvalid('a') 来更改此设置。

```
var dd1 = new Y.DD.Drag({
    node: '#drag1'
});

dd1.removeInvalid('a'); 
```

另一种选择是删除锚标签

```
<div class="linked-image">
    <img src="http://placekitten.com/50/50" border="0" alt="" />
</div> 
```

并向图像添加点击侦听器。

```
Y.on('click', function () {
    alert('go to url');
}, '.linked-image'); 
```

这两种方法都在这里演示：http: [//jsfiddle.net/xGQne/](http://jsfiddle.net/xGQne/)

请注意，在这两种情况下，拖动完成后都会触发 click 事件。您需要区分单击和拖动以使这项工作顺利进行。

# c - 如何定义指向结构的指针

> ID：14475797
> 
> 赞同：6
> 
> 时间：2013-01-23T09:02:27.623
> 
> 标签：c, pointers, structure

我知道这是一个非常基本的问题，但是没有它我就无法继续前进，而且在其他地方也没有清楚地解释。

为什么这个编程给了我这么多未声明标识符的错误？不过，我已经宣布了。

这些是我得到的错误。

```
Error   2   error C2143: syntax error : missing ';' before 'type'
Error   3   error C2065: 'ptr' : undeclared identifier
Error   4   error C2065: 'contactInfo' : undeclared identifier
Error   5   error C2059: syntax error : ')'
Error   15  error C2223: left of '->number' must point to struct/union 
```

和更多...

```
#include<stdio.h>
#include<stdlib.h>

typedef struct contactInfo
{
    int number;
    char id;
}ContactInfo;

void main()
{

    char ch;
    printf("Do you want to dynamically etc");
    scanf("%c",&ch);
    fflush(stdin);

        struct contactInfo nom,*ptr;
        ptr=(contactInfo*)malloc(2*sizeof(contactInfo));

    nom.id='c';
    nom.number=12;
    ptr->id=nom.id;
    ptr->number=nom.number;
    printf("Number -> %d\n ID -> %c\n",ptr->number,ptr->id);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:12:30.863

```
typedef struct contactInfo
{
    int number;
    char id;
}ContactInfo; 
```

这段代码定义了两件事：

1.  一种名为*_*`ContactInfo`
2.  一个`struct`名为`contactInfo`

注意和的`c`区别`C`！

在您的代码中，您使用的是两者的混合组合，这是允许的（尽管恕我直言令人困惑）。

如果您使用`struct`变体，则需要显式使用`struct contactInfo`. 对于其他变体 ( `ContactInfo`)，您*必须*省略该`struct`部分，因为它是类型定义的一部分。

所以要小心你的结构的不同定义。最好只使用其中一种变体。

* * *

我手头没有 Visual Studio，但以下（更正的）代码可以使用 gcc 正确编译而没有任何警告：

```
#include<stdlib.h>

typedef struct contactInfo
{
    int number;
    char id;
}ContactInfo;

void main()
{
    ContactInfo nom,*ptr;
    ptr=malloc(2*sizeof(ContactInfo));    
} 
```

（我省略了代码中不太有趣/未修改的部分）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T09:04:20.930

这：

```
ptr=(contactInfo*)malloc(2*sizeof(contactInfo)); 
```

错了，没有类型叫做`contactInfo`.

有一个`struct contactInfo`, 即`typedef`:d as `ContactInfo`。C 是区分大小写的（并且您必须包括`struct`它在 C++ 中的工作方式不同）。

另请注意，引用的行最好写为：

```
ptr = malloc(2 * sizeof *ptr); 
```

由于在 C[中强制转换的返回值`malloc()`是一个坏主意](https://stackoverflow.com/a/605858/28169)，因此我删除了强制转换。此外，重复类型是一个坏主意，因为它会增加引入错误的风险，所以我也删除了它。

请注意，这`sizeof *ptr`意味着“`ptr`指向的类型的大小”并且是一件非常方便的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:06:07.710

代替

```
ptr=(contactInfo*)malloc(2*sizeof(contactInfo)); 
```

和

```
ptr=malloc(2*sizeof(struct contactInfo)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:06:43.803

C 是区分大小写的语言。

`ptr=(contactInfo)malloc(2*sizeof(contactInfo));`

应该是：

`ptr=malloc(2*sizeof(ContactInfo));`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T09:08:20.963

```
struct contactInfo nom,*ptr;
ptr=(contactInfo*)malloc(2*sizeof(contactInfo)); 
```

在这里，您正在使用contactInfo 进行类型转换，因为它应该是struct contactInfo。并且当您将其 typedef 到 ContactInfo 中时，您也可以使用它。

```
 struct contactInfo nom,*ptr;
    ptr=(ContactInfo*)malloc(2*sizeof(ContactInfo)); 
```

# sql-server-2008 - 对于 MS Access 的 VAL() 函数，我们在 SQL SERVER 中是否有任何等效函数？

> ID：14475799
> 
> 赞同：4
> 
> 时间：2013-01-23T09:02:34.690
> 
> 标签：sql-server-2008, ms-access

直接在包含`VAL([CoLUMN_NAME])`. 谷歌搜索了很多后，我找到了一个`CAST(COLUMN AS DATATYPE)`替换`VAL()`.

但是当该列是文本类型时，如果我们写入`VAL([COLUMN_NAME])`，我们只会从该文本中获取数字部分。例如，该列的值是 45-A45，使用后`VAL([COLUMN_NAME])`我们只会得到“4545”。

如果我们想在 SQL SERVER 中实现这一点怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T11:22:37.327

Val 只是字符串左侧的数字，因此您可以从非常粗略的内容开始：

```
SELECT CASE 
         WHEN Patindex('%[^0-9]%', table_1.atext) > 0 THEN Cast( 
         LEFT(table_1.atext, Patindex('%[^0-9]%', table_1.atext) - 1) AS INT) 
         ELSE 0 
       END AS Val 
FROM   table_1; 
```

这将返回 45 而不是“45打”，但需要进行很大改进才能返回 45 而不是“45”。

**编辑重新评论**

据我所知，@Andriy M 的解决方案（如下）与 Val 完全一样。

```
 SELECT CAST(LEFT(table_1.atext, Patindex('%[^0-9]%', table_1.atext + 'x') - 1) 
  AS INT) AS Val from table_1 
```

编辑#2

来自 MS Access 的表格：

```
AText   Val(Atext)  
45 dozen    45
ABC 45      0
45_ABC      45
45 ABC 34   45
45          45
ABC         0 
```

使用@Andriy M 的解决方案，您会得到完全相同的结果。

**从那以后我发现@GMastros 有更好的解决方案**

```
CAST(LEFT(atext, Patindex('%[^-.0-9]%', atext + 'x') - 1) AS Float) AS Val 
```

> 请注意，我更改了搜索模式以包含负号和小数分隔符。我还将强制转换的数据类型更改为浮点数。Val 返回一个 vb6 double，它与 SQL Server 浮点数相同。—— G. 马斯特罗斯

# php - 加入3个表mysql php

> ID：14475800
> 
> 赞同：0
> 
> 时间：2013-01-23T09:02:38.527
> 
> 标签：php, mysql, join

我不确定术语，但我现在基本上有一个 2 表左连接，如下所示：

```
Snippets Table
snippet_id PK
snippet_text

snippets_link_email_id Table
snippet_id * (Links to Snippets Table)
email_id * (Links to emails Table)

emails Table
email_id 
version_no 
```

许多其他各种数据

所以发生的事情是一个日志被解析并插入到 emails 表中，每条记录都有关于日志文本的详细信息，发现的错误和关于用户的各种信息。

我需要从每个日志中获取的主要信息是错误，每个唯一错误都存储在片段表中。

由于可能有许多电子邮件具有相同的错误，我喜欢运行以下查询以查看有多少唯一错误：

```
$total_exception_check = mysql_query("SELECT * FROM snippets");
$total_exceptions = mysql_num_rows($total_exception_check);

while ($row = mysql_fetch_array($total_exception_check))
{
$i = $row['snippet_id'];
//Need to find total occurrences of this error

$feedback_query = mysql_query("SELECT * FROM snippets LEFT JOIN snippets_link_email_id ON snippets.snippet_id = snippets_link_email_id.snippet_id WHERE snippets_link_email_id.snippet_id = $i AND snippet_date BETWEEN CURRENT_TIMESTAMP - INTERVAL '$num_days' HOUR AND CURRENT_TIMESTAMP");
}
$tot_snippets = mysql_num_rows($feedback_query); 
```

所以我基本上遍历每个独特的错误，然后搜索snippets_link_email_id 表以查看该错误记录了多少次，即有多少已解析的电子邮件出现了该错误。

tot_snippets 告诉我每个的总量。所以这太棒了，我现在可以为每个错误建立一个表格，以及它被记录了多少次。

然而，在 emails 表中有很多信息，包括版本号，如果我想得到 emails 表中 version_no 的值 = 2000 的总唯一错误怎么办

我将如何编辑此代码以查看它？

```
SELECT *
FROM snippets
LEFT JOIN snippets_link_email_id
    ON snippets.snippet_id = snippets_link_email_id.snippet_id
WHERE
    snippets_link_email_id.snippet_id = $i
    AND snippet_date BETWEEN
        CURRENT_TIMESTAMP - INTERVAL '$num_days' HOUR
        AND CURRENT_TIMESTAMP 
```

我从其他类似的帖子中尝试过这个，但我猜我很远：

```
 SELECT *
 FROM snippets, emails
 LEFT JOIN snippets_link_email_id
     ON snippets.snippet_id = snippets_link_email_id.snippet_id
     AND snippets_link_email_id.email_id ON emails.email_id
 WHERE snippets_link_email_id.snippet_id = $i
 AND snippet_date BETWEEN
     CURRENT_TIMESTAMP - INTERVAL '$num_days' HOUR AND CURRENT_TIMESTAMP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:16:00.570

连接多个表的一般形式是

```
SELECT (columns or collations)
FROM table1
LEFT JOIN table2
ON (some condition that associates rows in table1 with rows in table2)
LEFT JOIN table3
ON (some condition that associates rows in table1 or table2 with rows in table3)
WHERE (whatever you want to limit the result set to) 
```

无论您要加入多少个表，都遵循相同的基本模式，但如果您使用很多表，那么给它们加上别名可能会让您的生活更轻松。

```
SELECT (columns or collations)
FROM table1 AS t1
LEFT JOIN table2 AS t2
ON (some condition that associates rows in t1 with rows in t2)
LEFT JOIN table3 AS t3
ON (some condition that associates rows in t1 or t2 with rows in t3)
WHERE (whatever you want to limit the result set to) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:16:50.503

正确加入电子邮件会解决它吗？

```
 SELECT *
 FROM snippets
 LEFT JOIN snippets_link_email_id
 ON snippets.snippet_id = snippets_link_email_id.snippet_id
 LEFT JOIN emails
 ON snippets_link_email_id.email_id = emails.email_id
 WHERE snippets_link_email_id.snippet_id = $i
 AND snippet_date BETWEEN CURRENT_TIMESTAMP - INTERVAL '$num_days' HOUR AND CURRENT_TIMESTAMP"); 
```

另外，我注意到您的第一个查询没有使用时间戳。这将返回比你真正需要的更多的行（我猜）。您可以按时间戳过滤第一个查询，然后您的循环将大大减小：

```
SELECT * FROM snippets
     WHERE snippet_date BETWEEN CURRENT_TIMESTAMP - INTERVAL '$num_days' HOUR AND CURRENT_TIMESTAMP"); 
```

# java - 是否可以在 Eclipse 中查看动态生成的字节码？

> ID：14475812
> 
> 赞同：3
> 
> 时间：2013-01-23T09:03:15.953
> 
> 标签：java, eclipse, code-generation

我知道几种以“.class”结尾的文件的解决方案，您可以在其中使用 ByteCode Outline 插件，或 Bytecode Visualiser 插件，甚至是类文件的内置“javap-like”查看器。

但我希望在调试时为运行时生成的代码提供这种能力！我想要实现的是从执行的 clojure 调用中查看实际生成的代码。这使用 ASM 动态生成类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:25:09.903

使用 Eclipse IDE，您可以将[JAD](http://www.varaneckas.com/jad/)（Java 反编译器）与[JADClipse](http://jadclipse.sourceforge.net/wiki/index.php/Main_Page)插件结合起来，在调试器尝试打开没有链接源的类文件时即时反编译您的类文件。如果没有 eclipse，您可以将 JAD 用作独立的可执行文件，但它对用户不太友好。

JAD 将为类文件生成 java 源代码，即使它是使用 java 汇编程序构建的。这是可能的，因为 java 语言足够接近 jvm 的功能。唯一不能处理的类文件是那些已经通过混淆器运行以防止反编译的类文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:31:46.747

除了 JAD，还有其他工具。一个叫[JD（Java Decompiler）](http://java.decompiler.free.fr/)。它还有一个 eclipse 插件，比 JAD 好一点，因为它支持 Java 5，JAD 只支持 Java 4（据我所知，自 2001 年以来，JAD 没有任何开发或其他方面）。似乎支持 Java 6 的工具是[DJ Java Decompiler](http://www.neshkov.com/dj.html)，但我还没有测试过。

而且我不知道这些工具是否真的支持即时生成的代码，另一方面，我真的不明白为什么它们不应该。

# sql - 使用 postgresql 反透视

> ID：14475813
> 
> 赞同：0
> 
> 时间：2013-01-23T09:03:18.253
> 
> 标签：sql, postgresql

我试图将一个包含许多列（未知数）的表取消透视到一个包含四列的表中。

我的查询如下所示：

```
INSERT INTO measurement (timestamp, sensor, value)
SELECT d."Timestamp", 
       ( SELECT s.id FROM sensor s WHERE s.name = columns.column_name),
       ( SELECT columns.column_name from sensor_list where "Timestamp" = d."Timestamp")     
FROM   sensor_list d, 
       (SELECT column_name FROM information_schema.columns WHERE table_name = 'sensor_list' AND column_name <> 'Timestamp' ORDER BY ordinal_position) columns 
```

这不起作用。我收到的错误消息是：

```
"ERROR: >>value<< has type numeric, but the expression is of type  information_schema.sql_identifier" 
```

`"columns.column_name"`有没有机会通过转换为字符串或其他类似的东西来让它工作`quote_ident()`？

我尝试的所有方法都不起作用。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:22:34.217

如果列 Value 的数据类型是数字，则代码将出错。您要分配列名还是列

# sql-server-2012 - SQL Server 2012 中镜像数据库的更改跟踪

> ID：14475820
> 
> 赞同：3
> 
> 时间：2013-01-23T09:03:42.380
> 
> 标签：sql-server-2012, mirror, change-tracking, database-mirroring

我正在开发基于 SQL Server 2012 标准的数据仓库。为了我们的 ETL 流程的利益，我想启用变更跟踪。这很容易做到，但是这个服务器镜像在另一个 SQL Server 2012 上。

镜像服务器的后果是什么？镜像服务器上是否也会启用更改跟踪？我必须采取额外的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T21:46:34.687

是的，它将在镜像数据库上启用，不，您不应该设置其他配置以在镜像中启用更改跟踪。您可能已经知道 SQL Server 只是将更改数据存储在一系列系统表中（每个表启用一个以进行更改跟踪）。

至于跨镜像使用它的后果，添加的变更数据也需要通过网络传播到镜像，并且变更表占用的额外空间也将在镜像上占用，而不是那些我不知道其他后果。

# oracle - 如何访问特定的日期格式？

> ID：14475824
> 
> 赞同：0
> 
> 时间：2013-01-23T09:03:53.383
> 
> 标签：oracle, vb6

```
<code>
Private Sub CmbRNO_Click()
sql = "SELECT
          A.ROLLNO,A.FIRST_NAME,A.MIDDLE_NAME,A.LAST_NAME,A.CONTACT,A.CONTACT1,A.CONTACT2,A.ADDRESS,A.GRADE,B.DIV,A.BLOOD_GROUP,C.HOUSE,A.DATE_OF_BIRTH,A.TRANSPORT,A.SNAME,A.MEAL,A.BUSNO,A.RUTNO,D.DNAME,D.DCONT,E.ANM,D.DADD,A.CARD_TYPE,A.CARD_NO 
       FROM 
          STUDENT_RECORD_DATABASE A,DIVISION B,HNM C,DRIVER D,ATTEND E 
       WHERE 
          A.DIVID=B.DIVID AND A.HID=C.HID AND A.DID=D.DID AND A.AID=E.AID AND ROLLNO ='" & CmbRNO.Text & "'"

Set RES = CON.Execute(sql)
        TxtFNM.Text = RES!FIRST_NAME
        TxtMIDNM.Text = RES!MIDDLE_NAME
        TxtLNM.Text = RES!LAST_NAME
        Text5.Text = RES!CONTACT
        Text6.Text = RES!CONTACT1
        Text7.Text = RES!CONTACT2
        TxtADDR.Text = RES!ADDRESS
        COMBO1.Text = RES!GRADE
        CmbDIV.Text = RES!DIV
        CmbBG.Text = RES!BLOOD_GROUP
        CmbHOUSE.Text = RES!HOUSE
        DTPicker1.Value = RES!DATE_OF_BIRTH     //error showing
        Combo10.Text = RES!TRANSPORT
        CmbSTOP.Text = RES!SNAME
        Combo11.Text = RES!MEAL
        CmbBUS.Text = RES!BUSNO
        Combo12.Text = RES!RUTNO
        CmbDRIVER.Text = RES!DNAME
        TxtDCONT.Text = RES!DCONT
        CmbATTEND.Text = RES!ANM
        Text10.Text = RES!DADD
        Combo13.Text = RES!CARD_TYPE
        Text11.Text = RES!CARD_NO
 End If
 End Sub
</code> 
```

这是在组合点击上显示学生记录的完整代码，
但错误是：`Invalid property value date_of_birth`

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:04:10.003

这可能是 oracle 和 vb6 之间日期格式不同的结果。为避免这种情况，我会在选择这样的列时明确定义日期格式

```
SELECT
 A.ROLLNO,
 A.FIRST_NAME,
 A.MIDDLE_NAME,
 ...
 TO_CHAR(A.DATE_OF_BIRTH,'DD-MON-YYYY') DATE_OF_BIRTH
 ... 
```

然后通过将其转换为日期在 VB6 中读取它：

```
DTPicker1.Value = CDate(RES!DATE_OF_BIRTH) 
```

# batch-file - 将字符串转换为数字

> ID：14475829
> 
> 赞同：3
> 
> 时间：2013-01-23T09:04:02.567
> 
> 标签：batch-file

我需要以下方面的帮助；

我有以下脚本：

```
SETLOCAL DisableDelayedExpansion

for /f "delims=" %%a in (stores1.txt) do (

set /p stores=%%a ) 
```

**stores.txt**的内容如下：

```
0010
0011
0012
etc. 
```

我找到的解决方案是`set /p stores=%%a`

此输出 :`0010,0011,0012`必须作为参数传递给`sql.script`:

```
sqlplus user/password@%database% @sqlscript.sql !stores! !data! 
```

**store**必须是数值，因为在 .sql 脚本中会询问数值

所以结论是我需要一个数值而不是字符串。我该怎么做这个“转换”？

```
@echo off
setlocal enabledelayedexpansion
set stores=
PAUSE
for /f "delims=" %%a in (stores1.txt) do (
set /a stores=%%a
echo !stores!
)
pause 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T18:03:28.207

基本上，@Bali C 是正确的。大多数情况下，任何值都是字符串值，`cmd`除非上下文要求或建议对其进行不同处理。例如，在算术表达式中，值将自动转换为/视为数字。

但是，批处理脚本中的数字可以用不止一种方式处理。特别是，根据数字以哪个字符开头，它可以被视为

*   一个十六进制值（当它有前缀时`0x`）；

*   八进制值（以 a 开头时`0`）；

*   十进制值（在所有其他情况下）。

因此，如果您只是`0010`在预期数字的上下文中使用例如，该值将评估为`8`，因为`0010`它是八进制表示法中的数字，`cmd`并且`8`是其十进制等价物。这就是你会得到的，特别是，如果你只是这样做：

```
set /a stores=%%a 
```

您可以使用以下简单技巧来摆脱前导 0（从而避免将该值视为八进制）：

```
set /a "stores=1%%a %% 10000" 
```

将 放在`1`开头会将其变为 5 位数字和十进制数字。找到除以 10000 的余数只返回原始数字，但现在去掉了前导 0。

*（注意：实际的模运算符是`%`, not `%%`，但字符必须加倍，因为它在算术上下文之外的特殊含义。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:25:38.440

我不认为 cmd 处理数字与字符串不同，除非你用它们做算术。

我不确定它是否会有所不同，但您可以使用 为变量分配一个数字`set /a`，因此请尝试使用

```
set /a stores=%%a 
```

# matlab - 在分配给 varargout 时使用可变数量的输出

> ID：14475831
> 
> 赞同：4
> 
> 时间：2013-01-23T09:04:07.637
> 
> 标签：matlab

我正在为我的 classA 制作一个通用 subsref，它有一个属性 attrA，它是一个 classB 实例。到目前为止，它正在工作，它让我可以做类似的事情

```
x = objA.attr1.methB(), 
```

这就是我最初想做的事情。

```
function this = Class1(varargin)
    this.attrA = ClassB()
    this = class(this,'ClassA')

function this = ClassB()
    this.AttrB1 = 'valueB1'
    this.AttrB2 = 'valueB2'

function out = methB
    out = this.AttrB2 
```

我偶然发现的问题是：当在我的 subsref 中执行对方法的调用时，我会这样做（检测它是一个方法等之前已完成）：

```
methName = index(1).subs;                    
args = index(2).subs;
if iscell(args)                    
    varargout = {feval(methName,this,args{:})};            
else
    varargout = {feval(methName,this,args)};
end %end if iscell 
```

问题是当methName方法支持可变数量的输出时，这个varargout不等价于[x,y,...]（输出的数量应该在subsref的调用中赋值，所以methName总是返回单个输出，这并不总是我想要的（几乎，但并非总是如此）。

我如何让 methName 知道我想要多少输出？（我不想将 N 作为参数传递）。

我在想像创建一个字符串`str='[out1,out2,out3...]'` 然后做类似的事情

```
eval([ 
str ...
'= {feval(methName,this,args{:})};'...
]) 
```

但我一直认为必须有一种更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:42:55.503

如果您期望的输出数量取决于从您的 subsref 请求的输出参数，您可以`nargout`像这样简单地使用：

```
[varargout{1:nargout}] = feval(methName,this,args{:}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:37:43.867

该解决方案有效，但我需要为单个输出添加一些内容：

```
if iscell(args)
    [argout{:}] = feval(methName,this,args{:});            
else
    [argout{:}]= {feval(methName,this,args)};
end %end if iscell`
if isSingleCell(argout) && iscell(argout{1})`
    v = argout{1};
    argout{1}=v{1};
end 
```

我不确定，但可能最后一点只需要修复其他东西（我必须修复很多其他东西才能完成这项工作）。当我完成我在这门课上尝试做的事情时，我会回到它

# unix - 为什么 OpenMPI 使用不同的服务器给定不同的 -n 设置？

> ID：14475837
> 
> 赞同：0
> 
> 时间：2013-01-23T09:04:13.690
> 
> 标签：unix, parallel-processing, mpi, distributed-computing, openmpi

我正在测试由另一个用户提供和编译的 OpenMPI，（我正在使用指向他的所有 bin、include 等目录的软链接 - 所有必需目录）但我遇到了这个奇怪的事情：

首先，如果我使用 -n 设置 <= 10 运行 mpirun，我可以在下面运行它。testrunmpi.py 只是打印出“运行”。从每个核心。

```
# I am in serverA.
bash-3.2$ /home/karl/bin/mpirun -n 10 ./testrunmpi.py
run. 
run. 
run. 
run. 
run. 
run. 
run. 
run. 
run. 
run. 
```

但是，当我尝试运行 -n 超过 10 时，我会遇到：

```
bash-3.2$ /home/karl/bin/mpirun -n 24 ./testrunmpi.py
karl@serverB's password: Could not chdir to home directory /home/karl: No such file or directory
bash: /home/karl/bin/orted: No such file or directory
--------------------------------------------------------------------------
A daemon (pid 19203) died unexpectedly with status 127 while attempting
to launch so we are aborting.

There may be more information reported by the environment (see above).

This may be because the daemon was unable to find all the needed shared
libraries on the remote node. You may set your LD_LIBRARY_PATH to have the
location of the shared libraries on the remote nodes and this will
automatically be forwarded to the remote nodes.
--------------------------------------------------------------------------
--------------------------------------------------------------------------
mpirun noticed that the job aborted, but has no info as to the process
that caused that situation.
--------------------------------------------------------------------------
bash-3.2$
bash-3.2$
Permission denied, please try again.
karl@serverB's password:
Permission denied, please try again.
karl@serverB's password: 
```

我看到工作被分派到 serverB，而我在 serverA 上。我在 serverB 上没有任何帐户。但是如果我调用 mpirun -n <= 10，工作将在 serverA 上。

这很奇怪，所以我检查了 /home/karl/etc/openmpi-default-hostfile，并尝试设置以下内容：

```
serverA slots=24 max_slots=24
serverB slots=0 max_slots=32 
```

但是问题仍然存在，并且仍然发出与上面相同的错误消息。为了让我的程序仅在 serverA 上运行，我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:11:24.430

Open MPI 中的默认主机文件是系统范围的，即它的位置是在构建和安装库时确定的，并且没有用户特定的版本。可以通过运行如下`ompi_info`命令获得实际位置：

```
$ ompi_info --param orte orte | grep orte_default_hostfile
MCA orte: parameter "orte_default_hostfile" (current value: <LOOK HERE>, data source: default value) 
```

您可以通过几种不同的方式覆盖主机列表。首先，您可以`-hostfile`通过`mpirun`. 如果是这样，您不必在其中放置具有零插槽的主机 - 只需省略您无权访问的机器。例如：

```
localhost slots=10 max_slots=10
serverA slots=24 max_slots=24 
```

`orte_default_hostfile`您还可以通过设置MCA 参数来更改默认主机文件的路径：

```
$ mpirun --mca orte_default_hostfile /path/to/your/hostfile -n 10 executable 
```

`--mca`您可以在导出的环境变量中设置值，而不是每次都传递选项`OMPI_MCA_orte_default_hostfile`。这可以在 shell 的 dot-rc 文件中设置，例如，`.bashrc`如果使用 Bash。

您还可以通过`-H`(or `-host`) 选项直接指定节点列表。

# iphone - 从视图控制器导航回来后，uiview 动画不会调用

> ID：14475838
> 
> 赞同：3
> 
> 时间：2013-01-23T09:04:15.077
> 
> 标签：iphone, animation, ios6

我在 viewDidAppear 中给出一个无限重复的 uianimation：通过下面给出的代码

```
[UIView beginAnimations:@"theAnimation" context:NULL];
[UIView setAnimationDuration:2];

[UIView setAnimationRepeatCount:FLT_MAX];
[UIView setAnimationRepeatAutoreverses:YES];
[startButton setAlpha:.5];
[UIView setAnimationDelegate:self];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];

[UIView commitAnimations];
[super viewDidAppear:YES]; 
```

但是当我使用 pushViewController 导航到某个页面并返回到同一个视图控制器时，viewDidAppear 正在调用但动画不起作用。并且在使用 presentViewController 时工作正常。请任何人帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:29:34.093

尝试`[super viewDidAppear:YES];`在动画代码之前调用。

# c# - 在 wpf 中复制 Treeview 项

> ID：14475841
> 
> 赞同：0
> 
> 时间：2013-01-23T09:04:30.757
> 
> 标签：c#, .net, wpf, treeview, copy

如何在我的中启用复制，`treeviewitem`以便我可以复制 treeview selecteditem 中的文本并将其粘贴到其他地方。我在 wpf 的树视图中找不到这样的属性。

这是我的代码

```
<TreeView 
    SelectedItemChanged="treeView1_SelectedItemChanged" 
    HorizontalContentAlignment="Stretch">
    <TreeViewItem Header="Intution Studio" ItemsSource="{Binding Main}">
        <TreeViewItem.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">
                <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                <Setter Property="FontWeight" Value="Normal" />
                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="FontWeight" Value="Bold" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </TreeViewItem.ItemContainerStyle>
        <TreeViewItem.ContextMenu>
            <ContextMenu ItemsSource="{Binding}">
                <MenuItem Command="Copy">
                    <!-- (can't enable copy option) -->
                    <MenuItem.Icon>
                        <Image Source="Images\copy.png" Width="20" Height="20"/>
                    </MenuItem.Icon>
                </MenuItem>
            </ContextMenu>
        </TreeViewItem.ContextMenu>
        <TreeViewItem.Resources>
            <HierarchicalDataTemplate  DataType="{x:Type TextBlock}">
                <!-- ... -->
            </HierarchicalDataTemplate>
        </TreeViewItem.Resources>
    </TreeViewItem>
</TreeView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:19:24.830

编辑：抱歉 WPF 不支持。

您应该通过克隆模型中的基础数据来解决这个问题。如果您没有 MVVM 或必须本身克隆视觉控件，唯一合理的解决方案似乎是将其序列化为 xaml，然后从中重建它。

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/209597f0-0e8b-4fbb-a69d-a6479ed96187](http://social.msdn.microsoft.com/Forums/en/wpf/thread/209597f0-0e8b-4fbb-a69d-a6479ed96187)

# cocoa - 另一个 Cocoa：_NSDisplayOperationStack 崩溃；也需要指导

> ID：14475842
> 
> 赞同：2
> 
> 时间：2013-01-23T09:04:31.400
> 
> 标签：cocoa, constraints, nslayoutconstraint

就像[这里](https://stackoverflow.com/questions/9818419/cocoa-crash-in-nsdisplayoperationstack-need-guidance)提出的问题一样，我也遇到了 NSDisplayOperationStack 的问题。不过，让我先说明一下上下文。

我有一个窗口，其中包含一个`view`，其中`tabView`有几个按钮、文本视图和标签。内部`view`来自`tabview`不同的NIB，它使用自动布局（就像所有的视图、按钮等一样）并设置了约束。

约束在 IB 中进行，不包括在 WindowController 中进行的单个约束。此约束将 的 附加`view`到它的超级视图，并以and`tabView`的形式提供视觉约束。在该约束旁边，没有以编程方式制作或添加任何约束。`@"H:|[viewInsideTheTabView]|``@"V:|[viewInsideTheTabView]|`

在这种情况下，我运行并测试了我的应用程序，只是在多次调整窗口大小后才看到以下错误。

错误：

**`*** Assertion failure in -[_NSDisplayOperationStack exitDisplayOperationForWindow:], /SourceCache/AppKit/AppKit-1138.51/AppKit.subproj/NSDisplayOperationStack.m:343 Exception _NSDisplayOperationStack underflow raised during heart beat. Ignoring....`**

引发此异常时，应用程序将冻结并且不再响应。我已经检查了每个按钮、视图等是否有并发绘图，但没有一个（至少这是 IB 告诉我的）。

有没有人遇到同样的错误并知道如何应对？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:17:36.900

看看我在你所指的范围内的[答案](https://stackoverflow.com/a/14649260/674648)，它可能有用......我的问题也只发生在 OSX 10.7 中，而不是 OSX 10.8 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:08:44.520

我尝试在 OSX 10.8 上使用相同的应用程序（并多次调整大小），但它从未崩溃。在我看来，Apple 在 10.8 上修复了很多（包括这个）约束问题。

至少在我看来，这使得 10.7 看起来像是它们约束的测试用例。并为该评论添加一些理由；大多数用于动画约束的方法在 10.8 及更高版本中可用。

仍然; 如果有人可以反驳这个答案，请这样做！

# android - 如何使用系统特权以编程方式确定和启用/禁用 2g 或 3g？

> ID：14475843
> 
> 赞同：0
> 
> 时间：2013-01-23T09:04:40.030
> 
> 标签：android

如何以编程方式确定和启用/禁用 2g 或 3g？假设我有一个使用系统密钥签名的应用程序。我想了解如何禁用或启用 3g。

# linux - 静态内核数据结构

> ID：14475845
> 
> 赞同：1
> 
> 时间：2013-01-23T09:04:41.753
> 
> 标签：linux, kernel

我知道linux内核有系统调用表来处理系统调用，还有中断描述符表来处理中断。

这两个表在启动过程后不应更改。

除了内核使用的系统调用表和IDT之外，还有其他数据结构吗？（设置过程后不应修改）

先感谢您

# h2 - H2 数据库中的错误，同时运行多个测试

> ID：14475846
> 
> 赞同：1
> 
> 时间：2013-01-23T09:04:43.483
> 
> 标签：h2, liquibase, embedded-database

当我单独运行每个测试时，它就会通过。但是，当我运行所有测试时，它们都失败了。下面是一个此类实例的堆栈跟踪。

还有其他测试也会失败，但有类似的例外。我已经尝试了这里建议的所有方法，例如使用`MVCC=true`and `DB_CLOSE_DELAY=-1`，但仍然不行。

原因：org.springframework.beans.factory.BeanCreationException：创建名为“dataSource”的bean时出错：FactoryBean在创建对象时抛出异常；嵌套异常是 com.copyright.rup.common.test.integ.db.embedded.exceptions.EmbeddedDatabaseOperationException：在 org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport. java:149) at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442) at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102) .beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:43:59.613

[请参阅数据库 URL 的文档](http://h2database.com/html/features.html#database_url)。

您正在使用内存数据库。打开第二个连接将为您提供一个新数据库。

相反，我建议使用持久性数据库或命名的内存数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:13:46.193

**

## 如果多个类尝试访问相同的资源，则会出现此错误。最好将它们保存在不同的包中，然后执行它们

**

# javascript - Jquery Ajax 调用，不调用 Success 或 Error

> ID：14475853
> 
> 赞同：32
> 
> 时间：2013-01-23T09:05:23.880
> 
> 标签：javascript, web-services, jquery

> **可能重复：**
> [如何从异步调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我正在使用 Jquery Ajax 调用服务来更新值。

```
function ChangePurpose(Vid, PurId) {
    var Success = false;
    $.ajax({
        type: "POST",
        url: "CHService.asmx/SavePurpose",
        dataType: "text",
        data: JSON.stringify({ Vid: Vid, PurpId: PurId }),
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            Success = true;//doesn't go here
        },
        error: function (textStatus, errorThrown) {
            Success = false;//doesn't go here
        }

    });
    //done after here
    return Success;
} 
```

和服务：

```
[WebMethod]
public string SavePurpose(int Vid, int PurpId)
{
    try 
    {
        CHData.UpdatePurpose(Vid, PurpId);
        //List<IDName> abc = new List<IDName>();
        //abc.Add(new IDName { Name=1, value="Success" });
        return "Success";
    }
    catch (Exception ex)
    {
        throw new Exception(ex.Message);
    }
} 
```

正在从 AJAX 成功调用该服务。**价值也在改变。**但是在服务之后，**success:**或**error:**函数**没有被调用**，在这种情况下，success 应该被调用但它不起作用。

我使用了firebug，发现成功或错误功能被跳过并直接转到`return Success;`

似乎找不到代码有什么问题。

**更新：** 添加`async: false`修复了问题

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T09:12:56.127

将您的代码更改为：

```
function ChangePurpose(Vid, PurId) {
    var Success = false;
    $.ajax({
        type: "POST",
        url: "CHService.asmx/SavePurpose",
        dataType: "text",
        async: false,
        data: JSON.stringify({ Vid: Vid, PurpId: PurId }),
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            Success = true;
        },
        error: function (textStatus, errorThrown) {
            Success = false;
        }
    });
    //done after here
    return Success;
} 
```

您只能从`synchronous`函数返回值。否则你将不得不制作一个`callback`.

所以我刚刚添加`async:false,`到您的 ajax 调用中

**更新：**

jquery ajax 调用默认是异步的。因此，当 ajax 加载完成时，将调用成功和错误函数。但是您的 return 语句将在 ajax 调用开始后立即执行。

**更好的方法是：**

```
 // callbackfn is the pointer to any function that needs to be called
     function ChangePurpose(Vid, PurId, callbackfn) {
        var Success = false;
        $.ajax({
            type: "POST",
            url: "CHService.asmx/SavePurpose",
            dataType: "text",
            data: JSON.stringify({ Vid: Vid, PurpId: PurId }),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                callbackfn(data)
            },
            error: function (textStatus, errorThrown) {
                callbackfn("Error getting the data")
            }
        });
     } 

     function Callback(data)
     {
        alert(data);
     } 
```

并将ajax称为：

```
 // Callback is the callback-function that needs to be called when asynchronous call is complete
 ChangePurpose(Vid, PurId, Callback); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-23T09:17:25.793

尝试将 ajax 调用封装到一个函数中，并将 async 选项设置为 false。请注意，此选项自 jQuery 1.8 起已弃用。

```
function foo() {
    var myajax = $.ajax({
        type: "POST",
        url: "CHService.asmx/SavePurpose",
        dataType: "text",
        data: JSON.stringify({ Vid: Vid, PurpId: PurId }),
        contentType: "application/json; charset=utf-8",
        async: false, //add this
    });
    return myajax.responseText;
} 
```

你也可以这样做：

```
$.ajax({
    type: "POST",
    url: "CHService.asmx/SavePurpose",
    dataType: "text",
    data: JSON.stringify({ Vid: Vid, PurpId: PurId }),
    contentType: "application/json; charset=utf-8",
    async: false, //add this
}).done(function ( data ) {
        Success = true;
}).fail(function ( data ) {
       Success = false;
}); 
```

您可以阅读有关[jqXHR jQuery 对象的更多信息](http://api.jquery.com/jQuery.ajax/#jqXHR)

# java - 提交jsp时请求的资源不可用

> ID：14475854
> 
> 赞同：1
> 
> 时间：2013-01-23T09:05:34.227
> 
> 标签：java, jakarta-ee

我一直在尝试这个简单的示例，但是在提交 JSP 页面时遇到了这个错误。我已经尝试了之前给出的所有建议，但仍然出现相同的错误。下面是代码：

你好.jsp

```
<form name="formAction" action="HelloServlet" method="GET">
Login Name:<input type="text" name="username"><br>
Password:<input type="password" name="Password"><br>
<input type="submit" value="submit"> 
```

HelloServlet.java

```
public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest pRequest, HttpServletResponse pResponse)
        throws ServletException, IOException {
       // TODO Auto-generated method stub
       // my code
    }
} 
```

web.xml

```
<servlet>
    <servlet-name>HelloName</servlet-name>
    <servlet-class>com.Login.HelloServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>HelloName</servlet-name>
    <url-pattern>/Hello</url-pattern>
</servlet-mapping> 
```

请帮帮我。我正在使用 JBoss，并且我检查了我所有的文件夹结构是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:08:29.903

`<url-pattern>/Hello</url-pattern>`

`<form name="formAction" action="HelloServlet" method="GET">` url pattern and form action are different.

Use `<url-pattern>/HelloServlet</url-pattern>`

# python - Matplotlib 子图内容使用 set_xlim、set_ylim 消失

> ID：14475856
> 
> 赞同：3
> 
> 时间：2013-01-23T09:05:36.183
> 
> 标签：python, matplotlib

我正在尝试构建一个图，其中我有固定的行数，但每行的列数不同。我用于绘图的代码相当于：

```
import matplotlib.pyplot as pl
pl.figure()
pl.ion()
pl.subplot(2,1,1)
pl.title("Sets the title for top plot")

plotData(data[0]) # Function that plots data in this first row

for i in range(3):
    pl.subplot(2,3,4+i)
    pl.title("Sets the title of each subplot in second row")
    plotData(data[i+1]) # Plots the data in second row 
```

现在由于某种原因，绘制在第二行子图中的数据消失了。当我调试它时，它似乎一直存在，直到从 for 循环中的 plotData() 函数返回（或者可能在调用下一个子图命令时 - 但这并不能解释为什么最后一个子图为空......）。

## 编辑：

`plotData()`触发问题的函数末尾有代码：

```
pl.gca().set_xlim(0,15)
pl.gca().set_ylim(0,15) 
```

这是否意味着我在绘制数据后无法设置 x、y 限制，或者我在这里做错了什么？

可以在[此处找到显示问题的最小示例的 pastebin](http://pastebin.com/ygvCppLN)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:37:37.473

好吧，那太尴尬了。如果您查看 pastebin 上的代码，问题是我设置的 xlim 和 ylim 没有考虑到我切换坐标系方向（在 y 方向）的事实。在`plotData()`：

```
for i,dset in enumerate(data):
    x = np.array([point['x'] for point in dset])
    y = np.array([-point['y'] for point in dset]) 
```

我的调用`set_xlim`并`set_ylim`完全按照他们应该做的，只是在我设置的限制下，数据在这些图中不再可见（因为我在数据上切换了 y 轴的符号而不是在限制上） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:23:16.937

我同意@Zhenya - 我在最新的 matplotlib 中看不到这个功能（开发版本 1.3-dev 并怀疑它至少在 v1.2.0 中修复，但甚至可能早在 v1.0.1 中）。

高温下，

**更新：添加了 mpl v1.2.0 的输出**：

```
> python
Python 2.7.2
Type "help", "copyright", "credits" or "license" for more information.
>>> import matplotlib
>>> print matplotlib.__version__
1.2.0
>>> 
>>> import matplotlib.pyplot as plt
>>> 
>>> plt.ion()
>>> 
>>> plt.subplot(2,1,1)
<matplotlib.axes.AxesSubplot object at 0x283d790>
>>> plt.title("Sets the title for top pltot")
<matplotlib.text.Text object at 0x2851f50>
>>> 
>>> plt.plot(range(10, 0, -1))
[<matplotlib.lines.Line2D object at 0x2c40790>]
>>> 
>>> for i in range(3):
...     plt.subplot(2,3,4+i)
...     plt.title("Sets the title of each subplot in second row")
...     plt.plot(range(10))
... 
<matplotlib.axes.AxesSubplot object at 0x2c40e90>
<matplotlib.text.Text object at 0x2c64a90>
[<matplotlib.lines.Line2D object at 0x2c6e990>]
<matplotlib.axes.AxesSubplot object at 0x2c6ec10>
<matplotlib.text.Text object at 0x2e6c810>
[<matplotlib.lines.Line2D object at 0x2e78110>]
<matplotlib.axes.AxesSubplot object at 0x2e78390>
<matplotlib.text.Text object at 0x2e8ced0>
[<matplotlib.lines.Line2D object at 0x2e98610>] 
```

![输出](../Images/978d7e50da0fd065d510758b45309cd2.png)

# objective-c - 选定的菜单项颜色未对齐？

> ID：14475859
> 
> 赞同：2
> 
> 时间：2013-01-23T09:05:47.103
> 
> 标签：objective-c, cocoa, nscollectionview, nscolor, nsbox

我认为一张图片胜过一千个单词。

![在此处输入图像描述](../Images/efdddb8ccc3253069251384154721db4.png)

您在这张图片中看到的是`NSBox`Subclass in a `NSViewCollection`。我将填充颜色设置为“选定的菜单项颜色”是界面生成器。

为什么颜色会这样？

编辑：阅读[这篇 SO 帖子后](https://stackoverflow.com/questions/9683192/custom-nsmenu-like-view-not-displaying-selectedmenuitemcolor-correctly)，我发现我可能必须设置 setPatternPhase。但是如何/在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:57:41.057

“选定的菜单项颜色”模式设计用于“菜单高”项，看起来你的 NSBox 比模式高。

也就是说，您可以使用[我的答案](https://stackoverflow.com/a/13054370/1362154 "桌线")中的代码来处理模式阶段的起源，但我认为这对您没有任何好处，因为该模式对于您的 NSBox 来说不够高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:46:08.943

受到 Smilin Brian 解决方案的启发，我想出了这个：

```
-(void) drawRect: (NSRect)dirtyRect
{
    [super drawRect:dirtyRect];
    if(mouseOver) {
        [NSGraphicsContext saveGraphicsState];

        CGFloat yOffset = NSMaxY([self convertRect:self.bounds toView:nil]);
        CGFloat xOffset = NSMinX([self convertRect:self.bounds toView:nil]);
        [[NSGraphicsContext currentContext] setPatternPhase:NSMakePoint(xOffset, yOffset)];

        [[NSColor selectedMenuItemColor ] setFill];
        NSRectFill(dirtyRect);
        [NSGraphicsContext restoreGraphicsState];
    }
} 
```

目前它只处理 mouseOver 事件而不是选择，但它几乎相同。

只是为了那些可能需要我使用的 NSBox 的人：

```
- (void)awakeFromNib{
    NSTrackingArea* trackingArea = [[NSTrackingArea alloc] initWithRect:self.bounds
                                                                options: (NSTrackingMouseEnteredAndExited | NSTrackingActiveInKeyWindow )
                                                                  owner:self userInfo:nil];
    [self addTrackingArea:trackingArea];
} 
```

和

```
- (void)mouseEntered:(NSEvent *)theEvent {
    mouseOver = true;
    [self setNeedsDisplayInRect:self.bounds];
    [self needsDisplay];
}

- (void)mouseExited:(NSEvent *)theEvent {
    mouseOver= false;
    [self setNeedsDisplayInRect:self.bounds];

    [self needsDisplay];
} 
```

# ruby-on-rails - 找不到没有 ID 的对象

> ID：14475862
> 
> 赞同：0
> 
> 时间：2013-01-23T09:05:54.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这让我发疯了。我不知道我做错了什么，我收到了这个错误：

```
ActiveRecord::RecordNotFound in AppointmentsController#new

Couldn't find Schedule without an ID

app/controllers/appointments_controller.rb:25:in `new' 
```

我确定这是一件简单的事情，但我看不到它。请有人指出我的问题以及如何解决它？

这是我的代码

路由.rb

```
 scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
    root :to => "Doctors#index"
    resources :specialties
    resources :branches

    resources :doctors do
      resources :appointments  
      resources :schedules  
    end
  end

  match '*path', to: redirect("/#{I18n.default_locale}/%{path}")
  match '', to: redirect("/#{I18n.default_locale}") 
```

关系

```
Class Appointment ...
  belongs_to :doctor
  belongs_to :schedule

end

Class Schedule ...
  belongs_to :doctor
  has_many :appointments
end

Class Doctor ...
  has_many :appointments, dependent: :destroy
  has_many :schedules, dependent: :destroy
end 
```

图式

```
 create_table "appointments", :force => true do |t|
    t.integer  "doctor_id"
    t.date     "adate"
    t.datetime "created_at",   :null => false
    t.datetime "updated_at",   :null => false
    t.time     "atime"
    t.string   "personal_id"
    t.string   "insurance_id"
    t.string   "prescription"
    t.string   "email"
    t.string   "full_name"
    t.integer  "schedule_id"
  end

  create_table "doctors", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "schedule"
    t.string   "prefix"
  end

  create_table "schedules", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "doctor_id"
    t.boolean  "sun"
    t.boolean  "mon"
    t.boolean  "tue"
    t.boolean  "wed"
    t.boolean  "thu"
    t.boolean  "fri"
    t.boolean  "sat"
  end 
```

控制器

```
 def new
    @schedule = Schedule.find(params[:schedule_id])
    @doctor = Doctor.find(params[:doctor_id])
    @appointment = @doctor.appointments.new
  end 
```

_形式

```
<h1><%= @doctor.name %></h1>

<%= simple_form_for([@doctor, @appointment], :html => { :multipart => true, :class => 'form-horizontal' }) do |f| %>

        <%= f.error_notification %>
        <%= f.input :full_name %>
        <%= f.input :email %>
        <%= f.input :adate, as: :date_picker %>
    <%= f.input :atime, as: :time_picker %>
    <%= f.input :personal_id %>
    <%= f.input :insurance_id %>
    <%= f.input :prescription %>

    <div class="controls"><%= f.button :submit, class: "btn btn-primary" %></div>
<% end %> 
```

导轨控制台测试：

```
Loading development environment (Rails 3.2.11)
1.9.3p125 :001 > s = Schedule.last
  Schedule Load (4.2ms)  SELECT "schedules".* FROM "schedules" ORDER BY "schedules"."id" DESC LIMIT 1
 => #<Schedule id: 2, created_at: "2013-01-23 08:40:14", updated_at: "2013-01-23 08:40:14", doctor_id: 1, sun: true, mon: true, tue: true, wed: true, thu: true, fri: true, sat: true> 
1.9.3p125 :002 > s.appointments
  Appointment Load (0.7ms)  SELECT "appointments".* FROM "appointments" WHERE "appointments"."schedule_id" = 2
 => [] 

 root        /:locale(.:format)                                          Doctors#index  
            specialties GET    /:locale/specialties(.:format)                              specialties#index  
                        POST   /:locale/specialties(.:format)                              specialties#create  
          new_specialty GET    /:locale/specialties/new(.:format)                          specialties#new  
         edit_specialty GET    /:locale/specialties/:id/edit(.:format)                     specialties#edit  
              specialty GET    /:locale/specialties/:id(.:format)                          specialties#show  
                        PUT    /:locale/specialties/:id(.:format)                          specialties#update  
                        DELETE /:locale/specialties/:id(.:format)                          specialties#destroy  
               branches GET    /:locale/branches(.:format)                                 branches#index  
                        POST   /:locale/branches(.:format)                                 branches#create  
             new_branch GET    /:locale/branches/new(.:format)                             branches#new  
            edit_branch GET    /:locale/branches/:id/edit(.:format)                        branches#edit  
                 branch GET    /:locale/branches/:id(.:format)                             branches#show  
                        PUT    /:locale/branches/:id(.:format)                             branches#update  
                        DELETE /:locale/branches/:id(.:format)                             branches#destroy  
    doctor_appointments GET    /:locale/doctors/:doctor_id/appointments(.:format)          appointments#index  
                        POST   /:locale/doctors/:doctor_id/appointments(.:format)          appointments#create  
 new_doctor_appointment GET    /:locale/doctors/:doctor_id/appointments/new(.:format)      appointments#new  
edit_doctor_appointment GET    /:locale/doctors/:doctor_id/appointments/:id/edit(.:format) appointments#edit  
     doctor_appointment GET    /:locale/doctors/:doctor_id/appointments/:id(.:format)      appointments#show  
                        PUT    /:locale/doctors/:doctor_id/appointments/:id(.:format)      appointments#update  
                        DELETE /:locale/doctors/:doctor_id/appointments/:id(.:format)      appointments#destroy  
       doctor_schedules GET    /:locale/doctors/:doctor_id/schedules(.:format)             schedules#index  
                        POST   /:locale/doctors/:doctor_id/schedules(.:format)             schedules#create  
    new_doctor_schedule GET    /:locale/doctors/:doctor_id/schedules/new(.:format)         schedules#new  
   edit_doctor_schedule GET    /:locale/doctors/:doctor_id/schedules/:id/edit(.:format)    schedules#edit  
        doctor_schedule GET    /:locale/doctors/:doctor_id/schedules/:id(.:format)         schedules#show  
                        PUT    /:locale/doctors/:doctor_id/schedules/:id(.:format)         schedules#update  
                        DELETE /:locale/doctors/:doctor_id/schedules/:id(.:format)         schedules#destroy  
                doctors GET    /:locale/doctors(.:format)                                  doctors#index  
                        POST   /:locale/doctors(.:format)                                  doctors#create  
             new_doctor GET    /:locale/doctors/new(.:format)                              doctors#new  
            edit_doctor GET    /:locale/doctors/:id/edit(.:format)                         doctors#edit  
                 doctor GET    /:locale/doctors/:id(.:format)                              doctors#show  
                        PUT    /:locale/doctors/:id(.:format)                              doctors#update  
                        DELETE /:locale/doctors/:id(.:format)                              doctors#destroy  
                               /*path(.:format)                                            :controller#:action
                               /                                                           :controller#:action
      appointment_steps GET    /appointment_steps(.:format)                                appointment_steps#index
                        POST   /appointment_steps(.:format)                                appointment_steps#create
   new_appointment_step GET    /appointment_steps/new(.:format)                            appointment_steps#new
  edit_appointment_step GET    /appointment_steps/:id/edit(.:format)                       appointment_steps#edit
       appointment_step GET    /appointment_steps/:id(.:format)                            appointment_steps#show
                        PUT    /appointment_steps/:id(.:format)                            appointment_steps#update
                        DELETE /appointment_steps/:id(.:format)                            appointment_steps#destroy 
```

# ruby-on-rails - 使用 form_tag 提交参数以更新方法会导致未定义的路由错误

> ID：14475863
> 
> 赞同：4
> 
> 时间：2013-01-23T09:05:55.740
> 
> 标签：ruby-on-rails

我有这样的表格：

```
= form_tag item_path(@item) do
  # some inputs 
```

这给出了以下 HTML：

```
<form method="post" action="/items/1" accept-charset="UTF-8">
  <!-- some inputs -->
</form> 
```

当我提交它时 - 我收到以下错误：

```
No route matches [POST] "/items/1" 
```

但是，当我对同一个项目使用 SimpleForm 时 - HTML 几乎相同并且它可以工作：

```
# code:
= simple_form_for @item do |f|
  ...
# output:
<form id="edit_item_1" novalidate="novalidate" method="post" action="/items/1" accept-charset="UTF-8">
... 
```

您在我的代码中看到任何错误吗？

如何确保我的 form_tag 将参数提交给项目更新方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:41:14.283

我不确定为什么 simple_form_for 有效。但通常 Rails form_tag 方法使用 http 方法 POST 生成表单。

```
<form method="post" 
```

因此，在您的情况下，如果您想提交表单以更新方法，那么 http 方法应该是 PUT。您可以在 rails form_tag 中显式指定 http 方法。

```
form_tag item_path(@item), :method => :put do |f| 
```

通常人们总是准备 form_for 而不是 form_tag，他们会重复使用表单模板来创建和更新。因为 form_for 将根据记录状态设置正确的 http 方法。如果记录是新的，它将设置 http 方法为 POST else PUT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:13:02.363

您是否在 routes.rb 文件中定义了路径？

```
resources :items, only: :create 
```

或者`post "/items/:id" => "items#create"`

我建议第一个

# c# - 获取经过身份验证的用户的 youtube 频道列表

> ID：14475865
> 
> 赞同：0
> 
> 时间：2013-01-23T09:05:59.473
> 
> 标签：c#, youtube-api, youtube-javascript-api, youtube.net-api, google-api-dotnet-client

我正在尝试使用[google api .net 客户端在 .Net 应用程序（具体为 Asp.net MVC 4）中显示 YouTube 分析数据](http://code.google.com/p/google-api-dotnet-client/)

我能找到的唯一示例是位于[此处](https://developers.google.com/youtube/analytics/v1/sample-application)的 JavaScript 示例，大部分我能够在 .Net 中重新创建代码，**唯一的问题是我似乎无法找到这几行的对应部分返回经过身份验证的用户的频道列表的代码**：

```
 var request = gapi.client.youtube.channels.list({
      // "mine: true" indicates that you want to retrieve the authenticated user's channel.
      mine: true,
      part: 'id,contentDetails'
    }); 
```

然后应该在我的代码中使用它：

```
 var request = youtubeAnalyiticsService.Reports.Query(
                    "channel=="+ channelId, fromDate, toDate, 
                    "views,likes,dislikes" // metrics to include in report 
                    ); 
```

我目前要做的就是在此处复制和粘贴频道 ID，因此“硬编码”它在我的情况下不实用，仅用于测试目的。

希望我错了，但是搜索了几个小时后，我认为.Net API可能缺少这部分，有人可以确认吗？如果是真的，在 .net 应用程序中是否有任何替代方法可以做到这一点？

我还猜想可能有一种直接的方法可以在 .net 应用程序中使用这部分 JavaScript 代码，但我不确定如何！

任何帮助、提示或澄清将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:43:04.447

这应该可以工作，假设您已经设置了 OAuth 2 并且`youtube`是一个`YouTubeService`已正确授权的对象：

```
ChannelsResource.ListRequest channelsListRequest = youtube.Channels.List("id");
channelsListRequest.Mine = true;
ChannelListResponse channelsListResponse = channelsListRequest.Fetch();
string channelId = channelsListResponse.Items[0].Id; 
```

# ruby - 我如何使用 watir 来测试 ruby 选择的下拉列表 jquery

> ID：14475869
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:06:08.263
> 
> 标签：ruby, jquery-plugins, watir, jquery-chosen

我需要测试一个 ruby​​ 页面，它有一些选择的下拉列表，但我没有成功从列表中选择一个选项。在我选择其中一个之前，这些选项不会显示在萤火虫中。谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:57:13.560

这将使下拉菜单出现：

```
require "watir-webdriver"
browser = Watir::Browser.new
browser.goto "http://harvesthq.github.com/chosen/"
browser.div(id: "selEA2_chzn").a.click 
```

# debugging - 黑莓“手持设备正在重置：错误：成员更改名称：”调试为黑莓设备时出错

> ID：14475870
> 
> 赞同：1
> 
> 时间：2013-01-23T09:06:10.703
> 
> 标签：debugging, blackberry, handheld

“手持设备正在重置：错误：成员更改名称：com.xxxxxx.xxxxxx.UserData.->email”

当我想在 BlackBerry 8520 上调试我的应用程序时，我在 Eclipse 上收到此错误弹出窗口。我也有测试手机 bb9700 和 bb9900，但在调试时我没有收到此错误。

任何想法？

# php - 如果 XML 节点是值节点，则 simplexml_load_string 不会创建属性数组

> ID：14475875
> 
> 赞同：2
> 
> 时间：2013-01-23T09:06:20.580
> 
> 标签：php, xml, simplexml, xml-deserialization

我正在加载一个 XML 字符串`simplexml_load_string`，如果该节点没有它自己的任何子节点，那么该节点的属性似乎没有正确映射到数组。有没有办法解决？请参阅以下`CUSTOM_PROPERTY`部分：

假设我有以下 XML：

```
<WEBSITE NAME="www.example.co.uk">
    <CATEGORY ID="35702" NAME="CatName" FILE_NAME="" LONG_DESC="" SHORT_DESC="">
        <CUSTOM>
            <CUSTOM_PROPERTY NAME="CATTYPE_INDEX">6</CUSTOM_PROPERTY>
            <CUSTOM_PROPERTY NAME="TEMPLATE_ID">0</CUSTOM_PROPERTY>
            <CUSTOM_PROPERTY NAME="DISPLAY_LIMIT">10</CUSTOM_PROPERTY>
            <CUSTOM_PROPERTY NAME="HIDE_ON_MENU">0</CUSTOM_PROPERTY>
            <CUSTOM_PROPERTY NAME="CAT_COLOUR">#01b2a8</CUSTOM_PROPERTY>
        </CUSTOM>
    </CATEGORY> 
```

当我使用以下代码时：

```
$Xml = simplexml_load_string($Str);
print_r($Xml); 
```

它返回这个：

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [NAME] => www.example.co.uk
        )

    [CATEGORY] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [ID] => 35702
                            [NAME] => CatName
                            [FILE_NAME] => 
                            [LONG_DESC] => 
                            [SHORT_DESC] => 
                        )

                    [CUSTOM] => SimpleXMLElement Object
                        (
                            [CUSTOM_PROPERTY] => Array
                                (
                                    [0] => 6
                                    [1] => 0
                                    [2] => 10
                                    [3] => 0
                                    [4] => #01b2a8
                                )

                        )

                )
        )
) 
```

`CUSTOM_PROPERTY`应该有一个`NAME`映射的属性，但它没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T09:11:51.427

您的属性在那里，但没有显示`print_r()`。请注意，这`print_r()`不是查看整个 SimpleXML 结构的可靠方法。

例子：

**[演示](http://codepad.org/RzPyZ1Q7)**

```
$obj = simplexml_load_string($xml);

foreach($obj->CATEGORY->CUSTOM->CUSTOM_PROPERTY as $custom_property)
{
  echo $custom_property->attributes()->NAME . "\n";
} 
```

输出

```
CATTYPE_INDEX
TEMPLATE_ID
DISPLAY_LIMIT
HIDE_ON_MENU
CAT_COLOUR 
```

# java - 对 Excel 中的日期和时间感到困惑

> ID：14475876
> 
> 赞同：5
> 
> 时间：2013-01-23T09:06:22.273
> 
> 标签：java, excel, time, timezone, dst

我有 Java 时间（自 1970 年 1 月 1 日以来的毫秒数）并且想将该时间写入 csv 文件，以便 Excel 可以正确解释和格式化它。我知道，excel 使用“序列日期时间”作为格式 - 这是一个浮点数，其中整数部分给出自 1900 年 1 月 1 日以来的天数，小数部分给出一天的小数部分。

我无法理解时区和夏令时处理。

[这个页面](http://www.decimaltime.hynes.net/p/dates.html#excel)说 excel 纪元（1/1/1900）基于本地（=创建 Excel 文件的计算机？）时区。这意味着如果没有计算机时区创建它的信息，序列日期并不表示唯一的时间瞬间。不是我会选择的，但是好的。

现在接受这一点，我相信我可以通过以下 Java 代码将 Java 时间转换为 Excel 序列日期（nb：我在苏黎世，CET 时区）：

```
private static final long ONE_HOUR= 60L * 60 * 1000;
private static final long ONE_DAY = 24 * ONE_HOUR;
private static final long excelEpoch; 
static{
    Calendar cal;
    cal = Calendar.getInstance(TimeZone.getTimeZone("Europe/Zurich"));
    cal.set(Calendar.YEAR, 1900);
    cal.set(Calendar.DAY_OF_YEAR, 1);
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);

    excelEpoch = cal.getTimeInMillis();
}
private static String formatForExcel(long time){
    return ""+(time-excelEpoch)/(double)ONE_DAY;
} 
```

使用它我可以打印几次：

```
public static void main(String[] args) {
    String sep = "\t"; // csv field separator

    SimpleDateFormat fmt = new SimpleDateFormat("HH:mm:ss d/M/yyyy");       
    fmt.setTimeZone(TimeZone.getTimeZone("Europe/Zurich"));

    System.out.println("Time in ms since 1/1/1970 UTC"+ sep + "Time as string" + sep + "Excel serial" + sep + "Excel serial formatted by excel");
    long startTime = 1332630000000L; // 25/3/2012 00:00 CET , shortly before change from winter time to DST
    for (long t = startTime;  t < startTime + 4*ONE_HOUR; t+=ONE_HOUR) {
        System.out.println(t + sep + fmt.format(new Date(t)) + sep + formatForExcel(t) + sep + formatForExcel(t));
    }
} 
```

哪个返回

```
Time in ms since 1/1/1970 UTC   Time as string  Excel serial    Excel serial formatted by excel
1332630000000   00:00:00 25/3/2012  40991.0 40991.0
1332633600000   01:00:00 25/3/2012  40991.041666666664  40991.041666666664
1332637200000   03:00:00 25/3/2012  40991.083333333336  40991.083333333336
1332640800000   04:00:00 25/3/2012  40991.125   40991.125 
```

请注意，从冬季时间到 DST 的变化发生在这些时间（检查第二列，缺少第 2 小时）。

现在是混乱。如果我将其粘贴到 excel 中，并为最后一列选择“格式化单元格...”，然后选择“时间”（任何格式），它会打印：

```
Time in ms since 1/1/1970 UTC   Time as string  Excel serial    Excel serial formatted by excel
1332630000000   25.03.2012 00:00    40991   0:00:00
1332633600000   25.03.2012 01:00    40991.04167 1:00:00
1332637200000   25.03.2012 03:00    40991.08333 2:00:00
1332640800000   25.03.2012 04:00    40991.125   3:00:00 
```

请注意，格式化序列日期的 excel 不会更改为 DST。所以这不是挂钟时间。

长话短说：

**我应该如何将 Java 时间转换为 Excel 才能正常工作？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:17:51.083

我*怀疑*Excel 并没有真正考虑时区。我怀疑它实际上只是将其视为“本地时间”，其中每个可能的日期/时间都是有效的。（我相信 Joda Time 用语中的“本地瞬间”——尽管我不知道它的使用范围有多广。）

我怀疑没有办法代表一个特定的*时刻*，相反，你应该：

*   将您想要表示为*当地时间*的任何日期/时间（例如“2012 年 3 月 25 日，凌晨 3 点”）
*   将其放入`Calendar`设置为使用 UTC 的
*   从`calendar.getTime().getTime()`
*   减去 1900-01-01T00:00:00Z 的“Excel epoch”值（同样，通过设置为 UTC 的日历获取）
*   除以“每天的毫”

现在[，Excel 在处理 1900 年 3 月 1 日之前的日期方面](http://support.microsoft.com/kb/214326)*也*有一个奇怪的地方，但希望这不会对你不利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:58:30.450

将浮点**“序列日期/时间”转换为“自 1970/1/1 以来的工厂”**

注意：daysFrom1900to1970 适用于谷歌电子表格日期，但可能需要对 excel 稍作调整

```
 int daysFrom1900to1970 =365*70 + 19; // Or maybe =365*70 + 17 But 19 worked.
                            int millisPerDay = 1000 * 60 * 60 * 24;
                            long millisSince1970 = (long) ((timeToSend.doubleValue() - daysFrom1900to1970) * millisPerDay );

                            Calendar dateTimeToSend = Calendar.getInstance();                               
                            dateTimeToSend.setTimeZone(TimeZone.getTimeZone("GMT"));
                            dateTimeToSend.setTimeInMillis(millisSince1970);
                            System.out.println("timeToSend:"+ new SimpleDateFormat("yyyy.MM.dd HH:mm:ss z").format(dateTimeToSend.getTime())); 
```

# java - 如何将C语言结构定义转换成Java代码？

> ID：14475886
> 
> 赞同：1
> 
> 时间：2013-01-23T09:06:51.967
> 
> 标签：java, c, dll

我正在研究`ITLSSPProc.dll`哪个具有本机方法，它在 C 语言中具有以下结构定义，但我必须用 Java 编写代码。最近三天我一直在搜索，但找不到解决方案。

```
1.typedef struct{
            unsigned __int64 FixedKey; // 8 byte number for fixed host key
            unsigned __int64 EncryptKey; // 8 Byte number for variable key
            }SSP_FULL_KEY;

            2.typedef struct{
            unsigned __int64 Generator;
            unsigned __int64 Modulus;
            unsigned __int64 HostInter;
            unsigned __int64 HostRandom;
            unsigned __int64 SlaveInterKey;
            unsigned __int64 SlaveRandom;
            unsigned __int64 KeyHost;
            unsigned __int64 KeySlave;
            }SSP_KEYS

            3.typedef struct{
            SSP_FULL_KEY Key; // the full key
            unsigned long BaudRate; // baud rate of the packet
            unsigned long Timeout; // how long in ms to wait for a reply from the slave
            unsigned char PortNumber; // the serial com port number of the host
            unsigned char SSPAddress; // the SSP address of the slave
            unsigned char RetryLevel; // how many retries to the slave for non-response
            unsigned char EncryptionStatus; // is this an encrypted command 0 – No, 1 - Yes
            unsigned char CommandDataLength; // Number of bytes in the command
            unsigned char CommandData[255]; // Array containing the command bytes
            unsigned char ResponseStatus; // Response Status (PORT_STATUS enum)
            unsigned char ResponseDataLength; // how many bytes in the response
            unsigned char ResponseData[255]; // an array of response data
            unsigned char IgnoreError; // flag to suppress error box (0 – display,1 suppress)
            }SSP_COMMAND 
```

这是我尝试过的 Java 代码，但我无法调用本机方法：

```
 public class SSP_FULL_KEY
                {
                    long FixedKey;
                    long EncryptKey;
                    public SSP_FULL_KEY(long fix, long encr)
                    {
                        FixedKey = fix;
                        EncryptKey = encr;
                    }
            }

        public class SSP_COMMAND
            {
                //string PortNumber; 
                SSP_FULL_KEY key;
                long BaudRate; // baud rate of the packet 
                long Timeout; // how long in ms to wait for a reply from the slave 
                String PortNumber; // the serial com port number of the host 
                String SSPAddress; // the SSP address of the slave 
                String RetryLevel; // how many retries to the slave for non-response 
                String EncryptionStatus; // is this an encrypted command 0 - No, 1 - Yes 
                String CommandDataLength; // Number of bytes in the command 
                String[] CommandData = new String[255]; // Array containing the command bytes 
                String ResponseStatus; // Response Status (PORT_STATUS enum) 
                String ResponseDataLength; // how many bytes in the response 
                String ResponseData[] = new String[255]; // an array of response data 
                String IgnoreError; // flag to suppress error box (0 - display,1- suppress) 

                public SSP_COMMAND(String comport)
                {
                    BaudRate = 9600;
                    Timeout = 500;
                    PortNumber =  comport;
                    RetryLevel = "5";
                    IgnoreError = "0";
                    EncryptionStatus = "0";
                    ResponseStatus = "0";
                    ResponseDataLength = "0";
                    SSPAddress = "0";
                    CommandDataLength = "0";
                    key = new SSP_FULL_KEY(012345670123, 012345670123);

                }
            } 

native method:OpenSSPComPort(SSPCOMMAND * cmd) 
```

这里我传递参数：

> ```
>  Pointer to SSP_COMMAND structure
>     Returns:
>     WORD 0 for fail, 1 for success 
> ```

并得到错误不满意的链接错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:10:13.270

看看[C 到 Java 转换器](http://www.tangiblesoftwaresolutions.com/Product_Details/CPlusPlus_to_Java_Converter_Details.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T11:53:22.693

使用从 C++ 到 java 或任何其他语言的在线转换。[关联](https://varycode.com/)

# python - 如何以pythonic方式将字符串名称从列表中放入新字符串

> ID：14475895
> 
> 赞同：1
> 
> 时间：2013-01-23T09:07:21.140
> 
> 标签：python

我想以 Pythonic 方式将列表中的所有字符串添加到具有特殊格式的新字符串中：

我有一个带有 ['Module1', 'Module2', 'Module3'] 的列表

我该如何实施？

我的方法应该是：

```
 moduleNames = ""
    for item in notFinishedModules:
      moduleNames = moduleNames + item + ", "
    moduleNames = moduleNames[:-2]
    like = 'Hello, i found ' + moduleNames + ' in your list' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:08:51.743

```
like = 'Hello, i found {} in your list'.format(', '.join(notFinishedModules)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:08:30.450

你可以使用加入：

```
like = 'Hello, i found ' + ', '.join(notFinishedModules) + ' in your list' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:09:19.467

[http://docs.python.org/2/library/stdtypes.html#str.join](http://docs.python.org/2/library/stdtypes.html#str.join)，这是模块名称的字符串，您可以选择分隔符等。

# javascript - Javascript 对象实例与返回函数

> ID：14475909
> 
> 赞同：6
> 
> 时间：2013-01-23T09:08:07.223
> 
> 标签：javascript, node.js

在javascript中创建对象有什么区别

```
test = function(a, b){
   this.calculate = function(){
      return a + b;
   }
}
obj = new test(1, 2);
console.log(obj.calculate()); 
```

和

```
test = function(a, b){
   return {
      calculate: function(){
         return a + b;
      }
   }
}
obj = test(1, 2);
console.log(obj.calculate()); 
```

我在不同的情况下都使用过这两种方法，但从来不理解它们的区别，我知道后一种方法有为永远创建函数的开销，但仍然看到它在很多情况下使用，有人可以为我澄清一下吗？我无法通过搜索找到有关此的任何信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:18:50.320

第一个还为每个实例创建函数。这种情况的唯一区别是新实例`test.prototype`在第一种情况下继承自，而`Object`在第二种情况下直接继承自。

在第一种情况下，通过将函数添加到原型中，让实例共享代码会更容易。例如：

```
var Test = function(a, b){
   this._a = a;
   this._b = b;
};

Test.prototype.calculate = function(){
   return this._a + this._b;
}; 
```

Since all instances inherit from `Test.prototype`, the `calculate` function exists only once and all instances refer to the same function.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T09:18:57.340

As Felix said in the comment, the difference is the inheritance chain. The first inherits from `test.prototype` and the second from `Object`. The consequence is that if you wanted to create the function only once and make every instance share it, you'd have to do something like this:

```
test = function (a, b) {
  this.a = a;
  this.b = b;
}

test.prototype.calculate = function () {
  return this.a + this.b;
} 
```

# asp.net - URL 路由、图像处理程序和“潜在危险的 Request.Path 值”

> ID：14475913
> 
> 赞同：42
> 
> 时间：2013-01-23T09:08:18.813
> 
> 标签：asp.net, .net, vb.net, web-config, httphandler

我已经遇到这个问题已经有一段时间了，并决定尝试通过在此处发布问题来一劳永逸地彻底解决问题。我在位于此处的 .net 4 网站中有一个图像处理程序：

[https://www.amadeupurl.co.uk/ImageHandler.ashx?i=3604](https://www.amadeupurl.co.uk/ImageHandler.ashx?i=3604) （为保护隐私而删除了实际域）

现在这工作正常，并且可以毫无问题地从 Web 服务器提供图像，我说没有问题，因为如果我访问它工作正常的 URL，图像加载，不会产生异常。但是，昨天确实有人访问了这个确切的 URL，并且引发了以下几行的异常：

```
Exception Generated
Error Message:
A potentially dangerous Request.Path value was detected from the client (?).
Stack Trace:
at System.Web.HttpRequest.ValidateInputIfRequiredByConfig() at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

Technical Information:
DATE/TIME: 23/01/2013 03:50:01
PAGE: www.amadeupurl.co.uk/ImageHandler.ashx?i=3604 
```

我理解错误消息，这不是问题我只是不明白为什么它会在这里生成，更糟糕的是我无法复制它，就像我说我点击图片加载的链接一样，没有例外。我正在使用 URL 路由并注册了要忽略的处理程序，以防这导致以下代码出现问题：

```
routes.Ignore("{resource}.ashx") 
```

我不确定为什么我会收到错误或其他什么尝试。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-23T21:13:13.243

Asp.Net 4.0+ 带有非常严格的内置请求验证，其中一部分是 url 中可能用于 XSS 攻击的潜在危险字符。以下是 url 中默认的无效字符：

`< > * % & : \ ?`

您可以在配置文件中更改此行为：

```
<system.web>
    <httpRuntime requestPathInvalidCharacters="<,>,*,%,&,:,\,?" />
</system.web> 
```

或者回到 .Net 2.0 验证：

```
<system.web>
    <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

一个非常常见的无效字符是`%`，所以如果有任何机会（攻击、网络爬虫或只是一些非标准浏览器）url 被转义，你会得到：

```
www.amadeupurl.co.uk/ImageHandler.ashx/%3Fi%3D3604 
```

而不是这个：

```
www.amadeupurl.co.uk/ImageHandler.ashx/?i=3604 
```

请注意，这`%3F`是 的转义字符`?`。Asp.Net 请求验证器认为该字符无效并引发异常：

```
A potentially dangerous Request.Path value was detected from the client (?). 
```

虽然在错误消息中，您会看到字符 (%3F) 的未转义版本，它又`?`是

[这是一篇](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)关于请求验证以及如何处理它的好文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-26T08:14:16.223

即使我遇到了这个问题，但对我来说，我不小心输入了 & 而不是 ? 在网址中

例如：

example.com/123123¶meter1=value1&paameter2=value2

但实际上它必须是：

example.com/123123?parameter1=value1&paameter2=value2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-09T04:34:59.887

一个超级旧的线程，但这有效：

```
return RedirectToAction("MyAction", new { @myParameterName = "MyParameterValue" }); 
```

如果请求将发送到不同的控制器，您还可以在操作名称之后添加控制器名称，并且还可以通过在它们之间用逗号链接它们来添加更多查询字符串参数。

# postgresql - 当我将 csv 复制到它时，postgres 如何不逃避？

> ID：14475915
> 
> 赞同：3
> 
> 时间：2013-01-23T09:08:20.967
> 
> 标签：postgresql

我想将 csv 复制到 postgres。有些值是这样的字符串`"{\"foo\": 123}"`

如果我直接在 postgres 中使用 COPY，它将转义字符串。当我从 postgres 中选择时，它会变成“{foo: 123}”，但是我很难处理，所以如何不逃避`"`. 也就是希望我`"{\"foo\": 123}"`从postgres中选择的时候能得到origin字符串

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T11:11:54.177

```
CREATE TABLE meuk
        ( bagger varchar
        );
COPY meuk(bagger) FROM stdin WITH CSV QUOTE '"' ESCAPE E'\\' ;
"{\"foo\": 123}"
\.

SELECT * from meuk; 
```

结果：

```
CREATE TABLE
    bagger    
--------------
 {"foo": 123}
(1 row) 
```

# mysql - VB.NET：将数据从 MySQL 数据库加载到 DataGridView 控件中

> ID：14475918
> 
> 赞同：0
> 
> 时间：2013-01-23T09:08:26.233
> 
> 标签：mysql, vb.net, datagridview

我想将我的 MySQL 数据库中的信息放到 DataGridView(DataGridView1) 中。

我的“MySQL”**列**是

```
ID, Username & Password 
```

连接**字符串**是

```
"server=localhost;user id=root;password=;database=exdb" 
```

我的数据库（exdb）中的表是`"users"`，我的项目中有所有必要的连接器、MySQL 导入和重新引用。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:34:11.610

是的，您可以在线搜索并找到答案。试试这个简单的代码：

```
System.Data;
System.Data.SqlClient

//create connection , replace userID/password if you have.
MySqlConnection con = 
  new MySqlConnection(@"server=localhost;user id=root;password=;database=exdb");     
con.Open();
//user the table name as per yours
MySqlDataAdapter adp = new MySqlDataAdapter("Select * from table1;" ,con);

DataSet ds = new DataSet();
adp.Fill(ds);
//change name according to your datagridview
dataGridView1.DataSource = ds;
dataGridView1.DataBind(); 
```

# python - 使用 numpy.int32 时的浮点逼近

> ID：14475922
> 
> 赞同：2
> 
> 时间：2013-01-23T09:08:37.033
> 
> 标签：python, numpy, floating-point, int

回答一个问题[为什么 scipy.stats.nanmean 给出的结果与 numpy.nansum 不同？](https://stackoverflow.com/questions/14475485/why-does-scipy-stats-nanmean-give-different-result-from-numpy-nansum)，我意识到`numpy.int32`，`float`与`int`带有`float`.

使用时是否有理由导致浮点近似`numpy.int32`

```
>>> numpy.int32(1) * 0.2
0.20000000000000001
>>> 1 * 0.2
0.2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:11:00.277

这两个表达式给出的结果值相同但类型不同：

```
In [17]: numpy.int32(1) * 0.2 == 1 * 0.2
Out[17]: True

In [18]: type(numpy.int32(1) * 0.2)
Out[18]: numpy.float64

In [19]: type(1 * 0.2)
Out[19]: float 
```

不同的输出纯粹是由于`numpy.float64`和之间的默认格式不同`float`。

如果我们反转类型，输出也会反转：

```
In [12]: float(numpy.int32(1) * 0.2)
Out[12]: 0.2

In [13]: numpy.float64(1 * 0.2)
Out[13]: 0.20000000000000001 
```

纯属显示问题。这里没有数字差异。

# reflection - Why doesn't Rebol new-line? treat the newline keyword and the newline character similarly?

> ID：14475925
> 
> 赞同：6
> 
> 时间：2013-01-23T09:08:55.490
> 
> 标签：reflection, newline, rebol

I would think that the following Rebol 3 code:

```
x: [newline 1 2]
y: [
1 2]

print x
print new-line? x
print y
print new-line? y 
```

should output:

```
<empty line>
1 2
true
<empty line>
1 2
true 
```

but what is output is:

```
<empty line>
1 2
false
1 2
true 
```

Both blocks, when reduced, should yield a newline character followed by '1' and '2' and so, IMO, should print identically. Less clear is whether new-line? on the two blocks should also give the same result since the newline keyword should be equivalent to the literal newline for this kind of test.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:32:14.373

`new-line?`检查并设置的标志`new-line`仅由 LOAD 和 MOLD 使用。对于程序中的所有其他语义目的，它可能不存在。

因此你`x`和`y`完全*不同*。注意：

```
x: [newline 1 2]
y: [
1 2]

3 = length? x
2 = length? y 
```

Rebol 的一个怪癖是它会挑选出这一位空白信息以存放在一个隐藏的地方。但可以说，换行的选择代表了在源代码中通常很重要的东西，如果你将它反射回文本中，你希望保留比其余空白更多的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T17:43:51.713

让我们从 NEWLINE 开始：`newline`是一个绑定到`char!`值的单词：

```
>> ? newline
NEWLINE is a char of value: #"^/" 
```

这是 Rebol 的 Unicode 代码点 U+000A 的转义序列，通常用作换行（“LF”）控制代码。

因此，您的第一个示例代码`[newline 1 2]`与 NEW-LINE 函数无关。它简单地描述了一个包含三个值的块：`newline`(a `word!`)、`2`(an `integer!`) 和`3`(another `integer!`)。如果您减少第一个示例中的块，您将获得另一个包含三个值的块：`char!`、`integer!`和`integer!`：

```
>> reduce [newline 1 2]
== [#"^/" 1 2] 
```

现在 PRINT 不仅 REDUCE，它还 REFORM（首先 REDUCE，然后 FORM）一个块参数。块的 FORM 将元素转换为字符串表示形式，然后将它们之间的空格连接起来：

```
>> form [1 2 3]
== "1 2 3" 
```

将这些部分放在一起，我们终于知道如何获得您在第一个示例中看到的输出：

```
>> basis: [newline 1 2 3]
== [newline 1 2 3]
>> step1: reduce basis
== [#"^/" 1 2 3]
>> step2: form step1
== "^/1 2 3"
>> print step2

1 2 3 
```

所以问题仍然存在，为什么第二个例子打印的不一样？

这是因为 FORM（由 PRINT 使用，如上所述）在从块转换为字符串时不遵守 NEW-LINE 标志。

该标志是“元数据”，与块内元素的索引位置没有什么不同。所以就像你没有元素在索引位置 8 和 6 只是因为你写了一个`[8 6]`像在某些系统上代表换行符：`[1 newline 2]`.

这最终将我们带到了难题的最后一部分：NEW-LINE？不检查给定字符串*是否*表示换行符。它检查一个块（在其当前位置）是否设置了换行标志。

# ubuntu - 跟踪 aws 中的带宽使用情况

> ID：14475926
> 
> 赞同：0
> 
> 时间：2013-01-23T09:08:57.110
> 
> 标签：ubuntu, amazon-web-services, amazon-s3, amazon-ec2, ubuntu-10.04

我正在运行基于 ruby​​ on rails 的电子商务网站。应用程序在 ec2 ubuntu 10.04 实例上运行，所有图像都存储在 s3 存储桶中。我想跟踪我们为用户或客户提供了多少 GB/TB 的数据。有没有办法追踪？？？请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:36:05.413

您的大部分网络成本可能基于从 S3 提供图像。要了解您从 S3 提供了多少数据，您应该将您的 S3 访问日志上传到 S3 中的存储桶，然后您可以使用任何知道如何处理访问日志文件的 Web 分析工具（如 webtrends.com）来分析它为你。

您可以在此处查看设置“服务器访问日志”的说明：http: [//docs.aws.amazon.com/AmazonS3/latest/dev/ServerLogs.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/ServerLogs.html)

为了能够知道您从 EC2 实例提供了多少数据，您只需使用[CloudWatch 即可](http://aws.amazon.com/cloudwatch/)。这是 AWS 的监控服务，它有大约 100 个关于各种服务的指标。您的相关指标`NetwrokOut`在相关实例上。您也可以使用 API 来获取它

```
mon-get-stats NetwrokOut --start-time 2013-01-14T23:00:00.000Z --end-time 2013-01-14T23:00:00.000Z --period 3600 --statistics "Average,Minimum,Maximum" --namespace "AWS/EC2" --dimensions "InstanceId=i-c07704a9" 
```

如果您想更好地关注在 AWS 中运行的成本，您有一个相当新的选项来以编程方式访问您的账单信息。

您可以设置一个 S3 存储桶，用于每隔几个小时上传一份 CSV 格式的详细账单信息。然后，您可以访问这些 CSV 文件并分析您在 EC2、RDS、DynamoDB 等不同部分的成本。

它为您提供了一个更好的解决方案，用于检查单个实例之外的成本状态。您可以使用 Ruby SDK 访问 S3 中的账单信息文件。

在此处查看更多详细信息：http: [//docs.aws.amazon.com/awsaccountbilling/latest/about/programaccess.html](http://docs.aws.amazon.com/awsaccountbilling/latest/about/programaccess.html)

# java - How to make program work for capital letters

> ID：14475929
> 
> 赞同：-2
> 
> 时间：2013-01-23T09:09:12.833
> 
> 标签：java, palindrome

```
// The "PalinDrome" class.
import java.awt.*;
import hsa.Console;

public class PalinDrome
{
    static Console c;           // The output console

    public static void main (String[] args)
    {
        c = new Console ();

        c.println("Please enter a word");
           String word = c.readLine ();
        int i;
        int num = word.length ();
        String str = "";
        for (i = num - 1 ; i >= 0 ; i--)
            str = str + word.charAt (i);
        if (str.equals (word))
            c.println (word + " is a palindrome");
        else
            c.println (word + " is not a palindrome");

        // Place your program here.  'c' is the output console
    } // main method
} // PalinDrome class 
```

I have created a palindrome program for my exam project. The program works fine with lower cased letters such as "mom" but will not work when there is a capital letter such as "Mom". Do you have any suggestions on what I can do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:11:08.387

使用`String#equalsIgnoreCase`而不是`equals`方法，它忽略了大小写考虑。

```
if (str.equalsIgnoreCase(word)){
  ...
}else
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:12:45.090

改变这个

```
if (str.equals (word)) 
```

至

```
if (str.equalsIgnoreCase(word)) 
```

忽略特定情况进行字符串比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:14:57.490

读取`word`变量后，修改为小写： `word = word.toLowerCase()`

其余的可以保持不变，它会工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T09:11:51.600

在检查它是否为 Palidrome 之前，只需使用字符串的 toUppercase （或 toLowerCase）

# php - how can i make time script in php?

> ID：14475937
> 
> 赞同：0
> 
> 时间：2013-01-23T09:09:38.293
> 
> 标签：php, time, timestamp

> **Possible Duplicate:**
> [PHP: producing relative date/time from timestamps](https://stackoverflow.com/questions/2690504/php-producing-relative-date-time-from-timestamps)

i search so much on internet but i didn't find how can i create time counter by using php.Exactly i want to this if i post article so i want to show users how much time before this article is posted on website .

firstly it show time in SECONDS, example : 50 sec ago.

secondly after 60 seconds it shows time in MINUTES, example : 1 min ago.

thirdly after 1 hour it will show time in HOURS, example : 2 hours ago.

fourthly after 24 hour it will show time in DAYS, example : 4 days ago.

i also find this thing by jquery but i want to do this in php with Ajax. if i find how can i do this with php after that easily i can implement this with Ajax.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:13:05.213

```
function getTimeAgoStr($time) {
    $since = abs(time() - $time);

    $chunks = array(
        array(60 * 60 * 24 * 365 , 'year'),
        array(60 * 60 * 24 * 30 , 'month'),
        array(60 * 60 * 24 * 7, 'week'),
        array(60 * 60 * 24 , 'day'),
        array(60 * 60 , 'hour'),
        array(60 , 'minute'),
        array(1 , 'second')
    );

    for ($i = 0, $j = count($chunks); $i < $j; $i++) {
        $seconds = $chunks[$i][0];
        $name = $chunks[$i][1];
        if (($count = floor($since / $seconds)) != 0) {
            break;
        }
    }

    $print = ($count == 1) ? '1 '.$name : "$count {$name}s";
    return $print;
} 
```

# c# - 从 C 语言代码执行 Jar 文件并获取返回值

> ID：14475944
> 
> 赞同：5
> 
> 时间：2013-01-23T09:10:10.963
> 
> 标签：c#, java

只是我想从 C 语言代码中执行 Jar 文件并从 jar 中获取返回值。可能吗？

如果是这样，请给我示例代码。

我尝试了以下事情，

```
 string path = "C:\\Documents and Settings\\Desktop";
            Process process = new Process();
            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.RedirectStandardError = true;
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
            process.StartInfo.CreateNoWindow = false;
            process.StartInfo.FileName = "C:\\Program Files\\Java\\jre6\\bin\\java.exe";
            process.StartInfo.Arguments = "-jar \"" + path + "\\simple.jar\"";
            process.Start();
            String s = process.StandardOutput.ReadToEnd(); 
```

这里 simple.jar 有 main 方法，它将接受争论并在控制台中打印传递的争论，否则它在控制台中不打印任何争论。我在这一行中尝试了上面的代码（String s = process.StandardOutput.ReadToEnd();) 能够读取控制台值。

但是我想通过在 jar 中传递值来执行方法，并且方法将返回我的 hashmap（集合）值（我不知道这是否可能）。请给我这方面的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T09:13:02.670

要在命令行中执行 jar 文件，请使用`java.exe -jar <jar_name>`.

看看[这里](https://stackoverflow.com/questions/206323/how-to-execute-command-line-in-c-get-std-out-results)，看看如何执行命令行程序并在`C#`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T16:35:15.227

这对我有用

```
 Process myProcess = new Process();
        myProcess.StartInfo.UseShellExecute = false;
        myProcess.StartInfo.FileName = "java";
        myProcess.StartInfo.Arguments = "-jar C:\\FileLocal\\file.jar";
        myProcess.Start(); 
```

# android - 写入 sdCard 时权限被拒绝

> ID：14475951
> 
> 赞同：8
> 
> 时间：2013-01-23T09:10:29.123
> 
> 标签：android, permissions, permission-denied

我正在尝试将文件写入 SDCard，但在 logcat 中出现错误：

```
01-24 09:03:33.647: W/System.err(3353): java.io.FileNotFoundException: /mnt/sdcard/fun/itisfun.txt: open failed: EACCES (Permission denied)
    01-24 08:24:28.007: W/System.err(3353): Caused by: libcore.io.ErrnoException: open failed: EACCES (Permission denied)
    01-24 09:03:33.756: W/System.err(3353):at libcore.io.Posix.open(Native Method) 
```

这里是我要写入 SDCard 的代码：

```
File root = null;     
try {  
    // check for SDcard   
    root = Environment.getExternalStorageDirectory();                   
    Log.i(TAG,"path.." +root.getAbsolutePath());  

    //check sdcard permission  
    if (root.canWrite()){  
        File fileDir = new File(root.getAbsolutePath()+"/fun/");  
        fileDir.mkdirs();  

        File file = new File(fileDir, "itisfun.txt");  
        FileWriter filewriter = new FileWriter(file);  
        BufferedWriter out = new BufferedWriter(filewriter);  
        out.write("I m enjoying......dude");  
        out.close();
    }
} catch(...) {
    ...
} 
```

显现：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<permission  android:name="android.permission.INTERNET"></permission> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T09:11:43.343

要写入 SD 卡，您需要在清单文件中授予权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T09:27:46.993

您需要确保您拥有@Ram 提到的权限，**并且**SD 卡已安装。您可以通过以下方式检查它是否已安装：-

```
if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) 
```

您应该优雅地处理未安装的卡，但一个常见的问题是，如果您的手机是通过 USB 电缆插入的，您可能会通过桌面操作系统安装它，这意味着它不是由 Android 安装的。

谢谢，

瑞安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:30:02.153

这是我使用的一些代码，

```
public void yourMethod(){

File root = getDir(getApplicationContext());     
    try {  
        File fileDir = new File(root.getAbsolutePath()+"/fun/");  
        fileDir.mkdirs();  

        File file = new File(fileDir, "itisfun.txt");  
        FileWriter filewriter = new FileWriter(file);  
        BufferedWriter out = new BufferedWriter(filewriter);  
        out.write("I m enjoying......dude");  
        out.close();

    } catch(...) {
    ...
    }
}

public File getDir(Context context) {

        if (android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED))
            cacheDir = new File(
                    android.os.Environment.getExternalStorageDirectory(),
                        DIRECTORY_NAME);
        else
            cacheDir = context.getCacheDir();
        return cacheDir;
    } 
```

如果没有外置存储，基本都是用手机内部缓存（不适合大文件）

读[这个](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T06:23:13.437

如果您使用的是 4.4，请在此处阅读： [http](http://www.androidcentral.com/kitkat-sdcard-changes) : //www.androidcentral.com/kitkat-sdcard-changes 基本上您无法再在驱动器上的任何位置进行读写。您只能写入您的私有目录和您已成为其所有者的目录。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-01-02T14:45:28.450

1.  检查你的目录`fun`和文件`itisfun.txt`在SD卡上是否存在，如果你想通过程序制作，你必须添加权限：
    `<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />`
    该权限允许应用程序创建文件或目录，权限：
    `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`只允许应用程序读写已经存在的文件。
2.  确保您的权限在`<application>`标签之外，通常在标签之前。

# cassandra - Cassandra 中的模型和有序列表

> ID：14475953
> 
> 赞同：0
> 
> 时间：2013-01-23T09:10:39.197
> 
> 标签：cassandra, cql, cql3

我需要建模一个按项目最后更新时间排序的项目列表。

例如考虑一个用户任务列表。每个用户都有一个任务列表，每个任务都有一个截止日期。任务可以添加到该列表中，但任务的截止日期也可以在添加到列表后更改。即，在用户A的任务列表中位于第3位的任务可能必须移动到第1位，因为任务的到期日期被更新。

我现在拥有的是以下CF：

```
Create Table UserTasks (
    user_id uuid,
    task_id timeuuid,
    new_due_date timestamp
    PRIMARY KEY (user_id, task_id)); 
```

我知道除非将其作为密钥的一部分，否则我无法对“new_due_date”进行排序。但是，如果它是密钥的一部分，那么它不能被更新，除非而是删除并重新创建。我这样做的担忧是，如果一个任务存在于 100.000 个用户的任务列表中，那么我需要进行 100.000 个选择/删除/插入序列。如果我可以按 new_due_date 排序，那就是 100.000 次更新

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:22:21.477

好吧，一种选择是如果将 PlayOrm 与 cassandra 一起使用，您可以按 user_id 分区并查询用户的 UserTasks。如果您查询时间 > 0 和时间 < MAX 的位置，它会返回一个游标（一次读取 batchSize 行），您可以以相反的顺序或简单的顺序遍历游标。此解决方案可随用户数量无限扩展，但只能扩展到每个用户数百万个任务，这可能没问题，但我对您的域不够了解。

院长

# mysql-python - 模块对象没有属性 connect

> ID：14475955
> 
> 赞同：1
> 
> 时间：2013-01-23T09:10:51.727
> 
> 标签：mysql-python

我已经安装了 Python 2.7 和 mysql-python 2.7。我想执行此代码以在 Python 中测试 MySQL：

```
import MySQLdb
db = MySQLdb.connnect(host = "localhost",
                      user="Bishnu Bhattarai",
                      passwd = "password",
                      db = "student")
cursor =db.cursor()
cursor.execute("select * from basic_info" )
numrows = int(cursor.rowcount)
for x in range(0,numrows):
    row = cursor.fetchall()
    print row[0],"-->",row[1] 
```

但它显示了错误：

```
Traceback (most recent call last):
  File "C:\Users\Bishnu\Desktop\database", line 2, in <module>
    db = MySQLdb.connnect(host = "localhost",
AttributeError: 'module' object has no attribute 'connnect' 
```

问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T09:12:24.533

`connect`尝试从:)中删除第三个“n”

# database - 如何从 vb.net 的 tablelayoutpanel 中的文本框中访问值

> ID：14475958
> 
> 赞同：1
> 
> 时间：2013-01-23T09:10:55.610
> 
> 标签：database, vb.net, dynamic

我创建了一个用于编辑数据库记录的屏幕。用户选择表格后，我在 TableLayoutPanel1 中动态添加了标签和文本框。我想知道如何访问 TableLayoutPanel1 内的 TextBox 中存在的值

我使用的代码：

```
 Dim strSQL, strSQL1 As String
    Dim ln As Integer
    Dim reader As OleDbDataReader
    Dim connection As OleDbConnection
    Dim ds As New DataSet
    connection = New OleDbConnection(CONNECT_STRING)
    connection.Open()
    ln = 0
    strSQL = " select * from syscat.columns where TABSCHEMA like 'QA1MM%' and TABNAME like 'SKU_STR_LIST' with ur  "
    RichTextBox1.Text = RichTextBox1.Text + strSQL
    Dim selectCMD As OleDbCommand = New OleDbCommand(strSQL, connection)
    reader = selectCMD.ExecuteReader
    MessageBox.Show("Column: " & reader(0) & " ")
    While reader.Read()
        If String.IsNullOrEmpty(reader(0)) Then

        Else
            TableLayoutPanel1.ColumnCount = 2
            TableLayoutPanel1.RowCount = 20
            Dim aLabel As New System.Windows.Forms.Label
            Dim aTextBox As New System.Windows.Forms.TextBox
            aLabel.Name = "New Label"
            aLabel.Text = reader(0).Text
            TableLayoutPanel1.Controls.Add(aLabel, 0, ln)
            TableLayoutPanel1.Controls.Add(aTextBox, 1, ln)
            ln = ln + 1
        End If
    End While 
```

如何访问我在 TableLayoutPanel1 中动态添加的 aTextBox 中存在的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:51:03.967

首先，您需要在 TextBox 上设置一个名称。基本上是 aTextbox.Name = "TextBox1"。然后您应该能够使用以下命令找到控件：

```
Control c =  TableLayoutPanel1.Controls.Find("TextBox1",true) 
```

但是请记住，这将为您提供控件，而不是文本框。因此，以您认为合适的任何方式对其进行类型转换。

```
Ctype(c,TextBox)
DirectCast(c,TextBox) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:27:18.867

正如 WozzeC 所说，您需要为文本框起一个唯一的名称，可能类似于

```
 aTextBox.Name = "TextBox" & ln 
```

然后你可以这样找到它

```
Dim words = TableLayoutPanel1.Controls("Textbox1").Text 
```

或者如果它在同一个循环中

```
 Dim words = TableLayoutPanel1.Controls("Textbox" & ln).Text 
```

# sql - 如何从同时保持打数和件数的表中找到每个月的数量总和？

> ID：14475965
> 
> 赞同：1
> 
> 时间：2013-01-23T09:11:10.773
> 
> 标签：sql, ms-access

我正在绘制图表以显示每个产品每个月放置的数量总和。但是由于我的表在“打”中保留了一些，在“一块”中保留了一些，我不知道如何在 SQL 上得出这个总和。所以请你帮帮我。非常感谢你。

下面是我的表格和数据样本......

```
tbl_order
od_id | pd_id | od_qty | od_qty_unit | showndate
  01  |  01   |   1    |  dz         |   12/6/12
  02  |  01   |   1    |  pcs        |   13/6/12
  03  |  01   |   2    |  dz         |   15/6/12
  04  |  02   |   3    |  dz         |   15/6/12
  05  |  03   |   10   |  pcs        |   18/6/12
  06  |  01   |   3    |  dz         |   1/8/12 
```

我想要的结果应该是“六月”月份的数量总和

```
pd_id | od_qty
  01  |  37
  02  |  36
  03  |  10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:13:23.770

在 MS Access SQL 中，使用 IIF：

```
SELECT tbl_order.pd_id, 
       Sum(IIf([od_qty_unit]='dz',[od_qty]*12,[od_qty])) AS Qty
FROM tbl_order
GROUP BY tbl_order.pd_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:28:07.587

我在 MS-Access 中没有做太多工作，但这就是我在 MSSQL 上解决它的方法。据我所知，语法非常相似（访问中缺少 MSSQL 中存在的一些关键字），所以我希望它对你有用。如果没有别的，它可能会给你一个关于如何解决它的线索。

一般的想法是您要创建一个包含“真实”数量的项目的列。为此，我使用 CASE 开关，根据单位，我可以将数字乘以所需的倍数.. 即。1 打是 1 * 12 件。

```
DECLARE @data TABLE
(
    od_id int,
    pd_id int,
    od_qty int,
    od_qty_unit NVARCHAR(3),
    showndate DATE
)

INSERT INTO @data VALUES(1,1,1,'dz', '2012-06-12')
INSERT INTO @data VALUES(2,1,1,'pcs', '2012-06-13')
INSERT INTO @data VALUES(3,1,2,'dz', '2012-06-15')
INSERT INTO @data VALUES(4,2,3,'dz', '2012-06-15')
INSERT INTO @data VALUES(5,3,10,'pcs', '2012-06-18')
INSERT INTO @data VALUES(6,1,3,'dz', '2012-08-1')

SELECT 
    pd_id, 
    SUM(d.RealQuantity) 
FROM 
    (
        SELECT 
            pd_id,
            od_qty,
            od_qty_unit,
            CASE 
                WHEN od_qty_unit = 'pcs' THEN od_qty
                WHEN od_qty_unit = 'dz' THEN od_qty * 12
            END AS RealQuantity
        FROM @data 
        WHERE
            MONTH(showndate) = 6
            AND YEAR(showndate) = 2012
    ) AS d
GROUP by pd_id 
```

代码返回此结果：

![在此处输入图像描述](../Images/b1c7f16ff36fba7889bd0a9fb8c388f2.png)

# c# - 如何从流中读取 Access 文件 (.accdb)？

> ID：14475968
> 
> 赞同：1
> 
> 时间：2013-01-23T09:11:28.517
> 
> 标签：c#, ms-access, stream

我问了两个类似的问题：

*   [使用 OLEDB 从 Stream 读取 AccessFile 到 DataSet](https://stackoverflow.com/questions/14475561/use-oledb-to-read-accessfile-from-stream-to-dataset)

*   [通过 OpenXML SDK 读取 Microsoft Access 文件(.accdb)](https://stackoverflow.com/questions/14457461/read-microsoft-access-file-accdb-by-openxml-sdk)

我所有的尝试都是从流中读取 Access 文件 (.accdb)。我尝试使用 OLEDB 和 OpenXML SDK，但似乎它们都无法访问流。

那么，有人知道这件事吗？或者是否有任何其他解决方案可以从流中读取 Access 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:22:58.737

在后台访问数据库严重依赖文件使用。与 SQLLite 等内存数据库不同，Access Db 需要一个文件。因此，您必须使用 OLEDB、OPENXML 或通过对象模型来处理文件。

由于 .Net 4\. Streams 有一个 CopyTo 方法，您可以使用该方法将流转换为临时 accdb 文件。

```
string tempFilePath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\temp.accdb";
using (var fileStream = File.Create(tempFilePath)
{
    accDbStream.InputStream.CopyTo(fileStream);
} 
```

# jquery - 使用 jquery ajax 调用 jsf 托管 bean 方法（AjaxBehaviorEvent 侦听器处理程序）

> ID：14475969
> 
> 赞同：6
> 
> 时间：2013-01-23T09:11:29.047
> 
> 标签：jquery, ajax, jsf, managed-bean

我想知道是否有办法通过使用 jquery ajax 服务器请求直接触发 jsf 托管 bean 方法（使用 AjaxBehaviorEvent 类型参数：使用 f:ajax 时触发相同）。顺便说一下，ima jsf 开发人员和我没有找到关于使用 jquery ajax 和 Java EE 作为服务器端框架的示例，我发现的所有示例都是使用 php..所以我希望获得一个完整的示例。我认为另一种解决方法可能是在客户端使用 jquery 提交 commandLink 并通过该调用传递参数，但我更喜欢前一种解决方案，我希望它能够工作。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T22:43:40.097

干得好：

```
<script type="text/javascript">

    doAwesomeness();

</script> 
```

在您的页面中：

```
<a4j:jsFunction name="doAwesomeness" action="#{awesomeBean.awesomeMethod}"/> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T09:40:05.273

jQuery ajax 请求和 JSF ajax 请求使用不同的 js 库，我认为尝试将它们混合太多没有意义......

如果您希望从 jQuery 触发 JSF 托管 bean 操作，您最好使用 hidden`h:commandButton`来实现该目的......

JSF：

```
<h:commandButton id="someId" action="#{someBean.someMethod}" style="display:none">
    <f:ajax render="someId" execute="someId"/>
</h:commandButton> 
```

如果您想传递更多隐藏的参数，您可以在隐藏`h:commandButton` `execute`属性中添加更多隐藏的 JSF 组件 ID，这样它们的相应属性将在服务器端更新...

js

```
$("#someId").click(); 
```

* * *

另一方面，如果您想在 servlet 中使用与您的 jQuery 调用相对应的托管 bean 数据，您始终可以访问该 JSF 托管数据，如下所示：[JSF - get managed bean by name](https://stackoverflow.com/a/2633733/617373)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-19T03:57:53.323

与 islandguy 指出的相同，如果您使用 Primefaces，您将使用以下`<p:remoteCommand/>`命令：

```
<script type="text/javascript">
      doAwesomeness();
</script> 
```

和 ：

```
 <p:remoteCommand name="doAwesomeness" 
          actionListener="#{awesomeBean.awesomeMethod}"
          oncomplete="jsToExecuteOnAjaxSuccess()" /> 
```

希望这可以帮助..

# mysql - MySQL，LOAD DATA CONCURRENT LOCAL，禁用和启用键

> ID：14475973
> 
> 赞同：0
> 
> 时间：2013-01-23T09:11:38.650
> 
> 标签：mysql, concurrency, indexing, load-data-infile

**我目前使用MyISAM**引擎将数据插入到表中，

我希望`LOAD DATA`通过在 LOAD DATA 完成后构建索引来优化（*事先禁用键并在完成后启用它们*）。

从`LOAD DATA CONCURRENT`文档中，加载数据应该将记录添加到表的末尾，同时我感兴趣的是对同一个表的并发读取将继续使用键。我保证读取操作将尝试从表中读取信息，直到`LOAD DATA CONCURRENT`开始前的最后一个可用索引（自动递增 id）。

例如

`LOAD DATA CONCURRENT`将从索引 100000 开始添加数据，并将自动递增索引直到 200000。

在同一时间`SELECT * FROM TableName WHERE id <=99999 AND ...`可能会出现声明。

是否可以仅为语句在本地禁用键`LOAD DATA CONCURRENT`，以便读取操作仍将使用其`SELECT`语句中定义的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:36:40.357

我假设 1\. 您的`id`列是主键，并且 2\. 您打算使用`ALTER TABLE ... DISABLE KEYS`.

根据[手册](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)：

> ALTER TABLE ... DISABLE KEYS 告诉 MySQL 停止更新非唯一索引。(...) 当非唯一索引被禁用时，它们会被 SELECT 和 EXPLAIN 等语句忽略，否则会使用它们。

因此，主键仍将用于表单的查询

```
SELECT * FROM TableName WHERE id <=99999 
```

但是，不能仅禁用表子集上的键。

# php - Symfony2：来自选择字段的字符串值未绑定到表单对象

> ID：14475978
> 
> 赞同：2
> 
> 时间：2013-01-23T09:11:51.507
> 
> 标签：php, jquery, forms, symfony

我的应用程序包含一个包含三个选择字段/下拉列表的表单。

第一个链接到实体中的“关系”字段，并且工作正常。用户应该首先选择一个表格链接。

第二个和第三个都链接到同一实体中的字符串字段。通过 jQuery，这些选择字段会根据用户在第一个下拉列表中做出的决定填充值。

提交表单后，第二个和第三个字段出现错误：它们包含无效输入。当我检查表单对象时，它们的值没有被绑定；他们的价值观从未到来。

用于从用户收集字符串数据的选择字段如下所示：

```
->add('sourceName', 'choice', array
    (
        'label' => 'Choose source name:',
        'empty_value' => 'Please choose a table link first...',
        'choices' => array(),
        'attr' => array('class' => 'extFieldChoice'),
    ) 
```

jQuery 完成工作后，html 选择元素如下所示：

```
<select id="someId" name="someName[sourceName]" required="required" 
  class="extFieldChoice">
  <option value="first">first</option>
  <option value="second">second</option>
  <option value="manymore">Many more...</option>
</select> 
```

我怀疑错误可以在最初为空的选择数组中找到。然而，不可能用所有可能的选择来填充它，因为它们有数百个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T08:59:22.923

几天前我遇到了同样的问题，它让我疯狂地寻找解决方案，我得到了这个问题，甚至可能为时已晚我想分享我找到的解决方案，以防有人有同样的问题问题，我找到了其中三个，但似乎没有一个是完美的解决方案。

就我而言，我必须保存用户根据邮政编码选择的城市。当用户保存一个新地址时，他编写了邮政编码，然后通过 ajax 我用城市选项填写了城市选择。

我的“选择”字段声明：

```
$builder->add('city', 'choice', array(
    'label' => 'form.city',
    'read_only' => true,
    'mapped' => false,
    'required' => false,
    'empty_value' => false,
    'choices' => array('none' => 'form.empty.city'),
    'data' => null
)); 
```

问题是表单验证会寻找两件事：

1.  如果它与实体相关的表单期待实体进行验证，您可以使用“mapped”=> false 参数轻松跳过此验证。
2.  表单验证本身，如果您有一个“选择”类型字段，在表单验证时定义或不定义选项，请查看您声明的第一个选项。而且我无法仅跳过此字段的验证。

所以我找到了三种方法：

1.  使用表单事件，在将请求绑定到表单之前[$builder->addEventListener(FormEvents::PRE_BIND, function (DataEvent $event) use ($xxx) { ...});](http://aulatic.16mb.com/wordpress/2011/08/symfony2-dynamic-forms-an-event-driven-approach/) （我在链接的文章中有一个使用示例）我们对我们在 ajax 上所做的数据库进行相同的查询，我们检索值并将它们添加到 chocie 字段。如果我们在代码中思考，这是更好的方法，但是我们必须执行两次相同的查询，而我不想这样做。
2.  在我的情况下，我必须存储一个带有城市名称的字符串，因此另一种选择是将城市字段添加为隐藏字段并将整个选择插入为元素。但我不喜欢这个有很多原因，其中两个：我不喜欢在 symfony2 创建的其他表单字段之间插入一个孔的想法；另一个是它需要更多的jquery，从我的角度来看这是必要的。
3.  基于第二个选项，我根据用户所做的城市选择填写了其他一些隐藏字段，所以我只包含了一个隐藏字段来保存城市名称；提交表单后，我从选择中删除了所有选项，因此它与我定义的选择相匹配。

    ```
    $('#cityChoice').on({
        change: function(){
            var optionSelected = $(this).find('option:selected');
            $('#city').val(optionSelected.val());
            $('#latitude').val(optionSelected.data('lat'));
            $('#longitude').val(optionSelected.data('lng'));
        }
    });

    $('#myForm').on({
        submit: function(){
            $('#mySelect option').remove();
        }
    }); 
    ```

我已经决定了第三种选择，但我认为他们三个都有不好的一面。

# android - 在 tabhost 设置文本 - Android

> ID：14475980
> 
> 赞同：0
> 
> 时间：2013-01-23T09:12:08.057
> 
> 标签：android, android-tabhost

如何自动更改*tabhost*选项卡的名称？

```
TabHost tmp = (TabHost) findViewById(R.id.tabhost);
tmp.getTabWidget().getChildAt(0).findViewById(android.R.id.title).setText("Test"); 
```

`SetText(string)`对于文本视图是未定义的，为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:20:45.573

要更改选项卡的文本，您需要获取视图，**即**设置为选项卡标题的 TextView，您可以像这样更改它：

```
TabHost tabhost = getTabHost();
for(int i=0;i<tabhost.getTabWidget().getChildCount();i++) 
{
    TextView tv = (TextView) tabhost.getTabWidget().getChildAt(i).findViewById(android.R.id.title);
    tv.setText(.....);
} 
```

有关 TabHost 的更多信息，请参阅此链接 [http://developer.android.com/reference/android/widget/TabHost.html](http://developer.android.com/reference/android/widget/TabHost.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:21:07.430

```
LinearLayout rLayout = (LinearLayout) tmp.getTabWidget().getChildAt(Pos_of_ur_tab_in_tab_widget_for_which_text_to_changed);
((TextView)rLayout.getChildAt(position_of_ur_textview_child_in_tab_layout)).setText("your_text"); 
```

# regex - TFileListBox 掩码问题

> ID：14475981
> 
> 赞同：2
> 
> 时间：2013-01-23T09:12:08.743
> 
> 标签：regex, delphi

的定义[`TFileListBox.Mask`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.FileCtrl.TFileListBox.Mask)是：

> 将**Mask**设置为正则表达式以将列表框限制为与掩码匹配的文件。掩码的值是一个可能包含通配符的文件名。星号 ( `*`) 是匹配任意数量的任意字符的通配符。问号 ( `?`) 是匹配单个任意字符的通配符。文件掩码`*.*`显示所有文件，这是默认值。

`*`通配符工作正常。但是`?`通配符似乎不起作用。我正在尝试过滤具有 14 位数字的数据文件。例子是：

```
012345678909090.dat
012345678900123.dat
012345678901234.dat
012345678901235.dat
012345678901236.dat 
```

如果您将掩码设置`*.23?.dat`为最后四个数据文件，则返回。但是，如果通配符正在发挥作用`012345678900123.dat`，则不应返回第二个数据文件 ( ) 。`?`

顺便说一句，这个“问题”出现在 Raize Components TRzFileListBox 中，我想所有其他的也从 TFileListBox 派生。

有什么帮助吗？提前致谢。

# c++ - 使用opencv检查相机校准效率

> ID：14475990
> 
> 赞同：1
> 
> 时间：2013-01-23T09:12:34.270
> 
> 标签：c++, opencv, camera-calibration

我正在使用 OpenCV 进行立体相机校准。我一直在关注[本教程](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut10.html)，并取得了一些不错的成绩。但问题是，如何检查我的工作是否足以校准我的相机？

可以看到，第一张是原始相机流的截图，第二张是未失真的截图。

![第一张照片](../Images/6bd692b8032454a6d527087308ca849b.png) ![第二张图片](../Images/540210eddbeb61c8baa096414e549d20.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:55:57.087

您可以打印出棋盘格图案并直接拍摄，然后对其进行不扭曲并测量线条的直线度和平行度，并比较每个棋盘格正方形的面积。

# php - 使用 php 从网站/html页面获取所有可翻译文本

> ID：14475992
> 
> 赞同：2
> 
> 时间：2013-01-23T09:12:35.300
> 
> 标签：php, html, translation, strip-tags, language-translation

我正在尝试建立一个翻译工具来翻译网站。我想做的是`html-code`从该站点导入并获取所有可翻译的文本。

一个想法是使用`strip_tags`，但它会忽略可以翻译的字符串，例如替代文本、标题文本以及可能我还没有想到的其他字符串。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:18:56.343

我个人会使用 Symfony2 的[DOM Crowler 组件](http://symfony.com/doc/current/components/dom_crawler.html)，它是一个很好的 php DOM 函数包装器，并从那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:46:40.590

在这种情况下，您需要自己解析 HTML 并提取文本。正如您可能已经知道的那样，使用正则表达式解析 HTML 是[一个坏主意 (tm)](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。所以，唯一正确的解决方案是解析文档的 DOM。在此步骤中，您可以自由使用任何工具，包括标准[DOMDocument](http://php.net/manual/en/class.domdocument.php)类。

如果您正在寻找一些库或脚本来提供帮助，我建议您查看可用于商业用途的[html2text 。](http://code.google.com/p/iaml/source/browse/trunk/org.openiaml.model.runtime/src/include/html2text/html2text.php)如我所见，它不支持`<img>`标签的属性，但很容易修复（以`<a>`标签为例）。

如果您正在寻找一些自动文本提取，那么您绝对应该看看[Bolierpipe 之](http://code.google.com/p/boilerpipe/)类的东西。

# java - 如何选择不同的字符串？（更轻松）

> ID：14475995
> 
> 赞同：0
> 
> 时间：2013-01-23T09:12:39.617
> 
> 标签：java, string

我有`String cat = "cat1, cat1, cat1, cat1, cat2, cat2, cat2, cat3";`

我需要`String cat = "cat1, cat2, cat3";`

这该怎么做 ？

这是我的解决方案，但不是很好：

```
String[] words = cat.split(",");
Arrays.sort(words);
.... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T09:15:55.327

你可以试试这个 -

```
String cat = "cat1,cat1,cat1,cat1,cat2,cat2,cat2,cat3";
Set<String> set = new HashSet<String>(Arrays.asList(cat.split(","))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T09:18:12.833

尝试

```
String cat = "cat1, cat1, cat1, cat1, cat2, cat2, cat2, cat3";
String text = new TreeSet<String>(Arrays.asList(cat.split(", "))).toString();
String cats = text.substring(1, text.length()-1);
System.out.println(cats); 
```

这将产生您需要的字符串。

```
cat1, cat2, cat3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:21:00.630

这里：

```
//hash
HashSet<String> hs = new HashSet<String>();
String[] words = cat.split(",");
for(int i = 0;i < words.length; i++) hs.add(words[i]);

//dehash
StringBuilder builder = new StringBuilder();
Iterator it = hs.iterator();
while(it.hasNext())
{
    builder.append(it.next());
    builder.append(",");
}
String dehashed = builder.toString(); 
```

# jquery - CSS3 媒体查询 - 容器的宽度而不是屏幕的宽度？

> ID：14475997
> 
> 赞同：31
> 
> 时间：2013-01-23T09:12:44.013
> 
> 标签：jquery, css, media-queries

我还没有在这里看到这个问题，但我想知道是否有人知道是否可以基于容器或基于其宽度的父元素进行媒体查询。用户案例是当您有一个从左侧弹出的菜单并减小主窗口容器的大小时。这是一个示例网站，您可以在其中看到菜单弹出打开，但页面上的内容无法根据其新宽度而更改

[http://tympanus.net/Tutorials/FullscreenBookBlock/](http://tympanus.net/Tutorials/FullscreenBookBlock/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-01T15:56:21.770

我也一直在研究这个。到目前为止，我对 Andy Hume 的方法印象深刻[http://blog.andyhume.net/responsive-containers/](http://blog.andyhume.net/responsive-containers/) [https://github.com/ahume/selector-queries/](https://github.com/ahume/selector-queries/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:41:32.193

我认为你想要的东西与你所要求的不同。

媒体查询旨在查询特定于您使用的设备（媒体）的内容，而不是执行动画或其他视觉内容。

要重建您在此处发布的示例，重建起来相当简单，但（除了它的响应能力）与媒体查询无关。

他们创建了一个普通页面，有两种状态。在一种状态下，只有内容是可见的，而在另一种状态下，菜单是可见的，并且内容部分（采用菜单的宽度）移出屏幕。

您声明哪个元素和哪个选项应该是过渡的。这是一个示例，我配置更改元素的*宽度*或*边距*将启动一个需要 3 秒的动画：

```
div {
  transition: width 3s, margin 3s;
  -moz-transition: width 3s, margin 3s;
  -webkit-transition: width 3s, margin 3s;
  -o-transition: width 3s, margin 3s;
} 
```

这两种状态之间的切换是通过添加一个 css-class 来完成的，您看到的动画是由一个名为*transition*的 CSS3 设置配置的。

我建议阅读类似[https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)

仅供参考：我重建了类似于您展示的网站的内容，作为概念证明：http: [//jsfiddle.net/W3PF4/](http://jsfiddle.net/W3PF4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:42:00.563

不，您不能以这种方式进行媒体查询，但是您所要求的可以使用 css 来完成。我一直在为我的网站做这件事，sitepoint 的人帮了大忙 - 请参阅此处的帖子 11：[http ://www.sitepoint.com/forums/showthread.php?828454-CSS-Absolute-Positioning-Troubles&p= 5061986&viewfull=1#post5061986](http://www.sitepoint.com/forums/showthread.php?828454-CSS-Absolute-Positioning-Troubles&p=5061986&viewfull=1#post5061986)

当侧边栏打开时，它会将内容压缩到右侧并且内容中心位于其中。当然，您可以在没有居中内容的情况下执行此操作，它会按照您的意图进行。