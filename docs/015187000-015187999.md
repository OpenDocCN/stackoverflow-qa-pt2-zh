# StackOverflow 问答 15187000-15187999

# javascript - Javascript重定向超时表单提交

> ID：15187008
> 
> 赞同：-2
> 
> 时间：2013-03-03T15:03:45.893
> 
> 标签：javascript, jquery, html, css

我在将表单连接到超时数组时遇到问题。我希望它超时 5000 毫秒并在提交之前显示 DELAY。

HTML

```
<form name="thisform" action="" method="get" onsubmit="window.open('http://www.mydomain.com/'+document.thisform.url.value,'_self');return false;">
   <input name="url" type="text" />
   <input name="submit" type="submit" value="Go!" />
</form> 
```

Javascript

```
$('thisform').submit(function (e) {
    var form = this;
    e.preventDefault();
    setTimeout(function () {
        form.submit();
    }, 1000); // in milliseconds

    $("<p>Delay...</p>").appendTo("body");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:06:37.603

### 您使用了错误的选择器。

将 更改`$('thisform')`为`$('form[name="thisform"]')`。您的最终代码应如下所示：

```
$('form[name="thisform"]').submit(function (e) {
    var form = this;
    e.preventDefault();
    setTimeout(function () {
        form.submit();
    }, 1000); // in milliseconds

    $("<p>Delay...</p>").appendTo("body");
}); 
```

**解释**

选择器`$('thisform')`将选择任何标签，如`<thisform>`. 所以，既然你有一个带有`name`as的表单，`thisform`你需要使用一个选择器 like `$('form[name="thisform"]')`。希望你能明白。

# asp.net-mvc - 如何从部分视图动作中获取主控制器和动作名称

> ID：15187010
> 
> 赞同：2
> 
> 时间：2013-03-03T15:03:56.673
> 
> 标签：asp.net-mvc, asp.net-mvc-4, partial-views

我有一个控制器：

```
public class LanguageController : Controller
{
 [HttpGet]
 public ActionResult Index()
 {
   // populate viewModel from database
   return PartialView(viewModel)
 }

 [HttpPost]
 public ActionResult Index(string language)
 {
    LanguageCookie.Write(Response, language);
    return RedirectToAction(ACTION, CONTROLLER, new {culture = language});
 }
} 
```

及其部分观点：

```
@model MyModel
@using (Html.BeginForm("Index", "Language"))
{
  @Html.DropDownList(
    Model.SelectedLanguageShortName, 
    Model.AllLanguages
  )
  <input type="submit" value="Select" />
} 
```

我在 _Layout.cshtml 中呈现：

```
<div>
  @Html.Action("Index", "Language")
</div> 
```

请让我知道如何从我的 LanguageController 中获取主（非部分）控制器的 ACTION/CONTROLLER 名称。我需要在回发中设置 cookie 并希望在同一页面上重定向用户但使用首选语言的这些信息。

我找到了这个例子：

```
var rd = ControllerContext.ParentActionViewContext.RouteData;
var currentAction = rd.GetRequiredString("action");
var currentController = rd.GetRequiredString("controller"); 
```

但是 ControllerContext.ParentActionViewContext 在回发中为空。我能够在视图中得到我需要的东西，但它很难看：

```
@Html.Hidden("Controller", HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString());
@Html.Hidden("Action", HttpContext.Current.Request.RequestContext.RouteData.Values["action"].ToString()); 
```

如何在控制器范围内获得相同的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:14:40.467

何时`Index(string language)`处理 ParentActionViewContext 为空，因为这是对服务器的另一个请求，它对调用子操作的先前请求一无所知。

您可以存储整个地址并调用重定向，而不是将控制和操作存储在隐藏字段中：

```
@model MyModel
@using (Html.BeginForm("Index", "Language", new { redirectUrl = Request.Url }))
{
    @Html.DropDownList(
        Model.SelectedLanguageShortName, 
        Model.AllLanguages
    )
    <input type="submit" value="Select" />
} 
```

进而

```
[HttpPost]
public ActionResult Index(string language, string redirectTo)
{
   LanguageCookie.Write(Response, language);
   return Redirect(redirectTo);
} 
```

另一种方法是将 CONTROLER 和 ACTION 保存在 中`TempData`，但是如果有人打开您网站的多个页面，您可能会遇到问题。

第三种解决方案是使用 Ajax 调用该方法，并在响应到达时使用 javascript 重新加载页面。

# php - PDO 插入不起作用

> ID：15187011
> 
> 赞同：0
> 
> 时间：2013-03-03T15:04:06.367
> 
> 标签：php, mysql, pdo

这一天是我第一次使用 PDO。当我尝试使用 PDO 进行“插入”时，它什么也没做。

这是我的代码：

```
session_start();
if($_GET['feedback']!="")
{
    $fb = $_GET['feedback'];

    $date = date('Y-m-d H:i:s');
    $query = "INSERT INTO feedback(number, sender, content, date) VALUES (NULL,?,?,?)";
    $STH = $DBH->prepare($query);
    $STH->bindParam(1, $_SESSION['alias']);
    $STH->bindParam(2, $fb);
    $STH->bindParam(3, $date);
    $STH->execute();
} 
```

我已经尝试使用 PDO 进行“SELECT”查询，它可以工作。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:31:38.167

为什么不尝试将代码包含在 try 和 catch 块中以获取任何异常：

```
 try {

           //your code

    } catch( PDOEXception $e ) {

           echo $e->getMessage(); // display error
           exit();

    } 
```

这应该给你一个线索，出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:12:37.627

> 我该怎么办？

**错误报告。**
检查[标记 wiki](https://stackoverflow.com/tags/pdo/info)以获取示例。

> 必须将 ERRMODE_EXCEPTION 设置为连接选项，因为它会让 PDO 在连接错误时抛出异常。设置 ATTR_DEFAULT_FETCH_MODE 也是一个好主意。
> 
> 请注意，不应捕获连接错误，至少不应使用 try..catch 运算符。可以使用自定义异常处理程序，但不是必需的。特别是对于新用户来说，有未处理的异常是可以的，因为它们提供了非常丰富的信息和帮助。

# performance - 减少 reshape 的计算时间

> ID：15187017
> 
> 赞同：6
> 
> 时间：2013-03-03T15:04:37.947
> 
> 标签：performance, r, reshape

我有以下数据集，我想将其从宽格式重塑为长格式：

```
Name     Code  CURRENCY   01/01/1980   02/01/1980   03/01/1980   04/01/1980
Abengoa  4256  USD        1.53         1.54         1.51         1.52      
Adidas   6783  USD        0.23         0.54         0.61         0.62 
```

数据包含 1980 年至 2013 年每天不同公司的股票价格。因此，我的宽数据中有 8,612 列（大约 3,000 行）。现在，我正在使用以下命令将数据重塑为长格式：

```
library(reshape)
data <- read.csv("data.csv")
data1 <- melt(data,id=c("Name","Code", "CURRENCY"),variable_name="Date") 
```

但是，对于大约 50MB 大的 .csv 文件，它已经需要大约两个小时。计算时间不应该由弱硬件驱动，因为我在具有 16GB RAM 的 2.7 GHz Intel Core i7 上运行它。有没有其他更有效的方法来做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T16:34:44.847

### 基准总结：

**使用`Stack`（正如@AnandaMahto 所建议的那样）绝对
是处理较小数据集（N < 3,000）的方法。
随着数据集变大，`data.table`开始表现出色`stack`**

* * *

这是使用 data.table 的选项

```
dtt <- data.table(data)

# non value columns, ie, the columns to keep post reshape
nvc <- c("Name","Code", "CURRENCY")

# name of columns being transformed 
dateCols <- setdiff(names(data), nvc)

# use rbind list to combine subsets
dtt2 <- rbindlist(lapply(dateCols, function(d) {
    dtt[, Date := d]
    cols <- c(nvc, "Date", d)
    setnames(dtt[, cols, with=FALSE], cols, c(nvc, "Date", "value"))
}))

## Results: 

dtt2
#       Name Code CURRENCY         Date value
# 1: Abengoa 4256      USD X_01_01_1980  1.53
# 2:  Adidas 6783      USD X_01_01_1980  0.23
# 3: Abengoa 4256      USD X_02_01_1980  1.54
# 4:  Adidas 6783      USD X_02_01_1980  0.54
# 5: ... <cropped> 
```

* * *

## 使用更大的样本数据更新基准

根据@AnandaMahto 的建议，以下是使用较大（较大）样本数据的基准。 *请随时改进下面使用的任何方法和/或添加新方法。*

### 基准

```
 Resh <- quote(reshape::melt(data,id=c("Name","Code", "CURRENCY"),variable_name="Date"))
 Resh2 <- quote(reshape2::melt(data,id=c("Name","Code", "CURRENCY"),variable_name="Date"))
 DT <- quote({    nvc <- c("Name","Code", "CURRENCY"); dateCols <- setdiff(names(data), nvc); rbindlist(lapply(dateCols, function(d) { dtt[, Date := d]; cols <- c(nvc, "Date", d); setnames(dtt[, cols, with=FALSE], cols, c(nvc, "Date", "value"))}))})
 Stack <- quote(data.frame(data[1:3], stack(data[-c(1, 2, 3)])))

 # SAMPLE SIZE: ROWS = 900; COLS = 380 + 3; 
 dtt <- data.table(data);  
 benchmark(Resh=eval(Resh),Resh2=eval(Resh2),DT=eval(DT), Stack=eval(Stack), replications=5, columns=c("relative", "test", "elapsed", "user.self", "sys.self", "replications"), order="relative")
 # relative  test elapsed user.self sys.self replications
 #    1.000 Stack   0.813     0.623    0.192            5
 #    2.530    DT   2.057     2.035    0.026            5
 #   40.470  Resh  32.902    18.410   14.602            5
 #   40.578 Resh2  32.990    18.419   14.728            5

 # SAMPLE SIZE: ROWS = 3,500; COLS = 380 + 3; 
 dtt <- data.table(data);  
 benchmark(DT=eval(DT), Stack=eval(Stack), replications=5, columns=c("relative", "test", "elapsed", "user.self", "sys.self", "replications"), order="relative")
 #  relative  test elapsed user.self sys.self replications
 #      1.00    DT   2.407     2.336    0.076            5
 #      1.08 Stack   2.600     1.626    0.983            5

 # SAMPLE SIZE: ROWS = 27,000; COLS = 380 + 3; 
 dtt <- data.table(data);  
 benchmark(DT=eval(DT), Stack=eval(Stack), replications=5, columns=c("relative", "test", "elapsed", "user.self", "sys.self", "replications"), order="relative")
 # relative  test elapsed user.self sys.self replications
 #    1.000    DT  10.450     7.418    3.058            5
 #    2.232 Stack  23.329    14.180    9.266            5 
```

### 样本数据创建

```
 # rm(list=ls(all=TRUE))
  set.seed(1)
  LLLL <- apply(expand.grid(LETTERS, LETTERS[10:15], LETTERS[1:20], LETTERS[1:5], stringsAsFactors=FALSE), 1, paste0, collapse="")

  size <- 900
  dateSamples <- 380
  startDate <- as.Date("1980-01-01")

  Name <- apply(matrix(LLLL[1:(2*size)], ncol=2), 1, paste0, collapse="")
  Code <- sample(1e3:max(1e4-1, size+1e3), length(Name))
  CURRENCY <- sample(c("USD", "EUR", "YEN"), length(Name), TRUE)

  Dates <- seq(startDate, length.out=dateSamples, by="mon")
  Values <- sample(c(1:1e2, 1:5e2), size=size*dateSamples, TRUE) / 1e2

  # Calling the sample dataframe `data` to keep consistency, but I dont like this practice
  data <- data.frame(Name, Code, CURRENCY,       
                     matrix(Values, ncol=length(Dates), dimnames=list(c(), as.character(Dates)))
                    ) 

  data[1:6, 1:8]
  #        Name Code CURRENCY X1980.01.01 X1980.02.01 X1980.03.01 X1980.04.01 X1980.05.01
  # 1  AJAAQNFA 3389      YEN        0.37        0.33        3.58        4.33        1.06
  # 2  BJAARNFA 4348      YEN        1.14        2.69        2.57        0.27        3.02
  # 3  CJAASNFA 6154      USD        2.47        3.72        3.32        0.36        4.85
  # 4  DJAATNFA 9171      USD        2.22        2.48        0.71        0.79        2.85
  # 5  EJAAUNFA 2814      USD        2.63        2.17        1.66        0.55        3.12
  # 6  FJAAVNFA 9081      USD        1.92        1.47        3.51        3.23        3.68 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T22:36:48.187

从问题：

```
data <- read.csv("data.csv") 
```

和

> ...对于大约 50MB 大的 .csv 文件，已经需要大约两个小时 ...

因此，尽管 stack/melt/reshape 开始发挥作用，但我猜（因为这是您的第一个问题）这里最大的因素是`read.csv`. 假设您将其包括在您的时间安排中以及`melt`（尚不清楚）。

`read.csv`众所周知，默认参数很慢。一些快速搜索应该会显示提示和提示（例如`stringsAsFactors`，`colClasses`），例如：

*   [http://cran.r-project.org/doc/manuals/R-data.html](http://cran.r-project.org/doc/manuals/R-data.html)
*   [快速读取非常大的表作为数据框](https://stackoverflow.com/questions/1727772/quickly-reading-very-large-tables-as-dataframes-in-r)

但我建议`fread`（从`data.table`1.8.7 开始）。要`fread`以原始文本形式了解其手册页，请访问： [https ://www.rdocumentation.org/packages/data.table/versions/1.12.2/topics/fread](https://www.rdocumentation.org/packages/data.table/versions/1.12.2/topics/fread)

碰巧的是，那里的示例部分有一个 50MB 的示例，显示可以在 3 秒内读取，而不是最多 60 秒。基准开始出现在其他答案中，这很值得一看。

如果我猜对了，那么堆栈/重塑/融化的答案是下一个顺序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T17:16:42.377

在测试进行期间，我将发表我的评论作为答案供您考虑。尝试使用`stack`如下：

```
data1 <- data.frame(data[1:3], stack(data[-c(1, 2, 3)])) 
```

在许多情况下，`stack`使用这些类型的操作非常有效，并且在前几列中添加回来也很快，因为向量在 R 中是如何回收的。

就此而言，这也*可能*值得考虑：

```
data.frame(data[1:3],
           vals = as.vector(as.matrix(data[-c(1, 2, 3)])),
           date = rep(names(data)[-c(1, 2, 3)], each = nrow(data))) 
```

不过，我对这么小的数据样本进行基准测试持谨慎态度，因为我怀疑结果与实际数据集的基准测试不太可比。

* * *

### 更新：更多基准测试的结果

使用@RicardoSaporta 的基准测试程序，我`data.table`对我所谓的“手动”`data.frame`创建进行了基准测试。您可以在此处查看基准测试的结果，数据集范围从 1000 行到 3000 行，以 500 行为增量，全部包含 8003 列（8000 个数据列，加上三个初始列）。

结果可以在这里看到：[http ://rpubs.com/mrdwab/reduce-computing-time](http://rpubs.com/mrdwab/reduce-computing-time)

Ricardo 是对的——似乎有大约 3000 行与基本 R 方法产生了*巨大*差异（如果有人对可能是什么有任何解释，那将很有趣）。`stack`但是，如果性能确实是主要关注点，那么这种“手动”方法实际上甚至比.

以下是最近三轮运行的结果：

```
data <- makeSomeData(2000, 8000)
dtt <- data.table(data)
suppressWarnings(benchmark(DT = eval(DT), Manual = eval(Manual), replications = 1, 
    columns = c("relative", "test", "elapsed", "user.self", "sys.self", "replications"), 
    order = "relative"))
##   relative   test elapsed user.self sys.self replications
## 2    1.000 Manual   0.908     0.696    0.108            1
## 1    3.963     DT   3.598     3.564    0.012            1

rm(data, dateCols, nvc, dtt)

data <- makeSomeData(2500, 8000)
dtt <- data.table(data)
suppressWarnings(benchmark(DT = eval(DT), Manual = eval(Manual), replications = 1, 
    columns = c("relative", "test", "elapsed", "user.self", "sys.self", "replications"), 
    order = "relative"))
##   relative   test elapsed user.self sys.self replications
## 2    1.000 Manual   2.841     1.044    0.296            1
## 1    1.694     DT   4.813     4.661    0.080            1

rm(data, dateCols, nvc, dtt)

data <- makeSomeData(3000, 8000)
dtt <- data.table(data)
suppressWarnings(benchmark(DT = eval(DT), Manual = eval(Manual), replications = 1, 
    columns = c("relative", "test", "elapsed", "user.self", "sys.self", "replications"), 
    order = "relative"))
##   relative   test elapsed user.self sys.self replications
## 1     1.00     DT   7.223     5.769    0.112            1
## 2    29.27 Manual 211.416     1.560    0.952            1 
```

哎哟! `data.table`真的在最后一次运行中扭转了局面！

# android - 使用 Parse.com 登录 Facebook 时出现 NoClassDefFoundError

> ID：15187018
> 
> 赞同：5
> 
> 时间：2013-03-03T15:04:43.290
> 
> 标签：android, facebook, parse-platform

我目前正在使用 parse.com 作为我的 Android 应用程序的后端解决方案。我正在尝试使用 Facebook 对用户进行身份验证，目前遇到以下错误。我试图将 JARS（Parse 和 Facebook）都添加到我的项目中。我也多次清理了我的项目，但仍然出现以下错误：

错误日志：

```
03-03 15:01:18.273: E/dalvikvm(7423): Could not find class 'com.facebook.SharedPreferencesTokenCachingStrategy', referenced from method com.parse.auth.FacebookAuthenticationProvider.authenticate
03-03 15:01:18.273: W/dalvikvm(7423): VFY: unable to resolve new-instance 1011 (Lcom/facebook/SharedPreferencesTokenCachingStrategy;) in Lcom/parse/auth/FacebookAuthenticationProvider;
03-03 15:01:18.277: D/dalvikvm(7423): VFY: replacing opcode 0x22 at 0x0033
03-03 15:01:18.277: E/dalvikvm(7423): Could not find class 'com.facebook.SharedPreferencesTokenCachingStrategy', referenced from method com.parse.auth.FacebookAuthenticationProvider.restoreAuthentication
03-03 15:01:18.277: W/dalvikvm(7423): VFY: unable to resolve new-instance 1011 (Lcom/facebook/SharedPreferencesTokenCachingStrategy;) in Lcom/parse/auth/FacebookAuthenticationProvider;
03-03 15:01:18.277: D/dalvikvm(7423): VFY: replacing opcode 0x22 at 0x003b
03-03 15:01:18.277: D/dalvikvm(7423): DexOpt: unable to opt direct call 0x21d7 at 0x35 in Lcom/parse/auth/FacebookAuthenticationProvider;.authenticate
03-03 15:01:18.281: D/dalvikvm(7423): DexOpt: unable to opt direct call 0x21d7 at 0x3f in Lcom/parse/auth/FacebookAuthenticationProvider;.restoreAuthentication
03-03 15:01:18.324: D/AndroidRuntime(7423): Shutting down VM
03-03 15:01:18.328: W/dalvikvm(7423): threadid=1: thread exiting with uncaught exception (group=0x40dc6300)
03-03 15:01:18.371: E/AndroidRuntime(7423): FATAL EXCEPTION: main
03-03 15:01:18.371: E/AndroidRuntime(7423): java.lang.NoClassDefFoundError: com.facebook.SharedPreferencesTokenCachingStrategy
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.parse.auth.FacebookAuthenticationProvider.authenticate(FacebookAuthenticationProvider.java:114)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.parse.ParseUser.authenticateAsync(ParseUser.java:1096)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.parse.ParseUser.logInWithAsync(ParseUser.java:1113)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.parse.ParseUser.logInWithAsync(ParseUser.java:938)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.parse.ParseFacebookUtils.logIn(ParseFacebookUtils.java:338)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.parse.ParseFacebookUtils.logIn(ParseFacebookUtils.java:363)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.example.chartviewer.FbLoginActivity.onCreate(FbLoginActivity.java:44)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.app.Activity.performCreate(Activity.java:5008)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.os.Looper.loop(Looper.java:137)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at java.lang.reflect.Method.invoke(Method.java:511)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-03 15:01:18.371: E/AndroidRuntime(7423):     at dalvik.system.NativeStart.main(Native Method) 
```

添加罐子后的新错误日志：

```
03-03 15:15:09.472: E/AndroidRuntime(8203): FATAL EXCEPTION: main
03-03 15:15:09.472: E/AndroidRuntime(8203): java.lang.NoClassDefFoundError: com.facebook.SharedPreferencesTokenCachingStrategy
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.parse.auth.FacebookAuthenticationProvider.authenticate(FacebookAuthenticationProvider.java:114)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.parse.ParseUser.authenticateAsync(ParseUser.java:1096)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.parse.ParseUser.logInWithAsync(ParseUser.java:1113)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.parse.ParseUser.logInWithAsync(ParseUser.java:938)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.parse.ParseFacebookUtils.logIn(ParseFacebookUtils.java:338)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.parse.ParseFacebookUtils.logIn(ParseFacebookUtils.java:363)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.example.chartviewer.FbLoginActivity.onCreate(FbLoginActivity.java:44)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.app.Activity.performCreate(Activity.java:5008)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.os.Looper.loop(Looper.java:137)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at java.lang.reflect.Method.invoke(Method.java:511)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-03 15:15:09.472: E/AndroidRuntime(8203):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:10:10.513

确保选中`Java Build Path`-> `Order and Export`-tab 中的复选框。

![在此处输入图像描述](../Images/1a73e13cdf9b1c97bb30728ed4b90288.png) （图片来自[这里](https://stackoverflow.com/questions/13964392/im-getting-a-java-lang-classnotfoundexception-com-mysql-jdbc-driver/13964418#13964418)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T11:35:10.213

我通过更改 minSdkVersion(11 到 8) 得到了解决方案

# windows - Windows：复制文件直到文件不存在

> ID：15187020
> 
> 赞同：5
> 
> 时间：2013-03-03T15:04:51.867
> 
> 标签：windows, batch-file, copy, increment

我想使用 Windows 批处理文件将文件 (myfile0001.bdg) 从一个特定目录复制到另一个目录。但是我想检查目标目录中的文件是否存在，如果答案是肯定的，用0001递增文件并再次检查文件是否存在（myfile0002.bdg）等等，直到文件不存在，然后复制具有新标题的文件。

所以，如果在目标目录中，我有这些文件：

```
我的文件0001.bdg
我的文件0002.bdg
我的文件0003.bdg
我的文件0004.bdg
我的文件0005.bdg
我的文件0006.bdg

```

新文件应命名为 myfile0007.bdg。下次我将执行批处理时，新文件将是 myfile0008.bdg 等。

我知道有一个命令“如果存在”，但我不知道该怎么做。

===============

*   我在 Windows 7 x32 下
*   源目录是“C:\USERS\RAMBYTES\DOCUMENTS\”
*   目标目录是“P:\BACKUP\”
*   该文件是“MYFILE0001.BDG”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:40:29.043

像这样的东西：

```
@echo off

set source_file=C:\USERS\RAMBYTES\DOCUMENTS\MYFILE0001.BDG
set target_dir=P:\BACKUP\
set done=0

for /l %%i in (1,1,1000) do (
   call :check_and_copy %%i
   if errorlevel 1 goto :eof
)

goto :eof

:check_and_copy
  setlocal EnableDelayedExpansion
  set num=000000%1
  set fnum=!num:~-4!

  set fname=%target_dir%\myfile%fnum%.bdg
  rem echo %fname%
  if not exist "%fname%" (
     echo copying %source_file% to %fname%
     exit /b 1
  )
  exit /b 0 
```

如果目标目录中存在超过 1000 个文件，则不会进行错误处理。如果要增加文件限制，需要调整“主”for循环和子程序中数字的“格式化”

添加前导零的技巧取自这里：[https ://stackoverflow.com/a/9430912/330315](https://stackoverflow.com/a/9430912/330315)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:53:45.453

```
@ECHO OFF
SET destdir=c:\destdir
SET newname=myfile0000
FOR /f %%i IN (' dir /b /on %destdir%\myfile????.bdg ' ) DO SET newname=%%~ni
SET newname=1%newname:~-4%
SET /a newname+=1
SET newname=myfile%newname:~-4%.bdg
COPY myfile0001.bdg %destdir%\%newname% 
```

根据需要更改目标目录，并在需要时包含源目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:54:29.320

1.  取文件名。

2.  提取数字部分。

3.  检查对应的目标名称是否存在。

4.  如果是这样，

    4.1）增加数字部分；

    4.2) 如果没有超过可能的最高数字，则转到第 3 步；

    4.3) 否则终止。

5.  如果目标名称不存在，则复制具有当前数字部分的文件并终止。

尽管从算法上讲，在增加数字部分后检查 4.2 中的条件可能更自然，就像我在上面所说的那样，下面的脚本在不同的点执行检查，在循环的开头，它在提取后开始源文件名中的原始数值。在实施上，这对我来说似乎更方便。

在所有其他方面，该脚本实现了相同的算法：

```
@ECHO OFF
SET "fname=%~n1"
SET counter=1%fname:~-4%
:loop
IF %counter% GTR 19999 (
  1>&2 ECHO Cannot copy the file: no free slots.
  EXIT /B 1
)
SET "targetname=%~2\%fname:~0,-4%%counter:~1%%~x1"
IF EXIST "%targetname%" (
  SET /A counter+=1
  GOTO loop
) ELSE (
  COPY %1 "%targetname%"
) 
```

解释一些部分：

1.  `~`位置参数引用中的波浪号 ( ) 表示相应参数的*取消引用*。

    有时在脚本中，波浪号后面也直接跟一个修饰符。这里使用了两个修饰符，`n`和`x`。前者使参数仅扩展为相应的文件名（没有路径和扩展名），后者仅提取扩展名。

    您可以在命令的内置中了解有关修饰符的更多信息`FOR`（通过运行

2.  需要环境变量，因为名称部分的`fname`提取只能在环境变量上完成。特别是，表达式的`%fname:~-4`计算结果是值的最后四个字符`fname`。更具体地说，它读取：提取从末尾第 4 个字符开始的子字符串，并且由于`-4`后面没有另一个参数，包括从该点到字符串末尾的所有字符。

    另一个外观相似的表达式 ，`%fname:~0,-4%`则相反：它返回`fname` *除了*最后四个字符之外的内容。数字的含义是这样的：提取从字符串开头（偏移量 0）开始的子字符串，并跨越范围直到并包括从末尾偏移量 4 处的字符。

    这种类型的另一种表达式`%counter:~1`, 提取从第二个字符（即偏移量 1）开始到字符串结尾（没有第二个参数）的字符。

    运行`SET /?`以了解有关字符串表达式的更多信息。

3.  `counter`实施可能还需要解释。需要在文件名的`1`数字部分前面添加，以便在递增时可以正确解释和处理整个值。

    问题是，以 0 开头的数值被 CMD 命令处理器视为八进制，因此，放在`1`开头使其将数字解释为十进制，它实际上是。在构建目标文件的完整名称时，我们只需丢弃添加的`1`，这就是`%counter:~1`使用的 。

# django - Django无法分配“[ ]”：

> ID：15187021
> 
> 赞同：0
> 
> 时间：2013-03-03T15:05:07.333
> 
> 标签：django

我正在开发一个宠物商店应用程序。

该应用程序显示所有宠物商店，当您点击宠物商店时，您会看到他们的宠物。

![在此处输入图像描述](../Images/e432cb0d5915846266de4b4b985c7727.png)

我创建了一个表单，允许用户毫无问题地添加商店。：D

现在问题就在这里。当我为宠物主人创建一个表格以将他们的宠物添加到他们的商店时。我得到这个错误。

我试图让用户创建他们的宠物并将其添加到他们的商店中，而不是使用管理页面。

```
Cannot assign "[<Store: John Pet Store>]": "Pet.owner" must be a "Store" instance.
Traceback Switch to copy-and-paste view
C:\djcode\mysite\pet\views.py in fan
if form.is_valid(): 
```

我的模型.py

```
from django.db import models

class Store(models.Model):
    name = models.CharField(max_length = 20)
    number = models.BigIntegerField()
    address =models.CharField(max_length = 20)
    def __unicode__(self):
    return self.name

class Pet(models.Model):
    animal = models.CharField(max_length =20)
    description = models.TextField()
    owner = models.ForeignKey(Store)
    image = models.FileField(upload_to="images/")

    def __unicode__(self):
        return self.animal 
```

我的表格.py

```
from django import forms
from pet.models import Store
from pet.models import Pet
class StoreForm(forms.ModelForm):
    name = forms.CharField(max_length =20,widget =forms.Textarea)
    number = forms.CharField(max_length =20,widget =forms.Textarea)
    address = forms.CharField(max_length = 20,widget = forms.Textarea)

    class Meta: 
        model = Store
        fields = ('name','number','address')

class PetForm(forms.ModelForm):
    animal =forms.CharField(max_length = 20,widget = forms.Textarea)
    description =forms.CharField(max_length =20, widget = forms.Textarea)
    owner = forms.ModelMultipleChoiceField(queryset=Store.objects.all())
    image = forms.FileField()

    class Meta:
        model = Pet
        fields = ('animal','description','owner','image') 
```

我的观点.py

```
 from pet.models import Store , Pet
 from django.shortcuts import render_to_response ,get_object_or_404
 from pet.forms import StoreForm
 from django.template import RequestContext
 from django.core.urlresolvers import reverse
 from django.http import HttpResponseRedirect
 from pet.forms import PetForm

 def index(request):
    store = Store.objects.all()
    return render_to_response ('store.html',{'store':store})

 def brazil(request , animal_id):
     pets = Pet.objects.filter(owner_id=animal_id)
     return render_to_response ('animal.html',{'pets':pets})

 def create(request):
     form = StoreForm(request.POST or None)
     if form.is_valid():
         store = form.save(commit=False)
         store.save()
         if 'dog' in request.POST:
             dog = request.POST['next']
         else:
             dog = reverse('world:index')
         return HttpResponseRedirect(dog)
     return render_to_response(
         'creates.html',
         {'form':form},
         context_instance = RequestContext(request)
 )

 def fan(request):
     form = PetForm(request.POST or None)
     if form.is_valid():
         dad = form.save(commit=False)
         dad.save()
         if 'cat' in request.POST:
             cat = request.POST['next']
         else:
             cat = reverse('world:index')
         return HttpResponseRedirect(cat)
     return render_to_response(
         'fan.html',
         {'form':form},
         context_instance = RequestContext(request)
 ) 
```

我的粉丝.html

```
 <form method="POST" "action">{% csrf_token %}
    <ul>
        {{ form.as_ul }}
    </ul>
    <input type = "submit" value= "Add Pets to Store" />
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:17:16.963

```
class StoreForm(forms.ModelForm):
    class Meta: 
        model = Store

class PetForm(forms.ModelForm):
    class Meta:
        model = Pet

    def __init__(self, *args, **kwargs):
        super(PetForm, self).__init__(*args, **kwargs)
        self.fields['owner'].queryset = Store.objects.all()

def create(request):
     if request.method == 'POST':
         form = StoreForm(request.POST)
         if form.is_valid():
             form.save()

             if 'dog' in request.POST:
                 dog = request.POST['next']
             else:
                 dog = reverse('world:index')

             return HttpResponseRedirect(dog)
     return render_to_response(
         'creates.html',
         {'form':StoreForm()},
         context_instance = RequestContext(request)
 )

 def fan(request):
     form = PetForm()
     if request.method == 'POST':
         form = PetForm(request.POST)
         if form.is_valid():
             form.save()

             if 'cat' in request.POST:
                 cat = request.POST['next']
             else:
                 cat = reverse('world:index')

             return HttpResponseRedirect(cat)
     return render_to_response(
         'fan.html',
         {'form':form},
         context_instance = RequestContext(request)
 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:29:45.367

问题就在这里：

```
Cannot assign "[<Store: John Pet Store>]": "Pet.owner" must be a "Store" instance. 
```

`[<Store: John Pet Store>]`isnt a `Store`，它是一个包含对象的数组`Store`（在您的情况下只有一个）。

在您的宠物表格中，您有这条线供所有者使用：

```
owner = forms.ModelMultipleChoiceField(queryset=Store.objects.all()) 
```

但是您不希望所有者成为多选字段，否则一系列所有者将回来（现在发生了什么）。

您应该将其更改为：

```
owner = forms.ModelChoiceField(queryset=Store.objects.all()) 
```

### 从评论编辑

```
class PetForm(forms.ModelForm):
    class Meta:
        model = Pet
        fields = ('animal','description','owner','image')` 
```

# ios - 如何从 XML 页面解析图像

> ID：15187022
> 
> 赞同：0
> 
> 时间：2013-03-03T15:05:08.540
> 
> 标签：ios, parsing, xml-parsing

我有来自网站的 RSS 页面。

```
<item> 
        <title>Запорожье: Вечер 03 Mar, Sun</title>
        <link>http://www.gismeteo.ru/city/daily/5093/?462419</link> 
        <description>Облачно, температура 1..3 С, давление 753..755 мм рт.ст., ветер Юго-Западный, 6 м/с</description> 
        <category>Погода</category> 
        <enclosure url="http://img.gismeteo.ru/images/icons/new/d.sun.c2.png" length="2000" type="image/gif" /> 
        <source url="http://informer.gismeteo.ru/rss/34601.xml">GISMETEO.RU: Погода в г. Запорожье</source> 
        <guid>418461</guid> 
    </item> 
```

这是我的代码

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

{

```
if([elementName isEqualToString:@"title"]){
    xmlStringFileObject.titleString = nodecontent;
}
else if([elementName isEqualToString:@"description"]){
    xmlStringFileObject.descriptionString = nodecontent;
}
else if([elementName isEqualToString:@"category"])
{
    self.xmlStringFileObject.categoryString = nodecontent;
}

if([elementName isEqualToString:@"item"])
{

    [outputData addObject:xmlStringFileObject];

}

nodecontent=[[NSMutableString alloc]init]; 
```

}

它工作得很好，但我无法解析图像并将他加载到 UIImageView 我需要从中解析图像 `<enclosure url="http://img.gismeteo.ru/images/icons/new/d.sun.c2.png" length="2000" type="image/gif" />`。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:29:05.177

看看我是怎么做到的

```
 NSString* imageURL = urlString; //http://img.gismeteo.ru/images/icons/new/d.sun.c2.png
  NSData *imageData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:imageURL]];
  UIImage *img = [[UIImage alloc] initWithData:imageData];Or you do not know how to get url string from xml?

  UIImageView *imageView = [[UIImageView alloc] initWithImage:img]; 
```

**或者你不知道如何从 xml 中获取 url 字符串？**

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict { 
  if([elementName isEqualToString:@"source"])
     NSString *urlString = [attributeDict objectForKey:@"url"];
} 
```

# unit-testing - 最佳实践（单元）测试 Windows Azure

> ID：15187023
> 
> 赞同：9
> 
> 时间：2013-03-03T15:05:15.990
> 
> 标签：unit-testing, azure

在很短的时间内，我将开始一个基于 Windows Azure 的项目。我想知道测试 Windows Azure 项目（在持续集成中（使用 TFS 构建服务器））的经验是什么？（最终使用 TDD）

我想知道的一些事情：

*   您是否使用模拟（在您自己编写的包装类中）？
*   您使用存储模拟器吗？
*   您是否将服务部署到 Azure 并将测试从构建服务器运行到云？（费用呢）？

提前感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:31:12.220

为 Windows Azure 之外的应用程序编写单元测试的良好实践同样适用。如果您对实际测试的内容有外部依赖项，则应该模拟并注入该依赖项以进行粒度单元测试。

例如，当我使用 Windows Azure 存储队列时，我将拥有一个用于与队列本身交互的接口，因此在使用队列服务的代码中，我可以使用该接口模拟子系统并使用依赖注入来注入嘲笑。这消除了在单元测试期间实际处理仿真器的必要性。在大多数情况下，使用队列的代码的实际具体实现只不过是一个非常薄的包装器。

我个人不会追求 100% 的测试覆盖率，所以我可能没有直接的单元测试来利用包装器的具体实现。在许多情况下，我尝试进行集成测试，这些测试将运行这些包装器并运行系统的多个方面协同工作。在某些情况下，我可以在模拟器中运行集成测试（例如，对于存储操作），但在某些情况下，它们只需在访问 Windows Azure 环境的情况下运行（在使用 ACS 或服务总线的情况下）。

理想情况下，您希望拥有一组可运行的脚本，以在 Azure 中启动最少的测试服务器、部署您的解决方案并执行无法在本地完成的集成测试。然后获取结果并让脚本关闭所有内容（或者如果需要，可以选择让它运行）。然后运行集成测试套件，该套件经常使用这些脚本来检测问题，但您当然不需要每次签入时都运行它们，除非您对始终运行测试环境感到满意。如果您对在 Azure 中运行的半永久性测试环境的成本感到满意，那么只需确保将脚本用于更新部署而不是删除和重新部署以降低成本（节省与部署发生）。

我相信这个问题是一个非常主观的问题，因为您可能会得到几种不同的意见。

# r - How take only the best values from two binary files and make one binary file?

> ID：15187024
> 
> 赞同：0
> 
> 时间：2013-03-03T15:05:20.713
> 
> 标签：r, binary, correlation

I have two binary files with the same dimensions: the first represents correlation between xm and df and the second represents also correlation between xm and gh data.I want to create one map out of these two representing the best correlations.for instance: 1- read the first pixel in the correlation map between xm and df and the corresponding pixel in the correlation map between xm and gh.

2- take the best correlation value and make it blue color if it comes from xm and df,otherwise make it green if it comes from xm and gh

3- do the same for all pixels

4- get something like the map associated

Here are the two files:

```
 1- to read the first file correlation map:![enter image description here][1]

   conn <- file("C:\\corr.bin","rb")![enter image description here][2]
  corr<- readBin(conn, numeric(), size=4,  n=1440*720, signed=TRUE)
  y<-t(matrix((data=corr), ncol=720, nrow=1440))
    image(y) 
```

2- to read the second file land cover map:

```
 conne <- file("C:\\cor06.bin","rb")
  over<-readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE)
  y1<-t(matrix((data=over), ncol=720, nrow=1440))
  image(y1) 
```

3-to write the results:

```
 to.write = file(paste("/orcomplete.bin",sep=""),"wb")
     writeBin(as.double(results), to.write, size = 4) 
```

![enter image description here](../Images/785b4ab14342a5204a078d615c815719.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:18:58.007

If the dimensions of your data are the same (which in your case this is true) then you can use the `raster` package like so:

```
r <-raster(t(matrix((data=corr), ncol=720, nrow=1440)))
r1 <- raster(t(matrix((data=over), ncol=720, nrow=1440)))
m <- r > r1 #Compare the two rasters
image( m , col = c("#EF8A62" , "#67A9CF" ) ) #Hexadecimal colour specification
legend( "bottomleft" , legend = c( "Y" , "Y1") , fill = c("#EF8A62" , "#67A9CF" ) , border = "#D9D9D9" , bty = "n") 
```

![enter image description here](../Images/42f365859ad430fa5549c838d7085456.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:27:30.540

An example with base R:

```
## example data
set.seed(1)
cor1 <- runif(100)
cor2 <- runif(100)

## find max correlation
maxCor <- pmax(cor1, cor2)
## find correct color
col <- ifelse(maxCor==cor1, "blue", "green") 
```

# javascript - 如何向 javascript 对象添加方法并使用对象的变量

> ID：15187035
> 
> 赞同：0
> 
> 时间：2013-03-03T15:06:42.697
> 
> 标签：javascript, oop, object, methods

我希望能够使用对象的成员变量：

```
function Upload(file, filename, id){
    this.file=file
    this.filename=filename
    this.id=id;
};

Upload.prototype.displayImage = function(btn){
    $.canvasResize(file,
        {
            width: 160,
            height: 0,
            crop: false,
            quality: 100,
            callback: function (data)
        {
            $('#'+btn).css("background", "url("+data+")")
        }
    });
}; 
```

我像这样访问对象和方法：

```
var upload = new Upload(frontPic, frontPicName, id);
  upload.displayImage("btnFrontUploadShow"); 
```

但是我收到错误：

```
ReferenceError: file is not defined
$.canvasResize(file, 
```

为什么不能`file`在 displayImage 方法中使用变量，如何声明 displayImage 使`file`变量可以使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:22:24.567

您需要区分变量和属性。构造函数 ( `file, filename, id`) 的三个参数是该函数的 [local]*变量*，不能从外部访问。

然而，您通过为实例分配值来创建*属性*（具有相同名称）（通过[`this`关键字引用）。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)在原型方法中，您只能访问这些属性，因此您需要为它们使用点成员运算符 - 具有该名称的变量未在函数的范围内定义（如异常消息明确指出的那样）。改为使用`this.file`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T15:13:57.740

要访问对象上的任何属性，只需使用：

```
this.file
this.id
this.{nameOfProperty} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T15:13:58.557

没有办法“声明”它以便它可以在所有原型方法中使用——你必须使用`this.file`而不是`file`.

另一种方法是不使用原型方法：

```
function Upload(file, filename, id) {
    this.file = file;
    this.filename = filename;
    this.id = id;

    this.displayImage = function(btn) {
        $.canvasResize(file,
            {
                width: 160,
                height: 0,
                crop: false,
                quality: 100,
                callback: function(data)
                {
                    $('#' + btn).css("background", "url(" + data + ")")
                }
            }
        });
    };
} 
```

# python - 检查变量的类型是否是Python中的特定类型

> ID：15187038
> 
> 赞同：1
> 
> 时间：2013-03-03T15:06:54.870
> 
> 标签：python

我想检查变量的类型是否是 Python 中的特定类型。例如 - 我想检查 var`x`是否是 int 。

```
>>x=10
>>type(x)
<type 'int'> 
```

但是我怎么能比较他们的类型。我试过这个，但它似乎不起作用。

```
if type(10)== "<type 'int'>":
    print 'yes' 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:08:00.603

使用该[`isinstance()`函数](http://docs.python.org/2/library/functions.html#isinstance)测试特定类型：

```
isinstance(x, int) 
```

`isinstance()`采用单一类型或类型元组进行测试：

```
isinstance(x, (float, complex, int)) 
```

例如，将测试一系列不同的数字类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T16:02:24.400

你的例子可以写成：

```
if type(10) is int: # "==" instead of "is" would also work.
    print 'yes' 
```

但请注意，它可能不会完全按照您的意愿行事，例如，如果您写了`10L`or 一个大于[`sys.maxint`](http://docs.python.org/2/library/sys.html#sys.maxint)而不是 just的数字`10`，则不会打印 yes，因为`long`（这将是此类数字的类型） is not `int`。

另一种方法是，正如 Martijn 已经建议的那样，使用[`isinstance()`](http://docs.python.org/2/library/functions.html#isinstance)内置函数如下：

```
if isinstance(type(10), int):
    print 'yes' 
```

`insinstance(instance, Type)``True`不仅返回if`type(instance) is Type`而且如果实例的类型派生自`Type`. 因此，因为`bool`is `int`this 的子类也适用于`True`and `False`。

但通常最好不要检查特定类型，而是检查您需要的功能。也就是说，如果您的代码无法处理该类型，它会在尝试对该类型执行不受支持的操作时自动抛出异常。

但是，如果您需要以不同的方式处理例如整数和浮点数，您可能需要检查`isinstance(var, numbers.Integral)`(needs `import numbers`) 评估为`True`if`var`是 type `int`、`long`或`bool`任何从此类派生的用户定义类型。[请参阅有关标准类型层次结构](http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy)和 [`numbers`模块]的 Python 文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-19T18:16:00.080

您可以使用以下方式：

```
>>> isinstance('ss', str)
True
>>> type('ss')
<class 'str'>
>>> type('ss') == str
True
>>> 
```

整数 - > 整数

float -> 浮点值

列表 -> 列表

元组 -> 元组

字典 -> 字典

对于类，它有点不同：旧类型类：

```
>>> # We want to check if cls is a class
>>> class A:
        pass
>>> type(A)
<type 'classobj'>
>>> type(A) == type(cls)  # This should tell us 
```

新类型类：

```
>>> # We want to check if cls is a class
>>> class B(object):
        pass
>>> type(B)
<type 'type'>
>>> type(cls) == type(B)  # This should tell us

>>> #OR
>>> type(cls) == type # This should tell us 
```

# .net - 使用 calli 调用成员函数

> ID：15187039
> 
> 赞同：2
> 
> 时间：2013-03-03T15:06:56.153
> 
> 标签：.net, reflection, cil, reflection.emit

我想使用 .NET 对象调用成员函数`calli`。我可以使用以下代码调用一个静态函数，该函数接受一个 int 并返回一个 int 就好了：

```
// push the int argument
// push the address obtained using Ldftn
ilg.EmitCalli (OpCodes.Calli, System.Runtime.InteropServices.CallingConvention.StdCall, typeof<int>, [|typeof<int>|])
// correct result now on stack 
```

我希望我可以使用类似下面的方法来调用一个成员函数，该函数也接受一个 int 并返回一个 int。Jason Bock 的“CIL Programming”建议它应该可以工作，尽管我可能读错了。Reflector 还认为有些地方不太正确，并声称该调用被混淆了。最好的猜测是“ `return (int) *ptr1(num1);`”，这与静态调用相同：

```
ilg.Emit (OpCodes.Ldarg_0)            
// push the int argument
// push the address                                    
ilg.EmitCalli (OpCodes.Calli, System.Runtime.InteropServices.CallingConvention.StdCall, typeof<int>, [|typeof<int>|]) 
```

当我调用第二个片段时，我收到以下消息。不用说，我没有使用编组或类似的东西。

> 运行时遇到致命错误。错误地址位于线程 0x20e50 上的 0xed470d3f。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

请问我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:38:03.880

根据[文档`calli`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.calli.aspx)，您正在使用的重载`EmitCalli()`应该仅用于调用非托管代码。对于托管代码，您应该调用一个需要多一个参数的重载并将其设置为`null`（除非您正在使用`varagrg`，这非常罕见）：

```
ilg.EmitCalli (OpCodes.Calli, System.Runtime.InteropServices.CallingConvention.HasThis, typeof<int>, [|typeof<int>|], null) 
```

# java - 将 sqlite DB 添加到可执行 JAR 文件

> ID：15187043
> 
> 赞同：8
> 
> 时间：2013-03-03T15:07:10.083
> 
> 标签：java, eclipse, jdbc

我正在使用 JAVA（使用 eclipse juno）并尝试创建一个包含 sqlite DB 文件的可执行 JAR 文件。我尝试通过这一行连接到数据库：

```
DriverManager.getConnection("jdbc:sqlite:"+DataController.class.getResource("test.sqlite").getPath()) 
```

DataController 是一个位于 sqlite 所在位置的类。

我一直收到一个错误：

```
java.sql.SQLException: invalid database address 
```

有人可以提供有关如何在可执行 JAR 文件中包含 sqlite DB 的分步说明吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T15:26:40.863

显然 sqlite-jdbc 可以自己打开资源。根据此线程[https://groups.google.com/forum/?fromgroups=#!topic/xerial/Oayzj5nrJGk](https://groups.google.com/forum/?fromgroups=#!topic/xerial/Oayzj5nrJGk)，将 :resource 添加到路径中。所以尝试以下方法：

```
DriverManager.getConnection("jdbc:sqlite::resource:package/test.sqlite"); 
```

或取决于 sqlite 的版本

```
DriverManager.getConnection("jdbc:sqlite::resource:package/test.db"); 
```

用此文件所在包的“/”分隔路径替换包。

请注意，它实际上会将文件复制到 tmp 目录。-

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T13:46:01.727

`::resource`方法是对的。如果您正在使用这些解释，`::resource`但仍然会出现`resource database.db not found: java.net.MalformedURLException: no protocol: database.db`诸如 verdana 之类的错误，这些解释将有所帮助。

最常见的答案是： `DriverManager.getConnection("jdbc:sqlite::resource:path/to/database.db")`

但是，`path/to/database.db`必须是您的 jar 文件的确切路径（ **Real File System 中的路径但不是 Jar 中的路径）。**

我建议使用`getClass().getResource()`：

```
DriverManager.getConnection("jdbc:sqlite::resource:" + 
        getClass().getResource("/path/to/db/in/the/jar/file")) 
```

**注意**：该`/path/to/db/in/the/jar/file`部分必须以`/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-09T15:58:54.580

我不确定这在最近的 JDBC 版本中是否发生了变化，但是在摆弄了大约一个小时并遇到各种异常（MalformedURLException 和“数据库已关闭”）之后，我发现以下内容对我有用：

```
DriverManager.getConnection("jdbc:sqlite::resource:file:/path/to/database.db") 
```

:file: 部分似乎从其他答案中丢失，没有它我无法让它工作。

另外，请注意，

```
/path/to/database.db 
```

是从 .jar 文件的根目录开始的绝对路径，而不是普通的资源根目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-19T19:47:39.983

```
jdbc:sqlite::resource:notes_app.db 
```

为我工作。我的数据库（notes_app.db）位于生成的 jar 文件的根目录中。

```
public class Database {
    public static Connection con () throws SQLException {
        String url = "jdbc:sqlite::resource:notes_app.db";
        return DriverManager.getConnection(url);
    }
} 
```

我的**notes_app.db**位于生成的 jar 的根目录中。我正在使用**maven**和**notepadd++ 进行开发**

# php - xml文件中附加的元素不正确

> ID：15187046
> 
> 赞同：0
> 
> 时间：2013-03-03T15:07:28.087
> 
> 标签：php, xml

我的服务器中运行了一个 xml 文件。虽然在我的本地服务器上一切正常，但是当我将它上传到我的服务器上时，并且当很多人使用它时，我的 xml 文件中出现错误。

我在 php 中使用 simplexml 来读取和更新数据。

例如，我的 xml 文件具有以下结构

```
<?xml version="1.0"?>
<db>
<uid></uid>
<score></score>
</db> 
```

虽然它在一段时间内完美运行，但一段时间后，一些元素会附加到我的 xml 文件中。例如，

```
<db>
<uid></uid>
<score></score>
</db>/score</db> 
```

或者

```
<db>
<uid></uid>
<score><//score>
</db> 
```

或者

```
<db>
<uid></uid>
<core></score>
</db> 
```

然后我得到解析错误。是因为很多人同时写入我的 xml 文件吗？我正在使用 LOCK_EX 所以这应该不是问题

这就是我打开它的方式-

```
$data= new SimpleXMLElement($file, null, true); 
```

这就是我关闭它的方式-

```
file_put_contents($file, $data->asXML(), LOCK_EX); 
```

它在我的本地服务器中完美运行。当我将它上传到网上时，它可以正常工作一段时间，但是我的 xml 文件突然发生了奇怪的事情。怎么了？

**编辑：**

我的更新代码-

```
<?php
include('functions.php');
$winid= $_GET['wid'];
$loseid=$_GET['lid']; 
$winid=intval($winid);
$loseid=intval($loseid);
$file="data.xml";
$data= new SimpleXMLElement($file, null, true);
$winner=intval($data->score[$winid]);
$loser=intval($data->score[$loseid]);
$exp_winner=expected($loser,$winner);
$new_win=win($winner,$exp_winner);
$exp_loser=expected($winner,$loser);
$new_lose=loss($loser,$exp_loser);
$data->score[$winid]=$new_win;
$data->score[$loseid]==$new_lose;
file_put_contents($file, $data->asXML(), LOCK_EX);
header("Location: index.php");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:55:43.337

尝试更改所有出现的`$data->score['string']`to `$data->score->string`。看看有没有帮助！

示例：更改`$winner=intval($data->score[$winid]);`为`$winner=intval($data->score->$winid);`

另外，你不小心在这一行写了两个等号`$data->score[$loseid]==$new_lose;`！

# tcp - 相同的源和目标地址和端口

> ID：15187048
> 
> 赞同：2
> 
> 时间：2013-03-03T15:07:44.467
> 
> 标签：tcp, ip

我正在学习 IP 和 TCP 标头是如何工作的。以下是我的问题：

**IP头中的源地址和目的地址可以相同吗？还是没有任何意义？**

![在此处输入图像描述](../Images/3ccce5f0be66c4a29057bf67069f1895.png)

**同样，TCP 标头中的源端口和目标端口可以相同吗？**

![在此处输入图像描述](../Images/c215a13502cb9fc41985eb873fb98a90.png)

我尝试搜索谷歌，但我没有找到任何特定于我的问题的内容，而是协议如何工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:12:11.200

当然，源 IP 地址和目标 IP 地址可以相同。这仅表示同一主机上的客户端和服务器（或 2 个对等方）之间的连接。

源端口和目标端口也可以相同。如果发生这种情况，通常是巧合。

但是源IP地址和目的IP地址相同***，***源端口和目的端口相同？那没有意义。那将代表一个连接到自身的 TCP 连接。即使您想这样做（一种环回连接），协议也无法区分一个方向的数据包和另一个方向的数据包。

# php - 以编程方式登录 Zimbra

> ID：15187055
> 
> 赞同：4
> 
> 时间：2013-03-03T15:08:14.840
> 
> 标签：php, security, email, web, zimbra

我正在我的网站上创建一个插件，登录的用户可以在其中查看他们的电子邮件。我正在开发的电子邮件服务器是 Zimbra。到目前为止，我已经能够使用 PHP 的 imap_open 函数成功获取并显示用户电子邮件：

```
imap_open($server, $email, $password) 
```

当用户点击网站上的电子邮件链接时，用户会被导航到 zimbra 网络客户端。但是，用户将不得不再次重新输入他们的登录凭据。我检查了浏览器的 cookie 信息，并注意到 Zimbra 在用户登录时设置了一个 cookie **ZM_AUTH_TOKEN**：我相信 Zimbra 使用此 cookie 来检测用户是否已经登录。本质上，我的任务是消除这个重新登录的额外步骤；如果有开源解决方案，我也想知道这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:06:27.010

你可以在这里查看官方文档：

[http://wiki.zimbra.com/index.php?title=Preauth](http://wiki.zimbra.com/index.php?title=Preauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:26:21.680

这是一个解决方案的一半——抱歉，我从未使用 Zimbra 进行编程，但我已经多次跨 php 项目实现单点登录。

您的域和 zimbra 网络服务器的域是否相同？如果是，您可以查看和操作彼此的 cookie。尝试找到处理登录并设置 cookie 的 zimbra 代码。然后编写一个小的 Web 服务网页并将其放在调用该代码并返回 cookie 令牌的 zimbra 服务器上。然后，当用户登录时，您的网站可以在幕后对 zimbra 进行 curl，获取 cookie 的令牌内容，然后设置适当的 cookie，以便他们登录到 Zimbra。我使用只有我的插件网站知道的密码来保护 Web 服务网页。

如果它们不是同一个域，您仍然可以这样做。但是，您必须在客户端使用框架或 JavaScript，而不是通过服务器上的 curl 来执行此操作。此外，用于保护登录 Web 服务的简单密码也不起作用，因为浏览器正在访问它并且每个人都可以看到密码。您必须使密码更安全，例如使用预定义的秘密散列他们的电子邮件地址（假设在两台服务器上相同）。

# java - 图像图标没有出现在 Eclipse 之外

> ID：15187056
> 
> 赞同：1
> 
> 时间：2013-03-03T15:08:16.027
> 
> 标签：java, image, jar, icons, embedded-resource

我用 gui 制作了一个国际象棋游戏，使用图像作为棋子。它在 eclipse 中运行时完美运行。但是，我尝试导出 jar（从 eclipse 中）并在 cmd 中运行它，但没有出现任何图像（但是游戏本身运行良好，我只需要猜测碎片在哪里）。我将假设图像的地址存在问题...问题是，我什至似乎无法打开 jar 文件中的任何文件以查看是什么，如果有的话继续。

在 eclipse 中，所有的图像都在 scr 文件夹中的一个包中，并且它们肯定在 jar 中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:59:16.000

如果要在 jar 文件中加载图像，则需要使用该 `Class.getResource(String)`方法。

有关详细说明，请参阅 Java 教程中的[如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)部分。

# android - Sqlite Android 的最佳实践

> ID：15187063
> 
> 赞同：0
> 
> 时间：2013-03-03T15:08:57.493
> 
> 标签：android, android-sqlite

我正在用 sqlite 开发一个应用程序，但我不知道什么时候应该打开和关闭我的数据库。

*   在应用程序运行时保持数据库打开是一种好习惯吗？
*   我应该在读/写数据库时打开和关闭数据库吗？
*   有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:16:03.233

是的，这很重要。在任何应用程序中，而不仅仅是移动应用程序，最好只在您需要它对所述数据库执行操作时才保持数据库连接打开。这意味着您应该尽快关闭连接。连接是一种有限的资源，重要的是不要将它们捆绑在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:17:19.210

> 在应用程序运行时保持数据库打开是一种好习惯吗？

这是个人喜好。

我个人会一直保持打开状态，并以某种生命周期方法关闭它，例如`onStop()`or `onDestroy()`。这样，您可以在每次使用之前通过调用`isDbLockedByCurrentThread()`或在单个 SQLiteDatabase 对象上轻松检查数据库是否已在使用中。`isDbLockedByOtherThreads()`这将防止对数据库进行多次操作，并使您的应用程序免于潜在的崩溃，如果您在每次读/写打开/关闭的情况下不小心有两个打开的实例，这是可能的。

请记住，当您打开数据库连接时，您的应用程序可能会被终止。

此外，您应该使用事务来减少一次对磁盘的写入操作。

> 有关系吗？

数据库只是一天结束时磁盘上的另一个文件。如果您尝试同时从多个线程/实例写入它，您将遇到问题。

# asp.net - ASP.NET 预编译但启动时间仍然很慢？

> ID：15187067
> 
> 赞同：3
> 
> 时间：2013-03-03T15:09:09.113
> 
> 标签：asp.net, precompile

我试图弄清楚我做错了什么或不理解。我有一个包含 Web 应用程序和一些类库的解决方案。

我编辑了 Web 项目的 Web 应用发布设置。它已选中“在发布前预编译此应用程序”，并且我选择了“仅运行此应用程序所需的文件”。

我创建了一个发布配置文件，它只是将其转储到一个文件夹中。从该文件夹中，我将 DLL 上传（使用 FTP）到我设置的暂存站点，这是我在实时部署应用程序之前进行最终测试的地方。上传 DLL 并进入暂存站点后，应用程序启动仍然存在延迟，这似乎同样缓慢。不应该通过预编译来消除吗？

编辑：关闭允许网站可更新解决了这个问题。允许它可更新会导致我的所有 ASPX 页面和用户控件在第一页视图上编译，这导致即使编译后面的代码仍然存在延迟。我在 web.config 中禁用了批处理编译并打开了 optimizeCompilations，现在它很快：

```
<compilation batch="false" optimizeCompilations="true" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:23:09.897

也许你`debug=True`在配置中留下了设置？

除其他外，这将禁用批处理编译和缓存（但缓存不应影响您的启动时间）。

有关更多详细信息，请参见[此处](http://blogs.msdn.com/b/tess/archive/2006/04/13/575364.aspx)和[此处](http://weblogs.asp.net/scottgu/archive/2006/04/11/Don_1920_t-run-production-ASP.NET-Applications-with-debug_3D001D20_true_1D20_-enabled.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:17:21.067

你在哪个框架版本上？如果您使用的是 .Net 3.5（特别是），您应该考虑使用：

```
<configuration>
    <runtime>
        <generatePublisherEvidence enabled="false"/>
    </runtime>
</configuration> 
```

它将大约是冷启动时间的一半。但一个已知问题是，当 IIS 对应用程序进行冷启动时，会出现初始延迟。这不仅限于您部署应用程序，还包括您的应用程序池回收时。

到目前为止，我能想到的最好的选择是编写一个预定的脚本来定期自动启动（预热）一个站点（比如每 1 分钟一次？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T01:23:19.090

我设法弄清楚我的。以前，我在本地开发机器上的冷启动需要 18 分钟（暂存时不到 30 秒）。

我终于注意到一个程序在冷重启期间正在运行高 CPU。该程序是.. MsMpEng.exe - 这是包括 Microsoft Defender 在内的 Microsoft Security Essentials。我卸载了它，我的网站现在加载时间不到 30 秒。

显然，它在冷启动期间扫描每个被复制的 .dll，并阻止每个额外的 .dll 被复制，直到它完成扫描前一个。

冷启动现在不到 30 秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T16:06:19.110

在我们的例子中，预编译的应用程序（之前在眨眼之间更新）在我们添加 SignalR 后开始缓慢运行。

现在，我使用[这个开源工具](https://github.com/jitbit/cpu-analyzer)分析了这个过程（免责声明，我是该项目的贡献者，最初由 Stackoverflow 团队编写），我在最长的调用堆栈中看到了这个：

```
//...skipped
System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start
Microsoft.Owin.Host.SystemWeb.OwinCallContext.AcceptCallback
//...skipped 
```

~~谢谢，奥巴马。~~

~~靠，微软？~~

向 Owin 依赖问好。

# django - Django 自定义保存方法

> ID：15187073
> 
> 赞同：0
> 
> 时间：2013-03-03T15:09:43.840
> 
> 标签：django, postgresql, django-models

我已更改保存方法以包含修改后的日期字段以更改所有保存。我想知道我是否使用 update() 方法更新模型。会调用save方法吗？？

请回答解释如果不是我如何更新所有修改的修改日期字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:38:41.793

如果您[阅读有关查询`update`集方法](https://docs.djangoproject.com/en/dev/ref/models/querysets/#update)的文档，您会注意到它说以下内容：

> 最后，请意识到 update() 在 SQL 级别进行更新，因此不会在模型上调用任何 save() 方法，也不会发出 pre_save 或 post_save 信号（这是调用 Model.save( ））。

但

> 如果您想为具有自定义 save() 方法的模型更新一堆记录，请遍历它们并调用 save()，如下所示：

```
for e in Entry.objects.filter(pub_date__year=2010):
    e.comments_on = False
    # Or in your case, update the date here
    e.save() 
```

# android - 在linearlayout中添加多个linearlayout以编程方式崩溃

> ID：15187075
> 
> 赞同：0
> 
> 时间：2013-03-03T15:09:59.687
> 
> 标签：android, xml, layout

我想在用户从本地选择照片然后显示在（父）线性布局中之后添加一个具有图像和文本视图的线性布局。添加第一个线性布局没有问题，但是一旦我想输入第二个线性布局，应用程序就会崩溃。

**JAVA文件**

```
public class newExpense extends Fragment {

ImageView addImage;
LinearLayout imageList;
final int RQS_LOADIMAGE = 0;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View rootView = inflater.inflate(R.layout.new_expense_copy, container, false);  

    addImage = (ImageView) rootView.findViewById(R.id.addImage);
    addImage.setOnClickListener(buttonSaveOnClickListener);

    imageList = (LinearLayout) rootView.findViewById(R.id.imageList);

    return rootView;
}

ImageView.OnClickListener buttonSaveOnClickListener
= new ImageView.OnClickListener(){

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle("Select an option")
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // User cancelled the dialog
                   }
               })
               .setItems(R.array.addImage, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {

                       if (which == 0) {
                           Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                           startActivityForResult(takePicture, RQS_LOADIMAGE);

                       } else {
                           Intent pickPhoto = new Intent(Intent.ACTION_PICK,
                               android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                           startActivityForResult(pickPhoto , RQS_LOADIMAGE);
                       }
                   } 
               });
            builder.show();
    }
};

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == getActivity().RESULT_OK){
        switch(requestCode){
        case RQS_LOADIMAGE:
            Uri imageUri = data.getData();

            LinearLayout injecterLayout = (LinearLayout) getActivity().getLayoutInflater().inflate(R.layout.image_list, imageList, false);

            ImageView img = (ImageView) injecterLayout.findViewById(R.id.imageView);
            TextView txt = (TextView) injecterLayout.findViewById(R.id.textView1);
            img.setImageURI(imageUri);
            txt.setText(imageUri.getLastPathSegment().toString());
            imageList.addView(injecterLayout);

            break;  
        }
    }
} 
```

}

**子布局xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/imageItem"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imageView"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:maxHeight="100dp"
    android:maxWidth="100dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="0dp"
    android:layout_height="100dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_weight="3"
    android:gravity="center_vertical"
    android:minWidth="160dp"
    android:text="test" />

<ImageView
    android:id="@+id/imageRemove"
    android:layout_width="wrap_content"
    android:layout_height="100dp"
    android:src="@android:drawable/ic_delete" />

</LinearLayout> 
```

**父布局xml**

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/ScrollView01"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<GridLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:alignmentMode="alignBounds"
    android:columnCount="2"
    android:columnOrderPreserved="false"
    android:useDefaultMargins="true" >

    <TextView
        android:id="@+id/amountLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:text="Amount"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_horizontal"
        android:orientation="horizontal" >

        <Spinner
            android:id="@+id/currency"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"/>

        <EditText
            android:id="@+id/amount"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:layout_weight="1"
            android:hint="Tap to enter amount"
            android:inputType="numberDecimal" />

    </LinearLayout>

    <TextView
        android:id="@+id/accountLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:text="Paid From"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/account"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_gravity="left" />

    <TextView
        android:id="@+id/categoryLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:text="Category"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/category"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_gravity="left" />

    <TextView
        android:id="@+id/dateLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:text="Date"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_horizontal"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/date"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Sat 02/03/2013" />

        <ImageButton
            android:id="@+id/imageButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/ic_menu_today" />

    </LinearLayout>

    <TextView
        android:id="@+id/noteLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:text="Note"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/note"
        android:layout_width="300dp"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:ems="10"
        android:inputType="textMultiLine" />

    <TextView
        android:id="@+id/locationLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:text="Location"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="fill_horizontal" >

        <EditText
            android:id="@+id/location"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_gravity="left|bottom"
            android:ems="10" >
        </EditText>

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/ic_menu_mylocation" />
    </LinearLayout>

    <TextView
        android:id="@+id/photoLbl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:text="Photo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/addImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_column="1"
        android:layout_gravity="right"
        android:layout_row="6"
        android:src="@android:drawable/ic_input_add" />

    <Space
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_row="7"
        android:layout_columnSpan="1" />

    <LinearLayout
        android:id="@+id/imageList"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical">

    </LinearLayout>

    <Space
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_row="6"
        android:layout_columnSpan="1" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="fill_horizontal" >

        <Button
            android:id="@+id/clearBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="Clear" />

        <Button
            android:id="@+id/saveBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:text="Save" />

    </LinearLayout>

</GridLayout>

</ScrollView> 
```

**原木猫**

```
03-03 23:14:05.676: E/AndroidRuntime(23792): FATAL EXCEPTION: main
03-03 23:14:05.676: E/AndroidRuntime(23792): java.lang.OutOfMemoryError
03-03 23:14:05.676: E/AndroidRuntime(23792):    at  android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:587)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.graphics.drawable.Drawable.createFromStream(Drawable.java:733)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.widget.ImageView.resolveUri(ImageView.java:562)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.widget.ImageView.setImageURI(ImageView.java:340)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at com.example.expensesmanager.newExpense.onActivityResult(newExpense.java:92)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.support.v4.app.FragmentActivity.onActivityResult(FragmentActivity.java:161)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.app.Activity.dispatchActivityResult(Activity.java:4654)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2987)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3034)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.app.ActivityThread.access$1100(ActivityThread.java:127)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1188)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.os.Looper.loop(Looper.java:137)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at android.app.ActivityThread.main(ActivityThread.java:4511)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at java.lang.reflect.Method.invokeNative(Native Method)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at java.lang.reflect.Method.invoke(Method.java:511)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-03 23:14:05.676: E/AndroidRuntime(23792):    at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮助修改一些代码吗？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:36:34.653

您内存不足，更具体地说是堆空间不足。你的应用程序可以使用多少堆空间是有限的——这会有所不同，从旧 Android 设备上的低至 16MB 空间到具有高屏幕分辨率的新设备上可能高达 64MB。不管是什么，你都用过了，也许是在位图上。

您可以[使用 MAT 找出您的堆空间在哪里被使用](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)。

# javascript - 访问指令内的父作用域

> ID：15187089
> 
> 赞同：3
> 
> 时间：2013-03-03T15:11:52.543
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

我有这两个指令，一个相互嵌套：

```
<envato class="container content-view-container" data-ng-cloak data-ng-hide="spinner">
    <items data-ng-repeat="items in marketplaces"></items>
</envato> 
```

这两个中的每一个都被定义为：

```
Application.Envato.directive("envato", ["$timeout", function($timeout){

    var object = {

        restrict : "E",
        controller : "EnvatoAPIController",
        transclude : true,
        replace : true,
        templateUrl : "templates/envato-view.php",
        link : function(scope, element, attrs, controller) {

            console.log(scope);

            return controller.getLatestItems().then(function(data) {

                scope.marketplaces = angular.fromJson(data);
                scope.count = scope.marketplaces.length;

                var tst = angular.element(element).find(".thumbnails");

                /* $timeout(function() { scope.swiper = new Swipe(document.getElementById('swiper-container')); }, 5000); */                    
                scope.spinner = false;
            });

        }
    };

    return object;
}]);

Application.Envato.directive("items", function(){

    var iterator = [],
        object = {

            require : "^envato",
            restrict : "E",
            transclude : false,
            replace : true,
            templateUrl : "templates/envato-items-view.php",
            link : function(scope, element, attrs, controller) {

                iterator.push(element);

                if (iterator.length === scope.$parent.$parent.count) { console.log(iterator); };                                    
            }
        };

    return object;
}); 
```

上面的很多代码可能没有多大意义，因为它是更大应用程序的一部分，但我希望它对我的问题有用。我要做的是`envato`从指令更改指令的范围属性`items`。因为我有一个迭代，我想知道它什么时候完成，所以我可以在那个迭代期间对附加的 DOM 元素执行另一个操作。

例如，假设我将`scope.swipe`在指令中定义`envato`，并观察它的变化。在指令`items`中，我将观察何时`ng-repeat`完成，然后更改上面定义的范围属性`scope.swipe`。这将触发指令内部的变化`envato`，现在我知道我可以做我的操作了。

我希望我足够清楚，如果不是，我可以尝试更多代码，或者我会尝试更具体。我怎样才能实现我刚才描述的？

**编辑：**我知道`console.log(angular.element(element.parent()).scope());`在指令中使用 :`items`会给我指令的范围`envato`，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:51:26.813

对于这种指令间通信，我建议在`envato`指令上定义一个`items`指令可以调用的 API/方法。

```
var EnvatoAPIController = function($scope) {
    ...
    this.doSomething = function() { ... }
} 
```

您的`items`指令已经`require`是`envato`指令，因此在您的指令的链接函数中`items`，只需在适当的时候调用 API：

```
require : "^envato",
link : function(scope, element, attrs, EnvatoCtrl) {
   ...
   if(scope.$last) {
       EnvatoCtrl.doSomething();
   }
} 
```

这种方法的好处在于，即使您有一天决定在指令中使用隔离作用域，它也会起作用。

AngularJS 主页上的`tabs`和指令使用这种通信机制。`pane`有关更多信息，请参阅[https://stackoverflow.com/a/14168699/215945](https://stackoverflow.com/a/14168699/215945)。另见约翰的[指令交流视频](http://egghead.io/video/angularjs-directive-to-directive-communication/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:41:32.790

使用[`scope.$eval('count')`](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24eval)at`item`指令，让角度为您解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T01:06:05.667

我认为您正在寻找一个在`ng-repeat`完成时被调用的回调。如果这就是你想要的，我已经创建了一个小提琴。[http://jsfiddle.net/wjFZR/](http://jsfiddle.net/wjFZR/)。

小提琴中没有太多的用户界面。请打开萤火虫控制台，然后再次运行小提琴。您将看到一个日志。该日志在指令中`ng-repeat`定义的末尾调用。`cell`

`$scope.rowDone = function(){ console.log($scope) }`这是在行指令上定义的回调函数，将`ng-repeat`在单元指令的完成时调用。

它以这种方式注册。

`<cell ng-repeat="data in rowData" repeat-done="rowDone()"></cell>`

免责声明：我也是 angularjs 的新手。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-18T10:38:16.203

嗯，看来您正试图让自己变得困难。在您的指令中，您没有设置范围属性：

```
var object = {
    restrict : "E",
    transclude : true,
    replace : true,
    scope: true,
    ... 
```

设置范围：{} 将为您的指令提供一个完全隔离的新范围。

但是设置 scope: true 会给你的指令一个完全隔离的继承父级的新范围。

我使用此方法将模型包含在顶级父指令中，并允许它向下过滤所有子指令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-29T20:36:50.573

我喜欢 Mark 的回答，但我最终创建了一个属性指令来将元素指令的范围保存到 rootScope，如下所示：

```
myApp.directive('gScope', function(){
    return {
        restrict: 'A',
        replace: false,
        transclude: false,
        controller: "DirectiveCntl",
        link: function(scope, element, attrs, controller) {
            controller.saveScope(attrs.gScope);
        }
    }
});

...

function DirectiveCntl($scope, $rootScope) {
    this.saveScope = function(id) {
        if($rootScope.directiveScope == undefined) {
            $rootScope.directiveScope = [];
        }
        $rootScope.directiveScope[id] = $scope;
    };
}

...

<span>Now I can access the message here: {{directiveScope['myScopeId'].message}}</span>
<other-directive>
    <other-directive g-scope="myScopeId" ng-model="message"></other-directive>
</other-directive> 
```

注意：虽然这使得从所有各种指令中收集数据变得很容易，但我提醒您，现在您必须确保正确管理潜在的范围堆，以避免导致页面上的内存泄漏。特别是如果您使用 ng-view 创建单页应用程序。

# java - 未设置自动装配属性

> ID：15187090
> 
> 赞同：1
> 
> 时间：2013-03-03T15:11:59.253
> 
> 标签：java, spring

我正在尝试一个 java 应用程序，它有两个通过 Spring 获取的 bean，一个按名称检索，一个自动装配。这是该代码：

```
package firstspring;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class FirstSpring
{
  private final static Logger logger = LoggerFactory.getLogger(FirstSpring.class);

  @Autowired
  private Car currentCar;
  public void setCurrentCar(Car car) { this.currentCar = car; }
  public Car getCurrentCar() { return currentCar; }

  private static void say(String message) { System.out.println(message); }

  public static void main(String[] args)
  {
    FirstSpring firstSpring = new FirstSpring();
    firstSpring.go();
  }

  public void go()
  {
    logger.info("here we go");
    ApplicationContext appContext = new ClassPathXmlApplicationContext("/appContext.xml");
    Car firstCar = (Car)appContext.getBean("firstCar");

    say ("firstCar was " + firstCar.getColor());
    say ("currentCar is " + currentCar.getColor());

  }

} 
```

及其配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context" 
       xsi:schemaLocation=
            "http://www.springframework.org/schema/beans 
                 http://www.springframework.org/schema/beans/spring-beans.xsd
                 http://www.springframework.org/schema/context
                 http://www.springframework.org/schema/context/spring-context-2.5.xsd">

      <context:annotation-config/>

    <bean id="firstCar" class="firstspring.Car">
        <property name="color" value="blue" />
        <property name="doors" value="2" />
        <property name="transmission" value="automatic" />
    </bean>

    <bean id="currentCar" class="firstspring.Car" >
        <property name="color" value="red" />
        <property name="doors" value="4" />
        <property name="transmission" value="5-speed" />
    </bean>

    <bean id="firstSpring" class="firstspring.FirstSpring">
            <property name="currentCar" ref="currentCar" />
    </bean>

</beans> 
```

而 Car 类只是为了使它完整：

```
package firstspring;

public class Car
{
  String  color;
  int     doors;
  String  transmission;

  public String getColor() { return color; }
  public void setColor(String color) { this.color = color; }

  public int getDoors() { return doors; }
  public void setDoors(int doors) { this.doors = doors; }

  public String getTransmission() { return transmission; }
  public void setTransmission(String transmission) { this.transmission = transmission; }
} 
```

我得到一个空指针异常：

```
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5e6458a6: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,firstCar,currentCar,firstSpring,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
Exception in thread "main" java.lang.NullPointerException
    at firstspring.FirstSpring.go(FirstSpring.java:33)
    at firstspring.FirstSpring.main(FirstSpring.java:23)
firstCar was blue 
```

我已经尝试过其他各种事情——将“byName”放在配置中的 currentCar bean 上，但根据我阅读的文档，我认为这没有必要。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:21:25.287

当您说 时`new FirstSpring()`，您正在创建自己的该类的实例，该实例不在 Spring 的控制范围内，因此 Spring 无法自动装配它。因此，当您到达 时`currentCar.getColor()`，`currentCar`为空。为了使其正常工作，您需要`ApplicationContext`在 main 方法中创建您的，`FirstSpring`从 Spring 获取实例，然后调用`go()`它而不是自己创建对象。

简而言之，Spring 不能也不会管理（即自动装配、初始化、销毁等）任何不是它自己创建的对象。*

*除非您使用[带有字节码编织的 AspectJ](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable)来完成此操作，但这是一个您可能还不想触及的相当高级的主题，除非您对 AspectJ 有其他经验。

# java - 在 Ubuntu 上安装 Eclipse/Java

> ID：15187094
> 
> 赞同：3
> 
> 时间：2013-03-03T15:12:24.193
> 
> 标签：java, linux, eclipse, ubuntu

我想在 Ubuntu 上安装 Eclipse 以进行 Java 开发。我很高兴通过包管理来换取最新版本的稳定更新。

我已经完成了通常的操作`sudo apt-get install eclipse eclipse-jdt`（java-7-openjdk-i386 已安装并正常工作）

但是，当我启动 Eclipse 时，似乎几乎没有可用的东西 - 没有 Java 编辑（窗口/首选项下甚至没有“已安装的 JRE”）。我尝试添加各种更新站点，安装 Marketplace 客户端、WTP、Java EE 等，但无法正常安装。奇怪的是，我在一年前设置的另一台机器上运行良好（借助[如何在 Eclipse Classic 中安装 Eclipse Marketplace？](https://stackoverflow.com/questions/5285623/how-do-i-install-eclipse-marketplace-in-eclipse-classic)）

我已经放弃并恢复到手动安装（沿着[Eclipse 3.6 Helios for Ubuntu 10.10](https://stackoverflow.com/questions/4767584/eclipse-3-6-helios-for-ubuntu-10-10)的行）但想问：

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T15:23:55.327

我强烈建议您不要以这种方式安装 Eclipse，它并没有真正的用处，而且您只会得到带有 Java 标准透视图的 Eclipse。我建议您从页面下载 tar.gz 文件（包括 Java EE 透视图）。将 tar 文件复制到您想要所有开发工具的目录中，例如 /home/user/dev/eclipse 并从那里开始。您可以在桌面上创建一个启动器以更快地访问 IDE。当我开始使用 Ubuntu 时，我曾经安装过您的安装方式（sudo apt-get...），但我可以告诉您，最好的方法是手动安装。如果 JDK 安装良好，启动 Eclipse 不会有任何问题。最好的祝福。

# ios - iOS 中 Preferences 的 UIModalPresentationFormSheet 关闭事件

> ID：15187095
> 
> 赞同：0
> 
> 时间：2013-03-03T15:12:25.570
> 
> 标签：ios, cocoa-touch, preferences, viewcontroller

我正在使用 iPad 中的以下代码使用 UIModalPresentationFormSheet 执行首选项功能。

```
self.preferencesViewController = [[PreferenceViewController alloc] initWithNibName:@"PreferenceViewController" bundle:nil];
    self.preferencesViewController.modalPresentationStyle = UIModalPresentationFormSheet;
    [self presentModalViewController:self.preferencesViewController animated:YES]; 
```

当我保存首选项并关闭视图控制器时

```
[self dismissModalViewControllerAnimated:YES]; 
```

但是我的喜好是没有改变的。

我写了我的检查首选项编码`viewWillAppear`，但是 viewWillAppear 事件不适用于`UIModalPresentationFormSheet`。

当我使用时我很好

```
self.preferencesViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:self.preferencesViewController animated:YES completion:nil]; 
```

我在哪里可以查看活动`UIModalPresentationFormSheet`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:45:56.103

将信息返回给创建您的控制器的标准方法是使用委托协议。您的 preferenceViewController 应该定义一个委托协议，并且呈现控制器应该在呈现首选项控制器之前将自己设置为委托。当您开始保存首选项时，PreferenceViewController 应该向它的委托发送一条消息，说明它已经完成并且应该被解除。在呈现控制器中实现该委托方法时，它可以从您保存它们的位置读取首选项，并关闭 PreferenceViewController。

# ios - 仅在单元格中的特定 UIImage 上从 UITableView 推送详细信息视图？

> ID：15187099
> 
> 赞同：1
> 
> 时间：2013-03-03T15:13:19.373
> 
> 标签：ios, objective-c, uitableview, pushviewcontroller

当我点击它的任何单元格时，我有一个`UITableView`推送详细视图。我希望只有在点击单元格的特定部分时才会发生这种情况，a`UIImageView`在其左侧。点击单元格的其余部分应触发`UITapGestureRecognizer`触发不同方法的触发。

如何覆盖 上的默认点击`UITableViewCell`，以便简单地点击单元格上的任意位置不会触发对详细视图的 segue？我仍然想要那种过渡，只是由`UIImageView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:22:55.870

我认为您可以通过将 segue 与原型单元格中的图像（我自己从未尝试过）而不是与表格视图连接来实现这一点。

如果您没有原型单元格，那么您应该使用图像视图以编程方式调用 IBAction 类型的方法。那么，图像视图不能做到这一点。只需滥用相同大小、自定义样式的 UIButton 并将图像分配给该按钮。工作正常。（它不需要是一种`-(IBAction)`方法，但它不会造成伤害，这样做可以确保一切正常。）

在该操作方法中，以编程方式调用 segue。segue 需要有一个 ID，它在故事板中是唯一的。

# android - AlarmManager 在模拟器中运行良好，但在真实设备中运行良好

> ID：15187100
> 
> 赞同：0
> 
> 时间：2013-03-03T15:13:24.927
> 
> 标签：android, alarmmanager, wakelock, powermanager

这是我设置闹钟的代码：

```
public void SetAlarm(Context context, int tag, long time){
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(context, Alarm.class);
     i.putExtra("position", tag);
     PendingIntent pi = PendingIntent.getBroadcast(context, tag, i, PendingIntent.FLAG_CANCEL_CURRENT);
     am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+ time, pi); // Millisec * Second * Minute
} 
```

这是我的 onRecieve 方法：

```
public void onReceive(final Context context, Intent intent){   
    PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "my wak up lo");
    wl.acquire();

    position = intent.getIntExtra("position", -1);         
    new PostManager(context, position);

    wl.release();
} 
```

这与模拟器配合得很好。同时我设置了一个警报，该警报将在 24 小时后在模拟器和真实设备中触发。这项工作由模拟器很好地完成，但不是在真实设备中。这是发生的事情`PowerManager.FULL_WAKE_LOCK`还是其他什么？我已经努力但未能找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:17:59.173

抱歉各位，问题出在`PostManager`. 在中`PostManager`，我正在使用另一个字符串检查会话 cookie。那么会发生什么？这是答案。在 4 小时之前，会话 cookie 保留在 cookiemanager 上，因此检查`.equal(another_string)`工作正常。但我认为 4 小时后会话 cookie 过期并`.equal(another_string)`抛出 NullPointerException。所以我刚刚检查了我得到的cookie是否为空。这解决了我的问题。再次对不起伙计们。

# windows - 在 Windows 中以编程方式添加假硬件

> ID：15187102
> 
> 赞同：0
> 
> 时间：2013-03-03T15:13:48.580
> 
> 标签：windows, visual-c++, drivers

我在 Windows 中创建了一个伪造的 USB 闪存驱动程序驱动程序，它会伪造 Windows 以为附加了一个新的硬件设备。我还找到了允许我枚举连接的硬件的 API（所以我知道哪个设备是我的假驱动程序）。

问题是我只想在我的程序运行时附加硬件，并且我不希望在我的程序不运行时可以访问它。

如何以编程方式添加此硬件或启用/禁用此驱动程序？有人建议正确的命名法是“加载/卸载”。

在 Windows 7 和更高版本上使用 VC++ 和 Windows API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:43:31.617

尝试使用C++ 类包装器从代码项目[加载/卸载设备驱动程序。](http://www.codeproject.com/Articles/31905/A-C-class-wrapper-to-load-unload-device-drivers)

# java - jms 错误处理程序：仅当 jms 放弃时接收回调

> ID：15187106
> 
> 赞同：4
> 
> 时间：2013-03-03T15:14:11.850
> 
> 标签：java, spring, jms, activemq

我正在使用带有活动 mq 的 spring-jms。

我`ErrorHandler`设置了一个侦听器，每次 jms 消息传递失败时都会接收回调 - 即处理消息的方法抛出异常而不是正常返回。

但是，我的 jms 配置为重试几次，直到 jms 交付最终成功。我的回调会收到所有失败的通知。

**我想要的是一个仅在所有重试最终失败时才收到通知的侦听器。**动机是提出问题以引起管理员的注意。但我不希望管理员控制台中出现虚假通知。

```
<bean abstract="true" id="abstractDestinationListener"
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="jmsFactory" />
    <property name="errorHandler" ref="destinationErrorHandler"/>
    <property name="sessionTransacted" value="true"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:41:09.467

您可能会考虑为相关目的地使用每个目的地的死信队列（`individualDeadLetterStrategy`- [https://activemq.apache.org/message-redelivery-and-dlq-handling.html](https://activemq.apache.org/message-redelivery-and-dlq-handling.html)）。当达到最大重新传递计数时，消息被移出到 DLQ。然后，您可以使用向管理员发送电子邮件的侦听器在该队列上设置使用者。

另一种方法可能是使用 try-catch 包装您的侦听器，并仅在 时重新抛出任何异常`message.getIntProperty("JMSXDeliveryCount") < MAX_REDELIVERY_COUNT`，否则向管理员发送电子邮件。但是，该选项意味着将您的重新投递限制放在两个地方 - 代理配置和代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:56:01.633

如果您需要更细粒度的控制/灵活性/路由与 JMS 消息/处理，那么您应该只使用 Apache Camel 的[错误处理](http://camel.apache.org/error-handler.html)......

# c++ - STL 字符串 ::length() SEGFAULTing

> ID：15187108
> 
> 赞同：5
> 
> 时间：2013-03-03T15:14:32.660
> 
> 标签：c++, string, stl, segmentation-fault, string-length

```
#include <iostream>
#include <string>
#include <vector>

/*
  Using STL's string class because the problem does not refer any
  limits regarding the number of characters per line.
 */

using namespace std;

int main()
{
  string line;
  vector<string> lines;
  while (getline(cin, line))
  {
    lines.push_back(line);
  }

  unsigned int i, u;
  unsigned int opening = 1; // 2 if last was opening, 1 if it was closing
  for (i = 0; i < (int) lines.size(); i++)
  {
    for (u = 0; u < (int) lines[u].length(); u++)
    {

    }
  }

  return 0;
} 
```

我有一个简单的代码，它只读取几行（输入文件）：

```
"To be or not to be," quoth the Bard, "that
is the question".
The programming contestant replied: "I must disagree.
To `C' or not to `C', that is The Question!" 
```

但是，我发现它是 SEGFAULTing，因为它在第一行（第 4 个字符）读取了一个 ' ' （空格）字符：

```
(gdb) run < texquotes_input.txt 
Starting program: /home/david/src/oni/texquotes < texquotes_input.txt

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7b92533 in std::string::length() const () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6 
```

我真的不明白为什么，我没有在循环内做任何事情，我只是在循环。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T15:15:27.920

我已经发现了问题。这是内循环：

```
for (u = 0; u < (int) lines[u].length(); u++)
{

} 
```

应该：

```
for (u = 0; u < (int) lines[i].length(); u++)
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T15:51:29.187

在另一个答案中，索引错字已经被发现。

我想补充一点，使用*基于范围的`for`循环*这些问题更难发生，因为循环有点“隐含”：

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

int main()
{
  string line;
  vector<string> lines;
  while (getline(cin, line))
  {
    lines.push_back(line);
  }

  for ( const auto& currLine : lines )
  {
    for ( auto ch : currLine )
    {
      cout << ch;  
    }
    cout << '\n';
  }
} 
```

# android - 如何将图像链接到数字 android ？

> ID：15187109
> 
> 赞同：0
> 
> 时间：2013-03-03T15:14:53.927
> 
> 标签：android, android-layout

嗨，我正在研究滑动拼图，到目前为止一切都很好。我有一个工作难题，但现在我正在处理没有图像的数字。现在我想使用图像作为数字的背景。谁能帮我把图像剪下来，把它们和数字联系起来，这样谜题仍然有效吗？

这是我的数字代码，它是 9 块拼图

```
 public Button[] findButtons() {
    Button[] b = new Button[9];

    b[0] = (Button) findViewById(R.id.Button00);
    b[1] = (Button) findViewById(R.id.Button01);
    b[2] = (Button) findViewById(R.id.Button02);
    b[3] = (Button) findViewById(R.id.Button03);
    b[4] = (Button) findViewById(R.id.Button04);
    b[5] = (Button) findViewById(R.id.Button05);
    b[6] = (Button) findViewById(R.id.Button06);
    b[7] = (Button) findViewById(R.id.Button07);
    b[8] = (Button) findViewById(R.id.Button08);
    return b;
}

public void makeMove(final Button b) {
    bad_move=true;
    int b_text,b_pos,zuk_pos;
    b_text=Integer.parseInt((String) b.getText());
    b_pos=find_pos(b_text);
    zuk_pos=find_pos(0);
    switch(zuk_pos)
    {
    case(0):
        if(b_pos==1||b_pos==3)
            bad_move=false;
    break;
    case(1):
        if(b_pos==0||b_pos==2||b_pos==4)
            bad_move=false;
    break;
    case(2):
        if(b_pos==1||b_pos==5)
            bad_move=false;
    break;
    case(3):
        if(b_pos==0||b_pos==4||b_pos==6)
            bad_move=false;
    break;
    case(4):
        if(b_pos==1||b_pos==3||b_pos==5||b_pos==7)
            bad_move=false;
    break;
    case(5):
        if(b_pos==2||b_pos==4||b_pos==8)
            bad_move=false;
    break;
    case(6):
        if(b_pos==3||b_pos==7)
            bad_move=false;
    break;
    case(7):
        if(b_pos==4||b_pos==6||b_pos==8)
            bad_move=false;
    break;
    case(8):
        if(b_pos==5||b_pos==7)
            bad_move=false;
    break;
    }

    if(bad_move==true)
    {
        feedbackText.setText("Ongeldige zet");
        return;
    }
    feedbackText.setText("Geldige zet");
    cells.remove(b_pos);
    cells.add(b_pos, 0);
    cells.remove(zuk_pos);
    cells.add(zuk_pos,b_text);

    fill_grid();

    for(int i=0;i<9;i++)
    {
        if(cells.get(i)!=goal[i])
        {
            return;
        }
    }
    feedbackText.setText("Voltooid");
    mChronometer.stop();
    long elapsedMillis = SystemClock.elapsedRealtime() - mChronometer.getBase();   
    tijd = (int) elapsedMillis;
    mScoreDialog = new ScoreDialog(this,this, 0, convertToTimeFormat(elapsedMillis));
    mScoreDialog.show();
}

public void fill_grid()
{
    for(int i=0;i<9;i++)
    {
        int text=cells.get(i);
        AbsoluteLayout.LayoutParams absParams = 
                (AbsoluteLayout.LayoutParams)buttons[text].getLayoutParams();
        switch(i)
        {case(0):

            absParams.x = 5;
        absParams.y = 5;
        buttons[text].setLayoutParams(absParams);
        break;
        case(1):

            absParams.x = 110;
        absParams.y = 5;
        buttons[text].setLayoutParams(absParams);
        break;
        case(2):

            absParams.x = 215;
        absParams.y = 5;
        buttons[text].setLayoutParams(absParams);
        break;
        case(3):

            absParams.x = 5;
        absParams.y = 110;
        buttons[text].setLayoutParams(absParams);
        break;
        case(4):

            absParams.x =110;
        absParams.y =110;
        buttons[text].setLayoutParams(absParams);
        break;
        case(5):

            absParams.x = 215;
        absParams.y =110;
        buttons[text].setLayoutParams(absParams);
        break;
        case(6):

            absParams.x = 5;
        absParams.y = 215;
        buttons[text].setLayoutParams(absParams);
        break;
        case(7):

            absParams.x = 110;
        absParams.y = 215;
        buttons[text].setLayoutParams(absParams);
        break;
        case(8):

            absParams.x = 215;
        absParams.y = 215;
        buttons[text].setLayoutParams(absParams);
        break;

        }

    }

}

public int find_pos(int element)
{
    int i=0;
    for(i=0;i<9;i++)
    {
        if(cells.get(i)==element)
        {
            break;
        }
    }
    return i;
} 
```

如您所见，我正在验证动作并使用图像按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:24:50.193

将图像另存`res/drawable`为`img_1.png`, ... `img_10.png`;

创建地图：

```
static final HashMap<Integer,Integer> map = new HashMap<~>();
map.put(1,R.drawable.img_1);
. . .
map.put(10,R.drawable.img_10); 
```

获取数字的可绘制ID：

```
map.get(7); 
```

# memory - 了解 mmap

> ID：15187110
> 
> 赞同：2
> 
> 时间：2013-03-03T15:15:00.767
> 
> 标签：memory, operating-system

我一直在寻找 malloc 和 mmap 系统调用之间的区别。这两者之间的确切区别是什么？推荐哪个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:28:47.123

mmap() 是从磁盘上的文件映射数据的系统级地址。使用 mmap() 您可以引用磁盘上的任何文件，就好像它是一个简单的 byte[] 数组一样。它可以用于以下任何应用。

*   每当您从磁盘上的文件中请求数据时，它都会加载到 RAM 中。如果您有两个单独的程序需要来自同一个文件的数据，则可以使用 mmap() 从磁盘直接访问该文件，从而减少多余的 RAM 使用。

*   当您处理的数据太大以至于无法放入主内存 (RAM) 时，您可以使用 mmap() 访问物理存储在磁盘上的文件数据的一部分，从而再次减少 RAM有效地使用和处理大于 RAM 的数据。

请注意，在 64 位系统中 mmap() 可以寻址磁盘上的任何位置，但不能在 32 位系统中！因为在 32 位系统中，最大可寻址空间限制为 2^32 - 1 (4GB)，但在 64 位系统中，可以寻址数 PB 的位置。

malloc() 为您提供指向堆（在 RAM 中）的一些空间的指针，以存储临时对象。

mmap() 和 malloc() 之间唯一的相似之处是它们都返回指针。但是 mmap() 指向磁盘上的内存，而 malloc() 指向堆上的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:11:33.597

`mmap()`实际上并没有将文件加载到内存中（不使用任何内存，但会占用地址空间），而是`malloc()`从堆中分配内存。

我的建议是`malloc()`用于小物体和`mmap()`大物体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:15:21.170

它们非常不同：

1.  `malloc()`从堆中分配内存；
2.  `mmap()`是[内存映射文件](http://en.wikipedia.org/wiki/Memory-mapped_file)的 API 。

在大多数情况下，它们不是相互替代的，所以关于哪个更好的问题并没有多大意义。

# java - rt.jar META-INF/MANIFEST.MF

> ID：15187111
> 
> 赞同：0
> 
> 时间：2013-03-03T15:15:03.980
> 
> 标签：java

我正在尝试查找 java 运行时（rt.jar）的 MANIFEST.MF 的 url。

此方法不起作用：

搜索返回的枚举

```
classLoader.getResources("META-INF/MANIFEST.MF"); 
```

这种方法确实有效：

获取网址

```
url = classLoader.getResource("java/io/File.class"); 
```

接着

```
url = new URL( url, "../"); // to io
url = new URL( url, "../"); // to java
url = new URL( url, "../"); // to root
url = new URL( url, "META-INF/MANIFEST.MF"); 
```

这是正确的，因为我可以从中读取清单。

我有点困惑为什么使用简单的 getResources 不起作用？

我的平台：Mac OS X 10.8.2（最新），oracle java（最新）：

java 版本“1.7.0_15”Java(TM) SE 运行时环境（构建 1.7.0_15-b03）Java HotSpot(TM) 64 位服务器 VM（构建 23.7-b01，混合模式）

# wpf - WPF 样式触发器模板绑定

> ID：15187114
> 
> 赞同：3
> 
> 时间：2013-03-03T15:15:41.163
> 
> 标签：wpf, controltemplates

我是 WPF 的新手，我正在努力寻找我正在尝试做的事情的解决方案，因为我仍然有点不确定我是否正确地做到了这一点。

我为按钮定义了以下样式

```
<Style x:Key="ToolBarButtonStyle" TargetType="{x:Type Button}">
    <Setter Property="Margin" Value="5" />
    <Setter Property="BorderBrush" Value="White" />
    <Setter Property="Background" Value="{DynamicResource CompanyBlue}" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontSize" Value="20" />
    <Setter Property="Width" Value="100" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">               
                <Border x:Name="ButtonBorder" BorderThickness="5" CornerRadius="5"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        Background="{TemplateBinding Background}"
                        Width="{TemplateBinding Width}">
                    <ContentPresenter Margin="10" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Border>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Button.Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,-0.2" EndPoint="0,1.2">
                        <LinearGradientBrush.GradientStops>
                            <GradientStop Color="White" Offset="0" />
                            <GradientStop Color="{ORIGINAL-COLOR}" Offset="0.5" />
                            <GradientStop Color="White" Offset="1" />
                        </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Trigger>
    </Style.Triggers>
</Style> 
```

在 XAML 中，我放置了 placeholder `{ORIGINAL-COLOR}`，我本质上希望这是之前`{TemplateBinding Background}`为样式的控件模板设置的值。

我已经看到了我应该使用的建议，`{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background}`但这不起作用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:06:02.440

我相信问题在于它`LinearGradientBrush`不是`FrameworkElement`也不属于布局树。只有属性，因此`FrameworkElements`可以`DataContext`使用绑定。您要做的是设置一个`Binding`on `GradientStop`。

您的触发器应如下所示：

```
 <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Button.Background" 
                        Value="{TemplateBinding Background, Converter={StaticResource myConverter}}">
                </Setter>
            </Trigger> 
```

并且`myConverter`是一个自定义转换器类，它将获取 Background 的值并返回`LinearGradientBrush`从输入画笔创建的完整实例。我假设您知道如何编写转换器。请记住，它需要添加到资源中。

或多或少是这样的：

```
 class BrushToGradient : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var brush = (Brush)value;
        var gradient = new LinearGradientBrush();

        //Make it manually
        gradient.GradientStops.Add(...);
        //...
        return gradient;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:25:19.127

您不能`Color`与`Background`属性绑定，因为返回类型为`Background`is`Brush`和 not `Color`。

与 的 Color 属性绑定`Brush`。由于背景绑定到资源`CompanyBlue`，所以在触发器中也使用该绑定 -

```
<GradientStop Color="{Binding Color, Source={StaticResource CompanyBlue}}"
              Offset="0.5" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:59:21.293

像这样试试

```
<GradientStop Color="White" Offset="0" />
<GradientStop Color="{DynamicResource CompanyBlue}"  Offset="0.5" />
<GradientStop Color="White" Offset="1" /> 
```

我希望这将有所帮助。

# c# - 在加入数组中的项目时需要帮助c#

> ID：15187122
> 
> 赞同：0
> 
> 时间：2013-03-03T15:17:16.860
> 
> 标签：c#, arrays

如果它们的长度为 1，我需要帮助来连接数组中的两个或多个连续项目。

例如，我想改变这个：

```
string[] str = { "one", "two", "three","f","o","u","r" }; 
```

至 ：

```
str = {"one","two","three","four"}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:27:48.117

使用`GroupAdjacent`扩展程序（例如[此处列出](http://blogs.msdn.com/b/ericwhite/archive/2008/04/21/the-groupadjacent-extension-method.aspx)的扩展程序），您可以执行以下操作：

```
string[] input = ...

string[] output = input.GroupAdjacent(item => item.Length == 1)
                       .SelectMany(group => group.Key 
                                          ? new[] { string.Concat(group) } 
                                          : group.AsEnumerable())
                      .ToArray(); 
```

如果效率在这里是一个大问题，我建议滚动你自己的迭代器块或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:33:58.367

像这样的东西应该工作：

```
 private string[] GetCombined(string[] str)
    {
        var combined = new List<string>();
        var temp = new StringBuilder();
        foreach (var s in str)
        {
            if (s.Length > 1)
            {
                if (temp.Length > 0)
                {
                    combined.Add(temp.ToString());
                    temp = new StringBuilder();
                }
                combined.Add(s);
            }
            else
            {
                temp.Append(s);
            }
        }

        if (temp.Length > 0)
        {
            combined.Add(temp.ToString());
            temp = new StringBuilder();
        }

        return combined.ToArray();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:35:14.337

这是我的答案，用于 LINQPad :)

```
void Main()
{
    string[] str = { "one", "two", "three","f","o","u","r","five" };
    string[] newStr = Algorithm(str).ToArray();
    newStr.Dump();
}

public static IEnumerable<string> Algorithm(string[] str)
{

       string text = null;
       foreach(var item in str)
       {
        if(item.Length > 1)
        {
            if(text != null)
            {
                yield return text;
                text = null;
            }
            yield return item;
        }
        else
            text += item;
        }

        if(text != null)
            yield return text;
} 
```

输出：

> 一二 三四五
> _ _ _

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T15:37:04.387

我认为最简单和更有效的方法就是遍历数组：

```
string[] str = { "one", "two", "three", "f", "o", "u", "r" };
List<string> output = new List<string>();
StringBuilder builder = null;
bool merge = false;

foreach(string item in str)
{
    if (item.Length == 1)
    {
        if (!merge)
        {
            merge = true;
            builder = new StringBuilder();
        }
        builder.Append(item);
    }
    else
    {
        if (merge)
            output.Add(merge.ToString());
        merge = false;
        output.Add(item);
    }
}
if (merge)
    output.Add(builder.ToString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T15:52:57.580

你可以这样做：

```
string[] str = { "one", "two", "three", "f", "o", "u", "r" };
var result = new List<string>();
int i = 0;
while (i < str.Length) {
    if (str[i].Length == 1) {
        var sb = new StringBuilder(str[i++]);
        while (i < str.Length && str[i].Length == 1) {
            sb.Append(str[i++]);
        }
        result.Add(sb.ToString());
    } else {
        result.Add(str[i++]);
    }
} 
```

# jsf - 防止在浏览器中缓存值

> ID：15187127
> 
> 赞同：0
> 
> 时间：2013-03-03T15:17:32.813
> 
> 标签：jsf, jsf-2, icefaces

我有一个`selectOneMenu`和一个`dataTable`。当我更改所选值时，`dataTable`将重新填充。的一列`dataTable`是一个`inputText`。问题是该`inputText`字段不调用`getter`，而是缓存以前的值。

我想`getter`强制调用或设置`inputText`为不被缓存。我该如何摆脱这个问题？

```
 <h:body>
     <f:view>
         <h:form id="headForm">

            <ice:selectOneMenu id="item"
                    value="#{outerBean.selectedItem}"
                    valueChangeListener="#{outerBean.itemListValueChanged}"
                    style="width: 158px;" required="true"
                    label="Supplier Id" partialSubmit="true">
                    <f:selectItems value="#{outerBean.itemList}" />
            </ice:selectOneMenu>

            <ice:dataTable id="pdet" value="#{outerBean.nestedClassList}" var="nestedObject" rendered="true">

                <ice:column>
                <f:facet name="header">Order Number</f:facet>
                    <ice:outputText value="#{nestedObject.orderNumber}" />
                </ice:column>

                <ice:column>
                <f:facet name="header">Qty</f:facet>
                    <ice:inputText value="#{nestedObject.qty}" id="qty" label="'Qty' FOR 'Order Number':#{nestedObject.orderNumber} "
                                   partialSubmit="true" 
                                   valueChangeListener="#{nestedObject.qtyChanged}"
                                   validator="#{nestedObject.validateQty}">
                    </ice:inputText>
                 </ice:column>
            </ice:dataTable>
       </h:form>
   </h:view> 
```

```
public class OuterBean{

    private List<String> itemList = new ArrayList<String>();
    private String selectedItem;

    private List<NestedClass> nestedClassList = new ArrayList<NestedClass>();

    public OuterBean(){
         //init values
    }

    public void itemListValueChanged(ValueChangeEvent e){
         selectedItem = (String)e.getNewValue();

         //reset the dataTable record list
         nestedClassList = getRandomRecords();
    }

    //---getters-setters-----//

    private class NestedClass{

         private int orderNumber;
         private int qty;

         NestedClass(){
             orderNumber = generateOrderNumber();
             qty = getRandomQty();
         }

         //-----qtyChangedListener----//
         //-----qtyValidator----------//
         //-----getters-setters-------//
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:03:02.190

我看不到您在 itemListValueChanged 中链接nestedObject.qty 的位置

除非更改，否则组件不会重新呈现。

Icefaces 中的 Partial Submit 只会更新值发生变化的组件。

您可以在 selectonemenu 上将 Partial Submit 设置为 false，也可以重新初始化 itemListValueChanged 中的 inputText 的值。

# c# - c# 中的动画 PowerPoint 幻灯片

> ID：15187134
> 
> 赞同：1
> 
> 时间：2013-03-03T15:19:01.307
> 
> 标签：c#, powerpoint

我有一个控制 PowerPoint 幻灯片的小型 c# 软件（通过持久的 HTTP 连接从外部接收命令）。目前我支持 forward、next 和 gotoSlide_x。在幻灯片开始之前，我的软件会遍历所有幻灯片并将 NumberOfSlides、标题和注释等数据发送到我的控制软件。如果有一个幻灯片需要多个下一个命令，例如在用户按下下一个后显示单个项目的幻灯片，我的工具会出现问题，因为我的控制组件不知道这些幻灯片。

也许有人可以为这类幻灯片指出正确的 API。我想知道对于 Slide_i，我必须多久按一次下一步才能到达 Slide_i+1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:45:45.420

幻灯片中有一个时间线。从 TimeLine 我可以找到幻灯片的效果。必须对照 TriggerType 检查它们。我的相关代码如下所示（s 是幻灯片）：

```
int numOfAnimations = 0;
foreach (Effect e in s.TimeLine.MainSequence)
{
    if (e.Timing.TriggerType == MsoAnimTriggerType.msoAnimTriggerOnPageClick)
    {
        numOfAnimations++;
    }
} 
```

是不是几乎没有关于这类东西的任何文档，或者我搜索错了？

# c# - 首先通过代码解决一对多关系

> ID：15187135
> 
> 赞同：0
> 
> 时间：2013-03-03T15:19:09.130
> 
> 标签：c#, sql, code-first

我刚刚提出[问题](https://stackoverflow.com/questions/15185991/in-code-first-the-insert-statement-conflicted-with-the-foreign-key-constraint/15186039#15186039)并得到了解决方案，但解决方案产生了一个我在这里提到的新问题。`AccountHolder`在这里，我修改了我的代码并在和之间创建了一个新的 1 对 1 关系`Nominee`。

```
public partial class AccountHolder
{
    public int AccountHolderId { get; set; }

    public virtual List<Address> Address { get; set; }
    public virtual Nominee Nominee { get; set; }
}

public partial class Nominee
{
    public int NomineeId { get; set; }

    public virtual List<Address> Address { get; set; }
}

public partial class Address
{
    public int AddressId { get; set; }    

    public int AccountHolderId { get; set; }
    public AccountHolder AccountHolder { get; set; }

    public int NomineeId { get; set; }
    public Nominee Nominee { get; set; }
} 
```

它们之间的关系如下：

```
 1 to many between AccountHolder and Address
  1 to many between Nominee and Address
  1 to 1 between AccountHolder and Nominee 
```

流利的 Api 代码是：

```
 modelBuilder.Entity<AccountHolder>().HasOptional(p => p.Nominee)
                                            .WithRequired()
                                            .WillCascadeOnDelete(false);
        modelBuilder.Entity<Address>().HasRequired(p => p.AccountHolder)
                                      .WithMany(p => p.Address)
                                      .HasForeignKey(p => p.AccountHolderId)
                                      .WillCascadeOnDelete();
        modelBuilder.Entity<Address>().HasRequired(p => p.Nominee)
                                      .WithMany(p => p.Address)
                                      .HasForeignKey(p => p.NomineeId)
                                      .WillCascadeOnDelete(); 
```

首先，如果有任何改进的范围，请建议我。现在我在这里面临的问题是每当我插入时`AccountHolder`我必须创建一个空实例，`Nominee`而在插入时`Nominee`我必须创建一个空实例`AccountHolder`。如果我不这样做，就会发生我在上一个问题中提到的错误。任何人都可以指导我如何解决这个问题，请在您的解决方案中添加示例代码。

*我用于插入数据的代码是：*

```
var accountHolder = new AccountHolder() { 
                      AccountHolderId = 901, 
                      Address = new List<Address>() 
                      { 
                        new Address() 
                        { 
                          HouseNumber = hnumber, 
                          Street = street, 
                          Nominee = new Nominee() //this is the issue
                        } 
                      }, 
                      Nominee = new Nominee() 
                      {  
                          Address = new List<Address>() 
                          {
                             new Address() 
                             { 
                               HouseNumber = n_hnumber, 
                               Street = n_street, 
                               AccountHolder = new AccountHolder() //this is the issue
                             } 
                          } 
                       } 
}; 
```

* * *

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:21:05.847

好的，最后我得到了解决方案，但如果有比请建议我更好的解决方案。我所做的是在地址表中创建 FK 可选（可为空）：

*班级变化：*

```
public partial class Address
{
    public int AddressId { get; set; }    

    public int? AccountHolderId { get; set; }
    public AccountHolder AccountHolder { get; set; }

    public int? NomineeId { get; set; }
    public Nominee Nominee { get; set; }
} 
```

*流利的 api 的变化：*

```
modelBuilder.Entity<AccountHolder>().HasOptional(p => p.Nominee)
                                            .WithRequired()
                                            .WillCascadeOnDelete(false);
        modelBuilder.Entity<Address>().HasOptional(p => p.AccountHolder)
                                      .WithMany(p => p.Address)
                                      .HasForeignKey(p => p.AccountHolderId)
                                      .WillCascadeOnDelete();
        modelBuilder.Entity<Address>().HasOptional(p => p.Nominee)
                                      .WithMany(p => p.Address)
                                      .HasForeignKey(p => p.NomineeId)
                                      .WillCascadeOnDelete(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T15:51:44.843

据我了解您的需求，以下运行。

请注意，设置 AccountHolderId 有点困难，因为与 nominee 是一对一的关系，Nominee 的 PK 也是一个 FK。

```
using System;
using System.Linq;
using System.Data.Entity;
using System.Data.Entity.ModelConfiguration;
using System.ComponentModel.DataAnnotations;
using System.Collections.Generic;

namespace testEF {
    class Program {
        static void Main(string[] args) {
            using ( EFContext efc = new EFContext() ) {
                var AHAddress = new Address {
                    AddressId = 1,
                    HouseNumber = "150",
                    Street = "street",
                };
                var AHNominee = new Nominee {
                    NomineeId = 1,
                    Address = new List<Address>() { 
                        AHAddress
                    }};                
                var accountHolder = new AccountHolder() {
                    Address = new List<Address>() { 
                        AHAddress
                    },
                    Nominee = AHNominee
                };
                efc.Holders.Add(accountHolder);
                efc.SaveChanges();

                foreach (AccountHolder ah in efc.Holders) {
                    Console.WriteLine("{0} -> {1}", ah.AccountHolderId, ah.Nominee.NomineeId);
                }
            };
        }
    }

    public partial class AccountHolder {
        public int AccountHolderId { get; set; }

        public virtual List<Address> Address { get; set; }
        public virtual Nominee Nominee { get; set; }
    }

    public partial class Nominee {
        public int NomineeId { get; set; }

        public virtual List<Address> Address { get; set; }
    }

    public partial class Address {
        public int AddressId { get; set; }

        public String HouseNumber { get; set; }
        public String Street { get; set; }

        public int AccountHolderId { get; set; }
        public AccountHolder AccountHolder { get; set; }

        public int NomineeId { get; set; }
        public Nominee Nominee { get; set; }
    }

    public class EFContext : DbContext {
        public IDbSet<AccountHolder> Holders { get; set; }

        public EFContext()
            : base() {
            Database.SetInitializer<EFContext>(new DropCreateDatabaseAlways<EFContext>());
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder) {
            base.OnModelCreating(modelBuilder);

            modelBuilder.Entity<AccountHolder>().HasOptional(p => p.Nominee)
                                            .WithRequired()
                                            .WillCascadeOnDelete(false);
            modelBuilder.Entity<Address>().HasRequired(p => p.AccountHolder)
                                          .WithMany(p => p.Address)
                                          .HasForeignKey(p => p.AccountHolderId)
                                          .WillCascadeOnDelete();
            modelBuilder.Entity<Address>().HasRequired(p => p.Nominee)
                                          .WithMany(p => p.Address)
                                          .HasForeignKey(p => p.NomineeId)
                                          .WillCascadeOnDelete();
        }
    }    
} 
```

# python - 在 Python 中替换字符串中的名称

> ID：15187137
> 
> 赞同：0
> 
> 时间：2013-03-03T15:19:36.673
> 
> 标签：python, string, replace

我正在处理一项任务，我需要用我的名字替换 Alice。这是程序，

```
for i in range(10):
    print(i)
    print(split_alice[i]).replace_alice("Alice","Alex") 
```

所以我只需要帮助让程序`i`用我的名字而不是 Alice 来读取范围内的部分。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:21:44.477

只需`replace()`在字符串上使用方法..
**就像这样**

```
>>> mystr = 'My name is Alice'
>>> mystr.replace('Alice','Alex')
'My name is Alex' 
```

此外，如果您对任何事情有任何疑问，您应该使用`help()`.
就像你的情况一样：

```
>>> help(type(mystr))
Help on class str in module __builtin__:

class str(basestring)
 |  str(object) -> string
...
...
 |  replace(...)
 |      S.replace(old, new[, count]) -> string
 |      
 |      Return a copy of string S with all occurrences of substring
 |      old replaced by new.  If the optional argument count is
 |      given, only the first count occurrences are replaced.
 |  
...
...
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |  
 |  __new__ = <built-in method __new__ of type object>
 |      T.__new__(S, ...) -> a new object with type S, a subtype of T 
```

# html - How to put html tags in sinatra strings

> ID：15187141
> 
> 赞同：1
> 
> 时间：2013-03-03T15:20:10.333
> 
> 标签：html, ruby, sinatra

I just started Sinatra and try to render the name with `h1` html tag but its not working. Although the string is coming without html tag but it is also not rendering the html tag as desired let me know how do I handle it in `Sinatra`

My code -

```
get '/nesh' do
    name = "Swapnesh"
    "Hello <h1> #{name} </h1> Sinha"
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:55:53.327

The string you're returning from the `get '/nesh'` block is exactly what will be returned in the HTTP request, which is why it is not wrapped in `<html>...</html>` tags. If you want there to be surrounding tags such as `<html>`, `<body>`, etc., then you should create a Sinatra [view](http://www.sinatrarb.com/intro#Views%20/%20Templates) template, and pass your view information (such as `name`) into the view renderer.

A complete example might look like this:

**app.rb**:

```
set :views, settings.root + '/templates'

get '/nesh' do
  name = "Swapnesh"
  erb :hello, :locals => {:name => name}
end 
```

**templates/layout.erb**:

```
<html>
<body>
  <%= yield %>
</body>
</html> 
```

**templates/hello.rb**:

```
<h1>Hello <%= name %> Sinha</h1> 
```

Notice I also used a Sinatra [layout](http://www.sinatrarb.com/intro#Named%20Templates), which is a base template for all rendered actions (unless opted-out).

Finally, you could implement it all in one file using [named templates](http://www.sinatrarb.com/intro#Named%20Templates):

```
template :layout do
  <<-EOF
<html>
<body>
  <%= yield %>
</body>
</html>
EOF
end

template :hello do
  "<h1>Hello <%= name %> Sinha</h1>"
end

get '/nesh' do
  name = "Swapnesh"
  erb :hello, :locals => {:name => name}
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:53:36.610

If you want to use `HTML` and Sinatra, you should use `erb`, or something similar to display the `HTML`.

Example your code:

```
get '/nesh' do
    name = "Swapnesh"
    erb :resultPage, :locals => {:name => name}
end 
```

Example resultPage.erb:

```
<p> Hello <h1> <%=#{name}%> </h1> Sinha</p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T17:59:04.413

I am not sure if this is the correct way or not but i tried this way and it works..

```
require 'sinatra'

get '/nesh' do
    @name = "Swapnesh"
    erb :test
end

__END__
@@test
<!doctype html>
<html lang="en">
<head>
<title>Test Sinatra pass</title>
<meta charset="utf-8">
</head>
<body>
<p> Hello <h1> <%= @name %> </h1> Sinha</p>
</body>
</html> 
```

# java - 比较输入文件中列表中的数字

> ID：15187143
> 
> 赞同：2
> 
> 时间：2013-03-03T15:20:19.660
> 
> 标签：java, jgrasp

我正在介绍 Java，但对这一挑战感到困惑。我在这里搜索了我的书和有用的链接，但没有找到与我正在做的事情有关的任何内容。

挑战是在记事本文件中创建一个数字列表。java程序必须导入数字，比较每个数字，然后打印出列表中哪个数字具有最低值。

在此处输入代码

这是我的代码

```
import java.io.*;
import java.util.Scanner;

/**
Aaron Moores
March 2, 2013
Input: Numbers file
Output: Highest number, lowest number
*/

public class LargenSmall
{
    public static void main(String[] args) throws IOException
    {
    String filename;        //Numbers file
    double lowest;

    //Open the file
    File file = new File("Number.txt");
    Scanner inputFile = new Scanner(file);

    lowest = 0.0;

    //Read all the values in Numbers file and find the lowest value
    while (inputFile.hasNext())
    {
    //Read a number in the file
    double number = inputFile.nextDouble();
    lowest =  < number;
    }

    //Close file
    inputFile.close();

    //Print out lowest value in the list
    System.out.println("The lowest number in your file called, " +
                            "Numbers.txt is " +lowest);
    }
} 
```

我的问题是弄清楚如何格式化比较每个值以存储最小值的代码行。如果我将 (lowest = minimum < number) 更改为 (lowest = minimum + number) 并添加一个累加器，程序将添加我文件中的所有值并显示它们，所以我知道程序的导入部分有效。我只是不清楚如何制定比较语句以使其显示最低值。

请帮助我难住了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:24:33.657

首先，初始化`lowest`为正无穷大，使其大于任何输入：

```
double lowest = Double.POSITIVE_INFINITY; 
```

在循环中，只需取较小的`lowest`和 输入：

```
lowest = Math.min(lowest, number); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:23:36.177

尝试这样的事情：

```
while (inputFile.hasNext())
{
//Read a number in the file
double number = inputFile.nextDouble();
if (number < lowest) lowest = number;
} 
```

或者你可以试试：

```
Math.min(lowest, number); 
```

每次都在循环中。

# ruby-on-rails - 许多用户“拥有”的模型的 Rails 关联

> ID：15187145
> 
> 赞同：2
> 
> 时间：2013-03-03T15:20:20.373
> 
> 标签：ruby-on-rails, associations, has-many-through, has-many, model-associations

我有一个简单的 Rails 应用程序，可用作数字标牌应用程序的 cms。
在这个应用程序中，将有一个预定义样式池，我想向所有用户提供这些样式。
每种样式都包含背景图片、一些 CSS 和视频。

我的目标是进行设置，我可以在其中准备不同的样式，使用 rails admin 添加它们，并且每个用户都应该有一个菜单，他可以在其中为他的帐户选择其中一种样式作为**active_style**。

听起来很简单，但我卡住的地方是**User**和**Style**模型之间的关联。
我尝试了几个小时不同的东西（has_many: / has_many_though / has_and_belongs_to_many），但我无法达到每个用户可以选择一个样式对象并将其设为 active_style，并且一次只允许**一个**active_style 的地步。

我只是想知道最好的方法是什么，如果有人可以提供帮助，我会很高兴。
我对 Rails 编程比较陌生，如果这看起来很愚蠢，请原谅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:30:17.317

我知道这听起来不直观，但我认为在这种情况下你想要的关联是“belongs_to”。我说这很不直观，因为说“一个用户属于一个活跃的样式”听起来很奇怪，但是“has_one”不允许一个样式成为多个用户的活跃样式。

以下代码假设您的用户表上有一个“active_style_id”整数列，它将存储外键：

```
User < ActiveRecord::Base
  belongs_to :active_style, class_name: 'Style'
end 
```

这将让您执行以下操作：

```
style = Style.find(...)
user = User.create(active_style: style)
user.active_style # => style 
```

# osgi - 在 Felix OSGI 中的 JavaFX 中使用自定义 css 时记录的异常

> ID：15187147
> 
> 赞同：0
> 
> 时间：2013-03-03T15:20:26.200
> 
> 标签：osgi, javafx-2, apache-felix

尝试在 JavaFX 2.2（来自 JDK 7 更新 11）中使用我自己的自定义 css 时，我将以下异常记录到 stderr。这很有趣，因为 css 实际上是在我的应用程序中找到并使用的，所以唯一错误的是日志中的异常。我也以这种方式加载其他资源（图像、字体等），并且在这些情况下没有记录异常。

我正在像这样加载css：

```
val cssResource = getClass.getResource("/com/openaf/browser/gui/resources/openaf.css").toExternalForm
println("CSS Resource:    " + cssResource)
println("")
scene.getStylesheets.add(cssResource) 
```

你可以从输出中看到它被发现（我不确定为什么在异常中它说*** *.bss 但也许那是 felix 做一些内部包重命名。

有谁知道为什么要记录此异常和/或如何摆脱它？

```
CSS Resource:    bundle://21.57:1/com/openaf/browser/gui/resources/openaf.css

java.io.IOException: Resource does not exist: bundle://21.57:1/com/openaf/browser/gui/resources/openaf.bss
java.io.IOException: Resource does not exist: bundle://21.57:1/com/openaf/browser/gui/resources/openaf.bss
at org.apache.felix.framework.URLHandlersBundleURLConnection.<init>(URLHandlersBundleURLConnection.java:136)
at org.apache.felix.framework.URLHandlersBundleStreamHandler.openConnection(URLHandlersBundleStreamHandler.java:64)
at java.net.URL.openConnection(URL.java:971)
at java.net.URL.openStream(URL.java:1037)
at com.sun.javafx.css.Stylesheet.loadBinary(Stylesheet.java:201)
at com.sun.javafx.css.StyleManager.loadStylesheetUnPrivileged(StyleManager.java:572)
at com.sun.javafx.css.StyleManager.loadStylesheet(StyleManager.java:411)
at com.sun.javafx.css.StyleManager.updateStylesheets(StyleManager.java:858)
at javafx.stage.Window.impl_visibleChanging(Window.java:818)
at javafx.stage.Stage.impl_visibleChanging(Stage.java:922)
at javafx.stage.Window$10.invalidated(Window.java:689)
at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:127)
at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:161)
at javafx.stage.Window.setShowing(Window.java:782)
at javafx.stage.Window.show(Window.java:797)
at javafx.stage.Stage.show(Stage.java:229)
at com.openaf.browser.gui.BrowserStageManager.createStage(BrowserStageManager.scala:64)
at com.openaf.browser.gui.BrowserStageManager.start(BrowserStageManager.scala:41)
at com.openaf.browser.gui.BrowserBundleActivator$$anonfun$startUp$2.apply$mcV$sp(BrowserBundleActivator.scala:32)
at com.openaf.browser.gui.utils.BrowserUtils$$anon$1.run(BrowserUtils.scala:48)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:31:24.157

将您的 CSS 文件转换为二进制 BSS 格式：

[http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABCACBD](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABCACBD)

或在运行应用程序时使用“-Dbinary.css=false”。

另请注意，我最近发布了 Drombler FX 的初始版本，这是一个基于 OSGi 和 Maven（POM-first）的 JavaFX 模块化 RCP：

[http://puces-blog.blogspot.ch/2012/12/dromler-fx-building-modular-javafx.html](http://puces-blog.blogspot.ch/2012/12/drombler-fx-building-modular-javafx.html)

[http://wiki.dromler.org/GettingStarted](http://wiki.drombler.org/GettingStarted)

默认情况下，它也使用 Apache Felix。也许你觉得它很有用。

# python - 如何在 mac 上从 $PATH 中删除某个路径

> ID：15187153
> 
> 赞同：1
> 
> 时间：2013-03-03T15:21:11.017
> 
> 标签：python, macos, python-2.7, path, terminal

我需要摆脱`/Library/Frameworks/Python.framework/Versions/2.7/bin`我`$PATH`在 Mac OS X Lion 上的变量。我打开了几个文件，它们在路径中添加了一些内容，但没有找到添加 python 路径的位置。这是几个文件和路径变量的输出：

`echo $PATH`返回

```
/opt/local/bin:/opt/local/sbin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/opt/local/bin:/opt/local/sbin:/Users/friedrich/.rvm/gems/ruby-1.9.3-p362/bin:/Users/friedrich/.rvm/gems/ruby-1.9.3-p362@global/bin:/Users/friedrich/.rvm/rubies/ruby-1.9.3-p362/bin:/Users/friedrich/.rvm/bin:/Users/friedrich/.rbenv/shims:/Users/friedrich/.rbenv/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin:/usr/local/git/bin 
```

文件`/etc/paths/`

```
/usr/local/bin
/usr/bin
/bin
/usr/sbin
/sbin 
```

文件`~/.profile`

```
export PATH=$PATH:/usr/local/git/bin:/usr/local/Cellar/todo-txt/2.9/bin 
```

文件`~/.bash_profile`

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*

# todo.txt script path
source /usr/local/Cellar/todo-txt/2.9/etc/bash_completion.d/todo_completion complete -F _todo t

# MacPorts Installer addition on 2013-03-01_at_21:26:56: adding an appropriate PATH variable for use with MacPorts.
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts. 
```

最后一个向路径添加内容的文件似乎正在`.bash_profile`添加`export PATH=/opt/local/bin:/opt/local/sbin:$PATH`，所以我需要在此之前添加一些内容的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T21:28:43.187

在 OS X 上，还有更多方法可以将内容添加到 PATH 中。

除了`/etc/paths`文件，还有一个目录`/etc/paths.d`。在该目录中有与 . 格式相同的文本文件`/etc/paths`。in 每个文件的行在 in 行之后和 in 内容之前`/etc/paths.d`添加到您的 PATH中（尽管这取决于 in 的确切内容）。`/etc/paths``.bash_profile``.bash_profile`

如果您不需要的 Python 框架路径不在上面，我可以考虑尝试其他两个地方。在您的主目录中还有`/private/etc/paths`and `/private/etc/paths.d`，并且可能还有一个`.bashrc`文件。

我希望这对你有用。如果没有，那么我将使用的解决方法是将最后一个命令`.bash_profile`附加`/usr/bin`到 PATH 的前面。这样，Apple 版本的 Python（链接到 in `/usr/bin`）将在您的 Python 框架版本之前找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:39:23.800

考虑到路径添加到`$PATH`变量的顺序（因此您要删除第三个元素），您可以在末尾添加如下命令`.bash_profile`：

```
 export PATH=`echo $PATH | cut -d":" -f1,2,4-` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T21:36:47.103

您可以使用参数扩展修剪路径的固定部分。将其添加到末尾`.bash_profile`（或者至少在添加违规路径后处理它的时间足够晚）：

```
PATH=${PATH/\/Library\/Frameworks\/Python.framework\/Versions\/2.7\/bin:} 
```

（所有的反斜杠都是不幸的，但你至少只需要输入一次。）

# javascript - 使用 JS 从表单中打印出订单列表

> ID：15187154
> 
> 赞同：0
> 
> 时间：2013-03-03T15:21:14.043
> 
> 标签：javascript, forms, loops, textarea

我一直在搜索，似乎无法找到我简单问题的答案。基本上我已经创建了这个表格和`textarea`下面，我想让我的订单（你可以使用同一个表格制作多个订单）显示在`textarea`下面，旁边有订单号。

我不知道该怎么做。我的问题是我只是继续骑第一个帖子，我不能让我的号码增加。任何帮助都会很棒！

这是我的表格...

```
<div id="wrapper">
<h2>EMARKS REQUEST FORM</h2>
<table border="1">
<form id="requestForm">
<tr>
    <td>ID</td>
    <td><input type="text" class="inputText" id="id"/></td>
</tr>
<tr>
    <td>Course Number</td>
    <td><input type="text" class="inputText" id="courseNum" /></td>
</tr>
<tr>
    <td>Description</td>
    <td><input type="text" class="inputText" id="des" /></td>
</tr>
<tr>
    <td>Distance Education</td>
    <td id="checkBox"><input type="checkbox" id="distance"/></td>
</tr>
<tr>
    <td>Additional Marks</td>
    <td><input type="text" class="inputText" id="marks" /></td>
</tr>
</table> <br/>
Number of Courses <input type="text" value="0" /> Total Cost <input type="text" value="0" id="totalCost" /> <br/> <br/>
<h2 style="display:inline">Reasons:</h2>
<input type="radio" value="Doctor Note" />Doctor Note <input type="radio" value="Lack of Work" />Lack of Work <input type="radio" value="Some Compassion" />Some Compassion <br/><br/>
<input type="button" value="Go for It" onclick="getPrice()" /> <input type="button" value="Clear and Reset" />
<select>
    <option value="First Time User">First Time User</option>
    <option value="Frequent Flier">Frequent Flier</option>
    <option value="Buying a Degree">Buying a Degree</option>
</select>
<h2>Summary of Your Request(s)</h2>
<textarea rows="10" cols="63" id="summary">
test
</textarea> <br/>
<h2>Danger Range</h2>
<textarea rows="10" cols="63">
test
</textarea> 
</form>
</div> 
```

还有我的 Javascript

```
var itemNum = 0;
itemNum++;
var textBoxes = itemNum + " " + document.getElementById("id").value + " " + document.getElementById("courseNum").value + " " + document.getElementById("des").value + " " + document.getElementById("marks").value +" " + totalCost.value;
                var summaryInfo = textBoxes;
            summary.text = summaryInfo; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:29:25.523

使用 += 将字符串附加到现有字符串。

```
summary.value += summaryInfo 
```

此外，您将 itemNum 初始化为 0，然后每次执行时将其递增 1。您需要将其初始化一次，然后每次递增，以获得您想要的效果。

```
var itemNum = 0;

function MyButtonClickHandler()
{
  itemNum++;
  var textBoxes = itemNum + " " + document.getElementById("id").value + " " +   document.getElementById("courseNum").value + " " + document.getElementById("des").value + " " + document.getElementById("marks").value +" " + totalCost.value;
                var summaryInfo = textBoxes;
  summary.value += summaryInfo;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:23:30.693

问题在这里：

```
summary.text = summaryInfo; 
```

属性是`value`，不是`text`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:39:40.890

这里有三件事，你有问题： -

1.  `form`标签未在正确的位置打开/关闭
2.  `summary`变量未声明。
3.  正如**minitech**所说，没有属性叫做`text`. 它是`value`。

    *   这样做

        ```
         document.getElementById("summary").value = textBoxes; 
        ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T15:58:25.567

```
If(itemnum==""){
Itemnum=1;
}
Else
{
Itemnum=Itemnum+1;
} 
```

请检查语法

# java - 如何在jsp页面中保留表单值？

> ID：15187163
> 
> 赞同：0
> 
> 时间：2013-03-03T15:22:29.100
> 
> 标签：java, jsp, web-applications, servlets

这是我的代码，当我单击超参考链接时，如何保留表单的值。（a href：代码底部）

```
<form action="APPServlet">
    <div class="">
        <div class="">Search For:</div>
        <div class="">
            <input type="text" size="45" align="right" name="searchRequest">
        </div>
    </div>
    <div class="">
        <div class="">Exclude:</div>
        <div class="">
            <input type="text" size="45" align="right" name="excludeWords">
        </div>
    </div>
    <div class="">
        <div class="">In Modules:</div>
        <div class="">
            <select name="modules">
                <option name="module" value="all">All modules</option>
                <c:forEach var="module" items="${modelObj.modules}">
                    <option name="module" value="${module}">${module}</option>
                </c:forEach>
            </select>
        </div>
    </div>
</form>

<!--  ahref outside the form , this does not work
    &searchRequest=${searchRequest} <- Guess the value is out of scope
-->
<div class="div-table-row">
    <div class="div-table-single-col">
        ${question.id} <a href="APPServlet?id=${question.id}&searchRequest=${searchRequest}">${question.topic}</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:28:52.240

您有多种可能性，并且都涉及 JavaScript。

1.  单击链接时，通过将表单输入的所有值附加为 URL 的参数，使用 JavaScript 更改其 href

2.  单击链接时，在包含问题 ID 的表单中添加一个隐藏字段，更改表单的操作以使其转到 MCQApp 而不是转到 APPServlet，然后提交表单

3.  最干净的一个：单击链接时，向以 HTML 片段（或数据）响应的 URL 发送 AJAX 请求，并用此 HTML 片段替换您要更新的页面部分，从而将表单保留为它在页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:29:23.320

有两种方法，如果您正在使用会话，请将其存储为会话的属性。但是如果你不使用会话，你可以使用 Cookies，只需将你想要的值存储在一个新的 cookie 中，然后调用 cookie 并获取值。

会话也是 cookie，但它们还有其他功能，cookie 更简单，可以帮助您存储以后可以重用的值。此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:30:25.357

保持模型中传递的数据并在jsp中使用它，例如，

将所有输入变量保留在搜索模型对象中，并在调用搜索时对其进行更新。在呈现响应之前将 searchRequest 保留在请求属性中。

# c# - INSERT BYTE[] TO Sql 无参数

> ID：15187166
> 
> 赞同：4
> 
> 时间：2013-03-03T15:22:53.227
> 
> 标签：c#, sql

我想做一个原始 SQL 查询，将加密值 ( `byte[]`) 添加到 SQL 列 ( `varbinary`)，而不使用如下参数：

```
 byte[] value = GetEncryptedValue();
 string query = "INSERT INTO Table1 VALUES('" + value.ToString() + "')"; 
```

我要插入的列数据类型是`varbinary`. 我需要一些使用 value.ToString() 的函数。这个怎么写？我只需要 sql 中的 master.dbo.fn_varbintohexstr 之类的函数！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T15:27:13.220

二进制文字采用 形式`0x6ABCDEF`，即`0x`后跟十六进制形式的字节。

您可以使用它来将字节数组转换为文字值：

```
string literal = "0x" + String.Join("", value.Select(n => n.ToString("X2"))); 
```

二进制文字周围没有撇号：

```
string query = "INSERT INTO Table1 VALUES(" + literal + ")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-24T21:21:00.107

另一种方法是使用`BitConverter`

```
byte[] value = GetEncryptedValue();
string query = 
    "INSERT INTO Table1 (c1) VALUES(0x" + BitConverter.ToString(value).Replace("-", "") + ")"; 
```

`BitConverter.ToString`返回类似的东西`01-02-03....`

# c# - Umbraco mvc，渲染部分视图无法解析为类型

> ID：15187170
> 
> 赞同：2
> 
> 时间：2013-03-03T15:23:07.183
> 
> 标签：c#, asp.net-mvc, razor, partial-views, renderpartial

我有一个位于`~/Views/Partials/menubar.cshtml`.

在我的 ~/Views 文件夹中，我有一个名为`Menubar.cshtml`<- 这个 母版页调用的母版页，`@{ Html.RenderPartial("menubar") }`但它说：

> “无法解析部分视图”菜单栏

我怎样才能解决这个问题？我已经尝试过像这样的直接路径

`@{ Html.RenderPartial("~/Views/Partials/menubar.cshtml") }`仍然是同样的问题。

不得不说，我正在使用 Umbraco 4.11 和 Visual Studio 2012 和 resharper。

这是我的母版页的代码（它有另一个母版页）：

```
 @inherits Umbraco.Web.Mvc.UmbracoTemplatePage
    @{
       Layout = "Master.cshtml";
     }
    <div id="header">
        <a href="/"><img src="/images/logo.gif" width="259" height="65" /></a>
        <div id="sitedescription">
            <h1>Runway</h1>
            <h1>Off to a great start</h1>
        </div>
        @{ Html.RenderPartial("Menubar");  }
    </div>
    @RenderBody() 
```

这是我的视图的代码，简化只是为了让它开始工作，将添加一些逻辑，否则视图将没有意义：

```
 @inherits Umbraco.Web.Mvc.UmbracoTemplatePage
    <div id="mainmenu">
        <ul id="topNavigation">
            <li class="home current"><a href="/">Home</a></li>
            <li><a class="navigation" href="/"><span>Newz</span></a></li>
            <li><a class="navigation" href="/"><span>Programmering</span></a></li>
            <li><a class="navigation" href="/"><span>Support</span></a></li>
            <li><a class="navigation" href="/"><span>Repair</span></a></li>
        </ul>
    </div>
    <div class="mainmenucorner">&nbsp;</div> 
```

这是视觉工作室中的结构图像：

[![项目结构](../Images/44c78978ed9320ea34abb8e733710a4d.png)](https://i.stack.imgur.com/1u1V2.jpg)

谁能告诉我我在这里缺少什么，现在已经花了几个小时。

**编辑** 我发现 id 我在 /Views/Shared 下找到它，它会自动找到它。似乎 umbraco 将此页面发布为主页 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:57:37.193

尝试将部分重命名为 _menuBar.cshtml，并使用以下方法渲染它：

```
@Html.Partial("_menuBar") 
```

这个对我有用。

# java - Onclick imagebutton-action（菜单）

> ID：15187178
> 
> 赞同：0
> 
> 时间：2013-03-03T15:23:36.050
> 
> 标签：java, android, eclipse

我正在制作一个应用程序，当它启动时它会启动 Mainactivity.java Mainactivity.java 打开一个带有 9 个 Imagebuttons 的布局。如何在 Mainactivity.java 中的代码中实现一旦单击它会打开另一个活动（如 telefoonnummers.java）？对不起我的英语不好，但我是荷兰语和非母语人士。我在 Mainactivity.java 中有这段代码：

```
package com.example.rome;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.EditText;
import android.widget.Button;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

如您所见，非常干净，但是我该如何添加实现，请各位帮忙？？？我的 Imagebuttons 都被称为 imagebutton1、imagebutton2 等。顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:39:51.497

后

```
setContentView(R.layout.activity_main); 
```

为每个 ImageButton 添加：

```
findViewById(R.id.imagebutton1).setOnClickListener(this); 
```

使类实现`OnClickListener`

```
class MainActivity extends Activity implements View.OnClickListener { 
```

并添加此方法：

```
@Override
public void onClick(View v){
  switch(v.getId()){
    case R.id.R.id.imagebutton1:
      startActivity(new Intent(telefoonnummers.class));
      break;
    case R.id.R.id.imagebutton2:
      startActivity(new Intent(telefoonnummers.class));
      break;
    //-- more cases --
  }
} 
```

# scala - Netbeans Maven 项目到 IDEA 12

> ID：15187182
> 
> 赞同：0
> 
> 时间：2013-03-03T15:23:53.193
> 
> 标签：scala, maven, intellij-idea, war

**短版：**我想将**Maven 生成的 WAR**部署到本地 Tomcat 服务器，而不是使用内部 IDEA 进程构建战争，因为生成的 WAR 文件与 Maven 生成的文件不同。

**长版：**我一直在为我的 Maven Java 项目使用 Netbeans IDE。其中一个模块被打包为 WAR，应该部署到 tomcat 服务器。在 Netbeans 中，当我在 Web 模块上选择“运行”时，它会询问应用程序服务器配置，然后它运行 maven 的“包”目标，并可能通过 Tomcat 管理器将应用程序（生成的 WAR）部署到 Tomcat 服务器。到现在为止还挺好。

我们现在正在切换到 Scala 语言。Scala 类扩展了旧的 Java 类，该项目现在是“混合”的。我已将 Maven 配置为将项目编译为 scala 和 java 代码的混合。Maven 生成一个 WAR，然后可以毫无问题地将其部署到 Tomcat 服务器 - 一切正常。

现在我想切换到**Intellij-idea 12** IDE。但我有一个问题：IDEA 拒绝部署 Maven 创建的工件，并坚持自己构建一个。战争不一样，不能用。有没有办法告诉 IDEA 使用 Maven 生成的 WAR，而不是尝试自己制作？

只是为了记录，我已经阅读了这些文章：

*   [http://riddhimandas.com/blog/111](http://riddhimandas.com/blog/111)
*   [http://www.jetbrains.com/idea/webhelp/configuring-web-application-deployment.html](http://www.jetbrains.com/idea/webhelp/configuring-web-application-deployment.html)通过 IDEA 手动构建 WAR -**想要 maven 生成一个**
*   [IntelliJ IDEA：Maven，项目编译和部署](https://stackoverflow.com/questions/5104534/intellij-idea-maven-project-compilation-and-deployment)这里有一个提示，IDEA 可以从“目标”目录部署 Maven 工件，但没有关于如何做到这一点的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:06:12.627

在 CrazyCoder 的帮助下，我想通了。

您可以通过选择外部源使 Intellij-Idea 上传您的战争 ![外部源添加对话框](../Images/ce3648d30044c766e6e9162759b620d0.png)

但这还不是全部，即使您有一个 context.xml 文件来定义您的 WAR 文件中的上下文根：http: [//docs.oracle.com/javaee/1.4/tutorial/doc/WebApp3.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/WebApp3.html)

您必须为您部署的每个工件指定一个（除非有人纠正我） ![您必须指定根上下文](../Images/79c0f4fd0656a896ade586314fabbe41.png)

启动前部分可用于告诉 Idea 要运行的 Maven 目标（如果有） ![在此处输入图像描述](../Images/b6e9fc521738edda1aeabe3b1c821f66.png)

# python - 如何扩展 1D FFT 代码以在 python 中计算图像（2D）的 FFT？

> ID：15187184
> 
> 赞同：1
> 
> 时间：2013-03-03T15:24:01.067
> 
> 标签：python, image-processing, fft

我正在尝试扩展适用于图像的 python 中的一维数组的 fft 代码。实际上我知道问题出在扩展的逻辑上。我对 FFT 了解不多，我必须提交图像处理作业。我将感谢任何提示或解决方案

这是代码，实际上，我正在尝试在 python 中为 FFT 创建一个模块，并且在 Rosetta Code 网站的帮助下，它已经适用于 1D。

```
from cmath import exp, pi
from math import log, ceil

def fft(f):
    N = len(f)
    if N <= 1: return f
    even = fft(f[0::2])
    odd =  fft(f[1::2])
    return [even[k] + exp(-2j*pi*k/N)*odd[k] for k in xrange(N/2)] + \
           [even[k] - exp(-2j*pi*k/N)*odd[k] for k in xrange(N/2)]

def pad(f):
    n = len(f)
    N = 2 ** int(ceil(log(n, 2)))
    F = f + [0] * (N - n)
    return F, n 

def unpad(F, n):
    return F[0 : n]

def pad2(f):
    m, n = len(f), len(f[0])
    M, N = 2 ** int(ceil(log(m, 2))), 2 ** int(ceil(log(n, 2)))
    F = [ [0]*N for _ in xrange(M) ]
    for i in range(0, m):
        for j in range(0, n):
            F[i][j] = f[i][j]
    return F, m, n

def fft1D(f):
    Fu, n = pad(f)
    return fft(Fu), n

def fft2D(f):
    F, m, n = pad2(f)
    M, N = len(F), len(F[0])
    Fuv = [ [0]*N for _ in xrange(M) ]
    for i in range(0, M):
        Fxv = fft(F[i])
        for j in range(0, N):
            Fuv[i][j] = (fft(Fxv))[j]
    return Fuv, [m, n] 
```

我用 tis 代码调用了这个模块：

```
from FFT import *
f= [0, 2, 3, 4]
F = fft1D(f)
print f, F
X, s = fft2D([[1,2,1,1],[2,1,2,2],[0,1,1,0], [0,1,1,1]])
for i in range(0, len(X)):
    print X[i] 
```

它的输出是：

```
[0, 2, 3, 4] ([(9+0j), (-3+2j), (-3+0j), (-3-2j)], 4)
[(4+0j), (4-2.4492935982947064e-16j), (4+0j), (8+2.4492935982947064e-16j)]
[(8+0j), (8+2.4492935982947064e-16j), (8+0j), (4-2.4492935982947064e-16j)]
[0j, -2.33486982377251e-16j, (4+0j), (4+2.33486982377251e-16j)]
[0j, (4+0j), (4+0j), (4+0j)] 
```

1d 的第一个很好，因为我用 Matlab 的输出验证了结果，但是对于第二个，Matlab 的输出是：

```
>> fft([1,2,1,1;2,1,2,2;0,1,1,0;0,1,1,1])

ans =

   3.0000             5.0000             5.0000             4.0000          
   1.0000 - 2.0000i   1.0000                  0 - 1.0000i   1.0000 - 1.0000i
  -1.0000             1.0000            -1.0000            -2.0000          
   1.0000 + 2.0000i   1.0000                  0 + 1.0000i   1.0000 + 1.0000i 
```

输出不同，这意味着我在代码逻辑中做错了。请不要打扰，因为我到目前为止还没有正式学习过 FFT，所以我无法完全理解数学，也许在我研究过之后，我可能会解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:04:05.587

您的代码有点难以理解，但看起来您两次都沿着相同的方向进行 FFT。查找 FT 的积分，您会看到`x`和`y`积分是独立的。那就是（对不起，这个符号很糟糕，`'`表示傅里叶空间中的一个函数）

```
FT(f(x, y), x) -> f'(k, y)
FT(f'(k, y), y) -> f''(k, w) 
```

因此，您要做的是获取每*行*的 FFT （而不是 N 1D FFT）并将结果推入一个新数组（它将您从`f(x, y) -> f'(k, y)`）。然后对该结果数组的每一*列*进行 FFT（执行 M 1D FFT）并将这些结果推入另一个新数组（这会将您从`f'(k, y) -> f''(k, w)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:25:31.220

我同意 isedev 的观点，即你应该使用 numpy。它已经有一个很棒的 fft 包，可以在 n 维中进行转换。

[http://docs.scipy.org/doc/numpy/reference/routines.fft.html](http://docs.scipy.org/doc/numpy/reference/routines.fft.html)

[http://docs.scipy.org/doc/numpy-1.4.x/reference/generated/numpy.fft.fft.html](http://docs.scipy.org/doc/numpy-1.4.x/reference/generated/numpy.fft.fft.html)

# url - Htaccess url rewrite - 将大 url 剥离为用户友好的

> ID：15187190
> 
> 赞同：-2
> 
> 时间：2013-03-03T15:24:22.260
> 
> 标签：url, rewrite

我有链接说[http://www.domain.com/index.php?route=page/view&id=cs-schedule](http://www.domain.com/index.php?route=page/view&id=cs-schedule)

我想将其重写为[http://www.domain.com/page/view/id/cs-schedule](http://www.domain.com/page/view/id/cs-schedule)

它是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:31:15.377

尝试这个：

```
RewriteEngine On
RewriteRule ^(.+)/(.+)$ main.php?route=$1&id=$2 
```

# ios - 如何在初始化阶段使用 UIView 委托

> ID：15187191
> 
> 赞同：1
> 
> 时间：2013-03-03T15:24:26.237
> 
> 标签：ios, uiview, delegates, initialization

我有一个视图控制器，它有几个视图。这些视图需要来自模型的数据，我使用视图控制器作为委托向它们提供数据。

问题是它们在初始化时需要一些数据（在 initWithFrame/awakeFromNib 中）。在那个阶段，委托尚未设置（它在视图控制器的 viewDidLoad 中设置，在视图初始化后调用）。

我可以通过直接从视图访问模型来解决它，但是如果每个视图都直接访问模型，那将造成相当混乱。

我可以在哪里设置委托以便在视图的 awakeFromNib/init 中使用它？

# c++ - 运行 .sh 脚本而不是可执行文件

> ID：15187203
> 
> 赞同：1
> 
> 时间：2013-03-03T15:26:17.120
> 
> 标签：c++, linux, eclipse

![在此处输入图像描述](../Images/7831d3dcf3f3983cb5840ab80549d9ea.png)如何在 Eclipse 中运行 .sh 文件而不是可执行文件？

我需要使用特殊命令启动可执行文件。我的 sh 文件看起来像这样`optirun ./executable`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:42:40.150

您需要通过将 shell 与脚本示例一起传递来做到这一点： `optirun sh ./executable`

# java - 根据模型值隐藏 JTable 中的单个单元格

> ID：15187205
> 
> 赞同：1
> 
> 时间：2013-03-03T15:26:25.443
> 
> 标签：java, swing, jtable, tablecellrenderer, abstracttablemodel

我有一个 JTable 显示来自允许整数值 0、1 和 2 的模型的值。这些值显示在 9 x 9 网格中（如数独游戏板）。

**我的问题是：**如何从 GUI 中隐藏零值？

也就是说，在模型值为零的表格单元格中，我不希望 GUI 显示任何值。但是，由于进行了计算，模型必须包含零值。

我尝试使用 DefaultTableCellRenderer 并通过使用 setVisible(true) 将单元格组件设置为不可见（如在[此问题](https://stackoverflow.com/questions/3598032/hiding-a-particular-cell-grid-in-jtable)中），但我没有得到任何结果。

我已经设法使用 DefaultTableCellRenderer 来根据模型状态切换任何单元格的背景颜色（如果单元格被认为是“负数”）。**我确实想保持背景颜色可见**。

我对java有点陌生，所以也许这只是一个更新问题？

这是我的 DefaultTableCellRenderer：

```
private static class GameTableRenderer extends DefaultTableCellRenderer
{
    private static final long serialVersionUID = 1L;

    @Override
    public Component getTableCellRendererComponent(
        JTable table, Object value, boolean isSelected,
        boolean hasFocus, int row, int column)
    {
        Component c = super.getTableCellRendererComponent(
            table, value, isSelected, hasFocus, row, column);

        GameModel model = (GameModel) table.getModel();

        if(model.isNegative(row, column))
            c.setBackground(Color.lightGray);
        else
            c.setBackground(Color.white);

        if(model.getAbsoluteValueAt(row, column) == 0)
            c.setVisible(false);
        else
            c.setVisible(true);

        return c;
    }
} 
```

“getAbsoluteValueAt”方法返回一个整数 0、1 或 2。背景颜色的变化工作得很好。

我的模型扩展了 AbstractTableModel，而 JTable 使用如下渲染器：

```
table.setDefaultRenderer(int.class, renderer); 
```

我希望这些信息足以解释我的问题以及我迄今为止所做的努力。请询问更多信息，我会提供。

先感谢您。/弗雷德里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:39:36.207

或者，您可以使用以下内容：

```
 if(model.getAbsoluteValueAt(row, column) == 0)
        c.setForeground(c.getBackground());
    else
        c.setForeground(Color.BLACK); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T15:37:23.020

与其使组件不可见，不如将其文本设置为空字符串：

```
if (model.getAbsoluteValueAt(row, column) == 0) {
    ((JLabel) c).setText("");
} 
```

# ruby-on-rails - 访问其他模型

> ID：15187219
> 
> 赞同：0
> 
> 时间：2013-03-03T15:28:55.550
> 
> 标签：ruby-on-rails, testing, rspec, models

我正在尝试让它工作。我进行了适当的关联，但仍然失败。看看我的代码。

# post.rb

```
class Post < ActiveRecord::Base
  belongs_to :user
  attr_accessible :content

  before_create :format_content

  validates :content, presence:true, length: {minimum:21}

  def format_content
    profil = self.user.profile
    if profil.gender == "Mężczyzna"
      "Wiadomość od spottera: #{self.content}"
    elsif profil.gender == "Kobieta"
      "Wiadomość od spotterki: #{self.content}"
    end
  end
end 
```

# post_spec.rb

```
describe "Properly formats content" do
    let(:user) {FactoryGirl.create(:user)}
    let!(:poscik) {FactoryGirl.create(:post) }
    before(:each) {user.create_profile!(gender: "Kobieta", email: "donatella@dostojnie.pl")} 
```

# rspec_failures

```
Post creation valid should have content Failure/Error: poscik = user.posts.create(content: "Weird #{"a"*25}") NoMethodError: undefined method `gender' for nil:NilClass 
```

如何正确访问模型中的其他类以及为什么找不到我的方法？我了解错误消息 - 它说我的配置文件类未定义

* * *

# 用户工厂

```
FactoryGirl.define do
  factory :user do
    sequence(:email) {|i|"maestro#{i}@dot.pl"}
    password "kravmaga1290"
    association :profile, factory: :profile, strategy: :build
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:50:39.357

看来您还没有创建一个类的对象`Profile`。我认为这是在抱怨你打电话来获取 profile.gender 的 nil 类。

尝试在工厂中添加如下内容：

```
Factory.define :user do |f|
  f.after_build do |user|
    user.profile ||= Factory.build(:profile, :user => user)
  end
end 
```

当然，您还必须定义配置文件工厂。让我知道这是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:33:22.027

当您`self.user.profile`在 Post 模型中执行操作时，它找到的用户没有与之关联的配置文件。您应该能够在您的 FactoryGirl 定义中为 User 类设置关联。

# ios - Core Data 获取请求优化

> ID：15187223
> 
> 赞同：6
> 
> 时间：2013-03-03T15:29:09.303
> 
> 标签：ios, objective-c, core-data, optimization, nsfetchrequest

我正在开发和应用程序，它需要检查字符串是否已保存到数据库中。这似乎是一个简单的操作，但它需要半秒钟才能返回任何我认为很多的响应。我的问题是是否有任何方法可以减少该时间。感谢您的关注。

这是我当前的代码：

```
- (BOOL) isDeleted:(int)i {

    NSString *value = [NSString stringWithFormat:@"deleted.*.%i", i];

    MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    NSString *entityName = @"Deleted";
    NSEntityDescription *entityDesc = [NSEntityDescription entityForName:entityName inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDesc];

    NSPredicate *pred = [NSPredicate predicateWithFormat:@"(deletedpics like %@)", value];
    [request setPredicate:pred];

    NSError *error;
    NSArray *objects = [context executeFetchRequest:request error:&error];

    BOOL returnBool = [objects count] >= 1 ? YES : NO;
    return returnBool;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T23:03:56.613

一种优化是替换

```
NSArray *objects = [context executeFetchRequest:request error:&error]; 
```

经过

```
[request setFetchLimit:1];
NSUInteger count = [context countForFetchRequest:request error:&error]; 
```

如果您只想检查对象是否存在。

但我认为主要的性能问题是通配符搜索`LIKE`，它比搜索慢`==`。

与其将状态和图片编号存储在一个属性中（如您在评论中所写） ，`deleted.<status>.<picturenumber>`不如在实体中使用单独的属性。`status``picturenumber`

然后可以用谓词搜索图片编号

```
[NSPredicate predicateWithFormat:@"picturenumber == %d", i]; 
```

这应该快得多。如有必要，您可以另外索引该属性（如评论中提到的@flexaddicted）。

# iphone - 向 UISplitViewController 的 MasterView 添加子视图

> ID：15187226
> 
> 赞同：3
> 
> 时间：2013-03-03T15:29:37.897
> 
> 标签：iphone, ios, objective-c, ipad, uisplitviewcontroller

我需要在左侧添加一个子视图`UIViewController`，当主视图被隐藏（纵向）时，它向用户显示屏幕左侧附近有东西。并且这个视图必须随着 的左边部分移动`UISplitView`。类似于这两个图像中带有箭头的视图。（对不起俄语界面） [http://s2.uploads.ru/8EHJI.png](http://s2.uploads.ru/8EHJI.png) [http://s2.uploads.ru/NhEam.png](http://s2.uploads.ru/NhEam.png) 但我的问题是，当我尝试添加这样的视图时，它会剪辑到masterview 的边界，并且在 masterview 隐藏时不可见。我想，我做错了，有一种简单的方法可以做到这一点。

**更新：**我试图做一些黑客攻击：

```
-(void) clipToBoundsRecursive:(UIView *)someView
{
    NSLog(@"%@", someView);
    someView.clipsToBounds = NO;
    for (UIView *v in someView.subviews)
    {
        [self clipToBoundsRecursive:v];
    }
} 
```

并将其发送到查看`splitviewcontroller`。

```
UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
[self clipToBoundsRecursive:splitViewController.view]; 
```

它在第一次生效（主视图边界之外的子视图显示，但在第一次显示/隐藏动画后它们消失并且即使我再次调用此方法也不会出现）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T21:39:33.077

您可以将视图直接添加到窗口中`view`，但您必须根据设备旋转的时间手动管理其位置。添加到 的视图`window.view`将显示在 上方`rootViewController.view`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T14:54:00.097

我在这里为您描述了一个**简单的逻辑**：（*如何添加并从您的主视图或详细视图`UIView`中`Window`*调用它）

创建`UIView`于`#import "AppDelegate.h"`,

```
- (void) CreateViewInWindow
{
    UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 780)];// set as u wish
    myView.backgroundColor = [UIColor redColor];

    // I have added myView to the Window with a specific animation , your can give animation as you like. :)
    [UIView transitionWithView:self.window duration:0.5
                       options:UIViewAnimationOptionTransitionCrossDissolve // change to whatever animation you like
                    animations:^ { [self.window addSubview:myView]; }
                    completion:nil];
} 
```

在这里创建一个简单 `UIButton`的`DetailViewController.m`文件（*您可以将代码放在任何一个文件中，`DetailViewController.m`或者`MasterViewController.m`*）

```
UIButton *btnShowView = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btnShowView addTarget:self action:@selector(btnShowViewTapped:) forControlEvents:UIControlEventTouchUpInside];
btnShowView.frame = CGRectMake(20, 30, 174, 35);
//[btnLoginInner setBackgroundImage:[UIImage imageNamed:@"LoginBut.png"] forState:UIControlStateNormal];
[self.view addSubview:btnShowView]; 
```

在按钮点击方法中，编写调用`UIView` from 的代码，`AppDelegate`也**不要忘记**添加`#import "AppDelegate.h"` ，`DetailViewController.m`

```
-(void)btnShowViewTapped:(UIButton *) Sender
{
    AppDelegate *del = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [del performSelector:@selector(CreateViewInWindow) withObject:nil afterDelay:0];
} 
```

上面的代码是您问题的简单逻辑，它可能对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T19:22:42.237

在我看来，您的应用程序可以从[PKRevealController](https://github.com/pkluz/PKRevealController)中受益。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:37:11.933

如果您使用笔尖，请尝试在标识中取消选择自动布局选项并键入 pan 否则设置自动调整大小掩码以查看当前剪辑。我相信它会解决问题

# ios - 为什么控制事件不在基本界面上触发？

> ID：15187229
> 
> 赞同：1
> 
> 时间：2013-03-03T15:29:49.330
> 
> 标签：ios, xamarin.ios

这个很奇怪。我有一个名为 的 UITextView 控件`txtNotes`，我想使用`Scrolled`事件，所以我这样做：

```
txtNotes.Scrolled += (object sender, EventArgs e) => 
{
    "Scrolled".Debug();
}; 
```

这很好用；调试消息按预期打印。但是我有一个辅助函数可以对 做一些事情`UIScrollView`，它`UITextView`继承自。所以我正在做相当于这个：

```
UIScrollView uv = txtNotes;

uv.Scrolled += (object sender, EventArgs e) => 
{
    "Scrolled".Debug();
}; 
```

这**不起作用**：永远不会调用事件处理程序。在其他地方我可以控制类型`UIScrollView`（**不是**继承自的类型`UIScrollView`），我可以**从中**获取事件。因此，当子类被键入为基类时，似乎基类事件不会在子类上触发。

这对我来说没有任何意义，并且真的感觉像是 Monotouch 或底层 iOS 中的错误。谁能证实这一点，或者告诉我我做错了什么，以及如何解决/解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:13:07.657

简短的回答是`UITextView`提供：

```
public new event EventHandler Scrolled 
```

**`new`**关键字隐藏了基本事件`UIScrollView.Scrolled`——使它们成为两个独立的实现。IOW 如果你设置了一个，那么另一个没有设置。这就是.NET 的工作方式。

但是为什么会有一个**`new`**？原因有点复杂。只有通过将内部`*Delegate`类型创建为胶水代码才能提供强类型事件。这在 99% 的情况下效果很好，但也有一些[缺点](http://spouliot.wordpress.com/2012/03/26/events-vs-objective-c-delegates/)。

在这种情况下，如果使用 a或 an，则内部`*Delegate`类型将不相同- 并且无法使用继承（今晚我忘记了它的原因:-)。`UIScrollView``UITextView`

但是我很惊讶使用`[Weak]Delegate`属性不起作用。我明白为什么，它是一样的**`new`**，但我不记得这个原因......需要调查:)

# php - PHP 5.4.12 Mac OSX imagecreate* 函数不起作用

> ID：15187231
> 
> 赞同：1
> 
> 时间：2013-03-03T15:29:57.697
> 
> 标签：php, apache, gd, macports, imagecreatefrompng

我正在使用 Apache 2（Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/1.0.1e DAV/2 PHP/5.4.12）在 Mac OSX 10.7.5 上的 macports 上运行 PHP 5.4.12。5 天前这段代码有效（是的，直接来自 PHP 站点）：

```
<?php
header ('Content-Type: image/png');
$im = @imagecreatetruecolor(120, 20)
      or die('Cannot Initialize new GD image stream');
$text_color = imagecolorallocate($im, 233, 14, 91);
imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color);
imagepng($im);
imagedestroy($im); 
?> 
```

我合上了笔记本电脑。然后在 3 天后打开它，使用此代码进入我的测试页面，它不再工作，但我没有收到任何错误。我看到损坏的图像图像而不是生成的图像。我今天升级了所有的软件和库。这是 phpinfo 对 GD Lib 的评价：

```
GD Support  enabled
GD Version  bundled (2.0.34 compatible)
FreeType Support    enabled
FreeType Linkage    with freetype
FreeType Version    2.4.10
GIF Read Support    enabled
GIF Create Support  enabled
JPEG Support    enabled
libJPEG Version unknown
PNG Support enabled
libPNG Version  1.5.14
WBMP Support    enabled
XBM Support enabled 
```

phpinfo() 报告了我的 php 安装：

```
'./configure' '--prefix=/opt/local' '--mandir=/opt/local/share/man' 
'--infodir=/opt/local/share/info' '--program-suffix=54' 
'--includedir=/opt/local/include/php54' '--libdir=/opt/local/lib/php54' 
'--with-config-file-path=/opt/local/etc/php54' 
'--with-config-file-scan-dir=/opt/local/var/db/php54' '--disable-all' '--enable-bcmath' 
'--enable-ctype' '--enable-dom' '--enable-fileinfo' '--enable-filter' '--enable-hash' 
'--enable-json' '--enable-libxml' '--enable-pdo' '--enable-phar' '--enable-session' 
'--enable-simplexml' '--enable-tokenizer' '--enable-xml' '--enable-xmlreader' 
'--enable-xmlwriter' '--with-bz2=/opt/local' '--with-mhash=/opt/local' 
'--with-pcre-regex=/opt/local' '--with-libxml-dir=/opt/local' '--with-zlib=/opt/local' 
'--without-pear' '--disable-cgi' '--disable-cli' '--disable-fpm' 
'--with-apxs2=/opt/local/apache2/bin/apxs' 
```

我注意到那里没有'--with-gd'，但是在这段代码工作和中断之间我没有对PHP进行任何更改......

完全有可能当我关闭笔记本电脑然后重新打开时，apache 重新启动。我最近没有安装或升级任何东西（绝对没有对 php 进行任何更改）或对任何 ini 文件进行任何更改或升级任何东西。然而，今天，我确实对使用 macports 安装的所有内容进行了全面升级。没有解决问题。

是否还有其他人遇到此问题/正在寻找解决方案？

# javascript - 如何通过 C++ 扩展 HTMLDomTree

> ID：15187233
> 
> 赞同：0
> 
> 时间：2013-03-03T15:30:04.407
> 
> 标签：javascript, c++, internet-explorer, dom

嗨 C++ 和 JavaScript 极客，

我想创建一个具有以下功能的 IE 插件，

1.  IE工具栏嵌入了一个按钮**（完成）**
2.  通过单击按钮，它会执行一些预编译的 c++ 代码来操作 DOM 树**（完成）**
3.  我需要增强第 2 步以将本机函数附加到“窗口”对象（例如`window.myfunc = function(a, b){return a + b;};`），然后“评估”一些最终调用 myfunc 的预定义 JavaScript。

我只是不知道如何“扩展”现有对象“窗口”。任何人都可以给我一些线索吗？

实际上，我希望我的插件适用于 IE 和 Firefox/Chrome。但 IE 是当前的优先级之一。

**PS：如果有办法将函数 'myfunc' 注册到 JavaScript 执行上下文的全局命名空间，那就太好了。**

谢谢， 迈尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:10:27.950

好的。没有人回复:(

最后，我通过创建一个可以在 JavaScript 中使用的 COM 对象实现了这个目标。缺点是该解决方案仅适用于 IE。

# c# - 搜索栏在不同的页面选项卡上不起作用

> ID：15187238
> 
> 赞同：0
> 
> 时间：2013-03-03T15:30:32.173
> 
> 标签：c#, visual-studio, tabs, webbrowser-control

我有一个搜索栏和选项卡控件以及一个网络浏览器，每次打开一个选项卡时都会出现一个网络浏览器，但是当我在搜索框中键入时，它似乎只在第一页选项卡中工作

这是我的标签控制代码：

```
var browser = new WebBrowser();
browser.Dock = DockStyle.Fill;
browser.Url = new Uri(@"http://www.google.com");
myTabPage.Controls.Add(browser);
tabControl1.TabPages.Add(myTabPage); 
```

和我的搜索条形码：

```
webBrowser1.Navigate("www.google.com/search?q=" + searchField.Text); 
```

到目前为止我的代码似乎没有工作，

```
private void searchTextBox_KeyDown(object sender, KeyEventArgs e)
{
    string browserURL = "";
    if (e.KeyCode == Keys.Enter)
    {
        if (yahoosearch.Checked == true)
        {
            browserURL = "www.search.yahoo.com/search?q=" + searchTextBox.Text;
        }
        else if (bingsearch.Checked == true)
        {
            browserURL = "www.bing.com/search?q=" + searchTextBox.Text;
        }
        else if (googlesearch.Checked == true)
        {
            browserURL = "www.google.com/search?q=" + searchTextBox.Text;
        }
    }

    foreach (var c in tabControl1.SelectedTab.Controls)
    {
        if (c is WebBrowser)
        {
            ((WebBrowser)c).Navigate(searchTextBox.Text);
        }
    }
} 
```

难道是我的网络浏览器被称为`webBrowser1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:52:23.783

看起来您已经在设计器中创建了第一个选项卡，并调用了`webBrowser1`. 但是在其他页面上，您的网络浏览器是`var browser`，因此您应该在其上调用导航：

```
foreach (var c in tabControl1.SelectedTab.Controls)
{
    if (c is WebBrowser)
    {
        ((WebBrowser)c).Navigate(browserURL);
    }
} 
```

# lisp - Lisp 文件扩展名的约定是什么？

> ID：15187240
> 
> 赞同：41
> 
> 时间：2013-03-03T15:30:52.847
> 
> 标签：lisp, common-lisp, filenames, pathname

“.el”是以 Emacs Lisp 程序结尾的文件名的约定。请问在编写 Common Lisp 程序时的约定是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-03T15:34:42.367

[Wikipedia](http://en.wikipedia.org/wiki/Common_Lisp)和[Google Common Lisp Style guide](http://google-styleguide.googlecode.com/svn/trunk/lispguide.xml?showone=Comment_semicolons#Comment_semicolons)都建议使用`.lisp`.

[*实用 Common Lisp*建议`.lisp`或`.cl`。](http://www.gigamonkeys.com/book/lather-rinse-repeat-a-tour-of-the-repl.html#saving-your-work)

请注意，无论如何我都不是 Common Lisp 程序员，所以我不知道是否`.lisp`在实践中实际使用过。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-03T17:30:53.043

源代码的常见 Lisp 路径名类型：

*   **`lisp`是默认值。如果可能，请使用它。**
*   `lsp`如果路径名类型只允许三个字符
*   `l`如果路径名类型应该是一个字符（罕见）。

路径名类型`cl`大多不使用。您有时可以在使用几种不同 Lisp 方言的旧代码或项目中看到它。

对于编译后的代码，路径名类型可以在 Common Lisp 中使用函数计算`COMPILE-FILE-PATHNAME`（这里是 Mac 上的 64bit LispWorks）：

```
CL-USER > (pathname-type (compile-file-pathname "foo.lisp"))
"64xfasl" 
```

# iphone - 在另一个类中使用一个类的对象

> ID：15187241
> 
> 赞同：2
> 
> 时间：2013-03-03T15:31:12.623
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有两个`UIViewControllers`，我希望在其中一个上显示一个自定义按钮。我已经为此编写了代码。我还编写了另一个弹出框的代码`ViewController`，并且由于两个控制器都属于我的“ViewController”类，因此该按钮也显示在第二个上`ViewController`，这是我不想要的。

显然我可以创建另一个类并使我的第二`ViewController`个类成为该类的成员，但是我希望我的第二个类的代码`ViewController`可以更改第一个类中按钮的颜色`ViewController`，那么如何在第二个类中使用我的第一个类中的对象`implementation`文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:35:47.160

> 我有两个 UIViewController，我希望在其中一个上显示自定义按钮。我已经为此编写了代码。我还为另一个 ViewController 编写了 popover segue 的代码，并且由于两个控制器都是我的“ViewController”类的子类，因此该按钮也显示在第二个 ViewController 上，这是我不想要的。

您为什么不在第一种情况下将少数财产设为私有，以免它被继承。

* * *

> 显然我可以创建另一个类并使我的第二个 ViewController 成为该类的成员，但是我希望我的第二个 ViewController 的代码更改第一个 ViewController 中按钮的颜色，那么我如何使用我的第一个类中的对象第二类实现文件？

您的主要问题是**从 ClassB 访问 ClassA 的对象**。

这里有很多方法和答案：

[通过不同视图的按钮更新标签](https://stackoverflow.com/questions/11257848/update-a-label-through-button-from-different-view)

[Xcode - 从不同的视图更新 ViewController 标签文本](https://stackoverflow.com/questions/10052594/xcode-update-viewcontroller-label-text-from-different-view)

[在另一个类中设置标签文本](https://stackoverflow.com/questions/9332082/setting-label-text-in-another-class)

[将另一个视图上的标签设置为存储的 NSDate](https://stackoverflow.com/questions/9081042/set-label-on-another-view-to-stored-nsdate)

# javascript - 在 javascript 中向提交的表单数据添加前导零时遇到问题

> ID：15187242
> 
> 赞同：1
> 
> 时间：2013-03-03T15:31:13.297
> 
> 标签：javascript, forms

昨晚我在这里查看了一些关于使用 JavaScript 添加前导零的示例，但我无法让它们中的任何一个用于我的目的。一旦您点击提交按钮，我想对数据执行此操作。它在执行此操作时正在运行一组检查器，这就是我所包含的，但我在测试 php 页面中获取 POST 数据，并且我试图修复的字段显示“未定义”

无论他们输入的是四位数还是五位数，我都需要位数始终为 7。需要添加前导零。不确定我是否接近或偏离目标：

```
function pad(number, length){
    var str = '' + number;
    while (str.length < length) {
        str = '0' + str;
    }    
}

offidlength = custform.optionaldata10.value.length;

if (offidlength <7) {
    custform.optionaldata10.value = pad(custform.optionaldata10.value, 7);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:33:03.077

你忘了`return`声明。

```
return str; 
```

应该在函数的末尾。

*编辑*功能应如下所示：

```
function pad(number, length){
    var str = '' + number;
    while (str.length < length) {
       str = '0' + str;
    }
    return str;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:30:05.410

如果你总是想要 7 位数字，你可以让你的表达更简单——

```
var offid= custform.optionaldata10.value, L= 7-offid.length;
if(L>0) custform.optionaldata10.value= '0000000'.substring(0, L)+offid; 
```

# categories - 如何按自定义字段值过滤新的 WP 查询？

> ID：15187244
> 
> 赞同：1
> 
> 时间：2013-03-03T15:31:19.197
> 
> 标签：categories, custom-fields, wordpress

我正在为 wordpress 中的每个类别创建新页面。帖子编辑器有一个自定义字段，允许选择扇区类型，这会在更新时应用于帖子。自定义字段`key`是：`sector`，对于自定义字段元`value`选项，可以使用`SectorA`,`SectorB`和`SectorC`。我正在使用一个名为`projects`.

我遵循了此链接[http://weblogtoolscollection.com/archives/2008/04/13/how-to-only-retrieve-posts-with-custom-fields/上的建议](http://weblogtoolscollection.com/archives/2008/04/13/how-to-only-retrieve-posts-with-custom-fields/)

如何更改下面代码中的查询行，以便按扇区名称过滤循环，让我们使用`SectorA`. 然后，我将重用每个模板页面上的代码，将值更改为`SectorB`其他`SectorC`页面。

我认为这需要以某种方式改变：

`$customPosts->query('showposts=5&sector=sectorA&post_type=projects' );`

目前它成功地呼应了`sector value`并且`description value`显示了所有帖子。所以我尝试将其限制在扇区A 使用`sector=sectorA`似乎不起作用？

这段代码在functions.php中：

```
function get_custom_field_posts_join($join) {
global $wpdb, $customFields;
return $join . "  JOIN $wpdb->postmeta postmeta ON (postmeta.post_id = $wpdb->posts.ID and postmeta.meta_key in ($customFields)) ";
}
function get_custom_field_posts_group($group) {
global $wpdb;
$group .= " $wpdb->posts.ID ";
return $group;
} 
```

这段代码在模板页面上：

```
<?php /* Begin Custom Field Posts */ ?>
<h2>Custom Posts</h2>
<ul>
<?php 
global $customFields;
$customFields = "'sector', 'description'";
$customPosts = new WP_Query();
add_filter('posts_join', 'get_custom_field_posts_join');
add_filter('posts_groupby', 'get_custom_field_posts_group');
$customPosts->query('showposts=5&sector=sectorA&post_type=projects' );//Uses same parameters as query_posts
remove_filter('posts_join', 'get_custom_field_posts_join');
remove_filter('posts_groupby', 'get_custom_field_posts_group');

while ($customPosts->have_posts()) : $customPosts->the_post(); 
$sector = get_post_custom_values("sector"); 
$description=  get_post_custom_values("description");?>
<li><?php echo $sector[0]; ?></li>
<li><?php echo $description[0]; ?></li><br />
<?php endwhile; ?>
</ul>
<?php /* End Custom Field Posts */ ?> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:37:37.897

可能这就是你想要的

```
function get_custom_field_posts_join($join) {
global $wpdb, $customSector;
return $join . "  JOIN $wpdb->postmeta postmeta ON (postmeta.post_id = $wpdb->posts.ID and postmeta.meta_key = 'sector' and postmeta.value = '$customSector') ";
} 
```

和页面修改

```
$customSector='sectorA';//<--- insert this
add_filter('posts_join', 'get_custom_field_posts_join'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:31:37.863

尝试使用此代码。

```
<?php
$sector = get_post_meta($post->ID, "sector", false);
if ($sector[0]=="") { ?>

<!-- If there are no custom fields, show nothing -->

<?php } else { ?>

<div class="sector">
    <h3>Title</h3>

    <?php foreach($sector as $sector) {
    echo '<blockquote><p>'.$sector.'</p></blockquote>';
    } ?>

</div>

<?php } ?> 
```

# android - PhoneGap 和跨域调用

> ID：15187247
> 
> 赞同：1
> 
> 时间：2013-03-03T15:31:22.183
> 
> 标签：android, security, cordova, mobile

我一直在为客户进行安全审查，并在 config.xml 中遇到了这一行，它是一个适用于 android 设备的 phonegap 应用程序

```
<access origin=".*"/> 
```

如果它只是 origin=* 我会知道这意味着它可以访问任何其他站点。但是 .* 是什么意思？和*一样吗​​？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:18:48.817

来自 Cordova Android[源代码](https://raw.github.com/apache/cordova-android/master/framework/src/org/apache/cordova/Config.java)：

```
private void _addWhiteListEntry(String origin, boolean subdomains) {
    try {
        // Unlimited access to network resources
        if (origin.compareTo("*") == 0) {
            LOG.d(TAG, "Unlimited access to network resources");
            this.whiteList.add(Pattern.compile(".*"));
        } else { // specific access
            // check if subdomains should be included
            // TODO: we should not add more domains if * has already been added
            if (subdomains) {
                // XXX making it stupid friendly for people who forget to include protocol/SSL
                if (origin.startsWith("http")) {
                    this.whiteList.add(Pattern.compile(origin.replaceFirst("https?://", "^https?://(.*\\.)?")));
                } else {
                    this.whiteList.add(Pattern.compile("^https?://(.*\\.)?" + origin));
                }
                LOG.d(TAG, "Origin to allow with subdomains: %s", origin);
            } else {
                // XXX making it stupid friendly for people who forget to include protocol/SSL
                if (origin.startsWith("http")) {
                    this.whiteList.add(Pattern.compile(origin.replaceFirst("https?://", "^https?://")));
                } else {
                    this.whiteList.add(Pattern.compile("^https?://" + origin));
                }
                LOG.d(TAG, "Origin to allow: %s", origin);
            }
        }
    } catch (Exception e) {
        LOG.d(TAG, "Failed to add origin %s", origin);
    }
} 
```

所以很明显，如果不完全是，他们将所有内容都视为正则表达式`*`。相信这种行为可能不是一个好主意，因为它没有[记录在案](http://docs.phonegap.com/en/edge/guide_whitelist_index.md.html)，也没有在目标[W3C Widget Access](http://www.w3.org/TR/widgets-access/)规范中。（我认为这甚至可能不是故意的。）

但是`.*`，它仍然在 PhoneGap 2.5.0 项目模板中使用，所以现在没问题，只要您使用一个版本的 PhoneGap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T03:56:43.030

The * means wildcard. When having the * present, it means that the app can access any external site. It you replace the * with a domain, then it will only allow the app to access that paricular site.

```
<access origin="*" /> // all external domains
<access origin="http://google.com" /> // app can only reach google all other doamins are restricted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:09:06.193

我认为没有必要：

[http://www.w3.org/TR/widgets-access/](http://www.w3.org/TR/widgets-access/)

PhoneGap 文档中未提及：

[http://docs.phonegap.com/en/2.5.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.5.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

这是正则表达式：

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

```
".*" matches 
"def" "ghi" in 
abc "def" "ghi" jkl 
```

# html - 表 td 宽度和浮点数

> ID：15187253
> 
> 赞同：0
> 
> 时间：2013-03-03T15:32:13.423
> 
> 标签：html, html-table

晚上好！我正在做这件事：

```
<div id="infoGen" align="center">
    <table id="tabInfoGen">
        <tr>
            <td id="primacol">Nome:&nbsp;<font id="h3"><%=u.getNome()%></font><br>
                Cognome:&nbsp; <font id="h3"><%=u.getCognome()%></font><br>
                Indirizzo:&nbsp; <font id="h3"><%=u.getIndirizzo()%></font><br>
                Città:&nbsp;<font id="h3"><%=u.getCitta()%></font>
            </td>
            <td id="secondacol">Data di Nascita:&nbsp; <font
                id="h3"><%=u.getDataNascita()%></font><br> Luogo di
                Nascita:&nbsp;<font id="h3"> <%=u.getLuogoDiNascita()%></font><br>
                Telefono:&nbsp;<font id="h3"> <%=u.getTelefono()%></font><br>
                Email:&nbsp; <font id="h3"><%=u.getEmail()%></font>
            </td>
            <td id="terzacol">Username:&nbsp; <font id="h3"><%=u.getUsername()%></font>
                <br> Password:&nbsp; <font id="h3"> <%
for (int i = 0; i < u.getPassword().length(); i++)
    out.print("*");
  %>
                </font>
            </td>
        </tr>
    </table>
</div> 
```

有了这个 CSS

```
#infoGen {
background-color: #F2F5A9;
width: 800px;
border-radius: 20px;
border: 1px solid black;
}

 #infoGen table {
width: 100%;
padding-top: 20px;
padding-bottom: 20px;
padding-left: 10px;
padding-right: 10px;
font: 16px Impact, sans-serif;
text-align: left;
 }
 td #primacol {
float: left;
margin-left: 50px;
width: 200px;
}

td #secondacol {
width: 200px;
float: left;
margin-left: 20px;
}

td #terzacol {
float: left;
margin-left: 50px;
width: 200px;
} 
```

问题是我想要 3 列具有相同的宽度，但在这种情况下，我的第一列非常大，另外两列很小。我怎样才能解决这个问题？

[http://jsfiddle.net/](http://jsfiddle.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:51:04.330

你有这样的css规则：

```
td #primacol {
    float: left;
    margin-left: 50px;
    max-width: 200px;
} 
```

什么时候应该是这样的：

```
td#primacol {
    float: left;
    margin-left: 50px;
    max-width: 200px;
} 
```

注意 TD 和 ID 之间删除的空格。

不相关，但您不能拥有多个相同的 ID。改用一个类。使用 FONT 标签也是 15 年前的事了。

此外，您不应在此布局中使用表格，因为表格仅适用于表格日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:46:08.157

尝试使用`max-width`：

```
td#primacol {
    margin-left: 50px;
    max-width: 200px;
}

td#secondacol {
    max-width: 200px;
    margin-left: 20px;
}

td#terzacol {
    margin-left: 50px;
    max-width: 200px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:50:47.220

您的 CSS 选择器不正确。空间推断后代

```
/* look for id=secondacol within any TD*/
td #secondacol 
```

应该

```
/* TD that has ID=secondacol*/
td#secondacol 
```

# c++ - C++ 没有命名成员

> ID：15187258
> 
> 赞同：1
> 
> 时间：2013-03-03T15:32:46.453
> 
> 标签：c++, class, methods, winpcap

所以我有这个“示例”代码

# 数据包.h

```
#ifndef PACKETS_H_
#define PACKETS_H_

#include <winsock2.h>

typedef unsigned char u_char;
typedef unsigned short u_short;
typedef unsigned int u_int;

/* Some code here */

typedef struct _UDP
{
    u_short UDP_Source_Port;
    u_short UDP_Destination_Port;
    u_short UDP_Total_Length;
    u_short UDP_CheckSum;
} _UDP;

class _Packet
{
    private:
        _IPv4_Header* IPv4_Header;
        _UDP* UDP;
        _TCP* TCP;
    public:
        _Packet(void);
        ~_Packet(void);
        void Analyze(const u_char* Packet_Data);

            /* Some code here */

        u_short Get_UDP_Source_Port(void) { return UDP->UDP_Destination_Port; }
        u_short Get_UDP_Destination_Port(void) { return UDP->UDP_Destination_Port; }
        u_short Get_UDP_Total_Length(void) { return UDP->UDP_Total_Length; }
        u_short Get_UDP_CheckSum(void) { return UDP->UDP_CheckSum; }
};

#endif 
```

# 数据包.cpp

```
#include "Packets.h"
#include <pcap.h>

_Packet::_Packet(void)
{

}

_Packet::~_Packet(void)
{

}

void _Packet::Analyze(const u_char* Packet_Data)
{
    IPv4_Header = (_IPv4_Header*) Packet_Data;
    if (0x06 == Get_IPv4_Protocol())
        TCP = (_TCP*) Packet_Data + (int)Get_IPv4_Header_Length() / 4;
    else if (0x11 == Get_IPv4_Protocol())
        UDP = (_UDP*) Packet_Data + (int)Get_IPv4_Header_Length() / 4;
}

/* Some code here */ 
```

packet.cpp：在成员函数'void _Packet::Analyze(const u_char*)'中：

packet.cpp:20:3：错误：“UDP”未在此范围内声明

packet.cpp:20:10：错误：未在此范围内声明“_UDP”

packet.cpp:20:15: 错误: ')' 标记之前的预期主表达式

packet.cpp:20:17: 错误: 预期 ';' 在'Packet_Data'之前

# 主文件

```
/* Some code here */

_Packet Packet;
cout << "  Source port: " << Packet.Get_UDP_Source_Port() << endl;
cout << "  Destination port: " << Packet.Get_UDP_Destination_Port() << endl;

/* Some code here */ 
```

main.cpp:126:40：错误：“类 _Packet”没有名为“Get_UDP_Source_Port”的成员

main.cpp:127:45：错误：“类 _Packet”没有名为“Get_UDP_Destination_Port”的成员

我不知道为什么会出现这个错误。它应该可以正常工作

# magento - 一种无需复制文件即可安装扩展的方法。Magento

> ID：15187263
> 
> 赞同：1
> 
> 时间：2013-03-03T15:33:25.860
> 
> 标签：magento

对不起。我对 Magento 扩展开发很陌生。我想知道是否有安装我的扩展的方法，包括复制文件并将其放置到位。我知道我可以为 SQL 更新创建一个安装脚本，但我不想向我的客户解释在运行脚本之前他应该将所有扩展文件放在适当的文件夹中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:00:19.727

您可以使用 Magento Composer 安装程序：[https ://github.com/magento-hackathon/magento-composer-installer](https://github.com/magento-hackathon/magento-composer-installer)

# jar - 如何获取 .jar 文件所在目录的位置？

> ID：15187266
> 
> 赞同：0
> 
> 时间：2013-03-03T15:33:58.560
> 
> 标签：jar, directory, location

我正在尝试从运行 .jar 文件的文件夹中读取一些图像文件。我想知道如何获取目录的路径。我正在尝试做这样的事情。

```
protected void updateLabel(String name){
    File f = new File("*path where the .jar file is being run from/tmspictures/" + name + ".jpg");
    if(f.exists()){
        ImageIcon icon = new ImageIcon("*path where the .jar file is being run from/tmspictures/" + name + ".jpg);
        Image img = icon.getImage(); 
        Image newimg = img.getScaledInstance(lbl_pic.getWidth(), lbl_pic.getHeight(),  java.awt.Image.SCALE_SMOOTH);
        icon = new ImageIcon(newimg);
        lbl_pic.setIcon(icon);
        lbl_pic.setText(null);
    }
    else{
        lbl_pic.setText("Image not found");
        lbl_pic.setIcon(null);
    }
} 
```

因此，如果 jar 文件正在运行，`C:/Users/xerof_000/Desktop/TMS.jar`那么应该从`C:/Users/xerof_000/Desktop/tmspictures/image.jpg`我在 stackoverflow 上找到一种方法读取图片，但这也会返回带有目录的文件名。我不想剪掉那部分然后使用 URL。有人可以提出一个简单易行的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:36:20.570

我相信您可以使用该路径`./tmspictures/image.jpg`，它会起作用。运行 jar 文件会将工作目录设置为 jar 所在的路径，因此您可以从那里移动。

# c++ - OpenGL 在纹理交集处失败

> ID：15187267
> 
> 赞同：2
> 
> 时间：2013-03-03T15:33:59.240
> 
> 标签：c++, opengl, textures

我已经加载了纹理，并将其显示在立方体和平面上。在平面和立方体相交的地方，有一些难看的视觉伪影。

下面两张图片说明了这个问题：

图 1 - 这是什么：

![Image1 - 这是什么？](../Images/d3418f4476d5f0f6cc7f9dfda871be94.png)

图 2 - 相同的场景，其他视角：

![Image2 - 如何修复？](../Images/34bb8c41275cc15e1da23e28b95952f4.png)

这是我加载图像的方式：

```
static const GLenum gl_format[4] = { GL_LUMINANCE, GL_LUMINANCE_ALPHA, GL_BGR, GL_BGRA };

GLuint LoadTGATexture(const char* filename)
{
    //image is already loaded in --- unsigned char[] data - int width - int height - int components
    unsigned int handle;

    glGetFloatv(GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT, &max_anisotropy);

    glGenTextures(1, &handle);
    glBindTexture(GL_TEXTURE_2D, handle);

    glTexImage2D(GL_TEXTURE_2D, 0, components, width, height, 0, gl_format[components - 1], GL_UNSIGNED_BYTE, data);
    gluBuild2DMipmaps(GL_TEXTURE_2D, components, width, height, gl_format[components - 1], GL_UNSIGNED_BYTE, data);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAX_ANISOTROPY_EXT, max_anisotropy);
    glBindTexture(GL_TEXTURE_2D, 0);

    delete [] data;
    return handle;
} 
```

但是我该如何解决它，我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:13:05.797

我猜这与你的质地无关。

从外观上看，您在剪辑时遇到了问题。我会验证`glEnable(GL_DEPTHTEST)`，确保在设置透视矩阵时您的近平面是`>0.0`，这意味着不是 0.0 也不是负数。还要确保你的远平面不是一个非常庞大的数字。我通常停在 1000.0 并取得良好的效果。你可能想做一些更小的事情。

# jquery - jQuery $.ajax 函数不从 $(...).validate 函数获取数据

> ID：15187282
> 
> 赞同：0
> 
> 时间：2013-03-03T15:36:03.370
> 
> 标签：jquery, jquery-validate

在尝试结合 jQuery 验证（插件）和使用 ajax 将数据发送到服务器时，我遇到了以下问题。

如果我使用此 jQuery 方法仅将数据单独发布到服务器，则一切正常。

```
function doAjaxPost() {
    // get the form values
    var name = $('#name').val();
    var pswd = $('#pswd').val();

    $.ajax({
    type: "POST",
    url: "${pageContext. request. contextPath}/loginUser.htm",
    data: "name=" + name + "&pswd=" + pswd,

    success: function(response){    
        // we have the response
        if(response.status == "OK") {
            $('#info').html("User has been added to the list successfully.<br>"+
                                "The User Details are as follows : <br> Name : "+ 
                                response.result.name + " <br> Password: " + response.result.pswd);
            $('#name').val('');
            $('#pswd').val(''); 
        } else {
            $('#info').html("Sorry, there is something wrong with the data provided")
        }
    },
    error: function(e){
        alert('Error: ' + e);
    }
    });

}// end of doAjaxPost 
```

但是当我尝试使用 jquery.validate.min.js 验证用户的输入时，服务器的响应显示一切正常，**但名称和密码的值未定义**我怀疑我的方法 doAjaxPost() 失败在 jquery.validator 之后从表单中提取数据。这是我的验证功能：

```
$(document).ready(function(){
        $("#loginform").validate({

            submitHandler: function(form) {
                doAjaxPost();
            },

            rules:{
                name:{
                    required: true,
                    minlength: 4,
                    maxlength: 16,
                },
                pswd:{
                    required: true,
                    minlength: 6,
                    maxlength: 16,
                }, 

           },
           messages:{
                name:{
                    required: "Login - is a mandatory field",
                    minlength: "Name should contain minimum {0} symbols",
                    maxlength: "Maximum symbols - {0}",
                },
                pswd:{
                    required: "Password - is a mandatory field",
                    minlength: "Password should contain minimum {0} symbols",
                    maxlength: "Password should contain maximum {0} symbols",
                },

           },

        });

    }); 
```

所以我的问题是如何从经过验证的表单中提取数据并将其传递给 doAjaxPost 函数？

因为我认为这些变量从表格中得不到任何东西

```
var name = $('#name').val();
var pswd = $('#pswd').val(); 
```

也许我应该使用像 $('#loginform #name') 这样的选择器？我试过了，它不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:40:04.913

引用操作：

> “所以我的问题是如何从经过验证的表单中提取数据并将其传递给 doAjaxPost 函数？”

[使用 jQuery`.serialize()`](http://api.jquery.com/serialize/)并将你的`ajax`放在插件的`submitHandler`.

[根据 Validate plugin 的文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，`submitHandler`回调函数是：

> “表单有效时处理实际提交的回调。获取表单作为唯一参数。替换默认提交。验证后**通过 Ajax 提交表单的正确位置**。”

试试这个代码，假设你的`ajax`函数是正确的：

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // your rules & options,
        submitHandler: function (form) {
            //var name = $('#name').val(); // use serialize
            //var pswd = $('#pswd').val(); // use serialize
            $.ajax({
                type: "POST",
                url: "${pageContext. request. contextPath}/loginUser.htm",
                //data: "name=" + name + "&pswd=" + pswd,  // use serialize
                data: $(form).serialize(),
                success: function (response) {
                    // we have the response
                    if (response.status == "OK") {
                        $('#info').html("User has been added to the list successfully.<br>" +
                            "The User Details are as follows : <br> Name : " + response.result.name + " <br> Password: " + response.result.pswd);
                        $('#name').val('');
                        $('#pswd').val('');
                    } else {
                        $('#info').html("Sorry, there is something wrong with the data provided")
                    }
                },
                error: function (e) {
                    alert('Error: ' + e);
                }
            });
            return false; // blocks redirect after submission via ajax
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/Cdvqw/](http://jsfiddle.net/Cdvqw/)**

**编辑**：OP 已经`ajax`从插件的`submitHandler`.

# sql - 在 PostgreSQL 中存储和查询区间树

> ID：15187283
> 
> 赞同：1
> 
> 时间：2013-03-03T15:36:19.720
> 
> 标签：sql, postgresql

我有一些数据集（假设它是示例的整数），我想在 Postgres 中存储和查询。
例如：
数据集 A: 1,7,9-13
数据集 B: 1, 7, 10
我想运行查询，例如：
1\. B 是 A 的子集吗？（是）
2\. A 和 B 的交集是什么？(B)
数据集可以包括数千个整数范围。
我想知道是否有一些扩展支持这种数据分析。
任何示例/链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:36:34.113

您可以使用范围数据类型并将每个不相交的类型存储在一行中。

对于您的样品：

```
-- The table
CREATE TABLE sets(id text, range int4range);
-- Values of set A
INSERT INTO sets VALUES('A', '[1,1]'),('A','[7,7]'),('A','[9,13]');
-- Values of set B
INSERT INTO sets VALUES('B','[1,1]'),('B','[7,7]'),('B','[10,10]'); 
```

要检查 B 是否是 A 的子集，您可以将 A 的范围包含 B 的范围的所有元组都连接起来：

```
 SELECT b.range
 FROM sets b JOIN sets a
     ON a.range @> b.range
 WHERE a.id='A' AND b.id='B' 
```

这样，您可以检查集合 B 中的所有值是否都在上述结果中（这意味着 B 的所有范围都包含在 A 的至少一个范围中）：

```
 SELECT NOT EXISTS(
     SELECT 1 FROM sets q WHERE q.id='B' AND q.range NOT IN (
         SELECT b.range
         FROM sets b JOIN sets a
             ON a.range @> b.range
         WHERE a.id='A' AND b.id='B'
     )); 
```

要获得交集，您可以交叉连接两者并排除空的：

```
 SELECT * FROM (
     SELECT a.range * b.range AS intersec
     FROM sets a CROSS JOIN sets b WHERE  a.id='A' AND b.id='B'
 ) i WHERE NOT isempty(i.intersec); 
```

这种方法的一个问题是，您必须通过不同的元组只保留不相交的 rangeS。例如，集合中的范围 [1,5] 和 [4,7] 必须位于仅具有 [1,7] 的元组中。为了确保这一点，您可以将它们插入到一个临时表中（在插入或更新时），它们将表本身与重叠的元组交叉连接，然后将它们连接起来并保持其他的原样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:59:53.893

[SQL小提琴](http://sqlfiddle.com/#!12/d85f2/1)

不需要数组或范围。这只是纯粹的关系。

拦截非常明显：

```
select v
from t
where set = 'A'
intersect
select v
from t
where set = 'B'
order by v 
```

而子集并不难：

```
select count(*) = 0
from (
    select v
    from t
    where set = 'B'
    except
    select b.v
    from
        (select v from t where set = 'A') a
        inner join
        (select v from t where set = 'B') b on b.v = a.v
) s 
```

# javascript - 没有jQuery的加载（）？

> ID：15187286
> 
> 赞同：-1
> 
> 时间：2013-03-03T15:36:28.583
> 
> 标签：javascript, jquery

我正在尝试从我的小部件中摆脱使用 jQuery，在查找如何替换 load() 时遇到了麻烦。

我将如何在原生 JavaScript 中做到这一点？

```
 $('#IframeABC').load(function() {
                var animator = new Animator('sWrapper');
                animator.animate();

                css('sWrap', 'display', 'block');

            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:38:13.400

`onload`这是……

```
document.getElementById('IframeABC').onload = function() { 
```

或者，为了更现代（不兼容？`;)`），`load`事件：

```
document.getElementById('IframeABC').addEventListener('load', function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:41:40.317

相当于：

```
var element = document.getElementById('IframeABC');
var handler = function () {
    // Handler in no jQuery obviously
}
if (element.addEventListener) {
    element.addEventListener('load', handler, false);
} else if (element.attachEvent) {
    element.attachEvent('onload', handler);
} else {
    element.onload = handler;
} 
```

# ruby - Ruby 块语句和隐式返回

> ID：15187287
> 
> 赞同：2
> 
> 时间：2013-03-03T15:36:31.957
> 
> 标签：ruby, return, block

我一直认为 ruby​​ 学家选择在 ruby​​ 中隐含返回是因为风格偏好（更少的单词 = 更简洁）。但是，有人可以向我确认，在下面的示例中，您实际上必须使返回隐含，否则预期的功能将不起作用？（预期的功能是能够将句子拆分为单词并为每个单词返回“以元音开头”或“以辅音开头”）

```
# With Implicit Returns
def begins_with_vowel_or_consonant(words)
  words_array = words.split(" ").map do |word|
    if "aeiou".include?(word[0,1])
      "Begins with a vowel" # => This is an implicit return
    else
      "Begins with a consonant" # => This is another implicit return
    end
  end
end

# With Explicit Returns
def begins_with_vowel_or_consonant(words)
  words_array = words.split(" ").map do |word|
    if "aeiou".include?(word[0,1])
      return "Begins with a vowel" # => This is an explicit return
    else
      return "Begins with a consonant" # => This is another explicit return
    end
  end
end 
```

现在，我知道肯定有很多方法可以让这段代码更高效、更好，但我这样安排的原因是为了说明隐式返回的必要性。有人可以向我确认确实需要隐式回报，而不仅仅是一种风格选择吗？

编辑：这是一个例子来说明我想要展示的内容：

```
# Implicit Return
begins_with_vowel_or_consonant("hello world") # => ["Begins with a consonant", "Begins with a consonant"] 

# Explicit Return
begins_with_vowel_or_consonant("hello world") # => "Begins with a consonant" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T16:11:28.680

方法的隐式返回值是方法中计算的最后一个表达式。

在您的情况下，您注释的*两*行都不是最后一个表达式。最后一个被求值的表达式是赋值`words_array`（顺便说一句，它完全没用，因为它是最后一个表达式，之后无法使用该变量）。

现在，赋值表达式的值是多少？它是被分配的值，在这种特殊情况下，`map`方法的返回值是一个`Array`. 所以，这就是方法返回的内容。

在*第二个*示例中，在 的第一次迭代中`map`，您将命中两个`return`s 中的一个，因此立即从该方法返回。但是，在第一个示例中，您将始终遍历整个`words`数组。

问题*不*在于隐式和显式返回不同，问题在于您声称是隐式返回的两行不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:49:28.130

发生这种情况的原因是因为 return 语句位于块内。如果 return 语句仅在函数内部，则执行流程将如您所愿。ruby 中的块和返回（以及与此相关的中断语句）是一种奇怪的野兽。让我们举一个更简单的例子来捕捉你的要求：

```
def no_return()
  (1..10).each do |i|
    puts i
  end
  puts 'end'
end

def yes_return()
  (1..10).each do |i|
    puts i
    return 
  end
  puts 'end'
end 
```

如果你同时运行这两个函数，你会看到第一个函数会打印出你所期望的数字 1-10 和单词“end”，但第二个函数只打印出 1。这是因为 ruby​​ 内部实现了返回 (和 break 语句）作为例外。当这些异常被抛出时，一个名为“catch table”的查找表被用来尝试找到执行流程应该继续的地方。如果没有找到，ruby 将在内部搜索 rb_control_frame 结构的堆栈，寻找指向我们正在执行的代码的指针。因此，在您的情况下，抛出异常并且最近的指针（就堆栈帧而言）位于方法的末尾，基本上导致整个方法终止。这就是为什么你甚至看不到“结束”被打印出来的原因。

no_return 指令：

```
0000 trace            1                                               (   3)
0002 putnil           
0003 getdynamic       i, 0
0006 send             :puts, 1, nil, 8, <ic:0>
0012 leave 
```

yes_return 指令：

```
0000 trace            1                                               (   3)
0002 putnil           
0003 getdynamic       i, 0
0006 send             :puts, 1, nil, 8, <ic:0>
0012 pop              
0013 trace            1                                               (   4)
0015 putnil           
0016 throw            1
0018 leave 
```

重要的是在 yes_return 指令中，“throw 1”实际上是作为抛出（和捕获）异常实现的 return 语句。Breaks 以相同的方式工作，除了它们“抛出 2”。

要亲自查看所有框架和捕获表的实际说明，请查看我不久前整理的这个应用程序： [http ://rubybytes.herokuapp.com/](http://rubybytes.herokuapp.com/)

有关更多信息，请查看 Pat Shaughnessy 的博客，特别是此条目以获取更多信息： http: [//patshaughnessy.net/2012/6/29/how-ruby-executes-your-code](http://patshaughnessy.net/2012/6/29/how-ruby-executes-your-code)

还有一个无耻的插件，如果你喜欢 java，请在 javabytes.herokuapp.com 上查看我的 ruby​​bytes 的 java 版本，以查看反汇编的 java 字节码（对不起，它是无链接的，你必须将 url 复制并粘贴到浏览器中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:25:45.123

`return`将从产生块的方法返回，因此您需要隐式或使用[next](http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-next)

# c++ - 可以在 C++ 中创建单例结构吗？如何？

> ID：15187289
> 
> 赞同：1
> 
> 时间：2013-03-03T15:36:43.073
> 
> 标签：c++, struct, singleton

当我了解更多关于编码的知识时，我喜欢进行试验。我有一个程序在它的运行时只需要一个结构的单个实例，并且想知道是否可以创建一个单例结构。我在互联网上看到了很多关于制作单例类的信息，但没有看到关于制作单例结构的信息。这可以做到吗？如果是这样，怎么做？

提前致谢。哦，我在 C++ 中工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T15:38:41.410

A`class`和 a`struct`几乎是一回事，除了一些小细节（例如其成员的默认访问级别）。因此，例如：

```
struct singleton
{
    static singleton& get_instance()
    {
        static singleton instance;
        return instance;
    }

    // The copy constructor is deleted, to prevent client code from creating new
    // instances of this class by copying the instance returned by get_instance()
    singleton(singleton const&) = delete;

    // The move constructor is deleted, to prevent client code from moving from
    // the object returned by get_instance(), which could result in other clients
    // retrieving a reference to an object with unspecified state.
    singleton(singleton&&) = delete;

private:

    // Default-constructor is private, to prevent client code from creating new
    // instances of this class. The only instance shall be retrieved through the
    // get_instance() function.
    singleton() { }

};

int main()
{
    singleton& s = singleton::get_instance();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T15:41:04.373

结构和类在 C++ 中几乎相同（唯一的区别是成员的默认可见性）。

请注意，如果要制作单例，则必须防止 struct/class 用户实例化，因此隐藏 ctor 和 copy-ctor 是不可避免的。

```
struct Singleton
{
private:
    static Singleton * instance;

    Singleton()
    {
    }

    Singleton(const Singleton & source)
    {
        // Disabling copy-ctor
    }

    Singleton(Singleton && source)
    {
        // Disabling move-ctor
    }

public:
    Singleton * GetInstance()
    {
        if (instance == nullptr)
            instance = new Singleton();

        return instance;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T15:38:56.450

从概念上讲，a`struct`和 a`class`在 C++ 中是相同的，因此制作单例与制作单例`struct`相同`class`。

`class`和之间的唯一区别`struct`是默认访问说明符和基类继承：`private`for`class`和`public`for `struct`。例如，

```
class Foo : public Bar 
{ 
 public: 
  int a;
}; 
```

是相同的

```
struct Foo : Bar
{
 int a;
}; 
```

因此，在单例方面没有根本区别。请务必阅读[为什么单身人士被认为是坏的](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)。

这是一个简单的实现：

```
struct singleton
{
  static singleton& instance()
  {
    static singleton instance_;
    return instance_;
  }
  singleton(const singleton&)=delete;            // no copy
  singleton& operator=(const singleton&)=delete; // no assignment

 private:
  singleton() { .... } // constructor(s)
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T15:39:49.163

首先，`struct`仅指`class`成员的默认访问权限。你可以用一个结构来做任何你可以用一个类来做的事情。现在，如果您指的是 POD 结构，事情会变得更加复杂。您无法定义自定义构造函数，因此无法仅强制创建单个对象。但是，没有什么能阻止您仅将其实例化一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T15:39:50.283

`class`并且*几乎*`struct`是C++ 中的同义词。对于单例用例，它们是完整的同义词。

# java - CordovaWebView 中的当前 URL

> ID：15187293
> 
> 赞同：0
> 
> 时间：2013-03-03T15:37:17.963
> 
> 标签：java, cordova

谁能告诉我在使用 Phonegap (Cordova) 时如何获取 CordovaWebView 的当前 URL？

当 URL 更改为我想要的 URL 时，我想在 Java 中执行类似的操作：

```
if(current_url_cordova_webview=="http://www.google.com"){
alert("Yes");
}else{ 
alert("No");
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:29:57.650

我希望你的意思是 JavaScript 而不是 java。 **document.URL** 将为您提供 JS 中的当前 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:47:56.590

感谢您的答复。我自己通过创建自定义 Webview 并检查 onPageFinished 中的 url 来做到这一点。

# youtube-api - YouTube IFrame API - Android 的 WebView 中的 player.getCurrentTime()

> ID：15187295
> 
> 赞同：0
> 
> 时间：2013-03-03T15:37:26.640
> 
> 标签：youtube-api

当我的 IFrame 显示在桌面浏览器上时， player.getCurrentTime() 返回正确的时间，即。视频中当前帧的时间。

但是，当在 Android 中的 WebView 中显示时，初始视频缓冲需要更长的时间，并且返回值对应的是*从缓冲开始*经过的时间，而不是播放时间。

任何解决方法？

# qt - QWebView 可以从 Qt 资源文件中加载图像吗？

> ID：15187296
> 
> 赞同：9
> 
> 时间：2013-03-03T15:37:29.380
> 
> 标签：qt, resources, qwebview

我在我的 Qt 应用程序的资源文件（用于帮助系统）中捆绑了一些 HTML 和 PNG。不幸的是，我找不到 HTML 显示图像的方法。我已经尝试了`QWebView`' 的基本 URL 和`<img>`标签的不同 URL 的各种组合，但到目前为止没有一个有效。

要清楚，我希望能够做这样的事情：

```
QString html = "<html><img href=':/resources/cat.png'/></html>";
myWebView->setHtml(html, ???); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T17:18:47.353

尝试您的资源格式为：

```
qrc:/resources/cat.png 
```

代替

```
:/resources/cat.png 
```

我们有 .css 文件，它们在 webview 中使用这种格式的图像，它工作正常

# sencha-touch-2 - Sencha touch 2.0，安卓应用在某些设备上一直显示加载屏幕

> ID：15187298
> 
> 赞同：0
> 
> 时间：2013-03-03T15:37:39.603
> 
> 标签：sencha-touch-2

我已经完成了我的第一个 Sencha 应用程序的编写并在 Android 市场上发布了它。这基本上是为了下周在底特律大都会地区举行的会议。我还在我的公司中引入 Sencha 作为一种可行的移动选项。

然而，一旦发布到市场上，它似乎并没有在某些设备上加载。如何找出设备上的问题？它适用于桌面以及某些 android 手机和 nexus pad，但在某些其他手机中无法加载（用户一直看到加载页面）。我想知道如何调试这个问题？Sencha 是否在 logcat 中记录控制台日志异常？非常感谢这方面的任何帮助！

我正在使用 Internet 权限访问 Twitter 提要和谷歌地图。有点猜测问题可能是因为访问互联网，但如何找出来？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:46:45.433

根据经验，这通常是由于正确设置 sencha 之前的 javascript 错误造成的。这可能缺少功能或包括问题、挑剔的解析器等。除了`window.error = alert`在运行任何其他 javascript 之前获取受影响的设备并进行设置之外，没有真正好的方法来调试它。

# php - 使用 php 隐藏来自网络爬虫的内容。可能吗？

> ID：15187299
> 
> 赞同：-2
> 
> 时间：2013-03-03T15:37:41.923
> 
> 标签：php, web-crawler

我是编程新手，所以如果我说一些愚蠢的话，请不要评判我。

我想知道是否有任何方法可以欺骗网络爬虫，因此对于人类访问者来说，网站的某些内容与网络蜘蛛不同。

所以这是我想到的一个想法。

每次访问者进入页面时，都会有一个脚本从 facebook API 识别用户性别。如果有返回（如果用户在同一个浏览器中连接到 facebook），那么将使用 PHP 将一些代码打印到页面代码中。如果是爬虫，则不会返回，所以该页面的源代码中不会存在代码。

我知道 PHP 是一种服务器端语言，因此网络爬虫无权扫描这些代码。如果我不正确，请纠正我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:42:27.073

我认为您尝试做的事情可以通过 robots.txt 来完成

该文件可以位于您的网络目录的根目录中，它定义了网络爬虫的规则。见这里：[http ://www.robotstxt.org/](http://www.robotstxt.org/)

# sublimetext2 - Sublime build - 动态文件名

> ID：15187300
> 
> 赞同：0
> 
> 时间：2013-03-03T15:37:44.327
> 
> 标签：sublimetext2, bibtex

我需要为 BibTeX 文件制作一个构建文件。

我有以下内容：

```
{
  "cmd": ["bibtex", "*.aux"],
  "selector": "text.bibtex"
} 
```

当我`bibtex *.aux`从终端运行时，它工作正常。但是，崇高不断告诉我：

```
I couldn't open file name `*.aux'
[Finished in 0.1s with exit code 1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:37:44.327

答案是：制作自定义脚本！

例如：`subl /home/user/buildBibtex.sh`包括：

```
#!/bin/sh
bibtex *.aux 
```

跑`chmod +x /home/user/buildBibtex.sh`

构建文件将如下所示：

```
{
  "cmd": ["/home/user/buildBibtex.sh"],
  "selector": "text.bibtex"
} 
```

# text - 如何测量查询和文档之间的句法相似度？

> ID：15187303
> 
> 赞同：1
> 
> 时间：2013-03-03T15:38:01.940
> 
> 标签：text, syntax, nlp, similarity

有没有办法测量查询（句子）和文档（一组句子）之间的句法相似度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T03:04:31.380

您是否考虑过使用涉及[HPSG](http://moin.delph-in.net/)和 LFG等深度语法的[深度语言处理工具？](http://en.wikipedia.org/wiki/Deep_linguistic_processing)如果您正在寻找基于特征的句法相似性，您可以查看[Kenji Sagae 和 Andrew S. Gordon](http://people.ict.usc.edu/~gordon/ssrp.html)的工作，他们使用 PropBank 计算动词的句法相似性，然后对相似的动词进行聚类以改进 HPSG 语法。

为了采用更简单的方法，我建议只查看具有相同解析节点的依赖解析和分组句子。或者只是 POS 标记句子并比较具有相同 POS 标记的句子。

为了一个简单的例子，首先下载并安装 NLTK ( [http://nltk.org/](http://nltk.org/) ) 和 hunpos 标记器 ( [http://code.google.com/p/hunpos/](http://code.google.com/p/hunpos/) )。解压缩 en_wsj.model.gz 并将其保存在 python 脚本所在的位置。

```
import nltk 
from nltk.tag.hunpos import HunposTagger
from nltk.tokenize import word_tokenize

s1 = "This is a short sentence"
s2 = "That is the same sentence"

ht = HunposTagger('en_wsj.model')
print ht.tag(word_tokenize(corpus))http://nltk.org/

# Tag the sentences with HunPos
t1 = ht.tag(word_tokenize(s1))
t2 = ht.tag(word_tokenize(s2))

#Extract only the POS tags
pos1 = [i[1] for i in t1]
pos2 = [j[1] for j in t2]

if pos1 == pos2:
    print "same sentence according to POS tags"
else:
    print "diff sentences according to POS tags" 
```

上面的这个脚本输出：

```
>>> print pos1
['DT', 'VBZ', 'DT', 'JJ', 'NN']
>>> print pos2
['DT', 'VBZ', 'DT', 'JJ', 'NN']
>>> if pos1 == pos2:
...     print "same sentence according to POS tags"
... else:
...     print "diff sentences according to POS tags"
... 
same sentence according to POS tags 
```

要修改上述代码，请尝试：

*   而不是比较 POS 使用依赖解析
*   与其进行严格的列表比较，不如提出一些统计方法来衡量差异水平

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:24:53.753

你在寻找像[Apache Lucene](http://lucene.apache.org/core/)这样的东西吗？

# twitter-bootstrap - 使用 Bootstrap Modal，您可以将页面的淡化限制为页面的父 div，而不是整个正文吗？

> ID：15187308
> 
> 赞同：1
> 
> 时间：2013-03-03T15:38:13.873
> 
> 标签：twitter-bootstrap

我正在构建一个小游戏，我需要使模式出现在游戏“窗口”（一个 div）中，并且窗口的其余部分会淡出和变灰，但不是整个页面，界面仍然存在。

有没有简单的方法来限制这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:03:07.590

你必须使用引导模式吗？如果是这样，将需要一些hackery才能使其正常工作。但它肯定是可以做到的。您需要：

1.  更改插入背景的位置。Boostrap Modal 会将背景附加到 document.body，因此您必须更改 js 文件以附加到（或可能插入）您想要覆盖的 div。
2.  CSS也需要更改。目前，背景样式只是使用一个固定的位置来覆盖整个窗口（边缘在 0、0、0.0）。您希望它只覆盖一个 div，这意味着从固定宽度更改为其他宽度。
3.  模态的 css 可能必须更改，具体取决于您希望它居中的位置等。

也许您可以尝试使用 BlockUI 阻止元素。这似乎有你想要的内置？

[http://jquery.malsup.com/block/#element](http://jquery.malsup.com/block/#element)

如果不是这样，那么有许多阻塞或覆盖页面部分以进行加载和 ajaxy 类型操作的示例。我会调查其中之一。

# quaternions - 四元数<->欧拉

> ID：15187309
> 
> 赞同：0
> 
> 时间：2013-03-03T15:38:24.767
> 
> 标签：quaternions

我正在使用 C#，在我的程序中，我在 Quaternions 中收到一个 Ridigbody 的四元数，但轴与我使用的轴的方向不对应，所以我想旋转四元数。为了做到这一点，我将四元数转换为欧拉角，切换俯仰、偏航和滚动，使其与我的坐标系相对应，将其转换回四元数，然后生成一个旋转矩阵来变换位置。

但是出了点问题，当我将相同的输入从四元数转换为欧拉并返回时，我得到另一个四元数......所以其中一个函数出错了，我不知道在哪里......

```
Quaternion q = new Quaternion(-0.4, -0.7, -0.8, 0.5);

double yaw = 0, pitch = 0, roll = 0;
toEuler(q, ref yaw, ref pitch, ref roll);

Quaternion quat = ToQ((float)(yaw), (float)(pitch), (float)(roll));

private void toEuler(Quaternion q, ref double x, ref double y, ref double z)
        {
            double test = q.X * q.Y + q.Z * q.W;
            if (test > 0.499)                            // singularity at north pole
            {
                y = 2.0F * System.Math.Atan2(q.X, q.W);
                z = Math.PI / 2.0F;
                x = 0.0F;
                return;
            }

            if (test < -0.499)                           // singularity at south pole
            {
                y = -2.0F * System.Math.Atan2(q.X, q.W);
                z = -Math.PI / 2.0F;
                x = 0.0F;
                return;
            }

            double sqx = q.X * q.X;
            double sqy = q.Y * q.Y;
            double sqz = q.Z * q.Z;
            y = System.Math.Atan2(2.0F * q.Y * q.W - 2.0 * q.X * q.Z, 1.0F - 2.0 * sqy - 2.0 * sqz);
            z = System.Math.Asin(2.0F * test);
            x = System.Math.Atan2(2.0 * q.X * q.W - 2.0 * q.Y * q.Z, 1.0F - 2.0 * sqx - 2.0 * sqz);
        }

 public Quaternion ToQ(float yaw, float pitch, float roll)
        {
            float rollOver2 = roll * 0.5f;
            float sinRollOver2 = (float)Math.Sin((double)rollOver2);
            float cosRollOver2 = (float)Math.Cos((double)rollOver2);
            float pitchOver2 = pitch * 0.5f;
            float sinPitchOver2 = (float)Math.Sin((double)pitchOver2);
            float cosPitchOver2 = (float)Math.Cos((double)pitchOver2);
            float yawOver2 = yaw * 0.5f;
            float sinYawOver2 = (float)Math.Sin((double)yawOver2);
            float cosYawOver2 = (float)Math.Cos((double)yawOver2);
            Quaternion result = new Quaternion();
            result.W = cosYawOver2 * cosPitchOver2 * cosRollOver2 + sinYawOver2 * sinPitchOver2 * sinRollOver2;
            result.X = cosYawOver2 * sinPitchOver2 * cosRollOver2 + sinYawOver2 * cosPitchOver2 * sinRollOver2;
            result.Y = sinYawOver2 * cosPitchOver2 * cosRollOver2 - cosYawOver2 * sinPitchOver2 * sinRollOver2;
            result.Z = cosYawOver2 * cosPitchOver2 * sinRollOver2 - sinYawOver2 * sinPitchOver2 * cosRollOver2;

            return result;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-09T20:01:37.983

你的四元数似乎没有标准化。代表旋转的四元数应该有范数 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-20T14:41:29.320

为了扩展 Ben 的答案，通过除以平方和的平方根来归一化四元数。

如果您需要旋转四元数并保持其长度，我建议使用四元数进行旋转。维基百科对此有一个很棒的页面： [https ://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation](https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T10:08:43.623

确保在转换“to”和“from”时使用相同的 Euler Angels。

您可以从 Ken Shoemake [http://tog.acm.org/resources/GraphicsGems/gemsiv/euler_angle/找到很好的参考代码](http://tog.acm.org/resources/GraphicsGems/gemsiv/euler_angle/)

以及来自“Graphics Gems”系列的文章“欧拉角转换”Ken Shoemake

# .net - 我的 C# 应用程序的登录系统

> ID：15187310
> 
> 赞同：0
> 
> 时间：2013-03-03T15:38:25.747
> 
> 标签：.net, c#-4.0

我有一个带有登录系统的 C# 应用程序，它工作正常，但我想要的是用户可以注销并再次登录，以便主窗体中的菜单将改变其可见性，这就是我的做法。我有一个登录表单、主表单和一个最终用户类。

mainform 是程序在加载时首先运行的，它将显示登录表单的对话框。

在登录代码中。它将用户名和密码传递给最终用户类并检查属性 loginsuccess

```
public partial class Login : Form
{
   private void cmdlogin_Click(object sender, EventArgs e)
    {
        if (IsEmpty())
        {
            MessageBox.Show("Please enter username/password.");
            TxtFocus();
        }
        else
        {
            EndUser.LogIn(txtusername.Text, txtpassword.Text);
            if (EndUser.LogInSucces)
            {

            }
            else
            {

            }
        }
    }
} 
```

在最终用户类中，它将打开与数据库的连接并搜索用户名和密码是否可用并将属性 loginsuccess 更改为 true 并将角色属性更改为枚举中的适当属性。

之后，登录表单将关闭以显示主表单。主窗体将检查用户的角色并设置菜单的可见性。

```
public partial class Form1 : Form
{
     public Form1()
    {
        InitializeComponent();
        Login loginFrm = new Login();
        loginFrm.ShowDialog();
        this.IsMdiContainer = true;            
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        if (EndUser.LogInSucces) {
            switch (EndUser.GetRole())
            {
                case EndUser.Role.Principal:
                    PrincipalSettings();
                    break;
                case EndUser.Role.Admission:
                    AdmissionSettings();
                    break;
                case EndUser.Role.Registrar:
                    RegistrarSettings();
                    break;
                case EndUser.Role.Faculty:
                    FacultySettings();
                    break;
            }
        }
    }

 #region menus visibility 
```

我尝试使用命令 application.restart() 重新启动应用程序，因为它将开始登录流程，但这并不好，因为当我在程序中执行某些操作然后注销时，我会收到错误消息。你能提供一些建议吗？

# facebook - 如何创建一个向朋友发送邀请的 Facebook 应用程序，但他们看不到邀请，除非

> ID：15187328
> 
> 赞同：-1
> 
> 时间：2013-03-03T15:40:36.457
> 
> 标签：facebook, facebook-apps

该应用程序应该允许用户通过选中他们的朋友头像和姓名旁边的一个小框来从他的朋友列表中选择一个或多个朋友，并向他们发送邀请。但是，他们的朋友（收到邀请的人）将无法看到任何通知或邀请（没有任何操作），除非他们也在使用此应用程序，并且他们也向用户发送了相同的邀请。因此，用户向选定的朋友发送通知，除非收到邀请的人也向用户发送了邀请，否则没有人会看到任何内容。当两个人都发送邀请时，他们会收到来自应用程序的通知，并通知他们比赛已经发生。我想知道这是否可能，如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:49:53.010

是的，这是可能的。但是您必须自己构建它；没有内置功能。逻辑非常简单：您需要将这些“邀请”存储在数据库中，当有人邀请之前邀请过他们的另一个人时，您可以通过[Notifications API](https://developers.facebook.com/docs/howtos/notifications-api/)向他们发送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:52:40.723

所以这绝对是可能的，但它需要您采取一些步骤来确保邀请[好友选择器](https://developers.facebook.com/docs/reference/dialogs/requests/)仅显示相关用户。您还需要为邀请实施您自己的“跟踪”类型，以执行您需要的逻辑。

### 初始邀请逻辑 -

首次初始化邀请对话框时，您指定过滤器以仅显示某些用户。其中一个过滤器称为`app_users`. 使用此过滤器时，只会显示安装了该应用程序的朋友。此请求将始终包含一个通知，您无法阻止它，因为它是请求功能的核心......

发送此请求后，您必须在数据库中保存用户向其他人发送邀请的记录（在随后调用对话框时需要此记录）。

* * *

在这个阶段，一个用户已经向其他用户（安装了应用程序的用户）发送了 X 个请求，并且您有确切的受邀者记录。

* * *

### 后续邀请逻辑——

当其中一个用户（之前发送过邀请）现在想要向其他人发送请求时（根据您的逻辑，只有已经向他发送过请求的用户），您可以使用另一个过滤器来限制对话框中显示的用户。 . 您可以按以下形式指定过滤器（示例取自[文档](https://developers.facebook.com/docs/reference/dialogs/requests/)-

```
[{name: 'Friends who have already sent me an invite', user_ids: [1, 2, 3]}] 
```

要记住的一件事是，过滤器选项在移动对话框中被禁用，并且不会影响出现在对话框中的用户集。

# mysql - MySql 中可能的 VARCHAR 哈希索引结构

> ID：15187333
> 
> 赞同：0
> 
> 时间：2013-03-03T15:41:25.457
> 
> 标签：mysql, hash, indexing, varchar

**MySql 表：** `id (bigint)` `status (tinyint)`和`string (varchar[250])`

**内容**：大约*3600 万*个条目，其中每个字符串具有*[1 到 250] 个*字符的**可变**长度。

 ***所需查询**：`SELECT id FROM tb WHERE status=N AND string IN ('str1','str2'...)`

**问题**：我*需要*这个`string`领域`INDEX`

**IDEA**：创建一个单独的表，`hash_strings`如下所示：

```
+--------------------+
| id [bigint]        |
+--------------------+
| str_hash [varchar] | ==> INDEX
+--------------------+ 
```

`ids`...所以我首先使用表获取字符串`hash_strings`，然后在第一个查询中使用列表`ids`而不是。`strings`我制作了一个单独的表，因为将字符串和哈希存储在同一个表中会使表更大，并且查询运行速度更慢。

**问题**：

*   你怎么看待这件事？
*   我应该使用哪个哈希函数？*（32 个字符，16 个字符）**

# playn - PlayN ：将 TriplePlay 文本字段添加到特定位置

> ID：15187336
> 
> 赞同：1
> 
> 时间：2013-03-03T15:41:48.670
> 
> 标签：playn, tripleplay

我有一个简单的背景层：

```
@Override
public void wasAdded() {
    super.wasAdded();

     Image bgImage = PlayN.assets().getImage("images/Welcome.png");
     ImageLayer bgLayer = graphics().createImageLayer(bgImage);
     layer.add(bgLayer);

     Image usernameButton =
     PlayN.assets().getImage("images/textField.png");
     ImageLayer usernameLayer =
     graphics().createImageLayer(usernameButton);
     usernameLayer.setTranslation(197, 337);
     layer.add(usernameLayer);

    }
} 
```

我想将文本字段元素添加到特定位置（在用户名图像上）。

```
final Field field = new Field();
field.text.update("your name"); 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:34:54.463

我需要创建一个 AbsoluteLayout 根并在特定位置添加组：

```
_root = iface.createRoot(new AbsoluteLayout(), SimpleStyles.newSheet(), layer);
_root.setSize(width(), height());
Group group = new Group(new AbsoluteLayout()).add(AbsoluteLayout.at(new Field("username"), 197, 337));
_root.add(AbsoluteLayout.at(group, 0, 0)); 
```

# javascript - UTF 字符代码

> ID：15187341
> 
> 赞同：0
> 
> 时间：2013-03-03T15:42:34.577
> 
> 标签：javascript, encoding

我正在使用这个脚本：

```
 document.write("ð".charCodeAt(0)); 
```

它给了我240。

我在哪里可以获得一个数字来表示一个数字，例如 251？

我从哪里获得 unicode 数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:05:48.983

a) 停止使用 document.write()，你不应该使用它。如果你需要在你的页面上放东西，找到它所在的元素，并设置它的innerHTML，或者创建一个元素，将它添加到你的body，然后设置该元素的innerHTML。或者使用 alert() 或 console.log()。

b) charCodeAt 会给你更高的 unicode 值就好了。

```
"ð".charCodeAt(0) -> 240
"ð".charCodeAt(0).toString(16) -> "f0"

"日本語".charCodeAt(0) -> 26085
"日本語".charCodeAt(0).toString(16) -> "65e5" 
```

工作正常。

# sql-server - IPv4地址中的SQL Server反向八位字节？

> ID：15187342
> 
> 赞同：0
> 
> 时间：2013-03-03T15:42:36.500
> 
> 标签：sql-server, string, uniqueidentifier, patindex

我有一些来自 Microsoft TMG 日志表的转储，IP 地址存储为唯一标识符。我能够将这些值转换为人类可读的“点分八位字节表示法”（这都是 IP v4 的东西），但是这些值是相反的。

反转值的最有效方法是什么？

谢谢。

例子：

```
Is                  ShouldBe
189.148.151.123     123.151.148.189
251.116.199.173     173.199.116.251
1.0.0.127           127.0.0.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:05:39.783

您可以（ab）使用[`parsename`](http://msdn.microsoft.com/en-us/library/ms188006.aspx)：

```
select  parsename(ip_col,4) + '.' +
        parsename(ip_col,3) + '.' +
        parsename(ip_col,2) + '.' +
        parsename(ip_col,1)
from    YourTable 
```

# debian - dpkg-buildpackage -uc -us -b 失败并显示“dpkg-shlibdeps：错误：找不到 ...monodis 所需的库 libmono-2.0.so.1。”

> ID：15187344
> 
> 赞同：2
> 
> 时间：2013-03-03T15:42:40.493
> 
> 标签：debian, packaging, deb

尝试使用[此脚本](https://github.com/7digital/7digital-mono/blob/master/build-package)构建简单的 .deb 包失败：

```
 dh_installexamples
   dh_installman
   dh_installcatalogs
   dh_installcron
   dh_installdebconf
   dh_installemacsen
   dh_installifupdown
   dh_installinfo
   dh_pysupport
   dh_installinit
   dh_installmenu
   dh_installmime
   dh_installmodules
   dh_installlogcheck
   dh_installlogrotate
   dh_installpam
   dh_installppp
   dh_installudev
   dh_installwm
   dh_installxfonts
   dh_bugfiles
   dh_lintian
   dh_gconf
   dh_icons
   dh_perl
   # Skipping dh_usrlocal - empty override
   dh_link
   dh_compress
   dh_fixperms
   dh_strip
   dh_makeshlibs
   dh_shlibdeps
dpkg-shlibdeps: error: couldn't find library libmono-2.0.so.1 needed by debian/7digital-mono/usr/usr/bin/monodis (ELF format: 'elf64-x86-64'; RPATH: '').
Note: libraries are not searched in other binary packages that do not have any shlibs or symbols file.
To help dpkg-shlibdeps find private libraries, you might need to set LD_LIBRARY_PATH.
dh_shlibdeps: dpkg-shlibdeps -Tdebian/7digital-mono.substvars debian/7digital-mono/usr/usr/bin/mono debian/7digital-mono/usr/usr/bin/mprof-report debian/7digital-mono/usr/usr/bin/mono-sgen debian/7digital-mono/usr/usr/bin/pedump debian/7digital-mono/usr/usr/bin/monograph debian/7digital-mono/usr/usr/bin/monodis debian/7digital-mono/usr/usr/lib/mono/4.5/mcs.exe.so debian/7digital-mono/usr/usr/lib/mono/4.5/mscorlib.dll.so debian/7digital-mono/usr/usr/lib/mono/2.0/mscorlib.dll.so debian/7digital-mono/usr/usr/lib/libMonoSupportW.so debian/7digital-mono/usr/usr/lib/libikvm-native.so debian/7digital-mono/usr/usr/lib/libmono-2.0.so.1.0.0 debian/7digital-mono/usr/usr/lib/libMonoPosixHelper.so debian/7digital-mono/usr/usr/lib/libmono-profiler-log.so.0.0.0 debian/7digital-mono/usr/usr/lib/libmono-profiler-cov.so.0.0.0 debian/7digital-mono/usr/usr/lib/libmono-profiler-aot.so.0.0.0 debian/7digital-mono/usr/usr/lib/libmonosgen-2.0.so.0.0.0 debian/7digital-mono/usr/usr/lib/libmono-profiler-iomap.so.0.0.0 returned exit code 2
make: *** [binary] Error 9
dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit status 2 
```

知道这意味着什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T07:18:08.500

这意味着（在构建过程中）找到的二进制文件`debian/7digital-mono/usr/usr/bin/monodis`（并且可能最终会成为`/usr/bin/monodis`）正在链接，`libmono-2.0.so.1`但找不到该文件。

我怀疑 .so 文件也是您的软件包的一部分（尽管您对此没有任何线索），因此它尚未安装在目标系统上。

我发现最奇怪的是`usr`在您的路径中出现了两次，这很可能表明问题出在哪里：dpkg-shlibdeps（通过链接器）可能在标准路径（例如`usr/lib`）*和*包路径（例如`debian/7digital-mono/usr/lib`），但它不会查看`debian/7digital-mono/usr/usr/lib`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T04:27:28.457

相应地更改`"debian/rules"`文件以指示正确的路径`LD_LIBRARY`

在规则文件中搜索`"dh binary-arch"`并替换为

```
LD_LIBRARY_PATH=$(LD_LIBRARY_PATH):/usr/lib/i386-linux-gnu:/lib/i386-linux-gnu dh binary-arch 
```

或者

```
LD_LIBRARY_PATH=$(LD_LIBRARY_PATH):/path-1-to-shared-library:/path-2-to-shared-library dh binary-arch 
```

或者

```
LD_LIBRARY_PATH=$(LD_LIBRARY_PATH):/path-to-shared-library dh binary-arch 
```

# jquery - 使用 python 和 selenium 时如何根据 id 和 value 查找元素的存在

> ID：15187345
> 
> 赞同：0
> 
> 时间：2013-03-03T15:42:46.797
> 
> 标签：jquery, python, selenium-webdriver

我试图通过查找 jquery 的长度来查找元素的存在。我们如何在变量中捕获 web 元素的长度，以便我可以检查变量的值来做出决定。

或者有没有其他方法可以达到同样的效果。我正在使用 python、selenium webdriver 和 JQuery。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:30:25.087

可以使用 python webdriver 查找元素文本的长度。请参阅下面的代码。

```
name=driver.find_element_by_xpath("xpath")
print name.text
len(name) 
```

上面的代码将显示您可以从网站中选择的元素的长度。可能对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T11:20:42.610

我们可以使用这个 Funda

If driver.findElements(By.id(id)).size() > 0 Then Element Present; 其他元素不存在

同样适用于价值。

请让我知道我的 Funda 是否正常。

# android - 带有 Sqlite 的 Android 空间数据库

> ID：15187346
> 
> 赞同：3
> 
> 时间：2013-03-03T15:42:50.353
> 
> 标签：android, augmented-reality, spatial, spatial-index

这个问题被问了很多次，但我没有找到适合我要求的相关解决方案。

我想在 Android 上构建一个简单的增强现实应用程序，它使用空间数据（R-Tree）来存储地理数据。我发现这个[Spatialite](https://www.gaia-gis.it/fossil/libspatialite/wiki?name=splite-android)解决方案看起来很棒，但我的工具几乎没有问题，而且对于我的应用程序来说它看起来相当复杂。另一个技巧是使用启用了 SQLITE_ENABLE_RTREE 的 SQLite，这需要我构建自己的 SQlite 库。

我只需要在手机中存储与 R-Tree 算法兼容的空间数据（我有一小部分覆盖大学校园内建筑物的数据），然后根据当前位置进行查询。

我正在寻找实现这一目标的一些方向，主要是在存储部分。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T14:43:12.797

我认为 R-Tree 的有用性在大型数据集上是显而易见的。您是否仅使用带有标准索引的标准 SQL 测试了性能？只是 SQLite 页面的一个片段：

```
 SELECT id FROM campus WHERE x>=-81.08 AND x<=-80.58 AND y>=35.00 AND y<=35.44 
```

我了解您可能不想承担自己编译 SQLite 的维护负担。

[http://www.sqlite.org/rtree.html](http://www.sqlite.org/rtree.html)

切换到 JavaScript 怎么样？

[https://github.com/imbcmdth/RTree/tree/master/examples](https://github.com/imbcmdth/RTree/tree/master/examples)

# java - Java Play Framework + H2 数据库，并发运行性能

> ID：15187347
> 
> 赞同：0
> 
> 时间：2013-03-03T15:43:11.617
> 
> 标签：java, concurrency, playframework, h2

我有一个使用 H2 数据库的游戏框架应用程序。一般来说，应用程序有几个预定的“作业”，将数据插入数据库（来自外部 Firebird 数据库），以及一个控制器层，通过 get 请求以 xml 格式向用户呈现存储的数据。

我的问题是，虽然有一项将数据插入数据库的工作，即使只有几行，数据库似乎在插入操作完成之前没有响应。（选择查询正在等待，直到其他操作完成）。

我正在使用带有“MVCC = TRUE”添加的标准 Play Framework H2 连接字符串。

顺便提一句。该服务器运行在 windows 平台 + Apache Tomcat 服务器上。

是否有任何其他参数或设置可以解决此“无响应”问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:31:37.740

默认情况下，H2 序列化语句。您有多种选择：

*   一次插入较少的数据（每条语句中的行数较少），使数据库不会长时间阻塞
*   [`multi_threaded`使用选项启用多线程](http://h2database.com/html/grammar.html#set_multi_threaded)`mvcc`，但在这种情况下，很遗憾您不能使用该功能。
*   使用不同的数据库。

# xml - 用于 Web 服务响应的 xslt 工作表中的错误

> ID：15187349
> 
> 赞同：0
> 
> 时间：2013-03-03T15:43:23.503
> 
> 标签：xml, web-services, xslt

伙计们，我需要为来自 web 服务的响应设计 xsl 表，但我面临的问题是来自 web 服务的每个 xml 标记的格式为“ns1：元素名称”，但是在样式表中使用它时它向我展示错误“未定义前缀 ns1”

xslt 语句如下：

```
 <xsl:template match="ns1:OTA_AirLowFareSearchRS">

    <xsl:for-each select ="ns1:OTA_AirLowFareSearchRS/PricedItineraries/PricedItinerary"> 
```

来自 webservice 的示例 xml 如下：

```
<ns1:OTA_AirLowFareSearchRS Version="2.001" xmlns="http://www.opentravel.org/OTA/2003/05" xmlns:ns1="http://www.opentravel.org/OTA/2003/05">
      <ns1:Success />
       <ns1:PricedItineraries>
        <ns1:PricedItinerary CompositeFlightNumber="AI" CountCompositeFlightNumber="1" FareType="Non-Refundable" InboundSegmentReference="1" MatrixFare="true" Mode="" OriginDestinationRPH="BLRHYDAI517AI20130321" OutboundSegmentReference="1" Priority="1" RecommendationRPH="1" Refundable="true" ReturnOnly="false" SequenceNumber="1.0" SupplierCode="1AWS">
           <ns1:AirItinerary SupplierSystem="Amadeus">
             <ns1:OriginDestinationOptions>
               <ns1:OriginDestinationOption Duration="01:05:00" FlightID="BLRHYDAI517AI2013-03-21" MajorityCarrier="AI" ReturnOnly="false" SupplierCode="1AWS" SupplierSystem="Amadeus" UniqueIdentifier="1.0">
                 <ns1:FlightSegment ArrivalDateTime="2013-03-21T09:20:00" CabinCode="Y" DeliveryMethod="Courier" DepartureDateTime="2013-03-21T08:15:00" Duration="01:05:00" FlightNumber="517" LTD="1AWS" LineNumber="Y" NumberInParty="BLRHYD" RPH="1" ResBookDesigCode="E" TicketType="Physical" ValidConnectionInd="1AWS">
                  <ns1:DepartureAirport AirPortName="Bengaluru" CityName="Bangalore" LocationCode="BLR" />
                  <ns1:ArrivalAirport AirPortName="Shamshabad Rajiv Gandhi" CityName="Hyderabad" LocationCode="HYD" />
                  <ns1:OperatingAirline Code="AI" />
                  <ns1:BookingClassAvail FareType="RP" ResBookDesigCode="E" ResBookDesigQuantity="5" Status="5" WebFareName="EAP30" />
                  <ns1:Equipment AirEquipType="319" />
                  <ns1:MarketingAirline Code="AI" MatrixCode="AI" Name="Air India" YTAirlineCode="AI" />
                  <ns1:ValidatingCarrier Code="AI" />
                </ns1:FlightSegment>
                 <ns1:FormData>
                  <ns1:FBC Destination="HYD" FlightNumber="517" LineNumber="Y" Origin="BLR" SeatToSell="5" WebFareName="EAP30" />
                  <ns1:FareDifference>
                    <ns1:TotalFare ADT="1" BaseFare="670-ADT 670" CHD="0" Cabin="Economy" HostName="railserver" INF="0" Rbd="RP - E -" Tax="TTL-2355">3032</ns1:TotalFare>
                  </ns1:FareDifference>
                  <ns1:TicketingInfo DeliveryMethod="Courier" TicketTimeLimit="2013-03-03 18:43:00" TicketType="Physical" />
                   <ns1:AgentMarkup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:51:30.553

将命名空间添加到您的 xslt ，

```
<xsl:stylesheet xmlns:ns1="http://www.opentravel.org/OTA/2003/05"> 
```

添加后，您可以在 XSLT 中使用命名空间，例如，

```
<xsl:template match="ns1:OTA_AirLowFareSearchRS"> 
```

# c# - 如何覆盖 _ViewStart 中为 ASP.NET MVC 3 中的某些视图定义的布局？

> ID：15187352
> 
> 赞同：14
> 
> 时间：2013-03-03T15:43:47.483
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

是否可以抑制`_ViewStart.cshtml`使用 ASP.NET MVC 3 对应用程序的某些视图表达的布局。

我知道我可以在控制器操作中以编程方式定义布局。也许传入`""`可以实现这一目标？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-03T15:59:29.937

*你有两个选择*

1）`return PartialView()`从控制器使用，它不会从视图开始布局

2）分配布局=空，

```
 @{
     Layout = null;
  } 
```

查看 marcind 围绕该[主题进行的有趣讨论和回答](https://stackoverflow.com/questions/4081811/correct-way-to-use-viewstart-cshtml-and-partial-razor-views/4082220#4082220)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T15:53:42.613

为了不应用布局，只需将 null 分配给视图中的 Layout 属性：

```
@{
    Layout = null;
}

<!DOCTYPE html>
... 
```

# python - 如何从python中的numpy矩阵中检索每对可能的列对的唯一出现次数的频率

> ID：15187355
> 
> 赞同：4
> 
> 时间：2013-03-03T15:44:09.573
> 
> 标签：python, numpy, itertools

我有一个使用 numpy 矩阵的矩阵：

```
>>> print matrix
[['L' 'G' 'T' 'G' 'A' 'P' 'V' 'I']
 ['A' 'A' 'S' 'G' 'P' 'S' 'S' 'G']
 ['A' 'A' 'S' 'G' 'P' 'S' 'S' 'G']
 ['G' 'L' 'T' 'G' 'A' 'P' 'V' 'I']] 
```

我想要的是对于每对可能的列，从每对列中的行中检索每对字母的唯一出现次数的频率。

例如，对于第一对列，即：

```
[['L' 'G']
 ['A' 'A']
 ['A' 'A']
 ['G' 'L']] 
```

我想检索列中每对字母的频率（注意：字母的顺序很重要）

> ['L' 'G'] 的频率 = 1/4
> 
> ['A' 'A'] 的频率 = 2/4
> 
> ['G' 'L'] 的频率 = 1/4

一旦计算了第一对列的这些频率，然后对每个其他可能的列对组合执行相同的操作。

我认为某种 itertools 将有助于解决这个问题，但我不知道如何......任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T16:00:02.993

我会使用`itertools.combinations`和`collections.Counter`：

```
for i, j in itertools.combinations(range(len(s.T)), 2):
    c = s[:, [i,j]]
    counts = collections.Counter(map(tuple,c))
    print 'columns {} and {}'.format(i,j)
    for k in sorted(counts):
        print 'Frequency of {} = {}/{}'.format(k, counts[k], len(c))
    print 
```

生产

```
columns 0 and 1
Frequency of ('A', 'A') = 2/4
Frequency of ('G', 'L') = 1/4
Frequency of ('L', 'G') = 1/4

columns 0 and 2
Frequency of ('A', 'S') = 2/4
Frequency of ('G', 'T') = 1/4
Frequency of ('L', 'T') = 1/4

[...] 
```

（如果您想要两个订单，修改它以同时执行 0 1 和 1 0 列是微不足道的，而且我假设每对可能的列都不是指“每对*相邻*的列”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:07:58.000

如果您有空余内存，对于某些大小的数组，我猜想列数少，行数多，做一个更密集的 numpy 解决方案可能会有所回报：

```
>>> rows, cols = matrix.shape
>>> matches = np.empty((rows, cols, cols, 2), dtype=str)
>>> matches[..., 0] = matrix[:, None, :]
>>> matches[..., 1] = matrix[:, :, None]
>>> matches = matches.view('S2')
>>> matches = matches.reshape((rows, cols, cols)) 
```

现在，`matches[:, i, j]`您在列`i`和之间有了唯一的对`j`，然后您可以执行以下操作：

```
>>> unique, idx = np.unique(matches[:, 0, 1], return_inverse=True)
>>> counts = np.bincount(idx)
>>> unique
array(['AA', 'GL', 'LG'], 
      dtype='|S2')
>>> counts
array([2, 1, 1]) 
```

# c++ - 为什么我的 int 是指针？

> ID：15187356
> 
> 赞同：-5
> 
> 时间：2013-03-03T15:44:10.227
> 
> 标签：c++, pointers, int, typeerror

我的代码产生了这个错误：

> ISO C++ 禁止指针和整数之间的比较 [-fpermissive]

我已经注释掉了我的代码主体，它不会影响导致错误的原因。该代码是我编写的用于计算牛顿法的程序的一部分。我真的不太了解指针。我现在正试图避免它们。我想要做的就是停止我的 while 循环，如果它运行太多次。

```
 int iter = 0;
    while (abs(nextValue - currValue) > 0.00000000001) and iter < 100000;
    {
//        currValue = nextValue;
//
//        double polyValue = 0;
//        int n3;
//        for (n3 = degree; n3 >= 0; n3--)
//        {
//            polyValue += coef[n3] * pow(currValue, n3);
//        }
//        double polynomial = polyValue;
//
//        polyValue = 0;
//        int n4;
//        for (n4 = degree; n4 >= 1; n4--)
//        {
//            polyValue += coef[n4] * n4 * pow(currValue, n4 - 1);
//        }
//        double polyPrime = polyValue;
//
//        nextValue = currValue - (polynomial / polyPrime);
        iter += 1;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:46:41.053

`while`条件可能应该读作：

```
while (abs(nextValue - currValue) > 0.00000000001 && iter < 100000) 
```

注意

1.  末尾没有分号。
2.  整个条件必须在括号中。
3.  `and`替换为`&&`- 这不是绝对必要的，因为`and`据我所知在 C++ 中有效，但到目前为止我从未见过`and`在生产代码中使用过。

# c++ - `recv()` 会导致缓冲区溢出吗？

> ID：15187359
> 
> 赞同：5
> 
> 时间：2013-03-03T15:44:58.290
> 
> 标签：c++, c, sockets, buffer-overflow, recv

我正在向自己介绍 C/C++ 中的套接字编程，并且正在使用`send()`并`recv()`通过套接字在客户端和服务器程序之间交换数据`TCP`。

以下是我的代码的一些相关摘录：

**服务器.c**：

```
char recv_data[1024];

// Socket setup and so on ommited...

bytes_recieved = recv(connected, recv_data, 1024, 0);
recv_data[bytes_recieved] = '\0'; 
```

**客户端.c：**

```
char send_data[1024];

// Setup ommited...

send(connected, send_data, strlen(send_data), 0); 
```

它`recv()`本身是否提供任何防止缓冲区溢出的保护？例如，如果我将第三个参数更改`recv()`为高于所指向的缓冲区`recv_data`（例如 4000）的值 - 这会导致缓冲区溢出吗？（我实际上已经尝试过这样做，但似乎无法触发段错误）。

我实际上是在尝试创建一个故意易受攻击的服务器程序来更好地理解这些问题，这就是为什么我试图通过`recv()`.

**修正**：

并非不相关，将找出为什么上面会发送`client.c`超过. 我用来从标准输入填充该缓冲区，但如果我通过标准输入输入超过 1024 个字节，程序将显示它接收到所有字节！:)。for不限制发送的字节数吗？`1024``strlen(send_data)``gets(send_data)``server.c``strlen(send_data)``send()`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T15:46:52.667

> 例如，如果我将 recv() 的第三个参数更改为高于 recv_data 指向的缓冲区（例如 4000）的值 - 这会导致缓冲区溢出吗？

当然是的。如果网络缓冲区有 4000 字节的数据，则将其放入缓冲区。关键是，recv 像任何其他需要缓冲区的 C API 一样，它的长度认为调用者将传递缓冲区的实际长度，如果调用者传递了不正确的长度，那么错误在于调用者，它可能导致到未定义的行为。

在 C 中，当您将数组传递给函数时，被调用函数无法知道数组的大小。因此，所有 API 仅依赖于您提供的输入。

```
char recv_data[1024];

// Socket setup and so on ommited...

bytes_recieved = recv(connected, recv_data, 1024, 0);
recv_data[bytes_recieved] = '\0'; 
```

上面的代码可能会以多种方式引起麻烦。在以下情况下将导致未定义的行为：
(a) 如果 recv 返回`-1`，那么您直接索引到 recv_data 缓冲区而不检查返回值
(b) 如果 recv 返回`1024`，那么再次导致越界访问大小数组`1024`应该从`0`to访问`1023`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T15:45:45.637

这个

```
recv_data[bytes_recieved] = '\0'; 
```

如果接收到 1024 个字节，可能会导致缓冲区溢出。

你可能想改变这个

```
bytes_recieved = recv(connected, recv_data, 1024, 0); 
```

成为

```
bytes_recieved = recv(connected, recv_data, 1024 - 1, 0); 
```

所以它`bytes_recieved`永远不会大于 1023，这是`recv_data`.

* * *

您的系统调用 ( `recv()`/ `send()`) 也缺少错误检查。`-1`在以任何其他方式使用结果之前测试它们是否已返回。

* * *

参考您的修改：

`strlen()`尝试返回从其参数指向的字符开始直到第一个`NUL`/字符的字符数`0`。此数字可以是任何值，具体取决于**您**放置 terminating 的位置`0`。

如果这个`0`-terminator 的 seach 在分配给`strlen()`s 参数的内存后面运行，程序肯定会遇到未定义的行为，因此可以返回任何值。

所以回答你的问题：如果`send_data`不是**0**终止`strlen()`会使应用程序运行到未定义的行为，因此它可能会崩溃或`strlen()`返回大于 1024 的值，因此`send()`会尝试发送此数量的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:04:38.267

即使您发送比`recv()`缓冲区更大的字节，您仍然可以`recv()`在成功调用时发送它`recv()`，这就是为什么您说它`bytes_received`仍然是`5000`字节，因为假设您发送`5000`字节，而您的接收缓冲区是`1000`字节，在第一次调用时`recv()`它只会`1000`在下一次调用时`1000`再次获取字节，直到它接收到您的所有数据。所以，我认为这里没有缓冲区溢出。这就是 TCP 的工作方式。

# javascript - 服务器端 Javascript 是否已为主流做好准备？

> ID：15187360
> 
> 赞同：3
> 
> 时间：2013-03-03T15:45:01.520
> 
> 标签：javascript, node.js, meteor, server-side, derbyjs

我预计在几年内，服务器端编程环境会看起来非常不同，而 Javascript 将非常流行。这只是我个人的看法。

但是此时此地，Javascript 是服务器端语言的有效选择，还是各种 API 仍然太不成熟？IE。与其他语言的现有解决方案相比缺乏功能，并且变化太快以至于它们导致平台不稳定？那里的工具选项是否与 Java 等工具选项一起可用？

# jquery - Timeago jquery 插件在 IE 上不显示。我该如何解决？

> ID：15187365
> 
> 赞同：0
> 
> 时间：2013-03-03T15:45:34.750
> 
> 标签：jquery, internet-explorer, timeago

我使用 Tweetable 插件和 Timeago 插件在我的网站上显示推文。您可以在以下网址查看：[http](http://www.beautyworkssalon.com/products.html) ://www.beautyworkssalon.com/products.html （左侧栏的“关注我们”部分）。我想在推文下方“n 天前”。但是它只显示在 Firefox、Chrome 上。它不显示在 IE 上。

我在：[https](https://github.com/rmm5t/jquery-timeago/issues/35) ://github.com/rmm5t/jquery-timeago/issues/35 看到 。他们说这是IE的问题，而不是Timeago插件。

我该如何解决？

# javascript - 地理编码谷歌地图不起作用

> ID：15187368
> 
> 赞同：0
> 
> 时间：2013-03-03T15:45:46.403
> 
> 标签：javascript, html, google-maps-api-3

我的脚本有问题。我已经正确设置了所有内容，但是地理编码不起作用，当我以我创建的表格输入城市名称然后单击“地理编码器”时，什么也没有发生。这是我的代码：

**多变的 ：**

```
 var geocoder;
 var map;
 var markers = new Array();
 var i = 0; 
```

**地理编码脚本：**

```
<!-- GEOCODER --> 
  function codeAddress() {
var address = document.getElementById("address").value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
            document.getElementById('lat').value = results[0].geometry.location.lat();
            document.getElementById('lng').value = results[0].geometry.location.lng();
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map, 
        position: results[0].geometry.location
    });
            markers.push(marker);
            if(markers.length > 1)
                markers[(i-1)].setMap(null);
            i++;
  } else {
    alert("Le geocodage n\'a pu etre effectue pour la raison suivante: " + status);
  }
  <!-- GEOCODER --> 
```

**形式：**

```
 <div>
Adresse : <input id="address" type="text" value="paris">   
&nbsp; <input type="button" value="Geocoder" onsubmit="codeAddress()">
</div> 
```

完整代码（仅 html）：http: [//jsfiddle.net/hCmQb/](http://jsfiddle.net/hCmQb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:55:29.627

地理编码器未运行的原因是：

```
 <input type="button" value="Geocoder" onsubmit="codeAddress()"> 
```

你不想要“onsubmit”你想要“onclick”：

```
 <input type="button" value="Geocoder" onclick="codeAddress()"> 
```

您遇到的另一个问题是您的“地图”变量是初始化函数的本地变量。改变：

```
 var map = new google.maps.Map(document.getElementById('map_canvas'),
                                  mapOptions); 
```

至：

```
map = new google.maps.Map(document.getElementById('map_canvas'),
                                 mapOptions); 
```

[工作示例](http://www.geocodezip.com/v3_SO_GeocoderQuestion.html)

# c++ - 将编译错误消息添加到 SFINAE 宏

> ID：15187370
> 
> 赞同：1
> 
> 时间：2013-03-03T15:45:59.870
> 
> 标签：c++, c-preprocessor, metaprogramming, sfinae

我正在玩[SFINAE](https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)，但我试图在处理宏生成的代码时获取一些有意义的编译器错误信息。我使用[这个答案](https://stackoverflow.com/a/6324965/2081073)来运行以下内容：（我想用 member_test(a) 检查类型 A 是否有一些先前定义的成员）

```
//Check for member variable with given name.
#define CREATE_MEMBER_VAR_CHECK(var_name)                                   \
                                                                            \
template<typename T, typename = std::true_type>                             \
struct has_member_var_##var_name : std::false_type {};                      \
                                                                            \
template<typename T>                                                        \
struct has_member_var_##var_name<                                           \
    T                                                                       \
    , std::integral_constant<                                               \
        bool, std::is_member_object_pointer<decltype(&T::var_name)>::value  \
    >                                                                       \
> : std::true_type {};

#define MEMB_CHECK_WRAPPER(r, data,  elem) CREATE_MEMBER_VAR_CHECK(elem)

#define CREATE_ENABLE_IF_CLAUSE(var_name)                       \
  class = typename std::enable_if<has_member_var_##var_name<T>::value>::type

#define ENABLE_IF_CLAUSE_WRAPPER(r, data, i, elem)               \
            BOOST_PP_COMMA_IF(i) CREATE_ENABLE_IF_CLAUSE(elem)

#define TO_MEMBER_TEST(member_seq)                                               \
            BOOST_PP_SEQ_FOR_EACH(MEMB_CHECK_WRAPPER, _, member_seq)             \
                                                                                 \
            template < typename T,                                               \
                BOOST_PP_SEQ_FOR_EACH_I(ENABLE_IF_CLAUSE_WRAPPER, _, member_seq) \
            >                                                                    \
            void member_test(const T & )                                         \
            {                                                                    \
                std::cout << "works!!\n\n";                                      \
            } 
```

当我然后执行以下操作时，一切都会好起来的：

```
TO_MEMBER_TEST((x)(y)(z))

struct A { int x, y, z; };

int main(int argc, char const *argv[])
{
    A a;
    member_test(a);
} 
```

但是，当我`TO_MEMBER_TEST((x)(y)(z)(dummy))`改为使用时，代码将无法编译（按预期），因为 member_test(A&) 不再定义，因为 A.dummy 不存在。编译器会给我类似的东西：模板参数推导/替换失败：错误：'struct std::enable_if'中没有名为'type'的类型

我怎么能说“没有会员假人”之类的话。而是（例如使用static_asserts）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:31:15.520

嗯，当我真的想要一个带有 static_assert 的特定编译器错误时，实际上不需要 enable_if，所以我想出了这个解决方案：

```
//Check for member variable with given name.
#define CREATE_MEMBER_VAR_CHECK(var_name)                                   \
                                                                            \
template<typename T, typename = std::true_type>                             \
struct has_member_var_##var_name : std::false_type {};                      \
                                                                            \
template<typename T>                                                        \
struct has_member_var_##var_name<                                           \
    T                                                                       \
    , std::integral_constant<                                               \
        bool, std::is_member_object_pointer<decltype(&T::var_name)>::value  \
    >                                                                       \
> : std::true_type {};

#define MEMB_CHECK_WRAPPER(r, data,  elem) CREATE_MEMBER_VAR_CHECK(elem)

#define MEMBER_ERROR(type_name, var_name) \
    #var_name is not a member of #type_name

#define CHECK_HAS_MEMBER(type_name, var_name)                                   \
        static_assert(has_member_var_##var_name<type_name>::value,              \
                      BOOST_PP_STRINGIZE(MEMBER_ERROR(type_name, var_name)) );

#define CHECK_HAS_MEMBER_WRAPPER(r, data, elem) CHECK_HAS_MEMBER(data, elem)

#define TO_MEMBER_TEST(type, member_seq)                                        \
            BOOST_PP_SEQ_FOR_EACH(MEMB_CHECK_WRAPPER, _, member_seq)            \
            BOOST_PP_SEQ_FOR_EACH(CHECK_HAS_MEMBER_WRAPPER, type, member_seq)   \
                                                                                \
            template < typename type>                                           \
            void member_test(const type & )                                     \
            {                                                                   \
                std::cout << "works!!\n\n";                                     \
            }                                                                   

struct A { int x, y, z; };

TO_MEMBER_TEST(A,(x)(y)(z)(dummy)) 
```

将调用添加`CHECK_HAS_MEMBER()`到宏的末尾`CREATE_MEMBER_VAR_CHECK`会使它更加“可读”。

# iphone - 在视图之间切换后更改标签

> ID：15187374
> 
> 赞同：0
> 
> 时间：2013-03-03T15:46:41.053
> 
> 标签：iphone, objective-c, uiview, timer

我有适用于 iPhone 的两个视图应用程序。在第一个中，我使用 NSTimer 调用每秒执行此操作的代码：

1.  更新变量
2.  发出声音
3.  更新标签
4.  更新图像位置

当我启动应用程序时 - 一切都很完美。当我转到其他视图然后返回第一个屏幕时 - 1 和 2 工作正常，但 3 和 4 重置并且根本不起作用。

可能是什么问题呢？

看起来它失去了元素的“钩子”......

```
-(void)countup {
DeccelFloat += 0.4;
SpeedFloat += 5/(DeccelFloat);
SpeedInt = lroundf(SpeedFloat);
speed.text = [NSString stringWithFormat:@"%i", SpeedInt];
imageview.center = CGPointMake(imageview.center.x, imageview.center.y+3);
if (imageview.center.y < 280)  {
    imageview.alpha = 1;
    if (SpeedFloat > MaxSpeedValue) {
        [self playalarm];
    }else{
        [self playbeep]; 
    }
}
if ((imageview.center.y >= 280) && (imageview.center.y < 283))   {
    if (SpeedFloat > MaxSpeedValue) {
        [self playshot];
    }else{
        [self playbeepbeep];
    }
}
if ((imageview.center.y >= 280) && (imageview.center.y < 350))  {
    imageview.alpha = 0.5-(0.5/70)*(imageview.center.y - 280);
}
if (imageview.center.y >= 350)  {
    imageview.alpha = 0;
    imageview.center = CGPointMake(imageview.center.x, 180);
}
} 
```

这是我的计时器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    MaxSpeedValue = 60;

    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

    NSNumber *maxspeedsetttings = nil;
    NSNumber *blinkingsetttings = nil;
    NSNumber *startedsetttings = nil;
    if (standardUserDefaults) {
        maxspeedsetttings = [standardUserDefaults objectForKey:@"maxspeedsetttings"];
        blinkingsetttings = [standardUserDefaults objectForKey:@"blinkingsetttings"];
        startedsetttings = [standardUserDefaults objectForKey:@"startedsetttings"];
    }

    MaxSpeedDef = [maxspeedsetttings intValue];
    if (MaxSpeedDef == 1) {
        maxspeed.text = [NSString stringWithFormat:@"%i", MaxSpeedValue];

    }else{
        maxspeed.alpha = 0;
        maxspeedlabel.alpha = 0;
    }

        imageview.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed:@"0.png"],
                                 [UIImage imageNamed:@"5.png"],
                                 [UIImage imageNamed:@"10.png"],
                                 nil];
        imageview.animationDuration = 1;
        imageview.animationRepeatCount = 0;

        BlinkingDef = [blinkingsetttings intValue];  
        if (BlinkingDef == 1) {
            [imageview startAnimating];
        }else{
            [imageview stopAnimating];
        }
        [self.view addSubview:imageview];

    StartedDef = [startedsetttings intValue];
    if (StartedDef == 0) {
        SpeedFloat = 0;
        DeccelFloat = 0;
        timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countup) userInfo:nil repeats:YES];

        StartedDef = 1;
        if (standardUserDefaults) {
            [standardUserDefaults setObject:[NSNumber numberWithInt:StartedDef] forKey:@"startedsetttings"];
            [standardUserDefaults synchronize];
        }
    }

} 
```

# python - nginx + uwsgi 独立脚本

> ID：15187379
> 
> 赞同：0
> 
> 时间：2013-03-03T15:47:02.287
> 
> 标签：python, nginx, cgi, wsgi, uwsgi

我决定使用`uWSGI`在我的网站上运行 Python。我想允许执行独立的 Python 脚本，例如[http://domain.com/signup.py](http://domain.com/signup.py)左右。有没有可能的方法来做到这一点？我仔细搜索了解决方案，但仍然没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:27:32.697

您要完成的是运行 CGI 脚本。所以你必须使用 uWSGI cgi 插件：[https ://uwsgi-docs.readthedocs.org/en/latest/CGI.html](https://uwsgi-docs.readthedocs.org/en/latest/CGI.html)

这是一个与python无关的通用插件。

# extjs - 带网格的 Sencha Touch 应用程序

> ID：15187382
> 
> 赞同：2
> 
> 时间：2013-03-03T15:47:25.680
> 
> 标签：extjs, extjs4, sencha-touch-2

我一直在使用 ExtJS 一段时间，并使用它构建了一个应用程序，该应用程序以 JSON 格式获取数据并将其以网格的形式呈现给用户。我想在移动设备上复制这个应用程序。我查看了 Sencha Touch 的示例，但我找不到网格的示例。

我想使用 Sencha Touch构建一个带有分组标题的网格 - 类似[这样的东西。](http://docs.sencha.com/ext-js/4-1/#!/example/grid/group-header-grid.html)

我还查看了 Sencha Touch 组件的[文档](http://cdn.sencha.io/touch/sencha-touch-2.1.0/docs/#!/guide)，但找不到任何东西。

请让我知道我必须使用 Sencha Touch 构建网格的选项。是否可以使用 Sencha Touch 创建具有多个标题的网格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:53:26.497

如果您有 Sencha Touch 的商业许可证（并且预算不多），您可以查看由 Bryntum 开发的[UberGrid](http://www.bryntum.com/products/ubergrid/)组件。但不幸的是，该许可证与 Sencha Touch GPL 不兼容 - 详细信息可以在[Bryntum 常见问题解答](http://www.bryntum.com/store/ubergrid/#faq)中找到，包括有关慈善/教育应用程序折扣的信息。

除此之外，您必须找到社区扩展或构建自己的，因为 Sencha Touch 不包含任何内置的网格组件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-14T00:59:45.207

我意识到这个问题很老了。但从那时起，Sencha 似乎已经发布了一个网格（尽管是付费版本）。

# java - 如何在 Java 中调用 WSDL URL 上的 Web 服务？

> ID：15187385
> 
> 赞同：3
> 
> 时间：2013-03-03T15:47:53.877
> 
> 标签：java, web-services, soap, wsdl, playframework-2.0

我需要在我正在构建的 Java Web 应用程序中调用一些 Web 服务方法。

例如，每次用户注册时，我都想`newUser`通过 Java 调用 WSDL url 上的方法。我需要在请求中传递一些参数。

是否有任何内置的 Java 类或任何公开可用的类可以使这变得容易，即我只提供 URL 和参数，它执行请求并返回响应？

如果不是，那么在 Java 应用程序中调用 WSDL 上的 Web 服务的标准方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T16:14:32.817

在已部署的 WSDL URL 上运行 wsimport，您可以从 JDK 运行它：

```
wsimport -p client -keep http://localhost:8080/calculator?wsdl 
```

这一步将生成并编译一些类。注意 -keep 开关，你需要它来保存生成的 Java 源文件。

Calculator.java - 服务端点接口或 SEI
CalculatorService - 生成的服务，实例化它

```
public class MyClientServiceImpl {
    public static void main(String args[]){

    @Override
    public Integer add(int a , int b) {
       CalculatorService service = new CalculatorService();
       Calculator calculatorProxy = service.getCalculatorPort();            
        /**
         * Invoke the remote method
         */
        int result = calculatorProxy.add(10, 20);
        System.out.println("Sum of 10+20 = "+result);
    }
} 
```

如果您使用的是 Java EE 6 支持的容器，那么您可以通过这种方式使用它，

```
public class MyClientServiceImpl implements MyClientService {

    @WebServiceRef(wsdlLocation = "http://localhost:8080/calculator?wsdl", 
value = CalculatorService.class)
    private Calculator service;

    @Override
    public Integer add(int a , int b) {
        return service.add(a,b);
    }
} 
```

# magento - 插入未显示在 Magento 订单电子邮件中

> ID：15187390
> 
> 赞同：1
> 
> 时间：2013-03-03T15:48:02.177
> 
> 标签：magento

当注册客户（例如“Armin van Buuren”）下订单时，他会收到一封包含“Hello Armin Buuren”的电子邮件。那应该是“Hello Armin van Buuren”。奇怪的是，当他以未注册用户的身份订购东西时，他没有创建帐户，电子邮件中的名称正确显示为“Hello Armin van Buuren”。

在注册用户的 order_new.html 中，生成的名称是：

```
Hello, {{htmlescape var=$order.getCustomerName()}} 
```

在未注册客户的 order_new_guest.html 中，生成的名称是：

```
Hello, {{htmlescape var=$order.getBillingAddress().getName()}} 
```

已经尝试使用来宾 html，但无法正确显示名称。它显示带有前缀的名称，但这是不正确的。它应该像“你好，[NAME] [INSERT] [SURNAME]”。也在互联网上搜索过这个，但似乎我是唯一一个有这个问题的人？

如果您知道可能的解决方案，或者我应该做什么或尝试什么，请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:47:42.703

我编辑了 Magento 设置以不显示中间的初始表单，然后编辑每个客户以将插入插入姓氏。我认为这是最好的选择。

谢谢你们的帮助！

# emacs - 如何在 Mac OS 上更新 Clojure Leiningen Emacs 工具链

> ID：15187397
> 
> 赞同：1
> 
> 时间：2013-03-03T15:49:04.600
> 
> 标签：emacs, clojure, leiningen

我有一个在 Mac OSX 10.8 上工作的 Clojure-1.4.0 / emacs24 / leiningen-2.0 工具链。按照以下 URL 的说明，我很快就完成了：

```
http://clojure.org/getting_started
https://github.com/technomancy/leiningen
http://clojure-doc.org/articles/tutorials/emacs.html 
```

我检查它是否有效的一种方法是我转到项目目录并输入

```
lein test 
```

它运行我的项目目录中的所有单元测试。我也可以`C-c ,`在 emacs 中以 clojure-mode 执行此操作，并且它执行相同的操作。伟大的！现在的问题是：所有这些都运行我在其中的 clojure 安装`~/clojure-1.4.0`，我通过输入看到

```
lein repl 
```

在项目目录中。我现在有一个新安装的 clojure `~/clojure-1.5.0`，我想让 leiningen 和 emacs 指向那个新版本。但是，在设置 leiningen 和 emacs 模式的过程中，我从来没有手动告诉他们在哪里可以找到 clojure 版本。他们发现这神奇而又不透明——事实上，整个过程非常神奇，而且在当时很棒。我想我可以把所有东西都拆掉，然后从头开始重新构建，但这似乎非常低效。我还可以将 1.4 目录中的文件替换为 1.5 目录中的文件。这可能会奏效一次，但它显然是错误的，我真的不想考虑它。我需要以正确的方式执行此操作，以便在下一个版本更新到来时，我可以使工具链尽可能顺利地运行。

我只是从这一切开始，所以我还远远没有掌握这些工具中的任何一个，我会很感激菜鸟级别的建议来保持这一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:15:18.737

`./project.clj`只需在项目目录中更改 clojure 版本：

```
:dependencies [... [org.clojure/clojure "1.5.0"] ...] 
```

测试：

```
$ lein repl

user=> *clojure-version*
{:major 1, :minor 5, :incremental 0, :qualifier nil} 
```

**编辑：**

> 他们神奇而又不透明地发现

默认的 clojure 版本内置在 lein 的`project.clj`模板中，`<name>/project.clj`当您这样做时，它会呈现到您的文件中`lein new <name>`。

# asp.net - 如何从 HttpResponseMessage 中获取对象？

> ID：15187398
> 
> 赞同：8
> 
> 时间：2013-03-03T15:49:24.937
> 
> 标签：asp.net, .net, asp.net-mvc

我有一个返回的 Post 方法`HttpResponseMessage`：

```
HttpResponseMessage response = 
    Request.CreateResponse(HttpStatusCode.Created, updatedItemDto); 
```

我正在为此编写一些测试，并希望从`HttpResponseMessage`（特别是`ItemId`）获取更新的项目。`Response.Content`我尝试检查对象，看起来对象存在于`Content`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-19T08:32:07.397

如果 HttpResponseMessage 包含已知类的序列化数据模型，那么您可以使用`ReadAsAsync<>()`这样的扩展方法

```
 MyObject obj = await response.ReadAsAsync<MyObject>(); 
```

这是最简单最容易的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T18:03:27.170

您可以在调试器中检查响应，因为您提到“它看起来像对象存在于 Response.Content 中”。

您可能需要将其转换为有意义的内容，例如在[此响应](https://stackoverflow.com/a/12564716/1250033)中，

```
Request.CreateResponse(HttpStatusCode.Created, updatedItemDto) as MyObject; 
```

# ruby-on-rails - 无法批量分配受保护的属性 HABTM 记录

> ID：15187399
> 
> 赞同：1
> 
> 时间：2013-03-03T15:49:30.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1, ruby-on-rails-3.2

我尝试创建一个 HBTM 关联并在创建订单时创建记录，如下所示：

订单控制器：

```
 def create
    @order = Order.create(params[:order])

    @order.adresses.new(:order_id => params[:id],:adress_id => params[:adress_id])
    if @order.save
      redirect_to orders_path,:notice => "Compra criada com sucesso !"
    else
      redirect_to orders_path,:notice => "Compra nao criada com sucesso cheque os erros e tente novamente !"
    end
  end 
```

在我的订单模型和我的地址模型中：

```
order.rb
  has_and_belongs_to_many :adresses
adress.rb
  has_and_belongs_to_many :orders 
```

对，但我创建了一个模型并收到此错误：

```
Can't mass-assign protected attributes: adress_id, order_id 
```

所以我创建了模型 adresses_orders.rb ：

```
 attr_accessible :order_id,:adress_id 
```

但错误连续我不明白，因为什么

```
Can't mass-assign protected attributes: adress_id, order_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:28:14.183

添加`attr_accessible :order_id,:adress_id`在 adress.rb 不是在 adresses_orders.rb

并且不需要定义adress_orders.rb，如果可能的话删除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:02:05.787

HABTM 之间不需要额外的模型 (adresses_orders)。一张桌子就够了。

```
@order.address.new 
```

应该足够了。联想很聪明，可以为你填写地址id和订单id。

# ember.js - Ember：动态 URL 中未保存的模型

> ID：15187401
> 
> 赞同：1
> 
> 时间：2013-03-03T15:49:38.470
> 
> 标签：ember.js, url-routing, ember-data

我目前在我的 Ember 应用程序中使用 FixtureAdapter，但是当我切换到 RESTAdapter 时，我的 URL 不再有效。

该应用程序是记分类型的东西，我希望用户能够记录所有分数而无需连接到网络。游戏结束后，他们可以选择将所有数据保存到服务器。

现在，当 Ember 想要路由到 match/:match_id 时，ID 不存在，因为我没有向服务器/存储提交任何内容，所以我的模型还没有 ID，我得到的 URL 如下： /match/null/游戏/null

这是预期的行为吗？如果是这样，是否有解决方法？我考虑过使用model.clientId，然后为每个路由覆盖模型钩子，以尝试在存在时使用id从商店中获取模型并回退到clientId。还有其他想法吗？

**2013 年 3 月 10 日更新：**

以下似乎符合我的需求，并且允许（暂时）忘记在本地存储和 REST 适配器之间来回移动：

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.extend({
    namespace: 'api/v1',
    bulkCommit: true,
    generateIdForRecord: function(store, record) {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
        return v.toString(16);
      });
    }
  })
}); 
```

UUID 函数取自：[在 JavaScript 中创建 GUID/UUID？](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:41:02.237

如果一条记录还没有提交，那么它应该还`id`没有。此外，序列化查看该记录的应用程序状态的 url 没有任何意义，因为该记录在提交之前不会存在于另一个浏览器中。您不能只是将 url 粘贴到其他地方，然后将其加载到您离开的地方。

我认为您真正想要做的是在未提交记录时以不同的方式序列化应用程序状态（即生成不太具体的 url）。您可以通过覆盖`serialize`路由中的方法来实现此目的。

例如，

```
App.PostRoute = Ember.Route.extend({
    serialize: function(model, params) {
        if (model && model.get('isNew')) {
            // corresponds to path '/post/:post_id'
            return { post_id: 'new'}
        }

        return this._super(model, params);
    }
}); 
```

现在，如果您`transitionToRoute('post', post)`从控制器调用，`post`新创建但未提交的记录在哪里，应用程序状态将被序列化到路径`/post/new`。如果你将一个已提交的记录传递给它`id`，它将像往常一样被序列化。

# ruby-on-rails - 即使存在路由，路由错误

> ID：15187405
> 
> 赞同：0
> 
> 时间：2013-03-03T15:50:03.850
> 
> 标签：ruby-on-rails, routing, link-to

这真的很奇怪。我在每个页面上都存在的 link_to 上遇到路由错误

这是我的路线

```
resources :users do
    member do
      get :creations_tab, :path => '/creations'
    end 
```

这转化为

```
creations_tab_user_path  GET     /users/:id/creations(.:format)  users#creations_tab 
```

这是错误发生的地方

```
 <li><%= link_to content_tag(:i," ", :class=>"icon-bullhorn")+ " " +"Creations", creations_tab_user_path %></li> 
```

奇怪的部分是这个link_to是每个页面上都存在的导航栏中的链接..有些页面可以工作，有些页面不能......

这是错误

```
ActionController::RoutingError - No route matches {:action=>"creations_tab", :controller=>"users"}:
  (gem) actionpack-3.2.12/lib/action_controller/metal/exceptions.rb:11:in `initialize'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:533:in `raise_routing_error'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:529:in `rescue in generate'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:521:in `generate'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:562:in `generate'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:587:in `url_for'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/url_for.rb:148:in `url_for'
  (gem) actionpack-3.2.12/lib/action_view/helpers/url_helper.rb:107:in `url_for'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:213:in `creations_tab_user_path'
  app/views/layouts/_header.html.erb:43:in `_app_views_layouts__header_html_erb__541622111_70332144' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:56:14.147

由于您的路线是成员路线，因此预计会提供用户 ID。因此，正如您所做的那样，在没有参数的情况下调用助手是没有意义的。

我怀疑在某些情况下某种 RoR 魔法正在为帮助者提供论据——但实际上它不应该起作用。

所以给那个助手一个用户或用户ID。

# svg - svg：如何在计算线上设置一个圆圈？

> ID：15187417
> 
> 赞同：3
> 
> 时间：2013-03-03T15:50:52.303
> 
> 标签：svg, d3.js, line, geometry

我正在尝试使用 svg 在计算线上设置一个圆圈。

这是我的例子：http: [//jsfiddle.net/7XC9j/](http://jsfiddle.net/7XC9j/)

html:

```
<svg width="300" height="500">
  <g id="g-1"></g>
</svg> 
```

javascript:

```
var line = d3.svg.line()
  .x(function(d) { return d.x; })
  .y(function(d) { return d.y; })
  .interpolate("cardinal")
  .tension(0);

 var points = [{x: 0, y: 200}, {x: 25, y: 180}, {x: 50, y: 150}, {x: 100, y: 145}, {x: 200, y: 130}, {x: 300, y: 120}, {x: 500, y: 25}];

 d3.select("#g-1").append("path").attr("d", line(points)); 
```

现在我尝试设置圆（取决于 X 到线），但是我寻找一些函数，比如`line(myX).x`绘制圆：

```
 d3.select("#g-1").append("svg:circle")
    .attr("cx", myX)
    .attr("cy", line(myX).x)
    .attr("r", 4.5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:52:40.903

你可以这样做`path.getPointAtLength(i)`

见 [http://jsfiddle.net/GQ8WJ/](http://jsfiddle.net/GQ8WJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:14:28.087

这是添加使用`points`数组中第 4 个对象的圆的一种方法。

在这里工作小提琴：http:
[//jsfiddle.net/3RumJ/](http://jsfiddle.net/3RumJ/)

**JavaScript**

```
d3.select("#g-1")
    .append("circle")
    .attr("cx", points[3].x )
    .attr("cy", points[3].y )
    .attr("r", 4.5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T19:06:40.587

我认为这将是解决方案：http: [//jsfiddle.net/amgq3/](http://jsfiddle.net/amgq3/) 在这个例子中，我`x`从 0 到 500 并使用函数`line`来获取所需`y`

# html - 变形锚点上的不可点击区域

> ID：15187419
> 
> 赞同：2
> 
> 时间：2013-03-03T15:50:57.637
> 
> 标签：html, css, transform

这是我的小提琴：http: [//jsfiddle.net/olexander/7hB8C/](http://jsfiddle.net/olexander/7hB8C/)

我有一个锚，其样式为按钮（样式已简化以显示问题）。

HTML：

```
<a href="javascript:void(0)" class="button demo">Button</a> 
```

CSS：

```
.button {
    border: none;
    outline: none;    
    text-decoration: none;
    display: inline-block;
}

.button:active {
    transform: scale(0.8, 0.8);
    -webkit-transform: scale(0.8, 0.8);
    -moz-transform: scale(0.8, 0.8);
    -o-transform: scale(0.8, 0.8);
    -ms-transform: scale(0.8, 0.8);
}

.demo {
    padding: 40px;
    margin: 20px;
    font-size: 5em;
    color: black;
    background-color: lightgray;
} 
```

问题是链接按钮内有一个不可点击的区域。我可以解释一下，锚内部有一个文本节点，当 mousedown 到文本节点时，经过变换，mouseup 到文本节点之外。这就是为什么不处理鼠标点击的原因。

如果我们选择锚点内的文本节点，它可以像这样可视化（在 mousedown 之前和之后）： ![单击文本节点的边框不会触发单击事件](../Images/0fb2eb30afe11f10730c9a9486a0fb39.png)

我想注意到，这个问题至少在 Chrome、Opera 和 Safari 中重现，即使我放置了指向 href 标记的链接而不是处理点击事件。它也与 一起复制`<button>`，而不是 的问题`<input type="button">`，因为第一个使用内容，第二个使用值。

是否有人对避免或解决此行为的更好方法有想法？提前致谢！

**更新：**

我找到了一个使用拉伸“存根”`<span>`覆盖可点击区域的解决方案：

```
<a href="javascript:void(0)" class="button"><span class="stub"></span>Button</a> 
```

和存根样式：

```
.button > span.stub {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
} 
```

这个版本在这里发布：http: [//jsfiddle.net/olexander/7hB8C/20/](http://jsfiddle.net/olexander/7hB8C/20/)

存根可以通过 javascript 动态添加，但思路保持不变。由于内联 span 元素可以嵌套在锚点和按钮中，因此它不会违反 W3C HTML5/XHTML5 规则。

Aequanox 使解决方案变得完美！看看下面的答案。

整个故事发布在这里：[动画锚和按钮与 css3](http://ivanitskyi.blogspot.com/2013/03/animated-anchor-and-button-with-css3.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:31:54.100

似乎`:active`过渡正在取代点击事件。我认为这是一个浏览器错误。

在这里，我已更改`:active`为类名`.active`，并且 apply 在您的事件处理程序中：

```
$('#linkbutton').click(function(){
    $(this).addClass('active');    
    $(this).delay(200).queue(function() { $(this).removeClass('active');})
    $('#logContainer').append('<span>clicked </span>');    
}); 
```

出于某种原因，直到我将 .button 更改为：

```
display: inline-block; 
```

到：

```
float: left; 
```

去想......它现在可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:42:47.623

您可以通过在 css 中插入它来避免插入标签，从而维护标记清洁器：

```
.button:before{
    content:'';
    position:absolute;
    top:0; left:0; right:0; bottom:0;
 } 
```

文本将无法选择

# c# - C# 引用类值

> ID：15187421
> 
> 赞同：-2
> 
> 时间：2013-03-03T15:50:59.370
> 
> 标签：c#, pointers, reference

我的问题是，我创建了一个“A 类”来更新和处理值。'Class B'是在'Class A'中创建的，只需要读取Class A的值。

现在我可以将 A 类的值创建为：

```
public static int AInt { get { return aInt; } }
static int aInt; 
```

并在 B 中以 A.AInt 的身份访问它们。

但是我可以使用指针，但这似乎非常反 c#。

```
public class A
{
    int aInt;

    unsafe public A()
    {
        fixed(int *aPtr = &aInt)
        B b = new B(aPtr);
    }

    // Changes aInt
}

unsafe public class B
{
    int *bInt;

    public B(int *a)
    {
        bInt = a;
    }

    // Does stuff according to bInt value changes
} 
```

对于将一个类的值提供给另一个类而不显式调用值的更新方法的更好方法，我有点困惑。我觉得第一个例子是它应该如何完成，但我来自 c++ 背景，所以指针对我来说是常态。

在 c# 中做指针似乎太混乱了，因为您必须更改编译标志并且必须使用 fixed() 更改任何变量并将方法/类标记为不安全。

感谢您提供任何指导/提示以获得更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T15:56:53.920

您应该传递对整个`A`对象的引用，而不是该对象中的某些属性：

```
public class A
{
    public int aInt;

    public A()
    {
        B b = new B(this);
    }

    // Changes aInt
}

public class B
{
    A _a;

    public B(A a)
    {
        _a = a;
    }

    // can use _a.aInt here
} 
```

或者在其中创建一个事件`A`并订阅该事件`B`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:57:05.887

正如您所注意到的，有很多方法可以做到这一点。如果`aInt`仍然是一个静态变量（阅读：我的意思是它不会改变，而不是静态类型），那么你可以通过构造函数或属性将它传递给 B，或者你可以将整个对象传递给 B。

```
B b = new B(this.aInt); //this is A 
```

或者

```
B b = new B(this); //this is A 
```

如果您希望 aInt 发生变化并且 B 得到通知，那么您可以在 A 中创建一个事件并在 B 中订阅它。

如果您希望 aInt 有所不同，但您会让 B 从 A 中轮询 aInt，您可以将 Func 委托传递给 B 并让该 Func 返回 aInt 给您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T16:04:41.037

不确定你想在 B 类中做什么，但最终一个简单的扩展类就足够了：

```
public class A
{
    int aInt;

    public A()
    {
        aInt = 1;
        aInt = aInt.DoSomething();
        // aInt is now 6
    }
}

public static class Extension
{
    public static int DoSomething (this int value)
    {
        return value += 5;
    }
} 
```

# git - 如何在单个 Git 分支中保留文件的多个副本？

> ID：15187424
> 
> 赞同：1
> 
> 时间：2013-03-03T15:51:11.197
> 
> 标签：git, version-control, branch, git-branch

我在我的 repo 的两个位置有一个配置文件，在我的应用程序中用于两个稍微不同的目的。文件的两个副本总是会略有不同。但是，当我想对其中一个进行更改时，我通常希望将其中的大部分更改也应用于另一个。

理想情况下，我希望这两个文件在它们自己的存储库中表现得好像这两个文件是彼此的分支，但我不想只为这个配置文件创建一个子模块。

Git 中是否有内置的东西来支持这种情况？还是我只需要使用合并工具并手动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:16:42.603

恕我直言，最好更改您的应用程序，以便它可以处理两个配置文件。然后将共同的东西放在两个实例都使用的文件中，并将差异放在特定于应用程序实例的文件中。

或者手工做;-)

# php - 携带 POST 数据到另一个页面

> ID：15187426
> 
> 赞同：0
> 
> 时间：2013-03-03T15:51:17.397
> 
> 标签：php, forms, paypal, http-post

我有一个 php 表单，目前将数据发布到 Paypal 购物车，但我想将数据发布到一个新的 php 页面，几乎就像一个确认页面，显示您选择的选项和选择，供您使用可以发送到贝宝？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T20:48:22.090

会话或帖子的新手可能会发现此示例很有帮助。您想要的完整示例。如何将 post 数组存储和查看到名为 POSTDATA.post 的会话中，或者任何其他变量都可以从任何页面访问，如果它存储在会话变量中的话。

**表单.php**

```
<?php
//PHP content of form.php file
session_start();
if ($_POST)
{
    $_SESSION['POSTDATA']=$_POST;
}
?>
<html>
<head></head>
<body>
  <form action="form.php" method="post">
    <input type="text" name="hello"/>
    <input type="submit" name="submit" value="submit"/>
  </form>
  <!--<a href="anotherpage.php">link to some another page for testing</a>-->
</body>
</html> 
```

**另一个页面.php**

```
<?php
session_start();
echo "This is some another page somewhere inside.ANOTHER PAGE SAYS";
echo '<pre>';
print_r($_SESSION['POSTDATA']);
echo '<pre>';
echo "INPUT BOX VALUE ".$_SESSION['POSTDATA']['hello'].'<br/>';
echo "SUBMIT BUTTON VALUE ".$_SESSION['POSTDATA']['submit'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:57:07.800

一种可能性是将发布数据存储在 $_session['post'] = $_POST 以保持存储并使用 $_session['post']['field'] 在新页面上获取发布的数据

# ruby - `each` 方法是否改变了它的行为？

> ID：15187427
> 
> 赞同：2
> 
> 时间：2013-03-03T15:51:25.160
> 
> 标签：ruby

一个关于多维数组的 Ruby 练习说，`each`访问多维数组的内部元素需要两个方法实例。以下：

```
x = [[1,2],[3,4],[5,6]]
x.each do |a|
  a.each do |b|
    puts b
  end
end 
```

应该返回：

```
# 1
# 2
# 3
# 4
# 5
# 6 
```

但是，没有必要使用两种`each`方法。如果我只是这样做

```
x.each { |a| puts a } 
```

我得到相同的结果。似乎`each`已经有一个实例进入了多维数组的内部级别。

在那种情况下，我将如何访问第一级？换句话说，我将如何获得以下内容？

```
# [1,2]
# [3,4]
# [5,6] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T15:54:01.973

Ruby 中有三种不同的打印函数。让我们在 Ruby 提示符下试一试：

```
> puts [1,2]
1
2
=> nil

> p [1,2]
[1, 2]
=> [1, 2]

> print [1,2]
[1, 2]=> nil 
```

如果你不熟悉`irb`，胖箭头后面的表达式`=>`就是语句的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T15:55:37.160

此外，如果你只是

```
puts x 
```

你会得到完全相同的结果。这是因为`puts`以特殊方式处理数组。它枚举所有元素并单独调用`puts`它们。（正如你想象的那样，这是递归的）。

这将大致获得您想要的输出：

```
x.each {|a| p a} 
```

或者

```
x.each {|a| puts a.inspect } 
```

输出

```
# >> [1, 2]
# >> [3, 4]
# >> [5, 6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:54:45.380

```
x.each { |a| puts a } 
```

这将对 x 数组的每个元素调用 puts。

这和做的一样：

```
puts [1,2]
puts [3,4]
puts [5,6] 
```

puts on an array 会像你看到的那样格式化它。

# php - Ajax 自动建议不按顺序显示字母。

> ID：15187431
> 
> 赞同：1
> 
> 时间：2013-03-03T15:51:44.473
> 
> 标签：php, javascript, ajax, arrays

我正在使用 javascript 制作一个小脚本，以便在我输入时从数组中查找/显示文本。有点像，谷歌自动建议工具。

*这是Js脚本：*

```
<script>
$(function() {
    var availableTags = <?php echo json_encode( $foo ); ?>;
     $( "#tags" ).autocomplete({ source: availableTags });
});
</script> 
```

*和 PHP 中的数组*

```
 <?php 
        $foo = array("ambiguious","brown",
        "corps","demanding job","eat the pomes","fooling with it");
    ?> 
```

请注意数组中的每个单词的首字母与其余单词的首字母不同，即。？很好，现在当我输入**a**而不是显示带有 a 的单词（在本例中为“歧义”）时，它会显示所有包含 a 的单词。

![在此处输入图像描述](../Images/91dc3e5bde019c973f8028b604494583.png)

我想过`strpos()`要搜索类似的词，但它不起作用。任何想法都会很好。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:00:15.503

看看API：

[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

**示例：使用自定义源回调仅匹配术语的开头**

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>autocomplete demo</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css">
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
</head>
<body>

<label for="autocomplete">Select a programming language: </label>
<input id="autocomplete">

<script>
var tags = [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" ];
$( "#autocomplete" ).autocomplete({
  source: function( request, response ) {
          var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
          response( $.grep( tags, function( item ){
              return matcher.test( item );
          }) );
      }
});
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:43:48.353

参考我的**[LIVE DEMO](http://jsfiddle.net/SivaCharan/KVEmV/2/)**

## HTML：

```
List: <input id="myContent" /> 
```

## 查询：

```
var myTags = ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"];
$( "#myContent" ).autocomplete({
    source: function( request, response ) {
        var matches = $.map(myTags, function(tag) {
            if (tag.toUpperCase().indexOf(request.term.toUpperCase()) === 0) {
                return tag;
            }
        });
        response(matches);
    }
}); 
```

# sharpdx - SharpDX，找不到函数

> ID：15187433
> 
> 赞同：0
> 
> 时间：2013-03-03T15:52:14.520
> 
> 标签：sharpdx

我正在尝试使用 CreateRenderTargetView 函数，因为我正在将 C++ DirectX 转录到 C#。我正在使用 D3D11。我可以使用 CreateRenderTargetView 的替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T00:48:05.137

SharpDX的总体思路是将所有xxx.CreateYYY(...)移到new YYY(xxx, ...)的构造函数中，所以CreateRenderTargetView在“ [new RenderTargetView](http://sharpdx.org/documentation/api/m-sharpdx-direct3d11-rendertargetview--ctor-2) ”

# android - 如何在没有互联网连接的情况下在 android 中获取当前的确切位置？

> ID：15187434
> 
> 赞同：6
> 
> 时间：2013-03-03T15:52:15.233
> 
> 标签：android, android-location

我想在android中获取当前的确切位置坐标。如果手机连接到 Wifi 互联网连接，我可以获取位置，但在其他情况下，当我去其他地方并且没有可用的互联网连接时，它不会提供当前位置坐标。而是给出最后一个位置坐标。

例如：

目前我在 A 城市并通过 wifi 连接获取当前坐标并移动到城市 B 然后我无法获取当前坐标。取而代之的是，它给出了最后的位置坐标。

谁能建议我如何在没有互联网连接的情况下获得当前位置。

```
public Location getLocation() {
    try {
        locationManager = (LocationManager) context.getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            // First get location from Network Provider
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                if (locationManager != null) {
                    location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }

            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    if (locationManager != null) {
                        location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GetLocations.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }
    return longitude;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:42:49.360

您显示的代码只是`getLocation`您的类的方法。大概你的班级也实现了`LocationListener`，对吗？（假设它没有看到它，因为您将“this”分配`requestLocationUpdates`为侦听器。）

您展示的方法只会返回 LAST KNOWN 位置，因为通过提供者的位置更新是**异步**的。您表明您希望通过注册侦听器来获取位置信息，并且该**侦听**器会定期更新（基于您为其提供的设置，并基于实际的设备功能和环境）。注册后您不会立即取回该位置。

对于您的问题，在未连接到网络时获取位置信息，您需要使用 GPS 提供程序（它在未连接到数据网络时工作）。一旦你注册了一个 GPS 提供者监听器（就像你已经拥有的那样），你将通过监听器中的回调获得位置更新，`onLocationChanged(Location location)`.

你的`onLocationChanged`回调是做什么的？

在您注册 GPS 提供商后，您将在几秒到几分钟内获得更新的位置信息（多长时间取决于您使用的设备中的硬件和环境条件，GPS 使用多个卫星并且工作速度更快，清晰天空视图，如果您在室内或信号受阻，它可能根本无法工作）。

除了等待侦听器为您提供更新的位置信息之外，您可能还需要考虑使用一些更简单、独立的方法来获取最后一个已知位置并注册最佳提供商。您可以使用一些简单的循环和`Criteria`您感兴趣的循环（COARSE 与 FINE、LOW_POWER 与否等）。

Android 开发人员在文档、“Protips for Location”开源示例应用程序和“Deep Dive”博客文章（其中包含指向所有其他资源的链接）中已经很好地记录了这一点：[http://android -developers.blogspot.com/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-04T09:12:21.877

没有 Internet 和 GPS，您可以获得基于 GSM（蜂窝网络）的位置。

NETWORK_PROVIDER 将在可用的 GSM 或 wifi 上解析。显然，在关闭 wifi 的情况下，将使用 GSM。但是，蜂窝网络精度可能从 500m 到 2000M 不等。

# asp.net - 在 windows server 2008 上配置 SMTP 服务器以从 Web 应用程序发送电子邮件

> ID：15187435
> 
> 赞同：1
> 
> 时间：2013-03-03T15:52:21.880
> 
> 标签：asp.net, email, configuration, smtp

我在 Windows 2008 服务器上运行的 ASP.NET 4.0 下用 C# 编写了这个 Web 应用程序。我想从 username@mydomain.com 向用户发送电子邮件，但我不能。我正在使用以下方法（**使用 smtp.gmail.com 工作**）并使用 System.Net.Mail；

```
 string from = "user@mydomain.com";
        string password = "12345";

        MailMessage mail = new MailMessage();
        mail.To.Add(to);
        mail.From = new MailAddress(from);
        mail.Subject = title;
        mail.Body = message;
        mail.IsBodyHtml = true;

        SmtpClient smtp = new SmtpClient();
        smtp.Host = "stmp ip here";
        smtp.Port = 25;
        smtp.Credentials = new System.Net.NetworkCredential(from, password);
        smtp.EnableSsl = false;

        smtp.Send(mail); 
```

我已经使用基本身份验证和出站安全 -> 基本身份验证（使用 user@mydomain.com 和 12345 作为密码）安装和配置了 SMTP 服务器。在我网站上的 IIS7 中，我单击了 SMTP 电子邮件并输入了我的 SMTP 服务器的 IP 以及上面的凭据。

在进行所有这些配置之前，我遇到了诸如电子邮件卡在队列文件夹中、服务器不支持 ssl 连接等问题。现在，我在发送电子邮件时收到的唯一错误是从我的应用程序记录的：**SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为： 5.7.3 客户端未通过身份验证**，电子邮件未到达目的地。*队列文件夹是空的，我在 SMTP 服务器日志中没有任何错误！*

我在谷歌上做了很多关于它的研究，但我无法修复它。Telnet 正常工作，端口 25 未被阻止，禁用 Windows 防火墙也无济于事。我真的被困住了。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:43:50.233

听起来服务器可能要求您将“EnableSsl”设置为“真”。因此，您可以尝试在服务器上禁用此功能，也可以在客户端中简单地设置“EnableSSl = true”。然后您可能需要将端口更改为 587 或（有时）465。

# java - 二维数组帮助 - 乘以一个负数

> ID：15187443
> 
> 赞同：0
> 
> 时间：2013-03-03T15:53:42.823
> 
> 标签：java, arrays, loops

## 错误消息是 - 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 2

我将一个二维数组传递给一个方法，并将数组中的值乘以 2。这是下面的方法。

当我从 main 传入第一个数组而不是第二个数组时，它可以正常工作 - 这些也显示在方法代码下方

有谁知道如何修改这个错误？我也不能硬编码循环迭代等

```
int setuparray2 [][] = new int [][] {{4, 5},{6, 9} };                               
int setuparray3 [][] = new int [][] {{4, 6, 3},{-1,9,-5}};

scalarMultiplication(2,setuparray1);
scalarMultiplication(2,setuparray3);

public static void scalarMultiplication( int factor, int[][] a)
{   
    //creates a new array to hold the multiplied value
  int multiplyArray [][] = new int [a.length][a.length];

  for(int i = 0; i < a.length; i++)
  {
    for(int j = 0; j < a[i].length; j++)
    {   
    //multiplys each element in the array by the factor     
    multiplyArray[i][j] = a[i][j] * factor;                                     
    }
  }
  //prints the array with the results
  printArray(multiplyArray);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:57:30.660

创建时`multiplyArray`您没有保留足够的空间。

代替：

```
int multiplyArray [][] = new int [a.length][a.length]; 
```

写：

```
int multiplyArray [][] = new int [a.length][a[0].length]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:00:32.493

您以错误的方式初始化它，下面应该是正确的方式

```
 int multiplyArray [][] = new int [2][3]; 
```

# functional-programming - 我应该如何组织我的 OCaml 项目？

> ID：15187445
> 
> 赞同：10
> 
> 时间：2013-03-03T15:53:47.477
> 
> 标签：functional-programming, ocaml

我知道这个问题很笼统，我什至不知道如何更好地问。

* * *

我没有太多经验`C`，我只是希望我可以在 OCaml 中做与在 Java 中类似的事情。

例如，在 中`Java`，我通常创建一个项目（使用`Eclipse`或其他 IDE），然后我有一个`src`文件夹和一个`bin`文件夹。所有`compiled`的东西都去`bin`。

* * *

**那么对于初学者来说，我怎么能做像上面这样简单的事情呢？只需拆分源文件并轻松编译文件？**

* * *

通常，你们如何组织 OCaml 项目文件？

* * *

最后一个问题是我应该使用`mli`or`module`吗？我注意到这`ocaml-batteries-included`使用`mli`了很多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T17:13:00.977

OCaml 社区对这个主题有很多不同的看法，这实际上取决于您想要的结构或灵活性。如果我对其他一切都懒惰和[绿洲，我自己会使用 makefile 和 ocamlbuild。](http://oasis.forge.ocamlcore.org/)你应该检查一些随机的 OCaml 项目，看看它是如何工作的以及你想要什么。例如，一个 oasis 项目可能如下所示：[https](https://github.com/avsm/ocaml-github) ://github.com/avsm/ocaml-github 。您只需要查看 _oasis 文件（如果您曾经使用过 maven，请将其视为 pom.xml）。运行`oasis setup`应该为您生成所有构建文件。`ocaml setup.ml -all`然后`ocaml setup.ml -install`将在您的系统上安装库。

至于使用mli的。关于他们有一点点争议。这是来自邮件列表的讨论：[http ://www.mentby.com/Group/caml-list/why-should-i-use-mli-files.html](http://www.mentby.com/Group/caml-list/why-should-i-use-mli-files.html)

我自己的观点是，除非您的模块是其他人将使用的公共 API 的一部分，否则它们是可选的。在这种情况下，它们是强制性的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T23:21:32.793

好问题！我真的很想看到其他答案，但这是我组织项目的方式：

首先，我使用 Eclipse 和优秀的[OCalIDE](http://www.algo-prog.info/ocaide/)，它是一个非常酷的 eclipse 插件，积极维护。
如果你是 Emacs 用户，你可以使用[TypeRex](http://www.typerex.org/index.html)（它已经死了，但是随着 OCaml 社区的发展非常缓慢，你有所有的时间）。如果你是 Vim 用户，总是有 Omlet，但没有任何真正好的解决方案。

使用 Eclipse，您可以选择“Managed Ocaml Project”，这意味着基本上*我不想担心编译的东西，我永远不会分享这个项目*。
从那开始，这对于个人项目和临时测试来说已经足够了。但是如果你不能，你将不得不在“Ocaml Makefile Project”和“Ocaml project with ocamlbuild”之间进行选择。选择 Makefile，它是更加灵活和简单的解决方案。

Eclipse 将为您提供[一个用于 Ocaml 项目的默认 Makefile，](https://bitbucket.org/mmottl/ocaml-makefile/)在评论中有很好的解释。如果您不熟悉 Ocaml 构建系统，我建议您使用它。如果是，我建议您使用自己的 Makefile，因为默认的 Makefile 太大且不可读（我认为）。

* * *

伟大的 ！现在我们在我们最喜欢的编辑器中有了我们的项目，并准备好放置一个全局结构！

在项目的根部，我遵循经典 GNU tarball 的约定，即：

```
/
|- src/     # source files
|- lib/     # dependencies
|- test/    # tests files and test binaries
|- _build/  # binaries and object files, sometimes managed by ocamlbuild
|- AUTHORS  # who did that marvelous stuff
|- README   # what is it 
|- Makefile # *always* provide a Makefile, you never know...
|- _tags    # when I use ocamlbuild
|- _oasis   # when I use oasis 
```

有时，没有 lib 目录，这很好。但是您应该提供一个 AUTHOR 和 README 文件，因为它对您的项目非常有利。

* * *

那是无聊的部分， src 目录呢？

1.  OCaml 模块化系统非常有助于在自己的容器中制作东西。我根据自己的经验指出：
    *   除了函子，我不使用内部模块
    *   我自己保持我的模块一致（有点像黄金法则）。为此，我的模块名称主要与数据类型或具有内部状态的特定容器有关（javaists 称之为 Singletons）
    *   我经常做两三个明显特定的模块：入口点，包含所有常用类型的模块，以及包含所有常用功能的模块。它避免了循环依赖。
2.  `src/`除非我真的能在我的模块中看到一个结构（那些是解析，那些是人工智能计算，那些是网络......），否则我将所有内容都放在目录中。就像我对 C 项目所做的那样。

    OCaml 是一种简洁的语言，因此您应该有很少的文件。对于 C 项目，尽量保持目录架构尽可能平坦，记住目录不是模块名称或命名空间的一部分，所以它只是为了程序员的方便！

3.  mli 部分：这实际上取决于您项目的目标。这是我的方法：
    *   唯一的一般规则是：记录 mli（如果存在）。Mlis 在这里帮助编译器**和**程序员。
    *   是给你的吗？在 ml 部分中记录并仅生成用于键入约束或太大而无法浏览 ml 的 mli。
    *   您想分发您的项目吗？在 mli 中记录，因为如果可以选择，我们将读取的第一个文件。选择您将生成界面的文件，也许有些是内部文件，您不希望它们被临时用户阅读。
    *   当您处理 OCaml 对象系统时，总是需要它们，因为它会很快变得混乱。

在一般情况下，我很乐意尽可能少地保留我的 mli，以便客人立即知道哪些文件值得了解，哪些是内部文件/高级文件。

此外，它有助于重构，因为我没有阻止我继续前进的类型约束。
请记住，测试套件的存在是为了确保我们不会破坏任何东西（请参阅[OUnit](https://forge.ocamlcore.org/projects/ounit/)，您的发行版应该已经为您打包了一个。它非常简单高效，是一个很好的项目）。

这就是我所看到的。希望对任何人都有帮助！

# r - 是否可以设置一个全局标志以在 ROxygen 文档旁边提供代码？

> ID：15187446
> 
> 赞同：0
> 
> 时间：2013-03-03T15:53:48.120
> 
> 标签：r, roxygen, literate-programming, roxygen2

我教了一门课，让学生使用我写的包。现在课程即将结束，我想为他们提供每个函数的代码，这些代码与函数的文档内联。我可以设置一个全局标志来完成此操作吗？某种代码破解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:22:05.493

您可以使用 brew 包预处理您的 R 文件，例如

文件'foo-tmp.r'

```
##' a function that doesn't do much 
##'
##' @title foo
##' @param x 
##' @param y 
##' @param z 
##' @return error message
##' @author Baptiste 
##' @examples
##' dontrun{
#<%= cat(paste0("##'", getSrcref(foo), "\n")) %> ##' }
foo <- function(x,  y,  z){
    rnorm(10) == 1
    # inline comment
    .NotYetImplemented()
    " other stuff"
    return(FALSE)
  } 
```

然后处理文件生成`foo.r`

```
source("foo-tmp.r") # to know what the function is
brew("foo-tmp.r", "foo.r") 
```

结果输出：

```
##' a function that doesn't do much 
##'
##' @title foo
##' @param x 
##' @param y 
##' @param z 
##' @return error message
##' @author Baptiste 
##' @examples
##' dontrun{
###'function(x,  y,  z){
 ##'    rnorm(10) == 1
 ##'    # inline comment
 ##'    .NotYetImplemented()
 ##'    " other stuff"
 ##'    return(FALSE)
 ##'  }
 ##' }
foo <- function(x,  y,  z){
    rnorm(10) == 1
    .NotYetImplemented()
    " other stuff"
    return(FALSE)
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:15:34.793

请参阅[此相关问题](https://stackoverflow.com/questions/15194789/how-can-i-retain-the-initial-white-space-in-a-line-when-writing-rd-documentation)。没有全局标志或解决方案。@baptiste's 是最好的。答案设置为社区 wiki，以防这种情况发生变化。

# seo - 有没有办法用 php 识别谷歌机器人？

> ID：15187448
> 
> 赞同：0
> 
> 时间：2013-03-03T15:54:16.760
> 
> 标签：seo, googlebot, google-crawlers

我刚做了一个酒精饮料网站。他们需要对所有链接进行年龄验证。这是一个单页网站，我使用主干路由系统。我已经使用 SESSION 对象创建了检查，因此如果未设置 SESSION 对象，我将加载介绍视图（年龄验证视图）。这一切都按预期工作，但问题是谷歌机器人。当他们试图抓取我的页面时，应用程序总是在加载介绍（年龄验证）视图。这是[该网站](http://rumako.cz)的链接，但我认为它不会很有用，因为我想这更像是一个合乎逻辑的技术问题......所以..我的问题是如何只重定向访问者并让谷歌机器人看到页面的实际内容？我应该使用 cookie 还是有办法通过 php 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:58:39.280

是的。就像是

```
If ($_SERVER['HTTP_USER_AGENT'] == "Googlebot") {

$_SESSION['ageverified'] = true;
// do more

} 
```

应该管用。

有关所有确切的用户代理名称及其爬取的内容，请参见此处。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1061943](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1061943)

# php - 使用自定义字段对类别进行排序

> ID：15187451
> 
> 赞同：0
> 
> 时间：2013-03-03T15:54:45.467
> 
> 标签：php, wordpress, loops

我想使用自定义字段值对类别进行排序。因此，当我输入 newcat 作为名称时，我可以从值框中定义类别。

循环是这样的

```
 <?php query_posts ('ignore_sticky_posts=1&showposts=10&cat=XXXXXX');   
 if (have_posts()) : ?>
 <?php $count = 0; ?>
 <?php while (have_posts()) : the_post(); ?> 
```

以及此代码的自定义字段调用：

```
<?php $newcat = get_post_meta($post->ID, 'newcat', true); ?>
<?php echo $newcat; ?> 
```

如何使用自定义域代码更改循环上的 XXXX？请帮忙。我对php不聪明。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:23:58.227

我不太确定我是否了解您想要做什么。

假设您的自定义字段元键是“newcat”，您可能想尝试替换：

```
<?php query_posts ('ignore_sticky_posts=1&showposts=10&cat=XXXXXX'); 
```

和：

```
<?php query_posts ('meta_key=newcat&orderby=meta_value&order=ASC&ignore_sticky_posts=1&showposts=10'); 
```

# javascript - Kineticjs - 修复了正在旋转的形状的填充模式

> ID：15187452
> 
> 赞同：1
> 
> 时间：2013-03-03T15:54:52.170
> 
> 标签：javascript, html5-canvas, kineticjs

我使用[kineticjs](http://kineticjs.com)来处理形状和过渡。现在我已经制作了下一个代码示例：

[http://jsfiddle.net/z6LaH/2/](http://jsfiddle.net/z6LaH/2/)

```
hexagon = new Kinetic.RegularPolygon({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    sides: 6,
    radius: hexRadius,
    cornerRadius: 0,
    fillPatternImage: img,
    fillPatternOffset: [150, -150],
    //fill: 'white',
    stroke: 'black',
    strokeWidth: 0
});

hexagon.on('mouseover touchstart', function() {
    this.transitionTo({
        cornerRadius: transRadius,
        rotation: Math.PI / 2,
        scale: {x: 0.75, y: 0.75},
        easing: 'ease-in',
        duration: duration,

        callback: function() {
            hexagon.transitionTo({
                scale: {x: 1.1, y: 1.1},
                duration: duration * 7,
                easing: 'elastic-ease-out'
            });
        }
    });
}); 
```

如您所见，填充图案随形状旋转。我需要修复它。所以我的问题是：

**是否可以在形状旋转时制作固定的填充图案，以及如何制作？**

* * *

更新：

我得到了下一个方法：以相反的方向旋转填充图案。

[http://jsfiddle.net/z6LaH/3/](http://jsfiddle.net/z6LaH/3/)

有没有更优雅的方式来做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:08:37.060

Eric 刚刚添加了将用户定义的剪辑功能保存到图层和组的功能。

首先，您定义一个在图层或组上绘制剪辑区域的函数

```
var layer = new Kinetic.Layer({
    clipFunc: function(canvas) {
        var context = canvas.getContext();
        context.rect(0, 0, 400, 100);
    } 
}); 
```

然后调用 .clip() 函数来应用剪辑。这是源代码中 Kinetic 的 clip() 函数：

```
_clip: function(container) {
   var context = this.getContext(); 
   context.save();
   this._applyAncestorTransforms(container);
   context.beginPath(); 
   container.getClipFunc()(this);
   context.clip();
   context.setTransform(1, 0, 0, 1, 0, 0);
} 
```

clip() 函数在执行剪辑之前应用现有的变换。如果您不喜欢 Kinetic 函数的变换部分，您可以随时使用“container.getClipFunc()”，然后基于上面的 _clip 函数构建自己的 myClipWithoutTransform()。

# ruby-on-rails - 抽象类未在 Rails 中正确加载

> ID：15187456
> 
> 赞同：3
> 
> 时间：2013-03-03T15:55:14.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, abstract-class, eager-loading

这是我的类层次结构：

![](../Images/4c4475e7f352b7b8cfeec057c50ec24f.png)

在我的`Item`模型中，我有类似的东西：

```
class Item < ActiveRecord::Base
    TYPES = [Weapon::TYPES, Armour::TYPES, Misc::TYPES].flatten.freeze
end 
```

然后，抽象类的形式为：

```
class Misc < Item
    self.abstract_class = true

    TYPES = G_BASE_NAMES["misc"].keys.freeze
end 
```

当我启动控制台时，我得到：

> > /Users/hello_so/localhost/search/app/models/item.rb:7:in `': 未初始化的常量 Item::Misc

item.rb 中的第 7 行是该`TYPES = ...`行。

为什么它抱怨杂项而不是武器和盔甲？（顺便说一句，它首先出现在文件中）？

* * *

编辑：我实际上是在初始化程序中这样做的（我最近添加的东西试图解决这个问题）

```
if Rails.env.development?
  Dir[Rails.root + 'app/models/*.rb'].map {|f| File.basename(f, '.*').camelize.constantize }
end 
```

如果我删除它，那么我可以运行控制台。

* * *

另一个奇怪的事情：

```
$ rails c

> WEAPON

> NameError: uninitialized constant Weapon #why is it looking for the class??
> from /Users/hello_so/localhost/search/app/models/item.rb:7:in `<class:Item>' 
```

但是如果我加载`Item`（通过输入`Item`），那么它会抱怨 WEAPON 常量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:41:18.787

您是否尝试过包含您的抽象类：`require Rails.root + path`？

# c++ - 允许对 C++11 中的循环进行编译器优化

> ID：15187459
> 
> 赞同：8
> 
> 时间：2013-03-03T15:55:34.587
> 
> 标签：c++, language-lawyer

是否允许兼容 C++11 的编译器从以下位置优化/转换此代码：

```
bool x = true; // *not* an atomic type, but suppose bool can be read/written atomically
/*...*/
{
    while (x); // spins until another thread changes the value of x
} 
```

相当于无限循环的任何东西：

```
{
    while (true); // infinite loop
} 
```

从单线程程序的角度来看，上述转换当然是有效的，但这不是一般情况。

此外，在 C++11 之前的版本中是否允许这种优化？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T15:58:10.250

**绝对地。**

由于`x`没有标记为`volatile`并且看起来是一个具有自动存储时长和内部链接的本地对象，并且程序没有对其进行修改，因此这两个程序是等价的。

在 C++03 和 C++11 中，这是 as-if 规则，因为访问非易失性对象*不*被视为程序的“副作用”：

> `[C++11: 1.9/12]:` **访问由 volatile glvalue (3.10) 指定的对象、修改对象、调用库 I/O 函数或调用执行任何这些操作的函数都是副作用，它们是执行环境状态的变化。**表达式（或子表达式）的评估通常包括值计算（包括确定对象的身份以进行左值评估和获取先前分配给对象以进行纯右值评估）和副作用的启动。当对库 I/O 函数的调用返回或对 volatile 对象的访问被评估时，副作用被认为是完整的，即使调用（例如 I/O 本身）或 volatile 访问隐含的一些外部操作可能还没有完成。

*C++11 确实为全局*对象腾出了空间，可以在一个线程中更改其值，然后在另一个线程中读取新值：

> `[C++11: 1.10/3]:``T`根据以下规则，在特定点对线程可见的对象的值是对象的初始值、分配给对象`T`的**值或由另一个线程分配给对象的值**。

但是，如果您这样做，因为您的对象不是原子的：

> `[C++11: 1.10/21]:`如果程序的执行包含不同线程中的两个冲突操作，则该程序的执行包含数据竞争，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致未定义的行为。

而且，当调用未定义的行为时，*任何事情都可能发生*。

### 引导笔记

> `[C++11: 1.10/25]:`实现应确保由原子或同步操作分配的最后一个值（按修改顺序）将在有限的时间段内对所有其他线程可见。

再次注意，对象必须是*原子*的（例如`std::atomic<bool>`）才能获得此保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-04T21:31:13.223

允许编译器对这两个循环做任何事情。包括终止程序。因为如果无限循环不执行类似同步的操作（执行需要与另一个线程或 I/O 同步的操作），无限循环具有未定义的行为，根据[C++ 内存模型](http://en.cppreference.com/w/cpp/language/memory_model)：

> 请注意，这意味着具有无限递归或无限循环的程序（无论是作为 for 语句实现还是通过循环 goto 或其他方式实现）具有未定义的行为。

# meteor - 在 Meteor 中搜索集合时设置 {reactive: false} 仍会更新模板

> ID：15187465
> 
> 赞同：1
> 
> 时间：2013-03-03T15:55:52.293
> 
> 标签：meteor, reactive-programming

我有一个新闻提要的想法，我正在 Meteor 中尝试，但我在让该死的东西表现时遇到问题:) 我希望它在页面加载/刷新时加载新闻提要，但不是在数据变化。我在文档中发现添加`{reactive: false}`到集合的 find 方法应该使其坚持渲染生成的结果，但它似乎对我不起作用。Meteor 会立即更新模板。

这是我得到的代码：

**在服务器端：**

```
Meteor.publish("newsfeed", function () {
    return Newsfeed.find({});
}); 
```

**在客户端：**

```
Meteor.subscribe('newsfeed');

Template.feed.feed_data = function() {
    var feed = Newsfeed.find({}, {
        sort: {updated_time: -1},
        limit: 10,
        reactive: false
    });

    return feed;
}; 
```

**在模板中：**

```
<template name="feed">
    <div id="feed-wrapper">
        <ul>
            {{#each feed_data}}
                <li>
                    <div class="message">{{message}}</div>
                </li>
            {{/each}}
        </ul>
    </div>
</template> 
```

如果我随后`Newsfeed.update({_id: 'some_random_id'}, {$set: {date_created: 'some_random_date'}})`在开发工具中运行，模板会更新我的新闻提要的排序并对其进行更改。

我怎样才能让它不那样做？:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:24:26.433

这可以说是 Meteor 中的一个错误。通过`reactive: false`意味着 minimongo 本身没有设置一些代码来说“观察，如果它发生变化，则无效”。但是`#each`有自己单独的 observeChanges 调用，它直接使用观察回调（不是反应性的“无效和重新计算”）来更新列表。如果光标`reactive: false`在上面，我们可能不应该这样做。[在https://github.com/meteor/meteor/issues/771](https://github.com/meteor/meteor/issues/771)中跟踪这个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:17:38.303

这有点奇怪，它应该工作。你也可以使用[preserve](http://docs.meteor.com/#template_preserve)：

尝试在您的客户端 js 中添加这一行

```
Template.feed.preserve(['#feed-wrapper']); 
```

顺便说一句，`template name="feed"`在另一个模板中？这个模板中是否有任何反应变量？

# google-maps - google maps api - 从 kml 点创建线

> ID：15187467
> 
> 赞同：0
> 
> 时间：2013-03-03T15:56:09.300
> 
> 标签：google-maps, kml

我想从谷歌地图 api 中的 kml 文件（foursquare checkins）中解析点，并使用它们来创建折线对象（旅行路径）。我知道如何创建路径，但如何从 kml 中提取点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:12:22.753

您可以使用第三方解析器（如[geoxml3](https://code.google.com/p/geoxml3/)或[geoxml-v3）从 KML 检索点](https://code.google.com/p/geoxml-v3/)

# c# - 如何在 localhost 上打开 txt 文件并更改内容

> ID：15187469
> 
> 赞同：0
> 
> 时间：2013-03-03T15:56:15.497
> 
> 标签：c#, css

我想使用 C# 4.5 打开一个 css 文件，一次只更改一个文件。

这样做会给我一个例外 -**不支持 URI 格式**。

1.  最有效的方法是什么？
2.  我可以在不阅读整个文件的情况下找到该行并替换它吗？
3.  我正在寻找的行是否可以开始插入文本，直到光标指向某个字符？

    ```
    public void ChangeColor()
    {
        string text = File.ReadAllText("http://localhost:8080/game/Css/style.css");

        text = text.Replace("class='replace'", "new value");

        File.WriteAllText("D://p.htm", text);
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:14:04.577

如前所述 File.ReadAllText 不支持 url。以下是 WebRequest 的工作示例：

```
{
    Uri uri = new Uri("http://localhost:8080/game/Css/style.css");

    WebRequest req = WebRequest.Create(uri);
    WebResponse web = req.GetResponse();
    Stream stream = web.GetResponseStream();

    string content = string.Empty;

    using (StreamReader sr = new StreamReader(stream))
    {
        content = sr.ReadToEnd();
    }

    content.Replace("class='replace'", "new value");

    using (StreamWriter sw = new StreamWriter("D://p.htm"))
    {
        sw.Write(content);
        sw.Flush();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:08:20.033

我相信`File.ReadAllText`期待一个**文件路径**，而不是一个 URL。

不，您不能在不读取和重写整个文件的情况下搜索/替换文本文件的部分。它只是一个文本文件，而不是数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:11:13.680

最有效的方法是将要更改 css 的任何控件声明为“runat=server”，然后修改`CssClass`它的属性。没有已知的替代方法可以直接修改 css 文件。任何其他黑客都只是......一种黑客和非常低效的方式来做到这一点。

# python - 尝试使用 Python 验证 SHA1 消息签名。我究竟做错了什么？

> ID：15187470
> 
> 赞同：11
> 
> 时间：2013-03-03T15:56:22.243
> 
> 标签：python, cryptography, m2crypto

我试图通过从网站下载证书并提取其公钥来验证消息的 SHA1 签名。[SO（此处](https://stackoverflow.com/questions/544433/how-do-you-verify-an-rsa-sha1-signature-in-python)和[此处](https://stackoverflow.com/questions/5663084/m2crypto-signature-algorithm)）的其他地方有一些示例代码，但是我还没有弄清楚我做错了什么。

```
import requests
from M2Crypto import BIO, RSA, EVP, X509

def verify_message(cert_url, msg, sig):
    cert_text = requests.get(cert_url, verify=True)
    cert = X509.load_cert_string(cert_text.content)
    pubkey = cert.get_pubkey()
    sig = sig.decode('base64')

    # Write a few files to disk for debugging purposes
    f = open("sig", "wb")
    f.write(sig)
    f.close()

    f = open("msg", "w")
    f.write(msg)
    f.close()

    f = open("mypubkey.pem", "w")
    f.write(pubkey.get_rsa().as_pem())
    f.close()

    pubkey.reset_context(md='sha1')
    pubkey.verify_init()
    pubkey.verify_update(msg)
    assert pubkey.verify_final(sig) == 1 
```

这给了我以下断言错误：

```
 File "/tmp/test.py", line 71, in verify_message
    assert pubkey.verify_final(sig) == 1
AssertionError 
```

但是，如果我`openssl`从命令行使用从上面的 Python 脚本生成的文件，它工作正常：

```
[jamie@test5 tmp]$ openssl dgst -sha1 -verify mypubkey.pem -signature sig msg
Verified OK 
```

我在这里碰壁了；任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T09:49:01.130

您的代码工作正常 — [https://gist.github.com/kalloc/5106808](https://gist.github.com/kalloc/5106808) 我在这里看到其他错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:29:52.257

这段代码在我的最后工作得很好。

# java - 状态更新不起作用

> ID：15187480
> 
> 赞同：0
> 
> 时间：2013-03-03T15:57:24.633
> 
> 标签：java, jsf, jakarta-ee, jsf-2

当我单击 Speak Out(p:commandButton) 提交状态时，出现以下异常。异常是由commentList()函数引起的

```
Query query = em.createQuery(
    "SELECT c FROM Comment c WHERE c.statusId=" + statusId,
    Comment.class); 
```

1)主页.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
</h:head>

    <div style="width: 100%; background-color: #EEEEEE;">
        <h:panelGrid columns="1">
            <h:form id="speakout">
                <h:outputText value="Speak Out" />
                <br />
                <h:outputText value="Share whats in your mind.!"
                    style="color:#aaaaaa;font-size:x-small;" />
                <p:inputTextarea name="content" id="sharetext" cols="60" rows="2"
                    onclick="this.value='';" value="#{statusBean.status.statusmsg}"
                    style="text-size:small;" />
                <br />
                <p:commandButton type="submit" value="Speak Out"
                    action="#{statusBean.save}" ajax="false"
                    styleClass="buttonstyle" />
                <br />
            </h:form>
        </div>
        <!--  -->
        <div class="items">
            <h:form>
                <ui:repeat var="p" value="#{statusBean.statusList}">
                    <ui:fragment rendered="#{p.statusmsg!=null}">
                        <div class="status">
                            <!--  for text status msg check-->
                            <h:commandLink action="#{friendBean.gotoFriendProfile(p.email)}"
                                styleClass="link">
                                <img src="../images/profilePicture/thumb/#{p.picture}"
                                    style="height: 39px; width: 39px;" />&nbsp;
                                <h:outputText value="#{p.statusBy}:" />
                            </h:commandLink>
                            <h:outputText value="#{p.statusmsg}" styleClass="textstyle1" />
                            <h:outputText value="#{p.timeMillis}"
                                style="font-size:xx-small;float:right;color:#bbbbbb;font-style: italic;">
                                <f:converter converterId="timeConverter" />
                            </h:outputText>
                            <h:commandLink action="#{statusBean.deleteStatus(p.statusId)}"
                                value="Delete"></h:commandLink>
                            <p:growl />
                            <br />
                            <ui:repeat var="q" value="#{statusBean.commentList(p.statusId)}" >
                                <div class="barcomment">
                                    <br />
                                        <h:commandLink action="#{friendBean.gotoFriendProfile(q.email)}"
                                            styleClass="link">
                                            <img src="../images/profilePicture/thumb/#{q.picture}"
                                                style="height: 29px; width: 29px;" />&nbsp;
                                            <h:outputText value="#{q.commentBy}:" />
                                        </h:commandLink>
                                        <h:outputText value=" #{q.comment}" styleClass="textstyle1" />
                                        <h:outputText value="#{q.timeMillis}"
                                            style="font-size:xx-small;float:right;font-style: italic;">
                                            <f:converter converterId="timeConverter" />
                                        </h:outputText>
                                        <h:commandLink action="#{statusBean.deleteComment(q.commentId)}"
                                            value="Delete"></h:commandLink>
                                    </div>
                                </ui:repeat>
                                <br />
                                <div class="comment">
                                    <p:inputText value="#{statusBean.comment.comment}"
                                        styleClass="box" />
                                    <p:commandLink value="Views"
                                        action="#{statusBean.update(p.statusId)}"
                                        ajax="false" styleClass="link" />
                                </div>
                                <br />
                            </div>
                        </ui:fragment>
                    </ui:repeat>
                </h:form>
            </div>
        </h:body>
</html> 
```

2) 状态豆

```
 package com.bean;

    public class StatusBean {
        Date d;
        Comment comment;
        Status status;
        private EntityManager em;
        private UploadedFile uploadedFile;

        public Comment getComment() {
            return comment;
        }

        public void setComment(Comment comment) {
            this.comment = comment;
        }

        public Status getStatus() {
            return status;
        }

        public void setStatus(Status status) {
            this.status = status;
        }

        public StatusBean() {
            d = new Date();
            comment = new Comment();
            status = new Status();
            EntityManagerFactory emf = Persistence
                    .createEntityManagerFactory("FreeBird");
            em = emf.createEntityManager();
        }

        public List<Status> getStatusList() {
            FacesContext context = FacesContext.getCurrentInstance();
            HttpSession session = (HttpSession) context.getExternalContext()
                    .getSession(true);
            User user = (User) session.getAttribute("userdet");
            Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"
                    + user.getEmail() + "' ORDER BY s.timeMillis desc",
                    Status.class);
            List<Status> results = query.getResultList();
            Query query1 = em.createQuery("SELECT f FROM Friend f WHERE f.email='"
                    + user.getEmail() + "'", Friend.class);
            List<Friend> results1 = query1.getResultList();
            Iterator<Friend> it = results1.listIterator();
            while (it.hasNext()) {
                String email = it.next().getFriendEmail();
                Query query2 = em.createQuery(
                        "SELECT s FROM Status s WHERE s.email='" + email
                                + "' ORDER BY s.timeMillis desc", Status.class);
                List<Status> results2 = query2.getResultList();
                results.addAll(results2);

            }
            Collections.sort(results);
            int index = 0;
            int end = index+5 > results.size() ? results.size() : index+5;
            List<Status> subList = results.subList(0, end);

            session.setAttribute("statusindex", end);
            return subList;

        }
    public String save() {
    FacesContext context = FacesContext.getCurrentInstance();
    HttpSession session = (HttpSession) context.getExternalContext()
            .getSession(false);
    User user = (User) session.getAttribute("userdet");
    status.setEmail(user.getEmail());
    status.setStatusBy(user.getFirstName());
    d = new Date();
    status.setTimeMillis(d.getTime());
    status.setPicture(user.getImage());
    System.out.println("status save called");
    em.getTransaction().begin();
    em.persist(status);
    em.getTransaction().commit();
    FacesContext context2 = FacesContext.getCurrentInstance();
    context2.getExternalContext().getSessionMap().remove("statusBean");
    return "success";
}

        public String update(String statusId) {

            System.out.println("Update Called...");
            FacesContext context = FacesContext.getCurrentInstance();
            HttpSession session = (HttpSession) context.getExternalContext()
                    .getSession(true);
            User user = (User) session.getAttribute("userdet");
            comment.setStatusId(Integer.parseInt(statusId));
            comment.setCommentBy(user.getFirstName());
            comment.setPicture(user.getImage());
            comment.setEmail(user.getEmail());
            d = new Date();
            comment.setTimeMillis(d.getTime());
            em.getTransaction().begin();
            em.persist(comment);
            em.getTransaction().commit();
            getComment().setComment("");
            FacesContext context2 = FacesContext.getCurrentInstance();
            context2.getExternalContext().getSessionMap().remove("statusBean");
            return "success";

        }

        public List<Comment> commentList(String statusId) {
            FacesContext context = FacesContext.getCurrentInstance();
            Query query = em.createQuery(
                    "SELECT c FROM Comment c WHERE c.statusId=" + statusId,
                    Comment.class);
            List<Comment> results = query.getResultList();
            return results;
        }

        public String deleteStatus(String statusId) {

            Status status = em.find(Status.class, Integer.parseInt(statusId));
            FacesContext context = FacesContext.getCurrentInstance();
            HttpSession session = (HttpSession) context.getExternalContext()
                    .getSession(true);
            User user = (User) session.getAttribute("userdet");
            if (user.getEmail().equals(status.getEmail())) {
                em.getTransaction().begin();
                em.remove(status);
                em.getTransaction().commit();

            } else {
                context.addMessage(null, new FacesMessage(
                        "You don't have permission to delete"));
            }

            return "success";

        }

        public String deleteComment(String commentId) {

            Comment comment = em.find(Comment.class, Integer.parseInt(commentId));
            FacesContext context = FacesContext.getCurrentInstance();
            HttpSession session = (HttpSession) context.getExternalContext()
                    .getSession(true);
            User user = (User) session.getAttribute("userdet");
            Status status = em.find(Status.class, comment.getStatusId());
            if (user.getEmail().equals(status.getEmail())
                    || comment.getEmail().equals(user.getEmail()))

            {
                em.getTransaction().begin();
                em.remove(comment);
                em.getTransaction().commit();
            } else {
                context.addMessage(null, new FacesMessage(
                        "You don't have permission to delete"));
            }
            return "success";

        }

    } 
```

3)异常

```
Mar 03, 2013 9:10:26 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/FreeBird_v.6] threw exception [An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [SELECT c FROM Comment c WHERE c.statusId=], line 0, column -1: unexpected end of query.
Internal Exception: NoViableAltException(-1@[792:1: comparisonExpressionRightOperand returns [Object node] : (n= arithmeticExpression | n= nonArithmeticScalarExpression | n= anyOrAllExpression );])] with root cause
NoViableAltException(-1@[792:1: comparisonExpressionRightOperand returns [Object node] : (n= arithmeticExpression | n= nonArithmeticScalarExpression | n= anyOrAllExpression );])
    at org.eclipse.persistence.internal.libraries.antlr.runtime.DFA.noViableAlt(DFA.java:159)
    at org.eclipse.persistence.internal.libraries.antlr.runtime.DFA.predict(DFA.java:144)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.comparisonExpressionRightOperand(JPQLParser.java:4326)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.comparisonExpression(JPQLParser.java:4215)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.simpleConditionalExpressionRemainder(JPQLParser.java:3389)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.simpleConditionalExpression(JPQLParser.java:3326)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalPrimary(JPQLParser.java:3275)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalFactor(JPQLParser.java:3194)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalTerm(JPQLParser.java:3103)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.conditionalExpression(JPQLParser.java:3029)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.whereClause(JPQLParser.java:2986)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectStatement(JPQLParser.java:380)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.document(JPQLParser.java:281)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.parse(JPQLParser.java:134)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.buildParseTree(JPQLParser.java:95)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:215)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:190)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:142)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:126)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1475)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1497)
    at com.bean.StatusBean.commentList(StatusBean.java:227)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:484)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:159)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:106)
    at com.sun.faces.facelets.component.UIRepeat.getValue(UIRepeat.java:268)
    at com.sun.faces.facelets.component.UIRepeat.getDataModel(UIRepeat.java:244)
    at com.sun.faces.facelets.component.UIRepeat.setIndex(UIRepeat.java:434)
    at com.sun.faces.facelets.component.UIRepeat.doVisitChildren(UIRepeat.java:642)
    at com.sun.faces.facelets.component.UIRepeat.visitTree(UIRepeat.java:600)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at com.sun.faces.facelets.component.UIRepeat.visitTree(UIRepeat.java:606)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at javax.faces.component.UIForm.visitTree(UIForm.java:331)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1487)
    at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:258)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:245)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:107)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:27:58.100

`p.statusId`您传递给的似乎`commentList(String statusId)`是空的。你可以尝试把方法放在`System.out.println("statusId: "+statusId);`开头`commentList(String statusId)`。

你也可以`<h:outputText value="p.statusId: #{p.statusId}"/>`在前面放：

```
<ui:repeat var="q" value="#{statusBean.commentList(p.statusId)}" > 
```

我也不确定放入属性是否是一种好`statusBean.commentList(p.statusId)`习惯`ui:repeat` `value`。您最终可能会比您想要的更频繁地从数据库中检索状态列表。最好将它预加载到某个属性，然后在需要的地方传递它。

**更新**

同时替换：

```
Query query = em.createQuery(
    "SELECT c FROM Comment c WHERE c.statusId=" + statusId, Comment.class); 
```

和

```
TypedQuery<Comment> query = em.createQuery(
    "SELECT c FROM Comment c WHERE c.statusId = :statusId", Comment.class);
query.setParameter("statusId", statusId); 
```

这样，您的查询对 SQL 注入和语法错误更安全。

**更新 2**

```
private class StatusWrapper {

  private Status status;
  private List<Comment> comments;

} 
```

在你的 StatusBean

```
...
private List<StatusWrapper> statuses;
...
(getters setters)
...
public StatusBean() {
...
initStatuses();
}
...
public void initStatuses() {
  statuses=new ArrayList<>();
  List<Status> stats=getStatusList();
  for(Status status:stats) {
    StatusWrapper wrapper=new StatusWrapper();
    wraper.setStatus(status);
    wraper.setComments(commentList(status.getStatusId()));
    statuses.add(wrapper);
} 
```

比在您的页面中仅使用 statuses 属性。希望很清楚（可能有一些错别字。）

# java - 我用来绘制表单的组件编译后不会出现

> ID：15187482
> 
> 赞同：-1
> 
> 时间：2013-03-03T15:57:33.900
> 
> 标签：java, netbeans

我正在尝试在 java 中创建一个聊天程序，但是当我运行服务器表单时出现问题，我用来绘制的组件不会出现。

这是我在表单运行中使用的代码：

```
public void run() {

                Server s = new Server();
                s.setVisible(true);

                // Etablir la connexion
                try
        {
            ServerSocket ecoute;
            ecoute = new ServerSocket(1111);
            Socket service = null;
            System.out.println("Serveur en attente d'un client !");
            while(true)
            {

                service = ecoute.accept();
                System.out.println("Client connécté !");
                DataInputStream is = new DataInputStream(service.getInputStream());
                                s.jTextArea1.setText("Client dit : " + is.readUTF().toUpperCase());
                service.close();
            }
        }
        catch(IOException e)
        {
            e.printStackTrace();

        }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:13:45.370

您说运行此代码时没有任何反应。方法的存在`public void run()`告诉我这是一个线程，或者至少是一个`Runnable`.

因为`while(true)`，如果这个线程没有以正确的方式启动，它就不会独立运行；那就是它将支撑整个程序。

而不是打电话`thread.run();`，打电话`thread.start();`。在启动将与主线程并行运行的新线程后，这将为您调用 run 方法。

如果此代码不在线程中，而您只是`public void run()`偶然使用，那么它仍然会为您提供相同的问题。

有关详细信息，请参阅[有关线程的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)

# image - Facebook 分享展示了不止一个缩影

> ID：15187484
> 
> 赞同：0
> 
> 时间：2013-03-03T15:57:45.880
> 
> 标签：image, facebook-graph-api, sharing

[调试](https://developers.facebook.com/tools/debug/og/object?q=www.casadoheroi.com.br)显示没有错误或警告，我`og:image`的是 200x200，即便如此，我在 facebook 的共享页面中也得到了其他 2 个缩影。

我试图将`og:image`其放大到 1000x1000，然后它是第一个选项而不是实际的第三个选项，所以我认为其他 2 个图像的图像大小是问题所在。

我看到它`og:image`应该是唯一提供的缩影，一旦它被验证。

我希望是这样，请指教。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:41:01.710

好像我不是唯一的，这是facebook中的一个错误

[https://developers.facebook.com/bugs/239522122851150?browse=search_51337c9877acf8202975193](https://developers.facebook.com/bugs/239522122851150?browse=search_51337c9877acf8202975193)

# php - PHP：如何删除“[”和“]”之间的字符串

> ID：15187486
> 
> 赞同：2
> 
> 时间：2013-03-03T15:57:51.417
> 
> 标签：php, preg-replace

我需要删除 [...] 内的字符串，包括“[]”本身。我尝试从该站点搜索解决方案。我有一个线索，我应该用 preg_replace 尝试一些东西，但它对我来说似乎太专业了。

例如 ：

```
[gallery ids="92,93,94,95,96,97,98,99,100" orderby="rand"] Description The thirty-two storey resort condominium in Phuket, located Just 150m from Patong beach where choices of activities, water sp 
```

我需要从示例文本中删除**[gallery ids="92,93,94,95,96,97,98,99,100" orderby="rand"] 。**它总是以**[gallery ids="**开头。

请建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T16:02:25.600

试试这个：

```
$string = '[gallery ids="92,93,94,95,96,97,98,99,100" orderby="rand"] Description The thirty-two storey resort condominium in Phuket, located Just 150m from Patong beach where choices of activities, water sp ';
$string = preg_replace('/\[gallery ids=[^\]]+\]/', '', $string); 
```

分解：

`\[gallery ids=`寻找以`[gallery ids=`

`[^\]]+\]`匹配 1 个或多个字符，`]`直到您到达`]`

然后将用`''`任何内容替换整个匹配的部分，你就有了新的字符串。

# php - 使用 PHP & MySQL 填充下拉菜单

> ID：15187487
> 
> 赞同：0
> 
> 时间：2013-03-03T15:57:58.203
> 
> 标签：php, javascript, mysql, drop-down-menu

我正在尝试使用从使用**PHP**和**MySQL**的第一个下拉列表中选择的值填充第二个下拉列表，并且不刷新页面。我认为这很简单，但无法使其正常工作，因此将不胜感激任何帮助。

到目前为止，我有以下内容：

**HTML 表单 (form.php)**

```
<select name="list1" id="list1">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select>

<select name="list2" id="list2">

</select> 
```

**JavaScript（在 form.php 中）**

```
<script type="text/javascript">
  $("#list1").change(function() {
    $("#list2").load("get_list2.php?id=" + $("#list1").val());
  });
</script> 
```

**get_list2.php**

```
require_once("config.php");

$q1 = mysql_query("SELECT * FROM mytable WHERE id = '$_GET[id]'");
while($row1 = mysql_fetch_assoc($q1)){
  echo "<option>".$row1['item']."</option>";
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:21:24.893

就像其他成员所说的那样，您应该使用 PDO（带有准备好的语句）而不是 mysql_。

一种可能的实现：

HTML (form.php)

```
<select name="list1" id="list1">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select>

<select name="list2" id="list2"></select>

<script type="text/javascript">
$("#list1").change(function() {
    $.ajax({
        url : "get_list2.php?id=" + $(this).val(),                          
        type: 'GET',                   
        dataType:'json',                   
        success : function(data) {  
            if (data.success) {
                $('#list2').html(data.options);
            }
            else {
                // Handle error
            }
        }
    });
});
</script> 
```

PHP (get_list2.php)

```
require_once("config.php");

$id = $_GET['id'];

if (!isset($id) || !is_numeric($id))
    $reponse = array('success' => FALSE);
else {
    // Where $db is a instance of PDO

    $query = $db->prepare("SELECT * FROM mytable WHERE id = :id");
    $query->execute(array(':id' => $id));
    $rows = $query->fetchAll(PDO::FETCH_ASSOC);

    $options = "";
    foreach ($rows as $row) {
        $options .= '<option value="'. $row .'">'. $row .'</option>';
    }

    $response = array(
        'success' => TRUE,
        'options' => $options
    );
}

header('Content-Type: application/json');
echo json_encode($response); 
```

PS：未经测试，但它应该可以工作......我猜。

# python - 错误：EMFILE，连接太多

> ID：15187488
> 
> 赞同：0
> 
> 时间：2013-03-03T15:57:59.000
> 
> 标签：python, npm, towerjs

在 NPM 安装中，我得到：

```
npm http 304 https://registry.npmjs.org/grunt-contrib-uglify
npm http 304 https://registry.npmjs.org/grunt-contrib-qunit
npm ERR! TypeError: Bad argument
npm ERR!     at Object.fs.close (fs.js:306:11)
npm ERR!     at Object.fs.close (/usr/local/Cellar/node/0.8.21/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:92:17)
npm ERR!     at null.<anonymous> (/usr/local/Cellar/node/0.8.21/lib/node_modules/npm/lib/utils/fetch.js:31:8)
npm ERR!     at EventEmitter.emit (events.js:96:17)
npm ERR!     at emit (fs.js:1500:14)
npm ERR!     at WriteStream.flush (fs.js:1504:9)
npm ERR!     at Object.oncomplete (fs.js:297:15)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Darwin 12.2.0
npm ERR! command "/usr/local/Cellar/node/0.8.21/bin/node" "/usr/local/bin/npm" "install"

/usr/local/Cellar/node/0.8.21/lib/node_modules/npm/lib/utils/error-handler.js:247
  log.error("cwd", process.cwd())
                           ^
Error: EMFILE, too many open files
    at process.errorHandler (/usr/local/Cellar/node/0.8.21/lib/node_modules/npm/lib/utils/error-handler.js:247:28)
    at process.EventEmitter.emit (events.js:126:20) 
```

我在osx上。我试过`sudo ulimit -n 10480`了，上面写着：

```
$ ulimit
unlimited 
```

运行 npm 版本：

```
{ http_parser: '1.0',
  node: '0.8.21',
  v8: '3.11.10.25',
  ares: '1.7.5-DEV',
  uv: '0.8',
  zlib: '1.2.3',
  openssl: '1.0.0f',
  npm: '1.2.11',
  shopper4: '0.1.0' } 
```

任何想法？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:43:11.487

在 OSX 上，您应该使用`launchctl`.

检查电流限制：

```
launchctl limit 
```

要更改最大文件数：

```
launchctl limit maxfiles 400000 unlimited 
```

永久更改设置编辑`/etc/launchd.conf`

```
limit maxfiles  400000           unlimited 
```

（来自：[http](http://artur.hefczyc.net/node/27) ://artur.hefczyc.net/node/27 ）

# angularjs - 自定义指令模板内的模型从未更新

> ID：15187491
> 
> 赞同：0
> 
> 时间：2013-03-03T15:58:11.660
> 
> 标签：angularjs

我有一个`myElement`带有 templateUrl 的简单自定义指令，它打印一条简单的消息：

```
<p>Message: {{message}}</p> 
```

这是我的指令的定义：

```
testapp.directive('myElement', function() {
    return {
        restrict: 'E',
        template: '<p>Message: {{message}}</p>',
        link: function(scope, elem, attrs) {
            scope.message = 'This message is never updated... :(';
            setTimeout(function() {
                scope.message = "Why this message is never shown?";
            }, 1000);
        }
    };
}); 
```

1 秒后，我希望将消息更新为“为什么从未显示此消息？”。不幸的是，该消息永远不会更新。

这是 jsFiddle：http: [//jsfiddle.net/seyz/SNMfc](http://jsfiddle.net/seyz/SNMfc)

你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:18:51.293

由于 Angular 脏检查的工作原理，当您在 Angular 范围之外执行代码时（例如，使用 setTimeout、setInterval 或从某些第三方插件回调中），该代码调用产生的更改不会被 Angular 立即“识别”范围。

对于这种情况，您需要将代码包装在[scope.$apply()](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)方法中。

在这种特殊情况下，您可以简单地使用[$timeout 函数](http://docs.angularjs.org/api/ng.%24timeout)来替换您的`setTimeout(fn, 1000)`调用，`$timeout(fn, 1000)`并且您的代码将使用 scope.$apply() 调用（[Plunker](http://jsfiddle.net/adibih/eXEMB/)）包装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:06:21.133

您将需要使用`scope.$apply();`

```
setTimeout(function() {
    scope.message = "Why this message is never shown?";
    scope.$apply();
}, 1000); 
```

从[文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)中：

> $apply() 用于从 Angular 框架外部执行 Angular 表达式。（例如来自浏览器 DOM 事件、setTimeout、XHR 或第三方库）。

# git - 推送 git sumbodule 以拥有远程仓库

> ID：15187507
> 
> 赞同：1
> 
> 时间：2013-03-03T15:59:57.550
> 
> 标签：git, git-submodules

我是 git 新手，所以我需要你的帮助。

我有项目，我使用`git submodule add`. 我根据需要修改了一些库。那么如何将这些库与我的远程仓库的所有更改一起推送？或者我该怎么做才能在我的远程仓库中拥有所有这些库？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:01:07.360

您应该创建自己的库分支（并且可能发送拉取请求），然后更改子模块以引用分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:40:51.303

子模块只不过是嵌套的存储库；子模块命令所做的所有事情都是帮助他们解决问题。子模块存储库没有什么特别之处，子模块只是一个普通的存储库，其内容对于包含在某个特定其他存储库中的项目来说很有趣。因此，只需将您的子模块存储库推送到 github，就像您对其他任何模块所做的一样。

# powershell - 从文件到函数内部的全局范围的点源函 数

> ID：15187510
> 
> 赞同：13
> 
> 时间：2013-03-03T16:00:06.580
> 
> 标签：powershell

我想从文件中导入外部函数，而不是将其转换为模块（我们每个函数有数百个文件，所以将它们都视为模块是多余的）。

这里是代码解释。请注意，我在 Import-Function 中有一些额外的逻辑，例如添加脚本根文件夹并检查文件是否存在并抛出特殊错误，以避免在需要这种导入的每个脚本中出现这种代码重复。

C:\存储库\Foo.ps1：

```
Function Foo {
    Write-Host 'Hello world!'
} 
```

C:\InvocationTest.ps1：

```
# Wrapper func
Function Import-Function ($Name) {
    # Checks and exception throwing are omitted
    . "C:\Repository\$name.ps1"

    # Foo function can be invoked in this scope
}

# Wrapped import
Import-Function -Name 'Foo'
Foo          # Exception: The term 'Foo' is not recognized

# Direct import
. "C:\Repository\Foo.ps1"
Foo          # 'Hello world!' 
```

有什么技巧可以将源点点到全局范围吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T16:44:56.897

您不能使脚本在父范围内运行，但您可以通过显式确定范围来在全局范围内创建函数。

像这样的东西对你有用吗？

```
# Wrapper func
Function Import-Function ($Path) {
    # Checks and exception throwing are omitted
    $script = Get-Content $Path
    $Script -replace '^function\s+((?!global[:]|local[:]|script[:]|private[:])[\w-]+)', 'function Global:$1'
    .([scriptblock]::Create($script))

} 
```

[上面的正则表达式](https://regex101.com/r/wT1vE2/1)仅针对根函数（左对齐的函数；单词左侧没有空格`function`）。为了定位所有功能，无论间距如何（包括子功能），将`$Script -replace`行更改为：

```
$Script -replace '^\s*function\s+((?!global[:]|local[:]|script[:]|private[:])[\w-]+)','function Global:$1' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-26T20:41:14.157

您可以更改点源文件中定义的函数，以便在全局范围内定义它们：

```
function Global:Get-SomeThing {
    # ...
} 
```

当您从函数中点源时，点源文件中定义的函数将是全局的。不是说这是最好的主意，只是另一种可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-07T08:47:39.253

只需点源函数：

```
. Import-Function -Name 'Foo'
Foo # Hello world! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T16:31:18.420

我现在不记得在全局范围内运行函数的方法。你可以这样做：

```
$name = "myscript"

$myimportcode= {
    # Checks and exception throwing are omitted
    . .\$name.ps1
    # Foo function can be invoked in this scope
}

Invoke-Expression -Command $myimportcode.ToString() 
```

当您将 scriptblock 转换为 string`.ToString()`时，该变量将展开。

# javascript - 将对象中的文本存储在数组中

> ID：15187511
> 
> 赞同：0
> 
> 时间：2013-03-03T16:00:06.677
> 
> 标签：javascript, jquery

我一直在尝试找到一种将 HTML DOM 对象中的文本存储在 JS 数组中的方法。

以下代码从不同的 8 个对象返回文本

```
 $('.invoice-number').text(); 
```

我想将每个特定对象的文本组织在一个数组中。

类似的东西（伪代码）：

```
foreach($('invoice-number').text() as x){
    var ary = Array();
    push(x,ary);
} 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:02:04.220

您可以使用`map`方法：

```
var arr = $('.invoice-number').map(function(){
     return $(this).text();
}).get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:02:21.093

每个和 push 都可以解决问题

```
var ary =[];

$('.invoice-number').each(function() {
   ary.push($(this).text());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T16:03:56.530

您可以使用`.each()`api 获取 .invoice-number 的每个文本并将其放入数组。

jQuery `.each`：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

```
var invoiceNumbers = [];

$('.invoice-number').each(function()
{
     invoiceNumbers.push($(this).text());
}); 
```

# asp.net-mvc - 将更改保存到数据库时如何检查现有实体？

> ID：15187515
> 
> 赞同：1
> 
> 时间：2013-03-03T16:00:24.967
> 
> 标签：asp.net-mvc, entity-framework

我正在寻找一种在创建新条目之前检查数据库中现有条目的方法。

我有一个非常简单的表`Person`，它有两个值`RowId`和`UserId`. 这些不是同一个值，`UserId`是来自外部服务的值，可能是任何东西，`RowId`是我系统中的唯一标识符。

保存和建模具有 a`Person`作为外来对象的对象时，我想使用 填充对象，`UserId`并且在保存对象时，检查是否存在具有该对象的记录，如果`UserId`存在则使用该记录而不是创建新记录。

我曾考虑过覆盖`SaveChanges()`我的方法，`DbContext`但不确定是否可以在这里完成。

有没有人对我如何解决这个问题有任何想法，或者我最好将登录实现到我的控制器中？

我想我会展示我目前正在做的事情以将其置于上下文中：

**控制器：**

```
public MvcHtmlString UpdatePanelDetails(int id, FormCollection values)
{

    Panel panel = db.Panels.Find(id);

    bool worked = TryUpdateModel(panel,values);

    if (ModelState.IsValid)
    {
        db.Entry(panel).State = System.Data.EntityState.Modified;
        db.SaveChanges();
        return new MvcHtmlString("Success");
    }
    else
    {
        return new MvcHtmlString("Failed");
    }
} 
```

在这个`Panel`模型中，我有我的`Person`对象。在我看来，我查找了一个外部人员系统，该系统填充了一个绑定到的隐藏文本框，`Person.UserId`因此当涉及到`TryUpdateModel`绑定`Person`到`Panel`但有一个`RowId`0 时。

我想要的是能够拥有一个可以填充正确的位置`RowId`（如果该人已经存在），这就是我正在考虑覆盖该`SaveChanges`方法的原因。

我现在认为这是不可能的，最好将其作为我的人员查找的一部分并有两个隐藏的文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:05:52.257

我会假设它是您表`RowId`的复合主键。这意味着尝试保存已经存在的条目会因为**唯一约束**而引发一个。您可以处理此异常并使用该值，因为它不会保存为重复条目。`UserId``Person``Exception`

 **```
try
{
    DbContext.SaveChanges();
}
catch (Exception ex)
{
    // If the unique constraint is violated you end up here.
} 
```

为了不处理`Exception`您可以执行以下操作：

```
var person = DbContext.Persons.Where(p => p.UserId == userId).SingleOrDefault();
if (person == null)
{
    DbContext.Persons.Add(new Person(userId));
    DbContext.SaveChanges();
} 
```**

# php - PDO.我如何使用这个功能？

> ID：15187517
> 
> 赞同：0
> 
> 时间：2013-03-03T16:00:36.527
> 
> 标签：php, security, pdo, implode

我是 PDO 的新手，我编写了这段代码。但这段代码不安全。

```
function update_user($update_data) {
global $pdo;

$update = array();

foreach($update_data as $field=>$data){
$update[] = '`'. $field.'` = \''. $data.'\''; 
}
$query = $pdo->prepare("UPDATE users SET " . implode(', ', $update) ."WHERE user_id = " .$_SESSION['user_id']);
$query->execute(); 
```

}

我向互联网询问此代码并变成这样：

```
function update_user($update_data) {
global $pdo;
$sql = "UPDATE users SET ".pdoSet($update_data,$values)." WHERE id = :id";
$stm = $pdo->prepare($sql);
$values["id"] = $_SESSION['user_id'];
$stm->execute($values); 
```

}

但是，我不知道我必须在函数 pdoSet 中写什么。对不起，当我的英语不太好时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:14:37.523

我在其他答案中使用了此功能，因为它存在于我链接的 PDO 标记 wiki 中。
不过好吧，我可以把它贴在这里给你。

```
function pdoSet($fields, &$values, $source = array()) {
  $set = '';
  $values = array();
  if (!$source) $source = &$_POST;
  foreach ($fields as $field) {
    if (isset($source[$field])) {
      $set.="`".str_replace("`","``",$field)."`". "=:$field, ";
      $values[$field] = $source[$field];
    }
  }
  return substr($set, 0, -2); 
} 
```

此功能旨在使插入更容易和更安全。但是，如果您不熟悉使用函数，最好从上一个答案中选择其他解决方案。

# c# - .NET PackagePart 对象 - 它包含什么？

> ID：15187518
> 
> 赞同：0
> 
> 时间：2013-03-03T16:00:40.827
> 
> 标签：c#, .net, oop, compression, zip

PackagePart 对象包括什么？它是否包含与其关联的文件的实际数据，还是仅包含 Uri、内容类型和压缩选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:26:33.490

使`PackagePart`您可以使用其中一个重载访问其包含的数据`GetStream()`，作为`Stream`（显然）。根据具体的实现，您也可以直接从`Uri`属性中获取数据，但使用打包 API 是一种更简单、更通用的方法，无需您的客户端代码了解有关包的底层后备存储的任何信息（例如，包不必是 zip 文件，它可以是 Web 服务）。

# objective-c - 格式说明符错误

> ID：15187519
> 
> 赞同：-1
> 
> 时间：2013-03-03T16:00:48.587
> 
> 标签：objective-c, string-formatting

我收到错误消息：`expected ':'`大概是因为`initWithTitle:@"You downloaded %i boards", iboard`下面的短语。你能帮我修一下吗？

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You downloaded %i boards", iboard message:@"Press Ok to continue" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:02:54.833

代替

```
initWithTitle:@"You downloaded %i boards", iboard 
```

和

```
initWithTitle:[NSString stringWithFormat:@"You downloaded %i boards", iboard] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:04:13.923

你把你的代码弄得一团糟。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You downloaded %i boards", iboard message:@"Press Ok to continue" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil]; 
```

它应该是 ：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"You downloaded %i boards", iboard]
                                                message:@"Press Ok to continue" 
                                               delegate:self 
                                      cancelButtonTitle:@"Ok" 
                                      otherButtonTitles:nil]; 
```

# java - 查询中的非法字符

> ID：15187520
> 
> 赞同：0
> 
> 时间：2013-03-03T16:01:01.013
> 
> 标签：java, android

在我的应用程序中，我可以使用以下代码在下面运行此方法：

```
fahrtenStr = getHtml("http://myServer.com/abc/getFahrtenList.cgi?limit=15"); 
```

但是如果我尝试使用这个版本来调用该方法，它不起作用：

```
String url = "http://myServer.com/abc/insert_fahrt.cgi?values="+startKM+"x"+endKM+"x"+fahrer;
getHtml(url); 
```

在那里我收到以下错误消息：

```
03-03 16:49:15.363: E/AndroidRuntime(21355): java.lang.IllegalArgumentException: Illegal character in query at index 65: http://myServer.com/abc/insert_fahrt.cgi?values=11003.4
03-03 16:49:15.363: E/AndroidRuntime(21355): x111111xSimon
03-03 16:49:15.363: E/AndroidRuntime(21355):    at java.net.URI.create(URI.java:727)
03-03 16:49:15.363: E/AndroidRuntime(21355):    at org.apache.http.client.methods.HttpGet.<init>(HttpGet.java:75)
03-03 16:49:15.363: E/AndroidRuntime(21355):    at net.x.y.fahrtenbuch.Uebersicht.getHtml(Uebersicht.java:255)
03-03 16:49:15.363: E/AndroidRuntime(21355):    at net.x.y.fahrtenbuch.Uebersicht$3$1.run(Uebersicht.java:153) 
```

我的功能：

```
 public String  getHtml(String url) throws ClientProtocolException, IOException {
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    HttpGet httpGet = new HttpGet(url);
    HttpResponse response = httpClient.execute(httpGet, localContext);
    String result = "";

    BufferedReader reader = 
        new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

    String line = null;
    while ((line = reader.readLine()) != null){
        result += line + "\n";
        // Toast.makeText(Connect.this, line.toString(), Toast.LENGTH_LONG).show();

    }
    return result;
} 
```

最后是我使用的变量：

```
//Variable values
    startKM: String="11003.4"
    endKM: String="11111"
    fahrer : "Simon" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-12T21:28:29.750

尝试这个

```
String url = "http://myServer.com/abc/insert_fahrt.cgi?values="+startKM+"x"+endKM+"x"+fahrer;
url.replaceAll(" ","%20");
getHtml(url); 
```

url 中的空格无效 您可能在 url 空间中的三个变量（startKM、endKM、fahrer）中有空格必须替换为 %20

# asp.net - 无法绑定到数据网格？

> ID：15187521
> 
> 赞同：0
> 
> 时间：2013-03-03T16:01:02.673
> 
> 标签：asp.net, datagrid

```
 <mesh:SecurePanel runat="server" ID="retentionInvoiceDue" WebMasters="true" Admins="true" style="text-align:left; font-size:small;">
            <a class="alert" ID="a1">Alerts</a>
            <br>
            <asp:Panel ID="panelToPromptRetentionInvoiceDue" runat="server" 
                CssClass="retentionLinksOnHomePage" Visible="true">
                <asp:DataGrid ID="datagridToPromptRetentionInvoiceDue" runat="server" 
                    AutoGenerateColumns="false" GridLines="None" ShowHeader="false">
                    <Columns>
                        <asp:TemplateColumn>
                            <ItemTemplate>
                                <span>Site
                                    <asp:LinkButton ID="promptRententionInvoiceLink" CommandArgument='<%# Bind ("id") %>' OnCommand="getSessionVariableForWorkSiteID" runat="server">
                                        <asp:Label id="labelBindfromHomeToInvoice" runat="server" Text="<%# Bind('Site_Name') %>"/>
                                    </asp:LinkButton>retention due for invoicing 
                                </span>
                            </ItemTemplate>
                        </asp:TemplateColumn>
                    </Columns>
                </asp:DataGrid>
             </asp:Panel>
    </mesh:SecurePanel> 
```

在cs文件中我有页面加载：

```
 Context db = new Context();

        var allWorkSites =
            (from worksites in db.Work_Sites
             select worksites).Distinct().ToList();

        List<Object> chosenInvoicesForRetention = new List<Object>();

        foreach (Work_Site worksite in allWorkSites)
        {
            if (!worksite.Invoicing_Complete)
            {
                Invoice lastInvoice = worksite.Invoices.OrderBy(w => w.id).LastOrDefault();

                if (lastInvoice != null)
                {
                    if (lastInvoice.Invoice_Date < DateTime.Now.AddMonths(0 - worksite.Number_of_Months))
                    {
                        chosenInvoicesForRetention.Add(worksite);
                    }
                }

            }
        }

        if (chosenInvoicesForRetention.Count == 0)
        {
            panelToPromptRetentionInvoiceDue.Visible = false;
        }

        else
        {
            datagridToPromptRetentionInvoiceDue.DataSource = chosenInvoicesForRetention;
            datagridToPromptRetentionInvoiceDue.DataBind();
        }

    } 
```

* * *

为什么我收到错误：panelToPromptRetentionInvoiceDue & datagridToPromptRetentionInvoiceDue 不存在？

* * *

编辑：我应该提到，这段代码在我的项目的不同页面上工作正常，我只是将它复制过来，因为我想再次使用它，但也更改它正在链接的表......为什么它会从一个页面工作而不是另一个？

还删除了安全面板，但仍然无法正常工作

有人有想法么？将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:07:46.707

我假设您需要使用`FindControl`来引用`SecurePanel`.

尝试将以下内容放在代码隐藏中引用它们的位置之上。

```
var datagridToPromptRetentionInvoiceDue = 
    (DataGrid)retentionInvoiceDue.FindControl("datagridToPromptRetentionInvoiceDue");

var panelToPromptRetentionInvoiceDue =
    (Panel)retentionInvoiceDue.FindControl("panelToPromptRetentionInvoiceDue"); 
```

# html - 将 facebook、twitter 和 Google+ 共享按钮放在 html 中的最佳方式？

> ID：15187524
> 
> 赞同：4
> 
> 时间：2013-03-03T16:01:17.707
> 
> 标签：html, share, social-networking

我在谷歌搜索，我看到在 html 中放置共享按钮的无限方法，但我更愿意在这里询问最好的方法。实现它的最简单的方法和最简单的方法。

我只想将此添加到我的网站：

![在此处输入图像描述](../Images/551dca634eed9ef558a9ea4a6806f949.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:10:21.527

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-513375c7395449c1"></script>
<!-- AddThis Button END --> 
```

[您可以在此处对其进行自定义：添加此](https://www.addthis.com/get/sharing#.UTN1vDAvmf8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:19:19.263

Facebook 已经从他们的插件列表中删除了“分享”按钮。但是，旧代码确实有效。或者考虑使用“发送”按钮。

您可以尝试[addthis](http://www.addthis.com/)并免费获得分析。

[Sharethis](http://sharethis.com/)也是一个不错的选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T16:08:26.833

对于过多的社交共享选项，我认为最好使用现有的库，它可以为您完成所有工作。一个例子是[AddThis](http://www.addthis.com)平台

# ruby - 如何将序列化的数组字符串转换为数组？

> ID：15187528
> 
> 赞同：1
> 
> 时间：2013-03-03T16:02:04.380
> 
> 标签：ruby

我有这个字符串：

```
temp = "["minutes", "hours"]" 
```

如果我这样做：

```
temp[1..-2].split(", ") 
```

我得到一个由 2 个元素组成的数组，如下所示：

```
[0] = ""minutes""
[1] = ""hours"" 
```

如何避免出现双引号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:06:14.697

使用 JSON 解析器：

```
JSON.parse(your_array) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:22:11.160

多一个：

```
the_string.scan(/\"(\w+)\"/).flatten
 => ["minutes", "hours"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T16:14:01.067

做就是了：

```
temp.gsub("\"", "")[1..-2].split(", ") 
```

或者，一旦您的数组在每个元素上都带有双引号：

```
temp.map{|e| e.squeeze("̣\"")} 
```

# c++ - STL 容器是否有任何标准布局保证？

> ID：15187536
> 
> 赞同：2
> 
> 时间：2013-03-03T16:02:23.953
> 
> 标签：c++, stl, c++11, standard-layout

```
struct A {
   // ... some methods ...
   std::vector<int> foo;
   // ... more data members ...
}; 
```

使用 g++4.7 和 libstdc++ 我得到`std::is_standard_layout<A>::value == true`.
但是其他编译器或标准库会发生什么？
是否有任何保证（至少可以肯定？）STL 容器不会破坏标准布局？

背景：

```
struct B : A { // still standard-layout
   // ... more methods (but no new variables!)
   void bar();
}; 
```

这允许使用`static_cast<B &>(a).bar()`even for `A a;`。（我不是说这是好的设计！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:30:01.523

**不**，没有任何保证。

C++11 标准明确提到了类何时*必须*具有标准布局（例如`mutex`类、`atomic_flag`类等）。

整个第 23 条（容器库）中没有出现“布局”一词。我相信这足以假设没有提供任何保证。

# css - htacces 在移动访问时重写 css 文件

> ID：15187539
> 
> 赞同：-1
> 
> 时间：2013-03-03T16:02:34.663
> 
> 标签：css, .htaccess, mobile, rewrite, rule

当访问者来自他的移动设备时，我正在尝试使用**htaccess更改 css 文件。**最初效果很好，但是当我添加“NO WWW”规则时，它就停止了工作。这是我的htaccess文件，希望你能帮助我，问候。

```
RewriteEngine On
RewriteCond %{HTTP_ACCEPT} "text\/vnd\.wap\.wml|application\/vnd\.wap\.xhtml\+xml" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|netfront|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sony|symbian|nokia|samsung|mobile|windows ce|epoc|opera mini|nitro|j2me|midp-|cldc-|netfront|mot|up\.browser|up\.link|audiovox" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "blackberry|ericsson,|panasonic|philips|sanyo|sharp|sie-|portalmmm|blazer|avantgo|danger|palm|series60|palmsource|pocketpc" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "smartphone|rover|ipaq|au-mic,|alcatel|ericy|vodafone\/|wap1\.|wap2\.|iPhone|android" [NC]
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^style\.css$ mobile.css [L]

RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} !^mysite.com$ [NC]
RewriteRule ^(.*)$ http://mysite.com/$1 [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html
RewriteCond %{HTTP_REFERER} !^http://mysite.com/.*$      [NC]
RewriteCond %{HTTP_REFERER} !^http://mysite.com$      [NC]
RewriteRule .*\.(jpg|jpeg|gif|png|bmp)$ - [F,NC]

# compress all text and html:
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/javascript text/css
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4.0[678] no-gzip
BrowserMatch bMSIE !no-gzip !gzip-only-text/html

Header unset ETag
FileETag None
# 1 año
<FilesMatch "\.(ico|pdf|flv)$">
Header set Cache-Control "max-age=29030400, public"
ExpiresDefault "access plus 1 years"
</FilesMatch>

# 2 meses
<FilesMatch "\.(jpg|jpeg|png|gif|swf)$">
Header set Cache-Control "max-age=4838400, public"
ExpiresDefault "access plus 2 months"
</FilesMatch>

# 1 semana
<FilesMatch "\.(xml|txt|css|js)$">
Header set Cache-Control "max-age=604800, public"
ExpiresDefault "access plus 1 weeks"
</FilesMatch>

# 30 minutos
<FilesMatch "\.(html|htm|php)$">
Header set Cache-Control "max-age=1800, private, proxy-revalidate, no-transform"
ExpiresDefault "access plus 30 minutes"
</FilesMatch>

ErrorDocument 404 /404.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:17:04.333

我不会检查您的 RewriteCond 指令。

这两个指令相互矛盾

```
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^style\.css$ mobile.css [L] 
```

URL 路径不能同时为空`style.css`。我会忽略这个`RewriteCond`，`RewriteRule`独自一人去

```
RewriteRule ^/?style\.css$ mobile.css [L] 
```

当然，和你的其他人一起`RewriteCond`。

# json - OpenRefine 中的单元格到列

> ID：15187543
> 
> 赞同：1
> 
> 时间：2013-03-03T16:03:16.803
> 
> 标签：json, csv, openrefine

我有一个要转换为 JSON 的 CSV 数据集。在转换之前，我需要重新格式化数据以获得正确的多维结构。数据包含瑞典上次选举的结果，并按县（“Kommun”）划分。有291个县，9个党。我想：

*   每县一排，
*   每一方一列，每一行显示每一方的结果。

这将产生 10 列（县 + 政党）和 291 行（每个县 1 个）。

如何使用 Open Refine/Google Refine 实现这一目标？我当前的数据如下图所示。

![打开优化打印屏幕](../Images/a7949eb1d7a7de7e0e112aeade220c7c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:42:24.390

`Transpose -> Columnize by key/value`应该做的伎俩。

# java - apache HTTPClient 的 PostMethod 错误

> ID：15187551
> 
> 赞同：1
> 
> 时间：2013-03-03T16:03:57.633
> 
> 标签：java, eclipse, httpclient

我正在尝试`HTTPClient`在java中实现a。代码如下：

```
try {
    // Main page
    // Search by State, City
    HttpClient client = new HttpClient();
    PostMethod post = new PostMethod("http://www.cholainsurance.com/nwhosp/"); 
```

在 post 方法中，我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/codec/DecoderException
    at org.apache.commons.httpclient.HttpMethodBase.<init>(HttpMethodBase.java:220)
    at org.apache.commons.httpclient.methods.ExpectContinueMethod.<init>(ExpectContinueMethod.java:93)
    at org.apache.commons.httpclient.methods.EntityEnclosingMethod.<init>(EntityEnclosingMethod.java:119)
    at org.apache.commons.httpclient.methods.PostMethod.<init>(PostMethod.java:106)
    at com.parser.CHOLAHospitals.getHospitals(CHOLAHospitals.java:37)
    at com.parser.MYMain.main(MYMain.java:12)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.codec.DecoderException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

这可能很简单。有人可以帮忙吗。

# ruby - 如何关闭 ruby 瘦服务器 HTTP keep-alive？

> ID：15187552
> 
> 赞同：1
> 
> 时间：2013-03-03T16:04:05.123
> 
> 标签：ruby, thin, keep-alive

目前，我正在以编程方式在我的内部生成 HTTP 服务器。

```
srv =   Thin::Server.start('0.0.0.0', 3000, app) 
```

而且我不知道应该在哪里更改保持活动时间设置。因为瘦服务器不会马上死掉，所以在调试和开发应用程序时很困扰我。我将打开keep-alive进行生产，但我仍然想控制持续时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:11:44.650

如果您不希望它等待待处理的请求得到处理，那么只需调用`stop!`：

```
if RAKE_ENV=='production'
  srv.stop
else
  srv.stop!
end 
```

[薄源](https://github.com/macournoyer/thin/blob/5a1e14a082f75ee56167d95e982d35e0fc8b62bf/lib/thin/server.rb#L184)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:16:46.233

```
 #       Thin::Server.stop! doesn't work immediately if there's live keep-alive connection.
    #       SIGINT doesn't work.
    #       Only SIGKILL works.
    #       But `abort` is a lot quicker way.
    #       Overridden to abort.

    trap("INT") { puts " Force quit by raising intentional crash!" ;abort() } 
```

# prolog - prolog 从事实列表中找到最大值

> ID：15187555
> 
> 赞同：1
> 
> 时间：2013-03-03T16:04:20.537
> 
> 标签：prolog

嗨，对不起，我真的是 Prolog 的新手。假设我有一个事实列表，说 6 个事实，第一列数字代表个人 ID，第二列代表一个人的获胜次数。如果我想找到赢得最多的人，我会怎么做？

```
wins(1, 22).
wins(2, 24).
wins(3, 23).
wins(4, 20).
wins(5, 21).
wins(6, 19). 
```

类似的东西？大声笑说实话，我真的不知道我在做什么

```
X = wins(_, Xs) 
Y = wins(_, Ys)
most wins(X) :- Xs > Ys 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:34:54.773

获取该信息的方法不止一种。

```
most_wins(Id) :-
    wins(Id, W), \+ (wins(_, W1), W1 > W). 
```

或者，如果您的 Prolog 有库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)）：-

```
most_wins(Id) :-
    aggregate(max(W, Id), wins(Id, W), max(_, Id)). 
```

或者你可以使用[setof](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.30%27,swi%28%27/doc/Manual/allsolutions.html%27%29%29) /3

```
most_wins(Id) :-
    setof(N-Id, W^(wins(Id, W), N is -W), [_-Id|_]). 
```

存在明显的速度/内存权衡：第一种方式是内存效率 O(1)，但时间复杂度为 O(N^2)，因为它扫描了 2 次候选集。第二个和第三个（我认为）实际上是等效的，在 SWI-prolog 中的当前实现下，都建立候选者列表（然后在空间中是 O(N)），然后及时选择元素 - O(N log N)。

如果候选人是*事实*，就选择第一个。

*编辑*另一种方式，从效率的角度来看更好，利用不可回溯的分配。只需扫描候选人，随时随地保持最大值。Plain Prolog 将需要 assert/retract 来执行这样的任务，这使得它相当低效。但是许多 Prologs 有更有效的方法来存储“全局”变量......

# php - Ajax 和 Jquery - 成功

> ID：15187556
> 
> 赞同：2
> 
> 时间：2013-03-03T16:04:21.653
> 
> 标签：php, jquery, ajax

我正在使用 Ajax 调用 php 站点，但我想做一些“成功”和“错误”的事情。

到目前为止，这是我的 js：

```
$("#votePositive").click(function(){
            var idEntrada = $('.entry').attr('id');
            var url = "{{ path('moderar_entrada_votacion') }}";
            var eleccion=1;
            $.ajax({
                type: "POST",
                url: url, 
                data: {
                   idEntrada: idEntrada,
                   eleccion: eleccion
                },error: function(){alert("eee")}, success: function(){alert("bbb")}
            });  
        }); 
```

所以这是我的php代码（只是一个返回，只是想尝试连接是否有效）

```
return true 
```

但我的网站弹出警报“eee”。

我试图：

```
return false 
```

但同样的事情正在发生，eee 警报即将出现。

如果我只是从 php 文件中删除“return”语句，它会显示“bbb”警报。

我该如何处理这些退货？我如何告诉 Ajax 一切正常或不正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:09:02.857

`true`这与返回或`false`来自您的 PHP无关。相反，它与返回的 HTTP 响应代码和内容有关。例如，如果您的 PHP 只是：

```
echo 'Hello world' 
```

`success`将被调用。尽管您当然希望返回（可能是 JSON 表示）您的实际数据集。

# wpf - 按钮堆栈面板中的文本块文本未显示

> ID：15187560
> 
> 赞同：0
> 
> 时间：2013-03-03T16:04:33.573
> 
> 标签：wpf, button, text, textblock, stackpanel

我有以下代码：

```
 <Button Width="30" Name="RestoreButton" Height="30" Focusable="False" VerticalAlignment="Top" HorizontalAlignment="Right" FontSize="11" Background="Transparent" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" BorderThickness="0" BorderBrush="Transparent" Foreground="Transparent" Margin="0,0,30,0">
            <StackPanel>
                <Image Source="Images/maximizewindow.png" RenderTransformOrigin="1.692,0.564" />
                <TextBlock Text="Teljes méret" Foreground="Gray" />
            </StackPanel>
        </Button> 
```

我创建了一个带有图像背景的按钮。但是，如果我移动或单击按钮，它不会显示文本块的文本。为什么？

# android - Android - 上传到服务器时的图像质量

> ID：15187565
> 
> 赞同：3
> 
> 时间：2013-03-03T16:04:44.130
> 
> 标签：android, image, upload, resolution

经过数小时的调查和梳理各种教程和技巧，我已经没有选择余地，决定发布我的问题。

我看到的是，当用户从照片库中选择一个图像并将该图像上传到我的服务器时，图像的大小会大大减小。

我记得在某处看到提示，从图库中选择时的标准行为是缩略图而不是完整图像。真的吗？这是我的相关代码：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT, null);
intent.setType("image/*");
intent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());             
startActivityForResult(intent, PICK_FROM_FILE); 
```

然后，我检索我创建的文件并执行此操作（这是我失去质量的地方吗？？？）：

```
Bitmap bitmap = BitmapFactory.decodeStream(new FileInputStream(tempFile1)); 
```

然后，这是我将其转换为 ByteArray 的逻辑：

```
Bitmap bmp = BitmapFactory.decodeFile(fileString);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte [] ba = stream.toByteArray(); 
```

为了更进一步，我希望能够裁剪图像并保持尺寸与原始尺寸成比例。例如，如果图像的原始尺寸是 2000x2000，并且用户将图像垂直裁剪成两半，我希望最终结果是 1000x1000。任何见解或提示将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T04:55:21.367

尝试使用

**

> bmp.compress(Bitmap.CompressFormat.PNG, 100, 流)

**;

另请阅读下面给出的链接以了解差异。 [PNG vs. GIF vs. JPEG vs. SVG - 什么时候最好使用？](https://stackoverflow.com/questions/2336522/png-vs-gif-vs-jpeg-when-best-to-use/7752936#7752936)

# django - 如何在 TemplateView 中放置自定义装饰器

> ID：15187567
> 
> 赞同：2
> 
> 时间：2013-03-03T16:04:49.203
> 
> 标签：django, django-class-based-views

我开始将基于函数的视图转换为基于类的视图。这是我第一次使用基于类的视图，所以我真的不知道正确的方法。

FBV的代码：

```
@auth_check
def thank_you(request):
    return render(request, 'thank_you.html') 
```

CBV的代码：

```
class ThankYouView(TemplateView):
    template_name = "thank_you.html" 
```

我会把 auth_check 装饰器放在哪里？我试图把它放在班级的顶部，但我得到了一个错误。然后我在类中创建 def 并将装饰器放在它的顶部，但仍然出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:29:24.887

[https://docs.djangoproject.com/en/dev/topics/class-based-views/intro/#decorating-the-class](https://docs.djangoproject.com/en/dev/topics/class-based-views/intro/#decorating-the-class)

使用基于类的视图，您可以装饰`dispatch`方法。

```
from django.utils.decorators import method_decorator

class ThankYouView(TemplateView):
    template_name = "thank_you.html"

    @method_decorator(auth_check)
    def dispatch(self, *args, **kwargs):
        return super(ThankYouView, self).dispatch(*args, **kwargs) 
```

# javascript - 动态添加/删除表单输入元素

> ID：15187573
> 
> 赞同：0
> 
> 时间：2013-03-03T16:05:48.420
> 
> 标签：javascript, jquery

我正在尝试使用以下代码动态添加/删除表单元素：

```
<form method="post" action="" id="form-step2" class="form-vertical">
   <fieldset>
      <legend>Inputs</legend>
      <div id="extender"></div>
      <p><a id="add_btn" href="#">Add</a></p>
    </fieldset>
</form>

$(function () {

//set a counter
var i = $('#form-step2 :input').length + 1;

//add input
$('a#add_btn').click(function () {
    $('<p><input type="text" name="items[]" id="' + i + '" value="' + i + '" />' +
        '<a class="dynamic-link" href="#step2">Remove</a></p>').fadeIn("slow").appendTo('#extender');
    i++;
    return false;
});

//fadeout selected item and remove
$(".dynamic-link").bind('click', function () {
    $(this).parent().fadeOut(300, function () {
        $(this).empty();
        return false;
    });
  });

}); 
```

输入字段已添加但无法删除。我究竟做错了什么？ [http://jsfiddle.net/VTqhJ/](http://jsfiddle.net/VTqhJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:24:53.390

问题是在您将事件处理程序附加到它们时，“删除”链接不存在。您有两种选择来解决此问题。您可以在添加到 DOM 之后将事件处理程序附加到每个“删除”链接，或者您可以`.on`使用“选择器”参数。我从你的 jsfiddle 看到你试过这个，但你没有做对。

它应该是：

```
$("#form-step2").on('click', '.dynamic-link', function () {
    $(this).parent().fadeOut(300, function () {
        $(this).empty();
        return false;
    });
}); 
```

您需要调用`.on()`一个元素，该元素是所有“删除”链接的祖先（并且在`.on()`调用时存在）。然后设置“选择器”参数以识别“删除”链接。

`.on()`调用函数 on总是安全的`$(document.body)`，但最好使用更接近的祖先。我选择了表单元素。

[jsfiddle 上的演示](http://jsfiddle.net/vWPJf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:27:37.337

jsFiddle 的链接：http: [//jsfiddle.net/VTqhJ/5/](http://jsfiddle.net/VTqhJ/5/)

```
$(function () {

        //set a counter
        var i = $('.dynamic-input#form-step2').length + 1;
        alert(i);
        //add input
        $('a#add').click(function () {
            $('<p><input type="text" class="dynamic-input" name="items[]" id="' + i + '" value="' + i + '" />' +
                '<a href="#step2">Remove</a></p>').fadeIn("slow").appendTo('#extender');
            i++;

            $("a:contains('Remove')").click(function () {
              $(this).parent().css("display","none");
            });

            return false;
        });

        $("a:contains('Remove')").click(function () {
            alert('hi');
        });

        //fadeout selected item and remove
        $("#form-step2.dynamic-input").on('click', 'a', function () {
            $(this).parent().fadeOut(300, function () {
                $(this).empty();
                return false;
            });
        });

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:13:25.693

您也可以使用[它](http://blogaddition.com/2013/01/dynamically-add-remove-text-box-using-jquery/)。它就像一个魅力！

但是您只能添加有限的文本框。但我发现验证这些字段很困难，所以我使用列表框方法输入值。

# java - Java regexp OR 太慢了

> ID：15187583
> 
> 赞同：2
> 
> 时间：2013-03-03T16:06:25.723
> 
> 标签：java, regex, performance

为什么模式

```
[0123]123456|98765 
```

**在 Java 中执行[0123]123456**和**98765**慢两倍？因此，单独搜索它们比使用 OR 执行更快。有人有解释吗？

**UPD**

请参阅带有结果的测试示例： [https ://gist.github.com/cy6erGn0m/5077720](https://gist.github.com/cy6erGn0m/5077720)

**UPD2**

我发现原因在 java.util.regex 内部。以下测试清楚地表明：[https ://gist.github.com/cy6erGn0m/5083426](https://gist.github.com/cy6erGn0m/5083426)

如您所见，Matcher 对源字符序列发出了更多请求。所以第一个模式需要的请求比两个单独的模式多 2 倍。

多行和不区分大小写无关紧要。或运营商影响复杂性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:40:14.990

好的。看来我找到了一半的答案。

当我们只有像 123456 这样的模式时，正则表达式引擎使用 Boyer-Moore 字符串匹配算法。但是如果你有 OR 那么它就不会使用它而只是比较每个字符。

由于其性质，Boyer-Moore 算法可能效率更高，因此这就是第二种方法更快的原因。

例如，如果我输入字符串“11223344”和模式“123456”，那么根据 Boyer-Moore 实现，唯一应该检查的字符是第 5 位的“3”。这比尝试针对每个字符测试模式要有效得多。

# php - 新手尝试显示 MySQL 数据

> ID：15187584
> 
> 赞同：1
> 
> 时间：2013-03-03T16:06:29.480
> 
> 标签：php, mysql

我是 PHP 新手，所以请耐心等待。:)

我正在尝试编辑一个编辑用户个人资料的代码块。标题是一般的“编辑”标题，但我想将其换掉并显示正在编辑个人资料的人的名字和姓氏。

PHP的块：

```
 $modTitle = MSG_EDIT;
        $modHeader = '<a href="index.php?module=administration">'. MSG_ADMINISTRATION . '</a> &gt; <strong>' . MSG_EDIT . '</strong>';

        $SQL = sprintf(SQL_GET_USER, $id);
        $RS =& new DBRecordset();
        $RS->Open($SQL, $this->DB);
        if (!$RS->EOF()) {
            $tmpl['txtUsername'] = htmlspecialchars($RS->Field('Username'));
            $tmpl['txtFirstName'] = htmlspecialchars($RS->Field('FirstName'));
            $tmpl['txtLastName'] = htmlspecialchars($RS->Field('LastName'));
            $tmpl['txtAddress1'] = htmlspecialchars($RS->Field('Address1'));
            $tmpl['txtAddress2'] = htmlspecialchars($RS->Field('Address2'));
            $tmpl['txtCity'] = htmlspecialchars($RS->Field('City'));
            $tmpl['txtState'] = htmlspecialchars($RS->Field('State'));
            $tmpl['txtCountry'] = htmlspecialchars($RS->Field('Country'));
            $tmpl['txtPostcode'] = htmlspecialchars($RS->Field('Postcode'));
            $tmpl['txtPhone1'] = htmlspecialchars($RS->Field('Phone1'));
            $tmpl['txtPhone2'] = htmlspecialchars($RS->Field('Phone2'));
            $tmpl['txtPhone3'] = htmlspecialchars($RS->Field('Phone3'));
            $tmpl['txtEmail'] = htmlspecialchars($RS->Field('EmailAddress'));
            $tmpl['Userlist'] = '';
        }
        $RS->Close();
        unset($RS);
    }

    $this->setHeader($modTitle);
    $this->setModule($modHeader);
    $this->setTemplate('user_form', $tmpl);
    $this->Render();
// }}}
} 
```

$modTitle 是显示的通用标题，所有 MSG_ 引用都从外部文件中提取静态文本。

如何更改 $modTitle 以显示全名？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:09:49.097

更改`if (!$RS->EOF()) {`块（在`}`右括号之前），添加以下行：

```
$modTitle = $tmpl['txtFirstName'].' '.$tmpl['txtLastName']; 
```

# c++ - 从另一个函数加入线程

> ID：15187589
> 
> 赞同：2
> 
> 时间：2013-03-03T16:06:54.017
> 
> 标签：c++, pthreads

我正在尝试创建一个以非阻塞方式工作的线程，调用者可以选择是否等待线程。

```
class A {
public:
  void run();
  void wait();
  pthread_t worker;
}; 
```

该`run()`函数创建一个线程并立即返回。如果用户需要等待，他可以调用`wait()`。定义看起来像

```
void A::Run () {
  //create worker thread
  pthread_attr_t attr;
  pthread_attr_init(&attr);
  pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
  FATALIF(pthread_create(&worker, &attr, work, param), "Error creating worker thread.");
  pthread_attr_destroy(&attr);
}

void A::WaitUntilDone () {
  FATALIF(pthread_join (worker, NULL), "joining threads failed.");
} 
```

但是，当我打电话`WaitUntilDone()`时，来电者根本没有被阻止。然后我尝试将`join`from移动`WaitUntilDone()`到`Run()`，它的工作原理：

```
void A::Run () {
  //create worker thread
  pthread_attr_t attr;
  pthread_attr_init(&attr);
  pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
  FATALIF(pthread_create(&worker, &attr, work, param), "Error creating worker thread.");
  FATALIF(pthread_join (worker, NULL), "joining threads failed.");
  pthread_attr_destroy(&attr);
}

void A::WaitUntilDone () {
  // do not wait here
  // FATALIF(pthread_join (worker, NULL), "joining threads failed.");
} 
```

在`pthread_join`我发现的所有示例中，`pthread_join`调用都紧跟在 之后`pthread_create`，因此在我看来，我们无法将这些函数分开。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T08:46:44.473

新创建的线程可能在您调用函数之前返回`pthread_join`。因此，它根本不会阻塞，但是，它可以正常工作。

# html - 包含文本时标签位置不同

> ID：15187592
> 
> 赞同：2
> 
> 时间：2013-03-03T16:07:33.223
> 
> 标签：html, css

 我有一个奇怪的问题，我无法弄清楚。我有一个 div，其中包含定位不同的锚标记，具体取决于它们是否有文本。

我想做的是有一个简单的条形图，条形图内显示数字，数字在底部对齐。在下面的示例中，顶部图表的条形与底部正确对齐，但在底部图表中，只要我添加数字，它就会翻转到顶部。任何想法发生了什么以及我如何解决（或更好的方法）？ 

[http://jsfiddle.net/dKM3T/2/](http://jsfiddle.net/dKM3T/2/)

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <style type="text/css">
            .graph {
                width: 650px;
            }
            .graph .bar {
                width: 20px;
                margin: 1px;
                display: inline-block;
                background: #666;
                color: #fff;
                font-size: 10px;
                text-align: center;
                text-decoration: none;
            }
        </style>
    </head>
    <body>
        <div class="graph">
            <a href="#" class="bar" style="height:40px" data-index="1"></a>
            <a href="#" class="bar" style="height:20px" data-index="2"></a>
            <a href="#" class="bar" style="height:30px" data-index="3"></a>
            <a href="#" class="bar" style="height:20px" data-index="4"></a>
            <a href="#" class="bar" style="height:12px" data-index="5"></a>
            <a href="#" class="bar" style="height:32px" data-index="6"></a>
            <a href="#" class="bar" style="height:34px" data-index="7"></a>
            <a href="#" class="bar" style="height:12px" data-index="8"></a>
            <a href="#" class="bar" style="height:40px" data-index="9"></a>
            <a href="#" class="bar" style="height:20px" data-index="10"></a>
        </div>
        <div class="graph">
            <a href="#" class="bar" style="height:40px" data-index="1">40</a>
            <a href="#" class="bar" style="height:20px" data-index="2">20</a>
            <a href="#" class="bar" style="height:30px" data-index="3">30</a>
            <a href="#" class="bar" style="height:20px" data-index="4">20</a>
            <a href="#" class="bar" style="height:12px" data-index="5">12</a>
            <a href="#" class="bar" style="height:32px" data-index="6">32</a>
            <a href="#" class="bar" style="height:34px" data-index="7">34</a>
            <a href="#" class="bar" style="height:12px" data-index="8">12</a>
            <a href="#" class="bar" style="height:40px" data-index="9">40</a>
            <a href="#" class="bar" style="height:20px" data-index="10">20</a>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:15:33.793

试试这个：

```
<style type="text/css">
        .graph {
            width: 650px;
        }
        .graph .bar {
            vertical-align: bottom;
            width: 20px;
            margin: 1px;
            display: inline-block;
            background: #666;
            color: #fff;
            font-size: 10px;
            text-align: center;
            text-decoration: none;
        }
    </style> 
```

数字仍显示在图表顶部，但图表不再翻转。如果您希望数字显示在底部，您可能需要采用与此处不同的方法。

# sqlite - 玩与 sqlite/mysql 兼容的框架 H2 db 进化？

> ID：15187594
> 
> 赞同：3
> 
> 时间：2013-03-03T16:07:44.437
> 
> 标签：sqlite, playframework

到目前为止，我一直在使用 play framework 的默认 SQL 生成与内存 db 中的 H2。是否有任何其他数据库与这些 SQL 脚本完全兼容？我喜欢自动生成 SQL，因为我仍处于开发阶段，但我想与它一起使用持久数据库。我有哪些选择？

我简单地尝试过使用 sqlite，但是有一些不兼容的地方，比如 AUTOINCREMENT、约束等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:57:05.317

有两个不错的选择，选择属于您：

1.  对于开发，最好选择与您在生产中使用的数据库引擎相同的数据库引擎，MySQL 或 Postgres 是非常典型的选择，因为它们在许多环境中都可用并且是开源的。Play 将为他们两个生成正确的 DDL。你也可以...
2.  使用存储在文件中而不是内存中的 H2 并使用 TCP 访问它作为示例，在这种情况下它将是持久的，并且您将保持使用 H2 控制台访问 DB 的可能性。

在这种情况下，示例连接 URL 是：（您的主目录*在哪里`~`，所以它会将`MainDB.h2.db`文件保存在那里*）

```
db.default.url="jdbc:h2:tcp://localhost/~/MainDB" 
```

您需要为您的平台[下载 H2 包并](http://www.h2database.com/html/download.html)[按照文档中的说明](http://www.h2database.com/html/tutorial.html#using_server)`server mode`运行它。您会在目录中找到/ ，或者您可以使用命令行来完成。`scripts``batch files``bin`

它还包含 java 包装器，因此您可以在 Windows 中将 H2 服务器作为服务运行，以确保它始终在启动时启动。

最后，在成功开发阶段之后，您只需将 DB 文件复制到目标机器并在生产中使用它，如果您从模式切换`TCP`到`Embedded`模式，您将获得著名的 H2 性能提升，也将避免运行服务器的需要。

# database - 文本字段搜索钛不起作用

> ID：15187595
> 
> 赞同：2
> 
> 时间：2013-03-03T16:07:46.507
> 
> 标签：database, search, tableview, textfield

在发布前的最后阶段使用钛 sdk 3.0.0 和 Im 编写应用程序，我无法让我的文本字段搜索工作。这是我的代码：

```
var customSearchBar = Ti.UI.createView({
                    height:44,
                    top:0,
                    width:320,
                    backgroundColor:'black'
                    });

var customSearchField = Ti.UI.createTextField({
                    width:220,
                    hintText:'search',
                    autocorrect:false,
                    height:28,
                    top:8,
                    textAlign:'center',
                    clearOnEdit:true,
                    borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED
                });

customSearchBar.add(customSearchField);

win.add(customSearchBar);

customSearchField.addEventListener("change", function(e) {

    var db = Ti.Database.open("Mydb");
    var rows = db.execute('SELECT rowid,Name FROM Mydb WHERE Name LIKE "%'+customSearchField.value+'%"');

           while (rows.isValidRow()){

               var row1 = Ti.UI.createTableViewRow({
                      hasChild : true,
                      title: rows.fieldByName('Name'),
                      color:'#000',
                      backgroundImage: 'background.png',
                      rowid: rows.fieldByName('rowid')
                  });

                  data.push(row1);
                    rows.next();
          }
            rows.close();
            db.close();
      });

var tableview = Titanium.UI.createTableView({
      data : data,
      top: '45dp',
      backgroundColor : 'rgba(255,255,255,0.2)',
      style: 1,
});

win.add(tableview);
tableview.add(row1); 
```

# jdbc - callablestatment 输出使用 struts2 生成无效的列索引

> ID：15187599
> 
> 赞同：1
> 
> 时间：2013-03-03T16:08:17.273
> 
> 标签：jdbc, oracle11g

我很想看看我使用以下代码将多少用户插入到我的 oracle 11g 数据库中（现在无法查看表格，所以我正在这样做）。任何人都知道为什么我会从中得到一个无效的列索引。堆栈跟踪位于代码之后：

```
 String storedFunc = "{call :1 := call ENTITY.TABLE_NAME.getUserCount()}";
  CallableStatement cstmt2 = conn.prepareCall(storedFunc);
  // register the output parameter
  cstmt2.registerOutParameter(1, Types.NUMERIC);              
  Integer count = (Integer) cstmt2.getInt(1);   //line 68
  cstmt2.execute();              
  cstmt2.close(); 
```

和堆栈跟踪：

```
java.sql.SQLException: Invalid column index     at oracle.jdbc.driver.OracleCallableStatement.getInt(OracleCallableStatement.java:1476)     at oracle.jdbc.driver.OracleCallableStatementWrapper.getInt(OracleCallableStatementWrapper.java:783)    at com.company.tool.server.LoginAction.execute(LoginAction.java:68)     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)    at java.lang.reflect.Method.invoke(Method.java:597)     at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:446)   at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:285)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)     at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)  at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)  at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)   at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)  at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:73)  at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:91)    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)  at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)  at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)   at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)  at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)     at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)  at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)     at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)     at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:544)  at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)  at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)  at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)   at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)  at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:33:27.657

您使用了错误的调用转义语法。

正确的语法是：

```
String storedFunc = "{? = call ENTITY.TABLE_NAME.getUserCount()}"; 
```

另请参阅：[函数调用语法](http://docs.oracle.com/cd/B28359_01/java.111/b31224/apxref.htm#autoId10)

# android - 如何设置按钮之间的距离？

> ID：15187600
> 
> 赞同：1
> 
> 时间：2013-03-03T16:08:18.010
> 
> 标签：android, android-layout, android-xml

我的 xml 文件有问题。我有两个自定义大小的按钮。我想将按钮的大小调整为与屏幕相关的大小。

在图 1 中，您可以看到它们应该有多大。

![在此处输入图像描述](../Images/5533142e3f5367ea9495337ef1cfdd15.png)

在图 2 中，您可以看到它们太远且太小。

![在此处输入图像描述](../Images/bff93abb06b0fcc60b1bd39d3008b8d2.png)

我知道我没有设置正确。（主要是 android:layout_width） 但是如何设置呢？

这是我的xml代码：

```
<Button
        android:id="@+id/button2"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="#99000099" />

    <Button
        android:id="@+id/button1"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="#99990000" /> 
```

谢谢您的回复！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:12:29.213

如果您尝试使用 a`LinearLayout`来包裹按钮，您可以将其放在底部，然后将按钮的权重设置为每个 1，这意味着它们将占据屏幕的一半。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true">
<Button
    android:id="@+id/button1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="#99000099" />

<Button
    android:id="@+id/button2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="#99990000" />
</LinearLayout> 
```

请注意，您可以更改按钮上的边距，以便将它们分开并远离边缘，就像您的第一张图片一样。

# facebook-graph-api - Facebook 完全权限 AccessToken 替代离线访问令牌

> ID：15187604
> 
> 赞同：7
> 
> 时间：2013-03-03T16:08:50.380
> 
> 标签：facebook-graph-api, access-token, facebook-access-token, facebook-insights

目前我正在使用桌面 Windows 服务来下载我的 Facebook 页面见解/页面喜欢/朋友等图形数据。因此，为此我在我的 facebook 页面上添加了应用程序并生成了完全权限的离线访问令牌。所以，使用它，我正在从去年正确下载我的 Facebook 页面见解。
但是，由于 Facebook 弃用了离线访问令牌。请任何人都可以帮助我如何生成具有完全权限的访问令牌以在不登录的情况下下载我的页面洞察数据（无需任何用户/用户界面对话框（允许等））。

现在，我正在尝试并通过一些 api 来生成访问令牌，如下所示： - [https://graph.facebook.com/oauth/access_token?client_id=xxxx&client_secret=xxxxx&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=xxxx&client_secret=xxxxx&grant_type=client_credentials)

但是，使用上面的调用我得到访问令牌（短长度令牌） - 例如： -

```
123484913842345|jkioEjsRAhFrNdertg9zuxPiopl 
```

尝试查看图形数据时使用上述访问令牌出现以下错误：-

```
{"error": {"message": "Unsupported get request.","type": "GraphMethodException","code": 100  }} 
```

但是，我发现这个访问令牌没有完整的权限并且寿命也很短。

当我使用旧的离线访问令牌时，它会正确响应。（此令牌将在一段时间后关闭）。因此，要生成具有大约 60 天寿命的相同类型的访问令牌。请帮助我。我如何生成具有完整权限且长度为 110 个字符的访问令牌。另外，我正在使用 Windows 服务，所以任何人都可以帮助解决如何在不登录的情况下生成访问令牌（用户/UI 活动）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:44:53.387

要解决此问题，您需要[扩展](https://developers.facebook.com/docs/facebook-login/access-tokens/#extending)短期令牌。

您还可以在没有任何用户交互的情况下[调试](https://developers.facebook.com/docs/facebook-login/access-tokens/#debug)访问令牌，以查看扩展访问令牌的操作是否有效。

这个[链接](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/)是关于离线访问过期的一个很好的参考。

当您使用此 url 调试访问令牌时：

`https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN`

**INPUT_TOKEN**是用户访问令牌

**ACCESS_TOKEN**`123`是应用`abc`访问令牌，形成如下： APP_ID|APP_SECRET`123|abc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T02:38:08.650

简单的解决方案只需使用 PHP SDK 调用以下函数

```
$facebook->setExtendedAccessToken(); 
```

并通过它获得扩展访问令牌之后

```
$access_token = $facebook->getAccessToken(); 
```

或者

```
GET /oauth/access_token?  
    grant_type=fb_exchange_token&           
    client_id={app-id}&
    client_secret={app-secret}&
    fb_exchange_token={short-lived-token} 
```

# regex - url重写中附加的文档根

> ID：15187605
> 
> 赞同：3
> 
> 时间：2013-03-03T16:08:55.790
> 
> 标签：regex, .htaccess, url-rewriting

我想将网址从[http://www.example.com/books/PHP/wrox](http://www.example.com/books/PHP/wrox)重写为[http://www.example.com/manuals/opensource/wrox](http://www.example.com/manuals/opensource/wrox)

我添加了以下规则

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^books/PHP/(.*)$    manuals/opensource/$1 [R=301,L] 
```

URL 重定向将我的文档根目录附加为

[http://www.example.com/home/projects/www/publications/devel/manuals/opensource/wrox](http://www.example.com/home/projects/www/publications/devel/manuals/opensource/wrox)

我的文档根目录是 /home/projects/www/publications/devel/ 提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:20:13.537

尝试改变

```
RewriteRule ^books/PHP/(.*)$    manuals/opensource/$1 [R=301,L] 
```

至

```
RewriteRule ^(.*)/books/PHP/(.*)$ $1/manuals/opensource/$2 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:15:40.237

[根据Server Fault 上的这个问题，](https://serverfault.com/questions/93195/mod-rewrite-adding-documentroot-to-url)它与您重写规则所在的目录语句的定义有关。

# java - Android XmlPullParser - 如何解析这个 XML 示例文件？

> ID：15187607
> 
> 赞同：2
> 
> 时间：2013-03-03T16:09:11.543
> 
> 标签：java, android, xmlpullparser

我有简单的 XML 文件。

```
<Parent id=1>
<Child>1</Child>
<Child>2</Child>
</Parent>
<Parent id=2>
<Child>3</Child>
<Child>4</Child>
</Parent> 
```

如何获取父 id=2 的子标签的值？这是我的代码。

```
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
XmlPullParser xpp = factory.newPullParser();
xpp.setInput(new StringReader(readFileAsString(xmlFilename)));

int event;
while ((event = xpp.next()) != XmlPullParser.END_DOCUMENT)
{
//found <Parent id=2> 
    if (event == XmlPullParser.START_TAG && xpp.getName().equalsIgnoreCase("Parent")
            && Integer.parseInt(xpp.getAttributeValue(null, "id")) == 2)
    {

        //TODO - what's next?

    }
} 
```

TODO标签后我该怎么办？我尝试了do-while - 一切都错了。编辑：似乎在这种情况下不能使用 XmlPullParser。它看不到具有不同属性的相同标签之间的区别。我将尝试使用 SAXParser 的 startElement(String uri, String localName, String qName, Attributes attributes)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:50:50.663

用布尔标志实现了这一点。当你找到你需要的元素 => 将标志设置为 true 并继续解析。当找到该元素的结束标记 => 将标志设置为 false。

```
if(flag)
{
    if (event == XmlPullParser.START_TAG && xpp.getName().equalsIgnoreCase("Child"))
      System.out.println(xpp.getText());
}
}
}
if (event == XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("Level"))
{
    flag = false;
} 
```

输出：3 4

# php - 如何解决通过帖子传递的数学公式

> ID：15187608
> 
> 赞同：1
> 
> 时间：2013-03-03T16:09:25.187
> 
> 标签：php, formula

我喜欢解决通过 post 传递的数学公式。例如。：

```
<form name="form1" method="post" action="">
  <label for="f">F&oacute;rmula: </label>
  <input type="text" name="f" id="f" value="<?=$_POST['f']?>">
  <input type="submit" name="button" id="button" value="Submit">
</form>

$f = $_POST['f']; //Suppose the user typed: (A + B) * C as formula 
```

使用通过`$_POST`(A + B) * C 传递的这个公式并进行数学演算

```
A = 1; B = 2; C = 3;
$x = (A + B) * C // here the formula would be
$_POST[f] = (A + B) * C
echo $ x; 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-03T16:18:51.657

您可以使用正则表达式或字符串操作函数将其解析为字符串。

您可以使用第三方类，检查 stackoverflow 上的以下问题：[如何评估在 php 中作为字符串传递的公式](https://stackoverflow.com/questions/1015242/how-to-evaluate-formula-passed-as-string-in-php)

没有类的更简单的方法是解析所有变量。例如，找到所有大写字母并将它们替换为相应的数字，而不是使用[eval](http://php.net/manual/en/function.eval.php)解析函数。

```
$formula = "A * B / (C + 3)";
$A = 3;
$B = 4;
$C = 2;

$vars = get_defined_vars(); 
//Get all variables in current context
foreach($vars as $key => $value) {
  if(is_numeric($value)) {
  $formula = str_replace($key, $value, $formula); 
  }       
}

eval('$result=' . $formula . ';');
echo '$result=' . $result . "<br />"; 
```

PS：小心 eval 括号内的恶意代码。

# android - Android按钮边框动态

> ID：15187609
> 
> 赞同：2
> 
> 时间：2013-03-03T16:09:25.330
> 
> 标签：android, button, border

我有一个按钮，没有任何文本，只有背景颜色。如果`onClick()`是按钮，我需要在没有`xml`规范的情况下设置按钮边框。我尝试将渐变矩形形状作为`drawable`按钮的背景，这对于我的布局来说并不灵活。

如何为按钮设置特定颜色的边框？

这是我的代码。

```
 Button btnBlackColor=new Button(this);
    int mButtonWidth=100;
    btnBlackColor.setWidth(mButtonWidth);
    btnBlackColor.setHeight(mButtonWidth);
    btnBlackColor.setBackgroundColor(Color.BLACK);  

    btnBlackColor.setOnClickListener(new OnClickListener()
    {
      public void onClick(View v)
      {
        GradientDrawable btnShape = new GradientDrawable(Orientation.BOTTOM_TOP, new int[]{Color.BLUE,Color.LTGRAY});
        btnShape.setCornerRadius(0);
        btnShape.setSize(mButtonWidth, mButtonWidth);
        btnShape.setBounds(10, 10, mButtonWidth, mButtonWidth);
        ClipDrawable btnClip = new ClipDrawable(btnShape, Gravity.LEFT,ClipDrawable.HORIZONTAL);

        btnShape = new GradientDrawable(Orientation.BOTTOM_TOP, new int[]{Color.BLACK, Color.DKGRAY});
        btnShape.setCornerRadius(0); 
        btnShape.setSize(mButtonWidth, mButtonWidth);
        btnShape.setBounds(5, 5, mButtonWidth, mButtonWidth);

        LayerDrawable btnLayer= new LayerDrawable(new Drawable[]{btnShape, btnClip});

        btnBlackColor.setBackgroundDrawable(btnLayer); 
      }
    }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T04:32:08.380

找到解决方案。

```
 GradientDrawable drawable = new GradientDrawable();
    drawable.setShape(GradientDrawable.RECTANGLE);
    drawable.setStroke(5, Color.MAGENTA);
    drawable.setColor(Color.BLACK);
    btnBlackColor.setBackgroundDrawable(drawable); 
```

使用这些值并设置为按钮背景可绘制。现在，按钮看起来带有洋红色的边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:43:52.580

在您的 xml 背景中使用选择器。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"><!-- pressed -->
       <shape>...</shape>
    <item android:state_focused="true"
          android:drawable="@drawable/button_focused" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/button_focused" /> <!-- hovered -->
    <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

burton 的每个状态都可能是一个形状，看看你可以修改的属性：

```
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape=["rectangle" | "oval" | "line" | "ring"] >
    <corners
        android:radius="integer"
        android:topLeftRadius="integer"
        android:topRightRadius="integer"
        android:bottomLeftRadius="integer"
        android:bottomRightRadius="integer" />
    <gradient
        android:angle="integer"
        android:centerX="integer"
        android:centerY="integer"
        android:centerColor="integer"
        android:endColor="color"
        android:gradientRadius="integer"
        android:startColor="color"
        android:type=["linear" | "radial" | "sweep"]
        android:useLevel=["true" | "false"] />
    <padding
        android:left="integer"
        android:top="integer"
        android:right="integer"
        android:bottom="integer" />
    <size
        android:width="integer"
        android:height="integer" />
    <solid
        android:color="color" />
    <stroke
        android:width="integer"
        android:color="color"
        android:dashWidth="integer"
        android:dashGap="integer" />
</shape> 
```

通过代码，您可以使用 a`StateListDrawable`来制作选择器，对于形状使用 a`DrawableShape`请查看以下链接：

[http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)

[http://developer.android.com/reference/android/graphics/drawable/ShapeDrawable.html](http://developer.android.com/reference/android/graphics/drawable/ShapeDrawable.html)

# java - 使用 jersey 在 JAX-RS 中为 @RolesAllowed 设置角色

> ID：15187613
> 
> 赞同：1
> 
> 时间：2013-03-03T16:09:55.963
> 
> 标签：java, web-services, rest, jersey, jax-rs

我尝试`Basic Authentication`通过更改`server.xml`配置来使用，`Tomcat 6.0`但没有成功：[BASIC authentication in jersey JAX-RS service and Tomcat 6.0 getting failed](https://stackoverflow.com/questions/15158554/basic-authentication-in-jersey-jax-rs-service-and-tomcat-6-0-getting-failed)

因此，我选择了一种不需要服务器特定配置的方式，我可以直接在我的代码中添加角色（客户端或服务器；不确定可用选项）。

请提供一些关于设置用户角色的可能选项的想法，以便我可以使用`@RolesAllowed`注释验证我的 Web 服务方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:47:42.813

您需要回过头来弄清楚为什么您的安全约束不起作用。可能先从默认文件领域开始，然后再转到 JDBC 领域。@RolesAllowed 在一个注释中触发容器中的行为。

如果您真的想自己做（一个坏主意），您可能会先创建一个自定义 servlet 过滤器，该过滤器实现了整个基本的 http 质询机制。接下来，您必须替换 Jersey 中的 SecurityContext 提供程序。

他们在球衣中启用@RolesAllowed 的“东西”是这样的：http: [//java.net/projects/jersey/sources/svn/content/trunk/jersey/jersey-server/src/main/java/com/sun/jersey /api/container/filter/RolesAllowedResourceFilterFactory.java](http://java.net/projects/jersey/sources/svn/content/trunk/jersey/jersey-server/src/main/java/com/sun/jersey/api/container/filter/RolesAllowedResourceFilterFactory.java)顺便说一句，不要忘记将其作为 init-param 添加到您的 jersey servlet。RolesAllowedResourceFilterFactory 从注入的 SecurityContext 获取其安全信息，我确信在某些时候它只是委托给 Servlet API 以获取凭据信息。

因此，基本上，如果您不想花时间让安全约束发挥作用，那么您最终将更换大部分链条……就像我说的那样，这是个坏主意。

应用服务器上的功能可以让您不必花时间创建基础架构代码，如果您编写自己的基础架构代码，您将度过一段糟糕的时光。

# asp.net-mvc-4 - apicontroller 没有从 ajax 获取

> ID：15187615
> 
> 赞同：2
> 
> 时间：2013-03-03T16:10:18.570
> 
> 标签：asp.net-mvc-4

我在进行 Ajax 调用时得到“404 Not Found”，也许我不明白路由是如何工作的......

```
function ApproveAlert(ID) {
     $.ajaxPost('/api/DeviceApi/ApproveAlertNew', { 'ID': ID }, function (data) {
        ... get error "404 Not Found"
    }, null);
} 
```

在我的 mvc4 C# 应用程序中，我有一个溃败配置：

```
RouteTable.Routes.MapHttpRoute(
                 name: "defaultapiaction",
                 routeTemplate: "api/{controller}/{action}"
             );
            RouteTable.Routes.MapHttpRoute(
                 name: "defaultapiid",
                 routeTemplate: "api/{controller}/{action}/{id}"
             ); 
```

和 apicontroller ：

```
public class DeviceApiController : ApiController
    {
        //
        // GET: /DeviceApi/
        [HttpPost]
        public bool ApproveAlertNew(int ID)
        {
            ..do
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:37:48.557

Web API 控制器不像 MVC 控制器那样使用“动作”。Web API 控制器也没有真正使用`[HttpPost]`,`[HttpGet]`属性。它们根据 ApiControllers 内部的方法名称来分派请求。我建议阅读更多关于与 MVC 的 Web API 差异的信息，因为它很相似，但有时很难启动和运行......

这是我为测试而制作的 Web API 中的一些非常通用的示例。我没有 JavaScript 可发布到此 API，因为我是从 .NET WPF 应用程序发布的。你会发布到“/Important”而不是“/Important/Post”希望这会让你走上正确的轨道......

WebAPIConfig.cs（路由）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Http;

namespace ArrayTest.WebAPI
{
    public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
            config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
        }
    }
} 
```

API 控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using ArrayTest.Models;
using System.Threading;

namespace ArrayTest.WebAPI.Controllers
{
    public class ImportantController : ApiController
    {
        // POST api/important
        public HttpResponseMessage Post(ImportantList values)
        {
            //manipulate values received from client
            for (int i = 0; i < values.ImportantIDs.Count; i++)
            {
                values.ImportantIDs[i] = values.ImportantIDs[i] * 2;
            }

            //perhaps save to database, send emails, etc... here.

            Thread.Sleep(5000); //simulate important work

            //in my case I am changing values and sending the values back here.
            return Request.CreateResponse(HttpStatusCode.Created, values);
        }

    }
} 
```

模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ArrayTest.Models
{
    public class ImportantList
    {
        public List<int> ImportantIDs { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:48:17.927

你可以试试：

```
function ApproveAlert(ID) {
    $.ajax({
        type: 'POST',
        url: "/api/DeviceApi/ApproveAlertNew",
        data: {
            ID: ID
        },
        success: function (data) {
            //Handle your success
        },
        error: function (jqXHR, textStatus, errorThrown) {
            //Handle error
        }
    });
} 
```

# vb.net - 从 VB.net 中的模块读取单选按钮

> ID：15187620
> 
> 赞同：0
> 
> 时间：2013-03-03T16:10:33.763
> 
> 标签：vb.net, visual-studio-2010

我已经创建了这个模块，并且我知道结构中的学生和教师作为字符串放置（这些存储为我的单选按钮），但是当我将这些保存到文件中时，这可以通过保存 true 或 false id 和密码的值。但是，我无法阅读其他班级的单选按钮。

这是我的模块类

```
Imports System.IO
Module user_info_mod
    Structure user
        <VBFixedString(3)> Dim name As String
        <VBFixedString(3)> Dim password As String
        <VBFixedString(7)> Dim student As String
        <VBFixedString(3)> Dim teacher As String
    End Structure
    Public newuser As user
    Public userNumber As Integer = FreeFile()
    Public userrecordNumber As Integer = 1
    Public Sub setRecordNumber()
        Dim n As Byte = 0
        FileOpen(userNumber, "D:\users.dat", OpenMode.Random, OpenAccess.Read)
        While Not EOF(userNumber)
            n = n + 1               'increments the record number of the user
            FileGet(userNumber, newuser, n)
        End While
        userrecordNumber = n
        FileClose(userNumber)
    End Sub

End Module 
```

这是我试图读取主文件中的单选按钮（newuser.student=True）

```
Private Sub cmdLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)         Handles cmdLogin.Click
        Dim password As String
        password = txtPassword.Text
        Dim username As String
        username = txtUsername.Text
        FileOpen(userNumber, "D:\users.dat", OpenMode.Random, OpenAccess.Read)
        FileGet(userNumber, newuser, userrecordNumber)

        If password = newuser.password And username = newuser.name And newuser.student = True Then
            MsgBox("ID Accepted")

            Dim frmNew As New Student_selection    
            frmNew.ShowDialog() 
            FileClose(userNumber)

        Else
            FileClose(userNumber)
            MsgBox("ID is not accepted")
        End If
    End Sub 
```

如果我要在模块中将字符串更改为布尔值，这不能让我在模块内设置记录号时保存用户的文件，那么解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:57:02.710

问题已解决。必须先更改模块中单选按钮的顺序，然后再更改为布尔值。 `Dim student As Boolean`

# android - 创建新的 ViewPager 仍然显示相同的视图

> ID：15187623
> 
> 赞同：0
> 
> 时间：2013-03-03T16:10:45.203
> 
> 标签：android, android-viewpager

我得到了以下代码，每次我想更改屏幕上的内容时都会运行它：

```
 if (Globals.PagerAdapter.Count == 0) {
            SetContentView(Resource.Layout.Loading);
        } else {
            Pager = new ViewPager(this);
            Pager.Id = PagerID++; // Dummy id, not setting one will cause crash
            Pager.Adapter = Globals.PagerAdapter;

            if (currentFrame >= 0) {
                Pager.SetCurrentItem(currentFrame, false);
            }

            SetContentView(Pager);
        } 
```

Globals.PagerAdapter 和支持数据当然会在此代码运行之前更改。我遇到的问题是，当我调用此方法时，正在使用的 viewpager 是相同的，尽管我明确地创建了一个新事件。真正发生的一切，是它移动到视图页面的第一个片段。

我在这里想念什么？

# c# - NServiceBus Distributor 只需 2 步？

> ID：15187625
> 
> 赞同：0
> 
> 时间：2013-03-03T16:11:02.570
> 
> 标签：c#, nservicebus, nservicebus-distributor

我在弄清楚如何使用分销商正确执行以下操作时遇到了一些麻烦：

1.  创建一个发送命令的服务（分发器），这些命令分布在工作人员之间。如果我使用 IWantToRunAtStartup 实现启动 Distributor，我可以实现这种行为。见下文。
2.  创建一个处理这些命令的服务（worker）。然后，我将启动 X 个实例来扩展该工作人员。
3.  到目前为止，这一切都在同一台机器上。

NSB 中包含的示例有点难以理解，或者可能只是我个人 :)。

例如，我有一个分销商和一个工人：

**经销商：**

```
class MessageCreator: IWantToRunAtStartup
{
    public IBus Bus { get; set; }

    public void Run()
    {
        Thread.Sleep(5000); //Allow workers to checkin
        for (int i = 0; i < 1000; i++ )
        {
            Bus.Send(new DoWorkForCustomerCommand { CustomerID = i });
        }

    }

    public void Stop() { }
} 
```

...

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Server
{
    public void Init()
    {
        Configure.Instance.RunDistributor();
    }
} 
```

应用程序配置

```
<configSections>
    <section name="Logging" type="NServiceBus.Config.Logging, NServiceBus.Core" />
    <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" /> 
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
</configSections>

<MessageForwardingInCaseOfFaultConfig ErrorQueue="error"/>
<Logging Threshold="INFO" />
<UnicastBusConfig>
    <MessageEndpointMappings>
      <add Messages="Messages" Endpoint="Worker" />
    </MessageEndpointMappings>
 </UnicastBusConfig> 
```

**工人：**

```
public class MessageHandler: IHandleMessages<DoWorkForCustomerCommand >
{
    public void Handle(DoWorkForCustomerCommand message)
    {
        Console.WriteLine("Handled customer with Id: " + message.CustomerID );
    }
} 
```

...

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher
{
    public void Init()
    {
        Configure.Instance.EnlistWithDistributor();
        // For some reason this: Configure.Instance.RunDistributor(); achieves the same thing.
    }
} 
```

应用程序配置

```
<configSections>
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
</configSections>
<MessageForwardingInCaseOfFaultConfig ErrorQueue="error" /> 
```

这适用于我的机器，并且可以很好地分配给我开始的任何数量的工人，但我没有错过什么吗，ScaleOut 示例似乎更复杂？

为什么我可以将工人作为分销商开始，然后看到工人表现得好像是工人，而实际上是作为分销商开始的？

如果我只是在工作程序 app.config 中添加队列名称/端点，这不会跨机器工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:36:24.620

默认情况下，如果你 RunDistributor()，那么 NSB 将在同一个进程中运行一个带有 Worker 节点的 Distributor。这就是为什么尽管有 RunDistributor() 配置，您仍会看到 Worker。要禁用此功能，请改用 RunDistributorWithNoWorkerOnItsEndpoint()。通过更改配置，所有这些都将在机器上运行。

我可能会建议改用 Profiles，因为这会稍微简化配置。您可以使用 NServiceBus.Distributor 和 NServicerBus.Worker 配置文件。如果您没有正确配置，配置文件将为您提供更多诊断信息。希望这可以帮助。

# visual-studio-2012 - 如何在 Visual Studio 2012 中结合实体框架和 SQL Compact？

> ID：15187628
> 
> 赞同：2
> 
> 时间：2013-03-03T16:11:27.617
> 
> 标签：visual-studio-2012, entity-framework-5, sql-server-ce-4

我将 MS Entity Framework 和 Visual Studio 2012 与 SQL Server Express 结合使用。现在我想将 EF 与 SQL Server Compact Edition 数据库结合使用。

*设计过程将首先是模型。*

我在 VS 中创建了一个 SQL CE 数据库文件，并从一个数据库模型开始设计。我可以创建 .slqce 文件，其中包含数据库模式定义而没有任何问题。

实际上我的问题是，我不知道如何在数据库上执行这个文件。

为了测试另一种方法，我在服务器资源管理器中创建了数据库表、列……并使用它来创建实体模型。这很好用，但同样，我不知道如何使用模型内部的更改来更新数据库。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:30:34.247

您可以使用我的 SQL Server Compact Toolbox 插件来创建数据库文件并执行脚本。您可能需要修改模板，正如我在此处描述的那样[http://erikej.blogspot.dk/2013/02/fixing-entity-framework-designer.html](http://erikej.blogspot.dk/2013/02/fixing-entity-framework-designer.html)

# css - 如何检测自动断字支持？

> ID：15187633
> 
> 赞同：3
> 
> 时间：2013-03-03T16:11:47.997
> 
> 标签：css, modernizr, hyphenation, browser-feature-detection

仅当 CSS 连字符不可用时，我才想使用连字符 polyfill（例如[hypher.js](https://github.com/bramstein/hypher)或[hyphenator.js ），即：](http://code.google.com/p/hyphenator/)

```
if (!Modernizr.hyphenation) {
  $('p').hyphenate('en-us')
} 
```

但是 Modernizr 中没有这样的检测。支持测试`hyphens: auto`并不可靠：Chrome 和 Mobile Safari 都支持它（带前缀），但只有后者支持连字符。

这是[一个无法检测的功能](https://github.com/Modernizr/Modernizr/wiki/Undetectables)吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:19:57.693

据说当前版本的 Hyphenator.js 会在内部检查是否支持 CSS 连字符。它似乎使用 CSS 运行连字符测试并测试结果（基本上，只是字符串是否被连字符）。这看起来有点做作，但它肯定是比仅仅测试浏览器是否识别属性更好的尝试。支持 CSS 连字符的浏览器仅对某些语言执行此操作，重要的是您的内容的语言是否受支持。

# javascript - node.js 子进程和手动分离的进程之间的区别？

> ID：15187634
> 
> 赞同：2
> 
> 时间：2013-03-03T16:12:16.883
> 
> 标签：javascript, linux, node.js, websocket, socket.io

我正在尝试测量我的 socket.io 服务器的响应时间。所以 socket.io 服务器只是回显一条消息，一个测试文件发送消息并记录发送和获取回显之间所需的时间。为了模拟多个客户端，我在管理器文件中使用 child_process 多次启动此测试文件。

奇怪的是，我只用一个测试文件就得到了 0.2 的响应时间。当我启动管理器时，它会再生成 4 个客户端，它会达到 1.3，当我在单独的终端中启动两个管理器时，每个管理器有 4 个客户端，它会达到 3 左右。但是当我只启动一个管理器时，它会产生 10 个客户端（甚至多达像 1000 一样疯狂）结果保持在 1 以下。

再次证明这一点：

```
manager.js 4    -> spawns 4 childs
manager.js 4    -> spawn 4 childs
test.js         -> shows around 3 avg. response time

manager.js 10   -> spawns 10 childs
test.js         -> shows around 0.5 avg. response time 
```

那么，为什么多个单独的调用产生 4 个孩子的负载比一个调用多个孩子的负载要多呢？

这是我产生孩子的管理器文件：

```
var count = process.argv[2] || 1;
console.log("generating " + count + " childs");

for (var i = 0; i < count; i++){
    var childProcess = require('child_process');
    childProcess.exec('node test.js', function (error, stdout, stderr) {
       if (error) {
         console.log(error.stack);
         console.log('Error code: '+error.code);
         console.log('Signal received: '+error.signal);
       }
       console.log('Child Process STDOUT: '+stdout);
       console.log('Child Process STDERR: '+stderr);
     });
} 
```

这是我测量最后一秒平均响应时间的测试文件：

```
var io = require('socket.io-client');
var rtts = [];

var socket = io.connect('http://localhost:3000');
socket.emit('roundtrip', { time: new Date().getTime() });
socket.on('roundtrip', function (data) {

var roundtripTime = new Date().getTime() - data.time;
rtts.push(roundtripTime);

socket.emit('roundtrip', { time: new Date().getTime() });
});

setInterval(function(){
    avgRTT = 0;
    for (var i = 0; i < rtts.length; i++){
        avgRTT += rtts[i];
    }
    avgRTT = avgRTT / rtts.length;
    console.log("AVG RTT: " + avgRTT);
    rtts = [];
}, 1000); 
```

我在 linux mint 64 位上运行它。

# php - 从方法内部访问变量

> ID：15187638
> 
> 赞同：0
> 
> 时间：2013-03-03T16:12:32.750
> 
> 标签：php, class

假设以下类

```
class test {

public $x = 2;

public testFunction() {

//...

}

} 
```

有什么方法可以从 testFunction() 中访问 $x 吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:13:52.203

绝对，只需使用`$this->x`

您可能希望复习[PHP 的 OOP 原则](http://php.net/manual/en/language.oop5.php)。

# objective-c - 如何将人类可读的时间表达式（NSString）解析为 NSTimeInterval？

> ID：15187640
> 
> 赞同：2
> 
> 时间：2013-03-03T16:12:49.903
> 
> 标签：objective-c, parsing, time, expression

所以说我有一个 NSString，它有一个人类可读的时间表达式，比如@“10 分钟”或@“2 小时”。是否有一个客观的 C 库可以帮助我将其解析为 NSTimeInterval？（或 C 库或其他任何我可以在 iOS 应用程序中轻松使用的东西）。

我写了一个方法来处理简单的情况。上面的简单案例都不是太难，如果没有人有任何建议，这就是我将采取的方向。但是我的代码对输入做了很多假设。我的代码目前不会解析@“十分半钟”或@“5 horas”。（与往常一样，日期和时间函数总是比最初出现的要困难。）

我在 Google、Stack Exchange 和 GitHub 上进行了一些搜索，但到目前为止我发现的唯一内容是解析日期（不是时间间隔）和解析 ISO-8601 持续时间（假设输入非常具体）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:07:50.493

对于它的价值，我想我会发布我最终使用的代码。它并没有真正回答这个问题，因为它只处理非常简单的情况。对于我的用例来说，它已经足够好了，但我仍然希望看到一个更强大的库。

```
+ (NSTimeInterval)timeIntervalFromString:(NSString *)string {
    NSTimeInterval interval    = 0.0;
    NSError *error = NULL;
    NSString *pattern          = @"^\\s*(\\d+)\\s+(second|minute|hour|day)s?\\s*$";
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];
    NSTextCheckingResult *matchResult = [regex firstMatchInString:string
                                                          options:NSMatchingAnchored
                                                            range:NSMakeRange(0, [string length])];

    if(matchResult != nil) {
        NSString *numberString = [string substringWithRange:[matchResult rangeAtIndex:1]];
        NSString *unitString   = [string substringWithRange:[matchResult rangeAtIndex:2]];

        if([[unitString lowercaseString] isEqualToString:@"second"]) {
            interval = [numberString floatValue];
        } else if([[unitString lowercaseString] isEqualToString:@"minute"]) {
            interval = [numberString floatValue] * 60;
        } else if([[unitString lowercaseString] isEqualToString:@"hour"]) {
            interval = [numberString floatValue] * 3600;
        } else if([[unitString lowercaseString] isEqualToString:@"day"]) {
            interval = [numberString floatValue] * 3600 * 24;
        }
    }
    return interval;
} 
```

# jquery - 手动触发的粘贴事件没有 .originalEvent 属性？

> ID：15187642
> 
> 赞同：6
> 
> 时间：2013-03-03T16:13:10.603
> 
> 标签：jquery

当我使用 .trigger() 触发粘贴事件时，随后捕获的粘贴事件没有 .originalEvent 属性。这是预期的行为吗？为什么？

见例子 - [http://jsfiddle.net/2uxEr/](http://jsfiddle.net/2uxEr/)

```
<textarea>Paste something here</textarea>
<button>Click for fake trigger</button>

$('textarea').on("paste", function(e){

     alert(e.hasOwnProperty("originalEvent"));

});

$('button').click(function(){

    $('textarea').trigger("paste");

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:18:10.453

`originalEvent`如果手动触发jQuery 事件，它们将没有属性。他们怎么可能？是浏览器创建的`originalEvent`事件对象，jQuery 从中形成了它的事件对象；在手动触发的事件中，jQuery 自己创建了事件对象。没有`originalEvent`访问权限。

[这个 jsFiddle 示例](http://jsfiddle.net/2uxEr/1/)展示了这对于像`click`as 和`paste`.

# php - PHP 邮件仅通过 SMTP 发送到密件抄送接收者

> ID：15187644
> 
> 赞同：0
> 
> 时间：2013-03-03T16:13:25.940
> 
> 标签：php, email, smtp, mailing-list

我正在用 php 编写一个邮件列表，并且需要一种强制方法，同时通过 localhost 上的 smtp（Postfix）发送邮件，只是将邮件真正发送到 BCC 接收者。

（有 To 和 Cc 标头在邮件中发送它们，但不将邮件发送给它们）

原因：如果一封邮件被发送到列表中，它是之前发送给那些接收者的；在 php 脚本中，我编辑邮件（删除禁用词，添加带有签出链接等的页脚）并希望通过 smtp 发送它（mail() 不好，它没有错误处理）

有没有任何类或简单的方法可以做到这一点？或者是否可以留在后缀队列中（邮件通过管道传输到 php-script）

我发送的邮件有：mailing.list-adress（因为必须显示邮件已发送到邮件列表）和所有其他 Tos，但脚本不应将它们发送到该地址，它只是应该发送到密件抄送地址。

**邮件流是**

发件人 => specific-list@server.de => lists@server.de => php-programm => drop

每 5 分钟（或用户指定的其他时间）将推出列表：

数据库中的邮件 => 脚本 => 收件人为密件抄送，收件人为列表地址（特定列表@server.de）

邮件看起来像：

```
From: original-sender@original-server.org
To: specific-list@server.de, <any other tos from original mail>
Cc: <any ccs from original mail>
Bcc: <all the list subscribers> //JUST REALLY SEND TO THIS ADRESSES
Subject: [Listname | Topicid] Topic Name

Content:
<original content>
--
signature for unsubscribe, etc. 
```

我有一个如何解决这个问题的想法，但需要帮助。

1.  我创建了一个内部邮件地址，转发给我的真实收件人
2.  我把邮件发到那个地址
3.  Postfix 必须处理该邮件，而不是作为外发邮件，而是作为递送到该地址的新邮件。
4.  因为是收到的邮件，postfix 不会投递给所有其他的 Receiver，它只是投递到那个特定的地址（也就是一个 Forwarding）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:18:08.387

每当您发送邮件时，根据普遍建立的规则，您需要有一个收件人。如果您只想将邮件发送给您自己或某个地址，那很好。一旦你有了收件人，你就可以继续创建你的密件抄送。

# java - 将返回的数组用于另一个操作

> ID：15187648
> 
> 赞同：-5
> 
> 时间：2013-03-03T16:13:49.100
> 
> 标签：java, arrays, return

我已将文件中的文本读入数组。我想在另一个类中遍历这个数组（反转一个数组并找到每 5 个元素）。我在另一个类中使用这个数组时遇到问题 - 这个类看不到数组。有人可以帮我吗？

```
package iterators;
import java.util.*;
import java.io.*;
import iterators.*;

public class Dunno{
    int i = 1;
    String[] something() throws IOException {
        BufferedReader read = new BufferedReader(new FileReader("file.txt"));
        StringBuilder sb = new StringBuilder();
        String text = read.readLine();
        while (text != null) {
            sb.append(text);
            sb.append("\n");
            text = read.readLine();
        }
        String all = sb.toString();
        String film = all;
        String znak = ",";
        String[] tab;
        tab = film.split(znak);
        for (i = 0; i < tab.length; i++) {
            System.out.println(tab[i]);
        }
        return tab;
}
} 
```

第二类：

```
public class Dunno1{
    Dunno dunn=new Dunno();
    dunn.something();
    public String dunn(){
    //Iterate
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:29:30.927

在您的第二个类中，您在类范围内调用第一个类方法，而不是在方法或 main 中调用它。这是您应该如何做的：

```
public class Dunno1 {

    public static void main(String[] args) throws IOException {
        Dunno1 d1 = new Dunno1();
        Dunno dunn = new Dunno();
        String[] d = dunn.something();
        d1.dunn(d);
    }

    public String dunn(String [] d) {
        return null;
        // Iterate
    }
} 
```

您还需要构造第二类的对象，以便可以调用 dunn 方法并将您从第一类获得的 String 数组传递给它（这就是为什么我的答案中方法的签名不同的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:32:03.667

```
public class Dunno1{
    Dunno dunn=new Dunno();
    dunn.something();
    public String dunn(){
    //Iterate
    }
} 
```

上面没有编译，因为你不能直接在类中执行指令。类必须包含字段声明、构造函数和方法。但不是指令。

以下将编译：

```
public class Dunno1{
    public void foo() { 
        Dunno dunn = new Dunno();
        String[] array = dunn.something();
        // iterate over the array.   
    }
} 
```

这是真正的基本知识，您应该通过阅读 Java 书籍或教程来学习。不是通过在 StackOverflow 上提问。

# c++ - C 风格向下转换的 C++ 转换

> ID：15187650
> 
> 赞同：2
> 
> 时间：2013-03-03T16:13:55.670
> 
> 标签：c++, c

当使用使用 C 风格继承的 C API 时（利用 C 结构的标准布局），例如[GLib](http://en.wikipedia.org/wiki/Glib)，我们通常使用 C 风格强制转换来向下转换：

```
struct base_object
{
    int x;
    int y;
    int z;
};

struct derived_object
{
    base_object base;
    int foo;
    int bar;
};

void func(base_object* b)
{
    derived_object* d = (derived_object*) b; /* Downcast */
} 
```

但是，如果我们正在编写使用这样的 C-API 的新 C++ 代码，我们应该继续使用 C 风格的强制转换，还是应该更喜欢 C++ 强制转换？如果是后者，我们应该使用什么类型的 C++ 转换来模拟 C 向下转换？

起初，我认为`reinterpret_cast`会合适：

```
derived_object* d = reinterpret_cast<derived_object*>(b); 
```

但是，我总是很谨慎，`reinterpret_cast`因为 C++ 标准[几乎不能保证](https://stackoverflow.com/a/332086/469408)会发生什么。使用它可能更`static_cast`安全`void*`：

```
derived_object* d = static_cast<derived_object*>(static_cast<void*>(b)) 
```

当然，这真的很麻烦，让我觉得在这种情况下最好只使用 C 风格的强制转换。

那么这里的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:59:38.433

> 但是，我总是对 reinterpret_cast 保持警惕，因为 C++ 标准几乎不能保证会发生什么。

C++ 风格转换的安全性不亚于 C 风格转换，因为 C 风格转换是根据 C++ 风格转换定义的。

> 5.4.4 执行的转换
> 
> — 一个 const_cast (5.2.11)，
> 
> — 一个 static_cast (5.2.9)，
> 
> — 一个 static_cast 后跟一个 const_cast，
> 
> — reinterpret_cast (5.2.10)，或
> 
> — reinterpret_cast 后跟 const_cast，
> 
> 可以使用显式类型转换的强制转换表示法来执行。
> 
> [...]
> 
> 如果转换可以用上面列出的一种以上的方式解释，则使用列表中第一个出现的解释，即使由该解释产生的强制转换是格式错误的。

可悲的答案是您无法避免像您编写的代码中的强制转换，因为编译器对类之间的关系知之甚少。以某种方式，您可能想要重构它（强制转换或类或使用它们的代码）。

底线是：

如果可以，请使用适当的继承。

如果不能，请使用 reinterpret_cast。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:13:45.407

如果您查看 C++ 规范中的 C 风格转换规范，您会发现转换符号是根据其他类型转换运算符 ( `dynamic_cast`, `static_cast`, `reinterpret_cast`, `const_cast`) 定义的，并且在这种情况下`reinterpret_cast`使用。

此外，`reinterpret_cast`提供的保证比您链接到的答案所指示的要多。你关心的是：

> § 9.2/20：指向标准布局结构对象的指针，使用 reinterpret_cast 适当转换，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。

如果你想使用强制转换符号，我认为显式使用 C++ 类型转换运算符是最好的。但是，您应该为每次转换（使用实现`reinterpret_cast`）编写一个函数，然后使用它，而不是在代码中乱扔垃圾。

```
derived_object *downcast_to_derived(base_object *b) {
    return reinterpret_cast<derived_object*>(b);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T16:26:00.017

> 使用这样的 C-API 的新 C++ 代码

不要以 C 风格编写新的 C++ 代码，它不会利用 C++ 语言的特性，而且它还会强制包装器的用户使用相同的“C”风格。相反，创建一个适当的 C++ 类来包装 C API 接口细节并将它们隐藏在 C++ 类后面。

> 我们应该继续使用 C 风格的演员表吗

不

> 还是我们应该更喜欢 C++ 类型转换

是的，但只有在你必须这样做的时候。

使用 C++ 继承和虚拟访问器函数（可能）。请说明您打算如何在 func 中使用派生对象，这可能会为您提供更好的答案。

如果 func 期望使用派生对象的方法，那么它应该接收派生对象。如果它希望使用 base_object 的方法，但由于指针指向derived_object，因此方法以某种方式发生了变化，那么虚函数就是 C++ 执行此操作的方法。

此外，您希望传递对 func 的引用，而不是指针。

dynamic_cast，需要满足某些条件：

[http://www.cplusplus.com/doc/tutorial/typecasting/](http://www.cplusplus.com/doc/tutorial/typecasting/)

如果您只是将 struct ptrs 转换为 struct ptrs 并且您知道自己想要什么，那么 static_cast 或 reinterpret_cast 可能是最好的？

但是，如果您真的对编写 C++ 代码感兴趣，那么强制转换应该是您最后也是最后的手段，因为有更好的模式。我会考虑铸造的两种常见情况是：

*   您正在与一些将通用基类传递给事件处理程序的事件传递机制进行交互。

*   你有一个对象容器。容器要求它包含同质类型（即每个元素都包含相同的“事物”），但您希望在容器中存储不同的类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T16:54:46.500

我想[`dynamic_cast`](https://en.wikipedia.org/wiki/Dynamic_cast%20dynamic_cast)这正是你想要的。

# python - 我如何在python中沮丧

> ID：15187653
> 
> 赞同：11
> 
> 时间：2013-03-03T16:14:07.057
> 
> 标签：python, downcast

我有两个类 - 一个继承自另一个。我想知道如何转换（或创建一个新变量）子类。我已经搜索了一下，而且大多数情况下像这样的“垂头丧气”似乎是不受欢迎的，并且有一些稍微狡猾的解决方法，比如设置实例。**类**- 虽然这似乎不是一个好方法。

例如。 [http://www.gossamer-threads.com/lists/python/python/871571](http://www.gossamer-threads.com/lists/python/python/871571) [http://code.activestate.com/lists/python-list/311043/](http://code.activestate.com/lists/python-list/311043/)

子问题 - 垂头丧气真的那么糟糕吗？如果是，为什么？

我在下面简化了代码示例 - 基本上我有一些代码在对 x、y 数据进行了一些分析后创建了一个 Peak 对象。在这段代码之外，我知道数据是“PSD”数据功率谱密度——所以它有一些额外的属性。我如何从 Peak 向下投射到 Psd_Peak？

```
"""
    Two classes

"""
import numpy as np

class Peak(object) :
    """
        Object for holding information about a peak

    """
    def __init__(self,
                     index,
                     xlowerbound = None,
                     xupperbound = None,
                     xvalue= None,
                     yvalue= None
                     ):

        self.index = index # peak index is index of x and y value in psd_array

        self.xlowerbound = xlowerbound
        self.xupperbound = xupperbound

        self.xvalue  = xvalue
        self.yvalue  = yvalue

class Psd_Peak(Peak) :
    """
        Object for holding information about a peak in psd spectrum

        Holds a few other values over and above the Peak object.
    """
    def __init__(self,
                     index,
                     xlowerbound = None,
                     xupperbound = None,
                     xvalue= None,
                     yvalue= None,
                     depth = None,
                     ampest = None
                     ):

        super(Psd_Peak, self).__init__(index,
                                 xlowerbound,
                                 xupperbound,
                                 xvalue,
                                 yvalue)

        self.depth = depth
        self.ampest = ampest

        self.depthresidual = None
        self.depthrsquared = None

def peakfind(xdata,ydata) :
    '''
        Does some stuff.... returns a peak.
    '''

    return Peak(1,
             0,
             1,
             .5,
             10)

# Find a peak in the data.
p = peakfind(np.random.rand(10),np.random.rand(10))

# Actually the data i used was PSD -
#  so I want to add some more values tot he object

p_psd = ???????????? 
```

* * *

**编辑**

感谢您的贡献....恐怕我感到相当沮丧（geddit？），因为到目前为止的答案似乎表明我花时间从一种类类型到另一种类类型的硬编码转换器。我想出了一种更自动化的方法——基本上循环遍历类的属性并将它们相互转移。这种气味对人们有什么影响——这样做是否合理——或者它会给未来带来麻烦？

```
def downcast_convert(ancestor, descendent):
    """
        automatic downcast conversion.....

        (NOTE - not type-safe -
        if ancestor isn't a super class of descendent, it may well break)

    """
    for name, value in vars(ancestor).iteritems():
        #print "setting descendent", name, ": ", value, "ancestor", name
        setattr(descendent, name, value)

    return descendent 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T16:19:00.153

您实际上并没有在 Python 中“投射”对象。相反，您通常会转换它们——取出旧对象，创建一个新对象，然后扔掉旧对象。为此，新对象的类必须设计为在其`__init__`方法中采用旧对象的实例并做适当的事情（有时，如果一个类在创建它时可以接受多种对象，它会为此目的有备用构造函数）。

您确实可以通过将实例的`__class__`属性指向不同的类来更改实例的类，但该类可能无法与实例一起正常工作。此外，恕我直言，这种做法是一种“气味”，表明您可能应该采取不同的方法。

在实践中，您几乎不需要担心 Python 中的类型。（有明显的例外：例如，尝试添加两个对象。即使在这种情况下，检查也尽可能广泛；在这里，Python 将检查数字类型或可以转换为数字的类型，而不是特定类型。）因此，对象的实际类是什么并不重要，只要它具有使用它的任何代码所需的属性和方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-10T02:39:28.070

请参见以下示例。另外，**一定要遵守 LSP**（Liskov 替换原则）

```
class ToBeCastedObj:
    def __init__(self, *args, **kwargs):
        pass  # whatever you want to state

    # original methods
    # ...

class CastedObj(ToBeCastedObj):
    def __init__(self, *args, **kwargs):
        pass  # whatever you want to state

    @classmethod
    def cast(cls, to_be_casted_obj):
        casted_obj = cls()
        casted_obj.__dict__ = to_be_casted_obj.__dict__
        return casted_obj

    # new methods you want to add
    # ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:58:16.067

这不是一个向下转换的问题（恕我直言）。peekfind() 创建一个 Peak 对象——它不能被向下转换，因为它不是 Psd_Peak 对象——然后你想从中创建一个 Psd_Peak 对象。在 C++ 之类的东西中，您可能会依赖默认的复制构造函数——但这也行不通，即使在 C++ 中也是如此，因为您的 Psd_Peak 类在其构造函数中需要更多参数。在任何情况下，python 都没有复制构造函数，所以你最终会得到相当冗长的 (fred=fred, jane=jane) 东西。

一个好的解决方案可能是创建一个对象工厂并将您想要的 Peak 对象类型传递给 peekfind() 并让它为您创建正确的对象。

```
def peak_factory(peak_type, index, *args, **kw):
    """Create Peak objects

    peak_type     Type of peak object wanted
       (you could list types)
    index         index
       (you could list params for the various types)
    """
    # optionally sanity check parameters here
    # create object of desired type and return
    return peak_type(index, *args, **kw)

def peakfind(peak_type, xdata, ydata, **kw) :
    # do some stuff...
    return peak_factory(peak_type, 
         1,
         0,
         1,
         .5,
         10,
         **kw)

# Find a peak in the data.
p = peakfind(Psd_Peak, np.random.rand(10), np.random.rand(10), depth=111, ampest=222) 
```

# c# - 通过继承实现类型安全 (2)

> ID：15187654
> 
> 赞同：0
> 
> 时间：2013-03-03T16:14:20.500
> 
> 标签：c#

这是对我之前的问题的扩展：[Type safety through inheritance](https://stackoverflow.com/questions/15186267/type-safety-through-inheritance)

我创建了一个新问题，而不是更新我的旧问题，因为这个问题更深入地研究了这个主题。

我最初的目的是声明一个返回实现类类型的对象的方法。一种这样`GetSimpleClone()`的方法可能如下所示：

我有一个`IEntity`声明方法的基本接口，`GetSimpleClone()`并由其他几个接口实现，例如`IPerson`.

```
public interface IEntity<T> : where T : IEntity<T>
{
   T GetSimpleClone();
}

public interface IPerson : IEntity<IPerson>
{
} 
```

该接口`IAddress`还实现了`IEntity`. 然而，另一个接口`IVenue`继承自`IAddress`. 正如我在开头所描述的，我希望`GetSimpleClone()`in 的方法`IAddress`返回一个 type 的对象，`IAddress`而 in 的同一个方法`IVenue`应该返回一个 type 的对象`IVenue`。因此，声明`IAddress`不同于`IPerson`它必须声明一个泛型类型本身：

```
public interface IAddress<T> : IEntity<T> where T : IAddress<T>
{   
}

public interface IVenue : IAddress<IVenue>
{
} 
```

现在的问题是，它`IPerson`有一个引用`IAddress`并且可以理解，编译器强迫我定义`IAddress`.

```
public interface IPerson : IEntity<IPerson>
{
   IAddress<"Compiler: Define Type!!"> Address { get; set; }
} 
```

我真的看不到这个问题的解决方案，并希望您能提供任何帮助，即使只是说根本没有解决方案。:)

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:26:38.323

为此，您需要引入另一个泛型：

```
public interface IPerson<T> : IEntity<IPerson<T>>
    where T : IAddress<T>
{
   IAddress<T> Address { get; set; }
} 
```

我能想到的更好的解决方案是将安全问题放在一边，并使用`IAddress`通用方法创建一个良好的基本接口，例如`getAddressString`，并将其用于您可能想要的所有类型的地址。

# java - 将旋转的矩形添加到路径而不分配内存

> ID：15187664
> 
> 赞同：0
> 
> 时间：2013-03-03T16:14:49.463
> 
> 标签：java, android, memory, matrix, 2d

如果我尝试在我的 Android 应用程序的 View 派生类中的 onDraw 期间分配任何内存，Eclipse/lint 会警告我在执行 onDraw 期间不应该分配内存。所以我试图想出将旋转的矩形附加到可能用于定义剪切边界的路径的最佳方法。我还想弄清楚如何将旋转的椭圆添加到这样的路径中。

我考虑过使用 Matrix.mapPoints 和矩形的 4 个角（使用预先分配的矩阵），但我目前没有预先分配的浮点数组来使用它，我不确定我想要如果有另一种方法，可以这样做。我应该使用 Math.atan2 来获取极坐标，偏移结果，然后使用 sin 和 cos 来计算新坐标，还是会比矩阵乘法有更多的开销？

是否有其他方法可以将旋转的矩形和椭圆添加到我应该考虑的剪切边界？

**编辑：**我也不清楚调用其他具有局部变量的函数是否会被视为内存分配。如果我创建这样的函数：

```
private void drawOperation(Operation op, Canvas canvas) {
    float coords[] = {0,0,0,0,0,0,0,0};
    ....
} 
```

该数组是在堆还是堆栈上创建的？它是否仍然构成在 onDraw 期间应该避免的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:42:15.163

我正在考虑这样的代码，其中 mMatrix、mRotationPath、mPoint 和 mPath 是预分配的对象：

```
mMatrix.setRotate(angle, mPoint.x, mPoint.y);
mRotationPath.rewind();
mRotationPath.addRect(mRect, Path.Direction.CW);
mPath.addPath(mRotationPath, mMatrix); 
```

# objective-c - 向 UITableViewCells 添加子视图会导致滚动时出现问题

> ID：15187666
> 
> 赞同：1
> 
> 时间：2013-03-03T16:15:06.153
> 
> 标签：objective-c, xcode, uitableview, addsubview

我完全不知道如何解决这个问题。所以我有一个 UITableView 和委托方法 cellForRowAtIndex: 如果单元格为零（表格视图的初始构建），我将向每个单元格添加几个子视图。一切正常，表格视图已构建，但是，当我在应用程序中向下滚动一点时，应用程序突然与 SIGBART 崩溃并给我错误 *******由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'+ [NSIndexPath setImage：]：无法识别的选择器发送到类0x3c361e68'* **这很奇怪，因为我什至没有在我的代码中的任何地方调用setImage方法。这是委托方法的代码。*

 *```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UIImageView* imageView;
UILabel* ttitle;
UILabel* ttitle2;
UILabel* ttitle3;
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    // Configure cell:
    // *** This section should configure the cell to a state independent of
    //  whatever row or section the cell is in, since it is only executed
    //  once when the cell is first created.

    imageView=[[UIImageView alloc]initWithFrame:CGRectMake(10.0, 11.0, 50.0, 50.0)];
    [imageView setContentMode:UIViewContentModeScaleAspectFill];
    imageView.layer.masksToBounds=YES;
    imageView.layer.cornerRadius=5.0;
    [cell.contentView addSubview:imageView];

    ttitle = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 7.0, 200, 20)] autorelease];
    ttitle.textColor= [UIColor blackColor];
    ttitle.numberOfLines=1;
    ttitle.backgroundColor=[UIColor clearColor];
    ttitle.font=[UIFont fontWithName:@"Arial Bold" size:15.0];
    [cell.contentView addSubview:ttitle];

    if (indexPath.row==0) {

        CGSize size=[[[data objectAtIndex:indexPath.row] valueForKey:@"content"] sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
        ttitle2 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 27.5, 200, size.height)] autorelease];
        ttitle2.textColor= [UIColor darkGrayColor];
        ttitle2.backgroundColor=[UIColor clearColor];
        ttitle2.numberOfLines=0;
        ttitle2.textAlignment = NSTextAlignmentLeft;
        ttitle2.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle2.font=[UIFont fontWithName:@"Arial" size:14.0];
        [cell.contentView addSubview:ttitle2];

        ttitle3 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, ttitle2.frame.origin.y+ttitle2.frame.size.height-8.0, 210, 40)] autorelease];
        ttitle3.textColor= [UIColor darkGrayColor];
        ttitle3.backgroundColor=[UIColor clearColor];
        ttitle3.numberOfLines=1;
        ttitle3.textAlignment = NSTextAlignmentLeft;
        ttitle3.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle3.font=[UIFont fontWithName:@"Arial" size:11.0];
        [cell.contentView addSubview:ttitle3];

    }
    else{

        CGSize size=[[[data objectAtIndex:indexPath.row] valueForKey:@"content"] sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
        ttitle2 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 27.0, 200, size.height)] autorelease];
        ttitle2.textColor= [UIColor darkGrayColor];
        ttitle2.backgroundColor=[UIColor clearColor];
        ttitle2.numberOfLines=0;
        ttitle2.textAlignment = NSTextAlignmentLeft;
        ttitle2.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle2.font=[UIFont fontWithName:@"Arial" size:14.0];
        [cell.contentView addSubview:ttitle2];

        ttitle3 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, ttitle2.frame.origin.y+ttitle2.frame.size.height-9.0, 210, 40)] autorelease];
        ttitle3.textColor= [UIColor darkGrayColor];
        ttitle3.backgroundColor=[UIColor clearColor];
        ttitle3.numberOfLines=1;
        ttitle3.textAlignment = NSTextAlignmentLeft;
        ttitle3.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle3.font=[UIFont fontWithName:@"Arial" size:11.0];
        [cell.contentView addSubview:ttitle3];

    }

}

// Customize cell:
// *** This section should customize the cell depending on what row or section
//  is passed in indexPath, since this is executed every time this delegate method
//  is called.
imageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[[data objectAtIndex:indexPath.row] valueForKey:@"thumbnail"]]]];

[ttitle setText:[[data objectAtIndex:indexPath.row] valueForKey:@"name"]];
[ttitle2 setText:[[data objectAtIndex:indexPath.row] valueForKey:@"content"]];

NSString* first=[[[data objectAtIndex:indexPath.row] valueForKey:@"hashtag"] stringByAppendingString:@"     "];
NSString* second =[first stringByAppendingString:[[data objectAtIndex:indexPath.row] valueForKey:@"place"]];
NSString* third=[second stringByAppendingString:@"        "];
NSString* fourth=[third stringByAppendingString:@"¤ "];
NSString* conversion=[[[data objectAtIndex:indexPath.row] valueForKey:@"counter"] stringValue];
NSString* fifth=[fourth stringByAppendingString:conversion];
[ttitle3 setText:fifth];

return cell; 
```

}

感谢帮助的家伙！

*更新的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UIImageView* imageView;
UILabel* ttitle;
UILabel* ttitle2;
UILabel* ttitle3;
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    // Configure cell:
    // *** This section should configure the cell to a state independent of
    //  whatever row or section the cell is in, since it is only executed
    //  once when the cell is first created.

    imageView=[[UIImageView alloc]initWithFrame:CGRectMake(10.0, 11.0, 50.0, 50.0)];
    [imageView setContentMode:UIViewContentModeScaleAspectFill];
    imageView.layer.masksToBounds=YES;
    imageView.layer.cornerRadius=5.0;
    imageView.tag=1;
    [cell.contentView addSubview:imageView];

    ttitle = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 7.0, 200, 20)] autorelease];
    ttitle.textColor= [UIColor blackColor];
    ttitle.numberOfLines=1;
    ttitle.tag=69;
    ttitle.backgroundColor=[UIColor clearColor];
    ttitle.font=[UIFont fontWithName:@"Arial Bold" size:15.0];
    [cell.contentView addSubview:ttitle];

    if (indexPath.row==0) {

        CGSize size=[[[data objectAtIndex:indexPath.row] valueForKey:@"content"] sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
        ttitle2 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 27.5, 200, size.height)] autorelease];
        ttitle2.textColor= [UIColor darkGrayColor];
        ttitle2.backgroundColor=[UIColor clearColor];
        ttitle2.numberOfLines=0;
        ttitle2.tag=70;
        ttitle2.textAlignment = NSTextAlignmentLeft;
        ttitle2.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle2.font=[UIFont fontWithName:@"Arial" size:14.0];
        [cell.contentView addSubview:ttitle2];

        ttitle3 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, ttitle2.frame.origin.y+ttitle2.frame.size.height-8.0, 210, 40)] autorelease];
        ttitle3.textColor= [UIColor darkGrayColor];
        ttitle3.backgroundColor=[UIColor clearColor];
        ttitle3.numberOfLines=1;
        ttitle3.tag=71;
        ttitle3.textAlignment = NSTextAlignmentLeft;
        ttitle3.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle3.font=[UIFont fontWithName:@"Arial" size:11.0];
        [cell.contentView addSubview:ttitle3];

    }
    else{

        CGSize size=[[[data objectAtIndex:indexPath.row] valueForKey:@"content"] sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
        ttitle2 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 27.0, 200, size.height)] autorelease];
        ttitle2.textColor= [UIColor darkGrayColor];
        ttitle2.backgroundColor=[UIColor clearColor];
        ttitle2.numberOfLines=0;
        ttitle2.tag=70;
        ttitle2.textAlignment = NSTextAlignmentLeft;
        ttitle2.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle2.font=[UIFont fontWithName:@"Arial" size:14.0];
        [cell.contentView addSubview:ttitle2];

        ttitle3 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, ttitle2.frame.origin.y+ttitle2.frame.size.height-9.0, 210, 40)] autorelease];
        ttitle3.textColor= [UIColor darkGrayColor];
        ttitle3.backgroundColor=[UIColor clearColor];
        ttitle3.numberOfLines=1;
        ttitle3.tag=71;
        ttitle3.textAlignment = NSTextAlignmentLeft;
        ttitle3.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle3.font=[UIFont fontWithName:@"Arial" size:11.0];
        [cell.contentView addSubview:ttitle3];

    }

    imageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[[data objectAtIndex:indexPath.row] valueForKey:@"thumbnail"]]]];

    [ttitle setText:[[data objectAtIndex:indexPath.row] valueForKey:@"name"]];
    [ttitle2 setText:[[data objectAtIndex:indexPath.row] valueForKey:@"content"]];

    NSString* first=[[[data objectAtIndex:indexPath.row] valueForKey:@"hashtag"] stringByAppendingString:@"     "];
    NSString* second =[first stringByAppendingString:[[data objectAtIndex:indexPath.row] valueForKey:@"place"]];
    NSString* third=[second stringByAppendingString:@"        "];
    NSString* fourth=[third stringByAppendingString:@"¤ "];
    NSString* conversion=[[[data objectAtIndex:indexPath.row] valueForKey:@"counter"] stringValue];
    NSString* fifth=[fourth stringByAppendingString:conversion];
    [ttitle3 setText:fifth];

}
else {
    imageView =[cell viewWithTag:1];
    ttitle=[cell viewWithTag:69];
    ttitle2=[cell viewWithTag:70];
    ttitle3=[cell viewWithTag:71];
}

//STUFFOUTSIDE

// Customize cell:
// *** This section should customize the cell depending on what row or section
//  is passed in indexPath, since this is executed every time this delegate method
//  is called.

return cell; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:39:45.970

问题是当重新使用单元格时，您的局部变量没有被初始化。这是 imageView 的当前流程：

```
UIImageView* imageView;

if (cell == nil)
{
    // Create imageView
    imageView=...
}

// If cell is being reused (ie cell is not nil) then imageView is nil at this point.
imageView.image=... 
```

当您重用表格视图单元格时，`tableView:dequeueReusableCellWithIdentifier:`返回一个实际的单元格而不是并且跳过`nil`初始化。`imageView`

您需要“找到”重用单元格中的 imageView 才能对其进行更改。

因此，我建议您像这样修改您的逻辑：

```
UIImageView* imageView;

if (cell == nil)
{
    // Create imageView
    imageView=...
}
else
{
    imageView = // get a reference to the imageView
}

imageView.image=... 
```

所以现在，当然，问题是“如何？”。

一种非常常见的方法是在`tag`创建视图时设置视图，以便以后可以轻松检索它。你会像这样使用这种技术：

```
// Use a unique tag number for each subview.
#define MY_IMAGEVIEW_TAG 1000

UIImageView* imageView;

if (cell == nil)
{
    // Create imageView
    imageView=... // Same as before
    imageView.tag = MY_IMAGEVIEW_TAG; 
}
else
{
    // This is a cell that is being re-used and was previously created.
    // Retrieve a reference to the existing image view that is already in the cell
    imageView = [cell viewWithTag:MY_IMAGEVIEW_TAG];
}

// Now imageView is "safe" to use whether it is a new cell or one that is reused!
imageView.image=... 
```

**注意：**如果你做了很多这样的事情，`UITableViewCell`为每个子视图创建一个具有属性的子类将使标签和 viewWithTag 的使用变得不必要，并且使你的代码更易于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:58:15.340

@Inafziger 已经发布了这个问题的正确答案，我只想更详细地解释一下为什么你会看到这个“奇怪”的崩溃。
不过，我不建议过度使用标签。创建一个 的子类可能是一个更好的主意`UITableViewCell`。

你没有初始化你的`imageView`和`ttitle`变量：

```
UIImageView *imageView; // imageView can point to anything now!
UILabel* ttitle; 
```

通常，当您声明局部变量以避免这种悬空指针时，您会将它们初始化为`nil`or `0`（无论什么是有意义的）。

因为您`cell`不会总是重用您的表格视图单元格`nil`，并且您的 if 子句不会被执行：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) { // Won't be executed if the cell could be dequeued!
    ...
    imageView = ...;
} 
```

因此，如果`cell`可以出队，您的`imageView`和`ttitle`变量在您使用它们时仍然没有被分配给任何东西！

然后，您将设置视图的属性：

```
imageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[[data objectAtIndex:indexPath.row] valueForKey:@"thumbnail"]]]];
[ttitle setText:[[data objectAtIndex:indexPath.row] valueForKey:@"name"]];
[ttitle2 setText:[[data objectAtIndex:indexPath.row] valueForKey:@"content"]] 
```

`imageView.image = ...;`与调用相同`[imageView setImage:...];`。您可以在这里阅读更多相关信息：http: [//www.cocoacast.com/cocoacast/?q=node /103](http://www.cocoacast.com/cocoacast/?q=node/103)

这就是所有东西都聚集在一起的时候：`imageView`没有初始化，你正在调用`-setImage:`它。轰隆隆，崩溃！

在你的情况下`imageView`指向`NSIndexPath`类。不过，这可能是任何事情。
因此，您有效地调用`-setImage:`了`NSIndexPath`该类（相当于: `+[NSIndexPath setImage:]`）并且应用程序崩溃并显示`+[NSIndexPath setImage:]: unrecognized selector sent to class 0x3c361e68`错误消息。*

# iphone - 如何将 UISwitch 的状态保存到文件

> ID：15187667
> 
> 赞同：0
> 
> 时间：2013-03-03T16:15:08.620
> 
> 标签：iphone, ios, objective-c, ipad, nsuserdefaults

关于 stackoverflow 的类似问题产生了以下组合：

`NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults]; [userDefaults setBool:switchState forKey:@"mySwitchValueKey"];`

和

`BOOL swichState = [userDefaults boolForKey:@"mySwitchValueKey"];`

我一直在尝试研究 NSUserDefaults，但我既不了解这些代码的作用，也不了解它们应该在我的程序中的什么位置。

* * *

谁能告诉我他们需要去哪里？为什么下面的代码不起作用？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    BOOL switchState = [[NSUserDefaults standardUserDefaults]  boolForKey:@"mySwitchValueKey"];
    if (switchState == YES) {
        [hard1ON setOn:TRUE];
    } else {
        [hard1ON setOn:FALSE];
    }
}

- (IBAction)switchValueChanged
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setBool:switchState forKey:@"mySwitchValueKey"];

    if (hard1ON.on) {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"theChange" object:nil];
    } else {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"theChange2" object:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:22:05.023

这两个语句用于创建一个实例，`NSUserDefaults`然后设置`switchState`in `standardUserDefaults`，即与您的应用程序一起使用。

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setBool:switchState forKey:@"mySwitchValueKey"]; 
```

`switchState`必须在此语句上方的任何位置声明为`BOOL switchState`.

从此语句`BOOL swichState = [userDefaults boolForKey:@"mySwitchValueKey"];`中，boolValue 被读回 swichState。

上面的代码应该在当你改变或翻转或移动到另一个视图时调用的方法中，假设 switchState 是一个类的本地属性。

如果它是全局的或共享的，它可以在任何地方，最合适的地方是`applicationSholdTerminate:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:24:28.303

*   前两行用于保存数据，因此在任何提交/保存按钮事件中，您都可以使用此行来保存数据。否则，您可以在每次开关值更改时保存。
*   第二行用于检索您保存的数据，因此您可以在重新启动应用程序时使用它。这样您就可以了解上次启动时保存了哪些数据。据此，您可以继续编写代码。

有关更多详细信息，请查看此[链接](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)，它可能会为您提供有关 NSUserDefaults 的简要说明。

希望这可以帮助。

# directoryinfo - C#如何通过避免只读文件来获取目录信息

> ID：15187672
> 
> 赞同：0
> 
> 时间：2013-03-03T16:15:51.250
> 
> 标签：directoryinfo

如何在不获取只读文件或文件夹的情况下获取目录信息这是我的代码，但是当文件或文件夹为只读时返回错误！

```
var dirinfo = new DirectoryInfo(Path_Tb_Path.Text);
var entries = dirinfo.GetFileSystemInfos("**", SearchOption.AllDirectories); 
```

# c++ - Lua、线程和 C++ 异常

> ID：15187673
> 
> 赞同：0
> 
> 时间：2013-03-03T16:15:55.060
> 
> 标签：c++, multithreading, lua, exception-safety

我正计划向我的开发团队建议我们开始为我们目前正在进行的项目寻找 lua 而不是 C++。关于这个问题，我有一个问题需要先弄清楚。

使用当前的 SDK，我们不允许使用 C++ 异常，因为它在多线程应用程序（使用该 SDK 创建）中不安全。实际上，这是允许的，只是不鼓励......但是除非我们通过 -fno-exceptions，否则程序将无法编译，所以......是的......

反正。由于 Lua 在它自己的 VM 中运行并且是纯 C 语言...... Lua 中的异常会“安全”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:07:03.503

如果构成 LUA 解释器的 C 代码就您的 SDK 的限制而言没问题，那么在 LUA 中编码并使用该解释器执行的任何内容也都可以。但是，如果 LUA 解释器本身正在使用您未命名的 SDK……这是一个只有您或 SDK 供应商才能回答的问题。

# sql-server - 使用 ORDER BY 子句创建视图

> ID：15187676
> 
> 赞同：52
> 
> 时间：2013-03-03T16:16:11.587
> 
> 标签：sql-server, database, tsql, view, sql-server-2008-r2

我正在尝试使用`ORDER BY`子句创建视图。我已在 SQL Server 2012 SP1 上成功创建它，但是当我尝试在 SQL Server 2008 R2 上重新创建它时，我收到此错误：

> 消息 102，级别 15，状态 1，过程 TopUsers，第 11 行
> “偏移”附近的语法不正确。

创建视图的代码是

```
CREATE View [dbo].[TopUsersTest] 
as 
select 
u.[DisplayName]  , sum(a.AnswerMark) as Marks
From Users_Questions us inner join [dbo].[Users] u
on u.[UserID] = us.[UserID] 
inner join [dbo].[Answers] a
on a.[AnswerID] = us.[AnswerID]
group by [DisplayName] 
order by Marks desc
OFFSET 0 ROWS 
```

======================

这是图表的屏幕截图 ![](../Images/b32a09f23c5b809520aaf87402f8d116.png)

我希望返回用户的`DisplayName`和`UserTotalMarks`排序这个结果的顺序，所以结果最大的用户排在最前面。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-03T17:27:56.723

我不确定你认为这`ORDER BY`是为了什么？即使您*确实*`ORDER BY`以合法的方式（例如通过添加子句）放入视图`TOP`，如果您只是从视图中选择，例如`SELECT * FROM dbo.TopUsersTest;`没有`ORDER BY`子句，SQL Server 可以自由地以最有效的方式返回行，这不会不一定符合您期望的顺序。这是因为`ORDER BY`它重载了，因为它试图服务于两个目的：对结果进行排序并指定要包含在`TOP`. 在这种情况下，`TOP`总是获胜（尽管取决于选择用于扫描数据的索引，您可能会观察到您的订单按预期工作 - 但这只是巧合）。

**为了完成您想要的，您需要将`ORDER BY`子句添加到从视图中提取数据的查询中，而不是添加到视图本身的代码中。**

所以你的视图代码应该是：

```
CREATE VIEW [dbo].[TopUsersTest] 
AS 
  SELECT 
    u.[DisplayName], SUM(a.AnswerMark) AS Marks
  FROM
    dbo.Users_Questions AS uq
    INNER JOIN [dbo].[Users] AS u
      ON u.[UserID] = us.[UserID] 
    INNER JOIN [dbo].[Answers] AS a
      ON a.[AnswerID] = uq.[AnswerID]
    GROUP BY u.[DisplayName]; 
```

这`ORDER BY`是没有意义的，所以甚至不应该包括在内。

* * *

为了说明，使用 AdventureWorks2012，下面是一个示例：

```
CREATE VIEW dbo.SillyView
AS
  SELECT TOP 100 PERCENT 
    SalesOrderID, OrderDate, CustomerID , AccountNumber, TotalDue
  FROM Sales.SalesOrderHeader
  ORDER BY CustomerID;
GO

SELECT SalesOrderID, OrderDate, CustomerID, AccountNumber, TotalDue
FROM dbo.SillyView; 
```

结果：

```
SalesOrderID   OrderDate   CustomerID   AccountNumber   TotalDue
------------   ----------  ----------   --------------  ----------
43659          2005-07-01  29825        10-4020-000676  23153.2339
43660          2005-07-01  29672        10-4020-000117  1457.3288
43661          2005-07-01  29734        10-4020-000442  36865.8012
43662          2005-07-01  29994        10-4020-000227  32474.9324
43663          2005-07-01  29565        10-4020-000510  472.3108 
```

您可以从执行计划中看到`TOP`和`ORDER BY`已被 SQL Server 完全忽略并优化掉：

![在此处输入图像描述](../Images/a7ac78c7b7c7bc663607a9b78f02fee3.png)

根本没有`TOP`运算符，也没有排序。SQL Server 已经完全优化了它们。

现在，如果您将视图更改为`ORDER BY SalesID`，那么您将碰巧得到视图所声明的顺序，但这只是 - 如前所述 - 巧合。

但是，如果您更改外部查询以执行`ORDER BY`您想要的：

```
SELECT SalesOrderID, OrderDate, CustomerID, AccountNumber, TotalDue
FROM dbo.SillyView
ORDER BY CustomerID; 
```

您可以按照您想要的方式排序结果：

```
SalesOrderID   OrderDate   CustomerID   AccountNumber   TotalDue
------------   ----------  ----------   --------------  ----------
43793          2005-07-22  11000        10-4030-011000  3756.989
51522          2007-07-22  11000        10-4030-011000  2587.8769
57418          2007-11-04  11000        10-4030-011000  2770.2682
51493          2007-07-20  11001        10-4030-011001  2674.0227
43767          2005-07-18  11001        10-4030-011001  3729.364 
```

并且该计划仍然优化了视图中的`TOP`/ `ORDER BY`，但是添加了一个排序（请注意，代价不小）以显示按以下顺序排序的结果`CustomerID`：

![在此处输入图像描述](../Images/ac7343633c973e7b63ec57763889b32c.png)

所以，故事的寓意，**不要把 ORDER BY 放在视图中。将 ORDER BY 放在引用它们的查询中。**如果排序很昂贵，您可能会考虑添加/更改索引以支持它。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-12-16T06:26:00.767

我已经成功强制使用订购视图

```
SELECT TOP 9999999 ... ORDER BY something 
```

不幸的是，由于[这里](https://stackoverflow.com/a/1306381/238419)`SELECT TOP 100 PERCENT`的问题，使用不起作用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-27T09:17:33.590

从 Sql 2012 开始，您可以使用 OFFSET 强制在视图和子查询中排序

```
SELECT      C.CustomerID,
            C.CustomerName,
            C.CustomerAge
FROM        dbo.Customer C
ORDER BY    CustomerAge OFFSET 0 ROWS; 
```

警告：这应该只用于小列表，因为即使视图上的进一步连接或过滤器减小了它的大小，OFFSET 也会强制评估整个视图！

没有什么好的方法可以在没有副作用的情况下强制在视图中进行排序，这是有充分理由的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-19T16:14:04.660

正如这篇文章中的一条评论建议使用存储过程来返回数据......我认为这是最好的答案。就我而言，我所做的是编写了一个`View`封装查询逻辑和连接的函数，然后我编写了一个`Stored Proc`返回排序后的数据，并且 proc 还包括其他增强功能，例如用于过滤数据的参数。

现在您必须选择查询视图，这允许您进一步操作数据。或者您可以选择执行存储过程，这样可以更快、更精确地输出。

**STORED PROC 执行查询数据**

[![执行 [olap].[uspUsageStatsLogSessionsRollup]](../Images/446658c981c97a6e0b4bda97ce48ead2.png)](https://i.stack.imgur.com/7NwBA.png)

**查看定义**

```
USE [DBA]
GO

/****** Object:  View [olap].[vwUsageStatsLogSessionsRollup]    Script Date: 2/19/2019 10:10:06 AM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

--USE DBA
-- select * from olap.UsageStatsLog_GCOP039 where CubeCommand='[ORDER_HISTORY]'
;

ALTER VIEW [olap].[vwUsageStatsLogSessionsRollup] as
(
    SELECT --*
        t1.UsageStatsLogDate
        , COALESCE(CAST(t1.UsageStatsLogDate AS nvarchar(100)), 'TOTAL- DATES:') AS UsageStatsLogDate_Totals
        , t1.ADUserNameDisplayNEW
        , COALESCE(t1.ADUserNameDisplayNEW, 'TOTAL- USERS:') AS ADUserNameDisplay_Totals
        , t1.CubeCommandNEW
        , COALESCE(t1.CubeCommandNEW, 'TOTAL- CUBES:') AS CubeCommand_Totals
        , t1.SessionsCount
        , t1.UsersCount
        , t1.CubesCount
    FROM
    (
        select 
            CAST(olapUSL.UsageStatsLogTime as date) as UsageStatsLogDate
            , olapUSL.ADUserNameDisplayNEW
            , olapUSL.CubeCommandNEW
            , count(*) SessionsCount
            , count(distinct olapUSL.ADUserNameDisplayNEW) UsersCount
            , count(distinct olapUSL.CubeCommandNEW) CubesCount
        from 
            olap.vwUsageStatsLog olapUSL
        where CubeCommandNEW != '[]'
        GROUP BY CUBE(CAST(olapUSL.UsageStatsLogTime as date), olapUSL.ADUserNameDisplayNEW, olapUSL.CubeCommandNEW )
            ----GROUP BY 
            ------GROUP BY GROUPING SETS
            --------GROUP BY ROLLUP
    ) t1

    --ORDER BY
    --  t1.UsageStatsLogDate DESC
    --  , t1.ADUserNameDisplayNEW
    --  , t1.CubeCommandNEW
)
;

GO 
```

**存储过程定义**

```
USE [DBA]
GO

/****** Object:  StoredProcedure [olap].[uspUsageStatsLogSessionsRollup]    Script Date: 2/19/2019 9:39:31 AM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

-- =============================================
-- Author:      BRIAN LOFTON
-- Create date: 2/19/2019
-- Description: This proceedured returns data from a view with sorted results and an optional date range filter.
-- =============================================
ALTER PROCEDURE [olap].[uspUsageStatsLogSessionsRollup]
    -- Add the parameters for the stored procedure here
    @paramStartDate date = NULL,
    @paramEndDate date = NULL,
    @paramDateTotalExcluded as int = 0,
    @paramUserTotalExcluded as int = 0,
    @paramCubeTotalExcluded as int = 0
AS

BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @varStartDate as date 
        = CASE  
            WHEN @paramStartDate IS NULL THEN '1900-01-01' 
            ELSE @paramStartDate 
        END
    DECLARE @varEndDate as date 
        = CASE  
            WHEN @paramEndDate IS NULL THEN '2100-01-01' 
            ELSE @paramStartDate 
        END

    -- Return Data from this statement
    SELECT 
        t1.UsageStatsLogDate_Totals
        , t1.ADUserNameDisplay_Totals
        , t1.CubeCommand_Totals
        , t1.SessionsCount
        , t1.UsersCount
        , t1.CubesCount
        -- Fields with NULL in the totals
            --  , t1.CubeCommandNEW
            --  , t1.ADUserNameDisplayNEW
            --  , t1.UsageStatsLogDate
    FROM 
        olap.vwUsageStatsLogSessionsRollup t1
    WHERE

        (
            --t1.UsageStatsLogDate BETWEEN @varStartDate AND @varEndDate
            t1.UsageStatsLogDate BETWEEN '1900-01-01' AND '2100-01-01'
            OR t1.UsageStatsLogDate IS NULL
        )
        AND
        (
            @paramDateTotalExcluded=0
            OR (@paramDateTotalExcluded=1 AND UsageStatsLogDate_Totals NOT LIKE '%TOTAL-%')
        )
        AND
        (
            @paramDateTotalExcluded=0
            OR (@paramUserTotalExcluded=1 AND ADUserNameDisplay_Totals NOT LIKE '%TOTAL-%')
        )
        AND
        (
            @paramCubeTotalExcluded=0
            OR (@paramCubeTotalExcluded=1 AND CubeCommand_Totals NOT LIKE '%TOTAL-%')
        )
    ORDER BY
            t1.UsageStatsLogDate DESC
            , t1.ADUserNameDisplayNEW
            , t1.CubeCommandNEW

END

GO 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-11T07:10:35.447

错误是：`FROM (SELECT empno,name FROM table1 where location = 'A' ORDER BY emp_no)`

解决方案是：`FROM (SELECT empno,name FROM table1 where location = 'A') ORDER BY emp_no`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-26T10:52:36.950

请尝试以下逻辑。

```
SELECT TOP(SELECT COUNT(SNO) From MyTable) * FROM bar ORDER BY SNO 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-11-21T14:37:33.853

只需在 Select 中使用 TOP 100 Percent：

```
 CREATE VIEW [schema].[VIEWNAME] (
         [COLUMN1],
         [COLUMN2],
         [COLUMN3],
         [COLUMN4])
     AS 
        SELECT TOP 100 PERCENT 
         alias.[COLUMN1],
         alias.[COLUMN2],
         alias.[COLUMN3],
         alias.[COLUMN4]
        FROM 
           [schema].[TABLENAME] AS alias
          ORDER BY alias.COLUMN1
     GO 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-10-02T18:07:31.170

为了向视图添加 ORDER BY，请执行以下操作

```
CREATE VIEW [dbo].[SQLSTANDARDS_PSHH]
AS

SELECT TOP 99999999999999
Column1,
Column2
FROM
dbo.Table
Order by
Column1 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-04-19T08:58:41.100

使用程序

Create proc MyView as begin SELECT TOP 99999999999999 Column1, Column2 FROM dbo.Table Order by Column1 end

**执行程序**

执行我的视图

# c# - CompareValidator 不适用于单个数字

> ID：15187677
> 
> 赞同：1
> 
> 时间：2013-03-03T16:16:19.237
> 
> 标签：c#, asp.net

我在下面使用了比较验证器来比较 ItemTemplate 中 gridview 的 2 个文本框值...问题是当我输入 2 位数字时，它不允许单个数字值。并且还允许 3 位值

```
<asp:CompareValidator ID="CompareValidator"
                      runat="server"
                      ErrorMessage="Attended Lectures must be Lesser!"
                      ControlToValidate="tbattendedlectures"
                      ControlToCompare="tbtotalattendence"  
                      Display="Dynamic" 
                      Operator="LessThanEqual" 
                      ValidationGroup="bottom">*</asp:CompareValidator> 
```

*   如果我在->中输入“12”`tb-1`和 16`tb-2``true`
*   `tb-1`如果我在-->中输入“2”`false`
*   `tb-1`如果我在-->中输入“02”`true`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:28:24.313

将[`Type`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx)验证器上的属性设置为`Integer`：

```
<asp:CompareValidator ID="CompareValidator" runat="server" Type="Integer"
    (...) /> 
```

否则，值将作为字符串进行比较，这就是您得到错误结果的原因。

# heroku - 如何使用 Heroku 托管个人网站？

> ID：15187678
> 
> 赞同：0
> 
> 时间：2013-03-03T16:16:19.707
> 
> 标签：heroku, frontend

我想使用 Heroku 来托管一个包含 HTML、CSS 和 JS 文件以及一些 jpeg 和 gif 文件的网站。

我知道如何使用 Rails 应用程序执行此操作；

```
heroku create --stack cedar 
```

似乎雪松堆栈创建了一个适合 Rails、Java 等应用程序的存储库，因为错误消息是

```
Heroku push rejected, no Cedar-supported app detected 
```

当我尝试启动该应用程序时，它只会说；赫罗库 | 欢迎使用您的新应用！

这是一个链接：[http ://afternoon-brook-2543.herokuapp.com/](http://afternoon-brook-2543.herokuapp.com/)

所以我想知道如何将一些 JS、HTML、CSS 和图像文件托管。也许另一个命令可以创建一个简单的网站堆栈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:58:21.513

如果您将根文件保存为 index.php，那么 Heroku 会将其检测为 PHP 应用程序 - 它实际上不需要包含 PHP 代码，只需将其命名即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T20:55:38.667

如果您想将个人网站发送到 Heroku，请创建一个连接到您的网站的 index.php 文件。启动该应用程序，因为它是一个 PHP 应用程序。您将能够轻松启动该应用程序！

希望这有帮助！

# iphone - 在栈顶访问 UINavigationController

> ID：15187681
> 
> 赞同：1
> 
> 时间：2013-03-03T16:16:52.107
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, storyboard, uinavigationitem

![在此处输入图像描述](../Images/12145ba7ceea9830405f0975397b87dd.png) 如何从堆栈顶部的 UINavigationController 获取对 UINavigationController 的 backBarButtonItem 的引用。在某些情况下，我想禁用返回，直到某些网络代码完成。

> `self.parentViewController.navigationItem.backBarButtonItem.target = self;` `self.parentViewController.navigationItem.backBarButtonItem.action = @sel...;`

委托方法不起作用

> `- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item`

也不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:10:00.693

一个答案和一个建议：

答案：我建议您稍微更改您的 MVC 模型，使模型中的 BOOL 属性根据网络活动是否完成而打开或关闭，然后使用您的 QuestionsVC 采用的委托/协议来更新后退按钮设置随着该属性的变化。您需要在 QuestionsVC 的委托方法中添加以下内容：

```
[self.tabBarController.navigationItem setHidesBackButton:YES animated:YES]; 
```

我测试了它并且它有效。

建议：从不建议将 UITabBarController 放在 UINavigationController 中（仅推荐相反）。在您深入了解您的项目之前，我会做出相应的调整。

更新：如果您愿意，我可以理解需要一个 mainVC 作为启动 VC，并带有一个“启动”按钮。您是正确的，您需要一个 NavController 才能推送/弹出 VC 并在 Storyboard 中使用 segue。但这不是显示 VC 序列的唯一方法，您可以展示/关闭 VC。所以在你的情况下：

1-我会删除第一个 NavController

2- 通过将 NavController 左侧的箭头移动到 MainVC 左侧，使 MainVC 成为起始 VC（入口点）

3- 断开主 VC 与 TabBar 控制器的连接（删除该链接），因为如果没有导航控制器，您将无法在 SB 中使用 segues。您将必须实例化并呈现该选项卡栏控制器。

4- 添加一个新的对象文件 (.m/.h) - UITabBarController 的子类，并将 IB 中的 tabBarController 的类更改为您的子类的名称。如果它没有显示在 IB 的类列表的下拉列表中，您可能必须构建/清理或重新启动 xcode。

5- 在 mainVC 中创建一个 IBAction 方法并将其链接到 Main VC 中的按钮。

6- 在该方法中（在您的主 VC 中），添加以下代码：

```
yourTabBarControllerSubClassName*  myTabController= [self.storyboard instantiateViewControllerWithIdentifier:@"theTab"];
[self presentViewController:myTabController animated:YES completion:nil]; 
```

7- 确保在您的 SB 中选择标签栏控制器并在身份检查器中，将 SB ID 设置为“theTab”并选中“使用 SB ID”。

8- 如果问题 VC 或状态表 VC 在每个问题中都有一系列 VC，您可以将每个 VC 嵌入到导航控制器中，这样就可以了。

在这种情况下，您可能无需担心该后退按钮，因为它不再存在！

祝你好运

希望这可以帮助。

# c# - 无法以 Windows 形式将类型“System.Array”隐式转换为“string[]”

> ID：15187682
> 
> 赞同：0
> 
> 时间：2013-03-03T16:16:58.563
> 
> 标签：c#, arrays

我的 winforms 应用程序（c#）中有一个函数（function1），它返回一个数组

函数内部1

```
public array function1(string value)
{
string[] array = new string[12];
     //assigning values to the array elements....
retrun array;
} 
```

我这样称呼这个函数

```
string id="Some id";
string[] array2 = new string[12];
array2=this.function1(id); 
```

但它给了我错误

> 无法将类型“System.Array”隐式转换为“string[]”。存在显式转换（您是否缺少演员表？）

请高手帮帮我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T16:19:25.207

改变

```
public array function1(string value) 
```

至

```
public string[] function1(string value) 
```

在您的使用示例中，您不需要`new string[12]`事先将数组初始化为，因为您的函数无论如何都会返回一个新数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:20:21.823

function1 的签名应该是`public string[] function1(string value)`. 返回类型`array`与类型的变量不匹配`string[]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T16:26:10.033

这有效，但不确定问题是什么：

```
public Form1()
{
    InitializeComponent();
    string id = "Some id"; 
    string[] array2 = new string[12]; 
    array2 = this.function1(id);
}

public string[] function1(string value)
{
    string[] array = new string[12];
    array[0] = value; // for example
    return array;
} 
```

# mysql - Linux 12.04 上的 Lampp、Xampp 中的 MySQL 停用

> ID：15187687
> 
> 赞同：1
> 
> 时间：2013-03-03T16:17:29.607
> 
> 标签：mysql, linux, apache2, xampp, lampp

我在我的 Ubuntu 12.04 (Mint 13 maya) 操作系统上新安装了 xampp-linux-1.8.1。运行lampp时，我得到：

```
/opt/lampp/lampp start
Starting XAMPP for Linux 1.8.1...
XAMPP: XAMPP-Apache is already running.
XAMPP: Another MySQL daemon is already running.
XAMPP: XAMPP-ProFTPD is already running.
XAMPP for Linux started. 
```

在：localhost/xampp/ MySQL 数据库已停用！！！

```
ps -aux | grep 'mysql'
Warning: bad ps syntax, perhaps a bogus '-'? See http://procps.sf.net/faq.html     mysql     3159  0.0  0.9 316264 31880 ?        Ssl  16:48   0:00 /usr/sbin/mysqld
root      4745  0.0  0.0   4648   840 pts/5    S+   17:02   0:00 grep --color=auto mysql 
```

当我试图停止 /usr/sbin/mysqld 但无法使用此命令停止时！！！

```
/usr/sbin/mysqld stop 
```

请问我需要帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:04:50.133

我已经以这种方式解决了这个问题：

```
sudo chmod -R 777 /opt/lampp
sudo chown -hR nobody /opt/lampp
sudo chmod -R 755 /opt/lampp 
```

然后停止其他mysqld运行：

```
sudo service mysql stop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T11:19:30.120

也有这个问题，经过将近 2 个小时的故障排除后，我发现这是因为我的系统上还运行了其他 Apache 和 MySQL 软件包。删除了所有 Apache 和 MySQL 软件包并再次重新安装了 XAMPP。成功。

# google-apps-script - 在电子表格的 App 脚本中选择连续范围

> ID：15187688
> 
> 赞同：2
> 
> 时间：2013-03-03T16:17:31.797
> 
> 标签：google-apps-script, google-sheets

是否可以获得围绕特定单元格的范围，类似于电子表格中的 Ctrl+A？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T04:45:11.727

我有许多电子表格，其中表格是由`QUERY()`函数创建的，因此边界很灵活。过去，我曾求助于设置命名范围，其大小是我预期的 QUERY 结果所需的最大尺寸，并将这些命名范围用于其他操作。

***不再！***

这是一个实用函数，`getContiguousRange()`它接受 A1 表示法中的单元格位置，并返回`Range`包含它的连续单元格的位置。此代码[在 gist](https://gist.github.com/mogsdad/5088074)中可用。

```
/**
 * Return the contiguous Range that contains the given cell.
 *
 * @param {String} cellA1 Location of a cell, in A1 notation.
 * @param {Sheet} sheet   (Optional) sheet to examine. Defaults
 *                          to "active" sheet.
 *
 * @return {Range} A Spreadsheet service Range object.
 */
function getContiguousRange(cellA1,sheet) {
  // Check for parameters, handle defaults, throw error if required is missing
  if (arguments.length < 2) 
    sheet = SpreadsheetApp.getActiveSheet();
  if (arguments.length < 1)
    throw new Error("getContiguousRange(): missing required parameter.");

  // A "contiguous" range is a rectangular group of cells whose "edge" contains
  // cells with information, with all "past-edge" cells empty.
  // The range will be no larger than that given by "getDataRange()", so we can
  // use that range to limit our edge search.
  var fullRange = sheet.getDataRange();
  var data = fullRange.getValues();

  // The data array is 0-based, but spreadsheet rows & columns are 1-based.
  // We will make logic decisions based on rows & columns, and convert to
  // 0-based values to reference the data.
  var topLimit = fullRange.getRowIndex(); // always 1
  var leftLimit = fullRange.getColumnIndex(); // always 1
  var rightLimit = fullRange.getLastColumn();
  var bottomLimit = fullRange.getLastRow();

  // is there data in the target cell? If no, we're done.
  var contiguousRange = SpreadsheetApp.getActiveSheet().getRange(cellA1);
  var cellValue = contiguousRange.getValue();
  if (cellValue = "") return contiguousRange;

  // Define the limits of our starting dance floor
  var minRow = contiguousRange.getRow();
  var maxRow = minRow;
  var minCol = contiguousRange.getColumn();
  var maxCol = minCol;
  var chkCol, chkRow;  // For checking if the edge is clear

  // Now, expand our range in one direction at a time until we either reach
  // the Limits, or our next expansion would have no filled cells. Repeat
  // until no direction need expand.
  var expanding;
  do {
    expanding = false;
    // Move it to the left
    if (minCol > leftLimit) {
      chkCol = minCol - 1;
      for (var row = minRow; row <= maxRow; row++)  {
        if (data[row-1][chkCol-1] != "") {
          expanding = true;
          minCol = chkCol; // expand left 1 column
          break;
        }
      }
    }

    // Move it on up
    if (minRow > topLimit) {
      chkRow = minRow - 1;
      for (var col = minCol; col <= maxCol; col++)  {
        if (data[chkRow-1][col-1] != "") {
          expanding = true;
          minRow = chkRow; // expand up 1 row
          break;
        }
      }
    }

    // Move it to the right
    if (maxCol < rightLimit) {
      chkCol = maxCol + 1;
      for (var row = minRow; row <= maxRow; row++)  {
        if (data[row-1][chkCol-1] != "") {
          expanding = true;
          maxCol = chkCol; // expand right 1 column
          break;
        }
      }
    }

    // Then get on down
    if (maxRow < bottomLimit) {
      chkRow = maxRow + 1;
      for (var col = minCol; col <= maxCol; col++)  {
        if (data[chkRow-1][col-1] != "") {
          expanding = true;
          maxRow = chkRow; // expand down 1 row
          break;
        }
      }
    }

  } while (expanding);  // Lather, rinse, repeat

  // We've found the extent of our contiguous range - return a Range object.
  return sheet.getRange(minRow, minCol, (maxRow - minRow + 1), (maxCol - minCol + 1))
} 
```

作为一个测试，考虑这个电子表格。它有两个连续的范围，都有参差不齐的边缘。 ![电子表格屏幕截图](../Images/2b4a7e282e1ce76afadb9fb57d836547.png)

这是我们的测试功能：

```
function testRanges() {
  var range1 = getContiguousRange("C3").getA1Notation();
  var range2 = getContiguousRange("B8").getA1Notation();
  debugger; // Pause if running in debugger
} 
```

这就是我们得到的：

![调试器结果](../Images/31b7f469c04a380807e8afd3ef543b3a.png)

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-09T18:12:19.253

我在一个包含多张工作表的工作表中尝试了上述方法，由于缺乏声誉，我无法对此发表评论，发现如果更改行会更好： var contiguousRange = SpreadsheetApp.getActiveSheet().getRange(cellA1) ; 使用 var contiguousRange = sheet.getRange(cellA1);

# git - .gitconfig 中的 [core] 有什么作用，如何设置？

> ID：15187693
> 
> 赞同：5
> 
> 时间：2013-03-03T16:18:02.730
> 
> 标签：git, git-config

我想知道 [core] 做什么，以及如何设置它。我发现我的主目录中的 .gitconfig 文件是这样的：

```
[core]
        autocrlf = input
        safecrlf = true

[user]
        name =  
        email = 
```

在另一个主目录中，它看起来像这样：

```
[user]
        name =
        email = 
[core]
        excludesfile = /Users/chenfl84/.gitignore_global
[difftool "sourcetree"]
        cmd = opendiff \"$LOCAL\" \"$REMOTE\"
        path =
[mergetool "sourcetree"]
        cmd = /Applications/SourceTree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
        trustExitCode = true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:23:33.027

请参阅[git-config(1)](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)手册页，或运行`git help config`以获取有关如何安排 Git 配置的一般信息。

该`[core]`部分指的是控制 Git 行为“核心”的事物：如何识别文件和更新、缓存、*压缩**等*。

 *默认值通常——几乎总是——你想要的，但由于许多人*确实*想要自定义`*crlf`选项，所以它们已经明确并放在便于更改的地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T16:19:35.737

每个都`[section]`开始一个包含值的部分。您可以手动编辑文件，或使用`git config`，例如

```
git config --global core.name Pippi  # < value
#            section ^     ^ key 
```

`git help config`有一个选项列表。*

# python - Django 使用动态 SMTP 设置发送电子邮件

> ID：15187697
> 
> 赞同：3
> 
> 时间：2013-03-03T16:18:18.860
> 
> 标签：python, django, django-models

我正在尝试使 EMAIL_HOST 设置在管理员中可配置，我将创建一个包含必填字段的模型，例如：

*   EMAIL_HOST
*   EMAIL_HOST_USER
*   EMAIL_HOST_PASSWORD
*   EMAIL_PORT

但是如何使用 send_mail 在视图中使用这些字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:29:23.637

如果要使用`send_mail`，则必须创建自己的[电子邮件后端](https://docs.djangoproject.com/en/dev/topics/email/#defining-a-custom-email-backend)，该后端使用您的自定义设置，然后将其传递给`send_mail`属性`connection`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-09T11:25:30.877

**在独立于 Django 设置的管理页面中使用自定义配置的 SMTP 设置**发送邮件：

 **```
from django.core import mail
from django.core.mail.backends.smtp import EmailBackend
from <'Your SMTP setting in admin'> import <'Your model'>

def send_mail(subject, contact_list, body): 
    try:
        con = mail.get_connection()
        con.open()
        print('Django connected to the SMTP server')
        mail_setting = <'Your model'>.objects.last()
        host = mail_setting.host
        host_user = mail_setting.host_user
        host_pass = mail_setting.host_pass
        host_port = mail_setting.host_port
        mail_obj = EmailBackend(
            host=host,
            port=host_port,
            password=host_pass,
            username=host_user,
            use_tls=True,
            timeout=10)
        msg = mail.EmailMessage(
            subject=subject,
            body=body,
            from_email=host_user,
            to=[contact_list],
            connection=con)
        mail_obj.send_messages([msg])
        print('Message has been sent.')
        mail_obj.close()
        return True

    except Exception as _error:
        print('Error in sending mail >> {}'.format(_error))
        return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-13T08:54:04.397

这对我有用

```
from django.core.mail import EmailMessage
from django.core.mail.backends.smtp import EmailBackend

config = Configuration.objects.get(**lookup_kwargs)

try:

    backend = EmailBackend(
        host=config.host,
        port=config.port,
        password=config.password,
        username=config.username,
        use_tls=config.use_tls,
        fail_silently=config.fail_silently
    )

    mail = EmailMessage(
        subject="subject",
        body="body",
        from_email=config.username,
        to=["email@gmail.com"],
        connection=backend,
    )
    mail.send()

except Exception as err:
    print(err) 
```**

# php - 使用 AJAX 和 PHP 登录

> ID：15187699
> 
> 赞同：0
> 
> 时间：2013-03-03T16:18:40.063
> 
> 标签：php, ajax

我正在尝试使用 AJAX 和 PHP 创建登录以更流畅地显示错误消息。

我的 HTML

```
<form>
    <input type="email" placeholder="Email Address" id="loginMail" name="loginMail" class="text"> 
    <input type="password" placeholder="Password" id="pass" name="pass" class="text"><br><br>
    <input type="checkbox" name="autologin" value="1">  Remember me:  | <a href="#">Forgot password?</a><br/><br>
    <input type="submit" name="submitLogin" id="submitLogin" class="submit" value="Sign In"><br />
</form> 
```

我的Javascript：

```
$('#submitLogin').click(function()
{
    var email = $('#loginMail').val();
    var pass = $('#pass').val();
    $.post('login.php', 
        {email: email, pass: pass}, 
        function(data)
        {
            alert(data);
        });
}); 
```

我的 PHP

```
<?php
include('database.php');
$pdo = new database();

$email = $_POST['email'];
$pass = md5($_POST['pass']);
#$email = 'web.de';
#$pass = 'pw';

$qry = $pdo->pdo->prepare("SELECT * FROM userbasics WHERE email = :email AND pass =     :pass");
$qry->bindParam(':email', $email);
$qry->bindParam(':pass', $pass);
$qry->execute();
#$result = $qry->fetchAll();
$count = $qry->rowCount();

if($count == 1){
    echo "Eingeloggt!"; 
    header("Location: http://www.google.de");
}
else{
    echo "E-Mailadresse oder Passwort falsch!"; 
}

/*foreach($result as $row){
    echo $row['email']; 
}*/

?> 
```

当我只是用定义的数据调用 PHP 脚本时，它会返回我应该做的事情。所以我猜这是Javascript-Part的一个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:28:32.037

在php中更改以下代码

```
if($count == 1){
echo "Eingeloggt!"; 
header("Location: http://www.google.de");
 }
else{
  echo "E-Mailadresse oder Passwort falsch!"; 
} 
```

至

```
if($count == 1){
echo "Eingeloggt!"; 
} else{
  echo "E-Mailadresse oder Passwort falsch!"; 
}
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:34:55.743

你的代码 -

```
if($count == 1){
    echo "Eingeloggt!"; 
    header("Location: http://www.google.de");
} 
```

是错误的......你不能在`echo`ing 之后设置标题。`echo`当您将用户重定向到页面时，为什么要这样做？好吧，如果你认为如果重定向失败，那么页面不应该是空白的，它应该显示一些消息，然后试试这个 -

```
if($count == 1){
    header("Location: http://www.google.de");
    exit("Eingeloggt!");
} 
```

那么对于 jQuery 部分，我看不出有什么问题。

此外，由于您没有`submit`在任何地方生成表单，您只是`post`通过 ajax 获取它，因此设置`form`为

```
<form action="javascript:void(0);" onsubmit="return false;"> 
```

我希望这会有所帮助。

# c++ - 程序读取的小数点太多

> ID：15187701
> 
> 赞同：1
> 
> 时间：2013-03-03T16:18:49.273
> 
> 标签：c++, floating-point, stdio

我正在尝试读取 3 个浮点数。我试图用浮点数和双打来做到这一点，但我对两者的行为相同。

输入示例：

```
3 1 2
32.0 54.7 -2 
```

第一行 3 个整数，第二行 3 个浮点数：

我的阅读方式：

```
vector<int> order;
vector<double> numbers;
unsigned int order_number;
double number;
char input_character;

while (true)
{
  scanf("%d", &order_number);
  order.push_back(order_number);

  scanf("%c", &input_character);

  if (input_character == ' ')
    continue;
  else
    break;
}

while (true)
{
  scanf("%lf", &number);
  numbers.push_back(number);

  scanf("%c", &input_character);

  if (input_character == ' ')
    continue;
  else
    break;
}

printf("%d %d %d\n", order[0], order[1], order[2]);
printf("%lf %lf %lf\n", numbers[0], numbers[1], numbers[2]); 
```

打印它们时，我得到：

```
32.000000 54.700000 -2.000000 
```

我只想要`32.0`,`54.7` 和`-2`. 我知道我可以指定要打印多少个小数位`%.x`，但我需要打印输入中给我的尽可能多的小数位。

此外，那些`while (true)`循环在那里是因为我不知道我会得到多少个数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T16:22:07.900

普通浮点类型无法实现您想要的。如果要打印与输入具有相同小数位数的数字，则必须：

*   将输入读取为字符串。
*   自己解析并保存小数位数。
*   再次打印时使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:24:35.870

当您使用`scanf("%d",...)`它时，它会读取字符并将它们解析为`int`.

如果要在输入时显示它们，则必须将它们存储为字符串。

如果您需要将它们用作`double`然后将它们转换为数字。

# c# - 多个小文件的磁盘大小

> ID：15187706
> 
> 赞同：1
> 
> 时间：2013-03-03T16:19:09.113
> 
> 标签：c#, windows, hard-drive, diskspace

> 大小：~5mb
> 
> 磁盘大小：~3gb

我们使用 C# 并随着数据的变化不断地保存数据，所有文件数据都必须在任何给定时间都可以访问。基本上，如果某些东西改变了该数据的文件，则必须保存。这就是为什么有这么多文件包含这么多数据的原因。数据也得到了很大的处理，因此将所有数据聚集在一起不是一个选择，因为一个小的更改会导致无缘无故地保存大量数据。这些文件已经包含了足够多的内容，以至于保存一个对于仅进行很小的更改就几乎是多余的。

当然，有一种方法可以绕过文件大小的这种荒谬的扩展，并且仍然保留我们已经实现的可访问性和节省效率。我们需要一种将这些文件打包成 windows 认为是单个文件的方法，但这样我们就不必在发生更改时重写整个文件。

我知道拥有数千个小文件是很奇怪的，但对于我们的目的来说，它极大地提高了性能。如果可以避免的话，我们只是不想为了另一种资源而牺牲一种资源。

注意：这些文件有 RLE 二进制数据，它们不是文本文件。

清晰度更新：5mb->3gb = 250mb（50x 簇）-> 150gb = 问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T16:22:12.723

数据库完全满足您的需求：您可以存储任意数量的小行/blob，并且它们将被有效地存储。文件系统通常每个文件至少需要一个磁盘集群，这可能就是您的大小扩展如此之大的原因。数据库不这样做。您还可以要求数据库自行压缩。

有可用的嵌入式和独立数据库。

# jquery - View.js 不显示图像

> ID：15187709
> 
> 赞同：0
> 
> 时间：2013-03-03T16:19:24.840
> 
> 标签：jquery

view.js 插件（[finegoodsmarket.com/view/](http://finegoodsmarket.com/view/)）在我的测试站点上没有显示任何图像：

[davidthunander.se/wordpress/](http://davidthunander.se/wordpress/)

查看器打开，但图像被隐藏...有关如何解决此问题的任何想法？

# xslt - xslt 中的组函数

> ID：15187716
> 
> 赞同：-2
> 
> 时间：2013-03-03T16:20:06.740
> 
> 标签：xslt, xpath, xslt-2.0

我需要帮助解决 XSLT 中的一个小问题

我有一个 XML：a.xsm

```
<?xml version="1.0" encoding="UTF-8"?>
<ExtData>
  <table bName="B SERs" id="BSER">
    <Col bName="Bus" id="BUS">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="Bus" coreId="BUS"/>
    </Col>
    <Col bName="Bus" id="BUS">
      <CoreCol coreEName="MOR" coreHref="../_a5.xml" corebName="Busw" coreId="BUSW"/>
    </Col>
    <Col bName="Ser" id="NAME">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="Ser" coreId="NAME"/>
    </Col>
    <Col bName="ID" id="ID">
      <CoreCol coreEName="SER" coreHref="../_a2.xml" corebName="SerId" coreId="UCMDB_ID"/>
    </Col>
  </table>
</ExtData> 
```

我需要编写一个函数，通过 coreName 返回 coreHref 这意味着 :: my_variable = same_func("SER") ==>> 变量将是 "../_a2.xml"

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:30:46.240

这是选择 coreHref 的 XPath 表达式：

```
//Col/CoreCol[@coreEName='YorName']/data(@coreHref) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:54:28.790

定义一个键

```
<xsl:key name="by-name" match="Col/CoreCol" use="@coreEName"/> 
```

然后将它与例如一起使用`key('by-name', 'SER')/@coreHref`。

但请注意，`xsl:function`您内部没有上下文节点来应用带有两个参数的键函数，因此如果您想在内部使用方法，`xsl:function`请确保您有

```
<xsl:variable name="main-root" select="/"/> 
```

作为全局变量，然后使用`key('by-name', 'SER', $main-root)/@coreHref`.

# java - 如何使用 WebDriver 和页面对象验证页面标题？

> ID：15187720
> 
> 赞同：1
> 
> 时间：2013-03-03T16:20:36.863
> 
> 标签：java, selenium-webdriver, testng, pageobjects

我正在尝试编写一种方法来使用页面对象验证页面标题，但我无法做到。在谷歌页面中搜索某些内容后，您能否帮我写一个方法来验证页面标题。

这是我的2节课。

## 1级

```
public class GoogleSearchPage {

protected  WebDriver driver;

@FindBy(name="q")
private WebElement SearchBox;

@FindBy(name="btnG")
private WebElement SearchButton;    

public void SearchFor(String SearchTerm)
{
    SearchBox.sendKeys(SearchTerm);
    SearchButton.click();
} 
```

}

## 2 类

```
 public class TestSearchResults {
WebDriver driver;
GoogleSearchPage page;

@BeforeClass
public void Launch() throws Exception
{
    driver = new FirefoxDriver();
    driver.get("http://google.com");
}

@AfterClass
public void Close()
{
    driver.quit();
}

@Test
public void ResultPage() {
    System.out.println(page);
    page=PageFactory.initElements(driver, GoogleSearchPage.class);
    page.SearchFor("selenium");

} 
```

}

您能否帮助在显示搜索结果后如何验证标题

注意：我正在使用 TestNG。

在此先感谢，湿婆奥莱蒂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T04:04:36.413

**尝试这个：**

```
assertEquals("Your Page Title" , driver.getTitle()); 
```

`driver.getTitle()`- 返回`Title`您当前的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:29:35.103

您可以使用 python webdriver 获取和验证页面标题。见下面的代码

```
driver.title('title name')
assert 'title name' in driver.title('title name') 
```

它将验证标题名称。如果存在标题名称测试用例，则通过断言错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-01T19:39:10.453

在每个页面对象中创建一个构造函数。构造函数：

*   设置实例驱动程序值
*   等待页面加载完成（例如加载微调器不可见，jQuery.active == 0，document.readyState == 'complete'）
*   验证页面标题（请参阅其他答案）
*   发出 PageFactory.initElement(driver, this);

因此，您不需要单独的方法来验证标题。在每个步骤中，您将有一个新的 YourPageObjectPage() 自动检查标题。想想干。

# php - 如何以编程方式向 IRC 频道发送消息

> ID：15187726
> 
> 赞同：2
> 
> 时间：2013-03-03T16:21:26.760
> 
> 标签：php, bots, irc

有谁知道如何以编程方式：

*   将消息发送到特定的 IRC（Internet 中继聊天）频道 ? 或者
*   向频道中的所有用户发送消息？或者
*   发送自动消息作为回复？

我习惯使用 PHP，但语言并不重要。

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T16:35:58.873

你基本上需要：

1.  连接到服务器。
2.  加入频道。
3.  将消息发送到频道。

* * *

## 连接

您需要打开与 IRC 服务器的连接。它通常由`fsockopen()`函数完成。

服务器需要两个命令，`NICK`并且`USER`. 请注意，服务器期望`\r\n`作为行尾（如果您不发送它，服务器将不会接受您的命令）。

发送这两个命令后，服务器将向您发送 ping。

```
:irc.servername.com PING :RANDOM-STRING 
```

您必须使用`PONG :RANDOM-STRING`(Same string) 回复它。如果您不活动，服务器将定期发送这些信息。如果你没有回复，服务器会认为你已经死了，并关闭连接。

## 加入频道

连接阶段结束后（您可以告诉它，因为这样做时您会从服务器获得 001 命令），您加入频道。发送以下命令：

```
JOIN #channel-name 
```

服务器会将您加入频道，向您发送 TOPIC 和 NAMES 列表。完成后，您已加入频道。

## 发送消息

如果以上所有都正确，那么您所需要的就是

```
PRIVMSG #channel-name :YOUR MESSAGE HERE 
```

冒号之后的任何内容都是消息。

* * *

祝你好运！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:22:39.570

您需要阅读 IRC 的 RFC，以便构建自己的客户端。

见[http://www.irchelp.org/protocol/rfc/](http://www.irchelp.org/protocol/rfc/)

# php - 处理 .ini 设置文件中的时间间隔

> ID：15187742
> 
> 赞同：0
> 
> 时间：2013-03-03T16:23:15.937
> 
> 标签：php, date, time, ini

我正在为网站设置一个配置文件，将使用该[`parse_ini_file`](http://php.net/manual/en/function.parse-ini-file.php)方法读取该文件。选项之一是某些操作之前的秒数。我尝试将值设置`60*60*24*3`为获得三天的秒数：

```
[mailer]
; Number of seconds before trial expiration an email should be sent
seconds     = 60*60*24*3; 
```

但该变量只是作为字符串“60*60*24*3”读入 php。`eval`出于安全原因，我不想使用。有什么方法可以使（a）更易于使用和（b）比简单地列出给定日期的秒数更直观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:39:41.623

您可以使用[支持的日期和时间格式](http://www.php.net/manual/en/datetime.formats.php)来制作人类可读的字符串，然后可以使用它来初始化和计算以秒为单位的差异：

```
$diff = "3 days 5 hours 10 seconds";
$now = strtotime('2010-04-01 00:00:00'); // No leap year funny business
$then = strtotime($diff, $now);
$diff = $then - $now;

echo "
Now: " . date('r', $now) . "
Then: " . date('r', $then) . "
Diff (seconds): $diff"; 
```

[https://ignite.io/code/51338967ec221e0d3b000000](https://ignite.io/code/51338967ec221e0d3b000000)

*注意：关于闰年的问题是它是否会正确计算秒数（添加/删除一天？）。如果这是可能的，它应该被独立测试。*

上述输出：

```
Now: Thu, 01 Apr 2010 00:00:00 +0000
Then: Sun, 04 Apr 2010 05:00:10 +0000
Diff (seconds): 277210 
```

然后让你这样做：

```
[mailer]
; Period before trial expiration an email should be sent.
; Use PHP-supported time statements in an expression to
; specify an interval, such as 3 days, or 72 hours, etc.
; See: http://www.php.net/manual/en/datetime.formats.php
expires     = 3 days; 
```

正如我在评论中指出的那样，您也可以使用[`DateTimeInterval::createFromString()`](http://www.php.net/manual/en/datetime.formats.php)with[`DateTime::diff`](http://www.php.net/manual/en/datetime.diff.php)来做同样的事情。

我还要指出，正确格式化字符串虽然并不困难，但有时可能比您想象的要棘手。对于像这样的简单字符串`3 days`并不难，但`3d` ***不起作用***。因此，计算的时间应该得到验证，如果输入的内容不是有效的表达式，或者超出预期（过去可能？），***则向设置配置的人员提供错误。***

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T16:27:44.110

将您的ini重命名为php并以这种方式编写

```
# Number of seconds before trial expiration an email should be sent
$cfg['somesection']['someparam'] = 'foo';
...
$cfg['mailer']['seconds'] = 60*60*24*3; 
```

或使用屏幕计算器进行数学运算并将结果粘贴为值。

# java - 动态命名对象？

> ID：15187744
> 
> 赞同：0
> 
> 时间：2013-03-03T16:23:22.160
> 
> 标签：java, reflection

我的问题是在创建对象时动态命名对象，并且名称来自用户的输入。

以下是我的代码，我可以在其中动态创建一个对象，但我必须在此之前专门命名它，例如在本例中为 'obj'

```
private Class ClassName=null;
private Object obj=null;

ClassName=Class.forName(token[2]);
obj=ClassName.newInstance(); 
```

我所需要的只是创建对象，因为用户指定了它的名称，就像他说对象必须命名为“x”而不是“obj”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T16:25:55.673

对象没有名称。变量有。但是您不能动态创建变量。如果要将对象与名称相关联，请使用`Map<String, Object>`：

```
Map<String, Object> objectsByName = new HashMap<String, Object>();
...
objectsByName.put("Joe", obj);
...
Object objectNamedJoe = objectsByName.get("Joe"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T16:25:53.030

您不能重命名变量名，因为这是一个编译时过程，用户输入是运行时

# algorithm - 最常见的组合

> ID：15187745
> 
> 赞同：2
> 
> 时间：2013-03-03T16:23:27.770
> 
> 标签：algorithm, set

我有一个整数数组列表，其中每个数组都有一些排序的数字。在这里，我想根据所有数组找到最常见的整数序列组合。例如，如果数组列表如下

```
A1 - 1 2 3 5 7 8
A2 - 2 3 5 6 7
A3 - 3 5 7 9
A4 - 1 2 3 7 9
A5 - 3 5 7 10 
```

这里

```
{3,5,7} - {A1,A3,A5}
{2,3}   - {A1,A2,A4} 
```

因此，我们可以将 {3,5,7} 或 {2,3} 作为最常见的组合。

现在我使用的算法如下

找到一个集合与所有其他集合的交集。并存储结果集。如果结果集已经存在，则增加结果集。例如：查找以下所有内容的交集

```
A1 intersection A2 
A1 intersection A3
A1 intersection A4
A1 intersection A5
A2 intersection A3  
A2 intersection A4 
A2 intersection A5  
A3 intersection A4
A3 intersection A5  
A4 intersection A5 
```

这里 A1 交点 A3 与 A3 交点 A5 相同，因此 set-{3,5,7} 出现可以设置为 2。类似地，可以确定每个结果集出现。

但是这个算法需要 O(n^2) 复杂度。假设每个集合都已排序，我很确定我们可以找到一个复杂度为 O(n) 的更好算法，但我无法写下来。任何人都可以为此建议一个 O(n) 算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:39:25.530

如果您有一个长度为 n 的序列，则其前缀的长度为 n-1 并且至少出现频率相同 - 退化的情况是最常见的字符，它是长度为 1 的序列，其出现频率至少与任何更长序列。您是否有感兴趣的最小后缀长度？

不管怎样，一个想法是连接所有序列，用其他地方没有的不同整数将它们分开，然后以线性时间计算[http://en.wikipedia.org/wiki/Suffix_array](http://en.wikipedia.org/wiki/Suffix_array)。一次通过后缀数组应该允许您找到任何给定长度的最常见子序列 - 它不应该跨越两个不同数组之间的间隙，因为每个长度为 n 的序列都是唯一的，因为分隔数组的字符是独特的。（另见[http://en.wikipedia.org/wiki/LCP_array](http://en.wikipedia.org/wiki/LCP_array)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:35:48.060

Haskell 中的这个例子不扫描交叉点。相反，它列出了每个列表的子序列，并将它们聚合到由子序列索引的数组中。要查找最常出现的子序列，只需显示数组中最长的元素。过滤输出以显示大于长度 1 的子序列。输出是一个元组列表，显示子序列和出现子序列的列表的索引：

*Main> combFreq [[1,2,3,5,7,8],[2,3,5,6,7],[3,5,7,9],[1,2,3,7, 9],[3,5,7,10]]
[([3,5],[4,2,1,0]),([5,7],[4,2,0]),([ 3,5,7],[4,2,0]),([2,3],[3,1,0]),([7,9],[3,2]),([2, 3,5],[1,0]),([1,2,3],[3,0]),([1,2],[3,0])]

```
import Data.List
import qualified Data.Map as M
import Data.Function (on)

sInt xs = concat $ zipWith (\x y -> zip (subs x) (repeat y)) xs [0..]
  where subs = filter (not . null) . concatMap inits . tails

res xs = foldl' (\x y -> M.insertWith (++) (fst y) [snd y] x) M.empty (sInt xs)

combFreq xs = reverse $ sortBy (compare `on` (length . snd)) 
            . filter (not . null . drop 1 . snd)
            . filter (not . null . drop 1 . fst)
            . M.toList
            . res $ xs 
```

# iphone - 媒体查询：定位方向：横向，不排除台式计算机

> ID：15187746
> 
> 赞同：3
> 
> 时间：2013-03-03T16:23:31.293
> 
> 标签：iphone, html, css, responsive-design, media-queries

我目前正在构建一个响应式页面，但我遇到了问题。
对于更大的屏幕尺寸，我想放大标题等内容。这行得通，但是在我的 iPhone 上以横向模式测试页面时，标题太大了。

为什么竖屏 iPhone 会触发更大屏幕的媒体查询？好吧，扩大标题的 CSS 规则包含在这个媒体查询中：

```
@media only screen and (min-width: 30em) {
    /* 480 pixel */
} 
```

横向的 iPhone 屏幕是 480px 宽。所以我试着这样做：

```
@media only screen and (min-width: 30em) not (orientation: landscape) {
        /* 480 pixel* /
} 
```

现在它可以在我的 iPhone 上使用，但我的 MacBook 上的标题不再放大。可能这只是某种逻辑错误，但我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:44:25.933

尝试替换`not (orientation:landscape)`为`and (orientation:portrait)`. 如果失败，请尝试将`em`值更改为`px`值。有些浏览器还不能很好地配合`em`，所以值得一试。

编辑：为什么不把它分成不同的样式呢？

```
@media all and (min-width:480px) and (orientation:landscape) {
    // styles for desktops, mouse-friendly interface
}

@media all and (min-width:480px) and (orientation:portrait) {
    // styles for mobiles, touch-friendly interface
} 
```

# mysql - MySQL创建视图连接两个完整的表

> ID：15187751
> 
> 赞同：4
> 
> 时间：2013-03-03T16:24:27.893
> 
> 标签：mysql, sql, join, view

如何创建一个视图来合并来自两个不同表的不同所有列。

```
CREATE VIEW listView 
AS 
SELECT * FROM tab1 h LEFT JOIN tab2 b 
ON h.tID=b.tID 
WHERE value = 0 
```

这给了我错误：

> 重复的列名“tID”

有没有办法在不列出所有要选择的值的情况下加入这两个表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:25:51.317

这两个表包含列`tID`。为了编译`VIEW`，您需要在该列上创建一个别名，或者只指定一个别名`tid`和它将来自的表。

一种解决方案：

```
SELECT  h.TID, -- and not specifying b.TID
FROM    tab1 h LEFT JOIN tab2 b ON h.tID=b.tID 
```

另一种解决方案：提供别名，

```
SELECT  h.TID as H_TID,
        b.TID as B_TID
FROM    tab1 h LEFT JOIN tab2 b ON h.tID=b.tID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:26:27.007

试试这个：

```
CREATE VIEW listView 
AS 
SELECT
  a.tID as a_tID,
  b.tID as b_tID,
  a.anothercolumn as a_anothercolumn,
  b.anothercolumn as b_anothercolumn
FROM tab1 a
JOIN tab2 b ON a.tID=b.tID 
WHERE a.value = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:25:06.110

您需要指定列名而不是使用 * ，然后像这样为您的列设置别名：

```
SELECT h.tId, b.tId as BTId 
```

您不能两次使用相同的名称-因此出现上述错误。

# ruby-on-rails - 运行 heroku run rake db:migrate 时出错

> ID：15187755
> 
> 赞同：0
> 
> 时间：2013-03-03T16:24:38.890
> 
> 标签：ruby-on-rails, heroku, railstutorial.org

我目前正在浏览 Railstutorial 并在运行时不断出错`heroku run rake db:migrate`

我已经在网上搜索了几个小时 - 错误似乎很常见，但建议的解决方案似乎都没有任何区别，非常感谢您的帮助！

错误是

```
Connecting to database specified by DATABASE_URL
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.) 
```

我运行`gem install activerecord-postgresql-adapter`并更改了我的 gemfile，它现在看起来像这样：

```
group :development do
  gem 'rspec-rails', '2.6.1'
  gem 'sqlite3', '~> 1.3.0'
end

group :test do
  gem 'rspec-rails', '2.6.1'
  gem 'webrat', '0.7.1'
  gem 'sqlite3', '~> 1.3.0'
end

group :production do
   gem "pg"
end 
```

提交后我跑`bundle install --without production`了`git push heroku`

我的 database.yml 看起来像这样：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:34:44.930

运行`bundle install`然后推送到heroku

省略，`--without production`所以你 gemfile.lock 可以用 gem pg 实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T21:14:43.780

我在使用 Windows 系统时遇到了同样的错误。在 Ubunto 虚拟机上尝试过，由于某种原因，错误消失了

# android - Eclipse Android Developer Tools 损坏了 PhoneGap 创建的项目

> ID：15187757
> 
> 赞同：1
> 
> 时间：2013-03-03T16:24:42.440
> 
> 标签：android, eclipse, cordova

按照[http://docs.phonegap.com/en/2.5.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.5.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)创建 PhoneGap Android 项目后，如下所示：

./create ~/Dropbox/eclipse_workspace/DOTD_UK uk.co.dasque DOTD_UK

使用 Eclipse (Android Developer Tools) v21.1.0 从现有代码创建一个新项目，我得到以下信息：

项目描述无效。/Users/ed/Dropbox/eclipse_workspace/DOTD_UK 与另一个项目的位置重叠：'DOTD_UK'

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:04:15.327

除非您有可以使用的可靠备份，否则请保存核心文件（assets、src、res、manifest 等）并创建另一个。它比修复所有引用更容易（也更快）......

# android - Android可绘制背景平铺9patch解决方法

> ID：15187759
> 
> 赞同：0
> 
> 时间：2013-03-03T16:25:02.553
> 
> 标签：android, background, repeat, nine-patch

我读过 9patch 无法重复（它只会延伸）。但是有没有其他方法可以创建这样的drawable？

**左上**固定， **上** x 重复， **右上**固定

**左** y 重复， **中心** 重复， **右**y 重复

**左下**固定，下 **x** 重复， **右下**固定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:36:44.527

创建一个 BitmapDrawable。然后，您可以为不同的轴分别设置不同的模式（重复、镜像等）。

试试这些链接：http: [//developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#setTileModeX%28android.graphics.Shader.TileMode%29](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#setTileModeX%28android.graphics.Shader.TileMode%29)

[http://androidblogger.blogspot.in/2009/01/how-to-have-tiled-background-cont.html](http://androidblogger.blogspot.in/2009/01/how-to-have-tiled-background-cont.html)

# javascript - jQuery点击功能 元素

> ID：15187767
> 
> 赞同：1
> 
> 时间：2013-03-03T16:25:52.687
> 
> 标签：javascript, jquery

我有一个如下所示的无序列表：

```
<ul id="frozen" data-name="nameOfSelect" class="tagit">
   <li class="tagit-choice" tagvalue="2" style="padding-right: 4px;" id="tag-2">
      <div class="tagit-label" data-value="2">kázeň</div>
   </li>
   <li class="tagit-choice" tagvalue="1" style="padding-right: 4px;" id="tag-1">
      <div class="tagit-label" data-value="1">žalmxxxx</div>
   </li>
</ul> 
```

我需要将一个 click 函数绑定到所有这些函数并获取`id="tag-1"`要在函数中使用的数据。

我试过这个：

```
$('#[id|="tag"]').each(function(){
    var tag = this.attr('id'); 
    var tagID = tag.replace('tag-',''); 
    this.click(function (){
       alert('index.php?s=taglist&tag=' + tagID);
       //window.location = string;
    });
}); 
```

但是，由于某种原因，这种方法似乎对`<li>`元素是错误的，因为我遇到了选择器问题（似乎）。也许我也错过了一些愚蠢的东西......有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T16:27:57.710

不需要循环，jQuery 在内部执行此操作，并且`this`是原生 DOM 元素，它有一个`id`属性，但没有`attr()`方法：

```
$('[id^="tag-"]').on('click', function() {
    var tag = this.id,
        tagID = tag.replace('tag-', '');

    alert('index.php?s=taglist&tag=' + tagID);
}); 
```

# java - Java - 使用这个

> ID：15187772
> 
> 赞同：1
> 
> 时间：2013-03-03T16:26:05.340
> 
> 标签：java

您希望在哪里看到以下符号：

```
 this(a,b,0,null) 
```

评估这个表达式会有什么影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:29:47.263

这可以在构造函数内部看到，从同一个类调用另一个构造函数。它必须是构造函数中的第一行。
这是所谓的*替代构造函数调用*。

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.7.1)

> 备用构造函数调用以关键字 this 开头（可能以显式类型参数开头）。它们用于调用同一类的备用构造函数。
> 构造函数体中的显式构造函数调用语句不能引用在此类或任何超类中声明的任何实例变量或实例方法或内部类，或在任何表达式中使用 this 或 super；否则，会发生编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:29:58.557

该表达式作为构造函数中的第一行是合法的。它的效果是调用具有不同参数的重载构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:30:10.343

使用`this()`是从类中调用构造函数；从该类的构造函数中。

# java - 有没有什么方法可以在 JAVA 中对元素求和？

> ID：15187774
> 
> 赞同：1
> 
> 时间：2013-03-03T16:26:13.307
> 
> 标签：java, sum

`sum()`Java中是否有任何等效的python ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:27:48.370

语言中没有任何内容。不过，有很多图书馆可以做这样的事情。或者编写自己的三行例程。你如何做取决于你如何表示你的元素（通常的嫌疑人——对于双值——是`List<Double>`或`double[]`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:27:22.100

不需要。只需使用循环，循环遍历每个元素并生成运行总计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:35:32.323

没有像`sum()`Java那样的功能。您可以自己创建一个函数。像这样的东西：

```
 public <T> T countArray(T[] array)
    {
        T tSum = 0;

        for (T t : array)
        {
            tSum += t;
        }

        return tSum;
    }

    public <T> T countCollection(Collection<T> coll)
    {
        T[] array = (T[])coll.ToArray(new T[0]);
        return countArray(array);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T17:25:42.940

您可以使用Apache [Commons Math](http://commons.apache.org/math/)库中的[StatUtils.sum(double[]) 。](http://commons.apache.org/proper/commons-math//apidocs/org/apache/commons/math3/stat/StatUtils.html#sum%28double%5B%5D%29)优点是 StatUtils 具有其他有用的功能，而 Commons Math 具有许多其他实用程序。

# ruby-on-rails - 我的测试数据库在两天前就离开了，不关心救援

> ID：15187777
> 
> 赞同：0
> 
> 时间：2013-03-03T16:26:28.367
> 
> 标签：ruby-on-rails, datetime, rspec, cucumber, koala

这里有两个问题：

我有这段代码要发布在用户的 Facebook 墙上：

```
def publish_on_facebook
    if user.last_published < 1.day.ago
        @graph = Koala::Facebook::API.new(user.service.token)
        begin
            @graph.put_wall_post("some post")
            user.last_published = Time.now
            user.save
        rescue
            user.last_published = 1.week.from_now
            user.save
        end
    end
end 
```

它完美地工作：

如果用户已授权我，它会发布并更新 last_published（日期时间类型）字段到现在。

如果用户没有授权我在他的墙上发布东西，那么它会将 last_published 字段更新为从现在开始的 1 周。

现在当我通过我的 Cucumber 运行时，测试，它不起作用：

当用户授权我时，last_published 字段从现在开始更新为 1 分钟，但 2 天前

```
expected: > Sun, 03 Mar 2013 16:12:44 UTC +00:00
 got:   Fri, 01 Mar 2013 16:13:43 UTC +00:00 
```

当用户没有授权我时，last_published 字段没有变化（我将该字段的默认值设置为 3 月 1 日）

```
expected: > Sat, 09 Mar 2013 16:13:47 UTC +00:00
 got:   Fri, 01 Mar 2013 15:01:11 UTC +00:00 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:31:43.277

更新属性时，必须重新加载变量 @user：

```
@user.update_attributes(attribute: value)
@user = User.find(@user) 
```

Cucumber 正在评估存储在 @user 中的值，这些值在方法运行后不是最新的。

# c++ - OpenSSL 加密流

> ID：15187778
> 
> 赞同：9
> 
> 时间：2013-03-03T16:26:32.410
> 
> 标签：c++, openssl, iostream

有谁知道使用**OpenSSL加密****C++**流的良好实现？扩展或包装**std::istream**和**std::ostream**的东西？

 ******我知道这可以通过 boost（过滤流）来完成，但我不想仅仅为此包括 boost。任何非提升建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:35:57.460

Boost 库提供 ssl 流：

[http://www.boost.org/doc/libs/1_47_0/boost/asio/ssl/stream.hpp](http://www.boost.org/doc/libs/1_47_0/boost/asio/ssl/stream.hpp)

SO ref :[使用 Boost.Asio 和 OpenSSL 的 HTTPS 请求](https://stackoverflow.com/questions/7046370/https-request-with-boost-asio-and-openssl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:44:54.927

我遇到了以下使用 std::istream 和 std::ostream 的实现。

1.  AES CTR 模式加密/解密

[http://openssl.6102.n7.nabble.com/EVP-Decrypt-Final-ex-fails-on-larger-files-td2434.html](http://openssl.6102.n7.nabble.com/EVP-Decrypt-Final-ex-fails-on-larger-files-td2434.html)

1.  河豚

[http://openssl.6102.n7.nabble.com/EVP-Decrypt-Final-ex-fails-on-larger-files-td2434.html](http://openssl.6102.n7.nabble.com/EVP-Decrypt-Final-ex-fails-on-larger-files-td2434.html)

此外，您还可以在这里查看：

[http://www.appinf.com/docs/poco/Poco.Crypto.RSAKeyImpl.html](http://www.appinf.com/docs/poco/Poco.Crypto.RSAKeyImpl.html)

和这里：

[https://dev.marc.waeckerlin.org/projects/libpcscxx/browser/trunk/src/openssl.hxx?rev=60](https://dev.marc.waeckerlin.org/projects/libpcscxx/browser/trunk/src/openssl.hxx?rev=60)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:01:57.250

如果你想自己做：

子类 std::streambuf 用于 TCP 或 SSL（一旦套接字打开，它们基本上工作相同。然后您可以使用该 streambuf 制作 std::istream 和 std::ostream。如果您不想要 std::iostream ，您可以制作两个流缓冲区，一个用于输入，一个用于输出。

std::streambuf 文档（主要只关注溢出和下溢）：[http ://www.cplusplus.com/reference/streambuf/streambuf/](http://www.cplusplus.com/reference/streambuf/streambuf/)

还有一个关于如何直接使用 libssl 的小教程。

[http://www.ibm.com/developerworks/linux/library/l-openssl/index.html](http://www.ibm.com/developerworks/linux/library/l-openssl/index.html)******

# objective-c - NSConnection 关闭时不与 FTP 断开连接

> ID：15187783
> 
> 赞同：2
> 
> 时间：2013-03-03T16:26:53.983
> 
> 标签：objective-c, cocoa, ftp

我正在使用 Apple 的[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)示例代码的编辑版本，特别是“PUT”部分。里面有这个方法：

```
- (void)stopSendWithStatus:(NSString *)statusString
{
if (self.networkStream != nil) {
    [self.networkStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    self.networkStream.delegate = nil;
    [self.networkStream close];
    self.networkStream = nil;
}
if (self.fileStream != nil) {
    [self.fileStream close];
    self.fileStream = nil;
}
[self sendDidStopWithStatus:statusString];
uploaderbusy = 0;
} 
```

问题是上传后应用程序没有关闭连接。上面的代码被执行。两个 IF 语句都为真，并且执行里面的代码。

这段代码：

```
 NSLog(@"%lu",[self.networkStream streamStatus]);
    [self.networkStream close];
    NSLog(@"%lu",[self.networkStream streamStatus]); 
```

给出这个输出：

```
2013-03-03 17:50:26.460 Stockuploader[575:303] 2
2013-03-03 17:50:26.498 Stockuploader[575:303] 6 
```

但连接保持打开状态并最终超时。这是FTP服务器的日志：

```
(000006)03/03/2013 17.50.27 - root2 (192.168.0.3)> 150 Connection accepted
(000006)03/03/2013 17.50.27 - root2 (192.168.0.3)> 226 Transfer OK
(000006)03/03/2013 17.52.28 - root2 (192.168.0.3)> 421 Connection timed out.
(000006)03/03/2013 17.52.28 - root2 (192.168.0.3)> disconnected. 
```

这是为什么？

如果我关闭该程序，则 FTP 上的连接会立即关闭。难道是我必须解除分配self.filestream？如果是这样，我该如何在启用 ARC 的情况下做到这一点？

**- - 更新 - -**

我发现在关闭连接之前，我必须向 ftp 服务器发送“QUIT”，以便让他知道我要断开连接。但是我怎样才能实现将“QUIT”命令发送到`SimpleFTPSample`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:37:35.070

*在*打开连接之前，您必须将`kCFStreamPropertyFTPAttemptPersistentConnection`属性设置为 FALSE：

```
[self.networkStream setProperty:(id)kCFBooleanFalse
                         forKey:(id)kCFStreamPropertyFTPAttemptPersistentConnection]; 
```

然后 FTP 流在关闭时同时关闭控制和数据连接。

从文档中：

> **kCFStreamPropertyFTPAttemptPersistentConnection**
> FTP 尝试持久连接流属性键，用于设置和复制操作。将此属性设置`kCFBooleanTrue`为启用现有服务器连接的重用；将此属性设置`kCFBooleanFalse`为不重用现有服务器连接。默认情况下，此属性设置为 `kCFBooleanTrue`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:52:33.367

将 kCFStreamPropertyFTPAttemptPersistentConnection 设置为 kCFBooleanFalse 并没有关闭我的延迟连接，直到我也设置了这个（也在打开之前）：

```
[self.networkStream setProperty:(id)kCFBooleanTrue forKey:(id)kCFStreamPropertyShouldCloseNativeSocket]; 
```

# android - 具有不同行布局的列表视图中的复选框问题

> ID：15187795
> 
> 赞同：0
> 
> 时间：2013-03-03T16:28:15.537
> 
> 标签：android, android-listview, android-checkbox

我尝试使列表视图具有`TextView`和`CheckBox`。它工作正常，但是当`CheckBox`在`CheckBox`另一行中选择另一行时，也选择了另一行。示例：如果我检查第一行并向下滚动，我发现另一行也被选中。

这是我的适配器代码

```
public class ReadersrListAdapter extends BaseAdapter{
private static final int TYPE_SEPARATOR = 0;
private static final int TYPE_ITEM = 1;
private static final int TYPE_MAX_COUNT = 2;
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private LayoutInflater mInflater=null; 

public ReadersrListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    mInflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

@Override
public boolean areAllItemsEnabled() {
    return false;
}

@Override
public boolean isEnabled(int position) {
    return !data.get(position).get(UtiliShare.KEY_TITLE).startsWith("-");
}

@Override
public int getItemViewType(int position) {
    return data.get(position).get(UtiliShare.KEY_TITLE).startsWith("-") ? TYPE_SEPARATOR : TYPE_ITEM;
}

@Override
public int getViewTypeCount() {
    return TYPE_MAX_COUNT;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;        
    ViewHolder2 holder2 = null;
    int type = getItemViewType(position);

    if (convertView == null) {
        //holder = new ViewHolder();
        switch (type) {
            case TYPE_ITEM:
                holder = new ViewHolder();
                convertView = mInflater.inflate(R.layout.reader_list_item, null);
                holder.textView = (TextView)convertView.findViewById(R.id.readerTitle);
                holder.textView.setTypeface(UtiliShare.getTf());
                convertView.setTag(holder);
                break;
            case TYPE_SEPARATOR:
                holder2 = new ViewHolder2();
                convertView = mInflater.inflate(R.layout.reader_list_devider, null);
                holder2.textView = (TextView)convertView.findViewById(R.id.readerTitle);
                holder2.textView.setTypeface(UtiliShare.getTf());
                convertView.setTag(holder2);
                break;
        }
        //convertView.setTag(holder);
    } else {
        if(type==TYPE_ITEM) holder = (ViewHolder)convertView.getTag();
        else holder2 = (ViewHolder2)convertView.getTag();
    }
    HashMap<String, String> curdata = new HashMap<String, String>();
    curdata = data.get(position);
    String txt = curdata.get(UtiliShare.KEY_TITLE);
    if(type == TYPE_SEPARATOR){
        txt = txt.replace("-", "");
        holder2.textView.setText(txt);
    }else{
        //if(position <= 100) System.out.println("getView " + position + " " + convertView + " type = " + type);
        holder.star = (CheckBox) convertView.findViewById(R.id.btn_Fav);
        holder.star.setOnCheckedChangeListener(((ReadersListActivity) this.activity).mStarCheckedChanceChangeListener);

        holder.textView.setText(txt);
    }
    //holder.textView.setText(txt);
    return convertView;
}

private static class ViewHolder {
    public CheckBox star;
    public TextView textView;
}

private static class ViewHolder2 {
    public TextView textView;
} 
```

}

这`OnCheckedChangeListener`在活动中

```
public OnCheckedChangeListener mStarCheckedChanceChangeListener = new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
         // TODO Cyril: Not implemented yet!
            final int position = list.getPositionForView(buttonView);
            Toast.makeText(ReadersListActivity.this, ""+position, Toast.LENGTH_SHORT).show();
        }
    }; 
```

我怎样才能解决这个问题？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:48:07.070

您可能知道在滚动时会重复使用布局，因此您需要跟踪是否应该自己检查每一行。让我们向您的适配器添加一个新成员：

```
private SparseBooleanArray checked = new SparseBooleanArray(); 
```

还有一种新方法：

```
public void toggleCheck(int position) {
    boolean state = expanded.get(position, false); 
    expanded.put(!state);
} 
```

现在调用我们的新方法`onCheckedChanged()`：

```
final int position = list.getPositionForView(buttonView);
adapter.toggleCheck(position); 
```

最后让我们调整`getView()`以更改选中状态（以及其他一些事情）：

```
// Don't create a new HashMap that you'll never use
//HashMap<String, String> curdata = new HashMap<String, String>();

HashMap<String, String> curdata = data.get(position);
String txt = curdata.get(UtiliShare.KEY_TITLE);
if(type == TYPE_SEPARATOR){
    txt = txt.replace("-", "");
    holder2.textView.setText(txt);
}else{
    //if(position <= 100) System.out.println("getView " + position + " " + convertView + " type = " + type);

    // These two lines should be in `if(convertView == null)` with the others
    holder.star = (CheckBox) convertView.findViewById(R.id.btn_Fav);
    holder.star.setOnCheckedChangeListener(((ReadersListActivity) this.activity).mStarCheckedChanceChangeListener);

    // Set the appropriate values
    holder.textView.setText(txt);
    holder.star.setChecked(expanded.get(position, false));
} 
```

# android - Android：Listview 没有填充从数据库中获取的数据

> ID：15187798
> 
> 赞同：0
> 
> 时间：2013-03-03T16:28:33.053
> 
> 标签：android, sqlite, listview, simplecursoradapter

我正在尝试通过使用游标从 SQLite 获取数据来填充列表视图。但每次应用程序突然关闭时显示“不幸停止”

这是简单的代码：

```
public class MainActivity extends ListActivity {

//Android listview object
ListView listViewPhoneBook;

/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView listContent = (ListView) findViewById(R.id.listPhoneBook);
    DbAdapter mDb = new DbAdapter(this);
    mDb.open();

    Cursor cursor =mDb.fetchAllPrograms();
    startManagingCursor(cursor);

    String[] from = new String[] { DbAdapter.KEY_TITLE };
    int[] to = new int[] { R.id.textViewName };

    SimpleCursorAdapter cursorAdapter = new 
SimpleCursorAdapter(this, R.layout.row,  cursor, from, to);

    listContent.setAdapter(cursorAdapter);

    //Onclick ListView setlistener
    listContent.setTextFilterEnabled(true);

    listContent.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }

    });
    }
} 
```

XML 文件：Activity_main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
>
<ListView
    android:id="@+id/listPhoneBook"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:dividerHeight="0.1dp"
    android:divider="#0000CC"
    >
    </ListView>

</LinearLayout> 
```

行.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<TextView
    android:id="@+id/textViewName"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="25dp"
    android:textColor="#0000FF"
    android:text="TextView" />

</LinearLayout> 
```

数据库文件：DbAdapter.java

```
 public class DbAdapter{

public final static String KEY_TITLE = "title";
    public static final String KEY_BODY = "body";
    public static final String KEY_ROWID = "_id";

    private static final String TAG = "LogoDbAdapter";
    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

// Database creation sql statement

   private static final String DATABASE_NAME = "Logo";
   private static final String DATABASE_TABLE = "LogoProgram";
   private static final int DATABASE_VERSION = 1;
private final Context mCtx;

private static final String TABLE_CREATE =
        "CREATE TABLE " + DATABASE_TABLE + " (" +
        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT," +
        KEY_TITLE + " TEXT, " +
        KEY_BODY + " TEXT);";

@SuppressLint("SdCardPath")
private String DATA_PATH="/data/data/com.example/Logo";

    private static class DatabaseHelper extends SQLiteOpenHelper{

    // Initialize context or database to be used as context
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(TABLE_CREATE);

    }

    //In case of updated version of database is available fire the query
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS Logoprogram");
        onCreate(db);
    }
}

public DbAdapter(Context ctx) {
    mCtx = ctx;
}

public DbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();

    return this;
}

public void close() {
    mDbHelper.close();
}

public long createProgram(String title, String body) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_TITLE, title);
    initialValues.put(KEY_BODY, body);

    return  mDb.insert(DATABASE_TABLE, null, initialValues);

}

public String getdata() {

    String[] columns= new String[]{ KEY_ROWID, KEY_TITLE,KEY_BODY};
    Cursor c= mDb.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result="";

    int id=c.getColumnIndex(KEY_ROWID);
    int iTitle=c.getColumnIndex(KEY_TITLE);
    int iBody=c.getColumnIndex(KEY_BODY);

    for(c.moveToFirst(); !c.isAfterLast();c.moveToNext()){
        result= result + c.getString(id) + " " + c.getString(iTitle) + 
" "     + c.getString(iBody) + "\n";
        //result= result + c.getString(iTitle) + "\n";

    }

    return result;
}

public Cursor fetchAllPrograms() {

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_BODY}, null, null, null, null, null);
}

public Cursor fetchPrograms(long rowId) throws SQLException {

    Cursor mCursor =

        mDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                KEY_TITLE, KEY_BODY}, KEY_ROWID + "=" + rowId, null,
                null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}} 
```

游标方法存在弃用警告。谁能告诉我，我哪里出错了？提前致谢！

日志如下：

```
03-03 22:42:46.695: D/AndroidRuntime(555): Shutting down VM
03-03 22:42:46.695: W/dalvikvm(555): threadid=1: thread exiting with uncaught   
exception (group=0x409961f8)
03-03 22:42:46.727: E/AndroidRuntime(555): FATAL EXCEPTION: main
03-03 22:42:46.727: E/AndroidRuntime(555): java.lang.RuntimeException: Unable to start 
activity ComponentInfo{com.android.listview/com.android.listview.MainActivity}:  
java.lang.RuntimeException: Your content must have a ListView whose id attribute is
'android.R.id.list'
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.ActivityThread.access$600(ActivityThread.java:122)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
03-03 22:42:46.727: E/AndroidRuntime(555):  at   
android.os.Handler.dispatchMessage(Handler.java:99)
03-03 22:42:46.727: E/AndroidRuntime(555):  at android.os.Looper.loop(Looper.java:137)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.ActivityThread.main(ActivityThread.java:4340)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
java.lang.reflect.Method.invokeNative(Native Method)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
java.lang.reflect.Method.invoke(Method.java:511)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-03 22:42:46.727: E/AndroidRuntime(555):  at dalvik.system.NativeStart.main(Native 
Method)
03-03 22:42:46.727: E/AndroidRuntime(555): Caused by: java.lang.RuntimeException: Your 
content must have a ListView whose id attribute is 'android.R.id.list'
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.ListActivity.onContentChanged(ListActivity.java:243) 
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:254)
03-03 22:42:46.727: E/AndroidRuntime(555):  at   
android.app.Activity.setContentView(Activity.java:1835)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
com.android.listview.MainActivity.onCreate(MainActivity.java:24)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.Activity.performCreate(Activity.java:4465)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-03 22:42:46.727: E/AndroidRuntime(555):  at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
03-03 22:42:46.727: E/AndroidRuntime(555):  ... 11 more
03-03 22:42:49.625: I/Process(555): Sending signal. PID: 555 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:44:31.123

我看到您的代码无法正常工作的至少两个原因。

1.  您在`ListView`这里使用了错误的 id `(ListView) findViewById(R.id.textViewName);`。它应该是：

    ```
    ListView listContent = (ListView) findViewById(R.id.listPhoneBook); 
    ```

2.  `ListView`正在尝试访问一个`Cursor`已经关闭的，因为您调用了`mDb.close();`. 你应该打电话`mDb.close();`来`onDestroy`。

**编辑：**

既然你正在使用`ListActivity`，你应该提供一个`ListView`带有 id的`android.R.id.list`。改变你的`activity_main.xml`：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:dividerHeight="0.1dp"
    android:divider="#0000CC" > 
```

你的`MainActivity`：

```
ListView listContent = (ListView) findViewById(android.R.id.list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:45:19.713

我可以在这里看到的一个问题是

`ListView listContent = (ListView) findViewById(R.id.textViewName);`

`textViewname`在您的 xml 中是 TextView，而不是 ListView。

用这个`ListView listContent = (ListView) findViewById(R.id.listPhoneBook);`

# jruby - MRI 和 JRuby 中 XML 字符串编码的区别

> ID：15187801
> 
> 赞同：0
> 
> 时间：2013-03-03T16:28:57.533
> 
> 标签：jruby

我想使用 JRuby 创建一些 XML 文件，但它不像 MRI Ruby 那样转义字符。

```
> "<node attr=#{'this is "my" complicated <String>'.encode(:xml => :attr)} />" 
```

核磁共振

```
 ruby-1.9.3-p194 
  => "<node attr=\"this is &quot;my&quot; complicated &lt;String&gt;\" />" 
```

JRuby

```
 jruby-1.7.2 
  => "<node attr=this is \"my\" complicated <String> />" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:49:55.243

请不要像这样创建 XML。使用 Nokogiri 或其他 XML 库。

```
require 'rubygems'
require 'nokogiri'

builder = Nokogiri::XML::Builder.new do |xml|
  xml.node(:attr => 'this is "my" complicated <String>')
end

puts builder.to_xml
# prints: <node attr="this is &quot;my&quot; complicated &lt;String&gt;"/> 
```

另见[Nokogiri::XML::Builder 文档](http://nokogiri.org/Nokogiri/XML/Builder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T10:49:30.990

这确实是一个 JRuby 错误。它现在已在[master](https://github.com/jruby/jruby/pull/684)中修复，应该可以在 JRuby 1.7.4 中使用。

# javascript - 浏览器如何知道这是一个 jquery 事件对象而不是普通事件

> ID：15187803
> 
> 赞同：0
> 
> 时间：2013-03-03T16:29:04.193
> 
> 标签：javascript, jquery, javascript-events

jquery 事件对象在 jquery 库中编写了一些属性和方法，我想知道浏览器如何知道我们使用的是 jquery 事件对象而不是普通事件，因为我注意到我们没有做任何额外的工作来表明这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:38:42.617

您的事件处理程序永远不会绑定到元素。相反，它位于`window.jQuery.cache`与元素关联的条目中。

绑定的是通用事件处理程序。当事件发生时，该处理程序会抓取浏览器的事件对象，查看它是什么类型的事件，在 中查找您的处理程序`jQuery.cache`并调用它。

但是在调用它之前，它会创建一个新的事件对象来传递给您的处理程序而不是原始的*（尽管它包括原始的）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:30:59.990

浏览器不知道... jQuery 捕获事件，获取正常的事件对象并对其进行规范化。

> jQuery 的事件系统根据 W3C 标准规范化事件对象。事件对象保证被传递给事件处理程序。原始事件的大多数属性都被复制并规范化到新的事件对象。

[文档](http://api.jquery.com/category/events/event-object/)

# java - 在 Java 中实现用户定义的本地语言环境

> ID：15187810
> 
> 赞同：3
> 
> 时间：2013-03-03T16:29:37.433
> 
> 标签：java, localization, locale, resourcebundle

作为本地化的一部分，我现在正在尝试为`Native languages(India).`

在搜索时，我找到了一个我们可以创建的关于堆栈溢出的解决方案`user defined locales.`

[如何扩展可用 Java 语言环境的列表](https://stackoverflow.com/questions/4716147/how-to-extend-the-list-of-available-java-locales)

我创建了自己的课程，比如

```
IndianLocale extends Locale { 
   IndianLocale (Locale Locale.En) ....
} 
```

`resource bundles`每个我都有。`language`但我错过了我必须将这些捆绑包映射到 Locale 的地方（这样当我向 a 请求时`locale`它会返回相应的 localize `string`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:12:30.107

正如其他帖子中的答案所暗示的那样， a`Locale`只不过是格式化的字符串序列。如果您已经知道您的目标语言环境，您可以简单地根据它的名称为它创建一个 ResourceBundle，例如`MyApplicationStrings_hi_IN_someregion.properties`，而不管 Java 是否知道该语言环境。

如果您不知道 的名称`Locale`，请编写一个简短的 Java 程序来执行`System.out.println(Locale.getDefault().toLanguageTag());`并在已知设置为感兴趣的语言环境的机器上运行该程序。

# google-app-engine - 如何使用带有 integer_id 的 ndb 键？

> ID：15187813
> 
> 赞同：2
> 
> 时间：2013-03-03T16:29:49.387
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我看到文档 [https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_integer_id](https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_integer_id)

> 返回最后一个 (kind, id) 对中的整数 id，如果键具有字符串 id 或不完整，则返回 None。

看到我认为键的 id 可以是 int ；所以我写

```
 r = ndb.Key(UserSession, int(id)).get()
    if r:
        return r.session 
```

但是 dev_server.py ，总是会提高

```
 File "/home/bitcoin/down/google_appengine/google/appengine/datastore/datastore_stub_util.py", line 346, in CheckReference
    raise datastore_errors.BadRequestError('missing key id/name')
BadRequestError: missing key id/name 
```

我改变 int(id) -> str(id)

似乎是对的；

所以我的问题是，如何使用带有 integer_id 的 ndb 键？

模型是

```
class UserSession(ndb.Model):
    session = ndb.BlobProperty() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T15:46:48.980

您在*读取*实体时使用的 id 的类型必须与您在*编写*实体时使用的 id 的类型相匹配。通常，当您编写新实体而不指定 id 或键时，会自动分配整数 id；然后从 entity.put() 返回的键中获取 id。一般不建议分配自己的整数id；当应用程序分配键时，约定是它们应该是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:57:40.397

有一种更简单的获取方法：

```
UserSession.get_by_id(int(id)) 
```

[https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id)

如果这不起作用，我怀疑那`id`是错误的或空的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:02:49.623

在会话中使用它们的键而不是它们的 ID 来识别您的实体可能更容易。确实没有必要从密钥中提取 ID 来识别会话（除了可能节省*一点*内存。我认为您的思维方式是基于 RDB。我了解到使用密钥实际上可以识别实体/会话更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:44:01.693

您的变量“id”一定有问题。

你这里的代码应该没问题，最好用long而不是int。

您可以在具有特定整数 id 的开发服务器的交互式控制台上尝试您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-24T14:55:12.843

'id' 也是一个 python 内置函数。也许你误会了。

# iphone - MixerHostAudio 蓝牙

> ID：15187817
> 
> 赞同：1
> 
> 时间：2013-03-03T16:30:04.650
> 
> 标签：iphone, objective-c, audio, bluetooth, audiounit

我正在使用 MixerHostAudio 来听我在说什么，同时我正在说话。我什至可以将它与我的 Apple TV 一起使用，并且可以正常工作。我的问题是，我可以在说话的同时听到我在蓝牙设备上说的话吗？似乎不是因为打开我的应用程序时我无法选择我的蓝牙设备。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T21:31:06.277

好问题。我有一个类似的，并花了几个小时与苹果公司通电话试图得到答案。不幸的是，iOS 7 不允许 AVAudioSession 独立配置输入和输出。您可以获得的最接近的是使用 MultiRoute 类别，但它目前不支持蓝牙设备。向 Apple 提交错误报告，希望他们将其添加到未来的 iOS 版本中。

# c# - 如何使用进度条显示使用异步的 MVVM 模式加载 RSS 提要

> ID：15187822
> 
> 赞同：0
> 
> 时间：2013-03-03T16:30:24.277
> 
> 标签：c#

我正在使用 MVVM 模式创建一个应用程序，我需要在其中从 RSS 提要加载数据。这需要一些时间，所以我想使用进度条来显示加载过程。如何在视图模型中使用 MVVM 模式通过异步和 IsBusy 状态来实现这一点？如果有人有，请提供代码。进度条的 UI 代码是：

```
<ProgressBar IsIndeterminate={Binding IsBusy} /> 
```

ViewModel 中的代码应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:34:41.500

您还应该绑定`Visibility`属性。并且因为它需要`Visibility`枚举值，所以您必须使用[`BooleanToVisibilityConverter`](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)转换器：

```
<Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
</Resources>

<ProgressBar IsIndeterminate={Binding IsBusy}
             Visibility="{Binding IsBusy, Converter={StaticResource BooleanToVisibility}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:58:10.633

`NotifyPropertyChanged`对于您的 ViewModel，您只需要一个触发事件的 IsBusy 属性。

```
public class MyViewModel : INotifyPropertyChanged
{
    private bool _isBusy;

    public bool IsBusy
    {
        get { return _isBusy; }
        set
        {
            _isBusy = value;
            this.RaisePropertyChanged("IsBusy");
        }
    }

    private void BeginWorking()
    {
        this.IsBusy = true;
        //Do the work...
    }
    private void FinishWorking()
    {
        this.IsBusy = false;
    }

    //Other implementation, including INotifyPropertyChanged...
} 
```

如果您不熟悉实施`INotifyPropertyChanged`，那么有许多资源可以帮助您。

正如先前的答案之一所暗示的那样，您需要使用将值`BooleanToVisibilityConverter`转换为值以显示/隐藏.`bool``Visibility``ProgressBar`

此外，除非您执行从后台线程检索 RSS 提要的工作，否则不会反映对 UI 的更改。否则，您将阻塞 UI 线程，并且您的 UI 将不会更新。

# memory - Log4j 和 Java PermGen 内存

> ID：15187825
> 
> 赞同：2
> 
> 时间：2013-03-03T16:30:42.083
> 
> 标签：memory, log4j, weblogic11g, permgen

我已经用完了 Weblogic 服务器上的 perm gen 内存。一个相关的线程可以在这里找到

[春季论坛主题](http://forum.springsource.org/showthread.php?135181-java-lang-OutOfMemoryError-PermGen-space&p=439440#post439440)

今天我尝试运行一个 Jprofiler，这就是我在内存视图中看到的

![JProfiler 截图](../Images/43224a4faaa5946589e31e580e3fd4a8.png)

为什么所有这些 log4j 实例？为什么所有这些内存消耗？有人可以解释一下原因并提出解决方案吗？我是分析应用程序的新手....

# xml - php未定义索引写入xml文件

> ID：15187827
> 
> 赞同：1
> 
> 时间：2013-03-03T16:30:54.257
> 
> 标签：xml, php

我使用 php 从 html 表单编写 xml，由于这个问题，我无法继续。谢谢你的帮助！

```
 <?php 
  $root = array();  
 $root [] = array( 
 'subtitle' => $_POST['subtitle'], 
 ); 
 echo $_POST['subtitle'];//checker if POST really passes data

 $doc = new DOMDocument(); 
 $doc->formatOutput = true; 

 $r = $doc->createElement( "root" ); 
 $doc->appendChild( $r ); 

 $subtitle = $doc->createElement( "subtitle" ); 
 $subtitle->appendChild($doc->createTextNode( $root['subtitle'])); --Undefined index-
 $r->appendChild( $subtitle ); 
```

$root['subtitle'] 未定义，我不知道为什么。

```
 echo $doc->saveXML(); 
 $doc->save(.$_POST['title'].".xml") 
 ?> 
```

该代码确实生成了一个 xml 文件，但节点为空

```
<?xml version="1.0"?>
<root>
  <subtitle></subtitle>
</root> 
```

谢谢！

写了 print_r($root) 并在表格中写了 qwerty。这是输出数组（ [0] => Array ( [subtitle] => qwerty ) ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:39:18.117

你在做`$root [] = array(...)`。因此它在数组的索引**0**处创建另一个`$root`数组。

尝试做：

```
$subtitle->appendChild($doc->createTextNode($root[0]['subtitle'])); 
```

或者在初始化`$root`数组时去掉括号。

# c++ - 检查 RTTI

> ID：15187830
> 
> 赞同：0
> 
> 时间：2013-03-03T16:31:03.900
> 
> 标签：c++, oop, class, dynamic-cast

我有以下类和方法：

```
//Base class
class Node {
    public:
        virtual ~Node() {};
        Node() {};
    private:
        // Private things for my implementation.
};

class Element : public Node {
    public:
        // Returns the name of the element.
        const xml::String &name() const {
            return eleName;
        }

        static bool is_Element(const Node *base) {
            Element *p = NULL;
            p = dynamic_cast<Element*>(base);
            return (p!=NULL);
        }

        static const Element *to_Element(const Node *base) {
            return dynamic_cast<Element*>(base);   
        }

    private:
        s_namespace eleNamespace;
        xml::String &eleName;
        // Private things for my implementation.
}; 
```

在这里，当我动态转换时，它会显示以下编译错误。如何纠正它？一种方法是简单地删除`const`参数。但我认为这不是正确的方法。

> oops.cpp：在静态成员函数'static bool xml::Element::is_Element(const xml::Node*)'中：oops.cpp:208:44: 错误：不能dynamic_cast'base'（类型为'const class xml ::Node*') 输入 'class xml::Element*' (转换抛弃了 constness) oops.cpp: 在静态成员函数 'static const xml::Element* xml::Element::to_Element(const xml:: Node*)': oops.cpp:213:47: error: cannot dynamic_cast 'base' (of type 'const class xml::Node*') to type 'class xml::Element*' (conversion cast away constness)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T16:34:35.793

改为使用`dynamic_cast<const Element*>`。

您还可以通过为 const-Argument 和非 const Argument 实现两个不同的函数来使您的类 const 正确：

```
 static const Element *to_Element(const Node *base) {
        return dynamic_cast<const Element*>(base);   
    }

    static Element *to_Element(Node *base) {
        return dynamic_cast<Element*>(base);   
    } 
```

所以如果调用者有一个非常量，`Node`他可能也想要一个非常量`Element`，现在他可以得到它......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:34:26.177

试试这个：

```
static bool is_Element(const Node *base) {
    const Element *p = NULL; // Add a const keyword here
    p = dynamic_cast<const Element*>(base); // Add a const keyword here
    return (base!=NULL);
} 
```

同样的`to_Element`

# php - 如何在 PHP 中保存对象并在任何地方访问它？

> ID：15187831
> 
> 赞同：1
> 
> 时间：2013-03-03T16:31:12.050
> 
> 标签：php, global-variables

我是 PHP 新手，我想从这个类中保存一个对象，我可以在我的 web 服务中访问该对象，该对象包含一个会话 id，可用于调用 API：

我的对象.php：

```
class MyObject {
private $sessionId = '';

private function __construct(){
    $this->sessionId = '';
}

public static function getInstance() {
    if (!$GLOBALS['MyObject']) {
        echo 'creating new instance';
        $GLOBALS['MyObject'] = new MyObject();
    }
    return $GLOBALS['MyObject'];
}

public function getSessionsId() {
    if ($GLOBALS['MyObject']->sessionId == '') {
        // Do curl to get key (works)
        if (!curl_errno($curlCall)) {
            $jsonObj = json_decode($result);
            $sessionID = $jsonObj->session_id;
            $GLOBALS['MyObject']->sessionId = $sessionID;
        }
    }
    return $GLOBALS['MyObject']->sessionId;
} 
```

}

网络服务 GetKey.php

```
include 'MyObject.php';

    $instance = MyObject::getInstance();
    echo $instance->getSessionsId(); 
```

我访问 GetKey.php 文件时它总是回显“创建新实例”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:35:52.463

加载页面时，您存储的`$GLOBALS`内容将被销毁...该变量仅在`response`创建时可用...

你不会保存一个对象并在任何地方使用它（对于所有用户）..你在 php 中 :) 你可以将它存储在任何地方......但是如果你在一个函数中，那么当你在外面时它会被销毁功能...

在 web 服务中，您不使用会话，因为它在下一次操作调用时不存在

如果您想为同一用户的多个请求存储该变量，您可以将其存储在`$_SESSION`而不是`$GLOBALS`...

当`PHP`用户得到响应时，一切都被破坏了......（只有会话是一个例外）......一个会话就像java或任何其他语言......你拥有它/用户，你可以在请求时修改它。 ..您没有类似的东西`applicationScope`并为所有用户存储所有内容...在每次请求时都会重新创建所有内容

# css - 向下滚动动画或触发块

> ID：15187833
> 
> 赞同：0
> 
> 时间：2013-03-03T16:31:15.893
> 
> 标签：css, ajax, scroll, jquery-animate, adobe-edge

我正在尝试重新创建类似于以下内容的内容： [https ://www.apple.com/uk/ipad-mini/design/](https://www.apple.com/uk/ipad-mini/design/)

当您在页面上向下滚动时，它似乎了解某个区域在查看时会触发动画元素。我正在尝试以此为基础，但不确定从什么开始。我了解 HTML、CSS、DIV 标签的元素，并且可能在查看时打开隐藏块可能是答案。但需要简单触发元素的建议。爪哇？php？CSS？

因此，当用户向下滚动时，可能会出现 30% 的隐藏元素或动画。如果有帮助，我会在 adobe edge 中制作动画。

有什么好处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:38:43.117

尝试使用 Jquery (scrolltop)

```
$(window).scroll( function(){    
if ($(window).scrollTop() > 150) {
   // If window is scrolled by 150px do this
}
}); 
```

希望这可以帮助

# python - 使用宽度说明符打印 python 列表

> ID：15187834
> 
> 赞同：1
> 
> 时间：2013-03-03T16:31:16.417
> 
> 标签：python, list, printing, format

我希望有更好的方法来做到这一点。直接上代码：

```
print "-I- %-6s%-6s%-6s%-6s%-6s%-6s%-6s%-6s%-8s" % \
      ("A",B","C","D","E","F","G","H","% Done")
print "-I- %-6s%-6s%-6s%-6s%-6s%-6s%-6s%-6s%-8s" % \
      ("-"*5 ,"-"*5 ,"-"*5 ,"-"*5 ,"-"*5 ,"-"*5 ,"-"*5,"-"*5,"-"*8) 
```

理想情况下，我想做这样的事情：

```
hdrs = ["A",B","C","D","E","F","G","H","% Done"]
<print statement that uses len(hdrs[i]+2) for the column width>
<print statement that uses len(hdrs[i]+2) for the column width and len(hdrs[i]+1 for the number of dashes> 
```

输出将如下所示：

```
A     B     C
----- ----- ----- 
```

这种方法将比我目前的方法更具可扩展性。我使用 join 和 map 尝试了各种方法，但我一直无法找到可行的解决方案。任何帮助将不胜感激。

编辑：

我刚刚让这部分工作：

```
print " ".join("-"*(len(x)+1) for x in hdrs) 
```

上一行代码按照我在原始帖子中要求的方式打印破折号，但我想知道是否有更清洁的方式。我仍然不知道如何打印字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T16:42:45.700

如果您只是想完成它而不是将其作为练习，请使用[`prettytable`](https://code.google.com/p/prettytable/wiki/Tutorial). 此示例来自链接教程：

```
x = PrettyTable(["City name", "Area", "Population", "Annual Rainfall"])
x.align["City name"] = "l" # Left align city names
x.padding_width = 1 # One space between column edges and contents (default)
x.add_row(["Adelaide",1295, 1158259, 600.5])
x.add_row(["Brisbane",5905, 1857594, 1146.4])
x.add_row(["Darwin", 112, 120900, 1714.7])
x.add_row(["Hobart", 1357, 205556, 619.5])
x.add_row(["Sydney", 2058, 4336374, 1214.8])
x.add_row(["Melbourne", 1566, 3806092, 646.9])
x.add_row(["Perth", 5386, 1554769, 869.4])
print x 
```

输出：

```
+-----------+------+------------+-----------------+
| City name | Area | Population | Annual Rainfall |
+-----------+------+------------+-----------------+
| Adelaide  | 1295 |  1158259   |      600.5      |
| Brisbane  | 5905 |  1857594   |      1146.4     |
| Darwin    | 112  |   120900   |      1714.7     |
| Hobart    | 1357 |   205556   |      619.5      |
| Sydney    | 2058 |  4336374   |      1214.8     |
| Melbourne | 1566 |  3806092   |      646.9      |
| Perth     | 5386 |  1554769   |      869.4      |
+-----------+------+------------+-----------------+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T16:41:49.743

这个怎么样：

```
hdrs = ("A","B","C","D","E","F","G","H","% Done")
fmt_string = ''.join("%%-%is" % (len(h)+2) for h in hdrs)
print(fmt_string % hdrs)
print(fmt_string % tuple("-"*(len(h)+1) for h in hdrs)) 
```

我使用了描述的列大小而不是示例中的列大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T16:42:05.260

您可以像这样构造格式字符串：

```
format = "".join(["%-"+str(len(h)+2)+"s" for h in hdrs]) 
```

然后用它来打印你的列表，例如：

```
l = range(hdrs) # example data to print, the number of items is the same as hdrs
print format % tuple(l) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T16:46:41.813

试试这个，在这里你可以指定每列的宽度（不要让字符串大于宽度）

```
widths = [6,6,6,6,6,6,6,6,8]
hdrs = ["A","B","C","D","E","F","G","H","% Done"]

data = [hdrs[i].ljust(widths[i]) for i in range(len(hdrs))]
widths = ['-'*i for i in widths]

print '%s '*len(data) % tuple(data)
print ' '.join(widths) 
```

**输出**

```
A      B      C      D      E      F      G      H      % Done 
------ ------ ------ ------ ------ ------ ------ ------ -------- 
```

# vb.net - 如何使每个表单成为自己的线程并能够更新？

> ID：15187838
> 
> 赞同：0
> 
> 时间：2013-03-03T16:31:35.820
> 
> 标签：vb.net, multithreading, winforms

我的应用程序（聊天应用程序）中有三个（4 个计数主要线程）线程，我想将每个表单放入它自己的线程中（一个线程不需要表单，因此无关紧要）。我正在使用的两种形式是带有本地数字字体的时钟。问题是 threadb 将启动并运行，但 threadc 将保留为文本 LABEL1 并且根本不会更改为：MM/dd/yyyy hh:mm:ss tt。我想知道如何让这些线程一起工作。

这是线程代码（在 porgram 开头创建，这是来自 sub official_start）：

```
 threadb = New Threading.Thread(AddressOf form3threadsub)
    threadc = New Threading.Thread(AddressOf form4threadsub)
    threadb.IsBackground = False
    threadc.IsBackground = False
    threadb.Start()
    threadc.Start() 
```

这是线程潜艇的代码：

```
 Private Sub form3threadsub()
        Dim first As Boolean = False
        Do
            System.Threading.Thread.Sleep(100)
            If first = False Then
                form3.ShowDialog()

                first = True
            End If
            form3.Label1.Text = DateTime.UtcNow.ToString("MM/dd/yyyy hh:mm:ss tt")
            form3.Update()
        Loop
    End Sub

    Private Sub form4threadsub()
        Dim first As Boolean = False
        Do
            System.Threading.Thread.Sleep(100)
            If first = False Then
                Form4.ShowDialog()

                first = True
            End If
            Form4.Label1.Text = DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss tt")
            Form4.Update()
        Loop
    End Sub 
```

这是button2点击：

```
 Dim clicked As Boolean = True 

    Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click

        If clicked Then
            threadb.Suspend()'obsolete
            threadc.Suspend()'obsolete
            Button2.Text = "Resume Clocks"
            clicked = False
        Else
            threadb.Resume()'obsolete
            threadc.Resume()'obsolete
            Button2.Text = "Pause Clocks"
            clicked = True
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:43:26.590

我想我找到了我的工作解决方案。我把多余的表格拿出来，用主表格上的标签代替。每个标签都是它自己的线程并相应地更新。

# mysql - MYSQL如何从表中选择所有电子邮件但限制具有相同域的电子邮件数量

> ID：15187839
> 
> 赞同：3
> 
> 时间：2013-03-03T16:31:40.737
> 
> 标签：mysql, sql, database, greatest-n-per-group

正如主题所暗示的，我想选择列表中的所有电子邮件。但限制具有相同域的电子邮件数量。

可以说我有 500 个 gmail 地址。

和 2 个 example.com 地址。

.. 等等..

> 我只想抓取具有相同域的每个地址中的 2 个。

有了这个字符串，我可以选择每个域上的域数，所以也许我可以用这个字符串做点什么。

```
SELECT substring_index(email, '@', -1), COUNT(*) FROM emaillist GROUP
BY substring_index(email, '@', -1); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:41:40.443

```
SELECT ID, Email, SUBSTRING_INDEX(EMAIL, '@', -1) Domain
FROM   emaillist a
WHERE  
(
    SELECT  COUNT(*)
    FROM    emaillist e
    WHERE   SUBSTRING_INDEX(e.EMAIL, '@', -1) = SUBSTRING_INDEX(a.EMAIL, '@', -1) AND
            a.ID <= e.ID
) <= 2; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0ab3d/4)

上面的查询不使用`INDEX`. 这样做的效果是，如果您有一个非常大的数据库，它将执行`FULL TABLE SCAN`导致查询变慢。

我对你的建议是创建一个额外的列，你必须`INDEX`为它定义一个，例如，

```
CREATE TABLE emaillist 
(
    ID INT AUTO_INCREMENT PRIMARY KEY,
    EMAIL VARCHAR(50) NOT NULL,
    DOMAIN VARCHAR(15) NOT NULL,
    KEY (DOMAIN)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:36:26.067

```
SELECT
  MIN(email) AS address1
  IF(MAX(email)==MIN(email),NULL,MAX(email)) AS address2
FROM emaillist
GROUP BY substring_index(email, '@', -1); 
```

如果你想让它们在一栏中

```
SELECT MIN(email) AS address1
FROM emaillist
GROUP BY substring_index(email, '@', -1)
UNION
SELECT MAX(email) AS address1
FROM emaillist
GROUP BY substring_index(email, '@', -1) 
```

# java - Eclipse Java 编辑器：键入时不再显示错误

> ID：15187841
> 
> 赞同：1
> 
> 时间：2013-03-03T16:31:48.910
> 
> 标签：java, eclipse

在我的经典 Java 编辑器面板中，实时输入时不再显示错误，但只有在我保存更改时才显示！？

（我讲编译错误的红色下划线样式）

我尝试在首选项中找到可能会影响此的配置，但我对此一无所知。我从来没有在 Eclipse 中看到过，我从来没有遇到过这个问题，我用了大概 10 年了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:36:05.693

**Window** → **Preferences** → **Java** → **Editor** → 勾选“ *Report questions as you type* ”：

![在此处输入图像描述](../Images/bddca93dd16f5bc35307af73eec41e76.png)

# objective-c - 如何找出我没有使用 didSelectRowAtIndexPath 推送的单元格的 indexPath？

> ID：15187842
> 
> 赞同：0
> 
> 时间：2013-03-03T16:31:53.623
> 
> 标签：objective-c, core-data, uitableview, nsfetchedresultscontroller

我`UITableView`里面有一个带有自定义单元格的单元格，当点击其中的 a 时会触发一个详细视图`UIButton`。点击单元格本身不会触发 segue，意思`didSelectRowAtIndexPath`是永远不会被调用。

在实现这一点之前，我`didSelectRowAtIndexPath`用来设置通过我`NSFetchedResultsController`的`fetchedObjects`数组中的 indexPath 传递给详细视图的对象。由于我现在不使用`didSelectRowAtIndexPath`，因此无法访问那里的 indexPath 。

我已经尝试过使用`tag`按钮的 ，但由于它不能存储，所以当我在 segue 之前`indexPath`调用时，这不起作用。`objectAtIndexPath`我也尝试访问按钮`superview`来获取它`indexPath`，但这也不起作用，总是为零。

我怎么知道哪个`UIButton`被推送了，以便我可以将正确的对象传递给我的细节控制器？

**编辑：**我想到了添加一个添加属性的`UIButton`类别的想法`indexPath`，但是我在执行此操作时遇到了麻烦，因为它希望有一个方法与之配合。这种方法行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:42:06.187

按照按钮的superview（或按钮的superview的superview）获取Cell并从tableview中获取cell的indexpath

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:37:40.993

我通过在点击按钮时调用的方法中添加以下内容来修复：

```
UIView *contentView = (UIView *)[sender superview];
UITableViewCell *cell = (UITableViewCell *)[contentView superview];
NSIndexPath *indexPath = [self.tableView indexPathForCell: cell];
_quote = [self.fetchedResultsController objectAtIndexPath: indexPath];
[self performSegueWithIdentifier: @"ViewDetail" sender: nil]; 
```

# python - Django：从模型的相关集中获取相关集

> ID：15187845
> 
> 赞同：9
> 
> 时间：2013-03-03T16:32:25.863
> 
> 标签：python, django, foreign-keys, database-relations

```
class Book(models.Model):
    # fields

class Chapter(models.Model):
     book = models.ForeignKey(Book)

class Page(models.Model):
     chapter = models.ForeignKey(Chapter) 
```

我想要 A 书的所有页面，可能不需要循环每一章来获取页面。

```
book = Book.objects.get(pk=1)
pages = book.chapter_set.page_set #?!? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T16:48:14.763

你不能那样做。chapter_set 是一个查询集，它没有 page_set 属性。

相反，把它转过来：

```
Page.objects.filter(chapter__book=my_book) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T16:47:00.800

当您查询跨模型时，双下划线可能会有所帮助

```
book = Book.objects.get(pk=1)
pages = Page.objects.filter(chapter__book=book) 
```

# c# - C#自动生成EventHandler

> ID：15187849
> 
> 赞同：2
> 
> 时间：2013-03-03T16:32:46.090
> 
> 标签：c#, event-handling

我有一个程序可以逐行读取文件，并将字符串放在 tableLayoutPanel 中，但是如何为 tableLayoutPanel 中的每个标签创建一个 eventHandler？

这是我正在使用的代码：

```
Label label = new Label();
label.Name = "MyNewLabel";
label.ForeColor = Color.Red;
label.Text = line;
tableLayoutPanel1.RowCount++;
tableLayoutPanel1.RowStyles.Add(new RowStyle());
tableLayoutPanel1.Controls.Add(label, 0, tableLayoutPanel1.RowCount + 1); 
```

每个标签都需要打开一个网页，并且 url 必须是它自己的文本。

我已经尝试过这个：

```
foreach (Control x in panel1.Controls)
{
label.Click += HandleClick;
} 
```

和

```
private void HandleClick(object sender, EventArgs e)
{
messageBox.Show("Hello World!");
} 
```

它只是行不通。

* * *

新问题：

主要问题由 Jay Walker 解决，但现在我有另一个问题。并非所有标签都与 eventHandler 一起使用。这是主要代码：

```
string line;
System.IO.StreamReader file = new System.IO.StreamReader("research.dat");
while ((line = file.ReadLine()) != null)
{
    Label label = new Label();
    label.Name = "MyNewLabel";
    label.ForeColor = Color.Red;
    label.Text = line;

    label.Click += HandleClick;

    tableLayoutPanel1.RowCount++;
    tableLayoutPanel1.RowStyles.Add(new RowStyle());
    tableLayoutPanel1.Controls.Add(label, 0, tableLayoutPanel1.RowCount + 1);
} 
```

结合：

```
 private void HandleClick(object sender, EventArgs e)
    {
        ((Control)sender).BackColor = Color.White;
    } 
```

一些标签背景变为白色，而**相同**的则不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:37:11.617

为什么不只是在创建标签时添加处理程序，而不是稍后通过控件上的循环（您可能应该引用`x`而不是`label`.

```
Label label = new Label();
label.Name = "MyNewLabel";
label.ForeColor = Color.Red;
label.Text = line;
// add the handler here
label.Click += HandleClick;
tableLayoutPanel1.RowCount++;
tableLayoutPanel1.RowStyles.Add(new RowStyle());
tableLayoutPanel1.Controls.Add(label, 0, tableLayoutPanel1.RowCount + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:36:56.190

做

```
label.Click += Eventhandler; 
```

创建标签后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:41:48.727

如果您真的希望它在 foreach 循环中执行：

```
foreach (Control c in panel1.Controls) {
    if (c.Type ==  typeof(Label)) { //or something like that...
          c.Click += HandleClick;
    }
} 
```

# java - 连接与数据源

> ID：15187850
> 
> 赞同：8
> 
> 时间：2013-03-03T16:32:50.130
> 
> 标签：java, jdbc

我正在阅读Java 中`Connection`的 s vs `DataSource`s 并且我有一些问题。a`DataSource`真的只是一个管理器和一个`Connection`（或多个连接）的抽象吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T16:38:30.320

来自[文档](http://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html)：

> 用于连接到此 DataSource 对象所代表的物理数据源的工厂。作为 DriverManager 工具的替代方法，DataSource 对象是获取连接的首选方法。

实际上，a`DataSource`是`Connection`s 的提供者，它有多种以不同方式运行的实现。如：

> 1.  基本实现——产生一个标准的 Connection 对象
>     
>     
> 2.  连接池实现——生成一个将自动参与连接池的连接对象。此实现与中间层连接池管理器一起使用。
>     
>     
> 3.  分布式事务实现——生成一个可用于分布式事务并且几乎总是参与连接池的 Connection 对象。此实现与中间层事务管理器一起使用，并且几乎总是与连接池管理器一起使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T16:37:24.377

`Connection`是连接:)`DataSource`是连接管理器（连接池）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T16:34:48.220

数据源是你的数据源，连接是驱动。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-17T13:57:22.627

DataSource 在其现有形式中是一个错误的概念，就好像它旨在抽象交互，它不应该首先返回一些 SQL 连接来与之交互。这也是矫枉过正，XA是一个幻想概念，有些人因世界上缺乏可靠的实施而付出了沉重的代价（我的意思是所有企业商业实施者都失败并暴露业务......有人因此而在金融领域受到伤害，但我不会提及名称）。一般来说，无论 Sun 还是 Oracle 推荐它，它都会导致过度设计和代码中的一些技术污垢（处理上下文、获取数据的额外步骤、一些外部配置......最终它仍然是特定于无论如何供应商实现）。一些开发的企业解决方案处理池、连接恢复等

作为记录，我与两者都合作过，并且基于在不同地方遇到的事实。如果您对此表示怀疑，请询问为什么您可以在 Hibernate 配置中看到纯 JDBC URL 在企业的所有地方。许多人只是简单地抛弃了 J2EE 的重量级思想并转向轻量级……也使用基于 DriverManager 的普通连接。

你想让你的职业生涯上线，然后继续使用 XA 数据源和恢复失败的事务，其中糟糕的 XA 实现严重失败。

# php - 注意：未定义的变量：

> ID：15187851
> 
> 赞同：-5
> 
> 时间：2013-03-03T16:33:04.273
> 
> 标签：php

```
Notice: Undefined variable: admin_username in D:\xampp\htdocs\site\lib\configuration.php on line 63

Notice: Undefined variable: signin_username in D:\xampp\htdocs\site\lib\configuration.php on line 76 
```

我无法摆脱这个错误。我只是不明白为什么它说它没有定义，因为它之前定义了几行。我真的被困在这里了。任何想法都受到高度赞赏。

```
if(isset($_SESSION['admin_username'])){ $admin_username = $_SESSION ['admin_username']; }
if(isset($_SESSION['admin_password'])){ $admin_password = $_SESSION['admin_password']; }
if(isset($_SESSION['admin_token'])){ $admin_token = $_SESSION['admin_token']; }
if($admin_username && $admin_password && $admin_token == session_id()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:36:30.527

## 错误在这里：

```
if($admin_username && $admin_password && $admin_token == session_id()) 
```

这似乎很可能是第 63 行。问题是您*只*定义`$admin_username`if`$_SESSION['admin_username']`设置。

尽管您没有在代码示例中显示它，但我认为`$signin_username`.

## 解决方案 #1 - 使用 isset

您的问题有多种解决方案。第一个，也许是最简单的，是在检查变量值之前检查变量是否已设置。

```
if (isset($admin_username, $admin_password, $admin_token) && session_id() == $admin_token) 
```

## 解决方案 #2 - 定义默认值

如果在检查对应的`$_SESSION`变量是否存在之前，变量有默认值，则不会出现错误：

```
$admin_username = $admin_password = $admin_token = FALSE;

if(isset($_SESSION['admin_username'])){ $admin_username = $_SESSION ['admin_username']; }
if(isset($_SESSION['admin_password'])){ $admin_password = $_SESSION['admin_password']; }
if(isset($_SESSION['admin_token'])){ $admin_token = $_SESSION['admin_token']; } 
```

## 解决方案 #3 - 定义何时丢失

如果无论相关`$_SESSION`变量是否存在都定义了这些变量，则这些错误也不会发生：

```
$admin_username = isset($_SESSION['admin_username']) ? $_SESSION['admin_username'] : FALSE;

$admin_password = isset($_SESSION['admin_password']) ? $_SESSION['admin_password'] : FALSE;

$admin_token = isset($_SESSION['admin_token']) ? $_SESSION['admin_token'] : FALSE; 
```

# php - 如果用户关闭浏览器，则通过本地 PHP 代理下载视频

> ID：15187855
> 
> 赞同：0
> 
> 时间：2013-03-03T16:33:35.913
> 
> 标签：php, download

我有一个验证大文件（视频）下载的 php。

例子：

```
<?php
// proxy.php

// validations here
$contents=file_get_contents("video.mp4");

// headers here
echo $contents; 
```

**如果用户请求文件（通过 proxy.php）并关闭窗口/浏览器（或浏览），脚本执行会发生什么？**

当不再有用户时，我想避免脚本继续被执行（以及视频被下载）。

# jquery - jquery spservices getlistitems

> ID：15187871
> 
> 赞同：0
> 
> 时间：2013-03-03T16:35:24.490
> 
> 标签：jquery, sharepoint, spservices

我正在尝试使用 jquery spservices 从共享点列表中获取列表项。但它不返回任何列表项。这是代码，有谁知道怎么回事？

```
var _query = "<Query><Where><Eq><FieldRef Name='Title' /><Value Type='Text'>maandag</Value></Eq></Where></Query>";

$().SPServices({
    operation: 'GetListItems',
    async: false,
    listName: 'OpeningsTijden',
    CAMLViewFields: "<ViewFields><FieldRef Name='Title' /><FieldRef Name='Time' /></ViewFields>",
    CAMLQuery: _query,
      completefunc: function (xData, Status) {
                    alert(xData.responseText);
                    $(xData.responseXML).SPFilterNode("z:row").each(function() { 

         alert('yessir');

                        });                
                    }

        }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-08T15:30:34.403

使用调试功能确保您的请求正常工作始终是一个好主意：

 `````
if (Status == "success") {
  alert(xData.responseXML);
}else {
  var out = $().SPServices.SPDebugXMLHttpResult({
  node: xData.responseXML,
  outputId: myRequests
});

$('#myRequests').html(out);
} 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T11:44:57.533

感谢您的代码，完美运行 :) 也许您的列表名称拼写错误或其他什么，我复制并使用了它。第一次工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T11:28:13.703

1-检查尝试从查询中删除过滤器并查看结果，如果它带来数据意味着您的过滤器不正确或过滤器中的列不同。

2-如果仍然没有返回任何值，则您的列表可能有问题

3- 通常从 SP 2007 迁移的列表不支持 SPServices 功能尝试创建新列表并尝试您的代码。``

# ios - 程序接收信号“SIGABRT”

> ID：15187879
> 
> 赞同：-1
> 
> 时间：2013-03-03T16:36:09.873
> 
> 标签：ios, objective-c, cocoa

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

   self.window.rootViewController = self.viewController;    // program recieve signal "SIGABRT".
    [self.window makeKeyAndVisible];
    return YES;;
} 
```

我正在从 URL 读取一些图像并且它工作但突然出现了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:50:48.183

您可能已经对初始化 viewController 的行做了一些事情

```
self.viewController=[ViewController alloc]initWithNibName:@"ViewController" bundle:nil]; 
```

或者您可能没有`viewController`作为插座正确连接到`mainWindow.xib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:48:54.043

我发现了问题。你必须检查你的`IBOutlets`，检查它们是否都已连接，如果其中任何一个`!`旁边有一个，那么你必须删除插座。

# c# - C# .Net 类库数据库架构创建

> ID：15187883
> 
> 赞同：0
> 
> 时间：2013-03-03T16:36:28.703
> 
> 标签：c#, .net, database, entity-framework

我正在创建一个将在多个项目中使用的类库。该库包含一些实体，其中包含数据库中的关联表。我的问题是：当我在项目中包含这个库时，如何创建这些表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:59:14.117

我怀疑您想要一个用于生成数据库的对象库？

如果是这样，您可以使用 EntityFramework CodeFirst 来实现。

至少你需要你的对象和一个 DbContext。

一个典型的设置可能如下：

**实体**

```
public class Person {

    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

**数据库上下文**

```
public class MyDbContext : System.Data.Entity.DbContext {

     public MyDbContext(string nameOrConnectionString) : base(nameOrConnectionString)

     public DbSet<Person> People { get; set; }
} 
```

这些将存在于您的项目中，并且当您添加对它的引用时，例如 Web 项目。有不同的方法来构建数据库，您可以从您的 Web 项目中调用构造函数 (MyDbContext) 并将连接字符串传递给服务器。

# regex - （简化的）正则表达式匹配的复杂性

> ID：15187888
> 
> 赞同：1
> 
> 时间：2013-03-03T16:36:43.990
> 
> 标签：regex, algorithm, time-complexity

我只是想知道这个正则表达式匹配问题的复杂性：给定一个小写字母字符串和一个匹配规则，确定该规则是否可以匹配整个字符串。该规则是一个简化的正则表达式，仅包含较小的字母和/或“。” （句点）和/或“*”（星号）。句点可以匹配任何小写字母，其中星号可以匹配零个或多个前面的元素。

这里有些例子：

*   isMatch("aa","a") 为假
*   isMatch("aa","aa") 为真
*   isMatch("aaa","aa") 为假
*   isMatch("aa", "a*") 为真
*   isMatch("aa", ".*") 为真
*   isMatch("ab", ".*") 为真
*   isMatch("aab", "c*a*b") 为真

据说这个问题可以在多项式时间内解决。我只是想知道如何。凭直觉，将“aaaaaaaaaa”与“.*a.*”之类的正则表达式匹配会使与有限确定性机器匹配时很难确定状态转换。任何意见？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T03:15:43.540

You can solve this in polynomial time by using a dynamic programming algorithm. The idea is to answer queries of the following form:

> Can you match the last m characters of the string using the last n characters of the regular expression?

The idea is to use a recursive algorithm, then either memoize the results or use dynamic programming to cache the results. The recursive algorithm works as follows:

*   If the regular expression is empty, it only matches the empty string.
*   If the regular expression's second character isn't *, then the regular expression matches the string iff the first character of the string matches the regex and the rest of the string matches the rest of the regex.
*   If the regular expression's second character is *, then the regular expression matches the string iff one of the following is true:
    *   The first character of the regular expression matches the first character of the string, and the same regular expression matches the remainder of the string.
    *   The first character of the regular expression matches the first character of the string, and the regular expression with the *'ed expression removed matches the rest of the string.
    *   The first character of the regular expression doesn't match the first character of the string, but the regex formed by removing the *'ed expression matches the string.

Each of these cases makes a recursive call where either the string or the regex is shorter and does O(1) work aside from the recursive calls. Since there are only Θ(mn) possible subproblems (one for each combination of a suffix of the regex and a suffix of the original string), using memoization this problem can be solved in Θ(mn) time.

Hope this helps!

# asp.net - asp.net 菜单 xml -xpath 未找到

> ID：15187891
> 
> 赞同：1
> 
> 时间：2013-03-03T16:37:02.683
> 
> 标签：asp.net, xml, web

我有使用 xml 数据源的 asp.net 菜单，这里是 html 代码：

```
 <DataBindings>
                    <asp:MenuItemBinding DataMember="Menu" NavigateUrlField="Nav" TextField="Text" ToolTipField="Text" />
                </DataBindings>

            </asp:Menu>

             <asp:XmlDataSource XPath="/Menus/Menu" ID="XmlDataSource1" runat="server" DataFile="~/data.xml" >
        </asp:XmlDataSource> 
```

xml 位于： [http ://www.nlprogramming.net/data.xml](http://www.nlprogramming.net/data.xml)

错误是没有为 navigateurlfield 找到 Nav 属性你能帮我吗？谢谢

# lua - Lua 需要在 Windows 7 中工作，但不适用于 XP

> ID：15187896
> 
> 赞同：1
> 
> 时间：2013-03-03T16:37:24.570
> 
> 标签：lua

我需要一个具有基本要求的模块：

```
 require "luatorrent" 
```

并且在 32 位和 64 位版本的 Windows 8/7/Vista 上一切正常，但是当项目在 XP 上运行时出现此错误：

![在此处输入图像描述](../Images/b655c606ef96c164f7ae7469f154cf2e.png)

所以问题是：

A：任何人都知道为什么这个问题似乎是特定于 XP 的，即使它是相同的 Lua 5.1 和其他文件？

B：如果在不重新编译模块的情况下无法解决这个问题，我不能这样做，因为它是旧的并且没有源代码，那么我可以以某种方式执行要求，然后在加载时得到一个真/假，这样我就可以做一个“如果”声明继续加载模块的功能，因为抛出的错误会破坏代码并且应用程序不会继续？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:23:34.597

查看[package.loaders 上的 Lua 参考手册条目](http://www.lua.org/manual/5.1/manual.html#pdf-package.loaders)。

第一个加载程序在您的 DLL 中找到`package.path`并尝试将其加载为 DLL。它失败并显示您看到的错误消息。因此 Lua 通常会使用 DLL 加载器，它会在[`package.cpath`](http://www.lua.org/manual/5.1/manual.html#pdf-package.cpath). 我猜你的文件不在`cpath`. 或者，可能缺少 DLL 加载程序。检查是否`#package.loaders != 4`。

对于调试，您还可以尝试通过低级[`package.loadlib`](http://www.lua.org/manual/5.1/manual.html#pdf-package.loadlib)函数加载 DLL（funcname 应该是`"luaopen_luatorrent"`）。

我想到的另一个原因是，DLL 是 64 位的，而您的 XP 是 32 位的。但我认为，在这种情况下，错误消息看起来会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:22:32.850

感谢人们的帮助，事实证明 libeay32.dll 需要位于 system32 或与该模块工作的模块相同的文件夹中。

# php - 表单保存空值php

> ID：15187899
> 
> 赞同：0
> 
> 时间：2013-03-03T16:38:09.170
> 
> 标签：php, mysql, forms

我在 php 中创建了一个个人资料页面，用户可以在其中使用表单将他的电话号码保存在数据库中名为 profile 的表中。如果用户决定更改他的电话号码，可以轻松地进行更改并再次保存。我唯一的问题是以下。假设用户想要删除他的电话号码。如果他去表格删除他的号码（使该字段为空）并按保存，电话号码不会更改为空值并继续保留以前的号码。知道如何更改它以保持空值吗？

这是我的代码形式：

```
<form   action=""   method="POST"  >    

<?php

if ( isset($_GET['success']) === true && empty($_GET['success'])===true ){
   echo'Profile Updated Sucessfuly';
    }else{
   if( empty($_POST) === false  &&  empty($errors) === true ){
     $update_data_profile = array('telephone' => $_POST['telephone']);

          update_user_profile($session_user_id, $update_data_profile);
      header('Location: profile_update.php?success');                               
      exit();

   }else if ( empty($errors) === false ){
      echo output_errors($errors);
       }

     ?>

 Telephone<input name="telephone" type="text" size="25"  value="<?php echo $user_data_profile['telephone']; ?>"/>
<input type="submit" value="" name="submit"/>
</form> 
```

这是我将数据分派到配置文件表的函数：

```
function update_user_profile($user_id, $update_data_profile){

  $result = mysql_query("select user_id from profile where user_id = $user_id limit 1");

  if(mysql_num_rows($result) === 1){

  $update = array();
      array_walk($update_data_profile, 'array_sanitize');

  foreach($update_data_profile as $field => $data ){
    if(!empty($data)){
      $update[]='`' . $field . '` = \'' . $data . '\'';
    }
  }

  if(isset($update) && !empty($update)){

  mysql_query(" UPDATE `profile` SET " . implode(',  ', $update) . " WHERE `user_id` = $user_id ") or die(mysql_error());
}
   }
  else{

$user_id = $update_data_profile['user_id'] ;

if(count($update_data_profile)){

$columns = array();
$values = array();

    foreach($update_data_profile as $field => $data){
    $columns[] = $field;
    $values[] = $data;
    } 
}

mysql_query(" INSERT INTO `profile` (" . implode(",", $columns) .") values ('" . implode("','", $values) . "')" ) or die (mysql_error());

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:39:50.333

如果数据不为空，您只会更新该字段。

看到这一行：

```
if(!empty($data)){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:40:56.350

因为您明确地忽略了空值：

```
if(!empty($data)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:05:13.637

由于 empty() 函数可以验证缺失和错误的元素，因此您不能简单地将其传递给 SQL 查询。因此，如果您想实际为这些项目生成查询，则需要通过执行以下操作显式设置值：

```
if (empty($data)) {
    $update[] = "`{$field}` = ''" ;
} else {
    $update[] = "`{$field}` = '{$data}'" ;
} 
```

如果您正在为 PHP 5.3 或更高版本编写代码，您还可以替换 if..else 语句并通过使用三元运算符（条件赋值）来缩短代码，如下所示：

```
$update[] = (empty($data)) ? "`{$field}` = ''" : "`{$field}` = '{$data}'"; 
```

# java - Netbeans：设置java交叉编译

> ID：15187901
> 
> 赞同：1
> 
> 时间：2013-03-03T16:38:31.503
> 
> 标签：java, generics, netbeans-7, cross-compiling

我打算用java编写私有命令行工具，用于我的私有系统（jdk 7）和我的大学数字处理服务器（jre 1.4）。尝试从源安装 OpenJdk 失败，因为它缺少几个依赖项，这在计算服务器上根本没有意义——例如 CUPS。安装此类依赖项及其依赖项所需的工作可能会破坏自动化任务的全部意义，即让生活更轻松。

虽然习惯了泛型的便利，但我不想编写 1.4 SOURCE 代码。我发现，从命令行编译时，选项如

```
javac -target 1.4 -bootclasspath jdk1.4.2/lib/classes.zip \
         -extdirs "" OldCode.java 
```

是可用的（参见 [1]），它应该允许将 jdk5 甚至 jdk7 特定的语法编译为 jdk1.4 兼容的字节码，只要我不使用更新的库功能（-bootclasspath 用于）。

这带来了两个问题：

1.  虽然我可以在 Netbeans 7.3 中轻松地将每个项目的合规级别设置为给定的 java 版本，但它也迫使我使用 1.4 语法（可能通过添加`-source 1.4`到上面的命令）。

2.  除了 oracle.com 之外，我在任何地方都找不到旧的 jdk（特别是 classes.zip），其中仅需要注册才能下载带有注册掩码的那些，非常清楚这些不是供私人使用的。

到目前为止，我发现的所有相关答案都没有提示如何在 netbeans 中进行这种字节码/源代码分隔的交叉编译，也没有解决查找旧 JDK 的问题。

Eclipse 并不是一个真正的选择，因为我不知道如何像在 netbeans 中那样自动生成 JAR。

有任何想法吗？

平台详情：

*   本地（来自 Netbeans“帮助 → 关于”）：

    ```
    Product Version: NetBeans IDE 7.3 (Build 201302132200)
    Java: 1.7.0_11; Java HotSpot(TM) 64-Bit Server VM 23.6-b04
    Runtime: Java(TM) SE Runtime Environment 1.7.0_11-b21
    System: Windows 7 version 6.1 running on amd64; Cp1252; de_DE (nb) 
    ```

*   偏僻的：

    ```
    java version "1.4.2_11"
    Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_11-b06)
    Java HotSpot(TM) 64-Bit Server VM (build 1.4.2_11-b06, mixed mode) 
    ```

**更新：**为了确定——可以用新语法将源代码编译到 Java 1.4。例如我写了这个文件：

```
class Target<T>{
    public T field;

    public static void main(String[] args){
        System.out.println("Hello World!");
        Target<String> target = new Target<>();
        target.field = "More Worlds.";
        System.out.println(target.field);
    }
} 
```

然后我用JDK 7编译它

```
javac -target jsr14 Target.java 
```

并将其上传到只有 JRE 1.4（根本没有 JDK）存在的计算服务器。它给出了预期的输出

```
Hello World!
More Worlds. 
```

显然，“jsr”目标是一个未记录的特性，参见例如 [2]。该链接还提到，这有点像 hack，因为只会处理 Collections 库的 for-each 循环：

> for-each 循环：在对数组进行迭代时，编译器会生成一个归纳变量和标准的数组迭代习语。在对 Collection 进行迭代时，编译器会生成标准的基于迭代器的惯用语。当迭代一个非Collection Iterable 时，编译器会产生一个错误。

我想这意味着，如果我想使用任何合理的现代功能，我别无选择，只能尝试将更新的 JRE 安装到服务器上......

[1][如何编译支持旧版本 java 的 .java？](https://stackoverflow.com/questions/11364761/how-do-i-compile-a-java-with-support-for-older-versions-of-java)
[2] [http://twit88.com/blog/2008/08/26/java-understanding-jsr14/](http://twit88.com/blog/2008/08/26/java-understanding-jsr14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:55:22.707

JDK 不向前兼容。也就是说，您不能为旧 JDK 版本编译新功能。（或就此而言的 JRE）。如果我没有完全弄错的话，诸如泛型之类的语言结构是 Java 中字节码或解释器的一部分。

AFAIK 你只有两个选择。1) 安装新的 JDK 或 2) 编写 1.4 源代码。

# c# - 使用 show 和 hide 在两种表单之间转换的行为不像我预期的那样

> ID：15187902
> 
> 赞同：0
> 
> 时间：2013-03-03T16:38:41.220
> 
> 标签：c#, .net, winforms

我有两种形式。第一个是父级，包含对第二个的引用和一个按钮：

```
public class Form1:Form {

       private Form2 frm2;
       private Button btnShow;
...

} 
```

当我按下按钮时 frm2 必须显示（可见并在所有其他窗口前面）并且 Form1 必须隐藏。

当我按下frm2的closebox时，frm2必须隐藏并且Form1必须显示（反向）。

我使用 btnShow 的 click 事件来注册一个句柄，它所做的只是：

```
 private void click(object sender, EventArgs e)
    {
        Hide();
        frm2.Show(this);
    } 
```

在 frm2 的 FormClosing 事件中：

```
 private void byebye(object sender, FormClosingEventArgs e)
    {
        if (e.CloseReason == CloseReason.UserClosing)
        {
            e.Cancel = true;
            Hide();
            Owner.Show();
        }
    } 
```

我的代码在 90% 的时间内都有效，但有时（我无法指定何时）显示的表单没有被带到前面或失去焦点（我不确定我认为是第一个）。

我做错了什么。我尝试交替显示和隐藏的顺序并使用新的参考而不是所有者，我也使用了激活，BringToFront，焦点但没有成功......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:43:00.287

为什么不简单：

```
{
    Form2 fm = new Form2();
    this.Visible = false;
    fm.ShowDialog();
    this.Visible = true;
} 
```

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T17:05:11.547

```
 Hide();
    Owner.Show(); 
```

你这样做是错误的。一瞬间，您的应用程序中没有一个可以接收焦点的窗口。Windows 窗口管理器被迫寻找另一个窗口来获得焦点。这将是另一个应用程序的窗口。很有可能这是一个足够大的窗口来覆盖你自己的。因此，您的 Show() 调用将使您的窗口再次可见，但现在位于已移至前台的窗口下方。顺便说一句，这并不总是发生，窗口管理器似乎使用了一个小超时。所有者被隐藏的时间越长，其代码被换出的可能性就越大，并且显示它需要更多时间，从而触发超时。

解决方法很简单，只需交换两个语句，这样您就可以始终拥有可以聚焦的窗口。使固定：

```
 Owner.Show();
    Hide(); 
```

# algorithm - MIN_HEAPIFY 算法

> ID：15187906
> 
> 赞同：0
> 
> 时间：2013-03-03T16:39:03.997
> 
> 标签：algorithm

以下 MIN_HEAPIFY 算法是否正确？

```
MIN_HEAPIFY(A,i)
{
l=LEFT(i);//calculates the left childs location
r=RIGHT(i);//right childs location

if((l<=A.heap_size)AND(A[l]<A[i]))
   small=l;
else
   small=i;

if((r<=A.heapsize)&&(A[small]>A[r]))
   small=r;

if(small!=i)
  {
   exchange A[i] with A[small];
   MIN_HEAPIFY(A,i)
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:46:23.590

不，这不正确，

```
if(small!=i)
  {
   exchange A[i] with A[small];
   MIN_HEAPIFY(A,i)
  } 
```

只有当`A[i]`比它的直系孩子之一大时，你才会增加更多。而且您使用相同的索引重复出现，这意味着第二次调用将什么也不做。

我已经解释了`heapify` [这里](https://stackoverflow.com/a/14903012/1011995)的正确版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:30:20.193

Java 实现。希望能帮助到你。

```
/**
 * Down-top heapify
 * @param index
 */
private void heapUp(int index){
    if(index > 1){
        int parent = index / 2;
        if(comp.compare(data[parent],data[index]) > 0 ){    
            swap(parent, index);
            heapUp(parent);
        }
    }
}
/**
 * Top-Down heapify
 * @param index
 */
private void heapDown(int index){
    int left = index * 2;
    int right = index *2 + 1;
    if( right >= size+1 && left >= size+1 ){ 
        data[size+1] = null;
        return;
    }

    int small = comp.compare(data[right],data[left]) >= 0 ? left : right;
    if(comp.compare(data[index],data[small]) >= 0){
        swap(small, index);
        heapDown(small);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-03T16:49:13.867

只需替换`MIN_HEAPIFY(A,i)`为，`MIN_HEAPIFY(A,small)`因为现在您需要转到大于 的节点的相应子节点`A[i]`，因为该索引现在很小，所以用小重复。

# scala - 如何将 MongoDBList 转换为 BasicDBList？

> ID：15187908
> 
> 赞同：0
> 
> 时间：2013-03-03T16:39:18.907
> 
> 标签：scala, casbah

我使用 Casbah 2.5.0。教程中有示例：

```
scala> val builder = MongoDBList.newBuilder
scala> builder += "foo"
scala> builder += "bar"
scala> builder += "x"
scala> builder += "y"
builder.type = com.mongodb.casbah.commons.MongoDBListBuilder@...

scala> val newLst = builder.result
newLst: com.mongodb.BasicDBList = [ "foo" , "bar" , "x" , "y"] 
```

所以这里的newLst 是BasicDBList。

但是当我自己尝试时，它的工作方式不同。

```
scala> val builder = MongoDBList.newBuilder
scala> builder += "foo"
scala> builder += "bar"
scala> val newLst = builder.result
newLst: com.mongodb.casbah.commons.MongoDBList = [ "foo" , "bar"] 
```

这里的 newLst 是 MongoDBList 类型。

为什么会这样？如何将 MongoDBList 转换为 BasicDBList？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:47:27.430

在 casbah 中存在从`com.mongodb.casbah.commons.MongoDBList`to的隐式转换（检查）：`com.mongodb.BasicDBList``com.mongodb.casbah.commons.Implicits`

```
implicit def unwrapDBList(in: MongoDBList): BasicDBList = in.underlying 
```

只需将 MongoDBList 传递到预期 BasicDBList 的位置：

```
scala>  val l: BasicDBList = newLst
l: com.mongodb.casbah.Imports.BasicDBList = [ "foo" , "bar"] 
```

如果你想从`MongoDBList`创建`List`：

```
scala>  val list = List("foo", "bar")
list: List[java.lang.String] = List(foo, bar)

scala>  val dbList = MongoDBList(list:_*)
dbList: com.mongodb.casbah.commons.MongoDBList = [ "foo" , "bar"] 
```

# timer - 在 Arduino 中使用定时器和 PWM

> ID：15187910
> 
> 赞同：0
> 
> 时间：2013-03-03T16:39:26.657
> 
> 标签：timer, arduino, pwm

我试图在其他代码运行时让 LED 淡入淡出，作为一个很好的状态指示器。我在这里问过如何做到这一点，我得到了使用 msTimer2 库的建议。这似乎有效，直到我尝试在代码中使用analogWrite。它只是跳过了那部分。当我删除该库时，它再次工作，但当然我没有状态指示器工作。为什么我的代码不起作用？

```
int ledPin = 10;
int brightness = 0;
int fadeAmount = 1;
#include <MsTimer2.h>

void flash() {
  for(int fadeValue = 20 ; fadeValue <= 21; fadeValue +=1) {   
    delay(20000);                            
  }

    for(int fadeValue = 20 ; fadeValue <= 220; fadeValue +=1) {
    analogWrite(ledPin, fadeValue);          
        delay(50);                            
  }

  for(int fadeValue = 220 ; fadeValue >= 50; fadeValue -=1) {
    analogWrite(ledPin, fadeValue);           
    delay(50);
  }

    for(int fadeValue = 50 ; fadeValue <= 110; fadeValue +=1) {
    analogWrite(ledPin, fadeValue);          
    delay(130);                            
  }

  for(int fadeValue = 110 ; fadeValue >= 20; fadeValue -=1) {
    analogWrite(ledPin, fadeValue);          
    delay(250);
  }

}

void setup() {
  pinMode(10, OUTPUT);
  pinMode(9, OUTPUT);
  pinMode(11, OUTPUT);

  MsTimer2::set(500, flash); 
  MsTimer2::start();
}

void loop() {
  digitalWrite(9, 1);
  delay(1000);
  digitalWrite(11, 1);
  delay(1000);
  digitalWrite(9, 0);
  delay(1000);
  digitalWrite(11, 0);
  delay(1000);
  analogWrite(9, brightness);    
  brightness = brightness + fadeAmount;
  delay(400);   
} 
```

# php - 带有 Slim 框架的 MySQL API

> ID：15187914
> 
> 赞同：1
> 
> 时间：2013-03-03T16:40:00.810
> 
> 标签：php, api, slim

好的，所以我终于设法让我的 API 在我的 MAMP localhost 上的苗条框架中工作，并在我的 index.php 中使用以下代码：

```
 $app = new \Slim\Slim();
 $app->get('/people', function() use ($app, $mysqli) {
     $testQuery = "SELECT name FROM People";
     $results = $mysqli->query($testQuery);

     $app->response()->header('Content-Type', 'application/json');
     while ($row = $results->fetch_assoc()) {
         echo json_encode($row);
     }
 });
 $app->run(); 
```

现在，当我访问 localhost/index.php/musicians 时，我得到的正是我所期望的—— JSON 编码的文本代表了 people 表上的名字。但是，如果我只是去本地主机，我会得到之前在 index.php 文件中打印的文本和 404 错误。此外，当我在控制台中运行 index.php 时，我收到以下错误消息：

> 注意：未定义的索引：第 123 行 /Applications/MAMP/htdocs/vendor/slim/slim/Slim/Environment.php 中的 REQUEST_METHOD
> 
> 注意：未定义的索引：第 126 行 /Applications/MAMP/htdocs/vendor/slim/slim/Slim/Environment.php 中的 REMOTE_ADDR
> 
> 注意：未定义的索引：/Applications/MAMP/htdocs/vendor/slim/slim/Slim/Environment.php 中的 REQUEST_URI 第 143 行
> 
> 注意：未定义索引：/Applications/MAMP/htdocs/vendor/slim/slim/Slim/Environment.php 148 行中的 REQUEST_URI
> 
> 注意：未定义索引：第 159 行 /Applications/MAMP/htdocs/vendor/slim/slim/Slim/Environment.php 中的 SERVER_NAME
> 
> 注意：未定义的索引：第 162 行 /Applications/MAMP/htdocs/vendor/slim/slim/Slim/Environment.php 中的 SERVER_PORT

该 API 显然成功地创建了一个 RESTful API，但我担心 index.php 和这些错误消息发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-26T23:15:11.953

实际上你没有提供任何默认值。它的工作，因为你已经定义了 /people 但是当你提供 / 然后 slim 没有得到任何运行的东西。So slim 显示了这个问题。可以通过以下方式解决。只需在 $app->run(); 之前添加以下行 . 希望你的问题能得到解决。

```
 $app->get('/', function() use ($app) {
     echo "Index";
     }); 
```

# algorithm - 计算具有互质系数的多变量线性丢番图方程的解数

> ID：15187915
> 
> 赞同：3
> 
> 时间：2013-03-03T16:40:08.277
> 
> 标签：algorithm, math, equation, diophantine

让一般丢番图方程为： a1*x1 + a2*x2 + .... + am*xm = n ，其中 gcd(a1...am) = 1, (a1....am) >= 0

我想找到非负（x1..xm）解决方案的数量。有人可以帮我解决这个问题吗？详细的数学解释或算法将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:48:25.620

您正在搜索的内容被称为“史密斯范式”。例如，在 wikipedia 上对此进行了解释：[http](http://en.wikipedia.org/wiki/Smith_normal_form) ://en.wikipedia.org/wiki/Smith_normal_form wikipedia 条目还解释了此类问题的标准算法。

在您的特殊情况下，这基本上是欧几里得 gcd 算法。

# image - 即使我正在预加载所有图像（FancyApps2），图像在 Fancybox 中的加载速度也很慢

> ID：15187916
> 
> 赞同：0
> 
> 时间：2013-03-03T16:40:23.237
> 
> 标签：image, fancybox-2, preload

我有一个幻灯片放映，其中包含 20 - 40 张图像，但即使我已将它们全部设置为预加载*（我最近将其增加到预加载：'40'），*在每个图像加载之前都有明显的延迟。我能做些什么来改善这一点？

幻灯片的设置是：

```
$(function () {
$('.fancybox').fancybox({ 
  autoResize: true,
  autoCenter: true,
  scrolling: 'no',
  preload: '40',
     helpers: {         
            overlay: {
                closeClick: false
                },
            },                            
        }); 
```

我将它与此功能结合使用：

```
function manipulateDOM1() {
    changeObjectsTrendy();
    NextImageTrendy();
}
function changeObjectsTrendy() {
    document.getElementById("questionTrendy").innerHTML = textTrendy[textTrendyNumber];
}
function NextImageTrendy() {
    if (imgTrendyNumber < NumberOfTrendyImages)
    {
    imgTrendyNumber++;
    document.images["trendy"].src = trendy[imgTrendyNumber];
    document.images["trendyControl"].src = trendyControl[imgTrendyNumber];
    textTrendyNumber++;
    document.getElementById["questionTrendy"].innerHTML = textTrendy[textTrendyNumber];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:45:22.640

问题解决了：-D

我刚刚看到最近对fancybox幻灯片的js进行了更新，谢天谢地，这产生了巨大的变化（现在只有一点点延迟）:-)

# python - 如何使用服务器上运行的 python 脚本将数据导出到 html 或 txt 文件？

> ID：15187922
> 
> 赞同：0
> 
> 时间：2013-03-03T16:40:57.177
> 
> 标签：python, google-app-engine

我的python脚本的主要目的是解析网站，然后将结果保存为服务器上的html ot txt文件。而且我希望这个脚本每 15 分钟重复一次这个操作，而不需要我的动作。
Google App Engine 不允许在服务器上保存文件，我应该使用数据库。在数据库中保存 txt 或 HTML 是真的吗？以及如何使脚本不间断地运行？感谢您提前帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:50:40.827

您说得对，将文件直接保存到服务器是不可能的。正如您所说，您唯一的选择是数据存储。最适合您的数据类型可能是“文本字符串（长）”，但是您限制为 1mb。有关更多信息，请参阅[https://developers.google.com/appengine/docs/python/datastore/entities](https://developers.google.com/appengine/docs/python/datastore/entities)。

关于日程安排，您正在寻找 Cron 工作。您可以设置 Cron 作业以在任何可配置的时间段运行。有关描述 Cron 作业如何工作的详细信息，请参阅[https://developers.google.com/appengine/docs/python/config/cron](https://developers.google.com/appengine/docs/python/config/cron)。

# ruby-on-rails - 如何在 Ruby on Rails 中只允许帖子的作者编辑或删除它？

> ID：15187926
> 
> 赞同：2
> 
> 时间：2013-03-03T16:41:03.973
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个用户模型和一个问题模型。

在用户模型中：

```
has_many :questions 
```

问题模型：

```
belongs_to 
```

在我的问题/show.html.erb

```
<% if @question.user == current_user %>
  <%= link_to 'Edit', edit_question_path(@question) %> | <%= link_to 'Destroy', @question, method: :delete, data: { confirm: 'Are you sure you want to delete this job?' } %>
  <%= link_to 'Back', questions_path %>
<% else %>
  <%= link_to 'Back', questions_path %>
<% end %> 
```

只有创建问题的用户才能编辑和删除它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:09:34.470

看看[CanCan ，](https://github.com/ryanb/cancan) [Railscasts](https://github.com/ryanb/cancan)的 Ryan Bates 的授权宝石。它非常适合 Rails 授权需求。

首先，您将创建一个`Ability`定义应用程序中所有功能的类。

```
class Ability
  include CanCan::Ability

  def initialize(user)
    can :manage, Question, user_id: user.id
  end
end 
```

然后，您将能够轻松地将授权集成到您的控制器中。

```
class QuestionsController < ApplicationController
  def update
    authorize! :manage, @question
    ...
  end
  def destroy
    authorize! :manage, @question
    ...
  end
end 
```

并自定义您的视图。

```
<% if can? :manage, @question %>
  <%= link_to 'Edit', edit_question_path(@question) %> | <%= link_to 'Destroy', @question, method: :delete, data: { confirm: 'Are you sure you want to delete this job?' } %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T17:28:44.090

您在控制器中需要的只是：

```
def destroy
  @question = current_user.questions.find(params[:id])
  @question.destroy

  render ... #anything you want to render
end 
```

前面的代码将确保用户只能删除他自己的问题。如果问题的 id 不属于用户，则不会删除任何问题，它会抛出 and `ActiveRecord::RecordNotFound - Internal Server error`。您可以添加一个`begin - rsecue block`来捕获此异常并根据需要处理它。

```
def destroy
  begin
   @question = current_user.questions.find(params[:id])
   @question.destroy
   render or redirect_to ....
  rescue Exception ActiveRecord::RecordNotFound
   flash[:notice] = 'not allow to delete this question'
   redirect_to ....
  end
end 
```

其他简单的方法是在控制器中添加一个前置过滤器

```
before_filter :require_authorization, only: [:delete]
...
def destroy
   @question = current_user.questions.find(params[:id])
   @question.destroy
   render or redirect_to ....
   #With the before filter this code is only going to be executed if the question belongs to the user
end
...
private
def require_authorization
  redirect_to :root unless current_user.questions.find_by_question_id(params[:id])
  #Use the find_by to avoid the ActiveRecord::RecordNotFound and get a nil instead in case the question id doesn't belong to a question of the user
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T16:47:49.163

您可以尝试将您的更改`if`为以下内容：

```
<% if current_user.questions.include?(@question) %> 
```

你也可以看看[：inverse_of](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_many#972-Undocumented-inverse-of-option)

然后在控制器中的编辑和删除操作中，您可以在显示编辑表单或删除问题之前再次检查正确的用户。

# symfony - Symfony2 中多个 Swiftmailer 实例

> ID：15187927
> 
> 赞同：6
> 
> 时间：2013-03-03T16:41:26.240
> 
> 标签：symfony, swiftmailer

**Symfony2**使用[**Swiftmailer**](http://swiftmailer.org/)包来发送电子邮件。

要在 Symfony2 中使用和配置 Swiftmailer，必须使用文档中[解释](http://symfony.com/doc/2.0/cookbook/email/email.html#configuration)的配置，例如使用 YAML：

```
swiftmailer:
    transport:  smtp
    encryption: ssl
    auth_mode:  login
    host:       smtp.gmail.com
    username:   your_username
    password:   your_password 
```

Swiftmailer 在 Symfony2 中定义为服务，它的实例可以在控制器中获取，如下所示：

```
$mailerinstance = $this->get('mailer'); 
```

现在，让我们假设 Swiftmailer 需要两种不同的配置，例如，一种使用电子邮件假脱机（例如，用于预定的时事通讯），另一种用于立即发送所有新电子邮件（例如，用于密码丢失服务）。因此，我想应该定义两个单独的 Swiftmailer 实例。**我如何在 Symfony2 中做到这一点？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T17:23:35.217

没有默认的 symfony 方式来拥有 2 个不同的实例。但是您可以创建一个扩展 swiftmailer 的新类，使其成为服务，然后将您的不同配置传递给父构造函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-29T22:56:39.613

```
swiftmailer:
    default_mailer: second_mailer
    mailers:
        first_mailer:
        # ...
        second_mailer:
        # ...

// ...

// returns the first mailer
$container->get('swiftmailer.mailer.first_mailer');

// also returns the second mailer since it is the default mailer
$container->get('swiftmailer.mailer');

// returns the second mailer
$container->get('swiftmailer.mailer.second_mailer'); 
```

[http://symfony.com/doc/current/reference/configuration/swiftmailer.html#using-multiple-mailers](http://symfony.com/doc/current/reference/configuration/swiftmailer.html#using-multiple-mailers)

# concurrency - 互斥（彼得森算法）

> ID：15187934
> 
> 赞同：1
> 
> 时间：2013-03-03T16:42:01.840
> 
> 标签：concurrency, process, operating-system, concurrent-programming, mutual-exclusion

我在看 Peterson 的算法（2 个进程的互斥） 我的问题是，如果还没有进程进入临界区，而 P0 想第一次进入临界区，那么 P1 的标志会是假的，那么 P0 怎么办？进入它的关键部分？P0 进入其临界区的条件取决于我们的标志 P1 是否为真。

代码：

```
 //flag[] is boolean array; and turn is an integer
flag[0]   = false;
flag[1]   = false;
turn;

P0: flag[0] = true;
    turn = 1;
    while (flag[1] == true && turn == 1)
    {
        // busy wait
    }
    // critical section
    ...
    // end of critical section
    flag[0] = false;

P1: flag[1] = true;
    turn = 0;
    while (flag[0] == true && turn == 0)
    {
        // busy wait
    }
    // critical section
    ...
    // end of critical section
    flag[1] = false; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:48:01.260

> P0 进入其临界区的条件取决于我们的标志 P1 是否为真。

不，它没有。该声明...

```
while (flag[1] == true && turn == 1) { ... } 
```

正忙于等待 P1 的标志*停止*为真。即：P0 等待 P1 离开其临界区。由于 P1 尚未进入其临界区，因此 P0 不会忙等待并正确进入临界区。

# java - 如何将 JDK 7 api 文档生成为 HTML 表格而不是 CSS 以在 emacs-w3m 中显示

> ID：15187939
> 
> 赞同：1
> 
> 时间：2013-03-03T16:42:17.287
> 
> 标签：java, emacs, javadoc, w3m

JDK 6 api javadocs 使用 HTML 表格进行布局。

这些表格很好地显示在 中`emacs-w3m`，这意味着我可以在不离开 emacs 的情况下浏览 api 文档。

![w3m 中的 JDK 6 API 文档](../Images/4744af565562e53c3f2db42f71a704df.png)

JDK 7 api javadocs 使用 CSS 进行布局。

`<ul>`由于 w3m 不理解 CSS，这使得这个顶部菜单栏垂直显示。这意味着第一页左右的文本被浪费了。

![w3m 中的 JDK 7 API 文档](../Images/17abf333f1f9f5c4d420741ceb611480.png)

我想以 JDK 6 的风格呈现 JDK 7 api 文档，所以我希望使用 JDK 6 doclet 使用 HTML 表（重新）生成 JDK 7 文档。由于这是一次性操作，我不担心效率低下等。

但是如何指定要使用的 JDK 6 doclet？

# ms-access - 在访问中将数据从表单保存到表

> ID：15187943
> 
> 赞同：3
> 
> 时间：2013-03-03T16:42:45.583
> 
> 标签：ms-access, vba

我有一个表单，我想填写它，然后将一些字段保存到一个名为 Order 的现有表中。我正在尝试使用这行代码来做到这一点：

> CurrentDb.Execute "INSERT INTO Order (OrderNumber)" & " VALUES (' " & Me.order & " ')"

我也试过这样

> CurrentDb.Execute "INSERT INTO Order (OrderNumber)" & " VALUES ( " & Me.order & " )"

但这似乎没有什么不同。我不断收到以下错误：

> 运行时错误“3134”：INSERT INTO 语句中的语法错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:47:53.740

`Order`是保留字。如果您必须将其保留为表名，请将其括起来以避免混淆数据库引擎。

```
Dim strInsert As String
strInsert = "INSERT INTO [Order] (OrderNumber) VALUES ('" & Me.order & "')"
Debug.Print strInsert
CurrentDb.Execute strInsert, dbFailOnError 
```

如果`OrderNumber`是数字数据类型而不是文本，则丢弃语句中的那些单引号`INSERT`。

将您的语句存储在字符串变量中。然后用于`Debug.Print`检查您要求引擎执行的已完成语句。您可以`Debug.Print`在“立即”窗口中查看输出。使用`Ctrl`+`g` 复制该语句并将其粘贴到新 Access 查询的 SQL 视图中以进行故障排除。

# ruby-on-rails - 查询一个选项可以有多个值的位置

> ID：15187945
> 
> 赞同：0
> 
> 时间：2013-03-03T16:42:47.183
> 
> 标签：ruby-on-rails, database, activerecord

我需要从 db 中选择所有记录，其中一个选项（例如`user_id`）可以与可能的值（`1,2 or 3`）相同。然后按日期排序（例如）。

结果我需要这样的东西：

```
records:
  id: 1, user_id: 1
  id: 2, user_id: 1
  id: 3, user_id: 2
  id: 4, user_id: 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:47:28.397

```
Model.where(user_id: [1, 2, 3]).order("created_at DESC") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T16:47:22.323

SELECT * FROM USERS WHERE USERID IN (1, 2, 4);

# c++ - 对更多 boost::intrusive 容器中的一个元素感到困惑

> ID：15187950
> 
> 赞同：1
> 
> 时间：2013-03-03T16:42:59.040
> 
> 标签：c++, boost, boost-intrusive

我不太明白相同的元素如何可能出现在不同的侵入性容器中，同时保留`boost::intrusive`文档所述的性能和内存使用保证。

文档说：

> 侵入式容器不存储传递对象的副本，而是存储对象本身。将对象插入容器所需的附加数据必须由对象本身提供。例如，要插入`MyClass`实现链表的侵入式容器，`MyClass`必须包含所需的 next 和 previous 指针：

```
class MyClass
{
   MyClass *next;
   MyClass *previous;
   // ...
}; 
```

在强调 STL 和 boost::intrusive 容器之间的区别时，文档还说：

> **非侵入式**容器有一些限制：
> 
> 一个对象只能属于一个容器：如果要在两个容器之间共享一个对象，则要么必须存储这些对象的多个副本，要么需要使用指针容器： `std::list<Object*>`.

有道理，一个元素不能在两个`std::list`s 中。好的。但是如何将一个类型的实例`MyClass`插入两个不同`boost::intrusive::list`的 '，例如，考虑到这样的元素只能有一个指向下一个元素的指针和一个指向前一个元素的指针。如果我没记错的话，这仅在您假设修改一个容器也可能修改另一个容器时才有效，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:10:07.767

Boost.Intrusive 库并没有*直接*要求您定义`prev`和`next`指针——在文档的那部分中，`prev`和`next`指针的存在只是对侵入式容器如何工作的概念说明。

定义侵入式容器的实际方法是通过继承包含一个钩子或作为包含`prev`and`next`指针的成员。通过包含几个钩子（用不同的静态类型标记），您可以在几个不同的侵入式容器中包含相同的对象（每个都用不同的静态类型标记）。

请参阅[http://www.boost.org/doc/libs/1_38_0/doc/html/intrusive/usage.html](http://www.boost.org/doc/libs/1_38_0/doc/html/intrusive/usage.html)以了解这些钩子是如何工作的。有关如何使用多个侵入性 contianers 执行此操作的示例，请参阅[此 StackOverflow 答案。](https://stackoverflow.com/questions/6174083/boost-intrusive-multiple-containers)

这有一些限制——你不能将你的对象包含在运行时定义的任意多个侵入容器中——你必须知道在最初编写它们时要使用哪些容器，并建立每个容器的知识进入你的对象。

# iphone - iOS - 从选项卡中检索到的徽章值不正确

> ID：15187963
> 
> 赞同：0
> 
> 时间：2013-03-03T16:44:14.640
> 
> 标签：iphone, ios, uitabbarcontroller, badge

我正在尝试检索为指定选项卡显示的值。它以前工作过，但由于某种原因停止了？下面`int current_badge =`的代码行是获取徽章值的地方，无论徽章值实际是什么，它都会返回零。我在一个脱离 uitabcontroller 的 viewcontroller 中。有人对我做错了什么有任何想法吗？

**更新：** 这似乎是因为我在标签控制器之外的视图控制器中。将相同的代码移动到选项卡视图控制器中，它工作正常。有没有更好的方法来确定 tabcontroller 中的徽章值？

```
-(void)badgeUpdate:(int)tab:(int)dayspan
{
    // getting the current badge amount
    int current_badge = [[[super.tabBarController.viewControllers objectAtIndex:tab] tabBarItem].badgeValue intValue];

    // testing for badge level
    if (current_badge > 0)
    {
        // testing for updates on tab for dayspan or longer
        int updates_waiting = [self updatesWaitingCheck:tab:dayspan];
        if (updates_waiting > 0)
        {
            // setting new badge level on tab
            [[[[[self tabBarController] viewControllers] objectAtIndex:tab] tabBarItem] setBadgeValue:[NSString stringWithFormat:@"%d", updates_waiting]];
        }
        else
        {
            // turning off badge display
            [[[[[self tabBarController] viewControllers] objectAtIndex:tab] tabBarItem] setBadgeValue:nil];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:07:01.343

当您切换离开时，该选项卡的控制器可能会被释放。我建议将确定当前计数的逻辑移出视图层，并将其移至在所有选项卡中持续存在的更高级别的控制器中。否则，您将遇到您所看到的问题。

大多数时候，如果您在视图对象中寻找数据值，而不是在某个地方的控制器或模型中，那么您是在针对框架工作，您会遇到这样的问题。

# java - 两次调用函数时Java给出越界异常？

> ID：15187964
> 
> 赞同：1
> 
> 时间：2013-03-03T16:44:20.827
> 
> 标签：java, exception, arraylist

我试图找出在某个点是否存在一个变量`ArrayList`，但是，当调用执行此操作的函数时，两次，我得到一个`java.lang.IndexOutOfBoundsException`. 但是当该函数只被调用一次时，它不会出错，即使在两次调用该函数时，它们会检查是否存在不同的索引，而不是相同的索引。

代码;

```
//package mj.mjo.Vars;
public boolean varExists(int index){
    return mjo_vars.get(index) != null;
} 
```

注意，这里的 mjo 是一个变量，而 vars 是另一个变量，即 mj.mjo.Vars 类

```
//package mj.play.StudioCanvas;
int nonsys = mjo.vars.setVar("TEST", "LOLOLOL", false); // returns 1
int yessys = mjo.vars.setVar("SYSVARTEST", "WOOHO!", true); // returns 2

System.out.println("DOES THE VAR \"TEST\" EXIST? " + mjo.vars.varExists(nonsys));
System.out.println("DOES THE VAR \"TEST\" EXIST? " + mjo.vars.varExists(yessys)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:48:25.980

该错误表明`index`您传递给`get()`的值大于或等于列表中的元素数。如下更改代码以避免异常：

```
public boolean varExists(int index){
    return index >= 0
        && index < mjo_vars.size()
        && mjo_vars.get(index) != null;
} 
```

通常，该错误意味着您的索引方案有问题：Java 中的列表和数组索引从零开始，并以`size()-1`（包括）结束。如果传递`2`触发异常，但传递`1`正常，则列表只有两个元素 - 在索引处`0`和`1`.

# mysql - 如何将 mysql Workbench 视图转换为看起来像 SQL 服务器管理器？

> ID：15187967
> 
> 赞同：0
> 
> 时间：2013-03-03T16:44:38.210
> 
> 标签：mysql, mysql-workbench

我喜欢 MySql Workbench，但我正在寻找一种使它的视图有点类似于 SQL Server 管理的方法。1）我不想让一个窗口用于错误输出，一个窗口用于结果，我想将两者放在同一页面上。因此，如果有错误，我会看到错误，但如果没有错误，我会在同一窗口中看到结果。2）有没有办法将左侧的树视图分开，以便视图和它们自己的节点上，而不是将它们全部与表格混合？

我会很感激你的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:37:51.150

目前，这两个愿望都不可能实现。[但是，您可以在http://bugs.mysql.com](http://bugs.mysql.com)上打开对它们的功能请求，以便我们考虑它们。

# python - 如何读取时区日期时间对象

> ID：15187978
> 
> 赞同：0
> 
> 时间：2013-03-03T16:46:14.713
> 
> 标签：python, django, datetime, timezone

我有一个时区感知 datetime 对象，如果打印包含：`2013-03-04 18:00:00+01:00`. 但我总是不明白如何阅读它们。这是指当地时间 19:00 还是当地时间 18:00？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:42:48.363

这意味着当地时间 18:00，在距 UTC +1 小时的地方（例如西欧）。

# drupal - preprocess_views_view 没有被调用

> ID：15187979
> 
> 赞同：1
> 
> 时间：2013-03-03T16:46:15.650
> 
> 标签：drupal, drupal-7, drupal-views, drupal-theming

Drupal 7, Views, Bootstrap 主题子主题在使用中

我的子主题中有一个 views-view-table.tpl.php 文件，我正在尝试预处理一些发送到此 tpl 的变量。我在我的 template.php 中创建了一个函数 bootstrap_preprocess_views_view(&$vars) ，当我访问我的一个视图页面时它没有被调用。为什么会这样？其他预处理函数是从同一个模板文件中调用的。我试过刷新缓存。

```
function bootstrap_preprocess_views_view(&$vars) {
  dsm($vars);
  dsm("aaaa");
  die;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:20:46.037

亚当，

我假设您在期望看到更改之前已经尝试了所有常规操作，例如清除缓存等。

如果是，也许这个旧的 Drupal 问题可能会影响您的功能：[http](http://drupal.org/node/258089) ://drupal.org/node/258089 （因为您的语法看起来不错）。

您的子主题中实际上有相应的模板文件吗？如果您在其中放置一个（即使只是从视图模块中复制和粘贴默认的），它是否解决了您的问题？

让我们知道！

# python - Python矩阵形成

> ID：15187980
> 
> 赞同：0
> 
> 时间：2013-03-03T16:46:17.663
> 
> 标签：python, arrays, matrix

我想写一个看起来像这样的python矩阵：

```
[P1^3,p2^3,p3^3,p4^3 ...]
[p1^2,p2^2,p3^2,p4^2 ...]
[p1^1,p2^1,p3^1,p4^1 ...]
[p1^0,p2^0,p3^0,p4^0 ...] 
```

列数和索引`p`由输入`i`决定`pi`

我尝试了很多方法，但它不起作用。

有人请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T17:07:04.707

如果您真的是故意`**`的，您可以使用库 ( [http://www.numpy.org/](http://www.numpy.org/)`^` )中的单个函数`numpy.vander`（对于 Vandermonde）来执行此操作：`numpy`

```
In [13]: p = numpy.array([2, 3, 5, 10])

In [14]: numpy.vander(p, 4).T
Out[14]: 
array([[   8,   27,  125, 1000],
       [   4,    9,   25,  100],
       [   2,    3,    5,   10],
       [   1,    1,    1,    1]]) 
```

`.T`after 函数调用转置数组，因为创建的数组是`numpy.vander`您想要的转置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:06:56.383

`[[y^x for y in [p1, p2, p3, p4]] for x in [3, 2, 1, 0]]`可能是你想要的。

这扩展到

```
[[y^3 for y in [p1, p2, p3, p4]], 
[y^2 for y in [p1, p2, p3, p4]],
[y^1 for y in [p1, p2, p3, p4]],
[y^0 for y in [p1, p2, p3, p4]]] 
```

请注意，这`^`是 python 中的异或。

我不确定你想在这里做什么......

另外，你的意思是 numpy 矩阵/数组还是嵌套列表？

# css - CSS：为什么删除边框会极大地影响 div 容器的位置？

> ID：15187983
> 
> 赞同：0
> 
> 时间：2013-03-03T16:46:32.857
> 
> 标签：css, position, border

我有以下简单的 html 页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>test</title>
<style type="text/css">
#page {
    position: relative;
    width: 1000px;
    min-height: 300px;
    margin: 0 auto;
    border: 1px solid red;
    background-color: green;
}
#allcontent {
    position: static;
    top: 225px;
    margin: 225px auto 0px auto;
    width: 850px;
    background-color: blue;
}
#content {
    border: 1px solid white;
}
</style>
</head>
<body>
<div id="page">
    <div id="allcontent">
        <div id="content">
            <p>This is content</p>
        </div>
    </div>
</div>
</body>
</html> 
```

它看起来和我想要的完全一样，但是如果我从#page 中删除边框，它会完全搞砸布局。我不知道为什么。我知道，我可以使用透明边框作为解决方法，但这似乎很奇怪......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:55:21.023

因为您`margin:225px auto 0px auto`的`<div id="allcontent">`内容将整个内容向下推。

而不是使用`margin`，使用`position:absolute/relative`将您的元素定位在您的`<div id="page">`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:58:38.370

的边际`#allcontent`正在将其推低。 [http://jsfiddle.net/2QjYG/](http://jsfiddle.net/2QjYG/)

# php - .htaccess 不适用于子目录中的 php/mvc

> ID：15187990
> 
> 赞同：0
> 
> 时间：2013-03-03T16:47:05.857
> 
> 标签：php, .htaccess, mod-rewrite

**预期目标：** 在现有网站上，我需要实施一个新网站。新站点需要“分阶段”实施，因此为“dev”和“test”和“site”创建了一个子目录。除了使用不同的用户帐户和数据库这一事实之外，所有三个子目录都包含相同的 php/mvc 实现。驻留在根目录中的当前站点也应保持正常工作。

**当前配置尝试：** 我在当前网站的根目录下放了一个 .htaccess 文件。

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^/dev(.*)$ <url>/dev/$1
RewriteRule ^/test(.*)$ <url>/test/$1
RewriteRule ^/site(.*)$ <url>/site/$1 
```

注意：而不是有一个完整的网址。这应该将所有带有 'dev' 的 url 重定向到 /dev/$1 并且 $1 包含所有其余参数。

**结果：** 当调用'test'或'site'的'dev'主页时。主页显示得很好。

**问题：** 每次我单击菜单项或链接时，生成的 url 都会被重写为正确的 url，即：/dev/volunteering?page=volunteering&lang=nl

但我收到错误消息 404：

```
The requested URL /dev/volunteering was not found on this server. 
```

请记住，它是关于自定义 mvc 实现的。

**需要的帮助：** 需要进行哪些更改才能使浏览器了解此类请求不应由当前网站处理，但根据“开发”或“测试”或“站点”，请求应转发到适当的以 mvc 实现理解的方式创建子目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:18:39.507

请试试这个：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(dev)(volunteering([^?]*)) $1/$2?page=$2&lang=nl [L,NC]
RewriteRule ^(test)(volunteering([^?]*)) $1/$2?page=$2&lang=nl [L,NC]
RewriteRule ^(site)(volunteering([^?]*)) $1/$2?page=$2&lang=nl [L,NC] 
```

# java - 调用外部javascript函数frm JSP

> ID：15187991
> 
> 赞同：1
> 
> 时间：2013-03-03T16:47:21.563
> 
> 标签：java, javascript, jsp

我是 javascript 的新手。我正在尝试从我的 jsp 中调用 javaScript 函数。它不起作用。我试图通过 bugzila 调试它。它说“此页面上没有 Javascript”

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" %>

   <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4     /loose.dtd">
    <html>
      <script type="text/javascript" src="ajaxs.js"></script>
      <head>
         <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

      </head>
      <body>
    <%
        out.println("Bismillahir Rahmanir Rahim");
    %>

    <jsp:useBean id="numBean" class="beans.NumberBean">
        <jsp:setProperty name="numBean" property="*" />
    </jsp:useBean>

    <form action="index.jsp" method="post">
        <table>
            <tr>
                <td>Enter Integers:</td>
                <td><input type="text" id="inputString" name="inputString" 
                value="<jsp:getProperty name="numBean"    property="inputString" />" 
                /> </td>
                <td>(Use semi-colon to separate number)</td>
            </tr>
            <tr>
                <td>M - number of largest element to find.:</td>
                <td>
                    <input type="text" id="nthHighest" name="nthHighest" 
                            value="<jsp:getProperty name="numBean" property="nthHighest" />" /> 
                </td>
            </tr>
        </table>
      <input type="submit" value="Identify" onclick="ajaxFunction()" />
      <div id="result"></div>

    </form>
         </body>
      </html> 
```

我试图在 onclick 事件上调用“ajaxFunction()”。我在顶部包含了如下的js文件： `<script type="text/javascript" src="ajaxs.js"></script>` 你能帮我确定我在这里做错了什么......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:07:37.693

尝试在 head 标签中包含带有“src="ajaxs.js" 的脚本标签（您当前的脚本，包括 "src="ajaxs.js"）。head 标签中的内容在加载页面加载。

谢谢....

# r - ggplot2 - 如何使用主 y 轴和次要 y 轴在同一图上绘制具有不同比例的两个变量？

> ID：15187992
> 
> 赞同：1
> 
> 时间：2013-03-03T16:47:22.110
> 
> 标签：r, ggplot2, boxplot

数据链接：

[数据](https://www.dropbox.com/s/kdi5uklhylr8vei/GTAP_DistEVYield.csv?m)

代码：

```
 distevyield <- read.csv(file = "F:/Purdue University/RA_Position/PhD_ResearchandDissert/PhD_Draft/GTAP-CGE/GTAP_NewAggDatabase/NewFiles/GTAP_DistEVYield.csv", header=TRUE, sep=",", na.string="NA", dec=".", strip.white=TRUE)

    str(distevyield)
    distevyield <- as.data.frame(distevyield)
    distevyield[5:6] <- sapply(distevyield[5:6],as.numeric)
    distevyield <- droplevels(distevyield)
    distevyield <- transform(distevyield,region=factor(region,levels=unique(region)))
    library(ggplot2)

    distevyield.f <- melt(subset(distevyield, region !="World"))

    Figure3 <- ggplot(data = distevyield.f, aes(factor(variable), value)) 
    Figure3 + geom_boxplot() +
    theme(axis.text.x = element_text(colour = 'black', angle = 90, size = 15, hjust = 1, vjust = 0.5),axis.title.x = element_blank()) + 
    theme(axis.text.y = element_text(colour = 'black', size = 15, hjust = 0.5, vjust = 0.5), axis.title.y = element_blank()) + 
    theme(strip.text.x = element_text(size = 14, hjust = 0.5, vjust = 0.5, face = 'bold')) +
    facet_wrap(~region, scales="free_y") 
```

结果： ![绘图结果](../Images/2494acf61bcec6640cc2ed3ae72201d0.png)

问题：

我绘制的两个变量，产量（百分比变化）和 ev（百万美元）有不同的单位。有没有办法为一个变量添加一个辅助 y 轴，以便用一个代表其原始单位的箱线图显示每个变量，但在同一个图中？ggplot2 中是否存在此功能？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:19:34.780

使用 ggplot2 你不能制作两个 y 轴（[见解释/讨论](https://stackoverflow.com/questions/3099219/how-to-use-ggplot2-make-plot-with-2-y-axes-one-y-axis-on-the-left-and-another)）。

要表示不同的轴值`ev`，`yield`您必须将它们绘制在单独的图中。实现这一目标的一种方法是使用和`facet_wrap()`组合值。有了你，你将把两个图放在一起，你将能够控制要显示的列数。`region``variable``facet_wrap()`

```
ggplot(data = distevyield.f, aes(factor(1), value)) +
  geom_boxplot() +  facet_wrap(region~variable,scales="free",ncol=8)+
  theme(axis.text.x=element_blank(),
        axis.title.x=element_blank(), 
        axis.title.y = element_blank()) 
```

![在此处输入图像描述](../Images/2ecd00a2df482f165feb004ce9f62155.png)

# ruby - 与 `===` 和 `.===` 的工作混淆

> ID：15187998
> 
> 赞同：3
> 
> 时间：2013-03-03T16:47:37.003
> 
> 标签：ruby

`case`相等运算符的`===`工作方式如下：

```
2 === 2  #=> true
2 .=== 2 #=> true 
```

要检查优先级和关联性如何工作，我尝试如下：

```
2 === 2 === 3
# SyntaxError: (irb):3: syntax error, unexpected tEQQ
# 2 === 2 === 3
#           ^
#        from C:/Ruby193/bin/irb:12:in `<main>' 
```

为什么它返回错误？以下不会引发错误。它如何解决上面的错误？

```
2 .=== 2 === 3  #=> false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T17:00:11.100

Ruby 不知道首先计算哪个表达式，所以它会抛出一个错误。当您使用 显式调用该`Integer#===`方法时`.===`，Ruby 会将其视为任何其他方法调用，这意味着它假定右侧的所有内容都是该方法的参数。由于这些可选括号，您实际上是在最后一个示例中编写：

```
2.===( 2 === 3 ) 
```

反过来，这个表达式也没有歧义，因此可以在没有错误的情况下进行评估。

请记住，这不会返回您所期望的；例如：

```
2.===( 2 === 2 )
#=> false 
```

因为 inner 的返回值`2 === 2`是`true`. 然后将其进行比较`2`，并且显然`2.===(true)`返回`false`。