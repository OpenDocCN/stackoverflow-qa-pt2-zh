# StackOverflow 问答 12545000-12545999

# iphone - 如何通过 OAuth 在 Imgur 上发布图像

> ID：12545003
> 
> 赞同：3
> 
> 时间：2012-09-22T15:15:00.793
> 
> 标签：iphone, ios, oauth, imgur

我正在开发一个 iPhone 应用程序，我必须在其中将图像发布到用户的 Imgur 帐户。谁能告诉我如何通过`OAuth`身份验证在 Imgur 帐户中发布图像。我是IOS新手，对OAuth知之甚少。到目前为止，我什至找不到适合 iPhone ios 的 OAuth 库。

# vb.net - 使用 VB.Net 更改 Word 2007 文档字段的值

> ID：12545012
> 
> 赞同：0
> 
> 时间：2012-09-22T15:16:16.410
> 
> 标签：vb.net, ms-word, field, mailmerge

我有一个 word 文档，其中有许多分散在文本周围的字段。这些字段是使用插入 > 快速部件 > 字段创建的。每个字段都有一个唯一的名称。

我设法打开了文档，但我不知道如何引用特定字段以便输入我的值。

我设法使用以下方法遍历文档中的字段：

```
Dim flds As Word.Fields
Dim fld As Word.Field

flds = wrdDoc.Fields
For Each fld In flds
...
next 
```

但是“fld”变量似乎没有“名称”属性，因此我不知道如何引用特定字段。

我希望有类似的东西：

```
flds("MyField1") = "blablabla" 
```

但我只能将索引（整数）放在括号中。

关于如何实现目标的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:28:59.967

它们是怎样的领域？我不知道这是否适合您的情况，但如果字段在显示时看起来像这样（使用 ALT-F9）：

{DOCVARIABLE 字段名}

然后使用这个：

```
wordDocument.Variables("fieldname").Value = "abc"
wordDocument.Fields.Update 
```

这仅适用于 DOCVARIABLE-Fields。（请注意，在这种情况下，传递给 .Value 的字符串可能不为空。）

# fpga - 带 FPGA 的国际象棋引擎

> ID：12545015
> 
> 赞同：2
> 
> 时间：2012-09-22T15:16:43.767
> 
> 标签：fpga, chess

我正在集思广益，想用 FPGA 创建一个国际象棋引擎。你的注意事项是什么？

首先，您可以轻松地将引擎分为两部分，移动生成器和电路板评估器，在 FPGA 中执行这两个或一个在 cpu 中和一个在 fpga 中会有什么好处。

我假设对 FPGA 进行编程需要更多的努力，因为优化并不那么明显，只要你花时间，你总能找到更好更快的方法。（这可能发生在我身上，因为我是 FPGA 编程的新手）

另一件事是成本，一个 FPGA 成本要多少才能胜过 1000 美元的 CPU？我知道这几乎不可能回答，但我想知道 500 美元是否是一个好的估计？

您认为这种 FPGA 方法会产生更好的结果，还是应该将我的工作放入标准 cpu 国际象棋引擎中。我不确定标准引擎中的进化和新方法有多少空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:53:02.253

我建议你看看[hydra 项目](http://en.wikipedia.org/wiki/Hydra_%28chess%29)，因为他们已经完成了一个使用处理器和 FPGA 作为协处理器的国际象棋集群。但是，我对您的想法的第一印象与 Bo 的相同：我的猜测是国际象棋计算机将大量基于 DB 查找和巨树查找，这两者都需要极高的内存带宽。因此，如果您不打算使用[nallatech 加速器](http://www.nallatech.com/intel-xeon-fsb-fpga-socket-fillers.html)（它们真的很贵 ~ 20k$），或者您有一种全新的方法，请不要这样做 ;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T15:05:19.667

FPGA 最大的“不要”：

*除非你能证明它是必要的，否则*不要使用它，原因如下：**

 **   成本
*   尺寸
*   力量
*   表现

特别是不要落入假设使用 FPGA 必然会产生最高性能系统的陷阱。

首先制定您的问题解决方案（至少在纸上）。根据上述参数确定您的目标。只有这样才能找到符合目标的合适实施方案。*

# android - Android登录应用程序错误

> ID：12545017
> 
> 赞同：0
> 
> 时间：2012-09-22T15:17:02.533
> 
> 标签：android, android-intent, android-activity

我在 android 中创建了一个登录应用程序。用户在提供正确的电子邮件 ID 和密码后登录，但在登录后，当我按下手机中的后退按钮时，我再次被重定向到上一页，即我的登录页。我想限制这一点，当用户登录并且如果他/她按下后退按钮时，用户应该只留在该页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:25:24.773

在验证登录页面中的凭据后`finish()`立即调用`startActivity(intentobj)`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:23:03.480

`onBackPressed()`您可以覆盖一个功能。如果您根本不想要它，请将其留空。需要 API 级别 5（即 android 2.0 或更高版本）因此：

```
@Override
public void onBackPressed() {
} 
```

# c# - 仅限 iOS6 设备。调用 sqlite 并从 UINavigation 返回时，UITableView 会从屏幕上消失

> ID：12545022
> 
> 赞同：1
> 
> 时间：2012-09-22T15:17:53.687
> 
> 标签：c#, sqlite, uitableview, xamarin.ios, ios6

我的 iPhone 应用程序（使用 c# 和 monotouch 开发）在 iOS5 上运行良好。自从升级到iOS6后，我遇到了以下问题：（注意：只发生在设备上，而不是模拟器上）

我的第一页是 UITableView。如果您选择一行，它会将您带到另一个视图。此视图查询数据库 (SQLite) 以根据所选事件 ID 加载更多信息。

当我单击 UINavigation Back 按钮返回到我的第一页时，UITable 视图消失在屏幕外。

当我在屏幕上的任意位置滚动时，UITableView 会重新出现并按预期执行。

在逐行浏览代码后，我将其缩小到一行代码，即 cmd.ExecuteReader （cmd 为 SqliteConnection > CreateCommen() > ExecuteReader() ）

如果我删除对象结果中的那行代码和硬编码，UITableView 可以正常工作。

谁能告诉我这是为什么？

它仅在设备上的 iOS 6 上执行此操作。iOS6的模拟器可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:08:31.070

是否`cmd.ExecuteReader`返回有效结果？听起来它可能会返回一个空结果集，这意味着无法显示任何结果。

# javascript - 使用 d3.js 进行维恩图布局

> ID：12545027
> 
> 赞同：13
> 
> 时间：2012-09-22T15:18:51.737
> 
> 标签：javascript, position, d3.js, diagram, venn-diagram

是否有关于如何使用 d3.js 进行维恩图的示例？我知道这[两个](http://bl.ocks.org/1067636) [样本](http://bl.ocks.org/1067616)：

![在此处输入图像描述](../Images/81d01939cde903bc01e6f588f91f44f1.png)

![在此处输入图像描述](../Images/4e7f190bce29d3f61c8086bbd4aa9b20.png)

在 D3 网站上提供。然而，他们强迫我自己计算圆圈的 xy 位置。我希望只将数据（圆圈大小和重叠大小）提供给函数/图表，它应该为我做布局。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-10T20:39:14.490

[使用 D3.js 绘制维恩图](http://www.benfrederickson.com/2013/05/09/venn-diagrams-with-d3.js.html)

![在此处输入图像描述](../Images/8c46dcf860fb36c1e172af5e93adbbcb.png)

![在此处输入图像描述](../Images/ebb0231c3f8571a8365a328c55bbc3df.png)

它工作正常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-23T01:18:59.960

要了解所需的算法，请阅读 Leland Wilkinson 的论文，[Exact and Approximate Area-proportional Circular Venn and Euler Diagrams](http://www.cs.uic.edu/~wilkinson/Publications/venneuler.pdf)，发表于 2012 年 2 月的 IEEE TVCG。据我所知，还没有人`venneuler`在 D3 中实现布局，但是这将是一个很棒的[D3 插件](https://github.com/d3/d3-plugins)。

# java - 如何逃离'！' HQL 中的符号

> ID：12545028
> 
> 赞同：0
> 
> 时间：2012-09-22T15:18:54.467
> 
> 标签：java, hibernate, postgresql, hql, criteria

任何人都可以帮助摆脱 HQL 中的 NOT(!) 符号。我正在使用 Postgres 8.3。我也无法使用这些字符搜索 |\?'( )

```
fts('english',COLUMN_NAME,'" + searchText + "') = true) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:46:06.747

您应该[绑定](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-expressions)搜索文本，而不是手动将其连接到查询。它不仅解决了您的问题，而且在安全性（SQL 注入）和性能方面也更好（数据库看到具有不同参数的相同查询，这允许它尽可能缓存已编译的查询）。

更改您的查询，使其看起来像：

```
fts('english', COLUMN_NAME, :searchText) = true // using named parameters
// or
fts('english', COLUMN_NAME, ?) = true // using positional parameters 
```

然后，您可以正确绑定参数：

```
session.createQuery(hqlQuery)
        .setString("searchText", searchText)
        .iterate();
// or
session.createQuery(hqlQuery)
        .setString(0, searchText)
        .iterate(); 
```

这与使用 JDBC 并设置参数的原理相同`PreparedStatement`（主要区别在于参数的索引在 JDBC 中从 1 开始，在 HQL 中从 0 开始）。

# php - 如何在php中使用超链接显示数据

> ID：12545029
> 
> 赞同：-6
> 
> 时间：2012-09-22T15:18:57.013
> 
> 标签：php

我已经以超链接格式显示了一个名称列表。当我单击其中一个名称时，它不会显示与单击的名称相关的数据。谁能帮我..

```
<?php echo '<a href="nama.php?ID='.$rekod['nama'].'">'.$rekod['nama'].'</a>'; ?> 
```

student.php 页面的这段代码

```
<?php     
   if(isset($_GET[$rekod['nama']]))
                {
                        $id = $_GET[$rekod['nama']];
                    if( $id!= NULL)
                    {
                        $query="SELECT matrik, kp_pass, nama, kod_prog, status
                            FROM _pelajar
                            WHERE nama = '$id'";
                        $qr=mysql_query($query);
        ?> 
```

-student.php 页面的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:50:12.647

看起来你快到了；你只是在寻找错误的变量：

```
if (isset($_GET['ID'])) {
    $id = $_GET['ID'];                     
    if( $id!= NULL) {
    .... 
```

您将变量传递为 as `ID`，因此您需要在`$_GET`.

# asp.net - IIS 中出现意外错误 0x8ffe2740

> ID：12545032
> 
> 赞同：1
> 
> 时间：2012-09-22T15:19:27.023
> 
> 标签：asp.net, iis

我已经在我的系统（WINDOWS-XP）中安装了 IIS。当我看到 IIS 窗口时，默认网站处于停止模式。当我准备好启动 IIS 时。它显示“**发生意外错误0x8ffe2740** ”

最后，我发现它是由 Skype 引起的。它侦听端口 80 的来电。现在，大部分时间 IIS 在 Skype 启动之前启动。所以 IIS 可以工作，但是如果您重新启动 IIS 或在 Skype 启动后尝试启动 IIS，您将收到此错误消息。

为此，我更改了我的 Skype 设置

```
 Skype File-> Options -> Connection
 Uncheck Use Port 80 as an alternative for incoming connections. 
```

但即使我无法启动我的 IIS。

请帮我一个..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:34:08.157

我遇到了类似的问题，我使用防火墙解决了它，除了打开端口进行交谈或聊天之外，不允许 Skype 做任何其他事情。在此之后重新启动 IIS 或重新启动计算机。

此外，您可以检查其他程序，例如 teamViewer，它们也尝试使用端口 80。在 windows xp 上检查端口可能有点困难，xampp 有一个检查端口的程序，对于这类事情非常方便。

我希望这对您的问题有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T03:26:59.787

重新启动系统后，我的问题就解决了。

# objective-c - 将 BOOL 属性关联到整个 NSArray 的最简洁方法

> ID：12545033
> 
> 赞同：0
> 
> 时间：2012-09-22T15:19:28.753
> 
> 标签：objective-c, nsarray, kvc

我有几个 NSArray，它们保存相互关联的 UIView 对象的集合（NSArray 是 soundView0、soundView1、soundView2 和 soundView3）。我希望能够将 BOOL 属性与将启用/禁用数组中的 UIViews 的整个数组相关联。

完成此操作的最干净/最正确的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T06:27:50.320

子类化`NSArray`可能很困难，当您只需要一个额外的属性时，您可以通过类别和运行时函数获得另一个选项。在其上编写一个`NSArray`添加属性的类别，并使用关联的对象为属性提供存储。这段代码就足够了，只需按照应用程序的命名约定重命名即可。

```
@interface NSArray (MyExtensions)

@property (nonatomic) BOOL myProperty

@end

@implementation NSArray (MyExtensions)

static char MyPropertyKey;

- (void)setMyProperty:(BOOL)myProperty
{
    objc_setAssociatedObject(self, &MyPropertyKey, @(myProperty), OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (BOOL)myProperty
{
    NSNumber *propertyNumber = objc_getAssociatedObject(self, &MyPropertyKey);
    return [propertyNumber boolValue];
}

@end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T17:36:33.293

您可以编写自己的 NSArray 子类，然后可以将 BOOL 属性附加到该子类

# xcode - 通过在xcode中单击按钮启用和禁用标签栏项目？

> ID：12545034
> 
> 赞同：14
> 
> 时间：2012-09-22T15:19:44.093
> 
> 标签：xcode, uiviewcontroller, uitabbarcontroller, uitabbar, tabbar

我有 5 个标签栏项目。第一个将是登录页面。当用户未登录时，其他选项卡 bat 项目将被禁用，但当用户通过单击 navigationItem 按钮登录时，所有其他 4 个选项卡 bat 项目将被启用。

我已经进行了搜索，但一无所获...... :(

这是我的代码：

```
MainTabViewController.h
#import <UIKit/UIKit.h>

@interface MainTabViewController : UITabBarController
@property (retain, nonatomic) IBOutlet UITabBar *MainTabBar;

@end

MainTabViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UITabBarItem *tabBarItem = [[MainTabBar items] objectAtIndex:1];
    [tabBarItem setEnabled:FALSE];

}

LoginViewController.h

#import <UIKit/UIKit.h>

@interface LoginViewController : UIViewController
@property (retain, nonatomic) IBOutlet UITextField *CustomerUsername;
@property (retain, nonatomic) IBOutlet UITextField *CustomerPassword;
- (IBAction)ResignKeyboardClicked:(id)sender;

@end

LoginViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIBarButtonItem *btnGo = [[UIBarButtonItem alloc] initWithTitle:@"Login"     style:UIBarButtonItemStyleBordered target:self action:@selector(loginAction)];
    self.navigationItem.rightBarButtonItem = btnGo;

}

- (void) LoginAction {
     AppDelegate *passData = (AppDelegate *)[[UIApplication sharedApplication] delegate];

        if ([CustomerUsername.text isEqualToString:@""] || [CustomerPassword.text     isEqualToString:@""]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"alert" message:@"Please Fill     all the field" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];

        return;
    }
    // i will use a code from connect to DB tutorial
    NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/Staff.php?userName=%@&password=%@",CustomerUsername.text, CustomerPassword.text];

    // to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    // to receive the returend value
    NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    if ([strResult isEqualToString:@"1"])
    {
        //MainTabViewController *main = [[MainTabViewController alloc] initWithNibName:nil bundle:nil];
        //UITabBarItem *tabBarItem = [[main.MainTabBar items] objectAtIndex:1];
        //[tabBarItem setEnabled:TRUE];

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Success" message:@"You are now Logged In" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];

    return;
    }
    else
    {
        // invalid information
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"alert" message:@"Invalide Information" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];

        return;

    }
} 
```

现在我的代码只禁用了其他 4 个选项卡栏项目，但我不知道在用户登录时启用所有选项卡 bat 项目的方法。

请帮忙？

谢谢！:D

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-28T20:27:02.817

我不得不说我是iOS开发的初学者，我想我可以帮助你。

在您的 Storyboard 中制作一个 TabBarController 和所有其他 UIViewController。将它们链接到 TabBarController 并向它们添加分配类。在您的情况下，其中一个 UIViewController 将被称为 LoginViewController。现在，当您的应用启动时，LoginViewController 必须是第一个选项卡，您只需添加以下代码即可禁用选项卡：

```
[[[[self.tabBarController tabBar]items]objectAtIndex:1]setEnabled:FALSE];
[[[[self.tabBarController tabBar]items]objectAtIndex:2]setEnabled:FALSE];
[[[[self.tabBarController tabBar]items]objectAtIndex:3]setEnabled:FALSE]; 
```

您可以再次启用它们：

```
[[[[self.tabBarController tabBar]items]objectAtIndex:1]setEnabled:TRUE];
[[[[self.tabBarController tabBar]items]objectAtIndex:2]setEnabled:TRUE];
[[[[self.tabBarController tabBar]items]objectAtIndex:3]setEnabled:TRUE]; 
```

所以你的 LoginAction 函数看起来像这样：

```
- (void) LoginAction {
     AppDelegate *passData = (AppDelegate *)[[UIApplication sharedApplication] delegate];

        if ([CustomerUsername.text isEqualToString:@""] || [CustomerPassword.text     isEqualToString:@""]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"alert" message:@"Please Fill     all the field" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];

        return;
    }
    // i will use a code from connect to DB tutorial
    NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/Staff.php?userName=%@&password=%@",CustomerUsername.text, CustomerPassword.text];

    // to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    // to receive the returend value
    NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    if ([strResult isEqualToString:@"1"]) {
        //MainTabViewController *main = [[MainTabViewController alloc] initWithNibName:nil bundle:nil];
        //UITabBarItem *tabBarItem = [[main.MainTabBar items] objectAtIndex:1];
        //[tabBarItem setEnabled:TRUE];

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Success" message:@"You are now Logged In" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];

        [[[[self.tabBarController tabBar]items]objectAtIndex:1]setEnabled:TRUE];
        [[[[self.tabBarController tabBar]items]objectAtIndex:2]setEnabled:TRUE];
        [[[[self.tabBarController tabBar]items]objectAtIndex:3]setEnabled:TRUE];

        return;
    }
    else {
        // invalid information
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"alert" message:@"Invalide Information" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];

        return;
    }
} 
```

我希望它有所帮助：D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T19:51:57.533

我从@RonzyFonzy 更新了解决方案以使用 N 个标签栏项目：

```
 for (UITabBarItem *tmpTabBarItem in [[self.tabBarController tabBar] items])
           [tmpTabBarItem setEnabled:NO]; 
```

# javascript - 位置固定 - 水平滚动

> ID：12545042
> 
> 赞同：5
> 
> 时间：2012-09-22T15:20:19.320
> 
> 标签：javascript, jquery, css, position, fixed

我有一个左侧垂直边栏，当用户垂直滚动时，边栏会随着用户垂直滚动。但是，如果窗口太小，当用户水平滚动时，垂直侧边栏会随着窗口滑动。我如何阻止侧边栏水平滚动，但也允许侧边栏与用户一起垂直滚动。

我不想这样做。

```
overflow: hidden; 
```

因为我希望用户能够水平滚动，但我只是不希望侧栏与他们一起出现。

这是我的 javascript：

```
$(document).ready(function(){
    var top = $("#sidebar").offset().top;
    $(window).scroll(function(){
        var y = $(window).scrollTop();
        if (y >= top) {
            $("#sidebar").addClass('fixed');
        } else {
            $("#sidebar").removeClass('fixed');
        }
    });
}); 
```

我的CSS是：

```
#sidebar {
    position: absolute;
    height: 100%;
    min-width: 100px;
    width: 100px;
    overflow: hidden;
    background-color: #ededed;
    border-right: 1px solid #aaa
    }
#sidebar.fixed {
    position: fixed;
    height:100%;
    top: 0%;
    z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:26:55.657

然后修复可能是错误的方法。

从理论上讲，如果顶部发生变化，您可以使用该`.scroll`功能更新元素的绝对顶部位置，但在左侧属性更改时忽略滚动事件。

请看这个小而非常简单的例子。[http://jsfiddle.net/Hbkdt/](http://jsfiddle.net/Hbkdt/)

注意：您可以将其与动画功能结合使用，并对窗口事件进行反跳，使其每 30-50 毫秒触发一次，然后更新值。

动画和去抖动示例：http: [//jsfiddle.net/Hbkdt/1/](http://jsfiddle.net/Hbkdt/1/)

# operating-system - 内存池与 malloc

> ID：12545044
> 
> 赞同：3
> 
> 时间：2012-09-22T15:20:33.950
> 
> 标签：operating-system, real-time, rtos

我正在阅读一些实时操作系统规范，我读到在 RTOS 中，我们通常不喜欢使用 malloc。这样做的原因是：出于性能问题，我们不应该使用 malloc，因为通过 malloc 分配内存非常耗时，而且跟踪分配的内存的开销也更高。

现在在实时系统中，所有进程都有时间限制，我们一般不使用malloc。我很好奇并开始研究一些类似于在 RTOS 运行时实际分配内存的方式，然后我发现了内存池。现在有人写道，内存池实际上意味着固定大小的块分配。现在内存池的优点是它不会受到碎片的影响。这怎么可能？假设我们有 3 个 4 字节的池，而应用程序需要 10 字节，那么在这种情况下，内存池将受到内部碎片的影响。

内存池如何工作以及如何分配内存？应用程序是否在编译时获得池，就像特定应用程序将从 4 字节的池大小中获得 3 个池一样？如果他们需要的内存无法放入池中怎么办。这样的系统中是否存在许多不同大小的内存池？请给我解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:41:09.080

那么，碎片将取决于内存池的实现。通常，内存池是固定大小的内存块池。当某些东西想要一块这样大小的内存时，它就会进入那个池。因此，没有碎片，因为所有想要该大小的块的东西都是从该大小的块池中获取的。

现在，如果不存在特定大小的块池，则可以使用更大大小的块池。如果发生这种情况，那么技术上就会存在碎片，因为分配的内存块的某个部分没有被使用（碎片化）。

如果所有内存池都提供了所有所需大小的块，那么就不会有碎片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T04:35:01.483

池不会消除碎片，但它们可以显着减少碎片，并且还可能减少分配大量非常小的块的开销。一个好的方案是一个库，它允许客户端代码为其每个高度缩放的结构创建一个池。在创建池时，您指定块大小、最初分配和增长的块数，以及用于调试的文本名称。

要分配块，请将池 ID 传递给分配器。只要池中没有空闲块，它就会分配一块连续的块并使其可用，并返回其中一个。每当一个块被释放时，如果该块的块中的所有块都是空闲的，它就会释放该块。

对于调试，有一个打印所有池的例程，给出描述、分配的数量以及可能的其他统计信息，例如可用的空闲池的数量（如果这很高，则存在碎片问题）和曾经分配的最大值。对查找内存泄漏非常有帮助。

对于这种类型的库，最坏的情况是子系统在系统生命周期的早期分配大量块，然后随机释放其中的大部分。许多块将保持分配状态，但使用中的块很少。最好的情况（与 malloc 相比）是需要具有广泛不同生命周期的新块的持续循环，对于必须长时间保持运行的系统，如某些嵌入式系统。

这是最简单的，最适合单线程应用程序。对于多线程应用程序，必须注意使其线程安全，并且您可能需要模仿 malloc() 经常在幕后进行的优化以最小化锁定开销（例如，每个线程的“竞技场”）。

# iphone - 如何在横向模式下从底部滑入 UIView

> ID：12545048
> 
> 赞同：0
> 
> 时间：2012-09-22T15:21:15.107
> 
> 标签：iphone, ios, xcode, animation, uiview

我已将 UIView 添加到 IB 的另一个“主”视图中。我的应用程序仅处于横向模式。我想让它通过按下一个按钮，这个另一个 UIView 从底部滑入。所以，目前它根本不在图片中，但是当按下按钮时，视图会从底部出现并滑入到位。稍后我将使用相同的按钮作为切换按钮，然后将 UIVIew 滑出。UIView 不是屏幕的大小，否则我会以模态方式呈现它。

这是我尝试过的代码：

.m

```
-(IBAction)onGearBag:(UIButton *)sender
{

    [sender setEnabled:NO];
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
        if (gearBag.transform.ty == 0) {
            [gearBag setTransform:CGAffineTransformMakeTranslation(0, -400)];
        }else{
            [gearBag setTransform:CGAffineTransformMakeTranslation(0, -200)];
        }
    }completion:^(BOOL done){
        //some completion handler
        [sender setEnabled:YES];
    }];
} 
```

。H

```
@interface MyEquipmentViewController : PFViewController
{
    IBOutlet UIView *gearBag;
}
@property (strong, nonatomic) TabsTopBar *topbar;
- (IBAction)onPopoverButton:(UIButton *)sender;
- (IBAction)actionHelp:(id)sender;
- (IBAction)onGearBag:(id)sender;
@end 
```

。H

```
@interface MyEquipmentViewController : PFViewController
{
    IBOutlet UIView *popoverInitAlert;
    __unsafe_unretained IBOutlet UIImageView *imageView;
    IBOutlet UIView *gearBag;
}

@property (strong, nonatomic) TabsTopBar *topbar;
- (IBAction)onPopoverButton:(UIButton *)sender;
- (IBAction)actionHelp:(id)sender;
- (IBAction)onGearBag:(id)sender;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:39:22.357

简单的视图动画：

```
- (IBAction)myIBAction:(UIButton *)sender
{
    [sender setEnabled:NO];
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
        if (mySecondView.transform.ty == 0) {
            [mySecondView setTransform:CGAffineTransformMakeTranslation(0, -400)];
        }else{
            [mySecondView setTransform:CGAffineTransformMakeTranslation(0, 0)];
        }
    }completion:^(BOOL done){
        //some completion handler
        [sender setEnabled:YES];
    }];
} 
```

# php - 第一个属性定义时出现 php 语法错误。看来是环境问题。有关如何修复的任何建议？

> ID：12545051
> 
> 赞同：-2
> 
> 时间：2012-09-22T15:21:38.550
> 
> 标签：php

我正在学习 php，并在我的主机上放置了一个非常简单的类定义，并且在第一个属性定义时出现语法错误。

请参阅下面的前几行 - 错误是

> **解析错误**：语法错误，意外的 T_STRING，需要 T_OLD_FUNCTION 或 T_FUNCTION 或 T_VAR 或 '}'

与第一个“公共”声明一致。

PHP 版本是“5.3.3-7+squeeze13 with Suhosin-Patch”。

如果我将“public”更改为“var”，代码会超过这一点，但会死于其他一些简单的语句（如“抛出异常”）。有用的友好类型声称代码在他们的本地开发环境中运行良好。

关于可能发生的事情以及如何解决它的任何建议？我是否需要将我（将近 20 年的）整个网站迁移到其他地方？

谢谢。

代码示例：

```
<?php
/* Class name: reBOOKed_User
 * Description: Everthing that a user needs to have associated with them,
 *      including contact information, circle memberships, bookshelves, and
 *      points/pages earned.
 */

class reBOOKed_User
{
    public $Username;
    public $Password;
    public $Emails = array(); #can have multiple emails associated with an account 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:31:28.183

如果不仅仅是语法错误（例如，不平衡的花括号），那么通常表明您的服务器实际上运行的是不支持 PHP5 代码的旧版本的 PHP (php 4)。

PHP4 类看起来像这样：

```
class User {
    var $Username;
    var $Password;
    var $Emails = array();

    function getUsername() {
        return $this->Username;
    }
} 
```

你能仔细检查你的版本吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:23:55.820

`}`在文件末尾添加以关闭课程。

# sql - SQL 数学与 UPDATE 中的百分比

> ID：12545052
> 
> 赞同：0
> 
> 时间：2012-09-22T15:21:54.857
> 
> 标签：sql, drupal

在荷兰，增值税将从 19% 变为 21%。

现在我的网上商店有 4000 种产品，我想同时更改所有价格。

价格存储在 sql 数据库中。我的问题是：是否可以选择我的价格并额外增加 2% 的价格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:24:55.093

这不是 2%。您可以通过除以旧汇率并乘以新汇率来转换它：

```
update  PriceTable
set     Price = Price / 1.19 * 1.21 
```

加起来增加了 1.68%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:31:09.757

您使用的是 ubercart 还是 commerce 模块？如果是这种情况，使用税/增值税配置很容易。

# arrays - 数组到 Excel 使用 vb.net

> ID：12545054
> 
> 赞同：2
> 
> 时间：2012-09-22T15:22:17.553
> 
> 标签：arrays, vb.net

此代码将文本文件作为输入并将每一行存储在字符串数组中，循环遍历每一行并检查条件并最终填充数组。

当我尝试通过`.range`excel 对象库的方法将此一维数组传输到 excel 列时，它会用数组的第一个值（即数组（0））填充范围的所有单元格。

```
 sr = openFileDialog1.FileName()
            If (sr IsNot Nothing) Then

            Dim alltextlines() As String = IO.File.ReadAllLines(sr)
            Dim name As String
            Dim isvalid As Boolean
            Dim tempstr() As String
            Dim count As Integer = 0

            For Each myLine In alltextlines
                ReDim Preserve tempstr(count)
                If myLine.Contains(">") And myLine.Contains(" sds dsd") Then

                    isvalid = Integer.TryParse((Microsoft.VisualBasic.Mid(Microsoft.VisualBasic.LTrim(myLine), 3, 1)), 0)

                    If isvalid Then

                        name = Microsoft.VisualBasic.Left(Microsoft.VisualBasic.LTrim(myLine), 5)

                    Else
                        name = Microsoft.VisualBasic.Left(Microsoft.VisualBasic.LTrim(myLine), 7)

                    End If

                    tempstr(count) = name
                    count = count + 1
                End If

            Next
            Dim message As String = String.Join("..", tempstr)
            MsgBox(message)

            Dim oExcel As Object
            Dim oBook As Object
            Dim oSheet As Object

            'Start a new workbook in Excel.
            oExcel = CreateObject("Excel.Application")
            oBook = oExcel.Workbooks.Add
            oSheet = oBook.Worksheets(1)
            oSheet.Range("A1").Value = "SiteNames"
            oSheet.Range("A1:B1").Font.Bold = True
            oSheet.Range("A2").Resize(tempstr.Length).Value = tempstr

            oSheet = Nothing
            oBook = Nothing
            oExcel.Quit()
            oExcel = Nothing
            GC.Collect()

        Else
            MsgBox("TEXT FILE IS EMPTY", MsgBoxStyle.Critical, "Error")
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:09:40.590

您应该传递一个二维数组来设置范围值。这会使您的循环复杂化以仅提取符合预定义条件的行，并且您被迫进入第二个循环以填充二维数组

举个例子

```
Dim values(5) as string
values(0) = "Test0"
values(1) = "Test1"
values(2) = "Test2"
values(3) = "Test3"
values(4) = "Test4"

Dim tempstr(,) As String = new String(values.Length,1) {}
for x as Integer = 0 to values.Length - 1
    tempstr(x, 0) = values(x)
next

Dim oExcel as Object = CreateObject("Excel.Application")    
Dim oBook as Object = oExcel.Workbooks.Add 
Dim oSheet as Object = oBook.Worksheets(1) 
oSheet.Range("A1").Value = "SiteNames" 
oSheet.Range("A1").Font.Bold = True 
Dim r As Range = oSheet.Range("A2").Resize(tempStr.GetLength(0))
r.Value2 =  tempstr
oExcel.Visible = true 
```

# python - 它是递归中的堆栈溢出错误吗？

> ID：12545055
> 
> 赞同：0
> 
> 时间：2012-09-22T15:22:18.463
> 
> 标签：python, recursion, overflow

我是 CS 的新手，我只是尝试使用递归解决变更问题，在另一个问题[Recursive change-making algorithm](https://stackoverflow.com/questions/12520263/recursion-python)

```
def change(total, coins):
    def coin_change(remain, position, changes=None):
        changes=[] if changes is None else changes
        if remain == 0:
            return len(changes), changes
        elif remain < 0 or position == -1:
            return float('inf'), changes
        else:
            strategy1 = coin_change(remain, position-1, changes)
            strategy2 = coin_change(remain-coins[position], position, 
                                    changes+[coins[position]])
        if strategy1[0] >= strategy2[0]:
            return strategy2
        else:
            return strategy1
    return coin_change(total, len(coins)-1, changes=None) 
```

当给定较小`(49, [1,5,12,24])`的输入（`(1000, [1,5,12,24])`例如

```
File "********\coin_change.py", line 56, in testperformance
function1(1480, [1, 7, 24, 42]) 
```

虽然我已经通过使用一些动态编程技术解决了这个问题，但我真的很好奇我的初始代码有什么问题。是堆栈溢出问题吗？它是如何发生的？希望一些明确的解释或参考资料。

# excel - 如何从 QTP Resultsviewer 打开 Excel 文件

> ID：12545056
> 
> 赞同：1
> 
> 时间：2012-09-22T15:22:19.660
> 
> 标签：excel, qtp

我想在`Reporter.ReportEvent`声明中包含一个链接以打开 Excel 文件以获取测试的更多详细信息。因此，对于更多详细信息，用户应该能够单击**QTP**结果查看器中的链接，然后将打开一个包含详细信息的 Excel 文件。

我该怎么做请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:20:59.950

AFAIK，您不能使用创建链接 `Reporter.ReportEvent`。它可以用于[这里](http://mercuryquicktestprofessional.blogspot.in/2008/04/qtp-and-reporter-objects.html)提到的目的。

如果我没记错的话，您想查看测试的数据表，因此想将其链接到 QTP Result Viewer。QTP 结果查看器已经具有此功能。您可以查看所有测试的数据表，包括不可重用的操作以及外部操作。

在结果查看器中打开结果转到查看 - 数据表。请注意，此数据表显示运行时数据。

# ios - 当我从 UIWebVI 退出时出错，响应选择器

> ID：12545060
> 
> 赞同：0
> 
> 时间：2012-09-22T15:22:52.110
> 
> 标签：ios, uiviewcontroller, uiwebview

我使用 UIWebView 将我的应用程序连接到 gmail Web 视图...如果我关闭 viewController.. 不久后我收到此错误：

```
[MailViewController respondsToSelector:]: message sent to deallocated instance 0x142c8c00 
```

我也尝试使用该方法：

```
- (IBAction)close:(id)sender{

    [web stopLoading];
    [self dismissModalViewControllerAnimated:YES];
} 
```

没有任何成功......我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:27:57.257

您可能忘记在. `UIWebView`_`delegate``nil``dealloc``MainViewController`

`MainViewController`因此，webview在它被释放后会向它的委托 (the ) 发送一些消息，解释崩溃。

* * *

从[`-[UIWebView delegate]`方法文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIWebView/delegate)：

> **重要提示**：在释放您为其设置了委托的实例之前`UIWebView`，您必须首先将其委托属性设置为`nil`。例如，这可以在您的 dealloc 方法中完成。

# python - 谷歌应用引擎数据库模型静态（类）变量

> ID：12545062
> 
> 赞同：0
> 
> 时间：2012-09-22T15:23:29.487
> 
> 标签：python, google-app-engine, google-cloud-datastore, gql

在 GAP 中，您创建了一个模型，它们通过以下方式显示它：

```
 class Pet(db.Model):
        name = db.StringProperty(required=True)
        type = db.StringProperty(required=True)
        birthdate = db.DateProperty()
        weight_in_pounds = db.IntegerProperty()
        spayed_or_neutered = db.BooleanProperty() 
```

为什么将其创建为静态变量？

他们不应该在`__init__()`方法中并清除为`self.variable`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:44:43.337

当您实例化 Pet 的实例时，传统上不会实例化，它们是使用元类创建的。

在这里阅读什么是元类： [什么是 Python 中的元类？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)

那里有一个标有“为什么要使用元类？”的部分，它简要讨论了 Django ORM。db.Model 方案与 Django ORM 非常相似，因此该解释适用。

# linux - 用于检查 ubuntu 版本然后复制文件的 Shell 脚本

> ID：12545066
> 
> 赞同：1
> 
> 时间：2012-09-22T15:23:52.247
> 
> 标签：linux, shell, ubuntu

我是 shell 脚本编程的新手。我想写一个简单的shell脚本来检查系统中安装的ubuntu版本；如果版本大于或等于版本 12，则复制一些文件，如果版本小于或等于版本 12，则复制一些其他文件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-22T15:32:50.387

该`lsb_release -rs`命令让我们确定 Ubuntu 版本，我们可以像这样使用它：

```
if [[ $(lsb_release -rs) == "18.04" ]]; then # replace 8.04 by the number of release you want

       echo "Compatible version"
       #Copy your files here
else
       echo "Non-compatible version"
fi 
```

``（包含反引号）是非 POSIX 且已弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T20:08:30.680

```
cat /etc/issue.net |  awk '{x=2 ; if (substr($x,0,3) == '12') {system("cp <src> <dest>") } else {system("cp <src> <dest>") }}' 
```

`cat /etc/issue.net`将显示 3 个字段，其中第二个字段是版本号。

通过`substr`我们检查前两位数字是否是版本 12，然后通过内部的系统命令，`awk`我们可以将某些文件从特定的 src 复制到 dest。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-14T13:49:02.613

**解决方案**：`cat /proc/version`解析数字并执行条件/切换语句以执行操作。

来自**RadHat** [文档](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/5/html/deployment_guide/s1-proc-topfiles#s2-proc-version)：

> 该文件指定了正在使用的 Linux 内核和 gcc 的版本，以及系统上安装的 Red Hat Enterprise Linux 的版本：

# c++ - 分配器无状态意味着什么？

> ID：12545072
> 
> 赞同：9
> 
> 时间：2012-09-22T15:24:47.070
> 
> 标签：c++, stl, allocator

分配器无状态意味着什么？我意识到 std::allocator 是 malloc 的包装器，并且没有自己的状态。同时，malloc 自己记账，所以可以说所有 std::allocator 实例都使用一个状态。

我将如何实现没有状态的池分配器？如果不是分配器，什么会保持当前的内存状态？

有人可以正式定义在这种情况下状态的含义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T15:29:57.890

状态意味着类的实例中包含可变信息。无状态意味着他们没有它。无状态类没有非静态数据成员。

您可以通过使用对于该类型的所有池分配器都相同的一些相互外部状态（池）来使池分配器成为无状态的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T18:29:43.377

不鼓励分配器对象本身是有状态的。这意味着如果您创建一个`std::allocator`（或您自己的）实例，该实例不应包含有关已分配块等的任何信息 - 此信息必须`static`在所有`std::allocator`实例之间共享。违反此规则可能会导致 STL 库中出现未定义的行为。

例如，看`std::list::splice`：它从一个中删除元素的间隔`std::list`并插入到另一个中。对包含的元素真的没有做任何事情（没有复制等） - 这种方法只是重新排列内部指针。那么，如果`std::allocator`实例#1（在列表#1 中）知道一些东西，那么什么不知道`std::allocator`实例#2（在列表#2 中）？这些元素将丢失，memleaked，自发删除或其他......

关于 STL 这类事情的好读物是“Effective STL”，Scott Meyers

# f# - 将 F# 中的序列写入输出文件

> ID：12545075
> 
> 赞同：7
> 
> 时间：2012-09-22T15:24:56.523
> 
> 标签：f#

我在 F# 中编写输出文件时遇到问题。它在输出中打印不完整的数据。我不确定我的代码的哪一部分是错误的，或者是否有更好的方法来做到这一点。下面是输出文件中最后几行的快照。

```
NKU12,201209121039,8960,8960,8960,8960
NKU12,201209121040,8960,8960,8960,8960
NKU12,201209121041,8960,8960,8960,8960
NKU12,201209121043,8960,8960,8960,8960
NKU12,201209121045,8960,8 
```

请注意，在最后一行中，它是不完整的。下面是我在 F# 中的代码

```
let outFile = new StreamWriter("Test.csv")

let dataFrame = lines fileName
                |> Seq.map (fun y -> y.Split([|','|]))
                |> Seq.filter (fun some function) 
                |> Seq.iter (fun y -> outFile.WriteLine(sprintf "%s,%s,%s,%s,%s,%s" y.[0] (y.[1]+y.[2]) y.[3] y.[4] y.[5] y.[6])) 
```

请注意，在最后一行中，它是不完整的。如果我使用 printfn 而不是写入文件，它将在控制台上完全显示所有信息。

谢谢肯尼斯

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T15:32:40.907

尝试调用 outData.Flush 或 outData.Close 然后检查文件的内容。某些数据可能仍在缓冲区中。

# symfony - 使用 WebTestCase 合并 Ajax 调用表单的内容

> ID：12545076
> 
> 赞同：0
> 
> 时间：2012-09-22T15:24:57.100
> 
> 标签：symfony, functional-testing, sonata-admin

我正在使用 SonataAdminBundle 和 DoctrineORMBundle ，假设我有一个帖子/标签关系，其中标签与帖子是多对多的。

我正在尝试在 Post 表单上运行功能测试。标签显示在 Post 表单中抛出一个小部件，其中 Tag 表单字段来自另一个请求（Ajax 调用）并通过 Javascript 合并到 Post 表单中。

依靠 Javascript 很容易做到这一点，但是当涉及到功能测试场景时，使用 WebTestCase 类，我发现很难模拟这样的功能。

假设我正在测试 Post 的 Create 操作并在我的测试用例中使用此代码。

```
public function testCreate() {
    $client = static::createClient();
    $client2 = static::createClient();
    //main request. The Post form
    $crawler = $client->request('GET','/route/to/posts/create');
    //second request (The Tag form) simulating the request made via Ajax
    $crawler2 = $client2->request('GET','/admin/core/append-form-field-element?code=my.bundle.admin.tags);
} 
```

上面代码的问题在于，从那时起我不知道如何将 Tag 表单合并到 Post 表单中，所以这样它们会一起提交。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:38:41.580

最后我找到了如何将这两个请求内容合并在一起。这是我使用的代码：

```
public function testCreate() {
    $client = static::createClient();
    $client2 = static::createClient();
    //main request. The Post form
    $crawler = $client->request('GET','/route/to/posts/create');
    //second request (The Tag form) simulating the request made via Ajax
    $crawler2 = $client2->request('GET','/admin/core/append-form-field-element?code=my.bundle.admin.tags);
    //first request's form. This is where we'll merge the content.
    $form = $crawler->selectButton('submitButton')->form();
    //let's say we want to merge each input fields from the second request
    foreach ($crawler2->filter('input') as $node) {
       //we use the Crawler\Form::set method with a new InputFormField instance
       //that uses a DOMNode as parameter
       $form->set(new InputFormField($node));
    }

    //now we can test if the form has our merged input field from the ajax call
    $this->assertTrue($form->has('tagName'));
} 
```

# javascript - javascript常量和opera浏览器

> ID：12545077
> 
> 赞同：2
> 
> 时间：2012-09-22T15:25:03.800
> 
> 标签：javascript, constants

```
<html>
   <head><title>Using the const Keyword</title>
       <script type="text/javascript">
          const NOON = 12;
          const FREEZING = 32; // Can't change
       </script>
   </head>
  <body bgcolor="silver">
    <big>
    <script type="text/javascript">
      document.write("Fahrenheit temp is " + FREEZING + ".<br />");
      FREEZING =32 + 10;
      NOON = NOON + " noon";
      document.write("Make it warmer " + FREEZING + ".<br />");
      document.write("See you at ", NOON, ".<br />");
    </script>
  </big>
 </body>
</html> 
```

以上代码在 Firefox、Chrome、Safari 上运行良好，但不适用于 Opera 12.02。由于我使用了关键字 'const' 结果应该如下

华氏温度是 32。让它变暖 32。12 点见。

但是Opera浏览器显示

华氏温度是 32。让它变暖 42。中午 12 点见。

这里有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:28:55.550

***[从这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/const)***

> const 的当前实现是 Mozilla 特定的扩展，不是 ECMAScript 5 的一部分。它在 Firefox 和 Chrome (V8) 中受支持。从 Safari 5.1.7 和 Opera 12.00 开始，如果您在这些浏览器中使用 const 定义变量，您以后仍然可以更改其值。Internet Explorer 6-9 或 Internet Explorer 10 的预览版不支持它。 const 关键字当前在函数范围内声明常量（如用 var 声明的变量）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:29:56.397

问题是`const`Opera 没有正式支持，仅此而已。开发人员声称这一点已经很长时间了，但它仍然落后。它仍然不是 ECMASCript 的一部分。

试试这个：

```
Object.defineProperty(window, "NOON", {
    value: 12, writable: false, configurable: false
}); 
```

这适用于 Opera。如果你也打算支持 IE<9，你应该使用一些不同的东西（而且效率较低）：

```
Object.defineProperty(window, "NOON", {
    get: function() {return 12;}
}); 
```

您仍然无法更改其值，但您可以使用 重新`NOON`定义`Object.defineProperty`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T15:29:40.033

`const`不是标准的 JavaScript 关键字。并非所有浏览器都有它。改用`var`：

```
var FREEZING = 32; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T11:30:24.800

最后浏览器支持它现在（2017）完美-> [https://caniuse.com/#feat=const](https://caniuse.com/#feat=const)

# mysql - 从 mysql 操作中打印五个字符串

> ID：12545083
> 
> 赞同：0
> 
> 时间：2012-09-22T15:26:41.900
> 
> 标签：mysql, string, operations

这是我的查询

```
$sum = "SELECT htno, 
SUM(tm) AS tech, 
SUM(tm)/7.5 AS divi, 
SUM(credits) AS cred , 
SUM(CASE WHEN credits <= 0 THEN 1 ELSE 0 END) AS log,
SUM(CASE WHEN credits > 0 THEN 1 ELSE 0 END) AS pass, 
SUM(CASE WHEN em >= 0 THEN 1 ELSE 0 END) AS atm, 
SUM(CASE WHEN em >= -2 THEN 1 ELSE 0 END) AS tot
FROM jbit WHERE htno='$id'"; 
```

在第 3 行 'SUM(tm)/7.5 As divi' 查询输出为 79.2544555555 但我希望输出为 79.25

帮帮我的朋友

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:28:19.950

你需要 MySQL 的[FORMAT()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_format)：

> 将数字 X 格式化为类似 '#,###,###.##' 的格式，四舍五入到 D 位小数，并将结果作为字符串返回。

所以你的查询变成：

```
$sum = "SELECT htno, 
SUM(tm) AS tech, 
FORMAT(SUM(tm)/7.5, 2) AS divi, 
SUM(credits) AS cred , 
SUM(CASE WHEN credits <= 0 THEN 1 ELSE 0 END) AS log,
SUM(CASE WHEN credits > 0 THEN 1 ELSE 0 END) AS pass, 
SUM(CASE WHEN em >= 0 THEN 1 ELSE 0 END) AS atm, 
SUM(CASE WHEN em >= -2 THEN 1 ELSE 0 END) AS tot
FROM jbit WHERE htno='$id'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:29:57.297

您可以使用 TRUNCATE() ：

```
TRUNCATE(SUM(tm)/7.5 , 2) AS divi, 
```

Truncate 会给你 '1.25' for '1.259' ，如果你想要它圆形它然后使用：

```
ROUND(SUM(tm)/7.5 , 2) AS divi, 
```

这会给你 '1.26' for '1.259'

# function - 哈希字符的 Emacs 函数

> ID：12545087
> 
> 赞同：1
> 
> 时间：2012-09-22T15:27:12.677
> 
> 标签：function, emacs, if-statement, line

下面的函数应该`#`在行首插入一个 if ，如果不是，它应该到行尾并插入一个`#`。为什么这不起作用（它总是走到最后并插入一个`#`?

```
(defun end-of-line-hash () 
  (interactive)
   (if (beginning-of-line)
       (insert "#")  
     (end-of-line)
     (insert "#"))
)
(global-set-key (kbd "#") 'end-of-line-hash) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:25:58.460

函数`beginning-of-line`将点移动到行首。它可能会返回`nil`。试试这个。

```
(defun end-of-line-hash () 
  (interactive)
   (if (= (point) (line-beginning-position))
       (insert "#")  
     (end-of-line)
     (insert "#"))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:49:15.227

[在rwb](https://stackoverflow.com/users/1172486/rwb)的回答的帮助下：

```
(defun hash-character-ESS () 
  (interactive)
  (if (region-active-p) 
      (comment-region (region-beginning) (region-end))
    (if (= (point) (line-beginning-position))
        (insert "#")  
      (end-of-line)
      (insert "#")))
) 
```

1) 如果选择了文本，请评论该区域。

2) 如果点（光标）位于行首，则在此处插入# 字符。

3) 如果点不是前两个中的任何一个，请将# 放在行尾。

# jquery - jQuery textscaling 从中间？

> ID：12545088
> 
> 赞同：1
> 
> 时间：2012-09-22T15:27:15.290
> 
> 标签：jquery, animation, text, scale

我在这里创建了一个简单的文本动画：http://jsbin.com/odivor/16/edit[我](http://jsbin.com/odivor/16/edit) 现在的问题是文本（büro 出口）是从左侧而不是从中间缩放的。我该如何解决这个问题？

我不想使用 jQuery Ui 比例。

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:42:05.587

尝试将您的 h2 样式更改为

```
header h2
{
  position: absolute;
  height: 36px;
  width: 100%; 
  margin: -18px auto 0px auto;
  top: 50%;
  z-index: 9999;
  font-size: 7.3em;
  text-align: center;  
  white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:51:26.203

我会尝试这样的事情：

[http://jsbin.com/odivor/23](http://jsbin.com/odivor/23)

您`h2`需要大尺寸才能畅通无阻地扩展。您可能必须`left`根据您想要的确切位置调整该值。

# json - Android如何使用带有HTTP的JSON来获取图像

> ID：12545094
> 
> 赞同：-1
> 
> 时间：2012-09-22T15:28:08.403
> 
> 标签：json, image, http, parsing

我是 android 编程的新手，我需要由 Jason 链接网站上的图像，并放置由服务器控制的图像、图标、标题和音乐

```
Example:http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed 
```

我需要提取`profile_image_url_https`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:32:17.480

您需要[解析 JSON 字符串](https://stackoverflow.com/questions/3494328/parsing-json-in-android)并使用 Java 的对象模型通过遍历结果数据结构中的键和索引来提取所需的信息。

# ios - 如何像 UITableViewCell 一样重用 UIView

> ID：12545097
> 
> 赞同：5
> 
> 时间：2012-09-22T15:28:29.410
> 
> 标签：ios, uitableview, uiview, reusability

我有一个具有相同 UIView 的许多实例的应用程序。他们是一种像 UITableViewCell 一样重用 UIView 的方法吗？如同：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:56:04.107

我建议您观看WWDC 的**2010 年第****104**场会议，名为“使用 ScrollViews 设计应用程序”，它解释了重用机制 (IIRC)。

 **您还可以查看[`OHGridView`](https://github.com/AliSoftware/OHGridView)我实现此技术的源代码：查看[OHGridView.m](https://github.com/AliSoftware/OHGridView/blob/master/OHGridView/OHGridView.m)`layoutSubviews`中的第二个方法，我在其中添加了未使用的I called ，然后在需要时从中取出一些。`UIViews``NSMutableSet``recyclePool``UIViews``recyclePool`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:13:50.843

我建议使用 NSCache 来缓存您需要缓存的 UIView 实例。NSCache 与 NSDictionary 不同，因为它不复制键来获取值，并且它允许一些很好的机制来处理内存。检查[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)，看看它是否适合您。我最近使用它来缓存 UIPinAnnotationView 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T15:12:55.633

这个简单的代码演示了基本池，如果它不在任何层次结构中，则使视图出队。对于复杂的用例，您应该需要标识符、锁...

看看我的要点[FTGViewPool](https://gist.github.com/onmyway133/510deac69c6f71f1b8b0)

```
@interface FTGViewPool ()

@property (nonatomic, strong) NSMutableArray *views;
@property (nonatomic, assign) Class viewClass;

@end

@implementation FTGViewPool

- (instancetype)initWithViewClass:(Class)kClass {
    self = [super init];
    if (self) {
        _views = [NSMutableArray array];
        _viewClass = kClass;
    }

    return self;
}

- (UIView *)dequeueView {
    // Find the first view that is not in any hierarchy
    for (UIView *view in self.views) {
        if (!view.superview) {
            return view;
        }
    }

    // Else create new view
    UIView *view = [[self.viewClass alloc] init];
    [self.views addObject:view];
    return view;
} 
```**

# java - 如何将 SwingWorker 与 Swing 同步？

> ID：12545098
> 
> 赞同：2
> 
> 时间：2012-09-22T15:28:30.620
> 
> 标签：java, swing, swingworker

问题：我希望在所有工作线程停止后关闭主应用程序窗口。这很容易。但我也想确保 SwingWorker 发送的消息将在关闭窗口发送的消息之前得到处理。我在这里有这个（不是那么）小示例源文件。

```
/*****************************************************************************
    TestAsyncEvents.java

This example shows that messages from SwingWorker threads get processed
*AFTER* the WINDOW_CLOSED event even if they had been generated
*BEFORE* them.
The question is: HOW DO I MAKE IT RIGHT?
I know the answer, but it doesn't satisfy me. ;)
*****************************************************************************/
import  java.util.List;
import  java.awt.Dimension;
import  java.awt.Toolkit;
import  java.awt.event.WindowAdapter;
import  java.awt.event.WindowEvent;
import  javax.swing.JFrame;
import  javax.swing.SwingUtilities;
import  javax.swing.SwingWorker;

//////////////////////////////////////////////////////////////////////////////
//
public class TestAsyncEvents extends JFrame
{

/*
 *  This class is for closing main window
 */
private class Closer extends WindowAdapter
{
    @Override public void windowClosing( WindowEvent ev ) { handleWindowClosing(); }
    @Override public void windowClosed( WindowEvent ev ) { handleWindowClosed(); }
}

/*
 *  This class represents worker that gets asked to stop
 *  and then reports when it actually stops
 */
private class Ticker extends SwingWorker<Boolean,String>
{
    private boolean stop_flag = false;
    private int     counter = 0;
    private boolean result;
    Ticker() { super(); execute(); }
    @Override protected Boolean doInBackground()
    {
        // body, executed in worker thread
        try {
            while( !stop_flag )
            {
                Thread.sleep(2000);
                publish(String.format("Tick #%d",++counter));
            }
            return result=true;
        } catch( Exception ex ) {
            return result=false;
        }
    }
    @Override protected void process( List<String> chunks )
    {
        // reports progress, executed in gui thread
        for( String chunk: chunks )
            System.out.println(String.format("Chunk processed: %s",chunk));
    }
    @Override protected void done()
    {
        // reports result, executed in gui thread
        System.out.println(String.format("Thread is %s.",isCancelled()?"cancelled":"stopped normally"));
        System.out.println(String.format("Result is %s.",Boolean.toString(result)));
        //postClosing(); // IT IS THE SOLUTION FOR MY PROBLEM! BUT... IT ISN'T GOOD ONE!
    }
    public void askToStop() { stop_flag = true; }
}

/****************************************************************************/
/*  FIELDS                                                                  */
/****************************************************************************/
private static  TestAsyncEvents     self;
private Ticker      worker_object = null;

/****************************************************************************/
/*  CONSTRUCTOR                                                             */
/****************************************************************************/
TestAsyncEvents()
{
    super("Testing Async Events");
    addWindowListener(new Closer());
    setMinimumSize(new Dimension(512,384));
    setVisible(true);
    worker_object = new Ticker();
}

/****************************************************************************/
/*  INNER METHODS                                                           */
/****************************************************************************/
/*
 *  Waiting for worker to finish
 */
private void doStopping()
{
    worker_object.askToStop();
    while( !worker_object.isDone() );
}
private boolean stopInSeparateThread()
{
    try {
        Thread closer = new Thread(new Runnable(){public void run(){doStopping();}});
        closer.start();
        closer.join();
        return true;
    } catch( Exception ex ) {
        return false;
    }
}
private boolean stopHere()
{
    doStopping();
    return true;
}
private boolean stopWorker()
{
    //return stopInSeparateThread();
    return stopHere();
}
private boolean canClose()
{
    return worker_object.isDone();
}
/*
 *  Posting WM_CLOSE events
 */
private void doPostCloseEvent()
{
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(new WindowEvent(this,WindowEvent.WINDOW_CLOSING));
}
private void postInSeparateThread()
{
    SwingUtilities.invokeLater(new Runnable(){public void run(){doPostCloseEvent();}});
}
private void postHere()
{
    doPostCloseEvent();
}
private void postClosing()
{
    //postInSeparateThread();
    postHere();
}
/*
 *  Methods for Closer class
 */
private void handleWindowClosing()
{
    System.out.println("Closing main window...");
    if( canClose() )
    {
        System.out.println("Can close! Disposing...");
        dispose();
    } else {
        System.out.println("Can't close! Now we'll allow it by stopping worker thread...");
        boolean res = stopWorker();
        System.out.println(String.format("Stopping worker thread went %s.",res?"okay":"wrong"));
        postClosing(); // HERE I SIGNAL THE MAIN WINDOW TO CLOSE
    }
}
private void handleWindowClosed()
{
    System.out.println("Main window is closed!");
}

/****************************************************************************/
/*  ENTRY POINT                                                             */
/****************************************************************************/
public static void main( final String[] args )
{
    SwingUtilities.invokeLater(new Runnable(){public void run(){self=new TestAsyncEvents();}});
    System.out.println("All systems are go!");
}

}
////////////////////////////////////////////////////////////////////////////// 
```

它的输出在这里：

```
F:\C\Java\Test-Frame-Events>java TestAsyncEvents
All systems are go!
Chunk processed: Tick #1
Closing main window...
Can't close! Now we'll allow it by stopping worker thread...
Stopping worker thread went okay.
Closing main window...
Can close! Disposing...
Main window is closed!
Chunk processed: Tick #2
Thread is stopped normally.
Result is true. 
```

我想要的在这里：

```
F:\C\Java\Test-Frame-Events>java TestAsyncEvents
All systems are go!
Chunk processed: Tick #1
Closing main window...
Can't close! Now we'll allow it by stopping worker thread...
Stopping worker thread went okay.
Chunk processed: Tick #2
Thread is stopped normally.
Result is true.
Closing main window...
Can close! Disposing...
Main window is closed! 
```

在我看来，来自 SwingWorker 的事件是在一个完全不同的事件队列中处理的，而不是处理窗口消息等的事件队列。在发布 WINDOW_CLOSING 事件之前，我故意等待工作线程停止并发布其所有消息。但这无济于事——来自 SwingWorker 的消息在 WINDOW_CLOSING 和 WINDOW_CLOSED 事件之后仍然得到处理。这导致了许多微小的不便。特别是，当我关闭 WINDOW_CLOSED 处理程序中的所有日志记录时，希望这些将是我的程序中执行的最后一个运算符，来自工作线程的所有消息都会在时间和空间上丢失。

我知道我的问题的解决方案。我必须取消注释第 68 行和第 161 行。但这意味着如果我有多个 SwingWorker 线程，我应该生成另一个只负责所有工作人员的线程，并在所有工作人员停止时发出信号退出主窗口。恕我直言，这并不整洁。那么，Java 专家，您建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:40:06.147

一种可能的解决方案：考虑使用 PropertyChangeListener：

```
private void handleWindowClosing() {
  System.out.println("Closing main window...");
  if (canClose()) {
     System.out.println("Can close! Disposing...");
     dispose();
  } else {
     System.out
           .println("Can't close! Now we'll allow it by stopping worker thread...");

     worker_object.addPropertyChangeListener(new PropertyChangeListener() {

        @Override
        public void propertyChange(PropertyChangeEvent pcEvt) {
           if (SwingWorker.StateValue.DONE.equals(pcEvt.getNewValue())) {
              postClosing();
           }
        }
     });

     boolean res = stopWorker();
     System.out.println(String.format("Stopping worker thread went %s.",
           res ? "okay" : "wrong")); // !!
     // postClosing(); // HERE I SIGNAL THE MAIN WINDOW TO CLOSE
  }
} 
```

如果您有多个工人，您可能会使用[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)或[CyclicBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)

# php - 如何使用 jquery 更新值

> ID：12545103
> 
> 赞同：2
> 
> 时间：2012-09-22T15:29:22.303
> 
> 标签：php, jquery

我正在创建一个显示用户帐户详细信息的表格。在此表中，我正在管理用户的帐户。现在我希望在 TD 中使用 accountStatus 类显示更新后的 accountStatus 值。

```
foreach ($result_val->result() as $row) {
        $accountStatus = array('data' =>$row->accountStatus,'class' => 'accountStatus');
        $this->table->add_row($row->username,$row->email,$accountStatus,(($row->accountStatus == 'deleted')? " " :"<input  type=\"button\" id=".$row->userID." class=\"btn btn-warning btn-small block\" value=\"Block\"> <input type=\"button\" id=".$row->userID." class=\"btn btn-success btn-small activate\" value=\"Activate\"> <input type=\"button\" id=".$row->userID." class=\"btn btn-danger btn-small delete\" value=\"Delete\">"));
    } 
```

当单击最后一个表列中的任何按钮时，用户 ID 和新的 accountStatus 值将使用以下方式发送到控制器

```
function manage_user_account(userID,value){
    $.post(url,{
        userID : userID,
        value : value
    },
    function(response){
        if(response.status == 1000){
            alert(response.accountStatus);
            $(this).closest('tr').find('.accountStatus').html(response.accountStatus);

            $("#headMsg").text('Account status has been successfully updated');
            $("#headMsg").show();
        }
        else if(response.status == 1300){
            $("#headMsg").text('Account status updation failed ! Try Again.');
            $("#headMsg").show();
        }
        else if(response.status == 1200){
            $("#headMsg").text('Web server error ! Try Again.');
            $("#headMsg").show();
        }
    },'json');
} 
```

但是该值不会同时更新，它是在重新加载页面后显示的。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:38:38.957

`this`可能是指全局窗口对象。`event.target`从点击处理程序传递到您的函数：

```
$(foo).click(function(event) {
    ...
    manage_user_account(id,val,event.target);
}

function manage_user_account(userID,value,button){
...
    $(button).closest('tr').find('.accountStatus').html(response.accountStatus); 
```

# .htaccess - .htaccess 修改 URL 文件夹

> ID：12545104
> 
> 赞同：1
> 
> 时间：2012-09-22T15:29:26.547
> 
> 标签：.htaccess, mod-rewrite

我有一个网页的 URL，我**`www.MyWeb.com/country/america/1`** 想将其转换**`www.MyWeb.com/america/1`**为***.htaccess***。

url 中的 Country 是一个文件夹，“1”是一个 PHP 文件，扩展名 .php 之前使用 .htaccess 进行了更改。

**我怎样才能做到这一点 ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:43:21.437

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.MyWeb\.com$
RewriteRule (.*) /country/$1 
```

这基本上将每个请求重定向/重写到`www.MyWeb.com/`您`www.MyWeb.com/country/` 摆脱`.php`扩展的相同方式。

# c# - 在剑道折线图上绘制箱形图的点

> ID：12545106
> 
> 赞同：0
> 
> 时间：2012-09-22T15:29:33.927
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-4, kendo-ui

我正在尝试使用 jQuery 语法在剑道折线图上绘制一个正方形。我想我应该能够将一组 x,y 点传递给它，并通过将图表设置为折线图让它们连接起来，但这不起作用。散点图采用 x,y 点数组，并允许我绘制正方形角的点，但如果我将具有相同数据的图表类型更改为“线”，这些点现在将绘制在不同的 y 值上相同的 x 值（即在完全错误的垂直线上）。

是否可以用剑道图绘制箱形图？

（我使用的是 C# MVC4，这并不重要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:16:33.850

线系列是分类的，即点总是按顺序绘制。正如您所指出的，scatterLine 品种是一个 XY 图表，允许绘制任意形状。

不支持组合 XY 和分类图表。如果这是您要实现的目标，请尝试通过添加隐式 X 值将线系列转换为 scatterLine。

请随时在[Kendo UI UserVoice 门户上对内置功能提出建议](http://feedback.kendoui.com/)

# c++ - 绳索数据结构

> ID：12545113
> 
> 赞同：10
> 
> 时间：2012-09-22T15:30:09.293
> 
> 标签：c++, string, data-structures, ropes

我正在阅读绳索数据结构。我对使用 C++ 和 Qt 构建文本编辑器很感兴趣。我的问题是：C++ 等编程语言中的内置字符串操作函数是否使用绳索数据结构？或者我是否需要编写自己的代码来实现绳索，以便更有效地执行连接和删除等字符串操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T15:31:27.410

`std::string`不是绳子，但 SGI STL 提供[`rope`](https://wayback.archive.org/web/20171229113346/http://www.sgi.com:80/tech/stl/Rope.html).

如果您打算实现自己的绳索，我建议您使用[SGI 的绳索实现概述](https://wayback.archive.org/web/20171219030153/http://www.sgi.com:80/tech/stl/ropeimpl.html)了解一些实现细节。

# c - C While 循环用于整数数组

> ID：12545116
> 
> 赞同：3
> 
> 时间：2012-09-22T15:30:41.610
> 
> 标签：c, arrays, while-loop

这是一个菜鸟问题。我有一个名为的数组`Counter[N][N]`，我想做类似的事情：

 ~~~~```
While (each element of Counter < 10000) {do something} 
```~~  ~~```
While (there exists an element of Counter < 10000) {do something} 
```

有没有一种简单的方法可以在 C 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:36:20.137

该函数测试传入的计数器数组是否有小于指定值的元素：

```
bool has_element_less_than(int value, int counter[N][N])
{
    for (int i = 0; i < N; i++)
    {
        for (int j = 0; j < N; j++)
        {
             if (counter[i][j] < value)
                 return true;
        }
    }

    return false;
} 
```

你用吧：

```
if (has_element_less_than(10000, counter))
    do_something(); 
```

您可以通过将 N 作为参数传递给函数来处理 C99 中的可变维度数组。它假定您有`<stdbool.h>`可用的 C99 标头并包含在内。

* * *

这就是你所追求的吗？你提到'While'所以不清楚你是否需要使用`while`循环 - 如果你这样做，我认为这可以完成工作：

```
int i = 0;

while (i < N)
{
    int j = 0;
    while (j < N)
    {
         if (counter[i][j] < 10000)
         {
             counter[i][j] = do_something(i, j, counter[i][j]);
         }
         j++;
    }
    i++;
} 
```

或者，更通俗地说，但使用`for`循环：

```
for (int i = 0; i < N; i++)
{
    for (int j = 0; j < N; j++)
    {
         if (counter[i][j] < 10000)
         {
             counter[i][j] = do_something(i, j, counter[i][j]);
         }
    }
} 
```

请注意，此代码使用 C99；你可以在循环之外声明它，它就变成了 C89 代码`i`。`j`此外，如果出于任何原因您需要`i`或`j`（或者更有可能两者都需要）在循环之后，则需要在循环外声明变量。

带有循环的第二种解决方案`for`是更惯用的 C；循环非常适合这项`for`工作，并且是您应该计划使用的，尤其是因为它将所有循环控件打包在一行中，这与`while`在一行（循环外）有初始化代码的循环解决方案不同，另一个条件，以及第三行的重新初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:37:28.300

你可以做

```
for(int x = 0; x < N; x++) {
    for(int y = 0; y < N; y++) {
        if (Counter[x][y] < 10000){
             //Do something with Counter[x][y]
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T15:33:56.800

这可以用指针很好地完成

```
 while(true)
  {
     int* pEnd = &Counter[0][0] + N*N;
     int* pCurrent = &Counter[0][0];

     bool AnyLess = false;
     while(pCurrent < pEnd && !AnyLess) { AnyLess |= *pCurrent++ < 10000; } 
     if(!AnyLess)
        break;

  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T15:40:39.200

如果您可以编写一个函数，如果所有元素都小于 10000 将返回 1 ：

```
int check_array_lt(int row_count, int col_count, int** array, int value)
{
  int i,j;
  for(i=0;i<row_count;i++)
    for(j=0;j<row_count;j++)
      if (array[i][j]>=value)
        return 0;
  return 1;
} 
```

然后使用它：

```
while( check_array_lt(N,N,counter,10000) ) {
  do something
} 
```

* * *

对于问题的第二个版本（不再是“每个元素 < 10000”，而是“至少一个元素 < 10000”）：

```
int check_array_lt_atleast(int row_count, int col_count, int** array, int value)
{
  int i,j;
  for(i=0;i<row_count;i++)
    for(j=0;j<row_count;j++)
      if (array[i][j]<value)
        return 1;
  return 0;
} 
```

* * *

正如 Jonathan Leffler 所说，这个解决方案只有在动态创建数组时才有效。如果 Counter 被声明为一个 d N 的数组`#define`，那么我的解决方案会在 Jonathan 的解决方案中衰减。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T15:36:00.707

使用嵌套的 for 循环

```
for(i=0;i<N;i++)
for(j=0;j<N;j++){

if(counter[i][j]<10000)
{
//Do something
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T15:36:03.513

那这个呢？

```
 int flag=0;
        for(i=o;i<n;i++)
        {
            for(j=o;j<n;j++)
            {
                if(counter[i][j]<10000)
                    //statements;
                else
                {
                  flag=1;
                    break;
                }

            }
  if(flag==1)
    break;
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-22T15:56:13.660

编辑问题的解决方案

```
 for(i=0;i<N;i++)
    for(j=0;j<N;j++){

    if(counter[i][j]<10000)
    {
       //Do something
    }else
       goto OUT;
    }

    OUT:
    printf("out of loops"); 
```

在我傲慢的意见中

> 去

语句是编程语言中最优雅的构造。如果有人想像比尔盖茨那样成为亿万富翁，他们必须在开发他们的开创性软件时使用大量的 goto。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-22T16:02:00.360

尽管您没有要求 c#，但这是 c# 解决方案，因为它非常简单：

```
 var Counter = new int[N,N];
    while(Counter.Cast<int>.Any(i => i < 10000)) { dosomething(); } 
```~~~~

# encryption - 两个私钥非对称加密 - 可能吗？

> ID：12545124
> 
> 赞同：8
> 
> 时间：2012-09-22T15:32:24.870
> 
> 标签：encryption, public-key-encryption, private-key, public-key, encryption-asymmetric

我想知道是否存在一些可以与两个不同的私钥一起使用的非对称加密算法，以便加密的消息可以被其中一个私钥解密？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T17:54:53.003

非对称密钥从不用于加密*消息*（太慢，有大小限制等），仅用于加密小缓冲区，如消息的对称密钥。

当您使用 asymm 加密消息时。密钥，您实际上是在加密用于加密消息的*对称*密钥。

只需使用两个不同的不对称加密相同的对称密钥。密钥，您将获得两个不同的密码块，它们都包含相同的消息对称密钥，因此您可以使用其中任何一个解密。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T16:29:45.847

您可以在此之上使用对称加密和秘密共享方案，“将密钥分成两半”。

更多关于秘密分享：[http ://en.wikipedia.org/wiki/Secret_sharing](http://en.wikipedia.org/wiki/Secret_sharing)

关于我如何看待它的步骤：

1.  使用（伪）随机生成的密钥加密数据。
2.  [使用Shamir 的秘密共享](http://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing)来分发秘密，这是两份共享的密钥，其中一份就足以获得密钥。

最终结果是需要一个（或多个）“密钥”来获取数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T15:49:37.717

据我所知，没有这样的算法，但有一个通用的解决方案。加密文本与一组用于加密文本本身的对称密钥的密码一起传输。密钥的每个这样的密码是用接收者之一的公钥加密原始密钥的结果。因此，所有知道其私钥的接收者都可以解密用于加密数据的密钥，然后解密消息本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T16:11:51.820

通常使用混合加密方案。即消息用对称密钥密码系统加密，然后对称密钥用每个预期接收者的公钥加密。

# magento - Magento 中是否曾经删除过未转换的报价记录？

> ID：12545128
> 
> 赞同：20
> 
> 时间：2012-09-22T15:32:50.927
> 
> 标签：magento

**tl;dr：似乎没有其他开箱即用的机制来删除从未转换为订单的报价记录。**

该`Mage_Sales`模块有一个计划的作业来清理过期的报价，但这只会删除`sales_flat_quote`标记为非活动（即`is_active = 0`）的记录。据我所知，只有当报价转换为订单时，报价才会被标记为无效。如果是这种情况，那么报价表只会越来越大。

参考[`Mage_Sales_Model_Observer::cleanExpiredQuotes()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Sales/Model/Observer.php#L50)

```
class Mage_Sales_Model_Observer
{
    //...

    public function cleanExpiredQuotes($schedule)
    {
        Mage::dispatchEvent('clear_expired_quotes_before', array('sales_observer' => $this));

        $lifetimes = Mage::getConfig()->getStoresConfigByPath('checkout/cart/delete_quote_after');
        foreach ($lifetimes as $storeId=>$lifetime) {
            $lifetime *= 86400;

            /** @var $quotes Mage_Sales_Model_Mysql4_Quote_Collection */
            $quotes = Mage::getModel('sales/quote')->getCollection();

            $quotes->addFieldToFilter('store_id', $storeId);
            $quotes->addFieldToFilter('updated_at', array('to'=>date("Y-m-d", time()-$lifetime)));
            $quotes->addFieldToFilter('is_active', 0);

            foreach ($this->getExpireQuotesAdditionalFilterFields() as $field => $condition) {
                $quotes->addFieldToFilter($field, $condition);
            }

            $quotes->walk('delete');
        }
        return $this;
    }

    //...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-22T22:08:32.933

用你自己的清理例程覆盖观察者。我们保留特定时间段的特定报价，因此删除 4 层。来宾购物车会重新邮寄并且可以恢复，空的注册客户报价在已完成的报价旁边过期，并且根据观察到的客户行为，带有内容的注册购物车会保存很长时间。

```
<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    Mage
 * @package     Mage_Sales
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/**
 * Sales observer
 *
 * @category   Chief
 * @package    Chief_Sales
 * @author     Magento Core Team <core@magentocommerce.com>
 */

/* Valid for 1.4.2.0, 1.5.1.0 */

class Chief_Sales_Model_Observer extends Mage_Sales_Model_Observer
{
    /**
     * Clean expired quotes (cron process)
     *
     * @param Mage_Cron_Model_Schedule $schedule
     * @return Mage_Sales_Model_Observer
     */
    public function cleanExpiredQuotes($schedule)
    {
        $lifetimes = Mage::getConfig()->getStoresConfigByPath('checkout/cart/delete_quote_after');

        /* Quotes converted to orders */
        foreach ($lifetimes as $storeId=>$lifetime) {
            $lifetime *= 86400;

            $quotes = Mage::getModel('sales/quote')->getCollection();
            /* @var $quotes Mage_Sales_Model_Mysql4_Quote_Collection */

            $quotes->addFieldToFilter('store_id', $storeId);
            $quotes->addFieldToFilter('updated_at', array('to'=>date("Y-m-d", time()-$lifetime)));
            $quotes->addFieldToFilter('is_active', 0);            // Filled Quotes
            $quotes->walk('delete');
        }

        /* Quotes abandoned by Guest Carts */
        foreach ($lifetimes as $storeId=>$lifetime) {
            $lifetime *= 86400;

            // triple lifetime for abandoned cart remail
            $lifetime *= 3;

            $quotes = Mage::getModel('sales/quote')->getCollection();
            /* @var $quotes Mage_Sales_Model_Mysql4_Quote_Collection */

            $quotes->addFieldToFilter('store_id', $storeId);
            $quotes->addFieldToFilter('updated_at', array('to'=>date("Y-m-d", time()-$lifetime)));
            $quotes->addFieldToFilter('is_active', 1);            // Active Quotes
            $quotes->addFieldToFilter('customer_group_id', 0);    // Which are Group NLI (Guest)
            $quotes->walk('delete');
        }

        /* Quotes abandoned by Registered carts no contents */
        foreach ($lifetimes as $storeId=>$lifetime) {
            $lifetime *= 86400;

            $quotes = Mage::getModel('sales/quote')->getCollection();
            /* @var $quotes Mage_Sales_Model_Mysql4_Quote_Collection */

            $quotes->addFieldToFilter('store_id', $storeId);
            $quotes->addFieldToFilter('updated_at', array('to'=>date("Y-m-d", time()-$lifetime)));
            $quotes->addFieldToFilter('is_active', 1);                      // Active Quotes
            $quotes->addFieldToFilter('customer_group_id', array('gt'=>0)); // For all other groups
            $quotes->addFieldToFilter('items_qty', 0);                      // For empty carts
            $quotes->walk('delete');
        }

        /* Quotes abandoned by Registered carts */
        foreach ($lifetimes as $storeId=>$lifetime) {
            $lifetime *= 86400;

            // Registered cart lifetime for abandoned cart remail 7*25 = 175 days
            $lifetime *= 25;

            $quotes = Mage::getModel('sales/quote')->getCollection();
            /* @var $quotes Mage_Sales_Model_Mysql4_Quote_Collection */

            $quotes->addFieldToFilter('store_id', $storeId);
            $quotes->addFieldToFilter('updated_at', array('to'=>date("Y-m-d", time()-$lifetime)));
            $quotes->addFieldToFilter('is_active', 1);                      // Active Quotes
            $quotes->addFieldToFilter('customer_group_id', array('gt'=>0)); // For all other groups
            $quotes->addFieldToFilter('items_qty', array('gt'=>0));         // For expired carts
            $quotes->walk('delete');
        }
        return $this;
    }
} 
```

# java - 在 jUnit 中设置 JNDI 数据源

> ID：12545129
> 
> 赞同：19
> 
> 时间：2012-09-22T15:32:53.127
> 
> 标签：java, junit, jndi

我正在尝试设置一些 jUnit 测试。我们的数据库是由服务器使用 JNDI 连接的。我们在 root.xml 中有一个描述设置的 xml。如何设置 jUnit 以连接到数据库？我更希望它只是从 root.xml 中读取内容，但无论如何我都愿意对其进行设置。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T00:18:38.270

我找到了这个博客： [https ://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit](https://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit)

关于 H2 数据源： [http ://www.h2database.com/javadoc/org/h2/jdbcx/JdbcConnectionPool.html](http://www.h2database.com/javadoc/org/h2/jdbcx/JdbcConnectionPool.html)

所以对于我的代码：

```
package com.example.test;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;

import org.h2.jdbcx.JdbcConnectionPool;

import junit.framework.TestCase;

public class JunitDataSource extends TestCase {

    public void setUp() throws Exception {
        // rcarver - setup the jndi context and the datasource
        try {
            // Create initial context
            System.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.naming.java.javaURLContextFactory");
            System.setProperty(Context.URL_PKG_PREFIXES, "org.apache.naming");
            InitialContext ic = new InitialContext();

            ic.createSubcontext("java:");
            ic.createSubcontext("java:/comp");
            ic.createSubcontext("java:/comp/env");
            ic.createSubcontext("java:/comp/env/jdbc");

            JdbcConnectionPool ds = JdbcConnectionPool.create(
                    "jdbc:h2:file:src/main/resources/test.db;FILE_LOCK=NO;MVCC=TRUE;DB_CLOSE_ON_EXIT=TRUE", "sa", "sasasa");
            // Construct DataSource
            // OracleConnectionPoolDataSource ds = new
            // OracleConnectionPoolDataSource();
            // ds.setURL("jdbc:oracle:thin:@host:port:db");
            // ds.setUser("MY_USER_NAME");
            // ds.setPassword("MY_USER_PASSWORD");

            ic.bind("java:/mydatasourcename", ds);
        } catch (NamingException ex) {
            Logger.getLogger(JunitDataSource.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    public void testSimple() throws Exception {

        // Obtain our environment naming context
        Context initCtx = new InitialContext();

        // Look up our datasource
        DataSource ds = (DataSource) initCtx.lookup("java:/mydatasourcename");

        Connection conn = ds.getConnection();
        Statement stmt = conn.createStatement();

        ResultSet rset = stmt.executeQuery("SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES");

        while (rset.next()) {
          System.out.println("<<<\t"+rset.getString("TABLE_NAME"));
        }

    }

} 
```

**注意**：我必须在 Tomcat 的 bin 目录中添加 Tomcat 库和 jar 才能使其正常工作

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T17:11:38.903

我发现最好的方法是使用一种叫做[Simple-Jndi 的](https://code.google.com/archive/p/osjava/wikis/SimpleJNDI.wiki)东西。

我将此添加到 Maven 文件中：

```
 <dependency>
        <groupId>simple-jndi</groupId>
        <artifactId>simple-jndi</artifactId>
        <version>0.11.4.1</version>
        <scope>test</scope>
    </dependency> 
```

您可以在此处下载软件包，下载内容包含说明手册。 [http://code.google.com/p/osjava/downloads/detail?name=simple-jndi-0.11.4.1.zip&can=2&q=](http://code.google.com/p/osjava/downloads/detail?name=simple-jndi-0.11.4.1.zip&can=2&q=)

添加到您的项目后，您只需按照说明添加几个属性文件。

但是，添加依赖项后，我相信您可以通过编程方式添加 jndi 资源，而不是使用属性文件。你做这样的事情： (new InitialContext()).rebind("datasource",myDatasource);

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-15T07:57:37.560

多年来，我一直为此目的使用**Simple-JNDI 。**它为您提供了 JNDI 服务的内存实现，并允许您使用属性文件中定义的对象填充 JNDI 环境。还支持加载文件中配置的数据源或连接池。

要获得连接池，您必须创建如下文件：

```
type=javax.sql.DataSource
driver=com.sybase.jdbc3.jdbc.SybDriver
pool=myDataSource
url=jdbc:sybase:Tds:servername:5000
user=user
password=password 
```

在您的应用程序中，您可以通过以下方式访问池

```
Context ctx = new InitialContext();
DataSource ds = (DataSource) ctx.lookup("path/to/your/connectionPool"); 
```

您可以在[https://github.com/h-thurow/Simple-JNDI](https://github.com/h-thurow/Simple-JNDI)找到更多相关信息。

**TomcatJNDI 也**有助于解决这种情况。它可以处理 Tomcat 的配置文件并创建与 Tomcat 相同的 JNDI 环境，但无需启动服务器。因此，您可以在例如 JUnit 测试中运行依赖于 Tomcat 的 JNDI 环境的类。

```
TomcatJNDI tomcatJNDI = new TomcatJNDI();
tomcatJNDI.processContextXml(new File(“tomcat-root-dir/conf/context.xml”);
tomcatJNDI.start(); 
```

然后，您的类可以像在 Tomcat 中运行时一样查找 DataSource。

更多关于 TomcatJNDI 的信息可以在这里找到：[https ://github.com/h-thurow/TomcatJNDI](https://github.com/h-thurow/TomcatJNDI)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T09:56:22.020

您想在 Application Server 上以编程方式创建数据源吗？参考：

1.  [从程序创建数据源 JBoss 7](http://www.paykin.info/java/add-datasource-programaticaly-cli-jboss-7/)
2.  [从程序创建数据源 Weblogic](http://www.snippets.24bytes.com/2012/07/creating-jdbc-data-source-on-weblogic.html)

如果您已经在服务器上创建，

```
public class YourTestCase {
    private java.sql.Connection conn;

    @BeforeClass
    public static void init() {
        /* Weblogic */
        try {
            Context ctx = null;
            Hashtable ht = new Hashtable();
            ht.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
            ht.put(Context.PROVIDER_URL, "t3://<your-host>:<your:post>");
            ctx = new InitialContext(ht);
            javax.sql.DataSource ds = (javax.sql.DataSource) ctx.lookup ("<your-datasource-jndi-name>");
            conn = ds.getConnection();
        } catch(Exception e) {

        }
        /* JBoss 5*/
        Context.INITIAL_CONTEXT_FACTORY ---> org.jnp.interfaces.NamingContextFactory
        Context.PROVIDER_URL ---->http://localhost:1099
    }
    @AfterClass
    public static void finished() {
    }

    @Test
    public void testMethod() {
        try {
            Statement stmt = conn.createStatement();
            stmt.execute("select * from someTable");
            ResultSet rs = stmt.getResultSet();  
                // do operation
            stmt.close();
            conn.close();
            } catch (Exception e) {
                // a failure occurred
            } finally {
                try {ctx.close();
                } catch (Exception e) {
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-26T14:03:43.443

您可以使用下面的 maven 依赖项添加 Tomcat 库，以使其正常工作。

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>catalina</artifactId>
    <version>6.0.18</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T15:03:32.503

我认为您应该尝试模拟数据库。使用适当的框架，例如 Mockito，它创建模拟并具有 DI 能力。

# php - php中的唯一标识字符串

> ID：12545130
> 
> 赞同：0
> 
> 时间：2012-09-22T15:33:00.810
> 
> 标签：php

目前我和我的朋友正在开发一个网站，对于我们称之为“项目”的项目，我们在数据库中只有一个基本的自动增量 ID，用于导航到项目，例如

```
oururl.com/viewproject?id=1 
```

但我们开始思考，如果我们有很多已发布的项目，那将是一个长 URL。所以我们需要以某种方式随机生成一个大约 6 个字符长的字母数字字符串。我们希望字符串被复制的机会极低，当然我们会在分配标识符之前查询数据库。感谢您的帮助，意义重大！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:37:40.950

将数字 ID 保存在数据库中以提高速度。使用将这些数字 ID 转换为字母数字 ID 的算法。

这样，您不必担心重复，并且您仍然可以在数据库中获得非常快速的索引。

看到这个答案： [https](https://stackoverflow.com/a/12479939/362536) ://stackoverflow.com/a/12479939/362536 这个问题： [Tinyurl-style unique code: potential algorithm to prevent collisions](https://stackoverflow.com/q/1257825/362536)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:36:15.207

您总是可以使用 PHP**[`uniqid()`](http://php.net/uniqid)**生成随机字符串，然后使用**[`substr()`](http://php.net/substr)**.

```
$unique_six_character_id = substr(uniqid(), 0, 6); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:36:45.900

尝试这个：

```
 $id = substr(md5(uniqid()), 0, 6); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T15:45:50.917

您可以使用此代码生成动态 6 位数字......

```
$random = substr(number_format(time() * rand(),0,'',''),0,6); 
```

下面是代码发生的情况： 外部“substr”用于将我们创建的随机数减少为 6 个字符。您会注意到代码段末尾的数字 10，可以将其更改为您想要的任何数字。

“number_format”函数有助于摆脱生成随机数所产生的科学记数法。在中间，“time()”和“rand()”相乘。Time() 是从 1970 年 1 月 1 日开始的秒数，rand() 是通过 PHP 唯一生成的数字。

永远记住，生成唯一数字并不是万无一失的。如果您的应用程序要求每个编号都是唯一的，请在保存之前在数据库中执行冲突检查。

# java - 来自资产的图像的Android内存泄漏

> ID：12545131
> 
> 赞同：0
> 
> 时间：2012-09-22T15:33:02.263
> 
> 标签：java, android, memory-leaks

我从资产中获取图像并分配给 imageView，一切正常，但是当我看到堆内存大小时，当我一次又一次地加载同一页面时，它会继续增长，下面是我用来从资产文件夹中获取图像的代码。

```
private Bitmap getBitmapFromAsset(String strName) throws IOException
{
    AssetManager assetManager = getAssets();

    InputStream istr = assetManager.open(strName);
    Bitmap bitmap = BitmapFactory.decodeStream(istr);

    return bitmap;
}

    //Code to assign bitmap to imageview
    ImageView itemImage = (ImageView) findViewById(R.id.itemImage);
    try {
        Bitmap bm = getBitmapFromAsset("full/" + Uri.parse(menuItem.getFullImage()).getLastPathSegment());
        itemImage.setImageBitmap(bm);
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

这就是我正在做的所有事情，有没有我需要回收位图的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:06:22.003

在你的 onDestroy 添加

```
 @Override
        public void onDestroy()
        {

            super.onDestroy();
            if(bm != null)
            {
                bm.recycle();

            }
} 
```

另外进行内存转储并使用[MAT](http://www.eclipse.org/mat/)分析转储。如果您需要帮助，请参阅此视频[教程](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=video&cd=2&cad=rja&ved=0CDsQtwIwAQ&url=http://www.youtube.com/watch?v=_CruQY55HOk&ei=I-FdUOq5IMW3rAe13ICoDA&usg=AFQjCNEfUDM7yYu-Cb6hrLjEOm5xk29LkA&sig2=zVXzyxwz7xuSwrzT72jsPg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:37:20.590

一旦检查这个

完成使用位图后，使用以下语句 bm = null; 并编写 System.gc(); 在 ondestroy() 中（如果需要在 onPause() 中），看看是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:16:10.127

`Bitmap`使用对象后，您需要调用`recycle()`释放本机资源的方法。

[位图#recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)

> 释放与此位图关联的本机对象，并清除对像素数据的引用。这不会同步释放像素数据；如果没有其他引用，它只是允许它被垃圾收集。该位图被标记为“死”，这意味着如果调用 getPixels() 或 setPixels() 将引发异常，并且不会绘制任何内容。此操作无法反转，因此只有在您确定位图没有进一步用途时才应调用它。这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T05:48:32.757

实际上，我正在使用一个由所有活动扩展的父活动，并且该活动已向 LocationListener 注册，因此 LocationListener 正在防止该活动被破坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-17T22:37:21.390

In addition to what have been said I would close the asset stream because depending on the platform you are running on the asset might not be closed automatically. And even if it is you are keeping the file descriptor around for longer than you need it. It is a limited resource, so something else might went south as a result.

# java - Java：基于 Web 的应用程序中的单例类实例

> ID：12545134
> 
> 赞同：8
> 
> 时间：2012-09-22T15:33:40.980
> 
> 标签：java, singleton

我在 Web Application 中有这个 Singleton 类。

```
public class MyDAO 
 {

    private static MyDAO instance;

    private MyDAO() {
    }

    public static MyDAO getInstance() {
        if (instance == null) {
            instance = new MyDAO();
        }
        return instance;
    } 
```

**我将以这种方式访问​​它**

```
public void get_Data()
{

        MyDAO dao = MyDAO.getInstance();
} 
```

如果有 3 个用户访问应用程序，将创建多少个 MyDAO 类的对象？

每个用户会有一个 MyDAO 实例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T15:36:21.713

您必须同步对`getInstance()`. 否则，某些线程可能会看到未完全初始化的版本。

更多关于[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)

同步后，. 文件中将只有一个实例`JVM`。无论有多少变量引用对象。但是，如果您正在运行 N 个服务器，那么每个`JVM`. 所以总共N个实例。

您可以仔细检查您是否正在使用`Java 5.0`或更旧：

```
private static volatile MyDAO();
 public synchronized static MyDAO getInstance() {
    if (instance == null) {
        instance = new MyDAO();
    }
    return instance; 
```

但是，如果您的应用程序总是需要一个实例，您可以急切地实例化它：

```
private static MyDAO = new MyDAO(); 
```

但我会寻求`Bill Purge`解决方案：

```
 private static class MyDAOHolder { 
            public static final MyDAO INSTANCE = new MyDAO();
    }

    public static MyDAO getInstance() {
            return MyDAOHolder.INSTANCE;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:36:35.370

不，每个 JVM 一个。注意线程安全。

我会阅读“Effective Java”并遵循有关如何正确编写单例的建议。不是你的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:36:12.387

只有一个，那就是单例的定义。

要同步实例化，请确保您只返回要使用的完整对象：

```
private static Object semaphore = new Object();
public static MyDAO getInstance() {
    synchronized(semaphore)
        if (instance == null) {
            instance = new MyDAO();
        }
    }
    return instance;
} 
```

# iphone - 如何为新项目“重置”滚动视图的子视图？

> ID：12545141
> 
> 赞同：0
> 
> 时间：2012-09-22T15:35:40.940
> 
> 标签：iphone, xcode, uiscrollview, subview

我有一个显示项目的 MasterViewController。选择一个项目 (ItemA)，在 DetailViewController 中显示 ItemA 的图像。DeutilViewController 包含一个滚动视图，显示所有图像。

当调用 tableView:didSelectRowAtIndexPath 时，图像被添加到 UIImageView，它被标记并作为子视图添加到滚动视图。

```
NSUInteger i;
for (i = 1; i <= numberOfImages; i++)
{
     NSString *imageName = [ItemAImages objectAtIndex:i-1];
     UIImage *image = [UIImage imageNamed:imageName];
     UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
     imageView.tag = i; 
     [scrollView addSubview:imageView];
} 
```

工作正常。但是当我回到 MasterViewController 并选择一个 ItemB 时，仍然显示 ItemA，就像 iPhone 模拟器拒绝忘记先前包含 ItemA 图像的滚动视图一样。我试过了

```
for(UIView *subview in [scrollView subviews])
    {
        [subview removeFromSuperview];
    } 
```

这导致根本没有滚动视图，或者没有效果。取决于何时调用此方法。如何“重置”下一个项目的滚动视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:41:55.643

您必须删除滚动视图的每个子视图。

所以你不能调用`removeFromSuperview`它`scrollView`本身，而是调用它的每个子视图。

当你这样做时要小心，因为你的子视图数组（由返回`scrollview.subviews`）会在你迭代它并删除子视图时发生变化。所以最好复制这个子视图列表并在该副本上迭代：

```
NSArray* subviews = [scrollview.subviews copy];
for(UIView* v in subviews)
{
    [v removeFromSuperview];
}
[subviews release]; 
```

* * *

*注意：始终避免修改您正在迭代的集合。还因为您将冒险跳过枚举中的某些对象。例如，如果您有一个数组`@[A,B,C,D,E]`并遍历内容以删除对象，您的代码可能会说“删除索引 0 处的对象，然后是索引 1 处的对象，然后是索引 2 处的对象......但是一旦你删除了索引 0 处的对象，集合将更改为`@[B,C,D,E]`，索引 1 处的数组将是 C，而不是您将跳过的 B。一旦删除索引 1 处的对象，您的集合将变为`@[B,D,E]`并删除索引处的对象2 next 将导致`@[B,D]`......我不知道这是否是您的问题的原因，这会让您错过一些子视图，但如果您这样做，它可能会解释为什么它没有*

# javascript - 分离 Spring 和 Dojo 单页应用程序代码库

> ID：12545142
> 
> 赞同：1
> 
> 时间：2012-09-22T15:35:43.980
> 
> 标签：javascript, spring, dojo, directory-structure

我正在开发一个带有 Spring Roo REST API 后端和 Dojo 单页客户端应用程序的 Web 应用程序。Spring Roo 提供了一个方便的管理界面（带有 Web MVC）开箱即用，所以我想保持它对管理职责的可访问性。

但是，我希望 Dojo 应用程序尽可能与服务器应用程序分离。服务器是我们期望开发新客户端应用程序的平台，因此我想单独开发“官方”客户端 Web 应用程序。

构建应用程序代码的最佳（或什至只是一种好）方法是什么？将服务器单独用作 API 和管理界面很容易，但是所有 Dojo JS 都存在于哪里？它在 Spring webapp 目录中可以正常工作，但是一旦结构变得更复杂或移动到其他任何地方，它就会很快变得复杂（Spring URL 映射对我来说仍然非常不透明）。理想情况下，它可以本地托管在开发机器上，这也引入了所有跨域 JS 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:22:07.433

由于后一个版本的 dojo 工具包问世，我们实际上不必区分同域和跨域 javascript 模块。使用 dojo 加载器，您可以从任何地方拉入模块。

我建议创建自己的命名空间，例如`com.yourmodule`，然后在配置中引用它的位置。例如; 您可以为 js 应用程序创建一个主机“arbitrary.domain”并将其放在“/com/yourmodule/”文件夹中。com.yourmodule.application 包含应用程序的引导和初始化。此 ofc 将位于文件“/com/yourmodule/application.js”中。

第一个要求（或通过 dojoConfig）您指定包声明，指向命名空间位置，有点像这样 - 遵循上面的示例命名约定。

```
require({ packages : [
    { 
       name: 'com.yourmodule', 
       location: 'http://arbitrary.domain/com/yourmodule'
    }
]}, [ "com/yourmodule/application" ], function(Application) {

    window.application = new Application();

}); 
```

# string - 在 Vala 中将 Pango 字体描述转换为字符串

> ID：12545150
> 
> 赞同：0
> 
> 时间：2012-09-22T15:36:15.870
> 
> 标签：string, vala, pango

我正在尝试将从 GTK 3 中的字体选择器对话框返回的 Pango 字体描述转换为字符串，但是 C 函数：
`pango_font_description_to_string()`
不起作用，因为它是一种不同的语言。我在网上搜索了答案，但没有结果。有谁知道如何将 Pango 字体描述转换为字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:48:13.837

[文档](http://www.valadoc.org/#!api=pango/Pango.FontDescription)应该包含您需要知道的所有内容。

对于获取字符串表示，它是`my_description.to_string()`，对于反向（来自字符串的描述），它应该是

```
var my_description = FontDescription.from_string("Description"); 
```

# ruby-on-rails - 安装狂欢的导轨没有按预期工作

> ID：12545162
> 
> 赞同：0
> 
> 时间：2012-09-22T15:37:09.280
> 
> 标签：ruby-on-rails, imagemagick, spree

# 错误

```
/Users/Username/.rvm/gems/ruby-1.9.3-p194/gems/spree_cmd-1.2.0/lib/spree_cmd/installer.rb:189: warning: Insecure world writable dir /usr/local/mysql/bin in PATH, mode 040777
dyld: Library not loaded: /usr/X11/lib/libfreetype.6.dylib
  Referenced from: /usr/local/bin/identify
  Reason: Incompatible library version: identify requires version 14.0.0 or later, but libfreetype.6.dylib provides version 13.0.0
sh: line 1:   212 Trace/BPT trap          identify -version > /dev/null
Image magick must be installed. 
```

# 怀疑

我已经使用 homebrew 安装了最新版本的 imagemagick，但仍然面临同样的错误。请帮忙，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:23:33.830

看到这个[答案](https://stackoverflow.com/questions/9537011/imagemagick-issue-on-lion-installed-with-homebrew)：

> 我遇到了同样的问题。在操作系统上运行软件更新为我解决了这个问题。libfree 的版本已过时。Paperclip、ImageMagick 和 Homebrew 都运行良好。

因此，请尝试更新您的操作系统，然后重新安装 magick：

```
brew update
brew remove imagemagick
brew install imagemagick 
```

# sql - SQL Server 自动空格

> ID：12545164
> 
> 赞同：2
> 
> 时间：2012-09-22T15:37:17.130
> 
> 标签：sql, sql-server, spaces, sqldatatypes

我在 Microsoft SQL Server Management Studio 中创建了一个表，其中包含一个数据类型`nchar(100)`。

如果我在其中放入一些数据，那么它会自动在我的单词末尾添加空格，我猜想适合 100..

我该如何编辑它以使其不添加空格？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T15:38:58.610

`NCHAR`并且`CHAR`是*固定*大小的类型——这意味着如果插入的数据不够大，就会插入空格。

您需要将字段的类型更改`NVARCHAR`为可变长度数据。

有关详细信息，请参阅MSDN 上的[nchar 和 nvarchar (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186939.aspx#)。

# objective-c - 使用委托通过多个视图控制器传回数据

> ID：12545167
> 
> 赞同：2
> 
> 时间：2012-09-22T15:37:38.960
> 
> 标签：objective-c, ios, delegation

在 IOS 中，我很乐意在视图之间传递数据，这些视图直接在使用 prepareforsegue 向前传递数据和委托将其传递回来之间进行分隔。

我遇到的问题是我正在构建一个通过 4 个视图分隔的应用程序，然后当用户在第四个视图上按 Enter 时，我弹出其余视图以返回到第一个视图控制器和它的视图，但是我不知道如何将数据委托给第一个。

我相信问题在于在第一个视图控制器中设置委托。我无法像通常使用 segue.destinationviewcontroller 那样设置它，因为该视图控制器尚不存在。我应该把它设置在别的地方吗？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:08:04.533

[在这种情况下，考虑使用NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)在视图控制器之间进行通信，而不是使用委托来传递数据。

在您的第一个视图控制器中，您将注册以侦听通知：

```
- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(handleFourthViewSubmit:)        
                                                 name:@"fourthViewSubmit" 
                                               object:nil];
} 
```

并创建发送通知时要运行的方法：

```
- (void)handleFourthViewSubmit:(NSNotification *)notification {
    NSDictionary *theData = [notification userInfo];  // theData is the data from your fourth view controller

    // pop views and process theData

} 
```

在您的第一个视图控制器的 dealloc 方法中，请务必取消注册为观察者（以避免潜在的崩溃）：

```
-(void) dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
} 
```

然后在您的第四个视图控制器中，在按下回车按钮时广播通知：

```
// note: dataDict should be an NSDictionary containing the data you want to send back to your first view controller
[[NSNotificationCenter defaultCenter] postNotificationName:@"fourthViewSubmit" 
                                                    object:self 
                                                  userInfo:dataDict]; 
```

# android - 如何修复错误？

> ID：12545170
> 
> 赞同：1
> 
> 时间：2012-09-22T15:37:46.363
> 
> 标签：android, audio

我读了 Hello Android 书。该程序将播放我在原始文件夹中复制的声音，但该程序未运行并出现错误。

错误：

activity_main 无法解析或不是字段

temp 无法解析或不是字段

音频.java

```
package org.example.audio;
import android.app.Activity;
import android.media.MediaPlayer;
import android.view.KeyEvent;
import android.os.Bundle;

public class Audio extends Activity{
    private MediaPlayer up;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);
        up=MediaPlayer.create(this,R.raw.Guilty);
    }

    @Override
    public boolean onKeyDown(int keyCode,KeyEvent event){
  MediaPlayer mp;
      switch(keyCode){
  case KeyEvent.KEYCODE_DPAD_UP:
      mp=up;
      break;
  default:
      return super.onKeyDown(keyCode, event);
}
mp.seekTo(0);
mp.start();
return true;
    }
} 
```

请帮助我修复错误。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:39:48.140

删除线

```
import android.R; 
```

并为适当的包导入 R

在这一行

```
setContentView(R.layout.activity_main); 
```

删除整行并键入直到 setContentView(R 并给出 ctrl+space 。您将要求导入几个包，其中需要导入包含您的项目名称的包（而不是 android.R）

否则删除行 import android.R; 并简单地清理项目并构建它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:39:11.983

首先删除该行：

```
import android.R; 
```

然后，如果您使用的是 Eclipse，请尝试清理您的项目：

**项目**->**清理...**

如果您的资源文件之一出现错误，Eclipse 会`android.R`在您按下`Ctrl`++时自动`Shift`导入该文件`O`，这*令人沮丧*。仔细检查**包资源管理器**”窗口中文件夹上的错误图标，`res`并修复在那里可能发现的任何错误。

* * *

该`R`文件是任何 Java / Android 项目的一个组成部分。它是编译器存储资源引用的地方，例如`activity_main`布局和`temp`声音文件。通过导入外部`R`文件，您在尝试使用`R`引用 ( `R.layout.activity_main`) 的任何地方都会收到错误消息，因为您正试图在另一个项目中查找它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T15:43:21.527

这是因为系统无法解析您的 R.java 文件。你使用 android.R 并调用你的资源。所以删除 android.R 然后清理并构建项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T16:27:38.210

感谢您的回答。我删除了 import android.R 并在 res/raw 中复制了另一首歌曲。（我编辑了我的第一篇文章）但程序有两个错误。

有罪无法解决或不是一个领域

当我用临时音乐删除 android.R 时，程序运行但没有声音。我用另一种声音改变声音并且程序没有运行:((为什么？

资源/布局/activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />
</RelativeLayout> 
```

# sql-server-2008 - 如何在 SQL Server 2008 中将具有 varchar 数据类型的列设置为唯一？

> ID：12545171
> 
> 赞同：0
> 
> 时间：2012-09-22T15:37:53.060
> 
> 标签：sql-server-2008

桌子`ApprovedLeave`

列名：

*   `EmployeeID (int)`
*   `Leave(varchar(MAX))`
*   `Approved(bit)`

我想将`Leave`列设置为唯一，以便用户不能两次输入相同的日期。我不能将员工 ID 作为主键，因为同一员工可以多次请假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:00:19.347

创建日期列。SQL Server 2008 有一个新的`date`数据类型，而不是使用`datetime`. 不要使用 a`varchar(max)`来表示日期。

```
LeaveDate ( date ) 
```

现在您的主键必须包含新列。

```
alter table ApprovedLeave add constraint PK_ApprovedLeave primary key ( EmployeeID, LeaveDate ); 
/* don't forget to drop it if already exists */ 
```

这意味着您可以为同一员工输入多条记录，但不能在同一日期输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:03:15.007

既然您说 Leave 代表一个日期范围，您可以将您的表格表示为

```
EmployeeID  int
LeaveStart  date
LeaveEnd    date
Approved    bit 
```

...并使 EmployeeID、LeaveStart 和 LeaveEnd 成为复合唯一索引的组成部分。

但这只能解决您真正问题的一部分，即您不希望员工在重叠的时间段休假。（完全相同的开始日期和结束日期是重叠的特例）。考虑这些记录：

```
Employee ID = 101, LeaveStart = 1/1/2012, LeaveEnd = 2/1/2012 
Employee ID = 101, LeaveStart = 1/1/2012, LeaveEnd = 2/2/2012 
```

这将满足您的独特约束，但仍然是非常错误的。

您可以使用触发器或涉及 UDF 的约束或通过调用程序中非常仔细的业务逻辑来解决此问题，但索引是不够的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:04:04.640

基于 doublesharp 的答案，您必须将 Leave 列数据类型转换为 datetime。根据该列中已经存在的日期值的格式，您将不得不[稍微调整代码以处理格式](http://msdn.microsoft.com/en-us/library/ms187928.aspx)：

```
-- // Add new column using correct data type
alter table [tablename] add Leave_New datetime not null
go
-- // populate it from existing column:
update [tablename] set Leave_New = convert(datetime, [Leave], 1)
go

-- // Add the unique constraint:
ALTER TABLE [tablename]
ADD CONSTRAINT [unique_leave] UNIQUE NONCLUSTERED
(
    [EmployeeID], [Leave_new]
)

-- // After you verify that the above is successful, you can drop the old column, and rename the new one: 
alter table [tablename] drop column [Leave]
go
exec sp_RENAME '[tablename].Leave_New', 'Leave' , 'COLUMN' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T15:41:16.943

您需要`UNIQUE CONSTRAINT`在多列上使用 a -`EmployeeID`和`Leave`. 仅将`Leave`列设置为唯一意味着它将被强制执行`EmployeeID`，而我假设您希望允许不同的员工使用相同的`Leave`日期。

```
ALTER TABLE [tablename]
ADD CONSTRAINT [unique_leave] UNIQUE NONCLUSTERED
(
    [EmployeeID], [Leave]
) 
```

# python - Python中的数字排列

> ID：12545173
> 
> 赞同：0
> 
> 时间：2012-09-22T15:37:58.080
> 
> 标签：python, string, permutation

我有数字 0-9 的四位排列，所有这些都存储在一个大列表中。 `(0, 1, 2, 3)(0, 1, 2, 4)(0, 1, 2, 5)(0, 1, 2, 6), etc`.

但！我希望这些以不同的方式存储。我想要`0123, 0124, 0125, 1026, etc`。如何更改使列表中的每个项目加入单个项目？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T15:41:12.073

```
>>> reduce(lambda x, y: x * 10 + y, (0, 1, 2, 3))
123

>>> '%04d' % (reduce(lambda x, y: x * 10 + y, (0, 1, 2, 3)),)
'0123' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T15:41:47.177

假设“数字”是字符串（而不是整数），请这样做：

```
result = map(''.join, long_list) 
```

或者，这适用于字符串和整数：

```
result = map('{[0]}{[1]}{[2]}{[3]}'.format, longlist) 
```

或者使用 itertools.imap() 来提高性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T15:49:22.010

试试这个：

```
[ reduce(lambda x,y: str(x) + str(y), list) for list in lists] 
```

加入版：

```
[ reduce(lambda x,y: ''.join((x,y)), map(str,list)) for list in lists] 
```

整数的两个版本，如果元素是字符串跳过映射到字符串:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T15:41:07.610

使用带有格式的列表推导：

```
>>> l=[(0, 1, 2, 3), (0, 1, 2, 4), (0, 1, 2, 5), (0, 1, 2, 6)]
>>> ['{}{}{}{}'.format(*t) for t in l]
['0123', '0124', '0125', '0126'] 
```

适用于元组中的整数或字符串：

```
>>> l=[(0, 1, 2, 3), (0, 1, 2, 4), (0, 1, 2, 5), (0, 1, '2', 6)]
>>> ['{}{}{}{}'.format(*t) for t in l]
['0123', '0124', '0125', '0126'] 
```

如果你想要整数，你可以在 LC 的输出上使用 map：

```
>>> map(int,['{}{}{}{}'.format(*t) for t in l])
[123, 124, 125, 126] 
```

`join`如果元组可能是可变长度的，则使用：

```
>>> l=[(0, 1, 2, 3), (0, 1, 2, 4), (0, 1, 2, 5), (0, 1, '2')]
>>> [''.join(map(str,t)) for t in l]
['0123', '0124', '0125', '012'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T16:02:58.470

```
In [11]: seq = [(0, 1, 2, 3), (0, 1, 2, 4), (0, 1, 2, 5), (0, 1, 2, 6)]

In [12]: [''.join(map(str, item)) for item in seq]
Out[12]: ['0123', '0124', '0125', '0126'] 
```

# ios - 在 IOS 中提交我的第一个应用程序时更改 Xcode 中的包标识符

> ID：12545174
> 
> 赞同：104
> 
> 时间：2012-09-22T15:38:03.777
> 
> 标签：ios, xcode

我正在尝试提交我的第一个应用程序`iOS`。我已经进入`iOS Provisioning Portal`，我即将创建一个应用 ID。

假设我命名我的包标识符：

```
com.mycompany.appdemo 
```

然后转到 Xcode 并在摘要部分中我想更改捆绑标识符。

但我不能抹去那里写的东西，只能抹去它的开头。我的应用程序名称为灰色，我无法删除或更改它。

所以我看到灰色的东西是这样`App-Demo`的，这是左侧的项目名称。

我的问题是：这是一个问题吗？我是否必须创建一个名为`com.mycompany.App-Demo`或其他名称的新应用程序 ID？

这里还有一张图片。 ![在此处输入图像描述](../Images/af56a6e0b41184ce6dfc341051c3dd7d.png) 如您所见，我只能编辑第一部分。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-09-22T18:40:38.417

默认情况下，Xcode 将包标识符设置为您在项目创建期间设置的包/公司标识符 + 项目名称。

![项目创建 - 捆绑/公司标识符 + 产品名称](../Images/0cc5b0b7e47a2abbd87d3327af4de7e2.png)

这类似于您在“项目”>“摘要”屏幕中看到的内容。

![项目 > 总结](../Images/42b7b83ed363fab8cc4c7b3f0e157c7f.png)

但是您可以在 Project > Info 屏幕中更改它。（这是 Info.plist。）

![项目 > 信息](../Images/7b866d220e2cb223390e548ea4ca7fa7.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-07T17:21:46.807

我知道它已经晚了，但它可能对需要更改应用程序的捆绑标识符的人有所帮助。在查找器中转到项目文件夹：

```
the project file --> Right click on your project file '*.xcodeproj' 
```

![在此处输入图像描述](../Images/c54207e237f12697995bafe76d368c6b.png)

```
--> choose 'Show Package Contents' 
--> Double click to open 'project.pbxproj' file 
```

![在此处输入图像描述](../Images/c1aa7e61cdd612afbe3fc952ba0dc700.png)

```
--> find 'productName = NAME_YOU_WANT_TO_CHANGE' in the 
    '/* Begin PBXNativeTarget section */' 
```

${PRODUCT_NAME:rfc1034identifier} 变量将替换为您输入的名称，并且新的 Bundle Identifier 将更新为您需要的名称。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-12-16T03:24:08.263

这是Apple官方文档中的答案，刚刚尝试过，它正在工作。

**设置捆绑 ID**

Xcode 项目中的默认捆绑包 ID 是格式为反向域的字符串，例如*com.MyCompany.MyProductName*。为了创建默认的捆绑 ID，Xcode 将公司标识符与您在从模板创建项目时输入的产品名称连接起来，如[创建 Xcode 项目时设置属性](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/ConfiguringYourApp/ConfiguringYourApp.html#//apple_ref/doc/uid/TP40012582-CH28-SW11)中所述。（Xcode 替换产品名称中的空格以创建默认捆绑 ID。）替换捆绑 ID 中的公司标识符前缀可能就足够了，或者您可以替换整个捆绑 ID。例如，更改公司标识符前缀以匹配您的公司域名或替换整个捆绑 ID 以匹配显式 App ID。

对于 Mac 应用程序，请确保每个包 ID 在您的应用程序包中都是唯一的。例如，如果您的 app bundle 包含一个帮助应用，请确保其 bundle ID 与您的应用的 bundle ID 不同。

按照以下步骤在项目编辑器的“常规”窗格中更改捆绑 ID 前缀。

**设置捆绑 ID 前缀**

1.  在项目导航器中，选择项目和您的目标以显示项目编辑器。

2.  单击常规，如有必要，单击身份旁边的显示三角形以显示设置。

![在此处输入图像描述](../Images/6b16669850f4558290ae8e2e4fd6d5fc.png)

3.  在“Bundle Identifier”字段中输入捆绑 ID 前缀。

**设置捆绑 ID**

1.  在项目导航器中，选择项目和您的目标以显示项目编辑器。

2.  单击信息。

3.  在“捆绑标识符”行的值列中输入捆绑 ID。

![在此处输入图像描述](../Images/f5094fee738ed31060c04a709e1e290a.png)

如果您有兴趣阅读更多内容，请查看Apple 的[APP Distribution Guide](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/ConfiguringYourApp/ConfiguringYourApp.html#//apple_ref/doc/uid/TP40012582-CH28-SW1)。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-04-10T02:27:55.567

只需在项目的构建设置中更改**产品名称。**这将更改捆绑标识符，而无需手动触摸 xcode 配置文件。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-11-20T19:07:31.677

在这种情况下，只需单击项目导航器窗口的顶部即可编辑项目名称。你不需要尝试任何其他的东西。:)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-12-05T18:27:18.813

这解决了我的问题。

只需从 Build Setting更改**Bundle 标识符。**

```
 Navigate to Project >> Build Setting >> Product Bundle Identifier 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-11-09T01:53:08.893

实际上你可以在**Build Settings**中改变它；在底部有一个“**用户定义**”部分，您可以在其中轻松更改**PRODUCT_BUNDLE_IDENTIFIER。**

我更喜欢这种方式，因为如果您更改 info 变量，您将更改对另一个值的引用。

[![在此处输入图像描述](../Images/bf18e91244f63ea2f2ee1c6b79e790f0.png)](https://i.stack.imgur.com/Og9eZ.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-22T11:03:05.933

一个非常简单的解决方案是打开文件：

```
YOURPROJECT.xcodeproj/project.pbxproj 
```

并找到这个变量：

```
PRODUCT_BUNDLE_IDENTIFIER 
```

你会看到类似的东西：

```
PRODUCT_BUNDLE_IDENTIFIER = com.YOUR_APP_NAME.SOMETHING; 
```

所以，右边的名字就是你的 Bundle Identifier。就我而言，它工作得很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-28T14:44:22.267

在 XCode 7 中，您可以通过双击目标并更改名称来更新您的包标识符。 [![在此处输入图像描述](../Images/4eb9239869633ee4021a7f18f4a00df4.png)](https://i.stack.imgur.com/hweyZ.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-10T15:11:09.807

Xcode 7

选择项目的根节点 -> 在编辑器中单击项目名称 -> 选择目标 -> 身份 -> 捆绑标识符

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-13T11:43:16.783

如果您正在开发 Cordova 应用程序，请确保同时更改版本和包`config.xml`标识符

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-07T21:32:47.153

[查看此图片以了解如何更改捆绑标识符](https://i.stack.imgur.com/iovIJ.jpg)

**解释：**

1.  从最左侧的项目导航器中选择您的项目
2.  在 General 选项卡下，有一个名为 Targets 的部分，您将在其中看到项目的名称。单击名称。
3.  然后您将能够看到您可以更改的捆绑标识符，如下所示：

如图所示，我的 App 的名称是 PracticeApp。我的包标识符是： **com.hello500.PracticeApp**

在这种情况下，您可以更改**hello500**以更改应用程序的捆绑标识符。

# asp.net-mvc - MVC 4 忽略 DefaultModelBinder.ResourceClassKey

> ID：12545176
> 
> 赞同：23
> 
> 时间：2012-09-22T15:38:29.080
> 
> 标签：asp.net-mvc, localization, asp.net-mvc-4, model-binding

`App_GlobalResources`使用键添加资源文件`PropertyValueRequired`并更改`DefaultModelBinder.ResourceClassKey`为文件名对 MVC 4 没有影响。字符串`The {0} field is required`永远不会更改。我不想在每个必填字段上设置资源类类型和键。我错过了什么吗？

**编辑：**

我对 Darin Dimitrov 的代码做了一个小的修改，以保持所需的自定义工作：

```
public class MyRequiredAttributeAdapter : RequiredAttributeAdapter
{
    public MyRequiredAttributeAdapter(
        ModelMetadata metadata,
        ControllerContext context,
        RequiredAttribute attribute
    )
        : base(metadata, context, attribute)
    {
        if (attribute.ErrorMessageResourceType == null)
        {
            attribute.ErrorMessageResourceType = typeof(Messages);
        }
        if (attribute.ErrorMessageResourceName == null)
        {
            attribute.ErrorMessageResourceName = "PropertyValueRequired";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-22T17:17:32.850

这不是 ASP.NET MVC 4 特有的。在 ASP.NET MVC 3 中也是如此。您不能使用 设置所需的消息`DefaultModelBinder.ResourceClassKey`，只能使用`PropertyValueInvalid`.

实现您正在寻找的一种方法是定义一个自定义`RequiredAttributeAdapter`：

```
public class MyRequiredAttributeAdapter : RequiredAttributeAdapter
{
    public MyRequiredAttributeAdapter(
        ModelMetadata metadata,
        ControllerContext context,
        RequiredAttribute attribute
    ) : base(metadata, context, attribute)
    {
        attribute.ErrorMessageResourceType = typeof(Messages);
        attribute.ErrorMessageResourceName = "PropertyValueRequired";
    }
} 
```

您将在以下位置注册`Application_Start`：

```
DataAnnotationsModelValidatorProvider.RegisterAdapter(
    typeof(RequiredAttribute),
    typeof(MyRequiredAttributeAdapter)
); 
```

现在，当一个不可为空的字段没有被赋值时，错误信息将来自`Messages.PropertyValueRequired`where `Messages.resx`must be defined inside `App_GlobalResources`。

# objective-c - 为什么数组中的removeObjects无法删除另一个数组中的所有对象？

> ID：12545183
> 
> 赞同：0
> 
> 时间：2012-09-22T15:39:16.867
> 
> 标签：objective-c, nsmutablearray

我做了这个简单的代码：

```
PO(self.last10000Places);
PO(PlaceMark);
NSMutableArray *placemarks= [NSMutableArray arrayWithArray:PlaceMark];
PO(placemarks);//Breakpoint1
[placemarks removeObjectsInArray:self.last10000Places];
PO(placemarks);//Breakpoint2
[self.last10000Places addObjectsFromArray:placemarks]; 
```

这里 PO 只是我的宏

```
#define CLog( s, ... ) NSLog( @"<%p %@:(%d)> %@", self, [[NSString stringWithUTF8String:__FILE__] lastPathComponent], __LINE__, [NSString stringWithFormat:(s), ##__VA_ARGS__] )
#define PO(x) CLog(@#x ": %@", x)
#define PD(x) CLog(@#x ": %f", x) 
```

现在，我知道 nsmutablearray 需要实现 isEqual 。

所以我把这段代码：

```
@interface CLLocation  (equal)
- (BOOL)isEqual:(CLLocation*)other;
@end

@implementation CLLocation  (equal)

- (BOOL)isEqual:(CLLocation*)other {

    if ([self distanceFromLocation:other] ==0)
    {
        return true;
    }
    return false;
}
@end
@interface CLPlacemark (equal)
- (BOOL)isEqual:(CLPlacemark*)other;
@end

@implementation CLPlacemark (equal)

- (BOOL)isEqual:(CLPlacemark*)other {
    PO(self);
    PO(other);
    if (![self.name isEqual:other.name])
    {
        return false;
    }
    if (![self.location isEqual:other.location ])
    {
        return false; //NEVER called
    }
    return true;//breakpoint3 but strange result
}

@end 
```

然后我单步执行代码。现在这很奇怪。

在断点1我看到：

```
2012-09-22 21:40:53.959 GetAllDistricts[18381:c07] <0x74a7480 SDViewController.m:(82)> placemarks: (
    "Ross Sea, Ross Sea @ <-77.43947520,-168.68218520> +/- 100.00m, region (identifier <-75.73637772,-0.00216940> radius 2140218.36) <-75.73637772,-0.00216940> radius 2140218.36m"

at breakpoint3 I saw:
2012-09-22 21:41:22.964 GetAllDistricts[18381:c07] <0xd77fab0 SDViewController.m:(37)> self: Alexander Island, Antarctica @ <-71.05224390,-70.87965290> +/- 100.00m, region (identifier <-70.73927686,-71.91489801> radius 258243.49) <-70.73927686,-71.91489801> radius 258243.49m
2012-09-22 21:41:22.964 GetAllDistricts[18381:c07] <0xd77fab0 SDViewController.m:(38)> other: South Atlantic Ocean, South Atlantic Ocean, Antarctica @ <-42.60533670,-21.93128480> +/- 100.00m, region (identifier <-41.51023865,-31.60774370> radius 4958095.65) <-41.51023865,-31.60774370> radius 4958095.65m
2012-09-22 21:41:22.965 GetAllDistricts[18381:c07] <0xd787390 SDViewController.m:(37)> self: South Atlantic Ocean, South Atlantic Ocean, Antarctica @ <-42.60533670,-21.93128480> +/- 100.00m, region (identifier <-41.51023865,-31.60774370> radius 4958095.65) <-41.51023865,-31.60774370> radius 4958095.65m
2012-09-22 21:41:22.965 GetAllDistricts[18381:c07] <0xd787390 SDViewController.m:(38)> other: South Atlantic Ocean, South Atlantic Ocean, Antarctica @ <-42.60533670,-21.93128480> +/- 100.00m, region (identifier <-41.51023865,-31.60774370> radius 4958095.65) <-41.51023865,-31.60774370> radius 4958095.65m 
```

很明显，地标包含罗斯海。那么南大西洋到底`removeObjectsinArray`叫什么？`isEqual`

断点 2 也不会从地标中删除罗斯海。

我实现了 isEqual 我没有实现哈希

这是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:28:55.517

我已经弄清楚了问题所在。实施 -(NSUInteger) 哈希以某种方式解决了这个问题。

文档说当我们覆盖 isEqual 时我们必须覆盖哈希

看起来 removeObjects 使用哈希进行优化并找出哈希不相等并得出结论 isEqual 将返回 false 而无需检查。

所以我只需添加以下代码：

```
@interface CLLocation  (equal)
- (BOOL)isEqual:(CLLocation*)other;
@end

@implementation CLLocation  (equal)

- (BOOL)isEqual:(CLLocation*)other {

    if ([self distanceFromLocation:other] ==0)
    {
        return true;
    }
    return false;
}

- (NSUInteger) hash
{
    NSUInteger theHash = (NSUInteger) (self.coordinate.latitude *360 + self.coordinate.longitude);
    CLog(@"thehash %d",theHash);
    return theHash;
}
@end
@interface CLPlacemark (equal)
- (BOOL)isEqual:(CLPlacemark*)other;
@end

@implementation CLPlacemark (equal)

- (BOOL)isEqual:(CLPlacemark*)other {
    PO(self);
    PO(other);
    if (![self.name isEqual:other.name])
    {
        return false;
    }
    if (![self.location isEqual:other.location ])
    {
        return false;
    }
    return true;
}

-(NSUInteger) hash
{
    return self.name.hash;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:00:32.247

您的问题可能需要整理一下，也许是**对当前行为的简明解释，以及它如何偏离预期。**

但是，我想知道（根据您的问题的标题）您是否对该`arrayWithArray:`方法实际上创建并维护一个单独的集合这一事实感到困惑。您的对象不会被复制，但在这种情况下：

```
NSArray *objects = [NSArray arrayWithObjects:@"A", @"B", @"C", nil];
NSMutableArray *mute = [NSMutableArray arrayWithArray:objects];
NSArray *removals = [NSArray arrayWithObjects:@"A", @"C", nil];
[mute removeObjectsInArray:removals]; 
```

您的最终结果将是：

```
objects = { @"A", @"B", @"C" }
mute = { @"B" } 
```

这个例子是否有助于澄清任何事情？

# javascript - 按钮在 jQuery 中不切换

> ID：12545187
> 
> 赞同：0
> 
> 时间：2012-09-22T15:39:33.060
> 
> 标签：javascript, jquery, html, css, javascript-events

**我的 HTML：**

```
<input type="button" id="toggleButton" value="toggle" />
<h3 id="disclaimer"> We do not guarentee the validity of the data </h3> 
```

**JavaScript/jQuery：**

```
$("#toggleButton").click( function() {
    if($("#toggleButton").is(":visible")){
        $("#disclaimer").hide();
    }else {
        $("#disclaimer").show();
    }
}); 
```

免责声明应该在隐藏和可见之间切换，每当按下按钮时，隐藏免责声明就可以了，但是一旦隐藏它就不会再次可见。

在这方面需要帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T15:42:32.043

您可以使用***[.toggle()](http://api.jquery.com/toggle/)***。

```
$("#toggleButton").click( function() {
   $("#disclaimer").toggle();
}); 
```

***[工作演示。](http://jsfiddle.net/VXv4X/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:42:10.297

当然，当您检查按钮是否可见时，由于按钮始终可见，因此始终调用免责声明隐藏函数。您需要检查免责声明是否可见...

```
$("#toggleButton").click( function() {
    if($("#disclaimer").is(":visible")){
        $("#disclaimer").hide();
    }else {
        $("#disclaimer").show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T15:42:38.500

你的 javascript 代码应该是这样的：

```
$("#toggleButton").click( function() {
    if($("#disclaimer").is(":visible")){
        $("#disclaimer").hide();
    }else {
        $("#disclaimer").show();
    }
}); 
```

# c++ - 实现主从

> ID：12545189
> 
> 赞同：6
> 
> 时间：2012-09-22T15:39:47.423
> 
> 标签：c++, linux, master-slave, stability

在 Ubuntu 上运行。程序是用 C++ 编写的。我有 2 个进程在不同的主机上运行，​​一个是主进程，一个是从属进程（它们之间没有任何优先级，只有一个处理请求。）。只有一个进程可以成为主进程并处理请求。两个进程始终启动，如果它们崩溃，则会有一个看门狗重新启动它们。

主机通过网线连接。

我的计划是要求从一个到另一个保持活动状态，以防奴隶停止从主人那里保持活动状态，它需要将其状态更改为主人。当 master 再次启动时，它首先等待保持活动状态，以防不将其设置为 master。如果将其设置为奴隶。

我很乐意听取您的意见：

**如何防止两者同时成为大师？**这是我最关心的问题。当启动和连接失败时，你如何防止2个master同时出现？

你认为查询keep alive还是发送keep alive更好？（在我看来，最好是要求保持活力而不是推动）

任何其他好的建议和陷阱都将受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:12:08.087

我这样做的方法是让每个进程产生一个心跳线程，该线程每秒发送一次 UDP 数据包，并侦听来自其他进程的传入 UDP 数据包。如果心跳线程在指定的时间内（例如 5 秒）没有收到来自其他进程的任何 UDP 数据包，则假定其他进程已关闭并通知父线程它现在应该成为主线程。

心跳发送/侦听在专用线程中完成的原因是，如果主线程忙于进行冗长的计算，不会导致心跳UDP数据包暂时不发送。这样，主线程中的算法不需要是实时的，以避免触发虚假的故障转移。

这里还有一个问题要考虑……如果网络问题暂时中断了两台主机之间的通信会发生什么？（例如，一些小丑或 QA 测试人员拔下以太网电缆 1 分钟，然后将其重新插入）在这种情况下，两个进程将停止接收来自另一个进程的 UDP 数据包，因此两个进程都会认为另一个进程已经消失，并且两者都将成为主进程。然后当重新连接网线时，你有两个主进程同时运行，这不是你想要的。因此，您需要一些方法让两个主进程来决定两个主进程中的哪一个应该将自己降级为从属状态，以满足汉兰达原则（“只能有一个！”）。这可以像“IP 地址最小的主机应该保持主控”一样简单，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:21:05.123

解决这个问题的典型方法是举行选举。系统中的每个人都共享他们将用作算法输入的数据，以便每个人都能得出相同的结论。

例如：对等点都（都）相互发送一些唯一标识符（MAC 地址，或 pid，或高精度进程开始时间，例如）。然后每个对等方使用相同的比较来确定获胜者（例如，最大值）。然后他们互相通知结果。

有关瞬时连接故障的问题，请参阅[拜占庭将军](https://en.wikipedia.org/wiki/Two_Generals%27_Problem)。

也可以看看：

*   [如何在集群中运行的节点中选出一个主节点？](https://stackoverflow.com/questions/4523185/how-to-elect-a-master-node-among-the-nodes-running-in-a-cluster)
*   [如何在集群中选举新的 Master？](https://stackoverflow.com/questions/3085926/how-to-elect-new-master-in-cluster)
*   [https://en.wikipedia.org/wiki/Leader_election](https://en.wikipedia.org/wiki/Leader_election)

# c# - 将 Func 传递给 List.Find

> ID：12545192
> 
> 赞同：0
> 
> 时间：2012-09-22T15:40:07.880
> 
> 标签：c#, func

我有以下代码：

```
 [TestMethod]
    public void A_Player_Can_Be_Deleted_From_The_List()
    {                     
        Player player = playerList.Find(ByName("Davy",whatGoesHere?);
        playerList.Remove(player);

        playerList.Count.Should().Be(2);
    } 
```

Func 'ByName' 定义为：

```
Func<string, Player, bool> ByName = (name, player) => player.Name == name; 
```

我不知道如何传递第二个（玩家）参数。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:45:10.367

`player`提供给您传递给的谓词，`List.Find<T>`因此您可以将其传递给`ByName`：

```
Player player = playerList.Find(p => ByName("Davy", p));
playerList.Remove(player); 
```

而不是使用`Find`and`Remove`你可以使用[`List<T>.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)ie

```
playerList.RemoveAll(p => ByName("Davy", p)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:47:35.440

如果要`ByName`在 Method 中使用委托，则`Find`必须为列表中的每个元素执行它。例如：

```
string player = playerList.Find((playerElement) => ByName("Davy", playerElement)); 
```

# mpeg - 使用 Jsteg 或其他简单算法的视频隐写算法。

> ID：12545193
> 
> 赞同：1
> 
> 时间：2012-09-22T15:40:15.697
> 
> 标签：mpeg, steganography

Jsteg 算法基本上是一种用于 JPEG 图像中的隐写术的简单算法。它通过以下方式工作 -

1 - 计算每个宏块的 DCT 系数（JPEG 压缩算法的一部分）并找到量化矩阵，因此可以说量化矩阵如下：

![量化矩阵](../Images/f3302e94c46849596305e5c0e4a0258d.png)

现在对于不是 1 、 0 、 -1 的每个值，应用 LSB 。

我的问题是 - 我可以将相同的算法应用于 MPEG 视频以及仅在 I 帧上。

如果您有其他简单的视频隐写算法可以用于 MPEG 视频，也请告诉我。

# php - Youtube 在 php 中获得浏览量和评论数

> ID：12545194
> 
> 赞同：0
> 
> 时间：2012-09-22T15:40:26.940
> 
> 标签：php, api, youtube

我有一个 youtube 视频和一个网页，可以从我的网站预览嵌入的视频。

在静态信息下，我有一个视图标签，我想在其中显示来自 youtube**的视频的观看次数****+****我的网站** 的观看次数，我还想在该网页上显示回复作为留言簿，访问者可以在 youtube 上看到评论和在我的网站上发表评论

我怎么能没有。来自 youtube 的 php 浏览量

我如何才能获得评论和提交日期以及用户在 php 上发布的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:46:52.787

看看 youtube api 的页面。我认为足够清楚可以理解。

例如[此页面](https://developers.google.com/youtube/2.0/developers_guide_php#Using_community_features)显示有关评论的内容：

# python - Python类相互静态（类）变量

> ID：12545197
> 
> 赞同：2
> 
> 时间：2012-09-22T15:40:39.013
> 
> 标签：python, oop, class, static-variables

在 Python 中，如果我有类似的东西：

```
class A(object):
    b = B()

class B(object):
   a = A() 
```

会产生错误`NameError: name 'B' is not defined`

你会如何优雅地解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:45:25.203

尝试：

```
class B(object):
    pass

class A(object):
    b = B()

B.a = A() 
```

# merge - 你如何检查 Clearcase 中的合并？

> ID：12545198
> 
> 赞同：2
> 
> 时间：2012-09-22T15:40:41.867
> 
> 标签：merge, clearcase

我试图弄清楚如何在 Clearcase 中查看文件的合并历史记录。我知道它可以以图形方式完成，但我需要将它返回到标准输出。

```
ct lshistory <file> 
```

返回文件历史记录，但除非特别注释，否则您不知道什么已合并到什么。我基本上有三个分支：main、int 和 dev。我正在尝试确定 dev 分支中是否存在已合并并标记到 int 分支的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:40:20.433

这是关于查找合并超链接：请参阅“[如何合并文件和目录](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/how_merge_file_dir.htm)”

![合并](../Images/21427df4319ce037a45248534b353b2d.png)

> `find`和命令可以定位带有合并超链接的版本。[`lsvtree`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lsvtree.htm) `-merge`

该`-merge`选项允许：

> 包括位于一个或多个合并箭头（Merge 类型的超链接）末端的所有版本。每个此类版本上的注释都指示相应的目标对象。

您将[在该线程中找到脚本示例](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=160734)，通常是关于查找*未*合并到分支中的版本，但想法保持不变。

# java - 如何获取 Logger 的子项 (java.util.logger)

> ID：12545199
> 
> 赞同：1
> 
> 时间：2012-09-22T15:40:59.203
> 
> 标签：java, logging

我目前正在使用 Java 日志记录。我有一个记录器`cwh.A`和`cwh.B`. `cwh`是否可以在不知道它们的名字的情况下通过 Java 从 logger 获取这些记录器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:18:12.880

可以通过 logmanager 获取所有记录器名称：

```
LogManager manager = LogManager.getLogManager();
        Enumeration<String> names = manager.getLoggerNames();
        while(names.hasMoreElements()){
            String name = names.nextElement();
            if(name.startsWith("cwh.")){
                //work with the name of the logger
            }
        } 
```

使用此解决方法，可以找到子记录器。

# jquery - 通过 AJAX 和 CakePHP 2.x 从数据库中提取数据

> ID：12545206
> 
> 赞同：1
> 
> 时间：2012-09-22T15:41:41.700
> 
> 标签：jquery, ajax, cakephp, cakephp-2.0, cakephp-2.1

我正在一个电子商务网站上工作，该网站通过 Javascript/jQuery 从用户那里收集有关使用过的手机的信息。

我试图弄清楚如何在我的 QuotesController 中创建一个正确的方法，该方法将允许我：1）使用 jQuery/AJAX 使用 AJAX“发布”调用它 2）返回报价数据，以便我可以显示价格用户

这是我到目前为止所拥有的： jQuery 函数调用：

```
var data =
    {
        device_id: quote['device_id'], 
        carrier_id: quote['carrier_id'], 
        condition_id: quote['condition_id'], 
        size: quote['size']
    };

    // Pull quote using AJAX
    $.ajax({
        type: "post",
        url: "/c4c/quotes/get_quote",
        data: data,
        dataType: 'json',
        success: function(data, textStatus, jqXHR){
            alert('success');
            alert(jqXHR.responseText);
            $('#quote').html(jqXHR.responseText);
        },
        error: function(jqXHR, textStatus, errorThrown){
            alert('error');
            alert(jqXHR.responseText);
            $('#quote').html(jqXHR.responseText);
        }
    }); 
```

QuotesController 中的方法：

```
 // Gets a quote's price via ajax
    public function get_quote(){
    $this->layout = 'ajax';

    $device_id = $this->request->data['device_id'];
    $carrier_id = $this->request->data['carrier_id'];
    $condition_id = $this->request->data['condition_id'];
    $size = $this->request->data['size'];

    // Get quote
    $quote = $this->Quote->find('first', array('conditions'=>array('Quote.device_id'=>$device_id,
                                                                   'Quote.carrier_id'=>$carrier_id,
                                                                   'Quote.condition_id'=>$condition_id,
                                                                   'Quote.size'=>$size,
                                                                    )));

    $this->set('quote',$quote);

    //$this->render('get_quote');
    return json_encode($quote);
} 
```

我不断收到错误，所以我知道我在做什么是错误的，但我似乎无法在 CakePHP 的网站上找到任何答案，也无法通过谷歌找到任何答案。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:34:46.557

针对您的情况的快速解决方法是：

首先不要这样做`return json_encode($quote);`- 为 ajax 响应创建一个视图文件。它应该位于：`App/View/Quotes/Ajax/get_quote.ctp`。

然后设置响应变量： `$this->set('quote', $quote);`

您还需要设置一些标题，因为我怀疑您使用的默认 ajax 布局只是一个空布局。在以下位置创建布局文件：`App/View/layouts/ajax.ctp`

您可以使用基本的 PHP`header()`函数来执行此操作：

```
header("Cache-Control: no-store, no-cache, max-age=0, must-revalidate");
header('Content-Type: application/json');
echo $content_for_layout; 
```

缓存控制标头在那里，因此对于 ajax 数据没有任何缓存。如果您正在使用请求/响应监控工具（您应该这样做），您会注意到现在它直接将响应标识为 JSON。然后在您看来，您可以：

```
echo json_encode($quote); 
```

根据您提供的稀缺信息，这应该可以解决您的问题，但是如何在 CakePHP 中“最好使用 json/ajax”？这里有几个步骤。

1.  使用[Router::parseExtensions();](http://book.cakephp.org/2.0/en/development/routing.html#file-extensions) 通过以下方式轻松识别传入的请求：
2.  检查[RequestHandlerComponent](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html)的 isXml() （或 is('ajax')) 方法的内容
3.  使用数据视图（[JSON 和 XML 视图](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)）进行响应呈现。您实际上有两个选择 - 使用[带有序列化键的](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key)数据视图或使用[带有视图文件](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-a-data-view-with-view-files)的数据视图。这个选择由你。
4.  使用中央 ajax 布局，并设置您喜欢的任何标题`RequestHandlerComponent::setContent($name, $type = null)`-[看看这里](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html#responding-to-requests)。请注意，应该在控制器的 beforeFilter() 中调用 setContent()。

# ios5 - ALAAssetLibrary aspectRatioThumbnail iOS4

> ID：12545209
> 
> 赞同：0
> 
> 时间：2012-09-22T15:41:59.877
> 
> 标签：ios5, ios4, thumbnails, alassetslibrary

我正在做一个需要浏览和显示 iPhone 画廊中的图片的项目。

我使用 ALAssetLibrary 来做到这一点。要生成缩略图图像，我使用“aspectRatioThumbnail”。在我的 3GS iOS 5 上一切正常。但这些方法在 iOS4 中不存在。

我尝试使用此功能手动生成缩略图比例图像，但由于内存警告而崩溃。日志显示生成的图像大小不遵守最大尺寸 120 的给定约束。

有任何想法吗 ？

```
 NSDate* firstDate = [NSDate date];
    uint8_t* buffer = (Byte*)malloc(_asset.defaultRepresentation.size);

    NSUInteger length = [_asset.defaultRepresentation getBytes:buffer fromOffset:0.0 length:_asset.defaultRepresentation.size error:nil];

NSData* data = [[NSData alloc] initWithBytesNoCopy:buffer length:_asset.defaultRepresentation.size freeWhenDone:YES];
                                  nil];

        NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:
                           (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
                           (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
                           (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
                           [NSNumber numberWithInt:120], kCGImageSourceThumbnailMaxPixelSize,
                           nil];

        CGImageSourceRef sourceRef = CGImageSourceCreateWithData((CFDataRef)data, (CFDictionaryRef) options);
        CFDictionaryRef imageProperties = CGImageSourceCopyPropertiesAtIndex(sourceRef, 0, NULL);

        CGImageRef imageRef = CGImageSourceCreateImageAtIndex(sourceRef, 0, imageProperties);

        image = [UIImage imageWithCGImage:imageRef];

        NSTimeInterval tic = [[NSDate date] timeIntervalSinceDate:firstDate];
        NSLog(@"Thumbnail generation from ios4 method %f [size %f * %f", tic, image.size.width, image.size.height);

        [data release];
        CFRelease(sourceRef);
        CFRelease(imageRef);
        CFRelease(imageProperties); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:28:25.720

上面的代码有很多不必要的复制。相反，只需以屏幕分辨率（小于完整图像大小）加载图像并从那里缩小为缩略图：

```
CGImageRef img = [[asset defaultRepresentation] fullScreenImage];
int w = CGImageGetWidth(img);
int h = CGImageGetHeight(img);
float scale = 120 / (float)(MAX(w, h));
CGSize newsize = CGSizeMake(w * scale, h * scale);

UIGraphicsBeginImageContext(newsize);
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextSetInterpolationQuality(ctx, kCGInterpolationHigh);
CGContextTranslateCTM(ctx, 0, newsize.height);
CGContextScaleCTM(ctx, 1.0, -1.0);
CGContextDrawImage(ctx, CGRectMake(0, 0, newsize.width, newsize.height), iref);
UIImage* thumbnail = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

运行此代码后，thumbnail 将具有与 aspectRatioThumbnail 等效的 UIImage。

# iphone - 设置 TextField 委托会导致键盘向上推视图

> ID：12545211
> 
> 赞同：0
> 
> 时间：2012-09-22T15:42:10.773
> 
> 标签：iphone, ios, cocoa-touch

我有一个`UIViewController`将在按下按钮时显示全屏子视图：

![它应该是什么样子](../Images/3ebd5d382d3e7f05d9c8cec69382b421.png)

如您所见，UI 元素仅覆盖上半部分，因此键盘有空间可以整齐地放在下面。这就是我希望它工作的方式。

但是，一旦我尝试将 设置`TextField` `delegate`为 ViewController，屏幕最终看起来像这样：

![设置委托后的外观](../Images/746334410e2c8817fdc075c785a92131.png)

如果影响它的显示方式，如何设置委托，以及如何让它表现得像我想要的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:27:54.417

这应该工作得很好。子视图需要设置适当的支柱和弹簧 - 您的视图应该没有弹簧，并附加在超级视图的顶部/左侧。如果它仍然发生，请尝试打印出子视图框架和弹簧/支柱值，以及超级视图框架（您的主视图）。您应该在键盘弹出之前执行超级视图，然后您可以查看它是否在更改或只是您的子视图。

# node.js - FindOne 与 MongooseJS 然后提前存储结果？

> ID：12545214
> 
> 赞同：2
> 
> 时间：2012-09-22T15:42:49.580
> 
> 标签：node.js, mongodb, mongoose

对不起，如果这听起来很傻，我还在学习服务器端 Javascript。我的 app.js 文件中有这段代码。

```
var test;

UserModel.findOne({name: 'guest'}, function(err, user) {
    test = user.name;
});

console.log(test); 
```

我知道这不起作用，因为`UserModel.findOne`它是异步的，所以一切都必须在回调中发生。例如`console.log(test)`可以在完成之前执行`UserModel.findOne`。

**问题**

如果我`var test`在 app.js 文件中声明，有没有办法将`user.name`(via `UserModel.findOne`) 的值放入其中？

我这样做的原因是因为我希望提前从数据库中检索所有这些信息。这样我就不必每次需要用户名时都进行数据库查询。

如果这个想法不合理，是否有类似的替代方案？

**编辑/更新**

这不用于身份验证/登录。我打算让所有用户都可以访问该变量`test`及其内容。

本质上，我在问为什么变量没有`test`永久设置为`user.name`，而是只在回调范围内执行。而且，是否可以永久设置变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:09:03.347

这个例子：

```
var users = {};
function getUser(username, callback) {
    if (typeof users[username] !== 'undefined') {
        callback(users[username]);
    } else {
        Users.findOne({"name":username}, function(err, user) {
            users[username] = user;
            callback(user);
        });
    };
}; 
```

这将始终从缓存或 mongodb 返回命名用户。它的调用方式与 findOne 相同：

getUser('guest', function(user) { console.log(user); });

之后，您可以直接从缓存中访问用户或将其分配给变量。但是你必须先确保 getUser 已经成功。

Node.js 最难的事情之一是理解代码是在书面源代码的正常流程之外调用的。代码仅跟随对具有回调的函数的调用是不够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:50:03.410

考虑到您的应用程序的所有用户都会共享该`test`变量，这似乎是个坏主意。如果您不想根据需要进行查找，您可以将这种数据存储在用户会话中。

**编辑**

只要您`test`在全局或模块范围内声明，它就会在`findOne`回调中永久设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:53:21.933

是的，您可以将结果应用于更高范围的变量，例如这应该有效；

```
var test;

function getTest() {
   console.log(test);
}

UserModel.findOne({name: 'guest'}, function(err, user) {
   test = user.name;

   getTest();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-10T21:41:38.413

看看下面六氰化物的答案。在异步回调中使用回调为我的项目节省了同样的问题。

[将变量设置为 Mongoose Find 的结果](https://stackoverflow.com/questions/18938469/set-variable-to-result-of-mongoose-find)

# jquery - jQuery 创建仅包含 XML 内容的新窗口

> ID：12545215
> 
> 赞同：1
> 
> 时间：2012-09-22T15:42:57.677
> 
> 标签：jquery, xml, ajax, rss

如何使用 jQuery 创建一个包含 XML 内容的新窗口？

或者用 XML 窗口替换当前的 XHTML 窗口，以便浏览器可以正确地将其解释为 RSS 提要？

流动：

1.  用户单击按钮以获取 RSS 提要
2.  jQuery ajax() 用于检索 RSS/Atom XML 内容
3.  RSS/Atom 将被写入新的浏览器窗口（和/或替换当前窗口）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:47:38.907

这可以通过 Data Uri Scheme 来完成，[http ://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

但我认为它仅限于某些浏览器。

例如，您可以将其放在浏览器的 url 栏中，它会呈现良好。与在新窗口中呈现 xml 内容的方式相同

```
var u = "data:text/html;charset=utf-8,<h1>Hey thats cool</h1>";
window.open(u); 
```

# php - 从 URL 查询字符串中获取数据的问题

> ID：12545216
> 
> 赞同：0
> 
> 时间：2012-09-22T15:43:07.200
> 
> 标签：php, get, request

我有一个像`http://localhost/uploaded_server_alert/backup/alertR/business/business-registration.php?back_abn=2342&back_add1=#asdas`

我想`back_add1`在我的页面中获取值。但是如果我使用`$_REQUEST['back_add1']`它就不起作用。请帮助我如何获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:57:20.347

您需要将字符编码`#`为`%23`，尝试这样

```
http://localhost/uploaded_server_alert/backup/alertR/business/business-registration.php?back_abn=2342&back_add1=%23asdas 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:46:50.253

由于#，你得到一个空白的结果。# 是一个锚标记。如果您的页面中有一个带有 name 的元素`asdas`，页面将在那里向下滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:50:28.157

编辑：尝试`urlencode()`对 URL 进行编码，然后获取其值。

# objective-c - 根据字典唯一键对 NSDictionaries 数组进行排序

> ID：12545221
> 
> 赞同：0
> 
> 时间：2012-09-22T15:43:22.120
> 
> 标签：objective-c, uitableview, sorting, nsarray, nsdictionary

如果已经回答，请原谅我。我遇到的所有答案都使用**相同**的键对字典数组进行地址排序。不是这种情况。使用 UITableView（分组）的 UIView 具有 tblData 和部分。tblData 从对象数组中获取其数据。我可以使用比较器对数组进行排序，但无论我尝试了什么，都不会反映更改。这是创建数据的方法：

```
 if (myAppointment!=nil){
        if (myAppointment.OBSERVATIONS!=nil){
            [self.tblData removeAllObjects];
            @synchronized(self.myAppointment){
                for (Observations *tmpObs in [self.myAppointment OBSERVATIONS]){
                    NSMutableString *tmpHdr = [[NSMutableString alloc] initWithString:@"Observation made on: "];
                    [tmpHdr appendString:tmpObs.TIME];
                    [self.tblData setObject:[[NSArray alloc] initWithObjects:tmpObs.TYPE, tmpObs.NOTE, nil] forKey:tmpHdr];
                }
            }
        }
        self.sections = [[self.tblData allKeys] sortedArrayUsingSelector:@selector(compare:)];
    }
    [self.GroupTblView reloadData]; 
```

当我尝试对 myAppointment.OBSERVATIONS 进行排序时，我可以验证它们是否已排序。然而，当我尝试重新加载希望已排序的数据时，没有发生任何变化：

```
 [self.tblData removeAllObjects];
        [self.myAppointment.OBSERVATIONS sortUsingSelector:@selector(compareByType:)];                
        for (Observations *tmpObs in self.myAppointment.OBSERVATIONS){   
            NSMutableString *tmpHdr = [[NSMutableString alloc] initWithString:@"Observation made on: "];
            [tmpHdr appendString:tmpObs.TIME];
            [self.tblData setObject:[[NSArray alloc] initWithObjects:tmpObs.TYPE, tmpObs.NOTE, nil] forKey:tmpHdr];
        }
        self.sections = [[NSArray alloc] initWithArray:[self.tblData allKeys]];
        [self.GroupTblView reloadData]; 
```

据我了解，部分没有被排序，或者没有被更新。从上面可以看出，字典键随每个“观察”而变化，因此使用 NSSortDescriptor 进行排序并不像通常那样简单。有没有办法解决这个问题，比如说，使用 block + sortedArrayUsingComparator ？

编辑：

```
@property (strong, nonatomic) IBOutlet UITableView *GroupTblView;
@property (nonatomic, strong) NSMutableDictionary *tblData;
@property (nonatomic, strong) NSArray *sections; 
```

它们都是在 initWithNib 方法中合成和分配的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:31:40.380

这个例子有点傻，我把我的问题归咎于长时间的工作。如果有人有兴趣在分组模式下对 UITableView 使用的 tableData 进行排序，我是这样做的：

```
 self.sections = [[self.tblData allKeys] 
                         sortedArrayUsingComparator: ^(id a, id b){
                                        // a is a section (a key from the Dictionary), b is another section (another key)
                                        NSArray *a_arr = [self.tblData objectForKey:a];
                                        NSArray *b_arr = [self.tblData objectForKey:b];
                                        // We know that the first item in the array is always the type
                                        return [[a_arr objectAtIndex:0] compare:[b_arr objectAtIndex:0]];
                                        }];
        [self.GroupTblView reloadData]; 
```

请记住，objectAtIndex:0 是我的observation.TYPE（见上面的代码）。因此，如果您知道字典对象中数组中排序键的索引，则可以访问它，找到它（使用块）并将其用于排序。

# c++ - c++中类的实例

> ID：12545222
> 
> 赞同：-2
> 
> 时间：2012-09-22T15:43:29.340
> 
> 标签：c++, class

我想问这有什么区别

```
Tv *television = new Tv(); 
```

和

```
Tv television = Tv(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T15:44:46.270

第一个创建一个动态分配的`Tv`并将其绑定到指向`Tv`. 对象的持续时间`Tv`由您控制：您可以通过调用它来决定何时销毁`delete`它。

```
new Tv(); // creates dynamically allocated Tv and returns pointer to it
Tv* television; // creates a pointer to Tv that points to nothing useful
Tv* tv1 = new Tv(); // creates dynamicalls allocated Tv, pointer tv1 points to it.

delete tv1; // destroy the object and deallocate memory used by it. 
```

第二个通过[复制初始化创建一个](http://www.gotw.ca/gotw/036.htm)[自动分配](http://en.wikipedia.org/wiki/Automatic_variable) 的。对象的持续时间是自动的。根据语言规则，它会被确定性地销毁，例如在退出范围时：`Tv``Tv`

```
{
  // copy-initializaiton: RHS is value initialized temporary.
  Tv television = Tv(); 
} // television is destroyed here. 
```

“退出范围”也可以指包含对象的类的对象生命周期的结束`Tv`：

```
struct Foo {
  Tv tv;
}

....
{
  Foo f;
} // f is destroyed, and f.tv with it. 
```

# php - PHP Echo - 在弹出 div 中回显结果仅在数据库中回显第一个结果

> ID：12545223
> 
> 赞同：2
> 
> 时间：2012-09-22T15:43:37.410
> 
> 标签：php, mysql, database, echo

我有一个搜索引擎，它显示来自数据库的结果，并使用了一个显示模式，当用户单击“单击我获取更多联系信息”时会打开一个弹出框，但是目前无论在任何结果上单击哪个链接，正在回显相同的联系信息，这是来自第一个结果的信息。

有人可以向我指出正确的方向，向我展示如何做到这一点，以便当用户单击“单击我获取更多联系信息”时，正确的联系信息会出现在该结果的弹出框中？

感谢您的帮助，非常感谢！

```
echo "<div id='myModal' class='reveal-modal'>";
echo "<h1>Modal Title</h1>";
echo "<p>Contact:" . $row['contact'] . "</p>";
echo "<a class='close-reveal-modal'>&#215;</a>";
echo "</div>";

echo "<a href='#' data-reveal-id='myModal'>Click Me For More Contact Info</a>"; 
```

编辑：搜索结果显示正常，就在结果回显到弹出 div 时，这是我的代码的其余部分：

```
include('config.inc');

    // Check and set username
$username = (isset($_SESSION['username']) ? $_SESSION['username'] : 'guest');

// Check and set category
$category = (!empty($_GET['category']) ? $_GET['category'] : null);

// Check and set search
if(!empty($_GET['search'])){
$search = $_GET['search'];
}else{
$search = null;
}

// Check that $_GET['price'] is ASC if not set to DESC
// as static values its ok to directly put in the query 
if(isset($_GET['price']) && $_GET['price'] == 'ASC'){
$price = 'ASC';
}else{
$price = 'DESC';
}

if ($search !== null){

$sql = "SELECT * FROM people WHERE MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE)";

$q   = $conn->prepare($sql) or die("failed!");
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->execute();
}

if ($search !== null && $category !== null){

$sql = "SELECT * FROM people WHERE MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE) AND category = :category";

$q   = $conn->prepare($sql) or die("failed!");
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->bindParam(':category', $category, PDO::PARAM_STR);
$q->execute();
}

if ($category !== null && $search !== null && isset($price)){

$sql = "SELECT   *
        FROM     people
        WHERE    MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE)
        AND      category = :category
        ORDER BY price ".$price;

$q = $conn->prepare($sql);
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->bindParam(':category', $category, PDO::PARAM_STR);
$q->execute();
}

if ($category == null && $search !== null && isset($price)){

$sql = "SELECT   *
        FROM     people
        WHERE    MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE)

        ORDER BY price ".$price;

$q = $conn->prepare($sql);
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->execute();
}

if ($q){

//declaring counter
    $count=0;
    while($r = $q->fetch(PDO::FETCH_ASSOC)){
    $row = $r;

    $fname = $row['fname'];
    $lname = $row['lname'];
    $firstname = $row['firstname'];
    $surname = $row['surname'];

//counter equals
$count++;

//insert an image every 5 rows
    if($count==5){
    $count=0;
   echo "<table width='50%' style='border-bottom:1px solid #000000;'";
echo "<tr>";
echo "<td>";
echo "<div id='page-wrap'>";
echo "<div class='discounted-item freeshipping'>";

echo "<a href='images/box1.png' rel='lightbox'><img src='images/box1.png' width='20%' height='98%' /></a>";

echo "<div class='reasonbar'><div class='prod-title' style='width: 70%;'>AN AD CAN GO HERE</div><div class='reason' style='width: 29%;'><b>Ad Company</b></div></div>";

echo "<div class='reasonbar'><div class='prod-title1' style='width: 70%;'>Description about the advert from a company</div><div class='reason1' style='width: 29%;'>Category: Advert</div></div>";

echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'>HELLO, User</div><div class='reason2' style='width: 29%;'></div></div>";

echo "</td>";
echo "</tr>";
echo "</td>";
echo "</tr>";
echo "</table>";
}

echo "<table width='50%' style='border-bottom:1px solid #000000;'";
echo "<tr>";
echo "<td>";
echo "<div id='page-wrap'>";
echo "<div class='discounted-item freeshipping'>";

echo "<a href='./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "' rel='lightbox'><img src=\"./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "\" alt=\"\" width='15%' height='80%' /></a>";

echo "<div class='reasonbar'><div class='prod-title' style='width: 70%;'>" .$row['fname'] . "</div><div class='reason' style='width: 29%;'><b>". $row['firstname'] . " " . $row['surname'] ."</b></div></div>";

echo "<div class='reasonbar'><div class='prod-title1' style='width: 70%;'>" .   $row['lname'] . "</div><div class='reason1' style='width: 29%;'>Category:<br /> ".   $row['category'] . "</div></div>";

echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'>Contact:" . $row['contact'] . "</div><div class='reason2' style='width: 29%;'>Price: &pound;".    $row['price'] . "</div></div>";

echo "</td>";
echo "</tr>";
echo "</td>";
echo "</tr>";
echo "</table>";

echo "<div id='myModal' class='reveal-modal'>";
echo "<h1>Modal Title</h1>";
echo "<p>Contact:" . $row['contact'] . "</p>";
echo "<a class='close-reveal-modal'>&#215;</a>";
echo "</div>";

echo "<a href='#' data-reveal-id='myModal'>Click Me For A Modal</a>";

}

}

else
echo "No results found for \"<b>$search</b>\""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:15:02.497

从您提供的链接中：

`Just give your modal div the class "reveal-modal"and a unique ID (we'll use the ID to launch this modal)`和`By putting the "data-reveal-id" attribute on the anchor, when clicked the plugin matches the value of the "data-reveal-id" attribute (in this case "myModal") with an HTML element with that ID`。

目前，您似乎为每个模态提供了相同的 id，因此所有模态链接都将针对第一个。

```
echo "<div id='myModal".$count."' class='reveal-modal'>";
echo "<h1>Modal Title</h1>";
echo "<p>Contact:" . $row['contact'] . "</p>";
echo "<a class='close-reveal-modal'>&#215;</a>";
echo "</div>";

echo "<a href='#' data-reveal-id='myModal".$count."'>Click Me For A Modal</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:56:01.673

当您从数据库中检索数据时，请确保您用于`while($row=$req->fetch())`检索所有数据。然后，您必须根据需要选择正确的行。

小心，`$row`是一个包含所有行的数组。因此：`$row[0]['contact']`将包含来自第一行、`$row[1]['contact']`第二行等的联系人...

# c# - npgsql 和 Entity Framework 代码第一次设置问题

> ID：12545228
> 
> 赞同：7
> 
> 时间：2012-09-22T15:45:01.753
> 
> 标签：c#, entity-framework, ef-code-first, npgsql

我得到的最新错误是

```
ERROR: 42P01: relation "dbo.__MigrationHistory" does not exist 
```

但我相信这只是因为之前的某些东西没有正确设置。

我目前正在尝试首先设置实体框架 4.4 代码以使用 Npgsql 2.0.12，我已经完成了以下操作，现在它似乎至少正在连接到数据库，但是当我执行 context.saveChanges(); 时给了我上述错误；

*   将 .net 2.0.50727 的 machine.config 更新为：

    < add name="Npgsql Data Provider" invariant="Npgsql" support="FF" description=".Net Framework Data Provider for Postgresql Server" type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.12.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7" />

*   将dll添加到项目中

*   将 app.config 更改为如下所示；

    ```
    <configuration>
      <configSections>
        <section name="entityFramework"
          type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection,
          EntityFramework, 
          Version=4.4.0.0, Culture=neutral, 
          PublicKeyToken=b77a5c561934e089" 
          requirePermission="false" />
      </configSections>
      <system.data>
        <DbProviderFactories>
          <remove invariant="Npgsql"></remove>
          <add name="Npgsql Data Provider" 
               invariant="Npgsql" 
               description=".Net Framework Data Provider for Postgresql Server" 
               type="Npgsql.NpgsqlFactory, Npgsql, 
                     Version=2.0.12.0, Culture=neutral, 
                     PublicKeyToken=5d8b90d52f46fda7" />
        </DbProviderFactories>
      </system.data>
      <connectionStrings>
        <add name="DataContext" 
             connectionString="Server=127.0.0.1;Port=5432;Database=postgres;User Id=postgres;Password=*******;CommandTimeout=20;" 
             providerName="Npgsql" />
      </connectionStrings>
    </configuration> 
    ```

*   传入的数据如下所示

    公共类动物 { [Key] public int Id { get; 放; } 公共字符串名称 { 获取；放; } 公共字符串描述 { 获取；放; } 公共 int 年龄 { 得到；放; } 公共 int NoOfLegs { 得到；放; } }

*   其他一切都是通用的现成的上下文设置

关于我做错了什么或提示或教程的任何帮助，任何事情都会有所帮助。这只是一个小小的概念证明，但我不介意让它工作。

Ps 对代码格式的错误使用感到抱歉，堆栈交换不会让我出于某种原因正确使用它，即使它的格式正确。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-30T13:15:55.650

Npgsql 不支持创建模式，所以你必须手动创建数据库。然后为避免此错误，请在代码中的某处添加此语句（在您的情况下，它可能位于 Main() 函数的开头）：

```
Database.SetInitializer<DataContext>(null); 
```

而不是 DataContext 使用您的 DbContext 实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-19T02:53:38.393

我同意 iwanek 之前的回答。更具体地说，我喜欢将语句放在 OnModelCreating 覆盖方法中，以便在创建上下文时始终调用它。

```
 public class MyDbContext : DbContext
    {
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            Database.SetInitializer<MyDbContext>(null);
        }
    } 
```

# django - Django：在排除子类对象的同时选择对象？

> ID：12545229
> 
> 赞同：0
> 
> 时间：2012-09-22T15:45:09.080
> 
> 标签：django, django-models

我在 Django 应用程序中有两个模型：

```
class Animal(models.Model):
...

class Pet(Animal):
... 
```

我想选择所有`Animal`s，但不包括`Pet`s。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:54:12.883

尝试：

```
Animal.objects.filter(pet=None) 
```

假设这`Animal`不是一个抽象模型。

# c++ - 河内塔 [编辑] - k peg 解决方案

> ID：12545231
> 
> 赞同：0
> 
> 时间：2012-09-22T15:45:14.037
> 
> 标签：c++, data-structures, recursion, binary-tree, towers-of-hanoi

我能够提出一种算法（逻辑）来解决河内塔问题的 k-peg 解决方案，但是当我实现我的代码时，我遇到了分段错误。

```
void move(int number_of_disks, int source, int dest, vector <int> free_peg, int pointer)
    {
        int p;

        if (1 == number_of_disks)
        {
            moves++;
            move_top_disk (source, dest);
        }

        if(free_peg.size() > 2)
            p = number_of_disks/2;
        else 
            p = number_of_disks - 1;

        moves++;
        //Move top "p" disks from peg 1 to peg i
        move(p, source, free_peg.back(),free_peg, pointer); 
        //Move "n - p - 1" disks from peg 1 to another peg 
        move(number_of_disks - p - 1, source, free_peg[pointer--], free_peg, pointer++);
        //Move the "last disk" from the source peg to the destination
        move_top_disk(source, dest);
        //Move "n - p - 1" disks from peg (i - 1) to the final peg
        move(number_of_disks - p - 1, free_peg[pointer--], dest, free_peg, pointer++);
        //Move "p" disks from peg i to the destination
        move(p, free_peg.back(), dest, free_peg, pointer);
    } 
```

这个想法很简单，我保留了一个免费的钉子（或塔）向量，并在我移动磁盘时更新它。所以对于 6 个 pegs 和 n 个磁盘的情况，我有一个源、一个目标和 4 个空闲 pegs。这个想法是将 (n - p) where p ~ n/2 从源移动到 free_peg[3] （第四个自由钉）。现在我的向量中只有 3 个空闲钉，我使用这 3 个空闲钉将 (n - p - 1) 个磁盘移动到 free_peg[2]，然后将最后一个磁盘从源移动到目标。所以现在我有 2 个免费挂钩和 1 个来源 = 3 个免费挂钩。接下来，我需要使用 3 个空闲的 peg（包括现在空闲的源）将 (n - p - 1) 个磁盘从 peg[2] 移动到目的地。最后，使用 4 个空闲 peg 将 p 个磁盘从 free_peg[3] 移动到目的地。但是，当我在我的代码中实现它时，我遇到了分段错误，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:02:17.840

我能够解决 k-peg 通用解决方案，感谢您的帮助。以下是算法的运行方式：

```
void move(int number_of_disks, int source, int dest, vector <int> free_peg)
    {
        int p, middle, g;

        if (1 == number_of_disks)
        {
            moves++;
            move_top_disk (source, dest);
        }

        else
        {
            moves++;

            if(free_peg.size() >= 2)
                p = number_of_disks/2;
            else
                p = number_of_disks - 1;

            //Move top "p" disks from peg 1 to peg i
            middle = free_peg.back();
            free_peg.pop_back();
            free_peg.push_back(dest);
            move(p, source, middle,free_peg);

            //Move "n - p " disks from peg 1 to another peg
            free_peg.pop_back();
            move(number_of_disks - p, source, dest, free_peg);

                    //Move p from current peg to the final peg
            free_peg.push_back(source);
            move(p, middle, dest, free_peg);
        }
    } 
```

# c# - c# MailSender 和睡眠

> ID：12545232
> 
> 赞同：1
> 
> 时间：2012-09-22T15:45:16.317
> 
> 标签：c#, sleep, smtpclient, mail-sender

我正在编写一个通过类 SmtpClient 发送电子邮件的程序。我使用这段代码：

```
 try
        {
            MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient("mailSMTP.it");

            mail.From = new MailAddress("address.it");

            mail.Subject = "oggetto";

            mail.IsBodyHtml = true;
            string htmlBody = "someHTML";

            mail.Body = htmlBody;

            SmtpServer.Port = 25;

            SmtpServer.EnableSsl = false;

            foreach (string indirizzo in indirizzi)
            {
                mail.To.Clear();
                mail.To.Add(indirizzo);
                SmtpServer.Send(mail);
                System.Threading.Thread.Sleep(3000);
            }

            MessageBox.Show("e-mail spedite!");

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        } 
```

但它只有在我切断“睡眠”线时才有效。为什么？我认为在此过程中休息一下是个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:52:56.840

鉴于有一个例外，假设它在调用`Send`，我建议不要重新使用该`MailMessage`对象并在循环的每次迭代中创建一个新对象。例如：

```
 //...
        foreach (string indirizzo in indirizzi)
        {
            string htmlBody = "someHTML";
            MailMessage mail = new MailMessage 
            {
                From = new MailAddress("address.it"),
                Subject = "oggetto",
                IsBodyHtml = true,
                Body = htmlBody,
            };

            mail.To.Clear();
            mail.To.Add(indirizzo);
            SmtpServer.Send(mail);
        } 
```

~~如果通过“工作”您的意思是您`MessageBox`在合理的时间内出现......那么原因是因为`Sleep`在发送所有消息之前阻塞了 UI 线程。例如，如果您尝试发送 10 条消息，UI 将停止 30 秒（3000 毫秒 X 10）。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:12:35.027

我认为你为这个进程定义了新线程，因为如果你写 `System.Threading.Thread.Sleep(3000);`意味着主线程将休眠 3000 毫秒。

所以，为这个进程创建一个嵌套线程，之后你可以停止/休眠你的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:13:02.330

[在我（和其他人](https://stackoverflow.com/questions/1096794/is-sleep-evil)）看来，您应该不惜一切代价尝试避免睡眠，通常情况下您最终会得到一个行为奇怪的应用程序（就像您描述的行为一样）。

我会用一个计时器来解决它，该计时器使用索引来确定下一封要发送的邮件。像这样的东西：

```
 try
    {
        MailMessage mail = new MailMessage();
        SmtpClient SmtpServer = new SmtpClient("mailSMTP.it");

        mail.From = new MailAddress("address.it");

        mail.Subject = "oggetto";

        mail.IsBodyHtml = true;
        string htmlBody = "someHTML";

        mail.Body = htmlBody;

        SmtpServer.Port = 25;

        SmtpServer.EnableSsl = false;

        var index = 0;

        var timer = new System.Threading.Timer((callbackState) =>
            {
                mail.To.Clear();
                mail.To.Add(indirizzi[index]);
                SmtpServer.Send(mail);

                index++;

                if (index < indirizzi.Count)
                  timer.Change(3000, Timeout.Infinite);
                else {
                    timer.Dispose();
                    Invoke(new Action(DisplayAllEmailsSentMessage));
                }
            }, timer, 3000, Timeout.Infinite);

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    } 
```

请注意，您必须使用 Invoke 以任何方式与 Windows 窗体交互，例如显示消息框。这是因为 Threading.Timer 回调在它自己的线程上执行。

您也可以使用 Windows.Forms.Timer，但我自己很少使用它，因为它位于 Windows.Forms 命名空间中，因此仅适用于用 Windows 窗体编写的 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T19:30:03.287

由于不活动，Smtp 服务器正在断开您的连接。这最有可能释放服务器上的资源。

从[SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)文档：

> 如果应用程序希望向同一个 SMTP 服务器发送多条消息，则可以重新使用由 SmtpClient 类的当前实例建立到 SMTP 服务器的连接。这在使用身份验证或加密建立与 SMTP 服务器的连接时特别有用。验证和建立 TLS 会话的过程可能是昂贵的操作。在向同一 SMTP 服务器发送大量电子邮件时，要求为每封邮件重新建立连接可能会对性能产生重大影响。

一般来说，其他响应者说你不应该在发送之间睡觉是正确的。Smtp 服务器*应该*足够强大，可以处理您可以按顺序发送给它的所有电子邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-08T09:49:50.067

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Mail;
using System.Net.Mime;
using System.Text;
using System.Threading.Tasks;
using System.Windows;

 class MailSender
    {
        public static int CreateMessageMdp(String destination,String mdp)
        {
            try
            {
                var client = new SmtpClient("smtp.domain.com", 587)
                {
                    Credentials = new NetworkCredential("appgestionali@domain.com", "password"),
                    EnableSsl = true
                };
                DateTime localDate = DateTime.Now;
                string body = "Suite à votre demande de mot de passe le " + localDate.ToString("F") + "\n on vous envoi votre mot de passe est :" + mdp;
                client.Send("appgestionali@domain.com", destination, "Information", body);
            }
            catch (Exception ex)
            {
                MessageBox.Show(""+ ex.GetBaseException());
                return -1;
            }
            return 0;
        }
    }
} 
```

# iphone - 无法从 NSUserDefault 获取价值

> ID：12545239
> 
> 赞同：0
> 
> 时间：2012-09-22T15:46:24.180
> 
> 标签：iphone, nsuserdefaults

我只是在下面的代码中使用将数组存储到 userdefault

```
[[NSUserDefaults standardUserDefaults] setObject:artists forKey:@"test"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后如果我们从下面的代码中检索数据

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
artists = [defaults objectForKey:@"test"]; 
```

但我无法获取数据。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:12:34.340

数组包含什么？只有特定类型的内容可以编码到 NSUserDefaults 中。数组必须能够转换为 plist。[NSUserDefaults](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)的文档说：

> 默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。

# r - 仪表板 - R 中的（表盘）仪表

> ID：12545240
> 
> 赞同：2
> 
> 时间：2012-09-22T15:46:30.117
> 
> 标签：r, dashboard

我想知道是否可以在 R 中做这种仪表板（我的意思是这种地块）？

这是我想在 R 中做的例子（首先来自`SAS`）

**编辑**：我在 Windows 7（64 位）上工作。

![在此处输入图像描述](../Images/2035d3d22306e5b3868a8d6a2777f864.png)

![在此处输入图像描述](../Images/bf33eb4998c02f0125aa452b569069f1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T20:18:04.940

这是使用基本图形开始的一些事情。让它更漂亮留给读者。你可以在这里看到一个例子：http: [//www.math.csi.cuny.edu/gw/ex-dashboard.R](http://www.math.csi.cuny.edu/gw/ex-dashboard.R)。

```
dashboard <- function(dial=list(
                        list(color="red",
                             range=c(10, 40)),
                        list(color="yellow",
                             range=c(40, 60)),
                        list(color="green",
                             range=c(70, 100))
                        ),
                      value=from) {

  from <- min(unlist(lapply(dial, "[[", i="range")))
  to <-  max(unlist(lapply(dial, "[[", i="range")))

  theta <- seq(-pi/3, pi + pi/3, length=100)
  r <- 1

  scale <- function(x) {
    m <- (pi + pi/3 - (-pi/3))/(from - to)
    (pi + pi/3) + m*(x - from)
  }

  plot.new()
  plot.window(xlim=c(-1, 1), ylim=c(sin(-pi/3), 1))

  lines(cos(theta), sin(theta))
  sapply(dial, function(l) {
    d <- scale(l$range)
    x <- seq(d[1], d[2], length=100)
    lines(cos(x), sin(x), col=l$color, lwd=3)
  })

  ticks <- pretty(c(from, to), n=5)
  ticks_th <- scale(ticks)
  r <- 1 - .15
  text(r*cos(ticks_th), r*sin(ticks_th), labels=ticks)

  sapply(ticks_th, function(th) {
    lines(cos(th)*c(1,.95), sin(th)*c(1, .95))
  })

  r <- 1 - .25
  th <- scale(value)
  arrows(0, 0, cos(th), sin(th))

}

dashboard( value=60) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T16:38:29.423

你可以用极坐标图做类似的事情：

```
require(plotrix)
polar.plot( c(0,20),c(0,60),main="Dashboard",lwd=3,line.col=4) 
```

如果要自定义外观，可以深入研究代码。使用`radial.plot`可能会给你更多的定制。

![极坐标图](../Images/a0612060ccfabff4c82f1e4f077b757a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T15:49:06.147

这与 R 无关，而仅与*如何获取表示仪表板项目的 GUI 小部件有关*。

我认为 Gtk2 可能会这样做，所以 RGtk2 包（及其包装器）可能会有所帮助。我知道 Qwt 工具包有一个事实，但是那个更难访问（因为你需要一个 C++ 桥）。

# linux - Linux 面向行的文本文件操作

> ID：12545246
> 
> 赞同：0
> 
> 时间：2012-09-22T15:47:06.973
> 
> 标签：linux, shell, command, text-files

我有一个大文本文件（1,2,3 GB）组织为一系列行，如下所示：

```
 __________________________
   __________________________
   __________________________
             ...
   __________________________ 
```

将此文件的一部分复制到新文件中的最简单方法（命令、bash 脚本）是什么（例如：将所有内容从第 10 行复制到第 1000 行）？行间隔应作为参数传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:50:34.040

```
sed -n 10,1000p input.txt > output.txt 
```

# c++ - UTF-8 vs cpp 案例需要解释

> ID：12545252
> 
> 赞同：8
> 
> 时间：2012-09-22T15:47:55.070
> 
> 标签：c++, visual-studio, utf-8

我在 Windows 7 64 位上有 Microsoft Visual Studio 2010。（在项目属性中“字符集”设置为“未设置”，但是每个设置都会导致相同的输出。）

源代码：

```
 using namespace std;
  char const charTest[] = "árvíztűrő tükörfúrógép ÁRVÍZTŰRŐ TÜKÖRFÚRÓGÉP\n";
  cout << charTest;
  printf(charTest);
  if(set_codepage()) // SetConsoleOutputCP(CP_UTF8); // *1
    cerr << "DEBUG: set_codepage(): OK" << endl;
  else
    cerr << "DEBUG: set_codepage(): FAIL" << endl;
  cout << charTest;
  printf(charTest); 
```

*1：包括`windows.h`混乱的东西，所以我从一个单独的 cpp 中包含它。

编译后的二进制文件包含作为正确 UTF-8 字节序列的字符串。`chcp 65001`如果我使用和 issue将控制台设置为 UTF-8 `type main.cpp`，则字符串显示正确。

测试（控制台设置为使用 Lucida Console 字体）：

```
D:\dev\user\geometry\Debug>chcp
Active code page: 852

D:\dev\user\geometry\Debug>listProcessing.exe
├írv├şzt┼▒r┼Ĺ t├╝k├Ârf├║r├│g├ęp ├üRV├ŹZT┼░R┼É T├ťK├ľRF├ÜR├ôG├ëP
├írv├şzt┼▒r┼Ĺ t├╝k├Ârf├║r├│g├ęp ├üRV├ŹZT┼░R┼É T├ťK├ľRF├ÜR├ôG├ëP
DEBUG: set_codepage(): OK
��rv��zt��r�� t��k��rf��r��g��p ��RV��ZT��R�� T��K��RF��R��G��P
árvíztűrő tükörfúrógép ÁRVÍZTŰRŐ TÜKÖRFÚRÓGÉP 
```

这背后的解释是什么？我可以以某种方式要求`cout`工作`printf`吗？

**附件**

许多人说 Windows 控制台根本不支持 UTF-8 字符。我是匈牙利的匈牙利人，我的 Windows 设置为英语（日期格式除外，它们设置为匈牙利语），西里尔字母仍然与匈牙利字母一起正确显示：

![控制台上同时显示匈牙利文和西里尔文字母](../Images/7ab2539bf2535d3df5f88f8a14e72647.png)

（我的默认控制台代码页是 CP852）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:57:26.520

这里的区别在于 C++ 运行时和 C 库如何处理系统语言环境。

要使用 std::cout 获得相同的结果，您可以尝试[std::ios::imbue](http://www.cplusplus.com/reference/iostream/ios/imbue/)方法和[std::locale](http://en.cppreference.com/w/cpp/locale/locale)

[但是这里](http://en.wikipedia.org/wiki/C++11)描述的 utf-8 和 C++ 的主要问题

> C++03 提供了两种字符串文字。第一种，包含在双引号中，产生一个 const char 类型的以 null 结尾的数组。第二种，定义为 L""，产生一个 const wchar_t 类型的以空字符结尾的数组，其中 wchar_t 是一个宽字符。两种文字类型都不支持使用 UTF-8、UTF-16 或任何其他类型的 Unicode 编码的字符串文字。

所以无论如何，它都是特定于实现的，因此不可移植，因为标准 C++ 输出流都不能理解 utf-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:24:59.977

就我的理解而言，命令行似乎确实适用于 UTF-8

1.  一种能够显示 UTF-8 字符的字体
2.  在命令行中设置正确的代码页 (chcp 65001) 不确定此代码页是否支持完整的 UTF-8 字符，但它似乎是最好的

[在这里](http://illegalargumentexception.blogspot.pt/2009/04/i18n-unicode-at-windows-command-prompt.html)和 [这里](http://osdir.com/ml/lib.icu.c++.support/2005-01/msg00043.html)看看

[编辑]`65001`在我签入 PowerShell 后实际上是 UTF-8

```
PS C:\Users\forcewill> chcp 65001
Active code page: 65001
PS C:\Users\forcewill>  [Console]::OutputEncoding

BodyName          : utf-8
EncodingName      : Unicode (UTF-8)
HeaderName        : utf-8
WebName           : utf-8
WindowsCodePage   : 1200
IsBrowserDisplay  : True
IsBrowserSave     : True
IsMailNewsDisplay : True
IsMailNewsSave    : True
IsSingleByte      : False
EncoderFallback   : System.Text.EncoderReplacementFallback
DecoderFallback   : System.Text.DecoderReplacementFallback
IsReadOnly        : True
CodePage          : 65001 
```

您可以使用 PowerShell，它比旧的 cmd.exe 更强大

`Edit:`关于使用 cout 如果我们在 Visual Studio 中交谈，正确[答案](http://msdn.microsoft.com/en-us/goglobal/bb688113.aspx#EWE)在[这里](https://stackoverflow.com/a/2849040/992063)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T16:00:17.980

在 Windows 上，单字节字符串通常被解释为 ASCII 或一些 256 字符的代码页。这意味着您不会获得真正的 unicode 支持。

简短的回答是：使用宽字符串（例如`L""árvíztűr..."`- 注意 L）然后写入`wcout`而不是`cout`. Windows 通常将宽（在 Windows 上为 2 个字节）字符串解释为 UTF-16（或至少是一个紧密的变体），因此它将按预期工作。在 Windows 上，始终使用宽字符串来避免编码问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T12:37:31.407

首先windows控制台不支持UTF-8（代码页65001，为了测试这个打开一个用记事本保存在控制台中的UTF-8编码文件，你会在控制台中看到垃圾数据），所以为了检查你的输出你应该将它重定向到一个文件或类似的东西并从那里检查结果（myapp> test.txt）。

C/C++ 中的第二个 char[] 是一个字符序列，可以根据程序员的需要进行解释，但是 UTF-8 是一种特殊的协议来编码 unicode 字符集，所以你没有办法（除了 C++11）一个字符序列和那些用 UTF8 编码的字符，因为我会说`char p[3] = "اب"`，但是如果编译器想用 UTF-8 编码它，它需要 5 个字节而不是 3 个。所以你应该使用理解 UTF-8 的东西。

我建议使用`boost::locale::conv::utf_to_utf`宽字符串常量。例如

```
std::string sUTF8 = boost::locale::conv::utf_to_utf(L"árvíztűrő tükörfúrógép ÁRVÍZTŰRŐ TÜKÖRFÚRÓGÉP\n");
std::cout << sUTF8; // or printf( "%s", sUTF8.c_str() ); 
```

这将确保您拥有 UTF-8 字符串，但再次不要使用控制台检查它，因为它根本不理解 UTF-8 ！！

# android - 如何在活动的 OnCreate() 方法中调用 findViewWithTag？

> ID：12545253
> 
> 赞同：3
> 
> 时间：2012-09-22T15:48:09.453
> 
> 标签：android

调用时出现`findViewWithTag()`错误`onCreate()`

> “MainActivity 类型的方法`findViewWithTag(String)`未定义”

有没有其他选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T15:52:49.460

`findViewWithTag()`仅为视图定义。

如果您有对您设置的活动的 contentView 的引用，则`setContentView(contentView)`可以使用`contentView.findViewWithTag()`.

如果您没有对该视图的引用，您也可以使用`findViewById(R.id.your_content_view_id).findViewWithTag(tag)`.

# java - 为什么我的程序不能使用我分配的字符串运算符来计算两个整数？

> ID：12545254
> 
> 赞同：0
> 
> 时间：2012-09-22T15:48:10.243
> 
> 标签：java

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

为什么我的程序不能使用我分配的字符串运算符来计算两个整数？由于某种原因，就好像程序不接受用户的输入一样。

```
import java.io.*;

public class IntCalc {
    public static void main (String [] args) throws IOException {
        BufferedReader kb = new BufferedReader (new InputStreamReader (System.in));

        System.out.println ("This program performs an integer calculation of your choice.");

        System.out.println ("Enter an integer: ");
        int x = Integer.parseInt (kb.readLine());

        System.out.println ("Enter a second integer: ");
        int y = Integer.parseInt (kb.readLine());

        System.out.print ("Would you like to find the sum, difference, product, quotient, or remainder of your product?: ");
        String operator = kb.readLine();

        int finalNum;

        if (operator == "sum") {
            int finalNum = (x + y);
        } else if (operator == "difference") {
            int finalNum = (x - y);
        } else if (operator == "product") {
            int finalNum = (x * y);
        } else if (operator == "remainder") {
            int finalNum = (x % y);
        }

        System.out.print ("The " + operator + " of your two integers is " + finalNum ".");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:50:41.653

您需要在此处删除`int`声明中的`if`声明。同样在比较字符串时使用`String.equals()`. 确保也进行初始化`finalNum`，否则编译器会抱怨。

```
int finalNum = 0;

if (operator.equals("sum"))
{
   finalNum = (x + y);
}
else if (operator.equals("difference"))
{
   finalNum = (x - y);
}   
else if (operator.equals("product"))
{
   finalNum = (x * y);
}
else if (operator.equals("remainder"))
{
   finalNum = (x % y);
}

System.out.print ("The " + operator + " of your two integers is " + finalNum + "."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:50:43.230

而不是使用**operator == "sum"**使用**operator.equals("sum")**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:54:55.630

几点：

*   当您`int finalNum`在*if 语句中*编写时，您实际上在做的是创建一个新变量并为其分配一个值。但是，此变量的范围仅存在于该特定*if 块*中。因此，您不会看到外部*finalNum*变量得到更新。

*   考虑使用[`equalsIgnoreCase(String anotherString)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)来比较用户的输入是*和、差、积还是余数*。*这是因为在您的情况下，如果用户输入sum 或 SUM 或 Sum* ，您不会感到困扰，理想情况下它们的含义相同。

# php - 在同一行的不同列中插入 2 次随机名称

> ID：12545256
> 
> 赞同：0
> 
> 时间：2012-09-22T15:48:16.243
> 
> 标签：php, mysql, phpmyadmin

这是代码：

```
$sql = "SELECT * FROM blad1 order by RAND() LIMIT 6";
$result = mysql_query($sql) ; 
$row = mysql_fetch_array($result);
$Vnaam = $row["Voornamen"]; 

$sql1 = "SELECT * FROM blad1 order by RAND() LIMIT 6";
$result = mysql_query($sql) ; 
$row = mysql_fetch_array($result);
$Anaam = $row["Achternamen"]; 

$sql2 = "INSERT INTO duivengebruiker (Duif1) VALUES ('$Vnaam $Anaam')";
mysql_query($sql2);

$sql = "SELECT * FROM blad1 order by RAND() LIMIT 6";
$result=mysql_query($sql) ; 
$row=mysql_fetch_array($result);
$Vnaam = $row["Voornamen"]; 

$sql1 = "SELECT * FROM blad1 order by RAND() LIMIT 6";
$result = mysql_query($sql) ; 
$row = mysql_fetch_array($result);
$Anaam = $row["Achternamen"]; 

$sql2 = "INSERT INTO duivengebruiker (Duif2) VALUES ('$Vnaam $Anaam')";
mysql_query($sql2); 
```

这将创建 2 行并将第一个结果放在第一行的第一列中，并将第二个结果放在第二行的第二列中。我只想要两列都填满的 1 行。我该怎么做？大概是件容易的事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:44:49.737

如果我理解正确，您想要做的是在执行插入之前选择两个随机名称。这样您就可以将它们都包含在一个查询中。例如，您可以尝试这样的事情：

```
$sql = "SELECT * FROM blad1 order by RAND() LIMIT 6";

$result = mysql_query($sql) ; 
$row = mysql_fetch_array($result);
$Vnaam1 = $row["Voornamen"]; 

$result = mysql_query($sql) ; 
$row = mysql_fetch_array($result);
$Anaam1 = $row["Achternamen"]; 

$result = mysql_query($sql) ; 
$row = mysql_fetch_array($result);
$Vnaam2 = $row["Voornamen"]; 

$result = mysql_query($sql) ; 
$row = mysql_fetch_array($result);
$Anaam2 = $row["Achternamen"]; 

$insert_sql = "INSERT INTO duivengebruiker (Duif1, Duif2) VALUES ('$Vnaam1 $Anaam1','$Vnaam2 $Anaam2')";
mysql_query($insert_sql); 
```

# php - 使用 PHP 获取网页的一部分

> ID：12545257
> 
> 赞同：1
> 
> 时间：2012-09-22T15:48:24.293
> 
> 标签：php, parsing, search, minecraft

我需要一种方法来仅获取具有特定 ID 的元素并使用 PHP 显示它。我是一个 PHP 菜鸟，所以到目前为止这一直非常困难。与此类似的所有其他问题都太复杂了，所以我想知道是否有人可以向我解释。

为了更具体地说明我想要什么，我正在为我的世界服务器进行法术搜索。我们的网站是[http://pvpzone.org/，wiki](http://pvpzone.org/)是[http://pvpzone.wikispaces.com/](http://pvpzone.wikispaces.com/)。每个咒语在 wiki 上都有一个页面，例如“消失”的页面是 pvpzone.wikispaces.com/Vanish。咒语搜索的想法是寻找咒语的一种更简单的方法，您输入咒语名称并获得结果。div 'wiki wikiPage' 中包含拼写数据。我想得到那个 div 并显示它。遗憾的是，我无法使用法术连接到任何形式的数据库，它由 Wikispaces 托管，他们不允许这样做。

我希望这已经清楚了，如果您愿意，请向我询问更多详细信息。这是我到目前为止所拥有的：

```
<?php
if(isset($_POST['submit']))
{
    $spell=$_POST['spell'];
    $pvpwiki="http://pvpzone.wikispaces.com/";
    $site=$pvpwiki . $spell;
    $submit=true;
}
?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Spell search</title>
    </head>
    <body>
        <form name="spellsearch" id="spellsearchform" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            <input type="text" name="spell" value="<?php if(!isset($_POST['submit'])){echo("Vanish");}?>"></input>
            <input type="submit" value="Search" name="submit"></input>
        </form>
            <?php
                $doc = new DomDocument;
                $doc->validateOnParse = true;
                $doc->loadHtml(file_get_contents($site));
                var_dump($doc->getElementById('wiki wikiPage'));

                if($doc == false && $submit)
                {
                    echo("<br />" . "That is not a spell!");
                }
            ?>
    </body>
</html> 
```

我现在的问题是我收到解析错误（警告：DOMDocument::loadHTML() [domdocument.loadhtml]: ID target_editor already defined in Entity, line: 212 in /home/content/d/e/x/dext0459/ html/russellsayshi/phpspellsearch.php 第 24 行 NULL），非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:35:37.260

您看到的错误消息只是一个警告：

> 警告：DOMDocument::loadHTML() [domdocument.loadhtml]：ID target_editor 已在实体中定义，行：/home/content/d/e/x/dext0459/html/russellsayshi/phpspellsearch.php 中的第 212 行第 24 行 NULL

你可以忽略这些，它们不会阻止你。如果您在您的网站上看到它们，则说明您没有正确配置它，您应该记录错误，而不是显示它们。

无论如何，对于该库，您也可以通过这种方式禁用它们：

```
libxml_use_internal_errors(true); 
```

在加载 HTML 之前调用它。那个HTML顺便说一句。当我尝试使用该网站时没有导致错误。

下一个错误是您正在寻找一个类而不是一个 ID。改为查找 ID：

```
$div = $doc->getElementById('content_view'); 
```

整个代码示例：

```
function get_wiki_page_div($page)
{
    $url = sprintf('http://pvpzone.wikispaces.com/%s', urlencode($page));

    $doc = new DOMDocument();
    $doc->validateOnParse = true;
    libxml_use_internal_errors(true);

    $doc->loadHTMLFile($url);

    $div = $doc->getElementById('content_view');

    if (!$div) {
        return false;
    }

    return $doc->saveXML($div);
} 
```

用法：

```
<?php
$submit = isset($_POST['submit']);
if ($submit)
{
    $spell  = $_POST['spell'];
    $result = get_wiki_page_div($spell);
}
?>

...

<?php
if ($submit)
{
    echo $result ? $result : '<div>This is not a Spell!</div>';
}
?> 
```

# ruby - String#to_i 不匹配

> ID：12545259
> 
> 赞同：0
> 
> 时间：2012-09-22T15:48:40.750
> 
> 标签：ruby, string, casting

`String#to_i`当字符串不匹配任何数字字符时返回`0`，我理解包括我自己在内的许多人认为这不自然，并且希望`nil`在这种情况下返回。但马茨设计的不是这样。将实际上是`"0"`（或`"00"`等）的字符串与不包含数字字符的字符串区分开来的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:54:02.657

采用：

```
Integer('')                         # =>  #<ArgumentError: invalid value for Integer: ""> 
Integer('0')                       # => 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:09:47.237

像这样的东西`i = s.to_i ; i = nil if i == 0 && s != '0'`。如果您经常需要它 - 要么使用monkeypatch to_i，要么添加better_to_i。

# c# - 如何添加 ObservableCollection > 对 T 使用继承

> ID：12545270
> 
> 赞同：3
> 
> 时间：2012-09-22T15:49:41.500
> 
> 标签：c#, observablecollection

假设我有以下课程：

```
public class BaseConfig
{
}

public class SpecialConfig : BaseConfig
{
} 
```

然后我有一个包含这些的通用类定义：

```
public class ConfigList<T> : ObservableCollection<T> where T : BaseConfig
{
} 
```

然后我有另一个类，我想要一个 ConfigList 对象的集合：

```
public class ConfigurationManager
{
    private ObservableCollection<ConfigList<BaseConfig>> _configItems

    public ConfigurationManager()
    {
        _configItems = new ObservableCollection<ConfigList<BaseConfig>>();
    }

    public void AddConfigList(ConfigList<BaseConfig> configList)
    {
        _configItems.Add(configList);
    }
} 
```

然后在应用程序代码的其他地方我有这个：

```
ConfigurationManager _manager = new ConfigurationManager();
ConfigList<SpecialConfig> _configuration = new ConfigList<SpecialConfig>(); 
```

出于某种奇怪的原因，我认为 C# 由于继承而允许以下内容，但事实并非如此。我想知道的是如何完成将对象添加到泛型类的集合中，就像我在下面所做的那样（这肯定是人们遇到的常见问题，并且肯定有一个简单的模式/解决方案可以实现这一点）：

```
_manager.AddConfigList(_configuration); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:19:20.070

它不会以这种方式工作，但幸运的是，您可以通过利用[generic 中的协方差来](http://msdn.microsoft.com/en-us/library/dd799517.aspx)解决问题，定义一个新的协方差接口：

```
public interface IConfigList<out T>
{
} 
```

所以你的 ConfigList 继承了这个接口：

```
public class ConfigList<T> : ObservableCollection<T>, IConfigList<T> 
                                  where T : BaseConfig
{
} 
```

而你的`ConfigurationManager`用途`IConfigList`而不是`ConfigList`

```
public class ConfigurationManager
{
    private ObservableCollection<IConfigList<BaseConfig>> _configItems;

    public ConfigurationManager()
    {
        _configItems = new ObservableCollection<IConfigList<BaseConfig>>();
    }

    public void AddConfigList(IConfigList<BaseConfig> configList)
    {
        _configItems.Add(configList);
    }
} 
```

然后它将起作用：

```
 ConfigurationManager _manager = new ConfigurationManager();
 IConfigList<BaseConfig> _configuration = new ConfigList<SpecialConfig>();

 _manager.AddConfigList(_configuration); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:18:12.433

您需要利用泛型[协方差](http://msdn.microsoft.com/en-us/library/dd799517.aspx)来实现这一点。

# java - 为什么 ThreadPoolExecutor finalize 调用shutdown而不是shutdownNow

> ID：12545279
> 
> 赞同：1
> 
> 时间：2012-09-22T15:50:48.983
> 
> 标签：java, executorservice

类中的 Finalize 方法`ThreadPoolExecutor`如下所示。

```
protected void finalize()  {
    shutdown();
} 
```

考虑下面的程序，其中线程永远不会终止

```
ExecutorService executorService = Executors.newSingleThreadExecutor();
    executorService.submit(new Runnable() {
        @Override
        public void run() {
            try {
                new SynchronousQueue<String>()
                        .put("will never get removed");
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    });
    executorService = null;
    System.gc();

} 
```

在这种情况下，至少 JVM 在这种情况下可能退出`shutdownNow`是更好的选择。`shutdown`

**更新：**

`finalize`为什么调用方法的唯一可能解释`shutdown`是，如果程序员没有显式调用它，它将被调用，而 GC 作为一种防御机制。我发现这种机制存在缺陷，因为在上述情况下，JVM 不会被终止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:00:36.030

首先，让我问你一个问题：为什么需要池化一个永不终止的线程？您汇集对象以重用它们。

java之所以调用shutdown，是为了给线程一个优雅终止的机会。

如果你需要在一个无限循环中运行一个线程，那么你的线程应该检查`Thread.currentThread().isInterrupted()`返回 false，然后从`run()`.

在您展示的示例中，您可能希望使用`offer()`带有超时的方法，而不是和`put()`。

在最坏的情况下，您可以扩展`ThreadPoolExecutor`并调用`shutdownNow()`终结器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:15:04.713

这个故事的寓意是，如果你想关闭一个 ThreadPool，你不应该依赖 finalize 来完成它。Java 中的任何资源都是如此，您*永远不*应该依赖终结机制（因为它可能*永远不会*运行）。如果你想关闭一个线程池，你应该自己管理它。

finalize 方法中的`shutdown()`调用是一个合理的折衷方案，以防程序员“不小心”失去对 ThreadPool 的跟踪。当前任务将运行完成，然后池将关闭。如果`shutdownNow()`被使用，在某个随机时间点（取决于 gc），您的任务将被中断。可能不太理想。而且，您*始终*可以创建一个拒绝关闭的任务，无论是否`shutdown()`被`shutdownNow()`调用（只需`while(true)`在示例中的 try/catch 块周围添加一个循环）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:05:42.173

当`shutdown()`被调用时，这意味着池将不会接受新任务，并且在提交的任务完成后实际上会“*关闭”。*对于您的情况，您最好在`shutdownNow()`您想要的地方显式调用。

# qt - 在Qt中的鼠标指针下选择Word

> ID：12545286
> 
> 赞同：2
> 
> 时间：2012-09-22T15:51:44.343
> 
> 标签：qt

当我在 QTextBrowser 中单击右键时，我需要突出显示并获取鼠标指针下的单词。我已经为**QTextBrowser 实现**了用于鼠标右键单击的**showContextMenu**函数。但是我无法突出显示鼠标指针下的单词并提取它。我在网上找到了以下解决方案：

 **```
QTextCursor tc = txtBrwsr->textCursor();
tc.select(QTextCursor::WordUnderCursor);
QString word = tc.selectedText(); 
```

但是，它不起作用并且**单词**是空的，我这样做的目的是获取单词并突出显示它，即使用户在按下鼠标右键之前没有突出显示该单词。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T22:00:30.020

`textCursor()`函数返回 QTextCursor 的副本。您需要`setTextCursor()`在所有更改后致电。

这是单击右键后如何在鼠标光标下突出显示单词的示例。

*MyTextBrowser.h*

```
class MyTextBrowser : public QTextBrowser {
// ...
protected:
    void mousePressEvent(QMouseEvent *mouseEvent);
// ...
}; 
```

*MyTextBrowser.cpp*

```
void MyTextBrowser::mousePressEvent(QMouseEvent *mouseEvent) {
    if (Qt::RightButton == mouseEvent->button()) {
        QTextCursor textCursor = cursorForPosition(mouseEvent->pos());
        textCursor.select(QTextCursor::WordUnderCursor);
        setTextCursor(textCursor);
        QString word = textCursor.selectedText();

        qDebug() << word;
    }
    QTextBrowser::mousePressEvent(mouseEvent);
} 
```

祝你好运。**

# ruby-on-rails - 如何为登录编写 Omniauth RSpec？

> ID：12545288
> 
> 赞同：7
> 
> 时间：2012-09-22T15:51:57.800
> 
> 标签：ruby-on-rails, rspec, omniauth

当用户访问时，它会被重定向到 FB，如果成功`/auth/facebook`则返回我的。`/auth/facebook/callback`

如何编写一个 RSpec 测试来遵循所有这些重定向来验证我的用户是否已通过身份验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T20:21:38.930

我会推荐一种替代的、**更简单**的方法。如果您直接测试回调控制器以查看它对omniauth.auth 中传递给它的不同值的反应，或者如果env[“omniauth.auth”] 丢失或不正确，该怎么办。以下重定向相当于测试omniauth 插件，它不会测试您的系统。

例如，这是我们在测试中的内容（这只是几个示例，我们还有更多示例可以在登录尝试之前验证omniauth 哈希和用户状态的其他变体，例如邀请状态、用户帐户被禁用管理员等）：

```
describe Users::OmniauthCallbacksController do
  before :each do
    # This a Devise specific thing for functional tests. See https://github.com/plataformatec/devise/issues/608
    request.env["devise.mapping"] = Devise.mappings[:user]
  end
  describe ".create" do

    it "should redirect back to sign_up page with an error when omniauth.auth is missing" do
      @controller.stub!(:env).and_return({"some_other_key" => "some_other_value"})
      get :facebook
      flash[:error].should be
      flash[:error].should match /Unexpected response from Facebook\./
      response.should redirect_to new_user_registration_url
    end

    it "should redirect back to sign_up page with an error when provider is missing" do
      stub_env_for_omniauth(nil)
      get :facebook
      flash[:error].should be
      flash[:error].should match /Unexpected response from Facebook: Provider information is missing/
      response.should redirect_to new_user_registration_url
    end
  end
end 
```

方法`stub_env_for_omniauth`定义如下：

```
def stub_env_for_omniauth(provider = "facebook", uid = "1234567", email = "bob@contoso.com", name = "John Doe")
  env = { "omniauth.auth" => { "provider" => provider, "uid" => uid, "info" => { "email" => email, "name" => name } } }
  @controller.stub!(:env).and_return(env)
  env
end 
```

# ruby-on-rails - Rails 会话在 ajax 调用期间未保存

> ID：12545291
> 
> 赞同：2
> 
> 时间：2012-09-22T15:52:04.943
> 
> 标签：ruby-on-rails, ajax, session, jquery, session-cookies

完成特定操作后我有这个 ajax 调用

```
 $.ajax({
              type: "POST",
              url: $("#myform").prop('action'),
              data: $("#myform").serialize(),
              xhrFields: {withCredentials: true},
              beforeSend: function(xhr) {
                xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').last().attr('content'));
              }
          }); 
```

这个 ajax 调用指的是创建操作，所以我想将表单的参数保存在我之前创建的会话中。所以我把它放在创建动作中

```
 def create
      session[:my_session].deep_merge!(params[:user])
      puts session[:my_session] 
```

我打印会话以从服务器确保它包含正确的参数，是的，它已经打印了正确的值。

```
{"profile_id"=>"1000", "first_name"=>"john", "last_name"=>"vieira", "email"=> "john@sandsora.com"} 
```

这里的问题是在那个调用之后，会话没有保存我存储的数据！这意味着它存储了这个分配之前的最新数据。我搜索了那个错误，我发现它可能是 CSRF 令牌错误，我通过添加`beforeSend`函数修复了它，但我仍然有同样的问题，所以请给点建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:49:24.183

我的第一个猜测是没有设置会话 cookie 标头。如果没有此 cookie，rails 无法设置正确的会话，并且您的数据在请求完成后“丢失”。您的浏览器应该在您的 ajax 请求中自动发送它......

您能否验证会话 cookie 是否与您的 ajax 请求一起发送？

# android - GridView Adapter.getView() 未正确设置选定状态

> ID：12545302
> 
> 赞同：1
> 
> 时间：2012-09-22T15:53:34.443
> 
> 标签：android, button, gridview, adapter, selected

我有一个 GridView，我用 ArrayAdapter 的自定义子类填充。此适配器返回我已自定义为可选择的按钮（请参阅[Android ImageButton with a selected state?](https://stackoverflow.com/questions/2604599/android-imagebutton-with-a-selected-state)）。到目前为止，这是有效的，单击按钮会选择它们（通过选择器背景可见）。

问题是：我无法从一开始就将这些按钮设置为选定状态。当我第一次启动视图时，它们只是显示未选中。

我创建了一个简单的测试项目来说明问题：

```
package com.example.buttonselection;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.GridView;

public class MainActivity extends Activity {

    public class SelectButtonAdapter extends ArrayAdapter<String> {

        public SelectButtonAdapter(Context context) {
            super(context, 0);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            String name = getItem(position);

            View rowView = convertView;
            if (rowView == null || !(rowView instanceof Button)) {
                rowView = new Button(getContext());
                ((Button)rowView).setOnClickListener(new OnClickListener() {
                    public void onClick(View button) {
                        if (button.isSelected()){
                            button.setSelected(false);
                        } else {
                            button.setSelected(true);
                        }
                    }
                });
            }

            Button button = (Button)rowView;
            button.setText(name);
            button.setBackgroundResource(R.drawable.button_selection);

            button.setSelected(true); // this does not work

            return button;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GridView grid = (GridView)findViewById(R.id.gridview);

        SelectButtonAdapter adapter = new SelectButtonAdapter(this);
        adapter.add("One");
        adapter.add("Two");
        adapter.add("Three");
        grid.setAdapter(adapter);
    }
} 
```

因此，我什至无法恢复使用 onSaveInstanceState 保存的按钮的状态。我该如何解决或解决此问题？

我很感激任何帮助！

编辑：这是我的 button_selection.xml，虽然这应该没问题，因为稍后选择按钮可以正常工作。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true">
        <shape>

            <solid android:color="@color/bet_button_pressed" />

            <stroke
                android:width="2dip"
                android:color="@color/white" />

        </shape>
    </item>

    <item android:state_selected="true">
        <shape>

            <solid android:color="@color/bet_button_selected" />

            <stroke
                android:width="2dip"
                android:color="@color/white" />

        </shape>
    </item>

        <item>
        <shape>

            <gradient
                android:angle="90"
                android:startColor="@color/bet_button_dark_green"
                android:endColor="@color/bet_button_light_green"
                android:centerX="0.5"
                android:centerY="0.5" />

            <stroke
                android:width="2dip"
                android:color="@color/white" />

        </shape>
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T12:42:25.223

好吧，我找到了解决此错误的方法。我只是在外部存储选择按钮的天气并覆盖按钮的 ondraw 方法以在每次绘制时设置正确的状态。这具有额外的优势，即可以更轻松地保留选择。

这是解决方法（只是一个简单的概念证明，我的生产代码更复杂）：

```
package com.example.buttonselection;

import java.util.HashSet;
import java.util.Set;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.GridView;

public class MainActivity extends Activity {

    public class SelectButtonAdapter extends ArrayAdapter<String> {

        public SelectButtonAdapter(Context context) {
            super(context, 0);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            String name = getItem(position);

            View rowView = convertView;
            if (rowView == null || !(rowView instanceof Button)) {
                rowView = new Button(getContext()) {
                    @Override
                    protected void onDraw(Canvas canvas) {
                        setSelected(selectedButtons.contains(getText()));
                        super.onDraw(canvas);
                    }
                };
                ((Button)rowView).setOnClickListener(new OnClickListener() {
                    public void onClick(View button) {
                        String text = ((Button)button).getText().toString();

                        if(selectedButtons.contains(text)) {
                            selectedButtons.remove(text);
                        } else {
                            selectedButtons.add(text);
                        }
                        button.invalidate();
                    }
                });
            }

            Button button = (Button)rowView;
            button.setText(name);
            button.setBackgroundResource(R.drawable.button_selection);

            return button;
        }

    }
    private Set<String> selectedButtons = new HashSet<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GridView grid = (GridView)findViewById(R.id.gridview);

        SelectButtonAdapter adapter = new SelectButtonAdapter(this);
        adapter.add("One");
        adapter.add("Two");
        adapter.add("Three");
        grid.setAdapter(adapter);

        // this selects the first button from the start
        selectedButtons.add("One");
    }

} 
```

附带说明：有人会认为，4.1 版的 API 不会包含如此明显的错误。浪费在这上面的时间令人沮丧，并没有动力为这个系统开发更多东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T23:58:17.277

我也有同样的问题。作为一种解决方法，我使用了一个可运行的对象来设置要选择的视图。

对于您的情况：

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
           String name = getItem(position);

           View rowView = convertView;
           if (rowView == null || !(rowView instanceof Button)) {
               rowView = new Button(getContext());
               ((Button)rowView).setOnClickListener(new OnClickListener() {
                    public void onClick(View button) {
                        if (button.isSelected()){
                            button.setSelected(false);
                        } else {
                            button.setSelected(true);
                        }
                   }
               });
            }

            Button button = (Button)rowView;
            button.setText(name);
            button.setBackgroundResource(R.drawable.button_selection);

            final Handler handler = new Handler();
            handler.postDelayed(new Runnable() {
                @Override
                public void run() {
                    button.setSelected(true);
                }
            }, 50);

            return button;
        } 
```

50只是我选择使用的一个随机数，你可以随意改变它。

这种解决方法对我有用，我个人更喜欢这种方法而不是覆盖 onDraw 方法。

希望这可以帮助某人。

# c# - 从字符串中消除字符

> ID：12545304
> 
> 赞同：0
> 
> 时间：2012-09-22T15:53:45.713
> 
> 标签：c#, asp.net, visual-studio-2010

我正在从文件中读取，一些数据是这样进来的

```
"\"ZIP\"" 
```

所以当我尝试将其分配给它导致错误时，我想摆脱额外的`\"`，所以如果我将它分配给像这样的字符串

```
string s = data[1].ToString(); 
```

什么`s`是`"\"ZIP\""`

我只是希望它是“ZIP”，我试过：

```
string s = data[1].ToString().replace("\\\"",""); 
```

但没有运气。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:00:22.670

试试看嘛：

```
var result = "\"ZIP\"".Replace("\"", ""); 
```

或者：

```
 var result = "\"ZIP\"".Trim('"'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:00:44.460

String.Trim 可以与 char 数组一起使用，以从字符串的开头和结尾删除

```
char[] charsToTrim = { '"', '\\'};
string s = data[1].ToString().Trim(charsToTrim); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T16:07:11.667

通过拆分删除字符串中的转义字符并创建新字符串。您可以根据需要在转义序列数组中包含任意数量的字符。

```
StringBuilder sb = new StringBuilder();
string[] parts = inputString.Split(new char[] {'"'};
 StringSplitOptions.RemoveEmptyEntries);
int size = parts.Length;
for (int i = 0; i < size; i++)
    sb.AppendFormat("{0} ", parts[i]);= 

string strWithoutEscape = sb.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T16:06:41.040

尝试：

```
data[1].toString().replace("\\\"", ""); 
```

请注意，该函数区分大小写，因此使用 ToString 会失败。

# java - 为什么我们在策略设计模式中需要 Context 类？

> ID：12545305
> 
> 赞同：2
> 
> 时间：2012-09-22T15:53:54.653
> 
> 标签：java, design-patterns, strategy-pattern

为什么在策略模式中需要上下文类？

例如，我想使用 zip 或 rar 压缩来压缩文件。我们可以使用带有以下文件的策略模式来解决这个问题。

```
1.ICompressionStrategy...Its interface
2.ZipCompressionStrategy ..implements IcompressionStrategy
3.RarCompressionStrategy ..implements IcompressionStrategy
4.CompressionContext..Inject IcompressionStrategy
5.Client..Inject CompressionContext 
```

在上述情况下，为什么我们需要 CompressionContext 类？为什么我不能将 IcompressionStrategy 注入 Client 类？

在上述场景中使用 CompressionContext 类有什么好处？我可以避免吗？

这是我正在谈论的示例

[http://java.dzone.com/articles/design-patterns-strategy](http://java.dzone.com/articles/design-patterns-strategy)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:09:42.707

策略模式的思想是使用可变策略自定义任务的*某些部分*。

在上面的示例中，上下文不仅仅是简单地压缩文件列表。例如，它可以是一个遍历文件夹层次结构、选择要压缩的文件、将它们放入列表、使用压缩策略并将压缩结果写入另一个位置的类。该算法可以通过提供压缩策略来定制，该策略仅用于整个算法的压缩步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-21T04:58:21.427

`Context`可以解耦`client`和`strategy`。
如果没有`context`，当你想改变`strategy`' 的界面时，你也必须改变里面的界面`client`。
但是，您可能无权更改，`client`否则可能会导致合并冲突。
但如果有`context`，你只需要改变成就，`context`不需要改变`client`。

# ios - 如何告诉 ABPeoplePickerNavigationController 仅列出具有电子邮件地址的联系人？

> ID：12545310
> 
> 赞同：6
> 
> 时间：2012-09-22T15:54:19.730
> 
> 标签：ios, filter, contacts, addressbook

我希望我的用户通过从通讯簿中选择联系人的电子邮件来填写电子邮件字段。我不希望他们滚动未设置电子邮件的所有联系人，因此我想过滤具有电子邮件地址的联系人。

这是我到目前为止写的代码。我可以弄清楚谁有电子邮件地址，谁没有，但我不能告诉他们`ABPeoplePickerNavigationController`只列出正确的联系人。是否不可能实现这一点，我的意思是我必须通过使用表格视图来实现我自己的联系人选择器类，还是这段代码有问题？

```
ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *peopleList = (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
NSLog(@"%ld people exist in the addressBook", ABAddressBookGetPersonCount(addressBook));
for (id peopleRecord in peopleList) {
    ABMultiValueRef mv = ABRecordCopyValue((ABRecordRef)peopleRecord, kABPersonEmailProperty);
    CFIndex numberOfAddresses = ABMultiValueGetCount(mv);
    if(numberOfAddresses == 0) {
        CFErrorRef err;
        ABAddressBookRemoveRecord( addressBook, (ABRecordRef)peopleRecord, &err);
    }
}
[peopleList release];

NSLog(@"%ld people have an email", ABAddressBookGetPersonCount(addressBook));

ABPeoplePickerNavigationController *peoplePicker = [[ABPeoplePickerNavigationController alloc] init];
NSNumber* emailProp = [NSNumber numberWithInt:kABPersonEmailProperty];
[peoplePicker setAddressBook:addressBook];
peoplePicker.displayedProperties = [NSArray arrayWithObject:emailProp];
[peoplePicker setPeoplePickerDelegate:self];
[self presentModalViewController:peoplePicker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-11T23:30:04.713

我知道这很旧，但我在研究相关主题时偶然发现了这一点，所以我想我会用我的发现来更新它。

1.  虽然它不会过滤结果，但值得注意的是 iOS 8 具有禁用没有电子邮件地址的联系人的功能：

    ```
    peoplePickerController.predicateForEnablingPerson = [NSPredicate predicateWithFormat:@"emailAddresses.@count > 0"]; 
    ```

    您仍然可以看到所有联系人，但至少那些没有电子邮件地址的联系人被禁用。显然，如果您的最低目标操作系统早于 iOS 8，您将有条件地执行上述操作：

    ```
    if ([peoplePickerController respondsToSelector:@selector(predicateForEnablingPerson)]) {
        peoplePickerController.predicateForEnablingPerson = [NSPredicate predicateWithFormat:@"emailAddresses.@count > 0"];
    } 
    ```

2.  如果你想过滤掉那些没有地址的条目，你必须为此提供你自己的用户界面（例如创建你自己的表格视图）。因此，首先，使用如下电子邮件地址构建您自己的联系人数组：

    ```
    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
        if (granted) {
            NSArray *allPeople = CFBridgingRelease(ABAddressBookCopyArrayOfAllPeople(addressBook));
            NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(id person, NSDictionary *bindings) {
                ABMultiValueRef emails = ABRecordCopyValue((__bridge ABRecordRef)person, kABPersonEmailProperty);
                NSInteger count = ABMultiValueGetCount(emails);
                CFRelease(emails);
                return count > 0;
            }];

            NSArray *peopleWithEmails = [allPeople filteredArrayUsingPredicate:predicate];

            // You now have an array of `ABRecordRef` associated with 
            // those contacts with email addresses. You can use this as 
            // the model backing your own table view, or populate your
            // own model.
        } else {
            NSLog(@"Access not granted");
            if (error) {
                CFRelease(error);
            }
        }
    }); 
    ```

    完成此操作后，您可以构建自己的 tableview 列出相关的详细信息`peopleWithEmails`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:24:49.377

我不相信有办法让 iOS 进行这种过滤。我也是用代码做的。请注意，您需要查找所有类型的电子邮件地址 - 您必须遍历可以获得的字典。使用它肯定是一个 PITA - 我以前做过 - 你必须小心不要有内存泄漏。

我所做的是按照您的建议 - 自己遍历所有联系人，然后我弹出一个带有表格的视图，然后选择他们想要的人的姓名。我保持关联，因此我知道什么地址与什么名称相关联，然后使用系统电子邮件框架，然后填充发送地址。

# c# - MongoDB 连接管理

> ID：12545311
> 
> 赞同：0
> 
> 时间：2012-09-22T15:54:21.813
> 
> 标签：c#, mongodb

我正在使用标准的 .net 驱动程序（http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial），并且很想知道我们如何使用驱动程序以类似于如何使用驱动程序来管理连接我们在我们的 SQL DB 上做。

这是我们连接到 SQL DB 的方式

```
public static SqlConnection GetOpenConnection()
        {
            var ConnectionStrO = ConfigurationManager.ConnectionStrings[_ConnectionStringName];
            var connection = new SqlConnection(ConnectionStrO.ConnectionString);
            connection.Open();
            return connection;  
        } 
```

然后要在应用程序中的任何位置使用该连接，我们只需调用

```
using(var CurConnection = Database.GetOpenConnection())
{

    //Use connection here.

} 
```

是否有任何示例说明我们如何使用 MongoDB 做类似的事情并像上面那样管理连接？

或者关于管理与 MongoDb 驱动程序的连接的任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:05:13.157

复制自[http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-TheC%23Driver](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-TheC%23Driver)

```
public static function MongoServer GetConnection() {
    var url = MongoUrl.Create(ConfigurationManager.ConnectionStrings[_ConnectionStringName]);
    var server = MongoServer.Create(url);
    return server;
} 
```

# scala - Scala的线性代数库？

> ID：12545313
> 
> 赞同：6
> 
> 时间：2012-09-22T15:54:30.143
> 
> 标签：scala, linear-algebra

> **可能重复：**
> [Scala 有没有好的数学/统计库？](https://stackoverflow.com/questions/8760925/is-there-a-good-math-stats-library-for-scala)

我正在寻找 Scala 的线性代数库（用于实现随机森林算法）。但是，似乎有许多 Scala LA 库，不知道该选择哪个。

我遇到过[scalala](http://code.google.com/p/scalala/)、[ScaLAPACK](http://www.netlib.org/scalapack/)、[ScalaNLP](http://www.scalanlp.org/)、[scalalalab](http://code.google.com/p/scalalab/)等...

我正在寻找一个尚未被放弃的具有良好文档的库。

介意与任何 Scala 线性代数库分享您的经验吗？你会推荐哪一个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T17:03:26.793

请参阅[http://www.scalanlp.org/](http://www.scalanlp.org/)，其中[Breeze](https://github.com/dlwh/breeze)是 ScalaNLP 和 Scalala 项目的合并

# bash - shell如何检测终端是否支持颜色

> ID：12545316
> 
> 赞同：3
> 
> 时间：2012-09-22T15:54:42.880
> 
> 标签：bash, colors, terminal

> **可能重复：**
> [将数据管道传输到需要 TTY（终端）的 Linux 程序](https://stackoverflow.com/questions/4233808/piping-data-to-linux-program-which-expects-a-tty-terminal)

我想从非交互式脚本中显示颜色，我需要告诉 shell 实际上我的脚本是一个支持颜色的终端，所以像 ls 这样的命令`--color=auto`将显示颜色（ls 有选项`--color=always`，但我想支持所有可能的命令也支持颜色）。

我通过 python Popen 调用我的 shell。我尝试设置 TERM 环境变量，但它不起作用。

```
subprocess.Popen(['/bin/bash', '-c', command],
                  env={'TERM':'xterm-color'},
                  stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

有没有办法告诉 bash 我是一个终端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:05:13.830

程序通常会自动确定 ( `ls --color=auto`) 是否连接了终端。这是通过检查标准输出/错误文件描述符来实现的。

如果您在 python 之间进行管道传输（正如您在上面的示例中所做的那样），程序的 stdout/err 将连接到管道，而不是终端，因此通常不会输出颜色代码。

尝试将进程的 stdout/err**直接**重定向到附加的终端，而不是返回到您的 python 应用程序。如果这不可行（因为您需要 python 中的输出——但在这种情况下，您通常不想要颜色代码），您将不得不以某种方式在 python 中设置一个伪终端。

# c - 对 MSP430 微控制器的 printf 支持

> ID：12545317
> 
> 赞同：2
> 
> 时间：2012-09-22T15:54:50.733
> 
> 标签：c, embedded, printf, msp430

我正在使用不同的 C 编译器为德州仪器 (TI) MSP430 微控制器升级经过全面测试的 C 程序，从 Quadravox、AQ430 开发工具更改为 VisualGDB C 编译器。

该程序使用 VisualGDB 以零错误和零警告编译。中断服务程序、定时器、UART 控制等等似乎都在工作。但是，sprintf 的某些用途不起作用。例如：

```
unsigned int duration;
float msec;

msec = (float)duration;

msec = msec / 125.0;

sprintf(glb_response,"break: %3.1f msec",msec); 
```

这将返回：`break: %3.1f msec`

这是预期的：`break: 12.5 msec`

我了解到以下内容（来自维基百科）：

> 编译器选项 --printf_support=[full | 最小 | nofloat] 允许您使用更小、功能有限的 printf/sprintf 变体，并在构建时做出选择。
> 
> 有效值为：
> 
> full：支持所有格式说明符。这是默认设置。
> 
> nofloat：不支持打印浮点值。支持除 %f、%g、%G、%e 和 %E 之外的所有格式说明符。
> 
> 最小：支持打印没有宽度或精度标志的整数、字符或字符串值。具体来说，仅支持 %%、%d、%o、%c、%s 和 %x 格式说明符

我需要对 printf 的全面支持。我知道我的产品上的 MSP430 将支持这一点，因为这个 C 程序已经使用了多年。

我的问题是我无法弄清楚 1）VisualGDB 是否有办法将 printf 支持设置为完全和 2）如果有，在哪里设置它。

任何和所有的评论和答案将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T16:43:22.903

我建议对浮点的完全支持既不必要又不明智。解决一个琐碎的问题需要大量的代码；在没有浮点硬件的情况下，出于性能、代码空间和内存使用的原因，通常最好避免浮点运算。

因此，它似乎`duration`以 1/125000 秒为单位，并且您希望输出一个精度为 0.1 毫秒的值。所以：

```
unsigned msec_x10 = duration * 10u / 125u ;

sprintf( glb_response, 
         "break: %u.%u msec", 
         msec_x10 / 10,  
         msec_x10 % 10 ) ; 
```

如果你想四舍五入到最接近的十分之一（而不是四舍五入），那么：

```
unsigned msec_x10 = ((duration * 20u) + 125 ) / 250u ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T17:13:44.467

我同意 Clifford 的观点，如果您不需要花车（或只需要它们用于打印），请不要使用它们。

但是，如果您的程序已经广泛使用浮点数，并且您需要一种打印它们的方法，请考虑调整公共域 printf，例如[SQLite 中的](http://www.sqlite.org/cgi/src/artifact/4a9f882f1c1787a8b494a2987765acf9d97ac21f)printf 。

# jsf - JSF 页面中的选项卡不起作用

> ID：12545319
> 
> 赞同：0
> 
> 时间：2012-09-22T15:54:57.227
> 
> 标签：jsf, jsf-2

我有一个我无法解决的问题。当我打开 JSF 选项卡并尝试单击页面不工作的按钮时。

主页：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
        <style type="text/css">
            .settingsHashMap { font: 80% "Trebuchet MS", sans-serif;}
        </style>
    </h:head>
    <h:body>
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> Rack Management Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:100%; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>
        </div>  
        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Datacenter Profile" style="position:relative" value="resources/images/logo_datacenter_profile.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMapz" class="settingsHashMap" style="width:1150px; height:400px; position:absolute; top:20px; left:1px">

                    <h:form prependId="false">
                        <h:panelGroup id="tabs" layout="block">
                            <ul>
                                <c:forEach items="#{DatacenterProfileController.tabs}" var="tab">
                                    <li><a href="##{tab.tabid}" onclick="$('#button_#{tab.tabid}').click()">#{tab.tabid}</a></li>
                                    <h:commandButton id="button_#{tab.tabid}" value="TabClick" action="#{DatacenterProfileController.switchPages(tab.tabid)}" style="display:none">
                                        <f:ajax render="tabs"></f:ajax>
                                    </h:commandButton>  
                                </c:forEach>
                            </ul>

                            <c:forEach items="#{DatacenterProfileController.tabs}" var="tab">
                                <h:panelGroup id="#{tab.tabid}" layout="block" rendered="#{tab.tabid eq DatacenterProfileController.selectedTab}">
                                    <ui:include src="#{tab.tabfilename}"></ui:include>
                                </h:panelGroup>
                            </c:forEach>

                        </h:panelGroup>
                    </h:form>

                </div>   

            </div>  
        </div>
    </h:body>
</html> 
```

标签页：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>

    </h:head>
    <h:body>
        <ui:composition>
            <h:panelGroup>
                <h:form id="zones" >
                    <p:growl id="growl" showDetail="true" sticky="true" />
                    <!-- The sortable data table -->
                    <h:dataTable onmouseover="addOnclickToTabsDatatableRows();" id="dataTable" headerClass="columnHeader" value="#{DCProfileTabZonesController.dataList}" binding="#{zones}" var="item">
                        <!-- Check box -->
                        <h:column>
                            <f:facet name="header">
                                <h:selectBooleanCheckbox style="margin-left: 0px;" value="#{DCProfileTabZonesController.mainSelectAll}" class="checkall" >
                                    <f:ajax listener="#{DCProfileTabZonesController.selectAll}" render="@form" />
                                </h:selectBooleanCheckbox>
                            </f:facet>
                            <h:selectBooleanCheckbox  onclick="highlight(this)" value="#{DCProfileTabZonesController.selectedIds[item.datacenterid]}" >
                                <!-- if the user deselects one row deselect the main checkbox -->
                                <f:ajax listener="#{DCProfileTabZonesController.deselectMain}" render="@form" />
                            </h:selectBooleanCheckbox>
                            <!-- Click on table code -->  
                            <h:outputLink id="lnkHidden" value="ZoneProfile.jsf" style="text-decoration:none; color:white; background-color:black">
                                <f:param name="id" value="#{item.datacenterid}" />
                            </h:outputLink>
                        </h:column>
                        ............

                    </h:dataTable>

                    <!-- The paging buttons -->
                    <h:commandButton styleClass="bimage" value="first" action="#{DCProfileTabZonesController.pageFirst}"
                                     disabled="#{DCProfileTabZonesController.firstRow == 0}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;

                    <h:commandButton styleClass="bimage" value="prev" action="#{DCProfileTabZonesController.pagePrevious}"
                                     disabled="#{DCProfileTabZonesController.firstRow == 0}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;

                    <h:commandButton styleClass="bimage" value="next" action="#{DCProfileTabZonesController.pageNext}"
                                     disabled="#{DCProfileTabZonesController.firstRow + DCProfileTabZonesController.rowsPerPage >= DCProfileTabZonesController.totalRows}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;    

                    <h:commandButton styleClass="bimage" value="last" action="#{DCProfileTabZonesController.pageLast}"
                                     disabled="#{DCProfileTabZonesController.firstRow + DCProfileTabZonesController.rowsPerPage >= DCProfileTabZonesController.totalRows}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;

                    <h:outputText value="Page #{DCProfileTabZonesController.currentPage} / #{DCProfileTabZonesController.totalPages}" />
                    <br />

                    <!-- The paging links -->
                    <ui:repeat value="#{DCProfileTabZonesController.pages}" var="page">
                        <h:commandLink value="#{page}" actionListener="#{DCProfileTabZonesController.page}"
                                       rendered="#{page != DCProfileTabZonesController.currentPage}" style="text-decoration:none;color:white;">
                            <f:ajax render="@form" execute="@form"></f:ajax>   
                        </h:commandLink>
                        <h:outputText value="#{page}" escape="false"
                                      rendered="#{page == DCProfileTabZonesController.currentPage}" style="text-decoration:none;color:gray;"/>
                    </ui:repeat>
                    <br />

                    <!-- Set rows per page -->
                    <h:outputLabel for="rowsPerPage" value="Rows per page" />
                    <h:inputText id="rowsPerPage" value="#{DCProfileTabZonesController.rowsPerPage}" size="3" maxlength="3" />
                    <h:commandButton styleClass="bimage" value="Set" action="#{DCProfileTabZonesController.pageFirst}" >
                        <f:ajax render="@form" execute="@form"></f:ajax>
                    </h:commandButton>&nbsp;
                    <h:message for="rowsPerPage" errorStyle="color: red;" />

                    <!-- hidden button -->
                    <h:commandButton id="deleterow" value="HiddenDelete" action="#{DCProfileTabZonesController.deleteSelectedIDs}" style="display:none">
                        <f:ajax render="@form"></f:ajax>
                    </h:commandButton>

                    <!-- the delete button -->
                    <h:button styleClass="bimage" value="Delete" onclick="deletedialog(this, 'Do you want to delete the selected rows?'); return false;" />&nbsp;

                    <!-- New Zone -->
                    <h:button id="newzone" styleClass="lbimage" value="New Zone" outcome="/NewZone.xhtml"/>

                    <script type="text/javascript" src="resources/js/tabs.js"></script> 
                </h:form>         
            </h:panelGroup>
        </ui:composition>
    </h:body>
</html> 
```

当我删除`ui:composition`标签并将所有代码插入一页时，按钮正在工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:01:51.940

正如您在其中一条评论中指出的那样，您不能使用嵌套表单。您需要重新构建布局。将您的外部形式放在您的周围`<ul>`：

```
<h:panelGroup id="tabs" layout="block">
     <h:form prependId="false">
          <ul>
          ...
          </ul>
     </h:form>

     <c:forEach items="#{DatacenterProfileController.tabs}" var="tab">
          ...
     </c:forEach>
 </h:panelGroup> 
```

其余的代码应该没问题。通过这种方式，您可以避免嵌套表单。

# r - 将 vline 添加到现有绘图并使其出现在 ggplot2 图例中？

> ID：12545322
> 
> 赞同：13
> 
> 时间：2012-09-22T15:55:24.200
> 
> 标签：r, ggplot2

我有一些数据用于绘制直方图。我还有两组具有一定意义的阈值。

我能够用适当的样式绘制直方图和 vlines。但是，我无法让我的 vlines 出现在图例中。我相信这样的事情应该可以工作，但是图例项目永远不会显示。

```
df <- data.frame(val=rnorm(300, 75, 10))

cuts1 <- c(43, 70, 90)
cuts2 <- c(46, 79, 86)

ggplot(data=df, aes(x=val)) +
  geom_histogram() +
  geom_vline(xintercept=cuts1,
             linetype=1,
             color="red",
             labels="Thresholds A",
             show_guide=TRUE) +
  geom_vline(xintercept=cuts2,
             linetype=2,
             color="green",
             labels="Thresholds B",
             show_guide=TRUE) 
```

或者，如果我为我的剪辑构建一个 data.frame 并进行美学映射，我可以让我的 vlines 显示在图例中。不幸的是，图例给了我两个不同线型相互叠加的实例：

```
cuts1 <- data.frame(Thresholds="Thresholds A", vals=c(43, 70, 90))
cuts2 <- data.frame(Thresholds="Thresholds B", vals=cuts2 <- c(46, 79, 86))

ggplot(data=df, aes(x=val)) +
  geom_histogram() +
  geom_vline(data=cuts1, aes(xintercept=vals, shape=Thresholds),
             linetype=1,
             color="red",
             labels="Thresholds A",
             show_guide=TRUE) +
  geom_vline(data=cuts2, aes(xintercept=vals, shape=Thresholds),
             linetype=2,
             color="green",
             labels="Thresholds B",
             show_guide=TRUE) 
```

![在此处输入图像描述](../Images/98c70a92885619fb096eb518726364e2.png)

所以，最后，我正在寻找的是手动将两组线添加到绘图中的最直接方法，然后让它们正确显示在图例中。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-22T17:30:04.540

诀窍是将阈值数据全部放在*同一个*数据框中，然后映射美学，而不是设置它们：

```
cuts <- rbind(cuts1,cuts2)

ggplot(data=df, aes(x=val)) +
  geom_histogram() +
  geom_vline(data=cuts, 
             aes(xintercept=vals, 
                 linetype=Thresholds,
                 colour = Thresholds),
             show_guide = TRUE) 
```

![在此处输入图像描述](../Images/783b5a7007b52e9c969e356367586f7a.png)

# symfony - 使用 Symfony2 的配置类时，允许配置数组中存在额外的未定义选项

> ID：12545323
> 
> 赞同：15
> 
> 时间：2012-09-22T15:55:40.797
> 
> 标签：symfony, configuration

我正在尝试定义一个`Configuration`对象。我已经成功定义了一个数组原型节点（如`security.firewalls`）。我的原型数组有一个必需的元素，但如果需要，我想允许将任意参数添加到每个数组中。

我的问题是，如何允许将额外的未定义元素添加到每个原型数组中？

这是我的配置：

```
acme_widget:
    handlers:
        handler_one:
            service: handler.one.service
        handler_two:
            service: handler.two.service
            extra_array:
                - Extra 1
                - Extra 2
            extra_scalar: Extra 3 
```

这是我的班级建设者：

```
 /**
     * Generates the configuration tree.
     *
     * @return TreeBuilder
     */
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder;
        $rootNode = $treeBuilder->root('acme_widget');

        $rootNode
            ->children()
                ->arrayNode('handlers')
                    ->useAttributeAsKey('service')
                    ->prototype('array')
                        ->children()
                            ->scalarNode('service')->isRequired()->end()
                            ->booleanNode('enabled')->defaultTrue()->end()
                        ->end()
                    ->end()
                ->end()
            ->end()
        ;

        return $treeBuilder;
    } 
```

我收到“InvalidConfigurationException：无法识别的选项”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-23T10:07:36.250

我只想添加一个变量（可以包含任何东西）节点“额外”：

```
->scalarNode('service')->isRequired()->end()
->booleanNode('enabled')->defaultTrue()->end()
->variableNode('extra')->end() 
```

您的配置将如下所示：

```
acme_widget:
    handlers:
        handler_one:
            service: handler.one.service
        handler_two:
            service: handler.two.service
            extra:
                array:
                    - Extra 1
                    - Extra 2
                scalar: Extra 3 
```

# mysql - 使用“in”运算符的 MySQL 查询：为什么带引号的结果不同？

> ID：12545331
> 
> 赞同：3
> 
> 时间：2012-09-22T15:56:52.420
> 
> 标签：mysql, sql, coercion

我在执行查询的两种不同方式中发现了一个奇怪的 MySQL 问题。当你把所有东西都归结起来时，这种方式会返回更多结果：

```
SELECT DISTINCT <stuff> FROM <tables> 
WHERE promo_detail_store_id in (8214, 8217, 4952, 8194, ...) 
```

对 WHERE 子句的这种更改会产生这些结果的一个子集：

```
WHERE promo_detail_store_id in ('8214, 8217, 4952, 8194, ...') 
```

（promo_detail_store_id 在 MyISAM 表中定义为 BIGINT。）

最初 store_ids 的列表要长得多，我开始把它剪得越来越短，我想也许对字符串的长度有一些奇怪的限制。但是不，它也适用于非常小的字符串/列表。很明显，幕后发生了一些事情，涉及类型强制以及“in”运算符的工作方式。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T16:00:47.847

`WHERE promo_detail_store_id in (8214, 8217, 4952, 8194, ...)`

方法

```
WHERE promo_detail_store_id = 8214 
OR  promo_detail_store_id = 8217
OR promo_detail_store_id = 4952 
OR promo_detail_store_id = 8194
OR ... 
```

* * *

```
WHERE promo_detail_store_id in ('8214, 8217, 4952, 8194, ...') 
```

方法

```
 WHERE promo_detail_store_id = '8214, 8217, 4952, 8194, ...' 
```

`'8214, 8217, 4952, 8194, ...'`将转换为 number to be `8214`，所以它将是

```
WHERE promo_detail_store_id = 8214 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T16:01:28.470

第二个条件实际上等效于`WHERE promo_detail_store_id IN (8214)`，因为您将 a`BIGINT`与 a进行比较，`TEXT`并且将文本转换为整数值，这会忽略从第一个非数字字符到字符串末尾的所有内容。

# qt - qdjango 外键

> ID：12545332
> 
> 赞同：1
> 
> 时间：2012-09-22T15:56:54.367
> 
> 标签：qt, orm, foreign-keys

快速谷歌搜索没有返回关于如何正确使用 QDjango 的外键的结果 - 有函数

`QDjangoModel::foreignKey`和`QDjangoModel::setForeignKey`- 但我找不到任何关于如何在实践中使用它们的好例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-25T08:48:27.693

它很老了，也许会对其他人有所帮助.. 我在 QDjango 中搜索 FKs 并在[google group](https://groups.google.com/forum/#!forum/qdjango)中找到了一些东西，还有一些[很好的文档](http://doc.qdjango.org/qdjango-snapshot/index.html)和一些基本示例（但没有 FK 示例）

我以这种方式使用 QDjango 创建表模型（也是外键）：

```
class Role : public QDjangoModel { ... };

class User : public QDjangoModel
{
    Q_OBJECT
    Q_PROPERTY(QString name READ name WRITE setName)
    Q_PROPERTY(QString password READ password WRITE setPassword)
    Q_PROPERTY(Role *role READ role WRITE setRole)

    Q_CLASSINFO("name", "max_length=255")
    Q_CLASSINFO("password", "max_length=255")
    Q_CLASSINFO("role", "on_delete=cascade")

    QString mName;
    QString mPassword;
public:
    User(QObject *parent = 0);
    QString name() const { return mName; }
    void setName(QString name) { mName = name; }

    QString password() const { return mPassword; }
    void setPassword(QString pass) { mPassword = pass; }

    Role *role() const;
    void setRole(Role *role);
}; 
```

您可以使用 Q_CLASSINFO 为列设置一些属性。外键绑定在构造函数中并填充到角色函数中。

```
User::User(QObject *parent)
    : QDjangoModel(parent)
{
    setForeignKey("role", new Role(this));
}

Role *User::role() const
{
    return qobject_cast<Role *>(foreignKey("role"));
}

void User::setRole(Role *role)
{
     setForeignKey("role", role);
} 
```

当您想使用 fk 依赖表中的字段进行选择时，请使用**两个**undescores，当然还可以使用 selectRelated() （它只是设置了一些稍后用于生成连接选择的标志），例如：

```
QDjangoQuerySet<User> matched;
matched = matched.selectRelated()
            .filter(QDjangoWhere("role__rolename", QDjangoWhere::Equals, "admin")); 
```

# php - 我如何制作一个仅在通过 URL 发送某个变量 id 时才运行的 IF 语句？

> ID：12545334
> 
> 赞同：1
> 
> 时间：2012-09-22T15:56:59.660
> 
> 标签：php, ajax, logic

是否可以在 php 中创建一个 IF 子句，只有在我在 url 中编码了特定变量时才会触发？

我有一个 php 页面，无需刷新页面即可获取和输出查询结果。当用户单击特定查询结果时，该值会通过 url 发送到同一页面，然后该页面会使用该查询结果作为新的搜索参数重新运行此脚本。

唯一的问题是，第一次运行页面时，我需要找到一种方法来绕过回显语句和尝试从 url 获取 $_GET 数据，因为没有。

所以本质上是某种 if 子句，可能就像

```
IF(url variable value = 'id')
{
$variabledata=$_GET['var1'];
echo $variabledata;
}

ELSE nothing 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:59:43.603

你可以这样做：

```
if (isset($_GET['var1'])) {
   $variabledata=$_GET['var1'];
   echo $variabledata;
} 
```

因此只有在发送`if`参数时才会执行块的内容。`var1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:09:16.623

您可以在获取 url 时检查此内容

```
if (isset($_GET['var1']) &&  $variabledata=$_GET['var1']) {
     echo $variabledata;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:01:36.957

`$_REQUEST`为`GET`和工作`POST`

```
if($_REQUEST['url_variable_value'] == 'id'){
    $variabledata=$_GET['var1'];
    echo $variabledata;
} else {
    // nothing
}

// http://example.com/somewhere/?url_variable_value=id&var1=the_data
// output: "the_data" 
```

# windows - Windows下配置qxt库

> ID：12545335
> 
> 赞同：3
> 
> 时间：2012-09-22T15:57:16.373
> 
> 标签：windows, qt, qt4, qt4.8, libqxt

我想在我的 Qt 4.8.1 项目中包含 Qxt 0.6.2 库。我按照他们的用户指南中的步骤操作，最后将库安装在：C:\Qxt。我在我的项目 .pro 文件中添加了这两行：

```
CONFIG   += qxt
QXT      += core gui 
```

当我编译时出现以下错误：

```
error: cannot find -lQxtGuid 
```

同样在 C:\Qxt\doc 中没有生成文档，命令助手 -addContentFile C:\libqxt\doc\html\qxt.dcf 不工作，也不存在文件 qxt.dcf。

编辑 1：我的问题通过选择使用 Qt 编译选项中的发布库解决了

# grails - 如何在 Grails 中正确创建多个一对一的双向关系？

> ID：12545337
> 
> 赞同：0
> 
> 时间：2012-09-22T15:57:47.020
> 
> 标签：grails, grails-orm, grails-domain-class

我正在尝试创建 2 个域类`User`和`MailBox`

`Mailbox`每个将有 2个`User`，一个是`sent`，另一个是`inbox`。

我尝试了多种方法来解决这个问题：

1 - （因映射异常而失败）

```
Mailbox {
}

User {
    static hasOne=[inbox:Mailbox, sent:Mailbox]
} 
```

2 - （在我尝试使用它之前完全没问题，那么值始终`sent`变为）`null`

```
Mailbox {
    static belongsTo = [user: User]
}

User {     
    Mailbox inbox
    Mailbox sent
} 
```

3 - （当我尝试通过以下方式创建新用户时：`new User(inbox: new Mailbox(), sent: new Mailbox()).save()`失败）

```
Mailbox {
    static belongsTo = [user: User]
}

User {
    static mappedBy = [inbox: 'id', sent: 'id']
    Mailbox inbox
    Mailbox sent   
} 
```

建立这种关系的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:39:56.913

双向关联只能从一个属性映射到另一个属性，不能将属性映射到多个属性：

```
class Mailbox {
    static belongsTo = [user: User]
    static mappedBy = [user: 'one']
}

class User {
    Mailbox inbox
    Mailbox sent

    static constraints = {
        inbox(nullable: true)
        sent(nullable: true)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:28:58.977

为邮箱创建一个基类怎么样？基类可以具有所有邮箱属性。子类现在可以为空，如果您在进一步开发应用程序时发现需要*收件箱*或*发送箱特定属性，则可以填写。*

这应该有效。

```
class InboxMailBox extends MailBox {
    static belongsTo = [user: User]
}

class SentMailBox extends MailBox {
    static belongsTo = [user: User]
}

class User {
    InboxMailBox inbox
    SentMailBox sent
} 
```

# c++ - 检查循环

> ID：12545338
> 
> 赞同：-5
> 
> 时间：2012-09-22T15:57:50.700
> 
> 标签：c++, loops, for-loop

```
#include <stdio.h>
#include <conio.h>
void main()
{
    clrscr();
    int lop, squr;
    for (lop=1; lop<=20; lop=lop+1);
    {
        squr = lop*lop;
        printf("%5d,%5d,\n",lop,squr);
    }
    getch();
} 
```

我的朋友说这个源代码运行良好..但它在我身边运行不佳。我应该怎么做才能在 C++ 中很好地工作。

我的朋友对我说，上面提到的代码在他使用的版本中运行良好。我说，这段代码不正确，会出现执行错误……上面提到的代码对于任何标准或版本的 C/C++ 都是正确的。

并且还告诉我有多少个版本的 C++ 可用...

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T16:02:07.910

`for (lop=1; lop<=20; lop=lop+1);`是问题所在。更改为`for (lop=1; lop<=20; lop=lop+1)`（删除分号将使此工作正常）。

这是您的代码，已修复和优化问题：

```
#include <stdio.h>
#include <conio.h> // Remove if you want

int main() {
    clrscr(); // Remove if you want
    int lop, squr;
    for (lop=1; lop<=20; ++lop) {
        squr = lop*lop;
        printf("%5d,%5d,\n", lop, squr);
    }
    getch(); // Remove if you want
    return 0;
} 
```

`// Remove if you want`可以删除带有的行，但会改变行为。请参阅@VinayakGarg 的评论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T16:05:47.283

应该是这样——

```
#include <stdio.h>

int main()
{
    int lop, squr;
    for (lop = 1; lop <= 20; lop++)
    {
        squr = lop*lop;
        printf("%5d,%5d,\n", lop, squr);
    }
    return 0;
} 
```

`conio.h`因此`clrscr()`并且`getch()`不是标准的一部分，您**不应**在代码中使用它们。

**编辑-**

> 并且还告诉我有多少个版本的 C++ 可用...

C++ 没有确切的版本，有[标准](http://en.wikipedia.org/wiki/ISO/IEC_14882#Standardization)

```
Year    C++ Standard                    Informal name
2011    ISO/IEC 14882:2011              C++11
2007    ISO/IEC TR 19768:2007           C++TR1
2003    ISO/IEC 14882:2003              C++03
1998    ISO/IEC 14882:1998              C++98 
```

但是有一些版本的 C++ 编译器，比如[gcc 4.7.2](http://gcc.gnu.org/gcc-4.7/)等。

# objective-c - UITableViewCell 的 UITextView 大小

> ID：12545339
> 
> 赞同：0
> 
> 时间：2012-09-22T15:57:56.583
> 
> 标签：objective-c, ios, cocoa-touch

我有一个表格视图，其中一行包含一个包含 UITextView 的单元格。我需要知道文本视图的大小，因为我需要它来适应单元格并在“heightForRowAtIndexPath”方法中返回该大小。对大小使用 NSString 方法仅适用于标签，不适用于文本视图。我有哪些选择？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:36:28.970

UITextView 是否已经具有适当的大小，或者您是否需要调整它的大小以准确包含其文本？我相信没有现成的方法可以做到这一点。

如果它已经有合适的尺寸，你可以从它的框架中得到高度：

```
CGRect frame = textView.frame;
CGSize size = frame.size;
CGFloat = size.height; 
```

# iphone - 访问 NSManagedObject 的数据属性会给我带来内存问题

> ID：12545346
> 
> 赞同：0
> 
> 时间：2012-09-22T15:59:40.547
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchrequest

我想我可能会访问这个错误，也许有人可以指出我正确的方向。

我有一个`Entry`实体，它与实体具有一对多的关系`Media`。Media 实体包含一个名为 的数据属性`originalImage`。

此迭代的前 50 个`Entry`实体在集合中没有任何`media`项目。之后，它在访问属性时变慢`originalImage`，最终内存不足并退出到主屏幕，除了之前在 NSLog 中的内存警告之外没有任何消息。通过 Instruments 运行它也显示它此时内存不足。这是我的代码：

```
NSFetchRequest *oldFetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *oldEntryEntity = [NSEntityDescription entityForName:@"Entry"
                                                          inManagedObjectContext:oldMOC];
[oldFetchRequest setEntity:oldEntryEntity];
[oldFetchRequest setFetchBatchSize:10];
NSArray *entrys = [oldMOC executeFetchRequest:oldFetchRequest error:nil];

for (NSInteger index = 0; index < entrys.count; ++index) {

    Entry *entry = [entrys objectAtIndex:index];

    NSOrderedSet *oldMediaSet = [entry valueForKey:@"media"];

    for (Media *media in oldMediaSet) {

        @autorelease {

            [media valueForKey:@"originalImage"];    

        }

    }

} 
```

删除 originalImage 行意味着它不会崩溃，这让我相信它与被访问的内容有关。也许我得到orderedSet的方式意味着这些项目留在内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:32:26.087

Core Data 正在满足您正在访问的属性的故障，直到它填满其可用内存。您正在尝试对此进行防御，`@autorelease`但这还不够，因为您没有获得自动释放的实例，而是对象图中的另一个对象。在不知道您要做什么的情况下，很难说出如何解决该问题。您在循环中同步迭代，直到内存不足，因此没有内存警告会中断此过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:47:22.937

因此，如果您有一个循环试图将数据从一个实体移动到另一个 MOC 中的新实体，那么您应该做的是获取旧实体，将数据分配给新实体（不要复制它，会使你的问题更糟），然后使用'refreshObject：mergeChanges：'对旧对象和新对象进行故障排除。我相信这会起作用，但我自己还没有尝试过（假设 SQLite 商店）。

核心数据编程指南“减少内存开销”（pdf 的第 148 页）中还有其他建议。

# iphone - 关于 Objective-C 中的复制属性

> ID：12545349
> 
> 赞同：0
> 
> 时间：2012-09-22T15:59:51.320
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsstring

我测试了这个示例代码。

样本.h

```
 {

    NSString *string1;
    NSString *string2;
    NSMutableString *string3;
}

@property (assign) IBOutlet NSWindow *window;
@property (strong,nonatomic) NSString *string1;
@property (copy,nonatomic) NSString *string2;
@property (strong,nonatomic) NSMutableString *string3;

@end 
```

样品.m

```
#import "Sample.h"

@synthesize string1;
@synthesize string2;
@synthesize string3;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    string1 = [[NSString alloc] init];
    string2 = [[NSString alloc] init];
    string3 = [[NSMutableString alloc] initWithString:@"test"];
    string2 = string3;
    string1 = string3;
    [string3 appendString:@"test"];
    NSLog(@"%@",string1);
    NSLog(@"%@",string2);
    NSLog(@"%@",string3);

}

@end 
```

结果是

```
2012-09-23 00:11:48.610 sample[13468:303] testtest
2012-09-23 00:11:48.611 sample[13468:303] testtest
2012-09-23 00:11:48.611 sample[13468:303] testtest 
```

我认为 string2 应该是“测试”，因为该属性是副本。但 string2 是“testtest”。

```
string2 = [string3 copy]; 
```

这是我认为的结果。

```
string2 is "test" 
```

为什么？请告诉我，我睡不好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:05:17.347

问题是您没有访问属性，而是立即操作支持实例变量。对于那些ivars，`=`操作符并不特殊，*没有调用setter方法的效果，*只是一个普通的指针赋值。所以当你写

```
string2 = string3;
string1 = string3 
```

然后你将指针分配`string3`给两者`string1`-`string2`无论你做什么`string3`，它对其他两个变量也有效，因为实际上，它们指向**同一个字符串实例**。

你要做的是一，将你的属性声明为，`copy`而不是`strong`，二，写

```
self.string2 = string3;
self.string1 = string3 
```

为了调用setter方法并*实际*制作字符串的*独立*副本。

附言 通过使用您的 NSString 创建两个空实例

```
string1 = [[NSString alloc] init];
string2 = [[NSString alloc] init]; 
```

代码，然后将其他内容重新分配给这些变量，您正在泄漏内存。

编辑：你很幸运，但你没有 - 通过使用 ARC。使用旧的运行时，您会浪费用户 RAM 的宝贵字节。

但还是。您不需要创建这些实例 - 您不是直接`memcpy()`将字符放入预分配的内存中。在深入 iOS 开发之前，请阅读有关 C 指针的综合教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:05:28.437

我不确定你为什么说`string2`属性上的 setter 语义是`copy`. 你宣布了​​它`strong`。

您将`NSString`指针 string2 设置为`NSMutableString`指针 string3。然后您继续修改 string3 指向的可变字符串。所以你应该期望 string2 反映这一点。

**顺便说一句，这就是为什么您应该**`copy`在具有可变对应物的对象上 使用setter 语义的主要原因。

# jquery - jQuery：以错误的顺序添加（desc）

> ID：12545350
> 
> 赞同：0
> 
> 时间：2012-09-22T15:59:52.917
> 
> 标签：jquery, jquery-selectors

我想将新的 a new 添加`<tr>`到 a`<table>`中，但元素添加的顺序错误（desc）。我总是想在`<tr>`下面添加新的。

**HTML：**

```
<button id="b1">add element</button>
<form>
<table id="table">
    <thead>  
        <tr>
            <th>Element:</th>
        </tr>
    </thead>
    <tbody>  
    </tbody>  
</table>
</form> 
```

**jQuery：**

```
var i=0;
$('#b1').click(function() {
    $("#table > tbody:last").after('<tr><td>Element' + i + '</td></tr>');
i++;
}); 
```

**现场演示：[jsFiddle](http://jsfiddle.net/jsfiddleus/wzbyQ/)**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:01:26.270

使用`append()`方法：

```
var i=0;
$('#b1').click(function() {
    $("#table > tbody").append('<tr><td>Element' + i + '</td></tr>');
i++;
}); 
```

# c# - 分析从 C# 生成的 MSIL 代码

> ID：12545351
> 
> 赞同：2
> 
> 时间：2012-09-22T16:00:07.660
> 
> 标签：c#, il

我有以下功能：

```
public string MyPhrase(int val)
{
    if ((val %3 == 0) && (val % 6 == 0))
        return "Fizz Bang";
    if (val % 3 == 0)
        return "Fizz";
    if (val % 6 == 0)
        return "Bang";
    return "";
} 
```

编译并使用 IlDasm 查看后，我得到以下输出：

```
IL_0000:  ldarg.1
IL_0001:  ldc.i4.3
IL_0002:  rem
IL_0003:  brtrue.s   IL_0010

IL_0005:  ldarg.1
IL_0006:  ldc.i4.6
IL_0007:  rem
IL_0008:  brtrue.s   IL_0010

IL_000a:  ldstr      "Fizz Bang"
IL_000f:  ret

IL_0010:  ldarg.1
IL_0011:  ldc.i4.3
IL_0012:  rem
IL_0013:  brtrue.s   IL_001b

IL_0015:  ldstr      "Fizz"
IL_001a:  ret

IL_001b:  ldarg.1
IL_001c:  ldc.i4.6
IL_001d:  rem
IL_001e:  brtrue.s   IL_0026

IL_0020:  ldstr      "Bang"
IL_0025:  ret

IL_0026:  ldstr      ""
IL_002b:  ret 
```

从查看[此页面](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.brtrue%28v=vs.80%29.aspx)，`brtrue`如果为真，将分支。让我困惑的是这条线`IL_0003`。它的说法是，`IL_0010`如果它是真的，它应该分支到线。不过，在我的 C# 代码中，我使用 an`&&`来比较两个表达式，然后我的程序流应该跳转到下一个`if`. 好像倒退了。从发布的 MSIL 代码来看，它似乎在检查我的操作是否正确，如果是，则跳转到我的下一个`if`块，这在逻辑上是错误的。有人可以解释我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:06:41.963

这是&& 运算符*短路评估*的副作用。它承诺如果左侧为假，则不会评估运算符的右侧表达式。因此，如果 REM 操作码返回非零结果，您会看到它跳过 val % 6 == 0 表达式和返回“Fizz Bang”语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:21:52.867

**如果堆栈上的值非零，则brtrue.s**将控制权转移到给定的目标。

因此，在您的 IL 代码`IL_0003`中，将控制权转移到`IL_0010`. 表示 (val % 3 == 0) 条件返回 false。你`&&`在第一个 if 条件中使用了，`if ((val %3 == 0) && (val % 6 == 0))`所以在第一个条件下`(val % 3 == 0)` 返回 false，第二个条件不会检查

```
IL_0005:  ldarg.1
IL_0006:  ldc.i4.6
IL_0007:  rem
IL_0008:  brtrue.s   IL_0010 
```

和控制转移到`IL_0010`

```
IL_0010:  ldarg.1
IL_0011:  ldc.i4.3
IL_0012:  rem
IL_0013:  brtrue.s   IL_001b 
```

查看更多信息：[http ://weblogs.asp.net/kennykerr/archive/2004/09/23/introduction-to-msil-part-6-common-language-constructs.aspx](http://weblogs.asp.net/kennykerr/archive/2004/09/23/introduction-to-msil-part-6-common-language-constructs.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:06:20.293

这个块从堆栈加载参数数据，然后开始比较

所以跳转到加载数据这一段很正常

```
IL_0010:  ldarg.1
IL_0011:  ldc.i4.3
... 
```

# google-maps - 用于 iOS6 的 Google Place API 和 TOS

> ID：12545360
> 
> 赞同：0
> 
> 时间：2012-09-22T16:00:45.947
> 
> 标签：google-maps, google-places-api, google-places

既然 Apple 已经删除了 Google 地图，您还可以使用 Google Places API 为 iOS 应用程序获取地点数据吗？

Places API TOS 明确规定数据必须显示在 Google 地图上。这不能在 iOS6 上完成，除非您将用户从应用程序中带到基于浏览器的地图中。用户体验会很糟糕。

Google Places API 团队有任何回应吗？

谢谢美联社

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:42:28.677

我有同样的问题，不幸的是，根据我对 TOS 的理解，您将无法使用地理编码 API，因为结果需要在谷歌地图上返回

如果您不返回地图上的结果和带有谷歌徽标的信用数据源，则可以使用地方 API 结果

[https://developers.google.com/places/policies](https://developers.google.com/places/policies)

再次，这是我的解释，所以希望有人能插手并澄清

事实证明，苹果转向自己的地图是一件非常痛苦的事情

# ckeditor - CKEditor - 在工具栏按钮上显示当前颜色

> ID：12545365
> 
> 赞同：1
> 
> 时间：2012-09-22T16:01:28.380
> 
> 标签：ckeditor

我想向[CKEditor](http://ckeditor.com/)添加一个工具栏按钮，显示当前选择的颜色。这可能吗？

到目前为止，我设法通过遵循本[教程](http://docs.cksource.com/CKEditor_3.x/Tutorials/Timestamp_Plugin)和[colorbutton](http://docs.cksource.com/ckeditor_api/symbols/src/plugins_colorbutton_plugin.js.html)插件添加了一个新的工具栏按钮，但我找不到任何具有动态演示的工具栏按钮的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:00:27.320

您可以为按钮使用透明图像，并在插件功能中设置按钮跨度的背景颜色。

看起来通过找到带有您分配的标题（工具提示）的锚标记，然后使用`id=cke_icon`.

这是我的一个插件按钮的 HTML 的样子，未使用按钮调用的特定插件的名称，它的功能被分配了可变功能编号，因此插件名称不可用：

```
<a id="cke_33" class="cke_off" 
onclick="CKEDITOR.tools.callFunction(71, this); return false;" 
onfocus="return CKEDITOR.tools.callFunction(70, event);" 
onkeydown="return CKEDITOR.tools.callFunction(69, event);" 
onblur="this.style.cssText = this.style.cssText;" aria-haspopup="true" 
aria-labelledby="cke_33_label" role="button" hidefocus="true" tabindex="-1" 
title="Block Background Color">

<span class="cke_icon" style="background-image:url
(/ckeditor_3.6.1/plugins/cwmarcontentbackcolor/images/contentbackcolor16x16.png?t=B5GJ5GG);
background-position:0 0px;"> 
</span>

<span id="cke_33_label" class="cke_label">Block Background Color</span>
<span class="cke_buttonarrow"> </span>

</a> 
```

* * *

如果您想在每次用户选择内容区域的一部分时确定颜色，这将是一项相当多的工作，因为他们可以选择具有多种颜色的多个元素。即使他们只是在内容区域中单击，您也可能必须沿着 DOM 树向上查找光标位置继承其颜色的元素。

我为另一个目标不同的问题提供了一个插件，但它涉及每次进行选择时触发，根据选择创建一个对象，然后沿着 DOM 树查看分配给元素的类。您可以修改它以适应您的目标：

[如何阻止对CKEDITOR textarea中某些内容的编辑？](https://stackoverflow.com/a/11370552/751619)

# node.js - 在 nodejs 中侦听 http 服务器时出现 Express 模块错误

> ID：12545370
> 
> 赞同：1
> 
> 时间：2012-09-22T16:01:45.957
> 
> 标签：node.js, express

我创建了一个 nodejs http 服务器

```
var http = require("http");
var url = require("url");
var express = require('express');
var app = express();

function start(route, handle){
    function onRequest(request,response){
        var pathname = url.parse(request.url).pathname;
        console.log("Request for " + pathname + " received.");
        route(handle, pathname, response, request);
    }

    http.createServer(onRequest).listen(8888);
    console.log("Server has started");
    app.listen(8888);
    console.log('Express app listening on port 8888');
} 
```

它给出了错误

```
f:\Labs\nodejs\webapp>node index.js
Server has started
Express app listening on port 8888

events.js:66
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: listen EADDRINUSE
    at errnoException (net.js:769:11)
    at Server._listen2 (net.js:909:14)
    at listen (net.js:936:10)
    at Server.listen (net.js:985:5)
    at Function.app.listen (f:\Labs\nodejs\webapp\node_modules\express\lib\appli
cation.js:532:24)
    at Object.start (f:\Labs\nodejs\webapp\server.js:15:6)
    at Object.<anonymous> (f:\Labs\nodejs\webapp\index.js:11:8)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

当我更改 app.listen 的端口时，它不会抛出此错误，该怎么办？

更改服务器端口以外的端口会将服务器的会话保持在另一个端口上吗？

以及如何在其他 js 页面中访问此 app 变量以获取/设置数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:09:05.633

如果您打算在同一个端口上运行，您可以查看当前是否正在运行节点进程

`ps aux | grep node`

进而`kill -9 PROCESSID`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:31:48.670

您不能像这样在同一个端口上监听多个事物，因此会`EADDRINUSE`出现错误。如果你想在使用 Express 的同时创建自己的 http 服务器，你可以这样做：

```
var express = require('express');
var https = require('https');
var http = require('http');
var app = express();

http.createServer(app).listen(8888);
https.createServer(options, app).listen(443); 
```

来自 Express 文档：

> express() 返回的应用程序实际上是一个 JavaScript 函数，旨在作为回调传递给节点的 http 服务器以处理请求。

或者你可以做

```
app.listen(8888); 
```

然后 Express 将为`http`您设置服务器。

然后，您将在 Express 中设置路由以实际处理传入的请求。使用 Express，路由如下所示：

```
app.get('/foo/:fooId', function(req, res, next) {
   // get foo and then render a template
   res.render('foo.html', foo);
}); 
```

如果您想访问您`app`的其他模块（通常用于测试），您可以像任何其他变量一样导出它：

```
module.exports.app = app; 
```

然后，您将能够`require('./app').app`在其他模块中。

# android - 如何在android中实现购物车

> ID：12545377
> 
> 赞同：0
> 
> 时间：2012-09-22T16:02:26.480
> 
> 标签：android, android-layout, android-intent

我是安卓新手。我的应用程序基本上是扫描二维码以获取产品信息，如图像、名称、描述和价格，然后选择添加到购物车并继续这样做（扫描二维码），直到用户选择结束购物并单击继续到购物车并将显示所选项目的总价格。然后，用户可以单击以编辑购物车或继续结帐。我一直在搜索教程，但找不到完整的教程。谁能指导我通过正确的代码我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:09:33.470

我认为您永远不会为您的任务找到完整的教程。然而，通过谷歌搜索，我找到了可用于处理条形码的[zxing 。](http://code.google.com/p/zxing/wiki/GettingStarted)我没有仔细阅读那里提供的示例，但我相信它们很容易理解。

**编辑：**
这是 SO 中另一个问题的完全重复。[看看](https://stackoverflow.com/questions/4792809/how-to-make-a-qr-code-reader) 现在，如果这个答案对你来说还不够，我认为你是 Android 新手。只需 google Android，您就会发现大量可用的教程。从布局、活动、意图、捆绑包、事件处理开始。要构建你想要的东西，你需要混合许多这样的小东西。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:14:27.880

您很可能找不到一个完整的 A 到 Z 教程来满足您的所有应用程序要求。但是您可以搜索应用程序的代码/教程实现部分，例如阅读 QR 码、继续下一个项目等。你必须弄清楚这一切是如何结合在一起的。

[Google Play 商店中的 QR 阅读器应用程序](https://play.google.com/store/apps/details?id=com.google.android.apps.unveil&hl=en)

# javascript - Google Maps API - 存储图像 URL 并调用它

> ID：12545378
> 
> 赞同：0
> 
> 时间：2012-09-22T16:02:39.393
> 
> 标签：javascript, mysql, google-maps, google-maps-api-3, phpmyadmin

我已将图像 URL 添加到 mySQL 数据库中的条目中，并且我希望它确实显示在我侧边栏的信息窗口中。

这是我正在摆弄的部分：

```
downloadUrl("genxml.php", function(data) {
  var xml = data.responseXML;
  var locations = xml.documentElement.getElementsByTagName("marker");
  for (var i = 0; i < locations.length; i++) {
    var name = locations[i].getAttribute("name");
    var address = locations[i].getAttribute("address");
    var type = locations[i].getAttribute("type");
    var price = locations[i].getAttribute("price");
    var img = locations[i].getAttribute("img");
    var point = new google.maps.LatLng(
        parseFloat(locations[i].getAttribute("lat")),
        parseFloat(locations[i].getAttribute("lng")));
    var html = "<div class=loc-img><img src=" + img + "/></div><div class=loc-name>" + name + "</div> <br/>" + address + "<br/>" + "<div class=loc-type>" + type + "</div><div id=loc-price>Price Rating:" + price + "</div>"; 
```

底部的位在我看来是正确的，所以我无法弄清楚出了什么问题。图片保存在服务器上，并且已经将URL添加到条目的img字段中，并且没有拼写错误。当页面加载并加载信息窗口时，这将显示在检查器中。

```
<img src="null/"> 
```

以下是来自 phpMyAdmin 的专栏的详细信息，我认为这可能是导致问题的原因。**varchar(120) latin1_swedish_ci**，Null 设置为 no。我认为因为它是一个 URL，所以 varchar 将是合适的选择。

有什么想法吗？

编辑：我在另一个领域也有类似的问题。我认为这可能是相关的。有一个“价格”字段，设置为**int(5)**，并且只是 1 到 5 的评级。但是，当信息窗口显示时，它只是显示“空”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:34:14.610

我实际上已经设法解决了这个问题。相当简单，但很容易被忽视！

在向每个项目添加新字段时，您需要记住在 XML 转换器中注册它们，该转换器从数据库中提取信息，然后将其转换为地图可读格式 (XML)。

就我而言，我必须进入 genxml.php（按照地图文档的指示），并使其看起来像这样：

```
while ($row = @mysql_fetch_assoc($result)){
// ADD TO XML DOCUMENT NODE
echo '<marker ';
echo 'name="' . parseToXML($row['name']) . '" ';
echo 'address="' . parseToXML($row['address']) . '" ';
echo 'lat="' . $row['lat'] . '" ';
echo 'lng="' . $row['lng'] . '" ';
echo 'type="' . $row['type'] . '" ';
echo 'price="' . $row['price'] . '" ';
echo 'img="' . $row['img'] . '" ';
echo '/>';
} 
```

希望对其他人有所帮助！

# c++ - OpenCV 图像转黑白形状

> ID：12545382
> 
> 赞同：4
> 
> 时间：2012-09-22T16:03:42.277
> 
> 标签：c++, image, opencv, image-processing, shapes

我希望手的图像是手的黑白形状。这是输入和所需输出的示例：[![黑白手](../Images/451502d17c2202f7f970132dcc2fedf2.png)](https://i.stack.imgur.com/UsPDs.jpg)

使用阈值不会提供所需的输出，因为手内的某些颜色与背景颜色相同。我怎样才能得到想要的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:06:10.753

[自适应阈值](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-adaptivethreshold)，[查找轮廓](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html#findContours)，[填充](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-floodfill)？

基本上，自适应阈值会将您的图像变成黑白，但会根据每个像素周围的本地条件获取阈值级别 - 这样，您应该避免使用普通阈值时遇到的问题。事实上，我不确定为什么有人会想要使用正常的阈值。

如果这不起作用，另一种方法是找到图像中最大的轮廓，将其绘制到单独的矩阵上，然后用黑色填充其中的所有内容。（Floodfill 就像 MSPaint 中的桶工具 - 它从特定像素开始，并填充与该像素相关的所有内容，该像素与您选择的另一种颜色相同。）

可能对各种照明条件最稳健的方法是按顶部的顺序进行所有操作。但是您可能只能摆脱阈值或计数/洪水填充。

顺便说一句，也许最棘手的部分实际上是找到轮廓，因为 findContours 返回 MatOfPoints 的 arraylist/vector/whatever（取决于我认为的平台）。MatOfPoint 是 Mat 的子类，但您不能直接绘制它 - 您需要使用 drawContours。这是我知道的一些适用于 OpenCV4Android 的代码：

```
 private Mat drawLargestContour(Mat input) {
    /** Allocates and returns a black matrix with the 
     * largest contour of the input matrix drawn in white. */

    List<MatOfPoint> contours = new ArrayList<MatOfPoint>();        
    Imgproc.findContours(input, contours, new Mat() /* hierarchy */, 
            Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE); 
    double maxArea = 0;
    int index = -1;
    for (MatOfPoint contour : contours) { // iterate over every contour in the list
        double area = Imgproc.contourArea(contour);
        if (area > maxArea) {
            maxArea = area;
            index = contours.indexOf(contour);
        }
    }

    if (index == -1) {
        Log.e(TAG, "Fatal error: no contours in the image!");
    }

    Mat border = new Mat(input.rows(), input.cols(), CvType.CV_8UC1); // initialized to 0 (black) by default because it's Java :)
    Imgproc.drawContours(border, contours, index, new Scalar(255)); // 255 = draw contours in white
    return border;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:34:33.533

您可以尝试两件快速的事情：

*设置阈值后*，您可以：

1.  做一个形态闭合，

2.  或者，最简单的：`cv::findContours`，如果大于一个，则保持最大，然后使用它绘制它`cv::fillConvexPoly`，您将获得此蒙版。（`fillConvexPoly`会为你填补漏洞）

# jpa - 原因：javax.persistence.PersistenceException：没有名为本地的 EntityManager 的持久性提供程序

> ID：12545383
> 
> 赞同：3
> 
> 时间：2012-09-22T16:03:58.470
> 
> 标签：jpa, eclipse-rcp, eclipselink, derby

当我运行我的 RCP 应用程序时，我收到错误消息：

```
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named local
at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source) 
```

我的类路径中有 eclipseLink 持久性 API 和 Derby JDBC 驱动程序的 jar 文件，并包含在我的 MANIFEST.MF 中：

```
Manifest-Version: 1.0
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 org.eclipse.ui.forms;bundle-version="3.5.100",
 javax.servlet;bundle-version="2.5.0",
 com.caucho.hessian;bundle-version="3.0.8",
 org.apache.commons.lang;bundle-version="2.1.0",
 org.eclipse.persistence.core;bundle-version="2.4.0",
 org.eclipse.persistence.jpa;bundle-version="2.4.0",
 org.eclipse.persistence.asm;bundle-version="3.3.1",
 javax.persistence;bundle-version="2.0.4",
 workstation_dependencies;bundle-version="1.0.0", -- THIS IS A CUSTOM DEPS PACKAGE
 org.apache.derby;bundle-version="10.5.1"
Bundle-Vendor: MYVENDOR
Bundle-ActivationPolicy: lazy
Bundle-Version: 1.0.0.20120319
Bundle-Name: MYBUNDLE
Bundle-Activator: foo.myrcpapp.Activator
Bundle-ManifestVersion: 2
Bundle-SymbolicName: foo.myrcpapp; 
 singleton:=true
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Eclipse-RegisterBuddy: com.caucho.hessian
JPA-PersistenceUnits: local
Meta-Persistence: META-INF/persistence.xml
Bundle-ClassPath: lib/commonj.sdo_2.1.1.v201112051852.jar,
 lib/commonj.sdo.source_2.1.1.v201112051852.jar,
 lib/derby-10.8.2.2.jar,
 lib/eclipselink-jpa-modelgen_2.4.0.v20120608-r11652.jar,
 lib/javax.activation_1.1.0.v201108011116.jar,
 lib/javax.ejb_3.1.0.v201205171433.jar,
 lib/javax.jms_1.1.0.v200906010428.jar,
 lib/javax.mail_1.4.0.v201005080615.jar,
 lib/javax.persistence_1.0.0.v200905011740.jar,
 lib/javax.persistence_2.0.4.v201112161009.jar,
 lib/javax.persistence.source_2.0.4.v201112161009.jar,
 lib/javax.resource_1.5.0.v200906010428.jar,
 lib/javax.servlet_2.4.0.v200806031604.jar,
 lib/javax.transaction_1.1.0.v201002051055.jar,
 lib/javax.ws.rs_1.1.1.v20101004-1200.jar,
 lib/javax.ws.rs.source_1.1.1.v20101004-1200.jar,
 lib/javax.wsdl_1.6.2.v201012040545.jar,
 lib/javax.xml.bind_2.2.0.v201105210648.jar,
 lib/javax.xml.bind.source_2.2.0.v201005080402.jar,
 lib/javax.xml.soap_1.3.0.v200906010428.jar,
 lib/javax.xml.stream_1.0.1.v201004272200.jar,
 lib/javax.xml.ws_2.0.0.v200902170419.jar,
 lib/org.eclipse.orbit.mongodb_2.7.3.v20120213-1927.jar,
 lib/org.eclipse.persistence.antlr_3.2.0.v201206041011.jar,
 lib/org.eclipse.persistence.antlr.source_3.2.0.v201206041011.jar,
 lib/org.eclipse.persistence.asm_3.3.1.v201206041142.jar,
 lib/org.eclipse.persistence.asm.source_3.3.1.v201206041142.jar,
 lib/org.eclipse.persistence.core_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.core.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.dbws_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.dbws.builder_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.dbws.builder.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.dbws.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.equinox_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.equinox.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.equinox.weaving_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.equinox.weaving.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.jpql_2.0.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.jpql.source_2.0.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.modelgen_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.modelgen.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.osgi_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.osgi.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpa.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpars_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.jpars.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.moxy_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.moxy.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.nosql_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.nosql.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.oracle_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.oracle.nosql_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.oracle.nosql.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.oracle.source_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.oracleddlparser_1.0.0.v20120530.jar,
 lib/org.eclipse.persistence.oracleddlparser.source_1.0.0.v20120530.jar,
 lib/org.eclipse.persistence.sdo_2.4.0.v20120608-r11652.jar,
 lib/org.eclipse.persistence.sdo.source_2.4.0.v20120608-r11652.jar,
 . 
```

我的 persistence.xml 看起来像这样：

```
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

 <persistence-unit name="local" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>

    <class>foo.Bar</class>

    <properties>
        <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:derby:mydb;create=true" />
        <property name="javax.persistence.jdbc.user" value="username" />
        <property name="javax.persistence.jdbc.password" value="passwd" />

        <property name="eclipselink.persistence-context.persist-on-commit" value="true"/>

        <!-- EclipseLink should create the database schema automatically -->
        <property name="eclipselink.ddl-generation" value="create-tables" />
        <property name="eclipselink.ddl-generation.output-mode"
            value="database" />
    </properties>
  </persistence-unit>
</persistence> 
```

我尝试在persistence.xml 中放置随机乱码垃圾并得到相同的结果，所以我不确定它是否被拾取。persistence.xml 位于项目根目录的 META-INF 文件夹中，我尝试将 META-INF 文件夹复制到各个位置而没有任何更改。

有任何想法吗？

提前喝彩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:56:18.753

这些例子可能会有所帮助，

[http://wiki.eclipse.org/EclipseLink/Examples/OSGi](http://wiki.eclipse.org/EclipseLink/Examples/OSGi)

# javascript - 无法在 Sencha Touch 2 上显示嵌套的 JSON

> ID：12545387
> 
> 赞同：2
> 
> 时间：2012-09-22T16:04:54.100
> 
> 标签：javascript, json, extjs, sencha-touch-2

考虑这个 JSON

```
{
    "stream": {
        "posts": [{
            "post_id": "1",
            "post_type": "text",
            "post_thumb": "bla1",
            "comments": [{
                "comment_id": "7",
                "comment_text": "asd",
            },
            {
                "comment_id": "8",
                "comment_text": "sdf",
            }],
        }],
    }
} 
```

和我的模特

```
Ext.define('MyAppApp.model.Post', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            'post_id',
            'post_type',
            'post_thumb',
            'comments',
        ],
        proxy: {
            type: 'jsonp',
            url:  'http://MyApp.com/home/index_app',
            reader: {
                type:         'json',
                rootProperty: 'stream'
            }
        }
    }
}); 
```

以上正确显示了我认为的帖子列表。我添加了一个控制器来推送一个面板以显示每个帖子的全部内容，这是有效的。

控制器

```
Ext.define('MyAppApp.controller.Main', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            stream: 'homepanel'
        },
        control: {
            'homepanel list': {
                itemtap: 'showPost'
            }
        }
    },

    showPost: function(list, index, element, record) {

/////// begin code block that solved my problem

    var data     = record.get('comments');
    var comments = '';

    Ext.Array.each(data, function(item) {
        comments += [item.comment_text] + '<br />';
    });

/////// end 

        this.getStream().push({
            xtype: 'panel',
            html: [
                '<p>' + record.get('post_thumb') + '</p>',
                '<p>' + record.get('comments') + '</p>',
                comments     // added to output HTML
            ].join(''),
            scrollable: true,
            styleHtmlContent: true,
        });
    }
}); 
```

**我的麻烦是从 中检索数据`comments`，这些数据嵌套在 JSON 中。**

使用上面的控制器，我得到

```
[object Object],[object Object] 
```

在我看来，在控制台中，我可以打开这些对象并查看我的全部评论。

但是如何在视图中显示它们？（例如，我如何显示`"comment_text"`？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:14:55.483

好吧，一旦它们在您的模型中，它们就不再是 JSON，它们被反序列化为对象。要显示它们，您应该使用**[XTemplate](http://docs.sencha.com/touch/2-0/#!/api/Ext.XTemplate)**。如果您已经在视图中使用了模板，则可以直接访问对象的属性来渲染它们。如果还有什么不清楚的，请告诉我。

为什么你自己将内容渲染到 html 属性中？这是性能原因的原因吗？我不习惯ST，所以我问。无论如何，构建一个小辅助函数，它将遍历注释数组并返回或多或少格式化的字符串（这取决于你，还要检查数组是否至少为空且永远不会为空）

```
var data = record.get('comments')
function(data) {
    var result = '',
        len = data.length,
        i=0;

    for(;i<len;i++) {
        result += data[i]['comment_text'] +'<br />'
    }

    return result;
} 
```

下面是 origin 函数的一个实现。我发布这个原因是不推荐使用 Ext.Array.each，因为它为每个元素执行一个函数，并且应该避免循环内的函数调用。

```
showPost: function(list, index, element, record) {
        var data     = record.get('comments');

        function fetchComments(data) {
            var result = '',
                len = data.length,
                i = 0;

            for(;i<len;i++) {
                result += data[i]['comment_text'] + '<br />';
            }

            return result;
        }

        this.getStream().push({
            xtype: 'panel',
            html: [
                '<p>' + record.get('post_thumb') + '</p>',
                '<p>' + fetchComments(data) + '</p>'
            ].join(''),
            scrollable: true,
            styleHtmlContent: true,
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:56:48.893

这是我迭代的另一种方式。

json数据：

```
{
    "account" : [
        {
            "id": "1",
            "accNo" : "5869785254",
            "curAmt" : "25000",
            "balAmt" : "15000",
            "transdate" : [
                {
                    "date" : "10",
                    "month" : "03",
                    "description" : "Check 232",
                    "crddbt" : "-1200"
                },
                {
                    "date" : "14",
                    "month" : "03",
                    "description" : "ATM Withdrawl",
                    "crddbt" : "-500"
                }
            ],
        }
    ]
} 
```

Sencha 代码迭代转换对象。

```
var transDateObj = record.get('transdate');

Ext.Object.each(transDateObj, function(key, value, myself){

            Ext.Object.each(value, function(key, value, myself){
                console.log(key + ":" + value);
            });
        }); 
```

# javascript - 经典 asp：如何将 cal 函数用于从数据库中检索的记录

> ID：12545389
> 
> 赞同：0
> 
> 时间：2012-09-22T16:05:13.297
> 
> 标签：javascript, asp-classic

你能帮我解释一下为什么我的工作工资计算功能在这段代码中不起作用吗？（在我添加“Do while”循环之前它工作得很好。）

我想要的是首先从数据库中检索工资金额，然后该用户可以输入其他费用并对每个生成的记录进行报酬。当用户得到满意的结果时，他可以将其保存回数据库。

谢谢，

我的代码如下：

```
<%
Do while Not Rs.EOF

if rs.fields.item("if_social_sec") = "True"  then
    displaytxt = "" 
    soc_sec_v = soc_sec
else
    displaytxt = "none"
    soc_sec_v = 0
end if 
%>

<table>
<form name="myform2" action="salary_action.asp" method="POST">

<tr bgcolor="#<%=color%>"> 
<td class="btline" width="25" align="center"><input type="checkbox" name="lb_id" value="<%=lb_id%>" onClick="highlightRow(this,'#FFFFCC','#EFF4FA');"></td>
<td class="btline difcursor" nowrap  width="7%">&nbsp;<%=rs.fields.item("lb_name")%></td>
<td class="btline"  nowrap  width="10%"><input type="text" name="working_day" id="working_day" value="<%=rs.fields.item("MaxOfdays")%>" size="7" onFocus="startCalc();" onBlur="stopCalc();"></td>
<td class="btline "  nowrap width="10%"><input type="text" name="wage" id="wage" value="<%=formatnumber(rs.fields.item("Total"),2)%>" onFocus="startCalc();" onBlur="stopCalc();"></td>
<td class="btline "  nowrap  width="8%"><input type="text" name="OT" id="OT" size="7" onFocus="startCalc();" onBlur="stopCalc();"><input type="hidden" id="OT_rate" value="<%=rs.fields.item("lbOT")%>" ></td>
<td class="btline " nowrap  width="8%"  ><input type="text" name="soc_sec" id="soc_sec" size="7" value="<%=soc_sec_v%>" onFocus="startCalc();" onBlur="stopCalc();"></td>
<td class="btline" nowrap style="padding-left: 10px" width="8%" ><input type="text" name="ex_pay" id="ex_pay" size="7" onFocus="startCalc();" onBlur="stopCalc();"></td>
<td class="btline bold" width="10%"><input type="text" name="net_wage" id="net_wage" size="7"  disabled></td>
<td class="btline"   ><input type="submit"></td>

</tr>

</form>
<%
        Rs.movenext
        n = n + 1       
    Loop
End if
Rs.close

set Rs=nothing
Call DBConnClose()
%>
</table>

<script>
function startCalc(){ 
  interval = setInterval("calc()",1);
}
function calc(){

  wage = document.myform2.wage.value;
  OT_rate = document.myform2.OT_rate.value;
  OT = document.myform2.OT.value; 
     OT_amt = OT_rate * OT;
  soc_sec = document.myform2.soc_sec.value; 
  ex_pay= document.myform2.ex_pay.value; 
  net_wage = (wage * 1) + (OT_amt * 1) - (soc_sec * 1) + (ex_pay * 1);

  document.myform2.net_wage.value = net_wage.toFixed(2);
}

function stopCalc(){
  clearInterval(interval);
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:44:45.203

问题是，对于数据库表中的每条记录，您都在创建一个单独的表单，并且所有表单都具有相同的名称，因此 JavaScript 在执行时无法找到实际的表单。

假设您想保持这种行为（每条记录的一个表单），您首先必须通过添加一些计数器来为每个表单赋予唯一的名称，您已经拥有了：

```
<form name="myform2_<%=n%>" action="salary_action.asp" method="POST"> 
```

通过添加计数器`n`，您可以为每个表单创建唯一名称。

下一步是改变调用函数的方式，你需要告诉 JavaScript 函数是谁调用了它，这样它才能获取正确的形式。为此，请将调用更改为：

```
onFocus="startCalc(this);" onBlur="stopCalc(this);" 
```

这`this`是保留的 JavaScript 标识符，当以这种方式传递时，它将是被聚焦或模糊的实际元素。

最后一步是修改 JavaScript 本身——你现在需要多个间隔，每个表单一个，所以关联数组是最简单的解决方案，将表单名称作为键。代码如下所示：

```
var intervals = {};
function startCalc(sender){ 
  var key = sender.form.name;
  intervals[key] = setInterval(function() {
    calc(key);
  },1);
}
function calc(key){
  var oForm = document.forms[key];
  wage = oForm.wage.value;
  OT_rate = oForm.OT_rate.value;
  OT = oForm.OT.value; 
  OT_amt = OT_rate * OT;
  soc_sec = oForm.soc_sec.value; 
  ex_pay= oForm.ex_pay.value; 
  net_wage = (wage * 1) + (OT_amt * 1) - (soc_sec * 1) + (ex_pay * 1);

  oForm.net_wage.value = net_wage.toFixed(2);
}

function stopCalc(sender){
  var key = sender.form.name;
  clearInterval(intervals[key]);
} 
```

如您所见，表单名称现在从“sender”元素中提取，然后用于获取实际表单，而不是不再存在的单个“myform2”，因为您有多个表单。

# javascript - 倒数计时器，可在同一页面的多个位置使用

> ID：12545394
> 
> 赞同：0
> 
> 时间：2012-09-22T16:05:28.160
> 
> 标签：javascript, jquery, e-commerce, countdown

我想制作一个倒数计时器，可以在同一页面的多个地方使用 - 所以我认为它应该以某种方式成为一个功能。

我真的希望它是用 jQuery 制作的，但我不能用我的代码来实现它。例如，我在一个页面中有 10 个产品，我需要制作一个倒数计时器 - 当计时器为 0 时，我需要它来隐藏产品。

我的代码是：

```
$(document).ready(function(){

    $(".product").each(function(){

        $(function(){
            var t1 = new Date()
            var t2 = new Date()
            var dif = t1.getTime() - t2.getTime()

            var Seconds_from_T1_to_T2 = dif / 1000;
            var Seconds_Between_Dates = Math.abs(Seconds_from_T1_to_T2);

            var count = Seconds_Between_dates;
            var elm = $(this).attr('id');
            alert(elm);
            countdown = setInterval(function(){
                $(elm + " .time_left").html(count + " seconds remaining!");
                if (count == 0) {
                    $(this).css('display','none');
                }
                count--;
            }, 1000);
        });
    });
}); 
```

编辑1：

```
$(document).ready(function(){

    $(".product").each(function(){
            var elm = $(this).attr('id');           

        $(function(){
            var t1 = new Date()
            var t2 = new Date()
            var dif = t1.getTime() - t2.getTime()

            var Seconds_from_T1_to_T2 = dif / 1000;
            var Seconds_Between_Dates = Math.abs(Seconds_from_T1_to_T2);

            var count = Seconds_Between_dates;

            alert(elm);
            countdown = setInterval(function(){
                $(elm + " .time_left").html(count + " seconds remaining!");
                if (count == 0) {
                    $(this).css('display','none');
                }
                count--;
            }, 1000);
        });
    });
}); 
```

您对此有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:19:34.460

您的问题似乎`this`不是指当前的 DOM 元素（来自`each`），而是指向`window`- 从`setTimeout`.

除此之外，您有一个不必要的 domReady 包装器，忘记了`#`id 选择器上的 ，应该使用缓存的引用并且永远不要依赖 的时间`setInterval`，这可能会非常漂移。用这个：

```
$(document).ready(function(){
    $(".product").each(function(){
        var end = new Date(/* from something */),
            toUpdate = $(".time_left", this);
            prod = $(this);
        countDown();

        function countdown() {
            var cur = new Date(),
                left = end - cur;
            if (left <= 0) {
                prod.remove(); // or .hide() or whatever
                return;
            }
            var sec = Math.ceil(left / 1000);
            toUpdate.text(sec + " seconds remaining!"); // don't use .html()
            setTimeout(countdown, left % 1000);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:46:09.183

我可能会使用单个间隔函数来检查所有产品。像这样的东西：

```
$(function() {

    /* set when a product should expire.
       hardcoded to 5 seconds from now for demonstration
       but this could be different for each product. */
    $('.product').each(function() {
        $(this).data('expires', (new Date()).getTime() + 5000);
    });

    var countdown_id = setInterval(function() {
        var now = (new Date()).getTime();
        $('.product').each(function() {
            var expires = $(this).data('expires');
            if (expires) {
                var seconds_remaining = Math.round((expires-now)/1000);
                if (seconds_remaining > 0) {
                    $('.time-left', this).text(seconds_remaining);
                }
                else {
                    $(this).hide();
                }
            }
        });
    }, 1000);
}); 
```

当没有任何东西可以过期时，您也可以取消间隔功能。

# silverlight - 图像解码（缩略图）和使用数据绑定

> ID：12545399
> 
> 赞同：1
> 
> 时间：2012-09-22T16:06:08.163
> 
> 标签：silverlight, windows-phone-7

我正在下载一堆图像并通过数据绑定将它们显示在列表框中。IE

```
...
<ListBox.ItemTemplate>
  <DataTemplate>
    <Image Source="{Binding ImageUrl}" Height="90" Width="90" Stretch="UniformToFill" />
  </DataTemplate>
</ListBox.ItemTemplate>
... 
```

我想要图像的缩略图。尽管将图像控制设置为 90x90，但图像仍会以其完整的原始大小进行解码，因此它们占用的内存比应有的要多得多。

有一个 PictureDecoder 类可用于此目的，但从外观上看，它不能在后台线程上使用。

我尝试创建一个使用 ThreadPool 和 WriteableBitmap 的附加依赖属性：

```
public static readonly DependencyProperty DecodingSourceProperty = DependencyProperty.RegisterAttached(
DecodingSourcePropertyName,
typeof (Uri),
typeof (Image),
new PropertyMetadata(null, OnDecodingSourcePropertyChanged));

static void OnDecodingSourcePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
    var img = d as Image;
    double height = img.Height;
    double width = img.Width;
    var uri = (Uri)e.NewValue;
    var bmp = new WriteableBitmap((int)width, (int)height);

    ThreadPool.QueueUserWorkItem(callback => {
        var web = new WebClient();
        web.OpenReadCompleted += (sender, evt) => {
            bmp.LoadJpeg(evt.Result);
            evt.Result.Dispose();
            Deployment.Current.Dispatcher.
            BeginInvoke(() = > {
                img.Source = bmp;
            });
        };
        web.OpenReadAsync(uri);
    }
    });
}

<Image helpers:ImageExt.DecodingSource="{Binding ImageUrl}" Height="90" Width="90" Stretch="UniformToFill" /> 
```

但它不尊重我设置的拉伸属性。

我想知道是否有任何第三方控件可以达到类似目的？

我想避免在服务器上调整图像大小——尽管这似乎是最简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:51:18.113

在 Windows Phone 8 中，BitmapImage 类中有新属性 - DecodePixelWidth 和 DecodePixelHeight

```
<Image>
   <BitmapImage UriSource="{Binding Url"}  DecodePixelWidth="200" DecodePixelHeight="200" />
</Image> 
```

它将图像解码为指定的分辨率，减少内存使用。（如果您想保持纵横比，只需使用其中一个属性而不是两个属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:49:58.183

你不能用`Image.GetThumbnailImage`吗？

如果 Image 包含嵌入的缩略图图像，则此方法检索嵌入的缩略图并将其缩放到请求的大小。如果 Image 不包含嵌入的缩略图图像，则此方法通过缩放主图像来创建缩略图图像。

[Image.GetThumbnailImage 方法](http://msdn.microsoft.com/en-us/library/ff434150.aspx)

# c++ - 在循环外存储 C++ 数组

> ID：12545405
> 
> 赞同：0
> 
> 时间：2012-09-22T16:06:30.603
> 
> 标签：c++, arrays

尝试使用 GLU 细分多边形时遇到问题。顶点回调总是用 gluTessVertex 定义的最后一个顶点进行回调。似乎存储在 GLdouble v[3] 中的值在 for 循环的每次迭代中都被 GC 处理了。如何存储每个 GLdouble v[3] 使其不会被 GC 处理？

```
for(int i = 0; i < vtxcnt; i++)
{
    float lon = dbls[i * 2];
    float lat = dbls[(i * 2)+1];
    GLdouble v[3] = {lon, lat, 0.0f};
    gluTessVertex(tess, v, v);
} 
```

*** 编辑：这似乎解决了问题... ***

```
GLdouble *vtxs = new GLdouble[vtxcnt * 3];

for(int i = 0; i < vtxcnt; i++)
{
    lon = dbls[i * 2];
    lat = dbls[(i * 2)+1];

    vtxs[(i * 3) + 0] = (double)lon;
    vtxs[(i * 3) + 1] = (double)lat;
    vtxs[(i * 3) + 2] = (double)0;
    gluTessVertex(tess, &vtxs[(i * 3) + 0], &vtxs[(i * 3) + 0]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:15:59.000

`gluTessVertex`只存储顶点指针。在执行镶嵌之前，指针必须保持有效。您的代码中不是这种情况，因此它失败了。

# mysql - MySQL替换不起作用

> ID：12545413
> 
> 赞同：2
> 
> 时间：2012-09-22T16:07:08.543
> 
> 标签：mysql, replace

`\"`我用它来代替`"`：

```
UPDATE wp_posts SET post_content = REPLACE (post_content, '\"', '"') 
```

该查询返回`0 row(s) affected`并且没有任何反应。

这个查询有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:09:05.610

您需要转义反斜杠：

```
UPDATE wp_posts SET post_content = REPLACE (post_content, '\\"', '"') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:09:53.383

反斜杠字符是 MySQL 中的转义字符，因此您需要像这样对其本身进行转义：

```
UPDATE wp_posts SET post_content = REPLACE(post_content, '\\"', '"') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T16:10:15.497

采用：

```
REPLACE(`post_content`, '\\"', '"') 
```

# python - 提供静态文件的 Web 应用程序

> ID：12545418
> 
> 赞同：0
> 
> 时间：2012-09-22T16:07:30.390
> 
> 标签：python, django, apache, webserver, openshift

我正在考虑设计自己的网络应用程序来提供静态文件。我只是不想使用亚马逊服务..

那么，谁能告诉我如何开始这个项目？我正在考虑用 Python 开发——Openshift 上的 Django（Redhat）。

这就是我脑海中的想法：

*   仪表板帮助我添加/删除/管理静态文件
*   设置 API 类型的东西（端点：JSON 对象），以便我可以使用这个项目来服务我的网络应用程序！
*   *由于openshift使用Apache！，我正在考虑动态编辑`htaccess`和提供文件..但不确定是否可能*

或者，我可以使用 django 的 urls.py 来提供文件，但我不认为 djano 实际上是为此而生的。

有什么想法和建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:22:10.377

这个怎么样：

1.  使用 nginx 服务静态文件
2.  将文件保存在某种预定义的目录结构中，构建一个 django 应用程序作为仪表板，文件系统作为后端。也就是说，从仪表板移动、添加或删除文件会更改文件系统，而 nginx 不必知道这个仪表板。
3.  不要使用动态路由。只需使用数据板布局和维护正确的目录结构。

或者，将目录结构和文件元数据保留在某些数据库服务器中，以便更快地搜索和操作。

这应该会导致开销非常低的静态文件服务器。

# sql-server-2008 - 从表中检索特定列总和

> ID：12545421
> 
> 赞同：0
> 
> 时间：2012-09-22T16:07:51.040
> 
> 标签：sql-server-2008, select, filter, aggregate-functions, calculated-columns

我在同一个表中有几列的数据：

```
Col1    Col2    Col3    Col4    Col5    Col6 
```

我想从表中检索从 Col1 到 Col3、从 Col3 到 Col6 或从 Col1 到 Col6 的总和，但是我不知道如何选择这些特定列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:19:46.513

您可以创建一个视图：

```
CREATE VIEW dbo.col_sums_from_some_table
AS
  SELECT 
     [Col1-3] = Col1 + Col2 + Col3,
     [Col3-6] = Col3 + Col4 + Col5 + Col6,
     [Col1-6] = Col1 + Col2 + Col3 + Col4 + Col5 + Col6
  FROM dbo.table_name; 
```

（如果这些列可以为空，您需要用`COALESCE`@davek 指出的那样包装它们。）

然后您可以直接选择您要查找的列或应用 SUM()：

```
SELECT [Col1-3] FROM dbo.col_sums_from_some_table;

SELECT SUM([Col1-6] FROM dbo.col_sums_from_some_table; 
```

您还可以在表上创建计算列，例如（我在这里猜测数据类型）：

```
ALTER TABLE dbo.table_name ADD [Col1-3] 
  AS CONVERT(INT, COALESCE(Col1, 0) + COALESCE(Col2, 0) + COALESCE(Col3, 0)); 
```

您也可以选择对这些计算列进行持久化/索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:14:52.077

对于单行：

```
select col1 + col2 + col3 from mytable 
```

（假设所有列都是数字）

对特定列的所有值求和：

```
declare @sum int
set @sum = 0

select @sum = @sum + col1 from mytable 
```

对所有行求和，例如第 1 列和第 2 列：

```
declare @sum int
set @sum = 0

select @sum = @sum + col1 + col2 from mytable 
```

为了有效地处理空值，您可以使用 coalesce 函数：

```
declare @sum int
set @sum = 0

select @sum = @sum + coalesce(col1, 0) + coalesce(col2, 0) from mytable 
```

# php - 在 PHP 中的连续页面重新发布中保留信息

> ID：12545426
> 
> 赞同：1
> 
> 时间：2012-09-22T16:08:25.907
> 
> 标签：php

这是我的计划的目标。

1.  我想在页面上显示大约 5-6 个圆圈，颜色为红色和绿色。
2.  什么时候，任何一个圆圈被点击。它的颜色变为蓝色。
3.  然后，如果我单击页面上的任何其他圆圈，其颜色也应变为蓝色，并且先前单击的圆圈也应显示为蓝色。
4.  因此，如果我一一点击所有圆圈，在连续页面加载中，所有圆圈都应显示为蓝色。
5.  而且，当单击蓝色圆圈时，它应该显示其原始颜色。
6.  这个循环应该永远持续下去，直到页面关闭。

这就是我到目前为止所做的。

```
define("SIZE", 5); //the no. of circles

 class redblock
     {
     var $color;

         function set_color($data)
     {
         $this->color = $data;
     }
     function get_color()
     {
         return $this->color;
     }
     function image_source()
     {
         $rval2 = $this->get_color();
         echo $rval2;
     }
     function display_block()
     {
         $rval = $this->get_color();
         echo "<img src = '",$rval,"' width=120> </br> " ; 
         }
 }

for ($i=0 ; $i < SIZE ; $i++ ) //INIT color blocks

             { $rb[$i] = new redblock ; }

for ($i=0 ; $i < SIZE ; $i++ ) //color set
{
    if(!isset($_POST[$i.'form']))
    {    
        if ($i % 2 == 0) //even blocks are green
            $rb[$i]->set_color("green.jpg");
        else                    //odd blocks are red
            $rb[$i]->set_color("red.jpg"); 
    }
    if ( $_POST[$i.'form'] == "blue.jpg" )
        $rb[$i]->set_color("blue.jpg");

    if(isset($_POST[$i.'form']))
        $rb[$i]->set_color("blue.jpg");
} ?>

<?php

// BOTH BLOCKS when clicked repeatedly should turn to white and fro.

for ($i=0 ; $i < SIZE ; $i++ ) //display the blocks
{
    echo "<form method ='post'>";
    echo "<input type = 'image' width='120' src ='",$rb[$i]->image_source(),"'>";
    echo "<input type='hidden' name='".$i,"form' value='",$rb[$i]-get_color(),"'>";
        echo "</form>";
    }

?> 
```

发生了什么，在这段代码中。1\. 假设我点击圆圈 1。它变成蓝色。2.然后我点击圈2，它变成蓝色，但圈1又变成绿色。我想要圈一个保留蓝色。

请给我正确的代码，或指导我正确的方向。甚至，一个小小的帮助将在很大程度上受到赞赏。

我对 Javascript 等一无所知。我只知道 PHP 和 HTML/CSS。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:10:52.363

您可以使用[`$_SESSION`](http://php.net/manual/en/reserved.variables.session.php)来存储每个圆圈的状态并在连续页面加载时使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:17:07.813

您可以使用[$_SESSION变量或使用](http://php.net/manual/en/session.examples.basic.php)[setcookie()](http://php.net/setcookie)设置 cookie ，然后在连续页面加载时使用 $_COOKIE 检索它。无论哪种方式都会让您临时存储这些值。如果您希望这些值在浏览器关闭后消失，那么会话是可行的方法。Cookie 将一直存在，直到它们过期或被用户清除。

# c# - 我的上下文是否与我的存储库太耦合了？

> ID：12545429
> 
> 赞同：0
> 
> 时间：2012-09-22T16:08:37.643
> 
> 标签：c#, entity-framework, inversion-of-control, unity-container, repository-pattern

学习实体框架、存储库和 IOC，我想要实现的是实现存储库模式以更改我的数据源提供程序。

请从一个开源项目中查看这个示例：

```
namespace MyApp.Domain.Interfaces
{
    public interface IEFContext : IDisposable
    {
    }
} 
```

### EFContext（实现 IEFContext）

```
namespace MyApp.Data.Context
{
    public class EFContext : DbContext, IEFContext
    {
        public const string DBConnectionName = @"MyDBName";

        public EFContext() : base(DBConnectionName)      
        {
        }

        public DbSet<Member> Member { get; set; }
    }
} 
```

### IMemberRepository

```
namespace MyApp.Domain.Interfaces.Repositories
{
    public interface IMemberRepository
    {
        Member GetUser(string username);
    }
} 
```

### MemberRepository（实现 IMemberRepository）

```
namespace MyApp.Data.Repositories
{
    public class MemberRepository : IMemberRepository
    {
        private readonly EFContext _context;

        public MemberRepository(IEFContext context)
        {
            _context = context as EFContext;
        }

        // update
        public Member GetUser(string username)
        {
            return _context.Member.SingleOrDefault(name => name.UserName.ToUpper().Contains(username.ToUpper()));
        }
    }
} 
```

这是我使用 Unity 的应用程序控制台

### 控制台应用

```
namespace MyApp.ConsoleApp
{
    public class Program
    {
        static void Main(string[] args)
        {
            var container = new UnityContainer();
            container.RegisterType<IEFContext, EFContext>();
            container.RegisterType<IMemberRepository, MemberRepository>();
            var repository = container.Resolve<MemberRepository>();
            var user = repository.GetUser("johnDoe");
            Console.WriteLine(user.Email);
            Console.ReadLine();
        }
    }
} 
```

# 我的问题如下：

如果我决定添加一个新的上下文，例如：

```
namespace MyApp.Data.Context
{
    public class EFContext2 : DbContext, IEFContext
    {
        public const string DBConnectionName = @"MyNewDBName";

        public EFContext2() : base(DBConnectionName)      
        {
        }

         public DbSet<Member> Member { get; set; }
    }
} 
```

我只需要更改依赖项，例如：

```
namespace MyApp.ConsoleApp
{
    public class Program
    {
        static void Main(string[] args)
        {
            ...
            container.RegisterType<IEFContext, EFContext2>();
            ...         
        }
    }
} 
```

但在此示例中，我的 MemberRepository 与我的第一个上下文松散耦合。因此，如果我必须更改我的上下文，我也必须更改我的存储库。

我很乐意听取您对此的看法。亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:42:03.717

```
but in this example my MemberRepository is loosely-coupled with my first context. So if I have to change my Context I must also change my repository. 
```

是的，但它是从**一行**更改：

```
private readonly EFContext _context; 
```

到

```
private readonly IEFContext _context; 
```

而不是在你的构造函数上强制转换：

```
public MemberRepository(IEFContext context)            
{                
    _context = context;            
} 
```

现在，您可以注入任何类型的实现 IEFContext 的具体上下文。

想一想：你试图用依赖注入做的是，好吧，注入依赖。但是，你是怎么做的？好吧，您可以通过概括这些依赖关系来做到这一点。我的意思是，您希望能够使用不同的上下文，然后使用接口`IEFContext`而不是具体的上下文。这就是为什么你的构造函数需要一个接口。

但是，这是第一部分，知道，你的代码的问题是当你说

```
_context = context as EFContext; 
```

你正在向下转换接口并说：这个接口是一个 EFContext。你失去了一般性。知道当您尝试注入 SQLContext 时，您将无法注入，因为尽管它是 IEFContext，但它不是 EFContext。这就是为什么您移除`as EFContext`零件并让

```
_context = context; 
```

现在至于第二部分，通用并期望和接收接口只是第一部分。您现在需要告诉编译器您期待一个通用上下文 IEFContext，但您还需要告诉他，无论您收到哪种上下文，您都应该能够使用 GetUsers。这就是您的界面发挥作用的地方。您知道`public Member GetUser{}`在您的界面中声明该属性强制并保证无论哪种上下文到达您都能够获得您的用户。

我希望这有点简单易懂。祝你好运。

# forms - Drupal 7 中的节点回复

> ID：12545432
> 
> 赞同：0
> 
> 时间：2012-09-22T16:08:52.317
> 
> 标签：forms, drupal, drupal-7, reply

我可以做这样的事情。

1.  在特定的***节点类型***上，应该有一个带有少量字段的表单。
2.  一旦有人通过该表格发送*回复。*它首先进入“*审核区域*”到特定角色（即*回复管理员*）
3.  一旦*回复管理员*批准该回复，相同的信息就会发送给节点的**作者**。否则它只会呆在那里。

我想知道我是否可以通过 NODE 做这样的事情，这样我就可以轻松地导入我的 wordpress 回复。

您可以查看网站并在[www.emergingstars.com](http://www.emergingstars.com)上注册以获取更清晰的示例。

我正在使用带有 Web 表单的 Drupal 7，任何帮助将不胜感激。

问候， 阿姆贾德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:23:13.210

使用评论模块（核心）选项，您可以做到这一点。有了规则，你可以通知作者。

# c - 释放内存时应用程序冻结

> ID：12545438
> 
> 赞同：0
> 
> 时间：2012-09-22T16:09:19.140
> 
> 标签：c, windows, memory, malloc, free

我有以下代码，我尝试将字符串`03080000`转换为字节数组，其中第一个字节为 03，第二个为 08，第三个为 00，第四个为 00。

但是当我释放内存时它一直冻结。
我尝试使用调试器（visual studio）单步执行它，但是当我跨过 free() 函数时，调试器似乎停止了，它只是挂起。

`bData`我写信的方式是否在破坏？或者有什么问题？

```
LPCWSTR lpValueData = L"03080000"
WCHAR HexChar[2] = {0};

UINT i;
UINT n = 0;

DWORD dwDataSize;
PBYTE bData;

dwDataSize = wcslen(lpValueData) / 2;
bData = (PBYTE) malloc(dwDataSize);
for (i = 0; i < dwDataSize * 2; i += 2)
{
    HexChar[0] = lpValueData[i];
    HexChar[1] = lpValueData[i + 1];

    swscanf_s(HexChar, L"%X", &bData[n++]);
}
// I want bData to be {0x03, 0x08, 0x00, 0x00}
// Compare bData to another byte array here with memcmp
free(bData); // freezes here. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:45:29.887

L"%X" 请求指向 int 的指针，而不是 BYTE

所以，应该是

```
int x;
swscanf_s(HexChar, L"%X", &x);
bData[n++] = x; 
```

# android - 谁能帮我正确设计这个

> ID：12545440
> 
> 赞同：2
> 
> 时间：2012-09-22T16:09:25.067
> 
> 标签：android, android-layout

我有以下布局文件

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/no_image" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/imageView1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvWord1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tvWord2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView4"
        android:src="@drawable/edit" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView4"
        android:layout_below="@+id/imageView2"
        android:src="@drawable/delete" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/speak_my_words" />
</RelativeLayout> 
```

这是我更新的图像。

![在此处输入图像描述](../Images/6e01bb90b316e7f4da961f48e9f5b5dd.png)

你能给我更多建议吗？

在 Sherif elKhatib 解释的帮助下更新了捕获

![在此处输入图像描述](../Images/ec4a31c0b78b91b4440ca72f31818c23.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:26:48.327

您应该使用RelativeLayout。随心所欲地放置一切。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:src="@drawable/no_image" />

    <TextView
        android:id="@+id/tvWord"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/linearlayout"
        android:layout_toRightOf="@+id/imageView1"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tvword2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/tvWord"
        android:layout_alignRight="@+id/tvWord"
        android:layout_below="@+id/tvWord"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:id="@+id/linearlayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/edit" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/delete" />
        </LinearLayout>

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/speak_my_words" />
    </LinearLayout>

</RelativeLayout> 
```

# javascript - Prototype.js：选择以 id 开头的元素？

> ID：12545444
> 
> 赞同：2
> 
> 时间：2012-09-22T16:09:33.697
> 
> 标签：javascript, prototypejs, selector

有这样的属性`id`标签

```
<span id="attr35"></span>
<span id="attr44"></span>
<span id="attr23"></span> 
```

需要像这样为它们设置样式（最后两位数可能是任意的）

```
$("span[id=attr???]").setStyle({'display':'inline'}); 
```

可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T16:12:18.960

您使用有效的[Selectors API](http://www.w3.org/TR/selectors-api/)选择器。

```
$("span[id^=attr]") 
```

如果您想要不止一场比赛，请使用`$$`

```
$$("span[id^=attr]") 
```

* * *

哎呀，又一题。`.invoke`如果您获得多个匹配项，则应该使用。您不能`setStyle`直接调用返回的集合。

```
$$("span[id^=attr]").invoke("setStyle", ...) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T16:14:53.403

从 1.5.1 版本开始，该[`$$`函数](http://api.prototypejs.org/dom/dollar-dollar/)支持属性-startswith-selector `^=`：

```
$$('[id^="attr"]').invoke("setStyle",{display:'inline'}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T16:12:55.980

```
$$('[id^="attr"]').invoke("setStyle",{'display':'inline'}); 
```

# python - Python 字符串 LCS

> ID：12545450
> 
> 赞同：0
> 
> 时间：2012-09-22T16:10:13.173
> 
> 标签：python, string, lcs

我想实现一个执行以下 I/O 的 LCS 版本：

输入：superLCS('cat','car')

输出：['ca#','ca#']

目前，我的程序适用于此，但如果字母不合适，它就不起作用。

例如，如果输入是：superLCS('art','cad')，则输出 ['###','###']。它应该输出 ['a##','#a#']

代码：

```
def superLCS(s1,s2):
    return helper(s1,s2,'','')

def helper(s1,s2,res1,res2):  #s1 is string 1, s2 is string 2, res1 is result1, res2 is result2
    if s1 == '' or s2 == '': #if either string is empty return the result
        return [res1,res2]
    if s1[0] == s2[0]: #if they are equal, put their string in the list
        res1 += s1[0]
        res2 += s1[0]
        return helper(s1[1:],s2[1:],res1,res2)
    else:  #if they arent, add a # to the list
        res2 += '#'
        res1 += '#'
        return helper(s1[1:],s2[1:],res1,res2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:15:18.797

你的问题是算法问题。LCS 是一种经典的动态规划算法，您必须在其中填充一个维度的“矩阵” `len(s1) x len(s2)`，每个值`M[i,j]`取决于其上方单元格的值，`M[i-1,j]`在其左侧`M[i,j-1]`，以及对角线上方的左侧`M[i-1][j-1]`，这是只是为了获得LCS的长度。要检索（其中一个潜在的）LCS，您需要从右下角到左上角进行额外的“回溯”。

由于您不这样做，因此您正在对子序列空间进行更简单、更窄的搜索，因此在您的第二个示例中找不到正确的 LCS。

[这一切都在 Wikipedia 上](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem#Worked_example)得到了很好的解释和演示。

# jquery - 使用 simplemodal 删除 body 类 onClose

> ID：12545452
> 
> 赞同：2
> 
> 时间：2012-09-22T16:10:18.290
> 
> 标签：jquery, simplemodal, removeclass

我将 Eric Martin 的[SimpleModal 插件](http://www.ericmmartin.com/projects/simplemodal/)用于具有多种不同模式的页面。其中一个模态框的高度和宽度与页面上的其他模态框不同，因此当单击较大模态框的链接时，我在正文中添加了一个类。就控制该特定模式的样式而言，这可以正常工作。但是，当模式关闭时删除类是一个问题。我最初尝试使用 onClose 功能，但没有任何成功。因此，当您单击关闭链接时，我尝试附加 removeClass ，但它没有删除正文类？帮助？

基本上我想做这样的事情来确保当模式通过使用 onClose 函数的任何内置方法关闭时删除该类：

```
$("#element-id").modal({onClose: function () {
    $('body').removeClass('classname');
}}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:32:38.417

尝试这个：

```
$('#sample').modal({
    onOpen: function(dialog) {
        $('body').addClass('classname');
        dialog.overlay.show();
        dialog.container.show();
        dialog.data.show();
    },
    onClose: function(dialog) {
        $('body').removeClass('classname');
        $.modal.close()
    }
});​ 
```

如果您想要一些流畅的动画，则必须更改`.show()`为其他内容。文档[在这里](http://www.ericmmartin.com/projects/simplemodal/)。

# performance - （移动）性能计算的跨平台开发解决方案

> ID：12545460
> 
> 赞同：0
> 
> 时间：2012-09-22T16:11:14.727
> 
> 标签：performance, cross-platform, scientific-computing, generic-programming

我正在寻找一种适合处理大约 1 到 2 GB 数据的编程语言/平台，并且可以跨平台（包括现代移动平台）足够快地运行信号处理算法。有人遇到合适的解决方案吗？请**分享**您对跨平台开发的**研究**和**经验。**

我目前的研究工作很复杂，由于

*   强大的 [移动] 平台的部署增加，
*   通过 Android 的流行对 Java 的支持（目前是 stackoverflow 上的#1 标签）

我对 C# 和[Mono](http://www.mono-project.com/Main_Page)有过不同的体验（它很快，但跨平台兼容性可能需要一些额外的努力）。

我**不是**在寻找**高性能计算**(HPC)，而是在**开发**具有数据和计算密集型背景的代码，以尽可能少的努力**表现良好。**一个案例研究场景是适用于 Cython 编译器的 Python 代码。

我**不是**在寻找具有[Phonegap和 Adob​​e Air 等解决方案](https://build.phonegap.com/)**的以 UI 为中心的**项目，但我对其性能知之甚少。

**链接**：

*   [使用通用编程的高性能应用程序的跨平台开发](http://www.cs.colostate.edu/saxs/researchexam/GenericProgramming.pdf)
*   [Native Client：用于可移植、不受信任的 x86 本机代码的沙箱](http://research.google.com/pubs/archive/34913.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:09:35.800

你也许可以开始看看[Droidcluster](http://www.ibr.cs.tu-bs.de/papers/buesching-icdcs2012.pdf)

# google-apps-script - HtmlTemplate 中的图像对象

> ID：12545461
> 
> 赞同：0
> 
> 时间：2012-09-22T16:11:21.490
> 
> 标签：google-apps-script

一个相当简单的问题，但有人知道为什么我可以在 HtmlService 模板中调用 Image 对象吗？像这样：

```
<script>
var myImage = new Image();
</script> 
```

我收到以下错误：

```
Image is not defined. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:33:43.530

奥拉涅

Google Apps 脚本使用[Caja](http://code.google.com/p/google-caja/)从用户代码中过滤不安全的 javascript。您可以尝试[Caja Playground](http://caja.appspot.com/)来检查您的代码会发生什么。如果您在那里遇到同样的错误，那么罪魁祸首是 Caja，而不是 Google Apps Script

# android - setAdapter“调用需要 API 级别 11（当前最低为 8）：android.widget.AbsListView#setAdapter”？

> ID：12545462
> 
> 赞同：20
> 
> 时间：2012-09-22T16:11:32.633
> 
> 标签：android, android-fragments

我在`setAdapter()`扩展的类中调用该方法`Fragment`。请注意，我已经导入了`android.support.v4.app.Fragment`.

但是，我收到一条错误消息，指出 API 级别必须为 11 级。

我该怎么做才能在不更改`minSdkVersion="8"`为的情况下解决此问题`minSdkVersion="11"`

```
package foo.bar.qux;

import java.util.Calendar;
import java.util.Date;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

import android.support.v4.app.Fragment;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class TabFragmentList extends Fragment {

    String category, xml;
    NodeList nodes;
    int numResults;
    private ListView lv;
    Date date;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) return null;
        return (LinearLayout) inflater.inflate(R.layout.eventlist, container,
                false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Activity activity = getActivity();
        if (activity != null) {
            final Calendar c = Calendar.getInstance();
            ListContent[] item = new ListContent[3];
            category = (String) activity.getIntent().getExtras()
                    .get("category");
            xml = (String) activity.getIntent().getExtras().get("xml");
            TextView tv = (TextView) getView().findViewById(R.id.category);
            tv.setText(category);
            nodes = doc.getElementsByTagName("event");
            for (int i = 0; i < 3; i++) {
                c.add(Calendar.DATE, 1);
                date = c.getTime();
                item[i] = new ListContent();
                item[i].setList(nodes, category, date);
            }
            EventListAdapter adapter = new EventListAdapter(activity,
                    R.layout.eventlist_row, item);
            lv = (ListView) getView().findViewById(R.id.listView1);
            lv.setAdapter(adapter); // ERROR SHOWN HERE
        }
    }
} 
```

注意：我尝试将 targetSdkVersion 减少到 10。但我得到了错误。请帮忙！

编辑：我不明白为什么它被称为`AbsListVew`当我使用的所有东西都是`ListView`. 另外，请注意我使用了自定义适配器。

`EventListAdapter`扩展`ArrayAdaptere<ListContent>`并显示没有错误。

供您参考的是 R.id.ListView1 的 xml 布局代码片段

```
<ListView
        android:layout_margin="10dp"
        android:dividerHeight="10.0sp"
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-19T05:42:54.457

`Right click on the project folder > Android tools > Clear Link Markers`

“运行 Android Lint”会生成一些标记，这些标记会导致此错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T11:14:38.803

解决方案只是将类型转换为正确的子类型，因为后来的 Android 版本引入了同名的方法调用。

```
@SuppressWarnings({ "unchecked", "rawtypes" })

EventListAdapter adapter = new EventListAdapter(activity, R.layout.eventlist_row, item);
lv = (ListView) getView().findViewById(R.id.listView1);
((AdapterView)lv).setAdapter(adapter); //ERROR SOLVED HERE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:22:07.137

正如您在 docs[`setAdapter()`](http://developer.android.com/reference/android/widget/AbsListView.html#setAdapter%28android.widget.ListAdapter%29)方法中看到的，`AbsListView`仅在 API 级别 11 中可用。所以您无能为力，您最终可以将您的`AbsListView`转换为`ListView`or`GridView`然后调用`setAdapter()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T13:20:02.157

我通过像这样转换我的 setAdapter 方法解决了“抽象方法未实现错误”：

```
 @SuppressWarnings("unchecked")
 public void setAdapterSDK8(Adapter adapter) {
    ((AdapterView) this).setAdapter(adapter);
    ((StaggeredGridView) this).setAdapter((ListAdapter) adapter);
 } 
```

这与 etsy 交错网格视图有关

# iphone - TableView 到 detailview：在 DetailView iphone sdk 中显示图像和描述

> ID：12545475
> 
> 赞同：0
> 
> 时间：2012-09-22T16:13:08.057
> 
> 标签：iphone, sdk, uiviewcontroller, imageview, tableview

我解释我的问题。我有我的 RootController 和我的 DetailController。我想做一堂烹饪课。在我的根控制器上，就是这样： [http](http://www.noelshack.com/2012-38-1348330181-rootview.png) ://www.noelshack.com/2012-38-1348330181-rootview.png 我想在选择一行时，我的详细控制器是这样的：[http://www.noelshack。 com/2012-38-1348330163-detailview.png](http://www.noelshack.com/2012-38-1348330163-detailview.png)

因此，描述和图像更改取决于所选行。那怎么可能呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:20:35.937

据推测，您的烹饪课程由应用程序架构中的某个模型对象表示。在这种情况下，您的详细视图控制器需要具有一个属性，该属性引用您的`RootController`. 当您实例化详细视图控制器时，`RootController`将提供模型对象的实例（我们称之为`Recipe`）`DetailController`，例如

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    CookLesson *lesson = [lessons objectAtIndex:indexPath.row];
    DetailController *detailController = [[DetailController alloc] initWithNibName:"your-nib-name" bundle:nil];
    detailController.lesson = lesson;
    // push the controller on the nav stack, etc.
} 
```

# javascript - BoilerplateJS：处理授权和身份验证的推荐方式

> ID：12545476
> 
> 赞同：3
> 
> 时间：2012-09-22T16:13:15.003
> 
> 标签：javascript, boilerplatejs

使用[BoilerplateJS](http://boilerplatejs.org)设置，处理授权和身份验证的推荐方法是什么？

显然，在服务器端，您会检查 cookie 等以了解谁登录了。但是，在客户端，您如何知道用户是否已登录以及他们的用户名等是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T05:48:01.310

我将在其中一个使用 BoilerplateJS 的项目中分享这是如何完成的。在这个项目中，我们使用 OAuth 2.0 进行身份验证。

*   我们有一个单独的登录页面，它没有使用 BoilerplateJS 或复杂的 JS。将其分开的原因是身份验证可能依赖于 URL 重定向，这在 JS 中处理得不是最好的。

*   一旦用户通过正确的身份验证，我们就会收到服务器会话的 auth_token 并将其存储为 JS 变量。我们使用全局 Boiler.Context 的“设置”来存储这个令牌。由于设置被继承到子上下文，我们可以从任何地方访问它。

*   出于授权目的，然后我们为包含授权访问密钥的登录用户下载了一个简单的 ACL。这些键仅用于客户端验证以显示/隐藏控件。对后端服务进行真正的授权。

*   我们希望 BoilerplateJS 组件完全独立，包括对其进行身份验证。因此，如果特定组件的视图模型从服务器接收到未经授权的 401 HTTP 响应（未登录或会话到期），我们会在那里以不同的方式呈现组件，而不会将用户重定向到登录页面。

*   由于我们没有重定向，因此即使 BoilerplateJS 组件没有主动显示其内容，用户也可以使用页面上的其他信息。我们在组件上呈现了一些错误信息，并带有重新登录的链接。

*   对此的处理是通过我们创建的通用错误处理程序完成的。从 component.js 中，我们将错误回调函数传递给我们的视图模型（您可能在上下文本身也有这个）。视图模型使用此回调函数来通知其中发生的任何错误。在 401 HTTP 代码的情况下，调用此处理程序要求 component.js 呈现带有错误信息和重新登录链接的 UI。

*   用户单击重新登录 URL 以返回登录页面。此 URL 包含对原始 URL 的反向引用，以便用户能够在身份验证后访问他所在的页面。

# csv - 使用gnuplot的sar csv输出绘图图表？

> ID：12545477
> 
> 赞同：0
> 
> 时间：2012-09-22T16:13:25.567
> 
> 标签：csv, gnuplot, sar

我有一个 bash 脚本来记录 cpu 负载和内存使用的 sar 输出，它以 csv 格式输出记录的统计信息。但是我将如何从 csv 输出创建一个 gnuplot 图表，并且仅从命令行执行此操作而没有交互式命令/输入？

基本上，我想扩展我的 bash 脚本来记录 sar 输出、输出到 csv 并通过运行 bash 脚本来创建 gnuplot 图表。

目前的

sar cpu 加载 csv 输出

```
Time,runq-sz,plist-sz,ldavg-1,ldavg-5,ldavg-15
02:04:36AM,0,171,0.00,0.00,0.00
02:04:37AM,0,171,0.00,0.00,0.00
02:04:38AM,0,171,0.00,0.00,0.00 
```

sar mem csv 输出

```
Time,kbmemfree,kbmemused,%memused,kbbuffers,kbcached,kbcommit,%commit
02:11:38AM,1501736,811188,35.07,38852,101808,2628024,49.03
02:11:39AM,1501488,811436,35.08,38852,101808,2628024,49.03
02:11:40AM,1501364,811560,35.09,38852,101808,2628024,49.03 
```

任何意见是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:44:45.460

一种方法（也许是最简单的）是使用以下语法：

```
#!/bin/bash
outputname="output"
gnuplot << eor
 set terminal png
 set output '$outputname.png'
 set datafile separator ","
 plot 'datafile' u 1:2, '' u 1:3 ...
 <other gnuplot commands here>
eor 
```

正如我所展示的，bash 变量名可以在 gnuplot 命令行中进行转义。

# cakephp - 获取同一类别的上一篇/下一篇文章

> ID：12545480
> 
> 赞同：0
> 
> 时间：2012-09-22T16:13:40.180
> 
> 标签：cakephp, categories

所以，我所拥有的是一个显示帖子的页面。帖子被收集到项目中。而且，在这个页面上，除了帖子之外，我还会显示同一项目的上一篇和下一篇文章。所以，我的控制器中有这个：

```
$this->set("post", $this->Post->find("first", array("conditions" => array("Post.id" => $id), "contain" => array("User", "Project", "Project.Post" => array("id", "image", "title"), "Comment", "Comment.User" => array("id", "username", "mail"), "Comment.User.Post" => array("id", "image", "title")))));
$this->set("neighbors", $this->Post->find("neighbors", array("field" => "id", "value" => $id))); 
```

问题是它从所有帖子中获取上一个和下一个帖子，而不仅仅是同一个项目的帖子。

所以，如果你能帮助我一点:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:46:14.717

我假设 Post belongsTo Project 和 Project hasMany Post。

您只需要添加一个额外的条件：

```
$post = $this->Post->find("first", ...); // this is your first find call, assign it to a var instead

$neighbors = $this->Post->find('neighbors', array(
    'field' => 'id', 
    'value' => $id,
    'conditions' => array(
        'Post.project_id' => $post['Post']['project_id'],
    ),
));
$this->set(compact('post', 'neighbors')); 
```

我还没有尝试过，但是查看源代码， findNeighbors 确实尊重`conditions`密钥。

# css - CSS：nowrap div 的子 div 在添加内容时会发疯

> ID：12545483
> 
> 赞同：2
> 
> 时间：2012-09-22T16:14:37.843
> 
> 标签：css

我正在尝试制作一个布局，其中有一个以动态方式添加其内容的 Div。我希望这个“父” div 具有固定的高度，并且当添加内容时，div 会根据需要水平增长。

这是我为隔离问题而制作的测试 HTML。

```
<html>
<head>
  <link rel="stylesheet" href="styletest.css" />
</head>
<body>
  <div style="width:700px;overflow:auto">
    <div class="anio">
      <div class = "semestre">
        <div class="floater"></div>
        <div class="floater"></div>
        <div class="floater"></div>
        <div class="floater"></div>
        <div class="floater"></div>
        <div class="floater"></div>
        <div class="floater"></div>
      </div>
    </div>
  </div>    
</body>
</html> 
```

在这里，我有 7 个`class=floater`div 进入`class=semestre`容器 div，当我添加更多 div 时，它应该水平增长`class=floater`。所有这些都进入一个固定宽度的 div `overflow-x:auto`。

在与 css 进行了一番斗争之后，我完成了以下工作：

```
div.floater { 
    margin: 4px;
    width: 110px;
    height: 82px;
    border: 1px solid #ccc;
    display: inline-block; /*this to make the floaters go horizontal*/
}
div.semestre{  
    white-space: nowrap; /* this avoid the floater overflowing under the parent div*/
    margin-top: 5px;
    margin: 2px;
    height: 90px;
    border: 1px solid #ccc;
    min-width:98%;

}
div.anio{
    margin : 2px;
    border: 1px solid #ccc;
    min-width:98%;

} 
```

所以这行得通..有点.. `class=floater`div 呈水平状态并导致`overflow-x`最外层 div 的激活，但包含 div 的容器 div`class=floater`不会像我认为的那样增长（这可以通过边界看到而不是生长）。谷歌搜索后，我发现了一些建议的解决方案，例如`width:auto`在 css 属性之上添加`min-width:`或浮动它们，但没有一个有效。这是一个小问题，因为边框仅用于格式化。

我遇到的市长问题是，当我尝试将内容添加到`class=floater`div 时，它们会变得疯狂并且不会停留在应有的位置（当它们没有内容时）。我尝试`white-space:nowrap`通过添加`white-space:normal`到浮动类来恢复，但这没有用。在那之后，我开始发疯，开始尝试随机的东西，并设法解决了我的第一个问题，但我忘记了我做了什么，并回到了步骤 1 D:。

老实说，我对 html/css 很陌生，我正在边做边学。所以如果这个问题已经被问过/回答过，相信我已经搜索过了。还请原谅我的英语，尽力而为。

感谢您的时间。

编辑：根据要求，小提琴：D [http://jsfiddle.net/UBYKy/1/](http://jsfiddle.net/UBYKy/1/) 在那里你可以看到我的两个问题。

编辑2：我相信我已经找到了解决这两个问题的方法。对于第一个问题，我通过添加`display: inline-block`到父 div 来解决它，对于第二个问题，我添加`vertical-lign:top`到 floater 类 css（如 afshin 建议的那样），它工作得很好。我希望这可以帮助任何有同样问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:31:04.517

**我认为你应该使用这个**

```
div.floater { 
 vertical-align:top;
 margin: 4px;
 min-width:110px;
 width: auto;
 height: 82px;
 border: 1px solid #ccc;
 display: inline-block; /*this to make the floaters go horizontal*/
} 
```

[演示](http://jsfiddle.net/afshinprofe/UBYKy/2/)

# xml - 用于提取 XML 标记数据的批处理脚本文件

> ID：12545488
> 
> 赞同：1
> 
> 时间：2012-09-22T16:15:03.550
> 
> 标签：xml, windows, variables, batch-file

需要帮助从 xml 中提取数据并将其传递给批处理文件变量...

我似乎无法获得所需的数据并能够将其传递给批处理变量。

我需要从 TAGID 中提取“AH0417”.... Catch 22-此文件更改 TAGID / PHASEID / BOXID

所以它们很少相同......如果我将 delims 更改为，我可以提取一个特定的文件

```
for /f "tokens=7,18-21* delims=^<![CDT[^>]] " %%a in ('find /I /N "<PHASEID>"^<Config.xml') do (
set a=%%a
)
echo %a% 
```

这就是我现在使用所有不同的 delims 和 or 标记方法的地方，如果我使用 skip=3 它会导致意外]

任何帮助都会非常出色，我整个星期都在工作并在网上发布寻求帮助，仍然没有回复...我不知道这是否会那么困难或不可能，但我知道这是可能的，我需要正确的眼睛看着这个哈哈。提前感谢您的帮助...

```
 <?xml version="1.0" encoding="UTF-16"?>
-<root>-<CONFIG>-<TAGID>
<![CDATA[AH0417]]>
</TAGID>-<DATETIMESTAMP>
<![CDATA[9/18/2012 4:59:08 PM]]>
</DATETIMESTAMP>-<SYSTYPE>
<![CDATA[PTWS]]>
</SYSTYPE>-<PHASEID>
<![CDATA[WJFKB02229001]]>
</PHASEID>-<BOXID>
<![CDATA[D]]>
</BOXID></CONFIG></root> 
```

我使用了许多不同的标记和分隔符组合，但我要么得到空白的 %PhaseID%，要么得到数字“2”而不是实际数据。这就是我想要做的......

```
REM ***************************************(PTLS)********************************************************

    :PTLSsetup
    sET sOURCE=%HOMEDRIVE%\ULLSA\PHASE\PTLS\DATA\XML
    rem Extract XML to Batch

    rem for /f "skip=3  tokens=* delims=[" %%G IN (C:\Ullsa\phase\ptls\data\xml\Config.xml) Do (
    rem Set Serial=%%G
    rem Set PhaseID=%%H
    rem Set BoxID=%%I
    rem )

    rem echo %serial%
    rem echo %PhaseID%
    rem echo %BoxID% 
```

这是完整的脚本......

```
mode con:cols=70 lines=25
rem Created by (ROBERT)
color 0c

for /f "tokens=2-4 delims=/ " %%a in ('date /t') do set year=%%c
for /f "tokens=2-4 delims=/ " %%a in ('date /t') do set month=%%a
for /f "tokens=2-4 delims=/ " %%a in ('date /t') do set day=%%b
set today=%day%-%month%-%year%
echo %today%

rem **************************(LOG CREATION)************************************************
md c:\zMigrate\Backup
set currentd=C:\zMigrate\Backup

ping -n 6 127.0.0.1 >nul
CLS
echo.

set D=%date% %time%
set T=%time%
echo ****************************************** >>%currentd%\%today%.TXT
echo %Date% ---------------------^> Log Created on %computername% >>%currentd%\%today%.TXT
echo ****************************************** >>%currentd%\%today%.TXT
echo LOG CREATED IN %currentd%\%today%.TXT
echo LOG CREATED FROM %currentd% >>%currentd%\%today%.TXT
echo ****************************************** >>%currentd%\%today%.TXT
cls

rem ******************************(MENU)****************************************************

:Menu
echo *******************
IF EXIST "C:\ULLSA\PHASE\PTLS" ECHO PTLS IS INSTALLED
IF ERRORLEVEL 1 ECHO PTLS NOT INSTALLED
IF EXIST "C:\ULLSA\PHASE\PTWS" ECHO PTWS IS INSTALLED
IF ERRORLEVEL 1 ECHO PTWS NOT INSTALLED
echo *******************
IF EXIST "C:\ULLSA\PHASE\PTLS" ECHO %T% PTLS IS INSTALLED >>%currentd%\%today%.TXT
IF ERRORLEVEL 1 ECHO %T% PTLS NOT INSTALLED >>%currentd%\%today%.TXT
IF EXIST "C:\ULLSA\PHASE\PTWS" ECHO %T% PTWS IS INSTALLED >>%currentd%\%today%.TXT
IF ERRORLEVEL 1 ECHO %T% PTWS NOT INSTALLED >>%currentd%\%today%.TXT
echo.
echo.
echo.
echo.
echo.
echo WHAT TYPE WORKSTATION IS THIS?
echo.
echo *NOTE* THIS UTILITY WILL PHASE MIGRATION FILES!!!
echo.
echo.
ECHO 1: PTLS (Phase Team Leader Station)
echo.
ECHO 2: PTWS (Phase Team Workers Station)
echo.
ECHO 0: Leave Program
ECHO.
SET /p choice=Enter a number [0,1,2]:
    if /i [%choice%]==[0] endlocal&goto end
    if [%choice%]==[] goto Menu
    if [%choice%]==[1] goto PTLS
    if [%choice%]==[2] goto PTWS
    ECHO Unrecognized entry. Please try again.
    goto Menu

REM ***************************************(TYPE CHECK)**************************************************

:PTLS
cls
ECHO *************************
echo ***Starting PTLS Check***
ECHO *************************

echo %T% ***Starting PTLS Check*** >>%currentd%\%today%.TXT

PING -n 3 127.0.0.1>nul
CLS
set PTLSDATA="C:\ULLSA\PHASE\PTLS\DATA\XML"
if exist %ptlsdata%\config.xml goto PTLSsetup
if errorlevel 1 goto PTLSFail

:PTLSFAIL
cls
echo ********************************************************
echo **PTLS XML DOES NOT EXIST, ENSURE PTLS IS INSTALLED...**
echo ********************************************************

echo %T% **PTLS XML DOES NOT EXIST, ENSURE PTLS IS INSTALLED...** >>%currentd%\%today%.TXT

ping -n 6 127.0.0.1>nul
goto Menu

:PTWS
cls
ECHO *************************
echo ***Starting PTWS Check***
ECHO *************************

echo %T% ***Starting PTWS Check*** >>%currentd%\%today%.TXT

PING -n 3 127.0.0.1>nul
CLS
set PTWSDATA="C:\ULLSA\PHASE\PTwS\DATA\XML"
if exist %ptwsdata%\config.xml goto PTWSsetup
if errorlevel 1 goto PTWSFail

:PTWSFAIL
cls
echo ********************************************************
echo **PTWS XML DOES NOT EXIST, ENSURE PTWS IS INSTALLED...**
echo ********************************************************

echo %T% PTWS XML DOES NOT EXIST, ENSURE PTWS IS INSTALLED. >>%currentd%\%today%.TXT

ping -n 6 127.0.0.1>nul
goto Menu

REM ***************************************(PTLS)********************************************************

:PTLSsetup
sET sOURCE=%HOMEDRIVE%\ULLSA\PHASE\PTLS\DATA\XML
rem Extract XML to Batch

rem for /f "skip=3  tokens=* delims=[" %%G IN (C:\Ullsa\phase\ptls\data\xml\Config.xml) Do (
rem Set Serial=%%G
rem Set PhaseID=%%H
rem Set BoxID=%%I
rem )

rem echo %serial%
rem echo %PhaseID%
rem echo %BoxID%

echo **********************************
echo ***Setting up PhaseID and BoxID***
echo **********************************

echo %T% ***Setting up PhaseID and BoxID*** >>%currentd%\%today%.TXT

ping -n 4 127.0.0.1>nul
CLS
rem extract xml data to phaseid and boxid
Set PhaseID=PhaseID
Set BoxID=BoxID
set Pbackup=%HOMEDRIVE%\Backup\%PhaseID%
set Bbackup=%HOMEDRIVE%\Backup\%PhaseID%\%BoxID%
Set Backup=%HOMEDRIVE%\Backup\%PhaseID%\%BoxID%
ping -n 4 127.0.0.1>nul
goto PTLSBackup

:PTLSBackup
if exist %backup% goto ptlsxfr
if errorlevel 1 goto ptlsmd

:ptlsmd
MD %backup% >>%currentd%\%today%.TXT
echo %T% Creating Phase Folder >>%currentd%\%today%.TXT
echo %T% Creating Box Folder >>%currentd%\%today%.TXT
echo Creating Destination
ping -n 6 127.0.0.1>nul
if exist %Bbackup% goto ptlsxfr
if errorlevel 1 echo %T% CAN^'T CREATE DESTINATION >>%currentd%\%today%.TXT
ping -n 3 127.0.0.1>nul
CLS
goto menu

:ptlsxfr
echo ****************************
echo ***Created Destination***
echo ****************************

echo %T% ***Created Destination*** >>%currentd%\%today%.TXT

PING -n 3 127.0.0.1>nul
CLS
echo ****************************
echo ***Starting PTLS Transfer***
echo ****************************

echo %T% ***Starting PTLS Transfer*** >>%currentd%\%today%.TXT

ping -n 3 127.0.0.1>nul
CLS
echo.
cacls "%sOURCE%" /T /E >>%currentd%\%today%.TXT
cacls "%backup%" /T /E >>%currentd%\%today%.TXT
CLS
echo Transfering Phase:  %phaseID% Box:  %BoxID%
echo %T% Transfering Phase:  %phaseID% Box:  %BoxID% >>%currentd%\%today%.TXT
xcopy "%sOURCE%\*" "%backup%\" /Y /E /H /V /G >>%currentd%\%today%.TXT
CLS
ECHO Transfer Complete
ECHO %T% Transfer Complete >>%currentd%\%today%.TXT
ping -n 3 127.0.0.1>nul
EXIT

REM ***************************************(PTWS)********************************************************

:PTWSsetup
rem Extract XML to Batch
rem place code or cmd to call to vbs

echo **********************************
echo ***Setting up PhaseID and BoxID***
echo **********************************

echo %T% ***Setting up PhaseID and BoxID*** >>%currentd%\%today%.TXT

ping -n 4 127.0.0.1>nul
CLS
rem extract xml data to phaseid and boxid
Set PhaseID=PhaseID
Set BoxID=BoxID
set Pbackup=%HOMEDRIVE%\Backup\%PhaseID%
set Bbackup=%HOMEDRIVE%\Backup\%PhaseID%\%BoxID%
Set Backup=%HOMEDRIVE%\Backup\%PhaseID%\%BoxID%
sET sOURCE=%HOMEDRIVE%\ULLSA\PHASE\PTWS\DATA\XML
goto PTWSBackup

:PTWSBackup
if exist %backup% goto ptWsxfr >>%currentd%\%today%.TXT
if errorlevel 1 goto ptWsmd >>%currentd%\%today%.TXT

:ptWsmd
MD %backup% >>%currentd%\%today%.TXT
echo %T% Creating Phase Folder >>%currentd%\%today%.TXT
echo %T% Creating Box Folder >>%currentd%\%today%.TXT
echo Creating Destination
ping -n 6 127.0.0.1>nul
if exist %Bbackup% goto ptWsxfr
if errorlevel 1 echo %T% CAN^'T CREATE DESTINATION >>%currentd%\%today%.TXT
ping -n 3 127.0.0.1>nul
goto menu

:ptWsxfr
echo ****************************
echo ***Created Destination***
echo ****************************

echo %T% ***Created Destination*** >>%currentd%\%today%.TXT

PING -n 2 127.0.0.1>nul
cls
echo ****************************
echo ***Starting PTWS Transfer***
echo ****************************

echo %T% ***Starting PTWS Transfer*** >>%currentd%\%today%.TXT

ping -n 3 127.0.0.1>nul
CLS
echo.
cacls "%sOURCE%" /T /E >>%currentd%\%today%.TXT
cacls "%backup%" /T /E >>%currentd%\%today%.TXT
CLS
echo Transfering Phase:  %phaseID% Box:  %BoxID%
echo %T% Transfering Phase:  %phaseID% Box:  %BoxID% >>%currentd%\%today%.TXT
xcopy "%sOURCE%\*" "%backup%\" /Y /E /H /V /G >>%currentd%\%today%.TXT
ECHO Transfer Complete
ECHO %T% Transfer Complete >>%currentd%\%today%.TXT
ping -n 3 127.0.0.1>nul
EXIT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:56:02.493

完成！！！！！使用 POWERSHELL 太简单了！！！！将 Powershell 的输出返回到批处理文件变量时出现问题....

在将 Powershell 输出提取到批处理文件变量中时弄清楚了......

我写了 3 个单独的 PS 脚本，所以我以后可以在其他脚本中单独使用它们....

PowerShell 脚本 TAG.PS1

[代码]

```
[xml]$config1=get-content .\config.xml

foreach($tagid in $config1.root.config.tagid)

    {

    write-output $tagid.innertext

    } 
```

[/代码]

PowerShell 脚本 PHASE.PS1

[代码]

```
[xml]$config1=get-content .\config.xml

foreach($phaseid in $config1.root.config.phaseid)

    {

    write-output $phaseid.innertext

    } 
```

[/代码]

PowerShell 脚本 BOX.PS1

[代码]

```
[xml]$config1=get-content .\config.xml

foreach($Boxid in $config1.root.config.Boxid)

    {

    write-output $Boxid.innertext

    } 
```

[/代码]

Windows 批处理文件 *.bat

[代码]

```
for /f "tokens=1" %%a in ('powershell.exe .\TAG.ps1') do set tagid=%%a

for /f "tokens=1" %%a in ('powershell.exe .\PHASE.ps1') do set phaseid=%%a

for /f "tokens=1" %%a in ('powershell.exe .\BOX.ps1') do set boxid=%%a

echo %tagid%

echo %phaseid%

echo %boxid%

timeout /t 3 /nobreak

Set Backup=%HOMEDRIVE%\Backup\%tagid%\%PhaseID%\%BoxID% 
```

ETC..........

[/代码]

输出如下：

```
C:\Users\Administrator>for /F "tokens=1" %a in ('powershell.exe .\TAG.ps1') do set tag=%a

C:\Users\Administrator>set tag=AH0417

C:\Users\Administrator>for /F "tokens=1" %a in ('powershell.exe .\PHASE.ps1') do set phase=%a

C:\Users\Administrator>set phase=WJFKB02229001

C:\Users\Administrator>for /F "tokens=1" %a in ('powershell.exe .\BOX.ps1') do set box=%a

C:\Users\Administrator>set box=A

C:\Users\Administrator>echo AH0417
AH0417

C:\Users\Administrator>echo WJFKB02229001
WJFKB02229001

C:\Users\Administrator>echo A
A

C:\Users\Administrator>pause 
```

# c# - 将多个 html 复选框发布到 asp.net 页面

> ID：12545491
> 
> 赞同：0
> 
> 时间：2012-09-22T16:15:18.813
> 
> 标签：c#, asp.net, html, forms, http-post

我想向asp.net提交多个html复选框控件我已经在php中完成了它很简单但是在asp.net中不起作用我的asp.net代码就是这样

```
 <form id="form1" runat="server">
    <div>
        <input type="checkbox" name="checkbox[]" value="1" />
        <input type="checkbox" name="checkbox[]" value="2" />
        <input type="checkbox" name="checkbox[]" value="3" />
        <input type="checkbox" name="checkbox[]" value="4" />
        <input type="checkbox" name="checkbox[]" value="5" />
        <input type="checkbox" name="checkbox[]" value="6" />
        <input type="text" name="text" />
        <input type="submit" name="btn" value="Click" />
    </div>
    </form>
    <%
        if (Request.Form["btn"] != null)
        {
            Response.Write(Request.Form["text"]);
            Response.Write(Request.Form["checkbox"]);
        }
         %> 
```

我使用渲染复选框，`Response.Write`所以我不能在这里使用服务器控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:25:44.013

尝试使用 Request.Form["checkbox[]"] 而不是 Request.Form["checkbox"]。

# hibernate - 子类化抽象超类/实体的实体的 JPA/hibernate 继承和运行时类型

> ID：12545494
> 
> 赞同：1
> 
> 时间：2012-09-22T16:15:25.367
> 
> 标签：hibernate, inheritance, jpa, entity, runtime-type

我需要一些关于 JPA/Hibernate 继承的说明。

假设我有一个抽象`Fruit`实体，它由两个`Apple`和`Orange`实体子类化。此外，我有一个`Orange`in 数据库实例。

**我可以从数据库中检索此实例作为纯文本`Fruit`并将其转换为`Orange`吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:47:14.790

那么你可以这样做：

```
Fruit fruit = dao.get(id, Fruit.class)
if(fruit instanceof Orange)
{
   (Orange) fruit
} 
```

并且在运行时将是适当的类型。但是如果你写一个`HQL`你可以检查它的运行时类型。如果您很好地完成了继承和映射，这通常是不需要的。

```
select f from Fruit f where f.class = 'a.b.c.Fruit' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T14:42:29.967

select f from Fruit f where Treat(f as Orange).somePropetyInOrange=:value

# c++ - 静态变量和 new() 之间的单例

> ID：12545495
> 
> 赞同：1
> 
> 时间：2012-09-22T16:15:41.127
> 
> 标签：c++, singleton

我知道两种制作单例模式的方法：

```
class sgt_static
{
    sgt_static() { }
    public:
        static sgt_static* get_instance()
        {
            static sgt_static instance;
            return &instance;
        }
} 
```

还有这个：

```
class sgt_new
{
    sgt_new() { }
    public:
         static sgt_new* get_instance()
         {
             static sgt_new* instance = NULL;
             if ( instance == NULL ) instance = new sgt_new();
             return instance;
         }
} 
```

我知道它们之间的一些区别：

1.  的实例`sgt_new`应该由我自己删除。
2.  如果程序退出（通常），实例`sgt_static`将被程序本身（或操作系统？）删除。

但是我在中设置断点`~sgt_new()`，当我的程序退出时，调试器根本没有任何中断动作。有人说操作系统会回收这些资源。真的吗 ？那么，实例`sgt_new`不会导致任何内存泄漏吗？

除了我的清单上面的几点。2个单例实现之间还有其他区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:33:51.467

C++ 系统不会删除堆上的对象，除非调用`delete`. 也就是说，您的第二个版本中的对象不会被破坏。根据对象的使用方式，这可能是非常有意的：虽然用函数包装对象可以保证对象在构造之前不会被访问，但可以在对象被销毁后访问它。毕竟，无法控制指针传递的位置。

当程序终止时，无论读取什么，资源都会从程序外部回收。何时以及如何完成这取决于操作系统，并且不同的资源可能会在不同的时间被回收。请注意，此资源清理**不会**调用析构函数，而只会使文件描述符（或等效项）、内存、锁等资源可用。也就是说，如果你的单例析构函数有任何重要的对象，你可能想要使用第一种方法。

That said, singletons are massively over-used as some sort of suspected to be glorified global memory! The are a few legitimate uses of singletons but probability indicates your case is not one of them: less than 1% of singleton uses are legitemate based on my running count. The way to determine if a singleton is to determine if it could be conceivable if two (or more) versions of the program running in the same executable still can use the same singleton. If not, it is not a legitemate use of a singleton.

# python - 从python中的docx获取文本

> ID：12545498
> 
> 赞同：0
> 
> 时间：2012-09-22T16:15:53.770
> 
> 标签：python, input, ms-word, python-docx

如何从 python 中的 docx 文件中获取文本？最好，这会将其导入一个简单的字符串。显然可以忽略原始文件中的格式。

我了解 docx 文件（文本保存为的文件夹`document.xml`）的结构，但我想要一种提取文本的简单方法，而无需手动打开该文件夹、提取文件和提取段落标签。

我已经尝试过[Python Docx](https://github.com/mikemaccana/python-docx)（根据[这个旧的 stackoverflow 问题](https://stackoverflow.com/questions/116139/how-can-i-read-a-word-2007-docx-file)），但每次都会出错：

```
import docx as dx
document = dx.opendocx('files/file.docx')

Traceback (most recent call last):
  File "concord.py", line 2, in <module>
    document = dx.opendocx('files/#n01 ch B3A126.docx')
AttributeError: 'module' object has no attribute 'opendocx' 
```

# ios - 向我的单例添加初始化和重置方法

> ID：12545499
> 
> 赞同：-1
> 
> 时间：2012-09-22T16:15:56.500
> 
> 标签：ios, singleton

我的单身人士看起来如下：

标题

```
#import <Foundation/Foundation.h>

@interface MyManager : NSObject
{

    MyManager *_sharedObject;

}

@property(nonatomic,copy) NSString * nameTitle;
@property(nonatomic,copy) NSString * nameDescription;

//assets
@property (nonatomic, strong) NSMutableArray * assets;

+ (id)sharedInstance;

@end 
```

执行

```
#import "MyManager.h"

@implementation MyManager

@synthesize listingTitle;
@synthesize listingDescription;

//Assets
@synthesize assets;

+ (id)sharedInstance
{
    static dispatch_once_t pred = 0;
    __strong static id _sharedObject = nil;
    dispatch_once(&pred, ^{
        _sharedObject = [[self alloc] init]; // or some other init method
    });
    return _sharedObject;
}
@end 
```

我想知道再添加 2 种方法，让我可以随时初始化和重置属性。我正在考虑使用 init 方法进行初始化，并添加另一种方法来重置。这会是正确的方法吗？

像这样的东西：

```
-(id)init {
    self = [super init];
    if (self != nil) {

         [self reset];

    }

    return self;
}

-(void)reset {

self.listingTitle=@"";
self.listingDescription=@"";

} 
```

这是正确的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:14:38.970

好吧，正如您在这里必须看到的那样，没有绝对正确的方法可以做任何事情。但我已经在其他应用程序中做到了这一点，我相信它对你很有效。事实上，当您创建可以在 nib（使用 initWithCoder:) 和正常方式（initWithFrame:) 中实例化的子类时，这种技术也很有效。这个想法是不要重复代码，而是将它放在一个地方并从多个地方调用它。

如果您要实例化可变对象，您希望这是两个阶段 - 在“commonInit”中添加可变对象，然后调用“重置”以确保一切都与您想要的原始对象一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:54:28.827

命名一个`init`不打算在新分配的实例上运行的方法让我觉得是错误的。但是`reset`将对象的属性恢复为合理的默认值的方法对我来说似乎很好。

# windows - 在 Qt 中制作 Oci 驱动程序时找不到头文件

> ID：12545501
> 
> 赞同：1
> 
> 时间：2012-09-22T16:16:01.413
> 
> 标签：windows, qt, makefile, oracle-call-interface, mingw32

我按照[http://doc.qt.digia.com/4.7-snapshot/sql-driver.html#general-information-about-the-oci-plugin中给出的 Windows 说明编译了 Oracle Oci 驱动程序](http://doc.qt.digia.com/4.7-snapshot/sql-driver.html#general-information-about-the-oci-plugin)

直到最后一步我用mingw32-make替换nmake。我明白了。

```
mingw32-make -f Makefile.Debug
mingw32-make[1]: Entering directory `C:/QtSDK/QtSources/4.7.4/src/sql/drivers/oci'
g++ -c -g -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -
DQT_DLL -DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -
DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I"c:\QtSDK\
Desktop\Qt\4.7.4\mingw\include\QtCore" -I"c:\QtSDK\Desktop\Qt\4.7.4\mingw\includ
e\QtGui" -I"c:\QtSDK\Desktop\Qt\4.7.4\mingw\include" -I"c:\QtSDK\Desktop\Qt\4.7.
4\mingw\include\ActiveQt" -I"debug" -I"c:\QtSDK\Desktop\Qt\4.7.4\mingw\mkspecs\d
efault" -o debug\qsql_oci.o qsql_oci.cpp
In file included from qsql_oci.cpp:42:
qsql_oci.h:47:46: error: QtSql/private/qsqlcachedresult_p.h: No such file or dir
ectory
qsql_oci.cpp:50:23: error: qsqlerror.h: No such file or directory
qsql_oci.cpp:51:23: error: qsqlfield.h: No such file or directory
qsql_oci.cpp:52:23: error: qsqlindex.h: No such file or directory
qsql_oci.cpp:53:23: error: qsqlquery.h: No such file or directory
qsql_oci.cpp:65:17: error: oci.h: No such file or directory 
```

其次是很多错误，但我想所有这些都与无法找到头文件有关。谁能告诉我为什么会这样？我确实包含了前两个步骤中给出的所有 INCLUDE 和 LIB 的正确路径

**更新**：
我修改了 qmake -project 创建的 .pro 文件并添加了`QT+= sql`所有与 sql 相关的标头错误都消失了，但第一个`qsqlcachedresult_p.h`和最后一个`oci.h`仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:02:00.170

尝试也添加`include\QtSql`到`-I`选项。我不确切知道如何在这种环境中做到这一点，但也许正在运行

```
set CPP_FLAGS="-Ic:\QtSDK\Desktop\Qt\4.7.4\mingw\include\QtSql" 
```

在`make`命令执行之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:04:11.287

为了解决剩下的两个标题问题，这就是我所做的 -

1.  对于 oci.h 文件，手动编辑 makefile.release 和 makefile.debug 以在 INCPATH 变量中包含头文件的路径。（类似 -I"C:\XEClient\oci\include"）。

2.  qsqlcachedresult_p.h 位于 QT/src/sql/kernel 目录中。所以我将头文件复制到了C:\QtSDK\Desktop\Qt\4.7.4\mingw\include\QtSql\private 的新目录中。

之后编译没有错误。

这篇文章很有帮助 - [http://www.qtcentre.org/threads/41904-Oracle-Call-Interface-(OCI)-driver-problems](http://www.qtcentre.org/threads/41904-Oracle-Call-Interface-(OCI)-driver-problems)。

# jquery - 为什么选择的选项卡的值不一致？

> ID：12545502
> 
> 赞同：0
> 
> 时间：2012-09-22T16:16:01.263
> 
> 标签：jquery, html, jquery-ui, jquery-selectors, jquery-ui-tabs

我注意到，当我单击每个选项卡时，它的值并不一致 -**为什么**？

我想获取“退出”选项卡的索引。我应该怎么做才能使其保持一致？

这是我的 jQuery 代码：

```
$(function() {
    $('#tabs').tabs();
    $( "#tabs" ).bind( "tabsselect", function(event, ui) {
        var selected = $("#tabs").tabs('option', 'selected');
        alert(selected);
    });
}); 
```

这是我的 HTML 代码：

```
<div id="tabs" class="login-tabs">
    <ul>
        <li><a href="#Home">Home</a></li>
        <li><a href="#Profile">Profile</a></li>
        <li><a href="#Messages">Messages</a></li>
        <li><a href="#Notifications">Notifications</a></li>
        <li><a href="#Find">Find Friends</a></li>
        <li><a href="#Signout">Sign out</a></li>
    </ul>
    <div id="Home">

    </div>
    <div id="Profile">

    </div>
    <div id="Messages">

    </div>
    <div id="Notifications">

    </div>
    <div id="Find">

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:35:06.703

```
var index = $('#tabs ul').index($('#tabs a[href="#Signout"]'));

if($('#tabs a[href="#Signout"]').parent('li').hasClass('ui-tabs-selected'))
    //signout tab selected 
```

# xaml - Metro 图 像字节数组

> ID：12545503
> 
> 赞同：0
> 
> 时间：2012-09-22T16:16:08.343
> 
> 标签：xaml, microsoft-metro

我正在尝试将字节数组转换为 XAML 中的图像。我知道我的服务返回了一个字节数组。我不确定为什么我的代码失败：

```
 public async void GetImage()
    {
        var serviceClient = new MyServiceClient();
        var prod = await serviceClient.GetProductImageAsync(pr.ProductID);
        if (prod != null)
        {
            var ras = new InMemoryRandomAccessStream();
            BitmapImage bi = new BitmapImage();

            using (MemoryStream ms = new MemoryStream(prod.LargeImage, 0,
              prod.LargeImage.Length))
            {
                BitmapImage im = new BitmapImage();
                await ms.CopyToAsync(ras.AsStreamForWrite());
                im.SetSource(ras);
                this.image1.Source = im;
            }
        }
        else
        {
            MessageDialog messageDialog = new MessageDialog("There is no picture available for " + pr.Name, "No Image");
            messageDialog.ShowAsync();
        }
        myBar.Visibility = Windows.UI.Xaml.Visibility.Collapsed;            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:28:19.287

在不知道它为什么失败的情况下，是否有任何理由不将源设置为`byte[]`？

```
im.SetSource(new MemoryStream(prod.GetBytes())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:11:47.363

这是我使用的最终代码：

```
namespace MenuFinderWin8.Pages
{
/// <summary>
/// A basic page that provides characteristics common to most applications.
/// </summary>
public sealed partial class ImagePage : MenuFinderWin8.Common.LayoutAwarePage
{
    Product pr;

    public ImagePage()
    {
        this.InitializeComponent();
        pr = App.CurrentProduct;
        GetImage();
    }

    public async void GetImage()
    {
        MenuFinderAppServiceClient serviceClient = new MenuFinderAppServiceClient();
        var prod = await serviceClient.GetProductImageAsync(pr.ProductID);
        if (prod != null)
        {
            var randomAccessStream = new MemoryRandomAccessStream(prod.LargeImage);
            BitmapImage bi = new BitmapImage();
            await bi.SetSourceAsync(randomAccessStream);
            image1.Source = bi;
        }
        else
        {
            MessageDialog messageDialog = new MessageDialog("There is no picture available for " + pr.Name, "No Image");
            messageDialog.ShowAsync();
        }
        myBar.Visibility = Windows.UI.Xaml.Visibility.Collapsed;            
    }

    /// <summary>
    /// Populates the page with content passed during navigation.  Any saved state is also
    /// provided when recreating a page from a prior session.
    /// </summary>
    /// <param name="navigationParameter">The parameter value passed to
    /// <see cref="Frame.Navigate(Type, Object)"/> when this page was initially requested.
    /// </param>
    /// <param name="pageState">A dictionary of state preserved by this page during an earlier
    /// session.  This will be null the first time a page is visited.</param>
    protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
    }

    /// <summary>
    /// Preserves state associated with this page in case the application is suspended or the
    /// page is discarded from the navigation cache.  Values must conform to the serialization
    /// requirements of <see cref="SuspensionManager.SessionState"/>.
    /// </summary>
    /// <param name="pageState">An empty dictionary to be populated with serializable state.</param>
    protected override void SaveState(Dictionary<String, Object> pageState)
    {
    }
}

class MemoryRandomAccessStream : IRandomAccessStream
{
    private Stream m_InternalStream;

    public MemoryRandomAccessStream(Stream stream)
    {
        this.m_InternalStream = stream;
    }

    public MemoryRandomAccessStream(byte[] bytes)
    {
        this.m_InternalStream = new MemoryStream(bytes);
    }

    public IInputStream GetInputStreamAt(ulong position)
    {
        this.m_InternalStream.Seek((long)position, SeekOrigin.Begin);

        return this.m_InternalStream.AsInputStream();
    }

    public IOutputStream GetOutputStreamAt(ulong position)
    {
        this.m_InternalStream.Seek((long)position, SeekOrigin.Begin);

        return this.m_InternalStream.AsOutputStream();
    }

    public ulong Size
    {
        get { return (ulong)this.m_InternalStream.Length; }
        set { this.m_InternalStream.SetLength((long)value); }
    }

    public bool CanRead
    {
        get { return true; }
    }

    public bool CanWrite
    {
        get { return true; }
    }

    public IRandomAccessStream CloneStream()
    {
        throw new NotSupportedException();
    }

    public ulong Position
    {
        get { return (ulong)this.m_InternalStream.Position; }
    }

    public void Seek(ulong position)
    {
        this.m_InternalStream.Seek((long)position, 0);
    }

    public void Dispose()
    {
        this.m_InternalStream.Dispose();
    }

    public Windows.Foundation.IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
    {
        var inputStream = this.GetInputStreamAt(0);
        return inputStream.ReadAsync(buffer, count, options);
    }

    public Windows.Foundation.IAsyncOperation<bool>

FlushAsync()
    {
        var outputStream = this.GetOutputStreamAt(0);
        return outputStream.FlushAsync();
    }

    public Windows.Foundation.IAsyncOperationWithProgress<uint, uint>

 WriteAsync(IBuffer buffer)
    {
        var outputStream = this.GetOutputStreamAt(0);
        return outputStream.WriteAsync(buffer);
    }
} 
```

}

# cordova - PhoneGap 适合开发购物网站吗？

> ID：12545507
> 
> 赞同：1
> 
> 时间：2012-09-22T16:16:42.497
> 
> 标签：cordova

我正在开发一个购物网站的手机客户端。它的主要功能是在地图上标记商家，并提供商品列表显示（包括商品图片）提供在线订购功能。我选择了PhoneGap，不知道这个决定是否明智？谁能告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:29:34.367

好吧，*可以*通过电话差距创建您正在谈论的应用程序类型，但是您必须查看一些基本的利弊，并了解它们如何影响您，以便做出明智的选择。这里有几个：

**优点：**

*   您几乎可以在大多数主要应用商店（iOS 应用商店、Google Play 等）上发布您的应用。因此，您不必为每个操作系统重写您的应用程序。
*   Phone gap 开发比 Native 开发容易得多，并且不需要一半的时间/资源/知识。
*   更多的 HTML / JS / CSS 开发人员在电话间隙。原生开发者更稀有且价格更高。

**缺点：**

*   phonegap 实现的用户体验永远不会像原生应用程序那样多。特别是在像您这样需要大量图形（用于地图）的应用程序中。虽然 UX（用户体验）和响应可能看起来不那么重要，但它实际上是制作优秀应用程序的最重要因素之一。
*   使用 Phonegap，您只能有限地访问设备功能，因此您可能无法访问手机的高级功能。这也可能会限制应用程序未来的开发和添加功能。

总而言之，可以弥补电话差距，但我真的建议投入额外的时间和金钱来开发原生应用程序，这样你就会得到一个**完美**的、响应式的应用程序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T23:16:00.197

因为您正在考虑 PhoneGap，所以我假设您针对多个平台。

就 byteSlayer 而言（我同意他的评论），我认为您不会非常需要设备功能。因此，我更愿意使用PhoneGap，而不是在每个平台都投入资金（或时间）进行原生平台的开发。

我也不认为 Phonegap 存在安全问题。Javascript 代码是明文，但 XCode 也很容易重新设计。[顺便说一句，通过默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)永远不会奏效。另一方面，您已经有一个网站，您可以在其中以明文（html、js 等）向用户提供内容。我假设您的应用程序结构将基于客户端-服务器架构，这与用户没有什么不同从您的服务器请求网页。

# wpf - 样式化 wpf 数据网格

> ID：12545512
> 
> 赞同：6
> 
> 时间：2012-09-22T16:17:33.353
> 
> 标签：wpf, templates, datagrid, styles

我找到了 wpf 的示例样式，如下所示，它所做的主要工作是更改 DataGridColumnHeader 的背景颜色并仍然保留排序箭头。可以看出，排序箭头在样式中明确指定为 UpArrow 和 DownArrow。

```
<Style x:Key="SuojiHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="Background" Value="{StaticResource HeaderBrush}" />
    <Setter Property="Padding" Value="5" />
     <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                <Grid>
                    <dg:DataGridHeaderBorder SortDirection="{TemplateBinding SortDirection}"
                                 IsHovered="{TemplateBinding IsMouseOver}"
                                 IsPressed="{TemplateBinding IsPressed}"
                                 IsClickable="{TemplateBinding CanUserSort}"
                                 Background="{TemplateBinding Background}"
                                 BorderBrush="{TemplateBinding BorderBrush}"
                                 BorderThickness="{TemplateBinding BorderThickness}"
                                 Padding ="{TemplateBinding Padding}"
                                 SeparatorVisibility="{TemplateBinding SeparatorVisibility}"
                                 SeparatorBrush="{TemplateBinding SeparatorBrush}">
                        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" />
                    </dg:DataGridHeaderBorder>

                    <Thumb x:Name="PART_LeftHeaderGripper"
                               HorizontalAlignment="Left"
                               Style="{StaticResource ColumnHeaderGripperStyle}"/>
                    <Thumb x:Name="PART_RightHeaderGripper"
                               HorizontalAlignment="Right"
                               Style="{StaticResource ColumnHeaderLeftGripperStyle}"/>

                    <Path Name="UpArrow" Fill="Black" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="7,0,7,0" Visibility="Hidden">
                        <Path.Data>
                            <PathGeometry>
                                <PathFigure StartPoint="0,0">
                                    <LineSegment Point="6,0"/>
                                    <LineSegment Point="3,5"/>
                                    <LineSegment Point="0,0"/>
                                </PathFigure>
                            </PathGeometry>
                        </Path.Data>
                    </Path>
                    <Path Name="DownArrow" Fill="Black" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="7,0,7,0" Visibility="Hidden">
                        <Path.Data>
                            <PathGeometry>
                                <PathFigure StartPoint="0,5">
                                    <LineSegment Point="6,5"/>
                                    <LineSegment Point="3,0"/>
                                    <LineSegment Point="0,5"/>
                                </PathFigure>
                            </PathGeometry>
                        </Path.Data>
                    </Path>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="SortDirection" Value="Descending">
                        <Setter TargetName="UpArrow" Property="Visibility" Value="Hidden"/>
                        <Setter TargetName="DownArrow" Property="Visibility" Value="Visible"/>
                    </Trigger>
                    <Trigger Property="SortDirection" Value="Ascending">
                        <Setter TargetName="DownArrow" Property="Visibility" Value="Hidden"/>
                        <Setter TargetName="UpArrow" Property="Visibility" Value="Visible"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

当我将此样式应用于我的 DataGrid

```
 <DataGrid ItemsSource="{Binding Source={StaticResource cvs}}" x:Name="MasterAllGrid" AutoGenerateColumns="False" 
            HeadersVisibility="All"  CanUserAddRows="False" HorizontalGridLinesBrush="#f0f0f0" VerticalGridLinesBrush="#f0f0f0" ColumnHeaderStyle ="{StaticResource SuojiHeaderStyle}"
                VerticalAlignment="Stretch" SelectionChanged="MasterAllGrid_SelectionChanged" VerticalScrollBarVisibility="Auto" Background="{x:Null}">

            <DataGrid.Columns>
                <DataGridTextColumn Header="ticker" Binding="{Binding Path=Ticker}"/> 
```

样式中的箭头与列标题文本重叠（抱歉，由于我是新来的，所以不允许 StackOverflow 摆出照片）。如何让它不重叠？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-22T17:46:41.590

**对于样式 wpf datatgrid，您可以使用此资源字典**

```
<ResourceDictionary 
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:dg="http://schemas.microsoft.com/wpf/2008/toolkit"

>

<LinearGradientBrush x:Key="Brush_DataGridHeaderBackground" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#FF1C7CB1" Offset="0" />
    <GradientStop Color="#FF004A83" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_DataGridHeaderMouseOverBackground" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#FF1C7CAF" Offset="0" />
    <GradientStop Color="#FF042A68" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_DataGridHeaderBorder" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#FF1B577E" Offset="0" />
    <GradientStop Color="#FF083258" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_DataGridHeaderSortedBorder" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#B58801" Offset="0" />
    <GradientStop Color="#681900" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_DataGridHeaderSortedBackground" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#C46007" Offset="0" />
    <GradientStop Color="#AF2600" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_DataGridSelected" EndPoint="0.5,1" StartPoint="0.5,0">
    <GradientStop Color="#FF3E4854" Offset="1"/>
    <GradientStop Color="#FF5D6670"/>
</LinearGradientBrush>

<SolidColorBrush x:Key="Brush_DataGridSelectedForeground" Color="#FFFFFF" />

<LinearGradientBrush x:Key="Brush_DataGridAltRowBackground" EndPoint="0.5,1" StartPoint="0.5,0">
    <GradientStop Color="#FFE1FFEE" Offset="0"/>
    <GradientStop Color="#FFC3F9DA" Offset="0.992"/>
</LinearGradientBrush>

<Style x:Key="Style_HeaderGripper" TargetType="{x:Type Thumb}">
    <Setter Property="Width" Value="8"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="Cursor" Value="SizeWE"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Thumb}">
                <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="MinHeight" Value="28" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Border x:Name="BackgroundBorder" BorderThickness="0,1,0,1" Background="{StaticResource Brush_DataGridHeaderSortedBackground}" BorderBrush="{StaticResource Brush_DataGridHeaderSortedBorder}" Grid.ColumnSpan="2" />
                    <ContentPresenter Margin="6,3,6,3" VerticalAlignment="Center" />
                    <Path x:Name="SortArrow" Visibility="Collapsed" Data="M0,0 L1,0 0.5,1 z" Stretch="Fill" Grid.Column="1" Width="8" Height="6" Fill="White" Margin="0,0,8,0" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.4" />
                    <Rectangle Width="1" Fill="#AAC377" HorizontalAlignment="Right" Grid.ColumnSpan="2" />
                    <Rectangle Width="1" Margin="0,0,1,0" Fill="#425B10" HorizontalAlignment="Right" Grid.ColumnSpan="2" />
                    <Thumb x:Name="PART_LeftHeaderGripper" HorizontalAlignment="Left" Style="{StaticResource Style_HeaderGripper}"/>
                    <Thumb x:Name="PART_RightHeaderGripper" HorizontalAlignment="Right" Style="{StaticResource Style_HeaderGripper}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="SortDirection" Value="{x:Null}">
                        <Setter TargetName="BackgroundBorder" Property="Background" Value="Transparent" />
                        <Setter TargetName="BackgroundBorder" Property="BorderBrush"  Value="Transparent" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="BackgroundBorder" Property="Background" Value="{StaticResource Brush_DataGridHeaderMouseOverBackground}" />
                        <Setter TargetName="BackgroundBorder" Property="BorderBrush" Value="{StaticResource Brush_DataGridHeaderBorder}" />
                    </Trigger>
                    <Trigger Property="SortDirection" Value="Ascending">
                        <Setter TargetName="SortArrow" Property="Visibility" Value="Visible" />
                        <Setter TargetName="SortArrow" Property="RenderTransform">
                            <Setter.Value>
                                <RotateTransform Angle="180" />
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="SortDirection" Value="Descending">
                        <Setter TargetName="SortArrow" Property="Visibility" Value="Visible" />
                    </Trigger>
                    <Trigger Property="DisplayIndex" Value="0">
                        <Setter Property="Visibility" Value="Collapsed" TargetName="PART_LeftHeaderGripper"></Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type DataGridCell}">
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridCell}">
                <Border x:Name="BackgroundBorder" Background="Transparent">
                    <ContentPresenter VerticalAlignment="Center" Margin="4,0,6,0" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="BorderBrush" Value="{x:Null}"/>
</Style>

<!-- DataGridRow -->

<Style x:Key="{x:Type DataGridRow}" TargetType="{x:Type DataGridRow}">
    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridRow}">
                <Border 
          x:Name="DGR_Border"
          Background="{TemplateBinding Background}"
          BorderBrush="{TemplateBinding BorderBrush}"
          BorderThickness="{TemplateBinding BorderThickness}"
          SnapsToDevicePixels="True">
                    <SelectiveScrollingGrid x:Name="selectiveScrollingGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <DataGridCellsPresenter x:Name="dataGridCellsPresenter" 
              Grid.Column="1"
               ItemsPanel="{TemplateBinding ItemsPanel}"
               SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        <DataGridRowHeader x:Name="dataGridRowHeader" 
              SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical"  
              Grid.RowSpan="2"
              Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=HeadersVisibility, Converter={x:Static DataGrid.HeadersVisibilityConverter}, ConverterParameter={x:Static DataGridHeadersVisibility.Row}}"/>
                        <Grid Grid.Column="1" Grid.Row="1" Name="Details" Visibility="Collapsed" Background="Gray">
                        <DataGridDetailsPresenter x:Name="dataGridDetailsPresenter" />
                        </Grid>
                    </SelectiveScrollingGrid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" TargetName="DGR_Border" Value="{DynamicResource BlueWindow}"/>
                        <Setter Property="Foreground" TargetName="dataGridCellsPresenter" Value="White"/>
                        <Setter Property="Foreground" TargetName="dataGridRowHeader" Value="White"/>
                        <Setter Property="FontSize" TargetName="dataGridRowHeader" Value="13.333"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter TargetName="DGR_Border" Property="TextElement.Foreground" Value="{StaticResource Brush_DataGridSelectedForeground}" />
                        <Setter Property="Visibility" TargetName="dataGridDetailsPresenter" Value="Hidden"/>
                        <Setter Property="FontSize" TargetName="dataGridCellsPresenter" Value="14.667"/>
                        <Setter Property="Background" TargetName="DGR_Border" Value="{DynamicResource Brush_DataGridSelected}"/>

                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<!-- DataGrid -->

<Style x:Key="{x:Type DataGrid}" TargetType="{x:Type DataGrid}">
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="AlternatingRowBackground" Value="{StaticResource Brush_DataGridAltRowBackground}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGrid}">
                <Border Background="{TemplateBinding Background}">
                    <ScrollViewer Focusable="false" Name="DG_ScrollViewer">
                        <ScrollViewer.Template>
                            <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Border Grid.ColumnSpan="3" Background="{StaticResource Brush_DataGridHeaderBackground}" BorderBrush="{StaticResource Brush_DataGridHeaderBorder}" BorderThickness="0,1" />
                                    <Button 
                    Command="{x:Static DataGrid.SelectAllCommand}" 
                    Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=RowHeaderActualWidth}"
                    Focusable="false"
                    OverridesDefaultStyle="True"
                   >
                                        <Button.Template>
                                            <ControlTemplate TargetType="{x:Type Button}">
                                                <Grid>
                                                    <Border Background="{StaticResource Brush_DataGridHeaderBackground}" BorderBrush="{StaticResource Brush_DataGridHeaderBorder}" BorderThickness="0,1">
                                                        <Path x:Name="Arrow" VerticalAlignment="Bottom" Margin="4" Fill="#3000" Width="11" Height="11" Stretch="Fill" Data="M1,0 L1,1 0,1 z"/>
                                                    </Border>
                                                    <Rectangle Width="1" Fill="#AAC377" HorizontalAlignment="Right" />
                                                    <Rectangle Width="1" Margin="0,0,1,0" Fill="#425B10" HorizontalAlignment="Right" />
                                                </Grid>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <DataGridColumnHeadersPresenter 
                    Grid.Column="1"                         
                    Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=HeadersVisibility, Converter={x:Static DataGrid.HeadersVisibilityConverter}, ConverterParameter={x:Static DataGridHeadersVisibility.Column}}"/>
                    <!-- JAIMER removed from above
                    SourceScrollViewerName="DG_ScrollViewer" -->
                                    <ScrollContentPresenter Grid.Row="1" Grid.ColumnSpan="2" CanContentScroll="{TemplateBinding CanContentScroll}" />
                                    <ScrollBar 
                    Name="PART_VerticalScrollBar"
                    Grid.Row="1" 
                    Grid.Column="2" 
                     Orientation="Vertical"
                     Maximum="{TemplateBinding ScrollableHeight}"
                     ViewportSize="{TemplateBinding ViewportHeight}"
                     Value="{Binding Path=VerticalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                     Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                                    <Grid Grid.Row="2" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=NonFrozenColumnsViewportHorizontalOffset}"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <ScrollBar 
                      Grid.Column="1"
                      Name="PART_HorizontalScrollBar"
                      Orientation="Horizontal"
                      Maximum="{TemplateBinding ScrollableWidth}"
                      ViewportSize="{TemplateBinding ViewportWidth}"
                      Value="{Binding Path=HorizontalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                      Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </ScrollViewer.Template>
                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsGrouping" Value="true">
            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
        </Trigger>
    </Style.Triggers>
</Style>

</ResourceDictionary> 
```

# javascript - jQuery 向 PHP 发送数据并接收数据

> ID：12545516
> 
> 赞同：0
> 
> 时间：2012-09-22T16:17:46.437
> 
> 标签：javascript, php, jquery, send, http-get

我有一个调用 API 的 PHP 脚本需要一段时间才能加载，因此用户暂时看不到该页面并认为出现问题。

我被告知 Jquery 脚本可以将数据发送到 PHP 文件，从中获取结果数据并在执行此操作时显示加载消息/动画。环顾互联网，我发现了这个：

```
$.get("check.php", { url: "www.domain.com"}, function(data){
    alert("Data Loaded: " + data);
}); 
```

我无法弄清楚 PHP 文件需要如何接收发送的数据（`$_GET['url']`或其他方式）或如何接收和显示数据以及如何显示加载消息。我知道很多问题，但我会非常感谢任何信息来了解如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T17:01:18.880

在回复这篇文章的每个人的帮助下，这是工作结果：

```
<div id="content-area"><p>loading content...</p></div>

<script type="text/jscript">    
    $.get("check.php", { url: "www.domain.com"}, function(data){
    $("#content-area").html(data)
    });
</script> 
```

PHP 使用 GET 方法接收数据并使用 echo 返回数据。

谢谢大家的帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:20:40.370

这样做的方法是默认显示加载消息/动画，然后，一旦加载，您的 jQuery`$.get()`方法将填充内容。

为了让 check.php 从 jQuery 接收数据，它被视为对脚本的任何其他 GET 请求。在这种情况下，就像 go to`check.php?url=www.domain.com`并且生成的任何输出都将在 ' `data`' 参数中接收。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:39:06.473

```
// On some sort event, here click is used for example
$('button').click(function() {
   // start loading message
   console.log('loading...');
   // start request
   $.get("check.php", { url: "www.domain.com"}, function(data){
       // this part is triggered when request is successful
       console.log('LOADED');
       // shows what was echo'ed on php file
       console.log(data);
   });
}); 
```

`console.log()`在开发者工具控制台中显示消息

# android - 执行 Android JUnit 测试时出现 NoClassDefFoundError

> ID：12545518
> 
> 赞同：4
> 
> 时间：2012-09-22T16:17:51.733
> 
> 标签：android, eclipse, junit, noclassdeffounderror

首先，有类似[here](https://stackoverflow.com/questions/5758966/java-lang-noclassdeffounderror-in-android-test-servicetestcase)或[here](https://stackoverflow.com/questions/2247998/noclassdeffounderror-eclipse-and-android)的类似问题，但我既没有一些外部库，也没有lib文件夹，也没有一些包含的jar或其他东西，所以我想知道运行Android Junit测试我做错了什么。

我的项目结构如下所示：
![在此处输入图像描述](../Images/62fc4b957e96c5395b038f61a6da237e.png)

如您所见，我有一个单独的 Android JUnit 测试项目。测试类如下所示：

```
public class PersistenceManager {
    private static final String FILENAME = "kpzwien_storage";

    public static void persist(String data, Context context) throws IOException  {
        FileOutputStream fos = context.openFileOutput(FILENAME, Context.MODE_PRIVATE);
        fos.write(data.getBytes());
        fos.close();
    }

    public static String read(Context context) throws IOException  {
        FileInputStream fis = context.openFileInput(FILENAME);
        StringBuffer fileContent = new StringBuffer("");

        byte[] buffer = new byte[1024];
        while (fis.read(buffer) != -1) {
            fileContent.append(new String(buffer));
        }

        return fileContent.toString();
    }
} 
```

这是它的测试用例：

```
public class PersistenceManagerTest extends AndroidTestCase {

    private final String FILENAME_PREFIX = "test.";

    @Before
    public void setUp() {
        MockContentResolver resolver = new MockContentResolver();
        RenamingDelegatingContext renamingDelegatingContext = new RenamingDelegatingContext(new MockContext(), getContext(), FILENAME_PREFIX);
        Context context = new IsolatedContext(resolver, renamingDelegatingContext);

        setContext(context);
    }

    public void testPersistAndRead() throws IOException {
        String testData = "foobar";

        PersistenceManager.persist(testData, getContext());

        String result = PersistenceManager.read(getContext());

        assertEquals(testData, result);
    }
} 
```

测试项目的清单如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.devgems.android.kurzparkzonewien.androidtests"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="4" />

    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="net.devgems.android.kurzparkzonewien.activities" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
    </application>
</manifest> 
```

targetPackage 是 Instrumentation 对象将运行的应用程序，由元素在其清单文件中分配的包名称标识。（来源：http: [//developer.android.com/guide/topics/manifest/instrumentation-element.html](http://developer.android.com/guide/topics/manifest/instrumentation-element.html)

我的主项目中包的名称是

> 包="net.devgems.android.kurzparkzonewien.activities"

所以它正是 targetPackage 指向的地方。如果我作为“Android JUnit 测试”运行，我总是会收到 NoClassDefFoundError 但为什么呢？有任何想法吗？我正在使用**ADT 20.0.3**，**Eclipse Juno**。

最后是 logcat 输出：

> 09-22 16:00:12.745: I/TestRunner(1528): java.lang.NoClassDefFoundError: net.devgems.android.kurzparkzonewien.controller.PersistenceManager 09-22 16:00:12.745: I/TestRunner(1528): 在net.devgems.android.kurzparkzonewien.androidtests.PersistenceManagerTest.testPersistAndRead(PersistenceManagerTest.java:32) 09-22 16:00:12.745: I/TestRunner(1528): at java.lang.reflect.Method.invokeNative(Native Method) 09-22 16:00:12.745: I/TestRunner(1528): at java.lang.reflect.Method.invoke(Method.java:521) 09-22 16:00:12.745: I/TestRunner(1528): at junit.framework.TestCase.runTest(TestCase.java:154) 09-22 16:00:12.745: I/TestRunner(1528): at junit.framework.TestCase.runBare(TestCase.java:127) 09-22 16: 00:12.745: I/TestRunner(1528): at junit.framework.TestResult$1.protect(TestResult.java:106) 09-22 16:00:12.745:I/TestRunner(1528): 在 junit.framework.TestResult.runProtected(TestResult.java:124) 09-22 16:00:12.745: I/TestRunner(1528): 在 junit.framework.TestResult.run(TestResult.java :109) 09-22 16:00:12.745: I/TestRunner(1528): at junit.framework.TestCase.run(TestCase.java:118) 09-22 16:00:12.745: I/TestRunner(1528):在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169) 09-22 16:00:12.745: I/TestRunner(1528): 在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154) 09-22 16 :00:12.745: I/TestRunner(1528): 在 android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:430) 09-22 16:00:12.745: I/TestRunner(1528): 在 android.app.Instrumentation$ InstrumentationThread.run(Instrumentation.java:1447) 09-22 16:00:12.745: I/TestRunner(1528): ----- 结束异常 ---------- 结束异常 -----

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:11:18.410

我找到了解决方案。但这实际上是一种解决方法，因为我无法想象我通常需要像这样修补（也许有人知道更好的解决方案？）：

我的主要项目是一个 Maven 项目，在这个项目中，我必须将配置的输出文件夹从**/bin...**设置为 / **target/classes**、**target/test-classes**和**target/generated-sources**。我这样做是因为否则只要我不运行**mvn install，我在主项目中的 JUnit 测试就不会找到最新的代码更改。**. 如果输出文件夹是**target/...**，我不需要运行**mvn install**来获得我的测试中的最新更改。
现在的问题是，当 Android 测试项目存储在主项目的目标中时，它们找不到已编译的源代码。当我将主项目中的输出文件夹设置为 bin 并运行**mvn install**，Android测试项目现在可以找到类了。我必须这样做一次。当我将它设置回**target**时，我的 Android 测试仍然运行，我的主要 JUnit 测试运行。当我更改主项目中的方法时，测试项目立即识别更改，这意味着它没有使用二进制jar或其他东西（这确实很好，虽然我不明白为什么它现在找到它，虽然我将其设置回目标？）。

**[更新]**
将这两行添加到主项目的 pom to build 部分解决了这个问题，所以我不再需要解决方法了。

```
 <outputDirectory>bin/classes</outputDirectory>
    <testOutputDirectory>bin/test-classes</testOutputDirectory> 
```

# arrays - F# 数组成员值在构造函数后丢失

> ID：12545519
> 
> 赞同：0
> 
> 时间：2012-09-22T16:17:52.240
> 
> 标签：arrays, f#, constructor, sequence

我是 F# 新手，我有一个（可能很简单）问题。

下面代码的目的是将序列（字节流）中的值复制到数组`myarray_`中，保持数组的大小`thesize`，并将其他元素设置为零。

我可以看到在 for 循环中复制的值。但是离开构造函数后，调试器显示`myarray_`新构造的对象包含全零！

我正在使用VS2012。谢谢。

**编辑**：接收者数组的大小总是大于传入序列的大小。

**编辑**：这个 SomeClass 的对象实际上被实例化为外部类的成员。在这里，以及“SomeClass”中的更多上下文。当主程序调用 OuterClass.Func 时，会创建“cp”对象，并正确填充数组。当代码离开 ctor 时，数组要么包含全零，要么大小为零（参见下面*的*注释）。

****解决了吗？**** ：我将“cp”从“member”更改为“let mutable”……它现在似乎可以工作了。不知道为什么。

```
type SomeClass(thesize, bytestream : seq<byte>) = class
    let mutable myarray_ = Array.create<byte> thesize 0uy

    do
        let mutable idx = 0
        for v in bytestream do
            myarray_.[idx] <- v
            idx <- idx + 1

    member x.Func(index) = // consumes myarray_.[index] and neighbor values

type OuterClass(thesize, bytestream) = class
    member x.cp : SomeClass = new SomeClass(thesize, bytestream)
    member x.Func(index) =
        x.cp.Func(index) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:27:02.023

```
type SomeClass(size, bytes : seq<byte>) = 
    let buf = Array.zeroCreate size
    do
        // Here code assumes that size is always greater than number of items in bytes, is it always correct ?
        Seq.iteri(fun i b -> buf.[i] <- b) bytes
    member this.Buffer = buf

let v = SomeClass(5, (List.init 3 byte))
printfn "%A" v.Buffer // printf [|0uy; 1uy; 2uy; 0uy; 0uy|] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:25:50.823

您声明`myarray_`为可变值，因此可以将其分配给代码中某处新创建的数组。您不应该使用`mutable`关键字，因为您想更新数组元素，而不是将数组更改为新数组。

假设`thesize`大于 的长度`bytestream`：

```
type SomeClass(thesize, bytestream : seq<byte>) =
    let myarray_ = [| yield! bytestream
                      for i in (Seq.length bytestream)..(thesize-1) -> 0uy |]
    .... 
```

**编辑：**

和

```
member x.cp : SomeClass = new SomeClass(thesize, bytestream) 
```

`SomeClass`每次使用该属性时，您基本上都会实例化一个新实例。因此，您不会看到对`x.Func`旧的`SomeClass`. 你可能想要的是：

```
type OuterClass(thesize, bytestream) =
    let cp = new SomeClass(thesize, bytestream)
    member x.cp = cp 
```

其中实例仅在默认构造函数中构造一次。

# visual-c++ - allegro 5.1.3 和 microsoft visual studio 2010 for android？

> ID：12545522
> 
> 赞同：2
> 
> 时间：2012-09-22T16:18:25.343
> 
> 标签：visual-c++, android-ndk, allegro, visual-studio-2010, allegro5

我在笔记本电脑上设置了 allegro 和 msv2010，并使用 msvc2010 设置了 android dev。但是我不知道如何为新的 allegro android dev 设置一个项目。我已经设置了and android sdk、java jdk、ndk 和所有其他的。

[http://vs-android.googlecode.com/files/vs-android_samples.zip](http://vs-android.googlecode.com/files/vs-android_samples.zip)我可以在 msvc2010 中编译这些 android 项目并且可以创建标准的 allegro 项目。

我只是想知道是否有人知道如何在 msvc2010 中使用 allegro 创建一个 android 项目，或者你知道我在哪里可以找到有关如何执行此操作的说明。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T17:06:14.900

allegro 5.0 支持的平台：

Unix/Linux、Windows（MSVC、MinGW）、MacOS X、iPhone。

Allegro 5.1 还增加了对以下功能的支持：

安卓。

所以我认为直到今天（2013 年 12 月 2 日）我们才能做到这一点。

谢谢你。

来源： [http ://alleg.sourceforge.net/readme.html](http://alleg.sourceforge.net/readme.html)

# android - Android EditText 光标不可用

> ID：12545523
> 
> 赞同：0
> 
> 时间：2012-09-22T16:18:29.390
> 
> 标签：android, android-edittext, android-cursor

您好我正在尝试做一个应用程序，它使用自己的键盘视图而不是默认值。

在搜索区域（Edittext）我不能使用默认光标

我正在研究一个可用的键盘视图示例

[Android-KeyboardView-示例](https://github.com/rciovati/Android-KeyboardView-Example)

活动源代码

```
package it.anddev.tutorial;

import android.app.Activity;

import android.inputmethodservice.Keyboard;

import android.os.Bundle;

import android.view.MotionEvent;

import android.view.View;

import android.view.animation.Animation;

import android.view.animation.AnimationUtils;

import android.widget.EditText;

public class KeyboardWidgetTutorialActivity extends Activity {

    private CustomKeyboardView mKeyboardView;
    private View mTargetView;
    private Keyboard mKeyboard;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        mKeyboard = new Keyboard(this, R.xml.keyboard);
        mTargetView = (EditText) findViewById(R.id.target);
        mTargetView.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                showKeyboardWithAnimation();
                return true;
            }
        });

        mKeyboardView = (CustomKeyboardView) findViewById(R.id.keyboard_view);
        mKeyboardView.setKeyboard(mKeyboard);
        mKeyboardView
                .setOnKeyboardActionListener(new BasicOnKeyboardActionListener(
                        this));
    }

    private void showKeyboardWithAnimation() {
        if (mKeyboardView.getVisibility() == View.GONE) {
            Animation animation = AnimationUtils
                    .loadAnimation(KeyboardWidgetTutorialActivity.this,
                            R.anim.slide_in_bottom);
            mKeyboardView.showWithAnimation(animation);
        }
    }
} 
```

键盘视图是否会阻止该未来或如何启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:36:10.623

很可能您的布局参数中没有 android:focusable="true" 。请使用受影响的 EditText 字段发布您的布局 XML。

# html - Jetty 的 WebSocket 连接中的消息不能包含任何 HTTP 方法关键字？

> ID：12545524
> 
> 赞同：1
> 
> 时间：2012-09-22T16:18:44.923
> 
> 标签：html, websocket, jetty

我正在实现 Jetty 的 WebSocket.OnTextMessage。当我在 onMessage(String) 中收到消息时，我可以使用之前从 onOpen(Connection) 获取的 Connection 对象进行回复，并且客户端会正确接收它。

但是，当我想使用 connection.sendMessage(String) 从服务器推送消息（即没有来自客户端的初始消息）时，客户端不会收到它。似乎消息正在被缓冲，但我找不到任何方法来刷新它。

有谁知道如何解决这个问题？也许我做的是不正确的。这就是我所做的

```
public void onOpen(final Connection connection) {
    this.connection = connection;
} 
```

然后在另一个事件

```
public void onReceive(BytesXMLMessage bytesXMLMessage) {
    byte[] data = ((BytesMessageImpl) bytesXMLMessage).getData();
    String msgToClient = new String(data);
    this.connection.sendMessage(msgToClient);
    System.out.println("onReceive:" + msgToClient);
} 
```

但是客户端从未收到该消息

更新：找到模式，无论是大写还是小写，只要包含HTTP方法关键字（例如GET，POST，PUT，HEAD等），消息将永远不会发送给客户端。

有没有办法缓解这个问题？

更新：这是可以模拟问题的非常简化的 WebSocketServlet 实现

```
package com.test.websocket;

import org.eclipse.jetty.websocket.WebSocket;

import javax.servlet.http.HttpServletRequest;
import java.io.IOException;

public class WebSocketServlet extends org.eclipse.jetty.websocket.WebSocketServlet {
    @Override
    public WebSocket doWebSocketConnect(HttpServletRequest request, String protocol) {
        return new WebSocket.OnTextMessage() {
            private Connection connection;
            @Override
            public void onMessage(String data) {
                try {
                    connection.sendMessage("Echo: " + data);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onOpen(Connection connection) {
                this.connection = connection;
            }

            @Override
            public void onClose(int closeCode, String message) {
                connection.close();
            }
        };
    }
} 
```

这是 web.xml

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <servlet>
        <servlet-name>EchoWebSocket</servlet-name>
        <servlet-class>com.test.websocket.WebSocketServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>EchoWebSocket</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:16:02.857

找到了无法发送 HTTP 方法关键字的根本原因。它是由在开发机器上运行的 Antivirus Kaspersky 引起的，它在网络层拦截所有 HTTP 方法关键字，并且它必须在适当的标准 HTTP 协议中工作。也许它还不支持 websocket 协议。

感谢 @jesse mcconnell 帮助创建单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:32:38.807

[编辑]

我无法通过单元测试验证这一点，我让客户端发送“GET”消息，然后服务器端返回相同的字符串，客户端接收它。如果您有更多关于它的信息，请在 RT/Jetty 项目下的 bugs.eclipse.org 上打开一个重现方式的问题（如果您愿意）。

在这一点上，如果您可以发布一些代码来查看或可能有帮助的东西，我倾向于您的实施问题。

这是您描述的新测试用例： http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/commit/?id= [494f7e48fcc20c51066cd91a6dac1d738cacb54e](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/commit/?id=494f7e48fcc20c51066cd91a6dac1d738cacb54e)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:21:21.690

websocket 协议旨在尽量避免看起来像 HTTP 流量。具体来说，它将随机掩码应用于从客户端发送到服务器的所有帧的有效负载，因此 websocket 消息不太可能看起来像 HTTP 请求。

然而，该协议不会屏蔽从服务器发送到客户端的有效负载，因为当时的想法是，可能存在可以利用该方向的流量来利用的攻击向量。

我想我们没有考虑到像您的防火墙这样的中介在他们寻找和阻止的内容方面可能有点过于严格。我想不出他们为什么要阻止这样的流量，因为我可以想象它也会阻止像 XMPP 消息这样的文本，比如“不要忘记拿牛奶！”。但它确实......所以唯一真正的选择是你：

1.  自己编码有效载荷内容并在客户端解码。
2.  关闭防火墙（或解调）
3.  修好防火墙。

# java - java中的高效字符串匹配

> ID：12545526
> 
> 赞同：3
> 
> 时间：2012-09-22T16:19:10.793
> 
> 标签：java, regex, string, string-matching

我有一系列句子（推文）和超过 1000 万个名字。我想确定一个句子（推文）是否包含提及 1000 万个名字中的一个。我可以为所有可能的模式编译正则表达式，但我真的很想知道是否有有效的算法来做到这一点。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:21:49.540

您可以构建[一个 trie（前缀树）](http://en.wikipedia.org/wiki/Trie)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T16:26:30.597

您可以尝试使用[Bloom filter](http://code.google.com/p/guava-libraries/wiki/HashingExplained)。[演示在这里](http://billmill.org/bloomfilter-tutorial/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:31:15.610

如果您只寻找简单字符串（名称）的出现，我认为您根本不需要模式匹配。如果您实际上是针对推特名称 - 在推文中提及它们时，它们不是以@符号为前缀吗？如果是这样，首先只需寻找 @ 符号并从那里继续。

要检查 @ 之后的字符串是否是您的 1000 万个字符串之一，ruakh 提出的前缀树绝对是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T16:31:24.240

你可以从相反的方向着手。当句子进入时，将其拆分为标记并为每个标记构建一个正则表达式模式，例如 ^*标记*\s*。假设每一个都在线，将它们与你的 1000 万个名字进行比较。

# java - GridBagLayout 中间和底部按钮

> ID：12545531
> 
> 赞同：0
> 
> 时间：2012-09-22T16:19:49.797
> 
> 标签：java, swing, layout, gridbaglayout

我正在为一些按钮设置布局。我试图在中间有 2 个按钮，最后有一个。我有两个在中间，但最后一个在一边。如何将“后退”按钮设置在其他按钮下方。（我研究过这个）。

```
public class Options extends JPanel
{
    private static final long serialVersionUID = 1L;
    JButton b1 = new JButton("Back");
    JButton b4 = new JButton("Textures");
    JButton b5 = new JButton("Settings");

public Options()
{
    setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    c.anchor = GridBagConstraints.CENTER;
    c.weighty = 1;
    c.gridx = 0;
    c.gridy = 0;
    c.ipadx = 5;
    add(b5, c);
    c.ipadx = 1;
    c.gridy = 1;
    add(b4, c);
    c.weighty = 1;
    c.gridy = 2;
    c.anchor = GridBagConstraints.PAGE_END;
    add(b1, c);
 }
} 
```

![我的布局错误](../Images/f2431727efc7702da5154c0b70e78749.png)

编辑：我已经更新了上面的代码。偏移误差已修复，但 b5 位于顶部而不是居中（b4 居中，b1 位于底部）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:19:34.750

这应该足够接近我认为您试图获得的布局：

```
 setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    JPanel layout = new JPanel(new GridLayout(0, 1));
    layout.add(new JButton("Settings"));
    layout.add(new JButton("Textures"));

    c.anchor = GridBagConstraints.CENTER;
    c.weighty = 1.0;
    c.gridy = 0;
    add(layout, c);

    c.gridy = 1;
    c.weighty = 0.1;
    c.anchor = GridBagConstraints.PAGE_END;
    add(new JButton("Back"), c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:27:22.570

你可以设置`c.gridx`为`0`：

```
GridBagConstraints c = new GridBagConstraints();
c.weighty = 1.0;
c.gridx = 0;
c.anchor = GridBagConstraints.PAGE_END; 
```

# .net - FileStream 的 Write 与 WriteByte 在 IEnumerable 上的性能

> ID：12545533
> 
> 赞同：3
> 
> 时间：2012-09-22T16:19:54.783
> 
> 标签：.net, performance, stream, bytearray, filestream

我需要将字节写入`IEnumerable<byte>`文件。
我可以将其转换为数组并使用`Write(byte[])`方法：

```
using (var stream = File.Create(path))
    stream.Write(bytes.ToArray()); 
```

但由于`IEnumerable`不提供集合的项目数，[除非绝对必要，否则](https://stackoverflow.com/a/6750471/704144 "C#: ToArray performance - Stack Overflow")`ToArray`不建议使用。

所以我可以在每次迭代中迭代`IEnumerable`和使用：`WriteByte(byte)`

```
using (var stream = File.Create(path))
    foreach (var b in bytes)
        stream.WriteByte(b); 
```

我想知道在写入大量数据时哪个会更快。

我猜使用`Write(byte[])`根据数组大小设置缓冲区，因此在涉及数组时会更快。

我的问题是，当我只有一个`IEnumerable<byte>`具有 MB 数据的数据时，哪种方法更好？将其转换为数组并调用`Write(byte[])`或迭代它并`WriteByte(byte)`为每个调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:51:19.950

枚举大量字节流是一个过程，它为通常很便宜的事情增加了大量开销：将字节从一个缓冲区复制到下一个缓冲区。

通常，LINQ 样式的开销并不重要，但是当涉及到在普通硬盘驱动器上每秒处理 1 亿字节时，您*会*注意到严重的开销。这**不是**过早的优化。我们可以预见这将是一个性能热点，因此我们应该积极优化。

`IEnumerable`因此，在您周围复制字节时，可能根本不应该依赖抽象`IList`。传递`ArraySegement<byte>`也包含`Offset`and的数组 or `Count`。这使您不必过于频繁地对数组进行切片。

具有高吞吐量 IO 的一件事也是致命的，那就是每个字节调用一个方法。就像按字节读取和按字节写入一样。这会*降低*性能，因为这些方法必须每秒调用数亿次。我亲身经历过。

始终一次处理至少 4096 字节的整个缓冲区。根据您使用的 IO 媒体，您可以使用更大的缓冲区（64k、256k 甚至兆字节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T18:14:31.293

您应该分析哪个版本更快。该类`FileStream`有一个内部缓冲区，可以将`Read()`和`Write()`方法与实际的文件系统访问解耦。

如果您未在`FileStream`构造函数中指定缓冲区大小，则默认情况下它使用类似 4096 字节的缓冲区。该缓冲区会将您的许多`WriteByte()`调用组合成对基础文件的一次写入。唯一的问题是`WriteByte()`调用的开销是否会超过调用的开销`Enumerable.ToArray()`。后者肯定会使用更多内存，但您总是必须处理这种权衡。

仅供参考：当前的 .NET 4 实现`Enumerable.ToArray()`涉及通过在必要时复制其大小来增长数组。每次增长时，都会复制所有值。此外，当所有项目都存储在数组中时，其内容会*再次*复制到最终大小的数组中。对于`IEnumerable<T>`实际实现的实例，`ICollection<T>`代码利用这一事实从正确的数组大小开始，并让集合改为复制。

# extjs - 如何在使用 sencha 架构师的 sencha touch 2 项目中添加 sencha chart 2

> ID：12545534
> 
> 赞同：0
> 
> 时间：2012-09-22T16:20:15.533
> 
> 标签：extjs, sencha-touch-2, sencha-architect, sencha-charts

我正在开发一个移动 Sencha Touch 2 应用程序，并且正在使用 Sencha Architect 来做 UI 和其他东西。我的应用程序中还需要图表。有没有办法让我将 Sencha Charts 2 与 Sencha Architect 集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:47:44.297

昨天 Sencha 发布了 Sencha Touch 2.1：

> “我们已将新的 Touch Charts 集成到 Architect 中，因此构建移动数据可视化就像拖放一样简单。”

[你可以在这里](http://www.sencha.com/blog/introducing-sencha-touch-2-1-and-more)查看他们的博客，向下滚动到“Sencha Architect 更新”，在那里你找到了关于 Architect 和 Touch Charts 的视频。

# c++ - 将 c++ lambda 转换为 ac 函数

> ID：12545537
> 
> 赞同：4
> 
> 时间：2012-09-22T16:20:58.173
> 
> 标签：c++, static, lambda, type-conversion, capture

我正在编写一些包装代码，其中外部库调用 c++ 函数（使用可变参数模板等）。关键是外部库需要一个 c 函数，这通常没问题，因为这是合法的：

```
LibraryFuncType fn = [](params) { ... } 
```

虽然我可以轻松地手动完成此操作，但我想使用以下内容自动包装：

```
function_(context, "name", myfunc); 
```

为此，我需要一个类似于：

```
template <ReturnType, ParamTypes...>
static void function_(Context &ctx, const std::string &name, std::function<ReturnType(ParamTypes...)> fn) {
    ctx.registerFunction(name, [fn](State *state) -> int {
        Context ctx(state);
        return apply_helper<sizeof..(ParamTypes)>::apply(ctx, fn);
    });
} 
```

其中第二个参数“ctx.registerFunction”是 LibraryFuncType 类型。

但这当然是有问题的，因为由于捕获了“fn”，lambda 转换不再合法。但是，如果我不捕获“fn”，那么我将无法在 lambda 中访问它。

我认为解决这个问题的唯一方法是拥有一个静态变量，但我不清楚引入它的最佳方法。我目前的解决方案是：

```
template <typename ReturnType, typename... ParamTypes>
struct function_helper {
  static std::function<ReturnType(ParamTypes...)> fn;

  function_helper(std::function<ReturnType(ParamTypes...)> _fn) {
      fn = _fn;
  }

  static void registerFn(Context &ctx, const std::string &name) {
      ctx.registerFn(name, [](state *state) -> int {
          Context ctx(state);
          return apply_helper<sizeof...<ParamTypes>>::apply(ctx, fn);
      });
  }
};

template <typename ReturnType, typename... ParamTypes>
std::function<ReturnType(ParamTypes...)> function_helper<ReturnType, ParamTypes...>::fn;

template <typename ReturnType, typename... ParamTypes>
void function_(Context &ctx, const std::string &name, std::function<ReturnType(ParamTypes...)> fn) {
  function_helper<ReturnType, ParamTypes...> reg(fn);
  reg.registerFn(ctx, name);
} 
```

虽然从技术上讲这是可行的，但它显然很危险（而且很麻烦），因为如果我在两个具有相同签名的函数上使用“function_helper”，它会为其中一个错误地设置“fn”。

此外，我可以通过在“function_”中声明一个静态变量来执行相同的危险静态变量。我开设了这门课，希望它能让人们对解决问题的正确方法有所了解。

有谁知道使用不需要捕获的 lambda 的更好方法（或者，一种将捕获的 lambda 转换为 c 函数的方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:41:39.427

避免在注册代码中使用函数指针值的一种方法是使其成为模板参数。不幸的是，我不能想出一个非常好的符号。但是，如果可以使用类似下面的方法注册一个函数，那么这样做是相当简单的：

```
RegisterHelper<decltype(foo)>::doRegister<&foo>("foo"); 
```

有了这个，`RegisterHelper`就是类模板，它有一个`static`函数`doRegister()`，它把函数指针作为模板参数。找到一种直接调用函数模板并让它找出类型的方法会很好：

```
doRegister<&foo>("foo"); 
```

但是，我还没有找到一种方法来做到这一点，因为函数模板不能部分专门化（否则我认为这是可能的）。下面是代码外观的粗略轮廓。该代码不会尝试执行您实际调用该函数所需的任何委托。它只是为了展示如何传入函数指针。演示对某些类型进行了硬编码，但这只是因为添加任何编组代码会隐藏正在发生的事情。

```
#include <string>
#include <iostream>

struct State;
typedef std::string (*function_type)(State*);
void registerFunction(std::string const& name, function_type function)
{
    std::cout << "calling '" << name << "': " << function(0) << "\n";
}

template <typename T> class RegisterHelper;

template <typename RC, typename... Args>
class RegisterHelper<RC(Args...)>
{
public:
    template <RC (*function)(Args...)>
    static void doRegister(std::string const& name) {
        registerFunction(name, [](State*) -> std::string {
                return function(17, 4.0);
            });
    }
};

std::string foo(int, double) { return "foo"; }
std::string bar(int, double) { return "bar"; }

int main()
{

    RegisterHelper<decltype(foo)>::doRegister<&foo>("foo");
    RegisterHelper<decltype(bar)>::doRegister<&bar>("bar");
} 
```

# python - python中的模板方法调用顺序

> ID：12545539
> 
> 赞同：2
> 
> 时间：2012-09-22T16:21:05.240
> 
> 标签：python, unit-testing, template-method-pattern

*单元测试运行*功能的最简单方法是什么？在这里，我对*fun* * 函数的作用不感兴趣，但前提是它们的调用顺序正确。

```
from mock import Mock

(many, arguments, four, fun) = ('many', 'arguments', 'four', 'fun') 

class TemplateMethod(object):

    def fun1(self, many, parameters, go, here):
        raise NotImplementedError()

    @classmethod
    def fun2(cls, many, parameters, go, here):
        pass

    @staticmethod
    def fun3(many, parameters, go, here):
        pass

    def run(self):
        result1 = self.fun1(many, arguments, four, fun)
        result1.do_something()

        self.fun2(many, arguments, four, fun)
        self.fun3(many, arguments, four, fun) 
```

该解决方案的唯一要求是对被测类的非侵入性。

**解决方案：**

实际上，这有点像草稿，这个简单的类可以以多种方式进行修复和扩展，我什至都懒得去想它。关键是您现在可以简单地将所有方法的所有调用记录在模板方法中。您还可以指定不应被该类模拟的对象列表（即您正在记录调用的函数）。

特别感谢@Damian Schenkelman，他给了我一些重要的指示。

```
class MockingInvocationRecorder(object):

    FUNCTION_TYPES = ('function', 'classmethod', 'staticmethod')

    def __init__(self, obj, dont_mock_list):
        self._invocation_list = []

        name_list = [exc.__name__ for exc in dont_mock_list]
        self._wrap_memfuns(obj, name_list)

    @property
    def invocations(self):
        return tuple(self._invocation_list)

    def _wrap_single(self, memfun, exclude_list):
        def wrapper(*args, **kwargs):
            self._invocation_list.append(memfun.__name__)

            if memfun.__name__ in exclude_list:
                return memfun(*args, **kwargs)
            else:
                return Mock()

        return wrapper

    def _wrap_memfuns(self, obj, exclude_list):
        for (mem_name, mem) in type(obj).__dict__.iteritems():
            if type(mem).__name__ in self.FUNCTION_TYPES:
                wrapper = self._wrap_single(getattr(obj, mem_name), exclude_list)
                setattr(obj, mem_name, wrapper) 
```

您现在可以通过以下方式测试调用顺序：

```
tm = TemplateMethod()
ir = MockingInvocationRecorder(tm, [tm.run])

tm.run()

print ir.invocations => ('run', 'fun1', 'fun2', 'fun3') 
```

您可以通过类名引用成员：

```
ir = MockingInvocationRecorder(tm, [TemplateMethod.run]) 
```

请注意，您列出了所有不应该被嘲笑的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:22:32.913

Monkeypatch fun1、fun2、fun3 函数并使用列表来跟踪调用顺序。之后，断言在列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T20:43:44.543

在这里使用[`__call__`](http://docs.python.org/reference/datamodel.html#object.__call__)可能会有所帮助。

```
class Function1(object):
    def __call__(self, params, logger=None):
        if logger is not None:
            logger.append(self.__repr__())
        return self.function1(params) 
        # Or no return if only side effects are needed

    def __init__(self, ...):
        #...

    def __repr__(self):
        # Some string representation of your function.

    def function1(params):
        print "Function 1 stuff here..." 
```

然后做类似的事情

```
class TemplateMethod(object):
    def __init__(self, params):
        self.logger = []
        self.fun1 = Function1(...)
        self.fun1(params, self.logger) 
```

这很老套；可能有一些方法可以清理我得到的东西，但是将函数封装在类中然后使用`__call__`是一个很好的方法。

# excel - 在为员工创建时间表时，如何使用唯一编号填充数组？

> ID：12545541
> 
> 赞同：0
> 
> 时间：2012-09-22T16:21:18.640
> 
> 标签：excel, vba

我已经尝试了一些在此处发布的示例，但我似乎无法填充我的数组，如下图所示。理想情况下，我希望有一个输入框来指定学生人数，然后让 VBA 函数填充数组，如下所示：

[链接到图片](http://stephenleacock.ca/array_example.jpg)

这是可能的还是我只需要手动填充数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:26:16.980

[如果以下内容构成“要求......澄清”，我深表歉意，但除非我听到更多，否则我无能为力]

从您的图像中，我看不到问题的症结所在。您的意图是否只是让单元格`B5`（在您的示例中）始终具有值`1`，`C5`始终具有值`N-1`（`N`学生人数在哪里），然后在整个工作表中遵循您的“轮换”模式？

如果是这样，您可以在第一列中使用以下公式（我的示例是 for `B6`）

```
=IF(OR(B5=number_of_students,B5=""),"",B5+1) 
```

然后表中的每个其他单元格都可以有（我的例子是 for `C5`）：

```
=IF(B5="","",IF(B5=1,number_of_students,B5-1)) 
```

还是比这更复杂？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:17:55.977

**编辑**显然，我没有阅读您的整个帖子。更新为使用输入框来输入您想要多少学生：

```
Option Explicit
Private theArray() As Long
Sub populateArray()
    Dim elements As Long
    Dim response As String
    response = InputBox("Enter the number of students", "Number of students?")
    If IsNumeric(response) Then
        elements = CLng(response)
    ElseIf response = "" Then
        Exit Sub
    Else
        MsgBox "Invalid input!", vbCritical
        Exit Sub
    End If
    ReDim theArray(1 To elements, 1 To elements)
    Dim i As Long, j As Long, num As Long
    For i = 1 To elements
        For j = 1 To elements
            num = i - j + 1
            If num < 1 Then num = num + elements
            populateArray(i, j) = num
        Next
    Next
End Sub 
```

如下所示，您可以`populateArray`替换为`Cells`，它将直接写入`ActiveSheet`.

**原始答案** 这将使用您列出的格式填充数组：

```
Dim yourArray(1 To 20, 1 To 20) As Long
Dim i As Long, j As Long, num As Long
For i = 1 To 20
    For j = 1 To 20
        num = i - j + 1
        If num < 1 Then num = num + 20

        yourArray(i, j) = num
    Next
Next 
```

顺便说一句，您还可以使用单元格而不是 yourArray 来填充工作表的一部分。

例如，如果您想在图像上列出的位置填充单元格，则可以直接在循环中使用以下方法：

```
Dim i As Long, j As Long, num As Long
For i = 1 To 20
    For j = 1 To 20
        num = i - j + 1
        If num < 1 Then num = num + 20
        Cells(i + 4, j + 1) = num
    Next
Next 
```

从技术上讲，整个数组只写入一次单元格会更快，但在这种情况下，速度差异可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:21:37.533

只有在绝对必要的情况下，我才会求助于 VBA。

这可以通过 3 个步骤完成：

1.  命名您的 20 x 20 网格（例如 schedGrid）。

2.  将此公式放入单元格中`B5`

> =IF(COLUMN()=2,ROW()-ROW(schedGrid)+1,IF(A5-1=0,ROWS(schedGrid),A5-1))

1.  复制此单元格并将其粘贴（公式）到您的 20 x 20 网格中。

而已。额外的好处是您可以将网格调整为任何大小。

# algorithm - 寻找可被给定整数 k 整除的对所需的最佳算法

> ID：12545544
> 
> 赞同：6
> 
> 时间：2012-09-22T16:21:32.900
> 
> 标签：algorithm

给定 n 个整数和一个整数 k，告诉给定 n 个整数有多少对这样的对，使得对中两个元素的和可以被 k 整除？

我不知道 n 和 k 的界限。因此，为简单起见，假设 n 和 k 不是很大。

不用说，尽可能给出最优的解决方案。（我知道天真的方法:-)！)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-22T16:46:44.027

两个数之和是否能被整除`k`仅取决于它们的余数模`k`。

因此，如果`k`相当小，您可以计算每个可能的余数有多少个数，并从中计算对数。假设`k > 0`和所有整数非负

```
unsigned long long combinations(unsigned k, unsigned long long *arr, unsigned n) {
    unsigned long long counts[k] = {0};
    unsigned i;
    for(i = 0; i < n; ++i) {
        ++counts[arr[i]%k];
    }
    // number of pairs where both are divisible by k
    unsigned long long combs = counts[0]*(counts[0]-1)/2;
    for(i = 1; i < (k+1)/2; ++i) {
        combs += counts[i]*counts[k-i];
    }
    if (k == 2*i) {
        combs += counts[i]*(counts[i] - 1)/2;
    }
    return combs;
} 
```

逐步完成这项工作`O(n+k)`。如果`n`很小且`k`很大，则朴素算法更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T16:52:42.547

除了Daniel Fischer所说的，如果k非常大，可以对数字mod k进行排序，然后将排序后的列表从两端（处理完0 mod k值后）向中间（k/2 mod k ）。那是 O(n log n)，比 O(n^2) 更好，假设你的朴素算法真的很朴素。

# c++ - 基类对象调用派生类函数（非虚拟）时会发生什么

> ID：12545550
> 
> 赞同：2
> 
> 时间：2012-09-22T16:21:53.067
> 
> 标签：c++, polymorphism

如果这个问题对你来说很愚蠢，请原谅我。我是 C++ 的新手，我正在研究朗姆酒时间多态性。我想知道当基类对象调用派生类函数（非虚拟）时会发生什么。例如看代码

```
class base {
    public:
        virtual void vfunc() {cout << "This is base's vfunc().\n";}
};

class derived1 : public base {
    public:
        void vfunc() {cout << "This is derived1's vfunc().\n";}
};

int main()
{
    base *p, b;
    derived1 d1;

    p = &b;
    p->vfunc();

    p = &d1;
    p->vfunc();

    return 0;
} 
```

我得到了想要的输出，然后我从基类中删除了 virtual 关键字，当我运行程序时，输出是

```
This is base's vfunc().
This is base's vfunc(). 
```

如果有人解释在这两种情况下发生了什么（在指针操作方面），我将非常感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:42:34.820

在虚拟情况下，**在运行时**，`p->vfunc()`告诉`p`指向指针所属的类（它在内存中的任何部分）的类定义，并读取它的 vtable（或一些类似的替代实现）以找出要执行的函数称呼。

假设 vtable 如下所示：

`base`的虚表：

```
----------------
vfunc | 0x2048
---------------- 
```

`derived1`的虚表：

```
----------------
vfunc | 0x2096
---------------- 
```

`vfunc`然后根据 vtables 指向的位置调用基础版本或派生版本。

在非虚拟情况下，这些都不会发生，并且要调用的函数由编译器**在编译时**设置。在编译期间，编译器所能确定的只是它`p`的类型是“指向基址的指针”，并将所有`p->vfunc()`调用更改为指向地址`0x2048`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:42:05.663

这里发生的情况是有两个 vtable，一个用于基础，一个用于派生。在 base 的 vtable 中，您有一个 条目`vfunc()`，而在 derived 的 vtable 中也有一个条目，诀窍是，当derived 采用它的父级 vtable 时，它​​会查看它是否覆盖了它的任何父级虚拟方法，并且确实如此。所以它取代了那里的东西，所以它现在指向它自己的版本。

换句话说，当您调用`vfunc()`base 类型的实例时，您会检查包含指向 bases 的指针的基本 vtable `vfunc()`。当您通过派生的实例调用它时，您会找到指向派生的指针`vfunc()`。

如果删除 virtual 关键字，编译器将不再寻找虚函数，因此它不是基于对象的运行时类型，而是基于它的静态/编译时类型。

换句话说，如果没有 virtual 关键字，编译器会查看指针的类型，它是基数，所以它每次都调用基数版本。

# mysql - 对 SQL count() 值进行计算

> ID：12545553
> 
> 赞同：2
> 
> 时间：2012-09-22T16:22:06.407
> 
> 标签：mysql, sql

我想计算仓库中的物品并计算仓库中的可用空间，然后输出到带有 Inshelf 和 free 列的表中，我想出了类似的东西。

```
SELECT COUNT(*) as Inshelf, free=10-Inshelf
  FROM stock.stockproduct 
 WHERE StockNum = 1
   AND checkOutData is NULL; 
```

似乎它不起作用，对于这种问题有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:33:16.953

这是行不通的 - 聚合函数的结果（例如`count()`）在考虑完所有记录之后才可用。您需要使用子查询，在子查询中进行计数，在外部进行减法。在不知道您的数据库架构的情况下，这充其量只是一个猜测，但是......

```
SELECT InShelf, free - InShelf
FROM (
    SELECT count(*) AS Inshelf, free
    FROM stockproduct
    WHERE StockNum = 1 AND checkOutData IS NULL
    GROUP BY somefield
) AS a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:14:21.103

工作 ！！

```
SELECT InShelf, 10 - InShelf
FROM (
    SELECT count(*) AS Inshelf, count(*) AS free
    FROM stock.stockproduct
    WHERE StockNum = 1 AND checkOutData IS NULL

) AS a; 
```

谢谢大家，对不起，我很愚蠢=.='

# php - PHP - 检查多维数组中的相同值

> ID：12545555
> 
> 赞同：0
> 
> 时间：2012-09-22T16:22:14.943
> 
> 标签：php, multidimensional-array

我有一个这样的数组：

```
[input] => Array (
    [0] => Array ( [val1] => 111 [val2] => 222 [val3] => 333 [day] => 444 )          
    [1] => Array ( [val1] => 111 [val2] => 221 [val3] => 333 [day] => 444 ) 
    [2] => Array ( [val1] => 111 [val2] => 223 [val3] => 333 [day] => 444 ) 
    [3] => Array ( [val1] => 111 [val2] => 224 [val3] => 333 [day] => 444 )
    [4] => Array ( [val1] => 111 [val2] => 222 [val3] => 333 [day] => 444 ) 
           ) 
```

我只想检查数组中的前 2 个值（val1 和 val2）是否与另一个数组相同。就像上面例子中的 input[0] 和 input[4] 。我如何在 php 中执行此操作？

我不想删除重复的数组，我只是返回重复的值以供进一步使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:29:16.160

您只需要存储这些键的数组：

```
$uniq = array();
foreach($input as $v) {
    $key = $v['val1'] . '-' . $v['val2'];
    if (!isset($uniq[$key]))
        $uniq[$key] = 0;
    else
        $uniq[$key]++;
}
print_r(array_filter($uniq)); 
```

# javascript - 在大型主干 js 应用程序中切换视图时禁用事件侦听器

> ID：12545557
> 
> 赞同：1
> 
> 时间：2012-09-22T16:22:25.253
> 
> 标签：javascript, jquery, backbone.js

我正在开发一个大型单页 Backbone JS 应用程序。我有几个由一个大 div 组成的视图，当用户导航到特定的哈希位置时，主干路由器会加载视图，这基本上会在特定的主干视图上触发“显示”事件，并卸载所有其他视图和 $( this.el) 变得可见。

基本上最后我会得到几个视图，在它们之间切换时会做同样的事情，隐藏活动视图 div，并显示与您单击的链接相对应的下一个视图（链接都是主题标签位置）。

禁用或取消委派非活动/隐藏视图的事件有什么好处？现在所有视图都已经实例化并准备好触发“显示”或“隐藏”事件，但我认为在隐藏的视图上禁用所有与 DOM 相关的事件可能会更有效地内存/性能，并取消绑定隐藏视图正在使用的模型或集合。

我正在考虑有一个“清理”触发器，当用户从活动视图切换到新视图时触发，禁用所有事件，然后隐藏 div，但是否有必要，或者有更好的方法来做到这一点，减少内存使用并提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:34:16.373

您绝对应该取消绑定视图中隐藏或不再需要的所有事件。考虑一个绑定到模型或集合的视图。该视图不可见，并且模型中的某些内容发生了变化。现在视图会更新其 DOM，尽管更改将不可见。

只有在删除视图时解除绑定 DOM 事件才有意义，因此垃圾收集器可以删除 DOM 元素。如果它仍然具有绑定事件，则可能导致内存泄漏。

看看[Marionette](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html)框架处理这个问题的方式。在[`close`](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html#section-20)视图的方法中，它解除绑定到模型/集合的所有事件，并将所有事件解除绑定到 DOM。

您还应该考虑是否真的想保存那么多视图。它与您将遇到的内存问题无关。它关于一致性地狱。您必须确保所有视图都获得模型的所有更改并自行更新它们，即使它们不可见。在处理一些较大的单页应用程序时，我可以说重新渲染视图比保存视图要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:35:24.783

我为此使用的解决方案是在 DOM 中只保留一种视图。IE：

假设我们有 3 个视图：

```
var MainView = Backbone.View.extend({
  el: '#main-view',

  events: {
    "click .openView1":   "openView1",
    "click .openView2":   "openView2"
  },

  render: function() {
    //...
  },

  openView1: {
      this.activeView = new View1();
  },

  openView2: {
      this.activeView = new View2();
  }
});

var View1 = Backbone.View.extend({
});

var View2 = Backbone.View.extend({
}); 
```

当您将活动视图保存在一个变量中时，您不应该有内存问题。

# javascript - 如何使用 HTML5 录制音频（语音）并将录制的语音转换为文本？

> ID：12545561
> 
> 赞同：1
> 
> 时间：2012-09-22T16:22:39.637
> 
> 标签：javascript, html, speech-to-text, voice-recording

我有一个项目，我希望用户在浏览器中录制语音。我知道，对于录制音频，我可以使用 getUserMedia，对于语音到文本输入，我可以使用 x-webkit-speech。我对浏览器的限制没问题。有没有一种方法可以一步完成？

我更喜欢 HTML5 解决方案，但如果这是唯一的方法，我愿意使用 javascript。如有必要，我也愿意考虑服务器端解决方案（LAMP 环境）。这可能只能在笔记本电脑/台式机浏览器上访问，但如果我也可以使其与移动设备兼容，那也很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:45:40.087

好吧，getUserMedia 是一种 HTML5 解决方案，因为它是 WebIDL 的一部分，它可能成为 ECMAScript 的一部分，ECMAScript 是 HTML5 新脚本 API 的一部分。

除此之外，您可能想看看[https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)

所有这些都处于草稿状态，正在大力开发中。

x-webkit-speech 实际上并不是一个太差的选择，尤其是在无法运行繁重的 javascript 的移动设备上。

请让我了解您的最新进展。使用所有这些新的人类浏览器交互 API 的人并不多。

# asp.net-mvc - 在没有主键的情况下使用 Find 在 dbSet 中查找记录

> ID：12545565
> 
> 赞同：31
> 
> 时间：2012-09-22T16:23:38.477
> 
> 标签：asp.net-mvc, linq, entity-framework

我有一个用户表：

```
Users:
 +ID
 +Username
 +... 
```

我想用`myDBContext.Users.Find(Username)`find一个用户。在我目前的情况下，我不能使用他的 ID。

我必须使用完整的 LINQ 查询吗？例如

```
var user = from users in myDBContext.Users.Find(Username) 
           where users.Username == username
           select users 
```

我还尝试将用户名定义为我的 edmx 中的主键，但这导致了以下错误：

> 主体角色用户引用的属性必须与关系 CamelotShiftManagementModel.AssociationUserFK1 的关系约束中主体角色引用的 EntityType CamelotShiftManagementModel.User 的键完全相同。确保在 Principal Role 中指定了所有关键属性。C:\Code\CamelotShiftManagement\CamelotShiftManagement\Models\CamelotDB.edmx 278 11 CamelotShiftManagement

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-23T05:06:21.510

尝试，

```
User myUser = myDBContext.Users.SingleOrDefault(user => user.Username == username); 
```

使用`SingleOrDefault`insted 的`Single`。如果用户不存在，`Single`则会抛出错误。如果未找到用户，`SingleOrDefault`则将返回`null`，否则`User`将返回对象。

**`SingleOrDefault`在和之间选择`FirstOrDefault`**

您可以使用`SingleOrDefault`and获取用户对象，`FirstOrDefault`但在选择要使用的方法时请考虑以下几点。

*   如果存在，则两者都只从集合/数据库返回一个值，否则返回默认值。
*   但是，如果您有多个同名用户，并且您希望在执行 LINQ 查询时遇到异常，那么请使用`SingleOrDefault`，因为如果有多个可用元素，它将引发异常。
*   如果您不想要异常和/或您不想检查您的集合/数据库是否有重复数据，只想从集合/数据库中获取第一个值，然后使用`FirstOrDefault`以获得更好的性能比较`SingleOrDefault`

**`FirstOrDefault`**

*   通常`FirstOrDefault`或`First`在我们需要集合或数据库中的单个值（第一个）时使用。
*   在 First / FirstOrDefault 的情况下，仅从数据库中检索一行，因此它的性能略好于 single / SingleOrDefault。如此小的差异几乎不会引起注意，但是当表包含大量列和行时，此时性能是显而易见的。

**其他一些备注**

*   如果是主键，那么我认为和性能`username`之间不会有（显着）差异，因为主键具有索引并且对索引列的搜索总是比普通列快。`SingleOrDefault``FirstOrDefault`
*   `Single`或者`SingleOrDefault`会生成一个像“SELECT ...”这样的常规 TSQL。
*   `First`or方法将`FirstOrDefault`生成 TSQL 语句，如“SELECT TOP 1...”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T16:37:39.360

我找到了它：

```
User myUser = myDBContext.Users.Single(user => user.Username == i_Username); 
```

# java - 如何在不调用exit() 的情况下销毁Processing PApplet？

> ID：12545570
> 
> 赞同：2
> 
> 时间：2012-09-22T16:24:35.853
> 
> 标签：java, destructor, processing, finalizer

我正在开发一个在不同窗口中运行的处理程序。On 持有控制器，这是主要的*PApplet*，另一个正在运行一些 OpenGL 并且也是*PApplet*的子类。

创建 OpenGL 窗口的实例并不太难，但是如何在`destroy()`不调用`exit()`和终止整个进程的情况下创建它。我只想关闭第二个窗口并释放它的所有资源。

我找不到任何合适的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:00:20.353

呼叫`PApplet.destroy()`本身不会引起`System.exit()`呼叫。但是，关闭`Frame`您的 PApplet 运行的位置。您应该能够调用`PApplet.destroy()`终止主`PApplet`动画线程，然后调用`frame.setVisible(false)`关闭窗口而不触发`System.exit()`调用。

换句话说，尝试：

```
destroy();
frame.setVisible(false); 
```

# android - Android 音效限制为 5 个频段

> ID：12545571
> 
> 赞同：8
> 
> 时间：2012-09-22T16:24:46.330
> 
> 标签：android, audio, equalizer

我为我的应用程序使用 Android[音频效果/均衡器 API](http://developer.android.com/reference/android/media/audiofx/Equalizer.html)。但是，它限制为 5 个频段。是否有任何文档/库可以帮助调整更多频段以实现更精细的均衡器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T08:22:50.210

> 它会因设备而异，`getNumberOfBands`告诉您**均衡器效果**的数量。有些设备有 5,8 和 13 等。

```
Equalizer equalizer = new Equalizer(0,mediaplayer.getAudioSessionId());

equalizer.setEnabled(true);

equalizer.getNumberOfBands(); //it tells you the number of equalizer in device. 
```

也看看[**这个**](https://stackoverflow.com/a/30477747/3496570)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-28T17:10:02.223

这个问题很久以前就问过了。这是未来寻求答案的人们的解决方案。我找到了这个提供 10band Equalizer 的 android 库。

在三个不同的设备上使用 Android 的 Equalizer Api 我能够得到以下结果：

1) 三星 Galaxy Note 3 (5 频段)

2) 华为 Mate 8（5 频段）

3) Nexus 5（5 个频段）

使用[这个](https://github.com/h6ah4i/android-openslmediaplayer)库，我可以在上述所有设备上获得 10 个波段。我已经对其进行了测试，并且效果很好。

[将此](https://github.com/h6ah4i/android-openslmediaplayer)库包含在您的项目中。并使用以下代码拥有一个 10 频段的均衡器。

```
IMediaPlayerFactory mediaPlayerFactory = new OpenSLMediaPlayerFactory(getApplicationContext());
IBasicMediaPlayer mediaPlayer = mediaPlayerFactory.createMediaPlayer();
IEqualizer equalizer = mediaPlayerFactory.createHQEqualizer();
/* This returns 10 bands exactly like Poweramp music app does */
int numOfBands = equalizer.getNumberOfBands(); 
```

这个库有文档，你也可以参考。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T22:53:29.957

频段的数量及其中心频率取决于手机。均衡器实现被烘焙到 ROM 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T21:31:20.960

您可以尝试使用[sasken-player](https://code.google.com/p/sasken-player/source/browse/)，它是均衡器的重新实现，可为您提供 10 个频段

# c# - 构造函数和属性

> ID：12545575
> 
> 赞同：0
> 
> 时间：2012-09-22T16:25:11.627
> 
> 标签：c#, exception, properties

```
public Planet(string planetName,string planetLocation,string distance)
{
    //Is this okay to do in C#?
    Name = planetName;
    this.planetLocation = planetLocation;
    this.galaxy = galaxy;

    // etc.
}

public String Name
{
    get
    {
        return planetName;
    }
    set
    {
        if (value == null)
        {
            throw new ArgumentNullException("Name cannot be Null");
        }

        this.planetName = value;
    }
} 
```

我创建了这个简单的例子来说明我的意思。

1.  C# 构造函数可以调用自己的 Getter/Setter 属性吗？如果 Name 为 null，则将抛出 ArgumentNullException。

2.  如果不建议从构造函数中调用setter属性，那么如何在构造函数中实现异常来保证name字段不为空呢？或者换句话说，如果我说 Planet myPlanet = new Planet(null,"9999999","Milky Way"); 如果以这种方式创建对象，如何确保引发异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:30:00.933

1.  是的，没关系。

2.  任何调用 setter 的代码都会抛出异常。除了在构造函数中设置属性，您还可以使用初始化器设置它：

      `// Will also throw`
      `var planet = new Planet("999999","Milky Way"){ Name = null };`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:34:03.557

1）我不知道在构造函数中调用属性是否很常见，但为什么不这样做呢？我个人直接在我的构造函数中调用所有变量。

2）您可以简单地在构造函数中执行此操作：

```
if(planetname == null)
    throw new ArgumentNullException("bla");
this.planetname = planetname; 
```

所以每次都`planetname`等于`null`a`ArgumentNullException`被抛出。如果不是，`null`则将该值分配给`planetname`.

```
public string Name
{
    get{ return name; }
    set
    {
        value != null ? name = value : throw new ArgumentNullException("Bla");
    }
} 
```

我就是这样做的。也许它有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T16:29:53.670

可以在您的代码中调用 Set/Set 属性，但按照*合同设计*，在构造函数中检查 null 的更好方法：

```
public Planet(string planetName,string planetLocation,string distance) 
{ 
    if (string.IsNullOrEmpty(planetName))  
         throw new ArgumentNullException("Name cannot be Null"); 

    Name = planetName; 
    // More code lines
} 

public String Name {get; private set; } 
```

P/S：IMO，在字段上使用属性的最佳实践，除非您真的需要，否则不要在属性中添加更多代码，只需保持简单，如下所示：

```
public String Name {get; private set; } 
```

# c - C中指向结构与malloc的指针？

> ID：12545576
> 
> 赞同：0
> 
> 时间：2012-09-22T16:25:26.517
> 
> 标签：c

```
#include<stdio.h>

typedef struct telephone
{
    char *name;
    int number;
} TELEPHONE;

int main()
{
    //TELEPHONE index;
    TELEPHONE *ptr_myindex;
    ptr_myindex = (TELEPHONE*)malloc(sizeof(TELEPHONE)); 
    //ptr_myindex = &index;

    ptr_myindex->name = "Jane Doe";
    ptr_myindex->number = 12345;
    printf("Name: %s\n", ptr_myindex->name);
    printf("Telephone number: %d\n", ptr_myindex->number);

    free(ptr_myindex);

    return 0;
} 
```

当我编译它时，它输出的结果与我不动态分配指向结构的指针时的结果相同，而是使用我的代码中已被注释掉的部分。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:29:01.200

当您声明：

`TELEPHONE index`

编译器知道结构`TELEPHONE`是什么类型，因此它分配该结构所需的内存。

例如：

```
int a = 5;
int *p = &a; 
```

这是完美的。但是如果我们想在没有 的情况下达到同样的效果`int a = 5`，我们应该执行以下操作：

```
int *p;
p = (int*)malloc(sizeof(int));
*p = 5; 
```

硬是有区别的。第一个代码在 中分配变量`stack`，而第二个代码在中分配变量`heap`。但是在第二种情况下，在 之前没有为结构分配空间`malloc`，唯一分配的空间是指针本身（不需要与结构本身相同的空间）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:28:40.047

您的两个版本的代码执行以下操作：

1.  在堆上分配结构。
2.  将结构分配为局部变量。

这些选项在此程序中可以互换。分配给结构然后打印的代码不关心结构是堆分配的还是局部变量。

# c++ - 这段代码中冒号“:”的含义和用法是什么？

> ID：12545581
> 
> 赞同：-1
> 
> 时间：2012-09-22T16:26:05.830
> 
> 标签：c++, class

抱歉标题含糊。我正在做一个需要一些 C++ 知识的项目。我不学习 C++，也没有时间阅读一本书。所以我希望有人足够好，可以给我一个起点来查找它。

这是代码：

```
TurtlebotTeleop::TurtlebotTeleop(): ph_("~"), linear_(1),angular_(0){
   ph_.param("axis_linear", linear_, linear_);
   ph_.param("axis_angular", angular_, angular_);
   ph_.param("axis_deadman", deadman_axis_, deadman_axis_);
   ph_.param("scale_angular", a_scale_, a_scale_);
   ph_.param("scale_linear", l_scale_, l_scale_);
} 
```

我知道这段代码正在定义一个方法“TurtlebotTeleop”。但是冒号“：”之后的那些东西是什么？

非常感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:27:30.807

它是一个构造函数初始化列表。它是用于初始化类的数据成员的语法。

“代码块”是默认构造函数的定义`TurtlebotTeleop`。`:`和之间`{`是该类的一些数据成员的初始化。一旦进入构造函数的主体（在`{`and之间`}`），所有数据成员都有一个值，并且无论您对它们做什么都是对现有实例的更改，而不是初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:29:41.127

该函数是类的构造函数，构造函数必须做的一件事就是初始化类的每个成员。

单冒号后面的内容是用于初始化类成员的简短语法。所以当这个构造函数运行时 ph_ 将被设置为“~”。

# node.js - NodeJS 提取 tbz 文件并保存到磁盘

> ID：12545585
> 
> 赞同：1
> 
> 时间：2012-09-22T16:26:41.550
> 
> 标签：node.js

想知道如何使用 Node JS 提取 tbz 文件并保存到磁盘。示例代码将不胜感激。

尝试过这样的事情：

```
var zlib = require('zlib');
var fs = require('fs');

var file = fs.createReadStream('/tmp.tbz');
var zip = file.pipe(zlib.createUnzip());

zip.on("data", function(data) {
  console.log(data);
});

zip.on("error",function(error){
    console.log(error);
}); 
```

但最终得到：

```
{ [Error: incorrect header check] errno: -3, code: 'Z_DATA_ERROR' } 
```

不确定我是否正确地做到了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:29:26.353

没有找到用于提取 tbz 文件的节点库，因为我使用 zlib、node-tar 等进行了测试。最终使用 'tar' 命令得出了这个 hack。

```
var util  = require('util'),
    spawn = require('child_process').spawn,
    ls    = spawn('tar', ['-C','/home/tony/Desktop','-xvf', '/home/tony/Desktop/tmp.tbz']);

ls.stdout.on('data', function (data) {
  console.log(data);
});

ls.on('exit', function (code) {
  console.log('child process exited with code ' + code);
}); 
```

我暂时接受我的答案，直到更好的答案出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-06T19:45:20.050

它似乎`.tbz`是 bzip2，因此您可以使用此模块：`https://www.npmjs.com/package/unbzip2-stream`提取数据。

我能够提取这样的`.tbz`文件：

```
fs.createReadStream(sourceFileName)
  .pipe(bz2())
  .pipe(fs.createWriteStream(destinationFileName)) 
```

# css - Firefox 和 IE 中的 -webkit-box-reflect - CSS

> ID：12545587
> 
> 赞同：6
> 
> 时间：2012-09-22T16:26:58.630
> 
> 标签：css, firefox, google-chrome, webkit

我对 CSS 中的反射等还是很陌生，所以对此有一些问题。对于主页，我被告知我需要反映文本，然后是图像（以及后面的复杂阴影，但这在我的待办事项列表中）。

对于 chrome/safari (webkit) 我有

> -webkit-box-reflect: 低于 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(70%, transparent), to(rgba(255,255,255,0.2)));

看起来很不错......但是......显然它只适用于 chrome/safari。我将如何在 Internet Explorer（如果可能的话，7/8/9）和 Firefox 中获得相同的效果？

谢谢，尼古拉斯卡特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:34:21.943

您应该使用`-moz-element`Firefox 的属性。

为了反思，它将是：

```
#reflection {
  /* It's a copy of the original element... */
  background: -moz-element(#reflected-element)
              bottom left no-repeat;

  /* ... turned upside down ... */
  -moz-transform: scaleY(-1);

  /* ... with a gradual fade-out effect towards the bottom. */
  mask: url(#reflection-mask);
} 
```

[什么是-moz-元素？](https://developer.mozilla.org/en-US/docs/CSS/element?redirectlocale=en-US&redirectslug=CSS%2F-moz-element)

[参考](http://hacks.mozilla.org/2010/08/mozelement/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:31:30.743

[也许你可以用这个插件](http://www.digitalia.be/software/reflectionjs-for-jquery)提供一个 jQuery 后备。

本教程还讨论了[跨浏览器反射](http://blog.gface.com/2012/02/22/crossbrowser-css3-reflections/)。

* * *

要定位不支持反射的浏览器，您可以使用[Modernizr](http://modernizr.com)。

此版本： http: [//modernizr.com/download/#-cssreflections-cssclasses-testprop-testallprops-domprefixes](http://modernizr.com/download/#-cssreflections-cssclasses-testprop-testallprops-domprefixes)`no-cssreflections`将向您的页面`<html>`标签添加一个类。

然后，您可以添加特定的 CSS 规则：

```
.no-cssreflections #element-id {
    /* custom CSS rule */
} 
```

或通过 JavaScript：

```
if(!Modernizr.cssreflections){
    /* run plugin or whatever */
} 
```

# c - 如何计算 C 中的数组元素？

> ID：12545589
> 
> 赞同：2
> 
> 时间：2012-09-22T16:27:03.603
> 
> 标签：c

我制作了一个 DFA 模拟器。

如果节点 0 是初始状态，节点 3 是最终状态，如权重图实现。

```
char CurrentStateAccept[stateN][alphabetN][alphabetN] = { {"01"} , {"0"} , {"0","1"} ,{} }; // 0, 1, 2, 3
int NextState[stateN][alphabetN] = {{1},{2},{0,3},{}}; 
```

我想得到 1, 1, 2, 0

*   节点 0，接受（0 或 1）-> 节点 1
*   节点 1，接受（0）-> 节点 2
*   节点 2，接受（0）-> 节点 0
*   节点 2，接受（1）-> 节点 3
*   节点 3 是 dfa 的最终状态。

所以我想获取 char CurrentStateAccept[每个状态] 的元素号以使用“for loop”ex）

```
for(i=0; i<currentState element num; i++)
{
   for(j=0; j<end of alphabet of each element; j++)
   {
       there is acceptable state? or not?
   }
} 
```

我怎样才能进入C？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:29:04.850

你的意思是这样的

```
sizeof(array)/sizeof(type of array); 
```

# jquery - 在视图中呈现 JSON 数据 - 播放框架

> ID：12545595
> 
> 赞同：2
> 
> 时间：2012-09-22T16:27:41.180
> 
> 标签：jquery, model-view-controller, playframework, playframework-1.x

我是新手。我正在使用 renderJSON 来生成 JSON 数据。如何在我的视图中访问这些数据。我试过渲染（“视图”，jsonobject）。当我试图在 jquery 脚本中访问这个对象时，这里没有收到任何数据。

我尝试了一个ajax调用。以下方法在我的控制器中

```
public static void getJSONWords(){
 .......
 render(jsonObject);
}

public static void wordcloud(){
    render();
} 
```

我的观点“wordcloud.html”制作了一个ajax

```
 $.ajax({

    url: "/getJSONWords",
    dataType : 'json',
    success: function (data) {
             .......
            }); 
```

但我没有为我们的 ajax 调用获得任何数据。我尝试使用 Firfox 调试器，检查日志文件 ajax 调用是否正在调用相应的控制器操作。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:21:10.547

`renderJSON`将 JSON 直接返回给浏览器，不会被 View 处理。

如果你想在你的视图中访问 jsonObject，那么你可以这样做

```
render(jsonObject); 
```

这会将 json 对象传递给您的视图，并将其作为`jsonObject`. 因此，在您的视图中，您可以执行类似的操作。

```
<script>
   var data = ${jsonObject.raw()};
   $(document).ready(function() {
      // process your JSON once the rest of the document is rendered
   });
</script> 
```

请注意，我`raw()`用来防止特殊字符被转义。

UDPATE：在您更新后提供更多信息……您的 AJAX 调用中的路由似乎不正确。它应该看起来像...

```
 $.ajax({

    url: "@{Application.getJSONWords}",
    dataType : 'json',
    success: function (data) {
             .......
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:40:28.687

您是否尝试过在[此处](http://www.playframework.org/documentation/1.2.5/ajax)和[此处](http://www.playframework.org/documentation/1.2.5/tags#jsaction)`#{jsAction /}`记录的视图中使用标签。该标记旨在*透明地从控制器获取方法定义*。该文档显示了许多有关其用法的示例，因此我想这将有助于您处理问题。

# javascript - 如何创建一个矩形框，迫使我单击一个选项以查看更多内容

> ID：12545596
> 
> 赞同：1
> 
> 时间：2012-09-22T16:27:44.263
> 
> 标签：javascript, jquery, asynchronous

我知道如何注册单击的选项，以及如何显示下一个内容。

我想做的是这样的：

![](../Images/fb92134afd77d856ef0d9c636996ce98.png)

（不要关心设计）现在您需要单击一个选项才能查看下一个内容。

这是一个网站只需要知道应该使用哪种语言，也许是jquery？如果有任何帮助戒烟。不想重新加载页面只是框。

我有 php 和一些 css 和 html 的知识，但 javascript 和 jquery 不是太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:19:02.837

这是一个例子：

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
        <style type="text/css">
            .choices { padding-left: 30px; padding-right: 30px; margin: 10px; }
            .enabled { background-color: #ff0000; color: #FFFF00 }
            .disabled { background-color: #ddd; color: #fff }
            .choosed { background-color: #ffd; color: #000 }
            .options { display:none; background-color: #fffff0}
        </style>
        <script type="text/javascript">
            $(document).ready(function() {
                  $('.choices').addClass('enabled');
                  $('.choices').click( function(){
                    $($(this).attr('href')).slideDown();
                    $('.choices').unbind('click').removeClass('enabled').addClass('disabled');
                    $(this).removeClass('disabled').addClass('chossed');
                  })
            });
        </script>
    </head>
    <body>
        <a class="choices" href="#target1">A</a>
        <a class="choices" href="#target2">B</a>
        <a class="choices" href="#target3">C</a> <br/>
        <div class="options" id="target1">You clicked option A</div>
        <div class="options" id="target2">You clicked option B</div>
        <div class="options" id="target3">You clicked option C</div>
    </body>
</html> 
```

# asp.net - 无法将“System.DBNull”类型的对象转换为“System.String”类型。

> ID：12545599
> 
> 赞同：0
> 
> 时间：2012-09-22T16:28:17.617
> 
> 标签：asp.net, .net, sql, tsql

我手头有一个问题，我似乎无法弄清楚。我有这个触发 OnClick 的按钮。在这个事件中，我在 SQL 服务器中调用一个存储过程。在创建新记录之前，我会检查是否已经存在。如果是这样，那么我正在输出一个错误。这部分工作正常，但是当记录不存在时，我在 ASP.NET 中收到此错误：

“无法将‘System.DBNull’类型的对象转换为‘System.String’类型。”

任何帮助将非常感激

```
protected void createloctype_Click(object sender, EventArgs e)
{
    con.Open();
    cmd = new SqlCommand("sp_CREATE_LOCATION_TYPE", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add("@lt_code", SqlDbType.VarChar, 2).Value = loctype.Text;
    cmd.Parameters.Add("@lt_description", SqlDbType.VarChar, 50).Value = loctypedescription.Text;
    cmd.Parameters.Add("@lt_putaway_zone", SqlDbType.VarChar, 5).Value = putaway_zone_txt.Text;
    cmd.Parameters.Add("@lt_rule1", SqlDbType.VarChar, 5).Value = rule1_txt.Text;
    cmd.Parameters.Add("@lt_rule2", SqlDbType.VarChar, 5).Value = rule2_txt.Text;
    cmd.Parameters.Add("@lt_rule3", SqlDbType.VarChar, 5).Value = rule3_txt.Text;
    cmd.Parameters.Add("@lt_rule4", SqlDbType.VarChar, 5).Value = rule4_txt.Text;
    cmd.Parameters.Add("@lt_rule5", SqlDbType.VarChar, 5).Value = rule5_txt.Text;
    cmd.Parameters.Add("@lt_misc1", SqlDbType.VarChar, 500).Value = misc1_txt.Text;
    cmd.Parameters.Add("@lt_misc2", SqlDbType.VarChar, 500).Value = misc2_txt.Text;
    cmd.Parameters.Add("@lt_misc3", SqlDbType.VarChar, 500).Value = misc3_txt.Text;
    cmd.Parameters.Add("@lt_misc4", SqlDbType.VarChar, 500).Value = misc4_txt.Text;
    cmd.Parameters.Add("@lt_misc5", SqlDbType.VarChar, 500).Value = misc5_txt.Text;
    cmd.Parameters.Add("@lt_user", SqlDbType.VarChar, 10).Value = user;
    cmd.Parameters.Add("@error", SqlDbType.VarChar, 250);
    cmd.Parameters["@error"].Direction = ParameterDirection.Output;
    cmd.ExecuteNonQuery();                 
    message = (string)cmd.Parameters["@error"].Value;

    error_message.Text = message;

    con.Close();

} 
```

/存储过程/

```
USE [1_WMS]

GO

ALTER PROCEDURE [dbo].sp_CREATE_LOCATION_TYPE
@LT_CODE VARCHAR(5)
, @LT_DESCRIPTION VARCHAR(250)
, @LT_PUTAWAY_ZONE VARCHAR(5)
, @LT_RULE1 VARCHAR(5)
, @LT_RULE2 VARCHAR(5)
, @LT_RULE3 VARCHAR(5)
, @LT_RULE4 VARCHAR(5)
, @LT_RULE5 VARCHAR(5)
, @LT_MISC1 VARCHAR(20)
, @LT_MISC2 VARCHAR(20)
, @LT_MISC3 VARCHAR(20)
, @LT_MISC4 VARCHAR(20)
, @LT_MISC5 VARCHAR(20)
, @LT_USER VARCHAR(20)
, @ERROR VARCHAR(250) OUT

AS
DECLARE
    @LT_DATE VARCHAR(10)
    , @LT_TIME VARCHAR(8)
    , @LT_ROW_COUNT INT

SET @LT_DATE = CONVERT(VARCHAR(10), GETDATE(),101)
SET @LT_TIME = CONVERT(VARCHAR(8), GETDATE(),114)   

/* CHECK FOR EXISTING */
SELECT @LT_ROW_COUNT = COUNT(*)
    FROM LOC_TYPE(NOLOCK)
WHERE lt_code = @LT_CODE

/*  */
IF @LT_ROW_COUNT = 0
    BEGIN
        INSERT INTO LOC_TYPE
            (
                lt_code             , lt_description            , lt_putaway_zone               , lt_rule_1
                , lt_rule_2         , lt_rule_3                 , lt_rule_4                     , lt_rule_5
                , lt_misc1          , lt_misc2                  , lt_misc3                      , lt_misc4
                , lt_misc5          , lt_created_date           , lt_created_time               , lt_created_by
                , lt_modify_date    , lt_modify_time            , lt_modify_by  
            )
            VALUES
            (
                @LT_CODE            , @LT_DESCRIPTION           , @LT_PUTAWAY_ZONE              , @LT_RULE1
                , @LT_RULE2         , @LT_RULE3                 , @LT_RULE4                     , @LT_RULE5
                , @LT_MISC1         , @LT_MISC2                 , @LT_MISC3                     , @LT_MISC4
                , @LT_MISC5         , @LT_DATE                  , @LT_TIME                      , @LT_USER
                , @LT_DATE          , @LT_TIME                  , @LT_USER 
            )
    END

ELSE IF @LT_ROW_COUNT = 1
    BEGIN

        SET @ERROR = 'LOCATIOIN TYPE ALREADY EXIST'

        EXEC sp_CREATE_ERROR_MESSAGE
            'CRT_LTY'       , @ERROR            , @LT_CODE          , @LT_PUTAWAY_ZONE
            , @LT_RULE1     , @LT_RULE2         , @LT_RULE2         , @LT_RULE3
            , @LT_RULE4     , @LT_RULE5         , ''                , ''        
            , @LT_USER
    END

GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:32:08.187

试试短版`IF`

```
var result = cmd.Parameters["@error"].Value;
message = (result == DBNull.Value) ? string.Empty : result.ToString(); 
```

或者干脆

```
var result = cmd.Parameters["@error"].Value;
message = (result == DBNull.Value) ? string.Empty : result.ToString(); 
```

或者

```
var result = cmd.Parameters["@error"].Value;
message = ((result == DBNull.Value) || (result == DBNull.Value)) ? string.Empty : result.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:04:02.393

更短的替代方案：

```
message = cmd.Parameters["@error"].Value as string ?? ""; 
```

# python - 在 appengine 上通过 github 登录

> ID：12545611
> 
> 赞同：0
> 
> 时间：2012-09-22T16:29:17.097
> 
> 标签：python, google-app-engine, session, cookies, github

我想通过 github 实现登录/注册，用于我计划在**appengine**上构建的 python 应用程序。我浏览了文档，很容易对用户进行身份验证，并根据回调响应登录/注册用户。有几个 Python 库[http://developer.github.com/v3/libraries/](http://developer.github.com/v3/libraries/)可以帮助完成它。我*对自己实现登录/注册完全陌生*。只有一个问题，我是否也需要处理会话和/或 cookie。意思是，用户登录，关闭浏览器然后重新打开，可能他应该登录，我的应用程序不应该要求他登录两次？

这是照顾好，还是我需要编写一些中间件？如果是，您能否概述这些步骤或指向资源/文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:27:03.587

据我所知，访问 Github API 基本上是发送 HTTP 请求和接收响应，而 Google App Engine 允许标准 python 函数这样做
[https://developers.google.com/appengine/docs/python/urlfetch/overview](https://developers.google.com/appengine/docs/python/urlfetch/overview) .

所以我认为当前的 github 库可以在 GAE 上运行，无需修改或进行非常小的修改。唯一不起作用的是 PATCH 请求（GAE 不支持），但无论如何它们对您的情况无关紧要。

# google-apps-script - 如何检查文件当前是否打开

> ID：12545622
> 
> 赞同：1
> 
> 时间：2012-09-22T16:30:10.103
> 
> 标签：google-apps-script

对于时间记录应用程序，我将基于 Google 电子表格的许多时间表合并到一个大时间表中以运行统计数据。

一切都运行得很好，但今天我发现，发生了合并错误，因为用户正在编辑他的时间表，此时合并过程正在运行。

我如何知道用户当前是否打开了他的时间表？

有任何想法吗？

谢谢亨氏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T12:05:56.737

在处理电子表格对象之前，您可以使用[LockService](https://developers.google.com/apps-script/class_lockservice)查找并锁定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:40:41.487

您可以使用 DocsList 服务来获取最后更新时间，您可以使用它来避免由于合并时的编辑权而导致的错误。

例如

```
var lastUpdateTime = DocsList.getFileById('FileID').getLastUpdated(); 
```

# objective-c - 是否可以以字符串格式以外的标签显示日期？

> ID：12545624
> 
> 赞同：-1
> 
> 时间：2012-09-22T16:30:28.553
> 
> 标签：objective-c, ios, nsdateformatter

我是 iphone 开发的新手。在我的应用程序中，我将日期值分配给标签，但在执行应用程序时标签值没有改变。

```
NSDate *dateTemp = [[NSDate alloc] init];

cell.newlabel.text=dateTemp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:02:27.143

您只能将 NSString 放入 UILabel。要在 UILabel 中显示 NSDate，您必须先将其转换为 NSString。为此，您需要了解 NSDateFormatter。

# objective-c - 如何让我的 MPMoviePlayerController 横向播放？

> ID：12545626
> 
> 赞同：3
> 
> 时间：2012-09-22T16:30:36.850
> 
> 标签：objective-c, xcode, mpmovieplayercontroller, ios6

我正在尝试让我的 youtube 视频以横向模式播放。我关闭了左右横向以支持设备方向，因为如果它打开，每个视图都可以横向。我正在为 iOS 6 构建这个。如何让我的视频横向播放。

这是我的代码

```
#import "VideoTViewController.h"
#import "HCYoutubeParser.h"
#import <MediaPlayer/MediaPlayer.h>

@interface VideoTViewController ()

@end

@implementation VideoTViewController
@synthesize tLabel;

-(IBAction)playVideo
{

    NSDictionary *videos = [HCYoutubeParser h264videosWithYoutubeURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=zz_bJ58LfCg&feature=youtu.be"]];

    MPMoviePlayerViewController *mp = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:[videos objectForKey:@"medium"]]];

    [self presentViewController:mp animated:YES completion:nil];
} 
```

**编辑：**

我做了以下事情：

开了一个新班

AboutNavViewController（它是 UiNavigationController 的子类）

```
#import "AboutNavViewController.h"

@interface AboutNavViewController ()

@end

@implementation AboutNavViewController

- (BOOL)shouldAutorotate {
    return NO;
}

- (BOOL)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}
@end 
```

在我的 aboutviewcontroller （子类化 uiviewcontroller）

```
#import "AboutViewController.h"
#import "AboutNavViewController.h"

@interface AboutViewController ()

@end

@implementation AboutViewController
@synthesize aLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect frame = CGRectMake(0, 0, 320, 44);
    aLabel = [[UILabel alloc] initWithFrame:frame];
    aLabel.backgroundColor = [UIColor clearColor];
    [aLabel setFont:[UIFont fontWithName:@"SerifGothic LT Black" size:25]];
    aLabel.text = @"Sephardi Jews";
    aLabel.textAlignment = NSTextAlignmentCenter;
    aLabel.textColor =[UIColor whiteColor];
    self.navigationItem.titleView = aLabel;

    AboutNavViewController *about = [[AboutNavViewController alloc] init];

    [self presentViewController:about animated:YES completion:nil];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

@end 
```

我收到以下错误：

开始/结束外观转换的不平衡调用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T16:58:15.823

注意：您必须将横向左右添加到 Info.plist 中支持的界面方向才能正常工作。

> 系统通过将应用程序的supportedInterfaceOrientationsForWindow: 方法返回的值与最顶部全屏控制器的supportedInterfaceOrientations 方法返回的值相交来确定是否支持方向。

从上一个答案中添加了 iOS 6 自动旋转方法”

```
@interface MyMovieViewController : MPMoviePlayerViewController
@end

@implementation MyMovieViewController

- (BOOL)shouldAutorotate 
{
    return YES;
}

- (NSInteger)supportedInterfaceOrientations 
{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
}

@end 
```

# php - 表格中的日期并验证

> ID：12545631
> 
> 赞同：0
> 
> 时间：2012-09-22T16:31:22.973
> 
> 标签：php, date

我有点卡在这里如何为服务器的当前日期编写代码并验证它们。

所以基本上一个文件是 form.php，我必须在 dd/mm/yy 中编写服务器当前日期的代码，这可以由用户编辑。日期应以表单格式显示，例如在 Web 浏览器上应显示日期：[23/9/2012]。

在另一个文件 process.php 上，我必须验证日期。

所以对于我的 form.php，这是我到目前为止所写的：

```
<html>
<body>
 <?php
    if (isset ($_POST["date"])){
    $date = date("d/m/y"($_POST["date"]));
    echo $date;
    }
?>
<form action="form.php" method="POST">
Date: <input type="text" name="date" value="Date" />

</form>
</body>
</html> 
```

它在网络浏览器上显示的日期只是日期：[日期] 只是日期，而不是日期。为此，我被困了一个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:36:41.423

您可以使用正则表达式执行此操作：

```
 <?php
    if (isset($_POST['date']) && !empty($_POST['date'])) {
        $date = trim($_POST['date']);
    }

    $regex = '/^((([1-2][0-9])|([1-9]))/([2])/[0-9]{4})|((([1-2][0-9])|([1-9])|(3[0-1]))/((1[0-2])|([3-9])|([1]))/[0-9]{4})$/';
    if (preg_match($regex, $date)) {
        $disp_date = $date;

        //update the date in db
        $error = '';
    }
    else {
       $error = 'Invalid date format<br />';

       //get last date from db
       $disp_date = $date_from_db;
    }
    ?>
    <?=$error?>
    <form action="" method="POST">
        <input type="text" value="<?=$disp_date?>" name="date" />
        <input type="submit" value="Submit Date" />
    </form> 
```

正则表达式的工作原理：DD/MM/YYYY：DD 必须是 1-31，MM 1-12 和 YYYY 是 4 位数字。

编辑：修复了二月的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:46:11.000

尝试像这样格式化它

```
 <?php
      $date = new DateTime();
      echo $date->getTimestamp();
      echo $date->format('Y-m-d H:i:s');
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:37:49.053

```
<html>
<body>
<?php
   if(isset($_POST['date']) && strtotime($_POST['date'])){ # date validation
       $date = $_POST['date'];
   } else {
       $date = date('d/m/y');
   }        
?>
<form action="form.php" method="POST">
Date: <input type="text" name="date" value="<?php echo $date?>" />

</form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T16:39:58.800

你可以得到当前日期并像这样显示......

```
<html>
<body>
<?php
$today = date("j, n, Y");
?>
<form action="form.php" method="POST">
Date: <input type="text" name="date" value="<?php echo $today?>"/>
</form>
</body>
</html> 
```

您可以从此链接 [检查日期了解验证日期](http://php.net/manual/en/function.checkdate.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T16:42:25.053

你应该像这样重新排列你的程序：

```
<html>
<body>
 <?php
    if (!isset ($_POST["date"])){
        $date = date("d/m/y");
    else {
        $date = $_POST["date"];
    }
?>
<form action="form.php" method="POST">
Date: <input type="text" name="date" value="<?php echo $date; ?>" />

</form>
</body>
</html> 
```

在这里，您将让用户在第一个页面加载时看到当前时间服务器，然后再看到编辑过的时间服务器。

# regex - 如何搜索（谷歌）正则表达式

> ID：12545635
> 
> 赞同：2
> 
> 时间：2012-09-22T16:31:46.300
> 
> 标签：regex

**对我来说，这是关于正则表达式的最重要的问题，可能对其他一些人来说也是如此。**

我很少使用正则表达式。但是，每当我不得不处理一些复杂的正则表达式时，我发现甚至很难找到要搜索的单词。

除了正则表达式之外，我想不出编程中我可能会被困在搜索中的任何其他事情。这些领域的许多问题，您的知识/技能太少，只需很少的搜索即可轻松解决。但在正则表达式的情况下无法做这件事

例如我有一个有效的表达

```
Select * from sale  where Quantity < '10'  and Date <= curdate() and
Date >= date_sub(curdate(), interval 3 month) 
```

我已允许用户修改此查询，但修改后我想验证用户除了关系运算符和关系运算符之后的值之外什么都没有更改。正则表达式就像

```
Select .+ from sale  where Quantity [<|>|=|(<=)|(>=)] .+  and Date 
[<|>|=|(<=)|(>=)] .+ and Date [<|>|=|(<=)|(>=)] (string not containing any join) 
```

这个具体问题已经解决了。实际问题是关于正则表达式的一般问题。

对于这样的问题，我只能想到两种解决方案

1.  具备良好的正则表达式知识/技能/概念
2.  去论坛问问。

在所有其他情况下，我通常在不阅读教程等的情况下从搜索中获得帮助，除了一些非常典型/独特/新型的技术。但是**对于正则表达式，搜索似乎不是可靠的解决方案，因为它们大多是唯一的。是吗？如何？**

这并不意味着我反对阅读教程。我为 Regex 做自己，也许比其他事情更多（因为我们在课程中没有充分阅读它们）但仍然面临问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:41:15.833

好吧，按照你的推理，有人可能会争辩说不可能搜索 SQL 表达式，因为数据库模式是唯一的，所以不会有任何命中。然而它实践它运作良好。

您必须寻找概念和想法，而不是寻找非常具体问题的实际解决方案。

当然，您必须了解*基础知识*。如果您无法*命名*您正在寻找的东西，那么搜索它们是不可能的。

对于您的示例，这是一个实用的搜索：[https](https://www.google.co.uk/search?q=regexp+match+either+or) ://www.google.co.uk/search?q= regexp+match+either+or 第一次点击：“Regex Tutorial - Alternation with The Vertical Bar”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:41:19.747

你可以做三件事：

1.  为您的特定正则表达式风格打开正则表达式备忘单。
2.  使用工具为您提供即时反馈并“改进”表达式，而不是尝试一次构建所有表达式。我使用[Regexpal](http://regexpal.com/) cuz，它是免费的。
3.  编写您自己的测试台来试验不同的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T18:11:07.490

您可以轻松地提出有关编程问题的问题，因为您了解基本概念：循环、函数、列表、哈希、模块、字符串、输入、输出、文件 - 您了解基本词汇，因此您知道如何提出编程问题。

但是您并不是从无到有地获得这些知识——在某一时刻，您必须学习基础知识。这很容易忘记，因为您认为它们是理所当然的。

使用正则表达式，可以学习许多新概念，新词汇。突然之间，出现了新词，如组、交替、锚点、懒惰和贪婪的量词、环视、原子分组、捕获等等……你不会绕过学习这些新词汇，所以你可以提出有意义的问题。

熟悉基本概念并不难。使用一个体面的教程（http://www.regular-expressions.info），用你最喜欢的语言玩正则表达式，使用在线正则表达式测试器......就我个人而言，我几乎从每天使用 RegexBuddy 中学到了关于正则表达式的所有知识. 来自 StackOverflow。

你可以在这里问基本的正则表达式问题，每天都有很多。通常只有那些很明显海报没有在他们身上付出一点努力的人才会被否决。

# c++ - 从 C++ 中的字节数组中提取非零索引的最快方法是什么

> ID：12545638
> 
> 赞同：7
> 
> 时间：2012-09-22T16:32:20.243
> 
> 标签：c++, algorithm

我有一个字节数组

```
unsigned char* array=new unsigned char[4000000];
 ... 
```

我想获取数组中所有非零元素的索引。

当然，我可以做以下

```
for(int i=0;i<size;i++)
{
    if(array[i]!=0) somevector.push_back(i);
} 
```

有没有比这更快的算法？

**更新 1**我可以看到大多数答案是否定的。我希望有一些我不知道的神奇位操作。有些人建议进行排序，但在这种情况下不可行。但非常感谢您的所有回答。

**更新 2**自发布此问题 4 年零 4 个月后，@wim 提出[了这个看起来很有希望的答案](https://stackoverflow.com/a/41958528/749973)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:36:00.787

除非您的向量是有序的，否则如果您使用单线程程序，这是执行您想要执行的操作的最有效算法。您可以尝试优化要存储结果的数据结构，但及时这是您能做的最好的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:00:13.793

如果非零值相对较少，您可以使用的一个技巧是哨兵值：

```
unsigned char old_value = array[size-1];
array[size-1] = 1; // make sure we find a non-zero eventually

int i=0;

for (;;) {
  while (array[i]==0) ++i; // tighter loop
  if (i==size-1) break;
  somevector.push_back(i);
  ++i;
}

array[size-1] = old_value;
if (old_value!=0) {
  somevector.push_back(size-1);
} 
```

这避免了在每次迭代时都检查索引和值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T17:06:56.360

对于一个大部分为零的字节数组，作为一个稀疏数组，您可以通过一次比较 4 个字节来利用 32 位 CPU。实际比较一次完成 4 个字节，但是如果任何字节不为零，那么您必须确定 unsigned long 中的哪些字节不为零，这样会花费更多的精力。如果数组真的很稀疏，那么通过比较节省的时间可以补偿确定哪些字节非零的额外工作。

最简单的方法是将 unsigned char 数组的大小设置为 4 字节的倍数，这样您就不必担心循环完成后的最后几个字节。

我建议对此进行时序研究，因为这纯粹是推测性的，并且会有一个点数组变得不够稀疏，以至于这比简单的循环需要更多的时间。

我会遇到的一个问题是，您对数组的非零元素的偏移量向量做了什么，以及您是否可以取消该向量。另一个问题是，如果您需要向量，是否可以在将元素放入数组时构建向量。

```
unsigned char* array=new unsigned char[4000000];
......
unsigned long *pUlaw = (unsigned long *)array;

for ( ; pUlaw < array + 4000000; pUlaw++) {
    if (*pUlaw) {
        // at least one byte is non-zero
        unsigned char *pUlawByte = (unsigned char *)pUlaw;
        if (*pUlawByte)
            somevector.push_back(pUlawByte - array);
        if (*(pUlawByte+1))
            somevector.push_back(pUlawByte - array + 1);
        if (*(pUlawByte+2))
            somevector.push_back(pUlawByte - array + 2);
        if (*(pUlawByte+3))
            somevector.push_back(pUlawByte - array + 3);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T16:34:45.887

提高速度的唯一方法是使用并发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T16:42:50.657

这并不是您问题的真正答案，但我试图想象您要解决的问题。

有时在对矩阵执行运算时（在数学意义上），当您知道绝大多数矩阵元素将为零（稀疏矩阵）时，可以改进运算。您完全不使用大数组，而是简单地存储指示非零元素的对 {index, value} 来进行这样的优化。

# android - 如何在字幕文本上打开新活动？

> ID：12545641
> 
> 赞同：1
> 
> 时间：2012-09-22T16:32:40.727
> 
> 标签：android, android-layout

我有从数组列表中显示朋友姓名的选框。我想在点击我朋友的任何名字时打开新活动。

我已经完成以下操作以在选取框中显示数组列表

```
tv.setText("");
    for(int i=0;i<c_name.size();i++){
        tv.append(c_name.get(i)+" | ");
    }

    tv.setSelected(true); 
```

我有这样的选框

姓名 1 | 姓名 2 | 姓名 3 | 姓名 4 | ……

现在我想通过点击名称打开新活动。我知道在 ListView 中使用时如何打开新活动，但对选取框一无所知。

先谢谢了。

# extjs - 单元格编辑网格加载器路径

> ID：12545644
> 
> 赞同：1
> 
> 时间：2012-09-22T16:33:01.430
> 
> 标签：extjs, extjs4, extjs4.1

我在我的应用程序中使用单元格编辑网格。js文件有这个：

```
Ext.Loader.setPath('Ext.ux', '../ux'); 
```

我的工作区中相对路径的替代品是什么？

```
../ux 
```

我尝试使用：

```
F:\Softwares\EclipseForJavaScript\extjs-4.1.1\examples\ux 
```

但没有奏效

请帮忙。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:20:07.673

加载程序在本地不工作。您需要在 IIS 或 Apache 等网络服务器中运行您的应用程序。加载器将接受相对路径。相对意味着相对于您的网络服务器根路径/脚本路径。

# xcode - 无法实例化名为 UIRefreshControl Xcode 的类

> ID：12545645
> 
> 赞同：0
> 
> 时间：2012-09-22T16:33:10.683
> 
> 标签：xcode, ipad, ios6, uirefreshcontrol

我正在 tableview 上构建一个 RSS 提要。当我运行该应用程序时，我的 iPhone 在 ipad 上可以顺利运行，它崩溃并显示“由于未捕获的异常 'NSInvalidUnarchiveOperationException' 而终止应用程序，原因：'无法实例化名为 UIRefreshControl 的类'”

我尝试在我的 ipad 模拟器上运行该应用程序，它也可以顺利运行。我可以知道这是什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T16:43:17.413

`UIRefreshControl`仅存在于 iOS 6。因此，如果您的 iPad 运行的是 5.1.1，您将无法使用`UIRefreshControl`，因为`UIRefreshControl`在 iOS 5.1.1 中不存在。因此，当 nib 解码发生时，解码器发现`"UIRefreshControl"`，它不知道如何处理它，并且它崩溃了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T18:46:24.783

在您的故事板中，单击 tableview 并转到 Attribute Inspector。在“TableView Controller”部分下有一个“Refreshing”选择窗口，可以设置为禁用。当我为 iPad-1 构建并运行 iOS 5.1 时，我得到了一个空的 tableView 而不是错误，“无法实例化名为 UIRefreshControl 的类”。这是意料之中的，因为我还没有在设备中填充要选择的文件。

# javascript - 内联 javascript 会阻止 UI 线程吗？

> ID：12545653
> 
> 赞同：2
> 
> 时间：2012-09-22T16:34:01.917
> 
> 标签：javascript, blocking, nonblocking, src, ui-thread

我阅读了这篇关于[外部脚本如何阻塞 UI 线程的](http://www.nczonline.net/blog/2010/08/10/what-is-a-non-blocking-script/)好文章，但我不清楚阻塞实际上是由于存在`<script>`标记还是`src='/myscript.js'`src 属性。

我的问题是内联 javascript（缺少 src 属性声明），例如：

```
<script type='text/javascript'> alert('am i blocking too?');</script> 
```

或这个：

```
<script type='text/javascript'> var php='<?=json_encode($myObj)?>';</script> 
```

还阻塞了UI线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T16:41:19.250

任何 JS 文件的加载或任何 JS 的任何执行*（*无论是在外部文件中还是在内联文件中）都会阻塞 UI 线程。

标记的例外`<script>`是异步加载，其中脚本将在后台异步加载和执行。

还有“延迟”加载（即`defer`属性），它告诉浏览器在页面的其余部分加载之前不要实际执行其中的 JS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T16:43:33.463

在`web workers`它们自己的野兽之外，将 HTML 网页和相关的 Javascript 视为单线程。 [1]

因此，如果页面上正在运行*任何*javascript，则整个用户界面都会被阻止。之类的东西`window.alert()`，`window.confirm()`并`window.prompt()`阻止整个 UI 直到它们被清除，但即使是无限循环也会冻结浏览器窗口 [2] 直到它完成。

**编辑 - 基于评论和编辑问题：**

原始问题中提供的链接不是指运行 JavaScript 的**执行**，而是指 JavaScript 加载的*同步*与*异步*性质。我将举一个例子说明为什么会发生这种阻塞。

在过去的 Javascript 时代，该函数`document.write()`是让 Javascript 与网页交互的唯一方法。因此，当网页遇到加载 Javascript 文件的请求时，浏览器必须暂停其他所有内容——以防 Javascript 文件用于`document.write`向流中注入某些内容。

在当今世界，这种情况发生得并不多，因此浏览器为页面设计者提供了一种方式来表达‘我保证这个 Javascript 文件并不关心它何时加载，它不会使用`document.write()`或任何其他棘手的事情。在完成之前，您不必冻结。

这就是现代网络浏览器具有 a`defer`和`async`属性的原因。

1.  Opera 很特别，但我们会忽略它。
2.  或整个浏览器，具体取决于

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:36:45.327

`alert()`或任何其他提示操作将阻塞线程，直到用户响应提示。不管他们在哪里...

更新（关于评论）：

浏览器窗口解析 HTML 并使用单个线程运行 JS。因此，javascript 代码中需要时间才能完成的任何内容都会阻塞线程。无论它是什么。它可以是 an`alert`或 an`AJAX Request`或其他任何东西..

# list - 枚举标志与字典相结合

> ID：12545656
> 
> 赞同：0
> 
> 时间：2012-09-22T16:34:03.800
> 
> 标签：list, optimization, dictionary, enum-flags

找不到一个简单的方法来定义我的问题，但我会尽力解释它。

我需要能够表示预定义项目的选择，我在程序中有数千个这样的选择实例，并且需要一个可以表示每个实例的项目选择的单个值（许多选择会重复）。

在这一点上，我使用 Enum 的第一个解决方案似乎还可以，但我似乎有一个问题...... Enum 标志表示为每个唯一项目一个位，并且 64 位是该语言可以处理 Enum (C#) 的最大值，并且我有任意数量的值需要设置和取消设置。

示例解决方案 1：

```
//Two dimensional map of instances
Instances[,]

//Item Enum Flags
Items { 0, 1, 2, 4 }

//Setting the selection
Instances[1000,1000].Selection.Set(Items.1)
Instances[1000,1000].Selection.Set(Items.2)

Instances[1000,1000].Selection.IsSet(Items.1) = true
Instances[1000,1000].Selection.IsSet(Items.2) = true 
```

我的第二个解决方案是构建一个选择列表并使用 ID 号在实例中引用此选择。

示例解决方案 2：

```
//Two dimensional map of instances
Instances[,]

//Dictionary 
Dictionary<ID, List<Item>> Selections

//Enum for items (not flags)
Item { 0, 1, 2, 3, 4, 5 }

//Item list add
List<Item> Items
Items.Add(Item.0)      
Items.Add(Item.1)

//Add Items to selections
Selections.Add(Items)

//Setting the selection
Instances[1000,1000].Selection = //ID of item list in Selections

//See if item is within selection
Selections[Instances[1000,1000].Selection].Contains(Item.1) 
```

该解决方案的要求是低内存使用（我正在为移动应用程序开发它），易于使用（我需要能够即时编辑它）。

考虑到我的要求，哪种解决方案是最好的，我怎样才能做到这一点，或者简化它以满足我的要求？

# iphone - 使用动态半径显示 MKMapView

> ID：12545658
> 
> 赞同：0
> 
> 时间：2012-09-22T16:34:11.020
> 
> 标签：iphone, ios, mkmapview, mapkit

我遇到了一个问题。我尝试了很多选项，但无法获得所需的确切结果。我的要求如下：

我必须为一组用户显示一个注释图钉。我正在从网络服务中获取用户并获取他们的纬度和经度，我能够在地图上完美地显示他们。但是，用户可以选择仅显示在自己半径 1000 米 (1 KM) 范围内的用户。

地图应缩放，以便仅显示 1KM 内的用户（可能进一步缩放，以便如果所有用户都在小于 1KM 的半径内，则缩放将是距最远用户的最大距离）。

我怎样才能用 MKMapView 做到这一点？

提前致谢。

阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:15:28.530

这个网站有一个关于设置缩放级别的非常有用的指南：

[http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)

# cuda - CUDA 中的空闲共享内存

> ID：12545662
> 
> 赞同：2
> 
> 时间：2012-09-22T16:34:15.663
> 
> 标签：cuda

是否有任何应用程序级 API 可用于释放 CTA 在 CUDA 中分配的共享内存？我想将我的 CTA 重用于另一个任务，在开始该任务之前，我应该清理上一个任务使用的内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T13:58:30.417

共享内存是在内核启动时静态分配的。您可以选择在内核中指定一个未分配大小的共享分配：

```
__global__ void MyKernel()
{
    __shared__ int fixedShared;
    extern __shared__ int extraShared[];
    ...
} 
```

第三个内核启动参数然后指定有多少共享内存对应于未分配大小的分配。

```
MyKernel<<<blocks, threads, numInts*sizeof(int)>>>( ... ); 
```

为内核启动分配的共享内存总量是内核中声明的数量加上共享内存内核参数加上对齐开销的总和。你不能“释放”它——它在内核启动期间保持分配状态。

对于经历多个执行阶段并且需要将共享内存用于不同目的的内核，您可以做的是使用共享内存指针*重用*内存 - 在未调整大小的声明上使用指针算术。

就像是：

```
__global__ void MyKernel()
{
    __shared__ int fixedShared;
    extern __shared__ int extraShared[];
    ...
    __syncthreads();
    char *nowINeedChars = (char *) extraShared;
    ...
} 
```

我不知道任何使用此习惯用法的 SDK 示例，尽管 threadFenceReduction 示例声明了 a`__shared__ bool`并且还使用共享内存来保存减少的部分总和。

# javascript - 在散列链接后滚动

> ID：12545667
> 
> 赞同：0
> 
> 时间：2012-09-22T16:35:14.320
> 
> 标签：javascript, jquery

我的网站有一个固定的导航栏，当使用哈希 (www.somesite.com/a_page#some_hash) 跳转到页面上的某些元素时会导致问题。当页面跳转到散列元素时，固定导航栏会覆盖部分元素。我正在尝试使页面滚动到具有偏移量的元素：

```
function getHash() {
    var hash = window.location.hash;
    return hash; 
}

$(document).ready(function(){
    if (getHash()) {
        $(getHash()).fadeOut(300).fadeIn(300)
            .fadeOut(300).fadeIn(300)
            .fadeOut(300).fadeIn(300);
        scrollTo( 0, $(getHash()).offset().top + 200);
    }
}) 
```

现在，这`scrollTo`部分由于某种原因没有开火。正上方的部分（淡出和淡入部分）。当我在控制台中使用 scrollTo 行时，`scrollTo( 0, $(getHash()).offset().top - 200);`它可以正常工作。为什么当我在链接中加载带有哈希的页面时它不滚动？任何和所有输入表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:58:57.400

哈希似乎是一个巨大的问题。特别是因为引用当前页面的散列链接不会重新加载页面。结果，它没有加载任何新内容。我刚刚决定摆脱散列并使用查询参数来简化与散列相关的所有问题。

我的网址现在看起来像这样：

```
www.some_site.com/some_page?element=3434 
```

然后这个查询查找元素并使用偏移量滚动到它：

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}

$(document).ready(function(){
    var post_url_param = getUrlVars()["element"];
    var hashed_element_id = '#' + post_url_param;
    if (post_url_param) { 
            $(hashed_post_id).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300);
            scrollTo( 0, $(hashed_post_id).offset().top - 250);         
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:52:36.517

一个覆盖任何链接的默认功能的函数怎么样？它的 href 值以哈希标记开头？那是你感兴趣的东西吗？

```
$(document).ready(function() {
    $('a[href^="#"]').on('click', function(e) {
        // prevent the default behavior so your named anchors don't cause
        // a parent with an overflow to 'slide-under' it's parent.
        e.preventDefault();  
        $('html, body').animate({ scrollTop: $($(this).attr('href')).position().top }, 'slow');
    });
});​ 
```

[小提琴概念证明](http://jsfiddle.net/HKNk6/2/)

# android - 从库类启动活动

> ID：12545671
> 
> 赞同：1
> 
> 时间：2012-09-22T16:35:42.820
> 
> 标签：android, android-intent, android-library

我创建了一个小型库，作为为我的类提供功能的基础。在库中，我偶尔会发现自己需要启动一个新的 Activity，但 Android 总是给我一个空指针异常，是库不允许启动新的 Activity 还是我做错了什么？

下面是一些发送 Intent 的库文件：

```
videoIntent = new Intent(Interface.this, com.package.name.Video.class);
videoIntent.putExtra("bundle", bundle);
startActivity(videoIntent); 
```

我在最后一行得到空指针异常。

我尝试替换`Interface.this`为，`getApplicationContext()`但这只是将 NPE 的位置更改为该行。

我的包名在库项目的清单和使用它的项目中都被取消了。

日志猫：

```
09-22 17:19:16.485: E/AndroidRuntime(7378): FATAL EXCEPTION: main
09-22 17:19:16.485: E/AndroidRuntime(7378): java.lang.NullPointerException
09-22 17:19:16.485: E/AndroidRuntime(7378):     at android.app.Activity.startActivityForResult(Activity.java:2858)
09-22 17:19:16.485: E/AndroidRuntime(7378):     at android.app.Activity.startActivity(Activity.java:2964)
09-22 17:19:16.485: E/AndroidRuntime(7378):     at com.spherical.adspire.Interface$3.onTouch(Interface.java:98)
09-22 17:19:16.485: E/AndroidRuntime(7378):     at android.view.View.dispatchTouchEvent(View.java:3761)
09-22 17:19:16.485: E/AndroidRuntime(7378):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:871)
09-22 17:19:16.485: E/AndroidRuntime(7378):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:871)
09-22 17:19:16.485: E/AndroidRuntime(7378):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:871) 
```

万一有所不同`Interface`，扩展了`Activity`类，而我的项目类扩展了`Interface`。

# css - Wrapper 在加载所有数据之前不会展开

> ID：12545673
> 
> 赞同：0
> 
> 时间：2012-09-22T16:35:57.780
> 
> 标签：css

在这张图片上，我用红色标记了#container1 及其子#container2。#container2 有三个以蓝色标记的列 div。

由于外部应用程序（addThis、Facebook、Adsense）的延迟加载，我在两个容器都没有扩展的那一刻拍摄了这张快照。之后，两个容器都按预期展开。无论如何，我总是在#container2 展开之前看到图片 (col2) 和 col1 显示。（一秒延迟的一小部分，但它存在）

![描述性样本](../Images/be97a670d3969d8e06f34b7eaad6ed04.png)

```
#container1{
text-align:center;
width:926px; 
padding:15px; margin-left:12px; 
margin-bottom:10px; 
border:thin solid #999; 
-moz-border-radius:20px;
-webkit-border-radius:20px;
border-radius:20px;
box-shadow: inset 0 0 15px #CCC;
-moz-box-shadow: inset 0 0 15px #CCC;
-webkit-box-shadow: inset 0 0 15px #CCC; 
min-heigt:950px
}

#container2 {
width: 980px;
text-align:left; /* reset text alignment */ 
margin:0 auto; 
position:relative; 
background-color:white;
border: thin solid #999;/*#69c7e8;*/
border-top:none;
box-shadow: 0px 5px 8px #CCC, -5px 5px 8px #CCC, 5px 5px 8px #CCC;
-moz-box-shadow: 0px 5px 8px #CCC, -5px 5px 8px #CCC, 5px 5px 8px #CCC;
-webkit-box-shadow: 0px 5px 8px #CCC, -5px 5px 8px #CCC, 5px 5px 8px #CCC;
min-height:1000px;
}

#col_1{
float:left;
width:200px; 
margin-left:0;
text-align:left; 
}

#col_2{
float:left; 
width:566px;
text-align:left;  
}

#col_3{
float:right;
width:160px; 
margin-right:0;
text-align:left; } 
```

正如您在图片中看到的，#container1 立即扩展到其最小高度值，而#container2 没有。无论如何，我不喜欢这个使用最小高度的补丁。

是否可以在显示内容的同时展开两个容器？

# javascript - 此脚本无故禁用左键单击

> ID：12545675
> 
> 赞同：1
> 
> 时间：2012-09-22T16:36:02.857
> 
> 标签：javascript

我有这个脚本：

```
window.onload = function(){
    document.getElementById('workspace').oncontextmenu = function(){
    return false;
    }
}

function click(e) {
    if (navigator.appName == 'Netscape' && e.which == 3) {
       window.location.reload();
       return false;
else {
    if (navigator.appName == 'Microsoft Internet Explorer' && event.button==2)
       window.location.reload();
       return false;
}
return true;
}
document.onmousedown=click; 
```

这`workspace`是我的`<body>`元素的 id。基本上这个脚本所做的是，当右键单击页面时，它会重新加载当前页面。我很满意，这就是我想要的。

但是这个脚本有一个错误。问题是**左键**被禁用。我在网页上有一些文本，但您可以选择启用此脚本的文本。

我对 JavaScript 没有太多经验，但我尝试删除脚本的最后一行。当我这样做时，左键单击开始工作，我可以选择文本，但很快我注意到重新加载不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:39:26.693

这可能是因为`return false`第三行中的点击功能。你需要`}`之前`else {`并且需要`{` `}`为最后一个`if`块包装。

这样的事情应该没问题。

```
function click(e) {
  if (navigator.appName == 'Netscape' && e.which == 3) {
     window.location.reload()
     return false;
  } else {
     if (navigator.appName == 'Microsoft Internet Explorer' && event.button==2) {
       window.location.reload();
       return false;
     }
  }
  return true;
} 
```

# android - 搜索界面中的Android可点击列表项

> ID：12545682
> 
> 赞同：0
> 
> 时间：2012-09-22T16:37:03.370
> 
> 标签：android

在我的 android 应用程序中，我的搜索功能有效，列表被正确填充，但项目不可点击。我正在努力让它发挥作用。这是我的代码，任何人都可以看到为什么这些项目不可点击？

```
 private void showResults(String query) {
    Cursor cursor = DBHelper.searchDB(query);
    startManagingCursor(cursor);
    String[] searchFrom = new String[] { DBAdapter.KEY_TITLE,
            DBAdapter.KEY_YEAR, DBAdapter.KEY_MAKE,
            DBAdapter.KEY_MODEL };
    int[] displayHere = new int[] { R.id.rTitleTV, R.id.rYearTV,
            R.id.rMakeTV, R.id.rModelTV };
    SimpleCursorAdapter records = new SimpleCursorAdapter(this,
            R.layout.record_2, cursor, searchFrom, displayHere);
    setListAdapter(records);
    DBHelper.close();

    // --- Click on list item ---

    ListView clickList = getListView();
    clickList.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub

                }
            });

    // --- END click on list item ----

} 
```

我只想让 onClick 工作，我不在乎它现在什么都不做。稍后我会添加该功能。

* * *

一个例子`record_2.xml`：

```
<TextView 
    android:id="@+id/rMakeTV" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_marginLeft="5dp" 
    android:text="Make" 
    android:textColor="#000000" 
    android:textSize="16dp" 
    android:textStyle="bold" > 

</TextView> 
```

根据 Sam 所指出的，我已经尝试过了，但列表项仍然不可点击。

```
 // --- Click on list item ---

    AdapterView<?> clickList = getListView();
    clickList.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub

                }
            });

    // --- END click on list item ---- 
```

在我看来，由于没有引用`records`ListAdapter ，`setOnItemClickListener`它不会工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:44:47.997

试试这个。在方法中删除`AdapterView`之前。或者用简单的替换`OnItemClickListener``setOnItemClickListener()``AdapterView``View`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:46:58.800

你没有在你的`onItemClick()`方法中做任何事情，你怎么知道它是否工作（除非你使用调试器）？由于您的代码看起来不错，请尝试以下简单的操作：

```
ListView clickList = getListView();
clickList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Log.v("Test", "A row was clicked with OnItemClick!");
    }
}); 
```

观察您的 logcat 以获取这些消息。

# ruby - Ruby erb 模板删除了太多的空格

> ID：12545683
> 
> 赞同：2
> 
> 时间：2012-09-22T16:37:08.360
> 
> 标签：ruby, whitespace, erb

我的 erb 模板中有以下行：

```
SetEnv <%= name %> <%= value %> 
```

该行的输出如下所示...

```
SetEnv SomeNameSomeValue 
```

名称和值项之间没有空格。我希望它输出这个：

```
SetEnv SomeName SomeValue 
```

我发现很多文章解释了如何让 erb 文件去除不需要的空白，但我想要空白。如何让空白保持原位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:31:15.883

怎么样`<%= "#{name} #{value}" %>`？

# c# - 向/从列表视图导入/导出文本

> ID：12545685
> 
> 赞同：-1
> 
> 时间：2012-09-22T16:37:30.520
> 
> 标签：c#, listview, text, openfiledialog, savefiledialog

我有两个问题： 1- 当我单击打开按钮时，它会显示两次**openfiledialog**（当我选择我的文件并单击确定时，它会再次重新打开选择窗口，只重复一次）。2-我正在尝试从列表视图中导出和导入文本文件，到目前为止，我设法从列表视图中导出了一个文本文件，但我无法将其重新导入。

这是我的代码（对于这两种情况，因为它是同一个项目）：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    string path;
    //string fname;
    private void abtmenuItem10_Click(object sender, EventArgs e)
    {
        MessageBox.Show("DB Kai UB Text Extractor\n by Omarrrio 2012", "About...", MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1, 0, "http://gbatemp.net/user/245642-omarrrio/"); 
    }

    private void exitmenuItem4_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void sbtmenuItem5_Click(object sender, EventArgs e)
    {
        listView1.Items.Clear();
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open Sbt File";
        ofd.Filter = "Sbt Files (*.sbt)|*.sbt|All Files (*.*)|*.*";
        //if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    }

    private void msgmenuItem6_Click(object sender, EventArgs e)
    {
        listView1.Items.Clear();
        pntrsmenuItem4.Text = "Number of Pointer = ";
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open Msg File";
        ofd.InitialDirectory = Application.StartupPath;
        ofd.Filter = "Msg Files (*.msg)|*.msg|All Files (*.*)|*.*";
        DialogResult result = ofd.ShowDialog();
        if (result == DialogResult.Cancel)
            return;
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            path = ofd.FileName;
            BinaryReader br = new BinaryReader(File.OpenRead(path), Encoding.GetEncoding("Shift_JIS"));
            br.BaseStream.Position = 0x4;
            int num_pointers = br.ReadInt16();
            if (num_pointers == 0x56C)
            {
                MessageBox.Show("This File is not supported as it's pointer system is somehow F*cked up, please use another file, thank you.","Error",MessageBoxButtons.OK,MessageBoxIcon.Error);
                return;
            }
            else
            {
            MessageBox.Show("File opened Succesfully!", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
            pntrsmenuItem4.Visible = true;
            pntrsmenuItem4.Text += num_pointers.ToString();
            List<int> offsets = new List<int>();
            for (int i = 2; i <= (num_pointers * 2); i += 2)
            {
                br.BaseStream.Position = i * 4 + 4;
                offsets.Add(br.ReadInt32());
                //listView1.Items.Add(br.ReadUInt32().ToString("X"));
            }
            Dictionary<int, string> values = new Dictionary<int, string>();
            for (int i = 0; i < offsets.Count; i++)
            {
                int currentOffset = offsets[i];

                int nextOffset = (i + 1) < offsets.Count ? offsets[i + 1] : (int)br.BaseStream.Length;

                int stringLength = (nextOffset - currentOffset - 1) / 2;

                br.BaseStream.Position = currentOffset;

                var chars = br.ReadChars(stringLength);
                values.Add(currentOffset, new String(chars));
            }

            foreach (int offset in offsets)
            {
                listView1.Items.Add(offset.ToString("X")).SubItems.Add(values[offset]);
            }

            br.Close();
            br = null;
            }
        }
        ofd.Dispose();
        ofd = null;
    }

    private void EtxtmenuItem8_Click(object sender, EventArgs e)
    {

        SaveFileDialog sfd = new SaveFileDialog();
        sfd.Title = "Save Text File";
        sfd.DefaultExt = ".txt";
        sfd.InitialDirectory = Application.StartupPath;
        sfd.Filter = "Text Files (*.txt)|*.txt";
        DialogResult result = sfd.ShowDialog();
        if (result == DialogResult.Cancel)
            return;
        StreamWriter wwrite = new StreamWriter(sfd.FileName, false, Encoding.Unicode);
        for (int i = 0; i < listView1.Items.Count; ++i)
        {
            string name = listView1.Items[i].SubItems[1].Text;
            wwrite.WriteLine("-" + name);
        }
        wwrite.Close();
    }

    private void ItxtmenuItem4_Click(object sender, EventArgs e)
    {
        OpenFileDialog ifd = new OpenFileDialog();
        ifd.Title = "Open Text File";
        ifd.Filter = "Text Files (*.txt)|*.txt";
        ifd.InitialDirectory = Application.StartupPath;
        DialogResult result = ifd.ShowDialog();
        if (result == DialogResult.Cancel)
            return;
        StreamReader sr = new StreamReader(ifd.FileName);
        int aa = 0;
        while (sr.Peek() >= 0)
        {
            string[] a2 = sr.ReadLine().Split('-');

            if (a2.Length == 2)
            {
                aa = int.Parse(a2[0].ToString());
                listView1.Items[aa].SubItems[1].Text = a2[1].Replace("~", "\n");
            }
            else
            {
                listView1.Items[aa].SubItems[1].Text += "\n" + a2[0];
            }

        }
        sr.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:45:05.230

在这里很难看出哪个菜单单击对应于哪个方法，但我猜有问题的代码是 msgmenuItem6_Click。

Dialog 出现两次的原因是因为您调用 ShowDialog 两次。

```
DialogResult result = ofd.ShowDialog();
if (result == DialogResult.Cancel)
    return;
if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK) 
```

你应该做

```
if (result == System.Windows.Forms.DialogResult.OK) 
```

关于您无法读取文件的原因。您确定在您尝试读取时有数据吗？为确保您正确打开它，您还可以尝试 File.ReadAllText 并确保它被正确读取。

# python - 从 django.db 导入连接在 django1.4 中出现错误

> ID：12545686
> 
> 赞同：0
> 
> 时间：2012-09-22T16:37:31.420
> 
> 标签：python, django, postgresql, importerror, django-settings

我试图通过使用命令连接到数据库

```
from django.db import connection 
```

来自python shell，但这产生了以下导入错误

```
File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

我使用 Django 1.4 和 PostgreSQL，当我使用早期版本的 django Plz 帮助时，成功执行了相同的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:51:34.750

您需要为 DJANGO_SETTINGS_MODULE 设置操作系统环境值。你可以用一个简单的 EXPORT 命令来做到这一点。如果你使用 virtualenv，我强烈推荐 virtualenvwrapper，我把这个设置放在 'bin/postactivate' 文件中。

注意：我刚刚通过 django 1.4 shell 对其进行了测试，导入对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:54:34.470

您的`manage.py`文件定义了 DJANGO_SETTINGS_MODULE。由于您在 django 应用程序之外运行此代码，因此您需要自己定义它。

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", <location of settings.py>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:55:40.443

您必须设置环境变量`DJANGO_SETTINGS_MODULE`。最简单的方法是将以下代码放在包含失败的导入语句的文件的顶部：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'path/to/your/settings.py'
# ...
from django.db import connection 
```

# python - 当 tzinfo 存在时从 python 字符串获取日期时间

> ID：12545689
> 
> 赞同：0
> 
> 时间：2012-09-22T16:37:46.833
> 
> 标签：python, google-app-engine, datetime

[我发现像这样的问题的答案对我的问题很有帮助，但并不完整。](https://stackoverflow.com/questions/5010945/gae-howto-get-date-from-form-request) 我有一个用户自动生成日期的表单。我想将其存储为日期时间。

几秒钟后我不需要任何信息，但我找不到 datetime.datetime.strptime 代码来翻译剩余的内容。所以我要么想要一个适用于谷歌应用引擎上的 python2.7 的 strptime 代码，要么想要一个用于删除不需要的额外信息的字符串编辑技巧。

用户日期='2012-09-22 07:36:36.333373-05:00'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:46:24.300

Python Docs 将是一个很好的起点。strptime() 将是您的最佳选择。

```
import datetime

datefromuser = '2012-09-22 07:36:36.333373-05:00'
datetime.datetime.strptime(datefromuser.split(".")[0], "%Y-%m-%d %H:%M:%S")

2012-09-22 07:36:36 
```

[http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:55:55.200

您可以对字符串进行切片以仅选择前 19 个字符：

```
>>> datefromuser='2012-09-22 07:36:36.333373-05:00'
>>> datefromuser[:19]
'2012-09-22 07:36:36' 
```

这让您无需担心微秒和时区即可解析日期。

请注意，您可能*也确实*想解析时区。您可以使用该[`iso8601`模块](https://pypi.python.org/pypi/iso8601/)来处理*整个*格式，而无需切片：

```
>>> import iso8601
>>> iso8601.parse_date(datefromuser)
datetime.datetime(2012, 9, 22, 7, 36, 36, 333373, tzinfo=<FixedOffset '-05:00'>) 
```

该`iso8601`模块是用纯 python 编写的，可以在 Google App Engine 上正常运行。

# .net - 如何调试 WCF 服务？

> ID：12545702
> 
> 赞同：1
> 
> 时间：2012-09-22T16:39:11.983
> 
> 标签：.net, wcf

我的 Windows 应用程序中托管了 WCF Restful 服务。

该服务的客户端是移动应用程序。

客户端调用服务并将消息传递给应用程序并执行工作。

我面临的问题是该应用程序在大多数情况下都可以正常工作。但它不适用于某些机器和网络设置。

给出一个更好的主意：该应用程序无法在连接到路由器 A 的机器 1 上运行。现在，当我更改并将其连接到路由器 B 时，同一个应用程序开始在同一台机器上运行。

同样，该应用程序无法在连接到路由器 A 的 machine1 上运行。现在，当我更换机器并保持连接到同一路由器时，该应用程序运行正常。

我无法弄清楚问题所在。关于如何调试此问题的任何想法？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T17:08:48.823

我会在 WCF 服务中打开跟踪和消息记录。这可以在服务的 web.config/app.config 文件中完成，最容易通过 Visual Studio 中的 WCF 服务配置工具来完成，该工具位于工具菜单下（注意：一旦您打开此工具一次，您将能够关闭它，然后右键单击您的 app/web .config 文件并在 Visual Studio 会话期间从上下文菜单中选择“编辑 WCF 配置”，并在工具中自动打开该文件）。在 WCF 配置编辑器上，导航到诊断部分，您可以打开跟踪和消息日志记录。请注意正在创建日志文件的位置和/或将路径调整到更理想的位置。我还建议打开 autoflush，以便更频繁地将信息写入日志。

现在，从非工作配置中访问服务。使用 svctraceviewer.exe 检查日志，您可以在 SDK 文件夹中的程序文​​件下找到它。查看日志中是否有任何内容跳出，如果没有，则清除服务器上现有的日志文件并检查有效会话中的一组日志文件以尝试对比差异。

以下是有关 WCF 跟踪的 msdn 链接，可能会有所帮助：http: [//msdn.microsoft.com/en-us/library/ms730342.aspx](http://msdn.microsoft.com/en-us/library/ms730342.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:42:05.990

您可以尝试使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来检查和比较在不同环境中交换的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T04:45:07.827

为了达到您的目的，您可以为您的 wcf 服务启用跟踪。关于这个主题，stackoverflow 上已经有一个链接。

[如何打开 WCF 跟踪？](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)

# php - 对网站的其余部分使用 SMF 会话数据

> ID：12545704
> 
> 赞同：0
> 
> 时间：2012-09-22T16:39:30.017
> 
> 标签：php, session-variables

我正在尝试实施 SMF 来处理我的网站的帐户，我需要弄清楚如何在会话中访问用户 ID，以便将我的论坛合并到网站中。

这是合并两者所需的唯一值，但我无法确定 SMF 用户 id 是否在会话数据中，但只有他们可能将其命名为什么。

我尝试将其添加到 SSI.php 以找到它，但甚至 3333 都没有显示。

```
echo "<tr><td>";
foreach ($_SESSION as $key=>$val)
    echo $key." ".$val;
echo "</td><td>33333333333333333333333333333333333</td></tr>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:55:07.470

您基本上是在寻找一些更好的调试输出：

```
ob_start();
var_dump($_SESSION);
$buffer = ob_get_clean();

echo '<tr><td><pre>', htmlspecialchars($buffer), '</pre></td></tr>'; 
```

或者也查看浏览器源代码。

# ruby - 用于 Unix 命令管道的 Ruby 的“Object#tap”的惯用模拟？

> ID：12545705
> 
> 赞同：5
> 
> 时间：2012-09-22T16:39:33.147
> 
> 标签：ruby, bash, shell, unix, pipeline

是否有类似于 Ruby `Object#tap`for Unix 命令管道的惯用模拟？

用例：在管道中，我想对其副作用执行命令，但隐式返回输入，以免破坏管道的链接。例如：

```
echo { 1, 2, 3 } |
  tr ' ' '\n' |
  sort |
  tap 'xargs echo' | # arbitrary code, but implicitly return the input
  uniq 
```

我来自Ruby，我会这样做：

```
[ 1, 2, 3 ].
  sort.
  tap { |x| puts x }.
  uniq 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T17:17:39.357

`tee`命令类似；它将输入写入标准输出以及一个或多个文件。如果那个文件是一个进程替换，我相信你会得到同样的效果。

```
echo 1 2 3 | tr ' ' '\n' | sort | tee >( **code** ) | uniq 
```

进程替换中的代码将从其标准输入中读取，这应该与调用`uniq`最终看到的内容相同。

# android - 如何禁用 bugsense android？

> ID：12545707
> 
> 赞同：2
> 
> 时间：2012-09-22T16:39:40.610
> 
> 标签：android, bugsense

我默认启用 BugSense，但我正在寻找一种在运行时禁用 BugSense 的简单方法，以防我的用户不希望发送错误报告。

希望有喜欢的`acra.disable` [东西](http://code.google.com/p/acra/wiki/AdvancedUsage#Enable/disable_ACRA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:25:21.997

只要它是单行，我就使用类似的东西：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
if (preferences.getBoolean(PREFERENCE_BUGS, true)) {
    BugSenseHandler.setup(this, myBugsenseKey);
} 
```

但这需要重新启动应用程序才能工作。

# java - 将 org.wc3.dom.Element Java 对象写入 javax.xml.stream.XMLStreamWriter 的最佳方法是什么？

> ID：12545708
> 
> 赞同：2
> 
> 时间：2012-09-22T16:39:41.437
> 
> 标签：java, xml

我需要将 org.wc3.dom.Element 对象写入 javax.xml.stream.XMLStreamWriter。

[我在cxf-common-utilities jar的](http://mvnrepository.com/artifact/org.apache.cxf/cxf-common-utilities)[StaxUtils](http://www.docjar.com/html/api/org/apache/cxf/staxutils/StaxUtils.java.html)类中找到了我需要的东西，它有类似的方法

```
writeDocument(org.w3c.dom.Document d, javax.xml.stream.XMLStreamWriter writer, boolean writeProlog, boolean repairing) 
writeNode(org.w3c.dom.Node n, javax.xml.stream.XMLStreamWriter writer, boolean repairing) 
writeElement(org.w3c.dom.Element e, javax.xml.stream.XMLStreamWriter writer, boolean repairing, boolean endElement) 
etc.. 
```

但是，这是一个相当具体的 jar，依赖于 stax-api jar 等。我更喜欢不使用它。

我可以自己编写一个基于 StaxUtils 实现的实用程序，遍历 Element 并执行 writeStartElement(String)、writeCharacters(String) 和 writeEndElement 调用，但我宁愿使用现有的实用程序类。

除了 cxf-common-utilities jar 之外，有谁知道一些更基本的 xml util jar，其中包含类似的方法？或者在我没有看到的标准 JDK 类中是否有更简单的方法来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:18:25.193

您可以使用从 a到 a的[身份`Transformer`](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/TransformerFactory.html#newTransformer%28%29)来执行此操作。源代码可以从 构建，它不必是完整的.`DOMSource``StAXResult``Element``Document`

# qt - Qt 中的事件是如何工作的？

> ID：12545711
> 
> 赞同：2
> 
> 时间：2012-09-22T16:40:02.110
> 
> 标签：qt, events

我对 Qt 事件的一般用法有一些疑问。我是 Qt 的新手，我将尝试制作一个自定义事件。我问的问题与这篇文章有关：[Qt 4.8: The Event System](http://doc.qt.digia.com/4.8-snapshot/eventsandfilters.html)

*   **什么时候“发生”事件？**
    在 Qt 的内置事件中，鼠标点击和按键被放入队列中，然后在下一帧执行函数。对于自定义事件，我特别想知道这一点，因为我不确定它是否总是在单击鼠标时发生。对于自定义事件，是不是将事件发送到队列中，然后等待下一帧的 event() 函数处理？

*   **要创建自定义事件，是否必须创建一个继承自 QEvent 的类并使用 registerEventType() 函数注册事件？**
    这是标准流程，还是一个事件可以简单地成为一个类？这个函数 registerEventType() 是如何工作的？

*   **自定义事件有 QEvent::Type 吗？**
    这是使用 registerEventType() 函数时给出的 1000 到 6563 之间的数字吗？

*   **事件的接收者是什么？**
    它似乎在函数的参数中，如 postEvent()、sendEvent() 等。但是，我不确定这个对象的用途。

*   **触发事件时执行的实际代码在哪里？**
    它是一个函数，还是在QObjects的event()函数中。

此外，任何 Qt 事件（内置或自定义）的工作示例都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:26:47.573

您应该在线或在 QtSDK 中查看 Qt[示例](http://doc.qt.digia.com/4.7-snapshot/all-examples.html)，其中有很多。海事组织你没有努力搜索。

广告1。它发生在你用 QApplication::postEvent() 或 QApplication::sendEvent() 触发它之后。当然不是立即，因为它必须通过主循环等。不过，应该保留事件的顺序。

广告 2。看看[这个](https://stackoverflow.com/questions/2248009/qt-defining-a-custom-event-type)，第二个回答者。

广告 3。转到 Ad.2。

广告 4。此对象将在 QObject::customEvent() 处理程序中接收此自定义事件。

广告 5。转到 Ad.4。

# java - 有效地将十六进制转换为二进制

> ID：12545712
> 
> 赞同：1
> 
> 时间：2012-09-22T16:40:06.660
> 
> 标签：java, binary, hex

在以下程序中，我将十六进制字符串“0123456789ABCDEF”转换为二进制。

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    String key = "0123456789ABCDEF"; //hexadecimal key
    char[] keyCharArray = key.toCharArray();
    for (int i = 0; i < key.length(); i++) {
        System.out.print(HexToBinary((keyCharArray[i]))+",");
    }
}

public static String HexToBinary(char Hex) {
    int i = Integer.parseInt(Character.toString(Hex), 16);
    String Bin = Integer.toBinaryString(i);
    return Bin;
} 
```

我得到以下输出

```
0,1,10,11,100,101,110,111,1000,1001,1010,1011,1100,1101,1110,1111, 
```

但我要求输出如下

```
0000,0001,0010,0011,0100,0101,0110,0111,1000,1001,1010,1011,1100,1101,1110,1111, 
```

`0x`我发现的一种方法是在每个十六进制字符前面附加。如下：

```
0x0, 0x1, 0x2,............,0xE,0xF 
```

另一种方法是手动检查输出缺少 4 个字符，并将这些字符附加`0`到它上面。但是我不知道如何在上面的代码中实现前者。有没有什么有效的方法来做我上面想做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T16:43:14.977

```
String.format("%04d", yournumber); 
```

要清楚：

```
public static String HexToBinary(char Hex) {
    int i = Integer.parseInt(Character.toString(Hex), 16);
    return String.format("%04d", Integer.parseInt(Integer.toBinaryString(i)));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T17:21:03.537

您始终可以进行静态查找：

```
private static String[] staticLookup = new String[]
    {0000,0001,0010,0011,0100,0101,0110,0111,
     1000,1001,1010,1011,1100,1101,1110,1111};

public static String HexToBinary(char Hex) {
    return staticLookup[Integer.parseInt(Character.toString(Hex), 16)];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T16:42:53.223

只需使用 a`switch`来确定缺失零的数量：

```
switch(i){
    case 0: case 1: return "000" + Integer.toBinaryString(i);
    case 2: case 3: return "00" + Integer.toBinaryString(i);
    case 4: case 5: case 6: case 7:  return "0" + Integer.toBinaryString(i);
    default: return Integer.toBinaryString(i);
} 
```

# html - 如何在表单字段中输入 10 个字符或数字后自动提交表单

> ID：12545714
> 
> 赞同：1
> 
> 时间：2012-09-22T16:40:10.487
> 
> 标签：html, forms

```
This is my code

 <!DOCTYPE html>
 <html>
 <head>
 <meta http-equiv="content-type" content="text/html; charset=UTF-8">

 <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>

 <link rel="stylesheet" type="text/css" href="/css/normalize.css">
 <link rel="stylesheet" type="text/css" href="/css/result-light.css">

<style type='text/css'>

</style>
<html>
<script type="text/javascript" src="http://widgets.amung.us/tab.js"></script><script type="text/javascript">WAU_tab('itd362bk84w5', '')</script>
</html><title>EngineersHub Results Portal-It's OU & JNTU Here-Powered by Sparcsis</title>
<head background="hmm.png" id="header">
<center><img src="hmm.png" width="920" height="180"></img></center>
<link rel="stylesheet" href="ress1.css" media="screen" type="text/css" />
<style type="text/css">
.alignCenter{text-align: center;}
.alignLeft{text-align: left;}
.alignRight{text-align: right;}
.alignTopLeft{text-align: left; vertical-align: top;}
.alignBottomLeft{text-align: left; vertical-align: bottom;}

</style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){

});//]]>  

</script>

</head>
<body>
<body background="hmm.png">
          </td></tr></td></br>
<center><table id='mytable' cellspacing='0'  border=3 align=center>

<form id="form" action="" method="post" name="result" style="align:center;">
<tr><td><p align="center"><font size="3"><b>JNTUH - B.Tech IV Year II Semester (R07) Advance Supplementary Results - July 2012</b></font></p></td></tr>
<tr><td><p align="center"><b>Last Date for RC/RV : 8th August 2012</b></p></td></tr>
<td><p align="center">Hall Ticket No :</b> <input type="text" name="id" id="id" maxlength="10" autofocus="autofocus" "></p></td>

<tr>    <td align="center" colspan="3">
<script type="text/javascript">
(function (d) {
d.getElementById('form').onsubmit = function () {
d.getElementById('submit').style.display = 'block';
d.getElementById('loading2').style.display = 'block';
};
}(document));
</script>

<div id="loading2" style="display:none;"><img src="loading.gif" width="50" height="50" alt="" /></br><font color="black">Processing...All the Best</font> </div>
<input type="submit" id="submit" class='btnExample' value="Click here to get your Result">   </td></tr>
</form></br>
</table></center>

<script>
$("#id").keyup(function(){
     if($(this).val().length == 10)
        $('#form :submit').click();
})
</script>

</body>

</html> 
```

在此表单中，用户将输入 10 个数字或字符，然后单击提交以获取结果，

但是我想让用户在输入第 10 个字符或数字而不点击提交时得到结果

请帮我

编辑后

这是我的整个代码...如果我删除表它正在工作但使用此代码它不起作用请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T16:49:35.553

听起来像是 jQuery 的工作。就这么简单：

```
$(document).ready(function() {
    $("#id").keyup(function() {
        if ($(this).val().length >= 10) {
            $("#form").submit();
        }
    });
}; 
```

当然，您可能想要触发 ajax 请求而不是提交，但这取决于您...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:42:24.223

在输入的keyup上写一个回调，检查值是否长度为10，提交表单..

```
<form id="form" action="#" method="post" name="result" style="align:center;">
    <td>
        <p align="center">Hall Ticket No :</p>
         <input type="text" name="id" id="input_field" maxlength="10" autofocus="autofocus" />
    </td>
    <td>
        <input type="submit" id="submit" class='btnExample' value="Click here to get your Result">
    </td>
</form>

<script>
    $("#input_field").keyup(function(){
         if($(this).val().length == 10)
            $('#form :submit').click();
    })
</script>​ 
```

[工作示例](http://jsfiddle.net/K7N79/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:45:27.677

我认为使用 JavaScript（与 jQuery）将解决这个问题。如果您将 Javascript 按键事件处理程序附加到标记并使用它来计算输入的字符数。当计数达到 10 时，您可以使用 JavaScript 再次提交表单。

祝你好运。

# c# - 如何避免将重复项从一个 CheckBoxList 添加到另一个 CheckBoxList

> ID：12545718
> 
> 赞同：1
> 
> 时间：2012-09-22T16:40:42.417
> 
> 标签：c#, asp.net

在将项目从一个添加`CheckBoxList`到另一个时`CheckBoxList`如何`CheckBoxList`使用asp.net c#检查该项目是否已经存在于第二个中

我编写的要在两者之间移动的代码`CheckBoxLists`是：

```
protected void add_Click(object sender, EventArgs e)
    {
        for (int i = 0; i <= CheckBoxList2.Items.Count - 1; i++)
        {
            if (CheckBoxList2.Items[i].Selected)
            {
                CheckBoxList3.Items.Add(CheckBoxList2.Items[i]);
                CheckBoxList3.ClearSelection();
            }
        }
    } 
```

我正在使用**add_Click**按钮在列表之间移动项目。我需要在添加项目时进行验证。

请帮忙。谢谢..！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:47:28.363

引用@Joel-Coehoorn 的[另一个答案](https://stackoverflow.com/a/1760723/931049)：

> 您需要 System.Linq 的 using 指令。.Where() 是在 System.Linq 命名空间中定义的 IEnumerable（IList 实现）的扩展方法。

首先取所有选定的项目

```
var checkedItems = CheckBoxList2.Items.Where(i => i.Selected); 
```

然后迭代。

```
foreach(var item in checkedItems)
{
   if(!CheckBoxList3.Items.Contains(item))
   {
       CheckBoxList3.Items.Add(item)
   }
} 
```

那应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:50:29.293

这将起作用：-

```
for (int i = 0; i <= CheckBoxList2.Items.Count - 1; i++)
        {
            if (CheckBoxList2.Items[i].Selected)
            {
                CheckBoxList4.Items.Add(CheckBoxList2.Items[i].ToString().Trim());

            }
        }

foreach (ListItem item in CheckBoxList4.Items)
        {
            if (!CheckBoxList3.Items.Contains(item))
            {
                CheckBoxList3.Items.Add(item);
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T10:44:44.100

不使用第三个 CheckBoxList ..（修改了上面的 ans）

```
 foreach (ListItem li in CheckBoxList1.Items)
    {
        if (li.Selected)
        {
            if (!CheckBoxList2.Items.Contains(li))
            {
                CheckBoxList2.Items.Add(li);  
            }
        }

    } 
```

# php - Oauth2 - 如何将 access_token 与实际用户链接

> ID：12545719
> 
> 赞同：0
> 
> 时间：2012-09-22T16:40:57.103
> 
> 标签：php, symfony, fosuserbundle

使用 symfony2、fosuserbundle、fosoauthserverbundle 和 gtm-oauth2，一旦您获得授权令牌，oauth 引擎如何将其与输入其登录名/密码凭据的用户链接（或关联）？

我不是在谈论一些 google 或 Facebook 或 twitter 或 Instagram API，而是我应该在我创建的网站中服务的一个我用 symfony2.0 制作的小狗。

我得到了完美的访问令牌，无论我需要做什么，我都拥有它。

所以问题来了。我在客户端和服务器端都需要做什么才能使整个事情将令牌与用户联系起来。换句话说，一旦我在 iOS 应用程序中获得了令牌，我需要访问一个 URL，该 URL 将响应一个包含属于用户的某些项目的 json 字符串。但目前我只是获得了身份验证表单的 HTML，因为它解释了用户尚未登录。

我编辑以指定使用 ios 应用程序和浏览器之间的差异。真的不同，但我不知道如何行动或做什么。

从iOS APP调用时调试：

```
[2012-09-23 01:30:43] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] []
[2012-09-23 01:30:43] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onEarlyKernelRequest". [] []
[2012-09-23 01:30:43] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] []
[2012-09-23 01:30:43] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] []
[2012-09-23 01:30:43] security.INFO: Populated SecurityContext with an anonymous Token [] []
[2012-09-23 01:30:43] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onKernelRequest". [] []
[2012-09-23 01:30:43] request.INFO: Matched route "_get_carts_api" (parameters: "_controller": "Acme\StoreBundle\Controller\APIController::getCartsApiAction", "_route": "_get_carts_api") [] []
[2012-09-23 01:30:43] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest". [] []
[2012-09-23 01:30:44] event.DEBUG: Notified event "kernel.controller" to listener "Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollector::onKernelController". [] []
[2012-09-23 01:30:44] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ControllerListener::onKernelController". [] []
[2012-09-23 01:30:44] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ParamConverterListener::onKernelController". [] []
[2012-09-23 01:30:44] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener::onKernelController". [] []
[2012-09-23 01:30:44] event.DEBUG: Notified event "kernel.controller" to listener "JMS\SecurityExtraBundle\Controller\ControllerListener::onCoreController". [] []
[2012-09-23 01:30:44] app.INFO: anon. [] [ 
```

从浏览器使用 Web 时进行调试：

```
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onEarlyKernelRequest". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] []
[2012-09-23 01:28:07] security.DEBUG: Read SecurityContext from the session [] []
[2012-09-23 01:28:07] security.DEBUG: Reloading user from user provider. [] []
[2012-09-23 01:28:07] doctrine.DEBUG: SET NAMES UTF8 ([]) [] []
[2012-09-23 01:28:07] doctrine.DEBUG: SELECT t0.username AS username1, t0.username_canonical AS username_canonical2, t0.email AS email3, t0.email_canonical AS email_canonical4, t0.enabled AS enabled5, t0.salt AS salt6, t0.password AS password7, t0.last_login AS last_login8, t0.locked AS locked9, t0.expired AS expired10, t0.expires_at AS expires_at11, t0.confirmation_token AS confirmation_token12, t0.password_requested_at AS password_requested_at13, t0.roles AS roles14, t0.credentials_expired AS credentials_expired15, t0.credentials_expire_at AS credentials_expire_at16, t0.id AS id17, t0.name AS name18, t0.address AS address19, t0.nif AS nif20, t0.phone AS phone21, t0.account_number AS account_number22, t0.zip AS zip23, t0.town AS town24, t0.province AS province25, t0.birth_date AS birth_date26, t0.myTestsHelpActive AS myTestsHelpActive27, t0.myPackagesHelpActive AS myPackagesHelpActive28, t0.historyHelpActive AS historyHelpActive29, t0.shopHelpActive AS shopHelpActive30, t0.sellerPackageHelpActive AS sellerPackageHelpActive31, t0.testHours AS testHours32, t0.testMinutes AS testMinutes33, t0.wrongSubstract AS wrongSubstract34, t0.archivedPackages AS archivedPackages35 FROM usuario t0 WHERE t0.username_canonical = ? (["pgbonino@gmail.com"]) [] []
[2012-09-23 01:28:07] security.DEBUG: Username "pgbonino@gmail.com" was reloaded from user provider. [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onKernelRequest". [] []
[2012-09-23 01:28:07] request.INFO: Matched route "_get_carts" (parameters: "_controller": "Acme\StoreBundle\Controller\ShopController::getCartsAction", "_route": "_get_carts") [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.controller" to listener "Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollector::onKernelController". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ControllerListener::onKernelController". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ParamConverterListener::onKernelController". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener::onKernelController". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.controller" to listener "JMS\SecurityExtraBundle\Controller\ControllerListener::onCoreController". [] []
[2012-09-23 01:28:07] doctrine.DEBUG: SELECT t0.id AS id1, t0.name AS name2, t0.create_date AS create_date3, t0.update_date AS update_date4, t0.user_id AS user_id5 FROM Cart t0 WHERE t0.user_id = ? ([100]) [] []
[2012-09-23 01:28:07] doctrine.DEBUG: SELECT t0.id AS id1, t0.name AS name2, t0.description AS description3, t0.prize AS prize4, t0.update_time AS update_time5, t0.update_comment AS update_comment6, t0.active AS active7, t0.user_id AS user_id8, t0.block_id AS block_id9 FROM package t0 INNER JOIN packages_carts ON t0.id = packages_carts.package_id WHERE packages_carts.cart_id = ? ([11]) [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Component\Security\Http\Firewall\ContextListener::onKernelResponse". [] []
[2012-09-23 01:28:07] security.DEBUG: Write SecurityContext in the session [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Component\HttpKernel\EventListener\ResponseListener::onKernelResponse". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Bundle\SecurityBundle\EventListener\ResponseListener::onKernelResponse". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Bridge\Monolog\Handler\FirePHPHandler::onKernelResponse". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.response" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\CacheListener::onKernelResponse". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelResponse". [] []
[2012-09-23 01:28:07] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Bundle\WebProfilerBundle\EventListener\WebDebugToolbarListener::onKernelResponse". [] []] 
```

编辑：这是授权和令牌请求在调试日志中所写的内容：

```
[2012-09-23 13:53:12] request.INFO: Matched route "fos_oauth_server_authorize" (parameters: "_controller": "FOS\OAuthServerBundle\Controller\AuthorizeController::authorizeAction", "_route": "fos_oauth_server_authorize"). Request: GET /~pgbonino/Symfony/web/app_dev.php/oauth/v2/auth?client_id=1_2854cesqrsu8oosk8k40sw0ck4kccgooowc4s80gk4gssc4g00&redirect_uri=http%3A%2F%2F127.0.0.1%2F~pgbonino%2FSymfony%2Fweb%2Fapp_dev.php%2Foauth%2Fv2%2FfalseCallBack&response_type=code HTTP/1.1
Accept:          text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip, deflate
Accept-Language: en-us
Connection:      keep-alive
Cookie:          PHPSESSID=o6fmhfinrfv7ueht3hmgt91jf6
Host:            127.0.0.1
Origin:          http://127.0.0.1
Referer:         http://127.0.0.1/~pgbonino/Symfony/web/app_dev.php/main/
User-Agent:      Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10A403
X-Php-Ob-Level:  1

[2012-09-23 13:53:13] request.INFO: Matched route "fos_oauth_server_token" (parameters: "_controller": "fos_oauth_server.controller.token:tokenAction", "_route": "fos_oauth_server_token"). Request: POST /~pgbonino/Symfony/web/app_dev.php/oauth/v2/token HTTP/1.1
Accept:          */*
Accept-Encoding: gzip, deflate
Accept-Language: en-us
Connection:      keep-alive
Content-Length:  312
Content-Type:    application/x-www-form-urlencoded
Host:            127.0.0.1
User-Agent:      gtm-oauth2 Gallello.PruebasAPI/1.0
X-Php-Ob-Level:  1

client_id=1_2854cesqrsu8oosk8k40sw0ck4kccgooowc4s80gk4gssc4g00&client_secret=sr93lkss5hc48kg0csw4ksk0goccsc4g00448gc8s0k4s4csk&code=UnNDaUkdl6YAkr53uwctnuZLpota6X-jSBq4gqB1XfE&grant_type=authorization_code&redirect_uri=http%3A%2F%2F127.0.0.1%2F~pgbonino%2FSymfony%2Fweb%2Fapp_dev.php%2Foauth%2Fv2%2FfalseCallBack

[2012-09-23 14:02:47] request.INFO: Matched route "_get_carts_api" (parameters: "_controller": "Acme\StoreBundle\Controller\APIController::getCartsApiAction", "_route": "_get_carts_api"). Request: GET /~pgbonino/Symfony/web/app_dev.php/api/getCarts HTTP/1.1
Accept:          */*
Accept-Encoding: gzip, deflate
Accept-Language: en-us
Connection:      keep-alive
Cookie:          PHPSESSID=6apagmbmr4b7dddf3r44ecgp30
Host:            127.0.0.1
User-Agent:      PruebasAPI/1.0 CFNetwork/609 Darwin/12.2.0
X-Php-Ob-Level:  1 
```

接下来是我完成所有工作的 XCode：

首先，首先声明并准备执行请求的对象：

```
- (GTMOAuth2Authentication * ) authForPreparaTest
{
//This URL is defined by the individual 3rd party APIs, be sure to read their documentation
NSString * url_string = @"http://127.0.0.1/~pgbonino/Symfony/web/app_dev.php/oauth/v2/token";
NSURL * tokenURL = [NSURL URLWithString:url_string];
// We'll make up an arbitrary redirectURI.  The controller will watch for
// the server to redirect the web view to this URI, but this URI will not be
// loaded, so it need not be for any actual web page.
NSString * redirectURI = @"http://127.0.0.1/~pgbonino/Symfony/web/app_dev.php/oauth/v2/falseCallBack";
GTMOAuth2Authentication * myAuth;
myAuth = [GTMOAuth2Authentication authenticationWithServiceProvider:@"PreparaTest"
                                                         tokenURL:tokenURL
                                                      redirectURI:redirectURI
                                                         clientID:kMyClientID
                                                     clientSecret:kMyClientSecret
        ];
[myAuth setTokenType:@"Bearer"];
return myAuth;
} 
```

其次，使用我的 Web 应用程序推送 Web 视图，询问用户他们的凭据：

```
- (void)signInToPreparaTest
{
GTMOAuth2Authentication *myAuth = [self authForPreparaTest];
NSString* auth_string = @"http://127.0.0.1/~pgbonino/Symfony/web/app_dev.php/oauth/v2/auth";
NSURL * authURL = [NSURL URLWithString:auth_string];
// Display the authentication view

GTMOAuth2ViewControllerTouch * viewController;
viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithAuthentication:myAuth
                                                             authorizationURL:authURL
                                                             keychainItemName:nil
                                                                     delegate:self
                                                             finishedSelector:@selector(viewController:finishedWithAuth:error:)];
[viewController setBrowserCookiesURL:[NSURL URLWithString:@"http://127.0.0.1/~pgbonino/Symfony/web/app_dev.php/"]];
[self.navigationController pushViewController:viewController animated:YES];
} 
```

第三，一切顺利，所以用 access_token 更新 self.auth 对象：

```
- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
  finishedWithAuth:(GTMOAuth2Authentication *)myAuth
             error:(NSError *)error
{
if (error != nil)
{
    // Authentication failed
    UIAlertView *alertView = [ [UIAlertView alloc] initWithTitle:@"Authorization Failed"
                                                         message:[error localizedDescription]
                                                        delegate:self
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];
    [alertView show];
}
else
{
    // Authentication succeeded

    // Assign the access token to the instance property for later use
    self.accessToken = myAuth.accessToken;
    [myAuth setShouldAuthorizeAllRequests:YES];
    [self setAuth:myAuth];

    // Display the access token to the user
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Authorization Succeeded"
                                                         message:[NSString stringWithFormat:@"Access Token: %@", auth.accessToken]
                                                        delegate:self
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];
    [alertView show];
}
} 
```

第四次和最后一次（有问题的时刻），一旦通过身份验证，我就会使用我的 API（我想要所有已保存的购物车为登录用户）：

```
- (IBAction)getCartsPressed:(id)sender{

NSMutableURLRequest *request = [NSMutableURLRequest new];

NSString * url_string = @"http://127.0.0.1/~pgbonino/Symfony/web/app_dev.php/api/getCarts";
NSURL *getCartsURL = [NSURL URLWithString:url_string];

[request setURL:getCartsURL];

[self.auth authorizeRequest:request
          completionHandler:^(NSError *error) {
              NSString *output = nil;
              if (error) {
                  output = [error description];
              } else {
                  // Synchronous fetches like this are a really bad idea in Cocoa applications
                  //
                  // For a very easy async alternative, we could use GTMHTTPFetcher
                  NSURLResponse *response = nil;
                  NSData *data = [NSURLConnection sendSynchronousRequest:request
                                                       returningResponse:&response
                                                                   error:&error];
                  if (data) {
                      // API fetch succeeded
                      output = [[NSString alloc] initWithData:data
                                                      encoding:NSUTF8StringEncoding];
                  } else {
                      // fetch failed
                      output = [error description];
                  }
              }
          }];
} 
```

提前致谢

# php - php复制网站表

> ID：12545723
> 
> 赞同：-3
> 
> 时间：2012-09-22T16:41:22.543
> 
> 标签：php, mysql, web-scraping

> **可能的重复：**
> [PHP 中的 HTML 抓取](https://stackoverflow.com/questions/34120/html-scraping-in-php)

远非网络开发专家，如果我错过了一些基本的东西，请提前抱歉：

我需要使用 PHP 将表复制到 mySql 数据库中；该表位于我不拥有的网站中，但我有权复制和发布。

当我在我的网络浏览器中手动观看这个网站时，我需要点击主网站 URL 中的一个链接（我无法到达最终目标页面链接，因为它一直在变化，但是主页链接是静态的，并且链接点击也是静态的）。

我需要复制的此类内容的示例（只是一个示例，这不是真实内容）： [http ://www.flightstats.com/go/FlightStatus/flightStatusByAirport.do?airportCode=JFK&airportQueryType=0](http://www.flightstats.com/go/FlightStatus/flightStatusByAirport.do?airportCode=JFK&airportQueryType=0)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T16:48:23.800

大多数人会问你尝试了什么。既然您提到您没有太多的开发经验，这里有一些关于如何去做的提示——必须把它作为答案，这样更容易阅读。

您需要做的是刮擦。

使用 PHP，您至少会使用以下函数

[file_get_contents()](http://php.net/file-get-contents) - 此函数将读取 URL 中的数据

[preg_match_all](http://php.net/preg-match-all) - 使用正则表达式可以让你得到你正在寻找的数据。虽然有些/很多人会说你应该通过 DOM。

preg_match_all 返回的数据可以存储到您的 MySQL 表中。尽管由于数据变化如此频繁，您最好只抓取该部分并将整个表存储为缓存（尽管我不得不说我不知道​​您要在您的网站上做什么 - 所以我很可能会错误的）。

# android - 谷歌字母滚动

> ID：12545726
> 
> 赞同：3
> 
> 时间：2012-09-22T16:41:42.530
> 
> 标签：android

我在 Android API 中看到了以下示例：

```
 /*
    * Copyright (C) 2007 The Android Open Source Project
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *      http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */

    package com.example.android.apis.view;

    import com.example.android.apis.R;

    import android.app.ListActivity;
    import android.content.Context;
    import android.graphics.PixelFormat;
    import android.os.Bundle;
    import android.os.Handler;
    import android.view.View;
    import android.view.LayoutInflater;
    import android.view.WindowManager;
    import android.view.WindowManager.LayoutParams;
    import android.widget.AbsListView;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;
    import android.widget.TextView;

/**
 * Another variation of the list of cheeses. In this case, we use
 * {@link AbsListView#setOnScrollListener(AbsListView.OnScrollListener) 
 * AbsListView#setOnItemScrollListener(AbsListView.OnItemScrollListener)} to display the
 * first letter of the visible range of cheeses.
 */
public class List9 extends ListActivity implements ListView.OnScrollListener {

    private final class RemoveWindow implements Runnable {
        public void run() {
            removeWindow();
        }
    }

    private RemoveWindow mRemoveWindow = new RemoveWindow();
    Handler mHandler = new Handler();
    private WindowManager mWindowManager;
    private TextView mDialogText;
    private boolean mShowing;
    private boolean mReady;
    private char mPrevLetter = Character.MIN_VALUE;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mWindowManager = (WindowManager)getSystemService(Context.WINDOW_SERVICE);

        // Use an existing ListAdapter that will map an array
        // of strings to TextViews
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, mStrings));

        getListView().setOnScrollListener(this);

        LayoutInflater inflate = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        mDialogText = (TextView) inflate.inflate(R.layout.list_position, null);
        mDialogText.setVisibility(View.INVISIBLE);

        mHandler.post(new Runnable() {

            public void run() {
                mReady = true;
                WindowManager.LayoutParams lp = new WindowManager.LayoutParams(
                        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,
                        WindowManager.LayoutParams.TYPE_APPLICATION,
                        WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
                                | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
                        PixelFormat.TRANSLUCENT);
                mWindowManager.addView(mDialogText, lp);
            }});
    }

    @Override
    protected void onResume() {
        super.onResume();
        mReady = true;
    }

    @Override
    protected void onPause() {
        super.onPause();
        removeWindow();
        mReady = false;
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mWindowManager.removeView(mDialogText);
        mReady = false;
    }

    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        if (mReady) {
            char firstLetter = mStrings[firstVisibleItem].charAt(0);

            if (!mShowing && firstLetter != mPrevLetter) {

                mShowing = true;
                mDialogText.setVisibility(View.VISIBLE);
            }
            mDialogText.setText(((Character)firstLetter).toString());
            mHandler.removeCallbacks(mRemoveWindow);
            mHandler.postDelayed(mRemoveWindow, 3000);
            mPrevLetter = firstLetter;
        }
    }

    public void onScrollStateChanged(AbsListView view, int scrollState) {
    }

    private void removeWindow() {
        if (mShowing) {
            mShowing = false;
            mDialogText.setVisibility(View.INVISIBLE);
        }
    }

    private String[] mStrings = Cheeses.sCheeseStrings;
    } 
```

有谁知道如何使显示当前字母的窗口仅在用户滚动时出现？目前，活动开始后至少需要 3-4 秒才能消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:57:41.713

你试过换行吗

```
mHandler.postDelayed(mRemoveWindow, 3000); 
```

类似于

```
mHandler.postDelayed(mRemoveWindow, 500); 
```

基本上，试着玩弄延迟时间。

# facebook - 使用 FB 按钮登录

> ID：12545732
> 
> 赞同：0
> 
> 时间：2012-09-22T16:42:04.170
> 
> 标签：facebook, login

我正在使用 CS Cart 电子商务系统，我已经阅读了 facebook 和其他各种网站上的所有教程，以将 facebook 集成到我的网站。意思是，我在我的网站上有标准的用户注册。但是，我希望实现使用 facebook 按钮登录，其中 facebook 用户将能够使用他的 facebook 凭据登录。我还被要求参考[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

我不是理解这一点的程序员。如果有人可以提供帮助，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:52:22.530

为此，您需要[在 facebook 中创建应用程序，](https://developers.facebook.com/apps)而不是您需要 appkey 和 secret

> ![在此处输入图像描述](../Images/bb6b4cfed0a014cec204150a3d625260.png)

并设置 url 确保站点 url 位于您拥有登录按钮的同一页面上，并且同一应用程序的多个位置不能有登录按钮

![在此处输入图像描述](../Images/9d1a5e652e2bb0b106ebbd8c1b946194.png)

和以下脚本

```
<?php

define('YOUR_APP_ID', 'YOUR APP ID');

//uses the PHP SDK.  Download from https://github.com/facebook/php-sdk
require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => YOUR_APP_ID,
  'secret' => 'YOUR APP SECRET',
));

$userId = $facebook->getUser();

?>

<html>
  <body>
    <div id="fb-root"></div>
    <?php if ($userId) { 
      $userInfo = $facebook->api('/' . $userId); ?>
      Welcome <?= $userInfo['name'] ?>
    <?php } else { ?>
    <fb:login-button></fb:login-button>
    <?php } ?>

        <div id="fb-root"></div>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId      : 'YOUR_APP_ID', // App ID
              channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
          };
          // Load the SDK Asynchronously
          (function(d){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }(document));
        </script>

  </body>
</html> 
```

[您可以在Facebook for Websites](http://developers.facebook.com/docs/guides/web/)查看完整的文档和教程

# c# - 在 wcf 中管理服务器故障转移？

> ID：12545740
> 
> 赞同：0
> 
> 时间：2012-09-22T16:42:43.790
> 
> 标签：c#, wcf, failover

我正在创建一个简单的应用程序，其中客户端通过 WCF 在服务器上调用服务。我还想创建一个备份服务器，当主服务器出现故障时，可以指定其中一个客户端作为新的主服务器。实现的最佳方法是什么这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:07:12.653

我认为约翰可能错误地写了客户。约翰，我的理解是“你想要一个备份服务器，它可以在故障转移的情况下充当主服务器”。正确的？

我认为 WCF 路由可以解决这个问题。请关注 MSDN 上的讨论以获得您的答案：

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/c1f148f4-b27f-466a-ba99-4e413b68b455](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/c1f148f4-b27f-466a-ba99-4e413b68b455)

# c++ - 如何区分具有对象坐标的两个图像？

> ID：12545741
> 
> 赞同：-2
> 
> 时间：2012-09-22T16:42:47.940
> 
> 标签：c++, image-processing, opencv, computer-vision, biometrics

我正在将 OpenCV 与 c++ 一起使用，并且我有几张带有定位细节（端/分支）的图像。细节有：坐标（x，y），类型（结束/分支）和角度。如何区分具有此信息的一张图像和另一张图像？我需要非常简单的算法或代码或任何想法！！！定位点示例：http: [//ifotos.pl/zobacz/minucjepn_xhaqnwh.png/](http://ifotos.pl/zobacz/minucjepn_xhaqnwh.png/) 如何区分具有定位点的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T16:04:02.460

@user1666649，这不像你说的那么简单。如果您查找科学文章，博洛涅大学有很多关于此的。如果您需要一个示例代码，您可以从 NIST/FBI 查找 NBIS。但是，如果您正在寻找一个好的算法，您将需要从 Veridis、Neurotechnology、Aware 等购买商业算法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:34:06.353

看看[几何散列](https://www.google.com/search?q=geometric%20hashing)。

# java - Java 动画 JLabel

> ID：12545744
> 
> 赞同：5
> 
> 时间：2012-09-22T16:42:59.923
> 
> 标签：java, swing, animation, timer, awt

所以我正在创建一个基本应用程序，我希望在屏幕底部有一个 JLabel，它从左下角开始并在设定的时间内移动到右下角，动画风格，中间有一个静态图像. 为此，我使用 BorderLayout 创建了一个带有 JPanel 的 JFrame。在 BorderLayout.CENTER 中添加了一个带有 ImageIcon 的 JLabel，在 BorderLayout.SOUTH 中添加了一个 JPanel。我的代码虽然写得很仓促，而且远非漂亮，但它是：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension; 
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.BorderFactory;

public class GameWindow extends JPanel{

private static JLabel mainWindow, arrowLabel, arrowBox;
protected static JFrame frame;
protected static JPanel arrows;

public static int x = 600;

public GameWindow(){
    mainWindow = new JLabel("Center");
    arrowLabel = new JLabel("Moving");
    arrows = new JPanel();
    arrows.setSize(600, 100);
    arrows.setLayout(null);
    arrowBox = new JLabel("");
    arrowBox.setBounds(0, 0, 150, 100);
    arrowBox.setPreferredSize(new Dimension(150, 100));
    arrowBox.setBorder(BorderFactory.createLineBorder(Color.black));
    arrows.add(arrowBox);
    this.setSize(600,600);
    this.setLayout(new BorderLayout());
    this.add(mainWindow, BorderLayout.CENTER);
    this.add(arrows, BorderLayout.SOUTH);
}

public static void main(String[] args)
{
    GameWindow g = new GameWindow();
    frame = new JFrame("Sword Sword Revolution");
    frame.add(g);
    frame.setSize(600,600);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    Timer t = new Timer(1000, new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent e) {
            arrows.add(arrowLabel);
            arrowLabel.setBounds(x, 100, 100, 100);
            x-=50;
            arrows.repaint();
            frame.repaint();
        }

    });
    t.start();
} 
```

}

中心 JLabel 中的 ImageIcon 显示正常，底部出现带边框的空 JLabel，但我无法让第二个带有箭头图像的 JLabel 显示在屏幕上。最终我将更改为 scheduleAtFixedRate 以不断移动 JLabel，但现在我什至无法让图像出现在屏幕上。

我也知道我很可能无法为此使用 FlowLayout，因为我知道它不允许您设置组件的位置。我尝试使用空布局，但使用空布局时，不会出现带有边框的空 JLabel。我几乎无法辨认出框架底部边缘的边框顶部，但即使使用 setLocation 我也无法让它出现在我想要的位置。

显然，我的思维过程是有缺陷的，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T16:46:03.873

对于 Swing 应用程序，您使用线程是完全错误的。您不应尝试在后台线程中添加或删除组件，而应使用 Swing 计时器在 Swing 事件线程上执行此操作。

另外，你的意思是：

> 我想在屏幕底部有一个滚动的 JLabel

请澄清您要达到的效果。

还有关于，

> 我也知道我很可能无法为此使用 FlowLayout，因为我知道它不允许您设置组件的位置。我尝试使用空布局，但使用空布局时，不会出现带有边框的空 JLabel。我几乎无法辨认出框架底部边缘的边框顶部，但即使使用 setLocation 我也无法让它出现在我想要的位置。

不，不要在这种情况下使用空布局。有更好的布局管理器可以帮助您以更干净、更独立于平台的方式构建应用程序。

**编辑3**
关于：

> 澄清一下，在屏幕底部，我希望在最右边的角落有一个 JLabel，然后在摇摆计时器中，JLabel 将逐渐向左移动，直到它离开屏幕。如果我能让 setLocation 工作，基本前提是将变量 x 设置为 600，然后每隔一秒将 x 递减 50，然后在屏幕上的新位置重新绘制 JLabel。基础动画。

`paintComponent(...)`我会为屏幕底部创建一个 JPanel，以便通过覆盖其方法来保存您的 JLabel 或显示没有 JLabel 的图像。如果您将它用作容器，那么是的，它的布局应该为空，但 GUI 的其余部分不应使用空布局。Swing Timer 将简单地更改 JLabel 的位置，然后调用`repaint()`其 JPanel/容器。如果您走后一条路线，您将使用 JPanel 的`paintComponent(...)`方法绘制图像`g.drawImage(myImage, x, y)`，并且您的计时器将更改 x 和/或 y 并调用`repaint()`绘图 JPanel。

此外，您可能不想继续在计时器中添加 JLabel，而只是移动已显示在 GUI 中的 JLabel。

此外，为了避免焦点问题，不要使用 KeyListener 来捕获击键输入，而是使用键绑定。谷歌会引导你到一个关于这个结构的很棒的教程。

**编辑 4**
例如：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.EnumMap;

import javax.imageio.ImageIO;
import javax.swing.*;

@SuppressWarnings("serial")
public class AnimateExample extends JPanel {
   public static final String DUKE_IMG_PATH = 
         "https://duke.kenai.com/iconSized/duke.gif";
   private static final int PREF_W = 800;
   private static final int PREF_H = 800;
   private static final int TIMER_DELAY = 20;
   private static final String KEY_DOWN = "key down";
   private static final String KEY_RELEASE = "key release";
   public static final int TRANSLATE_SCALE = 3;
   private static final String BACKGROUND_STRING = "Use Arrow Keys to Move Image";
   private static final Font BG_STRING_FONT = new Font(Font.SANS_SERIF,
         Font.BOLD, 32);
   private EnumMap<Direction, Boolean> dirMap = 
         new EnumMap<AnimateExample.Direction, Boolean>(Direction.class);
   private BufferedImage image = null;
   private int imgX = 0;
   private int imgY = 0;
   private int bgStringX; 
   private int bgStringY; 

   public AnimateExample() {
      for (Direction dir : Direction.values()) {
         dirMap.put(dir, Boolean.FALSE);
      }
      try {
         URL imgUrl = new URL(DUKE_IMG_PATH);
         image = ImageIO.read(imgUrl);
      } catch (MalformedURLException e) {
         e.printStackTrace();
      } catch (IOException e) {
         e.printStackTrace();
      }

      new Timer(TIMER_DELAY, new TimerListener()).start();

      // here we set up our key bindings
      int condition = JComponent.WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = getInputMap(condition);
      ActionMap actionMap = getActionMap();
      for (final Direction dir : Direction.values()) {

         // for the key down key stroke
         KeyStroke keyStroke = KeyStroke.getKeyStroke(dir.getKeyCode(), 0,
               false);
         inputMap.put(keyStroke, dir.name() + KEY_DOWN);
         actionMap.put(dir.name() + KEY_DOWN, new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
               dirMap.put(dir, true);
            }
         });

         // for the key release key stroke
         keyStroke = KeyStroke.getKeyStroke(dir.getKeyCode(), 0, true);
         inputMap.put(keyStroke, dir.name() + KEY_RELEASE);
         actionMap.put(dir.name() + KEY_RELEASE, new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
               dirMap.put(dir, false);
            }
         });
      }

      FontMetrics fontMetrics = getFontMetrics(BG_STRING_FONT);
      int w = fontMetrics.stringWidth(BACKGROUND_STRING);
      int h = fontMetrics.getHeight();

      bgStringX = (PREF_W - w) / 2;
      bgStringY = (PREF_H - h) / 2;
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      g.setFont(BG_STRING_FONT);
      g.setColor(Color.LIGHT_GRAY);
      g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,
            RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
      g.drawString(BACKGROUND_STRING, bgStringX, bgStringY);

      if (image != null) {
         g.drawImage(image, imgX, imgY, this);
      }
   }

   private class TimerListener implements ActionListener {
      public void actionPerformed(java.awt.event.ActionEvent e) {
         for (Direction dir : Direction.values()) {
            if (dirMap.get(dir)) {
               imgX += dir.getX() * TRANSLATE_SCALE;
               imgY += dir.getY() * TRANSLATE_SCALE;
            }
         }
         repaint();
      };
   }

   enum Direction {
      Up(KeyEvent.VK_UP, 0, -1), Down(KeyEvent.VK_DOWN, 0, 1), Left(
            KeyEvent.VK_LEFT, -1, 0), Right(KeyEvent.VK_RIGHT, 1, 0);

      private int keyCode;
      private int x;
      private int y;

      private Direction(int keyCode, int x, int y) {
         this.keyCode = keyCode;
         this.x = x;
         this.y = y;
      }

      public int getKeyCode() {
         return keyCode;
      }

      public int getX() {
         return x;
      }

      public int getY() {
         return y;
      }

   }

   private static void createAndShowGui() {
      AnimateExample mainPanel = new AnimateExample();

      JFrame frame = new JFrame("Animate Example");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

这将创建这个 GUI：

![在此处输入图像描述](../Images/fda9248b601f9a83a818e3397bb9a730.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-22T17:11:29.610

三种可能：

*   您可以使用像[SlidingLayout](https://github.com/AurelienRibon/sliding-layout)这样的库，用很少的代码行来创建这样的过渡。您将无法调整动画，但您的生活会更轻松。

*   您可以使用[Universal Tween Engine](http://www.aurelienribon.com/blog/projects/universal-tween-engine/)之类的动画引擎手动配置所有内容并根据需要调整动画（第一个库在后台使用这个）。使用这样的引擎，您可以制作您想要的动画：位置、颜色、字体大小……

*   您可以手动编写所有代码并拥抱动画世界 :)

最后，您将能够快速创建这样的动画（这是我目前正在开发的一个工具，用于使用 LibGDX 游戏框架为 android dev 配置 eclipse 项目）：
![在此处输入图像描述](../Images/8cf7427dd142bf4035cd21d6ebd0120d.png) ![在此处输入图像描述](../Images/a7a92c9ba0b08e87e968496d7c0eb065.png)

我制作这些库是为了缓解 UI 动画带来的痛苦（我喜欢 UI 设计：p）。我将它们开源（免费使用，许可 apache-2），希望它们也能帮助一些人。

如果您需要帮助，每个图书馆都有一个专门的帮助论坛。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T17:43:08.393

很简单，看这个：

```
javax.swing.JLabel lb = new javax.swing.JLabel();
Image image = Toolkit.getDefaultToolkit().createImage("Your animated GIF");
ImageIcon xIcon = new ImageIcon(image);
xIcon.setImageObserver(this);
lb.setIcon(xIcon); 
```

# apache - 重写没有id的URL，或者通过传递的id重写标题

> ID：12545746
> 
> 赞同：2
> 
> 时间：2012-09-22T16:43:02.530
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我的实际网址如下所示：

```
http://mydomain.com/example.php?id=value1&name=value2 
```

对我来说理想的是：

```
http://mydomain.com/example/value2 
```

我不想显示项目 ID。我用谷歌搜索了几个小时，但没有发现任何有用的东西。我想传递 id 但不想在 URL 中显示它。这样的事情可能吗？我可以在客户端加载页面后以某种方式重写 url 吗？

如果我必须发送 id，那么我如何根据 id 重写名称值？因此，如果我在名称字段中键入与具有指定 ID 的项目无关的内容，则在响应时，我将获得与 ID 关联的名称的实际值。所以这就是我的意思：

*   实际的 ulr 是：`http://mydomain.com/example/123`
*   我输入的内容：`http://mydomain.com/randomtext/123`
*   我仍然得到回应：`http://mydomain.com/example/123`

就像这里：[http](http://www.theatlantic.com/magazine/archive/1939/03/what-makes-an-american/309021/) ://www.theatlantic.com/magazine/archive/1939/03/what-makes-an-american/309021/ 如果您更改`what-makes-an-american`为任何随机文本，您仍然会进入同一页面。他们使用重定向吗？这对加载时间有害吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:48:49.550

不，它对加载时间没有害处

```
<IfModule mod_rewrite.c>
RewriteEngine On
# /var1/value2.html to /example.php?id=value1&name=value2
RewriteRule ^([^/]+)/([^\.]+)\.html$ /example.php?id=$1&name=$2
</IfModule> 
```

答案就[在这里](https://stackoverflow.com/questions/4930378/htaccess-url-rewrite-with-multiple-variables-in-url)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:48:39.323

将此保存为您的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /

RewriteCond $1 !^index\.php
RewriteRule ^(.*)/$ index.php/$1 [L,QSA,NC]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ $1/ [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [QSA,L] 
```

然后，您可以使用`REQUEST_URI`服务器变量来检索 URL 组件。

例如，使用`http://mydomain.com/example/value2`：

```
$var = split('/', $_SERVER['REQUEST_URI']);

$var becomes array('example', 'value2'); 
```

# git - 使用带有 Nginx 的 Git 远程安装网站

> ID：12545747
> 
> 赞同：2
> 
> 时间：2012-09-22T16:43:02.540
> 
> 标签：git, nginx, amazon-ec2

我已按照此[站点](http://cuppster.com/2011/01/30/using-git-to-remotely-install-website-updates/)上列出的示例远程将我的文件添加到我的服务器，但是，我希望拥有`nginx:nginx`user:group 拥有的所有文件，以便在推送文件后我可以从浏览器访问文件。

我该如何修改`post-receive`钩子，以便`nginx:nginx`成为推送到远程“ubuntu”服务器的文件/文件夹的所有者？

我尝试了以下`post-receive`钩子，但是，如果正在修改文件，我会收到错误：`remote: error: unable to unlink old 'index.html' (Permission denied)`，这里的 shell 脚本：

```
#!/bin/sh
GIT_WORK_TREE=/var/www/www.foo.com/htdocs
export GIT_WORK_TREE
git checkout -f
exec sudo chown -R nginx:nginx $GIT_WORK_TREE 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:07:40.390

这通常是进程未释放这些文件（阻止 git checkout 完成其工作）的结果，如“ [Git Checkout 警告：无法取消链接文件，权限被拒绝](https://stackoverflow.com/questions/7199496/git-checkout-warning-unable-to-unlink-files-permission-denied)”中所述。

但这也可能是您的`sudo`命令成功运行一次的结果，使您的挂钩的任何未来执行失败，因为它不再有权以 ' `git`' 用户的身份签出。

如果是这种情况，你的钩子应该`sudo`作为`nginx:nginx`你当前的 git 命令，而不是`chown`最终结果（网络工作树）。

* * *

OP确认：

> 在`post-receive`我现在拥有的 git 钩子中`exec sudo -u nginx -g nginx ~/test.sh`（`test.sh`包含`GIT_WORK_TREE`上面的内容）。
> 但是，我收到另一个权限错误：`remote: fatal: Unable to create '/home/ubuntu/foo.git/index.lock': Permission denied`.
> 跑完之后`~/test.sh`还需要回去`ubuntu:ubuntu`吗？

我建议：

> 将您的 repo 声明为“ `shared by all`”，如“[在许多帐户中使用不带 Sudo 的 Git](https://stackoverflow.com/questions/1367258/using-git-without-sudo-in-many-accounts) ”。

这似乎解决了这个问题：

> 我根据`shared=true`提到的帖子将配置设置为，它现在似乎正在工作。

# javascript - 带有 twitter 引导程序和 jQuery 的表

> ID：12545749
> 
> 赞同：4
> 
> 时间：2012-09-22T16:43:15.863
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我有脚本的这个 js 部分：

```
jQuery.each(data, function(index, value) {
     $("table_div").append("<td>" + value + "</td>");
 }); 
```

我想用它来创建一个带有 twitter bootstrap 的表。在 html 页面中有这个表格元素：

```
<table class="table table-striped" id="table_div">
</table> 
```

但是这个解决方案不起作用。我该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T16:46:24.683

首先，您没有`<tr>`在表中附加任何需要的元素，其次您指的是`$("table_div")`而不是`$("#table_div")`（主题标签`#`意味着您指的是一个 ID，就像在 CSS 中一样）。

```
jQuery.each(data, function(index, value) {
     $("#table_div").append("<tr><td>" + value + "</td></tr>");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T17:16:44.963

除了引用节点`<table_div>`而不是 id之外`#table_div`，您不想将任何内容附加到表节点。

你应该看看[this](http://api.jquery.com/category/manipulation/)以及[here](http://www.w3schools.com/js/js_loop_for_in.asp)和[here](http://api.jquery.com/each/)。

无论如何，您应该`tbody`在使用**Twitters Bootstrap**时使用，例如：

```
<table id="table_div" class="table table-striped">
  <tbody></tbody>
<table> 
```

这里是正确的 js

```
for (i in data) {
  $('#table_div > tbody:last').append('<tr><td>'+data[i]+'</td></tr>');
} 
```

有关更多研究，请查看此处[在 jQuery 中添加表格行](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)

**编辑：**

好的，我用 twitters bootstrap 和 jQuery 给你写了一个完整的例子。这有效，如果它不适用于您的数据数组，则说明它有问题。

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">
</head>
<body>
<table class="table table-striped" id="my-table">
<tbody>
</tbody>
</table>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/bootstrap.js"></script>
<script type="text/javascript">
var data = ["foo","bar"];
$(document).ready(function(){
        $.each(data, function(i,item){
                $('#my-table > tbody:last').append('<tr><td>'+item+'</td></tr>');
        });
});
</script>
</body>
</html> 
```

# iphone - iPhone 和 iPad 的代码库或项目 - 建议有一个项目或 2 个项目

> ID：12545753
> 
> 赞同：0
> 
> 时间：2012-09-22T16:43:44.120
> 
> 标签：iphone, ipad, ios5

我是初学者，两个月前学习了objective-c，并使用storyboard & ios 5.1 开发了一个iphone 应用程序。我想用几乎相似的屏幕（缩放到 ipad）在 iPad 上复制相同的功能。我发现拥有一个项目可以帮助我共享大多数头文件和实现文件。

但是会不会影响性能。是否建议为 ipad 提供单独的代码库。我的 iphone 应用程序性能目前很好。我可能会为 iPad 添加更多功能。你有什么经验。请分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:11:40.733

从长远来看，一个项目将更易于管理。这篇文章有一些可能与您的项目相关的建议：

[如何启动一个同时输出 iPhone 和 iPad 的项目？](https://stackoverflow.com/questions/2657968/how-to-start-a-project-with-both-outputs-iphone-ipad/2658070#2658070)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:24:40.443

使用 1 个项目、1 个代码库和 1 个存储库。这就是我们做所有项目和应用程序的方式。

两个 UI 之间没有太多区别，当您确实想利用 iPhone 上不可用的 iPad 控件时，更容易简单地测试设备类型并调用适当的控件。设计良好的应用程序在大多数情况下都需要两者中的其余周围逻辑。

如果您的代码出现分歧，那么您将不得不在大多数情况下复制您所做的一切 TWICE 并尝试保持所有逻辑线程的连贯性，这将变得一团糟。不要这样做。你会后悔的，节省几个字节根本不值得。

# c++ - 使用 sort 和 qsort 进行 c 风格的字符串排序

> ID：12545754
> 
> 赞同：2
> 
> 时间：2012-09-22T16:43:52.233
> 
> 标签：c++, sorting, cstring, c-strings

我正在尝试同时使用 sort 和 qsort 来对 c 风格的字符串进行排序，然后他们会看到哪个更好，所以我编写了这段代码，但它不起作用，所以你能告诉我有什么问题吗它。提前致谢。

```
#include <iostream>
#include<vector>
#include<cstdlib>
#include<algorithm>
#include<cstring>
#include<chrono>
#include<string>
#include<sstream>

using namespace std;
using namespace std::chrono;

void bvect(vector<double> &vec, int num)
{
     auto gen = bind(normal_distribution<double>(15,4.0),default_random_engine());
     for(int i=0; i<num; ++i)
             vec.push_back(gen());
}

char* converttostring(int number)
{
   stringstream ss;
   ss << number;
   return (ss.c_str());
}

int cst_cmp(const void *one, const void *two) 
{ 
     char a = *((char*)one);
     char b = *((char*)two);
    return strcmp(a, b);
}

//Generated random strings
void textvect(vector<string> &vec, int num)
{
   srand(time(NULL));
     for(int i=0; i<num; ++i) 
             vec.push_back(converttostring(rand()%num +1));
}

void displayvector(vector<char*>vect)
{
     for (int i=0; i<vect.size(); ++i){
         for (int j=0; j<strlen(vect[i]); ++j)
         cout<<vect[i][j];
         cout<<endl;
         }
}

int main(){
    int sz=100000;
    vector<char*>text1, text2;
    textvect(text1, sz);
    text2.resize(text1.size());
    copy(text1.begin(),text1.end(),text2.begin());

    // qsort() string
    auto t1 = system_clock::now();
    qsort(&text1[0], text1.size(), sizeof(char*), cst_cmp);
    auto t2 = system_clock::now();
    auto dms = duration_cast<milliseconds>(t2-t1);
    cout << "string qsort() took " << dms.count() << " milliseconds\n";

    // sort() string
    auto t3 = system_clock::now();  
    std::sort(text2.begin(), text2.end());
    auto t4 = system_clock::now();
    auto dms1 = duration_cast<milliseconds>(t4-t3);
    cout << "string sort() took " << dms1.count() << " milliseconds\n";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:51:18.377

对于`std::sort`，您只是使用默认比较器，它只会比较指针值。您需要传递一个进行适当比较的比较器（例如，使用 strcmp）：

```
std::sort(text2.begin(), text2.end(),
    [](const char* lhs, const char* rhs) { return strcmp(lhs,rhs) < 0; }); 
```

这是一个问题，可能还有其他问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:01:27.713

这些是我在尝试编译您的代码时遇到的错误：

```
> g++ main.cc -std=c++0x
main.cc: In function ‘char* converttostring(int)’:
main.cc:24:15: error: ‘std::stringstream’ has no member named ‘c_str’
main.cc: In function ‘int cst_cmp(const void*, const void*)’:
main.cc:31:23: error: invalid conversion from ‘char’ to ‘const char*’ [-fpermissive]
/usr/include/string.h:143:12: error:   initializing argument 1 of ‘int strcmp(const char*, const char*)’ [-fpermissive]
main.cc:31:23: error: invalid conversion from ‘char’ to ‘const char*’ [-fpermissive]
/usr/include/string.h:143:12: error:   initializing argument 2 of ‘int strcmp(const char*, const char*)’ [-fpermissive]
main.cc: In function ‘int main()’:
main.cc:55:23: error: invalid initialization of reference of type ‘std::vector<std::basic_string<char> >&’ from expression of type ‘std::vector<char*>’
main.cc:35:6: error: in passing argument 1 of ‘void textvect(std::vector<std::basic_string<char> >&, int)’ 
```

24:15`c_str()`是`string`not of的成员函数`stringstream`。见[这里](http://www.cplusplus.com/reference/string/string/c_str/)。

31:23`strcmp()`要两个`const char *`不是两个`char`。见[这里](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)。

55:23 和 35:6`char*`与`string`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T16:53:07.293

一个问题是您的比较功能`qsort`：

```
int cst_cmp(const void *one, const void *two) 
{ 
     char a = *((char*)one);
     char b = *((char*)two);
    return strcmp(a, b);
} 
```

您不是在这里比较字符串，因为`a`and`b`只是字符。你不妨避开它们：

```
int cst_cmp(const void *one, const void *two) 
{ 
return (strcmp(*(char **)one, *(char **)two));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T17:12:51.363

此功能不起作用

```
char* converttostring(int number)
{
   stringstream ss;
   ss << number;
   return (ss.c_str());
} 
```

如果它是固定的（`ss.str().c_str()`），它将返回一个指向临时的指针。

如果你有一个支持 C++11 的编译器，你可以`std::to_string`从标准库中使用。否则，将返回类型更改为`std::string`（无指针！）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T22:38:02.367

问 Stroustrup ;) 只需为 C 字符串数组分配空间并在其中输入字符.. 记得释放它..

# class - 如何从类内的 mysqli 查询返回结果并在类外格式化它们

> ID：12545755
> 
> 赞同：0
> 
> 时间：2012-09-22T16:44:19.807
> 
> 标签：class, methods, mysqli

我开始使用 mysqli 准备好的语句，并试图编写一个类方法来检索与某些日期条件匹配的记录，但不显示它们——我希望能够在类之外格式化结果。

我在显示结果时让类方法工作：

```
public function periodReceipts(){

    global $db;

    if($query = $db->prepare("SELECT * FROM receipts WHERE date BETWEEN ? AND ? ORDER BY date ASC")){
        $query->bind_param("ss", $this->date1, $this->date2);
        $query->execute();

        $query->bind_result($id, $user_id, $vendor, $amount, $cat, $date);

        $query->fetch();

        while($query->fetch()){
            echo "$id, $user_id, $vendor, $amount, $cat, $date <br/>";
        }

        $query->close();
    }
} 
```

我有一个类似的方法可以执行 mysqli 查询，检索记录，计算总数，然后返回未格式化的结果，以便稍后显示：

```
public function runningTotal(){

    global $db;

    if($query = $db->prepare("SELECT amount FROM receipts WHERE user_id = ?")){
        $query->bind_param("i", $this->uid);
        $query->execute();
        $query->bind_result($amount);
        $running_total = 0;
        while($query->fetch()){
            $running_total += $amount;
        }
        $query->close();
    }
    return $running_total;
    $db->close();
} 
```

但我不知道如何让 periodReceipts() 方法表现类似。我假设我需要将数据放入一个数组中，但我该怎么做，以及以后如何访问它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:51:46.303

更改您的方法，如下所示

```
...
$result = array();
while($query->fetch()){
    $result[] = array(
        'id' => $id,
        'user_id' => $user_id,
        'vendor' => $vendor,
        'amount' => $amount,
        'cat' => $cat,
        'date' => $date
    );
}
$query->close();
return $result;
... 
```

然后您将在数组中获取所有记录：

```
$result = $your_class_instance->periodReceipts();
var_dump($result); 
```

# typedef - Dart 中的函数类型定义/函数类型别名是什么？

> ID：12545762
> 
> 赞同：86
> 
> 时间：2012-09-22T16:45:00.620
> 
> 标签：typedef, dart

我已经阅读了描述，并且我理解它是一个函数类型的别名。

*   typedef 或函数类型别名为函数类型提供了一个名称，您可以在声明字段和返回类型时使用该名称。当将函数类型分配给变量时，typedef 会保留类型信息。

*   [http://www.dartlang.org/docs/spec/latest/dart-language-specification.html#kix.yyd520hand9j](http://www.dartlang.org/docs/spec/latest/dart-language-specification.html#kix.yyd520hand9j)

但是我该如何使用它呢？为什么用函数类型声明字段？我什么时候使用它？它解决了什么问题？

我想我需要一两个真实的代码示例。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-22T17:21:13.663

Dart 中 typedef 的一个常见使用模式是定义一个回调接口。例如：

```
typedef void LoggerOutputFunction(String msg);

class Logger {
  LoggerOutputFunction out;
  Logger() {
    out = print;
  }
  void log(String msg) {
    out(msg);
  }
}

void timestampLoggerOutputFunction(String msg) {
  String timeStamp = new Date.now().toString();
  print('${timeStamp}: $msg');
}

void main() {
  Logger l = new Logger();
  l.log('Hello World');
  l.out = timestampLoggerOutputFunction;
  l.log('Hello World');
} 
```

运行上述示例会产生以下输出：

> 你好世界
> 2012-09-22 10:19:15.139: 你好世界

typedef 行说 LoggerOutputFunction 接受一个字符串参数并返回 void。

timestampLoggerOutputFunction 与该定义匹配，因此可以分配给 out 字段。

如果您需要另一个示例，请告诉我。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-04-19T04:22:16.420

Dart 1.24 引入了一种新的 typedef 语法来支持泛型函数。仍然支持以前的语法。

```
typedef F = List<T> Function<T>(T); 
```

有关更多详细信息，请参阅[https://github.com/dart-lang/sdk/blob/master/docs/language/informal/generic-function-type-alias.md](https://github.com/dart-lang/sdk/blob/master/docs/language/informal/generic-function-type-alias.md)

函数类型也可以内联指定

```
void foo<T, S>(T Function(int, S) aFunction) {...} 
```

另请参阅[https://www.dartlang.org/guides/language/language-tour#typedefs](https://www.dartlang.org/guides/language/language-tour#typedefs)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-05-05T23:49:31.430

```
typedef LoggerOutputFunction = void Function(String msg); 
```

这看起来比以前的版本清晰得多

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-04-26T02:00:41.213

只是稍微修改了答案，根据最新的 typedef 语法，示例可以更新为：

```
typedef LoggerOutputFunction = void Function(String msg);

class Logger {
  LoggerOutputFunction out;
  Logger() {
    out = print;
  }
  void log(String msg) {
    out(msg);
  }
}

void timestampLoggerOutputFunction(String msg) {
  String timeStamp = new Date.now().toString();
  print('${timeStamp}: $msg');
}

void main() {
  Logger l = new Logger();
  l.log('Hello World');
  l.out = timestampLoggerOutputFunction;
  l.log('Hello World');
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-15T16:14:29.153

`Typedef`在 Dart 中用于为其他应用程序功能创建用户定义的函数（别名），

```
Syntax: typedef function_name (parameters); 
```

在 typedef 的帮助下，我们还可以将变量分配给函数。

```
Syntax:typedef variable_name = function_name; 
```

分配变量后，如果我们必须调用它，那么我们可以这样：

```
Syntax: variable_name(parameters); 
```

**例子：**

```
// Defining alias name
typedef MainFunction(int a, int b);

functionOne(int a, int b) {
  print("This is FunctionOne");
  print("$a and $b are lucky numbers !!");
}

functionTwo(int a, int b) {
  print("This is FunctionTwo");
  print("$a + $b is equal to ${a + b}.");
}

// Main Function
void main() {
  // use alias
  MainFunction number = functionOne;

  number(1, 2);

  number = functionTwo;
 // Calling number
  number(3, 4);
} 
```

**输出：**

```
This is FunctionOne
1 and 2 are lucky numbers !!
This is FunctionTwo
3 + 4 is equal to 7 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-05-20T20:18:52.193

从 dart 2.13 版开始，您`typedef`不仅可以使用函数，还可以使用您想要的每个对象。

例如，这段代码现在完全有效：

```
typedef IntList = List<int>;
IntList il = [1, 2, 3]; 
```

有关更多详细信息，请参阅更新信息： [https ://dart.dev/guides/language/language-tour#typedefs](https://dart.dev/guides/language/language-tour#typedefs)

# iphone - iOS 在为 SQLite 记录添加书签时遇到问题

> ID：12545765
> 
> 赞同：3
> 
> 时间：2012-09-22T16:45:16.227
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我创建了一个包含多个数据库的字典应用程序，除了将列保存在书签中之外，一切正常！，我知道，不可能更改 NSBundle 中的文件，但我不知道如何修复它。如果您能帮助我，我将不胜感激这里是代码：

```
- (NSString *) getDBPath {
    NSString *path;

    if ( [[[NSUserDefaults standardUserDefaults] stringForKey:@"Bv"] intValue] == 2)
    {
        path = [[NSBundle mainBundle]pathForResource:@"pr-eng" ofType:@"sqlite"];

    } else {

        path = [[NSBundle mainBundle]pathForResource:@"eg-pr" ofType:@"sqlite"];
    }

    if ( [[[NSUserDefaults standardUserDefaults] stringForKey:@"Bv"] intValue] == 3)
    {
        path = [[NSBundle mainBundle]pathForResource:@"german" ofType:@"sqlite"];
    }

    return path;    
} 
```

**这是书签功能：**

```
-(void) setBookMark:(NSInteger)oid {

sqlite3_stmt    *statement;

const char *dbpath = [[self getDBPath] UTF8String];

if (sqlite3_open(dbpath, &database) == SQLITE_OK)
{
    NSString *SetFavSQL = [NSString stringWithFormat: @"UPDATE DIC SET bookmark=1 WHERE id=\"%d\"", oid];
    //      NSLog(@"%@",SetFavSQL);
    const char *SetFav_stmt = [SetFavSQL UTF8String];

    sqlite3_prepare_v2(database, SetFav_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) != SQLITE_DONE)
    {

    }
    sqlite3_finalize(statement);
    sqlite3_close(database);
}
} 
```

**读取数据库：**

```
-(void) read_Database{

NSMutableArray *DB_Array = [[NSMutableArray alloc] init];
NSMutableArray *word_Array = [[NSMutableArray alloc] init];

if(sqlite3_open([[self getDBPath]UTF8String], &database) == SQLITE_OK) {

    NSString *sql =@"SELECT * FROM DIC";

    //        NSLog(@"%@",sql);

    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(database, [sql UTF8String] , -1, &compiledStatement, NULL) == SQLITE_OK) {
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {

            NSInteger oid = sqlite3_column_int(compiledStatement, 0);

            const char* f1 = (const char*)sqlite3_column_text(compiledStatement, 1);
            NSString *oName = f1 == NULL ? nil : [[NSString alloc] initWithUTF8String:f1];

            const char* f2 = (const char*)sqlite3_column_text(compiledStatement, 2);
            NSString *oMean = f2 == NULL ? nil : [[NSString alloc] initWithUTF8String:f2];

            const char* f3 = (const char*)sqlite3_column_text(compiledStatement, 3);
            NSString *oPron = f3 == NULL ? nil : [[NSString alloc] initWithUTF8String:f3];

            NSInteger bm = sqlite3_column_int(compiledStatement, 5);

            readerClass = [[Reader alloc]initWithReadDB:oid Name:oName Mean:oMean Pron:oPron bookMark:bm];

            [DB_Array addObject:readerClass];
        }
    }
    sqlite3_finalize(compiledStatement);

}
sqlite3_close(database);

AppDelegate *appDelegateClass = (AppDelegate *)[[UIApplication sharedApplication] delegate];

[appDelegateClass.wordList removeAllObjects];
appDelegateClass.wordList=[word_Array mutableCopy];

[appDelegateClass.dictionaryArray removeAllObjects];
appDelegateClass.dictionaryArray=[DB_Array mutableCopy];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:52:34.323

> 我知道，不可能更改 NSBundle 中的文件

太好了，至少你努力用谷歌搜索这个问题。那么，为什么不在应用程序第一次启动时将这些文件复制到某个可写路径，例如 NSDocumentsDirectory？

```
NSArray *paths = NSSearchPathsForDirectoriesInDomains(NSDocumentsDirectory, NSUserDomainMask, YES);
NSString *docsDir = [paths objectAtIndex:0];
[[NSFileManager defaultManager] copyItemAtPath:path toPath:[docsDir stringByAppendingPathComponent:@"db.sql"] error:NULL]; 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:37:09.167

我认为您只需要制作一个主数据库，并且可以在其中包含多个表。那可以解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:37:34.837

为了进一步改进@H2CO3 的答案并获得更多说明，我发布了我的答案:)

这是我在 iPhone 或 iPad (iOS) 上将数据保存到数据库的方法。所有数据都保存在本地设备中。因此，如果应用程序被卸载，所有数据都将丢失，如果用户没有备份应用程序并从备份中恢复。

```
NSFileManager *fileMgr;
NSString *homeDir; 
```

这些是我在以下函数中使用的 ivar，所有函数都在我的 .m 文件中，该文件包含我所有的数据库相关函数，如更新、插入、选择、删除。

```
-(void)CopyDbToDocumentsFolder
{
    NSError *err=nil;
    fileMgr = [NSFileManager defaultManager];
    NSString *dbpath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"res_in_mil.sqlite"];
    NSString *copydbpath = [self.GetDocumentDirectory stringByAppendingPathComponent:@"res_in_mil.sqlite"];
    [fileMgr removeItemAtPath:copydbpath error:&err];
    if(![fileMgr copyItemAtPath:dbpath toPath:copydbpath error:&err])
    {
        UIAlertView *tellErr = [[UIAlertView alloc] initWithTitle:title message:@"Unable to copy database." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [tellErr show];

    }
}
-(NSString *) GetDocumentDirectory
{
    fileMgr = [NSFileManager defaultManager];
    homeDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    return homeDir;
} 
```

由于名称不言自明，因此无需解释这些功能的用途。

在 appDelegate.m 中，我使用以下代码将我的数据库复制到可以编辑我的数据库的指定位置。此代码在`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法中。

```
NSFileManager *fileMgr;
myDB *dbObj = [[myDB alloc]init];
fileMgr = [NSFileManager defaultManager];
NSString *dbPath = [[dbObj GetDocumentDirectory] stringByAppendingPathComponent:@"res_in_mil.sqlite"];
BOOL success = [fileMgr fileExistsAtPath:dbPath];
if(!success)
    [dbObj CopyDbToDocumentsFolder]; 
```

我将它用于一个数据库，因为我只有一个数据库。但我认为您可以扩展这些功能以复制多个数据库。

甚至您可以使用上面给出的方法代码创建一个函数来识别所需的数据库是否在 DocumentDirectory 中`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`。

对于插入、更新、删除、选择操作，我使用以下代码打开数据库以进行任何访问。

```
fileMgr = [NSFileManager defaultManager];
NSString *dbPath = [[self GetDocumentDirectory] stringByAppendingPathComponent:@"res_in_mil.sqlite"];
BOOL success = [fileMgr fileExistsAtPath:dbPath];

if(!success)
    {
        NSLog(@"Cannot locate database file '%@'",dbPath);
        [self CopyDbToDocumentsFolder];
    } 
```

快乐编码:)

# bitbucket - 使用 Egit 将项目推送到 Bitbucket 会删除之前的推送

> ID：12545767
> 
> 赞同：0
> 
> 时间：2012-09-22T16:45:28.653
> 
> 标签：bitbucket, egit

当我使用 Egit 向 Bitbucket 中的团队推送某些内容时（我们都是管理员），之前任何成员的帖子都会被删除。如果他们也推动某些事情，其他成员也会发生同样的事情。

我使用这个配置：

![在此处输入图像描述](../Images/a256b1d0a431534cea6751c1429d0afb.png)

一切都很好，但是这个，有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:45:01.293

为什么要检查“强制更新”？

通常（未配置“强制更新”时），在您将丢弃其他人的更改的情况下，服务器会以“非快进”消息拒绝推送。在这种情况下，您必须首先将远程更改合并到本地分支中，然后再次推送。这样，保留了其他更改。

但是，当您选中“强制更新”并推送分支时，远程存储库上的分支会更新为指向它指向本地分支的相同提交。即使您的分支落后或偏离远程分支，也会发生这种情况，导致它有效地覆盖/丢弃其他人的提交。

所以你想要的是禁用“强制更新” `refs/heads/*`（头是分支的另一个词）。另请参阅帮助中[有关快](http://git-scm.com/docs/git-push#_note_about_fast-forwards)`git push`进的说明。

注意：在某些服务器软件中，可以配置存储库，以便拒绝此类“非快进推送”（无论客户端的强制标志如何）。但这似乎还不受 Bitbucket 支持，请参阅[此问题](https://bitbucket.org/site/master/issue/4002/allow-users-to-set-the-flag)。

# android - Android：单击按钮时停止并播放声音

> ID：12545779
> 
> 赞同：1
> 
> 时间：2012-09-22T16:46:30.080
> 
> 标签：android, audio, media-player, game-engine

我想在游戏中单击按钮时播放声音。我可以使用以下代码轻松做到这一点

```
mp = MediaPlayer.create(getApplicationContext(), R.raw.sound);
mp.start(); 
```

问题是，我的点击率比播放我的声音剪辑的持续时间要快。如何停止它并在第二次或第三次单击时再次播放等等。

我想匹配声音播放以匹配我的点击率。

感谢 Abhinav Tyagi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:51:52.123

首先，您应该`MediaPlayer`只用于大文件，如音乐。对于播放音效，`SoundPool`是要走的路。

[此处](http://www.vogella.com/articles/AndroidMedia/article.html)提供了有关播放媒体的出色教程。

单击您的按钮，立即按顺序调用`soundPool.stop()`和`soundPool.play()`以停止和开始您的音频播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:51:37.270

您可以调用 MediaPlayer.Stop 停止它播放声音。您还可以调用 MediaPlayer.Reset 将其返回到空闲状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-17T06:55:59.200

```
public class MainActivity extends AppCompatActivity {

MediaPlayer mplayer;

public void startPlay(View view) {
    mplayer.start();
}

public void stopPlay(View view) {
    mplayer.pause();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mplayer = MediaPlayer.create(this, R.raw.laugh);
} 
```

}

# jquery - 为什么放置在标签内的jQuery代码有时不起作用

> ID：12545780
> 
> 赞同：0
> 
> 时间：2012-09-22T16:46:40.533
> 
> 标签：jquery, asp.net

我经常发现自己在一个地方，即使是像下面这样的简单 jQuery 代码 -

```
jQuery(document).ready(function () {
    jQuery("input[type='text']").click(function () {
        this.select();
    });
}); 
```

放置在“head”标签内时不起作用，但在母版页中将这个片段移动到正文标签的末尾之前可以正常工作。是否有任何我缺少的基本 JavaScript/jQuery 原则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:13:38.547

可能有多种原因，其中一些是：

*   您`jquery.js`在此代码块之后加载文件 - 解决方案是将您的代码移动到文件的链接下方
*   尽管`.ready()`几乎可以保证其中的代码仅在`document`加载完成后才会触发，但您尝试选择的文本元素仍有可能尚未准备好/加载 - 这里的解决方案是使用以下`.on()`方法：`jQuery("input[type='text']").on('click', function () {...}));`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T20:19:01.713

过去我遇到过类似的问题，即 scipt 不会总是对尚未准备好的元素开火。

尝试使用`$(window).load()`而不是`$(document).ready()`.

# sql - SQL 子查询：这如何给出输出？

> ID：12545784
> 
> 赞同：2
> 
> 时间：2012-09-22T16:47:18.613
> 
> 标签：sql

这是我的表结构

```
 CREATE TABLE branch_book_list (
   branch_name CHAR(10),
   book_ISBN CHAR (13),
   book_name CHAR(40),
   PRIMARY KEY (branch_name, book_ISBN)
   ) 
```

我在表中有这些数据行：

```
branch_name book_ISBN     book_name                                
----------- ------------- ---------------------------------------- 
Branch A    1-56592-756-7 Transact-SQL Cookbook                   
Branch A    1-56592-401-0 Transact-SQL Programming                
Branch A    1-56592-401-0 Transact-SQL Programming                
Branch B    1-56592-756-7 Transact-SQL Cookbook                   
Branch B    1-56592-756-7 Transact-SQL Cookbook                   
Branch B    1-56592-401-0 Transact-SQL Programming 
```

当我执行此查询时：

```
SELECT bbl1.*, COUNT(*) DupeCount
FROM branch_book_list bbl1
WHERE bbl1.branch_name = 'Branch A'
GROUP BY bbl1.branch_name, bbl1.book_ISBN, bbl1.book_name
HAVING NOT EXISTS (
      SELECT bbl2.*, COUNT(*)
      FROM branch_book_list bbl2
      WHERE branch_name = 'Branch B'
      GROUP BY bbl2.branch_name, bbl2.book_ISBN, bbl2.book_name
      HAVING bbl1.book_ISBN = bbl2.book_ISBN
         AND bbl1.book_name = bbl2.book_name
         AND COUNT(*) = COUNT(ALL bbl1.book_ISBN)) 
```

输出是

```
branch_name book_ISBN     book_name                                DupeCount   
----------- ------------- ---------------------------------------- ----------- 
Branch A    1-56592-401-0 Transact-SQL Programming                 2
Branch A    1-56592-756-7 Transact-SQL Cookbook                    1 
```

当我只执行查询的顶部时

```
SELECT bbl1.*, COUNT(*) DupeCount
FROM branch_book_list bbl1
WHERE bbl1.branch_name = 'Branch A'
GROUP BY bbl1.branch_name, bbl1.book_ISBN, bbl1.book_name 
```

我的输出是

```
branch_name book_ISBN   book_name                   DupeCount
Branch A    1-56592-401-0   Transact-SQL Programming    2
Branch A    1-56592-756-7   Transact-SQL Cookbook       1 
```

但是当完整的查询被执行时，我如何得到这个输出

```
branch_name book_ISBN     book_name                                DupeCount   
----------- ------------- ---------------------------------------- ----------- 
Branch A    1-56592-401-0 Transact-SQL Programming                 2
Branch A    1-56592-756-7 Transact-SQL Cookbook                    1 
```

谁能告诉我如何获得高于输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:07:16.027

您的 NOT EXISTS 子查询在不同分支中搜索具有相同 ISBN、相同名称*和相同数量重复项的行*。如果其他分支中的这些条件*不匹配*，则查询会在输出中包含该行。

现在，两个分支具有相同的项，但重复项的数量不同，这就是返回两个分支 A 项的原因，即[它们](http://sqlfiddle.com/#!3/810fd/2)*没有被 HAVING 子句[*过滤掉。*](http://sqlfiddle.com/#!3/810fd/2)但是尝试例如删除这两项中的一项`(Branch B, 1-56592-756-7)`，[您将看到](http://sqlfiddle.com/#!3/9588c/2)完整查询和简化版本之间的区别。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:53:46.383

你的困惑是什么？过滤器`WHERE bbl1.branch_name = 'Branch A'` 将所有三个查询限制为仅分支 A 记录...因此，Having Not exists 是多余的...
have 子句检查的任何记录都不能包含 Branch B 数据，因为 Where 子句过滤器的主要部分查询消除了它们。*

# scala - Scala添加两个列表的内容

> ID：12545787
> 
> 赞同：1
> 
> 时间：2012-09-22T16:47:51.443
> 
> 标签：scala

对于课程的第一个作业[https://www.coursera.org/course/progfun](https://www.coursera.org/course/progfun) 我想做以下

```
 val l1 = List(1,2,3)
   val l2 = List(4,5,6)

   val lSum = l1.someOperation(l2)
   RES: lSum=List(5,7,9) 
```

我可以用循环实现 someOperation ，但这看起来不是很标量，我想知道是否有内置函数来实现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T17:41:21.293

除了`zip`，标准库还提供`zipped`了避免解构任何元组的需要：

`(l1, l2).zipped.map(_ + _)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T16:50:17.053

您可以像往常一样在地图中压缩它们并执行添加：

```
l1.zip(l2).map(x => x._1 + x._2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T17:33:00.370

这可能比 @om-nom-nom 的代码更 Scalaish。尽管随着语言的发展，Scala 还很年轻，所以实际上仍然存在关于什么*是*Scalaish什么*不是*Scalaish 的争论：

```
l1 zip l2 map { case (a, b) => a + b } 
```

# asp.net - 如何在.net web api控制器中读取多部分表单数据

> ID：12545788
> 
> 赞同：12
> 
> 时间：2012-09-22T16:47:52.800
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, asp.net-web-api

```
public class Sampleontroller:apicontroller
 {    
    public void PostBodyMethod() {
        HttpRequestMessage request=this.request;
     //How to read the multi part data in the method
    }
} 
```

我正在向 webapi 控制器发送多部分数据。如何读取方法中的内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-03T15:07:46.840

一个“异步”示例：

```
public async Task<HttpResponseMessage> PostSurveys()
    {
        // Verify that this is an HTML Form file upload request
        if (!Request.Content.IsMimeMultipartContent("form-data"))
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }

            //Destination folder
            string uploadFolder = "mydestinationfolder";

            // Create a stream provider for setting up output streams that saves the output under -uploadFolder-
            // If you want full control over how the stream is saved then derive from MultipartFormDataStreamProvider and override what you need.            
            MultipartFormDataStreamProvider streamProvider = new MultipartFormDataStreamProvider(uploadFolder );                
            MultipartFileStreamProvider multipartFileStreamProvider = await Request.Content.ReadAsMultipartAsync(streamProvider);

            // Get the file names.
            foreach (MultipartFileData file in streamProvider.FileData)
            {
                //Do something awesome with the files..
            }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T16:58:20.663

看看 Mike Wasson 的文章： [http ://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

或者，如果您正在上传文件，请访问：[www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/](http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/)

# clojure - 是否有一个可以在 clojure 和 clojurescript 中使用的发布-订阅

> ID：12545792
> 
> 赞同：4
> 
> 时间：2012-09-22T16:48:35.790
> 
> 标签：clojure, publish-subscribe, clojurescript

我正在尝试编写一个可以在 clojure 和 ClojureScript 中运行的游戏[Crossfire](https://github.com/m0smith/crossfire)，我需要一个可以在两者中运行的发布-订阅机制。我见过[lamina](https://github.com/ztellman/lamina)和[Shoreleave](https://github.com/shoreleave/shoreleave-pubsub)，但两者都依赖于各自的环境。

我需要一个事件系统，订阅者可以在其中等待消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T16:03:17.000

**更新：**

这个问题是在 core.async 发布之前提出并回答的。core.async 旨在准确解决这个问题，您绝对应该将它用于未来的所有项目。

**原答案：**

它并不是真正的异步，但我已经非常喜欢为此使用原子和观察者。非常简单但高度灵活的模型，并且内置于两种语言中。

一个非常简单的例子：

```
(def my-channel (atom nil))

;; subscribe
(add-watch my-channel :watcher1
  (fn [_ _ _ message]
    (js/alert (str "Received message: " message))))

;; publish
(reset! my-channel "my-message")

;; unsubscribe
(remove-watch my-channel :watcher1) 
```

这种方法的美妙之处在于原子的状态可以是任何对象。在这里，我只是简单地重置消息的原子状态，但您也可以将原子的状态设置为消息的完整历史记录，或者最后 5 条消息，或者代表整个系统的状态机，或者任何你想要的想。

# algorithm - 中位数算法的中位数解释

> ID：12545795
> 
> 赞同：15
> 
> 时间：2012-09-22T16:48:39.590
> 
> 标签：algorithm, quicksort, median, median-of-medians

该`Median of medians`方法在类型划分算法中非常流行，`quicksort`可以产生相当好的枢轴，从而均匀地划分数组。其逻辑在 Wikipedia 中给出为：

> 选择的枢轴小于和大于中位数列表中元素的一半，每半数约为 n/10 个元素 (1/2 * (n/5))。这些元素中的每一个都是 5 的中位数，使其小于块外的 2 个其他元素和大于 2 个其他元素。因此，主元小于块外的 3(n/10) 个元素，大于块外的另外 3(n/10) 个元素。因此，所选中值将元素拆分为 30%/70% 和 70%/30% 之间的某个位置，这确保了算法的最坏情况线性行为。

有人可以为我解释清楚一点。我发现很难理解其中的逻辑。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-22T16:58:45.610

考虑以下一组数字：

```
5 2 6 3 1 
```

这些数字的中位数是`3`。现在，如果您有一个数字`n`，如果`n > 3`，那么它至少大于上述数字的一半。如果`n < 3`，则它至少小于上述数字的一半。

这就是想法。也就是说，对于每组 5 个数字，你得到他们的中位数。现在你有`n / 5`数字了。这是显而易见的。

现在，如果你得到这些数字的中位数（称之为`m`），它大于其中的一半并且小于另一半（根据中位数的定义！）。换句话说，`m`大于`n / 10`数字（它们本身是小 5 个元素组的中位数）并且大于另一个`n / 10`数字（同样是小 5 个元素组的中位数）。

在上面的示例中，我们看到如果中位数是`k`并且您有`m > k`，则`m`也大于其他 2 个数字（它们本身小于`k`）。这意味着对于那些`m`大于其中位数的较小的 5 个元素组中的每一个，`m`也大于其他两个数字。这使得在每个小的 5 个元素组中至少有 3 个数字（2 个数字 + 中位数本身），`n / 10`小于`m`. 因此，`m`至少大于`3n/10`数字。

元素数量的类似逻辑`m`大于。

# c - 为什么这个 C 代码在我使用时会出现段错误 | 而不是||？

> ID：12545799
> 
> 赞同：0
> 
> 时间：2012-09-22T16:49:02.880
> 
> 标签：c

每当我使用短路或（`|`）时，以下代码会出现段错误，并且在不短路（`||`）时编译完美？

编译使用`gcc -Wall ../IsNull/IsNull.c ../IsEmpty/IsEmpty.c *.c -o IsNullOrEmpty`：

```
#include <stdbool.h>

#include "../IsNull/IsNull.h"
#include "../IsEmpty/IsEmpty.h"

#include "IsNullOrEmpty.h"

_Bool isNullOrEmpty (char *str);

_Bool isNullOrEmpty (char *str) {
    return (isNull (str) | isEmpty (str));     
} /* end of isNullOrEmpty() */ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T16:57:01.697

您应该使用`||`（*逻辑*或运算符）而不是`|`（*按位*或运算符）。前者短路而后者不短路**，**因此出现分段错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:00:35.113

按位 Or ( `|`) 不能短路，因为它不是布尔表达式的一部分。它只是一个操作（如 sum ），因此 *必须*执行每一方以产生实际上是`or`函数返回的两个值的每位位的结果。

# css - iPad浏览器上的CSS页脚背景没有完整

> ID：12545804
> 
> 赞同：0
> 
> 时间：2012-09-22T16:49:56.920
> 
> 标签：css, ipad, magento, footer

我添加了页脚背景图片。它在我的电脑上看起来很完美。但它在 iPad 浏览器上显示不正确。我正在尝试上传图片给你看，但我对stackoverflow很陌生，所以我不能上传。如果有人知道如何给你看图片。请让我知道我会上传它。请看右下角的黑色部分。任何人都请帮我解决这个问题

谢谢

我将此行添加到我的 css 中。

```
.footer{ border-top: 4px solid #00b0bd; }
.footer a{ color: #000000;}
.footer-container { width:100%; text-align: left; background: url("../images/footer/footer_damask.gif") repeat scroll 0 0 #333333;}
.footer { margin: 0 auto 15px; width: 960px; }
.aditional-footer { margin:0 auto 0; padding: 30px 0 30px; width: 960px; background-image:none !important;}
.footer .links li { text-transform: none; }
.footer-container a { color:#666669; font-size: 11px; width: 960px; }
.footer-container .footer-right { width: 250px; }
.footer .f-right { width:429px; text-align: right; padding-right:20px; } 
```

这是我的完整 CSS。

```
/* Footer ================================================================================ */
.footer-social-container { width:100%; background: none repeat scroll 0 0 #404040; border-top: 0 solid #00aebb;}
.footer-social { width:960px; padding: 5px 0; margin:0 auto; }
.footer-social .phone { color:#111; float:right; font-size:16px; }
.footer-social .follow_us { display: inline-block; font-size: 16px; margin: 0; float: left; color:#ffffff; }
.footer-social .twitter,
.footer-social .rss,
.footer-social .facebook { margin-left: 5px; text-indent: -9999px; display: inline-block; float: left; background-repeat: no-repeat; background-position: top center; height:24px; width:30px; }
.footer-social .twitter:hover,
.footer-social .rss:hover,
.footer-social .facebook:hover { background-position: bottom center; }
.footer-social .twitter { background-image: url(../images/twitter.png); }
.footer-social .rss { background-image: url(../images/rss.png); }
.footer-social .facebook { background-image: url(../images/facebook.png); }
.footer-social  .gift_img { float: left; border-left: 1px solid #00afbc; border-right: 1px solid #00afbc; padding: 0 50px; margin: 0 0 0 100px; } 

.footer{ border-top: 4px solid #00b0bd; }
.footer a{ color: #000000;}

.footer-container { width:100%; text-align: left; background: url("../images/footer/footer_damask.gif") repeat scroll 0 0 #333333;}

.footer { margin: 0 auto 15px; width: 960px; }
.aditional-footer { margin:0 auto 0; padding: 30px 0 30px; width: 960px; background-image:none !important;}
.footer .links li { text-transform: none; }
.footer-container a { color:#666669; font-size: 11px; width: 960px; }
.footer-container .footer-right { width: 250px; }

.footer .f-right { width:429px; text-align: right; padding-right:20px; }

.footer ul { display:inline; }
.footer li { display:inline; background:url(../images/bkg_pipe1.gif) 100% 50% no-repeat; padding:0 5px 0 0; margin:0 3px 0 0; }
.footer .links li.last { background:none !important; padding-right:0 !important; }
.footer .bugs { margin:0; color:#666; }
.footer .bugs a { font-weight:bold; color:#353535; }
.footer address { color:#666; }
.footer address a { color:#353535; }

.policy li { margin-left:2px; padding-left:10px ; line-height: 1.5; background: url(../images/footer_li.png) no-repeat left top;}
.policy li:hover { background: url(../images/footer_li.png) no-repeat left bottom;}

.footer-container .form-subscribe { }
.footer-container .form-subscribe label { padding-top:2px; font-weight:bold; color:#555; }
.footer-container .form-subscribe .input-box { border: 1px solid #EFEFEF; width: auto; float: left; height: 27px;}
.footer-container .form-subscribe button.button { float:left; width: 58px;}
.footer-container .form-subscribe button.button span { height: 22px; font: normal 11px/22px Tahoma, Verdana, Arial, sans-serif; }
.footer-container .form-subscribe input.input-text { width: 180px; border: 0px solid #d6d4d4; border-right:0; padding: 0; padding-left: 8px; float:left; height: 27px; line-height: 27px; }
.footer-container .form-subscribe input.input-text:focus { border: 1px solid #FF292C; border-right: 0; height: 25px; line-height: 15px }
.footer-container .form-subscribe input.input-text.validation-failed { background: none!important; border-right:0!important; }
.footer-container .form-subscribe .validation-advice { position: absolute; width: 171px; margin-top: 31px; background: white; padding:5px; }

.footer-container .footer-callout { display:block; margin:-10px 0 10px; position:relative; }
.footer-container .store-switcher { color:#555; text-align:right; }
.footer-container .store-switcher label { font-weight:bold; vertical-align:middle; }
.footer-container .store-switcher select { padding:0; vertical-align:middle; }

.footer-container .bottom-container { margin:0 0 8px; text-align:right; }
/* ======================================================================================= */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:10:11.980

不是 iPad 特有的问题，而是水平分辨率低的问题。当我的窗口很窄时，我在 Chrome 中有同样的错误。

为什么 ？

你`.page`很`960px`宽，溢出你`body`的`100%`（iPad 上为 768px）

您的页脚是 100% 宽度，因此宽度与您的`body`768 像素相同。

# android - Pull-To-Request 涵盖其他视图

> ID：12545809
> 
> 赞同：0
> 
> 时间：2012-09-22T16:50:15.133
> 
> 标签：android

我正在使用这个库来实现对 listView 的请求： [链接到项目](https://github.com/erikwt/PullToRefresh-ListView)

结果看起来相当不错，但我面临一个问题。如果我向下拖动列表视图以重新加载它，则会出现箭头并且一切正常。但它涵盖了所有其他视图。因此，在重新加载期间，我的其他视图消失并在刷新完成后显示。这看起来很丑陋。有人给我提示如何避免这种情况。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/help"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffff"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff"
    android:orientation="horizontal"
    android:paddingBottom="2dp"
    android:paddingLeft="10dp"
    android:paddingTop="2dp" >

    <TextView
        android:id="@+id/tv_sorting"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/newest_title"
        android:textColor="#000000"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/tv_language"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:textColor="#000000"
        android:textSize="14dp" />
</LinearLayout>

<TextView
    android:id="@+id/balken"
    android:layout_width="fill_parent"
    android:layout_height="3sp"
    android:background="@color/main_color" >
</TextView>

<eu.erikw.PullToRefreshListView
    android:id="@+id/pull_to_refresh_listview"
    android:layout_height="0dip"
    android:layout_width="fill_parent"
    android:layout_weight="2"
    android:cacheColorHint="#00000000"
    android:divider="@null"
    android:dividerHeight="0dp"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:22:35.433

我已经想出了如何解决它。我只是在 Listview 周围添加了一个 LinearLayout。

# c - 在 OpenSSL 中使用 HMAC 与 EVP 函数

> ID：12545811
> 
> 赞同：6
> 
> 时间：2012-09-22T16:50:31.693
> 
> 标签：c, openssl, hmac

这是一个非常基础的问题，但是 EVP 和 HMAC 有什么区别呢？EVP 是一个消息摘要，但它与 HMAC 生成的有什么不同呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-02T06:18:30.943

> ... EVP和HMAC有什么区别

`EVP_*`函数是一个高级接口。`HMAC_*`,`AES_*`和朋友是较低级别的原语。您可以使用其中任何一种，但建议您使用这些`EVP_*`功能。这些`HMAC_*`例程是基于软件的，不使用硬件。

这些`EVP_*`函数将允许您轻松交换不同的哈希值，并且代码基本上保持不变。如果可用，您将利用硬件加速，例如用于 AES-CMAC 的 AES-NI。

这是一个基于[https://www.openssl.org/docs/crypto/EVP_DigestInit.html](https://www.openssl.org/docs/crypto/EVP_DigestInit.html)的 OpenSSL 示例。

```
EVP_MD_CTX* mdctx = NULL;
const EVP_MD* md = NULL;

unsigned char md_value[EVP_MAX_MD_SIZE];
int md_len = 0;

char message[] = "Now is the time for all good men to "
    "come to the aide of their country\n";

OpenSSL_add_all_digests();

md = EVP_get_digestbyname("SHA1");
mdctx = EVP_MD_CTX_create();

if(!EVP_DigestInit_ex(mdctx, md, NULL))
    handleError();

if(!EVP_DigestUpdate(mdctx, message, strlen(message)))
    handleError();

if(!EVP_DigestFinal_ex(mdctx, md_value, &md_len))
    handleError();

if(!EVP_MD_CTX_destroy(mdctx))
    handleError();

printf("Digest is: ");
for(int i = 0; i < md_len; i++)
    printf("%02x", md_value[i]);
printf("\n"); 
```

现在，HMAC 与哈希略有不同。HMAC 是键控散列，而散列没有键控。您还可以使用`EVP_*`HMAC'ing 的功能。以下来自 OpenSSL 的 wiki 页面[EVP Signing and Verifying](http://wiki.openssl.org/index.php/EVP_Signing_and_Verifying)：

```
EVP_MD_CTX* mdctx = NULL;
const EVP_MD* md = NULL;
EVP_PKEY *pkey = NULL;

unsigned char md_value[EVP_MAX_MD_SIZE];   
int md_len = 0;

char message[] = "Now is the time for all good men to "
    "come to the aide of their country\n";

OpenSSL_add_all_digests();

if(!(mdctx = EVP_MD_CTX_create()))
    handleError();

if(!(md = EVP_get_digestbyname("SHA1")))
    handleError();

if(!(pkey = EVP_PKEY_new_mac_key(EVP_PKEY_HMAC, NULL, "password", strlen("password"))))
    handleError();

if(1 != EVP_DigestSignInit(mdctx, NULL, md, NULL, pkey))
    handleError();

/* Call update with the message */
if(1 != EVP_DigestSignUpdate(mdctx, message, strlen(message)))
    handleError();

if(1 != EVP_DigestSignFinal(mdctx, md_value, &md_len))
    handleError();

printf("HMAC is: ");
for(int i = 0; i < md_len; i++)
    printf("%02x", md_value[i]);
printf("\n"); 
```

低级接口看起来类似于：

```
EVP_MD_CTX* mdctx = NULL;
const EVP_MD* md = NULL;

unsigned char md_value[EVP_MAX_MD_SIZE];
int md_len = 0;

char message[] = "Now is the time for all good men to "
"come to the aide of their country\n";

OpenSSL_add_all_digests();

md = EVP_get_digestbyname("SHA1");
mdctx = EVP_MD_CTX_create();

if(!HMAC_Init_ex(mdctx, key, sizeof(key), md, NULL))
    handleError();

if(!HMAC_Update(mdctx, message, strlen(message)))
    handleError();

if(!HMAC_Final(mdctx, md_value, &md_len))
    handleError();

if(!HMAC_CTX_cleanup(mdctx))
    handleError();

printf("HMAC is: ");
for(int i = 0; i < md_len; i++)
    printf("%02x", md_value[i]);
printf("\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T14:56:16.503

您需要使用 EVP_PKEY_new_mac_key 函数来获得 HMAC 的正确密钥结构。并且不要忘记使用 EVP_PKEY_free 释放它。

# php - 使用 Composer 生成的 PHPUnit 测试项目

> ID：12545813
> 
> 赞同：2
> 
> 时间：2012-09-22T16:50:47.973
> 
> 标签：php, phpunit, classloader, composer-php

我有一个使用[Composer](http://getcomposer.org/)生成的项目，它依赖于 PHPUnit。我现在有

*   `dir1`-> PHPUnit 的东西
*   `dir2`-> 项目的东西

如果我进入项目目录并运行 PHPUnit，它会抱怨加载`ClassLoader.php`两次：

*   PHPUnit 需要它`vendors/autoload.php`
*   应用程序代码（引导程序）需要它

如何解决这种双重包含？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:50:03.517

确保您正在运行使用 Composer 安装的 PHPUnit 的副本，它应该是`vendor/bin/phpunit`. 有关示例，请参阅此 github 存储库中的 、 和“测试”部分：`composer.json`https `tests/composer.json`: [//github.com/phergie/phergie-irc-parser](https://github.com/phergie/phergie-irc-parser)`README.md`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:01:34.383

从某个作曲家版本[需要引用]，类加载器得到“命名空间”并带有一个长名称，从而使更多基于作曲家的项目能够一起工作，从那时起这不是问题。

# c++ - 为什么我得到以下输出？

> ID：12545815
> 
> 赞同：0
> 
> 时间：2012-09-22T16:51:11.810
> 
> 标签：c++

我有这个非常简单的 c++ 程序。我做了一些 C++ 已经有好几年了，所以我想我可以再试一试。但我对我得到的输出感到惊讶。它应该是一个简单的程序，它已经让我有些头疼了。

```
//2.cpp
//This program asks for the radius of the circle and
//prints the area of that circle 

#include <iostream>
#include <stdlib.h>

int* area(char* radius[], int size)
{
        int* pointer;
        int areas[size];
        pointer = areas;
        for(int i = 0; i < size; i++)
        {
                areas[i] = 3.1416*atoi(radius[i])*atoi(radius[i]);
        }
        return pointer;
}
void print(char* radius[], int* area1, int size)
{
        std::cout<<area1[2]<<std::endl; //This prints fine
        for(int i = 0; i < size; i++)
        {
                std::cout << area1[i]; //This doesn't
                std::cout << "Area for " << radius[i] << " is: " << area1[i] << std::endl;
        }
}

int main(int argc, char* argv[])
{
        if(argc > 1)
        {
                print(&argv[1],area(&argv[1],argc-1),argc-1);
        }
        else
        {
            //Please ignore this
        }
    return 0;
} 
```

输入

```
./a.out 1 4 2 7 8 
```

输出：-

```
12
134520896
Area for 1 is: 134520896
10
Area for 4 is: 10
-1217419175
Area for 2 is: -1217419175
-1217056780
Area for 7 is: -1217056780
-1217056780
Area for 8 is: -1217056780 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T16:56:39.583

您的阵列具有自动存储持续时间，并且一旦返回`areas`就会超出范围；`area`那么取消引用`pointer`是未定义的行为。请使用 C++ 习惯用法，例如`std::string`and`std::vector`而不是 C 指针。

这是您的代码的改进（但仍不是最佳）版本：

```
#include <iostream>
#include <vector>
#include <string>
#include <cstdlib>
#include <cstddef>

std::vector<double> area(const std::vector<double>& radius)
{
  std::vector<double> areas(radius.size());
  for (std::size_t i = 0; i < radius.size(); i++) {
    areas[i] = 3.1416 * radius[i] * radius[i];
  }
  return areas;
}

void print(const std::vector<double>& radius, const std::vector<double>& area)
{
  for (std::size_t i = 0; i < radius.size(); i++) {
    std::cout << area[i]; //This doesn't
    std::cout << "Area for " << radius[i] << " is: " << area[i] << std::endl;
  }
}

int main(int argc, char* argv[])
{
  if (argc > 1) {
    std::vector<double> radii;
    radii.reserve(argc - 1);
    for (int i = 1; i < argc; ++i) {
      radii.push_back(std::atof(argv[i]));
    }
    print(radii, area(radii));
  }
} 
```

不幸的是，编译器通常无法检测到此类错误。使用 Valgrind 之类的工具来找到它们。例如，通过 Valgrind 运行您的原始代码会给我带来很多错误：

```
$ valgrind ./a.out 1 4 2 7 8
==18488== Memcheck, a memory error detector
==18488== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==18488== Using Valgrind-3.8.0 and LibVEX; rerun with -h for copyright info
==18488== Command: ./a.out 1 4 2 7 8
==18488== 
==18488== Conditional jump or move depends on uninitialised value(s)
==18488==    at 0x4EC5D16: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/libstdc++.so.6.0.17)
==18488==    by 0x4EC5F4C: std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::do_put(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/libstdc++.so.6.0.17)
==18488==    by 0x4EC8E45: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/libstdc++.so.6.0.17)
==18488==    by 0x400A01: print(char**, int*, int) (in /tmp/a.out)
==18488==    by 0x400B0E: main (in /tmp/a.out)
==18488== 
==18488== Use of uninitialised value of size 8
==18488==    at 0x4EBB133: ??? (in /usr/lib/libstdc++.so.6.0.17)
==18488==    by 0x4EC5D37: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/libstdc++.so.6.0.17)
==18488==    by 0x4EC5F4C: std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::do_put(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/libstdc++.so.6.0.17)
==18488==    by 0x4EC8E45: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/libstdc++.so.6.0.17)
==18488==    by 0x400A01: print(char**, int*, int) (in /tmp/a.out)
==18488==    by 0x400B0E: main (in /tmp/a.out)
[…] 
```

而我的版本没有产生错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T17:00:05.327

`return pointer;`- 您正在返回一个指向局部变量的指针，该变量在堆栈上分配，并在您退出函数时超出范围。

不幸的是，您的编译器不够聪明，无法识别这一点，例如`gcc`我必须返回`areas`以获得警告：`warning: address of local variable ‘areas’ returned`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T18:03:21.417

如果您重新开始使用 C++，我认为您应该看看新标准**C++11**。从维基百科页面开始。这是我的代码版本：

```
#include <algorithm>
#include <string>
#include <vector>
#include <iostream>

std::vector<double> area(const std::vector<double> & radii ) {
  std::vector<double> areas(radii.size());
  std::transform (radii.begin(), radii.end(), areas.begin(),
          [](const double &r){ return 3.15159*r*r; } );
  return areas;
}

void printit(const std::vector<double> &r, const std::vector<double> &a) {
  for(size_t i = 0; i < r.size(); ++i) {
    std::cout << "Area for " << r.at(i) << " is: " << a.at(i) << std::endl;
  }
}

int main(int argc, char* argv[]) {
  std::vector<double> r(argc-1);
  std::transform (argv+1, argv+argc,r.begin(),
           [](const std::string &r){ return stod(r); } );
  auto areas=area(r);
  printit(r,areas);   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T17:01:06.417

您正在从此函数返回一个指向无效内存的指针。

```
int* area(char* radius[], int size)
{
        int* pointer;
        int areas[size];
        pointer = areas;

        // ...

        return pointer;
} 
```

`int areas[size]`仅在此功能期间存在。您正在返回一个指向未定义内存的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T17:01:49.270

Radius 是指向字符串“1”的指针，但您正在单步执行 argc 值，这是错误的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T16:57:04.753

是一个整数，`areas`但你把一个浮点数放进去..

在计算半径时，得出的结果可能与正确的结果不同！

`areas[i] = 3.1416*atoi(radius[i])*atoi(radius[i]);`

# jquery - 需要像 jQuery 中的 foreach 一样从所有 iframe 中获取所有 div

> ID：12545825
> 
> 赞同：0
> 
> 时间：2012-09-22T16:52:32.853
> 
> 标签：jquery, jquery-ui, html, iframe

所以从 iframe 中提取 div 的代码是由@Adil 制作的，如下所示：

```
$(window).load(function () {
        var filteredContents = $('.test').contents().find('.div_iframe').html();
        $('.test').contents().find('body').html(filteredContents);
}); 
```

HTML 看起来像这样：

```
<iframe class="test" width="100%" height="100%" src="/message.html?msjId=268" style="height:100%;width:100%;">
<iframe class="test" width="100%" height="100%" src="/message.html?msjId=260" style="height:100%;width:100%;"> 
```

以及现在应该显示的表格，它们应该是两个不同的表格，但目前两者都是同一张表格，但与第一个表格`msjId`重复`msjId`...

提前致谢！

更新：

我会解释更多，所以我不`close vote`明白我在做什么是我在 iframe 中有一个表，我只想在没有任何标题或任何内容的情况下获得，所以上面的代码正在过滤它以准确地给我包含的 div iframe 中的表格，然后显示它。我的问题是，如果我有多个 iframe，那么该表会从第一个 iframe 中复制并具有相同的信息，并且没有像`foreach`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:57:01.753

当您有多个元素时，您可以使用每个元素来迭代它们，试试这个。

```
<iframe id="frame1" width="100%" height="100%" src="/message.html?msjId=268" style="height:100%;width:100%;">
<iframe id="frame2" width="100%" height="100%" src="/message.html?msjId=260" style="height:100%;width:100%;">

 $(window).load(function () {
     $('.test').each(function(){         

       var filteredContents1 = $(this).contents().find('.div_iframe').html();
       $(this).contents().find('body').html(filteredContents1);       

     });

 }); 
```

# python - 使用python处理markdown服务器端并在客户端渲染

> ID：12545831
> 
> 赞同：1
> 
> 时间：2012-09-22T16:53:05.850
> 
> 标签：python, markdown, wysiwym

在 MD 编辑器的帮助下，我们以 SO 形式编写问题的方式。我想知道数据是什么以及如何进入服务器以及以何种方式保存然后呈现。我正在输入的文本的生命周期。

我在这里输入文本，在降价。它是如何提交到服务器的，我的意思是如何处理格式，一旦它们被保存，它们是如何呈现给客户端的。你如何在python中做到这一点？什么是最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:21:49.713

您通常所做的是将用户的 Markdown 输入存储为文本，并在需要显示时将其呈现为 HTML。（如果您迫切需要性能，您可以随时缓存它）。
当您需要修改它时，您再次修改 Markdown 输入，而不是 HTML。

要在 python 中进行 Markdown -> HTML 转换，可以使用[Markdown](http://pypi.python.org/pypi/Markdown/)库。

您实际上不应该将 HTML 转换回 Markdown（Markdown 在格式方面不如 HTML 丰富，因此您可能会丢失一些格式），但是 python 库[html2text](http://www.aaronsw.com/2002/html2text/)恰好输出有效的 Markdown - 您不能保证Markdown 本身将转换为您的初始 HTML！

* * *

尽管如此，请记住，在输出客户端提交的数据时，您必须考虑到[跨站脚本](http://fr.wikipedia.org/wiki/Cross-site_scripting)等安全风险。[你可以在这个 Django ticket](https://code.djangoproject.com/ticket/17837?cversion=0&cnum_hist=4)中看到一个例子。
您可以访问[此 security.stackexchange.com 问题](https://security.stackexchange.com/questions/14664/how-do-i-use-markdown-securely)了解更多详细信息。

实际上，Python Markdown 库（以及其他）缺乏安全性在[`django.utils.markup`Django 1.5 中被弃用](https://docs.djangoproject.com/en/dev/releases/1.5/#django-utils-markup)。

# javascript - 从 Javascript 中的 Select 中获取值

> ID：12545833
> 
> 赞同：0
> 
> 时间：2012-09-22T16:53:11.173
> 
> 标签：javascript, ajax, select

好的，我知道以前有人问过这个问题（因为我自己也看过），它似乎适用于除我之外的其他所有人。我对 javascript 非常陌生，因为我尽量不使用它，因为它是调试的噩梦。但是，这是我的问题。我有一个脚本，我正在为 ajax 将图像添加到画廊。该图像只是一个引用数据库中另一个表的 ID，对于图库也是如此。就两个身份证。无论如何，当我单击链接时，我希望它运行此脚本以将其添加到数据库中。但是，它不起作用，当然，javascript 在让你知道它失败的地方是可怕的。这是脚本的代码。

```
function addToGallery(img)
{

 var e = document.getElementById("galleries2");
 var gal = e.options(e.selectedIndex).value;
 window.alert("Gallery Id: "+gal+" Image Id: "+img);

       if (img=="")
       {
          document.getElementById("txtHint").innerHTML="";
          return;
       } 
       if (window.XMLHttpRequest)
       {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
       }
       else
       {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
       }
          xmlhttp.onreadystatechange=function()
       {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
       {
          document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
       }
    }
       xmlhttp.open("GET","addtogallery.php?img="+img+"gal="+gal,true);
       xmlhttp.send();
    } 
```

好的，所以上面的不起作用。我添加了警报消息以尝试尽可能多地进行故障排除。如果我将警报框放在 var 上方，并且只要求它引用 img 变量，它就可以工作。现在，如果我把它放在下面并尝试做我在那里做的事情，它就会停止。没有消息框，没有 ajax，什么都没有。所以，我打赌它与

```
var gal = e.options(e.selectedIndex).value; 
```

我也用 [] 而不是 () 尝试过它，也没有任何东西......任何帮助将不胜感激。

**更新** 好的，所以我已经解决了选择问题，现在我尝试使用 xhtmlrequest.open 方法传递值。我似乎可以通过 1 获取价值，但不能通过 2。这是有问题的代码行

```
xmlhttp.open("GET","addtogallery.php?image="+img+"&amp;gid="+gal,true); 
```

现在，我知道 img 和 gal 已设置，因为每当运行此脚本时都会弹出一个警告框，告诉我它们已设置。但是当它到达 php 页面时，它只会输出 img 变量，而 gal 变量仍然没有设置。以前有人有这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:05:31.317

您肯定需要方括号，但也尝试将变量“e”更改为“el”之类的其他变量。据我了解，该功能响应点击，因此它可能是为事件保留的。

尝试：

```
var galleries = document.getElementById("galleries2");
var gal = galleries.options[galleries.selectedIndex].value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:00:37.750

我想你想做的是：

```
var gal = e.options[e.selectedIndex].value; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:02:13.190

您需要方括号而不是括号。

```
 var gal = e.options[e.selectedIndex].value; 
```

你的 JavaScript 环境应该给你一个不错的*TypeError*，比如*“HTMLOptionsCollection 不是一个函数”*

# python - django投票排序顺序的黑客新闻算法

> ID：12545840
> 
> 赞同：0
> 
> 时间：2012-09-22T16:54:41.753
> 
> 标签：python, sql, django, voting, django-voting

我正在使用[django-voting开发一个应用程序，并使用](http://code.google.com/p/django-voting/)[Eric Florenzano 的自定义 VoteAwareManager 技术](http://eflorenzano.com/blog/2008/05/24/managers-and-voting-and-subqueries-oh-my/)对主页项目进行排序：

**模型.py**

```
class VoteAwareManager(models.Manager):
    """ Get top votes. hot = VoteAwareManager() """
    def _get_score_annotation(self):
        model_type = ContentType.objects.get_for_model(self.model)
        table_name = self.model._meta.db_table
        return self.extra(select={
            'score': 'SELECT COALESCE(SUM(vote),0) FROM %s WHERE content_type_id=%d AND object_id=%s.id' %
                (Vote._meta.db_table, int(model_type.id), table_name)
                }
        )

    def most_loved(self,):
        return self._get_score_annotation().order_by('-score')

    def most_hated(self):
        return self._get_score_annotation().order_by('score')

class Post(models.Model):
    """Post model"""
    title = models.CharField(_("title"), max_length=200, blank=False)
    slug = models.SlugField(_("slug"), blank=True)
    author = models.ForeignKey(User, related_name="added_posts")
    kind = models.CharField(max_length=1, choices=KIND, default=1)
    url = models.URLField(blank=True, null=True, help_text="The link URL", default='')
    content_markdown = models.TextField(_("Entry"), blank=True)
    content_html = models.TextField(blank=True, null=True, editable=False)
    status = models.IntegerField(_("status"), choices=STATUS_CHOICES, default=IS_PUBLIC)
    allow_comments = models.BooleanField(_("Allow Comments?"), blank=False, default=1)
    created_at = models.DateTimeField(_("created at"), default=datetime.now)
    updated_at = models.DateTimeField(_("updated at"))

    objects = models.Manager()
    hot = VoteAwareManager() 
```

**视图.py**

```
def homepage(request): 
"""Show top posts"""   
return object_list(request, 
    queryset=Post.hot.most_loved().filter(status=IS_PUBLIC),
    template_name='homepage.html',
    template_object_name='post',
    extra_context= {'profile': get_profiles}
) 
```

**我现在想将[Hacker New 的排名算法](http://amix.dk/blog/post/19574)与上面的代码结合起来，以便旧项目的排名下降，但我遇到了麻烦。我不确定相关代码是否应该进入 VoteAwareManager 函数、most_loved 方法或其他地方。**

以下是我尝试过的：

**1\. most_loved 方法中的计算：**返回`TypeError at / unsupported operand type(s) for -: 'QuerySet' and 'int'`（当使用随机时间戳只是为了看我是否能得到结果时，最终我也需要弄清楚如何获取对象时间戳——我是一个初学者）：

```
def most_loved(self):
    totalscore = self._get_score_annotation()
    time_stamp = 20120920
    gravity = 1.8
    return (totalscore - 1) / pow((time_stamp+2), gravity) 
```

**2\. SQL中的计算：**返回`TemplateSyntaxError at / Caught DatabaseError while rendering: column "votes.time_stamp" must appear in the GROUP BY clause or be used in an aggregate function LINE 1: ...(SELECT COALESCE(SUM(vote),0 / (EXTRACT(HOUR FROM TIME_STAMP...`：

```
class VoteAwareManager(models.Manager):
""" Get top votes. hot = VoteAwareManager() """
def _get_score_annotation(self):
    model_type = ContentType.objects.get_for_model(self.model)
    table_name = self.model._meta.db_table
    return self.extra(select={
        'score': 'SELECT COALESCE(SUM(vote),0 / (EXTRACT(HOUR FROM TIME_STAMP)+2 * 1.8)) FROM %s WHERE content_type_id=%d AND object_id=%s.id' % 
        (Vote._meta.db_table, int(model_type.id), table_name)
        }
    ) 
```

一种选择是尝试将投票系统更改为使用[django-rangevoting](http://code.google.com/p/django-rangevoting/)，但如果可能的话，我想让它与 django-voting 一起使用。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:51:09.320

不完美（省略 -1 减法来否定用户自己的投票），但这似乎现在工作得很好：

```
class VoteAwareManager(models.Manager):
""" Get recent top voted items (hacker news ranking algorythm, without the -1 for now since it breaks the calculation as all scores return 0.0)
    (p - 1) / (t + 2)^1.5
    where p = points and t = age in hours
"""
def _get_score_annotation(self):
    model_type = ContentType.objects.get_for_model(self.model)
    table_name = self.model._meta.db_table

    return self.extra(select={

        'score': 'SELECT COALESCE(SUM(vote / ((EXTRACT(EPOCH FROM current_timestamp - created_at)/3600)+2)^1.5),0) FROM %s WHERE content_type_id=%d AND object_id=%s.id' % (Vote._meta.db_table, int(model_type.id), table_name)

        })

def most_loved(self):        
    return self._get_score_annotation().order_by('-score',) 
```

# android - AsyncTask：为什么没有读取 XML 文件？

> ID：12545841
> 
> 赞同：0
> 
> 时间：2012-09-22T16:54:41.383
> 
> 标签：android

以下是我的代码。XMLfunctions 读取 XML 文件并将其存储在`String xml`. 我不得不使用 AsyncTask，因为我得到了 NetworkOnMainThreadException。但是，我不确定该怎么做，并且在某处搞砸了。

```
package foo.bar.quux;

import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;
import java.net.MalformedURLException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.os.AsyncTask;

public class XMLfunctions {

    int numResults;
    NodeList nodes;
    Document doc;
    static ServiceTasks task;
    String line;
    public final static Document XMLfromString(String xml){

        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;

    }

     private class ServiceTasks extends AsyncTask<Void, Void, Void> {

            @Override
            protected Void doInBackground(Void... urls) {

                            try {

                                    DefaultHttpClient httpClient = new DefaultHttpClient();
                                    HttpPost httpPost = new HttpPost("http://10.0.2.2/example.xml");

                                    HttpResponse httpResponse = httpClient.execute(httpPost);
                                    HttpEntity httpEntity = httpResponse.getEntity();
                                    line = EntityUtils.toString(httpEntity);

                                } catch (UnsupportedEncodingException e) {
                                    line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
                                } catch (MalformedURLException e) {
                                    line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
                                } catch (IOException e) {
                                    line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
                                }
                            return null;

            }

        } 

     public String getXML(){     

         return line;
    }

     public void executeXML(){
         task = new ServiceTasks();
         task.execute();
     }

} 
```

方法`executeXML()`和`getXML()`在另一个活动中被调用：

```
 public class Main extends ListActivity {

         String xml;
         static XMLfunctions funct;
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.listofcategories);
            funct = new XMLfunctions();
            funct.executeXML();
            xml = funct.getXML();
.
.
.
} 
```

然而，即使在`executeXML`我得到一个`NullPointerException`. 我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:57:40.793

在 AsyncTask 完成之前，您不会得到结果。

因此，即使将控件移至行`xml = funct.getXML();`，并执行了该行，但这并不意味着 AsyncTask 已完成。

您的结果将在`doInBackground`返回时可用，并且在您的 AsyncTask 中覆盖该函数`onPostExecute`并将结果报告给调用者。

以这样的方式实现一个监听器：

```
package foo.bar.quux;

import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;
import java.net.MalformedURLException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.os.AsyncTask;

public class XMLfunctions {

    public interface ListenerToXML {
            public void AsyncTaskDone();
    }
    ListenerToXML mListener;
    public void setListener(ListenerToXML listener) {
        mListener = listener;
    }
    int numResults;
    NodeList nodes;
    Document doc;
    static ServiceTasks task;
    String line;
    public final static Document XMLfromString(String xml){

        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;

    }

     private class ServiceTasks extends AsyncTask<Void, Void, Void> {

            @Override
            protected Void doInBackground(Void... urls) {

                            try {

                                    DefaultHttpClient httpClient = new DefaultHttpClient();
                                    HttpPost httpPost = new HttpPost("http://10.0.2.2/example.xml");

                                    HttpResponse httpResponse = httpClient.execute(httpPost);
                                    HttpEntity httpEntity = httpResponse.getEntity();
                                    line = EntityUtils.toString(httpEntity);

                                } catch (UnsupportedEncodingException e) {
                                    line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
                                } catch (MalformedURLException e) {
                                    line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
                                } catch (IOException e) {
                                    line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
                                }
                            return null;

            }
@Override
protected void onPostExecute(Void result) {
    if(mListener!=null)
        mListener.AsyncTaskDone();
    }

        } 

     public String getXML(){     

         return line;
    }

     public void executeXML(){
         task = new ServiceTasks();
         task.execute();
     }

}

  public class Main extends ListActivity implements ListenerToXML {

         String xml;
         static XMLfunctions funct;
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.listofcategories);
            funct = new XMLfunctions();
            funct.setListener(this);
            funct.executeXML();
.
.
.
}

            public void AsyncTaskDone() {
               //here you can get the results
            xml = funct.getXML();
            } 
```

# python - Unicode 错误序数不在范围内

> ID：12545843
> 
> 赞同：6
> 
> 时间：2012-09-22T16:55:33.023
> 
> 标签：python, unicode

对我来说，unicode 出现奇怪的错误。我处理 unicode 很好，但是当我今天早上运行它时，一个项目 u'\u201d' 给出了错误并给了我

```
UnicodeError: ASCII encoding error: ordinal not in range(128) 
```

我查看了代码，显然是 utf-32，但是当我尝试在解释器中对其进行解码时：

```
c = u'\u201d'
c.decode('utf-32', 'replace') 
```

或与它相关的任何其他操作，它只是在任何编解码器中都无法识别它，但我发现它是“正确的双引号”

我得到：

```
Traceback (most recent call last):
File "<pyshell#154>", line 1, in <module>
    c.decode('utf-32')
  File "C:\Python27\lib\encodings\utf_32.py", line 11, in decode
    return codecs.utf_32_decode(input, errors, True)
UnicodeEncodeError: 'ascii' codec can't encode character u'\u201d' in position 0: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T16:58:35.823

您已经有一个 unicode 字符串，无需*再次*将其解码为 un​​icode 字符串。

在这种情况下发生的情况是，python 会帮助您先为您*编码*，然后您可以从`utf-32`. 它使用默认编码来执行此操作，恰好是 ASCII。这是一个显式编码，向您展示在这种情况下引发的异常：

```
>>> u'\u201d'.encode('ASCII')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\u201d' in position 0: ordinal not in range(128) 
```

简而言之，当你有一个 unicode 文字时`u''`，不需要解码它。

[阅读Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)中的 unicode、编码和默认设置。关于该主题的另一篇宝贵文章是 Joel Spolsky 的[Minimun Unicode 知识](http://www.joelonsoftware.com/articles/Unicode.html)帖。

# mathjax - 如何将 Mathjax 与 Mathplayer 结合使用？

> ID：12545844
> 
> 赞同：0
> 
> 时间：2012-09-22T16:55:38.967
> 
> 标签：mathjax

该站点[http://accessiblemath.dessci.com/2010/09/mathplayer-mathjax-more-accessible-math.html](http://accessiblemath.dessci.com/2010/09/mathplayer-mathjax-more-accessible-math.html)告诉我可以将 Mathjax 与 Mathplayer 结合起来以更快地显示数学。

> MathJax 的一个重要特性是它可以将数学的显示转换为原生的 MathML 渲染器，例如 MathPlayer。这样可以更快地显示数学。

这是一个好主意吗？如果是这样，应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:21:32.500

你不必做任何事情。MathJax 将自动识别 MathPlayer 的存在并移交任何 MathML 的渲染。（MathJax 仍会首先将 TeX 或 AsciiMath 转换为 MathML。）

# c# - 应用程序从另一个应用程序启动时内存不足，但从 Visual Studio 启动时不会。为什么？

> ID：12545848
> 
> 赞同：0
> 
> 时间：2012-09-22T16:56:16.707
> 
> 标签：c#, multithreading, memory-leaks, parallel-processing

我有这个控制台应用程序可以处理大量数据，更具体地说，它处理大型位图对象。

当我通过 Visual Studio 启动控制台应用程序时，一切正常。如果我通过 new Process() 从另一个应用程序启动它，控制台应用程序会遇到内存不足异常（使用在 Visual Studio 中运行良好的相同数据）和其他一些 GDI+ 错误（但我相当确定这些错误是早期内存不足异常的结果）。

我检查了从 Visual Studio (vshost) 运行控制台应用程序和从另一个应用程序运行时，最大工作内存集是否相同。

所以我的问题是：为什么会这样？

我还可以提到控制台应用程序是多线程的。

# java - $slice mongoDB Java

> ID：12545851
> 
> 赞同：0
> 
> 时间：2012-09-22T16:56:46.063
> 
> 标签：java, mongodb, slice

如何在 Java 中进行此查询

```
db.comments.find({ "hsID.$id" { "$oid" : "4fe71a50e7e9f22ae5fb96bf"}} , {commentList: { $slice : [ 2 , 2]}}); 
```

这是我正在做的代码

```
 BasicDBObject query = new BasicDBObject();
        BasicDBObject allFields = new BasicDBObject();
        ObjectId objectId = new ObjectId(objId);
        query.put("{hsID.$id", objectId);
        Integer[] sliceInt = { startIndex, pageSize };
        query.put( 
                "commentList",
                new BasicDBObject().append("$slice", sliceInt));
 DBCursor resultsCursor = CommentColl.find(allFields,query); 
```

输出是

输出是

```
query  = { "{hsID.$id" : { "$oid" : "4fe71a50e7e9f22ae5fb96bf"} , "commentList" : { "$slice" : [ 2 , 2]}} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T21:30:07.537

您需要将查询与要返回的字段分开。尝试更多类似的东西：

```
BasicDBObject query = new BasicDBObject("hsID.$id", new ObjectId(objId));
BasicDBObject fields = new BasicDBObject(
      "commentList",
       new BasicDBObject("$slice", new int[] { startIndex, pageSize }));
DBCursor resultsCursor = CommentColl.find(query, fields); 
```

另请注意，我删除了 hsid.$id 之前的左大括号。

# android - 针对 Android 问题的 Ubuntu 12.10 + Eclipse 3.8 设置

> ID：12545857
> 
> 赞同：2
> 
> 时间：2012-09-22T16:57:40.207
> 
> 标签：android, linux, eclipse, ubuntu, 64-bit

所以，我只是想进入 Android 开发并尝试使用 eclipse 设置我的系统，这样我就可以通过教程和诸如此类的东西来熟悉生态系统。我在 Eclipse 版本 3.8 的 Ubuntu 12.10 (amd64) 上运行它。我在初始设置中遇到了几个问题/问题，我不确定该怎么处理它们......

1 - 我似乎没有得到“adb devices”命令来查看任何设备。我将 Verizon Galaxy Nexus 和 Nexus 7 平板电脑连接到我的系统，但什么也看不到。我尝试在 adb_usb.ini 文件中添加几个供应商 ID，但这似乎没有成功。我添加的两个 ID 是“0x4e41”和“0x18d1”——我认为后者是“Google”设备 ID，但我显然在某个地方弄错了。

2 - 我没有在“运行”按钮下配置任何东西，我不确定如何通过 AVD 模拟器或设备配置正在运行的应用程序。我很确定我无法通过我的设备运行任何应用程序，因为 adb 没有看到它们，但我确实有一个 4.1 AVD 设置，它应该能够运行创建的任何应用程序。如何配置运行按钮以通过模拟器推送应用程序？是需要先启动还是可以启动模拟器自动推送应用？此外，一旦我在第 1 部分中解决了上述问题，如何配置“运行”按钮以将应用程序发送到我的任一设备？

任何/所有帮助将不胜感激。提前致谢。

编辑：到目前为止，这两条评论都提到了使用“运行”菜单，但我似乎没有与你们中的任何一个相同的“运行”菜单。我在运行菜单下唯一的东西是

*   “外部工具”，那么下面就是
    *   “运行方式”（这是一个没有任何内容的子菜单 - 我假设因为我没有配置任何东西），
    *   “外部工具配置...”
    *   “整理收藏夹...”。

我根本没有看到任何与“运行配置”相关的内容。

EDIT2：我刚刚尝试添加 d.android.com 上“使用硬件”页面中提到的 udev 规则文件，这似乎没有任何影响（即使在重新启动后）。仍然无法在“adb devices”中看到任何设备。而且，是的，我的设备都打开了 USB 调试。

EDIT3：似乎已经让设备显示在 adb 设备列表中，但仍然不确定如何将应用程序自动加载到它们上。此外，我尝试运行[http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html)上列出的“ant debug”命令，但出现以下错误：

```
Buildfile: build.xml does not exist!
Build failed 
```

不确定 build.xml 文件中应该包含什么，因为这应该是教程应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:45:36.403

Usb 不需要在 ubuntu 上设置，您可能需要将 adt 从稳定版切换到 beta 版，请参阅注释 - 这可能有效，重新安装不起作用。我进行了升级，adt 完全崩溃了——在 WST 或类似的东西上失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:08:07.533

1）您是否将您的应用程序设置为可调试？另外，不要忘记将您的设备设置为 USB 调试模式。

然后在终端试试这个：

```
cd android-sdk-linux/platform-tools/
su
killall adb
./adb usb 
```

2）转到运行>运行配置>目标选项卡>选择您的4.1 AVD（在自动选择兼容设备上）并点击运行。之后，您只需单击运行并测试您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T18:03:52.770

1.  查看[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)上的教程 首先确保您有 USB 驱动程序。确保您的 Nexus 设备已设置好进行开发。加载您的驱动程序。可能需要重新启动 Eclipse 以确保您的新配置生效。

2.  您可以通过 AVDManager 或从 Eclipse 启动 AVD。转到运行-> 运行配置以设置将应用程序发送到哪个设备，或启动哪个模拟器。

# git - `git push` -- 没有输出，什么也没有发生

> ID：12545861
> 
> 赞同：5
> 
> 时间：2012-09-22T16:57:54.237
> 
> 标签：git, bitbucket, git-push

```
touch test
git add test
git commit -m "test"
git push -u origin master 
```

这行得通。该文件已上传到存储库。

```
rm test
cp -R ../website ./website
git rm test
git add website/
git commit -m "Initial"
git push -u origin master 
```

这没有给出任何输出，并且似乎没有对存储库进行任何操作。测试文件仍然存在于存储库中。

```
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
nothing to commit (working directory clean) 
```

* * *

有人可以帮忙吗？

* * *

在客户端和服务器上重新创建分支，但没有成功。当里面只有一个文件时它可以工作，但它根本不会将网站文件夹推送到服务器。

这是我能看到的唯一奇怪的事情；`POST git-receive-pack (chunked)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T06:27:30.287

看起来这与 BitBucket 有关。这里的另一个问题也有同样的问题：[挂在“POST git-receive-pack (chunked)”](https://stackoverflow.com/questions/10790232/hanging-at-post-git-receive-pack-chunked)

解决方案是使用 Git+SSH 而不是 HTTP。它似乎只影响文件超过几兆字节的存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:29:20.057

对我来说，这看起来不像是 git 错误。如果您使用的正是您所显示的命令，则`../website`目录的内容不会被复制到`./website`目录中。尝试`cp -R ../website ./website`复制所有内容。

此外，请尝试`git status`在复制后执行以查看更改是否反映。尝试通过执行将存储库目录中的所有内容添加到 git repo`git add .`

让我知道这次手术的结果。另外，如果您可以使用目录结构更新问题，我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:14:42.330

只需尝试`git push`，您不需要指定参数，因为您已经使用`-u`过一次选项。同样从您的输出来看，Bitbucket 服务器似乎在那一刻可能已关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T21:00:06.717

造成这种情况的一个常见原因是您为 SSH 密钥输入了错误的密码。除非您清除缓存的凭据，否则 git push 将永远无法与该遥控器一起使用。

命令行将`git push origin master`什么都不做，停滞不前，不产生任何输出。

SmartGit 可以通过在推送期间为您的 SSH 密钥自动填写错误的密码来“导致”这种情况。单击“确定”会永久中断“git push”，直到您进入“首选项”并清除该凭据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-11T07:41:03.650

如果您使用持久的 SSH 连接，则可能会出现过时的连接问题。在使用持久 SSH 一年后，今天第一次发生在我身上。打开你的 .ssh/config 并检查 ControlPath，然后去那里删除相应的文件。对我来说是 /tmp/git@bitbucket.org:22

# clojure - 类实现多个接口时 Clojure 协议调用的解析

> ID：12545862
> 
> 赞同：5
> 
> 时间：2012-09-22T16:58:04.003
> 
> 标签：clojure

给定 Clojure 中的集合、映射和向量同时实现 IPersistentCollection 和 IFn，Clojure 如何决定使用哪个 SayHi 实现：

```
(defprotocol SayHi
  (hi [this]))

(extend-protocol SayHi
  clojure.lang.IPersistentCollection
  (hi [_] (println "Hi from collection"))
  clojure.lang.IFn
  (hi [_] (println "Hi from Fn!"))
  clojure.lang.IPersistentSet
  (hi [_] (println "Hi from set!")))

(hi #{})
Hi from set!
(hi [])
Hi from collection 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T17:26:02.967

协议调度是在函数的第一个参数的类型上完成的。当多个实现与第一个参数的类型匹配时，将选择最具体的实现。这就是为什么`(hi #{})`调用解析为 set 实现而不是 collection 或 fn 实现，即使 set ( `#{}`) 实现了这两者。

中的`find-protocol-impl`函数[`clojure-deftype.clj`](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core_deftype.clj)似乎处理实现对象解析的协议：

```
(defn find-protocol-impl [protocol x]
  (if (instance? (:on-interface protocol) x)
    x
    (let [c (class x)
          impl #(get (:impls protocol) %)]
      (or (impl c)
          (and c (or (first (remove nil? (map impl (butlast (super-chain c)))))
                     (when-let [t (reduce1 pref (filter impl (disj (supers c) Object)))]
                       (impl t))
                     (impl Object))))))) 
```

# android - 适用于 Android 的 OpenCV 文档

> ID：12545869
> 
> 赞同：5
> 
> 时间：2012-09-22T16:58:51.847
> 
> 标签：android, opencv, computer-vision

我是计算机视觉领域的新手，之前没有经验。我正在尝试使用 OpenCV 为 Android 设备开发人脸识别应用程序。我已经安装了 OpenCV，但我不知道如何使用它。似乎没有针对 OpenCV 的 Android 特定文档。如何学习如何在我的 Android 应用程序中使用 OpenCV？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:12:25.087

我发现的最好的资源就是[OpenCV 的 Android 教程](http://docs.opencv.org/2.4/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html)。这将通过您提取以安装 opencv 的源的示例目录中的 opencv android 示例代码。（即 OPENCV_PATH/samples/android）。那里还有其他样本，包括一个用于人脸检测的样本。

opencv 网站上也有[android 文档](http://docs.opencv.org/2.4/platforms/android/service/doc/index.html)。

还有一个 opencv[人脸识别教程](http://docs.opencv.org/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html)，即使它不是特定于 android 的，它也可能有助于您入门。

# php - 变量中的变量

> ID：12545872
> 
> 赞同：2
> 
> 时间：2012-09-22T16:59:17.573
> 
> 标签：php, variables

由于某种原因，我似乎无法解决这个问题。

```
$welcome_message = "Hello there $name";

$names_array = array("tom", "dick", "harry");

foreach ($names_array as $this_name) {
    $name = $this_name;
    echo $welcome_message."<br>";
} 
```

如何每次更新 $welcome_message 中的 $name 变量？

使用可变变量，但我似乎无法使其工作。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T17:01:29.570

也许你正在寻找`sprintf`？

```
$welcome_message = "Hello there %s";

$names_array = array("tom", "dick", "harry");

foreach ($names_array as $this_name) {
    echo sprintf($welcome_message, $this_name), "<br>";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T17:00:45.530

这不起作用，因为`$welcome_message`在开始时只评估一次（何时`$name`可能仍未定义）。您不能在内部“保存”所需的表单`$welcome_message`并在以后随意“扩展”它（除非您使用`eval`，这是完全避免的事情）。

移动设置`$welcome_message`在循环内的行：

```
$names_array = array("tom", "dick", "harry");

foreach ($names_array as $this_name) {
    $welcome_message = "Hello there $this_name";
    echo $welcome_message."<br>";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T17:01:36.763

你可以像这样每次更新 $welcome_message....

```
$welcome_message = "Hello there ".$name; 
```

现在代码将是这样的......

```
$welcome_message = "Hello there ";

$names_array = array("tom", "dick", "harry");

foreach ($names_array as $this_name) {
echo $welcome_message.$this_name"<br>";
} 
```

# facebook - 如何使用 facebook fql 获取消息未知收件人的电子邮件或姓名而不是 0？

> ID：12545874
> 
> 赞同：1
> 
> 时间：2012-09-22T16:59:49.127
> 
> 标签：facebook, facebook-graph-api, message, facebook-fql

如何使用 facebook fql 获取消息未知收件人的电子邮件或姓名而不是 0？

我写了一些 php 代码来导出我的 facebook 邮箱中的消息。我正在使用 FQL。

[这是我在API 工具资源](http://developers.facebook.com/tools/explorer/)管理器中使用的 flq 多查询，用于获取给定消息，包含完整的消息和收件人数据。

```
{
"threads": "SELECT thread_id FROM thread WHERE folder_id IN (0,1,4)",
"messages": "SELECT thread_id, message_id, author_id, created_time, body FROM message where thread_id IN (SELECT thread_id FROM #threads) and message_id='249...' ORDER BY created_time ASC",
"recipients_id": "SELECT thread_id,recipients FROM thread WHERE thread_id IN (SELECT thread_id FROM #messages)",
"recipients": "SELECT uid, username, name, email, profile_url, pic FROM user WHERE uid IN (SELECT recipients FROM #recipients_id)"
}

```

这是我得到的：

```
{
    "name": "recipients_id",
    “fql_result_set”：[
      {
        "thread_id": "26854010378569",
        “收件人”：[
          4735804651,
          0,
          0
        ]
      }
    ]
}

```

正如我之前从经典电子邮件客户端将这条测试消息发送到我的 Facebook 地址一样，我知道谁是这条消息的发件人。4735804651 是我的 Facebook ID，收件人字段中的最后两个值（零）指的是发件人和另一个不是我朋友的 facebook 用户。在我发送的原始电子邮件中，我输入了我的@facebook.com 电子邮件和另一个@m.facebook.com 用户电子邮件每个人都收到了消息。当我从 FB 界面读取它并飞过发件人姓名时，我可以看到发件人电子邮件地址。如何通过 facebook api 或 FQL 获取它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T01:52:11.043

您首先必须获取消息所在的文件夹 ID：//0 个收件箱，1 个*otubox*，4 个更新//

```
SELECT folder_id, name, unread_count, viewer_id FROM mailbox_folder WHERE viewer_id=me() 
```

获取*folder_id*时，您可以获得*thread_id*：

```
SELECT thread_id  FROM thread WHERE folder_id = x AND viewer_id=me() 
```

使用这个*thread_id*，您可以从中获取所有消息：

```
SELECT message_id, author_id, body, created_time, viewer_id FROM message WHERE thread_id = xxxxxxx 
```

并总结：

```
SELECT message_id, thread_id, author_id, body, created_time, viewer_id FROM message WHERE thread_id   in (SELECT thread_id  FROM thread WHERE folder_id in(SELECT folder_id  FROM mailbox_folder WHERE viewer_id=me()) AND viewer_id=me()) 
```

***对于所有这一切，您需要一个应用令牌***

你可以在这里试试：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

# ios - 如何配置苹果推送通知进行分发

> ID：12545879
> 
> 赞同：3
> 
> 时间：2012-09-22T17:00:28.620
> 
> 标签：ios, push-notification, ad-hoc-distribution

我在开发人员模式下成功地将 APN 与我的应用程序一起使用，但我无法让它在临时分发模式下工作。

我忠实地遵循了教程[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)并且我已经阅读了关于这个问题的所有其他帖子，我可以在 SO 上找到和其他地方。

在开发人员模式下，我创建 cer 和 p12 pem 文件并将它们组合起来：当我尝试：openssl s_client -connect gateway.push.apple.com:2195 -cert aps_production.cer.pem -key MyPrivateKey.p12.pem 时，我得到：

```
depth=1 /C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
verify error:num=20:unable to get local issuer certificate
verify return:0

-----BEGIN CERTIFICATE-----
(certificate deleted)
-----END CERTIFICATE-----
subject=/C=US/ST=California/L=Cupertino/O=Apple Inc./OU=iTMS Engineering/CN=gateway.push.apple.com
issuer=/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
---
No client certificate CA names sent
---
SSL handshake has read 2723 bytes and written 2140 bytes
---
New, TLSv1/SSLv3, Cipher is AES256-SHA
Server public key is 2048 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : AES256-SHA
    Session-ID: 
    Session-ID-ctx: 
    Master-Key: (deleted)
    Key-Arg   : None
    Start Time: 1348332242
    Timeout   : 300 (sec)
    Verify return code: 0 (ok) 
```

我不知道“验证错误：num=20：无法获得本地颁发者证书”是什么意思，或者它是否重要。当我将 gateway.sandbox.push.apple.com:2195 与我的开发人员 cer 和密钥一起使用时，我得到了同样的结果，但它工作正常。

然后当我在手机上使用 simplepush.php 和开发人员版本的应用程序时。通知工作完美。当我在手机上使用即席分发和即席分发版本的应用程序时，尽管 simplepush.php 返回：“已向 APNS 传递消息”，但我什么也没得到

我查询了反馈服务，没有报错。

其他人建议，如果应用程序未经苹果批准，APNS 不适用于 adhoc 模式。那是问题吗？我们的应用程序仍在审核中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T05:02:25.843

*   任何内部分发配置文件都会给出相同的 tokenID，但是这个 tokenID 在不同的设备上会有所不同。
*   确保在创建 aps_certificate 后生成分发配置文件。配置文件的高更改可能会错过分发证书中的 aps-environment 密钥。
*   其他唯一的问题可能仅与 ProductionURL 相关。
*   我还注意到推送通知接收有时会延迟，主要是在与生产 URL 一起使用时。

# beautifulsoup - 转换 为结束行

> ID：12545897
> 
> 赞同：42
> 
> 时间：2012-09-22T17:02:33.060
> 
> 标签：beautifulsoup

我正在尝试使用`BeautifulSoup`. 我`get_text()`为此目的使用函数。

我的问题是文本包含`</br>`标签，我需要将它们转换为结束行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2016-01-06T18:40:27.597

您可以使用 BeautifulSoup 对象本身或它的任何元素来执行此操作：

```
for br in soup.find_all("br"):
    br.replace_with("\n") 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2018-02-05T17:22:14.393

正如[官方文档](http://beautiful-soup-4.readthedocs.io/en/latest/index.html?highlight=get_text#get-text)所说：

> 您可以指定一个字符串用于将文本位连接在一起：soup.get_text("\n")

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-22T17:05:57.637

正则表达式应该可以解决问题。

```
import re
s = re.sub('<br\s*?>', '\n', yourTextHere) 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-28T08:36:12.207

添加到 Ian 和 dividebyzero 的帖子/评论中，您可以这样做以一次有效地过滤/替换*许多*标签：

```
for elem in soup.find_all(["a", "p", "div", "h3", "br"]):
    elem.replace_with(elem.text + "\n\n") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-19T19:13:15.313

与其用 \n 替换标签，不如在所有重要标签的末尾添加一个 \n 可能会更好。

从@petezurich 窃取列表：

```
for elem in soup.find_all(["a", "p", "div", "h3", "br"]):
    elem.append('\n') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-19T04:31:03.477

如果你打电话`element.text`，你会得到没有 br 标签的文本。也许您需要为此目的定义自己的自定义方法：

```
 def clean_text(elem):
        text = ''
        for e in elem.descendants:
            if isinstance(e, str):
                text += e.strip()
            elif e.name == 'br' or e.name == 'p':
                text += '\n'
        return text

    # get page content
    soup = BeautifulSoup(request_response.text, 'html.parser')
    # get your target element
    description_div = soup.select_one('.description-class')
    # clean the data
    print(clean_text(description_div)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-06T06:37:39.347

您也可以使用 ‍‍‍<code>get_text(separator = '\n', strip = True) ：

```
from bs4 import BeautifulSoup
bs=BeautifulSoup('<td>some text<br>some more text</td>','html.parser')
text=bs.get_text(separator = '\n', strip = True)
print(text)
 >> 
some text
some more text 
```

这个对我有用。

# javascript - 如何在解析的 dojo ContentPane 中使用 dijit requires

> ID：12545899
> 
> 赞同：0
> 
> 时间：2012-09-22T17:02:53.003
> 
> 标签：javascript, ajax, dojo, js-amd

我正在尝试做一个简单的任务。此任务是将包含的 HTML 加载`dijit.Form`到`ContentPane`. 在加载此 HTML 之前，我不知道需要哪些 dijit，但加载的 HTML 将包含适用`require`的 's 来加载它们。

因此，为了能够从加载的 HTML 中执行脚本，我使用`dojox.layout.ContentPane`. 但是，当我设置`parseOnLoad`为时`true`，解析发生**在**脚本执行之前，因此第一次加载内容时 dijit 不可用。另外，当我尝试使用`onDownloadEnd`回调时，运行此回调时，`require`仍然没有加载来自 's 的 dijit。

我唯一能想到的就是`setTimeout`将解析推迟到执行这些脚本的时间。但是，我不喜欢这种解决方案，因为它可能会不时失败，并且会使应用程序的责任感降低。

那么我应该如何执行解析，以便在`require`加载的 HTML 语句运行后立即发生解析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:28:12.307

我可以看到两种可能的解决方案 - 两者都有`dijit/layout/ContentPane`：

1.  使用 Dojo 1.8.0，因为解析器支持[auto require](http://livedocs.dojotoolkit.org/dojo/parser#auto-require)，它会自己加载依赖项，你可以在这里看到：http: [//jsfiddle.net/phusick/vr4h4/](http://jsfiddle.net/phusick/vr4h4/)

2.  将依赖项列表放入表单模板的某处，例如在`data-config`您的属性中`dijit/form/Form`：

    ```
    <form 
        data-dojo-type="dijit.form.Form" 
        data-config='"deps":["dijit/form/Form", "dijit/form/TextBox", "dijit/form/Button"]'>

        <input data-dojo-type="dijit.form.TextBox" data-dojo-props="placeholder:'TextBox'">
        <button data-dojo-type="dijit.form.Button">Button</button>

    </form> 
    ```

    设置`parseOnLoad:false`，`dijit/layout/ContentPane`加载模板，获取依赖项列表，`require`然后在`parser.parse()` `containerNode`您的工厂函数中`ContentPane`（在操作中查看它[http://jsfiddle.net/phusick/QA4gH/](http://jsfiddle.net/phusick/QA4gH/)）：

    ```
    require([
        "dojo/ready",
        "dojo/dom",
        "dojo/query",
        "dojo/on",
        "dojo/parser",
        "dojo/json",
        "dijit/layout/ContentPane",
        "dojo/domReady!"
    ], function(ready, dom, query, on, parser, JSON) {

        var template, dijits;

        ready(function() {
            template = dom.byId("template").textContent;
            on.once(dom.byId("loadFormButton"), "click", loadForm);
            contentPane1.set("parseOnLoad", false);
            contentPane1.on("load", parseForm);
        });

        function loadForm() {
            contentPane1.set("content", template);  
        }

        function parseForm() {
            // a node to parse
            var node = contentPane1.containerNode;
            // obtain a list of dependencies
            var config = JSON.parse("{" + query("form", node)[0].dataset.config + "}");

            // require (AMD load) dependencies
            require(config.deps, function() {
                // parse ContentPane content when dependencies are resolved
                dijits = parser.parse(node); 
                console.log(dijits); // an array of instantiated dijits
            });
        }      
    });
    ​ 
    ```

**编辑**：我刚刚想到写一个自动要求（对于 Dojo <1.8）只是添加一个简短的`getDependencies()`方法，所以你不需要像我在上面的第二个选项中提到的那样列出依赖项：

```
function getDependencies(/*DOMNode*/ containerNode) {
    var deps = [];
    query("[data-dojo-type]", containerNode).forEach(function(node) {
        var dep = node.dataset.dojoType.split(".").join("/");
        if(!~array.indexOf(deps, dep)) {
            deps.push(dep);
        };            
    });
    return deps;
} 
```

看到它在 jsFiddle 工作：http: [//jsfiddle.net/phusick/hnjWt/](http://jsfiddle.net/phusick/hnjWt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:06:00.513

您唯一的选择是设置 dojoConfig.async = false 或在代码中的 require 语句中设置。

由于这个原因，模块没有被加载；require() 不会阻塞——当它仍在下载模块时——解析器运行。

有关此运行示例，请参见[http://jsfiddle.net/zA9cJ/1/](http://jsfiddle.net/zA9cJ/1/)

```
require(["dojox/layout/ContentPane", "dojo/domReady!"], function(pane) {

    var p = new pane({ parseOnLoad: true, executeScripts: true }, 'container');
    var content = '<script type="text/javascript">'+
        'require('+
        //////////////////////////
        '{async:false},'+ ////////
        //////////////////////////
        '["dijit/form/Button"]);'+
        '<'+'/script>'+
        '<div data-dojo-type="dijit.form.Button">Button</div>';
    p.set("content", content);
});​ 
```

# grails - grails域类保存

> ID：12545901
> 
> 赞同：0
> 
> 时间：2012-09-22T17:03:16.560
> 
> 标签：grails, grails-orm, grails-domain-class

当我尝试在 grails 中保存域类时出现以下错误：

方法没有签名：java.lang.String.save() 适用于参数类型：() 值：[] 可能的解决方案：size()、size()、take(int)、wait()、any()、等待（长）。堆栈跟踪如下：

我有一个将 XML 字符串解析为域对象的服务。然后我尝试保存域并得到该错误。我已经调试并且知道所有数据都是有效的。这是我的代码：

```
 def newProfile="";

      newProfile = new LinkedinProfile(
        firstName               :   "${linkedinProfileFeed.'first-name'}",
        lastName                :   "${linkedinProfileFeed.'last-name'}",
        dobYear                 :   "${linkedinProfileFeed.'date-of-birth'.'year'}",
        dobMonth                :   "${linkedinProfileFeed.'date-of-birth'.'month'}",
        dobDay                  :   "${linkedinProfileFeed.'date-of-birth'.'day'}"  ,   
        imgUrl                  :   "${linkedinProfileFeed.'picture-url'}", 
        siteStandardAddress     :   "${linkedinProfileFeed.'site-standard-profile-request'}",           
        oAuthToken              :   accessTokenKey.toString(),
        secretKey               :   accessTokenSecret.toString()
       )
      .id="${linkedinProfileFeed.id}".toString()

      log.debug("${linkedinProfileFeed.id}".toString())
      log.debug("${linkedinProfileFeed.'first-name'}")
      log.debug("${linkedinProfileFeed.'last-name'}")
      log.debug("${linkedinProfileFeed.'date-of-birth'.'year'}")
      log.debug("${linkedinProfileFeed.'date-of-birth'.'month'}")
      log.debug("${linkedinProfileFeed.'date-of-birth'.'day'}")
      log.debug("${linkedinProfileFeed.'picture-url'}")
      log.debug("${linkedinProfileFeed.'site-standard-profile-request'}")
      log.debug(accessTokenKey.toString())
      log.debug(accessTokenSecret.toString())
      log.debug("end debug")

      newProfile.save(); 
```

另外，我不熟悉 grails 和 springsource，但在 .Net 中，我可以使用点运算符访问对象属性。例如，如果我有一个如上所述的对象，我可以输入 newProfile。并且可以访问所有属性。在 grails 中这不会发生。这是设计使然还是我的代码中有错误？

下面也是我的域类。

```
 class LinkedinProfile {
String firstName
String lastName
String dobYear
String dobMonth
String dobDay
String oAuthToken
String secretKey
String id
String imgUrl
String siteStandardAddress
Date dateCreated
Date lastUpdated
long version

static hasMany = [
    linkedinLocation        : LinkedinLocation,
    linkedinSkill           : LinkedinSkill
]

static mapping = {
    cache true
    id generator: 'assigned'

    columns {
        firstName           type:'text'
        lastName            type:'text'         
        oAuthToken          type:'text'
        secretKey           type:'text'         
        dobYear             type:'text'
        dobMonth            type:'text'
        dobDay              type:'text'
        imgUrl              type:'text'
        siteStandardAddress type:'text'
    }

}
static constraints = {
    firstName           (nullable:true)
    lastName            (nullable:true)     
    oAuthToken          (nullable:false)
    secretKey           (nullable:false)
    dobYear             (nullable:true)
    dobMonth            (nullable:true)
    dobDay              (nullable:true)     
    id                  (nullable:false)
    imgUrl              (nullable:true)
    siteStandardAddress (nullable:true)
}

def beforeInsert = {
//to do:  before insert, capture current email that is stored in the db
}

def afterInsert={
    //resave email
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:16:44.847

该错误表明您正在调用`save()`字符串。如果我们进行调查，我们会发现您是。这是因为您正在分配

```
 newProfile = new LinkedinProfile().id="${linkedinProfileFeed.id}".toString() 
```

所以 newProfile 实际上是 String `linkedinProfileFeed.id`，而不是人们想象的`new LinkedinProfile()`那样。

比较

```
groovy> def foo = new Post().id="1" 
groovy> foo.class 

Result: class java.lang.String 
```

和

```
groovy> def foo = new Post(id: "1") 
groovy> foo.class 

Result: class test.Post 
```

您可能希望将 放入`id`构造函数参数中。无论如何，您`newProfile`最终需要作为一个`LinkedinProfile`实例。然后你可以调用`save()`它。

也可以，您可以在 Groovy 中使用点运算符。

# java - 在树结构中构建和查找“页面”

> ID：12545907
> 
> 赞同：0
> 
> 时间：2012-09-22T17:03:57.490
> 
> 标签：java, scala

我想提供一个能够在每个页面中存储节点的磁盘树结构。假设我们的页面在每个页面中有四个节点，并且对其他页面有四个引用。

```
例如：
页面 0：级别 0：4 个节点（0、1、2、3）/4 个指针（偏移量 0：page1，1：page2，2：page3，3：page4），
第 1 页：级别 1：4 个节点（4、5、6、7）/4 个指针（偏移量 0：page6，1：null，2：null，3：null），
第 2 页：级别 1：4 个节点（8、9、10、11）/4 个指针（偏移量 0：null，1：null，2：null，3：null），
第 3 页：级别 1：4 个节点（12、13、14、15）/4 个指针（偏移量 0：null，1：null，2：null，3：null），
第 4 页：级别 1：4 个节点（16、17、18、19）/4 个指针（偏移量 0：null，1：null，2：null，3：null），
第 5 页：级别 2：4 个节点（20、21、22、23）/4 个指针（偏移量 0：null，1：null，2：null，3：null），

```

我目前不知道如何获取每个级别的偏移量以找到页面。即 node-ID >> 2 应该提供页面 ID，但是如何获取树中每一层的右指针的偏移量？

例如这个非常简单的树中的第 6 页。搜索第 6 页首先应该得到偏移量 0，即从第 1 页（根页）开始的第 2 页。所以我得到了第 2 页，然后又是偏移量 0。

请注意，页面应按 Levelorder 排序。我不确定这种方法是否可行。

# ios - 如何删除 Rubymotion 中的所有子视图？

> ID：12545914
> 
> 赞同：1
> 
> 时间：2012-09-22T17:05:03.893
> 
> 标签：ios, rubymotion

基本上，我有一个测验应用程序，我在其中添加问题，然后切换到不同的屏幕以在选择正确答案后显示正确答案的扩展版本。我试过添加按钮和标签，但是当我这样做时，我最终会在屏幕上出现按钮和标签“重影”，在我离开它们之后。如何删除所有子视图，以便我从方法中添加的每个按钮和标签出现在新屏幕上？

```
class MyApplicationController < UIViewController

def loadView  
    self.view = UIImageView.alloc.init  
end

def viewDidLoad  
    super  
    view.userInteractionEnabled=true  
    @question_index=0  
    @answerChoices = []  
    @questionChoices=["What is best in life?",...]  
    makeQuestion  
end  

def makeQuestion 
    left =20  
    top=100  
    label = UILabel.new  
    label.text =@questionChoices[@question_index]  
    label.textAlignment = UITextAlignmentCenter  
    label.textColor = UIColor.redColor  
    label.frame = [[20,20], [view.frame.size.width-40, 40]]  
    label.lineBreakMode = UILineBreakModeWordWrap  
    label.numberOfLines = 0  
    label.sizeToFit  
    view.image = UIImage.imageNamed('background.jpg')  
    view.addSubview(label)  
    4.times do |i|  
        @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)  
    @button.setTitle(@answerChoices[i][@question_index], forState:UIControlStateNormal)  
        @button.frame = [[left, top], [view.frame.size.width - left * 2, 40]]  
    @button.addTarget(self, action:'actionTapped:', forControlEvents:UIControlEventTouchUpInside)  
        @button.tag=i  
        top+=45  
        view.addSubview(@button)  
    end  
end

def makeAnswer  
    @button.removeFromSuperview
    @button.removeFromSuperview
    @button.removeFromSuperview
    @button.removeFromSuperview
    view.image = UIImage.imageNamed('back.jpg')
    label = UILabel.new
    label.text =@rightArray[@question_index]
    label.textAlignment = UITextAlignmentCenter
    label.textColor = UIColor.blackColor
    label.frame = [[20,20], [view.frame.size.width-40, 40]]  
    label.lineBreakMode = UILineBreakModeWordWrap  
    label.numberOfLines = 0  
    label.sizeToFit  
    view.addSubview(label)  

    @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)  
    @button.setTitle("More questions", forState:UIControlStateNormal)  
    @button.tag=1  
    @button.addTarget(self, action:'makeQuestion', forControlEvents:UIControlEventTouchUpInside)     
    @button.frame = [[20, 100], [view.frame.size.width - 20 * 2, 40]]  
    view.addSubview(@button)  
end 

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:55:56.187

您需要一系列按钮。在您的`4.times`循环中，您将覆盖实例变量`@button`四次。相反，将@button 设为按钮数组，并为每个索引分配不同的按钮。

如果您有一个变量`myView`并想删除它的所有子视图，我相信这会起作用：

```
myView.subviews.each {|sv| sv.removeFromSuperview} 
```

# c# - 通过 XAML 访问“DependencyProperty”并对其进行评估？

> ID：12545918
> 
> 赞同：0
> 
> 时间：2012-09-22T17:05:32.160
> 
> 标签：c#, wpf, user-controls, dependency-properties, controltemplate

我刚刚`DependencyProperty`为我的自定义按钮创建了一个。该属性称为`IsChecked`。如果`IsChecked == true`我的按钮将其背景颜色更改为其他颜色并保持此颜色直到`IsChecked == false`.

这是我的`DependencyProperty`：

```
public static readonly DependencyProperty IsCheckedProperty = DependencyProperty.Register("IsChecked", typeof(bool), typeof(MainMenuButton), new PropertyMetadata(false));

    public bool IsChecked
    {
        get { return (bool)GetValue(IsCheckedProperty); }
        set { SetValue(IsCheckedProperty, value); }
    } 
```

接下来我有一个`ControlTemplate`这个按钮：

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

<ControlTemplate x:Key="MainMenuButtonStyle" TargetType="{x:Type UserControl}">
    <ControlTemplate.Resources>
                /* Some storyboards */
    </ControlTemplate.Resources>
    <Grid x:Name="grid">
        <Grid.Background>
            <SolidColorBrush Color="{DynamicResource MainUI_MainMenuButtonBackground}"/>
        </Grid.Background>
    </Grid>
    <ControlTemplate.Triggers>
                /* Some triggers */
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

我现在的问题是如何访问`IsChecked`并根据它的当前值更改背景`grid`？以前没有这样做过，只是在前一段时间尝试过，完全失败了。

提前致谢 ：）

编辑：这也是`UserControl`：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="IFCSMainInterface.MainMenuButton"
x:Name="UserControl"                            
d:DesignWidth="640" d:DesignHeight="480" Width="272" Height="110" Template="{DynamicResource MainMenuButtonStyle}">

<Grid x:Name="LayoutRoot"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:15:39.340

我认为问题出在这里：

```
<ControlTemplate x:Key="MainMenuButtonStyle" TargetType="{x:Type UserControl}"> 
```

您必须设置正确的类型才能使用其依赖属性。在您的 ResourceDictionary 中写入该类的命名空间，并将您的类型正确放入控件模板中，例如：

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:my="clr-namespace:ProjectName.NameSpace">
    <ControlTemplate TargetType="my:MainMenuButton" x:Key="MainMenuButtonStyle"> 
          <!-- ... -->
    </ControlTemplate>
 </ResourceDictionary> 
```

* * *

**编辑（现在已经解释）：**

您正在尝试在 xaml 自己的控件中定义模板这似乎不太正确，我建议寻找其他方法，例如创建使用 Generic.xaml 的控件

（[http://utahdnug.org/blogs/xamlcoder/archive/2007/12/13/building-custom-template-able-wpf-controls.aspx](http://utahdnug.org/blogs/xamlcoder/archive/2007/12/13/building-custom-template-able-wpf-controls.aspx)）

但是如果你想使用依赖属性（你正在做的方式）你可以尝试下面的代码（例如）：

```
<UserControl x:Class="SamplesStack.Controls.MyUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:my="clr-namespace:SamplesStack.Controls">
<UserControl.Template>
    <ControlTemplate TargetType="UserControl">
        <Grid x:Name="LayoutRoot"> 
            <ContentPresenter />
        </Grid>
        <ControlTemplate.Triggers>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked}" Value="True">
                <Setter TargetName="LayoutRoot" Property="Background" Value="Red"/>
            </DataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</UserControl.Template> 
```

这将使您的控件按预期工作。虽然用 DataTrigger 觉得不是很酷。

# asp.net - 如何使用 BoundFields 将 FooterTemplate 添加到 GridView

> ID：12545919
> 
> 赞同：3
> 
> 时间：2012-09-22T17:05:41.297
> 
> 标签：asp.net, gridview, footer

希望你周末愉快。终于，我得到了一些编辑/删除事件来使用 LINQ 支持。我有一个我知道正在工作的添加记录事件，但是在尝试了一部分之后，我不知道如何在页脚中添加一些文本框。

所以它是从页眉向下到页脚的一行，没有向右或向左移动。有人能帮帮我吗！？

![在此处输入图像描述](../Images/16659fd32b3353b54cda7fa592ceff81.png)

我的代码是

```
 <asp:GridView ID="gdview"  runat="server" AutoGenerateColumns="False" DataKeyNames="test_id" OnRowCancelingEdit="gdview_RowCancelingEdit" OnRowDeleting="gdview_RowDeleting" OnRowEditing="gdview_RowEditing" OnRowUpdating="gdview_RowUpdating"
        BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="4" ForeColor="Black" GridLines="Horizontal" ShowFooter="true">
        <Columns>
        <asp:BoundField HeaderText="Test CAT" DataField="test_cat">
            <ItemStyle Height="20px" Width="150px" />
        </asp:BoundField>
        <asp:BoundField HeaderText="Test INFO" DataField="test_info">
            <ItemStyle Height="20px" Width="150px" />
        </asp:BoundField>  
        <asp:BoundField HeaderText="Test NUMBER" DataField="test_number">
            <ItemStyle Height="20px" Width="150px" />
        </asp:BoundField>   
        <asp:BoundField HeaderText="Test DATE" DataField="test_datetime">
            <ItemStyle Height="20px" Width="150px" />
        </asp:BoundField>       
        <asp:CommandField ShowEditButton="True">
            <ItemStyle Width="100px" />
        </asp:CommandField>
        <asp:TemplateField>
        <ItemTemplate>
          <asp:LinkButton ID="lnkdel" runat="server" Text="Delete" CommandName="Delete"   OnClientClick="return confirm('Do you want to delete?')"></asp:LinkButton>      
        </ItemTemplate>
        <ItemStyle Width="100px" />
        </asp:TemplateField>

    </Columns>
    <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
    <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
    <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
    <SortedAscendingCellStyle BackColor="#F7F7F7" />
    <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
    <SortedDescendingCellStyle BackColor="#E5E5E5" />
    <SortedDescendingHeaderStyle BackColor="#242121" />
    </asp:GridView> 
```

好的，但是如何使用它，如果我使用模板，它怎么知道从哪个单元格获取值！？？

```
 Protected Sub gdview_RowUpdating(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs)
    Using db As New ThedatabaseconnectionDataContext()
        Try
            'getting table
            Dim tbltest As Table(Of testtable) = db.GetTable(Of testtable)()
            'getting an exiting row
            Dim objtest As testtable = tbltest.SingleOrDefault(Function(p) p.test_id = Integer.Parse(gdview.DataKeys(e.RowIndex).Value.ToString()))
            If objtest IsNot Nothing Then
                'modifying the row
                objtest.test_cat = DirectCast(gdview.Rows(e.RowIndex).Cells(0).Controls(0), TextBox).Text
                objtest.test_info = DirectCast(gdview.Rows(e.RowIndex).Cells(1).Controls(0), TextBox).Text
                objtest.test_number = DirectCast(gdview.Rows(e.RowIndex).Cells(2).Controls(0), TextBox).Text
                objtest.test_datetime = DirectCast(gdview.Rows(e.RowIndex).Cells(3).Controls(0), TextBox).Text
                'saving rows added
                db.SubmitChanges()
                gdview.EditIndex = -1
                bindgrid()
                ' Me.lblMsg.Text = "Updated Successfully"
            Else
                'Me.lblMsg.Text = "Employee not found"
            End If
        Catch ex As Exception
            'Me.lblMsg.Text = ex.Message
        End Try
    End Using 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T17:08:35.317

你可以试试

```
<columns>
  <asp:templatefield headertext="Test" >
    <itemtemplate>
       .... 
    </itemtemplate>
    <footertemplate>
      <asp:TextBox id="TestTbx"   runat="server"/>
    </footertemplate>
  </asp:templatefield>
</columns> 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.footertemplate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.footertemplate.aspx)

# ios - Flurry集成Xcode上的Mach-O错误

> ID：12545922
> 
> 赞同：19
> 
> 时间：2012-09-22T17:06:31.483
> 
> 标签：ios, xcode, analytics, flurry

我第一次尝试将 Flurry SDK 集成到我的 iOS 应用程序中。我按照他们的说明将库和代码添加到 AppDelegate.m。编译时出现以下错误：

```
 Undefined symbols for architecture armv7:
  "_SCNetworkReachabilityCreateWithAddress", referenced from:
      +[FlurryReachability flurryReachabilityWithAddress:] in libFlurry.a(libFlurry.a-armv7-master.o)
  "_SCNetworkReachabilityCreateWithName", referenced from:
      +[FlurryReachability flurryReachabilityWithHostName:] in libFlurry.a(libFlurry.a-armv7-master.o)
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[FlurryReachability flurryStopNotifier] in libFlurry.a(libFlurry.a-armv7-master.o)
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[FlurryReachability flurryStartNotifier] in libFlurry.a(libFlurry.a-armv7-master.o)
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[FlurryReachability flurryStartNotifier] in libFlurry.a(libFlurry.a-armv7-master.o)
  "_SCNetworkReachabilityGetFlags", referenced from:
      -[FlurryReachability flurryCurrentReachabilityStatus] in libFlurry.a(libFlurry.a-armv7-master.o)
      -[FlurryReachability isFlurryReachable] in libFlurry.a(libFlurry.a-armv7-master.o)
      -[FlurryReachability isFlurryConnectionRequired] in libFlurry.a(libFlurry.a-armv7-master.o)
      -[FlurryReachability isFlurryConnectionOnDemand] in libFlurry.a(libFlurry.a-armv7-master.o)
      -[FlurryReachability isFlurryUserInterventionRequired] in libFlurry.a(libFlurry.a-armv7-master.o)
      -[FlurryReachability isFlurryReachableViaWWAN] in libFlurry.a(libFlurry.a-armv7-master.o)
      -[FlurryReachability isFlurryReachableViaWiFi] in libFlurry.a(libFlurry.a-armv7-master.o)
      ...
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经更新到最新版本的 XCode 并且正在使用最新的 Flurry SDK。

其他人遇到这个并有解决办法吗？他们的支持论坛几天前提到了一个类似的问题，但用户声称它已修复，我在他们的网站上找不到任何关于如何处理的建议。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-18T05:26:21.883

简而言之，您需要链接到 SystemConfiguration 框架。这个线程的答案解释了这一点。当我升级到 Flurry SDK 4.0.6 时为我修复了它。

我希望 Flurry 对此进行了解释，但我在 Flurry 的网站上没有看到任何文档解释了必要的 Flurry SDK 4.0.6 集成步骤。

[链接到 SystemConfiguration.framework](https://stackoverflow.com/questions/10347882/missing-required-architecture-armv7-in-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:22:13.410

还有一个替代 API 也是免费的（完全披露我是联合创始人）：[www.askingpoint.com。](http://www.askingpoint.com)它已为 iOS 6 做好准备，并包含一个嵌入式评分小部件，该小部件由您的服务器端帐户控制，并使用您的分析来仅询问经常使用您的用户对您进行评分。

希望能解决我之前帖子中的投诉。抱歉，链接搞砸了。

# vim - “-”不会跳转到上一行的第一个非空白字符（“+”也不起作用）

> ID：12545924
> 
> 赞同：2
> 
> 时间：2012-09-22T17:06:44.883
> 
> 标签：vim

我在很多地方读过在命令模式下按“-”，将光标放在前一行中的第一个非空白字符，但它对我不起作用..

当我按下回车键时，它会正确转到下一行中的第一个非空白字符，但“+”不做同样的工作..

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:15:36.907

也许它被系统范围的vim配置文件映射为做其他事情？有什么行为`vim -u /dev/null -U /dev/null`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:40:19.867

在不按住 Shift 的情况下按“-”会导致 gVim 的光标移动到我正在编辑的文档上一行的第一个非空白字符。同样按住 Shift 然后按“+”会使光标向前移动到下一行的开始第一个非空白位置。我相信 vim 希望您生成键的值，即使这需要按住 Shift 键。

# networking - 如何通过发起方式来区分不同的http请求

> ID：12545925
> 
> 赞同：1
> 
> 时间：2012-09-22T17:07:00.757
> 
> 标签：networking, network-programming, httpwebrequest, http-headers, network-protocols

我正在开发一个监控网络流量的网络程序。我想根据它们的启动方式分离所有http请求。我正在考虑以下四种类型的请求。

1.  由用户在网络浏览器中输入 url 发起的 http 请求
2.  由用户单击网页上的链接触发的 http 请求
3.  由获取页面中的资源自动触发的 http 请求。例如，如果页面中有一个img，它会触发另一个请求。
4.  AJAX 更新

对于 1 与其他人，我正在考虑使用引荐标头。

对于 4 与其他人，我正在考虑使用 X-Requested-With 标头。

但是我想不出区分2和3的方法。

知道是否可以区分 2 和 3 之间的区别吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:16:36.127

对资源的请求应使用源页面作为引用标头。因此，它可能与 #2 类似，但很聪明，可以查看先前请求的相应页面的 URL，并将这些新 URL 重新分类为页面资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:12:12.000

将参数作为请求的一部分传递是否可以接受？这将允许您区分 2 和 3。

# css - css 中的颜色名称或十六进制值之间是否存在性能差异？

> ID：12545929
> 
> 赞同：3
> 
> 时间：2012-09-22T17:08:01.907
> 
> 标签：css, performance

CSS 中的颜色属性可以接受颜色名称（白色、粉红色等）或十六进制值（#FFF、#669966 等）或 RGB。

但并非所有颜色名称都是所有浏览器的标准名称。有诸如[CSS 颜色名称与十六进制代码](http://jsperf.com/css-color-names-vs-hex-codes/3)之类的测试，（我的结果是更好的十六进制），那么使用十六进制总是比其他两个选项更好吗？

编辑：其他重复的问题是关于个人喜好的，这是关于性能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:14:44.587

撇开颜色名称，十六进制值和 RGB 几乎相同。

但结果显示十六进制代码稍微快一些（不用担心太多）。

例如，Firefox 11 每秒执行 15,400 次十六进制代码操作，但每秒执行 14,900 次 rgb 操作。

所以，这没什么好担心的。你甚至不会注意到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:14:35.370

您已经回答了自己的问题……“并非所有颜色名称都是标准的。” 最好习惯使用 6 个字符的十六进制代码来表示颜色。它是明确的，没有混淆。我也看到一些版本的 IE 也与 3 位十六进制代码混淆了。

十六进制代码也更好，因为有许多工具，如 Classic Color Meter 等，它们会告诉你鼠标滚动的东西的十六进制颜色值。

# background-image - 隐藏部分背景图片

> ID：12545932
> 
> 赞同：0
> 
> 时间：2012-09-22T17:08:22.077
> 
> 标签：background-image

我有一个包含正常和悬停状态的背景图像的 div，因此当您将鼠标悬停时，会显示背景图像的下半部分。我正在制作同一个网站的移动版本，我希望只显示图像的前半部分，因为同一个 div 的高度会增加。但是，就目前而言，当 div 增长时，我显然会看到背景图像的后半部分。关于如何隐藏背景图像的下半部分同时仍显示顶部的任何想法？

```
.community a{background: url(images/migtea.jpg) 0 0 no-repeat #FFF; display:block;       float:left; margin:0 10px 10px 0; padding: 10px 10px 10px 151px;}
.community a:hover{background-position: 0 -131px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:11:16.473

> 唯一的问题是“剪辑路径”、“掩码”和“过滤器”（不是 IE“过滤器”而是 SVG“过滤器”）仅适用于 Firefox 和 Safari（是的，没有 Chrome）。他们做的不同。Firefox 需要通过 id 指定的 svg 剪辑路径，例如：
> 
> ```
> .box { clip-path: url("roundedrect.svg#cp1"); } 
> ```
> 
> 而 Safari 仅使用形状本身从以下位置创建剪辑路径：
> 
> ```
>  .box { clip-path: url("roundedrect.svg"); } 
> ```
> 
> 我还没有找到在 Opera 和 Chrome 中执行此操作的方法。
> 
> 但是对于 FF 和 Safari“跨浏览器”示例，我创建了这个： [http](http://tokimon.dk/testing/css-svg-test.html) ://tokimon.dk/testing/css-svg-test.html 。
> 
> 否则，也许你可以从 CSS 3 中的背景操作中得到一些东西：[http ://www.css3.info/preview/](http://www.css3.info/preview/)

*   *Tokimon* （来源：[使用 CSS3 仅显示部分背景图像](https://stackoverflow.com/questions/3044074/showing-only-part-of-background-image-using-css3)）

否则，您所能做的就是分离背景图像，或者在其上放置一个具有纯色背景的容器（div）并“隐藏”您想要隐藏的部分（但这不是一个非常优雅的解决方案）！

希望这可以帮助！

# c# - 更改 GridView 标题高度

> ID：12545934
> 
> 赞同：4
> 
> 时间：2012-09-22T17:08:39.973
> 
> 标签：c#, wpf, gridview

我想更改 GridView 的高度，在 XAML 中我使用以下代码：

```
<Window.Resources>

        <Style x:Key="myHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
            <Setter Property="Height" Value="45"></Setter>
        </Style>

    </Window.Resources>

    <ListView x:Name="LView">
        <ListView.View>
            <GridView x:Name="GView" ColumnHeaderContainerStyle="{StaticResource myHeaderStyle}"></GridView>
        </ListView.View>
    </ListView> 
```

但是如果我想动态地做到这一点？我试过：

```
Style style = new Style();
            style.TargetType = typeof(GridViewColumnHeader);
            style.Setters.Add(new Setter(GridViewColumnHeader.HeightProperty, 155));

            GView.ColumnHeaderContainerStyle = style; 
```

但我有一个 ArgumentException（值 155 不是有效值）。为什么？我怎么解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T17:20:40.807

[FrameworkElement.Height](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.height.aspx)需要一个双精度值，因此您需要将 155 作为双精度值传递：

```
style.Setters
    .Add(new Setter(GridViewColumnHeader.HeightProperty, 155d)); 
```

或者

```
style.Setters
    .Add(new Setter(GridViewColumnHeader.HeightProperty, 155.0)); 
```

# android - 如何在 Android 中绘制图形？

> ID：12545936
> 
> 赞同：16
> 
> 时间：2012-09-22T17:09:00.693
> 
> 标签：android, graph

我想绘制如图所示的图表。

我已经通过 aChartEngine 尝试过，但它没有成功。

![在此处输入图像描述](../Images/6a9b180a9f7054a1451a30b6e9811a1c.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T17:44:15.417

您可以创建 a `SurfaceView`，您可以在其中绘制到方法`Canvas`中的a `onDraw()`。要绘制图表，您可以使用`Path`类，它的`moveTo()`和`lineTo()`方法。要更改线条的外观，请使用`Paint`该类。然后使用 Canvases`drawPath()`方法，该方法接受一个`Path`, 和一个`Paint`对象。我认为它比 OpenGL 更容易开始。

*   [表面视图](http://developer.android.com/reference/android/view/SurfaceView.html)
*   [帆布](http://developer.android.com/reference/android/graphics/Canvas.html)
*   [小路](http://developer.android.com/reference/android/graphics/Path.html)
*   [画](http://developer.android.com/reference/android/graphics/Paint.html)

[**一些教程**](http://android-er.blogspot.hu/2011/08/drawpath-on-canvas.html)

**更新：** @Shakti Malik 发现了一个非常漂亮的库，看起来很容易使用：[MPAndroidChart](https://github.com/PhilJay/MPAndroidChart)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:26:27.197

试试 OpenGL ES 怎么样？

您可以创建一个将扩展 GLSurfaceView 的 GraphView

示例代码-

```
public class GraphView extends GLSurfaceView {

private Renderer renderer;

public GraphView(Context context) {
    super(context);
    renderer = new GraphRenderer();
    setRenderer(renderer);
}
} 
```

还有你的 GraphRender

```
ublic class GraphRenderer implements Renderer {

public void onDrawFrame(GL10 gl) {
gl.glMatrixMode(GL10.GL_MODELVIEW);
gl.glLoadIdentity();

GLU.gluLookAt(gl, 0, 0, -5, 0f, 0f, 0f, 0f, 1.0f, 1.0f);
gl.glColor4f(1, 0, 0, .5f);
}

public void onSurfaceChanged(GL10 gl, int width, int height) {
gl.glViewport(0, 0, width, height);

float ratio = (float) width / height;
gl.glMatrixMode(GL10.GL_PROJECTION);
gl.glLoadIdentity();
gl.glFrustumf(-ratio, ratio, -1, 1, 3, 7);
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {

}

private void drawGraph(GL10 gl) {
gl.glLineWidth(1.0f);

// put your code here ..

}

public static int loadShader(int type, String shaderCode) {
int shader = GLES20.glCreateShader(type);
GLES20.glShaderSource(shader, shaderCode);
GLES20.glCompileShader(shader);
return shader;
} 
```

}

你可以试试这个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-13T18:09:15.793

Canvas + Paint的示例代码：

在您的 XML 布局中：

```
<com.y30.histogramdisplay.GraphView
    android:id="@+id/histogram_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent" /> 
```

在活动中：

```
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);

   GraphView graphView = (GraphView)findViewById(R.id.histogram_view);
   int graphArray[] = new int[256];
   for(int i = 0; i < graphArray.length; ++i) {
       graphArray[i] = i % 50;
   }
   graphView.setGraphArray(graphArray);
} 
```

和新的观点：

```
public class GraphView extends View {

   int m_graphArray[] = null;
   int m_maxY = 0;

   Paint m_paint;

   public GraphView(Context context) {
       super(context);
       init();
   }

   public GraphView(Context context, AttributeSet attrs) {
       super(context, attrs);
       init();
   }

   public GraphView(Context context, AttributeSet attrs, int defStyle) {
       super(context, attrs, defStyle);
       init();
   }

   private void init() {
       m_paint = new Paint();
       m_paint.setColor(Color.BLUE);
       m_paint.setStrokeWidth(10);
   }

   public void setGraphArray(int Xi_graphArray[], int Xi_maxY)
   {
       m_graphArray = Xi_graphArray;
       m_maxY = Xi_maxY;
   }

   public void setGraphArray(int Xi_graphArray[])
   {
       int maxY = 0;
       for(int i = 0; i < Xi_graphArray.length; ++i)
       {
           if(Xi_graphArray[i] > maxY)
           {
               maxY = Xi_graphArray[i];
           }
       }
       setGraphArray(Xi_graphArray, maxY);
   }

   @Override
   protected void onDraw(Canvas canvas) {
       super.onDraw(canvas);

       if(m_graphArray == null)
       {
           return;
       }

       int maxX = m_graphArray.length;

       float factorX = getWidth() / (float)maxX;
       float factorY = getHeight() / (float)m_maxY;

       for(int i = 1; i < m_graphArray.length; ++i) {
           int x0 = i - 1;
           int y0 = m_graphArray[i-1];
           int x1 = i;
           int y1 = m_graphArray[i];

           int sx = (int)(x0 * factorX);
           int sy = getHeight() - (int)(y0* factorY);
           int ex = (int)(x1*factorX);
           int ey = getHeight() - (int)(y1* factorY);
           canvas.drawLine(sx, sy, ex, ey, m_paint);
        }
    }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-17T20:10:59.360

```
implementation 'com.jjoe64:graphview:4.2.1' 
```

eduGrades = 新字符串[5]; behGrades = 新字符串 [5];

```
 eduGrades[0] = getString(R.string.fail);
    eduGrades[1] = getString(R.string.pass);
    eduGrades[2] = getString(R.string.good);
    eduGrades[3] = getString(R.string.very_good);
    eduGrades[4] = getString(R.string.excellent);

    behGrades[0] = getString(R.string.baad);
    behGrades[1] = getString(R.string.accepted);
    behGrades[2] =  getString(R.string.good);
    behGrades[3] =  getString(R.string.very_good);
    behGrades[4] =  getString(R.string.excellent); 
```

DataPoint[] eduDp = new DataPoint[results.size()]; DataPoint[] behDp = new DataPoint[results.size()];

```
 dates = new String[results.size()];

            for (int i = 0; i < results.size(); i++) {

                dates[i] = results.get(i).getDateOfNote();

                eduDp[i] = new DataPoint(i, (double) results.get(i).getEducationEvaluationSign());
                behDp[i] = new DataPoint(i, (double) results.get(i).getBehaviorEvaluationSign());

            }

            LineGraphSeries<DataPoint> eduSeries = new LineGraphSeries<>(eduDp);
            educationalGraphView.addSeries(eduSeries);
            eduSeries.setDrawBackground(true);
            eduSeries.setColor(getResources().getColor(R.color.blue));
            eduSeries.setBackgroundColor(getResources().getColor(R.color.blue));
            StaticLabelsFormatter staticLabelsFormatter;
            staticLabelsFormatter = new StaticLabelsFormatter(educationalGraphView);
            staticLabelsFormatter.setVerticalLabels(eduGrades);
            staticLabelsFormatter.setHorizontalLabels(dates);

            educationalGraphView.getGridLabelRenderer().setHorizontalLabelsColor(getResources().getColor(R.color.colorPrimaryDark));
            educationalGraphView.getGridLabelRenderer().setVerticalLabelsColor(getResources().getColor(R.color.colorPrimaryDark));
            educationalGraphView.getGridLabelRenderer().setGridColor(getResources().getColor(R.color.white));
            educationalGraphView.getGridLabelRenderer().setHorizontalLabelsAngle(145);
            educationalGraphView.getGridLabelRenderer().setTextSize(23f);
            educationalGraphView.getGridLabelRenderer().setLabelsSpace(20);
            educationalGraphView.getGridLabelRenderer().setLabelFormatter(staticLabelsFormatter); 
```

# c# - 系统安全SecurityException

> ID：12545938
> 
> 赞同：1
> 
> 时间：2012-09-22T17:09:42.767
> 
> 标签：c#, rss, xmlreader

我开发了新闻站点，并试图从另一个站点读取 rss 我使用此代码阅读

```
 private void GetRSS()
          {
    try
    {
        WebRequest rssReq =ebRequest.Create("http://www.aljazeera.net/AljazeeraRss/845674de-               

       e247-4149-b2c4-432d70b0076b/acefc2c1-1a68-4977-91c3-969026916497");

        //Create a Proxy
        WebProxy px = new WebProxy("http://www.aljazeera.net/AljazeeraRss/845674de-e247-         

        4149-b2c4-432d70b0076b/acefc2c1-1a68-4977-91c3-969026916497", true);
        //   XPath="/rss/channel/item";
        //Assign the proxy to the WebRequest
        rssReq.Proxy = px;

        //Set the timeout in Seconds for the WebRequest
        rssReq.Timeout = 5000;
        try
        {
            //Get the WebResponse
            WebResponse rep = rssReq.GetResponse();

            //Read the Response in a XMLTextReader
            XmlTextReader xtr = new XmlTextReader(rep.GetResponseStream());

            //Create a new DataSet
            DataSet ds = new DataSet();
            //Read the Response into the DataSet
            ds.ReadXml(xtr);
            //Bind the Results to the Repeater
            Repeater1.DataSource = ds.Tables[3]; ;
            Repeater1.DataBind();
        }
        catch(Exception EX)
        {
            throw EX;
        }
        //ProcessRSSItem("http://www.bbc.co.uk/arabic/index.xml");

    }
    catch (Exception EX)
    {
        throw EX;
    }
} 
```

它在本地主机上工作得很好，但是当我将它上传到我的 godaddy 帐户时，它没有读取任何内容并且我有这个错误

```
Exception Details: System.Security.SecurityException: Request for the permission of type 'System.Net.WebPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed. 
```

任何人都可以为我描述这个问题并给我一个解决方案

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:20:03.987

您的用户、帐户或 GoDaddy 上的任何内容均无权执行此操作。如果您应该拥有权限（并非所有人都拥有），请联系 GoDaddy。

# c# - C# 从文件调用代码

> ID：12545939
> 
> 赞同：0
> 
> 时间：2012-09-22T17:09:50.377
> 
> 标签：c#, file

是否可以从文件中调用我的 c# 代码？该应用程序应该能够扫描我文件中的行并执行其中的代码。

假设我的应用程序中有以下方法：

```
public void ShowMsg(String msg) 
{
     MessageBox.Show(msg);
} 
```

和`ShowMsg("Hello")`我文件中的行。

我希望我的应用程序能够从文件中读取代码，最后它应该显示一个带有字符串“Hello”的消息框。但当然，我想要实现的远比简单地向用户显示消息框要复杂得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:13:41.187

这里有一个关于[`compiling and executing code at run-time`](http://www.codeproject.com/Articles/9019/Compiling-and-Executing-Code-at-Runtime). 它应该做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:15:12.323

代码项目中的示例源代码： [在运行时编译代码](http://www.codeproject.com/Articles/10324/Compiling-code-during-runtime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:12:10.060

有可能，实际上有一个API。

所以这里有一个直接来自stackoverflow的链接： [是否可以动态编译和执行C#代码片段？](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)

# javascript - 在 for 循环中克隆

> ID：12545942
> 
> 赞同：1
> 
> 时间：2012-09-22T17:10:24.207
> 
> 标签：javascript, jquery, html

我有一排文本框，我有一个函数可以根据函数中的数字来克隆它们。因此，如果将有 4 个用户，那么我希望该行克隆 4 次以输入 4 个用户的信息。但我也想要某种方式能够提交此表单，我无法弄清楚如何为每个文本框赋予每一行一个唯一的类或 id，以便我可以在提交时阅读它们。

我正在考虑在第一行的所有内容中为每个类（或 id）添加“1”，然后在第二行中的所有内容中添加“2”。但我不太确定如何做到这一点。[我在 jsFiddle](http://jsfiddle.net/LdFgs/)中有一个示例，由于我尝试添加 for 循环并克隆了一定次数，现在克隆甚至根本不起作用-如果有人有任何建议，它真的会帮助我。

```
<div class="RegisterContainer">
  <div class="RegisterHead"><a>Register Attendees</a></div>
    <div class="placenewrows"></div>
</div>
<br />
<input type="button" onclick="fnCloneTemplate({'number' : '3'});" value="make 3 rows">

<div class="_template">
  <a class="left1">First Name:</a>
  <a class="left2"></a><a class="left2">Last Name:</a>
  <a class="left3">Phone #</a><a class="left4">Email:</a>
  <a class="left5">Optional Comment</a><br />
  <input type="text" class="tFirstName left1"/>
  <input type="text" class="tLastName left2"/>
  <div class="phonenumberbox left3">
    <input type="text" class="first3digits" maxlength="3" />
    <a style="position:relative;top:-1px;">-</a>
    <input type="text" class="next3digits" maxlength="3" />
    <a style="position:relative;top:-1px;">-</a>
    <input type="text" class="last4digits" maxlength="4" />
 </div>                                                                                              <input type="text" class="tEmail left4"/> 
```

```
function fnCloneTemplate(x){
    var NumofClones = (x.number * 1);
    for(i=0; i <= NumofClones; i++)
    {
       var newrow = $('._template').clone().removeclass('_template');
        $('.placenewrows').append(newrow);
    }    
} 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T17:15:56.957

您的代码中有一个错字：

```
var newrow = $('._template').clone().removeclass('_template');
                                     //----^ 
```

`removeclass`应该是`removeClass`。

[http://jsfiddle.net/y543n/](http://jsfiddle.net/y543n/)

此外，您还没有在小提琴中加载 jQuery，并且存在范围问题，您使用的是 HTML onclick 属性，并且未定义该上下文中的函数。您可以改用 jQuery click 方法：

```
$('input[type=button]').click(function(e){
   e.preventDefault();
   // ....
}) 
```

* * *

```
$('input[type=button]').click(function(e) {
    var numofClones = 3;
    e.preventDefault();
    var b = $('.placenewrows input[type=text]').length;
    var newrow = $('._template').clone().removeClass('_template').find('input[type=text]').addClass(function(i, cur) {
            return 'something' + ++b
    }).end()
    for (i = 0; i < numofClones; i++) {
        $('.placenewrows').append(newrow);
    }
})​ 
```

[http://jsfiddle.net/bgCXX/](http://jsfiddle.net/bgCXX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:12:55.413

您可以像下面这样更改您的功能，以避免多次克隆。

```
function fnCloneTemplate(e){
    var NumofClones = (e.data.number * 1),
        newrow= $('._template').clone().removeClass('_template'); // in your code
                                                                  // removeClass spelling
                                                                  // mistaken
    for (i=0; i<NumofClones; i++)
    {
        $('.placenewrows').append(newrow);
    }    
} 
```

### 使用`on()`：

***HTML***

```
<input type="button"value="make 3 rows" id="make_clone"> 
```

***jQuery***

```
function fnCloneTemplate(e){
    var NumofClones = (e.data.number * 1),
        newrow= $('._template').clone().removeClass('_template');
    for (i=0; i<NumofClones; i++)
    {
        $('.placenewrows').append(newrow);
    }    
}

$('#make_clone').on('click',{'number' : '3'}, fnCloneTemplate); 
```

***[演示](http://jsfiddle.net/LdFgs/6/)***

## 克隆和唯一的完整代码`class`

```
function fnCloneTemplate(x) {
    var NumofClones = (x.data.number * 1),
        clone = $('._template').clone().removeClass('_template');
    for (i = 0; i <= NumofClones; i++) {
        var newrow =    clone
                        .find('input[type=text]')
                        .attr('class', function(i, oldClass) {                             
                                return oldClass.replace(/\d/, function(char) {
                                    return +char + i ;
                                });
                                return newClass
                            })
                        .end();
        $('.placenewrows').append(newrow);
    }
} 
```

# entity-framework - 删除数据库。实体框架

> ID：12545947
> 
> 赞同：-1
> 
> 时间：2012-09-22T17:11:36.910
> 
> 标签：entity-framework

我遵循了以下 MDSN 教程：

> [http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model)

然后我根据需要尝试了本指南并设置了一个数据库`GAMES.MDF`。

然后，我删除了数据库并重新设置它，据说可以工作（我可以写入和读取数据），但是`APP_DATA`文件夹中没有这样的数据库。它似乎存在，但在我电脑的其他地方。我什至尝试了一个新项目，但它不工作，工作但不在库中，它甚至使用我之前创建的数据。我什至从 SQL Server Management Studio 2008 中删除了数据库。

我如何永久删除它，而不是留下任何痕迹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:20:51.633

检查 web.config 中的连接字符串 - 您可能会在那里看到文件位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T19:36:08.597

理想情况下，您的连接字符串应命名您要使用的数据库。我不建议您指定 MDF 文件，除非您知道您使用的是 SQL Express。来源：[https ://social.msdn.microsoft.com/Forums/sqlserver/en-US/f21c0728-935d-492a-baaf-ff2704e3683b/attachdbfilename-option-in-connection-string?forum=sqldataaccess0](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/f21c0728-935d-492a-baaf-ff2704e3683b/attachdbfilename-option-in-connection-string?forum=sqldataaccess0)

相反，这是在 SQL Server 上完成的：

```
initial catalog=MyDatabase 
```

为确保您访问的是您认为的数据库，请通过您的应用程序运行此 SQL 查询，使用您的连接字符串，并查看您的 MDF 文件的物理文件位置。此查询对于了解哪个 DB 与哪个 DB 文件相关联非常方便。

```
select * from [dbo].[database_files] 
```

就实际清除数据库而言，本文处理的是管理数据库初始化程序和种子。您可能会因此遇到问题： [How to delete and recreate from scratch an existing EF Code first database](https://stackoverflow.com/questions/16035333/how-to-delete-and-recreate-from-scratch-an-existing-ef-code-first-database)

在 EF 之外，SQL 会像这样删除数据库：

```
use master
drop database MyDatabase 
```

# svn - 颠覆迁移后同步本地副本

> ID：12545948
> 
> 赞同：0
> 
> 时间：2012-09-22T17:11:38.643
> 
> 标签：svn, version-control

我最近将一个 subversion 存储库迁移到了一个新服务器，我对以下场景有疑问：

1) 预迁移：本地副本 A 已从 subversion 服务器 A 中检出。

2) Subversion 服务器 A 已迁移到 subversion 服务器 B。本地副本 A 中有本地更改在迁移之前未签入。

3) 迁移后：我有没有办法将本地副本 A 与新的颠覆服务器 B 同步？还是我需要从 B 重新结帐并合并本地副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:31:22.830

我认为您必须从 B 中获取结帐，复制修改并合并。
还认为保留两台服务器不是一个好主意。与 SVN 相比，拥有不同的服务器可能是使用不同产品的更好选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T20:37:50.093

您可以尝试“svn relocate”将工作副本 URL 更改为目标存储库。然后提交您的更改。

# drupal - 视图 3 输出的自定义顺序

> ID：12545954
> 
> 赞同：2
> 
> 时间：2012-09-22T17:12:29.530
> 
> 标签：drupal, views, sql-order-by

我在视图中有一个相关字段，其中包含排名 1-4，如果相关记录不存在，则为 NULL。我需要按以下顺序返回结果：1、2、3、NULL、4，而现在，它按以下顺序返回数据集：NULL、1、2、3、4。

看起来这将是一件简单的事情，使用

```
ORDER BY FIELD(field, 1,2,3,NULL,4) in hook_views_alter_query. 
```

我查看了视图中的 SQL 输出并提取了：

```
ORDER BY 
 field_partner_name_users__field_data_field_partner_ranking.field_partner_ranking_value, 
```

然后把它放在钩子里：

```
$query->orderby[0]['field'] = 
 "field_partner_name_users__field_data_field_partner_ranking.field_partner_ranking_value"; 
```

但是当我尝试在 中使用此字段时`ORDER BY`，我收到此错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'field_partner_name_users__field_data_field_partner_ranking.field_partner_ranking_value' in 'order clause' 
```

任何帮助将不胜感激。此外，是否有关于 Views 3 的综合指南？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:11:36.643

在您的自定义模块中尝试 hook_veiws_query_alter 以及 hook_views_api

# java - 是否可以从 R.java 中获取 a (int -> String) 映射

> ID：12545957
> 
> 赞同：0
> 
> 时间：2012-09-22T17:12:53.777
> 
> 标签：java, android

`String`有没有办法通过反射或生成它来获取视图引用的名称？

例子：

`public static final int main = 0x7f030000;`

我有`0x7f030000`，我想要`"main"`；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T17:24:25.037

```
Field[] fields = R.layout.class.getDeclaredFields();
for(Field f : fields)
{
    String fieldName = f.getName();
    int fieldValue = (Integer) f.get(new Integer(0));
    // ...
} 
```

# sql - 使用 SQL Server 2008 表中的新值更新 Xml 属性

> ID：12545964
> 
> 赞同：10
> 
> 时间：2012-09-22T17:13:40.540
> 
> 标签：sql, xml, sql-server-2008, xquery

我在 SQL Server 2008 中有一个表，它有一些列。其中一列是 Xml 格式，我想更新一些属性。

例如，我的 Xml 列的名称是`XmlText`，它在前 5 行中的值是：

```
 <Identification Name="John"  Family="Brown"     Age="30" /> 
 <Identification Name="Smith" Family="Johnson"   Age="35" /> 
 <Identification Name="Jessy" Family="Albert"    Age="60" />
 <Identification Name="Mike"  Family="Brown"     Age="23" />
 <Identification Name="Sarah" Family="Johnson"   Age="30" /> 
```

我想将所有`Age`30 到 40 的属性更改如下：

```
 <Identification Name="John"  Family="Brown"     Age="40" /> 
 <Identification Name="Smith" Family="Johnson"   Age="35" /> 
 <Identification Name="Jessy" Family="Albert"    Age="60" />
 <Identification Name="Mike"  Family="Brown"     Age="23" />
 <Identification Name="Sarah" Family="Johnson"   Age="40" /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T15:35:59.493

从您问题的早期版本看来，您的 XML 实际上位于表中的不同行上。如果是这种情况，您可以使用它。

```
update YourTable set
  XMLText.modify('replace value of (/Identification/@Age)[1] with "40"')
where XMLText.value('(/Identification/@Age)[1]', 'int') = 30 
```

使用表变量的工作示例。

```
declare @T table(XMLText xml)

insert into @T values('<Identification Name="John"  Family="Brown"   Age="30" />')
insert into @T values('<Identification Name="Smith" Family="Johnson" Age="35" />') 
insert into @T values('<Identification Name="Jessy" Family="Albert"  Age="60" />')
insert into @T values('<Identification Name="Mike"  Family="Brown"   Age="23" />')
insert into @T values('<Identification Name="Sarah" Family="Johnson" Age="30" />')

update @T set
  XMLText.modify('replace value of (/Identification/@Age)[1] with "40"')
where XMLText.value('(/Identification/@Age)[1]', 'int') = 30

select *
from @T 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-23T15:18:18.310

尝试这个：

```
declare @xml XML

SET @xml = '<Root>
         <Identification Name="John"  Family="Brown"     Age="30" /> 
         <Identification Name="Smith" Family="Johnson"   Age="35" /> 
         <Identification Name="Jessy" Family="Albert"    Age="60" />
         <Identification Name="Mike"  Family="Brown"     Age="23" />
         <Identification Name="Sarah" Family="Johnson"   Age="30" />
         </Root>'

 DECLARE @nodeCount int
DECLARE @i int

SET @i = 1

SELECT @nodeCount = @xml.value('count(/Root/Identification/@Age)','int') 

PRINT 'Number of nodes found: ' + STR(@nodeCount)

WHILE (@i <= @nodeCount)
BEGIN
Set @xml.modify('replace value of (/Root/Identification/@Age)[.=30][1] with "40"')

SET @i = @i + 1
END

SELECT @xml 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T09:36:04.757

modify 方法是您的响应。但是如果你需要一个条件，你可以在这个方法的 with 部分使用 if 表达式。

```
DECLARE @t TABLE (RecordXML XML);
Declare @xml XML
SET @xml = '<Root>
         <Identification Name="John"  Family="Brown"     Age="30" /> 
         <Identification Name="Smith" Family="Johnson"   Age="35" /> 
         <Identification Name="Jessy" Family="Albert"    Age="60" />
         <Identification Name="Mike"  Family="Brown"     Age="23" />
         <Identification Name="Sarah" Family="Johnson"   Age="30" />
         </Root>'
INSERT @t VALUES (@xml);

Declare @value nvarchar(50)
DECLARE @oldvalue nvarchar(50)
SET @value = '40'
SET @oldvalue = '30'

Declare @update_count xml
select @update_count = @xml.query('count(/Root/Identification/@Age[.=sql:variable("@oldvalue")])')
Declare @number int
select @number = convert(int, (convert(nvarchar(50), @update_count)))

declare @Node int
set @Node = 1

while @Node <= @number
begin
UPDATE
  @t
SET
   RecordXML.modify('replace value of 
   (/Root/Identification/@Age[.=sql:variable("@oldvalue")])[1] with sql:variable("@value")')
WHERE
  RecordXML.exist('/Root/Identification[@Age=sql:variable("@oldvalue")]') = 1;

set @Node = @Node + 1
end

SELECT * FROM @t; 
```

# php - Magento 使用“bundle_option”将捆绑产品添加到购物车？

> ID：12545970
> 
> 赞同：4
> 
> 时间：2012-09-22T17:13:59.160
> 
> 标签：php, magento, magento-1.7, kabel-bundleplus

在 Magento 中以编程方式将捆绑产品添加到购物车时，我似乎无法在产品选项数组中找到任何有关“bundle_option”字段的文档。所以我不能确定如何正确地做到这一点。

但这是我的尝试：

```
$json_obj = json_decode($json_string, true);

//define cart
$cart = Mage::getSingleton('checkout/cart');
$bundle = array();
$bundle_qty = array();

for ($i=0; $i<count($json_obj['basket']['products']); $i++) {
  $product_id = int($json_obj['basket']['products'][$i]['id']);

  #add individual products to cart
  #$product = new Mage_Catalog_Model_Product();
  #$product->load($product_id);
  #$params = array('product'=>$product_id,'qty'=>1);
  #if ($product->getName()) $cart->addProduct($product, $params);

  #add products to bundle
  $bundle[$i] = $product_id;
  if (isset($bundle_qty[$product_id])) $bundle_qty[$product_id] += (int)1;
  else $bundle_qty[$product_id] = (int)1;

}

#add to bundled product to cart
$product = new Mage_Catalog_Model_Product();
$product->load(833); #833 = test bundle
$cart->addProduct($product, array('product'=>833,
                                  'qty'=>min(1,int($json_obj['basket']['quantity'])),
                                  'bundle_option'=>$bundle,
                                  'bundle_option_qty'=>$bundle_qty));
$cart->save();
Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
$message = $this->__('Notice: %s item(s) were successfully added to your shopping cart.', $i);
Mage::getSingleton('checkout/session')->addSuccess($message); 
```

}

因此，注释掉的代码是单独添加可以正常工作的产品。现在我正在尝试将产品添加到“测试捆绑”产品中。

我现在在循环中做的是为“bundle_option”和“bundle_option_qty”字段编译数组。循环完成后，我将使用捆绑商品的选项数组将捆绑产品 (ID:833) 添加到购物车。

结果是没有任何东西添加到购物车中。我也对代码进行了一些尝试，但没有成功。

任何人都可以看到我哪里出错了，或者您是否可以将我指向产品选项参数的文档/教程，其中详细说明了 bundle_option 数组（索引是什么，值是什么），这也会有所帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:12:48.413

我必须检查从前端发送到购物车 URL 的 POST 变量才能弄清楚这一点。

这些是为一个捆绑包发布的变量：

```
bundle_option[1][]  17
bundle_option[1][]  19
bundle_option_qty[1][17]    1
bundle_option_qty[1][19]    1
product 833
qty 2
related_product 
```

从那我发现在捆绑包中`bundle_option[1]`提到了**选项 1**。我还认为索引的值`bundle_option[1][0]=17`和`bundle_option[1][1]=19`- 17 和 19 指的是`selection_id`.

分析前端的表单显示了我的 selection_id 列表。我认为一旦在“管理”>“管理产品”中更改捆绑包，选择 ID 就会发生变化，因此我使用查找来获取选择 ID，而不是硬编码它们。

我最终得到的代码是这样的：

```
$json_string = isset($_POST["json"])? $_POST["json"] : null;
if (!is_null($json_string)) {

  $json_obj = json_decode($json_string, true);

  #define cart
  $cart = Mage::getSingleton('checkout/cart');

  #look-up bundle selection ids
  $bundled_product = new Mage_Catalog_Model_Product();
  $bundled_product->load(833); #833 = test bundle
  $selectionCollection = $bundled_product->getTypeInstance(true)->getSelectionsCollection(
      $bundled_product->getTypeInstance(true)->getOptionsIds($bundled_product), $bundled_product
  );
  $bundled_items = array();
  foreach ($selectionCollection as $option) {
    $bundled_items[$option->product_id] = $option->selection_id;
  }

  #get bundle items, quantities
  $bundle = array();
  $bundle_qty = array();
  for ($i=0; $i<count($json_obj['basket']['products']); $i++) {
    $product_id = (int)$json_obj['basket']['products'][$i]['id'];
    $selection_id = $bundled_items[$product_id];
    if(!in_array($selection_id,$bundle)) array_push($bundle,$selection_id);
    if (isset($bundle_qty[$selection_id])) $bundle_qty[$selection_id] += (int)1;
    else $bundle_qty[$selection_id] = (int)1;
  }

  #add to bundled product to cart
  $options = array('product'=>833,
                   'related_product'=>null,
                   'bundle_option'=>array(1=>$bundle),
                   'bundle_option_qty'=>array(1=>$bundle_qty),
                   'qty'=>(int)$json_obj['basket']['quantity']
                  );
  $cart->addProduct($bundled_product, $options);
  $cart->save();
  Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
  $message = $this->__('Notice: %s item(s) were successfully added to your shopping cart.', $i);
  Mage::getSingleton('checkout/session')->addSuccess($message);
} 
```

我希望这可以节省很多时间！

# 编辑

仍在尝试解决为什么`bundle_option_qty`不设置数量（所有项目都是 qty:1 添加到捆绑产品中）

# 编辑 2

事实证明，内置的前端捆绑添加到购物车功能也无法将多个商品添加到购物车！[调查这个问题，我发现捆绑数量功能是一个名为 Kabel BundlePlus 的扩展](http://www.magentocommerce.com/boards/viewthread/33997/P60/#t319760)，以前的开发人员可能没有正确安装它，所以我再次下载并重新安装了插件，现在`the bundle_option_qty`可以在前端和我的插件中使用！

# php - codeigniter 展平查询结果数组

> ID：12545973
> 
> 赞同：3
> 
> 时间：2012-09-22T17:14:22.473
> 
> 标签：php, arrays, codeigniter

我在 Codeigniter 中使用查询来返回属于用户的所有行的 ID。

```
$this->db->select('id');
$this->db->where('user_id', 99);
$query = $this->db->get('my_table');
return $query->result_array(); 
```

这返回

```
Array ( [0] => Array ( [id] => 8 ) [1] => Array ( [id] => 7 ) [2] => Array ( [id] => 6 ) ) 
```

是否可以返回一个平面数组，如

```
Array ( [0] => 8 [1] => 6 [2] => 7 ) 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T17:20:02.633

```
$b = array();
foreach($query->result_array() as $a) {
   $b[] = $a['id'];
}
return $b; 
```

如果您每次选择一列时都懒得添加几行，则需要调整 Codeigniter。就像选择单列时添加一些选项或返回扁平数组一样。我建议添加一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T07:56:13.600

跟随可以是另一种方式。我不知道它与接受的答案相比有什么优势。

假设您将函数的输出存储在`$result`. 然后您可以执行以下操作：

```
array_unshift($result, null);
$transposed = call_user_func_array("array_map", $result);
print_r($transposed); 
```

它会打印

> 数组（[0] => 数组（[0] => 8 [1] => 6 [2] => 7））

您可以通过 $transposed[0] 访问您想要的内容

> 数组（ [0] => 8 [1] => 6 [2] => 7 ）

# php - 在 PHP 中确定 Flash 视频的持续时间

> ID：12545989
> 
> 赞同：0
> 
> 时间：2012-09-22T17:16:38.267
> 
> 标签：php, function, video, duration

我需要一个 PHP 函数来确定 xvideos dot com [NSFW] 上视频的持续时间，例如：

```
$video = "http://flashservice.xvideos dot com/embedframe/1606356";
function duration ($video);
echo duration; 
```

这将返回 11:49。

**请注意**：该网站不适合工作。这是一个色情网站。如果您在工作，请谨慎访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T18:28:14.073

好吧，您只有一个指向嵌入式播放器的链接，而不是指向视频 (FLV) 文件的实际热链接，所以我假设您不知道如何获得它。

就是这样：

您的链接末尾有一个数字，即`1606356`. 该数字是视频 ID，因此它代表您要播放的视频。现在我们有了视频 ID，我们需要加载原始页面，用户在尝试从原始站点（而不是通过嵌入式播放器）观看视频时会访问该页面。原页面链接为：`http://www.xvideos.com/video1606356`. 在该链接的末尾也看到相同的视频 ID？

需要加载原始页面的原因实际上是因为它包含一些flash vars，其中之一是指向特定视频的FLV热链接。所以我们需要从原始页面的 HTML 中去除该热链接。

让我们编码吧！

```
//load the original page
$originalPage = file_get_contents( 'http://www.xvideos dot com/video1606356' );

//strip the FLV link
if ( !preg_match( '|flv_url=(.*)&amp;url_bigthumb|', $originalPage , $match ) )
{

    echo "Sorry, I could not find the hot link.";
    //bye
    exit(); 

}

$hotLink = $match[1];

//decode the hotlink (because it's URL encoded)
$hotLink = urldecode( $hotLink ); 
```

所以我们现在有了我们的热链接！接下来，我们需要下载`flv`文件并将其存储在本地，以便我们可以`fopen()`在其上使用。这会减慢速度，但这也意味着我们不必在服务器上打开安全漏洞。

```
//download the flv and store it in a folder called 'videos'
file_put_contents( 'videos/myVideoFileName.flv' , file_get_contents( $hotLink ) ); 
```

所以我们现在有一个下载的 flv 视频副本。我们现在需要使用我从[这里](https://stackoverflow.com/questions/3282273/calculate-flv-video-file-length-using-pure-php)偷来的方法来获取长度：

```
$flv = fopen("videos/myVideoFileName.flv", "rb");
fseek($flv, -4, SEEK_END);
$arr = unpack('N', fread($flv, 4));
$last_tag_offset = $arr[1];
fseek($flv, -($last_tag_offset + 4), SEEK_END);
fseek($flv, 4, SEEK_CUR);
$t0 = fread($flv, 3);
$t1 = fread($flv, 1);
$arr = unpack('N', $t1 . $t0);
$milliseconds_duration = $arr[1]; 
```

你有它。

最后，我不认为 XVIDEOS 可以接受您在这里所做的事情（没有人喜欢热链接窃贼）。对于您使用上述任何代码/内容所做的任何事情，我概不负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:42:09.340

您需要先获取视频的热链接，然后在这里查看：

[计算flv视频文件长度？使用纯 php](https://stackoverflow.com/questions/3282273/calculate-flv-video-file-length-using-pure-php)

# jquery - 在页面加载时隐藏 jQuery 消息 div（在 asp.net 4.0 页面上）

> ID：12545994
> 
> 赞同：0
> 
> 时间：2012-09-22T17:17:21.057
> 
> 标签：jquery, asp.net

jQuery 菜鸟在这里：

我有以下消息 div，它在按钮单击时显示一条消息，并在几秒钟后消失。这工作正常。但是，我希望消息 div 在页面加载时隐藏并在按钮单击时显示。

到目前为止，我已经尝试将 hideDiv 类添加到消息 div 中，但是 messageDiv 根本不显示（在加载或单击按钮时）。我还尝试隐藏/显示父包装 Div（此处未显示）。

建议？

```
<div id="messageDiv" runat="server" class="alert">Row Deleted</div> 
```

.

```
<style type="text/css">
.alert{display:block;width:100%;color:#900000;font-size: 1.4em;}
.hideDiv{display:none;}
</style> 
```

.

```
<script type="text/javascript">
$(document).ready(function () {
$(document.getElementById('<%= messageDiv.ClientID %>')).addClass("alert"); setTimeout(function () {
$(document.getElementById('<%= messageDiv.ClientID %>')).fadeOut("slow", function () {
$(document.getElementById('<%= messageDiv.ClientID %>')).remove();
});
}, 4000);
});
</script> 
```

.

```
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" /> 

protected void Button1_Click(object sender, EventArgs e)
{messageDiv.InnerText = "Row Action Completed";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:23:15.343

因此，您将消息 div 设置为 display:none; 通过CSS，对吗？

```
$('#Button1').click(function() {
    $('#messageDiv').hide();
}); 
```

试试看。

但是，您也可以自动执行淡出：

```
$(document).ready(function() {
    setTimeout(function(){ $('#messageDiv').fadeOut(); }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:25:35.280

看看[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)。

他们有很多选项来显示警报消息。

比编写自己的解决方案要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T21:32:12.230

所以我制定了自己的解决方案。我确信那里有一个更简洁的解决方案（我很高兴听到它），但我最终得到了以下部分：

解决方案：

*   消息 div 必须在页面加载时隐藏（显示：无）。
*   我将页面级别的服务器端 var 设置为 false，以指示消息不应该显示（[这里](https://stackoverflow.com/questions/2275007/how-to-create-a-fading-label-in-jquery-asp-net-after-a-button-press)的每个解决方案）
*   在服务器端按钮单击事件中将该 var 设置为 true
*   在调用代码以显示/淡入 Div 之前检查 jQuery 中的 var = true
*   在添加警报类和淡入淡出效果之前，从 messageDiv 中删除现有的隐藏类。

所以所有的工作部分：

服务器端脚本：

```
<script type="text/C#" runat="server">
    Boolean UserHasClicked = false;
    protected void Button1_Click(object sender, EventArgs e)
    {
        UserHasClicked = true;
        messageDiv.InnerText = "Row deleted successfully.";
    }
</script> 
```

.

客户端脚本：

```
<script type="text/javascript">
var userHasClicked = '<%= this.UserHasClicked %>' == 'True'
$(document).ready(function () {
if (userHasClicked) {
$(document.getElementById('<%= messageDiv.ClientID %>')).removeClass("hideDiv");
$(document.getElementById('<%= messageDiv.ClientID %>')).addClass("alert");
$(document.getElementById('<%= messageDiv.ClientID %>')).delay(4000).fadeOut("slow");      
}
});
</script> 
```

这是一个有趣的练习，但我确信有一个更完善的控件或解决方案可以在 .net 中的某个地方显示/淡化消息。

# java - 从控制台获取java输入

> ID：12545996
> 
> 赞同：1
> 
> 时间：2012-09-22T17:17:31.373
> 
> 标签：java, user-input

我是一名 C/C++ 程序员，并且是 java 新手。

```
char input1[13],input2[20]; 

 int a,b;

while(scanf("%s %s %d %d",input1,input2,&a,&b)!=EOF)
{
    printf("%s %s %d %d",input1,input2,a,b);
} 
```

谁能帮我把上面的c代码转换成java？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:20:37.190

由于您是 Java 新手，因此我认为为您提供源代码参考比提供完整的解决方案更有益！

[您可以使用 Scanner 类来读取用户输入。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

[您可以使用 System.out 进行输出。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html)

至于类型，您几乎可以使用相同的东西，但我建议您使用 String 类而不是 char[]。

希望这可以帮助。