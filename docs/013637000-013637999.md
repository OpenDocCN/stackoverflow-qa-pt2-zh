# StackOverflow 问答 13637000-13637999

# python - 使用单个功能编辑多个字典：

> ID：13637009
> 
> 赞同：0
> 
> 时间：2012-11-30T00:01:53.670
> 
> 标签：python, dictionary

假设我有 3 个空字典：

```
dic1 = {}
dic2 = {}
dic3 = {} 
```

我想使用一个函数一次性添加到这些字典中。到目前为止，最简单的方法是什么，我有：

```
def fillDics(x):
    count = 0
    for i in range(0, x):
            if count==0:
                    dic1[legendaryfn[count]] = 0
                    dic1[legendary[count]] = 1
                    count+=1

            if count==1:
                    dic2[legendaryfn[count]] = 0
                    dic2[legendary[count]] = 1
                    count+=1 
```

等等，这似乎非常低效。我错过了什么？我对编程很陌生，所以我很感激你能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:04:27.643

就这样完成了。

```
for myDict in [dict1, dict1, dict3]:
  myDict[key] = value 
```

此外，如果数值对您有意义，您可以添加枚举：

```
for idx, myDict in enumerate([dict1, dict2, dict3]):
  myDict['position'] = idx 
```

或者你有什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:05:56.193

您可以使用字典列表

```
def fillDics(x):
    for d in [dict1,dict2,dict3]:
        d[legendaryfn[count]] = 0
        d[legendary[count]] = 1 
```

# ant - Linux下带参数运行buildfile

> ID：13637010
> 
> 赞同：0
> 
> 时间：2012-11-30T00:01:56.437
> 
> 标签：ant

我创建了一个 Ant 任务，它使用参数运行 buildfile (dfs-build.xml)。它在 OS Windows 下运行良好。但是，我希望 ANT 任务在 Linux 下运行。有任何想法吗？

```
<exec executable="cmd">
    <arg value="/c"/>
    <arg value="${ant.basedir}\bin\ant -Dproperty.files.dir=${property.files.dir} -Dbasedir=${antscripts.basedir}/../DocumentumCoreProject/dfs6.7 -Dmodule.name=rbacs -f ${antscripts.basedir}\sub_ANTs\Create_EAR_WAR\dfs-build.xml generate"/>
</exec> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:15:48.097

Linux下的exec任务比较简单：

```
<exec executable="${ant.basedir}\bin\ant" osfamily="unix">
   <arg value="-Dproperty.files.dir=${property.files.dir} -Dbasedir=${antscripts.basedir}/../DocumentumCoreProject/dfs6.7 -Dmodule.name=rbacs -f ${antscripts.basedir}\sub_ANTs\Create_EAR_WAR\dfs-build.xml generate"/>
</exec> 
```

另一个跨平台选项是在同一个 ANT 进程中运行构建

```
<subant antfile="{antscripts.basedir}\sub_ANTs\Create_EAR_WAR\dfs-build.xml" target="generate">
    <property name="property.files.dir" value="${property.files.dir}"/>
    <property name="basedir" value="${antscripts.basedir}/../DocumentumCoreProject/dfs6.7"/>
    <property name="module.name" value="rbacs"/>
</subant> 
```

# xna - 体素动画

> ID：13637011
> 
> 赞同：0
> 
> 时间：2012-11-30T00:02:07.117
> 
> 标签：xna

我已经能够将 Maya 中的 3D 网格转换为体素艺术（看起来像一堆立方体——类似于乐高积木），所有这些都是在 Maya 中完成的。我计划使用 3D 艺术环绕我的 2D 纹理以使其成为 2.5D。我的问题是：被体素化的网格是否允许我将碎片用作粒子，我可以将它们放入 XNA 中的粒子引擎中以获得令人敬畏的动态效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:20:18.197

不，因为你得到了一组顶点和索引定义三角形，没有关于立方体的信息。

但是您可以创建一个从模型中提取信息的算法。这有点难，但它是可行的。

我会创建一个 3d 网格，对于每个面，我会从该面向另一面发射光线，与网格进行每次碰撞，为每条光线获取一些应该成对的碰撞 (0, 2, 4,...)，这在两点之间应该有一个坚实的体积。

这样它就可以转换为体素......在每次碰撞时，存储与碰撞的三角形相关的骨骼会很有用，这样您就可以为体素模型设置动画。

# drupal-7 - Drupal 7 hook_schema 没有安装数据库表

> ID：13637017
> 
> 赞同：1
> 
> 时间：2012-11-30T00:02:40.240
> 
> 标签：drupal-7, drupal-hooks, drupal-schema

任何帮助都会很棒。

```
function request_gold_pack_schema() {
    $schema['request_gold_pack_customer_details'] = array(
        'description' => 'Table to store all customer details.',
        'fields' => array(     
            'rid' => array(
                'type' => 'int',  
                'not null' => TRUE, 
                'default' => 0,
                'auto increment' => TRUE
            ),
            'title' => array(
                'type' => 'varchar', 
                'length' => 10,
                'not null' => TRUE,
                'default' => ''
            ),
            'first_name' => array(
                'type' => 'varchar',
                'length' => 50, 
                'not null' => TRUE,
                'default' => ''
            ),
            'last_name' => array(
                'type' => 'varchar',
                'length' => 50,
                'not null' => TRUE,
                'default' => ''
            ),
            'house_name_no' => array(
                'type' => 'varchar', 
                'length' => 50,
                'not null' => TRUE,
                'default' => ''
            ),
            'street' => array(
                'type' => 'varchar',
                'length' => 160,
                'not null' => TRUE,
                'default' => ''
            ),
            'town' => array(
                'type' => 'varchar',
                'length' => 50,
                'not null' => TRUE, 
                'default' => ''
            ),
            'county' => array(
                'type' => 'varchar', 
                'length' => 50,
                'not null' => TRUE,
                'default' => ''
            ),
            'telephone' => array(
                'type' => 'int',
                'length' => 12,
                'not null' => TRUE,
                'default' => ''
            ),
            'email' => array(
                'type' => 'varchar', 
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),
            'date_registered' => array(
                'mysql_type' => 'DATETIME',
                'not null' => TRUE
            ),
            'primary' => array(
                'rid'
            )
        )
    );

    return $schema;
} 
```

这给了我以下错误

> 注意：未定义索引：输入 DatabaseSchema_mysql->processField()（/Users/richardskinner/Sites/www.goldrushmoney.com-local/httpdocs/includes/database/mysql/schema.inc 的第 205 行）。注意：未定义索引：DatabaseSchema_mysql->processField() 中的：正常（/Users/richardskinner/Sites/www.goldrushmoney.com-local/httpdocs/includes/database/mysql/schema.inc 的第 205 行）。PDOException: SQLSTATE[42000]: 语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 'DEFAULT NULL ) ENGINE = InnoDB DEFAULT CHARACTER SET utf8 COMMENT 'Table to stor' 在第 13 行：CREATE TABLE {request_gold_pack_customer_details} ( `rid`INT NOT NULL DEFAULT 0, `title`VARCHAR(10) NOT NULL DEFAULT '',`first_name`VARCHAR(50) 非空默认值''，`last_name`VARCHAR(50) 非空默认值''，`house_name_no`VARCHAR(50) 非空默认值''，`street`VARCHAR(160) 非空默认值''，`town`VARCHAR(50) 非空默认值''，`county`VARCHAR(50) NOT NULL DEFAULT '', `telephone`INT NOT NULL DEFAULT '', `email`VARCHAR(255) NOT NULL DEFAULT '', `date_registered`DATETIME NOT NULL, `primary`DEFAULT NULL ) ENGINE = InnoDB DEFAULT CHARACTER SET utf8 COMMENT '用于存储所有客户详细信息的表。 '; db_create_table() 中的数组 ()（/Users/richardskinner/Sites/www.goldrushmoney.com-local/httpdocs/includes/database/database.inc 的第 2688 行）。

几个小时以来一直试图找到解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:01:22.073

这是您的主键的问题。您已将其列在字段数组中（不应如此），并且应将其引用为“主键”而不是“主键”，如下所示：

```
function request_gold_pack_schema(){
    $schema['request_gold_pack_customer_details'] = array(
        'description' => 'Table to store all customer details.',
        'fields' => array(     
              // Your field definitions
         ),
         'primary key' => array(
             'rid'
         )
    );
    return $schema;
} 
```

查看 drupal.org 上的[模式 api 文档](http://api.drupal.org/api/drupal/includes!database!schema.inc/group/schemaapi/7)。

我还建议将`rid`字段设置为 type`serial`并保留自动增量参数（Drupal 将处理该参数）。所以“摆脱”字段定义将是这样的：

```
'rid' => array(
    'type' => 'serial',  
    'unsigned' => TRUE, 
    'not null' => TRUE, 
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-14T05:43:34.723

您必须在 drupal 7 中为类型“int”指定大小...即

```
'rid' => array(
'type' => 'int',  
'not null' => TRUE, 
'size' => 'normal',
'auto increment' => TRUE,
), 
```

大小可以是正常的、微小的、大的检查 drupal 7 数据类型。

# blackberry - 如何使用 SimpleSortingVector 对黑莓中的向量进行排序？

> ID：13637023
> 
> 赞同：2
> 
> 时间：2012-11-30T00:03:24.657
> 
> 标签：blackberry, java-me

我无法使用 SimpleSortingVector 为我的黑莓应用程序排序 Vector。我的东西没有排序它保持不变。

这是我到目前为止...

MyComparator 类

```
 private Vector vector = new Vector(); //Assume that this vector is populated with elements already 
    SimpleSortingVector ssv = new SimpleSortingVector();
    ssv.setSortComparator(new Comparator() {

        public int compare(Object o1, Object o2) {

            Record o1C = (Record)o1;
            Record o2C = (Record)o2;
            return o1C.getName().compareTo(o2C.getName());
        }

        public boolean equals(Object obj) {
            return compare(this, obj) == 0;
          }
    });

for(int i=0;i<vector.size();i++){
                    Record record = new Record();
        record=(Record) vector.elementAt(i);
   //when you add elements to this vector, it is to post to be automatically sorted 
        ssv.addElement(record);
    } 
```

课堂记录

```
public class Record {
    String name;
    int price;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public int getPrice() {
        return price;
    }
    public void setPrice(int price) {
        this.price = price;
    } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T07:55:15.230

[SimpleSortingVector](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/util/SimpleSortingVector.html)默认不排序。鉴于班级的名称，这对我来说也是第一次遇到它时是出乎意料的。

你可以做两件事之一。调用`SimpleSortingVector.setSort(true)`以确保在每次更改后始终对向量进行排序。令人惊讶的是，默认情况下没有打开。或者，您可以`SimpleSortingVector.reSort()`在将所有元素添加到向量后调用，以批量操作进行排序。

# php - PHP中的正则表达式规则来检查任何子域

> ID：13637024
> 
> 赞同：1
> 
> 时间：2012-11-30T00:03:28.493
> 
> 标签：php, regex, cross-domain

我正在尝试使用正则表达式检查或验证子域/域，检查这是我想要的：

```
if($_SERVER['HTTP_ORIGIN'] == "^(.*\.?domain\.com)$"){
   header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']);
} 
```

因此，如果子域是：es.domain.com、en.domain.com、etc.domain.com、domain.ws、test.com，那么我可以打印标题策略。

更多说明：我有几个子域（大约 40 个）和另外两个域（总共，3 个域），我需要知道 $_SERVER['HTTP_ORIGIN'] 是否等于这个域或子域之一，如果相等，那么我打印标题策略。

我想使用正则表达式来执行此操作，因为如果我将子域/域放在列表中，这将太长。有什么帮助吗？

简历：我有三个域：domain.com、domain.ws 和 test.com（每个域都有哪些子域），我想通过此验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:05:46.217

嗯，PHP 具有`preg_*`与正则表达式一起使用的功能。在你的情况下：

```
if(preg_match('/^(?:.+\.)?domain\.com$/', $_SERVER['HTTP_ORIGIN'])) 
```

如果您想更具体地了解允许的域和子域（允许任意组合 - 我假设二级域是别名）：

```
if(preg_match('/^(?:(?:es|en|etc)\.)?(?:domain\.com|domain\.ws|test\.com)$/', $_SERVER['HTTP_ORIGIN'])) 
```

将允许您提到的任何主机名。

或者，您可以允许*任何子*域和域，[捕获它们](http://www.regular-expressions.info/brackets.html)，然后检查它们。假设您有一组允许的子域和一组允许的二级域。

```
preg_match('/^(?:(.+)\.)?([^.]+\.[^.]+)$/', $_SERVER['HTTP_ORIGIN'], $matches);
$subdomain = $matches[1];
$domain = $matches[2];
if((!$subdomain || in_array($subdomain, $subdomainArray)) &&
   in_array($domain, $domainArray))
{
    ...
} 
```

[`preg_match`文档。](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:54:54.043

尝试这个

```
preg_match("/".addcslashes($_SERVER["DOCUMENT_ROOT"],"/")."\/(\w+)\//",$_SERVER["SCRIPT_FILENAME"],$d);

$sub = $d[1]; 
```

# ruby-on-rails - FactoryGirl：构建一个类或文件中的所有工厂？

> ID：13637025
> 
> 赞同：3
> 
> 时间：2012-11-30T00:03:30.333
> 
> 标签：ruby-on-rails, factory-bot

如果我有一个充满工厂的文件，看起来像这样：

```
FactoryGirl.define do
  factory :city do
    name "My City"
    state "MI"
    latitude 50
    longitude -80
    association :country
  end
  factory :waukegan_city, class: City do
    name "Waukegan"
    state "IL"
    latitude "42.36"
    longitude "-87.81"
    association :country
  end
  factory :amherst_oh, class: City do
    name "Amherst"
    state "OH"
    latitude 41.36170
    longitude -82.25380
    association :country
  end
end 
```

我可以：

```
FactoryGirl.create(:city)
FactoryGirl.create(:waukegan_city)
FactoryGirl.create(:amherst_oh) 
```

但是有没有办法一次创建所有这些（即不指定单个工厂但不在每个文件中创建所有工厂）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T17:03:21.463

要一次为特定类创建所有工厂，您可以使用该`build_class`方法来识别这些特定工​​厂。

每当我不熟悉 Ruby 对象的功能时，我都会查找它的方法并尝试那些听起来可以满足我需求的方法。在这种情况下，我是这样想的：

1.  我在我的规范之一中添加了以下行：

    ```
    puts FactoryGirl.factories.first.methods 
    ```

2.  我只运行了一个规范并观察了控制台中的输出。显示的前几个方法是：

    ```
    name
    definition
    add_callback
    declare_attribute
    to_create
    define_trait
    constructor
    defined_traits
    inherit_traits
    append_traits
    build_class
    run
    human_names
    associations
    names 
    ```

3.  `build_class`似乎它会给我工厂所属的类，所以我试了一下，将我在步骤 1 中添加的行替换为：

    ```
    puts FactoryGirl.factories.map(&:build_class) 
    ```

    这确实给了我所有工厂的类名。

4.  下一步是只找到属于特定类的工厂，并遍历它们以创建每个工厂：

    ```
    city_factories = FactoryGirl.factories.select { |f| f.build_class == City }    
    city_factories.each { |f| FactoryGirl.create(f.name.to_sym) } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T16:09:01.710

尝试这个：

```
FactoryGirl.factories.each do |factory|
  FactoryGirl.create(factory.name)
end 
```

# python - 在python中添加背景图像

> ID：13637028
> 
> 赞同：7
> 
> 时间：2012-11-30T00:03:42.270
> 
> 标签：python, tkinter, canvas, background, python-imaging-library

我正在尝试将背景图像添加到 Python 中的画布。到目前为止，代码如下所示：

```
from Tkinter import *
from PIL import ImageTk,Image

... other stuffs

root=Tk()
canvasWidth=600
canvasHeight=400
self.canvas=Canvas(root,width=canvasWidth,height=canvasHeight)
backgroundImage=root.PhotoImage("D:\Documents\Background.png")
backgroundLabel=root.Label(parent,image=backgroundImage)
backgroundLabel.place(x=0,y=0,relWidth=1,relHeight=1)
self.canvas.pack()
root.mainloop() 
```

它返回一个 AttributeError: PhotoImage

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T01:11:23.903

[`PhotoImage`](http://effbot.org/tkinterbook/photoimage.htm)不是`Tk()`实例 ( `root`) 的属性。它是一个类`Tkinter`。

所以，你必须使用：

```
backgroundImage = PhotoImage("D:\Documents\Background.gif") 
```

当心也是`Label`一个类`Tkinter`...

编辑：

不幸的是，`Tkinter.PhotoImage`仅适用于 gif 文件（和 PPM）。`PhotoImage`如果您需要读取 png 文件，您可以使用`ImageTk`来自`PIL`.

这样，这会将您的 png 图像放在画布中：

```
from Tkinter import *
from PIL import ImageTk

canvas = Canvas(width = 200, height = 200, bg = 'blue')
canvas.pack(expand = YES, fill = BOTH)

image = ImageTk.PhotoImage(file = "C:/Python27/programas/zimages/gato.png")
canvas.create_image(10, 10, image = image, anchor = NW)

mainloop() 
```

![在此处输入图像描述](../Images/4f32719990ee9932a0be9389c5f50c6c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T04:21:27.333

只需更改为：

```
 image = Image.open("~~~path.png")
    backgroundImage=ImageTk.PhotoImage(image) 
```

相信我，这会 100% 奏效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-06T21:17:39.410

你用`root`to Attribute`PhotoImage`这是不可能的！ `root`是您的窗口`Tk()`类，因此您不能为其归因，`PhotoImage`因为它没有它，因此您可以看到`AttributeError` `tkinter.Tk()`并且`tkinter.PhotoImage`是不同的类。和一样`tkinter.Label`。

您的代码将无法使用`root.PhotoImage`and `root.Label`。尝试`PhotoImage`并`Label`直接。

创建一个`Label`：

```
backgroundlabel = Label(parent, image=img) 
```

如果使用任何类型的`png`or`jpg`并且`jpeg`你不能用它来绘制它，`PhotoImage`你将需要[PIL](https://pillow.readthedocs.io/en/stable/)库

```
pip3 install PIL 
```

当你拥有它时，像这样使用它：

```
from PIL import Image, ImageTk # import image so you can append the path and imagetk so you can convert it as PhotoImage 
```

现在获取您的完整路径图像，例如：

```
C:/.../img.png 
```

现在使用它：

```
path = "C:/.../img.png"         # Get the image full path
load = Image.open(path)         # load that path
img  = ImageTk.PhotoImage(load) # convert the load to PhotoImage 
```

现在你的代码工作了。

完整代码：

```
from Tkinter import *
from PIL import ImageTk,Image

... other stuffs

root            = Tk()
canvasWidth     = 600
canvasHeight    = 400
self.canvas     = Canvas(root,width=canvasWidth,height=canvasHeight)
path            = "D:\Documents\Background.png"  # Get the image full path
load            = Image.open(path)               # load that path
img             = ImageTk.PhotoImage(load)
backgroundLabel = Label(parent,image=img)
backgroundLabel .place(x=0,y=0,relWidth=1,relHeight=1)
self.canvas     .pack()
root            .mainloop() 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-11T13:14:48.210

```
from Tkinter import *
from PIL import ImageTk

canvas = Canvas(width = 200, height = 200, bg = 'blue')
canvas.pack(expand = YES, fill = BOTH)

image = ImageTk.PhotoImage(file = "C:/Python27/programas/zimages/gato.png")
canvas.create_image(10, 10, image = image, anchor = NW)

mainloop() 
```

# java - 如何使用 Java 驱动程序减去两个值并比较 mongodb 中的结果？

> ID：13637030
> 
> 赞同：0
> 
> 时间：2012-11-30T00:03:46.407
> 
> 标签：java, mongodb, subtraction

抱歉可能出现重复的问题...我需要从已计算过期时间的集合中删除文档`System.currentTimeMillis() - doc.lastAccess > doc.ttl`。我如何使用`BasicDBObject`查询（或其他最有效/最简单的替代方法）来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:46:52.647

好。我得到了解决方案...但是我在某个地方读到 $where 太慢了...有人可以为我提供更好的方法吗？

```
 BasicDBObject q = new BasicDBObject("$where", 
       "new Date().getTime() - this.lastAccess > this.ttl");

  this.collection.remove(q); 
```

# objective-c - 使用 Objective-C 登录/发布到 WordPress？

> ID：13637031
> 
> 赞同：1
> 
> 时间：2012-11-30T00:03:48.763
> 
> 标签：objective-c, wordpress, cocoa

我检查了他们的 API，但我什么也没认出，也没有看到 Objective-C。有人可以引导我走正确的道路吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:02:25.023

如果你也想看看他们是如何做到的，你也可以查看他们的 iOS 应用程序的源代码。

[http://ios.wordpress.org/development/](http://ios.wordpress.org/development/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:09:50.643

据我所知，WordPress 没有任何特定的 Objective-C 库。它实现了一些 XML-RPC 接口，因此您只需要获取一个 Objective-C XML-RPC 库并通过它与之对话。

# asp.net-mvc - 将 jquery 变量传递给 @Url.Action MVC3

> ID：13637032
> 
> 赞同：3
> 
> 时间：2012-11-30T00:03:56.947
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui

如何使用 Url.Action 将客户端变量传递给控制器​​。

我正在尝试这样做，但它不起作用

```
location.href = '@Url.Action("printtopdf","batch",new {allocationId=unSelected}))'; 
```

在上面的行中，'unSelected' 是一个客户端变量和逗号分隔的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T00:19:01.423

我认为这对你有用。我发现它更干净一些，是一种替代选择。

```
window.location = "/batch/printtopdf?allocationId=" + unSelected; 
```

它代表

```
window.location = "/yourControllerName/yourActionMethodName?QueryStringId=" + yourVariable; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T00:08:20.147

`@Url.Action`在服务器上创建链接，但`unSelected`只存在于客户端。您需要做的是将未选择的查询字符串附加到生成的链接。

```
location.href = '@Url.Action("printtopdf","batch",new {}))' + '?allocationId=' + unSelected; 
```

**编辑：**

我创建链接的方式假定链接不会有任何其他 queryString 参数，否则，您需要转换“？” 至 '＆'

# java - ClassDoc - 帮助查找示例

> ID：13637034
> 
> 赞同：2
> 
> 时间：2012-11-30T00:04:04.503
> 
> 标签：java, javadoc

我正在阅读[ClassDoc](http://docs.oracle.com/javase/6/docs/jdk/api/javadoc/doclet/com/sun/javadoc/ClassDoc.html)文档。但是由于某种原因，我找不到任何代码片段或教程来了解它如何与类一起使用或如何为 ClassDoc 包装类...：S

请分享一些代码片段或教程链接。我非常希望得到您的帮助。

任何有用的评论表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:51:34.053

ClassDoc 的简单使用可以是这样的：

```
public static void start(RootDoc root) {
       ClassDoc[] classes = root.classes();
        for (ClassDoc cd : classes) {
            System.out.println("Class [" + cd + "] has the following methods");
            for(MemberDoc md : cd.methods()) {
               System.out.println("  " + md);
            }
        }
    } 
```

希望能帮助到你！

# c# - asp.net 4 中的潜在危险请求

> ID：13637035
> 
> 赞同：3
> 
> 时间：2012-11-30T00:04:06.873
> 
> 标签：c#, .net

我在 ASP NET 4 中收到以下错误：

```
A potentially dangerous Request.Path value was detected from the client (<). 
```

我已经读到我需要在我的 Web.config 中使用 requestValidationMode="2.0" ：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

所以我的方法看起来像：

```
[ValidateInput(false)]
public ActionResult Search(string query, string type){

//method body

return result;
} 
```

它工作得很好。但是，我无法修改我的 Web.config 文件，因为许多其他应用程序都依赖此文件，它可能会导致安全漏洞或其他地方的错误。

我的应用程序足够安全，可以接受特殊字符，但对于正在开发的系统的其余部分，我不能这么说。在我的方法中是否可以接受特殊字符作为输入？

例子：

```
www.mydomain.com/search/query/<myquery<ffoo/type/dept 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:15:26.737

我在当前项目中遇到了同样的问题..我将发布我必须添加的内容以更正此问题.. 还要记住，.NET 4.0 中存在一个错误，该错误用于在 .Net 2.0 中工作项目是 3.5 但是我认为 IIS AppPool 他们有我们的项目来运行 4.0

我在我的网络配置文件中添加了这个，它纠正了我遇到的奇怪错误

```
<httpRuntime requestValidationMode="2.0"
   requestPathInvalidCharacters="*,:,&amp;,\"
   relaxedUrlToFileSystemMapping="true"
/> 
```

对于 MVC，您可以尝试以下操作

```
using System.Web.Helpers;

[HttpPost]
[ValidateInput(false)]
public ViewResult Edit(ContentTemplateView contentTemplateView)
{
    FormCollection collection = new FormCollection(Request.Unvalidated().Form); 
```

# mysql - 查找表中只有一个值的值

> ID：13637036
> 
> 赞同：0
> 
> 时间：2012-11-30T00:04:07.510
> 
> 标签：mysql

我正在尝试创建一个查询，该查询将搜索数据库中只有一种类型的值的字段。例如，每个人 ( `regNum`) 在任何时候最多可以有四种状态（' `A`'、' `B`'、' `C`' 或 ' `D`'），我想找到那些只有 ' `C`' 的状态。

```
SELECT DISTINCT tbl_studentModules.regNum FROM tbl_studentModules
        LEFT JOIN tbl_student
        ON tbl_student.regNum = tbl_studentModules.regNum
        WHERE status ? 'C' AND level = $level" 
```

问号表示我想要一个类似于“仅”的语句的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:07:27.773

```
SELECT sm.regNum
FROM tbl_studentModules sm
LEFT JOIN tbl_student s ON s.regNum = sm.regNum
AND level = $level
group by sm.regnum
HAVING sum(status <> 'C') = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:36:28.693

我建议使用临时表执行此操作。抓取所有没有 C 的东西，例如：

```
DROP TABLE IF EXISTS t1;
CREATE TEMP TABLE t1 AS
SELECT DISTINCT tbl_studentModules.regNum 
    FROM tbl_studentModules
    LEFT JOIN tbl_student
    ON tbl_student.regNum = tbl_studentModules.regNum
    WHERE status NOT IN ('A','B','D') AND level = $level";

SELECT * FROM t1 WHERE status = 'C'; 
```

# maven - Maven：在组装期间执行自定义代码

> ID：13637037
> 
> 赞同：1
> 
> 时间：2012-11-30T00:04:13.050
> 
> 标签：maven, custom-action, maven-assembly-plugin

我们正在使用程序集插件来构建一个 zip 包。

我想在执行 Maven 程序集插件期间执行一些自定义 java 代码。java 应用程序应该可以访问程序集的结构，但**在**构建 zip 文件之前。因此，应该进入 zip 的文件可能会被修改/添加/删除。

我将如何配置它？

干杯

乔纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:34:21.130

我认为执行 Java 代码是不可能的。尝试使用用于文件删除的排除模式和用于文件修改的 Maven 过滤器。

[http://maven.apache.org/plugins/maven-assembly-plugin/advanced-descriptor-topics.html](http://maven.apache.org/plugins/maven-assembly-plugin/advanced-descriptor-topics.html)

# android - android对话框样式属性

> ID：13637041
> 
> 赞同：-1
> 
> 时间：2012-11-30T00:04:32.370
> 
> 标签：android, colors, dialog

我想改变下图中蓝色部分的颜色：![对话](../Images/b313cb74f1e08fe4dbba0c53cac7fbb9.png)

我知道如何使用自定义样式，我只需要知道这些蓝色部分的属性（我的意思是类似的`<item name="android:background">#FF0000</item>`）thx

我真正想要达到的目标在这里展示： ![对话2](../Images/e0619a34a118f36c8f7d67b173e19e03.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:40:13.517

您可以从 Android 代码继承使用的主题并在其中更改细节。

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

```
<style name="GreenText" parent="@android:style/TextAppearance">
    <item name="android:textColor">#00FF00</item>
</style> 
```

parent 保存默认主题的值。在您的情况下，它将是 Holo 的 Dialog 主题。

# requirejs - RequireJS 在加载所需模块之前不运行数据主脚本

> ID：13637042
> 
> 赞同：2
> 
> 时间：2012-11-30T00:04:37.720
> 
> 标签：requirejs

我的项目包括以下文件：

```
./index.html
./js/main.js
./js/vendor/require.js
./js/viewmodel/vm.js 
```

具有以下`index.html`相关片段：

```
<script data-main="js/main.js" src="js/vendor/require.js"></script>
<script type="text/javascript">
    require(['viewmodel/vm', 'ko'], 
        function(viewmodel, ko) {
            ko.applyBindings(viewmodel);
        }
    );
</script> 
```

该`js/main.js`文件如下：

```
var root = this;
define('jquery', ['http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.js'], function () { return root.$; });
define('ko', ['http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.1.0.js'], function (ko) { return ko; }); 
```

该`js/viewmodel/vm.js`文件...

```
define(['jquery', 'ko'], 
    function($, ko) {
        return {
            subject: 'world',
            greeting: 'hello'
        }
    }
); 
```

当您打开浏览器访问 index.html 时，浏览器会尝试加载一个名为`js/ko.js`而不是使用 .html 中定义的模块的文件`main.js`。似乎 data-main 属性指向的 js 文件不能保证在依赖解析之前运行。这对我来说似乎不正确，因为 data-main js 文件的一个目的是定义要求配置（即路径、垫片等）。我正在使用需要 v2.1.2。

如果我将`main.js`文件的内容复制到`index.html`. “完全没问题”是指它将 ko 解析为一个模块并找到适当的 CDN 链接来解析 ko 而不是尝试下载`./js/ko.js`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T18:35:49.373

要使用该`data-main`属性来配置整个应用程序，它必须是所有代码**的单一**入口点。

您的第二个脚本块通过提供第二个入口点打破了这一要求。由于这些入口点将彼此独立（并且异步）解决，因此您不能依赖一个来影响另一个。

要解决它，请以一种为您的应用程序提供单个入口点的方式重构您的代码，并通过该入口点进行配置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T08:05:35.587

那是因为 requirejs 设置了[async](http://caniuse.com/#search=async)。脚本上的属性。

> 脚本元素上的布尔异步属性允许外部 JavaScript 文件在可用时运行，而不会首先延迟页面加载。

这意味着两个脚本都是并行加载和评估的，因此两个脚本都不能访问另一个脚本的方法或函数。如果要在一个脚本中定义 requirejs 变量，则不能使用 require js 加载该脚本。

对我来说，解决这个问题的方法有三种：

*   将 main.js 的内容添加到您的页面（如您所述）
*   加载没有 requirejs 的 main.js 文件作为普通脚本
*   在加载脚本之前定义 require 配置（[链接到 requirejs 文档](http://www.requirejs.org/docs/api.html#jsfiles)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T12:19:11.990

我有同样的问题。我正在工作的站点的架构是在页面的每个部分异步加载的组件。每个组件都有自己的 html、css 和 js 代码。所以，我的解决方案是为所有必需的依赖代码保留一个保护函数，以防止它们在主 javascript 文件之前运行：

**索引.html**

```
<head>
<script type="text/javascript">
    window.BeforeMainGuard = {
        beforeMainLoadedFunctions: [],
        hasMainLoaded: false,
        guard: function( func ) {
            console.assert( typeof func === 'function' );
            if( this.hasMainLoaded ) {
                func();
            }else {
                this.beforeMainLoadedFunctions.push( func );
            }
        },
        onMainLoaded: function() {
            for( var i = 0; i<this.beforeMainLoadedFunctions.length; ++i ) {
                var beforeMainLoadedFunction = this.beforeMainLoadedFunctions[i];
                  beforeMainLoadedFunction();
            }
            this.beforeMainLoadedFunctions = null;
            this.hasMainLoaded = true;
        }
    };
</script>
<script data-main="js/main.js" src="js/vendor/require.js"></script>
<script type="text/javascript">
    window.BeforeMainGuard.guard( function() {
        require(['viewmodel/vm', 'ko'], 
            function(viewmodel, ko) {
                ko.applyBindings(viewmodel);
            }
        );
    });
</script>
</head> 
```

**js/main.js**

```
require.config({
  // your config
});

require( [ 'AppLogic' ], function( AppLogic ){      
    AppLogic.Init();
    window.BeforeMainGuard.onMainLoaded();
} ); 
```

# wpfdatagrid - wpf修改单列为comboboxcolumn

> ID：13637043
> 
> 赞同：1
> 
> 时间：2012-11-30T00:04:40.897
> 
> 标签：wpfdatagrid

我对我的原始帖子进行了重大修改。

有没有办法修改一列，使其成为 ComboBoxColumn 而不必更改其他列将自动生成的事实？或者有没有办法简单地添加另一列是 ComboBoxColumn？

我没有提供代码，因为我只是在寻找一种通用的方法。如果没有，我会在之后寻找替代品。

我是这个 WPF 东西的新手，所以任何帮助都将不胜感激。如果您需要代码，请告诉我（它有效，但有点乱）。

# git - 是 git 显示 应该给我一个完整的补丁？我怎么能把它关掉？

> ID：13637046
> 
> 赞同：2
> 
> 时间：2012-11-30T00:05:16.000
> 
> 标签：git

我一直在用 git 中的注释标签做一些工作，试图改进我们的发布管理。我发现的一件事是，无论何时我运行`git show <tag>`它，不仅会给我标签、注释和提交消息，而且还会给我该提交的补丁信息。通常我只想查看标签和提交信息，而不是补丁。

这是我看到的一个例子：

```
$ git show 9.2
tag 9.2
Tagger: Me <me@email.com>

My tag message

commit d65f1a8d98af24e5989ebd685069fbac63681080
Author: Me <me@email.com>

    Some commit message

diff --git a/path/to/file.php b/path/to/file.php
index 5030b1b..a5a428e 100644
--- a/path/to/file.php
+++ b/path/to/file.php
@@ -274,9 +274,12 @@ abstract class ClassName extends BaseClass
             $obj->setSomething(NULL);

             $obj->save();
-
-            $myDao = new DetailsDao();
-                       # Create a new Detail record
+
+                       $myDao = \DetailsDao::getById($id);
+
+                       if (!isset($myDao )) {
+                               $myDao = new myDao ();
+                       }

             $myDao ->setExternalKey($extId);
             $myDao ->setSource($memberEmail); 
```

我不知道为什么我会看到从`diff`线路开始的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:08:59.383

是的，这是预期的输出。

看起来您正在寻找`--summary`将生成扩展标题信息的简明摘要的选项：

```
git show --summary 9.2 
```

您可能还喜欢`--shortstat`，它会在最后为您提供这样的输出，而不是完整的差异：

```
3 files changed, 27 insertions(+), 2 deletions(-) 
```

# dygraphs - 如何使用 dygraphs 库绘制聚合数据图表

> ID：13637048
> 
> 赞同：1
> 
> 时间：2012-11-30T00:05:23.293
> 
> 标签：dygraphs

我正在使用 dygraphs 库 (http://dygraphs.com)，我想知道是否有办法让我指定如何绘制 y 轴。

我的数据如下所示（我从 CSV 文件加载它）：

日期，统计 20121029,13 20121030,14 20121031,1 20121101,0 20121102,7 20121103,0 20121104,7

这就是我的 JS 的样子：

```
<script type="text/javascript">
g3 = new Dygraph(
document.getElementById("divGraph2"),
"<?php echo $csvstats;?>",
{ interactionModel: {}, labels: [ " ", " "], strokeWidth: 3, showLabelsOnHighlight:false,axes: {x:{axisLabelFormatter: function(x){return "";}, valueFormatter: function(s) {return "";}}, y:{axisLabelFormatter: function(y){return "";}, valueFormatter: function(y) {return "";}}} });
</script> 
```

目前，图表显示为 y 轴，将数据显示为每日数据。

我想在 y 轴上显示数据，如下所示：

20121029 - 13 20121030 - 27 20121031 - 28 20121101 - 28 20121102 - 35 20121103 - 35 20121104 - 42

我可以使用 dygraphs 中的任何选项来执行此操作吗？我无法更改输入 CSV 文件的格式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:28:11.607

Dygraphs 的数据格式在[http://dygraphs.com/data.html](http://dygraphs.com/data.html)中列出。日期需要转换为 YYYY/MM/DD。有一种方法可以做到这一点，这可能看起来比它更令人生畏，但会帮助你。有关更多信息，请参阅[http://blog.dygraphs.com/2012/04/how-to-download-and-parse-data-for.html](http://blog.dygraphs.com/2012/04/how-to-download-and-parse-data-for.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T12:26:09.573

我不确定您的用例是什么，但如果是我，我会在将数据传递给 DyGraphs 之前以我需要的形式重新生成数据。

例如，让 PHP 聚合这些值，然后将其传递给 DyGraphs。

但是，我为您模拟了这个：

这假设您只有一个数据系列，并且没有 null/NaN 值

```
g3 = new Dygraph(
    document.getElementById("divGraph2"),
    "2012-10-29,13 \n"+
    "2012-10-30,14 \n"+
    "2012-10-31,1 \n"+
    "2012-11-01,0 \n"+
    "2012-11-02,7 \n"+
    "2012-11-03,0 \n"+
    "2012-11-04,7 \n",
    { 
        interactionModel: {}, 
        labels: [ " ", " "], 
        strokeWidth: 3, 
        showLabelsOnHighlight:false,
        axes: {
            x:{
                axisLabelFormatter: function(x){return "";}, 
                valueFormatter: function(s) {return "";}
            }, 
            y:{
                axisLabelFormatter: function(y){return "";}, 
                valueFormatter: function(y) {return "";}
            }
        }
    }
);

data = g3.rawData_; //Object of arrays in the format of [timestamp, y-axis value]
var length = data.length;
var current;
var aggregate = 0;
for(var i = 0; i < length; i++) {
    current = data[i]; //Get current array 
    aggregate = aggregate + current[1]; //Aggregate y-axis value
    current[1] = aggregate; //Store updated value (this works because the variable "current" is a reference to the "data" object)
}

g3.updateOptions(data); //Reload data 
```

编辑：为清楚起见修改了注释，为解释添加了上下文

# zend-framework2 - ZF2：使用 url helper 并重用查询参数

> ID：13637051
> 
> 赞同：1
> 
> 时间：2012-11-30T00:05:48.887
> 
> 标签：zend-framework2, query-parameters

我正在尝试在视图中使用 Url 帮助器重用查询参数。这是我目前的网址：

```
http://localhost/events/index?__orderby=name&__order=asc 
```

我在视图中使用此代码：

```
$this->url('events/index', array('__page' => '2'), true); 
```

我想获得这个网址：

```
http://localhost/events/index?__orderby=name&__order=asc&__page=2 
```

但相反，我得到了这个：

```
http://localhost/events/index?controller=Application\Controller\Events&__page=2 
```

这是我在 module.config.php 文件中的路线：

```
'events' => array(
    'type' => 'segment',
    'options' => array(
        'route' => '/eventos[/:action]',
        'constraints' => array(
            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
        ),
        'defaults' => array(
            'controller' => 'Application\Controller\Events',
            'action' => 'index',
        ),
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'index' => array(
            'type' => 'Query',
        ),
    ),
), 
```

我究竟做错了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:54:14.123

我认为您正在寻找的是一种 Query 路由类型，用于为您捕获 Query 字符串作为子路由：

```
'route' => array(
    'type'    => 'literal',
    'options' => array(
        'route'    => 'page',
        'defaults' => array(
        ),
    ),
    'may_terminate' => true,
    'child_routes'  => array(
        'query' => array(
            'type' => 'Query',
            'options' => array(
                'defaults' => array(
                    'foo' => 'bar'
                )
            )
        ),
    ), 
```

然后，您可以使用视图助手为您生成和附加查询字符串。如果您不使用 Query 子路由，那么助手将忽略您的查询字符串。

```
$this->url(
    'page/query',
    array(
        'name'=>'my-test-page',
        'format' => 'rss',
        'limit' => 10,
    )
); 
```

然后，您可以将第三个参数设置为 TRUE 并允许助手使用当前参数，就像您在示例中尝试做的那样。

文档中有示例：

[http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T13:07:26.123

你可以使用这样的东西，但在我的例子中查询参数没有被重用。

```
$this->url(
    'page/query',
    array(),
    array(
        'query' => array(
            'name'=>'my-test-page',
            'format' => 'rss',
            'limit' => 10,
        )
    ),
    true
); 
```

因此，如果您想重用查询参数，您可以将它们与新参数合并，然后将它们全部添加到查询数组（3 个参数）。

# python - Upstart 和 Supervisord 有什么区别？

> ID：13637052
> 
> 赞同：24
> 
> 时间：2012-11-30T00:05:52.160
> 
> 标签：python, debian, upstart, supervisord

[Upstart](http://upstart.ubuntu.com/)和[Supervisord](http://supervisord.org/)可以互换吗？他们一起工作吗？我希望在我的系统（debian）启动时以 root 身份运行 python 程序。启动后，如果程序崩溃，我希望进程管理器继续运行程序。哪个更适合这样做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-30T01:16:43.563

Upstart 是作为传统 init 守护程序的替代品而开发的。Supervisord 是一个进程管理器（具有很多特性），但它本身仍然需要由一个 init 守护进程运行。

我个人发现 Upstart 对于我的大多数用例来说已经足够了，从你的问题来看，我认为它对你也很好。

您应该对四个新贵节特别感兴趣：start on、stop on、respawn 和 exec。[您可以在http://upstart.ubuntu.com/cookbook/](http://upstart.ubuntu.com/cookbook/)阅读更多关于它们的信息。

如果您仍然喜欢使用 Supervisord 路线，这似乎是一个让您入门的好线索 - [https://serverfault.com/questions/96499/how-to-automatically-start-supervisord-on-linux-ubuntu](https://serverfault.com/questions/96499/how-to-automatically-start-supervisord-on-linux-ubuntu)

# asp.net-web-api - WebAPI 路由协助

> ID：13637055
> 
> 赞同：3
> 
> 时间：2012-11-30T00:06:50.460
> 
> 标签：asp.net-web-api, asp.net-mvc-routing

学习了很多关于 MapRouting 的知识，并且花了太多时间试图完成我需要做的事情，所以我希望有人能提供帮助。:)

我正在寻找执行以下操作：

/api/Entities/1 <- 查看 id 为 1 的详细信息实体**（这是一个字符串，不是 int）**

/api/Entities/1/Action <- 对 id 为 1 的实体调用特定操作。

/api/Entities <- 查看实体集。

/api/Entities/Action <- 调用实体集的特定操作。

我遇到的问题是最后一个。目前正被第一种情况拦截，因为 id 是一个字符串。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:21:05.037

一个很好的参考是[here](http://ofps.oreilly.com/titles/9781449320317/ch_Routing.html)

如果不使用[基于属性的路由](http://attributerouting.net/)，答案会有些冗长，因为如果您匹配同一个动词，则 RPC 样式（Action）和 Rest 方法不能很好地共存。正如您所注意到的，GET() 和 DOSOMETHING() 被视为同一控制器上的重复方法签名。要解决这个问题，您可以尝试使用两个控制器：

所以我建议使用[基于属性的](http://attributerouting.net/)路由；但是，可以使用常规方法：

**使用标准路由...**

**像这样设置你的路线**

```
 config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
        config.Routes.MapHttpRoute(
            name: "ActionDefaultApi",
            routeTemplate: "api/entities/{action}/{actionId}",
            defaults: new
                          {
                              //Add more as needed
                              action = "(|dosomething|dosomethingelse)",
                              actionId = RouteParameter.Optional,
                              controller = "EntitiesRpc"
                          }); 
```

**控制器 1：**

```
public class EntitiesController : ApiController
{
    public string Get()
    {
        return "http://server/api/Entities";
    }

    public string Get(string id)
    {
        return string.Format("http://server/api/Entities/{0}", id);
    }
} 
```

**控制器 2：**

```
public class EntitiesRpcController : ApiController
{
    [HttpGet]
    public string DoSomething()
    {
        return "http://server/api/Entities/doSomething";
    }

    [HttpGet]
    public string DoSomething(string actionId)
    {
        return string.Format("http://server/api/Entities/doSomething/{0}", actionId);
    }

    [HttpGet]
    public string DoSomethingElse()
    {
        return "http://server/api/Entities/doSomethingelse";
    }

    [HttpGet]
    public string DoSomethingElse(string actionId)
    {
        return string.Format("http://server/api/Entities/doSomethingelse/{0}", actionId);
    }
} 
```

现在假设您使用了基于属性的路由，您可以返回到一个控制器并使用如下内容：

```
public class EntitiesController : ApiController
{
    [Get("Entities")]
    public string Get()
    {
        return "http://server/api/Entities";
    }

    [Get("Entities/{id}")]
    public string Get(string id)
    {
        return string.Format("http://server/api/Entities/{0}", id);
    }

    [Get("Entities/doSomething")]
    public string DoSomething()
    {
        return "http://server/api/Entities/doSomething";
    }

    [Get("Entities/doSomething/{actionId}")]
    public string DoSomething(string actionId)
    {
        return string.Format("http://server/api/Entities/doSomething/{0}", actionId);
    }

    [Get("Entities/doSomethingelse")]
    public string DoSomethingElse()
    {
        return "http://server/api/Entities/doSomethingelse";
    }

    [Get("Entities/doSomethingelse/{actionId}")]
    public string DoSomethingElse(string actionId)
    {
        return string.Format("http://server/api/Entities/doSomethingelse/{0}", actionId);
    }
} 
```

# php - PHP，使用 fgets 跳过文本文件的第一行和最后一行

> ID：13637069
> 
> 赞同：3
> 
> 时间：2012-11-30T00:08:38.700
> 
> 标签：php

我试图弄清楚如何在使用`fgets()`. 第一行可以用 解决`if(!$firstLine)`，但我不确定如何忽略最后一行，或者我的忽略第一行的解决方案是否是最佳选择。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T00:19:56.647

```
fgets($file); //Ignore the first line
$line = fgets($file);
$next = fgets($file); 
while ($next !== false) { //check the line after the one you will process next.  
                //This way, when $next is false, then you still have one line left you could process, the last line.
    //Do Stuff
    $line = $next;
    $next = fgets($file);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:21:24.177

```
$lines = file('http://www.example.com/');//or local file

unset($lines[0]);
unset($lines[count($lines)-1)]);
$new_file = implode('', $lines); //may want to use line break "\n" for the join 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:37:48.987

您可能想尝试分解文件内容。它会帮助你很多！之后，您将对其进行标记。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-30T00:16:29.913

不幸的是， file() 会将文件打开到“串行”流中（不确定串行是否正确），这意味着您必须在检测到他的结尾之前读取完整的文件

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-30T00:26:03.933

试试这个

```
 $str= file_get_contents("file.txt");
 $arr = preg_split ("\n",$str);
 $n = count($arr); 
```

$n 是行数

```
$str="";
for($i=0;$i<$n;$i++){
   if($i>0 && $i<($n-1)){ $str.=$arr[$i]}
   }
    /**Str without line 1 and final line */ 
```

# php - PHP：权限提升

> ID：13637072
> 
> 赞同：0
> 
> 时间：2012-11-30T00:09:17.807
> 
> 标签：php

我有一个包含两个用户类的站点 - 管理员和访客。预计，管理员可以访问普通访客无法访问的某些功能。目前，分隔管理员/访客的用户标志 (admin/guest) 以 X:Y 格式存储在 cookie 中，其中 X 是用户标志（1 代表管理员，2 代表用户），Y 是唯一的用户 ID数据库中的用户。

可以通过更改 cookie 中的“X”来提升权限。因此，我想知道是否有任何方法可以防止这种情况发生？泰！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T00:15:35.593

不要将权限存储在客户端上。*存储验证*用户所需的信息（一般来说，这意味着会话 id）。在服务器上保留处理授权级别所需的所有数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T00:21:13.430

您应该将用户（管理员/访客）的角色存储在数据库中，并在登录时将其放入会话中。

像这样的东西：

```
$authUser = authenticateUser($email, $password);
//if authentication successful :
$_SESSION['role'] = $authUser['role']; 
```

然后你可以像这样检查右边：

```
function isAdmin() {
  return $_SESSION['role'] == 'admin';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T00:31:50.537

您的方法存在多个安全漏洞：它允许任何人获得管理员访问权限，并且允许入侵者（非管理员、非访客）修改 cookie 值以完全错误地识别自己。基于 Quentin 和 pinouchon 的回答，您应该使用会话来控制用户访问级别......这总是比在客户端存储标志更安全。这样，存储在客户端的唯一值就是会话 ID，然后您可以使用它来获取现有会话值 ( `$_SESSION['privilege_level']`) 或针对用户权限数据库。

我什至有点不愿意发布这个，但是如果由于某种原因你绝对不能使用会话，至少你应该避免发送未加密/散列的 cookie 值。它远不如使用会话安全，但您可以存储类似 X:Y:Z 的内容，其中 x 是加密的用户 ID，Y 是加密的权限标志，Z 是一个巨大的盐渍哈希，包括 X,Y,User Agent , IP 等然后在用户做某事时重新创建哈希值，并确保它与 cookie 中的哈希值匹配（这将使某人更难接管其他人的角色，这将使其*更难*供用户手动更改其角色。

# html - 透明框上的不透明文本

> ID：13637081
> 
> 赞同：2
> 
> 时间：2012-11-30T00:11:09.007
> 
> 标签：html, css, text, transparency

我想在我的透明框中有不透明的文本。这是一个代码示例：

HTML：

```
<div id="Transparent_Box">                                          
    <div class="text">                                          
    <h1>Some opaque text</h1>
    </div>  
</div> 
```

CSS：

```
#Transparent_box {      
    url(../images/header-bg.png);
    background:url(../images/header-bg.png) repeat-x\0/; 
    background-position:center bottom, left top;
    background-repeat:repeat-x;
    overflow:hidden;
    background-color:#FFF;
    opacity: 0.6;
    filter: alpha(opacity=60);  

}

.text {
float:left;
margin-top:30px;
width:490px;
margin-left:20px;
opacity: 1;
filter: alpha(opacity=100);
}

.text h1 {
    font-weight:900;
    color:#FFF;
    line-height:34px;
    margin-top:8px;
    opacity: 1;
    filter: alpha(opacity=100);
} 
```

由于继承，文本总是显示为半透明的。有没有办法在我的透明框上获得漂亮的不透明文本？

* * *

谢谢，正是它......我现在还添加了一个透明的背景.png它看起来像这样：

```
background-image:url(../images/header-shadow.png), url(../images/header-bg.png);
background:url(../images/header-bg.png) repeat-x\0/; 
background-position:center bottom, left top;
background-repeat:repeat-x;
background-color: rgba(0,0,0,0) 
```

这应该在 IE8 及以下版本下工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T00:13:02.987

使用透明背景颜色而不是不透明度。不需要额外的标记。

```
div {
  background: rgba(0,0,0,.5)
} 
```

[演示](http://jsfiddle.net/CswEU/)

# c++ - Borland Builder 5 c++ 字符串不能在 0 处索引

> ID：13637082
> 
> 赞同：5
> 
> 时间：2012-11-30T00:11:08.870
> 
> 标签：c++, string, c++builder, c++builder-5

我试图在 0 处进行简单的字符串访问，由于某种原因，我在 Borland Builder 5 C++ 中遇到了越界错误。

有没有人找到解决这个问题的方法？Borland 编译器是否使用了一种特殊类型的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T22:15:29.323

是的，它是 Borland C++ Builder 使用的特殊字符串类型。这种类型的变量从 1 开始索引。

我知道这可能有点令人困惑——我也不敢相信很长一段时间。

# rest - 应该使用哪些 HTTP 状态代码进行 URI 规范化？

> ID：13637083
> 
> 赞同：0
> 
> 时间：2012-11-30T00:11:09.377
> 
> 标签：rest, http-status-code-301, http-status-codes, http-status-code-307, http-status-code-303

[RESTful Web 服务](http://shop.oreilly.com/product/9780596529260.do)鼓励使用[HTTP 303](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4)将客户端重定向到资源的规范表示。

根据这本书，HTTP 302 被 303（“查看其他”）和 307（“临时重定向”）取代。还有 HTTP 301（“永久重定向”）。客户端可以缓存 HTTP 301 和 307，但不能缓存 303。

鉴于此，**哪些状态代码是适当的规范化？**为什么这本书提倡使用 HTTP 303 而不是说 307？毕竟，后者是可缓存的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:49:57.490

[RESTful Web 服务](http://shop.oreilly.com/product/9780596529260.do)似乎倾向于临时重定向以进行规范化。他们将搜索查询作为重定向到搜索结果的非规范 URI 提供了一个示例。在这种情况下，将规范化视为临时重定向是很有意义的，因为我们预计搜索结果会随着时间而变化。

如果有人正在寻找可缓存的永久重定向，请查看[308 Permanent Redirect](https://datatracker.ietf.org/doc/html/draft-reschke-http-status-308-07)的标准草案。这允许您在临时重定向与永久重定向、可缓存与不可缓存之间进行选择。使用对您的用例有意义的任何东西。

# c++ - 如何在 C++ 中一一读取 cin？元素类型不同

> ID：13637086
> 
> 赞同：0
> 
> 时间：2012-11-30T00:11:28.047
> 
> 标签：c++, cin

用户会输入：string1 string2 123，而在我的main中，我希望得到我的变量string str1, string str2, int num 得到输入数据。所以用户输入后，str1 = string1, str2 = string2, num = 123。我会用cin来读取数据，但是如何一个一个地读取呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:15:20.633

假设字符串中没有空格，您可以简单地提取它们：

```
cin >> str1 >> str2 >> num; 
```

# ruby-on-rails - 如何将 cron 作业结果存储在 RoR 中

> ID：13637088
> 
> 赞同：0
> 
> 时间：2012-11-30T00:12:14.440
> 
> 标签：ruby-on-rails, ruby, database, cron, storage

我需要在 Ruby on Rails 中存储来自 cron 作业的数据，以便我的控制器仍然可以访问它。我不太确定最好的方法是什么。顺便说一句，我是 Ruby on Rails 新手，所以也许我要问的非常简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:29:59.867

看看这个[http://railscasts.com/episodes/164-cron-in-ruby](http://railscasts.com/episodes/164-cron-in-ruby)（有一个修订版，但你必须为专业视频支付大约每月 9 美元）。

您可以创建一个任务或运行器，以便您可以访问 ActiveRecord 并将数据存储到某个模型中。

对于 Rails 中的跑步者：http: [//guides.rubyonrails.org/command_line.html#rails-runner](http://guides.rubyonrails.org/command_line.html#rails-runner) 对于任务：[http ://erik.debill.org/2011/12/04/rake-for-rails-developers](http://erik.debill.org/2011/12/04/rake-for-rails-developers)

此外，如果您使用任务（我推荐）观看此条目：[Rails rake 任务是否提供对 ActiveRecord 模型的访问？](https://stackoverflow.com/questions/876396/do-rails-rake-tasks-provide-access-to-activerecord-models)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:56:21.533

如果您关心结果的安全性，则存储 cron 作业结果的一种方法是创建具有基本身份验证的控制器。

请参阅[API](http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html)。

因此，在您将 cron 的结果保存到`/tmp/myresults`之后，您可以通过以下方式发布

```
curl -d @/tmp/myresults  http:/myrailsapplcaition.com:3000:/path_tomypost_method 
```

# backbone.js - 骨干网.js不加载路线

> ID：13637089
> 
> 赞同：0
> 
> 时间：2012-11-30T00:12:20.820
> 
> 标签：backbone.js, backbone-routing

我现在在几个项目中一直在使用backbone.js 没有问题，而且我刚刚开始了一个新项目，但是对于我的生活，我无法加载路由。我在 chrome 开发人员工具中没有收到任何错误，但我也无法获得简单的触发警报。

当我在开发人员工具中查看我的代码时，我的 router.js 文件和所有内容。

application.js - 警报在此页面中工作

```
    渲染：函数（）{
          新的 MyApp.Routers.Start();
              Backbone.history.start;
          警报（“开始”）；

    }

```

我的 router.js - 这些警报不会被触发

```
MyApp.Routers.Start = Backbone.Router.extend({
    路线：{
        "near_me": "near_me",
        ““： “指数”
    },

    索引：函数（）{
        警报（'主要'）；
    },

    近我：函数（）{
        警报（'地图'）；
        var my_map = new LikeMyWine.Models.Map({
        纬度：“-34.397”，
        经度：“150.644”，
        });
        新的 LikeMyWine.Views.NearMe({model: my_map});
    }
});

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:16:59.497

```
 Backbone.history.start(); 
```

start 是一个实际需要执行的函数

我引用你的代码：

```
render: function(){
      new MyApp.Routers.Start();
          Backbone.history.start;
      alert('started');

} 
```

# android - AS3 移动应用数据/上传/推送

> ID：13637091
> 
> 赞同：0
> 
> 时间：2012-11-30T00:12:29.497
> 
> 标签：android, ios, actionscript-3

我即将开始开发一个我想在 iOS 和 Android 上运行的应用程序，并想知道最好的方法。

该应用程序需要使用外部数据（MySQL 或类似数据），从手机图库上传图像并推送通知。

我非常了解 AS3，并且想知道是否可以使用 AS3 完成这 3 个要求，因为我不知道 Objective-c 还是我在浪费时间并且应该学习它？

# c# - 如何在 c# 的数组中反转此文件中的每一行数字

> ID：13637092
> 
> 赞同：0
> 
> 时间：2012-11-30T00:12:34.143
> 
> 标签：c#, arrays, for-loop, text-files, reverse

编辑代码

带有我要反转的行的文本文件包含这些数字：

```
1 2 3 4 5 6 7 8 9 10  
11 12 13 14 15 16 17 18 19 20  
21 22 23 24 25 26 27 28 29 30  
31 32 33 34 35 36 37 38 39 40  
41 42 43 44 45 46 47 48 49 50  
51 52 53 54 55 56 57 58 59 60  
61 62 63 64 65 66 67 68 69 70  
71 72 73 74 75 76 77 78 79 80  
81 82 83 84 85 86 87 88 89 90  
91 92 93 94 95 96 97 98 99 100 
```

到目前为止，我的数组看起来像这样：

```
 static void Main()
    {            
            int numbers;

            StreamReader fileReader = new StreamReader(fileDirectory);
            string line  = fileReader.ReadLine();
            fileReader.Close();
            string[] Split = line.Split();
            int.TryParse(line, out numbers);

            int[,] Table = new int [10,10];

                for (int row = 0; row < Table.GetUpperBound(0); row++)
                {
                    for (int column = 0; column < Table.GetUpperBound(0); column++)
                    {

                    }
                }

                for (int row = 0; row < Table.GetUpperBound(0); row++)
                {
                    for (int column = 0; column < Table.GetUpperBound(0); column++)
                    {
                        int tempHolder = Table[row, column];
                        Table[row, column] = Table.GetUpperBound(0);
                        Table[row, Table.GetUpperBound(0) - column] = tempHolder;
                        Console.WriteLine(Table[row, column]);
                        Console.Write(" ");
                    }
                    Console.WriteLine();
                }Console.Write(" ");
        } 
```

你能帮我将 int numbers 变量添加到数组中，然后我将尝试反转。现在，如果我运行它，我会得到大约 24 行的数字 9。还有人可以告诉我如何做一个 2d 数组而不必指定它的大小吗？我在网上看过，但不知道怎么做。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:29:42.403

我认为这是家庭作业，所以我会给出一些建议，但实际上没有提供代码。

首先，您必须拆分每一行以获得代表每个数字的字符串列表。
之后，您需要将每个数字的字符串表示形式转换为整数。
然后循环并将每个 int 添加到数组中应该不会太难。
您需要在处理一行时跟踪当前的水平索引，以及所有行的垂直索引。

在那之后你应该更接近。尝试进行逆转，如果再次遇到问题，请返回。

编辑：

要创建数组，您可以从 int 变量中指定大小。如果你有`String[] lines`（每行一个）和`String[] line`（`lines`由空格字符分割的一行），你可以像这样声明数组：

```
int[,] table = new int[line.Length, lines.Length]; 
```

你已经非常接近这段代码了。
对于 String.Split，您需要告诉它哪个字符分隔您想要的元素：

```
String[] split = line.Split(' '); 
```

这需要对文件中的每一行执行一次，因此应将其移到外循环内。同样，`int.TryParse`每个数字都需要做一次，所以它应该在内部循环中。

```
int number;
if (int.TryParse(split[column], out number))
{
    table[column, row] = number;
} 
```

你也应该注意你的`GetUpperBound`电话。 `GetUpperBound(d)`返回`GetLength(d) - 1`，因此您需要在索引小于或等于时循环`GetUpperBound`。您还可以将`GetUpperBound`调用替换为`GetLength(0)`(Columns) 和`GetLength(1)`(rows)。
传递给`GetUpperBound`and的数字`GetLength`是您想要获取大小的方向。您将 0 传递给所有这些，除非数组是方形的，否则这将不起作用。

在反向循环中，内部循环的第二行出现错误。您正在设置`Table[row, column]`数组的大小，而不是要交换的元素。您还只需要循环到每行的中间，否则您只需将元素交换回后半部分的原始位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:05:19.537

我会给你一些更多的提示、技巧并提供一些代码。

1..您需要将文本文件中的值放入数组中

```
string arrayLine = "";

try
{
    StreamReader fileReader = new StreamReader("C:\\Numbers.txt");
    string line = fileReader.ReadLine();

    while (line != null)
    {
        Console.WriteLine(line);

        if (arrayLine != "")
        {
             arrayLine += " " + line; // Add the rest of the number lines together
        }
        else
        {
             arrayLine = line;  // Add the first line
        }

        line = fileReader.ReadLine();    
    }
    fileReader.Close();
} 
catch (IOException IOEx)
{
    throw new Exception("no file found");
}
catch (Exception ex)
{
    throw new Exception("Other Exception found");
}

// Add the numbers into an array
int[] myNumberArray = SplitStringToNumbersArray(arrayLine); 
```

将字符串拆分为数字数组的方法如下

```
static private int[] SplitStringToNumbersArray(string _Numbers)
{
    _Numbers = _Numbers.Replace("  ", " "); 
    string[] pieces = _Numbers.Split(' ');
    int[] ret = new int[pieces.Length];
    for (int i = 0; i < pieces.Length; i++)
    {
        ret[i] = int.Parse(pieces[i]);
    }
    return ret;
} 
```

2..你想反转数组。这是一个示例和信息

[在 C# 中反转数组](http://www.deepakkapoor.net/reverse-array-elements-using-c/)

3.. 数组已经颠倒，所以现在你要遍历数组（从第 99 个位置开始并递减）并在每行添加 10 个数字。我会给你它的骨架代码，你可以填写其余的

```
string result = ""; // Used as the temporary string

for (int i = (reversedArray.Length-1); i > -1; i--)
{
    if ((i % 10 == 0))
    {
        // this is the 10th number you are adding to the string
        // This string is complete, What should you do now? 
    }
    else
    {
        // Keep adding to the string  
    }
}

// You have completed it so add the next line so you can see the result
Console.ReadLine(); 
```

# selenium - 无法使用 Selenium IDE 存储属性

> ID：13637094
> 
> 赞同：1
> 
> 时间：2012-11-30T00:12:36.843
> 
> 标签：selenium, selenium-ide

我有以下 XML 结构：

```
<array-list>
<tests>
<test myId="11">Some data</test>
<test myId="22">Some data 2</test>
</tests>
</array-list> 
```

如何存储`"myId"`列表中第一个元素的属性？

我尝试`storeAttribute`了使用以下位置参数的命令，但没有成功：

```
 1\. //array-list/tests/test[1]@myId 
 2\. xpath=//array-list/tests/test[1]@myId
 3\. */test[1]@myId
 4\. //array-list/tests/test@myId
 5\. //array-list/tests/test[1]/@myId
 6\. //array-list/tests/test/@myId 
```

我相信还有其他一些尝试，但它们都没有奏效。请不要说“正确的 XML”。XML 没有任何其他属性。这是从我无法修改的外部服务中检索的。所以唯一的问题是如何从列表中的第一个**测试**标签中获取`**myId**`属性

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:12:54.840

如果我说要更正 xml，您将不会高兴，但您必须将 myID 更改为 myid（全部为小）（我仍在寻找原因？）。

我尝试使用给定的 xml

```
<array-list>
<tests>
<test myid="11">Some data</test>
<test myid="22">Some data 2</test>
</tests>
</array-list> 
```

我试过的代码是

```
<tr>
<td>storeAttribute</td>
<td>//test[1]/@myid</td>
<td>myVar</td>
</tr>
<tr>
<td>echo</td>
<td>${myVar}</td>
<td></td>
</tr> 
```

它运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T14:55:16.943

因此，例如使用 css 选择器假设以下更改：

```
<array-list>
<tests>
<test id="11">Some data</test>
<test id="22">Some data 2<img src="some attribute"></test>
</tests>
</array-list> 
```

我们可以这样做：

![在此处输入图像描述](../Images/95223b6d5708b19f4c8f9d30e2382feb.png)

和html：

```
<tr>
    <td>storeText</td>
    <td>css=test#11 </td>
    <td>var</td>
</tr>
<tr>
    <td>echo</td>
    <td>${var}</td>
    <td></td>
</tr>
<tr>
    <td>storeAttribute</td>
    <td>css=test#22 &gt; img@src</td>
    <td>img</td>
</tr>
<tr>
    <td>echo</td>
    <td>${img}</td>
    <td></td>
</tr> 
```

和 webdriver python 版本：

```
 var = driver.find_element_by_css_selector("test#11").text
    print(var)
    img = driver.find_element_by_css_selector("test#22 > img").get_attribute("src")
    print(img) 
```**

# cuda - 如何使用推力减少外积

> ID：13637100
> 
> 赞同：3
> 
> 时间：2012-11-30T00:13:22.693
> 
> 标签：cuda, thrust

我有一个二维数组 $a,$ 存储在 device_vector 中，其索引 (p,i) 为 N 和 m

我要计算

```
$$s_{ij} = \sum \limits_{p=1}^{N} a_{p,i} a_{p,j}$$

for $i,j=1,...,m.$ 
```

有没有一种简单的方法可以使用推力来做到这一点？

上面的代码是乳胶的。在 C++ 中，它类似于

```
Matrix A(N,m); // filled with data

Matrix S(m,m);

for (int i=0; i <m;++i)
  for (int j=0; j <m;++j) 
   { 
     S(i,j)=0;
     for (int p=0; p < N; ++p)
        S(i,j) += A(p,i)*A(p,j);

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:22:58.817

如果我没有错过什么，似乎

```
$$s_{ij} = \sum_{p=1}^{N} a_{p,i} a_{p,j} = \sum_{p=1}^{N} a^T_{i,p} a_{p,j}$$ 
```

因此

```
$$S = A^T A$$ 
```

通常的矩阵产品。我也不认为你可以用推力做到这一点。但是您可以使用 CUBLAS 或 Arrayfire 轻松进行矩阵乘法（实际上我认为 arrayfire 在内部使用 cublas）。但请记住，这些库以列优先顺序存储矩阵（如在 fortran 中）

# iphone - 应用在后台时下载网络数据

> ID：13637102
> 
> 赞同：1
> 
> 时间：2012-11-30T00:13:26.343
> 
> 标签：iphone, ios, core-location, multitasking

我将 coreLocation 与一个在后台注册位置更新的应用程序一起使用。我可以在应用程序处于后台时对 Web 服务进行网络调用以下载和存储数据吗？我在确定我可以在后台做多少事情时遇到问题。

例如，当用户对他/她的位置进行重大更改时，我是否可以调用天气服务来请求并记录该位置的天气（这不完全是我要做的，但作为一个示例网络服务）？生成他/她去过的地方以及当时的天气列表。

我可以在后台进行网络连接和请求以下载数据吗？还是我以某种方式受到限制？或者我只是受到我的过程所花费的时间的限制。

如果应用程序不断这样做，我确实了解电池和网络费用的缺陷。就目前而言，这是无关紧要的。只是在应用程序处于后台时寻找有关下载数据的细节。

提前致谢 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:19:26.263

您的应用程序不一定因为您在后台注册了定位服务而在后台运行。当您的位置管理器发送位置事件时，它基本上被唤醒以处理您的委托呼叫。如果您的位置在一段时间内没有改变，应用程序将被暂停，甚至可能被终止。位置管理器将唤醒它，当处理新的位置事件时，您将有有限的时间来工作。

如果你发起一个刷新数据的调用，包装在 beginBackgroundTaskIdentifier 和 endBackgroundTaskIdentifier 调用中，你应该有一个很好的机会来处理网络数据方法。我认为您不能启动该进程，也不能指望它在任何其他时间在后台处理并可能暂停。

psoft 引用的链接将使您更好地了解如何在后台管理进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:35:10.770

当系统挂起您的应用程序时，它可以并且将会断开网络连接。我猜您现有的连接将有一些时间来完成他们的工作，无论是在“非活动”（过渡）状态期间，还是仍处于“后台”但在“暂停”状态之前。此外，您可以在过渡到“暂停”之前在“后台”请求更多时间。[在此处](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)阅读“后台执行和多任务处理” 。唯一可以维持网络连接的服务类型是报亭下载和 VOIP 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:18:50.383

在我下载大型 PDF 的应用程序中，当用户点击主页按钮并将应用程序置于后台状态时，我只需使用此代码继续下载 PDF 长达 10 分钟：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
{
    UIApplication  *app = [UIApplication sharedApplication];
    UIBackgroundTaskIdentifier bgTask;

    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{ 
    [app endBackgroundTask:bgTask]; 
    }];
} 
```

# mysql - mysqli 迁移

> ID：13637105
> 
> 赞同：0
> 
> 时间：2012-11-30T00:13:39.713
> 
> 标签：mysql, mysqli

几周后使用参考书整理了一个网站，现在发现 mysql 是多余的，我需要将所有内容都更改为 mysqli，但我得到的结果是如何准确地做到这一点，即使它意味着采取从字面上看分钟。

谁能告诉我我现有的代码有什么问题——至少可以说是最小的——证明很难变成 mysql，因为每次我尝试新的解决方案时，我都会得到一个完全空白的页面。

顺便说一句，目前一切都很好。

这是我连接到的配置页面：

```
<?php
# FileName="Connection_php_mysqli.htm"
# Type="MYSQL"
# HTTP="true"
$hostname_em = "localhost";
$database_em = "php_test";
$username_em = "username";
$password_em = "password";
$em = mysql_pconnect($hostname_em, $username_em, $password_em) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

这是我的标题：

```
<?php require_once('connections/em.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
if (PHP_VERSION < 6) {
$theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
}

$theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

switch ($theType) {
case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
}
return $theValue;
}
}

//Query for tblReviews
mysql_select_db($database_em, $em);
$query_getReview = "SELECT reviews.title, reviews.cover_art, reviews.blog_entry, reviews.rating, reviews.published, reviews.updated, artists.artists_name, contributors.contributors_name, contributors.contributors_photo, contributors.contributors_popup, categories_name FROM reviews JOIN artists ON artists.id = reviews.artistid JOIN contributors ON contributors.id = reviews.contributorid JOIN categories ON categories.id = reviews.categoryid ORDER BY reviews.updated DESC LIMIT 3";
$getReview = mysql_query($query_getReview, $em) or die(mysql_error());
$row_getReview = mysql_fetch_assoc($getReview);
$totalRows_getReview = mysql_num_rows($getReview);

mysql_select_db($database_em, $em);
$query_getFeature = "SELECT features.features_words, features.published, features.updated, artists.artists_name, contributors.contributors_name, contributors.contributors_photo, contributors.contributors_popup, categories_name
FROM features JOIN artists ON artists.id = features.artistid JOIN contributors ON contributors.id = features.contributorid JOIN categories ON categories.id = features.categoryid ORDER BY features.updated DESC LIMIT 1";
$getFeature= mysql_query($query_getFeature, $em) or die(mysql_error());
$row_getFeature = mysql_fetch_assoc($getFeature);
$totalRows_getFeature = mysql_num_rows($getFeature);
?> 
```

最后是所有显示的地方（我将包括所有内容，以防在我尝试进行迁移时它是一行或另一行破坏了事情）：

```
<?php do { ?>
<table id="center_table" width="650" border="0" cellpadding="0" cellspacing="0">
<tr>
    <td width="650" height="30" colspan="3" bgcolor="#FFFFFF"><a class="category" href="/" target="_top"><?php echo $row_getReview['categories_name']; ?></span></td><!-- category -->
</tr>
<tr>
    <td  width="60" height="60" rowspan="2" bgcolor="#FFFFFF"><span class="product_photo"><a href="<?php echo $row_getReview['cover_art']; ?>"><img id="product_photo" src="images/covers/<?php echo $row_getReview['cover_art']; ?>" width="60" height="60" border="0" alt="product_image" /></a><span></td><!-- product photo -->
    <td width="590" height="30" colspan="2" bgcolor="#FFFFFF"><span class="artist"><?php echo $row_getReview['artists_name']; ?></span><span class="title"><?php echo $row_getReview['title']; ?></td><!-- artist & title -->
</tr>
<tr>
    <td width="35" height="25" bgcolor="#FFFFFF"><div class="ienlarger"><img id="contributor_photo" /><a href="<?php echo $row_getReview['contributors_website']; ?>"><img src="<?php echo $row_getReview['contributors_photo']; ?>" alt="thumb" class="resize_thumb" /><span><img src="<?php echo $row_getReview['contributors_popup']; ?>" alt="large" /></span></a></div></td><!-- contributor photo -->
    <td width="555" height="25" bgcolor="#FFFFFF"><span class="contributor">Written by</span>&nbsp;<?php echo $row_getReview['contributors_name']; ?></td><!-- Written by Contributor Name -->
</tr>
<tr>
    <td width="650" colspan="3" bgcolor="#FFFFFF" valign="top"><p class="blog_entry"><?php echo nl2br($row_getReview['blog_entry']); ?></p></td><!-- Review -->
</tr>
<tr>
    <td width="650" height="15" colspan="3" bgcolor="#FFFFFF"><!-- rating -->
        <span class="rating">Rating :</span>&nbsp;<?php echo $row_getReview['rating']; ?>&nbsp;(out of a possible 1,000,000)<span class="published">Published :</span>&nbsp;<?php echo $row_getReview['published']; ?><span class="published">Updated :</span>&nbsp;<?php echo $row_getReview['updated']; ?></td>
</tr>
<tr>
    <td width="650" height="15" colspan="3" bgcolor="#FFFFFF">
        <img src="images/spacer.gif" width="650" height="15" alt="" /></td>
</tr>
</table>
<?php } while ($row_getReview = mysql_fetch_assoc($getReview)); ?>
<?php do { ?>
<table id="center_table" width="650" border="0" cellpadding="0" cellspacing="0">
<tr>
    <td width="650" height="30" colspan="3" bgcolor="#FFFFFF"><a class="category" href="/" target="_top"><?php echo $row_getFeature['categories_name']; ?</span></td><!-- category -->
</tr>
<tr>
    <td  width="60" height="60" rowspan="2" bgcolor="#FFFFFF">&nbsp;</td><!-- product photo -->
    <td width="590" height="30" colspan="2" bgcolor="#FFFFFF"><span class="artist"><?php echo $row_getFeature['artists_name']; ?></span><span class="title">Interview</td><!-- artist & title -->
</tr>
<tr>
    <td width="35" height="25" bgcolor="#FFFFFF"><div class="ienlarger"><img id="contributor_photo" /><a href="<?php echo $row_getFeature['contributors_website']; ?>"><img src="<?php echo $row_getFeature['contributors_photo']; ?>" alt="thumb" class="resize_thumb" /><span><img src="<?php echo $row_getFeature['contributors_popup']; ?>" alt="large" /></span></a></div></td><!-- contributor photo -->
    <td width="555" height="25" bgcolor="#FFFFFF"><span class="contributor">Written by</span>&nbsp;<?php echo $row_getFeature['contributors_name']; ?></td><!-- Written by Contributor Name -->
</tr>
<tr>
    <td width="650" colspan="3" bgcolor="#FFFFFF" valign="top"><p class="blog_entry"><?php echo nl2br($row_getFeature['features_words']); ?></p></td><!-- Feature -->
</tr>
<tr>
    <td width="650" height="15" colspan="3" bgcolor="#FFFFFF"><!-- rating -->
        <span class="published">Published :</span>&nbsp;<?php echo $row_getFeature['published']; ?><span class="published">Updated :</span>&nbsp;<?php echo $row_getFeature['updated']; ?></td>
</tr>
<tr>
    <td width="650" height="15" colspan="3" bgcolor="#FFFFFF">
        <img src="images/spacer.gif" width="650" height="15" alt="" /></td>
</tr>
</table>
<?php } while ($row_getFeature = mysql_fetch_assoc($getFeature)); ?> 
```

如您所见，目前还没有太多，所以现在是开始使用 mysqli 的最佳时机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:48:55.847

我个人认为您现在应该开始使用`mysqli`，因为`mysql`不再推荐用于编写新代码（[http://www.php.net/manual/en/intro.mysql.php](http://www.php.net/manual/en/intro.mysql.php)）。

也参考这个线程[PHP- MySQL 或 MySQLi 中哪个最快？](https://stackoverflow.com/questions/171400/which-is-fastest-in-php-mysql-or-mysqli), “mysqli 支持底层 MySQL API 的更多功能，例如事务和带参数的准备查询。您还可以以面向对象的方式调用 mysqli 函数”。

# css - 媒体查询的最佳宽度范围是多少

> ID：13637106
> 
> 赞同：32
> 
> 时间：2012-11-30T00:13:40.743
> 
> 标签：css, responsive-design, media-queries

在响应式设计中检测媒体查询的最佳宽度范围是多少？

我想在 4 个媒体查询中涵盖所有台式机/笔记本电脑显示器（一个方向），但我不知道是否有可能，例如：小型显示器、中型显示器、大型和超大型显示器。

例如在这段代码中

```
/* Desktops and laptops ----------- */
 @media only screen and (min-width : 1224px) {}

/* Large screens ----------- */
 @media only screen and (min-width : 1824px) {} 
```

我认为我们仍然需要将台式机和笔记本电脑媒体设备分为三个子媒体，即小型（如 13 英寸到 14 台笔记本电脑）、中型（如 15 到 17 号）和大型（超过 22#）。我知道浏览器分辨率不同比屏幕分辨率，但假设我们有所有格式的全屏模式浏览器。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-06-18T20:16:18.527

试试这个带视网膜显示器的

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

## 更新

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) {
  /* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen and (min-width: 321px) {
  /* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen and (max-width: 320px) {
  /* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
  /* Styles */
}

/* iPads (landscape) ----------- */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) {
  /* Styles */
}

/* iPads (portrait) ----------- */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: portrait) {
  /* Styles */
}

/* iPad 3 (landscape) ----------- */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPad 3 (portrait) ----------- */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 2) {
  /* Styles */
}

/* Desktops and laptops ----------- */
@media only screen and (min-width: 1224px) {
  /* Styles */
}

/* Large screens ----------- */
@media only screen and (min-width: 1824px) {
  /* Styles */
}

/* iPhone 4 (landscape) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 4 (portrait) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 5 (landscape) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 568px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 5 (portrait) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 568px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 6 (landscape) ----------- */
@media only screen and (min-device-width: 375px) and (max-device-height: 667px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 6 (portrait) ----------- */
@media only screen and (min-device-width: 375px) and (max-device-height: 667px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 6+ (landscape) ----------- */
@media only screen and (min-device-width: 414px) and (max-device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 6+ (portrait) ----------- */
@media only screen and (min-device-width: 414px) and (max-device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* Samsung Galaxy S3 (landscape) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* Samsung Galaxy S3 (portrait) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* Samsung Galaxy S4 (landscape) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3) {
  /* Styles */
}

/* Samsung Galaxy S4 (portrait) ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3) {
  /* Styles */
}

/* Samsung Galaxy S5 (landscape) ----------- */
@media only screen and (min-device-width: 360px) and (max-device-height: 640px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3) {
  /* Styles */
}

/* Samsung Galaxy S5 (portrait) ----------- */
@media only screen and (min-device-width: 360px) and (max-device-height: 640px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3) {
  /* Styles */
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-30T00:49:06.483

您可以在[**此处**](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)查看更长的屏幕尺寸列表和相应的媒体查询。

或者去[**引导媒体查询（存档）**](https://web.archive.org/web/20121125094111/http://twitter.github.com/bootstrap/scaffolding.html#responsive)：

```
/* Large desktop */
@media (min-width: 1200px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Landscape phones and down */
@media (max-width: 480px) { ... } 
```

*更新：*

*[引导 5 个断点](https://getbootstrap.com/docs/5.0/layout/breakpoints/#media-queries)*

```
$grid-breakpoints: (
  xs: 0,
  sm: 576px,
  md: 768px,
  lg: 992px,
  xl: 1200px,
  xxl: 1400px
); 
```

* * *

此外，您可能想查看[**Foundation 的媒体查询**](https://github.com/zurb/foundation/blob/master/scss/foundation/components/modules/_mqueries.scss)，其默认设置如下：

```
// Media Queries

$screenSmall: 768px !default;
$screenMedium: 1279px !default;
$screenXlarge: 1441px !default; 
```

*更新：*

*[Foundation 6 断点](https://github.com/foundation/foundation-sites/blob/6cdc5964a955fa04e3e1b5fbadbdb2fe3c9963a8/scss/settings/_settings.scss#L105)*

```
$breakpoints: (
  small: 0,
  medium: 640px,
  large: 1024px,
  xlarge: 1200px,
  xxlarge: 1440px,
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-03T08:44:28.660

最好的选择是定位功能而不是设备，除非你必须这样做，引导程序做得很好，你可以在它们的断点上扩展，例如定位像素密度和 1920 以上的更大屏幕

# web - 如何让我的网页以特定的滚动高度打开

> ID：13637107
> 
> 赞同：0
> 
> 时间：2012-11-30T00:13:41.803
> 
> 标签：web, scroll

我的网站的重要内容距离顶部 300 像素，所以我希望它直接在那个高度打开，让用户可以选择向上滚动。哪种方法更容易实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:40:49.823

我找到了一种选择。我创建了一个锚点，然后让它直接加载到它。我不想使用锚，但没有人回答我...

```
<body onload="location.href ='#home'">
  <a id="home"></a> 
```

编辑：这就是我要找的东西！！

```
<script type="text/javascript">
function Scrolldown() {
window.scroll(0,100); 
}

window.onload = Scrolldown;
</script> 
```

# iphone - 重新进入视图时 UIScrollView 不会滚动

> ID：13637109
> 
> 赞同：2
> 
> 时间：2012-11-30T00:13:54.253
> 
> 标签：iphone, uiscrollview, ios6

我有一个`UIView`（当然是在视图控制器内部），在这个内部`UIView`，我有一个`UIScrollView`. `UIScrollView`包含一些图像和按钮。其中一个按钮使用模态 Action Segue 并打开一个`UIView`带有`MapView`内部的按钮，并在底部打开一个“返回”按钮，将您带回上一个`UIView`。但是在“返回”（从`MapView`到`UIView`）时，`UIScrollView` **不再**像在进入 MapView 和返回之前那样滚动。就像它被锁定在顶部位置一样。我觉得这与代表有关？我不知道，我对这些还不太清楚。无论如何，对我的滚动问题有任何见解吗？谢谢！！

**这是我的 .h 文件（我的滚动视图所在的位置）：**

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface ThirdViewController : UIViewController <UIScrollViewDelegate, UIScrollViewAccessibilityDelegate>

@property (strong, nonatomic) IBOutlet UIView *findUsView;
@property (weak, nonatomic) IBOutlet UIScrollView *findUsScrollView;
- (IBAction)callButton:(id)sender;
- (IBAction)getDirButton:(id)sender;

@end 
```

**这是我的 .m 文件（我的滚动视图所在的位置）：**

```
#import "ThirdViewController.h"

@implementation ThirdViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"appBackgroundColor.png"]];

    [self.view addSubview:self.findUsScrollView];
}

-(void)viewWillAppear:(BOOL)animated{

    //this line creates the frame of the scrollview (dimensions)
    [self.findUsScrollView setFrame:CGRectMake(0, 0, 0, 750)];
    [super viewWillAppear:animated];
}

-(void)viewDidAppear:(BOOL)animated
{
    //dimensions of content within scrollveiw. Scrolling enabaled.
    [self.findUsScrollView setScrollEnabled:YES];
    [self.findUsScrollView setContentSize:CGSizeMake(0, 751)];
    [super viewWillAppear:animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)callButton:(id)sender {

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:0000000000"]];
}

- (IBAction)getDirButton:(id)sender {

}

@end 
```

**这是地图视图的 .h 文件：**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MyMapViewController : UIViewController <MKMapViewDelegate, MKAnnotation>

@property (weak, nonatomic) IBOutlet MKMapView *mapView;
@property (weak, nonatomic) IBOutlet UINavigationBar *titleBarMap;
@property (weak, nonatomic) IBOutlet UIToolbar *bottomNavBarMap;
@property (weak, nonatomic) IBOutlet UIView *topTitlesOverlay;
- (IBAction)backButtonMap:(id)sender;

@end 
```

**这是地图视图的 .m 文件：**

```
#import "MyMapViewController.h"

@implementation BountMapViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (IBAction)backButtonMap:(id)sender {

    [self dismissViewControllerAnimated:YES completion: ^(void){
    ThirdViewController *vc = (ThirdViewController *)[self presentingViewController];
    [[vc findUsScrollView] becomeFirstResponder];

}];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:55:12.997

您的替代`viewDidAppear`是调用`[super viewWillAppear:]`而不是`[super viewDidAppear:]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:29:16.387

Try moving `[self.findUsScrollView setFrame:CGRectMake(0, 172, 320, 680)];` and `[self.findUsScrollView setContentSize:CGSizeMake(320, 680)];` to viewDidLoad as a first suggestion. You don't want those to be called everytime your view appears.

Second, your contentSize and frameSize are the same (320, 680). This means your UIScrollView does not need to scroll. Remember: for a UIScrollView to scroll it's content size must be **bigger** than it's frame size. That should be all, and of course: `setScrollEnabled: YES;`

# actionscript-3 - 具有多个边界的可拖动对象

> ID：13637110
> 
> 赞同：0
> 
> 时间：2012-11-30T00:14:13.100
> 
> 标签：actionscript-3, flash

我在舞台上拖着我的播放器。如果玩家撞到我在影片剪辑中布置的任何对象（所有完美矩形），我希望玩家撞到墙壁并停止移动。写这个最有效的方法是什么？

我是否会遍历玩家无法击中的所有点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:02:47.087

有用于命中测试的内置方法，您循环遍历要对其进行测试的所有对象（使每个对象都是自己的精灵或命中测试包含针对对象的所有部分的整个精灵，具体取决于您想要的信息类型有。您可能还想装配您自己的自定义 Sprite，该 Sprite 具有左右顶部和底部的击中区域，以确定玩家击中的边缘。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject())

[多重命中 AS3](https://stackoverflow.com/questions/12838939/multiple-hittest-as3)

# asp.net-mvc - 让 Html.Action 基于父模型进行渲染

> ID：13637111
> 
> 赞同：0
> 
> 时间：2012-11-30T00:14:46.017
> 
> 标签：asp.net-mvc

我有一个简单的**搜索**控制器，它有一个**ChildAction**，一旦发布，它将根据其父级的搜索条件在同一页面上显示结果：

```
 @Html.Action("SearchResults","Search") 
```

一旦填充了搜索条件，如何获取父模型，以便在 ChildAction 中呈现结果？我正在寻找类似**parent.GetModel()的东西**

ChildAction 和 Parent 在同一个控制器类中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:48:37.893

找到了：

发送父模型：

```
@Html.Action("SearchUserResultGrid", "Search", new {SearchUserViewModel = Model}) 
```

并在控制器中消费：

```
 [ChildActionOnly]
    public PartialViewResult SearchUserResultGrid(SearchUserViewModel parentModel)
    {
        if (parentModel.HasSearchCriteria)
        {
            //TODO Do the search

        }
        else
        {
            return null; //empty results
        }
    } 
```

# linux - 信号是如何实现的？

> ID：13637115
> 
> 赞同：1
> 
> 时间：2012-11-30T00:15:07.173
> 
> 标签：linux

如果当前正在运行单个线程进程并且内核检测到信号，内核是否只是停止当前执行，保存指令指针的当前地址空间并运行信号处理程序。换句话说，它使用同一个线程，程序正在使用它来执行信号处理程序？如果一个进程是多线程的会发生什么？如果一个程序有 3 个线程，其中一个线程为 SIGUSR1 注册信号处理程序，内核会中断已注册信号处理程序的线程，其余两个线程将继续运行吗？

# python - 'SO_REUSEPORT' 未在 Windows 7 上定义

> ID：13637121
> 
> 赞同：5
> 
> 时间：2012-11-30T00:15:35.193
> 
> 标签：python, sockets

当多个 UDP 客户端需要侦听同一端口上的广播时，我发现了多个建议使用 SO_REUSEPORT 套接字选项的答案。但是，我收到此选项不可用的错误消息。使用 python 2.7

```
from socket import *
s = socket(AF_INET, SOCK_DGRAM)
s.setsockopt(SOL_SOCKET, SO_REUSEPORT, 1)
try:
    s.bind(('', MYPORT))
except:
    print "Error connecting to the UDP stream."

Traceback (most recent call last):
  File "qsorder.py", line 119, in <module>
    s.setsockopt(SOL_SOCKET, SO_REUSEPORT, 1)
NameError: name 'SO_REUSEPORT' is not defined 
```

我试过 SO_REUSEADDR 并没有给出错误，但只有一个客户端接收广播。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:51:52.737

您需要`SO_BROADCAST`在每个套接字上设置选项：

```
s.setsockopt(SOL_SOCKET, SO_BROADCAST, 1) 
```

`SO_REUSEPORT`不是标准的，通常与`SO_REUSEADDR`支持的地方相同。

# ios - monotouch app下如何下载和更新本地图片

> ID：13637124
> 
> 赞同：2
> 
> 时间：2012-11-30T00:15:47.157
> 
> 标签：ios, xamarin.ios

我有一个关于如何更新作为应用程序内容嵌入的本地图像的问题。

我的应用程序是使用存储为“内容”（嵌入在应用程序中）的 30 个图像构建的，用于我必须显示的图像库。每 2 天应用程序检查服务器信息以查看数据库中的图像是否已更改，在这种情况下，我必须比较文件，如果任何文件已更改，则我必须下载它并更新本地图像。

我已经阅读了为这种porposses存储图像的最佳方法是在应用程序的“库”文件夹下，但是应用程序附带的图像被构建为“内容”（嵌入）......

关于在单点触控中做到这一点的最佳方法的任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:15:43.070

捆绑在 .app 中的资源（例如图像）成为应用程序的一部分。由于应用程序已签名，因此您**无法**更新（或删除）这些文件，因为它会使签名无效（还有文件权限不允许这种情况发生）。

*注意：它可以在 iOS 模拟器中工作，因为它不需要（或检查）应用程序签名，但它不适用于设备上的应用程序。*

你可以做的是：

1.  将默认图像与您的应用程序捆绑在一起；
2.  下载新图像（在需要时）并将它们安装在您的应用程序之外（[在适当的目录中](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Working_with_the_File_System)）；
3.  让您的应用程序检查是否有下载的图像（或者是否需要下载图像）并回退到应用程序附带的图像；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:46:39.313

您无法更改应用程序中的任何文件（它们是只读的）。

您可以做的是将文件保存到读写目录，并在运行时检查这些图像是否存在（然后不要使用与应用程序捆绑的图像）。

# jquery - 内联样式与 jQuery .css

> ID：13637127
> 
> 赞同：0
> 
> 时间：2012-11-30T00:15:53.193
> 
> 标签：jquery, jquery-selectors

我遇到了一个仅使用 css 显示元素内部的隐藏 div 的示例

```
<style type="text/css">
#shopCart:hover .shopCartDetail {
    display: block;
}
</style>

<div id="shopCart">
Shop Cart
<div class="shopCartDetail"><style>.shopCartDetail {display:none}</style>
    This is Shop Cart Detail</div>
</div> 
```

这里的工作示例[http://jsfiddle.net/7DRTD/](http://jsfiddle.net/7DRTD/)

在我的场景中，样式 display:none 是由 jQuery 创建的。使用悬停显示隐藏的 div 不起作用：http: [//jsfiddle.net/Z2mtF/](http://jsfiddle.net/Z2mtF/)

这里可能是什么问题？html 代码看起来相同，两个示例都将内联样式添加到 div。

问题是：为什么第二种情况不起作用？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:29:51.677

一般来说，直接应用于单个元素的样式优先于样式表中的设置。这是（部分）“级联”效果，即“CSS”中的“C”。因此，当您使用 jQuery 隐藏元素时，请在文档中准备好以下内容：

```
$(".shopCartDetail").css("display","none"); 
```

...它相当于`style="display:none"`直接添加到元素，它具有相同的“问题”：http: [//jsfiddle.net/Z2mtF/2/](http://jsfiddle.net/Z2mtF/2/)

这*与*将类应用于元素不同，这是您上面的“模拟”`<style>`对`<div>`.

所以悬停规则不够重要，无法生效。解决此问题的一种方法是*使*悬停规则变得重要：

```
#shopCart:hover .shopCartDetail
{
    display: block !important;
} 
```

演示：http: [//jsfiddle.net/Z2mtF/1/](http://jsfiddle.net/Z2mtF/1/)

样式表中标记为的设置`!important`将优先于内联样式属性。

请注意，如果您使用`.show()`and而不是通过该方法`.hide()`显式设置`display`属性，它会更整洁。`.css()`

# jquery-mobile - Jquerymobile - Listview -Ajax 加载 -CSS 样式

> ID：13637129
> 
> 赞同：2
> 
> 时间：2012-11-30T00:16:06.100
> 
> 标签：jquery-mobile

我正在尝试使用 ajax 加载数据，listview 在初始页面加载时很有魅力，在 ajax 加载期间 css 未加载。

几乎尝试了一切，如列表视图刷新、触发器等。但对我来说没有任何效果。

请帮我

我的代码：

```
$('.more').live("click",function() {
var ID = $(this).attr("id");
var CASE = $(".case").attr("id");
var EXTRADATA = $(".extra_data").attr("id");
if(ID) {
    $("#more"+ID).find("#loader").css('display', 'block');
    $.ajax({
    type: "POST",
    url: "/ajax.php",
            data: "lastpos=" + ID +"&case=" + CASE + "&extradata=" + EXTRADATA,
            cache: false,
    success: function(html){ 
                                $("#video_listing").append(html);
                                $("#more"+ID).remove(); // removing old more button                        

                                }

}); 
```

我试过

$('#video_listing').listview('refresh');

$(html).trigger('create'); .trigger("增强");

没有任何效果...虽然有很多主题，涵盖了这个问题，但对我来说没有任何效果..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:45:19.093

这是一个简单的例子：http: [//jsfiddle.net/Twisty/9SVPN/](http://jsfiddle.net/Twisty/9SVPN/)

**查询：**

```
$(document).ready(function() {
    $('.more').live("click", function() {
        $("#myList").append("<li>Added Item</li>");
        $("#myList").listview("refresh");
    });
}); 
```

**HTML：**

```
<html>
    <head>
        <title>Test</title>
    </head>
<body>
    <div data-role="page">
        <div data-role="header">
            <h2>Test Page</h2>
        </div>
        <div data-role="content">
            <ul data-role="listview" id="myList">
                <li>Item 1</li>
            </ul>
            <a id="actionBtn" data-role="button" class="more">Add LI</a>
        </div>
    </div>
</body>
</html> 
```

您的问题没有定义返回的 HTML 或 AJAX 事件之前的 HTML 外观，因此我假设您返回的数据包含在`<li></li>`. 然后你想`.listview("refresh")`在`<ul data-role="listview">`or`<ol data-role="listview">`本身上执行。

# python - 使用python通过thrift将压缩文件上传到HDFS

> ID：13637131
> 
> 赞同：4
> 
> 时间：2012-11-30T00:16:13.540
> 
> 标签：python, hadoop, hdfs, thrift

从 hdfs 的 thrift IDL 中，我看到以下也是唯一要编写的定义（版本：Hadoop-0.20）：

```
// write a string to the open handle for the file
bool write(1:ThriftHandle handle, string data) throws (1:ThriftIOException ouch), 
```

数据是字符串类型，在尝试写入任何压缩文件时都不起作用。但无论如何，我继续尝试使用上面的 API 来编写我的`tar.gz`文件：

```
 pathName = ttypes.Pathname(os.path.join("/tmp", "data.tar.gz"))
    fd = open("data.tar.gz", "rb")
    thirftHandle = self.__client.create(pathName)
    b = fd.read(1)
    while b:
        self.__client.write(thirftHandle, b)
        b = fd.read(1)

    self.__client.close(thirftHandle) 
```

该脚本运行良好，该文件是在 HDFS 中创建的，但是当我尝试使用以下命令检索它时：

```
hadoop dfs -get /tmp/data.tar.gz . 
```

尝试解压缩时，它已按预期损坏。

有没有办法通过thrift将二进制数据写入hdfs？

# google-fusion-tables - 在地图外的 div 中加载 Fusion Tables InfoWindow 数据

> ID：13637132
> 
> 赞同：2
> 
> 时间：2012-11-30T00:16:14.190
> 
> 标签：google-fusion-tables, onclicklistener, infowindow

我希望有人可以帮助解决可能相当简单的查询。我在这里看到了一个关于尝试在不单击鼠标的情况下执行此操作的问题，但我想向 Fusion Table 地图上的标记添加一个事件侦听器，它将在地图下方的单独 div 中加载 infoWindow 内容。到目前为止，我已经抑制了 infoWindow，但是在添加点击、检索与该标记相关的数据并加载到 div 的下一步中，我有点迷失了。

标记显示仅限于用户位置设置半径内的标记，以减少加载时间。

我假设我需要从这样的事情开始：

```
google.maps.event.addListener(layer, 'click', function() { 
```

我会很感激任何线索。

到目前为止，这是我的代码的相关位：

```
var tableid = '[ID]';

var layer = new google.maps.FusionTablesLayer({
query: {
select: 'Location',
from: tableid,
where: 'ST_INTERSECTS(Location, CIRCLE(LATLNG'+marker.position+', 2000))'
},
options: {
suppressInfoWindows: true
}
});

var circle = new google.maps.Circle({
                map: map,
                radius: 2000,
fillOpacity: 0.1,
strokeOpacity: 0,
clickable: false
});

    circle.bindTo('center', marker, 'position');

layer.setMap(map);
    }); 
```

编辑：

为了大家的娱乐，这是我迄今为止尝试过的：

```
google.maps.event.addListener(layer, "click", function () {
            $('#infoWindowDiv').append('new google.maps.infoWindowHtml');
        }); 
```

它不起作用可能会让任何人感到惊讶。但是，嘿，至少我在努力！谢谢

编辑2：

我很高兴地说我找到了一个可行的解决方案 - 我在这里为任何可能有相同问题/目标的其他人发布：

```
google.maps.event.addListener(layer, "click", function (e) {
            document.getElementById("infoWindowDiv").innerHTML = e.infoWindowHtml;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:21:47.750

我很高兴地说我找到了一个可行的解决方案 - 我在这里为任何可能有相同问题/目标的其他人发布：

```
 google.maps.event.addListener(layer, "click", function (e) {
        document.getElementById("infoWindowDiv").innerHTML = e.infoWindowHtml;
        }); 
```

# javascript - 如何使用 JavaScript 设置 onClick？

> ID：13637133
> 
> 赞同：32
> 
> 时间：2012-11-30T00:16:21.310
> 
> 标签：javascript

我正在尝试使用 javascript 设置 onclick 事件。以下代码有效：

```
var link = document.createElement('a');
link.setAttribute('href', "#");
link.setAttribute('onclick', "alert('click')"); 
```

然后我使用 appendChild 将链接添加到文档的其余部分。

但我显然想要一个比警报更复杂的回调，所以我尝试了这个：

```
link.onclick = function() {alert('clicked');}; 
```

和这个：

```
link.onclick = (function() {alert('clicked');}); 
```

但这无济于事。当我单击链接时，没有任何反应。我已经使用 chrome 进行了测试，并且浏览 DOM 对象显示该元素的 onclick 属性为 NULL。

为什么我不能将函数传递给 onclick？

编辑：

我尝试使用下面建议的 addEventListener 并获得相同的结果。链接的 DOM 将 onclick 显示为 null。

我的问题可能是该元素的 DOM 可能尚未完全构建。此时页面已经加载完毕，用户点击了一个按钮。该按钮执行构建一个新 div 的 javascript，它通过调用 document.body.appendChild 将其附加到页面。此链接是新 div 的成员。如果这是我的问题，我该如何解决？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-30T01:08:52.663

我一直无法重现该问题。与 OP 的发现相反，以下行在最新版本的 IE、FF、Opera、Chrome 和 Safari 上运行良好。

```
link.onclick = function() {alert('clicked');}; 
```

您可以访问此 jsFiddle 在您自己的浏览器上进行测试：

[http://jsfiddle.net/6MjgB/7/](http://jsfiddle.net/6MjgB/7/)

假设我们在 html 页面中有这个：

```
<div id="x"></div> 
```

以下代码在我尝试过的浏览器上运行良好：

```
var link = document.createElement('a');
link.appendChild(document.createTextNode("Hi"));
link.setAttribute('href', "#");
link.onclick= function() {link.appendChild(document.createTextNode("Clicked"));}

document.getElementById("x").appendChild(link); 
```

如果存在浏览器兼容性问题，使用 jQuery 应该可以解决它并使代码更加简洁：

```
var $link = $("<a>").html("Hi").attr("href","#").click(function (){$link.html("Clicked")})

$("#x").html($link) 
```

如果简洁不是使用 jQuery 的有力论据，浏览器兼容性应该是……反之亦然:-)

注意：我没有在代码中使用 alert() 因为 jsFiddle 似乎不喜欢它:-(

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T00:22:29.267

`addEventListener(...)`正如大卫所说，您可以添加一个 DOM 甚至监听器。我已经包含`attachEvent`了与 IE 的兼容性。

```
var link = document.createElement('a');
link.setAttribute('href', "#");
if(link.addEventListener){
   link.addEventListener('click', function(){
      alert('clicked');
   });
}else if(link.attachEvent){
   link.attachEvent('onclick', function(){
      alert('clicked');
   });
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-02-08T17:58:44.113

如果您使用 JavaScript 执行此操作，则使用[**`addEventListener()`**](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener), with`addEventListener('click', function(e) {...})`将事件存储为`e`. 如果你不传递这样的事件，它将无法访问（尽管 Chrome 看起来足够聪明，可以解决这个问题，但并非所有浏览器都是 Chrome）。

**[完整的 JSBin 演示。](https://jsbin.com/bajatoxizu/1/edit?html,js,console,output)**

*StackOverflow 演示...*

```
document.getElementById('my-link').addEventListener('click', function(e) {
  console.log('Click happened for: ' + e.target.id);
});
```

```
<a href="#" id="my-link">Link</a>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T00:30:33.443

如果您愿意，可以这样使用：

```
<button id="myBtn">Try it</button>
<p id="demo"></p>

<script>
document.getElementById("myBtn").onclick=function(){displayDate()};

function displayDate()
{
    document.getElementById("demo").innerHTML=Date();
}
</script> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-30T00:26:40.953

设置属性看起来不正确。最简单的方法就是这样：

```
link.onclick = function() {
    alert('click');
}; 
```

但是[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)按照 JCOC611 的建议使用更灵活，因为它允许您将多个事件处理程序绑定到同一个元素。请记住，您可能需要回退以[`attachEvent`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)与旧 Internet Explorer 版本兼容。

# java - 将 JButtons 外观设置为 awt.Buttons 外观

> ID：13637141
> 
> 赞同：-2
> 
> 时间：2012-11-30T00:17:04.180
> 
> 标签：java, swing, awt, look-and-feel

如何让这个 JButton 看起来像 awt.Button？

```
JButton button = new JButton("bob");
button.setUI(???????); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:26:08.673

这是三个单独的 ui Lookandfeel 选项

```
UIManager.setLookAndFeel (“java.awt.swing.plaf.metal.MetalLookAndFeel” ) ;  
SwingUtilities.updateComponentTreeUI ( this ) ;
UIManager.setLookAndFeel (“java.awt.swing.plaf.windows.WindowsLookAndFeel” ) ;   
SwingUtilities.updateComponentTreeUI ( this ) ;
UIManager.setLookAndFeel (“java.awt.swing.plaf.motif.MotifLookAndFeel” ) ; 
SwingUtilities.updateComponentTreeUI ( this ) ; 
```

如果您想在您的机器上查找已安装的外观和感觉：

```
//Get Installed look and Feels
import javax.swing.UIManager;

public class InstalledLookandFeels {
public static void main(String args[]) {
    UIManager.LookAndFeelInfo laf[] = UIManager.getInstalledLookAndFeels();
    for (int i = 0, n = laf.length; i < n; i++) {
        System.out.print("LAF Name: " + laf[i].getName() + "\t");
        System.out.println("  LAF Class name: " + laf[i].getClassName());
    }
    System.exit(0);
  }
} 
```

# php - 在 php 中将文本字符串拆分为 $first 和 $last name

> ID：13637145
> 
> 赞同：62
> 
> 时间：2012-11-30T00:17:45.690
> 
> 标签：php

我正在开发一个私人消息系统，允许用户按全名搜索用户，例如：“乔治华盛顿”。

我有两个名为`$firstname`and`$lastname`的变量，搜索功能按相关性排序结果（您向该人发送了多少次消息）。如何获得将“乔治华盛顿”拆分为`$firstname="George"`和的文本字段`$lastname="Washington"`？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-11-30T01:03:21.630

最简单的方法是使用explode：

```
$parts = explode(" ", $name); 
```

获得零件后，将最后一个弹出为`$lastname`：

```
$lastname = array_pop($parts); 
```

最后，将数组的其余部分内爆为您的`$firstname`：

```
$firstname = implode(" ", $parts); 
```

例子：

```
$name = "aaa bbb ccc ddd";

$parts = explode(" ", $name);
if(count($parts) > 1) {
    $lastname = array_pop($parts);
    $firstname = implode(" ", $parts);
}
else
{
    $firstname = $name;
    $lastname = " ";
}

echo "Lastname: $lastname\n";
echo "Firstname: $firstname\n"; 
```

结果：

```
tomatech:~ ariefbayu$ php ~/Documents/temp/test.php 
Lastname: ddd
Firstname: aaa bbb ccc 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-07-10T00:00:38.250

我喜欢[cballou 的回答](https://stackoverflow.com/a/28907177/2100636)，因为努力检查是否只有名字。我想我会为其他来找我的人添加我的功能。

### 简单函数，使用正则表达式（单词字符和连字符）

*   它假设姓氏将是一个单词。
*   不对中间名做任何假设，所有都只是被分组为名字。
*   **你可以再次使用它，在“名字”结果上得到第一个和中间。**

这是代码：

```
// uses regex that accepts any word character or hyphen in last name
function split_name($name) {
    $name = trim($name);
    $last_name = (strpos($name, ' ') === false) ? '' : preg_replace('#.*\s([\w-]*)$#', '$1', $name);
    $first_name = trim( preg_replace('#'.preg_quote($last_name,'#').'#', '', $name ) );
    return array($first_name, $last_name);
} 
```

例 1：`split_name('Angeler')`输出：

```
array(
    0 => 'Angeler',
    1 => ''
); 
```

例 2：`split_name('Angeler Mcgee')`输出：

```
array(
    0 => 'Angeler',
    1 => 'Mcgee'
); 
```

例 3：`split_name('Angeler Sherlee Mcgee')`输出：

```
array(
    0 => 'Angeler Sherlee',
    1 => 'Mcgee'
); 
```

要拆分名字和中间名，

例 4：`split_name('Angeler Sherlee')`输出：

```
array(
    0 => 'Angeler',
    1 => 'Sherlee'
); 
```

* * *

### 另一个功能 - 也检测中间名

后来我决定如果可以的话，自动计算出中间名会很好，所以我写了这个函数。

```
function split_name($name) {
    $parts = array();

    while ( strlen( trim($name)) > 0 ) {
        $name = trim($name);
        $string = preg_replace('#.*\s([\w-]*)$#', '$1', $name);
        $parts[] = $string;
        $name = trim( preg_replace('#'.preg_quote($string,'#').'#', '', $name ) );
    }

    if (empty($parts)) {
        return false;
    }

    $parts = array_reverse($parts);
    $name = array();
    $name['first_name'] = $parts[0];
    $name['middle_name'] = (isset($parts[2])) ? $parts[1] : '';
    $name['last_name'] = (isset($parts[2])) ? $parts[2] : ( isset($parts[1]) ? $parts[1] : '');

    return $name;
} 
```

例 1：`split_name('Angeler Sherlee Mcgee')`输出：

```
array(
    'first_name' => 'Angeler',
    'middle_name' => 'Sherlee',
    'last_name' => 'Mcgee'
); 
```

例 2：`split_name('Angeler Mcgee')`输出：

```
array(
    'first_name' => 'Angeler',
    'middle_name' => '',
    'last_name' => 'Mcgee'
); 
```

* * *

# 另一种方式 - 无正则表达式

决定添加另一种不使用正则表达式的方式。

它还具有`return false;`不可识别的名称（null、空字符串、太多词组无法推断）。

```
<?php

function split_name($string) {
    $arr = explode(' ', $string);
    $num = count($arr);
    $first_name = $middle_name = $last_name = null;

    if ($num == 2) {
        list($first_name, $last_name) = $arr;
    } else {
        list($first_name, $middle_name, $last_name) = $arr;
    }

    return (empty($first_name) || $num > 3) ? false : compact(
        'first_name', 'middle_name', 'last_name'
    );
}

var_dump(split_name('Angela Mcgee'));
var_dump(split_name('Angela Bob Mcgee'));
var_dump(split_name('Angela'));
var_dump(split_name(''));
var_dump(split_name(null));
var_dump(split_name('Too Many Names In Here')); 
```

输出

```
Array
(
    [first_name] => Angela
    [middle_name] => NULL
    [last_name] => Mcgee
)

Array
(
    [first_name] => Angela
    [middle_name] => Bob
    [last_name] => Mcgee
)

Array
(
    [first_name] => Angela
    [middle_name] => NULL
    [last_name] => NULL
)

false

false

false 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-11-30T00:23:35.457

如果你有两个字的输入，你可以使用[`list()`](http://php.net/manual/en/function.list.php)

```
list($firstname, $lastname) = explode(" ", $string); 
```

无论如何你可以使用[`explode()`](http://php.net/manual/en/function.explode.php)

```
$words = explode(" ", $string);

$firstname = $words[0];
$lastname = $words[1];
$third_word = $words[2];
// .. 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-04-11T20:22:21.083

在我的情况下，我只需要一种简单的方法来获得第一个和最后一个，但要考虑基本的中间名：

```
$parts = explode(' ', 'Billy Bobby Johnson'); // $meta->post_title
$name_first = array_shift($parts);
$name_last = array_pop($parts);
$name_middle = trim(implode(' ', $parts));

echo 'First: ' . $name_first . ', ';
echo 'Last: ' . $name_last . ', ';
echo 'Middle: ' . $name_middle . '.'; 
```

输出：

> 第一：比利，最后：约翰逊，中间：鲍比。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-03T09:44:06.227

```
list($firstname, $lastname) = explode(' ', $fullname,2); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-30T00:22:13.897

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

```
$string = "George Washington";
$name = explode(" ", $string);
echo $name[0]; // George 
echo $name[1]; // Washington 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-03-06T20:34:09.920

## 这是一个带有一些边界检查的答案。

虽然上面的答案是正确的，但它们没有提供任何形式的边界条件检查来确保您实际上有一个有效的名称开头。您可以通过`strpos()`检查是否存在空间来解决此问题。这是一个更彻底的例子：

```
function split_name($name)
{
    $name = trim($name);
    if (strpos($name, ' ') === false) {
        // you can return the firstname with no last name
        return array('firstname' => $name, 'lastname' => '');

        // or you could also throw an exception
        throw Exception('Invalid name specified.');
    }

    $parts     = explode(" ", $name);
    $lastname  = array_pop($parts);
    $firstname = implode(" ", $parts);

    return array('firstname' => $firstname, 'lastname' => $lastname);
} 
```

值得注意的是，这假设姓氏是一个单词，而名字可以是任意组合。对于相反的效果，`array_pop()`换成`array_shift()`.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-08-23T22:26:53.957

```
function getFirstName($name) {
    return implode(' ', array_slice(explode(' ', $name), 0, -1));
}

function getLastName($name) {
    return array_slice(explode(' ', $name), -1)[0];
}

$name = 'Johann Sebastian Bach';
$firstName = getFirstName($name);
$lastName = getLastName($name);

echo "first name: $firstName\n";
echo "last name: $lastName\n"; 
```

会导致：

```
first name: Johann Sebastian  
last name: Bach 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-04-30T16:22:56.897

所以我的用例是根据未经训练的用户输入来提取医生的姓名。所以我写了这个函数来检测最后一个逗号优先的场景以及我可能遇到的各种标题和后缀。

# 假设

*   它可能需要一些微调，因为它还没有经过 beta 测试。我会尽量记住在修补功能时更新这篇文章。
*   需要为每个用例定制前缀/后缀列表，因为综合列表实际上会损害功能。（例如“Mrs. Bishop”或“Dr. Ma”为空）
*   也只提取中间名，忽略第一次遇到的中间名。

# 代码

```
function extractName($name)
{
  // Common/expected prefixes.
  $prefix_list = array(
    'mr',
    'mrs',
    'miss',
    'ms',
    'dr',
    'doctor',
  );

  // Common/expected suffixes.
  $suffix_list = array(
    'md',
    'phd',
    'jr',
    'sr',
    'III',
  );

  $parts = explode(' ', $name);

  // Grab the first name in the string.
  do
  {
    $first_name = array_shift($parts);
  } while ($first_name && in_array(str_replace('.', '', strtolower($first_name)), $prefix_list));

  // If the first name ends with a comma it is actually the last name. Adjust.
  if (strpos($first_name, ',') === (strlen($first_name) - 1))
  {
    $last_name = substr($first_name, 0, strlen($first_name) - 1);
    $first_name = array_shift($parts);

    // Only want the middle initial so grab the next text in the array.
    $middle_name = array_shift($parts);

    // If the text is a suffix clear the middle name.
    if (in_array(str_replace('.', '', strtolower($middle_name)), $suffix_list))
    {
      $middle_name = '';
    }
  }
  else
  {
    // Retrieve the last name if not the leading value.
    do
    {
      $last_name = array_pop($parts);
    } while ($last_name && in_array(str_replace('.', '', strtolower($last_name)), $suffix_list));

    // Only want the middle initial so grab the next text in the array.
    $middle_name = array_pop($parts);
  }

  return array($first_name, $last_name, substr($middle_name, 0, 1));
} 
```

# 输出

[![在此处输入图像描述](../Images/529d4dafe37fc32421dc569b6f924e87.png)](https://i.stack.imgur.com/9aeHv.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-23T07:37:46.537

如果您不需要中间名，这是一个简单的解决方案：

```
$name = "John Doe";
$name = trim($username);
$firstName = strtok($name, " "); // John
$lastName = strtok(" "); // Doe 
```

只有一个名字：

```
$name = "John";
$name = trim($username);
$firstName = strtok($name, " "); // John
$lastName = strtok(" "); // False 
```

[https://www.php.net/manual/en/function.strtok.php](https://www.php.net/manual/en/function.strtok.php)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-01-26T22:47:15.283

我还没有看到这个提议：

在我的例子中，我需要将一个名字分成两个字段，第一个和最后一个，不管这个人有多少个名字。所以我做了以下事情：

```
$fullName = "Paul Thomas Anderson";
$lastname = end(explode(" ", $fullName));
$firstname = str_replace($lastname,'',$fullName); 
```

这导致 $firstname = "Paul Thomas" 和 $lastname = "Anderson"

“end()”命令只是从分解的名称中获取最后一个数组元素，然后“str_replace”从全名中删除最后一个名称。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-23T18:00:12.587

我用这个，它甚至用and，&和/等来分割名字，那里有多个名字

```
function getNames($namestrs){

    $allnames= array();
    $namestrs = trim($namestrs);
    $namestrs = str_replace(array(',',' and ',' & ', '&amp;','/'),'|',$namestrs);

    $namestrs = explode('|',$namestrs);

    foreach($namestrs as $key=> $namestr){
        $namestr = explode(' ',trim($namestr) );

        if(count($namestr)==1 || (count($namestr)==2 && strlen(trim($namestr[1]) )<3)){ 
            $firstname = $namestr[0];
            if(isset( $namestr[1])){
            $middlename = $namestr[1];  
            }
            else{
            $middlename ='';    
            }
            $lastname='';
            $thenames = $namestrs; //print_r($thenames); //echo $key;
            $thenames = array_slice($thenames, $key+1, NULL, TRUE);  //print_r($thenames);

            foreach($thenames as $c=>$a){
                $a = explode(' ',trim($a) );// print_r( $a);

                    if(count($a)>1 && trim($lastname) ==''){
                    $lastname = $a[count($a)-1];

                }                   
            }
        }           
        else if(count($namestr)==2){
            $firstname = $namestr[0];
            $middlename = '';
            $lastname = $namestr[1];
        }
        else if(count($namestr)==3){
            $firstname = $namestr[0];
            $middlename = $namestr[1];
            $lastname = $namestr[2];
        }
        else if(count($namestr)>3){
            $firstname = $namestr[0];
            $middlename = $namestr[1];
            $lastname = str_replace(array( $firstname,$middlename ),"", implode(' ',$namestr));
            $lastname = trim($lastname);
        }

        if($lastname=='3rd')    {
        $lastname = trim($middlename) ." "  .trim($lastname) ;
        $middlename ='';
        }       

        $allnames[] = array('firstname'=>$firstname,'middlename'=>$middlename,'lastname'=>$lastname );
    }

    return $allnames;
} 
```

样本输出 Hanna 和 Mykhoylo Ilyashevych

```
Array 
```

( [0] => 数组 ( [firstname] => Hanna [middlename] => [lastname] => Ilyashevych )

```
[1] => Array
    (
        [firstname] => Mykhoylo
        [middlename] => 
        [lastname] => Ilyashevych
    ) 
```

)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-30T10:23:38.810

我发现这更好地满足了我的需求。它将第一个单词作为名字，并将其余单词作为姓氏。

```
function splitName($name) {
    $name = trim($name);
    $name = explode(' ', $name);
    $first_name = $name[0];
    unset($name[0]);
    $last_name = implode(' ', $name);
    return array($first_name, $last_name);
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-07T07:17:23.280

这是将全名拆分为名字和姓氏的一种非常简单的方法

```
$name = "John Smith";
$firstname = strtok($name, ' ');
echo trim($firstname); // Output: John

$lastname = strstr($name, ' ');
echo trim($lastname); // Output: Smith 
```

带有中间名

```
$name = "Angeler Sherlee Mcgee";
$firstname = strtok($name, ' ');
echo trim($firstname); // Output: Angeler

$lastname = strstr($name, ' ');
echo trim($lastname); // Output: Sherlee Mcgee 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-06T09:16:36.973

无需太多工作即可获得包含 2 个元素的数组：

```
function parse_name($full_name) {
        $parts = explode(" ", $full_name);

        if (count($parts) > 2) {
            $last = array_pop($parts);
            return [implode(" ", $parts), $last];
        }

        return [$parts[0], $parts[1]];
} 
```

Ex 1`parse_name("Johnny Deep");`输出：

```
array(
  0 => "Johnny",
  1 => "Deep"
); 
```

Ex 2`parse_name("Lincoln Johnny Deep");`输出：

```
array(
  0 => "Lincoln Johnny",
  1 => "Deep"
); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-11T20:35:54.603

一行代码可以像

```
return (explode(" ", $yourName))[0]; 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-02-07T17:58:57.647

这将忽略中间，只得到第一个和最后一个。

```
function split_name($name) {        
    $parts = explode(" ", $name);
    $lastname = array_pop($parts);
    while(count($parts) > 1)
    {
        array_pop($parts);
    }
    $firstname = implode(" ", $parts);

    $name = array(
            'first_name' => $firstname,
            'last_name' => $lastname,
    );

    return $name;
} 
```

# javascript - 单击链接与复制粘贴时浏览器行为的差异？

> ID：13637147
> 
> 赞同：10
> 
> 时间：2012-11-30T00:17:48.717
> 
> 标签：javascript, google-maps, dom, browser, load

我很好奇通过单击链接加载页面与将所述链接复制粘贴到浏览器栏中时，浏览器行为有什么不同。我应该知道的加载过程是否存在一般差异？

我问是因为我正在使用 Google Maps API 开发一个应用程序，在该应用程序中，用户能够使用 URL 中定义的 GPS 位置创建自定义地图链接。将链接复制粘贴到浏览器时可以正常工作；但是，如果直接单击链接，浏览器会生成“超出堆栈”异常（适用于该站点！）。

虽然我知道通常我们喜欢在 Stack Overflow 上查看代码示例，但我现在要避免这样做 - 也许如果有人知道单击和复制粘贴之间 DOM 加载过程的差异，我可以使用它来缩小范围在这个问题上，而不用与切线相关的代码进行讨论。

Firefox 和 Chrome 都会出现同样的问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:19:40.313

不要复制和粘贴链接，而是尝试右键单击并复制链接地址。基本上，网页上的链接可以显示不同。

# python - subprocess.call 的语法 (Win7 x64)

> ID：13637150
> 
> 赞同：-2
> 
> 时间：2012-11-30T00:18:43.750
> 
> 标签：python, r, python-2.7, subprocess

我正在尝试使用 .exe 调用不在本地 Python 目录中的 .exe 文件`subprocess.call()`。该命令（当我将其键入 cmd.exe 时）完全如下：`"C:\Program Files\R\R-2.15.2\bin\Rscript.exe" --vanilla C:\python\buyback_parse_guide.r`

脚本运行，执行我需要做的事情，并且我确认输出是正确的。

这是我的python代码，我认为它会做同样的事情：

```
## Set Rcmd
Rcmd = r'"C:\Program Files\R\R-2.15.2\bin\Rscript.exe"'
## Set Rargs
Rargs = r'--vanilla C:\python\buyback_parse_guide.r'

retval = subprocess.call([Rcmd,Rargs],shell=True) 
```

当我`retval`在 Python 控制台中调用时，它会返回`1`并且 .R 脚本没有运行，但我没有收到任何错误。我很确定这是一个非常简单的语法错误...帮助？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:32:10.220

引用[文档](http://docs.python.org/2/library/subprocess.html#popen-constructor)：

> 如果 shell 为 True，建议将 args 作为字符串而不是序列传递。

拆分它（手动或通过`shlex`）`subprocess`可以重新组合它们，以便外壳可以再次拆分它们是愚蠢的。

我不确定你为什么认为你需要`shell=True`这里。（如果你没有充分的理由，你通常不想要它......）但即使没有`shell=True`：

> 在 Windows 上，如果 args 是一个序列，它将按照在 Windows 上将参数序列转换为字符串中描述的方式转换为字符串。这是因为底层的 CreateProcess() 对字符串进行操作。

所以，只需给 shell 命令行：

```
Rcmd = r'"C:\Program Files\R\R-2.15.2\bin\Rscript.exe" --vanilla C:\python\buyback_parse_guide.r'
retval = subprocess.call(Rcmd, shell=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:04:45.517

根据[文档](http://stat.ethz.ch/R-manual/R-patched/library/utils/html/Rscript.html)，Rscript：

> … 是 #! 中使用的替代前端 脚本和其他脚本应用程序。
> 
> ……方便写#！脚本...（标准的 Windows 命令行没有 #! 脚本的概念，但 Cygwin shell 有。）
> 
> … 仅在具有 execv 系统调用的系统上受支持。

因此，这不是在 Windows 下从另一个程序运行 R 脚本的方法。

[这个答案](https://stackoverflow.com/questions/3412911/difference-between-r-exe-rcmd-exe-rscript-exe-and-rterm-exe)说：

> Rscript.exe 是批处理脚本的好帮手……对于其他一切，还有 R.exe

因此，除非您有充分的理由在批处理脚本之外使用 Rscript，否则您应该切换到 R.exe。

您可能想知道为什么它可以在 cmd.exe 下工作，但不能在 Python 下工作。我不知道答案，我认为不值得通过代码挖掘或尝试找出答案，但我可以做出一些猜测。

一种可能性是，当您从命令行运行时，这是一个`cmd.exe`控制终端的 a，而当您从`subprocess.call(shell=True)`or运行时`os.system`，这是一个无头的`cmd.exe`. 运行 .bat/.cmd 批处理文件可以获得 non-headless `cmd`，但`cmd`直接从另一个应用程序运行不会。R 历来处理 Windows 终端的各种复杂性，这就是为什么他们曾经有单独的 Rterm.exe 和 Rcmd.exe 工具。如今，它们都合并到了 R.exe 中，无论哪种方式都应该可以正常工作。但是，如果您尝试做文档说不做的事情，那可能没有经过测试，它可能不起作用是完全合理的。

无论如何，即使它没有记录在案，为什么它在某些情况下有效并不重要。这当然并不意味着它应该在没有记录的其他情况下工作，或者你应该试图强迫它这样做。只需做正确的事情并运行`R.exe`而不是`Rscript.exe`.

除非您的某些信息与我在文档中找到的所有内容以及我能找到的所有其他内容相矛盾，否则我将把钱放在 Rscript.exe 本身就是问题所在。

您必须阅读有关 和 之间调用差异的文档`Rscript.exe`，`R.exe`但它们并不相同。根据[介绍文档](http://cran.r-project.org/doc/manuals/R-intro.html#Scripting-with-R)，：

> 如果你只想运行一个文件 foo.R 的 R 命令，推荐的方法是使用 R CMD BATCH foo.R

根据您上面的评论：

> 当我在 cmd.exe 中键入 "C:\R\R-2.15.2\bin\i386\R.exe" CMD BATCH C:\python\buyback_parse_guide.r 时，.R 脚本运行成功。将它传递给 python 的正确语法是什么？

这取决于平台。在 Windows 上，参数列表会变成一个字符串，所以你最好只使用一个字符串，这样你就不必调试连接；在 Unix 上，一个字符串被分割成一个参数列表，所以你最好使用一个列表，这样你就不必调试连接。

由于路径中没有空格，我会去掉引号。

所以：

```
rcmd = r'C:\R\R-2.15.2\bin\i386\R.exe CMD BATCH C:\python\buyback_parse_guide.r'
retval = subprocess.call(rcmd) 
```

# asp.net - Web.config 中调试模式的默认值

> ID：13637152
> 
> 赞同：0
> 
> 时间：2012-11-30T00:18:51.247
> 
> 标签：asp.net, configuration, web-config

我有 web.config 如下

```
 <compilation targetFramework="4.5" /> 
```

这等于 debug = true 还是 debug = false。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:20:57.290

它等于发布版本 (debug = false)。

# iphone - URLWithString 返回零

> ID：13637153
> 
> 赞同：0
> 
> 时间：2012-11-30T00:18:54.117
> 
> 标签：iphone, objective-c, ios, nsfilemanager

我有这个代码：

NSString *logsPath = [dataDirectoryPath stringByAppendingPathComponent:@"Logs"];

返回：

```
/var/mobile/Applications/AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA/Documents/Mobile Documents/Data/Logs 
```

但是，这样做：

```
NSURL *logsURL = [NSURL URLWithString:logsPath]; 
```

返回值为 nil。

关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T00:22:01.417

尝试`+fileURLWithPath:`改用。

因为`+URLWithString:`需要一个协议（例如 http://、https://、file://），所以它无法构建 URL。

另一方面，`+fileURLWithPath:`只采用原始路径，并自动将 file:// 协议附加到您提供的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T00:32:12.450

实际问题是 URL 路径中的空格是非法的。-fileURLWithPath: 起作用是因为它 URI 对空间进行编码，而不是因为它添加了一个方案。

```
(lldb) po [NSURL URLWithString:@"/foo bar"]
nil
(lldb) po [NSURL URLWithString:@"/foo-bar"]
/foo-bar
(lldb) po [NSURL fileURLWithPath:@"/foo bar"]
file://localhost/foo%20bar
(lldb) po [NSURL URLWithString:@"/foo%20bar"]
/foo%20bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T07:09:09.653

`[NSURL urlWithString:logsPath]`期望 url 以 https:// 或 http:// 开头。 `[dataDirectoryPath stringByAppendingPathComponent:@"Logs"];`返回路径而不是 URL。要修复此使用`[NSURL fileURLWithPath:logsPath]`. 这会将 file:// 添加到 URL 的开头，使其工作。您的完整代码将如下所示：

```
NSString *logsPath = [dataDirectoryPath stringByAppendingPathComponent:@"Logs"];
NSURL *logsURL = [NSURL fileURLWithPath:logsPath]; 
```

祝你好运！

# sql-server-2008-r2 - 多列排序......虽然不是标准排序

> ID：13637155
> 
> 赞同：2
> 
> 时间：2012-11-30T00:19:05.307
> 
> 标签：sql-server-2008-r2, multiple-columns

这是我的第一篇文章，我希望有人可以帮助我。我绝对不是 DBA，但我已经在 MSSQL 和 MySQL 方面做了很多工作。但是，我似乎无法弄清楚这一点。我知道如何按多列排序，但在这种情况下，标准的“ORDER BY COL1、COL2、COL3”答案不会让我按照我希望它出现在网络应用程序中的顺序获取数据我'米楼。这是在 MSSQL Express 2008 R2 中。

我的查询并不是非常复杂，因为它包含一些简单的连接来获取一些额外的数据。它确实在同一实例中的几个数据库之间运行。查询的基本内容如下：

```
select rt.TotalsID, rl.LookupName, rt.RegisterNum, cin.userFirstName, rt.CashInDate 
from [RegisterApp].[dbo].[Reg_Totals] rt 
inner join [RegisterApp].[dbo].[Reg_Lookup] rl on rl.LookupID = rt.StoreID 
inner join [KR_Users_Groups_Permissions].[dbo].[tbl_user] cin on cin.userId = rt.CashInUserID 
inner join [KR_Users_Groups_Permissions].[dbo].[tbl_user] cout on cout.userId = rt.CashOutUserID 
```

我想按 rt.CashInDate 排序结果，然后是 rl.LookupName，然后是 rt.RegisterNum。但是，正如我所说，仅标准的多列 order by 语句并不能满足我的需求。由于有问题的数据可以按任何顺序输入，因此以这种方式排序的结果确实会首先按最近的日期排序（rt.CashInDate desc），但随后 rl.LookupName 和 rt.RegisterNum 值受时间的影响在第一列。我希望在结果中看到的是，对于每一天， rl.LookupName 然后按升序排序，然后对于其中的每个 rl.LookupName，每个 rt.RegisterNum 结果也按升序排序。

有一个标准

```
order by rt.CashInDate desc, rl.LookupName, rt.RegisterNum 
```

结果取决于每行的 rt.CashInDate 是什么。例如，昨天的结果在上面的 order by 语句中如下所示：

```
TotalsID  LookupName      RegisterNum     userFirstName   CashInDate
      12  Polyclinic      RG2             Joshua          2012-11-28 10:18:00
      13  Polyclinic      RG3             Joshua          2012-11-28 10:18:00
      11  Polyclinic      RG1             Joshua          2012-11-28 09:56:00
      10  Downtown        RG1             JJ              2012-11-28 08:22:00 
```

我想看到的是这样显示的数据：

```
TotalsID LookupName  RegisterNum userFirstName  CashInDate
10       Downtown    RG1         JJ             2012-11-28 08:22:00
11       Polyclinic  RG1         Joshua         2012-11-28 09:56:00
12       Polyclinic  RG2         Joshua         2012-11-28 10:18:00
13       Polyclinic  RG3         Joshua         2012-11-28 10:18:00 
```

当然，对于昨天的结果，rt.TotalsID 是有序的，但也并非总是如此。例如，以下是 26 日的结果，它们按照我希望看到的顺序出现：

```
TotalsID  LookupName  RegisterNum userFirstName  CashInDate
5         Downtown    RG1         JJ             2012-11-26 08:27:00
2         Polyclinic  RG1         Joshua         2012-11-26 07:33:00
3         Polyclinic  RG2         Joshua         2012-11-26 07:33:00
4         Polyclinic  RG3         Joshua         2012-11-26 07:33:00 
```

请注意，在这种情况下，rt.TotalsID 不按顺序排列。

我一直在努力打击谷歌，但运气并不好。也许我只是没有正确地表达我的搜索。我希望这个请求是可以理解的，并且有人可以提供帮助。最后，按这个顺序取回数据并不是绝对必要的，但这是我真正想看到的。

提前感谢您的任何帮助和建议！

玛拉基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:00:11.153

来自@Nikola 的评论：

您只需要按日期部分排序`CashInDate`：

`ORDER BY CAST(rt.CashInDate AS DATE) desc, rl.LookupName, rt.RegisterNum`

# apache - .htaccess 未加载，即使在 httpd.conf 更改后

> ID：13637156
> 
> 赞同：2
> 
> 时间：2012-11-30T00:19:22.507
> 
> 标签：apache, .htaccess, rewrite

前几天我试图摆弄 wordpress 永久链接，但它们没有工作。（由于未读取嵌套 .htaccess 下的 .htaccess 而返回 404）经过一番谷歌搜索后，我决定我需要 .htaccess `AllowOverride All`。（我在本地服务器上使用 Apache）。

我去了我的 httpd.conf 并将`AllowOverride`我能找到的所有内容都更改为`All`. 我也取消了该`rewrite_module`行的注释。我保存并重新启动了服务器。.htaccess 仍然没有回来。整个问题是让这个文件加载，我很确定一切都会好起来的，但由于我不是 Apache conf 文件专家，我不知道我做错了什么。

# linux - 在 linux bash 脚本中恢复

> ID：13637157
> 
> 赞同：3
> 
> 时间：2012-11-30T00:19:24.187
> 
> 标签：linux, bash, scripting

需要帮助。这是我用来将文件从垃圾箱目录恢复到其原始位置的脚本。它之前位于根目录中。然后使用其他脚本将其“删除”并存储在垃圾箱目录中，并且使用以下命令将其以前的位置记录在存储文件中：

```
case $ans in
    y) echo "`readlink -f $1`" >>home/storage & mv $1 /home/dustbin ;;
    n) echo "File not deleted." ;;
    *) echo "Please input answer." ;;
esac 
```

因此，当使用下面的脚本时，我应该恢复已删除的文件，但出现以下错误。

```
#!/bin/sh

if [ "$1" == "-n" ] ; then
    cd ~/home/dustbin
    restore="$(grep "$2" "$home/storage")"
    filename="$(basename "$restore")"
    echo "Where to save?"
    read location
    location1="$(readlink -f "$location")"
    mv -i $filename "$location1"/$filename
else
    cd ~/home
    storage=$home/storage
    restore="$(grep "$1" "$storage")"
    filename="$(basename "$restore")"
    mv -i $filename $restore
fi 
```

给出的错误 -`mv: missing file operand`

编辑：

好吧，我把我的脚本改成了这样。

```
#!/bin/sh

if [ $1 ] ; then

    cd ~/home
    storage=~/home/storage
    restore="$(grep "$1" "$storage")"
    filename="$(basename "$restore")"
    mv -i "$filename" "$restore"

fi 
```

我仍然得到错误：

mv：无法统计“文件名”：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T08:05:50.350

你做

```
cd ~/home 
```

和

```
mv -i "$filename" "$restore" 
```

而该文件位于垃圾箱目录中，因此找不到。做任何一个

```
cd ~/home/dustbin 
```

或者

```
mv -i "dustbin/$filename" "$restore" 
```

或者只是做

```
mv -i "~/home/dustbin/$filename" "$restore" 
```

并删除`cd`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:27:57.617

在将其用作以下内容之前，您可能需要进行一些基本的错误处理以查看是否`$filename`存在`mv`：

例如，之前：

```
mv -i $filename "$location1"/$filename 
```

你可能应该做一个：

```
if [[ -e "$filename" ]]; then
    # do some error handling if you haven't found a filename
fi 
```

该`-e`选项检查下一个参数是否`[[`引用了一个存在的文件名。如果是，则评估为真，否则为假。（或者，用于`-f`检查它是否是常规文件）

或者至少：如果 [[ -z "$filename" ]]; 然后 # 如果你还没有找到文件名 fi，做一些错误处理

该`-z`选项检查下一个参数是否`[[`为空字符串。如果是，则评估为真，否则为假。

类似的评论：`mv -i $filename $restore`在你的`else`条款中。

[这是测试选项的列表。](http://en.wikipedia.org/wiki/Test_%28Unix%29)

# php - 带有 oAuth 的 Google+ API 按钮

> ID：13637158
> 
> 赞同：1
> 
> 时间：2012-11-30T00:19:24.587
> 
> 标签：php, google-api, google-plus

我正在制作 PHP 应用程序，它将加载特定朋友的帖子，然后添加添加他帖子的功能，类似于网站上可用的 Google+ 按钮......

我找到了带有 JSON 的 Google+ 按钮发布链接：

`"method":"pos.plusones.insert", "id":"post_id"`

但我无法对此进行 PHP oAuth 授权...我尝试了**access_token**和**id_token**

`Authorization: GoogleLogin auth=token`

但两者都返回错误错误的身份验证令牌......

有没有办法授权或添加这个加号以使用 oAuth 令牌发布？

我知道谷歌有新的 API，但是有什么方法可以提出这个请求吗？

谢谢！

**更新**

代码：

```
$like = 'POST ID';
$key = json_decode($_SESSION['access_token'], true);

$headers = array('Content-Type: application/json; charset=UTF-8', 'Authorization: GoogleLogin auth=' .$key['access_token']. '');
$url = 'https://clients6.google.com/rpc?key=XXXXXXXXXXXXXXXX';
$post_data = '[{"method":"pos.plusones.insert","id":"' .$like. '",
                "params":{"cdx":"4f79f","id":"https://www.google.com/","source":"widget","track":"[[[null,[1,1618239,[],1,90]],[[null,null,[]]]]]","container":"","abtk":"","userId":"@viewer","groupId":"@self"},
                "jsonrpc":"2.0",
                "key":"pos.plusones.insert",
                "apiVersion":"v1"}]';

$fr = curlData($url, $headers, $post_data); //function to send CURL Post request
echo $fr; 
```

它返回：

```
[
 {
  "error": {
   "code": 401,
   "message": "Token invalid - Invalid AuthSub token.",
   "data": [
    {
     "domain": "global",
     "reason": "authError",
     "message": "Token invalid - Invalid AuthSub token.",
     "locationType": "header",
     "location": "Authorization"
    }
   ]
  },
  "id": "POST ID"
 }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:07:46.130

这是行不通的。

+1 按钮使用的 API 不是可公开访问的 API。由于它不是公开的，因此您无法获取允许您的代码代表用户插入 +1 的访问令牌。插入 +1 的唯一方法是使用[+1 按钮](https://developers.google.com/+/plugins/+1button/)。

Google API 控制台上的 Google+ API 切换实际上是指[公共数据 API](https://developers.google.com/+/api/)。

# ruby-on-rails - 如何在保存时获取更改的值

> ID：13637159
> 
> 赞同：0
> 
> 时间：2012-11-30T00:19:28.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oop

试图在保存时从对象中获取以前的值。想想这个场景：

```
@object = {:name => 'Dan', :occupation => '学生'}
@object[:occupation] = '全职员工'
@object.value_was[:occupation] # => '学生'

```

我希望没有方法是可以理解的`value_was`。此外，我想对模型对象做同样的事情：

```
@student = Student.find(1)
@student.occupation = '全职员工'
@student.save
@student.value_was(:occupation) # => '学生'

```

任何帮助将不胜感激。

那真的很有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T00:23:12.113

ActiveModel 包括对“[脏字段标记](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)”的支持，它保留更改字段的前后状态。

您可以使用`@student.occupation_was`获取 的先前值`occupation`，并`@student.occupation_changed?`获取该值是否已更改。

这仅在保存之前有效，因为保存会重置值的更改状态。但是，如果您需要在保存记录后使用它，您可以在 before_save 回调中捕获此数据。`#changed_attributes`例如，您可以通过复制a来保留所有更改`before_save`，然后对其进行查询。

# php - 如何使用 ajax onclick 更改网页的多个部分？

> ID：13637163
> 
> 赞同：3
> 
> 时间：2012-11-30T00:20:09.237
> 
> 标签：php, javascript, ajax

在我的网站中，我将有一个“浏览目录”按钮，单击该按钮将更改页面的几个元素以显示目录元素。我不想重新加载整个页面，因为导航栏和新闻提要等几个元素将保持不变。

我的问题是如何使用 ajax onclick 更改几个不同的 div？

本质上，我不确定如何在页面的不同 div 中放置几个​​不同的组件。

而且我知道同时进行 ajax 调用是有限制的，所以我确定正确的方法不是为我的每个 div 进行唯一的 ajax 调用。

一点指导会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:30:08.793

使用 jQuery，您可以获得每个需要更新的块的 json 元素数组：

**在您的 html 页面中：**

```
$.get("page.php?id=42",
   function(result){
     $('#title').text(result['title']);
     $('#description').text(result['description']);
     $('#price').text(result['price']);
   }, "json"); 
```

**在 page.php 中：**

```
$result = array('title' => 'foo', 'description' => 'bar', 'price' => 3);
echo json_encode($result);
header('Content-Type: application/json');
die(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:40:19.843

我不确定发送几个 ajax 请求是否是正确的决定。只需创建一个具有唯一属性值的请求，其形状使服务器知道您需要哪些块。在服务器端，所有需要的块在 json 对象中连接，并将其返回给客户端。只是在应该的块上解析对象之后。例如

```
$.ajax({
  url : 'http://your.server.doment',
  data : 'block[]=1&block[]=7&block[]=15',
  type : 'post',
  dataType : 'json',
  success : function (object){
    for( el in object) { $('#block_'+el).html(object[el]); }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:45:26.163

你可以使用 json

例子

php请求ajax

```
$div1="<table><tr><td>x</td></tr></table>";
$div2="<table><tr><td>x</td></tr></table>";
$div3="<table><tr><td>x</td></tr></table>";

$json = '{"div1":"'.$div1.'","div2":"'.$div2.'","div3":"'.$div3.'"}';

return $json; 
```

使用 jquery

```
$.ajax({url: 'ajax/test.php',
     success: function(data) {

      var obj = JSON.parse(data);

       $("mydiv1").html(obj.div1);
       $("mydiv2").html(obj.div2);
       $("mydiv3").html(obj.div3);

 }}); 
```

如果 parce 函数有错误，请替换空格

例子

```
 $arr =array("\n","\t");
    $div1= str_replace($arr,"",$div1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T00:51:00.940

实际上，页面上并行更新的十个或更多元素（每个由单独的 ajax 更新）不会产生如此大的差异（除非您可以将您的网站部署到生产环境中对其进行测试并证明我错了）。

尽管如此，如果您希望将所有数据交换压缩到一个单一的请求/响应 ajax 调用 - 这很有可能，但确实需要在服务器端具有一定的灵活性（请参阅[http://php.net/manual/en/function. json-encode.php](http://php.net/manual/en/function.json-encode.php)）。即一种可能的解决方案是在服务器端生成 json 响应，生成一个键值对（JSON - javascript {} 对象），其中键是元素的 id，值是（新）html。

有大量的 ajax JS 框架，如 jQuery、prototype、dojo 等（我将为此选择 jQuery）。

**阿贾克斯请求**

```
$.ajax({
...
}) 
```

见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

**服务器响应**

```
// Assume we got
// var data = {key1:'html1',key2: 'html2'};

// Ajax handle can look like
success(data) {
    $.each(data, function(key, val){
        //console.log(key, val);
        // Do some checks here.. But key should indicate #id of html elements
        $(key).empty().append(html);
    });
} 
```

这是一个基本的大纲，但应该让你朝着正确的方向前进。

# symfony - Symfony2 作业队列还是并行处理？

> ID：13637182
> 
> 赞同：3
> 
> 时间：2012-11-30T00:22:26.363
> 
> 标签：symfony, parallel-processing, queue

有谁知道如何通过作业队列或并行处理在后台运行多个进程。

我有许多维护更新需要时间来运行，并希望在后台执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:28:24.343

我会推荐[Gearman](http://gearman.org)服务器，它被证明非常稳定，它完全在 Symfony2 之外，并且您必须启动并运行服务器（不知道您的托管选项是什么），但它可以完美地分配工作。在最精简的版本中，它只是将所有作业保存在内存中，但您可以将其配置为使用 sqlite 数据库作为备份，因此无论出于何种原因服务器重新启动或 gearman 守护程序中断，您都可以重新启动它，您的作业将被保留. 我知道它已经在非常大的负载下进行了测试（每秒增加 1k 个作业），并且它站稳了脚跟。现在可能更稳定了，我是根据 2 年前的经验说的，当时我们通过 Gearman 将 ZF 应用程序中的一些长期运行的任务卸载到后台处理。从下图可以看出它是如何工作的：

![在此处输入图像描述](../Images/5c5d8c730bb6c53bef1e702ac447c3c4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T14:54:10.417

结帐[RabbitMq](https://github.com/videlalvaro/rabbitmqbundle)。根据 knpbundles.com，这是最受欢迎的选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T14:47:33.153

看看[http://github.com/mmoreram/rsqueue-bundle](http://github.com/mmoreram/rsqueue-bundle)

使用 Redis 作为队列核心并将被维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-22T10:44:54.600

看看[入队](https://github.com/php-enqueue/enqueue-dev)库。有很多[传输方式](https://github.com/php-enqueue/enqueue-dev/tree/master/docs/transport)（AMQP、STOMP、AmazonSQS、Redis、Filesystem、Doctrine DBAL 等等）可供选择。易于使用且功能丰富。这对于简单的作业队列就足够了，但如果您需要更复杂的东西，请查看[enqueue/job-queue](https://github.com/php-enqueue/enqueue-dev/blob/master/docs/job_queue/run_unique_job.md)。它可以运行一个独占的作业（在给定的时间只运行一个作业）或具有子作业的作业，或者完成后有事要做的作业。

当然，它有[一个捆绑](https://github.com/php-enqueue/enqueue-dev/blob/master/docs/bundle/quick_tour.md)包

# perl - 如何解码 Acme::Eyedrops

> ID：13637184
> 
> 赞同：0
> 
> 时间：2012-11-30T00:22:51.697
> 
> 标签：perl

如何从[Acme::Eyedrops](http://search.cpan.org/dist/Acme-EyeDrops/lib/Acme/EyeDrops.pm)混淆脚本中获取可读代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:34:05.163

从文档来看，它看起来[`sightly_to_ascii`](http://search.cpan.org/dist/Acme-EyeDrops/lib/Acme/EyeDrops.pm#Function_Reference)可能有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T00:55:21.117

使用 B::Deparse（如 中`perl -MO=Deparse proggram.pl`）和/或将 eval 替换为 print，具体取决于滴眼液生成的模式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T01:30:59.170

迟到的答案，但对于任何通过谷歌找到这个的人来说，从 SourceForge 安装[PerlTidy](http://perltidy.sourceforge.net/ "变态")然后运行以下命令行对我来说就像一个魅力：

`perl -MO=Deparse /path/to/ObfuscatedScript.pl | perltidy > new.pl`

这创建了一个`new.pl`在我当前目录中调用的文件，其中 acme::eyedrops 代码已去混淆。

# php - mysql查询的php日期格式

> ID：13637186
> 
> 赞同：-1
> 
> 时间：2012-11-30T00:23:11.703
> 
> 标签：php

我似乎找不到这个答案。

以下格式的日期的 php 代码是什么：
2012-11-29

```
$date = new DateTime();
$date = $date->format('F j, Y'); 
```

这给了我 2012 年 11 月 29 日

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:26:06.710

```
$date = new DateTime();
$date = $date->format('Y-m-d'); 
```

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# jquery - 仅在触发先前的命令后执行

> ID：13637189
> 
> 赞同：0
> 
> 时间：2012-11-30T00:23:41.043
> 
> 标签：jquery

一旦前一个命令被触发并完成，我如何确保这些命令中的每一个都被触发？

```
$('.thumb').unwrap('.wrapper')
$('.thumb').wrapAll("<div class=\"page\"></div>");
$('body').prepend('<div class="wrapper"></div>');
wrap_thumbs(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:28:58.233

这些将已经按顺序执行；浏览器中的 Javascript 是单线程的，因此每个操作都必须在下一个操作执行之前完成。

# objective-c - 在 3D 空间中旋转时隐藏 UIViews 背面可见性 - Objective C

> ID：13637197
> 
> 赞同：1
> 
> 时间：2012-11-30T00:25:00.393
> 
> 标签：objective-c, uiview, catransform3drotate

在 CSS3 中有一个名为`backface-visibility`( [Mozilla Developer Network's description](https://developer.mozilla.org/en-US/docs/CSS/backface-visibility) )的属性

在 Cocoa Touch/Objective C 中是否有类似的东西，它允许我在 3D 空间中旋转它时隐藏 UIView 的内容（除了它的背景颜色）？

（这里还有一个 HTML5 演示：[CSS3 demo](http://css-tricks.com/almanac/properties/b/backface-visibility/)）

我真的不想在动画中硬编码来隐藏/淡出/在子视图中！

谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:32:23.760

将`doubleSided`视图层的属性设置为`NO`。默认值为`YES`。

# ruby-on-rails - 我应该如何将抓取的 HTML 存储在我的 web 应用程序中？

> ID：13637198
> 
> 赞同：1
> 
> 时间：2012-11-30T00:25:01.143
> 
> 标签：ruby-on-rails, screen-scraping, web-scraping

我是 Web 开发（和一般开发）的新手，我正在构建一个从第三方网站抓取数据的 Rails 应用程序。我正在使用 Nokogiri 解析我感兴趣的特定 html 元素，这些元素存储在数据库中。

但是，我想保存我正在抓取的整个页面的 html 作为备份，以防我改变了我想要的信息类型以及网站删除该网站（或更新它）的想法。

存储归档 html 的最佳做法是什么？我应该将其提取为字符串并将其放入数据库中，将其写入日志或文本文件，还是什么？

**编辑：**
我应该澄清一下。我每周爬取大约 10K 个网站，如果我重新定义我想要的数据类型，我预计只需要一次性访问备份。

举个例子，如果正在爬取联合国关于国家人口数据的数据，最初是在查看年龄分布，但后来意识到我也想获得性别分布，我想回到我所有的 HTML 档案并提取数据出去。我预计这种情况不会发生太多（可能每月 1-3 次），但当它发生时，我希望在 10K-100K 列表中检索它。这项任务应该只需要几个小时来完成大约 10K 条记录，所以我猜每个网站获取最多需要一秒钟。我不需要任何版本控制功能。希望这可以澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:46:35.377

我不确定这种情况下的“最佳实践”是什么（它会因项目的具体情况而异），但作为起点，我建议创建一个模型，其中包含 URL 的字符串字段和文本字段对于 HTML 本身，并将页面保存在那里。您可以为 URL 添加唯一性验证器，以确保您不会两次存储相同的 HTML。

然后，您可以选择添加模型方法以从 HTML 文本启动 nokogiri 文档，从而使用 HTML 字符串作为“主”记录（在数据库中）并在需要时动态生成 nokogiri 文档。但是，正如@dave-newton 指出的那样，这在很大程度上取决于您将要使用此 HTML 做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:07:03.820

我强烈建议将其保存到与您正在抓取的数据相同的数据库中的表中。为什么要改变有效的方法？像往常一样保留所有内容，或者将其全部写入单独的数据库以防万一，并保留某种形式或参考以将抓取的数据链接到备份以防万一。

# c# - 为什么在 Windows 7 而不是 Windows 8 上检测到 FileSystemWatcher 属性更改？

> ID：13637200
> 
> 赞同：37
> 
> 时间：2012-11-30T00:25:06.510
> 
> 标签：c#, .net, windows-8

我有一些代码使用 FileSystemWatcher 来监视我的应用程序之外的文件更改。

在 Windows 7 上，使用 .NET 4，下面的代码将在我的应用程序运行时检测文件何时被编辑并保存在记事本等应用程序中。但是，此逻辑在 Windows 8 上使用 .NET 4 时不起作用。具体而言，FileSystemWatcher 的 Changed 事件永远不会触发。

```
public static void Main(string[] args)
{
    const string FilePath = @"C:\users\craig\desktop\notes.txt";

    if (File.Exists(FilePath))
    {
        Console.WriteLine("Test file exists.");
    }

    var fsw = new FileSystemWatcher();
    fsw.NotifyFilter = NotifyFilters.Attributes;
    fsw.Path = Path.GetDirectoryName(FilePath);
    fsw.Filter = Path.GetFileName(FilePath);

    fsw.Changed += OnFileChanged;
    fsw.EnableRaisingEvents = true;

    // Block exiting.
    Console.ReadLine();
}

private static void OnFileChanged(object sender, FileSystemEventArgs e)
{
    if (File.Exists(e.FullPath))
    {
        Console.WriteLine("File change reported!");
    }
} 
```

我知道我可以将 NotifyFilter 更改为也包含 NotifyFilters.LastWrite，这可以解决我的问题。但是，我想了解**为什么此代码在 Windows 7 上有效，但现在无法在 Windows 8 上触发 Changed 事件**。我也很想知道在 Windows 8 中运行时是否有办法恢复我的 Windows 7 FileSystemWatcher 行为（不更改 NotifyFilter）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-16T21:01:12.477

到处评论太多了，我只是添加一个答案来验证您是否知道以下问题：

*   [让 filesystemwatcher 事件在主 UI 线程上发生](https://stackoverflow.com/questions/22465167/get-filesystemwatcher-events-to-occur-on-main-ui-thread/22491246#22491246)（寻找 Hans Passant 的答案）
*   [WPF - 无法更改 OnChanged 方法中的 GUI 属性（从 FileSystemWatcher 触发）](https://stackoverflow.com/questions/20575277/wpf-cannot-change-a-gui-property-inside-the-onchanged-method-fired-from-files/20575427#20575427)

**显然问题是事件是在后台线程上引发的，您需要将调用编组回 UI 线程。**

我在使用 FileSystemWatcher 类时遇到了很多麻烦，因此决定不使用它，正如您在此处所描述的那样：[https](https://stackoverflow.com/a/22768610/129130) ://stackoverflow.com/a/22768610/129130 。但是，我遇到的问题可能是由于线程同步问题和/或硬件问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:19:57.390

在编辑文件之前/之后检查文件上的存档位。您的代码仅搜索属性更改，所以我猜测 Windows 7 正在更新文件上的存档位，而 Windows 8 没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:54:56.020

FileSystemWatcher 是出了名的不可靠。尝试订阅所有事件并查看其他事件是否触发。您可以尝试的一件事是使用计时器定期检查文件是否有更改，例如每两秒一次，而不是使用 FileSystemWatcher。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-19T17:14:06.103

我有同样的问题。这门课似乎可以在我的 Windows 8 电脑上运行：

[https://stackoverflow.com/a/23743268/637142](https://stackoverflow.com/a/23743268/637142)

我使用该类的原因是它在 Windows 7 和 Windows 8 上的行为相同。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-11T06:27:50.190

我不知道为什么，但我发现在 Windows 8.1 下

FileSystemWatcher 类的 NotifyFilters.LastWrite（更改事件）将触发

*   如果我监视桌面内的目录（C:\Users\[user]\Desktop）。

事件不会触发

*   如果我监视程序文件目录（C:\Program Files (x86)）

可能与权限有关，但我不知道如何配置，这两个条件都是在管理员下运行

# api - Youtube iFrame javascript API onYouTubeIframeAPIReady 未触发

> ID：13637205
> 
> 赞同：3
> 
> 时间：2012-11-30T00:25:45.523
> 
> 标签：api, iframe, youtube

这是来自 Youtube API 文档：

“如入门部分所述，您可以自己创建标签，而不是在您的页面上编写一个空元素，然后播放器 API 的 JavaScript 代码将替换为一个元素。”

但我无法让 API 回调我的 javascript。任何帮助都会很棒。

这是我的 HTML 代码：

```
 <iframe id="player" type="text/html" width="640" height="360"src="http://www.youtube.com/embed/1_QO8LoGNpc?enablejsapi=1" frameborder="0"></iframe> 
```

JAVASCRIPT：

```
<script>
    function onYouTubeIframeAPIReady() {
        alert("hey");
        player = new YT.Player('player', {
         // height: '720',
         // width: '1280',
         // videoId: '1_QO8LoGNpc',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    }
</script> 
```

我可以使用 javascript 创建 iframe，但不能在页面上设置 iframe。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T08:31:07.157

应在加载 [https://www.youtube.com/iframe_api](https://www.youtube.com/iframe_api)之前定义函数***onYouTubeIframeAPIReady()***。

这是想法：

```
<iframe id="player" type="text/html" width="640" height="360"src="http://www.youtube.com/embed/1_QO8LoGNpc?enablejsapi=1" frameborder="0"></iframe> 

    <script>
            function onYouTubeIframeAPIReady() {
            alert("hey");
            player = new YT.Player('player', {
             // height: '720',
             // width: '1280',
             // videoId: '1_QO8LoGNpc',
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
        }
    </script>

    <script src="https://www.youtube.com/iframe_api"></script> 
```

**为什么？**因为**iframe_api**加载后会调用这个函数。在您的情况下， iframe_api 之前已加载。

此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T17:00:23.547

但是您的代码有效。在这里看到它：http: [//jsfiddle.net/aXLA2/](http://jsfiddle.net/aXLA2/)

```
<iframe id="player" type="text/html" width="640" height="360"src="http://www.youtube.com/embed/1_QO8LoGNpc?enablejsapi=1" frameborder="0"></iframe> 

<script src="https://www.youtube.com/iframe_api"></script> 
```

# c - 僵尸进程在代码中创建，在另一部分被杀死

> ID：13637206
> 
> 赞同：0
> 
> 时间：2012-11-30T00:25:55.243
> 
> 标签：c, linux, process, zombie-process

我想写一个“僵尸创造者”和“僵尸终结者”。要点是我想在一部分中创建僵尸并在代码的另一部分中终止它们。我正在使用 C。

例子：

```
create_zombie(); //let's say it's a spawn, using fork etc.

/* a houndred lines below */

kill_zombie(PID); // PID is determinated by user, I want to leave him the choice 
```

我知道如何使用 fork(), if .. else 来做到这一点，但这不是重点。我正在寻找某种遥控器。那可能吗？让他睡很长时间可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:08:38.997

我假设是 Linux，但该过程在其他操作系统上应该类似。您想查看通常在头文件`kill()`中声明的函数。`signal.h`这将允许您从僵尸杀手向特定 PID 发送信号。最简单的方法是向您的僵尸进程发送终止信号 ( `SIGKILL`)。`SIGKILL`不能被捕获或忽略，并立即杀死一个进程死亡。

如果您需要在僵尸进程中进行一些清理，您可以使用该`signal()`函数创建一个信号处理程序。这将允许您指定在进程接收到信号时要调用的函数。此函数将实现您的清理代码，然后`exit()`.

在 linux 上，你的 shell 应该有一个模仿`kill()`. 语法通常是`kill -s 9 PID`. 这将向进程 PID 发送一个 SIGKILL（信号号 9）。

我希望这个答案能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:45:34.343

当你 fork 一个进程时，fork 在子进程中返回 0，在父进程中返回子进程 id。您可以将它们保存在数组中，将它们写入文件，或将它们写入管道，并且在需要之前不要“打开”另一端。

# regex - 使用 javascript 解析控制台输出文本

> ID：13637212
> 
> 赞同：0
> 
> 时间：2012-11-30T00:26:39.830
> 
> 标签：regex, parsing, text, console

解析控制台输出的最佳方法是什么？

```
"data": [
    "  TCP    127.0.0.1:3000         127.0.0.1:9595         HERGESTELLT     4432",
    "  TCP    127.0.0.1:3000         127.0.0.1:9596         HERGESTELLT     4432",
    "  TCP    127.0.0.1:9584         127.0.0.1:3000         WARTEND         0",
    "  TCP    127.0.0.1:9585         127.0.0.1:3000         WARTEND         0",
    "  TCP    127.0.0.1:9595         127.0.0.1:3000         HERGESTELLT     4588",
    "  TCP    127.0.0.1:9596         127.0.0.1:3000         HERGESTELLT     4588",

  ] 
```

我需要为每个项目拆分为子数组的修剪字符串。问题是每个项目的长度不同。我想解析它的最好方法是正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:41:34.330

```
data.item.split(/  +/) 
```

String.split 接受正则表达式 ^^

# delphi - Delphi -> 字节数组到 LongInt

> ID：13637214
> 
> 赞同：1
> 
> 时间：2012-11-30T00:26:42.733
> 
> 标签：delphi, move

我想从

```
Source : Array[0..500] of Byte; 
```

在哪里

```
c : integer; // Start Point 
```

至

```
v : LongInt; 
```

但

```
Move(Source[c], v, 4); 
```

只给我 1 个字节。我的错在哪里？

再次感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T00:37:15.937

这个来源工作得很好。`c`但是，如果只有第一个字节（索引处的那个）包含除 之外的值，它可能看起来只返回一个字节`0`。

Sertac Akyuz 已经提出了这种替代方案，也可以正常工作：

```
v := PLongInt(@Source[c])^; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T00:39:04.603

我怀疑移动失败了：

试试这个代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  source: array[0..500] of Byte;
  C: Integer;
  V: LongInt;
begin
  source[0] := $55;
  source[1] := $55;
  source[2] := $55;
  source[3] := $55;
  C := 0;
  Move(Source[C], V, SizeOf(V));
  ShowMessage(IntToStr(V));
end; 
```

您将在消息中看到数字 1431655765 ($55555555)。

# ruby-on-rails-3 - Omniauth + Linkedin (invalid_signature)

> ID：13637217
> 
> 赞同：-1
> 
> 时间：2012-11-30T00:27:52.077
> 
> 标签：ruby-on-rails-3, omniauth, linkedin

我正在使用带有omniauth 的facebook 和linkedin 身份验证。我已经替换了 facebook 和 linkedin 的密钥（由 facebook 和 linkedin 提供）。Facebook 像冠军一样工作，linkedin 给了我一个 invalid_signature 错误，即使我使用的是提供的 api 凭据。Linkedin api有什么我缺少的吗？有没有人遇到类似的问题并提出解决方案。

我安装了以下omniauth gem

*   宝石'omniauth'
*   宝石'oauth2'
*   宝石'omniauth-twitter'
*   宝石'omniauth-facebook'
*   宝石'omniauth-linkedin'

在 /config/initializer/omniauth.rb 我有

```
Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, 'XXX', 'XXX', :strategy_class => OmniAuth::Strategies::Facebook
    provider :linkedin, 'XXX', 'XXX'  
end 
```

我也试过

```
Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, 'XXX', 'XXX', :strategy_class => OmniAuth::Strategies::Facebook
    provider :linkedin, 'XXX', 'XXX', :strategy_class => OmniAuth::Strategies::LinkedIn  
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T15:11:23.793

您现在可能已经解决了这个问题，但对于未来的搜索者来说，`omniauth-linkedin-oauth2`宝石就是您想要的：[https ://github.com/decioferreira/omniauth-linkedin-oauth2/](https://github.com/decioferreira/omniauth-linkedin-oauth2/)

# html - 你如何让一个 div “tabable”？

> ID：13637223
> 
> 赞同：115
> 
> 时间：2012-11-30T00:28:46.850
> 
> 标签：html, css, xhtml

我有按钮是 div 元素，我想制作它们，以便用户可以按下键盘上的 tab 键并在它们之间移动。我已经尝试将他们的文本包装在锚标签中，但它似乎不起作用。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-11-30T00:32:49.247

为您的元素添加`tabindex`属性。`div`

例子：

```
<div tabindex="1">First</div>
<div tabindex="2">Second</div> 
```

根据 steveax 的评论，如果您不希望制表符顺序偏离页面中元素的位置，请将其设置`tabindex`为`0`：

```
<div tabindex="0">First</div>
<div tabindex="0">Second</div> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-05T22:37:34.173

对于那些感兴趣的人，除了接受的答案之外，您还可以添加以下 jquery 以在您对其进行选项卡时更改 div 样式，并处理 Enter 和 Space 以触发点击（然后您的点击处理程序将完成剩下的工作）

```
$(document).on('focus', '.button',function(){
    $(this).css('border','1px dotted black')
});
$(document).on('keyup', '.button',function(e){
    if(e.which==13 || e.which==32)
        $(this).click()
}); 
```

我敢肯定有人已经把它做成了一个 jq 插件 $().makeTabStop

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-14T02:28:23.220

将`tabindex="0"`属性添加到您希望可选项卡的每个 div。然后使用 CSS 伪类 :hover 和 :focus，例如向应用程序用户表明 div 处于焦点和可点击状态。使用 JavaScript 处理点击。

```
var doc = document;
var providers = doc.getElementsByClassName("provider");

for (var i = 0; i < providers.length; i++) {
    providers[i].onclick = function() {
      console.log(this.innerHTML);
    };
}
```

```
.provider {
    flex: 0 1 auto;
    align-self: auto;
    width: 256px;
    height: 48px;
    margin-top: 12px;
    margin-right: 12px;
    text-align: center;
    line-height: 48px;

    text-transform: uppercase;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: 10%;
    background-color: gray;
}

.provider:hover{
  cursor: pointer;
}

.provider:focus{
    -webkit-box-shadow: 0px 2px 8px 2px rgba(0,0,0,0.4);
    -moz-box-shadow: 0px 2px 8px 2px rgba(0,0,0,0.4);
    box-shadow: 0px 2px 8px 2px rgba(0,0,0,0.4);
}
```

```
<h4>Click in this area first then press tab</h4>
<div id="email" class="provider" tabindex="0">email</div>
<div id="facebook" class="provider" tabindex="0">facebook</div>
<div id="github" class="provider" tabindex="0">github</div>
<div id="google" class="provider" tabindex="0">google</div>
<div id="twitter" class="provider" tabindex="0">twitter</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-29T07:15:04.357

# 使用 jquery 通过按键使元素可选项卡和可点击

假设

*   所有属于不可选项卡、不可点击类型且应可点击的元素都具有**onclick**属性（可以更改为类或其他属性）
*   所有元素都属于同一类型；我将使用 div。
*   您正在使用 jquery

示例 html：

```
...

<div onclick="clicked(this)">Button 1</div>
<div onclick="clicked(this)">Button 2</div>
<div onclick="clicked(this)">Button 3</div>

... 
```

Jquery 代码：这是页面加载后将运行的代码。它需要在您的 HTML 页面上运行。

```
$(()=>{
    // make divs with an onclick attribute tabbable/clickable
    $('div[onclick]')
        .attr('tabindex', '0')                     // Add tab indexes
        .keypress((evt)=>{
            var key = evt.key;
            evt.preventDefault();                  // Ensure all default keypress
                                                   // actions are not used
            if (key === ' ' || key === 'Enter') {  // Only send click events for Space
                                                   // or Enter keys
                evt.currentTarget.click();         // Run the click event for element
            }
        });
}); 
```

[您可以在此处](https://jsfiddle.net/1nawy0kj/)找到一个工作示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-23T20:40:34.007

对于出于相反意图而出现在此页面上的任何人，例如使 div 标签不可选项卡：[https](https://github.com/WICG/inert) ://github.com/WICG/inert是一个好方法。

# android - 多个活动单一布局

> ID：13637224
> 
> 赞同：1
> 
> 时间：2012-11-30T00:28:50.947
> 
> 标签：android, layout, android-activity

我有很多活动总体上做同样的事情。是否可以让他们使用相同的布局？我尝试使用下面的代码，但布局会向左移动到按钮离开屏幕的位置。

```
setContentView(R.layout.activity_enter_pin);

TextView SecondEP = (TextView) findViewById(R.id.EnterPin);
SecondEP.setText("Enter NEW Pin"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:33:07.723

这应该没有任何问题，但是如果您在不同的情况下使用相同的布局来做同样的事情`Activity`，您可能需要考虑将您的 doodad 设置为 a`Fragment`以便它可以在两个`Activity`s 中重复使用。

有关详细信息，请参阅[Android 片段开发人员指南](http://developer.android.com/guide/components/fragments.html)。

# android - 在按钮的 onclicklistener 中设置列 表视图的适配器后，列表视图的项目变灰...？

> ID：13637228
> 
> 赞同：3
> 
> 时间：2012-11-30T00:29:16.093
> 
> 标签：android, listview, button

我的应用程序有问题；在我的应用程序中，我优化了列表视图适配器，它是使用按钮的项目，但是当我单击“显示所有记录”之类的按钮时，列表视图中的项目显示为灰色。

我认为代码不言自明：

```
show_all_Button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Rest_menu menu = new Rest_menu();
                menu = (Rest_menu)v.getTag();
                myAdapter adapter = new myAdapter(getApplicationContext(), menu.all_array);

                listView.setAdapter(adapter);

            }
        }); 
```

如您所见，通过单击 show_all_button，listview 的适配器设置为显示所有项目，并且显示项目，但行显示为灰色。我该怎么做才能使它们不灰显？编辑：经过一些编码，编辑了适配器，这是列表视图适配器的代码：

```
public class foodAdapter extends ArrayAdapter<Food> {

    Context context;
    public Food[] iteminarow;
    public foodAdapter(Context context,Food[] iteminarow)
    {
        super(context, R.layout.listitem,iteminarow);
        this.context=context;
        this.iteminarow=iteminarow;
    }

    static class ViewHolder{
        TextView foodname;
        TextView foodprice;
        TextView foodinfo;
        public ViewHolder(TextView foodname,TextView foodprice,TextView foodinfo)
        {
            this.foodname=foodname;
            this.foodprice=foodprice;
            this.foodinfo=foodinfo;
        }
    }//end of ViewHolder

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        TextView name,price,info;
        Food f = (Food)this.getItem(position);

        if(convertView==null)
        {
            LayoutInflater LI = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = LI.inflate(R.layout.listitem,parent,false);
            name=(TextView)convertView.findViewById(R.id.foodname);
            price=(TextView)convertView.findViewById(R.id.foodprice);
            info=(TextView)convertView.findViewById(R.id.foodinfo);
            convertView.setTag(new ViewHolder(name, price, info));
        }//end of if

        else {
        ViewHolder holder = (ViewHolder) convertView.getTag();
        name = holder.foodname;
        price = holder.foodprice;
        info = holder.foodinfo;
        }//end of else

        name.setText(f.getName().toString());
        price.setText(f.getPriceString());
        info.setText(f.getInfo().toString());

        return convertView;
    }

}//end of adapter 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:49:38.070

您不必`getApplicationContext()`在活动中使用。使用`this`或`YourActivity.this`。

*   `getBaseContext()`- 获取当前活动的上下文（但您应该使用上下文）并且可以在活动被销毁时被销毁

*   getApplicationContext()` - 应用程序全局上下文对于生命周期中的所有活动都是相同的。

如果您想为您的视图设置一个适配器，请使用您的活动的上下文`YourActivity.this`（`baseContext`可以做到这一点，但 Google 不建议使用它）。

# seo - 如何使用电话号码/电话目录进行 SEO

> ID：13637229
> 
> 赞同：-1
> 
> 时间：2012-11-30T00:29:28.490
> 
> 标签：seo

我在一家帮助找人的公司工作。我想通过在我们的网站上实施电话号码/目录来提高我们的 SEO 排名。

主要目标：如果有人搜索电话号码，我们的网站应该比现在列出的位置更高。

有什么建议，我可以如何以及如何实施？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:32:47.053

查看[微格式](http://schema.org/docs/search_results.html#q=telephone)。它有助于突出显示电话号码等详细信息，并且所有主要搜索引擎都支持它们。

# php - PHP 5.4 和 PEAR 邮件

> ID：13637230
> 
> 赞同：3
> 
> 时间：2012-11-30T00:29:31.383
> 
> 标签：php, pear

我的网站“1and1 Internet”上有一些重要的脚本，这些脚本一直在 PHP 5.2 下使用 PEAR 邮件。因为它不是我的服务器，所以我无法控制安装的内容。

他们最近发送了一封电子邮件，通知我他们现在可以使用 PHP 5.4，并将在几个月内删除早期版本。所以我切换了我的帐户配置以尝试 5.4 上的脚本，发现它们失败了！失败出现在`require_once`and上`Mail.php`，`Mail/mime.php`大概是因为它们不存在或找不到。

查看来自 的输出`phpinfo()`，在我看来`--with-pear`，两个版本中都有相同的配置开关，但在 5.4 上，我在关于 的部分中也看到了与 PEAR 有关的内容`Phar`，我不知道 Phar 是什么！

无论如何，在尝试联系 1and1 的支持之前，我可以尝试一些更具体的事情吗？幸运的是，我能够将一切恢复到 5.2，直到一切正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:53:04.587

首先，您需要检查是否`pear`已安装。

我假设你有 shell 访问权限，所以这很简单：

```
$ pear 
```

`pear`如果已安装，这将为您提供命令列表。

然后你需要安装`Mail`包（可能是root...）：

```
$ pear install Mail 
```

以及您可能需要的其他软件包`Mail_Mime`，例如等。

# eclipse - 在eclipse中，重新发布不起作用

> ID：13637236
> 
> 赞同：1
> 
> 时间：2012-11-30T00:29:53.027
> 
> 标签：eclipse, xslt

我的大部分 Web 开发都是在 XSL/JS 中完成的。到目前为止，我能够更改任何 .xsl 文件，服务器将重新发布资源，下次我在浏览器上刷新该页面时，我将能够看到更改。现在，每次我想在修改 xsl 文件后看到更改时，我都必须重新启动服务器。

我尝试过的事情：

*   自动构建已开启
*   选择资源更改时自动重新发布
*   清除我的浏览器缓存
*   在我的服务器上手动单击“重新发布”。
*   清洁雄猫
*   清理工作目录
*   在服务器上删除和添加项目

在 Eclipse Juno 中使用 tomcat 6.0

# html - 定位 mvc 存储库获取数据到视图中（MVC4 Web）

> ID：13637237
> 
> 赞同：2
> 
> 时间：2012-11-30T00:29:57.467
> 
> 标签：html, css, asp.net-mvc-4

我正在开发一个 mvc 4 Web 应用程序。我是新手（几天前才开始，所以请对我好点）。

所以我设法将数据从一个`Repository`类中获取到一个视图中。这里没问题。但问题是我想让这些数据水平显示，分两列，每列有两个块。到目前为止，数据是垂直排列的，从上到下。

```
<div id="myID">
    @foreach(var stuff in Model)
    {
        <article>@stuff.title</article>
    }
</div> 
```

上面的代码是我所做的简化版本。但同样，数据显示就像列表一样，从上到下显示，我希望数据显示如下：

```
A  B
C  D 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:59:48.643

实现目标的一种方法（不使用讨厌的表格）是使用 CSS 来布局您的文章。

探索此类 HTML 相关问题的更简单方法是创建一个简单的 HTML 页面，其中仅包含您要查找的元素：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>
        div#articles {
            width: 450px;
            border: solid 1px red; /* For debugging purposes */
        }

        div#articles article{
            display: inline-block;      /* Force the article to be displayed in a rectangular region laid out next to one another */
            margin: 5px;                /* Leave a little room between each article */ 
            width: 200px;               /* Limit the maximum width of the article so that only two fit side-by-side within the div */
            text-align: center;         /* Center the text horizontally */
            vertical-align: middle;     /* Center the text vertically */
            border: solid 1px green;    /* For debugging purposes - so you can see the region the articles live within */
        }
    </style>
</head>
<body>
    <div id="articles">
        <article>Article A</article>
        <article>Article B</article>
        <article>Article C</article>
        <article>Article D</article>
    </div>
</body>
</html> 
```

文章、段落等通常布置为流动元素，其大小与包含它们的元素的宽度（您的示例中的 DIV）相同。

您希望您的文章以类似网格的模式布局，因此您需要告诉浏览器将这些特定元素呈现为“块”。此外，您希望块在其父级中流动，这样只有两个块可以并排放置在包含的 DIV 中。

因此，使用 CSS 样式，您可以： 1\. 将 DIV 的宽度设置为固定大小 2\. 将文章设置为“内联块”样式 3\. 设置文章的宽度，以便每行只能容纳两个 可选： 4\. 必要时将文章文本居中 5\. 设置文章的边距以在每篇文章之间留出一点空间 6\. 为了更好地查看每个元素所在的区域，请使用简单的 1px 彩色边框

这种方法导致以下布局： ![在此处输入图像描述](../Images/798c12af94c796af081709932f0a257f.png)

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:50:27.797

按照我的评论，你可能想要的是这样的东西，`<table>`用来安排你的输出。

```
<div id="myID">
    @{
      int count = 0;
      <table>
      @foreach(var stuff in Model)
       {
        if (count % 2 == 0){ <tr> }     
            <td>
              <article>@stuff.title</article>
            </td>
        @if (count % 2 == 1) { </tr> }
         count++;
        }
       </table>
    }
 </div> 
```

还没有测试过，但大致上这会做或给你的想法。:)

# c++ - C ++套接字写入太多字符

> ID：13637241
> 
> 赞同：0
> 
> 时间：2012-11-30T00:30:41.810
> 
> 标签：c++, sockets

该代码使用套接字嵌入在“聊天室”程序中。它正在从客户端（myFD）读取并成功地将用户名附加到前面。
但是，我在写入缓冲区中写入额外字符时遇到问题。上次发送的内容仍然存储并发送。

例如，我第一次发送（并正确写入）

> 联合国：你好。

但是在第二次尝试时，当我写“NOT”时，发送的消息将是：

> 联合国：NOTlo

cout 语句正确地是“cout's”，最后没有“lo”，但客户端在最后收到“lo”。我忽略了一些简单的事情吗？

下面的代码：

```
while ( (amount_read = read(myFD, buffer, 1024)) > 0)
{
    total = 0;
    strcpy(second, "");
    strcpy(second, username);
    total += unLength;
    strcat(second, ": ");
    total += 2;
    strcat(second, buffer);//, amount_read);
    total += amount_read;
    cout << second << endl;
    write(myFD, second, total);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:35:47.863

您的字符串不是以空值结尾的，这就是您打印旧字符串的原因。您可以修复它`\0`在字符串末尾添加`buffer[amount_read]=0`或在下一次迭代之前清除整个字符串。

要清除缓冲区，您可以使用[`memset (buffer,'\0', 1024)`](http://www.cplusplus.com/reference/cstring/memset/). 也许这不是最快的方法，但可以防止存储不应托管的垃圾或数据超过必要的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:37:24.517

您没有`'\0'`正确添加。

我猜您的传输看起来像这样`write(myFD, buffer, strlen(buffer))`，那么您将发送除 0 终止符之外的所有内容。它第一次起作用，因为你可能做了一个`memset`.

`buffer[amount_read]=0;`可能会解决它。

# objective-c - OpenGL 模板更改 Xcode 4.5

> ID：13637242
> 
> 赞同：0
> 
> 时间：2012-11-30T00:30:42.763
> 
> 标签：objective-c, xcode, templates, opengl-es

我目前正在尝试学习如何在 iOS 中使用 OpenGL 编程。原来我正在阅读的书是为 Xcode 3（学习 iOS 游戏编程）编写的，在 Xcode v3 和 v4.5 之间集成 Open GL 方面有了巨大的飞跃，摆脱了 OpenGL v1 和 v2 的分离，即 OpenGL库并摆脱旧模板。我认为如果我可以查看原始 OpenGL 模板（2D 正方形上下移动的模板）转换为新的标准 OpenGL 模板，而不是查看 3 维正方形，这真的会帮助我起步，所以我可以看到翻译成什么。我不知道他们为什么要更改视图（以炫耀可能性？），但是与旧模板相比，交叉引用很难知道什么应该去哪里以及什么是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:25:16.377

The template that is included in xcode 4.5 uses openGL es 2\. It shows 2 approaches. The first one is by using OpenGL ES 2.0 natively, shaders and everything that people are used to. The other is by using the special apple framework (GLKit). This one is made to ease the leap between OpenGL 1 and 2\. (The transition between fixed and programable pipeline). My suggestion is to change completely your sources. Focus completely on OpenGL ES 2.0 by using other internet sources.

This link here explains the basics using the new template:

[http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)

# javascript - Jquery - 在 if 条件下停止脚本执行

> ID：13637245
> 
> 赞同：11
> 
> 时间：2012-11-30T00:31:13.870
> 
> 标签：javascript, jquery

如果满足条件，如何停止脚本执行？没有别的办法可以吗？例如：

```
if(data == 'false')
{
stop
}
rest of the function... 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-30T00:32:55.687

您可以退出函数：

```
if (data == 'false') {
    return false;
} 
```

# c++ - .template 文件的 VS2012 保留字颜色

> ID：13637247
> 
> 赞同：1
> 
> 时间：2012-11-30T00:31:19.987
> 
> 标签：c++, visual-studio, colors, visual-studio-2012, reserved-words

我在 C++ 课上，我的教授给了我们一些入门代码来实现一个图表。

她给了我们一个`.template`文件并希望我们在 Visual Studio 2012 中运行它，但是 VS2012 似乎无法将该`.template`文件识别为 C++ 代码，因此根本不会为 C++ 保留字着色。

该程序仍然可以编译和运行，但是当我看不到任何颜色的保留字时，编码更加困难。有没有办法让VS2012为`.template`文件中的保留字着色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:34:52.480

~~当然。只需将其重命名为具有`.cpp`扩展名。~~

或者，Visual Studio 提供的功能允许您将自定义扩展映射到特定的编辑体验。进入 Visual Studio 选项并导航到文本编辑器 > 文件扩展名。

![Visual Studio > 选项 > 文本编辑器 > 文件扩展名](../Images/8b6bca79b4a3d8736c65dbf9ee50487c.png)

在这里，您可以添加`template`文件扩展名并将其映射到 Microsoft Visual C++ 编辑器。

# python - Python 动态覆盖访问器

> ID：13637249
> 
> 赞同：0
> 
> 时间：2012-11-30T00:31:48.923
> 
> 标签：python, google-app-engine

我有一个看起来像这样的类：

```
class MBObject(ndb.Model):
    id = ndb.StringProperty()
    dictionary = ndb.JsonProperty(indexed=False, default = {}) 
```

我想要的是如果有人有一个 MBObject，像这样：

```
obj = MBObject() 
```

他们访问任何属性，如下所示：

```
x = obj.author_id 
```

它在幕后这样做：

```
x = obj.dictionary["author_id"] 
```

所以基本上无论我访问什么属性，它都会在字典中查找该属性，而不是访问类的属性。

这也应该适用于二传手：

```
x.author_id = 5 
```

应该翻译成

```
x.dictionary["author_id"] = 5 
```

这在 Python 中是否可行，如果可以，如何实现？

（请不要问为什么，解释太多了）

**编辑：** 好的，原因如下：

子类在 Google App Engine 中很困难。不可能创建两个不同的分类对象并运行 1 个查询来获取不同类类型的对象，即使它们继承自同一个基类。您必须使用 for 循环来查询，或者使用他们称为 PolyModel 的东西，但这会增加写入成本。

所以我想要的是一个动态类，没有预定义的结构。我不想使用 GAE Expando 类，因为默认情况下所有属性都被索引，这使得写入非常昂贵。（您可以将默认设置为未索引，但我想要一些索引和一些未索引，它不提供）

所以我唯一的选择是将所有属性放入字典中。为了方便起见，我想我必须让它看起来像是面向对象的，并隐藏属性实际上隐藏在字典中的事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:41:41.883

当然，您可以使用 Python 的一种神奇方法轻松做到这一点：

```
__getattr__() 
```

[http://www.rafekettler.com/magicmethods.html#access](http://www.rafekettler.com/magicmethods.html#access)

只需在您的对象中定义它并为其提供您想要的功能：

```
class MBObject(ndb.Model):

  def __getattr__(self, name):
     if name in self.dictionary:
       return self.dictionary.get(name)
     else:
       raise AttributeError 
```

# sql - Oracle 中的 SQL sysdate / Trunc 函数

> ID：13637253
> 
> 赞同：0
> 
> 时间：2012-11-30T00:32:04.450
> 
> 标签：sql, oracle

好的，所以我试图在本月之前的一个月内返回所有信息。我在格式和代码方面有点挣扎。这是我的尝试。如果需要，我可以提供表格结构

```
SELECT hd.Holiday_desc,
soh.Site_Name,
FROM   holiday_details hd
WHERE TRUNC(LAST_DAY(SYSDATE), 'MM' - 1) = TRUNC(hdep.Holiday_Departure, 'MM')
       INNER JOIN holiday_departure hdep 
               ON hd.holiday_code = hdep.holiday_code
Inner join site_visited sv on hd.Holiday_Code = sv.Holiday_code
inner join site_of_holiday soh on sv.Site_code = soh.Site_code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:55:57.397

我将使用该`ADD_MONTHS()`函数和`BETWEEN`运算符来完成此操作：

```
SELECT hd.Holiday_desc,
soh.Site_Name,
FROM   holiday_details hd
WHERE hdep.Holiday_Departure BETWEEN trunc(add_months(sysdate,-1),'MM') 
                                 AND last_day(add_months(sysdate,-1)) + .99999
       INNER JOIN holiday_departure hdep 
               ON hd.holiday_code = hdep.holiday_code
Inner join site_visited sv on hd.Holiday_Code = sv.Holiday_code
inner join site_of_holiday soh on sv.Site_code = soh.Site_code; 
```

此外，如果您的列`hdep.Holiday_Departure`被索引，您将希望避免使用该`TRUNC`函数，这样您就不会使该列上的任何索引无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:58:01.313

我想你想要

```
SELECT 
  hd.Holiday_desc,
  soh.Site_Name
FROM   holiday_details hd
       INNER JOIN holiday_departure hdep 
               ON hd.holiday_code = hdep.holiday_code
       INNER JOIN site_visited sv 
               ON hd.Holiday_Code = sv.Holiday_code
       INNER JOIN site_of_holiday soh 
               ON sv.Site_code = soh.Site_code
WHERE 
  TRUNC(hdep.Holiday_Departure, 'MM') = ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -1) 
```

您需要了解一些有关语法的知识。`'MM' - 1`不会起作用，就像`WHERE`在查询中间有一个子句一样。:) 另外，很多人在 . 之前有一个逗号`FROM`。

# javascript - 在加载和调整大小时检测窗口大小？

> ID：13637258
> 
> 赞同：1
> 
> 时间：2012-11-30T00:32:17.553
> 
> 标签：javascript, jquery, css, html, resize

我有一个脚本可以在调整窗口大小时调整 div 的高度，并且效果很好。如何保留此功能，同时在页面加载时初始设置大小？

目前，必须在定义高度之前手动调整窗口大小。

```
$(window).bind("resize", resizeWindow);
function resizeWindow( e ) {
var newWindowHeight = $(window).height()-207;
$("#sponsorscroll").css("height", newWindowHeight );
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:34:41.837

添加`load`到您的事件以收听

```
$(window).on("resize load", resizeWindow); 
```

# ruby - ruby 中的 RegEx 多个步骤

> ID：13637269
> 
> 赞同：-1
> 
> 时间：2012-11-30T00:33:27.920
> 
> 标签：ruby, regex

给定下面的字符串：

```
"oxcCFC/video.mp4 "GET /accounts/6/videos/xboxcCFC/video.mp4 HTTP/1.1" 206 - 2 697898511 56 56 "-"" 
```

我将如何创建一个正则表达式，首先找到“HTTP”，然后找到“-”，然后捕获序列中出现的下一个单独的数字或连续数字？

我正在尝试使用 rubular，但时间很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:49:53.223

没有太多的事情要做，但我认为应该是这样的：

```
/^.*\s+HTTP.*\s+-\s+(\d+)\s+/ 
```

然后，反向引用将保存您所追求的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:41:34.587

我想看看你是否可以使用 apachelogregex gem... [http://rubydoc.info/gems/apachelogregex/0.1.0/frames](http://rubydoc.info/gems/apachelogregex/0.1.0/frames)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:54:01.740

简短的回答：`/HTTP[^-]*-([\d\s]+)/` 然后，调用`split`结果。

此正则表达式转换为：

“HTTP”，后跟任意数量的非连字符，然后是连字符，然后是仅由数字和空格组成的最大字符串。

# android - Android 2.2 Spinner 在 Actionbar 中看起来很旧

> ID：13637270
> 
> 赞同：2
> 
> 时间：2012-11-30T00:33:33.887
> 
> 标签：android, actionbarsherlock

在 Android 2.2 上，我的 ActionBar 中的 Spinner 看起来非常难看，下拉文本颜色与背景颜色相同。这使文本不可读。

![在此处输入图像描述](../Images/5e4edccb45d82fbb8610110eb461533d.png)

这是相关的代码。

```
spinner = new Spinner(getSupportActionBar().getThemedContext());
ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>
(
    getSupportActionBar().getThemedContext(), 
    R.layout.sherlock_spinner_dropdown_item, 
    new String[]{"All", "Solved", "Unsolved"}
);
spinner.setAdapter(spinnerArrayAdapter);

Edit: I have added the below 3 lines for completeness.

menu.add("Display")
    .setActionView(spinner)
    .setShowAsAction(MenuItem.Show_AS_ACTION_ALWAYS); 
```

这是它在 Android 4.2 上的样子。这也是我期望它在 Android 2.2 上的样子。

![在此处输入图像描述](../Images/dc4e1e448c793e54e2a4726b3a894231.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:51:59.837

当你创建时`SpinnerArrayAdapter`，你应该使用`R.layout.sherlock_spinner_item`; 那么你应该调用`setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item)`适配器。请注意两个资源名称之间的区别。

从示例代码：

```
Context context = getSupportActionBar().getThemedContext();
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.locations, R.layout.sherlock_spinner_item);
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item); 
```

对于您的代码，这将是：

```
spinner = new Spinner(getSupportActionBar().getThemedContext());
ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>
(
    getSupportActionBar().getThemedContext(), 
    R.layout.sherlock_spinner_item, 
    new String[]{"All", "Solved", "Unsolved"}
);
spinnerArrayAdapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
spinner.setAdapter(spinnerArrayAdapter); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-17T14:03:42.503

我创建了一个在 MenuItem 中使用 ICS 样式 Spinner 的解决方案。Android 支持库有 SpinnerICS 小部件，它用于列表导航模式，但他们决定将其设为内部，因此我们不能直接使用它。我的解决方案是通过反射访问 SpinnerICS 小部件。

首先创建 SpinnerICS.java：

```
package com.example.widget;

import java.lang.reflect.Constructor;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Spinner;
import android.widget.SpinnerAdapter;

public class SpinnerICS 
{
    private Spinner spinner = null;
    private View spinnerICS = null;
    private Method setAdapterICS = null;
    private Method setSelectionICS = null;
    private Method getAdapterICS = null;
    private Method getSelectedItemPositionICS = null;
    private Method getSelectedItemICS = null;
    private Class<?> OnItemSelectedListenerICS = null;
    private Method setOnItemSelectedListenerICS = null;

    public SpinnerICS(Context context)
    {
        if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            try {
                Class<?> c = Class.forName("android.support.v7.internal.widget.SpinnerICS");            
                Constructor<?> ctor = c.getDeclaredConstructor(Context.class, AttributeSet.class, int.class);
                ctor.setAccessible(true);
                setAdapterICS = c.getMethod("setAdapter", SpinnerAdapter.class);
                setSelectionICS = c.getMethod("setSelection", int.class);
                getAdapterICS = c.getMethod("getAdapter");
                getSelectedItemPositionICS = c.getMethod("getSelectedItemPosition");
                getSelectedItemICS = c.getMethod("getSelectedItem");
                OnItemSelectedListenerICS = Class.forName("android.support.v7.internal.widget.AdapterViewICS$OnItemSelectedListener");
                setOnItemSelectedListenerICS = c.getMethod("setOnItemSelectedListener", OnItemSelectedListenerICS);             
                spinnerICS = (View)ctor.newInstance(context, null, android.support.v7.appcompat.R.attr.actionDropDownStyle);                
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        if (spinnerICS == null) {
            spinner = new Spinner(context);
        }
    }

    public View getView()
    {
        return (spinnerICS != null ? spinnerICS : spinner);
    }

    public void setAdapter(SpinnerAdapter adapter)
    {
        if (spinnerICS != null) {
            try {
                setAdapterICS.invoke(spinnerICS, adapter);
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else if (spinner != null) {
            spinner.setAdapter(adapter);
        }
    }

    public void setSelection(int position)
    {
        if (spinnerICS != null) {
            try {
                setSelectionICS.invoke(spinnerICS, position);
            } catch (Exception e) {
                e.printStackTrace();
            }           
        } else if (spinner != null) {
            spinner.setSelection(position);
        }
    }

    public SpinnerAdapter getAdapter()
    {
        if (spinnerICS != null) {
            try {
                return (SpinnerAdapter)getAdapterICS.invoke(spinnerICS);
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else if (spinner != null) {
            return spinner.getAdapter();
        }
        return null;
    }

    public int getSelectedItemPosition()
    {
        if (spinnerICS != null) {
            try {
                return (Integer)getSelectedItemPositionICS.invoke(spinnerICS);
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else if (spinner != null) {
            return spinner.getSelectedItemPosition();
        }
        return -1;
    }

    public Object getSelectedItem()
    {
        if (spinnerICS != null) {
            try {
                return getSelectedItemICS.invoke(spinnerICS);
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else if (spinner != null) {
            return spinner.getSelectedItem();
        }
        return null;        
    }

    public class OnItemSelectedListenerProxyListener implements java.lang.reflect.InvocationHandler
    {
        private OnItemSelectedListener listener;

        public OnItemSelectedListenerProxyListener(OnItemSelectedListener listener)
        {
            this.listener = listener; 
        }    

        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable
        {
            if (method.getName().equals("onItemSelected")) {
                listener.onItemSelected(null, (View)args[1], (Integer)args[2], (Long)args[3]);
            } else if (method.getName().equals("onNothingSelected")) {
                listener.onNothingSelected(null);
            }
            return null;
        }
    }

    public void setOnItemSelectedListener(OnItemSelectedListener listener)
    {
        if (spinnerICS != null) {
            try {               
                Object obj = Proxy.newProxyInstance(OnItemSelectedListenerICS.getClassLoader(), new Class<?>[] { OnItemSelectedListenerICS } , new OnItemSelectedListenerProxyListener(listener));
                setOnItemSelectedListenerICS.invoke(spinnerICS, obj);
            } catch (Exception e) {
                e.printStackTrace();
            }           
        } else if (spinner != null) {
            spinner.setOnItemSelectedListener(listener);
        }
    }   
} 
```

然后像这样使用这个 SpinnerICS：

```
 public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        String[] items = new String[] { "one", "two", "three" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.support.v7.appcompat.R.layout.support_simple_spinner_dropdown_item, items);
        adapter.setDropDownViewResource(android.support.v7.appcompat.R.layout.support_simple_spinner_dropdown_item);

        SpinnerICS spinner = new SpinnerICS(this);
        MenuItem item = menu.add("Sample:");
        MenuItemCompat.setActionView(item, spinner.getView());
        MenuItemCompat.setShowAsAction(item, MenuItemCompat.SHOW_AS_ACTION_ALWAYS);
        spinner.setAdapter(adapter);

        return true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T23:03:57.310

SpinnerICS 解决方案如图所示运行良好，但使用它与普通 Spinner 略有不同。

例如，您不能这样做：

在 xml 中：

```
<TableRow>
<TextView android:text="@string/textview_abc" 
    android:layout_width="80sp"
    android:gravity="center"
    android:inputType="textMultiLine"
/>
<SpinnerICS android:id="@+id/spinner_abc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="14sp"
    android:prompt="@string/spinner_abc"
/>
</TableRow> 
```

在java中：

```
SpinnerICS spinner = (SpinnerICS) view.findViewById(R.id.spinner_abc); 
```

它的错误如下：

```
[javac] /home/androidin/build/Project/src/com/example/FragmentTab.java:77: error: inconvertible types
[javac]         SpinnerICS spinner = (SpinnerICS) view.findViewById(R.id.spinner_abc);
[javac]                                                                                                                              ^
[javac]   required: SpinnerICS
[javac]   found:    View 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-19T12:10:55.180

只是添加到上面的答案。它工作得很好，但是您需要将上下文设置为主题上下文，如下所示：

```
Context ctx = getSupportActionBar().getThemedContext(); 
```

否则主题将不匹配。

# c - `clang -ansi` 扩展

> ID：13637271
> 
> 赞同：5
> 
> 时间：2012-11-30T00:33:43.757
> 
> 标签：c, gcc, clang, c89

我最近遇到了一个问题，以下玩具示例可以使用以下方法进行干净编译`clang -ansi`：

```
int main(void)
{
    for (int i = 0; 0; );
    return i;
} 
```

但`gcc -ansi`给出以下错误：

```
a.c: In function ‘main’:
a.c:3:5: error: ‘for’ loop initial declarations are only allowed in C99 mode
a.c:3:5: note: use option -std=c99 or -std=gnu99 to compile your code 
```

编译`clang -ansi -pedantic`显示正在使用 C99 扩展。

```
a.c:3:10: warning: variable declaration in for loop is a C99-specific feature [-pedantic,-Wc99-extensions]
    for (int i = 0; 0; );
         ^
1 warning generated. 
```

clang 还允许使用该`-ansi`选项进行哪些其他扩展？我怎样才能禁用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:45:00.793

如果您尝试在`-ansi`模式下禁用扩展，那么您希望将这些警告视为错误：使用`-pedantic-errors`而不是`-pedantic`，或`-Werror`（或两者）。如需对错误进行更细粒度的控制，请参阅[Clang 手册](http://clang.llvm.org/docs/UsersManual.html)。

# node.js - Windows Azure Node.js 内部服务器错误

> ID：13637272
> 
> 赞同：4
> 
> 时间：2012-11-30T00:33:47.320
> 
> 标签：node.js, azure

当我点击这个地址时，我会时不时地收到这个错误：

[http://apps.facebook.com/pazooza](http://apps.facebook.com/pazooza)

```
iisnode encountered an error when processing the request.

HRESULT: 0x2
HTTP status: 500
HTTP reason: Internal Server Error
You are receiving this HTTP 200 response because system.webServer/iisnode/@devErrorsEnabled configuration setting is 'true'.

In addition to the log of stdout and stderr of the node.exe process, consider using debugging and ETW traces to further diagnose the problem.

You may get additional information about this error condition by logging stdout and stderr of the node.exe process.To enable logging, set the system.webServer/iisnode/@loggingEnabled configuration setting to 'true' (current value is 'false'). 
```

但是当我点击刷新时，网站加载正确并且一切正常。只有当我离开网站几个小时后才回来，也许我会再次看到这个错误，或者可能不会。这很烦人，因为导航到我的网站的用户认为它已损坏并且不倾向于点击刷新！

所以我的问题是之前是否有其他人遇到过此类问题，您已经检查过您的代码并且站点加载的一切似乎都正确，但 Node 或 IIS-Node 时不时会处理此错误。

我的设置如下：

服务器：Windows Azure/Websites（共享，2 个实例） 语言：Node.js 工具：Webmatrix（我使用了模板项目 Starter Site）

最烦人的事情是我已经打开了错误消息等的日志记录，并且日志记录系统没有收到这个错误，当我去检查我的日志时，当这个错误发生时没有创建错误日志，所以我没有想出了一个捕捉它的方法。有人有什么建议吗？

这是我的 server.js 文件的样子：

```
var express = require('express')
  , connect = require('connect')
  , config = require('./utils/config')
  , observer = require('./utils/observer')
  , cronJob = require('cron').CronJob
  , azure = require('azure')
  , uuid = require('node-uuid')
  , db = require("./utils/database")
  , async = require('async')
  , serialNumbers = require("./utils/serialNumbers");

var app = module.exports = express.createServer();

// Create a cron job to listen for servicebus queue messages
var jobProcessServices = new cronJob({
    cronTime: '*/1 * * * * *',
    onTick: function () {
        observer.processQueue(function () { });
    },
    start: false
});

app.configure(function() { 
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.set('view options', {
      layout: false
    });
    app.use(express.favicon());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(connect.static(__dirname + '/public'));
    app.use(require('./middleware/siteTotals'));
    app.use(require('./middleware/authenticate'));
    app.use(express.cookieParser());
    app.use(express.session({ secret: 'ljklkdsflkfdj4848384' }));
    app.use(app.router);

    // start listening for queue messages
    jobProcessServices.start();
    console.log('starting job service\n\n');

    // create table stores
    var ts1 = azure.createTableService(config.storageAccount, config.storageAccessKey, config.tableHost);

    ts1.createTableIfNotExists('channels', function(error) {
        ts1.createTableIfNotExists('users', function(error) {
            ts1.createTableIfNotExists('snusers', function(error) {
                ts1.createTableIfNotExists('snchannels', function(error) {
                    var query = azure.TableQuery
                        .select()
                        .from('snchannels');

                    ts1.queryEntities(query, function(error, result) {
                        if(error === null && result.length == 0) {
                            // must be site initialization, generate serial numbers for channels and users
                            serialNumbers.generateNewNumbers('snchannels', config.maxNumber, config.usageRates[2], function() {
                                serialNumbers.generateNewNumbers('snusers', config.maxNumber, config.usageRates[2], function() {
                                    initializeDefaultQueues(function() {
                                        // Create default storage container
                                        var bc1 = azure.createBlobService(config.storageAccount, config.storageAccessKey, config.blobHost);
                                        bc1.createContainerIfNotExists(config.container, function () { });
                                    });
                                });
                            });
                        }
                        else initializeDefaultQueues(function() { });
                    }); 
                });
            });
        });
    });

    ts1.createTableIfNotExists('sitetotals', function(error) {
        if(error === null) {
            var query = azure.TableQuery
                .select()
                .from('sitetotals');

            ts1.queryEntities(query, function(error, siteTotals) {
                if(error === null && siteTotals.length == 0) {
                    // must be site initialization create defaults
                    ts1.insertEntity('sitetotals', { PartitionKey: 'users', RowKey: uuid(), Total: '0', Deleted: '0' }, function(error) {
                        ts1.insertEntity('sitetotals', { PartitionKey: 'channels', RowKey: uuid(), Total: '0', Deleted: '0' }, function(error){ });
                    });
                }
            });
        }
    });
});

/**
* ERROR MANAGEMENT
* -------------------------------------------------------------------------------------------------
* error management - instead of using standard express / connect error management, we are going
* to show a custom 404 / 500 error using jade and the middleware errorHandler (see ./middleware/errorHandler.js)
**/
var errorOptions = { dumpExceptions: true, showStack: true }
app.configure('development', function() { });
app.configure('production', function() {
    errorOptions = {};
});
app.use(require('./middleware/errorHandler')(errorOptions));

// static vars
app.helpers({ config: {
        fbAppNamespace: config.fbAppNamespace,
        siteUrl: config.siteUrl,
        canvasUrl: config.canvasUrl,
        appID: config.appID,
        commentPageSize: config.commentPageSize,
        videoPageSize: config.videoPageSize,
        channelPageSize: config.channelPageSize,
        userFollowPageSize: config.userFollowPageSize,
        followPageSize: config.followPageSize,
        friendPageSize: config.friendPageSize,
        pazoozaFbUrl: config.pazoozaFbUrl,
        pazoozaTwitterUrl: config.pazoozaTwitterUrl,
        anonymousUser: config.anonymousUser,
        usageRates: config.usageRates,
        categorys: config.categorys,
        channelTypes: config.channelTypes,
        ratings: config.ratings
    },
    serverYear: new Date().getFullYear()
});

// all views have access to these variables
// note: can't do http calls with these functions
app.dynamicHelpers({
    session: function (req, res) {
        return req.session;
    },
    signed_request: function (req, res) {
        return req.param('signed_request');
    }
});

/**
* ROUTING
* -------------------------------------------------------------------------------------------------
* include a route file for each major area of functionality in the site
**/

require('./routes/home')(app);
require('./routes/channel')(app);
require('./routes/user')(app);
require('./routes/search')(app);
require('./routes/utils')(app);
require('./routes/facebook')(app);
require('./routes/testing')(app);

// Global Routes - this should be last!
require('./routes/global')(app);

app.listen(process.env.PORT || 3000);
console.log("Express server in %s mode", app.settings.env);

// helper functions
function initializeDefaultQueues(callback){
    // create default service bus message queues
    var qs1 = azure.createQueueService(config.storageAccount, config.storageAccessKey, config.queueHost);
    qs1.createQueueIfNotExists('serialnumbers', function(error){
        callback();
    });
} 
```

有诸如 siteTotals 和 authentication 之类的中间件模块来管理安装应用程序的 Facebook 用户，并确保他们的 FB 信息始终可供应用程序使用。

我不知道我是否需要安装最新版本的 IISNode？如何确定 IISNode 的版本以及是否需要更新？

另外我应该指出，无论您处于哪种 Windows Azure 网站模式，都会发生此错误：免费、共享或保留。

这是我的 web.config 文件：

```
<iisnode      
 node_env="%node_env%"
 nodeProcessCommandLine="&quot;%programfiles%\nodejs\node.exe&quot;"
 nodeProcessCountPerApplication="1"
 maxConcurrentRequestsPerProcess="1024"
 maxNamedPipeConnectionRetry="3"
 namedPipeConnectionRetryDelay="2000"      
 maxNamedPipeConnectionPoolSize="512"
 maxNamedPipePooledConnectionAge="30000"
 asyncCompletionThreadCount="0"
 initialRequestBufferSize="4096"
 maxRequestBufferSize="65536"
 watchedFiles="*.js;node_modules\*;routes\*.js;views\*.jade;middleware\*.js;iisnode.yml"
 uncFileChangesPollingInterval="5000"      
 gracefulShutdownTimeout="60000"
 loggingEnabled="true"
 debuggingEnabled="false"
 debuggerPortRange="5058-6058"
 debuggerPathSegment="debug"
 maxLogFileSizeInKB="128"
 devErrorsEnabled="true"
 flushResponse="false"      
 enableXFF="false"
 promoteServerVars=""
 /> 
```

它是使用我用来启动整个项目的 Webmatrix 模板时创建的标准文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:36:08.257

如果您有 iisnode.yml，请使用它来打开日志记录和调试。iisnode.yml 会覆盖 web.config 中的任何设置，我们删除的默认设置将禁用 deverrors 和日志记录，因为这些是生产应用程序的正常设置。编辑 iisnode.yml 以更改这些值应该会为您启用日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:05:28.810

您能否提供有关您的应用程序的更多详细信息？在没有更多信息的情况下很难确定确切的问题，尤其是关于您的应用程序连接到的资源。

该问题可能是由于一段时间不活动后应用程序刷新引起的。由于网站是共享的，如果不用于提高应用程序密度，每个网站都会定期刷新。在应用程序重新启动后，您可能需要重新建立连接到某些资源。

您可以通过编辑 iisnode.yml 文件并设置 loggingEnabled=true，然后下载日志（使用跨平台工具下载 Azure 站点日志）来获取有关错误的更多详细信息（基本上是任何记录到 stdout 或 stderr 流的数据）。

-标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T17:58:54.140

我们的 Node 站点也有类似的问题，它使用 mongolab 后端作为数据库。我们最终在我们的连接字符串中添加了一个保持活动标志（并将其设置为打开）来解决问题。我认为这个问题是由于 azure 的负载平衡造成的，但我从来没有花时间在我们搬到亚马逊时完全弄清楚它。希望对您有所帮助。

# uml - Pear PHP_UML 创建 XMI... 现在我如何创建图表？

> ID：13637273
> 
> 赞同：2
> 
> 时间：2012-11-30T00:34:01.000
> 
> 标签：uml, xmi, argouml

我针对现有的 PHP 代码运行 PHP_UML，并创建了一个 XMI 文件。我的目标是自动将此 XMI 文件转换为可视图表，即 pdf 或 svg 文件。

这看起来是一个很好的解决方案，但不确定如何正确使用它来获得我想要的结果：http: [//argouml-graphviz.tigris.org/](http://argouml-graphviz.tigris.org/)

欢迎任何建议/想法

# javascript - 用于 Javascript 的正则表达式以获取子字符串

> ID：13637275
> 
> 赞同：0
> 
> 时间：2012-11-30T00:34:14.763
> 
> 标签：javascript, regex

我想解析一些从 Twitter API 获得的纯文本。我需要做的基本上是在推文中搜索以找到“@”字符后跟一些文本，然后用链接到该文本的锚点替换纯文本。例如：

获取推文纯文本：“@flintzke 这是一个测试”

并使用正则表达式将其转换为：

```
<a href='www.twitter.com/flintzke'>@flintzke</a> this is a test 
```

我的猜测是使用这种功能：

```
function getUsernameLink(text) {
var exp = /^[@][a-zA-Z0-9_!@#%&*]*[\s]$/ig;
return text.replace(exp, "<a href='https://twitter.com/$1'>$1</a>");
} 
```

我的目标是找到一个表达式，该表达式在字符串文本中找到一个单词，该单词以“@”开头并以空格结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:39:10.177

我认为您已经尝试了一些努力；）。首先是锚点`^`并`$`标记字符串的开始和结束（不是匹配的开始和结束或其他东西 - 我想你假设）。然后你使用`$1`但对应于第一个捕获（第一组括号 - 你没有）。在匹配项周围添加括号或使用`$&`. 最后，`\S`代表一个非空白字符。那么为什么不尽可能多地匹配非空白字符呢？

```
exp = /@(\S*)/g;
return text.replace(exp, "<a href='https://twitter.com/$1'>@$1</a>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:54:13.433

试试这个：

```
text.replace(/\@(\w+)/g,"<a href='https://twitter.com/$1'>@$1</a>"); 
```

# html - 同时拥有移动网站和常规网站的架构？

> ID：13637276
> 
> 赞同：1
> 
> 时间：2012-11-30T00:34:18.223
> 
> 标签：html, css, mobile, web

我被要求开发现有网站的移动版本，我很好奇设置所有内容的最佳方式。

创建两个单独的网站版本是否更有意义：一个用于移动版，一个用于常规版？如果我这样做，是否有任何常用技术可以同步两个站点上的内容？

或者我应该只创建针对`handheld`媒体类型的 CSS 的第二个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:38:52.687

如果您的网站是简单的文本库或博客，那么使用“响应式设计”会很有效

**响应式网页设计（通常缩写为 RWD）是一种网页设计方法，在这种方法中，网站经过精心设计，可在各种设备上提供最佳的查看体验——轻松阅读和导航，只需最少的调整大小、平移和滚动（从台式电脑显示器到手机）**

参考

[http://en.wikipedia.org/wiki/Responsive_web_design](http://en.wikipedia.org/wiki/Responsive_web_design)

# c# - 处理泛型时编译器的无用期望？

> ID：13637284
> 
> 赞同：7
> 
> 时间：2012-11-30T00:35:17.050
> 
> 标签：c#, java, generics, compiler-construction, casting

必须翻译泛型类型或方法（任何语言，而不仅仅是 Java）的编译器原则上有两种选择：

> 代码专业化。编译器为泛型类型或方法的每个实例化生成一个新的表示。例如，编译器将为整数列表生成代码，并为字符串列表、日期列表、缓冲区列表等生成其他不同的代码。
> 
> 代码共享。编译器仅为泛型类型或方法的一种表示生成代码，并将泛型类型或方法的所有实例化映射到唯一表示，在需要时执行类型检查和类型转换。

Java使用**代码共享**方法。我相信 C# 遵循**代码专业化**方法，因此根据我使用 C# 的情况，下面的所有代码都是合乎逻辑的。

假设这个 Java 代码片段：

```
public class Test {

    public static void main(String[] args) {
        Test t = new Test();
        String[] newArray = t.toArray(new String[4]);
    }

    @SuppressWarnings("unchecked")
    public <T> T[] toArray(T[] a) {
        //5 as static size for the sample...
        return (T[]) Arrays.copyOf(a, 5, a.getClass());
    }
} 
```

**代码共享方法会在类型擦除发生后**导致此代码：

```
public class Test {

    public static void main(String[] args) {
       Test t = new Test();
       //Notice the cast added by the compiler here
       String[] newArray = (String[])t.toArray(new String[4]);
    }

    @SuppressWarnings("unchecked")
    public Object[] toArray(Object[] a) {
       //5 as static size for the sample...
       return Arrays.copyOf(a, 5, a.getClass());
    }
} 
```

所以我的问题是：

需要什么来精确这个初始演员阵容？：

```
(T[]) Arrays.copyOf(a, 5, a.getClass()); 
```

而不是简单地做（在​​类型擦除之前，在编码时）：

```
Arrays.copyOf(a, 5, a.getClass()); 
```

编译器真的需要这种强制转换吗？

好的，在没有明确向下转换的情况下，`Arrays.copyOf`返回`Object[]`并且不能被更具体的类型直接引用。

但是编译器不能在这种情况下做出努力，因为它处理的是泛型类型（返回类型！）？

实际上，**编译器对方法的调用者行应用显式强制转换还不够**吗？：

```
(String[])t.toArray(new String[4]); 
```

**更新 - - - - - - - - - - - - - - - - - - - - - - - - - --------------------**

感谢@ruakh 的回答。

这里有一个示例证明了显式转换甚至只是在编译时出现是相关的：

```
public static void main(String[] args) {
   Test t = new Test();
   String[] newArray = t.toArray(new String[4]);
}

public <T> T[] toArray(T[] a) {
   return (T[]) Arrays.copyOf(a, 5, Object[].class);
} 
```

投射到`T[]`是向用户发出一些警告的唯一方法，表明投射可能不相关。事实上，在这里我们最终得到了 to 的向下转换`Object[]`，`String[]`这导致了`ClassCastException`运行时的 a。

所以，说到“编译器对方法的调用者行应用显式转换还不够”，答案是：

**开发人员不掌握此转换，因为它是在编译步骤自动创建的，因此此运行时功能不会警告用户在启动编译之前深入检查其代码的安全性。**

简而言之，这个演员阵容值得出席。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:19:14.267

你的推理有两个问题。

一个问题是显式转换既是编译时特性（静态类型系统的一部分）又是运行时特性（动态类型系统的一部分）。在编译时，它们将一种静态类型的表达式转换为另一种静态类型的表达式。在运行时，它们通过强制要求动态类型实际上是该静态类型的子类型来确保类型安全。当然，在您的示例中，运行时功能被跳过，因为擦除意味着没有足够的信息来在运行时强制强制转换。但是编译时特性仍然是相关的。

考虑这种方法：

```
private void printInt(Number n)
{
    Integer i = (Integer) n;
    System.out.println(i + 10);
} 
```

您认为以下内容应该有效吗：

```
Object o = 47;
printInt(o);            // note: no cast to Number 
```

因为无论如何`foo`都会立即将其参数转换为`Integer`，所以没有必要要求调用者将其转换为`Number`?

您推理的另一个问题是，尽管擦除和未经检查的强制转换确实牺牲了一点类型安全，但编译器通过发出警告来补偿这种牺牲。如果您编写的 Java 程序不给出任何未经检查（或原始类型）警告，那么您可以确保它不会`ClassCastException`因为隐式的、仅运行时的、编译器生成的向下转换而抛出任何 s。（我的意思是，当然，除非您禁止此类警告。）在您的示例中，您有一个*声称*是通用的方法，并且*声称*它的返回类型与其参数类型相同。通过提供显式强制转换`T[]`，您让编译器有机会发出警告并告诉您它无法在该位置执行该声明。如果没有这样的强制转换，就没有地方警告`ClassCastException`调用方法中的潜在结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T02:09:34.287

假设（概念上）的类型`"a"`是`List<String>[]`。

我们没有办法获得完整的`a`. 我们诉诸`a.getClass()`哪个回报`List[]`。该副本也是一个`List[]`，并且您想将其转换为`List<String>[]`。编译器无法推断强制转换是安全的。您可以推断，因为副本中的所有元素都是`List<String>`. 您比编译器更了解，因此您需要显式强制转换，并且您有理由禁止“未经检查”警告。

即使您的代码，像许多未经检查的强制转换一样，在当今的 Java 平台上完美运行，但*理论上它是错误*的。编译器在发出警告时并不轻率。但我们别无选择。

根本冲突是对擦除的态度。

编译器生活在理想世界中，就好像所有类型都是完整类型一样。编译器不确认已擦除类型。有一种微弱的希望，即有一天 Java 会通过删除擦除来实现理想的类型系统，因此今天的编译器不会在擦除的假设下工作。

我们程序员生活在被抹去的世界里。我们必须使用已擦除的类型，并假装它们是完整类型，因为我们无法访问真正的完整类型。

我们的代码只适用于被抹去的世界；如果有一天 Java 摆脱了擦除，我们的代码都会崩溃。投射`List[]`到`List<String>[]`? 废话！不允许！

但今天我们别无选择。*依赖*于擦除的代码无处不在。如果 Java 想要摆脱擦除，那将是一个大问题。Java 可能永远不会这样做。它被诅咒了。

# haskell - 需要帮助将 Maybe 转换为 Char

> ID：13637286
> 
> 赞同：1
> 
> 时间：2012-11-30T00:35:32.533
> 
> 标签：haskell

我正在尝试将 Maybe 值转换为 Char。我收到以下错误，尽管我尽了最大努力，但我无法弄清楚如何纠正这个错误。

```
convertmaybe.hs:18:22:
    No instance for (ToChar a)
      arising from a use of `toChar'
    In the expression: toChar a
    In an equation for `showMaybe': showMaybe (Just a) = toChar a
Failed, modules loaded: none. 
```

这是代码：

```
class ToChar a where
    toChar :: a -> Char
instance ToChar Char where
    toChar = id
instance ToChar Int where
    toChar = head . show

showMaybe :: Maybe a -> Char
showMaybe Nothing = ' '
showMaybe (Just a) = toChar a 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T00:41:17.273

您缺少的是`showMaybe`类型签名中的约束。您当前的签名

```
showMaybe :: Maybe a -> Char 
```

说这个函数应该适用于所有类型`a`，但它实际上只适用于作为类型类实例的`ToChar`类型。您可以通过将约束添加到您的类型签名来解决此问题

```
showMaybe :: (ToChar a) => Maybe a -> Char
showMaybe Nothing = ' '
showMaybe (Just a) = toChar a 
```

找出类型相关错误的一个好技巧是删除类型签名并询问 GHCI 它推断出什么类型（假设它能够）。因此，如果您一起删除签名

```
showMaybe Nothing = ' '
showMaybe (Just a) = toChar a 
```

然后启动GHCI，它会给你结果

```
:~$ ghci scratch.hs 
GHCi, version 7.6.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
[1 of 1] Compiling Main             ( scratch.hs, interpreted )
Ok, modules loaded: Main.
*Main> :t showMaybe 
showMaybe :: ToChar a => Maybe a -> Char
*Main> 
```

# mysql - 使用 mysql 时，LinqPAD 不显示 SQL 查询

> ID：13637295
> 
> 赞同：1
> 
> 时间：2012-11-30T00:36:27.367
> 
> 标签：mysql, linqpad

我正在使用最新的 linqPad 4.43.05 并连接到 Entity Framework POCO 组件。一切正常，但 SQL 选项卡没有显示 SQL 语法

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-25T17:57:38.570

您可以使用以下 ToTraceString 方法在 LINQ Pad 中输出 SQL：

```
var q = (the linq query);

((ObjectQuery)q).ToTraceString().Dump(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:08:38.340

实体框架本身没有提供用于获取 SQL 跟踪的挂钩，因此 LINQPad 为内存中的 SQL Server 修补标准 DbProvider 以解决此问题。如果您未使用标准 SQL 连接字符串，或者您自己实例化 SQLConnection，则将绕过此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:03:04.260

您可以通过 mysql 日志获取执行的最后一个查询。这有点棘手，但它有效，看看这个： [如何显示在 MySQL 上执行的最后一个查询？](https://stackoverflow.com/questions/650238/how-to-show-the-last-queries-executed-on-mysql)

# objective-c - NSDateFormatter：如何将带有“GMT”的日期字符串转换为本地 NSDate？

> ID：13637298
> 
> 赞同：5
> 
> 时间：2012-11-30T00:36:37.040
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我需要将从服务器检索到的日期字符串转换为本地 NSDate，该字符串如下所示：

```
"Fri, 30 Nov 2012 00:35:18 GMT" 
```

但现在是 11 月 30 日星期五上午 11:36，那么如何将字符串转换为有意义的本地 NSDate？

我发现：

[iPhone：NSDate 将 GMT 转换为本地时间](https://stackoverflow.com/questions/3901474/iphone-nsdate-convert-gmt-to-local-time)

但看起来它的作用正好相反。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T00:49:32.020

请注意，NSDate 始终在内部以 GMT 格式存储日期。然后，您使用日期格式化程序在本地时区创建一个字符串。在这种情况下，您从一个字符串开始，因此需要首先使用日期格式化程序创建日期，然后再次使用它在您的本地时区创建一个字符串（它默认为时区不是指定的）。

```
NSString *dateString           = @"Fri, 30 Nov 2012 00:35:18 GMT";

NSDateFormatter *dateFormatter = [NSDateFormatter new];
dateFormatter.dateFormat       = @"EEE, dd MM yyyy HH:mm:ss zzz";

NSDate *date                   = [dateFormatter dateFromString:dateString];
NSString *localDateString      = [dateFormatter stringFromDate:date];

NSLog(@"%@", localDateString);
// Results:  Thu, 29 11 2012 19:35:18 EST 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:41:25.160

只需`NSDateFormatter`与格式化字符串一起使用`eee, dd MMM yyyy HH:mm:ss zzz`。最后的 Zs 导致它从字符串中读取时区。

因此，给定[QA1480](http://developer.apple.com/library/ios/#qa/qa1480/_index.html)，示例代码：

```
NSLocale *usLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease];
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setLocale:usLocale];
[formatter setDateFormat:@"eee, dd MMM yyyy HH:mm:ss zzz"];
_createdAt = [formatter dateFromString:dateString]; 
```

# javascript - 我可以在 async.js forEach 中扩展迭代器函数吗？

> ID：13637299
> 
> 赞同：1
> 
> 时间：2012-11-30T00:36:38.977
> 
> 标签：javascript, node.js, async.js

我正在使用 async.js 在集合上运行 for 循环。出于性能原因，我想将数据库连接传递给迭代器方法，这样它就不会在每次迭代器运行时打开/关闭数据库连接。我将 mongoose.js 用于我的数据模型。

下面的代码获取 mongo 中的所有艺术家，然后为每个艺术家添加一首歌曲。我的问题是，如何在 addArtistSong 中使用来自 updateAllArtists 的相同数据库连接？

```
function updateAllArtists() {
    var db = mongoose.createConnection('localhost/dbname');
    var Artist = db.model('Artist', artistSchema);
    Artist.find({}, function(err, artists) {
       // for each artist, add a song
       async.forEach(artists, addArtistSong, function(err) {
    });
}

function addArtistSong(artist, cb) {
    // THIS IS WHERE I NEED A DB CONNECTION
    var Song = db.model('Song', songSchema);
} 
```

我可以以某种方式扩展迭代器签名，例如 addArtistSong(artist, db, cb) 吗？那么我将如何从 forEach 调用中传递它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T03:55:41.207

一种选择是使数据库连接成为全局变量。但是，如果您不希望这样，您始终可以使用闭包在函数之间创建共享变量：

```
(function(){
  // create db in this closure
  var db = mongoose.createConnection('localhost/dbname');

  function updateAllArtists() {
    // now db is available here
    var Artist = db.model('Artist', artistSchema);
    Artist.find({}, function(err, artists) {
      // for each artist, add a song
      async.forEach(artists, addArtistSong, function(err) {});
    });
  }

  function addArtistSong(artist, cb) {
    // and also available here
    var Song = db.model('Song', songSchema);
  }
})() 
```

另一种选择是将其作为参数传递给`addArtistSong`. 由于`async.forEach`期望迭代器函数只接受 2 个参数，我们可以使用匿名函数包装器将 3 个参数传递给`addArtistSong`：

```
function addArtistSong(db,artist,callback) {
    db.model(); //...
} 
```

并调用它`async.forEach`：

```
async.forEach(
  artists,
  function(x,cb){addArtistSong(db,x,cb)},
  function(err) {}
); 
```

# php - Ajax 获取（显示）Blob MySql

> ID：13637309
> 
> 赞同：-1
> 
> 时间：2012-11-30T00:37:56.167
> 
> 标签：php, javascript, mysql, cordova

我正在为我的 phonegap 应用程序使用 mysql 数据库，但 phonegap 不支持 php 语言..

var 输入 = $('#input');

```
$.ajax({
    url: 'http://localhost/postdetail/photo.php',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 5000,
    success: function(data, status){
        $.each(data, function(i,item){ 
            var photo = '<h1>'+item.name+'</h1>'
            + '<p>'+item.id+'<br>'+
            '<h3>'+item.img+'</h3><br>'+
            '<img  src="'+item.img+'">';
            input.append(photo);

        });
    }, 
```

Mysql中的Blob图像不显示..请帮助我

我的 php 脚本

```
<?php
header('Content-type: application/json');

$server = "localhost:3306";
$username = "root";
$password = "12345";
$database = "photos";

$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

$sql = "SELECT id, name AS name, img AS img  FROM n ORDER BY name";
$result = mysql_query($sql) or die ("Query error: " . mysql_error());

$records = array();

while($row = mysql_fetch_assoc($result)) {
    $records[] = $row;
}

mysql_close($con);

echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');';
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:50:47.523

如果您尝试直接嵌入图像，则需要使用`data:`格式

```
<img src="data:img/png,base64,<?= $base_64_encoded_image_data ?>" /> 
```

或者在您的情况下：`base64_encode()`在您的 php 脚本中的 blob 上运行，然后在您的 javascript 中执行此操作：

```
 var photo = '<h1>'+item.name+'</h1>'
    + '<p>'+item.id+'<br>'+
    '<h3>'+item.img+'</h3><br>'+
    '<img  src="data:image/png,base64,'+item.img+'">';
    input.append(photo); 
```

当然，您需要确保 mime 类型匹配；如果您不是专门使用 png，则必须在 ajax 响应中也传递 mime 类型。

# php - validate.js 阻止表单发布到数据库

> ID：13637310
> 
> 赞同：1
> 
> 时间：2012-11-30T00:38:00.160
> 
> 标签：php, jquery, validation

我一直在尝试[validate.js](http://rickharrison.github.com/validate.js/)并且我已经设置并验证了它，但我似乎无法弄清楚如何让表单在验证后发布到数据库。数据库已全部设置完毕，一切（使用 Postgres），但 validate.js 干扰并且不允许表单发布。

```
<script>
new FormValidator('contact', [{
    name: 'name',
    rules: 'required'
}, {
    name: 'email',
    rules: 'required|valid_email'
}, {
    name: 'message',
    rules: 'required'
}, {
    name: 'minlength',
    display: 'min length',
    rules: 'min_length[8]'
}], function(errors, event) {
    var SELECTOR_ERRORS = $('.error_box'),
    SELECTOR_SUCCESS = $('.success_box');

    if (errors.length > 0) {
    SELECTOR_ERRORS.empty();

    for (var i = 0, errorLength = errors.length; i < errorLength; i++) {
        SELECTOR_ERRORS.append(errors[i].message + '<br />');
    }

    SELECTOR_SUCCESS.css({ display: 'none' });
    SELECTOR_ERRORS.fadeIn(200);
    } else {
    SELECTOR_ERRORS.css({ display: 'none' });
    SELECTOR_SUCCESS.fadeIn(200);
    }

    if (event && event.preventDefault) {
    event.preventDefault();
    } else if (event) {
    event.returnValue = false;
    }
});
</script> 
```

这是我的验证脚本，但目前，验证表单时发生的所有事情都是显示：没有从名为 success_box 的 div 中删除。

所以基本上，我在问一旦表格成功完成，我将如何发布表格数据。如果有人需要，我可以发布我的表单，但如果您删除 validate.js，它已经可以工作，所以我目前看不到需要。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:51:35.537

糟糕，对不起各位。如果将来有其他人遇到此问题，则表单不会提交，因为以下行：

```
if (event && event.preventDefault) {
        event.preventDefault();
        } else if (event) {
        event.returnValue = false;
        } 
```

摆脱它，你应该没事。

对于那个很抱歉。

# sql - 一个查询中的两个要求

> ID：13637320
> 
> 赞同：0
> 
> 时间：2012-11-30T00:40:04.243
> 
> 标签：sql, database

我的表架构如下所示：

```
table posts (id integer (primary key), parentid integer, tags varchar, ...) 
```

对于线程中第一个帖子的任何帖子，它们的 parentid 为 NULL 并且标签等于一个字符串。任何其他不是线程中第一个帖子的帖子，它们的 parentid 是该线程中第一个帖子的 id，并且标签为 NULL。

我可以通过以下方式查询特定主题的所有“第一篇文章”

```
SELECT * FROM posts WHERE tags LIKE '%topic%'; 
```

但是如何查询所有帖子，包括特定主题的回复？

* * *

假设我有这样的记录

```
id   parentid   tags
--------------------
123     null   topic
222     123     null
223     123     null
444     null   topic
555     null   hello 
```

如何让所有 id 谈论主题，即 123、222、223、444？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:45:23.570

```
SELECT * FROM posts 
WHERE tags LIKE '%topic%'
UNION ALL
SELECT * FROM posts 
WHERE PARENTID IN 
  (SELECT ID FROM POSTS WHERE tags LIKE '%topic%') 
```

或者

```
SELECT p.*, r.* FROM posts p
LEFT JOIN posts r ON r.ID = p.ID
WHERE p.tags LIKE '%topic%' 
```

我认为第一个更干净，因为它为帖子返回一行，为每个响应返回一行。第二种更容易实现为查询，但其结果更难处理，并且会导致数据库和脚本之间的流量增加，这是一种浪费，尤其是在您有单独的数据库服务器的情况下。

# c++ - C ++中的奇怪循环跳转

> ID：13637325
> 
> 赞同：1
> 
> 时间：2012-11-30T00:41:10.947
> 
> 标签：c++, pointers, for-loop, sizeof

我正在尝试遍历对象的指针数组，它工作得很好，直到它到达输入变量。不知何故，它提高了大小变量并一直这样做，直到应用程序崩溃。是什么导致了这种奇怪的行为？

```
Array::Array(int in) 
{
    size = in;
    Heltal *h[sizeof(size)];
    for(int i = 0; i < size; i++){
        h[i] = new Heltal(Array::Random(1, 100));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:43:57.990

替换这一行：

```
Heltal *h[sizeof(size)]; 
```

有了这个：

```
std::vector<Heltal *> h(size); 
```

`sizeof(size)`是一个编译时常量，并计算`size`声明类型的长度（以字节为单位）。这可能是 4 的值，这意味着`h`它将始终是 4 个元素长。结果，您可能会溢出数组。

向量构造函数将改为在堆上分配动态数量的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:42:58.763

我不知道你的想法`sizeof()`是什么，但它正在做的是返回变量的大小，`size`我猜`int`它可能是返回的`4`。这样做的结果是您的数组的大小是基于 的大小`int`而不是基于 的值而固定的`in`。

在 C99 中我会说 use `Heltal *h[size]`，但 C++ 不允许这样做。在这种情况下，我建议只使用 a`std::vector<Heltal*>`并根据需要调整其大小。

# rest - 通过自然键与代理键识别 REST 资源

> ID：13637326
> 
> 赞同：2
> 
> 时间：2012-11-30T00:41:12.733
> 
> 标签：rest

我正在开发一个 REST API，其中我们有一个由自然键标识的订阅资源，也就是说，它们是根据来自其他资源的键来标识的。前任：

```
POST /subscriptions/user/123
POST /subscriptions/company/intel 
```

这个意思是我要为用户123创建订阅或者为intel创建订阅。删除这些订阅“资源”是类似的：

```
DELETE /subscriptions/user/123
DELETE /subscriptions/company/intel 
```

这就是我不确定的地方。我正在创建订阅，但我正在根据其他自然键识别订阅：`user/123`或`company/intel`. 没有实际订阅`id`。这是一种不错的做事方式，还是我应该为每个订阅创建一个代理键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:48:23.180

每个用户/公司可以有多个订阅吗？如果是这样，那么您将需要一个密钥来识别要删除的实际订阅。

如果不是，那么我认为这将是一种设计 API 的好方法。`POST`如果已经有订阅，我希望您生成一个错误——用户应该使用它`PUT`来进行更新，对吗？

如果我要`GET /subscriptions/`，它会是一个订阅用户和公司的列表（`/subscriptions/user/123, /subscriptions/company/intel`）吗？

似乎有道理。

# python - 使用python的谷歌应用引擎上的xmpp错误

> ID：13637330
> 
> 赞同：0
> 
> 时间：2012-11-30T00:41:30.827
> 
> 标签：python, google-app-engine, xmpp

我的服务器使用 Python 在 GAE 上运行。我正在使用 xmpp 向 gtalk 用户发送通知。我最常看到这个错误：

```
_ah/xmpp/message/error/ 
```

发生这种情况是因为客户端不受支持还是其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:56:31.520

这是您的消息接收者发送给您的错误。您可以考虑[为这个 URL 添加一些错误处理](https://developers.google.com/appengine/docs/python/xmpp/overview#Handling_Error_Stanzas)。

# c# - 如何将选定的文本从 firefox 拖放到我的 winform 应用程序？

> ID：13637335
> 
> 赞同：0
> 
> 时间：2012-11-30T00:41:41.447
> 
> 标签：c#, winforms

我正在尝试将一些随机选择的文本从 Firefox 中的随机网页拖放到我的 Winform 应用程序的文本框中，但由于某种原因，我无法让它工作。我在控件（文本框）上将 AllowDrop 设置为 true，并且我正在处理 DragEnter 和 DragDrop 事件，所以这不是问题。任何人都知道问题可能是什么？

我的代码如下所示：

```
 public Form1()
    {
        InitializeComponent();

        tbISBN.DragDrop += new DragEventHandler(tbISBN_DragDrop);
        tbISBN.DragEnter += new DragEventHandler(tbISBN_DragEnter);
        tbISBN.AllowDrop = true;           
    }

    void tbISBN_DragEnter(object sender, DragEventArgs e)
    {
        foreach (var param in e.Data.GetFormats())
            Console.WriteLine(param);

        if ((e.AllowedEffect & DragDropEffects.All) != 0 && e.Data.GetDataPresent(typeof(string)))
        {
            e.Effect = DragDropEffects.All;
        }
    }

    void tbISBN_DragDrop(object sender, DragEventArgs e)
    {
        string stringData = e.Data.GetData(typeof(string)) as string;
        MessageBox.Show(stringData);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:00:56.483

这应该让你开始

```
 public Form1()
    {
        InitializeComponent();
        AllowDrop = true;
        DragEnter += new DragEventHandler(Form1_DragEnter);
        DragDrop += new DragEventHandler(Form1_DragDrop);
    }

    void Form1_DragEnter(object sender, DragEventArgs e)
    {
        if ((e.AllowedEffect & DragDropEffects.All) != 0 && e.Data.GetDataPresent(typeof(string)))
        {
            e.Effect = DragDropEffects.All;
        }
    }

    void Form1_DragDrop(object sender, DragEventArgs e)
    {
        string stringData = e.Data.GetData(typeof(string)) as string;
        MessageBox.Show(stringData);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T23:13:23.417

用于`e.Data.GetData(DataFormats.Html)`检索文本和源 URL 或`e.Data.GetData(DataFormats.Text`仅用于文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T21:20:28.953

在 Windows 7 上，当您以管理员身份运行 Visual Studio 而 Firefox 以较低权限运行时，它可能无法正常工作。看到这个答案：[C# 拖放在 Windows 7 上不起作用](https://stackoverflow.com/questions/2833709/c-sharp-drag-drop-does-not-work-on-windows-7/2833767#2833767)

在 Visual Studio 之外运行程序就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T21:35:42.040

对于 DragEnter 和 DragDrop，您应该告诉您要处理的数据类型。`StringFormat`如果您想要文本字符串本身，则应该使用来自 Firefox的文本。`Text`也是可能的，但不是那么灵活。

这适用于 Firefox 中的所有纯文本。当您复制属于链接的文本时，您将收到超链接目标。

```
void MainFormDragEnter(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.StringFormat)) 
        e.Effect = DragDropEffects.Copy;
}

void MainFormDragDrop(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.StringFormat)) {
        string dropText = (string)e.Data.GetData(DataFormats.StringFormat);
        Debug.WriteLine(dropText);
    }

} 
```

# objective-c - 是否可以恢复我删除的 xcdatamodel 文件？

> ID：13637337
> 
> 赞同：2
> 
> 时间：2012-11-30T00:42:05.553
> 
> 标签：objective-c, xcode, core-data

我傻傻的删了。我删除了其中包含不同版本的文件。

我可以恢复到旧快照，但从那以后我已经完成了工作。

是否可以恢复到我的档案之一，或者我只能从那里提交/分享？

我仍然可以运行应用程序，但我需要对数据库进行更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:48:16.347

Xcode 将 .xcdatamodels 编译成 .moms。在 Organizer 窗口中，您可以使用“Distribute...”到“Export as Xcode Archive”。这样做，找到存档文件，右键单击并选择“显示包内容”。在那里导航到产品/应用程序以找到您的应用程序。显示其中的包内容，如果您使用的是版本化模型，则应该直接在其中包含您的 .mom 文件或在 .momd 文件夹中的一堆文件。抓住你想要的.moms。

然后激活 Xcode 模式编辑器并从菜单栏中选择 Editor->Import... 。您应该能够从那里导入 .mom，重新创建您的核心数据模式。

# ruby - 在 Ruby 中对多维数组进行排序

> ID：13637341
> 
> 赞同：1
> 
> 时间：2012-11-30T00:42:27.597
> 
> 标签：ruby, arrays, sorting, multidimensional-array

我有一个数组：

```
[26] pry(#<HomeController>)> repos.class
=> Array
[27] pry(#<HomeController>)> repos.size
=> 2319
[28] pry(#<HomeController>)> 
```

由不同类型的元素组成的监视列表：

```
[29] pry(#<HomeController>)> repos[0]
=> #<Watchlist _id: 4f82c1127c0c220001000002, _type: nil, searchable_values: ["description:grit", "description:gives", "description:you", "description:object", "description:oriented", "description:read", "description:write", "description:access", "description:to", "description:git", "description:repositories", "description:via", "description:ruby", "tag:git", "html_url:https", "html_url:github", "html_url:com", "html_url:mojombo", "html_url:grit"], arrangeable_values: {"description"=>"Grit gives you object oriented read/write access to Git repositories via Ruby.", "tag"=>"git", "html_url"=>"https://github.com/mojombo/grit"}, html_url: "https://github.com/mojombo/grit", description: "Grit gives you object oriented read/write access to Git repositories via Ruby.", forks: 269, watchers: 1536, created_at: 2007-10-29 14:37:16 UTC, pushed_at: 2012-09-04 21:54:09 UTC, avatar_url: "https://secure.gravatar.com/avatar/25c7c18223fb42a4c6ae1c8db6f50f9b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", tags_array: ["git"], fork_: "false">

[30] pry(#<HomeController>)> repos[1]
=> #<Watchlist _id: 4f82c1127c0c220001000003, _type: nil, searchable_values: ["description:ruby", "description:process", "description:monitor", "html_url:https", "html_url:github", "html_url:com", "html_url:mojombo", "html_url:god"], arrangeable_values: {"description"=>"Ruby process monitor", "tag"=>"", "html_url"=>"https://github.com/mojombo/god"}, html_url: "https://github.com/mojombo/god", description: "Ruby process monitor", forks: 218, watchers: 1181, created_at: 2008-01-13 05:16:23 UTC, pushed_at: 2012-10-02 23:15:44 UTC, avatar_url: "https://secure.gravatar.com/avatar/25c7c18223fb42a4c6ae1c8db6f50f9b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png", tags_array: [], fork_: "false"> 
```

如何使用名为**watchers**的 Watchlist 字段对 Watchlists 元素进行排序？

```
[31] pry(#<HomeController>)> repos[0].watchers
=> 1536
[29] pry(#<HomeController>)> repos[1].watchers
=> 1181
[32] pry(#<HomeController>)> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:45:23.787

```
repos.sort_by(&:watchers) 
```

这将返回排序后的数组。要对其进行就地排序，请`sort_by!`改用。

如果一个元素可能没有`watchers`方法，你可以试试这个：

```
repos.sort_by { |e| e.watchers rescue 0 } 
```

如果它们不是所有整数，您可以转换它们：

```
repos.sort_by { |e| e.watchers.to_i } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:47:18.827

看起来你想要`Array#sortby`：

```
repos.sort_by{|elem| elem.watchers } 
```

它将按“观察者”字段的值对数组进行排序。

# jquery - 滑出式导航：Z-Index 问题

> ID：13637343
> 
> 赞同：1
> 
> 时间：2012-11-30T00:42:38.793
> 
> 标签：jquery, css, menu, z-index

编辑*根据第一个回复，这可能无法通过 z-index 修复，因为这是元素定位的问题。这可能是发布新帖子的时候了，但是如果您阅读了我对第一个回复的评论，我可以使用绝对位置解决此线程的问题，但是会出现另一个问题 -> 设置具有绝对位置的元素的相对位置。 ..这听起来有点违反直觉，哈哈。无论如何，一旦问题完全不同并且值得不同的线程，将尽快删除它。

我正在尝试创建一个垂直导航菜单，它的子菜单从上方（和后方）滑出并在每个单击的导航项下方停止。我目前将 HTML 设置为在它们各自的导航项之后直接具有相关的子菜单，以便使用相对位置，我可以将 jQuery 设置为将子菜单设置为 top:0 并且它总是直接位于相关导航项的下方.

我将后续导航项设置为添加了一个减少其 z-index 的类。我希望这将使菜单能够从上方的导航项目下方滑出（因为菜单的 z-index 较低），同时将较低的项目置于顶部。

两者都没有奏效。正如您从下面链接的小提琴中看到的那样......菜单不仅会滑过上面的项目，而且还会将较低的项目推开。

我敢肯定有无数种方法可以做到这一点，但我觉得相对位置是处理多个子菜单的唯一方法，所有子菜单都需要相对于它们各自的导航项放置。但显然我的方法并非没有缺陷......

因此，任何帮助将不胜感激。

[http://jsfiddle.net/pGfCX/57/](http://jsfiddle.net/pGfCX/57/)

jQuery：

```
$('.row').click(function() {

    // make all siblings AFTER row clicked get this class to reduce z-index and allow the menu to display above these rows (while still remaining below the rows above)

    $(this).nextAll().addClass('rowZ');
    $(this).next('.menu').show()
    $(this).next('.menu').animate({'top':'0'});

});

// when menu is out, the row clicked is the header row, upon clicking this, the related menu (and by default, all subsequent menus within) animate back up and hide

$('.rowHead').click(function() {

    $(this).next('.menu').animate({'top':'-100%'});
    $(this).next('.menu').hide();

}); 
```

您还会注意到，我正在添加一个类来更改单击导航项并打开子菜单时的颜色。我想在单击此类时恢复子菜单...但这也不行吗？但这是一个不同的问题，可能是另一个线程。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:51:36.157

如果您希望您的子菜单项出现在其他菜单项之上，您将需要使用`position:absolute`它们从文档的正常流程中删除它们。考虑`position: relative`到子菜单项的高度，将菜单项元素向下推。

示例：http: [//jsfiddle.net/Ps73y/3/](http://jsfiddle.net/Ps73y/3/)

**HTML**

```
<div id="container">
    <div class="menu-item">
        <div>Menu Item 1</div>
        <div class="sub-menu-items">
            <div class="sub-menu-item">Sub Menu Item 1</div>            
            <div class="sub-menu-item">Sub Menu Item 2</div>            
        </div>
    </div>
    <div class="menu-item">
        <div>Menu Item 2</div>
        <div class="sub-menu-items">
            <div class="sub-menu-item">Sub Menu Item 1</div>            
            <div class="sub-menu-item">Sub Menu Item 2</div>            
        </div>
    </div>
</div> 
```

**CSS**

```
.sub-menu-items{
   position: absolute;
   display: none;
   top: 0;
   background: red;
   z-index:1100;
}

.sub-menu-item{
    width:120px;
    cursor:pointer;
    position: relative;
}

.menu-item{
    background:yellow;
    width:120px;
    position:relative;
    left:0;
    cursor: pointer;
}

#container{
    background:grey;
    width:120px;
    height:100%;
    position:fixed;
    top:0;
    left:0;
    z-index:0;
} 
```

**Javascript**

```
$(".menu-item").click(function(){
    $(this).find(".sub-menu-items").css("top", $(this).height());
    $(this).find(".sub-menu-items").slideToggle();
}); 
```

# c# - 在 Metro 应用程序中获取 DNS 后缀搜索列表

> ID：13637345
> 
> 赞同：4
> 
> 时间：2012-11-30T00:42:51.820
> 
> 标签：c#, windows-8, microsoft-metro

Metro 应用程序的限制之一是它们无法连接到 localhost。我们正在创建一个应用程序，它允许用户通过输入 IP 或主机名来连接到服务器，我们的一些用户可能会想使用 localhost（他们连接到的我们的其他软件可能与x86 机器的桌面应用程序）。如果您尝试连接到 localhost，则会出现一般连接错误，就好像它无法访问一样，但这是操作系统告诉应用程序阻止它执行不应执行的操作的谎言。

我们希望为这种情况提供更好的错误消息。为此，我试图将用户输入的内容与本地机器的各种名称进行比较，我们通过 NetworkInformation.GetHostNames() 获得这些名称。这在某些情况下可以正常工作，但并非在所有情况下都有效。考虑这种情况：用户的机器名为“foo”，它的完全限定名称是“foo.bar.com”，网络搜索路径（ipconfig 输出中的“DNS 后缀搜索路径”）是“bar.com”。用户输入“foo.bar.com”。当我们浏览主机名列表时，我们得到“foo”，而不是“foo.bar.com”。因此测试无法捕捉到这种情况，并且用户得到的是一般错误而不是我们的自定义错误。

我正在寻找一种方法来以编程方式确定搜索域列表是什么，以便我可以将这些变体添加到列表中进行比较。但是，我在 WinRT（使用 C#）中找不到提供该信息的 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:20:33.057

你是在加入域的机器上测试这个吗？如果它是加入域的机器，GetHostNames() 应该返回具有本地机器完全限定 DNS 的“DomainName”类型之一。因此，如果机器加入了“bar.com”的域，您应该看到“foo.bar.com”列为“DomainName”类型之一。另一个“域名”类型是 foo.local。

# java - 仅在单个目录中调用 MediaScanner (android)

> ID：13637352
> 
> 赞同：6
> 
> 时间：2012-11-30T00:43:10.310
> 
> 标签：java, android, image, android-mediascanner

我试图让 MediaScanner 只扫描一个目录时遇到问题。

我的应用程序拍摄照片，并将它们保存到 sd-card/DCIM/AppPictures/，显然我需要调用 MediaScanner 以使它们显示在图库应用程序中。以下代码确实适用于我的目的：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

但这似乎太浪费了！当我知道文件的确切位置时，我不想使用资源来尝试扫描整个 SD 卡。我也尝试过以下方法：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory+"/DCIM/AppPictures/"))); 
```

但这无法产生任何结果。有人可以让我知道完成这项工作的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T16:07:24.973

```
public static void ScanMyFile(String strFilePath) {
    // Tell the media scanner so it is available to the user.
    MediaScannerConnection.scanFile(null, new String[] { strFilePath }, null, 
            new MediaScannerConnection.OnScanCompletedListener() {
        public void onScanCompleted(String path, Uri uri) {

        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:58:00.073

在我的应用程序中，我也在下载图片。

当我的主要活动（下载图片）开始时，我启动了一个 mediascanner 连接。下载是顺序的，一旦图片到达，我将文件名存储在一个字符串中（下面命名为 currentFile）并“连接”媒体扫描仪：

```
public class SomeActivity 
          extends Activity implements MediaScannerConnectionClient {

    ....

    protected MediaScannerConnection mMs;

    ....

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        ....
        mMs = new MediaScannerConnection(this, this);
        ....
    }

    @Override
    public void onMediaScannerConnected() {
        mMs.scanFile(currentFile, null);
    }

    @Override
    public void onScanCompleted(String path, Uri uri) {
        mMs.disconnect();
    }

} 
```

要启动扫描，我只是这样做：

```
currentFile = "/mnt/sdcard/someLocationToScan/somefile.jpg";
mMs.connect(); 
```

# python - NameError：未定义全局名称“attributeSelection”

> ID：13637362
> 
> 赞同：0
> 
> 时间：2012-11-30T00:44:52.757
> 
> 标签：python, global

好吧，我几乎是一个全新的高中程序员，有大约半年的经验（在 Python 中）。我正在制作一个基本的文字游戏，遇到了一个我花了几个小时但似乎无法解决的错误。抱歉，如果我以错误的方式提出任何问题，这是我在这里的第一个问题。

这是我的代码：

```
############################################################################
#               APOCALYPSE GAME - TEXT EDITION                             #         
#               version 0.0.1                                              #
############################################################################
### BEGINNING TEXT. ###
print('Hello, and welcome to my apocalypse game - text edition!')
print()
print('This is my first game, and I would like to make a graphical version')
print('later in my career.')
print()
print('But, for now, here is the text edition of it so you can get a taste')
print('of what is to come.')
print()
print('NOTE: PLEASE ENTER ALL TEXT IN ALL CAPS.')

print('CHARACTER SETUP:')
print()
def gender(): ### ALLOWS USER TO PICK A GENDER FOR THERE CHARACTER.
    womanOrMan = input('Are you a woman or a man(answer WOMAN/MAN)?')
    if womanOrMan == 'MAN':
        print('You are a man.')
        customizationMan()
    elif womanOrMan == 'WOMAN':
        print('You are a woman.')
        customizationWoman()
    else:
        print('Invalid answer. Please try again.')
        gender()

def customizationMan(): ### CHARACTER CUSTOMIZATION FOR MEN. ###
    print('NOTE: IN THIS AREA YOU MAY USE LOWER CAPS. I WILL TELL YOU WHEN TO USE CAPS AGAIN.')
    hair = input('What hairstyle do you have?')
    hairColor = input('What is the color of your hair?')
    eyeColor = input('What is the color of your eyes?')
    noseSize = input('How big is your nose(inches)?')
    beard = input('What is the name of your beard(if none say "NONE")?')
    bodyType = input('What is your body type?')
    race = input('What is your race?')
    clothes = input('What are you wearing?')

    print()
    print('Here is a summary of you: ')
    print()
    print('You have a ' + hair + ' hairstyle, and you the color of it is ' + hairColor + '.')
    print('Your eyes are the color ' + eyeColor + '.')
    print('Your nose is ' + noseSize + ' inches long.')
    if beard == 'NONE':
        print('You are clean shaven.')
    else:
        print('You have a ' + beard + ' beard.')
    print('You have a ' + bodyType + ' body type.')
    print('You are of ' + race + ' background.')
    print('You are wearing ' + clothes + '.')
    characterConfirmation()

def customizationWoman():### CHARACTER CUSTOMIZATION FOR WOMEN.###
    print('NOTE: IN THIS AREA YOU MAY USE LOWER CAPS. I WILL TELL YOU WHEN TO USE CAPS AGAIN.')
    hair = input('What hairstyle do you have?')
    hairColor = input('What is the color of your hair?')
    eyeColor = input('What is the color of your eyes?')
    noseSize = input('How big is your nose(inches)?')
    bodyType = input('What is your body type?')
    race = input('What is your race?')
    clothes = input('What are you wearing?')

    print()
    print('Here is a summary of you: ')
    print()
    print('You have a ' + hair + ' hairstyle, and you the color of it is ' + hairColor + '.')
    print('Your eyes are the color ' + eyeColor + '.')
    print('Your nose is ' + noseSize + ' inches long.')
    print('You have a ' + bodyType + ' body type.')
    print('You are of ' + race + ' background.')
    print('You are wearing ' + clothes + '.')
    characterConfirmation()

def characterConfirmation(): ### CONFIRMS USER WANTS HIS CHARACTER TO LOOK LIKE HIS SELECTIONS FOR SURE. ###
    print('BEGIN TO ANSWER IN ALL CAPS ONCE AGAIN.')
    print('Are you sure this is what you want your character to look like(if you')
    print('enter "YES" you will move on. If you enter "NO" the character creation')
    print('process will restart)?')
    characterRestart = input('Enter "YES" or "NO" now:')
    if characterRestart == "YES":
        attributeSelection()
    elif characterRestart == "NO":
        print('Restarting character creation.')
        gender()
    else:
        print('Invalid answer. Please try again.')
        print()
        print()
        characterConfirmation()

gender()

#####################################################################################################################################
#####################################################################################################################################
#                                                           CHARACTER ATRRIBUTES                                                    #
#####################################################################################################################################
#####################################################################################################################################

def attributeSelection():
    print("Ok. Now it is time to set your character attributes and then you can begin the game")
    print()
    print("You're character attributes are very important. They can determine whether or not")
    print("you survive a certain situation.")
    print("YOU HAVE 25 SKILL POINTS. SPEND THESE ON THE FOUR ATTRIBUTES")
    print("STRENGTH, VITALITY, STEALTH, AND EXPERIENCE.")
    print()
    print()
    print("Strength makes you able to kill enemies faster, and to do tasks that")
    print("you normally coulden't.")
    print()
    print("Vitality makes you able to survive longer in combat situations.")
    print()
    print("Stealth makes you more likely to beable to avoid cobat situations when they are not")
    print("necessary and sneak up on enemies when they are.")
    print()
    print("Experience makes you more likely to be able to survive bad weather conditions,")
    print(" enhances your ability to preserve food, and helps you survive on your own")
    print(" in the wild in general.")
    print()
    print()
    print("TIME TO SELECT YOUR ATTRIBUTES:")
    print()

    balance = 25
    print("Your SP balance is currently 25.")
    strength = input("How much SP do you want to put into strength?")
    balanceAfterStrength = balance - strength
    if balanceAfterStrength == 0:
        print("Your SP balance is now 0.")
        attributeConfirmation()
    elif strength < 0:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif strength > balance:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif balanceAfterStrength > 0 and balanceAfterStrength < 26:
        print("Ok. You're balance is now at " + balanceAfterStrength + " skill points.")
    else:
        print("That is an invalid input. Restarting attribute selection.")
        attributeSelection()

    vitality = input("How much SP do you want to put into vitality?(" + balanceAfterStrength + " left!)")
    balanceAfterVitality = balanceAfterStrength - vitality
    if balanceAfterVitality == 0:
        print("You SP balance is now 0.")
        attributeConfirmation()
    elif vitality < 0:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif vitality > balanceAfterStrength:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif balanceAfterVitality > 0 and balanceAfterVitality < 26:
        print("Ok. You're balance is now at " + balanceAfterVitality + " skill points.")
    else:
        print("That is an invalid input. Restarting attribute selection.")
        attributeSelection()

    stealth = input("How much SP do you want to put into stealth?(" + balanceAfterVitality + " left!)")
    balanceAfterStealth = balanceAfterVitality - stealth
    if balanceAfterStealth == 0:
        print("Your SP balance is now 0.")
        attributeConfirmation()
    elif stealth < 0 :
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif stealth > balanceAfterVitality:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif balanceAfterStealth > 0 and balanceAfterStealth < 26:
        print("Ok. You're balance is now at " + balanceAfterStealth + " skill points.")
    else:
        print("That is an invalid input. Restarting attribute selection.")
        attributeSelection()

    experience = input("How much SP do you want to put into experience?(" + balanceAfterStealth + " left!")
    balanceAfterExperience = balanceAfterStealth - experience
    if balanceAfterExperience == 0:
        print("Your SP balance is now 0.")
        attributeConfirmation()
    elif experience < 0:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif experience > balanceAfterStealth:
        print("That is an invalid input. Restarting attribute selection. Keep an eye on your balance this time!")
        attributeSelection()
    elif balanceAfterExperience > 0 and balanceAfterStealth < 26:
        print("Oops! You did not spend all of your skill points. Restarting attribute selection.")
        print(" remember to spend all of them this time!")
        attributeSelection()
    else:
        print("That is an invalid input. Restarting attribute selection.")
        attributeSelection()

def attributeConfirmation():
    print("ATTRIBUTE CONFIRMATION TEST SUCCESS!") 
```

* * *

## 问题是，当我在 shell 中运行代码时，会发生以下情况：

```
Hello, and welcome to my apocalypse game - text edition!

This is my first game, and I would like to make a graphical version
later in my career.

But, for now, here is the text edition of it so you can get a taste
of what is to come.

NOTE: PLEASE ENTER ALL TEXT IN ALL CAPS.
CHARACTER SETUP:

Are you a woman or a man(answer WOMAN/MAN)?MAN
You are a man.
NOTE: IN THIS AREA YOU MAY USE LOWER CAPS. I WILL TELL YOU WHEN TO USE CAPS AGAIN.
What hairstyle do you have?UGLY MULLET
What is the color of your hair?BROWN
What is the color of your eyes?BLUE
How big is your nose(inches)?5
What is the name of your beard(if none say "NONE")?NONE
What is your body type?ATHLETIC
What is your race?WHITE
What are you wearing?JEANS AND A TSHIRT

Here is a summary of you:

You have a UGLY MULLET hairstyle, and you the color of it is BROWN.
Your eyes are the color BLUE.
Your nose is 5 inches long.
You are clean shaven.
You have a ATHLETIC body type.
You are of WHITE background.
You are wearing JEANS AND A TSHIRT.
BEGIN TO ANSWER IN ALL CAPS ONCE AGAIN.
Are you sure this is what you want your character to look like(if you
enter "YES" you will move on. If you enter "NO" the character creation
process will restart)?
Enter "YES" or "NO" now:YES
Traceback (most recent call last):
    File "C:/Python32/APOCALYPSE GAME LIBRARY/apocalypseGame.py", line 96, in <module>
        gender()
    File "C:/Python32/APOCALYPSE GAME LIBRARY/apocalypseGame.py", line 22, in gender
        customizationMan()
    File "C:/Python32/APOCALYPSE GAME LIBRARY/apocalypseGame.py", line 54, in customizationMan
        characterConfirmation()
    File "C:/Python32/APOCALYPSE GAME LIBRARY/apocalypseGame.py", line 85, in characterConfirmation
        attributeSelection()
NameError: global name 'attributeSelection' is not defined 
```

* * *

我不知道为什么会收到此错误。我认为它告诉我我没有定义函数attributeSelection，但我显然做了。我还检查了我所有的拼写......所以我很难过。有谁知道我该如何解决这个问题？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:46:36.363

`gender()`尝试移动代码底部的唯一行。

当它被调用时，`attributeSelection`还没有定义所需的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:25:32.313

jvivenot 已经回答了最初的问题，但我想为任何可能找到这篇文章并遇到类似问题的人提供更详细和通用的答案。

造成这类问题是因为 Python 不是编译语言，不像 Java 或 C。在编译语言中，代码是一种“预运行”；*在您的任何代码实际运行之前*，计算机会读取您的所有代码并构建您的所有功能。Python 不这样做。Python 按顺序运行每一行，一次一行，从上到下。这意味着 Python 不能向前看文件的底部。当一行代码尝试使用 Python 尚未看到的函数时，就会出现问题，因为它尚未读取该部分代码。

在问题中给出的代码中，在定义`gender()`之前运行。`attributeSelection()`Python 还没有看到`attributeSelection()`，据 Python 所知，它不存在。不幸的是，`gender()`尝试运行`attributeSelection()`但由于它不存在，Python 提出了 this `nameerror`。

有一种简单的方法可以避免这种情况：始终在程序顶部执行所有定义，然后再执行主程序主体。这样，您可以确保 Python 在开始尝试运行您的主程序之前可以查看并创建您的所有函数。这也有助于使您的代码井井有条且易于阅读。

# javascript - 在 WordPress 中安装砌体

> ID：13637363
> 
> 赞同：0
> 
> 时间：2012-11-30T00:44:56.033
> 
> 标签：javascript, jquery, wordpress

这是我的第一篇文章，我对 WordPress 还很陌生，所以请不要问我愚蠢的问题。

目前，我正在尝试将 Masonry [http://masonry.desandro.com/](http://masonry.desandro.com/)安装到基于 WordPress 附带的标准二十一主题的子主题中。

我遵循了大约 20 个不同教程的指示，但不知道为什么我不能让它工作。我特别想让它为开发项目工作[http://www.ct-social.com/ctsdev/aff/our-trips/](http://www.ct-social.com/ctsdev/aff/our-trips/)

任何可以引导我走向正确方向的建议。也许有人可以告诉我我做错了什么。

2012 年 11 月 30 日更新我已将脚本更改为以下内容：

```
<script type="text/javascript">
jQuery(document).ready(function($){
  var $container = $('.container');
  $container.imagesLoaded(function(){
    $container.masonry({
      itemSelector : '.featured',
      singleMode:true
    });
  });
});
</script> 
```

并且html的结构如下：

```
<div class="container">
  <div class="featured">
      Stuff inside
  </div>
</div> 
```

仍然没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:40:57.447

你正在使用这个

```
var $container = $('#container');
  $container.imagesLoaded(function(){
    $container.masonry({
      itemSelector : '.item',
      columnWidth : 240
    });
  }); 
```

失败是因为您的“图块”都使用容器作为 id，并且`$('#container')`只希望找到一个元素。您不应该在同一页面上有多个具有相同 id 的元素。

如果您查看 Masonry 教程示例标记

```
<div id="container">
  <div class="item">...</div>
  <div class="item">...</div>
  <div class="item">...</div>
  ...
</div> 
```

有一个带有 id 容器的 div，每个项目都有相同的类。

您需要将所有项目放入 id 为“container”的 div 中，并将“featured”类添加到您希望 Masonry 平铺的所有元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:54:13.927

我发现了我的问题并且能够解决我的问题。

而不是在我的functions.php文件底部将Jquery排入队列。

```
wp_enqueue_script('jquery');
wp_register_script('jquery_masonry', get_template_directory_uri().'/js/jquery.masonry.min.js', array('jquery'), '2.0.110526' );
wp_enqueue_script('jquery_masonry'); 
```

再加上你 Enrico 提到的变化，还有 BOOM！砌体现在正在工作。非常感谢您的帮助，如果没有它，我仍然会用头撞石头。

# ruby-on-rails - Rails 服务器梦想主机

> ID：13637370
> 
> 赞同：1
> 
> 时间：2012-11-30T00:45:25.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dreamhost

我正在尝试在 Dreamhost 上安装 Rails。我遵循了以下教程指南[http://wiki.dreamhost.com/Getting_Started_with_Ruby_on_Rails](http://wiki.dreamhost.com/Getting_Started_with_Ruby_on_Rails)。但是，一旦我激活该站点并转到它，我就会收到以下错误

```
Ruby (Rack) application could not be started
These are the possible causes:

There may be a syntax error in the application's code. Please check for such errors and fix them.

A required library may not installed. Please install all libraries that this application requires.

The application may not be properly configured. Please check whether all configuration files are written correctly, fix any incorrect configurations, and restart this application.
A service that the application relies on (such as the database server or the Ferret search engine server) may not have been started. Please start that service.

Error message:
Could not find activesupport-3.2.8 in any of the sources (Bundler::GemNotFound) 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:25:24.247

您看到此错误的原因是 bundler 无法找到 activesupport gem。很可能您已经在本地安装了 Rails 3.2.8，并且 bundler 正在搜索系统 gem 并且找不到它。

您应该能够使用`bundle install --deployment`.

我会确保在运行它之前先设置你的环境变量并确保它们是正确的。

`gem env`将显示它们当前设置的内容。

```
export GEM_PATH=/usr/lib/ruby/gems/1.8
export GEM_HOME=~/.gems
export PATH=~/.gems/bin:/usr/lib/ruby/gems/1.8/bin:$PATH 
```

`bundle exec rails console`还应该帮助您知道失败的原因。

# java - GSON 不序列化/反序列化扩展类

> ID：13637375
> 
> 赞同：3
> 
> 时间：2012-11-30T00:45:51.373
> 
> 标签：java, gson

是否有一个选项（除了编写自定义序列化器/反序列化器）`GSON library`不**序列**化/反序列化超出某种级别的扩展类。

例如看下面的用例

```
class FirstClass {
    int firstVariable;
}

class SecondClass extends FirstClass {
    int secondVariable;
}

class ThirdClass extends SecondClass {
    int thirdVariable;
} 
```

现在使用时`fromJson`，`toJson`我只想序列化/反序列化层次结构中的前两个类 -`ThirdClass`和`SecondClass`. 这意味着它将忽略整个`FirstClass`（和`firstVariable`其中），因为那已经在`level 3`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T01:10:21.783

您不能一般排除 TopLevel 类，您可以做的是使用`ExclusionStrategy`：

```
 private static final Gson GSON = new GsonBuilder().addSerializationExclusionStrategy(new ExclusionStrategy() {
    @Override
    public boolean shouldSkipField(FieldAttributes f) {
        return f.getDeclaringClass().equals(FirstClass.class);
    }

    @Override
    public boolean shouldSkipClass(Class<?> clazz) {
        return false;
    }
  }).create(); 
```

您还可以将 ExclusionStrategy 添加到反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T05:25:50.420

下面的示例可以帮助在序列化期间跳过类中的某个变量

```
if (fieldAttributes.getDeclaringClass() == Example.class )
                && fieldAttributes.getName().equals("example")) {
            return true;
        } 
```

# opengl - 在 OpenGL 中制作彩色屏幕

> ID：13637377
> 
> 赞同：1
> 
> 时间：2012-11-30T00:45:57.710
> 
> 标签：opengl, colors, filter, screen

所以，我有一组我在 openGL 中制作的对象。它们每个都有自己的颜色，其中一些还应用了纹理。我想要做的是阻止某些颜色到达屏幕，但仍然能够改变它。有没有办法挑选出实际涂上的颜色？

我尝试在相机前放置一个半透明的平面，但它并不能阻止其他颜色通过——相反，它只是与它们混合。

理想情况下，它是这样工作的：

> 红色物体 + 红色屏幕 = 红色物体
> 
> 蓝色对象 + 红色屏幕 = 灰色/黑色/白色对象
> 
> 紫色物体 + 红色屏幕 = 红色物体

-编辑-

为了澄清我想要做的事情：我想让所有对象的 RGB 值保持不变。但是，在将它们绘制到屏幕上之前，我想在不对对象进行任何实际更改的情况下将某些颜色值“归零”。

因此，RGB [255,150,200] 通过红色滤镜的对象将被绘制为具有 RGB 值 [255,0,0]、绿色滤镜 [0,150,0] 和蓝色滤镜 [0,0,200]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:45:19.377

您在寻找 glColorMask 吗？

看到这个答案：[渲染成颜色通道而不影响其他通道](https://stackoverflow.com/questions/5569739/render-into-a-color-channels-without-affecting-other-channels)

我不清楚您的问题，但这会掩盖/隐藏选定的颜色通道：R、G、B 或 A

* * *

鉴于这种

> 因此，RGB [255,150,200] 通过红色滤镜的对象将被绘制为具有 RGB 值 [255,0,0]、绿色滤镜 [0,150,0] 和蓝色滤镜 [0,0,200]

glColorMask 将起作用。

```
glColorMask(GL_TRUE, GL_FALSE, GL_FALSE, GL_TRUE);
drawMyRedFilteredStuff();
// Return open gl state back to normal function
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE); 
```

如果您只需要按红色、绿色、蓝色或 alpha 进行过滤，那么这正是您要寻找的。

我仍然没有得到你想要做的事情吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:12:01.857

我认为这最好由片段着色器处理。如果“过滤器”是一个常数值，您可以将其设置为统一，例如，

```
uniform vec3 filter_rgb;
in vec3 src_rgb;

out vec4 dst_rgba;

void main (void)
{
    dst_rgba = vec4(min(filter_rgb, src_rgb), 1.0);
} 
```

因此，如果任何滤波器组件设置为零，则相应的输出组件也将为零。根据您想要的行为，`clamp`函数可能是内置函数比`min`函数更有用的选择。

# c# - 将节点添加到 XML 文件。为什么我的代码用每个 Xelement.Add() 替换第一个节点？

> ID：13637382
> 
> 赞同：1
> 
> 时间：2012-11-30T00:46:32.213
> 
> 标签：c#, wpf, xml, observablecollection

我有一个 .XML 文件，我编写了一个 GUI 包装器来从文件中添加和删除节点。XML 文件如下所示：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<ApplicationList>
  <Application>
    <AppID>1</AppID>
    <AppName>1</AppName>
    <AppVer>1</AppVer>
    <AppInstallType>1</AppInstallType>
    <AppInstallArgs>1</AppInstallArgs>
    <AppInstallerLocation>1</AppInstallerLocation>
  </Application>
  <Application>
    <AppID>2</AppID>
    <AppName>2</AppName>
    <AppVer>2</AppVer>
    <AppInstallType>2</AppInstallType>
    <AppInstallArgs>2</AppInstallArgs>
    <AppInstallerLocation>2</AppInstallerLocation>
  </Application>
  <Application>
    <AppID>3</AppID>
    <AppName>3</AppName>
    <AppVer>3</AppVer>
    <AppInstallType>3</AppInstallType>
    <AppInstallArgs>3<AppInstallArgs>
    <AppInstallerLocation>3</AppInstallerLocation>
  </Application>
</ApplicationList> 
```

我有一个自定义对象的 ObservableCollection，我正在迭代这些对象并将其属性添加到 .XML 文件中。这是代码。

```
//Get the XML from the config file
            XDocument document = XDocument.Load(cf.Path);

            //Define the new XML nodes
            XElement applicationNode = new XElement("Application");

            XElement appIDNode = new XElement("AppID");
            XElement appNameNode = new XElement("AppName");
            XElement appVerNode = new XElement("AppVer");
            XElement appInstallTypeNode = new XElement("AppInstallType");
            XElement appInstallArgsNode = new XElement("AppInstallArgs");
            XElement appInstallerLocationNode = new XElement("AppInstallerLocation");

            //Create the tree with the nodes
            applicationNode.Add(appIDNode);
            applicationNode.Add(appNameNode);
            applicationNode.Add(appVerNode);
            applicationNode.Add(appInstallTypeNode);
            applicationNode.Add(appInstallArgsNode);
            applicationNode.Add(appInstallerLocationNode);

            //Get the node that I need to append to and then append my XML to it
            XElement appListNode = document.XPathSelectElement("/ApplicationList");

            //Remove all the nodes first
            appListNode.RemoveAll();

            foreach (Application app in Applist)
            {
                //Set the values for each node
                appIDNode.SetValue(app.AppID);
                appNameNode.SetValue(app.AppName);
                appVerNode.SetValue(app.AppVer);
                appInstallTypeNode.SetValue(app.AppInstallType);
                appInstallArgsNode.SetValue(app.AppInstallArgs);
                appInstallerLocationNode.SetValue(app.AppInstallerLocation);

                //Add nodes to the XML file
                appListNode.Add(applicationNode);
            }

            //Save the xml file
            document.Save(cf.Path); 
```

在我为其所有属性添加属性值为“4”的 Application 对象后，XML 如下所示：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<ApplicationList>
  <Application>
    <AppID>4</AppID>
    <AppName>4</AppName>
    <AppVer>4</AppVer>
    <AppInstallType>4</AppInstallType>
    <AppInstallArgs>4</AppInstallArgs>
    <AppInstallerLocation>4</AppInstallerLocation>
  </Application>
  <Application>
    <AppID>2</AppID>
    <AppName>2</AppName>
    <AppVer>2</AppVer>
    <AppInstallType>2</AppInstallType>
    <AppInstallArgs>2</AppInstallArgs>
    <AppInstallerLocation>2</AppInstallerLocation>
  </Application>
  <Application>
    <AppID>3</AppID>
    <AppName>3</AppName>
    <AppVer>3</AppVer>
    <AppInstallType>3</AppInstallType>
    <AppInstallArgs>3</AppInstallArgs>
    <AppInstallerLocation>3</AppInstallerLocation>
  </Application>
  <Application>
    <AppID>4</AppID>
    <AppName>4</AppName>
    <AppVer>4</AppVer>
    <AppInstallType>4</AppInstallType>
    <AppInstallArgs>4</AppInstallArgs>
    <AppInstallerLocation>4</AppInstallerLocation>
  </Application>
</ApplicationList> 
```

为什么我的代码用新对象替换树中的第一个节点？

# java - JDBC + SQLite：DriveManager 不加载所需的驱动程序

> ID：13637389
> 
> 赞同：4
> 
> 时间：2012-11-30T00:46:54.317
> 
> 标签：java, sqlite, jdbc

我在使用 jdbc、SQLite 和 java 时遇到了一些奇怪的错误`DriveManager`。根据对应的[java docs](http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html)，`DriveManager`只要提供jdbc，就可以自己加载需要的驱动。但是，对我来说，这在使用 SQLite 时不起作用：

```
Connection conn = DriverManager.getConnection("jdbc:sqlite://" + pathToFile + File.separator + "database.db"); 
```

执行此代码时，我得到一个 SQLException:`No suitable driver found for jdbc:sqlite:pathToFile\database.db`通常我会假设 jdbc 不是应该的，但是，由于某种原因，以下工作：

```
Class.forName("org.sqlite.JDBC");
Connection conn = DriverManager.getConnection("jdbc:sqlite://" + pathToFile + File.separator + "database.db"); 
```

这让我完全不知道为什么第一个版本不起作用。附带说明一下，遵循相同实现的 MySQL 无需使用`Class.forName()`也可以正常工作。一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:13:54.633

这取决于 jdbc 驱动程序是如何实现的。在“旧”时代，您总是需要`Class.forNames()`在加载驱动程序之前调用。使用 jdbc ServiceLoader 支持实现的“现代”驱动程序不再需要这个。基本上归结为驱动程序 jar 是否具有适当的“META-INF/services/java.sql.Driver”条目。

所有这些都包含在[DriverManager](http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html) javadocs 中。

# java - JAVA 错误 1070 中的 PIG UDF

> ID：13637391
> 
> 赞同：2
> 
> 时间：2012-11-30T00:46:58.033
> 
> 标签：java, mysql, apache-pig, mysql-error-1071

我已经`UDF_UPPER.jar`在`/home/GED385/pigScripts`.

```
[GED385@snshadoope1 pigScripts]$ jar tf /home/GED385/pigScripts/UDF_UPPER.jar | grep UPPER
UPPER.class 
```

但是在执行猪时，我遇到了错误。

```
grunt> exec digital_web_trkg_9.pig
2012-11-30 00:15:32,027 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1070: Could not resolve UDF_UPPER.UPPER using imports: [, org.apache.pig.builtin., org.apache.pig.impl.builtin.]
Details at logfile: /data/1/GED385/pigScripts_digital/pig_1354233151486.log 
```

猪脚本：

```
REGISTER /usr/lib/pig/contrib/piggybank/java/piggybank.jar;
REGISTER /home/GED385/pigScripts/UDF_UPPER.jar;

A = LOAD '/user/GED385/digital/scrn_rsln_id_cln.dat' USING PigStorage('|')
                  AS (web_vstr_scrn_rsln_id:int,web_vstr_scrn_rsln_desc :chararray, edw_publn_id:chararray);

B = LOAD '/user/GED385/digital/scrn_rsln_id1_cln.dat' USING PigStorage('|')
                  AS (web_vstr_scrn_rsln_id:int,web_vstr_scrn_rsln_desc :chararray, edw_publn_id:chararray);

H = LOAD '/user/GED385/digital/scrn_rsln_id_base_unload_cln.dat' USING PigStorage('|')
                  AS (web_vstr_scrn_rsln_id_1:int,web_vstr_scrn_rsln_desc :chararray, edw_publn_id:chararray);

J = GROUP H BY edw_publn_id;

K = FOREACH J GENERATE group,  MAX(H.web_vstr_scrn_rsln_id_1);

C = UNION A, B;

D = FILTER C BY web_vstr_scrn_rsln_desc is not null;

E = DISTINCT D;

F = JOIN E BY web_vstr_scrn_rsln_desc LEFT , H BY web_vstr_scrn_rsln_desc;

I = FILTER F BY H::web_vstr_scrn_rsln_id_1 is null;

--G = FOREACH I GENERATE H::web_vstr_scrn_rsln_id_1,E::web_vstr_scrn_rsln_desc,E::edw_publn_id;
G = FOREACH I GENERATE K.$1+1,E::web_vstr_scrn_rsln_desc,E::edw_publn_id,UDF_UPPER.UPPER(E::web_vstr_scrn_rsln_desc);

--L = JOIN G BY $2 LEFT , K BY $0;

DUMP G; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:14:54.170

你的 UPPER 类属于哪个 java 包？

你需要用它的包名来限定你的 UPPER 类，以便 pig 找到它。您不需要引用 jar 文件名。

因此，如果您的 UPPER 课程属于`com.blah`

你会写：

```
G = FOREACH I GENERATE K.$1+1,E::web_vstr_scrn_rsln_desc,E::edw_publn_id,com.blah.UPPER(E::web_vstr_scrn_rsln_desc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T06:52:56.040

根据以下输出，

```
[GED385@snshadoope1 pigScripts]$ jar tf /home/GED385/pigScripts/UDF_UPPER.jar | grep UPPER
UPPER.class 
```

UPPER.java 没有名为“UDF_UPPER”的包。

在**错误 1070 中**：您正在尝试在 UDF_UPPER 包中导入 UPPER 类。

`UDF_UPPER.UPPER`方法 **`"<package name>.<class name>"`**

但是由于你的 jar中没有**UDF_UPPER****`UPPER`**包，所以只能在 pig 脚本中使用，如下所示：

```
G = FOREACH I GENERATE K.$1+1,E::web_vstr_scrn_rsln_desc,E::edw_publn_id,UPPER(E::web_vstr_scrn_rsln_desc); 
```

希望，它能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T00:04:36.687

```
using imports: [, org.apache.pig.builtin., org.apache.pig.impl.builtin.] 
```

这告诉我储钱罐和你的罐子永远不会真正进口。

我的猜测是，这与您为 jar 文件提供绝对路径有关。

相反，只需执行`REGISTER UDF_UPPER.jar`.

# c# - 正则表达式替换 c# html

> ID：13637393
> 
> 赞同：-3
> 
> 时间：2012-11-30T00:47:25.490
> 
> 标签：c#, asp.net, html, regex

我正在尝试对某些 HTML 内容进行正则表达式替换，而我需要做的是将 URL 参数附加到已经存在的用于标记（例如锚标记、链接标记等）的 URL。例如，如果我有一个锚标签，例如

```
<a href="http://www.google.com">test</a> 
```

它应该变成（附有'？'）

```
<a href="http://www.google.com?append=1">test</a> 
```

但是如果已经有一个 url 参数，它应该只是附加它 - 所以，这个：

```
<a href="http://www.google.com?s=this&q=test">test</a> 
```

将变成（附加一个'&'）

```
<a href="http://www.google.com?s=this&q=test&append=1">test</a> 
```

我还必须考虑有时可能不一定总是有链接 - 例如

```
<a href="javascript:doThis('test')">test</a> 
```

在这种情况下，我必须不管它。

javascript中可能还嵌入了一个链接，例如：

```
<a href="javascript:doThis('http://www.google.com')">test</a> 
<a href="javascript:window.open('newWindow','http://www.google.com')">test</a> 
```

这也应该像这样被替换（使用“&”或“？”）：

```
<a href="javascript:doThis('http://www.google.com?append=1')">test</a> 
<a href="javascript:window.open('newWindow','http://www.google.com?append=1')">test</a> 
```

（这个没那么重要——没有这个我也能活）

此外，链接可能并不总是有 http:// - 它可能只是一个相对链接：

```
<a href="/home.aspx?s=this&q=test">test</a> 
```

它应该像以前一样附加：

```
<a href="/home.aspx?s=this&q=test&append=1">test</a> 
```

我尝试了以下 - 第一个也替换了所有 javascript 链接，以及任何其他链接（不是真正的 URL）。第二个根本不工作...

```
 content = Regex.Replace(content, "href=\"(.*)\\?(.*)\"", "href=\"$1?append=1&$2\"", RegexOptions.IgnoreCase);
    content = Regex.Replace(content, "href=\"([^?]*)\"", "href=\"$1?append=2\"", RegexOptions.IgnoreCase); 
```

**编辑：**我已经尝试过使用 HTML Agility 包，只是我得到的 HTML 格式不正确，所以它不起作用。此外，我得到的 HTML 不是一个衬里，它是我必须为此做的一整页......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T01:02:34.390

我建议您从使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)开始。我可能是错的，但看起来您正在使用正则表达式来确定锚标签？我会说这可能不是最好的主意，而且可能会使事情过于复杂。

您应该能够获取所有锚标记，然后从它们那里获取 href，就像文档中的这个示例一样：

> 例如，以下是修复 HTML 文件中所有 href 的方法：
> 
> ```
>  HtmlDocument doc = new HtmlDocument();
>  doc.Load("file.htm");
>  foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href"])
>  {
>     HtmlAttribute att = link["href"];
>     att.Value = FixLink(att);
>  }
>  doc.Save("file.htm"); 
> ```

当然，这并不能完全解决您的问题，但您明白了。总的来说，我认为尝试对所有内容都使用正则表达式是一种更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:37:11.643

This is by no means robust, and I would not really suggest trying to do it this way, but if you want to try to do it with just regex and string replacing:

```
string source = "your html tag here";
string href = Regex.Match(source, "href=\".*\"").Value.Replace("\"", "").Replace("href=", "");
string url;
string toReplace;
bool tryToAppend = true;

if(href.Contains("'"))
{
    //if the href contains something else in quotes then its probably javascript
    //only capture something in quotes if it has a . (assume this means a url)
    url = Regex.Match(href, @"'.*\..*'").Value.Replace("'", "");

    //if we didnt find something in javascript with a . then abort
    if (url.Length == 0) 
    {
        tryToAppend = false;
    }
    toReplace = url;
}
else
{
    url = href;
    toReplace = url;
}

if (tryToAppend)
{
    if (url.Contains("?"))
    {
        url += "&append=1";
    }
    else
    {
        url += "?append=1";
    }

    source = source.Replace(toReplace, url);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:22:50.143

这第一个正则表达式应该适用于所有双引号分隔的href。它将忽略任何以 javascript: 开头的 href。它仅涵盖您的主要场景，但很简单。

```
(href="(?!javascript:)[^"?]+)(?:(\?[^&"]+)(&[^"]+)?)?" 
```

您将获得三个捕获组：

*   第 1 组：从单词 HREF 到 URL 文件名的匹配的开头（`?`如果有的话，就在之前）。`Example: href="http://www.google.com`
*   第 2 组： ? 和查询字符串的第一个参数。`Example: ?append=1`
*   第 3 组：第一个 & 以及之后的所有内容。`Example: &q=test&append=1`

通过检查捕获组 2 和/或 3 是否具有值，您可以确定是否需要使用 a`?`或 a附加参数`&`。在您的示例锚点中，以下是匹配的，并且在其捕获组中具有以下值。

```
示例 1：  
   href="http://www.google.com
 示例 2：  
   href="http://www.google.com ?append=1
 示例 3：  
   href="http://www.google.com ?s=this &q=test
 示例 4：  
   href="http://www.google.com ?s=this &q=test&append=1
 例 10：
   href="/home.aspx ?s=this &q=test
 例 11：
   href="/home.aspx ?s=this &q=test&append=1

```

我尝试编写一个覆盖上述场景的正则表达式以及 javascript HREF 中路径的其他场景。它似乎有效，但这不是我所说的漂亮。为了尽可能简单，我做了以下假设：

*   HREF 值是双引号分隔的。
*   javascript 函数参数中的 URL 是绝对的，并且以 http:// 开头。

正则表达式具有与上面列出的相同的捕获组。

```
(href="(?:javascript:[^\(]+\([^\)]*?http://[^"?\)]+|(?!javascript:)[^"?]+))(?:(\?[^&'"]+)(&[^"']+)?)?(?:'\))?" 
```

同样，在您的示例锚点中，以下是匹配的，并且在其捕获组中具有以下值。

```
示例 1：  
   href="http://www.google.com
 示例 2：  
   href="http://www.google.com ?append=1
 示例 3：  
   href="http://www.google.com ?s=this &q=test
 示例 4：  
   href="http://www.google.com ?s=this &q=test&append=1
 示例 6：  
   href="javascript:doThis('http://www.google.com
 示例 7：  
   href="javascript:window.open('newWindow','http://www.google.com
 示例 8：  
   href="javascript:doThis('http://www.google.com ?append=1
 示例 9：  
   href="javascript:window.open('newWindow','http://www.google.com ?append=1
 例 10：
   href="/home.aspx ?s=this &q=test
 例 11：
   href="/home.aspx ?s=this &q=test&append=1

```

# android - 在我的两个设备的启动屏幕后，我的应用程序崩溃（带有断言）

> ID：13637396
> 
> 赞同：1
> 
> 时间：2012-11-30T00:47:55.157
> 
> 标签：android, unity3d

尝试从 Unity 3.5.6 构建和运行我的应用程序后，我得到了以下 logcat 结果。从 Unity 网络部署两个简单的应用程序，如“触摸阶段”和“滚动球”，我没有问题。有人可以帮我解释一下这个问题吗？

```
BTW, I have tried the check list here.
http://docs.unity3d.com/Documentation/Manual/TroubleShooting.html#AndroidTroubleShooting

My device OSes are Android 2.2 and 2.3.2\.  And I have tried on both my MacOS and WinXP.
Your help will be greatly appreciated!!! mOm

SWD

======== start
I/dalvikvm( 1587): Could not find method android.opengl.GLSurfaceView.setPreserveEGLContext OnPause, referenced from method com.unity3d.player.UnityPlayer.a
W/dalvikvm( 1587): VFY: unable to resolve virtual method 194: Landroid/opengl/GLSurfaceView;.setPreserveEGLContextOnPause (Z)V
D/dalvikvm( 1587): VFY: replacing opcode 0x6e at 0x006c
D/dalvikvm( 280): GC_EXTERNAL_ALLOC freed 198K, 52% free 2959K/6087K, external 2914K/2928K, paused 153ms
I/dalvikvm( 1587): Could not find method android.opengl.GLSurfaceView.setPreserveEGLContext OnPause, referenced from method com.unity3d.player.aa.run
W/dalvikvm( 1587): VFY: unable to resolve virtual method 194: Landroid/opengl/GLSurfaceView;.setPreserveEGLContextOnPause (Z)V
D/dalvikvm( 1587): VFY: replacing opcode 0x6e at 0x000f
I/dalvikvm( 1587): Could not find method android.opengl.GLSurfaceView.setPreserveEGLContext OnPause, referenced from method com.unity3d.player.aa.run
W/dalvikvm( 1587): VFY: unable to resolve virtual method 194: Landroid/opengl/GLSurfaceView;.setPreserveEGLContextOnPause (Z)V

.....

D/Unity ( 1587): Multi-casting "[IP] 0.0.0.0 [Port] 55426 [Flags] 2 [Guid] 2017919413 [EditorId] 200989420 [Version] 1048832 [Id] AndroidPlayer(Sony_Ericsson_R800a:0.0.0.0) [Debug] 0" to [225.0.0.222:54997]...
F/mono ( 1587): * Assertion at threads.c:4189, condition `offset' not met
D/Unity ( 1587): InitializeMonoFromMain OK (3007ff00)
D/Unity ( 1587): PlayerConnection::Initialize
D/Unity ( 1587): PlayerInitEngineNoGraphics OK
D/Unity ( 1587): Renderer: Adreno 205
D/Unity ( 1587): Vendor: Qualcomm
D/Unity ( 1587): Version: OpenGL ES 2.0 1403843

....

(stack trace)
========= end 
```

# python - 为什么我会收到 ValueError : 数学域错误？

> ID：13637400
> 
> 赞同：7
> 
> 时间：2012-11-30T00:48:21.060
> 
> 标签：python

我写了一个名为的函数`analyze_the_shape`，它接受一个二维顶点列表，使得该列表按照顺时针遍历二维欧几里得空间中的顶点的顺序排列。

我在解释器中调用它并`[(0, 0), (0, 4.0), (4.0, 4.0), (4.0, 0)]`作为输入给出，但我得到`ValueError : math domain error`. 我期待看到`return ["SQUARE", 4.0]`。我能做些什么 ？

```
import math

def analyze_the_shape(liste):
    if len(liste) == 2 :
        d = ( (liste[1][0] - liste[0][0])**2 + (liste[1][1] - liste[0][1])**2 )**(0.5)   
        return ["LINESEGMENT", d ] 
    if len(liste) == 4 :
        d1 = abs(( (liste[1][0] - liste[0][0])**2 + (liste[1][1] - liste[0][1])**2 )**(0.5))
        d2 = abs(( (liste[2][0] - liste[1][0])**2 + (liste[2][1] - liste[1][1])**2 )**(0.5))
        d3 = abs(( (liste[3][0] - liste[2][0])**2 + (liste[3][1] - liste[2][1])**2 )**(0.5))
        d4 = abs(( (liste[0][0] - liste[3][0])**2 + (liste[0][1] - liste[3][1])**2 )**(0.5)) 
        hypo = abs(( (liste[2][1] - liste[0][1])**2 + (liste[2][0] - liste[0][0])**2 )**(0.5))
        cos_angle = float((hypo**2 - (d3)**2 + (d4)**2) / ((-2.0)*(d4)*(d3)))
        angle = math.degrees(math.acos(cos_angle))
        if d1 == d2 == d3 == d4 and abs(angle - 90.0) < 0.001 :
            return ["SQUARE", d1] 
```

这是我得到的错误：

```
>>> import a
>>> a.analyze_the_shape([(0, 0), (0, 4.0), (4.0, 4.0), (4.0, 0)])
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "a.py", line 15, in analyze_the_shape

ValueError: math domain error 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T01:05:28.793

此异常意味着`cos_angle`不是 的有效参数`math.acos`。

具体来说，在这个例子中，它刚好低于 -1，这是超出`acos`定义的。

您可能会尝试通过以下方式强制您返回`cos_angle`内部`[-1,1]`：

```
def clean_cos(cos_angle):
    return min(1,max(cos_angle,-1)) 
```

但是，这不会返回`SQUARE`，因为在您的示例中`cos_angle`或多或少等于，因此等于。在异常发生之前，您的计算可能存在问题。`-1``angle``180`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-08T19:01:34.357

我遇到了同样的问题，结果证明@crld 是对的。我的输入值应该在 [-1, 1] 范围内，但是...

```
print('{0:.32f}'.format(x))
>> 1.00000000000000022204460492503131 
```

因此，作为一般规则，我建议将您输入的所有浮点数四舍五入`math.acos`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T00:59:43.320

当我运行您的代码时，我得到的堆栈跟踪是：

```
Traceback (most recent call last):
  File "md.py", line 22, in <module>
    analyze_the_shape([(0, 0), (0, 4.0), (4.0, 4.0), (4.0, 0)])
  File "md.py", line 18, in analyze_the_shape
    angle = math.degrees(math.acos(cos_angle))
ValueError: math domain error 
```

我知道`math.acos`只接受这样的值`-1.0 <= x <= 1.0`。如果我`cos_angle < -1.0`在该行之前打印出来`angle = math.degrees(math.acos(cos_angle))`，它会打印出来`True`。如果我打印出来`cos_angle`，它就会打印出来`-1.0`。

我猜这里的问题是 Python 存储的方式`cos_angle`并不完美，并且您生成的值`cos_angle`仅略低于`-1.0`.

`abs(angle - 90.0) < 0.001`如果您检查 if而不是检查，也许会更好`abs(cos_angle) < 0.001`。

**编辑**：

我认为你在这一行有一个错误：

```
cos_angle = float((hypo**2 - (d3)**2 + (d4)**2) / ((-2.0)*(d4)*(d3))) 
```

大概应该是：

```
cos_angle = float((hypo**2 - ((d3)**2 + (d4)**2)) / ((-2.0)*(d4)*(d3))) 
```

注意周围的额外括号`(d3)**2 + (d4)**2`。这可确保在您从 中减去该数量*之前*`hypo**2`完成加法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T17:17:57.723

尝试四舍五入 cos_angle。我有同样的问题；在我的脚本中，x in 的值是 `math.acos(x)`-1.0000000000000002。为了解决这个问题，我只是将 x 的值四舍五入到小数点后六位，所以结果是 -1.0。

# python - Python 3.3：函数的递归版本

> ID：13637401
> 
> 赞同：3
> 
> 时间：2012-11-30T00:48:32.817
> 
> 标签：python, recursion, python-3.x

```
def abc(s):
    filter = [i for i in s.lower() if i in 'abcdefghijklmnopqrstuvwxyz']
    for i in range(len(filter) - 1):
        if filter[i] > filter[i+1]:
            return print(s, "is not abcdearian")
    return print(s,  "is abcdearian")

while True:
    try:
        s = input("String? ")
abc(s) 
```

我无法制作 abc(s) 的递归版本。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:34:31.077

非递归解决方案：

```
def issorted(L):
    return all(x <= y for x, y in zip(L, L[1:])) 
```

要创建递归函数，您应该找到一种方法将问题拆分为可以以相同方式解决的更小和/或更简单的子问题：

```
#!/usr/bin/env python3
from string import ascii_lowercase

def abcdearian(s):
    return issorted_recursive([c for c in s.lower() if c in ascii_lowercase])

def issorted_recursive(L):
    return L[0] <= L[1] and issorted_recursive(L[1:]) if len(L) > 1 else True 
```

这`issorted_recursive()`是一个递归函数。基本情况是`len(L) <= 1`（具有零或一个元素的列表始终排序，因此`True`在这种情况下返回）。在递归情况下 ( `len(L) > 1`)，`L`如果第一项按排序顺序 ( `L[0] <= L[1]`)*并且*列表的其余部分 ( `L[1:]`) 也已排序，则认为列表已排序。每次函数接收越来越小的输入，直到找到乱序元素（`L[0] > L[1]`）或遇到基本情况并且函数完成。

### [例子](http://ideone.com/MG3mSL)

```
while True:
    s = input("String? ")
    if not s:
        break
    print("{} is {}abcdearian".format(s, "" if abcdearian(s) else "not ")) 
```

### 输入

```
    美国广播公司
    背书

```

### 输出

```
String? abc is abcdearian
String? bac is not abcdearian
String? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:12:52.950

试试这个代码，它相当于问题中发布的代码，但以递归风格编写：

```
from string import ascii_lowercase

def abc(s):
    f = [c for c in s.lower() if c in ascii_lowercase]
    if aux(f, 0):
        return s + " is abcdearian"
    else:
        return s + " is not abcdearian"

def aux(s, i):
    if i >= len(s)-1:
        return True
    elif s[i] > s[i+1]:
        return False
    else:
        return aux(s, i+1) 
```

像这样使用它：

```
while True:
    s = input("String? ")
    if not s:
        break
    print(abc(s)) 
```

请注意，我将问题分为两部分：首先，“main”函数`abc()`负责过滤字符串，`aux`使用正确的初始值调用过程并在最后返回结果字符串（或者：您可以返回一个布尔值，创建结果字符串别处。）

真正的工作是在辅助`aux`函数中完成的，它递归地遍历字符串，检查字符串中所有连续字符对的“abcdearian”条件是否为真。遍历字符串的方式`aux`是高效的（撇开我们使用递归的事实不谈），因为它从不使用`s[1:]`. [它也是尾递归](https://stackoverflow.com/q/33923/201359)算法的一个例子，它密切反映了迭代解决方案的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T21:12:19.467

接受答案的最初编写方式似乎过于复杂。我已经提交了一个编辑，希望能解决这个问题。但是当我意识到这一点时，我已经写了下面的答案和解释。保留它，以防解释对某人有用：

```
def abc(s):
    filtered = [i for i in s.lower() if i in 'abcdefghijklmnopqrstuvwxyz']
    optionalNotString = ('' if _abc(filtered) else ' not')
    print( '{0} is{1} abcdearian'.format( repr(s), optionalNotString ) )

# Recursively process the "rest" (remainder) of the string.
# At each step, examine the first two characters.
def _abc(rest):
    if len(rest) < 2:
        # We've successfully compared all successive pairs, so return True.
        return True
    if (rest[0] > rest[1]):
        return False
    return _abc(rest[1:]) 
```

在使用中（最重要的测试案例，包括太短的字符串，以及在字符串 'acb' 的末尾以及字符串 'bac' 的开头检测到 False 条件。我第一次写的时候遇到了一个错误它，它未能将 'bac' 捕获为 False！）：

```
abc( '' )
abc( 'a' )
abc( 'ac' )
abc( 'abc' )
abc( 'acb' )
abc( 'bac' ) 
```

输出：

```
'' is abcdearian
'a' is abcdearian
'ac' is abcdearian
'abc' is abcdearian
'acb' is not abcdearian
'bac' is not abcdearian 
```

解释：

1.  过滤只需要进行一次，所以在主“abc”函数中进行，而不是在递归“_abc”函数中。

2.  在每一步，算法都需要查看两个相邻的字符。在每次调用“_abc”时，这些将是前两个字符。

3.  “_abc”需要处理两种情况：

    *   情况 1：字符串太短，无法进行比较。例如''或'a'。这样的字符串满足 abcderian 标准，所以返回 True。

    *   情况 2：字符串至少有两个字符。执行前两个的 abcderian 计算。如果失败，则答案为 False。否则，使用除第一个字符以外的所有字符进行递归。

4.  "repr(s)" 是一种让 "s" 与周围的引号一起打印的简单方法。

5.  “optionalNotString”：在真/假情况下所需的答案字符串仅因存在/不存在“不”而有所不同。所以使用 "if .. else .." 表达式，来控制 'not' 是否包含在格式化输出中。如果不需要，请替换空字符串 ''。

# mysql - 加载数据 MySQL

> ID：13637402
> 
> 赞同：4
> 
> 时间：2012-11-30T00:48:41.963
> 
> 标签：mysql, mysqldump

我在将 csv 数据加载到 mysql 表时遇到问题。

我有这样的数据：

```
Identity : name=Tomas, age=28, hoby=traveling;
Identity : name=Justin, age=29, hoby=Fhising; 
```

我想要这样的结果

```
|field1|field2|  field3 |
|tomas |  28  |traveling|
|justin|  29  | fhising | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:10:34.930

## 使用带有集合表达式的**直接**LOAD DATA INFILE

```
LOAD DATA INFILE 'FILENAME.CSV'
    INTO TABLE TABLENAME
    (@f1, @f2, @f3)
    FIELDS TERMINATED BY ','
    LINES TERMINATED BY ';'
    SET `field1` = SUBSTRING(@f1, LOCATE('name=', @f1)+5), `field2` = SUBSTRING(@f2, LOCATE('age=', @f2)+4), `field3` = SUBSTRING(@f3, LOCATE('hoby=', @f3)+5) 
```

注意我没有测试过。所以可能会有错误。请根据您的需要进行调整。

## 用作`awk`预处理器

预处理您的 csv 文件`awk`并调用`LOAD DATA INFILE`

```
awk -F[,=\;] '{print $2","$4","$6}' < FILENAME.CSV > PROPER.CSV 
```

现在在mysql中，

```
LOAD DATA INFILE 'PROPER.CSV'
        INTO TABLE TABLENAME
        FIELDS TERMINATED BY ','
        LINES TERMINATED BY '\n' 
```

# c# - SQL 程序集和 SQL 注入

> ID：13637407
> 
> 赞同：3
> 
> 时间：2012-11-30T00:49:19.593
> 
> 标签：c#, .net, sql-server-2005, sql-injection

我有几个 SQL CLR 项目作为程序集添加到我的 SQL Server 2005 中。它们是通过触发程序集的存储过程从我的 Web 应用程序访问的。

如何以及在我的 SQL 程序集中防止 SQL 注入的最佳实践是什么？

这些程序集有一堆代码可以构建疯狂的 SQL 语句（示例）：

```
 sqlBuff.Append("SELECT ");
        //  Always put replicate weight values on the first.
        sqlBuff.Append(colBuff.ToString());

        sqlBuff.AppendLine(" FROM ");
        String tableNames = colTabNameHelper.GetTableNameList(colNames);
        String joinStr = colTabNameHelper.CreateJoinStr(tableNames);

        sqlBuff.Append(joinStr);
        sqlBuff.AppendLine(" WHERE (");

        sqlBuff.Append(inMatrix.WeightVar); 
```

我也可以在这里防止注射吗？或者.NET/SQL Server 有帮助吗？我应该担心这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:23:30.963

避免注入攻击的最终方法是使用[参数](http://www.dotnetperls.com/sqlparameter)。你能在嵌入式程序集中使用这些吗？

# regex - 正则表达式中的 NOT 条件

> ID：13637408
> 
> 赞同：0
> 
> 时间：2012-11-30T00:49:30.133
> 
> 标签：regex

我正在使用 gsm 调制解调器，我想解析命令响应。我想用正则表达式来实现它。所以我在下面有文字：

```
1.AT+CMGF=0
2.
3.OK
4.AT+CMGF=1
5.
6.OK
7.AT+ji
8.
9.ERROR
10.AT+CPMS="ME","ME","ME"
11.
12.+CPMS: 50,100,50,100,50,100
13.
14.OK
15.AT+CMGL="ALL"
16.
17.+CMGL: 0,"REC READ","+7914xxxxxxx",,"12/11/27,12:27:00+44"
18.04DEC0777E03001281 1892
19.+CMGL: 1,"REC READ","+7924xxxxxxx",,"12/11/27,12:33:51+44"
20.04DEC0742E00200176 646411 17983
21.+CMGL: 6,"REC READ","+7924xxxxxxx",,"12/11/27,13:28:00+44"
22.ERROR 
23.+CMGL: 7,"REC READ","+79098088xxx",,"12/11/27,12:40:16+44"
24.OK
25.
26.+CMGL: 49,"REC READ","+7924xxxxxxx",,"12/11/27,14:01:01+44"
27.010104480150014300 127051 0020640
28.
29.OK 
```

我需要在每次操作之后捕获`ERROR`并`OK`从消息中排除它们，以防有人发送它们。我尝试了下一个：

```
(\r\n)(OK|ERROR)|^("\r\n(OK|ERROR)) 
```

但它不起作用。换句话说，我需要排除第 22 行、第 24 行并得到其余的`OK`行`ERROR`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:53:20.873

你的问题有点难以理解。如果您只需要从字符串中删除 OK 和 ERROR 消息，则应该使用简单的 String.Replace() 函数。但是，如果您还想获取换行符并返回字符，则可以使用以下正则表达式并替换为空字符串。

```
\r\n(?:OK|ERROR) 
```

但这将替换所有 OK 和 ERROR 消息，而不仅仅是第 22 和 24 行的消息。

我假设行号仅用于演示目的，而不是您尝试清理的实际字符串的一部分。如果它们是字符串的一部分，则正则表达式需要是这样的：

```
\r\n\d+\.(?:OK|ERROR) 
```

# php - 将 JSON 发送到 Jquery 失败

> ID：13637415
> 
> 赞同：0
> 
> 时间：2012-11-30T00:50:12.427
> 
> 标签：php, jquery, mysql, json

我的 php/jquery 脚本有问题。PHP 脚本假设从 MySQL 数据库中获取字段数组，然后将其解析为 JSON 并回显它，以便我可以在我的 Jquery 脚本中获取它。

问题是 Jquery 脚本没有正确抓取数据，或者它没有正确处理 JSON - 或者我做错了什么的最后一种可能性（这可能是因为 Jquery 对我来说是一个新的工作领域） .

我已经尝试了很多我在互联网上找到的不同的 Jquery 脚本，但这是我当前的代码：

**PHP：**

```
<?php 
     include("../../config.php");
     $roomId = $_POST['roomId'];

     $data = mysql_query("SELECT field FROM fields WHERE room = '$roomId' 
        AND value = 1 AND TYPE = ''") or die(mysql_error());

    while ($users = mysql_fetch_array($data)) {
        echo json_encode($users);
    }
?> 
```

**Jquery 脚本：**

```
function UpdateRoom() {
    var data = 'roomId='+roomId;

    $.ajax({
        type: "POST",  
        url: "chatfunctions/getplacementfield.php",
        dataType: 'json',
        data: data,
        success: function(data){
            var arrayValues = $.parseJSON(data);
            $.each(arrayValues, function() {
                $('#f' + parseInt(arrayValues.field).append('<div id="user" />');
             });
        }
    }); 
} 
```

谁能告诉我我做错了什么。如果这是不好的 Jquery 或 PHP，那么告诉我出了什么问题，正如我之前提到的，我是 Jquery 的新手，而不是 PHP 方面的专家。

PS：我在萤火虫控制台中没有收到任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:37:00.520

尝试设置，

```
header('Content-type: application/json'); 
```

在回显 json 数据之前。

您还应该删除此行 var arrayValues = $.parseJSON(data); 并将数据传递给每个函数。console.log(data) 来检查它的用户数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T11:22:05.997

试试这个，我希望你能从中得到一个想法，例如。-

**PHP：**

```
<?php

  $con = mysql_connect("localhost","root","");
  $dbs = mysql_select_db("rs", $con);

  $result = mysql_query("SELECT * FROM profile") or die(mysql_error()); 
  $json = array(); 
  while ($row = mysql_fetch_assoc($result)) { 
  $json[] = $row;
  }

  print json_encode($json);   
  exit;

?> 
```

**查询：**

```
$(function(){

    $.getJSON("userinfo.php",function(data)
    {
    $.each(data, function(i,data){
    var jsondata ="<li>Name : "+data.fname+" "+data.lname+"</li>";
    $(jsondata).appendTo("ol#userlist");
        });
        });
    }); 
```

# mysql - MySQL - Where clause for Date Comparison

> ID：13637417
> 
> 赞同：2
> 
> 时间：2012-11-30T00:50:17.357
> 
> 标签：mysql, sql

I have this query

```
select count(*) from sl_list 
where type = 'pantry' 
```

which returns thousands of rows that looks like this:

```
 uuid     type      create_dtime               mod_dtime
 124234525   pantry     2012-06-13 15:25:58       2012-06-13 15:27:51 
```

I want to adjust the query so that there is another where clause that states:

```
select count(*) from sl_list 
where type = 'pantry'
and "if create_dtime and mod_dtime are not the same day (i dont care about hours)" 
```

Thank you for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:51:32.613

```
select count(*) from sl_list 
where type = 'pantry'
and date(create_dtime) <> date(mod_dtime) 
```

# xml - R XML + XPath - 具有多个条件的getNodeSet

> ID：13637420
> 
> 赞同：4
> 
> 时间：2012-11-30T00:50:21.980
> 
> 标签：xml, r, xpath, web-scraping

我是 XPath 的新手——请放轻松。

在我的目标页面上为没有很多结构的元素提取 XPath 时遇到问题。

数据集是 NJ 学校[成绩单](http://education.state.nj.us/rc/rc11/nav.php?c=0)。个人成绩单如下[所示](http://education.state.nj.us/rc/rc11/rcreport.php?c=01;d=0110;s=100)

我已经想出了如何拉出带有`summary`标签的表格：

```
url <- paste("http://education.state.nj.us/rc/rc11/rcreport.php?c=",
  all_sch[i,1],";d=",all_sch[i,2],";s=",all_sch[i,3],sep = '')
doc = htmlParse(url)
admin_salaries = getNodeSet(doc, '//table[@summary="Administrative Salaries and Benefits"]') 
```

但是在没有很多额外的识别信息可以处理的情况下遇到了麻烦。

例如，包含学校名称和地区的表如下所示：

```
 <table cellpadding="0" cellspacing="0">
          <tr>
            <td><strong>SCHOOL:</strong></td>
            <td>&nbsp;New Jersey Ave</td>
          </tr>
          <tr>
            <td><strong>COUNTY:</strong></td>
            <td>&nbsp;Atlantic</td>
          </tr>
          <tr>
            <td><strong>DISTRICT:</strong></td>
            <td>&nbsp;Atlantic City</td>
          </tr>
        </table> 
```

我的策略是“找到表格节点并包含文本`COUNTY`

尽可能多地[阅读有关 XPath 的内容，我正在尝试这个：](https://stackoverflow.com/questions/2599198/select-on-multiple-criteria-with-xpath)

```
names = getNodeSet(doc,'//table and //*[contains(text(),"COUNTY")]') 
```

但是它没有返回表节点，而是给了我一个布尔`TRUE`值。

所以，问题是：**如何使用 XPath 查找具有文本 COUNTY 和 SCHOOL 的表？**

我尝试了很多其他策略，但收效甚微。其他人建议的一种方法是简单地使用以下方法提取每个表格数据单元格：

```
xpathApply( htmlTreeParse(url, useInt=T), "//td", function(x) xmlValue(x)) 
```

但模板对于缺失数据并不一致 - 不完整的报告具有完全不同的结构，并且元素在 2,000 多个页面中的位置不同。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T02:13:55.623

使用 xpath，获取所有表

```
xpathSApply( doc, "//table[contains(.,'SCHOOL:') 
                  and contains(.,'COUNTY') ]",xmlValue) 
```

只得到行

```
xpathSApply( doc, "//tr/td[contains(.,'SCHOOL:') 
                   and contains(.,'COUNTY') ]",xmlValue) 
```

# javascript - 如何保留在同步期间发生的 DBChangeTracker 中的更改？

> ID：13637424
> 
> 赞同：3
> 
> 时间：2012-11-30T00:50:27.983
> 
> 标签：javascript, html, synchronization, local-storage

我使用 SequelSphere 作为我的 HTML5 客户端数据库。我还使用“更改跟踪器”来跟踪我的应用程序正在执行的任何插入、更新和删除操作。当需要同步更改时，跟踪器会完美地报告更改。

问题是：向服务器发送数据是异步的，需要一些时间。在发送数据时，我希望应用程序继续工作，更改表中的更多数据，并让更改跟踪器继续跟踪更改。同步完成后，我调用“tracker.clearChanges()”来删除同步到服务器的更改。但是对“tracker.clearChanges()”的调用将清除所有更改，包括在同步期间添加但尚未同步的更改。

如何调用“clearChanges()”并仅删除同步的更改？或者我怎样才能保持同步发生时跟踪器记录的更改？

谢谢，

比尔·怀特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:02:34.987

好问题。我建议结束之前的更改跟踪器并开始一个新的跟踪器，如下所示：

```
//  Keeps track of trackers
var curTrackerNbr = 0;
var curTracker = null;
var syncTracker = null;

function getChangeTracker() {
    return db.changeTrackers.create("orders_tracker_" + curTrackerNbr, ["orders_table", "invoice_table"]);
}

function beginSync() {
    //  end current tracking, start new one
    syncTracker = curTracker;
    syncTracker.endTracking();
    //  creating a tracker automatically turns it on...
    curTracker = getChangeTracker();
    //  Get data to be sync'd
    var syncData = syncTracker.getChangedRows();
    //  Perform sync
    syncDataToServer(syncData, onSyncSuccess, onSyncFailure);
}

function onSyncSuccess() {
    //  remove the syncTracker (for cleaning purposes)
    db.changeTrackers.drop(syncTracker.name);
}

function onSyncFailure() {
    if (window.confirm("Want to try again?")) {
        var syncData = syncTracker.getChangedRows();
        syncDataToServer(syncData, onSyncSuccess, onSyncFailure);
    }
}

//  Now, let's create our first change tracker.
curTracker = getChangeTracker(); 
```

我希望上面的代码比我的话能更好地解释它！

约翰...

# c# - 进程不会终止

> ID：13637428
> 
> 赞同：-1
> 
> 时间：2012-11-30T00:51:00.853
> 
> 标签：c#, excel

我正在使用此代码创建 Excel 报告：

```
 var excel = new Excel.Application();
 foreach (var report in m_reports)
     report.PrintReport(excel.Workbooks.Add().Sheets.Add());
 excel.Visible = true; 
```

一切正常。但是，当用户手动关闭 Excel 时，Excel 进程在任务管理器中保持打开状态。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:16:07.410

在 MSDN 上查看有关[发布 ComObjects的信息](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)

```
System.Runtime.InteropServices.Marshal.ReleaseComObject( excel ); 
```

另外，如果您想在该 foreach 循环中执行其他操作，我建议您以正确的代码块格式包装您的代码，例如

```
 foreach (var report in m_reports)
 {
    report.PrintReport(excel.Workbooks.Add().Sheets.Add());
 }
 excel.Visible = true;
 //Release the ComObject
 System.Runtime.InteropServices.Marshal.ReleaseComObject( excel ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:00:31.583

这个答案有一个很好的规则： [如何正确清理 Excel 互操作对象？](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects/)

“永远不要在 com 对象中使用两个点。”

您正在声明工作簿和工作表对象而从未释放它们 - 这就是该过程不会退出的原因。

# recursion - 简单的递归 Prolog 函数

> ID：13637429
> 
> 赞同：0
> 
> 时间：2012-11-30T00:51:08.453
> 
> 标签：recursion, prolog

我目前正在尝试创建一个简单的函数，在给定第一个和最后一个数字的情况下打印列表中的整数。

例如，函数调用：count(3,7,Z) 将打印 "Z = [3,4,5,6,7]"

到目前为止，这是我的尝试：

```
count(First,Last,Result):-
  First <= Last,
  append(First,Result,Result),
  count(First+1,Last,Result). 
```

我到底做错了什么？这个想法是，只要 First 小于或等于 last，序列将继续附加到结果列表中。

提前致谢！我已经为此奋斗了很久！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:41:07.153

逐行：

1.  `count(First,Last,Result):-`

    糟糕的风格：这个名字暗示了另一个功能

2.  `First <= Last,`

    “小于或等于”运算符是 =<

3.  `append(First,Result,Result),`

    您正在传递 INT、LIST、LIST，但 append/3 具有签名 LIST、LIST、LIST，并且您想要更新值，但 Prolog 中的变量是“不可变的”，只有在 Result 不变的情况下，这样的调用才能成功

4.  `count(First+1,Last,Result).`

    算术表达式必须*显式*计算，这里你传递一个结构 +(First,1)

当测试（一旦更正）失败时，您也会错过编写所需行为的代码。怎么样`First>Last`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:55:27.420

你的程序有很多问题。首先，当您编写`3 + 2`Prolog 时，不会像任何其他语言那样计算结果。您必须明确要求进行计算并将计算结果通过谓词绑定到变量，`is`例如，`X is 3 + 2, ...`然后您将不得不在规则尾部的其余部分中使用。`X``5`

其次，写作`append(First, Result, Result)`意味着“通过附加`First`到`Result`你再次获得”，除非是空列表，否则`Result`它总是会失败（阅读：生产） ，因为如果你将某些东西附加到一个列表中，你会获得一个比你开始时更长的列表。您显然无法区分and中的两个s - 它们确实不一样。另请注意，这适用于列表，因此，并且必须都是可以实例化为列表的列表或术语，否则它将失败。这正是您的情况，因为它始终是一个数字 - 绝对不是列表，而是它的*成员*。所以你不应该使用：使用列表构造和统一`false``First``Result``append``count``append(A, B, C)``A``B``C``First`*`append``=`将元素附加到列表并将获得的结果绑定到变量，例如`X = [Element | List]`.*

 *最后，如果以上所有内容都正确，您的谓词仍然会失败，因为您没有定义归纳的基本情况。换句话说：你的谓词什么时候应该回答`[]`？正如 CapelliC 所说，这必须发生在`First > Last`: 在这种情况下，范围是空的，并且`Result`也必须是空的。在您的程序中，当这种情况发生时，谓词显然会失败（请注意，当您编写 时`foo(X, Y) :- X >= 0, Y is X + 1.`，这意味着无论何时`X`小于零都失败）。作为递归的基本情况的空范围，你的谓词的评估迟早会在那里结束，所以它总是会失败。

最后，您应该编写如下内容：

```
ints(First, Last, Interval) :- First > Last -> Interval = [] ;
  NFirst is First + 1, ints(NFirst, Last, NInterval), Interval = [First | NInterval]. 
```

（我为您的谓词和变量提供了更多的声明性名称）。当然，这个谓词只有在 First 和 Last 完全实例化为数字时才有效（它不能反转）。*

# mysql - 白天更新的记录

> ID：13637439
> 
> 赞同：0
> 
> 时间：2012-11-30T00:52:25.627
> 
> 标签：mysql, conditional-statements

```
SELECT `Item`.`name`, DATE_SUB(Item.modified, INTERVAL 1 DAY),
CASE
  WHEN DATE_SUB(Item.modified, INTERVAL 1 DAY) > Item.modified
  THEN 'FALSE'
  ELSE 'TRUE'
END status, `Item`.`restaurant_id` FROM `fs_development`.`items` AS `Item`
WHERE `Item`.`restaurant_id` = (677)
ORDER BY `modified` DESC LIMIT 1 
```

我想要一个状态字段，其中包含“TRUE”或“FALSE”来指示记录是否在当天更新。

到目前为止，上述方法还没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:53:26.623

```
SELECT `Item`.`name`, 
        DATE_SUB(Item.modified, INTERVAL 1 DAY),
        CASE WHEN date(Item.modified) = curdate()
             THEN 'TRUE'
             ELSE 'FALSE'
        END status, 
       `Item`.`restaurant_id` 
FROM `fs_development`.`items` AS `Item`
WHERE `Item`.`restaurant_id` = (677)
ORDER BY `modified` DESC
LIMIT 1 
```

# vb.net - vs2012下使用vb.net连接sqlite数据库的编程示例

> ID：13637440
> 
> 赞同：1
> 
> 时间：2012-11-30T00:52:28.050
> 
> 标签：vb.net, sqlite, connection, visual-studio-2012

我正在寻找一个简单的示例来说明如何在 VS2012 下使用 vb.net 连接到 SQLite 数据库。我已经从 SQLite.org 下载并安装了 SQLite dll，并且可以访问 SQLite 命名空间。需要访问的应用程序正在使用 XAML/VB.Net 在 Visual Studio 2012 中实现。一个包含所有导入引用的示例，说明连接、访问和访问现有表的过程就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-23T13:31:21.167

```
 Private Sub FrmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    constr = "Data Source=" & Application.StartupPath & "\latihan.db;"
    Dim cn As New SQLiteConnection(constr)
    Try
        cn.Open()
    Catch ex As Exception
        cn.Dispose()
        cn = Nothing
        MsgBox(ex.Message)
        Exit Sub
    End Try

    Dim dt As New DataTable
    Try
        dafill("select*from member order by nama", dt, cn)
        DataGridView1.DataSource = Nothing
        DataGridView1.DataSource = dt
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
    dt.Dispose()
    dt = Nothing
    cn.Close()
    cn.Dispose()
    cn = Nothing
End Sub 
```

# java - 片段内片段的 PagerView

> ID：13637441
> 
> 赞同：0
> 
> 时间：2012-11-30T00:52:34.647
> 
> 标签：java, android, android-fragments, android-viewpager

我有一个问题。首先，我有一个菜单，当您选择一个选项时，它会创建一个可以滑入和滑出的片段。

首次创建活动时，它会使用 Frag#1 填充我的视图。Frag#1 包含一个 PagerView，它包含可变数量的片段。当从正在启动的 Activity 自动创建 Frag#1 时，PagerView 被完美填充。

但是，如果我随后通过调用 .Replace 切换到任何其他 Frag，然后返回到调用 .replace 的 Frag#1，PagerView 将不可见地填充。

然而，即使 PagerView 中的片段是不可见的，我也可以通过它们滑动，并访问其中的 TextViews、Layouts 和 ImageViews。所以它们存在，否则我会为视图获得空值，或者不存在这样的 ID。但是 PagerView 中的片段仍然看不见。

当我到达 PagerView 的末尾时，它会填充最后一个，我可以看到其中的片段。现在，当我滚动回第一个时，我现在也可以看到它。但是中间的那个仍然消失了，但我可以访问其中的视图。

有谁知道这里发生了什么？

如果不是尝试用 Frag#1 替换旧片段，而是重新启动活动，它会再次正常工作。

IE

```
public void reload() {

    Intent intent = getIntent();
    overridePendingTransition(0, 0);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    finish();

    overridePendingTransition(0, 0);
    startActivity(intent);
} 
```

# android-dialog - 为什么当我按下后退按钮时会调用 onPrepareDialog？

> ID：13637445
> 
> 赞同：2
> 
> 时间：2012-11-30T00:53:07.410
> 
> 标签：android-dialog

我有三部用于开发的安卓手机。Galaxy S、Galaxy S3 和 HTC one X。在 S 和 HTC 上，我的应用程序运行良好。但是，在 S3 上，有一个奇怪的错误。

我`Dialog`在主要活动中打开一个，然后`dismiss()`它。然后我继续进行另一项活动。然后我按下后退按钮，由于某种原因，`onPrepareDialog()`主活动的方法运行，关闭`Dialog`作为它的参数。这要么什么都不做（从用户的角度来看），要么它可能会崩溃，因为`onPrepareDialog()`期望应用程序处于某种状态，而不是在这种情况下。

现在，很明显，我不应该让它失去这样的好状态，或者我应该在它发生的时候处理。不管这个问题的答案如何，我都会解决这些问题。但是**为什么`onPrepareDialog()`首先调用该方法，为什么它只会在 S3 上引起问题？**

（我刚刚意识到 S3 可能不是唯一一个运行该方法的，而是唯一一个正在丢失状态的，但我实际上并没有任何真正的想法。）

# c - 如何使用 htonl 将小端转换为大端

> ID：13637447
> 
> 赞同：0
> 
> 时间：2012-11-30T00:53:10.470
> 
> 标签：c, struct, byte, endianness

我有以下元素的结构。加上结构完全填充。

```
typedef struct {
    uint16_t a;
    uint16_t b;
    uint8_t c;
    uint8_t d;
    uint8_t e[6];
} ad; 
```

这种结构有点小端。我的意思是当我在我的大端机器上打印这个结构时，我得到以下信息

如果 c=1，d=2，e[0] =3，e[1]=4。我明白了

c=4，d=3，e[0] = 2 和 e[1]=1。

a 和 b 交换。此外，e[1] 与 c 交换，e[0] 与 d 交换。

我正在使用`htonl`如下功能。但是，它不起作用，任何人都可以建议我一个好的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:04:32.283

Endian-ness 仅适用于单个字段，而不适用于结构字段的顺序。在您列出的字段中，只有定义为 uint16_t 的多字节整数字段受字节顺序控制，而 uint8_t 是单字节，因此无需考虑排序问题。无论字节序如何，单字节值的数组也将保持相同的长度。

要转换 uint16_t，您需要使用 htons() 函数而不是 htonl()。htonl() 函数需要一个 long，通常至少为 4 个字节。

```
uint16_t netShort = htons(uint16_t hostShort); 
```

或者对于您的示例结构：

```
struct.a = htons(struct.a);
struct.b = htons(struct.b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:09:13.160

对于前两个元素a和b，它们是uint16_t，所以你应该使用htons/ntohs来转换它们。其余三个元素 c、d 和 e，它们是 uint8_t，你不需要转换它们。

顺便说一句，我不知道你是否在变量 ad (struct) 上使用了 ntohl，只是向你澄清一下，你应该将 struct 的每个元素一个一个转换，而不是用 ntohl/ntohs 转换整个 struct 变量/htonl/htons.

# android - Android NDK：如何链接多个 3rd 方库

> ID：13637450
> 
> 赞同：4
> 
> 时间：2012-11-30T00:53:31.153
> 
> 标签：android, android-ndk, static-libraries

假设我们正在构建一个共享库 A，它需要链接到 2 个外部静态库 B 和 C。您所拥有的只是 libB.a 和 libC.a，以及它们的头文件。

这是 libA 的简化 Android.mk：

```
LOCAL_LDLIBS := ../external/libB.a ../external/libC.a

include $(BUILD_SHARED_LIBRARY) 
```

AFAIK，共享库的链接方式是：

1.  获取 B 和 C 的所有目标文件
2.  去掉 A 没有引用的目标文件
3.  解析 B 和 C 中的引用

这会导致链接错误，因为 B 和 C 相互调用，特别是它们调用在步骤 2 中被剥离的函数，因为 A 没有调用它们。

如果我们自己构建静态库，那么只需将 LOCAL_STATIC_LIBRARIES 替换为 LOCAL_WHOLE_STATIC_LIBRARIES，这可以防止代码剥离（以牺牲代码大小为代价）。在引擎盖下，它将 --whole-archive 传递给链接器。

由于我们没有构建 B 和 C（甚至没有重建它们的源代码），有哪些选择？

1.  手动引用 A 中缺少的函数，以免它们被剥离
2.  弄清楚如何将 --whole-archive 传递给外部静态库的链接器
3.  使用 PREBUILT_STATIC_LIBRARY （看到它提到，但从未使用过它，根据文档，它在这种情况下听起来不适用）
4.  构建可执行文件而不是共享库（不会以相同的方式剥离代码）
5.  移动/重命名外部库以欺骗 NDK 构建系统认为它们是我的，以便我可以将它们添加到 LOCAL_WHOLE_STATIC_LIBRARIES。

我选择了选项 1，因为它是第一个有效的方法，但显然它不是很好。我在问是否有更好的解决方案。

这个问题的答案（[Linking issue when prebuilt static and shared libraries with the Android NDK](https://stackoverflow.com/questions/9779815/linking-issue-when-prebuilt-static-and-shared-libraries-with-the-android-ndk)）让我想知道我是否需要重新评估我的构建设置（共享库链接到外部静态库）。我无法在那里发表评论，所以我在这里问了我自己的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T10:23:17.223

答案可以在*[如何使用 binutils 链接器处理静态库之间的递归依赖关系？](https://stackoverflow.com/questions/2738292/how-to-deal-with-recursive-dependencies-between-static-libraries-using-the-binut)*.

```
LOCAL_LDLIBS := -L ../external/ -lB -lC -lB 
```

我采用了两个库的 NDK 示例，并进行了最小的更改以[在 GitHub 上](https://github.com/alexcohn/TwoLibs---circular-dependency/commits/master)演示该技术。

**更新（2017）**：自2012年以来，NDK的规则变得更加严格，现在它会抱怨`LOCAL_LDLIBS`包含非系统库：

> Android NDK：警告：Android.module：链接器标志中的非系统库：-la -lb
> Android NDK：这可能会导致构建不正确。尝试使用 LOCAL_STATIC_LIBRARIES
> Android NDK: 或 LOCAL_SHARED_LIBRARIES 来列出
> Android NDK: current module 的库依赖项

这只是一个警告，因此您可以忽略它。

或者在后面添加空间`-l`以超越 NDK 保护：

```
LOCAL_LDLIBS := -L ../external/ -l B -l C -l B 
```

或者，您可以使用

```
LOCAL_LDLIBS += -L ../external -Wl,--start-group -l B -l C -Wl,--end-group 
```

如果所涉及的库不是预构建的，则无需猜测它们的位置（这在使用 Android Studio NDK 集成时可能特别棘手）。采用

```
LOCAL_LDLIBS := -L $(TARGET_OUT) … 
```

存在一种替代方法，它不使用“递归”链接。但它涉及迭代。首先，尝试以通常的方式构建您的共享库。如果此操作因未解析的符号而失败，请将所有这些符号复制到剪贴板，并将它们粘贴到您的**Android.mk**中。假设这些符号是`extBa`,`extBb`和`extBc`(*在上面的场景中，我相信**libC**的某些对象没有找到这些在**libB**某处定义的符号，这就是链接失败的原因*)。您现在需要的，添加

```
LOCAL_LDFLAGS += -Wl,-u'extBa' -Wl,-u'extBb' -Wl,-u'extBc' 
```

您可以进行下一步，并将这一切与**libC**捆绑在一起：

```
LOCAL_EXPORT_LDFLAGS += -Wl,-u'extBa' -Wl,-u'extBb' -Wl,-u'extBc' 
```

现在任何使用**libC**的共享库都不会错过这些符号。

# mysql - 计数和子选择

> ID：13637451
> 
> 赞同：1
> 
> 时间：2012-11-30T00:53:53.020
> 
> 标签：mysql, sql

我有一个选择，它会显示标题、bookcopyid 和名称。

```
select 
    books.title, borrow.bookcopiesid, users.name, usersid,library_locations.name, checkout_date, return_date, due_date 
FROM 
    books,  borrow,users, library_locations, userlib 
WHERE 
    library_locations.id = userlib.libid 
AND 
    userlib.userid = users.id 
AND 
    borrow.bookcopiesid = books.bookid 
AND 
    borrow.usersid = users.id and return_date is not null ; 
```

我怎么能得到类似的东西

```
SELECT title, COUNT(*) as count 
FROM (
    SELECT books.title, borrow.bookcopiesid, users.name, usersid,library_locations.name, checkout_date, return_date, due_date 
    FROM books,  borrow,users, library_locations, userlib 
    WHERE library_locations.id = userlib.libid and userlib.userid = users.id and borrow.bookcopiesid = books.bookid and borrow.usersid = users.id and return_date is not null) 
GROUP BY title 
ORDER BY count DESC); 
```

去工作。

我正在尝试显示每个名称的标题数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:03:23.157

我想这就是你要找的吗？

```
SELECT
    books.title,
    COUNT(*) as count
FROM
    books, 
    borrow,
    users, 
    library_locations,
    userlib 
WHERE 
    library_locations.id = userlib.libid 
    AND userlib.userid = users.id 
    AND borrow.bookcopiesid = books.bookid 
    AND borrow.usersid = users.id 
    AND return_date is not null
GROUP BY books.title 
ORDER BY COUNT(*) DESC; 
```

不需要子查询；您只需要限定`SELECT`and`GROUP BY`子句中的列（就像您在`WHERE`子句中所做的那样）。

另外，`return_date`需要有资格......但我不知道来自哪个表，所以你可以自己添加。

# ios - 如何将 xcode 4.5 代码编译为 xcode 4.3？

> ID：13637455
> 
> 赞同：3
> 
> 时间：2012-11-30T00:54:15.360
> 
> 标签：ios, xcode, ios6, xcode4.3, xcode4.5

我正在制作一个基于 xcode 4.5 的项目，但我有一个问题，即该项目现在必须支持 iOS 4.0。所以我找到了一个安装在 Xcode 4.3 上的 mac。

但这是问题的开始。我的代码不适用于 xcode 4.3，因为我的代码有 iOS 6 代码，例如

```
-(NSInteger) supportedInterfaceOrientations 
```

我不想使用`respondsToSelector`，因为如果我使用这种方法，我必须多次做同样的工作。所以我想使用检查 xcode 版本或 iOS SDK 检查的宏？我想如果我找到那个宏，我可以确定哪些代码必须编译。我怎样才能制作那个宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:12:02.023

看看苹果的 .h 文件，里面满是宏。例如 MkMapView.h

```
#if (__IPHONE_5_0 <= __IPHONE_OS_VERSION_MAX_ALLOWED) 
```

或这个

```
- (void)addOverlay:(id <MKOverlay>)overlay NS_AVAILABLE(NA, 4_0); 
```

你可以在文件中找到更多

> /usr/include/Availability.h

也有详细的文档

# javascript - 动态 DOM 构建 508 投诉吗？

> ID：13637456
> 
> 赞同：14
> 
> 时间：2012-11-30T00:54:21.243
> 
> 标签：javascript, backbone.js, ember.js, accessibility, section508

随着越来越多的人使用 Backbone、Ember 和其他 JS MVC 类型的框架，越来越多的 HTML DOM 正在动态构建，第一个 HTML 页面仅包含一个“根”元素，用于将生成的 HTML 转储到其中。

这种做法是508投诉吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:17:07.957

大概只要每个人都有办法访问您提供的任何信息，那么可以。如果您完全依赖 JavaScript 来提供上述信息，那么我猜不会，因为不是每个人都启用了 JavaScript。第 508 节要求`<noscript>`标签提供通过其他方式获取信息的能力，因为并非所有辅助技术都可以访问相同的信息。这似乎是这些事情的一般工作方式（[W3 可访问性](http://www.w3.org/TR/WCAG10/)指南强调了这一点，而 508 标准，特别是那些关于[equivalency](http://www.section508.gov/index.cfm?fuseAction=stdsdoc#Equivalent)的标准，似乎说得差不多）。

[因此，根据508 标准](http://www.section508.gov/index.cfm?fuseAction=stds)，呈现不必相同，只要体验是“可比的”即可。但我认为，如果演示文稿依赖于 JavaScript（并且动态 DOM 构建*需要*JavaScript），则体验将无法比较，因此您将不得不提供该站点的替代 HTML 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T20:59:27.070

这一切都取决于你如何做到这一点。我可以采用一个本应符合 508 标准的系统（如 Plone）并使其完全不符合标准。

如果您想制作动态网站，我建议您研究 WAI-ARIA。它是官方 HTML5 规范的一部分，并受到所有主流浏览器的支持。

简而言之，WAI-ARIA 的工作原理是允许开发人员向标签添加角色属性。例如，如果标签会在页面上弹出，您可以赋予标签“警报”角色。您可以将角色与 CSS 和 JS 结合起来，创建可供各种残障人士使用的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T01:45:59.080

I believe, so long as you provide a static version of your webpage, then it should be complaint. MVC and MVVC websites contain AJAX content and, by default, they use JavaScript to push and pull the information on the page as well as construct the DOM. This alone isn't enough, but If you follow the guidelines for providing an indexed version of your website then you can have a full static representation of each page. Those pages are pages that you would want a search engine to see (this would essentially be the same as the public). Follow this approach and theoretically it should work.

Here's some more info about how this works with a MVC JavaScript framework called AngularJS: [http://www.yearofmoo.com/2012/11/angularjs-and-seo.html](http://www.yearofmoo.com/2012/11/angularjs-and-seo.html)

# c# - 映射到 PetaPoco 中的集合？

> ID：13637459
> 
> 赞同：8
> 
> 时间：2012-11-30T00:55:16.907
> 
> 标签：c#, petapoco

有没有办法将以下内容映射到 a `Dictionary<int,int>`？似乎它为尽可能多的返回结果生成行，但它们没有值......

```
Sql sql = new Sql()
    .Append("SELECT Count(*) as 'Answer Count', QuestionId")
    .Append("FROM CF.Answers")
    .Append("WHERE SurveyId = @0", surveyId)
    .Append("GROUP BY QuestionId");

var result = database.Fetch<Dictionary<int,int>>(sql); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T13:20:45.090

## Fetch 总是返回一个`List<T>`

`Fetch<T>()`方法返回 a的事实`List<T>`意味着在您的代码示例中它返回

```
List<Dictionary<int, int>> result = ... 
```

这可能不是您想要的，而且每本字典只会包含一个项目，这比您首先想要拥有一本字典的全部原因更胜一筹。据我了解，您实际上想要得到的问题是：

```
Dictionary<int, int> result = ... 
```

当然，还有一些扩展方法`List<T>`可以让您将其转换为其他类型。一种这样的方法是`.ToDictionary()`可以将您的结果转换为您想要获取的字典。

## 第一个想法

现在我们手头的问题是我们**可以使用什么类型**的`Fetch`方法？一开始我想到了两件事：

```
KeyValuePair<int, int>
Tuple<int, int> 
```

尽管好主意，但它们都不行，因为`Key`属性 in`KeyValuePair`没有公共设置器，而第二个属性没有 PetaPoco 可以使用的无参数构造函数。

## 解决方案

我们在这里留下的是创建一个类似于`Tuple`但具有我们实际上可以与 PetaPoco 一起使用的功能的自定义类型。让我们把这个类型变成通用的，这样我们就可以很容易地用不同的类型重用它：

```
public class Pair<T1, T2>
{
    public T1 Item1 { get; set; }
    public T2 Item2 { get; set; }
} 
```

使用这个自定义类，我们现在可以轻松获取字典：

```
Sql sql = new Sql()
    .Append("SELECT QuestionId as Item1, COUNT(*) as Item2")
    .Append("FROM Answers")
    .Append("WHERE SurveyId = @0", surveyId)
    .Append("GROUP BY QuestionId");

var result = database
    .Fetch<Pair<int,int>>(sql)
    .ToDictionary(i => i.Item1, i => i.Item2); 
```

请注意，我已经颠倒了选择字段的顺序（并将它们设置为不同的别名），因为您不希望计数成为字典键（因为它们可能会重复）而是问题 ID。因此，要么像我一样颠倒选择字段的顺序，要么为`.ToDictionary()`扩展方法提供正确的选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-09T22:05:32.510

我会选择使用动态：

```
var result = database.Query<dynamic>(sql)
    .ToDictionary(d => d.QuestionId, d => d.AnswerCount); 
```

几点注意事项：

*   您需要从“答案计数”列中删除空间并使用“答案计数”才能使其正常工作。
*   出于性能原因，我使用`Query`而不是；`Fetch`从理论上讲，它应该跳过具体化到`List`第一个，而是将结果直接流式传输到`Dictionary`.

# c++ - 在 Visual C++ 2012 中使用其他库

> ID：13637462
> 
> 赞同：0
> 
> 时间：2012-11-30T00:55:36.673
> 
> 标签：c++, visual-c++, visual-studio-2012, pthreads

您好，我想在 Visual C++ VS2012 中使用 pthread。我下载了发布文件，但我不知道如何为 VS2012 包含和加载它，因为它给出了这样的错误`IntelliSense: cannot open source file "pthread.h"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:09:52.910

右键单击项目 -> 属性 -> C/C++ -> 常规 -> 附加包含目录。

在那里添加目录。

对于库，转到 Linker -> General 并添加包含库的目录，然后转到 Linker -> Input 并添加库本身。

另外，请注意 IntelliSense 不是编译器，因此这甚至可能是误报错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:04:38.340

右键单击项目并选择属性页。然后将包含的路径和库添加到 VC++ 目录。在链接器部分，添加 lib 文件名本身（可能是 pthreads.lib）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T02:51:23.747

“附加包含目录”和“VC++ 目录”之间存在区别：

1.  附加的包含目录封装在项目文件中。因此，在此处进行更改不会破坏或修改您从事的任何其他项目的编译或链接。

2.  VC++ 目录由您使用该编译器构建的所有项目共享。您可以通过修改此处找到的内容来轻松破坏其他项目。

为了避免破坏（有时以非常微妙和令人困惑的方式）不相关的项目，最好通过设置附加包含目录（以及等效的库）将目录设置封装在特定项目中。

# android - Android - 带有 ViewPager 的 ZoomableImageView

> ID：13637466
> 
> 赞同：1
> 
> 时间：2012-11-30T00:56:00.610
> 
> 标签：android, imageview, zooming, android-viewpager, touch-event

我无法在查看器中实现缩放和平移图像视图。问题是只有在完全缩小后才允许查看寻呼机进行寻呼。

我读到我必须使用 onInterceptTouchEvent，并将其设置为 true 以让寻呼机处理触摸事件（页面）而不是 imageView。

现在，我如何让 viewpager 知道 imageView 已缩小而不拦截事件？我创建了一个在 ImageView 的 onTouchEvent 内触发的侦听器，但显然它不起作用，因为在拦截时事件甚至没有传递到那里。

谢谢 ！

# c# - 为什么允许 var var = "" 但不允许 string string = ""

> ID：13637470
> 
> 赞同：0
> 
> 时间：2012-11-30T00:56:33.520
> 
> 标签：c#, keyword

> **可能重复：**
> [C#：为什么我可以创建一个名为“var”的类？](https://stackoverflow.com/questions/10548988/c-why-can-i-create-a-class-named-var)

为什么`var var = ""`允许作为有效的 c# 代码但`string string = ""`不是？它们都是关键字，不是吗？

# iphone - iOS6 时间间隔错误

> ID：13637472
> 
> 赞同：0
> 
> 时间：2012-11-30T00:56:49.027
> 
> 标签：iphone, objective-c, ios

我有一些代码在 iOS 5 中运行良好，但在 iOS 6 中中断。

它是 TimeIntervalSinceDate 方法...

我发现其他人有这个问题，但没有解决方案：

这是我的代码：

```
 NSString *origDate = @"2012-11-29 19:43:30";

   NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setFormatterBehavior:NSDateFormatterBehavior10_4];
    [df setDateFormat:@"YYYY-MM-dd HH:mm:ss"];
    NSDate *convertedDate = [df dateFromString:origDate];
    [df release];

    NSDate* sourceDate = [NSDate date];

    NSLog(@"sourceDate: %@", sourceDate);
    NSLog(@"convertedDate: %@", convertedDate);

    NSTimeInterval ti = [ sourceDate timeIntervalSinceDate:convertedDate];

    NSLog(@"interval double: %f", ti); 
```

在 iOS 5 中，我将其作为一个值：

```
interval double: 711.113610 
```

在 iOS 6 中，我得到：

```
interval double: 31623151.242078 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:07:26.660

看看 Apple 对[Date Formatters](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)的评价：

> 一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:10:15.637

iOS 在 5.1 和 6 之间切换了 Unicode 版本。

iOS 6.0 - 使用[tr35-25](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)而不是[tr35-19](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)

# kendo-ui - 如何使用脚本显示 Kendo Grid 的 columnMenu

> ID：13637475
> 
> 赞同：5
> 
> 时间：2012-11-30T00:57:49.790
> 
> 标签：kendo-ui

Kendo Grid 有一个非常好的列上下文菜单（又名：columnMenu），您可以通过右键单击每个列标题来访问它。通过将 Kendo Grid 中的字段设置为：

列菜单：真

启用 columnMenu 后，它会在网格中显示列，并允许您显示/隐藏列、排序和过滤它们。但是，我们需要将此列菜单移到网格之外并将其绑定到一个按钮。所以当用户点击一个按钮时，就会出现列菜单。有没有办法通过javascript调用它？

此请求类似于 Michiel（2012 年 3 月 5 日）提出的请求。但是，在那个特定的情况下，它是对不同产品 Telerik MVC Grid 的 contextMenu 的请求。Michiel 问题的 URL 如下作为参考： [http ://www.telerik.com/community/forums/aspnet-mvc/grid/how-to-show-column-context-menu-using-script.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/how-to-show-column-context-menu-using-script.aspx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T07:43:27.297

就像触发列的点击事件一样简单：

```
$("#grid .k-header-column-menu:first").click(); 
```

这是一个工作演示：http: [//jsbin.com/ihivif/2/edit](http://jsbin.com/ihivif/2/edit)

# graphite - 石墨的summary 和diffSeries 的顺序

> ID：13637477
> 
> 赞同：2
> 
> 时间：2012-11-30T00:58:00.757
> 
> 标签：graphite

我试图在总结的一段时间内从几个其他石墨指标的总和中减去几个石墨指标的总和。但是，根据我是在执行 diffSeries 之前还是之后进行总结，我会得到不同的结果。

我希望下面的这两个石墨查询是相同的，但它们不是：

```
summarize(
  diffSeries(
    sum(
      stats_counts.otherthing.one,
      stats_counts.otherthing.two
    ),
    sum(
      stats_counts.thing.one,
      stats_counts.thing.two,
      stats_counts.thing.three
    )
  ),
  '1week',
  'sum',
  true
) 
```

通过 diffSeries 外部的汇总（如上），根据查看 csv 导出中的原始数据，我得到的数字似乎太高了。

```
diffSeries(
  summarize(
    sum(
      stats_counts.otherthing.one,
      stats_counts.otherthing.more_than_five
    ),
    '1week',
    'sum',
    true
  ),
  summarize(
    sum(
      stats_counts.thing.one,
      stats_counts.thing.two,
      stats_counts.thing.three,
    ),
    '1week',
    'sum',
    true
  )
) 
```

以上似乎给了我正确的数据，但我宁愿只需要总结一次，而且我一生都无法弄清楚为什么它应该有所不同。当我只是将它们作为总和而不是总结时，似乎 diffSeries 的论点变得一团糟，但我不确定如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:09:22.030

我不完全确定，但也有一些奇怪的行为`diffSeries`。就我而言，看起来我总是得到积极的差异，而应该是消极的。

查看代码，`diffSeries`使用了一个名为[`safeDiff`](https://github.com/graphite-project/graphite-web/blob/master/webapp/graphite/render/functions.py#L52). 在我看来，[函数的第一行](https://github.com/graphite-project/graphite-web/blob/master/webapp/graphite/render/functions.py#L53)可能是罪魁祸首。它只接受不是的值`None`，所以如果你尝试从 diff 一个数值`None`，它会输出（正）数值......我本来期望的是一个负数。

也许有一种方法可以将`None`/转换`null`为零？我在石墨中找不到这样做的功能。有一个[`drawNullAsZero`](http://graphite.readthedocs.org/en/0.9.10/render_api.html#drawnullaszero)，但有某种 a`treatNullAsZero`吗？或者我错过了什么。

无论如何，我怀疑这*可能*与您看到的问题有关。

# php - 没有输入的价值？PHP/HTML

> ID：13637487
> 
> 赞同：0
> 
> 时间：2012-11-30T00:59:33.640
> 
> 标签：php, html, forms

所以我正在创建一个包含一堆数字输入字段的表单。正在使用的用户可能不会在所有这些中输入值，因此我想为此设定条件。

示例代码：

```
<input type="number" min="0" max="100" step="any" name="test">
$test = $_POST['test']; 
```

`$test`表单提交时的值是多少？我原本以为它是“null”，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:01:48.617

它将不包含任何值：

```
if (empty($_POST['test'])) {
    echo 'test contains no value';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:35:08.350

It's an empty string. NULL is absolutely nothing--not even a string. Empty input is still a string, but it just doesn't hold any content. It's confusing, but very different!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T02:57:37.180

您可以使用[var_dump(](http://php.net/manual/en/function.var-dump.php) ) 从表单中检查值（包含值类型）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T00:23:24.753

一个空的表单域的内容相当于`""`如果你喜欢这样比较它。

# javascript - 使用 Javascript 更新 HTML 表单中的隐藏输入

> ID：13637491
> 
> 赞同：1
> 
> 时间：2012-11-30T00:59:48.397
> 
> 标签：javascript, jquery, html, forms

我有一个 HTML 表单，其中包含 3 个组（A、B 和 C）中的一系列问题，用户只能回答任一组的问题。我有一个脚本可以验证他们的输入，以检查他们是否只回答了一组中的所有问题。

我想捕捉他们回答了哪组问题并将其作为隐藏输入发送。我已经设置了这样的隐藏输入：

```
<input type="hidden" name="type" value="" id="type"> 
```

理想情况下，我想在提交时将其替换为：

```
<input type="hidden" name="type" value="groupA" id="type"> 
```

我已经设置了一个显示表单/脚本的小提琴：

[http://jsfiddle.net/fmdataweb/CGp8X/](http://jsfiddle.net/fmdataweb/CGp8X/)

这是我当前的验证脚本：

```
$('#editRecord').on('submit', validate);
$('input.sectionclear').on('click', function() {
    $(this).next().find('input').attr('checked', false);
});
function validate(ev) {
    var sectionsTouched = $('tbody').has(':checked'),
       inputs = {},
       errorMessage = '';

    if (sectionsTouched.length === 0) {
        errorMessage = 'Please check something before submitting.';
    } else if (sectionsTouched.length > 1) {
        errorMessage = 'Please complete A or B or C only';
    } else {
        sectionsTouched.find('input').each(function(i, e) {
            var me = $(e), name = me.attr('name');
            inputs[name] = !!inputs[name] || me.is(':checked');
        });
        $.each(inputs, function(k, v) {
            if (!v) {
                errorMessage = 'It appears you have not completed all questions.';
            }
            return v;
        });            
    }
    if (errorMessage !== '') {
        $('#error').html(errorMessage);
        ev.preventDefault();
        return false;
    }
    return true;
}

function seriesNames() {
    var names = [];
    $('h3').each(function(i, e) {
        names.push($(e).text());
    });
    return names;
}

function namesCommaDelimited(namesArr, conjunction) {
    var retval = '', i, l = namesArr.length - 1, delimiter = '';
    if (l === 0) {
       return retval;
    }
    for (i = 0; i < l; i += 1) {
        retval += delimiter;
        retval += namesArr[i];
        delimiter = ', ';
    }
    retval += delimiter;
    retval += conjunction;
    retval += ' ';
    retval += namesArr[l];
    return retval;
}
​ 
```

是否有可能以某种方式扩展它以捕捉他们回答的哪组问题？HTML 表有 3 个标签来标识每个组：

```
<tbody class="groupA"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:18:26.900

您可以通过检查检查输入的数量是否是输入数量的一半来生成它们。

```
$('tbody[class^=group]').each(function (i, val) {
  if ($('input:checked', val).length == $('input', val).length / 2) {
    console.log($(val).attr('class'));
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:05:32.613

我希望你没有嫁给你的代码:)

这有点难以理解，所以我只是制作了一个原型，希望你可以遵循它并且应该允许你做你正在寻找的事情：将答案限制为特定形式。我还进行了一些简单的验证，以确保完整填写表单并在表单无效时关闭按钮。现在看代码：

**HTML**

```
<h2>Table A</h2>
<table id="tableA" border="1">
    <tr>
        <td>
            A1
        </td>
        <td>
            <input type="radio" name="a1" value="1" /> Yes
            <input type="radio" name="a1" value="0" /> No
        </td>
    </tr>
    <tr>
        <td>
            A2
        </td>
        <td>
            <input type="radio" name="a2" value="1" /> Yes
            <input type="radio" name="a2" value="0" /> No
        </td>
    </tr>
    <tr>
        <td>
            A3
        </td>
        <td>
            <input type="radio" name="a3" value="1" /> Yes
            <input type="radio" name="a3" value="0" /> No
        </td>
    </tr>
</table>

<h2>Table B</h2>
<table id="tableB" border="1">
    <tr>
        <td>
            B1
        </td>
        <td>
            <input type="radio" name="b1" value="1" /> Yes
            <input type="radio" name="b1" value="0" /> No
        </td>
    </tr>
    <tr>
        <td>
            B2
        </td>
        <td>
            <input type="radio" name="b2" value="1" /> Yes
            <input type="radio" name="b2" value="0" /> No
        </td>
    </tr>
    <tr>
        <td>
            B3
        </td>
        <td>
            <input type="radio" name="b3" value="1" /> Yes
            <input type="radio" name="b3" value="0" /> No
        </td>
    </tr>
</table>

<p>
    <button id="submit">Submit</button>
    <button id="reset">Reset</button>
</p>

<input type="hidden" id="activeTable" /> 
```

**JS**

```
window.ns = {};
ns.activeTable = null;
ns.validate = function() {
    // Simple validation
    // If we don't have 3 checked radio buttons, it is invalid
    var checked = $("#" + ns.activeTable).find("input[type=radio]:checked");
    var valid = (checked || []).length === 3;
    $("#submit").prop("disabled", !valid);
    return valid;
};

ns.validate();

$("#submit").click(function() {
    var valid = ns.validate;
    if (valid == false) {
        alert("You must complete the form!");
        return;
    }

    var results = $("#" + ns.activeTable).find("input[type=radio]:checked");
    var output = ns.activeTable + " Results\n";
    $.each(results, function(idx, data) {
        output += "\t" + $(this).prop("name") + 
            " - " + $(this).val() + "\n";
    });
    alert(output);
    $("#activeTable").val(ns.activeTable);
});

$("#reset").click(function() {
    $("input[type=radio]").prop("checked", false);
    ns.activeTable = null;
    ns.validate();
});

$("input[type=radio]").click(function() {
    var selectedTable = $(this).closest("table");
    if (ns.activeTable != null && 
        selectedTable.prop("id") != ns.activeTable) {
        alert("Invalid form selection. Onlye selections from " + 
              ns.activeTable + " are allowed");
        $(this).prop("checked", false);
    } else {
        ns.activeTable = selectedTable.prop("id");
    }
    ns.validate();
});​ 
```

​<strong>CSS

不需要，只是想让它看起来不错:)

```
html { margin: 10px; }
table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
table td { border: 3px solid #CCC; padding: 5px; }
table td:nth-child(1) { width: 75%; }
table td:nth-child(2) { text-align: center; }
h2 { font-size: 1.8em; font-weight; bold }
button { padding: 5px; border-radius: 15px; background-color: #CCC; 
         width: 100px; }​ 
```

最后，看看它的实际效果：[jsFiddle](http://jsfiddle.net/jesus_tesh/A9uHv/)

我正在使用表 id 来确定哪个表单是“活动的”并存储该值。这就是我可以限制用户必须使用哪种形式的方法。

验证很简单：它只是确保为当前表单选中了 3 个复选框。这适用于示例，但除非每个表单的问题数量相同，否则您会想要更强大的东西。

验证还控制何时启用提交按钮。还有一个重置按钮可以清除单选按钮的值，以便您再次尝试。

希望这证明有用如果没有，我仍然玩得很开心:)

**编辑**

男孩，我是一个吸毒者吗？我完全没有放入隐藏字段并设置*被问到的问题的值！*这种“疏忽”已得到纠正。另外，只是为了表明该值是在提交时设置的：

![隐藏字段值已设置](../Images/f34f04a03e72777915e05608e0cee9d4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:24:22.277

I can suggest a few changes to make it more readable, first, what does "namesComaDelimited" do? can't you just use javascript's join method? [http://www.w3schools.com/jsref/jsref_join.asp](http://www.w3schools.com/jsref/jsref_join.asp)

for your question, this gives to the class of the section touched:

```
$(sectionsTouched[0]).attr('class') 
```

for the validation about the inputs being checked I would just compare the :checked length against the inputs length

```
sectionTouched = $(sectionsTouched[0]);
if (sectionTouched.find('input').length/2 != sectionTouched.find('input:checked')) {
  errorMessage = 'It appears you have not completed all questions.';
} 
```

just a few, you can do a more optimizations

# java - 使用 JIDE GroupTable 时从基础 DefaultTableModel 中删除行的正确方法是什么？

> ID：13637492
> 
> 赞同：1
> 
> 时间：2012-11-30T00:59:49.870
> 
> 标签：java, matlab, jide

我有一个 JIDE GroupTable 放置在 JideTabbedPane 内的 JideScollablePane 中，从在 EDT 上运行的 Matlab 内部实例化（通过 javaObjectEDT）。

我正在从 JButton 捕获一个事件并删除选定的行。如果我使用 GroupTable.getModel.removeRow 方法，则底层 DefaultTableModel 不会删除该行。

如果我直接从 DefaultTableModel 中删除该行，则包含 GroupTable 的 JideTabbedPane 将变得无响应。

我能够“解决”这个问题，因为我实际上正在将另一个底层 Matlab 业务对象与 GroupTable 视图同步，所以 GroupTable.removeRow 就足够了，但是这感觉不是正确的方法......如果我在 GroupTable 上调用 groupAndRefresh，底层 DefaultTableModel 重新出现。（请参阅[删除 JIDE 中的行 - 组表](https://stackoverflow.com/questions/10163420/remove-rows-in-jide-group-table)）

我应该真正使用哪种 removeRow 方法？

# excel - 聚合与标签匹配的 Excel 单元格内容

> ID：13637494
> 
> 赞同：1
> 
> 时间：2012-11-30T00:59:20.707
> 
> 标签：excel, vba, ms-office

我确信这不是一件非常困难的事情，但它不是那种容易被互联网搜索的问题。

我被分配了一个涉及复杂电子表格的工作项目。我已经完成了通常的 =SUM 和其他基本 Excel 公式，并且我有足够的编码背景，我至少能够通过 VBA 捏造我的方式，但我不确定如何继续处理其中的一部分任务。

简单版本：在工作表 1 上，我有一个人员列表（每行一个，A 列中的人名），在工作表 2 上，我有一个组列表（每行一个，A 列中的组名）。表 1 中的每个名称都有自己的行，我有一个“数据验证”下拉菜单，您可以在其中选择每个人所属的组。

该下拉列表来自工作表 2，其中每个组都有一行。所以本质上，Sheet 1 的“Group”列的数据验证源只是“=Sheet2!$a1:a100”或其他什么。

问题是这样的：我希望工作表 2 中的每个组行都有一个公式，该公式会生成在工作表 1 上分配给该组的所有用户的列表。我的意思是相当于“从 PeopleTab 中选择 *其中 GROUP = ThisGroup”。生成的单元格只会将名称粘在一起，例如“Bob Smith，Joe Jones，Sally Sanderson”

我已经在谷歌上搜索了几个小时，但我想不出一种方法来表达我的搜索查询以获得我想要的结果。

这是所需结果的示例（以破折号分隔。找不到使它看起来不错的方法，表格标签似乎在这里不起作用）：

（表 1）
Bob Smith - 第 1 组（从下拉列表中选择）
Joe Jones - 第 2 组（从下拉列表中选择）
Sally Sanderson - 第 1 组（从下拉列表中选择）

（表 2）
第 1 组 - Bob Smith、Sally Sanderson（公式结果）
第 2 组 - Joe Jones（公式结果）

我在表 2 的第二列上使用什么公式（甚至什么函数）来从该组的成员中制作一个平面列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:00:27.380

我已经使用该`FILTER`公式来实现类似的效果。基本格式是：

```
=FILTER(source, condition, [more conditions...]) 
```

这表示“获取我的源范围，并返回与这些条件中的每一个匹配的单元格”。

您可以引用整个列（第一个工作表中的名称，A 列），并使用另一列（工作表 1 的 B 列中选择的组）的内容过滤这些值`'Sheet1'!A:A`，并`EQ('Sheet1'!B:B, $Ax)`用作条件，其中`$Ax`是对工作表 2 A 列中组名称的引用（将 x 替换为行号）。

例如，`sheet2`你可以有这样的东西：

```
-------------------------------------------------------------------
|   A    |   B
-------------------------------------------------------------------
| Group1 | =TRANSPOSE(FILTER('Sheet1'!A:A, EQ('Sheet1'!B:B, $A1)))
-------------------------------------------------------------------
| Group2 | =TRANSPOSE(FILTER('Sheet1'!A:A, EQ('Sheet1'!B:B, $A2)))
------------------------------------------------------------------- 
```

`TRANSPOSE`需要，因为您的源范围是一列，因此您从`FILTER`. 转置只是将该列转置为一行:)

附带说明一下，您可以使用过滤器做其他巧妙的事情，例如查找过滤范围的总和 ( `=SUM(FILTER(...))`) 等等；我在预算电子表格中使用它来计算按月份和类别分组和汇总的收入/费用。

免责声明：在谷歌文档电子表格中进行了测试，因为我没有 MS Excel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:47:48.360

在表 1：VBA

```
Private Sub worksheet_Change(ByVal Target as Range)
  if target.row =1 and target.value<>"" then target.offset(,1)=sheets("sheet2").cells(application.match(target.value,sheets("sheets").columns(1),0),2).value
End sub 
```

# checkbox - 某些记录的复选框上的 Apex 触发器

> ID：13637500
> 
> 赞同：-2
> 
> 时间：2012-11-30T01:01:22.333
> 
> 标签：checkbox, triggers, salesforce

我是新来的销售人员。如果有人可以帮助我，我将不胜感激。我有一个对象 X，它有记录 A、B、C。我在所有这些记录中都有复选框。我确定，这个复选框应该在 B 上选中，而不是在 A、C 上选中。有人可以帮我实现这个吗？

谢谢，KK

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T08:04:26.943

您需要此字段（复选框）的验证规则。[在这里](https://login.salesforce.com/help/doc/en/fields_about_field_validation.htm)阅读

# ruby-on-rails - 使用设备登录 Facebook

> ID：13637504
> 
> 赞同：0
> 
> 时间：2012-11-30T01:01:57.540
> 
> 标签：ruby-on-rails, facebook, devise

我使用omniauth-facebook 1.4.1 来使用facebook 登录。有错误

```
Could not authorize you from Facebook because "Csrf detected". 
```

似乎人们通过将omniauth-facebook 降级到1.4.0 来解决这个问题。我试过了，但现在有错误

```
The action 'facebook' could not be found for Devise::OmniauthCallbacksController. 
```

我有路线

```
devise_for :users, :controllers => { :omniauth_callbacks => :omniauth_callbacks} 
```

并且 omniauth_callbacks 位于控制器目录中：

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController
def facebook
  # You need to implement the method below in your model
  @user = User.find_for_facebook_oauth(env["omniauth.auth"], current_user)  

  if @user.persisted?
    flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
    sign_in_and_redirect @user, :event => :authentication
  else
    session["devise.facebook_data"] = env["omniauth.auth"]
    redirect_to new_user_registration_url
  end
end
end 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:42:21.710

哦，我发现了问题。在 route.rb 我有一行代码

```
devise_for :users, :controllers => { :registrations => :registrations } 
```

在...前面

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks"} 
```

它覆盖了方法，所以它导致

```
The action 'facebook' could not be found for Devise::OmniauthCallbacksController. 
```

我评论了第一行然后它起作用了。

# vb.net - 如何解析网络浏览器中的某些文本？

> ID：13637505
> 
> 赞同：1
> 
> 时间：2012-11-30T01:02:08.510
> 
> 标签：vb.net, visual-studio-2010, parsing, html-parsing

我想要做的是从加载到 webbrowser 的网页中解析某些文本。更具体地说，这行代码。

```
<span class="price" id="selecttrainform1_addToCartPrice">$20.00</span> 
```

它位于第 1342 行。如果有帮助，这是它之前的所有代码，位于同一行。

```
<nobr><input type="image" onclick="return onAddToCartClick('selecttrainform', '1', '');" src="/images/en/avs_addtocart_gray.gif" alt="Add To cart >" border="0" name="_handler=presentation.handler.request.rail.RailSimpleSelectDepartAvailabilityRequestHandler/_xpath=/sessionWorkflow/productWorkflow[@product='Rail']/tripJourneyTariffAvailability/journeyTariffAvailability[1]/binding[1]/journey/segment[1]/_/sessionWorkflow/productWorkflow[@product='Rail']/selectedJourney/@id_=_hy0s6wf8a3gi" /><span class="price" id="selecttrainform1_addToCartPrice">$20.00</span> 
```

我试图用这个价格做的是有一个消息框显示它。我可以从三个不同的网络浏览器中提取三个不同的 msgbox，或者只显示一个来自所有三个的 msgbox。这对我来说没什么大不了的。同样，此代码将仅放置在一个按钮中。当然，如果需要，我可以将信息显示在文本框而不是 msgbox 中。我只是更喜欢一个 msgbox。

我在想我可以使用类似的东西

```
 If webpageelement3.GetAttribute("id") = "selecttrainform1_addToCartPrice" Then
        MsgBox("the price data here") 
```

但我不确定如何让它显示到消息框中。上面的代码是我用来查找并单击按钮的一部分，只是省略了webpagelement.invokemember("click") 命令。

有谁知道任何有用的资源或链接？我试过通过谷歌搜索，但暂时没有结果。

这是通过 vb.net 关闭的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:21:02.550

如果以某种方式需要网络浏览器进行视觉反馈：

```
Dim price As String = WebBrowser1.Document.GetElementById("selecttrainform1_addToCartPrice").InnerText
MessageBox.Show(price) 
```

但是，如果它们只是下载网页的一种方式，那么我建议删除它们并改用 HtmlAgilityPack 或 CSQuery 之类的东西

# xml - Oracle UPDATEXML 插入空行

> ID：13637507
> 
> 赞同：0
> 
> 时间：2012-11-30T01:02:16.247
> 
> 标签：xml, oracle, oracle11g, base64

我正在使用 Oracle 11g，并使用 UPDATEXML 替换文本节点的值。在我尚未完全确定的某些条件下，结果将插入一个意外的空白行。下面是一个例子来说明这一点。

```
DECLARE
  l_data CLOB := 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' || CHR(13) || CHR(10) ||
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa';
  l_result CLOB;
BEGIN

  SELECT 
    UPDATEXML(
      XMLTYPE('<ELEMENT>text</ELEMENT>')
    , '/*/text()'
    , l_data
    ).getClobVal()
  INTO l_result
  FROM dual;

  dbms_output.put_line(l_result);

END;
/ 
```

输出的最后几行是：

```
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</ELEMENT> 
```

这个空行是从哪里来的？

如果初始数据仅包含 LF 的行尾，则不会发生这种情况，但我使用的是 utl_encode.base64_encode 的输出，它在每 64 个字符后插入 CRLF。

编辑：我已经放弃了这个问题，但这里有一些更简洁的代码来说明我看到的问题。该语句将生成一个 127 行的 CLOB，每行包含 64 个 'a' 字符，后跟回车和换行。

```
SELECT REGEXP_REPLACE(RPAD(TO_CLOB('a'), 8128, 'a'), '(.{64})', '\1'||CHR(13)||CHR(10))
FROM dual 
```

在 UPDATEXML 中使用它，如下所示

```
SELECT
  UPDATEXML(
    XMLELEMENT("ELEMENT", 'something')
  , '/*/text()'
  , REGEXP_REPLACE(RPAD(TO_CLOB('a'), 8128, 'a'), '(.{64})', '\1'||CHR(13)||CHR(10))
  )
FROM dual 
```

将生成一个包含 128 行的 XML 元素。与原始查询相同，但在 122 处有一个空行。

删除 CHR(13)（回车）似乎可以解决这个问题。

# string - 具有R中列列表的子集数据框

> ID：13637511
> 
> 赞同：6
> 
> 时间：2012-11-30T01:03:16.980
> 
> 标签：string, r, dataframe

我想选择存储在字符串变量中的数据框中的所有列。例如：

```
v1 <- rnorm(100)
v2 <- rnorm(100)
v3 <- rnorm(100)
df <- data.frame(v1,v2,v3) 
```

我想完成以下任务：

```
df[,c('v1','v2')] 
```

但我想使用一个变量而不是 (c('v1', 'v2'))（这些都失败了）：

```
select.me <- "'v1','v2'"
df[,select.me]
df[,c(select.me)]
df[,c(paste(select.me,sep=''))] 
```

感谢您对一个简单问题的帮助，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T01:13:22.513

这里最大的讽刺是当你说“我想做这个”时，第一个表达应该成功了，

```
df[,c('v1','v2')]
> str( df[,c('v1','v2')] )
'data.frame':   100 obs. of  2 variables:
 $ v1: num  -0.3347 0.2113 0.9775 -0.0151 -1.8544 ...
 $ v2: num  -1.396 -0.95 -1.254 0.822 0.141 ... 
```

而所有后来的尝试都会失败。后来我意识到你不知道你可以使用 `select.me <- c('v1','v2') ; df[ , select.me]`. 您还可以使用这些在某些情况下可能更安全的表格：

```
df[ , names(df) %in% select.me] # logical indexing
df[ , grep(select.me, names(df) ) ]  # numeric indexing
df[ , grepl(select.me, names(df) ) ]  # logical indexing 
```

其中任何一个都可以与 negation( `!logical`) 或 minus ( `-numeric`) 一起使用来检索补码，而您不能将字符索引与否定一起使用。如果您想在可理解性上降低一个级别并且愿意将`select.me`值更改为有效的 R 表达式，您可以这样做：

```
select.me <- "c('v1','v2')"
df[ , eval(parse(text=select.me)) ] 
```

并不是我推荐这个......只是让你知道在你“学会走路”之后这是可能的。也有可能（尽管相当巴洛克式）使用您原来的引用字符串来提取信息（尽管我认为这只是说明了为什么您的第一个版本更好）：

```
select.me <- "'v1','v2'"
df [ , scan(textConnection(select.me), what="", sep=",") ]
> str( df [ , scan(textConnection(select.me), what="", sep=",") ] )
Read 2 items
'data.frame':   100 obs. of  2 variables:
 $ v1: num  -0.3347 0.2113 0.9775 -0.0151 -1.8544 ...
 $ v2: num  -1.396 -0.95 -1.254 0.822 0.141 ... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T01:10:56.837

这是基本的`R`sytnax，也许你需要阅读[介绍手册](http://cran.r-project.org/doc/manuals/R-intro.html#Simple-manipulations-numbers-and-vectors)

```
select.me <- c('v1','v2')
df[,select.me] 
```

# cloud-foundry - 在 hosts 文件中设置 vcap.me 条目

> ID：13637516
> 
> 赞同：2
> 
> 时间：2012-11-30T01:03:32.203
> 
> 标签：cloud-foundry

一个问题的答案...

我做了一个在 Workstation 中运行的单节点云代工厂安装，并且我从另一个 VM 连接到那台机器。我将以下条目放在第二个 VM 上的 hosts 文件中：

```
192.168.0.111  api.vcap.me
192.168.0.111  vcap.me 
```

一个

```
vmc target api.vcap.me 
```

工作得很好，但是当我做了一个

```
vmc register 
```

并输入我的电子邮件和密码（+验证）它似乎创建了用户，但随后登录失败并出现以下错误：

```
Problem with login to 'http://api.vcap.me', target refused connection 
(Connection refused - connect(2)), try again or register for an account. 
```

跑步

```
vmc login 
```

导致了同样的错误。跑步

```
vmc -trace login 
```

显示正在联系 uaa.vcap.me，所以我将其添加到我的主机文件和宾果游戏中 - 它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:01:54.127

login 使用 uaa，因此您还需要将 uaa url 添加到主机文件中。

```
192.168.0.113       uaa.vcap.me 
```

# .net - 如何找出可以接受HTML标签的多行文本框中的值是否具有href标签，即 标签

> ID：13637518
> 
> 赞同：1
> 
> 时间：2012-11-30T01:03:51.333
> 
> 标签：.net, html, href, multiline

我有一个可以接受 HTML 标签的多行文本框。但不允许将链接作为用户可以输入的 HTML 标记的一部分。换句话说，在此文本框中不能包含任何 href 标记作为值。我需要对此进行验证。我该怎么做呢？我是.net 的新手，所以我不知道如何实现这一点。请帮忙。

更新了这个。我创建了一个 asp 正则表达式验证器。但它给了我语法错误。我究竟做错了什么？我是 .net 和正则表达式的新手。请帮忙。

```
<asp:RegularExpressionValidator id="EmailLinkValidator" runat="server" controltovalidate="EmailTextBox" display="Dynamic" ValidationExpression="(?m:(?:<a )?href|</a>\r?\n?)" cssclass="clsError" errormessage="<%=this.ERR_MSG%>">*</asp:RegularExpressionValidator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:12:34.657

您可以使用正则表达式来测试文本是否包含“A”标签

```
 string text = "<div class='answer-help'><p> <a href='http://stackoverflow.com/questions/how-to-answer'>tips</a></p></div>";
    System.Text.RegularExpressions.Regex ex = new System.Text.RegularExpressions.Regex("<a .*>.*</a>");
    bool containsATag = ex.IsMatch(text); 
```

然后它会返回一个 true

# php - PHP 对象可见性

> ID：13637521
> 
> 赞同：0
> 
> 时间：2012-11-30T01:04:28.243
> 
> 标签：php, visibility

好的，所以我对 PHP 还很陌生，但这让我很烦恼。当我尝试转储 var 时，我收到“无法访问受保护的属性 Database::$database”。为什么无法从 $db 对象访问 $database？当涉及到对象时，我是否误解了“私有”、“受保护”和“公共”关键字？

```
class Database
{
    protected $database;

    function __construct()
    {
        $this->database = new PDO("mysql:host=localhost;dbname=myDB", "root", "password");
    }
}
$db = new Database();
var_dump($db->database); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:06:46.647

您的受保护属性仅在类内部可用（和扩展类......），因此在您的类中的方法中您可以使用`$this->database`但在类之外，您需要一个 getter 来访问它的值，例如：

在课堂里：

```
public function getDB()
{
  return $this->database;
} 
```

课外：

```
var_dump($db->getDB()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:07:01.167

它们可以是公共的、受保护的或私有的。

请参阅 php 手册以获取示例

[http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:23:16.533

下面，“项目”= 属性（类范围的变量）或方法，“访问”= 调用（方法）或直接使用/更改（属性）。

*   具有**私有**可见性的项目只能在定义它们的类中访问。**注意**就我个人而言，我发现使用 private 只会导致悲伤。相反，请使用 protected 以便人们可以扩展该类并使用该项目，除非您确实有充分的理由将其设为私有。

*   **具有受保护**可见性的项目只能在定义它们的类中访问，以及扩展该类的任何类（即子类将继承它）

*   可以在当前类、所有子类以及对象可用的范围内访问具有**公共可见性的项目。***如果您不指定可见性，则这是默认设置，但为了清楚起见，无论如何都这样做是好的。*

要访问可用范围之外的私有或受保护属性，请使用公共 getter/setter 方法。

编辑：因此，要回答您为什么会收到错误的问题，您在可用的类*之外​​的受保护属性上调用 var_dump() 。*因为它受到保护，所以它在全局范围内不可用。您可以将 var_dump() 移动到类内部的方法中（记住在从内部引用对象时使用 $this），或者您可以使用 getter 方法返回值，然后使用 var_dump() 来返回值。

# android - Activity working fine in <=Android 4.1 but died in Android 4.2 (ActivityManager: process has died)

> ID：13637524
> 
> 赞同：0
> 
> 时间：2012-11-30T01:04:43.187
> 
> 标签：android, android-webview, android-4.2-jelly-bean

I'm creating an application for reading online novel and it works in Android 2.3.3 - 4.1, but somehow in Android 4.2, one of the Activity (DisplayLightNovelContentActivity) is suddenly died when reading one of the chapter (Sword Art Online:Aria in the Starless Night, original page: [http://baka-tsuki.org/project/index.php?title=Sword_Art_Online:Aria_in_the_Starless_Night](http://baka-tsuki.org/project/index.php?title=Sword_Art_Online:Aria_in_the_Starless_Night))

This only happen in Android 4.2 (Galaxy Nexus, Nexus 7, Nexus 10), it is working ok in previous version of Android.

Based on the log file, I'm seeing a lot of process was died by ActivityManager before my application died (lnreader).

These are the log files: [http://pastebin.com/fgXKG1Ew](http://pastebin.com/fgXKG1Ew) and [http://pastebin.com/dQgEJmik](http://pastebin.com/dQgEJmik)

This is the source code: [https://github.com/calvinaquino/LNReader-Android](https://github.com/calvinaquino/LNReader-Android)

Can someone explain to me? Any fundamental changes on how android 4.2 that affected my application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:07:50.710

Found the cause. Removing the deprecated method `onPictureListener()` fixed the problem in Android 4.2.1.

Tested in Galaxy Nexus 4.2.1 and Nexus 10.

No replacement method/class given by Google, so I change the code to use javascript.

# java - 从普通 c int[] 组成 jintArray 的 JNI 函数

> ID：13637525
> 
> 赞同：0
> 
> 时间：2012-11-30T01:04:43.970
> 
> 标签：java, interface, java-native-interface, native

我现在一直在寻找一点点来弄清楚如何解决这个问题，但我发现没有什么能正确回答这个问题。我想我很接近了；我想要一个 jint* 和一个 int*，以及使用 (*env)->SetIntArrayRegion(...) 函数，

```
//  This function will take an array of global integers that already exist in the
//  c-side of the program, we'll call them 'data_ints[91]' (there are 91 just to clarify.)
/*...*/
int data_ints[] = {1,2,3,4,/*...*/90,91};

JNIEXPORT jintArray JNICALL Java_MarsRoverGUI_getData
(JNIEnv *, jobject, jint)
{
    jintArray out_ints;
    jint *outElements;
    int i;

    out_ints = (*env)->NewIntArray(env, 91);
    outElements = (*env)->GetIntArrayElements(env,out_ints,0);
    for (i = 0; i < 91; i++)
    {
        outElements[i] = data_ints[i];
    }
    (*env)->ReleaseIntArrayElements(env,out_ints,outElements,0);

    // returns data_ints as a jintArray
    return out_ints;
} 
```

我离我有多近？我没有测试 JNI / 的有效方法：请随意提出方法！

吃饱了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:06:44.807

如果我很好地理解了您的问题，那么这应该对您有用。`int`您似乎对/转换感到不安`jint`，但您不必`jint`像`int`.

```
JNIEXPORT jintArray JNICALL Java_MarsRoverGUI_getData
(JNIEnv *, jobject, jint)
{
    jintArray out_ints;

    out_ints = (*env)->NewIntArray(env, 91);
    (*env)->SetIntArrayRegion(env, out_ints, 0, 91, data_ints);

    // returns data_ints as a jintArray
    return out_ints;
} 
```

如果有什么不清楚的地方，或者我误解了你的问题，请告诉我！

# python - Python OS PostreSQL 和引号

> ID：13637530
> 
> 赞同：2
> 
> 时间：2012-11-30T01:05:13.563
> 
> 标签：python, bash, postgresql, psql

我可以在这里找到很多关于 PSQL 中的引号的信息，但没有什么能完全适合这个问题。

首先，它是一个杂物。我知道这是一个杂牌，但我认为我坚持下去了（尽管对其他选择持开放态度）

我有一个近乎黑匣子的第三方 linux 设备，我对其访问权限有限，我可以使用 bash、python 和 psql。我没有 psycopg2 或任何其他 pg 库。

我必须使用的数据库使用需要引用的区分大小写的表名（不要问......）

所以，目前我编写 OS shell 命令来获取数据，然后我会根据我的需要摆弄并转换为 JSON

一个简单的例子：

```
pg_str = "psql -U pword dbname -A -t -c "
sql = "SELECT * FROM \"Addresses\" WHERE id=999"
os_str = pg_str + "\'" + sql + "\'" + ";"
data = string.split(os.popen(os_str).read()) 
```

没问题。我并不是说它很漂亮，但它确实有效（记住我不能导入任何数据库库......）

当我在文本字段上有 where 子句时，一切都会出错：

```
pg_str = "psql -U pword dbname -A -t -c "
sql = "SELECT * FROM \"Addresses\" WHERE town='london'"
os_str = pg_str + "\'" + sql + "\'" + ";"
data = string.split(os.popen(os_str).read()) 
```

太多的报价组合无法应付......？

我显然已经尝试了很多转义组合并且已经搜索了几个小时，但是每个解决方案似乎都需要我无法访问的库。

我不是 python 或 psql 专家 - 这是关于我目前的限制。我确信我会以错误的方式去做，但目前在找出正确的方式时被打败了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:39:17.797

1.  无需`\`转义字符串`'`中的`"`字符。
2.  您可以使用`"""`字符串来避免需要转义`"`字符。
3.  使用 string.replace 来引用`'`shell 的字符，将它们替换为`'\''`. `'`结果字符串在传递给 shell 时需要被非转义字符包围。

使用这些规则，可以使 SQL 字符串易于阅读和编辑：

```
pg_str = "psql -U pword dbname -A -t -c "
sql = """SELECT * FROM "Addresses" WHERE town='london'"""
sql = sql.replace("'", "'\\''")
os_str = pg_str + "'" + sql + "'" + ";"
data = string.split(os.popen(os_str).read()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T01:52:41.440

除了[@qqx 提供](https://stackoverflow.com/a/13637764/939860)的内容之外：您可以使用[**美元引用**](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)而不是单引号来使其更容易：

```
pg_str = "psql -U pword dbname -A -t -c "
sql = """'SELECT * FROM "Addresses" WHERE town = $$london$$'"""
data = string.split(os.popen(pg_str + sql).read()) 
```

顺便说一句：对于单个 SQL 命令，尾随分号 (;) 是可选的。

# javascript - 这个函数可以清理 html 吗？

> ID：13637536
> 
> 赞同：0
> 
> 时间：2012-11-30T01:06:06.700
> 
> 标签：javascript

这个小函数能返回有效的 HTML 吗？

```
function HtmlSanitizer(text) {
    return text.replace(/&(?!\s)|</g, function (s) { if(s == '&') return '&amp;'; else return '&lt;'});
} 
```

编辑：此功能的目标是避免 html 注入。这就是我问的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:15:56.867

该函数仅返回您可能想要编码为 HTML 实体的一小部分内容。因此，我会说你的问题的答案是“不”。

您可能希望 Google 搜索“javascript html 实体编码”或类似内容以找到更完整的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:17:22.043

这是一个正则表达式：

*   `/ /g``text`= 全局替换，即替换字符串中所有出现的地方
*   `&`= 匹配文本中的和号，因为它不是 JS Regex 中的保留字符
*   `(?!)``?`=“负前瞻”搜索（不要与非贪婪搜索的独立使用混淆。
*   `\s`= 匹配任何空白字符
*   `|<`= 如果它不匹配一个 & 符号，它会尝试捕捉一个开口角括号

然后它将捕获字符串并将其传递给回调函数并替换`&`with`&amp;`和`<`with `&lt;`。这是对字符串进行 HTML 编码的基本方法，但在我看来它并不可靠。

SGML（及其派生词：HTML 和 XML）更喜欢对句法字符进行完全编码，因此每次出现的符号、左括号和右括号以及引号都应该进行编码，而您提供的函数仅执行其中两件事（当然，这两个是最重要的）。

我推荐阅读这篇文章：[HTML-encoding lost when attribute read from input field](https://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding)

# javascript - 更改函数中的全局变量

> ID：13637537
> 
> 赞同：0
> 
> 时间：2012-11-30T01:06:22.543
> 
> 标签：javascript

我想不通这个...

我想要：

声明一个变量，运行一个更改该变量值的函数，然后警告新值的值。

像这样：

```
function loadApp(){
    FB.api('/me', function(response) {
            var posLat;
            getLocation();
        console.log(posLat);
    });
}

    function getLocation(){

        posLat = "hey";

} 
```

警报应显示 4 但只是未定义警报。我是不是很傻？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T01:16:15.803

`posLat`是在函数内部定义的，因此使其成为不能在其周围范围之外使用的本地函数。这就是为什么`getLocation`不能修改它。事实上，它正在创建一个`posLat`在窗口对象上调用的全局变量。正如我帖子上的评论所建议的，设置`posLat`为返回值`getLocation`：

```
var posLat = getLocation();

...

function getLocation() {
    return "hey";
} 
```

# javascript - 如何在 ui:repeat 中使用 javascript 的 getElementById？

> ID：13637541
> 
> 赞同：1
> 
> 时间：2012-11-30T01:06:42.547
> 
> 标签：javascript, jsf-2

我正在使用 迭代项目列表`<ui:repeat>`。在内部，我使用 javascript 为每次迭代处理一些数据，并希望将其输出到为每次迭代创建的 div 中。下面的代码当然只会输出最后一次迭代的数据（之前的那些被覆盖）。我想不出一种方法来做到这一点。

这是jsf代码：

```
<ui:repeat var="item" value="#{someBean.items}">
    <script type="text/javascript">
        var item = "#{item.id}";
        showItem();
    </script>
    <div id="#{item.id}"></div>
</ui:repeat> 
```

这是功能：

```
function showItem(){
    document.getElementById(item).innerHTML = 'this is an item';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:15:34.710

尝试这样做：

```
<ui:repeat var="item" value="#{someBean.items}">
    <div id="#{item.id}"></div>
    <script type="text/javascript">
        showItem("#{item.id}");
    </script>
</ui:repeat> 
```

-

```
function showItem(item){
    document.getElementById(item).innerHTML = 'this is an item';
} 
```

原因是即使您将每个 var 包装在脚本标记中，它们都在全局范围内，因此在循环的每次迭代中都相互覆盖。

为了给每个脚本块它自己的范围，您可以将变量包装在这样的自执行函数中，但是按照您当前的逻辑，这似乎有点矫枉过正：

```
<ui:repeat var="item" value="#{someBean.items}">
    <div id="#{item.id}"></div>
    <script type="text/javascript">
    (function(){
        var item = "#{item.id}";
        showItem(item);
    })();
    </script>
</ui:repeat> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:45:17.037

您可以使用“getElementsByName”来获取所有项目，然后在循环中显示它们。当然，其他方式包括“getElementsByClassName”或 jQuery。

```
<ui:repeat id="outer" var="item" value="#{someBean.items}">
   <div id="#{item.id}" name="item"></div> 
</ui:repeat>

<script type="text/javascript">
function showAllItems(){
    var items = document.getElementsByName('item');
    for(var index in items)
    {
         showItem(items[index].id);
    }
};
showAllItems();
</script> 
```

# azure - 当我尝试在 Azure 服务器上托管时，获取“Microsoft.ACE.OLEDB.12.0”提供程序未在本地计算机上注册错误

> ID：13637548
> 
> 赞同：1
> 
> 时间：2012-11-30T01:07:41.667
> 
> 标签：azure, oledb

我正在托管一个使用 OLEDB 12 读取 Excel 文件的 Web 应用程序，但收到错误“'Microsoft.ACE.OLEDB.12.0' 提供程序未在本地计算机上注册”。想知道我是否应该使用较低版本的 OLEDB 或 Azure 根本不支持 OLEDB 服务。在重写程序之前，只是想看看是否有人知道更好的选择。我正在使用 Visual Studio 2010 进行开发。提前致谢。

# .net - 尝试安装 Unity 时服务器返回错误请求

> ID：13637549
> 
> 赞同：1
> 
> 时间：2012-11-30T01:07:52.203
> 
> 标签：.net, visual-studio, visual-studio-2012, unity-container, nuget

我正在尝试使用 NuGet 安装 Unity。在尝试搜索 Unity 时，我首先遇到了错误：

> ServicePointManager 不支持使用 https 方案的代理。

谷歌搜索后，显然我需要相同的 NuGet 链接，但需要 HTTP 而不是 HTTPS。添加新的 NuGet HTTP 包源后，我现在可以搜索（并找到）Unity：

![在此处输入图像描述](../Images/dd413ee7d7a5c28e80b0b4cfb68063aa.png)

但是，当我单击安装时，我收到此错误：

> 正在尝试解决依赖项“CommonServiceLocator (≥ 1.0)”。远程服务器返回错误：(400) 错误请求。

![在此处输入图像描述](../Images/f0ee8d7ad0df19ee2b2539922ee6d620.png)

我不确定如何解决这个问题。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:39:44.860

Have you tried using the Package Manager Console?

```
Install-Package CommonServiceLocator 
```

Then

```
Install-Package Unity 
```

# java - 在 JAVA 中浏览 SQL 行

> ID：13637554
> 
> 赞同：0
> 
> 时间：2012-11-30T01:08:15.190
> 
> 标签：java, sql, sql-navigator

在做出选择语句后，我正在尝试浏览行。目前，我正在使用这个：对于->（下一步）按钮：

```
if(dataset_all.isLast());
                dataset_all.first();
            dataset_all.next(); 
```

对于 <- (prev) 按钮：

```
if(dataset_all.isFirst());
                dataset_all.last();
            dataset_all.previous(); 
```

不知何故，它不起作用。它说它没有到达列的末尾。

这样对吗？还是问题出在其他地方？

忘了提“dataset_all”变量是ResultSet。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:11:02.560

实际上，我已经解决了。我这样做了：

对于 ->（下一步）按钮：

```
if(!dataset_all.next())
    dataset_all.first(); 
```

对于 <- （上一个）按钮：

```
if(!dataset_all.previous())
        dataset_all.last(); 
```

一切正常！不应该吗？

# php - 如何找到多个数组的最大值

> ID：13637557
> 
> 赞同：-4
> 
> 时间：2012-11-30T01:08:27.410
> 
> 标签：php, arrays

例如，我有几个这样的数组：

```
$data1 = array(80, 'P3');
$data2 = array(55, 'P3');
$data3 = array(90, 'P3'); 
```

如何找到一些数组的最大值？请帮助我，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:12:54.840

```
$x = array_merge($data1, $data2, $data3);
sort($x);
$highest = array_pop($x); 
```

# android - android中正确的SQLite查询语法

> ID：13637567
> 
> 赞同：1
> 
> 时间：2012-11-30T01:09:48.377
> 
> 标签：android, sqlite, android-sqlite

我必须根据传递的参数获取数据库的行

例如，选择所有按姓名排序的 38 岁，并且是艺术家女性的人，传递的参数是

```
String age=38;
String gender=female;
String job=artist; 
```

我试过写这个，但我的 rawQuery 肯定有语法错误

```
public Cursor getData(String age, String gender, String job) {
        try {
            Cursor c = mDb.rawQuery("SELECT * FROM mytable order by Name asc WHERE Age='"+age+"'"  WHERE Gender='"+gender+"'" WHERE Job='"+job+"'", null);
            if (c != null) {
                c.moveToNext();
            }
            return c;
        } catch (SQLException mSQLException) {
            Log.e(TAG, "getData>>" + mSQLException.toString());
            throw mSQLException;
        }

    } 
```

有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:22:28.520

如果 Age 是 String 类型，请尝试：

```
Cursor c = mDb.rawQuery("SELECT * FROM mytable WHERE Age LIKE \""+age+"\" AND Gender LIKE \""+gender+"\" AND Job LIKE \""+job+"\" order by Name asc", null); 
```

如果 Age 是 Integer 类型，请尝试：

```
Cursor c = mDb.rawQuery("SELECT * FROM mytable WHERE Age = \""+age+"\" AND Gender LIKE \""+gender+"\" AND Job LIKE \""+job+"\" order by Name asc", null); 
```

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T01:25:18.970

您的 SQL 语法中有多个错误。ORDER BY 子句应该放在最后。多个条件应该由 AND 关键字连接，而不是多个 WHERE。最后，您的报价没有正确匹配。

下面是正确的 SQL 查询：

SELECT * FROM mytable WHERE Age LIKE '"+age+"' AND Gender LIKE '"+gender+"' AND Job LIKE '"+job+"' ORDER BY Name ASC;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T01:25:22.603

rawQuery("SELECT * FROM mytable WHERE ( Age = ? and Gender = ? and Job= ? ) order by Name asc",new String[]{age,gender,job})

# objective-c - 如何调试无效的 ParseKit 语法？

> ID：13637577
> 
> 赞同：2
> 
> 时间：2012-11-30T01:10:48.333
> 
> 标签：objective-c, grammar, parsekit

我正在尝试为 ParseKit 编写语法，以便它匹配 iphone 应用程序中的基本命题逻辑句子。有人可以告诉我我哪里出错了。

```
@start = wff;
wff = disjunction (implies disjunction)?;
disjunction = conjuction (or conjuction)*;
conjunction = notExpression (and notExpression)*;
notExpression = (not | not primaryExpression);
primaryExpression = variable | lbracket wff rbracket;
variable = p | q | r;

p = 'P';
q = 'Q';
r = 'R';

implies = '→';
and = '∧';
or = '∨';
not = '¬';
lbracket = '(';
rbracket = ')'; 
```

另外，我将如何添加一些额外的回调，以便我可以从语法中创建解析树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:02:56.250

[ParseKit](http://parsekit.com)的开发者在这里。

我看到一个明显的问题：`conjunction`在您的语法中的几个地方拼写错误。

* * *

ParseKit 的 Grammar Parser 的错误信息并不是最大的。理想情况下，您会收到一条很好的错误消息，引导您解决问题（但是，嘿，它是开源的，所以欢迎任何人贡献这种性质的修复程序）。

但是，我可以告诉你我是如何发现这些问题的：

1.  将您的 ParseKit 工作副本更新为[google 代码](https://code.google.com/p/parsekit/)主干的头部。
2.  在 Xcode 中，打开断点并为所有异常添加断点
3.  将 ParseKit 语法放在此文件中：`~/Desktop/grammar.txt`
4.  （可选）在此文件中放置任何示例输入：`~/Desktop/input.txt`
5.  `DebugApp`在调试配置中运行 ParseKit目标。
6.  `Run`单击应用程序运行时出现的窗口中的大按钮。
7.  等待抛出异常。断点被击中。

如果您的语法中有错误，您会发现异常很可能发生在 ParseKit 汇编程序回调中，例如：

```
- (void)parser:(PKParser *)p didMatchExpression:(PKAssembly *)a 
```

打印`a`到调试控制台。你会看到类似的东西：

```
(lldb) po a
(PKAssembly *) $1 = 0x00000001075a9010 [] /conjuction/ ^(/or/ /conjuction/)/* 
```

这是`PKAssembly`传递给回调的对象的打印输出。在这里你可以看到 ParseKit 的语法解析器在哪里无法解析你的语法。ParseKit Grammar Parser 在解析这个表达式时似乎失败了：

```
conjuction (or conjuction)*; 
```

从`^`(caret) 的位置，你可以告诉解析器在看到第一个`conjuction`.

此表达式仅位于语法中的一行：

```
disjunction = conjuction (or conjuction)*; 
```

这就是我注意到这一行中有一个拼写错误的原因。

这种方法总是会引导你找到语法中有问题的行。希望有帮助。

# mysql - 将两个 SQL 查询合并为 1

> ID：13637579
> 
> 赞同：-2
> 
> 时间：2012-11-30T01:11:01.383
> 
> 标签：mysql

我有一个快速的问题...

我想将两个 sql 查询合并为一个，但问题是这两个查询都包含 GROUP BY。

查询一：

```
SELECT   COUNT(users_survey_answers.ultimate_survey_code)
FROM     company,
         users_codes,
         users_survey_answers
WHERE    company.company_id = users_codes.company_id
  AND    users_codes.email = "test@gmail.com"
  AND    users_codes.company_id = users_survey_answers.company_id
  AND    users_survey_answers.completed = 0
GROUP BY users_codes.company_id 
```

查询 2：

```
SELECT   COUNT(users_rewards.reward_id)
FROM     company, 
         users_codes, 
         users_rewards
WHERE    company.company_id = users_codes.company_id
  AND    users_codes.email = "test@gmail.com"
  AND    users_rewards.company_id = users_codes.company_id
  AND    redeemed = 0
GROUP BY users_codes.company_id 
```

我很感激帮助。我尝试了很多解决方案，仍然没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:19:45.170

~~我冒昧地添加`company_id`到选择中。如果您事后无法知道哪个结果属于哪个公司，那么按 company_id 分组有什么好处。:)~~

 ~~```
select
  company_id,
  sum(code_count) as code_count,
  sum(reward_count) as reward_count
FROM
    (SELECT   
       users_codes.company_id,
       COUNT(users_survey_answers.ultimate_survey_code) as code_count,
       null as reward_count
    FROM     company,
             users_codes,
             users_survey_answers
    WHERE    company.company_id = users_codes.company_id
      AND    users_codes.email = "test@gmail.com"
      AND    users_codes.company_id = users_survey_answers.company_id
      AND    users_survey_answers.completed = 0
    GROUP BY users_codes.company_id
    UNION ALL
    SELECT   
      users_codes.company_id,
      COUNT(users_rewards.reward_id) as reward_count,
      null
    FROM     company, 
             users_codes, 
             users_rewards
    WHERE    company.company_id = users_codes.company_id
      AND    users_codes.email = "test@gmail.com"
      AND    users_rewards.company_id = users_codes.company_id
      AND    redeemed = 0
    GROUP BY users_codes.company_id) x
GROUP BY 
  company_id 
```~~  ~~太麻烦了。你可以这样写。我还冒昧地引入了更现代`INNER JOIN`的混叠技术，但随时可以恢复。

```
SELECT
  c.company_id,
  (SELECT COUNT(ultimate_survey_code)
  FROM
    users_survey_answers a
  WHERE
    a.completed = 0 AND
    a.company_id = c.company_id) as answer_count,
  (SELECT COUNT(ultimate_survey_code)
  FROM
    users_rewards r
  WHERE
    r.redeemed = 0 AND
    r.company_id = c.company_id) as reward_count
FROM
  company c
  INNER JOIN users_code uc ON uc.company_id = c.company_id
WHERE
  uc.email = "test@gmail.com"
GROUP BY
  c.company_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:31:48.227

试试这个：

```
SELECT    company.company_id,
          users_pts.pts as CompanyPts,
          t1.ultimate_survey_code_count,
          t2.reward_id_count
FROM      company,
          users_codes
INNER JOIN (
          SELECT 
              company_id, 
              COUNT(ultimate_survey_code) AS ultimate_survey_code_count
          FROM users_survey_answers
          WHERE completed = 0
          GROUP BY company_id
          ) AS t1
       ON users_codes.company_id = t1.company_id
INNER JOIN (
          SELECT 
              company_id, 
              SUM(IF(redeemed = 0, 1, 0)) AS reward_redeem_zero_count,
              SUM(IF(redeemed = 0, 0, 1)) AS reward_redeem_not_zero_count
          FROM users_rewards
          GROUP BY company_id
          ) AS t2
       ON users_codes.company_id = t2.company_id
INNER JOIN users_pts
       ON users_codes.company_id = users_pts.company_id
WHERE     company.company_id = users_codes.company_id
  AND     users_codes.email = "test@gmail.com" 
```

这是未经测试的，但希望能满足您的需求。~~

# c++ - dev-c++ g++ - error: typename/static constant undeclared (首先使用这个函数)

> ID：13637582
> 
> 赞同：0
> 
> 时间：2012-11-30T01:11:15.150
> 
> 标签：c++, templates, g++, dev-c++, typename

我不断收到有关 typename posizione 和 int 常量 POSIZIONENULLA 的以下错误。奇怪的是，我在我的代码中使用了类型 posizione，但只在函数中得到错误。

```
Coda.h:156: error: `template<class T> class Coda' used without template parameters
Coda.h: In function `typename Coda<T>::posizione copiaNodo(typename Coda<T>::posizione)':
Coda.h:158: error: `POSIZIONENULLA' undeclared (first use this function)
Coda.h:158: error: (Each undeclared identifier is reported only once for each function it appears in.)
Coda.h:161: error: `posizione' undeclared (first use this function)
Coda.h:161: error: expected `;' before "tempPosizione"
Coda.h:162: error: `tempPosizione' undeclared (first use this function)
Coda.h:164: error: `temPosizione' undeclared (first use this function)
Coda.h: At global scope:
Coda.h:169: error: `template<class T> class Coda' used without template parameters
Coda.h: In function `void eliminaNodo(typename Coda<T>::posizione)':
Coda.h:171: error: `POSIZIONENULLA' undeclared (first use this function)
Coda.h:173: error: `posizione' undeclared (first use this function)
Coda.h:173: error: expected `;' before "tempPosizione"
Coda.h:175: error: `tempPosizione' undeclared (first use this function) make: *** [Coda.o] Error 1 
```

我正在使用带有 g++ 的 dev-c++ 4.9.9.2

我已经上传了整个源代码@http: [//ge.tt/9I0pXcS/v/0](http://ge.tt/9I0pXcS/v/0?c) ?c供您编译。对于编译，您可以使用文件夹“Coda”中的 make 文件或在编译器文件夹中启动以下命令。

g++ -g -c Coda.h -o Coda.o ar crf Coda.a Coda.o

我真的可以帮到你。非常感谢您抽出宝贵的时间。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:52:45.373

`Coda.h:156: error: `template<class T> class Coda' used without template parameters`

这告诉你你已经 put`Coda`而不是`Coda<something>`.

`Coda.h:158: error: `POSIZIONENULLA' undeclared (first use this function)`

你还没有申报`POSIZIONENULLA`。

`Coda.h:161: error: `posizione' undeclared (first use this function)`

相同的。

`Coda.h:161: error: expected `;' before "tempPosizione"`

你忘记了`;`第 161 行的分号

`Coda.h:162: error: `tempPosizione' undeclared (first use this function)`和`Coda.h:164: error: `temPosizione' undeclared (first use this function)`

和上面一样。

# java - 为什么这里的 set 属性会出现相反的情况？

> ID：13637584
> 
> 赞同：1
> 
> 时间：2012-11-30T01:11:24.557
> 
> 标签：java, xml, dom

> **可能重复：**
> [Java 中输出文件中 XML 属性的控制顺序](https://stackoverflow.com/questions/8087602/control-order-of-xml-attributes-in-outputed-file-in-java)

我有这个代码：

```
 Element node = testDoc.createElement("image_file");
 node.setAttribute("id", count);
 node.setAttribute("file_name", fileNameCombinedWithPNG); 
```

我的 XML 在`filename`之前`id`，无论我做什么，即使我切换设置属性的顺序，XML 的输出看起来都是一样的，即它是：

```
image_file filename="xyz" id="1" as but I want is image_file id="1" filename="adfx" 
```

# c - 关于 C 中 unsigned char * 的奇怪问题

> ID：13637586
> 
> 赞同：4
> 
> 时间：2012-11-30T01:11:44.237
> 
> 标签：c, unsigned-char

所以我有一个返回 unsigned char * 的方法

```
unsigned char* someMethod(num)
unsigned short num;
{
    //do some stuff with num and change values of a
    unsigned char * a = (unsigned char*) malloc(4);
    printf("a0 is %x\n",a[0]);
    printf("a1 is %x\n",a[1]);
    printf("a2 is %x\n",a[2]);
    printf("a3 is %x\n",a[3]);
    return a;
} 
```

当我调用 someMethod(128) 时：

```
unsigned char* s = someMethod(128);
printf("s0 is %x\n",s[0]);
printf("s1 is %x\n",s[1]);
printf("s2 is %x\n",s[2]);
printf("s3 is %x\n",s[3]); 
```

它会打印出来

```
a0 is 30
a1 is 1
a2 is 31
a3 is 30
s0 is 30
s1 is 14
s2 is ffffff9d
s3 is 0 
```

这对我来说毫无意义，因为我分配了 s = someMethod(128)。a 和 s 不应该具有相同的值吗？！？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:59:49.657

参考@gl3829 的评论，我会选择

```
unsigned char *a = malloc(4 * sizeof(*a)) 
```

以便大小“自动”正确。

更重要的是，我认为一个问题是，`someMethod`在实际分配任何内容之前，您会打印出分配数组中的值。这会调用未定义的行为并允许产生任何结果。在打印出来之前尝试存储一些东西。

对于以十六进制打印`unsigned char`s，正确的格式说明符是`%hhx`. 使用错误的说明符也可以调用未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:17:39.493

当您在 中打印时`%x`，该`printf()`函数会读取`int`. 在`int`32 位计算机中，长度为 4 个字节。因此，第 2、3 和 4 号在区域*外和区域内*`printf()`阅读。您不能期望 malloc 之外的区域始终保持不变。*`malloc()`*

 *解决办法是，垫。`sizeof(int)`Malloc比您当前想要的多几个字节，可能更多。

解决方案 2：在将其传递给之前将其类型`s[i]`转换为first`int``printf()`*

# java - XCode 的 codesense 是否在项目之外工作？

> ID：13637590
> 
> 赞同：0
> 
> 时间：2012-11-30T01:12:22.820
> 
> 标签：java, xcode, eclipse, codesense

我喜欢在 Xcode 中编辑 .java 文件，因为它很简单。我不必为了编辑我的 .java 文件而开始一个新项目或任何东西。但是，我想在文档窗口中进行代码感知工作（例如，alt+单击类名）。我 alt+单击一个类名，但它说没有找到符号。我下载了eclipse，发现同样的问题。在 Eclipse 中效果很好，但前提是我建立了一个完整的项目。

我知道这可能看起来很过时，但我才刚刚开始 Java 编程。对于刚开始的项目，最好学习如何编译 .java 文件并从终端的命令行运行其类文件。我现在更喜欢这种方式，但我真的需要弹出带有类方法建议的小框......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:15:27.053

执行此操作的任何工具都需要您设置一个项目，因为它通过索引您的项目来工作。Xcode 查看您在项目中使用的源代码、标头和框架，以查找代码中符号的定义和声明。如果没有项目告诉它要查看哪些源、标头和框架，它就无法工作。所以不，没有办法用 Xcode 做到这一点，我怀疑出于同样的原因会有任何其他工具。

# java - charAt() 不工作

> ID：13637593
> 
> 赞同：1
> 
> 时间：2012-11-30T01:12:39.643
> 
> 标签：java, char

因此，这些参数都不起作用。我尝试编译它，但两者都收到相同的错误消息：

```
unexpected type
required: variable
found   : value

if(word.charAt(val) = guess)
              ^ 
```

然而，克拉指向括号，所以我不确定它的参数错误。我看了大约 15 个网站，他们都说应该是 0 到 1 之间的整数，小于单词的长度

```
int val = 0;
if(word.indexOf(guess) > 0 )
{
    if(word.charAt(val) = guess)
    {
        screentxt[val] = guess;
    }
    if(word.charAt(0) = guess)
    {
        screentxt[0] = guess;
    }   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T01:14:17.507

您当前正在`if`表达式中使用赋值。

在语句中使用`==`运算符来评估内容：`if``char`

```
if (word.charAt(val) == guess) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T01:18:04.777

这实际上是在尝试进行分配而不是比较：

```
if(word.charAt(val) = guess) 
```

改成

```
if(word.charAt(val) == guess) 
```

此外，您可能想要更改：

```
if(word.indexOf(guess) > 0 ) 
```

到

```
if(word.indexOf(guess) >= 0 ) 
```

如果`guess`char 实际上是 char 中的第一个字符`word`，在这种情况下，您可以删除它，因为它是多余的：

```
if(word.charAt(0) == guess)
{
    screentxt[0] = guess;
} 
```

# networking - 消息发送死锁的 TCP 规范

> ID：13637595
> 
> 赞同：-1
> 
> 时间：2012-11-30T01:12:48.740
> 
> 标签：networking, tcp, high-level

我试图对 TCP 有一个高层次的理解，但遇到了一个令人困惑的点。

假设我们有一个连接的服务器 S 和一个客户端 C。

如果 S 向 C 推送消息，并且在 C 意识到有消息发送之前，它也会向 S 推送消息。

现在处于 S 正在等待它的消息 ACK 而 C 也在等待它的 ACK 的状态。

规范如何避免这种死锁？网上的很多资源很快就进入了具体的实现细节，但我试图找到一个关于如何处理这些死锁的高级解释。

（我假设答案与缓冲有关，但没有找到关于该主题的具体信息。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:20:15.663

什么僵局？这是一个全双工（双向）协议。具体来说，在您描述的情况下，没有什么可以阻止双方发送他们的 ACK。该行为完全在[RFC 793](http://www.ietf.org/rfc/rfc793.txt)中指定，它比您想象的要复杂得多。

# php - 需要帮助将我的 PHP 应用程序转换为 Coldfusion。谁能帮忙

> ID：13637596
> 
> 赞同：2
> 
> 时间：2012-11-30T01:12:49.863
> 
> 标签：php, coldfusion

这是当前的 PHP，不知道如何开始转换为 Coldfusion。我需要在我的coldfusion服务器上发布这个。

```
<?php
/**
 * Saves POST input as an XML file and returns a JSON response
 */

$xmlString;

if (isset($_POST['xmlString'])){
$filename  = $_POST['xmlFilename'];
$xmlString = stripslashes($_POST['xmlString']);

$newFile = "_data/".$filename.".edit.xml";

//write new data to the file, along with the old data 
$handle = fopen("../".$newFile, "w"); 
if (fwrite($handle, $xmlString) === false) { 
    echo "{error:\"Couldn't write to file.\"}";  
} 
else {
    //echo "{filename:\"".$newFile."\"}";
    echo "success:::$newFile:::$xmlString";
}
    fclose($handle);    
}
?>
` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T16:29:54.027

我不太了解 PHP，但我可以推断一些东西，我可以谷歌搜索一些东西。如果我弄错了，有人可以纠正我。

*   [isset()](http://php.net/manual/en/function.isset.php)：虽然不是直接类比，但应该使用[structKeyExists()](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fbb.html)来进行变量检查。`isset()`主要直接等同于[isDefined()](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fbd.html)，但`isDefined()`由于它倾向于返回误报，因此应尽可能避免；
*   [$_POST 变量](http://www.w3schools.com/php/php_post.asp)与 FORM 范围的变量相同；
*   [stripslashes()](http://php.net/manual/en/function.stripslashes.php)取消转义字符串中转义引号的反斜杠；
*   `.`(dot) 是[字符串连接运算符](http://php.net/manual/en/language.operators.string.php)，就像`&`在 CFML 中一样；
*   [fopen()](http://php.net/manual/en/function.fopen.php)打开一个文件，“w”参数打开它进行写入。就像CFML中[fileOpen()](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d9c.html)的等效用法一样。
*   [fwrite()](http://php.net/manual/en/function.fwrite.php)写入所述文件。
*   `=== false`位检查以查看是否存在文件写入错误，该错误在 CFML 中没有直接等效项，所以我想类比是在文件操作周围放置一个 try/catch（无论如何都应该这样做）。
*   [echo()](http://php.net/manual/en/function.echo.php)相当于[writeOutput()](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6da1.html)（或只是 <cfoutput>）；
*   [fclose()与](http://php.net/manual/en/function.fclose.php)[fileClose()](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6da1.html)相同。

就是这样：我认为其余部分是不言自明的。

我要说的一件事是（正确地〜）猜测所有这些东西很容易，或者谷歌搜索它。我刚刚搜索了“php fopen”、“php dot operator”等（主要是为了获取文档的链接）。所以你也许可以自己做这件事。

# c# - 如何停止进度条动画？

> ID：13637606
> 
> 赞同：5
> 
> 时间：2012-11-30T01:13:50.480
> 
> 标签：c#, visual-studio-2012, progress-bar

> **可能重复：**
> [禁用 WinForms ProgressBar 动画](https://stackoverflow.com/questions/2834761/disable-winforms-progressbar-animation)

我正在使用进度条来检测来自我们收音机的一些数据，并且它的“闪烁”是不可接受的。此外，每次更新速率较慢的数据都会被动画化，而不是立即移动。这种行为不能提供与仪器所期望的相同的视觉体验。我意识到进度条不是为此目的，但它是我工具箱中的内容。

使用[此链接](https://stackoverflow.com/questions/2834761/disable-winforms-progressbar-animation)中的“暂停”命令不允许我继续更新该值，因为它已暂停。恢复正常，更新值然后再次暂停似乎不是一个好的解决方案。此外，默认情况下暂停变为黄色，因此除了上述所有内容之外，我还需要将颜色恢复为绿色。

有人可以建议如何关闭此动画或建议第 3 方“仪器工具箱”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:43:22.503

在我的脑海中，这可能会起作用：禁用视觉样式。在`Program.Main`Visual Studio 生成的方法中，您应该看到如下内容：

```
[STAThread]
static void Main() 
{
    Application.EnableVisualStyles();    // Comment this out
    Application.Run(new Form1());
} 
```

如果您注释掉该行，这可能会使您的应用程序看起来有点“旧”，但我认为您不会有动画进度条。也许这应该有所帮助。

# ruby-on-rails - to_formatted_s(:long_ordinal) 最后返回 00:00

> ID：13637608
> 
> 赞同：2
> 
> 时间：2012-11-30T01:13:55.493
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在使用 ActiveSupport 的 to_formatted_s。

正在做：

```
(User.first.birthday).to_formatted_s(:long_ordinal) 
```

印刷

```
 => "February 28th, 1992 00:00" 
```

为什么最后是 00:00？这是正常的吗？摆脱它的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T01:23:03.733

:long_ordinal 包括时间。

请参阅文件顶部附近的 activesupport-3.2.8/lib/active_support/core_ext/time/conversions.rb。

```
:long_ordinal => lambda { |time| 
  time.strftime("%B #{ActiveSupport::Inflector.ordinalize(time.day)}, %Y %H:%M") }, 
```

要摆脱它，请定义您自己的格式，如下所示：

```
Time::DATE_FORMATS[:my_long_ordinal] = lambda { |time| 
      time.strftime("%B #{ActiveSupport::Inflector.ordinalize(time.day)}, %Y") } 
```

我将这些东西放入 config/initializers/time_formats.rb 中，如下所示：

```
Date::DATE_FORMATS[:month_year] = Time::DATE_FORMATS[:month_year] = "%B %Y"
Date::DATE_FORMATS[:mon_yr] = Time::DATE_FORMATS[:mon_yr] = "%b '%y"
Date::DATE_FORMATS[:yyyymmdd] = Time::DATE_FORMATS[:yyyymmdd] = "%Y-%m-%d" 
```

让他们井井有条，集中在一处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T01:22:57.843

是的，这很正常，这不仅仅是约会。

```
(User.first.birthday).to_date.to_formatted_s(:long_ordinal) 
```

# c# - 向现有 XMLNode 添加属性

> ID：13637611
> 
> 赞同：3
> 
> 时间：2012-11-30T01:14:39.203
> 
> 标签：c#, xml, xml-parsing

您好我正在尝试为现有 xml 文件中的多个标签添加属性。这是 xml 结构：

```
<Planet>
  <Continent ContinentName="Africa">
    <Country CountryName="Algeria" />
    <Country CountryName="Angola" />
     ...
  </Continent>
  <Continent ContinentName="Europe">
    <Country CountryName="France" />
    <Country CountryName="England" />
    ...
  </Continent>
  ...
</Planet> 
```

我正在尝试为每个国家/地区标签添加一个 Id 属性。这是我的代码：

```
public static List<Cities> cities = new List<Cities>();

XmlDocument xDoc = new XmlDocument();
xDoc.Load(@"D:\Projects IDE\Visual Studio\Tutorial\e-commerce\classModeling\GenerateXml file\GenerateXml file\bin\Debug\Planet.xml");
XmlAttribute xKey = xDoc.CreateAttribute("Id");
XmlElement root = xDoc.DocumentElement;
XmlNodeList nodes = root.SelectNodes("//Country");
int count = 0;

foreach( XmlNode node in nodes ) {
    string name = node.Attributes["CountryName"].Value;

    foreach (var cityObj in cities)
    {
        xKey.Value = cityObj.cityInitial;

        if(name == cityObj.cityName)
        {
            count++;
            node.Attributes.Append(xKey);
            Console.WriteLine(count);
        }
    }

}

xDoc.Save(@"D:\Projects IDE\Visual Studio\Tutorial\e-commerce\classModeling\GenerateXml file\GenerateXml file\bin\Debug\Planets.xml"); 
```

问题是此代码仅将 id 添加到 XML 文件中的最后一个元素。现在起初我认为这是因为只有一个条件为真，但后来我添加了一个计数器，结果证明该条件为真 179 次。如果是这样，为什么我在结束时只添加了一个属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T01:34:27.263

你应该放在`XmlAttribute xKey = xDoc.CreateAttribute("Id");`循环内

# jquery - jQuery 可拖动 ui 禁用子元素

> ID：13637612
> 
> 赞同：3
> 
> 时间：2012-11-30T01:14:56.647
> 
> 标签：jquery, draggable

我试图让 div 的子元素不可拖动。到目前为止，我必须手动输入每个 disabled:true 事件，这很痛苦。有什么方法可以选择所有元素不能仅拖动我选择的主要元素？

```
$(function() {
    $( "#profile-advanced-right div" ).draggable();
$( "#profile-advanced-left div" ).draggable();
$( ".main-head" ).draggable({disabled:true});
$( ".main-content" ).draggable({disabled:true});
$( ".h3" ).draggable({disabled:true});
$( ".subtitle" ).draggable({disabled:true});
$('.ui-state-disabled').css({'opacity':'1'});
}); 
```

这就是我到目前为止所拥有的，html类似于

```
<div id="profile-advanced-right">
  <div class="module main">
    <div class="main-head">
  <span class="h3">Title</span>
 </div>
 <div class="main-content">
   <div>
   yadda
 </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-20T11:22:26.353

我认为您可以使用可拖动的取消属性来防止子元素可拖动，该属性使用 jQuery 选择器语法。要防止所有子元素可拖动，您可以使用：

```
$('#profile-advanced-right').draggable({ cancel: '#profile-advanced-right' > * }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:39:13.317

尝试 children() 方法，编辑您的代码示例，例如：

```
$(function() {
    $("#profile-advanced-right div").draggable();
    $("#profile-advanced-left div").draggable();
    $("#profile-advanced-right div").children().draggable({disabled:true});
    $("#profile-advanced-left div").children().draggable({disabled:true});
    $('.ui-state-disabled').css({'opacity':'1'});
}); 
```

更多信息[http://api.jquery.com/children/](http://api.jquery.com/children/)

不知道您想要的 UX，您也可以考虑仅在您想要可拖动的元素上使用句柄：http: [//jqueryui.com/draggable/#handle](http://jqueryui.com/draggable/#handle)

# java - Bonjour 客户端 Java

> ID：13637613
> 
> 赞同：-1
> 
> 时间：2012-11-30T01:15:17.313
> 
> 标签：java, client, bonjour

我正在尝试将[Chatty 客户端/服务器应用程序](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)移植到 Android (Java)。我只需要客户端，但无法在线查找示例。你们中有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:43:45.060

Bonjour 是来自 Apple 的 Zeroconf ......这些链接为您提供有关网络服务的更多信息：

*   [是的，Android 可以做 Zeroconf/Bonjour：jmDNS](http://android.noisepages.com/2010/02/yes-android-can-do-zeroconfbonjour-jmdns/)
*   [Zeroconf 变得简单：使用 Bonjour for Java，第 1 部分](http://momo.brauchtman.net/2008/12/16/zeroconf-made-easy-using-bonjour-for-java/)
*   [零配置](http://www.zeroconf.org/)

至于 Java 中的服务器/客户端聊天应用程序，我发现[**此链接**](http://ashishmyles.com/tutorials/tcpchat/index.html)非常有用。它是为 Swing Layout 编写的，但我确实毫不费力地将它移植到了 Android。（如果我知道我把它放在哪里，我会分享！）

哦！你可能想看看这个：

*   [Java 的 TCP 和 UDP 客户端/服务器库](http://code.google.com/p/kryonet/source/browse/#svn/trunk/kryonet/examples/com/esotericsoftware/kryonet/examples/chat)

# java - JPype 将 args 传递给 Java

> ID：13637614
> 
> 赞同：3
> 
> 时间：2012-11-30T01:15:19.830
> 
> 标签：java, python, jpype

我有一个试图从 python 访问的 java 外观类，所以我决定使用`JPype`. 我的外观类只有一个带有四个参数的构造函数（无默认值）

```
public facade(String a, String b, List<String> c, List<String> d){
    ...
} 
```

初始化类的新实例时，我似乎无法正确获取类型。我尝试的一切都给出了同样的错误：

```
File ".../main.py", line 34, in __init__
    facadeinstance = Facade(jpype.JString(s1), jpype.JString(s2),jpype.JArray(jpype.java.lang.String, 1)(s3), jpype.JArray(jpype.java.lang.String, 1)(s4))
File "/usr/local/lib/python2.7/dist-packages/jpype/_jclass.py", line 79, in _javaInit
    self.__javaobject__ = self.__class__.__javaclass__.newClassInstance(*args)
RuntimeError: No matching overloads found. at src/native/common/jp_method.cpp:121 
```

我知道`JPype`正在工作。我已经尝试了几种包装器组合来以正确的形式获取数据，但没有运气。

相关代码：

```
import jpype

s1 = "something"
s2 = "something else"
s3 = ["something in a list"]
s4 = ["Something else in a list"]

jpype.startJVM(jpype.getDefaultJVMPath(), "-Djava.class.path=" + JavaJarDir)
myLib = jpype.JPackage('myLib')
Facade = myLib.Facade # class loads fine, resources printed to stdout
# The error occurs on the next line
FacadeInstance = Facade(jpype.JString(s1), jpype.JString(s2), jpype.JArray(jpype.java.lang.String, 1)(s3), jpype.JArray(jpype.java.lang.String, 1)(s4))
jpype.shutdownJVM() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:33:02.147

JArray(JString) 与列表不匹配。您必须使用 jpype.java.util.ArrayList() （或任何实现 List 的东西）。

```
myArray = ["A", "B", "C"]
myList = jpype.java.util.ArrayList()
for s in myArray:
    myList.add(s) 
```

所以你的代码看起来像这样：

```
import jpype

s1 = "something"
s2 = "something else"
s3 = ["something in a list"]
s4 = ["Something else in a list"]

jpype.startJVM(jpype.getDefaultJVMPath(), "-Djava.class.path=" + JavaJarDir)

# Import Java library and class
myLib = jpype.JPackage('myLib')
Facade = myLib.Facade

# Prepare List<String> arguments
arg3 = jpype.java.util.ArrayList()
for s in s3:
    list3.add(s)
arg4 = jpype.java.util.ArrayList()
for s in s4:
    list4.add(s)

FacadeInstance = Facade(jpype.JString(s1), jpype.JString(s2), arg3, arg4)

jpype.shutdownJVM() 
```

# objective-c - 从 ISO 8601 字符串创建 NSDate 对象的问题

> ID：13637619
> 
> 赞同：0
> 
> 时间：2012-11-30T01:15:53.677
> 
> 标签：objective-c, nsdate, iso8601

我在将字符串转换为 NSDate 对象时遇到问题，我不知道为什么。

```
NSString* tester= @"2012-11-26T10:20:40.187";
NSLog(@"", tester);  //Print the Date String

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
NSDate *date = [formatter dateFromString:tester];           //Store the date

NSDateFormatter *output = [[NSDateFormatter alloc] init];
[output setDateStyle:NSDateFormatterMediumStyle];
NSLog(@"DATE OBJECT:%@\nDATE STRING: \"%@\"", [output stringFromDate:date]);     //Print the NSDate object and the string 
```

但我似乎得到的是：

```
DATE OBJECT:(null)
DATE STRING: "2012-11-26T10:20:40.187" 
```

我认为这与 .187 有关，但我不确定。如果这是重复的，我很抱歉，但我无法弄清楚。

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:37:03.800

毫秒的缩写是“S”而不是 Z，即 TimeZone。您似乎已经阅读了该示例所在的正确文档，但您错过了指向 Unicode 技术标准 #35 的链接。请参阅 NsDateFormatter 文档，搜索“Mac OS X v10.4 中的格式化程序使用版本 tr35-4”。

试试下面：

```
[formatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss.SSS"]; 
```

另请参阅[NSDateFormatter 问题](https://stackoverflow.com/questions/5673994/nsdateformatter-question)

# javascript - 在 JSApi 中获取连接电子邮件和名称时出现 Linkedin 403 禁止错误

> ID：13637622
> 
> 赞同：1
> 
> 时间：2012-11-30T01:16:07.380
> 
> 标签：javascript, api, linkedin

我正在尝试从连接中获取电子邮件、姓名和图片，但是当用户进行身份验证时，我收到错误“GET [https://api.linkedin.com/v1/people/~/connections:(picture-url,first -name,email-address)?count=30](https://api.linkedin.com/v1/people/~/connections:(picture-url,first-name,email-address)?count=30) 403 (禁止) "

我在下面发布我的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: uey3banalp6s
    authentication: true
</script>

<script type="text/javascript">

    function loadData() {
    IN.API.Connections("me")
    .fields(["pictureUrl","firstName","emailAddress"])
    .params({"count":30})
    .result(function(result) {
    profHTML = "";
    for (var index in result.values) {
    profile = result.values[index]
    if (profile.pictureUrl) {
    profHTML += "email:" + profile.emailAddress;
    profHTML += "name:" + profile.firstName;
    profHTML += "<img class=img_border height=30 align=\"left\" src=\"" + profile.pictureUrl + "\">";
    }
    }
    $("#connections").html(profHTML);
    });
    }

</script>
</head>

<body>
<div id="connections"></div>
    <script type="IN/Login" data-onAuth="loadData">
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:21:49.153

API 不理解“身份验证：真”。它应该是“授权：真”。

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: uey3banalp6s
    authorize: true
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:15:41.360

将脚本初始化代码更改为：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: your_api_key
    authentication: true
    scope: r_basicprofile r_emailaddress
</script> 
```

这应该使您的脚本正常工作。您缺少范围权限。更多信息：[配置文件字段权限](https://developer.linkedin.com/documents/profile-fields)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:53:28.147

首先出现的脚本，即您加载 LinkedIn 的位置，是一团糟。您需要将 API 密钥放在引号中，否则 JavaScript 会认为加密集群炸弹是一个变量名。其次，您在看似分配的内容中使用了冒号，但您不在对象文字中。尝试使用

```
api_key = "uey3banalp6s";
authentication = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T02:11:58.073

我很确定你不能这样做（但显然有黑客可以允许它）

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: uey3banalp6s   //nothing in here gets used if src is set
    authentication: true    //even if it did it would be "=" not ":"
</script> 
```

将 Keith 的答案放在您的其他脚本标签中

# android-intent - 如何传递 ArrayList 在 Android 中从一项活动到另一项活动？

> ID：13637625
> 
> 赞同：1
> 
> 时间：2012-11-30T01:16:40.603
> 
> 标签：android-intent, arraylist

我正在尝试将自定义对象从一个活动发送到另一个活动，但是当我调用启动活动时它崩溃了。

下面是我使用的片段。

我的活动实现`Serializable`

```
ArrayList<CUSTOM_OBJECT> Cus_Obje_arraylist = new ArrayList<CUSTOM_OBJECT>(); 
```

这是我的意图：

```
Intent inte = new Intent(getApplicationContext(), ListActivity.class); `
inte.putExtra("list",Cus_Obje_arraylist);`
startActivity(inte); 
```

请让我知道它为什么会崩溃或我可以使用什么替代方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T01:27:36.877

I can give a suggestion. I do this in my project.

1.Implement a singleton class as the bridge to pass object. (Hopefully you know what's singleton, I you don't, add comment to tell me.

```
class BridgeClass {
    private BridgeClass() {}

    static BridgeClass obj = nil;
    public BridgeClass instance() {
         if (obj == nil) obj = new BridgeClass();
         return obj;
    }

    public ArrayList<CUSTOM_OBJECT> cache;
 } 
```

2.In the from activity,

```
BridgeClass.instance().cache = Cus_Obje_arraylist; 
```

3.Then in the to activity, you can get it from the bridge class.

```
ArrayList<CUSTOM_OBJECT> Cus_Obje_arraylist = BridgeClass.instance().cache; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:39:09.840

You need to create the Parcelable object to pass the custom array list from one activity to the another actvity.

Then put it into the Bundle object using the this api.

```
putParcelableArrayList(key, value);
getParcelableArrayList(key); 
```

=== Sender ===

```
ArrayList<Custom> ar = new ArrayList<Custom>();
Bundle bundle = new Bundle("test");

bundle.putParcelableArrayList("key", ar);
Intent intent = new Intent(this, anotherActivity.class);
intent.putBundle(bundle); 
```

=== Receiver ===

```
Bundle bundle = getIntent().getBundleExtra("test");
ArrayList<Custom> ar = bundle.getParcelableArrayList("key"); 
```

If you have any question, comment it.

# maven - 如何将 maven 创建的 webapp 部署到 tomcat

> ID：13637627
> 
> 赞同：1
> 
> 时间：2012-11-30T01:16:47.613
> 
> 标签：maven, web-applications, deployment, jboss

因此，我关注了[http://www.mkyong.com/jsf2/jsf-2-0-hello-world-example/](http://www.mkyong.com/jsf2/jsf-2-0-hello-world-example/)以获得有关如何使用 maven 和 jsf 的简单教程。我通过在命令提示符下运行 mvn archetype:generate -Dfilter=org.apache:maven-archetype-webapp 创建了一个 maven 项目。然后我继续本教程，我最终创建了所有必要的文件，但是当我到最后时，我意识到我确实创建了一个服务器。所以我创建了一个真正快速的，但是当涉及到向服务器添加文件时（从添加或删除对话框），没有项目或文件出现。我不在项目所在的计算机上，所以我无法复制/粘贴 .pom 文件，但它看起来几乎与教程中的 pom 完全相同（唯一的区别是 groupId、artifact 等。）没有其他插件、依赖项或配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:43:45.020

您想将 Eclipse 中的 webapp 部署到 Tomcat 吗？或者作为某种自动/持续部署？

在 Eclipse 中，您经常需要将 Dynamic Web 项目和 JSF facets 添加到您的项目中，以便 Eclipse 将项目识别为具有部署能力。如果您使用 m2eclipse，请确保安装 m2eclipse wtp 插件，以便自动完成。

如果你想向 pom.xml 添加自动部署，我建议使用 maven cargo 插件：[http](http://cargo.codehaus.org/Maven2+plugin) ://cargo.codehaus.org/Maven2+plugin - 它支持主要容器。

对于 tomcat，您需要修改 tomcat-users.xml 以允许自动部署并保留 tomcat-manager 应用程序。如果您有 startet tomcat 并将您的浏览器指向`http://localhost:8080/manager/html/list`它应该告诉您登录或向该文件添加什么。然后在配置中使用配置的用户通过tomcat-manager使用`mvn cargo:deploy`目标部署war文件。必须使用 war 作为包装将配置添加到 pom.xml，而不是 parent-pom.xml

# python - 采用图形的 A* 算法

> ID：13637629
> 
> 赞同：2
> 
> 时间：2012-11-30T01:17:09.407
> 
> 标签：python, shortest-path, dijkstra, a-star

我正在做一个项目，我需要一个最短路径算法来找到最短路径。目前我正在使用 David Eppstein 的 Dijkstra 算法的实现，但由于图的性质很大（大约 360 万个节点），找到这条最短路径可能需要将近一分钟。我知道 A* 算法运行得更快，但是我发现的所有 I 实现都基于网格样式而不是图形样式。示例图如下所示：

```
graph = {"A": {"B": 2}
     "B": {"A": 2, "C": 5, "D": 4}
     "C": {"B": 5, "E": 7}
     "D": {"B": 4, "E": 10}
     "E": {"C": 7, "D": 10}
    } 
```

如果有人知道一些在线代码实现 A* 以接受这种图形作为输入，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:54:15.690

有一个名为[NetworkX](http://networkx.lanl.gov/)的 Python 图形库，它实现 了所有常见的[最短路径](http://networkx.lanl.gov/reference/algorithms.shortest_paths.html)算法。

# forms - WordPress：重定向表单验证并提交

> ID：13637633
> 
> 赞同：1
> 
> 时间：2012-11-30T01:17:27.793
> 
> 标签：forms, wordpress, redirect, submit

验证和提交后重定向表单的最佳方式是什么？表单不是插件，它是主题的一部分。

a）这是表单操作代码：

```
<form action="" id="pro_form" enctype="multipart/form-data" method="post"> 
```

b）这是验证字符串：

```
<input  type="submit" onclick="return validation()" value="Submit"  > 
```

任何帮助，将不胜感激。谢谢！

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:50:51.767

我不确定这是否是您要求的，但我认为最好的方法是使用 javascript，如下所示：

```
echo '<script type="text/javascript">window.location ="NewLocation";</script>'; 
```

将此代码放在表单从验证返回之后。

# javascript - Javascript：制作一个不会为 GC 制造任何垃圾的深度克隆/扩展/复制功能

> ID：13637636
> 
> 赞同：1
> 
> 时间：2012-11-30T01:17:49.063
> 
> 标签：javascript, object, garbage-collection, clone, real-time

我想做一个不会为 GC 制造任何垃圾的 extendDeep() 函数。

垃圾收集器需要尽可能地处于非活动状态。参考：[https ://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript](https://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript)

这是我要修改的 extendDeep() 函数：

```
function extendDeep(parent, child) {
    var i, toStr = Object.prototype.toString,
        astr = "[object Array]";

    child = child || {};

    for (i in parent) {
        if (parent.hasOwnProperty(i)) {
            if (typeof parent[i] === 'object') {
                child[i] = (toStr.call(parent[i]) === astr) ? [] : {};
                extendDeep(parent[i], child[i]);
            } else {
                child[i] = parent[i];
            }
        }
    }
    return child;
} 
```

该函数不必返回任何内容。因为重新调整的对象是产生垃圾的原因。

假设父对象的所有属性都可以通过引用获得（对象的重用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:39:42.180

JS 解释器可能会在执行此操作时避免创建字符串，`toStr.call(parent[i])`但如果您不能依赖它们进行优化，那么您可以通过更改来避免在非常常见的情况下创建字符串

```
toStr.call(parent[i]) === astr 
```

到

```
parent[i] instanceof Array  // Is a regular array.
|| (!(parent[i] instanceof Object)  // Is cross-frame
    && 'number' === typeof parent[i].length  // Might be an array
    && toStr.call(parent[i]) === astr)  // So check the hidden [[Class]] property. 
```

如果您知道您正在处理由同一框架中的构造函数创建的对象（因此没有跨框架对象共享），那么您只需

```
parent[i] instanceof Array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:34:17.427

您需要决定的第一件事是您想要克隆还是副本，它们是两件不同的事情。

您给出的代码做了一个副本（而不是一个很好的副本，因为使用 hasOwnProperty 意味着您很容易得到非功能性副本）。克隆就像这样。

```
function Clone(){}
function clone(object) {        
    Clone.prototype = object;

    return new Clone();
}

var objectToClone = {};
var clonedObject = clone(objectToClone); 
```

不同之处在于对于副本，对原始对象的更改不会影响副本。对于克隆，除非克隆覆盖了属性，否则对原始对象的更改将影响克隆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T02:13:11.960

这实际上是一个比我最初想象的更有趣的问题。阅读建议的链接后，很明显文章作者提倡对象池。所以像

```
function Pool(fConstructor, nMaxSize, fCleanFunction) {
    this.aObjectPool = [];
    this.nMaxSize = nMaxSize;
    this.fCleanFunction = fCleanFunction;
    this.fConstructor = fConstructor;
}

Pool.prototype.get = function() {
    return this.aObjectPool.pop() || new this.fConstructor();
}

Pool.prototype.recycle = function(oObject) {
    if (aObjectPool.length < this.nMaxSize) {
        fCleanFunction(oObject);
        this.aObjectPool.push(oObject);
    }
}       

function wipeArray(aArray) {
    aArray.length = 0;
}

function wipeObject(oObject) {
    for (var p in obj) {
        if (obj.hasOwnProperty(p)) {
            delete obj[p];
        }
    }
};

var oArrayPool = new Pool(Array, 50, wipeArray);

var oObjectPool = new Pool(Object, 50, wipeObject); 
```

可用于实现池。然后，您将用 pool.get() 替换扩展深度函数中的 [] 和 {}。

当然，要使其正常工作，您还需要确保回收旧对象和数组，而不是仅仅将它们留作垃圾收集。

# git - 来自几乎标准 svn 布局的“git svn clone”

> ID：13637637
> 
> 赞同：1
> 
> 时间：2012-11-30T01:17:49.710
> 
> 标签：git, git-svn

我们有一个要迁移到 git 的 subversion 存储库。

svn 存储库的布局*几乎*是标准的，但在历史上的某个时刻，一些白痴开发人员（好吧，是我）不小心在存储库根目录而不是树干中创建了一个目录，称为“/foo”。

“foo”在那里住了几个星期，然后被转移到应该一直在的“/trunk/foo”。

现在，当我执行“git svn clone --stdlayout [...]”时，我想念发生在主干之外的部分历史记录。

有没有办法将“/foo”的早期更改“合并”到 git 上的 master 历史中？

**编辑 **或者，有没有办法将那些缺失的修订放到一个分支上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:58:35.137

我不确定这会让你得到你想要的，但欢迎你尝试：

1.  将 foo 文件夹克隆到单独的文件夹。为此，您必须找出它在其原始位置 (/foo) 中的修订范围。假设它是在 rev 100 上创建的，并在 rev 200 上移至 /trunk/foo。在这种情况下，您的命令应如下所示：

    `git svn clone -r100:200 http://server/foo`

你会得到另一个 git repo foo。

1.  转到主 git 存储库并将 foo 添加为远程：

    `git remote add foo /path/to/foo`

2.  拿来：

    `git fetch foo`

现在您可以在 remotes/foo/master 上设置本地分支或将其合并到您的 master。由于新提交和原始提交没有共同的历史记录，因此您将没有正确的历史记录图，但是您将在一个 git repo 中拥有所有开发历史记录。

# php - 从字符串而不是表中使用 SQL Server 合并

> ID：13637638
> 
> 赞同：0
> 
> 时间：2012-11-30T01:17:49.710
> 
> 标签：php, sql-server, merge, upsert

通过 php 发送查询时，如何为具有复合键的表创建 Upsert 功能？

我有一个 order_items 表，其键既是订单号又是项目号。然后，我有一个指向商店的 api，它返回订单元素的 xml 文档（然后我将其解析为数组）。我想获取这个字符串并更新已经存在的字符串并插入不存在的字符串。由于可能有数百个订单（可能还有数千个订单项），我不想运行查询来检查每个订单项是否都存在该项目。

我认为 Merge 可能是答案，但我的数据不存在于表中（它是我要写入表的数组）。有没有办法将一串数据与现有表合并？例如，相当于：

```
$query = "IF a.order_id and a.item_id --already exist
update db.dbo.order_items
SET a.quantity = $qty, a.status = $status ....
ELSE
INSERT (order_id, item_id, quantity, status)
VALUES 
($order_id, $item_id, $qty, $status)";

run_query($query); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:38:01.980

如果其他人遇到这样的问题，这是满足我所有要求的解决方案：

```
merge <table> WITH (HOLDLOCK) as target
USING (VALUES('00001111','385480486071',10, '10.00','3.00','0.00'))
AS source (order_id, item_code, item_quantity, item_price, shipping_price, discount)
ON target.order_id = source.order_id AND target.item_code = source.item_code
WHEN MATCHED THEN
update
SET
item_quantity = source.item_quantity, target.item_price = source.item_price, target.shipping_price = source.shipping_price, discount = source.discount
WHEN NOT MATCHED THEN
INSERT (order_id, item_code, item_quantity, item_price, shipping_price, discount)
values(source.order_id, source.item_code, source.item_quantity, source.item_price, source.shipping_price, source.discount); 
```

# javascript - 在 Backbone 中将 api 密钥附加到 url 时出现问题

> ID：13637642
> 
> 赞同：1
> 
> 时间：2012-11-30T01:18:12.717
> 
> 标签：javascript, backbone.js

如何将 ?apiKey=12341234 附加到每个 ajax 请求以进行获取、创建、保存等... MongoLabs api 需要这个，我一直在努力让它充分发挥作用。

我目前正在通过骨干教程截屏工作，作者正在使用 php 框架为骨干应用程序创建 api。我以为我会通过使用 MongoLabs 免费休息 api 变得更聪明......然后我花了 2 天时间阅读文档并试图让它发挥作用。

我最接近的是在调用 fetch 时传入参数（不适用于 create）：[Fetch Backbone collection with search parameters](https://stackoverflow.com/questions/12315973/fetch-backbone-collection-with-search-parameters)

```
{ data: $.param({'apiKey':'50b28f80e4b0995a3f4312a0'}) } 
```

工作网址：
[https ://api.mongolab.com/api/1/databases/bbone_rest/collections/tasks/2/?q=&apiKey=50b28f80e4b0995a3f4312a0](https://api.mongolab.com/api/1/databases/bbone_rest/collections/tasks/2/?q=&apiKey=50b28f80e4b0995a3f4312a0)

jsfiddle 上的代码：http: [//jsfiddle.net/py4Pv/](http://jsfiddle.net/py4Pv/)

```
# Encapsulate classes
window.App =
  apiKey: { data: $.param({'apiKey':'50b28f80e4b0995a3f4312a0'}) }
  Models: {}
  Views: {}
  Collections: {}

# The model for a single task
class App.Models.Task extends Backbone.Model
  #override backbones 'id' attr to match mongo's '_id' attr
  idAttribute: "_id"
  defaults:
    title: "None provided"
    completed: 0

# The model for a collection of tasks
class App.Collections.Tasks extends Backbone.Collection
  model: App.Models.Task
  url: 'https://api.mongolab.com/api/1/databases/bbone_rest/collections/tasks/'

##################### Views, prob not important ########################  

# View for a list of tasks
class App.Views.Tasks extends Backbone.View
  tagName: 'ul'

  initialize : () ->
    @collection.on 'add', @addOne

  render: ->
    # Cycle through each task in collection and call @addOne
    @collection.each @addOne
    return this

  addOne: (task) =>
    task = new App.Views.Task({ model: task })
    @$el.append( task.render().el )

# View for a single task unit
class App.Views.Task extends Backbone.View
  tagName: 'li'
  render: ->
    @$el.html( this.model.get('title'))
    return this 
```

*** 编辑 *** 添加时的标题信息：$.ajaxSetup({ data: { key: "value"} 在 task.destroy() 之后

```
Request URL:https://api.mongolab.com/api/1/databases/bbone_rest/collections/tasks/1
Request Method:OPTIONS
Status Code:400 Bad Request

Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:origin, accept
Access-Control-Request-Method:DELETE
Connection:keep-alive
Host:api.mongolab.com
Origin:null
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11

Response Headersview source
Connection:close
Content-Length:50
Content-Type:application/json;charset=utf-8
Date:Fri, 30 Nov 2012 06:42:57 GMT
Server:Apache/2.2.22 (Ubuntu) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:58:15.690

[`url`您可以为模型/集合的属性指定一个函数](http://backbonejs.org/#Model-url)——这样您就应该能够每次都将 api 附加到查询字符串中。即，类似（对不起，我不确定 Mootools 语法）：

```
url: () => 
   return 'https://api.mongolab.com/api/1/databases/bbone_rest/collections/tasks/' + this._id + '?api=' + App.apiKey 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:04:24.893

你有没有尝试过：

```
$.ajaxSetup({
  data: {
    key: "value"
  } 
```

这会将关键参数添加到每个 ajax 请求中。在 ajaxSetup 中声明的数据是累积的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T16:04:37.007

处理此问题的最佳方法是*ajaxPrefilter*

```
var api_key = '465456132456'
$.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
  options.url = 'YOUR_URL' + options.url + '?key=' + api_key;
}); 
```

# php - 删除不必要的文字？

> ID：13637647
> 
> 赞同：0
> 
> 时间：2012-11-30T01:18:41.373
> 
> 标签：php, regex

我目前有这个：

```
$population = '1,601 (2001 census){{Census 2001 AUS|id=SSC12856|name=Palm Beach (State Suburb)|accessdate=30 June 2007|quick=on}}'; 
```

我要这个：

```
$population = '1,601 (2001 census)'; 
```

我已经尝试使用`preg_match`删除我想要的所有内容，但我无法弄清楚正则表达式。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T01:20:10.407

第一次删除`{`可以吗？

```
substr($population, 0, strpos($population, '{'))
# This would be better written strtok($population, '{'), as @mario points out. 
```

或者，删除 and 之间的所有`{{`内容`}}`：

```
preg_replace('/{{.*?}}/', '', $population); 
```

# jquery - 我试图在页面打开时隐藏一个元素，然后在单击按钮时显示

> ID：13637650
> 
> 赞同：1
> 
> 时间：2012-11-30T01:18:53.387
> 
> 标签：jquery

我试图在页面打开时隐藏一个元素，然后在单击按钮时显示，但它不显示该元素。我希望隐藏 ID 为 extraForm 的表单，直到按下按钮

```
<!DOCTYPE html>
<head>

<script src="Javascripts/jquery.js"></script>
<script type="text/javascript">
$(function () {
$("#extraForm").hide()
});
$('#showForm').click(function(){
$('#extraForm').show();
});
</script>
<link rel='stylesheet' href='website.css'>
</head>
<body>
<form action="submit.php" method="post">
<table> <table border="1"> <tr>
<tr> <td> First Name:     </td> <td> <input type="text" name="firstName">  </td> </tr> 
<tr> <td> Last Name:      </td> <td> <input type="text" name="lastName">   </td> </tr>
<tr> <td> Dorm Name:      </td> <td> <input type="text" name="dormName">   </td> </tr>
<tr> <td> Room Number:    </td> <td> <input type="text" name="roomNumber"> </td> </tr>

<tr> <td> Pizza Type:     </td> <td> <input type="radio" name="pizzaType" value="Cheese">       
Cheese
<input type="radio" name="pizzaType" value="Pepperoni"> Pepperoni <br>
<input type="radio" name="pizzaType" value="Buffalo Chicken"> Buffalo Chicken </td>
<tr> <td> Number of Pizza's:  <td>   <input type="text" name="pizzaNumber"> </td> </tr>
<tr> <td> </td> <td>  <input type="submit"> </tr> </td>

<table> <table border="1" id="extraForm">
<tr> <td> <input type="radio" name="pizzaType" value="Cheese"> Cheese</td> </tr>
<tr> <td> <input type="radio" name="pizzaType" value="Buffalo Chicken"> Buffalo Chicken      
</td> </tr>
<tr> <td> <input type="radio" name="pizzaType" value="Pepperoni"> Pepperoni</td> </tr>
<input type="button" name="showForm" value="Add Pizza" id="showForm">
</table>

</table>

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T01:25:12.573

It is always better to use CSS to hide elements that you don't need on page load

```
#extraForm { display: none }​ 
```

Your script doesn't work because you try to attach the event listener to an element that doesn't yet exist when the script runs. To fix it your jQuery needs to wait for the DOM to be ready:

```
$(function() {
    $('#showForm').click(function() {
        $('#extraForm').show();
    });
}); 
```

[**DEMO**](http://jsfiddle.net/ZjmqB/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T01:26:49.903

Since you need the form to be hidden when the page loads you could use CSS to hide it.

```
<table border="1" id="extraForm" style="display:none"> 
```

When you need the form to be displayed, simply use
`$('#extraForm').show();`

[Here is a working demo](http://jsfiddle.net/AAKVk/1/)

Dont forget to include the jquery library in your code.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T01:22:31.753

将脚本放在 HTML 文档的末尾或将其包装在：

```
$(document).ready(function(){
  // place code here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T01:22:50.557

尝试这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#extraForm").hide()
        $('#showForm').click(function(){
            $('#extraForm').show();
        });
    });
</script> 
```

`$("#extraForm").hide()`不需要在函数中 - 它在页面加载时运行。

# ios - 使用 URL 方案在应用程序内部导航

> ID：13637655
> 
> 赞同：1
> 
> 时间：2012-11-30T01:19:53.623
> 
> 标签：ios, architecture, url-scheme

我正处于 iOS 应用程序的架构规划阶段。我以前从未使用过 URL 方案，但想将它们与此应用程序合并。

这让我开始思考。如果我要使用 URL 方案在内部控制我的应用程序的视图状态，而不是从其他视图控制器推送和弹出视图控制器。具体来说，构建某种抽象管理器来拦截 URL 并显示正确的视图控制器。

基本上，我正在寻找这不是一个好方法的原因，因为我确信它违反了 MVC 原则。我看到的优势是，如果应用程序是以这种方式构建的，那么任何视图或视图状态都可以通过 URL 访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:37:18.997

你试过Three20吗？它提供了类似的东西。[http://three20.info/article/2010-10-06-URL-Based-Navigation](http://three20.info/article/2010-10-06-URL-Based-Navigation)

# networking - localhost 或 127.0.0.1 是否实际上将任何内容发送到最近的路由器，还是全部由操作系统内部处理？

> ID：13637658
> 
> 赞同：2
> 
> 时间：2012-11-30T01:20:07.777
> 
> 标签：networking, routing, localhost

localhost 或 127.0.0.1 是否实际上将任何内容发送到最近的路由器，还是全部由操作系统内部处理？

意思是，操作系统堆栈中的驱动程序或其他东西是否将 127.0.0.1 或 localhost 转换为计算机的 IP，或者它是否绕过完全离开计算机并在不实际通过网络适配器的情况下通过管道返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T01:23:34.567

不，它不会离开您的网络接口。

[http://en.wikipedia.org/wiki/Virtual_Interface](http://en.wikipedia.org/wiki/Virtual_Interface)

这里还有一个 RFC [https://www.rfc-editor.org/rfc/rfc3330](https://www.rfc-editor.org/rfc/rfc3330)

# python - 关于 matplotlib.animation.FuncAnimation 的 args

> ID：13637662
> 
> 赞同：3
> 
> 时间：2012-11-30T01:20:25.843
> 
> 标签：python, animation, matplotlib

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation

fig = plt.figure()
ax = fig.add_subplot(111)

x = np.arange(0, 2*np.pi, 0.01)        # x-array
i=1
line, = ax.plot(x, np.sin(x))

def animate():
    i= i+2
    x=x[1:] + [i]
    line.set_ydata(np.sin(x))  # update the data
    return line,

#Init only required for blitting to give a clean slate.
def init():
    line.set_ydata(np.ma.array(x, mask=True))
    return line,

ani = animation.FuncAnimation(fig, animate, init_func=init,
    interval=25, blit=True)
plt.show() 
```

我收到这样的错误：animate() 不接受任何参数（给定 1 个）......所以很困惑。我什至不给回调函数一个参数。有什么我错过的吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:02:11.230

看起来文档已经关闭，或者至少在这里不清楚：该函数有一个内在的第一个参数，即帧号。因此，您可以简单地将其定义为`def animate(*args)`or `def animate(framenumber, *args)`，甚至`def animate(framenumber, *args, **kwargs)`。

另请参阅[此示例](http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/)。

请注意，之后您会遇到其他问题：

*   `i`和`x`inside`animate`应该被声明`global`。或者更好的是，通过`fargs`关键字 in将它们作为参数传递`FuncAnimation`。

*   `x = x[1:] + [i]`不像你想象的那样工作。Numpy 数组的工作方式与列表不同：它会添加`[i]`到 的每个元素`x[1:]`并将其分配给`x`，从而使`x`一个元素更短。一种可能的正确方法是`x[:-1] = x[1:]; x[-1] = i`.

# iphone - 如何从Objective-C中的数组中获取所有可能的数字组合

> ID：13637664
> 
> 赞同：1
> 
> 时间：2012-11-30T01:20:59.780
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [生成 NSArray 元素的排列](https://stackoverflow.com/questions/3791265/generating-permutations-of-nsarray-elements)

假设我有

```
[1,2] 
```

我想得到

```
{1}
{2}
{1, 2}
{2, 3} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T03:43:57.443

I think the name of the thing you're looking for is 'power set'. It sounded fun, so here's a crack at it. I relied on [this very concise article](http://yubinkim.com/?p=87) for the algorithm. I'm not sure if this is efficient (...actually, I'm sure this is inefficient) over large sets.

```
// answer the powerset of array: an array of all possible subarrays of the passed array
- (NSArray *)powerSet:(NSArray *)array {

    NSInteger length = array.count;
    if (length == 0) return [NSArray arrayWithObject:[NSArray array]];

    // get an object from the array and the array without that object
    id lastObject = [array lastObject];
    NSArray *arrayLessOne = [array subarrayWithRange:NSMakeRange(0,length-1)];

    // compute the powerset of the array without that object
    // recursion makes me happy
    NSArray *powerSetLessOne = [self powerSet:arrayLessOne];

    // powerset is the union of the powerSetLessOne and powerSetLessOne where
    // each element is unioned with the removed element
    NSMutableArray *powerset = [NSMutableArray arrayWithArray:powerSetLessOne];

    // add the removed object to every element of the recursive power set
    for (NSArray *lessOneElement in powerSetLessOne) {
        [powerset addObject:[lessOneElement arrayByAddingObject:lastObject]];
    }
    return [NSArray arrayWithArray:powerset];
} 
```

If you think this is a keeper, you could make it a category method on array and drop the parameter. Test it like this...

```
NSLog(@"empty = %@", [self powerSet:[NSArray array]]);
NSLog(@"one item = %@", [self powerSet:[NSArray arrayWithObject:@"a"]]);
NSLog(@"two items = %@", [self powerSet:[NSArray arrayWithObjects:@"a", @"b", nil]]);
NSLog(@"three items = %@", [self powerSet:[NSArray arrayWithObjects:@"a", @"b", @"c", nil]]); 
```

I did only these tests, and the output looked good. Spoiler alert: the three item test looks roughly like this on my console (with \n's removed):

> three items = ((), (a), (b), (a,b), (c), (a,c), (b,c), (a,b,c))

# jquery - jQuery幻灯片：Chrome中渐变背景对象的圆角阴影

> ID：13637666
> 
> 赞同：1
> 
> 时间：2012-11-30T01:22:24.077
> 
> 标签：jquery, google-chrome, slidedown, css

我正在使用 jQuery`slideUp()`和`slideDown()`一个具有`-webkit-gradient`背景、圆角和`box-shadow`.

出于某种原因，这种精确的组合在 Chrome 中效果不佳。

我的规范说让两个底角是方形的（边界半径 0），因为它将与下面的东西对齐，但顶部的两个角是圆形的（边界半径大）。

[http://jsfiddle.net/jdY3W/6/](http://jsfiddle.net/jdY3W/6/)

问题是在`slideUp()`和`slideDown()`动画期间——仅在这些过渡期间，而不是在它们完成时——阴影在 Chrome 中显示为正方形。

图片：http: [//i.stack.imgur.com/xGn12.png](http://i.stack.imgur.com/xGn12.png)

我意识到了几件事：

1.  边界半径值的大多数组合都可以，但我需要的值不是。以下是我测试过的一些可以的示例：

    ```
    border-radius: 10px 20px 20px 20px;
    border-radius: 20px 20px 30px 0;
    border-radius: 20px 20px 20px 20px;
    border-radius: 20px 20px 19px 19px; 
    ```

    还有一些不是：

    ```
    border-radius: 10px 20px 20px 25px;
    border-radius: 20px 20px 0 0; /* what I need */
    border-radius: 20px 20px 30px 30px; 
    ```

2.  在 Safari 和 FF 中似乎一切正常。

有人有什么想法吗？

# macos - OSX EdsOpenSession exc_bad_access 上的佳能 EDSDK 2.11

> ID：13637670
> 
> 赞同：1
> 
> 时间：2012-11-30T01:22:45.063
> 
> 标签：macos, sdk, exc-bad-access, openframeworks, edsdk

我正在尝试在带有 EOS Xsi 的 OSX 上使用 Canon EDSDK 2.11。我尝试运行示例代码，编写了自己的代码，我什至下载了佳能 EDSK 的 openFrameworks 和附加组件 ofxCanon，并运行了它的示例代码。每次任何代码到达对 EdsOpenSession 的调用时，我都会收到`exc_bad_access`错误消息。

谁能告诉我可能发生了什么以及我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:51:39.657

我有同样的问题。从佳能网站下载的 SDK 似乎存在一些问题。您可以在这里尝试，它为我解决了问题。

安装和更新 EOSUtility（确保它工作正常）

转到/应用程序/佳能实用程序/

显示 EOS Utility 的包内容。

在 frameworks 目录中，您将拥有 EDSDK.framework

将其复制到您从佳能网站获得的那个上。

希望它会有所帮助。

# ruby-on-rails - 获取 activesupport 3.2.0 错误 - 无法加载此类文件 -- spec_helper

> ID：13637671
> 
> 赞同：1
> 
> 时间：2012-11-30T01:22:49.400
> 
> 标签：ruby-on-rails, bundler

```
 /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- spec_helper (LoadError)
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `block in require'
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `require'
        from /Users/jeffreyerickatz/Desktop/sites/demo_app/spec/factories/user.rb:1:in `<top (required)>'
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:245:in `load'
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:245:in `block in load'
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:245:in `load'
        from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:20:in `block (2 levels) in find_definitions'
rom /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:19:in `each'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:19:in `block in find_definitions'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `each'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl-4.1.0/lib/factory_girl/find_definitions.rb:15:in `find_definitions'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/factory_girl_rails-4.1.0/lib/factory_girl_rails/railtie.rb:26:in `block in <class:Railtie>'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/lazy_load_hooks.rb:34:in `call'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.0/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/application/finisher.rb:60:in `block in <module:Finisher>'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `run'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `each'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/application.rb:136:in `initialize!'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/jeffreyerickatz/Desktop/sites/demo_app/config/environment.rb:5:in `<top (required)>'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/application.rb:103:in `require'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/application.rb:103:in `require_environment!'
    from /Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.0/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

当我尝试运行我的 rails 控制台或真正做任何事情时，我得到了那个错误（上图）。我假设我的一些宝石彼此不兼容？我正在从 rails 3.1 更新到 rails 3.2。

我最近做了一个捆绑更新。这一切都更新为：

```
Jeffreys-MacBook-Pro:demo_app jeffreyerickatz$ bundle update
Fetching gem metadata from http://rubygems.org/.......
Fetching gem metadata from http://rubygems.org/..
Using rake (10.0.2) 
Using i18n (0.6.1) 
Using multi_json (1.3.7) 
Installing activesupport (3.2.0) 
Using builder (3.0.4) 
Installing activemodel (3.2.0) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Installing actionpack (3.2.0) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Installing actionmailer (3.2.0) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Installing activerecord (3.2.0) 
Installing activeresource (3.2.0) 
Using annotate (2.5.0) 
Using ansi (1.4.3) 
Using xml-simple (1.1.2) 
Using aws-s3 (0.6.3) 
Using multi_xml (0.5.1) 
Using httparty (0.9.0) 
Using json (1.7.5) 
Using nokogiri (1.5.5) 
Using uuidtools (2.1.3) 
Using aws-sdk (1.3.9) 
Using bootstrap-sass (2.0.0) 
Using will_paginate (3.0.3) 
Using bootstrap-will_paginate (0.0.5) 
Using bundler (1.1.5) 
Using hsume2-state_machine (1.0.5) 
Using call_center (0.1.7) 
Using carmen (0.2.13) 
Using clockwork (0.4.1) 
Using cocaine (0.4.2) 
Using coderay (1.0.8) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Installing railties (3.2.0) 
Using coffee-rails (3.2.2) 
Using diff-lcs (1.1.3) 
Using factory_girl (4.1.0) 
Using factory_girl_rails (4.1.0) 
Using faker (1.1.2) 
Using fakeweb (1.3.0) 
Using foreman (0.60.2) 
Using googlecharts (1.6.8) 
Using listen (0.6.0) 
Using lumberjack (1.0.2) 
Using method_source (0.8.1) 
Using slop (3.3.3) 
Using pry (0.9.10) 
Using guard (1.5.4) 
Using guard-rspec (1.2.1) 
Installing jquery-rails (2.1.4) 
Using jwt (0.1.5) 
Installing nested_form (0.3.1) 
Using paperclip (3.3.1) 
Using pg (0.14.1) 
Using pry-nav (0.2.2) 
Using pry-rails (0.2.2) 
Installing rails (3.2.0) 
Using rest-client (1.6.7) 
Using rspec-core (2.7.1) 
Using rspec-expectations (2.7.0) 
Using rspec-mocks (2.7.0) 
Using rspec (2.7.0) 
Using rspec-rails (2.7.0) 
Using ruby-graphviz (1.0.8) 
Installing sass (3.2.3) 
Using sass-rails (3.2.5) 
Using simple_form (2.0.4) 
Using spork (0.9.2) 
Using sqlite3 (1.3.6) 
Installing timecop (0.5.4) 
Using turn (0.9.6) 
Using twilio-ruby (3.9.0) 
Using uglifier (1.3.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:16:46.760

通过回溯，看起来第 1 行`/Users/jeffreyerickatz/Desktop/sites/demo_app/spec/factories/user.rb`正在尝试加载 spec_helper.rb - 您可以安全地删除此行，只有规范应该需要 spec_helper。

# java - Java 使用流作为一种“缓冲区”

> ID：13637673
> 
> 赞同：0
> 
> 时间：2012-11-30T01:22:51.890
> 
> 标签：java, stream

我正在使用一个必须提供 InputStream 和 PrintStream 的库。它使用 InputStream 收集数据进行处理，并使用 PrintStream 提供结果。我被困在使用这个库并且它的 API 不能被改变。

我认为有两个问题有相关的解决方案。

首先，需要通过 InputStream 读取的数据是不可用的。相反，数据是由应用程序的不同部分动态创建的，并通过方法调用作为字符串提供给我的代码。我的代码的工作是以某种方式允许库通过我得到它时提供的 InputStream 读取这些数据。

其次，我需要以某种方式获取写入 PrintStream 的结果并将其作为字符串发送到应用程序的另一部分。这需要在将数据尽可能放入 PrintStream 后立即发生。

看起来我需要的是两个流对象，它们的行为或多或少像缓冲区。我需要一个 InputStream ，只要我有它就可以将数据推入其中，还需要一个 PrintStream ，只要它有一些，我就可以抓住它的内容。这对我来说似乎有点尴尬，但我不知道该怎么做。

我想知道是否已经存在任何允许这种行为的东西，或者是否有不同的（更好的）解决方案可以在我描述的情况下工作。我唯一能想到的就是尝试用这种行为实现流，但这会很快变得复杂（特别是因为 InputStream 需要阻塞直到数据可用）。

有任何想法吗？

**编辑**：要清楚，我不是在写图书馆。我正在编写代码，该代码应该为库提供一个 InputStream 来读取数据和一个 PrintStream 来写入数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:55:53.977

看起来两个流都需要不断地读/写，所以你需要两个相互独立的线程。该模式有点类似于 JMS，在这种情况下，您将信息提供给“队列”或“主题”，并等待它被处理然后放入“输出”队列/主题。这可能会引入额外的移动部件，但您可以编写一个简单的客户端来将信息放置到 JMS 队列中，然后让一个侦听器来抓取消息，并将其不断地提供给输入流。然后从输出流中读取另一段代码，并用它做你需要的事情。希望这可以帮助。

# shell - 像emacs一样在vim中打开shell的方式？

> ID：13637688
> 
> 赞同：1
> 
> 时间：2012-11-30T01:24:59.007
> 
> 标签：shell, vim, emacs

我想知道总是喜欢在 Emacs 中打开 Bash 实例的能力。除了使用 :!command 运行命令的能力之外，vim 还有这个功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:48:17.030

Conque 和 Vimshell*非常*有限，`:shell`如果你在终端中使用 Vim，你最好使用它是非常可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T03:08:50.393

# 征服

[https://code.google.com/p/conque/](https://code.google.com/p/conque/)

征服是终端仿真。

# vimshell

[https://github.com/Shougo/vimshell](https://github.com/Shougo/vimshell)

vimshell 是 vim 中的 shell 工具。

# python - Matplotlib：在对数图中禁用十的幂

> ID：13637689
> 
> 赞同：5
> 
> 时间：2012-11-30T01:25:06.927
> 
> 标签：python, matplotlib

有没有一种简单的方法可以让 matplotlib 在对数图中不显示十的幂，而只显示数字？即，而不是`[10^1, 10^2, 10^3]`显示`[10, 100, 1000]`？我不想改变刻度线的位置，只想摆脱十的幂。

这是我目前拥有的： ![在此处输入图像描述](../Images/5fe803bd0b597b11e87654b231c52557.png)

我可以通过 自己更改标签`xticks`，但是我会得到 y 刻度标签的不匹配字体或大小。我正在使用 TeX 来编写此文本。我尝试了以下方法：

```
xx, locs = xticks()
ll = [r'\rm{%s}' % str(a) for a in xx]
xticks(xx, ll) 
```

这给出了以下结果： ![在此处输入图像描述](../Images/a860d6f0743d6d4eb04af3591a1d4c8f.png)

在这种特殊情况下，我可以使用相同的 LaTeX 罗马字体，但大小和外观与 y 轴上的不同。另外，如果我在 matplotlib 中使用不同的 LaTeX 字体，这将是有问题的。

有没有更灵活的方法来关闭十符号的力量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T05:58:08.047

使用[`ScalarFormatter`](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.ScalarFormatter)：

```
from matplotlib import rc
rc('text', usetex=True)
rc('font', size=20)

import matplotlib.pyplot as plt
from matplotlib.ticker import ScalarFormatter

fig = plt.figure(figsize=(10, 6))
ax = fig.add_subplot(111)
ax.semilogx(range(100))
ax.xaxis.set_major_formatter(ScalarFormatter())
plt.show() 
```

![在此处输入图像描述](../Images/7b17bfa418a355b3596e84d2e6e0a908.png)

# solr - solr exact match and indicator?

> ID：13637696
> 
> 赞同：0
> 
> 时间：2012-11-30T01:26:02.210
> 
> 标签：solr, lucene, match, exact-match

My documents have 5 fields, how can I config solr so that: 1)exact matches are on the top 2)indicator that there is exact match on the document additionally, is it possible to know which field the exact match happens?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:12:46.097

如果您想提升文档的精确度高于分析的文档 -

*   创建一个没有任何分析的字段（可能只是小写和其他）以保持原始值
*   创建应用了所有分析的其他字段（小写、ascii、同义词、词干分析器......）
*   为精确匹配字段添加提升。
*   如果匹配是精确的，则分析的字段也会有一个匹配，以防万一将精确匹配的文档提升得更高。

对于指示器，您可能必须启用突出显示并检查它返回的突出显示是否与确切的字段匹配。

# jquery - 在我删除值并输入新值后，jQuery 数学会导致随机结果

> ID：13637700
> 
> 赞同：1
> 
> 时间：2012-11-30T01:26:52.310
> 
> 标签：jquery, math

我有下面的代码。它开始工作，但是当我更改值时，它似乎将以前的值保留在内存中并且不做我想要的乘法。你能提出什么建议吗？

```
var output = $('#SquareMetres');
$('#input[type="text"]').keyup(function() {
    var width = $('#width').val();
    var height = parseFloat($(this).val());
    output.text(height*width);
}); 
```

小提琴：http: [//jsfiddle.net/nRAhE/](http://jsfiddle.net/nRAhE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:38:25.297

像这样试试

```
$('input[type="text"]').keyup(function() {
    var width = parseFloat( $('#width').val() ),
        height = parseFloat( $('#height').val() ),
        result = height * width;

    if ( ! isNaN( result ) ) {
        output.text( result );
    }
});​ 
```

[**演示**](http://jsfiddle.net/nRAhE/4/)

# magento - Magento hardcodes VARCHAR attributes to 255 length, any reason to not change this?

> ID：13637704
> 
> 赞同：2
> 
> 时间：2012-11-30T01:28:45.520
> 
> 标签：magento, attributes, varchar

I have a requirement to save an Order Item attribute as a string up to 400 char. While it could be implemented using a text attribute, I would rather use a varchar(400). However, the `_addFlatAttribute()` method in `Mage_Sales_Model_Resource_Setup` hardcodes the length of varchar to 255\. It could be changed after the fact by a setup script with DDL, but I'm wondering if there are likely to be downstream dependencies on VARCHAR being 255 char.

Any thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:54:42.587

鉴于实例中订单实体数据的规模不断扩大，我相信您会很好并且建议您这样做。我很好奇 Magento 的版本，因为 CE1.6+ 是第一个具有[`Mage_Sales_Model_Resource_Setup`[link]](https://github.com/benmarks/magento-mirror/blob/1.6.0.0/app/code/core/Mage/Sales/Model/Resource/Setup.php)类的版本。在 CE1.6 之前，该课程是[`Mage_Sales_Model_Mysql4_Setup`[link]](https://github.com/benmarks/magento-mirror/blob/1.5.1.0/app/code/core/Mage/Sales/Model/Mysql4/Setup.php)。这是一个重要的区别，因为这些类中的列定义方法不同，以适应 1.6+ 中与 DB 无关的方法

[`Mage_Sales_Model_Mysql4_Setup::_getAttributeColumnDefinition`[链接]](https://github.com/benmarks/magento-mirror/blob/1.5.1.0/app/code/core/Mage/Sales/Model/Mysql4/Setup.php#L153)：

```
protected function _getAttributeColumnDefinition($code, $data)
{
    $columnDefinition = '';
    $type   = isset($data['type']) ? $data['type'] : 'varchar';
    $req    = isset($data['required']) ? $data['required'] : false;

    switch ($type) {
        case 'int':
            $columnDefinition = 'int(10) unsigned';
            break;
        case 'decimal':
            $columnDefinition = 'decimal(12,4)';
            break;
        case 'text':
            $columnDefinition = 'text';
            break;
        case 'date':
            $columnDefinition = 'datetime';
            break;
        default:
            $columnDefinition = 'varchar(255)';
            break;
    }

    if ($req) {
        $columnDefinition.= ' NOT NULL';
    }
    return $columnDefinition;
} 
```

和[`Mage_Sales_Model_Resource_Setup::_getAttributeColumnDefinition`[链接]](https://github.com/benmarks/magento-mirror/blob/1.6.0.0/app/code/core/Mage/Sales/Model/Resource/Setup.php#L180)：

```
protected function _getAttributeColumnDefinition($code, $data)
{
    // Convert attribute type to column info
    $data['type'] = isset($data['type']) ? $data['type'] : 'varchar';
    $type = null;
    $length = null;
    switch ($data['type']) {
        case 'timestamp':
            $type = Varien_Db_Ddl_Table::TYPE_TIMESTAMP;
            break;
        case 'datetime':
            $type = Varien_Db_Ddl_Table::TYPE_DATETIME;
            break;
        case 'decimal':
            $type = Varien_Db_Ddl_Table::TYPE_DECIMAL;
            $length = '12,4';
            break;
        case 'int':
            $type = Varien_Db_Ddl_Table::TYPE_INTEGER;
            break;
        case 'text':
            $type = Varien_Db_Ddl_Table::TYPE_TEXT;
            $length = 65536;
            break;
        case 'char':
        case 'varchar':
            $type = Varien_Db_Ddl_Table::TYPE_TEXT;
            $length = 255;
            break;
    }
    if ($type !== null) {
        $data['type'] = $type;
        $data['length'] = $length;
    }

    $data['nullable'] = isset($data['required']) ? !$data['required'] : true;
    $data['comment']  = isset($data['comment']) ? $data['comment'] : ucwords(str_replace('_', ' ', $code));
    return $data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:19:02.097

使用类型 TEXT 而不是 VARCHAR。 `Mage_Sales_Model_Resource_Setup`在这种情况下假定长度为 64KB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T01:33:33.567

I can't imagine so, it might be different if you were to decrease the size of varchar, though.

See also: [Is there a good reason I see VARCHAR(255) used so often (as opposed to another length)?](https://stackoverflow.com/questions/1217466/is-there-a-good-reason-i-see-varchar255-used-so-often-as-opposed-to-another-l)

# java - Can you store multiple integers at one array index?

> ID：13637706
> 
> 赞同：0
> 
> 时间：2012-11-30T01:29:20.273
> 
> 标签：java, arrays, sorting, radix

I'm trying to do a radix sort and some algorithms I've seen have a buckets[ ] array that's supposed to hold multiple integers into one index of the bucket array, here is the algorithm I'm referring to:

![here is the algorithm I'm referring to](../Images/982eb42916e769e2d91e95e699026283.png)

Is it really possible to have multiple integers in one index? And how so?
Or is there a simpler radix sort algorithm out there?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:33:12.577

Yes, it is possible to add multiple `int` to an array, but you would need to have an array where each item is an `Object` rather than an `int`.

For example...

```
// the items to store in the array, which contain 3 ints
public class Bucket {
    int number1 = -1;
    int number2 = -1;
    int number3 = -1;

    public void addInt(int number){
        if (number1 == -1){
            number1 = number;
        }
        else if (number2 == -1){
            number2 = number;
        }
        else if (number3 == -1){
            number3 = number;
        }
    }
}

// the array, as used in other classes
Bucket[] bArray = new Bucket[6]; // 6 items in the array, where each item is a Bucket that contains 3 ints

// assigning ints into the array
bArray[2].addInt(56); // add the int '56' to the bucket at index '2' of the array

// You could also use other Array-like structures
ArrayList<Bucket> bList = new ArrayList<Bucket>(); 
```

Of course, if you don't always have <=3 items in a bucket, you could just change the Bucket class to use an array or a `List` as its variable rather than separate `int`s.

You could also use multi-dimensional arrays...

```
// creating the buckets
int[][] buckets = new int[6][3];

// assigning ints into the array
bArray[2][0] = 56; // add the int '56' to the bucket at index '2' of the array, position '0' 
```

It would get a little messy, however, if you start playing around with different-sized buckets, and you'd need to do more error-checking to ensure that...

1.  The items in the bucket aren't empty when you try to access them
2.  When you're adding a number to a bucket, you need to detect the next position in the second dimension that is empty, so you don't overwrite the `int`s that are already in there.

If is for these reasons why I would recommend using an Object-based array over a multi-dimensional array.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:34:23.433

Two cases create buckets

*   the numbers aren't unique
*   radix sort sorts on each digit position (ones, tens, hundreds in the decimal case) before going on to the next one - so 003 and 019 if sorting on the first digit will match.

The first case is really just a degenerate case of the second.

Note that there are a couple of radix sort variants depending on which order you sort the digits in.

Too answer the data structure part of the question - no you can't and wouldn't store multiple values at each index. Instead, each bucket is typically represented as a sub-sequence of the array. Each bucket is then represented by the offset of its start (the end can be implicit).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:07:44.503

哇，数组和列表不是实现基数排序的方法。是的，列表可以工作，但它会减慢速度，当我这样做时，它比合并排序慢。最好的方法是实现一个频率数组作为每个字节计数排序的一部分。我在[这里](https://stackoverflow.com/questions/13921655/java-threaded-radix-sort)发布了我的代码，仅参考并行排序。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T01:43:52.133

a`bucket`本身就是一个`int[]`（或`List`任何可以存储多个项目的东西）。

您不能将更多的一件事放入 1 个索引中。

```
int[] array = new array[6];
int value = array[5]; 
```

如果有多个 int 将不再工作。

最简单的可能是使用`int[][]`数组。现在左框中的每个索引都指向整个数组。这些数组也可以是不同的长度：

[Java 锯齿状数组](https://stackoverflow.com/questions/10271540/java-jagged-array)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T02:06:19.233

除了可以将存储桶表示为列表或数组之外，还可以使用数组切片。在这种情况下，目标数组与输入数组的总大小相同。例如，存储桶 0 中有 2 个元素，存储桶 1 中有 2 个元素，存储桶 2 中有 3 个元素，存储桶 3 中有 1 个元素，存储桶 5 中有 2 个元素。

```
Bucket 0 : d[0], d[1]
Bucket 1 : d[2], d[3]
Bucket 2 : d[4], d[5], d[6]
Bucket 3 : d[7]
Bucket 5 : d[8], d[9] 
```

这样做，排序必须跟踪每个桶的下一个索引。

# ember.js - 访问在 {{#each}} 迭代器中创建的子视图的属性

> ID：13637708
> 
> 赞同：2
> 
> 时间：2012-11-30T01:29:31.823
> 
> 标签：ember.js

**编辑：**问题在于我自己的本地设置以及我在应用程序中包含视图的方式。一旦我解决了这些问题，问题就解决了。这里的代码实际上是正确的。Chrixian提供的答案也有效。

我被困在看起来相当简单的事情上。我想访问在车把的每个循环内构建的视图的一些计算属性。

```
<div class='build-buttons-wrapper'>
  <button class="list-builds-button" {{action "toggleBuildsList" target="view"}} ></button>
  <button class="build-button" {{action "buildApp" on="click" target="view"}} >Build</button>
</div>
<div class='builds-list'>
  <h2 class="build-title">Latest builds</h2>
  <ul class="builds-list">
  {{#each content}}
    {{#view Jimux.BuildView buildBinding="this"}}
      <span class="build-date">{{createdAt}}</span>
      <a {{bindAttr href="srcArchive"}} class="download-button source">Source</a>

      {{! *here are different ways I have tried to access "finished" property* }}
      {{log build.view.finished}}
      {{log view.finished}}
      {{log finished}}
      {{log this.finished}}
      {{log build.finished}}

      {{#if build.finished}}
        <div class="build-progressbar"></div>
      {{else}}
        <div class="build-progressbar"><div class="build-percent" style="width:{{unbound percent}}%"></div></div>
      {{/if}}
    {{/view}}
  {{/each}}
  </ul>
</div> 
```

这`BuildsView`是使用此模板的内容：

```
 Jimux.BuildsView = Em.View.extend({
  templateName: 'builds'
  listVisible: false
  classNames: ['builds-view']
  buildApp: (view, event, ctx) ->
    @get('controller').newBuild()
  ,
  hideList: ->
    @set 'listVisible', false
    this.$(".builds-list").hide("slide", {direction: "up"}, 300)
  ,
  showList: ->
    @set 'listVisible', true
    this.$(".builds-list").show("slide", {direction: "up"}, 300)
  ,
  toggleBuildsList: (view, event, ctx) ->
    if @get 'listVisible' then @hideList() else @showList()
  ,
  didInsertElement: ->
    @hideList() if not @get 'listVisible'

}) 
```

这是在上面模板`BuildView`的迭代器中创建的。`{{#each}}`

```
Jimux.BuildView = Ember.View.extend(
  tagName: 'div',
  classNames: ['build-item'],
  #testBinding: true,
  sample: true,
  finished: ( ->
    return true
    #return (@get 'percent') == 100
  ).property('percent')
) 
```

上面的一切都按预期工作。例如，我可以使用 {{percent}} 访问每个子视图的百分比属性。但是，如果我在如上所示的内部定义自己的属性`Jimux.BuildView`，我似乎无法找到在车把`{{#each}}`迭代器中访问它们的方法。您可以看到我在带有`{{log}}`语句的把手代码中尝试的不同方式，所有这些都`undefined`在控制台中打印。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T06:36:03.310

我假设`percent`您所指的属性是您正在循环的每个“内容”对象的属性 - 如果是这种情况，则完成看起来像这样：

```
finished: (->
    return @get('context.percent') is 100
).property('context.percent') 
```

您应该能够简单地`{{finished}}`在`{{#view Jimux.BuildView}} .. {{/view}}`块内使用

# asp.net - Windows 身份验证 - 防止弹出？

> ID：13637713
> 
> 赞同：0
> 
> 时间：2012-11-30T01:30:03.237
> 
> 标签：asp.net, windows, forms, authentication, iis

我正在尝试在 sharepoint 中实现一个 web-view web 部件，它将加载一个我在本地 IIS 上托管的小型“widget”类型的东西。我希望只向特定用户展示此 Web 部件，但不能使用 Sharepoint 的“目标受众”功能，因为我们只使用 Foundation 并且该功能不存在。

我目前正在尝试在页面上使用 Windows 身份验证，并且它对于允许的用户无缝地工作正常 - 但是，我希望有一种方法，如果用户被拒绝，他们不会收到要求提供凭据的弹出窗口，它只会将它们重定向到空白页面，因此 Web 部件对它们“不显示”。

这是否可以使用 Windows 身份验证，或者我是否需要对 Active Directory 使用表单身份验证并让他们使用表单登录？表单身份验证是否可以配置为无缝使用 AD 组并且仅在“拒绝”时显示登录页面？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:39:36.673

在尝试了大约一百万种不同的解决方案之后，这些解决方案基本上都导致了问题......用于认证..

我想出了一个快速而肮脏的解决方案，因为这个项目很小，不值得投入更多。

我在 page_load 事件中进行了一个非常简单的检查，如果它不是回发（第一次加载），则检查用户名，如果找不到静态用户列表，则重定向。远非完美，但它会做。

```
if (!Page.IsPostBack)
        {
            var user = Request.LogonUserIdentity.Name.ToLower().ToString();
            if (user != "domain\\user")
            {
                Response.Redirect("/path/to/redirect/to.html");

            }
        } 
```

# apache - 通过 apache 服务器内的服务器端过滤动态包含 piwik 代码

> ID：13637714
> 
> 赞同：5
> 
> 时间：2012-11-30T01:30:11.270
> 
> 标签：apache, filter, substitution, matomo, inclusion

经过几个小时徒劳无功的尝试后，我想通过简单的设置向大家寻求一些帮助：

对于我使用 apache2 http 服务器运行的一堆 Web 应用程序和站点，我使用[Piwik](http://piwik.org/)进行简单的统计概览。这很好用。让我烦恼的是，对于每一个额外的应用程序/页面和每次更新/升级，我都必须注意手动维护 piwik 所需的 javascript 代码以包含在 html 标记中。

为了简化维护，我希望 apache 添加该代码：我想使用一些 apache 模块：mod_filter、mod_env、mod_substitute 和 mod_include。这个想法是通过过滤器将所有交付的 html 文件与 piwik 代码一起注入。该过滤器使用替换在`</body>`标记前添加占位符。该占位符再次是由服务器端包含处理的 sgml 标记。该包含最终将占位符替换为 piwik 代码，该代码以动态方式给出所需的数字站点 ID。

因此，在配置新虚拟主机时剩下的就是在 apache 配置中指定两行：

1.  包括存储在一个小文件中的过滤器设置
2.  通过设置环境变量指定数字 piwik 站点 ID

不再需要在应用程序中摆弄模板文件！

* * *

我非常接近解决方案，缺少一步...

也许你们中的一些大师发现了我所缺少的！

* * *

虚拟主机的（非常简单的）配置：

```
<VirtualHost *:80>
ServerAdmin www@domain.here
ServerName some.domain.here

# include local piwik setup
SetEnv PIWIK_ID 5
Include /etc/apache2/vhosts.d/_internal.inc

DocumentRoot /some/path/here
<Directory  "/some/path/here">
    Options None
    AllowOverride none
    Order allow,deny  
    Allow from all    
</Directory>

</VirtualHost> 
```

上面包含的（缩短的）配置文件：

```
# some internal resources 
<Directory "/srv/www/internal">
    Options None
    AllowOverride None
    Order deny,allow
    Allow from all 
</Directory>

# ----------
# internal requests to include the piwik tracking code at the bottom of every html page

# prepare required filters 
FilterDeclare  filter_PIWIK 
FilterProvider filter_PIWIK SUBSTITUTE resp=Content-Type $text/html 
FilterProvider filter_PIWIK INCLUDES   resp=Content-Type $text/html 
FilterChain    filter_PIWIK SUBSTITUTE 's|</body>|<!--#include virtual="/piwik" --></body>|ni'

# map virtual request to the file system 
Alias /piwik /srv/www/internal/piwik.php 
```

* * *

`/srv/www/internal/piwik.php`上面引用的最后一个文件`Alias`：这是提供 piwik 代码的文件。它就像那些由 piwik 自己计算的，除了一件事：数字站点索引被动态替换为环境变量中的值

```
<?php 
define('piwikBase','domain.here/stats/');
define('piwikSite',apache_getenv('PIWIK_ID'));
if(is_numeric(piwikSite)){ 
?>
<!-- Piwik: begin tracking code -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://<?php echo piwikBase; ?>" : "http://<?php echo piwikBase; ?>");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", <?php echo piwikSite; ?>);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://<?php echo piwikBase; ?>piwik.php?idsite=<?php echo piwikSite; ?>" style="border:0" alt="" /></p></noscript>
<!-- Piwik: end tracking code -->
<?php } else { ?>
<!-- invalid piwik site id: <?php echo piwikSite;?> -->
<?php } ?> 
```

到目前为止我的工作：

*   基于 php 的动态 piwik scniplet 正在工作，我可以使用浏览器调用它，并查看 html 标记源中的代码，其中包含从配置中定义的环境变量中获取的数字 id，用于测试目的。此外，当我以这种方式指定一个 nin 数字 id 时，我得到了预期的占位符`<!-- invalid piwik site id: ... -->`
*   过滤器通常有效（已应用）：`</body>`标签*被*占位符替换。我可以通过注释掉在开头添加 INCLUDES 指令的 FilterProvider 来检查这一点。在这种情况下，我会在生成的 html 标记中看到占位符。
*   那个FilterProvider实际上是被apache识别和执行的：在我出现`Options +Includes`配置缺失之类的错误之前，被整理出来，apache不再抱怨了。当上面提到的 FilterProvider*没有*被注释掉时，占位符也会被再次删除。所以我假设包含过程正在工作。
*   Aparently 问题不在于服务器端包含引用 php 脚本。我没有收到任何错误消息，并且使用静态文件进行的测试没有任何区别。

似乎设置工作正常，没有抛出错误，重写日志中没有什么奇怪的。但是，尽管包含过滤器显然有效，但我希望包含的内容是空的。第一个 SUBSTITUTE 步骤插入的占位符再次被第二个 INCLUDE 步骤替换。但不幸的是，由于内容为空，因此将其删除。我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:48:35.167

好的，我自己找到了答案。这是第六次尝试挖掘，最后我成功了。我所要做的就是更改过滤器代码的定义和用法。其他一切都很好：

```
FilterDeclare PIWIK_token
FilterProvider PIWIK_token SUBSTITUTE resp=Content-Type $text/html
SUBSTITUTE 's|</body>|<!--#include virtual="/piwik" --></body>|ni'
FilterDeclare PIWIK_code
FilterProvider PIWIK_code INCLUDES resp=Content-Type $text/html
FilterChain PIWIK_token PIWIK_code 
```

我很惊讶没有人尝试过这样的事情。现在，我可以手动删除所有插入的脚本片段和许多地方，而无需在升级或添加页面或整个站点时再次考虑它们。我只需要使用提到的这两行来指定站点 piwik id。伟大的。

*2013-01-23 更新*：

我已经使用这个解决方案几个星期了，并且没有遇到任何设置问题。所以我做了一个简短的描述。Mabe 这可以帮助某人：

> [**Piwik 跟踪和自动片段包含**](http://blog.christian-reiner.info/2013/01/23/piwik/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T03:45:27.730

似乎是个好主意.. 但是 ajax 加载的数据呢？添加到 xml 或 json 返回值可能不好，使数据无效。

你有没有尝试过

```
<?php include (filewithpiwik); ?> 
```

或者更好的是，如果您可以使用 Wordpress，则有一个[插件](https://wordpress.org/extend/plugins/wp-piwik/)可以自动将其添加到所有页面。

# google-chrome-extension - 没有从网页接收到任何数据到 chrome 扩展的 content.js

> ID：13637715
> 
> 赞同：1
> 
> 时间：2012-11-30T01:30:13.877
> 
> 标签：google-chrome-extension

我正在尝试通过单击按钮发送消息，即使在我的网站上也是如此，该网站是通过 chrome 扩展程序在选项卡中打开的。

但是，我无法从网页中获取任何消息，并且出现端口错误。

我的 content.js：

```
var port = chrome.extension.connect();

port.onMessage.addEventListener("message", function(event) {
    // We only accept messages from ourselves
    if (event.source != window)
      return;

    if (event.data.type && (event.data.type == "FROM_PAGE")) {
      console.log("Content script received: " + event.data.text);
      port.postMessage(event.data.text);
    }
}, false);

chrome.tabs.onMessage.addListener(function(tabId, changeInfo, tab) {
  alert(changeInfo);
}); 
```

Popup.js

```
 $("#linkify").click(function() {
        chrome.tabs.create({
            'url': 'http://localhost:3000/signin'
        }, function(tab) {
            // Tab opened.
            chrome.tabs.executeScript(tab.id, {
                file: "jquery.js"
            }, function() {
                console.log('all injected');
                chrome.tabs.executeScript(tab.id, {
                    file: "content.js"
                }, function() {
                    console.log('all injected');
                    chrome.tabs.sendMessage(tab.id, function() {
                        console.log('all injected');
                    });
                });
            });
        });
        //getlink();
    });
});

function checkUserAuth() {
    console.log(localStorage.getItem("apiKey"));
    if (localStorage.getItem("apiKey") != null) {
        document.getElementById('openBackgroundWindow').style.visibility = 'hidden';
    }
}

var port = chrome.extension.connect({
    name: "Sample Communication"
});
port.postMessage("Hi BackGround");
port.onMessage.addListener(function(msg) {
    console.log("message recieved" + msg);
}); 
```

我的背景.js

```
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");

  }); 
```

从 Web url 发送消息的脚本：

```
document.getElementById("theButton").addEventListener("click", function() {
    console.log("message being sent");
    window.postMessage({ type: "FROM_PAGE", text: "Hello from the webpage!" }, "*");
}, false); 
```

我在哪里出错了，我没有收到任何消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:19:32.273

在对您的脚本进行一些更改后，我让它运行了**:)**

`extension page -- > background`此问题涵盖从, `content page -- > background`,传递的消息`extension page --> content page`

**目标页面的输出**（在我的情况下，它是`http://www.google.co.in/`给你的`http://localhost:3000/signin`）

![在此处输入图像描述](../Images/1766e4f6a31a861e161f1666e0e34f63.png)

***popup.js 的输出***

![在此处输入图像描述](../Images/4283034cca9b163c5f94cad24bc4cacf.png)

***来自 background.js 的输出***

![在此处输入图像描述](../Images/13a9173365542be6acf61f2b18cf9710.png)

我`var port = chrome.extension.connect({name: "Sample Communication"});`在您的 popup.js 中为代码添加了一个连接侦听器，`background.js`它解决了以下问题`Receiving end do not exist`

***背景.js***

```
chrome.extension.onConnect.addListener(function(port) {
    port.onMessage.addListener(function(content) {
        console.log("Connected ..." + content);
    });
});
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
        "from a content script:" + sender.tab.url :
        "from the extension");
}); 
```

在创建新选项卡时消除脚本注入，并在选项卡状态完成后通过查找`tabs.onUpdated`侦听器注入脚本

***popup.js***

```
flag = false;
function customFunction() {
    chrome.tabs.create({
        'url': 'http://www.google.co.in/'
    }, function(tab) {
        flag = true;
        // Tab opened.
    });
}

chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (flag) {
        if (changeInfo.status === 'complete') {
            console.log("Inject is called");
            injectScript(tab);
        }
    }
});

function injectScript(tab) {
    chrome.tabs.executeScript(tab.id, {
        file: "jquery.js",
        "runAt": "document_start"
    }, function() {
        console.log('all injected');
        chrome.tabs.executeScript(tab.id, {
            file: "content.js",
            "runAt": "document_start"
        }, function() {
            console.log('all injected');
            chrome.tabs.sendMessage(tab.id, function() {
                console.log('all injected');
            });
        });
    });
}

window.onload = function() {
    document.getElementById("linkify").onclick = customFunction;
};

var port = chrome.extension.connect({
    name: "Sample Communication"
});
port.postMessage("Hi BackGround");
port.onMessage.addListener(function(msg) {
    console.log("message recieved" + msg);
}); 
```

`window.postMessage()`从网页中删除并注入自定义脚本以在单击按钮时向 popup.js 发送消息（这里我选择了谷歌徽标）

***内容.js***

```
function bindFunction() {
    console.log("message being sent");
    chrome.extension.sendMessage({ type: "FROM_PAGE", text: "Hello from the webpage!" });
}

window.onload = function() {
    document.getElementById("hplogo").onclick = bindFunction;
}; 
```

`linkify`按钮类似于登录按钮的示例页面

***popup.html***

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
<button id="linkify">Linkify</button>
</body>
</html> 
```

确保所有代码都具有完整文件`manifest.json`中注入脚本文件、选项卡等的权限`manifest.json`

***清单.json***

```
{
  "name": "Complex Calls",
  "description": "Complex Calls Demo",
  "manifest_version": 2,
  "background": {
    "scripts": ["background.js"]
  },
  "browser_action": {
    "default_popup": "popup.html",
    "default_icon": "screen.png"
  },
  "permissions": [
    "tabs", "<all_urls>"
  ],
  "version": "1"
} 
```

# joomla - joomla 2.5 module override not working

> ID：13637716
> 
> 赞同：1
> 
> 时间：2012-11-30T01:30:21.957
> 
> 标签：joomla, joomla2.5, joomla-module

I'm working for a government school and I'm trying to override the 'Latest News' module in my template. I've created the following structure in my template folder: template_name\html\mod_articles_latest\default.php

Locally it works well, overrides the module, but when I push it to the live site nothing happens. I don't have permission to see the FTP files, I can only work through the joomla admin area, so I can't do much on the joomla installation files to test anything.

My questions is: is there any way to not allow override module in Joomla 2.5? (because it seems that it is what is happening) or Am I doing something wrong, like the module name I'm using or something?

Thanks in advance!

# objective-c - Cocoapods questions: "How does cocoapods know when a new version of a library is available?" etc

> ID：13637722
> 
> 赞同：13
> 
> 时间：2012-11-30T01:32:12.393
> 
> 标签：objective-c, xcode, cocoapods

I'm having some problem with my installed pods. They are not pulling the most recent (bug-fixed) version of their libraries from Github, and hence my Xcode compiler is full of warnings. I don't understand how Cocoapods works an entirely, and I'm wondering if anyone can clear it up.

1.  How does Cocoapods know when a new version of a library is available?

2.  What is required for Cocoapods to retreive the latest version via the

    ```
    sudo pod install 
    ```

    comand?

3.  How often and for what reason does a podspec need to be updated? Does it need to be updated by the author of the podspec only or by anyone?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T13:31:48.347

Cocoapods 通常链接到特定的存储库标签和版本，因此查看[AQGridView](https://github.com/CocoaPods/Specs/tree/master/AQGridView)我们可以看到两个版本，版本 1.2 专门指提交`commit => 'f6c5589a6dabfff693fc7def7342327b9b0df3f9`，而 1.3 不同。如果您第一次运行`pod install`1.2 是最后一个版本，您将始终获得 1.2 版本，以免破坏向后兼容性。

如果您想更新到版本，您可以运行`pod update`它将检查您现有的 podspec 文件并查找最新版本（在 cocoapods 上！）并使用它们。

如果您想使用 cocoapods 但访问专门针对其中一个的最新版本，则有一个 wiki 页面说明如何在[此处进行操作](https://github.com/CocoaPods/CocoaPods/wiki/Changing-your-local-cocoapods-for-new-versions)

所以有了这个，

1.  当有人更新 Specs 存储库时，您计算机上的 pod 不会立即知道这一点，您可以运行`pod repo update`以确保您是最新的。我希望它经常自动检查。

2.  上面提到的，如果你运行`pod update`它将使用最新的 podspec 版本

3.  Podspec 的更新频率与人们希望他们的库具有版本号一样频繁，理想情况下，每当您发布一个点发布时，您还应该向 repo 提交相应的 podspec，然后每个人都知道他们可以更新。它经常由志愿者更新，但我们确实让作者更新他们自己的库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-29T12:41:03.443

`pod install`不安装最新版本！默认情况下使用最新版本是个坏主意。您应该始终指定确切的版本或使用悲观版本约束 ( `~>`)。

要获得有关新版本的通知，您可以使用[VersionEye](https://www.versioneye.com/objective-c)。您可以直接关注 pod，以便在有可用更新时接收电子邮件通知。除此之外，它还可以直接监控您的 GitHub 存储库并通知您项目中过时的 pod。这是最方便的方式。[你可以在这里](http://versioneye.wordpress.com/2013/11/28/updates-for-cocoapods-support/)阅读更多。

如果您收到新版本的通知，您应该首先检查版本号。如果 pod 项目正在使用[http://semver.org/](http://semver.org/)，您已经可以在版本号上查看是否可以在不破坏构建的情况下进行更新。在最坏的情况下，它是一个主要版本，很可能会破坏您的构建。在这种情况下，您必须检查更改日志和迁移路径。如果您想了解如何正确更新，请查看幻灯片以了解[持续更新](http://www.slideshare.net/robertreiz/continuous-updating)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T05:20:10.387

如果要更新 CocoaPods（最新）版本，可以执行**$sudo gem install cocoapods**

如果你想更新你项目的所有库，你可以直接做**$pod update**，或者更新某人的库你可以做**$pod update [POD_NAMES ...]** <<--- 你可以随时使用这些命令来更新你的项目（如果新库已经发布），除非手动检查每个库。

# html - CSS3 Opacity issue

> ID：13637723
> 
> 赞同：1
> 
> 时间：2012-11-30T01:32:24.843
> 
> 标签：html, css

Here is the project site: [Site Redesign](http://projects.kcmartz.com/SiteRedesign/).

What I'm trying to do is keep the backgrounds for each section to be at the 0.5-0.7 opacity, but the text in all the content at 1.0

I've tried making a class 'text' with opacity 1.0 but that doesnt do anything, and I don't want to lose the opacity currently there.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:40:14.720

我相信你的答案就在这里：[CSS opacity only to background color not the text on it?](https://stackoverflow.com/questions/5135019/css-opacity-only-to-background-color-not-the-text-on-it) .

您想使用`background`属性指定透明背景。

# jquery - Ajax Post Request to TastyPie Doesn't Do Anything

> ID：13637724
> 
> 赞同：1
> 
> 时间：2012-11-30T01:32:37.163
> 
> 标签：jquery, python, ajax, django, tastypie

I am having an issue with the Django TastyPie API and creating a post request in JQuery. The curl request:

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"created":"1983-01-30 09:20","author":"me","body":"meh", "post":"/api/v1/entry/1/"}' http://localhost:8000/api/v1/comment/ 
```

Works totally fine. However, when I try to use the jquery ajax request in the following code. It does absolutely nothing. I have already included XS-Sharing in my settings. I checked in the error console. The JSON for data comes our correctly formatted. It seems to get stuck at OPTIONS with the url provided but I'm not entirely sure. Here's my code:

The api

```
 class EntryResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user')

    class Meta:
        queryset = Entry.objects.all()
        resource_name = 'entry'
        authorization = DjangoAuthorization()
        filtering = {
            'user': ALL_WITH_RELATIONS,
            'pub_date': ['exact', 'lt', 'lte', 'gte', 'gt'],
        }

class CommentResource(ModelResource):
    post = fields.ForeignKey(EntryResource, 'post')

    class Meta:
        queryset = Comment.objects.all()
        resource_name = 'comment'
        authorization = Authorization() 
```

MODEL

```
 class Entry(models.Model):
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField(default=datetime.datetime.now)
    title = models.CharField(max_length=200)
    slug = models.SlugField()
    body = models.TextField()

    def __unicode__(self):
        return self.title

    def save(self, *args, **kwargs):
        # For automatic slug generation.
        if not self.slug:
            self.slug = slugify(self.title)[:50]
        return super(Entry, self).save(*args, **kwargs)

class Comment(models.Model):
    created = models.DateTimeField(auto_now_add=True)
    author = models.CharField(max_length=60)
    body = models.TextField()
    post = models.ForeignKey(Entry)

    def __unicode__(self):
        return unicode("%s: %s" % (self.post, self.body[:60]))

class CommentForm(ModelForm):
    class Meta:
        model = Comment
        exclude = ["post"] 
```

HTML

```
 <form id="add_comment" action="{% url blogsite.views.post post.pk%}" method="POST">{% csrf_token %}
    <div id="cform">
        Name: {{ form.author }}
        <p>{{ form.body|linebreaks }}</p>
        <input type="hidden" id="post" value= "{{post.pk}}">
    </div>
    <div id="submit"><input type="submit" value="Submit"></div>
</form> 
```

AND THE JS FILE

```
$(document).ready(function() {
$('#add_comment').submit(function() {
  var data = JSON.stringify({
    "created": "1993-01-31 09:18",
    "author": $("#id_author").val(),
    "body": $("#id_body").val(),
    "post": "api/v1/entry/"+ $("#post").val() + "/"
  });
  console.log(data);
  console.log("hello");
  $.ajax({
      url: 'http://localhost:8000/api/v1/comment/',
      type: 'POST',
      data: data,
      contentType: 'application/json',
      processData: false,
      success: function(data){
        console.log("success");
      },
      error: function(data){
        console.log("There was an error processing" + data);
      }
  });
    });
}); 
```

Thanks for any help you can give. I'm running out of ideas as to what could be the problem.

# xcode - CALayer 细白线

> ID：13637727
> 
> 赞同：0
> 
> 时间：2012-11-30T01:33:27.793
> 
> 标签：xcode, animation, calayer, caanimation

我正在为 CALayer 设置动画，但由于某种原因，我一直在屏幕上看到这些细白线……这不是我的设备，我可以向你保证，这是我设置 CALayer 的方式：

```
dodgelayer=nil;
dodgelayer= [CALayer layer];
dodgelayer.backgroundColor = [UIColor blueColor].CGColor;

dodgelayer.frame = CGRectMake(190, 80, 50, 50);
dodgelayer.borderColor = [UIColor whiteColor].CGColor;
dodgelayer.borderWidth = 2.0;
dodgelayer.cornerRadius = 50.0; 
```

以及我如何为其设置动画：

```
 CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"position"];

      values = [NSArray arrayWithObjects:[NSValue valueWithCGPoint: CGPointMake(aLayer.frame.origin.x+25,aLayer.frame.origin.y+25)], [NSValue valueWithCGPoint: CGPointMake(point.x,point.y)], nil];
        [anim setValues:values];
        [anim setDuration:0.7];
        anim.removedOnCompletion=NO;
        anim.fillMode = kCAFillModeForwards;
        anim.timingFunction=[CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionEaseInEaseOut];
        sublayer.shouldRasterize=YES;
        [sublayer addAnimation:anim forKey:@"position"]; 
```

老实说，我不知道是什么让这些白线出现，但我可以告诉你它们出现在动画中......我很难过这个任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:31:46.327

我自己也遇到了这个问题。原因是 shouldResterize = YES。在调用这个之前，你应该设置

sublayer.rasterizationScale = [[UIScreen mainScreen] scale];

线条会消失。

# xml - 如何使用 xpath/xquery 从 rss 提要中获取图片 url

> ID：13637729
> 
> 赞同：2
> 
> 时间：2012-11-30T01:33:40.617
> 
> 标签：xml, xpath, rss, xquery

以下是 RSS 提要的示例：

```
<item>
<title>Stem cells being made from blood</title>
<description>A patient's own blood has been used to make personalised stem cells, which doctors hope can be used to treat a range of diseases.</description>
<link>http://www.bbc.co.uk/news/health-20539835#sa-ns_mchannel=rss&ns_source=PublicRSS20-sa</link>
<guid isPermaLink="false">http://www.bbc.co.uk/news/health-20539835</guid>
<pubDate>Fri, 30 Nov 2012 00:45:53 GMT</pubDate>
<media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" width="66" height="49" url="http://news.bbcimg.co.uk/media/images/64469000/jpg/_64469170_c0147104-red_blood_cells%2C_artwork-spl.jpg"/>
<media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" width="144" height="81" url="http://news.bbcimg.co.uk/media/images/64469000/jpg/_64469171_c0147104-red_blood_cells%2C_artwork-spl.jpg"/> 
```

我需要在 media:thumbnail 中获取 .jpg 图片的 url。我如何使用 xpath 或 xquery 来做到这一点？任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T01:54:34.890

假设您的 XML 是：

```
<item>
  <title>Stem cells being made from blood</title>
  <description>A patient's own blood has been used to make personalised stem cells, which doctors hope can be used to treat a range of diseases.</description>
  <link>http://www.bbc.co.uk/news/health-20539835#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>
  <guid isPermaLink="false">http://www.bbc.co.uk/news/health-20539835</guid>
  <pubDate>Fri, 30 Nov 2012 00:45:53 GMT</pubDate>
  <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" width="66" height="49" url="http://news.bbcimg.co.uk/media/images/64469000/jpg/_64469170_c0147104-red_blood_cells%2C_artwork-spl.jpg"/>
  <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" width="144" height="81" url="http://news.bbcimg.co.uk/media/images/64469000/jpg/_64469171_c0147104-red_blood_cells%2C_artwork-spl.jpg"/>
</item> 
```

XPath`//item/media:thumbnail/@url`选择您想要的那些节点。在这种情况下，您需要在 XPath 引擎中传递名称空间和前缀。
或者，您可以使用此 XPath：

```
//item/*[local-name() = 'thumbnail' 
    and namespace-uri() = 'http://search.yahoo.com/mrss/']/@url 
```

# cakephp - cakephp contain filtering by parent model value

> ID：13637733
> 
> 赞同：0
> 
> 时间：2012-11-30T01:34:12.550
> 
> 标签：cakephp

I have these relations:

Attendance belongs to Employee

Schedule belongs to Employee

This find() works just fine to get all Attendance records in a date range.

```
 $data = $this->Attendance->find('all', array(
        'contain' => array(
            'Employee' => array(
                'Schedule' => array(
                    'conditions' => array('sche_status' => 1),
                    'order' => 'sche_valid DESC',
                    'limit' => 1
            ))
        ),
        'conditions' => $conditions,
        'order' => array('employee_id', 'att_date')
            )
    ); 
```

However, this Schedule condition

```
'conditions' => array('sche_status' => 1), 
```

gets the "current" Schedule. Problem is when Employee has more than one Schedule in the date range. In order to get the relevant Schedule for it's parent Attendance record, I need to also condition on Attendance.att_date

Tried

```
'conditions' => array('sche_status' => 1, 'ho_valid <=' => Attendance.att_date) 
```

and

```
'conditions' => array('sche_status' => 1, 'ho_valid <=' => $this->Attendance.att_date) 
```

How can I reference Attendance.att_date from the contan Schedule conditions? Is that possible? My current datasets are pretty clean and my find() is dry, wouldn't want to make a mess here.

Any help greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:13:57.790

当您使用`contain()`时，它会执行单独的查询。在您的示例中，它实际上会分别执行三个查询，然后由 CakePHP 组合到返回的数据数组中。

因此，您不能使用来自不同模型的字段来针对包含的模型进行条件处理。

您最好的选择是先查询该字段，然后在此查找中使用它的值，或者使用[joins()](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)，这使得所有结果都从单个查询而不是三个单独的查询返回。

旁注-您似乎正在控制器中构建此查询-遵循 MVC 结构，最佳做法是将所有查询保留在您的模型中，而不是您的控制器中-然后只需`find()`从控制器调用模型的方法（具有 ）即可检索结果。

# mongoid - Mongoid embeds_many build nested object twice?

> ID：13637736
> 
> 赞同：0
> 
> 时间：2012-11-30T01:34:20.990
> 
> 标签：mongoid, embedded-resource

My models are:

```
class Node
  include Mongoid::Document
end

class PhysicalServer < Node
  embeds_many :network_interfaces
end

class NetworkInterface
  include Mongoid::Document
  embedded_in :physical_server
end 
```

If I do:

```
server.network_interfaces.build()
server.save! 
```

when I check database, I will see 2 NetworkInterface embedded documents with duplicate ids.

However if I do:

```
server.network_interfaces.create() 
```

it'll work correctly (only 1 embedded document created).

Is it a bug in Mongoid, or there is something wrong with my code? I'm using Ruby1.9.3 + Rails 3.2.9 + Mongoid 3.0.13

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:33:42.703

不太确定“还”是什么问题，但我遇到了同样的问题，我暂时有一个解决方法。

通过在控制器的更新操作中执行强制新查找，我能够摆脱在每次调用更新时创建重复的“$pushAll”。我感觉这与 Mongoid 建立原子操作有关；使用新对象只是删除“构建”操作。

我已经创建了问题的要点（希望能够重新创建失败的场景和解决方法：[https](https://gist.github.com/jsmestad/d0103ba0197df9f4505b) ://gist.github.com/jsmestad/d0103ba0197df9f4505b ）

# node.js - 如何使用 Node.js 嵌套的异步 forEachSeries 循环

> ID：13637742
> 
> 赞同：1
> 
> 时间：2012-11-30T01:35:04.993
> 
> 标签：node.js

*使用coffeescript 编码* [一种解决方案 | 看到这个帖子](https://stackoverflow.com/questions/13690622/node-js-callbacks-async-foreach-nested-loop-with-waterfall-flow)

我有两个循环。我想从数组'a'中获取每个值，然后遍历'b'的所有值处理它们并移动到数组'a'中的下一个值

预期输出：

```
1 a b c
2 a b c
3 a b c 
```

我看到的错误：

```
 [ 1, 2, 3 ]

 [ 'a', 'b', 'c' ]

 1
 2
 3

 TypeError: Cannot read property 'length' of undefined
   at Object.forEachSeries(~/src/node_modules/async/lib/async.js:103:17)

  Async = require('async')

  @a = [1,2,3]
  @b = ['a','b','c']

  console.dir @a
  console.dir @b

  Async.forEachSeries @a, (aa , cbLoop1) ->
    console.log aa
    cbLoop1()
    Async.forEachSeries @b, (bb , cbLoop2) ->
      #here will be some callback that I need to process before moving to next value in
      #b array
      console.log bb
      cbLoop2() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:28:47.450

您的第一个`Async.forEachSeries`电话需要一个回调，这会改变`this`

```
Async.forEachSeries @a, (aa , cbLoop1) ->
  # inside the callback, the value of `this` has changed,
  # so @b is undefined! 
```

使用`=>`语法将 的值保留`this`在回调内部：

```
Async.forEachSeries @a, (aa , cbLoop1) =>
  console.log aa
  cbLoop1()
  Async.forEachSeries @b, (bb , cbLoop2) ->
    # use `=>` again for this callback if you need to access this (@) inside
    # this callback as well 
```

# css - 下拉菜单在悬停时更改背景颜色

> ID：13637745
> 
> 赞同：1
> 
> 时间：2012-11-30T01:35:17.163
> 
> 标签：css

我正在尝试找到一种方法，以便当用户将鼠标悬停在 li 元素上时，它会改变`<li>`占据下拉列表整个宽度而不仅仅是`<a>`区域的背景颜色。这是我到目前为止所尝试的。

标记

```
 <ul class="dropdown">
                        <li><a href="#">Visit the castle</a></li>
                        <li><a href="#">Dancing Building</a></li>
                        <li><a href="#">Nightlife</a></li>
                        <li><a href="#">Museums</a></li>
                    </ul> 
```

CSS

```
.dropdown{display:block; position:absolute; background-color:black; margin-left:65px; height:190px;}
.dropdown li:hover{background-color:#333; padding:0px;}
.dropdown li a{display:block;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:40:24.240

添加显示：块；到您的“.dropdown li”可能是一个解决方案，但这取决于您的具体情况....您在某处有现场演示吗？

# c# - 如何从我的 Windows 商店应用程序连接到 SQL Azure DB 表？

> ID：13637746
> 
> 赞同：4
> 
> 时间：2012-11-30T01:36:07.107
> 
> 标签：c#, ado.net, windows-8, azure-sql-database, windows-store-apps

基于此链接：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee336243.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336243.aspx)

我正在尝试使用此代码连接到 SQL Azure 数据库并插入一行：

```
// The values being assigned to the StringBuilder members are set previously/not shown
    SqlConnectionStringBuilder connStringBuilder = new SqlConnectionStringBuilder();
    connStringBuilder.DataSource = dataSource;
    connStringBuilder.InitialCatalog = databaseName;
    connStringBuilder.Encrypt = true;
    connStringBuilder.TrustServerCertificate = false;
    connStringBuilder.UserID = userName;
    connStringBuilder.Password = password;

    using (SqlConnection conn = new SqlConnection(connStringBuilder.ToString()))
    {
        using (SqlCommand command = conn.CreateCommand())
        {
            conn.Open();
            command.CommandText =
                "INSERT INTO T1 (col1, col2) values (1, 'string 1'), (2, 'string 2'), (3, 'string 3')";
            int rowsAdded = command.ExecuteNonQuery();
        }
        conn.Close();
    } 
```

尝试，即 - `SqlConnectionStringBuilder, SqlConnection`，并且`SqlCommand`无法识别/解决。我是否需要安装一个单独的 ADO.NET 包才能使其工作，或者有什么关系？

**更新**

通过添加`System.Data.dll`到我的项目引用（在我的机器上，来自 `C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5`），我可以让这些类被识别/解析，但仍然会出现编译时错误，即：

> *错误 1 ​​无法解析类型“System.Data.Common.DbConnection”引用的程序集“System，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”中的基类或接口“System.ComponentModel.Component” :\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Data.dll*

和：

> *错误 2 无法解析类型“System.Data.Common.DbCommand”引用的程序集“System，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”中的基类或接口“System.ComponentModel.Component” :\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Data.dll*

## 更新 2

添加 SQL.Data 作为引用允许解决各种类型，但是另一个问题阻止了应用程序的编译，即：

*在模块 mscorlib.dll 中找不到类型 System.SystemException*

从引用中删除 SQL.Data 消除了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:46:21.540

您需要使用（或构建）一个服务接口，您不能直接从 Windows 8 商店应用程序访问 Windows Azure SQL 数据库（nee SQL Azure），即使可以，我也认为您不应该这样做。以下是两个主要原因：

1.  SQL 数据库仅支持 SQL Server 身份验证。这意味着每个客户端设备都将拥有数据库登录方面的王国密钥。如果该登录名被泄露，您将面临严重问题。

2.  对 SQL 数据库的访问通过服务器上的防火墙进行管理，并且只允许来自白名单 IP 地址的流量进入服务器。这几乎意味着您必须对任何 IP 地址 0.0.0.0 到 255.255.255.255 完全打开防火墙，因为您不知道您的客户端将进入的 IP 范围。

查看[Windows Azure 移动服务，](http://www.windowsazure.com/en-us/home/features/mobile-services/)它为 Windows Azure SQL 数据库提供了一个安全的 RESTful CRUD 前端。 [我有一篇](http://blogs.msdn.com/b/jimoneil/archive/2012/09/19/adding-notifications-to-your-windows-8-game.aspx)使用移动服务管理全球排行榜的博客文章，作为示例可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:10:16.620

System.Data 对 Metro 应用程序不可用。如果还想使用 SQL，可以使用 Sqlite，或者将 Azure SQL DB 作为数据服务器。否则，您可以改用 LocalStorage

# objective-c - ipad 上的图像选择器

> ID：13637748
> 
> 赞同：0
> 
> 时间：2012-11-30T01:36:49.880
> 
> 标签：objective-c, xcode, ipad, uiimagepickercontroller

我知道 iPad 上的图像选择器需要是一个弹出框，我一直在尝试，但是当我点击调用弹出框的按钮时它不会工作并崩溃。

```
 -(IBAction)addPhoto:(id)sender{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    popover=[[UIPopoverController alloc]
             initWithContentViewController:imagePicker];
    [popover presentPopoverFromRect:((UIButton *)sender).frame
                             inView:self.view
           permittedArrowDirections:UIPopoverArrowDirectionAny
                           animated:YES];
}

    -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)selectedImage editingInfo:(NSDictionary *)editingInfo {

    // Delete any existing image.
    NSManagedObject *oldImage = imageClass.image;
    if (oldImage != nil) {
        [imageClass.managedObjectContext deleteObject:oldImage];
    }

    // Create an image object for the new image.
    NSManagedObject *myImage = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:imageClass.managedObjectContext];
    imageClass.image = myImage;

    // Set the image for the image managed object.
    [image setValue:selectedImage forKey:@"image"]; 
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:19:34.513

根据您得到的异常，问题在于`sender`for`addPhoto`方法实际上是 a `UIBarButtonItem`，而不是 a `UIButton`。您需要将弹出框的显示方式从使用按钮的框架更改为从栏按钮显示。

```
-(IBAction)addPhoto:(UIBarButtonItem *)sender {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    popover = [[UIPopoverController alloc]
         initWithContentViewController:imagePicker];

    [popover presentPopoverFromBarButtonItem:sender
        permittedArrowDirections:UIPopoverArrowDirectionAny
        animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T15:45:29.383

尝试创建属性来存储您的弹出框控制器或存储内容控制器。似乎其中一个视图控制器在方法结束后立即释放。此外，iOS 7 在弹出窗口中 UIImagePickerController 的行为很糟糕。 [这是相关的问题。](https://stackoverflow.com/questions/19026329/ios-7-image-picker-inside-popover-wrong-behavior)

# eclipse - 单个修订版的工作副本的颠覆问题

> ID：13637754
> 
> 赞同：4
> 
> 时间：2012-11-30T01:37:22.237
> 
> 标签：eclipse, svn, subclipse

我正在使用 subclipse 将主干中的更改合并到一个分支中，并且在“最佳实践”步骤中，有一个通知表明工作副本不在单个修订版中。包资源管理器中的所有文件或文件夹都没有脏指示符，并且（之前已经经历过）即使在进行更新之后，版本号似乎都没有改变。subclipse 具体看什么来生成此通知？有什么我也可以从命令行运行来证实这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T13:33:22.920

这基本上意味着您有一个非常正常和常见的“混合修订工作副本”。如果你谷歌它，你会发现很多解释。我多年前写的一篇博文是最热门的：

[http://markphip.blogspot.com/2006/12/mixed-revision-working-copies.html](http://markphip.blogspot.com/2006/12/mixed-revision-working-copies.html)

如果您的工作副本在一个统一的修订版中，Subversion 合并会更好地工作。所以只需运行更新。如果您允许，合并向导将为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:44:43.863

在 subclipse 之外，在纯 Subversion 术语中：

您的 WC 可能处于清洁状态（没有本地修改），但是 - 处于混合状态。当树的一部分更新为修订版时，将出现混合工作副本，与“主要”不同

**重现步骤**

```
svn co http://mayorat.ursinecorner.ru:8088/svn/Hello/
A    Hello\trunk
...
Checked out revision 34.

cd trunk

svn up -r 30
Updating '.':
...
Updated to revision 30.

cd ..\..

subwcrev Hello
SubWCRev: 'z:\Hello'
Last committed at revision 28
Mixed revision range 30:34 
```

“混合修订范围”是对您和您的情况的警告。我不记得这个检查以及如何使用纯 svn 客户端完成：始终在构建任务中使用 subwcrev

对于干净的工作副本（`svn up`在主干中完成）subwcrev 输出

```
subwcrev Hello
SubWCRev: 'z:\Hello'
Last committed at revision 34
Updated to revision 34 
```

SubWCRev 是 TortoiseSVN 的一部分

# sql - oracle - out sys_refcursor parameter - if no result found then?

> ID：13637755
> 
> 赞同：0
> 
> 时间：2012-11-30T01:37:47.233
> 
> 标签：sql, oracle

If I use out sys_refcursor parameter, I'm struggling with if the first cursor has any results.

```
create or replace procedure cursorresults
as 
(cursor1 OUT sys_refcursor
cursor2 OUT sys_Refcursor)
begin
      open cursor1 for
      select * from table1; 

      **if cursor1 has any results**

          open cursor2 for
          select * from table2; 
 end; 
```

I can requery the table1 to see if there was a match but there must be a better way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:46:14.090

The only way to determine whether a cursor returns results is to attempt to fetch results from the cursor. Of course, since a cursor is a forward-only structure, that means that you would need to close and re-open the cursor.

It seems very odd, though, that you would only want to open the second cursor if the first cursor returns results. Are you sure that you don't want to join the two tables, union them, or do something else to combine the two results?

# c++ - OpenCV校准问题

> ID：13637759
> 
> 赞同：8
> 
> 时间：2012-11-30T01:38:25.817
> 
> 标签：c++, opencv, camera-calibration

我正在开发一个 OpenCV 项目，并且正在进行校准。我相信我已经正确地实现了代码；但是我得到了不同的相机矩阵值，有时变化很大。在 6 次重复显示校准模式 10 次后，我得到*（为清楚起见截断小数）*：

```
[573, 0,  386;
  0, 573, 312;
  0,  0,   1]

[642, 0,  404;
  0, 644, 288;
  0,  0,   1]

[664, 0,  395;
  0, 665, 272;
  0,  0,   1]

[629, 0,  403;
  0, 630, 288;
  0,  0,   1]

[484, 0,  377;
  0, 486, 307;
  0,  0,   1]

[644, 0,  393;
  0, 643, 289;
  0,  0,   1] 
```

这些值相差不可接受的量。我需要相当准确地知道给定参数是什么。这些大的不准确的典型原因是什么，我如何评估给定矩阵的正确性？这似乎取决于我展示图案的距离和方向的多样性，但我无法理解图案。

# 代码：

```
using namespace cv;
using namespace std;

int main(int, char**)
{
    VideoCapture cap(1);
    if(!cap.isOpened())
        return -1;

    cap.set(CV_CAP_PROP_FRAME_WIDTH,800);
    cap.set(CV_CAP_PROP_FRAME_HEIGHT,600);
    Mat edges;
    Size size(9,17);

    int counter = 10;

    vector<Point2f> corners;
    bool found;

    vector<Point3f> chess = fr::ChessGen::getBoard(size,1,true);

    vector<vector<Point3f> > objectPoints;
    vector<vector<Point2f> > imagePoints;

    Mat camera = Mat::eye(3,3,CV_64F);
    Mat distortion = Mat::zeros(8, 1, CV_64F);
    vector<Mat > rvecs;
    vector<Mat > tvecs;

    namedWindow("edges",1);
    for(;;)
    {
        Mat frame;
        cap >> frame;
        cvtColor(frame, edges, CV_BGR2GRAY);

        found = findCirclesGrid(edges,size,corners
                                ,CALIB_CB_ASYMMETRIC_GRID
                                );
        if(found) frame.convertTo(edges,-1,0.2);

        drawChessboardCorners(edges,size,corners,found);

        imshow("edges", edges);
        if(found){
            if(waitKey(200)>=0){
                objectPoints.push_back(chess);
                imagePoints.push_back(corners);
                if(--counter<= 0)
                    break;
            }
        }
        else waitKey(30);
    }

    calibrateCamera(objectPoints,imagePoints,Size(800,600),camera,distortion,rvecs,tvecs,0);

    if(found) imwrite("/home/ryan/snapshot.png",edges);

    cout << camera << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T18:33:22.963

取决于相机/镜头和您需要的精度，但您可能需要超过 10 个位置，并且需要覆盖更广泛的视角。

我从 800x600 假设这是一个网络摄像头，带有一个简单的广角镜头，有很多失真。我会说您需要在与相机的 3-4 个不同角度中的每一个中目标的 6-8 个位置/旋转。您还需要确保目标和相机是固定的，并且在图像期间不会移动。再次假设相机具有简单的自动增益，您应该确保目标光线充足，因此它将使用快速快门速度和低增益。

openCV 使用的技术的一个问题是它需要查看目标上的所有角/点，以便在解决方案中识别和使用一帧 - 因此很难在图像的角附近找到点。您应该检查数据以了解校准中实际使用的图像数量 - 它可能只是在 10 个图像中的几个图像上找到所有点，并将解决方案基于该子集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:33:05.890

同样重要的是不要只拍摄垂直于相机的图案，而是要旋转它们。为了提高结果质量，您还可以仔细检查检测到的角落的位置，删除一些未正确检测到角落的图片，然后再次运行算法。

我不知道您使用的是哪款相机，但是由于相机的失真很大且不够锐利，因此很难正确检测到角落。OpenCV 校准也可以使用圆形图案来实现，在这种情况下可以提供更好的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T13:10:09.280

根据我的经验，您应该使用 OpenCV 提供的函数 undistort() 使用未失真的图像进行校准。

这意味着您需要运行两次校准，第一次是确定镜头系数。然后在第二次运行中不扭曲每个棋盘框架。使用不失真的校准框架，焦距 fx 和 fy 变得更加精确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T12:02:25.980

根据张正友的论文，正确的角度在45度以下，而且必须有6张以上的照片，最好拍20张。另外，你需要注意光的平衡，强度。

# c++ - read dot file for graphviz without storing node-id in boost graph

> ID：13637760
> 
> 赞同：2
> 
> 时间：2012-11-30T01:38:56.357
> 
> 标签：c++, boost, boost-graph

I have a file named "test.dot" something like,

```
graph {
    0;
    1;
    0 -- 1;
}
//EOF 
```

I want to read a file using boost graph library.

```
#include <boost/graph/graphviz.hpp>

using namespace std;
using namespace boost;

int main(int,char*[])
{
    typedef adjacency_list< vecS, vecS, undirectedS, property<vertex_color_t,int> > Graph;
    Graph g(0);

    dynamic_properties dp;
    auto index = get(vertex_color, g);
    dp.property("node_id", index);

    ifstream fin("test.dot");
    read_graphviz(fin, g, dp);
} 
```

However, in this source code, I had to attach another property(vertex_color_t) to store "node_id". In my simple example, it is just the same as "node_index".

Is there a way that I can identify them to save memory?? I don't want to introduce additional property.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T21:44:29.323

`dynamic_properties`有一个构造函数，它接受一个函子来处理默认情况，一种实现是`boost::ignore_other_properties`. 这有效：

```
#include <boost/graph/graphviz.hpp>

using namespace std;
using namespace boost;

int main(int,char*[])
{
    typedef adjacency_list< vecS, vecS, undirectedS > Graph;
    Graph g(0);

    dynamic_properties dp(ignore_other_properties);
    ifstream fin("test.dot");
    read_graphviz(fin, g, dp);
} 
```

# google-app-engine - dev_appserver: where do static routes get routed?

> ID：13637765
> 
> 赞同：1
> 
> 时间：2012-11-30T01:39:21.850
> 
> 标签：google-app-engine

Could anyone point to roughly where in the python sdk code static routes get loaded into or accessed by http_server. This is to debug a failure to load static images. In eclipse I can see the static routes loading into var appinfo from the yaml file, and later can see the dynamic routes being checked during a request, but having trouble following the in-between steps. Thanks

Update 11/30

Previously tried variations on the yaml, path, etc that were suggested in some docs and postings. Here is one of them. In this case there is no 404 error, but image doesn't load and Firebug reports "Failed to the load the given URL".

## app.yaml

```
application: crazywidget2  
version: 1  
runtime: python27  
api_version: 1  
threadsafe: false  

handlers:  
- url: /images  
  static_dir: /images  
  secure: always  

-url: /.*  
  script: crazywidget2.py  
  secure: always  

libraries:  
- name: jinja2    
  version: latest 
```

* * *

## index.html

```
...  
<img src="/images/xyz.gif" alt="XYZ illustration" />  
... 
```

## crazywidget2.py

```
...
class MainPage(webapp2.RequestHandler):

    def get(self):
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render({}))

...
...

app = webapp2.WSGIApplication([('/script_send', ScriptSend),
                        ('/resetkey', ResetKey),
                        ('/admin', Admin),  
                        ('/start', Start),  
                        ('/', MainPage)],  
                            debug=True)  

 def main():

    app.run()

if __name__=='__main__':
    main() 
```

Update 12/3

Turns out that in the above case it works if the static_dir is relative, "images" instead of "/images". In the absolute case it tries to open that path as is. Maybe some other variations would work as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:03:04.687

以下是三个相关的代码指针（都在[google/appengine/tools/dev_appserver.py](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev_appserver.py)中）：

*   [类 FileDispatcher](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev_appserver.py#2028)
*   [CreateURLMatcherFromMaps()](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev_appserver.py#3040)
*   [DevAppServerRequestHandler._Dispatch()](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev_appserver.py#2704)

我会假设，有更简单的方法来调试你的问题。如果你发布你的 app.yaml 以及你访问的路径和你得到的响应，这里的人可以开始帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:03:46.610

只是一个预感：如果您`/images`在处理程序的末尾添加一个斜杠，它会起作用吗？尝试在您使用它的两个地方`/images`替换为.`/images/``app.yaml`

# c# - 洋葱架构外部服务

> ID：13637767
> 
> 赞同：2
> 
> 时间：2012-11-30T01:39:38.777
> 
> 标签：c#, .net-4.0, asp.net-web-api, onion-architecture

![](../Images/1a0bae80f240e56bea528bdc5f06de76.png)

我目前正在从事一个基于 Onion Architecture 的项目。上图显示了解决方案。

在基础设施中，我们有 External Service 。但是 WebAPI 只能访问 Core 。

但是在 Web API 项目中，我想访问外部服务公开的一些模型？我们如何在不添加对 Web API 中的 Infrastructure 的引用的情况下实现这一点。

还是我们错误地实现了洋葱架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:53:52.393

从概念上讲，您走在正确的轨道上，但实施并不是一个硬性的快速规则。开始你不需要 5 个以上的项目，最多需要 3 个（web ui css/js/views、逻辑/控制器、代码和测试）。实际上你可能只需要 2 个（应用程序，测试）

层的概念是概念性的，而不是物理的。并且没有硬性规定必须完全隔离这些层。相反，应用程序的核心焦点是应用程序的功能。当你深入了解它是如何实现的细节时，你会移到外层。

在这种情况下，您需要访问从外部服务检索到的数据。为外部服务创建一个抽象`IExternalServiceAdaptor`。接口可能驻留在域或服务器层，但实现可能驻留在基础设施或外层，其中如何调用外部服务的详细信息封装在`IExternalServiceAdaptor`.

如果您坚持物理分离，您将`Core`在`Infrstructure`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:09:57.503

> 但是在 Web API 项目中，我想访问外部服务公开的一些模型？

实际上，您的 WebApi 项目应该只操作在您的核心项目中定义的对象。正如 Jason 所说，对任何外部服务的调用都应该封装在 Core 中的接口实现中。这就是您的外部服务公开的模型将映射到您的核心模型的地方。

在此处查看 Matt Hidinger 在 CodePlex 上的源代码：http://onionarch.codeplex.com/[并](http://onionarch.codeplex.com/)查看他如何处理此类问题，它非常简单易懂。

# javascript - 我如何在此使用 .remove 有一个特定的类？

> ID：13637768
> 
> 赞同：0
> 
> 时间：2012-11-30T01:39:40.053
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:40:39.620

这应该这样做

```
$('p>a.foo_blog').remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T01:43:14.260

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:41:12.390

```
$("a.foo_blog, p.foo_blog").remove(); 
```

# visual-c++ - 错误 C4716：函数：必须返回一个值

> ID：13637771
> 
> 赞同：2
> 
> 时间：2012-11-30T01:39:55.207
> 
> 标签：visual-c++, pthreads

所以我正在尝试为 Visual C++(2012) 使用 pthread 库，但出现此错误`error C4716: 'print_message' : must return a value` 这是代码

```
#include "stdafx.h"
#include <iostream>
#include "pthread.h"
using namespace std;

void* print_message(void *)
{
    cout << "Threading\n";
}

int main() 
{
    pthread_t t1;

    pthread_create(&t1, NULL, print_message, NULL);
    cout << "Hello";

    void* result;
    pthread_join(t1,&result);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:59:30.727

添加 `return NULL;` 到`print_message`. 我敢打赌，您也需要为参数命名。

# mysql - 填充临时表

> ID：13637772
> 
> 赞同：1
> 
> 时间：2012-11-30T01:39:58.950
> 
> 标签：mysql

我正在尝试使用现有表（员工）`emp_department_1`中的 4 列（ ）填充我的临时表（）。`fname, minit, lname, bdate`来自`dno=1`员工表的位置。有什么建议么？

```
mysql> select * from employee;
+----------+-------+---------+-----------+------------+--------------------------+------+--------+-----------+-----+
| Fname    | Minit | Lname   | SSN       | Bdate      | Address                  | Sex  | Salary | Superssn  | Dno |
+----------+-------+---------+-----------+------------+--------------------------+------+--------+-----------+-----+
| John     | B     | Smith   | 123456789 | 1955-01-09 | 731 Fondren, Cary, NC    | M    |  31500 | 333445555 |   5 |
| Franklin | T     | Wong    | 333445555 | 1945-12-08 | 638 Voss, Cary, NC       | M    |  42000 | 888665555 |   5 |
| Alicia   | J     | Zelaya  | 999887777 | 1958-07-19 | 3321 Castle, Apex, NC    | F    |  25000 | 987654321 |   4 |
| Jennifer | S     | Wallace | 987654321 | 1931-06-20 | 291 Berry, Garner, NC    | F    |  43000 | 888665555 |   4 |
| Rameish  | K     | Naraya  | 666884444 | 1952-09-15 | 975 Fire Oak, Angier, NC | M    |  39900 | 333445555 |   5 |
| Joyce    | A     | English | 453453453 | 1962-07-31 | 5631 Rice, Raleigh, NC   | F    |  26250 | 333445555 |   5 |
| Ahmad    | V     | Jabbar  | 987987987 | 1959-03-29 | 980 Dallas, Cary, NC     | M    |  25000 | 987654321 |   4 |
| James    | E     | Borg    | 888665555 | 1927-11-10 | 450 Stone, Cary, NC      | M    |  55000 | NULL      |   1 |
+----------+-------+---------+-----------+------------+--------------------------+------+--------+-----------+-----+ 
```

James E Borg 是唯一一个 dno=1 的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:44:17.440

你只需要一个简单的`INSERT INTO ... SELECT...FROM`陈述。建议列出 中的列`()`，假设列的`emp_department_1`顺序与我的顺序不完全匹配`SELECT`。

```
INSERT INTO emp_department_1 (fname, minit, lname, bdate)
  SELECT fname, minit, lname, bdate FROM employee WHERE dno = 1 
```

查看有关语法的MySQL[语法参考](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)`INSERT...SELECT`。

### 更新

由于这是一个尚未创建的临时表，请使用以下[`CREATE TEMPORARY TABLE ... SELECT`语法](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)：

```
CREATE TEMPORARY TABLE emp_department_1
   SELECT fname, minit, lname, bdate FROM employee WHERE dno = 1 
```

不必在临时表中定义列类型，但您可以根据需要定义，也可以根据需要创建索引。

```
CREATE TEMPORARY TABLE emp_department_1 (
  fname VARCHAR(64) NOT NULL,
  minit VARCHAR(64) NULL,
  lname VARCHAR(64) NOT NULL,
  bdate DATE NOT NULL,
  PRIMARY KEY (fname, lname, bdate) /* not that you would actually do this */
) SELECT fname, minit, lname, bdate FROM employee WHERE dno = 1 
```

# python - 无法理解函数调用中的“TypeError”

> ID：13637774
> 
> 赞同：-2
> 
> 时间：2012-11-30T01:40:03.327
> 
> 标签：python, list

我正在尝试编写一个函数，该函数接受一个参数，该参数是 4 元素列表的列表，代表单次骑行的批准选票；内部列表元素的顺序对应于称为 的当事方列表中当事方的顺序`PARTY_INDICES`。

“赞成”票数最多的一方获胜。

它应该返回一个 2 元组，其中第一个元素是获胜方的名称，第二个元素是一个四元素列表，其中包含每一方的赞成票数。列表元素的顺序对应于 中各方的顺序`PARTY_INDICES`。

这是我到目前为止所拥有的：

```
def voting_approval(approval):
    ''' (list of list of str) -> tuple of (str, list of int)
        In Approval Voting, the party that receives the most YES votes wins the seat.
    '''

    parties=['NDP','GREEN','LIBERAL','CPC']
    totals = [sum('YES') for x in zip(*approval)]
    win_party = parties[totals.index(max(totals))]
    return (win_party, totals) 
```

但是，当我尝试`voting_approval(['YES','NO','YES','NO'],['YES','NO','YES','YES'],['YES','YES','YES','YES'])`.

我收到以下错误：

```
builtins.TypeError: voting_approval() takes exactly 1 positional argument (3 given) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:42:18.217

在不尝试对函数进行故障排除的情况下，错误的原因是当它只接受一个参数时，您将 3 个列表作为参数传递给函数。

您可以使用该功能的另一种方法是：

```
def vote(arg):
    parties = ['NDP','GREEN','LIBERAL','CPC']
    values = [0,0,0,0]
    for lis in arg:
        for no, item in enumerate(lis):
            if item == 'Yes':
                values[no] += 1

    return (parties[values.index(max(values))], max(values)) 
```

然后像这样使用它：

```
vote([['Yes', 'No', 'Yes', 'No'],['No', 'No', 'Yes', 'No']]) 
```

这将返回 ('LIBERAL', 2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:14:25.540

我将解决您的主要问题，计算“是”票的数量。

```
party_list = ['foo','bar','zoo']
yes_votes = {}
sample_votes = [['no','yes','no'],['yes','yes','no'],['no','no','no']]

for inner_list in sample_votes:
   for party_index, vote in enumerate(inner_list):
      if vote.lower() == 'yes':
          if party_list[party_index] not in yes_votes:
              yes_votes[party_list[party_index]] = 1
          else:
              yes_votes[party_list[party_index]] += 1

print 'Winner is ',max(yes_votes, key=lambda x: yes_votes[x]) 
```

# css - CSS：正确 扩展到非固定宽度左列旁边的剩余空间

> ID：13637780
> 
> 赞同：0
> 
> 时间：2012-11-30T01:40:47.577
> 
> 标签：css, layout, html

我的布局中有两列。我希望 right`<div>`扩展以填充 left 旁边的剩余空间`<div>`。但是，我希望 left`<div>`的宽度基于其内容 - 我不想指定特定的像素宽度或百分比。换句话说，无论左列变得多宽，右列都应该简单地填满剩下的水平空间。

纯CSS可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:49:24.167

您可以将`float:left`其用于左侧 div。

检查这个[小提琴](http://jsfiddle.net/Fjcqn/)，我给了它 3 个不同大小的左侧 div 列。

# javascript - 如何验证文本框中的最少字符数？

> ID：13637782
> 
> 赞同：1
> 
> 时间：2012-11-30T01:41:01.117
> 
> 标签：javascript

我正在尝试验证信用卡安全号码，我已将最大长度设置为 3，但我需要确保用户输入至少 3，但我找不到任何最小长度的方法来做到这一点。

安全：`<input type="text" name="secno" maxlength="3">`

```
var n=document.forms["myForm"]["secno"].value;
if (n==null || n=="" || isNaN(n)) {
  alert("Security number needed");
  return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:44:28.580

这将做：

```
<input type="text" name="secno" onblur="if(this.value.length < 3 )alert('At least three chars.');" maxlength="3"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:44:32.077

```
Security: <input type="text" name="secno" pattern=".{3,3}" /> 
```

与 minlength=3 和 maxlength=3 的工作方式相同，但请记住，有些卡片有四个字符，所以我建议

```
Security: <input type="text" name="secno" pattern=".{3,4}" /> 
```

这样做是使用模式属性，它允许您设置正则表达式来验证测试

# opengl - 在 OpenGL 3.x/4.x 中绘制多个模型

> ID：13637783
> 
> 赞同：2
> 
> 时间：2012-11-30T01:41:02.617
> 
> 标签：opengl

我正在开发一个渲染引擎，到目前为止一切都很好，但我不明白为什么当我进行两次绘图调用以渲染不同的模型时，只有 1 个会出现。

我正在使用 wxWidgets 来处理窗口系统，有问题的代码粘贴在下面。有什么建议么？

## 主渲染循环

```
TestShader.Activate();
glUseProgram(TestShader.Program);

ProjectionMatrix = glm::perspective(45.0f, 4.0f / 3.0f, 0.1f, 100.0f);
int projectionMatrixLocation = glGetUniformLocation(TestShader.Program, "ProjectionMatrix");
glUniformMatrix4fv(projectionMatrixLocation, 1, GL_FALSE, glm::value_ptr(ProjectionMatrix));

glm::mat4 ViewMatrix = glm::lookAt(
                            glm::vec3(position),          
                            glm::vec3(position+direction),
                            glm::vec3(up)                 
                       );
int viewMatrixLocation = glGetUniformLocation(TestShader.Program, "ViewMatrix");
glUniformMatrix4fv(viewMatrixLocation, 1, GL_FALSE, glm::value_ptr(ViewMatrix));

TestModel[1].Draw(TestShader, glm::vec3(0,0,-11));
TestModel[0].Draw(TestShader, glm::vec3(0,0,-1));

Refresh(false); 
```

## 模型绘制功能

```
void E_MODEL::Draw(EShader Shader, glm::vec3 Location)
{
if (!Registered) glGenVertexArrays(1, &VAO[0]);
glBindVertexArray(VAO[0]);

if (!Registered) glGenBuffers(1, &VBO[0]);
glBindBuffer(GL_ARRAY_BUFFER, VBO[0]);
if (!Registered) glBufferData(GL_ARRAY_BUFFER, Vertices.size() * sizeof(glm::vec3), &Vertices[0], GL_STATIC_DRAW);

if (!Registered) glGenBuffers(1, &VBO[1]);
glBindBuffer(GL_ARRAY_BUFFER, VBO[1]);
if (!Registered) glBufferData(GL_ARRAY_BUFFER, Normals.size() * sizeof(glm::vec3), &Normals[0], GL_STATIC_DRAW);

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glEnableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, VBO[0]);
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);

glEnableVertexAttribArray(1);
glBindBuffer(GL_ARRAY_BUFFER, VBO[1]);
glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, (void*)0);

glm::mat4 modelMatrix = glm::translate(glm::mat4(1.0f), Location);

int modelMatrixLocation = glGetUniformLocation(Shader.Program, "modelMatrix");
glUniformMatrix4fv(modelMatrixLocation, 1, GL_FALSE, glm::value_ptr(modelMatrix));
glDrawArrays( GL_TRIANGLES, 0, Vertices.size() );

glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);

glBindVertexArray(0);

glBindBuffer(GL_ARRAY_BUFFER, 0);

Registered = true;
} 
```

## 顶点着色器

```
#version 330 core

// Input vertex data, different for all executions of this shader.
layout(location = 0) in vec3 vertexPosition_modelspace;
layout(location = 1) in vec3 vertexColor;

// Output data ; will be interpolated for each fragment.
out vec3 fragmentColor;
// Values that stay constant for the whole mesh.
uniform mat4 ProjectionMatrix;
uniform mat4 ViewMatrix;
uniform mat4 modelMatrix;

void main(){    

gl_Position =  ProjectionMatrix * ViewMatrix * modelMatrix * vec4(vertexPosition_modelspace,1);

// The color of each vertex will be interpolated
// to produce the color of each fragment
fragmentColor = vertexColor;
} 
```

## 片段着色器

```
#version 330 core

// Interpolated values from the vertex shaders
in vec3 fragmentColor;

// Ouput data
out vec3 color;

void main(){

// Output color = color specified in the vertex shader, 
// interpolated between all 3 surrounding vertices
color = fragmentColor;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T02:04:08.547

`glClear`清除缓冲区。使用`GL_COLOR_BUFFER_BIT`标志，您正在清除颜色缓冲区。使用该`GL_DEPTH_BUFFER_BIT`标志，您正在清除深度缓冲区。通过在每次绘制模型时执行此操作，之前写入的颜色和深度信息都会被清除。这意味着您每次绘制模型时都会擦除图像。

您通常会在每次“绘制”或“呈现”时清除一次缓冲区。也就是你通关一次，抽N次，呈现一次。你现在正在做的事情是清楚的，画的，清楚的，画的……现在。

TL;DR：在*所有*`glClear`抽奖之前调用一次，而不是在每次抽签之前调用。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:56:27.737

它是`glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);`绘图功能的内部吗？也许在您调用绘图函数之前将其移出？*

# javascript - 使用带有持久性的 Agility.js 的简单 ToDo 应用程序

> ID：13637790
> 
> 赞同：1
> 
> 时间：2012-11-30T01:42:00.097
> 
> 标签：javascript, model-view-controller, agility.js

我创建了一个名为的数据库`agilityjs`，其中有一个名为`todolist`. 我创建了一个文件，`/api/todolist.php`其中将充当 Web 服务。我想这样做，当用户单击“新项目”时，它将通过调用 PHP 文件 ( `todolist.php`) 将新项目添加到我的数据库中。我的下一个目标是在他们点击编辑时编辑项目，在他们点击删除时删除。

任何人都可以帮助我朝着正确的方向前进吗？我在[http://agilityjs.com/docs/docs.html#persist](http://agilityjs.com/docs/docs.html#persist)看到了持久性文档，但我不确定如何应用它。

以下代码简单摘自[http://agilityjs.com/](http://agilityjs.com/)（在底部，您可以看到它，它是现场演示）。

这是另一个学习[https://gist.github.com/3166678](https://gist.github.com/3166678)的好资源，但我似乎也无法应用它。

```
//
// Item prototype
//
var item = $$({}, '<li><span data-bind="content"/> <button>x</button></li>', '& span { cursor:pointer; }', {
  'click span': function(){
    var input = prompt('Edit to-do item:', this.model.get('content'));
    if (!input) return;
    this.model.set({content:input});
  },
  'click button': function(){
    this.destroy();
  }
});

//
// List of items
//
var list = $$({}, '<div> <button id="new">New item</button> <ul></ul> </div>', {
  'click #new': function(){
    var newItem = $$(item, {content:'Click to edit'});
    this.append(newItem, 'ul'); // add to container, appending at <ul>
  }
});

$$.document.append(list); 
```

谢谢你。

# php - MongoDB通过终端连接，而不是通过PHP？

> ID：13637795
> 
> 赞同：0
> 
> 时间：2012-11-30T01:42:22.803
> 
> 标签：php, mongodb

我刚开始使用 MongoDB，到目前为止一切都很好。我已经在我的本地 XAMPP 服务器 (Mac) 上安装了 Mongo 服务器和 mongo.so PHP 扩展。

我已经成功[创建了一个新的管理员用户和一个`mongo`在终端中](https://stackoverflow.com/questions/5064004/while-creating-new-user-in-mongodb-it-has-to-be-created-under-admin)使用的新普通用户。

当尝试通过终端或通过 MongoHub 对该用户进行身份验证时，它可以正常工作，但如果我尝试登录 throw RockMongo 或只是我自己的 PHP 脚本，它总是会失败。

我的猜测可能是我的 PHP 模块有问题？有什么意见吗？

**编辑（更多信息）：**

1.  当连接错误信息时，我实际上会得到一个 throws `MongoMongoConnectionException`。
2.  当我连接正确的信息时，我会得到一个空页面，或者在尝试使用 curl 时它只会返回`curl: (52) Empty reply from server`
3.  服务器上安装的mongo是v1.3.0 ![在此处输入图像描述](../Images/e3dd868472ec7a97e33bdd606d242b0a.png)

由于这两件事，我认为这可能是一个混乱的模块。有谁知道这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:45:10.830

尝试以下方式连接mongodb。它对我有用。

```
$m = new Mongo("mongodb://username:password@host:port"); 
```

默认情况下，mongo 端口是 27017。您还可以检查您的 php 是否是线程安全的，并且 VC 是否与 mongo_php 扩展名相同。对不起我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:17:32.147

我在 Freenode 上的 #mongodb irc 频道上得到了开发 PHP 模块的非常有帮助和友善的 Derick 的帮助。

最终问题是 MacPorts 安装错误。[我从http://pecl.php.net/get/mongo-1.3.0.tgz](http://pecl.php.net/get/mongo-1.3.0.tgz)下载了最新的 Mongo 驱动程序 1.3.0 源，手动编译它，现在一切正常。

感谢任何试图提供帮助的人。

# mod-rewrite - 如何防止 mod_rewrite 识别目录

> ID：13637797
> 
> 赞同：1
> 
> 时间：2012-11-30T01:42:55.413
> 
> 标签：mod-rewrite, query-string, directory

所以，最近我一直在处理一个与 mod_rewrite 相关的问题，似乎没有人试图做类似的事情。人们遇到的每个问题都是关于尝试从重写中**排除**目录，而我希望它们像其他任何目录一样被**包含在内**。

例如，假设我的根目录中包含 .htaccess 文件是`www.example.com/root/`

当我输入组成的目录时，例如`www.example.com/root/asdfasdf`，我将 .htaccess 文件设置为将我重定向到`www.example.com/root/index.php?url=asdfasdf`而不更改浏览器地址栏中的内容

但是，在尝试对真实**目录**（例如.`www.example.com/root/admin``www.example.com/root/admin/?url=admin`

任何人都可以向我解释发生了什么。我已经尝试了各种不同的正则表达式和标志，而重定向任何东西的那些仍然会导致同样的问题。在`www.example.com/root/admin`隐藏查询字符串为`?url=admin`.

**[更新：附加信息 11-30-2012]**

就像我说的那样，我已经尝试过它会使用多行不同的代码并出现完全相同的重定向问题，假设重定向不会完全失败并产生 500 错误。不过，这是我最新的迭代之一，它产生了不忽略目录的问题。

```
RewriteEngine On
RewriteBase /root/

RewriteCond %{REQUEST_FILENAME} !^(.\*\\.("png"|"jpg"|"gif") [NC]
RewriteRule (.\*?) index.php?url=$1 [QSA] 
```

重写条件是在请求图片时阻止引擎重写（对于 css 和 img 标签）。我之前只是没有提到它，因为我已经尝试删除该行并且它没有任何区别。

不过，我并不是 mod_rewrite 的大师，所以如果你发现我写的任何东西有任何错误，请随时告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:41:06.377

您的问题并不完全清楚您要做什么，看看您的 .htaccess 文件实际上是什么样子会很有帮助。但是，根文件夹中的 .htaccess 文件中的以下行：

```
RewriteCond %{REQUEST_URI} !^/root/index\.php
RewriteRule (.*) /root/index.php?url=$1 [L] 
```

将静默重定向到的请求`http://www.example.com/root/madeupfolder/madeupfile.php`，`http://www.example.com/root/index.php?url=madeupfolder/madeupfile.php`并且也将对真实文件夹执行相同的操作。因此，如果文件夹 admin 存在于根目录下，则请求`http://www.example.com/root/admin`将被静默重定向到`http://www.example.com/root/index.php?url=admin`

但是，如果您想提供实际存在的文件夹和文件，但重写对不存在的文件夹和文件的请求，那么您需要像这样调整重写

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/root/index\.php
RewriteRule (.*) /root/index.php?url=$1 [R=301] 
```

`http://www.example.com/root/madeupfolder/madeupfile.php`这仍然会重写对的请求`http://www.example.com/root/index.php?url=madeupfolder/madeupfile.php`，但对于真正的文件夹和文件，例如对 的请求`http://www.example.com/root/admin`，将提供管理文件夹。

希望这会有所帮助，但是如果您可以稍微澄清一下您的问题，那么我可以再次尝试提供帮助。

# matlab - 我们在 Matlab 中 UIcontrol 按钮的回调中得到的参数是什么

> ID：13637801
> 
> 赞同：0
> 
> 时间：2012-11-30T01:43:12.227
> 
> 标签：matlab, user-interface

我正在使用带有 UIcontrol 的按钮在图像上显示很多按钮。（大约 20 个）如何使用单个函数处理回调（具有相似的行为，我只需要更改每个按钮的 id，我不想为每个按钮编写 20 个回调。 )

```
S = uicontrol('style','push',...
                     'units','pix',...
                     'position',Pos,...
                     'string',Button_name,...
                     'fontsize',10,...
                     'fontweight','bold');                      
                 set(S,'callback',{@pb1_call}) % Set the callbacks.
end
     function [] = pb1_call(varargin)
     disp(varargin)

 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:49:05.967

您可以将回调函数设置为匿名函数，这将允许您将附加信息传递给回调

```
set(S,'callback',{@(u,v)pb1_call(u,v,buttonID}) % Set the callbacks. 
```

然后您的回调函数将具有签名

```
function pb1_call(hObject,eventdata,buttonID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:24:38.090

Matlab 文档很好地描述了这一点，请查看 uicontrol 属性。

```
function pushbutton1_Callback(hObject,eventdata)
display Goodbye
close(gcbf) 
```

回调使用触发对象和事件数据触发。如果您在 uicontrol 上设置标签，您可以执行以下操作：

```
function pushbutton1_Callback(hObject,eventdata)
buttonID = get(hObject, 'Tag');
switch buttonID
    case 'button1'
    ...
end 
```

另外值得注意的是，如果回调是句柄类的方法，则有三个参数：

```
function pushbutton1_Callback(self, hObject, eventdata) 
```

# magento - 运行安装脚本时强制执行 Magento 模块依赖项

> ID：13637804
> 
> 赞同：1
> 
> 时间：2012-11-30T01:43:16.143
> 
> 标签：magento

Magento 在计算运行时配置值（如重写、事件等）时会考虑 app/etc/modules/Namespace_Module.xml 中声明的任何模块依赖关系，但是在对模块设置脚本进行排序时，它不会遵循类似的过程。设置脚本按字母顺序执行，当一个模块依赖于在字母表后面的模块中定义的设置脚本时，这可能会导致问题。

相关代码在`applyAllDataUpdates`方法中`Mage_Core_Model_Resource_Setup`：

```
 $resources = Mage::getConfig()->getNode('global/resources')->children();
    foreach ($resources as $resName => $resource) {
        <snip/>
        $setupClass->applyDataUpdates();
    } 
```

是否有安全/首选/推荐选项来确保在运行所需脚本之前已执行必要的设置脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:57:43.243

我很想知道用例，但我看到模块依赖关系在这个区域产生了影响，这是可以预料的，因为所有配置文件都是根据模块声明条目 + 依赖规范加载的。

**POC**

在 1.5.1.1 中验证：

*应用程序/etc/modules/a.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Foo_Module>
            <active>true</active>
            <codePool>local</codePool>
        </Foo_Module>
        <Mage_Eav>
            <depends>
                <Foo_Module />
            </depends>
        </Mage_Eav>
    </modules>
</config> 
```

*app/code/local/Foo/Module/etc/config.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Foo_Module>
            <version>0.1</version>
        </Foo_Module>
    </modules>
    <global>
        <resources>
            <foo_module_setup>
                <setup>
                    <module>Foo_Module</module>
                </setup>
            </foo_module_setup>
        </resources>
    </global>
</config> 
```

`Mage_Core_Model_App`：

```
public function run($params)
{
    $options = isset($params['options']) ? $params['options'] : array();
    $this->baseInit($options);

    if ($this->_cache->processRequest()) {
        $this->getResponse()->sendResponse();
    } else {
        $this->_initModules();
        $this->loadAreaPart(Mage_Core_Model_App_Area::AREA_GLOBAL, Mage_Core_Model_App_Area::PART_EVENTS);

        if ($this->_config->isLocalConfigLoaded()) {
            $scopeCode = isset($params['scope_code']) ? $params['scope_code'] : '';
            $scopeType = isset($params['scope_type']) ? $params['scope_type'] : 'store';
            $this->_initCurrentStore($scopeCode, $scopeType);
            $this->_initRequest();
    /*Dump resource node here: */
            var_dump(Mage::getConfig()->getNode('global/resources')->children()); die;
            Mage_Core_Model_Resource_Setup::applyAllDataUpdates();
        }

        $this->getFrontController()->dispatch();
    }
    return $this;
} 
```

# asp.net - WCF Web 服务和 SSL 的问题

> ID：13637808
> 
> 赞同：0
> 
> 时间：2012-11-30T01:43:53.860
> 
> 标签：asp.net, wcf, ssl

过去几个小时我已经阅读了很多线程，但我没有找到适合我的解决方案:-(

因此，作为已经有多个其他用户，我在从我的 Windows Phone 7 应用程序中通过 SSL 调用 SVC-Webservice 时遇到问题。在本地主机上它工作正常。我已经在我的 Web 应用程序中部署了 Web 服务。服务“MyService.svc”位于 Web 应用程序的根目录中。在 IIS 上，我只为此 IP 添加了 HTTPS（来自 Startcom，使用默认端口 443）并要求使用 SSL。我可以打开我的 Web 应用程序，我可以使用[http://mydomain.com/MyService.svc](http://mydomain.com/MyService.svc)上的任何浏览器从服务器和本地开发机器上打开 Web 服务。该页面说我可以调用 svcutil.exe [https://mydomain.com/MyService.svc?wsdl](https://mydomain.com/MyService.svc?wsdl)。当我单击链接时，数据显示正确。

现在，当我尝试通过 WP7 应用程序访问它时，我总是收到以下错误： *“在[https://mydomain.com/MyService.svc](https://mydomain.com/MyService.svc)上没有可以接受消息的端点监听。这通常是由不正确的地址或SOAP 操作。有关详细信息，请参阅 InnerException（如果存在）。* 内部细节说：*“远程服务器返回错误：NotFound。”* 这是我的 web.config 的重要部分。我不知道这是否都是必需的，因为我已经从多个线程中复制了它，但至少在 IE 中它可以正常工作：

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="MyBehavior">
                <serviceMetadata httpsGetEnabled="true" httpGetEnabled="false" />
                <serviceDebug includeExceptionDetailInFaults="true" />
                <dataContractSerializer maxItemsInObjectGraph="1073741824" />
                <useRequestHeadersForMetadataAddress>
                    <defaultPorts>
                        <add scheme="https" port="443" />
                    </defaultPorts>
                </useRequestHeadersForMetadataAddress>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service behaviorConfiguration="MyBehavior" name="MyNamespace.MyService">
            <endpoint address="" binding="wsHttpBinding" bindingConfiguration="HttpsBinding"
                      contract="MyNamespace.IMyService">
            </endpoint>
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
        </service>
    </services>
  <bindings>
    <wsHttpBinding>
      <binding name="HttpsBinding">
      <readerQuotas maxStringContentLength="2147483647" />
        <security mode="Transport">
          <transport clientCredentialType="None"/>
        </security>
      </binding>
    </wsHttpBinding>
  </bindings>
  <!-- <serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> --> 
```

非常感谢！

# xaml - Wrap TextBlock 的最大行数

> ID：13637814
> 
> 赞同：31
> 
> 时间：2012-11-30T01:44:39.257
> 
> 标签：xaml, uwp, windows-8, uwp-xaml, textblock

我有`TextBlock`以下设置：

```
TextWrapping="Wrap" 
```

我可以确定最大行数吗？

例如考虑以下字符串`TextBlock.Text`：

```
This is a very good horse under the blackboard!! 
```

目前有这样的节目：

```
This is a very 
good horse under 
the blackboard!! 
```

我需要它变成这样的东西：

```
This is a very 
good horse ... 
```

任何解决方案？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-11-19T19:53:09.997

# 更新（针对 UWP）

在 UWP 应用程序中，您不需要这个并且可以使用 TextBlock 属性`MaxLines`（请参阅[MSDN](https://msdn.microsoft.com/de-de/library/windows/apps/windows.ui.xaml.controls.textblock.maxlines)）

* * *

# 原答案：

如果您有特定的`LineHeight`，您可以计算 TextBlock 的**最大高度**。

### 例子：

*最多 3 行的文本块*

```
<TextBlock 
  Width="300"
  TextWrapping="Wrap" 
  TextTrimming="WordEllipsis" 
  FontSize="24" 
  LineStackingStrategy="BlockLineHeight"
  LineHeight="28"
  MaxHeight="84">YOUR TEXT</TextBlock> 
```

这就是使您的要求正常工作所需的全部内容。

### 如何动态地做到这一点？

只需在 C#/VB.NET 中创建一个扩展的新控件`TextBlock`并为其赋予一个新的`DependencyProperty` *int MaxLines*。
然后覆盖该`OnApplyTemplate()`方法并设置`MaxHeight`基于`LineHeight`* `MaxLines`。

这只是关于如何解决此问题的基本解释！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-31T11:43:07.533

根据 tobi.at 和 gt 的回答，我创造了这种`MaxLines`行为。至关重要的是，它不依赖于`LineHeight`通过计算字体的行高来设置属性。您仍然需要设置它并根据`TextWrapping`需要进行渲染。`TextTrimming``TextBox`

```
<TextBlock behaviours:NumLinesBehaviour.MaxLines="3" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" Text="Some text here"/> 
```

还有一种`MinLines`行为可以与设置行数的`MaxLines`行为不同或设置为相同的数字。

```
public class NumLinesBehaviour : Behavior<TextBlock>
{
    TextBlock textBlock => AssociatedObject;

    public static readonly DependencyProperty MaxLinesProperty =
        DependencyProperty.RegisterAttached(
            "MaxLines",
            typeof(int),
            typeof(NumLinesBehaviour),
            new PropertyMetadata(default(int), OnMaxLinesPropertyChangedCallback));

    public static void SetMaxLines(DependencyObject element, int value)
    {
        element.SetValue(MaxLinesProperty, value);
    }

    public static int GetMaxLines(DependencyObject element)
    {
        return (int)element.GetValue(MaxLinesProperty);
    }

    private static void OnMaxLinesPropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        TextBlock element = d as TextBlock;
        element.MaxHeight = getLineHeight(element) * GetMaxLines(element);
    }

    public static readonly DependencyProperty MinLinesProperty =
        DependencyProperty.RegisterAttached(
            "MinLines",
            typeof(int),
            typeof(NumLinesBehaviour),
            new PropertyMetadata(default(int), OnMinLinesPropertyChangedCallback));

    public static void SetMinLines(DependencyObject element, int value)
    {
        element.SetValue(MinLinesProperty, value);
    }

    public static int GetMinLines(DependencyObject element)
    {
        return (int)element.GetValue(MinLinesProperty);
    }

    private static void OnMinLinesPropertyChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        TextBlock element = d as TextBlock;
        element.MinHeight = getLineHeight(element) * GetMinLines(element);
    }

    private static double getLineHeight(TextBlock textBlock)
    {
        double lineHeight = textBlock.LineHeight;
        if (double.IsNaN(lineHeight))
            lineHeight = Math.Ceiling(textBlock.FontSize * textBlock.FontFamily.LineSpacing);
        return lineHeight;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-21T19:38:51.470

如果您已设置`Height`, `TextWrapping`, 并且`TextTrimming`全部设置，它将完全按照您的意愿行事：

```
<TextBlock Height="60" FontSize="22" FontWeight="Thin"
    TextWrapping="Wrap" TextTrimming="CharacterEllipsis"> 
```

上面的代码最多包含两行，然后在此之后使用`CharacterEllipsis`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T02:09:45.257

你需要`TextTrimming="WordEllipsis"`在你的`TextBlock`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-15T12:45:55.590

根据@artistandsocial 的回答，我创建了一个附加属性来以编程方式设置最大行数（而不是`TextBlock`在 WPF 中不鼓励重载）。

```
public class LineHeightBehavior
{
    public static readonly DependencyProperty MaxLinesProperty =
        DependencyProperty.RegisterAttached(
            "MaxLines",
            typeof(int),
            typeof(LineHeightBehavior),
            new PropertyMetadata(default(int), OnMaxLinesPropertyChangedCallback));

    public static void SetMaxLines(TextBlock element, int value) => element.SetValue(MaxLinesProperty, value);

    public static int GetMaxLines(TextBlock element) =>(int)element.GetValue(MaxLinesProperty);

    private static void OnMaxLinesPropertyChangedCallback(
        DependencyObject d, 
        DependencyPropertyChangedEventArgs e)
    {
        if (d is TextBlock textBlock)
        {
            if (textBlock.IsLoaded)
            {
               SetLineHeight();
            }
            else
            {
                textBlock.Loaded += OnLoaded;

                void OnLoaded(object _, RoutedEventArgs __)
                {
                    textBlock.Loaded -= OnLoaded;
                    SetLineHeight();
                }
            }

            void SetLineHeight()
            {
                double lineHeight =
                   double.IsNaN(textBlock.LineHeight)
                        ? textBlock.FontFamily.LineSpacing * textBlock.FontSize
                        : textBlock.LineHeight;
                textBlock.MaxHeight = Math.Ceiling(lineHeight * GetMaxLines(textBlock));
            }
        }
    }
} 
```

默认情况下，`LineHeight`设置为`double.NaN`，因此必须先手动设置此值，否则根据`FontFamily`和计算`FontSize`高度`TextBlock`。

`MaxLines`然后可以在 a 中设置附加属性和其他相关属性`Style`：

```
<Style TargetType="{x:Type TextBlock}"
       BasedOn="{StaticResource {x:Type TextBlock}}">
    <Setter Property="TextTrimming"
            Value="CharacterEllipsis" />
    <Setter Property="TextWrapping"
            Value="Wrap" />
    <Setter Property="LineHeight"
            Value="16" />
    <Setter Property="LineStackingStrategy"
            Value="BlockLineHeight" />
    <Setter Property="behaviors:LineHeightBehavior.MaxLines"
            Value="2" />
</Style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T22:00:26.290

对于开发 UWP 或 WinRT 应用程序的任何人，您都可以设置`TextBlock`一个[`MaxLines`](https://docs.microsoft.com/en-us/uwp/api/Windows.UI.Xaml.Controls.TextBlock#Windows_UI_Xaml_Controls_TextBlock_MaxLines)属性。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-11-30T02:12:22.643

我怀疑这是可配置的，换行基于许多因素，例如字体大小/字距调整、文本块的可用宽度（horizo​​ntalalignment=stretch 可以产生很大的不同）、父面板类型（scrollviewer/stackpanel/grid）等。

如果您希望文本显式地流到下一行，则应改用“运行”块，然后对该运行块使用椭圆类型的换行。

# python - 读取文件，将文本行中的单词和数字添加到字典中？

> ID：13637816
> 
> 赞同：0
> 
> 时间：2012-11-30T01:45:10.363
> 
> 标签：python, text, dictionary, key

我正在尝试编写一个 Python 代码，它允许我接收文本并逐行阅读。在每一行中，单词只是作为键进入字典，数字应该是分配的值，作为一个列表。例如，该文件将由数百行格式相同的行组成：

> 彼得 17 29 24 284 72

理想情况下，名字“Peter”将是字典中的一个键，值是`dict[Peter]: [17, 19, 24, 284,7273]`.

到目前为止，我的问题是添加数字。我不确定如何将它们分配给键值。

```
 def wordDict(filename):
        inFile=open(filename, 'r')
        line=inFile.readline()
        while line: 
            txtWords = line.split() # splits at white space
            wordScores={} # make dict
            scoreList=[]
            for word in txtWords:
                word.lower() # turns word into lowercase
                if word in string.ascii_lowercase:   #if word is alphabetical 
                    if word not in wordScores.keys():
                        wordScores=wordScores[word] # add the key to dictionary 
```

---------- 我所拥有的一切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:08:26.583

使用 Python 3.2：

```
with open("d://test.txt", "r") as fi:  # Data read from a text file is a string
    d = {}
    for i in fi.readlines():
        # So you split the line into a list
        temp = i.split()
        # So, temp = ['Peter', '17', '29', '24', '284', '72']

        # You could split 'temp' like so:
        #    temp[0] would resolve to 'Peter'
        #    temp[1] would resolve to ['17', '29', '24', '284', '72']
        name, num = temp[0], temp[1:]

        # From there, you could make temp[0] the key and temp[1:] the value.
        # But: notice that the numbers are still represented as strings.
        # So, we use the built-in function map() to turn them into integers.
        d[name] = [map(int, num)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:49:40.987

如果你的行都以一个单词开头，然后是空格分隔的整数，你可以这样做（未经测试）：

```
myDict = {}
with open('inFile.txt','r') as inFile:
    for line in inFile:
        line = line.split()
        name = line[0].lower()
        if name not in myDict:
            myDict[name] = map(int,line[1:]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:58:49.627

我将强调您的代码的两个主要问题：

1.  `for word in string.ascii_lowercase:`和 write 一样`for 'hello' in ['a','b,'c']:`，它不会做你所期望的；并且循环永远不会运行。

2.  `wordScores = wordScores[word]`这不会向密钥添加任何内容，您可能的意思是`wordScores[word] = []`.

试试这个：

```
from collections import defauldict
words = defaultdict(list)

with open('somefile.txt') as f:
   for line in f:
      if line.strip():
         bits = line.split()
         if bits[0].isalpha():
             words[bits[0].lower()] += bits[1:] 
```

# java - 使用 OutputStream 将 PrintWriter 发送到 textArea

> ID：13637818
> 
> 赞同：1
> 
> 时间：2012-11-30T01:45:16.870
> 
> 标签：java, outputstream

我有一个程序是客户端和服务器之间的聊天程序。我根据单击的按钮设置了套接字，如下所示：

```
 public void actionPerformed(ActionEvent e)
{
    Object o = e.getSource();

    if(o==startServer)
    {
        startServer.enable(false);
        try{
            listenSocket = new ServerSocket(port);
            Socket client = listenSocket.accept();
            InputStreamReader is = new InputStreamReader(client.getInputStream());
            BufferedReader buffRdr = new BufferedReader(is);
            PrintWriter printWrt = new PrintWriter(client.getOutputStream(),true);
            service = 1;
            sendButton.enable(true);
            disconnectButton.enable(true);
            sendText.enable(true);
            more = true;
        }catch(IOException ie){
            ie.printStackTrace();
        }
    }

    if(o==connectButton)
    {
        try{
            startServer.enable(false);
            connectButton.enable(false);
            Socket server = new Socket(host,port);
            InputStreamReader is = new InputStreamReader(server.getInputStream());
            BufferedReader buffRdr = new BufferedReader(is);
            PrintWriter printWrt = new PrintWriter(server.getOutputStream(),true);
            service = 2;
            sendButton.enable(true);
            disconnectButton.enable(true);
            sendText.enable(true);
            more = true;
        }catch(IOException ie){
            ie.printStackTrace();
        }
    } 
```

我运行了该程序的两个实例，一切似乎都已连接，但我不确定程序如何知道从我设置的 sendText 文本框中获取文本。这是我设置运行的方式，但它永远不会到达 System.out.println("Service Changed") 或在程序等待服务从 0 更改后我附加“Listening to socket”的地方。

```
 while(more)
    {
        statusArea.append("Chat Running");
        String line;
        try{
            System.out.println(service);
            while(service==0 && more);
            System.out.println("Service Changed");
            if(buffRdr!=null)
            {
                statusArea.append("Listening to socket");
                while(more && (line=buffRdr.readLine())!=null)
                {
                    chatArea.append(line);
                }
            }       
        }catch(IOException e)
        {
        }
    } 
```

对此的任何帮助将不胜感激，我在java编程方面相当新

# r - correct parameters to download file using Amazon s3 API GET requests

> ID：13637825
> 
> 赞同：3
> 
> 时间：2012-11-30T01:46:37.350
> 
> 标签：r, amazon-s3, get, amazon-web-services, httr

I would like to be able to download a `.csv` file from my Amazon S3 bucket using R.

I have started using the API that is documented here [http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectGET.html](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectGET.html)

I am using the package `httr` to create the `GET` request, I just need to work out what the correct parameters are to be able to download the relevant file.

I have set the `response-content-type` to `text/csv` as I know its a `.csv` file I hope to download...but the response I get is as follows:

```
Response [https://s3-zone.amazonaws.com/bucket.name/file.name.csv?response-content-type=text%2Fcsv]
  Status: 200
  Content-type: text/csv
Date and Time,Open,High,Low,Close,Volume
2007/01/01 22:51:00,5683.00,5683.00,5673.00,5673.00,64
2007/01/01 22:52:00,5675.00,5676.00,5674.00,5674.00,17
2007/01/01 22:53:00,5674.00,5674.00,5673.00,5674.00,42
2007/01/01 22:54:00,5675.00,5676.00,5674.00,5676.00,36
2007/01/01 22:55:00,5675.00,5676.00,5675.00,5676.00,18
2007/01/01 22:56:00,5676.00,5677.00,5674.00,5677.00,64
2007/01/01 22:57:00,5678.00,5678.00,5677.00,5677.00,45
2007/01/01 22:58:00,5679.00,5680.00,5678.00,5680.00,30
 .../01/01 22:59:00,5679.00,5679.00,5677.00,5678.00,19 
```

And no file is downloaded and the data seems to be in the response...I can extract the string of characters that is created in the response, which represents the data, and I guess with some effort it can be converted into a `data.frame` as originally desired, but is there a better way of downloading the data...straight from the `GET` command, and then using `read.csv` to read the data? I think that it is a parameter issues...just not sure what parameters need to be set for the file to be downloaded.

If people suggest the conversion of the string...This is the structure of the string I have...what commands would I need to do to convert it into a `data.frame`?

```
chr "Date and Time,Open,High,Low,Close,Volume\r\n2007/01/01 22:51:00,5683.00,5683.00,5673.00,5673.00,64\r\n2007/01/01 22:52:00,5675."| __truncated__ 
```

Thanks

HLM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:14:37.273

你的第二个问题的答案：

```
> chr <- "Date and Time,Open,High,Low,Close,Volume\r\n2007/01/01 22:51:00,5683.00,5683.00,5673.00,5673.00,64\r\n"
> read.csv(text=chr)
        Date.and.Time Open High  Low Close Volume
1 2007/01/01 22:51:00 5683 5683 5673  5673     64 
```

如果你想提高 read.csv 的速度，试试这个：

```
chr <- "Date and Time,Open,High,Low,Close,Volume\r\n2007/01/01 22:51:00,5683.00,5683.00,5673.00,5673.00,64\r\n"
 read.csv(text=chr, colClasses=c("POSIXct", rep("numeric", 5) ) ) 
```

假设 URL 设置正确（我们还没有什么可以测试的）我想知道您是否想查看`GET( ...)$content`

也许：

```
infile <- read.csv(text=GET(...)$content, colClasses=c("POSIXct", rep("numeric", 5) ) ) 
```

# 编辑：

这是不正确的，因为数据以“原始”格式出现。在将其编码为文本之前，需要从原始转换。我对 Nabble 进行了快速搜索（毕竟它肯定对某些东西有好处）以找到驻留在 Web 上的 csv 文件。这就是最终奏效的方法：

```
read.csv(text=rawToChar( 
                 GET(
                  "http://nseindia.com/content/equities/scripvol/datafiles/16-11-2012-TO-16-11-2012ACCEQN.csv"
                   )[["content"]] ) )
  Symbol Series        Date Prev.Close Open.Price High.Price Low.Price Last.Price Close.Price
1    ACC     EQ 16-Nov-2012     1404.4    1410.95    1410.95   1369.45    1374.95      1378.1
  Average.Price Total.Traded.Quantity Turnover.in.Lacs Deliverable.Qty X..Dly.Qt.to.Traded.Qty
1       1393.62                132921          1852.41           56899                   42.81 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T01:58:22.600

这是一种方法：

```
library(taRifx) # for stack.list
test <- "Date and Time,Open,High,Low,Close,Volume\r\n2007/01/01 22:51:00,5683.00,5683.00,5673.00,5673.00,64\r\n2007/01/01 22:51:00,5683.00,5683.00,5673.00,5673.00,64\r\n"
stack( sapply( strsplit( test, "\\n" )[[1]], strsplit, split="," ) )

    [,1]                  [,2]      [,3]      [,4]      [,5]      [,6]      
ret "Date and Time"       "Open"    "High"    "Low"     "Close"   "Volume\r"
new "2007/01/01 22:51:00" "5683.00" "5683.00" "5673.00" "5673.00" "64\r"    
new "2007/01/01 22:51:00" "5683.00" "5683.00" "5673.00" "5673.00" "64\r" 
```

现在转换为 data.frame：

```
testdat <- stack( sapply( strsplit( test, "\\n" )[[1]], strsplit, split="," ) )
rownames(testdat) <- seq(nrow(testdat)) # Because duplicate rownames aren't allowed in data.frames
colnames(testdat) <- testdat[1,]
testdat <- testdat[-1,]
as.data.frame(testdat)
        Date and Time    Open    High     Low   Close Volume\r
2 2007/01/01 22:51:00 5683.00 5683.00 5673.00 5673.00     64\r
3 2007/01/01 22:51:00 5683.00 5683.00 5673.00 5673.00     64\r 
```

# scala - 将 null 传递给需要 Long 的方法

> ID：13637827
> 
> 赞同：5
> 
> 时间：2012-11-30T01:46:40.640
> 
> 标签：scala, scala-2.8

我有一个采用 2 个参数的 Scala 方法：

```
def test(x:Long,y:Int){} 
```

在某些情况下，我需要传递 null 而不是 long ...类似的东西：

```
test(null,x) 
```

结果：

> scala> test(null,2) :7: 错误：类型不匹配；发现：空（空）需要：长测试（空，2）

为什么我需要传递null？实际上，由于某种原因，我无法传递任何默认值。因此，我需要这样一个空值。

**注意：* *我知道解决方案将使其成为选项。但是，假设我无法控制此方法签名，我可以做任何工作吗？

有任何想法吗！

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T02:00:36.460

Null 是继承自 AnyRef 的类型的子类型，而不是继承自 AnyVal 的值类型。这就是您无法传入 null 的原因。这对应于在 java 中您不能拥有 long 类型的 null。（忽略盒装的 Long 类型）。

但是，这表明方法的签名应更改为：

```
def test(x: Option[Long], y: Int) 
```

这表明有时它对 x 没有价值。由于我们有一个很好的 Option 类来处理这个实例，所以几乎没有使用空值的正当理由，您需要依赖开发人员记住检查空值。相反，使用 Option，编译器将强制您处理该值可能不存在的事实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T03:36:53.460

由于您无法更改签名，因此请考虑[Thinking Option[Foo] 的错误是表达缺失函数参数的唯一/最自然的方式](https://stackoverflow.com/a/4238744/1296806)。

如果你的函数的参数是一个下限，那么 Long.MinValue 可能是一个自然的默认值。

如果通过“出于某种原因，我无法传递任何默认值”（无论这可能意味着什么），您的意思是您无法将默认值添加到签名中，并且您将采用另一个调整方法的答案中建议的路线，您不妨在转发之前将 f(a,b) 更改为 g(b, a=Long.MinValue) 或其他任何内容。

不要让适配器方法的客户端调用 g(b, None)，而是让它们调用 g(b)。无论如何，您都没有将 Option 传递给底层 f(a,b) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T12:19:11.973

将 scala 原语转换为 Java 包装器类的方法是使用 Java Primitive 包装器上的静态 valueOf 成员。我遇到了这个问题，我需要将 Option[Double] 转换为 java.lang.Double 或 null。这就是我所做的：

```
val value: Option[Double]
val orNull = value.map(java.lang.Double.valueOf(_)).orNull 
```

如果您正在调用接受 java.lang.Long/Double/Integer 的方法，则只需传递文字 null 即可

# java - Java main() 方法未完全运行 - 从同一应用程序运行客户端和服务器

> ID：13637829
> 
> 赞同：0
> 
> 时间：2012-11-30T01:47:05.867
> 
> 标签：java, multithreading, client-server, main, runnable

我一直在研究以下代码：

```
public class MyStuff {

    public static void main(String[] args)throws IOException {
        //System.out.println("From Test"); 
        ControlGack gack = new ControlGack();
        gack.setVisible(true);
        MainWindow mW = new MainWindow();
        mW.run(null);

        Client c = new Client();
        try {
            c.run(null);
        } catch (IOException e) {
            e.printStackTrace();
        }

        System.out.print("Stupid");
    }
} 
```

有`MainWindow`一个 while 循环，它只是在程序运行时重复。如何开始`Client`课程并与程序的其余部分同时运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T01:49:49.067

几个选项...

1.  `MainWindow`单独启动`Thread`
2.  `Client`作为单独的 Java 应用程序运行

使用新线程应该是一个非常简单的修复 - 像这样......

```
Thread t = new Thread() {
    public void run() {
        MainWindow mW = new MainWindow();
        mW.run(null);
    }
};
t.start(); 
```

或者，更好的是，将您的`MainWindow`课程更改为`extends Thread`or `implements Runnable`。如果你这样做，你可以简单地通过调用`mW.start();`而不是你当前的`mW.run(null);`方法来执行它，l 它会为你单独启动它`Thread`。

有关详细信息，请参阅[线程](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)和可[运行](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runnable.html)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:54:54.553

虽然其他人已经为您提供了所需的确切答案，但如果您以前从未使用过 Thread，我不妨给您一些开始学习 Thread 的链接：

[易于理解：线程](http://www.javabeginner.com/learn-java/java-threads-tutorial)

[Java 基础：并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

祝你好运！

# c++ - 如何使用递归 QMutex

> ID：13637830
> 
> 赞同：5
> 
> 时间：2012-11-30T01:47:18.550
> 
> 标签：c++, qt, mutex, recursive-mutex

我正在尝试使用递归 QMutex，我阅读了 QMutex 类参考，但我不明白该怎么做，有人可以举个例子吗？我需要一些方法来锁定 QMutex，可以在调用 lock 方法之后或之前解锁。如果递归互斥锁不是方法，还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T21:14:58.217

要创建递归 QMutex，您只需`QMutex::Recursive`在构造时传递，例如：

```
QMutex mutex(QMutex::Recursive);
int number = 6;

void method1()
{
    mutex.lock();
    number *= 5;
    mutex.unlock();
}

void method2()
{
    mutex.lock();
    number *= 3;
    mutex.unlock();
} 
```

`Recursive`意味着您可以从同一个线程多次锁定互斥锁，而不必解锁它。如果我能很好地理解你的问题，那就是你想要的。

请注意，如果您以递归方式锁定，则必须调用 unlock 相同的次数。锁定/解锁互斥锁的更好方法是使用[`QMutexLocker`](https://doc.qt.io/qt-5/qmutexlocker.html)

```
#include <QMutexLocker>

QMutex mutex(QMutex::Recursive);
int number = 6;

void method1()
{
    QMutexLocker locker(&mutex); // Here mutex is locked
    number *= 5;
    // Here locker goes out of scope.
    // When locker is destroyed automatically unlocks mutex
}

void method2()
{
    QMutexLocker locker(&mutex);
    number *= 3;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-10T20:20:29.227

递归互斥锁可以从单个线程多次锁定，而无需解锁，只要从同一线程进行相同数量的解锁调用即可。当一个以上的函数使用共享资源，并且其中一个函数调用另一个使用该资源的函数时，这种机制会派上用场。

考虑以下类：

```
class Foo {
  public:
    Foo();
    void bar();    // Does something to the resource
    void thud();   // Calls bar() then does something else to the resource
  private:
    Resource mRes;
    QMutex mLock;
} 
```

初始实现可能如下所示：

```
Foo::Foo() {}

void Foo::bar() {
  QMutexLocker locker(&mLock);
  mRes.doSomething();
}

void Foo::thud() {
  QMutexLocker locker(&mLock);
  bar();
  mRes.doSomethingElse();
} 
```

上面的代码将在调用 thud 时死锁。mLock 将在 thud() 的第一行获取，然后再次由 bar() 的第一行获取，这将阻塞等待 thud() 释放锁。

一个简单的解决方案是使锁在 ctor 中递归。

```
Foo::Foo() : mLock(QMutex::Recursive) {} 
```

这是一个不错的修复，并且适用于许多情况，但是应该知道使用此解决方案可能会降低性能，因为每个递归互斥锁调用可能需要系统调用来识别当前线程 ID。

除了线程 id 检查，所有对 thud() 的调用仍然执行 QMutex::lock() 两次！

需要递归的设计可以被重构以消除对递归互斥体的需要。一般来说，对递归互斥体的需求是一种“代码味道”，表明需要遵守关注点分离的原则。

对于 Foo 类，可以想象创建一个私有函数调用来执行共享计算并将资源锁定保持在公共接口级别。

```
class Foo {
  public:
    Foo();
    void bar();    // Does something to the resource
    void thud();   // Does something then does something else to the resource
  private:
    void doSomething();
  private:
    Resource mRes;
    QMutex mLock;
}

Foo::Foo() {}

// public
void Foo::bar() {
  QMutexLocker locker(&mLock);
  doSomething();
}

void Foo::thud() {
  QMutexLocker locker(&mLock);
  doSomething();
  mRes.doSomethingElse();
}

// private
void Foo::doSomething() {
  mRes.doSomething();        // Notice - no mutex in private function
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T01:54:16.760

递归模式只是意味着如果一个线程拥有一个互斥锁，并且同一个线程再次尝试锁定互斥锁，那将成功。要求是`lock/unlock`平衡的调用。

在非递归模式下，这将导致死锁。

# linq - 合并 .net MVC 4 模型中的字段，而不从 LINQ 获得“仅支持初始化程序、实体成员和实体导航属性”

> ID：13637834
> 
> 赞同：1
> 
> 时间：2012-11-30T01:48:04.953
> 
> 标签：linq, entity-framework, asp.net-mvc-4

这个问题的答案引发了另一个问题：[当类与第二个类多次相关时，如何在查询中使用 LINQ 表达式作为类的静态成员](https://stackoverflow.com/questions/13649655)

我有一个需要修改的现有 ASP.net MVC 4 站点。

本网站的核心实体是待售商品，由多家不同的公司创建并分为多个类别。我的任务是让每家公司都有自己的全局类别可选别名。在数据库和模型中设置这两个类别没有问题，使应用程序在存在时使用新的可选别名并默认为全局，否则我正在努力寻找最佳方法。

向每个 LINQ 查询添加一个合并语句显然会起作用，但是有几十个位置需要存在此逻辑，并且最好将此逻辑保留在一个位置以备不时之需。

以下代码是我尝试将合并存储在模型中，但这会导致“**仅支持初始化程序、实体成员和实体导航属性。** ”执行 LINQ 查询时抛出错误。我不确定如何使用更 LINQ 更友好的不同方法来实现类似的东西。

模型：

```
public class Item
{
    [StringLength(10)]
    [Key]
    public String ItemId { get; set; }

    public String CompanyId { get; set; }

    public Int32 CategoryId { get; set; }

    [ForeignKey("CategoryId")]
    public virtual GlobalCategory GlobalCategory { get; set; }

    [ForeignKey("CompanyId, CategoryId")]
    public virtual CompanyCategory CompanyCategory { get; set; }

    public String PreferredCategoryName
    { 
        get{
            return (CompanyCategory.CategoryAlias == null || CompanyCategory.CategoryAlias == "") ? GlobalCategory.CategoryName : CompanyCategory.CategoryAlias;
        }
    }
} 
```

控制器 LINQ 示例：

```
 var categories = (from i in db.Items
                          where i.CompanyId == siteCompanyId
                          orderby i.PreferredCategoryName
                          select i.PreferredCategoryName).Distinct();

        var itemsInCategory = (from i in db.Items
                          where i.CompanyId == siteCompanyId
                          && i.PreferredCategoryName == categoryName
                          select i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:11:42.693

一方面，您`getPreferredCategoryName`在查询中使用编译函数 ( )，除非 EF 知道如何翻译您遇到了麻烦。

在项目定义中尝试以下操作：

```
public static Expression<Func<Item,String>> PreferredCategoryName
{
    get
    {
        return i => (i.CompanyCategory.CategoryAlias == null || i.CompanyCategory.CategoryAlias == "") ? 
                     i.GlobalCategory.CategoryName : 
                     i.CompanyCategory.CategoryAlias;
    }
} 
```

使用如下：

```
var categories = db.Items.Where(i => i.CompanyID == siteCompanyId)
                         .OrderBy(Item.PreferredCategoryName)
                         .Select(Item.PreferredCategoryName)
                         .Distinct(); 
```

这应该可以工作，因为您有一个通用可用的未编译表达式树，然后 EF 可以对其进行解析。

# macos - 运行 Haskell 和 SDL 程序时出现 NSInternalInconsistencyException

> ID：13637836
> 
> 赞同：3
> 
> 时间：2012-11-30T01:48:23.433
> 
> 标签：macos, haskell, sdl, osx-mountain-lion

我正在尝试在 OSX 10.8.2、SDL 1.2.15、GHC 7.4.2、haskell SDL 绑定 0.6.4 上编译和运行一个简单的 SDL 程序：

```
import Graphics.UI.SDL as SDL

main :: IO ()
main = do
    screen <- setVideoMode 640 480 32 [SWSurface]
    hello <- loadBMP "hello.bmp"

    blitSurface hello Nothing screen Nothing

    SDL.flip screen

    delay 2000 
```

它编译（`ghc test.hs`）没有错误，但是当我尝试运行它时，我得到以下异常：

```
$ ./test 
2012-11-30 12:37:29.453 test[8995:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error (1000) creating CGSWindow on line 259'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff8cf060a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff88e813f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8cf05e7c +[NSException raise:format:] + 204
    3   AppKit                              0x00007fff87e41c29 _NSCreateWindowWithOpaqueShape2 + 655
    4   AppKit                              0x00007fff87e40420 -[NSWindow _commonAwake] + 2002
    5   AppKit                              0x00007fff87dfee62 -[NSWindow _commonInitFrame:styleMask:backing:defer:] + 1763
    6   AppKit                              0x00007fff87dfdfaf -[NSWindow _initContent:styleMask:backing:defer:contentView:] + 1568
    7   AppKit                              0x00007fff87dfd97f -[NSWindow initWithContentRect:styleMask:backing:defer:] + 45
    8   libSDL-1.2.0.dylib                  0x0000000101dc6bf6 -[SDL_QuartzWindow initWithContentRect:styleMask:backing:defer:] + 279
    9   libSDL-1.2.0.dylib                  0x0000000101dc4ac9 QZ_SetVideoMode + 2629
    10  libSDL-1.2.0.dylib                  0x0000000101dbb903 SDL_SetVideoMode + 886
    11  test                                0x0000000101b9d6b2 smJx_info + 50
)
libc++abi.dylib: terminate called throwing an exception 
```

据我了解，这与`main()`SDL 执行的 -replacement 诡计有关。我查看了其他几个使用 SDL 的 Haskell 应用程序；我设法编译的那些显示相同的行为（这可能表明我的特定配置存在一些问题）。一个例外是使用ghc 选项和一些/魔术的[Eternal10Seconds 。](http://hackage.haskell.org/package/Eternal10Seconds)这是必要的，还是有更明确的方法可以让事情顺利进行？`-no-hs-main``.c``.h`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T05:22:04.240

对不起，信息噪音，但我设法自己解决了。似乎`.c`魔法是不可避免的，但它需要一定的努力才能让它发挥作用`cabal`。基于[来自 haskell-SDL repo](http://mirror.seize.it/hsSDL/hssdl/Examples/MacOSX/)和[TimePiece](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/TimePiece/)的示例，我整理了[一个模板](https://github.com/Manticore/haskell-sdl-template)。我计划对其进行一些扩展以使其真正跨平台（因为无论如何我自己都需要它）。

# jquery - 将参数传递给 jQuery 的 select2 ajax 调用

> ID：13637841
> 
> 赞同：18
> 
> 时间：2012-11-30T01:49:07.390
> 
> 标签：jquery, ajax, jquery-select2

我正在尝试将一个额外的参数传递给 select2 中的 ajax 调用：

```
 $(".auto-sug").select2({
    width:'element',
    minimumInputLength:2,
    ajax: {
        url: "/action/get-custom.php",
        data: function (term, page) {
          return {
              q: term, // search term
              page_limit: 10
          };
        },
        results: function (data, page) {
            return {results: data.stuff};
        }
    }
  }); 
```

我实际上想将另一个参数传递给ajax调用......元素本身的id

```
<input type="text" class="auto-sug" name="custom" id="3383" /> 
```

但是，我无法弄清楚如何实际访问元素的 id (3383) 或页面上的任何其他值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-08-01T14:58:33.173

您应该在 data 函数而不是根 ajax 中传递该额外参数，以便在每次发出请求时执行它：

```
ajax: {
    url: "/action/get-custom.php",
    data: function (term, page) {
      return {
          q: term, // search term
          anotherParm: whatEverValue, //Get your value from other elements using Query, for example.
          page_limit: 10
      }; 
```

然后为了获取当前 select2 的 id，您可以替换`whateverValue`为`$(this).data(key)`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-30T05:20:32.267

假设 class 有多个元素`auto-sug`，您可以尝试以下操作：

```
$(".auto-sug").each(function() {
    var thisId = this.id;
    $(this).select2({
        ...
        ajax: {
            ...
            id: thisId,
        },
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-28T16:12:00.337

您可以在此处添加新参数。

```
 data: function (params) {
        ultimaConsulta = params.term;
        localidad = $("#idOcultoLocalidad").val(); //this is the anotherParm
        return {
            criterio: params.term, // search term
            criterio2: localidad,
        };
    }, 
```

# database - Derby 数据库 ODBC 连接

> ID：13637844
> 
> 赞同：1
> 
> 时间：2012-11-30T01:49:24.683
> 
> 标签：database, odbc, derby

我在 Netbeans 中有一个带有连接字符串的 Derby 数据库

```
jdbc:derby://localhost:1527/MyDatabase 
```

这可以与 ODBC 一起使用吗？如果是这样，我如何转换它或将我的 Derby 数据库配置为与 ODBC 兼容

最终目标是将 Derby 数据库迁移到 MySQL。在 MySQL Workbench 中使用迁移向导似乎是最简单的方法。但是我确实需要 ODBC 连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:47:21.067

您是否要使用 ODBC，因为 MySQL Workbench 使用它来迁移数据库？

我在各种引擎之间迁移了一些数据库，我最喜欢的技术是使用专门的 Python 程序转换 DDL 模式（`CREATE TABLE`等）。`CREATE VIEW`然后我使用 JDBC 和`getObject()`/`setObject()`方法来复制数据。[您可以在我对Blob 从 Informix 到 Postgres 的迁移数据的](https://stackoverflow.com/questions/12997939/blobs-migration-data-from-informix-to-postgres/13026513#13026513)响应中看到这样的复制数据库 Jython 程序（Jython 是一种使用 JVM 并且可以使用 JDBC 驱动程序的 Python 语言）。

BTW 快速搜索显示 IBM 有 Derby 的 ODBC 驱动程序（他们购买了之前购买 Cloudscape 的 Informix）：[http ://www.ibm.com/developerworks/data/library/techarticle/dm-0409cline2/](http://www.ibm.com/developerworks/data/library/techarticle/dm-0409cline2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T05:26:13.960

使用[OpenDBCopy](http://opendbcopy.sourceforge.net/)，这是一个开源数据库实用程序，可通过 JDBC 连接将数据从任何数据库迁移到任何数据库。

您可以从任何受支持的数据库中复制表结构和数据。

# jquery - Ajax 调用在 PhoneGap 上不起作用

> ID：13637850
> 
> 赞同：0
> 
> 时间：2012-11-30T01:50:40.947
> 
> 标签：jquery, ajax, cordova

出于某种原因， $.ajax() 没有被调用。它正在检测 $("#login").submit() 函数，因为我在那里确实有警报并且它调用了它。

我正在使用[http://build.phonegap.com](http://build.phonegap.com)来构建文件而不是我构建它们。

我看到这个弹出很多。但是，那里的解决方案都没有帮助我。我有这个代码：

登录.js：

```
$(window).load(function() {

$('#login').submit(function(e){
    e.preventDefault();
    obj = $(this);
    un = $("input[name='user']").val();
    pass = $("input[name='pass']").val();
    $.ajax({
        url: https+"getUserDetails",
        data: {
            username: un,
            password: pass
        },
        dataType: "jsonp",
        crossDomain: true,
        type: "POST",
        jsonpCallback: "user",
        success: function(response, textStatus, jqXHR){
            if(response.exists){
                alert(response.access_token);
                window.localStorage.setItem("user", JSON.stringify({"name": response.name, "id": response.id, "token":response.access_token}, null));
                runController();
            }
            else{
                $("#er").show();
            }
        }
    });
    return false;
});

}); 
```

配置.js：

```
addr = "domain.com"
api = "/api/v1/"
http = "http://"+addr+api
https = "https://"+addr+api 
```

配置.xml：

```
....
<access origin="*" subdomains="true" />

<feature name="http://api.phonegap.com/1.0/device" />
<feature name="http://api.phonegap.com/1.0/file" />
<feature name="http://api.phonegap.com/1.0/network" />

<preference name="phonegap-version" value="2.1.0" />
.... 
```

索引.html：

```
<!DOCTYPE html>
<html>
<head>
    ....
    <title>Sign In</title>
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/signin.js"></script>
    ....
</head>
<body>
    ....
    <form id="login" action="#">
        <h2 class="form-signin-heading">Please sign in</h2>
        <input type="text" class="input-block-level" placeholder="Email address" name="user">
        <input type="password" class="input-block-level" placeholder="Password" name="pass">
        <label class="checkbox">
          <input type="checkbox" value="remember-me"> Remember me
        </label>
        <button class="btn btn-large btn-primary" type="submit">Sign in</button>
      </form>
     ....       
    </body>
 </html> 
```

**更新 1**

以下是服务器日志显示的内容：

```
Started POST "/api/v1/getUserDetails" for .... at 2012-11-29 20:38:22 -0800
Processing by Api::V1::ApiController#user_details as JSON
Parameters: {"username"=>"user", "password"=>"[FILTERED]"}
WARNING: Can't verify CSRF token authenticity
Completed 406 Not Acceptable in 15ms (ActiveRecord: 2.9ms) 
```

**更新 2**

我在我的 API 控制器下禁用了 CSRF 令牌，因为它不需要，这是我的服务器日志在 phonegap 下进行 ajax 调用时显示的内容。

```
Started POST "/api/v1/getUserDetails" for .... at 2012-11-30 11:38:26 -0800
Processing by Api::V1::ApiController#user_details as JSON
Parameters: {"username"=>"user", "password"=>"[FILTERED]"}
Completed 406 Not Acceptable in 27ms (ActiveRecord: 0.4ms) 
```

仍然收到 406 错误。接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:51:02.947

现在我们看到了问题的根源，您必须调试 406。这里有几个链接解释了 406 的含义。

[http://www.checkupdown.com/status/E406.html](http://www.checkupdown.com/status/E406.html)

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

本质上，您需要确保您的 HTTP 请求正在发送标头，说明客户端（您的应用程序）将接受格式为服务器可以返回的响应。让客户端和服务器就格式达成一致可能需要客户端或服务器端进行更改。我对您正在使用的服务器一无所知，但您可以通过 jquery 修改 ajax 请求的 Accepts 标头，如此处所述

[http://api.jquery.com/jQuery.ajaxSetup/](http://api.jquery.com/jQuery.ajaxSetup/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:02:24.580

是在我的 Ruby on Rails 端导致了这个错误。我忘记了，因为这是移动设备，所以我将格式修改为移动设备。为了解决这个问题，我必须在 api 控制器中执行以下操作：

```
skip_before_filter :prepare_for_mobile 
```

这解决了我的问题。

# ruby-on-rails-3.2 - textarea rails3中的longtext垂直

> ID：13637851
> 
> 赞同：1
> 
> 时间：2012-11-30T01:50:45.580
> 
> 标签：ruby-on-rails-3.2

当 text_area 内容为 long 时，index.html.erb 不显示换行部分。.

例如：“Ruby on Rails 是一个框架，它使开发、部署和维护 Web 应用程序变得更加容易。在其最初发布后的几个月里，Rails 从一个不为人知的玩具变成了一种全球现象，更重要的是，它已成为实施各种所谓的 Web 2.0 应用程序的首选框架。”

在 index.html.erb 中显示 textarea 时，它显示为水平而不是水平换行

：“Ruby on Rails 是一个框架，使开发、部署和维护更容易”
换行：
“Ruby on Rails 是一个框架，使开发、
部署和维护 Web 应用程序变得更加容易”

当文本太长时，有什么解决方案可以换行吗？

# android - Android：获取设备应用程序列表 - 非常慢

> ID：13637854
> 
> 赞同：9
> 
> 时间：2012-11-30T01:50:52.060
> 
> 标签：android, list

我需要在用户打开我的应用程序后 5-10 秒内获取设备上安装的所有应用程序的列表。

这是因为，它需要大约。我的 android 应用程序的典型用户需要 5-10 秒来请求有关设备上安装的应用程序的信息。

为了相关，每次加载我的应用程序时，我都必须创建已安装应用程序列表的新副本。

但是，在四核 Android 设备上使用下面的代码需要 30 多秒，大约需要 30 秒。400 个应用程序（系统和已安装 - 我都需要）。

我在“创建时”中执行了代码，但没有人会等待 30 秒来打开应用程序。所以我把它移到了 AsyncTask，这样我的应用程序就可以立即打开。但仍然需要 +30 秒；如果有人在加载列表之前询问特定的应用程序，他们可能无法获得正确的信息。

为什么这段代码这么慢？我能做些什么来加快速度？我会用黄金支付给任何可以让它快 10 倍或给我一个好的小费的人。

```
final PackageManager pm = getPackageManager();
List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

for (ApplicationInfo packageInfo : packages) {
    InstalledAppsName.add(packageInfo.loadLabel(pm).toString());
    CountApps=CountApps+1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T17:00:49.577

请参阅[PackageInfo LoadLabel 性能缓慢](https://stackoverflow.com/questions/13659156/packageinfo-loadlabel-slow-performance)

获取标签需要很长时间，因为（我认为）它需要从 APK 加载。同时，您可以只显示包名称并逐步将其替换为标签。

# c# - .NET 缓存滑动过期如何工作？

> ID：13637856
> 
> 赞同：57
> 
> 时间：2012-11-30T01:51:07.397
> 
> 标签：c#, .net, caching

如果我使用 ObjectCache 并添加这样的项目：

```
ObjectCache cache = MemoryCache.Default;
string o = "mydata";
cache.Add("mykey", o, DateTime.Now.AddDays(1)); 
```

我了解该对象将在 1 天后到期。但是如果对象在一天后被访问 1/2 使用：

```
object mystuff = cache["mykey"]; 
```

这是否会重置计时器，因此距上次使用“mykey”键访问条目已有 1 天，还是仍为 1/2 天，直到到期？

如果答案是否定的，是否有办法做到这一点，我很想知道。

谢谢。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-11-30T02:02:02.723

您可以使用两种类型的缓存策略：

[`CacheItemPolicy.AbsoluteExpiration`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.cacheitempolicy.absoluteexpiration.aspx)将在设定的时间后使条目过期。

[`CacheItemPolicy.SlidingExpiration`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.cacheitempolicy.slidingexpiration.aspx)如果在设定的时间内未访问该条目，则该条目将过期。

您使用的`ObjectCache Add()`超载将其视为绝对过期，这意味着它将在 1 天后过期，无论您访问多少次。您需要使用其他[重载](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.add.aspx)之一。以下是您设置滑动到期的方式（它有点复杂）：

```
CacheItem item = cache.GetCacheItem("item");

if (item == null) {

    CacheItemPolicy policy = new CacheItemPolicy {
        SlidingExpiration = TimeSpan.FromDays(1)
    }

    item = new CacheItem("item", someData);

    cache.Set(item, policy);
} 
```

您将 TimeSpan 更改为所需的适当缓存时间。

* * *

## 回答 #2

> 赞同：-10
> 
> 时间：2016-06-01T12:35:22.773

SlidingExpiration 属性值是使用配置元素的slidingExpiration 属性设置的。如果发出请求并且超过一半的超时间隔已经过去，则滑动到期会重置有效身份验证 cookie 的到期时间。如果 cookie 过期，用户必须重新认证。将 SlidingExpiration 属性设置为 false 可以通过根据配置的超时值限制身份验证 cookie 的有效时间来提高应用程序的安全性。我们建议，如果您将 requireSSL 配置为 false，您还可以将 slipExpiration 配置为 false，以减少票证的有效时间。

# android - 通过 USB 在 Android 设备和 PC（Mac 或 Windows）之间进行双向数据传输

> ID：13637858
> 
> 赞同：1
> 
> 时间：2012-11-30T01:51:40.253
> 
> 标签：android, usb

我是 Android 编程新手。我需要通过 USB 在 Android 平板电脑和 PC（Mac 或 Windows）之间双向传输数据。Android 平板电脑将配备 Android 4.0 或更高版本。Mac 将配备 OS X Lion 或更新版本，Windows 将配备 Windows XP 或更新版本。

在此处阅读有关 Android 对 USB 连接的支持后：http: [//developer.android.com/guide/topics/connectivity/usb/index.html](http://developer.android.com/guide/topics/connectivity/usb/index.html)

我在想，如果我让 Android 平板电脑在 USB 附件模式下运行并将 PC 作为主机，那么通过 USB 进行的双向数据传输就可以工作。这种想法是正确的还是我离这儿很远？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:09:48.683

您最好的选择可能是 ADB 推/拉文件（假设这是您想要传输的内容）。您的 Windows 端应用程序将 adb 和 AdbWinApi.dll 作为资产，而 OSX 版本将具有 Mac OS ADB 二进制文件......有明显的缺点，例如必须在设备上启用开发人员选项，并且可能来自主机上预先存在的 Android SDK 副本（通常不太可能，但可能！）

更高级：根据环境，您甚至可能希望考虑从源代码构建您自己的 ADB 版本，省略不必要的功能。

# sql - SQL 单列表

> ID：13637865
> 
> 赞同：0
> 
> 时间：2012-11-30T01:52:46.557
> 
> 标签：sql, database, data-modeling, erd

我有一个模型，其中一个 Shipment 可以通过`product_shipments`查找表包含许多产品。
Shipment 模型还具有一种关系，其中一个货件可以有一对多的`bill_of_lading`数字。

只为 field 创建一个新表是否合适`one bill_of_lading`？大多数情况下，一批货物只有**一个** `bill_of_lading number`，但通常一批货物将包含**2 个**或**更多**。

除了数字之外，没有其他`bill_of_lading`需要跟踪的属性。

处理这种情况的正确方法是什么？ **规范化规则**会建议将其拉到自己的表中，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:01:45.813

是的，我建议您做与 Shipment 和 Products 相同的事情，即创建新表。这是一种正确的方法，您以后可以更轻松地查询，甚至在需要时更改表结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:16:23.587

好吧，它不会只有一列，而是有两列……一个装运 ID 和一个 bill_of_lading 编号。有一个只有这两个字段的表可能是正确的。如果您可以将产品明确划分为单独的提单，则创建包含 bill_of_lading、装运和产品的字段也可能是正确的。这实际上取决于提单和产品之间的关系。

# mysql - 删除 MySQL 中字符串集的第一个成员

> ID：13637866
> 
> 赞同：0
> 
> 时间：2012-11-30T01:53:02.627
> 
> 标签：mysql, string, set

假设我有一个字符串集 {'15, 1, 5, 4'} 存储在 MySQL 变量中。有没有办法在不知道第一个逗号出现的索引的确切位置的情况下从集合中只删除“15”？

这意味着如果在第一个位置有另一组具有不同长度的成员，它应该也可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:00:32.243

```
select Mid('15, 1, 5, 4',locate(',','15, 1, 5, 4')+1) 
```

# class - 创建 TAB 并创建在 TAB 页面中获取数据的文本框

> ID：13637871
> 
> 赞同：1
> 
> 时间：2012-11-30T01:53:38.820
> 
> 标签：class, tabs, textbox, pyqt

我在 PyQt 工作。现有代码（非常长并且几乎所有 org.'ss/w 的来源）都有负责创建选项卡和文本框的部分。但是，作为 PyQt 的新手，我不清楚它是如何工作的。就我而言，我需要执行以下操作： (1) 在所有其他选项卡的行内创建一个标题为“xyz”的选项卡。(2) 在创建的 TAB 显示的页面中创建 6 个带有单独标签的文本框，用户可以在其中输入数据并保存。

这是我现在必须处理的两个直接问题。之后，

输入并保存文本框中的数据后，在文本框中输入的数据将替换条形图（在另一个窗口中）中的数据。这将在之后完成，但首先我需要解决上面列出的 2 个问题。导入都在（长）代码中，我必须在该代码中插入我的新代码 - 也许通过创建一个新类。你能帮我吗？谢谢。而且，如果您需要任何信息来解决这个问题，请告诉我。 ![创建 TAB+文本框](../Images/bb23964329c88bc2245f98fa91089bee.png)

编辑::::::::::: 已插入下面的图像。如您所见，在左窗格的顶部，一行中有多个选项卡（全部在 PyQt 中制作）。我需要创建一个与最后一个类似的选项卡（此处为“激励”），其中包含一个空白页面，如选项卡下方所示。在页面中，我需要创建 2 组文本框，每组 3 个文本框，其中包含用于组和单个文本框的标签。在框中输入的数据将是整数 (20)，然后数据将继续填充/更新动态堆叠条形图。在这一点上，我想问另一个问题。数据更新图时，是先保存在DB（主要负责图中初始图的DB）再路由到图，还是数据直接更新图，绕过DB，如果所以，不会的 t 图形恢复到其先前的值，并在重置后忘记文本框中的数据。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:31:39.177

好的。在这里，您有一个代码，您可以将其用作您自己开发的起点。它创建一个`QTabWidget`带有两个选项卡的。“Tab 1”选项卡包含带有两个组框的垂直布局。组框包含按网格排列的标签和文本框。另一个选项卡是空的。

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyMainWindow(QMainWindow):
    def __init__(self, parent=None):
        QMainWindow.__init__(self, parent)

        # Create the tabbed widget
        self.central = QTabWidget(self)
        self.setCentralWidget(self.central)

        # Create a new tab
        self.tab1 = QWidget()
        # Tab has a vertical layout
        self.vbox = QVBoxLayout(self.tab1)
        # Tab children: two groups containing a grid of labels and textboxes
        self.group1 = QGroupBox("Group 1")
        self.textBox1 = QLineEdit(self.group1)
        self.textBox2 = QLineEdit(self.group1)
        self.fillGroup(self.group1, self.textBox1, self.textBox2)
        self.group2 = QGroupBox("Group 2")
        self.textBox3 = QLineEdit(self.group2)
        self.textBox4 = QLineEdit(self.group2)
        self.fillGroup(self.group2, self.textBox3, self.textBox4)
        # Add tab children to the tab layout
        self.vbox.addWidget(self.group1)
        self.vbox.addWidget(self.group2)
        # Append tab to the tabbed widget
        self.central.addTab(self.tab1, "Tab 1")

        # Create a new tab and append it to the tabbed widget
        self.tab2 = QWidget()
        self.central.addTab(self.tab2, "Tab 2")

    def fillGroup(self, group, box1, box2) :
        """Arrange the groupbox content in a grid layout"""

        grid = QGridLayout(group)
        label1 = QLabel("Input 1:", group)
        grid.addWidget(label1, 0, 0)
        grid.addWidget(box1, 0, 1)
        label2 = QLabel("Input 2:", self.group1)
        grid.addWidget(label2, 1, 0)
        grid.addWidget(box2, 1, 1)

if __name__ == "__main__":
    import sys
    app = QApplication(sys.argv)
    ui = MyMainWindow()
    ui.show()
    sys.exit(app.exec_()) 
```

请注意，为方便起见，我使用 a`QMainWindow`作为选项卡式小部件的父级。显然，如果需要，您可以使用其他小部件作为父小部件。

希望能帮助到你。

# macos - 在 OS X 的 Sublime Text 2 中，如何将键盘快捷键 ctrl-shift-k（删除行）重新映射到 ctrl-k

> ID：13637876
> 
> 赞同：1
> 
> 时间：2012-11-30T01:54:14.257
> 
> 标签：macos, sublimetext2, sublimetext

我通过系统偏好设置>键盘作为文本>删除行并将其映射到ctrl-k，但它只删除了我当前所在的行，从我的闪烁光标所在的位置到行尾。

```
If this were in Sublime, pressing ctrl-k would delete from here| out. 
```

如果闪烁的光标是`|`，它将从那里删除到行尾。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T04:35:02.120

在您的用户密钥绑定文件中，创建以下条目（可通过 访问`Preferences -> Key Bindings - User`）。`Default (OSX).sublime-keymap`这将在您的用户文件夹中创建一个名为 的文件。

```
[
    { "keys": ["ctrl+k"], "command": "run_macro_file", "args": {"file": "Packages/Default/Delete Line.sublime-macro"} }
] 
```

顺便说一句，如果您想重新映射当前的键绑定，请检查`Preferences -> Key Bindings - Default`. 您可以搜索组合键，并查看相关的命令和参数。然后，您可以使用您选择的组合键和相同的命令在用户定义的键映射中创建一个条目。从而重新映射以匹配您自己的个人喜好。当然，这不仅仅适用于默认包，但对于插件键绑定，您需要在相应的包文件夹中查找键映射命令。

希望有帮助！

# regex - Notepad++正则表达式替换

> ID：13637877
> 
> 赞同：1
> 
> 时间：2012-11-30T01:54:16.177
> 
> 标签：regex, notepad++

我需要替换`get_option('any_letter_number')`为`$options_css['any_letter_number']`在 Notepad++ 中，我可以匹配我需要的内容，`get_option\('.*?'\)`但替换它`$options_css\['.*?'\]`不起作用。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:56:23.630

在正则表达式替换中，您使用`$1`来引用捕获的子模式。

```
get_option\('(.*?'\)
// replace with:
$options_css['$1'] 
```

# wix - Windows（卸载）安装程序对话框未本地化

> ID：13637879
> 
> 赞同：0
> 
> 时间：2012-11-30T01:54:27.190
> 
> 标签：wix, windows-installer, uninstallation

在中文 (CHS) 版本的 Windows（XP、7，可能还有其他）上，当您卸载我们的产品时，标准的 Windows 卸载进度对话框以**英文**（未本地化）出现。随着卸载的进行，对话框刷新并且文本以中文显示。

我们为各种语言提供了转换，如果您在 Orca 中手动应用我们的 CHS 转换，ProductLanguage（在属性表中）会按预期从 1033 更改为 1028。

我是这个东西的新手，所以我不明白未本地化字符串的初始显示是否是微软卸载程序中的一个已知错误，或者我们做错了什么。

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:11:50.080

您无法从您的 MSI 包中真正影响该对话框 - 它是一个系统对话框，它仅取决于当前的显示语言 ( `Region and Language >> Keyboards and Languages >> Choose a display language`)。因此，如果您确定显示语言是正确的，但您仍然会在一开始看到英文文本 - 那么这就是系统的工作方式。

# symfony - Symfony2：在块内渲染导致重复的子请求

> ID：13637881
> 
> 赞同：3
> 
> 时间：2012-11-30T01:54:45.570
> 
> 标签：symfony, twig

我有一个 Sf2 应用程序，它带有一个扩展布局的树枝模板。在模板内部，我想使用 twig 的`render`标签填充一个块。不幸的是，该`render`标签会导致**两个**子请求，而不是预期的单个请求。但是，如果我将`render`标签**放在**块之外，一切正常*。

*当然，除了结果只是在页面顶部而不是在块内呈现，但这只是一个额外的子请求。

***`render`当且仅当标签放置在一个块中时，什么可能导致发出两个子请求？***

* * *

# 肮脏的细节

在布局中有一个额外的导航菜单（`topmenu`）块：

*布局.twig.html*

```
 <div class="row" id="secondary-nav">
                <div class="span12">
                    {% block topmenu %}{% endblock %}
                </div>
            </div> 
```

## 重复子请求示例

这是我的观点，它使用标签通过向“导航”控制器发出子请求来`{% render ... %}`填充块：`topmenu`

*index.html.twig*

```
{% extends "FooBundle::layout.html.twig" %}

{% block topmenu %}
     {% render "FooBundle:Navigation:index" with { 'active': 'feedback' } %}
{% endblock %} 
```

到目前为止，一切都很好，但是这样做子请求由于某种未知原因被发出**了两次。**它没有显示两次，但我看到 SQL 查询计数增加了，symfony2 分析器也显示了两个相同的子请求。

## 单个子请求示例

如果我将`{% render ... %}`标签放在这样的任何块之外，它只会导致一个子请求：

*index.html.twig*

```
{% extends "FooBundle::layout.html.twig" %}

{% render "FooBundle:Navigation:index" with { 'active': 'feedback' } %}

{% block topmenu %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T09:37:51.173

纳尔夫！最后，在这个问题上花费了 X 小时后，我发现我在我的 中检查了`layout.html.twig`该`topmenu`块是否有任何内容：

```
{% if block('topmenu') %} ... {% endif %}
...
{% block topmenu %}{% endblock %} 
```

这导致了第二个不需要的子请求。

**使固定**

为了仍然能够检查内容但不请求两次，我首先将块加载到变量中，然后输出变量而不是使用`{% block topmenu ...%}`：

```
{% set topmenu = block('topmenu') %}
{% if topmenu %} ... {% endif %}
{{ topmenu | raw }} 
```

幸运的是，我真的不需要扩展块，它只是一个占位符。

# java - 强制 Java 方法返回类型以适应某些通用签名

> ID：13637882
> 
> 赞同：3
> 
> 时间：2012-11-30T01:54:52.737
> 
> 标签：java, generics, methods, return-type

假设我有这个界面：

```
interface Foo<T extends Foo<T>> { // ... } 
```

以及以下三个实现它的类：

```
class TrueFoo  implements Foo<TrueFoo > { // ... }

class FalseFoo implements Foo<FalseFoo> { // ... }

class WrongFoo implements Foo<FalseFoo> { // ... }
//                            ^^^^^^^^ this here is wrong, only 
//                                     Foo<WrongFoo> should be allowed 
```

以下方法的方法签名需要什么来强制我可以返回 TrueFoo 或 FalseFoo 类型的对象，但不能返回 WrongFoo...

```
public ???? getFoo(boolean which) {
    return which ? new TrueFoo() : new FalseFoo();
} 
```

以下不起作用：

*   这使我还可以返回一个新的 WrongFoo()：

    ```
    public Foo<?> getFoo(boolean which) {
        return which ? new TrueFoo() : new FalseFoo();
    } 
    ```

*   这不允许我返回任何东西*（解释如下）*：

    ```
    public <FooType extends Foo<FooType>> FooType getFoo(boolean which) {
        return which ? new TrueFoo() : new FalseFoo();
    } 
    ```

    问题是 FooType 的类型是由我调用函数的上下文决定的，`getFoo()`而不是由我实际尝试返回的对象决定的。

*顺便说一句，在调用*方法时强制执行此签名很容易：

```
public <FooType extends Foo<FooType>> void test(FooType foo) {
    // Do something with foo
} 
```

如果您尝试使用 WrongFoo 的实例调用它，这将给您一个绑定不匹配错误。

让我认为应该有一种方法可以对方法返回类型执行此操作。

或者有没有办法在 Foo 的接口定义中强制执行这个签名？

**编辑：**

为了帮助可视化这个界面应该做什么，你可以考虑这个版本：

```
interface CanCopy<Type extends CanCopy<Type>> {
    public Type copy();
} 
```

显然， like 类`Foo implements CanCopy<Bar>`没有任何意义，只有`Foo implements CanCopy<Foo>`or `Bar implements CanCopy<Bar>`。

**编辑2：**

正如存在解决方案的概念验证一样，我可以为自己定义以下帮助程序类：

```
class FooResult {
    private final Foo<?> foo;

    public <FooType extends Foo<FooType>> FooResult(FooType foo) {
        this.foo = foo;
    }

    @SuppressWarnings("unchecked")
    public <FooType extends Foo<FooType>> FooType getFoo() {
        return (FooType) foo;
    }
} 
```

然后我可以要求我的 getFoo 方法是这种类型：

```
public FooResult getFoo(boolean which) {
    return which ? new FooResult(new TrueFoo()) : new FooResult(new WrongFoo());
} 
```

这样，我将无法从我的 get 方法返回 WrongFoo。

但是，很明显，这有点太复杂了，不能像 Java 泛型通常倾向于编写代码那样优雅（根据我的经验）......那么，这可以以某种方式缩短吗？

**编辑 3：**

我找到了另一种方法来为实现接口的人提供检查，方法是这样定义：

```
interface Foo<FooType extends Foo<FooType>> { 
    // Other interface definitions

    /**
     * Please implement with just this line in it:<br/><br/>
     * &nbsp;&nbsp;&nbsp;&nbsp;<code>return this;</code>
     * @return <code>this</code>
     */
    public FooType returnThis();
} 
```

现在，如果有人试图实现上述 WrongFoo 类，他将必须提供该方法`FalseFoo returnThis()`，如果他只是`return this`按照 doctype 中的要求实现它，该行将引发错误。

这不是保证，但它是一个非常好的虚拟检查，可以防止因粗心复制类而产生的错误......而且在无论如何都需要带有此签名的消息的情况下，这将是一个很好的解决方案。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:24:01.840

您遇到的泛型问题是症状，而不是问题：您要求您的界面依赖于您的具体实现。如果您希望 getFoo 接口方法返回不是 WrongFoo 的内容，则必须返回 TrueFoo 或 FalseFoo 但不是 WrongFoo 的内容。您的类层次结构没有这种特定的间接性。

要添加它，您需要执行以下操作：

```
class TrueFoo extends SpecialFoo {...}

class FalseFoo extends SpecialFoo {...}

class WrongFoo implements Foo<WrongFoo> {...}

class SpecialFoo implements Foo<SpecialFoo> {  
  SpecialFoo getFoo() {...}
} 
```

请记住，Java 支持协变返回类型，因此通过返回 SpecialFoo 我们可以实现在 Foo 接口中创建的协定：`Foo getFoo() {...}`

如果您需要特定于 TrueFoo 和 FalseFoo 的行为，您可以进一步参数化 SpecialFoo，等等，[海龟一直向下](http://en.wikipedia.org/wiki/File%3aTurtlesAllTheWayDown2.png)。

**编辑：**

阅读您的编辑后，我不相信您要完成的工作得到该语言的支持。似乎您想根据具体实现来约束接口，根据定义，这将使其不是接口。我认为以下示例与您要查找的内容一样接近：

```
interface CanCopy<T extends CanCopy<T>> {
       T copy();
}

interface FooCanCopy extends CanCopy<Foo> {
}

interface BarCanCopy extends CanCopy<Bar> {
}

class Foo implements FooCanCopy {

    public Foo copy() {
        return null;
    }
}

class Bar implements BarCanCopy {

    public Bar copy() {
        return null;
    }
} 
```

我希望现在清楚为什么这种方法不起作用，即使在这里你仍然不能阻止某人做类似的事情`class Baz implements FooCanCopy`。我会更想知道你为什么要这样做？如果它是为了保护开发人员不犯错误，可能还有其他选择，即内省单元测试或打包更改。

# python - 在数组 Pyplot 中绘制特定范围的值

> ID：13637885
> 
> 赞同：1
> 
> 时间：2012-11-30T01:55:14.373
> 
> 标签：python, matplotlib, scipy

我想使用 matplotlib 在 2 个数组中绘制一定范围的值，

```
seconds = 200
dt = .001
x = array of values
time = arange(0, seconds, dt) 
```

目标是在前 25 秒后绘制所有内容。我知道我可以使用 for 循环创建 2 个新数组，但我确信有一些简单的内置函数可用于此类事情。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:18:31.557

解决了。写作

```
time[a:b] 
```

将为您提供 time[a] 和 time[b] 之间所有值的数组。

# python - openpyxl 请不要在导入时将文本假定为数字

> ID：13637888
> 
> 赞同：6
> 
> 时间：2012-11-30T01:56:01.643
> 
> 标签：python, excel, openpyxl

关于如何阻止 Excel 将文本解释为数字，或如何使用 openpyxl 输出数字格式存在许多问题，但我还没有看到任何解决此问题的方法：

我有一个别人给我的 Excel 电子表格，所以我没有创建它。当我用 Excel 打开文件时，我有某些值，如“5E12”（克隆数字，如果有人关心的话）似乎正确显示，但每个值旁边都有一个绿色小箭头警告我“这似乎是一个数字存储为文本”。Excel 然后询问我是否要将其转换为数字，如果我看到是，我得到 5000000000000，然后它会自动转换为科学计数法并再次显示 5E12，只有这一次文本输出会显示带有零的完整数字. 请注意，在转换之前，这实际上是文本，甚至是 Excel，我只是被警告/提供转换它。

因此，当使用 openpyxl（从 openpyxl.reader.excel 导入 load_workbook）读取此文件时，5E12 会自动转换为 5000000000000。我假设 openpyxl 与 Excel 所做的假设相同，只有转换发生时没有提示或我的输入。

我怎样才能防止这种情况发生？我不希望看起来像“存储为文本的数字”的文本转换为数字。除非我这么说，否则它们是文本。

到目前为止，我发现的唯一解决方案是在每个单元格的前面添加单引号，但这不是一个理想的解决方案，因为它是手工劳动而不是编程解决方案。此外，解决方案必须是通用的，因为我并不总是知道这个问题可能发生在哪里（我每天要阅读数百万行，所以我不想手动做任何事情）。

我*认为*这是 openpyxl 的问题。2011 年初有一个谷歌小组讨论提到了这个问题，但认为它太罕见了。[https://groups.google.com/forum/?fromgroups=#!topic/openpyxl-users/HZfpShMp8Tk](https://groups.google.com/forum/?fromgroups=#!topic/openpyxl-users/HZfpShMp8Tk)

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:48:38.167

如果您想`openpyxl`再次使用（无论出于何种原因），对工作表阅读器例程的以下更改可以将字符串保留为字符串：

差异 --git a/openpyxl/reader/worksheet.py b/openpyxl/reader/worksheet.py

```
--- a/openpyxl/reader/worksheet.py
+++ b/openpyxl/reader/worksheet.py
@@ -134,8 +134,10 @@
             data_type = element.get('t', 'n')
             if data_type == Cell.TYPE_STRING:
                 value = string_table.get(int(value))
-
-            ws.cell(coordinate).value = value
+                ws.cell(coordinate).set_value_explicit(value=value,
+                                                data_type=Cell.TYPE_STRING)
+            else:
+                ws.cell(coordinate).value = value

         # to avoid memory exhaustion, clear the item after use
         element.clear() 
```

这`Cell.value`是一个属性和赋值调用`Cell._set_value`，然后`Cell.bind_value`根据方法的文档执行一个 which：“给定一个值，推断类型和显示选项”。由于值的类型在 XML 文件中，因此应该采用这些类型（这里我只对字符串这样做）而不是做一些“智能”的事情。

从代码中可以看出，是否是字符串的测试已经存在。

# makefile - 制作和制作安装

> ID：13637891
> 
> 赞同：0
> 
> 时间：2012-11-30T01:56:30.860
> 
> 标签：makefile

我对软件进行了一些更改，当我尝试进行 make 和 make install 时，这些更改并未实施。我得到的代码的输出是旧代码的输出。我没有在其他地方进行任何更改。那么问题可能出在哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:51:28.313

也许你可以试试

```
make clean
make
make install 
```

# algorithm - 为 iTunes 11 中的歌曲列表着色的算法如何工作？

> ID：13637892
> 
> 赞同：300
> 
> 时间：2012-11-30T01:56:32.913
> 
> 标签：algorithm, user-interface, itunes

新的 iTunes 11 有一个非常好的专辑歌曲列表视图，在专辑封面功能中为字体和背景选择颜色。有人知道算法是如何工作的吗？

![第三个例子](../Images/2b11d8f9841cc63f1cf987e4dae9b760.png)

* * *

## 回答 #1

> 赞同：423
> 
> 时间：2012-12-03T01:07:40.597

![示例 1](../Images/0f4485f6f6b02944042aa24d0f6f9293.png)

给定专辑封面作为输入，我在 Mathematica 中近似了 iTunes 11 颜色算法：

![输出 1](../Images/c24b0621879a983fc7d65215bf2dff4b.png)

## 我是怎么做到的

通过反复试验，我提出了一种算法，该算法适用于我测试过的大约 80% 的专辑。

### 颜色差异

该算法的大部分处理寻找图像的主色。然而，找到主色的先决条件是计算两种颜色之间的可量化差异。计算两种颜色之间差异的一种方法是计算它们在 RGB 颜色空间中的欧几里得距离。然而，人类的颜色感知与 RGB 颜色空间中的距离并不能很好地匹配。

因此，我编写了一个函数来将 RGB 颜色（以 形式`{1,1,1}`）转换为[YUV](http://en.wikipedia.org/wiki/YUV)，这是一种在近似颜色感知方面要好得多的颜色空间：

[（编辑：[@cormullion](https://stackoverflow.com/users/933113/cormullion)和[@Drake](https://stackoverflow.com/users/261718/drake)指出 Mathematica 的内置 CIELAB 和 CIELUV 颜色空间同样适用……看起来我在这里重新发明了轮子）]

```
convertToYUV[rawRGB_] :=
    Module[{yuv},
        yuv = {{0.299, 0.587, 0.114}, {-0.14713, -0.28886, 0.436},
            {0.615, -0.51499, -0.10001}};
        yuv . rawRGB
    ] 
```

接下来，我编写了一个函数来使用上述转换计算颜色距离：

```
ColorDistance[rawRGB1_, rawRGB2_] := 
    EuclideanDistance[convertToYUV @ rawRGB1, convertToYUV @ rawRGB2] 
```

### 主色

我很快发现内置的 Mathematica 函数`DominantColors`不允许足够细粒度的控制来近似 iTunes 使用的算法。我写了自己的函数......

计算一组像素中的主色的一种简单方法是将所有像素收集到颜色相似的桶中，然后找到最大的桶。

```
DominantColorSimple[pixelArray_] :=
    Module[{buckets},
        buckets = Gather[pixelArray, ColorDistance[#1,#2] < .1 &];
        buckets = Sort[buckets, Length[#1] > Length[#2] &];
        RGBColor @@ Mean @ First @ buckets
    ] 
```

[请注意，这`.1`是必须将不同颜色视为不同颜色的容差。另请注意，虽然输入是原始三元组形式 ( ) 的像素数组，但`{{1,1,1},{0,0,0}}`我返回一个 Mathematica`RGBColor`元素以更好地逼近内置`DominantColors`函数。]

我的实际功能添加了在过滤掉给定的其他颜色后`DominantColorsNew`返回主色的选项。`n`它还公开了每种颜色比较的公差：

```
DominantColorsNew[pixelArray_, threshold_: .1, n_: 1, 
    numThreshold_: .2, filterColor_: 0, filterThreshold_: .5] :=
    Module[
        {buckets, color, previous, output},
        buckets = Gather[pixelArray, ColorDistance[#1, #2] < threshold &];
        If[filterColor =!= 0, 
        buckets = 
            Select[buckets, 
                ColorDistance[ Mean[#1], filterColor] > filterThreshold &]];
        buckets = Sort[buckets, Length[#1] > Length[#2] &];
        If[Length @ buckets == 0, Return[{}]];
        color = Mean @ First @ buckets;
        buckets = Drop[buckets, 1];
        output = List[RGBColor @@ color];
        previous = color;
        Do[
            If[Length @ buckets == 0, Return[output]];
            While[
                ColorDistance[(color = Mean @ First @ buckets), previous] < 
                    numThreshold, 
                If[Length @ buckets != 0, buckets = Drop[buckets, 1], 
                    Return[output]]
            ];
            output = Append[output, RGBColor @@ color];
            previous = color,
            {i, n - 1}
        ];
        output
    ] 
```

### 算法的其余部分

首先，我调整了专辑封面 ( `36px`, `36px`) 的大小并使用双边过滤器减少了细节

```
image = Import["http://i.imgur.com/z2t8y.jpg"]
thumb = ImageResize[ image, 36, Resampling -> "Nearest"];
thumb = BilateralFilter[thumb, 1, .2, MaxIterations -> 2]; 
```

iTunes 通过查找专辑边缘的主要颜色来选择背景颜色。但是，它通过裁剪图像忽略了狭窄的专辑封面边框。

```
thumb = ImageCrop[thumb, 34]; 
```

接下来，我沿着图像的最外边缘找到了主色（使用上面的新函数），默认容差为`.1`.

```
border = Flatten[
    Join[ImageData[thumb][[1 ;; 34 ;; 33]] , 
        Transpose @ ImageData[thumb][[All, 1 ;; 34 ;; 33]]], 1];
background = DominantColorsNew[border][[1]]; 
```

最后，我在整个图像中返回了 2 种主色，告诉函数也过滤掉背景色。

```
highlights = DominantColorsNew[Flatten[ImageData[thumb], 1], .1, 2, .2, 
    List @@ background, .5];
title = highlights[[1]];
songs = highlights[[2]]; 
```

[上面的公差值如下：`.1`是“分离”颜色之间的最小差异；`.2`是众多主色之间的最小差异（较低的值可能会返回黑色和深灰色，而较高的值可确保主色的更多多样性）；`.5`是主色和背景之间的最小差异（较高的值将产生较高对比度的颜色组合）]

*瞧！*

```
Graphics[{background, Disk[]}]
Graphics[{title, Disk[]}]
Graphics[{songs, Disk[]}] 
```

![最终输出](../Images/7a01b3893498c2b202d51206bf10e816.png)

### 笔记

该算法可以非常普遍地应用。我调整了上述设置和容差值，使其能够为我测试的大约 80% 的专辑封面生成通常正确的颜色。当`DominantColorsNew`没有找到两种颜色来返回高亮时（即专辑封面是单色时），会出现一些边缘情况。我的算法没有解决这些情况，但复制 iTunes 的功能将是微不足道的：当专辑产生少于两个亮点时，标题会根据与背景的最佳对比度变为白色或黑色。然后歌曲成为一种突出显示颜色（如果有的话），或者标题颜色稍微淡入背景。

## 更多示例

![更多示例](../Images/7ed002e8e30f4f21e5b28f7cd4fa40d8.png)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-12-12T03:03:45.700

在@Seth-thompson 的回答和@bluedog 的评论下，我构建了一个小的Objective-C（Cocoa-Touch）项目来生成图像功能的配色方案。

您可以在以下位置查看项目：

[https://github.com/luisespinoza/LEColorPicker](https://github.com/luisespinoza/LEColorPicker)

目前，LEColorPicker 正在做：

1.  图像缩放为 36x36 像素（这减少了计算时间）。
2.  它从图像生成像素阵列。
3.  将像素数组转换为 YUV 空间。
4.  像 Seth Thompson 的代码那样收集颜色。
5.  颜色的集合按计数排序。
6.  该算法选择三种最主要的颜色。
7.  最主要的被指定为背景。
8.  使用 w3c 颜色对比度公式测试第二和第三个主要颜色，以检查颜色是否与背景有足够的对比度。
9.  如果其中一种文本颜色未通过测试，则根据 Y 分量分配为白色或黑色。

就目前而言，我将检查 ColorTunes 项目 ( [https://github.com/Dannvix/ColorTunes](https://github.com/Dannvix/ColorTunes) ) 和 Wade Cosgrove 项目的新功能。我也有一些改进配色方案结果的新想法。

![截图_Mona](../Images/56fb177d5f244fa97c2280abf2246ef6.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-11T20:43:50.860

Panic 的 Wade Cosgrove 写了一篇[不错的博客文章](http://www.panic.com/blog/2012/12/itunes-11-and-colors/)，描述了他实现的一种算法，该算法近似于 iTunes 中的算法。它包括一个在 Objective-C 中的示例实现。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-12-09T22:03:37.260

您还可以查看[ColorTunes](https://github.com/Dannvix/ColorTunes)，它是使用 MMCQ（中值剪切颜色量化）算法的 Itunes 专辑视图的 HTML 实现。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-12-03T17:40:43.733

[**我刚刚编写了一个 JS 库，实现了与@Seth**](https://stackoverflow.com/a/13675803/880703)描述的算法大致相同的算法。它在[github.com/arcanis/colibrijs](https://github.com/arcanis/colibrijs/)和 NPM上免费提供`colibrijs`。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-31T21:34:17.100

通过@Seth 的回答，我实现了算法，以使用 PHP 和 Imagick 在图片的两个横向边框中获取主色。

[https://gist.github.com/philix/5688064#file-simpleimage-php-L81](https://gist.github.com/philix/5688064#file-simpleimage-php-L81)

它被用来填充[http://festea.com.br中封面照片的背景](http://festea.com.br)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-07T04:29:10.027

我在不同的上下文中问了同样的问题，并被指向[http://charlesleifer.com/blog/using-python-and-k-means-to-find-the-dominant-colors-in-images/](http://charlesleifer.com/blog/using-python-and-k-means-to-find-the-dominant-colors-in-images/)使用图像中的随机起点粗略地做同样事情的学习算法（k 均值）。这样，算法就可以自行找到主色。

# c++ - c ++在编译时加载大量数据

> ID：13637894
> 
> 赞同：5
> 
> 时间：2012-11-30T01:56:57.193
> 
> 标签：c++, visual-studio-2010

我有一个需要大量数据来实例化的 C++ 对象。例如：

```
 class object {
      public object() { 
          double a[] = { array with 1 million double element }; 
      /* rest of code here*/};
      private:
      /* code here*/    
  } 
```

现在数据（即 100 万个双精度数）位于单独的文本文件中。问题：如何以有效的方式将它放在“double a[]”之后并最终编译代码？我不想在运行时从文件中读取数据。我希望它与对象一起编译。有什么办法可以解决？理想情况下，我希望数据位于当前所在的单独文本文件中，并且不知何故还有一个像上面的 double a[] =..... 这样的分配。

这可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T01:58:16.320

就像是：

```
class object
{
  public
  object(){ double a[] = { 
     #include "file.h"
  }; 
   /* rest of code here*/};
  private:
  /* code here*/    
} 
```

该文件必须正确格式化 - 即包含以下内容：

```
//file.h
23, 24, 40,
5, 1.1, 
```

通常，您可以使用`#include`指令将内容粘贴到文件中。我见过`virtual`这样粘贴的方法，如果它们对于大多数派生类来说很常见的话。我个人不是很喜欢这种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:01:40.493

这种设计的一个大问题是`int`堆栈上的 100 万 s 可能会破坏堆栈。您可能想要的是将数据放在数据段上，或者放在存储在二进制文件中并且可以在运行时加载的某种资源中。如果您需要多个数据副本，请`std::vector`在运行时将其复制到一个副本中，这样您就知道数据在空闲存储（堆）上。Mayhap 甚至使用 a `shared_ptr`to a`std::array`来减少不必要的意外重复的机会（或`unique_ptr`减少引用重复的机会）。

我要说的就是 4mb 的数据并不能很好地发挥作用。4mb 数组对其他变量的引用位置不会成为您最关心的问题。

根据您编译的目标平台和框架，将有办法将此类数据填充到二进制资源中。我从来没有为多兆文件做过，但这里是视觉工作室对资源文件的帮助：http: [//msdn.microsoft.com/en-us/library/7zxb70x7%28v=vs.80%29。 aspx](http://msdn.microsoft.com/en-us/library/7zxb70x7%28v=vs.80%29.aspx)

请注意，“代码中的数据”并不能从根本上提高加载速度（除了遍历文件系统一次以找到它之外）。操作系统仍然需要加载二进制文件，更大的二进制文件需要更多的时间来加载，并且大量的值在二进制文件中占用的空间与在不同文件中占用的空间一样多。真正的优势在于它不是相对于可执行文件可能“放错位置”的文件，但资源派生/资源文件/等方法可以处理这个问题。

正如下面评论中所指出的，`static const`数据（和全局数据）倾向于加载到数据段中，这与堆（又名自由存储）和堆栈（又名自动存储）不同。我忘记了标准叫它什么。我确实知道函数中的局部变量在初始化顺序方面与全局非局部变量的`static`行为不同（全局（或非）数据在启动之前完全初始化，而本地在函数第一次初始化时被初始化调用，如果我没记错的话）。`static``static``main``static`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T03:36:30.497

The answer of Luchian Grigore is quite correct. But compiler can have some limit on length of source code line. See for [example https://stackoverflow.com/questions/10519738/source-line-length-limit](https://stackoverflow.com/questions/10519738/source-line-length-limit)

So try on your compiler. But I am afraid, more simple solution of your problem will be reading of huge data from file.

# jquery - jQuery：如何定位/动画相对于另一个元素的绝对定位元素

> ID：13637896
> 
> 赞同：1
> 
> 时间：2012-11-30T01:57:32.617
> 
> 标签：jquery, menu, css-position

因此，我正在尝试创建一个包含导航项堆栈（行）的垂直导航菜单。选择这些行中的一个时，我希望一个菜单从上面滑出（和下面），当此子菜单的顶部到达被单击的行的底部时。这些子菜单还应该有一个起始位置，其中子菜单底部等于相关导航项底部，以便在向下动画时立即可见。

这个定位，停止点和起点，可以在这个小提琴 -> [http://jsfiddle.net/pGfCX/57/](http://jsfiddle.net/pGfCX/57/)中看到。只需记下起点和终点。由于 position:relative 的性质，小提琴的其余部分被破坏了。

我认为 z-index 可以修复后续导航项的推送（正如您在刚刚链接的小提琴中看到的那样）......但这似乎不起作用。看起来只有 position:absolute 会启用正确的重叠（即子菜单隐藏在其上方的元素下方并覆盖其下方的元素）。不幸的是，这也有它的缺点。正如您在这个小提琴中看到的那样：http: [//jsfiddle.net/pGfCX/60/](http://jsfiddle.net/pGfCX/60/)。您会注意到起始位置和结束位置始终相同，因为我每次都使用相同的类。尽管我可以将每个子菜单都专门定位为它自己的唯一 ID，但这将非常低效且难以维护。

Bsically，我需要两种方法的混合......开始/结束位置的相对定位和绝对位置以实现正确的重叠。

希望这是有道理的......我真的需要帮助。我坚持使用这两种方法，但都没有工作。这令人沮丧。

这是我当前的 jQuery 代码：

```
$('.row').click(function() {

    // make all siblings AFTER row clicked get this class to reduce z-index and allow the menu to display above these rows (while still remaining below the rows above)

    $(this).nextAll().addClass('rowZ');
    $(this).next('.menu').show()
    $(this).next('.menu').animate({'top':'0'});

});

// when menu is out, the row clicked is the header row, upon clicking this, the related menu (and by default, all subsequent menus within) animate back up and hide

$('.rowHead').click(function() {

    $(this).next('.menu').animate({'top':'-100%'});
    $(this).next('.menu').hide();

}); 
```

非常感谢任何和所有帮助。谢谢！

**编辑***新方法...导航项内的菜单，使其具有绝对定位并相对于导航项。但是，z-index 似乎关闭了（即，它在导航项（它是父项）之上进行动画处理，尽管 z-index 会提出其他建议：

[http://jsfiddle.net/pGfCX/81/](http://jsfiddle.net/pGfCX/81/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:44:41.310

编辑：回滚到这个版本，因为虽然这不是一个答案，但它最好作为一个类似的替代方案。

[http://jsfiddle.net/pGfCX/70/](http://jsfiddle.net/pGfCX/70/)

这似乎是你喜欢的工作。保持相对定位，修复你的 z-index，并给 .row 一个背景颜色 :) 让我无休止地困惑，因为我的 z-index 看起来坏了，但这是因为元素在 .row 之下（你可以看到顶部的文本)，但因为它在容器上有灰色背景，所以它看起来好像不在行后面。应该是纯 CSS 修复：

```
#container{
    background:grey;
    width:100px;
    height:100%;
    position:relative;
    top:0;
    left:0;
    z-index:1;
}
.row{
    width:100px;
    height:40px;
    cursor:pointer;
    position:relative;
    z-index:1100;
    background-color: pink;
}
 .row:hover{
    background:red;
}
.menu{
    background:yellow;
    width:100px;
    height:300px;
    position:relative;
    top:-100%;
    left:0;
    z-index:2;
    display:none;
}
.menu .row {
    z-index: 10;   
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T06:13:23.937

如果您不`top`为那些绝对定位的`.menu`元素设置规则，它们将直接悬挂在`.row`每个元素之前的相对定位元素的下方，而不是浮动到`#container`. 然后，您可以使用 jQuery`slideDown()`和`slideUp()`动画从所需位置显示/隐藏菜单。

jsFiddle 的**[工作示例](http://jsfiddle.net/pGfCX/142/)**

**示例代码**

CSS

```
#container {
    background:#666;
    width:100px;
    height:100%;
    position:fixed;
    top:0;
    left:0;
   z-index: 10;
}
.row {
    width:100px;
    height:40px;
    cursor:pointer;
    position:relative;
    z-index:1;
    line-height: 40px;
    vertical-align: middle;
    text-align: center;
    box-shadow: inset 0px 40px 40px -40px #fff;
}
.row:hover {
    background:red;
}
.row.active {
    background: #333;
    color: #fff;
}    
.menu {
    background: #999;
    width:100px;
    height:auto;
    position:absolute;
    left:0;
    z-index: 2;
    display:none;
    box-shadow: 0px 4px 1px rgba(0,0,0,0.3);
} 
```

JS

```
$('.menu').prev('.row').click(function() {

    // Stops the handler from firing if an animation is in progress
    if (!$('#container').is('.working')) {

        // Begin manipulating the menu...
        $('#container').addClass('working');

        // Defines how fast menus will slide up/down
        var slideSpeed = 200;    

        // If menus need to be hidden, wait for them to slide up, otherwise, don't bother
        var d = ($(this).parent().children('.row.active').length > 0) ? slideSpeed : 0;

        // IF this rowhead is collapsed, expand it and collapse expanded siblings
        if (!$(this).is('.active')) {

// Collapse the active menu at this level, if any             
            $(this).siblings('.row.active').removeClass('active').next('.menu').slideUp(d, function(){
             // When this menu is hidden, collapse all expanded submenus
             $(this).find('.row').removeClass('active');
             $(this).find('.menu').hide();
        });

        // Expand this menu after others have finished collapsing
        window.setTimeout(function(a){

            // Fallback for bodyless rowheads: skips wait if this rowhead has no menu
            b = ($(a).parent().find('.row.active').length > 0) ? slideSpeed : 0;

            // Expand this menu
            $(a).addClass('active').next('.menu').slideDown(slideSpeed, function(){
                // Ready container for more interaction after menu (if any) expands 
                $('#container').removeClass('working');            
            });
        },d,this);
    }

    // Otherwise, if this menu is expanded, collapse it                          
    else $(this).removeClass('active').next('.menu').slideUp(d, function(){ 

         // When this menu is hidden, collapse all expanded submenus
         $(this).find('.row').removeClass('active');
         $(this).find('.menu').hide();

         //Ready the container for more interaction        
         $('#container').removeClass('working');
        });
    }
}); 
```

​</p>

# c++ - 谁能告诉我如何用字符串初始化 ex 对象？

> ID：13637897
> 
> 赞同：2
> 
> 时间：2012-11-30T01:57:36.207
> 
> 标签：c++, string, math, ginac

有人用过GIAC吗？你能告诉我如何`ex`用字符串初始化对象，或者将字符串转换为`ex`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:01:40.187

如果您的字符串包含正确的表达式语法，则可以使用[此处](http://www.ginac.de/reference/classGiNaC_1_1ex.html#ace68037326c1a2b8c93a56716599ec7a)记录的构造函数将其转换为`ex`对象。

您需要提供第二个参数，它必须是`lst`符号列表（在对象的意义上）。此列表必须包含您在表达式中使用的用户定义符号。如果您不使用任何用户定义的符号，请使用空列表。

没有用户定义符号的示例：

```
 using namespace std;
  using namespace GiNaC;

  ex myex("2+3",lst());      // Output will be '5'

  cout myex << endl; 
```

使用两个用户定义符号的示例：

```
 using namespace std;
  using namespace GiNaC;

  symbol x("x");
  symbol y("y");
  ex myex("x^3+y",lst(x,y));

  cout << myex + y << endl;     // Output will be '2*y+x^3' 
```

在最后一个示例中，您可以看到`'y'`输入字符串中的字符`"x^3+y"`确实被解释为符号`y`:`myex + y`被简化为`"2*y+x^3"`。

# python - python 和 postgres 总是共享一个 CPU 内核？

> ID：13637899
> 
> 赞同：1
> 
> 时间：2012-11-30T01:57:53.107
> 
> 标签：python, django, postgresql, multiprocessing

我正在使用 Django ORM 在 ipython shell 中修改一些大数据查询。这是在 OS X 上的 VMware Fusion 中的 Debian 6 VM 上，允许 VM 访问主机上 4 核 HT i7 的 4 或 8 个内核（我已经玩过这些设置）。

当我在顶部查看进度时，例如在 python shell 中执行“for result in results：do_query()”时，python 和其中一个 postgres 进程似乎总是位于同一个物理 CPU 内核上 -它们的总 CPU 使用率加起来永远不会超过 100%，python 通常是 65% 到 postgres 的 25% 左右。VM 上的 iowait 并不过分高。

我不肯定他们总是在同一个核心上，但看起来确实如此。考虑到我最终计划如何扩展它，我希望更优化地安排 python 进程和 postgress 工作人员。有什么见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:08:07.247

现在，如果你的代码按照我认为的方式运行，那么 Postgres 总是在等待 Python 向它发送查询，或者 Python 正在等待 Postgres 返回响应。不会出现他们俩同时工作的情况，因此一次只能运行一个。

要开始更多地使用您的机器，您需要在 Python 端实现某种多线程。由于您没有详细说明您的查询是什么，因此很难说它可能是什么样子。

# visual-c++ - 在 C++ 中将数字列表单独存储到二维数组中

> ID：13637900
> 
> 赞同：2
> 
> 时间：2012-11-30T01:57:59.420
> 
> 标签：visual-c++

好的，所以我知道如何将数字存储到数组中，但我正在编写一个数独程序，我需要从输入文件中读取和存储。该文件将有一个半成品数独板，是的，我只需要用它做一些事情。我的问题是板上的数字没有用空格分隔，例如 123456789，我需要单独读取每个数字以将每个数字存储在数组中的不同位置。然而， cin 只会得到整个组，而 cin.get() 会给我 ASCII 值......所以我对如何让它们单独存储有点困惑。也许这是一个明显的答案，我只是没有看到，我不知道。任何帮助表示赞赏。

感谢尼克的回复。我有一个小功能可以从输入文件中填充二维数组。这里是：

对于 ( i = 0; i < 行; i++ ) {

```
 for ( j = 0; j < COLS ; j++ )
        {
             in.get(getData);
             data = getData - '0';
            myArray[i][j] = data;
        }

} 
```

我添加了您推荐的 getData - '0' 部分，它似乎可以工作，只是我将其作为输出。

1|2|3|4|5|6|7|8|9| -38|1|2|3|4|5|6|7|8| 9|-38|1|2|3|4|5|6|7| 8|9|-38|1|2|3|4|5|6| 7|8|9|-38|1|2|3|4|5| 6|7|8|9|-38|1|2|3|4| 5|6|7|8|9|-38|1|2|3| 4|5|6|7|8|9|-38|1|2| 3|4|5|6|7|8|9|-38|1|

现在的输入文件只有 9X9 行和 '123456789' 列，所以它应该只是输出它。不确定 -38 来自哪里？显示它的代码与现在填充它的代码几乎相同，只是功能不同。任何想法？与此同时，我会修修补补。

好吧，没关系，我知道它正在阅读尾行并把事情搞砸了。我只是在其中放了一点 cin.get(temp) 来阅读结束行并继续。希望这是做事情的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:18:37.767

尝试这样的事情：

```
char c;

while(cin.get(c))
{ 
    if(!std::isdigit(c))
    { 
        /* not a digit - do whatever you want here */
    }

    int digit = c - '0';

    /* now digit contains the integer value of the digit in 'c' and you
     * can use it as needed. Let's call a function called dsw:
     */
    dsw(digit);
} 
```

# python - 对常用键名的值使用函数

> ID：13637903
> 
> 赞同：0
> 
> 时间：2012-11-30T01:58:03.877
> 
> 标签：python, function, dictionary, nested

如果我定义以下字典，我是否可以使用诸如`max(), min(), numpy.mean(), numpy.median()`计算 adict 的所有键（即 key1 到 key3）的键“avalue”值的统计信息，而无需先将值附加到单独的可迭代对象?

```
adict = {'key1':{'achar':'a','avalue':1},'key2':{'achar':'b','avalue':2},'key3':{'achar':c,'avalue':3}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:19:26.340

我一步一步写在下面，希望你能得到你的答案

```
>>> [ x for x in adict.keys() ]
['key3', 'key2', 'key1']
>>> [ adict[x] for x in adict.keys() ]
[{'achar': 'c', 'avalue': 3}, {'achar': 'b', 'avalue': 2}, {'achar': 'a', 'avalue': 1}]
>>> [ adict[x]['avalue'] for x in adict.keys() ]
[3, 2, 1]
>>> sum([ adict[x]['avalue'] for x in adict.keys() ])
6 
```

# java - 四舍五入到小数点后两位

> ID：13637908
> 
> 赞同：-5
> 
> 时间：2012-11-30T01:58:26.750
> 
> 标签：java

求助，我希望程序的输出四舍五入到小数点后 2 位.......................... ..................................................... ..................................................... …………………………………………………………………………………………………………………………………………

这是我的代码：

```
package javaapplication2;
import javax.swing.JOptionPane;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class NewClass {
    public static void main(String[ ] args){

int age = 0;             
age = Integer.parseInt(
JOptionPane.showInputDialog(
null, "Enter radius of a circle: "));  

        int radius = 0;
        System.out.println("Enter radius of a circle : ");
        try
        {
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            radius = Integer.parseInt(br.readLine());
        }
        catch(NumberFormatException ne)
        {
            System.out.println("Invalid radius value" );
            System.exit(0);
        }
        catch(IOException ioe)
        {
            System.out.println("IO Error :" + ioe);
            System.exit(0);
        }
        radius = 5;
        double circumference = 2 * Math.PI * radius;
        double area = Math.PI * radius * radius;

        System.out.println("Area of a circle is " + area);
        System.out.println("Perimeter of a circle is " + circumference);

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:02:04.550

由于您只想显示四舍五入的值，而不是将其传递给进一步计算，您可以使用`DecimalFormat`：

```
DecimalFormat format = new DecimalFormat("0.##");
System.out.println("Area of a circle is " + format.format(area));
System.out.println("Perimeter of a circle is " + format.format(circumference)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:08:56.973

您可以应用以下内容：

```
public double Round2(double number) {
       return Math.rint(number*100)/100;
} 
```

# python - 如何从中间循环文件..（使用条件）

> ID：13637910
> 
> 赞同：-1
> 
> 时间：2012-11-30T01:58:37.720
> 
> 标签：python, file, loops

我将如何在一个条件下启动一个循环：例如。

```
I have following contents in a file:
text1
text2
text3
text4
text5
text6 
```

现在的问题是我想从 text3 开始循环，直到 text5...我怎样才能开始这个循环。它需要一个单独的参数还是一个不同的参数？

好的，答案很好：

但是如果它是一个更大的文件呢？

喜欢

```
'A'
text1
text2
text3
text4
text5
text6

'B'
text7
text8
text9
text10 
```

我们想从'B'循环到空白行？？

我会很感激所有的帮助..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:00:23.777

> 我们想从'B'循环到空白行？？

我假设您想从唯一的“B”行开始读取行并在第一个空白行处停止。而且您不想将整个文件读入内存：

```
with open("your_file.txt") as file:
     start = False
     for line in file:
         if start:
            if not line.strip(): # blank 
               break # done
            process(line)
         elif line.strip() == "B":
            start = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:39:57.043

假设：

1) 你想达到一个特定的标识符，例如'B'
2) 文件有一个排序的结构，例如'A' ... 'B' ... 'C' ...等

您可以尝试使用 seek 进行二进制搜索。

高层次的想法是：

1）获取文件的大小。
2) 寻找到文件的中间。
开始阅读行，直到你找到一个标识符，比如 found_identifier。if found_identifier > target_identifier：在上半部分中间寻找。
if found_identifier < target_identifier：在下部中间寻找。
if found_identifier == target_identifier: 您到达了文件中的正确区域。

这种方法应该进行 log2（文件大小）搜索，这应该比顺序读取非常大的文件要快......

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T02:09:51.750

如果每一行共享一个固定长度，我想你可以试试 file.seek(n)

```
>>> f.seek(5)     # Go to the 6th byte in the file 
```

别的

```
n = start_line
m = end_line

with open("text_file","r") as f
    for i in f.readlines()[n:m]:
        print i 
```

如果文件很大，我们需要一个计数器并使用“open”函数，每次读取一行

```
fh = open("file","r")
start_piont = 0
n = 6     #starting row
m = 16    #ending row
row_list = [] # result row list
for l in fh:   # read a single line per time
    start_piont = start_piont + 1
    if start_piont >= n :
        row_list.append(l)
    if start_piont > m:
        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T02:11:09.350

你的意思是你想跳过阅读文件的前两行而不处理它们吗？

```
f = open('filename')
f.readline()
f.readline()
lines=f.readines()
for line in lines:
    do whatever... 
```

您可以使用“搜索”，但如果线条长度不同，您将不知道要搜索的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T03:25:15.243

这有效：

```
example="""'A'
text1
text2
text3
text4
text5
text6

'B'
text7
text8
text9
text10

line11
line12
line13
""".splitlines()     # standin for a file...

flag=False
for line in example:
    if line.strip()=="'B'":
        flag=True
    if flag==True and line.strip():
        print line
    if flag==True and not line.strip():
        flag=False 
```

印刷：

```
'B'
text7
text8
text9
text10 
```

# python - 在 BeautifulSoup 中安全 .text.strip() 的优雅方式？

> ID：13637911
> 
> 赞同：5
> 
> 时间：2012-11-30T01:58:48.880
> 
> 标签：python, beautifulsoup

我在 Python 下使用 BeautifulSoup 进行相当多的数据抓取和清理，并且经常附加`.text.strip()`到 soup.find 命令。例子：`foo_stuff = soup.find("foo").text.strip()`

在某些情况下， a`soup.find`什么也找不到，因此`.text.strip()`会中断。如我所见，我可以通过以下几种方式处理：

*   编写`.find`总是返回一些东西的查询——*我不是一个足够聪明的人来以一种干净的方式来构建我的查询。*
*   对每一个都使用 try/except 语句`.text.strip()`——*代码很难看。*
*   我可以修补 .find 命令以获得 try/except，或者包含一个`.myfind`执行类似操作的命令——*这涉及到我修补东西并可能会甩掉协作者。*

那里的其他人有更好/更聪明的解决方案来解决这个问题吗？

编辑：现在我正在使用一个无聊的 ol' 函数来尝试/除`.text.strip()`：

```
def text_strip(soup_search):
    if soup_search != None:
        return soup_search.text.strip()
    else:
        return "" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T02:08:47.660

写一个普通的旧函数怎么样？

```
def find_stripped(soup, what):
  found = soup.find(what)
  if found is not None:
    return found.text.strip()
  # maybe:
  # return "" 
```

现在你可以：`foo_stuff = find_stripped(soup, "foo")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:11:17.310

我认为最安全的方法是检查是否`.find()`返回了 type 的实例`tag`。

```
from bs4.element import Tag
foo_stuff = soup.find("foo") 

if isinstance(foo_stuff, Tag):  
  # do something with foo_stuff 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T18:49:26.293

另一种方法是在搜索时使用 Beautiful Soup 的函数参数：

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-function](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-function)

例子：

```
tagsWithStrippedText = bs.find_all(tagsAndStripText);

def tagsAndStripText(tag):
  if tag.text:
    tag.string = tag.text.strip()
  return True 
```

我觉得它更有表现力。请小心设置字符串会覆盖其中的标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-11T13:41:19.547

现在有一种更好的方法，它更安全。

```
my_str = soup.find("span").get_text(strip = True) 
```

见[https://beautiful-soup-4.readthedocs.io/en/latest/index.html?highlight=strip#get-text](https://beautiful-soup-4.readthedocs.io/en/latest/index.html?highlight=strip#get-text)

# google-app-engine - 在 Appengine 中使用 JSON Api 为 Google 存储对象设置 ACL

> ID：13637913
> 
> 赞同：2
> 
> 时间：2012-11-30T01:58:53.417
> 
> 标签：google-app-engine, google-cloud-storage

我想使用 appengine 的 Json API 将 ACL 添加到 Google Storage 对象。我已经尝试了以下代码，但是我得到了没有详细信息的 400 响应。我没有使用 java-client-libraries，但是我愿意尝试。下面是我的代码：

```
public static void updateACL(String bucket, String object,
        List<String> emails) {

    try {
        ArrayList scopes = new ArrayList();
        scopes.add("https://www.googleapis.com/auth/devstorage.full_control");
        AppIdentityService appIdentity = AppIdentityServiceFactory
                .getAppIdentityService();
        AppIdentityService.GetAccessTokenResult accessToken = appIdentity
                .getAccessToken(scopes);
        // The token asserts the identity reported by
        // appIdentity.getServiceAccountName()
        logger.log(Level.WARNING, "bucket: "+bucket+" object: "+object+ " email: "+emails.get(0));
        JSONObject request = new JSONObject();
        request.put("entity", "user-" + emails.get(0));
        request.put("roles", "READER");

        URL url = new URL("https://www.googleapis.com/storage/v1beta1/b/"
                + bucket + "/o/"+object+"/acl?key=" + API_KEY);
        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();
        connection.setDoOutput(true);
        connection.setRequestMethod("POST");
        connection.addRequestProperty("Content-Type", "application/json");
        connection.addRequestProperty("Authorization", "OAuth "
                + accessToken.getAccessToken());
        String urlParameters = "bucket=" + bucket + "&object=" + object;
        OutputStreamWriter writer = new OutputStreamWriter(
                connection.getOutputStream());
        request.write(writer);
        writer.close();
        logger.log(Level.WARNING, connection.getResponseMessage());
        logger.log(Level.WARNING,
                String.valueOf(connection.getResponseCode()));
        if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
            // Note: Should check the content-encoding.
            // JSONTokener response_tokens = new
            // JSONTokener(connection.getInputStream());
            // JSONObject response = new JSONObject(response_tokens);
            // return (String) response.get("id");
            return;
        } else {

        Scanner s;
        s = new Scanner(connection.getErrorStream());
        s.useDelimiter("\\Z");
        String response = s.next();
        s.close();
            throw new Exception(connection.getResponseCode()+" "+connection.getResponseMessage()+
                    response);
        }
    } catch (Exception e) {

        logger.log(Level.WARNING, "exception: "+e.getMessage());

    }
} 
```

我得到的回复是 400，但细节一点帮助都没有。

> “错误”：{“错误”：[{“域”：“全局”，“原因”：“必需”，“消息”：“必需”}]，“代码”：400，“消息”：“必需” } }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:25:22.117

我怀疑您的代码中有一两个小错误。在这个特定的实例中，当 JSON api 需要角色时，您似乎正在发送角色。

我发现对调试有帮助的一件事是将我的代码通过网络发送的内容与[Google API 资源](https://developers.google.com/storage/docs/json_api/v1/)管理器生成的 HTTP 请求进行比较。

1.  导航到[https://developers.google.com/storage/docs/json_api/v1/objectAccessControls/insert](https://developers.google.com/storage/docs/json_api/v1/objectAccessControls/insert)
2.  打开`Authorize requests using OAuth 2.0`按钮。
3.  设置`bucket`、`object`和`entity`字段`role`。
4.  点击执行。

您应该会看到生成的 HTTP 请求和响应。

要求：

```
POST https://www.googleapis.com/storage/v1beta1/b/bucket/o/obj/acl?key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.1111111111111111111111111111111111-aaaaaaaaaaaaa
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "entity": "user-person@example.com",
 "role": "READER"
} 
```

回复：

```
200 OK

- Hide headers -

cache-control:  no-cache, no-store, max-age=0, must-revalidate
content-type:  application/json; charset=UTF-8
date:  Fri, 30 Nov 2012 02:16:57 GMT
etag:  "fP_WVz7o95h5w16zKezUFJzMmHg/6CyL8wOk_60IJhaxNewPk1fHpQo"
expires:  Fri, 01 Jan 1990 00:00:00 GMT
server:  GSE

{

 "kind": "storage#objectAccessControl",
 "id": "bucket/obj/user-person@example.com",
 "selfLink": "https://www.googleapis.com/storage/v1beta1/b/bucket/o/obj/acl/user-person@example.com",
 "bucket": "bucket",
 "object": "obj",
 "entity": "user-person@example.com",
 "role": "READER",
 "email": "person@example.com"
} 
```

现在确保您通过网络发送的请求与此请求相同。

# php - PHP WebService，只有私有变量的空数组

> ID：13637916
> 
> 赞同：0
> 
> 时间：2012-11-30T01:59:06.157
> 
> 标签：php, arrays, json, web-services

我正在尝试制作这个 PHP 网络服务。

如您所见，在“Aluno”类上有2个私有变量。在为此苦苦挣扎了一整天后，我终于发现，如果我将这些变量更改为公开，一切都会按预期进行。但是，如果他们保持私密，有趣的事情发生了，他们的数组返回空但有对象，看看结果：

即使我设法使它工作，我也不明白为什么它不适用于私有变量。

来自具有公共变量的网络服务的结果：

```
{
alunos: [
{
_nome: "Fexxxx",
_bairro: "Rexxxx"
},
{
_nome: "Fexxxxx",
_bairro: "Broxxxx"
},
{
_nome: "Ferxxxx",
_bairro: "Grxxxx"
},
{
_nome: "Maxxxx",
_bairro: "Chxx"
},
{
_nome: "Roxxxx",
_bairro: "Cixxxx"
}
]
} 
```

来自带有私有变量的 web 服务的结果：

```
{
alunos: [
{ },
{ },
{ },
{ },
{ }
]
} 
```

这是完整的 index.php

```
 // Helper method to get a string description for an HTTP status code
// From http://www.gen-x-design.com/archives/create-a-rest-api-with-php/ 
function getStatusCodeMessage($status)
{
    $codes = Array(
        100 => 'Continue',
        101 => 'Switching Protocols',
        200 => 'OK',
        201 => 'Created',
        202 => 'Accepted',
        203 => 'Non-Authoritative Information',
        204 => 'No Content',
        205 => 'Reset Content',
        206 => 'Partial Content',
        300 => 'Multiple Choices',
        301 => 'Moved Permanently',
        302 => 'Found',
        303 => 'See Other',
        304 => 'Not Modified',
        305 => 'Use Proxy',
        306 => '(Unused)',
        307 => 'Temporary Redirect',
        400 => 'Bad Request',
        401 => 'Unauthorized',
        402 => 'Payment Required',
        403 => 'Forbidden',
        404 => 'Not Found',
        405 => 'Method Not Allowed',
        406 => 'Not Acceptable',
        407 => 'Proxy Authentication Required',
        408 => 'Request Timeout',
        409 => 'Conflict',
        410 => 'Gone',
        411 => 'Length Required',
        412 => 'Precondition Failed',
        413 => 'Request Entity Too Large',
        414 => 'Request-URI Too Long',
        415 => 'Unsupported Media Type',
        416 => 'Requested Range Not Satisfiable',
        417 => 'Expectation Failed',
        500 => 'Internal Server Error',
        501 => 'Not Implemented',
        502 => 'Bad Gateway',
        503 => 'Service Unavailable',
        504 => 'Gateway Timeout',
        505 => 'HTTP Version Not Supported'
    );

return (isset($codes[$status])) ? $codes[$status] : '';
}

function sendResponse($status = 200, $body = '', $content_type = 'application/json') {

$status_header = 'HTTP/1.1 ' . $status . ' ' . getStatusCodeMessage($status);
header($status_header);
header('Content-type: ' . $content_type);
echo ($body);
}

class Aluno {

private $_nome;
private $_bairro;

function __construct() {
    $this->setAtributos(NULL,NULL);
}

public function setAtributos($nome, $bairro) {
$this->_nome = $nome;
    $this->_bairro  = $bairro;
}

public function __get($name) {
$name = '_'.$name;
if (property_exists($this, $name)) {
    return $this->$name;
}
}//end getter

public function __set($name, $value) {
$name = '_'.$name;
if (property_exists($this, $name)) {
    $this->$name = $value;
}    
return $this;
}//end setter
}//end class Aluno

class Teste1 {

private $db;
private $alunosArray;

function __construct() {
    $this->db = new mysqli('localhost', 'xxxx', 'xxxx', 'xxxx');
    $this->db->autocommit(FALSE);
    $this->alunosArray = array();
}

function __destruct() {
    $this->db->close();
}

function buscaAlunos() {

if (isset($_GET["nome"])) {
    $nomeParam = '%'.$_GET["nome"].'%';

        $stmt = $this->db->prepare('SELECT nome,bairro FROM alunos WHERE nome LIKE ? ORDER BY nome');
    $stmt->bind_param("s",$nomeParam);
    $stmt->execute();
    $stmt->bind_result($nomeAlunoLocal,$bairroLocal);

    while ($stmt->fetch()) {
             $alu = new Aluno;
             $alu->setAtributos(utf8_encode($nomeAlunoLocal),utf8_encode($bairroLocal));
             array_push($this->alunosArray, $alu);  
    }//end while
    $stmt->close();

    sendResponse(200, json_encode(array('alunos'=>$this->alunosArray)));
    return true;
    }//end if
sendResponse(400, 'parametro invalido');
return false;
}//end function buscaAlunos()
}//end class Teste1

$api = new Teste1;

$api->buscaAlunos(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:16:04.773

它希望与私有一起工作，因为私有变量只能从类中访问。您需要定义 getter 方法才能返回私有变量。

# git - 如何在服务器上的 bitbucket 和 git 中建立信任关系

> ID：13637921
> 
> 赞同：0
> 
> 时间：2012-11-30T01:59:24.803
> 
> 标签：git, centos, bitbucket

我想将我的 repo 上传到 bitbucket

当我这样做时

```
git push -u origin master 
```

然后我从远程 shell 得到这个错误

```
(gnome-ssh-askpass:51926): Gtk-WARNING **: cannot open display: 
```

我该如何解决

我已经从这里设置了 ssh 密钥 [https://confluence.atlassian.com/pages/viewpage.action?pageId=270827678](https://confluence.atlassian.com/pages/viewpage.action?pageId=270827678)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:20:39.143

看起来您正试图从不在 X 下运行的命令行运行它。这就是为什么它无法打开显示屏并要求您输入 ssh 密钥的密码。

您应该可以通过[禁用 gnome-ssh-askpass](http://kartzontech.blogspot.com/2011/04/how-to-disable-gnome-ssh-askpass.html)来修复它。

# django - 在 /admin/ 中找不到 Django 管理页面

> ID：13637922
> 
> 赞同：4
> 
> 时间：2012-11-30T01:59:25.883
> 
> 标签：django, admin

我只是安装 apache 和 django。

django 默认页面工作正常：

> 有用！
> 
> 这是此服务器的默认网页。
> 
> Web 服务器软件正在运行，但尚未添加任何内容。

但 /admin/ 站点不是：

> 未找到
> 
> 在此服务器上找不到请求的 URL /admin/。
> 
> Apache/2.2.17 (Ubuntu) 服务器位于 69.162.92.53 端口 80

Apache conf (/etc/init.d/apache2/sites-avaliable/mysite.conf) 文件：

```
<VirtualHost *:80>
WSGIScriptAlias / /var/www/mysite/mysite/wsgi.py

ServerName mysite.com.br
Alias /static /var/www/mysite/media/static/

<Directory /var/www/mysite/mysite>
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

wsgi 文件（/var/www/mysite/mysite/wsgi.py）：

```
import os
import sys

sys.path.insert(0, '/var/www/mysite')
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

Django mysite.settings (/var/www/mysite/mysite/settings.py)：

```
...
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)
... 
```

Django mysite.urls (/var/www/mysite/mysite/urls.py):

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'mysite.views.home', name='home'),
    # url(r'^mysite/', include('mysite.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

就这样。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:06:15.907

这是一个 apache 配置错误。

我相信您应该指出：-

```
<Directory /var/www/mysite>
    Order allow,deny
    Allow from all
</Directory> 
```

# java - 尝试编译“while”语句时的“unreachable statement”

> ID：13637925
> 
> 赞同：2
> 
> 时间：2012-11-30T01:59:51.917
> 
> 标签：java, while-loop, unreachable-statement

我是 Java 新手，正在学习一些课程。但是，在下面的代码中，我在尝试编译时收到错误“Unreachable statement”。关于我做错了什么的任何指示？

```
public String getDeliveredList() {
   int count = 0;
   while (count < deliveredList.size()){
       return ("Order # " + count + deliveredList.get(count).getAsString());
       count++;
   }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T02:01:31.690

从函数返回后，从逻辑上讲，在那之后它不能再执行任何操作——`count++`永远不会到达该语句。

```
while (count < deliveredList.size()){

   // function always ends and returns value here
   return ("Order # " + count + deliveredList.get(count).getAsString());

   // this will never get run
   count++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T04:05:55.977

如果您从函数返回，那么在函数返回点之后的任何语句基本上都是无法访问的语句，编译器将在此类语句上发出错误。

但是，尽管在 return 之后编写了语句，但以下代码不会发出错误

```
void max(int a,int b)
{
    if(a>b) 
    {
        System.out.println(a+" is greater");
        return;
    }

    System.out.println(b+" is greater");
    return;
} 
```

这是因为第一个 return 语句是在嵌套范围内编写的，并且在函数范围内不会立即可见。当 a>b 时，程序执行只会通过第一个 return 语句。如果不是这样，则永远不会执行该代码块。因此，尽管返回后有语句，但代码是可编译的；

# c# - 如何以不同格式保存 PictureBox 图像？

> ID：13637926
> 
> 赞同：1
> 
> 时间：2012-11-30T02:00:09.533
> 
> 标签：c#, picturebox, file-format, savefiledialog

我有一个图片框，其中包含运行时生成的图像。我需要使用 SaveFileDialog 保存此图像，为此我找到了以下代码：

```
 private void saveFileDialog1_FileOk(object sender, CancelEventArgs e)
    {
        pictureBox.Image.Save(saveFileDialog1.FileName, System.Drawing.Imaging.ImageFormat.Jpeg);
    } 
```

但是，这可行，我需要允许用户在 FileDalog 中指定他们希望将其保存为的格式。用户允许的格式：

位图 (*.bmp),

GIF (*.gif),

JPEG (*.jpg),

和 PNG (*.png)。任何有关如何实现此目的的示例或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:17:02.170

像这样的事情可能是一个很好的起点

```
 var fd = new SaveFileDialog();
        fd.Filter = "Bmp(*.BMP;)|*.BMP;| Jpg(*Jpg)|*.jpg";
        if (fd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            switch (Path.GetExtension(fd.FileName))
            {
                case ".BMP":
                    pictureBox.Image.Save(fd.FileName, System.Drawing.Imaging.ImageFormat.Bmp);
                    break;
                case ".Jpg":
                    pictureBox.Image.Save(fd.FileName, System.Drawing.Imaging.ImageFormat.Jpeg);
                    break;
                default:
                    break;
            }
        } 
```

# iphone - 如何从 uitableview 中选择值并将其显示在上一页的按钮上

> ID：13637927
> 
> 赞同：1
> 
> 时间：2012-11-30T02:00:14.787
> 
> 标签：iphone, objective-c, ios, uitableview

我想像 uipickerview 一样使用 uitableview。单击按钮时，uitableview 出现。单击任何单元格时，所选值将显示在上一页的按钮上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T02:13:58.400

将数据传回另一个控制器的正常方法是使用`delegate`协议。`@protocol`带有按钮的控制器将实现在表格视图控制器的 .h 文件中的声明中声明的协议方法。在该`tableView:didSelectRowAtIndexPath:`方法中，您将调用委托方法，传递单击的单元格的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:57:04.687

就用这个

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    [tableView deselectRowAtIndexPath:indexPath  animated:YES];
    UITableViewCell *cell=[self.m_TableView cellForRowAtIndexPath:indexPath];
    AppDelegate* appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.m_SavedDictionary setObject:cell.textLabel.text forKey:@"driver"];
    [self.navigationController popViewControllerAnimated:YES];
} 
```

以及之前视图使用的 ViewwillAppear 方法；

```
if([[appDelegate.m_SavedDictionary objectForKey:@"driver"]length]>=1)
{
    [m_driverButton setTitle:[appDelegate.m_SavedDictionary objectForKey:@"driver"] forState:UIControlStateNormal];

} 
```

而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:35:53.683

一些委托代码；您的 tableview 类中的协议：
`@protocol SelectionDelegate <NSObject> -(void)setSelectedTableCellValue:(NSString*)value;@end`让您以前的视图确认并成为您希望显示的 tableview 的委托，并实现协议方法。现在在单元格选择中，只需检索单元格的值并通过`[delegate setSelectedTableCellValue:<some cell value>];`HTH 将其传递给您的委托。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T02:28:31.983

rdelmar 是正确的，最简单的方法可能是使用委托协议并将选定的值传递回前一个视图。

--

**但是**，假设您想将此值存储在表视图和选择器之外，您可以创建一个单例或使用 NSUserDefaults 来避免传递该值并可能丢失一些东西。如果这个 tableview/picker 在设置菜单等中，这就是我会做的。

请参阅此了解基础知识：http: [//mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T05:17:25.653

您可能想查看核心数据，您将能够保存数据并重新访问数据/值并重新加载到您喜欢的任何视图控制器中。它是一个非常通用的工具，一旦你学会了它，你就可以更轻松地做很多事情。看看这个[教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

# c# - 无法理解 store.Certificates.Find

> ID：13637928
> 
> 赞同：1
> 
> 时间：2012-11-30T02:00:17.657
> 
> 标签：c#

```
var store = new X509Store(StoreName.My);

store.Open(OpenFlags.ReadOnly);

foreach (var mCert in store.Certificates)
{
   Response.Write(store.Certificates.Find(X509FindType.FindBySubjectName, mCert.SubjectName.Name, false).Count + "<br>"); 
} 
```

为什么我有 count - 0 作为回应？

# .htaccess - htaccess 将子域重定向到根域

> ID：13637933
> 
> 赞同：9
> 
> 时间：2012-11-30T02:00:41.697
> 
> 标签：.htaccess, rewrite

我想重定向这个子域：

```
http://abc.domain-name.com 
```

到根域上使用相同名称的文件夹：

```
http://www.domain-name.com/abc 
```

这样，如果我尝试访问以下文件：

```
http://abc.domain-name.com/folder/file.html 
```

它将转到：

```
http://www.domain-name.com/abc/folder/file.html 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T02:04:52.640

尝试这个：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^subdomain\.yourdomain\.com
RewriteRule ^(.*)$ http://www\.yourdomain\.com/subdomain/$1 [L] 
```

（来自[http://systembash.com/content/simple-redirect-subdomain-to-a-directory/](http://systembash.com/content/simple-redirect-subdomain-to-a-directory/)）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-24T06:22:02.347

您应该考虑搜索引擎并使用[永久重定向 (301)](https://moz.com/learn/seo/redirection) ，如果第二行以不区分大小写的方式匹配，则最好在末尾使用[NC 标志。](https://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_nc)

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^blog\.example\.com  [NC]
RewriteRule ^(.*) http://www.example.com/$1 [L,R=301] 
```

# python - python - 尝试为动态添加的类覆盖 __getattr__ 但只能进行排序

> ID：13637934
> 
> 赞同：1
> 
> 时间：2012-11-30T02:00:47.227
> 
> 标签：python, class, dynamic, getattr

我正在尝试在运行时向现有类添加一个新类（使用“type(...)”）。我还试图覆盖那个新类' __getattr__ 以便我可以对不在新类中的属性执行我自己的行为。例如，我有类 foo，我添加类“工具”，我希望 foo.tool.test 做我自己的事情。下面的代码有效，但只是部分有效。如果我显式调用 __getattr__，它可以工作（参见第一个打印），但是当我引用 foo.tool.test 时，我的覆盖 __getattr__ 不会被调用，并且会引发 attrbute 错误。

非常感谢您的帮助。

```
class Foo(object):
    def __init__(self):
        self.NameList=[]
        # add new class to ourself
        self.tool = type('tool', (object,), {} )
        # override new class' __getattr__ with call to ourself
        setattr(self.tool, "__getattr__", self.__getattr__ )
        # add one well known test name for now
        self.NameList.append( "test" )

    # should be called by our newly added "tool" object but is only called sometimes...
    def __getattr__(self, attr):
        # print( "__getattr__: %s" % attr )
        if( attr in self.NameList ):     
            return( 99 )
        raise AttributeError("--%r object has no attribute %r" % (type(self).__name__, attr))       

foo = Foo()
# access tool class attribute "test" - it should be seen by the override __getattr__
# the following works...
print( "foo.tool.__getattr__=%d" % foo.tool.__getattr__("test") )  
# but the following does not - why is this not the same as the line above???
print( "foo.tool.test=%d" % foo.tool.test ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T02:25:26.127

`__getattr__`Python在实例的 bases 中 寻找特殊方法`__dict__`，而不是在实例的`__dict__`.

`self.tool`是一类。`self.tool.test`因此，将调用 `__getattr__`of`self.tool`的类（即`object`）——这不是我们想要发生的。

相反，创建`self.tool`一个实例，其类具有`__getattr__`：

```
class Foo(object):
    def __init__(self):
        self.NameList=[]
        # add new class to ourself
        toolcls = type('tool', (object,), { '__getattr__' : self.__getattr__, } )
        self.tool = toolcls()
        self.NameList.append( "test" )

    # should be called by our newly added "tool" object but is only called sometimes...
    def __getattr__(self, attr):
        # print("__getattr__: (%s, %s)" % (self.__class__.__name__, attr) )
        if( attr in self.NameList ):     
            return( 99 )
        raise AttributeError("--%r object has no attribute %r" % (
            type(self).__name__, attr)) 

foo = Foo()
print( "foo.tool.__getattr__=%d" % foo.tool.__getattr__("test") )
print( "foo.tool.test=%d" % foo.tool.test ) 
```

产量

```
foo.tool.__getattr__=99
foo.tool.test=99 
```

`Foo`另外，请注意，如果在未定义的情况下创建了 的实例，则上述代码可能导致无限递归`self.NameList`。请参阅[Ned Batchelder 关于这个令人惊讶的陷阱的帖子](http://nedbatchelder.com/blog/201010/surprising_getattr_recursion.html)。

为了防止此处出现无限递归的可能性，请使用

```
def __getattr__(self, attr):
    # print("__getattr__: (%s, %s)" % (self.__class__.__name__, attr) )
    if attr == 'NameList':
        raise AttributeError()
    if( attr in self.NameList ):     
        return( 99 )
    raise AttributeError("--%r object has no attribute %r" % (
        type(self).__name__, attr)) 
```

# ruby-on-rails - 从模型 Rails 调用模块函数

> ID：13637941
> 
> 赞同：0
> 
> 时间：2012-11-30T02:01:46.307
> 
> 标签：ruby-on-rails, model, module

我`method or variable not defined`在尝试使用在模块中的函数中定义的数组时遇到了问题。

以下是文件：

`/lib/states.rb`

```
module States
  def fifty_states
    [
        'AL',
        'AK',
        'AZ',
        'AR',
        'CA',
        'CO',
        'CT',
        'DE',
        'FL',
        'GA',
        'HI',
        'ID',
        'IL',
        'IN',
        'IA',
        'KS',
        'KY',
        'LA',
        'ME',
        'MD',
        'MA',
        'MI',
        'MN',
        'MS',
        'MO',
        'MT',
        'NE',
        'NV',
        'NH',
        'NJ',
        'NM',
        'NY',
        'NC',
        'ND',
        'OH',
        'OK',
        'OR',
        'PA',
        'RI',
        'SC',
        'SD',
        'TN',
        'TX',
        'UT',
        'VT',
        'VA',
        'WA',
        'WV',
        'WI',
        'WY'
    ]
  end
end 
```

`/app/controller/player_to_team_histories_controller.rb`

```
class PlayerToTeamHistory < ActiveRecord::Base
include States

def self.distinct_states
  joins(:player).select("DISTINCT players.HometownState").where("players.HometownState IN (?)", fifty_states)
end 
```

如果我打开一个控制台，我可以做到这一点：

```
>> include States
Object

>> fifty_states
["AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:11:25.530

我认为您在这里将类与实例混淆了。如果你想从*类*方法（即）`fifty_states`内部调用，那么你必须使用，而不是：*`self.distinct_states``extend``include`*

 *```
module A
  def foo
    "myfoo"
  end
end

class B
  extend A

  def self.bar
    foo
  end
end

B.bar
#=> "myfoo" 
```

但是请注意，您不能从实例调用该方法：

```
b = B.new
b.bar
#=> NoMethodError: undefined method `bar' for #<B:0x007fefc4e19db0> 
```

这[是一篇](http://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)`include`关于vs的更多讨论的文章`extend`。

最后的消息总结得很好：

> 对实例方法使用include，对类方法使用extend。此外，有时可以使用 include 添加实例和类方法。两者都非常方便，并且允许大量代码重用。它们还允许您避免深度继承，而只是模块化代码并在需要的地方包含它，这更像是 ruby​​ 方式。*

# objective-c - 如何在objective-c中模拟受保护的属性和方法

> ID：13637944
> 
> 赞同：7
> 
> 时间：2012-11-30T02:02:05.300
> 
> 标签：objective-c, xcode4.5, protected

> **可能重复：**
> [objective-c 中的受保护方法](https://stackoverflow.com/questions/3725857/protected-methods-in-objective-c)

声明私有属性的方法很简单。

您在 .m 文件中声明的扩展名中声明它。

假设我想声明受保护的属性并从类和子类访问它。

这是我尝试过的：

```
//
//  BGGoogleMap+protected.h
//
//

#import "BGGoogleMap.h"

@interface BGGoogleMap ()
@property (strong,nonatomic) NSString * protectedHello;
@end 
```

那就是编译。然后我补充说：

```
#import "BGGoogleMap+protected.h"

@implementation BGGoogleMap ()

-(NSString *) protectedHello
{
    return _
}

@end 
```

问题开始。我似乎无法在原始 .m 文件之外实现类扩展。Xcode 将要求该括号内的内容。

如果我做

```
#import "BGGoogleMap+protected.h"

@implementation BGGoogleMap (protected)

-(NSString *) protectedHello
{
    return _
}

@end 
```

我无法访问在 BGGoogleMap+protected.h 中声明的 _protectedHello 的 ivar

当然，我可以使用常规类别而不是扩展名，但这意味着我不能拥有受保护的属性。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T04:05:11.780

[Objective-C 编程语言](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW2)是这样说的：

> 类扩展类似于匿名类别，只是它们声明的方法必须在`@implementation`相应类的主块中实现。

所以你可以在类的 main 中实现你的类扩展的方法`@implementation`。这是最简单的解决方案。

一个更复杂的解决方案是在一个类别中声明您的“受保护”消息和属性，并在类扩展中声明该类别的任何实例变量。这是类别：

### `BGGoogleMap+protected.h`

```
#import "BGGoogleMap.h"

@interface BGGoogleMap (protected)

@property (nonatomic) NSString * protectedHello;

@end 
```

由于类别不能添加实例变量来保存`protectedHello`，我们还需要一个类扩展：

### `BGGoogleMap_protectedInstanceVariables.h'

```
#import "BGGoogleMap.h"

@interface BGGoogleMap () {
    NSString *_protectedHello;
}
@end 
```

我们需要在主`@implementation`文件中包含类扩展名，以便编译器在`.o`文件中发出实例变量：

### `BGGoogleMap.m`

```
#import "BGGoogleMap.h"
#import "BGGoogleMap_protectedInstanceVariables.h"

@implementation BGGoogleMap

... 
```

我们需要在类别`@implementation`文件中包含类扩展，以便类别方法可以访问实例变量。由于我们`protectedHello`在类别中声明了属性，因此编译器*不会*合成 setter 和 getter 方法。我们必须手写它们：

### `BGGoogleMap+protected.m`

```
#import "BGGoogleMap+protected.h"

@implementation BGGoogleMap (protected)

- (void)setProtectedHello:(NSString *)newValue {
    _protectedHello = newValue; // assuming ARC
}

- (NSString *)protectedHello {
    return _protectedHello;
}

@end 
```

子类应该导入`BGGoogleMap+protected.h`才能使用该`protectedHello`属性。它们不应该导入`BGGoogleMap_protectedInstanceVariables.h`，因为实例变量应该被视为基类的私有变量。如果您发布了一个没有源代码的静态库，并且您希望该库的用户能够继承`BGGoogleMap`、发布`BGGoogleMap.h`和`BGGoogleMap+protected.h`标头，但不要发布`BGGoogleMap_protectedInstanceVariables.h`标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:41:32.433

我希望我可以告诉你，但你不能。有关更多信息，请参阅此问题：[Objective-C 中的受保护方法](https://stackoverflow.com/questions/3725857/protected-methods-in-objective-c)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:06:06.813

我不确定，你想做什么？OOPS 概念中的一些黑客或数据抽象破解？

扩展用于添加属性。您已成功添加私有财产，如

```
#import "BGGoogleMap.h"

@interface BGGoogleMap ()
@property (strong,nonatomic) NSString * protectedHello;
@end 
```

你在这做什么？

```
#import "BGGoogleMap+protected.h"

@implementation BGGoogleMap ()

-(NSString *) protectedHello
{
    return _
}

@end 
```

你已经扩展了一个类，现在你又要实现同一个类了！！！两次！！！并且类别仅带有 .h 文件。我猜你正在为自己创建一个 .m 文件，这是不可接受的。

私有属性不能在类外访问，只能从基类或子类访问。这就是错误所在。

```
I can't implement class extension outside the original .m files it seems. 
```

是的，这是 Objective-c 的抽象和数据隐藏！！！

# jquery - 如何使用 jquery 将下拉表单字段与文本字段相乘

> ID：13637945
> 
> 赞同：1
> 
> 时间：2012-11-30T02:02:20.540
> 
> 标签：jquery

我有一个带有不同美元金额的下拉列表的表单... 50 美元、100 美元等。问题是 jQuery 不将 50 美元识别为 50，我不知道如何使用正则表达式或其他方法来过滤掉 $50 前面的美元符号，这样我就可以将两个值相乘（那个值 * 一个输入字段）。

将这两个值相乘后，我尝试将总计附加到具有总计 id 的跨度。

编辑：我无法编辑 HTML。

HTML：

```
<span class="Amount">
    <select name="Amount" class="wpcf7-form-control  wpcf7-select">
        <option value="$50">$50</option>
        <option value="$75">$75</option>
        <option value="$100">$100</option>
        <option value="$150">$150</option>
        <option value="$300">$300</option>
    </select>
</spa>

<span class="Qty">
    <input type="text" name="Qty" size="2" maxlength="2">
</span>

<span id="total">total: </span> 
```

JS：

```
$('.Qty input').keyup(function() {
    var quantity = parseFloat($(this).val());

    //this returns NaN
    var dollars = $('span.Amount select').val();

    $('#total').text((quantity * dollars )); 
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:47:46.100

你只需要删除'$'

```
$('.Qty input').keyup(multiply);
$('span.Amount select').change(multiply);
function multiply() {
    var quantity = parseFloat($('.Qty input').val());

    var dollars = $('span.Amount select').val().substr(1);

    $('#total').text('$'+(quantity * dollars )); 
}​ 
```

[http://jsfiddle.net/mowglisanu/Y5YnF/1/](http://jsfiddle.net/mowglisanu/Y5YnF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:04:36.703

只是没有`$`你的字段值。这只是您的金额的显示装饰，不应该在您使用的值中或 POST 到 Web 服务器以使用。

# c++ - 如何打印 bst 中祖父母是五的倍数的节点？

> ID：13637946
> 
> 赞同：2
> 
> 时间：2012-11-30T02:02:22.203
> 
> 标签：c++, binary-search-tree

很抱歉，这是我第一次在 stackoverflow 中提问。我刚刚阅读了常见问题解答，就知道我违反了规则。我不只是应对和粘贴问题。我使用顺序遍历方法进行递归并检查节点是否为五的倍数，我不知道下一步该做什么。我应该使用标志来检查一些东西吗？

```
void findNodes(BSTNode<Key,E> *root) const
{
    if(root==NULL) return;
    else
    {
        if(root->key()%5==0)//I know it's wrong, but I don't know what to do
        {
            findNodes(root->left());
            cout<<root->key()<<" ";
            findNodes(root->right());
        }
        else
        {
            findNodes(root->left());
            findNodes(root->right());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:25:04.073

打印祖父母是 5 的倍数的节点很复杂，因为您必须“向上”查找树。如果您将问题视为找到所有 5 的倍数的节点并打印它们的孙子节点，则会更容易，因为您只需沿着树向下走。

```
void printGrandChildren(BSTNode<Key,E> *root,int level) const{
    if(!root) return;
    if(level == 2){
         cout<<root->key()<<" ";
         return;

    }else{
        printGrandChildren(root->left(),level+1);
        printGrandChildren(root->right(),level+1);

     }

} 
```

然后将您的 findNodes 修改为

```
void findNodes(BSTNode<Key,E> *root) const
{
    if(root==NULL) return;
    else
    {
        if(root->key()%5==0)
        {
            printGrandChildren(root,0);
        }
        else
        {
            findNodes(root->left());
            findNodes(root->right());
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:16:09.127

尝试这个：

```
int arr[height_of_the_tree]; //arr[10000000] if needed;

void findNodes(BSTNode<Key,E> *root,int level) const {
  if(root==NULL) return;
  arr[level] = root -> key();
  findNodes(root -> left(), level + 1);
  if(2 <= level && arr[level - 2] % 5 == 0) cout << root->key() << " ";
  findNodes(root -> right(), level + 1);
}

int main() {
  ...
  findNodes(Binary_search_tree -> root,0);
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T02:21:02.107

如果你只是想打印我们所有的子节点，它们的祖先的键是 5 的倍数，那么一种方法是将 a 传递`bool`给你的 findNodes 函数来存储这个事实。

类似于以下内容：

```
void findNodes(BSTNode<Key,E>* node, bool ancesterIsMultOf5) const
{
    if (node)
    {
        if (ancesterIsMultOf5)
            std::cout << node->key() << std::endl;

        ancesterIsMultOf5 |= (node->key() % 5 == 0); 

        findNodes(node->left(), ancesterIsMultOf5);            
        findNodes(node->right(), ancesterIsMultOf5);            
    }
} 
```

或者，如果您尝试*绘制*树，之前已经回答过：[C How to "draw" a Binary Tree to the console](https://stackoverflow.com/questions/801740/c-how-to-draw-a-binary-tree-to-the-console/8551044)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T02:24:38.120

替换以下

```
 cout<<root->key()<<" "; 
```

和

```
 if(root->left)
    {
        if(root->left->left)
            cout<<root->left->left->key()<< " ";
        if(root->left->right)
            cout<<root->left->right->key()<< " ";
    }
    if(root->right)
    {
        if(root->right->left)
            cout<<root->right->left->key()<< " ";
        if(root->right->right)
            cout<<root->right->right->key()<< " ";

    } 
```

# ruby-on-rails - Rspec 和载波。将 config.storage 更改为文件进行测试时，我得到一个 ArgumentError is not a Recognized storage provider exception

> ID：13637948
> 
> 赞同：1
> 
> 时间：2012-11-30T02:02:29.137
> 
> 标签：ruby-on-rails, rspec, carrierwave

我的应用程序中有两个载波上传器。ImageUploader 用于在本地上传，ImageRemoteUploader 用于使用雾上传到 Amazon S3 存储。ImageUploader 的存储设置为`:file`，ImageRemoteUploader 的存储设置为`:fog`。此设置工作正常，但是当我开始设置我的 rspec 测试时，情况发生了变化。

当我在测试期间将 ImageRemoteUploader 更改为使用`:file`存储时，就会出现问题。我在雾初始化文件中执行此操作。文件 */config/initializers/fog.rb*如下所示：

```
CarrierWave.configure do |config|
  if Rails.env.test?
    config.storage = :file
    config.enable_processing = false
  else
    config.fog_credentials = {
    :provider               => 'AWS',       # required
    :aws_access_key_id      => 'XXXXXXXX',       # required
    :aws_secret_access_key  => 'XXXXXX',       # required
    :region                 => 'XXXX'  # optional, defaults to 'us-east-1'
    }
    config.fog_directory  = 'xxx'                     # required
    config.fog_public     = true                                   
  end 
end 
```

当我这样做时，我得到一个`ArgumentError is not a recognized storage provider`载波异常。当我使用雾凭据（我没有将 config.storage 设置为 :file）时，测试按预期工作。

Carrierwave 0.7.1、Rails 3.2.8、Ruby 1.9.3、Rspec 2.10

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:17:33.967

[按照Carrierwave 文档](http://github.com/jnicklas/carrierwave)中的建议，我会尝试将`config.storage`和`config.enable_processing`线移入。`lib/initializers/carrierwave.rb`

`Fog`也有自己的模拟支持，通过`Fog.mock!`在示例之前运行来启用。这可能是一个更好的方法。

# batch-file - 使用子目录名称重命名子目录中的文件，并为每个子目录重新启动增量编号

> ID：13637955
> 
> 赞同：0
> 
> 时间：2012-11-30T02:03:03.177
> 
> 标签：batch-file, rename

我有几个目录，分别命名为“A”、“B”、“C”等。每个都有一些文件。我喜欢使用目录名加上每个目录中从 1 开始的索引号来重命名每个目录中的文件，左零填充到 3 的宽度。例如：子目录 A 有 3 个文件，它们将被重命名为：

```
A_001.dat
A_002.dat
A_003.dat 
```

子目录 B 有 2 个文件，应重命名为：

```
B_001.dat
B_002.dat 
```

等等。这些文件将被移动到主目录。我有以下批处理文件，但我似乎无法增加数字。请帮忙。

```
@echo off

set HomeFolder=%CD%
set OldExt=TXT
set NewExt=DAT

setlocal ENABLEDELAYEDEXPANSION
for /f "delims=" %%a in ('dir *.%OldExt% /b /s') do (
    set i=1
    for /f "delims=" %%b in ("%%~dpa\.") do (
        set pad=00!i!
        set str=!pad:~-3!
        echo move /b "%%a" "%HomeFolder%\%%~nxb_!str!.%NewExt%"
        set /A i=!i!+1
)
)
endlocal
pause 
```

而正确的答案是：

```
@echo off

set HomeFolder=%CD%
set OldExt=TXT
set NewExt=TIF
set i=1
set Folder=
set LastFolder=

setlocal ENABLEDELAYEDEXPANSION

for /f "delims=" %%a in ('dir *.%OldExt% /b /s') do (
    for /f "delims=" %%b in ("%%~dpa\.") do (
        set Folder=%%~nxb        
        if NOT !Folder!==!LastFolder! (set /A i=1)
        set LastFolder=!Folder!
        set pad=00!i!
        set str=!pad:~-3!
        copy /b "%%a" "%HomeFolder%\%%~nxb_!str!.%NewExt%"
        Set /A i+=1
    )
)

endlocal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:25:44.340

```
@echo off

:: By Elektro H@cker

Setlocal enabledelayedexpansion

set "OldExt=TXT"
set "NewExt=DAT"

FOR /R %%@ in (*%OldExt%) DO (

    REM Sets the directory of the file
    Set "Directory=%%~dp@"

    REM Cuts the directory name to obtain the last folder name
    Set "Directory=!Directory:~0,-1!"
    For /L %%X in (0,1,50) DO (Call Set "Directory=!Directory:*\=!")

    REM Check if this directory is the same of the last accesed directory to reset the counter or not
    Echo "!Directory!"|FINDSTR "^\"!LastDirectory!\"$" >NUL && (Set /A "Count+=1") || (Set /A "Count=1")

    REM Check if the number incrementation have 1-3 digits and copies the file
    Call Echo !COUNT!|FINDSTR "^[0-9]$"    >NUL && (Call Copy "%%@" ".\!Directory!_00!COUNT!.%NewExt%")
    Call Echo !COUNT!|FINDSTR "^[0-9].$"   >NUL && (Call Copy "%%@" ".\!Directory!_0!COUNT!.%NewExt%" )
    Call Echo !COUNT!|FINDSTR "^[0-9]..+$" >NUL && (Call Copy "%%@" ".\!Directory!_!COUNT!.%NewExt%"  )

    REM Sets the last accesed directory
    Call Set "LastDirectory=!Directory!"
)

Pause&exit 
```

3个名为“A”“B”和“C”的子目录，每个子目录内有3个文件，输出结果为：

```
a_001.DAT
a_002.DAT
a_003.DAT
b_001.DAT
b_002.DAT
b_003.DAT
c_001.DAT
c_002.DAT
c_003.DAT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:24:25.570

在循环或括号表达式中，您需要使用延迟扩展

设置 /a 变量=!变量!+1

但是您需要使用 setlocal ENABLEDELAYEDEXPANSION 激活此功能并使用匹配的 endlocal 重置它

尝试以下操作：

```
@echo off

set HomeFolder=%CD%
set OldExt=TXT
set NewExt=DAT

setlocal ENABLEDELAYEDEXPANSION

for /f "delims=" %%a in ('dir *.%OldExt% /b /s') do (
set i=1
for /f "delims=" %%b in ("%%~dpa\.") do (
    set pad=00%i%
    set str=%pad:~-3%
    echo move /b "%%a" "%HomeFolder%\%%~nxb_%str%.%NewExt%"
    set /A i+=1
)
)

endlocal

pause 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:58:27.800

这是任何想要做同样事情的人的工作脚本：

```
@echo off

set HomeFolder=%CD%
set OldExt=TXT
set NewExt=DAT
set i=1
set Folder=
set LastFolder=

setlocal ENABLEDELAYEDEXPANSION

for /f "delims=" %%a in ('dir *.%OldExt% /b /s') do (
    for /f "delims=" %%b in ("%%~dpa\.") do (
        set Folder=%%~nxb        
        if NOT !Folder!==!LastFolder! (set /A i=1)
        set LastFolder=!Folder!
        set pad=00!i!
        set str=!pad:~-3!
        copy /b "%%a" "%HomeFolder%\%%~nxb_!str!.%NewExt%"
        Set /A i+=1
    )
)

endlocal 
```

# c++ - 在派生类中分配时，基类中的静态成员为空

> ID：13637956
> 
> 赞同：0
> 
> 时间：2012-11-30T02:03:12.523
> 
> 标签：c++, inheritance, static

我有一个带有静态指针成员的基类。当我在派生类中分配该静态指针成员时，该静态成员在从基类的方法引用时显示为 NULL。

这不是我所期望的行为。无论从哪里访问静态指针成员，不应该仍然分配它吗？我对预期的行为有误吗？

静态成员是指向基类的指针。我意识到我想要实现的目标可能最好通过使用模板的静态多态性（[静态多态性定义和实现](https://stackoverflow.com/questions/4557141/static-polymorphism-definition-and-implementation)）来完成，但我仍然不明白为什么在这种情况下指针成员本身为 NULL。

编辑：此 SSCE 中未演示该行为。哪些错误或常见错误会导致我描述的行为？我的实际生产场景比这复杂得多，但结构几乎完全相同。我实际上是在 VS2010 调试器中观察`Base::staticMember == not null`，然后调用，`Base::staticMethod()`并且内部为空。我很困惑。`Base::staticMethod()``Base::staticMember`

```
#include <iostream>

class Base {
public:
    static Base *staticMember;

    static void baseMethod();
};

Base *Base::staticMember = NULL;

class Derived : public Base {
public:
    void derivedMethod();
};

void Base::baseMethod() {
    // here staticMember == NULL, the unexpected behavior
    if(staticMember == NULL) {
        std::cout << "NULL";
    } else {
        std::cout << "NOT NULL";
    }
};

void Derived::derivedMethod() {
    staticMember = new Derived();
}

int main(int argc, void *argv[]) {
    Derived *derived = new Derived();
    derived->derivedMethod();
    Base::baseMethod();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:07:49.920

您的编译器显然是这里的问题，我并不感到惊讶，因为它允许两者

```
int main(int argc, void *argv[]) 
```

和

```
Derived derived = new Derived(); 
```

例如，查看[ideone 中的结果](http://ideone.com/EolmYw)。该`static`成员显然**不应**为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:13:53.863

没有对您的代码的固定和简化版本进行复制：

```
#include <iostream>
#include <iomanip>

struct Base {
    static Base* staticMember;

    static void baseMethod();
};

Base* Base::staticMember;

void Base::baseMethod() {
    std::cout << std::boolalpha << (staticMember == nullptr) << std::endl;
}

struct Derived : Base {
    void derivedMethod();
};

void Derived::derivedMethod() {
    staticMember = this;
}

int main() {
    Derived derived;
    derived.derivedMethod();

    Base::baseMethod();
} 
```

打印“假”。

**总是给出一个[简短的、独立的、正确的（可编译的）示例](http://www.sscce.org/)，否则你的问题毫无意义。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:17:35.757

也许你不小心声明了 class Derived { static Base *staticMember; };

所以你有两个 staticMember 漂浮在周围。

这就是为什么 SSCE 很有用，可以防止像我这样的人做出毫无根据的猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T03:05:25.990

如前所述，SSCE 有效，但您的产品代码无效。如果您进行如下更改：

```
void Derived::derivedMethod() 
{
    Base::staticMember = new Derived();
} 
```

这明确地告诉编译器您在谈论什么变量，并且可能会引发您不小心隐藏基成员的情况。

（我认为 gcc 可能需要`Base::staticMember`- 在这种情况下可能不需要）

# css - Border-Top 属性与 Safari 5.1 不一致

> ID：13637957
> 
> 赞同：1
> 
> 时间：2012-11-30T02:03:26.823
> 
> 标签：css, safari

我目前正在这个网站上工作：

[http://tweeds.workofjonas.com](http://tweeds.workofjonas.com)

滚动时下降的绿色三角形由两个具有以下属性的三角形组成：

```
border-top: 5000px solid #398C00;
border-left: 2880.00018px solid transparent;

border-top: 5000px solid #398C00;
border-right: 2880.00018px solid transparent; 
```

这在所有浏览器（包括 Safari 6.x）中都可以正常工作，但 Safari 5.1 除外，其中 '5000px' 边框顶部宽度被解释为较小的数字。在 Safari 5.1 中将此属性提高到 8191px 这样的数字会更准确。

真的卡在这个了。我也尝试过使用“ems”，但无济于事。任何帮助将非常感激。

# .net - SQL Server RegExIndex CLR 返回错误的索引位置

> ID：13637958
> 
> 赞同：1
> 
> 时间：2012-11-30T02:03:27.870
> 
> 标签：.net, sql-server, regex, clr

我有一个 C# 中的 SQL Server CLR，其功能类似于 SQL Server CHARINDEX 函数，但允许使用正则表达式。

```
[SqlFunction]
public static SqlInt32 RegExIndex(SqlChars input, SqlString pattern, SqlInt32 beginning)
{
    Regex regex = new Regex(pattern.Value, Options);
    Match match = regex.Match(new string(input.Value), beginning.Value);
    return match.Index;
} 
```

在测试中，我发现以下应该返回 1 时返回 3：

```
select dbo.RegExIndex('test', 't', 1) 
```

以下在应该返回 4 时返回 0：

```
select dbo.RegExIndex('test', 't', 4) 
```

我想也许开始参数是零基数，但是当它应该返回 1 时也返回 0：

```
select dbo.RegExIndex('test', 't', 0) 
```

关于我可能做错了什么的任何想法？

谢谢！

这是基于提供的答案的更新代码：

```
[SqlFunction]
public static SqlInt32 RegExIndex(SqlChars input, SqlString pattern, SqlInt32 beginning)
{
    Regex regex = new Regex(pattern.Value, Options);
    return beginning.Value > input.Value.Length ? 0
        : !regex.Match(new string(input.Value), beginning.Value < 1 ? 0 : beginning.Value - 1).Success ? 0
        : regex.Match(new string(input.Value), beginning.Value < 1 ? 0 : beginning.Value - 1).Index + 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:00:33.117

您正在使用此[`Regex.Match`](http://msdn.microsoft.com/en-us/library/3583dcyh.aspx)重载：

```
public Match Match(
    string input,
    int startat
) 
```

其中`startat`参数（您的`beginning`参数）是*开始搜索的从零开始的字符位置*。此外，[`Match.Index`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture.index.aspx)属性（您的`match.Index`值）也是*找到捕获的子字符串的原始字符串中从零开始的起始位置*。

这意味着，在您的所有测试中，您都会得到正确的结果：

```
select dbo.RegExIndex('test', 't', 1) 
```

匹配最后一个`t`(index = `3`);

```
select dbo.RegExIndex('test', 't', 4) 
```

不匹配任何东西；

```
select dbo.RegExIndex('test', 't', 0) 
```

匹配第一个`t`（索引 = `0`）。

# grep - 奇怪字符串的 Grep

> ID：13637960
> 
> 赞同：1
> 
> 时间：2012-11-30T02:03:55.083
> 
> 标签：grep

我想知道是否可以使用 grep 来查找以下两个字符串之间的所有文本：

```
mutablePath = CGPathCreateMutable();
...
CGPathAddPath(skinMutablePath, NULL, mutablePath); 
```

基本上，第一行和最后一行总是相同的，中间会有一大堆随机的东西。我想从上面计算第一行和最后一行的所有实例之间出现的行数。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:21:03.313

这是另一个`awk`解决方案：

```
awk '/^mutablePath = CGPathCreateMutable\(\);$/ { m=1; c=0 }
     /^CGPathAddPath\(skinMutablePath, NULL, mutablePath\);$/ { print c-1; m=0 }
     m { c++ }'  file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:09:30.710

你不能用 来做到这一点`grep`，但你可以用 来做到这一点`awk`。这完全未经测试，但应该可以工作：

```
awk 'BEGIN { state = 0; count = 0; }
     /^mutablePath = CGPathCreateMutable();$/ { state = 1; }
     /^CGPathAddPath(skinMutablePath, NULL, mutablePath);$/
         { print count; state = 0; count = 0 }
     { if (state) count++; }'  FILE_OF_INTEREST 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T02:10:13.487

`awk`如果您可以访问它，这是一个解决方案`grep`：

```
awk '/^mutablePath = CGPathCreateMutable\(\)\;$/ {in_block=1}
     in_block==1 {count++}  
     /^CGPathAddPath\(skinMutablePath, NULL, mutablePath\)$/ {in_block==0; count--}
     END{print count}' input 
```

# java - 搜索大量有序字符串

> ID：13637965
> 
> 赞同：1
> 
> 时间：2012-11-30T02:04:12.360
> 
> 标签：java, android

现在，作为我的 android 应用程序的一部分，我有一个 .csv 文件，其中包含存储在手机 sd 卡上的 aobut 15,000 行。每次我的应用程序启动时，它都会将这 15,000 行读入两个并行数组。我对 3 个文件执行此操作，因此我总共有 6 个数组，每个数组存储 15,000 个元素。我需要在保持秩序的同时快速搜索这些项目。

我担心如果我按原样保留代码，我将开始在手机上耗尽内存并导致应用程序崩溃。仅使用搜索 csv 文件`readline`而不是将每个数组的整体读入数组列表会更快吗？这样我就不会遇到内存问题？在维持秩序的同时，有没有更好的方法来做到这一点？

SD卡上的内容格式如下：

```
New York, test1
New Jersey, test2
Colorado, test3
Arkansas, test4
New York, test5
etc.. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T02:07:14.257

我认为更好的解决方案是将它们存储在 SQLite 数据库中并`ORDER BY`在查询时使用，并且只查询您当时需要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T04:54:12.490

**-**如果要使用数组进行搜索，最好将其**转换** `array`为`List`using`Arrays.asList()`方法，**然后使用**该`contains()`方法搜索数据。

**-**另一种方法是使用`SQLite DataBase`

# javascript - Emberjs，数据源，twitter bootstrap typeahead

> ID：13637966
> 
> 赞同：3
> 
> 时间：2012-11-30T02:04:27.843
> 
> 标签：javascript, ember.js

虽然这可能特定于“提前输入”情况，并且我的示例具有静态内容，但实际上这将适用于“数据源”的任何引导程序使用。我希望有一天我长大后使用动态内容来实现我的预输入，所以我现在正在尝试绑定方式：

```
Ember.TextField.reopen({
    //add some bootstrap specific stuff
    attributeBindings: ['data-provide', 'data-items', 'dataSourceBinding:data-source'],
    'dataSourceBinding': Ember.Binding.oneWay('App.AddStoreTemplateController.statesArray')
}); 
```

我有一个带有 connectOutlets 的路由器，它附加了我的模板：

```
{{view Ember.TextField elementId="state" placeholder="NY/New York" valueBinding="state" data-provide="typeahead" data-items="4" data-source="App.router.addStoreTemplateController.statesArray"}} 
```

我的控制器：

```
 AddStoreTemplateController: Ember.ArrayController.extend({
            statesArray: ['Alabama', 'Washington']
    }), 
```

我希望在 HTML 中看到的内容：

```
<input id="state" class="ember-view ember-text-field" placeholder="NY/New York" type="text" data-provide="typeahead" data-items="4" data-source="['Alabama', 'Washington']"> 
```

它在 HTML 中实际呈现的内容：

```
<input id="state" class="ember-view ember-text-field" placeholder="NY/New York" type="text" data-provide="typeahead" data-items="4" data-source="App.router.addStoreTemplateController.statesArray"> 
```

Typeahead 文档 [http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

非常感谢。我真的很喜欢 EmberJS！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T23:33:42.603

在稍微摆弄了一下之后，我想出了一个简单的方法来做到这一点。它不需要 3rd 方库，您可以使用 Ember.TextField 来保持输入美观：

我创建了一个新的扩展 TextField 对象来分开：

```
Ember.TextFieldTypeahead = Ember.TextField.extend({
    //add some bootstrap specific stuff
    attributeBindings: ['data-provide', 'data-items', 'data-source'],
    'data-source': function(){
            return JSON.stringify(["Alabama", "Washington"]);
    }.property()
}); 
```

然后在我的模板中：

```
{{view Ember.TextFieldTypeahead elementId="state" placeholder="NY/New York" valueBinding="state" data-provide="typeahead" data-items="4" data-source=on}} 
```

事情进展顺利。唯一让我感到困惑的是，这可能是 Ember 错误或只是我对框架的新手状态，模板中的 data-source= 可以是任何东西，它仍然引用我声明的函数。只是将它作为“数据源”留在模板中会在车把构建上产生错误，所以我只是选择将值设为“on”，这样当我出于某种原因重新访问代码时，我在 6 个月内不会感到困惑。好奇的。

我还猜测我可以进一步扩展它以观察“值”，然后在值更改时使用我的服务器响应的任何 ajax 调用填充“数据源”属性以满足动态要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T08:13:00.847

您还可以执行以下操作（当您希望在从服务器键入时动态加载数据时）：

[余烬引导](https://github.com/pjlammertyn/ember-bootstrap/blob/master/packages/ember-bootstrap/lib/views/type_ahead.js)

```
EEPD.EbedMedicationArticleTypeAhead = Bootstrap.Forms.TypeAhead.extend({
    init: function () {
        this._super();

        this.set('idProperty', 'id');
    },

    valueChanged: function () {
        var id = this.get('value');
        var self = this;

        var label = this.get('_childViews')[1].$()
                        .val();

        if (Ember.empty(label) && !Ember.empty(id)) {
            var articleDescription = this.get('item.articleDescription');
            self.get('_childViews')[1].$()
                .val(articleDescription)
                .change();
        }
    } .observes('value'),

    getLabel: function (item) {
        return '%@ (%@)'.fmt(Ember.get(item, 'description'), Ember.get(item, 'amount'));
    },

    getQueryPromise: function (query) {
        //get some data from SignalR
        return $.connection.ccprCardioArticles.server.getAllByDescriptionLike(query);
    }
}); 
```

车把将如下所示：

```
{{view EEPD.EbedMedicationArticleTypeAhead
      label="Medicament:"
      name="articleNumber"}} 
```

结果：

![在此处输入图像描述](../Images/e4a373c7872f68d583795f7005293929.png)

![在此处输入图像描述](../Images/d263e8f2125880b2f768679b9090f8ef.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:57:22.880

为此，我不会使用`Ember.TextField`. 您可以执行以下操作：

```
<input ... data-items="4" {{bindAttr data-source="formattedDataSource"}}/> 
```

在您的控制器中：

```
formattedDataSource: function(){
  .. format your states array as a string or dump to json...
}.property() 
```

# mysql - SQL 来自两列的 WHERE + AND 多个查询

> ID：13637967
> 
> 赞同：0
> 
> 时间：2012-11-30T02:04:28.570
> 
> 标签：mysql, sql

我有一个大致像这样的订单数据库

```
 ORDER ID | AMOUNT | FIRSTNAME | LASTNAME
     1         50        JOHN       SMITH
     2         60        PAUL       JOHNSON
     3         20        FRANK      CAMERON
     5         80        JOHN       JOHNSON 
```

我有一个名单，我需要拉他们的订单。对于这个例子，让我们说“JOHN SMITH”和“PAUL JOHNSON”

我试过这样的查询

```
SELECT * FROM ORDERS WHERE FIRSTNAME IN ("JOHN", "PAUL") AND LASTNAME IN ("SMITH", "JOHNSON") 
```

但显然这并没有像我想要的那样工作，因为它包括在内。我不知道该怎么做，但我需要搜索类似的东西

```
WHERE FIRSTNAME,LASTNAME IN ("JOHN","SMITH";"PAUL","JOHNSON") 
```

或者

```
WHERE (FIRSTNAME,LASTNAME) IN {("JOHN","SMITH")("PAUL","JOHNSON")} 
```

显然我对 SQL 知之甚少，所以我被困在搜索什么的语法和术语上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:11:24.267

您可以使用这样的分隔逻辑`OR`：

```
SELECT * FROM ORDERS
WHERE 
(FIRSTNAME = "JOHN" AND LASTNAME = "SMITH")
OR
(FIRSTNAME = "PAUL" AND LASTNAME = "JOHNSON") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:13:53.670

你可以做这样的事情

```
SELECT *
FROM ORDERS
WHERE concat(firstname, ' ', lastname) IN ('JOHN SMITH','PAUL JOHNSON') 
```

# jquery - 如何：不同大小的内容图块？

> ID：13637971
> 
> 赞同：0
> 
> 时间：2012-11-30T02:04:58.620
> 
> 标签：jquery, css

我已经看到这种技术使用了很多（[pinterest.com](http://pinterest.com)，[factorymagazine.com](http://factorymagazine.com)），其中内容（或内容摘录）以看似流畅的方式显示在不同大小的图块中。我想知道这叫什么以及它是如何实现的。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:07:01.370

我相信您正在寻找[jQuery Masonry 插件](http://masonry.desandro.com/)，它应该满足您的所有需求并且易于使用。

演示：http: [//jsfiddle.net/SO_AMK/9U9Zh/2/](http://jsfiddle.net/SO_AMK/9U9Zh/2/)

jQuery：

```
$("#container").masonry(); 
```

如果你宁愿不使用 jQuery 也不愿使用[Vanilla Masonry](http://vanilla-masonry.desandro.com/)，它是 jQuery Masonry 的一个副本，只是它只使用 Vanilla JS，用法几乎和 jQuery Masonry 一样简单：`var wall = new Masonry(document.getElementById("container"));`

# java - 生成返回 png 文件的 Java Web 服务

> ID：13637980
> 
> 赞同：0
> 
> 时间：2012-11-30T02:06:17.713
> 
> 标签：java, web-services, webservice-client

我编写了一段 Java 代码，它获取一个字符串作为参数并调用一些 R 脚本来运行，脚本将生成一个 .PNG 文件（这是服务的结果）。我应该将其公开为 Web 服务，然后它将被网站（作为服务客户端）使用。

谁能给我一些指示如何做到这一点？有没有教程可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:46:27.417

这与设计一个接收任何输入并返回任何输出的 Web 服务没有太大区别。这里唯一的区别是您将返回二进制数据，而不是文本数据。

如果要返回二进制数据，则 Java 方法的返回值应该是字节数组 ( `byte[]`)。从 R 脚本中获取`png`文件后，将其完全读入字节数组并返回该数组。

当您在此 Java 代码之上生成 Web 服务层时，将为您生成将二进制数据转换为文本格式的“胶水”代码。

`png`文件未立即完成的问题与 Web 服务无关。您的 Java 代码调用 R 脚本，等待它完成，然后将文件读入字节数组。只要 Web 服务*客户端*愿意等待整个周期结束，就没有问题。只需确保使用正确的超时设置配置Web 服务*客户端即可。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:56:44.067

我以前没有这样做过，但是您可以将 .png 文件输出到 byte[]，然后使用[Apache Commons 中的 Base64 类](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64String%28byte%5B%5D%29 "Apache Commons 中的 Base64 类")将其转换为 String 并在 XML 响应中返回。

# installation - 从我的 WiX Burn 包中删除/卸载特定软件包的正确方法是什么？

> ID：13637982
> 
> 赞同：1
> 
> 时间：2012-11-30T02:06:18.223
> 
> 标签：installation, wix, burn

我有想要从后续版本中删除的软件包。在未来更新期间从用户计算机上卸载此软件包的正确方法是什么？（即：删除下面的 Package_B）。

我尝试从捆绑包中删除包条目并改进捆绑包版本，这是[这个 SO question](https://stackoverflow.com/questions/11572508/how-to-do-major-upgrades-when-using-burn-wix-3-6)中的答案，但这对我不起作用。

```
<?xml version="1.0">
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Bundle>
    <Chain>
      <ExePackage
        Id='Program_A'
        SourceFile='$(var.Program_A.TargetDir)\Program_A.exe'
        Cache='no'
        Permanent='yes'
        PerMachine='yes'
        Vital='yes'
        />
      </ExePackage>
      <ExePackage
        Id='Program_B'
        SourceFile='$(var.Program_B.TargetDir)\Program_B.exe'
        Cache='no'
        Permanent='yes'
        PerMachine='yes'
        Vital='yes'
        />
      <RollbackBoundary/>
      <MsiPackage
        Id='Microsoft_InstallerPkg1'
        SourceFile='$(var.Microsoft_InstallerPkg1)'
        Cache='yes'
        Permanent='yes'
        Vital='yes'
        >
      </MsiPackage>
      <RollbackBoundary/>
    <Chain>
  </Bundle>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:52:24.413

尝试这个

1.  在新包中包含相同的 exe 包。
2.  设置**DetectCondition**以检测是否存在要删除的包。//它必须被评估为真。
3.  提供**卸载命令**。//这也是必要的，否则包将使用默认参数执行（通常默认安装）

# google-app-engine - 使用 date 属性创建 Webapp2 auth 用户

> ID：13637984
> 
> 赞同：0
> 
> 时间：2012-11-30T02:06:38.527
> 
> 标签：google-app-engine, authentication, date, webapp2

我有这个基本模型：

```
class User(auth_models.User):
username = ndb.StringProperty()
email = ndb.StringProperty()
first_name = ndb.StringProperty()
last_name = ndb.StringProperty()
employee_start_date = ndb.DateProperty() 
```

但是，当我创建用户时：

```
success, obj = self.auth.store.user_model.create_user(
    "auth:"+ username,
    unique_properties = ['email'],
    email = emailaddress,
    first_name = firstname,
    last_name = lastname,
    employee_start_date = startdate) 
```

我收到以下错误：

```
NotImplementedError: Property employee_start_date does not support <type 'datetime.date'> types. 
```

*（注意：如果我不包括employee_start_date，则创建用户成功）*

现在，从我通过搜索互联网可以看出，这是因为 user_model 是一个扩展模型，并且由于某种原因它不支持日期字段。但是，我不确定。

我也尝试在创建用户后立即添加它，但我收到了相同的错误消息：

```
obj.employee_start_date = startdate
obj.put() 
```

有没有办法向这个用户模型添加日期属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:44:32.577

要使用您自己的 User 类，请确保设置

```
config = {'webapp2_extras.auth':{
    'user_model': 'your_auth.User'
}} 
```

对于 webapp2.WSGIApplication 配置参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T07:28:38.950

`startdate`您尝试分配给的`employee_start_date`值不是 type `date`，而是`datetime`。为了让您的代码正常工作，您有两种选择：

1) 更改`employee_start_date`为`datetime`：

```
employee_start_date = ndb.DateTimeProperty() 
```

2) 使`startdate`变量 as`date`和 not `datetime`。

# flash - QWebview：如何检测flash视频完成？

> ID：13637987
> 
> 赞同：4
> 
> 时间：2012-11-30T02:07:13.097
> 
> 标签：flash, qt, pyqt, qwebview

我正在尝试编写一个可以播放 Flash 列表的程序（例如，来自 YouTube。）我正在使用 QWebview 来显示视频，该插件工作正常。

但是，我如何知道一个视频何时结束，以便我可以开始下一个？

无论如何，还有其他方法可以播放 Flash 视频列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:15:15.853

是的，您可以，在闪存中，您可以检查“元数据”，这将具有 flv 视频中的属性，来自视频长度、音频、提示点等，您还可以检查缓冲区并比较其百分比：onCompletion 处理程序播放下个视频……

您最好的出价是查看有关 META DATA FLASH PLAYER 的教程......周围有大量不同的样本......

# haskell - Haskell 语言编译指示

> ID：13637989
> 
> 赞同：3
> 
> 时间：2012-11-30T02:07:41.410
> 
> 标签：haskell

如果出现错误，扣除哪些语言杂注的正确方法是什么？很多时候，我发现自己遇到了一个我有一段时间无法弄清楚的错误。经过数小时的痛苦，我意识到/google/意外发现缺少语言杂注，并且在插入丢失的杂注后一切顺利。

它没有显示在错误中，没有像“尝试添加这样那样的编译指示”或类似的任何线索。我知道有经验的haskellers只是知道这一点。但是初学者呢？有没有办法指示编译器给出线索？

例如，我经常在使用 Snap 框架时遇到类型错误，除非我输入 {-# LANGUAGE ExtendedDefaultRules #-}。我只是尝试它，因为我在其他源文件中看到它。有没有办法打开所有常见的编译指示，或者至少找出在发生错误时需要哪些编译指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T03:18:22.713

GHC 现在建议针对最常见问题的编译指示。从未建议使用 ExtendedDefaultRules，因为它从来没有*必要*——相反，更明确的类型签名可以消除对它的需要。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-30T02:11:47.667

我对 Snap 框架了解不多。如果您使用 GHC，您可以使用语言编译指示作为编译器指令的一部分：[http ://www.haskell.org/ghc/docs/7.0.4/html/users_guide/pragmas.html](http://www.haskell.org/ghc/docs/7.0.4/html/users_guide/pragmas.html)

# c# - 如何在 C# Windows 窗体中删除动态创建的文本框和标签？

> ID：13637992
> 
> 赞同：0
> 
> 时间：2012-11-30T02:07:50.490
> 
> 标签：c#, textbox, labels

我想知道如何删除动态创建`textboxes`的和`labels`，我想从这个事件中删除所有动态创建的`textboxes`和。因为所有的and都是基于数据库的。每个事件都会发生变化，并且也会发生变化。`labels``cmbMethodActions_SelectedIndexChanged``textboxes``labels``textboxes``labels`

到目前为止，这是我的代码：

```
private void cmbMethodActions_SelectedIndexChanged(object sender, EventArgs e)
    {
        GetActionFields(int.Parse(cmbMethodActions.SelectedValue.ToString()));
    }

    private void GetActionFields(int i)
    {
        MySqlCommand cmd = new MySqlCommand("call GetActionField("+i+")", cn);
        MySqlDataAdapter adapter = new MySqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        adapter.Fill(dt);

        for (int x = 0; x < dt.Rows.Count; x++)
        {
            TextBox txtfields = new TextBox();
            txtfields.Name = dt.Rows[x]["field_name"].ToString();
            txtfields.Width = 175;
            flowLayoutPanelText.Controls.Add(txtfields);

            Label txtlbl = new Label();
            txtlbl.Name = dt.Rows[x]["field_name"].ToString();
            txtlbl.Text = txtlbl.Name;
            flowLayoutPanelLabel.Controls.Add(txtlbl);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:12:12.563

```
flowLayoutPanelText.Controls.Clear();
flowLayoutPanelLabel.Controls.Clear(); 
```