# StackOverflow 问答 14673000-14673999

# ios - 如何在视图控制器中创建多个按钮/标签/图像实例？

> ID：14673000
> 
> 赞同：0
> 
> 时间：2013-02-03T13:30:29.727
> 
> 标签：ios

对于 iOS 的新项目，我想在单个视图控制器上添加对象的多个实例。每个对象将由一个按钮、一个标签和可能的 ImageView 组成。我想继续使用 iOS5（iPad 1 兼容性）并且不想使用 UIViewCollection。

这些对象的数量将是固定的：3 行和 3 列，但每个对象的内部参数会有所不同。

目前，我在我的视图控制器中创建了一个视图来处理第一个实例（见截图）

但是我怎样才能在不复制所有内容的情况下制作 8 个其他子视图呢？

谢谢

![在此处输入图像描述](../Images/7c91bb625a8b703062d532f2e1c70906.png)

# c# - 使用委托的 Lambda 函数

> ID：14673003
> 
> 赞同：0
> 
> 时间：2013-02-03T13:30:49.393
> 
> 标签：c#, delegates, lambda

我有以下内容：

```
class Program {

    delegate int myDelegate(int x);

    static void Main(string[] args) {

        Program p = new Program();
        Console.WriteLine(p.writeOutput(3, new myDelegate(x => x*x)));

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }
    private string writeOutput(int x, myDelegate del) {
        return string.Format("{0}^2 = {1}",x, del(x));
    }
} 
```

是否需要上述方法`writeOutput`？可以在没有 , 的情况下重写以下内容`writeoutput`以输出与上述相同的内容吗？

可以修改该行`Console.WriteLine("x^2 = {0}", new myDelegate(x => x*x));`以便将 3 输入到函数中吗？

```
class Program {

    delegate int myDelegate(int x);

    static void Main(string[] args) {

        Program p = new Program();

        Console.WriteLine("x^2 = {0}", new myDelegate(x => x*x));

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:37:39.397

显然不能这样写。想一想：第二个代码中*x的值是多少？*您创建了委托的实例，但是何时调用？

使用此代码：

```
myDelegate myDelegateInstance = new myDelegate(x => x * x);
Console.WriteLine("x^2 = {0}", myDelegateInstance(3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:38:47.677

你真的不需要一个代表。但是为了工作，您需要更改此行：

```
 Console.WriteLine("x^2 = {0}", new myDelegate(x => x*x)); 
```

有了这个：

```
 Console.WriteLine("{0}^2 = {1}", x, x*x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T16:24:55.413

首先，您不需要委托人。你可以直接相乘。但首先，代表的更正。

```
myDelegate instance = x => x * x;
Console.WriteLine("x^2 = {0}", instance(3)); 
```

您应该将委托的每个实例都视为一个函数，就像您在第一个示例中所做的那样。`new myDelegate(/* blah blah */)`没有必要。您可以直接使用 lambda。

我假设您正在练习使用委托/lambda，因为您可以这样写：

```
Console.WriteLine("x^2 = {0}", 3 * 3); 
```

# php - PHP 的 password_hash 是如何生成盐的？

> ID：14673005
> 
> 赞同：3
> 
> 时间：2013-02-03T13:30:57.660
> 
> 标签：php, password-hash

您好，您可能知道 PHP 最近[`password_hash`](http://php.net/manual/it/function.password-hash.php)在最新版本中引入了内置功能。文档说：

> 如果省略，将创建一个随机盐并使用默认成本。

问题是它使用什么样的方法添加盐？

我很感兴趣，因为我想知道盐是否是**随机**创建的，这样当我存储我的散列密码时，它们**总是唯一的**。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T15:55:11.700

盐是随机创建的。它们在统计上应该是唯一的。

要了解如何操作，请查看[C 源代码](http://lxr.php.net/xref/PHP_5_5/ext/standard/password.c#111)。

在 Windows 上，它将尝试使用`php_win32_get_random_bytes()`来生成盐：

```
BYTE *iv_b = (BYTE *) buffer;
if (php_win32_get_random_bytes(iv_b, raw_length) == SUCCESS) {
    buffer_valid = 1;
} 
```

在 Linux 上，它将尝试读取`/dev/urandom`以生成盐：

```
int fd, n;
size_t read_bytes = 0;
fd = open("/dev/urandom", O_RDONLY);
if (fd >= 0) {
    while (read_bytes < raw_length) {
        n = read(fd, buffer + read_bytes, raw_length - read_bytes);
        if (n < 0) {
            break;
        }
        read_bytes += (size_t) n;
    }
    close(fd);
}
if (read_bytes >= raw_length) {
    buffer_valid = 1;
} 
```

然后，在这两个之后，如果缓冲区无效（未满，可能是部分的），它使用 rand() 来填充它。请注意，在实践中这永远不会发生，这只是一个后备：

```
if (!buffer_valid) {
    for (i = 0; i < raw_length; i++) {
        buffer[i] ^= (char) (255.0 * php_rand(TSRMLS_C) / RAND_MAX);
    }
} 
```

现在，如果 C 不是你的一杯茶，那么[我的 compat 库](https://github.com/ircmaxell/password_compat)中的 PHP 实现了相同的逻辑和算法：

```
$buffer = '';
$raw_length = (int) ($required_salt_len * 3 / 4 + 1);
$buffer_valid = false;
if (function_exists('mcrypt_create_iv')) {
    $buffer = mcrypt_create_iv($raw_length, MCRYPT_DEV_URANDOM);
    if ($buffer) {
        $buffer_valid = true;
    }
}
if (!$buffer_valid && function_exists('openssl_random_pseudo_bytes')) {
    $buffer = openssl_random_pseudo_bytes($raw_length);
    if ($buffer) {
        $buffer_valid = true;
    }
}
if (!$buffer_valid && is_readable('/dev/urandom')) {
    $f = fopen('/dev/urandom', 'r');
    $read = strlen($buffer);
    while ($read < $raw_length) {
        $buffer .= fread($f, $raw_length - $read);
        $read = strlen($buffer);
    }
    fclose($f);
    if ($read >= $raw_length) {
        $buffer_valid = true;
    }
}
if (!$buffer_valid || strlen($buffer) < $raw_length) {
    $bl = strlen($buffer);
    for ($i = 0; $i < $raw_length; $i++) {
        if ($i < $bl) {
            $buffer[$i] = $buffer[$i] ^ chr(mt_rand(0, 255));
        } else {
            $buffer .= chr(mt_rand(0, 255));
        }
    }
} 
```

唯一的区别是PHP版本将使用`mcrypt`或者`openssl`如果安装了...

# linux - 如何在 git 中自动生成版本字符串

> ID：14673007
> 
> 赞同：4
> 
> 时间：2013-02-03T13:31:23.853
> 
> 标签：linux, git, version-control, auto-generate

> **可能重复：**
> [为 Git 存储库启用 ident 字符串](https://stackoverflow.com/questions/1792838/enable-ident-string-for-git-repos)

在我的项目中，每个源文件（无论是什么语言 - Java、Python、shell）都有一个注释行，其中包含源代码控制信息 - 分支、上次提交日期、提交者名称等。

这是通过使用由源代码管理应用程序自动替换的特殊占位符（例如$Branch$）来完成的。

是否有可能在 git 中实现类似的功能？

我在 Windows 上使用 Git 扩展，在 Linux 上使用尚未确定的 GUI，但我假设两者都只是调用 git 命令行工具的 GUI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:44:05.247

Git 不支持这些占位符，而且可能永远不会支持。

相反，自动生成包含`git describe`命令输出的源文件，并在编译应用程序时包含它。或者您可以生成一些配置文件（JSON 或任何您想要的）。

要生成带有版本信息的 C++ 标头，请使用这样的 shell 脚本（您可以将这些命令直接添加到您的 makefile 中）：

```
(
  echo '/* Generated file, do not edit. */'
  echo  '#define APP_VERSION "'`git describe`'"'
  echo  '#define APP_VERSION_DATE "'`git log -n 1 --format=%ai`'"'
) > version.h 
```

要为脚本语言执行此操作，您可以使用 post-commit 和其他钩子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T23:05:52.043

您必须阅读Git 中的[涂抹/清洁过滤器](https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes)才能获得关键字替换的一些迭代。

Grok 部分“关键字扩展”，其中解释了扩展 $DATE$ 关键字的示例（并且**必须进行**反向操作）。在您的情况下，大多数将 $SOMEKEYWORD$ 扩展为版本字符串的工作都可以在后台执行`git describe`，干净的部分必须手动（*您的*手）实现

# php - 使用 php 调用 oneMap Rest API

> ID：14673008
> 
> 赞同：0
> 
> 时间：2013-02-03T13:31:24.557
> 
> 标签：php, rest, curl, get

我想使用 php 从以下 url 使用一个安静的 web 服务。

```
http://www.onemap.sg/API/services.svc/basicSearch?token=qo/s2TnSUmfLz+32CvLC4RMVkzEFYjxqyti1KhByvEacEdMWBpCuSSQ+IFRT84QjGPBCuz/cBom8PfSm3GjEsGc8PkdEEOEr&searchVal=City Hall&otptFlds=SEARCHVAL,CATEGORY&returnGeom=0&rset=1 
```

我尝试使用 cURL

```
<?php
$url='http://www.onemap.sg/API/services.svc/basicSearch?token=qo/s2TnSUmfLz+32CvLC4RMVkzEFYjxqyti1KhByvEacEdMWBpCuSSQ+IFRT84QjGPBCuz/cBom8PfSm3GjEsGc8PkdEEOEr&searchVal=City Hall&otptFlds=SEARCHVAL,CATEGORY&returnGeom=1&rset=1'; //rss link for the twitter timeline
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$resp = curl_exec($curl);
echo($resp);
curl_close($curl);

?> 
```

不知何故，当我运行此代码时，它没有显示任何内容。

我错过了什么吗？顺便说一句，这是我第一次尝试做这样的事情。

*编辑添加回声（$resp）；但仍然不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:01:52.083

看起来您并没有像预期的那样使用 API。当我执行以下代码

```
<?php
$url='http://www.onemap.sg/API/services.svc/basicSearch?token=qo/s2TnSUmfLz+32CvLC4RMVkzEFYjxqyti1KhByvEacEdMWBpCuSSQ+IFRT84QjGPBCuz/cBom8PfSm3GjEsGc8PkdEEOEr&searchVal=City Hall&otptFlds=SEARCHVAL,CATEGORY&returnGeom=1&rset=1'; //rss link for the twitter timeline
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$resp = curl_exec($curl);
var_dump(curl_error($curl));
curl_close($curl);
var_dump($resp);
?> 
```

我明白了

```
string(23) "Empty reply from server" 
bool(false) 
```

这使我相信您需要更改调用 API 的方式。就像注册令牌一样。

请按照[http://www.onemap.sg/API/Help/](http://www.onemap.sg/API/Help/)提供的步骤 => OneMap REST APIs => 获取令牌 他们解释了如何请求令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:36:26.240

看看[http://php.net/manual/en/function.curl-exec.php](http://php.net/manual/en/function.curl-exec.php)它声明 curl_exec 将返回 true 或 false 或者如果设置了 CURLOPT_RETURNTRANSFER 则返回结果。您可以使用以下命令对其进行回显：

```
echo($resp); 
```

- -编辑 - -

仔细观察，问题是 URL 中的空格和逗号。一旦编码，它就可以正常工作。

这是工作网址

```
http://www.onemap.sg/API/services.svc/basicSearch?token=qo/s2TnSUmfLz+32CvLC4RMVkzEFYjxqyti1KhByvEacEdMWBpCuSSQ+IFRT84QjGPBCuz/cBom8PfSm3GjEsGc8PkdEEOEr&searchVal=City%20Hall&otptFlds=SEARCHVAL%2cCATEGORY&returnGeom=1&rset=1 
```

# php - flowplayer、php 和 javascript：隐藏流名称

> ID：14673009
> 
> 赞同：0
> 
> 时间：2013-02-03T13:31:24.277
> 
> 标签：php, javascript, rtmp, flowplayer

所以我使用 flowplayer 播放 rtmp 流，但当前流的 web 视图显示流“key”或 url。

如果这是真的，其他用户将能够“接管”我们不想要的流。所以我需要能够在网络代码中隐藏“密钥”或 url。我不想要任何身份验证，因为许多常见的 RTMP 流媒体程序在流式传输时不支持该身份验证。

在你说之前，我已经看过[http://flash.flowplayer.org/demos/plugins/streaming/secure-streaming.html](http://flash.flowplayer.org/demos/plugins/streaming/secure-streaming.html)但我无法让它与 RTMP 流仅使用固定的 .flv 流一起工作.. .

这是我的代码顺便说一句：

```
<a  
style="display:block;width:960px;height:540px;margin:10px auto"
id="stream">
</a>
<script type="text/javascript">
flowplayer("stream", "http://xxx.net/live/files/flowplayer-3.2.15.swf",
{
clip: {
url: 'stream name url key goes here',
live: true,
provider: 'rtmp'
},
plugins: {
rtmp: {
url: 'http://xxx.net/live/files/flowplayer.rtmp-3.2.11.swf',
netConnectionUrl: 'rtmp://xxx.net/live'
}
}
}
);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T03:49:46.713

您需要使用 php 文件（或其他替代文件）动态提供 URL，它必须是服务器端代码，并且看起来像

```
<?php
  $hash = $_GET['h'];
  $streamname = $_GET['v'];
  $timestamp = $_GET['t'];
  $current = time();
  $token = 'sn983pjcnhupclavsnda';
  $checkhash = md5($token . '/' . $streamname . $timestamp);

  if (($current - $timestamp) <= 2 && ($checkhash == $hash)) {
  $fsize = filesize($streamname);
   header('Content-Disposition: attachment; filename="' . $streamname . '"');
  if (strrchr($streamname, '.') == '.mp4') {
   header('Content-Type: video/mp4');
   } else {
  header('Content-Type: video/x-flv');
  }
  header('Content-Length: ' . $fsize);
  session_cache_limiter('nocache');
  header('Expires: Thu, 19 Nov 1981 08:52:00 GMT');
  header('Last-Modified: ' . gmdate('D, d M Y H:i:s') . ' GMT');
  header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre check=0');
  header('Pragma: no-cache');
  $file = fopen($streamname, 'rb');
  print(fread($file, $fsize));
  fclose($file);
  exit;
  } else {
  header('Location: /url/');
  } 
```

?>

注意，$streamname 是从 JS 的 url 部分中提取的

```
 <script type="text/javascript">
 // <![CDATA[
 window.onload = function () {
  $f("player", "flowplayer-3.2.16.swf", {
   plugins: {
    secure: {
      url: "flowplayer.securestreaming-3.2.8.swf",
      timestampUrl: "sectimestamp.php"
    }
  },
  clip: {
    url: "trailer.flv",
    urlResolvers: "secure",
    scaling: "fit",
    onStart: function (clip) {
      document.getElementById("info").innerHTML = clip.baseUrl + "/" + clip.url;
        }
       }
     });
     };
     // ]]>
     </script> 
```

如果有人试图从 Flash 播放器中直接提取源代码，并且当他们查看源代码时，他们只会看到文件名但域等通过 php 文件提供。

# javascript - PhoneGap (JS) - 多个音频流

> ID：14673011
> 
> 赞同：1
> 
> 时间：2013-02-03T13:31:34.103
> 
> 标签：javascript, cordova, audio, mp3

我一直在使用 PhoneGap 文档（[http://docs.phonegap.com/en/2.3.0/cordova_media_media.md.html#media.play](http://docs.phonegap.com/en/2.3.0/cordova_media_media.md.html#media.play)）中的这段代码来播放音频文件：

```
 // Audio player
    //
    var my_media = null;
    var mediaTimer = null;

    // Play audio
    //
    function playAudio(src) {
        if (my_media == null) {
            // Create Media object from src
            my_media = new Media(src, onSuccess, onError);
        } // else play current audio
        // Play audio
        my_media.play();

    // Stop audio
    // 
    function stopAudio() {
        if (my_media) {
            my_media.stop();
        }
        clearInterval(mediaTimer);
        mediaTimer = null;
    } 
```

所以我可以通过 onclick 事件播放音频：

playAudio(' [http://example.com/file.mp3](http://example.com/file.mp3) ');

并停止它：

停止音频（）；

这很好，但我想播放多个流并通过参数“名称”控制它们。

所以我改变了我的代码：

```
 // Audio player
    //
    var my_media = null;
    var mediaTimer = null;

    // Play audio
    //
    function playAudio(name,src) {
        if (my_media == null) {
            // Create Media object from src
            my_media = new Media(name, src, onSuccess, onError);
        } // else play current audio
        // Play audio
        my_media.play(name);

    // Stop audio
    // 
    function stopAudio(name) {
        if (my_media) {
            my_media.stop(name);
        }
        clearInterval(mediaTimer);
        mediaTimer = null;
    } 
```

// 播放和停止文件 1: playAudio('file1',' [http://example.com/file.mp3](http://example.com/file.mp3) ');

stopAudio('file1');

// 播放和停止文件 2：

playAudio('file2',' [http](http://example.com/file2.mp3) ://example.com/file2.mp3 ');

停止音频（'file2'）；

* * *

我收到的唯一消息是应用程序崩溃，有人有在 PhoneGap 上播放多个媒体文件的经验吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:21:16.373

基于 Cordova 2.3 文档：

媒体对象构造函数期望第一个参数为“src”，但您使用它来设置媒体的名称，播放器将您的名称视为媒体源并尝试使用“file1”作为媒体文件的路径

附加：phonegap Media play() 和 stop() 方法不需要参数，因此您在这些方法调用中提供的名称将被忽略

您可以尝试创建一个二维媒体播放器数组，其中每行中的第一个元素是名称，第二个元素是媒体对象。比在您的 playAudio 和 stopAudio 函数中按名称扫描数组并在正确的对象上调用 play() 和 stop() 方法

在复制和粘贴下面的代码之前，请记住我完全不确定是否可以在 phonegap 中播放多个音频文件。我知道移动 safari 音频元素不支持它：http: [//developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Using_HTML5_Audio_Video.pdf#page21](http://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Using_HTML5_Audio_Video.pdf#page21)

```
var my_medias = new Array();
...
playAudio(name,arc){
    var createnew = true;
    for(var i=0;i<my_medias.length;I++){
        if(my_medias[0]==name){
            my_medias[1].play();
            createnew=false;
        }
    }
    if(createnew){
        my_medias.push([name,new Media(src,onError,onSuccess)]);
    }
}

stopAudio(name){
    for(var i=0;i<my_medias.length;I++){
        if(my_medias[0]==name){
            my_medias[1].stop();
        }
    }
...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T03:09:04.243

我是 phonegap 的新手，我也想像你一样播放多个媒体文件。这是我的解决方案，它对我有用。

```
var mediaObjects;
var currentSound;

// where list is an array of sound name like this ['foo.mp3', 'bar.mp3']
function playSound(list){
    mediaObjects = [];
    currentSound = 0;
    for(var i = 0; i< list.length; i++){
        var mediaObject = new Media('/android_asset/www/sounds/' + list[i], onSuccess, onError);
        mediaObjects.push(mediaObject);
    }
    mediaObjects[0].play();
} 
```

在第一个媒体对象播放后。回调函数“onSuccess”将被调用，这是函数的代码

```
function onSuccess() {
    currentSound++;
    if(mediaObjects.length <= currentSound){
        return;
    }
    mediaObjects[currentSound].play();
} 
```

这段代码可能不是最好的，但它可以工作（对我来说）并且对不起我的英语希望这有帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T05:08:35.797

你可以加

```
window.location.reload(); 
```

,`stopAudio()`玩是工作`multiple audio`

```
function stopAudio() {
    if (my_media) {
        my_media.stop();
        window.location.reload();
    }
    clearInterval(mediaTimer);
    mediaTimer = null;
} 
```

# php - 使用 levenshtein 搜索多个单词

> ID：14673012
> 
> 赞同：0
> 
> 时间：2013-02-03T13:31:34.107
> 
> 标签：php, search, replace, levenshtein-distance

levenshtein 搜索是否可以针对数组检查搜索查询中的所有单词？

代码如下：

```
 $input = $query;

    // array of words to check against
    $words  = $somearray;

    // no shortest distance found, yet
    $shortest = -1;

    // loop through words to find the closest
    foreach ($words as $word) {

        // calculate the distance between the input word,
        // and the current word
        $lev = levenshtein($input, $word);

        // check for an exact match
        if ($lev == 0) {

            // closest word is this one (exact match)
            $closest = $word;
            $shortest = 0;

            // break out of the loop; we've found an exact match
            break;
        }

        // if this distance is less than the next found shortest
        // distance, OR if a next shortest word has not yet been found
        if ($lev <= $shortest || $shortest < 0) {
            // set the closest match, and shortest distance
            $closest  = $word;
            $shortest = $lev;
        }
    }

            if ($shortest == 0) {
      echo "Exact match found: $closest\n";
       } else {
         echo "Did you mean: $closest?\n";
        } 
```

在这一个中，它可能只考虑第一个单词或整个句子作为要与数组匹配的字符串。如何获得结果并用更正的单词显示整个句子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:37:12.190

好的，根据我现在从您的问题中了解到的情况，首先您需要将句子拆分为单词，例如： [如何将句子转换为单词数组？](https://stackoverflow.com/questions/618729/how-to-convert-a-sentence-to-an-array-of-words-in-php)

之后，您可以将每个单词与您的字典进行比较，方法是遍历第一个数组并在第二个数组中循环，例如：

```
foreach ($words as $word)
{
    $min_distance = strlen($word); // use mb_strlen() for non-Latin
    foreach ($dictionary as $new_word)
    {
        $dist = levenshtein($word, $new_word);
        if (($dist < $min_distance) and ($dist > -1))
        {
            $min_distance = $dist;
            $suggestion = $new_word;
        }
    }
} 
```

然后，如果距离大于 0，建议`$suggestion`.

**请注意**，这实际上是非常低效的！它以 Θ(n*m) 运行，假设`levinshtein()`以 O(1) 运行，因为您需要为每个单词循环遍历整个字典。您可能想从概念的角度了解这些东西在现实生活中是如何设计的，或者至少为较长的单词提供建议并遍历字典中更相关的部分。

# c++ - 计算目录及其子目录中的所有文件

> ID：14673014
> 
> 赞同：0
> 
> 时间：2013-02-03T13:31:42.000
> 
> 标签：c++, visual-c++

作为我正在处理的应用程序的一部分，我需要计算目录中的所有文件及其子目录。我写了一个递归函数，但奇怪的是它并没有计算大目录中的所有文件——不过它在较小的目录上工作得很好。

*在一个有 16 个文件（其中 8 个在子目录中）的目录上，它运行良好，但是在对大约 500 个文件夹中的 8000 个文件进行测试时，它停止了 760 个文件的计数。*

代码是：

```
void RecursiveSearch(wchar_t* param, int* pFiles)
{
HANDLE hFind;
WIN32_FIND_DATA wfd;

wchar_t* junk = new wchar_t [2];
StringCchPrintf(junk,2,L".");
wchar_t* path = new wchar_t [MAX_PATH];
StringCchPrintf(path,MAX_PATH,L"%s\\*",param);

hFind = FindFirstFile(path,&wfd);

    do {
        if (wfd.dwFileAttributes == FILE_ATTRIBUTE_DIRECTORY) {
            wchar_t* tpath = new wchar_t [MAX_PATH];
            StringCchPrintf(tpath,MAX_PATH,L"%s%s\\*",param,wfd.cFileName);
            if (wfd.cFileName[0] == junk[0]) {
                delete [] tpath; //filter for '.' directories
            } else {
                RecursiveSearch(tpath,pFiles);
                delete [] tpath;
            }
        } else {
            ++*pFiles;
        }
    } while (FindNextFile(hFind,&wfd) == TRUE);

delete [] junk, param, path;
return;
} 
```

'param' 传递文件路径（不带 \），'pFiles' 是指向包含文件计数的 int 的指针。

谁能告诉我我做错了什么？我在这里阅读了一些类似的帖子，但似乎都没有处理这个特定问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:43:40.950

我刚刚发现了问题，添加新目录名称时似乎没有删除*，导致路径不正确。改进后的代码如下。

```
void RecursiveSearch(wchar_t* param, int* pFiles)
{
HANDLE hFind;
WIN32_FIND_DATA wfd;

wchar_t* junk= new wchar_t [2];
StringCchPrintf(junk,2,L".");
wchar_t* path = new wchar_t [MAX_PATH];
StringCchPrintf(path,MAX_PATH,L"%s*",param);

hFind = FindFirstFile(path,&wfd);

    do {
        if (wfd.dwFileAttributes == FILE_ATTRIBUTE_DIRECTORY) {
            wchar_t* tPath = new wchar_t [MAX_PATH];

            //Remove misplaced stars
            wchar_t* locator = new wchar_t [2];
            StringCchPrintf(locator,2,L"\\");
            wchar_t* cleanParam = new wchar_t [MAX_PATH];
            for (int i = 0; i < MAX_PATH; i++) {
                if (param[MAX_PATH-i] == locator[0]) {
                    StringCchPrintf(cleanParam,(MAX_PATH-i)+2,L"%s",param);
                    break;
                }
            }

            StringCchPrintf(tPath,MAX_PATH,L"%s%s\\*",cleanParam,wfd.cFileName);
            if (wfd.cFileName[0] == junk[0]) {
                delete [] tPath;
            } else {
                RecursiveSearch(ebx,pFiles);
                delete [] tPath;
            }
        }
        else{
            ++*pFiles;
        }
    } while (FindNextFile(hFind,&wfd) == TRUE);

delete [] junk, param, path;
return;
} 
```

感谢您的评论安迪徘徊 - 你让我找到了正确的地方:)

# android - 通过应用程序运行 shell 命令..无法正常工作

> ID：14673015
> 
> 赞同：1
> 
> 时间：2013-02-03T13:32:04.430
> 
> 标签：android, shell, su, root

您好我正在尝试从应用程序执行 shell 命令。尽管代码运行没有任何错误，但看不到输出。例如，我正在尝试复制文件。此命令工作正常，同时通过 shell 命令提示符执行。这是我使用的代码。从 LogCat 中的调试语句，我可以知道所有的代码块都被覆盖了。但是文件没有被复制。请提出解决方案。PS：我通过模拟器运行这个..

```
@Override
public void onClick(View v) {
    if (v.getId() == R.id.click_button){
        String[] commands = {"cp /mnt/sdcard/rr.txt /mnt/sdcard/zzzz.txt"};
        try {
            Log.d("Ac","before fun call.....");

            RunAsRoot(commands);
            Log.d("Ac","after fun call...");

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

}
 public void RunAsRoot(String[] cmds) throws IOException{
     Process p = Runtime.getRuntime().exec("su");
     DataOutputStream os = new DataOutputStream(p.getOutputStream());            
     for (String tmpCmd : cmds) {
             os.writeBytes(tmpCmd+"\n");
            Log.d("Ac","inside...");

     }           
     os.writeBytes("exit\n");  
    Log.d("Ac","outsidee...");

     os.flush(); 
```

}

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:23:24.680

在没有安装 BusyBox 的情况下，“cp”命令在 Android shell 上不可用。或者，您可以使用：

```
cat /mnt/sdcard/rr.txt > /mnt/sdcard/zzzz.txt 
```

我所知道的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:34:31.897

看看：[RootTools](http://code.google.com/p/roottools/)
我在需要执行 shell 命令的项目中使用这个库。

> RootTools 为有根开发者提供了一套标准化的工具，用于开发有根应用程序。最后，我们将通过为开发人员提供强大、易于使用的库来实现这一目标，这将大大缩短开发时间并促进代码重用。该项目对任何认为自己有贡献的成熟开发人员开放。通过共同参与，我们可以简化我们自己的流程，提高我们应用程序的效率，学习新技术，并为我们的用户提供更好的体验。

# java - 玩！无法执行 java 可执行文件

> ID：14673019
> 
> 赞同：0
> 
> 时间：2013-02-03T13:32:37.710
> 
> 标签：java, playframework, playframework-1.x

我将我的 java 编译器版本升级到`javac 1.7.0_07`. jre 版本是`1.6.0_27`.

我做了类路径设置，命令`javac -version`和`java -version`命令提示符都正确显示了版本。

有了这个，当我尝试运行 Play 应用程序时，我在控制台中收到一条错误消息：

`Could not execute java executable. Please make sure JAVA_HOME environment is set properly.`

这是因为jdk和jre版本不匹配吗？还是其他什么原因？

请让我知道这件事。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:41:10.530

尝试卸载 JDK/JRE 并清理你的类路径/路径并安装你想要的版本

确保 JAVA_HOME 设置为您的 JDK 的位置，例如 export JAVA_HOME=/usr/java/jdk1.7.* 并且 $JAVA_HOME/bin 在您的 PATH 环境变量中。

# xpath - xpath选择具有另一个节点文本的父节点的子节点

> ID：14673021
> 
> 赞同：0
> 
> 时间：2013-02-03T13:33:01.187
> 
> 标签：xpath

我有一个 XML 文档，其中包含一个非常复杂的（对我来说）没有换行符的严格它有很多具有相似结构的元素：

```
<member><name>virtual_size</name><value>117665792</value></member> 
```

我需要获取节点“值”的文本，它是节点“成员”的子节点，该节点也有具有特定文本的子节点“名称”（在本例中为 virtual_size）。也有可能有几个相似的节点。我可以使用 [1] 等吗？

```
"//*[text()='virtual_size']" 
```

这让我得到了名称节点，但是如何达到“价值”呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:47:05.523

You can use

```
//member[name = 'virtual_size']/value 
```

finding the member with the name and then its value child

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T21:10:13.797

**使用**：

```
(//member[name = 'virtual_size'])[1]/value 
```

# javascript - JSON 中的重复值

> ID：14673025
> 
> 赞同：-2
> 
> 时间：2013-02-03T13:33:33.637
> 
> 标签：javascript, json

我在 JSON 中得到重复的值。我想用新的值替换以前的值。

```
var obj = {};
obj.Product_Id = product_id;
obj.Qty = j;
var arr = [];
arr.push(obj);
var json = JSON.stringify(arr); 
```

输出为 [{"Product_id":1,"Qty":1},{"Product_id":2,"Qty":1},{"Product_id":1,"Qty":2}]

我希望这是 [{"Product_id":1,"Qty":2},{"Product_id":2,"Qty":1}]

如果键重复其值，则应替换前一个而不添加重复值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:57:37.067

如果要维护唯一键，则必须使用此键删除任何现有元素，然后添加新对象

```
var arr = ...;
var newObj = ...;
arr = arr.filter(function(el) { return el.Product_id != newObj.Product_id; });
arr.push(newObj); 
```

如果您想维护顺序并知道具有此键的元素已经存在，您可以使用[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

```
var arr = ...;
var newObj = ...;
arr = arr.map(function(el) {
    if (el.Product_id != newObj.Product_id)
        return el;

    return newObj;
}); 
```

有关 Array 方法和属性的参考，您可以查看[`Array`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array).

# mysql - MySql 内连接返回所有结果，就好像它是左连接或交叉连接一样

> ID：14673026
> 
> 赞同：-1
> 
> 时间：2013-02-03T13:33:44.660
> 
> 标签：mysql

我有一个简单的查询，它没有给出想要的结果。查询如下

```
select * 
from friends_nudges a 
     INNER JOIN user_friends b 
      ON a.user_id = b.user_id 
where a.user_id = 104 and 
      nudge_sent = 1 
order by nudge_sent_time asc 
```

不知何故，这个查询返回了两个表的所有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:08:17.390

请试试这个：

```
select a.col, b.col -- specify accordingly
from friends_nudges a 
     INNER JOIN user_friends b 
      ON a.user_id = b.user_id 
      AND a.user_id = 104 
      AND a.nudge_sent = 1 -- where does nudge_Sent belong to? a or b?
order by a.nudge_sent_time asc -- where does this column belong to? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:31:33.700

对不起，我的错误...... user_id 列不是两个表中的主键列，这就是为什么会有这么多记录出现。所以最基本的首要检查点是：永远不要忘记基本规则。所有的连接通常都应该针对主键和外键进行。

# r - 使用变量名称模式在 R 中重塑

> ID：14673027
> 
> 赞同：0
> 
> 时间：2013-02-03T13:33:53.917
> 
> 标签：r, stata, reshape

我正在尝试使用 base R 的函数`reshape`在 Stata中重现 a 的结果。`reshape`

## 斯塔塔

```
webuse reshape3, clear
li, clean
// reshape long
reshape long inc@r ue, i(id) j(year)
list, sepby(id) clean 
```

这会产生，在之前`reshape`：

```
. li, clean

       id   sex   inc80r   inc81r   inc82r   ue80   ue81   ue82  
  1\.    1     0     5000     5500     6000      0      1      0  
  2\.    2     1     2000     2200     3300      1      0      0  
  3\.    3     0     3000     2000     1000      0      0      1 
```

请注意存根的名称模式`inc`。之后`reshape`，我得到：

```
. list, sepby(id) clean

       id   year   sex   incr   ue  
  1\.    1     80     0   5000    0  
  2\.    1     81     0   5500    1  
  3\.    1     82     0   6000    0  
  4\.    2     80     1   2000    1  
  5\.    2     81     1   2200    0  
  6\.    2     82     1   3300    0  
  7\.    3     80     0   3000    0  
  8\.    3     81     0   2000    0  
  9\.    3     82     0   1000    1 
```

## R

我在 R 中遇到了麻烦，因为我不知道如何指定解析宽格式变量名所需的正则表达式。

```
library(foreign)
dfReshape3 <- read.dta('http://www.stata-press.com/data/r12/reshape3.dta')
reshape(dfReshape3, dir='long', varying=3:8, v.names=c('inc', 'ue'),
        times = c('80', '81', '82')) 
```

但是，这给了我：

```
 id sex time  inc   ue
1.80  1   0   80 5000 5500
2.80  2   1   80 2000 2200
3.80  3   0   80 3000 2000
1.81  1   0   81 6000    0
2.81  2   1   81 3300    1
3.81  3   0   81 1000    0
1.82  1   0   82    1    0
2.82  2   1   82    0    0
3.82  3   0   82    0    1 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:51:56.167

你真的很亲密，只需列出不同的列表

```
 reshape(dfReshape3, dir='long', varying=list(c(3:5),c(6:8)), v.names=c('inc', 'ue'),times = c('80', '81', '82'))
     id sex time  inc ue
1.80  1   0   80 5000  0
2.80  2   1   80 2000  1
3.80  3   0   80 3000  0
1.81  1   0   81 5500  1
2.81  2   1   81 2200  0
3.81  3   0   81 2000  0
1.82  1   0   82 6000  0
2.82  2   1   82 3300  0
3.82  3   0   82 1000  1 
```

# java - 是否可以为 maven + jenkins 打包过程编写“本地”脚本/钩子？

> ID：14673028
> 
> 赞同：0
> 
> 时间：2013-02-03T13:34:03.120
> 
> 标签：java, maven, build, jenkins, hook

我正在使用詹金斯来构建包。我的包使用 jankins 环境变量 BUILD_ID，它提供了构建日期：[https ://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables)

问题是，我需要在 xml 配置文件中使用该日期，在来自模式[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)的 dateTime 类型的元素中。

詹金斯使用格式

```
YYYY-MM-DD_hh-mm-ss 
```

对于 BUILD_ID var，并且 dateTime 字段需要格式

```
YYYY-MM-DDTHH:MM:SS 
```

（日期和时间之间用'T'代替'_'，时间分隔符用':'代替'-'）。

我知道有一个 jenkins 插件允许为 BUILD_ID 变量设置自定义日期格式，但我无法触摸 jenkins。是否可以编写一个“本地”脚本/钩子（本地我的意思是在我的项目范围内，而不对外部工具进行任何更改），在它从 jenkins 读取它之后转换该 BUILD_ID ？现在我在 pom 的元素中使用该行读取 BUILD_ID：

```
<buildinfo.timestamp>${env.BUILD_ID}</buildinfo.timestamp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:22:55.797

有一个名为[maven-timestamp-plugin](http://code.google.com/p/maven-timestamp-plugin/)的小型 maven 插件可能会对您有所帮助。它以您喜欢的格式创建时间戳并将其写入您可以访问的系统属性，类似于 Jenkins `BUILD_ID`。

您的插件配置将如下所示：

```
<plugin>
  <groupId>com.keyboardsamurais.maven</groupId>
  <artifactId>maven-timestamp-plugin</artifactId>
  <version>1.0</version>
  <configuration>
    <propertyName>timestamp</propertyName>
    <timestampPattern>yyyy-MM-ddTHH:mm:ss</timestampPattern>
  </configuration>
  <executions>
    <execution>
     <goals>
      <goal>create</goal>
     </goals>
    </execution>
  </executions>
</plugin> 
```

...在您的 XML 文件中，您可以编写`<buildinfo.timestamp>${timestamp}</buildinfo.timestamp>`

# c++ - 带指针参数的函数

> ID：14673041
> 
> 赞同：0
> 
> 时间：2013-02-03T13:35:35.677
> 
> 标签：c++

我无法在标题中清楚地说明我的问题，但确实如此。

```
void DChatbox::ClampObject(DTextbox _txtbox) {

    this->_txtbox = &_txtbox;

} 
```

这个只是创建一个`_txtbox`不引用它的副本。

但这一个有效。

```
void DChatbox::ClampObject(DTextbox* _txtbox) {

    this->_txtbox = _txtbox

} 
```

当我检查第一个时，它只是复制它，而不是引用它。为什么会这样？

*注意：* `_txtbox` on`DChatbox`被声明为 this`DTextbox* _txtbox`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:40:10.793

在您的第一种情况下，指针成员被分配了一个对象的地址，该`DTextbox`对象是函数本地的，并且保证只存在到函数范围`{ }`结束。
当您`this->_txtbox`在函数之外引用时`DChatbox::ClampObject`，您得到的是**Undefined Behavior**。

在第二种情况下，指针成员被分配给传递给函数的对象的地址，并且可能（*很难说，除非你显示调用它的代码*）传递给函数的对象的生命周期对于你的程序来说足够长正常工作，因此它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:41:08.667

这是因为第一个版本按值传递参数，即它复制整个对象。当该方法完成时，它只是删除副本。因此，当方法完成时，该本地对象的地址是无效的，因为它指向一个已删除的对象。

第二个版本使用指针传递参数，因此指针引用真实对象而不是对象的副本。因此，当方法完成时，指针的值仍然和它指向一个仍然存在的对象一样。

# ember.js - Ember js，在嵌套资源中加载附加模型

> ID：14673042
> 
> 赞同：1
> 
> 时间：2013-02-03T13:35:37.007
> 
> 标签：ember.js, ember-data

我完全被卡住了，这是[小提琴](http://jsfiddle.net/drulia/efmAn/)。在示例中，我希望能够在访问 url /cars/details 时加载其他数据，但我不知道该怎么做。

这是我的模型：

```
App.Cars = DS.Model.extend({
    name: DS.attr('string'),
    details: DS.belongsTo('App.Details')
});

App.Details = DS.Model.extend({
    name: DS.attr('string'),
    color: DS.attr('string'),
    wheels: DS.attr('string')
}); 
```

这里缩短了 FIXTURES

```
App.Cars.FIXTURES = [{
  id: 1,
  name: 'Alfa Romeo',
  details: 1
}];

App.Details.FIXTURES = [{
  id: 1,
  name: 'Alfa Romeo',
  color: 'Red',
  wheels: '14'
}]; 
```

任何想法如何实现这一点，我确定我错过了一些非常简单的东西，只是不知道是什么。

**编辑**

有趣的是，在原始项目中，如果我在假设显示详细信息的 url 上重新加载，我会看到详细信息，但这只会发生一次。我将模型打印到控制台：

```
App.DetailsRoute = Ember.Route.extend({
  model: function(params) {
    console.log(params) // prints once only if loaded app was loaded to this url
    return App.Details.find(params.table_id);
  },
  setupController: function(controller, model) {
    console.log(model) // prints every time you click on a car
    controller.set('content', model);
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:11:58.213

有两件事使您的代码无法正常工作：

您正在将 传递`car`给`{{linkTo 'details' car}}`助手。因此， the`car`将是`DetailsRoute`（也是 the `DetailsController`）的模型，但您想要的是`car.details`：

```
{{#each car in controller}}
    {{#linkTo 'details' car.details}}
        {{car.name}}
    {{/linkTo}}
{{/each}} 
```

另一件不起作用的事情是您的固定装置`id`是整数。

[如您在此 JSFiddle 中所见，](http://jsfiddle.net/lcoq/efmAn/9/)将它们替换为字符串即可。

# c# - 尝试保存到 SQL 数据库时出现参数异常

> ID：14673043
> 
> 赞同：0
> 
> 时间：2013-02-03T13:35:39.473
> 
> 标签：c#, sql

无法对`DataRow`列执行验证。后端的列是 allowed `null`，但仍在抛出异常。当我尝试使用其中的`null`值进行保存时，`cellNumber.Text`它不应该引发异常，我尝试使用 if 语句进行验证，但也没有成功。请帮忙。

```
private void btnSave_Click(object sender, EventArgs e)
{
    DataRow dr = dt.NewRow();
    dr["FirstName"] = txtFirstName.Text;
    dr["LastName"] = txtLastName.Text;
    dr["Shirt"] = txtShirt.Text;
    dr["Pant"] = txtPant.Text;
    if (dr.IsNull("CellNumber"))
    {
        MessageBox.Show("Please enter Cell number");
    }
    else
    {
        dr["CellNumber"] = txtCellNo.Text; //Argument exception is thrown here
    }
    dr["DueDate"] = txtDueDate.Text;
    dr["Date"] = txtDate.Text;
    dt.Rows.Add(dr);

    try
    {
        da.Update(ds, "Measurement");
    }
    catch (DBConcurrencyException ex)
    {
        MessageBox.Show(ex.Message);
        dt.Clear();
        da.Fill(ds, "Measurement");
    }
    finally 
    { 
        MessageBox.Show("Success");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:30:01.940

你可能检查错了。你有这个：

```
if (dr.IsNull("CellNumber"))
{
    MessageBox.Show("Please enter Cell number");
}
else
{
    dr["CellNumber"] = txtCellNo.Text; 
}
dr["CellNumber"] = txtCellNo.Text;//Argument exception is thrown here 
```

检查 txtCellNo.Text 的内容而不是 dr["CellNumber"] 会更有意义。

# c#-4.0 - 如何在 C# 中以编程方式更改屏幕分辨率

> ID：14673046
> 
> 赞同：1
> 
> 时间：2013-02-03T13:36:07.630
> 
> 标签：c#-4.0

我想在我的应用程序启动时更改屏幕分辨率。我的表单大小大于我的屏幕分辨率，所以当我通过 regedit 将分辨率修改为更大时。可以正确看到所以我想要一个代码，它本身可以更改屏幕分辨率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:50:13.177

MSDN上有一些关于此的文档：

[http://msdn.microsoft.com/en-us/library/aa719104%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa719104%28v=vs.71%29.aspx)

在该页面上滚动到“任务 2：更改显示分辨率”。

# testing - CUDA，测试吞吐量的小程序

> ID：14673048
> 
> 赞同：0
> 
> 时间：2013-02-03T13:36:15.170
> 
> 标签：testing, cuda, throughput

我需要通过在不同场景下测试它们的吞吐量来测试一些 GPU。

这包括一个简单的 64b 乘法：

```
__device__ void add(unsigned int *data, bool flag){
unsigned int index = threadIdx.x;
unsigned int result;

asm ("{\n\t"
     "add.cc.u32    %1, %1, %1;\n\t"
     "addc.u32  %0, 0, 0;\n\t"
     "}"
     : "=r"(result), "+r"(index): );

if(flag)
    data[threadIdx.x] = result;
} 
```

64b 模数：

```
__device__ void mod(){
    asm ("{\n\t"
         ".reg .u64 t1;\n\t"
         "cvt.u64.u32   t1, %0;\n\t"
         "rem.u64       t1, t1, t1;\n\t" 
         "}"
         : : "r"(index));
} 
```

和 64b mul+mod：

```
__device__ void mulmod
    asm ("{\n\t"
         ".reg .u64 t1;\n\t"
         ".reg .u64 t2;\n\t"
         "mul.wide.u32  t1, %0, %0;\n\t"
         "cvt.u64.u32   t2, %0;\n\t"
         "rem.u64       t1, t1, t2;\n\t"
         "}"
         : : "r"(index));
} 
```

我认为任何内存访问对我的意图都是完全没用的，我想使用线程索引变量作为输入。

而且由于我要在没有寄存器上写，所以我不需要关心寄存器的使用，我可以启动尽可能多的线程（每个 GPU 允许）

我想知道：

*   如果这是正确的方法

*   除了最大化线程数之外，是否有任何特定的线程配置可以检索到最佳吞吐量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:12:26.063

您的第一个“子问题”的答案是否定的，这不是正确的方法，因为您编写的这些函数都不会被编译器发出。

您可以在[我上面链接的问题的答案](https://stackoverflow.com/a/14659837/681865)中看到更多详细信息，但简短的版本是 C 编译器级别的死代码优化将消除任何不参与写入内存的值的代码。因此，您必须让这些函数返回一个值，并且您必须以编译器无法推断出对您的设备函数的调用是多余的并消除它的方式使用返回值。

除此之外，每个 SM 必须有足够的活动扭曲来分摊架构中的所有指令调度延迟，并确保测量设备功能的指令吞吐量，而不是指令调度程序和流水线的延迟。

# c# - 为 C# 包装原生 DLL

> ID：14673049
> 
> 赞同：8
> 
> 时间：2013-02-03T13:36:23.120
> 
> 标签：c#, c++, string, pinvoke

我编写了一个 C++ DLL，现在我需要从托管应用程序调用本机函数。

导出的原生函数如下所示：

```
extern "C" __declspec(dllexport) 
bool NativeMethod(char *param1, char *param2, char *result); 
```

因此，从 C# 中，我将调用传递 2 个输入参数、1 个输出参数的函数，显然我将读取返回的 bool 值。

我试图以多种方式包装所有这些，但总是遇到`PInvokeStackImbalance`异常。我知道调用本机函数的唯一方法是`CallingConvention = CallingConvention.Cdecl`在 .NET 函数声明上应用 )。但是，通过这种方式，我无法读取输出参数（始终为空字符串），并且返回值始终为真。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-03T17:01:55.770

首先，我会调整你的原生函数的原型。

由于这个函数有一个*C 接口*，你应该使用 C 类型的布尔值，而不是像`bool`. 您可能想使用 Win32 的`BOOL`类型。

此外，就目前而言，您的函数容易出现*缓冲区溢出*：最好添加另一个参数来指定目标`result`字符串缓冲区的最大大小。

另请注意，导出纯 C 接口函数（如许多 Win32 API 函数）的 DLL 的广泛*调用约定*是`__stdcall`(not `__cdecl`)。我也会用那个。

最后，由于前两个参数是*输入*字符串，您可能希望使用`const`它来明确并强制执行 const 正确性。

所以，我会像这样制作导出的本机函数的原型：

```
extern "C" __declspec(dllexport) 
BOOL __stdcall NativeFunction(
    const char *in1, 
    const char *in2, 
    char *result, 
    int resultMaxSize); 
```

然后，在 C# 端，您可以使用以下 P/Invoke：

```
 [DllImport(
        "NativeDll.dll", 
        CharSet = CharSet.Ansi, 
        CallingConvention = CallingConvention.StdCall)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool NativeFunction(
        string in1,
        string in2,
        StringBuilder result, 
        int resultMaxSize); 
```

请注意，对于输出字符串，`StringBuilder`使用了 a。

另请注意，`CharSet = CharSet.Ansi`它用于将 C# 的 Unicode UTF-16 字符串编组为 ANSI（请注意转换是*有损*的- 如果您想要无损转换，也只需`wchar_t*`在 C++ 端使用字符串）。

我用一个简单的 C++ 本地 DLL 做了一个测试：

```
// NativeDll.cpp

#include <string.h>
#include <windows.h>

extern "C" __declspec(dllexport) 
BOOL __stdcall NativeFunction(
    const char *in1, 
    const char *in2, 
    char *result, 
    int resultMaxSize)
{
    // Parameter check
    if (in1 == nullptr 
        || in2 == nullptr 
        || result == nullptr 
        || resultMaxSize <= 0)
        return FALSE;

    // result = in1 + in2
    strcpy_s(result, resultMaxSize, in1);
    strcat_s(result, resultMaxSize, in2);

    // All right
    return TRUE;
} 
```

它被以下 C# 控制台应用程序代码成功调用：

```
using System;
using System.Runtime.InteropServices;
using System.Text;

namespace CSharpClient
{
    class Program
    {
        [DllImport(
            "NativeDll.dll", 
            CharSet = CharSet.Ansi, 
            CallingConvention = CallingConvention.StdCall)]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool NativeFunction(
            string in1,
            string in2,
            StringBuilder result, 
            int resultMaxSize);

        static void Main(string[] args)
        {
            var result = new StringBuilder(200);
            if (! NativeFunction("Hello", " world!", result, result.Capacity))
            {
                Console.WriteLine("Error.");
                return;
            }

            Console.WriteLine(result.ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:36:17.957

如果您只使用 COM Interop，您将为自己省去很多 P/Invoke 的麻烦。将方法放在 COM 接口中并更改签名以遵循 COM 约定：

```
interface ISomeInterface : IUnknown
{
    HRESULT NativeMethod([in] BSTR bstrParam1, [in] BSTR bstrParam2, 
                         [out] BSTR* pbstrParam3, [out, retval] VARIANT_BOOL* pvbResult);
} 
```

我将**char***更改为**BSTR**，将**bool**更改为**VARIANT_BOOL**，因为这些是 COM 分别用于字符串和布尔值的类型。此外，所有 COM 方法都必须返回**HRESULT**。如果您想要一个“实际”返回值，您必须将其添加为最后一个**输出**参数，并使用**retval**属性对其进行标记。

然后从 C# 项目中添加对 COM 组件的引用，您将获得直观的 C​​# 签名，而无需猜测如何将 C++ 类型与 C# 类型匹配：

```
bool NativeMethod(string bstrParam1, string bstrParam2, out string pbstrParam3) 
```

（这就是它在对象浏览器中的显示方式。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:41:43.417

为什么注意使用 .Net 代码编组使用 DLLImport 如下

```
[DllImport(@"C:\TestLib.dll")]
        public static extern void ProtectDocument(
            out [MarshalAs(UnmanagedType.LPStr)]string validToDate); 
```

然后您可以将该函数调用为本地函数，如下所示

```
string x=string.empty;
ProtectDocument(out x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T13:58:46.013

```
 [DllImport("MyDll.dll", EntryPoint = "NativeMethod", CallingConvention = CallingConvention.Cdecl)]
    static extern bool NativeMethod(
        [MarshalAs(UnmanagedType.LPStr)]string param1,
        [MarshalAs(UnmanagedType.LPStr)]string param2,
        [MarshalAs(UnmanagedType.LPStr)]string param3); 
```

如果您正在使用宽字符，请替换`LPStr`为。`LPWStr`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-03T13:59:17.567

```
[DllImport("MyLibrary.dll", EntryPoint = "NativeMethod")]
public static unsafe extern bool NativeMethod(
    [MarshalAs(UnmanagedType.LPStr)] string param1,
    [MarshalAs(UnmanagedType.LPStr)] string param2,
    [MarshalAs(UnmanagedType.LPStr)] char *param3); 
```

输出参数必须是 a `char *`，因为 C# 字符串是不可变的。您像这样调用该方法（在不安全的上下文中）：

```
char[] output = new char[100];
fixed (char *param = &output[0])
{
    NativeMethod("blahblah", "blahblah", param);
} 
```

除非输出参数不是字符串而是单个字符，在这种情况下你可以这样做：

```
[DllImport("MyLibrary.dll", EntryPoint = "NativeMethod")]
public static unsafe extern bool NativeMethod(
    [MarshalAs(UnmanagedType.LPStr)] string param1,
    [MarshalAs(UnmanagedType.LPStr)] string param2,
    out char param3); 
```

你可以像这样使用它：

```
char output;
NativeMethod("blahblah", "blahblah", out output); 
```

# html - HTML日期输入设置箭头默认控制的内容

> ID：14673055
> 
> 赞同：0
> 
> 时间：2013-02-03T13:37:15.710
> 
> 标签：html, date, input

有没有办法告诉日期输入

```
<input type="date" /> 
```

默认情况下，哪个字段应该由右侧的箭头控制？他们正在设置年份，但我想设置它们，以便他们默认控制日期。（我知道我可以点击日期字段，但这就是我要避免的！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:54:09.043

我不认为有 - 至少不是单独使用 HTML。`date`输入类型目前没有得到广泛支持，请参阅[http://caniuse.com/#feat=input-datetime](http://caniuse.com/#feat=input-datetime)。

对我来说，在 Chrome 上，它默认操纵这一天。

您可能想查看[jQuery Masked Input](http://digitalbush.com/projects/masked-input-plugin/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T18:18:52.097

感谢你的回答！我的一个朋友意识到它总是改变第一个字段，并且第一个字段的内容受计算机日期/时间显示设置的影响。

# php - WordPress分页问题

> ID：14673056
> 
> 赞同：0
> 
> 时间：2013-02-03T13:37:25.347
> 
> 标签：php, wordpress, pagination

我的 Wordpress 分页有问题。

每次我点击分页链接时，它都会将我带到下一页，但分页不会更新（因此，例如，当我点击页面“2”时，分页仍然认为它在页面“1”上。

这是一个奇怪的错误，但它仍然让我感到沮丧（特别是看到我已经拉了两天的头发只是试图让分页工作完全停止！）。

这是我的分页代码：

```
 function paginate() {
global $wp_query, $wp_rewrite;
$wp_query->query_vars['paged'] > 1 ? $current = $wp_query->query_vars['paged'] : $current = 1;

$pagination = array(
    'base' => @add_query_arg('page','%#%'),
    'format' => '',
    'total' => $wp_query->max_num_pages,
    'current' => $current,
    'show_all' => true,
    'type' => 'list',
    'next_text' => '&raquo;',
    'prev_text' => '&laquo;'
    );

if( $wp_rewrite->using_permalinks() )
    if ( is_home() ) {
        //fixes index.php weird error on how it displays the pagination URL which causes errors only on index.php
        $pagination['base'] = user_trailingslashit( trailingslashit( remove_query_arg( 's', get_pagenum_link( 1 ) ) ) . '?page=%#%/', 'paged' );
    } else {
        $pagination['base'] = user_trailingslashit( trailingslashit( remove_query_arg( 's', get_pagenum_link( 1 ) ) ) . 'page/%#%/', 'paged' );
    }
if( !empty($wp_query->query_vars['s']) )
    $pagination['add_args'] = array( 's' => get_query_var( 's' ) );

echo paginate_links( $pagination );
} 
```

而且，如果它有帮助，这里是被调用的循环：

```
 if ( get_query_var('paged') ) { $paged = get_query_var('paged'); } else if ( get_query_var('page') ) {$paged = get_query_var('page'); } else {$paged = 1; }

                $archiveArgs = array( 'posts_per_page' => 8, 'paged' => $paged);
                $archiveLoop = new WP_Query();
                $archiveLoop->query( $archiveArgs );

         while ( $archiveLoop->have_posts() ) : $archiveLoop->the_post(); ?> 
```

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:09:06.343

尝试改变你的

```
 'base' => @add_query_arg('page','%#%') 
```

作为

```
 'base' => @add_query_arg('paged','%#%') 
```

没有测试。如果不是，可能是这个问题，然后在点击分页时查看你的网址

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-13T07:00:31.823

尝试使用 wordpress 插件，它可以帮助您进行分页，不需要内置分页，即 1 2 3 等等。这个插件为您提供了更好的分页格式。

[https://wordpress.org/plugins/jquery-post-splitter/](https://wordpress.org/plugins/jquery-post-splitter/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:03:54.720

您在三进制中有错误，应该是：

```
$current =  $wp_query->query_vars['paged'] > 1 ? $wp_query->query_vars['paged'] : 1; 
```

# python - SQLAlchemy 联合括号问题

> ID：14673060
> 
> 赞同：9
> 
> 时间：2013-02-03T13:37:32.797
> 
> 标签：python, python-2.7, sqlalchemy

我需要生成类似于以下内容的查询：

```
(select * from ... where .. and .. order by .. limit ..)
union all
(select * from ... where .. and .. order by .. limit ..)
order by .. 
```

使用 SQLAlchemy，我创建了两个查询对象，如下所示：

```
q1 = Session.query(..).filter(..).filter(..).order_by(..).limit(..)
q2 = Session.query(..).filter(..).filter(..).order_by(..).limit(..)
q = q1.union_all(q2).order_by(..).all() 
```

但是它不起作用，因为 SQLAlchemy 生成查询： q1 和 q2 不在括号内，它会产生错误。

我怎样才能在括号内为 q1 q2 union 获取这些语句以产生上述查询？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-03T13:42:28.220

您需要创建子查询，然后从这些子查询中进行选择：

```
from sqlalchemy import union_all

q1 = Session.query(..).filter(..).filter(..).order_by(..).limit(..).subquery()
q2 = Session.query(..).filter(..).filter(..).order_by(..).limit(..).subquery()
q = Session.query(..).select_entity_from(union_all(q1.select(), q2.select()).order_by(..).all() 
```

该[`.subquery()`方法](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.subquery)返回一个[Alias 对象](http://docs.sqlalchemy.org/en/latest/core/selectable.html#sqlalchemy.sql.expression.Alias)，该对象不`union_all`直接支持查询。因此，相反，我们需要构建一个[`select_entity_from()`构造](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.select_entity_from)，而是传入[`sqlalchemy.sql.expression.union_all()` *函数*](http://docs.sqlalchemy.org/en/latest/core/selectable.html#sqlalchemy.sql.expression.union_all)结果，因此您仍然可以将结果映射到正确的对象。

# java - 在java中合并多个文件

> ID：14673063
> 
> 赞同：4
> 
> 时间：2013-02-03T13:37:51.060
> 
> 标签：java

我有一组要合并的文件。这是我尝试过的，但没有奏效。

```
 public static void joinf(File f1, File f2){

    try{

        InputStream in = new FileInputStream(f1);

        OutputStream out = new FileOutputStream(f2,true);

        byte[] buf = new byte[8192];
        int len;
        while ((len = in.read(buf)) > 0){
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
        System.out.println("File copied.");
    }
    catch(FileNotFoundException ex){
        System.out.println(ex.getMessage() + " in the specified directory.");
        System.exit(0);
    }
    catch(IOException e){
        System.out.println(e.getMessage());            
    }
}

public void pro(File a,File[]b){
    for(int i=0;i<b.length;i++){

        joinf(a,b[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-03T13:53:03.107

使用[IOUtils](http://commons.apache.org/io/)来执行此操作。看我的例子：

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import org.apache.commons.io.IOUtils;

public class SourceCodeProgram {

    public static void main(String[] args) throws Exception {
        IOCopier.joinFiles(new File("D:/d.txt"), new File[] {
                new File("D:/s1.txt"), new File("D:/s2.txt") });
    }
}

class IOCopier {
    public static void joinFiles(File destination, File[] sources)
            throws IOException {
        OutputStream output = null;
        try {
            output = createAppendableStream(destination);
            for (File source : sources) {
                appendFile(output, source);
            }
        } finally {
            IOUtils.closeQuietly(output);
        }
    }

    private static BufferedOutputStream createAppendableStream(File destination)
            throws FileNotFoundException {
        return new BufferedOutputStream(new FileOutputStream(destination, true));
    }

    private static void appendFile(OutputStream output, File source)
            throws IOException {
        InputStream input = null;
        try {
            input = new BufferedInputStream(new FileInputStream(source));
            IOUtils.copy(input, output);
        } finally {
            IOUtils.closeQuietly(input);
        }
    }
} 
```

如果您不能使用 IOUtils lib，请编写您自己的实现。例子：

```
class IOUtils {
    private static final int BUFFER_SIZE = 1024 * 4;

    public static long copy(InputStream input, OutputStream output)
            throws IOException {
        byte[] buffer = new byte[BUFFER_SIZE];
        long count = 0;
        int n = 0;
        while (-1 != (n = input.read(buffer))) {
            output.write(buffer, 0, n);
            count += n;
        }
        return count;
    }

    public static void closeQuietly(Closeable output) {
        try {
            if (output != null) {
                output.close();
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:42:32.470

在其当前形式中，您的`pro`方法将文件附加`a`到每个`b`文件。原因是您的`joinf(a, b)`方法将 file 附加`a`到 file `b`，而不是相反。

要解决它，这个：

```
joinf(a,b[i]); 
```

应该改成这样：

```
joinf(b[i], a); 
```

或类似的东西。

* * *

仅供参考：您的代码中还有其他各种问题。请检查它们，以便您下次可以编写更好的代码...

*   在某些情况下，您的 joinf 方法可能会泄漏文件描述符 - 资源应该在`finally`.
*   像这样调用`System.exit()`库方法使得重用变得困难。
*   您正在丢弃堆栈跟踪。这将使您的应用程序的现场部署副本的调试变得困难。
*   处理 IOException 的策略是错误的。如果你在那里得到了一个意外的 IOException，那就是大错特错了。打印并继续是一个非常糟糕的主意。
*   名字`pro`和`joinf`是糟糕的选择。
*   没有 javadocs

# mysql - MySQL 错误 150 设置第二个外键

> ID：14673065
> 
> 赞同：0
> 
> 时间：2013-02-03T13:38:09.347
> 
> 标签：mysql, database, foreign-keys

我无法在我的房屋出租数据库中设置多个外键。

房子有很多房间，里面有很多租户，每个租户都有一个租户。一个租户可以有多个租约。

我的数据库创建如下：

```
DROP TABLE IF EXISTS house;
CREATE TABLE house
(
    house_name varchar(30) NOT NULL PRIMARY KEY,
    address_first_line varchar(60),
    address_city varchar(30),
    address_postcode varchar(8)
);

-- rooms

DROP TABLE IF EXISTS room;
CREATE TABLE room
(
    house_name varchar(30) NOT NULL,
    room_number smallint NOT NULL,
    PRIMARY KEY(house_name,room_number),
    FOREIGN KEY (house_name) REFERENCES house(house_name)
);

-- tenants

DROP TABLE IF EXISTS tenant;
CREATE TABLE tenant
(
    tenant_id smallint NOT NULL,
    tenant_firstname varchar(20),
    tenant_surname varchar(20),
    tenant_telephone varchar(12)
);

-- rentals

DROP TABLE IF EXISTS tenancy;
CREATE TABLE tenancy 
(
    house_name varchar(30) NOT NULL,
    room_number smallint NOT NULL,
    start_date date NOT NULL,
    end_date date,
    tenant_id smallint NOT NULL,
    advance smallint,
    deposit smallint,
    PRIMARY KEY (house_name,room_number,start_date),
    FOREIGN KEY (house_name,room_number) REFERENCES room(house_name,room_number),
    FOREIGN KEY (tenant_id) REFERENCES tenant(tenant_id)
); 
```

此行正在生成“1005 错误：无法创建表租赁（错误号：150）”：

```
FOREIGN KEY (tenant_id) REFERENCES tenant(tenant_id) 
```

租户表是租户和房间之间的关系，这就是它引用这两个表的原因。

我怀疑这真的很简单，但我很难得到它，希望能得到一点帮助。

谢谢，

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:40:11.667

`tenants.tenant_id`必须是`PRIMARY KEY`为了它`REFERENCE`作为`FOREIGN KEY`。

```
-- tenants

DROP TABLE IF EXISTS tenant;
CREATE TABLE tenant
(
    tenant_id smallint NOT NULL,
    tenant_firstname varchar(20),
    tenant_surname varchar(20),
    tenant_telephone varchar(12),
    PRIMARY KEY(tenant_id)
); 
```

# javascript - jQuery：将 .live 转换为 .on/.off

> ID：14673072
> 
> 赞同：0
> 
> 时间：2013-02-03T13:38:47.247
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 1.7 - 将 live() 变成 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)

我有这个代码：

```
<script>
        jQuery('#ultimecomunicazioni')
    .live("mouseenter", function() {
        jQuery(this).append('<span id="ultimecomunicazioni_appear" style="font-weight:normal;margin-left:5px">(<a style="color:grey" href="<?php echo esc_url( home_url( '/' ) ); ?>comunicazioni/">tutte</a>)</span>');
    })
    .live("mouseleave", function() {
        jQuery(this).children('#ultimecomunicazioni_appear').remove();
    });
</script> 
```

我想将两个 .live 更改为 .on 并将两个处理程序合二为一。我试图使用TJ 的[这个例子](https://stackoverflow.com/questions/10636932/jquery-convert-live-to-on)，但我对最后的 'tr' 感到困惑。它应该是这样的，但我不确定：

```
<script>
jQuery('#ultimecomunicazioni').on({
    'mouseenter' : function () {
        jQuery(this).append('<span id="ultimecomunicazioni_appear" style="font-weight:normal;margin-left:5px">(<a style="color:grey" href="<?php echo esc_url( home_url( '/' ) ); ?>comunicazioni/">tutte</a>)</span>');
     },
    'mouseleave' : function () {
        jQuery(this).children('#ultimecomunicazioni_appear').remove();
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:42:25.767

只需阅读文档[`.live`](http://api.jquery.com/live/)和[委托事件`.on`](http://api.jquery.com/on/#direct-and-delegated-events)的部分，那里解释得很好。

> 根据其继承者重写 .live() 方法很简单；这些是对所有三种事件附件方法进行等效调用的模板：
> 
> `$(selector).live(events, data, handler); // jQuery 1.3+`
> 
> `$(document).delegate(selector, events, data, handler); // jQuery 1.4.3+`
> 
> `$(document).on(events, selector, data, handler); // jQuery 1.7+`

但是，我不明白为什么您需要在一个具有特定 id 的元素上使用委托功能。您似乎只是遇到[了这个问题](https://stackoverflow.com/q/14028959/1048572)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:01:13.827

**试试这个**：

```
$(document).on("mouseenter mouseleave", "#ultimecomunicazioni" , function(e) {
    if(e.type === 'mouseenter'){
        $(this).append('<span id="ultimecomunicazioni_appear" style="font-weight:normal;margin-left:5px">(<a style="color:grey" href="comunicazioni/">tutte</a>)</span>');
    } else {
        $('#ultimecomunicazioni_appear').remove();
    }
}); 
```

**注意**：我删除了小`php echo`代码，因为它不适用于 javascript（服务器与客户端语言）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:45:39.733

你可以试试这个：

```
<script>
jQuery('#ultimecomunicazioni').parent().on({
    'mouseenter' : function () {
        jQuery(this).append('<span id="ultimecomunicazioni_appear" style="font-weight:normal;margin-left:5px">(<a style="color:grey" href="<?php echo esc_url( home_url( '/' ) ); ?>comunicazioni/">tutte</a>)</span>');
     },
    'mouseleave' : function () {
        jQuery(this).children('#ultimecomunicazioni_appear').remove();
    }
},
'#ultimecomunicazioni'
);
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T13:47:01.393

您忘记了这样一个事实，即 jQuery 的原始`.live()`方法很特别，它**总是将***事件侦听*器绑定到`document.body`. 这也是一个很大的批评点，因为大多数时候没有必要将处理程序放在文档顶部这么远的地方。

`.delegate()`更像`.on()`是现在的形式，但他们改变了参数的顺序

```
method(<element>, <event>, <callback>) 
```

进入

```
method(<event>, <element>, >callback>) 
```

我不确定这是否会影响您的原始代码，但如果出于某种原因需要事件处理程序处于`document.body`级别而不是您要求`.on()`的级别，则可能会造成一些麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T13:58:28.093

当我看到您的代码时，这似乎您`php`对附加内容中的部分有问题：

```
jQuery('#ultimecomunicazioni').on({
'mouseover': function () {
    jQuery(this).append('<span id="ultimecomunicazioni_appear" style="font-weight:normal;margin-left:5px">(<a style="color:grey" 
href="<?php echo esc_url( home_url( / ) ); ?>comunicazioni/">tutte</a>)</span>');
},    //---------------------------^-^-----------------------here
    'mouseleave': function () {
    jQuery(this).children('#ultimecomunicazioni_appear').remove();
}
}); 
```

我刚刚删除了这里的引号，你的代码工作了：http: [//jsfiddle.net/CrXZr/](http://jsfiddle.net/CrXZr/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-03T13:59:13.507

```
$(document.body).on({
    'mouseenter' : function () {
        $('<span id="ultimecomunicazioni_appear"/>').appendTo($(this));
 },
    'mouseleave' : function () {
       $(this).find('#ultimecomunicazioni_appear').remove();
 }, '#ultimecomunicazioni' 
```

});

# wpf - WPF mvvm 通过命令发送 TreeViewItem 的绑定元素

> ID：14673073
> 
> 赞同：2
> 
> 时间：2013-02-03T13:38:54.980
> 
> 标签：wpf, mvvm, treeview, contextmenu

白天好。

我在创建`ContextMenu`. `TreeView`问题很简单。我想向树视图添加新项目，单击树视图项目上的人民币并选择上下文菜单命令。
我知道我需要向我的命令传递一个包含父项的参数。但。我需要我可以人民币点击任何treeviewitem，而不仅仅是选中。**问题**是： 如何将 treeviewitem 的绑定数据传递给我的命令
。

 **这是类诊断 ![在此处输入图像描述](../Images/0fbf5e6f22f0dde8f79df06a9259b66b.png)

这是 Xaml（**编辑**）

```
 <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Item.Children}">
                <TextBlock Text="{Binding Item.Code}" HorizontalAlignment="Stretch">
                    <TextBlock.ContextMenu>
                        <ContextMenu Name="MyContextMenu" DataContext="{Binding PlacementTarget,RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="{Binding DataContext.ToString()}" Command="{Binding DataContext.Item.AddNewItemCommand}" CommandParameter="{Binding}"/>
                        </ContextMenu>                            
                    </TextBlock.ContextMenu>
                </TextBlock>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate> 
```

但它甚至没有调用我的命令。

```
 private void AddNewItem(object toItem)
    {
        if (toItem == null)
            return;
        ItemViewModel item = toItem as ItemViewModel;
        ItemMaterialModel itemMaterial = new ItemMaterialModel(ItemModel.CreateNewItem());

        ItemMaterialViewModel itemMaterialViewModel = new ItemMaterialViewModel(itemMaterial);
        item.Children.Add(itemMaterialViewModel);
    } 
```

也许我的命令在错误的 ViewModel 中？

问候，德米特里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:56:44.273

Hi this is just a way you can bind

```
 <ContextMenu Name="MyContextMenu" DataContext="{Binding PlacementTarget,RelativeSource={RelativeSource Self}}">
                <MenuItem Header="Add" Command="{Binding DataContext.AddNewItemCommand}" CommandParameter="{Binding }"/>
            </ContextMenu> 
```

I hope this will help.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:15:57.603

感谢道德逻辑和他关于 PlacementProperty 的信息，我修改了我的 Xaml，如下所示：

```
 <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Item.Children}">
                <TextBlock Text="{Binding Item.Code}" HorizontalAlignment="Stretch">
                    <TextBlock.ContextMenu>
                        <ContextMenu DataContext="{Binding PlacementTarget.DataContext,RelativeSource={RelativeSource Mode=Self}}">
                            <MenuItem 
                                Header="{Binding Item.Code}"
                                Command="{Binding Item.AddNewItemCommand}" 
                                      CommandParameter="{Binding Item}"/>
                        </ContextMenu>                            
                    </TextBlock.ContextMenu>
                </TextBlock>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate> 
```

在我的项目中`StructureManagerViewModel`，我制作的不是简单的 MainItem，而是树的 itemsourse 中使用的 MainItems 的集合。

问候，德米特里。
希望这个经验对人们有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T22:03:18.823

您可以使用[此处](https://stackoverflow.com/questions/592373/select-treeview-node-on-right-click-before-displaying-contextmenu)找到的代码来检测右键单击下的项目（并选择它以获得积极的视觉反馈）。

请点击此[链接](http://www.codeproject.com/Articles/162784/WPF-ContextMenu-Strikes-Again-DataContext-Not-Upda)，了解 PlacementTarget 在@ethicallogics 提供的解决方案中的作用。

希望您可以结合使用这两个答案来解决您的问题。**

# c# - 通过 TCP 发送多条消息

> ID：14673074
> 
> 赞同：0
> 
> 时间：2013-02-03T13:39:00.983
> 
> 标签：c#, client-server, tcpclient

我之前问过类似的问题，但我似乎无法找到解决方法。我了解通过 TCP 发送数据存在问题，因为某些数据可能会丢失，并且某些数据可能会作为最后一条消息的一部分出现。我正在尝试修复它们，因为我正在从列表中发送一组命令。

**这是我的客户发送代码：**

```
private void sendBtn_Click(object sender, EventArgs e)
        {
            try
            {
                for (int i = 0; i < listORequestedCommands.Items.Count; i++)
                {
                    clientSock.Send(Encoding.Default.GetBytes(listORequestedCommands.Items[i].ToString()), listORequestedCommands.Items[i].ToString().Length, SocketFlags.None);
                }
                removeAll_Click(sender, e);
                sendBtn.Enabled = false;
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error!");
                this.Close();
            }

        } 
```

**这是我的接收服务器代码：**

```
private void clientReceived(Client sender, byte[] data)
        {
            try
            {
                Invoke((MethodInvoker)delegate
                {
                    for (int i = 0; i < lstClients.Items.Count; i++)
                    {
                        Client client = lstClients.Items[i].Tag as Client;

                        if (client.ID == sender.ID)
                        {
                            string incommingCommand = Encoding.Default.GetString(data);
                            if (incommingCommand.CompareTo("") != 0)
                            {
                                lstClients.Items[i].SubItems[1].Text = incommingCommand;
                                string[] splittedIncommingCommand = incommingCommand.Split(' ');

                                int numRunProc = 0;

                                do
                                {
                                    numRunProc = countProcesses();
                                }
                                while ((numRunProc >= maxProcesses) || (numRunProc + Int32.Parse(splittedIncommingCommand[splittedIncommingCommand.Length - 1]) >= maxProcesses));

                                Process processToRun = new Process();
                                processToRun.StartInfo.FileName = splittedIncommingCommand[0];
                                processToRun.StartInfo.WorkingDirectory = Path.GetDirectoryName(splittedIncommingCommand[0]);
                                processToRun.StartInfo.Arguments = "";

                                for (int j = 1; j < splittedIncommingCommand.Length; j++)
                                {
                                    processToRun.StartInfo.Arguments += " " + splittedIncommingCommand[j];
                                }

                                processToRun.Start();
                            }
                            break;
                        }
                    }
                });
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error!");
                this.Close();
            }

        } 
```

我被指示使用大小前缀和序列化做一些事情，但我遇到了麻烦，似乎无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:18:11.360

我可以按照您的要求使用[网络库](http://www.networkcomms.net)networkcomms.net 为您提供一个可行的解决方案。下面的代码示例发送单个字符串。您可以通过更改服务器部分轻松修改它以使用`string[]`等`List<string>`

```
NetworkComms.AppendGlobalIncomingPacketHandler<string> 
```

至

```
NetworkComms.AppendGlobalIncomingPacketHandler<string[]> 
```

或者

```
NetworkComms.AppendGlobalIncomingPacketHandler<List<string>> 
```

无论您发送什么，客户端都保持不变。服务器的代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NetworkCommsDotNet;

namespace TCPServer
{
    class Program
    {
        static void Main(string[] args)
        {
            NetworkComms.AppendGlobalIncomingPacketHandler<string>("Message", (packetHeader, connection, incomingString) => 
            {
                    Console.WriteLine("The server received a string - " + incomingString);
                    //Perform any other operations on the string you want to here.
            });

            TCPConnection.StartListening(true);

            Console.WriteLine("Server ready. Press any key to shutdown server.");
            Console.ReadKey(true);
            NetworkComms.Shutdown();
        }
    }
} 
```

对于客户：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NetworkCommsDotNet;

namespace TCPClient
{
    class Program
    {
        static void Main(string[] args)
        {
            string messageToSend = "This is the message to send";
            TCPConnection.GetConnection(new ConnectionInfo("127.0.0.1", 10000)).SendObject("Message", messageToSend);

            Console.WriteLine("Press any key to exit client.");
            Console.ReadKey(true);
            NetworkComms.Shutdown();
        }
    }
} 
```

您显然需要从网站下载 NetworkCommsDotNet DLL，以便将其添加到“使用 NetworkCommsDotNet”参考中。另请参阅客户端示例中的服务器 IP 地址当前为“127.0.0.1”，如果您在同一台机器上同时运行服务器和客户端，这应该可以工作。有关更多信息，还请查看[入门](http://www.networkcomms.net/getting-started/)或[如何创建客户端服务器应用程序](http://www.networkcomms.net/how-to-create-a-client-server-application-in-minutes/)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:29:04.720

我不知道大小前缀和序列化到底是什么意思，但最好让服务器知道客户端应该有多少字节，或者以某种方式“标记”消息的结尾（即字符串后跟两个 CRLF 或伪标记/注释，如 <eom> 或 <!--end of message-->）。对于第一个选项，通常您必须使用二进制数据。对于您的示例代码，第二个似乎更容易。

# mysql - mySQL SELECT 使用 LEFT JOIN，返回值或 NULL WHERE 列在右表中指定

> ID：14673075
> 
> 赞同：1
> 
> 时间：2013-02-03T13:39:01.730
> 
> 标签：mysql, sql, select, join

我是 php|mySQL 的新高中老师，我正在尝试开发一个查询来显示我学生的考试成绩。挑战是显示给定测试的分数，如果没有发布分数，则显示 NULL。我正在尝试将两个步骤变成一个查询：

1.  根据提交的测试结果创建特定课程的学生列表。
2.  显示每个学生在该测试中的分数，或者，如果由于他们没有参加测试而导致分数不存在，则在其旁边显示他们的姓名和 NULL。

包含每个评估记录的“测试”表包含以下列：

```
test_id
assessment_id
username
score
maxScore
stopTime 
```

包含每个学生记录的“用户”表包含以下列：

```
user_id
schoolId
username
first_name
last_name
section 
```

期望的结果：

```
username | last_name | first_name | schoolId | assessment_id | score | maxScore
------------------------------------------------------------------------------------
jadams1  | Adams     | Joe        | 111111   | 23            | 9     | 12
sbenson1 | Benson    | Sally      | 222222   | 23            | 10    | 12
csmith2  | Smith     | Charlie    | 555555   | NULL          | NULL  | NULL (hasn't taken quiz yet)
dthomp1  | Thompson  | David      | 666666   | 23            | 9     | 12 
```

到目前为止，我已经尝试了很多东西。第一个是基本的左连接。这会为每个学生生成一行，但由于我为“tests.assessment_id”指定了一个值，因此它不会为尚未参加测验的学生显示行。我希望它显示测验结果（如果存在），如果学生没有参加测验，则显示包含 NULL 分数值的行。

```
SELECT
  users.last_name,
  users.first_name,
  tests.score,
  tests.maxScore
FROM users
  LEFT JOIN tests
    ON tests.username = users.username
WHERE tests.assessment_id = '23'
    AND users.section = 'S432-01' 
```

以上生成：

```
username | last_name | first_name | schoolId | assessment_id | score | maxScore
------------------------------------------------------------------------------
jadams1  | Adams     | Joe        | 111111   | 23            | 9     | 12
sbenson1 | Benson    | Sally      | 222222   | 23            | 10    | 12
dthomp1  | Thompson  | David      | 666666   | 23            | 9     | 12 
```

以下是更新的迭代。它为练习测验生成一个 NULL 行（没有分配评估 ID）以及为真实事物生成一行。在最终报告中，重要的是为每个学生只创建一行，但不要错过任何学生：

```
SELECT DISTINCT
  users.username,
  users.last_name,
  users.first_name,
  users.schoolId,
  if(tests.assessment_id ='23','23','') AS assessment,
  if(tests.assessment_id ='23',tests.score,'') AS score,
  if(tests.assessment_id ='23',tests.maxScore,'') AS maxScore
FROM `users`
  LEFT JOIN tests
    ON tests.username = users.username
WHERE users.section = 'S432-01'
    AND (tests.assessment_id = '23'
      OR tests.assessment_id IS NULL)
ORDER BY users.last_name,users.first_name,tests.assessment_id 
```

以上生成：

```
username | last_name | first_name | schoolId  | assessment_id | score | maxScore
------------------------------------------------------------------------------------
jadams1  | Adams     | Joe        | 111111    | NULL          | NULL  | NULL
jadams1  | Adams     | Joe        | 111111    | 23            | 9     | 12
sbenson1 | Benson    | Sally      | 222222    | NULL          | NULL  | NULL
sbenson1 | Benson    | Sally      | 222222    | 23            | 10    | 12
csmith2  | Smith     | Charlie    | 555555    | NULL          | NULL. | NULL (hasn't taken quiz yet)
dthomp1  | Thompson  | David      | 666666    | NULL          | NULL. | NULL
dthomp1  | Thompson  | David      | 666666    | 23            | 9     | 12 
```

任何想法如何在单个查询中完成这项工作？我认为我遇到了性能问题，所以我想让事情尽可能简单。

谢谢你的帮助！-克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:44:23.867

这将起作用，

```
SELECT  users.last_name,
        users.first_name,
        tests.score,
        tests.maxScore
FROM    users
        LEFT JOIN tests
              ON tests.username = users.username AND 
                 tests.assessment_id = '23'
WHERE   users.section = 'S432-01' 
```

您没有从表中获取所有记录的原因`users`是因为您过滤`assessment_id`了哪个等于`23`哪个删除了所有`null`值（*未参加评估的学生在此列上具有空值*）。要获取所有值，请移动子句`tests.assessment_id='23'`上的。`ON`

# java - 基本的java重构：将子类的差异委托给父类并合并/删除它们

> ID：14673076
> 
> 赞同：0
> 
> 时间：2013-02-03T13:39:22.603
> 
> 标签：java, design-patterns, refactoring, abstract, final

请处理这个基本问题。

我有一个`abstract class C1`which 扩展了另一个`abstract class C0`并被多个扩展`sub-classes (C21 and C22)`。

```
@Component
public abstract class C0 {
    protected abstract String getCaller();  
//Some other methods.
} 
```

.

```
public abstract class C1 extends C0 {
//Set of methods which are used by children and then calls methods of C0 which then use getCaller();
} 
```

.

```
 @Controller
    public class C21 extends C1 {

    @RequestMapping(value = "abc", method = RequestMethod.GET)
    public String start(@RequestParam(value = "kw", required = true) String p1,
            @RequestParam(value = Constant.REQUEST_PARAM_KEYWORDID, required = true) long p2) throws Exception {
//Some processing and calls controllers defined in abstract class C1
        return "200";
    }

    @Override
    protected String getCaller() {
        return "C21";
    }

} 
```

.

```
@Controller
public class C22 extends C1 {

    @RequestMapping(value = "abc", method = RequestMethod.GET)
    public String start(@RequestParam(value = "kw", required = true) String p1,
            @RequestParam(value = Constant.REQUEST_PARAM_KEYWORDID, required = true) long p2) throws Exception {
//Some processing and calls controllers defined in abstract class C1
        return "200";
    }

    @Override
    protected String getCaller() {
        return "C22";
    }

} 
```

C0 包含一个抽象方法`getCaller();`C21 和 C22 的调用者是不同的，但它们可以通过传递给`start(p1,p2)`这些类的唯一方法的参数来识别。

`start(p1,p2)`在两个课程中都做类似的事情。C21 和 C22 的唯一区别是其实现`getCaller()`是固定的，并且无论如何都可以从 start 的参数中提取。所以，我决定创建单个类而不是 C21 和 C22。

我不能这样创建`setCaller()`，我想在抽象中创建`final method`一个私有变量，它可以用方法的参数填充并返回（从 调用）。`caller``class C1``start``getCaller()``abstract class C0`

这是正确的方法吗？有没有更好的方法或模式呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:55:38.140

> Only difference in C21 and C22 is the implementation of getCaller() which is fixed and can anyways be extracted from parameters of start.

Since you have to change only a single method, you will be better off with a single non-abstract implementation `C1` instead of an abstract `C1` and a pair of `C21` and `C22`. You can do something like this:

```
Caller caller;
public start(SomeType1 p1, SomeType2 p2, SomeType3 p3) {
    caller = new Caller(p1, p2, p3);
    ...
    // Do other stuff
}

public Caller getCaller() {
    return caller;
} 
```

In case there are other classes in addition to `C21` and `C22` inheriting `C1`, you may want to keep your `C1` abstract, and add a non-abstract `C2` with an above implementation.

# java - 当编译的代码加载到 DVM 中时，DVM 如何管理内存？

> ID：14673077
> 
> 赞同：0
> 
> 时间：2013-02-03T13:39:30.467
> 
> 标签：java, android, memory-management, jvm, dalvik

在JVM中加载Java字节码时，JVM将内存分为以下几部分

1.**堆**

2.**堆栈**

3.**代码**

4.**静态**

在 DVM 中如何发生同样的情况？请指导我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:34:14.017

据我所知，DVM 管理内存的方式与 JVM 相同。显然，细节上会有一些差异，但如果你理解了一个，你应该能够理解另一个。

但是，您的理解有点错误……关于 JVM。对于 HotSpot JVM（至少），代码和静态（类帧）都在堆内分配。我知道使用了 permgen 堆，但那是堆空间，在某些情况下该空间将被垃圾收集。

# javascript - 在javascript中动态更改if语句中的条件

> ID：14673080
> 
> 赞同：0
> 
> 时间：2013-02-03T13:39:37.267
> 
> 标签：javascript, jquery, google-chrome, firefox, if-statement

这段代码是动态改变条件的，但是，这个语句被chrome识别和干预，而不是fx，如何解决这个问题？谢谢

```
if a % 2 == 0 
  var condition = b == c  || b == d;
else 
  var condition = b == e  || b == f ;

if (condition)
  ...... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:41:23.797

```
var condition = (a % 2 == 0) ? (b == c  || b == d) : (b == e  || b == f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:41:50.310

像这样写：

```
var condition;
if (a % 2 == 0)
    condition = b == c  || b == d;
else 
    condition = b == e  || b == f ;

if (condition)
   ...... 
```

# c# - LINQ 过滤器或

> ID：14673082
> 
> 赞同：0
> 
> 时间：2013-02-03T13:40:04.147
> 
> 标签：c#, linq

我得到以下结构：

```
 One user can have many Groups and a Group can have many users. 
```

现在我想让所有在同一组中的用户都像要过滤的用户一样。

例如，用户“Theo”属于第一组和第二组。我想要第一组或第二组中的所有用户。

我如何使用 LINQ 或通常的 c# 来实现这一点？

此代码不起作用：

```
var res = (IEnumerable<User>)Users;
foreach (var item in user.Groups) {
    res = res.Where(usr => usr.Groups.Contains(item));
}
return res.ToList(); 
```

`Users`是我从另一种方法获得的列表，`user`是 type 的参数`User`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:41:33.173

我假设：

*   该类`User`具有`Groups`类型的属性`List<Group>`
*   该类`Group`具有`Users`类型的属性`List<User>`

使用 LINQ`SelectMany`方法：

```
var usersInSameGroups = user.Groups.SelectMany(group => group.Users).ToList(); 
```

或者在查询语法中：

```
var usersInSameGroups = (from g in user.Groups
                         from userInGroup in g.Users
                         select userInGroup).ToList(); 
```

### 更新

```
return (from user2 in Users
        where user2.Groups.Intersect(user.Groups).Any()  // Keeps only user2 if it has a common group with user
        select user2).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:56:24.053

Perhaps using `Intersect.Any` on the groups:

```
var groupsFind = new []{"Group1","Group2"};
var userFound = allUsers
    .Where(u => u.Groups
                 .Select(ug => ug.Name)
                 .Intersect(groupsFind)
                 .Any()); 
```

I don't understand the model, a user belongs to n groups and every group can have n users. Isn't the last relation redundant or the same as the first just vice-versa?

# php - 将数据/文本从 Web 应用程序发送到 Android

> ID：14673092
> 
> 赞同：1
> 
> 时间：2013-02-03T13:40:38.607
> 
> 标签：php, android, web

我正在尝试通过以下方式在 Web 应用程序和 Android 设备之间进行通信：

*   使用唯一 ID（例如 IMEI）登录我的网站

*   将数据从 android 发送到用户登录的 Web 应用程序

*   将数据从网络浏览器发送到我的应用程序，例如使用简单的 html 按钮

我知道 HttpUrlConnection 类和其他有用的类，但我不确定如何成功使用它们。假设我只需要将 GPS 坐标从我的应用程序发送给登录到我的网站的用户，然后单击我网站中的按钮向我的应用程序发送消息。

我正在寻找我应该用来帮助我实现这一目标的各种技术/方法的一些建议！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:22:52.153

使用 SQL Server 管理桌面上的数据并在 Visual Studio 上的 .NET 中创建 Web 服务。

然后连接到应用程序中的 Web 服务，并使用 Web 服务从数据库中设置/获取数据。

*可能有用的链接：*

**如何在 .NET 中创建网络服务（不包括在 Android 中的实现）：** [http ://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx](http://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx)

**如何将您的服务与 Android 连接：**

[http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

[http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html](http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html)

# css - 标题宽度：100%；没有按照应有的方式行事

> ID：14673093
> 
> 赞同：0
> 
> 时间：2013-02-03T13:41:07.673
> 
> 标签：css, header

对不起标题。真的不知道该说什么。在这里解释更容易。

基本上我想要一个具有相对位置的标题，稍后我将在其中放置一个导航菜单。我希望它是 100% 宽（因此它覆盖整个页面）和大约 130px 高。我的问题是即使设置为 100% 宽，左侧也有一点空间。html/body 也是如此。在标题的右侧没有空格。我希望它居中。

这是我的代码：

```
html, body {
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 12px; 
    -webkit-font-smoothing: antialiased; 
    font-smoothing: antialiased;
    height: 100%;
    width: 100%;
    overflow: hidden;
}
#header {       
    -webkit-box-shadow: 0px 0px 30px #7a7a7a; 
       -moz-box-shadow: 0px 0px 30px #7a7a7a; 
            box-shadow: 0px 0px 30px #7a7a7a;
    width: 100%;
    height: 130px;
    margin-right: auto;
    margin-left: auto;
    background-color: #fff;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:47:09.017

将元素的 设置为 0 `margin`。`body`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T11:01:17.520

当你不应用一些预定义的 CSS 规则时，它基本上会发生。为什么预定义是因为一些浏览器呈现自己的样式，比如边距应该是 1px 等，所以你必须用你自己的 CSS 规则覆盖它。是的，Levi Botelho 给出你是正确的答案。只要你要在 css 的帮助下描述 html 内容，只需包含以下规则。

```
/**
 * 1.0 Reset
 *
 * Modified from Normalize.css to provide cross-browser consistency and a smart
 * default styling of HTML elements.
 *
 * @see http://git.io/normalize
 * ----------------------------------------------------------------------------
 */

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, i, center, dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, audio, canvas, details, figcaption,
figure, footer, header, hgroup, mark, menu, meter, nav,
output, progress, section, summary, time, video {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
}

body {
    line-height: 1;
}

article, aside, dialog, figure, footer, header, 
hgroup, nav, section, blockquote { 
    display: block;
}

nav ul {
    list-style: none;
}

ol {
    list-style: decimal;
}

ul {
    list-style: disc;
}

ul ul {
    list-style: circle;
}

blockquote, q {
    quotes: none;
}

blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}

ins {
    text-decoration: underline;
}

del {
    text-decoration: line-through;
}

mark {
    background: none;
}

abbr[title], dfn[title] {
    border-bottom:1px dotted #000;
    cursor:help;
}

/* tables still need 'cellspacing="0"' in the markup */
table {
    border-collapse: collapse;
    border-spacing: 0;
}

hr {
    display: block;
    height: 1px;
    border: 0;  
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0;
}

input[type="submit"], input[type="button"], button {
    padding: 0 !important;
    margin: 0 !important;
}

input, select, a img {
    vertical-align: middle;
}

/*
--------------------------------------------------------------------
            End of reset css properties
--------------------------------------------------------------------
 */ 
```

希望得到答案！

# android - android上的XML解析

> ID：14673100
> 
> 赞同：0
> 
> 时间：2013-02-03T13:41:26.047
> 
> 标签：android, xml, xml-parsing

我有一个看起来像的 XML

`<root status="Y">`

`<mb mbcode="150201" mbname="AKASH KUNDU" branchid="1" pwd="admin"/>`

`</root>`

我想解析它并单独获取所有数据，我看到了很多示例，但没有一个 XML 看起来像这样

`<md>`

`<mbcode>150201</mbcode>`

`<mbname>AKASH KUNDU</mbname>`

`</md>`

我知道如何解析这种 XML 请告诉我如何进行那种 XML 解析

**到目前为止我已经做了**

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        InputStream is = new ByteArrayInputStream(responseBody.getBytes("UTF-8"));
        Document doc = db.parse(is);

        NodeList words=doc.getElementsByTagName("root");

        for (int i=0;i<words.getLength();i++) {
            Toast.makeText( getApplicationContext()," " + ((Element)words.item(i)).getAttribute("value"),Toast.LENGTH_SHORT).show();
        } 
```

**找到我的解决方案**

```
 //getting the xml Value as per child node form the saved xml
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();

        InputStream is = new ByteArrayInputStream(readString.getBytes("UTF-8"));
        Document doc = db.parse(is);

        NodeList root=doc.getElementsByTagName("root");

        for (int i=0;i<root.getLength();i++) {
            loginStatus = "" + ((Element)root.item(i)).getAttribute("status");
        }

            if(loginStatus.equalsIgnoreCase("Y"))
            {
                NodeList mb=doc.getElementsByTagName("mb");
                for (int i=0;i<mb.getLength();i++) {
                    setMbcode("" + ((Element)mb.item(i)).getAttribute("mbcode"));
                    setMbname("" + ((Element)mb.item(i)).getAttribute("mbname"));
                    branchid  = "" + ((Element)mb.item(i)).getAttribute("branchid");
                    pwd       = "" + ((Element)mb.item(i)).getAttribute("pwd");

            } 
```

# c - 将指针传递给 C 中过程中的指针

> ID：14673103
> 
> 赞同：0
> 
> 时间：2013-02-03T13:41:38.967
> 
> 标签：c, pointers, char, procedure

我正在尝试将指针传递给指向过程的指针，但是每次我都会遇到段错误，而将其传递给函数则可以正常工作。我想这可能与强制 C 自动在数组上指向指针有关，例如在这个问题中： [将指针传递给 C 中的指针](https://stackoverflow.com/questions/14264950/passing-a-pointer-to-a-pointer-in-c)。

但我不知道如何解决它。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>

void creer_matrice(int nbCol, int nbLigne, char **matrice)
{
     int i,j;

     matrice = calloc( nbCol, sizeof(char*));

     if( matrice == NULL ){

         printf("Allocation impossible");
         exit(EXIT_FAILURE);

     }

     for( i = 0 ; i < nbLigne ; i++ ){

          matrice[i] = calloc (nbCol, sizeof(char*));

            if( matrice[i] == NULL ){

             printf("Allocation impossible");
             exit(EXIT_FAILURE);

             }
      }

      /* Remplissage de test*/
     for(i = 0; i < nbLigne; i++){

           for(j = 0; j < nbCol; j++){
             matrice[i][j] = 'I';
           }

     }

   //return matrice;
}

int main(){
    int i,j;

    char **matrice;

    creer_matrice(8,6,matrice);

    //matrice = creer_matrice(8,6);

      for(i = 0; i < 6; i++){
         for(j = 0; j < 8; j++){
            printf("%c ",matrice[i][j]);
         }
      printf("\n");
      }

} 
```

有人可以告诉我我错在哪里以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:55:44.057

```
matrice = calloc( nbCol, sizeof(char*)); 
```

在这里，您没有为矩阵分配足够的内存。您需要根据矩阵的大小和存储在其中的类型来分配内存：

```
matrice = calloc(nbCol * nbLigne, sizeof(int)); 
```

并删除

```
matrice[i] = calloc (nbCol, sizeof(char*)); 
```

尽量少做系统调用。如果您可以在一次调用中分配所有矩阵，请执行此操作。您已经知道在函数开始时要分配的确切大小。

完成后不要忘记释放分配的内存。

```
free(matrice); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:56:15.333

更改此行：

```
 for( i = 0 ; i < nbLigne ; i++ ){

      matrice[i] = calloc (nbCol, sizeof(char*)); 
```

到：

```
 for( i = 0 ; i < nbCol ; i++ ){

      matrice[i] = calloc (nbLinge, sizeof(char)); 
```

或者更好：在一个语句中为整个矩阵分配内存。

# c# - 保留excel句柄时崩溃

> ID：14673104
> 
> 赞同：2
> 
> 时间：2013-02-03T13:41:40.043
> 
> 标签：c#, excel, vsto, vsta

启动 Excel 加载项时，我使用以下代码保留 Excel 窗口的句柄：

```
ExcelWindow = new NativeWindow();
ExcelWindow.AssignHandle(new IntPtr(Application.Hwnd)); 
```

在释放手柄时，我尝试在关闭时这样做：

```
private void ThisAddInShutdown(object sender, EventArgs e)
{
  try
  {
    ExcelWindow.ReleaseHandle();
  } 
  catch
  {

  }
} 
```

在调试模式下退出 excel 时，一切正常。不幸的是，在生产系统上运行此代码时，我遇到了崩溃，无法调试正在发生的事情。我得到一个“windows 正在检查这个问题”窗口，随后它消失了，就是这样。

这真的没什么大不了的，但我不想用这样的东西来惹恼用户。那么，有谁知道它可能是什么以及我如何调试它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:10:28.190

我的解决方案：

```
public partial class ThisAddIn
{
    ExcelWindow window;

    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        window = new ExcelWindow();

        Application.WorkbookBeforeClose += new Excel.AppEvents_WorkbookBeforeCloseEventHandler(Application_WorkbookBeforeClose);
        Application.WorkbookActivate += new Excel.AppEvents_WorkbookActivateEventHandler(Application_WorkbookActivate);
        Application.WorkbookDeactivate += new Excel.AppEvents_WorkbookDeactivateEventHandler(Application_WorkbookDeactivate);
    }

    void Application_WorkbookDeactivate(Excel.Workbook Wb)
    {
        window.ReleaseHandle();
    }

    void Application_WorkbookActivate(Excel.Workbook Wb)
    {
        window.AssignHandle(new IntPtr(Application.Hwnd));
    }

    void Application_WorkbookBeforeClose(Excel.Workbook Wb, ref bool Cancel)
    {
        if (Application.Workbooks.Count > 1 || window.Handle == IntPtr.Zero) return;
        Cancel = true;
        window.ReleaseHandle();
        Dispatcher.CurrentDispatcher.BeginInvoke(new MethodInvoker(Application.Quit), null);
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
    }

    #region VSTO generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InternalStartup()
    {
        this.Startup += new System.EventHandler(ThisAddIn_Startup);
        this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
    }

    #endregion
} 
```

# web-services - Clojure 中 Web 服务的异步作业队列

> ID：14673108
> 
> 赞同：7
> 
> 时间：2013-02-03T13:42:18.060
> 
> 标签：web-services, clojure, queue, jobs, lamina-clojure

目前，我正在尝试使用 RESTful API 构建一个 Web 服务，以处理一些长时间运行的任务（作业）。

这个想法是用户通过执行 POST 提交作业，该 POST 返回一些用于检查作业状态的 URL，其中还包含结果的 url。一旦作业完成（即某些值被写入数据库），结果 URL 将返回适当的信息（而不是没有结果）并且作业 url 将指示完成状态。

不幸的是，计算非常密集，因此一次只能运行一个，因此需要对作业进行排队。

在伪中需要这样的东西

```
(def job-queue (atom queue)) ;; some queue 
(def jobs (atom {}))

(defn schedule-job [params] 
  ;; schedules the job into the queue and 
  ;; adds the job to a jobs map for checking status via GET
  ;; note that the job should not  be evaluated until popped from the queue
)

(POST "/analyze" [{params :params}] 
 (schedulde-job params))

(GET "job/:id" [:d] 
 (get @jobs id))

;; Some function that pops the next item from the queue 
;; and evaluates it when the previous item is complete
;; Note: should not terminate when queue is empty! 
```

我研究了允许异步处理的[Lamina](https://github.com/ztellman/lamina)，但它似乎不适合我的需要。

我的问题是如何使作业队列出队并在前一个任务完成后执行其任务，而不在队列为空时终止，即永久处理传入的作业。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T20:12:11.397

java.util.concurrent.ExecutorService 可能是您想要的。这允许您提交作业以供以后执行，并返回一个 Future，您可以查询以发现它是否已完成。

```
(import '[java.util.concurrent Callable Executors])

(def job-executor
  (Executors/newSingleThreadExecutor))

(def jobs (atom {}))

(defn submit-job [func]
  (let [job-id   (str (java.util.UUID/randomUUID))
        callable (reify Callable (call [_] (func))]
    (swap! jobs assoc job-id (.submit job-executor callable))
    job-id))

(use 'compojure.core)

(defroutes app
  (POST "/jobs" [& params]
    (let [id (submit-job #(analyze params))]
      {:status 201 :headers {"Location" (str "/jobs/" id)}}))
  (GET "/jobs/:id" [id]
    (let [job-future (@jobs id)]
      (if (.isDone job-future)
        (.get job-future)
        {:status 404})))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T16:52:34.823

这似乎符合我的预期，但它似乎相当不习惯。有人对如何改善这一点有想法吗？

```
;; Create a unique identifier
(defn uuid [] (str (java.util.UUID/randomUUID)))

;; Create a job-queue and a map for keeping track of the status
(def job-queue (ref clojure.lang.PersistentQueue/EMPTY))
(def jobs (atom {}))

(defn dequeue! [queue-ref]
  ;; Pops the first element off the queue-ref
  (dosync 
    (let [item (peek @queue-ref)]
      (alter queue-ref pop)
      item)))

(defn schedule-job! [task] 
  ;; Schedule a task to be executed, expects a function (task) to be evaluated
  (let [uuid (uuid)
        job (delay task)]
    (dosync 
      (swap! jobs assoc uuid job) 
      (alter job-queue conj job))))

(defn run-jobs []
  ;; Runs the jobs 
  (while true
    (Thread/sleep 10)
    (let [curr (dequeue! job-queue)] 
      (if-not (nil? curr) (@curr)))))

(.start (Thread. run-jobs)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:26:44.023

您的描述似乎是一个多生产者和单一消费者的场景。下面是一个示例代码（您可以将其与 REST 的东西和可能的一些异常处理挂钩，这样代理就不会死机）

```
(def worker (agent {}))                                                                                                                              

(defn do-task [name func]                                                                                                                            
  (send worker                                                                                                                                       
        (fn [results]                                                                                                                                 
          (let [r (func)]                                                                                                                            
            (assoc results name r)))))

;submit tasks                                                                                                               
(do-task "uuid1" #(print 10))                                                                                                                        
(do-task "uuid2" #(+ 1 1))

;get all results
(print @worker) 
```

# generics - 使用类型实例调用泛型函数

> ID：14673110
> 
> 赞同：4
> 
> 时间：2013-02-03T13:42:26.183
> 
> 标签：generics, f#

我已经为这个问题苦苦挣扎了一段时间，似乎找不到任何解决方案。让我为你简化一下。

我有一个我想调用的通用函数，但我想调用它的类型参数仅作为一个实例。例子

```
let foo_a<'a> () = typeof<'a>
let foo_b (t : System.Type) = foo_a<t>() // of course this does not work 
```

我希望以下陈述属实

```
foo_a<int>() = foo_b(typeof<int>) 
```

在 C# 中，我会反映 foo_a 的 MethodInfo 并执行 MakeGenericMethod(t)，但如何在 F# 中执行此操作？

只是为了澄清，翻转依赖并让 foo_a 调用 foo_b 代替，对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:30:34.130

正如@svick 所说，在 F# 中没有特殊的方法可以做到这一点——你需要像在 C# 中一样使用反射。

这是一个可以粘贴到 F# 交互式的简单示例：

```
open System.Reflection

type Blah =
    //
    static member Foo<'T> () =
        let argType = typeof<'T>
        printfn "You called Foo with the type parameter: %s" argType.FullName

let callFoo (ty : System.Type) =
    let genericFoo =
        typeof<Blah>.GetMethod "Foo"

    let concreteFoo =
        genericFoo.MakeGenericMethod [| ty |]

    concreteFoo.Invoke (null, Array.empty);;  // The ;; is only needed for F# interactive 
```

输出：

```
> callFoo typeof<int>;;
You called Foo with the type parameter: System.Int32
val it : obj = null 
```

# php - srch.png 未在 Firefox 中显示，但在 Chrome 中显示

> ID：14673116
> 
> 赞同：0
> 
> 时间：2013-02-03T13:43:06.043
> 
> 标签：php

```
<form id="searchForm" onsubmit="return validsearch()" action="search.php" method="post" name="searchForm">
  <input class="nnew_ttxtbx" type="text" name="searchf">
  <input width="55" type="image" height="21" border="0" align="right" src="images/srch.png">
</form> 
```

这是我的代码。Firefox 显示 png img place 的提交查询，但是，Chrome 正确显示它。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:48:03.967

为什么不直接使用常规[`<button>`](https://developer.mozilla.org/en-US/docs/HTML/Element/button)标签？

```
<form id="searchForm" onsubmit="return validsearch()" action="search.php" method="post" name="searchForm">
  <input class="nnew_ttxtbx" type="text" name="searchf">
  <button type="submit" style="width: 55px; height: 21px; border: none;">
    <img src="images/srch.png" />
  </button>
</form> 
```

# java - JPA：如何表达包含@ElementCollection 列的唯一约束？

> ID：14673118
> 
> 赞同：7
> 
> 时间：2013-02-03T13:43:28.860
> 
> 标签：java, hibernate, jpa

这是我的 JPA 实体类：

```
@Cacheable
@Entity
public class JpaItemSearchRequest implements ItemSearchRequest {

    @Id
    @GeneratedValue
    private long id;

    @Enumerated(EnumType.STRING)
    private SearchIndex searchIndex;

    private String browseNode;
    private String keywords;

    @Enumerated(EnumType.STRING)
    @ElementCollection
    private Set<ResponseGroup> responseGroups = new HashSet<ResponseGroup>();

    private int itemPage;

    @Enumerated(EnumType.STRING)
    private Locale locale;

    ... end of fields ...
} 
```

`SearchIndex`, `ResponseGroup`, 和`Locale`是枚举。

这个类有一个相当复杂的唯一约束：一个组合 `(searchIndex, browseNode, keywords, responseGroups, itemPage, locale)`被认为是唯一的。

所以我在类中添加了以下约束注释：

```
@Table(uniqueConstraints = { @UniqueConstraint(columnNames = { "searchIndex", "browseNode", "keywords", "responseGroups", "itemPage", "locale" }) }) 
```

当我尝试锻炼我的课程时，出现以下异常：

```
 org.hibernate.AnnotationException: Unable to create unique key constraint (searchIndex, browseNode, keywords, responseGroups, itemPage, locale) on table JpaItemSearchRequest: database column responseGroups not found. Make sure that you use the correct column name which depends on the naming strategy in use (it may not be the same as the property name in the entity, especially for relational types)
    at org.hibernate.cfg.Configuration.buildUniqueKeyFromColumnNames(Configuration.java:1584) ~[hibernate-core-4.1.7.Final.jar:4.1.7.Final]
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1386) ~[hibernate-core-4.1.7.Final.jar:4.1.7.Final]
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737) ~[hibernate-core-4.1.7.Final.jar:4.1.7.Final]
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94) ~[hibernate-entitymanager-4.1.7.Final.jar:4.1.7.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905) ~[hibernate-entitymanager-4.1.7.Final.jar:4.1.7.Final]
    ... 74 common frames omitted 
```

（我使用*Hibernate 4.1.7.Final*作为 JPA 实现/服务提供者）

例外要点是：`database column responseGroups not found.`

如果我没有在幕后为我的单个实体类指定该约束，Hibernate 会生成两个表：一个用于所有“简单”实体数据，另一个用于`Set<ResponseGroup> responseGroups`实体数据：

```
CREATE TABLE `jpaitemsearchrequest` (
    `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
    `browseNode` VARCHAR(255) NULL DEFAULT NULL,
    `itemPage` INT(11) NOT NULL,
    `keywords` VARCHAR(255) NULL DEFAULT NULL,
    `locale` VARCHAR(255) NULL DEFAULT NULL,
    `searchIndex` VARCHAR(255) NULL DEFAULT NULL,
    PRIMARY KEY (`id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=3; 
```

...

```
CREATE TABLE `jpaitemsearchrequest_responsegroups` (
    `JpaItemSearchRequest_id` BIGINT(20) NOT NULL,
    `responseGroups` VARCHAR(255) NULL DEFAULT NULL,
    INDEX `FKC217757B99AE0422` (`JpaItemSearchRequest_id`),
    CONSTRAINT `FKC217757B99AE0422` FOREIGN KEY (`JpaItemSearchRequest_id`) REFERENCES `jpaitemsearchrequest` (`id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

如何正确表达我的约束？

* * *

## 编辑

这个问题曾经阅读过：
**JPA: Unique constraint across a Set (...unique constraint on another table)**

进一步思考我的问题，我确信它可以归结为以下问题：
**JPA：如何表达一个包含@ElementCollection 列的唯一约束？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T22:05:04.783

可以通过将[@CollectionTable](http://docs.oracle.com/javaee/6/api/javax/persistence/CollectionTable.html)与元素集合一起使用来定义集合表中列的唯一约束。

```
@CollectionTable(
    uniqueConstraints= @UniqueConstraint(columnNames={"col1","col2"})
) 
```

如前所述，这些是映射元素集合的表格列。无法对多个表中的列进行唯一约束。

# android - 将 wsdl 1.2 与 ksoap2-android 一起使用

> ID：14673119
> 
> 赞同：1
> 
> 时间：2013-02-03T13:43:36.760
> 
> 标签：android, web-services, wsdl, ksoap2

我正在使用 ksaop2-android 生成我的 Web 服务，这是我使用的 wsdl：*[http ://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL](http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL)*

这是我的代码：

```
 String serviceUrl = "http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL";
    String methodName = "GetCityWeatherByZIP";
    SoapObject request = new SoapObject("http://ws.cdyne.com/WeatherWS/",
            methodName);
    request.addProperty("ZIP", "64101");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER12);
    envelope.dotNet = false;
    envelope.setOutputSoapObject(request);
    HttpTransportSE ht = new HttpTransportSE(serviceUrl);
    try {
        ht.call("http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP", envelope);
        if (envelope.getResponse() != null) {
            SoapObject soapObject = (SoapObject) envelope.getResponse();
            System.out.println(soapObject.getProperty("ResponseText"));
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我可以通过这个网址得到正确的回复： *[http ://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP?ZIP=64101](http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP?ZIP=64101)*

但是，我的代码给了我这样的响应：

*在我们的天气数据中找不到城市。请联系 CDYNE 了解更多详情。*

似乎没有发送参数，哪一部分可能是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:41:56.527

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD);

    request.addProperty("ZIP", "64101");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER12);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        .....

    } catch (Exception e) {
        e.printStackTrace();

    } 
```

在哪里

```
SOAP_ACTION = "http://ws.cdyne.com/WeatherWS/GetCityForecastByZIP";
URL = "http://wsf.cdyne.com/WeatherWS/Weather.asmx";
METHOD = "GetCityForecastByZIP";
NAMESPACE = "http://ws.cdyne.com/WeatherWS/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:19:59.310

试试这个：

```
ht.call("http://ws.cdyne.com/WeatherWS/GetCityWeatherByZIP", envelope); 
```

代替：

```
ht.call("http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityWeatherByZIP", envelope); 
```

# java - getInstitutions 在 AggCatSampleApp 中返回 null

> ID：14673122
> 
> 赞同：0
> 
> 时间：2013-02-03T13:44:06.730
> 
> 标签：java, intuit-partner-platform, customer-account-data-api

我下载了客户帐户数据 API 的示例应用程序，我将战争文件添加到了 Tomcat。我可以登录，但是，getInstitutions 返回 null。我在 SampleApp.properties 文件中添加了 Oauth 用户密钥、用户密码和 SAML id 提供者 Id。

intuit-aggcat-config.xml 的内容、来自 Tomcat 的错误和 http 标头粘贴在下面

```
=================intuit-aggcat-config.xml looks like this==============
<?xml version="1.0" encoding="ISO-8859-1" ?>
<intuit-config>
    <saml>
        <keystoreFile>e:\intuit\keystore.jks</keystoreFile>
        <keystorePassword>mypassword</keystorePassword>
        <keyPassword>mypassword</keyPassword>
        <certAlias>somealias</certAlias>
        <oAuthUrl>https://oauth.intuit.com/oauth/v1/get_access_token_by_saml</oAuthUrl>
    </saml>
</intuit-config>

==================Tomcat Logs====================================

URL path [/home.htm] onto handler 'homeController'
INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/login.htm] onto handler 'loginController'
INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/signOut.htm] onto handler 'loginController'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'aggcat': initialization completed in 1954 ms
INFO : com.intuit.aggcat.LoginController - LoginController -> showLoginPage()
INFO : com.intuit.aggcat.LoginController - LoginController -> authenticateUser()
INFO : com.intuit.aggcat.AggCatApiController - Reached fetchInstitutions
INFO : com.intuit.aggcat.AggCatApiController - Created AggCatService
INFO : com.intuit.aggcat.AggCatApiController - Failed to fetch institutions, null
===============Http headers=====================================

GET /AggCatSampleApp/login.htm HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Cookie: JSESSIONID=169482CCCF0786BA966F1CB0B2D1F00D
Connection: keep-alive

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/html;charset=ISO-8859-1
Content-Language: en-US
Content-Length: 1611
Date: Sun, 03 Feb 2013 12:52:24 GMT
----------------------------------------------------------
http localhost 8080/AggCatSampleApp/login.htm

POST /AggCatSampleApp/login.htm HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Referer: http localhost 8080/AggCatSampleApp/login.htm
Cookie: JSESSIONID=169482CCCF0786BA966F1CB0B2D1F00D
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded
Content-Length: 41
loginUserName=user&loginPassCode=password
HTTP/1.1 302 Found
Server: Apache-Coyote/1.1
Location: http localhost 8080/AggCatSampleApp/getInstitution.htm
Content-Language: en-US
Content-Length: 0
Date: Sun, 03 Feb 2013 12:52:33 GMT
----------------------------------------------------------
http localhost 8080/AggCatSampleApp/getInstitution.htm

GET /AggCatSampleApp/getInstitution.htm HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Referer: http localhost 8080/AggCatSampleApp/login.htm
Cookie: JSESSIONID=169482CCCF0786BA966F1CB0B2D1F00D
Connection: keep-alive

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/html;charset=ISO-8859-1
Content-Language: en-US
Content-Length: 2494
Date: Sun, 03 Feb 2013 12:52:33 GMT
---------------------------------------------------------- 
```

问候， 基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:30:58.020

确保您的 intuit-aggcat-config.xml 和密钥库（您在 e:\intuit\keystore.jks 中有它）都在您的类路径中（您的构建类文件夹可以解决问题）。我相信您已经注意到错误报告的信息量不是很大——您需要自己进行日志记录或输出。像这样向您的 WebUtil.java 类添加一些老式调试，以确保正在读取您的属性文件：

```
public AggCatService getAggCatService(String userId){

    AggCatService service = null;
    try{
        System.out.println("Authorizing:");
        System.out.println("  OUTH_CONSUMER_KEY: " + OAUTH_CONSUMER_KEY);
        System.out.println("  OAUTH_CONSUMER_SECRET :" + OAUTH_CONSUMER_SECRET);
        System.out.println("  SAML_PROVIDER_ID :" + SAML_PROVIDER_ID);
        System.out.println("  User ID :" + userId);
        OAuthAuthorizer oauthAuthorizer = new OAuthAuthorizer(OAUTH_CONSUMER_KEY, OAUTH_CONSUMER_SECRET, SAML_PROVIDER_ID,userId);
        System.out.println("OATH: " + oauthAuthorizer.toString());
        Context context = new Context(oauthAuthorizer);
        service= new AggCatService(context);
        System.out.println("Service: " + service.toString());

    }
    catch(AggCatException ex){
        System.out.println("Failed to authorize");
        System.out.println(ex.getMessage());
    }
    return service;

} 
```

并添加这个（并调用它）以确保 intuit-aggcat-config.xml 也被读取：

```
public void status()
{
    System.out.println("Classpath = " + System.getProperty("java.class.path"));
    System.out.println("Working Directory = " + System.getProperty("user.dir"));
    System.out.println("Keystore File = " + Config.getProperty("saml.keystoreFile"));
    System.out.println("Keystore Password = " + Config.getProperty("saml.keystorePassword"));
    System.out.println("Key Password = " + Config.getProperty("saml.keyPassword"));
    System.out.println("Cert Alias = " + Config.getProperty("saml.certAlias"));
    System.out.println("Base URL = " + Config.getProperty("baseURL.aggcat"));
} 
```

# android - 发生意外错误：cp "$BUILD_PATH"/framework/cordova-$VERSION.jar

> ID：14673123
> 
> 赞同：0
> 
> 时间：2013-02-03T13:44:13.913
> 
> 标签：android, cordova

我正在尝试为 android 和 iOS 部署 phonegap。iOS 工作正常，但在终端中创建这样的 android 项目时：

```
./create ~/Documents/testapp_android org.apache.cordova.HelloWorld HelloWorld 
```

我收到这些错误：

```
cp: /Users/Pim/Documents/cordova-2.3.0/cordova-android/framework/cordova-2.3.0.jar: No such file or directory
An unexpected error occurred: cp "$BUILD_PATH"/framework/cordova-$VERSION.jar "$PROJECT_PATH"/libs/cordova-$VERSION.jar exited with 1
Deleting project... 
```

我正确安装了 ADT 等。有没有人有任何其他可能有帮助的观点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:33:15.793

只需将 cordova-2.3.0.jar 从 phonegap-android 文件夹复制到 cordova 文件夹即可解决此问题。表面上不会自动发生。

它没有在phonegap 和cordova 的手册中描述。

希望它可以帮助任何人..

# ember.js - 提交后编辑字段时的 Ember Data rootState.error

> ID：14673125
> 
> 赞同：1
> 
> 时间：2013-02-03T13:44:38.203
> 
> 标签：ember.js

我有一个 Ember.TextField 绑定到我的文档模型中的标题字段。我正在使用 RESTAdapter 和 Ember 1.0.0-pre4。

模型和控制器

```
App.Document = DS.Model.extend({
  title: DS.attr('string')
});

App.DocumentController = Ember.ObjectController.extend({
});

App.ApplicationController = Ember.Controller.extend({
  save: function() {
    var doc = this.controllerFor('document'),
    model = doc.get('model');

    doc.store.commit();
  }
]); 
```

document.handlebars 模板

```
{{view Ember.TextField valueBinding="title"}} 
```

在我的控制器上调用该`save`方法后，它将成功保存`title`到后端，不再考虑`isDirty`。

`save`但是，如果我在Ember Data之后将任何数据输入到 TextField会引发此错误：

```
Uncaught Error: Attempted to handle event `willSetProperty`
on <App.Document:ember262:1> while in state rootState.error.
Called with
{reference: [object Object], store: <App.Store:ember268>, name: title} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:13:32.553

经过一些调试后，Rails 返回的 PUT 204 成功代码不足以让 Ember 接受所做的更改。

这是我所做的：

```
# format.json { head :no_content } # Rails default behavior
format.json { render json: @post } # Ember needs some data in return / 200 success code 
```

# javascript - 如何在 CSS 中使用属性？

> ID：14673126
> 
> 赞同：-1
> 
> 时间：2013-02-03T13:44:52.530
> 
> 标签：javascript, css

```
"Window": {
    backgroundColor: '#fff'
},
"Label": {
    font: {
        fontSize: 32,
        fontWeight: 'bold'
    }
},
"Button": {
    width: '50%',
    height: Ti.UI.SIZE
},
".button": {
    randomProp: 'OK',
    top: window.height * somevalue;
} 
```

我怎样才能使用我`Window's Height`的设置到我的`button's`顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:00:48.420

您可以通过对象的属性访问对象的样式属性`.style`。IE：

```
mybutton.style.top = "10px"; 
```

在纯 JS 中获取 Windows 当前高度比较棘手，但 jQuery 库可以轻松做到：

```
$( 'window' ).height(); 
```

如果您不想使用 jQuery，那么这里是仅使用 JS 的方法：[JavaScript - 获取浏览器高度](https://stackoverflow.com/questions/3333329/javascript-get-browser-height)

如果您的意图可以通过 CSS 和百分比值实现，那是最好的方法，但我假设您正在尝试附加一些将相对于窗口大小浮动的东西，比如始终位于底部的页脚，没有一些新的 CSS3 选择器在 CSS 中可能会很麻烦，可能应该在 JS 中解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:12:46.600

为此，您不需要 JavaScript。

您可以使用`position: absolute;`来设置`button`相对于视口的位置。

```
button {position: absolute; top: %/px;} 
```

[这是你的 jsFiddle](http://jsfiddle.net/jNFgX/)。

# iphone - 将 B2Bodies 添加到精灵节点会导致精灵位置发生变化

> ID：14673129
> 
> 赞同：1
> 
> 时间：2013-02-03T13:45:10.053
> 
> 标签：iphone, cocos2d-iphone, box2d

我有一批精灵被添加到场景中。这些精灵的位置偏离了批处理的位置，因此我可以围绕批处理节点的点旋转它们。

当我将 B2Body 附加到这些精灵中的任何一个时，就会出现问题，它们在屏幕上的位置会发生变化。

```
 balloon1 = [CCSprite spriteWithSpriteFrameName:@"1.png"];
    balloon1.position = ccp(30,30);
    balloon1.tag = 10;
    //balloon1.anchorPoint = ccp(1.1,0.7);
    [spriteNode addChild:balloon1];

    b2BodyDef balloonBodyDef;
balloonBodyDef.type = b2_dynamicBody;
balloonBodyDef.position.Set((160 + balloon1.position.y)/PTM_RATIO, (240 -          balloon1.position.x)/PTM_RATIO);
balloonBodyDef.userData = balloon1;
b2Body *balloonBody = world->CreateBody(&balloonBodyDef);

b2PolygonShape balloon;
    balloon.SetAsBox((balloon1.contentSize.width/PTM_RATIO/2),
               (balloon1.contentSize.height/PTM_RATIO/2));

// Create shape definition and add to body
b2FixtureDef laserGunShapeDef;
laserGunShapeDef.shape = &laser;
//laserGunShapeDef.density = 0.0f;
//laserGunShapeDef.friction = 10.0f;
//laserGunShapeDef.restitution = 0.0f;

b2Fixture *balloonFixture = balloonBody->CreateFixture(&laserGunShapeDef); 
```

如果我将气球添加为文件中的精灵，这可以正常工作，但是当它按照上述方式完成时，气球会移出屏幕。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:21:58.710

改变

```
balloonBodyDef.position.Set((160 + balloon1.position.y)/PTM_RATIO, (240 -          balloon1.position.x)/PTM_RATIO); 
```

至

```
balloonBodyDef.position.Set(balloon1.position.x/PTM_RATIO, balloon1.position.y/PTM_RATIO); 
```

还处理刻度方法中的位置更新。

```
balloon1.position = ccp(balloonBody->GetPosition().x * PTM_RATIO,
                            (balloonBody->GetPosition().y) * PTM_RATIO); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:44:58.127

我只是猜测，但这可能是因为 spriteNode 位置。由于精灵是附在精灵节点上的，(30, 30) 是相对于精灵节点的位置，而不是实际世界的坐标。

所以，尝试使用

```
CGPoint worldCoordinate = [spriteNode convertToWorldSpace: balloon1.position];
balloonBodyDef.position.Set(worldCoordinate.x/PTM_RATIO, worldCoordinate.y/PTM_RATIO); 
```

就像大师说的那样，不要忘记在 tick 方法上更新精灵的位置。如果这不起作用，它是一个疯狂的猜测，它应该没关系......但尝试先设置身体的位置，然后从那个身体设置气球的位置。

无论如何希望这会有所帮助。

# javascript - 运行一次后如何停止javascript函数？

> ID：14673130
> 
> 赞同：0
> 
> 时间：2013-02-03T13:45:25.310
> 
> 标签：javascript, jquery

有人可以告诉我如何在它运行一次后停止这个javascript函数吗？目前它只是一次又一次地重复，我只希望它运行一次。

我还在学习javascript，如果不是很好，很抱歉。

谢谢

```
<script>
$(function() {
    $(".search_prompt").hide();

    $("#text").focusin(function() {
        $(".search_prompt").show();
    }).focusout(function () {
        $(".search_prompt").hide();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:48:55.930

```
<script>
$(function() {
    $(".search_prompt").hide();

    $("#text").one('focusin', function() {
        $(".search_prompt").show();
    }).one('focusout', function () {
        $(".search_prompt").hide();
    });
});
</script> 
```

[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:49:37.200

运行后取消绑定事件处理程序：

```
$(function() {
    $(".search_prompt").hide();
    function show_search_prompt() {
        $(".search_prompt").show();
        $("#text").unbind("focusin", show_search_prompt);
    }
    function hide_search_prompt() {
        $(".search_prompt").hide();
        $("#text").unbind("focusout", show_search_prompt);
    }
    $("#text").bind("focusin", show_search_prompt);
    $("#text").bind("focusout", hide_search_prompt);
}); 
```

## 工作示例

[http://jsfiddle.net/bikeshedder/JqErw/](http://jsfiddle.net/bikeshedder/JqErw/)

* * *

# jQuery插件

如果您多次需要这个，您可以为此编写一个 JQuery 插件：

```
$.fn.bindRunOnce = function(eventType, eventHandler) {
    this.bind(eventType, function cb() {
        $(this).unbind(eventType, cb);
        eventHandler.apply(this, arguments);
    });
};

$(function() {
    $(".search_prompt").hide();
    $("#text").bindRunOnce("focusin", function(ev) {
        $(".search_prompt").show();
    });
    $("#text").bindRunOnce("focusout", function() {
        $(".search_prompt").hide();
    });
}); 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/JqErw/1/](http://jsfiddle.net/bikeshedder/JqErw/1/)

* * *

...或者您可以[`one`](http://api.jquery.com/one/)按照`salexch`.

我怎么能错过这个？:-)

# c# - 检查 url 是否使用语言正确构造

> ID：14673133
> 
> 赞同：1
> 
> 时间：2013-02-03T13:45:53.993
> 
> 标签：c#, asp.net-mvc

我有一个 MVC4 应用程序，它在路由/url 中有一个额外的元素，它被命名为语言：

```
routes.MapRoute(
    name: "languageDefault",
    url: "{language}/{controller}/{action}/{id}",
    defaults: new {
        language = "en-US",
        controller = "Home",
        action = "Index",
        id = UrlParameter.Optional
    }
); 
```

现在，每次执行操作时，我都会使用自定义 filterAttribute 检查语言是否设置正确：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    string cultureName = null;
    var request = filterContext.HttpContext.Request;
    string currentUrl = request.RawUrl;
    string[] splittedStrings = currentUrl.Split('/');

    string currentLanguage  = CultureHelper.CheckCulture();
    var cultureCookie       = request.Cookies["_culture"];
    var possibleCultures    = UnitOfWork.CulturesRepository.GetListOfCultureNames();

    foreach (string culture in possibleCultures)
    {
        if (splittedStrings[1] == culture) cultureName = splittedStrings[1];
    }
    if (cultureCookie != null) cultureName = cultureCookie.Value;
    if (currentLanguage != null) cultureName = currentLanguage;

    if (cultureName != null)
    {
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cultureName);
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
    }
    else
    {
        cultureName = possibleCultures[0];
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cultureName);
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
    }

    base.OnActionExecuting(filterContext);
} 
```

我现在的问题是，当我检查是否存在语言时，如果没有，设置一个，如果提供的语言不正确，我真的什么都不做。例如当用户键入：

```
http://www.example.com/en-US/shop 
```

他提供了正确的网址，因此将正确地看到商店页面。但是，如果他不提供这样的语言：

```
http://www.example.com/shop 
```

语言检查完成，根据他是否是第一次访问，设置他的语言。问题在于**url 没有改变**。

我希望更改 url，以便它显示用户查看页面的语言。换句话说，当试图访问

```
http://www.example.com/shop 
```

他应该被重定向到：

```
http://www.example.com/en-US/shop 
```

无论访问者访问哪个页面，这都需要发生。换句话说，我可能需要在 global.asax 或我提供的覆盖函数中添加一些东西。但我不知道是什么以及如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:50:21.297

我通过改变我的 OnActionExecuting 方法解决了这个问题：

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var request         = filterContext.HttpContext.Request;
        string currentUrl   = request.RawUrl;
        var urlHelper       = new UrlHelper(request.RequestContext);

        string baseurl                      = urlHelper.Content("~");
        string currentLanguageFromUrl       = currentUrl.Split('/')[1];
        string currentLanguageFromCulture   = CultureHelper.CheckCulture();
        var currentLanguageFromCookie       = request.Cookies["_culture"];

        var possibleCultures                = UnitOfWork.CulturesRepository.GetListOfCultureNames();

        if (possibleCultures.All(culture => currentLanguageFromUrl != culture))
        {
            string cultureName;
            string newUrl;

            if (currentLanguageFromCookie != null)
            {
                cultureName = currentLanguageFromCookie.Value;
                CultureHelper.SetCulture(cultureName);
                newUrl = baseurl + cultureName;
                filterContext.Result = new RedirectResult(newUrl);
                return;
            }

            if (currentLanguageFromCulture != null)
            {
                cultureName = currentLanguageFromCulture;
                CultureHelper.SetCulture(cultureName);
                newUrl = baseurl + cultureName;
                filterContext.Result = new RedirectResult(newUrl);
                return;
            }

            cultureName = possibleCultures[0];
            CultureHelper.SetCulture(cultureName);
            newUrl = baseurl + cultureName;
            filterContext.Result = new RedirectResult(newUrl);
            return;
        }

        base.OnActionExecuting(filterContext);
    } 
```

现在，当您填写不正确的语言时，您将被重定向到具有正确语言的页面，如果您提供两个不正确的参数，您将被重定向到 404（这是合乎逻辑的）。

# javascript - 逐个字符淡入（保持 DOM 完整）

> ID：14673135
> 
> 赞同：1
> 
> 时间：2013-02-03T13:46:08.033
> 
> 标签：javascript, jquery

我想为文本设置动画，使其逐个字符淡入淡出。实际上，我设法在不保持 DOM 完整的情况下做到了这一点，它看起来像这样：

```
// make each character an own span element
// abc will become <span>a</span><span>b</span><span>c</span>
var elements = $(elemId).text().split('');
$(elemId).text('');

for (var i = 0; i < elements.length; i++) {
    $(elemId).append('<span>' + elements[i] + '</span>');
}

// fade in all spans one by one
$(elemId + " span").each(function(index) {
    $(this).delay(speed * index).fadeIn(300);
}); 
```

但这打破了我的文本中可能的元素，特别是强大的，但也包括列表或表格。所以我想到了这两种可能的解决方案：

*   使用 jQuery 遍历 DOM 并用 包裹每个字符`<span>`，但不要删除其他元素。然后我们仍然有问题，表格行将始终显示（只是空的）
*   使用 jQuery 遍历 DOM 并用 a 包裹每个字符，`<span>`并将其他元素禁用到`display: none`. 然后回溯它并在它出现时显示东西（包括`span`其他元素）。这可能会破坏 HTML 一段时间（`<ul>`没有`<li>`内部等，但我想所有浏览器都能很好地处理它）。

我从`contents()`方法开始，但我并没有真正开始。

这是我目前拥有的，但它根本没有替换任何东西（即使它至少找到了一些文本）：

```
$(elemId).contents().each(function() {
    if (this.nodeType == 3) {
        var elements = $(this).text().split('');
        alert(elements);
        // does not delete anything, but it would also break 
        // if it deleted something
        // because text('') goes over elements like <strong> etc.
        $(this).text('');
        alert($(this).text());

        for (var i = 0; i < elements.length; i++) {
            $(this).append('<span>' + elements[i] + '</span>');
        }
    }
}); 
```

那么我该怎么做才能正确获取我的文本和标签呢？如果一切都像上面那样设置，我想这只是`contents()`递归使用并再次设置所有元素的可见性的问题。但是正确添加我的`<span>`似乎很困难。

## 一些例子

```
I am <strong>AB</strong> 
```

应该变成：

```
<span display="none">I</span><span display="none"> </span>
<span ...>a</span><span ...>m</span><span ...> </span>
<strong ...><span ...>A</span><span ...>B</span></strong> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:42:50.943

`.contents()`不遍历 DOM。您需要申请`.find("*")`获得所有后代，然后申请`.contents()`他们。

```
$("selector").find("*").andSelf().contents().each(function(){
  if(this.nodeType == Node.TEXT_NODE){
    $(this).replaceWith($.map(this.data, function(c){
      return "<span>" + c + "</span>";
    }).join(""));
  }
}); 
```

这是元素后代中每个字符完成的工作。我想你知道你需要非常小心地使用。

# php - php脚本读取阿拉伯数据并将其存储为问号

> ID：14673137
> 
> 赞同：0
> 
> 时间：2013-02-03T13:46:15.680
> 
> 标签：php, xml, character-encoding

我在将数据存储到 XML 文件时遇到问题：

我正在使用一个 PHP 脚本，它通过移动应用程序从用户接收数据并将其插入 XML 文件。但是，如果用户插入阿拉伯语单词（名称-密码-...等），它将作为问号存储在 XML 文件中。

提示：我已经设置了 XML 编码 = UTF8。

这是我的代码：

```
<html>
<head></head>
<form action="sign.php" method="post">
 name :<input type="text" name="name"/><br />
 pass :<input type="text" name="pass"/><br />
 mob :<input type="text" name="mobile"/><br />
 mail :<input type="text" name="email"/><br />
<input type="submit" name="send" value="send"/>
</form>

</html>
 <?php
header('Content-Type: text/html; charset=Windows-1256');
$test = utf8_encode("ياسمين");
echo mb_detect_encoding($test);

echo $test;
if(isset($_POST['send'])){

if(isset($_POST['name']) && isset($_POST['pass']) && isset($_POST['mobile']) &&isset($_POST['email'])) { 
 $name =  $_POST['name'];
     $pass = $_POST['pass'];
 $mob = $_POST['mobile'];
 $mail = $_POST['email'];

  $xml = simplexml_load_file('mowasla.xml');
$user = $xml->users->addChild('user');
$user->addChild('user_name', $name);
$user->addChild('pass', $pass);
$user->addChild('phone', $mob);
$user->addChild('email', $mail);
file_put_contents('mowasla.xml', $xml->asXML());
echo("done");
echo ($name);

}else{
 echo("error");
 die;

     }
  }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:01:01.167

在 PHP 中，大多数与 XML 相关的函数都希望您传入的字符串数据是 UTF-8 编码的。

在您的情况下，阿拉伯文本不是 UTF-8 编码的。因此，XML 库确实用替换字符替换了它无法识别的二进制字符序列，这里是问号 (?)。

因此，在插入阿拉伯语单词之前，您需要确保字符串是 UTF-8 编码的。

请在 W3C 网站上查看这通常是如何工作的（这首先与 PHP 无关，而是与 HTTP 和 HTML 相关）：

*   [字符编码 - W3C 国际化](http://www.w3.org/International/O-charset)

要从技术上通过解决您的问题来回答您的问题，您至少需要分享提交的数据（阿拉伯语单词、用户名、密码）的编码方式。没有显示问号的信息看起来是正确的，因为就像您的计算机一样，我们也不能说。

另见：

*   [一直到UTF-8](https://stackoverflow.com/q/279170/367456)

# dns - 用于 S3 静态托管的 DNS 配置注册商 Bookmyname 中的 CNAME

> ID：14673139
> 
> 赞同：1
> 
> 时间：2013-02-03T13:46:17.573
> 
> 标签：dns, amazon-web-services, amazon-s3, registrar

我在这里绝对感到困惑，所以一些帮助肯定会有所帮助。

我有一个想在 AWS S3 上托管的静态网站。我想将它与 sans-titres.com 域名相关联（作为奖励 www.sans-titres.com 但一步一步......）

我已阅读此内容： [Amazon S3 上的静态托管 - DNS 配置](https://stackoverflow.com/questions/8312162/static-hosting-on-amazon-s3-dns-configuration) 并遵循所有步骤。

所以我有两个桶 www.sans-titres.com 和 sans-titres.com

域名在[https://www.bookmyname.com](https://www.bookmyname.com)注册，我无法更改。

所以我尝试创建一个 CNAME，我认为就是这样。但不幸的是，这不起作用。

```
www.sans-titres.com  28800   CNAME   sans-titres.com.s3-website-eu-west-1.amazonaws.com.
sans-titres.com  28800   CNAME   sans-titres.com.s3-website-eu-west-1.amazonaws.com. 
```

作为配置，我仍然有：

```
Your DNS :
    nsa.bookmyname.com
    nsb.bookmyname.com
    nsc.bookmyname.com 
```

我无法修改（至少，我无法将字段更改为`www.sans-titres.com.s3-website-eu-west-1.amazonaws.com`or `sans-titres.com.s3-website-eu-west-1.amazonaws.com`。

所以第一个问题是：Bookname DNS 地址是干什么用的？因为，据我了解 CNAME 规则，每当发送 sans-titres.com 时，请求都会转发到回复正确内容的 aws 。所以 nsa.bookmyname.com 永远不应该被访问？

第二个问题自然是：我做错了什么？

我试图跟踪 sans-titres.com，但这就是我所拥有的：

*查找失败。输入中没有有效查找的 IP 地址或主机名。*

我还阅读了这篇文章： [Setting foobar.com and www.foobar.com to point to my Amazon S3-hosted site](https://stackoverflow.com/questions/6281741/setting-foobar-com-and-www-foobar-com-to-point-to-my-amazon-s3hosted-site)

这让我觉得我应该遵循本教程： [http](http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html) : //docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html 这解释了我们需要使用 Route53 服务，这不包含在 S3 服务中。我们没有解决方案来避免这种情况吗？

我认为域名超级简单：要么指向一个 IP，要么指向另一个稍后将指向该 IP 的地址，但我碰巧发现它比这复杂得多......

非常感谢您的帮助，我现在很困惑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:34:21.817

终于我摆脱了麻烦，尽管我从来没有真正明白哪里出了问题。

当然，我的 CNAME 配置不正确。这是现在有效的：

```
 @    28800   A   174.129.25.170
    www  28800   CNAME   www.sans-titres.com.s3-website-eu-west-1.amazonaws.com. 
```

使用 A 重定向到[http://wwwizer.com/naked-domain-redirect](http://wwwizer.com/naked-domain-redirect)以添加 www。

但仍有一些奇特的事情发生。

例如。当我输入完整的亚马逊端点时：http: [//www.sans-titres.com.s3-website-eu-west-1.amazonaws.com](http://www.sans-titres.com.s3-website-eu-west-1.amazonaws.com)

我被重定向到[http://www.sans-titres.com](http://www.sans-titres.com)，这感觉不合逻辑，因为反过来，考虑到 CNAME 规则。

经验教训：所有这些注册商都有非常不友好的界面，让你对修改他们的配置感到非常不舒服，而亚马逊试图一次销售尽可能多的服务。

嗯，一定要小心！

# java - 将字符串拆分为字母的简洁明了的方法？

> ID：14673143
> 
> 赞同：-2
> 
> 时间：2013-02-03T13:46:35.803
> 
> 标签：java, string, split

我在java中有一个非常基本的任务：

将字符串拆分为字母（String 类型，而不是 char）。

我首先使用的是`String.split("123")`返回一个尾随空格“{,1,2,3}”。由于您需要将数组转换为其他内容或创建一个新数组以删除第一个空格 - 我搜索了一个很好的方法并发现了许多变体，但它们都很庞大，例如使用循环、转换转换、转换。

那么如何将字符串转换为字母字符串的集合？

*   通过使用字符串缓冲区？
*   转换为 ArrayList？
*   使用拆分并创建一个新数组，而无需引导空格？
*   使用分词器？

一个简短、清晰的方法看起来如何？

我现在最喜欢的是

```
 String[] singleLetters = string.split("");
    singleLetters = Arrays.copyOfRange(singleLetters, 1, singleLetters.length); 
```

更好的方法是：

```
 String[] singleLetters = string.split("(?!^)") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:54:21.260

你为什么不使用长度为 1 的[subString()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29) - 这会给你`String`单独的字符

这是一个简单的演示代码

```
 public void subStrChar{
    String s = "helo";
    for(int i=0;i<s.length();i++){        
        System.out.println(" " + s.substring(i, i+1));
     }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:56:15.520

这个怎么样：

```
public static String[] splitMyString(String input)
  {
  final String[] array = new String[input.length()];
  for (int i = 0; i < input.length(); ++i)
     array[i] = input.substring(i, i+1);
  return array;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:49:31.357

`String.toCharArray()`能解决你的问题吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T13:55:03.993

看看番石榴的[拆分器](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)也许。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T14:09:27.143

```
str.split("(?!^)") 
```

正则表达式将阻止匹配开头的空字符串，因此结果将不包含起始空字符串。该解决方案无需任何假设即可工作。

# javascript - 将事件处理程序分配给提交按钮会引发 SyntaxError：Firebug 中缺少指数错误

> ID：14673145
> 
> 赞同：0
> 
> 时间：2013-02-03T13:46:52.390
> 
> 标签：javascript, syntax-error

请参考 JSfiddle [http://jsfiddle.net/uv7ng/3/](http://jsfiddle.net/uv7ng/3/)

我编写了一个 JS 函数，并希望使用以下语句为第 466 行的提交按钮“edit-next”分配一个 onclick 事件处理程序

```
document.webform-client-form-100.edit-next.onclick = ( function() {
}
);

webform-client-form-100 is the id of the form (line 84) 
```

但萤火虫抛出一个 SyntaxError: missing exponent 错误并且事件处理程序未分配。

我试过document.node-100.edit-next.onclick，我仍然得到同样的错误（node-100是第59行页面的id）

我不确定我应该如何引用提交按钮。将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:13:26.453

使用[document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)：

```
document.getElementById("webform-client-form-100")["edit-next"] 
```

由于 id 在文档中是唯一的，因此您也可以直接使用它：

```
document.getElementById("edit-next") 
```

我不完全理解错误，但`-`用于减法，这就是为什么你需要将你的 id 放在引号中。

# sharepoint - 通过浏览器在 SQL Server 和 SharePoint 上托管 MS Access 表单

> ID：14673149
> 
> 赞同：0
> 
> 时间：2013-02-03T13:47:31.760
> 
> 标签：sharepoint, ms-access

我在 SQL Server 上的两个相关表中有一些数据。我想以最少的技术努力（和能力！！）

a) 创建一个简单的表单来过滤属性（MS Access 中的标准过滤器 avbl）并在一个简单的表格中显示结果。有没有为此目的的内置表格 - 如果我有一个 80% 准备好的表格，我可能可以调整最后 20%

b) 不是分发 MS Access 前端文件，而是有办法将它托管在 SharePoint 上并通过浏览器访问

任何指针将不胜感激

# java - 如何将当前时间更改为用户时间

> ID：14673151
> 
> 赞同：0
> 
> 时间：2013-02-03T13:47:39.893
> 
> 标签：java, swing, user-interface

我正在时钟上创建一个 Java GUI，它要求用户从当前时间更改时间。我有系统时间和用户时间。应该是什么代码才能显示用户时间。我正在使用的愚蠢代码：

```
 Date curDate = new Date();
        //changeTime i have got from the user
        double time=0;
        if(curDate.getTime()- changeTime.getTime() > 0){
            time = curDate.getTime() - changeTime.getTime();
            time = time/(1000);
        }
        else{
            time = changeTime.getTime()-curDate.getTime();
            time = time/(1000);
        }
        if(changeTime.getHours()==0 && changeTime.getMinutes()==0){
            time=0;
        }
        curDate.setHours(curDate.getHours()+(int)time/(3600));
        curDate.setMinutes(curDate.getMinutes()+((int)time/60)%60); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:55:49.613

A`new Date()`是“旨在反映协调世界时 (UTC)”。用户在时钟上看到的内容取决于`TimeZone`，可以在`DateFormat`用于呈现日期的 中指定。下面的示例在 GMT 中打印同一时刻以及从纽约到柏林的一系列时区。

附录：我发现将其`Date`视为*模型*和对该模型`DateFormat`的*视图*很有帮助。

```
格林威治标准时间 2013 年 2 月 3 日 18:01:42 格林威治标准时间 1359914502673
2013 年 2 月 3 日 13:01:42 EST America/New_York 1359914502673
2013 年 2 月 3 日 14:01:42 AST America/Aruba 1359914502673
2013 年 2 月 3 日 15:01:42 ART America/Buenos_Aires 1359914502673
2013 年 2 月 3 日 16:01:42 BRST America/Sao_Paulo 1359914502673
2013 年 2 月 3 日 17:01:42 AZOT 大西洋/亚速尔群岛 1359914502673
2013 年 2 月 3 日 18:01:42 GMT 欧洲/伦敦 1359914502673
2013 年 2 月 3 日 19:01:42 CET 欧洲/柏林 1359914502673

```

包装日期；

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.TimeZone;

/** @see http://stackoverflow.com/a/14675418/230513 */
public class TestSDF {

    private static final String s = "dd-MMM-yyyy HH:mm:ss zz";
    private static final DateFormat f = new SimpleDateFormat(s);

    public static void main(String[] args) {
        Date date = new Date();
        print("GMT", date);
        print("America/New_York", date);
        print("America/Aruba", date);
        print("America/Buenos_Aires", date);
        print("America/Sao_Paulo", date);
        print("Atlantic/Azores", date);
        print("Europe/London", date);
        print("Europe/Berlin", date);
    }

    private static void print(String tz, Date d) {
        f.setTimeZone(TimeZone.getTimeZone(tz));
        System.out.println(f.format(d)
            + " " + tz
            + " " + d.getTime());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:52:58.153

一种简单的方法是**获取系统时间**并`add` `subtract`根据用户时间。

例如，系统时间是下午 2 点，用户将时间更改为下午 4 点，然后只需在系统时间上增加 2 小时并将其显示在您所需的用户时间字段中

# c - 你知道为什么这段 C 代码以“分段错误”结尾吗？

> ID：14673154
> 
> 赞同：0
> 
> 时间：2013-02-03T13:48:05.990
> 
> 标签：c, shared-memory, semaphore, mmap

你知道为什么这段 C 代码以“分段错误”结尾吗？

```
#include <semaphore.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/ipc.h>
#include <sys/shm.h>

#define NAMESEM "/mysem"

int main(int argc, char* argv) {
 sem_t* sem;
 int fd = shm_open(NAMESEM, O_RDWR|O_CREAT|O_EXCL|O_TRUNC, 0);

 ftruncate(fd, sizeof(sem_t));

 sem = mmap(NULL, sizeof(sem_t), PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);

 sem_init(sem, 1, 0);

 sem_wait(sem);

 return 0;
} 
```

我已经关注了此处找到的所有关于此的帖子，但似乎 sem_init() 会产生分段错误，我不知道为什么。我在指针上犯了一些错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:53:38.180

Consider the flags passed to `shm_open` in this line:

```
int fd = shm_open(NAMESEM, O_RDWR|O_CREAT|O_EXCL|O_TRUNC, 0);
                                  ^^^^^^^^^^^^^^ 
```

This means it will work the first time, when `NAMESEM` doesn't exist. Subsequent `shm_opens` will fail because of `O_EXCL`. Which in turn means `ftruncate` and `mmap` will fail. The gist of the issue is that these IPC objects survive after the program dies, until explicitly removed or until the system is restarted.

> `O_EXCL`
> 
> If `O_CREAT` was also specified, and a shared memory object with the given name already exists, return an error.

But really the true problem in your code is that **you're not checking the return values for these functions**. A simple `perror` would immediately point out the problems.

# c# - Shell_NotifyIconA / Shell_NotifyIconW ...有什么区别？

> ID：14673155
> 
> 赞同：3
> 
> 时间：2013-02-03T13:48:21.310
> 
> 标签：c#, c++, winapi, interop, pinvoke

我正在将一些 Win32 代码移植到 C#，并且遇到了几个具有相同名称并使用相同结构的函数，只是它们以 A 和 W 结尾

例如：

```
[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("shell32.dll", CallingConvention = CallingConvention.StdCall)]
public static extern bool Shell_NotifyIconA(uint dwMessage, ref NOTIFYICONDATAA lpData);

[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("shell32.dll", CallingConvention = CallingConvention.StdCall)]
public static extern bool Shell_NotifyIconW(uint dwMessage, ref NOTIFYICONDATAW lpData); 
```

我在 C# 中看到了一些实现，它们在函数名称和相关结构中都省略了 A 和 W，如下所示：

```
[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("shell32.dll", CallingConvention = CallingConvention.StdCall)]
public static extern bool Shell_NotifyIcon(uint dwMessage, ref NOTIFYICONDATA lpData); 
```

我想知道的是：

1.  A 和 W 分别代表什么？

2.  在 C# 中，我应该使用 A 和 W 来实现如上所示的功能，还是省略 A 和 W 以支持单一实现是更好的做法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T13:57:44.630

“A”后缀（代表 ANSI）表示该函数适用于输入*的多字节字符串*（可能其中的某些成员`NOTIFYICONDATA`是字符串），而“W”（表示“Wide”）表示该函数适用于输入 Unicode字符串。

在 Windows 中，最好尽可能使用 Unicode 字符串，因为这是操作系统*内部*使用的。因此，如果您的项目通过传递多字节字符串来调用 Windows API，最终将在内部进行到 Unicode 的转换（如果操作系统还*返回*一个字符串，则可能会再次转换回多字节），从而减慢速度。

通常，当函数的某个数据结构的两个版本`X`存在多字节和 Unicode 字符时，它们被赋予名称（分别）`XA`和一个做开关）。`XW``X``#ifdef`

我对 C# 的了解不够，无法回答问题的第二部分。

**编辑：**

[正如David Heffernan](https://stackoverflow.com/users/505088/david-heffernan)所指出的，p/invoke 编组器会将名称解析为与属性中`CharSet`使用的名称匹配的名称。`DllImport`

# javascript - 如果新的实例对象没有分配给变量会发生什么？

> ID：14673162
> 
> 赞同：5
> 
> 时间：2013-02-03T13:48:58.533
> 
> 标签：javascript

如果您不将新对象分配给变量会发生什么？例如：

```
function MyConstructor() {
   // Codes here
};

new MyConstructor(); // new object instance is not assign to a variable 
```

这段代码危险吗？它会破坏全局命名空间吗？是否可以访问使用此样式创建的对象？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T13:51:58.793

*   这段代码危险吗？-**没有**。
*   它会破坏全局命名空间吗？-**没有**。
*   是否可以访问使用此样式创建的对象？-**没有**。

* * *

正如您正确指出的那样，调用`new MyConstructor()`将返回一个新对象，对它的引用不会被存储，因此会很快被垃圾收集器删除。您对该新对象采取行动的唯一机会是直接

```
new MyConstructor().someMethod(); 
```

...之后，您就失去了机会，新的对象引用在外太空中丢失了:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T13:52:56.390

Unless the constructor itself saves a reference to the object somewhere outside the object, there is no reference to the object longer, and the garbage collector will remove it.

The code isn't dangerous, it won't add anything to the global namespace, and it's not possible to reach the object unless the constructor makes it possible.

An example of where it could be used would be if the constructor registers the object itself:

```
var myHandlers = {};

function Handler(name) {
  myHandlers[name] = this;
}

new Handler("test"); 
```

The drawback of using something like that is of course that it's harder to follow what's happening.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:52:47.187

because there's no reference to it after its creation it is soon garbage collected.

just FYI: the reason for creating objects 80 to 90% of the time is so they can be referenced and utilized later.

# java - JComboBox 使 GUI 消失

> ID：14673167
> 
> 赞同：1
> 
> 时间：2013-02-03T13:49:36.857
> 
> 标签：java, swing, jcombobox

我一添加

```
String[] possibleClasses = {"12", "11", "10", "9", "8", "7", "6", "5"};
JComboBox classes = new JComboBox(possibleClasses); 
```

对于我的任何程序，框架中都没有显示任何摆动组件。我唯一得到的是一个空框架。使用 JComboBox 有什么秘密吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:08:46.487

仅仅创建 a`JComboBox`不足以让你的组件出现在 中`JFrame`，你需要*将*它添加到容器中：

```
myJFrame.add(classes); 
```

# pear - 通过 PEAR 安装的 PHP Documentor，找不到 phpdoc 命令

> ID：14673168
> 
> 赞同：0
> 
> 时间：2013-02-03T13:49:37.970
> 
> 标签：pear, phpdoc, php

我通过 PEAR 在共享主机（Just Host）上安装了 PHP Documentor，它似乎已正确安装，没有报告错误，并且`phpdoc`列在`bin`目录下。此外，`phpDocumentor`存在于 下`php`，两者都位于我的主文件夹中`/home/[user]/`。

我查看`phpdoc`了`bin`目录，所有内容都指向正确的位置。我还按照主机站点上提供的说明将我的 PHP include_path 设置为`/home/[user]/php`. 我尝试`phpdoc`从每个可以想象的位置执行，包括在下面`home/[user]/bin/`，我不断得到以下结果：

```
 -bash-4.1$ phpdoc
    -bash: phpdoc: command not found 
```

这是来自`$PATH`-

```
-bash-4.1$ echo $PATH
/home/[user]/perl5/bin:/usr/lib64/qt-3.3/bin:/home/[user]/perl5/bin:/ramdisk/php/54/bin:/usr/php/54/usr/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin 
```

主机是 Linux，运行 PHP 5.4.10，Apache 版本 2.2.23。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:02:01.213

我再次阅读了房东支持代表的回复，并尝试了他们的建议（多么好的概念）——它奏效了！简单地跑了`~/bin/phpdoc`，瞧。

如果有人可以解释为什么这有效并且简单地导航到同一目录并输入`phpdoc`不起作用，我将不胜感激。此外，如何建立到该路径的链接以便`phpdoc`它自己工作？

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:13:46.220

您应该在安装后使用以下命令刷新您的路径/环境：

```
phpenv rehash 
```

否则，您的新设置在当前 shell 中无效。

# .htaccess - htaccess RewriteRule 不起作用

> ID：14673170
> 
> 赞同：1
> 
> 时间：2013-02-03T13:49:42.163
> 
> 标签：.htaccess, mod-rewrite, yii

我在 yii 框架中工作并尝试使用 htaccess 文件重写 url 这是我的文件（第一步我试图使用一个简单的规则）

```
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^carguide$  MainModel/index/304 [NC,L]

# otherwise forward it to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php

# otherwise forward it to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

我想将 url carguide 重写为 mainModel/index/304，但是我尝试过的 yii 没有收到原始 url 并引发 404 错误。

这是日志文件：

```
strip per-dir prefix: C:/xampp/htdocs/cars/carguide -> carguide
applying pattern '^carguide$' to uri 'carguide'
RewriteCond: input='C:/xampp/htdocs/cars/carguide' pattern='!-f' => matched
RewriteCond: input='C:/xampp/htdocs/cars/carguide' pattern='!-d' => matched
rewrite 'carguide' -> 'MainModel/index/304'
add per-dir prefix: MainModel/index/304 -> C:/xampp/htdocs/cars/MainModel/index/304
strip document_root prefix: C:/xampp/htdocs/cars/MainModel/index/304 -> /cars/MainModel/index/304
internal redirect with /cars/MainModel/index/304 [INTERNAL REDIRECT]
add path info postfix: C:/xampp/htdocs/cars/MainModel -> C:/xampp/htdocs/cars/MainModel/index/304
strip per-dir prefix: C:/xampp/htdocs/cars/MainModel/index/304 -> MainModel/index/304
applying pattern '^carguide1$' to uri 'MainModel/index/304'
add path info postfix: C:/xampp/htdocs/cars/MainModel -> C:/xampp/htdocs/cars/MainModel/index/304
strip per-dir prefix: C:/xampp/htdocs/cars/MainModel/index/304 -> MainModel/index/304
applying pattern '.' to uri 'MainModel/index/304'
RewriteCond: input='C:/xampp/htdocs/cars/MainModel' pattern='!-f' => matched
RewriteCond: input='C:/xampp/htdocs/cars/MainModel' pattern='!-d' => matched
rewrite 'MainModel/index/304' -> 'index.php'
add per-dir prefix: index.php -> C:/xampp/htdocs/cars/index.php
strip document_root prefix: C:/xampp/htdocs/cars/index.php -> /cars/index.php
internal redirect with /cars/index.php [INTERNAL REDIRECT]
strip per-dir prefix: C:/xampp/htdocs/cars/index.php -> index.php
applying pattern '^carguide$' to uri 'index.php'
strip per-dir prefix: C:/xampp/htdocs/cars/index.php -> index.php
applying pattern '.' to uri 'index.php'
RewriteCond: input='C:/xampp/htdocs/cars/index.php' pattern='!-f' => not-matched
pass through C:/xampp/htdocs/cars/index.php 
```

我试图更改标志，添加一个 RewiteBase。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:15:16.913

正如我所看到的，您不需要使用`.htaccess`为您网站的每个页面创建特定的重写规则。[使用这里](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.apache-nginx-config#apache)`.htaccess`建议的 simple 就足够了，然后使用 Yii 的[URL 管理器](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)配置你的重写规则。

**更新**

如果您的控制器名称是`mainModel`并且您的操作名称是`index`（就 Yii 而言，路由是`mainModel/index`）并且您希望可以通过此页面访问此页面，`http://yoursite/carguide`那么您的 URL 管理器配置`protected/config/main.php`可能如下所示：

```
'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    'rules' => array(
        'carguide' => 'mainModel/index',
    )
), 
```

**更新**

有关Yii 的 URL 管理器类支持的配置属性，请参阅[此页面。](http://www.yiiframework.com/doc/api/1.1/CUrlManager#properties)

# php - ajax代码不工作

> ID：14673171
> 
> 赞同：2
> 
> 时间：2013-02-03T13:49:42.473
> 
> 标签：php, ajax

这是我的js代码

```
function load(div_tag,thefile)
{

    if(window.XMLHttpRequest)
    {
        xmlhttp = new XMLHttpRequest();
    }
    else
    {
        xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
    }
    xmlhttp.onreadystatechange = function()
    {
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200)
        {
            document.getElementById(div_tag).innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open('GET', thefile, true);
    xmlhttp.send();
} 
```

这是我的php代码

```
echo '<div style="float:left; margin-left:2px; margin-top:17px; background:#666; text-align:center; width:auto;"><a href="#div" onclick="load(\'div\',\'include/comment_form.php\')" style="text-decoration:none;"><b style="color:white;">Add comment</b></a></div>';

echo '<div id="div" align="left" style="clear:both;"></div>'; 
```

问题是它在 xampp 中工作，但在我的网站上不起作用。我是初学者请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:10:32.600

适合成功评论的答案：

该函数`load()`应返回值*true*或*false*，因为它位于标记的`onclick`处理程序中。`<a`由于`load()`不返回任何内容，因此结果取决于浏览器。

只需返回*true*即可`load()`激活锚重定向

```
function load(div_tag,thefile)
{
    ...
    xmlhttp.open('GET', thefile, true);
    xmlhttp.send();

    return true;
} 
```

# android - 为什么 android.content.ContentResolver.delete 返回一个整数？

> ID：14673174
> 
> 赞同：1
> 
> 时间：2013-02-03T13:50:28.640
> 
> 标签：android, int, implementation, long-integer, android-contentresolver

只是想知道，除了“因为开发人员决定这样做”之外还有其他原因[`android.content.ContentResolver.delete`](http://developer.android.com/reference/android/content/ContentResolver.html#delete%28android.net.Uri,%20java.lang.String,%20java.lang.String%5B%5D%29)返回一个整数吗？

如果删除的条目多于整数可以存储的条目，它不应该返回一个 long 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:15:06.730

我在某处读到 2,147,483,647（这也是 int 的最大数量）是 SQLite 中自动增加主键列可以存储的最大数量。因此，我假设 android 开发人员假设数据库不会存储更多条目。

# ember.js - 在 ember.js 中创建动态模型的最佳地点/时间

> ID：14673175
> 
> 赞同：1
> 
> 时间：2013-02-03T13:51:11.910
> 
> 标签：ember.js, ember-data

我正在编写一个简单的软件作为服务，例如应用程序，每个客户为特定组件定义一组配置。然后在运行时我需要基于这个配置构建一系列模型。

我的问题是我应该何时查找配置并构建动态 ember 对象数组来表示这些模型？

目前我正在 ApplicationRoute 本身的 setupControllers 函数中玩这个（因为它在加载应用程序时只加载了 1x ，然后我将随时拥有模型数组，而不是稍后及时等待它们.)

这组配置是最小的，从这个方法中获得的性能对于这个例子来说是值得的。但这是加载这些/创建动态模型的正确组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:55:13.720

> My question is when should I lookup the configuration and build the array of dynamic ember objects to represent these models?

It depends of course ;-)

*   If you need ember to be in a `loading` state while the lookup happens, then `setupControllers` is too late. In that case consider using the `model` hook instead.
*   Do you need to do all of this configuration upfront? If not maybe push it down to `setupControllers` callback on a subroute.

> But is this the right component to load these up / create dynamic models?

Yes - in this case I'd say `setupControllers` on application route is a good choice.

# symfony - 使用 ElasticaBundle 和 Translatable 搜索多语言记录

> ID：14673178
> 
> 赞同：1
> 
> 时间：2013-02-03T13:51:22.750
> 
> 标签：symfony, translation, elasticsearch, multilingual

我使用 Doctrine2 的 (Gedmo) 可翻译行为扩展使用 Symfony2 创建了一个多语言网站。这工作正常，但现在我正在寻找一种使用 ElasticaBundle 创建一个不错的搜索选项的方法。我希望德语用户在德语翻译中也可以在英语翻译中进行搜索。

目前我正在尝试为每种语言使用单独的索引。我的 config.yml 看起来像这样：

```
foq_elastica:    
    clients:
        default: { host: localhost, port: 9200 }    
    indexes:                
        articles_en:
            client:default                                                                                  
            types:
                article:
                mappings:
                    name: { boost: 5, analyzer: my_analyzer }                                                                         
                persistence:
                    driver: orm
                    model:  Test\SiteBundle\Entity\Article
                    identifier: id
                    provider:
                        service: elastica.translation.provider.article.en                        
                    finder:
        articles_de:
        ....
        articles_nl:
        ..... 
```

如果您想搜索一个索引，但此捆绑包似乎无法搜索两个索引，这很好用，还是我错了？

有没有办法做到这一点？任何帮助将不胜感激！

瑞克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:56:42.907

您可能应该只为每种语言的每篇文章添加一个索引，并将一种语言添加到您的索引中。然后，您可以在索引中搜索一种或多种语言的文章。

# jquery - 图片未显示（灯箱）

> ID：14673179
> 
> 赞同：0
> 
> 时间：2013-02-03T13:51:25.853
> 
> 标签：jquery, lightbox

灯箱不工作。单击拇指后，页面变暗，但没有弹出图像。可能是什么问题呢？

头部部分：

```
<link href="/inc/bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="/inc/bootstrap/fontawesome/font-awesome.min.css" rel="stylesheet">
<link href="/inc/css/style.css" rel="stylesheet">
<link href="/inc/lightbox/css/lightbox.css" rel="stylesheet" /> 
```

代码：

```
<a href="image.png" rel="lightbox" title="Some title"><img src="image-thumb.png"></a> 
```

就在之前`</body>`：

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script src="/inc/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/inc/lightbox/js/lightbox.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T00:09:01.413

我已经解决了这个问题。不要使用最新版本的 jquery，而是使用 1.7.2 版本，就像他们在灯箱网站示例中使用的那样。

# python - 使用python比较多个文件

> ID：14673184
> 
> 赞同：-2
> 
> 时间：2013-02-03T13:51:56.500
> 
> 标签：python

我有5个文件如下

F1：

```
ABL1
ABR
AHSG
AIRE
CCKBR
LRBA
CDC27
CENPA 
```

F2：

```
AKT1
APC
APP
AR
CCND1
C11ORF2
CCNE1
CST6
CTNNB1
DBI
DEFA1
DNMT1
EEF1A1
EEF1G 
```

F3：

```
ACTG1
AMPH
ANK3
APBA2
APOA1
ARHGDIA
ATP5J
DST
CA1
CA12
DDR1
CALR
CASP6 
```

F4：

```
ACVR1
ARL4D
RHOA
RHOG
RHOH
BMPR1B
BMPR2
CDC20
CDK4
CDK6
CHN1 
```

F5：

```
A1BG
A2M
AAMP
ACTB
ADD1
ALAS1
ALB
APLP1
ASNA1
ATP5B 
```

我尝试了以下代码

```
file1=open("F1.txt","r")
file2=open("F2.txt","r")
file3=open("F3.txt","r")
file4=open("F4.txt","r")
file5=open("F5.txt","r")

list1=file1.readlines()
list2=file2.readlines()
list3=file3.readlines()
list4=file4.readlines()
list5=file5.readlines()

for line1 in list1:
    for line2 in list2:
        for line3 in list3:
            for line3 in list4:
                for line4 in list5:
                    if line1.strip() in line2.strip() in line3.strip() in line4.strip() in line5.strip():
                        print line1
                        file3.write(line1) 
```

现在我想比较所有这些文件并使用 python 脚本找出常用词有人可以帮忙吗？我可以使用套装吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:10:32.507

它更容易（虽然我在打开文件时没有做任何错误检查）：

```
filenames = ["F1.txt", "F2.txt", "F3.txt", "F4.txt", "F5.txt"]
files = [open(name) for name in filenames]
sets = [set(line.strip() for line in file) 
            for file in files]
common = set.intersection(*sets)
for file in files: file.close() 
```

# jquery - 单击链接时显示一个 div，同时使用 jquery 隐藏其他 div

> ID：14673189
> 
> 赞同：3
> 
> 时间：2013-02-03T13:52:12.600
> 
> 标签：jquery, html, hide, show

我正在尝试创建一个具有一系列链接和 div 数量的导航方案。当我点击链接 1 时，我想显示 div 1。如果我点击链接 2，我想隐藏 1 并显示 2 等等。

我能够使以下代码正常工作。但是，当单击页面上的任何其他链接时，当前正在显示的 div 会消失/隐藏。

我尝试了各种解决方案，但一直无法弄清楚。有人可以根据下面的代码提供一些关于可能发生的事情的见解。

HTML：

```
 <ul id="navigation">
        <li data-tab="property" class="activeitem settingLink active"><a href="#">Property Flyers</a></li>
        <li data-tab="openhouse" class="settingLink"><a href="#">Open House Flyers</a></li>
        <li data-tab="postcards" class="settingLink"><a href="#">Postcards</a></li>
        <li data-tab="mortgage" class="settingLink"><a href="#">Mortgage Flyers</a></li>
        <li data-tab="recruiting" class="settingLink"><a href="#">Recruiting Flyers</a></li>
    </ul>

    <div id="property" class="span-18 last"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" /></div>
    <div id="openhouse" class="span-18 last"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" /></div>
    <div id="Postcards" class="span-18 last"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" /></div>
    <div id="Mortgage" class="span-18 last"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" /></div>
    <div id="Recruiting" class="span-18 last"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" /></div> 
```

JavaScript：

```
$('a').on('click', function(e) {
    e.preventDefault();
    var $li = $(this).closest('li');

    var tab = $li.data('tab');
    var current = $('.active.settingLink').data('tab');

    $('#' + current).fadeOut('fast', function() {
        //Slide the new div down
        $('#' + tab).fadeIn();
    });

    //Remove active class from current link
    $('.active.settingLink').removeClass('active');

    $li.addClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:02:43.380

`$('a')`针对页面中的每个`<a>`标签，您需要更具体的选择器：

```
$("#navigation a'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:02:27.267

```
$("#navigation a").on(... 
```

将click事件仅绑定到您的导航链接就是如此；您的代码将此事件绑定到它将在文档正文中找到的所有链接，因此您只需要一个更精确的选择器

注意：你应该委托

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T14:18:04.040

示例：http: [//jsfiddle.net/9UPQj/](http://jsfiddle.net/9UPQj/)

```
<ul id="navigation">
        <li data-tab="property" class="activeitem settingLink active"><a href="#">Property Flyers</a></li>
        <li data-tab="openhouse" class="settingLink"><a href="#">Open House Flyers</a></li>
        <li data-tab="postcards" class="settingLink"><a href="#">Postcards</a></li>
        <li data-tab="mortgage" class="settingLink"><a href="#">Mortgage Flyers</a></li>
        <li data-tab="recruiting" class="settingLink"><a href="#">Recruiting Flyers</a></li>
    </ul>

    <div id="property" class="span-18 last" rel="1"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" />1st</div>
    <div id="openhouse" class="span-18 last" rel="2"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" />2nd</div>
    <div id="Postcards" class="span-18 last" rel="3"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" />3rd</div>
    <div id="Mortgage" class="span-18 last" rel="4"><img src="images/templates/thumbs/property84.jpg" width="143" height="194" />4th</div> 
```

JS：

```
$('#navigation a').on('click', function(e) {
    e.preventDefault();
    var index = $('a').index(this) + 1;

    $('div').each(function(){

        if($(this).attr('rel') == index){
            $(this).addClass('active');
            $(this).show();
        }else{
            $(this).removeClass('active');
            $(this).hide();
        }
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T14:09:05.140

试试这个

[http://jsfiddle.net/6QJJp/1/](http://jsfiddle.net/6QJJp/1/)

我想这就是你需要的

您将需要`CSS`根据您的要求进行修复。

# c - 这个 _itoa_s 失败的技术原因是什么？

> ID：14673191
> 
> 赞同：2
> 
> 时间：2013-02-03T13:52:27.053
> 
> 标签：c, ascii, itoa

我正在尝试`_itoa_s`使用 MSVC2012 将数字的 0 到 9 转换为 ASCII，我发现自己遇到了堆栈损坏错误。

我以为 ASCII 表每个字符只占用一个字节，但从外观上看，一个字节是不够的。

我的想法哪里错了？

```
for (int digit = 0; digit < 10; digit++)
{
  char ch_digit;
  _itoa_s(digit, &ch_digit, 1, 10); 
} 
```

我认为这个简单的循环应该成功，但它失败了。我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:06:51.650

`_itoa_s()`应该写出一个字符和终止`NUL`字符。您希望它写入长度 = 1 的缓冲区。因此，您可能会因为 uninitialized 而收到损坏错误`ch_digit`，或者`_itoa_s()`不是 _s （安全）并通过在那个字符后面写入来粉碎您的堆栈。

但是为什么不直接“手动”计算以 10 为底的 ASCII 字符，而不是使用这种不可移植的 MS 特定木材呢？

```
for (int digit = 0; digit < 10; digit++)
{
    char ch_digit = '0' + digit; //'0' == 48 == 0x30
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:20:11.210

`itoa_*`写入一个*string*，因此涉及一个空终止符。

# python - onclick方法，捕捉坐标高亮出现matplotlib

> ID：14673195
> 
> 赞同：1
> 
> 时间：2013-02-03T13:52:51.313
> 
> 标签：python, matplotlib, wxpython

我有一个散点图，并通过 matplotlib [http://matplotlib.org/users/transforms_tutorial.html#axes-coordinates](http://matplotlib.org/users/transforms_tutorial.html#axes-coordinates)实现了一个荧光笔类型的东西。

目前，当您单击任何点时，荧光笔会出现在同一位置，但我想要做的是，当您单击某个点时，它会从该点获取坐标并突出显示该点所在的位置。我的代码是这个

```
def onclick    
    ind = event.ind
    # the x coords of this transformation are data, and the
    # y coord are axes
    trans = transforms.blended_transform_factory(
    ax.transData, ax.transAxes)

    # highlight the 1..2 stddev region with a span.
    # We want x to be in data coordinates and y to
    # span from 0..1 in axes coords
    rect = patches.Rectangle((1,0), width=1, height=1,
                     transform=trans, color='yellow',
                     alpha=0.5)

    ax.add_patch(rect)
    print ('on pick scatter:' , ind , np.take(x,ind), np.take(y,ind)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:10:46.923

可能有更短的方法可以做到这一点，但这是我的破解，它有效:)

```
 def onpick3(event):
            ind = event.ind
    l = np.take(x,ind)
        for i in range(0,1):
                d = l[i]

    if highlight == 1 :

        global highlight
        highlight = 0;
        self.canvas.draw()
            if highlight == 0 :

            trans = transforms.blended_transform_factory(self.axes.transData, self.axes.transAxes)
                rect = patches.Rectangle(((d-10),0),width=25, height=25, transform=trans, color='yellow',alpha=0.5)
                self.axes.add_patch(rect)
            self.canvas.draw()
        rect.remove()
        else:
         self.canvas.draw()
         trans = transforms.blended_transform_factory(self.axes.transData, self.axes.transAxes)
             rect = patches.Rectangle(((d-10),0),width=25, height=25, transform=trans, color='yellow',alpha=0.5)
             self.axes.add_patch(rect)
         self.canvas.draw()
         highlight = 1
         rect.remove()
            print ('onpick3 scatter:', ind, np.take(x, ind), np.take(y, ind)) 
```

# c# - XAML - Personalize button behavior

> ID：14673199
> 
> 赞同：0
> 
> 时间：2013-02-03T13:53:03.820
> 
> 标签：c#, xaml, button, state

I'd like to personalize my button's behavior on some states, like `PointerOver` or `Disabled`. I've found this [answer](https://stackoverflow.com/questions/12617071/make-the-button-transparent-on-mouse-over), wich gave me a big help, but I still don't get how to personalize the button with my personal resources. i.e. I'd like to change the button's background when it's disabled, so I wrote something like:

```
<Image x:Key="myImage" src="Images/myImage.png" />

[...]

<VisualState x:Name="Disabled">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource myImage}"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

But exception occurs. I can't tell you what's the exception, I think 'cause XAML is debugged by low-level c++ debugger and no particular exception is thrown.

What am I doing wrong?

EDIT: The exception is raised in the file App.g.i.cs at the foruth line of this block:

```
#if DEBUG && !DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION
        UnhandledException += (sender, e) =>
        {
            if (global::System.Diagnostics.Debugger.IsAttached) global::System.Diagnostics.Debugger.Break();
        };
#endif 
```

EDIT2: If I examine e in the debug session:

*   [System.Runtime.InteropServices.COMException] = {"Error HRESULT E_FAIL has been returned from a call to a COM component."}

*   Message = "Failed to assign to property 'Windows.UI.Xaml.Media.Animation.ObjectKeyFrame.Value'. [Line: 32 Position: 91]"

*   _stackTrace = null

# java - synchronization issue on LinkedHashMap

> ID：14673200
> 
> 赞同：0
> 
> 时间：2013-02-03T13:53:15.277
> 
> 标签：java, linkedhashmap

I am confused by one specific point regarding synchronization feature of LinkedHashMap. Here are the related Javadoc where I am confused. My confusion point is, why remove method is special here, which is mentioned by -- "except through the iterator's own remove method"?

[http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

The iterators returned by the iterator method of the collections returned by all of this class's collection view methods are fail-fast: if the map is structurally modified at any time after the iterator is created, in any way except through the iterator's own remove method, the iterator will throw a ConcurrentModificationException. Thus, in the face of concurrent modification, the iterator fails quickly and cleanly, rather than risking arbitrary, non-deterministic behavior at an undetermined time in the future.

thanks in advance, Lin

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:57:17.940

Basically, you're not allowed to structurally modify a map while iterating over it, since doing so would invalidate the iterator.

`Iterator.remove()` is specifically exempt from this, to enable you to easily write code like this:

```
Iterator<E> it = coll.iterator();
while (it.hasNext()) {
  E val = it.next();
  if (some_condition) {
    it.remove();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:57:57.137

这并不特别，它是使用迭代器时从集合中删除某些项目的正常方式。如果一个元素在迭代器“外部”被移除，则给定集合的迭代器视图与实际集合相比变得不一致，因为迭代器无法知道元素被移除的原因或方式。

迭代器可以是不同的类型。有些迭代器在集合的给定状态上“操作”，在这种情况下，在迭代器之外修改集合没有任何区别。这对于不可变集合很常见。另一种类型的迭代器是“快速失败”的迭代器，一旦它发现迭代器现在正在查看集合的旧状态（即集合是从外部修改的），就会抛出异常。如文档中所述，`LinkedHashMap`使用快速失败的迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:58:18.833

它并不特别，它在 上获得了一种锁，`LinkedHashMap`这样你就可以通过它的`remove`方法来删除元素。

这是因为，如前所述：

> 结构修改是添加或删除一个或多个映射的任何操作，或者在访问排序的链接哈希映射的情况下，影响迭代顺序。

这意味着您在数据结构上有一个待处理的迭代器，允许任何修改都会在确定性行为方面产生问题（因为随着底层结构的变化，迭代器会变得不一致）。因此，如果您有一个开放的迭代器，只要您调用任何方法，实现就会使任何结构修改失败并出现异常。

# android - Android's Policy for throwing processes out of memory

> ID：14673201
> 
> 赞同：0
> 
> 时间：2013-02-03T13:53:17.783
> 
> 标签：android, native

I have a service in Android which takes a lot of memory and is occasionally removed from running. What is the rule by which Android decides to remove a process? If so - how can I tell I'm about to stop running due to too much memory consumption? Most of the memory I allocate is allocated in native code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:59:06.153

如果其他一些应用程序正在消耗内存，那么服务也可以终止。因为没有足够的堆内存来为您的应用程序分配。要处理这个问题，您可以处理低内存功能并通知用户应用程序正在低内存上运行。另外，同时启动您的服务，您可以设置重新启动。

干杯。

# vb.net - 每次我生成一个字符串，然后关闭程序并再次生成它的相同

> ID：14673206
> 
> 赞同：1
> 
> 时间：2013-02-03T13:54:17.303
> 
> 标签：vb.net, visual-studio-2010, visual-studio, code-generation

好吧，我已经生成了这个随机字符串，但我最近注意到了一个致命的缺陷。当我生成一个随机字符串时，关闭程序并生成另一个随机字符串，它与第一代相同。这是代码：

```
 Public Function RandomString(ByVal length As Integer) As String
    Dim strb As New System.Text.StringBuilder
    Dim chars() As String = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"} 

    Dim UpperBound As Integer = UBound(chars)

    For x As Integer = 1 To length
        strb.Append(chars(Int(Rnd() * UpperBound)))
    Next

    Return strb.ToString

End Function

Private Sub PictureBox1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PictureBox1.Click
    Try
        System.Diagnostics.Process.Start("Link Removed!")
    Catch
    End Try
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim repeatCnt As Integer

    'Check for valid numeric entry
    If Integer.TryParse(TextBox2.Text, repeatCnt) Then
        For repeatIdx As Integer = 1 To repeatCnt
            Dim rndstring As String
            'Generate random string...
            rndstring = RandomString(24)
            '...and append to text box with a line break
            RichTextBox1.Text &= rndstring & vbCrLf
        Next
    Else
        MessageBox.Show("Please enter a valid integer number in the text box")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:58:27.237

您的问题是您正在运行 Rnd() 而不是使用[Random](http://msdn.microsoft.com/en-us/library/system.random.aspx)类。

为了避免`Rnd()`每次都给出相同的“随机”数字序列，应该调用[Random.Next() （以便使用机器时钟作为初始值/种子）。](http://msdn.microsoft.com/en-us/library/9b3ta19y.aspx)

所以在你的情况下：

```
Dim random As New System.Random()
Public Function RandomString(ByVal length As Integer) As String
   Dim strb As New System.Text.StringBuilder
   Dim chars() As String = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"} 

   Dim UpperBound As Integer = UBound(chars)

   For x As Integer = 1 To length
      strb.Append(chars(Int(random.Next(UpperBound)))
   Next

   Return strb.ToString

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:35:26.507

尝试生成这样的随机字符串：

```
Public Shared Function GeneratePass() As String

    Dim unique As Guid = Guid.NewGuid
    Return unique.ToString.Substring(1, 6)

End Function 
```

# c# - SQL USE Statement equivalent in NHibernate c#

> ID：14673210
> 
> 赞同：0
> 
> 时间：2013-02-03T13:54:47.690
> 
> 标签：c#, nhibernate

Im trying to find a way to invoke the USE statement in NHibernate.

In SQL I can write something like this

```
USE MyDatabase;
SELECT * FROM Stuff

USE OtherDatabase;
SELECT * FROM OtherStuff 
```

Is there a way to achieve this behavior in NHibernate?

The second database is within the same authentication context (same server as well) hence there should be no need to switch the entire connectionstring.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:03:46.720

显然我可以做到这一点

```
using (ISession session = SessionFactory.OpenSession())
{
    session.CreateSQLQuery("USE OtherDatabase").ExecuteUpdate();
    // ...
} 
```

# jquery - jQuery FlexSlider - 链接到特定图像

> ID：14673212
> 
> 赞同：1
> 
> 时间：2013-02-03T13:55:07.470
> 
> 标签：jquery

在另一篇文章（[jQuery FlexSlider 隐藏滑块但保留手动控件的可见性](https://stackoverflow.com/questions/9744335/jquery-flexslider-hide-slider-but-retain-visibility-of-manual-controls/)）中，用户 LJ902 回答了您如何链接到 Flexslider 中的特定图像。它可以完美运行，但前提是链接与图像位于同一页面中。

我想要的：在首页上，有一堆图像缩影..当您单击其中一个时，您会进入一个新页面，其中显示在 Flexslider 中的所有图像，并且选择的是用户选择的图像在首页。

这是链接和图像的代码。注意链接中的“rel”：

```
<a rel="0" class="slide_thumb" href="#">slide link 1</a>
<a rel="1" class="slide_thumb" href="#">slide link 2</a>
<a rel="2" class="slide_thumb" href="#">slide link 3</a>

<div class="flexslider">
<ul class="slides">
    <li>
        <img src="demo-stuff/inacup_samoa.jpg" />
        <p class="flex-caption">Captions and cupcakes. Winning combination.</p>
    </li>
    <li>
        <a href="http://flex.madebymufffin.com"><img src="demo-stuff/inacup_pumpkin.jpg"       /></a>
        <p class="flex-caption">This image is wrapped in a link!</p>
    </li>
    <li>
        <img src="demo-stuff/inacup_donut.jpg" />
    </li>
    <li>
        <img src="demo-stuff/inacup_vanilla.jpg" />
    </li>
    <li>
        <img src="demo-stuff/inacup_vanilla.jpg" />
    </li>
  </ul>
 </div> 
```

这是脚本：

```
<script type="text/javascript" charset="utf-8">
jQuery(document).ready(function($) {

$('.flexslider').flexslider({
    animation: "slide",
    slideshow: false,
    animationLoop: false,
    directionNav: true,
    slideToStart: 0,
    start: function(slider) {
        $('a.slide_thumb').click(function() {
            $('.flexslider').show();
            var slideTo = $(this).attr("rel")//Grab rel value from link;
            var slideToInt = parseInt(slideTo)//Make sure that this value is an integer;
            if (slider.currentSlide != slideToInt) {
                slider.flexAnimate(slideToInt)//move the slider to the correct slide  (Unless the slider is also already showing the slide we want);
            }
        });
    }

});

}); 
```

正如我所说，如果链接与 Flexslider 位于同一页面中，则上述内容可以正常工作。

但我希望链接位于首页，然后该链接必须链接到另一个页面，例如：

```
<a rel="0" class="slide_thumb" href="mySubpage">slide link 1</a> 
```

但上述失败，因为我只进入子页面，没有显示正确的图像（它总是显示第一个）。

如果有人能给我提示如何解决这个问题，我将非常感激:)

谢谢，

五。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:14:03.237

你需要做的是在两个页面之间传递一个参数：

```
<a rel="0" class="slide_thumb" href="yourpage?img=0">slide link 1</a>
<a rel="1" class="slide_thumb" href="yourpage?img=1">slide link 2</a> 
```

此处的参数名称为*img*，其值与 rel 属性相同（您不再需要该属性）。在目标页面上，您将添加一个逻辑来获取 url 参数，例如：

```
function getQueryParams(qs) {
    qs = qs.split("+").join(" ");
    var params = {},
        tokens,
        re = /[?&]?([^=]+)=([^&]*)/g;

    while (tokens = re.exec(qs)) {
        params[decodeURIComponent(tokens[1])]
            = decodeURIComponent(tokens[2]);
    }

    return params;
}

// assoziative object the key is the get parameter name
var $_GET = getQueryParams(document.location.search);

// now you only have to modify the line:
// var slideTo = $(this).attr("rel")//Grab rel value from link;
// like this:
var slideTo = (($_GET['img']) ? $_GET['img'] : 0);
// if img parameter is set, you slide to it, fallback is the first one. 
```

# perl - perl waring：“在字符串 ne 中使用未初始化的值”以检查具有空值的列的条件

> ID：14673213
> 
> 赞同：0
> 
> 时间：2013-02-03T13:55:19.777
> 
> 标签：perl, warnings, dbi, dbix-class

我正在尝试从表中获取某些列，某些列可能具有空值。因此，在填充我的主要数据之前，我正在检查空值的哈希值。由于某些键具有空值并发出警告。

有没有办法检查哈希键是否没有值以防止警告。

```
 my $counter = 1;
    while ( my $hashRef = $queryHandle1->fetchrow_hashref) {

       foreach my $key (keys %{$hashRef} ) {
        if ( $hashRef->{$key} ne "" ) { #some of the coloumn of table has null value
                    #warning is coming for the if check
            $dbData{$counter}{$key} = $hashRef->{$key};
        }
        else {
            $dbData{$counter}{$key} = "";
        }

       }
       $counter++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:00:39.900

当然有：`defined`函数。

```
if (defined $hashRef->{$key}) {...} 
```

或者，由于`undef`计算结果为假，您可以使用短路 OR 运算符在一个步骤中分配其他内容，而无需显式检查。

```
$dbData{$counter}{$key} = $hashRef->{$key} || ''; 
```

**更新：**

正如评论所建议的那样，如果您的`0`值也评估为假，那么单线是危险的。所以你可以这样做：

```
$dbData{$counter}{$key} = defined $hashRef->{$key} ? $hashRef->{$key} : ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:12:29.993

如果对值的测试表现得如您所愿，并且您只想使警告静音，则可以`no warnings 'uninitialized'`在测试周围的小范围内使用。这是 IMO 最不重要的警告类别之一；事实上，我几乎将其称为调试功能而不是适当的警告。

也就是说，如果您要测试的是值是否已定义，则应`defined`按照 stevenl 的建议使用该函数。

**编辑**

我不确定投反对票的目的是什么，但让我附和一些 Perl 世界中常见的观点。`warnings`（`strict`就此而言）很棒并且应该始终使用，除非您知道为什么出于某种原因关闭其中的一小部分。有时未初始化的值应该是虚假和沉默的，这没关系。当你知道那是你想要的时候，把它关掉而不是跳过`|| ''`篮球；它更自我记录。

# c# - DateTime.Parse 解析字符串时抛出异常

> ID：14673214
> 
> 赞同：7
> 
> 时间：2013-02-03T13:55:26.410
> 
> 标签：c#

我有一些客户端代码以下列格式发送日期`"1/31/2013 11:34:28 AM";`

我正在尝试将其转换为 DateTime 对象

```
string dateRequest = "1/31/2013 11:34:28 AM";
DateTime dateTime = DateTime.Parse(dateRequest); 
```

这抛出

> 字符串未被识别为有效的日期时间。

我该如何施放它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:00:17.837

您将不得不使用[`DateTime.Parse(String, IFormatProvider)`](http://msdn.microsoft.com/en-us/library/kc8s65zs.aspx)重载并指定特定于文化的信息（或 InvariantCulture）。

```
DateTime.Parse("1/31/2013 11:34:28 AM", CultureInfo.InvariantCulture); 
```

您还可以通过以下方式创建特定的文化：

```
var cultureInfo = CultureInfo.CreateSpecificCulture("en-US"); 
```

或者使用`DateTime.ParseExact`并指定格式字符串。

# javascript - How to get the values from Dropdown listbox and textfield ,then send it that values to webservices?

> ID：14673220
> 
> 赞同：0
> 
> 时间：2013-02-03T13:56:08.263
> 
> 标签：javascript, xml, jsp, textfield, html-select

In this Code i try to get the value from text-field and dropdown listbox , I get values dynamically from user and send that value to webserices, In Given code get the value pass that values to webservice through javascript, but script didn't reponse to that code.. any one help me to fix this problem.

```
Here Code:
     <body style=" "><script type="text/JavaScript" >
      var xmlhttpuserid;
        functionmyFunction()  {
            var checkid=new Array();
            var userid = document.getElementById("userid").value;
            for(var i=0;i<2;i++)
            {
             if(document.getElementById('domainid'+i).checked==true)
             {
               checkid[i]=document.getElementById('domainid'+i).value;
               alert(checkid); 
             }
            }
         // var domainid = document.getElementById("").value;
        //alert(userid);
        var url= "../webservice/Passwordstation/ws_userauthpwdstation.jsp?  userid="+userid+"&domain="+checkid;

    alert(url);
        xmlhttpduserid=GetXmlHttpObject();
        if (xmlhttpduserid==null)
        {
          alert ("Your browser does not support Ajax HTTP");
          return;
        }

        xmlhttpduserid.onreadystatechange=getuserid;
        xmlhttpduserid.open("GET",url,true);
        xmlhttpduserid.send(null);   
}

        function GetXmlHttpObject()
           {
            //alert("GetXmlHttpObject1");
            if (window.XMLHttpRequest)
             {
               return new XMLHttpRequest();

             }
             if (window.ActiveXObject)
             {
                return new ActiveXObject("Microsoft.XMLHTTP");
             }
             return null;

           }

           function getuserid()
            {
              if (xmlhttpduserid.readyState==4)
              {
                var text=xmlhttpduserid.responseText;
                 //alert(text);
                 text=text.replace(/^\s+|\s+$/g,"");
            // alert("Text 2"+text);
                   if(text.match("SUCCESS"))
                    {
                       alert("Authenticate successfully");
                       window.location="accountmain.jsp";
                    }
                    else
                    {
                      alert("Please check your User id");
                    }
                }
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:08:42.427

我希望这能帮到您 。

您可以在 java 脚本中获取它们并将它们作为查询参数传递到查询中，就像对用户 id 所做的那样。

```
// var domainid = document.getElementById("").value;
        //alert(userid);
var textboxval = document.getElamentById("mytextbox").value;
var dropDown = document.getElementById("ddlViewBy");
var dropDownValue= dropDown.options[dropDown.selectedIndex].value;

        var url= "../webservice/Passwordstation/ws_userauthpwdstation.jsp?  userid="+userid+"&domain="+checkid&textboxvalue="+textboxval&selectedFromDropDown="+dropDownValue; 
```

# sql-server - 使用连接从三个表中区分不同的行

> ID：14673225
> 
> 赞同：0
> 
> 时间：2013-02-03T13:56:30.683
> 
> 标签：sql-server, sql-server-2008

我有三个与我网站的文章部分相关的表格。如果作者文章阅读的次数，我需要根据数量显示顶级作者。我使用基本的三个表来存储此信息。

`Article`具有与文章相关的所有详细信息，作者信息存储在`Authors`，当用户查看特定文章时，我会更新或插入新记录`Popularity`。

以下是样本数据：

`Articles`

```
ArticleID  Title             Desc  AuthorID
---------  ----------------  ----  --------
1          Article One       ....  100
2          Article Two       ....  200
3          Article Three     ....  100
4          Article Four      ....  300
5          Article Five      ....  100
6          Article Six       ....  300
7          Article Seven     ....  500
8          Article Eight     ....  100
9          Article Nine      ....  600 
```

`Authors`

```
AuthorID  AuthorName
--------  ------------
100       Author One
200       Author Two
300       Author Three
400       Author Four
500       Author Five
600       Author Six 
```

`Popularity`

```
ID  ArticleID  Hits
--  ---------  ----
1   1          20
2   2          50
3   5          100
4   3          11
5   4          21 
```

我正在尝试使用以下查询来获取 TOP 10 作者：

```
SELECT TOP 10    AuthorID 
      ,au.AuthorName
      ,ArticleHits
      ,SUM(ArticleHits) 
FROM Authors au 
JOIN Articles ar
  ON au.AuthorID = ar.ArticleAuthorID
JOIN  Popularity ap
  ON ap.ArticleID = ar.ArticleID
GROUP BY AuthorID,1,1,1 
```

但这会产生以下错误：

> 消息 164，级别 15，状态 1，第 12 行
> 每个 GROUP BY 表达式必须包含至少一个不是外部引用的列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:03:39.140

SQL Server 要求列表中的任何列都`SELECT`必须在`GROUP BY`cluase 或聚合函数中。以下查询似乎正在工作，正如您所看到的，我包含了 a ，其中包含列表中不在聚合函数中`GROUP BY au.AuthorID, au.AuthorName`的两列：`SELECT`

```
SELECT top 10 au.AuthorID 
      ,au.AuthorName
      ,SUM(Hits) TotalHits
FROM Authors au 
JOIN Articles ar
  ON au.AuthorID = ar.AuthorID
JOIN  Popularity ap
  ON  ap.ArticleID = ar.ArticleID
GROUP BY au.AuthorID, au.AuthorName
order by TotalHits desc 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/f46eb/10)。

我不确定你是否想要`Hits`在`SELECT`声明中，因为你将不得不这样`GROUP BY`做。这可能会改变`Sum(Hits)`每篇文章的结果，因为如果每个条目中的点击次数不同，您将无法获得准确的总和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T15:48:09.223

我会这样做。首先弄清楚你的前十位作者是谁，然后去获取名字（以及你想要的任何其他列）。对于这个查询，这并不是一个巨大的差异，但是随着您的输出列表要求的增加，所有这些分组都会变得更加复杂和昂贵。

```
;WITH TopAuthors(AuthorID, ArticleHits) AS
(
  SELECT TOP (10) a.AuthorID, SUM(p.Hits)
    FROM dbo.Authors AS a
    INNER JOIN dbo.Articles AS ar
    ON a.AuthorID = ar.AuthorID
    INNER JOIN dbo.Popularity AS p
    ON ar.ArticleID = p.ArticleID
    ORDER BY SUM(p.Hits) DESC
)
SELECT t.AuthorID, a.AuthorName, t.ArticleHits
FROM TopAuthors AS t
INNER JOIN dbo.Authors AS a
ON t.AuthorID = a.AuthorID
ORDER BY t.ArticleHits DESC; 
```

对于这个特定的查询，bluefeet 的版本可能更有效。但是，如果您在输出中添加额外的列（例如，作者表中的更多信息），那么分组可能会超过我提供的额外搜索或扫描。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T14:00:50.433

与聚合函数一样多的列必须存在于 group by 子句中。在您的情况下，AuthorID、au.AuthorName、ArticleHits 也应该存在。因此 group by 语句将变为
GROUP BY AuthorID, au.AuthorName, ARticleHits
这会有所帮助。

# windows-7 - pdftotext 在 Windows 7 PC 和 linux 服务器上输出不同，为什么？

> ID：14673233
> 
> 赞同：0
> 
> 时间：2013-02-03T13:57:29.217
> 
> 标签：windows-7, ubuntu-12.04, pdftotext

我在两台机器上使用相同版本的 xpdf。但是，在 Windows 7 PC 上创建的 .txt 文件与在 Ubuntu 12.04 linux 服务器上创建的文件不同。Windows 7 .txt 文件格式良好，带有许多换行符，使解析变得相当容易。但是，linux 版本根本不包含任何换行符。Windows 7 上的 pdftotext 是否有我需要在 Linux 上运行时显式调用的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:00:49.343

通过阅读以下[http://linux.die.net/man/1/pdftotext](http://linux.die.net/man/1/pdftotext)手册页，我看到以下内容：

```
-eol unix | dos | mac 
```

您可以尝试使用以下标志执行并查看是否可以解决问题：

```
pdftotext -eol dos 
```

# ios - ios - 为什么我运行程序时情节提要上的屏幕看起来不同（插入空格）？

> ID：14673234
> 
> 赞同：0
> 
> 时间：2013-02-03T13:57:34.800
> 
> 标签：ios, ios-simulator

我有我的故事板的截图，看起来不错，然后是模拟器，屏幕上有一些奇怪的空白块。![在此处输入图像描述](../Images/6e2cd29fe2471d9a4a8e912df5ee71ec.png)

模拟器是retina 4寸ios6模拟器。这不是一个正确的模拟器吗？还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:05:02.553

这里可能有两个问题。

1.  您的约束或弹簧和支柱设置错误。

2.  在 Interface Builder 中，您的滚动视图向下滚动。如果滚动视图中的内容多于该滚动视图中可以容纳的内容，那么您可以在该滚动视图中滚动。

    我不止一次感到困惑，因为一个特别大的表格视图没有显示我正在寻找的表格单元原型。我的故事板很大，我最终会四处寻找它，直到我意识到它只是从底部滚动出来的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:04:46.593

Retina 4 英寸对应于 iPhone 5，但故事板的控制器视图设置为 Iphone 3/4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T14:19:26.897

注意故事板中右下角的 7 个按钮。在这 7 个按钮中，最左边的那个可以将您的故事板视图切换为 3.5 英寸到 4 英寸的显示器。由于目前您的情节提要设置为 3.5 英寸显示屏，但您在 4 英寸模拟器上运行，这就是不一致的原因

# nhibernate - 使用 nhibernate 通过条件查询时超时已过期

> ID：14673236
> 
> 赞同：1
> 
> 时间：2013-02-03T13:57:40.500
> 
> 标签：nhibernate

我正在使用条件根据唯一键查询数据库。但我正在经历一个奇怪的场景。经过两三个查询后，它开始给我超时过期错误。

```
using (NHibernate.ISession session = m_SessionFactory.OpenSession())
{
  using (ITransaction transacion = session.BeginTransaction())
  {
    if (cashActivity.ActivityState == ApplicationConstants.TaxLotState.Deleted ||        cashActivity.ActivityState == ApplicationConstants.TaxLotState.Updated)
     {
       IList<CashActivity> lsCActivity = RetrieveEquals<CashActivity>("UniqueKey",cashActivity.UniqueKey);
       if (lsCActivity != null && lsCActivity.Count > 0)
       cashActivity.CashActivityID = lsCActivity[0].CashActivityID;
     }

     if (cashActivity.ActivityState == ApplicationConstants.TaxLotState.Deleted)
     {
       session.Delete(cashActivity);
     }
     else
       session.SaveOrUpdate(cashActivity);
   }
  }
}

  public IList<T> RetrieveEquals<T>(string propertyName, object propertyValue)
  {
     using (Isession session = m_SessionFactory.OpenSession())
     {
         Icriteria criteria = session.CreateCriteria(typeof(T));
         criteria.Add(Restrictions.Eq(propertyName, PropertyValue));

         IList<T> matchingObjects = criteria.List<T>();

         return matchingObjects;
     }
  } 
```

我对代码进行了更改并开始使用 StateLess Session，但该更改只会降低超时错误的频率。

调试后，我发现 IList matchingObjects = criteria.List(); 是异常的原因。但这仅返回一个值，因此它不应该导致超时错误，因为到目前为止表也不包含超过 100 行。有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:35:27.067

除非您将 NHibernate 的 ISessionFactory 包装在其他东西中，否则每次调用 OpenSession() 都会产生一个新会话。所以上面的代码涉及多个会话，不清楚是否需要。

理论上，在 RetrieveEquals() 中的会话查询可能会因为调用方法中使用的连接上的锁而阻塞。但是鉴于所示的代码，我看不到任何证明这一点的东西。

调用方法首先更新 cashActivity 的一个属性，然后在某些情况下继续删除该对象。并且没有 Commit()。这看起来很奇怪 - 这真的是使用过的代码还是可能存在复制/粘贴错误？

您还说“在两个或三个查询之后”...您是否暗示某处有一个未显示的循环？

# iphone - 获取两条坐标路径之间的角度

> ID：14673238
> 
> 赞同：0
> 
> 时间：2013-02-03T13:57:47.117
> 
> 标签：iphone, objective-c, geometry

我已经被这个问题困扰了很长一段时间了。

我正在 iOS 中构建一个自定义导航应用程序，我有一个 CLLocations 数组，所以在数组 0 中我得到最后两个坐标，得到它们的方位，然后在数组 1 中我得到前两个坐标的方位 -纵坐标。

然后，我想计算相对于当前路径（在本例中为路径 0）的转弯角度，这样我就可以确定用户转向的方向。

我已经尝试了很多在这里找到的方法，但都没有成功。有没有人有任何提示或建议

![我正在尝试做的图表。](../Images/ce1db571965eb7a1c0711ad58337155b.png)

任何帮助将不胜感激，谢谢！

**更新：**在阅读了评论后，我再次返回并再次查看，因为我确定我做对了，结果我的积分存储错误并且我使用的方法是正确的！

对我最有效的是获得两条路径的方位，从前一条路径中获取当前路径的方位，并遵循此指南。

```
if(self.turnAngle <= 165){
    self.turnString = LEFT;
}else if( self.turnAngle >= 165 && self.turnAngle <= 205 ){
    self.turnString = STRAIGHT;
}else if( self.turnAngle >= 205 ){
    self.turnString = RIGHT;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:04:39.283

更新：在阅读了评论后，我再次返回并再次查看，因为我确定我做对了，结果我的积分存储错误并且我使用的方法是正确的！

对我最有效的是获得两条路径的方位，从前一条路径中获取当前路径的方位，并遵循此指南。

```
 float previousPathBearing = //get bearing
 float currentPathBearing = //get bearing
 float angle = previousPathBearing - currentPathBearing;
 angle = angle<0?-angle:angle;

if(angle<= 165){
    //LEFT;
}else if( angle>= 165 && angle <= 205 ){
    //STRAIGHT;
}else if( angle >= 205 ){
    //RIGHT;
} 
```

你必须原谅拼写错误/愚蠢的错误，因为我很累，但这对我来说很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:05:01.570

如果我理解正确，您在路径 1 上有 2 个点（称为 p1_x1、p1_y1 和 p1_x2、p1_y2），在路径 2 上有 2 个点（称为 p2_x1、p2_y1 和 p2_x2、p2_y2），并且您想找到路径之间的角度？

这并不难做到。使用该`atan2`函数求路径 1 和路径 2 的绝对角度，然后从另一个角度减去一个角度。

换句话说，您的代码将执行如下操作：

```
float anglePath1Radians = atan2(p1_y2 - p1_y1 / p1_x2 - p1_x1);
float anglePath2Radians = atan2(p2_y2 - p2_y1 / p2_x2 - p2_x1);

float angleDifferenceRadians = anglePath1Radians - anglePath2Radians; 
```

请记住，此结果可能以弧度为单位，因此您需要转换为度数。

**替代方法**

您可以使用**点积（AKA 标量）**通过取反余弦来找到角度：

```
float path1Dx = p1_x2 - p1_x1;
float path1Dy = p1_y2 - p1_y1;

float path2Dx = p2_x2 - p2_x1;
float path2Dy = p2_y2 - p2_y1;

float path1Magnitude = sqrt(path1Dx * path1Dx + path1Dy * path1Dy);
float path2Magnitude = sqrt(path2Dx * path2Dx + path2Dy * path2Dy);

float dotProduct = path1Dx * path2Dx + path1Dy * path2Dy;

float angleDifferenceRadians = acos(dotProduct / (path1Magnitude * path2Magnitude)); 
```

# c++ - 绘制图元文件时如何覆盖它的钢笔和画笔？

> ID：14673246
> 
> 赞同：0
> 
> 时间：2013-02-03T13:58:49.493
> 
> 标签：c++, gdi+, metafile

在带有 GDI+ 的 C++ 中，我想绘制一个元文件，但要对其进行修改，使画笔和钢笔替换为我在程序中创建的。我希望使用这个画笔和这支笔来代替图元文件本身中指定的任何其他东西。

我怎么能做到这一点？

我尝试使用 EnumerateMetafile 和 PlayRecord，但我不知道如何控制正在使用的笔和画笔。我尝试了下面的代码来选择底层 HDC 的当前 Pen 和 Brush，但正如我所期望的那样它不起作用......

请问有什么建议吗？（我想避免重写对所有 EMF 记录类型的完整处理）

提前致谢。

暂定代码（按预期不做任何事情）：

```
// callback function called by EnumerateMetafile:
BOOL CALLBACK metaCallback(
   EmfPlusRecordType recordType, 
   unsigned int flags, unsigned int dataSize, const unsigned char* pStr, void* metafile)
{ 
   HDC hdc = myGraphics->GetHDC ();
   SelectObject(hdc, GetStockObject(WHITE_PEN));
   myGraphics->ReleaseHDC(hdc);

   static_cast <Metafile*>(metafile)->PlayRecord(recordType, flags, dataSize, pStr);
   return TRUE; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:53:09.297

这是 EMF 还是 EMF+？如果它是常规的 EMF（或 WMF），我建议使用 Enum[Enh]MetaFile 而不是 GDI+，因为它对这类事情有更好的界面。您只需要实现自己对 SelectObject 的处理。如果选择的手柄是画笔或钢笔（由 GetObjectType 确定），则跳过该记录。然后，如果您在枚举元文件之前选择所需的笔/画笔，它应该一直保留在那里。

对于 EMF+，我建议查找 EmfPlusRecordTypeObject 类型的记录，如果它们用于画笔或钢笔对象，则播放一个加载您想要的画笔或钢笔的记录。这不是一个完整的解决方案，因为某些记录类型嵌入了纯色画笔而不是使用单独的对象记录，但这是一个开始。

要处理 EMF+，您需要了解格式 ( [http://msdn.microsoft.com/en-us/library/cc230724.aspx](http://msdn.microsoft.com/en-us/library/cc230724.aspx) )。不幸的是，微软没有为记录提供结构，也没有从 GDI+ 或它用来播放非 EMF+ 记录的 HDC 提供对句柄/对象表的访问，从而使这变得困难。

# hadoop - 多列的百分位数

> ID：14673249
> 
> 赞同：1
> 
> 时间：2013-02-03T13:59:07.987
> 
> 标签：hadoop, hive

我有一个包含大约 200-250 列的表，我想计算每列的百分位数。

Hive 给出了函数 Percentile(int_exp,p)，它返回 int_exp 列的第 p 个百分位值。但对其余 250 列运行相同的查询似乎是多余的。有没有办法一次找到所有列的百分位数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T21:35:55.980

不幸的是，您必须为每列调用百分位数函数。一个建议是您可以使用其他语言（例如 Java、Ruby、Python 等）动态生成此查询。

# javascript - 在 javascript 执行期间强制 Chrome 刷新显示

> ID：14673252
> 
> 赞同：0
> 
> 时间：2013-02-03T13:59:14.147
> 
> 标签：javascript, google-chrome, jquery-dynatree

我必须创建一个 jQuery Dynatree。使用我的 JavaScript，我构建了这个 Dynatree 的不同节点。JavaScript 执行需要一定的时间。

在 Firefox 中，我得到了我想要的结果，即我看到我的 Dynatree 在增长，但在 Chrome 中，我必须等到 JavaScript 执行结束才能看到最终结果。在此之前，我只有一个空白页。

那么你知道在 JavaScript 执行期间强制 Chrome 刷新显示的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:51:29.197

我假设您正在使用循环来生成树，因此创建一个函数，该函数根据传递的变量运行树生长的单个步骤，该变量将是您在循环中的计数器。艾：

```
<script>

//  what you probably have now
//  for(var i=0;i<100;i++){
//      dosomething
//  };

function step(i){
    dosomething
    if(i<100){
        window.requestAnimationFrame(function(){step(i+1)});
    };
};
step(0);

</script> 
```

您将不得不`requestAnimationFrame`像这样制作跨浏览器。

```
window.requestAnimationFrame=(function(){
    return window.requestAnimationFrame     ||
        window.webkitRequestAnimationFrame  ||
        window.mozRequestAnimationFrame     ||
        window.oRequestAnimationFrame       ||
        window.msRequestAnimationFrame      ||
    function(callback){
        window.setTimeout(callback,1000/45);
    };
})(); 
```

但这应该可以在每次程序运行后重新渲染 DOM。

# facebook - R中的facebook api：OAuthException错误，代码803

> ID：14673256
> 
> 赞同：2
> 
> 时间：2013-02-03T13:59:32.673
> 
> 标签：facebook, r, api

我尝试使用 R 连接到 Facebook。我尝试使用来自

[https://github.com/datamgmt/facebook-data-mining](https://github.com/datamgmt/facebook-data-mining)

使用以下代码获取用户信息：

```
access.token<- "AAACE________n6bcITRIMCZCKhMySOV" #my access token
FacebookFetch <- function(access.path = "me", access.token, access.options) {
      if (missing(access.options)) {
        access.options <- ""
      }
      else {
        access.options <- sprintf("?%s", paste(names(access.options), "=", 
                                               unlist(access.options), collapse = "&", sep = ""))
      }
      data <- getURL(sprintf("https://graph.facebook.com/%s%s&access_token=%s", 
                             access.path, access.options, access.token),cainfo="cacert.pem")
      fromJSON(data)
    }

individual.id <- "100__72"  # my ID

individual <- FacebookFetch(access.path=paste(individual.id),access.token=access.token )
if (length(individual$id)) {
  cat ("Working with individual: ",individual$name," (",individual$id,")\n", sep="")
} else{
  cat("Message: ", unlist(individual)[1], "\n")
  cat("Type:    ", unlist(individual)[2], "\n")
  cat("Code:    ", unlist(individual)[3], "\n")
  stop("   Cannot continue")
}

where cainfo="cacert.pem" is added to work around the SSL certificate verification error. 
```

虽然现在我收到以下错误，但我不知道如何解决这个问题。

```
Message:  (#803) Some of the aliases you requested do not exist: 100__72&access_token=AAACE________n6bcITRIMCZCKhMySOV 
Type:     OAuthException 
Code:     803 
```

我发现一些帖子中人们遇到了同样的问题，只是不使用 R，而是使用其他程序，通过使令牌和 id 成为字符来解决问题。但是，在 R 中，这些已经具有类特性。

当我在浏览器中重新创建 url 时，它返回相同的错误，而图形浏览器返回所有正确的信息。我曾多次尝试刷新令牌，但没有奏效。API 参考书没有说明错误代码 803 的含义。

有人知道如何解决这个问题吗？我在 Windows 7 pro 上的 Rstudio 中使用 r 2.15.2（也在 windows vista 上尝试过）

# git - 安装 git 后 git gui 和 gitk 不存在

> ID：14673257
> 
> 赞同：42
> 
> 时间：2013-02-03T13:59:39.967
> 
> 标签：git, ubuntu-11.10

我正在使用 Ubuntu 11.10 并且刚刚安装了 git

```
sudo apt-get install 
```

基本的 git 命令似乎可以工作。（我创建了一个存储库并向其中添加了一个目录结构。）但不是 git gui 或 gitk。这就是我得到的

```
peter@peter-Inspiron-620:/var/www$ sudo git gui

git: 'gui' is not a git command. See 'git --help'.

Did you mean one of these?
grep
init
pull
push

peter@peter-Inspiron-620:/var/www$ 
```

对于 gitk

```
peter@peter-Inspiron-620:/var/www$ sudo gitk
sudo: gitk: command not found
peter@peter-Inspiron-620:/var/www$ 
```

这些命令是否在 Ubuntu 上运行，我需要单独安装它们吗？

谢谢，彼得。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-03T14:03:50.987

```
sudo apt-get install git-gui gitk 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-05T15:37:22.063

```
sudo apt-get install git-gui gitk 
```

安装后，很可能没有菜单项出现在您的桌​​面或菜单中。要打开它们，请打开终端（通常是 Ctrl+T）并输入

```
git gui 
```

或者

```
gitk 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-22T06:42:03.713

当你在安装 git gui 时遇到如下错误： sudo apt-get install git-gui Reading package lists... Done Building dependency tree
Reading state information... Done Package git-gui 不可用，但被另一个引用包裹。这可能意味着该软件包丢失、已过时或只能从其他来源获得

E: 包 'git-gui' 没有安装候选

**试试这个命令 1\. sudo apt-get install update 2\. sudo apt-get install git-gui 然后它工作了。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-04T15:14:26.590

对于 centos 系统，您可以使用以下命令：

`sudo yum install git-gui gitk`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T00:39:44.733

您可以使用以下命令安装所有 git 功能：

```
sudo apt-get install git-core git-gui git-doc 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-24T07:48:56.150

要安装 git-gui，请输入以下命令：

**sudo apt-get install git-gui**

然后打开 git-gui 类型：

**git citool**

# iphone - viewForZoomingInScrollView

> ID：14673259
> 
> 赞同：0
> 
> 时间：2013-02-03T13:59:43.620
> 
> 标签：iphone, xcode

我有几个按钮，每个按钮加载一个不同的图像 UIScrollView，你可以放大这些图像。发生的情况是，在选择新图像后，前一个图像仍然存在于滚动视图中。在其中打开新图像之前如何清理滚动视图？

这是到目前为止的代码：

```
- (UIView *) viewForZoomingInScrollView: (UIScrollView *)scrollView{
    return imgView;
}
-(IBAction)buttonClicked: (UIButton *)sender{
    switch (sender.tag) {
        case 1:{
            UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Gath.jpg"]];
            self.imgView = myImageView;
            [myImageView release];

            scrollView.contentSize = CGSizeMake(imgView.frame.size.width, imgView.frame.size.height);
            scrollView.maximumZoomScale = 4.0;
            scrollView.minimumZoomScale = 1.0;
            scrollView.clipsToBounds = YES;
            scrollView.delegate = self;
            [scrollView addSubview:imgView];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:49:08.217

你可以试试这个

[myImageView removeFromSuperView];

我的图像视图=无；

myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Gath.jpg"]];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:15:20.290

您继续添加新的子视图而不删除以前的子视图。您可以只替换现有 imageView 中的图像内容，而不是制作新的。

替换这个：

```
 UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Gath.jpg"]];
    self.imgView = myImageView;
    [myImageView release]; 
```

和

```
 self.imageView.image = [UIImage imageNamed:@"Gath.jpg"]; 
```

并删除这个

```
 [scrollView addSubview:imgView]; 
```

我假设您已将 imageView 链接到 self.imageView 其他地方，例如在故事板中，或者在您创建滚动视图时。

# ruby - Centos6 上的 Ruby 安装问题

> ID：14673263
> 
> 赞同：-1
> 
> 时间：2013-02-03T14:00:24.903
> 
> 标签：ruby, linux, rubygems, centos

```
# yum install libreadline5-dev libncurses5-dev

Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: sg2plmirror01.shr.prod.sin2.secureserver.net
 * extras: sg2plmirror01.shr.prod.sin2.secureserver.net
 * updates: sg2plmirror01.shr.prod.sin2.secureserver.net
base                                                     | 3.7 kB     00:00
extras                                                   | 3.0 kB     00:00
updates                                                  | 3.5 kB     00:00
Setting up Install Process
No package libreadline5-dev available.
No package libncurses5-dev available.
Error: Nothing to do 
```

我得到了上面提到的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:16:45.550

你的解决方案是：

```
$ sudo yum install ruby
$ sudo yum install rubygems 
```

# vb.net - 处理后台工作人员不起作用

> ID：14673270
> 
> 赞同：0
> 
> 时间：2013-02-03T14:01:12.920
> 
> 标签：vb.net, backgroundworker

我有一个调用表单的后台工作人员，拿着一个 gif 动画。目的是在进程进行时显示动画，但在进程完成时应该关闭。但即使在该过程完成后它也不会关闭。请帮忙。
谢谢

```
Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    frmAnimation.ShowDialog()
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    BackgroundWorker1.RunWorkerAsync()
    Dim sqldatasourceenumerator1 As SqlDataSourceEnumerator = SqlDataSourceEnumerator.Instance
    datatable1 = sqldatasourceenumerator1.GetDataSources()
    DataGridView1.DataSource = datatable1

    'I have tried CancelAsync, but did not work

    BackgroundWorker1.CancelAsync()
    frmAnimation.Dispose()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:26:20.717

BackgroundWorkers 旨在实际执行后台操作的“工作”，因此主 UI 线程可以继续将内容渲染到屏幕上。我怀疑您希望`GetDataSources()`在 BackgroundWorker 线程中完成函数调用。

尝试切换按钮单击功能中的内容和 BackgroundWorker 的 DoWork 功能中的内容。具体来说，我的意思是这样的：

```
 Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
            Dim sqldatasourceenumerator1 As SqlDataSourceEnumerator = SqlDataSourceEnumerator.Instance
            datatable1 = sqldatasourceenumerator1.GetDataSources()
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
            BackgroundWorker1.RunWorkerAsync()
            frmAnimation.ShowDialog()
    End Sub 
```

此外，在 RunWorkerCompleted 事件中添加一些代码来处理完成后台操作后应该执行的操作。

```
 Private Sub BackgroundWorker1_RunWorkerCompleted(ByVal sender As Object, ByVal e As RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
            DataGridView1.DataSource = datatable1
            frmAnimation.Close()
    End Sub 
```

您可能还需要考虑使用`frmAnimation.Show()`而不是`frmAnimation.ShowDialog()`取决于您希望过程是模态的还是非模态的。您可以[在此处](http://msdn.microsoft.com/en-US/library/39wcs2dh%28VS.80%29.aspx)阅读更多相关信息。

# jquery - 加载日期选择器时突出显示当前周

> ID：14673277
> 
> 赞同：1
> 
> 时间：2013-02-03T14:02:26.873
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在关注[这个 jsFiddle](http://jsfiddle.net/manishma/AVZJh/)，以便能够突出显示并从 datepicker 中选择整周。

通过更改[`.live()`](http://api.jquery.com/live/)为[`.on()`](http://api.jquery.com/on). 这是编辑后的[​​jsFiddle](http://jsfiddle.net/ZedBee/2zGXv/)。它工作正常，但在当前状态下，只有在用户单击日期时才会突出显示该周。

我想要实现的是在启动时自动突出显示（并在 startDate 和 endDate 变量中填充日期）当前日期所属的星期，而无需单击当前日期。我尝试了以下方法，但似乎不起作用

```
var currentDate = $(".week-picker").datepicker("getDate");
var onSelectFunction = $(".week-picker").datepicker("option","onSelect");

var format  = $(".week-picker").datepicker( "option", "dateFormat" );

var currDate = $.datepicker.formatDate(format,currentDate)
onSelectFunction( currDate ); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:58:41.737

试试这个

```
$(function () {
    var startDate;
    var endDate;

    var selectCurrentWeek = function () {
        window.setTimeout(function () {
            $('.week-picker').find('.ui-datepicker-current-day a').addClass('ui-state-active')
        }, 1);
    }
    var $weekPicker = $('.week-picker');

    function updateWeekStartEnd() {
        var date = $weekPicker.datepicker('getDate') || new Date();
        startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay());
        endDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 6);
    }

    updateWeekStartEnd();

    function updateDateText(inst) {
        var dateFormat = inst != 'start' &&  inst.settings.dateFormat ? inst.settings.dateFormat : $.datepicker._defaults.dateFormat;

        console.log( dateFormat)
        $('#startDate').text($.datepicker.formatDate(dateFormat, startDate, inst.settings));
        $('#endDate').text($.datepicker.formatDate(dateFormat, endDate, inst.settings));
    }

    updateDateText('start');

    $weekPicker.datepicker({
        showOtherMonths: true,
        selectOtherMonths: true,
        onSelect: function (dateText, inst) {
            updateWeekStartEnd();
            updateDateText(inst);
            selectCurrentWeek();
        },
        beforeShowDay: function (date) {
            var cssClass = '';
            if (date >= startDate && date <= endDate) cssClass = 'ui-datepicker-current-day';
            return [true, cssClass];
        },
        onChangeMonthYear: function (year, month, inst) {
            selectCurrentWeek();
        }
    });

    selectCurrentWeek();

    $('.week-picker .ui-datepicker-calendar tr').on('mousemove', function () {
        $(this).find('td a').addClass('ui-state-hover');
    });
    $('.week-picker .ui-datepicker-calendar tr').on('mouseleave', function () {
        $(this).find('td a').removeClass('ui-state-hover');
    });

}); 
```

演示：http: [//jsfiddle.net/eFzG4/](http://jsfiddle.net/eFzG4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T14:52:20.027

您也可以在当天触发点击

```
$(".ui-datepicker-current-day").click(); 
```

# c#-4.0 - 该事件只能出现在 = 或 -= 的左侧

> ID：14673286
> 
> 赞同：1
> 
> 时间：2013-02-03T14:03:42.793
> 
> 标签：c#-4.0

我在这段代码中有一些问题..任何人都可以帮助我

```
public event EventHandler CollectionChanged
        {
            [MethodImpl(MethodImplOptions.Synchronized)]
            add
            {
                this.CollectionChanged = (EventHandler)Delegate.Combine(this.CollectionChanged, value);
            }
            [MethodImpl(MethodImplOptions.Synchronized)]
            remove
            {
                this.CollectionChanged = (EventHandler)Delegate.Remove(this.CollectionChanged, value);
            }
        } 
```

问候萨瓦

# jquery - jquery datepicker 链接到自己的脚本 url，而不是选择日期谷歌应用程序脚本

> ID：14673288
> 
> 赞同：0
> 
> 时间：2013-02-03T14:03:48.160
> 
> 标签：jquery, datepicker, google-apps-script

我在使用 jQuery datepicker 时遇到的一个问题：

在 Google Apps 脚本 HTML 模板中，会发生以下情况：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.23/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
<link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
<script>
$(function() {
$( "#datepicker" ).datepicker();
});
</script>

<input type="text" id="datepicker"> 
```

日期选择器如下所示：http: [//i.imm.io/V2EH.png](http://i.imm.io/V2EH.png)

悬停日期时，您会在底部看到生成的链接。选择日期将导致脚本重新加载，而不是在字段中输入日期值...

我很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:16:07.200

这不是强制脚本重新加载，它只是附加了“#”的当前页面 url。由于 datepicker 对话框中的每个锚标记都没有 href="#" 。 ![在此处输入图像描述](../Images/a07e9b0f6f12fc6ccdfca510aeb531d5.png)

# c# - 使用随机密钥反序列化 JSON

> ID：14673292
> 
> 赞同：0
> 
> 时间：2013-02-03T14:04:02.873
> 
> 标签：c#, json

我正在访问一个返回 JSON 格式的 API：

```
{"status":1,"complete":1,"list":{"293352541":{"item_id":"293352541","fave":"0"},"247320106":{"item_id":"247320106","fave":"0"},"291842735":{"item_id":"291842735","fave":"0"} ..... 
```

我遇到的问题是**item_id tag 之前的数字**。它打破了我在反序列化方面所做的任何尝试，因为我无法在我反序列化的对象中表示这个随机整数。

例如，我希望这个数字是单词“Item”，因此它是代表封闭对象的键，但是拥有这个数字意味着我无法制作 JSon 的对象表示。

所以

```
public class MyClass
{
    public string status { get; set; }
    public string complete { get; set; }
    public List<MyObject> list { get; set; }
}

public class MyObject
{
    public string item_id { get; set; }
    public string fave { get; set; }
} 
```

然后

```
 var items = new JavaScriptSerializer().Deserialize<MyClass>(jsontext); 
```

derialises，但 items.list 是空的。

还，

```
dynamic result = JSon.Parse(jsontext); 
```

有效，但我无法以一种很好的方式反序列化或访问项目列表。

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:31:33.717

因为它不需要预定义的类型来反序列化，所以您可以使用[json.net](http://json.codeplex.com/)（也可用于 nuget）来执行此操作。例如：

```
var jObj = JObject.Parse(data);
var sense = jObj["list"]
    .Select(x => (JProperty)x)
    .Select(p => new { 
                   propName = p.Name,
                   itemId = p.Value["item_id"],
                   fave = p.Value["fave"]}); 
```

# ruby-on-rails-3 - 如何将表中的值相加？

> ID：14673295
> 
> 赞同：0
> 
> 时间：2013-02-03T14:04:28.223
> 
> 标签：ruby-on-rails-3

我正在使用 Rails 3.2.8 构建一个 webapp。在这个应用程序中，我得到了三个表。项目、任务和子任务。

**项目**

```
id, name 
```

**任务**

```
id, name, project_id 
```

**子任务**

```
id, name, desc, task_id, value 
```

我想获取属于一个项目的所有子任务并总结这些值并按 created_at 对它们进行分组。

这就是我尝试的方法，但它不起作用（只能恢复 AR 关系）。

```
@tasks = @project.tasks.joins(:subtasks).select('sum(subtasks.value)').group('subtasks.created_at') 
```

我究竟做错了什么？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:10:25.243

我认为你比你意识到的更接近。

您提供的链中的每个方法都会导致`ActiveRecord::Relation`. 您需要做的就是调用`all`或`each`或其他一些方法来强制它执行查询。

我想你也想分组`tasks.created_at`？

最后，我建议您在`Task`模型中创建一个类方法来简化这一点。

我希望这会有所帮助。

# c# - 将 ImageSource 转换为 IRandomAccessStream

> ID：14673296
> 
> 赞同：1
> 
> 时间：2013-02-03T14:04:32.740
> 
> 标签：c#, windows-8, microsoft-contracts

我已经在我的应用程序中加载了类型为 的图像`ImageSource`，我想分享它，但我需要将图像转换为`IRandomAccessStream`.

**例如：**

```
 ImageSource _myLoadedImage; 
  IRandomAccessStream ras; 
  //Some code when _myLoadedImage convert to IRandomAccessStream 
  RandomAccessStreamReference.CreateFromStream(ras); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:02:20.293

除非它是 WriteableBitmap，否则实际上没有办法获取像素缓冲区。如果您有原始图像数据流/文件（即 png 或 jpeg），您可以使用解码器获取它，然后将其转换为图像源。我在这里的博文中做了这样的事情：[http ://www.iter.dk/post/2012/10/08/Using-User-Provided-Images-for-Secondary-Tiles.aspx](http://www.iter.dk/post/2012/10/08/Using-User-Provided-Images-for-Secondary-Tiles.aspx)

# sql - 在不同的 LPAR 上删除和更新

> ID：14673304
> 
> 赞同：0
> 
> 时间：2013-02-03T14:05:35.267
> 
> 标签：sql, db2, ibm-midrange, rpgle, control-language

是否可以从开发 lpar 计算 rpgle 程序中的文件成员删除。

```
 eg: RMVM FILE(LIB/FILE1) MBR(PAR1981181) 
```

并完全在不同的 lpar 中对不同的文件执行更新？

```
 UPDATE "SCDTA.CORP"/AR#RMTPRL9 
SET SENTFLAG = ' ', DATESENT = '0001-01-01', TIMESENT = '00:00:00', XMITT# = 0, LOCATION =   'PACI175A', ARBATCH# = ' ' 
 WHERE LOCATION = 'PACI173A' AND ARBATCH# = 'PAR1981181' 
```

如何在一个程序中执行 lpars 的设置？这可能吗？请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:16:47.520

这些操作可以通过使用[DDM](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/ddp/rbae5intrdf.htm)和[RUNRMTCMD](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/cl/runrmtcmd.htm)将 LPAR 链接为远程系统来完成。

有关更多信息，请参阅：

*   [分布式数据库编程](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/ddp/rbal1kickoff.htm)
*   [操作远程系统](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/ddp/rbal1opremote.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T20:14:15.023

如果您使用的是 7.1 版并加载了适当的 PTF 组，则可以在 SQL 中使用 3 部分命名。这让您可以使用数据库（即 RDB 目录条目）和模式（即库）来限定表引用。

例如：

```
UPDATE OTHERSYS.SCDTA_CORP.AR#RMTPRL9 
  SET SENTFLAG = ' ' 
    , DATESENT = '0001-01-01'
    , TIMESENT = '00:00:00'
    , XMITT#   = 0
    , LOCATION = 'PACI175A'
    , ARBATCH# = ' ' 
  WHERE LOCATION = 'PACI173A'
    AND ARBATCH# = 'PAR1981181' 
```

# assembly - 浮点结果除法（作业）

> ID：14673305
> 
> 赞同：0
> 
> 时间：2013-02-03T14:05:42.317
> 
> 标签：assembly, arm, inline-assembly

我目前有点卡在我的家庭作业中，并请求一些帮助。我们的任务是实现 x^4 / 4！在手臂组装中。我已经成功计算出 x^4 和 4! 的正确值，但我被困在如何计算除法上，结果显然是一个浮点数。我已经在一些帮助下实现了一个简单的除法算法，但据我所知，这仅适用于整数除法，不是吗？

```
 CMP             R2, #0
 BEQ divide_end

 MOV      R0,#0     ;clear R0 to accumulate result
 MOV      R3,#1     ;set bit 0 in R3, which will be
                    ;shifted left then right
.start
 CMP      R2,R1
 MOVLS    R2,R2,LSL#1
 MOVLS    R3,R3,LSL#1
 BLS      start
 ;shift R2 left until it is about to
 ;be bigger than R1
 ;shift R3 left in parallel in order
 ;to flag how far we have to go

.next
 CMP       R1,R2      ;carry set if R1>R2
 SUBCS     R1,R1,R2   ;subtract R2 from R1 if this would
                      ;give a positive answer
 ADDCS     R0,R0,R3   ;and add the current bit in R3 to
                      ;the accumulating answer in R0

 MOVS      R3,R3,LSR#1     ;Shift R3 right into carry flag
 MOVCC     R2,R2,LSR#1     ;and if bit 0 of R3 was zero, also
                           ;shift R2 right
 BCC       next            ;If carry not clear, R3 has shifted
                           ;back to where it started, and we
                           ;can end

.divide_end 
```

也许我在这里真的很愚蠢，但任何帮助将不胜感激非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:12:02.790

我只是傻了。我们被允许使用 FPU 指令。所以我可以使用 VDIV！

# php - SQL/PHP - 语法错误或访问冲突：1064 您的 SQL 语法有错误；

> ID：14673307
> 
> 赞同：0
> 
> 时间：2013-02-03T14:05:58.790
> 
> 标签：php, sql, sql-update, syntax-error

我有一个数据库，我正在尝试更新其中的一行，但我不断收到此错误。在以前的程序中，我使用了相同的功能，所以我看不出出了什么问题，这让我发疯了！如果有人能看到任何东西或帮助我，将不胜感激！

这是更新功能：

```
public function update($member){
   if ($member == null){
      throw new Exception("Member ID Required");   }  

    $id = $member->getId();
    if ($id == null){
        throw new Exception("Member ID Required");
    }
    $sql = "UPDATE member SET
        firstName = :firstName,
        lastName = :lastName,
        dob = :dob,
        email = :email,
        gender = :gender,
        skillLevel = :skillLevel,
        Where id = :id";

    $params = array(
        'id' => $member->getId(),
        'firstName' => $member->getFirstName(),
        'lastName' => $member->getLastName(),
        'dob' => $member->getDOB(),
        'email' => $member->getEmail(),
        'gender' => $member->getGender(),
        'skillLevel' => $member->getSkillLevel(),
    );
      $stmt = $this->link->prepare($sql);
    $status = $stmt->execute($params);
    if ($status != true){
        $errorInfo = $stmt->errorInfo();
        throw new Exception("Could Not Add Member: " . $errorInfo[2]);
    }
    return $stmt->rowCount();
    } 
```

这是从中获取数据的编辑页面

```
<?php

require_once('member.php');
require_once('MemberDAO.php');
require_once('editFormValidator.php');

$validator = new editFormValidator();

if ($validator->validate($_POST)){
$i = $_POST['memberID'];
$firstName = $_POST['firstName'];
$lastName = $_POST['lastName'];
$dob = $_POST['dob'];
$email = $_POST['email'];
$gender = $_POST['gender'];
$skillLevel = $_POST['skillLevel'];
$skillLevelString = implode(", ", $skillLevel);
$member = new Member ($i,$firstName, $lastName, $dob, $email, $gender,     $skillLevelString);
$dao = new MemberDAO();
$dao->update($member);
header ('Location: viewMember.php');
}
else{
require_once 'editMember.php';
}
?> 
```

这是完整的错误：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Where id = '4'' at line 8' in /Applications/XAMPP/xamppfiles/htdocs/ChessClub/MemberDAO.php:115 Stack trace: #0 /Applications/XAMPP/xamppfiles/htdocs/ChessClub/MemberDAO.php(115): PDOStatement->execute(Array) #1 /Applications/XAMPP/xamppfiles/htdocs/ChessClub/edit.php(20): MemberDAO->update(Object(Member)) #2 {main} thrown in /Applications/XAMPP/xamppfiles/htdocs/ChessClub/MemberDAO.php on line 115 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:07:27.337

你这里有一个多余的逗号：

```
skillLevel = :skillLevel, 
```

# php - 使用 mysqli 在同一查询中选择和插入/更新

> ID：14673309
> 
> 赞同：0
> 
> 时间：2013-02-03T14:06:27.637
> 
> 标签：php, mysqli, query-optimization

我是否可以在使用 mysqli 的同一查询中首先 SELECT 并且如果不是真的 INSERT 到 db 中徘徊？

这是我现在的做法：

```
$sel_timestamp = mktime(0, 0, 0, date("n"), date("j")-$day, date("Y"));
$sel_tag = date("Y-m-d",$sel_timestamp);
$user = 1;

if ($result = $mysqli->query("SELECT * FROM ".$prefix."_active_users WHERE userid = $user AND DATE(timestamp) = '$sel_tag'")){

    if($result->num_rows < 1){

        $insert = "INSERT INTO ".$prefix."_active_users (userid,timestamp) VALUES (?,?)";
        $stmt = $mysqli->stmt_init();

        if($stmt->prepare($insert)){
            $stmt->bind_param('is', $user,$sel_tag);
            $stmt->execute();

            $stmt->close(); 
        }
    }
    $result->close();
} 
```

在我的情况下，我使用 2 个查询，但是否可以将其合并为一个？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:12:47.933

如果您在（用户标识，时间戳）上有一个唯一键，那么您可以使用

```
INSERT IGNORE INTO ".$prefix."_active_users (userid,timestamp) VALUES (?,?) 
```

IGNORE 是一个关键词

但是，您可以保持当前代码不变。有 2 个查询也没有错。

# mysql - 对也具有父子关系的多种数据类型的存储进行建模

> ID：14673310
> 
> 赞同：0
> 
> 时间：2013-02-03T14:06:33.773
> 
> 标签：mysql, database-design, data-structures, relational-database, entity-attribute-value

我正在尝试为我已经开始的项目设计一个 MySQL 数据库，但我无法找到最好的方法。

它是一个 OOP 系统，包含不同类型的对象，所有这些对象都需要存储在数据库中。但是这些对象也需要彼此保持父子关系。我还希望在系统投入生产后能够灵活地轻松添加新数据类型。

据我所见，我有三个选项，一个是纯关系，一个我认为是实体属性值（我不太理解 EAV），最后一个是我自己想到的混合设计，但是我认为之前已经考虑过并且有一个正确的名称。

关系设计将由两个表组成，一个带有列的大表允许它存储任何类型的对象，另一个表用于维护第一个表中行的父子关系。

EAV 设计将有两个表，一个是具有三列（实体 id、属性和值）的 EAV 表，然后第二个表将关联这些实体的父子关系。

混合设计对于每种类型的对象都有一个表，然后是一个父子关系表，该表必须存储父子关系的 id 以及这些 id 来自的表的某种标识符。

我确信这个问题之前已经解决和解决了数百次，我将不胜感激任何参考，以便我可以阅读有关解决方案的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T16:40:00.503

这是唯一真正的关系设计：

```
CREATE TABLE Objects (
  object_id INT AUTO_INCREMENT PRIMARY KEY,
  parent_object_id INT,
  -- also attribute columns common to all object types
  FOREIGN KEY (parent_object_id) REFRENCES Objects (object_id)
);

CREATE TABLE RedObjects (
  object_id INT PRIMARY KEY,
  -- attribute columns for red objects
  FOREIGN KEY (object_id) REFRENCES Objects (object_id)
);

CREATE TABLE BlueObjects (
  object_id INT PRIMARY KEY,
  -- attribute columns for blue objects
  FOREIGN KEY (object_id) REFRENCES Objects (object_id)
);

CREATE TABLE YellowObjects (
  object_id INT PRIMARY KEY,
  -- attribute columns for yellow objects
  FOREIGN KEY (object_id) REFRENCES Objects (object_id)
); 
```

但是 MySQL 不支持递归查询，因此如果您需要执行复杂的查询以获取整个树，例如，您将需要使用另一种方法来存储关系。我建议封闭表设计：

```
CREATE TABLE Paths (
  ancestor_id INT,
  descendant_id INT,
  length INT DEFAULT 0,
  PRIMARY KEY (ancestor_id, descendant_id),
  FOREIGN KEY (ancestor_id) REFRENCES Objects (object_id),
  FOREIGN KEY (descendant_id) REFRENCES Objects (object_id)
  -- this may need additional indexes to support different queries
); 
```

我在这里描述了更多关于闭包表的信息：

*   [我对将平面表解析为树的最有效/优雅的方法是什么的](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)回答？
*   [我使用 SQL 和 PHP 的分层数据](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)演示模型
*   我的书[SQL 反模式：避免数据库编程的陷阱](http://pragprog.com/book/bksqla/sql-antipatterns)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T16:24:54.310

是的，您可以很好地使用 EAV 设计。它适用于我们创建的应用程序，尽管经过了大约 3 年的改进。您还可以使用通用表结构并将任何特定表用于一组对象。或者只为每个对象创建一个通用表。哪个对象的哪个表是元数据存储库的一部分。如果您使用 val_int、val_string 类型的结构，您将拥有 Null 列，但存储值的位置除外。您可以考虑使用 MS SQL 的稀疏矩阵特性。这些天磁盘大小有点便宜。因此，与传统结构相比，您唯一的缺点是 NxR 行（例如对象的 R 属性）而不是 N 行。

除此之外，需要注意的几件事是对象实例 GUID、动态 sql 生成......

# android - 谷歌在 Asp.Net 中是否有 gcm 服务器的示例？

> ID：14673311
> 
> 赞同：1
> 
> 时间：2013-02-03T14:06:38.370
> 
> 标签：android, google-cloud-messaging

我想在 Asp.Net中实现一个[GCM服务器。](http://developer.android.com/google/gcm/index.html)有没有关于它的样本？我在 Android SDK 文件夹中寻找它，但没有 .Net 的示例？

有男孩知道.Net 样本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T16:16:53.323

这一行有一个小错误：

```
 string postData = "collapse_key=score_update&time_to_live=108&
    delay_while_idle=1&data.message=" + value + "&data.time=" + 
    System.DateTime.Now.ToString() + "registration_id=" + deviceId + ""; 
```

参数registration_id前缺少“&”，所以**®istration_id**是正确的。

样品完美运行。只需确保将您的服务器密钥放在：

```
string GoogleAppID = "GGOGLE_API_KEY"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T15:21:48.467

尝试这个 ：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Net;
using System.Text;
using System.IO;
using System.Security.Cryptography.X509Certificates;
using System.Net.Security;
using System.Collections.Specialized;

public class AndroidGCMPushNotification
{
    public AndroidGCMPushNotification()
    {
        //
        // TODO: Add constructor logic here
        //
    }
    public string SendNotification(string deviceId, string message)
    {
        string GoogleAppID = "GGOGLE_API_KEY";        
        var SENDER_ID = "SENDER_ID/PROJECT_NUMBER";
        var value = message;
        WebRequest tRequest;
        tRequest = WebRequest.Create("https://android.googleapis.com/gcm/send");
        tRequest.Method = "post";
        tRequest.ContentType = " application/x-www-form-urlencoded;charset=UTF-8";
        tRequest.Headers.Add(string.Format("Authorization: key={0}", GoogleAppID));

        tRequest.Headers.Add(string.Format("Sender: id={0}", SENDER_ID));

        string postData = "collapse_key=score_update&time_to_live=108&
        delay_while_idle=1&data.message=" + value + "&data.time=" + 
        System.DateTime.Now.ToString() + "registration_id=" + deviceId + "";
        Console.WriteLine(postData);
        Byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        tRequest.ContentLength = byteArray.Length;

        Stream dataStream = tRequest.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        WebResponse tResponse = tRequest.GetResponse();

        dataStream = tResponse.GetResponseStream();

        StreamReader tReader = new StreamReader(dataStream);

        String sResponseFromServer = tReader.ReadToEnd();

        tReader.Close();
        dataStream.Close();
        tResponse.Close();
        return sResponseFromServer;
    }
} 
```

您可以通过传递设备 ID 和消息来调用 SendNotification 函数。

```
AndroidGCMPushNotification apnGCM = new AndroidGCMPushNotification();

string strResponse =
apnGCM.SendNotification("DEVICE_ID",
"Test Push Notification message "); 
```

# netbeans - Neo4j 可以与 NetBeans 一起使用吗？

> ID：14673312
> 
> 赞同：0
> 
> 时间：2013-02-03T14:06:40.617
> 
> 标签：netbeans, neo4j

我刚刚发现了图形数据库和neo4j 的存在，并且正在徘徊是否有一种方法可以在NetBeans 中以某种方式以Apache Derby 的使用方式使用它。如果这是一个非常愚蠢的问题，我很抱歉，我刚刚开始学习数据库并且远不了解我的方式。我绝对可以自己寻找一种方法来做到这一点，但如果有经验的人可以分享这方面的建议，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:34:20.383

您可以将 Neo4j 用作 Java 应用程序的一部分或用作独立服务器，请参阅：

[http://docs.neo4j.org/chunked/snapshot/tutorials.html](http://docs.neo4j.org/chunked/snapshot/tutorials.html)

# algorithm - 计算减少 nim 堆以获得 XOR 和 0 的方法

> ID：14673313
> 
> 赞同：2
> 
> 时间：2013-02-03T14:06:43.313
> 
> 标签：algorithm, math, dynamic-programming, counting

**给定**：一组`n`硬币 ( `n <= 100`)，使得它们的 XOR-sum (nim-sum)*不*为 0。每堆可以包含可以用 30 位表示的硬币。
**期望**：获得 0 的整体 XOR（nim sum）。
**限制**：可以从任何一堆中移除石头，只要至少有一堆保持不变。石头不能添加到任何堆中。
**所需输出**：可以实现此目的的方法数，以大素数为模。

我理解保持一摞不变意味着其余摞的异或必须等于不变摞中的硬币。我试图使用动态编程，但一无所获。一个棘手的方面似乎是，在考虑其他一些也保持不变的堆时，任何有一些未更改的部分解决方案可能会被计算多次。这*是*一个竞赛题，现在竞赛已经结束。任何帮助将不胜感激。谢谢！

# java - 为什么编译器在进行“坏”转换时不给出错误？

> ID：14673314
> 
> 赞同：0
> 
> 时间：2013-02-03T14:06:46.300
> 
> 标签：java, compiler-construction, compiler-errors

考虑以下 Java 类：

```
public class Animal {
    public static void printText(Object obj) {
        System.out.println(obj.toString());
    }
}

class Tiger extends Animal {
    // Contains some unimportant methods.
} 
```

现在，当在 main 方法中输入以下内容时，即使强制转换会导致错误，编译器也不会给出任何错误。为什么？

```
public static void main(String[] args) {
    Animal animal = new Animal();
    ((Tiger)animal).printText(animal);  // <= ?? no error in the compiler ??
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:09:19.103

在您的示例中，很容易知道演员阵容是错误的 - 但在一般情况下并非如此。

如果您有一个`Animal getRandomAnimal()`也可能返回的方法怎么办`Tiger`。（或者更常见的情况，`Animal getAnimal()`可能被子类覆盖以返回 a 的方法`Tiger`）。

在编译时，你不可能知道是否

```
Tiger tiger = (Tiger)getRandomAnimal(); 
```

是否有效，**这仅在运行时才知道**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:09:32.253

因为通常，这在编译时无法检测到。例如：

```
Animal a = (someCondition) ? new Animal() : new Tiger();

((Tiger)animal).printText(animal); 
```

# linux - 如何通过 ssh 将 echo 的输出重定向到文件

> ID：14673316
> 
> 赞同：4
> 
> 时间：2013-02-03T14:07:02.307
> 
> 标签：linux, bash, ssh

我正在尝试通过 ssh 将变量的内容重定向到文件。喜欢：

```
ssh $MachineIP  echo $CM_Config > $mName/CM_CONFIG 
```

where`$CM_Config`是我的主机中包含多行的局部变量，并且`$mName/CM_CONFIG`位于`$MachineIP` 假设我的 ssh 配置正确的情况下，我应该如何将局部变量重定向到远程文件。提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T14:09:56.823

您必须用双引号引用整个命令

```
ssh $MachineIP "echo $CM_Config > $mName/CM_CONFIG" 
```

这允许变量被本地 shell 替换并在远程主机上完成重定向。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-03T14:40:40.300

在我的情况下，这个命令解决了这个问题：

```
ssh $MachineIP " echo \"$CM_Config\" > \"$mName/CM_CONFIG\" " 
```

实际上，如果没有 \" 包围我的变量，我的问题并没有解决。可能是因为这些变量的内容有点像 bash 命令并且是多行的。

# avro - Avro 中特定数据类型的最佳实践

> ID：14673318
> 
> 赞同：6
> 
> 时间：2013-02-03T14:07:06.113
> 
> 标签：avro

我很想了解在 Avro 中对两种非常特定类型的数据进行编码的最佳实践：时间戳和 IP 地址。

我遇到了时间戳的开放 JIRA 票（[https://issues.apache.org/jira/browse/AVRO-739](https://issues.apache.org/jira/browse/AVRO-739)），但看起来这个话题已经安静了一段时间了。那么 - 在 Avro 中编码时间戳的最佳实践是什么（最好用于 MapReduce、Pig、Hive、流式上下文中的下游使用）。

此外，我很想听听其他人如何将 IP 地址编码到 Avro 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T12:03:22.470

我对 Avro 中的类型编码有一些经验。就我而言，一个很大的要求是通过 Hive 访问数据。

*   对于时间戳，我建议使用带有 unix 时间戳的浮点数。大多数其他库都支持这一点，并且与 Hive 一起使用很容易，因为您可以转换为时间戳。

*   对于 IP 地址，我会使用字符串编码。我认为使用数据时字符串的可读性使其成为最佳类型。如果您有其他要求，例如减小数据大小，那么二进制编码可能更适合您。

# mysql - 使用 phpMyAdmin 进行 SQL 查询

> ID：14673322
> 
> 赞同：-1
> 
> 时间：2013-02-03T14:07:24.343
> 
> 标签：mysql, sql, database

我的表由 5 个字段组成：

```
Submission ValueId  1 2 3 4 5
FormId  1 2 3 4 5
SubmissionId  22 or 23 or 24 
FieldName  fullname,Date,ville,
FieldValue 1 Paul  01/10/2013 Bern 
```

我想要的表：

```
SELECT FormId, SubmissionId, FieldValue FROM qesnd_rsform_submission_values WHERE      FieldValue = Bern AND FormID='1' ORDER BY SubmissionId ASC" 
```

使用 formid：1
使用 FieldValue：Paul
使用 FieldValue： 2013 年 1 月 10 日
使用 FielValue：伯尔尼

我的问题如何通过多项选择使我的请求 phpMyAdmin？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:12:25.890

看起来您的数据有点过度规范化，每个字段都有单独的行。我认为访问此数据的最佳方式是通过聚合，假设字段名称对于任何形式都不重复：

```
select formid, submissionId,
       max(case when fieldName = 'FullName' then fieldvalue end) as FullName,
       max(case when fieldName = 'Date' then fieldvalue end) as DateStr,
       max(case when fieldName = 'ville' then fieldValue end) as Ville
from t
where formid = 1
group by SubmissionId 
```

如果要选择过滤器上的信息，请尝试：

```
select *
from (select formid, submissionId,
             max(case when fieldName = 'FullName' then fieldvalue end) as FullName,
             max(case when fieldName = 'Date' then fieldvalue end) as DateStr,
             max(case when fieldName = 'ville' then fieldValue end) as Ville
      from t
      group by SubmissionId
     ) t
 where formid = 1 and FullName = 'Paul' and DateStr = '01/10/2013' and Ville = 'Bern' 
```

# mysql - 显示会员姓名的 30 天

> ID：14673325
> 
> 赞同：-2
> 
> 时间：2013-02-03T14:07:38.507
> 
> 标签：mysql, sql

这是我的 sql 选择查询：

```
SELECT 
 contact_individual.name,contact_individual.contactID_individual,
 MAX(DATE_FORMAT(payment_individual.expiration,'%m/%d/%Y')) as exp1 
 FROM contact_individual,payment_individual
 WHERE contact_individual.contactID_individual = payment_individual.contactID_individual    
 group by contact_individual.contactID_individual,contact_individual.name
 having MAX(payment_individual.expiration)=DATE_ADD(current_date(), INTERVAL 1 MONTH) 
```

在这种情况下，仅在到期日期为到期前 1 个月时才显示会员姓名。请帮助我，我想做的就是让它可用/或者是否可以在整个 30 天内显示成员的姓名。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:12:49.870

也许这个？

```
HAVING MAX(payment_individual.expiration) BETWEEN
              NOW()
              AND DATE_ADD(NOW(), INTERVAL 1 MONTH) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:14:58.763

如果您为原始结果和预期结果提供了一些示例数据，那就太好了。是不是要显示有效期在今天后一个月内的成员？

```
SELECT 
 contact_individual.name,contact_individual.contactID_individual,
 MAX(DATE_FORMAT(payment_individual.expiration,'%m/%d/%Y')) as exp1 
 FROM contact_individual,payment_individual
 WHERE contact_individual.contactID_individual = payment_individual.contactID_individual    
 group by contact_individual.contactID_individual,contact_individual.name
 having DATE_DIFF(MAX(payment_individual.expiration),Current_Date()) = 30
 ; 
```

# macos - 从 Mountain Lion 中删除 Node.Js

> ID：14673327
> 
> 赞同：21
> 
> 时间：2013-02-03T14:08:06.040
> 
> 标签：macos, node.js, rvm, uninstallation

> **可能重复：**
> [如何完全卸载 Node.js，然后从头重新安装（Mac OS X）](https://stackoverflow.com/questions/11177954/how-do-i-completely-uninstall-node-js-and-reinstall-from-beginning-mac-os-x)

我正在尝试从我的系统中删除 Node.js，以便我可以使用 NVM 版本管理器重新安装它。

我前一阵子安装了 Node.js，根据 node `--version`，我正在运行`v0.6.8`

我环顾四周，但我发现的大多数答案都仅限于通过 PKG 文件安装 Node 并且他们的补救措施对我不起作用..

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-03T14:09:40.043

正如答案所发现的，[我如何完全卸载 Node.js，然后从头开始重新安装（Mac OS X）](https://stackoverflow.com/questions/11177954/how-do-i-completely-uninstall-node-js-and-reinstall-from-beginning-mac-os-x)

> 1.  转到**/usr/local/lib**并删除任何**节点**和**node_modules**
> 2.  转到**/usr/local/include**并删除任何**节点**和**node_modules**目录
> 3.  如果您使用**brew install node 安装**，则在终端中运行**brew uninstall node**
> 4.  检查您的主目录是否有任何“本地”或“lib”或“包含”文件夹，并从那里删除任何“节点”或“节点模块”
> 5.  转到**/usr/local/bin**并删除任何**节点**可执行文件
> 6.  转到**/usr/bin 并删除**任何**节点**可执行文件

# python - 在 python 中验证 sqlite db 格式，如果 db 是 String/StringIO 对象的形式

> ID：14673328
> 
> 赞同：0
> 
> 时间：2013-02-03T14:08:07.080
> 
> 标签：python, sql, sqlite

如果有一个 String 或 StringIO 对象形式的 SQLite 数据库，是否有一个 Python 模块可以提供一种快速直接的方法来验证数据库的格式？大多数模块似乎都需要您传递对文件的引用来打开数据库，而在我正在处理的场景中，不存在文件，所以我想直接通过其内容来验证数据库的格式。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:09:27.827

数据库本身提供了`sqlite`一个内存选项。用作文件`:memory:`名来创建它。

```
>>> import sqlite3
>>> conn = sqlite3.connect(':memory:')
>>> conn.execute('CREATE TABLE foo (bar)')
<sqlite3.Cursor object at 0x10c8f76c0>
>>> list(conn.execute('SELECT * FROM foo'))
[]
>>> list(conn.execute('SELECT name FROM sqlite_master'))
[(u'foo',)]
>>> conn = sqlite3.connect(':memory:')  # a reconnect gives a new empty database
>>> list(conn.execute('SELECT name FROM sqlite_master'))
[] 
```

没有为连接创建文件，关闭 python 将关闭内存数据库和模式，其中的所有数据都被丢弃。

您唯一的其他选择是使用临时文件名；`sqlite`坚持完整地处理文件本身。您*不能*传入类似文件的对象，它*必须*是文件名或字符串`:memory:`。

# ruby-on-rails - ruby on rails button_to 或者最好是 f.button

> ID：14673331
> 
> 赞同：1
> 
> 时间：2013-02-03T14:08:22.443
> 
> 标签：ruby-on-rails, ruby, button

我正在处理“登录”/“注册”表单，这是我从其他人那里“继承”的项目。我的 Rails 并没有那么先进，但我很喜欢它，除了在大约 10 小时内完成一些微小的工作时感到沮丧。

当人们想登录时，输入用户名和密码后，他们点击“登录”按钮，效果很好：

```
<%= f.button :submit, I18n.t('sign_in.sign_in_button'), :class => 'btn btn-primary' %> 
```

现在，如何创建一个将用户引导至“创建帐户”页面的注册按钮？

例如，此链接完美运行：

```
<%= link_to I18n.t('sign_in.sign_up'), new_user_registration_path %> 
```

`new_user_registration_path`转到“创建帐户”页面。`new_user_registration_path`我的按钮代码中没有任何地方可以粘贴吗？

我也试过这个，点击它只是不断刷新当前页面，而不是去“创建帐户”页面：

```
<%= button_to I18n.t('sign_in.sign_up_button'), new_user_registration_path, :class => 'btn btn-warning' %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:14:31.533

看起来您正在使用 Bootstrap。这是您所拥有的链接的完美用例，但样式为按钮。尝试： `<%= link_to I18n.t('sign_in.sign_up'), new_user_registration_path, :class => "btn btn-warning" %>`

# java - 在给定条件下查找二维数组中路径的最大长度

> ID：14673333
> 
> 赞同：1
> 
> 时间：2013-02-03T14:08:31.880
> 
> 标签：java, algorithm

嗨，我是堆栈溢出的新手。我需要帮助来解决 java 程序中的以下问题

我有一个二维数组，我需要找出可以从任何节点遍历的最大长度。如果它的值小于当前元素，我可以从一个元素遍历到连接元素（左/右/上/下）。我需要在下面的二维整数数组中找到上述条件可能的最大路径是 5*5 数组

```
 7  2  3  4  5 
  36 37 38 34 6 
  33 44 46 40 7 
  24 43 42 41 8 
  35 32 47 30 9 
```

上述数组中最长的路径是 46-44-43-42-41-30-9-8-7-6-5-4-3-2 共 14 个。

请帮助我编写 Java 代码。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:16:02.490

将数据表示为[图形](http://en.wikipedia.org/wiki/Graph_%28mathematics%29), 其中`G=(V,E)`和`V={ all squares}`,`E = { (u,v) | u is adjacent to v and u.value < v.value)`

请注意，上面的图是一个有向无[环图](http://en.wikipedia.org/wiki/Directed_acyclic_graph)（因为如果 (u,v) 在 E 中，则没有从`v`到的路径`u`，因为它需要`v->v1->v2->...->u`这样的路径`v.value > v1.value > v2.value > .... > u.value`，但是`operator>`是传递的，所以它意味着`v.value > u.value`，我们知道`v.value < u.value`- 因为`(u,v)`在 中`E`，所以是矛盾的，这样的路径是不可能存在的）。

在此减少之后 - 您可以简单地解决[DAG 中的最长路径](https://stackoverflow.com/q/10712495/572670)，这是一个更简单的问题。

# c# - 如何创建一个空的对象字段？

> ID：14673334
> 
> 赞同：4
> 
> 时间：2013-02-03T14:08:45.463
> 
> 标签：c#, object

我需要将一个类似rogue的游戏编写为一个项目，但我有一个小问题。有时我需要选择使用开关创建哪个对象。我想在开关之外声明一个“空”对象，然后开关用值填充对象。这就是我想做的事情：

```
Console.WriteLine("What race would you like to be?")

int answer = Convert.ToInt32(Console.ReadLine());

Object heroRace; // This is where the problem comes in

switch(answer)
{
    case 1: heroRace = new Orc(); break;
    case 2: heroRace = new Elf(); break;
} 
```

我想`heroRace`在 switch 范围之外进行重用。如果我可以创建类似的东西，它将大大简化我的程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:12:26.517

在访问它的成员之前，您需要将对象转换为更具体的类型

```
Object o=new Orc();
((Orc)o).methodNameWithinOrc(); 
```

但这可能会导致强制转换异常。

例如..

```
 ((Elf)o).methodNameWithinOrc(); 
```

会导致强制转换异常，因为`o`它是`Orc`not的对象`Elf`。

`is`最好在使用运算符进行转换之前检查对象是否属于特定类

```
 if(o is Orc)
((Orc)o).methodNameWithinOrc(); 
```

* * *

`Object``ToString`除非您覆盖, `GetHashCode`.. 方法，否则它本身没有用

它应该像

```
 LivingThingBaseClass heroRace; 
```

`Orc`并且`Elf`应该是的子类`LivingThingBaseClass`

`LivingThingBaseClass`可以包含像`move`, `speak`, `kill`.. 这样的方法。所有或其中一些方法将被`Orc`and覆盖`Elf`

`LivingThingBaseClass`可以是一个`abstract`类，甚至是一个`interface`取决于您的要求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:39:33.730

一般方法是：

```
interface IRace  //or a base class, as deemed appropriate
{
    void DoSomething();
}

class Orc : IRace
{
    public void DoSomething()
    {
        // do things that orcs do
    }
}

class Elf : IRace
{
    public void DoSomething()
    {
        // do things that elfs do
    }
} 
```

现在 heroRace 将被声明（外部开关）为：

```
IRace heroRace; 
```

在 switch 中，您可以：

```
heroRace = new Orc(); //or new Elf(); 
```

进而...

```
heroRace.DoSomething(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:40:53.053

```
class test1 
    {
        int x=10;
        public int getvalue() { return x; }
    }
    class test2 
    {
        string y="test";
       public  string getstring() { return y;}

    }
    class Program
    {

        static object a;

        static void Main(string[] args)
        {
            int n = 1;
            int x;
            string y;
            if (n == 1)
                a = new test1();
            else
                a = new test2();

            if (a is test1){
               x = ((test1)a).getvalue();
               Console.WriteLine(x);
            }
            if (a is test2)
            {
                y = ((test2)a).getstring();
                Console.WriteLine(y);
            }
        }
    } 
```

# mysql - MySQL，仅允许某些类型的用户能够更改字段

> ID：14673336
> 
> 赞同：0
> 
> 时间：2013-02-03T14:08:54.837
> 
> 标签：mysql

我正在为一个简单的系统创建一个数据库。此问题的两个相关表是用户和类别。它们设置如下：

用户：UserId(Pk)、用户名、用户类型、名字等。

类别：CategoryId(Pk)、名称、UserId(Fk)

我已将用户类型设置为“枚举”，并且只能具有值 admin、moderator 或 regular。我想做到这一点，以便只有类型为 admin 的用户才能添加类别表。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:14:24.160

如果您的用户不是 MySQL 用户，我假设他们不是，那么这不取决于 MySQL，而是取决于与 MySQL 交互的程序，即：PHP。在提交对“受限”表的更改之前，您应该进行适当的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:20:21.197

据我了解，您必须处理特权。查看页面[https://dev.mysql.com/doc/refman/5.5/en/privilege-system.html](https://dev.mysql.com/doc/refman/5.5/en/privilege-system.html) 和[http://dev.mysql.com/doc/refman/5.0/en/privileges-provided。 .html](http://dev.mysql.com/doc/refman/5.0/en/privileges-provided.html) _

我们有 GRANT 语句来为用户提供特权

这是一个简单的例子：如果你想指定用户 kim 从 localhost 到表 users 的唯一选择权限，

将 dbname.users 上的 GRANT 选择授予由 'password' 标识的 'kim'@'localhost'

为任何用户指定所有权限

将 dbname.users 上的所有内容授予由“pass”标识的“root”@“localhost”

检查任何特定用户的权限

采用 ： `show grants [for user ]`

括号内的内容是可选的，用户在某种意义上是一个有效的用户，如 'root'@'%'

# mysql - MySQL内连接查询多表

> ID：14673338
> 
> 赞同：12
> 
> 时间：2013-02-03T14:09:01.740
> 
> 标签：mysql, sql, join

我正在尝试加入一些表格，布局示例如下：

订单

```
user_id=7 pricing id=37 
```

产品定价

```
id=37 product_id=33 
```

产品

```
id=33 name=test product 
```

SQL

```
SELECT *
FROM orders
  INNER JOIN products_pricing
    ON orders.pricing_id = products_pricing.id
  INNER JOIN products
    ON products_pricing.product_id = products.id
WHERE orders.user_id = '7' "); 
```

列表

```
id=233 user_id=7 url=test.com 
```

使用这个 SQL，我得到一个输出，它给出了 user_id 为 7 的所有产品，它会在一个 while 循环中列出每个产品名称。但是，当我为名为 listings 的表添加另一个 INNER JOIN 时，该表有一个 user_id 列，我需要为匹配的每一行获取一个 url，以便我可以将产品名称与 url 超链接，我也会得到列表表中包含的所有内容作为上面的工作内容。我要么做错了，要么错过了一些东西。我花了几个小时试图弄清楚，但一直得到相同的结果。谁能帮我吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-03T14:14:22.833

尝试这个：

```
SELECT 
  p.id,
  p.name,
  l.url,
  o.user_id,
  o.pricing_id
FROM orders AS o
INNER JOIN products_pricing AS pp ON o.pricing_id  = pp.id
INNER JOIN products         AS  p ON pp.product_id = p.id
INNER JOIN listings         AS  l ON l.user_id = o.user_id
WHERE o.user_id ='7' 
  AND l.id = 233 
  AND l.url = 'test.com'; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/aa640/2)

对于您在问题中发布的示例数据，这将为您提供：

```
| ID |        NAME |      URL | USER_ID | PRICING_ID |
------------------------------------------------------
| 33 | testproduct | test.com |       7 |         37 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:33:03.780

是的，这可以使用内部连接本身来完成。并在选择语句中获取选择列。

```
SELECT 
  p.id,
  p.name,
  l.url,
  o.user_id,
  o.pricing_id
FROM orders AS o
INNER JOIN products_pricing AS pp ON o.pricing_id  = pp.id
INNER JOIN products         AS  p ON pp.product_id = p.id
INNER JOIN listings         AS  l ON l.user_id = o.user_id
WHERE o.user_id ='7' 
  AND l.id = 233 
  AND l.url = 'test.com'; 
```

# jquery-select2 - select2 如何将 ajax 示例的样式更改为看起来像标记示例

> ID：14673339
> 
> 赞同：2
> 
> 时间：2013-02-03T14:09:02.030
> 
> 标签：jquery-select2

使用 select2 我需要使用 ajax 自动完成标签。所以一切都很好，除了它的外观。

我只是不明白如何使“加载远程数据”示例（'#e6'）看起来像“自动标记化”示例（'#e20'），我的意思是看起来像带有下拉列表的通常选择输入，没有添加样式和搜索图标。

# jquery - .toggleClass 在类之间切换但具有多个 ID

> ID：14673351
> 
> 赞同：0
> 
> 时间：2013-02-03T14:09:56.893
> 
> 标签：jquery, css

正如您从下面的代码中看到的那样，我试图在单击“note”时弹出“revealFootNote”。这很好用，但我有 10 英尺的音符，当我点击其中任何一个时，它们都会弹出。每个脚注都有一个唯一的 ID“一”、“二”...“十”我只需要在单击该特定类时弹出相关的脚注。如果我将 .note 替换为 #one 它仍然有效，但它会为单击的任何类弹出 #one。

```
$(document).ready(function(){                                               
    $(".note").click(function() {;
        $(".footNote").toggleClass("revealFootNote");
    });
    $(".footNote").click(function() {;
        $(this).toggleClass("revealFootNote");
    });
}); 
```

帮助！我已经学习 jQuery 2 天了。

谢谢你，塔里埃森

所以，在你们给我的所有帮助之后的最终结果：

```
$(".note, .revealFootNote").click(function() {
    if ($(this).hasClass('note')) {
        $('#'+$(this).data('target')).toggleClass("revealFootNote");
    } else {
        $(this).hide();
    }
});
    $(".footNote").click(function() {;
        $(this).toggleClass("revealFootNote");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:39:15.460

**HTML**

```
<ul>
    <li>Running speed<span class="note" data-target="nine">9</span></li>
    <li>Ki<span class="note" data-target="ten">10</span></li>
    <li>ESP<span class="note" data-target="eleven">11</span></li> 
</ul> 

<aside class="footNote" id="nine"> The average human can run 7.5 miles per hour. </aside> 
<aside class="footNote" id="ten"> Ki and ESP points can be further modified with the use of skills or alchemical substances. </aside>
<aside class="footNote" id="eleven"> Footnote Eleven </aside> 
```

**jQuery**

```
$(document).ready(function($) {
    $(".note, .footNote").click(function() {
        if ($(this).hasClass('note')) {
            $('#'+$(this).data('target')).show();
        } else {
            $(this).hide();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:54:49.063

你可以试试这个，我是在你看到你的 html 之后做的：`[http://jsfiddle.net/7Q23b/](http://jsfiddle.net/7Q23b/)`

```
$('ul li').click(function () {
   if ($('.note',this).text() == '9') {
      $('#nine').toggle();
   } else if ($('.note',this).text() == '10') {
      $('#ten').toggle();
   }
}); 
```

# objective-c - 使用工厂类时的设计困境

> ID：14673352
> 
> 赞同：1
> 
> 时间：2013-02-03T14:10:12.363
> 
> 标签：objective-c, oop, factory, factory-pattern

在我的应用程序中，我有多个`UITableViewCell`. 我使用工厂类来实例化正确的类型并将它们提供给需要它们的人。工厂类获取一个参数，该参数是代表单元的数据对象。我认为这没关系，因为工厂是控制器的一部分。

`Cellfactory* factory = [[Cellfactory alloc ] initWithData:data];`

当该数据对象与其在工厂类中的视图表示进行映射时，问题就出现了。我想到了2个解决方案：

*   为了保留一个映射的字典，键将是数据对象类的字符串表示，值将是负责呈现该数据对象的视图类的字符串表示。这样，当工厂被要求提供基于数据对象的视图时，它将通过查看地图字典来知道要实例化哪个类。不利的一面是，如果您添加另一个数据对象，您也需要修改工厂方法（在其字典中添加一个新条目）

*   无论您添加多少新对象，都不需要修改工厂方法的更灵活的解决方案是保留负责在数据对象本身内部呈现数据对象的视图类的名称。但这将模型与视图耦合在一起，并且不知何故让模型不得不提供有关渲染的信息。

那么，这两者中哪一个是更好的长期选择？有没有其他选择可以击败他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:30:52.720

您可以执行类似于[NSValueTransformer](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSValueTransformer_Class/Reference/Reference.html)的操作，并允许注册类。就像是`+ (void)setViewClass:(Class)viewClass forDataClass:(Class)dataClass;`

这更灵活，因为您可以从每个视图和数据类最容易的地方注册这些。它还使用 Class 对象而不是字符串，这样更简洁，更不容易打错字。然后，您可以构建一个类似于您描述的字典，但使用 Class 对象而不是字符串。您可以像使用类本身一样使用 Class 对象。例如。`[[viewClass alloc] init]`.

顺便说一句，您实际上并不需要工厂对象。您可以只使用工厂方法，例如`+ (UITableViewCell *)cellForData:(id)data`.

# javascript - 弹出式 Google 地图中的 Html

> ID：14673354
> 
> 赞同：0
> 
> 时间：2013-02-03T14:10:21.340
> 
> 标签：javascript, html

我的弹出式谷歌地图有问题。我参数化了所有文本“contenuInfoBulle”。所以文本显示正确但不是html为什么？我希望文本出现在`var popup=$('<div/>', { id:+name, text:'slt'+contenuInfoBulle` 但我想知道是否可以将 html 放在弹出窗口中

```
$(function(){function initialize() {

    var mapOptions = {
      zoom: 4,
       disableDefaultUI: true,
      center: new google.maps.LatLng(45.35, 4.98),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'),
                                  mapOptions);

    addMarkerWithWindow("Lemans", new google.maps.LatLng(48.006922, 0.20874), map);
    addMarkerWithWindow("Paris", new google.maps.LatLng(48.856291, 2.352705), map);
}

function addMarkerWithWindow(name, coordinate, map) {
var popup=$('<div/>', {
     content: contenuInfoBulle
});

var image = 'rss.png';
var marker = new google.maps.Marker({
  map: map,
  icon: image,
  position: coordinate
});

    var styles = [
   {
      featureType: "all",
      stylers: [
        { saturation: -15 },
        { lightness: -10 },
      ]
    },

            ];
map.setOptions({styles: styles});

var contenuInfoBulle = '<h1>Cité Royale de Loches</h1>' +   
                        '<h2>Royale et imprenable</h2>' +
                        '<img id="lettrineImage" src="http://static.touraineverte.com/apigooglemapv3/photo_monument-loches.jpg" title="La cité royale de Loches" />' +
                        '<p>Remontez le temps pour découvrir l\'une des plus belles cités fortifiées de France.</p>' +
                        '<p>Le <b>DONJON</b>, haut de 36 mètres, a été construit par un comte d\'Anjou, Foulques Nerra, au début du XIe siècle. S\'il figure parmi les plus imposants de son époque en Europe, il est aussi l\'un des mieux conservés. Modèle d\'architecture militaire, il est transformé en prison royale par Louis XI.</p>' +
                        '<p>Le <b>LOGIS ROYAL</b> se trouve à proximité. Ce joyau de la Renaissance française, haut lieu de l\'Histoire de France, a été une résidence de prédilection de la dynastie des Valois. Sa façade ouverte en terrasse domine la ville et la vallée de l\'Indre. Le logis a accueilli notamment Jeanne d\'Arc, Agnès Sorel et Anne de Bretagne. Pour en savoir plus : <a href="http://www.cg37.fr/index.php?media=106" title="La cité royale de Loches" target="_parent">La cité royale de Loches</a></p>';//  jQuery var popup=$('<div/>', {
id:+name,
text:'slt'+contenuInfoBulle}).dialog({
'autoOpen':false,
'width': 600,
'height':600,
'resizable':false,
'modal':false,
'title':name});

       var div = document.createElement('DIV');
    div.innerHTML = 'hello';google.maps.event.addListener(marker, 'click', function(e) {
popup.dialog('open');});}initialize();});//]]> google.maps.event.addDomListener(window, 'load', initialisation); 
```

[http://jsfiddle.net/cJbad/](http://jsfiddle.net/cJbad/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:41:55.123

改变这个：

```
text:'slt'+contenuInfoBulle 
```

至：

```
html:'slt'+contenuInfoBulle 
```

[工作示例](http://jsfiddle.net/WLy52/)

# c++ - SymFromAddr 返回 ERROR_INVALID_ADDRESS 标志，如何在 mingw 中获取堆栈跟踪？

> ID：14673355
> 
> 赞同：5
> 
> 时间：2013-02-03T14:10:30.153
> 
> 标签：c++, c, debugging, winapi, backtrace

我要做的就是打印调用给定行的方法堆栈。我从[https://stackoverflow.com/a/5699483/393087](https://stackoverflow.com/a/5699483/393087)答案中获得了代码。稍微重构它以显示问题所在。

```
#include <windows.h>
#include <iostream>
#include <imagehlp.h>
#include <dbghelp.h>

void printStack( void ) {
  HMODULE dbghelp_lib = LoadLibrary("dbghelp.dll");
  if (NULL == dbghelp_lib) {
    printf("dbghelp.dll failed");
  }
  HANDLE process = GetCurrentProcess();
  if (!SymInitialize( process, NULL, TRUE )) {
    printf("SymInitialize failed: %d\n", GetLastError());
    abort();
  } else SetLastError(0);
  void * stack[100];
  ULONG FramesToSkip = 0;
  ULONG FramesToCapture = 32;
  unsigned short frames = CaptureStackBackTrace( FramesToSkip, FramesToCapture, stack, NULL );
  SYMBOL_INFO * symbol;
  symbol = ( SYMBOL_INFO * )calloc( sizeof( SYMBOL_INFO ) + 256 * sizeof( char ), 1 );
  symbol->MaxNameLen = 255;
  symbol->SizeOfStruct = sizeof( SYMBOL_INFO );
  for(unsigned int i = 0; i < frames; i++ ) {
    if(!SymFromAddr( process, ( DWORD )( stack[ i ] ), 0, symbol )) {
      printf("SymFromAddr failed: %d\n", GetLastError());
    }
    printf( "%i: %s - 0x%0X\n", frames - i - 1, symbol->Name, symbol->Address );
  }
  free( symbol );
}

void testfunc() {
  printStack();
}

int main() {
  testfunc();
} 
```

它返回：

```
SymFromAddr failed: 487
3:  - 0x0
SymFromAddr failed: 487
2:  - 0x0
SymFromAddr failed: 487
1:  - 0x0
0: RegisterWaitForInputIdle - 0x7C81702E 
```

它编译和链接没有任何警告。

编译器：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev7。 7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev7.7z)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T19:32:44.557

dbghelp 仅读取 PDB 文件。因此，您的选择是：

1.  重新实现 dbghelp API 以使用 DWARF（可能比您想要的更多工作）
2.  将 DWARF 符号转换为 PDB。

对#2 进行了一些谷歌搜索，发现[cv2pdb](https://github.com/rainers/cv2pdb)，它似乎面向 D 编程语言，但它似乎足够通用，可能是一种更简单的方法。

# java - Android - 首次运行时解析文件所需的一般建议

> ID：14673358
> 
> 赞同：0
> 
> 时间：2013-02-03T14:10:35.923
> 
> 标签：java, android, database, performance

我有一个应用程序，当你加载它时，它会显示 6 个按钮。第 6 个按钮需要可视化一些数据。此数据以 txt 文件`JSON`格式存储在我的`/raw`文件夹中。数据大小为 600kb，但目前解析并存储在数据库中大约需要 3 分钟。这个想法是，一旦它在数据库中，读取和使用数据的效率和速度要高得多，而不是每次都直接从文件中读取。

我最初制作了这个应用程序，以便它从我的 REST 服务器下载数据，然后将其存储在数据库中，但后来发现将文件与应用程序一起发送会快得多。但是，它仍然很慢。

我正在寻找有关如何加快此文件解析并使用户体验更好的建议。目前，他们第一次进入此部分时，会`ProgressDialog`出现 a，他们必须等待几分钟（在我的 HTC Desire 上为 3 分钟）才能完成所有这些文件解析，然后才能使用该功能。进度对话框就在那里，一直工作直到完成，用户无法做任何其他事情。它并不理想！我曾考虑在应用程序启动时在后台的单独线程中运行文件处理，没有进度条，因此它对用户来说似乎是无声的，但是，如果他们选择按钮进入该部分应用程序一加载就依赖这些数据，那么它将导致进一步的问题，因为文件处理可能尚未完成。

也许我可以添加一些带有大量文本的“指导性”弹出框，这样当他们阅读它们时，文件处理就完成了。但是，我不确定为应用程序增加了什么价值。使用起来非常简单！

任何人都可以在这里给我一个更好的策略的建议吗？另外，我是否认为 3 分钟解析 600kb 的 JSON 有点太长了？也许我的逻辑没有应有的效率。

这是线程的开始：

```
private boolean parseFile() {
    dialog = ProgressDialog.show(activity,
             "Progress Title",
             "Progress body",
             true);
    ReadDataThread unt = new ReadDataThread();
    unt.start();
    return true;
}

private class ReadDataThread extends Thread {
    @Override
    public void run() {
        InputStream is = activity.getResources().openRawResource(R.raw.dbdata);
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        try {
            StringBuilder sb = new StringBuilder();
            sb.append(reader.readLine());
            sortAndStore(sb.toString());
        } catch (IOException e) {
            Log.e(Constants.TAG, "Error reading data");
            e.printStackTrace();
        }
        handler.sendEmptyMessage(0);
    }

    private final Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            if (dialog.isShowing())
                dialog.dismiss();
            Toast.makeText(activity, "Finished reading data", Toast.LENGTH_SHORT).show();
        }
    };
} 
```

你会注意到它调用了一个名为 的方法`sortAndStore`，这里是：

```
@Override
public boolean sortAndStore(String raw) {
    boolean returnCode=false;
    ContentValues initialValues = new ContentValues();

    try {
        JSONObject f = new JSONObject(raw);
        JSONArray jsonArr = f.getJSONArray("stops");
        int arrSize=jsonArr.length();
        for(int i=0; i<arrSize; i++) {              
            initialValues.put("name", jsonArr.getJSONObject(i).getString("name"));
            initialValues.put("lat", jsonArr.getJSONObject(i).getString("lat"));
            initialValues.put("lng", jsonArr.getJSONObject(i).getString("lng"));
            initialValues.put("StopNumber", jsonArr.getJSONObject(i).getString("StopNumber"));
            initialValues.put("Route", jsonArr.getJSONObject(i).getString("Route"));
            initialValues.put("Type", jsonArr.getJSONObject(i).getString("Type"));

            //Add data to DB
            DBHelper db = new DBHelper(activity);
            returnCode = db.addData(initialValues, DBHelper.DBTableName);
        }
    } catch (JSONException e) {
        returnCode=false;
        e.printStackTrace();
    }
    return returnCode;
} 
```

我还使用了一个名为 DatabaseHelper 的类`DBHelper`来处理数据库内容。方法在`DBHelper.addData()`这里：

```
public boolean addData(ContentValues initialValues, String tableName) {
    openDatabase();
    long returnCode = db.insert(tableName, "ID", initialValues);
    closeDatabase();
    return (returnCode == -1 ? false:true);
} 
```

那么，任何人都可以根据上述数据提出更好的策略吗？是更高效的文件 I/O 代码，还是一些 UI 技巧让用户觉得处理时间比实际时间短？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:15:46.370

我通过简单地使用`statements`而不是单独的`insert`语句来解决这个问题。

例如，在`for()`循环之前，我得到了数据库并启动了事务。然后我像往常一样通过循环。循环之后，我简单地关闭了事务，从而启用了批量事务。

插入现在只需几秒钟！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:18:01.677

我认为您显示在角落某处的固定区域显示进度，例如操作栏或其他东西等。进度可能会在您的应用程序中全局显示进度。然后用户会知道一些工作正在进行，你可以让用户在没有你的数据的情况下完成一些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T16:24:15.163

如前所述，您可以使用预填充的数据库发布应用程序。查看这篇文章，它非常简单明了[在 Android 应用程序中使用自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

# iphone - 如何实现日期字段输入

> ID：14673360
> 
> 赞同：-2
> 
> 时间：2013-02-03T14:10:43.967
> 
> 标签：iphone, ios, ios4

在我的应用程序页面中，我有一个要填写生日（日和月）的文件，我想为用户提供方便的方式来做到这一点。
有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:12:13.117

设置你的`UITextField` `inputView`财产`UIDatePicker`

# java - 如何将数字和相应的单词一起存储在 Java 数据结构中？

> ID：14673365
> 
> 赞同：-4
> 
> 时间：2013-02-03T14:11:30.353
> 
> 标签：java, arrays, data-structures

我不确定我是否在 Java 中正确使用了我的数组。如何将单词和数字存储在一起，以便给定数字我可以选择相应的单词

例如，假设数字二对应于单词“Orange”：

```
Prompt: "Enter number:"
Input: 2
Output: "Color is Orange." 
```

我尝试使用数组：

```
String [] colorResList = new String[10] ;
int  resCounter = 0 ;
// Assign values to elements in array.
colorResList[2] = "Orange"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:14:18.213

使用[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)实现，`Integer`以 value为键`String`：

```
Map<Integer, String> colors = new HashMap<Integer, String>();
colors.put(2, "Orange"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:15:33.833

这是一个通常通过使用`Map`;来完成的问题。通常 a`HashMap<T,S>`将适用。出于您的考虑，您可以使用`HashMap<Integer, String>`.

编辑：如果您想将它存储在一个数组中，您可以像在问题中那样使用一个数组并执行此操作

```
int i = //read in number here
System.out.println("Color is " + colorResList[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:18:47.137

使用以下代码

```
Map <Integer, String> map = new HashMap<Integer, String>();

map.put(1,"One");
map.put(2,"Two");
map.put(3,"Three");
map.put(4,"Four");

System.out.println( map.get(3)); // get printed "Three" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T14:19:34.427

您可以使用 HashMap（Map 接口的实现），如下所示：

```
Map<Integer,String> m = new HashMap<Integer,String>();
m.add(1,"Orange");
m.add(2,"Blue")
System.out.println("The colour is "+m.get(1)); 
```

# c# - 当年龄低于 12 岁时，我想要一些特定的文本

> ID：14673367
> 
> 赞同：-6
> 
> 时间：2013-02-03T14:11:40.357
> 
> 标签：c#, asp.net

如果输入的年龄低于 12 岁，我想要一个特定的文本。我想到了一些隐蔽的 int，以某种方式。但我不知道怎么做。有人可以帮我吗？

这就是我所拥有的：

```
<asp:TextBox ID="txtAge" runat="server" />
<br />
<asp:Button ID="btnSend" runat="server" Text="Send" onclick="btnSend_Click" />
<br />
<asp:Literal ID="litResult" runat="server" /> 
```

这是我的代码隐藏：

```
protected void btnSend_Click(object sender, EventArgs e)
{
    if (txtAge.Text <= 12)
    {
        litResult.Text = "You are a child";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:18:08.373

您需要将 txtAge.Text 转换为整数然后执行此操作。

```
protected void btnSend_Click(object sender, EventArgs e)
    {
        int age = -2;
        try
        {
            age = int.Parse(txtAge.Text);

            if (age <= 12)
            {
                litResult.Text = "You are a child";
            }
        }
        catch (Exception e)
        {
            litResult.Text = "Entered values is not a number ";
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:25:48.143

a的`Text`属性`TextBox`是一个字符串，所以需要将 age 转换为 a `int`。

```
protected void btnSend_Click(object sender, EventArgs e)
{
    int age;
    if (int.TryParse(txtAge.Text, out age));
    {
        if (age <= 12)
            litResult.Text = "You are a child";
    }
    else
        litResult.Text = "Please enter a valid age";
} 
```

# android - Chartboost 和 Admob 在同一个应用程序中

> ID：14673369
> 
> 赞同：0
> 
> 时间：2013-02-03T14:11:54.060
> 
> 标签：android, admob, chartboost

我开发了一个游戏恶作剧应用程序，并且已经在其中添加了 AdMob 广告......

我也希望添加 Chartboost 广告，但我不知道将我的应用程序集成到不同的网络是否合法......

有人可以帮我弄这个吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:44:04.240

您可以根据需要添加任意数量的网络。我希望您已经在 admob.com 上注册并在那里添加了您的网站/应用程序。

在“网站和应用程序”下查找“广告网络中介”并添加一个新的网络中介。

您可以从网络列表中选择，如果您的网络不在该列表中（我认为 Chartboost 不在），您可以选择“添加自定义事件”并将您的网络添加到该中介位置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T13:10:52.757

两者都显示是合法的；它被称为调解。如果调解对您来说仍然是一个陌生的概念，请浏览以下段落：

> 借助 AdMob 中介，您可以从多个来源向您的应用投放广告，包括 AdMob 网络、第三方广告网络和自家广告系列。AdMob 中介通过向多个网络发送广告请求以确保您找到最佳的可用网络来投放广告，从而帮助您最大限度地提高填充率并提高您的获利能力。

（来源： https: [//support.google.com/admob/answer/3124703](https://support.google.com/admob/answer/3124703)）

此外，我只是想通过说明 ChartBoost 现在已集成到 AdMob 来更新此线程（来源：[https](https://answers.chartboost.com/hc/en-us/articles/209756523-Mediation-AdMob) ://answers.chartboost.com/hc/en-us/articles/209756523-Mediation-AdMob ）

[![ChartBoost-AdMob 集成](../Images/20d0e4377c4092982b018ca6aa0289ef.png)](https://i.stack.imgur.com/JL9CS.gif)

# celery - Celery 在不到两周的时间内发送了 60 万个请求

> ID：14673380
> 
> 赞同：0
> 
> 时间：2013-02-03T14:12:58.683
> 
> 标签：celery, django-celery, amazon-sqs, celery-task

我今天收到了 Amazon SQS 的月度账单，我很惊讶地看到我的队列使用了 600.000 个请求。

我所做的只是每分钟运行一个任务。这如何增加 600.000 个请求？

```
@celery.task(name='tasks.check_for_events')
@periodic_task(run_every=timedelta(minutes=1))  
def check_for_events():    
    now = datetime.utcnow().replace(tzinfo=utc,second=00, microsecond=00)
    events = Event.objects.filter(is_reminder_sent = False).filter(reminder_date_time__range=(now - timedelta(minutes=1), now))    
    dthandler = lambda obj: obj.isoformat() if isinstance(obj, datetime) else None    
    for event in events:
          sendEmail.delay( ...)

@celery.task(name='tasks.sendEmail')
def sendEmail(...)
    .... 
```

我对芹菜还是新手，所以可能是我在做一些根本错误的事情。请问有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T16:52:53.800

首先，SQS 将发送、接收和删除视为请求。所以那是

```
>>> 600000 / 3
200000 
```

任务。

上个月有 31 天。因此，仅通过检查事件任务就有

```
>>> 60 * 24 * 31
44640 
```

任务或

```
>>> 44640 * 3
133920 
```

预先使用的请求。

现在，你只需要平均

```
>>> (200000.0 - 44640) / 44640
3.4802867383512543 
```

每个 check_for_events 调用的事件以达到 600k 个请求。

现在我不确定您正在处理多少事件，但也许这让使用更加深入。

# javascript - Jquery / javascript 显示下一张图片，隐藏上一张

> ID：14673383
> 
> 赞同：-2
> 
> 时间：2013-02-03T14:13:34.487
> 
> 标签：javascript, jquery, html

我在一个页面上有这个 html 并且想要隐藏第一个图像并在我单击图像链接时显示下一个图像链接，例如 #next 或 #previous。

这是html：

```
<tbody>
    <tr>
        <td valign="middle">
            <input type="image" style="border-width:0px;" src="previous.gif" id="previous">
        </td>
        <td></td>
        <td align="center">
            <img src="image1.jpg" class="image_in_collection">
            <img src="image2.jpg" class="image_in_collection">
        </td>
        <td></td>
        <td valign="middle">
            <input type="image" style="border-width:0px;" src="next.gif" id="next">
        </td>
    </tr>
</tbody> 
```

jsfiddle在这里：http: [//jsfiddle.net/ZU85R/2/](http://jsfiddle.net/ZU85R/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:16:19.653

您可以将 next() 选择器与 is(':visible') 选择器一起使用来实现此目的。 [http://api.jquery.com/next/](http://api.jquery.com/next/)

# cakephp - Configure::read() 的条件

> ID：14673384
> 
> 赞同：0
> 
> 时间：2013-02-03T14:13:42.630
> 
> 标签：cakephp, controller

我想选择一个帖子必须在我的“热门帖子”小部件上获得多少浏览量。为此，我使用我的控制器

```
public function menu() {
    return $this->Post->find('all', array(
                'limit' => 5,
                'order' => array('Post.id' => 'desc'),
                'conditions' => array('Post.hits >= 100'
                 )));
} 
```

它工作得很好。现在我想将我的号码（100）更改为

```
Configure::read('top_views'); 
```

但我不知道该怎么做：/有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:31:49.707

更改您的`menu`方法以获取具有默认值的参数，更新条件数组。

```
public function menu($hits = 100) {
    return $this->Post->find('all', array(
                'limit' => 5,
                'order' => array('Post.id' => 'desc'),
                'conditions' => array('Post.hits >=' => $hits) // here
                 ));
} 
```

然后你可以调用它并传入你喜欢的任何值：

```
$this->set('top_posts', $this->Post->menu(Configure::read('top_views'));
$more_than_500_hits = $this->Post->menu(500); 
```

这假设您的`menu`方法在您的`Post`控制器中，根据您自己的应用程序的需要进行调整。通常这种东西应该在模型中。

# c# - .NET 框架中的显式接口实现示例

> ID：14673387
> 
> 赞同：0
> 
> 时间：2013-02-03T14:14:19.010
> 
> 标签：c#, .net

一个类可以派生自一个或多个接口。

如果多个接口具有具有相同签名的方法，则该类必须显式实现接口的此类成员。

到目前为止，根据我的经验，我从未遇到过必须从具有相同签名的方法的接口派生的情况。

.NET 框架或任何公开可用的库中是否有任何显式接口实现的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:15:36.920

我认为最常见的情况是`IEnumerable`and `IEnumerable<T>`。

两者都声明了方法`GetEnumerator()`。

这就是为什么在实现时`IEnumerable<T>`你总是有两种`GetEnumerator()`方法来实现（`IEnumerable<T>`继承自`IEnumerable`）：

```
public IEnumerator<T> GetEnumerator()  // From IEnumerable<T> interface
{
    // Code
}

IEnumerator IEnumerable.GetEnumerator()  // From IEnumerable interface
{
    // Code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:17:06.747

[Dictionary<Key, Value>](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)显式实现`ICollection<KeyValuePair<Key,Value>>`. 实现泛型接口的类也很常见，例如`IEnumerable<T>`显式实现非泛型对应项。

# jquery - 在动画期间更改 jQuery 的动画持续时间

> ID：14673390
> 
> 赞同：7
> 
> 时间：2013-02-03T14:14:35.007
> 
> 标签：jquery, animation, jquery-animate, state, duration

`duration`是否可以在两个不同的值之间更改当前正在运行的 jQuery 动画？

我试图改变`duration`通过直接分配，但没有成功：

```
var timing = { duration: 4000 };
$(document).click(function (e) {
  timing.duration = 1000;
});

$('#foo').animate({top:200, left:200}, timing); 
```

...甚至，更改`fx.options.duration`in`step`方法不会影响正在运行的动画：

```
var state = false,
$(document).click(function (e) {
  state = true;
});

$('#foo').animate({top:200, left:200}, {
  duration: 4000,
  step: function(now, fx){
    if(state) fx.options.duration = 1000;
    console.log(fx.options.duration); // 1000
  }
}); 
```

这是一个可以玩的**[小提琴。](https://jsfiddle.net/5cdwc/)**任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T14:52:03.510

持续时间是按值传递的，而不是通过引用传递的。所以`animate`不存储对`duration`. 即使您更新了 jQuery`options.duration`内部使用的选项对象（通过引用传递），这意味着它将通过值传递。

作为快速修复，您可以停止动画并使用新的持续时间重新启动它 - 调整已经结束的动画部分。

您需要考虑您希望它的行为方式，例如当您将 4 秒动画加速到 3 秒后的 2 秒动画时。在下面的代码中，动画将立即生效。考虑一下，这可能不是您想要的，因为您可能真的关心速度，而不是持续时间。

下面的代码是一个粗略的草图，我不确定它是否准确，它在减少动画值时是否有效，或者它如何处理多个动画值。您也只能更改一次持续时间。

```
var state = false,
    duration = 8000;

$(document).click(function (e) {
    state = true;
    duration = 1000;
});
var animationCss = {top:200, left:200};
$('#foo').animate(animationCss, {
    duration: duration,
    step: function(now, fx){
        if(state) {
             $("#foo").stop();
             var percentageDone = (fx.now - fx.start) / (fx.end - fx.start) 
             var durationDone = fx.options.duration * percentageDone;
             var newDuration = duration - durationDone;
            if (newDuration < 0)
            {
                 newDuration = 0;   
            }
            $("#foo").animate(animationCss, { duration: newDuration})

        }
    }
}); 
```

[http://fiddle.jshell.net/5cdwc/3/](http://fiddle.jshell.net/5cdwc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-03T16:24:26.267

我可能有点迟到了，但由于我在尝试做同样的事情时最终来到这里，其他人也可能会这样做。

在`start()`回调中，jQuery 将动画对象作为参数传递，因此您只需将引用保存在某处，然后您可以在 `step()`回调中更改它。

就像是 ：

```
var animEnd = false; //this will be updated somewhere else 
var animObj;
$().animate({
        width: '100%'
    },
    {   
        start: function(animation){
            animObj = animation;
        },
        step: function(now, tween){
            if(!animEnd)
                //jquery set an interval of 13 but let's be safe
                animObj.duration += 30;

            //you can change the value of tween.pos aswell
        }
    }
); 
```

现在棘手的部分是 jQuery 在调用`step()`回调之前决定停止或继续动画。因此，持续时间是为下一个刻度设置的，如果设置的不够大，您的动画可能会停止。
jQuery 使用`setInterval()`间隔为 13，因此理论上`step()`应该每 13 毫秒调用一次，但由于没有任何保证，我认为持续时间应该至少增加 30 毫秒。
就我个人而言，我什至会选择至少 100 次。最好让动画运行时间过长（100 毫秒几乎不明显），而不是让它过早停止。

# excel - 如果相邻单元格在指定值之间，则设置单元格的文本

> ID：14673392
> 
> 赞同：1
> 
> 时间：2013-02-03T14:14:39.523
> 
> 标签：excel, excel-2013

我正在 Excel 2013 中处理学生评估表。我想根据另一个单元格的值设置单元格的显示文本

例如

如果单元格 H3 的值是从 0 到 5，则单元格 I3 应该显示“初学者”
如果单元格 H3 的值是从 6 到 10，则单元格 I3 应该显示“预中级”
如果单元格 H3 的值是从 11 到15、单元格 I3 应显示“中级”
如果单元格 H3 的值是从 16 到 20，则单元格 I3 应显示“高级”

实现这一目标的最佳方法是什么？谁能建议一个我可以在条件格式中使用的公式来实现这个结果？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:57:19.713

在单元格 I3 中输入公式（缩短文本以便于阅读）：

解决方案1：

```
=IF( H3<=5, "Beg", IF( H3<=10, "Pre", IF( H3<=15, "Int", "Adv" ) ) ) 
```

注意：负数为“初学者”，15岁以上为“高级”

解决方案2：

```
=CHOOSE( RoundUp( H3/5, 0 ) + 1, "Beg", "Beg", "Pre", "Int", "Adv")) 
```

注意：0-20 以外的值将显示为错误，第一个“Beg”是 0 值，第二个“Beg”是 1-5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T20:13:49.863

虽然仅在一个公式中有多种方法可以做到这一点（请参阅其他答案），但我强烈建议您将“业务逻辑”，即级别（“初学者”，...）与阈值分开一个单独的表格 - 然后`VLOOKUP`对其应用一个简单的公式！

这种方法的优点是，您可以使假设对用户（或管理员）透明，并且以后可以轻松地调整它们 - 无需接触（或用户甚至理解）公式！

为此，请将小假设表放在工作簿中的某个位置，例如在工作表*Thresholds*的 A&B 列中：

```
    AB
    ___ _______________
1 阈值水平
2 0 初学者
3 6 预中级
4 11 中级
5 16 高级

```

现在，您只需将以下公式放在您希望级别出现的单元格中：

```
=VLOOKUP(H3,阈值！$A:$B,2)

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:53:21.330

假设值列表从 A2 开始，在 B2 中键入以下公式：

```
=IF(AND(ISNUMBER(A2),A2>=0,A2<=20),LOOKUP(A2,{0,6,11,16},{"Beginner","Pre-Intermediate","Intermediate","Advanced"}),"INCORRECT VALUE") 
```

它将处理允许范围之外的数字，以及 EMPTY 单元格或非数字数据 -`INCORRECT VALUE`将为这些显示。

至于条件格式，您可以轻松地为所有等级应用着色以及返回的错误。祝你好运！

PS 示例文件已共享：[https ://www.dropbox.com/s/or37zkabe7ictoh/GradesLookup.xlsx](https://www.dropbox.com/s/or37zkabe7ictoh/GradesLookup.xlsx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-21T00:16:54.850

尝试这个

```
=INDEX(B$1:B$5, MATCH(H3,A$1:A$5)) 
```

# jquery - Jrating 和多重评分

> ID：14673393
> 
> 赞同：1
> 
> 时间：2013-02-03T14:14:43.547
> 
> 标签：jquery, rating

我正在尝试设置评级解决方案。我想我会使用 Jrating ( [http://www.myjqueryplugins.com/jquery-plugin/jrating](http://www.myjqueryplugins.com/jquery-plugin/jrating) )。

我只是想确定是否可以以一种形式获得多个评级？因为我有一个有 5 个不同费率的表格。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:23:39.373

由于演示页面上有多个评级：http: [//demos.myjqueryplugins.com/jrating/](http://demos.myjqueryplugins.com/jrating/) 我会勉强说是的，你可以有多个评级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:23:40.780

是的，这是可能的。即使您在 a 中使用它，它也与[演示页面](http://demos.myjqueryplugins.com/jrating/)`<form>`上的不同评级没有什么不同。

大多数 UI 库都允许您创建多个相互独立的元素。

对 jRating 的简要介绍表明它不直接使用表单元素 - 即您需要将代码放入`onSuccess`处理程序中以将数据发送到服务器。（例如通过设置隐藏输入元素的值。）由于您必须自己执行此操作，因此库不会与`name`输入字段的重复值发生任何冲突。

# python - python pandas从时间序列中提取唯一日期

> ID：14673394
> 
> 赞同：26
> 
> 时间：2013-02-03T14:14:50.067
> 
> 标签：python, datetime, dataframe, pandas, time-series

我有一个包含大量日内数据的 DataFrame，DataFrame 有几天的数据，日期不连续。

```
 2012-10-08 07:12:22            0.0    0          0  2315.6    0     0.0    0
 2012-10-08 09:14:00         2306.4   20  326586240  2306.4  472  2306.8    4
 2012-10-08 09:15:00         2306.8   34  249805440  2306.8  361  2308.0   26
 2012-10-08 09:15:01         2308.0    1   53309040  2307.4   77  2308.6    9
 2012-10-08 09:15:01.500000  2308.2    1  124630140  2307.0  180  2308.4    1
 2012-10-08 09:15:02         2307.0    5   85846260  2308.2  124  2308.0    9
 2012-10-08 09:15:02.500000  2307.0    3  128073540  2307.0  185  2307.6   11
 ......
 2012-10-10 07:19:30            0.0    0          0  2276.6    0     0.0    0
 2012-10-10 09:14:00         2283.2   80   98634240  2283.2  144  2283.4    1
 2012-10-10 09:15:00         2285.2   18  126814260  2285.2  185  2285.6    3
 2012-10-10 09:15:01         2285.8    6   98719560  2286.8  144  2287.0   25
 2012-10-10 09:15:01.500000  2287.0   36  144759420  2288.8  211  2289.0    4
 2012-10-10 09:15:02         2287.4    6  109829280  2287.4  160  2288.6    5
 ...... 
```

如何从上述 DataFrame 中提取日期时间格式的唯一日期？有类似的结果`[2012-10-08, 2012-10-10]`

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-03T14:41:41.570

如果你有一个`Series`喜欢：

```
In [116]: df["Date"]
Out[116]: 
0           2012-10-08 07:12:22
1           2012-10-08 09:14:00
2           2012-10-08 09:15:00
3           2012-10-08 09:15:01
4    2012-10-08 09:15:01.500000
5           2012-10-08 09:15:02
6    2012-10-08 09:15:02.500000
7           2012-10-10 07:19:30
8           2012-10-10 09:14:00
9           2012-10-10 09:15:00
10          2012-10-10 09:15:01
11   2012-10-10 09:15:01.500000
12          2012-10-10 09:15:02
Name: Date 
```

其中每个对象是一个`Timestamp`：

```
In [117]: df["Date"][0]
Out[117]: <Timestamp: 2012-10-08 07:12:22> 
```

您只能通过调用获取日期`.date()`：

```
In [118]: df["Date"][0].date()
Out[118]: datetime.date(2012, 10, 8) 
```

和 Series 有一个`.unique()`方法。所以你可以使用`map`和`lambda`：

```
In [126]: df["Date"].map(lambda t: t.date()).unique()
Out[126]: array([2012-10-08, 2012-10-10], dtype=object) 
```

或使用以下`Timestamp.date`方法：

```
In [127]: df["Date"].map(pd.Timestamp.date).unique()
Out[127]: array([2012-10-08, 2012-10-10], dtype=object) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:32:18.267

使用正则表达式：

```
(\d{4}-\d{2}-\d{2}) 
```

使用函数运行它`re.findall`以获取所有匹配项：

```
result = re.findall(r"(\d{4}-\d{2}-\d{2})", subject) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-17T11:32:29.160

只是给@DSM一个替代答案，看看@Psidom的另一个[答案](https://stackoverflow.com/a/42795010/12386297 "将熊猫系列时间戳转换为唯一日期列表")

它会是这样的：

```
pd.to_datetime(df['DateTime']).dt.date.unique() 
```

在我看来，它的表现要好一些

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-09T20:36:47.633

这是我在 Python 3.6.8 和 Pandas 1.1.5 上得到的：

```
%timeit df['date'].map(lambda d: d.date()).unique()

2.06 ms ± 135 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

%timeit df['date'].dt.date.unique()

535 µs ± 79.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)

%timeit df['date'].dt.normalize().unique()

1.33 ms ± 229 µs per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

输出`normalize().unique()`：

```
array(['2021-04-08T00:00:00.000000000', '2021-04-07T00:00:00.000000000',
       '2021-04-06T00:00:00.000000000', '2021-04-05T00:00:00.000000000',
       '2021-04-04T00:00:00.000000000', '2021-04-03T00:00:00.000000000',
       '2021-04-02T00:00:00.000000000', '2021-04-01T00:00:00.000000000',
       ..., dtype='datetime64[ns]') 
```

与其他 2 个的输出相比：

```
array([datetime.date(2021, 4, 8), datetime.date(2021, 4, 7),
       datetime.date(2021, 4, 6), datetime.date(2021, 4, 5),
       datetime.date(2021, 4, 4), datetime.date(2021, 4, 3),
       datetime.date(2021, 4, 2), datetime.date(2021, 4, 1),
       datetime.date(2021, 3, 31), datetime.date(2021, 3, 30),
       ..., dtype=object) 
```

# iphone - 从我自己的图像创建“地图”

> ID：14673401
> 
> 赞同：0
> 
> 时间：2013-02-03T14:15:21.773
> 
> 标签：iphone, ios, xcode, ipad

我有自己的 jpg，我想做这样的事情：

![](../Images/b9c0ec7b86258db3eaaa4bcd94d2324c.png)

声明区域，单击此类弹出窗口后将显示该区域。我怎样才能做到这一点？我试过地图视图，但我认为这是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:25:38.973

有很多方法可以完成，但您没有提供足够的细节来确定哪种方法最合适。（例如，您是否需要在单击之前或之后以图形方式显示这些“热点”区域等）。

要采用最基本的方法，您定义一个基于 CGRect 的对象数组，然后在触摸事件中测试触摸点是否在任何矩形内。

```
// many ways to define the rects
    NSMutableArray* hotspots; //this would be a @property declared elsewhere

// define 5 CGRects
    for (int i = 0; i < 5; i++) {
        NSValue *rectObj = [NSValue valueWithCGRect:CGRectMake(i * 10, 0, 44, 44)];
        [hotspots addObject:rectObj];
    } 
```

// 并测试命中：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Detect touch anywhere
    UITouch *touch = [touches anyObject];

    for (NSValue* rectObj in hotspots) {
        if (CGRectContainsPoint([rectObj CGRectValue], point)){
            //this is a hit so do something

            break;
        }
    }
} 
```

# c# - 设置 MDI-Parent Form 的可用区域

> ID：14673408
> 
> 赞同：2
> 
> 时间：2013-02-03T14:16:07.837
> 
> 标签：c#, .net, winforms, forms, mdiparent

我有一个`MDI-Parent`表单名称**`frmMain`**，我在其中加载了很多子表单。

**frmMain**在顶部有一个菜单，它覆盖了大约 1000*25 的空间。当子窗体加载时，它们可以出生在**frmMain**的任何位置，有时它们会在菜单后面。

有没有办法让**frmMain**认为不应使用此菜单下的空间（类似于表单区域）？或者我应该明确告诉子表格位于下方`height=25`？

![在此处输入图像描述](../Images/ac3d1648c0e2f63764ffc84b34d18dd3.png)

蓝色部分是菜单，在其上方，红色部分是面板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:17:28.620

我不知道这对您是否方便，但您可以`Panel/FlowLayoutPanel`在所需的子表单空间中添加一个到您的 Mdi 窗口，然后将表单添加到面板中，如下所示：

```
Form frm = New Form();
frm.TopLevel = False;
frm.Show();
FlowLayoutPanel1.Controls.Add(frm); 
```

设置`FlowLayoutPanel.BackColor`为`Transparent`使它看起来像一个 mdi 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:55:44.090

我认为没有办法做到这一点，您必须务实地为每个表单设置位置或将它们的`start up`位置设置为。`center parent`或者简单地使用`Child.ShowDialog()`而不是使用`Child.Show()`，显示对话框子窗口聚焦直到关闭。

# c# - 在 WPF 中实现 CheckBox 的 ListBox

> ID：14673409
> 
> 赞同：8
> 
> 时间：2013-02-03T14:16:11.273
> 
> 标签：c#, wpf, listbox

提前道歉，因为我知道这个问题已经出现了好几次。但是，我正在努力确定我自己的代码哪里出错了。只是在它们旁边寻找复选框和名称的列表。目前它编译正常，但 ListBox 是空的。

所有代码都在一个名为 ucDatabases 的控件中。

**XAML：**

```
<ListBox Grid.Row="4" ItemsSource="{Binding Databases}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <CheckBox Content="{Binding Name}" IsChecked="{Binding IsChecked}" Margin="5 5 0 0"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

**C#代码：**

```
 public ObservableCollection<CheckBoxDatabase> Databases;

public class CheckBoxDatabase : INotifyPropertyChanged
        {
            private string name;
            private bool isChecked;
            public Database Database;

            public bool IsChecked
            {
                get { return isChecked; }
                set
                {
                    isChecked = value;
                    NotifyPropertyChanged("IsChecked");
                }
            }

            public string Name
            {
                get { return name; }
                set
                {
                    name = value;
                    NotifyPropertyChanged("Name");
                }
            }

            public event PropertyChangedEventHandler PropertyChanged;
            protected void NotifyPropertyChanged(string strPropertyName)
            {
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs(strPropertyName));
            }
        } 
```

**填充一些测试数据的辅助方法：**

```
private void SetTestData()
    {
        const string dbAlias = "Database ";
        Databases = new ObservableCollection<CheckBoxDatabase>();
        for (int i = 0; i <= 4; i++)
        {
            var db = new Database(string.Format(dbAlias + "{0}", i));
            var newCBDB = new CheckBoxDatabase {Database = db, IsChecked = false, Name = db.Name};

            Databases.Add(newCBDB);
        }
    } 
```

建议和解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T14:34:19.807

`public ObservableCollection<CheckBoxDatabase> Databases;`是一个字段。

您应该将其替换为属性：

`public ObservableCollection<CheckBoxDatabase> Databases {get;set;};`

别忘了`INotifyPropertyChanged`！

# ruby - Sidekiq 工作人员的不同日志级别 - Ruby 方法？

> ID：14673414
> 
> 赞同：1
> 
> 时间：2013-02-03T14:16:47.030
> 
> 标签：ruby, logging, sidekiq

我有一个带有 Rails 应用程序、Sidekiq 和发条模块的运行环境，用于调度目的。

我有许多不同的工作人员，充满了 logger.debug 和 logger.info 指令，我偶尔需要激活其中一些工作人员的调试日志以了解发生了什么。我喜欢 Sidekiq 记录器，我想使用它，因为它只需要工人中的“logger.debug”指令来完成它的工作。

我目前的设置错过了为一些工作人员激活调试级别的可能性，而将其他工作人员留在标准信息中。

现在在我的每个工人中，我都有这个初始化方法：

```
class SendMailOnStart

   include Sidekiq::Worker
   sidekiq_options :retry => false, :queue => :critical

    def initialize
      logger.level = Logger::INFO
    end

    .... ... 
```

但是如果改变一个工人的级别，这个级别将被下一个指定的级别覆盖 - 例如，如果两个工人一起处理，第二个工人将“获胜”。

以优雅的方式实现这一目标的最佳方法是什么？

来自 Java 世界，我只想创建一个自定义记录器并将其放入每个工作人员中，复制 Sidekiq 记录器使用的输出格式，在每个工作人员中添加一个记录器方法，例如

```
def logger
  logger = MyLogger.new
end 
```

并在我需要时在初始化方法中更改级别

这是 Ruby 中最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T13:59:19.693

我有一个类似的问题，我发现这个线程更有用：

[根据来自 Sidekiq 或 Rails 的调用记录到不同的记录器](https://stackoverflow.com/questions/18112310/log-to-different-logger-based-on-call-from-sidekiq-or-rails)

您应该能够通过更改 Rails.logger 专门在此处提到的块中设置 Sidekiq 工作人员的日志级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:01:37.933

我不知道这是否是最好的方法，但我会做以下事情。首先，让我们准备函数来检索调用者的文件名和/或方法：

```
 def parse_caller
    # magic number 7 below is the amount of calls 
    #   on stack to unwind to get your caller
    if /^(?<file>.+?):(?<line>\d+)(?::in `(?<method>.*)')?/ =~ caller(7).first
      file      = Regexp.last_match[:file]
      line      = Regexp.last_match[:line].to_i
      method    = Regexp.last_match[:method]
      [file, line, method]
    end
  end 
```

然后我会覆盖实例的默认[格式化程序](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#attribute-i-formatter)，`Logger`强制它检查调用者：

```
 logger.formatter = lambda do |severity, datetime, progname, msg|
    f,l,m = parse_caller
    # HERE GOES YOUR CHECK
    if f =~ /…/
      …
    end
  end 
```

我知道这看起来很奇怪，但对我来说效果很好。

# android - 图书馆项目服务

> ID：14673415
> 
> 赞同：3
> 
> 时间：2013-02-03T14:16:53.780
> 
> 标签：android, service, manifest

我在图书馆项目中使用服务。当我启动服务（使用`context.startService(service)`）`onStart()`时，服务从未到达。我做错了什么，我有一些潜在的问题：

1.  我应该在哪个清单文件中声明服务（库项目或 APK 项目）？

2.  它是否与远程服务和 AIDL 有任何联系？我不太确定，但我 [在库中找到了这个答案 Android 服务，](https://stackoverflow.com/questions/5394121/android-service-in-library) 而且我必须在没有任何进程间通信 (IPC) 的同一个应用程序中创建 AIDL 似乎是有线的。

3.  我试图在我的 APK 项目中扩展库服务并在 APK 的清单文件中声明它 - 但仍然没有达到服务的 onStart()。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-03T14:23:53.753

[onStart()](http://developer.android.com/reference/android/app/Service.html#onStart%28android.content.Intent,%20int%29)方法在 API 级别 5 中已弃用，因此不会调用 android 2.0 或更高版本，`onStart()`您需要改为实现[onStartCommand(Intent, int, int)](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29) ..

更新：AS @David Wasser 指出了我的愚蠢错误.. 你能检查一下你没有覆盖 onStartCommand() 方法，或者你是否覆盖了 onStartCommand() 那么你是从它调用 super.onStartCommand() .. 请给我们看一些代码...

# c# - ASP.NET MVC 4 中 Controllers 目录中的文件夹

> ID：14673421
> 
> 赞同：7
> 
> 时间：2013-02-03T14:17:27.823
> 
> 标签：c#, asp.net-mvc-4

我是 ASP.Net MVC 4 的新手。我正在开发一个有很多路由的应用程序。考虑到这一点，我在控制器中遇到了命名冲突。因此，我决定将我的控制器拆分为多个控制器。为了保持干净，我觉得我需要将 Controller 类放在 Controllers 目录的子目录中。我的问题是：

1.  这甚至是一种选择吗？我似乎找不到这种方法的任何例子
2.  如何注册子目录中的控制器，以便当我在 RouteConfig.cs 文件中添加路由时，它们会利用子目录中的控制器？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T14:25:04.503

这是一个选项吗？确实。您可以将控制器放置在任何您想要的位置。MVC 将自动扫描程序集以查找控制器，并且它们是否仅放置在`Controllers`.

如果事情变得更复杂，并且您想要更好的组织，您可以利用`Areas`ASP.NET MVC 中的概念 - [http://msdn.microsoft.com/en-us/library/ee671793(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee671793(v=vs.100).aspx)

# c# - 我应该如何为我的变量添加同名前缀？

> ID：14673427
> 
> 赞同：2
> 
> 时间：2013-02-03T14:18:02.457
> 
> 标签：c#, winforms, naming-conventions

我正在用 C#创建一个基于[Windows 窗体的应用程序。](http://en.wikipedia.org/wiki/Windows_Forms)我的表单构造函数接受 parameter `string title`，然后将该值保存到`string this.Title`属性中，最后我创建了一个 windows label `Label this.Title`。

问题很明显：我的`Label`和`string`有相同的名字，而且我对 C# 中的命名约定很好奇。我该怎么办？

这是完整的代码：

```
// BNForm.cs
public partial class BNForm : Form
{
    public string Title;

    public BNForm(string title)
    {
        this.Title = title;
        InitControls();
    }
}

// BNForm.Designer.cs
partial class BNForm
{
    private Label Title;

    private InitControls()
    {
        this.Title = new Label();
        this.Title.Text = this.Title; // Trying to access the string here
        this.Title.AutoSize = true;
        this.Title.Location = new Point(15, 15);
        this.Controls.Add(this.Title); // Trying to access the Label here
    }
} 
```

我首先调用了我的标签变量`label_Title`，但后来我必须添加一个新变量：`Button[] Buttons`然后应该调用`buttonArray_Buttons`它，这对我来说听起来很愚蠢。

我应该怎样命名我的变量？这种命名是否有规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:48:59.513

不要使用前缀，因为它们被认为是不好的做法。只需使用常识。如何`titleLabel`改为调用您的标签字段？“按照锡上所说的做”......即它是明确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:38:53.037

好吧，首先我会远离仅因大小写而异的变量名称，通常这是一个巨大的可理解性问题。我倾向于在方法中使用 arg 前缀我的论点，但有些人不喜欢这样。

LblTitle 或一些等效的匈牙利符号是一种相当标准的方法。我尽量避免这种情况。例如，如果您想在文本框中显示标题，重命名所有内容或启用混淆模式怎么办。

在这种情况下，我会将 Title 属性重命名为 DisplayTitle 或将标签重命名为 TitleDisplay。

另一种选择是创建一个结构或类来保存标题属性然后你可以做

[this.]Title.Text = [this.]Setup.Title;

无论你做什么选择一个标准并坚持它，都是唯一的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:54:30.373

以下是变量命名中的几个注意事项以及针对不同控件的其他前缀指南。

做事

*   请使用有意义的名称来命名所有标识符，以描述其功能。
*   使用“m_”为成员字段添加前缀，但不要使用其他前缀（f 前缀、后缀等）
*   请使用英文名称命名所有标识符。
*   对命名空间、类型、枚举、方法名称使用 Pascal 大小写。
*   对参数、字段和局部变量使用驼峰式大小写。
*   一定要在所有接口前面加上 I。在所有异常类后面加上 Exception。
*   使用 Attribute 为所有属性类添加后缀。请使用 EventHandler 为所有事件处理程序添加后缀。
*   一定要使用大写的常量。

不要

*   不要使用匈牙利符号。
*   不要对任何长度超过两个字符的标识符使用大写（如上所述的常量除外）。
*   不要仅仅根据它们的大小写来区分标识符。
*   不要使用缩写或缩写。
*   不要使用业内不普遍接受的首字母缩略词。
*   不要对超过两个字符的首字母缩写词使用大写。
*   不要使用重复关键字或常用 .NET 命名空间的标识符名称。
*   不要为枚举、类、结构或委托名称添加前缀。
*   不要使用 Enum 为枚举类型添加后缀。

变量命名建议。只需根据对象类型为所有变量添加前缀：

*   按钮 - btn
*   复选框 - chk
*   组合框 - cmb
*   数据列 - dcol
*   数据网格 - dgrid
*   DataGridDateTimePickerColumn - dgdtpc
*   DataGridTableStyle - dgts
*   DataGridTextBoxColumn - dgtbc
*   对话框 - dlg
*   GroupBox - gbx
*   图像列表 - iml
*   标签 - lbl
*   列表框 - lbx
*   列表视图 - lv
*   主菜单 - 毫米
*   菜单项 - mi
*   MDI 框架 - frm
*   MDI-Sheet - sht
*   NumericUpDown - nud
*   面板 - pnl
*   图片框 - pbx
*   单选按钮 - rbt
*   SDI-表格 - 表格
*   状态栏 - stb
*   TabControl - 选项卡
*   TabPage - 选项卡
*   文本框 - txt
*   工具栏 - tbr
*   工具栏按钮 - 待定
*   定时器 - tmr
*   用户控制 - 用户
*   WindowsPrincipal - wpl
*   GridEX - gex
*   树视图 - 电视
*   UICommand - cmd
*   编辑框 - 编辑
*   数据视图 - 视图
*   数据表 - tbl
*   数据集 - ds

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:35:12.490

现在我知道更多了`C#`（并且“Antonijn”已经在评论中提到了它）我知道`private`成员变量应该以小写字母开头，`public`属性以大写字母开头。

记住这一点，我`public string Title;`保持原样，但标签变成了`private Label title;`让我将这两者分开的标签。感谢大家的回答，即使他们都没有帮助我解决这个确切的问题（好的建议，我只是不喜欢`lblTitle`等等），他们给了我更多的 C# 知识。

# entity-framework - 与自我的一对零或一关系

> ID：14673431
> 
> 赞同：1
> 
> 时间：2013-02-03T14:18:24.080
> 
> 标签：entity-framework

我有以下实体：

```
public class Category
{
  public int ID { get; set; }    
  public int? ParentID { get; set; }
  public string Name{ get; set; }
  public virtual Category Parent { get; set; }
} 
```

我试图定义一个关系： a`Category`可以有一个父类别。
我已经定义了主键：

```
HasKey(m => m.ID); 
```

我读过[这个](http://msdn.microsoft.com/en-us/data/jj591620.aspx)例子，其中包括一对零或一关系，但我无法准确理解`HasRequired`实体在关系中是可选的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:22:27.693

我认为一个附带的问题是您不能将完全相同的类引用到自身作为 EF 中的父级，您可以使用 Projection 以便为同一类型具有不同的属性。

子参考中的 HasOptional 与说我可能有父母或没有父母的效果相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:21:21.170

在您引用的示例中，一个孩子有一个`ParentId`既是主键又是外键的。当父母和孩子是不同的实体（和不同的数据库表）时，这是可以的，但当它们是自引用时则不行。`Category`必须有一个既是主要的又是外国的ID。但是主键应该是唯一的，因此实际上没有空间让 1:1 的孩子共享相同的键。

你能做什么？我认为唯一的选择是将关联映射为 1:n 并强制执行 n 不能大于 1 的业务规则。请注意，这不是 EF 限制。没有可以想象的关系数据库模型将自引用关联限制为 1:1。

# jquery - 将原型翻译成 jQuery？

> ID：14673437
> 
> 赞同：0
> 
> 时间：2013-02-03T14:19:00.697
> 
> 标签：jquery, http-headers, prototypejs

> **可能重复：**
> [在 Javascript 中访问 HTTP 标头？](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)

这将如何将此 PrototypeJS 代码转换为 jQuery？

```
 etag = response.getHeader("Etag") || 0;
 lm = response.getHeader("Last-Modified") ||
      'Thu, 1 Jan 1970 00:00:00 GMT'; 
```

# android - 绘图应用程序如何将绘图保存在 android 手机内存中

> ID：14673441
> 
> 赞同：0
> 
> 时间：2013-02-03T14:19:38.543
> 
> 标签：android, actionscript-3, png

我尝试以 png 文件格式保存。当我尝试发布到 android 手机时它不起作用。我不明白从文件夹到文件夹的安卓手机路径是如何工作的。我如何使它工作...

我尝试了相同的 Actionscript 3 并将其发布在我的电脑上，它可以工作....

请帮忙。抱歉语法不好。

```
function export():void
        {

        var bmd:BitmapData = new BitmapData(480, 800);

        bmd.draw(board);

        var ba:ByteArray = PNGEncoder.encode(bmd);

        var file:FileReference = new FileReference();

        file.save(ba, "MyDrawing.png");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:04:31.333

这是我在 Android 上保存图像的方式：

```
var file:File = File.applicationStorageDirectory.resolvePath("MyDrawing.png");
var stream:FileStream = new FileStream();
stream.open(file, FileMode.WRITE);
stream.writeBytes(ba, 0, ba.length);
stream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:47:54.150

为什么要将绘图保存在手机内存中？当内存大小超出时，您该如何解决？

无论如何参考这个链接，

[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# ruby-on-rails - 如何处理多个租户？

> ID：14673445
> 
> 赞同：0
> 
> 时间：2013-02-03T14:19:54.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前正在开发一个 Rails 3.2 网络应用程序，在这个应用程序上我将允许多个租户。换句话说，这是一种 SaaS 服务，公司可以在其中创建帐户。

每个公司可以有多个项目，而这些项目又可以有多个任务。我的简单问题是。我应该将 account_id 添加到项目和任务表中，还是仅在项目表中到期？我想同时使用两者的原因是安全性。

我知道我可以进行简单的关联并且效果很好，但是将 account_id 添加到所有子表是否更“安全”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:37:20.520

我最终使用了这个精美的 gem [https://github.com/ErwinM/acts_as_tenant](https://github.com/ErwinM/acts_as_tenant)。

# java - 有什么方法可以在运行时将字符串存储在 context.xml 中？

> ID：14673452
> 
> 赞同：0
> 
> 时间：2013-02-03T14:20:22.760
> 
> 标签：java, jakarta-ee, tomcat, context.xml

在我的网络应用程序的许多地方，我需要一个特定的字符串，它是：

```
request.getServletContext().getRealPath("/"); 
// I can only get this once the web-app starts 
```

有时一个简单的 java 类需要知道这个字符串。我不想每次都将这个字符串传递给类的函数。一种方法是将此字符串存储在 Web 应用程序一开始的文件中。每次我需要这个时，只需阅读文件即可。但这似乎不是一个很好的选择。还有其他出路吗？

可能是我可以存储在`context.xml`应用程序中。如果可能的话，我该怎么做？

如果有更好的方法请提出。

*我使用tomcat作为服务器。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:02:37.400

当您的应用程序启动时调用运行以下代码（例如使用[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)）：

```
public void contextInitialized(ServletContextEvent sce) {
   ServletContextRootRealPath.set(sce.getServletContext().getRealPath("/"));
} 
```

然后以后只要你需要它，你只需调用

```
ServletContextRootRealPath.get() 
```

由于它都是静态的，因此在此 JVM 中运行的每个代码都可以在 JVM 范围内访问该变量。

**实用程序类**

```
public final class ServletContextRootRealPath {
  private static String path;

  private ServletContextRootRealPath() {
    // don't instantiate utility classes
  }

  public static void set(String rootRealPath) {
    path = rootRealPath;
  }

  public static String get() {
    return path;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:48:32.360

您可以将值存储在任何类的静态变量中（基本上是一个用于提供通用实用程序功能的辅助类）。稍后您可以在不创建类实例的情况下引用此变量，因为它是静态的并且可以在没有其实例的情况下访问。

# sql - 各种值的 SQL 更新语句

> ID：14673453
> 
> 赞同：0
> 
> 时间：2013-02-03T14:20:27.130
> 
> 标签：sql, db2

我正在通过 sql for as400 对包含超过 200 亿条记录的文件执行更新。

```
 UPDATE "LIBRARY"/AR#RMTPRL9 
   SET SENTFLAG = ' ', DATESENT = '0001-01-01', TIMESENT = '00:00:00', XMITT# = 0, LOCATION = 'PACI175A', ARBATCH# = ' ‘ 
   WHERE LOCATION = 'PACI173A' AND ARBATCH# = 'PAR1981181' 
```

如何在单个查询中针对不同的 arbatch# 值运行此更新以节省时间？

例如：我想对 ARBATCH# 值 PAR19811284、PAR18736765 等使用相同的更新语句。

重新编辑：

我有以下数据：（将这些值移动到位置 EFG）

```
 LOCATION     ARBATCH#
  ABC          1234
  ABC          5468
  ABC          8765
  XYZ          6759
  XYZ          5432 
```

在这里，我想实现一个查询，该查询将对记录执行如下更新：

```
 UPDATE "LIBRARY"/AR#RMTPRL9 
   SET SENTFLAG = ' ', DATESENT = '0001-01-01', TIMESENT = '00:00:00', XMITT# = 0, LOCATION = 'EFG', ARBATCH# = ' ‘ 
   WHERE LOCATION = 'ABC' AND ARBATCH# = '1234' 
```

现在我怎么能成功地使用“in”来进行这样的更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:22:16.890

您可以使用`in`：

```
 UPDATE "LIBRARY"/AR#RMTPRL9 
   SET SENTFLAG = ' ', DATESENT = '0001-01-01', 
   TIMESENT = '00:00:00', XMITT# = 0, LOCATION = 'PACI175A', ARBATCH# = ' ' 
   WHERE LOCATION = 'PACI173A' AND ARBATCH# IN( 'PAR1981181', PAR18736765 etc ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:20:44.860

你可以很简单地“作弊”：

```
UPDATE "LIBRARY"/AR#RMTPRL9 
SET SENTFLAG = ' ', 
    DATESENT = '0001-01-01', TIMESENT = '00:00:00', 
    XMITT# = 0, 
    LOCATION = 'EFG', 
    ARBATCH# = ' ' 
WHERE (LOCATION, ARBATCH#) IN (VALUES ('ABC', '1234'),
                                      ('ABC', '5468'),
                                      ('ABC', '8765'),
                                      ('XYZ', '6759'),
                                      ('XYZ', '5432')) 
```

（语句在我的本地 iSeries DB2 实例上运行）

顺便说一句，`DATESENT`并且`TIMESENT`应该组合成一个时间戳，并且可能也可以为空。我个人更喜欢`sentAt`名称之类的东西，而不是包含列类型的东西。

# text - 首次分配创建后如何安全地修改 CCLabelBMFont 字符串？

> ID：14673455
> 
> 赞同：1
> 
> 时间：2013-02-03T14:20:34.383
> 
> 标签：text, cocos2d-iphone, label

我有一个名为 _label 的成员作为类中的 ivar 成员：

```
@interface CCHelloWorldLayer : CCLayer
{
  CCLabelBMFont *_label;
} 
```

在另一个代码块中：用这一行初始化：

```
_label = [CCLabelBMFont labelWithString:@"Testing " fntFile:fntName]; 
```

问题是这样的：如果我想修改它的文本我应该怎么做？我没有看到任何方法，例如：

```
[_label setString:@"Well.there is no such a method"]; 
```

如果我做

```
_label = [CCLabelBMFont labelWithString:@"Testing " fntFile:fntName];

_label = [CCLabelBMFont labelWithString:@"Well.there is no such a method"
         fntFile:fntName]; 
```

第一次内存分配是自动释放吗？重复调用 labelWithString 方法是否安全？（注意：我不在测试项目中使用 ARC。我不会。）

感谢您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:22:07.287

有一种`setString`方法，但它似乎是“私有的”。该`+labelWithString`方法确实创建了一个自动释放对象并且可以重复使用。看起来它创建了一个纹理，因此您希望每次都创建一个新纹理（而不是尝试修改它）。

不过，一般来说，如果您希望自动释放的对象继续存在，您应该在完成后继续使用`retain`它`release`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T19:12:51.717

```
[_label setString:@"Well.there is no such a method"]; 
```

这个方法是存在的，你可以这样称呼它。试试看，它有效。

该方法不是在类中声明的，而是在 CCLabelProtocol 中声明的。

# php - 注意：未定义的索引：C:\xampp\htdocs\ 中的 id

> ID：14673457
> 
> 赞同：-1
> 
> 时间：2013-02-03T14:20:47.217
> 
> 标签：php, indexing, undefined

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

我正在尝试使用 PHP 建立一个数据库，但我不断收到错误消息，说我在 id 中有一个未定义的索引。

我想将数据添加到我的数据库中，还能够更新、删除和显示信息。这是我的更新信息代码。

```
<?PHP
// Connection to MySQL
$dbconnection = @mysql_connect('localhost','root','');
if (!$dbconnection) {
echo '<p> Unable to connect to the database at this time.</br></br></p>';
exit();}
else {
echo '<p> connection to database is successful</br></br> </p>';}
//select Mysql Database-ijdb
if (!@mysql_select_db('disease')){
 exit('<p> Unable to locate the information on the database.</p>');
}

//Receive Variables from the GET of JOKELIST.php
if(isset($_POST['submit']))
{
$GeneticOrganisation=$_POST['newGeneticOrganisation'];
$ProteinInformation=$_POST['newProteinInformation'];
$Symptoms=$_POST['newSymptoms'];
$Population=$_POST['newPopulation'];
$Cure=$_POST['newCure'];
$OriginOfDisease=$_POST['newOriginOfDisease'];
$dmdid=$_POST['id'];
// Print receieved variables to check accuracy

 $sql= "UPDATE dmd SET GeneticOrganisation ='".$GeneticOrganisation."' WHERE id                
`='".$dmdid."'";
$sql= "UPDATE dmd SET ProteinInformation ='".$ProteinInformation."' WHERE id  ='".$dmdid."'";                                
 $sql= "UPDATE dmd SET Symptoms ='".$Symptoms."' WHERE id ='".$dmdid."'";
$sql= "UPDATE dmd SET Population ='".$Population."' WHERE id ='".$dmdid."'";
$sql= "UPDATE dmd SET Cure ='".$Cure."' WHERE id ='".$dmdid."'";
$sql= "UPDATE dmd SET OriginOfDisease ='".$OriginOfDisease."' WHERE id ='".$dmdid."'";
}
if (!@mysql_query($sql))
 echo "<p> Information could not be updated-".mysql_error();
 else{
echo "<p> Information updated successfully";
echo '<a href="diseaseInfo.php"> View the information on the disease here.';
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:25:52.310

听起来好像`$_POST['id']`没有设置。

您需要在使用它之前确保它已被设置，或者检查它是否已设置，如果未设置，则为其提供默认值。

例如：

```
if (isset($_POST['id'])) { // If the id post variable is set
    $dmid = $_POST['id'];
} else { // If the id post variable is not set
    $dmid = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:28:43.430

以下行最有可能导致它：

```
$dmdid=$_POST['id']; 
```

验证您的表单（或其他 POST 供应商）是否提供了“id”键。有类似的东西：

```
<input type="hidden" name="id"  value="xx"/> 
```

# iphone - 将 Dicom 图像转换为 jpg,png

> ID：14673471
> 
> 赞同：0
> 
> 时间：2013-02-03T14:22:33.653
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我必须将`DICOM`图像转换为任何可支持的格式，`UIImageView`例如 JPG、PNG 等。是否有任何框架可以在 iOS for iPad 中实现？

我发现 ITK 对此很有用，但我仍然不知道如何使用 ITK 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:31:15.103

我知道的唯一开源 DICOM 库是[Imebra](http://imebra.com)；它声称仅支持 Windows 和 OSX，但作为一个 C++ 库，我无法预见将其移植到 iOS 会遇到任何重大困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:11:03.023

有一个开源库“GDCM”，您可以查看此 ANS [How to display DICOM files in a view on iPhone](https://stackoverflow.com/questions/14642063/how-to-display-dicom-files-in-a-view-on-iphone)。

即使我没有尝试过自己，但似乎是正确的方法。

顺便说一句，您是否尝试过“Benjamin Mayo”的回答？imebra对你***有用吗？***

# java - TCP读取文件并在java中发送到客户端

> ID：14673472
> 
> 赞同：-1
> 
> 时间：2013-02-03T14:22:48.607
> 
> 标签：java, sockets, methods, tcp

让我解释一下我的工作。

我必须将文件从服务器发送到客户端。在服务器中，我接受了来自客户端的连接并且没有关闭连接。现在我必须将数据作为流发送到客户端。

现在我已经选择了一个内容并在方法中写入了一个文件。

我有发送方法，我必须将输入流中的文件发送到客户端。如何发送？

```
 public static void main(String args[]) 
{

    int port=5000;
    while(true)
    {
       try

    {
    ServerSocket ser=new ServerSocket(port+10);

    System.out.println("CLIENT A IS CONNECTED");

    ser.close();

    }
    catch(Exception e)
    {
        System.out.println(e);
    }
       try
    {
    ServerSocket ser1=new ServerSocket(port+20);

    ser1.accept();

    System.out.println("CLIENT B IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }
       try
    {
    ServerSocket ser2=new ServerSocket(port+30);

    ser2.accept();

    System.out.println("CLIENT C IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }
       try
    {
    ServerSocket ser3=new ServerSocket(port+40);

    ser3.accept();

    System.out.println("CLIENT D IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }

    }
} 
```

在主要方法中，我接受了所有客户端请求。

```
 private void jButton1ActionPerformed1(java.awt.event.ActionEvent evt) //sendbutton

    {
     try
     {
     FileReader buf=new FileReader("e:\\input.txt");

     int port= // the port of client which I selected to send the data
     try
     {

        @SuppressWarnings("resource")
        ServerSocket ser=new ServerSocket(port);
        Socket soc=ser.accept();
        BufferedReader toclient=new BufferedReader(buf);
        DataOutputStream dos=new DataOutputStream(soc.getOutputStream());
        System.out.println(dos.toString());

        dos.flush();
        dos.close();

    }
    catch(Exception e)
    {
    System.out.println(e);
    }
     }
     catch(Exception e)
     {
         System.out.println(e);
     }

    } 
```

现在我的问题是我已经打开了端口并且在 main 方法中建立了连接。我必须通过选择应该在 sendbutton 方法中接收数据的客户端来将数据从服务器发送到客户端。我很困惑如何检查或将套接字对象 serv1 传递给发送方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:58:13.563

下面是示例服务器代码（请添加相应的导入语句和您的逻辑）

```
class SampleServer
{
    private int port;
    private ArrayList clientList;   

    public SampleServer()
    {
        this.port = 4444;
    }

    public SampleServer(int port)
    {
        this.port = port;
    }

    public void startServer()
    {
        ServerSocket ss = new ServerSocket(this.port);
        Socket soc;
        while(true)
        {
            soc = ss.accept();
            clientList.add(soc);
        }
    }

    public ArrayList getClientList()
    {
        return clientList;
    }
} 
```

下面是示例 main 方法（以此作为参考并创建您自己的代码）

```
public class Main
{
    public static void main(String[] args) throws Exception
    {
        //Create a server
        //Server has to be only one and multiple clients can connect it
        SampleServer server = new SampleServer(5555);
        server.startServer();

        //Creating one client
        Socket soc = new Socket("localhost", 5555);

        //Similarly create n-number of clients and connect to the same port as that of server

        //server.getClientList(); will help you get the list of the clients connected to the server
    }
} 
```

# java - Perl, Inline_Java, Java 动态加载对象和方法

> ID：14673475
> 
> 赞同：2
> 
> 时间：2013-02-03T14:23:20.527
> 
> 标签：java, perl, inline-code

谁能帮助我如何动态加载对象 FooBar 并（动态）调用 roquet 函数？我在 Perl 中有这个片段：

```
#!/usr/bin/perl -w 
use Inline Java => << 'End_Of_Java_Code';
class FooBar {
  public FooBar(){}
    public void roquet() {
        System.out.println("HELLO!");
    }
}
End_Of_Java_Code

use Data::Dumper;
use Class::Sniff;
my $sniff = Class::Sniff->new({class=>'FooBar'});
my $num_methods = $sniff->methods;
my $num_classes = $sniff->classes;
my @methods     = $sniff->methods;
my @classes     = $sniff->classes;

my @unreachable = $sniff->unreachable;
foreach my $method (@methods) {
  if ( $method eq "roquet" ) {
    print "$method\n";
  }
} 
```

**我尝试了以下方法和变体** ：方法：

```
use Module::Load
my $package = "main::FooBar";
load $package;
$package->new();
$package->$rflmethod;//where rflmethod is the variable: $rflmethod='roquet'; 
```

湾。方法：

```
no strict 'refs';
use Package::Stash;
my $stash = Package::Stash->new('main::FooBar');
my $coderef = $stash->get_symbol('&__new');
$coderef->() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:27:26.063

这有效：

```
my ($class, $method) = qw(FooBar roquet);
my $f = $class->new;
$f->$method; 
```

# html - IE8 中只有屏幕没有接收到媒体查询

> ID：14673485
> 
> 赞同：1
> 
> 时间：2013-02-03T14:24:00.783
> 
> 标签：html, css, internet-explorer-8, stylesheet, media-queries

我正在对 IE8 进行一些测试，但我发现浏览器没有接收到我的媒体查询。在下面的示例中，`.telephone`该类始终被作为第二个类声明而不是第一个类声明，并带有边距底部。

我看不出这是什么原因，因为我的网站所基于的网站可以在 IE8 上正常运行。

我知道窗口肯定大于 640px。

```
<link rel="stylesheet" type="text/css" media="all" href="<?php echo 'http://' . $_SERVER['SERVER_NAME']; ?>/inc/css/style.css" />   
<link rel="stylesheet" type="text/css" media="all" href="<?php echo 'http://' . $_SERVER['SERVER_NAME']; ?>/inc/css/index.css" />           

@media only screen and (min-width:640px) {
    .telephone {
        padding-top:.75em;
            margin-bottom:.5em
    }
}

.telephone {
    display:block;
    font-size:1.5em;
    font-weight:normal;
    line-height:1;
    padding-top:.5em
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:26:13.183

基于屏幕宽度的屏幕媒体查询是从 IE9 开始支持的 CSS3 功能。IE8 及以下将看不到它们，因为它们不支持该功能。[媒体查询的caniuse](http://caniuse.com/css-mediaqueries)参考。

您将需要使用 JavaScript polyfill，例如[Respond.js](https://github.com/scottjehl/Respond)，或者如果您使用的是 jQuery，您可以[编写自己的函数](http://www.venveo.com/articles/view/quick-tip-jquery-media-queries)来执行类似的操作。如果不使用 jQuery，我相信您可以使用类似的函数对普通 JavaScript 执行相同操作，其中将使用 window.onload 和 window.onresize 代替 $(window).load() 和 $(window).resize()，并使用 window.innerWidth 而不是 $(window).width()。

# ruby-on-rails - RoR - NameError: uninitialized constant Info / NameError: undefined local variable or method 'info' for main:Object

> ID：14673489
> 
> 赞同：0
> 
> 时间：2013-02-03T14:24:16.090
> 
> 标签：ruby-on-rails, ruby

在完成了四个 RoR 教程之后，我更加困惑，因为他们从来没有解释*为什么*事情会以某种方式编码，以及为什么没有为什么，我所学的只是如何——我认为这不是一个好的编码器。今天早上我决定构建一个允许用户输入信用卡信息的小应用程序——信用卡号、信用卡代码和文本框中的地址（这部分我还没有完成）。根据教程，他们倾向于从数据库端开始。到目前为止我的步骤：

步骤 1\. 创建应用程序。

Step 2\. 执行“rails generate model info”

步骤 3\. 在 db\migrate 文件夹中，这创建了一个格式为 timestamp_create_infos 的文件。我在文件中输入了如下代码：

```
class CreateInfos < ActiveRecord::Migration
  def change
    create_table :infos do |t|
      t.integer :ccnumber
      t.integer :cccode
      t.text :address
      t.timestamps
    end
  end
end 
```

根据各种文章，这应该使用我上面列出的值及其在 sqllite 中的各种类型构建一个表。我认为类比，所以我认为在 SQLServer 中创建一个数据库（如果这个假设是错误的，请纠正我）：

```
CREATE TABLE info (
  ccnumber BIGINT,
  cccode INT,
  address VARCHAR(50)
) 
```

第 4 步：在 app\models 文件夹中，我编辑了文件“info.rb”，如下所示：

```
class Info < ActiveRecord::Base
  validates :ccnumber, :presence => true, :length => {minimum:16}
  validates :cccode, :presence => true, :length => {minimum:3}
  validates :address, :presence => true
end 
```

此时，大多数教程（通常构建博客或 Twitter 克隆）将通过执行 IRB 来“测试”事物。例如，他们通常会尝试创造一个新的价值。但是，当我使用以下两种方法之一这样做时：

```
c = Info.new
c = info.new 
```

我收到此错误：

```
NameError: uninitialized constant Info / NameError: undefined local variable or method 'info' for main:Object 
```

也许代码是错误的，或者涉及到另一个步骤，但我遵循与这些教程相同的模式 - 这就是为什么我在完成其中几个之后，我试图自己构建一些新的东西，因为他们的方法缺乏为什么。

例如（如果我错了，请纠正我），在构建新应用程序时，是否应该先运行 rails 生成模型信息？或者，这会在以后产生其他错误。此外，如果数据库是第二个构建的（我假设是这样，因为任何引用数据库的应用程序都需要一个数据库才能引用它） - 我在这里假设我在 migrate 文件夹中构建的数据库不正确，但是还有什么不是调用这些值的吗？

最后，我尝试在此示例中创建一个“空白”值以接收与验证相关的错误（显然，新的缺少值，它将需要）。即使我尝试使用正确的值（在这种情况下为最小值和存在）初始化一个新的，它仍然是这些错误（尽管如果我尝试 c = Info.new 与 c = info.new 它们会有所不同）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:32:59.400

您需要在 中进行测试`rails console`，这会加载您的 Rails 环境，包括模型。要实例化模型，您将使用类名，`Info`：

```
info = Info.new # Or supply arguments...
info = Info.new(address: "I am an address", cccode: 42) 
```

您需要`save`/ `save!`it 才能在数据库中看到它，但创建一个新实例将触发您的验证。在控制台中使用`save!`可能是一个更好的主意，因此您会看到任何异常。

除非您手动包含所有内容，否则在“原始”中运行`irb`将不包含任何与 Rails 相关的内容，这将是乏味且容易出错的。

# c# - Stonefield 查询 Web 应用程序无法发布

> ID：14673490
> 
> 赞同：0
> 
> 时间：2013-02-03T14:24:29.377
> 
> 标签：c#, asp.net, iis

我在 IIS 上发布我的 Web 应用程序时遇到问题。我正在使用使用`SQProxyWrapper`组件的 Stonefield 查询工具。

当我在 IIS 上发布页面时，出现此错误：

> 异常详细信息：System.UnauthorizedAccessException：检索具有 CLSID {F83BAE78-C971-4083-B191-64AE6790104E} 的组件的 COM 类工厂失败，原因是以下错误：80070005。
> 
> [UnauthorizedAccessException：检索具有 CLSID {F83BAE78-C971-4083-B191-64AE6790104E} 的组件的 COM 类工厂失败，原因是以下错误：80070005。] SQProxyWrapper.SQProxy..ctor() +26

我相信组件'SQProxyWrapper'被阻止了。Stonefield 查询使用 2 个 dll SQProxyWrapper.dll 和 SFQWrapper.dll 。在将 Web 应用程序发布到 IIS 之前，我需要对这 2 个 dll 做些什么吗？

我试图将整个文件和文件夹的安全性设置为所有人都可以完全访问但没有运气我仍然遇到同样的错误。

# appjs - 如何打包我的 appjs 应用程序？

> ID：14673496
> 
> 赞同：1
> 
> 时间：2013-02-03T14:25:13.637
> 
> 标签：appjs, software-packaging

我正在尝试为我的 appjs 应用程序发布一个包，但最终用户似乎没有任何简单的方法可以在没有终端的情况下“运行”应用程序。

无论如何，这样做是万无一失的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:27:07.317

所以我找到了一种简单的方法来做到这一点，不一定是最简单的方法，但它确实有效。

# 操作系统

我使用[这个 bash 脚本](http://mathiasbynens.be/notes/shell-script-mac-apps)将我的文件夹转换为 .app 文件夹（这显然是 OSx 所需要的）

# 视窗

在 Windows 上，我使用[IsTools](http://sourceforge.net/projects/istool/)创建我的 in/un-staller 和快捷方式。

# Linux

我还没有找到在 Linux 上执行此操作的简单方法，但我们在 Linux 上没有客户群，所以没关系。然而，我发现[了这一点](http://www.webupd8.org/2010/01/how-to-create-deb-package-ubuntu-debian.html)，但它似乎非常令人费解。暂时不打扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:48:50.657

如果您从[http://appjs.org/#download](http://appjs.org/#download)下载适用于您平台的可分发文件。然后它包含一个启动脚本——windows 的 app.exe 和 linux / mac os 的 app.sh，它可以在没有控制台的情况下启动所有内容。

appjs 还有一个附加功能，它将 appjs 安装为平台功能（而不是在您分发的每个应用程序中都拥有整个运行时）。使用它，您可以将应用程序编译成单个文件，然后您可以将其分发给最终用户。此功能正在积极开发和改进中。[http://appjs.delightfulsoftware.com/](http://appjs.delightfulsoftware.com/)。另请参阅 Windows 的屏幕截图之旅：http: [//appjs.delightfulsoftware.com/win.htm](http://appjs.delightfulsoftware.com/win.htm)和 ubuntu linux：[http](http://appjs.delightfulsoftware.com/ubuntu.htm) ://appjs.delightfulsoftware.com/ubuntu.htm 。

/西蒙

# ruby-on-rails - Rails AJAX 表单一直呈现为 HTML

> ID：14673499
> 
> 赞同：0
> 
> 时间：2013-02-03T14:25:39.033
> 
> 标签：ruby-on-rails, jquery, ujs

我正在尝试向基本表单添加一些 ajax，尽管它一直呈现为 html

OpponentsController#create 作为 HTML 处理

我的观点

```
<%= form_for(@opponent, :remote => true, :url => { :controller => "opponents", :action => "create" }) do |f| %>
  <% if @opponent.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@opponent.errors.count, "error") %> prohibited this opponent from being saved:</h2>

      <ul>
      <% @opponent.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

控制器

```
# POST /opponents
  # POST /opponents.json
  def create
    @opponent = Opponent.new(params[:opponent])

    respond_to do |format|
      if @opponent.save
        format.html { redirect_to(opponents_url,
                                  :notice => "#{@opponent.name}  was successfully created.") }
        format.js { render }
      else
        format.html { render :action => "new" }
        format.json { render :json => @opponent.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

创建.js.erb

```
alert('Hello Rails');

enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:04:44.053

AJAX 表单要求您加载 jquery 和 jquery_ujs。确保将它们包含在应用程序布局标题或 application.js 文件中，如下所示：

```
# application.js
//= require jquery
//= require jquery_ujs 
```

# delphi - 从 .zip 存档中读取/写入文件

> ID：14673500
> 
> 赞同：0
> 
> 时间：2013-02-03T14:25:44.527
> 
> 标签：delphi, zipfile, delphi-xe3, read-write

我应该使用存档文件中的文件吗？（读 - 写）。通过以下代码，我得到了我需要的文件列表。

```
Zip := TZipFile.Create;
  try
    Zip.Open(FilePath, TZipMode.zmRead);
    For File_Name in Zip.FileNames do
    begin
      //some code
    end;
  finally
    Zip.Close;
    FreeAndNil(Zip);
  end; 
```

我使用[TZipFile.Read](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Zip.TZipFile.Read)方法从 .zip 存档中读取文件。

此方法将文件的完整内容返回到 TByte 类型的缓冲区中。但只需要从头读取一个 1MB 的文件，而不是完整的文件。

读取和分析一个 1MB 文件后，如果需要，应读取完整文件并对文件进行更改并重新保存文件以存档。

程序的内存和速度非常重要。我用SetLength函数来设置缓冲区大小，可惜文件文件的完整内容都存放在缓冲区中。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:48:01.567

使用`TZipFile.Read()`返回 a`TStream`而不是 a的重载版本`TBytes`。这样，您不必将整个文件读入内存，并且可以根据需要仅读取其开始字节。

不幸的是，无法使用 .zip 文件修改 zip 存档中的数据`TZipFile`。尽管您可以`Extract()`根据需要在外部修改特定文件，然后`Add()`将其重新转换`TZipFile`为`TZipFile`. `TZipFile`是一个简单的框架，它只能读取一个 zip 存档并向其中添加新文件，没有别的。如果您需要对 zip 存档进行更多控制，最好使用更完整的第三方解决方案，例如 ZipForge。

# java - 删除 SOAPBodyElement 上的正文属性/前缀，我该怎么办？

> ID：14673512
> 
> 赞同：1
> 
> 时间：2013-02-03T14:26:39.693
> 
> 标签：java, soap

我想收到如下所示的消息：

```
<?xml version="1.0" encoding="UTF-8"?>
<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope"
 xmlns="http://website.com/">
   <S:Header/>
   <S:Body>
      <subscriberCreate>
         <assignedId>Some ID</assignedId>
      </subscriberCreate>
   </S:Body>
</S:Envelope> 
```

但收到一条看起来像这样的消息（想要在subscriberCreate 之后摆脱 xmlns=""）：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope"
     xmlns="http://website.com/">
    <S:Header/>
        <S:Body>
            <subscriberCreate xmlns="">
                <assignedID>Some ID</assignedID>
            </createSubscriber>
        </S:Body>
    </S:Envelope> 
```

有谁知道该怎么做才能解决这个问题？body 元素是否继承信封的属性，因为当我更改它们的顺序时，消息消失了！谢谢！

我的 Java 代码如下所示：

```
import java.io.FileOutputStream;

import javax.xml.soap.MessageFactory;
import javax.xml.soap.SOAPBody;
import javax.xml.soap.SOAPBodyElement;
import javax.xml.soap.SOAPConstants;
import javax.xml.soap.SOAPEnvelope;
import javax.xml.soap.SOAPMessage;
public class CreateSubscriber {

    public static void main(String[] args) {

        try{

            SOAPMessage sm = MessageFactory.newInstance(SOAPConstants.SOAP_1_2_PROTOCOL).createMessage();

            SOAPEnvelope env = sm.getSOAPPart().getEnvelope();
            env.setPrefix("S");
            env.removeNamespaceDeclaration("env");
            sm.getSOAPHeader().setPrefix("S");
            SOAPBody body = sm.getSOAPBody();

            body.setPrefix("S");

            SOAPBodyElement element = body.addBodyElement(env.createName("createSubscriber"));
            env.setAttribute("xmlns","http://psm.proceranetworks.com/soap/3.1/message");
            element.addChildElement("assignedID").addTextNode("Some ID");

            FileOutputStream fOut = new FileOutputStream("SoapMessage.xml");
            String stdEncode = "<xml version= 1.0 encoding= utf-8>";
            System.out.print(stdEncode);
            sm.writeTo(System.out);

            fOut.write(stdEncode.getBytes());
            sm.writeTo(fOut);

            System.out.println();

            System.out.println("SOAP msg created");
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:50:30.223

编辑：

我尝试了您的代码，但您缺少引号和 de '？在您的结尾字符串中：

```
String stdEncode = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"; 
```

# php - PHP用户定义的函数没有被调用？

> ID：14673513
> 
> 赞同：0
> 
> 时间：2013-02-03T14:26:46.933
> 
> 标签：php, user-defined-functions

我有一个网页，我有一个 session_check 文件，用于检查会话变量。我`require 'session_check.php'`在需要的网页顶部添加了。我也曾经`echo`检查过`session_check.php`文件是否被调用。

我在 session_check.php 中有一个函数，它在注销时被调用，但它永远不会被调用。你能帮帮我吗？谢谢 ：）

*代码`session_check.php`*：

```
<?php
    //Database Connection 
    $db_host = $_SERVER['DB_HOST'];
    $db_uname = $_SERVER['DB_UNAME'];
    $db_pwd = $_SERVER['DB_PWD'];
    $db_name = $_SERVER['DB_DB'];

    $db_link = mysql_connect($db_host,$db_uname,$db_pwd);
    if(!$db_link){
        die("Could Not Connect:".mysql_error($db_link));
    }
    mysql_select_db($db_name, $db_link) or die('Can\'t use db:'. mysql_error($db_link));

    //Logout function
    function user_logout($uname){
        $query = "UPDATE user SET last_used_token='' WHERE username='$uname'";
        mysql_close($db_link);
        session_destroy();
        header('Location:index.php');
        exit(); 
    }

    //Getting session variables
    session_start();
    session_regenerate_id();
    $cur_authkey = $_SESSION['authkey'];
    $uname = $_SESSION['username'];

    //Session data checking 

    $query = "SELECT last_used_token FROM user WHERE username='$uname'";
    $result = mysql_query($query, $db_link) or die('Error while updating auth key <br /> Query:'.$query.'MySQL error no:'.mysql_errno().'<br /> MySQL error:'.mysql_error($db_link));
    $row = mysql_fetch_assoc($result);

    if($cur_authkey != $row['last_used_token']){
        user_logout($uname);
    }   

?> 
```

*调用网页的部分代码*

```
<?php
    require 'session_check.php';
    mysql_close($db_link);
?>
<!DOCTYPE html>
<html>.....</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:11:59.703

我写了下面的代码正在工作。参考这些代码，你会得到解决方案。如果你想使用 require() 方法从第一页调用第二页，只需在第一页调用 require(secondpage url) 并删除行 session_start () 在第二页。

第一页（samplephp.php）

```
<?php
session_start(); 
$_SESSION['host']="localhost";
$_SESSION['dbusername']="root";
$_SESSION['dbname']="userinfo";
$_SESSION['username']="testuser";
$_SESSION['authkey']="1";
?>

<!DOCTYPE html>
<html><head></head><body>test<form action="session_check.php"><input type="submit" value="click here"></form></body></html> 
```

第二页（session_check.php）

```
 <?php
    session_start(); 
        //Database Connection 
        $db_host = $_SESSION['host'];
        $db_uname =$_SESSION['dbusername'];
        $db_pwd = "";
        $db_name = $_SESSION['dbname'];

        $db_link = mysql_connect($db_host,$db_uname,$db_pwd);
        if(!$db_link){
            die("Could Not Connect:".mysql_error($db_link));
        }
        mysql_select_db($db_name, $db_link) or die('Can\'t use db:'. mysql_error($db_link));

        //Logout function
        function user_logout($uname,$db_link){
            $query = "UPDATE usertable SET flag=1 WHERE username='$uname'";
            mysql_query($query, $db_link);
            mysql_close($db_link);
           session_destroy();
           echo "success";
            //header('Location:index.php');
            exit(); 
        }

        //Getting session variables
        session_regenerate_id();
        $cur_authkey = $_SESSION['authkey'];
        $uname =$_SESSION['username'];
        //Session data checking 

        $query = "SELECT flag FROM usertable WHERE username='$uname'";
        $result = mysql_query($query, $db_link) or die('Error while updating auth key <br /> Query:'.$query.'MySQL error no:'.mysql_errno().'<br /> MySQL error:'.mysql_error($db_link));
        $row = mysql_fetch_assoc($result);
        if($cur_authkey != $row['flag']){
           user_logout($uname,$db_link);
        }    
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:29:24.540

在第一个标签`session_start()`之后的代码开头使用`<?php`

# linux - 将“Ctrl+Up”重新映射为 5“Up”，将“Ctrl+Down”重新映射为 5“Down”

> ID：14673515
> 
> 赞同：4
> 
> 时间：2013-02-03T14:26:55.327
> 
> 标签：linux, xmodmap

虽然 Ctrl+Left/Right 通常映射到将光标向左/右移动一个单词，但 Ctrl+Up/Down 通常不会映射到 Linux 应用程序中的任何内容。本着同样的精神，我想将 Ctrl+Up/Down 重新映射为 5 次重复的 Up/Down 键。有什么方法可以使用`xmodmap`或通过 XKB 配置来做到这一点？我已经用 XKB 做了一些非常自定义的东西（我的正确 Alt 是 Overlay2），但我不知道从哪里开始能够为一个事件/键发送多个事件/多个键。

作为一种解决方法，我可以在 vim 中执行此操作：

```
(n/i/v)map <C-Up> <Up><Up><Up><Up><Up>
(n/i/v)map <C-Down> <Down><Down><Down><Down><Down> 
```

但是，让它在 gedit 和 eclipse 中也能工作对我来说是一个足够好的解决方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T14:02:31.720

你可以用`xbindkeys`这个。您需要使用X会话编写一个并启动XbIndkeys（如果它有一个） ，`.xbindkeysrc`您可以使用或使用DM / WM中的相应选项）。您将需要一些东西来将密钥发送到 X 程序。我从包中使用，但您也可以使用类似的东西（例如[这里](https://unix.stackexchange.com/questions/11182/mapping-key-combination-with-xmodmap)）。`.xinitrc``.xsession``xte``xautomation``xmacro`

在你的`.xbindkeysrc`你写这样的东西：

```
"xte 'keyup Control_L' 'keyup Control_R' 'key Up' 'key Up' 'key Up' 'key Up' 'key Up'"
     Control + Up 
```

同样的事情`Control + Down`（需要示例中的换行符）。这将释放控制键（如果您不想以无限向上结束，这很重要），然后按 5 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T22:38:03.840

根据 Trudberts 的回答，我最终得到`.xbindkeysrc`以下结果：

```
"xte 'keyup Control_L' 'keyup Control_R' 'key Up' 'key Up' 'key Up' 'key Up' 'key Up' 'key Up' 'keydown Control_L'"
    Control + Up
"xte 'keyup Control_L' 'keyup Control_R' 'key Down' 'key Down' 'key Down' 'key Down' 'key Down' 'key Down' 'keydown Control_L'"
    Control + Down 
```

这解决了两件事。首先，如果按住控制，每次按下 Up/Down 都会让它移动五行（而不是四行），并且在第一次按下后它也可以工作（Trudbert 的回答没有）。

有两个问题。Control_R 不能很好地工作，按住 Ctrl+Up 不会自动重复该键，类似于按住 Up 的工作原理。我将奖励 Trudbert 赏金，但在此期间结束时。

与此同时，希望有人会提出如何解决这个问题的想法。我正在考虑一个自定义脚本，它会不断重复 5 Up 直到有发布事件。

# mongodb - 结合 MongoDB 和像 Neo4J 这样的 GraphDB

> ID：14673521
> 
> 赞同：2
> 
> 时间：2013-02-03T14:28:10.387
> 
> 标签：mongodb, graph, neo4j

作为我正在开发的 CMS 的一部分，我将 MongoDB 作为主要数据存储，它提供给 ElasticSearch 和 Redis。所有这些都是以授权方式配置的。

我目前正在尝试在 JSON（某种 DSL）中开发一个声明性 api，当它实现时，将使我能够在 JSON 中编写统一的查询，但在后端，这些数据存储协同工作以得出结果。如果你愿意的话，联合搜索。

现在，在充实此 Json api 支持的查询类型时，我遇到了当前设置不（有效）支持的一类查询：基于图形的查询，如朋友之友、RDF 查询、等等我也想支持的东西。

所以我正在寻找一种将 GraphDB 引入这个生态系统的最合适的方法。我可能应该说应用层位于 Node.js 中。

我遇到过很多比较 Neo4J（一种流行的 GraphDB）与 MongoDB 的文章，但实际上并没有太多的实际用例，以及两者相辅相成的现实世界场景。

任何指针高度赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T15:45:18.507

您可能想看看 structr[1]，它有一个 RESTful 图形数据库后端，您可以使用 Java bean 进行配置。在未来的版本中，将有一个仅使用 REST 调用的配置选项，以便您可以启动 structr 服务器并将其配置和用作独立的图形数据库后端。

只需在 Twitter 上或通过电子邮件联系我们。

（免责声明：我是 structr 的开发者之一，所以这个评论可能不是 100% 公正的 :)）

[1] [http://structr.org](http://structr.org)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T18:01:14.253

数据库非常互补。

使用 MongoDB 存储您的原始数据/记录系统，并将原始数据加载到 Neo4j 中以获取更多见解/分析。当您处理非结构化数据时，您希望将信息存储在有利于非结构化数据的数据存储中 - MongoDB 符合要求（与其他类似的 NOSQL 数据库一样）。虽然 Neo4j 被认为是一个 NOSQL 数据库，但它不适合非结构化数据。因为您必须确定什么是关系、什么是节点以及为每个节点存储哪些属性 - 当您拥有半结构化数据并了解您想要执行的分析类型时，它更适合。

一个伟大的架构是将您的非结构化数据存储在 MongoDB 中，并使用作业将它们加载到 Neo4j 中。如果您发现要在图表中存储新信息以进行额外分析，这允许您重新加载图表。

它们绝对不是彼此的替代品。它们适合非常不同的用例。

# objective-c - 当指针设置为 nil 时，ARC 不会解除分配（使用工厂方法）

> ID：14673523
> 
> 赞同：2
> 
> 时间：2013-02-03T14:28:34.600
> 
> 标签：objective-c, cocoa, automatic-ref-counting

编辑：下面定义的问题实际上发生在这段代码中：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool
    {
        XYZPerson *myPerson = [XYZPerson person];
        myPerson = nil;
        NSLog(@"The end.");
    }
} 
```

方法“人”是工厂方法。

* * *

我有以下代码：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool
    {
        XYZPerson *myPerson = [[XYZPerson alloc] init];
        myPerson = nil;
        NSLog(@"The end.");
    }
} 
```

XYZPerson 覆盖了 dealloc 方法，以便它使用 NSLog 打印出一些东西。我希望上面的代码输出如下内容：

```
Dealloc!
The end. 
```

但这并不像我预期的那样：

```
The end.
Dealloc! 
```

我做错了什么还是我误解了 ARC 的概念？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T21:27:07.413

ARC 保证对象将在编译时自动进行引用计数。它更进一步，并要求代码在算法上完全一致（这在尝试转换时表现为错误，例如，`void*`通过`id`强制转换——在 ARC 下，您必须在此类强制转换中限定内存管理策略）。

ARC 不是垃圾收集器；没有扫描，没有线程，也没有停止世界的行为。这意味着以自动循环检测等为代价的行为更加可预测。

虽然 ARC 保证对象的生命周期将被自动管理，但 ARC 不保证“对象的生命周期至少与代码中使用的时间一样长，甚至可能更长”。

事实上，您可能会看到生命周期的变化取决于代码的优化级别以及您调用的工厂方法是否在 ARC 与手动保留发布 [MRR] 源文件中编译。并且生命周期可能会随着编译器和/或运行时的版本而改变。

例如，调用工厂方法的 ARC 代码有时会使整个方法短路`autorelease`。

听起来很吓人，但这不是因为算法一致性要求。由于不能存在模棱两可的行为（就像在普通的旧 MRR 中那样），生命周期可能会随着版本的变化而改变，这*不会*影响您的代码。

当然，这意味着您**不应该**`dealloc`在方法之间存在顺序依赖关系。这不应该是一个繁重的要求，因为`dealloc`在 MRR 下的方法之间存在顺序依赖总是一件令人讨厌的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-15T22:37:29.497

这是因为 ARC 仍然尊重 Cocoa 内存管理命名约定。您可以像这样向您的工厂方法添加属性`person`：`+ (instancetype)person __attribute__((objc_method_family(new)));`因此 ARC 假定它返回的对象带有一个递增的保留计数，该保留计数需要与相应的版本平衡。然后在将变量设置为 nil 后立即发生 dealloc。

# ruby-on-rails-3 - Rails 不能自动映射“y”结尾的复数模型，有可能吗？

> ID：14673532
> 
> 赞同：2
> 
> 时间：2013-02-03T14:29:14.440
> 
> 标签：ruby-on-rails-3, routes, mapping, models, pluralize

在我的 rails 应用程序中，我添加了 model `TreeNursery`，然后添加到 routes.rb 中`resources :tree_nurseries do...`。

我遇到的第一个问题是，当我添加`has_many :tree_nurseries` 到`Village`模型中时，rails 在我添加之前无法映射它`:class_name => 'TreeNursery'`。

在那之后，当我`rake routes`得到`tree_nurseries_index`这对我来说很奇怪。

有什么线索吗？

# ruby-on-rails - Rails gmail gem：获取发件人和邮件正文的正确地址

> ID：14673534
> 
> 赞同：2
> 
> 时间：2013-02-03T14:29:22.527
> 
> 标签：ruby-on-rails, gmail, gmail-imap

我正在使用[nu7'hatch/gmail](https://github.com/nu7hatch/gmail) gem 进入我的 Gmail 帐户并获取电子邮件。我可以正确地抓住`Date`and `Subject`，但是对于`From`and`Body`我也得到了这些字符，我不能简单地得到文本：

从：

`--- - !ruby/struct:Net::IMAP::Address name: [NAME_OF_SENDER_IS_HERE] route: mailbox: [USERNAME_OF_SENDER_IS_HERE] host: gmail.com`

身体： `--- !ruby/object:Mail::Body boundary: preamble: epilogue: charset: US-ASCII part_sort_order: - text/plain - text/enriched - text/html parts: !ruby/array:Mail::PartsList [] raw_source: [MESSAGE_GOES_HERE] encoding: 7bit`

没有这些字符，有什么方法可以正确获取 From 和 Body 文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T16:58:20.930

我发现的一种解决方法是使用 Net::IMAP。

请注意，所需的电子邮件`From`已完成`mail.from[0]`。

```
imap = Net::IMAP.new('imap.gmail.com', 993, usessl = true, certs = nil, verify = false)
imap.login(USERNAME, PASSWORD)
imap.select('Inbox')

imap.search(["ALL"]).each do |message_id|
  emails = imap.fetch(message_id,'RFC822')[0].attr['RFC822']
  mail = Mail.read_from_string emails
  @email = Email.create(:subject => mail.subject, :message => mail.body.decoded, :sender => mail.from[0], :date => mail.date)
end

imap.disconnect 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T20:22:27.743

你可以做类似的事情

此行返回完整的结构：

```
gmail.inbox.find(subject: "yoursubject").first.envelope 
```

...在结构上，您可以：

```
gmail.inbox.find(subject: "yoursubject").first.envelope.reply_to[0].mailbox
gmail.inbox.find(subject: "yoursubject").first.envelope.reply_to[0].name
gmail.inbox.find(subject: "yoursubject").first.envelope.reply_to[0].host 
```

...然后进行操作以组合成一个字符串，该字符串将被评估为：

```
name <sample@sample.com> 
```

# flash - AIR renderMode GPU 与 renderMode 直接

> ID：14673537
> 
> 赞同：9
> 
> 时间：2013-02-03T14:29:40.867
> 
> 标签：flash, mobile, air, gpu

在为移动应用程序开发 AIR 应用程序时，有人可以向我解释使用`renderMode = GPU`与`renderMODE = direct`何时使用两者之间的区别吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T01:59:53.870

请随时纠正我，但这是我的理解。显示管道中有 2 个组件

1.  渲染
2.  合成

Flash/AIR 有 3 种可能的渲染模式

1.  中央处理器
2.  图形处理器
3.  直接的

使用 CPU，合成和渲染都由 CPU/软件处理。使用 GPU，合成由 GPU/硬件处理，而渲染仍然由 CPU/软件处理

DIRECT 与 GPU 模式相反，合成由 CPU/软件处理，渲染由 GPU/硬件处理。

GPU 模式从部分 blitting 中获益最多，CPU 模式从阶段 blitting 中获益最大，而 DIRECT 模式的好处只有在以 Stage3D 为目标时才会出现，直接或间接通过 Starling 或 Away3D 等框架。

相反，如果以 Stage3D 为目标，则必须使用 renderMode=DIRECT

# java - 将 Base64String 转换为 Image 并上传到服务器 Java

> ID：14673543
> 
> 赞同：0
> 
> 时间：2013-02-03T14:30:46.453
> 
> 标签：java, base64

> **可能重复：**
> [在 Java 中解码 Base64 数据](https://stackoverflow.com/questions/469695/decode-base64-data-in-java)

`enter code here`我有一个 base64 字符串中的图像：`data:image/png;base64,iVBORw0KGgoAAAANS....`我想将此字符串转换回图像并将其存储到服务器。有没有人有任何用java完成的例子。

我有一个错误： org.apache.tomcat.util.buf.CharChunk 类型无法解析。它是从所需的 .class 文件中间接引用的（在第二行）；

这是我的代码我不确定我做错了什么：

```
 String encodedString = citizens.getPhoto();
 byte[] ba = Base64.decode(encodedString);
 decodedString = new String(ba);
   try {
          byte[] imageByteArray = decoder.decodeBuffer(citizens.getPhoto());
     FileOutputStream imageOutFile = new FileOutputStream(
                            "/resources/photos/mypic.jpg");
     imageOutFile.write(imageByteArray);
     imageOutFile.close();
     logger.info("Image Successfully Manipulated!");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# visual-studio - F# Interactive #I 命令如何知道项目路径？

> ID：14673544
> 
> 赞同：10
> 
> 时间：2013-02-03T14:30:49.120
> 
> 标签：visual-studio, f#, f#-interactive

这是场景：

1.  打开 Visual Studio。这是在 VS2010 Pro 中完成的。
2.  在 Visual Studio 中打开 F# Interactive
3.  使用 fsx 文件打开项目
    注意：项目和 fsx 文件在`E:\<directories>\fsharp-tapl\arith`
4.  从 fsx 文件向 F# Interactive 发送命令

    ```
    > System.Environment.CurrentDirectory;; 
    val it : string = "C:\Users\Eric\AppData\Local\Temp" 
    ```

    我没想到会有一个 Temp 目录，但它是有道理的。

    ```
    > #r @"arith.exe"
    Examples.fsx(7,1): error FS0082: Could not resolve this reference. 
    Could not locate the assembly "arith.exe". 
    Check to make sure the assembly exists on disk. 
    If this reference is required by your code, you may get compilation errors. 
    (Code=MSB3245)

    Examples.fsx(7,1): error FS0084: Assembly reference 'arith.exe' was not found 
    or is invalid 
    ```

    #r 命令错误表明 F# Interactive 当前不知道 arith.exe 的位置。

    ```
    > #I @"bin\Debug"
    --> Added 'E:\<directories>\fsharp-tapl\arith\bin\Debug' 
    to library include path 
    ```

    所以我们告诉 F# Interactive arith.exe 的位置。请注意，路径不是绝对路径，而是项目的子路径。我没有告诉 F# Interactive arith 项目的位置 `E:\<directories>\fsharp-tapl\arith`

    ```
    > #r @"arith.exe"
    --> Referenced 'E:\<directories>\fsharp-tapl\arith\bin\Debug\arith.exe' 
    ```

    并且 F# Interactive 正确发现 arith.exe 报告了正确的绝对路径。

    ```
    > open Main
    > eval "true;" ;;
    true
    val it : unit = () 
    ```

    这确认 arith.exe 已正确找到、加载并正常工作。

那么 F# Interactive #I 命令是如何知道当前目录没有帮助的项目路径的呢？

我真正追求的是从 F# Interactive 中如何获得项目的路径，`E:\<directories>\fsharp-tapl\arith`.

编辑

```
> printfn __SOURCE_DIRECTORY__;;
E:\<directories>\fsharp-tapl\arith
val it : unit = () 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-03T15:36:21.770

在 F# Interactive 中，要搜索的默认目录是源目录。您可以使用 轻松查询它`__SOURCE_DIRECTORY__`。

这种行为非常方便，允许您使用相对路径。您经常将`fsx`文件与文件放在同一个文件夹中`fs`。

```
#load "Ast.fs"
#load "Core.fs" 
```

当您引用相对路径时，F# Interactive 将始终使用隐式源目录作为起点。

```
#I ".."
#r ... // Reference some dll in parent folder of source directory
#I ".."
#r ... // Reference some dll in that folder again 
```

如果您想记住旧目录以供下次参考，您应该使用`#cd`：

```
#cd "bin"
#r ... // Reference some dll in bin
#cd "Debug"
#r ... // Reference some dll in bin/Debug 
```

# jquery - 使用 getJson 读取跨域 url

> ID：14673545
> 
> 赞同：0
> 
> 时间：2013-02-03T14:30:49.793
> 
> 标签：jquery, json, getjson

我正在尝试使用 getJson 读取 url。它既不会触发成功功能，也不会触发错误功能。

```
var url = "http://demo.dreamacc.com/TextTable.json?callback=?";
            $.ajax({
                type: 'GET',
                url: url,
                async: false,
                jsonpCallback: 'jsonCallback',
                contentType: "application/json",
                dataType: 'jsonp',
                success: function (ooo) {
                    alert('hi');
                    alert(ooo);
                },
                error: function () {
                    alert('w');
                }
            }); 
```

但是当我试图阅读这个网址时

```
http://api.twitter.com/1/statuses/user_timeline/codinghorror.json?callback=? 
```

它运作良好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:32:25.497

端点（您请求的 URL，[http://demo.dreamacc.com/TextTable.json](http://demo.dreamacc.com/TextTable.json)）不支持 JSONP 返回。

您将无法使用 JSONP 请求从本网站检索数据。

* * *

JSONP 通过指定远程服务器将 JSON 对象包装在函数调用中来工作（函数名称通过`callback`GET 参数定义）。如果端点不支持这一点并适当地修改其响应，您将无法使用 JSONP 从该站点检索数据。

**例子：**

*Twitter（支持 JSONP）：* [[普通 JSON](http://api.twitter.com/1/statuses/user_timeline/codinghorror.json) | [JSONP](http://api.twitter.com/1/statuses/user_timeline/codinghorror.json?callback=jQueryJSONP2881233) ]

*demo.dreamacc（不支持 JSONP）：* [[普通 JSON](http://demo.dreamacc.com/TextTable.json) | [JSONP 不起作用](http://demo.dreamacc.com/TextTable.json?callback=jQueryJSONP2881233)]

如您所见，demo.dreamacc.com 端点没有将响应包装在函数调用中。

# python - django 自定义字段 - 如何修改另一个字段的值

> ID：14673547
> 
> 赞同：0
> 
> 时间：2013-02-03T14:30:53.117
> 
> 标签：python, django

我正在开发一个 django 自定义字段。在自定义字段 def 中，我如何编写一些代码来保存另一个字段？例如，在自定义字段的 def 中，我编写了 pre_save 方法，但是在将值分配给其他模型字段后，我调用了 model_instance.save() 方法，但这导致了无限循环。你能告诉我怎么做吗？

```
class FullNameField(models.CharField):

    def contribute_to_class(self, cls, name):  
        firstname_field = models.CharField(
                null=True, blank=True, max_length=50)
        lastname_field = models.CharField(
                null=True, blank=True, max_length=50)

        firstname_field.creation_counter = self.creation_counter  
        lastname_field.creation_counter = self.creation_counter  

        cls.add_to_class('firstname', firstname_field )  
        cls.add_to_class('lastname', lastname_field )  

        super(FullNameField, self).contribute_to_class(cls, name) 
```

上面的代码在 syncdb 期间成功创建了新字段 firstname 和 lastname，我想要做的是，当我填充 fullname 字段时，firstname 和 lastname 也应该被填充。这个全名逻辑只是一个例子，但要求是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:24:11.050

您可以使用该[`pre_save`](https://docs.djangoproject.com/en/1.4/ref/signals/#django.db.models.signals.pre_save)信号在保存课程时收到通知。

将此添加到您的`contribute_to_class`方法中：

```
from django.db.models.signals import pre_save

def populate_fullname(sender, instance, raw, **kwargs):
    if raw:
        return # be nice to syncdb
    fullname = u'%s %s' %  (instance.firstname, instance.lastname))
    setattr(instance, name, fullname)

pre_save.connect(populate_fullname, cls) 
```

# c++ - 如何在添加和删除元素时转储无序地图？

> ID：14673549
> 
> 赞同：2
> 
> 时间：2013-02-03T14:31:02.647
> 
> 标签：c++, multithreading, unordered-map

我想转储 unordered_map 的键，同时能够同时添加和擦除元素。完全转储需要 4 秒，太长了。是否可以在单独的线程中转储，如下所示：

```
while (1) {
    pthread_mutex_lock( &mutex ); 
    if(iter!=map.end()){
        x=iter->first
        iter++;    
    }
    pthread_mutex_unlock( &mutex );

    do_this(x);  // this takes time to complete
} 
```

在主线程中我有：

```
pthread_mutex_lock( &mutex ); 
map.erase(iter); 
```

unordered map 的擦除方法是否有问题，因为擦除后迭代器将无效。

还有其他安全的并行转储方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:37:17.093

对于`unordered_map`（以及一般的关联容器），`erase()`成员函数不会*使*迭代器和对除已删除元素之外的其他元素的引用无效。

但是，在这里您可能正在擦除一个元素并使其迭代器无效，而您的循环持有该元素的迭代器：例如，如果您碰巧擦除了将在循环中取消引用的下一个迭代器所引用的元素。

因此，您需要注意要在循环的下一个循环中处理的迭代器*没有*引用您要删除的元素`while`：

```
pthread_mutex_lock( &mutex ); 
if (i != iter)
{
    map.erase(i);
}
else
{
    // Maybe store in a queue of elements to be removed after the loop is done
} 
```

`iter`循环中使用的迭代器变量在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:39:59.283

请参阅：[如果在从头到尾迭代时在地图元素上调用 erase() 会发生什么？](https://stackoverflow.com/questions/263945/what-happens-if-you-call-erase-on-a-map-element-while-iterating-from-begin-to)

`do_this`由于在调用调用它的方法之前增加迭代器`erase`不会造成任何麻烦。

只是一个想法：使用您当前的算法，我认为您根本不需要互斥锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T14:46:08.173

您可以通过迭代桶而不是迭代元素来获得一些（但不是全部 - 这实际上只是允许您交错操作，以便擦除不必等待整个 4 秒）所需的并行性。只要桶数不减少，这将是安全的

IE

```
pthread_mutex_lock( &mutex ); 
size_t count = map.bucket_count();
pthread_mutex_unlock( &mutex );

for(size_t i = 0; i<count; ++i){
  pthread_mutex_lock( &mutex );
  for(auto it = map.begin(i); it != map.end(i); ++i)
    do_this(it->first);
  pthread_mutex_unlock( &mutex );
} 
```

如果您想将 do_this 从互斥锁中拉出，则需要在其他结构中累积值

**另一个建议**，具体取决于该映射在其他地方的使用方式，您可以将元素交换为某个已知的无效值而不是擦除，然后让执行转储/do_this 的线程在看到该值时执行实际擦除.

# php - 在 PHP 中使用 XOR 进行加密/解密

> ID：14673551
> 
> 赞同：15
> 
> 时间：2013-02-03T14:31:08.527
> 
> 标签：php, encryption

我正在研究加密。我遇到了这样的问题：

在我用一个密钥对明文进行异或运算后，我得到一个密码，“010e010c15061b4117030f54060e54040e0642181b17”，为十六进制类型。如果我想从这个地穴中获取明文，我应该在 PHP 中做什么？

我尝试将其转换为字符串/整数，然后用键（三个字母）将它们带到异或。但它不起作用。

这是代码：

```
function xor_this($string) {

    // Let's define our key here
    $key = 'fpt';

    // Our plaintext/ciphertext
    $text = $string;

    // Our output text
    $outText = '';

    // Iterate through each character
    for($i=0; $i<strlen($text); )
    {
        for($j=0; $j<strlen($key); $j++,$i++)
        {
            $outText .= ($text[$i] ^ $key[$j]);
            //echo 'i=' . $i . ', ' . 'j=' . $j . ', ' . $outText{$i} . '<br />'; // For debugging
        }
    }
    return $outText;
}

function strToHex($string)
{
    $hex = '';
    for ($i=0; $i < strlen($string); $i++)
    {
        $hex .= dechex(ord($string[$i]));
    }
    return $hex;
}

function hexToStr($hex)
{
    $string = '';
    for ($i=0; $i < strlen($hex)-1; $i+=2)
    {
        $string .= chr(hexdec($hex[$i].$hex[$i+1]));
    }
    return $string;
}

$a = "This is the test";
$b = xor_this($a);
echo xor_this($b), '-------------';
//
$c = strToHex($b);
$e = xor_this($c);
echo $e, '++++++++';
//
$d = hexToStr($c);
$f = xor_this($d);
echo $f, '================='; 
```

这是结果：

> 这是测试----------
> 
> PHP 注意：未初始化的字符串偏移量：29 在 C:\Users\Administrator\Desktop\test.php 第 210 行 PHP 堆栈跟踪：PHP 1\. {main}() C:\Users\Administrator\Desktop\test.php:0 PHP 2.xor_this() C:\Users\Administrator\Desktop\test.php:239
> 
> 注意：未初始化的字符串偏移量：第 210 行 C:\Users\Administrator\Desktop\test.p hp 中的 29
> 
> 调用堆栈：0.0005 674280 1\. {main}() C:\Users\Administrator\Desktop\test.php:0 0.0022 674848 2\. xor_this() C:\Users\Administrator\Desktop\test.php:23 9
> 
> UBE^A►WEAVA►WEAV@◄WEARAFWECWB++++++++
> 
> 这是zs$fs☺==================

为什么？“UBE^A►WEAVA►WEAV@◄WEARAFWECWB++++++++”是结果，我在实际工作中遇到了麻烦。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-03T14:39:52.017

试试这个：

```
function xor_this($string) {

    // Let's define our key here
    $key = ('magic_key');

    // Our plaintext/ciphertext
    $text = $string;

    // Our output text
    $outText = '';

    // Iterate through each character
    for($i=0; $i<strlen($text); )
    {
        for($j=0; ($j<strlen($key) && $i<strlen($text)); $j++,$i++)
        {
            $outText .= $text{$i} ^ $key{$j};
            //echo 'i=' . $i . ', ' . 'j=' . $j . ', ' . $outText{$i} . '<br />'; // For debugging
        }
    }
    return $outText;
} 
```

**基本上要恢复文本（偶数在），您可以使用相同的功能：**

```
$textToObfuscate = "Some Text 12345";
$obfuscatedText = xor_this($textToObfuscate);
$restoredText = xor_this($obfuscatedText); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-24T09:03:00.777

更容易：

```
function xor_string($string, $key) {
    for($i = 0; $i < strlen($string); $i++) 
        $string[$i] = ($string[$i] ^ $key[$i % strlen($key)]);
    return $string;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-18T21:50:35.983

基于上面的代码，我创建了 2 个函数来使用 javascript 对 JSON 字符串进行异或编码，然后使用 PHP 在服务器端对其进行解码。

> **！！！重要提示：**如果您的 JSON 字符串中包含不同于 ASCII 的字符（如中文、西里尔文、符号...），您必须在 PHP**或**JS 中编写一些代码来修复这些字符的编码/解码方式（ord/chr in与 JS charCodeAt/String.fromCharCode) 相比，PHP 产生不同的结果，**或者** 只是对 JSON 字符串进行 base64_encode，然后对其进行 xor 编码。

我个人`xor_string(base64_encode(JSON.stringify(object)), 'xor_key')`在 JS 和 PHP 端使用：

```
$json = json_decode(base64_decode(
                        xor_string(file_get_contents("php://input"), 'xor_key')
                    ),
        true); 
```

PHP：

```
function xor_string($string, $key) {
    $str_len = strlen($string);
    $key_len = strlen($key);

    for($i = 0; $i < $str_len; $i++) {
        $string[$i] = $string[$i] ^ $key[$i % $key_len];
    }

    return $string;
} 
```

Javascript：

```
function xor_string(string, key) {
    string = string.split('');
    key = key.split('');
    var str_len = string.length;
    var key_len = key.length;
    var String_fromCharCode = String.fromCharCode;

    for(var i = 0; i < str_len; i++) {
        string[i] = String_fromCharCode(string[i].charCodeAt(0) ^ key[i % key_len].charCodeAt(0));
    }

    return string.join('');
} 
```

# c# - 在 C# 运行时设置实体框架连接字符串

> ID：14673559
> 
> 赞同：20
> 
> 时间：2013-02-03T14:31:47.360
> 
> 标签：c#, entity-framework

我需要在运行时设置我的实体框架连接字符串。现在，我有以下内容：

```
string connectionString = "metadata=res://*/DataModels.CustomerDataModel.csdl|res://*/DataModels.CustomerDataModel.ssdl|res://*/DataModels.CustomerDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=tcp:{serverName},{portNumber};initial catalog={databaseName};user id={username};multipleactiveresultsets=True;application name=EntityFramework&quot;";
using (CustomerEntities entities = new CustomerEntities(connectionString))
{
  CustomerEntity entity = new CustomerEntity();
  // do more
  entities.CustomerEntities.Add(entity);
  entities.SaveChanges();
} 
```

当我执行上面的代码（替换了 {parameter} 值）时，我收到以下错误：

> *不支持关键字：“数据源”。*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-03T14:36:05.143

改变这个。

```
string connectionString = "metadata=res://*/DataModels.CustomerDataModel.csdl|res://*/DataModels.CustomerDataModel.ssdl|res://*/DataModels.CustomerDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=tcp:{serverName},{portNumber};initial catalog={databaseName};user id={username};multipleactiveresultsets=True;application name=EntityFramework&quot;"; 
```

为此（注意我如何将“字符转义为”）

```
string connectionString = @"metadata=res://*/DataModels.CustomerDataModel.csdl|res://*/DataModels.CustomerDataModel.ssdl|res://*/DataModels.CustomerDataModel.msl;provider=System.Data.SqlClient;provider connection string= ""data source=tcp:{serverName},{portNumber};initial catalog={databaseName};user id={username};multipleactiveresultsets=True;application name=EntityFramework"""; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-19T05:59:40.263

我知道这是 10 个月前问过的，但我找到了一种更简单的方法来指定 connectionString：

如果你的配置文件有它：

```
<connectionStrings>
<add name="CustomerDataModel" connectionString="metadata=res://*/EntityFramework.CustomerDataModel.csdl|res://*/EntityFramework.CustomerDataModel.ssdl|res://*/EntityFramework.CustomerDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\CustomerDataModel;initial catalog=CustomerDB;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

您可以将其指定为 -

```
public const string ConnectionString = @"name=CustomerDataModel";
..
CustomerDBContext context = new CustomerDBContext(ConnectionString ); 
```

无需担心报价。更清洁。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-04T14:45:12.143

[使用EntityConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnectionstringbuilder%28v=vs.110%29.aspx)和[SqlConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)更容易根据需要更改参数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-24T18:27:02.797

在您的 web.config 中设置多个连接字符串，然后按照以下说明操作：

```
public partial class MyDatabaseEntities
{
    public MyDatabaseEntities(string connection)
        : base(connection)
    {
    }
} 
```

然后在要创建实体实例的任何地方，在参数中传递连接字符串名称：

```
MyDatabaseEntities entities = new MyDatabaseEntities("CONNECTION_STRING_NAME"); 
```

我希望这将有所帮助。

谢谢

# python - GAE Python LXML - 属性对象的 XMLSyntaxError 规范强制值

> ID：14673562
> 
> 赞同：0
> 
> 时间：2013-02-03T14:32:18.273
> 
> 标签：python, google-app-engine, lxml, iterparse

我在 Python 上使用 Google App Engine 并尝试获取 GZipped XML 文件并使用 LXML 的 iterparse 对其进行解析。我使用来自 lxml.de 的示例来创建以下代码：

```
import gzip, base64, StringIO
from lxml import etree
from google.appengine.ext import webapp
from google.appengine.api.urlfetch import fetch

class Catalog(webapp.RequestHandler):
user = xxx
password = yyy
catalog = fetch('url',
                    headers={"Authorization": 
                             "Basic %s" % base64.b64encode(user + ':' + password)}, deadline=600)
items = etree.iterparse(StringIO.StringIO(catalog), tag='product')

for _, element in items:
    print('%s -- %s' % (element.findtext('name'), element[1].text))
    element.clear() 
```

当我运行它时，它给了我以下错误：

```
for _, element in coupons:
File "iterparse.pxi", line 491, in lxml.etree.iterparse.__next__ (src/lxml\lxml.etree.c:98565)
File "iterparse.pxi", line 543, in lxml.etree.iterparse._read_more_events (src/lxml\lxml.etree.c:99086)
File "parser.pxi", line 590, in lxml.etree._raiseParseError (src/lxml\lxml.etree.c:74791)
XMLSyntaxError: Specification mandate value for attribute object, line 1, column 53 
```

这个错误是什么意思？我猜测 XML 文件格式不正确，但是我不知道在哪里寻找问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:36:12.247

通过以不同方式处理 fetch/gzip 部分、激活异步请求和使用 webapp2.0 解决了该问题。当使用所有这些时它起作用了:)这是代码：

```
from google.appengine.api.urlfetch import fetch
import gzip, webapp2, base64, StringIO, datetime
from credentials import CJCredentials
from lxml import etree

class Catalog(webapp2.RequestHandler):
def get(self):
    user = xxx
    password = yyy
    url = 'some_url'

    catalogResponse = fetch(url, headers={
        "Authorization": "Basic %s" % base64.b64encode(user + ':' + password)
    }, deadline=10000000)

    f = StringIO.StringIO(catalogResponse.content)
    c = gzip.GzipFile(fileobj=f)
    content = c.read()

    xml = StringIO.StringIO(content)

    tree = etree.iterparse(xml, tag='product')

    for event, element in tree:
       print element.name 
```

# php - 使用 simplexml 对 xml 数据源进行“高效”调用

> ID：14673570
> 
> 赞同：0
> 
> 时间：2013-02-03T14:32:49.603
> 
> 标签：php, xml, caching, simplexml

我使用 xml 数据提要使用 simplexml 获取信息，然后使用该数据生成页面。

为此，我正在使用获取 xml 提要

```
$xml = simplexml_load_file 
```

我是否认为要解析 xml 数据，服务器必须先将其全部下载，然后才能使用它？

显然，对于 2kb 的文件，这不是这样的问题，但有些文件接近 100kb，因此对于每个页面加载，必须首先下载，然后 php 才能开始生成页面。

在某些页面上只寻找 xml 数组的 1 属性，因此解析整个文档似乎并不重要，通常我会考虑缓存提要，但这些提要与经常变化的实时市场有关，因此并不理想，因为我总是有最新的数据。

有没有更好的方法来更有效地调用 xml 提要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:06:09.290

优化 XML 解析的首要策略之一是**动态解析**- 意思是，不要等到整个数据到达，而是在有要解析的内容时立即开始解析。

这更有效，因为瓶颈通常是网络连接而不是 CPU，所以如果我们可以在不等待所有网络信息的情况下找到答案，我们已经进行了相当多的优化。

你应该谷歌这个词`XML push parser`或`XML pull parser`

在文章[*Pull parsing XML in PHP - Create memory-efficient stream processing*](http://www.ibm.com/developerworks/xml/library/x-pullparsingphp/index.html)中，您可以找到一个教程，其中显示了一些关于如何使用与 PHP5 捆绑的 XMLReader 库使用 PHP 执行此操作的代码

这是此页面的引述，它基本上用更好的文字说明了我刚刚所做的事情：

> PHP 5 引入了 XMLReader，这是一个用于读取可扩展标记语言 (XML) 的新类。与 SimpleXML 或文档对象模型 (DOM) 不同，XMLReader 以流模式运行。也就是说，它从头到尾读取文档。您可以在看到最后的内容之前从头开始处理内容。这使得它非常快速、非常高效并且非常节省内存。您需要处理的文件越大，这一点就越重要。

流模式下的解析与过程式解析有点不同。请记住，并非所有数据都已存在。您通常需要做的是提供实现某种状态机的事件处理程序。如果您看到标签 A，请执行此操作，如果您看到标签 B，请执行此操作。

**关于推送解析**和**拉**取解析的区别看[这篇文章](http://www.programmersheaven.com/user/pawanspace/blog/609-XML-parsers-Push-versus-Pull-parsers/)。长话短说，两者都是基于流的解析器。您可能需要一个推送解析器，因为您想在数据从 XML 提要通过网络到达时进行解析。

PHP 中的推送解析也可以使用`xml_parse()`（带有 libxml 兼容层的 libexpat）来完成。您可以查看代码示例[`xml_parse`PHP 手册页](http://php.net/xml_parse)。

# c# - ASMX Web 服务不生成异步函数

> ID：14673571
> 
> 赞同：0
> 
> 时间：2013-02-03T14:32:50.927
> 
> 标签：c#, web-services, asynchronous

我使用 1 个自动生成的功能制作了 ac# web 服务（新网站 > asp.net web 服务）：

```
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class MyService : System.Web.Services.WebService
{

    [WebMethod]
    public string Hello()
    {
        return "Hello User";
    }
} 
```

我还制作了一个 winform 应用程序并添加了对该服务的引用并尝试调用 HelloWorldAsynch 但我所拥有的只是 HelloWorld

```
new ServiceReference1.Service1SoapClient().HelloWorldAsynch? 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:00:40.287

似乎问题是我将 Web 服务添加为服务引用而不是 Web 引用

修复：http: [//msdn.microsoft.com/en-us/library/bb628649.aspx](http://msdn.microsoft.com/en-us/library/bb628649.aspx)

# ruby - 在使用 erubis 的 sinatra 中，默认设置 escape_html 为 true。有时不得不逃避

> ID：14673573
> 
> 赞同：4
> 
> 时间：2013-02-03T14:32:58.160
> 
> 标签：ruby, sinatra, erb, erubis

在 Sinatra 中，使用 erubis 的默认设置`escape_html`是`true`.

但有时我想取消转义，因为，我不想添加太多的 escape_html。不要重复自己。:)

`helpers:`

```
def raw(string)
  CGI::unescape_html(string)
end 
```

`views:`

```
<div class="body">
  <%= raw "<h1>Thanks for help...</h1>" %>
</div> 
```

不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T15:50:48.283

只是添加一些提示。Erubis 具有逃避（净化）表达的能力。Erubis::Eruby 类的行为如下：

```
<%= expr %> - not escaped.
<%== expr %> - escaped.
<%=== expr %> - out to $stderr.
<%==== expr %> - ignored. 
```

[来源](http://www.kuwata-lab.com/erubis/users-guide.02.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T15:05:20.757

不确定您使用的是哪个版本的 Erubis，但它[似乎](http://www.kuwata-lab.com/erubis/users-guide.03.html#escape-enhancer)针对该特定情况有一种特殊的标签：带有**两个**等号。因此，您示例中的行可能如下所示：

```
<%== "<h1>Thanks for help...</h1>" %> 
```

调用 to`CGI::unescape`不应该是必要的，因为字符串最初没有转义。您所需要的只是*防止*转义，而不是撤消它。

但是，如果您的 Erubis 不理解`<%==`，或者您使用的是 ERB，而不是 Erubis，那么对不起，除了您所说的之外，我不知道任何其他解决方案：禁用整个文件的 html 转义并`h`在您需要转义的任何地方使用。

*仅供参考，在 Rails 中也有特殊的助手`raw`和`String#html_safe`，但我可以看到它们是 ActiveSupport 的一部分，在 Sinatra 中不可用。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T01:47:41.613

你可以通过这种方式完成你想要的：

网页.rb：

```
require 'sinatra'
require 'erubis'
set :erb, :escape_html => true

get '/hi' do
  @model = Hash.new()
  @model[:person] = "<b>World</b>"
  erb :hello
end 
```

布局.erb：

```
<!DOCTYPE html>
<html>
<head>
  <title><%= @title %></title>
</head>
<body>
  <%== yield %>
</body>
</html> 
```

你好.erb：

```
<div>
  <p>Hello, <%= @model[:person] %>!</p>
  <p>Hello, <%== @model[:person] %>!</p>
</div> 
```

# c - 使用 Matlab 编码器将 Matlab 代码转换为 C

> ID：14673580
> 
> 赞同：0
> 
> 时间：2013-02-03T14:33:47.020
> 
> 标签：c, matlab, visual-c++, matlab-coder

我有一些工作的 Matlab 代码，我尝试使用 Matlab 编码器将其转换为 C 代码。我收到此错误：

```
18   c:\users\bla\project\strcmpi.h(79) : warning C4028: formal parameter 2 different from declaration
19   c:\users\bla\project\strcmpi.h(79) : error C2371: 'strcmpi' : redefinition; different basic types
20           c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\INCLUDE\string.h(245) : see declaration of 'strcmpi'
21   NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\amd64\cl.EXE"' : return code '0x2'
22   Stop.
23   The make command returned an error of 2
24   'An_error_occurred_during_the_call_to_make' is not recognized as an internal or external command,
25   operable program or batch file. 
```

它看起来对我来说非常 C 特定（我不是一个精通 C 程序员）。谁能指出我正确的方向来克服这个错误？谢谢。

PS：

这是一些改编的 Matlab 代码：

```
if(strcmpi(parameters.x,'bladibla') == 1)

    % some code

else

    % some more code

end 
```

其中“参数”是一个结构。我想坚持我的结构，但如果有更好的方法来实现上述目标，特别是在 Matlab 编码器和 C 的上下文中，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:26:14.623

strcmpi() （不区分大小写的字符串比较）的问题在于它不是标准的 C 函数。因此，依赖于它但试图跨平台移植的代码有时必须提供自己的实现，同时如果可用则推迟到系统的实现。根据我的经验，项目自己的 strcmpi() 实现将受到配置选项的保护。如果你打开 c:\users\bla\project\strcmpi.h，你可能会看到类似下面的代码：

```
#ifndef CONFIG_STRCMPI_PRESENT
int strcmpi(const char *string1, const char *string2);
#endif  // CONFIG_STRCMPI_PRESENT 
```

如果您看到这一点，解决问题的诀窍可能是找到相关的 config.h 文件并取消注释以下行：

```
// #define CONFIG_STRCMPI_PRESENT 
```

这只是根据我对类似问题的经验的猜测。

# facebook - 脸书网站登入

> ID：14673584
> 
> 赞同：0
> 
> 时间：2013-02-03T14:34:22.320
> 
> 标签：facebook, login, question2answer

我用框架[http://www.question2answer.org/](http://www.question2answer.org/)建立了一个网站[http://www.howpedia.de](http://www.howpedia.de)有一个集成的 Facebook 登录对我或我的一个油炸物不起作用（所以错误不是在我的网站上）。

如果我单击使用 facebook 注册，则会出现登录弹出窗口，请求许可并再次关闭。但我没有登录我的网站。如果我重新单击登录，弹出窗口会打开并自行关闭，没有错误或类似情况。

由于我正在使用框架中已经集成的 facebook 登录插件，并且该插件正在官方问答网站[http://www.question2answer.org/qa/](http://www.question2answer.org/qa/)上运行，所以我不知道该怎么做。

到目前为止的步骤：

1.  注册一个脸书应用
2.  为我的网站 howpedia.de 和 www.howpedia.de 启用登录
3.  将公钥和私钥复制到我的网站
4.  facebook登录已启用，沙盒模式已关闭

我也尝试注册另一个APP用不同的公钥/私钥尝试，但结果是一样的。

# android - 如何使用 Android App Widget 进行调试？

> ID：14673586
> 
> 赞同：14
> 
> 时间：2013-02-03T14:34:46.203
> 
> 标签：android, debugging, android-widget

对于正常的Activity，我可以设置一些断点，在Eclipse中点击F11进行调试。但是，当我开发应用程序小部件时它不起作用。那么，我该如何调试呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T08:38:36.700

[在这里](https://shantanugoel.com/2010/06/13/how-to-debug-android-widgets/)你可以找到一个很好的答案：

调试小部件代码所需的一切几乎与为普通应用程序所做的相同。只需按照以下步骤操作：

**1.**在eclipse菜单上按“debug”（或者“run”似乎没关系）

**2.**将小部件 apk 同步并安装到您的模拟器/设备后，将您的 Eclipse 工作区切换到 DDMS 模式。您可以通过按右上角的“DDMS”标记按钮来执行此操作，或者如果找不到它，则通过转到“Window->Open Perspective->DDMS”来执行此操作。

**3.**从显示的进程列表中选择小部件的进程名称。默认情况下，此列表显示在 DDMS 窗口的左上方。（见下面的截图）。如果您在列表中看不到小部件的进程名称，则可能是小部件尚未添加到主屏幕。所以，这样做。

**4.**按进程列表上方的绿色调试按钮（见下面的截图）

**5.**就是这样。现在，如果您在代码中放置了断点，请执行一些执行该代码的操作。

![在此处输入图像描述](../Images/cb99abc9a4daa7379c0c06d11fa1dda6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:45:13.430

我假设“App Widget”是指用户可以通过长按背景墙纸来添加到主屏幕的小部件？

如果您的`AndroidManifest.xml`文件设置正确，您就可以像调试任何其他 Android 应用程序一样调试这些小部件。

**但是，请注意，您需要先将小部件添加到主屏幕。**

完成此操作后，您应该会在 Eclipse 的 DDMS 模式透视图中看到您的小部件进程。您可以附加调试器并调试您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-02T07:56:46.450

**安卓工作室**

我没有找到显式调试 App Widget 的“结构化”方式。

我的解决方法：

确保您的项目中有一个 Activity - 通常您至少会有一个 Setting Activity，但如果没有，只需创建一个不需要做任何事情的虚拟 Activity。

在您的清单中，添加此活动并将其标记为启动活动：

```
<activity android:name=".activity.SettingActivity"
    android:label="@string/setting_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity> 
```

现在您应该将断点放置在您想要调试的任何位置，并使用[![在此处输入图像描述](../Images/64b22cd0d16e3f16bbd6f18d4eda023f.png)](https://i.stack.imgur.com/DPOcz.png)按钮启动您的应用程序。现在整个应用程序的代码都在调试会话下，调试器将在任何断点处停止，包括小部件。

**注意：**在生产之前，请从清单中删除启动意图过滤器，如果您不打算直接从设备启动板启动此 Activity

```
 <activity android:name=".activity.**SettingActivity**"
        android:label="@string/setting_name">
        <!--<intent-filter>-->
            <!--<action android:name="android.intent.action.MAIN"/>-->
            <!--<category android:name="android.intent.category.LAUNCHER"/>-->
        <!--</intent-filter>-->
    </activity> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-10T10:37:01.007

## 安卓工作室

这真的很简单。只需在您的班级中设置您的调试点即可`extends AppWidgetProvider`。

从这里...

1.  启动您的模拟器**或**通过 USB 数据线连接您的手机
2.  像往常一样选择`Debug`图标。
3.  等待您的应用启动
4.  转到您的主屏幕
5.  添加您的小部件**或**转到已显示小部件的屏幕

从这一点开始，如果您在`onUpdate(...)`方法中有断点，那么您的小部件调试将开始

## 蚀

[星空](https://stackoverflow.com/a/14997791/2333021)的回答

# java - 在包资源管理器中突出显示文件

> ID：14673587
> 
> 赞同：1
> 
> 时间：2013-02-03T14:34:53.397
> 
> 标签：java, eclipse, jakarta-ee, eclipse-plugin, highlighting

我在 Eclipse 中开发了一个插件，它为 Package Explorer 添加了一个用于搜索类的选项。所以插件搜索类并返回类路径。然后它应该突出显示资源管理器中的类。

我用这个：

```
IPath iPath = new Path(path);
                        IFile file = project.getFile(iPath);

                        file = ResourcesPlugin.getWorkspace().getRoot().getFileForLocation(iPath);

                        ISelection selection = new StructuredSelection(file);

                        IViewReference[] views = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getViewReferences();
                        PlatformUI.getWorkbench().getActiveWorkbenchWindow()
                        .getActivePage().resetPerspective(); 
                        for(IViewReference view:views){
                            if("org.eclipse.jdt.ui.PackageExplorer".equals(view.getId())){
                                IViewPart pExplorer = view.getView(true);
                                pExplorer.getViewSite().getSelectionProvider().setSelection(selection);
                                break;
                            }
                        } 
```

但是，这会在以下行中返回 NullPointerException： IViewReference[] views = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getViewReferences();

任何提示或帮助将不胜感激。

* * *

感谢您的评论..现在我的问题是这段代码没有为我突出显示资源管理器中的类！

```
String path = "D:\\Programs\\eclipse\\runtime-EclipseApplication\\tessssst\\src\\testClass.java";

    IPath iPath = new Path(path);
    IFile file = project.getFile(iPath);

    file = ResourcesPlugin.getWorkspace().getRoot().getFileForLocation(iPath);

    ISelection selection = new StructuredSelection(file);

    IViewReference[] views = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getViewReferences();
    PlatformUI.getWorkbench().getActiveWorkbenchWindow()
    .getActivePage().resetPerspective(); 
    for(IViewReference view:views){
        if("org.eclipse.jdt.ui.PackageExplorer".equals(view.getId())){
            IViewPart pExplorer = view.getView(true);
            pExplorer.getViewSite().getSelectionProvider().setSelection(selection);
            break;
        }
    } 
```

请指导我更正代码！我应该有一条我上面提到的路径作为输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:59:35.520

考虑：

*   你提到 PlatformUI.getWorkbench() 是空的
*   的代码[`org.eclipse.ui.PlatformUI`](https://github.com/eclipse/eclipse.platform.ui/blob/master/bundles/org.eclipse.ui.workbench/Eclipse%20UI/org/eclipse/ui/PlatformUI.java#L84-L95)包括：

：

```
public static IWorkbench getWorkbench() {
    if (Workbench.getInstance() == null) {
        // app forgot to call createAndRunWorkbench beforehand
        throw new IllegalStateException(WorkbenchMessages.PlatformUI_NoWorkbench);
    }
    return Workbench.getInstance();
} 
```

调用插件时可能`createAndRunWorkbench()`没有调用它（在[本教程](http://www.programcreek.com/2011/03/eclipse-tutorial-for-a-simple-desktop-application/)中调用）。

# c++ - 在 C++ 中，有没有办法以编程方式在 Chrome 中打开网页并访问其内容？

> ID：14673588
> 
> 赞同：0
> 
> 时间：2013-02-03T14:34:57.617
> 
> 标签：c++, google-chrome

我的问题是我无法直接访问该页面。但是我可以在 Chrome 中访问它并查看它的代码。所以我想知道是否有一种方法可以通过首先在 Chrome 中加载来间接访问它。

编辑：我不够清楚。我要加载的网页仅授予对浏览器的访问权限。我尝试了 cUrl 并将 Google Chrome 设置为代理，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:15:25.667

不，现代网络浏览器不允许您正在寻找的那种客户端自动化，因为如果恶意软件可以使用用户的凭据访问网络，则会出现明显的安全漏洞。

如果您不介意将页面实际显示在用户面前，您可以查看平台的 UI 自动化。实际上，您将导航到每个 URL，然后查看源并复制到剪贴板或另存为...到临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-11T04:46:26.823

这将在默认 Web 浏览器中打开 URL：

```
void OpenWebsite (char * cpURL)
{
    ShellExecute (NULL, "open", cpURL, NULL, NULL, SW_SHOWNORMAL); 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-11T04:36:31.217

出于安全原因，普通浏览器不允许这样做。但是有一些像[selenium](http://www.seleniumhq.org/)这样的自动化测试工具可以做到这一点

# java - 如何在 tomcat-maven-plugin 中应用上下文配置？

> ID：14673591
> 
> 赞同：3
> 
> 时间：2013-02-03T14:35:27.713
> 
> 标签：java, tomcat, cross-context, embedded-tomcat-7

我的目标是使用 tomcat-maven-plugin 部署几个 webapps 并在它们之间进行一些跨上下文交互。这是出于原型设计的目的。所以我创建了两个war模块（核心和webapp1），将apropriate context.xml放入它们的META-INF文件夹并配置tomcat7插件。但是 webapps 是使用默认上下文配置部署的。当部署到通用 Tomcat 7 容器中时，一切正常——我可以访问另一个 webbapp 的上下文。

我的问题是我做错了什么？或者这可能是嵌入式 tomcat 的限制（尽管我没有发现任何区别）？

这是我的 context.xml：

```
<Context crossContext="true">
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

tomcat插件的配置（不知是否重要，谁知道呢）：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
        <path>/</path>
        <port>8080</port>
        <addContextWarDependencies>true</addContextWarDependencies>
        <addWarDependenciesInClassloader>true</addWarDependenciesInClassloader>        <warSourceDirectory>${project.build.directory}/${project.build.finalName}/</warSourceDirectory>
        <webapps>
            <webapp>
                <groupId>lfcms-several-webapps-proto</groupId>
                <artifactId>webapp1</artifactId>
                <version>1.0-SNAPSHOT</version>
                <type>war</type>
                <asWebapp>true</asWebapp>
            </webapp>
            <webapp>
                <groupId>lfcms-several-webapps-proto</groupId>
                <artifactId>webapp2</artifactId>
                <version>1.0-SNAPSHOT</version>
                <type>war</type>
                <asWebapp>true</asWebapp>
            </webapp>
        </webapps>
    </configuration>
</plugin> 
```

这是核心servlet的代码：

```
final ServletContext additionalContext = ctx.getContext("/webapp1");
if (additionalContext == null) throw new ServletException("can't get context of /webapp1");
final RequestDispatcher disp = additionalContext.getRequestDispatcher("/webapp1");
disp.include(req, resp); 
```

# java - JVM字节码浮点否定：不允许但可能？

> ID：14673596
> 
> 赞同：1
> 
> 时间：2013-02-03T14:36:03.653
> 
> 标签：java, floating-point, jvm, bytecode

这些天来，我正在尝试研究 JVM 字节码。`FNEG`我在 wikipedia 上找到了名为 describe 的操作码： `use to negate a float`. 到底有什么好处呢？我尝试在普通 Java 代码中对变量进行取反，Eclipse 向我报告错误，即对于浮点类型的参数未定义否定运算符。那么它是干什么用的呢？我该如何使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T14:43:51.687

```
public class temp {
    public static void main(String[] args) {
        float a = 1.0f;
        a = -a;
        System.out.println(a);
    }
} 
```

`javap -c temp`给出：

```
Compiled from "temp.java"
public class temp extends java.lang.Object{
public temp();
  Code:
   0:   aload_0
   1:   invokespecial   #8; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   fconst_1
   1:   fstore_1
   2:   fload_1
   3:   fneg
   4:   fstore_1
   5:   getstatic       #16; //Field java/lang/System.out:Ljava/io/PrintStream;
   8:   fload_1
   9:   invokevirtual   #22; //Method java/io/PrintStream.println:(F)V
   12:  return

} 
```

参见 3：对于 fneg，标准 javac。

# pascal - 如何在一行的循环中写入用逗号分隔的数字？

> ID：14673601
> 
> 赞同：0
> 
> 时间：2013-02-03T14:36:29.100
> 
> 标签：pascal, freepascal

我正在 FreePascal 中制作一个素数程序。

如何输出数字除以 I1，I2 用逗号而不是 2 行分隔？

```
var
  P:Integer;
  I:Integer;
  J:Integer;
  A:Integer;

  begin

    writeln('Prime number program');
    writeln;
    writeln('Insert number');
    readln(P);

    for I:=2 to P-1 do
    begin
      J:=P Mod I;
      if (J=0) then
      begin
        writeln(P,' divides with ',I);
        a:=a+1
      end;
    end;

    if a=0 then
      begin
      writeln(P,' is prime number')
      end;
  end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:48:36.867

我知道这不是教你一些东西的好方法，但这里是：

```
program Project1;
uses
  SysUtils;
var
  S: string;
  I: Integer;
  Count: Integer;
  Input: Integer;
begin
  Writeln('Prime number program');
  Writeln;
  Writeln('Insert a number:');
  Readln(Input);

  for I := 2 to Input-1 do
  begin
    if (Input mod I = 0) then
    begin
      Count := Count + 1;
      if (S <> '') then
        S := S + ', ';
      S := S + IntToStr(I);
    end;
  end;

  if (Count = 0) then
    Writeln(Input, ' is a prime number.')
  else
    Writeln(Input, ' is not a prime number. It divides with ', S, '.');
  Readln;
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:47:51.187

```
prime := true;
for i := 2 to p - 1 do
if(p mod i = 0) then prime := false;
if prime then writeln("prime"); 
```

所有程序：

```
program Prime;
var
  prime: boolean;
  I, P: Integer;
begin
  Writeln('Prime number program');
  Writeln;
  Writeln('Insert a number:');
  Readln(P);
  prime := true;

  for i := 2 to p - 1 do
  if(p mod i = 0) then prime := false;
  if prime then writeln("prime");
           else writeln("not prime");
  Readln;
end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T13:02:31.437

不需要检查所有低于 N 的数字，低于 sqrt(N) 的奇数就足够了。

```
program PrimeTest;

var N, I, Divisor: LongInt;
    Prime: Boolean;

begin
   writeln('Prime number program');
   writeln;
   write('Insert number: ');
   readln(N);

   Divisor := 1;
   Prime := True;
   if N < 5 then
   begin
      Prime := (N = 2) or (N = 3);
      if N = 4 then Divisor := 2;
   end else if Odd(N) then
   begin
      I := 3;
      while I*I <= N do
      begin
         if N mod I = 0 then
         begin
            Prime := False;
            Divisor := I;
            break;
         end;
         I := I + 2;
      end;
   end else begin
      Prime := False;
      Divisor := 2;
   end;

   if Prime then writeln(N, ' is a prime number')
            else writeln(N, ' is divisible by ', Divisor);
end. 
```

当然，如果你想找到所有的质因数，或者所有的除数（不是同一件事），你需要一些更复杂的东西，但最好还是尽可能少做除数。

这是一个给出整个素数分解的解决方案。

```
program PrimeTest;

var N, I, J, Index, M: LongInt;
    Factor, Power: array[1 .. 32] of LongInt;

begin
   writeln('Prime number program');
   writeln;
   write('Insert number: ');
   readln(N);

   M := N;
   Index := 0;

   if N mod 2 = 0 then
   begin
      J := 0;
      while N mod 2 = 0 do
      begin
         Inc(J);
         N := N div 2;
      end;
      Inc(Index);
      Factor[Index] := 2;
      Power[Index] := J;
   end;

   I := 3;
   while I*I <= N do
   begin
      if N mod I = 0 then
      begin
         J := 0;
         while N mod I = 0 do
         begin
            Inc(J);
            N := N div I;
         end;
         Inc(Index);
         Factor[Index] := I;
         Power[Index] := J;
      end;
      I := I + 2;
   end;

   if (N > 1) or (Index = 0) then
   begin
      Inc(Index);
      Factor[Index] := N;
      Power[Index] := 1;
   end;

   if M = 1 then writeln('1 is not prime')
   else if (Index > 1) or ((Index > 0) and (Power[1] > 1)) then
   begin
      if Power[1] = 1 then write(M, ' = ', Factor[1])
                      else write(M, ' = ', Factor[1], '^', Power[1]);
      for I := 2 to Index do
      begin
         if Power[I] = 1 then write(' * ', Factor[I])
                         else write(' * ', Factor[I], '^', Power[I]);
      end;
      writeln;
   end else writeln(M, ' is prime');
end. 
```

# javascript - 使用 HTML/Javascript 打印分数计数器

> ID：14673603
> 
> 赞同：0
> 
> 时间：2013-02-03T14:36:31.303
> 
> 标签：javascript, html, dynamic, real-time

我的代码中有以下逻辑。当有人单击按钮上的按钮时，我将分数计数器加一。我想在下一秒在 html 端打印这个值。我的选项是什么？我尝试了以下方法（分数是 html 端的 div 并为全局计数器评分）但没有结果：

```
document.getElementById("score").innerHTML+=score;

var tmpscore = document.getElementById("score");
tmpscore.appendChild(score); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:39:08.300

```
var score_elem = document.getElementById("score");
score_elem.innerHTML = parseInt(score_elem.innerHTML)++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:41:48.753

如果你不使用 jQuery，你可以这样做`document.getElementById("score").innerHTML = tempscore;`

# xaml - 向 UI 添加固定的新项目/形状 - Windows Store App

> ID：14673607
> 
> 赞同：0
> 
> 时间：2013-02-03T14:36:56.717
> 
> 标签：xaml, visual-studio-2012, windows-store-apps

我确信这个问题必须有一个非常简单的答案，但我似乎找不到它。任何帮助深表感谢。

每当将新项目添加到 UI 时，无论是在运行时还是在程序运行时动态地，它都会滑入视图以到达其位置（具有惯性）。只有当它到达该点时才会应用某些属性：如变换属性或不透明度值。例如，如果在点击按钮时添加了一个设置为 50% 不透明度的矩形，它将以 100% 不透明度从其实际位置滑到屏幕上大约 30 个点，到达正确的位置，然后更改为正确的 50% 不透明度.

我希望能够关闭此默认行为，以便矩形立即出现在正确位置并设置所有属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:12:08.890

我发现我问了两个不同的问题，并且都在这个网站上得到了回答（下面的链接）。

可以使用 Visual Studio 2012 中 Miscellaneous 下的 Transitions 属性来定位单个对象。

[如何从 Windows 8 应用商店应用程序中的对象或容器中删除 EntranceThemeTransition？](https://stackoverflow.com/questions/12820097/how-to-remove-entrancethemetransition-from-object-or-container-in-windows-8-stor)

[RenderTransform 发生在 TextBlock 上的 EntranceThemeTransition 之后](https://stackoverflow.com/questions/13435721/rendertransform-occurs-after-entrancethemetransition-on-a-textblock)

# jms - 对旧版本 guice 的尴尬 guiceyfruit 传递依赖

> ID：14673614
> 
> 赞同：4
> 
> 时间：2013-02-03T14:37:46.810
> 
> 标签：jms, guice, guava, dependency-management

我正在使用 guice 3.0 编写一个基于 Camel 的小型 JMS 应用程序来连接所有内容。不幸的是，CamelModule 依赖于 guiceyfruit，其当前版本对 guice 2.0 具有传递依赖！

在 guice 2.0 和 3.0 之间删除了一些不推荐使用的类，特别是 com.google.inject.internal.Sets/Lists/Maps！

由于删除了类，排除对 guice 2.0 的传递依赖并仅使用 guice 3.0 不起作用；运行时会有 ClassNotFoundExceptions。

我的解决方案是在我自己的项目中实现三个类以及 guiceyfruit 需要的每个类的单个方法（newArrayList、newHashSet、newHashMap）。这些只是委托给这些方法的谷歌番石榴实现

我不再得到 ClassNotFound 异常，但我不禁感到有一种更有效的方法来实现这一点。

处理这种情况的最佳方法是什么？

# php - PHP按价格值对多维数组进行排序

> ID：14673616
> 
> 赞同：2
> 
> 时间：2013-02-03T14:37:55.363
> 
> 标签：php, arrays, sorting

假设我有一个多维数组设置如下：

```
$matrix[1][1]=4.54;        $matrix[2][1]="apples";  $matrix[3][1]="coles";
$matrix[1][2]=7.2140230;   $matrix[2][2]="apples";  $matrix[3][2]="safeway";
$matrix[1][3]=15.56;       $matrix[2][3]="oranges"; $matrix[3][3]="coles";
$matrix[1][4]=2.34;        $matrix[2][4]="bananas"; $matrix[3][4]="safeway";
$matrix[1][5]=27.98;       $matrix[2][5]="grapes";  $matrix[3][5]="coles";
$matrix[1][6]=17.68493403; $matrix[2][6]="oranges"; $matrix[3][6]="safeway"; 
```

我希望通过存储在第一列下的定价信息重新排列，以便新的顺序为`$matrix`：

```
$matrix[1][1]=2.34;        $matrix[2][1]="bananas"; $matrix[3][1]="safeway";
$matrix[1][2]=4.54;        $matrix[2][2]="apples";  $matrix[3][2]="coles"; 
$matrix[1][3]=7.2140230;   $matrix[2][3]="apples";  $matrix[3][3]="safeway";
$matrix[1][4]=15.56;       $matrix[2][4]="oranges"; $matrix[3][4]="coles";
$matrix[1][5]=17.68493403; $matrix[2][5]="oranges"; $matrix[3][5]="safeway";
$matrix[1][6]=27.98;       $matrix[2][6]="grapes";  $matrix[3][6]="coles"; 
```

实现这一目标的最佳方法是什么？我已经阅读了有关对多维数组进行排序的其他问题，但在实现时遇到了麻烦，因为这些示例似乎具有带有键和元素的关联数组，而我只是使用不同的数字来存储每条数据。我不希望改变我在数组中存储数据的方式，因为实际的脚本相当长且复杂，因此这将涉及大量的返工。

我对 PHP 完全陌生，所以如果我在这里遗漏了一些明显的东西，我深表歉意。谢谢你的帮助。

编辑：感谢大家的建议，scessors 代码正是我所需要的。Halfer - 对于你的第一个问题 - 是的，第二个帖子 - 好点，我会实施这个。再次感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:53:20.537

如果排序后的数组*从零开始*没有问题，您可以使用[array_multisort](http://php.net/manual/en/function.array-multisort.php)：

```
array_multisort(
    $matrix[1], SORT_ASC, SORT_NUMERIC,
    $matrix[2], SORT_ASC, SORT_STRING,
    $matrix[3], SORT_ASC, SORT_STRING
); 
```

另请参阅[我的示例](http://ideone.com/Cr0krC)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:42:18.203

我相信 phps array_multisort 会为你做到这一点：

这是来自文档的示例：

```
<?php
$ar1 = array(10, 100, 100, 0);
$ar2 = array(1, 3, 2, 4);
array_multisort($ar1, $ar2);

var_dump($ar1);
var_dump($ar2);
?> 
```

在此示例中，排序后，第一个数组将包含 0、10、100、100。第二个数组将包含 4、1、2、3。第二个数组中的条目对应于第一个数组中的相同条目（100和 100) 也进行了排序。

来自： http: [//php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T15:56:02.687

使用[Adam Backstrom提供的 my_uksort](https://stackoverflow.com/questions/2685031/sort-array-by-keys-of-another-array)

```
<?php
function my_uksort($a, $b) {
    global $matrix;
    asort($matrix[1]); 
    return $matrix[1][$a] < $matrix[1][$b] ? -1 : 1;
}

uksort($matrix[2], 'my_uksort');
uksort($matrix[3], 'my_uksort');

print_r($matrix);
?> 
```

[演示](http://phpfiddle.org/main/code/7ek-na6)

# c - 创建词法分析器时缺少 .h 文件

> ID：14673617
> 
> 赞同：0
> 
> 时间：2013-02-03T14:38:15.183
> 
> 标签：c, gcc, lex, flex-lexer

我正在尝试编译一个 .l 文件来创建一个词法分析器。代码是：

```
%{
#include "ifanw.tab.h"
extern int yylval;
%}
%%
"="      { return EQ; }
"!="     { return NE; }
"<"      { return LT; }
"<="     { return LE; }
">"      { return GT; }
">="     { return GE; }
"+"      { return PLUS; }
"-"      { return MINUS; }
"*"      { return MULT; }
"/"      { return DIVIDE; }
")"      { return RPAREN; }
"("      { return LPAREN; }
":="     { return ASSIGN; }
";"      { return SEMICOLON; }
"IF"     { return IF; }
"THEN"   { return THEN; }
"ELSE"   { return ELSE; }
"FI"     { return FI; }
"WHILE"  { return WHILE; }
"DO"     { return DO; }
"OD"     { return OD; }
"PRINT"  { return PRINT; }
[0-9]+   { yylval = atoi(yytext); return NUMBER; }
[a-z]    { yylval = yytext[0] - 'a'; return NAME; }   
\        { ; }
\n       { nextline(); }
\t       { ; }
"//".*\n { nextline(); }
.        { yyerror("illegal token"); }
%% 
```

我输入的命令是：

```
flex filename.l 

gcc -c lex.yy.c -o out 
```

输出是

```
filename.l:2:23: fatal error: ifanw.tab.h: no such file or directory. 
```

是 gcc 库中的问题吗？如果是这样，我在哪里可以下载更新/修复的库？否则，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:40:09.483

将 flex 库添加到您的 gcc 命令中：

```
gcc -c lex.yy.c -lfl -o out 
```

另外，如果你包含一个`tab.h`文件，你有野牛文件吗？如果是这样，你是用`bison`命令编译它吗？

名称是 bison 生成的标头，因此您应该有一个`.y`扩展名为的文件，您需要使用 bison 命令编译该文件：`bison *.y`

使用 编译后`bison`，再次执行你的命令，但记得添加 flex 库标志 ( `-lfl`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:57:20.063

`gcc`告诉你问题是什么：它找不到你指定的包含文件。

这不是图书馆的问题。

您需要先从 .y 文件创建该文件

```
bison --debug --verbose -d ifanw.y 
```

您可能会发现[这个小教程](http://www.saltycrane.com/blog/2007/02/example-using-bison-and-flex-with/)很有用。

如果您没有 .y 文件，那么您正在尝试编译一个不完整的包，这将无法正常工作。您必须以某种方式从您获得已有文件的地方获取丢失的文件。

# java - 在java泛型中创建子类元素列表

> ID：14673618
> 
> 赞同：0
> 
> 时间：2013-02-03T14:38:20.320
> 
> 标签：java, generics, generic-list

我看到这里讨论了很多反射问题。不幸的是，我找不到任何解决我的问题的方法：

我有一个抽象类，它为子类处理很多东西

```
public abstract class A{
    public static <T extends A> create(){
        // some factory stuff here
    }
    public static List<....> createMore(){ /// some stuff here}
} 
```

A 类位于主项目的包含库中。现在我想将 A 的方法用于 A 的子类：

```
 public class A1 extends A {...} 
```

并使用它：

```
 A1 mySubclass = A1.create();
   ArrayList<A1> listOfSubclass= A1.createMore(); 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:57:28.627

`createMore`是可能的：

```
public static <T extends A> List<T> createMore(){
    return new ArrayList<T>();
} 
```

`create`如果您返回，则只有（正确）可能`null`：

```
public static <T extends A> T create(){
    return null;
} 
```

没有任何输入，该函数无法决定返回什么。它必须匹配调用者作用域在编译时想要的任何类型，而不知道那是什么。

# c - 引发异常的 Windows API

> ID：14673624
> 
> 赞同：1
> 
> 时间：2013-02-03T14:39:18.037
> 
> 标签：c, winapi, exception-handling

我正在寻找一种可能（在一个或多个场景中）抛出/引发异常的 winapi 函数的分类。一个明显的例子是已关闭资源上的 CloseHandle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:01:39.307

一些 Win32 API 函数被记录为抛出一些异常（当然是 SEH 异常，而不是 C++ 异常）。你可以去 MSDN 并检查每个功能。但考虑到 Win32 API 文档的质量，我不确定它是否**完全记录在案。**这不是 .NET :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:18:08.987

没有一个 Windows API 函数的官方列表详细说明哪些函数会引发 SEH 异常。您需要检查您调用的每个函数。

# android - 如何在列表视图中删除和清除删除线

> ID：14673625
> 
> 赞同：0
> 
> 时间：2013-02-03T14:39:20.383
> 
> 标签：android, listview, strikethrough

我正在开发简单的购物清单应用程序。因为我需要代码在第一次单击项目时进行删除线，然后在再次单击列表视图中的项目时清除删除线..

当单独执行 onItemClickListener 时，我能够找到显示如何创建删除线或清除删除线的代码。

我想要 onItemClickListener 的代码 - 首先在单击项目时，该项目需要在稍后再次单击删除项目时删除删除线需要清除。希望你有我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:55:51.247

您如何存储列表项？如果您将其存储在数据库中，您可以有一个额外的字段可能是布尔值，以指示删除并在单击时更新它（在 onItemClickListener 中）并使用它来删除和清除。

# c# - 使用 LinQ 将 DataGridView 中的数据编辑为实体作为数据源

> ID：14673636
> 
> 赞同：0
> 
> 时间：2013-02-03T14:40:23.217
> 
> 标签：c#, database, linq, entity-framework, linq-to-entities

![实体模型](../Images/d24f5e2e4396329d019abfcf3226702f.png)

这是我正在研究的一个简单模型，三个表。
我需要有一个 DataGridView 显示 ClientID ， Cl **​​ientName**， Current_Balance ， Required ， Expected ， Paid ， Difference_Req_Paid_Difference _Expe_Paid,DateWeekly 和这个 DataGridView 使我能够添加新行并编辑当前
作为 DataSource 我使用了 LinQ 之类的

```
visibledataGridView1.DataSource = context.Payments.Select(x => 
    new {  x.Client.ClientName,
x.ClientID,
x.Current_Balance,
x.Paid,x.Expected,
x.Required,
x.Difference_Exce_Paid,
x.Difference_Req_Paid 
}); 
```

但这仅表明不允许我添加或编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:06:51.803

请检查一下，希望对您有所帮助

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.editmode(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.editmode%28v=vs.90%29.aspx)

[http://www.idothink.com/2009/06/datagridview-editmode.html](http://www.idothink.com/2009/06/datagridview-editmode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:10:38.437

问题通过一个小技巧解决，如果当前 PaymentID 则检查数据库，它将由一个更新数据库中的行的 sp 进行修改，
如果不是，它将从 Payment 创建一个新对象并将其添加到 Payments。

# javascript - Javascript 高级闭包

> ID：14673640
> 
> 赞同：1
> 
> 时间：2013-02-03T14:40:56.333
> 
> 标签：javascript, security, function, code-injection

我目前正在开发一个项目，该项目允许您在文本区域中输入 Javascript 并运行它。有很多后台代码监控页面并向服务器发送数据。所有这些都在一个私有函数中，因此无法简单地使用控制台闯入。那么唯一的问题是在 textarea 输入的代码在包含服务器函数的私有函数内部进行评估，从而使其能够访问站点的内部。我怎样才能隔离它并使它的范围在私有函数之外？下面是一个例子：

```
<script>

var x = 2;
(function(){
    var x = 10;
    var elem = document.createElement('button');
    elem.addEventListener('click',function(){
        alert(x);
    });
    document.body.appendChild(elem);
})();

</script> 
```

在此示例中，我希望 x 在按下按钮时返回 2 而不是 10。从而迫使它像在全局范围内一样运行。

# 编辑

我已经尝试将函数绑定到似乎正在走正确路径的窗口，但没有达到我想要的效果。

```
<script>

var x = 2;
(function(){
    var x = 10;
    var elem = document.createElement('button');
    elem.addEventListener('click',(function(){
        alert(x);
    }).bind(window));
    document.body.appendChild(elem);
})();

</script> 
```

我也尝试将窗口应用于该功能，但可惜也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:06:37.377

在您**编辑**的版本中，将 alert(x) 更改为 alert( **this** .x)。它解决了你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:58:58.573

事实证明，答案比我想象的要简单得多。一个在全局范围内但在封闭函数之外的函数，可以被任何函数调用，但它只能访问全局范围内的变量。因此，下面的示例完美运行。

```
<script>

var run = function(){alert(x);};
var x = 2;
(function(){
    var x = 10;
    var elem = document.createElement('button');
    elem.addEventListener('click',run);
    document.body.appendChild(elem);
})();

</script> 
```

# python - ndb.query.count() 失败，大型实体的查询截止日期为 60 秒

> ID：14673642
> 
> 赞同：4
> 
> 时间：2013-02-03T14:41:05.523
> 
> 标签：python, google-app-engine, app-engine-ndb, bigtable

对于 google 数据存储中的 100k+ 个实体，ndb.query().count() 将在截止日期前取消，即使有索引。我尝试过使用produce_cursors 选项，但只有iter() 或fetch_page() 会返回游标，而count() 不会。

如何计算大型实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:39:29.240

要做一些昂贵的事情，你应该看看[Task Queue Python API](https://developers.google.com/appengine/docs/python/taskqueue/)。Google App Engine 基于 Task Queue API，提供了[延迟库](https://developers.google.com/appengine/articles/deferred)，我们可以使用它来简化运行后台任务的整个过程。

以下是如何在应用程序中使用延迟库的示例：

```
import logging

def count_large_query(query):
  total = query.count()
  logging.info('Total entities: %d' % total) 
```

然后您可以在您的应用程序中调用上述函数，例如：

```
from google.appengine.ext import deferred

# Somewhere in your request:
deferred.defer(count_large_query, ndb.query()) 
```

* * *

虽然我仍然不确定是否`count()`要使用如此大的数据存储返回任何结果，但您可以改用这个`count_large_query()`函数，它使用游标（未经测试）：

```
LIMIT = 1024
def count_large_query(query):
  cursor = None
  more = True
  total = 0
  while more:
    ndbs, cursor, more = query.fetch_page(LIMIT, start_cursor=cursor, keys_only=True)
    total += len(ndbs)

  logging.info('Total entitites: %d' % total) 
```

要在本地尝试上述设置`LIMIT`为 4 并检查您的控制台中是否可以看到该`Total entitites: ##`行。

* * *

正如 Guido 在评论中提到的那样，这也不会扩展：

> 这仍然无法扩展（尽管它可能会推迟问题）。一个任务有 10 分钟而不是 1 分钟，所以也许你可以算出 10 倍的实体。但它相当昂贵！如果您想正确解决这个问题，请搜索分片计数器（不幸的是，这是很多工作）。

因此，您可能想[了解编写可扩展应用程序的最佳实践](https://developers.google.com/appengine/articles/scaling/overview) ，尤其是[分片计数器](https://developers.google.com/appengine/articles/sharding_counters)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:18:19.493

这确实是一个令人沮丧的问题。我最近一直在这方面做一些工作，以获得一些一般的计数统计信息——基本上，满足某些查询的实体数量。`count()`是一个好主意，但它受到数据存储 RPC 超时的阻碍。

如果`count()`以某种方式支持游标，那就太好了，这样您就可以在结果集上游标并简单地将结果整数相加，而不是返回一个大的键列表而只是把它们扔掉。使用光标，您可以使用“传递接力棒”延迟方法继续跨越所有 1 分钟/10 分钟边界。使用`count()`（相对于`fetch(keys_only=True)`），您可以大大减少浪费，并有望提高 RPC 调用的速度，例如，使用该方法计数到 1,000,000 需要花费惊人的时间`fetch(keys_only=True)`——这在后端是一个昂贵的提议。

如果您只需要/想要定期计数统计信息（例如，按国家/地区划分的系统中我所有帐户的每日计数），则分片计数器的开销很大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T03:02:45.867

最好使用谷歌应用引擎后端。后端不受用户请求的 60 秒期限和任务的 10 分钟期限的限制，并且可以无限期运行。请在此处查看文档：[https ://developers.google.com/appengine/docs/java/backends/overview](https://developers.google.com/appengine/docs/java/backends/overview)

# windows-8 - Windows 应用商店应用程序：如何绘制虚线？

> ID：14673643
> 
> 赞同：5
> 
> 时间：2013-02-03T14:41:10.753
> 
> 标签：windows-8, winrt-xaml, windows-store-apps

如何在 Windows 应用商店应用程序 (XAML) 中绘制虚线？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T16:58:41.497

使用[StrokeDashArray](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.shapes.shape.strokedasharray.aspx)属性。例如，以下 XAML 在其下方的图像中生成行：

```
<Line Stroke="Red" X1="0" X2="400" Y1="0" Y2="400" 
      StrokeThickness="9" StrokeDashArray="3,5" StrokeDashCap="Round" /> 
```

![在此处输入图像描述](../Images/c08a531623f3d2f8c49ef64f4a37de0f.png)

# java - 设置 build.xml 失效值

> ID：14673648
> 
> 赞同：0
> 
> 时间：2013-02-03T14:41:34.263
> 
> 标签：java, netbeans

在我的 buildscript 尝试设置变量之前，我试图将 application.properties 文件中的“Application.revision”属性读入名为“svna.version”的变量中。在我的某些系统上，我没有 svn 客户端，因此 svnversion 失败并且它变为空白。我希望它是最后一个已知值，而不是失败。

如何设置 svna.version？我正在尝试做这样的事情

```
 <propertyfile file="src/CASUAL/resources/CASUALApp.properties"/>
    <property name="svna.version" value="${Application.revision}"/> 
```

我只需要知道如何将属性读入 Ant 变量。在上面的示例中，该值不是从属性文件中读取的。它被读取为文字字符串。

根据要求，我正在添加属性文件的内容：

```
Application.name=CASUAL
Application.title=CASUAL R
Application.version=${Application.revision}.${Application.buildnumber}
Application.vendor=AdamOutler
Application.homepage=xda-developers.com
Application.description=CASUAL Cross-platform ADB Scripting Universal Android Loader
Application.vendorId=AdamOutler
Application.id=${Application.name}
Application.lookAndFeel=system
Application.buildnumber=2,888
Application.revision=254 
```

我需要将 Application.revision 读入属性“svna.version”，但它读取为文字字符串而不是键值对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:30:36.373

好的 - 刚刚发现它。您需要使用`<loadproperties/>`或`<property file="foo.properties"/>`您正在使用的任务是编写属性文件而不是加载它们。

[在此处](http://ant.apache.org/manual/Tasks/loadproperties.html)或确实[在此处](http://ant.apache.org/manual/Tasks/property.html)加载属性

[在这里](http://ant.apache.org/manual/Tasks/propertyfile.html)写属性

在这里使用 -d 和 -v 运行 ant 非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:00:41.090

我只是想添加这个完成的代码示例，它尝试从命令加载 svnversion，如果失败，它会从存储的变量加载。

```
 <target name="-pre-init" description="Sets the buildversion for the current build">
        <exec outputproperty="svna.version" executable="svnversion" failifexecutionfails="false" >
            <arg value="-c" />
            <redirector>
                <outputfilterchain>
                    <tokenfilter>
                        <replaceregex pattern="^[0-9]*:?" replace="" flags="g"/>
                        <replaceregex pattern="M" replace="" flags="g"/>
                    </tokenfilter>
                </outputfilterchain>
            </redirector>
        </exec> 
        <echo>revision after svnversion command: ${svna.version}</echo>

        <loadproperties srcfile="src/CASUAL/resources/CASUALApp.properties"/>
        <property name="svna.version" value="${Application.revision}"/>
        <echo>Loaded property value: ${svna.version}</echo>
        <echo>revision after loaded property: ${svna.version}</echo> 
```

# jquery - 使用带有jquery datatable php sql的复选框更新MySQL中的多行

> ID：14673652
> 
> 赞同：0
> 
> 时间：2013-02-03T14:42:03.473
> 
> 标签：jquery, datatables, rows

我使用复选框、php 和 sql 使用简单的多行更新，但现在我正在转向 jquery.datatables [http://www.datatables.net/](http://www.datatables.net/)

我无法在其中获取复选框值。任何人都可以告诉我有什么方法或者我做错了什么吗？

以下是我正在使用的方法：

```
if (isset($_POST['checkbox'])) {
    $checkbox = $_POST['checkbox'];
    $id = "('" . implode( "','", $checkbox ) . "');" ;
    mysql_query ("update value1 from table where id in '$id'");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-31T12:37:55.233

我已经更新了新版本的数据表并修复了它。

# java - 为什么这段代码不会导致 ConcurrentModificationException？

> ID：14673653
> 
> 赞同：9
> 
> 时间：2013-02-03T14:42:06.377
> 
> 标签：java, iterator, concurrentmodification

我正在阅读有关 ConcurrentModificationException 以及如何避免它的信息。找到[一篇文章](http://www.javacodegeeks.com/2011/05/avoid-concurrentmodificationexception.html)。该文章中的第一个清单具有类似于以下的代码，这显然会导致异常：

```
List<String> myList = new ArrayList<String>();
myList.add("January");
myList.add("February");
myList.add("March");

Iterator<String> it = myList.iterator();
while(it.hasNext())
{
    String item = it.next();
    if("February".equals(item))
    {
        myList.remove(item);
    }
}

for (String item : myList)
{
    System.out.println(item);
} 
```

然后它继续解释如何通过各种建议解决问题。

当我试图重现它时，我没有得到异常！**为什么我没有得到例外？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T14:52:55.203

根据 Java API 文档[Iterator.hasNext](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#hasNext())不会抛出`ConcurrentModificationException`.

检查后`"January"`，`"February"`您从列表中删除一个元素。调用`it.hasNext()`不会抛出 a`ConcurrentModificationException`但返回 false。因此，您的代码干净地退出。然而，最后一个字符串永远不会被检查。如果您添加`"April"`到列表中，您将按预期获得异常。

```
import java.util.List;
import java.util.ArrayList;
import java.util.Iterator;

public class Main {
        public static void main(String args[]) {

                List<String> myList = new ArrayList<String>();
                myList.add("January");
                myList.add("February");
                myList.add("March");
                myList.add("April");

                Iterator<String> it = myList.iterator();
                while(it.hasNext())
                {
                    String item = it.next();
                    System.out.println("Checking: " + item);
                    if("February".equals(item))
                    {
                        myList.remove(item);
                    }
                }

                for (String item : myList)
                {
                    System.out.println(item);
                }

        }
} 
```

[http://ideone.com/VKhHWN](http://ideone.com/VKhHWN)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T15:39:06.027

从`ArrayList`源代码（JDK 1.7）：

```
private class Itr implements Iterator<E> {
    int cursor;       // index of next element to return
    int lastRet = -1; // index of last element returned; -1 if no such
    int expectedModCount = modCount;

    public boolean hasNext() {
        return cursor != size;
    }

    @SuppressWarnings("unchecked")
    public E next() {
        checkForComodification();
        int i = cursor;
        if (i >= size)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (i >= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i + 1;
        return (E) elementData[lastRet = i];
    }

    public void remove() {
        if (lastRet < 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            ArrayList.this.remove(lastRet);
            cursor = lastRet;
            lastRet = -1;
            expectedModCount = modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    final void checkForComodification() {
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
    }
} 
```

对 an 的每次修改操作`ArrayList`都会增加`modCount`字段（列表自创建以来被修改的次数）。

创建迭代器时，它将当前值存储`modCount`到中`expectedModCount`。逻辑是：

*   如果列表在迭代过程中根本没有被修改，`modCount == expectedModCount`
*   如果列表被迭代器自己的`remove()`方法修改，`modCount`则增加，但也`expectedModCount`增加，因此`modCount == expectedModCount`仍然成立
*   如果其他方法（甚至其他迭代器实例）修改列表，则`modCount`增加，因此`modCount != expectedModCount`，这会导致`ConcurrentModificationException`

但是，正如您从源代码中看到的那样，检查不是在`hasNext()`方法中执行的，而是在`next()`. 该`hasNext()`方法也仅将当前索引与列表大小进行比较。当您从列表 ( `"February"`) 中删除倒数第二个元素时，这将导致以下调用`hasNext()`简单地返回`false`并在 CME 可能被抛出之前终止迭代。

但是，如果您删除了倒数第二个以外的任何元素，则会引发异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T14:53:16.747

我认为正确的解释是来自 ConcurrentModificationExcetion 的 javadocs 的摘录：

> 请注意，不能保证快速失败的行为，因为一般来说，在存在不同步的并发修改的情况下不可能做出任何硬保证。快速失败操作会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖此异常来确保其正确性的程序是错误的：ConcurrentModificationException 应该仅用于检测错误。

因此，如果迭代器快速失败，它可能会抛出异常，但不能保证。尝试在您的示例中替换`February`为`January`并引发异常（至少在我的环境中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T20:37:37.000

迭代器在检查并发修改之前检查它是否已经迭代了尽可能多的元素以查看它是否已到达末尾。这意味着如果您仅删除倒数第二个元素，您将不会在同一个迭代器中看到 CME。

# android - Android - onDraw() 中的 invalidate()

> ID：14673656
> 
> 赞同：1
> 
> 时间：2013-02-03T14:42:40.160
> 
> 标签：android, android-canvas, android-view, android-image

我创建了两个类 - 一个是扩展`SurfaceView`并具有方法的类`onDraw()`，在其中我在画布上绘制图像：

```
public class Board extends SurfaceView{

    public BitmapFactory myBitmapFactory = new BitmapFactory();

    public  Bitmap myBitmap = new Bitmap;
    public Board(Context context) {
        super(context);
        setFocusable(true);
    }
    //here i implement all the abstract classes, which are not important now

    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        myBitmap = Bitmap.createScaledBitmap(myBitmapFactory.decodeResource(getResources(), R.drawable.image), 90, 90, false);
        Paint paint = new Paint();
        canvas.drawBitmap(myBitmap, 20, 20, paint);
    }
    public void setBitmap(Bitmap b){
        this.myBitmap = b;
    }
} 
```

而且我还有我的活动类，在单击运行该方法的按钮后`changeImage`。我想要两个更改我放在画布上的图像

```
public class MyActivity extends Activity {
    public Context context = this;
    public Board board;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_start_game);
    }
    public void changeImage(View view){
        Bitmap tmpBitmap = new Bitmap();
        BitmapFactory tmpBitmapFactory = new BitmapFactory();
        tmpBitmap = Bitmap.createScaledBitmap(tmpBitmapFactory.decodeResource(getResources(), R.drawable.image2), 130, 130, false);
        board.setBitmap(tmpBitmap);
        board.invalidate();
    }
} 
```

但是在调用方法之后`changeImage`什么都没有改变 - 图像与开始时相同。我也尝试使用`invalidate()`inside`setBitmap()`方法，但它也不起作用。这是因为每次我打电话时`invalidate()`我都在创建一个新的位图还是我做错了什么？

---编辑---所以，错误的是：

```
myBitmap = Bitmap.createScaledBitmap(myBitmapFactory.decodeResource(getResources(), R.drawable.image), 90, 90, false); 
```

一直在设置相同的图像。我改变了它，但仍然 invalidate() 那些不起作用。我的意思是图像没有改变。我在其他主题中寻找结果，但我没有找到任何解决方案，现在我的课程看起来像这样：

```
 public class Board extends SurfaceView{

       public BitmapFactory myBitmapFactory = new BitmapFactory();
       public  Bitmap myBitmap = Bitmap.createScaledBitmap(myBitmapFactory.decodeResource(getResources(), R.drawable.image), size, size, false);
    public int tmp = 0;
        public Paint paint = new Paint();
       protected void onDraw(Canvas canvas) {
           Paint paint = new Paint();
           canvas.drawBitmap(myBitmap, 50, 50, paint);
    }
    public void setBitmaps(Bitmap one){
            this.paint = new Paint();
            this.myBitmap = one;
            this.tmp=4;
            this.invalidate();

        } 
```

我的活动中的方法 changeImage() ：

```
public void changeImage(View view){
        Bitmap tmpBitmap1 = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.blue), 230, 230, false);
myGameBoard.setBitmaps(tmpBitmap1);

} 
```

我尝试使用：invalidate()、postInvalidate()，但它不起作用，我现在知道我做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:47:27.397

You update `myBitmap` in `onDraw()`:

```
myBitmap = Bitmap.createScaledBitmap(myBitmapFactory.decodeResource(getResources(), R.drawable.image), 90, 90, false); 
```

So your updated image is still not used as you directly override it with another image...

* * *

(*old answer, which is now obsolete due to fixed question*)
There seems something else off in your example code. In `setBitmap()` you store the new bitmap in `pawnBitmap`. In the `onDraw()` method, you do not use `pawnBitmap`. So it is expected that nothing changes, as you do not use the changed values...

* * *

(*old answer, which is now obsolete due to change in question*)
You are trying to call a static class method with:

```
Board.setBitmap(tmpBitmap);
Board.invalidate(); 
```

(I am wondering why you did not get compile errors... Or did you forgot to mention them?)
As `Board` is the name of your class. Instead you need to call the instance method.

```
Board board = ...
board.setBitmap(tmpBitmap);
board.invalidate(); 
```

This obviously requires the `board` instance, which you need to available in your activity class.

Note: if you are calling `invalidate()` from a non-UI thread, you need to use [`postInvalidate()`](http://developer.android.com/reference/android/view/View.html#postInvalidate%28%29).

# ios - iOS CALayer 和 TapGestureRecognizer

> ID：14673657
> 
> 赞同：3
> 
> 时间：2013-02-03T14:42:41.630
> 
> 标签：ios, uigesturerecognizer, calayer

我正在为 iPad 开发 iOS 6.1 上的应用程序。我对`CALayer`和有问题`TapGestureRecognizer`。

我有 7 个`CALayers`形成彩虹（每一层都是一种颜色）。每一层都是使用`CAShapeLayer`从 a 生成的`CGMutablePathRef`。一切正常。所有图层都绘制在屏幕上，我可以看到美丽的彩虹。

现在我想检测单一颜色/图层上方的点击。我尝试这种方式：

```
- (void)tap:(UITapGestureRecognizer*)recognizer
{
   //I've had the tapGestureRecognizer to rainbowView (that is an UIView) in viewDidLoad
  CGLayer* tappedLayer = [rainbowView.layer.presentationlayer hitTest:[recognizer locationInView:rainbowView];

  if (tappedLayer == purpleLayer) //for example
         NSLog(@"PURPLE!");
} 
```

我不明白为什么这段代码不起作用！我已经在此处标记了其他主题：都提出了`hitTest:`解决此类问题的方法。但就我而言，我无法获得预期的结果。谁能帮我？谢谢！！

**编辑：**

下面是创建路径和图层的代码：

```
- (void)viewDidLoad
{
     //Other layers
     ...
     ...
     //Purple Arc
     purplePath = CGPathCreateMutable();
     CGPathMoveToPoint(purplePath, NULL, 150, 400);
     CGPathAddCurveToPoint(purplePath, NULL, 150, 162, 550, 162, 550, 400);
     purpletrack = [CAShapeLayer layer];
     purpletrack.path = purplePath;
     purpletrack.strokeColor = [UIColor colorWithRed:134.0/255.0f green:50.0/255.0f blue:140.0/255.0f alpha:1.0].CGColor;
     purpletrack.fillColor = nil;
     purpletrack.lineWidth = 25.0;
     [rainbowView.layer insertSublayer:purpletrack above:bluetrack];
} 
```

这是我解决这个问题的第一个方法。并且触摸不起作用。

我还尝试创建一个`RainbowView`类，其中彩虹正在`drawRect`使用`UIBezierPaths`. [然后我按照http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/BezierPaths/BezierPaths.html](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/BezierPaths/BezierPaths.html)中的“在路径上进行命中检测”部分进行操作， 在这种情况下，问题是传递给方法的路径变量。我尝试将`UIBezierPath`传递的路径与路径进行比较，`RainbowView`但没有结果。

我可以尝试创建曲线而不是路径。在这种情况下，可能没有图形的填充部分，并且触摸区域仅限于笔划。但是，我怎样才能识别曲线上的触摸呢？

我对所有这些东西都很困惑！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:55:56.710

您面临的问题是您在命中测试时再次检查图层的框架/边界，而不是形状图层的路径。

如果您的路径已填满，则应改为使用`CGPathContainsPoint()`来确定水龙头是否在路径内。如果您的路径没有被填充而是被抚摸，我建议您参考[Ole Begemann 关于 CGPath Hit Testing 的文章](http://oleb.net/blog/2012/02/cgpath-hit-testing/)。

为了使您的代码更清晰，您可以在自己的子类中进行命中测试。此外，除非图层在命中测试时有动画效果，否则使用presentationLayer 是没有意义的。

# google-maps - 使用多个航点时，Google 地图不会显示“Not_Found”的 DirectionsStatus 警报

> ID：14673663
> 
> 赞同：-1
> 
> 时间：2013-02-03T14:43:11.833
> 
> 标签：google-maps, google-maps-api-3

感谢您对此提供的任何帮助！

我正在使用 Google Maps API V3 创建一个工具，让用户可以输入起点、终点和多个航点。有关多个航点的示例，请参阅：[https ://developers.google.com/maps/documentation/javascript/directions#Waypoints](https://developers.google.com/maps/documentation/javascript/directions#Waypoints)

然而，有时用户输入错误的地址或太多的航点。人们对他们的地图不会出现感到不安，他们不明白为什么。所以，我建立了一个警报系统。例如，当用户输入太多航路点时，他们会收到 (status == google.maps.DirectionsStatus.MAX_WAYPOINTS_EXCEEDED) 的警报，等等。

问题是：当用户输入多个航点时，谷歌不会给我这个状态的警报：

```
if(status == google.maps.DirectionsStatus.NOT_FOUND){
alert("Error: One or more of your addresses was not found."); } 
```

当我只有一个航路点时，警报会出现。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:09:49.380

将路点的`stopOver`-property 设置为`false`

（这将解决问题，但我不确定它是否适合您的应用程序）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:49:33.400

问题是你得到了一个不同的响应，ZERO_RESULTS，你忽略了它。您需要查看任何不正常的状态。

[例子](http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_status.html)

返回带有 2 个航点的 ZERO_RESULTS。NOT_FOUND 一个。两者都是错误。

# .net - 在一个或多个 Git 存储库中处理多个组件？

> ID：14673665
> 
> 赞同：4
> 
> 时间：2013-02-03T14:43:28.580
> 
> 标签：.net, git, continuous-integration

我有一个基于 .NET 的大型项目，其中包含超过 20 个单独的不同解决方案，每个解决方案代表更大系统中的不同模块。在每个解决方案中都有许多项目。

我们目前在一个 Git 存储库中处理所有解决方案，因为它们属于一起，并且到目前为止对我们来说效果很好。然而，现在我们想开始使用 CI 服务器来构建和测试修改。然而，这是开始变得毛茸茸的地方。我不能让 CI 服务器构建完整的解决方案，而只能构建已更改的组件。在 SVN 中，我们可以通过一个 repo 来实现这一点，并限制 CI 服务器的不同配置以监听不同的路径 - 例如，“src/ModuleA”是一个构建和配置，“src/ModuleB”是另一个。

我在 Git 中有哪些选择，什么是最佳实践？他们的优缺点是什么？我很想指出一个更大的开源解决方案，它具有类似的设置作为答案的一部分。

1.  我想我可以将每个模块都放在自己的仓库中？但是，当涉及到在 GitHub 等上托管时，这是一个问题，因为他们通过 repo 收费......否则这会是最好的选择吗？
2.  Git 子模块会起作用吗？这是子模块的正确用途吗？
3.  您是否知道 CI 产品中可以通过某种方式帮助解决此场景的其他选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:30:17.303

> 我想我可以将每个模块都放在自己的仓库中？但是，当涉及到在 GitHub 等上托管时，这是一个问题，因为他们通过 repo 收费......否则这会是最好的选择吗？

这仍然是最好的选择，除非这些模块过于相互依赖，这意味着在管理分支时会遇到额外的障碍（因为您需要记住同时分支所有或大部分模块，合并回来也是如此）

如果收费是个问题，请记住您可以在 BitBucket 存储库中有一个类似的组织（它提供[*免费的* *私人*存储库](https://bitbucket.org/plans)，尽管是针对*小*团队的）

一旦您在自己的 git 存储库中拥有每个模块，您就可以将它们与子树或子模块结合起来，正如我在“[结合在 git 存储库中的子项目中增长的基础项目，除了 git 子模块或子树合并方法](https://stackoverflow.com/questions/13539636/combine-a-base-project-that-is-growing-in-child-projects-in-git-repository-excep/13551162#13551162)”中所解释的那样。
[git slave](http://gitslave.sourceforge.net/)也可以是一个更简单的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-25T22:01:56.853

虽然**git submodule**和**git subtree**都是很好（但不同）的子组件管理解决方案，但它们确实有一些缺点

git子模块：

*   您最终会得到多个存储库。
*   您必须分别管理每个存储库。
*   用户界面有时[完全令人困惑](https://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)。

git subtree （我没有经常使用它，所以我的反对意见可能没有根据）：

*   您对整个项目只有一个历史记录。虽然这很好用，而且总有一种方法可以分离历史，但是没有简单的方法可以将**任意**版本的组件组合到一个系统中。

我设计了一种称为**git components**的方法，它在单个存储库中工作（如 git subtree），并为您提供独立组件历史的灵活性（如 git submodule）。

该方法基于*路径检出：（* `checkout <branch_name> -- .`注意尾随点）。

该方法使用一个简单的类似清单的 bash 脚本，并强加了一些命名约定以方便组件管理。

您可以在此处找到该方法的完整描述和玩具实现：

[https://github.com/picrin/git-components](https://github.com/picrin/git-components)

**编辑**

正如[VonC](https://stackoverflow.com/users/6309/vonc)所建议的，我尝试将其与 git 2.5 提供的新 git 功能结合起来`git worktree`。虽然 2.5 尚不可用（除非您从未来来到这里），但最新的 master 具有该功能并且似乎运行良好。

我建议`git worktree`与 git 组件一起使用的方法是检查主工作树以掌握，并为每个组件和系统的每个版本（clientA、clientB 等）创建一个工作树。这样，您可以同时处理每个组件，而无需在有人打扰您对组件 2 进行快速修复时将您的工作隐藏在组件 1 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-06T21:52:21.570

另一种选择是使用**git sparse-checkout。**这使您能够在过滤掉其他所有内容的同时，指定您希望在本地工作目录（例如“src/ModuleA”）中的 git 存储库中的哪些文件夹。

如果您的集成工具了解 git 的 sparse-checkout 功能，或者您可以设置一个脚本来为您的集成工具执行 sparse-checkout，那么这可能会解决您的问题。

# cassandra - 卡桑德拉启动

> ID：14673667
> 
> 赞同：9
> 
> 时间：2013-02-03T14:43:44.267
> 
> 标签：cassandra, startup

我是 Cassandra 数据库的新手。我已经下载了 Cassandra 并设置了 JAVA_HOME。当我尝试运行时，抛出以下异常：

```
Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 7199; nested exception is:
java.net.BindException: Address already in use: JVM_Bind. 
```

谁能帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-03-15T14:18:05.373

对于那些在使用 Ubuntu OS 时遇到同样问题的人来说，一个解决方案可以是杀死 CassandraDaemon ：

```
pkill -f CassandraDaemon 
```

当您第一次启动命令“cassandra -f”后台守护程序时正在运行，因此 Ctrl^C 不会停止进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-06T03:54:23.017

You could check if cassandra is running by checking the port

```
lsof -i :9160 
```

if you got a result back that means it is running

If you want to kill it , do `kill -9 "then the pid you got from the last step"`

if you want to see the ongoing log run

```
cassandra -f when you start cassandra 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T16:23:34.283

我似乎 Cassandra 已经在后台运行。尝试使用`cassandra-cli`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-09T01:26:57.653

1.  `ps -ax | grep cassandra`，记下进程id

2.  `kill <pid>`

3.  `sudo ./cassandra`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-06T04:00:47.257

端口 7199 是默认 Cassandra 的 JMX 端口（用于监控）。如果您尝试在一台物理机上运行多个实例，请修改`$CASSANDRA_HOME/conf/cassandra-env.sh`配置文件并设置不同的端口，例如 7299

```
JMX_PORT="7299" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-06T13:33:18.017

我正在写同样的东西，但对于 Windows 开发人员命令提示符：假设它显示 9042 端口的问题

**网络统计-ano | 查找字符串：9042**

列出所有使用端口 9042 的进程

**taskkill /PID 237979 /F**

这里 237979 是使用端口 9042 的 processid

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-03T08:21:12.857

[从http://technet.microsoft.com/en-us/sysinternals/bb897437](http://technet.microsoft.com/en-us/sysinternals/bb897437)下载 TCPView

> 打开 TCPView 应用程序并按端口对输出进行排序
> 
> 单击指向端口的记录 - 7199
> 
> 右键单击并“结束进程”
> 
> 现在，运行 Cassandra.bat，它应该可以工作了。

# android - 布局 xml 在较小的设备中不起作用

> ID：14673673
> 
> 赞同：-2
> 
> 时间：2013-02-03T14:44:32.677
> 
> 标签：android, xml, android-layout

我制作了一个 Android 应用程序，为此我编写了以下 xml 代码。它可以在大型设备中正确显示，但不能在诸如 Galaxy y 之类的较小设备中显示。所以我想让我的
代码动态化，以便它可以在所有设备中显示。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/ivReturnedPic"
    android:layout_width="fill_parent"
    android:layout_height="250dp"
    android:layout_gravity="center"
    android:src="@drawable/back" />

<Button
    android:id="@+id/ibtakePic"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="click to snap" />

<TextView
    android:id="@+id/tvDisplay"
    android:layout_width="wrap_content"
    android:layout_height="100dp"
    android:layout_gravity="center"
    android:background="#EEEEEE"
    android:gravity="center"
    android:text="Fool Around By  Clicking Test"
    android:textColor="#0000ff"
    android:textSize="35dp" />
<Button
    android:id="@+id/test"
    android:layout_width="344dp"
    android:layout_height="101dp"
    android:text="test" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:07:13.050

未显示测试按钮，因为视图中的剩余项目占据了整个屏幕。您应该使用 ScrollView 以使屏幕变得可滚动并处理不同的屏幕尺寸。

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

  <LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
  </LinearLayout>
</ScrollView> 
```

# javascript - 仅在 firefox javascript 中获取 option.remove 工作

> ID：14673680
> 
> 赞同：0
> 
> 时间：2013-02-03T14:45:41.590
> 
> 标签：javascript

我有一个在 IE och Chrome 中工作得很好的类移除器，不会出现任何错误，但在 Firefox 中。它根本不起作用。只是得到一个错误，即删除不是函数。

我一直在尝试不同的方法来使它工作，但它们都没有删除这个类。

```
function removeDice(){
 document.getElementsByClassName("dice")[0].remove(0);
} 
```

一个不错的功能，可以让我一个一个删除骰子类...适用于 chrome 但不适用于 Firefox。

在stackoverflow中阅读了不同的方法并尝试了这个

```
document.getElementById("dice").className =
   document.getElementById("dice").className.replace
      ( /(?:^|\s)MyClass(?!\S)/g , '' ) 
```

但也没有运气。有小费吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:50:45.597

采用`removeAttribute()`

```
document.getElementById("dice")[0].removeAttribute("class"); 
```

## 更新：

这样做： -

```
function removeClassFromAllElements(){
    var objClass = document.getElementsByClassName("YOUR-CLASS-NAME");
    var tempLen = objClass.length;
    for (i=0; i<tempLen; i++) {
        objClass[0].removeAttribute("class");
    }
}

removeClassFromAllElements(); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/VCMHW/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:56:40.247

试试这个

[小提琴](http://jsfiddle.net/mplungjan/Zb5Pd/)

```
function removeClass(classToRemove){
  var elems = document.getElementsByClassName(classToRemove);

  if (!elems) return;
  for (var i=elems.length-1;i>=0;i--) {
    var elem=elems[i];
    var classes=elem.className.split(" ");
    classes.splice(classes.indexOf(classToRemove),1);
    elem.className=classes.join(" ");
  }
} 
```

# java - Circle collision detection

> ID：14673683
> 
> 赞同：-2
> 
> 时间：2013-02-03T14:46:09.277
> 
> 标签：java

I have created a program that drawing 2 circle on the screen and using keyboard ASWD and arrow key to move around..here is the code

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class BallObject {
    private int x;
    private int y;
    private int radius;
BallObject() {
    x=0;
    y=0;
    radius=0;
}

BallObject (int x,int y,int radius) {
    this.x=x;
    this.y=y;
    this.radius=radius;
}
public void setX(int x) {this.x=x;}
public void setY(int y) {this.y=y;}
public void setRadius(int r) {radius=r;}

public int getX() {return x;}
public int getY() {return y;}
public int getRadius() {return radius;}

}

class Ball extends JFrame implements KeyListener {
 BallObject ball1;
 BallObject ball2;

Ball() {
    super("Simple Ball");

    setSize(800,600); //set screen resolution
    ball1 = new BallObject(getWidth()/2,getHeight()/2,20);
    ball2 = new BallObject(40,40,20);
    addKeyListener(this);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
}

public void paint(Graphics g) {
    Graphics2D g2d = (Graphics2D)g;

    g2d.setColor(Color.BLACK);
    g2d.fill(new Rectangle(0,0,800,600));

    //drawing ball1
    g2d.setColor(Color.RED);
    g2d.fillOval(ball1.getX(),ball1.getY(),ball1.getRadius()*2,ball1.getRadius()*2);
    //drawing ball2
    g2d.setColor(Color.GREEN);
    g2d.fillOval(ball2.getX(),ball2.getY(),ball2.getRadius()*2,ball2.getRadius()*2);
}

public static void main (String args[]) {
   new Ball();
}

public void keyPressed(KeyEvent e) {
    if(e.getKeyCode()==KeyEvent.VK_LEFT)
        ball1.setX(ball1.getX()-2);

    if(e.getKeyCode()==KeyEvent.VK_RIGHT)
        ball1.setX(ball1.getX()+2);

    if(e.getKeyCode()==KeyEvent.VK_UP)
        ball1.setY(ball1.getY()-2);

    if(e.getKeyCode()==KeyEvent.VK_DOWN)
        ball1.setY(ball1.getY()+2);

    if(e.getKeyCode()==KeyEvent.VK_A){
            ball2.setX(ball2.getX()-2);
            //System.out.println("Hello");
    }

    if(e.getKeyCode()==KeyEvent.VK_D)
        ball2.setX(ball2.getX()+2);

    if(e.getKeyCode()==KeyEvent.VK_W)
        ball2.setY(ball2.getY()-2);

    if(e.getKeyCode()==KeyEvent.VK_S)
        ball2.setY(ball2.getY()+2);

        repaint();
}

            //redraw the screen to show the updated ball location
public void keyTyped(KeyEvent e) {}
public void keyReleased(KeyEvent e) {}

} 
```

Now i need to test the collision..Once two balls are touching each other.it will show a message "COLLISION DETECTED"..pls help...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:48:05.273

不是很简单：如果两个中心点的距离小于或等于半径之和，那么就会发生碰撞？

# symfony - Having multiple registration form with fosuser bundle

> ID：14673685
> 
> 赞同：1
> 
> 时间：2013-02-03T14:46:22.820
> 
> 标签：symfony, registration, symfony-2.1, symfony-forms, fosuserbundle

I'm new to symfony2 & I'm writing an application that requires to have 2 different user types. one is normal user & the other is the one which has same fields as user plus some other extra fields. we design it with foreign key & one-to-one relationship. Now I don't understand how to build two different registration forms with the functionality of FOSUserBundle.i mean i don't know how to override RegistrationController for this purpose

thanks for your answer :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:12:24.123

我会推荐使用[PugxMultiUserBundle](https://github.com/PUGX/PUGXMultiUserBundle)。我认为这正是你所追求的，我一直在我的一个项目中使用它，它就像一个魅力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T22:20:49.410

您可以使用 RollerworksMultiUserBundle： [https ://github.com/rollerworks/RollerworksMultiUserBundle](https://github.com/rollerworks/RollerworksMultiUserBundle)

# mongodb - mongodb的全文搜索算法

> ID：14673687
> 
> 赞同：1
> 
> 时间：2013-02-03T14:46:39.233
> 
> 标签：mongodb

我有一个博客，我想用 mongodb 搜索标题，而不是用 solr 或弹性搜索，例如，我有这些标题，

```
wolkswagen
wolkswagen polo
wolkswagen passat 
```

在大众汽车，我有大众汽车的历史，在马球和帕萨特，我有这些汽车的定义，我用空间标记标题。当我输入“wolkswagen”时，polo 和 passat 在上面，但 wolkswagen 应该在上面，应该用什么算法把 wolkswagen 放在上面？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:03:42.057

好的，你有两个选择：

您可以使用 2.4 中的新 FTS 功能：http: [//architects.dzone.com/articles/mongodb-full-text-search](http://architects.dzone.com/articles/mongodb-full-text-search)。我应该提一下，FTS 是实验性的，而且文档非常糟糕，所以这可能不适合你。它默认按相关性排序，因此您正在寻找的结果模式会自动应用。

您可以进行客户端处理（不建议用于大型集合），从而获得结果并手动实际测试与搜索块中每个单词的相关性。至于算法可能是这样的：

*   迭代由空格分隔的每个单词
*   为单词的完整程度分配 0 - 1 的值，如果匹配完整的单词，则分配 1
*   将其添加并放回每个结果的行中。
*   使用客户端排序按每个结果的分数进行排序。

恐怕如果不了解您的编程语言，那是我能做的最好的事情。

# facebook - (#100) 发布到 Facebook 页面时链接 URL 的格式不正确

> ID：14673688
> 
> 赞同：5
> 
> 时间：2013-02-03T14:46:42.610
> 
> 标签：facebook, facebook-graph-api

我正在尝试将 URL 发布到 Facebook 页面。使用 PHP SDK。我能够从我的本地主机成功发布。但是在实时服务器上，我得到的结果是“对不起，出了点问题”。

从实时服务器运行代码时，我可以毫无问题地获取 access_token 以发布到页面。只有发帖是行不通的。

我尝试使用图形 api 资源管理器手动发布链接。并发现

1.  我能够通过图形 api 浏览器成功发布**消息。**
2.  我无法通过图形 API 资源管理器发布 URL。我得到错误

    > **“(#100) 链接 URL 格式不正确”**

我确实对我要发布的链接进行了编码。它们是有效的现有链接。

我什至尝试使用 http%3A%2F%2Fgoogle.com ，它会返回相同的错误。

## 其他一些信息

1.  代码从**mydomainname.com/folder/执行**
2.  我已将域名添加到“应用程序域”字段。
3.  沙盒模式已开启。
4.  当我从本地测试时，我能够发布 25 个指向该页面的链接。[之后它给出了错误]。当实时服务器上的东西不能正常工作时，我回到 locahost 再次测试 25 个链接和更多链接，发现从 localhost 可以正常工作。我想知道我是否达到了一些限制或我的应用程序已被列入黑名单。

有人有什么想法吗？

谢谢

# 更新

我获取了实时服务器使用的 URL（发布到 facebook 页面的链接），并使用 fiddler 从我的本地计算机发布它。它奏效了。所以我想知道是什么阻止了代码从服务器成功运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:53:45.633

我从另一个域尝试了相同的代码并且它有效。

我还没有确定它是否因为第一个域发送 CURL 请求的方式而无法正常工作，或者该域是否因过去发布过多而被列入黑名单。

无论哪种方式，facebook的错误消息都没有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T19:56:26.703

如果您使用自己的墙，请注意以下之间的区别：

“我/饲料”和“我/照片”网址。第一个不行！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T06:43:55.097

我也尝试过同样的事情，但不幸的是它适用于在线图像，但不适用于本地图像。IE

```
'picture' => class_exists('CurlFile', false) ? 
             new CURLFile($photo, 'image/jpg') : "@{$photo}", 
```

不会工作，但是

'图片' => " [http://i.stack.imgur.com/VGWZD.jpg?s=24&g=1](http://i.stack.imgur.com/VGWZD.jpg?s=24&g=1) ",

将工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T15:47:33.243

我对此也有一些问题。奇怪的是，它仅在我通过 POST 请求向 Graph API发送**没有任何 URL 编码的图片的 url 时才起作用。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-22T20:36:15.280

试试不带引号“”的链接。我和你一样被困住了，但没有引号就再也没有了。

# php - 在PHP中切断大文件的开头

> ID：14673690
> 
> 赞同：1
> 
> 时间：2013-02-03T14:47:07.600
> 
> 标签：php, file-io

我想在 PHP 中切断一个大文件的开头。`file_get_contents()`由于内存限制，无法使用。

从文件中删除第一个`$n`字符的最佳方法是什么？

如果可以在不创建第二个文件的情况下做到这一点，我更喜欢那个解决方案。

**更新**文件被修改后，它将被其他脚本使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:51:35.403

如果您没有足够的内存来缓冲整个文件，则无论您的解决方案如何，都需要创建两个文件（至少是暂时的）。

查看[`fseek()`](http://php.net/manual/en/function.fseek.php)，它允许您转到文件中的特定字节位置。

```
// Open the file
$filename = 'somefile.dat';
$file = fopen($filename, 'r');

// Skip the first 1 KB
fseek($file, 1024);

// Your processing goes here...

// Close the file
fclose($file); 
```

在您的情况下，您可以同时打开原始文件进行读取和临时文件进行写入。寻找原始文件。循环遍历原始文件，读取一小块并将其写入 temp。然后重命名 temp 以与原始名称相同。

# java - 具有休眠和最佳关系模型的 JPA 注释映射

> ID：14673691
> 
> 赞同：0
> 
> 时间：2013-02-03T14:47:07.633
> 
> 标签：java, hibernate, jpa, annotations

我正在尝试对此进行注释：

```
public class                        Keyword {
    @Id @GeneratedValue
    private Integer                 id;
    //Missing annotation
    private Map<Keyword, Integer>   keywordRelated;
} 
```

我找到了这个[例子](http://docs.oracle.com/javaee/6/api/javax/persistence/MapKeyJoinColumn.html)，但他们没有提供关系模型，而且它不是完全相同的模型。我不知道他们的桌子是怎样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:08:28.727

以下仅说明如何映射具有实体作为键的 Map（取决于情况可能有更好的解决方案，例如具有比率的中间对象）。

[@ElementCollection](http://docs.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html)专为映射此类集合而设计。当值不是实体时，不能使用 @OneToMany。

默认情况下遵循映射

```
@ElementCollection
private Map<Keyword, Integer> keywordRelated; 
```

映射到数据库中的下表（假设关键字实体的表名称是关键字并且不受@Table-annotation 影响）：

```
Keyword_KEYWORDRELATED (
  Keyword_ID (PK, FK to Keyword ID), 
  KEYWORDRELATED , 
  keywordRelated_KEY (FK to Keyword ID)
) 
```

如果数据库表和列的默认命名不够，可以按如下方式自定义：

```
@ElementCollection
@CollectionTable(name= "keyword_to_related_keyword")
@Column(name="ratio")
@MapKeyColumn(name="related_keyword_id")
@MapKeyJoinColumn(name="some_other_preferred_name")
public Map<Keyword, Integer> keywordRelated; 
```

# javascript - Scoping rules for variables initialized in a for loop

> ID：14673692
> 
> 赞同：4
> 
> 时间：2013-02-03T14:47:07.980
> 
> 标签：javascript, settimeout, scoping

> **Possible Duplicate:**
> [Javascript closure inside loops - simple practical example](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

I'm playing around with setTimeout in a project of mine in order to throttle the adding of elements to the DOM (so UI won't freeze during page loading). However, I've encountered something a bit puzzling to me. Given this code:

```
for(var i = 0; i < 5; i++) {
    var j = i + 10;
    console.log("i is: " + i + " j is: " + j);
    setTimeout(function() {
        console.log("in timeout i is: " + i + " j is: " + j);
    }, i * 1000);
} 
```

I get the following output:

```
i is: 0 j is: 10
i is: 1 j is: 11
i is: 2 j is: 12
i is: 3 j is: 13
i is: 4 j is: 14
in timeout i is: 5 j is: 14
in timeout i is: 5 j is: 14
in timeout i is: 5 j is: 14
in timeout i is: 5 j is: 14
in timeout i is: 5 j is: 14 
```

That the value of `i` in the timeout is 5 is obvious since i is scoped in the for loop initialization. However, how come `j` is 14 for all timeout outputs? I would have thought that `j` would have output 10, 11, 12, 13, 14 in the timeout since it is scoped within the loop. How could I achieve that result?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T14:54:00.060

那是因为，在 JavaScript 中，`var`有**函数作用域**。

`var`声明将被提升到当前执行上下文的顶部。也就是说，如果它在函数内部，`var`则将是函数执行上下文内的范围，否则是程序（全局）执行上下文。

ECMAScript 2015（又名 ES6）引入[`let`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)了允许您创建块作用域变量的方法，但由于它没有得到广泛支持，我将留下链接以供参考。

一种解决方法，仍然`var`在循环内使用并使其“作用域”，是创建一个新的执行上下文，也称为[闭包](https://stackoverflow.com/q/111102/1331430)：

```
function callbackFactory(i, j) {
    // Now `i` and `j` are scoped inside each `callbackFactory` execution context.
    return function() { // This returned function will be used by the `setTimeout`.
       // Lexical scope (scope chain) will seek up the closest `i` and `j` in parent
       // scopes, that being of the `callbackFactory`'s scope in which this returned
       // function has been initialized.
       console.log("in timeout i is: " + i + " j is: " + j);
    };
}
for(var i = 0; i < 5; i++) {
    var j = i + 10;
    console.log("i is: " + i + " j is: " + j);
    setTimeout( callbackFactory(i, j), i * 1000);
} 
```

当我在回调范围内`i`和`j`范围内设置范围时，它们将在内部返回与`setTimeout`传递给时相同的值`callbackFactory`。

见[**现场演示**](http://jsfiddle.net/ke7Kk/)。

做同样事情的另一种方法是在循环内创建一个[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)`for`。这通常更容易阅读，但 JS(H|L)int 会骂你。`;)`这是因为在循环中创建函数被认为对性能不利。

```
for(var i = 0; i < 5; i++) {
    var j = i + 10;
    console.log("i is: " + i + " j is: " + j);
    (function(i, j) { // new execution context created for each iteration
        setTimeout(function() {
            console.log("in timeout i is: " + i + " j is: " + j);
        }, i * 1000);
    }(i, j)); // the variables inside the `for` are passed to the IIFE
} 
```

上面我`for`在每次迭代中创建了一个新的执行上下文。（[演示](http://jsfiddle.net/ke7Kk/1/)）

将第一种方法 ( `callbackFactory`) 与上面的 IIFE 混合，我们甚至可以做出第三种选择：

```
for(var i = 0; i < 5; i++) {
    var j = i + 10;
    console.log("i is: " + i + " j is: " + j);
    setTimeout(function(i, j) {
        return function() {
            console.log("in timeout i is: " + i + " j is: " + j);
        };
    }(i, j), i * 1000);
} 
```

这只是使用 IIFE 代替`callbackFactory`函数。这似乎不太容易阅读，并且仍然在`for`循环内创建对性能不利的函数，但请注意这也是可能的并且[有效](http://jsfiddle.net/ke7Kk/2/)。

这 3 种方法在野外非常常见。`=]`

* * *

哦，差点忘了回答主要问题。只需将与循环放在`callbackFactory`同一范围内，然后不要在其内部确定范围，而是让范围链寻找外部范围的 ：`for``i``i`

```
(function() {
    var i, j;
    function callbackFactory(j) {
    // the `j` inside this execution context enters it as a formal parameter,
    // shadowing the outer `j`. That is, it is independent from the outer `j`.
    // You could name the parameter as "k" and use "k" when logging, for example.
        return function() {
           // Scope chain will seek the closest `j` in parent scopes, that being
           // the one from the callbackFactory's scope in which this returned
           // function has been initialized.
           // It will also seek up the "closest" `i`,
           // which is scoped inside the outer wrapper IIFE.
           console.log("in timeout i is: " + i + " j is: " + j);
        };
    }
    for(i = 0; i < 5; i++) {
        j = i + 10;
        console.log("i is: " + i + " j is: " + j);
        setTimeout( callbackFactory(j), i * 1000);
    }
}());
/* Yields:
i is: 0 j is: 10  
i is: 1 j is: 11  
i is: 2 j is: 12  
i is: 3 j is: 13  
i is: 4 j is: 14  
in timeout i is: 5 j is: 10  
in timeout i is: 5 j is: 11  
in timeout i is: 5 j is: 12  
in timeout i is: 5 j is: 13  
in timeout i is: 5 j is: 14 */ 
```

[**小提琴**](http://jsfiddle.net/ke7Kk/4/)

请注意，我将`i`and`j`声明移到了范围的顶部，只是为了便于阅读。它具有与 相同的效果`for (var i = [...]`，将由解释器提升。

# java - 使用 gson 反序列化 json 字符串

> ID：14673694
> 
> 赞同：6
> 
> 时间：2013-02-03T14:47:28.693
> 
> 标签：java, json, jsp, arraylist, gson

我的 java servlet 以这种方式返回一个 json 字符串：

```
Gson gson = new Gson();     
String lista = gson.toJson(utenti);
System.out.println(lista);
request.setAttribute("lista", lista);
request.getRequestDispatcher("GestioneUtenti.jsp").forward(request, response); 
```

现在，在 jsp 页面中，我想再次拥​​有我的 arrayList。我尝试这样做：

```
<%
String lista = (String)request.getAttribute("lista");
Gson gson = new Gson();
ArrayList<Utente> users = gson.fromJson(lista, TypeToken.get(new ArrayList<Utente>().getClass()).getType());        
out.println(users.get(0).getUsername());
%> 
```

我有这个例外：

```
java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to classi.Utente 
```

你能帮帮我吗？如果我错过了一些细节告诉我！谢谢 ：-）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T15:17:52.200

我用这段代码解决了：

```
String lista = (String)request.getAttribute("lista");
Gson gson = new Gson();                         
Type listType = new TypeToken<ArrayList<Utente>>() {}.getType();
ArrayList<Utente> users = new Gson().fromJson(lista, listType); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:57:25.997

它建议您有一个 StringMap，您已在其中声明了一个 Utente 类。错误的来源很可能是您的用户列表

# c++ - 数字非常大的数字的组成

> ID：14673695
> 
> 赞同：0
> 
> 时间：2013-02-03T14:47:34.197
> 
> 标签：c++, fibonacci, limits

我正在尝试使用数字 1 和 2 计算数字[组合](http://en.wikipedia.org/wiki/Composition_%28number_theory%29)方式的数量。这可以使用斐波那契数列找到，其中`F(1)=1`和`F(2)=2`

`F(n)=F(n-1)+F(n-2)`

由于 F(n) 可能非常大，我只需要`F(n)%1000000007`。为了加快我使用斐波那契指数的过程。我为同一个问题编写了两个代码（两者几乎相似）。但是其中一个对于大数字失败了。我我无法弄清楚哪一个是正确的？

`CODE 1`

[http://ideone.com/iCPEyz](http://ideone.com/iCPEyz)

`CODE 2`

[http://ideone.com/Un5p2S](http://ideone.com/Un5p2S)

虽然我觉得第一个应该是正确的。我无法弄清楚当我们乘以 say`a`并且`b`值`a`已经超过上限`a`并且当我们乘以 时`b`会发生什么情况我怎么能确定这`a*b`是正确的。据我所知，如果`a`值高于其数据类型限制，则该值再次从最低值开始，如下例所示。

```
#include<iostream>
#include<limits.h>
using namespace std;
int main()
{
    cout<<UINT_MAX<<endl;
    cout<<UINT_MAX+2;
} 
```

`Output`

```
4294967295

1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:52:03.333

无符号 n 位类型的“溢出”（对于无符号数，它们并不真正称之为“溢出”）只会保留模 2^n 的值，而不是模任意模（它们怎么可能？尝试重现这些步骤）笔和纸）。因此，您必须确保没有任何操作超出您的类型的限制，以保持正确的结果 mod 100000007。

# android - Android ListView 项目重新出现

> ID：14673697
> 
> 赞同：1
> 
> 时间：2013-02-03T14:47:48.223
> 
> 标签：android, android-listview, adapter, listitem

我正在开发一个基于 ListView 的应用程序，但我遇到了一个非常奇怪的问题，我的 ListItems 正在重新出现，并且正确的项目没有显示在正确的位置。为了便于理解，我将每个 ListItem 上的文本设置为与其位置相同。我在我的适配器 getView() 调用中这样做。如果我有我的 Nexus 7 4 ListItems 是可见的。如果我总共有 10 个 ListItem，那么它将像 0、1、3、4、0、1、2、3、4 一样。这适用于所有设备，这意味着屏幕上最初的项目数 + 1 将是正确的而所有其他 ListItems 都重新排列。

你们认为我的问题出在我的代码的哪一部分，因为现在我已经尝试解决这个问题几个小时了，我一无所知。非常感谢所有帮助。

编辑：

这是我的getView()：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    CountdownItem ci = mTitle.get(position);

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.list_item, parent, false);

        holder = new CountdownViewHolder();
        holder.mTitle = (TextView) convertView.findViewById(R.id.textPrim);
        holder.mSubtitle = (TextView) convertView
                .findViewById(R.id.textSec);
        holder.mDayProgress = (ProgressBar) convertView
                .findViewById(R.id.day_progress);
        holder.mMonthProgress = (ProgressBar) convertView
                .findViewById(R.id.month_progress);
        holder.mYearText = (TextView) convertView
                .findViewById(R.id.year_text);
        holder.day_help = (TextView) convertView
                .findViewById(R.id.day_help);
        holder.month_help = (TextView) convertView
                .findViewById(R.id.month_help);

        holder.setTitle(Integer.toString(position) + " Title");
        holder.setSubtitle(ci.getSubtitle());
        holder.fixImageAndText(position);

        convertView.setTag(holder);
    } else {
        holder = (CountdownViewHolder) convertView.getTag();
    }

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:05:04.113

是的，这是因为 android 重用列表中的视图，以提高性能和渲染速度。

持有者模式用于存储视图 ID。检索它们后，您必须设置要在其中看到的文本。

例如，您检索您的数据（例如`myDataArray[position]`），如果一切正常，您继续使用 TextView 设置标题、副标题、日期进度等`setText()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:08:26.703

您没有正确使用 ViewHolder 模式。以下代码需要移到`if/else`子句之外和之前`return convertView`：

```
 holder.setTitle(Integer.toString(position) + " Title");
   holder.setSubtitle(ci.getSubtitle());
   holder.fixImageAndText(position); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T15:11:07.923

这是列表视图在重用单元格时的正确行为，问题是您仅在首次创建单元格时设置值。

当 convertView == null 时，列表视图没有要回收的单元格。但是，一旦它创建了一些，它就可以在滚动时重复使用它们来显示。

您需要做的是设置标题和副标题，即使 convertView 不为空。这样你就可以为每个新的列表位置设置它们。

# json - 使用淘汰赛 js 中的“选项”在 Select 语句中选择值

> ID：14673702
> 
> 赞同：1
> 
> 时间：2013-02-03T14:48:36.723
> 
> 标签：json, knockout.js

我正在尝试使用 Knockout JS 提交表单，因为该数据作为 json 传递。在这里我遇到了问题。以下是我的KO模型。

```
var permissionRequestModel = {

fromDate: ko.observable(''),
toDate: ko.observable(''),
checkFullDay: ko.observable(false),

fromTimeHH: ko.observable(''),
fromTimeMM: ko.observable(''),
toTimeHH: ko.observable(''),
toTimeMM: ko.observable(''),

permissionTypeOne: ko.observable(''),
permissionTypeTwo: ko.observable(''),

approverList: ko.observableArray([]),

reasonLeave: ko.observable('')

}; 
```

现在在这个approverList 中，由一个从检索到的json 对象中获取的数组填充，其填充如下

```
$(function () {
$.getJSON("http://ec20032432.compute-1.amazonaws.com/api/Request/permission?appid=1&opertype=get_approver_list", function (data) { permissionRequestModel.approverList(data.Approvers); })
}); 
```

检索到的 data.Approvers 将采用以下形式：

```
"Approvers":
[{"ID":"asdasd",
 "Display_Name":"Jason asdasd"}] 
```

我需要下拉列表的文本为“Display_Name”，值为“ID”，因此我使用以下标记来执行此操作：

```
 <select name="approverList" id="approverList" data-native-menu="true" class="required" data-bind="options: approverList, optionsCaption: 'Select Your Approver', optionsText: 'Display_Name', optionsValue:'ID'">
                    </select> 
```

到目前为止它很好，但是现在当我使用以下代码提交表单时，我们作为对象而不是选定的值（即 ID）传递了approverList：

```
permissionRequestModel.requestPermission = function () {
if ($("#permissionRequestForm").valid()) {
    $.ajax({
        url: "http://eertretetrer.compute-1.amazonaws.com/api/Request/permission?appid=1&opertype=requestor",
        type: "POST",
        data: ko.toJSON(permissionRequestModel),
        processData:false,
        contentType: "application/json",
        dataType:"json",
        success: function (result) {
            alert("Success");
        },
        error: function (result) {
            alert(result.responseText);
        }
     });
}
else {
}
}; 
```

有谁知道为什么会这样？我如何发送值而不是（ID）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:10:11.993

请再添加一个名为的 observable

```
self.ApproverId = ko.observable(); 
```

然后在你的 html 中绑定就像

```
<select name="approverList" id="approverList" data-native-menu="true" class="required" data-bind="options: approverList, optionsCaption: 'Select Your Approver', optionsText: 'Display_Name', value:ApproverId"></select> 
```

我希望这有帮助

# cocoa-touch - 为 UIImageView 分配一个字符串标签

> ID：14673704
> 
> 赞同：0
> 
> 时间：2013-02-03T14:48:42.157
> 
> 标签：cocoa-touch

是否可以将文本标签分配给任何 UIObject？如果没有，还有其他方法可以做到吗？例如，我可以这样做：

```
image.tag = [NSString stringWithFormat: @"Hello"]; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:00:07.033

tag 属性是`NSInteger`- 因此这是不可能的。

您可以创建一个子类并添加一个`NSString`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:59:40.163

不，标签是一个整数。

考虑子类化`UIImageView`类并仅添加一个`NSString`属性。这些天真的很简单。

例子：

```
@interface TaggedImageView : UIImageView
@property (nonatomic, strong) NSString *tagString;
@end
@implementation TaggedImageView
@end 
```

然后只需使用`TaggedImageView`.`UIImageView`

如果您只访问`MyImageView`一个 .m 文件，您可以将这些行放在`#import`语句之后。

# firebase - 如果我使用 Firebase 简单的用户名和密码身份验证，如何返回用户列表

> ID：14673708
> 
> 赞同：69
> 
> 时间：2013-02-03T14:49:03.020
> 
> 标签：firebase, firebase-authentication

不确定我是否做错了什么，但使用这个 api [https://www.firebase.com/docs/security/simple-login-email-password.html](https://www.firebase.com/docs/security/simple-login-email-password.html)我可以成功地创建一个用户 - 根据返回消息，但我在 Forge 控制台的任何地方都看不到该用户。你怎么知道注册了哪些用户？

我应该返回用户 ID 并在 Firebase 中创建我自己的用户对象，还是这种重复是不必要的。我确实需要添加一些额外的用户属性，所以也许我还是需要这样做。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-03T19:04:09.003

在 Firebase 身份验证（以前称为 Firebase SimpleLogin）中使用电子邮件/密码身份验证时，用户的电子邮件和密码组合将与实际存储在 Firebase 中的数据分开安全地存储。

Firebase 中的数据与用户的电子邮件/密码哈希组合之间的这种屏障是设计使然：我们希望让您更轻松地 (1) 开发您的应用程序，(2) 防止任何意外的用户凭据泄漏，以及 (3 ) 仍然为您提供了在 Firebase 中存储用户数据的完全灵活性。

这意味着我们只存储电子邮件地址/密码哈希组合而不存储其他任何内容，因此您可以决定如何在 Firebase 中存储实际用户数据。正如您所建议的，您应该获取用户 ID 并将该数据存储在您的 Firebase 中的某个位置，例如 /users/$id，并使用 Firebase[安全规则语言](https://www.firebase.com/docs/security/security-rules.html "安全规则语言")来确定对该数据的读/写访问权限。您的用户是唯一的`id`，并且`email`已经在`auth`您编写规则时将使用的变量中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-30T11:47:47.480

在这里，我创建了一个 Android 程序来执行 Rob 对 firebase 初学者（像我一样）所说的事情。这个程序首先存储已签名或已登录用户的用户名，然后将它们显示在列表视图中

**SignInActivity.java**

```
public class SignInActivity extends BaseActivity implements View.OnClickListener,View.OnKeyListener{

    private DatabaseReference mDatabase;
    public static FirebaseAuth mAuth;
    private static final String TAG = "MainActivity";

    EditText usernameField;
    EditText passwordField;
    TextView changeSignUpModeTextView;
    Button signUpButton;
    ImageView logo;
    RelativeLayout relativeLayout;

    Boolean signUpModeActive;
    static ArrayList<String> userList = new ArrayList<>();

    @Override
    public void onStart() {
        super.onStart();

        // Check auth on Activity start
        if (mAuth.getCurrentUser() != null) {
            onAuthSuccess(mAuth.getCurrentUser());
        }
    }
    @Override
    public boolean onKey(View view, int i, KeyEvent keyEvent) {

        if(i == keyEvent.KEYCODE_ENTER && keyEvent.getAction() == keyEvent.ACTION_DOWN){
            signUpOrLogIn(view);
        }
         return false;
    }

    @Override
    public void onClick(View view) {

        if(view.getId() == R.id.changeSignUpMode){

            if (signUpModeActive == true){

                signUpModeActive = false;
                changeSignUpModeTextView.setText("Sign Up");
                signUpButton.setText("Log In");

            }else{

                signUpModeActive = true;
                changeSignUpModeTextView.setText("Log In");
                signUpButton.setText("Sign Up");
            }

        }else if(view.getId() == R.id.logo || view.getId() == R.id.relativeLayout){

            InputMethodManager inm = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);
            inm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),0);

        }

    }

    public void signUpOrLogIn(View view) {

        showProgressDialog();
        String email = usernameField.getText().toString().trim();
        String password = passwordField.getText().toString().trim();

        if (signUpModeActive == true) {
            mAuth.createUserWithEmailAndPassword(email,password)
                    .addOnCompleteListener(MainActivity.this, new OnCompleteListener<AuthResult>() {
                        @Override
                        public void onComplete(@NonNull Task<AuthResult> task) {
                            hideProgressDialog();
                            Toast.makeText(MainActivity.this, "createUserWithEmail:onComplete:" + task.isSuccessful(), Toast.LENGTH_SHORT).show();
                            // If sign in fails, display a message to the user. If sign in succeeds
                            // the auth state listener will be notified and logic to handle the
                            // signed in user can be handled in the listener.
                            if (!task.isSuccessful()) {
                                Toast.makeText(MainActivity.this, "Authentication failed." + task.getException().toString().substring(task.getException().toString().indexOf(" ")),
                                        Toast.LENGTH_SHORT).show();
                                Log.i("Error", task.getException().toString());
                            } else {
                                onAuthSuccess(task.getResult().getUser());
                                showUserList();
                            }
                        }
                    });
        } else {
            mAuth.signInWithEmailAndPassword(email,password)
                    .addOnCompleteListener(MainActivity.this, new OnCompleteListener<AuthResult>() {
                        @Override
                        public void onComplete(@NonNull Task<AuthResult> task) {
                            hideProgressDialog();
                            // If sign in fails, display a message to the user. If sign in succeeds
                            // the auth state listener will be notified and logic to handle the
                            // signed in user can be handled in the listener.
                            if (!task.isSuccessful()) {
                                // there was an error

                                Toast.makeText(MainActivity.this, task.getException().toString(),
                                        Toast.LENGTH_LONG).show();
                            } else

                            {
                                onAuthSuccess(task.getResult().getUser());
                                showUserList();
                            }
                        }
                    });
        }
    }

    public void showUserList(){
        startActivity(new Intent(getApplicationContext(), UserList.class));
        finish();
    }
    private void onAuthSuccess(FirebaseUser user) {
        String username = usernameFromEmail(user.getEmail());

        // Write new user
        writeNewUser(user.getUid(), username, user.getEmail());

        // Go to MainActivity

    }
    private String usernameFromEmail(String email) {
        if (email.contains("@")) {
            return email.split("@")[0];
        } else {
            return email;
        }
    }

    private void writeNewUser(String userId, String name, String email) {
        User user = new User(name, email);

        mDatabase.child("users").child(userId).setValue(user);
        ArrayList<String> userNames = new ArrayList<>();
        userNames.add(name);
        mDatabase.child("usernamelist").setValue(userNames);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mAuth = FirebaseAuth.getInstance();
        mDatabase = FirebaseDatabase.getInstance().getReference();

        if(mAuth.getCurrentUser()!=null){
            showUserList();
        }

        usernameField = (EditText) findViewById(R.id.username);
        passwordField = (EditText) findViewById(R.id.password);
        changeSignUpModeTextView = (TextView) findViewById(R.id.changeSignUpMode);
        signUpButton = (Button) findViewById(R.id.signupbutton);
        logo = (ImageView)findViewById(R.id.logo);
        relativeLayout= (RelativeLayout)findViewById(R.id.relativeLayout);

        signUpModeActive = true;

        changeSignUpModeTextView.setOnClickListener(this);

        usernameField.setOnKeyListener(this);
        passwordField.setOnKeyListener(this);

        logo.setOnClickListener(this);
        relativeLayout.setOnClickListener(this);

    }
} 
```

**用户列表.java**

```
public class UserList extends AppCompatActivity {

    private static final String TAG = "UserList" ;
    private DatabaseReference userlistReference;
    private ValueEventListener mUserListListener;
    ArrayList<String> usernamelist = new ArrayList<>();
    ArrayAdapter arrayAdapter;;

    ListView userListView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_list);
        userlistReference = FirebaseDatabase.getInstance().getReference().child("usernamelist");
        onStart();
        userListView = (ListView) findViewById(R.id.userlistview);

    }

    @Override
    protected void onStart() {
        super.onStart();
        final ValueEventListener userListener = new ValueEventListener() {
            @Override
            public void onDataChange(DataSnapshot dataSnapshot) {
                usernamelist = new ArrayList<>((ArrayList) dataSnapshot.getValue());
                usernamelist.remove(usernameOfCurrentUser());
                Log.i(TAG, "onDataChange: "+usernamelist.toString());
                arrayAdapter = new ArrayAdapter(UserList.this,android.R.layout.simple_list_item_1,usernamelist);
                userListView.setAdapter(arrayAdapter);
            }

            @Override
            public void onCancelled(DatabaseError databaseError) {
                Log.w(TAG, "onCancelled: ",databaseError.toException());
                Toast.makeText(UserList.this, "Failed to load User list.",
                        Toast.LENGTH_SHORT).show();
            }
        };
        userlistReference.addValueEventListener(userListener);

        mUserListListener = userListener;
    }
    public String usernameOfCurrentUser()
    {
        String email = MainActivity.mAuth.getCurrentUser().getEmail();
        if (email.contains("@")) {
            return email.split("@")[0];
        } else {
            return email;
        }
    }
    @Override
    public void onStop() {
        super.onStop();

        // Remove post value event listener
        if (mUserListListener != null) {
            userlistReference.removeEventListener(mUserListListener);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
            case R.id.action_logout:
                FirebaseAuth.getInstance().signOut();
                startActivity(new Intent(this, MainActivity.class));
                finish();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-27T22:25:52.907

您可以使用[Google Identity Toolkit API](http://google.github.io/google-api-nodejs-client/19.0.0/identitytoolkit.html#.identitytoolkit.relyingparty.downloadAccount__anchor)获取 Firebase 项目中所有注册用户的列表，该 API 由[Firebase CLI](https://github.com/firebase/firebase-tools/blob/master/lib/accountExporter.js#L129)使用，可以通过运行访问`firebase auth:export results-file`

确保身份工具包 API 已启用

**firebase-users-list.js**

```
const serviceAccount = require('path/to/firebase-sdk-json-service-account');

const googleapis = require('googleapis');
const identitytoolkit = googleapis.identitytoolkit('v3');

const authClient = new googleapis.auth.JWT(
    serviceAccount.client_email,
    null,
    serviceAccount.private_key,
    ['https://www.googleapis.com/auth/firebase'],
    null
);

authClient.authorize((err) => {
    if (err) {
        return console.error(err);
    }

    let nextPageToken = undefined;
    let users = [];
    const getAccounts = () => identitytoolkit.relyingparty.downloadAccount({
        auth: authClient,
        resource: {
            targetProjectId: serviceAccount.project_id,
            maxResults: 200,
            nextPageToken: nextPageToken
        }
    }, (e, results) => {
        if (e) {
            return console.error(err);
        }

        users = users.concat(results.users);
        if (results.nextPageToken) {
            nextPageToken = results.nextPageToken;
            return getAccounts();
        } else {
            console.log(users);
        }
    });
    getAccounts();
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-07T10:00:04.170

可以使用云功能来获取用户列表（在[firebase](https://firebase.google.com/docs/auth/admin/manage-users#list_all_users)查看文档）。请注意，在以下示例中，[自定义声明](https://firebase.google.com/docs/auth/admin/custom-claims)功能用于检查用户是否具有足够的权限。

```
// USERS: return full users list for admin
// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
import * as admin from 'firebase-admin'
import * as functions from 'firebase-functions'

export const listUsers = functions.https.onCall((data, context) => {
  // check if user is admin (true "admin" custom claim), return error if not
  const isAdmin = context.auth.token.admin === true
  if (!isAdmin) {
    return { error: `Unauthorized.` }
  }

  return admin
    .auth()
    .listUsers()
    .then((listUsersResult) => {
      // go through users array, and deconstruct user objects down to required fields
      const result = listUsersResult.users.map((user) => {
        const { uid, email, photoURL, displayName, disabled } = user
        return { uid, email, photoURL, displayName, disabled }
      })

      return { result }
    })
    .catch((error) => {
      return { error: 'Error listing users' }
    })
}) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-12T14:00:35.327

您可以使用`admin.auth().listUsers`

这是文档：[https ://firebase.google.com/docs/reference/admin/node/admin.auth.Auth.html#listusers](https://firebase.google.com/docs/reference/admin/node/admin.auth.Auth.html#listusers)

还有一个使用示例：[https ://firebase.google.com/docs/auth/admin/manage-users#list_all_users](https://firebase.google.com/docs/auth/admin/manage-users#list_all_users)

```
function listAllUsers(nextPageToken) {
  // List batch of users, 1000 at a time.
  admin.auth().listUsers(1000, nextPageToken)
    .then(function(listUsersResult) {
      listUsersResult.users.forEach(function(userRecord) {
        console.log('user', userRecord.toJSON());
      });
      if (listUsersResult.pageToken) {
        // List next batch of users.
        listAllUsers(listUsersResult.pageToken);
      }
    })
    .catch(function(error) {
      console.log('Error listing users:', error);
    });
}
// Start listing users from the beginning, 1000 at a time.
listAllUsers(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-03T06:54:22.103

我将尽可能简单地回答它，只需使用以下代码将注册用户添加到您的数据库中

您还可以使用共享首选项在本地保存数据，但其他用户无法使用。

一旦您将用户列表保存在数据库中，只需使用适配器从那里检索它

```
FirebaseDatabase.getInstance().getReference().child("my_user")
                        .child(task.getResult().getUser().getUid())
                        .child("username").setValue(autoCompleteTextView1.getText().toString()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-23T16:18:47.767

**python中的用户列表：**

```
from firebase_admin import credentials, db, auth
cred = credentials.Certificate('\path\to\serviceAccountKey.json')
default_app = firebase_admin.initialize_app(cred, {
    "databaseURL": "https://data_base_url.firebaseio.com"
})
users = auth.list_users() 
```

# design-patterns - 与设计模式“抽象”概念混淆

> ID：14673710
> 
> 赞同：1
> 
> 时间：2013-02-03T14:49:18.187
> 
> 标签：design-patterns

我正在学习设计模式，我偶然发现了这个[PDF](http://www.cs.colorado.edu/~kena/classes/6448/f07/lectures/21/21-Factory.pdf)

在幻灯片 12 上，它说明了以下 3 条规则：

1.  任何变量都不应包含对具体类的引用
2.  任何类都不应派生自具体类
3.  任何方法都不应覆盖其基类的已实现方法

现在假设我有一个抽象类说“A”。然后，我有 3 个具体的类应该实现这个抽象类，它们是类“B”、“C”、“D”。问题是 D 是 C 的一个特例。 D 只有一个实例变量。

我的问题是，

*   首先，是保证良好设计的黄金法则之上的 3 条规则吗？
*   其次，如果“D”扩展“C”并覆盖“C”的方法以添加更多行为，可能会出现什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:04:14.190

如果您开始在图表中添加子类型，那么抽象当然会被削弱。为什么？因为人们必须学习更多，并且所需内容的足迹会扩大。也就是说，可能有有效的案例，尽管我很难在工厂情况下看到它们。直接针对该下游案例回答您的问题的一种可能性是使用装饰器，因为它或多或少地保留了抽象，但在某些未提供的功能中分层。

# string - 如何批量检查某些字符串 * 是否以特定单词开头*

> ID：14673711
> 
> 赞同：2
> 
> 时间：2013-02-03T14:49:42.083
> 
> 标签：string, batch-file

如何检查某些字符串（用于记录的文本文件中的行）是否以批处理中的特定单词***开头？***

我知道如何检查句子/行（字符串）中是否存在单词（子字符串），但是如何检查天气它以这个单词开头？

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T11:38:48.697

这可以这样做`FINDSTR`：

```
FINDSTR "^*searchterm*" 
```

搜索表达式的`^`开头指定您正在查找专门位于行首的子字符串。

请注意，默认情况下`FINDSTR`执行区分大小写的搜索。要不考虑字母大小写进行搜索，请指定`/I`开关：

```
FINDSTR **/I** "^*searchterm*" 
```

可以指定要搜索的源：

*   作为参数：

    ```
    FINDSTR /I "^*searchterm*" ***filename*** 
    ```

*   使用`stdin`重定向：

    ```
    FINDSTR /I "^*searchterm*" **< *filename*** 
    ```

*   使用管道：

    ```
    ***command* |** FINDSTR /I "^*searchterm*" 
    ```

    （在这种情况下，源是 的输出`*command*`）

如果要搜索多个文件，特别是如果它们位于同一目录或目录树中，使用上述三种模式中的第一种模式可能是最简单的，因为*`filename`*在这种情况下，可以是掩码：

```
FINDSTR /I "^*searchterm*" D:\path\to\files*.ext 
```

以上将仅搜索指定目录中的文件。要搜索整个树，即包括所有子目录，请添加`/S`开关：

```
FINDSTR /I **/S** "^*searchterm*" D:\path\to\files*.ext 
```

其他有用的选项可以在内置帮助 (run `FINDSTR /?`) 中找到。

# android - Android Google Analytics v2 Tracker.setThrottlingEnabled(boolean throttlingEnabled)

> ID：14673712
> 
> 赞同：1
> 
> 时间：2013-02-03T14:49:45.007
> 
> 标签：android, google-analytics, google-analytics-api

我找不到有关以下内容的任何文档：

```
Tracker.setThrottlingEnabled(boolean throttlingEnabled) 
```

在[Google Analytics v2](https://developers.google.com/analytics/devguides/collection/android/v2/advanced)文档中。

有人可以解释一下这种方法的用途吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:04:28.170

[EDIT]: My previous answer said things that are not really correct. Updated answer below:

The method you mentioned is not a supported method and **will be** removed from a future version. Please don't use it.

# android - android如何将EditText光标设置到其文本的末尾

> ID：14673716
> 
> 赞同：34
> 
> 时间：2013-02-03T14:50:32.917
> 
> 标签：android, android-layout, android-edittext

用户必须输入他的手机号码，手机号码必须是10个号码，我曾经`TextWatcher`这样做过，像这样

```
et_mobile.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        // TODO Auto-generated method stub

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
        if (et_mobile.getText().toString().length() > 10) {
            et_mobile.setText(et_mobile.getText().toString()
                    .subSequence(0, 10));
            tv_mobileError.setText("Just 10 Number");
        }else{
            tv_mobileError.setText("*");
        }
    }
}); 
```

但问题是当用户输入第 11 个数字时，edittext 的光标从文本的开头开始，我希望它仍然在末尾，如何？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-03T14:53:46.423

你有两个选择，都应该工作：

一个）

```
editText.setText("Your text");
editText.setSelection(editText.getText().length()); 
```

b)

```
editText.setText("");    
editText.append("Your text"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-17T08:48:24.270

```
/**
 * Set pointer to end of text in edittext when user clicks Next on KeyBoard.
 */
View.OnFocusChangeListener onFocusChangeListener = new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View view, boolean b) {
        if (b) {
            ((EditText) view).setSelection(((EditText) view).getText().length());
        }
    }
};

mEditFirstName.setOnFocusChangeListener(onFocusChangeListener);
mEditLastName.setOnFocusChangeListener(onFocusChangeListener); 
```

它对我有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T02:48:33.247

而 jenzz anwser 适用于最简单的情况。如果在编辑文本之前移动光标则不会，因为一旦键入第二个字母，它将被移动到 EditText 的末尾。

更喜欢使用此解决方案：

```
 @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) 
            {
                ...
                int position = et_mobile.getSelectionStart();
                et_mobile.setText(f(s));
                et_mobile.setSelection(position);
                ...
            } 
```

# apache-flex - 如何在 Adob e flex/flash 中集成 Google 自动建议

> ID：14673717
> 
> 赞同：0
> 
> 时间：2013-02-03T14:50:43.073
> 
> 标签：apache-flex, autocomplete, google-api

我想在 adobe flex 中集成谷歌自动文本建议。我找不到应该使用哪个 url 来执行此操作。请让我知道谷歌是否有任何 api 可以做到这一点。

![在此处输入图像描述](../Images/d3855138b589b3dfc463086f2c8708ee.png)

谢谢大家

# php - 如何重置用户的 LDAP 密码？

> ID：14673720
> 
> 赞同：0
> 
> 时间：2013-02-03T14:51:11.730
> 
> 标签：php, passwords, ldap

我正在构建一个简单的网页来允许用户管理他们的 LDAP 密码。我已经成功构建了一个允许用户更改其 LDAP 密码的脚本，但是，我被困在一个可以重置其密码的脚本上。

这是我用来重置密码的代码：

```
// connect to the ldap server
$connection = ldap_connect($server) or die('Cannot connect to LDAP server');

// bind to the ldap server
if(!ldap_bind($connection, $bindDn, $bindPassword)) {
  echo 'Cannot bind to LDAP server<br>';
}

// get the user dn
$userSearch = ldap_search($connection, $baseDn,"(|(uid=$username))");
$userEntry = ldap_first_entry($connection, $userSearch);
$userDn = ldap_get_dn($connection, $userEntry);

// make up a fake password
$chars = 'qwrtyipsdfgghjklzxcvbnmQWRTYPSDFGHJKLZXCVBNM1234567890!@#$%^&*-=_+",.?';
$passwordLength = 12;
$password = '';

// create the fake password
for($i = 0; $i < $passwordLength; $i++) {
  $password .= $chars[rand(0, strlen($chars))];
}

// now change the password
$encodedPassword = '{SHA}'.base64_encode(pack('H*', sha1($password)));

if(@ldap_mod_replace($connection, $userDn, array('userPassword' => $encodedPassword)) === false) {
    echo ldap_error($connection);
}

// mail the user their new password 
```

运行此代码的结果是

```
Insufficient access 
```

这是 ldap_mod_replace 命令的结果。

此代码与我用来更改用户密码的代码之间的唯一区别是我以用户身份绑定了他们的密码。

显然，我不能对忘记密码的用户执行此操作。

我不管理 LDAP 安装，也不知道管理一个。我最初绑定的用户是否没有设置为仅更改任何人的密码？

如果是这种情况，我需要告诉我的系统管理员做什么？

如果不是，问题是什么？

# heroku - 在 Heroku 上维护单独的开发/产品配置文件不起作用

> ID：14673722
> 
> 赞同：1
> 
> 时间：2013-02-03T14:51:23.580
> 
> 标签：heroku, playframework-2.0

# 背景故事

通过一点谷歌搜索，我推测部署到 prod 而无需每次手动更改 conf 文件的最佳方法是维护单独的 conf 文件并覆盖 procfile 中的 conf-file-to-use

# 我的方法

我创建了两个conf文件

application.conf -- [http://pastebin.com/BaaBuRHR](http://pastebin.com/BaaBuRHR)

产品配置文件

```
 include "application.conf"
  http.port=${PORT} 
  applyEvolutions.default=true 
  db.default.driver=org.postgresql.Driver 
  db.default.url=${DATABASE_URL}
  db.default.user=xxxxxxxxxxx
  db.default.password=xxxxxxxxxxxxxxxxxxxxxxx 
```

我的 Procfile 看起来像这样

```
web: target/start ${JAVA_OPTS} -Dconfig.file=/opt/conf/prod.conf 
```

当我部署时，我的日志说

```
Feb 03 06:34:09 psytools heroku/web.1:  Starting process with command `target/start ${JAVA_OPTS} -Dconfig.file=/conf/prod.conf` 
Feb 03 06:34:10 psytools app/web.1:  Play server process ID is 2 
Feb 03 06:34:11 psytools app/web.1:  [[37minfo[0m] application - Application has started 
Feb 03 06:34:11 psytools app/web.1:  [[37minfo[0m] play - Application started (Prod) 
Feb 03 06:34:11 psytools app/web.1:  [[37minfo[0m] play - Listening for HTTP on port 9000... 
Feb 03 06:34:11 psytools heroku/web.1:  Error R11 (Bad bind) -> Process bound to port 9000, should be 39098 (see environment variable PORT) 
```

显然，heroku 正在尝试使用默认端口 9000，而不是使用 PORT 环境。

我的问题是：

1.  这是维护生产/开发环境的正确方法吗
2.  为什么端口未从 PORT env 变量中读取
3.  以前，当我刚开始`Play`：D，

我的 application.conf 有这条线

```
 db.default.url="jdbc:postgresql://ec2-54#####l0k8?ssl=true&sslfactory=org.postgresql.#ssl.NonValidatingFactory" 
```

我的proc文件是

```
 web: target/start xxxxxx xxxxxxx xxxxxxx xxxxx -Ddb.default.url=${DATABASE_URL} 
```

DATABASE_URL 实际上只是其中的`postgresql://ec2-54#####l0k8`一部分。但这仍然有效，这意味着heroku使用了来自conf而不是proc文件的数据库url。这是否意味着proc文件覆盖不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:38:45.643

更改您的 Proc 文件

> 网络：目标/开始 ${JAVA_OPTS} -Dconfig.resource=prod.conf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T16:22:05.527

理想情况下，您将拥有一个通用配置文件并使用配置变量来调整行为/设置。您可以使用工头和 '.env' 文件来配置本地环境变量，并使用 'heroku config:set ...' 进行生产

请参阅这些指南：

*   [https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)
*   [https://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T19:03:23.063

我总是使用相反的顺序并且有效：

*   在'main'中`application.conf`不要设置`db.default.url`，就像 Heroku 一样。始终使用此文件将应用程序配置为生产模式。`user``password``-Ddb.default.url=${DATABASE_URL}`
*   创建文件：`conf/local_rustic_bit.conf`在此处包含`application.conf`并放置本地数据库的覆盖设置、其他邮件设置、其他调试规则等...最好将其添加到`.gitignore`即：`conf/local_*.conf`
*   在您的本地机器上创建`run.sh`（`run.bat`在 Windows 中）文件，并在其中放置用于运行包含“本地”配置的播放的命令。当然，您可以/应该`start.sh`在生产模式下本地测试应用程序。

    ```
    #!/bin/bash
    play -Dconfig.file=/opt/conf/local_rustic.bit.conf "~run 9123" 
    ```

*   从现在开始，您可以使用所需的数据库设置（通过`./run.sh`）在本地运行您的应用程序，而对于生产，Heroku 将能够使用自己的设置运行应用程序，而无需选择任何其他配置。

# jquery - 支持 ASP.NET 中的 JSONP 返回

> ID：14673725
> 
> 赞同：0
> 
> 时间：2013-02-03T14:51:49.193
> 
> 标签：jquery, jsonp, getjson

如何在 ASP.Net 网站中支持 JSONP 返回 getJson 调用？

```
var url = "http://demo.dreamacc.com/TextTable.json?callback=?";
        $.ajax({
            type: 'GET',
            url: url,
            async: false,
            jsonpCallback: 'jsonCallback',
            contentType: "application/json",
            dataType: 'jsonp',
            success: function (ooo) {
                alert('hi');
                alert(ooo);
            },
            error: function () {
                alert('w');
            }
        }); 
```

前一个函数不会触发成功和错误函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:57:55.473

在服务器上，您可以编写一个返回 JSONP 响应的处理程序：

```
public class MyHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        // set the response content type to application/json
        context.Response.ContentType = "application/json";

        // generate some JSON that we would like to return to the client
        string json = new JavaScriptSerializer().Serialize(new
        {
            status = "success"
        });

        // get the callback query string parameter
        var callback = context.Request["callback"];
        if (!string.IsNullOrEmpty(callback))
        {
            // if the callback parameter is present wrap the JSON
            // into this parameter => convert to JSONP
            json = string.Format("{0}({1})", callback, json);
        }

        // write the JSON/JSONP to the response
        context.Response.Write(json);
    }

    public bool IsReusable
    {
        get { return true; }
    }
} 
```

这里的想法是通用处理程序将检查是否存在`callback`查询字符串参数，如果指定，它将把 JSON 包装到这个回调中。

现在您可以将 $.ajax 调用指向此服务器端处理程序：

```
var url = "http://demo.dreamacc.com/MyHandler";
$.ajax({
    type: 'GET',
    url: url,
    jsonp: 'callback',
    dataType: 'jsonp',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function (result) {
        alert(result.success);
    },
    error: function () {
        alert('error');
    }
}); 
```

# javascript - jQuery 选择器：除了 n 之外的所有选择器

> ID：14673726
> 
> 赞同：5
> 
> 时间：2013-02-03T14:51:50.133
> 
> 标签：javascript, jquery, jquery-selectors

所以我有一个像这样的兄弟姐妹名单；

```
 <div class="b"></div>
<div class="a"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div>
<div class="a"></div>
  <div class="b"></div>
  <div class="b"></div>
<div class="a"></div>
<div class="c"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b"></div> 
```

（**注意：**`b` 's**不是**'s的孩子`a`，他们都是兄弟姐妹。缩进是为了强调。）

在 jQuery 中，我需要选择每个`b`，放弃连续中的前*n 个*元素。没有特定类型/类别的元素可以打破连胜，也没有任何可靠数量的`b`' 在连胜，或非`b`元素之间。

如果我使用选择器添加一个类`selected`，并假设*n* = 2，那么我的 DOM 将如下所示；

```
 <div class="b"></div>
<div class="a"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b selected"></div>
  <div class="b selected"></div>
<div class="a"></div>
  <div class="b"></div>
  <div class="b"></div>
<div class="a"></div>
<div class="c"></div>
  <div class="b"></div>
  <div class="b"></div>
  <div class="b selected"></div>
  <div class="b selected"></div>
  <div class="b selected"></div>
  <div class="b selected"></div>
  <div class="b selected"></div> 
```

换句话说，在除, 或开头之外的任何内容之后选择`b`除*n 个元素之外的每个元素。*`b`

我试过`:nth-child(n+3)`了，但这似乎只是考虑了所有的`b`'，尽管`a`' 会破坏它们。

我也尝试摆弄`.nextUntil()`and `.filter()`，但必须比我更好的人来破解它。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T14:56:34.757

由于这些元素都是共享同一个父元素的兄弟元素，因此可以巧妙地使用兄弟元素组合器：

```
$('.b + .b + .b').addClass('selected'); 
```

对于任何*n*，只需在最后一个之前重复`.b +` *n*次`.b`。

不需要`:nth-child()`或任何遍历/过滤功能，也是一个有效且受良好支持的 CSS 选择器，以防您希望将样式应用于这些元素。

[jsFiddle 预览](http://jsfiddle.net/BoltClock/Mxc73)

* * *

如果您需要在每组元素之前添加一个中间元素，请先`.b + .b + .b`添加类，然后在每组匹配元素的第一个之前添加中间元素。这些元素中的第一个可以通过在它后面寻找一个*not* `.selected`的元素来匹配，它排除了所有在*它*`.selected`后面直接有 a的元素：

```
$('.b + .b + .b').addClass('selected')
                 .filter(':not(.selected) + .selected')
                 .before('<div class="inserted"></div>'); 
```

[更新了 jsFiddle 预览](http://jsfiddle.net/BoltClock/Mxc73/1)

如果链接太多方法变得混乱，您总是可以单独执行每个步骤：

```
$('.b + .b + .b').addClass('selected');
$(':not(.selected) + .selected').before('<div class="inserted"></div>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:30:22.757

CSS：

```
.b+.b+.b {
    color: red;
} 
```

[http://jsfiddle.net/vwrP6/](http://jsfiddle.net/vwrP6/)

# c# - 并行运行异步方法 8 次

> ID：14673728
> 
> 赞同：17
> 
> 时间：2013-02-03T14:51:54.057
> 
> 标签：c#, .net, parallel-processing, .net-4.5

如何将以下内容变成 Parallel.ForEach？

```
public async void getThreadContents(String[] threads)
{
    HttpClient client = new HttpClient();
    List<String> usernames = new List<String>();
    int i = 0;

    foreach (String url in threads)
    {
        i++;
        progressLabel.Text = "Scanning thread " + i.ToString() + "/" + threads.Count<String>();
        HttpResponseMessage response = await client.GetAsync(url);
        String content = await response.Content.ReadAsStringAsync();
        String user;
        Predicate<String> userPredicate;
        foreach (Match match in regex.Matches(content))
        {
            user = match.Groups[1].ToString();
            userPredicate = (String x) => x == user;
            if (usernames.Find(userPredicate) != user)
            {
                usernames.Add(match.Groups[1].ToString());
            }
        }
        progressBar1.PerformStep();
    }
} 
```

我在假设异步和并行处理相同的情况下对其进行了编码，但我刚刚意识到事实并非如此。我查看了我能找到的所有问题，但我似乎真的找不到适合我的例子。他们中的大多数缺乏可读的变量名。使用不解释它们包含的内容的单字母变量名称是陈述示例的可怕方式。

我通常在名为线程的数组中有 300 到 2000 个条目（包含论坛线程的 URL），并且似乎并行处理（由于许多 HTTP 请求）会加快执行速度）。

在我可以使用 Parallel.ForEach 之前，我是否必须删除所有异步（我在 foreach 之外没有任何异步，只有变量定义）？我该怎么做呢？我可以在不阻塞主线程的情况下做到这一点吗？

顺便说一句，我正在使用 .NET 4.5。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-03T15:47:39.133

> 我在假设异步和并行处理是相同的情况下对其进行编码

异步处理和并行处理是完全不同的。如果您不了解其中的区别，我认为您应该先阅读更多相关内容（例如[c# 中异步和并行编程之间的关系是什么？](https://stackoverflow.com/q/12434369/41071)）。

现在，您想要做的实际上并不那么简单，因为您想要异步处理一个大集合，并具有特定程度的并行性 (8)。使用同步处理，您可以使用`Parallel.ForEach()`（以及`ParallelOptions`配置并行度），但没有简单的替代方法可以使用`async`.

在您的代码中，这很复杂，因为您希望所有内容都在 UI 线程上执行。（尽管理想情况下，您不应该直接从计算中访问 UI。相反，您应该使用`IProgress`，这意味着代码不再需要在 UI 线程上执行。）

在 .Net 4.5 中执行此操作的最佳方法可能是使用 TPL 数据流。它[`ActionBlock`](http://msdn.microsoft.com/en-us/library/hh194684.aspx)完全符合您的要求，但它可能非常冗长（因为它比您需要的更灵活）。所以创建一个辅助方法是有意义的：

```
public static Task AsyncParallelForEach<T>(
    IEnumerable<T> source, Func<T, Task> body,
    int maxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
    TaskScheduler scheduler = null)
{
    var options = new ExecutionDataflowBlockOptions
    {
        MaxDegreeOfParallelism = maxDegreeOfParallelism
    };
    if (scheduler != null)
        options.TaskScheduler = scheduler;

    var block = new ActionBlock<T>(body, options);

    foreach (var item in source)
        block.Post(item);

    block.Complete();
    return block.Completion;
} 
```

在你的情况下，你会像这样使用它：

```
await AsyncParallelForEach(
    threads, async url => await DownloadUrl(url), 8,
    TaskScheduler.FromCurrentSynchronizationContext()); 
```

这里，`DownloadUrl()`是一种`async Task`处理单个 URL（循环体）的方法，`8`是并行度（在实际代码中可能不应该是字面常量），并`FromCurrentSynchronizationContext()`确保代码在 UI 线程上执行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-03T22:54:01.147

Stephen Toub 有[一篇关于实现`ForEachAsync`](http://blogs.msdn.com/b/pfxteam/archive/2012/03/05/10278165.aspx). Svick 的回答对于 Dataflow 可用的平台来说非常好。

这是一个替代方案，使用 TPL 中的分区程序：

```
public static Task ForEachAsync<T>(this IEnumerable<T> source,
    int degreeOfParallelism, Func<T, Task> body)
{
  var partitions = Partitioner.Create(source).GetPartitions(degreeOfParallelism);
  var tasks = partitions.Select(async partition =>
  {
    using (partition) 
      while (partition.MoveNext()) 
        await body(partition.Current); 
  });
  return Task.WhenAll(tasks);
} 
```

然后，您可以这样使用它：

```
public async Task getThreadContentsAsync(String[] threads)
{
  HttpClient client = new HttpClient();
  ConcurrentDictionary<String, object> usernames = new ConcurrentDictionary<String, object>();

  await threads.ForEachAsync(8, async url =>
  {
    HttpResponseMessage response = await client.GetAsync(url);
    String content = await response.Content.ReadAsStringAsync();
    String user;
    foreach (Match match in regex.Matches(content))
    {
      user = match.Groups[1].ToString();
      usernames.TryAdd(user, null);
    }
    progressBar1.PerformStep();
  });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T23:04:40.563

另一种选择是使用[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.semaphoreslim%28v=vs.110%29.aspx)or [`AsyncSemaphore`](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266983.aspx)（它[包含在我的 AsyncEx 库中](http://nitoasyncex.codeplex.com/wikipage?title=AsyncSemaphore)，并且支持比 更多的平台`SemaphoreSlim`）：

```
public async Task getThreadContentsAsync(String[] threads)
{
  SemaphoreSlim semaphore = new SemaphoreSlim(8);
  HttpClient client = new HttpClient();
  ConcurrentDictionary<String, object> usernames = new ConcurrentDictionary<String, object>();

  await Task.WhenAll(threads.Select(async url =>
  {
    await semaphore.WaitAsync();
    try
    {
      HttpResponseMessage response = await client.GetAsync(url);
      String content = await response.Content.ReadAsStringAsync();
      String user;
      foreach (Match match in regex.Matches(content))
      {
        user = match.Groups[1].ToString();
        usernames.TryAdd(user, null);
      }
      progressBar1.PerformStep();
    }
    finally
    {
      semaphore.Release();
    }
  }));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T21:25:01.627

您可以尝试[AsyncEnumerator NuGet Package](https://www.nuget.org/packages/AsyncEnumerator/1.1.0)`ParallelForEachAsync`中的扩展方法：

```
using System.Collections.Async;

public async void getThreadContents(String[] threads)
{
    HttpClient client = new HttpClient();
    List<String> usernames = new List<String>();
    int i = 0;

    await threads.ParallelForEachAsync(async url =>
    {
        i++;
        progressLabel.Text = "Scanning thread " + i.ToString() + "/" + threads.Count<String>();
        HttpResponseMessage response = await client.GetAsync(url);
        String content = await response.Content.ReadAsStringAsync();
        String user;
        Predicate<String> userPredicate;
        foreach (Match match in regex.Matches(content))
        {
            user = match.Groups[1].ToString();
            userPredicate = (String x) => x == user;
            if (usernames.Find(userPredicate) != user)
            {
                usernames.Add(match.Groups[1].ToString());
            }
        }

        // THIS CALL MUST BE THREAD-SAFE!
        progressBar1.PerformStep();
    },
    maxDegreeOfParallelism: 8);
} 
```

# actionscript-3 - 从库动态创建图像对象

> ID：14673730
> 
> 赞同：0
> 
> 时间：2013-02-03T14:52:03.083
> 
> 标签：actionscript-3, flash, class, object

我在库中创建了一个包含我的图像类名称的数组。

```
var myArr:Array = new Array("myPic1","myPic2","myPic3"); 
```

通常，如果我想创建我的班级的一个对象，我会

```
var libraryImage:Bitmap;
libraryImage = new Bitmap(new myPic1(0,0)); 
```

但是我怎样才能遍历数组并动态创建我的图像呢？

```
for(var i:uint = 0; i<myArr.length; i++){
   var libraryImage:Bitmap;
   libraryImage = new Bitmap(new myArr[i](0,0));
} 
```

不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:19:34.963

尝试这个：

```
var myArr:Array = new Array(new myPic1(0,0), new myPic2(0,0), new myPic3(0,0));
for(var i:uint = 0; i<myArr.length; i++){
    var libraryImage:Bitmap;
    libraryImage = new Bitmap(myArr[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:16:16.370

你可以做这样的事情

```
for(var i:uint = 0; i<myArr.length; i++){
  var myClass:Class = getDefinitionByName(myArr[i]) as Class;
  var libraryImage:Bitmap;
  libraryImage = new Bitmap(new myClass(0,0));
} 
```

# c# - 使用 EventArgs

> ID：14673733
> 
> 赞同：2
> 
> 时间：2013-02-03T14:52:10.493
> 
> 标签：c#, java

C#语言中的java等效方法“getSource()”是什么

```
public void actionPerformed(ActionEvent e) 
{ 
   if(e.getSource().equals(button1)){
      //some code here
     }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T14:53:44.563

C#中没有`GetSource`。这就是为什么 UI 事件通常使用签名`(object sender, EventArgs eventArgs)`。源由参数定义`sender`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:08:35.827

在 .net 处理程序中定义如下

```
protected void btnname_event(
      Object sender,
      EventArgs e
  )
{
//handler details
} 
```

sender 将等同于 getsource()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:57:30.840

在`.NET [C#/Vb.net]`

`EventHandler`( )的一般签名`delegate`是：

```
 public delegate void EventHandler(
      Object sender,
      EventArgs e
  ) 
```

其中 :[`sender`](http://msdn.microsoft.com/en-us/library/system.object.aspx)代表 :`The source of the event.`

* * *

因此，Java Equivalent 将是：

```
private void button1_Click(object sender, EventArgs e)
{
    if (Object.ReferenceEquals(sender, button1))
    {
        //wohoo!!! its the same object
    }
} 
```

# php - 如何使用 Codeigniter 路由或 htaccess 文件重写 URL？

> ID：14673734
> 
> 赞同：0
> 
> 时间：2013-02-03T14:52:23.937
> 
> 标签：php, .htaccess, codeigniter, url-rewriting

我创建了一个带有**Page方法的****主页**控制器，以便它可以加载内部页面视图。因此，我只需将**Page 名称**作为参数传递给**Page**方法，它就会加载该特定视图。

 ******```
E.g. 
http://www.mywebsite.com/home/page/copyright 
```

所以这里 1\. **home**是控制器 2\. **page**是方法 3\. **copyright**是传递给 page() 方法的参数

因此，家庭年龄只需使用此 URL 即可加载

```
http://www.mywebsite.com/home/ 
```

和内页使用此 url 模式加载

```
http://www.mywebsite.com/home/page/copyright 
```

现在我想加载内页，以便假设我使用这个 URL

```
http://www.mywebsite.com/copyright 
```

它应该从

```
http://www.mywebsite.com/home/page/copyright 
```

如何使用 Codeigniter Route 方法或使用 .htaccess 文件来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:53:50.073

在您的 application/config/routes.php 上：

```
$route['copyright'] = 'home/page/copyright'; 
```

更好的是：

```
$route['(:any)'] = 'home/page/$1'; 
```

因此，如果您导航到[http://www.domain.com/copyright](http://www.domain.com/copyright)它会路由到 home/page/copyright
如果您导航到[http://www.domains.com/anything](http://www.domains.com/anything)它会路由到 home/page/anything

**编辑以捕捉任何路线**

尽管在这种情况下，您必须“捕获”您不路由的页面，例如：

```
function page($section = ''){

 switch($section){
  case 'contact':  
   //display contact form
  break;

  case 'copyright':
  //display copyright
  break;

  default:
  //404 error
  break;
 }
} 
```******

# php - mysql_fetch_assoc 和 JOIN 和 echo

> ID：14673741
> 
> 赞同：0
> 
> 时间：2013-02-03T14:53:11.350
> 
> 标签：php, mysql

我有 2 个表用户和消息：用户包含`id`, `fullname`, `email`,`password`
消息包含`id`, `sender`, `receiver`,`link`

我想阅读接收者（用户`id`）的所有链接，其中它等于`email`，以及`echo`发送者和接收者的全名以及链接。

有人请，我对此有点陌生？

```
$sql = mysql_fetch_assoc("SELECT m.sender,m.receiver, m.link, u.fullname, u.email 
                         FROM `users` AS u 
                         JOIN `messages` AS m ON m.receiver = u.id 
                         WHERE u.email = '$email'");

echo $sql['sender']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:31:42.537

```
$query = "SELECT m.sender,m.receiver, m.link, u.fullname, u.email 
                     FROM `users` AS u 
                     JOIN `messages` AS m ON m.receiver = u.id 
                     WHERE u.email = '" . $email . "'";

$result = mysql_query($query);
while($row = myslq_fetch_assoc($result)) {
    echo $row['sender'];
} 
```

# apache-flex - Flex4.6：在调试中工作，但在发布版本中不工作

> ID：14673742
> 
> 赞同：2
> 
> 时间：2013-02-03T14:53:15.133
> 
> 标签：apache-flex, flex4, flex4.5, flexbuilder

我的 flex4.6 在调试中工作正常。但是当我创建一个发布版本时，我得到了：

TypeError：错误 #1009：无法访问空对象引用的属性或方法。

在 com.adobe.serializers.utility::TypeUtility$/getArrayType() 在 com.adobe.serializers.json::JSONDecoder/parseObject() 在 com.adobe.serializers.json::JSONDecoder/parseValue() 在 com.adobe .serializers.json::JSONDecoder/decode() 在 com.bravolucy.football.utilities::Utilities$/getAsObj()

好像：

[http://forums.adobe.com/message/4250338](http://forums.adobe.com/message/4250338)

原始项目是在 flex4.0 中完成的，它使用了一些 swc 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:42:19.577

你的问题的答案就在你的问题本身

> “原始项目是在 flex4.0 中完成的，它使用了一些 swc 库”

在这一段之前有人说

> flex4.6在debug中正常工作

它应该与 4.6 一起正常工作，因为这个版本 playerglobal.version 11.1 正常使用，其中包含 JSON 库，但 playerglobal 的先前版本 - 11 您需要在项目库中包含“ [as3corelib.swc](https://github.com/mikechambers/as3corelib) ”。

您可以在以下位置找到更多详细信息 - [http://blog.infrared5.com/2011/07/working-with-native-json-in-flash-player-11/](http://blog.infrared5.com/2011/07/working-with-native-json-in-flash-player-11/)

谢谢，

瓦伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:48:19.880

您需要在项目属性中添加并勾选 as3corelib.swc。

但更好的是切换到原生`JSON.parse`

# delphi - 在消息部分中查找 body 属性

> ID：14673743
> 
> 赞同：0
> 
> 时间：2013-02-03T14:53:16.547
> 
> 标签：delphi, indy10

尝试使用此代码评估邮件消息内容，该代码源自[带有 INDY 的电子邮件的相关问题](https://stackoverflow.com/questions/14671010/evaluate-email-with-indy-10-and-delphi)

```
DisplayMultiPartMixed(aMsg: TIdMessage; aParentIndex, aLastIndex: Integer);
var
Part: TIdMessagePart;
 i: Integer;
begin
 for i := aLastIndex-1 downto aParentIndex+1 do
   begin
   Part := aMsg.MessageParts.Items[i];
   if (Part.ParentPart = aParentIndex) and (Part is TIdText) then
   begin
    if IsHeaderMediaType(Part.ContentType, 'multipart/alternative') then
     begin
     DisplayMultiPartAlternative(aMsg, Part.Index, aLastIndex);
     Exit;
     end;
  if IsHeaderMediaType(Part.ContentType, 'text/html') then
  begin
      DisplayHTML(Part.Body);
    Exit;
  end;
  if IsHeaderMediaType(Part.ContentType, 'text/plain') then
  begin
      DisplayPlainText(Part.Body);
    Exit;
  end;
  aLastIndex := i;
end;
 // nothing supported to display...
end;
end; 
```

我在 INDY 10 TidMessage 的 Part 子类中找不到 body (TStrings) 属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:37:32.347

您需要将类型`TIdMessagePart`转换为 a `TIdText`，就像该`DisplayMultiPartAlternative()`过程一样。这个遗漏只是我的一个错字，我在对另一个问题的回答中修正了它。

# php - mysql_real_escape_string 它是否允许在 sql 查询中使用引号？

> ID：14673752
> 
> 赞同：-1
> 
> 时间：2013-02-03T14:54:09.940
> 
> 标签：php

这段代码有问题吗？

```
<?php

if (isset($_GET['Submit'])) {

    // Retrieve data

    $id = $_GET['id'];
    $id = mysql_real_escape_string($id);

    $getid = "SELECT first_name, last_name FROM users WHERE user_id = $id";

    $result = mysql_query($getid) or die('<pre>' . mysql_error() . '</pre>' );

    $num = mysql_numrows($result);

    $i=0;

    while ($i < $num) {

        $first = mysql_result($result,$i,"first_name");
        $last = mysql_result($result,$i,"last_name");

        echo '<pre>';
        echo 'ID: ' . $id . '<br>First name: ' . $first . '<br>Surname: ' . $last;
        echo '</pre>';

        $i++;
    }
}
?> 
```

尽管它使用了 mysql_real_escape_string ，但攻击者仍然可以注入不带引号的代码。

它是 DVWA 易受攻击的 Web 应用程序的一部分。

函数 mysql_real_escape_string() 是否会阻止引号，但对我来说，它似乎根本不允许引号...

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:29:00.240

`mysql_real_escape_string()`应该可以降低 SQL 注入攻击的可能性，但是，强烈建议您使用未弃用的 MySQL 数据库 API，例如[MySQLi（MySQL 改进）](http://uk3.php.net/manual/en/book.mysqli.php)和[PDO](http://uk3.php.net/manual/en/book.pdo.php)，它们具有更强的安全性。

我也相信你正在调用一个不存在的函数，你在其中分配了它不`$num`应该是的变量。`mysql_num_rows()``mysql_numrows`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:48:27.167

`mysql_real_escape_string()`将函数参数放入可在 SQL 中的**引号内使用的形式。**必须使用它们。即使在处理数值时，它们也始终可以使用。

不使用 sql 中的引号会防止转义字符串的安全性。

# android - ListFragment 和上下文

> ID：14673753
> 
> 赞同：1
> 
> 时间：2013-02-03T14:54:12.947
> 
> 标签：android, sqlite, android-listfragment, android-context

我第一次使用 ListFragments。我想显示来自 sqlite 数据库的数据。

我的问题：我无法检索上下文。

我在扩展 ListFragment 的类中尝试了 this.getActivity()，但上下文为空。

然后我尝试将我的应用程序的第一个活动（启动应用程序后显示的 ui）的上下文保存为静态变量。但这是正确的背景吗？

```
static Context context; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Setting the context
        context = this; 

        setContentView(R.layout.main);
    }

    public static Context getContext() {
        return context;
    } 
```

当我查询数据库时，我没有得到任何异常，但光标始终为空。我查看了我的 sqlite 数据库 - 我有三行数据（因此光标不应为空）。

我从数据库中查询数据的代码：

```
Cursor cursor = null;
        try{
            open();
            cursor = database.rawQuery("select _id, surname, prename, street, zipcode, telephone, email from "+Database.getMyDbTable()+";", null);
        }catch(Exception ex){
            Log.e(TAG, "Could not get list");
            CharSequence text = "Die Liste kann nicht erstellt werden!";
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
        }
        Log.d(TAG, "Cursor "+cursor); 
        close(); 
```

我如何获得正确的上下文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:22:46.263

我发现这个教程很有帮助（因为我想要一个标签布局与一个列表相结合）：

[https://github.com/artem-zinnatullin/Android-List-Fragment-Tutorial](https://github.com/artem-zinnatullin/Android-List-Fragment-Tutorial)

我修改了 onCreate 方法：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Getting the data from the Database
        Context myContext = getActivity();           
        Log.d(TAG, "Context "+myContext);

        contactListManager = new ContactList(myContext);
        Log.d(TAG, "ContactListManager "+contactListManager);

        Cursor cursor =  contactListManager.fetchAllItems();
        Log.d(TAG, "Cursor "+cursor); 
```

使用此代码，我可以访问我的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T03:00:31.900

感谢您的回答！我确认我也可以通过使用...来解决同样的问题

上下文 myContext = getActivity();

显然 ListPreference(this) 在 PreferenceFragment 内部不起作用。

# c# - 调整大小时仅拉伸图像中的某些部分

> ID：14673759
> 
> 赞同：0
> 
> 时间：2013-02-03T14:54:38.847
> 
> 标签：c#, winforms

我开始`GUI`用 C# (.NET 4.0) 构建一个应用程序，发现设计图形有点困难。

我想为所有面板设置一个图像背景，并自动调整其大小以适合面板尺寸。

如果图像只是`stretched normally`，那么它看起来不会很好，因为背景图像是以标题、框架、中心的方式构建的。

所以我实际上想要的是`left, top, right, bottom`在我想要被拉伸的图像中定义矩形的锚点。

我考虑过覆盖`PictureBox::OnPaint`并从那里继续，但是对于在 GUI 开发中认为非常简单的东西来说，感觉太手动了。

那么仅调整背景图像相关部分大小的最佳方法是什么？

# php - 带有 jQ uery、PHP 和 SQL 的可靠下拉菜单

> ID：14673763
> 
> 赞同：1
> 
> 时间：2013-02-03T14:55:18.597
> 
> 标签：php, jquery, sql

这个周末我一直在尝试使用这个脚本来创建可靠的菜单。

它由一个包含三行的 sql 表组成：“ID、Master、Name” 它稍后会抓取包含 0 作为“master”的条目，并将使用结果数据填充第一个选项列表

为了从数据库中填充下一个选择列表，它使用了以下 JS 和 php 的组合：

其余的选择列表将相应地填充。

我遇到的问题是，在它填充选择列表后，我想让网站的访问者点击搜索按钮以根据收集的数据执行搜索。问题是，当我提交表单时，它会发送存储在数据库“主”行中的信息，而不是“名称”上的信息

我越来越

```
index.php?genre=1&fruit=37&colour=39 
```

代替

```
index.php?genre=Male&fruit=Strawberry&colour=Red 
```

我试图切换`'.$row['name'].'`到`'.$row['id'].`

但那是不行的，我也尝试只使用'.$row['id']。它只是弄乱了表格。无论如何我可以完成我正在寻找的东西，以便我可以将字段上选择的值发送到 url？

在此先感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:15:57.553

您提到的行为是正常的，因为提交表单会自动发送所选选项的值而不是文本。您提到的开关 ( `'.$row['name'].' to '.$row['id'].`) 应该可以正常工作。如果它弄乱了表格，请提供更多信息，说明您弄乱表格的含义。

否则，这是一个可能的解决方案。这不是最优雅的解决方案，可能最适合不需要进一步复杂性但基本上生成查询字符串并手动重定向的简单表单。这是基于您在[http://www.ssdtutorials.com/tutorials/series/dependable-dropdown.html](http://www.ssdtutorials.com/tutorials/series/dependable-dropdown.html)链接到的原始示例。

JS：

```
var formObject = {
        run: function (obj) {
            obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
            var id = obj.attr('id');
            var v = obj.val();
            jQuery.getJSON('http://jquery-dependable-dropdown.ssdtutorials.com/mod/update.php', {
                id: id,
                value: v
            }, function (data) {
                if (!data.error) {
                    obj.next('.update').html(data.list).removeAttr('disabled');
                } else {
                    obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
                }
            });
        }
    };
    $(function () {

        $('.update').live('change', function () {
            formObject.run($(this));
        });

        $('#submitButton').click(function () {
            window.location.href = 'test.php?gender=' + $('#gender').find(':selected').text() + '&category=' + $('#category').find(':selected').text() + '&colour=' + $('#colour').find(':selected').text();
        });

    }); 
```

HTML：

```
<div id="wrapper">
<form id="theForm" action="" method="post">
    <select name="gender" id="gender" class="update">
        <option value="">Select one</option>
        <option value="1">Male</option>
        <option value="2">Female</option>
    </select>
    <select name="category" id="category" class="update" disabled="disabled">
        <option value="">----</option>
    </select>
    <select name="colour" id="colour" class="update" disabled="disabled">
        <option value="">----</option>
    </select>
    <input type="button" id="submitButton" value="submit">
</form> 
```

[http://jsfiddle.net/BUJnf/1/](http://jsfiddle.net/BUJnf/1/)

希望那有所帮助！

# google-app-engine - App Engine 上基于回合的访问的最佳实现？

> ID：14673765
> 
> 赞同：2
> 
> 时间：2013-02-03T14:55:40.417
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试使用 GAE 后端实现 2 人回合制游戏。这个游戏需要的第一件事是一个非常简单的匹配系统，操作如下：

1.  用户 A 向后端请求匹配。后端告诉他稍后再回来
2.  用户 B 向后端请求匹配。他将与A相匹配。
3.  用户 C 向后端请求匹配。后端告诉他稍后再回来
4.  用户 D 向后端请求匹配。他将与C相匹配。
5.  等等...

*（编辑：我的假设是，如果我能弄清楚这一点，大多数其他操作 ia 回合制游戏都可以使用相同的实现）*

这可以在[Apple Gamecenter](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/ImplementingaTurn-BasedMatch/ImplementingaTurn-BasedMatch.html#//apple_ref/doc/uid/TP40008304-CH15-SW1)和[Xbox Live](http://www.microsoft.com/en-us/download/confirmation.aspx?id=29197)中很容易地完成，但是我宁愿在像 GAE 这样的开放且独立于平台的后端上实现它。经过一些研究，我发现了 GAE 实施的以下选项：

*   使用内存缓存。但是，不能保证 memcache 在不同的实例之间是同步的。我做了一些测试，实际上可以看到由于内存缓存错误同步而导致匹配请求消失。
*   使用分片计数器强化内存缓存。这并不总能解决多实例问题，并且 mayabe 会导致高内存缓存配额使用率。
*   将内存缓存与比较和设置一起使用。用作互斥体时不能解决多实例问题。
*   任务队列。我不知道如何使用这些，但有人提到作为可能的解决方案。但是，我担心排队会很快吃掉我的 GAE 配额。
*   推队列。和上面一样。
*   交易。和上面一样。也可能非常昂贵。
*   渠道。和上面一样。也可能非常昂贵。

匹配是网络游戏中非常基础的操作，我不可能是第一个遇到这种情况的人。因此我的问题是：

*   您知道任何**安全**的配对机制吗？
*   如果存在多个解决方案，哪个是**最便宜**的（就 GAE 配额使用而言）解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:38:58.853

您可以在这样的方案中使用 cron 任务来完成此操作：

```
define MatchRequest:
    requestor = db.StringProperty()
    opponent = db.StringProperty(default = '') 
```

用户 A 请求匹配，创建一个 MatchRequest 实体，其中 A 作为请求者，对手为空白。用户 A 进行投票以查看对手字段何时被填满。用户 B 请求匹配，以 B 作为请求者创建一个 MatchRequest 实体。用户 B 池以查看对手字段何时被填满。

每 20 秒运行一次的 cron 作业？左右运行：

1.  获取对手 == '' 的所有 MatchRequest
2.  进行所有适当的匹配
3.  将所有 MatchRequests 作为一个事务

现在，当 A 和 B 下次投票时，他们会看到他们有对手。

根据[关于 crons 的 GAE 文档，](https://developers.google.com/appengine/docs/python/config/cron)免费应用程序最多可以有 20 个免费的 cron 任务。对于少量用户，这些 crons 所需的计算量应该很小。

这将是一种**安全**的方式，但我不确定它是否是**最便宜**的方式。它也很容易实现。

# mysql - playframework 和 mysql - 如何传递连接属性？

> ID：14673774
> 
> 赞同：3
> 
> 时间：2013-02-03T14:56:11.120
> 
> 标签：mysql, jdbc, playframework, connection, playframework-2.0

来自 application.conf：

```
db.default.url=jdbc:mysql://localhost/mydb?characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull&more Conn Properties 
```

我从 java/spring/wicket 来到 scala/play，我无法忍受看到这种连接参数传递。

使用 java/spring 我可以将连接属性封装在某个 bean 中，然后由数据源 bean 引用它。然后将道具传递给 jdbc 驱动程序。所以 url 将是干净的，并且 conn 道具也被“干净地”定义。

无论如何要通过 scala/play 实现这一目标？通过application.conf？通过 global.scala 也许？除了将我的 conn 道具直接放在 url 中之外还有什么？

# asp.net-mvc-4 - 使用 ASP.NET MVC 4 和 Restful Routing .NET 在编辑表单中使用 PUT 动词

> ID：14673784
> 
> 赞同：1
> 
> 时间：2013-02-03T14:57:05.443
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing, restful-url

我在我的 ASP.NET MVC 4 项目中使用了 Restful Routing .NET NuGet 包 ( [https://github.com/stevehodgkiss/restful-routing )。](https://github.com/stevehodgkiss/restful-routing)根据文档，我应该能够使用 PUT 动词通过将表单放入控制器中的更新操作来提交`@HTML.PutOverrideTag()`表单。我无法让它发挥作用。每次提交表单时，我都会收到 404 Not Found 错误。谁能确认他们是否能够正常工作？我的代码如下：

路由配置.cs：

```
map.Resources<UsersController>(); 
```

意见\用户\edit.cshtml：

```
@using (Html.BeginForm("update", "users", new { id = Model.Id }))
{
    @Html.PutOverrideTag()

    <input id="user_submit" name="commit" type="submit" value="Update" />
} 
```

用户控制器.cs：

```
[Authorize]
[HttpGet]
public ActionResult Edit(int id)
{
    var user = UserRepository.GetById(id);
    return View(user);
}

[Authorize]
[HttpPut]
public ActionResult Update(int id, User user)
{
    return View("edit", user);
} 
```

重建步骤：

1.  浏览到：/user/edit
2.  表格显示
3.  按提交按钮
4.  收到 404 Not Found 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:58:46.143

尝试

```
@Html.HttpMethodOverride(HttpVerbs.Put)
```

代替

```
@Html.PutOverrideTag()
```

# xcode - XCode Google Maps App，使用用户位置+搜索栏打开

> ID：14673786
> 
> 赞同：-1
> 
> 时间：2013-02-03T14:57:12.897
> 
> 标签：xcode

我是 XCode 的新手，真的需要帮助。我创建了一张充满标记和标注的地图，我对此感到满意并完全理解。现在我真的想在用户 GPS 位置而不是固定的纬度和经度上拥有地图中心。这可能吗？

也可以在地图上方添加一个搜索栏小部件，这样如果用户想要查看某个区域，他们可以不必滚动到那里。因此，当用户在一个区域中键入时，它会将他们带到那里，而标记仍保留在地图上。（可能地区的信息将来自谷歌的地图数据库）。

这一切都可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:32:20.580

将“地图视图”拖到情节提要上的视图中。按住 ctrl 时，将鼠标指针从“地图视图”拖动到类。为它创建 iVar 作为 mapView （或任何你想要的）

[mapView setUserTrackingMode:MKUserTrackingModeFollow 动画：YES];

上面的代码将始终将用户位置（蓝点）设置为 GPS 获取的当前位置。

***** 对于搜索栏***** NSString *urlString = [NSString stringWithFormat:@" [http://maps.google.com/maps/geo?q=%@&output=csv](http://maps.google.com/maps/geo?q=%@&output=csv) ", "FECTH TEXT FROM SEARCH BAR" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]] ;**

 **urlString 将返回纬度、经度详细信息。使用此详细信息，您可以显示用户想去的位置。**

# ios - 如何解决 NULL cString 崩溃

> ID：14673789
> 
> 赞同：0
> 
> 时间：2013-02-03T14:57:20.663
> 
> 标签：ios, objective-c, encoding, cstring

我正在尝试实施以下编码修复程序崩溃：

```
 // encoding fix
    NSString *correctStringTitle = [NSString stringWithCString:[[item objectForKey:@"main_tag"] cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding];

    cell.titleLabel.text = [correctStringTitle capitalizedString]; 
```

我的崩溃日志输出状态：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** +[NSString stringWithCString:encoding:]: NULL cString' 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:02:51.713

您似乎认为必须进行双重转换才能获得正确的结果。它不是，也不可能（这就是调用`cStringUsingEncoding:NSISOLatin1StringEncoding`返回的原因`NULL`）。只需将此部分省略并`correctStringTitle`直接分配给。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T10:39:10.190

在尝试从 html 中获取文本时，我遇到了与意大利语重音字符相同的问题，我的解决方案以避免`cStringUsingEncoding:NSISOLatin1StringEncoding`返回的情况`NULL`是确保当您从使用的数据中获取 html 时：

```
[[NSString alloc] initWithData:self.responseData encoding:NSISOLatin1StringEncoding] 
```

并不是

```
encoding:NSUTF8StringEncoding 
```

# django - django 值不起作用

> ID：14673795
> 
> 赞同：0
> 
> 时间：2013-02-03T14:57:40.093
> 
> 标签：django, django-queryset

当我尝试调用超过 3 个字段的值时，它似乎“中断”（即它不会将重复的条目组合在一起）

我的模型是具有三个字段的直通模型，2`ForeignKey`和 1`DateTimeField`

```
ProjectView(models.Model):
  user = models.ForeignKey(User)
  project = models.ForeignKey(Project)
  datetime_created = models.DateTimeField() 
```

我想要做：

```
ProjectView.objects.filter(datetime_created__gt=yesterday).values('project__id', 'project__title', 'project__thumbnail', 'project__creator_username') 
```

如果我摆脱了任何一个值字段，它会将它们按相同的项目分组而没有重复，如果有 4 个值，它似乎不进行分组。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:02:25.900

如果您查看[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)中的值，您将无法保证分组或不同。如果您想要该功能，则必须致电`.order_by()`和/或`.distinct()`在致电 ORM 时。

它完全起作用可能只是生成的 SQL 的副作用。如果您想查看 SQL，请查看 Django-debug-toolbar

# jquery - 从 Jquery 模板获取数据

> ID：14673797
> 
> 赞同：1
> 
> 时间：2013-02-03T14:57:52.710
> 
> 标签：jquery, ajax, jquery-templates

大家好，我已经构建了一个文本编辑器来帮助我了解更多关于 javascript 和 jquery 的信息，我正在尝试添加一个 ajax 图片上传器，上传器使用 jquery 模板，我在表格行中添加了以下内容

```
<td><a href="#" class="addToEditor"  data-id="{%=file.name%}" >Add To Editor</a></td> 
```

我如何从模板中获取数据 ID 值。我希望它返回真实值而不是 %=file.name%

在 jquery 中使用点击时，我无法让它返回任何警报

这是完整的模板

```
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>Start</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>Cancel</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                <i class="icon-trash icon-white"></i>
                <span>Delete</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
        <td><a href="#" class="addToEditor"  data-id="{%=file.name%}" >Add To Editor</a></td>
    </tr>

{% } %}
   </script> 
```

谢谢

# spring-security - 如何将子系统授权给特定用户？

> ID：14673800
> 
> 赞同：1
> 
> 时间：2013-02-03T14:58:08.483
> 
> 标签：spring-security, authorization

我正在为我的 Web 应用程序使用 SpringMVC、SpringSecurity、Spring、Mybatis。有很多并行的子系统（比如说，不同的注册系统），我想要实现的是给每个管理员（有很多在我控制下的管理员）对某些子系统的授权。比如有admin A、B、C，还有子系统X、Y、Z，我打算把admin A授权给子系统A、B，把admin B授权给子系统C，像这样。我如何使用spring security实现这种效果，有没有关于这个问题的文章，或者我用谷歌搜索的一些术语。非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:27:17.010

您可以为每个子系统设置不同的基本 URL：

```
www.appdomain.com/subsitemA/page1.html
www.appdomain.com/subsitemA/page2.html
www.appdomain.com/subsitemB/*
www.appdomain.com/subsitemC/*
....
www.appdomain.com/subsitemX/* 
```

然后很容易使用**intercept-url**模式来保护它们：

```
<sec:http auto-config='true' use-expressions="true" >
    <!-- Specific patterns comes first -->
    <sec:intercept-url pattern="/subsitemA/**" access="hasRole('ROLE_ADM_A')" />
    <sec:intercept-url pattern="/subsitemB/**" access="hasRole('ROLE_ADM_A') and hasRole('ROLE_ADM_B')" />
    <sec:intercept-url pattern="/subsitemC/**" access="hasRole('ROLE_ADM_C') and hasRole('ROLE_ADM_D')" />
    ...
    <!-- General pattern comes last -->
    <sec:intercept-url pattern="/**" access="isFullyAuthenticated()" />
</sec:http> 
```

# php - 缩略图生成时间

> ID：14673802
> 
> 赞同：0
> 
> 时间：2013-02-03T14:58:21.090
> 
> 标签：php, image, image-processing, loading

**想法**我有一个功能可以检查特定图像
的文件夹中是否存在缩略图。`cache`如果是，则返回该缩略图的路径。如果没有，它会继续生成图像的缩略图，将其保存在`cache`文件夹中并返回它的路径。

**问题**
假设我有 10 张图片，但其中只有 7 张的缩略图在`cache`文件夹中。因此，该函数会生成其余 3 张图像的缩略图。但是当它这样做时，我看到的只是一个空白的白色加载页面。这个想法是显示已经生成的缩略图，然后生成不存在的缩略图。

**代码**

```
$images = array(
        "http://i49.tinypic.com/4t9a9w.jpg",
        "http://i.imgur.com/p2S1n.jpg",
        "http://i49.tinypic.com/l9tow.jpg",
        "http://i45.tinypic.com/10di4q1.jpg",
        "http://i.imgur.com/PnefW.jpg",
        "http://i.imgur.com/EqakI.jpg",
        "http://i46.tinypic.com/102tl09.jpg",
        "http://i47.tinypic.com/2rnx6ic.jpg",
        "http://i50.tinypic.com/2ykc2gn.jpg",
        "http://i50.tinypic.com/2eewr3p.jpg"
    );

function get_name($source) {
    $name = explode("/", $source);
    $name = end($name);
    return $name;
}

function get_thumbnail($image) {
    $image_name = get_name($image);
    if(file_exists("cache/{$image_name}")) {
        return "cache/{$image_name}";
    } else {
        list($width, $height) = getimagesize($image);
        $thumb = imagecreatefromjpeg($image);
        if($width > $height) {
            $y = 0;
            $x = ($width - $height) / 2;
            $smallest_side = $height;
        } else {
            $x = 0;
            $y = ($height - $width) / 2;
            $smallest_side = $width;
        }

        $thumb_size = 200;
        $thumb_image = imagecreatetruecolor($thumb_size, $thumb_size);
        imagecopyresampled($thumb_image, $thumb, 0, 0, $x, $y, $thumb_size, $thumb_size, $smallest_side, $smallest_side);

        imagejpeg($thumb_image, "cache/{$image_name}");

        return "cache/{$image_name}";
    }
}

foreach($images as $image) {
    echo "<img src='" . get_thumbnail($image) . "' />";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:05:56.980

要详细说明@DCoder 的评论，您可以做的是；

*   如果缓存中存在拇指，则像现在一样返回 URL。这将确保缓存中的拇指将快速加载。

*   如果缓存中*不*存在缩略图，则返回类似于`/cache/generatethumb.php?http://i49.tinypic.com/4t9a9w.jpg`脚本`generatethumb.php`生成缩略图的 URL，将其保存在缓存中并返回缩略图。下一次，它将在缓存中，并且 URL 不会通过 PHP 脚本。

# unity3d - 无法检查碰撞-Unity

> ID：14673803
> 
> 赞同：0
> 
> 时间：2013-02-03T14:58:23.633
> 
> 标签：unity3d, collision-detection, collision, rigid-bodies

我目前正在使用 Unity 游戏引擎为格斗游戏开发 AI 演示。我写了一个`OnTriggerEnter`检测拳头或踢腿的方法；但是，当且仅当角色移动时，它才会检测动作。我试过了`rigidboy.WakeUp()`，`rigidbody.AddForce( new Vector3(0,0,0) )`但他们没有解决问题。

问题是这样的：

例如，我踢了另一个角色，我的角色的腿进入并退出对撞机，但是`OnTriggerEnter`直到我移动我的角色才被调用。

我怎么解决这个问题？

这是我的代码：

```
function OnTriggerEnter(collision : Collider)
{
    if( collision.gameObject.CompareTag("playerLeg") || collision.gameObject.CompareTag("playerArm" ) )
    {
        Debug.Log("CPU RıNGO! RıNGO!"); 
    }
} 
```

PS另外，我试过RaycastHit，但它没有用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-02T18:07:27.777

有点愚蠢的问题，但是，你有你`IsTrigger=true`的任何对象吗？另外，两个碰撞的物体都有一个刚体？？

# c++ - 将内核函数的参数作为 C++ 结构传递？

> ID：14673806
> 
> 赞同：1
> 
> 时间：2013-02-03T14:58:44.257
> 
> 标签：c++, struct, cuda, parameter-passing

我想将内核函数的参数作为给定的结构传递，例如

```
struct kernel_data {
    double *A;
    double *B;
    double *C;
    const int *A_dims;
    const int *B_dims;
    int C_dims[2];
}; 
```

为此，我需要初始化一个设备指针，`cudaMalloc()`但我该如何初始化。这个函数的这样一个结构，包括我打算传递的这些参数。还是我必须单独通过它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T17:52:09.697

只需像任何其他参数一样将结构按值传递给内核：

```
struct kernel_data args;

cudaMalloc(&(args.A), sizeof(double)*.....);
cudaMalloc(&(args.B), sizeof(double)*.....);
cudaMalloc(&(args.C), sizeof(double)*.....);
cudaMalloc(&(args.A_dims), sizeof(int)*.....);
cudaMalloc(&(args.B_dims), sizeof(int)*.....);

kernel<<<....>>>(args); 
```

参数列表大小有一个理论上的限制，从 256 字节到 4Kb，取决于您使用的硬件，如果您超过它，请将`args`结构复制到设备分配并将其作为指针传递，或将其复制到常量内存指针。

要从主机初始化数组，只需使用标准`cudaMemcpy`调用：

```
cudaMemcpy(args.A, hostA, sizeof(double)*....., cudaMemcpyHostToDevice); 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T15:37:16.417

您可以通过复制将此结构传递给内核。请记住，传递给内核的参数总大小在 Fermi 之前的卡上不得超过 256B，在 Fermi 上不得超过 4KB。

因此，您必须使用 cudaMalloc 来分配设备内存，而不是在结构中设置指向设备内存的指针。最后，您通过复制将结构传递给内核。

我强烈建议您避免在 C++ 代码中使用此结构。代替

```
struct kernel_data {
    double *A;
    double *B;
    double *C;
    const int *A_dims;
    const int *B_dims;
    int C_dims[2];
}; 
```

你应该做这样的事情

```
class DeviceData{
public:   
    DeviceData(...){//Do cudaMalloc here}
    ~DeviceData(...){//Do cudaFree here}
private:
    double *_A;
    int _dims;    
}; 
```

此类将保存设备上可用的数据，并且是异常安全的。你可以实现一个可以传递给内核的包装器

```
class DeviceDataWrapper{
public:
    __host__ DeviceDataWrapper(DeviceData& device):
        _A(device._A),
        _dims(device._dims)
        {}

    __forceinline__ __device__ double* data(){return _A;}
    __forceinline__ __device__ int dims()const{return _dims;}

private:
    double *_A;
    int _dims;  
} 
```

然后以这种方式调用内核

```
__global__ void myKernel(DeviceDataWrapper a, DeviceDataWrapper b, DeviceData2Wrapper c){
 //do something like a.data()[0] = 1;
}

DeviceData A,B;
DeviceData2 C;
myKernel<<< >>>(A,B,C); 
```

# ruby-on-rails-3 - 红地毯锚到标题

> ID：14673807
> 
> 赞同：1
> 
> 时间：2013-02-03T14:58:59.047
> 
> 标签：ruby-on-rails-3, redcarpet

我正在使用 Redcarpet gem 进行降价，我想为 h2 标题生成自动锚点，以允许链接到每个部分。

显示.html.erb

```
<div class = "content"><%= markdown(@post.body) %></div> 
```

application_helper.rb

```
class HTMLwithPygments < Redcarpet::Render::HTML
  def block_code(code, language)
    Pygments.highlight(code, :lexer => language)
  end
end

def markdown(text)
  renderer = HTMLwithPygments.new(:hard_wrap => true, :with_toc_data => true)
  options = {
    :fenced_code_blocks => true,
    :no_intra_emphasis => true,
    :autolink => true,
    :strikethrough => true,
    :lax_html_blocks => true,
    :superscript => true,
  }
  Redcarpet::Markdown.new(renderer, options).render(text).html_safe
end 
```

我读到了 :with_toc_data => true 但它对我不起作用。我在选项区域添加了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-21T23:24:39.913

我做的和你描述的一样，基本上是

```
Redcarpet::Markdown.new(
  Redcarpet::Render::HTML.new(with_toc_data: true), {}
).render(text) 
```

我的视图包含以下代码

```
- @article.description.scan(/(#+)(.*)/).each do |menu_item|
  = content_tag(:a, menu_item[1], :href => "##{menu_item[1].downcase.strip.gsub(" ","-")}") 
```

也许这有帮助。

# php - 用php删除不同括号内的内容

> ID：14673808
> 
> 赞同：0
> 
> 时间：2013-02-03T14:59:13.690
> 
> 标签：php, regex

我想知道如何使用 php 中的正则表达式删除一组括号和括号本身之间的文本，括号可能不同......例如：

[我的内容}

或者

（我的内容）

或者

{我的内容)

等等...

我努力了：

```
preg_replace("/\{.*\}/", " ", $title);
preg_replace("/\[.*\]/", " ", $title);
preg_replace("/\(.*\)/", " ", $title); 
```

但这只是删除了相同的括号..是的，括号可以嵌套到二年级..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:39:40.367

您需要使用设置字符集并使用;`[]`保存字符集`()`

```
print preg_replace("~([\[\{\(]).*?([\]\}\)])~", "\\1...\\2", 
        "[mycontent} a (mycontent] b {mycontent)"); 
```

输出：`[...} a (...] b {...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:27:50.213

```
$title = "[mycontent}outside(mycontent]outside{mycontent)";

$find = array(
    "/\{.*?\}/",
    "/\{.*?\]/",
    "/\{.*?\)/",
    "/\[.*?\}/",
    "/\[.*?\]/",
    "/\[.*?\)/",
    "/\(.*?\}/",
    "/\(.*?\]/",
    "/\(.*?\)/"
);
$replace = array(
    " ",
    " ",
    " ",
    " ",
    " ",
    " ",
    " ",
    " ",
    " "
);
$string = preg_replace($find, $replace, $title);

var_dump($string); // prints string(17) " outside outside " 
```

# android - 如何使用动态壁纸滚动图像？

> ID：14673809
> 
> 赞同：2
> 
> 时间：2013-02-03T14:59:16.000
> 
> 标签：android, live-wallpaper

我跟着[链接](https://stackoverflow.com/a/6642967/1278196)，但它不完美的工作..

**主要代码**

```
private void drawFrame() {
        final SurfaceHolder holder = getSurfaceHolder();
        Canvas c = null;

        try {
            c = holder.lockCanvas();

            if (c != null) {

              c.save();
              c.translate((float)x_offcet,0);

                if (backgroundBitmap != null) {

                    c.drawBitmap(backgroundBitmap, 0, 0, null);

                }
               c.restore();
            }

        } finally {

            if (c != null) {
                holder.unlockCanvasAndPost(c);
            }
        }

        mHandler.removeCallbacks(run);

        if (visible) {
            mHandler.postDelayed(run, INTERVAL);
        }
    }

   @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
            float xOffsetStep, float yOffsetStep, int xPixelOffset,
            int yPixelOffset) {

         x_offcet = xPixelOffset;

         drawFrame();
    } 
```

任何想法/建议将不胜感激..

# windows - adobe air 应用程序可以打包在 windows 8 上运行吗？

> ID：14673811
> 
> 赞同：1
> 
> 时间：2013-02-03T14:59:31.833
> 
> 标签：windows, apache-flex, air

我想向 Microsoft 商店提交一个应用程序，在 flexbuilder 的打包选项中，我有安卓 ios 或 blackberry ，但是我想知道将我的应用程序打包为普通的空气应用程序是否可以在 Windows 8 平板电脑上运行，因为它在桌面上运行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T15:59:22.503

有关正式信息，请查看 Adob​​e 的[Flash 平台路线图](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)。

是的，可以打包 AIR 应用程序以在 Windows 8 上运行，但只能在桌面模式下运行。

Adobe 目前没有计划让 AIR 在“Windows 8 UI”/AKA Metro/Windows RT 中工作。此前，平台路线图称 AIR 将是制作“地铁”应用程序的方式；然而，最近的更新扭转了这一点。这一直颇有[争议](https://plus.google.com/111010557165494466226/posts/HEr4m1eLZgC)。

我认为在“metro UI”模式下不支持 AIR 意味着上传到 Microsoft Store 是不行的。

# javascript - 使用 JavaScript 在不同的设备上投放不同的广告尺寸

> ID：14673812
> 
> 赞同：2
> 
> 时间：2013-02-03T14:59:37.323
> 
> 标签：javascript, viewport, ads, adsense

子问题是相互关联的，所以为了清楚起见，我将它们按顺序排列。

**问题 - 1：**使用 JavaScript 根据设备的浏览器/视口宽度加载不同的 AdSense 广告尺寸/格式是否是个好主意？

我不是在问 Google AdSense 的 TOS 或其他政策是否可以。我已经照顾好他们了。

我想知道的是，使用 JavaScript 这样做有什么缺点吗？我的意思是，它会影响 Adsense 提供的广告质量吗？或者没关系？

**问题 - 2：**有更好的方法吗？

*   **(2a)**我找到了两个不同的代码片段来实现我所需要的。我不知道哪个更可靠或更好。

    [这](http://ryanunderdown.com/ppc/responsive-ads-with-adsense.php)：

    ```
    <script type="text/javascript"><!--
    google_ad_client = "ca-pub-3658299045266116";
    /* top */
    if ($(window).width()<728 ){
         google_ad_slot = "4414183254";
         google_ad_width = 320;
         google_ad_height = 50;
    }else{
         google_ad_slot = "1020377061";
         google_ad_width = 728;
         google_ad_height = 90;
    }
    //-->
    </script>
    <script type="text/javascript"
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script> 
    ```

    [有人说](http://ryanunderdown.com/ppc/responsive-ads-with-adsense.php/comment-page-1#comment-68122)，*“你不能依赖窗口宽度，因为它是不稳定的。例如，在某些安卓上你根本不能依赖它，因为浏览器需要长达 500 毫秒才能获得它的宽度。”* 这是真的吗，应该引起关注吗？

*   **(2b)**或者[这个](http://www.labnol.org/internet/google-adsense-responsive-design/25252/)：

    ```
    <script type="text/javascript">
        google_ad_client = "ca-publisher-id";
        if (window.innerWidth >= 800) {
            google_ad_slot = "ad-unit-1";
            google_ad_width = 728;
            google_ad_height = 60;
        } else if (window.innerWidth < 400) {
            google_ad_slot = "ad-unit-2";
            google_ad_width = 300;
            google_ad_height = 250;
        } else {
            google_ad_slot = "ad-unit-3";
            google_ad_width = 468;
            google_ad_height = 60;
        }
    </script>
    <script type="text/javascript" 
     src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script> 
    ```

    再一次，[其他人说](http://www.labnol.org/internet/google-adsense-responsive-design/25252/#comment-656360802)，_“您的解决方案很棒，但可以在旧版本的 IE 中中断。最好是使用 jQuery 来查询浏览器宽度：`width = $(window).width();`”但由于代码片段 2 中提到的原因，我不能使用它**（一）**。

那么，什么是做我需要的好方法？[`document.documentElement.clientWidth`](https://stackoverflow.com/a/8876069/1071413)? 但是当页面在桌面或移动设备上缩放时，它的行为是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:36:08.140

开始了：

```
<script type="text/javascript">

    var width = window.innerWidth || document.documentElement.clientWidth;
    google_ad_client = "ca-publisher-id";

    if (width >= 800) { 
       google_ad_slot = "ad-unit-1"; 
       google_ad_width = 728; 
       google_ad_height = 60; 
    } else if ((width < 800) && (width < 400)) { 
      google_ad_slot = "ad-unit-2"; 
      google_ad_width = 300; 
      google_ad_height = 250; 
    } else { 
      google_ad_slot = "ad-unit-3"; 
      google_ad_width = 468; 
      google_ad_height = 60; 
    } 
</script> 
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

顺便说一下，这是一种“Google Adsense 团队认可”的方法。

**资料来源：** [labnol.org](http://www.labnol.org/internet/google-adsense-responsive-design/25252/)

# ruby-on-rails - 没有要加载的文件——使用 redmine 2.2.2 和 ubuntu 10.04 进行捆绑/设置

> ID：14673816
> 
> 赞同：1
> 
> 时间：2013-02-03T15:00:33.387
> 
> 标签：ruby-on-rails, apache, passenger, redmine

我得到错误：

```
没有要加载的文件 -- bundler/setup

```

您可以看到下一个图像附件：

![在此处输入图像描述](../Images/bc6dcf7a780933610d372c0edd9861fc.png)

但是我的包安装得很好。如果我从`redmine/config/`命令运行

```
bundle install -- 没有开发测试 postgresql sqlite

```

我得到：

```
使用 rake (10.0.3)
使用 i18n (0.6.1)
使用 multi_json (1.5.0)
使用 activesupport (3.2.11)
使用构建器 (3.0.0)
使用 activemodel (3.2.11)
使用 erubis (2.7.0)
使用旅程 (1.0.4)
使用机架 (1.4.4)
使用机架缓存 (1.2)
使用机架测试（0.6.2）
使用远足 (1.2.1)
使用倾斜 (1.3.3)
使用链轮 (2.2.2)
使用动作包 (3.2.11)
使用 mime 类型 (1.19)
使用多语言 (0.3.3)
使用树顶 (1.4.12)
使用邮件 (2.4.4)
使用 actionmailer (3.2.11)
使用 arel (3.0.2)
使用 tzinfo (0.3.35)
使用活动记录 (3.2.11)
使用活动资源 (3.2.11)
使用coderay (1.0.8)
使用 rack-ssl (1.3.3)
使用 json (1.7.6)
使用 rdoc (3.12)
使用雷神 (0.17.0)
使用铁轨 (3.2.11)
使用 jquery-rails (2.0.3)
使用 mysql2 (0.3.11)
使用 net-ldap (0.3.1)
使用 ruby​​-openid (2.1.8)
使用 rack-openid (1.3.1)
使用捆绑器 (1.2.3)
使用导轨 (3.2.11)
使用 rmagick (2.13.1)
您的捆绑包已完成！使用 `bundle show [gemname]` 查看捆绑的 gem 的安装位置。

```

这是我的红宝石-v：

```
ruby 1.9.3p374 (2013-01-15 revision 38858) [i686-linux] 
```

这是我的导轨-v：

```
Rails 3.2.11 
```

我已经用 ubuntu 12 最新版本安装了 redmine，并且工作正常，但是使用 ubuntu 10.04 我得到了这个错误

这是我的 apache 默认配置：

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/redmine/public
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/redmine>
                RailsBaseURI /redmine
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>
        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>
        ErrorLog /var/log/apache2/error.log
        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn
        CustomLog /var/log/apache2/access.log combined
    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>
</VirtualHost> 
```

我的`gem env`：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.22
  - RUBY VERSION: 1.9.3 (2012-02-16 patchlevel 125) [i686-linux]
  - INSTALLATION DIRECTORY: /home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32
  - RUBY EXECUTABLE: /home/ubuntu/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
  - EXECUTABLE DIRECTORY: /home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/ubuntu/.rvm/gems/ruby-1.9.3-p125@rails32
     - /home/ubuntu/.rvm/gems/ruby-1.9.3-p125@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

这是我的`passenger.conf`

```
<IfModule mod_passenger.c>
  PassengerRoot /usr
  PassengerRuby /usr/bin/ruby
  PassengerDefaultUser www-database
</IfModule> 
```

当我跑步时，`ps -fe`我得到：

```
root     28771     1  0 06:00 ?        00:00:00 /usr/sbin/apache2 -k start
root     28783 28771  0 06:00 ?        00:00:00 /usr/lib/phusion_passenger/ApplicationPoolServerExecutable 0 /usr/lib/phusion_passenger/passenger-spawn-server  /usr/bin
root     28784 28783  0 06:00 ?        00:00:35 Passenger spawn server                                                                                                  
www-data 28789 28771  0 06:00 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 28790 28771  0 06:00 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 28791 28771  0 06:00 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 28792 28771  0 06:00 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 28793 28771  0 06:00 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 28800 28771  0 06:00 ?        00:00:00 /usr/sbin/apache2 -k start 
```

问题出在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:31:12.707

您的Passenger 正在尝试使用除您的1.9.3-p374 之外的另一个Ruby 来启动Redmine。从堆栈跟踪中可以看出，它尝试使用一些 Ruby 1.8（可能由系统包安装）。

要改变这一点，您必须[配置您的乘客](http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerRuby)以使用您的自定义 Ruby。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T22:29:28.917

## 虚拟主机示例

服务器名称 bug.domain.com DocumentRoot /srv/redmine/public

```
 PassengerRuby /path/to/ruby-x.y.z/bin/ruby
    <Directory /srv/redmine/public>
            AllowOverride all
            Options -MultiViews
    </Directory> 
```

## 找到 ruby​​ 可执行文件

首先，转到您的 redmine 目录：

```
cd /srv/redmine
gem env | grep -i exec 
```

例如我得到

```
RUBY EXECUTABLE: /home/me/.rvm/rubies/ruby-2.0.0-p195/bin/ruby
EXECUTABLE DIRECTORY: /home/me/.rvm/gems/ruby-2.0.0-p195/bin 
```

## 阿帕奇

最后**将指令添加** `PassengerRuby /path/to/ruby`到您的虚拟主机并*重新加载*您的 apache 配置。

# django - 需要分组和聚合的 Django 查询

> ID：14673823
> 
> 赞同：0
> 
> 时间：2013-02-03T15:01:49.697
> 
> 标签：django, django-queryset

我正在尝试在 django 中执行此查询，但我不确定最好的方法是什么。我需要分组，然后按该计数进行计数和排序...

我有一个直通模型，例如：

```
ProjectView(models.Model):
  user = models.ForeignKey(User)
  project = models.ForeignKey(Project)
  datetime_created = models.DateTimeField() 
```

我想获取自昨天以来按大多数视图排序的项目列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:10:00.537

像这样的东西（未经测试）：

```
projects = Project.objects \
                  .annotate(total_views=Count('projectview__project'))
                  .order_by('-total_views') 
```

`Project`型号名称在哪里`projectview`，`through`表格在哪里。

# javascript - OnClick 获取“a”标签的“id”属性

> ID：14673824
> 
> 赞同：2
> 
> 时间：2013-02-03T15:01:50.813
> 
> 标签：javascript, jquery, html, events, jquery-mobile

我在 jQuery Mobile Web 应用程序中有列表视图，此列表视图由以下元素组成：

```
<li id='search_r'>
    <a href='#' id='$id' class='s_result'></a>
</li>
<li id='search_r'>
    <a href='#' id='$id' class='s_result'></a>
</li> 
```

元素的数量取决于搜索结果的数量，不仅仅是这两个。当我单击列表视图中的元素时，在这种情况下：

```
<li></li> 
```

我需要发生两件事，一是从这个特定的“li”标签（点击的标签）内的“a”标签中分配“id”属性到我称之为“search_r”的全局变量。点击事件工作正常，但要从“a”标签获取属性我无法做到。

这是我的js：

```
$("#cc_page").ready(function(){
  $("#search_r").live('click', function(){
      search_r = $(this).attr('id');
      window.location.href = "http://imes.********.com/app/userpanel.html#sfpp_page";
  });
}); 
```

我知道“这个”不是解决方案。我对 js 真的很陌生，所以这就是为什么我要问这么荒谬的问题:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T15:04:53.487

您遇到的第一个问题是重复的`search_r`id 属性，这是无效的。这些应该更改为类。此外，您应该使用`on()`委托处理程序，因为`live()`已从最新版本的 jQuery 中删除。试试这个：

```
<li class='search_r'>
    <a href='#' id='$id' class='s_result'></a>
</li>
<li class='search_r'>
    <a href='#' id='$id' class='s_result'></a>
</li> 
```

```
$("#cc_page").on('click', '.search_r', function(){
    var search_r = $('a', this).attr('id');
    console.log(search_r); // just to check it works

    // I assume this is just for testing, otherwise leaving the page 
    // immediately on click renders getting the id completely moot.
    //window.location.href = "http://imes.********.com/app/userpanel.html#sfpp_page";
}); 
```

我还假设`$id`你的 HTML 来自某种形式的模板引擎，它被解释了？如果没有，这些也需要变得独一无二。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:03:30.453

[`.live`](http://api.jquery.com/live/)自 v1.7 起已在 jQuery 中弃用，并已在 v1.9 中删除。

您应该将其替换为[`.on()`](http://api.jquery.com/on/).

`.on`有 2 种用于绑定元素的语法，而`.live`只有 1 种。

如果元素在您绑定时存在，您可以这样做：

```
$('.element').on('click', function(){
    .......
}); 
```

您甚至可以使用速记：

```
$('.element').click(function(){
    .........
}); 
```

如果该元素当时不存在，或者将添加新元素（这是`.live`通常使用的），则需要使用“事件委托”：

```
$(document).on('click', '.element', function(){
    .............
}); 
```

注意：您希望绑定到最近的静态元素，而不是总是`document`.

同时，如果您将 jQuery 升级到最新版本，可以使用[**jQuery Migrate 插件来恢复功能。**](http://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin)`.live()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T15:05:33.603

`window.location.href`导致浏览器发出新请求。当新页面加载时，所有变量都将被重置。

你的目标是`search_r`什么？

# javascript - encodeURIComponent() 可以产生哪些字符？

> ID：14673825
> 
> 赞同：1
> 
> 时间：2013-02-03T15:01:58.193
> 
> 标签：javascript, regex, encodeuricomponent

由于 javascript 对`encodeURIComponent()`所有内容进行编码，除了

```
(alphabetic)
(decimal digits)
-
_
.
!
~
*
'
(
) 
```

并将它们编码为格式的字符串`%{digits}`

说`encodeURIComponent`总是返回某种组合是真的吗

```
- _ . ! ~ * ' ( ) % 
```

加上数字和字母字符，还是我错过了什么？

此外，可以公平地说，这里匹配的任何字符串：

```
/[^\_\-\.\!\~\*\'\(\)\d\w\%]/ig.test(string) 
```

所以肯定没有`encodeURIComponent`申请过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:24:10.680

根据[**文档**](http://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

```
encodeURIComponent escapes all characters except the following
alphabetic, decimal digits, - _ . ! ~ * ' ( ) 
```

所以我会说你是对的。

# java - 为什么等于功能不起作用？

> ID：14673827
> 
> 赞同：0
> 
> 时间：2013-02-03T15:02:06.453
> 
> 标签：java, equals

当我编译下面的代码时，它显示（字符串）用户名和 myList.get(0) 等于但等于函数返回 false 为什么密码也会发生同样的情况。

```
btnLogIn.addActionListener(new ActionListener()
 {
   public void actionPerformed(ActionEvent e) {

    String Username=(String) textField.getText();   //fatch the user name from text field
    String Password=(String) textField_1.getText();  //fatch password frof text field
    databaseconnection connect = new databaseconnection(); // databaseconnection class object to connect to data base
    ArrayList myList = connect.search(Username,Password);  //serch the username and password in data base
            System.out.println((String)myList.get(0));  //for testing 
            System.out.println((String)myList.get(1));  //for testing
            System.out.println(Username);               //for testing
            System.out.println(Password);               //for testing
            System.out.println(Username.equals(myList.get(0)));  //for testing 
            System.out.println(Password.equals((String)myList.get(1)));   //for testing
            if(Username.equals(myList.get(0))&&Password.equals((String)myList.get(1))){
            System.out.println("Hello"+Username);
            }
        }
    }); 
```

![在此处输入图像描述](../Images/4f07618440881a2b35b215bdf7afa90b.png)

这是我的数据库连接类

```
 import java.sql.*;
   import java.util.ArrayList; 

 public class databaseconnection{
Statement stmt  ;
ResultSet rs ;
Connection conn;
ArrayList<String> temp = new ArrayList<String>();

public void getconnection(){

try{

    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

    Connection conn = DriverManager.getConnection("jdbc:odbc:Database1","","");

    stmt = conn.createStatement();

}
catch(Exception e){
    System.out.println("connection error");
}
}
public ArrayList  search(String Username,String Password){

    getconnection();
    try{
    rs = stmt.executeQuery("select username,password from login where username = \'"+Username+"\'");
    if(rs.next()){
    String tempString=rs.getString("username");
    temp.add(tempString);
    tempString= rs.getString("password");
    temp.add(tempString);
    }
    }
    catch(Exception e){
    System.out.println("search error");
    }
    return temp;
  }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:42:04.770

我将您的代码重写为：

```
String Username = "user";
String Password = "pass";

List<String> myList = new ArrayList<>(); 
myList.add("user");
myList.add("pass");

System.out.println(Username);
System.out.println(Password);
System.out.println(myList.get(0));
System.out.println(myList.get(1));
System.out.println(Username.equals(myList.get(0)));
System.out.println(Password.equals(myList.get(1)));

if (Username.equals(myList.get(0)) && Password.equals(myList.get(1))) {
    System.out.println("Hello, " + Username);
} 
```

现在它可以工作了。注意`<String>`List 声明之后的内容。这称为[泛型](https://www.google.com/search?q=Java%20generics)，并表示只能`Strings`放入列表中。它还消除了任何容易出错的显式转换的需要，并且只有在您确定可以安全地执行它的情况下才应该这样做。

如果您根据此更改了代码但仍然没有得到正确的结果，请确保您的连接中的值是正确的并且不包含任何类型的不可见字符。

* * *

此外，在 Java 中，变量名通常采用[lowerCamelCase 格式](http://en.wikipedia.org/wiki/CamelCase#Variations_and_synonyms)。类名应该是[UpperCamelCase](http://en.wikipedia.org/wiki/CamelCase#Variations_and_synonyms)。请参阅[Java 命名约定](https://www.google.com/search?q=Java%20naming%20conventions)。

[不要忘记关闭您的连接！](https://www.google.com/search?q=Java%207%20close%20connection) [Java 7 自动资源管理](https://www.google.com/search?q=Java%207%20automatic%20resource%20management)可以帮助您。在一般情况下，您还应该处理任何连接错误。

通过变量的作用来命名变量是个好主意。因此，您的代码应该看起来更像这样：

```
public void actionPerformed(ActionEvent e) {
    String username = "user";
    String password = "pass";

    List<String> dtbSearchResults;
    try (DatabaseConnection connection = new DatabaseConnection()) {
        dtbSearchResults = connection.search(username, password); 
    } catch (SomeExceptionYouReallyShouldHandle e) {
        // seriously, handle it here
    }

    System.out.println(username);
    System.out.println(password);
    System.out.println(dtbSearchResults.get(0));
    System.out.println(dtbSearchResults.get(1));
    System.out.println(username.equals(dtbSearchResults.get(0)));
    System.out.println(password.equals(dtbSearchResults.get(1)));

    if (username.equals(dtbSearchResults.get(0)) && password.equals(dtbSearchResults.get(1))) {
        System.out.println("Hello, " + username);
    }
} 
```

它仍然不完美，因为该`search()`方法应该返回一个类型`UserCredentials`的实例或一个`List<UserCredentials>`基于它应该做什么的实例。`UserCredentials`然后看起来像这样：

```
public class UserCredentials {

    private final String username;
    private final String password;

    public UserCredentials(String username, String password) {
        // maybe some validity checks
        this.username = username;
        this.password = password;
    }

    public String getUsername() {
        return username;
    }

    public String getPassword() {
        return password;
    }

} 
```

实现此类后，您的代码将如下所示（假设`search()`应仅返回一个结果）：

```
public void actionPerformed(ActionEvent e) {
    String username = "user";
    String password = "pass";

    UserCredentials user;
    try (DatabaseConnection connection = new DatabaseConnection()) {
        user = connection.search(username, password); 
    } catch (SomeExceptionYouReallyShouldHandle e) {
        // seriously, handle it here
    }

    System.out.println(username);
    System.out.println(password);
    System.out.println(user.getUsername());
    System.out.println(user.getPassword());
    System.out.println(username.equals(user.getUsername()));
    System.out.println(password.equals(user.getPassword()));

    if (username.equals(user.getUsername())
            && password.equals(user.getPassword())) {
        System.out.println("Hello, " + username);
    }
} 
```

如果您有任何其他问题，请提出任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:05:39.067

将 myList 定义为类型`ArrayList<String>`

# ios - iOS、Core Data 和 iCloud - 切换上下文

> ID：14673828
> 
> 赞同：0
> 
> 时间：2013-02-03T15:02:23.463
> 
> 标签：ios, core-data, icloud

我正在创建一个需要立即从本地数据存储中显示数据的应用程序。当应用程序开始确定 iCloud 是否可用时，我会启动一个后台线程。

我到处找，找不到解决方案：当 iCloud 可用时，我可以更改persistentStore 上的“选项”以开始使用 iCloud 事务吗？

我不确定在这种情况下正确的方法是什么。我尝试的一切都会导致应用程序崩溃。

最初我有它，所以 iCloud 检查不在后台线程中，应用程序运行良好，但偶尔会超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:31:07.513

您不必知道 iCloud 何时可用。您只是处理数据，但不会将它们直接发送到 iCloud。iOS 代替你做。所以只有它知道何时以及如何发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:47:34.100

`NSPersistentStore`不，一旦对象存在，您就无法更改对象的选项。您只能在将持久存储添加到`NSPersistentStoreCoordinator`. 最接近更改选项的方法是拆除整个 Core Data 堆栈并从不同的选项重新开始。

但这无济于事，因为：

*   即使您检测到 iCloud 可用（我猜`NSFileManager`是通过它`ubiquityIdentityToken`或通过调用使用 iCloud `URLForUbiquityContainerIdentifier:`），您的调用`addPersistentStoreWithType:configuration:URL:options:error:`可能仍会阻塞一段时间。如果 iCloud 中有可用的新数据，则在您添加持久存储之前它不会开始下载，并且该方法在下载过程完成之前不会返回。有时，iCloud 只是让该方法阻塞一段时间，没有明显的原因。

*   如果您让用户在使用非 iCloud 选项时对数据进行任何更改，这些更改将不会在以后自动发送到云端。Core Data 仅在 iCloud 处于活动状态时数据发生更改时才将更改发送到 iCloud——这会使其生成事务。您必须加载并重新保存用户所做的任何更改，否则这些更改将永远无法进入云端。

不幸的是，在将 Core Data 与 iCloud 结合使用时，您遇到了主要的绊脚石之一。在 Core Data 完成与 iCloud 的通信之前，您无法使完整的数据存储可用——因为您添加持久存储的调用直到那时才会返回。你不能做任何事情来加速这个过程。如果您继续尝试将 iCloud 与 Core Data 一起使用，这只是您会遇到的麻烦之一。

根据数据的性质，您**可能**可以使用两种数据存储，一种纯粹是本地的，另一种是通过 iCloud 同步的。您可以使纯本地数据存储可用，而 iCloud 则试图将其行为整合到足以发挥作用的程度。但是，如果您坚持使用一个数据存储，则会遇到延迟。

# python - 将数组传递给函数并按索引循环值

> ID：14673836
> 
> 赞同：0
> 
> 时间：2013-02-03T15:03:10.710
> 
> 标签：python, loops

我不断收到 TypeError: unsupported operand type for +: 'int' and 'list' 所以我猜该数组没有被索引？请协助。

```
def main():
    arr = [1, 2, 3, 4, 5]
    length = len(arr)
    maxAns = msa2(length, arr)
    print maxAns

def msa2(length, *arr):
    maxThus = 0
    for i in range(0, length):
        sum = 0
        for j in range(i, length):
            sum = sum + arr[j]     # how to get value in index j
            max(maxThus, sum)
    return maxThus

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T15:09:37.887

你不应该使用`*arr`; 删除`*`通配符，您的代码将起作用。

使用通配符，传入的参数`msa2`被视为可能更多的额外位置参数之一，因此`arr`内部`msa2`是这些参数的列表，第一个元素是您在调用时传入的列表`msa2`：

```
>>> def foo(*args):
...     print args
... 
>>> foo(1, 2, 3)
(1, 2, 3)
>>> foo([1, 2, 3])
([1, 2, 3],) 
```

您的函数也将始终返回`0`；你不会`maxThus`在任何地方更新。您可能打算将结果分配`max(maxThus, sum)`给`maxThus`：

```
maxThus = max(maxThus, sum) 
```

# java - 在类中存储变量时遇到问题

> ID：14673837
> 
> 赞同：0
> 
> 时间：2013-02-03T15:03:13.810
> 
> 标签：java

请看看我的逻辑是否正确我不知道如何实现我正在尝试做的事情。我是java初学者。

Game 是一个类，用于在游戏完成后存储该用户的名称和步数。

[第一种方法]

```
private game[] gameArray = new game[10];

for(int i = 0; i <gameArray.length;i++){
         gameArray[i].setName(nameTxt.getText());
         gameArray[i].setpSteps(stepsCount);
    } 
```

通过单击历史按钮，他们将获得前 10 个人的姓名和步数。

```
JOptionPane.showMessageDialog(null,
       "Player's Name No. of Steps"+
       "\n"+gameArray[i].toString()); 
```

-问题：

1）此代码仅限于前 10 个结果，无论如何我可以获得所有以前的结果

2）此代码不起作用！

[第二种方法-这也行不通！]

```
private game[] gameArray = new game[10];

// Storing the name of player[i]

gameArray[i].setName(nameTxt.getName());

// Storing the number of steps player[i] took.

gameArray[i].setpSteps(stepsCount);

//Displaying previous 10 players name and steps

JOptionPane.showMessageDialog(null,
       "Player's Name No. of Steps"+
       "\n"+gameArray[i].toString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:08:35.920

几点：

*   您不能直接将数组转换为`String`通过，`toString()`因为它在 Java 中不受支持，您应该使用`Arrays.toString(..)`
*   Java 数组具有静态大小，如果要存储整个历史记录，则需要一个动态数据结构作为 an`ArrayList<Game>`或 a`LinkedList<Game>`
*   类名应大写（`Game`, not `game`）
*   如果不了解您`Game`班级的内部情况，就不可能说出什么不工作以及为什么不工作，我们甚至不知道它应该做什么

# r - 使用grep在R中提取和平均每月数据？

> ID：14673844
> 
> 赞同：2
> 
> 时间：2013-02-03T15:04:21.180
> 
> 标签：r, aggregate, subset, posixct

提前我不得不说，我真的很抱歉格式不好！我只是似乎无法掌握它......我也是一个 R 菜鸟。

所以，我有 80 个文件，其中包含 80 条鱼的运动信息；

```
> head(PAVdata)
   X  meanlat meanlong meandepth mindepth maxdepth depthrange rec numhits            datetime mon      X.1       Y        Z
1 23 58.39601 8.708952  6.493529     5.72     7.47       1.75   4      17 2012-05-11 11:15:00   1 482986.7 6472838 6.493529
2 24 58.39618 8.710993  4.035588     1.76     7.47       5.71   6      34 2012-05-11 11:45:00   1 483106.1 6472855 4.035588
3 25 58.39615 8.710919  6.037692     3.08     8.35       5.27   6      26 2012-05-11 12:15:00   1 483101.8 6472853 6.037692
4 26 58.39556 8.710654  3.987500     2.20     6.16       3.96   5      16 2012-05-11 12:45:00   1 483086.0 6472787 3.987500
5 27 58.39617 8.711363  2.944615     2.20     3.96       1.76   6      26 2012-05-11 13:15:00   1 483127.8 6472855 2.944615
6 28 58.39628 8.710904  2.860000     2.20     3.52       1.32   6      24 2012-05-11 13:45:00   1 483101.0 6472867 2.860000 
```

但是感兴趣的列是**datetime**和**Z**，其中 Z 是深度。

我的目标是；

*   获取深度的每日和每月平均值
*   获取每日和每月的最小值和最大值（查看幅度）

到目前为止我尝试过的是；

> 六月<-c(PAVdata$datetime[grep("^2012-07",as.character(PAVdata$datetime))])

这产生了对我来说完全牵强的东西

> 负责人（六月） [1] 2390 2391 2392 2393 2394 2395

我正在阅读有关**子集**和**聚合**以及**POSIXlt**和**tapply**和**zoo**并想尝试这些，但我似乎得到了一个错误，即存在长度差异 ..

这是 POSIXlt 的尝试；

> PAVdata$datetime <- strftime(as.POSIXlt(PAVdata$datetime,format="%Y-%m-%d %H:%M:%S"),format='%b')
> 
> June_Monthly_Avg <- ave(PAVdata$Z,PAVdata$datetime,FUN=mean)
> 
> 头（六月_月平均）[1] 9.341862 9.341862 9.341862 9.341862 9.341862 9.341862

整个事情都是由相同的数字组成的……我认为我最错误地使用突击队。

但后来我尝试了一些更简单的方法；

> juni_Monthly_Avg <- ave(PAVdata$Z,PAVdata$datetime,FUN=mean)
> 
> 头（juni_Monthly_Avg）
> 
> [1] 6.493529 4.035588 6.037692 3.987500 2.944615 2.860000

让我感到困惑的是，看到六月我应该只得到一个值。到目前为止，我认为**grep**看起来最有希望，但我似乎无法理解它。几天来一直在搜寻 R Book 和互联网，当然还有 SO，并决定在我拔掉所有头发之前（以及在咨询我的主管之前）大声呼救。

谢谢^_^

```
> dput(head(PAVdata))
structure(list(X = 23:28, meanlat = c(58.3960117647059, 58.3961761764706, 
58.3961507692308, 58.395558125, 58.3961726923077, 58.3962804166667
), meanlong = c(8.70895176470588, 8.71099294117647, 8.71091923076923, 
8.71065375, 8.71136346153846, 8.71090416666667), meandepth = c(6.49352941176471, 
4.03558823529412, 6.03769230769231, 3.9875, 2.94461538461538, 
2.86), mindepth = c(5.72, 1.76, 3.08, 2.2, 2.2, 2.2), maxdepth = c(7.47, 
7.47, 8.35, 6.16, 3.96, 3.52), depthrange = c(1.75, 5.71, 5.27, 
3.96, 1.76, 1.32), rec = c(4L, 6L, 6L, 5L, 6L, 6L), numhits = c(17L, 
34L, 26L, 16L, 26L, 24L), datetime = structure(1:6, .Label = c("2012-06-01 00:15:00", "2012-06-01 00:45:00", 
"2012-06-01 01:15:00", "2012-06-01 01:45:00", "2012-06-01 02:15:00", 
"2012-06-01 02:45:00", "2012-06-01 03:15:00", "2012-06-01 03:45:00", 
"2012-06-01 04:15:00", "2012-06-01 04:45:00", "2012-06-01 05:45:00", 
"2012-06-01 06:15:00", "2012-06-01 06:45:00", "2012-06-01 07:15:00", 
"2012-06-01 07:45:00", "2012-06-01 08:15:00", "2012-06-01 08:45:00", 
"2012-06-01 09:45:00", "2012-06-01 10:15:00", "2012-06-01 10:45:00", 
"2012-06-01 11:15:00", "2012-06-01 11:45:00", "2012-06-01 12:15:00", 
"2012-06-01 12:45:00", "2012-06-01 13:15:00", "2012-06-01 13:45:00", 
"2012-06-01 14:45:00", "2012-06-01 15:15:00", "2012-06-01 15:45:00", 
"2012-06-01 16:15:00", "2012-06-01 16:45:00", "2012-06-01 17:45:00", 
"2012-06-01 18:15:00", "2012-06-01 18:45:00", "2012-06-01 19:15:00", 
"2012-06-01 19:45:00", "2012-06-01 20:15:00", "2012-06-01 20:45:00", 
"2012-06-01 21:15:00", "2012-06-01 22:15:00", "2012-06-01 22:45:00", 
"2012-06-01 23:15:00", "2012-06-01 23:45:00", "2012-06-02 00:15:00", 
"2012-06-02 00:45:00", "2012-06-02 01:15:00", "2012-06-02 01:45:00", 
"2012-06-02 02:15:00", "2012-06-02 02:45:00", "2012-06-02 03:15:00", 
"2012-06-02 03:45:00", "2012-06-02 04:15:00", "2012-06-02 04:45:00", 
"2012-06-02 05:15:00", "2012-06-02 05:45:00", "2012-06-02 06:15:00", 
"2012-06-02 06:45:00", "2012-06-02 07:15:00", "2012-06-02 07:45:00", 
"2012-06-02 08:15:00", "2012-06-02 08:45:00", "2012-06-02 09:15:00", 
"2012-06-02 09:45:00", "2012-06-02 10:15:00", "2012-06-02 10:45:00", 
"2012-06-02 11:15:00", "2012-06-02 11:45:00", "2012-06-02 12:15:00", 
"2012-06-02 13:15:00", "2012-06-02 13:45:00", "2012-06-02 14:15:00", 
"2012-06-02 14:45:00", "2012-06-02 15:15:00", "2012-06-02 15:45:00", 
"2012-06-02 16:15:00", "2012-06-02 16:45:00", "2012-06-02 17:15:00", 
"2012-06-02 18:15:00", "2012-06-02 19:15:00", "2012-06-02 19:45:00", 
"2012-06-02 20:15:00", "2012-06-02 20:45:00", "2012-06-02 21:15:00", 
"2012-06-02 21:45:00", "2012-06-02 22:15:00", "2012-06-02 22:45:00", 
"2012-06-02 23:15:00", "2012-06-02 23:45:00", "2012-06-03 00:15:00", 
"2012-06-03 00:45:00", "2012-06-03 01:15:00", "2012-06-03 01:45:00", 
"2012-06-03 02:15:00", "2012-06-03 02:45:00", "2012-06-03 03:15:00", 
"2012-06-03 03:45:00", "2012-06-03 04:15:00", "2012-06-03 04:45:00", 
"2012-06-03 05:15:00", "2012-06-03 05:45:00", "2012-06-03 06:15:00", 
"2012-06-03 06:45:00", "2012-06-03 07:15:00", "2012-06-03 07:45:00", 
"2012-06-03 08:15:00", "2012-06-03 08:45:00", "2012-06-03 09:15:00", 
"2012-06-03 09:45:00", "2012-06-03 10:15:00", "2012-06-03 10:45:00", 
"2012-06-03 11:15:00", "2012-06-03 11:45:00", "2012-06-03 12:15:00", 
"2012-06-03 12:45:00", "2012-06-03 13:15:00", "2012-06-03 13:45:00", 
"2012-06-03 14:15:00", "2012-06-03 15:45:00", "2012-06-03 16:15:00", 
"2012-06-03 16:45:00", "2012-06-03 17:15:00", "2012-06-03 17:45:00", 
"2012-06-03 18:15:00", "2012-06-03 18:45:00", "2012-06-03 19:15:00", 
"2012-06-03 19:45:00", "2012-06-03 20:15:00", "2012-06-03 20:45:00", 
"2012-06-03 21:15:00", "2012-06-03 21:45:00", "2012-06-03 22:15:00", 
"2012-06-03 22:45:00", "2012-06-03 23:15:00", "2012-06-03 23:45:00", 
"2012-06-04 00:15:00", "2012-06-04 00:45:00", "2012-06-04 01:15:00", 
"2012-06-04 01:45:00", "2012-06-04 02:15:00", "2012-06-04 02:45:00", 
"2012-06-04 03:15:00", "2012-06-04 03:45:00", "2012-06-04 04:45:00", 
"2012-06-04 05:15:00", "2012-06-04 05:45:00", "2012-06-04 06:15:00", 
"2012-06-04 06:45:00", "2012-06-04 07:15:00", "2012-06-04 07:45:00", 
"2012-06-04 08:15:00", "2012-06-04 08:45:00", "2012-06-04 09:15:00", 
"2012-06-04 09:45:00", "2012-06-04 10:15:00", "2012-06-04 10:45:00", 
"2012-06-04 11:15:00", "2012-06-04 11:45:00", "2012-06-04 12:15:00", 
"2012-06-04 12:45:00", "2012-06-04 13:15:00", "2012-06-04 13:45:00", 
"2012-06-04 14:15:00", "2012-06-04 14:45:00", "2012-06-04 15:15:00", 
"2012-06-04 15:45:00", "2012-06-04 16:15:00", "2012-06-04 16:45:00", 
"2012-06-04 17:15:00", "2012-06-04 17:45:00", "2012-06-04 18:15:00", 
"2012-06-04 18:45:00", "2012-06-04 19:15:00", "2012-06-04 19:45:00", 
"2012-06-04 20:15:00", "2012-06-04 20:45:00", "2012-06-04 21:15:00", 
"2012-06-04 21:45:00", "2012-06-04 22:15:00", "2012-06-04 22:45:00", 
"2012-06-04 23:15:00", "2012-06-04 23:45:00", "2012-06-05 00:15:00", 
"2012-06-05 00:45:00", "2012-06-05 01:15:00", "2012-06-05 01:45:00", 
"2012-06-05 02:15:00", "2012-06-05 02:45:00", "2012-06-05 03:15:00", 
"2012-06-05 03:45:00", "2012-06-05 04:15:00", "2012-06-05 04:45:00", 
"2012-06-05 05:15:00", "2012-06-05 05:45:00", "2012-06-05 06:15:00", 
"2012-06-05 06:45:00", "2012-06-05 07:15:00", "2012-06-05 07:45:00", 
"2012-06-05 08:15:00", "2012-06-05 08:45:00", "2012-06-05 09:15:00", 
"2012-06-05 09:45:00", "2012-06-05 10:15:00", "2012-06-05 10:45:00", 
"2012-06-05 11:15:00", "2012-06-05 11:45:00", "2012-06-05 12:15:00", 
"2012-06-05 12:45:00", "2012-06-05 13:15:00", "2012-06-05 13:45:00", 
"2012-06-05 14:15:00", "2012-06-05 14:45:00", "2012-06-05 15:15:00", 
"2012-06-05 15:45:00", "2012-06-05 16:15:00", "2012-06-05 16:45:00", 
"2012-06-05 17:15:00", "2012-06-05 17:45:00", "2012-06-05 18:15:00", 
"2012-06-05 18:45:00", "2012-06-05 19:15:00", "2012-06-05 19:45:00", 
"2012-06-05 20:15:00", "2012-06-05 20:45:00", "2012-06-05 21:15:00", 
"2012-06-05 21:45:00", "2012-06-05 22:15:00", "2012-06-05 22:45:00", 
"2012-06-05 23:15:00", "2012-06-05 23:45:00", "2012-06-06 00:15:00", 
"2012-06-06 00:45:00", "2012-06-06 01:15:00", "2012-06-06 01:45:00", 
"2012-06-06 02:15:00", "2012-06-06 02:45:00", "2012-06-06 03:15:00", 
"2012-06-06 03:45:00", "2012-06-06 04:15:00", "2012-06-06 04:45:00", 
"2012-06-06 05:15:00", "2012-06-06 05:45:00", "2012-06-06 06:45:00", 
"2012-06-06 07:15:00", "2012-06-06 07:45:00", "2012-06-06 08:15:00", 
"2012-06-06 08:45:00", "2012-06-06 09:45:00", "2012-06-06 10:15:00", 
"2012-06-06 10:45:00", "2012-06-06 11:15:00", "2012-06-06 11:45:00", 
"2012-06-06 12:15:00", "2012-06-06 12:45:00", "2012-06-06 13:15:00", 
"2012-06-06 13:45:00", "2012-06-06 14:15:00", "2012-06-06 14:45:00", 
"2012-06-06 15:15:00", "2012-06-06 15:45:00", "2012-06-06 16:15:00", 
"2012-06-06 16:45:00", "2012-06-06 17:15:00", "2012-06-06 17:45:00", 
"2012-06-06 18:15:00", "2012-06-06 18:45:00", "2012-06-06 19:15:00", 
"2012-06-06 19:45:00", "2012-06-06 20:15:00", "2012-06-06 20:45:00", 
"2012-06-06 21:45:00", "2012-06-06 22:15:00", "2012-06-06 22:45:00", 
"2012-06-06 23:15:00", "2012-06-06 23:45:00", "2012-06-07 00:15:00", 
"2012-06-07 00:45:00", "2012-06-07 01:15:00", "2012-06-07 01:45:00", 
"2012-06-07 02:15:00", "2012-06-07 02:45:00", "2012-06-07 03:15:00", 
"2012-06-07 03:45:00", "2012-06-07 04:15:00", "2012-06-07 04:45:00", 
"2012-06-07 05:15:00", "2012-06-07 05:45:00", "2012-06-07 06:15:00", 
"2012-06-07 06:45:00", "2012-06-07 07:15:00", "2012-06-07 07:45:00", 
"2012-06-07 08:15:00", "2012-06-07 08:45:00", "2012-06-07 09:15:00", 
"2012-06-07 09:45:00", "2012-06-07 10:15:00", "2012-06-07 10:45:00", 
"2012-06-07 11:15:00", "2012-06-07 11:45:00", "2012-06-07 12:15:00", 
"2012-06-07 12:45:00", "2012-06-07 13:15:00", "2012-06-07 13:45:00", 
"2012-06-07 14:15:00", "2012-06-07 14:45:00", "2012-06-07 15:15:00", 
"2012-06-07 15:45:00", "2012-06-07 16:15:00", "2012-06-07 16:45:00", 
"2012-06-07 17:15:00", "2012-06-07 17:45:00", "2012-06-07 18:15:00", 
"2012-06-07 18:45:00", "2012-06-07 19:15:00", "2012-06-07 19:45:00", 
"2012-06-07 20:15:00", "2012-06-07 20:45:00", "2012-06-07 21:15:00", 
"2012-06-07 21:45:00", "2012-06-07 22:15:00", "2012-06-07 22:45:00", 
"2012-06-07 23:15:00", "2012-06-07 23:45:00", "2012-06-08 00:15:00", 
"2012-06-08 00:45:00", "2012-06-08 01:15:00", "2012-06-08 01:45:00", 
"2012-06-08 02:15:00", "2012-06-08 02:45:00", "2012-06-08 03:15:00", 
"2012-06-08 03:45:00", "2012-06-08 04:15:00", "2012-06-08 04:45:00", 
"2012-06-08 05:15:00", "2012-06-08 05:45:00", "2012-06-08 06:15:00", 
"2012-06-08 06:45:00", "2012-06-08 07:15:00", "2012-06-08 07:45:00", 
"2012-06-08 08:15:00", "2012-06-08 08:45:00", "2012-06-08 09:15:00", 
"2012-06-08 09:45:00", "2012-06-08 10:15:00", "2012-06-08 10:45:00", 
"2012-06-08 11:15:00", "2012-06-08 11:45:00", "2012-06-08 12:15:00", 
"2012-06-08 12:45:00", "2012-06-08 13:15:00", "2012-06-08 13:45:00", 
"2012-06-08 14:15:00", "2012-06-08 14:45:00", "2012-06-08 15:15:00", 
"2012-06-08 15:45:00", "2012-06-08 16:15:00", "2012-06-08 16:45:00", 
"2012-06-08 17:15:00", "2012-06-08 17:45:00", "2012-06-08 18:15:00", 
"2012-06-08 18:45:00", "2012-06-08 19:15:00", "2012-06-08 19:45:00", 
"2012-06-08 20:15:00", "2012-06-08 20:45:00", "2012-06-08 21:15:00", 
"2012-06-08 21:45:00", "2012-06-08 22:15:00", "2012-06-08 22:45:00", 
"2012-06-08 23:15:00", "2012-06-08 23:45:00", "2012-06-09 00:15:00", 
"2012-06-09 00:45:00", "2012-06-09 01:15:00", "2012-06-09 01:45:00", 
"2012-06-09 02:15:00", "2012-06-09 02:45:00", "2012-06-09 03:15:00", 
"2012-06-09 03:45:00", "2012-06-09 04:15:00", "2012-06-09 04:45:00", 
"2012-06-09 05:15:00", "2012-06-09 05:45:00", "2012-06-09 06:45:00", 
"2012-06-09 07:15:00", "2012-06-09 07:45:00", "2012-06-09 08:15:00", 
"2012-06-09 08:45:00", "2012-06-09 09:15:00", "2012-06-09 09:45:00", 
"2012-06-09 10:15:00", "2012-06-09 10:45:00", "2012-06-09 11:15:00", 
"2012-06-09 11:45:00", "2012-06-09 12:15:00", "2012-06-09 12:45:00", 
"2012-06-09 13:15:00", "2012-06-09 13:45:00", "2012-06-09 14:15:00", 
"2012-06-09 14:45:00", "2012-06-09 15:15:00", "2012-06-09 15:45:00", 
"2012-06-09 16:15:00", "2012-06-09 16:45:00", "2012-06-09 17:15:00", 
"2012-06-09 17:45:00", "2012-06-09 18:15:00", "2012-06-09 18:45:00", 
"2012-06-09 19:15:00", "2012-06-09 19:45:00", "2012-06-09 20:15:00", 
"2012-06-09 20:45:00", "2012-06-09 21:15:00", "2012-06-09 21:45:00", 
"2012-06-09 22:15:00", "2012-06-09 22:45:00", "2012-06-09 23:15:00", 
"2012-06-09 23:45:00", "2012-06-10 00:15:00", "2012-06-10 00:45:00", 
"2012-06-10 01:15:00", "2012-06-10 01:45:00", "2012-06-10 02:15:00", 
"2012-06-10 02:45:00", "2012-06-10 03:15:00", "2012-06-10 03:45:00", 
"2012-06-10 04:15:00", "2012-06-10 04:45:00", "2012-06-10 05:15:00", 
"2012-06-10 05:45:00", "2012-06-10 06:15:00", "2012-06-10 06:45:00", 
"2012-06-10 07:15:00", "2012-06-10 07:45:00", "2012-06-10 08:15:00", 
"2012-06-10 08:45:00", "2012-06-10 09:15:00", "2012-06-10 09:45:00", 
"2012-06-10 10:15:00", "2012-06-10 10:45:00", "2012-06-10 11:15:00", 
"2012-06-10 11:45:00", "2012-06-10 12:15:00", "2012-06-10 12:45:00", 
"2012-06-10 13:15:00", "2012-06-10 13:45:00", "2012-06-10 14:15:00", 
"2012-06-10 14:45:00", "2012-06-10 15:15:00", "2012-06-10 15:45:00", 
"2012-06-10 16:15:00", "2012-06-10 16:45:00", "2012-06-10 17:15:00", 
"2012-06-10 17:45:00", "2012-06-10 18:15:00", "2012-06-10 18:45:00", 
"2012-06-10 19:15:00", "2012-06-10 19:45:00", "2012-06-10 20:15:00", 
"2012-06-10 20:45:00", "2012-06-10 21:15:00", "2012-06-10 21:45:00", 
"2012-06-10 22:15:00", "2012-06-10 22:45:00", "2012-06-10 23:15:00", 
"2012-06-10 23:45:00", 
"2012-07-01 00:15:00", "2012-07-01 00:45:00", "2012-07-01 01:15:00", 
"2012-07-01 01:45:00", "2012-07-01 02:15:00", "2012-07-01 02:45:00", 
"2012-07-01 03:15:00", "2012-07-01 03:45:00", "2012-07-01 04:15:00", 
"2012-07-01 04:45:00", "2012-07-01 05:15:00", "2012-07-01 05:45:00", 
"2012-07-01 06:15:00", "2012-07-01 06:45:00", "2012-07-01 07:15:00", 
"2012-07-01 07:45:00", "2012-07-01 08:15:00", "2012-07-01 08:45:00", 
"2012-07-01 09:15:00", "2012-07-01 09:45:00", "2012-07-01 10:15:00", 
"2012-07-01 10:45:00", "2012-07-01 11:15:00", "2012-07-01 11:45:00", 
"2012-07-01 12:15:00", "2012-07-01 12:45:00", "2012-07-01 13:15:00", 
"2012-07-01 13:45:00", "2012-07-01 14:15:00", "2012-07-01 14:45:00", 
"2012-07-01 15:15:00", "2012-07-01 15:45:00", "2012-07-01 16:15:00", 
"2012-07-01 16:45:00", "2012-07-01 17:15:00", "2012-07-01 17:45:00", 
"2012-07-01 18:15:00", "2012-07-01 18:45:00", "2012-07-01 19:15:00", 
"2012-07-01 19:45:00", "2012-07-01 20:15:00", "2012-07-01 20:45:00", 
"2012-07-01 21:15:00", "2012-07-01 21:45:00", "2012-07-01 22:15:00", 
"2012-07-01 22:45:00", "2012-07-01 23:15:00", "2012-07-01 23:45:00", 
"2012-07-02 00:15:00", "2012-07-02 00:45:00", "2012-07-02 01:15:00", 
"2012-07-02 01:45:00", "2012-07-02 02:15:00", "2012-07-02 02:45:00", 
"2012-07-02 03:15:00", "2012-07-02 03:45:00", "2012-07-02 04:15:00", 
"2012-07-02 04:45:00", "2012-07-02 05:15:00", "2012-07-02 05:45:00", 
"2012-07-02 06:15:00", "2012-07-02 06:45:00", "2012-07-02 07:15:00", 
"2012-07-02 07:45:00", "2012-07-02 08:15:00", "2012-07-02 08:45:00", 
"2012-07-02 09:15:00", "2012-07-02 09:45:00", "2012-07-02 10:15:00", 
"2012-07-02 10:45:00", "2012-07-02 11:15:00", "2012-07-02 11:45:00", 
"2012-07-02 12:15:00", "2012-07-02 12:45:00", "2012-07-02 13:15:00", 
"2012-07-02 13:45:00", "2012-07-02 14:15:00", "2012-07-02 14:45:00", 
"2012-07-02 15:15:00", "2012-07-02 15:45:00", "2012-07-02 16:15:00", 
"2012-07-02 16:45:00", "2012-07-02 17:15:00", "2012-07-02 17:45:00", 
"2012-07-02 18:15:00", "2012-07-02 18:45:00", "2012-07-02 19:15:00", 
"2012-07-02 19:45:00", "2012-07-02 20:15:00", "2012-07-02 20:45:00", 
"2012-07-02 21:15:00", "2012-07-02 21:45:00", "2012-07-02 22:15:00", 
"2012-07-02 22:45:00", "2012-07-02 23:15:00", "2012-07-02 23:45:00", 
"2012-07-03 00:15:00", "2012-07-03 00:45:00", "2012-07-03 01:15:00", 
"2012-07-03 01:45:00", "2012-07-03 02:15:00", "2012-07-03 02:45:00", 
"2012-07-03 03:15:00", "2012-07-03 03:45:00", "2012-07-03 04:15:00", 
"2012-07-03 04:45:00", "2012-07-03 05:15:00", "2012-07-03 05:45:00", 
"2012-07-03 06:15:00", "2012-07-03 06:45:00", "2012-07-03 07:15:00", 
"2012-07-03 07:45:00", "2012-07-03 08:15:00", "2012-07-03 08:45:00", 
"2012-07-03 09:15:00", "2012-07-03 09:45:00", "2012-07-03 10:15:00", 
"2012-07-03 10:45:00", "2012-07-03 11:15:00", "2012-07-03 11:45:00", 
"2012-07-03 12:15:00", "2012-07-03 12:45:00", "2012-07-03 13:15:00", 
"2012-07-03 13:45:00", "2012-07-03 14:15:00", "2012-07-03 15:15:00", 
"2012-07-03 15:45:00", "2012-07-03 16:15:00", "2012-07-03 16:45:00", 
"2012-07-03 17:15:00", "2012-07-03 17:45:00", "2012-07-03 18:15:00", 
"2012-07-03 18:45:00", "2012-07-03 19:15:00", "2012-07-03 19:45:00", 
"2012-07-03 20:15:00", "2012-07-03 20:45:00", "2012-07-03 21:15:00", 
"2012-07-03 21:45:00", "2012-07-03 22:15:00", "2012-07-03 22:45:00", 
"2012-07-03 23:15:00", "2012-07-03 23:45:00", "2012-07-04 00:15:00", 
"2012-07-04 00:45:00", "2012-07-04 01:15:00", "2012-07-04 01:45:00", 
"2012-07-04 02:15:00", "2012-07-04 02:45:00", "2012-07-04 03:15:00", 
"2012-07-04 03:45:00", "2012-07-04 04:15:00", "2012-07-04 04:45:00", 
"2012-07-04 05:15:00", "2012-07-04 05:45:00", "2012-07-04 06:15:00", 
"2012-07-04 06:45:00", "2012-07-04 07:15:00", "2012-07-04 07:45:00", 
"2012-07-04 08:45:00", "2012-07-04 09:15:00", "2012-07-04 09:45:00", 
"2012-07-04 10:15:00", "2012-07-04 10:45:00", "2012-07-04 11:15:00", 
"2012-07-04 11:45:00", "2012-07-04 12:15:00", "2012-07-04 12:45:00", 
"2012-07-04 13:15:00", "2012-07-04 13:45:00", "2012-07-04 14:15:00", 
"2012-07-04 14:45:00", "2012-07-04 15:15:00", "2012-07-04 15:45:00", 
"2012-07-04 16:15:00", "2012-07-04 16:45:00", "2012-07-04 17:15:00", 
"2012-07-04 17:45:00", "2012-07-04 18:15:00", "2012-07-04 18:45:00", 
"2012-07-04 19:15:00", "2012-07-04 19:45:00", "2012-07-04 20:15:00", 
"2012-07-04 20:45:00", "2012-07-04 21:15:00", "2012-07-04 21:45:00", 
"2012-07-04 22:15:00", "2012-07-04 22:45:00", "2012-07-04 23:15:00", 
"2012-07-04 23:45:00", "2012-07-05 00:15:00", "2012-07-05 00:45:00", 
"2012-07-05 01:15:00", "2012-07-05 01:45:00", "2012-07-05 02:15:00", 
"2012-07-05 02:45:00", "2012-07-05 03:15:00", "2012-07-05 03:45:00", 
"2012-07-05 04:15:00", "2012-07-05 04:45:00", "2012-07-05 05:15:00", 
"2012-07-05 05:45:00", "2012-07-05 06:15:00", "2012-07-05 06:45:00", 
"2012-07-05 07:15:00", "2012-07-05 07:45:00", "2012-07-05 08:15:00", 
"2012-07-05 08:45:00", "2012-07-05 09:15:00", "2012-07-05 09:45:00", 
"2012-07-05 10:15:00", "2012-07-05 10:45:00", "2012-07-05 11:15:00", 
"2012-07-05 11:45:00", "2012-07-05 12:15:00", "2012-07-05 12:45:00", 
"2012-07-05 13:15:00", "2012-07-05 13:45:00", "2012-07-05 14:15:00", 
"2012-07-05 14:45:00", "2012-07-05 15:15:00", "2012-07-05 15:45:00", 
"2012-07-05 16:45:00", "2012-07-05 17:15:00", "2012-07-05 17:45:00", 
"2012-07-05 18:15:00", "2012-07-05 18:45:00", "2012-07-05 19:15:00", 
"2012-07-05 19:45:00", "2012-07-05 20:15:00", "2012-07-05 20:45:00", 
"2012-07-05 21:15:00", "2012-07-05 21:45:00", "2012-07-05 22:15:00", 
"2012-07-05 22:45:00", "2012-07-05 23:15:00", "2012-07-05 23:45:00", 
"2012-07-06 00:15:00", "2012-07-06 00:45:00", "2012-07-06 01:15:00", 
"2012-07-06 01:45:00", "2012-07-06 02:15:00", "2012-07-06 02:45:00", 
"2012-07-06 03:15:00", "2012-07-06 03:45:00", "2012-07-06 04:15:00", 
"2012-07-06 04:45:00", "2012-07-06 05:15:00", "2012-07-06 05:45:00", 
"2012-07-06 06:15:00", "2012-07-06 06:45:00", "2012-07-06 07:15:00", 
"2012-07-06 07:45:00", "2012-07-06 08:15:00", "2012-07-06 08:45:00", 
"2012-07-06 09:15:00", "2012-07-06 09:45:00", "2012-07-06 10:15:00", 
"2012-07-06 10:45:00", "2012-07-06 11:15:00", "2012-07-06 11:45:00", 
"2012-07-06 12:15:00", "2012-07-06 12:45:00", "2012-07-06 13:15:00", 
"2012-07-06 13:45:00", "2012-07-06 14:15:00", "2012-07-06 14:45:00", 
"2012-07-06 15:15:00", "2012-07-06 15:45:00", "2012-07-06 16:15:00", 
"2012-07-06 16:45:00", "2012-07-06 17:15:00", "2012-07-06 17:45:00", 
"2012-07-06 18:15:00", "2012-07-06 18:45:00", "2012-07-06 19:15:00", 
"2012-07-06 19:45:00", "2012-07-06 20:15:00", "2012-07-06 20:45:00", 
"2012-07-06 21:15:00", "2012-07-06 21:45:00", "2012-07-06 22:15:00", 
"2012-07-06 22:45:00", "2012-07-06 23:15:00", "2012-07-06 23:45:00", 
"2012-07-07 00:15:00", "2012-07-07 00:45:00", "2012-07-07 01:15:00", 
"2012-07-07 01:45:00", "2012-07-07 02:15:00", "2012-07-07 02:45:00", 
"2012-07-07 03:15:00", "2012-07-07 03:45:00", "2012-07-07 04:15:00", 
"2012-07-07 04:45:00", "2012-07-07 05:15:00", "2012-07-07 05:45:00", 
"2012-07-07 06:15:00", "2012-07-07 06:45:00", "2012-07-07 07:15:00", 
"2012-07-07 07:45:00", "2012-07-07 08:15:00", "2012-07-07 08:45:00", 
"2012-07-07 09:15:00", "2012-07-07 09:45:00", "2012-07-07 10:15:00", 
"2012-07-07 10:45:00", "2012-07-07 11:45:00", "2012-07-07 12:15:00", 
"2012-07-07 12:45:00", "2012-07-07 13:15:00", "2012-07-07 13:45:00", 
"2012-07-07 14:15:00", "2012-07-07 14:45:00", "2012-07-07 15:15:00", 
"2012-07-07 15:45:00", "2012-07-07 16:15:00", "2012-07-07 16:45:00", 
"2012-07-07 17:15:00", "2012-07-07 17:45:00", "2012-07-07 18:15:00", 
"2012-07-07 18:45:00", "2012-07-07 19:15:00", "2012-07-07 19:45:00", 
"2012-07-07 20:15:00", "2012-07-07 20:45:00", "2012-07-07 21:15:00", 
"2012-07-07 21:45:00", "2012-07-07 22:15:00", "2012-07-07 22:45:00", 
"2012-07-07 23:15:00", "2012-07-07 23:45:00", "2012-07-08 00:15:00", 
"2012-07-08 00:45:00", "2012-07-08 01:15:00", "2012-07-08 01:45:00", 
"2012-07-08 02:15:00", "2012-07-08 02:45:00", "2012-07-08 03:15:00", 
"2012-07-08 03:45:00", "2012-07-08 04:15:00", "2012-07-08 04:45:00", 
"2012-07-08 05:15:00", "2012-07-08 05:45:00", "2012-07-08 06:15:00", 
"2012-07-08 06:45:00", "2012-07-08 07:45:00", "2012-07-08 08:15:00", 
"2012-07-08 08:45:00", "2012-07-08 09:15:00", "2012-07-08 09:45:00", 
"2012-07-08 10:15:00", "2012-07-08 10:45:00", "2012-07-08 11:15:00", 
"2012-07-08 11:45:00", "2012-07-08 12:15:00", "2012-07-08 12:45:00", 
"2012-07-08 13:15:00", "2012-07-08 13:45:00", "2012-07-08 14:15:00", 
"2012-07-08 14:45:00", "2012-07-08 15:15:00", "2012-07-08 16:15:00", 
"2012-07-08 16:45:00", "2012-07-08 17:15:00", "2012-07-08 17:45:00", 
"2012-07-08 18:15:00", "2012-07-08 18:45:00", "2012-07-08 19:15:00", 
"2012-07-08 19:45:00", "2012-07-08 20:15:00", "2012-07-08 20:45:00", 
"2012-07-08 21:15:00", "2012-07-08 21:45:00", "2012-07-08 22:15:00", 
"2012-07-08 22:45:00", "2012-07-08 23:15:00", "2012-07-08 23:45:00", 
"2012-07-09 00:15:00", "2012-07-09 00:45:00", "2012-07-09 01:15:00", 
"2012-07-09 01:45:00", "2012-07-09 02:15:00", "2012-07-09 02:45:00", 
"2012-07-09 03:15:00", "2012-07-09 03:45:00", "2012-07-09 04:15:00", 
"2012-07-09 04:45:00", "2012-07-09 05:15:00", "2012-07-09 05:45:00", 
"2012-07-09 06:15:00", "2012-07-09 06:45:00", "2012-07-09 07:15:00", 
"2012-07-09 07:45:00", "2012-07-09 08:15:00", "2012-07-09 08:45:00", 
"2012-07-09 09:15:00", "2012-07-09 09:45:00", "2012-07-09 10:15:00", 
"2012-07-09 10:45:00", "2012-07-09 11:15:00", "2012-07-09 11:45:00", 
"2012-07-09 12:15:00", "2012-07-09 12:45:00", "2012-07-09 13:15:00", 
"2012-07-09 13:45:00", "2012-07-09 14:15:00", "2012-07-09 14:45:00", 
"2012-07-09 15:15:00", "2012-07-09 15:45:00", "2012-07-09 16:15:00", 
"2012-07-09 16:45:00", "2012-07-09 17:15:00", "2012-07-09 17:45:00", 
"2012-07-09 18:15:00", "2012-07-09 18:45:00", "2012-07-09 19:15:00", 
"2012-07-09 19:45:00", "2012-07-09 20:15:00", "2012-07-09 21:15:00", 
"2012-07-09 21:45:00", "2012-07-09 22:15:00", "2012-07-09 22:45:00", 
"2012-07-09 23:15:00", "2012-07-09 23:45:00", "2012-07-10 00:15:00", 
"2012-07-10 00:45:00", "2012-07-10 01:15:00", "2012-07-10 01:45:00", 
"2012-07-10 02:15:00", "2012-07-10 02:45:00", "2012-07-10 03:15:00", 
"2012-07-10 03:45:00", "2012-07-10 04:15:00", "2012-07-10 04:45:00", 
"2012-07-10 05:15:00", "2012-07-10 05:45:00", "2012-07-10 06:15:00", 
"2012-07-10 06:45:00", "2012-07-10 07:15:00", "2012-07-10 07:45:00", 
"2012-07-10 08:15:00", "2012-07-10 08:45:00", "2012-07-10 09:15:00", 
"2012-07-10 09:45:00", "2012-07-10 10:15:00", "2012-07-10 10:45:00", 
"2012-07-10 11:15:00", "2012-07-10 11:45:00", "2012-07-10 12:15:00", 
"2012-07-10 12:45:00", "2012-07-10 13:15:00", "2012-07-10 13:45:00", 
"2012-07-10 14:15:00", "2012-07-10 14:45:00", "2012-07-10 15:15:00", 
"2012-07-10 15:45:00", "2012-07-10 16:15:00", "2012-07-10 17:15:00", 
"2012-07-10 17:45:00", "2012-07-10 18:15:00", "2012-07-10 18:45:00", 
"2012-07-10 19:15:00", "2012-07-10 19:45:00", "2012-07-10 20:15:00", 
"2012-07-10 20:45:00", "2012-07-10 21:15:00", "2012-07-10 21:45:00", 
"2012-07-10 22:15:00", "2012-07-10 22:45:00", "2012-07-10 23:15:00", 
"2012-07-10 23:45:00"), class = "factor"), mon = c(1L, 1L, 1L, 
1L, 1L, 1L), X.1 = c(482986.747312444, 483106.142664631, 483101.821796104, 
483086.019405256, 483127.799620954, 483101.003261731), Y = c(6472837.55691427, 
6472855.34802117, 6472852.53770682, 6472786.61976395, 6472854.86710904, 
6472866.97636095), Z = c(6.49352941176471, 4.03558823529412, 
6.03769230769231, 3.9875, 2.94461538461538, 2.86)), .Names = c("X", 
"meanlat", "meanlong", "meandepth", "mindepth", "maxdepth", "depthrange", 
"rec", "numhits", "datetime", "mon", "X.1", "Y", "Z"), row.names = c(NA, 
6L), class = "data.frame")
> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T16:06:16.283

你看起来你托盘很多东西，但你没有以一种好的方式尝试一件事。

例如使用`POSIXlt`, dat 这里是你的 PAVdata 对象

```
ll <- as.POSIXlt(dat$datetime)
dat$hours <- ll$hour              ## I create a variable hour
dat$days <- ll$mday               ## I create a variable day
dat$months <- ll$mon              ## I create a variable month 
```

现在我可以使用这个变量按组平均。

这里是使用`plyr`包的解决方案。

```
 ddply(dat,.(months,days),summarise, m =  mean(meandepth))    ## I group by months and days
  months days        m
1      4   11 4.393154
> ddply(dat,.(months,days,hours),summarise, m =  mean(meandepth)) 
  months days hours        m
1      4   11    11 5.264558
2      4   11    12 5.012596
3      4   11    13 2.902308 
```

无论你使用什么，尝试以一种好的方式使用一件事。通常在 R 中有很多方法可以做这些事情。

# android - 使用滑动面板设计应用程序

> ID：14673851
> 
> 赞同：0
> 
> 时间：2013-02-03T15:04:59.120
> 
> 标签：android, panel, sliding

我正在为Android做一个应用程序，起初我的想法是这样做，但我不知道该怎么做：

![主意](../Images/927d741f25ab3e2a08ccb5d41902284c.png)

照片面板的数量可能会有所不同。我想知道的是我应该使用哪些组件来实现活动的每个部分。如果有人可以帮助我，那就太好了。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:30:03.960

你可以做的是申请：

*   `ScrollView`给你的第一个`Fragment`
*   `ViewPager`在图像之间使用`Fragments`

滚动视图：http: [//developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

ViewPager：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

片段：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

祝你的应用好运:-)

# asp.net - 如何从数据库返回用户头像（SQL 查询）

> ID：14673852
> 
> 赞同：-2
> 
> 时间：2013-02-03T15:05:01.917
> 
> 标签：asp.net, sql, sql-server-2008

我`User_Table`在 SQL Server 2008 中有一个表，有一个列`UserAvatar`( `varbinary`) 可以是`null`.

我需要一个返回用户头像的查询，如果它不为空，并且如果它`null`返回保存在特定行中的默认用户头像（有一个名为的`ID`列`PK`）

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:13:44.030

```
CREATE PROCEDURE sp_myDuplicateCheck
 @ID int,
@UserAvatar varbinary,
AS
BEGIN
SET @UserAvatar = Select UserAvatar from User_Table where ID=@ID
IF (@UserAvatar IS NULL)
Set @UserAvatar = Select UserAvatar from User_Table where ID=xxDefault
END
END 
```

您可以在 SP 中执行逻辑并从 Code 中调用 SP 并获取数据。

其他选项是您可以在您的代码上执行相同的逻辑使用[http://msdn.microsoft.com/en-us/library/tckcces5%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/tckcces5%28v=vs.80%29.aspx) IsDBNULL 从 ID=XX 的 User_Table 中选择 UserAvatar

```
if (dr["nameOfField"] == System.DBNull.Value) //Here Dr is your Data reader 
{
    nedID = 1;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T15:07:31.603

试试这个

```
select case when u.UserAvatar  is null then (select * from User_Table uu where uu.ID = PK)
       else u.UserAvatar
from User_Table u 
```

# macos - 打印文档的多个副本 Applescripting 打印机的应用程序

> ID：14673855
> 
> 赞同：2
> 
> 时间：2013-02-03T15:05:05.367
> 
> 标签：macos, printing, applescript

我正在尝试自动化一些硬打印。

我已经可以打印一份访问打印机应用程序的文档副本，如下所示：

```
tell application "hp LaserJet 2300 series (BDB806)" --my printer's app, could be any other model
    print myFile
end tell 
```

这个片段有效。

但是当我尝试打印多份副本时变得很棘手。根据打印机的应用程序字典，我应该可以通过以下方式实现：

```
tell application "hp LaserJet 2300 series (BDB806)"
    print myFile with properties {copies:n} -- n being an integer
end tell 
```

但这不起作用。

请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:07:34.027

这段代码对我来说也是如此：

```
set d to ((path to home folder) as string) & "Desktop:" & "untitled.txt"
set n to 3
tell application "EPSON WP-4595 Series"
    print d with properties {copies:n}
end tell 
```

只打印一份。

据我所知，代码没有问题，AppleScript 可能有问题。

不是很优雅，但你总是可以这样做

```
...
    repeat n times
        print d
    end repeat 
```

# c++ - 以“对话框”以外的其他方法打开窗口

> ID：14673856
> 
> 赞同：2
> 
> 时间：2013-02-03T15:05:12.633
> 
> 标签：c++, windows, winapi

`IDD_WINDOW_INFO`当用户单击我的 C++ Win32 应用程序中的按钮或菜单项时，我必须打开一个对话框。我用来打开对话框的方法如下：

```
DialogBox(hInstance, MAKEINTRESOURCE(IDD_WINDOW_INFO), hMainWindow, WindowInfoProc); 
```

但我的问题是，当该对话框打开时，用户无法使用我的应用程序的主窗口进行操作。那么我该怎么做才能让两个窗口都处于活动状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T15:35:01.457

您正在调用`DialogBox`以模态方式显示对话框。当显示模态对话框时，其他拥有的窗口被禁用，只有模态对话框可以接受输入。这就是模态对话框的本质和意图。这个想法是您只能与对话框交互，而不能与其他窗口交互。

另一个答案建议`NULL`作为`hWndParent`参数传递给`DialogBox`. 那不是解决方案。这将导致您拥有一个无主的窗口。是的，您将能够与主窗口进行交互，但是当您这样做时，您的主窗口将出现在对话框的顶部。那是因为所有权设置不正确。我建议您阅读有关[窗口所有权的信息以更好地理解该问题](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)。

您的问题的正确解决方案是显示无模式对话框。无模式对话框允许您与应用程序中的其他窗口进行交互。这正是您在问题中所要求的。

`CreateDialog`通过调用后跟.来显示无模式对话框`ShowWindow`。此 MSDN 文章显示了一个示例：[使用对话框](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644996.aspx#modeless_box)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T15:10:08.370

如果我没记错的话，您可以将 NULL 而不是句柄传递给父窗口，或者在资源编辑器中更改对话框类型。

这是一种简单的方法，但以下方法肯定更好 - 因为拥有无主对话框不是您的最佳选择。关键是 DialogBox() 将创建一个模态对话框窗口，而 CreateDialog 不会。模态对话框禁用父窗口。来自 MSDN：*无模式对话框既不会禁用所有者窗口，也不会向其发送消息。* 那应该可以解决您的问题。

```
CreateDialog(hInstance, MAKEINTRESOURCE(IDD_WINDOW_INFO), hMainWindow, WindowInfoProc);

ShowWindow(hWnd, SW_SHOW); 
```

# android - 在没有解锁声音的情况下关闭 Keyguard

> ID：14673857
> 
> 赞同：0
> 
> 时间：2013-02-03T15:05:20.463
> 
> 标签：android

我正在编写替换 LockScreen，并`LayoutParams.DISSMISS_KEYGUARD`在打开屏幕并启动我的 LockScreen 时将 Keyguard 用作 Window 标志，但它总是在再次按下电源按钮时播放锁定声音，我怎样才能抑制锁定声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:16:25.140

您可以使用 an`AudioManager`来关闭声音，`OnCreate`然后再将其重新打开。您还需要检查声音是否关闭才能启动，这样您就不会在声音已经关闭时打开声音

这是检查声音状态

```
am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
switch (am.getRingerMode()) {
case AudioManager.RINGER_MODE_SILENT:
case AudioManager.RINGER_MODE_VIBRATE:
    silentMode = true;
    break;
case AudioManager.RINGER_MODE_NORMAL:
    silentMode = false;
    break;
} 
```

关闭声音

```
am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
am.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
    OR
am.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

这可以打开声音

```
am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
am.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
```

当然，您可能会创建`am`一个私有变量，因此您不需要多次声明它。像这样。

```
public class MainActivity extends Activity {
    //more variables
    private AudioManager am;
    private boolean silentMode;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        //check sound state and set silentMode;
        //more stuff
    }
} 
```

我真的不知道什么时候重新打开声音，但可能在致电后可以尝试的地方`getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);`

# php - 怎么给每个人发邮件而不是全部一起发？

> ID：14673867
> 
> 赞同：0
> 
> 时间：2013-02-03T15:06:56.840
> 
> 标签：php, arrays, sendmail

txtTo=email1,eamil2,email3;

```
foreach (array($_POST["txtTo"]) as $v) {
    $strTo = $v; 
    $flgSend = @mail($strTo,$strSubject,$strHeader1,$strHeader); 

    if($flgSend)  
    {  
    echo "$v Mail send completed.\n<br/>";  
    }  
    else  
    {  
    echo "$v Cannot send mail.\n<br/>";  
    } 
} 
```

它向所有人发送电子邮件，所以我得到`email1,eamil2,email3 Mail send completed.`

除了

```
email1 Mail send completed.
eamil2 Mail send completed.
email3 Mail send completed. 
```

怎么了？怎么给每个人发邮件而不是全部一起发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:10:02.010

我的猜测是 $_POST["txtTo"] 已经是一个数组，尝试更改这一行：

```
foreach (array($_POST["txtTo"]) as $v) { 
```

对此：

> foreach ($_POST["txtTo"] as $v) {

如果 html 输入名称是 txtTo[]，这意味着它是以数组的形式出现的。

列维

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:10:08.750

您需要在循环之前拆分单独的电子邮件地址；

```
$recipients = explode(',', $_POST['txtTo']);

foreach ($recipients as $v) {
    $strTo = $v; 
    $flgSend = @mail($strTo,$strSubject,$strHeader1,$strHeader); 

    if($flgSend)  
    {  
    echo "$v Mail send completed.\n<br/>";  
    }  
    else  
    {  
    echo "$v Cannot send mail.\n<br/>";  
    } 
} 
```

# export - 如何从 Mac 的 Camtasia 导出 swf？

> ID：14673870
> 
> 赞同：0
> 
> 时间：2013-02-03T15:07:12.147
> 
> 标签：export, flash, file-type, camtasia

我在我的 Mac 上使用 Camtasia，我需要导出 swf。目前，我正在尝试导出 MP4，然后将其转换为 swf，但文件大小变得巨大。有没有更短更有效的方法在 Mac 上生成 swf？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-12-13T20:46:16.397

首先，您必须获得一个 .swf 转换器，然后您必须将 Camtasia 转换为 .swf 转换器可以转换的任何文件。

# c# - 模棱两可的递归（？）重载调用

> ID：14673875
> 
> 赞同：-2
> 
> 时间：2013-02-03T15:07:49.613
> 
> 标签：c#, function, call, overloading, ambiguous

我该如何解决这个问题？我怎样才能指出我想使用的确切重载？

```
 int A()
    {
        if (Environment.TickCount == 666)
            return 0;
        else
            return 1;
    }

    bool A()
    {
        if (A() == 0) //here's an error!
            return false;
        else
            return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:09:16.433

当您提供多个具有相同名称的方法时，该方法称为*重载*。您不能在 C# 中重载返回类型的方法：您需要为它们指定不同的名称或不同的参数类型。在您的情况下，更改 to 的名称`bool A`将`bool B`解决问题：

```
int A()
{
    if (Environment.TickCount == 666)
        return 0;
    else
        return 1;
}

bool B()
{
    if (A() == 0) //No error here
        return false;
    else
        return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:20:26.943

@dasblinkenlight 是对的。将函数命名为描述性名称也是一种好习惯。

示例：布尔 IsEnvironmentTickCount666()。函数名称中的 Is 使阅读您的代码的人很容易看到您正在返回一个布尔值

# c# - 多个随机数相同

> ID：14673876
> 
> 赞同：34
> 
> 时间：2013-02-03T15:07:50.337
> 
> 标签：c#, random

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)

一个初学者的问题。我有一个非常简单的程序来画一条线，我想随机化位置，但是每次我创建一个新的 Random 实例时，它都会返回相同的值。哪里有问题？谢谢你。

```
private void Draw()
{
    Random random1 = new Random();
    int randomNumber1 = random1.Next(0, 300);
    Random random2 = new Random();
    int randomNumber2 = random2.Next(0, 300);
    Random random3 = new Random();
    int randomNumber3 = random3.Next(0, 300);
    Random random4 = new Random();
    int randomNumber4 = random4.Next(0, 300);
    System.Drawing.Graphics g = this.CreateGraphics();
    Pen green = new Pen(Color.Green, 5);
    g.DrawLine(green, new Point(randomNumber1, randomNumber2), 
                      new Point(randomNumber3, randomNumber4));
}

private void btndraw1_Click(object sender, EventArgs e)
{
    Draw();
} 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-03T15:10:25.930

发生这种情况的原因是每次您执行新操作`Random`时都会使用时钟对其进行初始化。因此，在一个紧密的循环中（或一个接一个的多次调用），您会多次获得相同的值，因为所有这些随机变量都是用相同的种子初始化的。

解决这个问题：只创建一个随机变量，最好在你的函数之外并且只使用那个实例。

```
Random random1 = new Random();
private void Draw()
{
    int randomNumber1 = random1.Next(0, 300);
    int randomNumber2 = random1.Next(0, 300);
    int randomNumber3 = random1.Next(0, 300);
    int randomNumber4 = random1.Next(0, 300);
    System.Drawing.Graphics g = this.CreateGraphics();
    Pen green = new Pen(Color.Green, 5);
    g.DrawLine(green, new Point(randomNumber1, randomNumber2), new Point(randomNumber3, randomNumber4));
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-03T15:09:40.643

只需使用相同的实例：

```
Random random = new Random();
int randomNumber1 = random.Next(0, 300);
int randomNumber2 = random.Next(0, 300);
//... 
```

编程中的随机数并不是真正随机的；它们基于一些独特的*种子*，这些种子被采用和操纵以生成看似一组随机数的东西。使用相同的种子将产生相同的数字集。

该类的默认构造函数`Random`使用自系统启动以来经过的毫秒数作为种子，因此实际发生的情况是使用了相同的种子。

真的没有理由创建不止一次的`Random`实例；单个实例将在每次执行代码时生成一组随机数字。

为了证明我上面对默认种子的陈述，我使用了反射：

```
// System.Random
/// <summary>Initializes a new instance of the <see cref="T:System.Random" /> class, using a time-dependent default seed value.</summary>
public Random() : this(Environment.TickCount)
{
} 
```

和`Environment.TickCount`：

```
// System.Environment
/// <summary>Gets the number of milliseconds elapsed since the system started.</summary>
/// <returns>A 32-bit signed integer containing the amount of time in milliseconds that has passed since the last time the computer was started.</returns>
/// <filterpriority>1</filterpriority>
public static extern int TickCount
{
    [SecuritySafeCritical]
    [MethodImpl(MethodImplOptions.InternalCall)]
    get;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-03T15:16:26.303

您不应该`Random`为每个数字创建一个新对象。相反，使用相同的对象：

```
Random r = new Random();

private void Draw()
{
    // Create 4 random numbers
    int[] numbers = Enumerable.Range(0, 4).Select(x => r.Next(0, 300)).ToArray();

    System.Drawing.Graphics g = this.CreateGraphics();
    Pen green = new Pen(Color.Green, 5);
    g.DrawLine(green, new Point(numbers[0], numbers[1]),
                      new Point(numbers[2], numbers[3]));
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-03T16:02:13.627

随机数生成器 (RNG) 实际上并不生成随机数。相反，它使用一种算法来定义一系列看似随机的数字。此序列取决于在`seed`您创建 RNG 时通过所述算法运行的序列。

默认情况下，RNG 是使用系统时钟作为种子创建的，因为每次程序运行时时钟通常都会发生变化，因此很难预测“随机”序列。

在您的情况下，时钟很可能在创建一个随机对象和另一个对象之间没有改变；可能是由于 CPU 内部对指令的重新排序。

正如 Blachshma 所说，最好只创建一个随机对象并仅使用它。

```
public static Random MyRNG = new Random(); // create a single static random object, that you can use across all classes
private void Draw()
{
    randomNumber1 = MyRNG.Next(0, 300);
    randomNumber2 = MyRNG.Next(0, 300);
    // and so forth
} 
```

请记住，`System.Random`不保证任何实例都是线程安全的，这意味着如果您计划让多个线程共享同一个随机对象，则**必须**锁定它。

```
lock (MyRNG)
{
    randomNumber = MyRNG.Next(0, 300);
} 
```

不这样做可能会破坏您的随机对象，从而导致后续调用仅返回 0。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-03T15:10:56.170

您只需要一个 Random 类的实例。

```
private void Draw()
    {
        Random random1 = new Random();
        int randomNumber1 = random1.Next(0, 300);

        int randomNumber2 = random1.Next(0, 300);

        int randomNumber3 = random1.Next(0, 300);

        int randomNumber4 = random1.Next(0, 300);

        System.Drawing.Graphics g = this.CreateGraphics();
        Pen green = new Pen(Color.Green, 5);
        g.DrawLine(green, new Point(randomNumber1, randomNumber2), new Point(randomNumber3, randomNumber4));
    }

    private void btndraw1_Click(object sender, EventArgs e)
    {
        Draw();
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-03T15:11:36.910

```
 private static readonly Random Random1 = new Random();

    private void Draw()
    {

        int randomNumber1 = Random1.Next(0, 300);
        int randomNumber2 = Random1.Next(0, 300);
        int randomNumber3 = Random1.Next(0, 300);
        int randomNumber4 = Random1.Next(0, 300);
        System.Drawing.Graphics g = this.CreateGraphics();
        Pen green = new Pen(Color.Green, 5);
        g.DrawLine(green, new Point(randomNumber1, randomNumber2), new Point(randomNumber3, randomNumber4));
    }

    private void btndraw1_Click(object sender, EventArgs e)
    {
        Draw();
    } 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-02-03T15:19:22.740

.Net 需要的随机类是种子值，您可以使用日期值作为种子，它会起作用。

```
private void Draw()
    {
        Random random1 = new Random(unchecked((int)DateTime.Now.Ticks << (int)100));
        int randomNumber1 = random1.Next(0, 300);
        Random random2 = new Random(unchecked((int)DateTime.Now.Ticks << (int)200));
        int randomNumber2 = random2.Next(0, 300);
        Random random3 = new Random(unchecked((int)DateTime.Now.Ticks << (int)300));
        int randomNumber3 = random3.Next(0, 300);
        Random random4 = new Random(unchecked((int)DateTime.Now.Ticks << (int)400));
        int randomNumber4 = random4.Next(0, 300);
        System.Drawing.Graphics g = this.CreateGraphics();
        Pen green = new Pen(Color.Green, 5);
        g.DrawLine(green, new Point(randomNumber1, randomNumber2), new Point(randomNumber3, randomNumber4));
    }

private void btndraw1_Click(object sender, EventArgs e)
{
    Draw();
} 
```

# php - 如何在 CodeIgniter 中获取图像补丁

> ID：14673878
> 
> 赞同：0
> 
> 时间：2013-02-03T15:08:17.977
> 
> 标签：php, html, codeigniter

我放了背景图片，但不知道相对地址。我在 'application/assets/' 中创建了一个文件夹 'image' 并将相同的图像放在这里，但在 css 文件中无法识别地址。

```
body {
    background-image:url('assets/image/images2.jpg');
} 
```

当我想附加css文件时同样的问题：

```
<link rel="stylesheet" type="text/css" href="public/css/ipics.css"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T23:50:29.403

@globula_alba

您最好的选择是将您的资产目录移动到与应用程序和系统相同的级别，然后使用 base_url() 引用您的所有图像，这是一个与您的 config.php base_url 路径匹配的 Codeigniter 函数。

所以你将拥有：

```
base_url(). 'assets/images/myimage.gif'; 
```

或者：

```
base_url('assets/images/myimage.gif'); 
```

（它们的工作方式相同）

你可以对你的 css & javascript 文件做同样的事情

# c# - 我在命令执行期间遇到致命错误

> ID：14673881
> 
> 赞同：0
> 
> 时间：2013-02-03T15:08:30.940
> 
> 标签：c#, mysql

**C# 代码：** //在这里我试图在我的表中插入值。

```
 case true:
     Connection.Connect();
     int fk_pic = IdPic();
     string insertWork = "INSERT INTO work (fk_id_pic, fk_login, university, lesson, name, info, date_work, price) VALUES (@fk_pic, @fk_login, @university, @lesson, @name, @info, @date_work, @price); Allow User Variables = true;";
     MySqlCommand work = new MySqlCommand(insertWork, Connection.Connect());
     work.Parameters.AddWithValue("@fk_pic", fk_pic);
     work.Parameters.AddWithValue("@fk_login", Program.form1.login);
     work.Parameters.AddWithValue("@university", textBox1.Text);
     work.Parameters.AddWithValue("@lesson", textBox2.Text);
     work.Parameters.AddWithValue("@name", textBox3.Text);
     work.Parameters.AddWithValue("@info", richTextBox1.Text);
     work.Parameters.AddWithValue("@date_work", DateTime.Now);
     work.Parameters.AddWithValue("@ price", textBox4.Text);
     work.ExecuteNonQuery();
     Connection.Disconnect();
     break; 
```

**SQL查询：**

```
CREATE TABLE pic 
( 
  id_pic INTEGER UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'id of image', 
  caption CHAR(45) NOT NULL COMMENT 'the name of image',
  who_add CHAR(30) NOT NULL COMMENT 'who add this image',
  img LONGBLOB NOT NULL, 
  CONSTRAINT pkId_pic PRIMARY KEY(id_pic) 
) 
COMMENT 'Table for hosting images'; 
```

不知道该怎么办。等待答复）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:26:50.620

更改名为“name”的列或变量的名称。

name/Name 通常是保留字。

这可能是问题所在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T15:42:26.390

请记住，mysql .net 连接器中的参数标识符是`?`而不是`@`

**随机评论**

查看 SQL 代码，我注意到您使用`char`的字段听起来更像`varchar`字段。当您将列定义为 char 时，它将为您放入表中的所有条目保留定义的空间量。

例子：

```
create table test (
    myvalue char(255)
) 
```

无论您是否只在`myvalue`列中写入“a”或“hello world”，它都会在磁盘上保留 255 个字符的字符串空间。记住它。

# c - 使用 MPI_Gather 接收数据结构的正确方法

> ID：14673886
> 
> 赞同：3
> 
> 时间：2013-02-03T15:09:32.703
> 
> 标签：c, mpi

我尝试使用 MPI_Gather 发送以下数据结构：

```
struct set {
    int nbits;
    char  bits[];
}; 
```

问题是我无法收集上述结构的所有项目，只有第一项。剩下的项目根本没有意义。

这是一个测试用例：

```
#include <stdio.h>
#include <stdlib.h>

#include "mpi.h"

#define SIZE 10

struct set {
    int nbits;
    char bits[];
};

int main(int argc, char *argv[]) {
    int np, rank, i;
    struct set *subsets, *single;
    void *buf;

    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &np);

    single = malloc(sizeof(struct set) + SIZE);

    if(rank == 0) {
            subsets = malloc((sizeof(struct set) + SIZE) * np);
    }

    buf = &subsets[0];

    MPI_Datatype set_type, oldtypes[2];
    int blockcounts[2];
    MPI_Aint offsets[2];
    MPI_Aint addr[3];

    MPI_Get_address(single, &addr[0]);
    MPI_Get_address(&single->nbits, &addr[1]);
    MPI_Get_address(&single->bits, &addr[2]);

    offsets[0] = addr[1] - addr[0];
    oldtypes[0] = MPI_INT;
    blockcounts[0] = 1;

    offsets[1] = addr[2] - addr[0];
    oldtypes[1] = MPI_CHAR;
    blockcounts[1] = SIZE;

    MPI_Type_create_struct(2, blockcounts, offsets, oldtypes, &set_type);
    MPI_Type_commit(&set_type);

    single->nbits = 2;

    for(i=0; i<single->nbits; i++)
            single->bits[i] = 'A' + rank;

    MPI_Gather(single, 1, set_type, buf, 1, set_type, 0, MPI_COMM_WORLD);

    if(rank == 0) {
            void *ptr;
            struct set *fs;
            int size;

            MPI_Type_size(set_type, &size);

            ptr = buf;

            for(i=0; i<np; i++) {
                    size_t j;

                    fs = ptr;
                    printf("from rank %d: bits => %p nbits => %d\n", i, fs->bits, fs->nbits);

                    for(j=0; j<2; j++)
                            printf("from rank %d: buf[%d] = %#x\n",
                                    i, j, fs->bits[j]);
                    ptr += size;
            }
    }

    MPI_Type_free(&set_type);

    MPI_Finalize();
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:33:03.960

问题并不在于`MPI`结构和 MPI 类型的指针算术。

你有

```
 void *ptr;
        struct set *fs;
        int size;

        MPI_Type_size(set_type, &size);

        ptr = buf;

        for(i=0; i<np; i++) {
                size_t j;

                fs = ptr;
                printf("from rank %d: bits => %p nbits => %d\n", i, fs->bits, fs->nbits);

                for(j=0; j<2; j++)
                        printf("from rank %d: buf[%d] = %#x\n",
                                i, j, fs->bits[j]);
                ptr += size;
        }
} 
```

但[`MPI_Type_size`](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Type_size.html)实际上给出了类型中的数据量；如果有填充（可能会在这里使字符数组位于单词边界上），这与`sizeof`. 如果你想在这里使用 MPI 函数，如果你将一个函数调用切换到[`MPI_Type_extent`](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Type_extent.html)，它实际上会告诉你类型跨越的整个范围，你的代码会为我运行......但仍然存在问题。

如果您看一下 和 之间的区别`sizeof(struct set)+SIZE`，`MPI_Type_extent()`您会发现它们不一样；这个：

```
#define SIZE 10
struct set {
  int nbits
  char nbits[]
}

...

malloc(sizeof(struct set)+SIZE); 
```

不一样

```
struct set {
  int nbits
  char nbits[SIZE]
}

malloc(sizeof(struct set)); 
```

因为 padding 等原因。这意味着 的大小`subsets`不对，调用`MPI_Gather`.

您可以通过几种不同的方式来解决这个问题，但最简单的（就行数而言也是最短的）是使用已经调整大小的数组定义结构，然后使用数组索引而不是指针算法：

```
#include <stdio.h>
#include <stdlib.h>

#include "mpi.h"

#define SIZE 10

struct set {
    int nbits;
    char bits[SIZE];
};

int main(int argc, char *argv[]) {
    int np, rank, i;
    struct set *subsets, *single;

    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &np);

    single = malloc(sizeof(struct set));

    if(rank == 0) {
            subsets = malloc(sizeof(struct set) * np);
    }

    MPI_Datatype set_type, oldtypes[2];
    int blockcounts[2];
    MPI_Aint offsets[2];
    MPI_Aint addr[3];

    MPI_Get_address(single, &addr[0]);
    MPI_Get_address(&single->nbits, &addr[1]);
    MPI_Get_address(&single->bits, &addr[2]);

    offsets[0] = addr[1] - addr[0];
    oldtypes[0] = MPI_INT;
    blockcounts[0] = 1;

    offsets[1] = addr[2] - addr[0];
    oldtypes[1] = MPI_CHAR;
    blockcounts[1] = SIZE;

    MPI_Type_create_struct(2, blockcounts, offsets, oldtypes, &set_type);
    MPI_Type_commit(&set_type);

    single->nbits = 2;

    for(i=0; i<single->nbits; i++)
            single->bits[i] = 'A' + rank;

    MPI_Gather(single, 1, set_type, &(subsets[0]), 1, set_type, 0, MPI_COMM_WORLD);

    if(rank == 0) {
            for(i=0; i<np; i++) {
                    struct set *fs = &(subsets[i]);
                    printf("from rank %d: bits => %p nbits => %d\n", i, fs->bits, fs->nbits);

                    for(int j=0; j<2; j++)
                            printf("from rank %d: buf[%d] = %#x\n",
                                    i, j, fs->bits[j]);
            }
    }

    MPI_Type_free(&set_type);

    MPI_Finalize();
} 
```

**更新添加**如果你不能这样做，只需更改缓冲区分配的大小以将数据收集到：

```
#include <stdio.h>
#include <stdlib.h>
#include "mpi.h"

#define SIZE 10

struct set {
    int nbits;
    char bits[];
};

int main(int argc, char *argv[]) {
    int np, rank, i;
    struct set *single;
    void *buf;
    ptrdiff_t extent;

    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &np);

    single = malloc(sizeof(struct set) + SIZE);

    MPI_Datatype set_type, oldtypes[2];
    int blockcounts[2];
    MPI_Aint offsets[2];
    MPI_Aint addr[3];

    MPI_Get_address(single, &addr[0]);
    MPI_Get_address(&single->nbits, &addr[1]);
    MPI_Get_address(&single->bits, &addr[2]);

    offsets[0] = addr[1] - addr[0];
    oldtypes[0] = MPI_INT;
    blockcounts[0] = 1;

    offsets[1] = addr[2] - addr[0];
    oldtypes[1] = MPI_CHAR;
    blockcounts[1] = SIZE;

    MPI_Type_create_struct(2, blockcounts, offsets, oldtypes, &set_type);
    MPI_Type_commit(&set_type);

    MPI_Type_extent(set_type, &extent);
    buf = malloc((int)extent * np);

    single->nbits = 2;

    for(i=0; i<single->nbits; i++)
            single->bits[i] = 'A' + rank;

    MPI_Gather(single, 1, set_type, buf, 1, set_type, 0, MPI_COMM_WORLD);

    if(rank == 0) {
            struct set *fs = buf;
            for(i=0; i<np; i++) {
                    printf("from rank %d: bits => %p nbits => %d\n", i, fs->bits, fs->nbits);

                    for(int j=0; j<2; j++)
                            printf("from rank %d: buf[%d] = %#x\n",
                                    i, j, fs->bits[j]);

                    fs = (struct set *)((char *)fs + extent);
            }
    }

    MPI_Type_free(&set_type);

    MPI_Finalize();
} 
```

# c# - 是否有用于匹配（句法解析）树中的模式的 C# 实用程序？

> ID：14673902
> 
> 赞同：11
> 
> 时间：2013-02-03T15:11:05.593
> 
> 标签：c#, tree, nlp, stanford-nlp, s-expression

我正在从事一个自然语言处理 (NLP) 项目，在该项目中，我使用句法解析器从给定的句子中创建句法解析树。

***示例输入：***我遇到了 Joe 和 Jill，然后我们去购物
***示例输出：*** [TOP [S [S [NP [PRP I]] [VP [VBD ran] [PP [IN into] [NP [NNP Joe] [CC和] [NNP Jill]]]]] [CC and] [S [ADVP [RB then]] [NP [PRP we]] [VP [VBD going] [NP [NN shopping]]]]]] ![在此处输入图像描述](../Images/8ea4fcc5d6ad33023a6862baf6331c01.png)

我正在寻找一个 C# 实用程序，它可以让我执行复杂的查询，例如：

*   获取与“乔”相关的第一个 VBD
*   获取最接近“购物”的 NP

这是一个执行此操作的[Java 实用程序](http://nlp.stanford.edu/software/tregex.shtml)，我正在寻找 C# 等价物。
任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T00:38:22.980

至少有两个 NLP 框架，即

*   [SharpNLP](http://sharpnlp.codeplex.com/)（注：项目自 2006 年起不活跃）
*   [Proxem](https://www.proxem.com/en/technology/antelope-framework/)

在这里您可以找到在 .NET 中使用 java NLP 的说明：

*   [在 .NET 项目中使用 OpenNLP](https://cwiki.apache.org/OPENNLP/a-quick-guide-to-using-opennlp-from-net.html)

此页面是关于使用 java OpenNLP，但可以适用于您在帖子中提到的 java 库

或者按照以下指南使用 NLTK：

*   [使用 NLTK 在 C# 3.5 中开源 NLP](http://blog.samibadawi.com/2010/03/open-source-nlp-in-c-35-using-nltk.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:22:52.267

我们已经使用

一种选择是将[输出解析为 C# 代码](https://stackoverflow.com/questions/14675335/s-expressions-parsing)，然后将其编码为 XML，使每个节点进入`string.Format("<{0}>", this.Name);`并`string.Format("</{0}>", this._name);`在中间递归地放置所有子节点。

完成此操作后，我将使用[查询 XML/HTML 的工具](https://github.com/jamietre/CsQuery)来解析树。成千上万的人已经使用查询选择器和 jQuery 来根据节点之间的关系解析树状结构。我认为这远远优于 TRegex 或其他过时且未维护的 Java 实用程序。

例如，这是回答您的第一个示例：

```
var xml = CQ.Create(d.ToXml());
//this can be simpler with CSS selectors but I chose Linq since you'll probably find it easier
//Find joe, in our case the node that has the text 'Joe'
var joe = xml["*"].First(x => x.InnerHTML.Equals("Joe")); 
//Find the last (deepest) element that answers the critiria that it has "Joe" in it, and has a VBD in it
//in our case the VP
var closestToVbd = xml["*"].Last(x => x.Cq().Has(joe).Has("VBD").Any());
Console.WriteLine("Closest node to VPD:\n " +closestToVbd.OuterHTML);
//If we want the VBD itself we can just find the VBD in that element
Console.WriteLine("\n\n VBD itself is " + closestToVbd.Cq().Find("VBD")[0].OuterHTML); 
```

这是你的第二个例子

```
//Now for NP closest to 'Shopping', find the element with the text 'shopping' and find it's closest NP
var closest = xml["*"].First(x =>     x.InnerHTML.Equals("shopping")).Cq()
                      .Closest("NP")[0].OuterHTML;
Console.WriteLine("\n\n NP closest to shopping is: " + closest); 
```

# jquery - 在当前模式内容中调用更改 SimpleModal 内容

> ID：14673905
> 
> 赞同：2
> 
> 时间：2013-02-03T15:11:08.483
> 
> 标签：jquery, simplemodal

```
<script type="text/javascript">
jQuery(function ($) {
    $('#login-modal').click(function (e) {
        $('#login-content').modal();
        return false;
    });

    $('#doRegister').click(function (e) {
        $('#register-modal').modal();
        return false;
    });
});
<script>

<a id="login-modal">Login</a>  

<div id="login-content" style="display:none;">
    Not registered? <a id="doRegister" href="#">Register now</a>!
</div>

<div id="register-content" style="display:none;">
    Hi, I'm register.
</div> 
```

当我单击登录按钮时，它会毫无问题地打开模式。

问题是，当我单击模式（登录模式）内的注册链接时，必须关闭登录模式并打开注册模式。

SimpleModal 文档在这里，但我自己做不到。 [http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

你可以帮帮我吗？

附言。如果模态不会自行关闭并重新打开，那将是完美的。我相信替换当前打开的模式中的内容将是用户友好外观的最佳解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:29:14.577

固定：

```
jQuery(function ($) {
$('#login-modal').click(function (e) {
    $('#login-content').modal({ opacity:80 });
    return false;
});

$('#doRegister').click(function (e) {
    $.modal.close();
    $('#register-content').modal({ opacity:80, minHeight:700});
    return false;
});
}); 
```

# php - 如何循环通过 $_POST 将每个帖子字段作为参数传递给函数？编辑

> ID：14673910
> 
> 赞同：0
> 
> 时间：2013-02-03T15:12:16.117
> 
> 标签：php, post, foreach

我只是在算法上表示我想要使用 foreach 循环和 php 中的 $_POST 数组实现的目标。

```
 function check_fields($_POST)
{
 // provide $_post['field1'],$_post['field2']..so on

  foreach($_POST as $_POST['FIELD 1-N'] 
{

 isvalid($_POST['FIELD1 - N']);
}
} 
```

希望你明白我想问什么...

编辑： $_POST['FIELD1']、$_POST['FIELD1'] 等是传递给 isvalid() 函数的变量名。isvalid() 函数的作用是使用 isset() 和 empty 来检查变量是否包含值...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:15:39.680

使用`foreach`，您不必知道数组中键的名称。

```
foreach($_POST as $key => $field) {
    isvalid($field);
} 
```

`$key`包含“field1”、“field2”等名称，同时`$field`包含`$_POST`数组内的值。然后 foreach 循环将对`invalid()`每个字段值运行该函数。

要检查是否设置了字段值：

```
// Sample $_POST array
$_POST = array(
    "field1" => "", // this is not set
    "field2" => "data"
);
foreach($_POST as $key => $field) {
    // You can check if it is empty using foreach alone
    if (strlen($field) > 0) {
        // this field is set
    } else {
        // this field is not set
    }
} 
```

你也可以使用`empty()`，但它被视为`"0"`空的，所以要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:22:31.710

一个获取数组键和值的示例循环：

```
foreach( $_POST as $key => $value )
{

    isvalid( $key, $value );

} 
```

`isvalid()`...因此，如果您需要获取 , 等，则需要更改函数以接受`field1`两个`field2`参数。

**已编辑**

```
$errors = array();    

foreach( $_POST as $key => $value )
    if ( empty( $value ) ) $errors[] = $key;

if ( !empty( $errors ) )
    echo 'You have errors on: <pre>' . print_r( $errors, true ) . '</pre>'; 
```

...如果`$errors`不为空，您可以取消提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T15:15:28.630

尝试这个

```
foreach($_POST as $fieldName => $fieldValue) 
{
 isvalid($fieldValue);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T15:33:36.493

假设您想创建一个名为`isvalid`;的验证函数

```
function isvalid($input) {
    return ('' !== trim($input));
}

// loop
$errors = arrray();
foreach ($_POST as $key => $value) {
    if (!isvalid($value)) {
        $errors[] = "$key not be empty!";
    }
}
print_r($errors); 
```

同时，如果`$_POST`input 未设置，则不会在 foreach 中。

# html - 移除明显不需要的垂直滚动条

> ID：14673912
> 
> 赞同：4
> 
> 时间：2013-02-03T15:12:19.767
> 
> 标签：html, scrollbar

我不知道如何从这个网站上删除滚动条。显然没有必要。我在 21" 显示器上加载了页面，但仍然可以看到它..

[http://akrush95.freeoda.com/clash/](http://akrush95.freeoda.com/clash/)

这是我的 index.php 中的 html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
body,html{
  height:100%;
  margin: 0px;
  padding: 0px;
}
#title {
    padding-top: 20px;
    font-size: 36px;
}
#title #RHS {
    font-size: 40px;
    font-weight: bold;
}
.scoreboard {
    text-align: center;
}
.scores {
    font-size: 36px;
}
.score-title {
    font-size: 18px;
    text-decoration: underline;
}
#content {
    text-align: center;
    min-width: 250px;
}
#eventcontainer {
    padding: 10px;
    float: right;
    background-color: #999;
    width: 200px;
    min-height: 100%;
}
#eventboard #eventcontainer h1 {
    text-align: center;
    text-decoration: underline;
}
.sb {
    display: inline-block;
    width: 135px;
    border: thin double #000;
    margin: 10px;
}
.sb #title {
    font-size: 22px;
    text-decoration: underline;
    font-weight: bold;
    padding-top: 5px;
}
.sb #score {
    font-size: 40px;
    font-family: "Lucida Console", Monaco, monospace;
    padding: 5px;
}
#add {
    cursor: pointer;
    font-size: 18px;
}
#sub {
    cursor: pointer;
    font-size: 18px;
}
</style>
</head>

<body>
<div id="eventcontainer">
  <h1>Event Board</h1>
  <p>25 January 2013<br />
    -Event 1<br />
    -Event 2
</p>
  <p>26 January 2013<br />
    -Event 3<br />
  -Event 9</p>
  <p>31 January 2013<br />
    -Event
  </p>
</div>
<div id="content">
    <div id="title">
        <div id="RHS">Roslyn High School</div>
        <div id="CotC">Clash of the Classes</div>
        <div id="year">2013</div>
    </div>
    <br/>
    <div id="scores">Loading...</div>
</div>
</body>
</html> 
```

有什么东西让它超过100%吗？我尝试将高度设置为 100%，但这似乎不起作用..

如果我不让身体高度达到 100%，我的右柱就不会一直向下延伸。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T15:22:59.820

您的高度为 100%，顶部为 10 像素，底部为 10 像素。填充添加到高度，不包括在其中。所以#eventcontainer的总高度是100%+10px+10px，即比它的容器高20px。

你有三个选择：

1.  从元素 上`padding`取下垂直线。`#eventcontainer`
2.  添加`overflow: hidden`到`body`元素。但是，不建议这样做，因为在较小的屏幕上，用户将无法滚动查看所有内容。
3.  正如下面带有链接的评论中所述，您可以更改您正在使用的盒子尺寸模型。

# ruby-on-rails - 过滤中的查询字符串或绑定参数

> ID：14673914
> 
> 赞同：0
> 
> 时间：2013-02-03T15:12:24.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, seo, query-string

我可以通过两种方式过滤我网站中的产品：

`www.expamle.com/products?category=cars&brand=hot_wheels`
或者 ：
`www.expamle.com/products/car/hot_wheels`

什么是最佳做法，为什么？

如果我应用了第二种解决方案，我怎么知道传递的参数的类型是`category`or `brand`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:27:37.830

如果它保持原样，第二个选择，到目前为止。不仅是为了优雅，也是为了 SEO。

话虽如此，当你开始有第三和第四个论点时，你显然需要搜索。您是选择使用全文搜索还是更像带有复选框的高级搜索取决于您的项目。我倾向于支持全文搜索，但如果你想坚持你的设计，并且不会添加更多参数，它可能看起来像这样：

您将根据您设置的路线获取参数。

```
# config/routes.rb
get 'products/:category/:brand', to: 'products#index'

# app/controllers/products_controller.rb
def index
  @products = Products.where(category: params[:category]).where(brand: params[:brand])
end 
```

## 更新

如果类别和品牌都是可选的并且不依赖，您可以将类别和品牌加入到标签模型中。灵活得多。'产品（​​/：标签（/：标签（/：标签）））'。

# ruby-on-rails - 用于 Ruby on Rails 的 IDE

> ID：14673915
> 
> 赞同：-1
> 
> 时间：2013-02-03T15:12:36.660
> 
> 标签：ruby-on-rails, ide

什么是用于 ruby​​ on rails 开发的新的最佳 IDE？我使用过 Komodo Edit，现在使用 Netbeans 6.9.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:21:11.373

“最好”是主观的。

我发现 IntelliJ 是 IDE 方面的总体赢家。

我使用 Sublime Text 2 进行非 IDE Rails 开发。同事倾向于 Vim。

[只是因为他们不想学习 Emacs，这种明显优越的文本编辑器。Aaaand 开始。]

# python - 在 Python 中创建一个递增的列表

> ID：14673919
> 
> 赞同：0
> 
> 时间：2013-02-03T15:13:10.667
> 
> 标签：python, list, for-loop, python-2.7

我正在尝试从其他列表中创建一些列表，并在此过程中设置一些条件。我想最终将这些列表写入 csv。这是我尝试的代码。

```
x = [None]*1000
y = [None]*1000
z = [None]*1000
i = 0 
for d in range(0,len(productID)):
    for j in range(0,len(productID[d])):
        if productID[d][j].startswith(u'sku'):

            x[i] = map[productID[d][j]]
            y[i] = name[d]
            z[i] = priceID[d][productID[d][j]].get(u'e')

            i = i + 1  

plan_name = x[0:i]
dev_name  = y[0:i]
dev_price = z[0:i] 
```

这工作正常，但我认为应该有更好的方法来做到这一点。谁能建议我如何在循环时创建一个列表而不必先定义它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:15:55.343

您可以`.append()`改为将项目添加到最初为空的列表中。

```
x, y, z = [], [], []
for d, sublist in enumerate(productID):
    for entry in sublist:
        if entry.startswith(u'sku'):
            x.append(map[entry])
            y.append(name[d])
            z.append(priceID[d][entry].get(u'e')) 
```

请注意，python 可以直接循环遍历序列，并且您通常根本不需要索引。我已经使用该`enumerate()`函数将索引添加到外部循环（因为您似乎需要索引到`name`那里`priceID`）。

`.append()`将项目添加到列表的末尾：

```
>>> foo = []
>>> foo.append('bar')
>>> foo.append('spam')
>>> foo
['bar', 'spam'] 
```

您可能需要阅读[Python 教程](http://docs.python.org/2/tutorial/)；它解释了 python 列表如何很好地工作。

# com - 获取 FileVersionInfo 互操作包装的 COM dll - 需要完整路径

> ID：14673920
> 
> 赞同：2
> 
> 时间：2013-02-03T15:13:34.877
> 
> 标签：com, interop

我需要呈现一个关于我的 .NET 应用程序通过互操作调用的 COM dll 的“关于”样式对话框。我已经看到了在当前加载的程序集上使用 GetFileVersionInfo 的解决方案，以及 pInvoke 样式的 GetModuleHandle 然后查询调用。但由于我使用的是互操作，在我加载的模块列表中我没有直接看到它，只是我的互操作 dll。

如果我使用 FileVersionInfo(filename) 并拥有 dll 的完整路径，我会得到我需要的东西 - 但是由于用户可以控制他们安装这个 COM dll 的位置，我只能考虑查询注册表来获得这个完整的小路。谁能看到更好的解决方案？该产品的早期版本是本机应用程序，因此直接加载了 dll。

有什么想法或查询注册表是最佳选择吗？

# objective-c - iOS 加载数据后如何加载表格？

> ID：14673922
> 
> 赞同：0
> 
> 时间：2013-02-03T15:13:54.607
> 
> 标签：objective-c, uitableview

在我的 iOS 项目中，我想用 json 文件中的数据生成一个表，问题是该表是在加载数据之前创建的！

数据加载后如何生成表格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T15:15:23.420

数据加载完成后，调用`[tableView reloadData]` **主线程。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:17:45.127

1.  在您的 viewDidLoad 方法中，您在后台以异步过程的形式获取数据。
2.  当数据到达时，将其解析并填充您的“模型”。
3.  填充模型后，使用通知管理器向对新数据感兴趣的任何人发送通知。
4.  在您的表格视图中捕捉通知并调用 [self.tableView reloadData];

这就是它的要点。祝你好运！

# c++ - 如何使用 CMake 在 MinGW 上激活 c++11 支持？

> ID：14673928
> 
> 赞同：0
> 
> 时间：2013-02-03T15:15:03.873
> 
> 标签：c++, c++11, cmake, mingw

我已经安装了最新版本的 MinGW/MSYS 环境。现在我尝试激活 c++11 标准支持。我已添加到我的 cmake 脚本中：

```
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -std=gnu++0x") 
```

如果我尝试构建一个简单的测试。我得到以下编译失败：

```
error: 'shared_ptr' is not a member of 'std' 
```

在我看来，没有设置 c++11 支持。如果我从我的代码中删除 std::shared_ptr 声明并尝试编译 chrono 库的一些代码，它就可以工作。这让我很困惑。为什么支持某些 c++11 库但 shared_ptr 等核心元素失败？

我需要做一些额外的事情来启用智能指针还是它们不存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:57:58.587

您可以/应该（也）使用`-std=c++0x`以便不启用 g++ 扩展。

确保`#include <memory>`.

# node.js - 将 NodeJs 与 Firebase 一起使用 - 安全性

> ID：14673929
> 
> 赞同：41
> 
> 时间：2013-02-03T15:15:13.373
> 
> 标签：node.js, firebase

由于需要做一些服务器端代码——主要是发送电子邮件，我决定使用 Nodejs 和 Express 作为服务器端元素以及 Firebase 来保存数据——部分来自学习经验。

我的问题是，在使用 Simple Email & Password API 进行身份验证时，使用客户端 Firebase 库和 Nodejs 库的最佳方法是什么。如果我在客户端进行身份验证，然后在 NodeJS 端调用不同的路由，则该用户的身份验证将在请求中进行。在 Node.js 中验证用户的测试方法是什么？

我假设的一种方法是从 firebase 获取当前用户的用户名和密码，然后将它们发布到 NodeJS，然后使用服务器上的 firebase 安全 API 进行测试。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-03T18:58:23.360

本质上，这里的问题是您需要安全地向您的 NodeJS 服务器传达客户端已通过 Firebase 身份验证的身份。有几种方法可以解决这个问题，但最简单的可能是让所有客户端<->NodeJS 通信都通过 Firebase 本身。

因此，与其让客户端访问您的 NodeJS 服务器提供的 REST 端点，不如让客户端写入您的 NodeJS 服务器正在监视的 Firebase 位置。然后，您可以使用 Firebase 安全规则来验证客户端写入的数据，并且您的服务器可以信任它。

例如，如果你想让用户可以通过你的应用程序发送任意电子邮件（你的 NodeJS 服务器负责实际发送电子邮件），你可以有一个 /emails_to_send 位置，其规则如下：

```
{
  "rules": {
    "emails_to_send": {
      "$id": {
        ".write": "!data.exists() && newData.child('from').val() == auth.email",
        ".validate": "newData.hasChildren(['from', 'to', 'subject', 'body'])"
      }
    }
  }
} 
```

然后在客户端你可以这样做：

```
ref.child('emails_to_send').push({
  from: 'my_email@foo.com', 
  to: 'joe@example.com', 
  subject: 'hi', 
  body: 'Hey, how\'s it going?'
}); 
```

在您的 NodeJS 代码中，您可以使用 Firebase Secret 调用 .auth() （这样您就可以读取和写入所有内容），然后执行以下操作：

```
ref.child('emails_to_send').on('child_added', function(emailSnap) {
  var email = emailSnap.val();
  sendEmailHelper(email.from, email.to, email.subject, email.body);

  // Remove it now that we've processed it.
  emailSnap.ref().remove();
}); 
```

这将是最简单也是最正确的解决方案。例如，如果用户通过 Firebase 注销，他们将无法再写入 Firebase，因此他们将无法再让您的 NodeJS 服务器发送电子邮件，这很可能是您想要的行为。这也意味着如果您的服务器暂时关闭，当您重新启动它时，它会“赶上”发送电子邮件，一切都会继续工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-12T01:47:13.447

以上似乎是一种迂回的做事方式，我会使用[https://www.npmjs.com/package/connect-session-firebase](https://www.npmjs.com/package/connect-session-firebase)之类的东西，并保持 firebase 作为模型，通过 express 处理所有路由。如果您的快速服务器正在呈现模板而不仅仅是作为 JSON API 表现，则更容易。

# java - ...hbm.xml 文件在哪里？

> ID：14673930
> 
> 赞同：4
> 
> 时间：2013-02-03T15:15:13.323
> 
> 标签：java, hibernate, hibernate-mapping

我是一个 Hibernate 新手，正在尝试一个带有嵌入式 Derby 数据库的小型休眠示例。我正在eclipse中开发。我没有使用 Spring 或 Maven，我没有设置 Web 应用程序，我没有应用程序服务器。如果项目变得更大，我无疑会使用其中的一些，但现在我只是想让这个例子工作。

我得到的错误是：

```
Exception in thread "main" org.hibernate.MappingNotFoundException: resource: javabeat/net/hibernate/EmployeeInfo.hbm.xml not found 
```

有时只是：

```
Exception in thread "main" org.hibernate.MappingNotFoundException: resource: EmployeeInfo.hbm.xml not found 
```

这是我的代码；我已经标记了错误似乎来自哪里 - eclipse 控制台在那里显示异常并停止运行，这是合乎逻辑的地方：

```
package javabeat.net.hibernate;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;

public class JavaBeatHibernateExample
{
  public static void main(String args[]) throws Exception
  {

    configureDerbyEmbedded();

    Configuration cfg = new Configuration();
    cfg.addClass(javabeat.net.hibernate.EmployeeInfo.class);

    cfg.setProperty("hibernate.connection.driver_class", "org.apache.derby.jdbc.EmbeddedDriver");
    cfg.setProperty("hibernate.connection.password", "password");
    cfg.setProperty("hibernate.connection.url", "jdbc:derby:myEmbeddedDB;create=true");
    cfg.setProperty("hibernate.connection.username", "admin");
    cfg.setProperty("hibernate.dialect", "org.hibernate.dialect.DerbyDialect");
    cfg.setProperty("cache.provider_class", "org.hibernate.cache.NoCacheProvider");

    // Exception almost certainly generated here.
    cfg.addResource("EmployeeInfo.hbm.xml");

    cfg.setProperty("hibernate.current_session_context_class", "thread");
    cfg.setProperty("hibernate.show_sql", "true");
    SessionFactory sessionFactory = cfg.buildSessionFactory();
    Session session = sessionFactory.openSession();
    Transaction transaction = session.beginTransaction();
    transaction.begin();
    EmployeeInfo employeeInfo = new EmployeeInfo();
    employeeInfo.setSno(1);
    employeeInfo.setName("KamalHasan");
    session.save(employeeInfo);
    transaction.commit();
    session.close();
  }

  private static void configureDerbyEmbedded() 
      throws ClassNotFoundException, IllegalAccessException, InstantiationException
  {
    Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
  }
} 
```

我在eclipse中的文件夹设置如下

```
CarRepair
--src
----javabeat
------net
--------hibernate
----main
------resources
--------javabeat
----------net
------------hibernate 
```

我有一个EmployeeInfo.hbm.xml，我把它放在了以下地方：src/javabeat/net/hibernate main/resources/javabeat/net/hibernate main/resources

而且我总是遇到上述异常。首先，它只是说找不到 XML 文件；在后两者中，它在错误消息中的 XML 文件名前面添加 javabeat/net/hibernate。

该文件应该在其他地方，还是我应该做的其他事情？

编辑：它可能是 xml 文件本身中的某些内容，带有误导性错误消息吗？

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >
    <hibernate-mapping>
        <class name="javabeat.net.hibernate.EmployeeInfo" table="Employee_Info">
            <id name="sno" column="sno" type="java.lang.Integer">
            </id>
            <property name="name" column="name" type="java.lang.String"/>
        </class>
    </hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:27:34.927

您有一个非常特殊的目录布局。假设`src`是 Eclipse 中的源文件夹，它会将所有非 Java 文件复制到 classes 或 bin 目录（或您为编译的类选择的任何目录名称），并且`EmployeeInfo.hbm.xml`应该直接在 下`src`，因为您告诉 Hibernate从类路径的根目录加载它：

```
cfg.addResource("EmployeeInfo.hbm.xml"); 
```

如果你把它放在 main/resources 中，加载它的代码应该是

```
cfg.addResource("main/resources/EmployeeInfo.hbm.xml"); 
```

为什么不使用自己的包层次结构，从而使用以下目录树：

```
src
  com
    rcook
      myapp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:41:23.363

正如您所说，您没有使用 maven，src/main/resources 就像 Eclipse 项目的任何其他文件夹一样。因此只需复制 src 文件夹下的 hbm 文件并删除“addClass”方法。

# c++ - 使用 DAT 文件执行程序并输入

> ID：14673931
> 
> 赞同：-2
> 
> 时间：2013-02-03T15:15:16.430
> 
> 标签：c++

我如何能够与 .DAT 文件和输入一起执行我的 C++ 程序？

例如： `./program.exe file.dat 5`

file.dat 中的多个命令行示例：

```
addpeer 12130
removepeer 13820 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:18:04.377

在 C++ 中，您使用 main 函数`int main(int argc, char *argv[])`，argc 包含“参数计数”，即参数的数量，而 argv 是一个向量，其中包含您在调用程序时提供的参数。在你的情况下，它将包含“file.dat”和 5。一旦你有了这个，你就可以用你的程序解析你的文件并用它做你想做的事。

# asp.net - 跨用户控件共享变量/对象

> ID：14673934
> 
> 赞同：-1
> 
> 时间：2013-02-03T15:15:28.663
> 
> 标签：asp.net, user-controls

我有这堂课：

```
public class address
{
    public string address1;
    public string address2;
    public string city;
} 
```

现在，每当页面加载时，我都会根据父用户控件中的会话用户 ID 填充这些值，

```
on_load of parent page
{
    connect to database;
    get the info
    address.address1 = "171, broadway";
} 
```

现在在此页面上的子用户控件中，我想使用这些值...

`address.address1`依此类推，无需再次访问数据库，这是一个示例数据，实际数据足够长，可以使用会话。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:35:15.163

将数据保存在当前会话中，并在每次需要时调用它

这将有助于[在 Sessions 中存储自定义对象](https://stackoverflow.com/questions/5644304/storing-custom-objects-in-sessions)

如果数据太大，那么只需在“获取信息”之前将数据绑定到所有控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:51:15.230

`UserControl`为每个应该有权访问此数据的人添加一个名为 Address 的属性。然后在 parent`UserControl`中，为每个控件设置此属性。

# css - Twitter Bootstrap：如何在上面显示图标

> ID：14673943
> 
> 赞同：-3
> 
> 时间：2013-02-03T15:16:29.947
> 
> 标签：css, twitter-bootstrap

见：http: [//jsfiddle.net/D4eu9/1/](http://jsfiddle.net/D4eu9/1/)

```
<p><i class="icon-envelope"></i> foo@foobar.com</p>
<ol>
    <li>one@foobar.com</li>
    <li>two@foobar.com</li>
    <li>three@foobar.com</li>    
<ol> 
```

假设我希望 icon-envelope 出现在第一个`<li>`. 我希望它出现并与显示的第一个图标信封对齐。我该怎么做呢？

**更新 1：它应该是什么样子 **

```
[icon] foo@foobar.com

[icon] one@foobar.com
       two@foobar.com
       three@foobar.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:19:46.193

试试这个：

```
<li><i class="icon-envelope"></i>one@foobar.com</li> 
```

[小提琴](http://jsfiddle.net/gdzQL/)

**更新：** 要将图标移动到顶层，您需要为图标和列表项添加边距：

```
<li>
    <i style="margin-left:-25px" class="icon-envelope"></i>
    <span style="margin-left:25px;">one@foobar.com</span>
</li> 
```

见[小提琴](http://jsfiddle.net/y5SkJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:21:16.220

使用`<i>`里面的标签`LI`

```
<i class="icon-envelope"></i> one@foobar.com 
```

所以你的完整代码将是这样的：

```
<p><i class="icon-envelope"></i> foo@foobar.com</p>
<ol>
    <li><i class="icon-envelope"></i> one@foobar.com</li>
    <li><i class="icon-envelope"></i> two@foobar.com</li>
    <li><i class="icon-envelope"></i> three@foobar.com</li>    
<ol> 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/ht7Es/](http://jsfiddle.net/praveenscience/ht7Es/)

* * *

我们通常这样做，使用`padding`：

```
<p><i class="icon-envelope"></i> foo@foobar.com</p>
<ol>
    <li><i class="icon-envelope"></i> one@foobar.com</li>
    <li class="no-icon">two@foobar.com</li>
    <li class="no-icon">three@foobar.com</li>    
<ol> 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/ht7Es/2/](http://jsfiddle.net/praveenscience/ht7Es/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:33:57.903

```
<ol>
  <li class="list"><span><i class="icon-envelope"></i> foo@foobar.co</span></li>
  <li class="list"><span><i class="icon-envelope"></i> foo@foobar.co</span></li>
  <li class="list"><span><i class="icon-envelope"></i> foo@foobar.co</span></li>
<ol> 
```

在评论周围插入一个跨度似乎可以解决我的问题。

# c# - 将大量整数加入 LINQ 查询

> ID：14673949
> 
> 赞同：5
> 
> 时间：2013-02-03T15:17:45.307
> 
> 标签：c#, asp.net, sql, linq, linq-to-sql

我的 LINQ 查询返回以下错误：“传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确。此 RPC 请求中提供了太多参数。最大值为 2100”。

我所需要的只是计算所有具有 BirthDate 且我在列表中有其 ID 的客户。我的客户 ID 列表可能很大（数百万条记录）。

这是查询：

```
List<int> allClients = GetClientIDs();

int total = context.Clients.Where(x => allClients.Contains(x.ClientID) && x.BirthDate != null).Count(); 
```

当查询以这种方式重写时，

```
int total = context
    .Clients
    .Count(x => allClients.Contains(x.ClientID) && x.BirthDate != null); 
```

它会导致同样的错误。

还尝试以不同的方式制作它，它会吃掉所有的记忆：

```
List<int> allClients = GetClientIDs();

total = (from x in allClients.AsQueryable()
         join y in context.Clients
         on x equals y.ClientID
         where y.BirthDate != null
         select x).Count(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:31:36.710

我们在工作中遇到了同样的问题。问题在于`list.Contains()`创建了一个`WHERE column IN (val1, val2, ... valN)`语句，因此您只能在其中输入多少值。我们最终做的实际上是像你一样分批做。

但是，我认为我可以为您提供更简洁、更优雅的代码来执行此操作。这是一个扩展方法，它将添加到您通常使用的其他 Linq 方法中：

```
public static IEnumerable<IEnumerable<T>> BulkForEach<T>(this IEnumerable<T> list, int size = 1000)
{
    for (int index = 0; index < list.Count() / size + 1; index++)
    {
        IEnumerable<T> returnVal = list.Skip(index * size).Take(size).ToList();
        yield return returnVal;
    }
} 
```

然后你像这样使用它：

```
foreach (var item in list.BulkForEach())
{
    // Do logic here. item is an IEnumerable<T> (in your case, int)
} 
```

* * *

**编辑**
或者，如果你愿意，你可以让它像普通的 List.ForEach() 一样，像这样：

```
public static void BulkForEach<T>(this IEnumerable<T> list, Action<IEnumerable<T>> action, int size = 1000)
{
    for (int index = 0; index < list.Count() / size + 1; index++)
    {
        IEnumerable<T> returnVal = list.Skip(index * size).Take(size).ToList();
        action.Invoke(returnVal);
    }
} 
```

像这样使用：

```
list.BulkForEach(p => { /* Do logic */ }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:23:43.083

如上所述，您的查询可能被翻译为：

```
select count(1)
from Clients
where ClientID = @id1 or ClientID = @id2 -- and so on up to the number of ids returned by GetClientIDs. 
```

您将需要更改查询，以免向其传递太多参数。

要查看生成的 SQL，您可以设置`Clients.Log = Console.Out`将在执行时将其写入调试窗口。

编辑：

分块的一种可能替代方法是将 ID 作为分隔字符串发送到服务器，并在数据库中创建一个 UDF，该 UDF 可以将该字符串转换回列表。

```
var clientIds = string.Jon(",", allClients);

var total = (from client in context.Clients
            join clientIds in context.udf_SplitString(clientIds)
                on client.ClientId equals clientIds.Id
            select client).Count(); 
```

Google 上有很多用于拆分字符串的 UDF 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T16:47:07.343

正如 Gert Arnold 之前提到的，分块查询可以解决问题，但看起来很糟糕：

```
List<int> allClients = GetClientIDs();

int total = 0;

const int sqlLimit = 2000;

int iterations = allClients.Count() / sqlLimit;

for (int i = 0; i <= iterations; i++)
{
    List<int> tempList = allClients.Skip(i * sqlLimit).Take(sqlLimit).ToList();

    int thisTotal = context.Clients.Count(x => tempList.Contains(x.ClientID) && x.BirthDate != null);

    total = total + thisTotal;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T17:37:01.190

另一种选择并且可能是查询时最快的方法是将您的数字从 CSV 文件添加到数据库中的临时表中，然后执行连接查询。

分块进行查询意味着在客户端和数据库之间进行大量往返。如果您感兴趣的 ID 列表是静态的或很少更改，我建议使用临时表的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-21T19:46:07.773

如果您不介意将工作从数据库移动到应用程序服务器并拥有内存，请尝试此操作。

int total = context.Clients.AsEnumerable().Where(x => allClients.Contains(x.ClientID) && x.BirthDate != null).Count();

# photoshop - 如何通过重复小图像来创建更大的图像

> ID：14673956
> 
> 赞同：1
> 
> 时间：2013-02-03T15:18:24.510
> 
> 标签：photoshop, gimp

我有一个小图像，我想重复这个图像来创建一个更大的图像。我手动尝试将图像复制/粘贴到（ms paing、gimp、photoshop）中，但无法无缝组合副本。有什么程序或技巧或捷径可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:04:54.697

有些图像不能无缝重复，因为边缘不会相互连接。

我知道您问过如何在照片编辑器中执行此操作，但如果您想看看重复它会是什么样子，而无需使用 photoshop 的时间和麻烦，您可以将其放入以下代码中进行查看：

将此代码复制到文本编辑器中，然后以 .html 扩展名保存文件并在浏览器中打开它。

```
<!DOCTYPE html>
<html>
    <body style="background: url(http://root40.joyasolutions.com/Media/rootforty/layout/images/bg.jpg) repeat black;">

    </body>
</html> 
```

如果您复制此代码并保存它，您将看到我的小图像重复创建一个大背景。只需将括号中的链接替换为来自网络的图像链接或来自您计算机的图像链接，以查看它与您的图片的外观。

这是本地链接的格式：file:///C:/Users/mary/folder/folder/images/BG.jpg

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:05:06.143

您可能想[在 GIMP 中创建一个可平铺的图案](http://bit.ly/YU32SC)。GIMP 还具有创建[无缝边缘](http://docs.gimp.org/en/plug-in-make-seamless.html)的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T15:28:13.843

你可以用 Photoshop 轻松完成，我认为没有比 Photoshop 更强大的程序了复制并创造你想要的东西

# c - 在 C 中使用块

> ID：14673957
> 
> 赞同：5
> 
> 时间：2013-02-03T15:18:45.897
> 
> 标签：c, c99

当拥有结构数组时，我经常会错过我在 VB6 中习惯的 With-block 方法（类似于 C# 中的 Using-block）。例如，我的许多代码现在看起来像：

```
Data.attribute[i].ref->value[i]->member.val1 = 0;
Data.attribute[i].ref->value[i]->member.val2 = 2;
Data.attribute[i].ref->value[i]->member.val3 = 3; 
```

虽然我喜欢做类似的事情：

```
with Data.attribute[i].ref->value[i]->member
{
    .val1 = 3;
    .val2 = 2;
    .val3 = 3;
} 
```

我知道我可以创建一个临时变量，但是在 C 语言中是否可能出现上述情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T15:21:23.237

```
member_t* m = &(Data.attribute[i].ref->value[i]->member);
m->val1 = 3;
m->val2 = 2;
m->val3 = 3; 
```

以上应该可以很好地缩短线路。

并且由于您使用`c99`，您甚至可以仅在需要时创建这些临时对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T15:56:10.223

你可以用宏来伪造它，但这并不值得：

```
int main(){

  WITH(Data.attribute[i].ref->value[i]->member,
    .val1 = 3,
    .val2 = 2,
    .val3 = 3
  );
  return 0;
} 
```

其中`WITH()`宏被定义为使用[参数计数的](https://groups.google.com/forum/?fromgroups=#!topic/comp.std.c/d-6Mj5Lko_s)[可变参数宏](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)：

```
#define WITH(prefix, ...) do {\
  MACRO_CONCAT(_WITH,PP_NARG(__VA_ARGS__))(prefix, __VA_ARGS__);\
} while (0)

#define PP_NARG(...) \
           PP_NARG_(__VA_ARGS__,PP_RSEQ_N())
#define PP_NARG_(...) \
           PP_ARG_N(__VA_ARGS__)
#define PP_ARG_N( \
              _1, _2, _3, _4, _5, _6, _7, _8, _9,_10, \
             _11,_12,_13,_14,_15,_16,_17,_18,_19,_20, \
             _21,_22,_23,_24,_25,_26,_27,_28,_29,_30, \
             _31,_32,_33,_34,_35,_36,_37,_38,_39,_40, \
             _41,_42,_43,_44,_45,_46,_47,_48,_49,_50, \
             _51,_52,_53,_54,_55,_56,_57,_58,_59,_60, \
             _61,_62,_63,N,...) N
#define PP_RSEQ_N() \
           63,62,61,60,                   \
         59,58,57,56,55,54,53,52,51,50, \
         49,48,47,46,45,44,43,42,41,40, \
         39,38,37,36,35,34,33,32,31,30, \
         29,28,27,26,25,24,23,22,21,20, \
         19,18,17,16,15,14,13,12,11,10, \
         9,8,7,6,5,4,3,2,1,0

#define _MACRO_CONCAT(a,b)  a ## b
#define MACRO_CONCAT(a,b)  _MACRO_CONCAT(a,b)

#define _WITH1(a,b)        a b
#define _WITH2(a,b, bs...) a b ; _WITH1(a, bs)
#define _WITH3(a,b, bs...) a b ; _WITH2(a, bs)
#define _WITH4(a,b, bs...) a b ; _WITH3(a, bs)
#define _WITH5(a,b, bs...) a b ; _WITH4(a, bs)
#define _WITH6(a,b, bs...) a b ; _WITH5(a, bs)
#define _WITH7(a,b, bs...) a b ; _WITH6(a, bs)
#define _WITH8(a,b, bs...) a b ; _WITH7(a, bs)
#define _WITH9(a,b, bs...) a b ; _WITH8(a, bs)
#define _WITH10(a,b, bs...) a b ; _WITH9(a, bs)
#define _WITH11(a,b, bs...) a b ; _WITH10(a, bs)
#define _WITH12(a,b, bs...) a b ; _WITH11(a, bs)
#define _WITH13(a,b, bs...) a b ; _WITH12(a, bs)
#define _WITH14(a,b, bs...) a b ; _WITH13(a, bs)
#define _WITH15(a,b, bs...) a b ; _WITH14(a, bs)
#define _WITH16(a,b, bs...) a b ; _WITH15(a, bs)
#define _WITH17(a,b, bs...) a b ; _WITH16(a, bs)
#define _WITH18(a,b, bs...) a b ; _WITH17(a, bs)
#define _WITH19(a,b, bs...) a b ; _WITH18(a, bs)
#define _WITH20(a,b, bs...) a b ; _WITH19(a, bs)
#define _WITH21(a,b, bs...) a b ; _WITH20(a, bs)
#define _WITH22(a,b, bs...) a b ; _WITH21(a, bs)
#define _WITH23(a,b, bs...) a b ; _WITH22(a, bs)
#define _WITH24(a,b, bs...) a b ; _WITH23(a, bs)
#define _WITH25(a,b, bs...) a b ; _WITH24(a, bs)
#define _WITH26(a,b, bs...) a b ; _WITH25(a, bs)
#define _WITH27(a,b, bs...) a b ; _WITH26(a, bs)
#define _WITH28(a,b, bs...) a b ; _WITH27(a, bs)
#define _WITH29(a,b, bs...) a b ; _WITH28(a, bs)
#define _WITH30(a,b, bs...) a b ; _WITH29(a, bs)
#define _WITH31(a,b, bs...) a b ; _WITH30(a, bs)
#define _WITH32(a,b, bs...) a b ; _WITH31(a, bs)
#define _WITH33(a,b, bs...) a b ; _WITH32(a, bs)
#define _WITH34(a,b, bs...) a b ; _WITH33(a, bs)
#define _WITH35(a,b, bs...) a b ; _WITH34(a, bs)
#define _WITH36(a,b, bs...) a b ; _WITH35(a, bs)
#define _WITH37(a,b, bs...) a b ; _WITH36(a, bs)
#define _WITH38(a,b, bs...) a b ; _WITH37(a, bs)
#define _WITH39(a,b, bs...) a b ; _WITH38(a, bs)
#define _WITH40(a,b, bs...) a b ; _WITH39(a, bs)
#define _WITH41(a,b, bs...) a b ; _WITH40(a, bs)
#define _WITH42(a,b, bs...) a b ; _WITH41(a, bs)
#define _WITH43(a,b, bs...) a b ; _WITH42(a, bs)
#define _WITH44(a,b, bs...) a b ; _WITH43(a, bs)
#define _WITH45(a,b, bs...) a b ; _WITH44(a, bs)
#define _WITH46(a,b, bs...) a b ; _WITH45(a, bs)
#define _WITH47(a,b, bs...) a b ; _WITH46(a, bs)
#define _WITH48(a,b, bs...) a b ; _WITH47(a, bs)
#define _WITH49(a,b, bs...) a b ; _WITH48(a, bs)
#define _WITH50(a,b, bs...) a b ; _WITH49(a, bs)
#define _WITH51(a,b, bs...) a b ; _WITH50(a, bs)
#define _WITH52(a,b, bs...) a b ; _WITH51(a, bs)
#define _WITH53(a,b, bs...) a b ; _WITH52(a, bs)
#define _WITH54(a,b, bs...) a b ; _WITH53(a, bs)
#define _WITH55(a,b, bs...) a b ; _WITH54(a, bs)
#define _WITH56(a,b, bs...) a b ; _WITH55(a, bs)
#define _WITH57(a,b, bs...) a b ; _WITH56(a, bs)
#define _WITH58(a,b, bs...) a b ; _WITH57(a, bs)
#define _WITH59(a,b, bs...) a b ; _WITH58(a, bs)
#define _WITH60(a,b, bs...) a b ; _WITH59(a, bs)
#define _WITH61(a,b, bs...) a b ; _WITH60(a, bs)
#define _WITH62(a,b, bs...) a b ; _WITH61(a, bs)
#define _WITH63(a,b, bs...) a b ; _WITH62(a, bs)
#define _WITH64(a,b, bs...) a b ; _WITH63(a, bs) 
```

使用以下命令查看宏扩展的结果`gcc -E`：

```
int main(){

  do { 
    Data.attribute[i].ref->value[i]->member.val1 = 3;
    Data.attribute[i].ref->value[i]->member.val2 = 2; 
    Data.attribute[i].ref->value[i]->member.val3 = 3; 
  } while (0);

  return 0;
} 
```

请注意，如果您愿意指定局部变量的类型（此处假定为），并且使用 gcc-4.3 及更高版本（或 clang，或其他一些现代编译器），则可以使用宏*和局部变量：*`Member_t`

```
#define WITH_LOCAL(type, prefix, ...) _WITH_LOCAL( \
  type, \
  MACRO_CONCAT(__with_local, __COUNTER__), \
  prefix, \
  __VA_ARGS__ \
)
#define _WITH_LOCAL(type, local, prefix, ...) do {\
  type local = prefix;\
  MACRO_CONCAT(_WITH,PP_NARG(__VA_ARGS__))(local, __VA_ARGS__);\
} while(0)

int main(){

  WITH_LOCAL(Member_t *, &(Data.attribute[i].ref->value[i]->member),
    ->val1 = 3,
    ->val2 = 2,
    ->val3 = 3
  );

  return 0;
} 
```

这将扩展到：

```
int main() {

  do { 
    Member_t * __with_local0 = &(Data.attribute[i].ref->value[i]->member);
    __with_local0->val1 = 3;
    __with_local0->val2 = 2;
    __with_local0->val3 = 3;
  } while(0);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T15:51:11.663

在某些情况下，您可以使用 C 预处理器提供的宏。我猜这些宏会比您当前的代码复杂得多，但有时它会有所帮助。

# c# - 部分反序列化具有多个根的 JSON 字符串

> ID：14673959
> 
> 赞同：0
> 
> 时间：2013-02-03T15:19:03.103
> 
> 标签：c#, json.net, deserialization

我正在编写一个使用 REST Web 服务的 C# 版本 4 应用程序。这些 Web 服务是使用 ASP.NET MVC RESTful Web 服务方法编写的。这些 Web 服务方法中有一半返回具有**多个根**的 JSON 字符串（请参阅下面的示例 JSON 数据）。但是，对于特定的 JSON 响应（请参见下文），我想将**多根**JSON 响应字符串部分反序列化为我感兴趣的 Device 对象（例如，属于 Device 类），而不是所有数据响应。

我知道如何使用 C# .NET 库或 JSON.net 代码来反序列化只有一个根的 JSON 字符串。但我不确定如何处理多根 JSON 数据。请指教。谢谢你。

例如，使用以下 JSON 响应，我想检索“设备”对象（从 Device 类实例化）的数据，并**忽略**“version_info”和“SKU_info”数据。

以下 JSON 响应有 3 个根：“version_info”、“SKU_info”和“device”：

```
{
     “version_info” : { “version” : “1.0”, “owner_id” : 237},
     “SKU_info” : {“id” : 1928399, “active”: true},
     “device” : {
           “id”: 7732, “name” : “desktop computer ”, “parent_device_id”: 2982,
           “sub_devices”: 
           [   
                    {“id”: 7733, “name”: “fan”, “quantity” : 1 }, 
                    {“id”: 7734, “name”: “memory chip”, “quantity” : 4 },
                    {“id”: 7735, “name”: “CPU”, “quantity” : 1 },
                    {“id”: 7736, “name”: “hard disk”, “quantity” : 2 },
           ],
           “user_id” : 864
      }
} 
```

还有我的 csutom “Device” 和 “SubDevice” 类：

```
public class Device
{
    public long Id;
    public string Name;
    public long ParentDeviceId;
    public List<SubDevice> Subdevices;
    public int UserId;
}

public class SubDevice
{
    public long Id;
    public string Name;
    public int Quantity;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:30:44.003

JSON 字符串确实有根。它只是未命名。

```
{  
     “version_info” : { “version” : “1.0”, “owner_id” : 237},
     “SKU_info” : {“id” : 1928399, “active”: true},
     “device” : {
           “id”: 7732, “name” : “desktop computer ”, “parent_device_id”: 2982,
           “sub_devices”: 
           [   
                    {“id”: 7733, “name”: “fan”, “quantity” : 1 }, 
                    {“id”: 7734, “name”: “memory chip”, “quantity” : 4 },
                    {“id”: 7735, “name”: “CPU”, “quantity” : 1 },
                    {“id”: 7736, “name”: “hard disk”, “quantity” : 2 },
           ],
           “user_id” : 864
      }
} 
```

包装 JSON的`{`开头和结尾`}`定义了根对象。因此，如果您创建一个对象（命名任何您想要的名称），那么您可以反序列化为您的新对象。

例如：

```
public class Wrapper
{
     Version version_info { get; set; }
     SKU SKU_info { get; set; }
     Device device { get; set; }
} 
```

为了忽略，您可以让它反序列化为您不打算使用的动态对象。这可能有效：

```
public class Wrapper
{
     dynamic version_info { get; set; }
     dynamic SKU_info { get; set; }
     Device device { get; set; }
}

Wrapper root = JsonConvert.DeserializeObject<Wrapper>(feed); 
```

# iphone - 返回objectForKey的数量

> ID：14673960
> 
> 赞同：0
> 
> 时间：2013-02-03T15:19:22.170
> 
> 标签：iphone, ios, uitableview, nsarray, nsdictionary

我有一部分代码返回 numberOfRowsInSection。

**代码**

```
for (NSDictionary *consoleDictionary in [self arrayFromJSON]) {
    if ([[consoleDictionary objectForKey:@"model"] isEqualToString:@"PlayStation 3"]) {
        NSLog(@"%@", consoleDictionary);
    }
} 
```

**输出**

```
2013-02-03 22:37:08.468 PageControl01[5782:c07] {
    console = PlayStation;
    game = "007 Legends";
    id = 1;
    model = "PlayStation 3";
    publisher = "Electronic Arts";
}
2013-02-03 22:37:08.478 PageControl01[5782:c07] {
    console = PlayStation;
    game = "Ace Combat: Assault Horizon";
    id = 2;
    model = "PlayStation 3";
    publisher = Namco;
} 
```

这显然是正确的，因为它记录了所有`"PlayStation 3"`模型。然而，这不是我需要的。我想记录`"PlayStation 3"`'s 的数量。所以我稍微调整一下代码，然后：

```
for (NSDictionary *consoleDictionary in [self arrayFromJSON]) {
    if ([[consoleDictionary objectForKey:@"model"] isEqualToString:@"PlayStation 3"]) {
        NSLog(@"%d", [consoleDictionary count]);
    }
} 
```

**输出**

```
2013-02-03 22:39:43.605 PageControl01[5816:c07] 5
2013-02-03 22:39:43.605 PageControl01[5816:c07] 5 
```

这一个非常接近但又如此接近。而不是记录数字`5`，它应该记录数字，`2`因为只有`2` `"PlayStation 3"`.

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:25:42.730

您不需要显式循环遍历数组。

```
NSIndexSet *is = [array indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
    return [[obj objectForKey:@"model"] isEqualToString:@"PlayStation 3"];
}];
int numOfPS3s = is.count; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:31:47.327

1.  它正在记录数字 5，因为您的每个字典中有 5 个键（`console`、`game`、`id`、`model`、`publisher`）。如果不是每次`[consoleDictionary count]`只向计数器添加一个而不是记录，那么`int`最后您将在计数器中获得预期的结果。

2.  你可以获取对象的数量是一个更简单的方法：`[self arrayFromJSON]`是一个数组

通常：

```
NSInteger nbPS3 = [[self arrayFromJSON] indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
  return [obj[@"model"] isEqualToString:@"PlayStation 3"];
}].count 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T15:35:20.607

是的，`count`总是总计数，而不是索引，而不是匹配计数。对于这个特定问题，使用`indexesOfObjectsPassingTest`是最直接的解决方案，但如果您对其他用于迭代结果集的技术感兴趣，而且不仅要跟踪对象，还要跟踪索引，请考虑这两种方法：

```
for (NSInteger i = 0; i < [self.arrayFromJSON count]; i++) {
    if ([[[self.arrayFromJSON objectAtIndex:i] objectForKey:@"model"] isEqualToString:@"PlayStation 3"]) {
        NSLog(@"%d", i);
    }
} 
```

或者

```
[self.arrayFromJSON enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if ([[obj objectForKey:@"model"] isEqualToString:@"PlayStation 3"]) {
        NSLog(@"%d", idx);
    }
}]; 
```

Obviously, if you're looking for how many records match, you'd just increment your own counter, rather than logging the index for each match.

# math - 坏输出泰勒级数 sinx

> ID：14673963
> 
> 赞同：0
> 
> 时间：2013-02-03T15:19:26.750
> 
> 标签：math, output, taylor-series

我正在尝试编写一个程序，该程序从用户那里获取值 x 并使用泰勒级数打印 sinx。但我的输出很糟糕。我得到的输出甚至不是一个数字，它的 -1.#IND00 无论我输入什么。

这是我的代码

```
#include <stdio.h>
#include <conio.h>
void main()
{
    int i;
    double x,sum,last;
    sum=(double)0;
    scanf("%f",&x);
    last=x;
    sum=last;
    for(i=1;i<10;i++)
    {
        last*=(double)(-x*x)/((2*i)*(2*i+1));
        sum+=last;
    }
    printf("%f",sum);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:32:59.120

我可以看到一个问题：

```
scanf("%f",&x); 
```

`x`是双倍的，所以你需要`l`, 即`"%lf"`.

[关于这不是正确公式的真实但无关紧要的一点`sinh`，即使`sinh`问题中没有提到，已编辑..]

# windows - 如何在 Windows 上为 pil 安装 libjpeg

> ID：14673968
> 
> 赞同：1
> 
> 时间：2013-02-03T15:19:39.840
> 
> 标签：windows, python-2.7, python-imaging-library, libjpeg

我正在使用 python 2.7 和 PIL 在 Windows 上转换图像格式。尝试将图像转换为 JPG 会引发此异常：

```
KeyError('JPG',) 
```

追溯：

```
 ...\PIL\Image.py", line 1429, in save
    save_handler = SAVE[string.upper(format)] # unknown format
KeyError: 'JPG' 
```

在 linux 上，我通过安装 libjpeg 解决了这个问题，并设置了指向它的位置的符号链接，以便 PIL 可以找到它。

我正在尝试在 Windows 上完成相同的操作。我从[http://www.ijg.org](http://www.ijg.org)获得了 windows 格式包“jpegsr9.zip”，但不知道 PIL 是如何计算这些文件存在的。试图将它们放在同一个文件夹中没有帮助。

我应该把文件放在哪里，这样它也可以在 Windows 上运行？在 Windows 上 libjpeg 的安装过程是怎样的？

**更新：如果尝试转换为****"JPEG"**而不是**"JPG"**，则不再引发 JPG 异常。这个问题似乎不需要任何额外的安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:42:23.740

**如果尝试转换为"JPEG"**而不是**"JPG"**，则不再引发 JPG 异常。这个问题似乎不需要任何额外的安装。

# php - 按子数组排序多维数组

> ID：14673969
> 
> 赞同：0
> 
> 时间：2013-02-03T15:19:43.660
> 
> 标签：php, sorting

我有以下数组，我试图按分数排序，然后匹配，然后是名称，但我的方法不起作用。谁能明白为什么？

最终顺序应该是 4、3、5。

我使用的`usort`是在底部。

```
 [3] => Array
            (
                [name] => DrayTek Vigor 2130Vn VoIP/WiFi Router
                [matches] => Array
                    (
                        [0] => voip
                    )
                [score] => 3
            )
        [4] => Array
            (
                [name] => DrayTek Vigor 2750n VDSL Wireless Router
                [matches] => Array
                    (
                        [0] => 2750
                    )
                [score] => 3
            )
        [5] => Array
            (
                [name] => DrayTek Vigor 2850Vn VDSL/ADSL VoIP Router
                [matches] => Array
                    (
                        [0] => voip
                    )
                [score] => 3
            ) 
```

逻辑

```
1\. all have the same score, so no change in order 
2\. 4 has 2750 in matches[0] which assuming numbers come before letters, moves 4 up
** the order now should be 4,3,5
3\. as 3 and 5 have the same matches[], no change in order
4\. 3's name naturally comes before 5 but since its already above, no change
** final order should be 4,3,5 
```

排序结果，最高分优先，然后匹配数组，然后是名称

```
function cmp($a, $b)
{
    if ( $a['score'] < $b['score'] )
        return 1;
    elseif ( $a['score'] > $b['score'] )
        return -1;
    elseif ( ! array_diff( $a['matches'], $b['matches'] ) )
        return 1;
    elseif ( ! array_diff( $b['matches'], $a['matches'] ) )
        return -1;
    elseif ( ($c = strnatcmp( strtolower($a['name']), strtolower($b['name']) ) ) !== 0 )
        return $c;
    else
        return 0;
}
usort( $this->results['rows'], "cmp" ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:21:02.120

您似乎对匹配数组比较有反转的感觉（如果它们相等，则返回 1，而不是返回 0/让它通过下一个测试）。因为当它们不相等时你需要一个明确的顺序，也许你应该按匹配数组的长度排序：

```
function cmp($a, $b)
{
    # sort by score 
    $result = $b['score'] - $a['score'];

    # then by number of matches
    if ($result == 0) {
      $result = count($b['matches']) - count($a['matches']);
    }

    # if they have the same number of matches but different matches, who wins?
    if ($result == 0) {
      $result = strnatcasecmp($a['name'], $b['name']);
    }

    return $result;
} 
```

问题`array_diff`在于它返回一个数组。您将该结果与什么进行比较以获得 a 和 b 的排序？比较函数需要能够在没有任何其他上下文的情况下从数组的其余部分订购任意两项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:48:57.540

找到了解决方案

```
function cmp($a, $b)
{
    if ( $a['score'] < $b['score'] )
        return 1;

    if ( $a['score'] > $b['score'] )
        return -1;

    if ( count( $a['matches'] ) > count( $b['matches'] ) )
        return 1;

    if ( count( $a['matches'] ) < count( $b['matches'] ) )
        return -1;

    natsort( $a['matches'] );   natsort( $b['matches'] );

    for ( $i = 0; $i < count( $a['matches'] ); $i++ )
    {
        if ( ( $c = strnatcasecmp( $b['matches'][$i], $a['matches'][$i] ) ) !== 0)
            return $c;
    }

    if ( ( $c = strnatcasecmp( strtolower($a['name'] ), strtolower( $b['name'] ) ) ) !== 0 )
        return $c;

    return 0;
}

usort( $this->results['rows'], "cmp" ); 
```

# java - 如何使用 JDBC 判断事务是否正在进行？

> ID：14673971
> 
> 赞同：2
> 
> 时间：2013-02-03T15:19:59.043
> 
> 标签：java, jdbc, jdbc-pool

我正在使用`Connection`关闭自动提交的 JDBC。在我的清理方法中，我想检查以确保当前没有正在进行的事务，但我看不到任何获取此信息的方法。在给定 JDBC 的情况下，如何确定事务是否正在进行`Connection`？

**更新**

尽管 JDBC 本身没有任何内容，但 Tomcat JDBC 连接池具有拦截器的概念，我想知道是否可以编写一个来跟踪该级别的事务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:33:08.510

JDBC Connection 没有任何帮助方法来了解状态，但是如果您可以获取 javax.transaction.UserTransaction，则可以使用“getStatus”方法来查找状态。[甲骨文网站](http://docs.oracle.com/javaee/1.4/api/javax/transaction/UserTransaction.html#getStatus%28%29)上的更多信息。

# sparql - 在 :BaseKB 上执行 SPARQL 查询

> ID：14673972
> 
> 赞同：1
> 
> 时间：2013-02-03T15:20:01.257
> 
> 标签：sparql, freebase, virtuoso

我已经在 Virtuoso (Windows) 中加载了 :BaseKB Lite。

我应该在 Vitruoso SPARQL 端点（http:/comphost:8890/sparql）中使用什么 SPARQL 语句来获取除 Person 之外的所有主题名称及其与 Freebase 'Sports' 域（英文）相关的所有别名？

在 Freebase 中有一个包含所有子主题的“/sports”主题，例如“/sports/sports_league_season”。到目前为止，我找不到它如何映射到 BaseKB 架构（（

结果示例：

```
 .......

 Manchester United F.C.|Manchester United FC|The Red Devils|Manch Untd|Manchester United Football Club
 London 2012|London 2012 Olympic Games| XXX Olympic games

 ........ 
```

注意：此列表中没有运动员（没有玛丽亚莎拉波娃，维多利亚阿扎伦卡等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:24:44.337

以下 SPARQL 返回“Manchester United FC”的所有别名

```
 prefix basekb: <http://rdf.basekb.com/ns/>
     prefix public: <http://rdf.basekb.com/public/>
     prefix fbase: <http://rdf.freebase.com/ns/>
     prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
     prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
     prefix dbpedia: <http://dbpedia.org/resource/>
      select ?label ?alias{
                 basekb:m.050fh <http://rdf.basekb.com/ns/m.01gr> ?alias ; 
                                                       rdfs:label ?label.
      filter(lang(?label) = 'en').
      } limit 100

    Output:
      label     alias
      "Manchester United F.C."@en   "United"@en
      "Manchester United F.C."@en   "Manchester United"@en
      "Manchester United F.C."@en   "Red Devils"@en
      "Manchester United F.C."@en   "The Red Devils"@en
      "Manchester United F.C."@en   "Manchester United Football Club"@en
      "Manchester United F.C."@en   "Manchester United FC"@en
      "Manchester United F.C."@en   "Man United"@en 
```

# android - CursorAdapter：当我使用 changeCursor() 事件 setOnItemClickListener() 开始崩溃

> ID：14673976
> 
> 赞同：1
> 
> 时间：2013-02-03T15:20:31.460
> 
> 标签：android, android-cursoradapter

我正在更新一个与我扩展的 CursorAdapter 链接的 ListView。

当我收到通知时，我会升级相应的表 sqlite。然后使用光标从表中恢复所有记录并用于`changeCursor()`更改 ListView。

不幸的是，事件`setOnItemClickListener`开始崩溃可能**是因为他使用了对 cursor 的旧引用**。

以下代码在 AsyncTask（由 Activity X 调用）的末尾执行，将数据保存到表 sqlite 并将光标设置为列表视图。最后向列表视图添加一个事件。

```
final Cursor cursor = dao.getAllRubrica();
        dao.close();

        CustomCursorAdapter provaAdapter = new CustomCursorAdapter(applicationContext,cursor,0);
        //cursor.close();

        ListView rubricaListView = (ListView) controlPanelActivity.findViewById(R.id.rubricaListView);

        rubricaListView.setAdapter(provaAdapter);
        controlPanelActivity.setRubricaListView(rubricaListView);

        rubricaListView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                cursor.moveToPosition(position);
                String target_email = cursor.getString(cursor.getColumnIndexOrThrow(DatabaseHelper.TABLE_RUBRICA_DESTINATARIO));

                String userEmail = controlPanelActivity.loadSharPrefs();
                if(userEmail!=null && !userEmail.isEmpty()){
                    // ....
                }
            }
        }); 
```

以下代码在 Activity X 收到通知时执行，因此我获取列表视图的光标并使用新光标进行更改。现在事件 setOnItemClickListener 开始崩溃！

```
CustomCursorAdapter a = (CustomCursorAdapter) rubricaListView.getAdapter();
    a.changeCursor(newCursor); 
```

这里的错误（第一行很重要）：

```
02-03 14:54:48.791: E/AndroidRuntime(1672): FATAL EXCEPTION: main 02-03 14:54:48.791: E/AndroidRuntime(1672): java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteQuery: SELECT _id, destinatario, inizio_conversazione, nick_dest, flag_new_mess FROM rubrica 02-03 14:54:48.791: E/AndroidRuntime(1672): at Android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:55) 02-03 14:54:48.791: E/AndroidRuntime(1672):   at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:58) 
```

02-03 14:54:48.791: E/AndroidRuntime(1672): 在 android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:151) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在android.database.sqlite.SQLiteCursor.onMove(SQLiteCursor.java:124) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 android.database.AbstractCursor.moveToPosition(AbstractCursor.java:213) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 com.app.task.GetRubricaTask$1.onItemClick(GetRubricaTask.java:211) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 android。 widget.AdapterView.performItemClick(AdapterView.java:298) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 android.widget.AbsListView.performItemClick(AbsListView.java:1086) 02-03 14:54: 48.791: E/AndroidRuntime(1672): 在 android.widget.AbsListView$PerformClick.run(AbsListView.java:2855) 02-03 14:54:48.791:E/AndroidRuntime(1672): 在 android.widget.AbsListView$1.run(AbsListView.java:3529) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 android.os.Handler.handleCallback(Handler. java:615) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 android.os.Handler.dispatchMessage(Handler.java:92) 02-03 14:54:48.791: E/AndroidRuntime(1672) : 在 android.os.Looper.loop(Looper.java:137) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 java.lang.reflect.Method.invokeNative(Native Method) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 java.lang.reflect。 Method.invoke(Method.java:511) 02-03 14:54:48.791: E/AndroidRuntime(1672): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 02-03 14:54:48.791:E/AndroidRuntime(1672): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 02-03 14:54:48.791: E/AndroidRuntime(1672): 在 dalvik.system.NativeStart.main （本机方法）

**调用后如何继续运行事件`changeCursor()`？我需要更改 AsyncTask 中的某些内容吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-02T06:46:46.493

> java.lang.IllegalStateException：尝试重新打开一个已经关闭的对象：SQLiteQuery：SELECT _id、destinatario、inizio_conversazione、nick_dest、flag_new_mess FROM rubrica

此代码意味着您在 cursor 可以从中检索所有数据之前关闭数据库，因此注释掉这一行，它将正常工作：

```
dao.close(); 
```

而是在 onDestroy 或 onStop 中关闭游标和数据库的连接，并分别在 onCreate 或 onRestart 中再次打开。ListView 分段从适配器获取数据以最小化资源负载，当用户向下滚动列表时，它们会从游标请求数据，因此请尝试在活动的生命周期结束时关闭数据库和游标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T07:59:15.067

你可以试试这个：

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int position, long l) {
            // CursorAdapter returns a cursor at the correct position for getItem(), or null
            // if it cannot seek to that position.
            Cursor cursor = (Cursor) adapterView.getItemAtPosition(position);
            if (cursor != null) {
                //Do something with cursor
            }
        }
    }); 
```

# php - 将下拉值发布到 mysql？

> ID：14673978
> 
> 赞同：0
> 
> 时间：2013-02-03T15:20:42.103
> 
> 标签：php, html, mysql

有人可以告诉我如何将选择下拉值与我的文本输入值一起发布到 mysql 数据库中。

我有以下内容，但不确定应如何处理下拉值。

谢谢

```
<form action=\"includes/welcomestats.php\" method=\"post\" id=\"form1\">            

    <input type=\"text\" name=\"location\" id=\"location\" maxlength=\"30\" placeholder=\"Location: e.g. London\">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enter Your Location</label><br/>
    <br/>

    <input type=\"text\" name=\"local_station\" id=\"local_station\" maxlength=\"30\" placeholder=\"Local Train Station\"><label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enter a Local Train Station</label><br/><br/><br/>

    <h5>About You</h5><br/>
    <select name=\"formGender\" style=\"min-width:125px;\">
      <option value=\"\">Select...</option>
      <option value=\"M\">Male</option>
      <option value=\"T\">Female</option>
    </select>
    <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enter Your Gender</label>
    <br/><br/>

    <input type=\"submit\" class=\"welcome-submit2\" name=\"submit\" value=\"Next ->\" id=\"submit\"/>
    </form>

    <?php
    require_once("session.php"); 
    require_once("functions.php");
    require('_config/connection.php');
    ?>
    <?php 
    session_start();
    include '_config/connection.php'; 
    $location = $_POST['location'];
    $result = mysql_query("SELECT location FROM ptb_profiles WHERE id=".$_SESSION['user_id']."");
    if(!$result) 
    { 
    echo "The username you entered does not exist"; 
    } 
    else 
    if($location!= mysql_result($result, 0)) 
    { 
    echo ""; 
        $sql=mysql_query("UPDATE ptb_profiles SET location ='".addslashes($display_name)."' WHERE id=".$_SESSION['user_id'].""); 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:25:05.470

选择字段值的处理方式与任何其他字段相同。因此，如果您有选择字段，例如-

```
 <select name=\"formGender\" style=\"min-width:125px;\">
      <option value=\"\">Select...</option>
      <option value=\"M\">Male</option>
      <option value=\"T\">Female</option>
    </select> 
```

您可以使用

```
 $gender = $_POST['formGender'] 
```

**更新** 这将为您提供 M 或 F。

# javascript - 如何为屏幕下部设置背景？CSS/HTML

> ID：14673979
> 
> 赞同：0
> 
> 时间：2013-02-03T15:20:45.073
> 
> 标签：javascript, jquery, html, css

我正在制作这个……“游戏”。目前，它是一个四处走动的小火柴人。还有一棵树。但这暂时不重要。我正在尝试将背景设置为屏幕的下部。我环顾四周，似乎找不到答案。

我尝试设置 DIV 包装器，但我已经有一个可以使背景变为蓝色。另外，如果我要制作一个 div 包装器，我不能只选择屏幕的下部。我知道我可以做这样的事情

```
div#wrapper {
    margin-top: 700px;
    background-image: url('terrain blah blah blah');
} 
```

但这不起作用，因为它将“边距”应用于其他所有事物。由于 div 包装器包装了整个页面。

这是链接： http: [//www.dotcomaftereverything.com/jquery/game](http://www.dotcomaftereverything.com/jquery/game)。
如您所见，整个页面是蓝色的。因为天空的颜色。

提前致谢。

**编辑**

**我不能使用margin-top，因为包装器包裹了整个页面，因此将其他所有内容都删除了。这会导致空白页。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:42:47.823

我认为这可能是一个可能的灵魂。

您的页面中已经有一个`#terrain`元素，因此只需将与游戏相关的 HTML 代码部分包装到一个子容器中，添加一些 CSS 即可。

**HTML**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>Life of an unlucky person</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="http://jquery-rotate.googlecode.com/files/jquery.rotate.1-1.js"></script>
    </head>
    <body>
        <div id='wrapper'>
            <div id="playarea">
                <p>Left/Right arrow keys to move, space to sit down.</p><br />
                <img src='http://www.dotcomaftereverything.com/jquery/sprites/spritePerson.png' id='img' />
                <img id='sitting' src='http://www.dotcomaftereverything.com/jquery/sprites/spriteSitting.png' />
                <img id='tree' src='http://www.dotcomaftereverything.com/jquery/sprites/spriteTree.png' />
            </div>
            <div id='terrain'></div>
        </div>
    </body>
</html> 
```

**CSS**

```
body {
    margin: 0;
    padding: 0;
    background-color: lightblue;
}

#playarea {
    position: relative;
    width: 100%;
    height: 70%;
}

    #playarea p {
        margin: 0;
    }

    #img {
        position: relative;
        margin-top: 375px;
    }

    #sitting {
        position: relative;
        margin-top: 375px;
    }

    #tree {
        position: relative;
        margin-top: 100px;
        margin-left: 700px;
    }

#terrain {
    width: 100%;
    height: 100px;
    background-color: green;
} 
```

**JS**

```
$(window).on('load resize', function () {
    var playarea = $('#playarea'),
        terrain = $('#terrain'),
        pageHeight = $(window).height(),
        areaHeight = playarea.height();
    terrain.css('height', (pageHeight - areaHeight) + 'px');
});

$(document).ready(function () {
    var sitting = $('#sitting'),
        image = $('#img');
    sitting.hide();
    $(document).keydown(function (e) {
        var keyCode = e.keyCode || e.which,
            arrow = {
                left: 37,
                up: 38,
                right: 39,
                down: 40,
                space: 32
            };
        switch (keyCode) {
            case arrow.left:
                if (!sitting.is(':visible')) {
                    image.add(sitting).stop(true).animate({
                        left: '-=60px'
                    }, 300, "linear");
                }
                break;
            case arrow.up:
                break;
            case arrow.right:
                if (!sitting.is(':visible')) {
                    image.add(sitting).stop(true).animate({
                        left: '+=60px'
                    }, 300, "linear");
                }
                break;
            case arrow.down:
                break;
            case arrow.space:
                image.fadeToggle(-100, function () {
                    sitting.fadeToggle(-100);
                });
                break;
        }
    });
    $('#sit').click(function () {});
}); 
```

这是一个[活生生的例子](http://jsbin.com/amekuy/3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:25:30.753

尝试添加位置，重复和附件

```
div#wrapper {
margin-top: 700px;
background-image: url('terrain blah blah blah');
background-position:bottom left;
background-repeat:repeat-x;
background-attachment:fixed;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T15:26:19.197

使用这种方式：

```
div#wrapper {
    margin-top: 700px;
    background: url('terrain blah blah blah') bottom center repeat-x fixed;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T16:25:04.450

将底部的绝对位置设置为 0 不能解决您的问题吗？

```
<img src="http://img.wallpaperstock.net:81/floating-land-wallpapers_9536_1280x1024.jpg" style="position:absolute;bottom:0px;"> 
```

# java - 休眠 - 无法解析属性

> ID：14673981
> 
> 赞同：0
> 
> 时间：2013-02-03T15:21:03.897
> 
> 标签：java, sql, hibernate

我有表用户，其中包含列`iduser`（长）fk -> 表登录到列`id_user`（长）。

但我不想将表登录映射到用户。我只想像`iduser`普通列一样在用户中使用此列并查找特定对象。

当我写这样的东西时：

```
...
criteria.add(Restrictions.eq(ID_USER, (long) 3);
... 
```

会出现错误：

> 无法解析属性：iduser：model.domain.User

但是当我使用标准时`SQLQuery`：

```
Query query = session.createSQLQuery("select * from Users where iduser = 3");
List list = query.list(); 
```

它会找到特定的对象。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:47:16.907

持久属性的名称区分大小写。因为属性的名称是`idUser`，所以预计`iduser`找不到属性（小写“u”）。当使用 Criteria 或 HQL 时，重要的是属性名称，而不是数据库列的名称。

# java - 将散列密码传递给 Java Mail API

> ID：14673989
> 
> 赞同：3
> 
> 时间：2013-02-03T15:21:25.893
> 
> 标签：java, email, imap, jakarta-mail

大家早上好，

我正在使用 GWT 框架为我的公司开发 ERP，我将使用 Java Mail API 获取未读电子邮件的数量。我可以这样做，但问题是我将 SHA-512 散列密码存储在数据库中，我不会将明文密码传递给 Java Mail API，而只是将散列密码传递给避免在网络上传输明文密码。

我使用此代码来获取未读邮件的数量：

```
private static int getNumberOfUnreadMails() {
   int numberOfUnreadMails = 0;

    Properties properties = new Properties();
    properties.put("mail.imap.host", "myserver.com");
    properties.put("mail.imap.user", "developper@myserver.com");
    properties.put("mail.imap.socketFactory", 143);
    properties.put("mail.imap.socketFactory.class", "java.net.ssl.SSLSocketFactory");
    properties.put("mail.imap.port", 143);
    Session session = Session.getDefaultInstance(properties, new Authenticator() {
    @Override
    protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("developper@myserver.com", "mypassword");
        }
    });
    Store store;
    try {
        store = session.getStore("imap");
        store.connect();
        Folder folder = store.getFolder("Inbox");
           numberOfUnreadMails = folder.getUnreadMessageCount();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return numberOfUnreadMails;
} 
```

我还可以使用另一种散列算法。如果您知道我的问题的解决方案，请提前感谢您。

PS：对不起我的英语不好，我是法国人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:31:25.230

您的 IMAP 服务器将需要未散列的密码才能进行身份验证。您可能已经在使用 SSL（如您设置的那样`mail.imap.socketFactory.class`），因此您的密码永远不会以明文形式发送。

顺便说一句：将 IMAP 与 SSL 与 javamail 一起使用的正确方法是使用`imaps`协议（并使用`mail.imaps.*`, 不使用 imap 协议并将 SSL 套接字工厂指定为套接字工厂。通常带有 SSL 端口的 IMAP 是 993，而不是 143 .

# javascript - 在不影响布局的情况下使用 jquery 扩大/缩小图片库

> ID：14673990
> 
> 赞同：0
> 
> 时间：2013-02-03T15:21:29.660
> 
> 标签：javascript, jquery, css

我有一个以`<ul>`. 所有图像都在`<li>`元素中，当我将鼠标移到其中一张图片上时，它应该会增长以为用户提供视觉反馈。问题是，当我只是使用 animate() 更改图像的大小时，其他图片将被推到一边，因为调整大小的图像使用更多空间。

因此我克隆了图像元素，将其浮动在原始图像上，然后调用 animate. 这带来了一个问题，即一旦克隆的图像弹出，就会调用 onMouseOut()。所以我需要一个嵌套的 hover() 函数，这就是事情变得复杂的地方。

我有两个错误，我无法找出导致它们的原因。第一个是， animate() 不会让克隆的图像超出其原始图像的右边界，第二个是，当我将鼠标快速移动到画廊上时，我会出现奇怪的增长/收缩行为。

html:

```
<ul id="gallery1" class="gallery_container">
    <li class="frame">
    <a href=""><img src="pic1.jpg" class="picture" /></a></li><li class="frame">
    <a href=""><img src="pic2.jpg" class="picture" /></a></li><li class="frame">
    <a href=""><img src="pic3.jpg" class="picture" /></a></li>
</ul> 
```

CSS：

```
.picture
{
    height: 200px;
    border: 0px;
    margin: 0px;
    padding: 0px;
}

.frame
{
    display: inline-block;
    position: relative;
    margin: 0px;
    margin-right:8px;
    padding: 0px;
}

.frame a
{
    padding: 0px;
    margin: 0px;
} 

.gallery_container
{
    height: 200px;
    width: 150%;
    position: relative;
    top: 4px;
    padding: 0px;
    margin: 0px;
} 
```

最后是让我头疼的代码：

```
$(document).ready(function()
{
var zooming = false;
var zoom = 4;
var speed_zoom = 100;

$('.gallery_container li a').hover(function(element)
{
    // disable zooming to prevent unwanted behavior
    if(zooming) return;

    zooming = true;

    $(this).after( $(this).clone(false) );
    $(this).next().attr('id', 'focus_frame');
},
function(element) // when the new element pops up, onmouseout is triggered, since the focus_frame is in front of the image
{
    $(this).next().hover(function(element)
    {
        // we need to re-position the element in the dom-tree, since it needs to grow out of a container with overflow: hidden
        $('#focus_frame img').animate({'left' : zoom * -1, 'top' : zoom * -1, 'height' : 200+(zoom*2), 'width' : $('#focus_frame img').outerWidth() + (zoom*2)}, speed_zoom);
    },
    function(element)
    {
        $(this).remove();
        zooming = false;
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:03:38.680

```
var $doc=$(document.body)
$doc.on({
"mouseenter" : function (e) {

    $doc.find("> .gallery_clone").remove();

    var $i=$(this).parent();
    $i.pos = $i.offset();
    $i.clone()
        .addClass("gallery_clone "+$i.parent().parent().attr("class"))
        .css({
            top:(Math.round($i.pos.top)-3)+"px"
            ,left:(Math.round($i.pos.left)-3)+"px"
            ,width:$i.width()
            }).appendTo($doc);

    }
},
  " ul > li > img"
).on ({

    "mouseleave" : function (e) {
       $(this).remove();
    },"> .gallery_clone"); 
```

在 CSS`.gallery_clone`中是`position:absolute`

然后我通过css制作动画`.gallery_clone:hover`，但我猜你也可以在jquery中做到这一点，在.gallery_clone编辑上添加一个mouseenter事件：我已经从我的脚本中复制/粘贴，所以你必须将此代码调整为你的html

nb：试试css anim，即使老的ie 不会动画也值得；（我还为同一个画廊制作了几乎纯 CSS 的灯箱效果 - 稍后会发布，现在还没有准备好发布插件抱歉）

nb2：那部分`"+$i.parent().parent().attr("class")`是因为在 cms 中他们可以选择图库背景颜色，因此将该类转发背景颜色和其他图库样式添加到克隆（即您不应该需要它）

# macos - NSTableView 不会压缩

> ID：14673997
> 
> 赞同：4
> 
> 时间：2013-02-03T15:22:17.927
> 
> 标签：macos, cocoa, nstableview, autolayout

我看到一种带有`NSTableView`/`NSOutlineView`和自动布局的奇怪错误。

当我在`NSOutlineView`我的 nib 中添加一个并运行应用程序时，它会根据给定的约束按预期变大，但它永远不会小于它在 nib 中的大小。就好像它有一个不可见的“大于或等于”约束。

我已经测试了一些变体，似乎`NSTableView`和`NSOutlineView`（在自动滚动视图内）都以这种方式运行，但没有内容的普通滚动视图却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T21:50:59.407

[请参阅 NSTableColumn 文档](https://developer.apple.com/library/mac/documentation/cocoa/reference/applicationkit/classes/NSTableColumn_Class/Reference/Reference.html)，其中说明

> minWidth 返回表格列的最小宽度。(CGFloat) minWidth 返回值 表格列的最小宽度，以磅为单位。**默认值为 10.0。**