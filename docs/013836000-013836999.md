# StackOverflow 问答 13836000-13836999

# c++ - 唯一的 10 位序列 ID - 200 个 ID/秒

> ID：13836012
> 
> 赞同：0
> 
> 时间：2012-12-12T08:52:57.170
> 
> 标签：c++

我需要在 C++ 中生成唯一 ID。我正在查看每秒近 200 个 ID，这些 ID 至少在接下来的 30 天内不应重复。ID 的长度应为 9 或 10 位。如果我的服务重新启动或我的机器重新启动，这些也不应该重复。

我查看了以下链接 [生成唯一序列 ID](https://stackoverflow.com/questions/6368503/generate-unique-sequence-id)

和我的要求差不多。但我遇到的那段代码的问题是 ID 长度。有时它会生成低至 2 位数的 ID。我向一名测试司机证实了这一点。

您的意见将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:04:25.917

作为第一个近似值，您可以尝试这样的事情：

```
unsigned long genUniqueID()
{
  const unsigned long MIN_ID = 1e8; // 9 digit number
  const unsigned long MAX_IDs_SEC = 200;
  static unsigned long nextID = MIN_ID + getSecondsSinceStartOfMonth() * MAX_IDs_SEC;
  return nextID++;
} 
```

显然有两个常数需要调整。如果在程序不间断运行期间每秒生成的平均 ID 超过`MAX_IDs_SEC`，则此解决方案将不起作用，因此您需要确保该值足够高，否则会过于频繁地调用此函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:01:47.833

如果您希望能够每秒生成 200 个 ID，并且希望继续这样做（不重复 ID），则需要能够生成 30 * 24 * 60 * 60 * 200 = 518,400,000 个 ID。如果 ID 至少应为 9 位长，则每个 ID 应（假设您使用十进制表示）大于或等于 100,000,000（最小的 9 位数字）。

因此，理想情况下，您应该有一个函数返回一个类型的值，该类型可以保存 100,000,000 到 618,400,000 之间的值。这两个值都小于最大的无符号 32 位值 (4,294,967,295)，因此您可以使用它：

```
static uint32_t getNextId() {
  static uint32_t lastId = 99999999;
  return ++lastId;
} 
```

继续调用这个函数，它会在每次调用时产生一个新的 ID，如果你每秒调用 200 次，它们不会在 30 天内重复。

如果您的进程在这 30 天内启动和停止，只需在进程停止时将上次使用的 ID 保存到文件中，并在进程再次启动时恢复 ID。

# java - org.svenson.JSONProperty 动态排除属性

> ID：13836014
> 
> 赞同：0
> 
> 时间：2012-12-12T08:53:07.757
> 
> 标签：java, json, properties, svenson

我有一个使用 CouchDB 的 Java 应用程序。为了从中解析 JSON，我使用 lib: **com.google.code.svenson v.1.3.8** 但是，我遇到了问题。我收到 JSON，并且我想排除其中的一个属性。例子：

```
{"groups":[], "norms":[], "unit":null, "_attachments":{
    "revision/1-b7c9e44edecb4c6509ce75d84d3aa06d":{
        "content_type":"application/json",
        "revpos":2,
        "digest":"md5-qPtWsDPF7vQANTQvQzmjrA==",
        "length":684,
        "stub":true
    }
}} 
```

我需要排除**“_attachments”**字段和所有内部。但问题是，属性**修订**是动态的。它一直在变化。而且我的代码不起作用：

```
public class TestDTO {

    private String attachment;
    private String revision;
    private String contentType;
    private String revpos;
    private String digest;
    private String length;
    private String stub;

    @JSONProperty(ignore = true, value = "_attachments")
    public void setAttachment(String attachment) {
        this.attachment = attachment;
    }

    public String getRevision() {
        return revision;
    }

    @JSONProperty(ignore = true, value = "revision/")
    public void setRevision(String revision) {
        this.revision = revision;
    }
//other get/set methods 
} 
```

```
org.svenson.JSONParseException: Cannot set property revision/1-d009693fd000f179495cb3f9087109b6 on class java.lang.String
    at org.svenson.JSONParser.parseObjectInto(JSONParser.java:589)
    at org.svenson.JSONParser.parseObjectInto(JSONParser.java:617)
    at org.svenson.JSONParser.parse(JSONParser.java:396)
    at org.svenson.JSONParser.parse(JSONParser.java:341)
    at com.foo.core.api.services.bar.BarObjectParser.parseToObject(BarObjectParser.java:47)
    at com.foo.core.api.services.bar.task.ChangesProcessorTask.persistObject(ChangesProcessorTask.java:78)
    at com.foo.core.api.services.bar.task.ChangesProcessorTask.processChange(ChangesProcessorTask.java:65)
    at com.foo.core.api.services.bar.task.ChangesProcessorTask.processChanges(ChangesProcessorTask.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:264)
    at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:46:50.887

是的，你可以做到。您只需要在业务对象中将地址列表声明为临时属性。

然后将以下代码添加到您的 jsonConfig：

```
JsonConfig jsonConfig = new JsonConfig();
jsonConfig.setIgnoreTransientFields(true); 
```

# android - 在没有用户确认的情况下从 java 代码安装 apk

> ID：13836017
> 
> 赞同：3
> 
> 时间：2012-12-12T08:53:14.387
> 
> 标签：android, sdk, installation, apk

我想从java代码安装一个apk文件。我想默默地做到这一点，而不需要用户采取任何行动。我试试这段代码..

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(files[i].toString())), "application/vnd.android.package-archive");
startActivity(intent); 
```

它可以工作，但希望用户确认安装。我试试

```
Process p;
p = Runtime.getRuntime().exec("pm -s install "+files[i].toString()+"\""); 
```

但不起作用我已授予这些权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>     
<uses-permission android:name="android.permission.INTERNET" />    
<uses-permission android:name="android.permission.INSTALL_PACKAGES" /> 
<uses-permission android:name="android.permission.DELETE_PACKAGES" /> 
```

# java - 与操作员打印语句？: 导致意外输出

> ID：13836018
> 
> 赞同：0
> 
> 时间：2012-12-12T08:53:23.403
> 
> 标签：java, operators

我必须根据布尔状态创建一个输出，例如

```
 String smily = null;
  StringBuffer buff = new StringBuffer();
  buff.append(", " + smily == null ? ":)" : ":("); //$NON-NLS-1$

  System.out.println(buff.toString()); 
```

问题是字符串创建语句

```
 ", " + smily == null ? ":)" : ":(" 
```

我在 2 个不同的 eclipse 环境中测试了它（也可能是 2 个不同的 java 版本，我没有检查），结果不同。

**结果1：**

> :(

**结果 2：**

> 错误的：（

当然，如果我添加括号它正在工作

```
 buff.append(", " + (smily == null ? ":)" : ":(")); //$NON-NLS-1$ 
```

**预期结果：**

> , :)

**请有人向我解释一下，为什么java会这样解释语句？**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:12:56.220

如果您检查运算符优先级（请参阅[本教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)），那么您会注意到加法 ( ) 位于`+`相等 ( `==`) 之前。换句话说，Java 将首先评估`", " + smily`=>`", null"`在评估相等性之前，因此`", " + smily == null`评估为 false，因此三元运算符评估为`":("`。

顺便说一句：您可以通过在将字符串添加到之前不连接字符串来避免这种情况`StringBuffer`（StringBuffer 的全部目的是使连接更便宜）：

```
String smily = null;
StringBuffer buff = new StringBuffer();
buff.append(", ");
buff.append(smily == null ? ":)" : ":("); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T08:54:22.337

表达式`", " + smily == null ? ":)" : ":("`被评估为`(", " + smily) == null ? ":)" : ":("`

这解释了你的结果 1。老实说，我不知道为什么结果 2 是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T08:59:44.810

`StringBuffer.append()`接受一个`String`参数。所以当你把它不带括号

```
buff.append(", " + smily == null ? ":)" : ":(") 
```

在评价时会`", " + null`。因此，当评估发生时，它总是错误的。

至于为什么相同的代码会返回两个结果，我只能假设使用了两个不同的 Java 版本，并且他们对这种情况的处理方式不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:58:18.310

```
String smily = null;
StringBuffer buff = new StringBuffer();

  if(smily == null){
    buff.append(", " +  ":)") ; //$NON-NLS-1$
     }else{
        buff.append(", " +   ":(") ; //$NON-NLS-1$

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:26:15.583

**试试这个.....................**

`buff.append(", " + smily == null ? ":)" : ":(");`

**-**在上面的陈述中，您**没有提到**要以正确的`smily == null ? ":)" : ":("`方式进行评估。

**-**要解决此问题，您必须使用**BODMAS**规则，以下**内容始终按照从左到右列出的方式进行评估。**

`Bracket`

`Power`

`Division and Multiplication`

`Addition and Substraction`

**-**使用括号括起来`smily == null ? ":)" : ":("`

**例如：**

```
public class Test {

    public static void main(String[] args){

        String smily = null;
          StringBuffer buff = new StringBuffer();
          buff.append(", " + (smily == null ? ":)" : ":(")); //$NON-NLS-1$

          System.out.println(buff.toString());
    }

} 
```

**输出：** `, :)`

# java - 在不停用窗口的情况下捕获 JFrame 中的所有事件

> ID：13836021
> 
> 赞同：9
> 
> 时间：2012-12-12T08:53:49.597
> 
> 标签：java, swing, events, event-handling

我正在尝试开发类似远程桌面/ VNC 客户端的东西。我有必要捕获客户端窗口中的所有事件。我正在使用的方法是覆盖以下`processEvent`方法`JFrame`：

```
@Override
protected void processEvent(AWTEvent e) {
    ...
} 
```

`Windows`但是，在键或窗口等事件`Alt+Tab`被停用时：

```
...    
00000191 KEY_PRESSED,keyCode=524,keyText=Windows,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_LEFT,rawCode=91,primaryLevelUnicode=0,scancode=91,extendedKeyCode=0x20c 
00000192 KEY_RELEASED,keyCode=524,keyText=Windows,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_LEFT,rawCode=91,primaryLevelUnicode=0,scancode=91,extendedKeyCode=0x20c 
000000ce WINDOW_DEACTIVATED,opposite=null,oldState=0,newState=0 
... 
```

如何在此类事件中保持窗口处于活动状态？

我*更喜欢*纯 Java 解决方案。如果没有纯 Java 解决方案，有人可以指出我的 JNA 解决方案（或任何其他解决方案）吗？

*EDIT1：* *解决了窗口停用的模糊术语“焦点”*强调非纯 Java 解决方案是可以接受的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:57:43.947

1.) JNA 附带了一个几乎可以满足您需求的示例：

[http://java.net/projects/jna/sources/svn/content/trunk/jnalib/contrib/w32keyhook/KeyHook.java](http://java.net/projects/jna/sources/svn/content/trunk/jnalib/contrib/w32keyhook/KeyHook.java)

为了阻止一个键，只需返回 1 而不是调用`CallNextHookEx`-cf。[MSDN](http://msdn.microsoft.com/en-us/library/ms644985%28VS.85%29.aspx)文档。

2.) [JNativeHook](http://code.google.com/p/jnativehook/)允许您挂钩到全局事件处理，但现在没有办法阻止事件被传递 - 例如，Windows 键仍将激活开始菜单。但是它仍然值得一看，因为它的开销要少得多，并且您可以修改它（从`CallNextHookEx` [这里](http://code.google.com/p/jnativehook/source/browse/trunk/src/native/windows/NativeThread.c)开始）以按照您想要的方式运行。虽然它是根据 GPL 许可的。

3.) 另一种干净的方法是切换到 SWT 并使用[SWT Win32 Extensions](http://feeling.sourceforge.net/)来拦截键盘事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:36:50.587

您能否将窗口始终设置为可聚焦（[Window.setFocusableWindowState](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Window.html#setFocusableWindowState%28boolean%29)），因为 JFrame 确实从 Window 继承了该方法。像这样简单的东西：`window.setFocusableWindowsState(true)`. 在关键事件侦听器内部调用：（此代码已修改，但最初来自[JFrame 的 Unresponsive KeyListener](https://stackoverflow.com/questions/286727/java-keylistener-for-jframe-is-being-unresponsive)）

```
public class MyFrame extends JFrame { 

    private class MyDispatcher implements KeyEventDispatcher 
    {
        private JFrame frame;

        public MyDispatcher(JFrame jf)
        {
            this.frame = jf;
        }

        public boolean dispatchKeyEvent(KeyEvent e) 
        {
            frame.setFocusableWindowState(true);
            return false;
        }
    }

    public MyFrame() 
    {
        add(new JTextField());
        KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
        manager.addKeyEventDispatcher(new MyDispatcher(this));
    }

    public static void main(String[] args) 
    {
        MyFrame f = new MyFrame();
        f.pack();
        f.setVisible(true);
    }
} 
```

我没有测试这段代码，但我希望至少这个想法能让你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:38:05.610

您可以使用WindowListener。希望这将有助于捕获事件。还有windowfocuslistener，windowstatelistener。

```
public class WindowListenerImpl implements WindowListener(){
     @Override
                        public void windowOpened(WindowEvent windowevent) {
                           //urs windowevent to get source.

                        }

                        @Override
                        public void windowIconified(WindowEvent windowevent) {
                           //urs windowevent to get source.

                        }

                        @Override
                        public void windowDeiconified(WindowEvent windowevent) {
                            //urs windowevent to get source.

                        }

                        @Override
                        public void windowDeactivated(WindowEvent windowevent) {

                             //urs windowevent to get source.
                        }

                        @Override
                        public void windowClosing(WindowEvent windowevent) {
                           //urs windowevent to get source.

                        }

                        @Override
                        public void windowClosed(WindowEvent windowevent) {
                             //urs windowevent to get source.

                        }

                        @Override
                        public void windowActivated(WindowEvent windowevent) {
                           //urs windowevent to get source.

                        }
    public WindowEvent{
    public static void main(String[] args){
    WindowListenerImpl  listenerImpl=new WindowListenerImpl ();
    new JFrame.addWindowListener(listenerImpl);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T23:31:20.080

您可以设置自定义 FocusManager 并覆盖 dispatchEvent 方法或使用 Toolkit.getDefaultToolkit().addAWTEventListener(..)。但是，这不会捕获操作系统捕获的 keyEvents，但是如果您在工具包中注册，您仍然会收到诸如重绘之类的事件。

# java - 将数据从一个活动传递到android应用程序中的下一个活动

> ID：13836022
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:53:52.657
> 
> 标签：java, android, android-intent

我尝试开发一个 android 应用程序。在这里我必须开发忘记密码选项。我必须单击忘记密码 textview 意味着它进入下一个活动。下一个活动必须输入该注册用户的用户名。我必须检查用户名在 mysql 数据库中有效或无效。用户名有效意味着它是转到下一个活动。下一个活动已经输入了一些文本（密码）字段。在这里我必须单击更新按钮意味着该用户的密码已更新。

在这里，我已经完成了用户名有效和无效的活动。但是我如何将用户名数据传递给下一个活动并更新这些特定用户的密码。

在这里，我必须从用户名（基于第一个活动）更新密码（第二个活动）。我该如何开发这些。请帮助我。

这是我的第一个活动：

```
 PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("Username");//Define the variable name in the web service method
    unameProp.setValue(login);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);
     ----
   -----
   if(status.equals("Valid Username"))
           {

               Intent intent = new Intent(Login.this,RetailerActivity.class);
               intent.putExtra("Username", login);
               startActivity(intent);
           } 
```

下一个活动代码如下：

```
 btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
             Intent in = getIntent();
       EditText userPassword = (EditText) findViewById(R.id.edittext);
             String user_Name = userPassword.getText().toString();
             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("userPassword");//Define the variable name in the web service method
            unameProp.setValue(user_Name);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable
            request.addProperty(unameProp);
            PropertyInfo idProp =new PropertyInfo();
            idProp.setName("Username");//Define the variable name in the web service method
            idProp.setValue();//Define value for fname variable
            idProp.setType(String.class);//Define the type of the variable
            request.addProperty(idProp); 
```

我如何将用户名值从第一个活动传递到下一个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:54:49.737

假设您将一个`string`值从一个传递`Activity`到另一个，在第一个活动中：

```
 String lID = "Your Text here"; 
    Intent i= new Intent(<ClassName>.this, <Navigate to Class>.class)
            i.putExtra("lID", lID); // send to another activity as key-value pair
          startActivity(i); 
```

在第二个`Activity`中，获取`string`值`OnCreate()`如下：

```
 Intent idValues = getIntent();
 String seq = idValues.getStringExtra("lID"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:58:09.943

您应该在添加新问题之前进行搜索：

看这里：[如何从 Android 上的意图中获取额外数据？](https://stackoverflow.com/questions/4233873/how-to-get-extra-data-from-intent-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:07:33.240

**-**`Intent`与`putExtra()`和`getExtras()`方法一起使用。

**例如：**

**活动一：**

```
Intent i = new Intent(Activity_A.this, Activity_B.class);
i.putExtra("username",login);
startActivity(i); 
```

**活动 B：**

```
String userName = getIntent().getExtras().getString("username"); 
```

# javascript - javascript 删除功能在 IE 中不起作用

> ID：13836032
> 
> 赞同：0
> 
> 时间：2012-12-12T08:54:22.960
> 
> 标签：javascript, forms

我正在使用动态文本框。当有人点击`"Add Option"`然后文本框将被动态添加。并且当点击`"Remove"`文本框时将被动态删除。它的所有代码在所有浏览器上都可以正常工作，但`"Remove"`功能在 IE 7 中不起作用

请帮我解决这个问题

这是javascript代码

```
function addFormField()
{
  var optionId = $("#optionId").val();
  $("#pollOption").append("<p id='row" + optionId + "'><label for='txt" + optionId + "'>Option : <input type='text' size='20' name='option_"+optionId+"' id='option_"+optionId+"' name='option_"+optionId+"' class='text_field pollOption' validate='required:true'  \/> <a href='#' onclick='removeFormField(\"#row" + optionId + "\"); return false;'>Remove<\/a><\/br><\/p>");
  optionId = (parseInt(optionId) + 2) - 1;
  $("#optionId").val(optionId);
}

function removeFormField(optionId)
{
  $(optionId).remove();
  optionId = (parseInt(optionId) + 1) - 2;
}
$.validator.setDefaults(
{
  errorClass:"fontColorRed",
  submitHandler: function()
  {
    setPoll();
    return false;
  }
}); 
```

HTML 代码

```
<div class="pollContent">
        <div class="pollQuestionLable">
          Your poll Question </div>
        <div class="pollQuestionText">
          <input type="text" id="pollQuestion" class="text_field" name="pollQuestion" />
          <br/><a href="javascript:addFormField();">Add Options</a>
        </div>
        <div class="clearBoth"></div>
        <div class="pollQuestionLable">
          Poll Option
        </div>
        <div class="pollQuestionText">
          <div id="pollOption">
            <input type="hidden" id="optionId" value="3" />
            <p id='row1'>Option : <input type="text" id="option_1" name="option_1" class="text_field pollOption" validate='required:true' /></p>
            <p id='row2'>Option : <input type="text" id="option_2" name="option_2" class="text_field pollOption" validate='required:true' /></p>
          </div>
          <span id="ii" style="float:right">
            &nbsp;&nbsp;<input type="image" src="{$GLOBLE_PATH_REL}/images/share_bt.gif" />
          </span>
          <div class="wallPostToIcon4" id="wallPostToIcon4">
            <span class="sharingLockLeft" id="share" ><img src="{$GLOBLE_PATH_REL}/images/lock13.jpeg" border="0" alt="Share1" title="Share" /></span>
            <span class="sharingLockRight">&#9660;</span>
          </div>
          <div class="wallPostToPoll" id="wallPostToPoll">
            <ul>
              <li id="wallEveryOnePoll" value="1">Everyone</li>
              <li id="wallAllFriendsPoll" value="2">Friends of Friends</li>
              <li id="wallOnlyFriendsPoll" value="3">Friends Only</li>
              <li id="wallCustomizePoll" value="4">Customize</li>
             </ul>
          </div>
        </div>
        <div class="clearBoth"></div>
      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:58:21.240

我不确定，但您的问题可能来自您附加到的无效 html 代码`#pollOption`。我指的是`<label>`您打开但从不关闭的元素。可能还有其他一些我没有看到的东西。

这里的根本问题是我没有看到那些。我看不到它们，因为您的代码几乎不可读，因此容易出现各种错误。（在您问题的评论部分也很明显，人们谈论“哦，我错过了......”）。

我不想听起来刻薄，但你的代码有异味。（这不是冒犯性的：[链接](http://en.wikipedia.org/wiki/Code_smell)）。

```
window.optionId = 2;

window.addFormField = function() {
    optionId += 1;
    var thisOption = $('<p>', {
        'id': 'row' + optionId
    }).append(
        $('<label>').attr({
            'for': 'txt' + optionId
        }).html('Option : '), 
        $('<input>').attr({
            'type': 'text',
            'size': 20,
            'name': 'option_' + optionId,
            'class': 'text_field pollOption',
            'validate': 'required:true'
        }), 
        $('<a>').attr({
            'href': '#'
        }).html('Remove').click(function() {
            thisOption.remove();
        })
    ).appendTo('#pollOption');
};

$.validator.setDefaults(
{
  errorClass:"fontColorRed",
  submitHandler: function()
  {
    setPoll();
    return false;
  }
}); 
```

我重构了你的`addFormField`功能：

*   我让 jQuery 构造元素，这样就不会生成或使用无效标记。
*   我嵌入了 remove 函数，所以我可以直接引用我想要删除的元素（无需在 DOM 中搜索它）。
*   `optionId`现在是一个`Number`变量，您可以简单地递增（无需任何解析）。

由于封装问题（无处不在的全局变量！）和其他问题，这个重构的代码肯定仍然有味道，但我认为它更具可读性并且更健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:10:12.480

我不明白你的代码中的几个部分。但我建议，如果您在删除 IE 中的元素时遇到问题，请尝试一下。

[描述说它有效。](https://stackoverflow.com/questions/3439822/dom-element-delete-promlem-i-ie6)

并且始终可以选择将该 div 的 innerHTML 设置为“”（空字符串）。我知道那不好，但可以尝试的最后一件事。

# android - 线性布局元素及其位置

> ID：13836033
> 
> 赞同：0
> 
> 时间：2012-12-12T08:54:24.543
> 
> 标签：android, android-layout, android-linearlayout

我有一个带有 2 个元素的 linearLayout，一个 textView 和一个 imagebutton，我想在 linearlayout 中居中 textView 和 imageButto 的右对齐，但它们都在左侧。

```
<LinearLayout 
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="50dip"
    android:background="@color/usualBike"
>    
    <TextView
        android:id="@+id/usesLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@color/white"
        android:text="@string/tituloUsos"
        android:textSize="30dip"
        android:layout_gravity="center"
        android:textStyle="bold"
    />   

    <ImageButton
        android:id="@+id/disconnect"
        android:background="@null"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:src="@drawable/icon_logout" />

</LinearLayout> 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:01:08.203

你有讲究`LinearLayout`吗？如果不是，为什么不尝试`RelativeLayout`这样：

```
 <RelativeLayout 
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:background="@color/usualBike"
    >

        <TextView
            android:id="@+id/usesLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:gravity="center"
            android:text="@string/tituloUsos"
            android:textColor="@color/white"
            android:textSize="30dip"
            android:textStyle="bold" />

        <ImageButton
            android:id="@+id/disconnect"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:background="@null"
            android:gravity="right"
            android:src="@drawable/icon_logout" />

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:56:18.883

尝试 layout_gravity 而不是重力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:08:14.303

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="50dip"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/usesLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:gravity="center"
        android:text="tituloUsos"
        android:textSize="30dip"
        android:textStyle="bold" />

    <ImageButton
        android:id="@+id/disconnect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="20dp"
        android:layout_toRightOf="@+id/usesLabel"
        android:background="@null"
        android:gravity="right"
        android:src="@drawable/ic_launcher" />

</RelativeLayout>

</RelativeLayout> 
```

# android - Android上的SQLite查询错误

> ID：13836035
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:54:27.430
> 
> 标签：android, sqlite

我的代码：

```
Cursor mCursor = mDB.query(true, DB_TABLE, new String[] {NUMBER, INVOICEID, SNAME, NUMBERPHONE, ADDRESS, URL, STATUS, IDDELIVER }, IDDELIVER + "='" + iddeliver+"'" + "AND"+ STATUS+"='Chuagiao'", null, null, null, null, null); 
```

我不虚张声势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:57:44.430

尝试使用这个：

```
Cursor mCursor = mDB.query(true, DB_TABLE, new String[] {NUMBER, INVOICEID, SNAME, NUMBERPHONE, ADDRESS, URL, STATUS, IDDELIVER }, IDDELIVER + "='" + iddeliver+"'" + " AND "+ STATUS+"='Chuagiao'", null, null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:00:00.490

我想你忘记了`"AND"`

您的查询应该是这样的：`"iddeliver AND STATUS='Chuagio'`

目前它看起来像这样：`"iddeliverANDSTATUS='Chuagio'`

# jvm - Java虚拟机（JVM）和Java中间件有什么区别？

> ID：13836039
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:54:38.957
> 
> 标签：jvm, middleware

Java 虚拟机 (JVM) 和 Java 中间件之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:00:01.573

JVM 是一个执行 Java（以及如今的其他几种语言）字节码的运行时。

Java 中间件是 EJB、RMI、Corba 等技术的框架。本质上，这些技术可能与 Java 没有任何关系，但受 Java 支持。

# sitecore - Sitecore：用子项填充我的模板内容占位符

> ID：13836040
> 
> 赞同：1
> 
> 时间：2012-12-12T08:54:43.740
> 
> 标签：sitecore

有一个分配给“主页”的模板，其中包含标题、菜单（带有子项链接）和页脚的不同子布局/渲染，以及一个“内容”占位符。结构如下：

```
 Home
   |--- SubItem1 (Linked to from my menu)
   |--- SubItem2 (Linked to from my menu)
   |--- SubItem3 (Linked to from my menu) 
```

通过我的菜单导航到“主页”模板的“内容”占位符时，我将如何用相应的子项填充它。（注意我也想为子项目维护我的主/主模板）

编辑：-我想要一个“站点范围”模板（分配给我的主页的模板），并且当子项目导航到时，我的子项目适合该模板的“内容”占位符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:08:47.570

如果我正确理解了您的问题，那么您需要相当于 ASP.Net 母版页吗？您是否参加过 Sitecore 开发人员培训，因为这涵盖了所有内容？您是否通过了 Sitecore 认证并且可以访问[Sitecore 开发者网络](http://sdn.sitecore.net)？如果您还没有参加培训，那么我建议这是您的第一步。

我不知道有什么文章一步一步地涵盖了基础知识，你可能想通读一下：

[学习 Sitecore：Sitecore 中的简单信息站点](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2010/03/Sitecore-simple-layout.aspx)
[Sitecore Presentation Reference](http://sdn.sitecore.net/Reference/Sitecore%206/Presentation%20Component%20Reference.aspx)
[Sitecore Presentation Cookbook](http://sdn.sitecore.net/Reference/Sitecore%206/Presentation%20Component%20Cookbook.aspx)

在不知道您对 Sitecore 和相关术语有多少经验的情况下，我正在努力解释实现您想要的所需的所有步骤，但您想要实现的正是 Sitecore 的设计目标。

# css - 超大块元素的保证金问题

> ID：13836044
> 
> 赞同：5
> 
> 时间：2012-12-12T08:54:54.113
> 
> 标签：css

**边距问题**
我正在使用超大块元素（宽度和高度均为 2000-4000 像素），并且这些元素中的大多数都会溢出窗口/视口。这很好，是我的应用程序的预期效果。但是，当我将边距应用于所有边的元素时，比如 40px，它只应用于顶部、左侧和底部。滚动后，最右侧边缘与窗口边缘齐平。我希望在块元素的所有侧面都有一个均匀的边距。

**代码**
见下文或查看简化测试用例的 [这个 jsFiddle 。](http://jsfiddle.net/utmkq/)

```
<!-- HTML -->

<div></div> 
```

```
/* CSS */

* {
    margin: 0;
    padding: 0;    
}

div {
    background: #000;
    height: 3000px;
    margin: 40px;
    width: 3000px;    
}​ 
```

**我尝试**
过的方法我已经尝试过上述方法，我最初认为它会起作用，但它没有。我还尝试将 40px 的填充应用于 body 元素，并从 div 中完全删除边距，但得到了相同的结果。对于应用了填充的包含元素也是如此。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:08:21.060

如何让你的 div 成为内联块元素。

添加`display:inline-block`到您的 div 中，这应该可以解决问题。

查看更新的小提琴 -[**演示**](http://jsfiddle.net/aKSR4/)

# iphone - 当我在 iPhone 上按下主页按钮时，我的应用程序会最小化而不是关闭

> ID：13836048
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:55:09.613
> 
> 标签：iphone, objective-c, xcode, xcode4

当我按下主页按钮时，我的应用程序会最小化而不是关闭。当我再次启动它时，应用程序会启动我在其上的最后一个视图控制器，而不是返回到第一个视图控制器。这是我的故事板：

-> A -> B -> C

在“C”中按主页并再次启动时，应用程序停留在“C”而不是“A”

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)dealloc {
    [super dealloc];
}
- (void)viewDidUnload {
    [self setEmail:nil];
    [super viewDidUnload];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:01:09.410

当您关闭应用程序时，它不会杀死它，它只是暂停它。除非您在关闭它时设置了将其杀死的选项。

转到 .plist 中的设置并设置

`Application does not run in background`至`YES`

这也是`UIApplicationExitsOnSuspend`关键

另外，请阅读[Apple 文档以了解应用程序流程](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# android - 如何在android中使用findDrawableByLayerId？

> ID：13836050
> 
> 赞同：0
> 
> 时间：2012-12-12T08:55:24.553
> 
> 标签：android, drawable, layer-list

我想将 setBounds() 用于图层列表中的特定项目，该项目用作按钮的背景。但我无法让 LayerDrawable 对象调用 findDrawableByLayerId()。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:42:07.810

使用此方法在新的 layerdrawable 上创建 :) 我无法使用 findDrawableByLayerId() :(

```
@Override
public void setBackgroundDrawable(Drawable background) {
    Log.d("button","setting new background  ");
    Drawable[] layers = new Drawable[5];
    Resources resources = getResources();

    layers[0] = resources.getDrawable(R.drawable.outer_rectangle);
    layers[1] = resources.getDrawable(R.drawable.inner_rectangle);
    layers[2] = resources.getDrawable(R.drawable.upper_ovel);
    layers[3] = resources.getDrawable(R.drawable.gradient_fill);
    layers[4] = resources.getDrawable(R.drawable.lower_ovel);

    LayerDrawable layerDrawable = new LayerDrawable(layers);

    layerDrawable.setLayerInset(0, 0, 0, 0, 0);
    layerDrawable.setLayerInset(1, 3, 3, 3, 0);
    layerDrawable.setLayerInset(2, 3, 15, 3, 25);
    layerDrawable.setLayerInset(3, 3, 23, 3, 0);
    layerDrawable.setLayerInset(4, 4, 60, 4, -5);

    super.setBackgroundDrawable(layerDrawable);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-15T08:57:26.700

如果你想使用`findDrawableByLayerId(int id)`，你应该`setId(int index, int id)`首先做，如果不是，id总是-1。

# c# - 当人们更喜欢使用 JavaScript 而不是 C# 来编写 Windows8 应用程序时，它是否会带来性能或可访问性优势？

> ID：13836052
> 
> 赞同：3
> 
> 时间：2012-12-12T08:55:28.833
> 
> 标签：c#, javascript, performance, windows-8

如果有人可以在 JavaScript（使用 HTML）和 C#（使用 XAML）之间进行选择来编写 Windows 8 应用程序，他/她应该更喜欢哪一个？它是否提供任何性能优势，或者 C# 是否对 Windows8 API 和系统调用具有更大的可访问性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:43:15.293

恐怕对OP有些困惑。我们谈论的是为 Windows 8 开发应用程序。您可以使用多种语言堆栈来面向 Windows 8。您可以使用 XAML/C#、XAML/C++、DirectX/C++ 或 HTML/JavaScript。问题是关于两个最流行的堆栈（XAML/C# 和 HTML/JavaScript）中的哪一个具有更好的性能和更好地访问 Windows API。

我是 Microsoft 的开发人员宣传员，这是我收到的最常见问题。[我在codefoster.com/Which-Windows-8-Language-Stack-Should-I-Choose](http://codefoster.com/Which-Windows-8-Language-Stack-Should-I-Choose)有一篇文章涉及部分问题，但不是全部。

首先，关于对 Windows API (WinRT) 的访问，所有语言堆栈都是相同的。整个 WinRT 对象空间实际上被投影到不同的语言中，因此在任何语言中，您都可以调用 Windoww API，它们总是以“Windows.”开头。

投影也遵循投影到的每种语言的约定，因此在 C# 中您可以调用 Windows.UI.Popups.MessageDialog("Hello World").ShowAsync()，而在 JavaScript 中您可以调用 Windows。 UI.Popups.MessageDialog("Hello World").showAsync()。同样，每种语言都使用自己的约定来处理异步。在 C# 中，您将使用 async/await 模式，但在 JavaScript 中，您将使用 Promise 模式。

其次，关于性能问题。由于语言之间的自然和剧烈差异，语言堆栈之间将存在差异。要知道的重要一点是，对于所有内置控件和场景，所有语言堆栈都旨在满足*最低*性能阈值。老实说，我认为您无需担心任何语言堆栈在性能方面会落后，除非您有一些非常有趣的事情正在发生，在这种情况下您应该具体说明它是什么。

每个语言堆栈也有自己的优点和缺点。如果您使用的是 C#，那么您有一套很好的 .NET 框架，很多人都非常熟悉。它也是一种设计精良且富有表现力的语言。此外，XAML 是一种非常强大的 UI 语言。如果您使用的是 JavaScript，那么您的代码与广大互联网的其余部分相同，并且可以共享大量代码。你可以找到 JavaScript 库来做任何你想做的事情，你可以在你的 Windows 8 应用程序中使用其中的任何一个。如果您使用 C++，那么您可以访问现有的 C 和 C++ 组件并访问 DirectX 以制作 3D 应用程序。

请记住，您可以使用 C# 或 C++ 创建混合应用程序来创建 WinRT 组件，然后您可以在任何语言堆栈中使用这些组件 - 包括 JavaScript！因此，如果您了解 C# 并想用 C# 编写业务逻辑，则可以这样做，然后在 JavaScript 应用程序中使用该逻辑。

最后，我认为决定选择哪个堆栈的两个最大因素是 1）您已经最熟练的堆栈和 2）您*喜欢*使用的堆栈。这些很重要，可能会带你完成一个你本来会放弃的项目。

我希望这有助于您做出决定。如果您在制作 Windows 8 应用程序时需要任何帮助，请访问[codefoster.com](http://codefoster.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:59:37.463

您正在将脚本语言与本机（编译）语言进行比较。

与 C# 相比，JS 对系统的访问非常有限。但是话又说回来，根据您要应用程序执行的操作，它可能是最佳选择。

# antlr - 定义一个名为 'message' 的终端来处理 "\n" ，噩梦..

> ID：13836056
> 
> 赞同：1
> 
> 时间：2012-12-12T08:55:46.650
> 
> 标签：antlr, antlr3, antlrworks, antlrv3ide

我使用所谓的定义

```
message : '"'.* '"'; 
```

代表“”中的每一个小东西都是消息，终端它与“lkjaldjfa kajf”很常见，但是当我遇到“\n”时，它变成了一场噩梦——这导致了不定式循环，吞噬了我的记忆。

我不知道为什么..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:34:41.190

> ...它变成了一场噩梦——导致不定式循环，吞噬我的记忆。

很难在无法复制的情况下对此发表评论。

但是，*解析器*规则：

```
message : '"' .* '"'; 
```

匹配**token** `'"'`后跟零个或多个以**token**结尾的其他**标记** `'"'`。

除非您有充分的理由将其保留为解析器规则（那时我想听听），否则将其更改为*词法分析器*规则：

```
Message : '"' .* '"'; 
```

匹配该**字符** `'"'`后跟零个或多个以该**字符**结尾的其他**字符** `'"'`。

* * *

另请参阅：[ANTLR 中解析器规则和词法分析器规则之间的实际区别？](https://stackoverflow.com/questions/4297770/practical-difference-between-parser-rules-and-lexer-rules-in-antlr)

# java - 在两个列表中拆分 Iterable

> ID：13836057
> 
> 赞同：0
> 
> 时间：2012-12-12T08:55:50.270
> 
> 标签：java, list, collections, loops, iterable

我从一个包含两种类型数据的方法中接收到一个 Iterable。

1.  带标签的 A 型`"0"`
2.  带标签的 B 型`"1"`

因此，我能够检测到哪个元素属于哪个类型，然后尝试为每个元素创建一个 ArrayList 并将相应的数据转储到其中。

```
List<TextPair> valuesA = new ArrayList<TextPair>();
List<TextPair> valuesB = new ArrayList<TextPair>(); 
```

这是我尝试这样做的方法：

```
for (TextPair value : values) {
    if(value.getSecond().toString().equals("0"))
        valuesA.add(value);
    else 
        valuesB.add(value);
} 
```

问题是第一个 List 似乎被第二个 List 的值覆盖了。我怎么能告诉这个？因为当我查看 valuesA 和 valuesB 中的元素时，它们是相同的，并且两个值都带有标签“1”。我丢失了所有带有“0”标签的值。我不知道为什么会发生这种情况，也找不到解决方法。

我的最终目标是将标签“0”的每个元素与标签“1”的元素进行比较。我尝试在不拆分可迭代对象的情况下执行此操作，但由于我只能向前遍历可迭代对象，因此我只能将第一个元素与“0”进行比较，并且由于无法迭代回来而丢失了其余元素。由于 Iterable 是从框架（Hadoop）提供的，因此我没有机会使用 Iterable 之外的其他集合类型。那么，有什么想法吗？

* * *

现在我正在添加一个工作代码示例，但未使用 Hadoop 框架进行测试：

```
 public static void main(String[] args) {
    List<TextPair> values = new ArrayList<TextPair>();
    values.add(new TextPair("cdr0", "0"));
    values.add(new TextPair("att0", "1"));
    values.add(new TextPair("cdr1", "0"));
    values.add(new TextPair("att1", "1"));
    values.add(new TextPair("cdr2", "0"));
    values.add(new TextPair("att2", "1"));

     List<TextPair> valuesA = new ArrayList<TextPair>();
     List<TextPair> valuesB = new ArrayList<TextPair>();

     for(TextPair value : values)
     {
         if(value.getSecond().toString().equals("0"))
             valuesA.add(value);
         else
             valuesB.add(value);
     }

     for(TextPair valueA : valuesA)
         System.out.println("valueA: " + valueA);

     for(TextPair valueB : valuesB)
         System.out.println("valueB: " + valueB);
} 
```

我使用 ArrayList 代替 Iterable 作为值。有没有办法用元素填充 Iterable？或者将其转换为另一个集合或其他方式？

# c++ - 使用与其他来源不同的编译器来提升编译

> ID：13836058
> 
> 赞同：0
> 
> 时间：2012-12-12T08:55:57.960
> 
> 标签：c++, gcc, boost

用一个 gcc 版本（4.6）编译静态 boost 库（线程、文件系统等）和用另一个（4.7）编译其余代码（使用 boost 头文件）是否存在问题？

我遇到了一个编译错误，一旦用 gcc4.7 编译了所有内容，该错误就解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:09:58.860

从理论上讲，这应该不是问题，因为 GCC 跨编译器版本维护了一个稳定的 C++ ABI。在实践中，有时会出现 ABI 合规性错误，这些错误可能会得到修复（或引入），但我的经验是这个问题的风险非常低。

# css - 如何使用 css 和 html 使按钮居中

> ID：13836059
> 
> 赞同：-3
> 
> 时间：2012-12-12T08:56:00.477
> 
> 标签：css

我想将一个按钮向上，另一个向下。我如何编辑我的 CSS 来实现这一点。这里是

css-

```
#ContactForm .button {
margin-left:8px;
margin-left:9px;
float:right;
margin-right:2px;
font-size:20px;
font-weight:700;
color:#fff;
line-height:35px;
width:90px;
text-align:center;
background:url(../images/button_form.gif) top repeat-x #308da2;
border-radius:10px;
-moz-border-radius:10px;
-webkit-border-radius:10px;behavior:url(js/PIE.htc);
position:relative;
text-decoration:none
} 
```

html-

```
<div>
  <a href="#" class="button" onclick="document.getElementById('ContactForm').submit()">send</a>
  <a href="#" class="button" onclick="document.getElementById('ContactForm').reset()">clear</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:59:26.877

这是你想要的 jsfiddle.... [http://jsfiddle.net/xgdVM/](http://jsfiddle.net/xgdVM/)

您可以将容器的 text-align 设置为 center 并将按钮的 display 属性设置为 block..

CSS：

```
#form{text-align:center;}
a{display:block;}​ 
```

HTML

```
 <div id="form">
     <a href="#" class="button" onclick="document.getElementById('ContactForm').submit()">send</a>
     <a href="#" class="button" onclick="document.getElementById('ContactForm').reset()">clear</a>
 </div>​ 
```

或者，如果您的按钮有一个 set witdth ie `width:70px;`，那么您可以只为它们提供 css 属性`margin:0 auto;`，并且它们将通过向左右应用相等的边距来居中

[http://jsfiddle.net/xgdVM/2/](http://jsfiddle.net/xgdVM/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:17:57.833

如果您的意思是水平居中：

```
#ContactForm .button {
    margin: 0 auto; /* centers, provided there's a width set */
    display: block;
    font-size:20px;
    font-weight:700;
    color:#fff;
    line-height:35px;
    width:90px; /* width set */
    text-align:center;
    background:url(../images/button_form.gif) top repeat-x #308da2;
    border-radius:10px;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;behavior:url(js/PIE.htc);
    position:relative;
    text-decoration:none
} 
```

# wpf - 调用时应用程序不会“新建”

> ID：13836062
> 
> 赞同：0
> 
> 时间：2012-12-12T08:56:12.437
> 
> 标签：wpf, xaml, new-operator

我正在使用单词 new 调用带有一些参数输入的新 xaml 应用程序，但它似乎不起作用。我也尝试使用 onclosure 将其设置为空。第一次启动它时它可以工作（一切都是新的），但在它完成后启动它，它似乎继续它以前的状态（带来完成的记分牌）。这是代码的片段。. .

```
 quizUI = new QuizzUI.MainWindow(App.User, true);
        quizUI.Closed += (o, s) =>
            {
                quizUI = null;
            };
        quizUI.LaunchQuiz(qSet); 
```

这与按钮事件挂钩。有谁知道我每次都能绝对更新这个对象的状态吗？这两个参数是用户信息，第二个是没有提示屏幕/加载屏幕的快捷方式。

这是 QuizzUI.MainWindow.LaunchQuizz 的代码：

```
 public void LaunchQuiz(GameQuizzSet quiz)
    {
        this.Hide();
        quizz = new QuizzContainer()
        {
            QSet = quiz,
        };

        if (isShortCutted)
        {
            bool? diag = quizz.ShowDialog();

            if (diag.HasValue)
            {
                quizz.Close();
                Close();
            }
        }
        else
        {
            quizz.ShowDialog();
            this.Show();
        }
    } 
```

QuizzUI.MainWindow 允许用户选择他们的个人资料以及要执行的测验。

# java - 文件编写器未输入文件（Java）

> ID：13836066
> 
> 赞同：0
> 
> 时间：2012-12-12T08:56:17.947
> 
> 标签：java

我制作了一个程序来生成一个包含数字的文件但是该程序没有在它创建的文件中输入任何内容！

这是代码：

```
 private void OpenMenuActionPerformed(java.awt.event.ActionEvent evt) {                                         
    ModFile=new File(NameText.getText() + ".mod");
    FileWriter writer = null;
    try {
        writer = new FileWriter(ModFile);
    } catch (IOException ex) {
        Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
    }
   if(!ModFile.exists()){
   try {
   ModFile.createNewFile();
   System.out.println("Mod file has been created to the current directory");
   writer.write(CodesBox.getText());
   } catch (IOException ex) {
   Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
       }
     }     
   } 
```

当我创建一个随机文件时，我打开它时看不到任何东西！请帮助
感谢 Amir 的帮助，但我注意到我应该使用 FileOutputStream 和 DataOutputStream ......
所以，我需要帮助再次导致出现同样的问题:(

```
 File ModFile =new File(NameText.getText() + ".mod");
try {
    FileOutputStream fos = new FileOutputStream(ModFile);
    DataOutputStream dos = new DataOutputStream(fos);
    int i = Integer.parseInt(CodesBox.getText());
    dos.writeInt(i);
        // and other processing 
} catch (IOException ex) {
    Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
}finally{
    try{
         dos.close();
    } catch(IOException e) {
        e.printStackTrace();
    }
} 
```

NetBeans 说他们在 (dos.close();) 处找不到符号 dos

请再次帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:05:47.323

*   您必须检查文件名是否存在于`NameText.getText()`.
*   您不需要创建文件，如果文件不存在 FileWriter 将自行创建。
*   您应该在处理后关闭文件

    私人无效OpenMenuActionPerformed（java.awt.event.ActionEvent evt）{

    ```
     //check before file name is nt null
        File ModFile =new File("somefile" + ".mod");
        FileWriter writer = null;

        try {
            writer = new FileWriter(ModFile);
            writer.write("test..................");
                // and other processing 
        } catch (IOException ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        }finally{
            try {
                writer.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    } 
    ```

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++使用`FileOutputStream`和写字节阵列遵循下面的代码

```
private static void OpenMenuActionPerformed(java.awt.event.ActionEvent evt) {  

//check before file name is nt null
    File ModFile =new File("somefile" + ".mod");
    FileOutputStream writer = null;

    String toProcess = "00D0C0DE00D0C0DE F000000000000000";

    try {
        writer = new FileOutputStream(ModFile);
        writer.write(toProcess.getBytes(),0,toProcess.getBytes().length);

    } catch (IOException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    }finally{
        try {
            writer.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

# php - 检查用户是否登录

> ID：13836068
> 
> 赞同：2
> 
> 时间：2012-12-12T08:56:24.450
> 
> 标签：php, zend-framework2

我有一个仪表板控制器，路由设置为`/Dashboard[/:action][/:id]`

我不想签`$auth->hasIdentity()`入我的仪表板控制器的索引、编辑、添加、删除操作，我想从顶层检测到。在阅读了许多博客和文档后，我发现`getControllerConfig()`这是控制器可能需要的任何初始设置的正确位置。

不幸的是，我不能`redirect()`从`getControllerConfig()`我已经检查过的函数中做，`ZfcUser`但这对于我的小场景来说太多了。

有人可以对此有所了解，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:27:03.330

这是来自 zf2 论坛的最佳解决方案，用于处理来自最高级别的请求并在初始化控制器逻辑之前进行重定向。

其次，通过这种技术，您不需要检查控制器中的 $auth->hasIndentity() anyAction() 这让您可以在一些特殊的路线上工作，您希望确保用户必须登录。即 /Dashboard

这对我有用，我希望它对所有人都有帮助。

```
public function onBootstrap(MvcEvent $e)
{
    $serviceManager = $e->getApplication()->getServiceManager();
    $path = $e->getRequest()->getUri()->getPath();

    if(strripos($path, 'Dashboard') !== false) {
        $authService = $serviceManager->get('MyApp\Authentication\Service');
        if (!$authService->hasIdentity()) {
            $e->getResponse()
                ->setStatusCode(302)
                ->getHeaders()->addHeaderLine('location', '/path/to/login');
            return $e->getResponse();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:19:49.663

如果您愿意使用 2.1 分支，则有一个控制器插件可以为您完成工作。在控制器内部只需执行以下操作：

```
$identity = $this->identity() 
```

# android - 防止在锁定时重新启动横向 Android 应用程序

> ID：13836070
> 
> 赞同：3
> 
> 时间：2012-12-12T08:56:30.707
> 
> 标签：android, orientation, lockscreen

我正在开发一个使用 OpenGL 并有背景音乐的游戏（有点）。应用程序仅在横向模式下运行。

我遇到的问题，发生在用户锁定屏幕时。在那个时候`onStop()`，屏幕方向被改变，并且在我的 Activity 由于方向改变而重新启动后不久。这意味着重新创建了 OpenGL 表面，重新开始播放音乐以及其他各种事情。这是违反直觉的，因为锁定屏幕应该暂停 CPU 密集型操作，而不是启动它们。

添加`android:configChanges="orientation"`到清单什么也没做。我确实意识到我可能遗漏`screenSize`了它，`android:configChanges`但我无法添加它，因为我的目标是早期的 API 版本，它没有此选项可用。

所以，问题是：处理这个问题的正确方法是什么？我应该在哪个事件上初始化我的应用程序以使一切按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T14:26:40.613

将 screenSize 添加到清单中的 configChanges 并不意味着您的程序不会在旧版本上运行。您只需要将 targetSdkVersion 设置为更高版本，将 minSdkVersion 设置为您喜欢的任何内容。在 intelljIDEA 中，我在 Project Structure 中将 ModuleSKD 设置为 4，因此它不会将 screenSize 突出显示为无效。它在 Eclipse 中必须类似。

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />

<activity android:name=".MyActivity"
      android:label="@string/app_name"
      android:configChanges="orientation|screenSize|keyboard|keyboardHidden|navigation"> 
```

您也可以像这样检查代码中的版本：

```
if (Build.VERSION.SDK_INT >= 11) 
```

这样您的应用程序就可以在 2.2 以及更高版本上运行。

我认为您不需要 onConfigurationChanged 因为您的游戏可能仅在横向模式下运行，但如果您有兴趣看看我的问题与您的问题和我自己的答案非常相似。

[在方向更改时替换布局](https://stackoverflow.com/questions/13848500/replace-layout-on-orientation-change)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T12:50:12.927

添加标签

`"android:configChanges="keyboard|keyboardHidden|orientation|screenSize|screenLayout"`对于您在 Manifest.xml 中的活动，

并覆盖该方法

```
public void onConfigurationChanged(Configuration newConfig) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T12:09:28.910

在你的确切情况下，我更喜欢使用这个：

```
@Override
protected void onCreate(final Bundle savedInstance) {
    super.onCreate(savedInstance);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
} 
```

适用于所有情况，并强制您的活动仅限于风景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T14:59:18.583

我认为您需要接受这样一个事实，即当手机锁定时，您的活动会暂停和/或停止。这意味着您将需要重新开始其中的一些事情。这也是我在阅读了一本使用 OpenGL 的 Android 游戏开发书籍后所理解的。

你能做的比@421 建议的要多一点。在这些 onSaveInstanceState 和 onRestoreInstanceState 中，您可以存储您正在播放的歌曲的部分以及任何其他数据，这些数据将允许游戏“顺利”重新开始，即使它可能需要重新加载某些内容。

如果您现在还没有找到任何其他答案，这可能就是原因。一旦手机锁定，我就经历过许多对游戏做奇怪事情的烦恼。您只需要正确和顺利地手动处理它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T11:30:28.310

```
 @Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onRestoreInstanceState(savedInstanceState);
}
@Override
protected void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub
    super.onSaveInstanceState(outState);
} 
```

以上是activity中的两种方法，当activity的方向发生变化时保存状态。它将数据以键值对的形式保存在bundle对象中。

无需在 Androidmanifest.xml 文件中添加任何标签。对于上面的代码。

`android:screenOrientation="landscape"`此标记可用于使您的活动仅在横向模式下运行。此标记应添加到 Androidmanifest.xml 中存在的活动标记

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-26T13:12:05.217

如果您的游戏仅适用于横向模式，请尝试在标签中设置`android:screenOrientation="landscape"`属性。`activity`

# groovy - Groovy，在不为空的情况下收集属性后的对象？

> ID：13836071
> 
> 赞同：2
> 
> 时间：2012-12-12T08:56:37.043
> 
> 标签：groovy

groovy 中是否已经有一种方法可以在不为 null 的情况下收集属性之后的对象？

```
Object.metaClass {
    collectWhileNotNull = { Closure follow ->
        def result = []

        def previous = null
        for (def current = delegate; !current.is(previous) && (current != null); current = follow(current)){
            result << current
            previous = current
        }

        return result
    }
} 
```

它对递归数据结构很有用。

groovy.util.Node 的使用示例：

```
Closure getAncestors = { Node n -> n.collectWhileNotNull{ it.parent() }.tail().reverse() } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:25:38.537

您可以使用来自[cookbook](http://groovy.codehaus.org/Iterator+Tricks)`Generator`的类（这也是必要模式的名称）。

# java - 如何编写我的 ETL 以根据 Oracle UNDO 设置运行？

> ID：13836085
> 
> 赞同：1
> 
> 时间：2012-12-12T08:57:14.407
> 
> 标签：java, oracle, etl, undo, database-administration

我正在增强基于 Java 的 ETL 软件。这个工具在 Oralce 安装中的一个问题是，当 ETL 期间发生大量删除时，即使我使用较小的批处理大小进行中间提交，批处理也会耗尽 UNDO 空间。在我当前的生产场景中，存在 4GB 的硬限制。

所以，现在，比如说，我的程序尝试从父表中删除 10000 条记录，在每 1000 条记录和每个记录删除后提交，级联从 5 个子表中删除 100 万条记录，我有 1000x5x1000,000 次删除发生每个批次/提交。我希望我的软件比这更智能——我希望它能够计算出 Oracle UNDO 空间，估计将触发多少删除并相应地限制批量大小。我该怎么做呢？如何使用查询计算 UNDO 相关信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:08:04.297

4GB不算什么。正确的做法是增加UNDO空间。

请注意，不鼓励大量删除，并且非常值得研究消除这种情况的方法。

# java - 如何在java中将边框应用于完整的hssfsheet

> ID：13836088
> 
> 赞同：0
> 
> 时间：2012-12-12T08:57:22.343
> 
> 标签：java, poi-hssf

我正在使用 apache poi 库创建一个工作簿，在工作表中我想为我的整个内容表添加边框，可以选择为单个单元格创建边框，有什么方法可以将边框应用于整个工作表内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:01:00.293

使用此默认方法，只需创建一个 HSSFCellStyle 并保存该对象，然后在编写 excel 时在循环中，只需使用此样式对象直接传递给方法 setDefaultColumnStyle()，方法 doc 告诉你..

public void setDefaultColumnStyle(int column,CellStyle style) 设置给定列的默认列样式。POI 只会将此样式应用于添加到工作表的新单元格。

指定者：接口Sheet中的setDefaultColumnStyle

参数：column - 列索引样式 - 要设置的样式

让我知道它是否适合你？

# sql-server-2008 - 仅显示具有 asp 值的 sql 字段

> ID：13836090
> 
> 赞同：0
> 
> 时间：2012-12-12T08:57:28.423
> 
> 标签：sql-server-2008, asp-classic

我有一个从 sql 检索值的 asp 网页...它显示没有值的字段..无论如何只显示具有值的字段..这是我的表

[] [][] “制造 Dt 和 Exp Dt 根据附件所附”

这个方括号包含空值..如果该字段为空，那么这个方括号将不会出现

![必须纠正](../Images/583387e52b63e66b68cc2107e5fa979d.png)

在第一行中，我有 2 组方括号，在第二行中，我有 2 组中的值..我只需要显示具有第二行中的值的方括号..如果值为空，则不需要显示空括号。

sql查询

```
select I.[Old Product Code], I.[Trade Name], I.[Short Name], SUM(Quantity) as Qty,I.[Base Box UOM], SIH.[Customer Marks - 1] ,SIH.[Bill-to Name],SIH.[Bill-to Address], SIH.[Ship-to Name], SIH.[Ship-to Address], SIH.[Ship-to Address 2] ,SIH.[Ship-to City], SIH.[Ship-to Post Code],SIH.[Country of Origin of Goods],SIH.[Bill-to Address 2] ,SIH.[Bill-to City] , SIH.[Bill-to Post Code], CR.Name ,C.Contact,SIH.[Total Boxes], CASE when SIL.[Dimension Group Code] = 'IOL' then I.[Group Description] 
END ,
CASE
    when  I.[EPCG License] = 1 then 'EPCG'
end,
case
    when SIL.[Dimension Group Code] = 'IOL' then 'DEEC'
    when I.[DEEC Lic_] = 1 then 'DEEC'
end as abcd
from [Sales Invoice Header] SIH ,[Customer] C, [Country_Region] CR,
 [Sales Invoice Line]  SIL,[Item] I where I.No_ =  SIL.No_ and SIL.[Document No_]='PEXP1213-110' and SIH.No_ = SIL.[Document No_] and C.No_ =  SIH.[Bill-to Customer No_] and C.[Country_Region Code] = CR.Code group by I.[Old Product Code], I.[Trade Name], I.[Short Name], SIH.[Sell-to Customer Name],SIH.[Sell-to City],SIH.[Customer Marks - 1],SIL.[Dimension Group Code],I.[Group Description], SIH.[Country of Origin of Goods], SIH.[Ship-to Name],SIH.[Ship-to Address], SIH.[Ship-to Address 2] , SIH.[Ship-to City], SIH.[Ship-to Post Code],SIH.[Bill-to Name],SIH.[Bill-to Address],SIH.[Bill-to Address 2],SIH.[Bill-to City] , SIH.[Bill-to Post Code],SIH.[Total Boxes],C.Contact ,CR.Name,I.[Base Box UOM], I.[EPCG License],I.[DEEC Lic_] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:30:06.277

您需要以编程方式解决它

```
if cstr(rs("Old Product Code"))="[]" then
   response.write("")
else 
   response.write(rs("Old Product Code"))
end if 
```

# php - 附加到关联数组？

> ID：13836091
> 
> 赞同：1
> 
> 时间：2012-12-12T08:57:28.770
> 
> 标签：php, multidimensional-array

我有一个源数组

```
$A = array(
    0=> array(
        'title'=>'HTML5+CSS3',
        'teacher'=>'jonh',
        'id_post'=>1,/* link to  $post_formation */
        'formation'=>1,
        'date'=>'12/12/2112'
    )
); 
```

和另一个数组：

```
$post_formation = array(
            0=>array(1,2,3),
            1=>array(3,4,5)
        ) 
```

查看`$A`以操纵新结果（在这种情况下`id_post=1` `1=>array(3,4,5)`，将包含更多`3 elements`）

```
$result = array(
    /* from $A */
    0=> array(
        'title'=>'HTML5+CSS3',
        'teacher'=>'jonh',
        'id_post'=>1,

        'formation'=>1,
        'date'=>'12/12/2112'
    ),

    /* Append here  more 03 elements `3,4,5` */
    1=> array(
        'title'=>'(A)HTML5+CSS3',
        'teacher'=>'jonh',
        'id_post'=>1,

        'formation'=>3,
        'date'=>'--/--/---'
    ),
    2=> array(
        'title'=>'(A)HTML5+CSS3',
        'teacher'=>'jonh',
        'id_post'=>1,

        'formation'=>4,
       'date'=>'--/--/----'
    ),
    3=> array(
        'title'=>'(A)HTML5+CSS3',
        'teacher'=>'jonh',
        'id_post'=>1,

        'formation'=>5,
        'date'=>'--/--/----'
    )
); 
```

任何人都可以告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:22:52.057

虽然有点奇怪......

```
$A=array(array("title"=>"HTML5+CSS3","teacher"=>"john","id_post"=>1,"formation"=>1,"date"=>"12/12/2012"));
$post_information=array(0=>array(1,2,3),1=>array(3,4,5));
print_r($A);
if(isset($post_information[$A[0]["id_post"]]))
{
    foreach($post_information[$A[0]["id_post"]] as $idx)
    {
        $cache=$A[0];
        $cache["title"]="(A)".$cache["title"];
        $cache["formation"]=$idx;
        $cache["date"]="--/--/----";
        $A[]=$cache;
    }
}
print_r($A); 
```

结果：

第一个`print_r`：

```
Array
(
    [0] => Array
        (
            [title] => HTML+CSS3
            [teacher] => john
            [id_post] => 1
            [formation] => 1
            [date] => 12/12/2012
        )

) 
```

第二个`print_r`：

```
Array
(
    [0] => Array
        (
            [title] => HTML+CSS3
            [teacher] => john
            [id_post] => 1
            [formation] => 1
            [date] => 12/12/2012
        )

    [1] => Array
        (
            [title] => (A)HTML+CSS3
            [teacher] => john
            [id_post] => 1
            [formation] => 3
            [date] => --/--/----
        )

    [2] => Array
        (
            [title] => (A)HTML+CSS3
            [teacher] => john
            [id_post] => 1
            [formation] => 4
            [date] => --/--/----
        )

    [3] => Array
        (
            [title] => (A)HTML+CSS3
            [teacher] => john
            [id_post] => 1
            [formation] => 5
            [date] => --/--/----
        )

) 
```

您当然可以将逻辑包装在一个函数中，而不是直接修改源代码`$A`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:15:20.817

另一种方式，可能更简单

```
 $ArrayPayChannel=array();

 function array_push_assoc($array, $key, $value){
  $array[$key] = $value;
 return $array;
 }

 $ArrayPayChannel = array_push_assoc($ArrayPayChannel, 'Key', 'Value'); 
```

如果你在数组中有更多的深度而不是值，你可以放另一个 array_push_assoc($ArrayPayChannel, 'Key', 'Value'); 你有更多的深度

# java - 使用eclipse在java中执行批处理

> ID：13836092
> 
> 赞同：0
> 
> 时间：2012-12-12T08:57:29.093
> 
> 标签：java, eclipse, batch-file

我有一批在腻子中运行。如何在 Eclipse 中使用 java 运行它。它可以在命令提示符下执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:11:03.557

您可以使用[外部工具运行您的](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/concepts-exttools.htm)**.bat**文件。 打开**运行 -> 外部工具 -> 外部工具配置** 在外部工具配置中，您可以在程序下创建新配置并选择位置字段的文件。
 **`.bat`**

# sql - 在视图中动态更新

> ID：13836095
> 
> 赞同：2
> 
> 时间：2012-12-12T08:57:38.610
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

我有这样的看法：

```
CREATE VIEW vwView
AS
SELECT
         ac.ac_id
        ,ac.Company
        ,ac.no
        ,ac.ContractID
        ,ac.Seller
        ,ac.AcquistionDate
        ,ac.Village
        ,ac.Commune
        ,ac.Area
        ,ac.PlotArea
        ,ac.FieldNo
        ,ac.Topo1
        ,ac.Topo2
        ,ac.Topo3
        ,ac.Topo4
        ,ac.Topo5
        ,ac.TotalAreaSqm
        ,ac.OwnershipTitle
        ,ac.CadastralNO
        ,ac.Type
        ,ac.Price
        ,ac.NotaryCosts
        ,ac.LandTax
        ,ac.OtherTaxes
        ,ac.AgentFee
        ,ac.CadastralFee
        ,ac.TabulationFee
        ,ac.CertSarcini
        ,ac.ProcuraNO
        ,cast((isnull(ac.price,0)+isnull(ac.notarycosts,0)+isnull(ac.landtax,0)+isnull(ac.othertaxes,0)+isnull(ac.agentfee,0)+isnull(ac.cadastralfee,0)+isnull(ac.tabulationfee,0)+isnull(ac.certsarcini,0)) as decimal(12,4)) as TotalCosts
        ,cast((isnull(ac.price,0)+isnull(ac.notarycosts,0)+isnull(ac.landtax,0)+isnull(ac.othertaxes,0)+isnull(ac.agentfee,0)+isnull(ac.cadastralfee,0)+isnull(ac.tabulationfee,0)+isnull(ac.certsarcini,0))/(NULLIF(ac.TotalAreaSqm,0)/10000) as decimal(12,4)) as RonPerHa
        ,cast((isnull(ac.price,0)+isnull(ac.notarycosts,0)+isnull(ac.landtax,0)+isnull(ac.othertaxes,0)+isnull(ac.agentfee,0)+isnull(ac.cadastralfee,0)+isnull(ac.tabulationfee,0)+isnull(ac.certsarcini,0))/(NULLIF(ac.TotalAreaSqm, 0)/10000*NULLIF(ac.FixHist, 0)) as decimal(12,4)) as EurPerHa
        ,ac.DeclImpunere
        ,ac.FixHist
        ,cast((isnull(ac.price,0)+isnull(ac.notarycosts,0)+isnull(ac.landtax,0)+isnull(ac.othertaxes,0)+isnull(ac.agentfee,0)+isnull(ac.cadastralfee,0)+isnull(ac.tabulationfee,0)+isnull(ac.certsarcini,0))/NULLIF(ac.FixHist,0) as decimal(12,4)) as EurHist
        ,ac.LandStatus
        ,ac.Arenda

        ,UPDATE nbAchizitii set ac.Arenda=CASE WHEN ac.PlotArea=ar.PlotArea then 'yes'
                                                                            else 'no'
                                         END
        FROM    nbAchizitii ac
        LEFT JOIN nbArenda ar
        ON
        ac.PlotArea=ar.PlotArea 
```

我想在我的视图中包含应该动态执行的更新（它应该用是或否更新 ac.Arenda 的每一行）但我不知道应该如何将它放在视图中。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:48:26.190

> 我想在我的视图中包含应该动态执行的更新

你不能这样做。您不能`UPDATE`像以前那样在视图中获取数据。

但是，您可以更新视图中引用的那些表的基础数据，即[通过视图修改数据](http://msdn.microsoft.com/en-us/library/ms180800%28v=sql.100%29.aspx)。

您必须以与您相同的方式创建视图，但不包含该`UPDATE`子句：

```
SELECT
...
FROM your tables
.. 
```

然后`UPDATE`你的看法。就像是：

```
UPDATE YourViewName
SET arenda = CASE WHEN PlotArea IS NULL THEN 'no'
                    ELSE 'yes' 
             END; 
```

请注意，此方法受到[`CREATE VIEW`](http://msdn.microsoft.com/en-us/library/ms187956.aspx)文档中可更新视图部分中定义的限制和限制的限制。

* * *

## 更新

如果您想动态执行此操作，则必须使用触发器，就像您在评论中所做的那样：

```
CREATE TRIGGER Arenda_update 
ON nbAchizitii
for update AS 
BEGIN 
  UPDATE ac 
  SET Arenda = CASE 
                  WHEN ac.PlotArea IS NULL then 'no'
                else 'Yes' END
  FROM nbAchizitii ac 
  LEFT JOIN nbArenda ar ON ac.PlotArea = ar.PlotArea
end; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/1544a/1)

# c# - 解析大json

> ID：13836097
> 
> 赞同：1
> 
> 时间：2012-12-12T08:57:40.943
> 
> 标签：c#, json, parsing, filestream

我正在尝试解析一个 json 文件，然后对其进行操作以将数据插入 SQL Server 2008 数据库。

例子：

```
var sr = new StreamReader("C:\\path to file\file.json");
var json = JsonSerializer.SerializeToString(sr);
var o = JsonObject.Parse(json); 
```

但我总是在第二行收到此错误 - “此流不支持超时。”

Json 文件如下所示：

```
"main":{
    "prg": [
               {
                   "Id": 1,
                   "name": "A&E",
                   more fields
               }
    "prg": [
               {
                   "Id": 2,
                   "name": "asda",
                   more fields
               }
 } 
```

我需要做这样的事情

```
foreach (prg in main)
    entity.id = prg.id
    entity.name = prg.name 
```

我该怎么做？为什么会出现超时异常？

**编辑：**为了更好地理解我的问题，这就是我对 XML 文件的处理方式

```
XmlDocument sourceDoc = new XmlDocument();
sourceDoc.Load(SourcesElement2); // where SourcesElement2 is the path to my XML
XmlNodeList prg = sourceDoc.GetElementsByTagName("prg");

foreach (XmlNode item in prg)
{
    entity.Name= item.SelectSingleNode("name").InnerText;
    ...
} 
```

我已将 XML 转换为 Json，我想做同样的事情。对于 Json 文件中的每个“prg”节点，在数据库中插入一个新项目

**编辑2：**

这就是我所做的。

```
 using (
            StreamReader stream =
                File.OpenText(
                    "C:\\path\\Sources.json")
            )
        {
            JObject sources = (JObject) JToken.ReadFrom(new JsonTextReader(stream));

            var a = sources["on"];
            var b = a["sources"];
            var c = b["prgs"];
            foreach (var item in c)
            {
                var d= item.SelectToken("prg");

                // Here d is null

            } 
```

我和楼上的那个有同样的问题。对于 Json 文件中的每个“prg”节点，在数据库中插入一个新项目。我怎样才能做到这一点 ？（ prg 的路径是 on/sources/prgs/ ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:03:41.400

我认为您不想*序列化*流。

`JsonSerializer.SerializeToString(sr)`

您想从流中*反序列化。*

`JsonSerializer.Deserialize`

出于性能原因，您可能希望使用[JsonReader 。](http://james.newtonking.com/archive/2006/06/26/Json.NET-_2D00_-Simplifying-.NET-_3C002D003E00_-JavaScript-communication.aspx)

您的 XML 示例将整个文件加载到内存中 - 您不想对大型文档执行此操作。`reader.Read()`模式更适合处理大文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T10:35:48.520

对于每个有同样问题的人，我所做的是（注意：这只是一个例子）

顺便说一句，感谢所有试图回答我问题的人，我为我的错误感到抱歉。

```
 List<string> d = new List<string>();

        using (
            StreamReader stream =
                File.OpenText(
                    "C:\\path\\Sources.json")
            )
        {
            JObject sources = (JObject) JToken.ReadFrom(new JsonTextReader(stream));

            var a = sources["on"];
            var b = a["sources"];
            var c = b["prgs"];
            foreach (JObject item in c["prg"].ToList())
            {
                d.Add(item.Value<string>("name"));
            }

        }

        //part below is just for testing
        foreach (var VARIABLE in d)
        {
            Console.WriteLine(VARIABLE);
        }
        Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-16T20:42:54.697

我会通过将该 JSON 对象转换为 C# 类，然后将逻辑应用于 C# 对象和/或使用[DataTables](http://www.dotnetperls.com/datatable) 来处理它 [注意：网上有一些解决方案表明您可以轻松地将`Object`or传递`List<Object>`给 DataTable，然后传递它“轻松"到 SQL]

第一步仍然是您在任一解决方案中的打嗝，*我如何从文件系统中提取一个大的 JSON 字符串*？

如果您有 JSON，请使用[json2csharp.com](http://json2csharp.com/)和/或[jsonutils.com](http://jsonutils.com)检索类，以便将其反序列化为您的对象。

```
StreamReader re = new StreamReader(@"C:\path to file\file.json");
JsonTextReader reader = new JsonTextReader(re);
YourClass DeserializedObject = se.Deserialize<YourClass>(reader);
Console.WriteLine(DeserializeObject.SomeProperty); 
```

# rabbitmq - RabbitMQ 的“receiveAndConvert”抛出 ClassCastException

> ID：13836098
> 
> 赞同：1
> 
> 时间：2012-12-12T08:57:41.217
> 
> 标签：rabbitmq, amqp, spring-amqp

我是 RabbitMQ 的新手，我正在尝试“ `receiveAndConvert`”到我的自定义类型：`Person.java`.

这是我的**制片人**：

```
public class Producer {

    public static void main(String[] args) {
        ApplicationContext context = new GenericXmlApplicationContext("classpath:/applicationContext.xml");
        AmqpTemplate template = context.getBean(AmqpTemplate.class);
        Person person = new Person();
        person.setAge(37);
        person.setName("Julien");
        template.convertAndSend("myqueue", person);
    }

} 
```

这是我的**消费者**：

```
public class Consumer {

    public static void main(String[] args) {
        ApplicationContext context = new GenericXmlApplicationContext("classpath:/applicationContext.xml");
        AmqpTemplate template = context.getBean(AmqpTemplate.class);
        Person me = (Person) template.receiveAndConvert("myqueue");
        System.out.println("Me: " + me.getName() + ":" + me.getAge());
    }

} 
```

我的**Person.java 只是一个**带有名称和年龄实例变量的 POJO。

我得到一个**ClassCastException**如下：

```
Exception in thread "main" java.lang.ClassCastException: [B cannot be cast to trc.suivi.amqp.Person
    at trc.suivi.amqp.Consumer.main(Consumer.java:14) 
```

请注意，Producer 和 Consumer 类位于两个不同的项目中，我已将 Person.java 类复制/粘贴到 Consumer 项目中。

我的**配置**如下：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rabbit="http://www.springframework.org/schema/rabbit"
    xsi:schemaLocation="http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit-1.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <rabbit:connection-factory id="connectionFactory" />
    <rabbit:template id="amqpTemplate" connection-factory="connectionFactory" />
    <rabbit:admin connection-factory="connectionFactory" />
    <rabbit:queue name="myqueue" />

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:01:49.270

我突然想到我的`Person.java`班级需要实现`Serializable`. 现在可以了。

# android - ActivityGroup 中的活动导向

> ID：13836100
> 
> 赞同：2
> 
> 时间：2012-12-12T08:57:44.373
> 
> 标签：android, layout, tabs, screen-orientation, activitygroup

`ActivityGroup`我在更改屏幕方向时重新创建活动时遇到问题。这是应用程序的结构：

我`TabActivity`用`TabHost`. 从每个选项卡`ActivityGroup`开始，自己的工作就像下一个活动的堆栈一样。当我在`ActivityGroup`. 系统忽略方向更改，并且不会重新创建活动。（未加载横向布局）

我尝试处理方向更改，`onConfigurationChanged(Configuration newConfig)`但我无法`recreate()`在任何活动中调用方法，`ActivityGroup`因为它会导致错误： *recreate() 方法只能在顶层调用。*

请问有人给点建议吗？？

# cucumber - 如何在我的黄瓜测试中使用 yml 文件？

> ID：13836101
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:57:45.677
> 
> 标签：cucumber, yaml

我想在我的黄瓜测试中使用 config.yml 文件。我这样写：

**test_config.yml：**

```
group_name: animals
learn_group_name: dogs
card_box_name: cats 
```

**cucumber_test.rb：**

```
require `watir-webdriver`
require `yaml`

def read_config
  config = YAML.load(File.read(`/home/profile/Desktop/cucumber/test_config.yml`))
  @group = config[`group_name`]
  @learn_group = config[`learn_group_name`]
  @card_box = config[`card_box_name`]
end

puts `Group = #{@group}`
puts `Learn group = #{@learn_group}`
puts `Card box = #{@card_box}`
... 
```

**在控制台（终端）中：**

```
Group = 
Learn group = 
Card box =
... 
```

但是有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:54:28.390

这是一个非常糟糕的代码示例。

您正在使用反引号（`）而不是引号（“）。这会导致问题。很多问题。

该问题与黄瓜或 watir-webdriver gem 无关。您`@group`在方法 ( ) 中定义实例变量 ( ...)`read_config`但您永远不会调用该方法。

请用更现实的例子更新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:40:14.497

```
Before do
  @host                         ||= YML["host"]
  @group_name_for_search        ||= YML["group_name_for_search"]
  @learn_group_name_for_search  ||= YML["learn_group_name_for_search"]
  @card_box_name_for_search     ||= YML['card_box_name_for_search']
end 
```

我必须定义，在黄瓜步骤之前，Before do。

# oracle10g - 如何知道 oracle 10g 中的作业状态？

> ID：13836124
> 
> 赞同：0
> 
> 时间：2012-12-12T08:58:51.830
> 
> 标签：oracle10g

我在 oracle10g 中创建了一份工作

我的表名是名称，即

```
create table name(name varchar2(10)) 
```

我创建了一个名为：insertnames 的过程，将值插入到名称表中

```
begin
dbms_scheduler.create_job
(
job_name => 'insertnames'
job_type => 'stored_procedure',
job_action => 'insertnames(spname)'
start_date => sysdate,
enabled => true,
auto_drop => false
);
end; 
```

上述作业已成功执行，但我如何知道该作业是否运行良好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:09:09.300

要查看正在运行的内容，请使用以下视图：`USER_SCHEDULER_RUNNING_JOBS`

并查看作业是否成功使用：`USER_SCHEDULER_JOB_LOG`/`USER_SCHEDULER_JOB_RUN_DETAILS`

（或视情况使用视图的 ALL_/DBA_ 版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:05:43.953

有一系列以 USER/ALL/DBA_SCHEDULER_ 开头的系统视图，例如 ALL_SCHEDULER_JOBS 或 ALL_SCHEDULER_RUNNING_JOBS，记录在此处[http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_2038.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_2038.htm)。

# java - CouchbaseClient 与 MemcachedClient

> ID：13836125
> 
> 赞同：2
> 
> 时间：2012-12-12T08:58:59.177
> 
> 标签：java, couchbase, spymemcached

我想知道使用一个客户端比另一个客户端有什么优势。是否有可能使用 MemcachedClient 连接到客户端 Moxi 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:24:59.927

表现。从 memcache->Membase 时代开始，Moxi 从 Couchbase 集群端处理路由/分发，但随后您的所有 AppServers 都会访问集群中 Moxi 的各个节点。我们对这个设计做了很多优化和改进，以提高性能。

其中一项改进是使用 Couchbase SDK 的客户端自己拥有集群拓扑图，因此它们直接转到负责数据的节点而不是 Moxi 路由。您会发现使用 Couchbase SDK 可以提高性能并减少延迟！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:07:05.737

除了 Scalabl3 的答案，看看： http: [//www.couchbase.com/memcached](http://www.couchbase.com/memcached)

# javascript - 使用 onmouseup 删除选项的选择

> ID：13836134
> 
> 赞同：2
> 
> 时间：2012-12-12T08:59:28.240
> 
> 标签：javascript, jquery, select

我想删除选择而不删除选项。代码如下所示：

```
<select name="slovn" id="slovn_id" size="4" multiple="multiple" style="width:200px;">
<option value="1" id="asd">item 1</option>
</select> 
```

如果我在 HTML 中添加了一个链接：

```
<div>  
 <a href="#" class="remove">Remove selection</a>  
 </div> 
```

并使用 jQuery 所有作品：

```
$('.remove').click(function(){    
  $(this).parent().prev().find('option:selected').prop("selected",null);
}); 
```

但是如何制作没有链接？仅单击选项或外部区域？在来自 json 的“项目 1”中，加载了一个链接。我需要单击该选项，打开链接并在其后删除选择，这可以再次单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:58:23.437

看看这个有效[的 jsfiddle-link](http://jsfiddle.net/YjQEM/1/)，它将帮助您满足您的要求。

```
$("#slovn_id").change(function() {
    var selectedIndex = this.selectedIndex;
    alert(selectedIndex);
    this.selectedIndex = -1;
});​ 
```

**编辑：**

根据您的评论，对小提琴进行了更改。希望，这个[链接](http://jsfiddle.net/YjQEM/5/)会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:31:27.430

尝试这个：

```
$('.remove').click(function(){ 
    $.each('option:selected',function(){
        $(this).attr("checked",false).checkboxradio("refresh");
    });
}); 
```

# ruby-on-rails - Rails - 如何在用户登录时覆盖设计 SessionsController 以执行特定任务？

> ID：13836139
> 
> 赞同：46
> 
> 时间：2012-12-12T08:59:40.723
> 
> 标签：ruby-on-rails, devise

每次用户登录时，以及在他被设计重定向到主页以进行连接之前，我都需要使用 Devise 管理用户会话/注册用户。

我是否必须重写设计 SessionsController，如果是，如何？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-12T10:39:51.480

或者，您可以创建自己的会话控制器

```
class SessionsController < Devise::SessionsController
  def new
    super
  end

  def create
    self.resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    if !session[:return_to].blank?
      redirect_to session[:return_to]
      session[:return_to] = nil
    else
      respond_with resource, :location => after_sign_in_path_for(resource)
    end
  end
end 
```

并`routes.rb`添加：

```
devise_for :users, controllers: {sessions: "sessions"} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-01-15T17:56:30.390

如果您查看[Devise 的 实现](https://github.com/plataformatec/devise/blob/aa3f64976fd886b25e40dfc6043aa7b151145f94/app/controllers/devise/sessions_controller.rb#L20)，`sessions_controller#create`您会注意到如果您传递一个块，它们就会屈服。

因此，只需将它们的会话控制器子类化并在调用 super 时传递一个块。为此，首先告诉 Devise`routes.rb`您想使用自己的会话控制器：

```
devise_for :users, controllers: { sessions: 'users/sessions' } 
```

然后`SessionsController`在 create 方法中调用 super 时创建一个类并传递一个块。它看起来像这样：

```
# app/controllers/users/sessions_controller.rb

class Users::SessionsController < Devise::SessionsController
  layout "application"

  # POST /login
  def create
    super do |user|
      if user.persisted?
        user.update(foo: :bar)
      end
    end
  end
end 
```

大多数设计控制器方法都接受一个块，因此您也可以这样做以进行注册、忘记密码等。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-12-12T09:57:25.637

设计提供`after_database_authentication`回调方法。您可以完全访问那里的当前经过身份验证的用户对象。

如果您想在每次成功登录后更新当前用户名，您可以执行以下操作。

```
class User < ActiveRecord::Base
  devise :database_authenticatable

  def after_database_authentication
    self.update_attributes(:name => "your name goes here")
  end 
end 
```

# javascript - 带有预输入的淘汰赛验证插件

> ID：13836141
> 
> 赞同：0
> 
> 时间：2012-12-12T08:59:45.480
> 
> 标签：javascript, knockout.js, coffeescript, knockout-validation

我目前正在使用来自[https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)的验证插件，它在输入框等普通值字段上运行良好，但我无法在 typeahead 字段上显示任何验证消息。

分配给 typeahead 的 observable 具有分配给它的必需的验证规则，并且插件可以对其进行验证，例如，当它为空白时调用 isValid() 返回 false，但未显示验证消息。

我的 typeahead 自定义绑定如下：

```
ko.bindingHandlers.typeahead =
init: (element, valueAccessor) ->
    binding = this
    elem = $(element)
    value = valueAccessor()
    elem.typeahead(
        source: ->
            ko.utils.unwrapObservable(value.source)
        onselect: (val) ->
            value.target val
        )

    elem.change ->
        value.target elem.val()

update: (element, valueAccessor) ->
    elem = $(element)
    value = valueAccessor()
    elem.val value.target() 
```

并使用如下：

```
<input type="text" data-provide="typeahead" data-items="4" data-bind="typeahead:  { target: selectedValue, source: sourceValues}" /> 
```

关于 github 问题的一篇文章建议在`ko.bindingHandlers.validationCore.init(element, valueAccessor)`绑定的 init 部分的末尾粘贴，但这似乎没有任何帮助

# windows - 使用 xCmd 调用远程文件

> ID：13836143
> 
> 赞同：0
> 
> 时间：2012-12-12T08:59:50.580
> 
> 标签：windows, remote-access

调用 jar 文件，该文件位于不同的 Windows 共享文件夹中；我正在使用[xCmd](http://ashwinrayaprolu.wordpress.com/2011/04/12/xcmd-an-alternative-to-psexec/)实用程序。它调用它并继续打开该连接并向我显示该 jar 文件的 stderr/stout，我不需要它。我只需要 xCmd 调用 jar 文件然后退出，其余的事情将由 jar 文件处理。

是否有任何其他实用程序或方法来调用远程文件。我面临的唯一问题是它没有在调用后退出连接。除此之外，它开始向我显示标准输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T14:25:27.187

*xCmd*实际上是**[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)**的克隆，它本身通常捆绑在 PsTools 中。

# c# - 正则表达式获取模式的最后一次出现

> ID：13836145
> 
> 赞同：17
> 
> 时间：2012-12-12T08:59:54.000
> 
> 标签：c#, .net, regex

我有一个字符串，我需要选择模式的最后一次出现。字符串是：

> [[[1302638400000.0, 0], [1302724800000.0, 610.64999999999998], [1302811200000.0, 2266.6500000000001], [1303156800000.0, 4916.9300000000003], [1303329600000.0, 6107.3199999999997], [1303934400000.0, 9114.6700000000001]], [[1302638400000.0, 20000.0], [1302724800000.0, 20000.0 ], [1302811200000.0, 20000.0], [1303156800000.0, 20000.0], [1303329600000.0, 20000.0], [1303934400000.0, 20000.0]], [[1302638400000.0, 20000.0], [1302724800000.0, 20610.650000000001], [1302811200000.0, 22266.650000000001], [1303156800000.0, 24916.93 ], [1303329600000.0, 26107.32], [1303934400000.0, 29114.669999999998], [1304452800000.0, 30078.23]],**[[1302718580000.0, 0.0], [1302772440000.0, 3.0532500000000073], [1303107093000.0, 11.333250000000007], [1303107102000.0, 21.753250000000008], [1303352295000.0, 24.584650000000003], [1303352311000.0, 26.8766], [1303815010000.0, 30.536599999999996], [1303815028000.0, 27.703349999999993]]] ;**

我使用的模式是：

```
\s\[\[(.*?)\]\] 
```

不幸的是，它只选择了第一次出现。突出显示的文本是所需的结果。最后有多少个方括号并不重要，只需要最后一个数组集。

更新：如果它可以帮助你，那么编码是在 c#

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-13T04:30:02.017

使用`RightToLeft`选项：

```
Regex.Match(s, @"\[\[(.*?)\]\]", RegexOptions.RightToLeft) 
```

此选项是 .NET 正则表达式独有的，并且完全符合您的要求：从输入的末尾而不是开头进行搜索。特别值得注意的是，非贪婪`?`修饰符的工作方式与您预期的一样；如果你把它关掉，你会得到整个输入，但有了它你会得到：

`[[1302718580000.0, 0.0], [1302772440000.0, 3.0532500000000073], [1303107093000.0, 11.333250000000007], [1303107102000.0, 21.753250000000008], [1303352295000.0, 24.584650000000003], [1303352311000.0, 26.8766], [1303815010000.0, 30.536599999999996], [1303815028000.0, 27.703349999999993]]]`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T09:08:41.883

对最后一组进行贪婪匹配`[[`并捕获..

```
.*(\[\[.*\]\])\]; 
```

[在这里](http://rubular.com/r/WbNifNQ7ND)看到它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T09:13:29.577

应该有一个全局标志或一个方法来返回您的语言中的所有匹配项。使用它并参加最后一场比赛。

在 C#中`Matches()`返回一个`MatchCollection`包含所有找到的匹配项。所以你可以这样做：

```
string source = "[[[1302638400000.0, 0], [1302724800000.0, 610.64999999999998], [1302811200000.0, 2266.6500000000001], [1303156800000.0, 4916.9300000000003], [1303329600000.0, 6107.3199999999997], [1303934400000.0, 9114.6700000000001]], [[1302638400000.0, 20000.0], [1302724800000.0, 20000.0], [1302811200000.0, 20000.0], [1303156800000.0, 20000.0], [1303329600000.0, 20000.0], [1303934400000.0, 20000.0]], [[1302638400000.0, 20000.0], [1302724800000.0, 20610.650000000001], [1302811200000.0, 22266.650000000001], [1303156800000.0, 24916.93], [1303329600000.0, 26107.32], [1303934400000.0, 29114.669999999998], [1304452800000.0, 30078.23]], [[1302718580000.0, 0.0], [1302772440000.0, 3.0532500000000073], [1303107093000.0, 11.333250000000007], [1303107102000.0, 21.753250000000008], [1303352295000.0, 24.584650000000003], [1303352311000.0, 26.8766], [1303815010000.0, 30.536599999999996], [1303815028000.0, 27.703349999999993]]];";
Regex r = new Regex(@"\s\[\[(.*?)\]\]");

MatchCollection result = r.Matches(source);

if (result.Count > 0) {
    Console.WriteLine(result[result.Count - 1]);
} else {
    Console.WriteLine("No match found!");
}
Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T09:08:18.063

尝试像这样将 $ 添加到您的模式中`\s\[\[(.*?)\]\]\]\;$` ，让我知道它是否有效。

目前我手头没有 bash，所以我无法检查，但它应该可以解决问题。

编辑：正确的版本`\S+\s?+(?!((.*\[\[)))`

这转化为：

```
\S   : all alfanumeric
\s?  : all 1 space occurences
?!   : not 
.*   : everything
\[\[ : until the last pattern of [[ (excluded) 
```

[这是 Rubular 示例](http://rubular.com/r/97THBqz2iU)

顺便说一句，很棒的工具 rubular，让我想更多地研究 ruby​​ 和正则表达式：D

# android - 后台工作者作为 - 没有 UI 或服务的 AsyncTask 或 Loader 或 Fragment

> ID：13836150
> 
> 赞同：1
> 
> 时间：2012-12-12T09:00:01.327
> 
> 标签：android, android-asynctask, asynchronous, asynctaskloader

我知道关于这个主题有很多线程，但是：我有一个简单的任务。

```
public class MyTask extends AsyncTask<T, U, V> {
...
@Override
    protected Void doInBackground(T... params) {

        for (int i = 0; i < 60; i++)
        {   
            if (isCancelled()) return null;

            publishProgress(i);

            Thread.sleep(1000);         
        }
        return null;
    }
...
} 
```

这很简单，我数到 60 并更新 UI 上的 TextView。当我们必须解决配置更改（如旋转屏幕）等时，问题就会出现，因为我们必须避免内存泄漏并正确处理所有线程。

在 Android 3.0 中引入，加载程序开始发挥作用。加载器现在是在后台线程中处理长期操作的首选方式（我们不必太关心线程）。但如果我理解正确的话，它们主要用于从某个地方加载一些数据并将它们显示在 Activity / Fragment 中。比如下载一些网页内容并以列表等形式显示。

编辑：现在我发现了一些其他可能性如何做一些后台工作，比如使用没有 UI 的片段（当活动重新创建时 RetainInstance = true）或将其作为服务启动的想法。他们大概可以以更简单的方式实现这一目标。

我的问题是，由于我是 Android 新手，我应该走哪条路？

# javascript - JavaScript/HTML - 根据 url 变量设置选定的选项卡

> ID：13836151
> 
> 赞同：0
> 
> 时间：2012-12-12T09:00:01.577
> 
> 标签：javascript, url, tabs

我有一个搜索页面，我找到了一个标签组件的脚本，它将电视节目搜索页面和电影搜索页面分开。当用户单击让我们说“电影”选项卡并从那里执行搜索时，我将表单添加`?type=movie&...`到 url。但是，当他们执行搜索时，选择的选项卡是“电视节目”选项卡，并且必须单击才能到达具有他们想要的结果的另一个选项卡。

这是代码，其中是我尝试过的一些内容：

HTML 看起来像这样：

```
<article class="first">
     <h2>Search</h2>

    <hr/>
    <div id="tabWrapper">
        <div id="tabContainer">
            <div class="tabs">
                <ul>
                    <li id="tabHeader_1">TV Shows</li>
                    <li id="tabHeader_2">Movies</li>
                </ul>
            </div>
            <div class="tabContent">
                <div class="tabpage" id="tabpage_1">
                    <?php
                        if (isset($sortFilt['year']))
                            unset($sortFilt['year']);
                        if ($sortField=="year")
                            $sortField==" ";
                        DisplaySearchPage("shows", $terms, $sortField, $sortDir, $sortFilt, $page, $perPage);
                    ?>
                </div>
                <div class="tabpage" id="tabpage_2">
                    <?php
                        DisplaySearchPage("movies", $terms, $sortField, $sortDir, $sortFilt, $page, $perPage);
                    ?>
                </div>
            </div>
        </div>
    </div>
</article>
<script src="tabs.js"></script> 
```

这是`tabs.js`脚本：

```
window.onload=function() {

  // get tab container
  var container = document.getElementById("tabContainer");
    // set current tab
    var navitem = container.querySelector(".tabs ul li");
    //store which tab we are on
    var ident = navitem.id.split("_")[1];
    navitem.parentNode.setAttribute("data-current",ident);
    //set current tab with class of activetabheader
    navitem.setAttribute("class","tabActiveHeader");

    //hide two tab contents we don't need
    var pages = container.querySelectorAll(".tabpage");
    for (var i = 1; i < pages.length; i++) {
      pages[i].style.display="none";
    }

    //this adds click event to tabs
    var tabs = container.querySelectorAll(".tabs ul li");
    for (var i = 0; i < tabs.length; i++) {
      tabs[i].onclick=displayPage;
    }

    // This below is is what I tried.
    var selTab = (getUrlVars()["type"] == "movies") ? 2 : 1;
    var selTab = (getUrlVars()["type"] == "movies") ? 1 : 0; // Tried this too.
    tabs[selTab].click();

    // its seems like it should have worked, what am I doing wrong.
}

// on click of one of tabs
function displayPage() {

  var current = this.parentNode.getAttribute("data-current");
  //remove class of activetabheader and hide old contents
  document.getElementById("tabHeader_" + current).removeAttribute("class");
  document.getElementById("tabpage_" + current).style.display="none";

  var ident = this.id.split("_")[1];
  //add class of activetabheader to new active tab and show contents
  this.setAttribute("class","tabActiveHeader");
  document.getElementById("tabpage_" + ident).style.display="block";
  this.parentNode.setAttribute("data-current",ident);
} 
```

如何调整此脚本，让我根据`type`URL 参数中的变量来决定加载页面时显示哪个选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:24:59.443

我找到了答案。我的问题是`getUrlVars["type"]`，它没有给我 'type' url 变量的值，所以我为它创建了自己的函数。如果其他人想知道如何从 url 获取变量，这是工作代码。

```
function getURLParameter(name)
{
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
}

window.onload = function()
{
    // Get tab container
    var container = document.getElementById("tabContainer");

    // Set the current tab.
    var navitem = container.querySelector(".tabs ul li");

    // Store which tab is selected.
    var ident = navitem.id.split("_")[1];
    navitem.parentNode.setAttribute("data-current", ident);

    // Set the current tab with a class of 'activetabheader'.
    navitem.setAttribute("class", "tabActiveHeader");

    // Hide the tab contents we don't need.
    var pages = container.querySelectorAll(".tabpage");
    for (var i = 1; i < pages.length; i++) {
        pages[i].style.display = "none";
    }

    // This adds the click event handler to the tabs.
    var tabs = container.querySelectorAll(".tabs ul li");
    for (var i = 0; i < tabs.length; i++) {
        tabs[i].onclick = displayPage;
    }

    // Selects tab based on 'type' url variable.
    if (getURLParameter("type") == "movies") {
        tabs[1].click();
    }
}

// OnClick() event handler for tabs.
function displayPage()
{
    var current = this.parentNode.getAttribute("data-current");

    // Remove class of 'activetabheader' and hide the old contents.
    document.getElementById("tabHeader_" + current).removeAttribute("class");
    document.getElementById("tabpage_" + current).style.display = "none";

    var ident = this.id.split("_")[1];

    // Add a class of 'activetabheader' to new active tab and show contents.
    this.setAttribute("class", "tabActiveHeader");
    document.getElementById("tabpage_" + ident).style.display = "block";
    this.parentNode.setAttribute("data-current", ident);
} 
```

# ruby-on-rails - 我怎么知道在太阳黑子的全文搜索中哪个关键字匹配？

> ID：13836154
> 
> 赞同：0
> 
> 时间：2012-12-12T09:00:06.887
> 
> 标签：ruby-on-rails, sunspot

我正在使用 rails + sunspot，并使用：

```
Post.search do
    fulltext keywords, minimum_match: 1
end 
```

匹配帖子包含关键字列表中的任何关键字。

问题是，我想知道哪个关键字匹配。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:39:37.913

我相信当太阳黑子索引所有内容时，它会根据您的帖子模型中的内容创建一个关键字列表，然后我认为您可以跳转到管理部分（有一个网址），例如

```
http://localhost:8982/solr 
```

可能不对，我用了有一段时间了。在那里，我认为您可以检查已编入索引的内容

# visual-c++ - 是否有利用 Visual C++ 2012 中的新功能的数学库

> ID：13836155
> 
> 赞同：0
> 
> 时间：2012-12-12T09:00:08.193
> 
> 标签：visual-c++, math, optimization, parallel-processing, visual-studio-2012

VS 2012 C++ 编译器中有许多用于并行编程的新特性：

*   自动并行器
*   C++ 加速大规模并行 (AMP)
*   任务并行
*   和更多 ...

我希望看到这些应用于矩阵乘法、特征值分解等。我的意思是所有可以受益于并行执行的东西。

有这样的 C++ 库吗？

默认情况下应用矢量化，因此我们跳过这部分。该库将不可移植，因此我们也跳过了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:36:56.260

查看英特尔 MKL。我不知道图书馆的具体情况，但调查它并没有什么坏处。

# asp.net - Asp.net Webform、Swf 文件和 Google Chrome

> ID：13836156
> 
> 赞同：0
> 
> 时间：2012-12-12T09:00:10.673
> 
> 标签：asp.net, google-chrome, flash, webforms

我遇到了 ASP.NET 网络表单、SWF 文件和 Google Chrome 的问题。

我正在使用表单包含的`runat="server"`属性，在表单内部，包含的按钮`runat="server"`和`onclick='Button1_Click'`asp.net 页面上的属性。swf 文件在第一次单击按钮时显示。当我再次发布表单时，未显示 swf 文件。我的意思是，表单的第二次回发存在问题。它适用于除 Chrome 之外的任何浏览器。这个问题有什么解决方法吗？

PS：没有更新面板。swf 文件放入 asp.net 转发器，该转发器放入表单中。

编辑：错误控制台返回我“拒绝执行 JavaScript 脚本。在请求中找到脚本的源代码。” 信息。

# javascript - 如何使用dom jquery在html页面中显示值

> ID：13836159
> 
> 赞同：1
> 
> 时间：2012-12-12T09:00:14.450
> 
> 标签：javascript, jquery, dom

我需要使用 dom jQuery 在 html 页面中显示值，但它不显示值。我的代码：

```
$(document.createElement("li"))
    .append(
        $(document.createElement("span"))
        .attr({
            id: id,
            name: name,
            value: name
        })
    )
    .addClass('firstli')
)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:06:44.530

`span`element 没有`value`属性，你应该使用它`text`。

```
var $li = $('<li/>');
$('<span/>', {
    id: layer.id,
    name: layer.name,
    text: layer.name,
    'class': 'bullet'
}).appendTo($li) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:11:55.503

尝试：

```
$("<li></li>").append(
    $("<span></span>").attr({
        id: layer.id,
        name: layer.name,
    }).text(layer.name)
).addClass('bullet').appendTo(document); 
```

并且可能您想将其附加到文档中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:06:08.710

使用上面的代码，您刚刚创建了元素，您仍然需要**将它们添加**到 DOM，您有[**几种方法**](http://api.jquery.com/category/manipulation/dom-insertion-inside/)，例如，您可以使用`.appendTo()`将元素附加到 DOM 中其他一些现有元素的末尾，所以您的以下行：

```
).addClass('bullet') 
```

将为此更改：

```
).addClass('bullet').appendTo('#someDOMelement'); 
```

# iphone - PayPal iOS MECL getInstance 方法崩溃

> ID：13836168
> 
> 赞同：0
> 
> 时间：2012-12-12T09:01:14.540
> 
> 标签：iphone, ios, crash, paypal

我正在为我的应用程序使用 Paypal-sdk 但尝试以下代码

```
[[PayPal getInstance] fetchDeviceReferenceTokenWithAppID:@"APP-<app id>" forEnvironment:ENV_SANDBOX withDelegate:self]; 
```

发生以下崩溃：

```
+[PayPal getInstance]: unrecognized selector sent to class 0x430588 
```

请帮助确定问题..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:52:07.900

您好，这个问题解决了。实际上，我使用的是与 ios5 不兼容的旧 sdk，它与 ios 5 版本不兼容。我更改了sdk，现在一切正常..

谢谢你的支持..

# sharepoint - 自定义组的 SharePoint 调查自定义查看/编辑/删除权限

> ID：13836170
> 
> 赞同：1
> 
> 时间：2012-12-12T09:01:18.097
> 
> 标签：sharepoint, permissions, survey

我正在 SharePoint 2007 中创建调查，并希望进行以下设置：

1.  调查对象只能查看/编辑/删除他们自己的回答
2.  SharePoint 组（由团队负责人/经理组成）可以查看所有回复，但不能编辑/删除（除非他们自己的调查回复）
3.  SharePoint 组（由团队领导组成）可以查看/编辑所有响应以向响应添加注释。组成员可以与组#2 成员相交。

我已经通过调查高级设置配置了上述 1。但我不确定2和3是否可能。我尝试了以下方法：

1.  创建了允许编辑/查看列表项的新权限级别。
2.  创建一个新组并分配 #1 权限级别

以上似乎不起作用。调查回复权限被调查设置覆盖，仅允许用户查看/编辑/删除他们自己的回复。

有什么建议吗？

谢谢。

# delphi - DBReg 中的本地属性编辑器类型

> ID：13836174
> 
> 赞同：0
> 
> 时间：2012-12-12T09:01:45.570
> 
> 标签：delphi, delphi-7, propertyeditor

我正在为 Delphi 7 创建自己的支持 DB 的网格控件。在`DBReg`单元中，Delphi 为支持 db 的控件注册属性编辑器，但几乎所有这些都是本地类型，所以我不能重用它们：

```
TDataSetProperty
TNestedDataSetProperty
TDataSourceProperty
TLookupSourceProperty
TLookupDestProperty
TLookupIndexProperty
TLookupFieldProperty 
```

为什么它们是本地类型，并且在较新版本的 delphi 中会发生变化？如果我只是将它复制到我的单位，这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:18:22.407

我希望设计人员将这些类限制在实现部分，以确保其他开发人员无法使用它们。

> 它在较新版本的delphi中会发生变化吗？

在 XE3 中，大概在 Delphi 7 以后的所有其他版本中，这些类型仍然局限于`DBReg`.

> 如果我只是将它复制到我的单位，这是一个好习惯吗？

不，它不会——这显然违反了 Delphi 许可证。

# objective-c - iOS静态表格视图不是那么静态

> ID：13836179
> 
> 赞同：0
> 
> 时间：2012-12-12T09:01:54.830
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我正在开发一个带有故事板的静态分组表视图。无论如何，有时我不想显示某些行。只要我想隐藏的行在中间，我就可以将该特定单元格的高度设置为 0 并且技巧有效:)

无论如何，当我想隐藏组的最后一个单元格时（我正在使用分组表视图），我的技巧显然不起作用。这是因为前一个单元格不会得到最后一个单元格典型的圆角。还有另一个技巧可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:29:15.097

我解决了实现该方法的问题

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

即使我使用的是静态表格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:18:28.523

在呈现后从表格视图中删除单元格的正确方法是使用名为 deleteRowsAtIndexPaths:withRowAnimation: 的 UITableView 方法。这是一个代码示例：

```
[tableView deleteRowsAtIndexPaths:@[myCellIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

# c# - 画两个半圆

> ID：13836180
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:01:55.960
> 
> 标签：c#, winforms

我想用两个半圆填充一个圆。一个在左侧，另一个在右侧。左边的圆圈应该是黑色的，另一边应该是蓝色的。

我如何实现这一目标？我试图填充一个椭圆，然后在它的一半上画一个矩形。这适用于圆的一半。但与另一半我有一个问题。

任何想法如何绘制完整的圆圈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:23:23.470

您可以使用`Graphics.DrawArc`来实现这一点。

创建一个 windows 窗体应用程序并将此代码放入窗体中以进行测试。

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    Rectangle rect = new Rectangle(10, 10, 320, 320);
    e.Graphics.DrawArc(new Pen(new SolidBrush(Color.Black), 10), rect, 90, 180);
    e.Graphics.DrawArc(new Pen(new SolidBrush(Color.Blue), 10), rect, 270, 180);
} 
```

然后更改矩形坐标以满足您的需要。

您可能想要查看的其他内容是`DrawPie`，，`FillPie`。从逻辑上思考，一个有两半的馅饼“应该”画出两个实心的半圆。上面的示例将仅绘制两个半圆的轮廓。

# c# - 如何解决这个错误 c#

> ID：13836182
> 
> 赞同：1
> 
> 时间：2012-12-12T09:02:08.930
> 
> 标签：c#, sql, sql-server, sql-server-2008

我想将数据插入数据库表：

```
myCommand.CommandText = "INSERT INTO Selectionner (IdPrestation,
   IdPhrase, DegreUrgence,RisqueConcerne,rowguid,Cotation) " +                                                               
   "VALUES   ('" +new Guid(emp.IdPrestation) + 
   "', '" +new Guid(emp.IdPhrase)+ "', '" +
   emp.DegreUrgence + "','" + emp.RisqueConcerne + "','" + 
   new Guid(emp.rowguid) + "','" + emp.Cotation + "')"; 
```

但这会返回一个错误：

> *Guid 应包含 32 位数字和 4 个破折号
> (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)。*

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:09:12.853

你的一个或多个

```
emp.IdPrestation //Or 
emp.IdPhrase //Or 
emp.rowguid //Check them before creating 
```

是/不是一个`GUID`. *这就是它抛出错误的原因。*

**编辑：**开始

`Guid.TryParse()`如果解析操作成功，如何使用which 返回 true；否则为假。

```
//How to parse safely
Guid IdPrestation;
Guid IdPhrase;
Guid rowguid;

if(Guid.TryParse(emp.IdPrestation, out IdPrestation) &&
   Guid.TryParse(emp.IdPhrase, out IdPhrase) &&
   Guid.TryParse(emp.rowguid, out rowguid) )
{
   //all variables have been parse successfully
   //Execute the sql query as follows using parameters
} 
```

**编辑：**结束

此外，使用内联 sql 将参数作为直接字符串传递是一个`unsafe bad practice`. 相反`use a parameterised query`。

```
myCommand.CommandText = "INSERT INTO yourTableName (c1, c2, ...)
VALUES (@p1, @p2,...)";
myCommand.Parameters.Add(new SqlParameter("p1", valueforCol1));
myCommand.Parameters.Add(new SqlParameter("p2", valueforCol2));
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T09:13:43.380

尝试使用参数化查询作为第一个改进。

然后，尝试使用[Guid.Parse(string s)](http://msdn.microsoft.com/en-us/library/system.guid.parse.aspx)而不是[new Guid(string s)](http://msdn.microsoft.com/en-us/library/96ff78dc.aspx)。这样，我希望会为不符合要求的字符串引发异常。

构造函数可能有点宽松，在这种情况下，您可能希望快速失败，以便知道哪个字段给您带来麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:21:06.897

You cannot create GUID simply from a string ,the string needs to be guid compliant

```
Guid originalGuid = Guid.NewGuid();
originalGuid.ToString("B")  gets converted to {81a130d2-502f-4cf1-a376-63edeb000e9f} 
```

Similarly

```
"N" - xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx (32 digits)
"D" - xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx (32 digits separated by hyphens)
"B" - {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx} (same as "D" with addition of braces)
"P" - (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx) (same as "D" with addition of parentheses)
"X" - {0x00000000,0x0000,0x0000,{0x00,0x00,0x00,0x00,0x00,0x00,0x00.0x00}} 
```

The guid itself has no format. It is just a value. Note, that you can create guids using NewGuid or using the guid's constructor. Using NewGuid, you have no control over the value of the guid. Using the guid's constructor, you can control the value. Using the constructor is useful if you already have a string representation of a guid (maybe you read it from a database) or if you want to make it easier to interpret a guid during development. You can also use the [Parse](http://msdn.microsoft.com/en-us/library/system.guid.parse.aspx), [ParseExact](http://msdn.microsoft.com/en-us/library/system.guid.parseexact.aspx), [TryParse](http://msdn.microsoft.com/en-us/library/system.guid.tryparse.aspx), and [TryParseExact](http://msdn.microsoft.com/en-us/library/system.guid.tryparseexact.aspx) methods.

So, you can create guids like this:

```
Guid g1 = Guid.NewGuid(); //Get a Guid without any control over the contents
Guid g2 = new Guid(new string('A',32)); //Get a Guid where all digits == 'A'
Guid g3 = Guid.Parse(g1.ToString());
Guid g4 = Guid.ParseExact(g1.ToString("D"),"D");
Guid g5;
bool b1 = Guid.TryParse(g1.ToString(), out g5);
Guid g6;
bool b2 = Guid.TryParseExact(g1.ToString("D"),"D", out g6); 
```

# ajax - Ajax：在rails3 + formtastic中检索数据

> ID：13836183
> 
> 赞同：1
> 
> 时间：2012-12-12T09:02:14.433
> 
> 标签：ajax, ruby-on-rails-3, formtastic

我已经成功地尝试使用 ajax 表单在我的示例表单中保存 ajax。

新值将添加到数据库中。但问题在于，一旦我通过 ajax 保存，就从数据库中检索列表。

怎么做。？

添加新记录后，我希望更新显示列表。添加新记录和列出数据库中的数据的选项都在同一页面中

这是我的索引页面。控制器和所有其他通过脚手架创建的

```
<h1>Listing samples</h1>

<table>
  <tr>
<th><%=t :Name%></th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @samples.each do |sample| %>
  <tr>
    <td><%= sample.name %></td>
    <td><%= link_to 'Show', sample %></td>
    <td><%= link_to 'Edit', edit_sample_path(sample) %></td>
    <td><%= link_to 'Destroy', sample, :method => :delete, :data => { :confirm => 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Sample', new_sample_path %>

<br /><br /><br /><br /><br />
<%= semantic_form_for @sample1,:url => samples_path, :remote => true do |f| %>
  <%= f.inputs do %>

    <%= f.input :name %>
  <% end %>
  <%= f.actions do %>
    <%= f.action :submit, :as => :input %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:32:05.190

当您通过 ajax 保存时，您可能需要更改控制器的响应方式，有点像这样：

```
def create
  # stuff
  respond_to do |format|
    format.js
  end
end 
```

当您执行此操作时，rails 会希望您创建一个名为 的文件`create.js.erb`，您可以在其中操作视图的数据（将新内容附加到表中，使用新对象列表渲染一个全新的部分，等等）：

```
$('#your_list').html(
  "<%= escape_javascript(render('your_table_partial')) %>"
); 
```

或者

```
$('#your_list').append(
  "<%= escape_javascript(render('your_item_of_the_table_partial')) %>"
); 
```

这些只是示例，我不知道您的代码足以为您编写正确的代码，但您肯定可以将这些用作您工作的基础。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T05:47:31.010

我使用这些指南进行了 CRUD 操作，效果很好

[http://stjhimy.com/posts/07-creating-a-100-ajax-crud-using-rails-3-and-unobtrusive-javascript](http://stjhimy.com/posts/07-creating-a-100-ajax-crud-using-rails-3-and-unobtrusive-javascript)

# ruby-on-rails - Ruby 类“拆分”不起作用

> ID：13836186
> 
> 赞同：-2
> 
> 时间：2012-12-12T09:02:20.070
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用 split 类来拆分数组。我不断收到此错误：

```
MethodError (undefined method `split' for nil:NilClass): 
```

这就是我想要做的：def create

```
 @listing.landlord = current_landlord
    if @listing.save
      photo_id_array = params[:images].split(/,/)
      photo_id_array.each do |image|
        @image = Photo.find_by_id("photo.id")
        @image.listing_id = @listing.id
      end
      render :show, :status => 200
    else
      render :status => 403, :json => {:errors => @listing.errors}
    end
  end 
```

我正在运行 Rails 3.2.9。关于可能导致这种情况的任何想法？

编辑：

这是完整的帖子：

```
Started POST "/listings" for 127.0.0.1 at 2012-12-12 01:04:52 -0800
Processing by ListingsController#create as application/json; charset=utf-8
  Parameters: {"listing"=>{"street_address"=>"123 main st", "city"=>"los angeles", "state"=>"ca", "availability"=>"12 Dec 2012", "price"=>"2000", "period"=>"2", "category"=>"1", "cats"=>"false", "dogs"=>"false", "square_footage"=>"0", "bedrooms"=>"3", "bathrooms"=>"2", "short_description"=>"tree-lined street", "long_description"=>"big yard", "images"=>["70621", "70622", "70620"]}, "auth_token"=>"6489Cn7KeTmejSxaWsws"}
WARNING: Can't verify CSRF token authenticity
  User Load (1.6ms)  SELECT "users".* FROM "users" WHERE "users"."authentication_token" = '6489Cn7KeTmejSxaWsws' LIMIT 1
  Landlord Load (0.6ms)  SELECT "landlords".* FROM "landlords" WHERE "landlords"."authentication_token" = '6489Cn7KeTmejSxaWsws' LIMIT 1
  Role Load (0.5ms)  SELECT "roles".* FROM "roles" WHERE "roles"."name" = 'admin' LIMIT 1
  Role Exists (0.7ms)  SELECT 1 AS one FROM "roles" INNER JOIN "landlords_roles" ON "roles"."id" = "landlords_roles"."role_id" WHERE "landlords_roles"."landlord_id" = 5867 AND "roles"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 275ms

NoMethodError (undefined method `split' for nil:NilClass):
  app/controllers/listings_controller.rb:8:in `create'

  Rendered /Users/rigelstpierre/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/rigelstpierre/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /Users/rigelstpierre/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.9ms) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:09:15.863

采用：

```
params[:listing][:images] 
```

而且它已经是一个Array，不需要拆分。你可以直接做：`params[:listing][:images].each`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T09:09:19.950

`params[:images]`是零，你在`params[:listing][:images]`我假设之后。

您的参数结构如下`"listing"=>{"images"=>["70621", "70622", "70620"]}`：

另外，你不需要拆分它，它是一个数组。使用以下命令访问数组的每个项目：`params[:listing][:images].each do |i|`

# tomcat - Apache tomcat 启动

> ID：13836187
> 
> 赞同：3
> 
> 时间：2012-12-12T09:02:20.220
> 
> 标签：tomcat, batch-file

我正在尝试通过命令提示符启动 tomcat 服务器，但未`CATALINE_HOME`设置其显示变量。我已经通过控制面板设置了变量，然后同样的错误也来了。

如果我直接转到`starttup.bat`文件并尝试运行它，它只会闪烁并消失。所以我尝试在最后添加暂停命令，然后当我运行时我得到

```
using CATALINA _BASE :"C:\apache-tomcat-7.0.26"
using CATALINA _HOME:"C:\apache-tomcat-7.0.26"
using CATALINA _TMPDIR :"C:\apache-tomcat-7.0.26\temp"
using JRE_HOME :"C:\programfiles\java\jre"
using CLASSPATH :"C:\apache-tomcat-7.0.26\bin\bootstrap.jar;"C:\apache-tomcat-7.0.26\bin\tomcat-juli.jar 
```

这是最近的目录内容。

```
 ... 17 more
Dec 12, 2012 3:59:17 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Dec 12, 2012 3:59:17 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 445 ms
Dec 12, 2012 3:59:17 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Dec 12, 2012 3:59:17 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.26
Dec 12, 2012 3:59:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.26\webapps\docs
Dec 12, 2012 3:59:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.26\webapps\examples
Dec 12, 2012 3:59:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.26\webapps\host-manager
Dec 12, 2012 3:59:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.26\webapps\manager
Dec 12, 2012 3:59:17 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\apache-tomcat-7.0.26\webapps\ROOT
Dec 12, 2012 3:59:17 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Dec 12, 2012 3:59:17 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 468 ms
Dec 12, 2012 4:01:06 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-8080"]
Dec 12, 2012 4:01:06 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
Dec 12, 2012 4:01:06 PM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Dec 12, 2012 4:01:06 PM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"]
Dec 12, 2012 4:01:06 PM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-8080"]
Dec 12, 2012 4:01:06 PM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-8080"]
Dec 12, 2012 4:01:06 PM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["ajp-bio-8009"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T07:26:52.217

您必须先定义两个变量

1.  Java_首页
2.  CATALINA_HOME

以下是您可以在此处使用的 bat 文件`%TOMCAT_LOC%`= 您的 tomcat 路径（请不要包含 bin）

```
echo Stopping Tomcat App Server
cd /D %TOMCAT_LOC%
set JAVA_HOME=C:\Program Files\jdk echo java Path
set CATALINA_HOME=%TOMCAT_LOC%
call %TOMCAT_LOC%\bin\shutdown.bat
echo Stopped Tomcat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:04:19.087

这可能是因为该进程已经在后台运行。`shutdown.bat`如有必要，请致电停止。

否则，您应该能够在 访问该经理`http://localhost:8080/html/manager`。在此之前，您可能需要先配置用户/密码，然后重新启动 tomcat。

请参阅[tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access)以了解更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-13T18:57:04.880

您可以移动到包含批处理文件（tomcat/bin）的路径，然后运行批处理文件

C:\用户>cd C:\apache-tomcat-6.0.35\bin

C:\apache-tomcat-6.0.35\bin>startup.bat

# objective-c - 应用程序打开到空白黑屏

> ID：13836189
> 
> 赞同：0
> 
> 时间：2012-12-12T09:02:42.933
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

我正在制作一个将导航控制器嵌入标签栏控制器的应用程序。现在，当我打开应用程序时，我得到的只是一个空白的黑屏。

这是我的代码

```
PDCFirstViewController *viewController1 = [[PDCFirstViewController alloc] 
initWithNibName:@"PDCFirstViewController" bundle:nil];

PDCSecondViewController *viewController2 = [[PDCSecondViewController alloc] 
initWithNibName:@"PDCSecondViewController" bundle:nil];

ViewController *viewController3 = [[ViewController alloc] 
initWithNibName:@"ViewController" bundle:nil];
UINavigationController *navigationcontroller = [[UINavigationController alloc] 
initWithRootViewController:viewController3];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray  
arrayWithObjects:viewController1,viewController2,navigationcontroller, nil];

[self.window makeKeyAndVisible]; 
```

我是否需要添加一些东西或做一些不同的事情来使应用程序显示？任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:15:28.700

你不见了`rootviewcontroller`

添加这个

```
self.window.rootViewController = self.tabBarController; 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:12:23.837

```
self.window.rootViewController = self.tabBarController; 
```

应该这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:13:06.787

```
self.window.rootViewController = self.tabBarController; 
```

# spring-mvc - Hibernate 4+spring3.2集成报错

> ID：13836190
> 
> 赞同：1
> 
> 时间：2012-12-12T09:02:43.210
> 
> 标签：spring-mvc, hibernate-4.x

我正在尝试使用 hibernate 4 实现 spring mvc 3.2。我在启动应用程序时包含了所有 jars `hibernate.jpa.2.0.1`，但我遇到了异常。

下面给出的异常堆栈。

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/hibernate-context.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.UniqueConstraint.name()Ljava/lang/String;
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:589)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NoSuchMethodError: javax.persistence.UniqueConstraint.name()Ljava/lang/String;
    at org.hibernate.cfg.annotations.TableBinder.buildUniqueConstraintHolders(TableBinder.java:548)
    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:563)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processAnnotatedClassesQueue(Configuration.java:3443)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3397)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1341)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1788)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:242)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:372)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:357)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    ... 27 more
Dec 12, 2012 1:53:52 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Dec 12, 2012 1:53:52 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/lifekareremote2] startup failed due to previous errors
Dec 12, 2012 1:53:52 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Dec 12, 2012 1:53:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/lifekareremote2] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Dec 12, 2012 1:53:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/lifekareremote2] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0] but has failed to stop it. This is very likely to create a memory leak.
Dec 12, 2012 1:53:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/lifekareremote2] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1] but has failed to stop it. This is very likely to create a memory leak.
Dec 12, 2012 1:53:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/lifekareremote2] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2] but has failed to stop it. This is very likely to create a memory leak.
Dec 12, 2012 1:53:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/lifekareremote2] appears to have started a thread named [MySQL Statement Cancellation Timer] but has failed to stop it. This is very likely to create a memory leak.
Dec 12, 2012 1:53:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/lifekareremote2] appears to have started a thread named [Resource Destroyer in BasicResourcePool.close()] but has failed to stop it. This is very likely to create a memory leak. 
```

# jquery - jQuery live 方法中的 serializeArray

> ID：13836196
> 
> 赞同：-2
> 
> 时间：2012-12-12T09:02:59.107
> 
> 标签：jquery

用javascript填充后`select`，我无法获得价值。我的选择是`multiple`时代。
单击保存后的此代码必须显示方法`select`中的所有项目`.live()`。
该代码不起作用，如果不单击选项，我无法获取所有选项。

[演示版](http://jsfiddle.net/pBQFF/18/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:25:15.300

```
$('[name="to[]"] option') 
```

将返回所有选项。

见[小提琴](http://jsfiddle.net/barmar/pBQFF/24/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:05:07.440

我可以修复问题。

```
 $('#saveToDb').live("click",function(){
        $('[name="to[]"] option').prop('selected',true)
        alert($('[name="to[]"]').val())
        //alert($('[name="to[]"] option').serializeArray());
    }); 
```

# string - 使用 R 在多个列表中均匀分布重复的字符串

> ID：13836198
> 
> 赞同：1
> 
> 时间：2012-12-12T09:03:07.030
> 
> 标签：string, r, distribution

所以假设我有一个长度为 150000 的字符向量。向量中的字符串不是唯一的，实际上它们是正态分布的，最常见的字符串出现 28 次，另外 24 个，超过 1000 个出现超过 5 次。我想将向量分成 28 个较小的向量，将字符串分布在较小的向量中，这样每个较小的向量中没有字符串出现超过两次，理想情况下只有一次（或不存在）。我需要保留每个字符串，所以我不能这样做`!duplicated()`理想情况下，向量的大小大致相同。

我该怎么做？

我在想像开始添加到第一个向量直到遇到第一个非唯一字符串，跳过它，继续填充跳过非唯一字符串直到达到 150000/28 = 5357，然后继续处理其他向量同样，一旦将字符串分配给较小的字符串，就从父向量中删除字符串？这有什么问题吗？没有令人讨厌的for循环森林的有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:24:27.363

这似乎是一个非常有趣的问题，尽管它可能只是因为我误解了它才显得有趣——我在这里得到的解决方案创建`length of character vector / frequency of most frequent item`子向量，然后将每个字符串放入`f`这些子向量中，`f`该字符串的频率在哪里。这可能比您实际要求的要复杂。

```
library(plyr)
# I created a file with 10000 random strings and a roughly similar frequency 
# distribution using python, and now I can't remember exactly what I did
strings <- read.csv("random_strings.txt", header=FALSE,
                    stringsAsFactors=FALSE)$V1
freq_table <- table(strings)

num_sub_vectors <- max(freq_table)
# Create a list of empty character vectors
split_list <- alply(1:num_sub_vectors, 1, function(x) return(character(0)))
for (s in names(freq_table)) {
  # Put each string into f of the sub-vectors, where f is the string's 
  # frequency
  freq <- freq_table[[s]]
  # Choose f random indexes to put this string into
  sub_vecs <- sample(1:num_sub_vectors, freq)
  for (sub in sub_vecs) {
    split_list[[sub]] <- c(split_list[[sub]], s)
  }
} 
```

要测试它是否有效，请选择一个字符串`s`或一个频率`f`，并检查子向量中`s`出现的情况。`f`重复直到你有信心。

```
> head(freq_table[freq_table==15])
strings
ad ak bj cg cl cy 
15 15 15 15 15 15 
> sum(sapply(split_list, function(x) "ad" %in% x))
[1] 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:08:52.993

这可以相当简洁地满足您的要求（每个字符串每个子向量只有一次），只需计算每个字符串出现的频率，然后根据“出现 i 次或更多次的字符串”进行分区：

```
inputs <- c("foo", "bar", "baz", "bar", "baz", "bar", "bar")
histo <- table(inputs)
lapply(1:max(histo), function(i) { names(histo)[histo>=i] } 
```

这当然会产生大小差异很大的分区，但您不太清楚您在该区域的要求是什么。

# fullscreen - SecurityError：错误 #2152，无法切换到全屏模式

> ID：13836201
> 
> 赞同：1
> 
> 时间：2012-12-12T09:03:13.177
> 
> 标签：fullscreen, runtime-error, stagedisplaystate

这是我的代码：

```
 private function onSwitchFullScreen(event:Event):void{
        try {
            switch (VariablesGenerales._flash_stage.displayState) {
                case StageDisplayState.FULL_SCREEN:
                    // si on est déjà en FULL SCREEN, on se remet en normal
                    VariablesGenerales._flash_stage.displayState = StageDisplayState.NORMAL;
                    trace(">>>>> SWITCH TO NORMAL SCREEN");
                    break;
                default:
                    // si on est pas en full screen, on passe en plein écran
                    VariablesGenerales._flash_stage.displayState = StageDisplayState.FULL_SCREEN;
                    trace(">>>>> SWITCH TO FULL SCREEN");
                    break;
            }
        } catch (err:SecurityError) {
            // ignore
            trace(">>>>> FAIL TO SET FULLSCREEN");
        }
    } 
```

就像在这个问题的其他帖子中一样，我有 Flash 播放器 11.5+，我在所有提到它的地方都将 allowFullScreen 模式设置为“true”，但我仍然无法将我的项目全屏显示，我得到“无法设置全屏”。我在网络中执行它，而不是独立执行。任何想法？谢谢！

# zend-framework - Zend_Date 比较两个日期

> ID：13836202
> 
> 赞同：0
> 
> 时间：2012-12-12T09:03:13.597
> 
> 标签：zend-framework, frameworks, zend-date

我有两个日期作为`Zend_Date()`. 我必须检查以下内容：

1.  如果这些日期在同一个月的某一天（例如：每月的第二天，年份无关紧要），
2.  如果日期来自同一天（例如 2012 年 12 月 2 日）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T16:59:49.667

To check the dates are the exact same day, you can check each individual part separately.

```
Zend_Date('your-date-here',Zend_Date::DAY); 
```

This returns a date object that specifically gives you the day for the 'your-date-here' and it accepts a variety of formats; for example, I use php's date function as:

```
$myDate = date('Y-m-d-H-i-s');  
$dateDayObject = Zend_Date($myDate, Zend_Date::DAY); 
```

and now $dateDayObject will have the value of the 'd' in it.
You can use DAY, WEEK, YEAR... there are many constant all defined here:

[http://framework.zend.com/manual/1.12/en/zend.date.constants.html](http://framework.zend.com/manual/1.12/en/zend.date.constants.html)

Finally, to test if they are in the same day of the month, you can use a combination of loops and if statement and the same method as above to write your own function to check the day within the month or there may be a defined constant for it. Good luck.

# flash - JavaScript中Flash Sockets背后的概念是什么（就像socket.io一样）？

> ID：13836204
> 
> 赞同：0
> 
> 时间：2012-12-12T09:03:23.780
> 
> 标签：flash, websocket, socket.io

我对 Flash 套接字以及如何在 Java Script 中使用它们很感兴趣。例如 socket.io 可以使用 Flash 套接字，但这是如何实现的呢？我认为没有 swf 文件。

目前，我对背后的概念比对代码更感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:13:09.550

The [web-socket-js](https://github.com/gimite/web-socket-js) library provides everything that's required to use Flash Socket fallback when the `WebSocket` object is not natively available.

The README should provide you with all the information you need.

# c# - 如何使用 Multi-Mapper 创建多个一对多对象层次结构

> ID：13836205
> 
> 赞同：2
> 
> 时间：2012-12-12T09:03:29.737
> 
> 标签：c#, linq, dapper

我有我的 2 个模型，如下所示

```
public  class FItem
        {
            public FItem() { }

            public int RecordId { get; set; }
            public int MarketId { get; set; }
            public string ItemName { get; set; }
            public string ItemFamily { get; set; }
            public string HoverFamily { get; set; }
            public string ItemDesc { get; set; }                

            public IEnumerable<FSubsystem> FSubsystems { get; set; }
       }

   public class FSubsystem
        {
            public FSubsystem() { }

            public int FSubsystemId { get; set; }
            public int RecordId { get; set; } //Foreign key
            public int supplierId { get; set; }
            public int SubSystemTypeId { get; set; }
            public double Percentage { get; set; }
            public double? Value { get; set; }
        }

 public class FReferences
 {
     public FReferences() { }

     public int RecordID { get; set; } //Foreign key
     public int SourceID { get; set; }
     public DateTime SourceDate { get; set; }
     public string Reference { get; set; } 
     public int? ReferenceID { get; set; }
 } 
```

我使用 dapper 来获取数据并放入对象中。代码如下

```
using (var multi = mapperConnection.QueryMultiple("USP_FetchMarketRecords", parameters, (SqlTransaction)null, 1000000, CommandType.StoredProcedure))
            {
                    IEnumerable<MarketRecord.FItem> FItem = multi.Read<MarketRecord.FItem>().ToList();                        
                    IEnumerable<MarketRecord.FSubsystem> FSubsystem = multi.Read<MarketRecord.FSubsystem>().ToList();                        
            } 
```

现在我想获取每个记录 id 的子系统并将它们放在 Fitem 的 FSubsystems 属性中。我怎样才能做到这一点 ？

在这里，我只展示了与 FItem 的一对多关系，即 Fsubsystem 。但是我有很多一对多的表来 Fitem，比如 FReferenc、FUnit 等。对于所有外键都是 RecordId itelf。

这可以通过 linq 查询来完成吗？还是我应该使用一些差异技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:32:59.123

Dapper 不包含任何内置的东西来从不同的集合中重建父/子关系。

您可能可以概括以下场景：

```
static void ApplyParentChild<TParent, TChild, TId>(
    this IEnumerable<TParent> parents, IEnumerable<TChild> children,
    Func<TParent, TId> id, Func<TChild, TId> parentId,
    Action<TParent, TChild> action)
{
    var lookup = parents.ToDictionary(id);
    foreach (var child in children)
    {
        TParent parent;
        if (lookup.TryGetValue(parentId(child), out parent))
            action(parent, child);
    }
} 
```

所以如果我们有：

```
List<Parent> parents = new List<Parent> {
    new Parent { Id = 1 },
    new Parent { Id = 2 }
};
List<Child> children = new List<Child> {
    new Child { Id = 3, ParentId = 1},
    new Child { Id = 4, ParentId = 2},
    new Child { Id = 5, ParentId = 1}
}; 
```

你可以使用：

```
parents.ApplyParentChild(children, p => p.Id, c => c.ParentId,
    (p,c) => p.Children.Add(c)); 
```

# c# - 抛出 WebFaultException 时 WCF 休息服务不需要重试

> ID：13836209
> 
> 赞同：2
> 
> 时间：2012-12-12T09:03:47.550
> 
> 标签：c#, wcf

我正在使用通过 JS ajax 调用调用的 WCF Rest 服务。

对于某些方法，如果发生异常，它会被捕获并包装在[WebFaultException](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webfaultexception.aspx)中，该异常的状态代码设置为 500（内部服务器错误）并被抛出。

对于具有这种行为的方法，我们注意到在某个时间点产生异常的整个调用链被重试了看似随机的次数，有时只是一次，有时是 3、5 甚至 7 次，然后控制传递返回客户端并显示错误消息。

WebService 在 IIS 中运行，如果我将调试器连接到它，重试逻辑将不再发生，可能是因为 VisualStudio 由于未处理的异常而停止执行。

起初，这种行为似乎指向[WS-ReliableMessaging](http://msdn.microsoft.com/en-us/library/aa480191.aspx)，但从文档中应该明确启用它。Anb 我们使用的是 WebHttpBinding，不支持 afaik。

如果我将异常行为更改为不抛出`WebFaultException`，则此行为将停止。

为什么会这样？

# java - 如何读取写在图像android上的文本

> ID：13836210
> 
> 赞同：-5
> 
> 时间：2012-12-12T09:03:48.980
> 
> 标签：java, android

我在不同的地方有一张带有文字的图片，我想阅读此文字并将其显示在日志中。有人可以分享一些有关如何在 android 应用程序中执行此操作的有用信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:14:24.087

如果文本是图像的一部分，则需要使用 OCR 包。

Tesseract 是一个带有 android 端口的开源 OCR（参见[https://github.com/rmtheis/tess-two](https://github.com/rmtheis/tess-two)）。

所以帖子：

[如何阅读写在图像上的文字？](https://stackoverflow.com/questions/842986/how-to-read-text-written-on-a-image)

[是否有适用于 Android 的免费 OCR 库？](https://stackoverflow.com/questions/1106202/android-ocr)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T09:11:16.680

它是如此简单。采用相对布局并将 ImageView 和 TextView 放入其中。看看[这里](https://stackoverflow.com/questions/5242951/android-text-over-image)

# jakarta-ee - 如何使用 Blueprint 将 OSGi 服务注入 EJB

> ID：13836212
> 
> 赞同：2
> 
> 时间：2012-12-12T09:03:54.760
> 
> 标签：jakarta-ee, ejb, osgi, blueprint-osgi

我知道可以使用[ServiceTracker](http://www.osgi.org/javadoc/r4v42/org/osgi/util/tracker/ServiceTracker.html)将 OSGi 服务注入 EJB。

但是，我应该如何使用[OSGi Blueprint XML 配置](http://www.ibm.com/developerworks/opensource/library/os-osgiblueprint/)向标准 EJB 注入服务，以便在其他地方使用 EJB 时可以使用服务？还是真的不可能，因为 EJB 在它们自己的层中工作？

我一直在尝试使用 Aries Blueprint 和 Gemini Blueprint 以及 JBoss AS7 来做到这一点，但没有运气。

作为示例bean：

```
import javax.annotation.PostConstruct;
import javax.ejb.LocalBean;
import javax.ejb.Stateless;

import org.osgi.framework.BundleContext;

@Stateless
@LocalBean
public class SimpleStatelessSessionBean {

  InformationService service; // how'd I go about to get this populated?

  @PostConstruct
  public void init() {

  }

  public String getMessage() {

    if (service == null)
      throw new IllegalStateException("Service not available");

    return "EJB:" + service.getMessage();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:13:01.047

看来我问的不太可能。

可能的是

*   对于 spring 应用程序，使用结合了 spring 注入和 OSGi 的[Gemini Blueprint](http://www.eclipse.org/gemini/blueprint/)
*   对于 ejbs/servlet，使用 CDI/OSGi 集成组件。至少存在用于 Pax Web 和[JBoss Weld OSGi 集成的](http://mathieuancelin.github.com/weld-osgi/html/index.html)[PAX CDI](http://team.ops4j.org/wiki/display/PAXCDI/Pax+CDI)（[现在有点可用](https://Fwww.jboss.org/dms/judcon/presentations/London2011/day2session4.pdf)，[正在用于 JBoss AS](https://issues.jboss.org/browse/AS7-6073)）
*   对于任何应用程序，当其他应用程序失败时，ServiceTracker 的编程使用都有效

# php - 为另一个表中存在的每个 id 创建表

> ID：13836215
> 
> 赞同：0
> 
> 时间：2012-12-12T09:04:22.410
> 
> 标签：php, mysql

我想知道是否有一种方法可以为另一个表中存在的每个 ID 创建一个 MySQL 表。我认为用 PHP 做到这一点相当容易，但我不确定是否可以用 MySQL 做到这一点。

因此，例如，我有一个名为`users`X 列的表。一列是 ID 列。所以我想遍历该列并获取 ID 并为每个 ID 创建一个新表，其名称为`"user_specific_id_ " + ID`. 所以对于 ID `1`，新创建的表的名称是`user_specific_id_1`.

以上可以仅使用 MySQL 完成，还是必须使用 PHP ？如果我需要使用 PHP，方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:11:29.187

我不熟悉纯 MySQL 方式。使用 PHP，您将从表中选择所有 id，然后在`foreach`循环中发出`CREATE TABLE user_specific_id + $id`查询

话虽如此，为每个用户创建一个单独的表听起来不像是处理数据库的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:11:50.637

这听起来是个非常糟糕的主意。

这是一个坏主意，因为您不能使用 mysql 体面地加入表。

考虑为所有用户创建一个包含多列主键的表，而不是为每个用户创建一个表。

当然，您可以使用 PHP 执行您所描述的操作，例如使用 PDO。

# c# - 闪烁文本已更改

> ID：13836217
> 
> 赞同：2
> 
> 时间：2012-12-12T09:04:27.043
> 
> 标签：c#, wpf, scintilla

我在我的 WPF 应用程序中使用 Scintilla 文本编辑器，我想让用户只编辑空格：插入、删除、替换等。我想处理之前的文本插入事件和之前的文本删除事件，但是没有...我怎样才能防止插入/删除`e.Handled = true`？`TextModifiedEventArgs`对`KeyDown`我来说还不够，因为它并不总是代表更改的文本......我尝试了以下代码：

```
 static void scintilla_BeforeTextModified(object sender, TextModifiedEventArgs e)
    {
        var scintilla = (Scintilla) sender;
        if (scintilla != null)
        {
            if (!string.IsNullOrWhiteSpace(scintilla.Selection.Text) || !string.IsNullOrWhiteSpace(e.Text))
            {
                // flag to ignore the change
                _ignoreTextChanges = true;
                // save text before modified
                _text = scintilla.Text;                  
            }  }

        }   private void _scintilla_TextChanged(object sender, EventArgs e)
    {
        if (!_suspendTextChanges)
        {
            _suspendTextChanges = true;
            if (_ignoreTextChanges)
            {
                _ignoreTextChanges = false;
                Text = _text;

                _scintilla.Text = _text;
            }
            else
            {
                Text = _scintilla.Text;
            }
            _suspendTextChanges = false;
        }
        _ignoreTextChanges = false;
    } 
```

但是我设置的文本在闪烁中没有改变......有人可以帮助我吗？

谢谢...

# android - 具有九个补丁文本视图背景的工件

> ID：13836220
> 
> 赞同：0
> 
> 时间：2012-12-12T09:04:47.783
> 
> 标签：android, textview, nine-patch

我有一个`TextView`who`layout_width`设置为`wrap_content`. 我使用九个补丁图像作为背景。TextView 的内容会定期刷新（我使用休眠一段时间然后启动处理程序的线程）。经过几次迭代后，出现了一些伪影。我可以看到一些较早消息的部分文本和背景（它的宽度大于当前显示的消息的宽度）。可能是什么问题呢？

```
public void onCreate{
   ...
   helpField = (TextView) findViewById(R.id.helpField);
   ...
}

private class PeriodicHelp extends Thread{
    private static final int SLEEP_TIME = 4000;
    private static final int NUM_HELP_PHRASES = 5;

    private String getHelp(){
        int pos = randomGenerator.nextInt(NUM_HELP_PHRASES);
        return helpPhrases[pos];
    }

    public void run(){
        int i = 0;
        while(true){
            try {
                Thread.sleep(SLEEP_TIME);
                Log.d(TAG, "periodicHelp " + Integer.toString(i));
                i++; //used just for debugging
                mHandler.post(new Runnable(){
                    public void run() {
                        String help = getHelp();
                        helpField.setText(help);
                    }
                });
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }
} 
```

我开始我的 PeriodicHelp 线程`onStart()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:05:22.640

我设法解决了这个问题。这是代码

```
public void onCreate{
   ...
   helpField = (TextView) findViewById(R.id.helpField);
   rl = (RelativeLayout) findViewById(R.id.mainView); //this RelativeLayout contains
                                                      //helpField  TextView     
   ...
}

private class PeriodicHelp extends Thread{
private static final int SLEEP_TIME = 4000;
private static final int NUM_HELP_PHRASES = 5;

private String getHelp(){
    int pos = randomGenerator.nextInt(NUM_HELP_PHRASES);
    return helpPhrases[pos];
}

public void run(){
    int i = 0;
    while(true){
        try {
            Thread.sleep(SLEEP_TIME);
            Log.d(TAG, "periodicHelp " + Integer.toString(i));
            i++; //used just for debugging

            rl.postInvalidate();//THIS LINE FIX THE PROBLEM

            mHandler.post(new Runnable(){
                public void run() {
                    String help = getHelp();
                    helpField.setText(help);
                }
            });
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
} 
```

}

# java - 如何为复合创建动作

> ID：13836223
> 
> 赞同：0
> 
> 时间：2012-12-12T09:05:13.633
> 
> 标签：java, swt, action, composite

我已经创建了自己的`org.eclipse.swt.widgets.Composite`. 我在`org.eclipse.jface.wizard.WizardPage`.

`org.eclipse.swt.widgets.Composite`有一个变量`pageComplete`。在 Composite 发生任何更改或每次更改此变量后，我都必须检查此变量的值。它是怎么做到的？

我的第一个想法是为 Composite 创建自己的动作，但我不知道该怎么做。

或者也许有人可以想出更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:12:43.990

如果您有这个问题 - 请阅读[这篇](http://www.vogella.com/articles/EclipseDataBinding/article.html#swtdatabinding)文章

感谢[@mmoulis](https://stackoverflow.com/users/1791093/mmoulis)

ps：我是怎么做到的

添加到`org.eclipse.swt.widgets.Composite`类值：

```
private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this); 
```

并添加了两种方法

```
public void addPropertyChangeListener(PropertyChangeListener listener) {
    propertyChangeSupport.addPropertyChangeListener(listener);
}

public void removePropertyChangeListener(PropertyChangeListener listener) {
    propertyChangeSupport.removePropertyChangeListener(listener);
} 
```

并在 pages 类中添加了监听器`org.eclipse.swt.widgets.Composite`

```
composite.addPropertyChangeListener(new PropertyChangeListener() {
    @Override
    public void propertyChange(PropertyChangeEvent evt) {
    }
}); 
```

这一切（：

# dependency-injection - 如何使用 Unity 引导 AutoMapper？

> ID：13836235
> 
> 赞同：7
> 
> 时间：2012-12-12T09:05:52.750
> 
> 标签：dependency-injection, unity-container, automapper, ioc-container

我需要`Unity`用作我的 DI 容器并想要引导`AutoMapper`。

使用`StructureMap`我可以这样做；

```
For<IMappingEngine>().Use(() => Mapper.Engine); 
```

我该怎么做`Unity`？

我已经使用包管理器来获取当前最新版本的`AutoMapper`2.2.1-ci9000，但如果更简单，也可以使用 2.2.0。我使用 2.1.505.0 版本`Microsoft.Practices.Unity`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T11:03:32.533

这应该有效：

```
container.RegisterType<IMappingEngine>(new InjectionFactory(_ => Mapper.Engine)); 
```

# asp.net-mvc - CouchDB 的优缺点

> ID：13836240
> 
> 赞同：3
> 
> 时间：2012-12-12T09:06:17.473
> 
> 标签：asp.net-mvc, couchdb

我正在考虑将 CouchDB 用作大量使用 JSON 的 ASP.NET Web API/Web 应用程序的后端。

我对以下方面的利弊感兴趣：

*   复制
*   平台依赖（目前我们所有的服务器都是Windows 2003）
*   易于使用（周围有 .NET 库吗？）

该应用程序的事务不是很密集，大概每小时 100-200 个 CRUD。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:09:31.073

CouchDB 与其他 NoSQL 数据库有一些[比较](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)。在这里，您将找到一份比较 MongoDB 和 CouchDB的[实践经验报告。](http://blog.bstovall.com/2012/02/09/couchdb-vs-mongodb-a-practical-experience/)您还可以从 Web 开发人员的角度查看[这篇文章。](http://lucdebrouwer.nl/a-week-with-couchdb/)（也许它们都有些过时了。）

您可能也对[couchbrowse](http://code.google.com/p/couchbrowse/) ( [SharpCouch](http://code.google.com/p/couchbrowse/source/browse/trunk/SharpCouch/SharpCouch.cs) ) 和[Ottoman](https://github.com/sinesignal/ottoman)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:46:04.737

复制：在 couchDB 中配置复制和标记复制非常容易。

平台依赖性：我在 Windows 2003 x86 SP2 上尝试了 setup-couchdb-1.2.0_otp_R15B.exe 并成功。

图书馆：你可以试试 LoveSeat/DreamSeat .Net 客户端

# php - SOAP：返回一个 xsd 数组：PHP 中的任何元素

> ID：13836242
> 
> 赞同：0
> 
> 时间：2012-12-12T09:06:34.017
> 
> 标签：php, soap, xsd, wsdl

我需要根据 WSDL 返回 SOAP 调用应答。一切正常，除了返回 xsd:any 元素。WSDL 的一部分，我遇到了问题（这是预期的答案）。

```
    xsd:complexType 名称="数据"
        xsd：序列
         xsd:any minOccurs="1" maxOccurs="unbounded"
        xsd：序列
    xsd:complexType

```

我尝试了什么：

```
    foreach($data as $name=>$value) {
        $object->data->any[$name] = $value;
    }
    返回$对象；

```

SOAP 调用返回如下答案：

```
    ..响应>
    -数据>值1值2值3值4-/数据>
    .../响应>

```

尽管在返回对象之前，可以看到对象已按应有的方式创建：

```
    $object->data->any[name1] = value1
    $object->data->any[name2] = value2

    ETC...

```

但是在 return asnwer 中，所有的值都只是放入一个字符串到一个返回字段中。此代码和返回适用于任何其他字段类型（例如 xsd:string 等）。

在 xsd:any 类型的情况下如何返回对象，以根据名称和值获得多个字段的答案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:06:15.537

解决了这个问题。

我必须为该字段创建 SoapVar 对象。

```
    $o = 新对象（）；
    $o->字段=$值；
    $object->data = new SoapVar($field, XSD_ANYTYPE);
    返回$对象；

```

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-11T13:20:23.267

这也应该有效：

```
$object->data = new SoapVar($data, SOAP_ENC_OBJECT); 
```

# php - 通过 PHP 验证 PDF (X3)

> ID：13836243
> 
> 赞同：0
> 
> 时间：2012-12-12T09:06:35.437
> 
> 标签：php, validation, pdf

我已经编写了一个用于上传 PDF 文件的上传脚本。通过 PHP，我想检查上传的文件是否可以使用 X3 标准进行打印。这意味着必须将图像和字体嵌入文件等。不幸的是，我不知道如何实现我的目标？有人有一些可能对我有帮助的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:28:23.703

我假设您指的是 ISO PDF/X-3 标准？你确定它必须是你需要检查的 PDF/X-3 吗？今天的大多数发布工作流程都使用基于 PDF/X-1a（绝大多数）或 PDF/X-4（即将推出）的东西。

你想怎么检查？有许多商业库允许您进行 PDF/X-3 检查（和其他 PDF 预检），您想使用这些库还是正在考虑使用一些 PHP 库自己实现它？

如果您想使用现有的库，请让我指出 callas 的[pdfToolbox](http://www.callassoftware.com/callas/doku.php/en%3aproducts%3apdftoolboxcli)（*警告，我隶属于这家公司*），它有一个可以从 PHP 轻松使用的命令行版本（我使用 Drupal 进行了这样的实现）。肯定还有其他公司在这方面也有技术，我想到了 Enfocus。

如果您想使用 PHP PDF 库来执行此操作，请注意 PDF/X-3 检查比嵌入所有图像和字体更进一步。您必须实现许多非常微妙的要求。

# python - 如何从 virtualenv 运行 PyScripter？

> ID：13836249
> 
> 赞同：3
> 
> 时间：2012-12-12T09:06:48.153
> 
> 标签：python, virtualenv, pyscripter

如何从 virtualenv 运行 PyScripter？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:06:48.153

**[答案隐藏在常见问题评论](http://code.google.com/p/pyscripter/wiki/FAQ)中；在这里为其他人重新发布：**

如果您在 virtualenv 环境中将 PyScripter 与远程 python 引擎一起使用，则会出现问题。在 Microsoft Windows 上，如果 ENV 是您的虚拟 Python 环境（使用“python virtualenv.py ENV”创建），那么在切换到此环境后，python.exe 可执行文件位于 C:\Python27\ENV\Scripts 中。（或者无论你的 Python 版本和安装目录是什么）但是，PyScripter 期望它位于 C:\Python27\ENV 中。

您可以使用此解决方法：创建从 C:\Python27\ENV\python.exe 到 C:\Python27\ENV\Scripts\python.exe 的符号链接。在 Windows Vista 或 7 上，您可以使用 mklink 命令执行此操作：

```
mklink C:\Python27\ENV\python.exe C:\Python27\ENV\Scripts\python.exe 
```

（您需要管理员权限才能执行此操作）。使用以下命令通过批处理文件启动 PyScripter：

```
CALL C:\Python27\ENV\Scripts\activate.bat
SET PYTHONHOME=%VIRTUAL_ENV%
START project.psproj 
```

*   第一行激活虚拟环境 ENV。
*   第二行将 PYTHONHOME 环境变量设置为 virtualenv 定义的环境变量，即“C:\Python27\ENV”。这是 Python 查找特定于该环境的所有库。
*   最后一行通过项目文件启动 PyScripter。您不妨直接调用 PyScripter.exe。

*测试版本：Windows 7（32 位）上的 Python 2.7.3 PyScripter 2.5.3.0 x86 virtualenv 1.8.2*

# android - Android ICS 密钥库的安全性如何？

> ID：13836252
> 
> 赞同：3
> 
> 时间：2012-12-12T09:06:53.140
> 
> 标签：android, android-keystore

我想使用 ICS 密钥库来存储私钥和证书。但是我担心它的安全性。似乎任何应用程序都可以读取和获取安装在密钥库中的私钥和证书（没有 privateKeys 密码）。我注意到的唯一安全性是向用户显示的权限对话框。

**是这样吗（如果我错了，请纠正我）？**

**还有其他安全存储私钥和公​​钥的程序吗？**

# asp.net - ASP.NET MVC 和模型绑定？

> ID：13836257
> 
> 赞同：0
> 
> 时间：2012-12-12T09:07:35.217
> 
> 标签：asp.net, html, asp.net-mvc

为了将几个 asp.net 网络表单转换为 MVC razor 视图，我已将所有服务器端控件转换为等效的 HTML 标记。

我意识到我应该使用 MVC HTML 助手有点晚了，这里的问题是我无法将 HTML 标记值绑定到强类型视图请求。

MVC-3 中是否有任何方法可以在不使用 HTML 帮助器的情况下将模型属性映射到 HTML 标记？

```
Consider following Model class:
class Person
{
    public string FirstName{get; set;}
}
View
@model MyApplication.Models.Person

<input type="text" id="txtFirstName" **???**/> 
```

代替`???`我期望这里的某些属性将输入绑定到`FirstName`模型的属性。

可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:52:15.033

[DefaultModelBinder](http://msdn.microsoft.com/en-us/library/system.web.mvc.defaultmodelbinder%28v=vs.98%29.aspx)使用该属性`name`将 HTTP 请求中的值绑定到您的模型。如果此约定不适合您的需要，您可以编写自己的 ModelBinder。

所以在你的情况下，下面的代码应该可以工作（但我还是建议使用 HTML 助手，因为使用 HTML 助手，你可以使用自动不显眼的验证）

**控制器：**

```
public ActionResult Create(Person person) {
  ...
} 
```

**看法：**

```
@model MyApplication.Models.Person

<input type="text" id="txtFirstName" name="FirstName" /> 
```

# wxwidgets - wxWidgets：如何找到应用程序当前可用的翻译？

> ID：13836258
> 
> 赞同：0
> 
> 时间：2012-12-12T09:07:35.950
> 
> 标签：wxwidgets

应用程序应通过其菜单提供切换人类语言（翻译）。与`internat`示例不同，可用语言列表应根据可用的翻译动态创建。有没有获取信息的功能？

想要的行为是反映当其他`.mo`人为另一种语言添加目录时的情况，然后用户可以从菜单中选择语言。

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:47:15.910

不，现在无法获取所有可用目录。添加它可能会很好，`wxTranslations`但目前它不存在。

还要注意，从菜单切换语言，就像在许多 Windows 程序中所做的那样，在 gettext 方法中也不能很好地工作，因为您需要重新创建整个 UI 以反映语言的变化。这就是为什么通常只在应用程序启动时才选择语言的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:55:01.420

也许[这](http://wxwidgets.info/wxtranslation/)会有所帮助？wxTranslationHelper 可以显示可用的目录。

# matlab - Matlab：OOPS：事件块：在运行时动态（编程）添加事件

> ID：13836263
> 
> 赞同：3
> 
> 时间：2012-12-12T09:07:50.737
> 
> 标签：matlab, events, dynamic

我正在尝试编写一个 matlab 类，它接受对财务数据的请求，然后通过触发事件异步提供数据。整个逻辑可以定义如下。

1) 使用回调函数句柄 (@func) 获取对安全 (SecId) 数据的请求

2）添加一个事件名称为“evnt_SecId”和回调函数@func的监听器。

3) 收集所有数据，按证券过滤它们并针对特定证券触发事件。

现在在 Matlab 中一切似乎都很容易和可行，除了我不能**动态定义事件**。目前，我必须为 { events ... end } 块中的每个 SecId 定义事件。

有谁知道在请求到达时动态声明事件的方法？

**我想到的替代解决方案**：我可以有一个更新“事件”和与之关联的所有侦听器，而 SecId 的过滤发生在回调中。由于性能原因，此解决方案是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:07:42.763

这个怎么样：

1.  使 SecId 成为 dynamicprops 的子类
2.  而不是添加常规侦听器，添加 PostSet propListener 并动态添加新属性
3.  通过设置属性的值发送消息。

我不知道该解决方案的性能特征，但它可能会满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:10:23.517

在“主”事件触发方法中过滤 SecId 怎么样？这样过滤只会在每个触发事件发生一次。然后，该类必须将其拥有的侦听器与其注册的 SecId 相关联。

# javascript - 从 CKEditor 的扫描码中获取密钥

> ID：13836265
> 
> 赞同：0
> 
> 时间：2012-12-12T09:07:53.507
> 
> 标签：javascript, html, ckeditor

我可以使用以下代码捕获 ckeditor 的密钥

```
 CKEDITOR.instances.<ID of Control>.on('key', function (e) {
                e.data.keyCode ;//Gives scan code for keys ".,/;'\" ``
} 
```

但是 `e.data.keyCode`，或者如果我使用处理“KeyUP”和“KeyDown”事件，`evt.data.getKey()`我能够获得键的扫描码而不是`charcode`.

需要检测字符而不是扫描密钥的代码，请建议我获得任何机制`char`。函数处理程序的工作`CKEDITOR.instances.<ID of Control>.on('key',...)`与正常的按键事件处理程序机制不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:48:11.343

我不确定字符代码是什么（无论我尝试过什么`0`），但这里的代码可以帮助你：

```
CKEDITOR.replace( 'editor1', {
    on: {
        contentDom: function( evt ) {
            var editable = evt.editor.editable();
            editable.attachListener( editable, 'keyup', function( evt ) {
                console.log( 'getKey', evt.data.getKey() );
                console.log( 'getKeystroke', evt.data.getKeystroke() );
                console.log( 'native event', evt.data.$ );
            } );
        }
    }
} ); 
```

我假设您使用的是 CKEditor 4，并且该代码可能不适用于 CKEditor 3。

我将`keyup`事件侦听器附加到可编辑的。Editable 是主要的可编辑元素 - 在内联编辑器中，它是构建编辑器的容器，而在框架编辑器中，它是`body`内部 iframe。

非常重要的是在`contentDom`事件上添加此侦听器 - 每次加载内容 DOM 时都会触发它，并且每次`setData`调用后都会发生框架编辑器（非常频繁）。在框架编辑器`setData`中创建全新的 DOM，因此删除附加到旧 DOM 的旧侦听器很重要。这由可编辑本身处理，但必须通过`attachListener`方法附加侦听器。

回到问题 - 我认为 CKEditor 没有提供获取字符代码的方法。您需要使用位于`evt.data.$`.

# node.js - 如何从另一个方法调用一个方法

> ID：13836266
> 
> 赞同：2
> 
> 时间：2012-12-12T09:08:01.090
> 
> 标签：node.js, backbone.js, express

> **可能重复：**
> [从 module.exports 中的另一个函数调用 module.exports 中的“本地”函数？](https://stackoverflow.com/questions/10462223/call-a-local-function-within-module-exports-from-another-function-in-module-ex)

我正在使用 node.js 来开发我的应用程序。我必须从我的 main.js 中调用另一种方法中的一种方法。我该怎么做呢？

我在这里解释细节。

## 应用程序.js

```
app.post('/getNotificationCount', function (req, res) {
    res.setHeader('Cache-Control', 'max-age=0, must-revalidate, no-cache, no-store');
    res.setHeader('Connection', 'keep-alive');
    res.contentType('application/json');
    res.setHeader('Expires', new Date().addYears(-10));
    try {
          //here i have my custom code/logic
          //i have to call '/getNotification' method here, i have to pass parameter too..
    }
    catch (err) {
        console.log('\r\n ' + new Date().toString() + ' - Try Catch from /getNotificationCount : ' + err + ' \r\n ');
        res.json({ error: 'Forbidden' }, 403);
    }
});

app.post('/getNotification', function (req, res) {
    res.setHeader('Cache-Control', 'max-age=0, must-revalidate, no-cache, no-store');
    res.setHeader('Connection', 'keep-alive');
    res.contentType('application/json');
    res.setHeader('Expires', new Date().addYears(-10));
    try {
          //my sql code goes here !!!
          //I want retrieve parameter in req.body here...
    }
    catch (err) {
        console.log('\r\n ' + new Date().toString() + ' - Try Catch from /getNotification : ' + err + ' \r\n ');
        res.json({ error: 'Forbidden' }, 403);
    }
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:36:42.367

您可以将函数（方法）分配给变量并使用它，也可以在其他 .js 脚本中导出函数。

**出口.js**

```
exports.moduleFunction = function(param) {
    console.log(param);
} 
```

**main.js**

```
// Import your module
var myModule = require('./export');

var myFunction = function(param) {
    console.log(param);
};

var main = function mainFunction() {
    // Call function in this same script
    myFunction('hello world!');
    // Call from module
    myModule.moduleFunction('Hello world from module export');
};

main(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:33:19.447

使用 module.exports 概念..

为了得到一个想法，我在这里发布了两个链接.. [Node JS - 从同一文件中的另一个方法调用一个方法](https://stackoverflow.com/questions/12274381/node-js-calling-a-method-from-another-method-in-same-file)

[从 module.exports 中的另一个函数调用 module.exports 中的“本地”函数？](https://stackoverflow.com/questions/10462223/call-a-local-function-within-module-exports-from-another-function-in-module-ex)

希望你会有一个想法..

# python - Python中是否有类似于R中的quantstrat的东西？

> ID：13836277
> 
> 赞同：9
> 
> 时间：2012-12-12T09:08:35.933
> 
> 标签：python, r, quantitative-finance, quantstrat

Python中是否有类似于R中的[quantstrat](http://www.r-bloggers.com/?s=quantstrat)的东西？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T14:05:12.423

是的，[Quantopian使用名为](https://www.quantopian.com)[zipline](https://github.com/quantopian/zipline)的开源 Python 回测引擎。

# java - 如何从android中自己的SQL DB中获取特定项目

> ID：13836280
> 
> 赞同：0
> 
> 时间：2012-12-12T09:08:48.967
> 
> 标签：java, android, mysql

所以我知道如何在数据库中显示我的所有条目，但我需要知道如何只获取数据库的一个特定行。

这是我的编码

数据库助手.java

```
package com.soac.dbtest;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = "data/data/com.soac.dbtest/databases/"; 
private static String DB_NAME ="team";// Database name
private SQLiteDatabase mDataBase; 
private final Context mContext;

public DataBaseHelper(Context context) 
{
    super(context, DB_NAME, null, 1);// 1? its Database Version
    DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
    this.mContext = context;
}   

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

    boolean mDataBaseExist = checkDataBase();
    if(!mDataBaseExist)
    {
        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
}
    //Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

测试适配器.java

```
package com.soac.dbtest;

import java.io.IOException;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class testAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public testAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public testAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public testAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
            Log.e(TAG,"opened db");
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestData()
     {
         try
         {
             String sql ="SELECT * FROM wwwt";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

主.java

```
package com.soac.dbtest;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.Toast;

public class main extends Activity {
    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        testAdapter mDbHelper = new testAdapter(this);
        mDbHelper.createDatabase();   

        mDbHelper.open();
         Cursor c = mDbHelper.getTestData();
            if (c.moveToFirst())
            {
                do {          
                    DisplayTitle(c);
                } while (c.moveToNext());
            }
    }

    public void DisplayTitle(Cursor c) {
        Toast.makeText(
                this,
                "id: " + c.getString(0) + "\n" + "NAME: " + c.getString(1)
                        + "\n" + "COUNTRY: " + c.getString(2) + "\n"
                        + "POP:  " + c.getString(3), Toast.LENGTH_LONG)
                .show();
    }

} 
```

这很好用，但它会遍历我所有的表格行并将它们显示在 toast 中。我想知道只显示一个特定行的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:11:54.070

为了显示特定行，您的数据库应该有一个标识符或 id 来区分每一行，即`a primary key`.

像这样 ：

`select * from your_table where id = 1`

where`id`将是数据库表中的主键。

您会看到这`where some condition`是放置您的条件或您想从数据库中获取的东西的地方。

# jquery - 带有多个复选框的jquery错误

> ID：13836284
> 
> 赞同：0
> 
> 时间：2012-12-12T09:08:57.740
> 
> 标签：jquery, html, post, checkbox

```
<form action="db.php" method="POST" id="addForm" name="addForm">
<input type="checkbox" name="use[]" value="development">Develop<br>
<input type="checkbox" name="use[]" value="sample">Sample<br>
<input type="checkbox" name="use[]" value="mass_production">Mass Prod<br>
</form> 
```

只是先弄清楚..
1.如果我提交，我可以使用变量在php中获取帖子值`$_POST['use']`，对吗？
2\. 由于它的多个复选框，值 $_POST['use'] 是一个数组，所以我需要用 , 来访问它`$_POST['use'][0]`，`$_POST['use'][1]`对吗？

现在真正的问题是，当我提交时，我在控制台（萤火虫）中收到错误。 `Error: Syntax error, unrecognized expression: [name=use[]]`， 和`throw new Error( "Syntax error, unrecognized expression: " + msg );`

该错误阻止我提交。我正在使用 jquery-1.8.2.js。我做错什么了吗？

更新
下面的这些代码产生了错误。但是还没有搞明白。

```
var jdialog = $('#addnew_dialog');
var jform = jdialog.find('[name=addForm]');
jform.validate({
    errorClass : "err_label",
    wrapper: "li",
    rules: {
        "code": "required",
        "name": "required"
    },
    ignore: "",
    errorPlacement: function(error, element) {
        if( element.next().hasClass('ui-multiselect') ) {
            error.insertAfter( element.next() );
        } else {
            error.insertAfter( element );
        }
    },
    submitHandler: function(form) {
        //use ajax check
        //reset all error state
        $.each($(form).serializeArray(), function() {             
      jform.find("[name="+this.name+"]").removeClass("ui-state-error");
    });

        var data = ajaxCheck("addForm", "ajaxCheckAddShape");
        if(data['result']!="ok"){
            updateTips(data['msg']);
            $.each(data['err_fields'], function(index, value) {
                jform.find("[name="+value+"]").addClass("ui-state-error");
            });
            return false;
        }
        $(form).find("[name=op]").val("add");
        form.submit();
    }
});

function ajaxCheck(formName , action) {
    var jform = $("#"+formName);
    jform.find("[name=op]").val(action);
  var returnData = $.ajax({
    type: "POST",
    url: "db.php",
    async: false,
    timeout: 5000,
    data: jform.serialize(),
    dataType : "json"
  }).responseText;
  return $.parseJSON(returnData);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:10:18.097

`[`在 jQuery 属性选择器中，如果您有类似or的字符，则需要加上引号`]`。

例如替换

```
$('[name=use[]]') 
```

和

```
$('[name="use[]"]') 
```

# php - 带有json的PHP Web服务不起作用

> ID：13836286
> 
> 赞同：0
> 
> 时间：2012-12-12T09:09:04.913
> 
> 标签：php, jquery, json

我是网络服务的新手。我有以下代码，当我尝试在本地主机上运行它时，我没有得到所需的输出......它显示`FirstName:undefined` `LastName:undefined`..

以下是我的代码

```
$(document).ready(function(){
    var employees = [
  { "firstName":"John" , "lastName":"Doe" }
];
$.ajax({
    url: "MyService.php",
    type: "POST",
    data: employees,
    dataType: "json",
    success:function(data) {
        alert("Firstname:"+data.firstName+", LastName: "+data.lastName);
        },
    error:function(data) {
        alert('error');
    }  });
}); 
```

php代码是

```
echo json_encode($_POST); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:16:47.630

的值`data`应该是一个对象。您正在传递一个包含对象的数组。摆脱阵列。

这：

```
 var employees = [
  { "firstName":"John" , "lastName":"Doe" }
]; 
```

…正在向服务器提交以下内容：

```
undefined= 
```

它应该是：

```
var employees = { 
    "firstName": "John",
    "lastName":"Doe"
}; 
```

这将提交：

```
firstName=John&lastName=Doe 
```

* * *

此外，您似乎没有指定`Content-Type`标头，因此 PHP 默认为`text/html`. 这迫使您编写 JavaScript，上面写着“不要相信服务器，以 JSON 而不是 HTML 来威胁它”。

您可以通过以下方式解决此问题：

```
header('Content-Type: application/json');
echo json_encode($_POST); 
```

# jsf - CommandButton 使用 FlashScope 参数打开新选项卡

> ID：13836288
> 
> 赞同：4
> 
> 时间：2012-12-12T09:09:10.500
> 
> 标签：jsf, jsf-2

用户点击时如何打开新标签`p:commandButton`？我还想使用 FlashScope 将一些参数传递给新页面。这是代码：

```
<h:form>
  <p:commandButton value="open new tab" action="#{myBean.newTab}"/>
</h:form>

public String newTab() {
  Faces.setFlashAttribute("foo", bar);
  return "otherView";
} 
```

在 otherView 页面上我`f:event type="preRenderView"`用来读取 Flash 参数。两个注意事项：

1.  我需要使用 FlashScope，而不是 URL 参数。
2.  如果可能的话，我不想改变`newTab()`和`preRenderView()`方法。

感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T11:37:25.267

在表单上使用`target="_blank"`来告诉浏览器表单的同步响应应该呈现在一个新的（空白）选项卡/窗口中。您只需要关闭 ajax 行为`<p:commandButton>`即可使其成为同步请求。

```
<h:form target="_blank">
  <p:commandButton value="open new tab" action="#{myBean.newTab}" ajax="false" />
</h:form> 
```

支持 bean 不需要更改，它会按照您的意图工作。我只建议在操作方法中使用 POST-Redirect-GET 模式。

```
return "otherView?faces-redirect=true"; 
```

否则，新选项卡将显示原始页面的 URL，并且 F5 将重新调用 POST。此外，这种方式也真正使用了 flash 范围，因为它的设计目的是（如果您没有重定向，只需存储在请求范围中就足够了）。

* * *

**更新**：根据评论，初始选项卡/窗口中的视图范围 bean 以这种方式被杀死。通过返回`String`导航案例结果。没错，如果您想让视图范围的 bean 保持活动状态，请通过[`Faces#redirect()`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Faces.html#redirect%28java.lang.String,%20java.lang.String...%29)调用替换导航案例（假设它确实是您在那里使用的[OmniFaces](http://omnifaces.org)`Faces#setFlashAttribute()`）。您只需要预先设置`Flash#setRedirect()`为`true`以指示将发生重定向的闪存范围。

```
public void newTab() throws IOException {
    Faces.setFlashAttribute("foo", bar); 
    Faces.getFlash().setRedirect(true);
    Faces.redirect("otherView.xhtml");
} 
```

# javascript - HTML5 画布和缩放

> ID：13836293
> 
> 赞同：1
> 
> 时间：2012-12-12T09:09:26.397
> 
> 标签：javascript, html, canvas

在我在`canvas`缩放文档（使用 CTRL+Wheel）上画一条线后，结果证明，一条线是光栅的，缩放后看起来很丑。我该如何解决这个问题？每次缩放文档时是否有比重绘更好的方法？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:13:56.553

如果只能使用canvas元素，没有其他方法可以显示锐利的线条，只能在缩放时重绘它。这是因为画布不支持矢量图形。

如果您能够使用不同的技术，[Svg可能是一种选择。](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)

# ios - 检索谷歌读者列表

> ID：13836295
> 
> 赞同：1
> 
> 时间：2012-12-12T09:09:42.523
> 
> 标签：ios, google-reader

我需要知道来自 google 帐户的 rss 列表。我通过以下api获得了sid和auth，并且成功了。

```
 // login and get sid & auth
NSURL* loginURL = [NSURL URLWithString:@"https://www.google.com/accounts/ClientLogin"];
ASIFormDataRequest* loginRequest = [ASIFormDataRequest requestWithURL:loginURL];
loginRequest.useCookiePersistence = NO;

[loginRequest addRequestHeader:@"User-Agent" value:@"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_4; en-us) AppleWebKit/533.19.4 (KHTML, like Gecko) Version/5.0.3 Safari/533.19.4"];

[loginRequest setPostValue:@"reader" forKey:@"service"];
[loginRequest setPostValue:@"scroll" forKey:@"source"];
[loginRequest setPostValue:@"http://www.google.com/" forKey:@"continue"];

[loginRequest setPostValue:self.login forKey:@"Email"];
[loginRequest setPostValue:self.password forKey:@"Passwd"];

[loginRequest startSynchronous]; 
```

但是尝试获取令牌时失败了。

```
 NSString *lUrlString = @"http://www.google.com/reader/api/0/subscription/list?output=json&client=scroll";
_rssRequest = [[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:lUrlString]];    

NSString *authParam = [NSString stringWithFormat:@"GoogleLogin auth=%@", self.auth];  

[_rssRequest addRequestHeader:@"Authorization" value:authParam];

[_rssRequest addRequestHeader:@"Cookie" value:[NSString stringWithFormat:@"SID=%@", [self sid]]];

[_rssRequest setHeadersReceivedBlock:^(NSDictionary *responseHeaders) {

    NSLog(@"%@",  responseHeaders);

}];

[_rssRequest setRequestMethod:@"GET"];

[_rssRequest setValidatesSecureCertificate:NO];  

[_rssRequest setDelegate:self];    

[_rssRequest setDidFailSelector:@selector(rssLoadFailed:)];

[_rssRequest setDidFinishSelector:@selector(rssLoadFinish:)];    

[_rssRequest startAsynchronous];    

- (void)rssLoadFailed:(ASIHTTPRequest *)req

{

NSError *error = [req error];

NSLog(@"%@", [error description]);

NSLog(@"Get token Failed: %d %@", [req responseStatusCode], [req   responseStatusMessage]); 

}

- (void)rssLoadFinish:(ASIHTTPRequest *)req

{

NSLog(@"%@", req);

NSData * returnData = [req responseData];

NSString* response;

response = [[NSString alloc] initWithData:returnData encoding:NSASCIIStringEncoding];

NSLog(@"%@", response);

} 
```

当我尝试获取 rss 列表时，出现 401 错误。有人知道使用 google reader api 检索阅读列表有什么问题吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:52:14.563

您可以在我对以下帖子的回答中找到此问题的解决方案。 [谷歌阅读器供稿导入](https://stackoverflow.com/questions/15424957/google-reader-feed-import/15453887#15453887)

谢谢。

# jquery - 如果子元素处于活动状态，Jquery Select parent li a

> ID：13836296
> 
> 赞同：5
> 
> 时间：2012-12-12T09:09:44.417
> 
> 标签：jquery, css

我花了几个小时寻找 CSS 才找到 jQuery 解决方案。我到处都看到过这种情况，但不知道如何从头开始做一个。

我想做的是，我有一个菜单作为列表，还有另一个列表，还有另一个。所以这是一个三级水平菜单。

我想做的是，当一个孩子被选中时，我想改变父母的背景颜色，`li a`如果你知道我的意思，它看起来像面包屑。

这是我当前的 css

```
.menu {
    z-index: 9999;
    position:relative;
    background-image: url(images/top_nav_lili_repeat.png);
    background-repeat: repeat-x; height:38px;
    font-family: 'Open Sans', sans-serif;
    text-transform:uppercase;
}
.menu ul ul {
    display: none;
}
.menu ul li:hover > ul {
    display: block;
}
.menu ul {

    color: #797979;
    padding: 0 0px;

    list-style: none;
    position: relative;
    display: inline-table;
}
.menu ul:after {
    content: "";
    clear: both;
    display: block;
}
.menu ul li {
    float: left;
}
.menu ul li:hover {
    background: #4b545f;
}
.menu ul li:hover a {
    color: #EBAD2D;
}
.menu li a.seleted ul li a{ background-color:#ff0000;}
.menu ul li a {
    display: block;
    padding: 11px 16px;
    color: #bbb;
    text-decoration: none;
}
.menu ul li a.selected { background-color:#ff0000;}

.menu ul ul {
    background: #5f6975;
    border-radius: 0px;
    padding: 0;
    position: absolute;
    top: 100%;
    width: 200px;
}
.menu ul ul li {
    float: none;
    border-top: 1px solid #6b727c;
    border-bottom: 1px solid #575f6a;
    position: relative;
}
.menu ul ul li a {
    padding: 10px 16px;
    color: #fff;
}
.menu ul ul li a:hover {
    background: #4b545f;
}
.menu ul ul ul {
    position: absolute;
    left: 100%;
    top: 0;
} 
```

我当前的 HTML 菜单看起来像这样。

```
<div class="menu">

            <ul>
    <li><a href="#" title="Menu Item 1">Home</a>
        <ul>
            <li><a href="#" title="Sub-Menu Item 1">Home link 1</a>
                <ul>
                    <li><a href="#" title="Sub-Sub-Menu Item 1">Home Link 1 Link 1</a></li>
                    <li><a href="#" title="Sub-Sub-Menu Item 2">Home Link 1 Link 2</a></li>
                    <li><a href="#" title="Sub-Sub-Menu Item 3">Home Link 1 Link 3</a></li>
                </ul>
            </li>
            <li><a href="#" title="Sub-Menu Item 2">About</a>
                <ul>
                    <li><a href="#" title="Sub-Sub-Menu Item 1">About 1</a></li>
                    <li><a href="#" title="Sub-Sub-Menu Item 2">About 2</a></li>
                    <li><a href="#" title="Sub-Sub-Menu Item 3">About 3</a></li>
                </ul>
            </li>
            <li><a href="#" title="Sub-Menu Item 3">Contact</a>
                <ul>
                    <li><a href="#" title="Sub-Sub-Menu Item 1">Contact 1</a></li>
                    <li><a href="#" title="Sub-Sub-Menu Item 2">Contact 2</a></li>
                    <li><a  class="selected" href="#" title="Sub-Sub-Menu Item 3">Contact 3</a></li>
                </ul>
            </li>
        </ul>
    </li>

</ul>
          </div> 
```

如果您查看最后一个`li a` `Contact 3`I have a class attach to it as `selected`，我的 CMS 会将此类添加到所选元素中。所以我想要做的是改变父母的背景颜色`<a>Contact</a>`和`<a>Home</a>`css或Jquery，我也希望它与跨浏览器兼容。谢谢各位。

这是一个小提琴：http: [//jsfiddle.net/8s3Bc/](http://jsfiddle.net/8s3Bc/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T09:40:45.827

您只需要选择带有**所选**班级的锚点，并迭代它的**li** [父母](http://api.jquery.com/parents/)以更改他们的背景。

在下面的语句中，我为父**li**元素添加了**父**类。

 **```
$('.menu li a.selected').parents('li').addClass('parent');​ 
```

我**为父**类定义了背景颜色。

```
.parent {
   background-color:#ff0000;
} 
```

这是工作示例：http: [//jsfiddle.net/dhMSN/](http://jsfiddle.net/dhMSN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T06:53:25.347

可能是@halilb 答案是你想要的，但看看这个，可能会提高你的表现和你菜单的感觉。

演示：[http](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)
://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm 代码：[​​https://github.com/dynamicdriverepo/ddsmoothmenu](https://github.com/dynamicdriverepo/ddsmoothmenu)

Get Idea from this 在这里你可以找到你需要的正确实现的 jQuery 和 css。

创建新功能很好，但当它免费提供并且最重要的部分**经过适当测试，具有更多功能和结构良好的代码时就不好了**

注意：我并不是每次都在鼓励您盗用代码或总是复制某人的代码，但可以节省开发时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:47:16.377

像这样？[http://jsfiddle.net/8s3Bc/5/](http://jsfiddle.net/8s3Bc/5/)

添加了这个jQuery

```
$('.menu ul ul > li').click(function(){
    $(this,'a').addClass('selected');
});​ 
```

并改变了一些CSS，它在小提琴上**

# html - 在内容容器上设置最小高度

> ID：13836301
> 
> 赞同：0
> 
> 时间：2012-12-12T09:10:06.393
> 
> 标签：html, css

我有一个没有看到解决方案的案例。这是我的问题：

我有一个包含三个部分（页眉、部分和页脚）的页面，页脚必须始终与底部齐平。部分部分应该占据页眉和页脚之间的所有可用位置，但必须有一个根据页面不同的最小高度（我将在 CSS 上手动设置）。

当达到最小高度时，应该可以在整个页面上滚动。

这是我用来设置页眉、节和页脚的代码示例，占据所有可用位置。

**CSS**

```
body {
    margin: 0
}
header, section, footer {
    left:0;
    right:0;
    overflow: hidden;
    position: absolute;
}
header {
    height: 70px;
    top: 0;
    background-color: green;
}
section {
    top: 70px;
    bottom: 195px;
    background-color: gray;
    min-height:300px;
}
article {
    overflow: hidden;
    background-color:lightyellow;
}
.news {
    position: absolute;
    bottom: -30px;
    width: 100%;
    background-color: lime;
}
footer {
    height: 195px;
    bottom: 0;
    background-color: pink;
} 
```

**HTML**

```
<header>
    <div class="container">
        <h2>My header</h2>
    </div>
</header> 
<section>
    <article>
        <div class="news">
            <div class="row-fluid">
                <a href="#">UP</a>
            </div>
            <div class="row-fluid">
                <div class="container">
                    <div class="span6">News 1</div>
                    <div class="span6">News 2</div>
                </div>
            </div>
        </div>
    </article>
</section> 
<footer>
    <div class="container">
    My footer
</div>
</footer>​ 
```

一个 jsfiddle 可用于示例：http: [//jsfiddle.net/Nk6uY/](http://jsfiddle.net/Nk6uY/)

**编辑**

如何在我的部分上添加一个最小高度，当它到达时，我的窗口上会出现一个滚动条？

**编辑 2**

我将添加有关我的问题的更多信息。首先，我在 section 标签内的大部分内容都将设置为绝对值。并隐藏一些并出现在动作中（主要是javascript）。出于这个原因，我知道如果有人点击链接，我需要查看所有内容的每个部分的最小高度。

对于我的示例，div 新闻是隐藏的，当您单击它时，它至少需要 360 像素才能可见。但是，如果我的窗口比这个小，我的窗口上就没有滚动条，并且我的所有内容都被页脚覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:21:10.570

You can only achieve this through javascript - you would need to give your header, section and footer ids and then use something like this:

```
function ResizeBody() {
    var header = document.getElementById("Header");
    var section = document.getElementById("Section");
    var footer = document.getElementById("Footer");

    var height = GetBodyHeight() - header.offsetHeight - footer.offsetHeight - anyPaddingToTopOrBottomOfThreeMainSections;
    if (height > 0) {
         body.style.height = height + "px";
    }
}

function GetBodyHeight() {
    if (window.innerHeight > 0) {
        return window.innerHeight;
    }
    else {
        return document.documentElement.clientHeight;
    }
}

window.onresize = function () {
    ResizeBody();
};

$(document).ready(function () {
    ResizeBody();
}); 
```

**UPDATE**

Sorry, I think i read the question wrong - do you want the section to grow to the screen size or are you manually going to set it the if there is too much content have a scroll bar?

in which case you should just set the height (not as a min height) of the section and instead of overflow:hidden use overflow:scroll;

# windows-phone-7 - 使用 WPConnect 从 wp7 获取离线日志的命令？

> ID：13836302
> 
> 赞同：0
> 
> 时间：2012-12-12T09:10:07.060
> 
> 标签：windows-phone-7, windows-phone-7.1, error-logging

我知道我们可以使用 WPConnect 工具从 WP7 设备获取离线日志。但是我忘记了命令，也忘记了我学习它的站点地址。有谁知道这些命令是什么。我有以下代码来记录脱机异常，但我不知道如何检索日志文件。请帮忙。

```
 #region Offline Error Logger
    /// <summary>
    /// Logs Exception for the app when the device is not connected to the PC.This file can later be retrieved for the purpose of Bug fixing 
    /// </summary>
    /// <param name="strMsg">Exception message</param>
    private static void LogOffline(string strMsg)
    { 
```

# 如果 LOG_ENABLED

```
 try
        {
            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                string dirName = "SOSLog";
                string logFileName = "SOSLog.txt";
                string fullLogFileName = System.IO.Path.Combine(dirName, logFileName);
                // TODO: Synchronize this method with MainPage using Mutex
                string directoryName = System.IO.Path.GetDirectoryName(fullLogFileName);
                if (!string.IsNullOrEmpty(directoryName) && !myIsolatedStorage.DirectoryExists(directoryName))
                {
                    myIsolatedStorage.CreateDirectory(directoryName);
                    Debug.WriteLine("Created directory");
                }
                if (myIsolatedStorage.FileExists(fullLogFileName))
                {
                    using (IsolatedStorageFileStream fileStream =
                            myIsolatedStorage.OpenFile(fullLogFileName, FileMode.Append, FileAccess.Write))
                    {
                        using (StreamWriter writer = new StreamWriter(fileStream))
                        {
                            writer.WriteLine(strMsg);
                            writer.Close();
                        }
                    }
                }
                else
                {
                    using (IsolatedStorageFileStream fileStream =
                            myIsolatedStorage.OpenFile(fullLogFileName, FileMode.Create, FileAccess.Write))
                    {
                        using (StreamWriter writer = new StreamWriter(fileStream))
                        {
                            writer.WriteLine(strMsg);
                            writer.Close();
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Exception while logging: " + ex.StackTrace);
        } 
```

# 万一

```
 }
    #endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:10:08.377

您是在谈论这个：[Windows Phone 上的错误报告（小沃森）](http://blogs.msdn.com/b/andypennell/archive/2010/11/01/error-reporting-on-windows-phone-7.aspx)吗？

# php - 如何防止 PHP 脚本多次运行？

> ID：13836307
> 
> 赞同：10
> 
> 时间：2012-12-12T09:10:20.483
> 
> 标签：php, linux, cron, centos

目前，我试图阻止`onlytask.php`脚本多次运行：

```
$fp = fopen("/tmp/"."onlyme.lock", "a+");
if (flock($fp, LOCK_EX | LOCK_NB)) {
  echo "task started\n";
  //
    while (true) {
      // do something lengthy
      sleep(10);
    }
  //
  flock($fp, LOCK_UN);
} else {
  echo "task already running\n";
}
fclose($fp); 
```

并且有一个 cron 作业每分钟执行一次上述脚本：

```
* * * * * php /usr/local/src/onlytask.php 
```

它工作了一段时间。几天后，当我这样做时：

```
ps auxwww | grep onlytask 
```

我发现有*两个*实例正在运行！不是三个或更多，不是一个。我杀死了其中一个个体。几天后，又出现*了两个*例子。

代码有什么问题？是否有其他替代方法可以限制 onlytask.php 的一个实例正在运行？

ps 我的`/tmp/`文件夹没有清理。`ls -al /tmp/*.lock`显示锁定文件是在第一天创建的：

```
-rw-r--r--  1 root root    0 Dec  4 04:03 onlyme.lock 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T09:53:02.153

`x`打开锁定文件时应使用标志：

```
<?php

$lock = '/tmp/myscript.lock';
$f = fopen($lock, 'x');
if ($f === false) {
  die("\nCan't acquire lock\n");
} else {
  // Do processing
  while (true) {
    echo "Working\n";
    sleep(2);
  }
  fclose($f);
  unlink($lock);
} 
```

[PHP手册](http://php.net/manual/en/function.fopen.php)中的注释

> ' **x** ' - 创建和打开仅供写作；将文件指针放在文件的开头。如果文件已经存在，则 fopen() 调用将失败，返回 FALSE 并生成 E_WARNING 级别的错误。如果该文件不存在，请尝试创建它。这等效于为底层 open(2) 系统调用指定 O_EXCL|O_CREAT 标志。

这是[手册页](http://linux.die.net/man/3/open)`O_EXCL`的解释：

> O_EXCL - 如果设置了 O_CREAT 和 O_EXCL，如果文件存在，则 open() 将失败。检查文件是否存在以及如果文件不存在则创建文件对于执行 open() 的其他线程在同一目录中命名相同的文件名并设置了 O_EXCL 和 O_CREAT**应该是原子的。**如果设置了 O_EXCL 和 O_CREAT，并且路径名称为符号链接，则无论符号链接的内容如何，​​open() 都将失败并将 errno 设置为 [EEXIST]。如果设置了 O_EXCL 而未设置 O_CREAT，则结果未定义。

**更新**：

更可靠的方法 - 运行主脚本，获取锁，运行工作脚本并释放锁。

```
<?php
// File: main.php

$lock = '/tmp/myscript.lock';
$f = fopen($lock, 'x');
if ($f === false) {
  die("\nCan't acquire lock\n");
} else {
  // Spawn worker which does processing (redirect stderr to stdout)
  $worker = './worker 2>&1';
  $output = array();
  $retval = 0;
  exec($worker, $output, $retval);
  echo "Worker exited with code: $retval\n";
  echo "Output:\n";
  echo implode("\n", $output) . "\n";
  // Cleanup the lock
  fclose($f);
  unlink($lock);
} 
```

工人来了。让我们在其中提出一个假的致命错误：

```
#!/usr/bin/env php
<?php
// File: worker (must be executable +x)
for ($i = 0; $i < 3; $i++) {
  echo "Processing $i\n";
  if ($i == 2) {
    // Fake fatal error
    trigger_error("Oh, fatal error!", E_USER_ERROR);
  }
  sleep(1);
} 
```

这是我得到的输出：

```
galymzhan@atom:~$ php main.php 
Worker exited with code: 255
Output:
Processing 0
Processing 1
Processing 2
PHP Fatal error:  Oh, fatal error! in /home/galymzhan/worker on line 8
PHP Stack trace:
PHP   1\. {main}() /home/galymzhan/worker:0
PHP   2\. trigger_error() /home/galymzhan/worker:8 
```

要点是锁定文件已*正确清理，*因此您可以`main.php`再次运行而不会出现问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T06:24:27.437

现在我检查进程是否正在运行`ps`并通过脚本扭曲 php`bash`脚本：

```
 #!/bin/bash

 PIDS=`ps aux | grep onlytask.php | grep -v grep`
 if [ -z "$PIDS" ]; then
     echo "Starting onlytask.php ..."
     php /usr/local/src/onlytask.php >> /var/log/onlytask.log &
 else
     echo "onlytask.php already running."
 fi 
```

并每分钟运行一次`bash`脚本。`cron`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:12:41.183

```
<?php

$sLock = '/tmp/yourScript.lock';

if( file_exist($sLock) ) {
 die( 'There is a lock file' );
}

file_put_content( $sLock, 1 );

// A lot of code

unlink( $sLock ); 
```

您可以通过编写 pid 添加额外的检查，然后在 file_exist-statement 中检查它。为了更加安全，您可以通过“ps 传真”获取所有正在运行的应用程序，检查此文件是否在列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:16:18.527

尝试使用文件的存在而不是它的羊群标志：

```
$lockFile = "/tmp/"."onlyme.lock";
if (!file_exists($lockFile)) {

  touch($lockFile); 

  echo "task started\n";
  //
  // do something lengthy
  //

  unlink($lockFile); 

} else {
  echo "task already running\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T01:06:15.947

正如一些人建议的那样，您可以使用锁定文件，但您真正需要的是 PHP [Semaphore](http://php.net/manual/en/book.sem.php)函数。这些有点像文件锁，但专为您正在做的事情而设计，限制对共享资源的访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-04T20:22:21.047

切勿将 unlink 用于锁定文件或重命名等其他功能。它破坏了 Linux 上的 LOCK_EX。例如，在取消链接或重命名锁定文件后，任何其他脚本总是从flock() 中获取true。

检测先前有效结束的最佳方法 - 在 LOCK_UN 处理之前，在结束锁定上写入锁定文件几个字节。并且在 LOCK_EX 从锁定文件和 ftruncate 句柄中读取几个字节之后。

重要提示：所有测试均在 Linux 上的 PHP 5.4.17 和 Windows 7 上的 5.4.22 上测试。

示例代码：

设置信号量：

```
$handle = fopen($lockFile, 'c+');
if (!is_resource($handle) || !flock($handle, LOCK_EX | LOCK_NB)) {
    if (is_resource($handle)) {
        fclose($handle);
    }
    $handle = false;
    echo SEMAPHORE_DENY;
    exit;
} else {
    $data = fread($handle, 2);
    if ($data !== 'OK') {
        $timePreviousEnter = fileatime($lockFile);
        echo SEMAPHORE_ALLOW_AFTER_FAIL;
    } else {
        echo SEMAPHORE_ALLOW;
    }
    fseek($handle, 0);
    ftruncate($handle, 0);
} 
```

离开信号量（最好在关闭处理程序中调用）：

```
if (is_resource($handle)) {
    fwrite($handle, 'OK');
    flock($handle, LOCK_UN);
    fclose($handle);
    $handle = false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-05T14:39:56.437

在 galimzhan 的答案中添加了对旧锁的检查（没有足够的 *s 来评论），这样如果进程死亡，旧的锁文件将在三分钟后被清除，让 cron 再次启动进程。这就是我使用的：

```
<?php
$lock = '/tmp/myscript.lock';
if(time()-filemtime($lock) > 180){
    // remove stale locks older than 180 seconds
    unlink($lock);
}
$f = fopen($lock, 'x');
if ($f === false) {
  die("\nCan't acquire lock\n");
} else {
    // Do processing
    while (true) {
    echo "Working\n";
        sleep(2);
    }
    fclose($f);
    unlink($lock);
} 
```

您还可以为 cron 作业添加超时，以便 php 进程在 60 秒后被终止，例如：

```
* * * * * user timeout -s 9 60 php /dir/process.php >/dev/null 
```

# javascript - 为什么“opener.$(document).trigger('custom')”不起作用？

> ID：13836309
> 
> 赞同：1
> 
> 时间：2012-12-12T09:10:29.297
> 
> 标签：javascript, jquery, publish-subscribe

我想用 jQuery 实现简单的发布/订阅模式。所以我在父页面上添加了一些这样的代码：

父页面：

```
$(document).bind('custom', function() { ... }); 
```

当我像这样在同一页面上触发时，它工作正常：

同一页：

```
$(document).trigger('custom');  // Working. 
```

但是当我在弹出页面上触发它时，它不起作用。

弹出页面：

```
opener.$(document).trigger('custom');  // Not working.
$(opener.document).trigger('custom');  // Not working. 
```

如果我将事件绑定到`<body>`元素，它可以找到。

父页面：

```
$('body').bind('custom', function() { ... }); 
```

弹出页面：

```
opener.$('body').trigger('custom');  // Working. 
```

为什么绑定到`document`弹出窗口不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:25:28.490

正如@11684 所说，让它发挥作用的答案是：

```
opener.$(opener.document).trigger('custom'); 
```

@Rory 的回答：

```
$(opener.document).trigger('custom'); 
```

无法正常工作，因为弹出窗口`$`没有`opener.document`.

和这个：

```
opener.$(document).trigger('custom'); 
```

不起作用，因为它`document`是弹出窗口`document`，所以它与`opener.document`.

最后，

```
opener.$('body').trigger('custom'); 
```

正在工作，因为开瓶器`$`有事件处理程序，而参数（`body`）只是字符串（不是像 的对象`document`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:13:51.947

您需要将整体`opener.document`放入一个 jQuery 对象中。在弹出窗口中试试这个：

```
$(opener.document).trigger('custom'); 
```

# java - 在 Spring 中销毁的 Session 上调用 Listener 类中的服务层函数

> ID：13836310
> 
> 赞同：0
> 
> 时间：2012-12-12T09:10:30.327
> 
> 标签：java, spring, model-view-controller, session, listener

我在 web.xml 中配置了一个监听器

```
<listener>
      <listener-class>com.Mylistener</listener-class>
</listener> 
```

**MyListener.java**

有以下代码

```
 public class MyListener extends HttpSessionEventPublisher{

           myServiceInterface myService;

           @Override
           public void sessionCreated(HttpSessionEvent event) {     
              super.sessionCreated(event);
           }

           @Override
           public void sessionDestroyed(HttpSessionEvent event) {
             //Call a method from service layer which is communicating with DAO layer and then database.
    super.sessionDestroyed(event);
           }

    } 
```

该服务已经拥有自己的映射并且工作正常。

还有什么其他映射，我需要在 Mylistener 中调用服务层，上面的代码根本不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:33:50.413

```
public class MyListener extends HttpSessionEventPublisher {
    @Override
    public void sessionDestroyed(final HttpSessionEvent event) {
        final ApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(event.getSession().getServletContext());
        final MyServiceInterface service = ctx.getBean(MyServiceInterface.class);
        // use service
        super.sessionDestroyed(event);
    }
} 
```

应该工作（未经测试）。

# mysql - Pentaho Kettle - 使用空行生成 Excel 输出

> ID：13836311
> 
> 赞同：0
> 
> 时间：2012-12-12T09:10:32.700
> 
> 标签：mysql, excel, export-to-excel, pentaho, kettle

我是 Pentaho 水壶的新手。

我需要使用表输入步骤的结果集生成 microsoft excel 输出。

我在转换中使用以下步骤

1.  获取系统数据 - 为要检索的表数据提供日期范围
2.  表输入 - SQL 根据上一步中给出的日期范围检索表数据
3.  Excel 输出 - 使用 step2 的结果集生成 Excel。

我的 excel 输出在列标题之前应该有 3 个空行。所以我尝试使用联合生成空行并使用 sql 构造列标题。但是如果我在 sql 中选择空行（所有字段值将被视为字符串），水壶不会对字段应用格式。

无论如何在列标题之前的excel输出中生成空行，而不会干扰我的结果集。

```
SELECT 
    '' AS 'Accounting Month',   '' AS 'Insured Name','' AS 'Policy Number','' AS 'Company Name','' AS 'Line Of Business','' AS 'Transaction Type',  '' AS 'Effective Date','' AS 'Rate','' AS 'Gross Premium','' AS 'Commission Amount',    '' AS 'Expense Constant',   '' AS 'Net Amount','' AS 'Payment Amount', 1 as ORDERS
UNION ALL

SELECT 
    '' AS 'Accounting Month',   '' AS 'Insured Name','' AS 'Policy Number','' AS 'Company Name','' AS 'Line Of Business','' AS 'Transaction Type',  '' AS 'Effective Date','' AS 'Rate','' AS 'Gross Premium','' AS 'Commission Amount',    '' AS 'Expense Constant',   '' AS 'Net Amount','' AS 'Payment Amount', 1 as ORDERS
UNION ALL

SELECT 
    '' AS 'Accounting Month',   '' AS 'Insured Name','' AS 'Policy Number','' AS 'Company Name','' AS 'Line Of Business','' AS 'Transaction Type',  '' AS 'Effective Date','' AS 'Rate','' AS 'Gross Premium','' AS 'Commission Amount',    '' AS 'Expense Constant',   '' AS 'Net Amount','' AS 'Payment Amount', 1 as ORDERS
UNION ALL

SELECT 
    '' AS 'Accounting Month',   '' AS 'Insured Name','' AS 'Policy Number','' AS 'Company Name','' AS 'Line Of Business','' AS 'Transaction Type',  '' AS 'Effective Date','' AS 'Rate','' AS 'Gross Premium','' AS 'Commission Amount',    '' AS 'Expense Constant',   '' AS 'Net Amount','' AS 'Payment Amount', 3 as ORDERS
UNION ALL

SELECT 
 'Accounting Month',
 'Insured Name',
 'Policy Number',
 'Company Name',
 'Line Of Business',
 'Transaction Type',
 'Effective Date',
 'Rate',
'Gross Premium',
'Commission Amount',
'Expense Constant',
'Net Amount',
'Payment Amount', 
2 ORDERS

UNION ALL

SELECT * FROM (
SELECT 
        CONCAT(ACCOUNT_YEAR,ACCOUNT_MONTH) AS 'Accounting Month',
        INSURED_NAME AS 'Insured Name',
        POLICY_NUMBER AS 'Policy Number',
        COMPANY AS 'Company Name',
        LINE_OF_BUSINESS AS 'Line Of Business',
        TRANSACTION_DETAIL_TYPE 'Transaction Type',
        DATE_FORMAT(CHANGE_EFFECTIVE_DATE,'%m/%d/%Y') AS 'Effective Date',
        OWNER_COMMISSION_RATE AS 'Rate',
        GROSS_PREMIUM AS 'Gross Premium',
        OWNER_COMMISSION_AMOUNT AS 'Commission Amount',
        EXPENSE_CONSTANT AS 'Expense Constant',
        NET_AMOUNT AS 'Net Amount',
        NET_AMOUNT AS 'Payment Amount' ,
        4 ORDERS
        FROM TABLE1
        WHERE           
        DATE(TRANSACTION_ENTRY_DATE) >=?
        AND 
        DATE(TRANSACTION_ENTRY_DATE) <=?
        ORDER BY TABLE1.POLICY_NUMBER,TABLE1.FLAG,TABLE1.ENDORSEMENT_NUMBER
)T
ORDER BY ORDERS; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:40:12.603

我看到 2 个选项：

1.  使用选择值步骤将列从字符串正确更改为整数或其他。
2.  使用 Cast('' as Integer) 或类似方法确保 SQL 查询将列作为正确的数据类型返回。

如果您在联合的不同部分有不同的数据类型，我会认为您的联合查询会产生错误！？所以也许这里发生了其他事情？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:12:55.970

您还可以使用 MS Excel Writer 步骤，并在内容选项卡上的“从写入 ... 空行开始”框输入 3。

# php - l 链接函数怎么写

> ID：13836312
> 
> 赞同：0
> 
> 时间：2012-12-12T09:10:39.827
> 
> 标签：php, drupal, drupal-7

如果 $text 和 $path 是一个变量。如何编写 l 函数。例如：`$text = $term->name`，`$path = taxonomy/term/'.$term->tid` 如何编写 l 函数。我用过`l($term->name,taxonomy/term/'.$term->tid`)`。它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:17:59.730

你做的一切都是对的，但我认为你错过了一个`single quote`. 尝试复制并粘贴以下代码

```
l($term->name, 'taxonomy/term/' . $term->tid); 
```

更新：

如果[l()](http://api.drupal.org/api/drupal/includes!common.inc/function/l/7)函数没有自动显示路径别名，您可以使用[drupal_get_path_alias()](http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_get_path_alias/7)来获取路径别名。

```
l($term->name, drupal_get_path_alias('taxonomy/term/' . $term->tid)); 
```

# python - 如何使用 wxPython 在 Windows 中使用本机错误图标和错误声音？

> ID：13836313
> 
> 赞同：3
> 
> 时间：2012-12-12T09:10:42.910
> 
> 标签：python, windows, wxpython

这条简单的线：

```
wx.MessageBox('Foo', 'Bar', wx.OK | wx.ICON_ERROR) 
```

给我一个带有错误图标和 Windows 错误噪音的消息框（这***与***噪音不同`wx.Bell()`）。我想为未捕获的异常创建一个自定义错误对话框，其中回溯在文本控件等中可用，并且我想包括 Windows 错误图标和噪音。我知道两者在 Windows 版本之间有所不同，甚至可以自定义错误噪音。

在 wxPython 中使用这些本机 Windows 资源是否有任何直接的方法？奖金问题；如果答案是否定的，那么做我想做的*最直接的方法是什么？*

* * *

## 接受答案后的结果：

*在匿名懦夫的*出色回答之后，我只是想炫耀一下结果，因为它们远远超出了我的预期。这是现在在未处理的异常上弹出的错误对话框（在 Windows 8 上）：

![截屏](../Images/6c7e16ca592ff5e8b89f9c15e9478c78.png)

它还包含现代 Windows“UNNK！” 错误声音。这是对话框背后的代码。我将它放在一个单独的模块中，该模块`sys.excepthook`在导入时会覆盖：

```
"""This module, when imported, overrides the default unhandled exception hook
with one that displays a fancy wxPython error dialog."""

import sys
import textwrap
import traceback
import winsound

import wx

def custom_excepthook(exception_type, value, tb):
    dialog = ExceptionDialog(exception_type, value, tb)
    dialog.ShowModal()

# Override sys.excepthook
sys.excepthook = custom_excepthook

class ExceptionDialog(wx.Dialog):
    """This class displays an error dialog with details information about the
    input exception, including a traceback."""

    def __init__(self, exception_type, exception, tb):
        wx.Dialog.__init__(self, None, -1, title="Unhandled error",
                           style=wx.DEFAULT_DIALOG_STYLE | wx.RESIZE_BORDER)

        self.SetSize((640, 480))
        self.SetMinSize((420, 200))

        self.exception = (exception_type, exception, tb)
        self.initialize_ui()

        winsound.MessageBeep(winsound.MB_ICONHAND)

    def initialize_ui(self):
        extype, exception, tb = self.exception

        panel = wx.Panel(self, -1)

        # Create the top row, containing the error icon and text message.
        top_row_sizer = wx.BoxSizer(wx.HORIZONTAL)

        error_bitmap = wx.ArtProvider.GetBitmap(
            wx.ART_ERROR, wx.ART_MESSAGE_BOX
        )
        error_bitmap_ctrl = wx.StaticBitmap(panel, -1)
        error_bitmap_ctrl.SetBitmap(error_bitmap)

        message_text = textwrap.dedent("""\
            I'm afraid there has been an unhandled error. Please send the
            contents of the text control below to the application's developer.\
        """)
        message_label = wx.StaticText(panel, -1, message_text)

        top_row_sizer.Add(error_bitmap_ctrl, flag=wx.ALL, border=10)
        top_row_sizer.Add(message_label, flag=wx.ALIGN_CENTER_VERTICAL)

        # Create the text control with the error information.
        exception_info_text = textwrap.dedent("""\
            Exception type: {}

            Exception: {}

            Traceback:
            {}\
        """)
        exception_info_text = exception_info_text.format(
            extype, exception, ''.join(traceback.format_tb(tb))
        )

        text_ctrl = wx.TextCtrl(panel, -1,
                                style=wx.TE_MULTILINE | wx.TE_DONTWRAP)
        text_ctrl.SetValue(exception_info_text)

        # Create the OK button in the bottom row.
        ok_button = wx.Button(panel, -1, 'OK')
        self.Bind(wx.EVT_BUTTON, self.on_ok, source=ok_button)
        ok_button.SetFocus()
        ok_button.SetDefault()

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(top_row_sizer)
        # sizer.Add(message_label, flag=wx.ALL | wx.EXPAND, border=10)
        sizer.Add(text_ctrl, proportion=1, flag=wx.EXPAND)
        sizer.Add(ok_button, flag=wx.ALIGN_CENTER | wx.ALL, border=5)

        panel.SetSizer(sizer)

    def on_ok(self, event):
        self.Destroy() 
```

我希望的唯一改进是让静态文本根据对话框的宽度自动流动和换行，但我不会为此费心制作自定义控件类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:28:52.047

调用特定于操作系统的`wx.MessageBox`标准消息/警报对话框（在 Windows 上，即来自 user32.dll的[MessageBox() ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)wxWidgets 只是将您提供的标志（如 wx.OK 和 wx.ICON_INFORMATION）转换为本机消息框的特定于操作系统的标志和选项。

您可以通过[`wx.ArtProvider`](http://wxpython.org/docs/api/wx.ArtProvider-class.html).

就声音而言，[`wx.Sound`](http://wxpython.org/docs/api/wx.Sound-class.html)只能播放声音文件。但是，如果应用程序不必是可移植的，则可以使用该[`winsound`](http://docs.python.org/2/library/winsound.html)模块。

```
import wx
import winsound # windows only

class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self,None,wx.ID_ANY)
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add( wx.StaticBitmap(self,bitmap=wx.ArtProvider.GetBitmap(wx.ART_INFORMATION)) )
        sizer.Add( wx.StaticBitmap(self,bitmap=wx.ArtProvider.GetBitmap(wx.ART_QUESTION)) )
        sizer.Add( wx.StaticBitmap(self,bitmap=wx.ArtProvider.GetBitmap(wx.ART_WARNING)) )
        sizer.Add( wx.StaticBitmap(self,bitmap=wx.ArtProvider.GetBitmap(wx.ART_ERROR)) )
        self.SetSizerAndFit(sizer)
        self.Show()
        winsound.MessageBeep(winsound.MB_ICONASTERISK)
        winsound.PlaySound('SystemHand', winsound.SND_ASYNC | winsound.SND_ALIAS)

app = wx.PySimpleApp()
Frame()
app.MainLoop() 
```

# css - 为什么以下下拉菜单悬停在 IE 上不起作用

> ID：13836314
> 
> 赞同：0
> 
> 时间：2012-12-12T09:10:52.227
> 
> 标签：css, internet-explorer, cross-browser, hover

我看到了以下下拉菜单示例：

[http://jsfiddle.net/W5FWW/360/](http://jsfiddle.net/W5FWW/360/)

html:

```
<div id="menu">
    <ul>
        <li><center><a href="#">Home</a></center>
                <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Disclaimer</a></li>
                </ul>
        </li>
    </ul>
</div>​ 
```

此示例在 Chrome 上非常适合我，但无法在 IE 9 上运行，
当我悬停菜单链接时，菜单应该打开。
（当我在 jsfiddle 上打开它时它可以工作，但是当将它复制到 html 文件并独立运行它时它会失败）

为什么这适用于 Chrome 而不适用于 IE 9？我能做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:26:06.123

您没有设置文档类型。

“注意：在 IE 中，必须`<!DOCTYPE>`为 :hover 选择器声明 a 才能作用于该元素以外的其他`<a>`元素。” [http://www.w3schools.com/cssref/sel_hover.asp](http://www.w3schools.com/cssref/sel_hover.asp)

你有`:hover`一个`<li>`：

```
#menu:hover ul li:hover ul li:hover ul { 
    position: absolute;
    margin-left: 145px;
    margin-top: -22px;
    font: 10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:28:23.733

我可以让它失败的唯一方法是将 IE 放入 Quirks 模式。确保你的文件中有一个有效的文档类型，你应该没问题。请告知这是否不是问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:32:58.480

这是在 IE7/8/9 和其他浏览器上运行的完整代码。请阅读[Doctype 声明。](http://www.w3schools.com/tags/tag_doctype.asp)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
div, ul, li{ padding:0; margin:0; list-style:none;}
#menu { 
    margin-top: 100px;
    float: left;
    line-height: 10px; 
    left: 200px;}
#menu a { 
    display: block; 
    text-decoration: none; 
    color: #3B5330;}
#menu a:hover { background: #B0BD97;}
#menu ul li ul li a:hover { 
    background: #ECF1E7; 
    padding-left:9px;
    border-left: solid 1px #000;}
#menu ul li ul li {
    width: 140px; 
    border: none; 
    color: #B0BD97;  
    padding-top: 3px; 
    padding-bottom:3px; 
    padding-left: 3px; 
    padding-right: 3px; 
    background: #B0BD97;
    z-index:1;
}
#menu ul li ul li a { 
    font: 11px arial; 
    font-weight:normal; 
    font-variant: small-caps; 
    padding-top:3px; 
    padding-bottom:3px;}
#menu ul li {
    float: left; 
    width: 146px; 
    font-weight: bold; 
    border-top: solid 1px #283923; 
    border-bottom: solid 1px #283923; 
    background: #979E71;}
#menu ul li a { 
    font-weight: bold;
    padding: 15px 10px;}
#menu li{ 
    position:relative; 
    float:left;}
#menu ul li ul, #menu:hover ul li ul, #menu:hover ul li:hover ul li ul{ 
    display:none;
    list-style-type:none; 
    width: 140px;}
#menu:hover ul, #menu:hover ul li:hover ul, #menu:hover ul li:hover ul li:hover ul { 
    display:block;}
#menu:hover ul li:hover ul li:hover ul { 
    position: absolute;
    margin-left: 145px;
    margin-top: -22px;
    font: 10px;}
#menu:hover ul li:hover ul { 
    position: absolute;
    margin-top: 1px;
    font: 10px;
}
#menu>ul>li:hover>ul { 
    bottom:100%;
    border-bottom: 1px solid transparent
}​
</style>
</head>

<body>
<div id="menu">
    <ul>
        <li><center><a href="#">Home</a></center>
                <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Disclaimer</a></li>
                </ul>
        </li>
    </ul>
</div>​
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T09:27:17.487

我已经对此进行了测试：

*   火狐 17.0.1
*   铬 21.0.1180.89 m
*   即 9.0.8112.16421

而且效果很好。

就像一个忠告一样，不要使用 CSS 下拉菜单进行关键导航，以防旧浏览器无法支持它。您可能会失去关键功能。

还取决于您的 DOCTYPE！`<center>`已过时，您应该考虑改用 CSS 居中。

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link rel="stylesheet" href="style.css" />
        <meta charset="UTF-8">
    </head>
    <body>
        <div id="menu">
            <ul>
                <li class="centretext"><a href="#">Home</a>
                        <ul>
                                <li><a href="#">About Us</a></li>
                                <li><a href="#">Disclaimer</a></li>
                        </ul>
                </li>
            </ul>
        </div>​
    </body>
</html> 
```

# android - 自动安装安卓应用

> ID：13836318
> 
> 赞同：2
> 
> 时间：2012-12-12T09:11:03.273
> 
> 标签：android, package-managers

我需要为有限数量的用户部署和更新各种企业应用程序到 Android 设备。

这些应用程序不应在 Google Play 上发布，但必须通过单独的渠道分发。

我需要做的是一个“企业包管理器”应用程序来自动检查新的应用程序/更新并自动触发安装新的或更新的 APK，而无需先征得用户同意。

我知道，按照设计，Android 不允许 3rd 方应用程序与已安装的应用程序进行交互。我也知道有根手机没有这个问题，因为您可以将任何 APK 注入设备。

*   如果我使用作为系统应用程序安装的“企业包管理器”但没有二进制文件（它仍然是企业电话......）来制作 ROM（甚至基于 CWM）`su`，该程序是否能够自动安装新应用程序？
*   我应该如何在不征得同意的情况下安装应用程序？我的意思是，如果需要，我需要一个基本的代码示例和权限
*   无论如何，系统应用程序是否以 root 用户身份运行？我记得是这样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:29:38.460

如果要检查服务器上某处的应用程序，则必须每 24 小时检查一次更新，如果有任何可用更新，它将导航到将安装更新版本构建的异步任务

```
public void checkforUpdate() {

        /* Get Last Update Time from Preferences */
        SharedPreferences prefs = getPreferences(0);
        lastUpdateTime = prefs.getLong("lastUpdateTime", 0);
        if ((lastUpdateTime + CommonString.timeCheckDuration) < System.currentTimeMillis() && System.currentTimeMillis()>lastUpdateTime) {
            // Asynch task
            new VersionCheckTask().execute();
        }
        else{
            // do nothing
        }
    } 
```

现在它将导航到：

```
private class VersionCheckTask extends AsyncTask<Void, Void, Void> {
        ProgressDialog progressDialog;
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            try {
                progressDialog = new ProgressDialog(Login.this, android.R.style.Theme_Holo_Light_Dialog);
                //progressDialog.setTitle("AppName");
                progressDialog.setMessage("Checking for updates...");
                progressDialog.setCancelable(false);
                progressDialog.setIndeterminate(true);
                progressDialog.show();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        protected Void doInBackground(Void... params) {
            /**
             *  Simulates a background job.
             */
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }

            HashMap<String, String> map = new HashMap<String, String>();
            map.put("build",CommonString.buildVersion);
            map.put("en", CommonString.en);

            responce = CommonFunction.PostRequest("updateCheck", map);
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            if (progressDialog != null && progressDialog.isShowing())
                progressDialog.dismiss();
            if(!CommonFunction.isNetworkAvailable()){
                Toast.makeText(ClaimColonyApplication.getAppContext(), CommonString.NO_NETWORK, Toast.LENGTH_SHORT).show();
                return;
            }
            ParseUpdateResponse(responce);
            if(rCodeUpdate == 100 && ApkLink.length() >0){
                new AlertDialog.Builder(Login.this,android.R.style.Theme_Holo_Light_Dialog)
                .setIcon(R.drawable.ic_launcher)
                .setTitle("Update Available")
                .setMessage(""+UpdateMessage)
                .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                         //User clicked OK so do some stuff 
                        new VersionCheckTaskDialog().execute();
                    }
                })
                .setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                         //User clicked Cancel 
                        finish();
                    }
                })
                .show();
            }else{
                if(rCodeUpdate == 100){
                    lastUpdateTime = System.currentTimeMillis();
                    SharedPreferences.Editor editor = getPreferences(0).edit();
                    editor.putLong("lastUpdateTime", lastUpdateTime);

                    editor.commit();
                }
            }
            super.onPostExecute(result);
        }
    }

    private class VersionCheckTaskDialog extends AsyncTask<Void, Void, Void> {
        ProgressDialog progressDialogUpdate;
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            try {
                progressDialogUpdate = new ProgressDialog(Login.this, android.R.style.Theme_Holo_Light_Dialog);
                //progressDialog.setTitle("AppName");
                progressDialogUpdate.setMessage("Fetching updates...");
                progressDialogUpdate.setCancelable(false);
                progressDialogUpdate.setIndeterminate(true);
                progressDialogUpdate.show();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        protected Void doInBackground(Void... params) {
            /**
             *  Simulates a background job.
             */
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }

            String extStorageDirectory =    Environment.getExternalStorageDirectory().toString();
            File folder = new File(extStorageDirectory, "pdf");
            folder.mkdir();
            File file = new File(folder, "AppName."+"apk");
            try {
                    file.createNewFile();
            } catch (IOException e1) {
                    e1.printStackTrace();
            }
            /**
             * replace url to ApkLink
             */
             //DownloadFile(ApkLink, file);
             DownloadFile("URL", file);

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            if (progressDialogUpdate != null && progressDialogUpdate.isShowing())
                progressDialogUpdate.dismiss();
            if(!CommonFunction.isNetworkAvailable()){
                Toast.makeText(ClaimColonyApplication.getAppContext(), CommonString.NO_NETWORK, Toast.LENGTH_SHORT).show();
                return;
            }
            try {
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/pdf/" + "AppName.apk")), "application/vnd.android.package-archive");
                startActivity(intent);
                lastUpdateTime = System.currentTimeMillis();
                SharedPreferences.Editor editor = getPreferences(0).edit();
                editor.putLong("lastUpdateTime", lastUpdateTime);

                editor.commit();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                System.out.println("Exception in start intent for launch app-------: "+e.toString());
                e.printStackTrace();
            } 
            super.onPostExecute(result);
        }
    } 
```

我每 24 小时检查一次更新，如果有任何可用更新，则会弹出升级您的应用程序的窗口，否则将保存您在首选项中的最后一次检查时间。现在这将允许您更新和安装您的应用程序，这将在 24 小时后检查下一次更新，您可能需要根据条件检查更新。请更改 .apk 文件的名称和 URL。

您将需要以下权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

祝你好运。

# partial-views - 使用 Ajax.BeginForm 将数据发布到具有完整站点名称的控制器操作

> ID：13836324
> 
> 赞同：2
> 
> 时间：2012-12-12T09:11:17.173
> 
> 标签：partial-views, jquery-dialog, ajax.beginform

我想将 jQuery 对话框中打开的部分视图中的数据发布到具有全名的控制器操作，如下所示：

而不是这个：

@using (Ajax.BeginForm(" **SendMail** ", " **Ui** ", (new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "email-dialog", OnSuccess = "onEmailSuccess" })))

我想在下面：

@using (Ajax.BeginForm(" **http://www.MyWebsite.com/Ui/SendMail** ", (new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "email-dialog", OnSuccess = "onEmailSuccess" })))

任何想法 ？

# iphone - 不要在 Iphone SDK 的第一个登录页面中显示标签栏

> ID：13836325
> 
> 赞同：5
> 
> 时间：2012-12-12T09:11:17.367
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uitabbarcontroller

我在我的应用程序中实现了标签栏控制器。但我的第一页是登录视图。所以，我不想在它上面显示标签栏。我通过隐藏该视图上的标签栏来做到这一点。

但是现在，当我选择第一个选项卡时，它总是作为登录页面进入 rootview 控制器。

```
//for home tab..

    UINavigationController *nav1 = [[UINavigationController alloc] init];

    UIViewController *viewController1;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController1 = [[[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil] autorelease];
    } else
    {
        viewController1 = [[[LoginViewController alloc] initWithNibName:@"LoginViewController_iPad" bundle:nil] autorelease];
    }

    nav1.viewControllers = [NSArray arrayWithObjects:viewController1, nil];

    //for account tab...
    UINavigationController *nav2 = [[UINavigationController alloc] init];
    UIViewController *viewController2;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController2 = [[[AccountView alloc] initWithNibName:@"AccountView_iPhone" bundle:nil] autorelease];
    } else
    {
        viewController2 = [[[AccountView alloc] initWithNibName:@"AccountView_iPad" bundle:nil] autorelease];
    }
    nav2.viewControllers = [NSArray arrayWithObjects:viewController2, nil];

    //for links tab...
    UINavigationController *nav3 = [[UINavigationController alloc] init];
    UIViewController *viewController3;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController3 = [[[LinksView alloc] initWithNibName:@"LinksView_iPhone" bundle:nil] autorelease];
    } else
    {
        viewController3 = [[[LinksView alloc] initWithNibName:@"LinksView_iPad" bundle:nil] autorelease];
    }
    nav3.viewControllers = [NSArray arrayWithObjects:viewController3, nil];

    //for about us tab...
    UINavigationController *nav4 = [[UINavigationController alloc] init];
    UIViewController *viewController4;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController4 = [[[AboutUsView alloc] initWithNibName:@"AboutUsView_iPhone" bundle:nil] autorelease];
    } else
    {
        viewController4 = [[[AboutUsView alloc] initWithNibName:@"AboutUsView_iPad" bundle:nil] autorelease];
    }
    nav4.viewControllers = [NSArray arrayWithObjects:viewController4, nil];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1,nav2,nav3,nav4,nil];

    self.tabBarController.tabBar.tintColor = [UIColor blackColor];

    //self.tabBarController.tabBar.tintColor = [UIColor colorWithRed:237.0/255.0 green:208.0/255.0 blue:0.0/255.0 alpha:1.0];

    self.window.rootViewController=self.tabBarController; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:56:41.453

看看[这个](https://stackoverflow.com/questions/9762975/display-xib-before-uitabbarcontroller/9763326#9763326)解决方案。
基本上你可以在用户登录后`rootViewController`从你`loginVC`的切换到。`tabBarVC`但我认为这`loginVC`不应该是你的“第一页”，`tabBarVC`而应该是一个独立的 viewController。

但是，如果您仍然想要在第一个选项卡中登录，您可以在用户登录后更改 VC 的视图。
您可以在[NSUserDefaults](http://developer.apple.com/library/ios/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)中设置一个标志以了解用户是否已登录，因此在`viewDidAppear:`第一个选项卡中您可以检查用户是否已登录并显示您的不同 UI。

ps：你可以在这里找到一个不写所有条件来为 iPhone/iPad 加载不同 xib 的小[技巧](https://stackoverflow.com/a/13742931/251513)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:35:31.367

只需将 viewController m 分配给`UINavigationController`如下所示。

```
UINavigationController *nav1 =[[UINavigationController alloc]initWithRootViewController:viewController1];

UINavigationController *nav2 =[[UINavigationController alloc]initWithRootViewController:viewController2];

UINavigationController *nav3 =[[UINavigationController alloc]initWithRootViewController:viewController3];

UINavigationController *nav4 =[[UINavigationController alloc]initWithRootViewController:viewController4]; 
```

然后像你的代码一样在标签栏中分配..

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1,nav2,nav3,nav4,nil];
self.window.rootViewController = self.tabBarController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T10:55:40.597

您必须使用不同的方式来显示没有 tabBarController 的**LoginView**
不要在 tabBarController 上使用**LoginView**。
您必须选择一个布尔值，例如*login*。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
NSUserDefaults *default=[NSUserDefaults standardUserDefaults];
if(![default boolForKey:@"login"])
{
    //here tab is your tabBarController.
    [tab presentViewController:yourLoginView animated:YES completion:nil];
}
else{
    //your normal code
} 
```

用户登录后，您可以设置 login=YES。

# git - 自动签入 Git 目录

> ID：13836338
> 
> 赞同：1
> 
> 时间：2012-12-12T09:12:05.637
> 
> 标签：git

我意识到我不应该这样做有很好的理由。但是，鉴于我很愚蠢，执行以下操作的最佳方法是什么。

我在我的 git repo 中使用一个目录基本上作为键值存储。其中文件名是键，值是文件的内容。

我希望在每个`git commit`目录中的文件都自动添加到存储库中。

我应该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:15:08.123

如果我正确理解您的问题，您需要类似[SparkleShare](http://sparkleshare.org/)的东西，它可以让您使用 Git 存储库进行文件共享并自动同步您的存储库文件夹:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:25:42.760

所以基本上你想在每次提交时都*添加目录？*您可以为此使用 git 挂钩，请查看[Customizing Git - Git Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)，更具体地说是*预提交挂钩。*

# javascript - “javascript:void(0)”有什么用

> ID：13836340
> 
> 赞同：0
> 
> 时间：2012-12-12T09:12:15.980
> 
> 标签：javascript, html

> **可能重复：**
> [“javascript:void(0)”是什么意思？](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean)

我正在检查许多网站，我看到许多网站创建者定义了内联 JS 函数“javascript:void(0)”。我认为这是一个定义一个 JS 函数，它什么都不做。来自 images.google.com 的示例搜索框中包含的图像。

```
<a class="gsst_a" href="javascript:void(0)">
         <span id="gs_si0">
             <span class="gssi_a gsst_e" id="qbi">
             </span>
         </span>
</a> 
```

任何人都可以解释定义这个函数的好处是什么，即使这个函数什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:13:45.473

除非存在属性，否则某些浏览器不会呈现`a`链接样式的内容（蓝色下划线、手形光标等）`href`，并且如果此“无操作”`href`稍后被`onclick`附加到元素的处理程序所取代，那么这就是为什么您可能用它。

# java - 我正在尝试使用 jasper 报告开发 excel 页面

> ID：13836342
> 
> 赞同：6
> 
> 时间：2012-12-12T09:12:24.773
> 
> 标签：java, excel, jasper-reports

我正在处理 Jasper 报告。我尝试生成 excel 文件，但下面的代码出现异常。

```
JasperReport jasperReport = JasperCompileManager.compileReport("C:\\jasper files\\report1.jrxml"); 
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, new HashMap(), new JREmptyDataSource());

JRXlsExporter exporterXLS = new JRXlsExporter(); 
exporterXLS.setParameter(JRXlsExporterParameter.JASPER_PRINT, jasperPrint); 
exporterXLS.setParameter(JRXlsExporterParameter.OUTPUT_STREAM, "sample1.xls"); 
exporterXLS.setParameter(JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.TRUE); 
exporterXLS.setParameter(JRXlsExporterParameter.IS_WHITE_PAGE_BACKGROUND, Boolean.FALSE); 
exporterXLS.setParameter(JRXlsExporterParameter.IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS, Boolean.TRUE); 
exporterXLS.exportReport(); 
```

例外是`Caused by: java.lang.ClassNotFoundException: org.apache.poi.ss.usermodel.Sheet at java.net.URLClassLoader$1.run(Unknown Source) at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) ... 1 more`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:25:43.343

您需要在 CLASSPATH 中包含 Apache POI jar，Excel 导出需要 Apache POI jar，您收到的消息是找不到 POI 类。

[您可以从http://poi.apache.org/](http://poi.apache.org/)获取 POI jar

另请参阅[**此处**](https://stackoverflow.com/a/3733775/352672)以获取您问题的类似答案。

# c++ - 从字符串中分离相同数字的序列

> ID：13836346
> 
> 赞同：6
> 
> 时间：2012-12-12T09:12:45.667
> 
> 标签：c++, string

我正在尝试做一个小任务，要求将数字转换为电话键盘的字母，例如，如果输入是 222，则表示电话按钮“2”（[http://upload.wikimedia.org/wikipedia/commons/7/ 7d/Telephone-keypad.png](http://upload.wikimedia.org/wikipedia/commons/7/7d/Telephone-keypad.png)）被按下 3 次，输出应该是“C”等等。所以我首先应该做的是将所有序列，例如 22255-444 分成 222 、 55 、 - 、 444 和然后我想弄清楚一切，但现在的问题是我的函数无法读取最后一个序列

```
#include <iostream>
#include <fstream>
using namespace std;
//-------------------------------------------------------------------------

void encode(string text, string &result, int &i)
{
 char keyboard[10][4] = {
    {' ',' ',' ',' '},
    {'.','?','!','.'},
    {'a','b','c','a'},
    {'d','e','f','d'},
    {'g','h','i','g'},
    {'j','k','l','j'},
    {'m','n','o','m'},
    {'p','r','q','s'},
    {'t','u','v','t'},
    {'w','x','y','z'}
  };

  int j;
  for(j = i; j<text.size();j++)
  {
    if(text[i] != text[j] || j == text.size())
    {
        result = text.substr(i, j-i);
        i = j-1;
        break;
    }

  }
  cout << result << endl;

}

int main()
{
  ifstream fd("sms.in");
  string text;
  string result;
  getline(fd, text);
  for(int i = 0; i<text.size();i++)
  {
    encode(text, result, i);
  }
  return 0;
} 
```

作为一个测试，我现在使用这个输入：5552-22-27777，输出应该是 555 2 - 22 - 2 7777，但对我来说它是 555 2 - 22 - 2 2 2 2 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:24:52.243

在本`if`声明中：

```
if(text[i] != text[j] || j == text.size()) 
```

第二个条件 ( `j == text.size()`) 永远不会为真，因为循环将在此之前终止。因此，当您到达字符串末尾时，`result`和的值`i`将不会正确更新。

您可以做的是从循环中删除终止条件（不必有一个，因为无论如何您都会跳出循环）。并且您将需要反转条件的顺序，`if`这样您就不会读到字符串的末尾：

```
for(j = i; ;j++)
{
    if (j == text.size() || text[i] != text[j])
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:34:02.483

我会把最后一点从 for 循环中拉出来，它并不真正属于那里，因为它是一种特殊情况。我还消除了一些其他看起来不必要的东西，并修复了循环的内部。看看这一切对你来说是否有意义。

我删除了键映射声明，因为它没有在您的示例中使用，并且我们重视这里所谓的“最小工作示例”作为一种有效地隔离和讨论问题的方式。

请注意，我已尝试将所有编码工作移到单个函数中并移出 main() 函数。这释放了 main 来处理程序的高级部分。在我标记为“在这里解码”的行中，如果您要这样做，您可以调用另一个函数，将数字字符串转换为字符。

我已经标记了特殊情况并明确地将其移出 for 循环，以便 for 循环中的所有内容都可以进行相同的处理。这比试图让 for 循环做所有事情要好。

我不同意那个逻辑`i=j-1`，所以我改变了它（我确实测试了这个）。

我还切换到直接从命令行读取输入，以便更快地进行测试。

我`#include <string>`在开头添加了指令，以便程序可以编译。

将所有编码工作放在单个函数中，将函数声明简化为单个参数。

我切换了括号以符合我自己对 One True Style 的理解。

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

void encode(string text) {
  int j=0,i=0; //Declare j here so we can use in special case
  for(j=0; j<text.size(); j++){
    if(text[j] != text[i]){
      cout << text.substr(i, j-i) << endl; //Decode here
      i = j;
    }
  }
  cout << text.substr(i,j-1) << endl; //Decode here. Special case
}

int main(){
  string text;

  getline(cin, text);
  encode(text, result);

  return 0;
} 
```

# javascript - Knockout.js：手动触发计算

> ID：13836351
> 
> 赞同：6
> 
> 时间：2012-12-12T09:12:57.597
> 
> 标签：javascript, knockout.js

我在页面上有一个网格和一个选择控件。选择任何选择值都会触发网格更新。该更新是使用计算完成的。例如，在向网格添加新值的情况下，我可以手动触发网格进行更新吗？

```
 function vm(){
    var self = this;

    self.items = ko.observableArray([]);
    self.chosen_category = ko.observable("");

    self.pager = {
        page_namber : ko.observable(1),
        page_size : ko.observable(10)
    };

     self.sort = {
       field : ko.observable('name'),
       dist : ko.observable('asc')
     };
     // etc. 

     self.fetch = ko.computed(function(){
        $.ajax({
               url: '/api/items/',
               type: 'GET',
               data: ko.toJSON(self),
               contentType: 'application/json',
               success: self.items
          });
     }, self);

      self.add_item = function() {
        //here I want to update the grid
        self.fetch(); // not work
      };
 } 
```

当然我可以将它移到一个单独的函数中，但我正在寻找一个更清洁的解决方案。谢谢！

**工作版本：**

```
 function vm() {
            var self = this;

            self.items = ko.observableArray([]);
            self.chosen_category = ko.observable("test");

            self.pager = {
                page: ko.observable(1),
                size: ko.observable(10)
            };

            self.sort = {
                field: ko.observable('name'),
                dist: ko.observable('asc')
            };

            self.fetch = function () {
                var data = {
                    category: self.chosen_category(),
                    pager: ko.toJS(self.pager),
                    sort: ko.toJS(self.sort)
                };

                $.ajax({
                    url: '/api/items/',
                    type: 'POST',
                    data: ko.toJSON(data),
                    contentType: 'application/json',
                    success: self.items
                });
            };

            self._auto_update = ko.computed(self.fetch).extend({ throttle: 1 }); ;

            self.add_item = function () {
                self.fetch();
            };
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T09:19:52.107

最好使用`subscription`而不是`computed`. 在这种情况下，您可以定义 fetch 函数以用于订阅和手动调用：

```
function vm(){
  var self = this;

  self.items = ko.observableArray([]);
  self.chosen_category = ko.observable("");

  self.fetch = function(){   
    $.get('/api/items/' + self.chosen_category(), self.items);
  };

  self.chosen_category.subscribe(self.fetch);

  self.add_item = function() {
   //here I want to update the grid
   self.fetch(); 
  };
} 
```

你也可以对计算做同样的事情：

```
function vm(){
  var self = this;

  self.items = ko.observableArray([]);
  self.chosen_category = ko.observable("");

  self.fetch = function(){   
    $.get('/api/items/' + self.chosen_category(), self.items);
  };

  self.doStaff = ko.computed(self.fetch);

  self.add_item = function() {
   //here I want to update the grid
   self.fetch(); 
  };
} 
```

# java - 文本文件中“行尾”的 UTF-8 表示形式是什么

> ID：13836352
> 
> 赞同：28
> 
> 时间：2012-12-12T09:12:57.907
> 
> 标签：java, utf-8

UTF-8 中“行尾”的二进制表示是什么。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-12T09:16:57.420

有[一堆](http://en.wikipedia.org/wiki/Newline#Unicode)：

*   `LF`: 换行, [U+000A](http://unicode.org/cldr/utility/character.jsp?a=000A) (UTF-8 in hex: 0A)
*   `VT`：垂直制表符，[U+000B](http://unicode.org/cldr/utility/character.jsp?a=000B)（UTF-8 十六进制：0B）
*   `FF`：换页，[U+000C](http://unicode.org/cldr/utility/character.jsp?a=000C)（UTF-8 十六进制：0C）
*   `CR`: 回车, [U+000D](http://unicode.org/cldr/utility/character.jsp?a=000D) (UTF-8 in hex: 0D)
*   `CR+LF`: CR ( [U+000D](http://unicode.org/cldr/utility/character.jsp?a=000D) ) 后跟 LF ( [U+000A](http://unicode.org/cldr/utility/character.jsp?a=000A) ) (UTF-8 in hex: 0D0A)
*   `NEL`：下一行，[U+0085](http://unicode.org/cldr/utility/character.jsp?a=0085)（UTF-8 十六进制：C285）
*   `LS`: 行分隔符, [U+2028](http://unicode.org/cldr/utility/character.jsp?a=2028) (UTF-8 in hex: E280A8)
*   `PS`: 段落分隔符，[U+2029](http://unicode.org/cldr/utility/character.jsp?a=2029) (UTF-8 in hex: E280A9)

...可能还有更多。

最常用的是`LF`(*nix)、`CR+LF`（Windows 和 DOS）和`CR`（主要是旧的 pre-OSX Mac 系统）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-12T09:18:57.540

来自[Unicode 字符 'LINE FEED (LF)'](http://www.fileformat.info/info/unicode/char/000A/index.htm)

> 在 UTF-8 (hex) 中 --> 0x0A (0a)
> UTF-8 (binary) --> 00001010

![在此处输入图像描述](../Images/86b443d637fd807f1ccba00568793e9a.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-12T09:16:10.837

UTF-8 与 ASCII 兼容，因此 UTF-8 也使用 ASCII 码 10 (0x0A) 换行和回车 13 (0x0D)。

# ruby-on-rails - 使用 sunspot solr 获取相关搜索查询

> ID：13836358
> 
> 赞同：2
> 
> 时间：2012-12-12T09:13:16.927
> 
> 标签：ruby-on-rails, solr, sunspot, sunspot-rails, sunspot-solr

我的 Rails 应用程序使用 sunspot solr 搜索书籍/作者。现在，如果我将搜索查询设为

> “杰弗里·阿切尔”

它将给出以“jeffrey archer”为作者的书集。但如果我给

> “杰弗里·阿切尔”

太阳黑子不返回任何结果。所以那个时候我想展示

> 你的意思？“杰弗里·阿切尔”

如何使用 sunpspot solr 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:03:01.310

拼写检查集成到 Sunspot 是实验性的：[https ://github.com/sunspot/sunspot/tree/spellcheck](https://github.com/sunspot/sunspot/tree/spellcheck)

我对 Solr 1.4 和 3.x 中的拼写检查所获得的结果不太满意。然而，随着 Solr 4.0 的发布及其改进的拼写检查功能，它应该被重新审视。

您可以尝试我链接的分支，或者您可能希望直接使用 RSolr 直接执行您自己的拼写检查请求。

欢迎请求请求！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:44:39.083

Solr 提供了一个[拼写检查组件](http://wiki.apache.org/solr/SpellCheckComponent)，您可以使用它根据索引中的术语为用户提供拼写纠正。
Sunspot 只是一个客户端，因此您只需要检查如何配置拼写检查组件。

# c# - 为什么需要两次单击才能单击 ToolStripMenuItem？

> ID：13836363
> 
> 赞同：4
> 
> 时间：2012-12-12T09:13:37.587
> 
> 标签：c#, .net, winforms, visual-studio-2010

我有一个正在运行的 winform 应用程序，我在这个应用程序的顶部添加了一个 winform one，它将一些数据传递给应用程序。将数据传递给应用程序后，将启用保存按钮以将数据保存到应用程序。保存按钮是工具条菜单项。我面临的一个问题是当新添加的表单仍然存在时，我需要单击两次才能保存，即第一次单击将无法正确单击。或者，如果我关闭新添加的 winform，则保存单击将首次发生，或者如果我单击现有应用程序的任何部分，即焦点将在那里，那么第一次单击也可以。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T14:58:39.717

将此方法覆盖添加到包含您的工具条的表单应该会处理它。

```
protected override void WndProc(ref Message m)
{
    const int WM_PARENTNOTIFY = 0x0210;
    if (m.Msg == WM_PARENTNOTIFY)
    {
        if (!Focused)
            Activate();
    }
    base.WndProc(ref m);
} 
```

工具条只执行激活调用，因此通过自己处理它会执行 Click 事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:24:31.423

你很好地回答了你自己的问题：新表单在添加时会成为焦点。因此，如何处理这个“按设计”问题由您决定：

*   在另一个表单传递数据后将主表单置于前面；
*   完全关闭另一种形式；
*   显示描述性消息，以便用户尝试保存知道他们可以保存；
*   ...
*   利润！

;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:02:34.907

当您启用保存按钮时，您有时必须在主窗体中执行此操作，请在其上调用 Focus()。这样，焦点就回到了主窗体，用户可以执行一键保存

# html - 应用 yui reset + base 后更改 ul 样式

> ID：13836372
> 
> 赞同：1
> 
> 时间：2012-12-12T09:14:01.270
> 
> 标签：html, css

见[http://jsfiddle.net/PdZrt/](http://jsfiddle.net/PdZrt/)

基本上我已经应用了 yui 重置和基础，并且正在尝试为菜单单独设置 ul 样式。li 选择了样式，但 ul 也没有出现。

有任何想法吗？

在小提琴中应该：

```
list-style: none;
padding: 0;
margin: 0;
background-color:Red 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:24:04.423

**定义你的** `.nav-menu li` `list-style:none;`并**定义**你的`.nav-menu` `overflow:hidden;`

**添加这个CSS**

```
.nav-menu{
overflow:hidden;
}

.nav-menu li{
list-style:none;
} 
```

**[演示](http://jsfiddle.net/PdZrt/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:28:13.093

这里有几个问题。

一，那个jsfiddle都在一条线上并且换行。

二，你的CSS`ul`读取：`.nav-menu ul`-`nav-menu`是`ul`，因此它应该是：

```
.nav_menu { list-style: none; ... } 
```

没有出现的原因`background: red`是因为`<ul>`, `<li>`s 里面的元素已经`float: left`设置了。这从 的流程中移除`<ul>`并有效地使您`<ul>`的高度为 0。虽然解决此问题的方法不止一种，但最快的方法是将 a 添加`overflow: hidden`到`<ul>`.

# 3d - 如何推断四元数？

> ID：13836377
> 
> 赞同：1
> 
> 时间：2012-12-12T09:14:13.490
> 
> 标签：3d, rotation, quaternions

假设我有一个对象，其方向由四元数 q1, q2, q3, ...qn 在服务器端的时间 1,2,3,...n 给出。我想在客户端预测对象的方向，这样我就可以在两边保持虚拟世界的一致性。

*   我将 q1 和 q2 从服务器发送到客户端。
*   在服务器端，我计算 dq = q1' * q2;
*   然后在服务器端，我通过执行 q2 * dq; 来预测 q3Predicted；
*   然后在服务器端我检查 q3 orignal 和 q3Predicted 之间的错误，如果它很大，我发送一个新的 dq，它是 d1 = q2'*q3。

我的两个问题是：

1.  我应该如何计算 dq 是 - q1'*q2 还是 q2*q1'？
2.  与原始四元数相比，我应该如何检查预测的误差是否超过 10%？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:00:49.740

> 在服务器端。我想在客户端预测它们。

~~你到底想做什么？~~

对我来说，这听起来像是您正在尝试在 GPU 上实现动画系统并尝试在 CPU 上跟踪它。每当您需要跟踪或重新进行一些计算时，您的设计就会出现一些缺陷。如果你还是在 CPU 上进行计算，为什么要在 GPU 上花费宝贵的周期进行相同的计算呢？

~~只需在 CPU 上计算并放入制服。性能也会更好，因为 GPU 旨在并行处理大量数据。仅插入少量标量会导致过多的开销。~~

如果我们谈论的是带有游戏服务器的网络游戏，您应该看看所谓的*“卡尔曼滤波器”*。

# php - 如何将此 ScratchPad 请求详细信息转换为 PHP

> ID：13836381
> 
> 赞同：1
> 
> 时间：2012-12-12T09:14:23.803
> 
> 标签：php, curl, amazon

```
POST /Orders/2011-01-01?AWSAccessKeyId=MyAccessKey
&Action=ListOrders
&SellerId=SellerId
&SignatureVersion=2
&Timestamp=2012-12-12T08%3A31%3A19Z
&Version=2011-01-01
&Signature=MySignature
&SignatureMethod=HmacSHA256
&CreatedAfter=2012-12-06T19%3A00%3A00Z
&MarketplaceId.Id.1=MyMarketID HTTP/1.1
Host: mws.amazonservices.co.uk
x-amazon-user-agent: AmazonJavascriptScratchpad/1.0 (Language=Javascript)
Content-Type: text/xml 
```

我试图将亚马逊便笺簿的这些请求细节转换为 php curl，但都是徒劳的。任何人都知道如何转换这些。

下面是代码，不是全部，而是部分代码。什么都没有显示

```
 $params = array(
        'AWSAccessKeyId' => AWS_ACCESS_KEY_ID,
        'Action' => "ListOrders",
               'SellerId' => MERCHANT_ID,
       'SignatureMethod' => "HmacSHA256",
       'SignatureVersion' => "2",
   'Timestamp'=> gmdate("Y-m-d\TH:i:s.\\0\\0\\0\\Z", time()),
     'Version'=> "2011-10-01",
   'MarketplaceId' => MARKETPLACE_ID,
   );

 // Sort the URL parameters
 $url_parts = array();
  foreach(array_keys($params) as $key)
  $url_parts[] = $key . "=" . str_replace('%7E', '~', rawurlencode($params[$key]));
 sort($url_parts);

// Construct the string to sign
 $url_string = implode("&", $url_parts);

$string_to_sign = "POST\nmws.amazonservices.co.uk\n/Orders/2011-10-01\n" . $url_string;

 // Sign the request
 $signature = hash_hmac("sha256", $string_to_sign, AWS_SECRET_ACCESS_KEY, TRUE);

 //Base64 encode the signature and make it URL safe
  $signature = urlencode(base64_encode($signature));
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL,$url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_TIMEOUT, 15);
 curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); 
$response = curl_exec($ch);
var_dump($response); 
```

卷曲获取信息

```
[content_type] => [http_code] => 0 [header_size] => 0 [request_size] => 0 [filetime] => 0 [ssl_verify_result] => 0 [redirect_count] => 0 [total_time] => 0 [namelookup_time] => 0 [connect_time] => 0 [pretransfer_time] => 0 [size_upload] => 0 [size_download] => 0 [speed_download] => 0 [speed_upload] => 0 [download_content_length] => -1 [upload_content_length] => -1 [starttransfer_time] => 0 [redirect_time] => 0 [certinfo] => Array ( ) [primary_ip] => [primary_port] => 0 [local_ip] => [local_port] => 0 [redirect_url] => ) 
```

网址

```
https://mws.amazonservices.co.uk/Orders/2011-01-01?AWSAccessKeyId=myaccesskey&Action=ListOrders&CreatedAfter=2012-12-06T19%253A00%253A00Z&MarketplaceId.Id.1=marketplaceiddumy&SellerId=selleriddummy&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-12-12T13%3A16%3A56.000Z&Version=2011-10-01&Signature=lXaoVq1n4b0gAmoMg69jnSCqHWC6C6hlbEfTtrHX2i0%3D 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:14:21.587

我已经更改了 TimeStamp 和其他一些变量，以及它的工作原理。

```
 $params = array(
    'AWSAccessKeyId' => AWS_ACCESS_KEY_ID,
    'Action' => 'ListOrders',
    'SellerId' => MERCHANT_ID,
    'SignatureVersion' => '2',
    'Version'=> '2011-01-01',
    'OrderStatus.Status.1'=> 'Unshipped',
    'OrderStatus.Status.2'=> 'PartiallyShipped',
    'SignatureMethod' => 'HmacSHA256',
    'CreatedAfter'=>'2012-12-06T19:00:00Z',
    'MarketplaceId.Id.1' => MARKETPLACE_ID,
   );
$params['Timestamp'] = gmdate("Y-m-d\TH:i:s\Z");
// Sort the URL parameters
$url_parts = array();
foreach(array_keys($params) as $key)
    $url_parts[] = $key . "=" . str_replace('%7E', '~', rawurlencode($params[$key]));
sort($url_parts);

// Construct the string to sign
$url_string = implode("&", $url_parts);
$url_string = trim($url_string, '&');
$string_to_sign = "POST" . "\n" ."mws.amazonservices.co.uk"."\n"."/Orders/2011-01-01"."\n" . $url_string;

// Sign the request
$signature = hash_hmac("sha256", $string_to_sign, AWS_SECRET_ACCESS_KEY, TRUE);

// Base64 encode the signature and make it URL safe
////echo AWS_SECRET_ACCESS_KEY;
        $signature = base64_encode(hash_hmac("sha256", $string_to_sign, AWS_SECRET_ACCESS_KEY, True));
        $signature = str_replace("%7E", "~", rawurlencode($signature));

$url = 'https://mws.amazonservices.co.uk/Orders/2011-01-01?' . $url_string . '&Signature=' . $signature;

$headers   = array("Content-Type: text/xml");

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);

//echo $url_string;
  curl_setopt($ch, CURLOPT_POSTFIELDS, $headers);

 $response = curl_exec($ch);
 curl_close($ch);
//$parsed_xml = simplexml_load_string($response);
//return ($parsed_xml);
return $response; 
```

# email - 限制来自 ip 的邮件

> ID：13836382
> 
> 赞同：2
> 
> 时间：2012-12-12T09:14:34.703
> 
> 标签：email, ip

我想托管一个发送邮件进行验证、忘记密码等的应用程序...从 IP 地址发送的邮件数量是否有限制？？..有什么办法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:49:25.227

这完全取决于您的 ISP 和接收者的 ISP。从技术上讲，当然没有限制。但是您的 ISP 可能认为您在发送垃圾邮件，因此最好通知他事实并非如此。

让接收者的 ISP 相信您没有发送垃圾邮件要困难得多。我在 gmx（一家大型德国 ISP）遇到了问题：他们每 24 小时接收的邮件不超过我发给不存在帐户的某某（可能大约 1000 封）邮件。这听起来很多，但由于我发送的邮件列表很大，所以总是有太多不再存在的电子邮件地址。

据我所知，没有办法让 gmx 相信我发送的不是垃圾邮件，而是时事通讯。我不认为他们有这样的程序。所以，除非你*真的很*重要，否则他们会忽略你。

还有一些开放的阻止列表，比如 spamhaus，可能会以某种方式列出您。它们可能被世界各地的许多 ISP 使用。在这种情况下，您通常可以联系他们并清除您的记录。

# vb.net - 在两个地方进行测试的简单方法？

> ID：13836383
> 
> 赞同：1
> 
> 时间：2012-12-12T09:14:38.813
> 
> 标签：vb.net, unit-testing, dry, helper

**编辑**

我进行了大量研究并得出结论，我可能想为此使用部分模拟。这导致[了一个问题](https://stackoverflow.com/q/13845331/794234)，即在我的方法模拟中使用什么方法。

**问题**

当我在方法中使用辅助类时，我通常需要重新实现很多（如果不是全部）我的辅助类的单元测试。这意味着每次更新功能时，我都需要在*使用该功能的每个地方*更新测试。它们在很大程度上是多余的（只是一些函数名称/模拟不同）。

有什么容易管理的方法吗？

**高度人为的例子**

以这个提供基本实用功能的基类的高度设计示例为例：

```
Public MustInherit Class SomeBase
    Public Property WebConnectionService As IWebConnectionService

    Public Overridable ReadOnly Property PortNumber As Integer
        Get
            Return 2352
        End Get
    End Property

    Public Overridable ReadOnly Property Host As String
        Get
            Return "somesite.com"
        End Get
    End Property

    Protected Sub OpenServiceConnection()
        ServiceConnection = WebConnectionService.OpenConnection(Host, PortNumber)
    End Sub
End Class

<TestFixture()> _
Public Class SomeBaseTest
    Private Class SomeBaseImpl
        Inherits SomeBase

        Public Overrides ReadOnly Property PortNumber As Integer
            Get
                Return 1
            End Get
        End Property

        Public Overrides ReadOnly Property Host As String
            Get
                Return "test.host"
            End Get
        End Property

        Public Sub New(w As IWebConnectionService)
            Me.WebConnectionService = w
        End Sub

        Public Sub Open()
            OpenServiceConnection()
        End Sub
    End Class

    <Test()> _
    Public Sub OpenServiceConnection_Should_Open_Connection_On_Set_Host_And_Port()
        Dim w As IWebConnectionService = MockRepository.GenerateMock(Of IWebConnectionService)()
        Dim s As New ServiceBaseImpl(w)

        s.Open()

        w.AssertWasCalled(Sub(wcs) wcs.OpenConnection(s.Host, s.PortNumber))
    End Sub
End Class 
```

当我实现一个实际的一些基础服务时，我还想验证连接是否打开，可能是这样的：

```
Public Class MyClass
    Inherits SomeBase

    Public Function GetData() As MyDataHolderClass
        OpenServiceConnection()

        '... other processing

        Return data
    End Function
End Class

<TestFixture()> _
Public Class MyClassTest
    <Test()> _
    Public Sub GetData_Should_Connect_To_The_Service()
        Dim w As IWebConnectionService = MockRepository.GenerateMock(Of IWebConnectionService)()
        Dim s As New MyClass(w)

        s.GetData()

        w.AssertWasCalled(Sub(wcs) wcs.OpenConnection(s.Host, s.PortNumber))
    End Sub
End Class 
```

**MS实施的很棒的功能建议**

真的，我希望能够编写一个断言使用了助手的测试（因此助手上的所有通过测试也适用于此），但这违反了“仅测试代码规则的外部接口”（我什至不知道这是否可能）。

```
<Test()> _
Public Sub GetData_Should_Call_OpenConnection_Helper()
   Dim s As New ServiceImpl()

   s.GetData()

   s.AssertCalledOpenConnectionHelper()
End Sub 
```

# python - 构建我的 django 第三方应用程序的最佳方法是什么

> ID：13836384
> 
> 赞同：3
> 
> 时间：2012-12-12T09:14:42.960
> 
> 标签：python, django

我最近一直在使用 django，并试图捕获一些常见的应用程序并将它们构建到第三方包中并将它们作为开源发布在 github 中。

我的问题是，我怎样才能保持做这种事情的最佳实践。假设我想构建一个名为“randomizer”的第三方应用程序

以下是我正在遵循的步骤

1.  启动一个项目 ./manage startproject randomizer_project
2.  创建以下结构

    *   randomizer_project

        *   randomizer_project
            *   设置.py
            *   wsgi.py
        *   共享（用于创建第三方应用程序）
            *   随机化器（**此处为 init git**）
                *   随机化器
                    *   模型.py
                    *   视图.py
                    *   ETC
                *   自述文件.rst
                *   执照
                *   安装程序.py
    *   管理.py

在我的 settings.py 中，我在 python 路径中包含了 shared/randomizer 。我在这里遵循最好的方法吗？我应该继续这样做吗？请告知是否有人一直在遵循某种工作方法，可以更快地构建包并更快地发布它们。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:41:22.413

Django 文档有一篇关于创建可重用应用程序的好文章： [https ://docs.djangoproject.com/en/dev/intro/reusable-apps/](https://docs.djangoproject.com/en/dev/intro/reusable-apps/)

那篇文章中有很多有用的信息和链接，可以帮助您以最合适的方式构建项目/应用程序（例如[这个](http://guide.python-distribute.org/quickstart.html)）

一般来说，我不认为将每个可重用的应用程序都包含在 python 路径中是一个好习惯。IMO 的首选方法是将应用程序添加到 INSTALLED_APPS 设置中，将应用程序的 URLconf 包含到我们的项目 urls.py 并运行 syncdb 命令来创建所需的模型，就像我们现在为大多数现有应用程序所做的那样。

# php - 选择html表单后显示mysql数据

> ID：13836385
> 
> 赞同：0
> 
> 时间：2012-12-12T09:14:47.153
> 
> 标签：php, html, mysql, forms

在不深入细节的情况下，假设我有一个名为 Price 的 mysql 表，其中包含两个数据，即价格 A 和价格 B。

在我的 php 页面上，我默认显示价格 A。我现在想要做的是让访问者选择显示价格 B 而不是价格 A。我该如何实现呢？任何人都可以帮忙吗？

非常感谢

编辑好的更多细节：网站上列出了价格。这个价格是一个数据，是从我的 mysql 表中选择的 - 假设是港币。在同一张表中还有另一个数据，称为 USD。我想提供通过下拉菜单查看美元价格的选项。因此，如果他们选择美元，它将从 mysql 表中检索美元数据并显示它，替换原来的港币，反之亦然，当他们再次选择港币时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:17:52.613

为用户添加选择列表或超链接以更改结果。onchange select 或 onclick 超链接将调用一个更新页面内容的ajax函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:56:51.973

在查询中将列名从 priceA 更改为 priceB。

老的

```
Select priceA as price from pricetable 
```

改成

```
Select priceB as price from pricetable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:33:35.140

你可以尝试这样的事情：

```
Applicable  Rate:
<br>
Price A <span id='rate1'  onclick="applyrate(document.getElementById('AR'),document.getElementById('rate1').innerHTML)" style="cursor:pointer;background-color:red;"><?php echo "250"; ?></span> or Price B <span id='rate2' style="cursor:pointer;background-color:green;" onclick="applyrate(document.getElementById('AR'),document.getElementById('rate2').innerHTML)"><?php echo "300"; ?></span>

<input type='text' name='AR' id='AR' value='250'>

    <script>
        function applyrate(objR,valf)
        {
            objR.value=valf;
        }
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:40:31.937

首先在您的 sql 语句中选择“price A”和“price B”，然后在您的页面中使用 jquery，如下所示：

```
<p id="price_a">$100.00</p>
<p id="price_b" style="display: none;">$95.00</p>
<input id="get_price" type="button" value="Alternative Price" />

$(document).ready(function() {
    $("#get_price").click(function() {
        $("#price_a").hide();
        $("#price_b").show();
    });
});​ 
```

通过这种方式，当用户选择查看其他价格时，您不必重新加载页面或再次从数据库中选择数据。这是一个[演示](http://jsfiddle.net/2acpp/)，看看它是如何工作的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:20:23.903

您可以从 DB 中选择这两个值，然后在 PHP 中决定要显示哪个值，或者您可以在 SQL 中使用 IF，如下所示：

```
SELECT id, IF(:type = 'P', PriceA, PriceB) as Price FROM Prices 
```

类型当然是参数。

# android - 关于android中的按钮点击

> ID：13836386
> 
> 赞同：3
> 
> 时间：2012-12-12T09:14:50.217
> 
> 标签：android

我在 Android 2.3.3 中有一个应用程序。里面有几个按钮。我想要一个类似于 qwerty 键盘的功能（用于按钮），当我们按下一个键或一个字母时，该字符将显示几分之一秒，就在该字符出现的位置上方键盘。

我们有内置的任何此类属性吗？

如果没有这样的东西，我正在为我的按钮使用背景颜色，并且很难记下按钮是否被单击。我们能否以某种方式使其可见该按钮已被单击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:24:19.510

您在可绘制文件夹中寻找类似这样的选择器。要引用它，只需将其称为可绘制对象。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" android:drawable="@drawable/buttonpressed" />
<item android:drawable="@drawable/buttonnotpressed" /> <!-- default -->
</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:21:09.757

well, it seems to me like you should try and create an XML file that describes the button different states instead of what you're currently doing.

if you still want to show the buttons layout as a popup when the button ius pressed, you should create a view and add it when intercepting the `MotionEvent.ACTION_DOWN` and remove it when intercepting the `MotionEvent.ACTION_UP`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:31:58.913

使用以下`xml`UI`button`选择：

`buttonselection.xml`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
<item android:state_focused="false" 
  android:state_selected="false" 
  android:state_pressed="false" 
  android:drawable="@drawable/image you want to display on page load"/> 
<item android:state_focused="false" 
  android:state_selected="true" 
  android:state_pressed="false" 
  android:drawable="@drawable/image you want to display on selection"/> 
<item android:state_focused="true" 
  android:state_selected="false" 
  android:state_pressed="false" 
  android:drawable="@drawable/image you want to display on page load"/> 
<item android:state_focused="true" 
  android:state_selected="true" 
  android:state_pressed="false" 
  android:drawable="@drawable/image you want to display on selection"/> 
<item android:state_pressed="true" 
  android:drawable="@drawable/image you want to display on selection"/> 
</selector> 
```

以下是用于绑定的代码`xml`：

```
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.yourLayout);
   ImageButton btYourLayoutBtn = (ImageButton)findViewById(R.id.yourbuttonid);
  btYourLayoutBtn .setImageResource(R.drawable.buttonselection);
  btYourLayoutBtn .setOnClickListener(this); 
} 
```

# xcode - 如何提高 Xcode 控制台输出的质量

> ID：13836389
> 
> 赞同：6
> 
> 时间：2012-12-12T09:15:05.397
> 
> 标签：xcode

在 Xcode -> Organizer -> My iPhone -> Console 的 iPhone 控制台日志（参见下面的示例）中转储了大量的低级系统调试通知。

这有效地淹没了我自己的开发输出。（我正在使用 3rd 方框架（不是 Xcode）制作应用程序，所以我只使用 Xcode 来查看手机的控制台输出）。

更糟糕的是，iPhone 控制台日志似乎只返回一天或顶部几百行，所以如果我昨天发生崩溃，当我到达办公室时，它肯定会被冗长的系统通知覆盖调试。

我如何 a) 删除系统通知，b) 延长日志的长度，c) 将日志通过管道传输到 bash 终端，以便我可以对其执行“grep”，或任何其他方式来更好地了解我自己调试输出？

（例如，在 Android 上，您可以`adb logcat -s MyApp`只查看来自 MyApp 的消息）

这是淹没 iPhone 日志的那种东西的示例：

```
Dec 12 10:11:02  installd[31] <Error>: 0x2d5000 filter_attributes: Info.plist keys requested via MobileInstallationLookup/Browse in client Xcode (via mobile_installation_proxy) were not found in MobileInstallation's cache. Please file a bug requesting that these keys be added: <CFBasicHash 0x1d59e7a0 [0x3af630f0]>{type = mutable set, count = 18,
    entries =>
        0 : <CFString 0x3af4f9e4 [0x3af630f0]>{contents = "CFBundlePackageType"}
        1 : <CFString 0x1d59e650 [0x3af630f0]>{contents = "BuildMachineOSBuild"}
        2 : <CFString 0x3af50a34 [0x3af630f0]>{contents = "CFBundleResourceSpecification"}
        3 : <CFString 0x1d5713e0 [0x3af630f0]>{contents = "DTPlatformBuild"}
        4 : <CFString 0x3af4d784 [0x3af630f0]>{contents = "DTCompiler"}
        5 : <CFString 0x3af4f554 [0x3af630f0]>{contents = "CFBundleSignature"}
        6 : <CFString 0x3af50214 [0x3af630f0]>{contents = "DTSDKName"}
        7 : <CFString 0x1d580d60 [0x3af630f0]>{contents = "NSBundleResolvedPath"}
        8 : <CFString 0x3af4cea4 [0x3af630f0]>{contents = "UISupportedInterfaceOrientations"}
        10 : <CFString 0x3af54e74 [0x3af630f0]>{contents = "DTXcode"}
        13 : <CFString 0x3af54ea4 [0x3af630f0]>{contents = "CFBundleInfoDictionaryVersion"}
        16 : <CFString 0x3af522f4 [0x3af630f0]>{contents = "CFBundleSupportedPlatforms"}
        17 : <CFString 0x1d590660 [0x3af630f0]>{contents = "DTXcodeBuild"}
        18 : <CFString 0x1d59af70 [0x3af630f0]>{contents = "UIStatusBarTintParameters"}
        19 : <CFString 0x3af50e44 [0x3af630f0]>{contents = "DTPlatformVersion"}
        20 : <CFString 0x3af53be4 [0x3af630f0]>{contents = "DTPlatformName"}
        21 : <CFString 0x3af54c74 [0x3af630f0]>{contents = "CFBundleDevelopmentRegion"}
        22 : <CFString 0x1d599230 [0x3af630f0]>{contents = "DTSDKBuild"}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:28:11.003

非常好的问题！我强烈建议您使用这个很棒的工具：

*   [NSLogger。](https://github.com/fpillet/NSLogger#readme)
*   [NSLogger (Long but Nice) 简介。](https://github.com/fpillet/NSLogger/wiki/Introduction-to-NSLogger)
*   [工具的第三方演示](http://www.alexcurylo.com/blog/2010/12/17/nslogger/)。
*   这是[我为多用户案例编写的提示](http://www.atelierdumobile.com/blog/2011/09/15/using-nslogger-in-a-multi-user-environment/)。

如果你喜欢，请告诉我。:-)

# latitude-longitude - Dundas Dashboard 在地图上输入经度和纬度

> ID：13836391
> 
> 赞同：1
> 
> 时间：2012-12-12T09:15:08.067
> 
> 标签：latitude-longitude, dundas

如何在 Dundas Dashboard 上的地图中插入经度和纬度坐标？我在 SQL 中有一个包含`City`、`Province`、`Longitude`和`latitude`列的表，但是当我将数据集输入到地图中时，它没有让我选择将表用于 x：经度和 y：纬度。这些选项是灰色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:37:18.473

我也与我们的支持团队就这个问题进行了核实。手动添加符号并不总是最有效的添加方式，理想情况下，您应该在数据绑定期间自动生成符号，请参阅这篇文章了解更多信息 goo.gl/OzFau。

您提到经度/纬度选择显示为灰色，当列未被识别为数字时会发生这种情况。请检查列的数据类型，如果是这种情况，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:13:25.877

好的。我已经想出了如何做到这一点。当您将地图拖到工作表中并将数据集放到地图上并按照步骤操作时。然后单击地图，打开右侧的属性栏。在那里您可以选择**符号**。创建新符号并为其命名。**符号选项卡中****工具提示**的正下方是**X（经度）和 Y（纬度）**，您可以在其中插入在地图上精确定位城市所需的值。此外，如果您希望在输入位置的城市地图上**显示名称。**单击地图，使其被选中。然后在右侧的属性菜单中查找标记为**LABELS的下拉菜单**********. 展开标签并将**ENABLE SYMBOL LABELING**设置为**true**。现在所有城市的名称都将显示在地图上。********

 ****完成后，这就是您的地图应该是什么样子

![在此处输入图像描述](../Images/11d92777b782c6baeef24b9038c1db9f.png)****

# apache - Apache 上的视频流控制

> ID：13836398
> 
> 赞同：3
> 
> 时间：2012-12-12T09:16:14.223
> 
> 标签：apache, streaming, html5-video

我已经设置了一个`mod_h264_streaming-2.2.7`安装了模块的 Apache 服务器。客户端可以`.mp4`通过嵌入网页的html5或flash player观看视频。

我打算调节服务器端每个连接的流量。每个用户将被分配不同的流量，由服务器控制。我是一个学习Apache服务器的新手，不知道如何实现这个功能。任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T20:13:02.003

您可以使用[下载限制](http://www.yiiframework.com/forum/index.php/topic/33046-downloading-large-file-with-speed-limit/)，为了获得更好的性能，您可以使用与 Apache 关联的[X-SendFile 。](http://benrowe.info/index.php?r=site/item&type=article&slug=how-to-use-x-sendfile-in-php)所以你也可以混合使用这两种功能。

# python - 比较具有长列表的两个文件以获取共同元素和相邻信息

> ID：13836403
> 
> 赞同：0
> 
> 时间：2012-12-12T09:16:34.743
> 
> 标签：python, compare

我有两个大文件。文件 A 看起来像：

```
SNP_A-1780270 rs987435 7 78599583 - C G
SNP_A-1780271 rs345783 15 33395779 - C G
SNP_A-1780272 rs955894 1 189807684 - G T
SNP_A-1780274 rs6088791 20 33907909 - A G
SNP_A-1780277 rs11180435 12 75664046 + C T
SNP_A-1780278 rs17571465 1 218890658 - A T
SNP_A-1780283 rs17011450 4 127630276 - C T 
```

...并且有 950,000 行。

文件 B 看起来像：

```
SNP_A-1780274
SNP_A-1780277
SNP_A-1780278
SNP_A-1780283
SNP_A-1780285
SNP_A-1780286
SNP_A-1780287 
```

...并且有 900,000 行。

我需要从第 1 列的文件 A 中找到文件 B 的公共元素，并获得如下输出文件：

```
SNP_A-1780274 rs6088791 20 33907909 - A G
SNP_A-1780277 rs11180435 12 75664046 + C T
SNP_A-1780278 rs17571465 1 218890658 - A T
SNP_A-1780283 rs17011450 4 127630276 - C T 
```

如何在 Python 中以最有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:28:04.363

我认为 dict 是理想的：

```
>>> sa = """SNP_A-1780270 rs987435 7 78599583 - C G
SNP_A-1780271 rs345783 15 33395779 - C G
SNP_A-1780272 rs955894 1 189807684 - G T
SNP_A-1780274 rs6088791 20 33907909 - A G
SNP_A-1780277 rs11180435 12 75664046 + C T
SNP_A-1780278 rs17571465 1 218890658 - A T
SNP_A-1780283 rs17011450 4 127630276 - C T"""
>>> dict_lines = {}
>>> for line in sa.split('\n'):
    dict_lines[line.split()[0]] = line

>>> sb = """SNP_A-1780274
SNP_A-1780277
SNP_A-1780278
SNP_A-1780283
SNP_A-1780285
SNP_A-1780286
SNP_A-1780287"""
>>> for val in sb.split('\n'):
    line = dict_lines.get(val, None)
    if line:
        print line

SNP_A-1780274 rs6088791 20 33907909 - A G
SNP_A-1780277 rs11180435 12 75664046 + C T
SNP_A-1780278 rs17571465 1 218890658 - A T
SNP_A-1780283 rs17011450 4 127630276 - C T 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:36:27.317

如果文件 A 的行与“关键”列 1 相比较长，您可以尝试以下方法：

```
positions = {}
with open('fileA.txt') as fA:
    pos = 0
    for lineA in fA:
        uid = lineA.split(' ')[0] #gets SNP_A-1780270
        positions[uid] = pos
        pos += len(lineA)
with open('fileB.txt') as fB, open('fileA.txt') as fA, open('fileC.txt', 'w') as out:
    for lineB in fB:
        pos = positions[lineB.strip()]
        fA.seek(pos)
        lineA = fA.readline()
        out.write('%s\n', lineA) 
```

您应该检查 是否`pos += ...`更可靠 或`file.tell()`。我认为，因为涉及缓冲素。`file.tell()`不起作用，但也可能是`pos += ...`需要重新调整。

这需要更少的内存作为 dict 版本，但由于文件 A 的处理可能会更慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:05:43.800

如果您可以`join filea fileb > filec`从您的 Python 代码中调用，它将为您提供所需的内容。

# jquery - 我一直在尝试在 jQuery 中创建一个简单的点击式游戏

> ID：13836404
> 
> 赞同：1
> 
> 时间：2012-12-12T09:16:46.523
> 
> 标签：jquery

我是 jQuery 的新手，并决定要创建某种游戏。

游戏本身非常非常简单。

**基本上，您会看到一张图片。和7个选择。如果您的选择与图片匹配，您将获得一分并显示下一张图片。**

另外：只要您点击答案，无论您是对还是错，都会在图片旁边弹出两张图片并为​​您“破坏”答案。如果你是对的 - 它会显示一条消息说你是对的。如果你错了 - 应该有一个消息。

这是我遇到几个问题的地方。

我可以运行这个 if 语句：

```
if($("div").hasClass('sadness') && $("img").hasClass('sadness')) 
```

但我无法运行：

```
if(!$("div").hasClass('sadness') && $("img").hasClass('sadness')) 
```

**显示比告诉容易。**

注意：我的东西并没有很好地对齐@jsFiddle，但重要的是 jQuery 代码。

[http://jsfiddle.net/WEAt6/](http://jsfiddle.net/WEAt6/)

如果你们花时间查看我的代码，我将不胜感激，我被困住了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:46:16.283

看着你的小提琴，我想我可以看到问题：你不想选择对象`$("div")`：这将返回页面中的所有 div。这可以解释为什么你总是`$("div").hasClass('sadness')`返回 true：你总是选择你的“快乐”的 div。尝试`$(this)`在您的函数中使用选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:45:46.243

有点忙，所以我没有深入了解，但是你把它分解了吗？

当你把它分成两个if时，结果是什么？

```
if(!$("div").hasClass('sadness')){
    if($("img").hasClass('sadness')){ 
```

另外：如果您的图像包含在您的 div 中（假设），它是否继承了类状态？如果是这样，没有“悲伤”的 div 会使图像没有“悲伤”，反之亦然。

# jquery - 自动刷新图片库？

> ID：13836406
> 
> 赞同：0
> 
> 时间：2012-12-12T09:16:50.783
> 
> 标签：jquery, django, photologue

我正在考虑为我的画廊使用 django-photologue，但我希望它能够自动显示新上传的图像，例如顶部。photologue 可以做到这一点，还是我应该使用其他画廊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:50:31.477

正如 Hedde在评论中[指出](https://stackoverflow.com/questions/13836406/auto-refresh-image-gallery#comment19043678_13836406)的那样，您应该能够覆盖 django-photologue 在其文档中[提到](http://django-photologue.readthedocs.org/en/latest/essentials/installation.html#instant-photo-gallery "即时照片库")的模板，并使用对服务器的 ajax 请求来确定是否有新图像可用。

当然，django-photologue 对于这个功能来说不是必需的，但它至少应该让你开始。

# jquery - Internet Explorer 中的 jquery 选择框错误

> ID：13836407
> 
> 赞同：4
> 
> 时间：2012-12-12T09:16:52.467
> 
> 标签：jquery, internet-explorer

我正在使用 jquery 1.2.6（无法升级，因为它是系统的一部分）。我收到一个奇怪的错误。

这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    </head>
    <body>
        <select id="state" name="state">
            <option selected="selected"></option>
                        <option value="none">N/A</option>
                        <option value="AK">AK</option>
                        <option value="AL">AL</option>
                        <option value="AR">AR</option>
                        <option value="AZ">AZ</option>
                        <option value="CA">CA</option>
        </select>
    </body>
</html>
<script type="text/javascript">
    $(function() {
        var test = $('#state').val();
    });
</script> 
```

当我在 IE9 中测试时，加载页面时出现此错误：

```
"Unable to get value of the property 'specified': object is null or undefined" 
```

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:22:36.940

[The value in an option is optional](http://www.w3.org/wiki/HTML/Elements/option) (*"If there isn't, the value of an option element is the textContent of the element."*). So you seem to encounter a bug here.

I had a look at [the old jQuery source code](http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js) and I found the bug :

```
value = jQuery.browser.msie && !option.attributes.value.specified ? option.text : option.value; 
```

`option.attributes.value` is undefined so `option.attributes.value.specified` crashes.

As the bug is in jQuery (more precisely in what looks like an attempt to work around an old IE bug now fixed), it would be legitimate to not use jQuery on this particular task.

Instead of changing the HTML (your HTML is fine), I recommend to use, as a workaround, the vanilla JS solution :

```
var test = document.getElementById('state').value; 
```

Note that when I say that the bug is in jQuery, it mainly means the 2008 version of jQuery fails in recent versions of IE while trying to work around bugs of 2008 browsers. You should really tell your architect that keeping this old jQuery isn't a sound decision.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:18:49.580

您选择的选项没有设置值，这就是它抱怨的原因:)

# geohashing - geohash和最大距离

> ID：13836416
> 
> 赞同：5
> 
> 时间：2012-12-12T09:17:22.453
> 
> 标签：geohashing

两个geohash前6个字符匹配，两个geohash之间的距离最大0.61km 两个geohash前5个字符匹配，两个geohash之间的距离最大2.5km

问：给定 5 位长度的 geohash 的任何一对边界框之间的最大距离（大约）是多少

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-26T15:55:22.590

两个相邻地理散列之间的距离取决于中心点的纬度和经度。为了获得边界框的准确距离，您需要获取相邻框，计算它们的中心纬度/经度并获得距离。

例如，对于 dqcjqcperh9tdqcj 中每个 geohash 的获取距离，您将获得以下相邻框的距离。请记住，随着中心 geohash 的变化，这些数字会略有变化。

```
Precision, Distance of Adjacent Cell in Meters
1, 5003530
2, 625441
3, 123264
4, 19545
5, 3803
6, 610
7, 118
8, 19
9, 3.71
10, 0.6 
```

我会计算每个边界框的中心点并使用此处列出的公式之一计算距离[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

这是一个很好的 javascript 库，可以计算相邻的 geohashes 并提供用于计算的纬度/经度。[https://github.com/davetroy/geohash-js](https://github.com/davetroy/geohash-js)

# android - 在 Green-DAO 中处理双向 1:m 的正确方法

> ID：13836417
> 
> 赞同：5
> 
> 时间：2012-12-12T09:17:23.730
> 
> 标签：android, android-sqlite, greendao

在处理双向 1:m 关系时，将新对象插入 Green-DAO DB 的正确方法是什么？

可以说，我有一个聊天应用程序，它有一个对话实体和一个消息实体。每个对话都有一个消息列表，每个消息都有一个父对话。

我现在做的是：

```
Conversation conv = new Conversation();
ConversationDao.insert(conv);
List<Message> list = conv.getMessageList();

Message msg = new Message();
MessageDao.insert(msg);

msg.setParent(conv.getId());
list.add(msg);
// SHOULD I UPDATE THE CONVERSATION IN THE DB??? 
```

在我看来，我没有正确执行此操作，我很想获得一些指导广告以正确地执行此操作。

提前致谢...

***编辑：***
从我的评论中可以看出，在尝试按照我在这里编写的方式实现代码之后，我得到了一个`null`而不是我试图链接的对话。
我稍微改变了我的代码，现在它看起来像这样：

```
private static void linkMessageToAuthorAndParent(Message messageObj, Thread parent) {
    List<Message> threadsMessages = parent.getMessageList();
    messageObj.setThread(parent);

    messageDao.insert(messageObj);

    threadsMessages.add(messageObj);
    Log.d("DtabaseHelper.parseMessage", "message was inserted");
} 
```

但同样，我的问题是我不确定连接现在是双向的。
我现在应该更新threadsDao吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:02:06.873

试试这种方式：

```
Conversation conv = new Conversation();
ConversationDao.insert(conv);
List<Message> list = conv.getMessageList();

Message msg = new Message();
msg.setParent(conv.getId()); // Set FK *before* inserting
MessageDao.insert(msg);

list.add(msg); 
```

在[关于关系的官方文档中](http://greendao-orm.com/documentation/relations/)有一个“解决和更新多对关系”部分提供了一些背景信息。

# javascript - 脚本将 3 个逗号添加到“.html”方法中

> ID：13836418
> 
> 赞同：2
> 
> 时间：2012-12-12T09:17:34.177
> 
> 标签：javascript, jquery

在我的文字游戏中，有一个评分系统，它会添加每个拼写正确的单词。

我首先在“newGame”函数中将它设置为“0”，如下所示

```
$('.score').html("0/" + completionNumber); 
```

完成数是完成的数量，所以它应该显示“0/0”，当我在浏览器上本地运行时它会显示。但是由于某种原因，当我在服务器上运行它时它显示“0/,,,0”，我不知道为什么。

当拼写正确的单词时，我用这一行添加新分数

```
$('.score').html(score.right + "/" + completionNumber).show(); 
```

并像这样在“resetGame”函数中重置分数

```
$('.score').html(""); 
```

谁能帮助我或告诉我这是否曾经发生在他们身上？

编辑**

这是小提琴中的脚本文件... [http://jsfiddle.net/smilburn/Z2JtD/](http://jsfiddle.net/smilburn/Z2JtD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:37:11.873

我快速检查了您的脚本，发现`completionNumber = [];` 该数组是全局的，并且在整个脚本中被访问和设置了多次。发生了什么，在某些时候，你的数组看起来像

```
[undefined, undefined, undefined, 0] 
```

因此，当它打印时，它显示为

```
0/,,,0 
```

我会考虑重新构建应用程序以仅在正确验证后设置这些全局变量。

# visual-c++ - 更改静态库中的 MFC 可执行文件并创建包装器可执行文件......可能吗？

> ID：13836419
> 
> 赞同：1
> 
> 时间：2012-12-12T09:17:33.957
> 
> 标签：visual-c++, static-libraries, wrapper

这可能吗 ？如果......实现这一目标的兴趣点是什么？

**上下文**：我们想将单元测试引入我们的大多数应用程序。经过一些研究，最简单的方法应该是从我们现有的可执行文件中获取一个静态库。所以在项目属性中，我将配置类型更改为“静态库”。此外，我创建了一个使用此静态库的新项目，以再次创建可执行文件。

但我无法让它工作（入口点问题）。所以目前我想知道这是否可能，以及是否有某种“方法”来为我的库制作可执行包装器。

亲切的问候凯文

# android - 如何从 TextView 中删除

> ID：13836421
> 
> 赞同：4
> 
> 时间：2012-12-12T09:17:51.223
> 
> 标签：android

我需要替换`&nbps`. `TextView`我可以简单地使用`String.replace()`，但可能有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:23:55.517

尝试使用 Pattern.compile：

```
Pattern p = Pattern.compile("&nbps");
String tempstr = "I love &nbps  &nbps.";

Matcher matcher = p.matcher(tempstr);
String tmp = matcher.replaceAll("Android"); 
```

你可以看到这篇关于 String.replace 和 matcher.replace 性能的帖子

[String replaceAll() 与 Matcher replaceAll()（性能差异）](https://stackoverflow.com/questions/1466959/string-replaceall-vs-matcher-replaceall-performance-differences)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-26T13:32:26.050

尝试使用此功能：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            mDescription.setText(Html.fromHtml("Your Text", Html.FROM_HTML_MODE_LEGACY));
        } else {
            mDescription.setText(Html.fromHtml("Your Text"));
        } 
```

# php - session_start 之后的 Session::instance() - Kohana (v.3.2)

> ID：13836423
> 
> 赞同：2
> 
> 时间：2012-12-12T09:17:54.313
> 
> 标签：php, session, exception, kohana

我正在使用 Kohana 的 Session 类没有问题，但现在我面临一个特殊情况。在我的脚本中，我必须加载一个供应商类，它在某处调用`session_start`.

稍后在代码中我需要调用 Session::instance()，这会导致`Error reading session data.`异常。

我无法修改供应商代码（具体来说，它是 facebook php sdk，我不想修改它），我必须`Session::instance()`稍后再打电话。

如何解决这种情况？

你要知道，一个简单的

```
<?php
session_start();
Session::instance();
?> 
```

将产生相同的异常。我认为这是 Kohana 3.2 中的一个错误，但我需要以某种方式欺骗它。

要了解有关该`Session`课程的更多信息，请查看：http: [//kohanaframework.org/3.2/guide/api/Session](http://kohanaframework.org/3.2/guide/api/Session)

顺便说一句，我正在使用默认的本机会话类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:35:13.987

正如 Alex Mihai 所指出的，我们可以使用 Session::instance() 中的 session id 参数来重新启动它。

您得到的例外是会话仍在运行，您无法恢复正在运行的会话。所以你必须先关闭它。

试试这个：

```
// Start session
session_start();    

// Store session id and close the session
$sessionId = session_id();
session_write_close();

// Then we can restore the session by using the session id 
// and the Session class from Kohana
Session::Instance(Session::$default, $sessionId); 
```

它也可能不是最优雅的解决方案，但这对我有用，我希望它会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:42:35.520

Kahana 文档提到 Session::instance()：

> 某些会话类型（本机、数据库）还支持通过将会话 ID 作为第二个参数传递来重新启动会话。

也许您可以尝试将激情 session_id() 到 Session::instance() 作为第二个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:53:09.877

这是我开始使用的解决方案，但我现在不接受这个分析器，因为也许更好的解决方案会来自其他人。

因此，为避免此类异常，在不修改`Session`类的源代码的情况下，我必须确保会话始终与`Session`类一起启动。在我的情况下，我只是调用`Session::instance()`, 在`require`供应商类之前。也许不是最优雅的，但它确实有效。如果您有更好的想法，解决方案（我希望如此）我全神贯注:)

# iphone - 通用应用程序的设备特定方向

> ID：13836425
> 
> 赞同：1
> 
> 时间：2012-12-12T09:17:58.603
> 
> 标签：iphone, ios, ipad, uiinterfaceorientation

我有一个通用应用程序。我希望我的应用程序可以在 iPhone 的两种方向模式下工作，但仅适用于 iPad 的纵向模式，

如何才能做到这一点？

`setOrientationtion`在 iOS5 中没有响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:29:11.237

1.  转到目标窗口。
2.  单击摘要选项卡。
3.  iPhone/iPad 部署信息 -> 根据您的要求为 iPhone 和 iPad 设置支持的界面方向。无需执行任何代码即可解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:43:00.263

这将帮助您：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
  // The device is an iPad running iPhone 3.2 or later.
  // Rotate to landscape
}
else {
  // The device is an iPhone or iPod touch.
  // Rotate to portrait
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T10:30:27.160

您可以在 Xcode 的项目设置编辑器中为每个设备设置方向。

![Xcode 项目设置](../Images/8674884207d589b2fce7e76f374fff04.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:21:22.297

Try the shouldAutorotateToInterfaceOrientation: method for ios5 and before.

# google-cloud-datastore - 如何在数据存储中保存大查询作业对象

> ID：13836428
> 
> 赞同：1
> 
> 时间：2012-12-12T09:18:06.760
> 
> 标签：google-cloud-datastore, google-bigquery

我有一些失败的大型查询作业，我正在尝试开发一种重试机制，在该机制中我将保存数据存储中所有失败的作业，然后重新尝试运行它们。所以，我有自己的对象“JobFailed”，它有一些属性，“Job”就是其中之一。“工作”不能序列化，不能序列化或嵌入到数据存储实体中（或者至少我不能这样做..）
所以我有什么选择？我必须制作自己的对象以保存在数据存储中并在将其拉出以构建作业对象时对其进行解析吗？我可以将工作继承到自己的工作中并在其上放置实体注释并将其保存为连接到我的 JobFailed 实体的独立实体吗？那行得通吗？

另一种可能性是仅在 dataStore 中保存 JobId 并在我需要时使用 BigQuery Api 中的“get”方法获取作业。（但我更喜欢将其保存到数据存储区..）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:05:43.857

我可能误解了这个问题，但你不能从 API 响应中提取状态和错误消息吗？

```
project_number = 'XXXXXXXX'
job_id = 'job_600b919ee97a4eXXXXXXXX'

bigquery_service = build('bigquery', 'v2', http=http)
jobs = bigquery_service.jobs()

job = jobs.get(projectId=project_number,
               jobId=job_id).execute()

# Result
job_state = job['state']
job_error = job['errorResult']['reason'] if job.get('errorResult') else '' 
```

然后将此信息存储在 Datastore 模型中，例如：

```
class BigQueryJob(db.Model):
  job_id = db.StringProperty(required=True)
  status = db.StringProperty(required=True)
  error = db.StringProperty() 
```

# android - 如何在android中更新一个小部件的单个实例

> ID：13836430
> 
> 赞同：1
> 
> 时间：2012-12-12T09:18:24.450
> 
> 标签：android, android-widget

我想从活动更新小部件的单个实例（不是所有小部件）。如果我单击我的小部件，我将转到一个活动。从那里我可以设置小部件的属性（例如：背景颜色）。我想要的是，我需要更新我单击的小部件的属性。不适用于所有小部件。功能如下图：

```
public void set(View view)
{
    final Context context = ColorPick.this;
     RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.widget_layout);
     views.setTextColor(R.id.ap, Color.rgb(r, g, b));
     ComponentName thiswidget = new ComponentName(context,TimeWidgetProvider.class);
    AppWidgetManager manager = AppWidgetManager.getInstance(context);
     manager.updateAppWidget(thiswidget, views);
} 
```

# ios - 如何在我的 iOs 应用程序中显示 AppStore 的描述页面？

> ID：13836434
> 
> 赞同：1
> 
> 时间：2012-12-12T09:18:36.297
> 
> 标签：ios, facebook, mobile, app-store

我想从我的应用程序（如果可能的话，iOS 或移动网站）中显示 AppStore 描述页面，而不像 facebook 那样打开 AppStore 应用程序。有关示例，请参见下图：

![当我们在 facebook 应用程序中打开的 AppStore 描述页面下方单击时](../Images/4b338bbd6e1e266c516d235b4dcb3a54.png)

==> 结果

![AppStore Insite Facebook 应用程序](../Images/398df4af3ac4e9b5d8731dfc12c8d7ab.png)

感谢你们对我的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:27:47.323

这是 iOS 6 中可用的功能。您应该查看StoreKit 框架中可用的[SKStoreProductViewController类。](https://developer.apple.com/library/prerelease/ios/documentation/StoreKit/Reference/SKITunesProductViewController_Ref/index.html)

根据文档，为了在您的应用程序中显示应用程序商店链接，您将需要一个 iTunes 产品标识符。如需进一步参考，请参阅上述文档。

# sharepoint - 我们如何以编程方式在 SharePoint 2010 中创建筛选的查找字段

> ID：13836436
> 
> 赞同：2
> 
> 时间：2012-12-12T09:18:37.940
> 
> 标签：sharepoint

我需要以编程方式创建一个查找列来过滤一些值。在开箱即用的 SharePoint 2010 中，它将显示查找列表中的所有值。我知道已经实施了第三方工具来支持这一点。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:43:36.873

尝试[FilteredLookup](http://sp2010filteredlookup.codeplex.com/)。它是自定义字段类型，可以通过编程方式创建。它基本上是一个组合框，因此它不能很好地处理很多项目（> 1000）。

# php - 如何使用 DOMDocument 递归获取每对标签之间的所有单独文本段

> ID：13836439
> 
> 赞同：1
> 
> 时间：2012-12-12T09:18:54.247
> 
> 标签：php

我这样做：

```
$dom = new DOMDocument;
$dom->loadHTMLFile("test.html");
//$books = $dom->getElementsByTagName('body');

$i = 0;
while (is_object($finance = $dom->getElementsByTagName("body")->item($i))) {
    foreach ($finance->childNodes as $nodename) {
        if ($nodename->childNodes) {
            foreach ($nodename->childNodes as $subNodes) {
                if ($subNodes->childNodes) {
                    foreach ($subNodes->childNodes as $potha){
                        echo $potha->nodeName . " - " . $potha->nodeValue . "<br>";
                    }
                } else {
                    echo $subNodes->nodeName . " - " . $subNodes->nodeValue . "<br>";
                }
            }
        } else {
            echo $nodename->nodeName . " - " . $nodename->nodeValue . "<br>";
        }
    }
    $i++;
} 
```

但是我怎样才能让它**递归**，所以每次有 subChild 时，它应该循环遍历每个孩子，子孩子和子孩子等等....否则回显节点的名称和值。

另外，我如何获得**每个节点相对于 body 或 html 的位置，**因此每个段之间存在差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:32:03.207

像这样的东西应该适合你：

```
function treatNode($node)
{
    if ($node->hasChildNodes()) {
        foreach ($node->childNodes as $child){
            treatNode($child);
        }
    } else {
        echo $node->nodeName . " - " . $node->nodeValue . "<br>";
    }
}

$dom = new DOMDocument;
$dom->loadHTMLFile("test.html");
//$books = $dom->getElementsByTagName('body');

$i = 0;
while (is_object($finance = $dom->getElementsByTagName("body")->item($i))) {
    treatNode($finance);
    $i++;
} 
```

# iphone - 如何以透明度呈现当前视图的视图

> ID：13836443
> 
> 赞同：1
> 
> 时间：2012-12-12T09:19:16.983
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

我有一个`UIViewController`（进一步的'UIVC'）有很多代码，我需要在它上面展示另一个视图（得分表），它本身也有一堆代码和它的视图使用 IB 设计，所以它也有自己的 IB 连接. 所以我决定把它分成两个`UIViewControllers`，这很明显。一切正常，但我仍然需要呈现我的分数表，而不是像另一个`UIViewController`那样，而是像往常一样`UIView`使其半透明，以便用户可以`UIVC`通过分数表视图看到主要发生的事情（由于其透明度）。此外，我需要让 main 中的代码`UIVC`仍然运行。
很好的例子是 Counter Strike 游戏（以及许多其他游戏），当您在游戏中按 TAB 键时，您可以看到得分表，但它不支持游戏，您可以看到游戏中发生的事情。
我在想我可以使用`presentModalViewController`（比如游戏中心）来实现它，但我不能让它透明，所以我看不到`UIVC`背景。就像我说的分数表有自己的代码和许多 IBOutlets 一样，我想将它与主`UIVC`代码分开。
那么如何实现我的需求呢？（分离出分数表的代码，使其透明，不要中断执行主`UIVC's`代码）。我的应用程序不是可可，它只是普通的应用程序
我所做的尝试：试图使分数表的`UIView`背景为`[UIColor clearColor]`同时将其呈现为modalVC。没运气。此外，我试图取消选中`UIView's`opaque 属性 - 不走运。试图将`UIView's`alpha 设置为 0.5 - 仍然没有运气。还试图让 self.navigationController.view.hidden=YES，没有运气。看不到主要的 UIVC“图片”。此外，我尝试在分数表中将所有子视图 alpha 设置为 0.2，但它仍然显示白色非透明屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:30:10.090

看看这是否有效，它显示透明视图控制器但概念相同。[这里](https://gist.github.com/1301978)

但是我不完全确定您的第一个视图控制器是否会保持可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:47:56.750

我发现的最佳选择是通过扩展 UIView（不是 UIViewController）并在 IB 中设计其视图来创建自定义类。然后我在 IB 中将 FileOwner 设置为我的类名，设置所有 IB 连接，编写（实际上是复制粘贴 :)）显示分数所需的方法。
棘手的部分是使用 initWithCoder/awakefromNib 方法，尤其是 initWithCoder，我需要在其中加载我的 nib，主要是通过先前设置的 IB 连接添加其视图。这不仅是所有需要的子视图都必须是 IB 连接的，而且（父/根）视图本身也是如此。

```
 - (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder]))
    {
        [[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:self options:nil];

        [self addSubview:vwTopLevelView]; //vwTopLevelView is the IB link to parent view
// without adding vwTopLevelView it always loads empty view so you just wont c it
// but all IB links will be valid, image view will have their images loaded etc
    }
    return self;
} 
```

然后我只是将新的分数表视图添加到主 UIVC，检查其属性为隐藏并将类从 UIView 设置为我的类。现在分数表与主 UIVC 一起加载，但它是隐藏的，我只需要调用 1 个方法来填充数据，然后将其设置为 hidden=NO 并且瞧……而且 view.background 是 clearColor 所以我得到了透明度.
这样，我将分数表的代码和 IB 出口分离到另一个类（UIView ext），它的视图足够透明，因为它不是 UIViewController，所以我的主 UIVC 的代码不成立。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:38:07.710

即使你用半透明的方式呈现第二个视图控制器，你也看不到第二个视图控制器之外的第一个视图控制器。呈现的模型视图控制器在 IOS 中应该是不透明的。

我有一个带有透明背景边距的小表格视图的情况。我最终创建了一个包含表格视图的 UIView 类。我在这个 UIview 中编写了两个方法，即

```
-(void)presentTransparentViewin(UIView*)view;

-(void)removeViewwithAnimation; 
```

在 Uiview 中实现 UITableview 的委托方法听起来像是一个糟糕的编程实践，效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:51:37.490

只是为了满足您的要求，只需 setAlphs 的视图，如下所示`viewDidLoad:`

```
[self.view setAlpha:0.5];// set alpha with your requirement 
```

当你想显示视图时，从你的 UIVC 视图中调用这个方法

如果您粘贴此波纹管方法并使用对象`AppDelegate`调用，这很好`AppDelegate`

在下面创建`yourViewController`类似下面的对象`AppDelegate.h`..

```
yourViewController *yourViewController; 
```

并在下面的方法中使用..

```
-(void)addMakeOfferView{

   yourViewController=[[yourViewController alloc]initWithNibName:@"yourViewController" bundle:nil];
    objMakeOfferView.view.transform = CGAffineTransformMakeScale(1.3, 1.3);
    objMakeOfferView.view.alpha = 0;
    [UIView animateWithDuration:.35 animations:^{
        objMakeOfferView.view.alpha = 0.94;
        objMakeOfferView.view.transform = CGAffineTransformMakeScale(1, 1);
    }];
    objMakeOfferView.view.frame=CGRectMake(0, 0, 320, 480);
    [self.window addSubview:objMakeOfferView.view];
} 
```

并像下面这样从你的`UIVC`班级打电话..

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate addMakeOfferView]; 
```

# java - 使用 Spring 保护 REST url

> ID：13836451
> 
> 赞同：0
> 
> 时间：2012-12-12T09:19:58.443
> 
> 标签：java, spring, security, spring-security

我有一个可用的 Spring REST Web 服务，并希望向它添加基本身份验证。控制器方法附有普通的 url 和 HTTP 方法注释。为了增加安全性，我做了两件事

1) 将 spring-security.xml 添加到 WEB-INF 文件夹，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:security="http://www.springframework.org/schema/security"
        xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/security 
            http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http auto-config="true">
            <security:http-basic />
            <security:intercept-url pattern="/*" access="ROLE_USER" />
    </security:http>

    <security:authentication-manager>
      <security:authentication-provider>
        <security:user-service>
        <security:user name="spring" password="spring" authorities="ROLE_USER" />
        </security:user-service>
      </security:authentication-provider>
    </security:authentication-manager>

</beans> 
```

2）在web.xml中配置spring security为：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

3）弹簧控制器：

```
package com.sample.main;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.sample.employee.Employee;

@Controller
public class EmpController 
{
    List<Employee> list = new ArrayList<Employee>();  

    @RequestMapping(value = "/getEmp/{emp}", method = RequestMethod.GET)
    public @ResponseBody Employee getEmployee(@PathVariable("emp") int empid) {
        System.out.println("meet getEmp");
        for (Iterator<Employee> iterator = list.iterator(); iterator.hasNext();) {
            Employee emp = (Employee) iterator.next();
            if(emp.getEmpId()==empid) {
                return emp;
            }
        }
        return new Employee();
    }
} 
```

4) applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!-- Activates various annotations to be detected in bean classes -->
    <context:annotation-config />

    <!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.
     For example @Controller and @Service. Make sure to set the correct base-package-->
    <context:component-scan base-package="com.sample" />

    <!-- Configures the annotation-driven Spring MVC Controller programming model.
    Note that, with Spring 3.0, this tag works in Servlet MVC only!  -->
    <mvc:annotation-driven />

</beans> 
```

5) spring-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
                http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

</beans> 
```

我已将完整的应用程序上传到： [http ://www.javaexperience.com/wp-content/uploads/2012/12/SpringWebServiceSecurity.zip](http://www.javaexperience.com/wp-content/uploads/2012/12/SpringWebServiceSecurity.zip)

配置 springSecurityFilterChain 后，我开始在应用程序中收到 REST url 的 404 错误页面。有任何想法吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:02:51.410

尝试更改`url-mapping`调度程序 servlet 以处理所有请求。

**Web.xml**

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

同样在您的安全配置中更改安全过滤器`intercept-url-pattern`以处理所有请求。这可以在工作后进行调整。

**弹簧安全.xml**

```
<security:http auto-config="true">
        <security:http-basic />
        <security:intercept-url pattern="/**" access="ROLE_USER" />
</security:http> 
```

# knockout.js - 多个淘汰视图模型

> ID：13836454
> 
> 赞同：0
> 
> 时间：2012-12-12T09:20:08.417
> 
> 标签：knockout.js

我正在尝试将多个 ViewModel 绑定到一个视图。现在，在这项工作之后，我遇到了一个功能问题。不知何故，我必须单击一个函数两次才能到达另一个 ViewModel

```
 <div data-bind= "visible: showStartStamp">
    <input type="button" value="START" name="StartStamp"  data-bind="click: startTimestamp"/>
  </div>
  <div data-bind= "visible: showStopStamp">
    <input type="button" value="STOP" name="StopStamp"  data-bind="click: stopTimestamp"/>
  </div> 
```

淘汰赛功能看起来像这样

```
this.showStart = function () {
    masterViewModel.projectStartVM(new ProjectStartVM());
    masterViewModel.detailsVM(null);
}; 
```

另一件事是，ProjectStartVM 中的 Knokockout-Binding 无法正常工作！

这是一个 js 小提琴 [http://jsfiddle.net/4A87x/10/](http://jsfiddle.net/4A87x/10/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:32:31.867

`startTimestamp`您的代码工作异常没有`stopTimestamp`定义在`ProjectStartVM`. 我也修复了几个小问题，这里是工作小提琴：http: [//jsfiddle.net/4A87x/11/](http://jsfiddle.net/4A87x/11/)

# php - 如何在 Shift_JIS 字符集中创建 CSV 文档？

> ID：13836460
> 
> 赞同：2
> 
> 时间：2012-12-12T09:20:22.013
> 
> 标签：php, csv, character-encoding, shift-jis

我可以通过添加 BOM 手动强制将 CSV 文件检测为 UTF-8，如下所示：

```
file_put_contents($filename, "\xEF\xBB\xBF" . $csv); 
```

我可以做类似的事情来强制将 CSV 文件检测为 Shift_JIS 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:30:34.370

Shift JIS 没有类似 BOM 的等效“内容类型标记”。如果您输出以 Shift JIS 编码的 CSV，则读取该文件的人必须知道它在 Shift JIS 中，否则会检测到编码。

要创建 Shift JIS 编码文件，只需确保您的`$csv`数据是 Shift JIS 编码的。如有必要，使用`iconv`或转换。`mb_convert_encoding`

# php - How to compare two arrays key value pairs using php?

> ID：13836469
> 
> 赞同：-5
> 
> 时间：2012-12-12T09:20:58.927
> 
> 标签：php, arrays

I have two arrays. i want to compare two array collection.

A Array Collection

```
Array
(
    [0] => Array
        (
           [id] => 334
        )
) 
Array
(
    [1] => Array
        (
           [id] => 338
        )
)
Array
(
    [2] => Array
        (
           [id] => 343
        )
)
Array
(
    [3] => Array
        (
           [item_id] => 376
        )
) 
```

B Array Collection:

```
Array
(
    [0] => Array
        (
           [id] => 343
        )
) 
Array
(
    [1] => Array
        (
           [id] => 334
        )
) 
```

Output:

```
Exists
Not
Exists
Not 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:23:26.923

为此使用 array_diff () 和 array_intersect()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:25:03.067

在第一个数组成员之间迭代并使用[in_array()](http://php.net/manual/en/function.in-array.php)函数检查每个成员与第二个数组。

```
$FirstArray = array(1, 2, 3, 4, 5);
$SecondArray = array(1, 3);

for($i = 0; $i < count($FirstArray); $i++){
    if(in_array($FirstArray[i], $SecondArray)){
        echo "Exists" . PHP_EOL;
    }
    else {
        echo "Doesn't Exists!" . PHP_EOL;
    }
} 
```

它应该输出

```
Exists
Doesn't Exists!
Exists
Doesn't Exists!
Doesn't Exists! 
```

# android - How to disable screen timeout on NativeActivity

> ID：13836470
> 
> 赞同：5
> 
> 时间：2012-12-12T09:21:00.453
> 
> 标签：android

I am developing app on NativeActivity(only C/C++).
I want to disable screen timeout.

Do you know how to do it?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T10:23:36.903

如果 OP 仍在寻找答案，或者像我这样在搜索时发现此主题的人，您可以这样做：

```
#include <android/window.h>

[...]

// place this in your init function once you have a valid window
ANativeActivity_setWindowFlags(pYourAppStruct->activity, AWINDOW_FLAG_KEEP_SCREEN_ON, 0); 
```

# git - 一个分支变成了一个产品，现在呢？新的回购？

> ID：13836474
> 
> 赞同：0
> 
> 时间：2012-12-12T09:21:08.773
> 
> 标签：git

我有一个 repo，并开始（像往常一样）在一个分支上进行实验以创建一个特性。这个分支在这样的水平上取得了成功，它不再是一个特性，而是它自己成为了一个项目。

此刻，我继续将这两个项目作为分支运行，因为我仍然共享课程。

我希望有 2 个存储库并能够在它们之间共享（樱桃采摘）提交（在两个方向上）。

我的树看起来像这样：

```
----*------*--*--*-----*------------------- ... -------
     \----*------*--------*--- ... ------------ 
```

我厌倦了将其保留为单个项目，因为有些文档我不想跟踪，但我必须跟踪它们，以便在我签出适当的分支时它们会发生变化。

我正在考虑分叉它以创建一个新的仓库，然后在每个仓库中杀死另一个分支。但我不知道这将如何影响 2 个存储库之间的协作（合并或挑选，或其他）。

请就此类任务的适当程序有什么建议？

先谢谢各位了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:24:11.710

我的想法 - 我会这样做：

1.  创建两个存储库，每个项目一个。
2.  不要挑剔。相反，创建一个新项目 - 这可能会产生一个新的存储库或可能存在于现有的存储库中 - 并将共享的东西放入该新项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:35:04.070

如果您的两个项目共享一些代码，那么可行的方法可能是将通用功能提取到单独的库中。很有可能您将有另一个项目使用该代码，并且无论如何您都必须这样做 - 也许另一个项目需要一些旧版本，或者您想更改 API 而您也不想调整其他项目.

因此，2 个项目存储库，1 个库存储库。

# objective-c - 如何在可可中选择文件

> ID：13836479
> 
> 赞同：1
> 
> 时间：2012-12-12T09:21:11.100
> 
> 标签：objective-c, macos, cocoa

单击选择按钮后如何选择文件？当我单击选择按钮时，它应该会打开一个弹出窗口，我可以从我的硬盘中选择文件。

```
-(IBAction)select:(id)sender{
    NSOpenPanel* dlg =[NSOpenPanel openPanel];
    [dlg setCanChooseFiles:YES];
    [dlg setCanChooseDirectories:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:23:41.053

**编辑**（代码发布后）：

您实际上并没有打开面板，因此您需要以下内容：

```
NSInteger button = [dlg runModal];
if (button == NSFileHandlingPanelOKButton)
{
    NSURL *chosenURL = [[dlg URLs] objectAtIndex:0];
    // Do something with chosen file
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:42:55.707

**编辑**：`NSOpenPanel`只能是`run modally`。所以你`need` `[YourNSOpenPanelObject runModal]`。

请参阅[NSOpenPanel](http://cocoadev.com/wiki/NSOpenPanel)链接。

* * *

使用`NSOpenPanel`. 下面给出了选择`NSImage`的示例：`filteration`

```
NSOpenPanel* openDlg = [NSOpenPanel openPanel];
//[openDlg setCanChooseFiles:YES];
//[openDlg setCanChooseDirectories:NO];
[openDlg setPrompt:@"Select"];
NSArray* imageTypes = [NSImage imageTypes];
[openDlg setAllowedFileTypes:imageTypes];
//[openDlg setAllowsOtherFileTypes:NO];
[openDlg beginWithCompletionHandler:^(NSInteger result){
 NSArray* files = [openDlg filenames];
 NSData *imgData;
 for(NSString* filePath in files)
 {
        NSURL *url = [[NSURL alloc]initFileURLWithPath:filePath];
        NSImage *img;
        if(url)
        { 
            img = [[NSImage alloc]initWithContentsOfURL:url];
            imgData = [NSData dataWithContentsOfURL:url];
            [url release];
        }
        if(img)
        {
            imgSubCategoryView.image = img; 
            [img release];
        }
        else
        {
            imgSubCategoryView.image = nil;
            NSAlert *alert = [[NSAlert alloc]init];
            [alert setMessageText:@"Application Message"];
            [alert setAlertStyle:NSInformationalAlertStyle];
            [alert setInformativeText:@"Select Only Image"];
            [alert beginSheetModalForWindow:_window
                              modalDelegate:self didEndSelector:nil contextInfo:nil];
        }
 }
}]; 
```

# matlab - 如何在 MatLab 中求解精确微分方程？

> ID：13836480
> 
> 赞同：4
> 
> 时间：2012-12-12T09:21:12.220
> 
> 标签：matlab, symbolic-math, equations

> (3x^2+4xy)dx+(2x^2+2y)dy=0

我在纸上解这个方程是这样的：

![解决方案](../Images/cce740559e77f7e0a23f950ab07d96fd.png)

结果必须是：

> f(x,y)=x^3+2x^y+y^2=c-c_1

我想在 Matlab 中找到 f(x,y) 函数。我尝试使用 dsolve 命令找到它。

> dsolve ('(2*x^2+2*y)*dy=-(3x^2+4xy)', 'x')

但它给出了错误的结果。

还有其他解决方法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:14:39.187

不是 MATLAB 错了，它解决了y(x) 或 x(y) 的**ODE**。精确微分方程是我们在研究生阶段深入探讨的内容（至少对于工程师而言）。如果您在将其作为编程问题之前更多地解释数学，这将很有帮助。如果不解释 f(x,y) 是如何参与的，就不清楚了。

提出另一种方式（有点概念上的延伸，但我认为它表明 F 是一个很好的潜在函数）......

![div({F})= \frac{\partial F}{\partial x} + \frac{\partial F}{\partial y} = (3x^2+4xy) +(2x^2+2y) = 0](../Images/48721afb3d7c853d56d5c66caaaaaa2d.png)

MATLAB 不会直接为您解决这个问题。但是，当以这种方式询问您的结果时，您的结果是可以立即验证的，因为 F 的参与是明确的。

请注意，MATLAB 将允许您通过计算 diff(f,x) 和 diff(f,y) 来进行符号验证。

**更新**

您可以通过使用 MATLAB*执行这些步骤*来获得解决方案。

```
syms x y c
P = 3*x*x + 4*x*y
Q = 2*x*x + 2*y
f = int(P,x)+subs(int(Q,y),x,0) + c 
```

输出

> f = c + y^2 + x^2*(x + 2*y)

**一条线解决方案**

```
f = int('3*x*x+4*x*y','x') + subs(int('2*x*x+2*y','y'),'x',0) + 'c' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:54:31.403

反正你写错了。

我做了

```
>> dsolve ('(2*x^2+2*y)*Dy=-(3*x^2+4*x*y)', 'x') 
```

并得到

```
ans =

   (x^4 - x^3 + C2)^(1/2) - x^2
 - (x^4 - x^3 + C2)^(1/2) - x^2 
```

**钨**

Wolfram Alpha 证实了 Matlab 的解决方案：

[http://www.wolframalpha.com/input/?i=%283x%5E2%2B4xy%29%2B%282x%5E2%2B2y%29y%27%3D0](http://www.wolframalpha.com/input/?i=%283x%5E2%2B4xy%29%2B%282x%5E2%2B2y%29y%27%3D0)

**更新**

可能这与您得到的结果一致，因为您`F(x,y)`用 DE 的解决方案来表达答案`f(y)`

# asp.net - Azure 中的 ASP.NET 网站，无需将其转换为 ASP.NET Web 应用程序

> ID：13836485
> 
> 赞同：1
> 
> 时间：2012-12-12T09:21:27.527
> 
> 标签：asp.net, azure

是否可以在 Azure 中部署 ASP.NET 网站而不将其转换为 ASP.NET Web 应用程序？是否有可能请提供一些教程链接？我搜索但没有找到任何链接。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:55:33.187

您可以将 ASP.NET 网站部署到 Windows Azure 网站，而无需将其转换为 Web 应用程序。只需右键单击**ASP.NET Web Site**，选择**Publish Web Site**，选择 FTP 并输入您的 Windows Azure 网站的 FTP 凭据：

![在此处输入图像描述](../Images/85429c37a67c1d821cb8fb68f27566b6.png)

确保将目录更改为**site/wwwroot**，否则会破坏 Windows Azure 网站。

# java - 为什么 Java 的 try-with-resource 需要声明

> ID：13836486
> 
> 赞同：17
> 
> 时间：2012-12-12T09:21:39.537
> 
> 标签：java, try-catch

Java7 的 try-with-resources 非常棒，但我无法理解为什么需要在语句中包含资源的`try`声明。我的直觉说以下应该是可能的：

```
CloseableResource thing;
try (thing = methodThatCreatesAThingAndDoesSomeSideEffect()) {
    // do some interesting things
}
thing.collectSomeStats(); 
```

唉，这会导致语法错误（神秘地期待 a `;`）。将类型定义/声明移动到`try`语句中是可行的，这当然会将事物移动到相应的范围内。`AutoClosable`当我想要更多而不是关闭时，我可以弄清楚如何解决这个问题，我对编译器*为什么*需要它感兴趣。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-10-29T07:11:56.977

从*Java 9*开始，您可以在块外的*try-with-resources中声明和初始化使用的变量。*对 variable 的唯一额外要求是它必须是[有效的 final](https://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final)。
所以现在可以这样做：

```
CloseableResource thing = methodThatCreatesAThingAndDoesSomeSideEffect();
try (thing) {
    // do some interesting things
}
thing.collectSomeStats(); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T09:24:52.833

您的版本没有明确定义应该关闭的内容，例如

```
CloseableResource thing;
Parameter a;

try (a = (thing = methodThatCreatesAThingAndDoesSomeSideEffect()).getParameter()) { 
```

如果你写了怎么办

```
try (12) { 
```

或者其他的东西？

**还**

```
CloseableResource thing1 = methodThatCreatesAThingAndDoesSomeSideEffect();
CloseableResource thing2 = methodThatCreatesAThingAndDoesSomeSideEffect();

try(thing1) {
} 
```

为什么只关闭`thing1`？

因此，当前的语法迫使您在打开关闭块的同时创建一个变量。

**ALSO2**

CloseableResource thing1 = methodThatCreatesAThingAndDoesSomeSideEffect();

```
try(thing1) {
}

thing1.doSomethingOnClosedResource(); 
```

因为`thing1`仍然存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T09:31:00.403

阅读java规范我得出了这个结论（尽管它没有隐含地表明是这样）：

它们使您声明变量并为其添加隐式 final 以确保您不能将变量重新绑定到其他东西。

在这种情况下，将不可能关闭资源，因为它不再绑定到变量。

例如：

```
CloseableResource thing;
try (thing = methodThatCreatesAThingAndDoesSomeSideEffect()) {
    thing = null;
    // thing can't be closed now
} 
```

如果我猜它在外面，他们可以让你使用 final 但它有点难看。

* * *

`finally`解决方法：如果要访问声明的资源，可以使用：

```
try (CloseableResource thing = methodThatCreatesAThingAndDoesSomeSideEffect()) {
    // do some interesting things
} finally {
    thing.collectSomeStats();
} 
```

请记住，finally`thing`已经关闭

# javascript - Week Incrementation using Javascript

> ID：13836491
> 
> 赞同：2
> 
> 时间：2012-12-12T09:21:58.447
> 
> 标签：javascript, jquery, dayofweek, gettimeofday

I'm working on a reminders application using Phonegap [Javascript + Html5] in which the user enters the weekly task he wants to be reminded of and I'm supposed to alert a notification every week on that day.

Now the point is: I use Phonegap Local Notification Plugin to alert the notifications, this plugin takes a date to alert on time.

How can I give the needed date everyweek .. i.e: How Can I increment the counter when the day ends ?

Usually if the date if preknown: I use this function:

```
 if (typeof plugins !== "undefined")
                       {
                        var RId = 0;
                        var rDate =new Date();
                        var RemDate = reminder_deadline.split("T")[0];
                        var RemTimeB = reminder_deadline.split("T")[1];
                        var RemTime = RemTimeB.split("Z")[0];
                        var RYear = RemDate.split("-")[0];
                        var RMonth = RemDate.split("-")[1];
                        var RMonth = RMonth-1;
                        var RDay = RemDate.split("-")[2];
                        var RHour = RemTime.split(":")[0];
                        var RMinute = RemTime.split(":")[1];
                        var RSecond = RemTime.split(":")[2];
                        alert(RYear+".."+RMonth+".."+RDay+".."+RHour+".."+RMinute+".."+RSecond);
                        rDate.setFullYear(RYear);
                        rDate.setMonth(RMonth);
                        rDate.setDate(RDay);
                        rDate.setHours(RHour);
                        rDate.setMinutes(RMinute);
                        rDate.setSeconds(RSecond);
                        plugins.localNotification
                        .add({ 
                            date: rDate,
                            message: reminder_name, 
                            id: RId
                             });
                             }
                             RId++;
             } 
```

But now the user will just enter Monday ... & I'm supposed to notify him every Monday ... So is that possible to be made ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:24:51.453

```
var today = new Date();
var nextWeek = new Date();
nextWeek.setDate(nextWeek.getDate() + 7); 
```

* * *

这是上周一给你的一个片段。如果您需要任何其他日期，只需`var daysOffMonday`相应地编辑该行（0=星期日，1=星期一，...）

然后使用上面的代码段，您可以获取下一个星期一，以及旁边的那个，等等。

```
​var today = new Date();

​var dayOfWeek = today.getDay();
var daysOffMonday = 1 - dayOfWeek;
var lastMonday = new Date();
lastMonday.setDate(lastMonday.getDate() + daysOffMonday);

​alert(lastMonday);​ 
```

# ios - Long press table view cell to open options

> ID：13836492
> 
> 赞同：1
> 
> 时间：2012-12-12T09:22:18.503
> 
> 标签：ios

This behaviour can be found in Contacts app.

If you long press a table row in a contact page, "copy" option popups on top of the row. How can I get this behaviour in my own table view cells.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:48:18.293

如果您使用的是 iOS 5.0 或更高版本，则可以使用默认行为：

```
- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
{
    if (action == @selector(copy:)) {
        return YES;
    }    
    return NO;
}

- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
{
    if (action == @selector(copy:)) {
        [UIPasteboard generalPasteboard].string = @"test";
    }
} 
```

# iphone - iphone time conversion gmt to local time

> ID：13836494
> 
> 赞同：2
> 
> 时间：2012-12-12T09:22:27.463
> 
> 标签：iphone, ios

Am getting the time format like below

"Wed, 12 Dec 2012 09:08:30 GMT" Now i want to convert it to local time format.Please give me your suggestion

Thanks,

Vijayan.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:24:49.197

尝试这个：

本地到格林威治标准时间

```
NSString *dateString = @"Wed, 12 Dec 2012 09:08:30 GMT";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd MM yyyy hh:mma"];
NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"BST"];
[dateFormatter setTimeZone:sourceTimeZone];
NSDate *dateFromString = [dateFormatter dateFromString:dateString]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:49:56.067

好吧，我们需要先创建一个`NSDate`对象形式“Wed, 12 Dec 2012 09:08:30 GMT”

```
NSString *dateString = @"Wed, 12 Dec 2012 09:08:30 GMT";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];
[dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"EN"]];
NSDate *date = [dateFormatter dateFromString:dateString]; 
```

您可能会发现我设置的区域设置`NSDateFormatter`与本地化日期有关（月份和日期都是英文）。

现在您可以使用日期格式化程序在本地时区显示 dat：

```
[dateFormatter setLocale:[NSLocale systemLocale]];
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
NSString *localDateString = [dateFormatter stringFromDate:date]; 
```

# c# - How to make a field uneditable

> ID：13836496
> 
> 赞同：1
> 
> 时间：2012-12-12T09:22:30.207
> 
> 标签：c#, adobe, livecycle

I have a form with some 5 text fields. Firstly I am filling out the form in workspace and assigning it to some other person in the workflow. My requirement is that person to whom i have assigned the form should not be able to edit the form data say ONLY three particular fields. How can i achieve the same? I want to lock those particular fields and it should not be editable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T06:18:14.337

`xfa form` `xml`我做了这个方便的交易：通过这个解析你的：

```
 private string MakeReadOnly(string xml) 
    {
        string formName = GetFormName(xml);

        return @"
ProcessAllFields(xfa.form." + formName + @");

function ProcessAllFields(oNode) {
    if (oNode.className == 'exclGroup' || oNode.className == 'subform'  || oNode.className == 'subformSet' || oNode.className == 'area') { 
    for (var i = 0; i < oNode.nodes.length; i++) {
            var oChildNode = oNode.nodes.item(i); ProcessAllFields(oChildNode);
        }
    } else if (oNode.className == 'field') {
        oNode.access = 'readOnly'
    }
}";
    }

    private string GetFormName(string xml)
    {
        string formName = string.Empty;
        int subFormStart = xml.IndexOf("<subform", 0);
        if (subFormStart > -1)
        {
            int nameTagStart = xml.IndexOf("name", subFormStart);
            int nameStart = xml.IndexOf("\"", nameTagStart);
            int nameEnd = xml.IndexOf("\"", nameStart + 1);

            formName = xml.Substring(nameStart + 1, (nameEnd - nameStart) - 1);
        }

        return formName;
    } 
```

然后像这样调用它：

```
 PdfAction readOnlyAction = PdfAction
                .JavaScript(MakeReadOnly(xfa.DomDocument.InnerXml), stamper.Writer);
            stamper.Writer.AddJavaScript(readOnlyAction); 
```

之前调用它：

```
 stamper.Writer.CloseStream = false;

            stamper.Close();
            reader.Close(); 
```

你去吧。只读 XFA 字段！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:27:02.883

基于 XFA 的表单中的每个字段都有一个可以在任何事件上设置的访问属性。访问属性可以设置为以下项目之一：

```
"open|protected|readOnly|nonInteractive" 
```

例如，要设置子表单“AddressSubform”中包含的名为“City”的TextField，您可以通过以下方式设置访问属性以使其不可编辑：

```
AddressSubform.City.access = "readOnly"; 
```

如果表单处于特定表单状态，则需要在单击按钮、退出字段或表单初始化等事件上触发此 JavaScript 代码片段。

在您提到的用例中，您需要跟踪谁在填写表格。通常（最佳实践），这是通过在 LiveCycle 表单中设置表单状态变量来跟踪的。因此，当您完成工作区中的表单时，您需要确保将表单状态设置为另一个值。一旦其他用户收到表单，您可以在表单的初始化事件中检查新的表单状态，并按照代码片段中的指示设置这些字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:17:36.060

您可以在数据中设置一个标志来指示字段是否需要锁定。您需要在表单呈现之前设置标志。您可以`setValue`为此使用服务。然后，您可以通过检查数据中的标志简单地将`initialize`脚本添加到您希望只读的字段。

```
var flag = xfa.resolveNode("xfa.datasets.data.Root.config.flag").value;

if(flag == "lock"){
    this.access = "readOnly";
} else {
    this.access = "";
} 
```

请注意，上面的代码假设您的数据 XML 的结构如下。

```
<Root>
    <config>
        <flag>lock</flag>
    </config>
    <restOfData>
    ...
    </restOfData>
</Root> 
```

# ios - ios UITableView reloadData don't increase content height

> ID：13836498
> 
> 赞同：3
> 
> 时间：2012-12-12T09:22:35.787
> 
> 标签：ios, uitableview, ios6

I'm facing a strange error in my iOS app and haven't been able to figure out the reason why.

In my UITableView i can add new cells, so i refresh the array that is the datasource and call `reloadData`.

Everything works without error. The `numberOfRowsInSection` is called again, and it's value is one more than it's previous value was. The new cell even gets inserted at the bottom of the tableview, but i cant scroll down to it. I only know that it's there because the tableview bounces and i can see it.

I'm guessing the tableview's content height is not getting increased for some reason, but i have no idea why.

I'm using iOS 6 btw.

Any help is very much appreciated! Thanks,

Zoli

EDIT, answers for Srikanth's questions:

1.  How is data getting added.

There's an NSArray containing objects of a specific type. The array.count is the number of the number of cells. This NSArray gets its values from a database query.

1.  When you say, you are refreshing the array, what do you mean.

By refreshing the array i mean i execute a new query in the database and put the results of this query into an NSArray. this will be the tableview's datasource array. Like this:

```
dataSourceArray = [dbManager executeQuery];
[tableView reloadData]; 
```

1.  Are you adding the data within the same view controller

Yes.

1.  Can you show some code as to what you are doing

See above.

1.  Is the table view at the root of the view controllers view or is it within another view

The tableview is the main view's first child.

1.  Can you try adding data to the array at the beginning, so that you can view the cell being added at the top.

I don't understand what you mean.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T09:17:17.807

我遇到了同样的问题，我能够让它表现正确的唯一方法是不使用 reloadData，而是重新加载所有部分（归结为同一件事，但显然不是在内部 UITableView contentSize 重新计算）。

无论如何，当你的模型被加载时，不要做 [ self.myTableView reloadData ]，而是调用这个：

```
-(void)reloadDataWithAnimation {
    [self.myTableView reloadSections:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, self.myTableView.numberOfSections)] withRowAnimation:UITableViewRowAnimationTop];
} 
```

动画不是必需的，我只需要它看起来那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:27:09.447

检查您的 tableView:heightForRowAtIndexPath: 方法。对于新添加的行，此方法可能会以某种方式返回零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:02:05.443

答案是确保在调用 tableview 的 reloaddata 之前从数据库中获取新内容。由于某种原因，新内容在 tableview 中，但其内容高度较小。我的猜测是 numberOfRowsInSection 在新结果进入数组之前被调用，但它的内容来自带有新数据的数组。但这也没有意义……

但是确保只有在获取查询完成后才重新加载 tableview 的回调解决了问题。

# c# - C# 中跨不同文件的预处理器指令

> ID：13836501
> 
> 赞同：13
> 
> 时间：2012-12-12T09:22:42.613
> 
> 标签：c#, c-preprocessor, conditional-compilation

我知道我可以使用预处理器指令`C#`来启用/禁用某些代码部分的编译。

如果我在同一个文件中定义一个指令，它工作正常：

```
#define LINQ_ENABLED
using System;
using System.Collections.Generic;

#if  LINQ_ENABLED
using System.Linq;      
#endif 
```

现在，我习惯于`C++`将所有这些配置指令放在一个头文件中，并将其包含在我需要此类指令的所有文件中。

如果我做同样的`C#`事情不起作用：

```
//Config.cs
#define LINQ_ENABLED

//MyClass.cs
#define LINQ_ENABLED
using System;
using System.Collections.Generic;

#if  LINQ_ENABLED
using System.Linq;      
#endif 
```

我还尝试了以下方法，但似乎无法在命名空间内定义指令：

```
//Config.cs
namespace Conf{
#define LINQ_ENABLED
}

//MyClass.cs
#define LINQ_ENABLED
using System;
using System.Collections.Generic;
using Conf;
#if  LINQ_ENABLED
using System.Linq;      
#endif 
```

1.  我究竟做错了什么？
2.  在不同文件中使用预处理器的正确方法是 `C#`什么？
3.  有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T09:27:31.957

在您的 .csproj 中有一个部分：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DefineConstants>TRACE;DEBUG;LINQ</DefineConstants>
  </PropertyGroup>
</Project> 
```

如果你想要额外的预处理器，你可以在那里添加它们。

或者通过项目的属性，它会自动为您添加它们。在“构建”选项卡下的属性中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T09:27:18.807

您可以从 Project|Properties 为整个项目执行此操作。

Afaik 无法在 C# 中使用包含文件，因此对于文件组，没有简单的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T09:35:45.430

而不是向您的文件添加条件编译，并添加使用 Linq 和其他不使用的代码块。我已将所有数据访问逻辑（即具有两种实现的代码 - 使用和不使用 Linq）移动到单独的库中。

例如，创建您的主应用程序将使用的接口。并创建这些接口的两个实现——一个使用 Linq，另一个不使用：

在主要项目中：

```
public interface IUserRepository
{
    IEnumerable<User> GetUsersByCompanyName(string companyName);
} 
```

在*Persistence.Linq.dll*中：

```
using System.Linq; 

public class UserRepository : IUserRepository
{
    public IEnumerable<User> GetUsersByCompanyName(string companyName)
    // use Linq here
} 
```

在*Persistence.SomethingOther.dll*中：

```
public class UserRepository : IUserRepository
{
    public IEnumerable<User> GetUsersByCompanyName(string companyName)
    // do not use Linq here
} 
```

现在您可以将任何实现注入`IUserRepository`到您的主应用程序类中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T09:29:22.303

没有应用`#define`on的意义`usings`，因为这样你***就不会***从你的项目中取消链接库，我想你想避免在某些情况下引用。

.NET 中没有条件程序集引用（如果不手动完成，则动态完成）。

因此，预处理器指令的主要使用点只是*名称空间*`enable/disable`内的部分代码。

# doctrine-orm - search form using Zend Form with validators and inputFIlters

> ID：13836507
> 
> 赞同：0
> 
> 时间：2012-12-12T09:22:54.313
> 
> 标签：doctrine-orm, zend-form, zend-framework2

Is there an example to see how one can implement a search form using Zend Forms in Zend Framework2\. I needed a search form for every category and every category has different columns in the database which needs to be searched.

Let me say I have a Country category, under this there are many elements which can be searched like country name, states belonging to the county, language spoken in the country and so on.

So when a user types either a state or country or language I need to display all possible details. Is there something like a module already existing in Zend Framework2 or I should be implementing everything form scratch. In case if I need to do all from scratch, then what is the best way to approach this.

Im using Doctrine ORM to communicate with my DB. So in case if somebody has already worked on both of these then your suggestions would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:40:26.307

您想通过您的学说实体中定义的属性来构建您的 zend_form 吗？你不得不

*   使用反射来获取所有属性 + 数据类型 + is-nullable?,
*   遍历属性（最终实现一种安全机制来整理不需要的列），
*   迭代时构建zend_form，创建对应的zend_form_elements

之后，您必须根据从表单中获得的数据创建 Doctrine 查询，为您通过 POST 获得的每个属性动态设置 WHERE 语句。

**但这不是很实用。**

在你的情况下，我会建立一个**全文搜索引擎**，如 lucene、elastic search 或 solr。

我不知道 ZF2（它是否已经处于可用于生产环境的状态？-当我们在一年前分析它时，我们决定不使用它），但 ZF1 有一个 zend_search 类，它允许轻松连接到solr 衍生。

我们不使用它虽然导致它很慢。也许现在 ZF2 中有更好的实现..

# c - 字符串指针与数组

> ID：13836509
> 
> 赞同：2
> 
> 时间：2012-12-12T09:23:03.700
> 
> 标签：c, arrays, string, pointers, char

我想知道定义的字符串之间是否有任何区别（在语法和性能方面）

```
char str[200]; 
```

和

```
char *str;
str = calloc(200, sizeof(char)); 
```

用法上有区别吗？（例如，一个不兼容`strncpy`什么的）更重要的是，在性能方面是否存在差异？

**编辑：**我知道由`char *`and定义的数组`calloc`可以增长和缩小，但是我应该选择堆内存而不是堆栈内存还是出于任何原因？这才是我真正想问的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:25:10.850

`char str[200]`在堆栈内存中`calloc()`分配，而在堆内存中分配。

根据 calloc() 的性质，它将 0 分配给它分配的所有字节。

请参考以下堆栈和堆比较

[哪个更快：堆栈分配或堆分配](https://stackoverflow.com/questions/161053/c-which-is-faster-stack-allocation-or-heap-allocation)

[http://www.linuxquestions.org/questions/programming-9/stack-faster-than-heap-685004/](http://www.linuxquestions.org/questions/programming-9/stack-faster-than-heap-685004/)

[堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T09:43:04.927

> **用法上有区别吗？（例如，一个与 strncpy 或其他东西不兼容）**

I am surprised that no one mentioned that first str i.e. array name evaluates to a *constant pointer* and **cannot be reassigned**, where as the second one is a *pointer variable* which can be reassigned.

So

```
char str[SIZE];
char * b = malloc(SIZE);

str = b; // This is a compilation error

b = str; // where as this is perfectly legal (ignoring the fact 
         // that we are losing malloced memory without actually freeing it) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:25:37.580

首先，在堆栈上分配内存，而其次分配动态内存。堆栈内存是自动管理的，而动态内存需要手动管理。

当您有选择时，您应该始终首选第一个：

*   你不必记得释放任何东西
*   动态内存在性能方面几乎没有开销。

> **用法上有区别吗？（例如，一个与 strncpy 或其他东西不兼容）**

就函数的使用而言，两者都是相似的，从简单的意义上讲，当使用函数时，两者都是指向连续内存块的指针。当您将数组传递给函数时，它会衰减为指向第一个元素的指针。
区别在于它们的存储位置以及它们是自动管理还是手动管理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T09:26:51.443

`char str[200];`

*   是一个简单的声明（不是动态分配），
*   默认值是垃圾，
*   快速访问（在堆栈段中），
*   `Scope is local`（之内 {}）。

> 字符 *str;
> str = calloc(200, sizeof(char));

*   所有元素的值都为零（因为`calloc()`），
*   访问速度慢（堆段使用），
*   动态分配使用即高效使用内存。
*   需要明确取消分配，
*   内存`Scope is global`，您可以 `return str`从例如函数中返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:39:52.910

您应该尽可能使用堆栈分配：它对程序员来说更容易维护，而且对性能的要求也较低。

在很多情况下，数组堆栈分配是不可能的。

*   如果您在编译时不知道数组的大小。然而最近的 C 标准对此有一些支持，
*   你有一个大小不相同的数组数组，
*   您需要在函数返回后保留分配的内存。

另请注意，`char str[200]`“知道”它的大小（即`sizeof(str) == 200*sizeof(char)`），而您必须在辅助变量中记住分配数组的大小才能使用它（`sizeof(str) == sizeof(char*)`通常为 4 或 8）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-12T09:27:26.397

Char 数组内存分配在堆栈上。一旦控制移出包含数组的函数，内存就会被释放并且现在无法访问数组。

虽然 calloc 函数在堆上分配内存并保持到程序正在执行或内存被手动释放

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-12T09:30:48.413

创建字符串后，用法没有区别。

char str[100] 在堆栈上分配字符串，而另一种方法使用堆。堆栈上的分配总是比堆上快（请参阅此讨论：[哪个更快：堆栈分配或堆分配](https://stackoverflow.com/questions/161053/c-which-is-faster-stack-allocation-or-heap-allocation)）

此外，calloc() 将数组的所有元素设置为 0/NULL，进一步降低了性能。如果您使用 C++ 编程并需要使用堆，请始终编写：

字符 *str = 新字符 [200];

这有额外的好处，例如，如果堆已满，则会引发错误。

# java - 如何知道何时停止 InputStream 缓冲

> ID：13836517
> 
> 赞同：0
> 
> 时间：2012-12-12T09:23:32.937
> 
> 标签：java, inputstream

我通过串行端口与设备通信。

我设法获取了 InputStream 并读取了设备发送的内容。

但问题是，我根本不知道何时停止阅读并继续执行另一项任务。

这是简化的代码：

```
inputStream = serialPort.getInputStream();
try
{
    int step = 0;
    while ( (len = inputStream.read(buffer)) > -1 )
    {
        //do something
    }    
    System.out.println("END");
}
catch ( IOException e )
{
    throw new Exception("IO Error");
} 
```

它从未设法到达“END”。即使设备什么也没发送，它也会继续循环。设备停止发送时如何停止循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:26:59.953

```
 inputStream = serialPort.getInputStream();
 int available = inputStream .available();

 if (available > 0) {
        byte data[] = new byte[available];
        inputStream .read(data);

   }else{
    logger.info("data is not avilable");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:35:38.967

从[如何在java中识别InputStream的结尾](https://stackoverflow.com/questions/5562370/how-to-identify-end-of-inputstream-in-java)

它正在寻找更多数据，因为没有人告诉它不会有更多数据。网络的另一端可以随时发送更多数据。

目前尚不清楚您是在设计客户端/服务器协议还是只是尝试实现它，但通常有三种常用方法来检测消息的结尾：

*   在消息末尾关闭连接
*   将消息的长度放在数据本身之前
*   使用分隔符；一些在正常数据中永远不会出现的值（或者总是以某种方式被转义）

# sql - 当实际条目包含 20 个字符并且该字段为 varchar 时，如何从给出的 10 个字符的列中获取完整条目？

> ID：13836518
> 
> 赞同：-8
> 
> 时间：2012-12-12T09:23:34.020
> 
> 标签：sql, sql-server-2008

给定的值是这样的

```
4213076600 
```

我需要`89013106904213076600`使用 select 从表中获取它

我知道我可以通过使用 like 函数来获得它，但给定的值大约是 100

我正在使用的查询是

```
select left(name, 50)
from production.product
where left(name, 50) in ('ring', 'heel')
order by productid; 
```

请相应更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:31:26.107

只需更改您实际选择的内容：使用`SELECT NAME`而不是`SELECT LEFT(NAME, 50)`：

```
SELECT NAME
FROM Production.Product
WHERE LEFT(Name, 4) IN ('ring','heel')
ORDER BY ProductID; 
```

# asp.net - IIS7 和 ASP.NET 如何限制用户请求

> ID：13836520
> 
> 赞同：6
> 
> 时间：2012-12-12T09:23:38.400
> 
> 标签：asp.net, iis-7, bandwidth-throttling

我正在使用带有 IIS7 的 ASP.NET，今天我的一个页面中的一个错误导致服务器停机。该脚本使用 ajax 以每秒约 1000 个请求的速度查询资源。请求已通过身份验证，因此我知道哪个用户请求了哪个页面。

我的问题是，无论是通过 IHttpModule 还是其他方式，我如何在服务器级别限制客户端每秒（或每分钟）允许发出的最大请求数，然后引入延迟以限制他们的请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-07-20T01:45:47.850

如果有人找到返回这里的路，您可以在 IIS 8 及更高版本中限制每个用户的请求。设置为denyRequestByRate。文档在[这里](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/security/dynamicipsecurity/denybyrequestrate)。

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-12-12T09:29:47.540

打开您的 IIS 管理器并选择签名到您的 asp.net 应用程序的应用程序池。打开此池的高级设置并将请求限制设置为大于 0。

![在此处输入图像描述](../Images/ba84afe3b9eefc0e92d1bd0b83fadc28.png)

# configuration - Magento 1.7：工具栏/pager.phtml：getShowAmounts/getShowPerPage-> 我在哪里可以配置这个？

> ID：13836524
> 
> 赞同：5
> 
> 时间：2012-12-12T09:23:59.913
> 
> 标签：configuration, toolbar, magento-1.7, backend

从 Magento CE 1.4.2.0 更新到 CE 1.7.0.2 后，我的工具栏坏了。

但我已经修复了它，但我想错了。

在文件 app/design/frontend/base/default/template/page/html/pager.phtml

我们有 3 个 if/endif 但我找不到可以配置的地方：

```
<?php if($this->getUseContainer()): ?>

<?php if($this->getShowPerPage()): ?>

<?php if($this->getShowAmounts()): ?> 
```

我已经注释掉了，所以我可以使用它。

我可以在哪里设置使用容器？

我想知道为什么它不起作用，我的 getShowPerPage 和 getShowAmounts，因为我在 Admin Backend->System-Config->Catalog->Shop 中设置了它！

为什么 getShowPerPage & getShowAmounts 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:05:49.203

在文件 \app\code\core\Mage\Page\Block\Html\Pager.php 中签出方法

```
getShowPerPage() 

getShowAmounts() 
```

和调试，它应该在这里......

# version - 启动现有网站新版本的正确方法是什么？

> ID：13836528
> 
> 赞同：1
> 
> 时间：2012-12-12T09:24:05.047
> 
> 标签：version

感谢您对我的帖子的关注！我将不胜感激任何帮助。

我是整个网络开发的新手。我有在 magento 1.7 上运行的现有网站。此刻，我想做一个新版本的网站。我还希望新版本将在实时服务器上开发，而不是在本地机器上。

我希望网站的当前版本能够运行，而我将在新版本上工作，然后，当工作完成时，我想切换到新版本。

这样做的正确方法是什么？我的步骤应该是什么？

我的虚拟主机是运行 CentOS 6 的虚拟专用服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:32:00.630

您的困难涉及现有数据的迁移。在这种情况下（如果可能并且需要）进行的最简单方法是在完全相同的架构下开发新站点（在您的情况下是 Magento），并导入实际数据。您当然需要保护正在开发的新网站不被任何公众访问。然后所有的开发都可以在这个地方完成，直到一切都令人满意。在您准备上线的那一天，您可以通过维护消息快速中断真实站点，并将数据迁移到新站点。中断只会与数据迁移一样长。您还必须决定是否： 1）通过更改原始服务器上的所有文件来替换您的网站（“维护消息索引页面”除外）

# asp.net - 如何在 ASP.NET CheckBoxList 控件中启用多选？

> ID：13836540
> 
> 赞同：0
> 
> 时间：2012-12-12T09:24:35.420
> 
> 标签：asp.net, checkboxlist

我一直在努力解决这个问题，有没有办法只使用配置来做到这一点？我是否必须手动处理多选，并带有回传？

```
<asp:CheckBoxList ID="uxVisibilityScopeCheckBoxList" runat="server" AutoPostBack="false" /> 
```

此定义仅允许选择 1 个复选框。

谢谢！

## 编辑：

原来我们有一个很深的**jscript ，它连接到所有的****input[type=checkbox]**控件，并且只允许选择同一组的 1 个复选框。

一定要小心那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:30:31.190

```
<asp:CheckBoxList id="check1" AutoPostBack="false"
TextAlign="Right" runat="server">
<asp:ListItem>Item 1</asp:ListItem>
<asp:ListItem>Item 2</asp:ListItem>
<asp:ListItem>Item 3</asp:ListItem>
<asp:ListItem>Item 4</asp:ListItem>
<asp:ListItem>Item 5</asp:ListItem>
<asp:ListItem>Item 6</asp:ListItem>
</asp:CheckBoxList> 
```

也看看这个链接

[http://www.w3schools.com/aspnet/showasp.asp?filename=demo_checkboxlist](http://www.w3schools.com/aspnet/showasp.asp?filename=demo_checkboxlist)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T21:10:42.497

```
 public static Dictionary<int, string> ListDayWeek()
    {
        var days = new Dictionary<int, string>();
        days.Add(1, "Monday");
        days.Add(2, "Tuesday");
        days.Add(3, "Wednesday");
        days.Add(4, "Thursday");
        days.Add(5, "Friday");
        return days;
    }

       DropDownItem.DataSource = GlobalVar.ListItem();
       DropDownItem.DataValueField = "Key";
       DropDownItem.DataTextField = "Value";
       DropDownItem.DataBind(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:27:40.280

这是您需要的：

```
<asp:CheckBoxList ID="uxVisibilityScopeCheckBoxList" runat="server" AutoPostBack="false" >
    <asp:ListItem Value="1">Mercury</asp:ListItem>
    <asp:ListItem Value="2">Venus</asp:ListItem>
</asp:CheckBoxList> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T07:27:01.963

原来我们有一个很深的**jscript ，它连接到所有的****input[type=checkbox]**控件，并且只允许选择同一组的 1 个复选框。

一定要小心那些。

# jquery - 使用 aoData 重绘 Jquery 数据表

> ID：13836542
> 
> 赞同：1
> 
> 时间：2012-12-12T09:24:40.493
> 
> 标签：jquery, datatables

我已经设置了一个数据表。该表是使用 1 个参数在服务器端生成的。一旦我在表格中添加/编辑或删除某些内容，我需要重新绘制表格。但我无法让它工作。我正在使用 .fnDraw() 函数，但据我所知，这对于服务器端表不起作用。

参数的值没有改变。我的表如下所示：

```
varTable = $("#varTable").dataTable({
    'bPaginate': false,
    'bAutoWidth': false,
    'bFilter': false,
    'aaSorting': [[0, "asc"]],
    'bInfo': false,
    'bServerSide': true,
    'sAjaxSource': $("#varTable").attr('data-action-url'),
    "fnServerParams": function (aoData) {
        aoData.push({ "name": "stringAppID", "value": selectedAppId });
    },
    'aoColumns': [
                        {
                            'mData': 'Name',
                            'bSortable': false
                        }
                     ]
}); 
```

有人知道我如何刷新表格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:39:19.247

您可以使用`fnReloadAjax();`ajax 源重新加载表数据

假设你有一个按钮`refreshButtonID`

```
$("#refreshButtonID").click(function() {
    varTable.fnReloadAjax();
}); 
```

您可以从此处获取此数据表插件源[fnReloadAjax](http://datatables.net/plug-ins/api)，将其放入某个 js 文件中并将其包含在您的页面中...

# php - PHP 字符串函数不适用于 json_encoded 值

> ID：13836552
> 
> 赞同：-8
> 
> 时间：2012-12-12T09:25:14.397
> 
> 标签：php, json

在这种情况下，用于 json_encoded 值的PHP 字符串函数**explode()**和**substr()对我来说不起作用。**在我的情况下，它是

```
 <?php
 echo json_encode($this->data[$this->widget_id]);
 ?> 
```

输出：
**2 票（4 个评分）**

我想从上述输出中删除**2 票**，我只是尝试使用 explode() 和 substr() 但两者都不适合我。

我正在寻找

输出： **4 级**

有人请帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:30:41.800

尝试使用 $matches 的正则表达式 preg_math 广告。

正则表达式是：

```
/\(+(.*)\)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:33:14.430

**简单而愚蠢的方法：**

```
$str = json_encode($this->data[$this->widget_id]);
$pos = strpos($str, '(') + 1;
$count = strpos($str, ')') - $pos;
echo substr($str, $pos, $count); 
```

# objective-c - NSDictionary 对象中的非字符串键？

> ID：13836553
> 
> 赞同：1
> 
> 时间：2012-12-12T09:25:16.887
> 
> 标签：objective-c, json, nsstring, nsdictionary

我已经使用 Foundation 框架中的 NSJSONSerialization 解析了一些 JSON 数据 - 但是，我得到了一个 NSDictionary 组的奇怪键，如下所示

```
"stop_times" =     (
            {
        "departure_time" = "5:48a";
        "departure_timestamp" = 1355309284;
        "service_id" = 1;
        shape = "Scarborough RT To Kennedy Station";
            } 
```

知道关键的“形状”可能是什么吗？它是一个字符串吗？我不这么认为，因为它没有用双引号括起来。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:07:04.543

的`description`方法`NSDictionary`（如果您使用 NSLog 输出字典或在调试器中打印它）仅在字符串包含特殊字符时将字符串括在引号中。

此输出格式在“Property List Programming Guide”中的[Old-Style ASCII Property Lists中进行了描述：](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/PropertyLists/OldStylePlists/OldStylePLists.html)

> 如果字符串严格由字母数字字符组成并且不包含空格（数字在属性列表中作为字符串处理），则可以省略引号。...

请注意，通常您无法从 NSLog() 输出中推断出类型。`123`可以是数字或字符串。但在这种情况下，`shape`只能是一个字符串。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-12T09:28:13.027

这不是有效的 JSON 字符串。

你可以检查相同的把这个字符串放在任何 json 查看器中，例如[http://json.parser.online.fr/](http://json.parser.online.fr/)

# javascript - 检索信息并将其发送到输入框 cakePHP

> ID：13836557
> 
> 赞同：0
> 
> 时间：2012-12-12T09:25:22.627
> 
> 标签：javascript, jquery, cakephp

我有一个电子邮件表格，它是：

```
echo $this->Form->input('To');
echo $this->Form->input('Subject');
echo $this->Form->input('Message'); 
```

在表格下方，我有一个用户名列表：

```
<?php
$i = 0;
foreach ($users as $user):
    $class = null;
    if ($i++ % 2 == 0) {
        $class = ' class="altrow"';}?>

<tr<?php echo $class;?>>
    <td><?php echo $user['User']['name'].'   '.$user['User']['surname']; ?>&nbsp;</td>
</tr>
    <?php endforeach; ?> 
```

我要做的就是在用户单击列表中的任何名称后，将用户的电子邮件地址列在电子邮件表单的“收件人：”字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:21:14.340

如果您使用的是 jQuery，则可以使用选择器功能：

```
$('tr').click(function ()
    $('input[id="To"]').text($(this).text());
} 
```

# linux - 从 shell 脚本中获取随机数并使用 snmpcommad（SNMP 协议）将其存储到文件中

> ID：13836558
> 
> 赞同：0
> 
> 时间：2012-12-12T09:25:25.640
> 
> 标签：linux, shell, networking, snmp, net-snmp

我在通过 snmpwalk 命令运行脚本时遇到问题，该命令应该将随机数重定向到输出文件中：

我已将 snmpd.conf undet /etc/snmp/ 中脚本的 OID 配置为 exec .1.3.6.1.4.1.99.1.53.1006 script.sh.sh /root/my_folder/script.sh

* * *

我的脚本如下：

```
#!/usr/bin/ksh 

Out_Path="$HOME/output.txt" 

echo $RANDOM >> $Out_Path
-------------------------- 
```

现在我正在执行 snmpwalk 命令： snmpwalk -t 10 -v 1 -c public 127.0.0.1.1.3.6.1.4.1.99.1.53.1006 并且在输出文件中我得到 2 个随机数而不是 1。我只期待一个随机数应存在于 output.txt 文件中。任何人都可以解释这种行为或一些解决方案吗？

* * *

实际问题：

我正在解释我想要实现的目标。我需要通过 snmpget 命令执行脚本。

问题 1：当我使用**SNMPGET**命令时，脚本执行并且响应（内部）我已经满了（超过 1 KB），但是在将这个响应保存在一个文件中之后，我在一个 while 循环中执行**echo $line**，它将占用该行一个文件，正如我期望的那样，它应该向我展示整个数据。（但我只能获取 1 KB 数据）

问题 2：为了解决问题 1，我采用了一种新设计，就像从 1 个 OID（脚本）我在一个文件中获取了整个数据。之后我使用新 OID 执行一个新脚本，它将获取 1 个记录（1KB）并修改现有数据并更新数据。所以像这样我将使用具有不同 OID 的 snmpwalk 多次执行第二个脚本，所以我将获得所有记录。但我的问题是当我尝试更新 reord(file) 时，然后在一次执行中它正在删除 2 KB 数据，因为这个原因我发布了这个问题。（1 snmpwalk 命令中的 2 次随机数）。

我希望你现在明白这个问题，但如果你想了解更多细节，我会向你解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:19:30.020

snmpwalk 命令由 snmpgetnext 命令组成，只要子树中有要返回的内容就会重复。我想在这种情况下，两个 getnext 请求是在单个 snmpwalk 调用之后发送的，以确定没有更多数据可供检索。可以肯定的是，请使用 tcpdump 或一些 wireshark 解决方案来嗅探流量。顺便提一句。你确定 -t10 是正确的超时吗？我会将显式重复选项设置为 0 以避免重新传输（-r0 选项）。

您要做的是对上面提到的 OID 执行 snmp get/getnext 请求以执行脚本并将其输出作为 SNMP 响应返回。我认为 1 KB 问题是由其他原因引起的 - 在构建大响应时似乎不是 SNMP 代理问题。请尝试以下 SNMPv1 命令（如果您也有 SNMPv3 访问权限，请告诉我）：

```
snmpget -v1 -t25 -r0 -cprivate <IP> .1.3.6.1.4.1.99.1.53.1006 
```

或者

```
snmpgetnext -v1 -t25 -r0 -cprivate <IP> .1.3.6.1.4.1.99.1.53.1005 
```

对于 snmpgetnext 请求，请注意 OID 末尾的 1005 字节。这样的 OID 可能不存在，getnext 应该首先正确访问 1006，1005 之后的现有 OID。

# jquery - AnyTime 日期选择器 - 绑定到事件（选择时间）

> ID：13836560
> 
> 赞同：1
> 
> 时间：2012-12-12T09:25:32.020
> 
> 标签：jquery, picker, anytime

当绑定输入框中的时间更改时，如何绑定事件处理程序。

.change() 用于输入框在任何时间选择器对话框打开时出现多次

# c# - 在没有 GUI 的情况下在运行时显示数据？

> ID：13836567
> 
> 赞同：1
> 
> 时间：2012-12-12T09:25:44.610
> 
> 标签：c#, service

当我处理来自winforms、控制台、WPF 的大多数项目时，如果需要，我可以打印出任何我想在运行时使用消息框等更轻松地检查的信息；

```
MessageBox.Show(whateveriwannashow); 
```

但是，我现在正在开发一个 Windows 服务，它不允许存在任何类型的 GUI。我应该朝哪个方向显示一些信息？VS2010 是否具有此类东西的内置功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:41:33.043

[System.Diagnostics.Trace](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx)是您最好的新朋友。跟踪直接输出到 Visual Studio 中的输出窗口，可以发送到记录器，也可以使用免费的第三方工具（如 SysInternals DebugView）进行查看。

对于调试工作，它胜过日志记录。原因如下：

1.  它不会在您的驱动器上留下很大的日志文件。这意味着您可以真正细化跟踪，而不会在磁盘上留下大文件。
2.  如果没有任何东西在监听跟踪输出，那么它基本上会丢失在以太中。
3.  您可以使用 DebugView（和没有外部依赖的 Exe）实时查看输出
4.  如果你想记录它，你可以简单地在你的记录器中添加一个跟踪监听器
5.  很容易设置
6.  它默认写入输出窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:33:07.737

你有几个选择：

数据库日志：服务最好写入数据库日志，您应该编写一个单独的应用程序来显示条目并帮助您理解它们。但是，这种方法可能会出现问题，因为如果数据库出现故障，您将丢失同时应该创建的任何日志条目。

文件日志：更可靠的写入，但更难以从多个位置访问。除非您打算将它们放入许多其他应用程序使用的某个中央日志文件夹中，否则很容易忘记它们所在的位置，因此通常会被忽略。

在内存日志中：允许客户端应用程序与服务通信并获取一些日志信息可能是一个好方法，但是没有永久记录。如果服务出现故障，这种方法可能不是最好的，这取决于人们多久会注意到。

最后，每种方法都有它的好处。就个人而言，我更喜欢先写入数据库，然后在数据库写入失败时级联到文件日志。内存中的日志将严格保留用于调试消息，一旦达到相当大的规模，就会清除旧条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:40:38.323

您应该使用**日志**。

*使用抽象文本日志物理存储方式的*第三方库进行日志记录如何？然后，您可以将服务配置`app.config`为使用任何类型的日志输出：

*   数据库
*   滚动平面文件
*   XML 文件
*   窗口事件日志

无需修改您的代码。

例如，您可以使用[Enterprise Library](http://www.codeproject.com/Articles/9545/Get-Logging-with-the-Enterprise-Library)或[log4net](http://www.codeproject.com/Articles/140911/log4net-Tutorial)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T09:51:30.590

对于（半）持久性信息，我完全同意 Spencer 的观点。但是如果你需要一些快速的运行时信息来进行调试/跟踪，你可以“劫持”一个命令行窗口并写入它。

```
protected override OnStart(string[] args)
{
    int processId;
    IntPtr ptr = GetForegroundWindow();
    GetWindowThreadProcessId(ptr, out processId);
    var process = Process.GetProcessById(processId);

    if (String.CompareOrdinal(process.ProcessName, "cmd") == 0)
    {
        // Hijack an existing foreground cmd window.
        AttachConsole(process.Id);
    }
    else
    {
        // Or create a new one
        AllocConsole();
    }
}

protected override OnStop()
{
    FreeConsole();
}

[DllImport("kernel32.dll", SetLastError = true)]
static extern bool AllocConsole();

[DllImport("kernel32.dll", SetLastError = true)]
static extern bool FreeConsole();

[DllImport("kernel32", SetLastError = true)]
static extern bool AttachConsole(int dwProcessId);

[DllImport("user32.dll")]
static extern IntPtr GetForegroundWindow();

[DllImport("user32.dll", SetLastError = true)]
static extern uint GetWindowThreadProcessId(IntPtr hWnd, out int lpdwProcessId); 
```

然后，您可以使用控制台进行输出，最好使用像**[log4net](http://logging.apache.org/log4net/)**这样的 3rd 方日志系统。在我的场景中，设置看起来像：

```
//Enable log4net logging into the console
ConsoleAppender appender = new ConsoleAppender {Layout = new SimpleLayout()};
BasicConfigurator.Configure(appender); 
```

但那部分是 log4net 特定的。您应该可以使用 even `Console.Write()`，尽管设置起来要困难得多。

我喜欢的是，您可以将其“绑定”到服务的命令行/配置参数，如果您进行了设置，第 3 方记录器只会将日志记录从其默认位置切换到控制台。无需在代码中做任何进一步的检查。您也可以在任何地方执行此操作 - 在您的开发机器上，在远程服务器上......

无论如何，正如我一开始所说，如果你真的*不需要*实时信息，我会坚持 Spencer 的建议。

# java - 将 java 解释为一种安全语言？

> ID：13836569
> 
> 赞同：5
> 
> 时间：2012-12-12T09:25:49.197
> 
> 标签：java, c++, metaprogramming

有人可以帮助我了解以下攻击是什么以及java如何使这些攻击成为不可能：

> 1.  超出常规堆栈 - 蠕虫和病毒的常见攻击
> 2.  破坏自己进程空间之外的内存
> 3.  未经许可读取或写入文件。

我精通 c/c++ 并从 java 开始，所以请帮助我理解这些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T09:31:04.983

由于几个原因，Java 是一种相当安全的语言，主要集中在您的 3 点上，Java 比其他语言更安全，主要是因为它在自己的虚拟机中执行字节码指令，而不是本机代码。它不允许越界数组访问，并且没有指针访问。这几乎回答了你的前 2 点。至于未经许可的阅读和写作，我不确定你的意思。本质上，文件读取和写入是在操作系统级别控制的。如果没有利用某种漏洞来获得比应有的更多权限，无论它是用什么语言编写的，程序都无法写入或读取操作系统禁止它使用的文件。如果您的意思是从应用程序的角度来看未经许可，例如插件系统，

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T10:08:36.047

首先，安全问题更多的是实现问题，而不是语言问题。Java 确实强加了一些在 C++ 中是可选的（并且在运行时非常昂贵）的安全检查（边界检查等）。关于您的具体问题：

1.  我认为这是指经典的缓冲区溢出问题，这通常是 C 中的一个问题。在 C++ 中，我们使用`std::vector`，它可以（并且通常会，至少在给出正确的编译器选项时）执行与 Java 相同的检查。另一方面，如果它确实是指堆栈溢出（例如由于递归太深），那么由于JVM的堆栈不是机器堆栈，Java可以进行额外的检查，并且还可以保证内存不足堆栈溢出时的异常。（这在 C++ 中也是可能的，但我不知道有哪个编译器可以做到这一点。而且操作系统并不总是那么容易。）

2.  这是操作系统问题，不是语言问题。现代操作系统不允许程序访问它们自己的进程空间之外的内存，因此 Java 和 C++ 都不允许。

3.  如上所述，这是一个操作系统问题，而不是语言问题，现代操作系统执行得相对较好，无论程序是用 Java 还是 C++ 编写的。

总而言之，无论是哪种语言，2 和 3 都是不可能的，并且 1 在编写良好的 C++ 中不会出现（尽管在过去使用 C 时这是一个问题）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T09:30:53.127

安全是相对的东西。由于 Java 在虚拟机中运行，它可以自我保护 C 中出现的一些经典问题。

> 超出常规堆栈 - 蠕虫和病毒的常见攻击

Java 有一个明确的抛出 StackOverflowError 的行为，你不能绕过它。

> 破坏自己进程空间之外的内存

恕我直言，这确实是操作系统的考虑因素。即使在 C 中，您的操作系统也可以保护您的进程免于修改其他进程的内存。无论操作系统是否提供此功能，Java 都会保护您不让您访问任意内存位置。大多数现代操作系统都提供这种保护。

> 未经许可读取或写入文件。

同样，您的操作系统可以保护您免于在 C 中执行此操作，并且应该是您的第一道防线。Java 所做的是允许您运行不受信任的代码并保护您的文件，即使您可以访问它们，但阻止您的程序之一访问它们。Java 有两种机制，SecurityManager 和 AccessControl。

# c++ - JNI 调用 c++ dll 发生“UnsatisfiedLinkError: Invalid access to memory location”

> ID：13836576
> 
> 赞同：3
> 
> 时间：2012-12-12T09:26:10.800
> 
> 标签：c++, dll, java-native-interface

我想在我的 java 项目中用 JNI 调用我的 C++ dll。但是有一个奇怪的错误：'UnsatisfiedLinkError: Invalid access to memory location'。我的环境是：Windows xp sp3，jdk 1.7.0_01（和jdk 1.6.23），vistual studio 2010。但我在win7（64位）中这样做（使用相同的项目和相同的jdk＆vs2010）没有错误. 我用dependcy walker检查了dll，没有出现依赖错误。所以我很不解。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T22:49:06.170

我猜你试图在两种环境中使用相同的 DLL？如果是这种情况，您的 DLL 必须编译为 32 位 DLL，并且您必须在 Win7-64 上使用 32 位 JVM。您可能希望考虑同时发布 32 位和 64 位版本的 java 应用程序并动态加载适当的库。如果您确定没有 32/64 位冲突，请提供有关失败原因和方式的更多信息。

# iphone - How to get current orientation of device programmatically in iOS 6?

> ID：13836578
> 
> 赞同：27
> 
> 时间：2012-12-12T09:26:23.093
> 
> 标签：iphone, ios6, screen-orientation, device-orientation, ipad-3

I have developed an iOS App and tested it on iOS6 device. While testing, I realized that my App is not responding to Orientation changes as expected.

Here is my Code:

```
// Autorotation (iOS >= 6.0)
- (BOOL) shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

Precisely, I want to know that what Methods are called on Orientation Changes in iOS.

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-12T09:29:22.003

You can try this, may help you out:

[How to change the device orientation programmatically in iOS 6](https://stackoverflow.com/questions/12650137/how-to-change-the-device-orientation-programmatically-in-ios-6)

> OR

**Objective-c:**

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation] 
```

**Swift:**

```
if UIDevice.current.orientation.isLandscape {
    // Landscape mode
} else {
    // Portrait mode
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-12-12T09:33:24.563

You can try this, which solves your problem.

```
UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation; 
```

Refer below link for `App extension` [Get device current orientation (App Extension)](https://stackoverflow.com/questions/25462091/get-device-current-orientation-app-extension)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-08T10:38:51.967

Maybe stupid but it is working (only in ViewController):

```
if (self.view.frame.size.width > self.view.frame.size.height) {
    NSLog(@"Hello Landscape");
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-06T09:56:47.200

```
 @property (nonatomic) UIDeviceOrientation m_CurrentOrientation ; 
```

**/* You need to declare these code in your ViewDidload or ViewWillAppear */**

```
- (void)viewDidLoad

   {

   [super viewDidLoad];

   [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

   [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(deviceOrientationDidChange:) name: UIDeviceOrientationDidChangeNotification object: nil];
} 
```

**/* Now Our Device will give a notification whenever we change the orientation of our device,So you can control your code or program using the current orientation */**

```
- (void)deviceOrientationDidChange:(NSNotification *)notification

 {

 //Obtaining the current device orientation

 /* Where self.m_CurrentOrientation is member variable in my class of type UIDeviceOrientation */

 self.m_CurrentOrientation = [[UIDevice currentDevice] orientation];

    // Do your Code using the current Orienation 

 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T09:59:45.060

Follow the documentation on [UIDevice](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html).

You need to call

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

Then every time the orientation is changed you will receive a UIDeviceOrientationDidChangeNotification.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-13T10:40:19.330

[This tutorial](http://the.ichibod.com/kiji/how-to-handle-device-rotation-for-uiviews-in-ios) gives a nice and simple overview of how to handle device rotation using `UIDeviceOrientationDidChangeNotification`. It should help you to understand how to use `UIDeviceOrientationDidChangeNotification` to be notified when the device orientation has changed.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-21T17:37:36.053

```
UIDevice.current.orientation.isLandscape 
```

The accepted answer reads the orientation of the device as above, which can be reported differently than the orientation of your view controller(s), particularly if your device is held in an almost horizontal position.

To get the orientation of your *view controller* specifically, you can use its `interfaceOrientation` property, which is deprecated since iOS 8.0 but still reports correctly.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-10T14:27:12.283

In your ViewController, you can use `didRotateFromInterfaceOrientation:` method to detect when the device has been rotated and then do whatever you need in every orientation.

Example:

```
#pragma mark - Rotation

-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    switch (orientation) {
        case 1:
        case 2:
            NSLog(@"portrait");
            // your code for portrait...
            break;

        case 3:
        case 4:
            NSLog(@"landscape");
            // your code for landscape...
            break;
        default:
            NSLog(@"other");
            // your code for face down or face up...
            break;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-25T18:17:05.580

Swift 5 answer

Subscribe to notifications on orientations changes:

```
override func viewDidLoad() {
   super.viewDidLoad()

   NotificationCenter.default.addObserver(self, selector: #selector(orientationChangedFromNotification), name: UIDevice.orientationDidChangeNotification, object: nil)
} 
```

Handle notification:

```
@objc func orientationChangedFromNotification() {
   self.updateUIForOrientation()
} 
```

Handle orientation changes:

```
func updateUIForOrientation() {
   let orientation = UIDevice.current.orientation

   //TODO: Your logic
} 
```

Note: This will tell you the orientation of the physical device. It is also possible to access the interface orientation of the app:

```
UIApplication.shared.delegate?.window?.windowScene?.interfaceOrientation 
```

# jquery - 动态ID的Jquery问题

> ID：13836579
> 
> 赞同：1
> 
> 时间：2012-12-12T09:26:29.763
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我正在为表格的每一行使用动态 ID，并且我想在与单击的元素相对应的警报框中显示数据。为此，我编写了以下代码。

```
<%i = 1%>
   <% count = @user_rep.count%>
   <% @user_rep.each do |result| %>
   <tr>
       <td><%=h result.user%></td>
       <td><%=h result.nodeip%></td>
<td><%=link_to_function result.time,:id => "log_#{i}",:onclick => "set_file(#{i},'#{result.user}','#{result.nodeip}')" %></td>
<% i = i + 1 %>
<div id = 'file'>
<div id = 'image'>
<%= link_to_function image_tag("play_images.jpeg",:width => 30, :height => 30,:align => 'left', :title => 'Play'),:id => 'play'%></div>
<%= link_to_function image_tag("images.jpeg",:align => 'right'), :id => 'close'%>
<div id = 'request'>
</div> 
</div>
</tr>
<%end%> 
```

我将显示带有最后一列显示链接按钮的表格。当我们点击这个链接时，将显示一个 div“文件”，其中有一个链接按钮播放。单击它时，我想以连接形式显示用户和节点。我正在使用这个 jquery。

```
function set_file(id,user,node)
{
var filename = time+"_"+user+"_"+node+"_"+activity;
jQuery("#log_"+id).ready(function() {
      jQuery("#file").show("slow");
        });
 jQuery("#close").click(function() {
          jQuery("#file").hide("slow");
        });
 jQuery("#play").click(function() {
   alert(filename);
       }); 
```

但是当第一页加载时，它会显示带有正确用户名节点的警报框。但是，当我单击表格的另一个链接，然后单击*播放*链接按钮时，它会显示带有前一个字符串的警报框，当我在警报框中单击“确定”时，它会显示当前单击的字符串。文件名（变量）的值保持不变。

我怎么解决这个问题？

# asp.net-mvc - 在剃刀函数调用中嵌入 HTML 输出？

> ID：13836580
> 
> 赞同：2
> 
> 时间：2012-12-12T09:26:31.847
> 
> 标签：asp.net-mvc, razor

我正在查看[此](http://bugsquash.blogspot.co.il/2009/02/repeater-with-separator-for-aspnet-mvc.html)页面，其中包含以下剃须刀扩展：

```
public static void Repeat<T>(this HtmlHelper html, IEnumerable<T> items, Action<T> render, Action separator) 
```

以下是该页面的使用示例：

```
<% Html.Repeat(Model.Products, p => { %> 
    <div><%= p.Id%></div>
    <div><%= p.Name%></div>
<%}, () => { %> 
    <br /> <%-- separator --%>
<% }); %> 
```

我不知道如何将上面的代码片段转换为剃须刀代码，如何将 Html 输出嵌入到函数调用代码块中？

我试过这个：

```
@Html.Repeat(
  items: Model.Nodes,
  render: node => @: <a href='@node.Title'>@node.Url<a />
, separator: () => @:|
) 
```

但我得到以下异常：

> CS0201：只有赋值、调用、递增、递减、等待和新对象表达式可以用作语句

我按照下面的回答更新了`Repeat`函数，现在我的剃须刀代码如下所示：

```
@{
  Html.Repeat(
    items: Model.Nodes,
    template: @<text><a href="@item.Url">@item.Title</a></text>,
    separator:  @<text> | </text>);
} 
```

但实际上没有项目被渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:19:06.643

下面的扩展方法让你可以让helper方法直接返回一个HelperResult，这样你在调用它时就不需要使用方括号了：

```
public static class HtmlHelperRepeatExtensions
{
    public static HelperResult Repeat<T>(
        this HtmlHelper html,
        IEnumerable<T> items,
        Func<T, HelperResult> render,
        Func<dynamic, HelperResult> separator
    )
    {
        return new HelperResult(writer =>
        {
            bool first = true;
            foreach (var item in items)
            {
                if (first)
                    first = false;
                else
                    separator(item).WriteTo(writer);
                render(item).WriteTo(writer);
            }
        });
    }
} 
```

然后在你的视野内：

```
@Html.Repeat(
    new[] { 5, 10, 20 }, 
    @<text>
        @if (item == Model.Search.PageSize)
        {
            <span>@item</span>
        }
        else
        {
            <a href="@Url.SetParameters(new { pagesize = item, page = 1 })">
                @item
            </a>
        }
    </text>,
    @<text>|</text>
) 
```

请注意，我从以下链接中获取了上面的代码。有关详细信息，请参阅以下帖子。

[从 MVC 2.0 代码转换为 razor 语法](https://stackoverflow.com/questions/11036496/translate-to-razor-syntax-from-mvc-2-0-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T17:06:07.960

试试这个：

```
@Html.Repeat(
  items: Model.Nodes,
  render: node => ((Func<dynamic, object>)(@<a href='@node.Title'>@node.Url<a />)).Invoke(node),
  separator: node => ((Func<dynamic, object>)(@<text>|</text>)).Invoke(node)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T19:00:31.520

看起来 Html.Repeat 扩展返回类型是无效的。aspx 引擎渲染器以不同的方式处理它。所以扩展方法几乎不需要改变。

```
 @Html.Repeat(p.Categories, cat => {
                    return "<a href=" + Url.SetFacet("cat", cat) + ">" + cat + "</a>";
                 }, ",") 
```

方法定义

```
 public static MvcHtmlString Repeat<T>(this HtmlHelper html, IEnumerable<T> items, Func<T, string> content, string separator)
    {
        if (items == null)
            items = Enumerable.Empty<T>();
        return MvcHtmlString.Create(string.Join(separator, items.Select(content).ToArray()));
    } 
```

# java - 如何在 DDD 中实现持久无知？

> ID：13836582
> 
> 赞同：0
> 
> 时间：2012-12-12T09:26:36.060
> 
> 标签：java, scala, domain-driven-design, persistence

我正在研究一个涉及`Workspace`'s 的项目的持久层，其中每个可能包含零个、一个或多个`Document`'s。（我正在尝试遵循[领域驱动设计原则](http://en.wikipedia.org/wiki/Domain-driven_design)，但我的问题可能与此没有直接关系。）

**问题1：**我应该分离出持久性吗？即，您是否以您可以

*   在内存中创建实体和值，就像没有持久性一样（可能使用工厂方法`Workspaces.newWorkspace(...)`），并且
*   调用一个单独的`persist()`方法（可能在存储库中）来处理持久性？

或者我的工厂方法应该`Workspaces.newWorkspace()`创建一个*持久化*实体（一旦事务关闭，它将被持久化）？

如果这个问题的答案是*“分离，伙计！”* 然后我想知道如何以优雅的方式完成此任务。我的第一种方法是（在[Scala](http://www.scala-lang.org)伪代码中）：

```
class Workspace(title: String, documents: List[Document], id: Option[Long]) {
  def add(d: Document) =  // ...
  def remove(d: Document) = // ...
} 
```

但是，如果一个工作区可以有很多文档，那就不好了（受 RAM 限制）。我遵循[“如何不将服务注入实体”](http://thinkbeforecoding.com/post/2009/03/04/How-not-to-inject-services-in-entities)的下一个方法是：

```
class Workspace(title: String, docSupplier: DocSupplier, id: Option[Long]) {
  def add(d: Document) = docSupplier.add(d)
  def remove(d: Document) = docSupplier.remove(d)
} 
```

有了这个，工作区工厂可以像这样创建**新的工作区**：

```
class Workspaces {
  def newWorkspace(title: String) = new Workspace(title,
    // A supplier that maintains a simple `List[Document]`
    new DocSupplier() {
      def add(d: Document) = list.add(d)
      def remove(d: Document) = list.remove(d)
    }, id)
} 
```

此外，我的存储库可以**重建**它从数据库中获取的工作空间，如下所示：

```
class WorkspaceRepository {
  def findById(id: Long) = // ... calls `createDoc()`

  def createDoc(...) = new Workspace(title,
    // A supplier that remembers changes so they can be persisted in `persist()`
    new DocSupplier() {
      def add(d: Document) = changes.rememberAdd(d)
      def remove(d: Document) = changes.rememberRemove(d)
    }, id)
} 
```

**问题2：**这是这样做的方法吗？！嗯，这*是很多*代码，有很多样板！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:54:26.527

> 我应该把持久性分开吗？

是的，就像你描述的那样。

> 或者我的工厂方法 Workspaces.newWorkspace() 是否应该创建一个持久化实体（一旦事务关闭，它将被持久化）？

不，因为持久化瞬态实体应该是显式操作，例如添加新工作区时。工厂处理对象实例的创建，而存储库处理持久性。正如**pabrantes**所指出的，工作单元模式可以与存储库结合使用。

> 但是，如果一个工作区可以有很多文档，那就不好了（受 RAM 限制）。

这是 DDD 中的常见场景 - 在达到持久性无知的同时，您必须考虑技术限制。首先要考虑的是`Workspace`实体是否需要引用`Document`实例集合。是否有`Workspace`需要强制执行的不变量？是否存在交易边界？对象引用只是[表示关系的一种方式](http://gorodinski.com/blog/2012/07/24/implementing-associations-with-references-or-repositories-in-domain-driven-design-ddd/)。另一种方法是使用存储库。因此，您无需`Document`在类上拥有一个集合`Workspace`，而是提供一个存储库方法，该方法允许检索与特定工作区关联的文档。鉴于文档的数量可能很大，存储库也可以支持分页和过滤。

还可以查看[Vaughn Vernon 的 Effective Aggregate Design](http://dddcommunity.org/library/vernon_2011)以深入处理这些问题。

# ruby-on-rails - 在 Rails 中，错误与 ProductsController#index 中的 NameError 相同

> ID：13836583
> 
> 赞同：1
> 
> 时间：2012-12-12T09:26:42.380
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我编写了一个控制器和模型来从数据库中获取数据。但是当我们运行 rails is:NameError in ProductsController#index in the url 时它会显示错误。我将我的 url 作为 localhost:3000/products。那么它给出的错误是：

```
 NameError in ProductsController#index

    uninitialized constant ProductsController::Product.

    my controller is:
    products_controller.rb
    class ProductsController < ApplicationController
      # GET /products
      # GET /products.json

      def index
        @products = Product.all
        respond_to do |format|
          format.html # index.html.erb
          format.json { render json: @products }
        end
      end

      #render :text => params and return false
      # GET /products/PR1
      # GET /products/PR1.json
      def show
        @product = Product.find(params[:prod_id])

        respond_to do |format|
          format.html # show.html.erb
          format.json { render json: @product }
        end
      end

    end

    model as product.rb
    class Product < ActiveRecord::Base
      attr_accessible :model_name, :brand_name, :price, :discount, :qty_available
    end 
```

我在 routes.rb 中声明为：资源：产品

我设计了 index.html.erb 和 show.html.erb

我不知道错误在哪里......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:20:21.960

型号名称是`product.rb`和不是`products.rb`，在您的展示操作中，您需要一个产品，因此正确的语法是：

```
 def show
      @product = Product.find(params[:id])

      respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @product }
      end
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:26:55.067

使用 find_by_id 而不是 find。每当找不到记录并且 find_by_id 返回 nil 时，它都会抛出异常 ActiveRecord::RecordNotFound

# android - 未找到库类

> ID：13836584
> 
> 赞同：1
> 
> 时间：2012-12-12T09:26:45.500
> 
> 标签：android, analytics

我有一个库，我在项目属性中标记为 IsLibrary。这个库只有一个类，没有布局或活动。这个库只有谷歌分析的功能，我添加了谷歌分析的库。

我创建了另一个项目并使用了这个库。在这个项目中，我向谷歌分析（互联网......）提供了必要的权限，但我收到 ClassNotFound 错误。

我也尝试制作一个独立使用的罐子，但我有同样的错误。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:31:26.757

确保您不只是将库放在构建路径中，而是在项目属性的“android”部分中选择它作为库项目。此外，如果您是通过 ant 构建的，则需要再次运行“android update project”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:30:37.257

您是否在 Project > Properties > Java Nuild Path > Order and Export 中选中了 jar 对面的框？这决定了 jar 是否真的被复制到您的 apk 文件中。默认情况下未设置。

# javascript - 使用javascript捕获Android GO按钮

> ID：13836586
> 
> 赞同：4
> 
> 时间：2012-12-12T09:26:49.093
> 
> 标签：javascript, android, jquery, form-submit

我正在开发一个移动网站。我需要使用 javascript 或 jquery 捕获 android 键盘的“GO”按钮。我猜“GO”键与 ENTER 键相同，所以我使用的是捕获 ENTER 按键事件的 javascript 代码。该代码在台式机/笔记本电脑和 iPhone 浏览器上完美运行，但在 android 浏览器上它会将页面提交给自身并重新加载页面。请注意，即使在我捕获任何按键事件并且页面没有任何提交类型的按钮之前，android 浏览器的行为方式也是相同的。

谢谢舒布拉_

# ruby-on-rails-3 - ruby on rails 视图中的渲染问题

> ID：13836591
> 
> 赞同：1
> 
> 时间：2012-12-12T09:27:07.793
> 
> 标签：ruby-on-rails-3, rendering

视图中的代码应给出数据库中的书籍

```
<% @bookmark.each do |book| %> 
```

仅适用于多行。如果我有单行，它会显示错误

```
" undefined method `each' for #<Bookmark:0x3e2e3f0> " 
```

我应该怎么做才能打印单行。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:29:04.590

```
<% @array_bookmark = @bookmark.class == Array ? @bookmark : [@bookmark] %>
<% @array_bookmark.each do |book| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:50:18.830

只需换行`@bookmark`，`Array()`如下所示：

```
<% Array(@bookmark).each do |book| %> 
```

顺便说一句，你真的应该重命名`@bookmark`为`@bookmarks`.

# image-processing - 具有可变宽度线条的轮廓着色器

> ID：13836597
> 
> 赞同：1
> 
> 时间：2012-12-12T09:27:20.867
> 
> 标签：image-processing, glsl

我正在尝试在 glsl 中制作一个支持各种宽度轮廓的轮廓着色器，但是我知道的所有解决方案都有过多的纹理采样。具有 3x3 内核的标准 sobel 过滤器给出宽度为 2 像素的轮廓，并且可以增加内核大小以给出更粗的轮廓，但是使用这种方法的 16 像素的轮廓需要每个片段 225(?) 个纹理样本。

是否有任何允许粗轮廓的快速后处理轮廓技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:40:45.413

我在着色器中使用拉普拉斯和索贝尔内核遇到了这个问题。那些永远不会给出平滑和漂亮的轮廓。然后我找到了基于有[符号距离场](http://contourtextures.wikidot.com/)的解决方案。有关更多信息，请参阅此线程： [GLSL 距离场透明度](https://stackoverflow.com/questions/12228024/glsl-distance-field-transparency)

# ruby - 如何使用 rails 仅查找 google 加一个计数（不需要按钮和 g +1 图像）

> ID：13836598
> 
> 赞同：3
> 
> 时间：2012-12-12T09:27:20.160
> 
> 标签：ruby, ruby-on-rails-3, json, curl, google-plus-one

我需要找到 Google 的计数加一作为 url。为了实现这一点，我正在关注这个[博客](http://www.tomanthony.co.uk/blog/google_plus_one_button_seo_count_api/)

```
require 'curb'
require 'json'
hash = {method: "pos.plusones.get",id: "p",params: {nolog: true,id: "http://www.google.com",source: "widget",userId: "@viewer",groupId: "@self"},jsonrpc: "2.0",key: "p",apiVersion: "v1"}
 result=JSON.parse((Curl::Easy.http_post("https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ", hash.to_json ) do |curl|
    curl.headers['Accept']='application/json'
    curl.headers['Content-Type']='application/json'
    curl.headers['Api-Version']='2.2'
  end
).body_str)
p result
count = result && result['result'] && result['result']['metadata'] && result['result']['metadata']['globalCounts'] && result['result']['metadata']['globalCounts']['count'] ? result['result']['metadata']['globalCounts']['count'] : 0
count ? count : 0 
```

但是当我运行上面的代码时，它给了我以下错误

```
{"error"=>{"code"=>400, "message"=>"Invalid Value", "data"=>[{"domain"=>"global", "reason"=>"invalid", "message"=>"Invalid Value"}]}, "id"=>"p"} 
```

当我跑步时

```
curl -i -H 'Accept: application/json' -H 'Content-type: application/json' -X POST -d "{\"method\":\"pos.plusones.get\",\"id\":\"p\",\"params\":{\"nolog\":true,\"id\":\"http://www.google.com\",\"source\":\"widget\",\"userId\":\"@viewer\",\"groupId\":\"@self\"},\"jsonrpc\":\"2.0\",\"key\":\"p\",\"apiVersion\":\"v1\"}"  'https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ' 
```

我明白了

```
HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Date: Wed, 12 Dec 2012 11:52:58 GMT
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE
Transfer-Encoding: chunked

{
 "error": {
  "code": 400,
  "message": "Invalid Value",
  "data": [
   {
    "domain": "global",
    "reason": "invalid",
    "message": "Invalid Value"
   }
  ]
 },
 "id": "p"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:13:03.967

以下代码适用于红宝石

```
 require 'curb'
    require 'json'
    hash =  {method: "pos.plusones.get",id: "p",params: {nolog: true, id: "http://www.tomanthony.co.uk/", source: "widget", userId: "@viewer", groupId: "@self"}, jsonrpc: "2.0", key: "p", apiVersion: "v1"} 
    result=(Curl::Easy.http_post("https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ", 
hash.to_json) do |curl|
      curl.headers['Accept']='application/json'
      curl.headers['Content-Type']='application/json'
      curl.headers['Api-Version']='2.2'
    end)
    result=JSON.parse(result.body_str)
    count = result && result['result'] && result['result']['metadata'] && result['result']['metadata']['globalCounts'] && result['result']['metadata']['globalCounts']['count'] ? result['result']['metadata']['globalCounts']['count'].to_i : 0 
```

# ios - 为 uibutton ios 使用表格视图披露指示器样式

> ID：13836606
> 
> 赞同：46
> 
> 时间：2012-12-12T09:27:39.097
> 
> 标签：ios, uibutton

我有一个自定义视图，我想模仿表格视图单元格中的披露指示符。这可能吗 ？无论如何提取该图像？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-12-29T01:19:18.847

这可以通过将`UITableViewCell`带有披露指示符的 a放在 a 中完全使用代码来完成`UIButton`：

```
UITableViewCell *disclosure = [[UITableViewCell alloc] init];
disclosure.frame = button.bounds;
disclosure.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
disclosure.userInteractionEnabled = NO; 

[button addSubview:disclosure]; 
```

**迅速：**

```
let disclosure = UITableViewCell()
disclosure.frame = button.bounds
disclosure.accessoryType = .disclosureIndicator
disclosure.isUserInteractionEnabled = false

button.addSubview(disclosure) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-10-10T13:48:06.647

由于 Apple 为不同的工具提供[官方 iOS 设计资源](https://developer.apple.com/design/resources/)，您可以从那里提取人字形。

* * *

### 更新

Apple在 WWDC'19 主题演讲中宣布了图标字体[SF Symbols 。](https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/)

SF Symbols 配套应用程序包含一个`chevron.right`可供您使用的图标。您还可以指定图标的粗细。

[![在此处输入图像描述](../Images/7058b137ce3a08c060d8ed46018f819d.png)](https://i.stack.imgur.com/jpD8n.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-17T17:31:28.860

请注意，**您必须使用透明背景**

这是我能得到的最好的匹配，在一个 Photoshop 文件中：

请注意，它在下面包含了 REAL iOS IMAGE（来自屏幕截图）作为图层，因此您可以进行比较。

[http://www.filedropper.com/fakearrowiosnov2013psd](http://www.filedropper.com/fakearrowiosnov2013psd)

* * *

似乎 VBK 想要 UITableView 集合中的单个 V 形。这被称为“披露指示器”，而不是 UIButton 提供的“*详细信息*披露”。

我想你想要这样的东西：

![按钮的 UITableView 披露指示器图像](../Images/3c0b2ef68fd08f9a96ecfb6311a2aae6.png)

它是 50x80，具有透明背景。在按钮或 UIImageView 上使用此图像。将其调整为您希望按钮的大小。Apple 建议命中目标不少于 40x40。我在情节提要中将其大小设置为 10x16，但我使用的是透明按钮叠加层，因此大小无关紧要。

图片镜像：http: [//imgur.com/X00qn0Z.png](https://imgur.com/X00qn0Z.png)

* * *

但是请注意，这**并不完全是 iOS7 中使用的图像**。（2013 年 11 月。）要获得准确的图像，只需在您的模拟器中在视网膜中运行一个应用程序，然后制作一个屏幕截图。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-16T10:41:33.000

我喜欢做的是使用`UIBezierPath`. 如果我愿意，这让我可以自由调整大小，而不会失去清晰度。如果这是我在没有照片编辑器的情况下需要的，它也让我有机会在以后更改颜色。该原则是通用的，适用于任何给定的路径。用法很简单：

```
//suppose we want to apply disclosure arrow image to this button:
@IBOutlet weak var btnDisclosure: UIButton! 
```

我现在需要做的就是：

```
//get an image from UIBezierPath, resize it for the button and stroke with white:
let arrowImage = UIImage.imageWithBezierPath(UIBezierPath.disclosureArrowPath().scaleToAspectFitRect(CGRect(x: 0, y: 0, width: 22, height: 22)), fillColor: UIColor.clearColor(), strokeColor: UIColor.whiteColor())

//assign disclosure arrow image to the button:
btnDisclosure.setImage(arrowImage, forState: .Normal) 
```

因此，一段用于绘制 UIBezierPath 的代码，看起来像披露按钮：

```
extension UIBezierPath
{
    ///Disclosure arrow path. Use scaleToAspectFitRect to resize it to any given rect.
    class func disclosureArrowPath() -> UIBezierPath
    {
        //// arrow Drawing
        let arrowPath = UIBezierPath()
        arrowPath.moveToPoint(CGPointMake(4, 4))
        arrowPath.addLineToPoint(CGPointMake(26.5, 25.24))
        arrowPath.addLineToPoint(CGPointMake(4, 47.5))
        arrowPath.lineWidth = 3

        return arrowPath
    }  

    ///Makes a path scalable to any size.
    ///- parameter newRect: The path will be resized to aspect fit into this rectangle.
    func scaleToAspectFitRect(newRect: CGRect) -> UIBezierPath
    {
        var scaleFactor : CGFloat = 1.0

        //this is probably only the case of scale factor < 1:
        if bounds.width > bounds.height
        {
            //fit witdth:
            scaleFactor = newRect.width/bounds.width
        }
        else
        {
            //fit height:
            scaleFactor = newRect.height/bounds.height
        }

        //scale to aspect fill rect:
        self.applyTransform(CGAffineTransformMakeScale(scaleFactor, scaleFactor))

        return self
    }
} 
```

接下来，您需要一种方法来`UIImage`摆脱`UIBezierPath`. 同样，您可以向 UIImage 添加扩展名，如下所示：

```
extension UIImage
{
    ///Custom fill and stroke colours for our image based on UIBezierPath
    class func imageWithBezierPath(path: UIBezierPath, fillColor: UIColor, strokeColor: UIColor) -> UIImage
    {
        //enlarge the rect so that stroke line is not clipped:
        let rect = CGRectInset(path.bounds, -path.lineWidth / 2, -path.lineWidth / 2)

        UIGraphicsBeginImageContextWithOptions(rect.size, false, 0.0) //size of the image, opaque, and scale (set to screen default with 0)

        let bezierLayer = CAShapeLayer()
        bezierLayer.path = path.CGPath;
        bezierLayer.fillColor = fillColor.CGColor
        bezierLayer.strokeColor = strokeColor.CGColor
        bezierLayer.lineWidth = path.lineWidth;

        let imgViewTmp = UIImageView(frame: path.bounds)
        imgViewTmp.layer.addSublayer(bezierLayer);
        imgViewTmp.layer.renderInContext(UIGraphicsGetCurrentContext()!)

        let image = UIGraphicsGetImageFromCurrentImageContext()

        //UIGraphicsEndImageContext()
        return image
    }
} 
```

对于这个特定的任务来说，这似乎是一种矫枉过正，但它是通用的。如果你经常处理调整大小、试图找出正确的设计等，这真的很方便。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-14T14:56:33.187

我制作了一个完全在代码中的解决方案来绘制类似于 UITableView 披露指示器的箭头。

它是这样使用的：

```
let arrowImage = ArrowImageGenerator.generateArrow(withDirection: .down) 
```

默认箭头看起来与 UITableView 显示指示器的默认箭头相同。如果您愿意，您可以自定义方向（上、下、左、右）、大小、颜色等。

这是代码：

```
//
//  ArrowImageGenerator.swift
//
//  Created by Alessio Orlando on 07/10/15.
//  Copyright © 2015 Alessio Orlando. All rights reserved.
//

import Foundation
import UIKit

enum ArrowDirection {
    case up
    case down
    case left
    case right
}

class ArrowImageGenerator {

    static var defaultColor: UIColor = {
        let color = UIColor(red: 0.783922, green: 0.780392, blue: 0.8, alpha: 1)
        return color
    }()

    class func generateArrow(withDirection direction: ArrowDirection = .right,
                             size: CGSize? = nil,
                             lineWidth: CGFloat = 2.0,
                             arrowColor: UIColor = ArrowImageGenerator.defaultColor,
                             backgroundColor: UIColor = UIColor.clear,
                             scale: CGFloat = UIScreen.main.scale)
        -> UIImage? {

            var actualSize: CGSize
            if let size = size {
                actualSize = size
            }
            else {
                actualSize = defaultSize(for: direction)
            }

            let scaledSize = actualSize.applying(CGAffineTransform(scaleX: scale, y: scale))
            let scaledLineWidth = lineWidth * scale

            UIGraphicsBeginImageContext(CGSize(width: scaledSize.width, height: scaledSize.height))
            defer {
                UIGraphicsEndImageContext()
            }

            guard let context = UIGraphicsGetCurrentContext() else { return nil }
            configureForArrowDrawing(context)

            UIGraphicsPushContext(context)
            strokeArrow(context, size: scaledSize, arrowColor: arrowColor, backgroundColor: backgroundColor, lineWidth: scaledLineWidth, direction: direction)
            UIGraphicsPopContext()

            guard let outputImage = UIGraphicsGetImageFromCurrentImageContext(),
                let quartzImage = context.makeImage() else {
                return nil
            }

            let scaledImage = UIImage(cgImage: quartzImage, scale: scale, orientation: outputImage.imageOrientation)
            return scaledImage
    }

    private class func generateResizableArrow(_ arrowImage: UIImage, direction: ArrowDirection) -> UIImage {
        var edgeInset: UIEdgeInsets?
        switch direction {
        case .up:
            edgeInset = UIEdgeInsets(top: 11, left: 0, bottom: 1, right: 0)
        case .down:
            edgeInset = UIEdgeInsets(top: 1, left: 0, bottom: 11, right: 0)
        case .left:
            edgeInset = UIEdgeInsets(top: 1, left: 11, bottom: 1, right: 0)
        case .right:
            edgeInset = UIEdgeInsets(top: 1, left: 0, bottom: 1, right: 11)
        }
        let resizableImage = arrowImage.resizableImage(withCapInsets: edgeInset!)
        return resizableImage
    }

    private class func configureForArrowDrawing(_ context: CGContext) {
        context.setBlendMode(CGBlendMode.normal)
        context.setAllowsAntialiasing(true)
        context.setShouldAntialias(true)
    }

    private class func strokeArrow(_ context: CGContext, size: CGSize, arrowColor: UIColor, backgroundColor: UIColor, lineWidth: CGFloat = 1.0, direction: ArrowDirection) {
        backgroundColor.setFill()
        UIRectFill(CGRect(origin: CGPoint(x: 0, y: 0), size: size))
        arrowColor.setStroke()
        context.setLineWidth(lineWidth)
        let lineWidthOffset = lineWidth / 2 // needed to make the arrow pointy.

        switch direction {
        case .up:
            context.move(to: CGPoint(x: size.width, y: size.height))
            context.addLine(to: CGPoint(x: size.width / 2, y: 0 + lineWidthOffset))
            context.addLine(to: CGPoint(x: 0, y: size.height))
        case .down:
            context.move(to: CGPoint(x: size.width, y: 0))
            context.addLine(to: CGPoint(x: size.width / 2, y: size.height - lineWidthOffset))
            context.addLine(to: CGPoint(x: 0, y: 0))
        case .left:
            context.move(to: CGPoint(x: size.width, y: 0))
            context.addLine(to: CGPoint(x: lineWidthOffset, y: size.height / 2))
            context.addLine(to: CGPoint(x: size.width, y: size.height))
        case .right:
            context.move(to: CGPoint(x: 0, y: 0))
            context.addLine(to: CGPoint(x: size.width - lineWidthOffset, y: size.height / 2))
            context.addLine(to: CGPoint(x: 0, y: size.height))
        }
        context.strokePath()
    }

    class func defaultSize(for direction: ArrowDirection) -> CGSize {
        switch direction {
        case .up, .down:
            return CGSize(width: 12, height: 7)
        case .left, .right:
            return CGSize(width: 7, height: 12)
        }
    }
} 
```

这是完整的要点：[github gist](https://gist.github.com/ale84/90339a4d12076326ff23d5ef411ca505)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-27T20:34:55.253

您可以使用此 Xcode 项目从 Xcode 模拟器中提取图形图像 - [https://github.com/0xced/iOS-Artwork-Extractor](https://github.com/0xced/iOS-Artwork-Extractor)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-18T20:02:05.690

这对我有用：

```
UITableViewCell *disclosure = [[UITableViewCell alloc] init];
disclosure.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
for (UIView*v1 in disclosure.subviews)
{
   if ([v1 isKindOfClass:[UIButton class]])
   {
       for (UIView*v2 in v1.subviews)
       {
           if ([v2 isKindOfClass:[UIImageView class]])
           {
               return ((UIImageView*)v2).image;
           }
       }
   }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-26T03:36:36.740

**斯威夫特 5**

```
private lazy var iconImageView: UIImageView = {
    let imageView = UIImageView()
    let configuration = UIImage.SymbolConfiguration(pointSize: 13, weight: .medium)
    imageView.image = UIImage(systemName: "chevron.right", withConfiguration: configuration)
    imageView.tintColor = .lightGray
    imageView.contentMode = .scaleAspectFit
    imageView.constrainAspectRatio(17.0/10.0)
    imageView.translatesAutoresizingMaskIntoConstraints = false
    return imageView
}() 
```

**纵横比 UIView 扩展**

```
extension UIView {

/// Ratio height/width.  Example: 20/40 (20 is height, 40 is width)
func constrainAspectRatio(_ ratio: CGFloat) {
    NSLayoutConstraint(item: self,
                       attribute: .height,
                       relatedBy: .equal,
                       toItem: self,
                       attribute: .width,
                       multiplier: ratio,
                       constant: 0).isActive = true
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-24T02:00:29.520

对于 Xamarin.iOS

```
//create your button
var systolicWell = new UIButton(UIButtonType.RoundedRect);
systolicWell.BackgroundColor = UIColor.White;

//create the UITableViewCell
var systolicDisclosure = new UITableViewCell();
systolicDisclosure.Accessory = UITableViewCellAccessory.DisclosureIndicator;
systolicDisclosure.UserInteractionEnabled = false;

//add the button, then the UITableViewCell to the View
View.AddSubviews(systolicWell, systolicDisclosure);

//using FluentLayout https://github.com/slodge/Cirrious.FluentLayout
View.SubviewsDoNotTranslateAutoresizingMaskIntoConstraints();

View.AddConstraints(
                systolicWell.AtTopOf(View).Plus(5),
                systolicWell.Width().EqualTo().WidthOf(View),
                systolicWell.Height().EqualTo(10),

                systolicDisclosure.WithSameTop(systolicWell),
                systolicDisclosure.WithSameWidth(systolicWell),
                systolicDisclosure.WithSameHeight(systolicWell)); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-19T12:42:08.383

斯威夫特3 / 斯威夫特4：

按钮的披露指示器

```
 let disclosureIndicator = UITableViewCell(style: .value1, 
        reuseIdentifier: nil)
        let theWidth = UIScreen.main.bounds.width
        let theHeight = yourButton.frame.height
        yourButton.frame = CGRect(0,0, theWidth, theHeight)
        disclosureIndicator.textLabel?.text = "title"
        disclosureIndicator.detailTextLabel?.textColor = .black
        disclosureIndicator.detailTextLabel?.text = "subtitle"
        disclosureIndicator.accessoryType = .disclosureIndicator
        disclosureIndicator.isUserInteractionEnabled = false
        disclosureIndicator.frame = yourButton.bounds

        yourButton.addSubview(disclosureIndicator) 
```

为 CGRect 添加这个扩展

```
extension CGRect {
    init(_ x:CGFloat, _ y:CGFloat, _ w:CGFloat, _ h:CGFloat) {
        self.init(x:x, y:y, width:w, height:h)
    }
} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-12-12T10:36:52.687

您可以在 UITableViewCell 的右侧添加任何自定义图像，只需一行代码：

尝试这个：

```
-(UITableViewCell *)tableView:(UITableView *)tableView 
cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.accessoryView = [[UIImageView alloc]initWithImage:
    [UIImage imageNamed:@"blueButton.png"]];
} 
```

# culture - Telerik RadDatePicker 文化

> ID：13836626
> 
> 赞同：0
> 
> 时间：2012-12-12T09:28:29.990
> 
> 标签：culture, raddatepicker

我有一个简单的 Telerik：RadDatePicker。

```
<telerik:RadDatePicker ID="dpDueDate" runat="server"  Culture="English (United States)" Width="180px" BorderStyle="None">
     <DateInput DateFormat="d-MMM-yyyy" DisplayDateFormat="d-MMM-yyyy" DisabledStyle-ForeColor="#505050" Enabled="false"/>
</telerik:RadDatePicker> 
```

当我调试我的 Web 应用程序时，我看到 dpDueDate.SelectedDate 具有美国格式（12/05/2012），但是当我打开 Firebug 时，我看到：

```
<input ... value="2012-12-05"> 
```

我已经指定 Culture="English (United States)"，我也尝试过 Culture="en-US"，我在 PageLoad 事件中设置了 RadDatePicker 的文化。它没有帮助。我需要用 JS 获取 RadDatePicker 值并与我之前在服务器端获得的值进行比较（这意味着我的服务器端值是 12/05/2012 而 JS 值是 2012-12-05）。如何使 RadDatePicker 具有像 MM/dd/yyyy 这样的值格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:40:16.963

我找到了解决方案。我取 RadDatePicker 值，创建一个 Date 类型的变量（var date = new Date(DatePicker value)），然后将其转换为

```
var convertedDate = date.format('MM/dd/yyy'); 
```

# assembly - bsr 和 bsf 产生相同的结果

> ID：13836627
> 
> 赞同：1
> 
> 时间：2012-12-12T09:28:29.647
> 
> 标签：assembly, x86

以下测试在两种情况下都会产生相同的数字序列：

```
#include <iostream>
#define BIT_SCAN_IFZERO 0

inline size_t bsr(size_t input) {
    size_t pos, ifzero = BIT_SCAN_IFZERO;
    __asm 
    { 
        bsr eax, input
        cmovz eax,ifzero
        mov pos,eax
    };
    return pos;
}

inline size_t bsf(size_t input) {
    size_t pos, ifzero = BIT_SCAN_IFZERO;
    __asm 
    { 
        bsf eax, input
        cmovz eax,ifzero
        mov pos,eax
    };
    return pos;
}

int main()
{ 
    size_t value = 1;

    for(int i=0;i<32;++i)
    {
        std::cout<<bsf(value)<<",";
        value<<=1;
    }
    std::cout<<std::endl;
    value = 1;
    for(int i=0;i<32;++i)
    {
        std::cout<<bsr(value)<<",";
        value<<=1;
    }
    return 0;
} 
```

在这两种情况下，0 到 31 都以相同的顺序打印。

bsf(x) 不应该产生 32-bsr(x) 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:59:11.697

不会。如果源中只设置了一位，这是正常行为。如果它就像你认为结果不会很有用。因为它为您提供了相同的基于零的索引，所以很清楚哪个位适用于两个命令。

[http://courses.engr.illinois.edu/ece390/archive/spr2002/books/labmanual/inst-ref-bsf.html](http://courses.engr.illinois.edu/ece390/archive/spr2002/books/labmanual/inst-ref-bsf.html)

唯一的区别是搜索方向，但该命令将为您转换索引。

# ios - 如何从主项目调试 .framework 源代码？

> ID：13836628
> 
> 赞同：5
> 
> 时间：2012-12-12T09:28:30.037
> 
> 标签：ios, xcode

我的主项目中有一个使用 xcode 4.5.2 的子项目。子项目产生 .framework 库。子项目嵌入在主项目中。我还定义了在哪里寻找子项目头（框架头）的项目头。子项目构建目标设置为调试。但我仍然无法在子项目中进入断点。我发现了一些东西，但它是从 2006 年 xcode 不同时开始的。我想不通。 [http://www.idevgames.com/forums/thread-3985.html](http://www.idevgames.com/forums/thread-3985.html)

有谁知道如何配置 xcode 以便使用它来调试 .framwork 库？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-29T11:39:35.640

如果您有源代码，实际上有一种方法可以调试使用 .framework 的 iOS 项目。这在 xcode 4.6 中对我有用。

您可以通过以下方式进行：

1.  在 .framework 的源代码中插入断点。
2.  编译使用该框架的项目并在您的设备（iPhone、iPad 等）上运行它。此步骤只是为了确保您在设备上安装了最新的项目。
3.  停止在您的设备上运行的进程并转到 xcode -> product -> Attach to process -> *YourApp*。在 xcode 6 中，“附加到进程”位于“调试”菜单下。

如果您在此处列出的应用程序中没有看到您的应用程序的名称，请转到“按进程标识符 (PID) 或名称...”并输入应用程序的名称。现在，如果您要在您的设备中运行该应用程序，它应该会中断已启用的断点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T11:18:49.187

没有办法调试.framework。我已更改我的子项目以生成带有公共和私有标头的静态库。

# javascript - jQuery - 将所有未包装的文本包装在 p 标签中

> ID：13836633
> 
> 赞同：5
> 
> 时间：2012-12-12T09:29:15.603
> 
> 标签：javascript, jquery

我遇到以下代码被写入我的页面的情况。

```
<div>
    Some text here which is not wrapped in tags
    <p>Some more text which is fine</p>
    <p>Blah blah another good line</p>
</div> 
```

在这种情况下，它似乎总是第一行没有被包裹在 p 标签中，这可能会使解决方案更容易，尽管并非每次都如此。有时它很好。

我需要做的是确定第一行是否被换行，如果没有，则换行。

不幸的是，我不确定从哪里开始解决这个问题，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:12:00.153

给你：http: [//jsfiddle.net/RNt6A/](http://jsfiddle.net/RNt6A/)

```
$('div').wrapInner('<p></p>');​​​​
$('div p > p').detach().insertAfter('div p'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T09:37:59.283

尝试使用此代码来包装任何未用`<p>`标签包装的 TextNode。

```
function getTextNodesIn(node, includeWhitespaceNodes) {
    var textNodes = [], whitespace = /^\s*$/;

    function getTextNodes(node) {
        if (node.nodeType == 3) {
            if (includeWhitespaceNodes || !whitespace.test(node.nodeValue)) {
                textNodes.push(node);
            }
        } else {
            for (var i = 0, len = node.childNodes.length; i < len; ++i) {
                getTextNodes(node.childNodes[i]);
            }
        }
    }

    getTextNodes(node);
    return textNodes;
    }

    var textnodes = getTextNodesIn($("#demo")[0])​​​​;
    for(var i=0; i < textnodes.length; i++){
        if($(textnodes[i]).parent().is("#demo")){
            $(textnodes[i]).wrap("<p>");
        }
    }​ 
```

这是一个[jsfiddle](http://jsfiddle.net/reWXX/2/)，它显示了这一点。

PS：TextNode检测部分已借用[this answer](https://stackoverflow.com/a/4399718/205997)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T10:05:00.233

尝试这个 ：-

```
<div class="container">
Some text here which is not wrapped in tags
<p>Some more text which is fine</p>
<p>Blah blah another good line</p>
</div>​ 
```

JS

```
 $(function(){
    var $temp = $('<div>');
    $('div.container p').each(function(){
            $(this).appendTo($temp);            
    });     

    if($.trim( $('div.container').html() ).length){
       var $pTag = $('<p>').html($('.container').html()); 
        $('div.container').html($pTag);
    }

    $('div.container').append($temp.html());
});
​ 
```

这是工作示例：-

[http://jsfiddle.net/dhMSN/12](http://jsfiddle.net/dhMSN/12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:57:11.720

jQuery[不擅长处理文本节点](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)，因此您需要对此进行一些直接的 DOM 操作。这也使用了[“修剪”功能。](https://stackoverflow.com/a/498995). 它在[jsfiddle](http://jsfiddle.net/jNVF9/)上。

```
var d = $("div")[0];

for(var i=0; i<d.childNodes.length; i++) {
    if(d.childNodes[i].nodeType === 3 &&
       d.childNodes[i].textContent.replace(/^\s+|\s+$/g, "")) {
        wrapNode(d.childNodes[i]);
    }
}

function wrapNode(node) {
    $(node).replaceWith("<h1>" + node.textContent + "</h1>");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-06T07:11:52.647

遇到类似的需求并尝试使用@Arash_Milani 解决方案。解决方案有效，但是当页面还需要进行 ajax 调用时，我遇到了冲突。

经过一番挖掘，我在 api.jquery.com 上找到了一个相当直接的解决方案，使用`.contents()`方法：

```
$('.wrapper').contents().filter(function() {
  return this.nodeType === 3;
}).wrap('<p class="fixed"></p>').end();
```

```
p.good {
  color: #09f;
}
p.fixed {
  color: #ff0000;
  text-align: center;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div class="wrapper">
  Some plain text not wrapped in any html element.
  <p class="good">This text is properly wrapped in a paragraph element.</p>
</div>
```

# asp.net - 检测 Internet Explorer 浏览器版本问题

> ID：13836636
> 
> 赞同：4
> 
> 时间：2012-12-12T09:29:24.747
> 
> 标签：asp.net, asp.net-mvc-3

我在 Layout 的 MVC3 应用程序中有 Getaway：

```
@if ((Request.Browser.Browser == "IE") && ((Request.Browser.MajorVersion == 7)))
{
//show some content
}
else
{
//show another content 
} 
```

我有很多用户抱怨（使用 Internet Explorer 8 的用户）。他们从我的应用程序中看到 Internet Explorer 7 内容。我检测 Internet Explorer 7 版本的方式有什么问题？如何在我的应用程序中 100% 确定用户拥有 Internet Explorer 7 版本？可能这是特定的操作系统问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T10:01:48.193

问题是[HttpBrowserCapabilities](http://msdn.microsoft.com/en-us/library/system.web.httpbrowsercapabilities.aspx) aka`Request.Browser`类解析`userAgent`请求的标头，其中包含有关客户端（在您的情况下为浏览器）的信息，由于用户代理很容易更改，因此可能并不总是 100% 可靠。

如果您知道`MajorVersion`返回的是什么值并且它足够一致，那么您可以对其进行修复。或者，您可以尝试检查低于 IE8 的浏览器（同样，不是 100%），例如

```
@if ((Request.Browser.Browser == "IE") && ((Request.Browser.MajorVersion < 8)))
{
    //show IE7 content
}
else
{
    //show IE8+ content 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T10:29:51.597

版本号需要特定于 IE。

```
 if (Request.Browser.Browser == "IE" && Request.Browser.Version == "7.0") 
        { 
          //Show IE 7 content
        }
 else
  {
     // Show other than IE7 content
  } 
```

# windows-8 - Windows 8 WiFi Direct 上的文件传输

> ID：13836637
> 
> 赞同：1
> 
> 时间：2012-12-12T09:29:25.963
> 
> 标签：windows-8

我在 Windows 8 上学习并尝试通过 WiFi Direct 创建一个用于在 2 台 PC 之间传输文件的应用程序。现在我可以让应用在两台电脑之间发送文本。

发短讯：

```
private async void SendText()
{
    string msg = SendMessageTextBox.Text;

    if (msg.Length > 0)
    {
        var msgLength = dataWriter.MeasureString(msg);
        dataWriter.WriteInt32(msg.Length);
        dataWriter.WriteString(msg);
        try
        {
            await dataWriter.StoreAsync();
            Debug.WriteLine("Send Message >>: " + msg + "\n");
        }
        catch (Exception exc)
        {
            Debug.WriteLine("Send error: " + exc.Message + "\n");
        }
    }
} 
```

接收文本：

```
private async void ReceiveText(StreamSocket socket, DataReader reader)
{        
    uint initialLength = 5;

    try
    {
        await reader.LoadAsync(initialLength);
        uint msgLength = (uint)reader.ReadInt32();

        try
        {
            await reader.LoadAsync(msgLength);
            string message = reader.ReadString(msgLength);
            Debug.WriteLine(currentTime + " <<: " + message + "\n"); 

            ReceiveText(socket, reader);
        }
        catch (Exception exc)
        {
            Debug.WriteLine("Error: " + exc.Message + "\n");
            socket.Dispose();
        }
    }
    catch (Exception exc)
    {
        Debug.WriteLine("Error: " + exc.Message + "\n");
        socket.Dispose();
    }
} 
```

但是我真的很困惑如何转换和传输文件，我花了很多时间在上面......

我知道 DataReader 和 DataWriter 类中有一些方法：

```
...
public IBuffer ReadBuffer(uint length);
public void ReadBytes(byte[] value);
public static DataReader FromBuffer(IBuffer buffer);
...
public void WriteBytes(byte[] value);
public void WriteBuffer(IBuffer buffer, uint start, uint count);
... 
```

但是如何将文件转换为流以及使用什么方法来发送和接收呢？

我尽力了，但总是失败，真的让我画画……

有人给我一些指导吗？还是小样本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T15:22:55.450

这是一篇文章（包括您可以重复使用的库），可帮助您在 2 个 Windows 8 对等方之间使用 Wifi-Direct 传输文件：http: [//blogs.msdn.com/b/stephe/archive/2013/12/11/win8 -1-transfering-a-file-between-2-peers-using-wifi-direct-and-proximity-api.aspx](http://blogs.msdn.com/b/stephe/archive/2013/12/11/win8-1-transfering-a-file-between-2-peers-using-wifi-direct-and-proximity-api.aspx)

希望能帮助到你

# macos - matlab上的winopen for mac

> ID：13836638
> 
> 赞同：2
> 
> 时间：2012-12-12T09:29:28.577
> 
> 标签：macos, matlab, interop

有没有办法`winopen`在 matlab 2010a for mac 上使用或类似的功能？我正在尝试在标准浏览器上打开一个 html 文件。

```
winopen('myFile.html') 
```

在使用不同 matlab 版本的 windows 上工作正常，但在 mac 上不行。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:13:12.700

尝试这个：

```
system(['open myFile.html']); 
```

来自[http://www.mathworks.com/matlabcentral/fileexchange/25080-macopen](http://www.mathworks.com/matlabcentral/fileexchange/25080-macopen)

..或者

```
system(['open -a Safari myFile.html']); 
```

从命令行[使用 URL 打开 Safari 并获取进程句柄](https://stackoverflow.com/q/12150569/708221)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T07:32:44.400

尝试这个：

```
unix('open myFile.html') 
```

# java - 如何在不损失图像边缘质量的情况下旋转 ImageView

> ID：13836639
> 
> 赞同：1
> 
> 时间：2012-12-12T09:29:29.910
> 
> 标签：java, android, image, graphics, android-canvas

![在此处输入图像描述](../Images/5452c165121a4e6e4b8747a0816703f5.png)

```
I created two linearlayout with rotation and  then I placed the imageview in it ...
If the app loads and imageview displayed the edges of images in imageview look like this 
How can i get the imageview with proper edges. 
```

以下是我的 xml 内容：

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dip"
        android:layout_marginTop="220dp"
        android:background="@drawable/mainscreen_imageframe"
        android:gravity="center"
        android:rotation="-8" >

        <ImageView
            android:id="@+id/imgBride"
            android:layout_width="150dip"
            android:layout_height="132dp"
            android:layout_marginBottom="15dip"
            android:adjustViewBounds="true"
            android:contentDescription="@string/app_name"
            android:scaleType="fitXY"
            android:background="@drawable/noimage" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="-47dip"
        android:layout_marginTop="210dp"
        android:background="@drawable/mainscreen_imageframe"
        android:gravity="center"
        android:rotation="9" >

        <ImageView
            android:id="@+id/imgGroom"
            android:layout_width="150dp"
            android:layout_height="132dp"
            android:layout_marginBottom="15dip"
            android:adjustViewBounds="true"
            android:contentDescription="@string/app_name"
            android:scaleType="fitXY"
            android:src="@drawable/noimage" />
    </LinearLayout>
</LinearLayout> 
```

朋友们帮我解决这个问题......如何在旋转中获得正确的图像边缘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:01:43.527

尝试使用 9 补丁工具将其制作为 9 补丁图像。它将使图像可拉伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:05:22.927

将此添加到您的 xml 中的 imageviews

```
android:antialias="true" 
```

# javascript - 在选择框jquery中选择选项和过滤值

> ID：13836644
> 
> 赞同：7
> 
> 时间：2012-12-12T09:30:05.783
> 
> 标签：javascript, jquery

我的问题是当我在任何一个选择框中选择一个选项，然后在另一个选择框中选择另一个选项时，值会自动更改。我该如何解决这个问题。我想根据我的选择过滤值并将其显示在表格中而不使用插件。

```
Here is my code: 
```

[http://jsfiddle.net/pW6P6/4/](http://jsfiddle.net/pW6P6/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:33:09.223

我将您的排序功能合并为一个功能。

即，fxnSelectYear、fxnSelectMake、fxnSelectModel、fxnSelectSubModel 到**fxnUpdateGrid**

如果您可以将您的 fxnReLoading.. 功能合并为**一个**，那就更好了。

[演示](http://jsbin.com/atutoy/2/)

希望这可以帮助。随时问我问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:06:30.890

如果你想保存你的逻辑。您可以在删除每个选项之前保存选定的值，并在重新初始化您的选择值后选择它：

[http://jsfiddle.net/pW6P6/9/](http://jsfiddle.net/pW6P6/9/)

```
var selected = $('#DropDown_Year option:selected').val();
$('#DropDown_Year option[value]').remove();
iHtmlYear = fxnOptions(g_YearsArray);
$('#DropDown_Year').append(iHtmlYear);
$("#DropDown_Year option[value=" + selected + "]").attr("selected", true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:20:39.317

哇，这么小任务的代码太多了……

无论如何，在您的每个“更改功能”中，您都在重新加载其他过滤器选择。这就是为什么选择框被重置

例如：

```
fxnSelectMake = function () {
    $('#tableID tr').remove();
    g_newRows = "";
    $.each(g_Vehicle, function (index) {
        if (g_Vehicle[index].Make == $('#DropDown_Make').val()) {
            fxnCreateRow(g_Vehicle, index);
        }
    });
    $('#tableID').append(g_newRows);
    fxnReLoadingModelFilters();         // <-- this is what i mean
    fxnReLoadingSubModelFilters();      // <-- and this
    fxnReLoadingYearFilters();          // <-- and this

}, 
```

但这只是第一部分。你的主要问题是这段代码：

```
$.each(g_Vehicle, function (index) {
  if (g_Vehicle[index].Make == $('#DropDown_Make').val()) {
    fxnCreateRow(g_Vehicle, index);
  }
}); 
```

您的 g_Vehicle-Object 仍然是 TOTAL 对象，您只是在检查当前选择的值（不是年份等）

我编写了一个函数“isInIndex”，它检查所有 4 个当前选定值，并且仅在当前车辆行对所有 4 个选择框都有效时才返回 true：

```
isInIndex = function(vehicle) {
  return ($("#DropDown_Year").prop("selectedIndex") === 0 || vehicle.Year === $('#DropDown_Year').val()) &&
      ($("#DropDown_Make").prop("selectedIndex") === 0 || vehicle.Make === $('#DropDown_Make').val()) &&
      ($("#DropDown_Model").prop("selectedIndex") === 0 || vehicle.Model === $('#DropDown_Model').val()) &&
      ($("#DropDown_SubModel").prop("selectedIndex") === 0 || vehicle.SubModel === $('#DropDown_SubModel').val())
} 
```

然后我在您的每个“更改功能”中调用此功能：

```
$.each(g_Vehicle, function (index) {
  if (isInIndex(g_Vehicle[index])) {
    fxnCreateRow(g_Vehicle, index);
  }
}); 
```

更新和工作小提琴在这里：http: [//jsfiddle.net/pW6P6/10/](http://jsfiddle.net/pW6P6/10/)

编辑：您的代码中可能有很多优化可能性，其中之一是您应该将 jQuery-Objects 保存到变量中，并使用它们：

例如：

```
var $dropDownMake = $('#DropDown_Make');

// and later
$dropDownMake.val() 
```

# git - 如何从跟踪分支合并而不命名分支？

> ID：13836647
> 
> 赞同：1
> 
> 时间：2012-12-12T09:30:11.510
> 
> 标签：git, branch

我通常像这样更新我的本地分支：

```
$ git fetch

$ git status
# On branch develop
# Your branch is behind 'origin/develop' by 1 commit, and can be fast-forwarded.
#
nothing to commit (working directory clean)

$ git merge --ff-only origin/develop 
```

有没有在不命名远程分支的情况下编写最后一个命令？从 git status 可以看出，git 知道当前分支正在跟踪 origin/develop。所以我正在寻找类似的东西：

```
$ git merge tracking 
```

这样做的原因是在来回切换时很容易输入错误的分支（你可以看到我`--ff-only`在这里用作安全防护）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:39:17.900

将选项设置`merge.defaultToUpstream`为 true：

```
git config merge.defaultToUpstream true 
```

并且您可以省略要合并的提交：

```
git merge --ff-only 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:09:05.737

您可以使用`develop@{upstream}`或简称`develop@{u}`来指代设置为您的分支上游的`develop`分支。如果在它之前没有提供分支名称`@`，它将默认使用当前分支，所以当你在那个分支上时，你可以只使用`@{u}`.

这些类型的引用将适用于其他命令以及合并，例如，您可以获得将通过命令合并应用的提交列表：

```
git log ..@{u} 
```

这记录在[git rev-parse](http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)的手册页中，在关于**指定修订**的部分中。

# java - 复数类

> ID：13836648
> 
> 赞同：0
> 
> 时间：2012-12-12T09:30:12.500
> 
> 标签：java, c++, python

我有一个作业到期，但我无法理解该作业真正要求我做什么，或者如何去做。我知道复数是什么，但我不明白 C++ 和 Python 版本的以下操作应该做什么：

```
op: Complex × Complex → Complex 
op: Complex × double → Complex 
op: double × Complex → Complex 
```

双倍的？我不明白 double 是从哪里来的。python版本也应该将复合体转换为字符串，我还是不明白它在问什么。是说将复数（整数？）字面转换为字符串数据类型吗？请让我知道您是否可以尝试帮助我理解作业的要求，以便我可以尝试对其进行编程。

> 复数类
> 
> 用 C++、Java 和 Python 设计一个表示复数并支持加法、减法、乘法和除法等重要运算的类。对于 C++ 和 Python 版本，您需要为每个操作实现以下函数：
> 
> ```
> op: Complex × Complex → Complex
> op: Complex × double → Complex  op:
> double × Complex → Complex 
> ```
> 
> 其中 op 是 +、-、* 或 / 之一。此外，您将需要重载流插入运算符 << 以打印此类型的对象。必须定义构造函数并重载赋值运算符以允许从双精度数到复杂的隐式转换。还应包括您认为合适的任何其他方法。你的课程越完整越好。
> 
> Java 版本将没有那么多方法，因为 Java 不允许运算符重载或友元函数。同样，Java 类越完整越好。覆盖 toString() 方法。
> 
> Python 版本还应该包含用于从复合体转换为字符串的函数。
> 
> 该项目所需的文件是：包含复杂类声明的 complex.h 文件，包含复杂类中声明的方法和函数的实现的 complex.cc 文件，实例化复数的 main.cc 和测试所有方法和函数、一个作为 Java 实现的 Complex.java 文件，以及一个实例化和测试 Complex 类的所有方法的 Main.java 文件。所需的 python 文件是一个 complex.py 文件。

他为我们提供了以下代码：

```
/*
 *
 *  Java version
 *
 */

/* Main.java */

public class Main {

    public static void main(String[] args) {

        Rational a = new Rational(1, 2);
        Rational b = new Rational(2, 3);

        int i = 5;

        System.out.println(a + " + " + b + " = " + a.add(b));
        System.out.println(a + " - " + b + " = " + a.sub(b));
        System.out.println(a + " * " + b + " = " + a.mul(b));
        System.out.println(a + " / " + b + " = " + a.div(b));

        System.out.println(a + " + " + i + " = " + a.add(i));
        System.out.println(a + " - " + i + " = " + a.sub(i));
        System.out.println(a + " * " + i + " = " + a.mul(i));
        System.out.println(a + " / " + i + " = " + a.div(i));
    }
}

/* Rational.java */

public class Rational {

    public Rational() {

        this(0);
    }

    public Rational(int num) {

        this(num, 1);
    }

    public Rational(int num, int den) {

        this.num = num;
        this.den = den;
    }

    public Rational add(Rational o) {

        return new Rational(num * o.den + o.num * den, den * o.den);
    }

    public Rational add(int n) {

        return new Rational(num + n * den, den);
    }

    public Rational div(Rational o) {

        return new Rational(num * o.den, den * o.num);
    }

    public Rational div(int n) {

        return new Rational(num, den * n);
    }

    public Rational mul(Rational o) {

        return new Rational(num * o.num, den * o.den);
    }

    public Rational mul(int n) {

        return new Rational(num * n, den);
    }

    public Rational sub(Rational o) {

        return new Rational(num * o.den - o.num * den, den * o.den);
    }

    public Rational sub(int n) {

        return new Rational(num - n * den, den);
    }

    public String toString() {

        return "(" + num + " / " + den + ")";
    }

    private int den;
    private int num;
}

/*
 *
 *  C++ version
 *
 */

/* rational.h */

#ifndef RATIONAL_H
#define RATIONAL_H

#include <iostream>

using std::ostream;

struct rational {

    rational(int = 0, int = 1);

    rational operator+(const rational &) const;
    rational operator-(const rational &) const;
    rational operator*(const rational &) const;
    rational operator/(const rational &) const;

    rational operator+(int) const;
    rational operator-(int) const;
    rational operator*(int) const;
    rational operator/(int) const;

    friend rational operator+(int, const rational &);
    friend rational operator-(int, const rational &);
    friend rational operator*(int, const rational &);
    friend rational operator/(int, const rational &);

    friend ostream &operator<<(ostream &, const rational &);

private:

    int den;
    int num;
};

#endif /* RATIONAL_H */

/* rational.cc */

#include <iostream>
#include "rational.h"

rational::rational(int num, int den) : num(num), den(den) {}

rational rational::operator+(const rational &o) const {

    return rational(num * o.den + o.num * den, den * o.den);
}

rational rational::operator+(int n) const {

    return rational(num + n * den, den);
}

rational rational::operator-(const rational &o) const {

    return rational(num * o.den - o.num * den, den * o.den);
}

rational rational::operator-(int n) const {

    return rational(num - n * den, den);
}

rational rational::operator*(const rational &o) const {

    return rational(num * o.num, den * o.den);
}

rational rational::operator*(int n) const {

    return rational(num * n, den);
}

rational rational::operator/(const rational &o) const {

    return rational(num * o.den, den * o.num);
}

rational rational::operator/(int n) const {

    return rational(num, den * n);
}

rational operator+(int n, const rational &o) {

    return o + n;
}

rational operator-(int n, const rational &o) {

    return rational(n) - o;
}

rational operator*(int n, const rational &o) {

    return o * n;
}

rational operator/(int n, const rational &o) {

    return rational(n) / o;
}

ostream &operator<<(ostream &out, const rational &o) {

    out << '(' << o.num << " / " << o.den << ')';
    return out;
}

/* main.cc */

#include <iostream>
#include "rational.h"

using std::cout;
using std::endl;

int main(void) {

    rational a(1, 2);
    rational b(2, 3);

    int i = 5;

    cout << a << " + " << b << " = " << a + b << endl;
    cout << a << " - " << b << " = " << a - b << endl;
    cout << a << " * " << b << " = " << a * b << endl;
    cout << a << " / " << b << " = " << a / b << endl;

    cout << a << " + " << i << " = " << a + i << endl;
    cout << a << " - " << i << " = " << a - i << endl;
    cout << a << " * " << i << " = " << a * i << endl;
    cout << a << " / " << i << " = " << a / i << endl;

    cout << i << " + " << a << " = " << i + a << endl;
    cout << i << " - " << a << " = " << i - a << endl;
    cout << i << " * " << a << " = " << i * a << endl;
    cout << i << " / " << a << " = " << i / a << endl;

    return 0;
}

#
#
# Python version
#
#

class rational:
    def __init__(self, num=0, den=1):
        self.num = num
        self.den = den

    def __add__(self, other):
        if isinstance(other, int):
            return rational(self.num + other * self.den, self.den)
        elif isinstance(other, rational):
            return rational(self.num * other.den + other.num * self.den, self.den * other.den)
        else:
            raise TypeError

    def __truediv__(self, other):
        if isinstance(other, int):
            return rational(self.num, self.den * other)
        elif isinstance(other, rational):
            return rational(self.num * other.den, self.den * other.num)
        else:
            raise TypeError

    def __float__(self):
        return float(self.num) / self.den

    def __int__(self):
        return self.num / self.den

    def __mul__(self, other):
        if isinstance(other, int):
            return rational(self.num * other, self.den)
        elif isinstance(other, rational):
            return rational(self.num * other.num, self.den * other.den)
        else:
            raise TypeError

    def __radd__(self, other):
        return self + other

    def __rtruediv__(self, other):
        return rational(other) / self

    def __rmul__(self, other):
        return self * other

    def __rsub__(self, other):
        return rational(other) - self

    def __str__(self):
        return '(' + str(self.num) + ' / ' + str(self.den) + ')'

    def __sub__(self, other):
        if isinstance(other, int):
            return rational(self.num - other * self.den, self.den)
        elif isinstance(other, rational):
            return rational(self.num * other.den - other.num * self.den, self.den * other.den)
        else:
            raise TypeError

if __name__ == '__main__':

    a = rational(1, 2)
    b = rational(2, 3)

    i = 5

    print('%s + %s = %s' % (a, b, a + b))
    print('%s - %s = %s' % (a, b, a - b))
    print('%s * %s = %s' % (a, b, a * b))
    print('%s / %s = %s' % (a, b, a / b))

    print('%s + %i = %s' % (a, i, a + i))
    print('%s - %i = %s' % (a, i, a - i))
    print('%s * %i = %s' % (a, i, a * i))
    print('%s / %i = %s' % (a, i, a / i))

    print('%i + %s = %s' % (i, a, i + a))
    print('%i - %s = %s' % (i, a, i - a))
    print('%i * %s = %s' % (i, a, i * a))
    print('%i / %s = %s' % (i, a, i / a)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:37:12.357

转换为字符串只是为了以人类可读的形式显示数字。那是在理性类中：`return "(" + num + " / " + den + ")";`例如打印`(5 / 8)`。您的复杂类可以使 toString 方法输出`( 5 + 8i )`

将一个复数乘以一个数字（双精度）是一个有效的运算，它会给出另一个复数作为结果。

将复数乘以实数：

```
(x + yi) u = xu + yu i. 
```

使用他给出的代码，您可以完成完全相同的有理数分配（定义为两个数字 num 和 den）。您需要将该代码调整为复数，这些复数也被定义为几个数字。

PS提示：[http ://www.clarku.edu/~djoyce/complex/mult.html](http://www.clarku.edu/~djoyce/complex/mult.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:38:30.150

> 我不明白 double 是从哪里来的。

我会假设它是一个普通的`double`浮点值而不是一个复杂的值。

> python版本也应该将复合体转换为字符串，我还是不明白它在问什么。

我假设，使用 String 而不是名为 Complex 的自定义类。

> 是说将复数（整数？）字面转换为字符串数据类型吗？

我会假设是这样，除非你知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:39:41.897

复数包含实部和虚部，两者都存储为双精度数。既然您说您已经知道这些，我不会详细介绍，但是快速 google 会发现您几乎要使用的复数类的许多 Java 实现。

[http://introcs.cs.princeton.edu/java/97data/Complex.java.html](http://introcs.cs.princeton.edu/java/97data/Complex.java.html)

是我以前用过的一个例子，它符合你的要求：

```
public Complex times(Complex b)
public Complex times(double alpha) 
```

这些方法将采用复数或 alpha 应用于实部和虚部，并返回一个复数。

至于 python 字符串部分，我认为他希望你取实部和虚部，并以某种人类可读的形式表达它们：字符串

希望我能帮助 md_5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T20:46:05.717

当作业说

> op：复数 × 复数 → 复数 op：复数 × 双 → 复数 op：双数 × 复数 → 复数 其中 op 是 +、-、* 或 / 之一。

这意味着您必须在复数对之间以及实数和复数的混合对之间实现所有二进制运算。例如对于

*：复数×双→复数

你应该写这样的东西：

```
Complex operator*(Complex z, double t) {
  return Complex(t * z.Real(), t * z.Imag()); 
} 
```

# java - 如何在我的应用程序中获取 facebook 的用户连接？

> ID：13836651
> 
> 赞同：2
> 
> 时间：2012-12-12T09:30:23.647
> 
> 标签：java, android, facebook, sdk, smartphone

我的设备有 Facebook 应用程序，如果用户已经通过 Facebook 应用程序识别了自己，我希望它不会再次通过我的应用程序完成（仅权利要求）。我在网上搜索但没有成功，使用 Facebook SDK 的示例总是询问身份。

我知道这在 iOs 下是可能的。是在安卓下吗？如果是，我该如何管理？

谢谢。

（感谢邹邹翻译）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:24:47.880

我的错，这个问题已经过时了。

事实上，在 facebook SDK 的第 3 版中，它可以有效地管理。

只需严格遵循“如何”： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

玩得开心。

# .net - 使用正则表达式匹配结果字符串

> ID：13836657
> 
> 赞同：0
> 
> 时间：2012-12-12T09:30:36.713
> 
> 标签：.net, regex

我有一个字符串`00408-B193AQ-P-DW-11045`，它是管道的标签。使用 regex 我只想匹配`B193AQ-DW-11045`.Using 全局选项我能够使用 regex 获得所需的`[A-Z][0-9a-zA-Z][^P]+`。但是我们的系统支持忽略大小写（不是全局的）。所以忽略大小写需要一个正则表达式来给出所需的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:14:26.430

如果您以编程方式进行检查，您可以分成命名组：

```
(?'index'[\d]{5})-(?'index1'[0-9a-zA-Z]{6})-(?'index3'[A-Z])-(?'index4'[A-Z]{2})-(?'index5'[0-9]{5}) 
```

回报：

```
index: 00408
index1: B193AQ
index3: P
index4: DW
index5: 11045 
```

如果只是检查某些部分是否匹配，请尝试使用此模式：

```
.{5}-([0-9a-zA-Z]{6})-.-([A-Z]{2})-([0-9]{5}) 
```

这里 '。' （点）表示任何字符

# android - 如何清除从其他活动中获得的捆绑价值......？

> ID：13836660
> 
> 赞同：2
> 
> 时间：2012-12-12T09:30:44.047
> 
> 标签：android, android-activity, bundle

// 这是我的主要活动

```
@Override
    protected void onResume() {
        super.onResume();
        System.out.println("onResume()");

        // getting the value form some other class(checking one the activity is started)
        try {
            bundle = getIntent().getExtras();
            myFlag = bundle.getBoolean("KEY");
        } catch (Exception e) {
            System.out.println(".......Error.......");
        }
} 
```

我正在设置 myFlag=true，我的问题是当我改变方向（即重新启动活动）时，我想要 myFlag = false，但它仍然是真的......意味着我想在方向改变后清除捆绑值。我在 onDestroy() 方法中尝试了 bundle.clear() 和 bundle.remove("KEY") ，但没有工作。

这个我已经用了。。

```
@Override
    protected void onDestroy() {
        super.onDestroy();
        System.out.println("onDestroy()");
        if(bundle!=null) {
            bundle.clear();
                        // i also use the below statement
                       // bundle.remove("KEY");
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:56:08.607

看到这个，你可以有一个想法

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            if (savedInstanceState.getBoolean("activity_restarting")) {
                // activity is restarting... Don't check mFlag..for that do something something here :)
            }
        }

    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {

        super.onSaveInstanceState(outState);

        outState.putBoolean("activity_restarting", true);

    } 
```

我希望你现在可以处理

# html - 将图像上传到 PHONEGAP 中的服务器花费的时间太长

> ID：13836663
> 
> 赞同：0
> 
> 时间：2012-12-12T09:30:48.677
> 
> 标签：html, cordova, jquery-mobile

我是phonegap的新手。在我的应用程序中，我正在尝试将照片上传为个人资料图片，并将其存储在服务器中。每当我上传图片时，它都会被上传，但是当我点击保存选项时，需要一些时间才能完成该过程并导航到其他页面。我该如何解决这个问题？是否有任何特定的解决方案可以压缩图像并上传到服务器而不会失去其清晰度？我用它来上传图片：[http ://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html#Camera](http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html#Camera)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:42:02.983

Phonegap 允许您在检索图片时指定质量级别，这将显着影响您必须上传的文件的大小

```
navigator.camera.getPicture(onSuccess, onFail, { quality: 50 }); 
```

另一种解决方案是在发送图片之前使用 HTML5 画布调整图片大小（关于该主题的许多参考资料，例如一个非常详细的参考资料，[此处](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)可以完全控制重新采样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T12:57:22.880

在阅读了几个答案后，对我有用的解决方案是将这一行添加到相机的选项中：

```
correctOrientation : true 
```

这是我的代码：

```
navigator.camera.getPicture(onSuccessPhoto, onFailPhoto, {
    quality: 20,
    targetWidth: 512,
    targetHeight: 512,
    destinationType: Camera.DestinationType.FILE_URL,
    correctOrientation : true
}); 
```

# asp.net-mvc-4 - MVC4 MEF 插件和控制器命名空间

> ID：13836673
> 
> 赞同：8
> 
> 时间：2012-12-12T09:31:50.337
> 
> 标签：asp.net-mvc-4, mef, autofac, asp.net-mvc-areas

我正在尝试使用许多插件创建一个 MVC4 Web 应用程序，即本质上是通过 MEF 导出的控制器以及解压缩到其适当位置的内容文件。我找到了很多关于 MVC 插件的资料，主要与领域相关，但我不得不放弃 MvcContrib，这将是最明显的解决方案，因为它似乎没有更多的开发，显示了最新的 MVC 位的一些问题，而且我还想要这个架构的最简单的实现。

因此，我的要求是：

a) 基于 MEF 的 MVC 插件解决方案，我只需在我的站点中放置一个包即可使用它，理想情况下甚至无需重新启动。这意味着将插件存储在与 Bin 不同的文件夹中，这也提供了更好的隔离。

b) 一个与 IoC 工具兼容的解决方案，比 MEF 单独完成的解决方案更完整。我倾向于为此使用 Autofac，因为它与 MEF 和 MVC4（此时为 RC）集成。

除了视图之类的内容，最重要的任务是让 MVC 在 MEF 插件中定位控制器并实例化它们，所以我需要一个*控制器工厂*。我在这里找到了一篇关于此的好文章：http: [//kennytordeur.blogspot.be/2012/08/mef-in-aspnet-mvc-4-and-webapi.html](http://kennytordeur.blogspot.be/2012/08/mef-in-aspnet-mvc-4-and-webapi.html)（我就此联系了肯尼，感谢他的指点我遇到了一些路由问题）。作者还将他的代码封装到了一个方便的 nuget 包 (MEF.MVC4) 中。无论如何，我发现了一个似乎与路由和命名空间有关的问题：**当到达插件控制器的路由时，MEF 控制器工厂 GetControllerInstance 方法得到一个 null controllerType**，最终导致 404。我想我可能找到了罪魁祸首通过阅读这些帖子：

[http://blog.davebouwman.com/2011/12/08/asp-net-mvc3-and-404s-for-area-controllers/](http://blog.davebouwman.com/2011/12/08/asp-net-mvc3-and-404s-for-area-controllers/)

和

[ASP.NET MVC 的自定义控制器工厂、依赖注入/结构图问题](https://stackoverflow.com/questions/719678/custom-controller-factory-dependency-injection-structuremap-problems-with-asp)

我想（但我可能错了）问题出在路由约定和插件区域控制器命名空间中：插件控制器的命名空间不在主机 web 的同一个“根”中。帖子中提出的解决方案只是向 Web 应用程序添加一条新路由，但这不适合将区域作为插件工作、动态添加到主机应用程序的解决方案。我的主机 web 应用程序必须不知道插件，这当然应该是一个相当普遍的要求，但我没有找到明显的解决方案。

### 复制解决方案

您可以快速创建重现解决方案，以便按照以下步骤查看我的方法的详细信息，或从[此处](https://skydrive.live.com/?cid=0f8def93587ec2c1&id=F8DEF93587EC2C1!1097&Bsrc=Share&Bpub=SDX.SkyDrive)下载：

1）创建一个空白解决方案。

2) 在其中创建一个 MVC4 Web 应用程序 (HostWeb)，更新所有 NuGet 预安装包并添加 Mef.MVC4、Autofac MVC 4 (RC) 和 Autofac.Mef。在我的实际应用程序中，我想使用 Autofac 在构造函数中注入控制器的依赖项。

3) 在 HostWeb 中创建一个 Plugins 文件夹，并在其中创建一个子文件夹 Temp。这将包括使用 Temp 子文件夹作为卷影副本容器的插件，以便从中加载 MEF 目录，而不是直接从插件中加载。这与一些启动代码一起应该让我更新插件而无需重新启动网络应用程序（否则会锁定 DLL）。启动代码是一个名为 PreApplicationInit 的类，您可以在 Infrastructure 文件夹中找到（从[http://shazwazza.com/post/Developing-a-plugin-framework-in-ASPNET-with-medium-trust.aspx](http://shazwazza.com/post/Developing-a-plugin-framework-in-ASPNET-with-medium-trust.aspx)稍作修改）。

4) 向主机 Web 添加一个 Parts 区域，并将视图根文件夹中的 _ViewStart 文件复制到其中（并更改布局视图中的现有链接，以便将空白区域添加到路由值，以免它们被破坏） . 所有插件控制器都将被命名为名为 Parts 的区域。主机 Web 应用程序有一个没有控制器的区域，只是为插件内容文件准备文件夹结构和路由（视图，将从插件安装程序模块解压缩到适当的位置，而二进制文件将放置在插件中）。

5）在HostWeb的App_Start中自定义MefConfig，添加处理Autofac的IocConfig。然后将调用添加到全局 asax 中：MefConfig.RegisterMef() 和 IocConfig.RegisterDependencies()。

6）在其中创建另一个 MVC4 Web 应用程序（AlphaPlugin），更新所有 NuGet 预安装包并添加 Autofac MVC 4 (RC) 和 Autofac.Mef。我选择了一个 Web 应用程序模板（而不是类库），这样我就可以将所有 VS 工具用于 MVC，并最终直接在那里进行一些测试。

7) 将部件区域添加到主机 Web 并将视图根文件夹中的 _ViewStart 文件复制到其中。

8）在零件区域添加一个可导出的控制器。我的称为 AlphaController，并且只有一个名为 Hail 的操作方法，它在 ViewBag 中放入一个字符串并返回默认视图。

9) 回到主机，只需在主视图中添加一个指向插件控制器操作的链接，以测试它是否可以通过 MEF 访问。

现在，如果我构建所有并将 AlphaPlugin.dll 二进制文件复制到 HostWeb Plugins 文件夹中，我希望 MVC 能够通过 MEF 找到它，但随后会抛出未找到视图的错误，因为我尚未在主机 Web 中复制任何内容文件. 相反，我得到以下信息：

```
Value cannot be null.
Parameter name: type
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentNullException: Value cannot be null.
Parameter name: type

Source Error:
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:
[ArgumentNullException: Value cannot be null.
Parameter name: type]
   System.ComponentModel.Composition.Hosting.ExportProvider.GetExportsCore(Type type, Type metadataViewType, String contractName, ImportCardinality cardinality) +263923
   System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(Type type, Type metadataViewType, String contractName) +41
   MEF.MVC4.MefControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +84
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +226
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +326
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +177
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +88
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +50
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

这是最相关的代码（您可以在 repro 解决方案中找到它）：它处理 Plugins 文件夹内容，以便网络应用程序从副本加载它们：

```
 [assembly: PreApplicationStartMethod(typeof(PreApplicationInit), "Initialize")]
static public class PreApplicationInit
{
    /// 
    /// The source plugin folder from which to shadow copy from.
    /// 
    /// This folder can contain sub folders to organize plugin types.
    internal static DirectoryInfo PluginFolder { get; private set; }

    /// 
    /// The folder to shadow copy the plugin DLLs to use for running the app.
    /// 
    internal static DirectoryInfo ShadowCopyFolder { get; private set; }

    static PreApplicationInit()
    {
        PluginFolder = new DirectoryInfo(HostingEnvironment.MapPath("~/Plugins"));
        ShadowCopyFolder = new DirectoryInfo(HostingEnvironment.MapPath("~/Plugins/Temp"));
    }

    public static void Initialize()
    {
        if (!Directory.Exists(ShadowCopyFolder.FullName))
            Directory.CreateDirectory(ShadowCopyFolder.FullName);
        else
        {
            foreach (FileInfo fi in ShadowCopyFolder.GetFiles("*.dll", SearchOption.AllDirectories))
            {
                try
                {
                    fi.Delete();
                }
                catch (Exception ex)
                {
                    // TODO log
                    Debug.WriteLine(ex.ToString());
                }
            }
        }

        // shadow copy files
        foreach (FileInfo fi in PluginFolder.GetFiles("*.dll"))
        {
            try
            {
                File.Copy(fi.FullName, Path.Combine(ShadowCopyFolder.FullName, fi.Name), true);
            }
            catch (Exception ex)
            {
                // TODO log
                Debug.WriteLine(ex.ToString());
            }
        }
    }
} 
```

这是我的工厂，它无论如何都会得到一个空的控制器类型，所以它的代码永远不会超出它的第一行执行：

```
 public class MefControllerFactory : DefaultControllerFactory
{
    private readonly CompositionContainer _compositionContainer;

    public MefControllerFactory(CompositionContainer compositionContainer)
    {
        _compositionContainer = compositionContainer;
    }

    protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
    {
        // https://stackoverflow.com/questions/719678/custom-controller-factory-dependency-injection-structuremap-problems-with-asp
        if (controllerType == null) return base.GetControllerInstance(requestContext, null);

        var export = _compositionContainer.GetExports(controllerType, null, null).SingleOrDefault();

        IController result;

        if (export != null) result = export.Value as IController;
        else
        {
            result = base.GetControllerInstance(requestContext, controllerType);
            _compositionContainer.ComposeParts(result);
        }

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T12:38:10.170

The controller factory needs a hand in locating the right controller Type for external MEF components. Override the GetControllerType method of the MefControllerFactory class like so.

```
public class MefControllerFactory : DefaultControllerFactory
{
    protected override Type GetControllerType(RequestContext requestContext, string controllerName)
    {
        var controllerType = base.GetControllerType(requestContext, controllerName);

        if (controllerType == null)
        {
            var controller = _compositionContainer.GetExports<IController, IControllerMetaData>().SingleOrDefault(x => x.Metadata.ControllerName == controllerName).Value;

            if (controller != null)
            {
                return controller.GetType();
            }
       }
       return controllerType;
    }
} 
```

Where IControllerMetaData is an interface that specifies the name of the controller

```
public interface IControllerMetaData
{
    string ControllerName { get;}
} 
```

And your controller specifies the controllerName in the meta data. E.g.

```
[Export (typeof(IController))]
[ExportMetadata("ControllerName", "Home")]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class HomeController : Controller, IController
{
    public ActionResult Index()
    {
        return new EmptyResult();
    }
} 
```

# java - Android：HttpGet 未发布到数据库

> ID：13836681
> 
> 赞同：1
> 
> 时间：2012-12-12T09:32:06.020
> 
> 标签：java, android, asp.net, database, get

我只是想将数据发送到数据库作为概念证明。我目前有一个 ASP 页面，它将为我发送数据。我有一个非常基本的 Android 应用程序设置将信息发布到数据库，但没有任何数据发布在那里。我没有收到任何错误或强制关闭，并且该 url 是使用该特定 ASP 文件发送到数据库的正确 url 和格式。

这是我的代码

```
HttpClient client = new DefaultHttpClient();

            //set url
            String url = "**removed for security reasons**";
            url += "var1=" + editVar1.getText().toString() + "&var2=" + editVar2.getText().toString() + "&var3=" + editVar3.getText().toString();

            //display url in toast
            Toast toast = Toast.makeText(getApplicationContext(), url, Toast.LENGTH_LONG);
            toast.show();

            //prepare connection
            HttpGet request = new HttpGet(url);

            //send HttpGet
            try
            {
                client.execute(request);
            }
            catch (Exception e){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:42:55.317

首先只是为了通知您，网络操作应该在后台执行（作为 asynctask 或 intentService）。其次，您不应该使用 GET 在数据库中写入内容。您应该使用 POST 而不是 GET：

```
 HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);

        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
            nameValuePairs.add(new BasicNameValuePair("var1", editVar1.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("var2",editVar2.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("var3",editVar3.getText().toString()));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost); 
```

# web - Kendo UI Web：滚动与多行文本相反

> ID：13836684
> 
> 赞同：1
> 
> 时间：2012-12-12T09:32:24.400
> 
> 标签：web, grid, scroll, kendo-ui, multiline

我的 Kendo UI 网络网格有问题。一旦我的网格中有多行文本，滚动就无法正常工作。当我用鼠标滚轮或滚动条向下滚动时，它不会平滑滚动并且会抖动。

我正在使用带有 xml 数据源的虚拟滚动，只要有足够的文本空间，一切都会顺利进行。一旦它开始包装，我就会遇到这个问题。

在此视频中，您可以了解我的意思：[http ://www.youtube.com/watch?v=2Q9CdsS1C24](http://www.youtube.com/watch?v=2Q9CdsS1C24)

```
$("#table").kendoGrid({
    sortable: true,
    selectable: "row",
    dataSource: {
       serverPaging: true,
       serverSorting: true,
       pageSize: 50,
       transport: {
           read: {
                url: gurl,
                dataType: "xml"
               }
       },
       schema: {
           type: "xml",
               data: "/response/update/tabelle/satz",
               total: "/response/update/anzahl/text()",
               model: {
                   fields: {
                       anschrift: "anschrift/text()"
           }
           }
       }
    },
    scrollable: {
       virtual: true
    },
    columns:[ {
        field: "anschrift"
    }]          
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:04:56.707

当存在高度超过常规行的行时，您会弄乱虚拟滚动的逻辑。除了尝试将这些行保持在正常高度之外，您无能为力。

# android - GreenDAO QueryBuilder 动态连接条件

> ID：13836685
> 
> 赞同：5
> 
> 时间：2012-12-12T09:32:26.797
> 
> 标签：android, sqlite, greendao

我需要验证一些条件来创建完整的查询：

```
QueryBuilder<MyObj> qb = getMyObjDao().queryBuilder();

if ( someCondition )
     qb.where(MyObjDao.Properties.Prop1.eq(someValue));
else       
    qb.whereOr(MyObjDao.Properties.Prop2.eq(someValue),MyObjDao.Properties.Prop2.eq(someValue));

if ( someOtherCondition )
     qb.where(MyObjDao.Properties.Prop3.eq(someValue));
else
     qb.whereOr(MyObjDao.Properties.Prop4.eq(someValue)); 
```

那么是否可以连接查询构建器条件并动态创建查询构建器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:07:53.523

通常，可以使用 QueryBuilder 创建动态查询。

这是否已经回答了您的问题？如果您有问题，请更具体。

# javascript - 检查表单提交时的空字段

> ID：13836686
> 
> 赞同：1
> 
> 时间：2012-12-12T09:32:26.973
> 
> 标签：javascript, html, submit

我已经创建了一个 eshop。我已经为“数量”输入了一个输入字段，当我点击提交按钮时，产品将被添加到我的购物篮中。但是，如果我在数量字段为空的情况下按下提交按钮，它会将我重定向到一个空页面。

所以我想在表单提交中附加一个事件，这样如果数量字段为空，则什么都不做。

javascript中的新功能，在此先感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:35:03.473

```
document.getElementById("formId").onsubmit = function () {
    if (!document.getElementById("myField").value) {
        return false;
    }
} 
```

这将捕获表单的提交操作并验证给定字段是否为空。返回 false 会中断表单提交。这也可以通过将事件参数传递给函数然后使用`e.preventDefault()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-31T16:42:27.680

现在是 2017 年和 Html 5，我相信您已经发现：

```
<input name="quantity" required> 
```

给你想要的。甚至可能：

```
<input name="quantity" type="number" min="1" required> 
```

请注意，这里的所有答案都仅在客户端进行检查。您还必须在服务器上检查或处理空值。如果一个空值（您认为永远不会提交）使您的服务器应用程序崩溃，黑客可以使用它来探测漏洞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:10:59.853

如果输入框为空，此代码不会让您的表单提交；

```
<input type="submit" onclick="return checkEmpty()"> 
```

*别忘了放在`return`前面`checkEmpty()`*

JS

```
function checkEmpty() {
var valueofId=document.getElementById("myField").value;
if (!valueofId) {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:40:45.213

在提交表单时，执行一个 javascript 方法来检查是否使用 document.getElementById('').value 在字段中输入了值。如果没有返回值。

前任：

```
var x=document.getElementById('<your_id>').value;
if (x==null || x=="")
  {
    return false;
// redirect to where you want
  } 
```

高温高压

# internet-explorer-9 - 如何向 IE9 添加“私有”opensearch 插件？

> ID：13836695
> 
> 赞同：1
> 
> 时间：2012-12-12T09:32:55.813
> 
> 标签：internet-explorer-9, opensearch, autodiscovery

似乎添加任何搜索插件的唯一方法是通过[ms 网站](http://www.iegallery.com/)。我有一个适用于 Intranet 站点的 opensearch 插件，包括自动发现，它在 Firefox 和 IE8 中运行良好。[一些网站](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/490c1d89-001d-44ba-9330-13a5247becd6/)建议 opensearch 自动发现在 IE9 中不再起作用。

那么，如何在 IE9 中添加 MS 站点上未列出的搜索插件呢？我不能再添加的插件之一包括[stackexchange](https://meta.stackexchange.com/q/120615)一个，所以这实际上是一个*严重*的问题 ;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:48:49.430

似乎实现这一点的唯一方法是摆弄注册表。这个 .reg 文件适用于我自己的搜索插件：

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\SearchScopes\{5AB8F1FE-2CAD-45FD-8B50-9E5610E4D2B6}]
"DisplayName"="Mysite search"
"URL"="http://mysite/index.jsp?q={searchTerms}&s=1"
"ShowSearchSuggestions"=dword:00000001
"SuggestionsURL"="http://mysite/searchsuggestions.jsp?b=i&q={searchTerms}"
"FaviconPath"="C:\\somePath\\search_{5AB8F1FE-2CAD-45FD-8B50-9E5610E4D2B6}.ico" 
```

似乎图标需要存储在本地路径中。我无法开始`FaviconURL`工作。它不需要在文件名中包含 guid，任何名称都可以。

注册插件后，您可以通过 IE 将其设置为默认值。如果您想以编程方式执行此操作，则需要将以下内容添加到您的 .reg 文件中：

```
[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\SearchScopes]
"DefaultScope"="{5AB8F1FE-2CAD-45FD-8B50-9E5610E4D2B6}" 
```

# spring - 用于类的特定属性的 Spring/Grails 自定义属性编辑器

> ID：13836706
> 
> 赞同：0
> 
> 时间：2012-12-12T09:33:40.483
> 
> 标签：spring, grails, path, editor, custom-properties

我想为域类的属性之一注册一个自定义属性编辑器，该类是这样的

```
class Accessory{
  String name
  byte[] image
} 
```

从客户端，我正在为图像发送一个 base64 编码的字符串，现在我希望这个字符串在绑定时自动转换为字节数组

我的属性编辑器类看起来像这样

```
import java.beans.PropertyEditorSupport
import org.apache.commons.codec.binary.Base64
class CustomAccessoryImageEditor extends PropertyEditorSupport{

    String getAsText() {
        value.toString()
    }

    void setAsText(String text) {
        String encodedImage = text?:""
        byte[] imageBytes = decodeImageToBytes(encodedImage)
        if(imageBytes.size()){
            value = imageBytes
        }

    }

    byte[] decodeImageToBytes(String encodedImage){
            return Base64.decodeBase64(encodedImage)
        }
} 
```

我无法找到正确注册此编辑器的方法。

现在我的注册员班上有这样的东西

```
registry.registerCustomEditor(byte, Accessory.image, new CustomAccessoryImageEditor()) 
```

但是当我运行它时，我收到一条错误消息，说找不到类附件上的属性图像

我有两个问题，1\. 是否可以为类的特定属性提供属性编辑器？2.如果是，那么如何指定属性路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:22:43.283

我认为不可能为类的特定属性提供属性编辑器。但是如果 image 属性是 Image 类型（byte[] 的包装器），那么您可以为此注册一个编辑器，Spring 会将编码的文本表示绑定到自定义包装器。

# html - 如何防止 html div 中的断字（断字）？

> ID：13836707
> 
> 赞同：2
> 
> 时间：2012-12-12T09:33:43.120
> 
> 标签：html, css, hyphenation

我试图在 div 的列中显示一组相同长度的单词。我正在使用快递新字体。到现在为止还挺好。

但是，某些单词包含“-”，它们被不恰当地破坏（连字符）。它打破了布局：

![在此处输入图像描述](../Images/3afeb8ee89a58fda302948003e22a814.png)

有什么办法可以通过 CSS（或 JS）来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T09:59:03.563

`text-align:justify`会产生奇数间距。现在这不是什么大问题，因为所有单词的长度都相同，但我想说更好的解决方案是用不间断的破折号交换所有连字符`&#8209;`

演示： **HTML**

```
<div>
    <h1>With non-breaking hyphen</h1>    
    <br />   
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
       tempo&#8209;r incid&#8209;idunt ut labore et dolore magna aliqua. Ut enim ad minim ve&#8209;niam,
       quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea comm-odo
       consequat. Duis au-te irure dolor in repr&#8209;ehenderit in voluptate velit esse
    </p>         
</div> 
<div>
    <br />
    <h1>Without non-breaking hyphen</h1>  
    <br />               
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
       tempo-r incid-idunt ut labore et dolore magna aliqua. Ut enim ad minim ve-niam,
       quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea comm-odo
       consequat. Duis au-te irure dolor in repr-ehenderit in voluptate velit esse
    </p>  
</div> 
```

**CSS（这只是为了强制包装）**

```
div{
    width:300px;          
} 
```

在 JSFiddle 上查看：http: [//jsfiddle.net/beKfz/4/](http://jsfiddle.net/beKfz/4/)

资料来源： [连字符后没有换行符](https://stackoverflow.com/questions/7691569/no-line-break-after-a-hyphen)

# jdbc - 在jdbc中添加数据源

> ID：13836708
> 
> 赞同：0
> 
> 时间：2012-12-12T09:33:44.650
> 
> 标签：jdbc

我正在尝试连接到远程 sql server 2008。为此，我正在尝试通过控制面板添加数据源。管理工具-> odbc 服务器，但我无法连接到服务器。每次它说连接失败。

请告诉我我能做什么。

```
<%@ 
page import="java.sql.*"
%>
<%
String connectionURL = "jdbc:sqlserver://172.16.206.22,1433/mydatabase;
Connection connection = null;
Statement statement = null;
ResultSet rs = null;
%>

<html><body>

<%
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
connection = DriverManager.getConnection(connectionURL);
statement = connection.createStatement();
rs = statement.executeQuery("SELECT * FROM mytable");
while (rs.next()) 
{
out.println(rs.getString("myfield")+"<br>");
}
rs.close();
%>

</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:05:22.533

您的连接方式看起来不正确 - 我不明白您为什么需要在这里使用 ODBC。假设您拥有 Microsoft SQL Server JDBC[驱动程序](http://msdn.microsoft.com/en-gb/sqlserver/aa937724.aspx)，那么肯定只是以下情况：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
String connectionUrl = "jdbc:sqlserver://172.16.206.22;database=mydatabase;integratedSecurity=true;"
Connection con = DriverManager.getConnection(connectionUrl); 
```

我假设您使用集成安全性。

完整的文档在 MSDN - [http://msdn.microsoft.com/en-us/library/ms378672(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms378672(v=sql.105).aspx)上。

# java - 从java中的内部类访问变量

> ID：13836710
> 
> 赞同：4
> 
> 时间：2012-12-12T09:33:52.550
> 
> 标签：java, inner-classes, extern

我需要从内部类修改一个变量。编译器说我需要将变量声明为静态，但是我不能修改它。代码是这样的：

```
public class Outter{
   private boolean b;

   public Outter(){  
      b = false;
      new Inner(b);
   }
}

public class Inner{
   public Inner(boolean b){
      b = true;
   }
} 
```

有没有像 C 中的“外部”这样的东西？或任何解决方案，以便我可以修改 b 变量？我尝试将其设置为静态并将整个 Outter 类作为参数传递，但我一直遇到同样的问题。

编辑：那么代码更像是：

```
public class MainView{
   private boolean view;
   //JMenus,JMenuItems, JPanels.. declarations
   private JFrame frame
   MainView(){
     view = true;
     //initializations
     create_listeners();
   }
   public void create_listeners(){
      Menu.addActionListener(
        new ActionListener() { 
            public void actionPerformed(ActionEvent event){
                if(View){
                    new View2(frame);
                    View = false;
                }
            }

        }  
   );
   }
}

public class View2{
   private JButton back = new JButton("Back");
   public View2(JFrame frame){
    //initialitzatons
    create_listeners();
}
   public void create_listeners(){
          back.addActionListener(
        new ActionListener() { 
            public void actionPerformed(ActionEvent event){
                frame.remove(MainPanel);
                View = true;// HERE, i want to modify the variable
                }

        }  
    );
    }
 } 
```

问题是我应该如何修改 View2 类中的变量“View”。

抱歉表格不好，我做得很快，需要代码翻译才能理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:38:15.047

语法如下，使用**Outter.this获取对外部类的引用**

```
public class Outter{
   private boolean b;

   class Inner{
       public Inner(boolean b){
          Outter.this.b = true;
       }
   }
} 
```

编辑：在我看来，您只是试图通过传递引用来修改 b 。在java中这是不可能的。变量通过引用变量的副本（引用变量类似于指针）作为参数传递，或者在原语的情况下，通过副本传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T09:39:32.800

您正在寻找类似的东西：

```
public class Outer {
  // Using atomic because it is a convenient mutable boolean.
  private final AtomicBoolean b = new AtomicBoolean();

  public Outer() {
    b.set(true);
    new Inner();
  }

  public class Inner {
    public Inner() {
      b.set(false);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T09:41:06.163

首先，你的内部类在外部类之外，把它放在外部类里面

```
public class Outter{
   private boolean b;

   public Outter(){  
      b = false;
      new Inner(b);
   }
   public class Inner{
       public Inner(boolean b){
          b = true;
       }
    }
   public static void main(String[] args) {
       System.out.println(new Outter().b);
   }
} 
```

java通过值传递变量（原语和引用）**，**而**不是通过引用传递**`b`，内部类中的变量是一个。`seperate new variable`在您的代码中，您正在修改`b`内部类而不是外部类中声明的值。如果要修改 of 的值`b`，`outer class`请执行以下操作：

```
public class Outter{
   private boolean b;

   public Outter(){  
      b = false;
      new Inner();
   }
   public class Inner{
       public Inner(){
          b = true;
       }
    }
   public static void main(String[] args) {
       System.out.println(new Outter().b);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:54:10.847

在您编辑之后，您可能正在寻找的是一个`interface`. 这种模式可能是你想要的吗？

```
public interface Viewable {
  public void setViewed ( boolean viewed );
  public boolean isViewed ();
}

class Outer implements Viewable {
  private boolean viewed = false;

  @Override
  public boolean isViewed() {
    return viewed;
  }

  @Override
  public void setViewed(boolean viewed) {
    this.viewed = viewed;
  }

}

class Inner {
  public Inner ( Viewable view ) {
    view.setViewed(true);
  }
}

Inner inner = new Inner(new Outer()); 
```

我选择`Outer`和`Inner`作为类名来连接你的原始问题。你会发现更好的名字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:45:42.757

你的代码也是正确的，因为`Java doesn't pass variables by reference; it passes them by value.`

# jquery - 文本区域中的 Jquery 读取数组

> ID：13836711
> 
> 赞同：0
> 
> 时间：2012-12-12T09:33:54.397
> 
> 标签：jquery, arrays, string, textarea, eval

我需要能够在 textarea 中粘贴这样的内容：

```
var cars = new Array(new Array(3), new Array(3));
cars[0][0] = 'FORD';
cars[0][1] = 'Focus';
cars[0][2] = 'Mondeo';
cars[1][0] = 'VOLKSWAGEN';
cars[1][1] = 'Golf';
cars[1][2] = 'Polo';
cars[1][3] = 'Lupo'; 
```

之后能够从我的脚本中访问汽车数组作为公共变量。一直在尝试评估，但在谷歌搜索之后我真的很害怕。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:31:22.887

[`.data()`](http://api.jquery.com/data/)您可以使用 jquery方法将任意数据附加到任何 html 元素。

所以给定一个像这样的文本区域：

```
<textarea id="txa"></textarea> 
```

从 jquery 你可以这样做：

```
var cars = new Array(new Array(3), new Array(3));
cars[0][0] = 'FORD';
...
$('#txa').data('myvar', cars); 
```

然后稍后使用以下命令检索它：

```
var arr = $('#txa').data('myvar');
alert( arr[0][0] ); //alerts FORD 
```

**更新：**
现在，根据您最后的评论，您似乎只需要[`eval()`](http://www.w3resource.com/javascript/functions/eval-function.php)执行您在 textarea 中的 javascript 代码的函数，如下所示：

```
code = $('textarea').val();
eval( code );
alert( arr[0][0] ); //alerts FORD 
```

查看工作[**演示**](http://jsfiddle.net/gnel/TqMt3/)

# bash - 根据文件的第一个字母将文件放入目录

> ID：13836712
> 
> 赞同：0
> 
> 时间：2012-12-12T09:33:57.500
> 
> 标签：bash, shell, unix, if-statement, while-loop

创建一个 shell 脚本 (sorter.sh)，该脚本循环遍历用户使用内置“read”给定的目录中的所有项目。此输入需要能够接受使用波浪号的目录。脚本必须验证输入并使用循环以仅在验证完成后允许脚本继续。它必须验证给定的目录是一个目录。

该脚本在遍历目录中的项目时，应该测试这些项目以查看它们是目录还是文件。如果它们是目录，则需要重命名它们以将当前日期添加到目录名称的末尾。如果它们是文件，则需要将它们复制到用户指定的另一个目录中，并且强制测试目的必须是路径（~/Desktop/sorted）。请注意，您不能将此目录路径硬编码到程序中，您必须使用从用户那里获取的变量。在这个其他目录中，您的脚本还必须创建以“cis90-”开头和 a 到 z 结尾的目录。所以前三个目录将是“cis90-a”、“cis90-b”、“cis90-c”。被复制的文件需要按字母顺序复制到文件夹中。所有以字母“a”开头的文件进入“cis90-a”文件夹，以字母“b”开头的文件进入“cis90-b”文件夹，以字母“c”开头的文件进入“cis90”文件夹-c”目录。为了在你到达“c”后节省一些额外的工作，所有额外的文件都应该放在“cis90-d”目录中。

我已经到了需要检查目录和文件项目的地方。不知道如何将文件放入 cis90 文件夹。这是我到目前为止所拥有的。

编辑：我现在正在研究使用 case 命令来分隔目录和文件。然后将文件复制到各自的文件夹中。

```
#!/bin/bash

DATE=$(date +%m%d%Y)

read -p "Enter directory for items to be sorted: " dir

eval dir=$dir

while [ -z "$dir" ]; do
        read -p "Empty entry.  Enter directory: " dir

done

while [ ! -d "$dir" ]; do

read -p "Invalid entry. Enter directory: " dir
done

read -p "Enter directory for cis90 directories: " cis

    eval cis=$cis 
        for j in $cis; do 
                mkdir $cis/cis90-{a..z}
        done

for i in $dir/*; do

        if [ -d $i ]; then 
                echo "$i is a directory."
        fi
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:45:33.077

如果是文件，则需要提取基本文件名，然后获取文件名的第一个字母。一旦知道第一个字母是什么，就可以将其复制到相应的目录中。这可以使用[“参数扩展”](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)（键入`man bash`并搜索参数扩展）来完成。

例如，如果文件是`foo/bar.txt`，则基名是`bar.txt`，第一个字母是`b`。

```
$ i="foo/bar.txt"
$ echo "${i##*/}"     # get the basename
bar.txt
$ i="bar.txt"
$ echo "${i:0:1}"     # get the first letter
b 
```

这是您更新的脚本：

```
#!/bin/bash
DATE=$(date +%m%d%Y)

read -p "Enter directory for items to be sorted: " dir

while [ -z "$dir" ]; do
    read -p "Empty entry.  Enter directory: " dir
done

while [ ! -d "$dir" ]; do
    read -p "Invalid entry. Enter directory: " dir
done

read -p "Enter directory for cis90 directories: " cis

mkdir $cis/cis90-{a..z}

for i in $dir/*; do
    if [ -d "$i" ]; then 
        echo "$i is a directory. Moving $i to ${i}_$DATE"
        mv "$i" "${i}_$DATE"
    elif [ -f "$i" ]; then     
        filename="${i##*/}"
        firstletter="${filename:0:1}"
        echo "Copying $i to $cis/cis90-$firstletter"
        cp "$i" "$cis/cis90-$firstletter"
    fi
done 
```

我还进行了一些更改，例如删除`eval`s，因为我不认为它是必需的。

# php - 更新查询中的错误 sql 语法

> ID：13836718
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:34:16.987
> 
> 标签：php, mysql

我有这个查询，我用它来更新表，问题是我遇到这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'emri='Albana', klienti='Distribrands', telefoni='0662080090', montim='Kompjut' at line 1 
```

我在这里找不到错误..这很奇怪...请帮帮我。这是一个更新查询！查询：

```
$sqlStart="UPDATE forma SET ";
$sql="";
if ($postDyqani_pergjegjes!= 'undefined') $sql .= " dyqani_pergjegjes='$postDyqani_pergjegjes',";
if ($postEmri!= 'undefined') $sql .= "  emri='$postEmri',";
if ($postKlienti!= 'undefined') $sql .= "  klienti='$postKlienti',";
if ($postTelefoni!= 'undefined') $sql .= "  telefoni='$postTelefoni',";
if ($postMontim!= 'undefined') $sql .= "  montim='$postMontim',";
if ($postAdresa!= 'undefined') $sql .= "  adresa='$postAdresa',";
if ($postData_e_shitjes!= 'undefined') $sql .= "  data_e_shitjes='$postData_e_shitjes',";
if ($postDifekti!= 'undefined') $sql .= "  difekti='$postDifekti',";
if ($postTekniku_emer!= 'undefined') $sql .= "  tekniku_emer='$postTekniku_emer',";
if ($postTekniku_mesazh!= 'undefined') $sql .= "  tekniku_mesazh='$postTekniku_mesazh',";
if ($postData_fillim!= 'undefined') $sql .= "  data_fillim='$postData_fillim',";
if ($postData_mbarim!= 'undefined') $sql .= "  data_mbarim='$postData_mbarim',";
if ($postData!= 'undefined') $sql .= "  data='$postData',";
if ($postStatus!= 'undefined') $sql .= "  status='$postStatus',";
// replace the last `,` for `;`
if ($sql != "") {
    // replace the last `,` for `;`
    $sql = substr($sql, 0, -1) . ";";
    // run sql command
    $sqlCommand = $sqlStart.$sql;
    $result=mysql_query($sql) or die(mysql_error()) ;

} else {
    // no fields to update
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:40:24.353

您的问题是您正在执行`$sql`这只是查询的一半。完整的查询是`$sqlCommand`这样执行的：

```
 $result=mysql_query($sqlCommand) or die(mysql_error()) ; 
```

旁注：您应该确保对单引号的变量进行转义（请参阅 参考资料`mysql_real_escape_string()`）。该`mysql_*`库已弃用，因此建议迁移到 PDO 或 MySQLi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:43:25.033

请用 $sqlCommand 代替 $sql，因为最终查询在此变量中。

# linux - 嵌入式 linux：/proc/pid/maps 中的第一个偏移量错误？

> ID：13836719
> 
> 赞同：2
> 
> 时间：2012-12-12T09:34:18.840
> 
> 标签：linux, linux-kernel, procfs

下面是我努力的细节，它们仅与我的问题部分相关：

在内核版本为 2.6.37.6 的嵌入式 linux (arm) 上的 /proc/pid/maps 映射中，第一行的偏移量（可执行文件本身的代码段）似乎是错误的。

我总是看到这样的一行：

00008000-00061000 r-xp 00000000 00:10 8073509 myprog

（范围是进程地址空间中的地址，权限后面的数字应该是文件的偏移量）

但是，实际偏移量似乎是 0x8000 - 至少，使用此假设的解释看起来更可信。nm 告诉我 myprog 在 0x8000 之前没有代码，所以这也是有道理的。

有人可以指点我在哪里可以找到更多关于此的信息吗？我什么也找不到。

我在做什么：我编写了一个工具来解释 mtrace() 生成的日志，找到可能的内存泄漏，并将它们追溯到分配数据的代码。对于后一步，我从日志中获取指令指针，在 /proc/pid/maps 的运行时映射中查找它以找到有问题的可执行文件或库，并使用它们的 nm-map 来查找实际函数做分配。

这对除可执行文件本身之外的所有内容都具有吸引力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-02T10:09:23.820

/proc/$PID/maps 中的每一行都描述了进程或线程中的一个连续虚拟内存区域。每行都有以下字段：

```
address           perms offset  dev   inode   pathname
08048000-08056000 r-xp 00000000 03:0c 64593   /usr/sbin/gpm 
```

*   **地址**- 这是该区域在进程地址空间中的起始和结束地址
*   **权限**- 这描述了如何访问区域中的页面。有四种不同的权限：读、写、执行和共享。如果读/写/执行被禁用，将出现一个“-”而不是“r”/“w”/“x”。如果一个区域不是共享的，它是私有的，所以会出现一个“p”而不是一个“s”。如果进程试图以不允许的方式访问内存，则会产生分段错误。可以使用 mprotect 系统调用更改权限。
*   **offset** - 如果该区域是从文件映射的（使用 mmap），则这是映射开始的文件中的偏移量。如果内存不是从文件映射的，则它只是 0。
*   **device** - 如果区域是从文件映射的，则这是文件所在的主要和次要设备号（十六进制）。
*   **inode** - 如果该区域是从文件映射的，则这是文件编号。
*   **pathname** - 如果区域是从文件映射的，则这是文件的名称。对于匿名映射区域，此字段为空白。还有一些特殊区域的名称如 [heap]、[stack] 或 [vdso]。[vdso] 代表虚拟动态共享对象。系统调用使用它来切换到内核模式。[这是一篇关于它的好文章。](http://www.trilithium.com/johan/2005/08/linux-gate/)！

您可能会注意到很多匿名区域。这些通常由 mmap 创建，但不附加到任何文件。它们用于许多杂项，例如未在堆上分配的共享内存或缓冲区。例如，我认为 pthread 库使用匿名映射区域作为新线程的堆栈。

# gwt - SmartGWT 与 UIBinder 一起使用

> ID：13836720
> 
> 赞同：3
> 
> 时间：2012-12-12T09:34:34.367
> 
> 标签：gwt, smartgwt, uibinder

现在我有一个带有 UIBinder 的 GWT 项目，我需要将 SmartGWT 集成到其中。如果我只是想将 SmartGWT 组件添加到 ui.xml 并将类视为普通 GWT 组件，则编译时会出错。为了使用 SmartGWT 小部件，我应该采取哪些额外操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:49:38.937

SmartGWT 不提供 UiBinder 支持。但是您可以使用**uibinding-smartgwt**。一个为 UiBinder 适配 SmartGWT 的项目。

然后只需添加`xmlns:zs="urn:import:org.synthful.smartgwt.client.widgets"`您的 UiBind xml。

更多信息[在这里](http://code.google.com/p/uibinding-smartgwt/)

# asp.net - ASP.NET 应用程序错过断点

> ID：13836721
> 
> 赞同：1
> 
> 时间：2012-12-12T09:34:34.103
> 
> 标签：asp.net, visual-studio-2010, debugging

我面临一个严重的问题——我的 ASP 应用程序没有看到断点。我已经阅读了[为什么 Arent Breakpoints Working In Web Application Project](https://stackoverflow.com/questions/5187110/why-arent-breakpoints-working-in-web-application-project)。但这没有帮助。我使用的是 VS2010，页面是在 IE 中加载的。

这是我的 web.config 文件

```
<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <siteMap enabled="true">
      <providers>
        <clear/>
        <add siteMapFile="Web.sitemap" name="AspNetXmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" securityTrimmingEnabled="true"/>
      </providers>
    </siteMap>

    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

我只需在 VisualStudio 中单击 F5 即可启动我的应用程序。请问有人知道是什么错误吗？

这是我的 Login.aspx.cs

```
public partial class Login : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        RegisterHyperLink.NavigateUrl = "Register.aspx?ReturnUrl=" + HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"]);
    }

    protected void LoginButton_Click(object sender, EventArgs e)
    {
        var userNameTextBox = LoginUser.FindControl("UserName") as TextBox;
        var passwordTextBox = LoginUser.FindControl("Password") as TextBox;
        if (userNameTextBox != null && passwordTextBox != null)
        {
            bool succes = UserDAL.Login(userNameTextBox.Text, passwordTextBox.Text);
            if (succes == true)
                Server.Transfer("~/Account/Succes.aspx");
        }
    }
} 
```

这是它的界面。

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<center>
    <p>
        Введите имя пользователя и пароль.
        <asp:HyperLink ID="RegisterHyperLink" runat="server" EnableViewState="false">Register</asp:HyperLink> если у вас нет учетной записи.
    </p>
    <asp:Login ID="LoginUser" runat="server" EnableViewState="false" RenderOuterTable="false">
        <LayoutTemplate>
            <span class="failureNotification">
                <asp:Literal ID="FailureText" runat="server"></asp:Literal>
            </span>
            <asp:ValidationSummary ID="LoginUserValidationSummary" runat="server" CssClass="failureNotification" 
                 ValidationGroup="LoginUserValidationGroup"/>
            <div class="accountInfo">
                <fieldset class="login">
                    <legend>text</legend>
                    <p>
                        <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Login:</asp:Label>
                        <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" 
                             CssClass="failureNotification" ErrorMessage="" ToolTip="" 
                             ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                    </p>
                    <p>
                        <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                        <asp:TextBox ID="Password" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password" 
                             CssClass="failureNotification" ErrorMessage="" ToolTip="" 
                             ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                    </p>
                </fieldset>
                <p class="submitButton">
                    <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Выполнить вход" ValidationGroup="LoginUserValidationGroup"/>
                </p>
            </div>
        </LayoutTemplate>
    </asp:Login>
</center>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:49:14.050

您需要为`OnClick="LoginButton_Click"`您的项目添加一个属性以`<asp:Button...>`将按钮挂钩到事件。

[在此处阅读更多信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclick.aspx)，或使用[`CommandName / CommandArgument`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.commandname.aspx).

您正在同时做一些事情，这就是为什么它没有按您期望的那样工作。

# r - 从样本生成的组合总数

> ID：13836722
> 
> 赞同：0
> 
> 时间：2012-12-12T09:34:37.690
> 
> 标签：r, permutation

我在R中有一个50个数字的向量，我正在使用这个向量生成这个向量的排列，`sample()`但我的问题是：

从这个向量不重复可以生成的组合总数是多少？

并且 sample 是否计算排列而不重复？

我正在做的是这样的：

```
for (i in 1:100) 
{
    test$x <- sample(test$x,nrow(test), replace=FALSE)
} 
```

有没有可能我可以从 x 列的这段代码中得到重复的排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:00:27.477

值的唯一排列数`n`为`n!`。例如，如果您有`n = 3`值，则排列数为`3 * 2 * 1 = 6`。在 R 中，这个数字可以用 来计算`factorial(n)`。

函数的不同运行`sample`是*独立*的。因此，可以获得相同的排列。

如果要生成一组值的所有排列，可以使用包中的`permutations`函数`gregmisc`。这是一个例子：

```
# generate a vector of values  
dat <- letters[1:3] # [1] "a" "b" "c"

# the number of values to be drawn from the vector
n_samp <- 2 # Note. The maximum number is: length(dat)

library(gregmisc)

# generate the permutations
permutations(length(dat), n_samp, v = dat)

# The result:

    [,1] [,2]
[1,] "a"  "b" 
[2,] "a"  "c" 
[3,] "b"  "a" 
[4,] "b"  "c" 
[5,] "c"  "a" 
[6,] "c"  "b" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:51:01.387

1.  不同排列的数量应该是50！在你的例子中。
2.  按顺序生成样本并不能保证它们的唯一性。通过重复尝试一个小例子`sample(1:3)`。
3.  是的，您示例中的排列可能会重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:00:42.377

正如@djurhio 提到的，您的示例中的排列数为 50！（即 ca. 3e64）对于您来说太大而无法找到所有这些。但是，对于较小的样本，您可以使用`allPerms`package中的函数`permute`。

```
test<-data.frame(x=round(rnorm(5),2)
test
   x
1  0.33
2  0.34
3  2.18
4  0.92
5 -0.29
library(permute)
t(apply(allPerms(test$x),1,function(X)test$x[X]))
        [,1]  [,2]  [,3]  [,4]  [,5]
  [1,]  0.33  0.34  2.18 -0.29  0.92
  [2,]  0.33  0.34  0.92  2.18 -0.29
                    ...
[118,] -0.29  0.92  2.18  0.33  0.34
[119,] -0.29  0.92  2.18  0.34  0.33 
```

# xslt - Emacs 对 DocBook5 和 XSLT 的支持

> ID：13836723
> 
> 赞同：1
> 
> 时间：2012-12-12T09:34:41.313
> 
> 标签：xslt, emacs, xsl-fo, docbook

我刚开始使用 Emacs 创建 DocBook5 文档。（*因为一些提供免费版本的 XML 创作软件的供应商现在已经停止提供。例如，Syntext Serna Community Edition 和 XMLMind XML Editor Personal Edition。*）

似乎有几种不同的包（模式？）用于创建 XML 文档、使用 XSLT 样式表转换 XML 文件等等。

但是，它们中的每一个都可以从不同的站点获得，最后一个版本似乎是在 2002 年到 2008 年之间的某个时间创建的，目前尚不清楚支持哪个版本的 XML、XSLT 等。

也不清楚这些包是否都可以互操作以成功创建 DocBook5 文档并将其转换为 PDF，这正是我想要做的。

**有什么我错过的吗？**

**如果给我一个要*安装的**包*列表以在 Emacs 中进行 DocBook5 创作和转换工作，我会得到很大帮助。**

 *但是，所有建议对我都有用，因为我是Emacs的*新手。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:21:59.013

这个包包含一个用于编辑 XSL 样式表的 Emacs 主要模式。xslide 主页是[http://www.menteith.com/xslide/](http://www.menteith.com/xslide/)

[http://www.lysator.liu.se/~lenst/about_psgml/](http://www.lysator.liu.se/~lenst/about_psgml/)

除了 nxml 已经提到这两个包对我来说都很好。不过，偶尔调整一些 Emacs Lisp 似乎很有用 - 不确定这是否适合初学者。*

# windows - Windows 上的 Autoconf 和 configure.exe

> ID：13836724
> 
> 赞同：9
> 
> 时间：2012-12-12T09:34:43.693
> 
> 标签：windows, configure, autoconf

我正在尝试在 Windows 上构建一个 Linux 开发的库。该库需要 glib 和其中一个 gdk 库。虽然我可以为大多数依赖库找到 32 位 Windows 二进制文件，但我更愿意自己编译所有内容。

我在 Linux 上的 C/C++ 经验很少，但我已经发现这`./configure`是获取大多数由平台不兼容引起的编译错误所必需的。不幸的是，所有的包都有一个`configure`不能在 Windows 上真正运行的 shell 脚本。

我已经`autoconf`为 Windows 安装了，希望从中创建一个 Windows`configure`脚本`configure.ac`，但是 Windows autoconf*也是*一堆不能真正在 Windows 上运行的 shell 脚本。

我该怎么办？我必须安装 Cygwin 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:50:51.653

**编辑（2021）：**

我写原始答案已经8年多了，此时我会提供不同的意见。

2021 年，Linux 成为现在的主流开发平台，使用 Windows 开发与 Linux 息息相关的东西的人越来越少。那些被迫使用 Windows 的软件工程师经常使用双启动、VM 或 SSH 访问构建机器。那些喜欢冰沙的人使用 Docker，这是一种构建事物并将构建工件保存在云中的奇特方式，以及监控和天知道是什么。现在，Visual Studio 还支持[远程 Linux 目标](https://docs.microsoft.com/en-us/cpp/linux/connect-to-your-remote-linux-computer)，甚至[WSL](https://docs.microsoft.com/en-us/windows/wsl/about)。疯狂的。

所以，截至 2021 年，我的建议是：如果你问这个问题，那你就错了。当涉及到任何与 Linux 相关的东西时，不要将 Windows 用作构建机器。如果你真的需要在同一台 Windows 机器上构建 Linux 代码，我会看看这两个选项：

*   WSL 和`mingw-w64`
*   Docker（例如[这个](https://hub.docker.com/r/mmozeiko/mingw-w64)）

**原始答案（2012）：**

我在这里看到两个选项：

*   在 Windows 上模拟 Unix 环境
*   从 Unix/Linux 交叉编译到 Windows 目标平台

虽然第二个选项可能会减少在本地环境中构建的麻烦，但如果您主要在 Windows 上工作，我发现它很不舒服，因为这需要将生成的二进制文件传输到 Windows 机器。让我们看看第一个选项 - 模拟 Unix 环境并在 Windows 上构建 GNU 软件。

虽然某些包可能支持在 Windows 上构建而无需准备环境，但这些可能是使用 CMake、Visual Studio 和其他非典型构建 GNU 开源东西的方式完成的自定义解决方案。

Windows 上的 Unix 环境仿真有两个流行的选项，[Cygwin](http://www.cygwin.com/)和[Msys](http://www.mingw.org/wiki/MSYS)。这两种选择各有利弊，这是一个[广泛讨论的话题](https://stackoverflow.com/questions/57627/msys-vs-cygwin)，我不打算深入探讨。

顺便说一句，我个人使用的是 Msys，除了某些软件包的典型 Windows 不兼容问题外，从未遇到过任何问题。

# scala - 在Scala中顺序组合任意数量的期货

> ID：13836725
> 
> 赞同：10
> 
> 时间：2012-12-12T09:34:44.583
> 
> 标签：scala, concurrency, future

我是 scala 的新手，我尝试在 scala 2.10RC3 中结合几个期货。`Futures`应该按顺序执行。在文档[Scala SIP14](http://docs.scala-lang.org/sips/pending/futures-promises.html)中定义了该方法`andThen`，以便按顺序执行 Futures。我用这种方法组合了几个`Futures`（见下面的例子）。我的期望是它会打印`6`，但实际上结果是`0`. 我在这里做错了什么？我有两个问题：

首先，为什么是结果`0`。其次，我怎样才能组合几个`Futures`，以便在第一个完成`Future`之前不会开始执行第二个。`Future`

```
val intList = List(1, 2, 3)

val sumOfIntFuture = intList.foldLeft(Future { 0 }) {
 case (future, i) => future andThen {
  case Success(result) => result + i 
  case Failure(e) => println(e)
 }
}

sumOfIntFuture onSuccess { case x => println(x) } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T10:14:21.277

`andThen`是为了副作用。它允许您指定在 future 完成之后以及在它用于其他事情之前要执行的一些操作。

使用地图：

```
scala> List(1, 2, 3).foldLeft(Future { 0 }) {
     |  case (future, i) => future map { _ + i }
     | } onSuccess { case x => println(x) }
6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-30T10:49:40.737

我喜欢这种通用方法：

```
trait FutureImplicits {

  class SeriallyPimp[T, V](futures: Seq[T]) {
    def serially(f: T => Future[V])(implicit ec: ExecutionContext): Future[Seq[V]] = {
      val buf = ListBuffer.empty[V]
      buf.sizeHint(futures.size)

      futures.foldLeft(Future.successful(buf)) { (previousFuture, next) =>
        for {
          previousResults <- previousFuture
          nextResult <- f(next)
        } yield previousResults += nextResult
      }
    }
  }

  implicit def toSeriallyPimp[T, V](xs: Seq[T]): SeriallyPimp[T, V] =
    new SeriallyPimp(xs)

} 
```

然后混合上述特征并像这样使用它：

```
val elems: Seq[Elem] = ???
val save: Elem => Future[Result] = ???
val f: Future[Seq[Result]] = elems serially save 
```

可以改进此代码以保留输入集合类型。例如，请参阅[这篇](http://www.michaelpollmeier.com/execute-scala-futures-in-serial-one-after-the-other-non-blocking/)文章。

# css - 字体 - 生成的字体在 ie 中不起作用？

> ID：13836731
> 
> 赞同：0
> 
> 时间：2012-12-12T09:35:13.120
> 
> 标签：css, fonts

我在本网站 (www.font2web.com) 中生成了一个名为 (Futura Std Light) 的字体，但该字体在 ie 中不起作用。

我在 (www.fontsquirrel.com) 中生成我的字体，它们在 ie 中效果更好，但这里的问题是这种字体在黑名单中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:20:08.710

它不适用于浏览器；它被列入黑名单是有原因的：将字体用作网络字体是侵犯版权的行为。

考虑改用合适的免费字体，或您可以合法使用的其他字体。

# java - 使用 lambdaj 从嵌套数组中提取对象

> ID：13836734
> 
> 赞同：4
> 
> 时间：2012-12-12T09:35:26.903
> 
> 标签：java, nested-loops, lambdaj

我想用 lambdaj 从嵌套数组中提取一个对象。我的模型是拥有“*元素*”数组的“*产品*”列表：

 *```
public class Product {
   Element[] elements;
}
public class Element {
   String code;
} 
```

在我的代码中的某处，我有一个产品列表，我想在我的列表中找到一个具有特定代码的元素。

根据这个讨论：[https://groups.google.com/forum/?fromgroups=#!topic/lambdaj/QQGmY3cVHP8](https://groups.google.com/forum/?fromgroups=#!topic/lambdaj/QQGmY3cVHP8)，我可以使用：

```
select(myproductList,
       having(on(Product.class).getElements()
                .contains(selectUnique(elements, 
                    having(on(Element.class).getCode(), equalTo("codeToFind")))); 
```

但不幸的是，这不会编译，因为`getElements()`它是一个数组而不是一个集合......

所以我最终得到了这个java代码：

```
 for (Product p : products) {
    for (Element e : p.getElements()) {
       if (e.getCode().equals("codeTofind")) {
           return e;
       }
    }
 }
 return null; 
```

有没有办法用 lambdaJ 遍历嵌套数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:00:34.610

好的，我找到了解决方案：

```
selectFirst(flatten(extract(products, on(Product.class).getElements())),
                          having(on(Element.class).getCode(), equalTo("mycode"))); 
```

这将首先选择并展平唯一集合中的所有元素，然后在 code 属性上对其进行过滤。

从性能的角度来看，我不确定它是否是最佳解决方案：看起来好像所有产品和元素在完成完整扫描之前都已展平。（我对 Lambdaj 的理解在这里太弱了，无法确定）

我认为完整的 java 实现更有效，因为它在第一个代码匹配时停止。*

# c# - 通过 ASP.net 4.5 GridView 板载功能插入数据库行？

> ID：13836739
> 
> 赞同：1
> 
> 时间：2012-12-12T09:35:41.273
> 
> 标签：c#, asp.net, gridview, insert, sqldatasource

我想使用 GridView 和 SqlDataSource 的标准函数插入数据库条目。自从一些版本之前的肮脏变通办法以来，这个主题是否有任何更新（例如，见[这里](http://www.codeproject.com/Articles/24085/Insert-Update-Delete-with-Gridview-Simple-Way)，[这里](http://www.codeproject.com/Articles/12657/GridView-inline-Master-Detail-record-display)）？我在网上找不到任何新教程。

例如，是否有任何处理程序允许使用标准的 -Datafield 和 SqlDataSource 的 UpdateCommand 将条目写入数据库？目前，UpdateCommand 似乎没有得到我输入的值。如何正确调试那些 SqlDataSource-Database-Queries？

这是我尝试使用的解决方案：我的数据库表 tblname 仅包含一列“名称”。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:VConStr %>"
    DeleteCommand="DELETE FROM [tblname] WHERE [name] = @name" 
    InsertCommand="INSERT INTO [tblname] ([name]) VALUES (@name)" 
    SelectCommand="SELECT [name] FROM [tblname]"
    UpdateCommand="UPDATE [tblname] SET [name] = @name WHERE [name] = @name">
    <DeleteParameters><asp:Parameter Name="name" Type="String" /></DeleteParameters>
    <InsertParameters><asp:Parameter Name="name" Type="String" /></InsertParameters>
    <UpdateParameters><asp:Parameter Name="name" Type="String" /></UpdateParameters>
</asp:SqlDataSource>
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="name" DataSourceID="SqlDataSource1" ShowFooter="true">
    <Columns>
        <asp:TemplateField HeaderText="Name" ShowHeader="True">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("name") %>' />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("name") %>' />
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="Insertname" name="name_new" runat="server" Text='<%# Bind("name") %>' />
            </FooterTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Action" ShowHeader="True">
            <ItemTemplate>
                <asp:Button ID="Button1" runat="server" Text="Edit" CommandName="Edit" />
                <asp:Button ID="Button4" runat="server" Text="Delete" CommandName="Delete" OnClientClick="return confirm('Sure?');" />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Button ID="Button2" runat="server" Text="Edit entry" CommandName="Update" />
                <asp:Button ID="Button3" runat="server" Text="Cancel" CommandName="Cancel" />
            </EditItemTemplate>
            <FooterTemplate>
                <asp:Button ID="Button5" runat="server" Text="New" CommandName="Insert" />
            </FooterTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

# ios - 如何为 iOS 应用程序制作开始/停止按钮

> ID：13836741
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:35:44.803
> 
> 标签：ios, objective-c, xcode

只是想知道如何制作一个“开始”按钮，按下该按钮会触发一个功能，并且文本会变为“停止”。然后当再次按下该功能将停止并且文本变回“开始”

我已经有了启动该功能的按钮。我可以处理更改标题，只是不确定使用什么来使 1 按钮具有 2 个功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:41:34.627

添加 IBAction 方法，如：

```
- (IBAction)buttonTapped:(id)sender
{
  UIButton *btn = (UIbutton *)sender;
  NSString *title=btn.titleLabel.text; 
  if ([title isEqualToString:@"Start"])
  {
   //Start 
  }else
  {
   //Stop
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:48:36.390

请试试这个：

```
 - (IBAction) buttonAction:(id)sender
  {
    if([[(UIButton *)sender currentTitle]isEqualToString:@"START"])
   {

    [actionButton setTitle:@"STOP" forState:UIControlStateNormal];
    //start the action here and change the button text to STOP
   }
   else if([[(UIButton *)sender currentTitle]isEqualToString:@"STOP"]) 
   {

    [actionButton setTitle:@"START" forState:UIControlStateNormal];
     //stop the action here and change the button text to START
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:40:44.787

您在这里至少有两个选择：

1.  检查按钮的标题，并根据值调用操作或其他操作。
2.  创建两个不同的按钮，每个按钮都有他的动作并显示/隐藏它们。

# c# - 获取 xsd 架构文件中的所有必填字段

> ID：13836745
> 
> 赞同：0
> 
> 时间：2012-12-12T09:36:03.567
> 
> 标签：c#, xsd

针对 xsd 工作，我需要向客户提供所有必填字段的列表

有没有办法可以在 c# 中快速完成？或使用免费工具？

文件很大，我想避免手动操作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:41:03.363

你可以试试 xsd2code 这是一个 codeplex 项目。[请参见此处](http://xsd2code.codeplex.com/)这在您的代码中创建基于 Xsd 格式的类。

这是一个集成到您的视觉工作室的免费工具，可以帮助您找到必要的字段。它还允许您轻松地为 xsd 架构创建代码。

# android - 在 OpenCV4Android 2.4.3 中用于视频捕获的自动对焦

> ID：13836748
> 
> 赞同：2
> 
> 时间：2012-12-12T09:36:07.090
> 
> 标签：android, video, opencv, camera, autofocus

我在使用 android 拍摄视频时遇到自动对焦问题`opencv`。我发现很多解决方案建议我使用`mCamera`. 但是它仅用于拍照。是否有任何功能`OpenCV`可以将视频捕获设置为自动对焦模式。

另一件事是我使用`opencv4android`教程 4 作为我的基本代码。代码使用`mOpenCvCameraView`对象来控制`camera`和查看。谁能建议我如何自己获取`mCamera`或`VideoCapture`反对和设置参数

# jquery - 在 jquery 中使用 css

> ID：13836750
> 
> 赞同：0
> 
> 时间：2012-12-12T09:36:13.730
> 
> 标签：jquery

我正在使用以下代码。第一个`if`条件有效，但第二个`if`条件无效。我不知道为什么？第二个也应该应用相同的 CSS `if`。谁能告诉我这是为什么？

```
<script type="text/javascript">
    if (location.pathname.indexOf("girl-clothing") != -1) {
        $(".RetailPriceValue").css("cssText", "margin: -203px 0 0 0 !important;");
    }

    if (location.pathname.indexOf("http://www.xyz.com/girl-clothing/?sort=featured&page=2")!= -1) {
        $(".RetailPriceValue").css("cssText", "margin:-220px 0 0 0 !important;");
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:24:12.650

如果你的 location.href 是[http://www.xyz.com/girl-clothing/?sort=featured&page=2](http://www.xyz.com/girl-clothing/?sort=featured&page=2)

location.pathname 将是“/girl-clothing/”，因此 indexOf 函数永远不会找到字符串“http://”

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:38:53.220

使用类似的东西

```
$(".RetailPriceValue").css( "margin","-220px 0 0 0 !important"); 
```

所以试试吧

```
if (location.pathname.indexOf("girl-clothing") != -1) {
    $(".RetailPriceValue").css("margin","-203px 0 0 0 !important");
}

if (location.pathname.indexOf("http://www.xyz.com/girl-clothing/?sort=featured&page=2")!= -1) {
    $(".RetailPriceValue").css( "margin","-220px 0 0 0 !important");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:40:58.690

我想第一次风格改变是巧合。您实际上要添加的是：

```
<div style="cssText: margin: -203px 0 0 0 !important;"></div> 
```

这里的问题是显而易见的。试试这个：

```
if (location.pathname.indexOf("girl-clothing") != -1) {
    $(".RetailPriceValue").css("margin", "-203px 0 0 0 !important;");
}

if (location.pathname.indexOf("http://www.xyz.com/girl-clothing/?sort=featured&page=2")!= -1) {
    $(".RetailPriceValue").css("margin", "-220px 0 0 0 !important;");
} 
```

# python - 动态字符串格式化

> ID：13836751
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:36:14.237
> 
> 标签：python, string-formatting

我必须从文件中读取并使用字符串格式以表格的形式打印输出这是我写的一个例子

```
def timesplit(m,n):
    count=0
    for i in m:
        if i>=n:
            count+=1
    return count
f=open("/home/chandra.pradyumna/logs.properties")
line=f.readlines()
if line[1][-2]=='1':
    k=line[3][line[3].find("=")+1:-1].split(",")
    l=line[4][line[4].find("=")+1:-1].split(",")
print k,l
print "%9s|"*len(k)+"%9s"*len(l)%timesplit(k[0],Exec),timesplit(k[1],Exec),timesplit(k[2],Exec),timesplit(k[3],Exec),timesplit(l[0],Update),timesplit(l[1],Update),timesplit(l[2],Update),timesplit(l[3],Update) 
```

Exec 和 Update 是包含范围 (0,50) 中的浮点数的列表

我正在阅读的文件如下

```
#Enable timesplts=1 else=0
timesplits = 1
#The specific time splits
Exectimespilt=10,15,20,30
Updatetimesplit=10,15,20,30 
```

输出应为表格格式

```
--------------------------------------------------------------------------
 hour  |exec(>10)|exec(>15)|exec(>20)|exec(>30)|update(>10)|update(>15)|update(>20)|update(>30)
-------------------------------------------------------------------------------
hour-1 |3        |5        |7        |4       |5           |2          |  3        |5        
--------------------------------------------------------------------------------
hour-2 |2         |3        |4        |5       |1           |2          |5 
```

使用 timesplit() 将数据填充到表中。

那么我如何根据 k 和 l 中的元素数量在此处动态执行字符串格式化。这是一个示例，除了这两个之外，该表还有许多其他组件提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:49:15.550

我会分别格式化每个条目，然后将它们连接在一起：

```
print ",".join("%9s" % timesplit(i, ...) for i in k), "|", ",".join("%9s" % timesplit(i, ...) for i in l) 
```

如果这就是你的意思。

请注意，您的函数`timesplits()`在您调用`timesplit()`.

我也不知道您的第二个参数（`Exec`resp. `Update`）在这种情况下应该是什么以及它如何与`n`函数中的参数匹配。

# ios - 将 xcode 分析器与 calabash 测试框架集成

> ID：13836752
> 
> 赞同：2
> 
> 时间：2012-12-12T09:36:18.527
> 
> 标签：ios, xcode, testing, calabash

我想与内存分析器一起测试我的 iOS 应用程序。我希望将 XCode 内置的内存分析器与 Calabash 测试工具一起使用。但我不能同时运行两者。我想要的是在测试应用程序时集成两者并分析内存使用情况。如果葫芦不能做到这一点，我想知道至少 XCode 自动化工具可以与 XCode 内存分析器集成。

有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-01T13:38:47.533

这是可能的，但结果很难理解。我用它来追踪 Calabash iOS 服务器中的漏洞。

您需要一个 Automation + Leaks/Allocations 模板，并且您需要使用 TEMPLATE 环境变量。

下次我使用此技术时，我将生成一个描述该过程的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:20:02.913

我找不到同时使用 Calabash 工具和 Allocations 工具的方法。但我找到了一种同时使用分配工具和自动化工具的方法。在 XCode profiler 中首先选择自动化工具，然后单击工具栏中的库工具。之后添加您需要的工具（在本例中为分配工具）

# spring - 在 Spring MVC 中映射 Ajax 请求：不允许出现错误 405 方法

> ID：13836755
> 
> 赞同：2
> 
> 时间：2012-12-12T09:36:27.270
> 
> 标签：spring, jquery, spring-mvc

进行 ajax 调用后，我收到错误 405 方法不允许。我正在使用 Spring 3.0.1，Spring-web 3.0.1。

这是控制器映射

@Controller 公共类 AjaxController {

```
@RequestMapping(value = "/ajaxaction",
       method = RequestMethod.POST,
                 headers ="content-type=application/json")
public @ResponseBody Collection<Employee> serveAjaxRequest(@RequestBody ReqParam reqParam){
    List<Employee> empList = new ArrayList<Employee>();
    System.out.println("Req obj:: " + reqParam.getA() + " " + reqParam.getB()
            + " " + reqParam.getC() + " " + reqParam.getD() + " " + reqParam.getE());
    Employee e1 = new Employee();
    e1.setFirstName("Vaibhav");
    e1.setLastName("Raj");
    e1.setEmail("vraj3@sapient.com");
    e1.setTelephone("1111111111");
    e1.setReturnMessage("Message one!!");
    Employee e2 = new Employee();
    e1.setFirstName("Ajay");
    e1.setLastName("Singh");
    e1.setEmail("asingh@gmail.com");
    e1.setTelephone("2222222222");
    e1.setReturnMessage("Message two!!");
    empList.add(e1);
    empList.add(e2);
    return empList;
} 
```

)

和ajax调用的Jquery代码：

功能：提交Ajax（）{

```
$('#g').bind('click', function(evt) {
 alert($('form').serialize());
 formData = $('form').serialize();
 $.ajax({
 url: "/ajaxaction.html",
 type: 'POST',
 dataType: 'json',
 data: formData,
 success: function(data) {
          alert(data);
          },
 error: function(){
    alert("Error!!");
    }
   });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:42:46.723

当使用来自 Spring 控制器的 JSON 响应时，您需要定义 Accept 标头。默认情况下，Spring 将 Accept 标头定义为 html。添加标题：

```
headers = "Accept=application/json" 
```

修改您的方法注释并将其更改为：

```
@RequestMapping(value = "/ajaxaction",
       method = RequestMethod.POST,
                 headers ="Accept:*/*")
public @ResponseBody Collection<Employee> serveAjaxRequest(@RequestBody ReqParam reqParam) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:39:58.370

从错误中可以看出，这可能是您的问题：

> @RequestMapping(value = "/ajaxaction", method = RequestMethod.POST, headers="content-type=application/json")

您可以使用 firebug 检查请求标头。是否有“内容类型”的标题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:41:27.540

尝试使用 `contentType: 'application/json'`ajax 选项设置请求内容类型。

```
$('#g').bind('click', function(evt) {
alert($('form').serialize());
formData = $('form').serialize();
$.ajax({
url: "/ajaxaction.html",
type: 'POST',
dataType: 'json',
data: formData,
contentType: 'application/json',
success: function(data) {
      alert(data);
      },
error: function(){
  alert("Error!!");
  }
   });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T12:12:30.773

嗨，我遇到了同样的错误，我通过将 Ajax 调用从 get 更改为 post 来解决此问题，因为我在 @RequestMapping 注释中提到的方法为 RequestMethod.POST 与您相同。

但我正在调用该方法。检查你的ajax调用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-13T13:42:51.033

为 RESTful Web 服务启用跨域请求，从[这里获取帮助](https://spring.io/guides/gs/rest-service-cors/)

# tfs - TFS 2010：将“工作项”类型从“产品待办事项”更改为“任务” - 如何？

> ID：13836757
> 
> 赞同：11
> 
> 时间：2012-12-12T09:36:30.617
> 
> 标签：tfs, tfs-workitem

我想在 TFS 2010 中更改“工作项”的*类型*：我在 Product Backlog 中输入了一个工作项（我们使用的是 Scrum 模板），然后我输入了几个“子”任务，但我输入为“产品待办事项”。我应该将它们作为“任务”输入。如何将它们更改为显示为任务 - 原始“工作项”的子项。

上一个问题：[更改 TFS 工作项类型](https://stackoverflow.com/questions/2586063/change-tfs-work-item-type)

会表明这并不简单。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-06-29T18:42:38.287

@PortageMonkey 对您引用的问题的回答几乎包含您需要的内容。

> 如前所述，您不能直接更改工作项类型，但是有一个不错的快捷方式可以为这些场景节省大量时间。它会自动复制链接到更改集、测试用例等。
> 
> 1.  右键单击您的工作项并选择“创建工作项的副本”
> 2.  将弹出以下对话框窗口，您可以在其中更改新项目的工作项类型：
>     ![显示工作项类型选项的对话框屏幕截图](../Images/5428d2a7d0e7fe6b536b0042a4975005.png)
>     结果：使用新类型创建新工作项，旧工作项自动添加为链接，并在历史记录区域添加注释说明从中复制它的工作项 ID。

因此，通过在复制对话框中选择“任务”，使用此功能将它们复制并同时转换为任务。复制完成后，将原始项目标记为“已删除”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-21T15:52:45.170

现在可以通过右键单击 Web 视图中的工作项并选择更改类型来更改工作项的类型：

[![](../Images/f7bb054644687115f2a8fcf4bc8c9d91.png)](https://i.stack.imgur.com/VvNmy.png)

[![](../Images/93cc470be9c24e36a1c40a8ffd3ba9cc.png)](https://i.stack.imgur.com/RX1fz.png)

这是上面屏幕截图中引用的[链接。](https://docs.microsoft.com/en-us/azure/devops/boards/backlogs/move-change-type)

# java - 通过 facebook 分享时出错

> ID：13836758
> 
> 赞同：1
> 
> 时间：2012-12-12T09:36:31.693
> 
> 标签：java, android, facebook

我想通过 Facebook 分享文本，所以点击此链接[http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr](http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr)，但在“FACEBOOK”的位置出现错误“因为facebook无法解决或不是一个领域..

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // Add it to Library
    final SocialAuthAdapter adapter = new SocialAuthAdapter(new ResponseListener());
    adapter.addProvider(Provider.FACEBOOK, R.drawable.facebook);
    adapter = new SocialAuthAdapter(new ResponseListener());

    ListView lv= (ListView)findViewById(R.id.listView);  

    lv.setAdapter(new CustomAdapter(this, adapter));
    adapter.enable(share); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:00:05.543

您需要检查导入...您正在导入错误的提供程序。您需要`java.security.Provider`为 Provider 删除或任何其他导入。然后从您添加的库中重新导入正确的提供程序。

# python - Pip install 没有检出正确的分支

> ID：13836759
> 
> 赞同：3
> 
> 时间：2012-12-12T09:36:34.727
> 
> 标签：python, git, ubuntu, pip, puppet

这是我从 puppet 运行的命令：

```
venv/bin/pip install -e git+https://blablabla.com/git/myproject.git@develop#egg=myproject 
```

哪个应该安装开发分支。相反，它不安装任何分支。当我去 venv/src/myproject 并做 git branch 我看到：

```
ubuntu@ubuntu:/usr/service/myproject/venv/src/myproject$ git branch
* (no branch)
  master 
```

我正在使用 Ubuntu 12.04 LTS。可能是什么问题呢？

# javascript - 脚本内的角度范围

> ID：13836765
> 
> 赞同：10
> 
> 时间：2012-12-12T09:36:51.147
> 
> 标签：javascript, angularjs, javascript-framework

我们可以使用在脚本标签内的范围内定义的角度变量，如下所示。

HTML 代码：

```
<div ng-controller="AngularCtrl">
 <script>
  alert($scope.user_name);
 </script>
</div> 
```

JS代码：

```
function AngularCtrl($scope){
 $scope.user_name = 'John';
} 
```

我只是得到'$scope 没有定义'。有人可以帮我解决我在这里做错的事情吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T10:07:47.690

不，你不能。`$scope`仅*在*Angular 内部定义，即在您的`AngularCtrl`-function 内部。有一些方法可以从外部访问角度范围，但这通常是不好的做法，并且表明您没有正确使用 Angular。

做你正在尝试的事情的一个更有角度的方法是让警报成为控制器逻辑的一部分：

```
function AngularCtrl($scope) {

    $scope.user_name = 'John';

    $scope.sayHi = function(){
        alert('Hi ' + $scope.user_name);
    }
} 
```

然后，您可以使用各种角度技术（[Demo Here](http://jsfiddle.net/sveinatle/WqSGR/1)）来调用该`sayHi()`函数。一些例子：

### 响应点击

```
<div ng-click="sayHi()">Demo clickable - Please click me</div> 
```

### 创建/初始化给定元素时自动一次

```
<div ng-init="sayHi()">Demo ng-init</div> 
```

### 初始化时直接从控制器

```
function AngularCtrl($scope) {

    $scope.user_name = 'John';

    $scope.sayHi = function(){
        alert('Hi ' + $scope.user_name);
    }

    // Call it
    $scope.sayHi();
} 
```

希望这些例子能鼓舞人心，但你真正应该做什么取决于你真正想要完成的事情。

# linux - 检查哪个资源正在被哪个进程使用

> ID：13836768
> 
> 赞同：1
> 
> 时间：2012-12-12T09:37:00.763
> 
> 标签：linux, ubuntu, resources, monitoring, selinux

我的系统上运行的进程很少。我需要列出当前哪个进程在我的系统中获得/正在使用其中的一个或多个：

1.  以太网
2.  相机
3.  USB
4.  蓝牙
5.  无线上网
6.  文件系统

等等

有没有办法找到这个？

语言：C/C++

平台：Ubuntu/Fedora（如果需要实现上述，也允许拥有 SELinux）

# mysql - 用户“root”已超出“max_questions”资源

> ID：13836772
> 
> 赞同：2
> 
> 时间：2012-12-12T09:37:14.993
> 
> 标签：mysql, database, database-connection

我收到此错误：

```
ERROR 1226 (42000): User 'root' has exceeded the 'max_questions' resource (current value: 4) 
```

由于这个错误，我什至无法更改数据库中的值。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:51:44.710

更改 root 用户属性，例如 -

```
GRANT USAGE ON *.* TO 'root'@<'host_name'> WITH MAX_QUERIES_PER_HOUR 100 
```

设置 0 以重置限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-15T02:38:41.117

简单的修复方法：

```
User 'root' has exceeded the 'max_questions' resource (current value: 100) 
```

**要解决问题，您必须等待 1 小时才能运行这些命令中的任何一个。因为问题是，最大问题设置为每小时一定数量的请求。如果您尝试在 1 小时结束之前运行这些命令，这些命令将不起作用。所以等1小时..**

*在那之后 1 小时已经过去，然后在终端中按确切顺序运行以下命令：*

```
* mysql -u root -p

* use mysql

* select user, max_questions from user; 

* update user set max_questions = 0 where user = 'root';

* flush privileges;

* select user, max_questions from user; 
```

（如果 root max questions 说 '0' 那么你已经修复了它..现在你完成了）

# javascript - 带有 iframe 的 insertAdjacentHTML 将内容转换为 HTML 实体

> ID：13836773
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:37:14.697
> 
> 标签：javascript, iframe, html-entities

我正在尝试使用在元素末尾插入 iframe `insertAdjacentHTML`。但是由于某种原因，iframe 中的内容变成了 HTML 实体（“<”到 <，“>”到 >）。

为什么会这样？

[这是一个小提琴](http://tinkerbin.com/kalcC63H)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:44:46.570

这不是有效的`IFRAME`语法。看看这个：[http ://tinkerbin.com/zz6MeNYW](http://tinkerbin.com/zz6MeNYW)

`IFRAME`只能包含文本，不能包含 HTML。因此，它将 HTML 转换为字符串。如果浏览器不支持 s ，`IFRAME`则显示s内的文本。`IFRAME`

`IFRAME`s 内容由`SRC`属性定义。

`insertAdjacentHTML`与 a`DIV`相反的作品。见这里：[http ://tinkerbin.com/sNLtSjE7](http://tinkerbin.com/sNLtSjE7)

[MDN 上的 IFRAME 文档](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)

**编辑**

看来您可以使用`SRCDOC`HTML 5 中的属性做您想做的事情。查看 MDN 文档（上图）。但是，这似乎还没有被任何浏览器支持。

# c# - c#如果打印页面> 1，编辑excel文件？

> ID：13836774
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:37:26.213
> 
> 标签：c#, visual-studio, excel

我有一个将大量数据写入 excel 文件的函数。它是动态创建的，在创建时插入标题和标题，而不是使用现有模板。在它打印出大约 6 页的那一刻，我知道我可以使用 xlWorkSheet2.PageSetup.Pages.Count 来获取有多少页，但我想要做的是**检测**何时会打印一个新页面，并在打印之前将我的标题/标题添加到此页面的顶部。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:47:54.803

您可以定义一次标题，然后使用它来设置在每个后续页面上重复的标题范围。

```
xlWorkSheet2.PageSetup.PrintTitleRows = "$1:$1" 
```

# python - sklearn.metric 分类报告的精度

> ID：13836775
> 
> 赞同：2
> 
> 时间：2012-12-12T09:37:30.080
> 
> 标签：python, scipy, scikit-learn

我想知道是否有可能在 sklearn (scikit) 中使用分类报告的逗号后获得更多数字。

自动取款机看起来像这样：

> ```
>  precision    recall  f1-score   support
> 
>       1       0.61      0.73      0.67     71194
>       2       0.64      0.33      0.43     13877
>       3       0.56      0.59      0.57     61591
>       4       0.64      0.51      0.57     13187
>       5       0.66      0.69      0.67     57530
>       6       0.54      0.06      0.11      2391
>       7       0.54      0.40      0.46     30223 
> ```
> 
> 平均/总计 0.60 0.60 0.60 249993

我认为这种方法不可能，但也许有人有同样的想法（可能）。

我知道`sklearn.metrics.precision_score`存在，尽管分类报告是一次显示所有结果的好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:30:30.650

[根据源代码](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/metrics/metrics.py)不可能。请参见第 819 和 830 行，格式字符串被硬编码为`%0.2f`. 如果你真的想要它，只需在你的本地文件中更改它`sklearn/metrics/metrics.py`。更好的是，添加一个`classification_report`带有精度数字的参数并使用它。并将您的补丁提交给项目！

# memory-management - LD 指令期间的操作系统和硬件角色

> ID：13836780
> 
> 赞同：0
> 
> 时间：2012-12-12T09:37:42.347
> 
> 标签：memory-management, operating-system, virtualization

将虚拟地址的内容加载到特定寄存器时，*作为该过程的一部分，硬件和操作系统中需要发生的一些一般事件序列是什么*？

例如，LD 0xffe4ca32，R1

用于此的地址是虚拟地址吗？它需要先进行一些地址转换才能获得物理地址。

我的第一个问题是，

```
 When this instruction executes, how is this instruction handled by the Hardware and Operating System? 
```

我的第二个问题是，

```
 Is the "value" of that virtual address, 0xffe4ca32, the contents of its mapped physical address or is it the physical address itself? 
```

*我只是不清楚正在加载到 R1 中的内容*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:18:13.750

这里：

1.  让我们假设 x86。首先，CPU 要求 MMU（内存管理单元）翻译地址。首先，MMU 检查称为 TLB（翻译后备缓冲区）的东西，其中存储了最近从虚拟到物理的翻译。如果存在，则返回引用的地址。否则，MMU 在页表中查找地址。如果该页面是仅主管页面，或标记为不存在于内存中的页面，则 CPU 将引发保护错误或页面错误。对于保护故障，操作系统通常会终止负责的进程，但它会这样做。对于页面错误，操作系统然后检查它自己的特殊页面结构，以查看该页面是否已被调出，或者它是否不存在。如果它已被分页，则将其读入内存中的某个页面，并且虚拟地址被重新映射到那个新位置。如果找不到空间，则会将另一个页面放在磁盘上以腾出空间（其中很多称为抖动）。如果它没有被调出，操作系统很可能会终止该进程，因为它正在尝试引用一个不存在的页面。
2.  映射的物理地址的值。从用户空间的角度来看，虚拟内存指针的行为就像物理内存指针一样。在内核空间中，由于需要物理内存访问，因此存在一些复杂性（这通常通过称为身份分页的方式实现，其中前几百页直接映射到其相应的物理内存。

# uninstallation - 如何卸载 cabal、cabal-nirvana 和 yesod

> ID：13836782
> 
> 赞同：1
> 
> 时间：2012-12-12T09:37:50.907
> 
> 标签：uninstallation, cabal, yesod

我正在尝试找到一种方法从我的系统中删除 cabal/cabal-nirvana/yesod，我确实安装了 cabal

```
sudo apt-get install cabal-install 
```

其次我想删除我安装的 cabal-nirvana

```
cabal install cabal-nirvana 
```

最后删除我使用该命令的 yesod

```
cabal install yesod-platform 
```

目前我已经看到存在一个**/home/username/.cabal**文件夹，我只想让我的机器尽可能接近以前的状态（在尝试安装 yesod 之前），这意味着删除所有这些安装的东西。

网上有很多关于安装的信息，但是这似乎不适用于卸载过程。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:05:27.437

我猜你要找的是：

```
sudo apt-get --purge remove 'package-name' 
```

这应该连同所有的绒毛一起删除软件包，我假设您使用的是基于 Debian 的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T22:41:08.593

我在 xubuntu 下，“sudo apt-get --purge remove yesod”用于删除 yesod，至于 cabal，我的错误是我使用“cabal”而不是“cabal-install”，所以它会是

“apt-get remove cabal-install”，现在它已被删除。

# java - 抑制已编译 MATLAB > Java 程序的控制台 (disp) 输出（使用 MATLAB 编译器）

> ID：13836783
> 
> 赞同：1
> 
> 时间：2012-12-12T09:37:53.103
> 
> 标签：java, matlab, console, matlab-deployment

**编辑 2**在收到 Mathworks 支持的回复后，我自己回答了这个问题。简而言之，有一个选项类`MWComponentOptions`在实例化时传递给导出的类。除其他外，这可以为错误输出和常规输出（即来自`disp()`-liked 函数）指定唯一的打印流。感谢所有的回复：）

==================================================== ===================

只是一个简单的问题 - 有什么方法可以防止 MATLAB 代码在`disp`编译后使用（和类似的）函数输出到 Java 控制台？MATLAB 中有用的调试信息很快就变成了 Java 日志中令人讨厌的额外文本。

我使用的编译工具是 MATLAB Compiler（我认为它与 MATLAB Builder JA 不同，但我可能错了）。我在该命令上找不到任何好的文档，`mcc`所以不确定是否有任何选项。

当然，如果这是不可能的，并且是编译器将所有 MATLAB 代码转换为其 Java 等效代码的直接后果，那么这是完全可以理解的。

提前致谢

**编辑**这对于仅在 Java 端处理错误报告也很有用——目前所有 MATLAB 错误都被发送到控制台，无论它们是否被捕获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:17:57.757

我收到了对 Mathworks 支持的请求，他们提供了以下解决方案：

在创建任何已导出的类时，您可以指定一个`MWComponentOptions`对象。这在 R2012b 中没有得到很好的记录，但是对于我想要的，下面的例子可以工作：

```
MWComponentOptions options = new MWComponentOptions();
PrintStream o = new PrintStream(new File("MATLAB log.log"));

options.setPrintStream(o); // send all standard dips() output to a log file
// the following ignores all error output (this will be caught by Java exception handling anyway)
options.setErrorStream((java.io.PrintStream)null);

// instantiate and use the exported class
myClass obj = new myClass(options);
obj.myMatlabFunction();
// etc... 
```

**更新**

如果有人确实想抑制所有输出，则套管最终会导致`null`部署中。抑制所有输出的更好方法是使用创建一个虚拟打印流，例如：`java.io.PrintStream``NullPointerException`

```
PrintStream dummy = new PrintStream(new OutputStream() {
    public void close() {}
    public void flush() {}
    public void write(byte[] b) {}
    public void write(byte[] b, int off, int len) {}
    public void write(int b) {}
} ); 
```

然后使用

```
options.setErrorStream(dummy); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:02:15.047

如果在已部署的应用程序（例如 MATLAB Compiler 或 Builder JA）中运行，该`isdeployed`函数返回 true，在实时 MATLAB 中运行时返回 false。

`disp`您可以用块包围您的语句`if isdeployed`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:33:40.543

如果您有一个独立的应用程序并且根本不想打扰类，那么另一个可能的黑客攻击：

在编译期间使用 evalc 并部署您的函数名称：

```
function my_wrap()
    evalc('my_orig_func(''input_var'')');
end 
```

并像这样编译

```
mcc -m my_wrap my_orig_func <...> 
```

好吧，这显然是另一个黑客。

# java - 创建超过 30GB 的 EC2 实例 - 在 Java 中

> ID：13836784
> 
> 赞同：2
> 
> 时间：2012-12-12T09:37:56.857
> 
> 标签：java, sdk, amazon-ec2, amazon, instance

当我构建一个 EC2 实例 m1.small （例如）时，默认我得到 30gb 而不是 160gb。

我在谷歌看到我需要添加临时存储/实例存储存储。我的问题是：有没有办法使用 java sdk 添加临时存储？如果我创建一个标准卷为 160gb 的实例（使用 sdk），我会像创建常规实例并为其附加一个新卷一样收费吗？

更一般地说，所以当他们写一个实例有 160gb 时，这意味着我只有 30gb 和另一个 140gb，我应该只用于我不介意丢失的临时文件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:44:35.613

您不应该尝试使堆大小远大于主内存大小。AFAIK EC2 不提供主内存超过 160 GB 的机器（我可能错了）[http://aws.amazon.com/ec2/instance-types/](http://aws.amazon.com/ec2/instance-types/)

如果你在谈论这个实例

```
M1 Small Instance – default++

1.7 GiB memory
 1 EC2 Compute Unit (1 virtual core with 1 EC2 Compute Unit)
 160 GB instance storage
 32-bit or 64-bit platform
 I/O Performance: Moderate
 EBS-Optimized Available: No
 API name: m1.small 
```

这读作，您可以使用大约 1.2 到 1.5 GB 的堆和 160 GB 的本地磁盘空间。

AFAIK，您可以将存储作为常规文件访问。

顺便说一句：Java 在大堆大小上执行 Full GC 可能需要越来越长的时间。根据您的系统，最差的时间可能是每 1-4 GB 1 秒。您可以期望一个具有 160 GB 堆的系统可以看到 40 秒的 stop-the-world GC。

出于这个原因，经常探索堆外选项，例如使用数据库、BigMemory 或使用直接内存/内存映射文件。

# c++ - 将 QList 复制到另一个 QList

> ID：13836788
> 
> 赞同：-2
> 
> 时间：2012-12-12T09:38:03.510
> 
> 标签：c++

我在将列表复制到另一个列表时遇到问题。

下面是我的代码片段。

宣言

```
void setData(QList<datadetails> &Data);
--------------------------------------------
void MyClass:: setData( QList<datadetails> &Data)
{
     mywindow->m_dataDetails = Data;
} 
```

下面是错误

'void MyClass::setData(int &)' : 在 'ComponentInterface' 中找不到重载的成员函数

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:55:18.163

好吧，它有助于你正确地声明你的函数：

> 无效 setData(QList &Data);

..应该在类声明中。您刚刚声明了一个全局函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:47:03.017

也许你的意思是：

```
void MyClass::setData(Qlist<datadetails>& Data) {
  mywindow->m_dataDetails = Data;
} 
```

从代码的任何部分：

```
Qlist<datadetails> data;
MyClass mc;
mc.setData(data); 
```

# javascript - 如何使用 jQuery 删除重复的内容/值

> ID：13836789
> 
> 赞同：1
> 
> 时间：2012-12-12T09:38:04.930
> 
> 标签：javascript, jquery, duplicates

所以，我有 span 元素，我在其中附加了一些内容 - 有时这些内容是重复的。如何删除与另一个重复的这个值...

这是我的输出 html 的样子：

```
<span class="some_class">
   "value01" 
   "value01" 
   "value02" 
   "value03" 
   "value03" 
</span> 
```

我无法添加任何功能，因为我不知道该怎么做，你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:55:43.297

如果这些值是由 JS 代码添加的，那么你可以这样：

[http://jsfiddle.net/Sahadar/Nzs52/5/](http://jsfiddle.net/Sahadar/Nzs52/5/)

您只需要创建一个对象，它将存储放置在这个范围内的所有字符串，然后在插入之前检查这个插入的字符串是否已经在存储对象中。

```
function(event) {
        var textareaValue = textarea.value();
        if(insertedTexts[textareaValue]) {
             event.preventDefault();
             textarea.value('');                         
         } else {
             insertedTexts[textareaValue] = true;
             someSpan.append("\""+textareaValue+"\"");
         }
    } 
```

如果这些值已经在 span 内，请使用如下函数：

```
var someSpan = $('.some_class');
var insertedTexts = [];

var result = someSpan.text().match(/"\w+(?=\")/gm);
result = result.map(function(value) {
    return value.substring(1,value.length);
});
result.forEach(function(value) {
    if(insertedTexts.indexOf(value) === -1) {
        insertedTexts.push(value);
    }
});
var newSpanText = "\""+insertedTexts.join('""')+"\"";
someSpan.text(newSpanText);
console.info(result, insertedTexts); 
```

它正在重建跨度文本（修剪等），但保留了主要功能。

jsFiddle 工作副本：

[http://jsfiddle.net/Sahadar/kKNXG/6/](http://jsfiddle.net/Sahadar/kKNXG/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:04:48.303

创建数组变量

```
var vals = []; 
```

它跟踪项目。然后，在将项目附加到跨度检查的函数中：

```
if (vals.indexOf("Mynewvalue") > -1) {
  // Add to the span...
} 
```

# android - 在最后一步中使用 HoloEverywhere 时出错

> ID：13836792
> 
> 赞同：1
> 
> 时间：2012-12-12T09:38:06.867
> 
> 标签：android, actionbarsherlock, android-holo-everywhere

我正在尝试将 HoloEveryWhere 与 ABS 一起使用。我从一个答案中遵循了这个小教程：[导入 HoloEverywhere 时出错](https://stackoverflow.com/questions/10608539/error-importing-holoeverywhere/10888882#10888882)

最后一步说在我的清单中添加这个：

```
<application android:icon="@drawable/ic_launcher" 
android:label="@string/app_name" 
android:theme="@style/Theme.HoloEverywhereDark.Sherlock"> 
```

我已经添加了主题，但它在 Eclipse 中给了我一个错误。

```
error: Error: No resource found that matches the given name (at 'theme' with value '@style/
 Theme.HoloEverywhereDark.Sherlock'). 
```

我该如何解决这个问题？我肯定在我的应用程序中将 ABS 和 HE 作为库导入。我也将 ABS 作为库导入到 HE 中。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:14:17.263

使用@style/Holo.Theme

由于 1.3 (?) 主题名称已更改为 Holo.Theme[.Light[.DarkActionBar]].Sherlock。自 1.4 起删除了后缀 .Sherlock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:55:56.223

只需将清单更改为以下

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Holo.Theme.Light.DarkActionBar" > 
```

它像魅力一样工作

# c# - 堆栈跟踪中的 +number 是什么意思

> ID：13836794
> 
> 赞同：4
> 
> 时间：2012-12-12T09:38:15.353
> 
> 标签：c#, stack-trace

我有一个错误，显示如下：

```
[OverflowException: Value was either too large or too small for a Decimal.]
System.Decimal..ctor(Double value) +0
System.Decimal.op_Explicit(Double value) +30
MyMethod(int myParameter) +5174
AnotherMethod(int myParameter) .... 
```

+5174 是什么意思？这不是行号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:41:39.717

这将是 IL 偏移量，当没有 PDB 文件/调试信息存在时会发生这种情况。

您可以为发布程序集生成 PDB 数据，这样可以更直接地跟踪问题。

# sql-server - EXECUTE 后的事务计数表明 BEGIN 和 COMMIT 的数量不匹配 - 存储过程？

> ID：13836798
> 
> 赞同：1
> 
> 时间：2012-12-12T09:38:24.203
> 
> 标签：sql-server, stored-procedures, transactions

我收到有关提交的异常，但不确定我的存储过程到底出了什么问题。我已经阅读了其他问题的答案，但无法找到提交计数到底在哪里弄乱了。

我使用的存储过程如下：

```
USE [AFS_GROUP]
GO
/****** Object:  StoredProcedure [dbo].[SBO_SP_TransactionNotification]    Script Date: 12/12/2012 10:41:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER proc [dbo].[SBO_SP_TransactionNotification] 

@object_type nvarchar(20),              -- SBO Object Type
@transaction_type nchar(1),         -- [A]dd, [U]pdate, [D]elete, [C]ancel, C[L]ose
@num_of_cols_in_key int,
@list_of_key_cols_tab_del nvarchar(255),
@list_of_cols_val_tab_del nvarchar(255)

AS

begin

-- Return values
declare @error  int             -- Result (0 for no error)
declare @error_message nvarchar (200)       -- Error string to be displayed
select @error = 0
select @error_message = N'Ok'

IF @object_type = 13 AND @transaction_type = 'A'
BEGIN
  UPDATE INV1   
  SET U_jnl1='N', U_jnl2='N', U_jnl3='N', U_jnl4='N'
  WHERE DocEntry = @list_of_cols_val_tab_del    

  DECLARE @CallIDo13 VARCHAR(10) = (SELECT TOP 1 [U_HEATID] FROM OINV WHERE [DocEntry] = @list_of_cols_val_tab_del);
  DECLARE @DocNumo13 VARCHAR(MAX) = (SELECT TOP 1 [DocNum] FROM OINV WHERE [DocEntry] = @list_of_cols_val_tab_del);
  EXEC [AFSJHBSQL01].[HEAT].[dbo].[uspCreateJournalFromINV] @CallIDo13, @DocNumo13, @object_type;
END
ELSE IF @object_type = 14 AND @transaction_type = 'A'
BEGIN
  UPDATE RIN1
  SET U_jnl1='N', U_jnl2='N', U_jnl3='N', U_jnl4='N'
  WHERE DocEntry = @list_of_cols_val_tab_del
END
ELSE IF @object_type = 15 AND @transaction_type = 'A'
BEGIN
  UPDATE DLN1
  SET U_jnl1='N', U_jnl2='N', U_jnl3='N', U_jnl4='N'
  WHERE DocEntry = @list_of_cols_val_tab_del    

  DECLARE @CallIDo15 VARCHAR(10) = (SELECT TOP 1 [U_HEATID] FROM ODLN WHERE DocEntry = @list_of_cols_val_tab_del);
  DECLARE @DocNumo15 VARCHAR(MAX) = (SELECT TOP 1 [DocNum] FROM ODLN WHERE DocEntry = @list_of_cols_val_tab_del);
  EXEC [AFSJHBSQL01].[HEAT].[dbo].[uspCreateJournalFromDN] @CallIDo15, @DocNumo15, @object_type;
END
ELSE IF @object_type = 16 AND @transaction_type = 'A'
BEGIN
  UPDATE RDN1
  SET U_jnl1='N', U_jnl2='N', U_jnl3='N', U_jnl4='N'
  WHERE DocEntry = @list_of_cols_val_tab_del
END
ELSE IF @object_type = 17 AND @transaction_type = 'A'
BEGIN
  DECLARE @ItemCode VARCHAR(MAX) = (SELECT TOP 1 [ItemCode] FROM [RDR1] WHERE [DocEntry] = @list_of_cols_val_tab_del AND ([ItemCode] = 'VIU Chip Prod' OR [ItemCode] = 'FPR Chip Production'));
  DECLARE @Desc VARCHAR(MAX) = (SELECT TOP 1 [CardName] FROM ORDR WHERE [DocEntry] = @list_of_cols_val_tab_del);
  --DECLARE @CallID VARCHAR(10) = (SELECT TOP 1 [U_HEATID] FROM ORDR WHERE [DocEntry] = @list_of_cols_val_tab_del);
  IF (@ItemCode = 'VIU Chip Prod')
  BEGIN
      EXEC [AFSJHBSQL01].[HEAT].[dbo].[uspCreateHeatJobFromSO] @list_of_cols_val_tab_del, @ItemCode, @Desc;
      --RETURN;
  END
  ELSE IF(@ItemCode = 'FPR Chip Production')
  BEGIN
      EXEC [AFSJHBSQL01].[HEAT].[dbo].[uspCreateHeatJobFromSO] @list_of_cols_val_tab_del, @ItemCode, @Desc;
    --RETURN;
  END
END
--------------------------------------------------------------------------------------------------------------------------------
-- Select the return values
select @error, @error_message
END 
```

# c#-3.0 - 它是使用界面的正确方法吗？

> ID：13836802
> 
> 赞同：0
> 
> 时间：2012-12-12T09:38:27.557
> 
> 标签：c#-3.0

接口如何知道调用哪个类方法？这是正确的代码吗？或不

```
namespace IntExample
{
    interface Iinterface
    {
       void add();
       void sub();
    }
    public partial class Form1 : Form,Iinterface
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void add()
        {

            int a, b, c;
            a = Convert.ToInt32(txtnum1.Text);
            b = Convert.ToInt32(txtnum2.Text);
            c = a + b;
            txtresult.Text = c.ToString();

        }
        public void sub()
        {

            int a, b, c;
            a = Convert.ToInt32(txtnum1.Text);
            b = Convert.ToInt32(txtnum2.Text);
            c = a - b;
            txtresult.Text = c.ToString();

        }

        private void btnadd_Click(object sender, EventArgs e)
        {
            add();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            sub();
        }

        class cl2 : Form1,Iinterface
        {

            public void add()
            {

                int a, b, c;
                a = Convert.ToInt32(txtnum1.Text);
                b = Convert.ToInt32(txtnum2.Text);
                c = a + b;
                txtresult.Text = c.ToString();

            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:48:19.450

接口不“知道”要调用哪个类方法。它只是*定义*了可用的方法。

您发布的代码不会编译，因为`cl2`没有实现`sub`方法，但无论如何它几乎没有意义。

我不知道您要做什么，因此我将举例说明界面的有效用法。

您可以有多个表单实现该接口，然后在您的主表单中，您可以根据索引或名称选择要显示的表单中的哪一个。

因此，要存储所有表单，您可以使用通用列表：

```
List<Iinterface> forms = new List<Iinterface>(); 
```

将实现接口的所有表单添加到列表中：

```
forms.Add(new Form1());
forms.Add(new Form2());
forms.Add(new Form3());
//... 
```

然后您可以显示特定的表单并从界面调用方法：

```
//find by index:
forms[index].Show();
forms[index].add();

//find by name:
string name="form 2";
Iinterface form = forms.Find(f => f.Name == name);
if (form != null)
{
    form.Show();
    form.add();
} 
```

# ios - 通过导航栏的布尔槽返回按钮

> ID：13836809
> 
> 赞同：0
> 
> 时间：2012-12-12T09:39:07.840
> 
> 标签：ios, delegates, protocols, parameter-passing

我有两个viewController，viewControllerB，当通过navigationBar 的后退按钮返回viewControllerA 时，我要你传递一个布尔值。我使用了协议但不起作用。

在 ViewControllerB.h

```
 @protocol detailProgrammFiereDelegate <NSObject>
 @required
 -(void) addItemViewController: (ViewControllerB *)programmFiere withBool:(BOOL)booleanFiere;
 @end

 .....
 @property (nonatomic, weak)id <detailProgrammFiereDelegate>delegate;
 ....... 
```

在 ViewControllerB.m 中

```
- (void)viewDidLoad
{
     ......

     BOOL booleanFiere =YES;
    [self.delegate addItemViewController:self withBool:booleanFiere];
 } 
```

在 ViewControllerA.h 中

```
@interface ViewControllerA: UIViewController <detailProgrammFiereDelegate> 
```

在 ViewControllerA.m 中

```
-(void)addItemViewController:(DetailProgrammFiere *)programmFiere withBool:(BOOL)booleanFiere{

     //after pressing back button of viewControllerB not enter into this method. Why?

    if (booleanFiere){ //is already true before opening the ViewControllerB. Why?
        [self viewDidLoad];
    }
}
........

 -(void)getInformationsFiere:(id)sender{ //method that open ViewControllerB

     ViewControllerB * detailFiere =[[ViewControllerB alloc]initWithNibName:@"ViewControllerB~iPhone" bundle:nil];

    detailFiere.delegate =self;

    [self.navigationController pushViewController:detailFiere animated:YES];

   } 
```

在打开 ViewControllerB 之前布尔值已经为真，这不应该发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:47:47.530

如果要从B返回A时传递参数，则不应将调用委托方法放在viewDidLoad中。B 的 viewDidLoad 在 B 是 alloc 和 init 的时候会被调用，但是当 B 被 pop B 返回到 A 时不会被调用。这也是为什么在 B 出现之前，A 的 booleanFiere 已经是 YES 的原因。

你可以把

```
 [self.delegate addItemViewController:self withBool:booleanFiere]; 
```

就在 B 的 [self.navigationController popViewControllerAnimated:YES] 之前，而不是在 B 的 viewDidLoad 中。所以A的-addItemViewController:会在返回的时候调用

# android - 安卓布局（TextView）

> ID：13836814
> 
> 赞同：1
> 
> 时间：2012-12-12T09:39:23.903
> 
> 标签：android, android-layout, android-intent, android-emulator

我是 android 开发的新手，对布局设计有一些疑问。我有以下代码，但它没有按我的意愿工作。我想让图像视图显示我拍摄的照片，并在其下方显示一个供用户输入数据的文本框。但是，此时，图像占据了整个屏幕，我找不到我的文本框。请多多指教。谢谢！

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:id="@+id/linear">

    <ImageView android:id="@+id/imageView1"
        android:layout_width="fill_parent" android:layout_height="fill_parent" 
        android:contentDescription="@string/desc"/>

    <EditText
        android:id="@+id/editTextSimple1"
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <requestFocus />
    </EditText>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:41:21.683

将 ImageView 布局高度更改为`layout_height="wrap_content"`
With layout_height="fill_parent"，图像将占据所有空间。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:id="@+id/linear">

    <ImageView android:id="@+id/imageView1"
        android:layout_width="fill_parent" 
android:layout_height="wrap_content"  
        android:contentDescription="@string/desc"/>

    <EditText
        android:id="@+id/editTextSimple1"
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <requestFocus />
    </EditText>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:45:44.600

问题是

```
android:layout_height ="fill _parent" 
```

这使它占据了整个父空间，即整个屏幕

将高度设置为 dp、px 等的特定值。或者使用

```
android:layout_height="wrap_content" 
```

如果视图足够小以适合屏幕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:55:18.277

使用 RelativeLayout 而不是 LinearLayout 并使用下面的 xml 代码而不是您的 xml 代码，它将解决您的问题。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/editTextSimple1"
        android:contentDescription="desc" />

    <EditText
        android:id="@+id/editTextSimple1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:44:43.303

```
<ImageView android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:contentDescription="@string/desc"/> 
```

像这样为您的 ImageView 添加权重。它会起作用的。

# javascript - 将上传的文件作为参数传递给 javascript 方法

> ID：13836817
> 
> 赞同：1
> 
> 时间：2012-12-12T09:39:33.480
> 
> 标签：javascript, jquery

我将上传的文件作为 JavaScript 方法中的参数传递。然后 Firebug 会抛出类似`SyntaxError: illegal character`.

```
<input type="file" id="fileUpload" name="employerLogoUpload" />

<a id="_fileUploadLink" href="#" onClick="javascript:ajaxFileUpload(" +document.getElementById('fileUpload').value+ ");">Upload</a> 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:56:04.893

如果您想使用内联事件属性，请将您的`onclick`处理程序更改为如下所示：

```
onClick="ajaxFileUpload(document.getElementById('fileUpload').value);" 
```

这将在单击时调用该`ajaxFileUpload()`函数并将`fileUpload`元素的当前值传递给它。

您的 onclick 方式如下所示：

```
onClick="javascript:ajaxFileUpload(" 
```

...并且`+document.getElementById('fileUpload').value+ ");"`之后*不是*onclick 的一部分-该属性以其右引号结尾。（此外，您不需要`javascript:`任何内联事件处理程序中的部分。）

但是由于您使用 jQuery 标记了问题，您可能会丢失内联代码并将以下内容放在元素之后的脚本块中和/或文档就绪处理程序中：

```
$("#_fileUploadLink").click(function(e) {
    ajaxFileUpload($("#fileUpload").val());
    e.preventDefault();
}); 
```

当`.preventDefault()`您单击链接时，它可以阻止浏览器移动到文档的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:47:50.077

```
function ajaxFileUpload(val){
   ...
}

$(document).ready(function(){

   $('a#_fileUploadLink').on('click', function(){

       var val = $('#fileUpload').val();  

       ajaxFileUpload(val);

   });

}); 
```

# ios - IOS - 在沙盒环境中的模拟器中购买应用程序非常慢

> ID：13836818
> 
> 赞同：9
> 
> 时间：2012-12-12T09:39:37.933
> 
> 标签：ios, in-app-purchase, app-store-connect

我正在为我的 iphone 应用程序开发应用程序购买功能。沙盒环境似乎很慢，有时甚至需要超过 30 秒才能出现确认警报，然后再需要 30 秒或更长时间才能输入我的凭据。沙盒环境是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:20:29.303

它通常比生产慢一点，但不会那么慢。

# php - 在 PHP 中对该数组进行排序的最短方法？

> ID：13836822
> 
> 赞同：0
> 
> 时间：2012-12-12T09:39:43.003
> 
> 标签：php, arrays

我有这个数组：

```
array
  0 => 
    array
      'action_operator' => string 'by_fixed' (length=8)
      'action_amount' => string '10.0000' (length=7)
      'sort_order' => string '0' (length=1)
  1 => 
    array
      'action_operator' => string 'by_percent' (length=10)
      'action_amount' => string '10.0000' (length=7)
      'sort_order' => string '1' (length=1)
  ... 
```

我想根据从最低（在本例中为 0）开始的 sort_order 键对其进行排序。我知道我可以迭代等等，但是实现这一目标的最短代码是什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T09:43:40.990

```
<?php

usort( $aData, function( $a, $b ) {
  return ($a['sort_order'] < $b['sort_order'] ? 1 : -1);
} ); 
```

使用 PHP7，您应该能够使用 spaceship 运算符：

```
usort( $aData, function( $a, $b ) {
  return $a['sort_order'] <=> $b['sort_order'];
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:46:12.383

使用 usort 的单行：

```
usort($array, function($a, $b) { return $a['sort_order'] - $b['sort_order']; }); 
```

# c# - 禁用列表视图时在列表视图中启用分页。ASP.NET C#

> ID：13836823
> 
> 赞同：3
> 
> 时间：2012-12-12T09:39:45.557
> 
> 标签：c#, asp.net, listview, paging

我有一个按钮 (Bearbeitung_Click) 来禁用/启用具有批量内联编辑的列表视图。这是因为它并不总是可编辑的。我希望 LayoutTemplate 中的 DataPager 不断启用，以便即使禁用编辑，用户仍然可以浏览页面。

我的包含数据分页器的模板的 .aspx 代码是：

```
 <LayoutTemplate>
            <table runat="server">
                <tr runat="server">
                    <td runat="server">
                        <table ID="itemPlaceholderContainer" runat="server" border="1" 
                            style="background-color: #FFFFFF;border-collapse: collapse;border-color: #999999;border-style:none;border-width:1px;font-family: Verdana, Arial, Helvetica, sans-serif;">
                            <tr runat="server" style="background-color: #E0FFFF;color: #333333; font-size:smaller;">
                                <th runat="server">
                                    </th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                                <th runat="server">
                                    Example</th>
                            </tr>
                            <tr ID="itemPlaceholder" runat="server">
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr runat="server">
                    <td runat="server" 
                        style="text-align: center;background-color: #5D7B9D;font-family: Verdana, Arial, Helvetica, sans-serif;color: #FFFFFF">
                        <asp:DataPager ID="DataPager1" runat="server" Enabled="true">
                            <Fields>
                                <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" 
                                    ShowNextPageButton="False" ShowPreviousPageButton="False" />
                                <asp:NumericPagerField />
                                <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="True" 
                                    ShowNextPageButton="False" ShowPreviousPageButton="False" />
                            </Fields>
                        </asp:DataPager>

                    </td>
                </tr>
            </table>
        </LayoutTemplate> 
```

我的按钮代码和更改页面大小是：

```
 protected void PageSize_Changed(object sender, EventArgs e)
    {
        DataPager pager = ListView1.FindControl("DataPager1") as DataPager;
        if (string.IsNullOrEmpty(tb_page.Text) || tb_page.Text == "0")
        {
            label.Text = "Number required";
        }
        else
        {
            /*pager.PageSize = Convert.ToInt32(page_size_dropdown.SelectedValue);*/
            pager.PageSize = Convert.ToInt32(tb_page.Text);
            label.Text = "";
        }
    }

    protected void Bearbeitung_Click(object sender, EventArgs e)
    {
        DataPager pager = ListView1.FindControl("DataPager1") as DataPager;

        if (ListView1.Enabled == true)
        {
            ListView1.Enabled = false;
            cmdUpdate.Enabled = false;
            btn_Bearbeitung.Text = "Bearbeitung";
            cmdDelete.Enabled = false;
            LinqDataSource1.DataBind();
            ListView1.DataBind();
        }
        else
        {
            ListView1.Enabled = true;
            cmdUpdate.Enabled = true;
            cmdDelete.Enabled = true;
            btn_Bearbeitung.Text = "Disable Editing"; 
        }
    } 
```

我试过 Datapager.Enabled = true; 和这种变化，但没有成功。它似乎没有启用的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:36:47.883

找到了解决方案。我将 Datapager 从列表视图中取出并使用 PagedControlID="IdOfListView"。这意味着禁用列表视图这一事实不会影响数据分页器，因此它仍然可以正常工作。

# java - 选择组合框项目时如何启用标签和文本字段

> ID：13836829
> 
> 赞同：-1
> 
> 时间：2012-12-12T09:39:59.500
> 
> 标签：java, swing, actionlistener, jcombobox, jtextfield

我创建了一个组合框，其中两个项目分别为“ `Active`”和“ `Droped`”，然后我在jcomboobx 中`label`使用`jtextfield`并编写`enable and disable`标签和 jtextfield 的`action event`代码，因此代码可以正常工作，但这里有一个问题是标签和 jtextfield 最初没有被禁用......当我选择项目“ `Droped`”然后在运行jframe时选择项目“ `Active`”，`disabled`否则 我想要`initially``label and jtextfield enabled``how to jlablel and Jtextfield enable when jcombobx select item " Droped " only`

**源代码：**

```
private void wtdlActionPerformed(java.awt.event.ActionEvent evt) {                                     

        txt_reason.setEnabled(false); //txt_reason is jTextField
        lab.setEnabled(false); //lab is jLabel

        if(wtdl.getSelectedItem().equals("Active")) //wtdl is jConobbox
        {
        txt_reason.setEnabled(false);
        lab.setEnabled(false);
        }
      else if(wtdl.getSelectedItem().equals("Droped"))
        {
        txt_reason.setEnabled(true); 
        lab.setEnabled(true);
        }
    } 
```

**检查快照：**

![在此处输入图像描述](../Images/86c43eff0b4da646be5476312d0203a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:57:37.293

只需创建一个方法`updateState()`如下：

```
protected void updateState() {
    boolean enabled = wtdl.getSelectedItem().equals("Droped");
    txt_reason.setEnabled(enabled ); 
    lab.setEnabled(enabled );
} 
```

并在您初始化组件并在您的`actionPerformed()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:52:05.973

除非我误解了：

您应该在创建组件后添加代码以设置`JTextField`和`JLabel` *禁用*via 。`setEnabled(false)`

如果您使用的是 IDE，我确定您可以通过右键单击组件并导航到属性来设置组件的属性（这当然会成为`JFrame`创建时的默认设置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:53:03.143

创建组件后，您可以禁用 JTextField。例如：
`JTextField txtYourTextField = new JTextField();`

`txtYourTextField.setEnabled(false);`

# wordpress - Wordpress page.php 源代码

> ID：13836830
> 
> 赞同：3
> 
> 时间：2012-12-12T09:40:00.460
> 
> 标签：wordpress

```
<div class="row clearfix">
    <div class="content-wrap ninecol clearfix">
        <div class="content">
           <h1 class="title">Om oss</h1>
           <hr>
           <div class="entry-content">
           <h4>Vilka är Unified Sweden?</h4>
           <p>Unified Sweden är en webbyrå som ständigt strävar </p>
        </div>
    <div>
 </div> 
```

如果我想把它作为一个模板，以便我可以将它用于其他页面，是下面的代码吗？

```
<div class="content-wrap ninecol clearfix">
    <div class="row clearfix">
        <div class="content">
            <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                 <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>

                 <?php the_content(); ?>

            <?php endwhile; endif; ?>
        </div>
    <div>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T09:55:17.527

您应该查看[Wordpress 模板层次结构](http://codex.wordpress.org/Template_Hierarchy)和[页面模板](http://codex.wordpress.org/Pages#Page_Templates)。

您应该创建一个名为`page-<something-you-want>.php`. 打开文件并为其添加模板名称并添加您的内容。

例如：

```
<?php
/*
 * Template Name: A Static Page
 */
get_header(); ?>

<whatever content you want to add>

<?php get_footer(); ?> 
```

然后转到`Add new Page`，在`Page Attribute`框中，您会看到一个名为 的下拉菜单`Template`。您选择称为 `A Static Page`（或上面以其他方式定义）的模板并发布页面。就这样。

**获取内容**

要在 Wordpress 中获取内容，您需要[The Loop](http://codex.wordpress.org/The_Loop)

```
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post();       
  the_content(); // displays whatever you wrote in the wordpress editor
  endwhile; endif; //ends the loop
 ?> 
```

回到你的案例：

```
 <div class="sevencol">
   <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
       <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
         <div>
           <?php the_content(); ?>
         </div>
  <?php endwhile; endif; ?>
 </div> 
```

# ruby-on-rails-3 - 按关联表的列排序

> ID：13836831
> 
> 赞同：0
> 
> 时间：2012-12-12T09:40:05.017
> 
> 标签：ruby-on-rails-3, postgresql, associations

我正在尝试从关联表中获取特定订单。这是我的设置：

我有一次旅行，其中添加了旅行地点。Triplocation 表有一列定义了位置的顺序，其中有一列名为 location_order。现在，当我在 show 方法中收集我的单程旅行时，我想在此列上订购。

我已经尝试过`@trip = Trip.find(params[:id], :order=> 'triplocations.location_order')`，但出现以下错误：

```
PG::Error: ERROR:  missing FROM-clause entry for table "triplocations" LINE 1: ....* FROM "trips"  WHERE "trips"."id" = $1 ORDER BY triplocati... 
```

任何想法如何让我的 location_order 得到订购？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:23:26.960

听起来您希望对triplocations 关联进行排序，即`@trip.trip_locations`按位置顺序排序。

我建议将默认范围添加到`TripLocation`：

```
default_scope :order => 'location_order DESC' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:28:28.380

首先，find 只会给你一个记录，所以你要么想用 where 要么 find all。

其次，如果您想返回 TripLocations，而不是行程，您需要使用它开始查询

尝试这个：

```
TripLocations.where(:trip_id => params[:id]).order(:location_order) 
```

如果您想订购旅行中的位置，您也可以通过模型中的关联来完成

```
# load the trip
@trip = Trip.find(params[:id])

# order the locations
@locations = @trip.triplocations.order(:location_order) 
```

# css - Firefox 图像精灵显示 alt 文本

> ID：13836832
> 
> 赞同：0
> 
> 时间：2012-12-12T09:40:05.990
> 
> 标签：css, firefox

在 Web 应用程序中，我使用具有替代文本的图像精灵。但在 Firefox 中，只有实际的 alt-text 会覆盖屏幕上的图像。

```
<img width="36" height="36" class="step1Current" title="Step 1" alt="Quote step one image"> 
```

它的类是：

```
.step1Current{
    background: url(../images/progress-sprites.png) no-repeat;  
    background-position: 0px 0px ;
    width: 36px;
    height: 36px;   
} 
```

因此，图像上覆盖了文本“引用第一步图像”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:46:19.853

`img`您不应该在标签上使用背景。

如果您不指定`src=""`上帝知道会发生什么，则`alt`应该出现。

内联精灵：[http ://css-tricks.com/css-sprites-with-inline-images/](http://css-tricks.com/css-sprites-with-inline-images/)

现场演示：[http ://css-tricks.com/examples/CSSClip/](http://css-tricks.com/examples/CSSClip/)

关键是`clip`属性，它一直有效到 IE6。

# google-maps - DirectionsService - 3 次请求后 OVER_QUERY_LIMIT？

> ID：13836834
> 
> 赞同：0
> 
> 时间：2012-12-12T09:40:20.913
> 
> 标签：google-maps, google-maps-api-3

这是我的代码：

```
function traceRoute(part, arr) {
    var polylineTrattaTreno = new Array();
    var request = {
        origin: part,
        destination: arr,
        travelMode: google.maps.TravelMode.TRANSIT
    };

    directionsService.route(request, function (response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            ... manage my data
        } else {
            console.log(status);
        }
    });
} 
```

我注意到如果我调用这个函数 3 次，一切正常！比我总是得到`OVER_QUERY_LIMIT`。尝试将超时设置为 1 或 2 秒。但什么也没有发生。似乎我不能做超过 3 个时间请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:10:02.230

根据[文档](https://developers.google.com/maps/documentation/directions/#Limits)-

> 使用 Google Directions API 的查询限制为每天 2,500 个路线请求。当交通方式为驾车、步行或骑自行车时，每次路线搜索都将计入您的每日配额中的单个请求。搜索**公交** 路线将计为 4 个请求。

添加到它 -

> 此外，请注意，在 URL 编码之前，Directions API URL 限制为 2048 个字符。由于某些路线服务 URL 可能涉及沿路径的多个位置，因此在构建 URL 时请注意此限制。

您的出发地和目的地值可能相当遥远，并且考虑到您正在使用运输方向这一事实，导致很快达到限制。

**更新 -**如果您将模式设置为“过境”，您还必须指定出发时间或到达时间。

# linq-to-sql - 如何编写 linq to sql 查询以获取最后一条记录？

> ID：13836835
> 
> 赞同：0
> 
> 时间：2012-12-12T09:40:21.803
> 
> 标签：linq-to-sql

记录是这样输入的。

```
id     message    timestamp
1      hi         12-12-2012 11.00
2      gii        12-12-2012 11.01 
```

如何编写基于时间戳获取新消息记录的查询？我的意思是最后一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:00:41.627

使用`[Max](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.max.aspx)`方法。

```
DateTime[] arr = new DateTime[] 
    { DateTime.Today, DateTime.Today.AddDays(1), DateTime.Today.AddDays(2) };
DateTime lastEntity = arr.Max(x => x.Date);  // equals DateTime.Today.AddDays(2) 
```

# javascript - 如何使用 javascript 访问文本文件？

> ID：13836844
> 
> 赞同：0
> 
> 时间：2012-12-12T09:40:43.010
> 
> 标签：javascript, jquery, ajax

我正在对以下文本文件进行 jquery ajax 调用：

```
sport=Table Tennis&groups=no&no_groups=&grp_names=&teams=1^China^6157~2^Finland^6158~3^Sweden^6159~4^Japan^6149~5^Korea^6154&Endstr=End 
```

通话工作正常。但我真的不知道如何从上面的文本文件中访问一个特定的值，比如“中国”？我是第一次尝试 tis。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:45:35.190

[这是`parseParams`](https://gist.github.com/956897)可用于将查询字符串拆分为数组的[插件。](https://gist.github.com/956897)

你可以像这样使用它：

```
var querystring = 'sport=Table Tennis&groups=no&no_groups=&grp_names=&teams=1^China^6157~2^Finland^6158~3^Sweden^6159~4^Japan^6149~5^Korea^6154&Endstr=End';
var paramsObj = $.parseParams(querystring);
alert(paramsObj.sport); // = Table Tennis 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:48:13.083

不要使用这样的文件结构。请改用 JSON。IE：

```
{
   "sport":"Table Tennis",
   "groups":false,
   "no_groups":"",
   "grp_names":[

   ],
   "teams":[
      {
         "China":6157
      },
      {
         "Finland":6158
      },
      {
         "Sweden":6159
      },
      {
         "Japan":6149
      },
      {
         "Korea":6154
      }
   ],
   "Endstr":"End"
} 
```

然后，在使用 $.get 或 $.ajax 解析它之后，您只需访问：

```
data.sports 
```

例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:03:31.303

这是解析数据的代码。如果您选择 JSON 作为返回数据，那将是直截了当的。

```
function myParser() {

    var str = "sport=Table Tennis&groups=no&no_groups=&grp_names=&teams=1^China^6157~2^Finland^6158~3^Sweden^6159~4^Japan^6149~5^Korea^6154&Endstr=End";
    var arPairs = str.split("&");
    var outObj = {};
    for (var i=0; i < arPairs.length; i++) {
      var arTemp = arPairs[i].split("=");
      var key = arTemp[0];
      var value = arTemp[1];
      if (key === "teams") {
        arTemp = value.split("~");
        var teamObj = {};
        for (var j=0; j < arTemp.length; j++) {
          var arTeamData = arTemp[j].split("^");
          teamObj[arTeamData[1]] = arTeamData[2];
        }
        value = teamObj;
      }
      outObj[key] = value;
    }
    return outObj;
} 
```

输出：是一个包含所有可用数据的数组。您可以将其称为：

var outObj = myParser(); 控制台.log(outObj.sport); // 打印“乒乓球” console.log(outObj.teams.china) // 打印中国数据

# web-services - 在tomcat上出现CXF错误的Restful webservice

> ID：13836847
> 
> 赞同：2
> 
> 时间：2012-12-12T09:40:45.353
> 
> 标签：web-services, spring, rest, tomcat, cxf

我用 CXF 开发了 Restful webservice。它在开发中运行良好。当我在 tomcat 上部署战争时，它不起作用。它在战争启动时抛出错误。

**错误日志：**

```
Dec 12, 2012 2:56:00 PM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restContainer': Invocation of init method failed; nested exception is org.apache.cxf.service.factory.ServiceConstructionException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1422)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.apache.cxf.transport.servlet.CXFServlet.createSpringContext(CXFServlet.java:160)
    at org.apache.cxf.transport.servlet.CXFServlet.loadBus(CXFServlet.java:74)
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.init(CXFNonSpringServlet.java:71)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.apache.cxf.service.factory.ServiceConstructionException
    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:201)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1546)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1487)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1419)
    ... 38 more
Caused by: java.lang.NullPointerException
    at org.apache.cxf.ws.discovery.listeners.WSDiscoveryServerListener.startServer(WSDiscoveryServerListener.java:64)
    at org.apache.cxf.bus.managers.ServerLifeCycleManagerImpl.startServer(ServerLifeCycleManagerImpl.java:61)
    at org.apache.cxf.endpoint.ServerImpl.start(ServerImpl.java:146)
    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:192)
    ... 45 more
Dec 12, 2012 2:56:00 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /samplews threw load() exception 
```

**cxf-servlet.xml**

```
<beans 
    xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xmlns:beans='http://www.springframework.org/schema/beans'
 xmlns:jaxrs="http://cxf.apache.org/jaxrs"
 xmlns:context="http://www.springframework.org/schema/context"
 xsi:schemaLocation="
 http://www.springframework.org/schema/beans 
 http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
 http://cxf.apache.org/jaxrs 
 http://cxf.apache.org/schemas/jaxrs.xsd
 http://www.springframework.org/schema/context 
 http://www.springframework.org/schema/context/spring-context.xsd">

  <jaxrs:server id="restContainer" address="/" >
            <jaxrs:serviceBeans>
        <ref bean="webServiceImpl" />
     </jaxrs:serviceBeans>  

        </jaxrs:server>

     <bean id="webServiceImpl" class="com.sample.services.rest.WebServiceImpl" />
     <bean id="jaxbProvider" class="org.apache.cxf.jaxrs.provider.JAXBElementProvider"/>  

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:45:49.920

如果它在开发中运行良好，我会担心在 dev 上使用相同版本的 JDK、Spring、CXF 和 Tomcat。在 Tomcat 上使用的环境首先在 dev.xml 中复制问题。您不应该在生产中执行调试。

我最近也遇到了同样的 NullPointerException，问题是上面提到的四件事之间的版本不匹配。一定要小心他们。

# javascript - 显示/隐藏 div，使用纯 JS

> ID：13836848
> 
> 赞同：4
> 
> 时间：2012-12-12T09:40:49.437
> 
> 标签：javascript, jquery, html, css

我的 CSS：

```
#a_x200{
    visibility: hidden;
    width: 200px;
    height: 200px;
    background-color: black;
} 
```

我的 JS：

```
<script type="text/javascript">
    function show(id) {
        document.getElementById(id).style.display = 'block';
    }
</script> 
```

我的 HTML

```
<div id="a_x200">asd</div>
<innput type="button" class="button_p_1" onclick="show('a_x200');"></input> 
```

不工作我想我错过了什么！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T09:45:22.670

尝试这个：

```
document.getElementById('a_x200').style.visibility = 'visible'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T10:02:03.920

**你可以试试这段代码：**

```
HTML Code:
        <div id="a_x200" style="display:none;">asd</div>
        <input type="button" class="button_p_1" onclick="showStuff('a_x200');"></input>

Java script:

<script type="text/javascript">
function showStuff(id) {
        document.getElementById(id).style.display = "block";
}
</script> 
```

试试这个代码，它会解决你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T09:55:43.470

在这里，您可以看到我在 jquery [Show/Hide 中使用 jquery](http://jsfiddle.net/tolla/eMXrH/)创建的一个示例。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<style>
.slidingDiv {
    height:300px;
    background-color: #99CCFF;
    padding:20px;
    margin-top:10px;
    border-bottom:5px solid #3399FF;
}

.show_hide {
    display:none;
}

</style>
<script type="text/javascript">

$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    });

});

</script>

<a href="#" class="show_hide">Show/hide</a>
<div class="slidingDiv">
Fill this space with really interesting content. <a href="#" class="show_hide">hide</a></div>​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T09:45:16.283

您`visibility: hidden`用来隐藏它，然后尝试使用`display`CSS 属性使其可见。它们是两个完全独立的属性，改变一个不会神奇地改变另一个。

如果要使其再次可见，请将`visibility`属性的值更改为`visible`：

```
document.getElementById('a_x200').style.visibility = 'visible'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T09:43:31.090

你的输入是错过spled

应该是这样的：

我的JS

```
<script type="text/javascript">
function showStuff(a_x200) {
        document.getElementById(a_x200).style.display = 'block';
}
</script> 
```

我的 HTML

```
<div id="a_x200">asd</div>
<innput type="button" class="button_p_1" onclick="showStuff('a_x200');"></input> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T09:43:55.863

尝试这个...

```
function showStuff(id) {
    document.getElementById(id).style.display = 'block'; // OR
    document.getElementById(id).style.visibility = 'visible'; 
} 
```

**编辑**

如果您注意到您的按钮单击`onclick="showStuff('a_x200');"`。您已经将 id 作为参数发送给您的函数..所以我正在使用该参数并使用它。

在你的情况下有参数但没有使用它......虽然它做同样的事情......

**或者**你可以这样做

```
<input type="button" class="button_p_1" onclick="showStuff();"></input>  // omitting double 'n'

function showStuff() {
    document.getElementById('a_x200').style.display = 'block';
}  // missing curly bracket 
```

这两者都做同样的事情

# php - Yii中如何提高CGridView的性能

> ID：13836850
> 
> 赞同：3
> 
> 时间：2012-12-12T09:40:51.477
> 
> 标签：php, yii

我只是好奇 CGridView 在 Yii Framework 中的表现。我用 Yii 构建了一个简单的应用程序。在模型的管理页面上，简单地列出所有记录，分页 (30/page) 和自定义排序，到目前为止效果很好。

但我发现渲染 CGridView 需要 4-5 秒。在 4-5 秒内呈现 30 条记录页面是否正常？感觉有点慢啊！因为它不是一个复杂的表，只有 8 列。生成的 SQL 查询运行速度很快（在 2-3 毫秒内完成），尽管包括一些关系。

我google了很多优化，找到了这个官方文档： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.performance](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance)

专注于CGridView的问题，我尝试使用缓存，发现[COutputCache](http://www.yiiframework.com/doc/api/1.1/COutputCache)是​​一个非常好的帮手。

我的做法是在Controller的filter()函数中添加COutputCache：

```
public function filters()
{
    return array(
        'accessControl', // perform access control for CRUD operations
        array(  'COutputCache+admin,_lists',   'duration' => 600,'varyByParam'=>array('sort','page'),     ),
    );
} 
```

您可以添加普通视图页面和部分页面，以秒为单位设置过期时间，并告诉 Yii 检测缓存更改的参数。

当您重新访问页面时，这会很有帮助，包括排序和分页。将页面渲染时间降低到**40-50 毫秒**，这太棒了！

但是我还没有找到加速第一次渲染的好方法。你有什么好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T23:59:33.153

在我的情况下，性能低下的原因是数据列使用 html 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T17:38:37.537

You´ve got to check the sorting, whenever the sorting field is not an index you will get slow results from the query built by Yii

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:20:24.203

首先，在您的网页中显示您的日志以查看发生了什么，以便我们提供帮助。

第二，不，这不正常。¿ 你在哪个服务器上？你在使用 CActiveRecord 关系吗？多少？也许答案只是使用 CDbCriteria.with 来不延迟加载相关表。

# php - 我可以制作 Expression Web 4 荣誉指令的预览窗格吗？

> ID：13836854
> 
> 赞同：1
> 
> 时间：2012-12-12T09:41:13.697
> 
> 标签：php, expression-web

我有一个使用全局`header.inc`文件的网站，其中包含我想要在每个 HTML 页面顶部的标题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Language" content="de-at" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <link rel="stylesheet" type="text/css" href="standard.css.php" />
  ...etc... 
```

因此，页面本身如下所示：

```
<?php include "header.inc"; ?>
  <title>Page Title</title>
  <style type="text/css">
    /* additional style sheets for only this page */
  </style>
</head>

<body>
  ... 
```

显然，Expression Web 抱怨未打开的`</head>`标签并忽略了头文件中存在的内容（例如样式表），这使得预览窗格相当无用。

由于 EW4 应该与 PHP 一起“很好地工作”，有没有办法让预览窗格尊重`include`s？我已经告诉 EW 在哪里可以找到`php-cgi.exe`，所以在*浏览器预览*中一切正常。

# ruby-on-rails - RVM 安装后 Rails 出现问题

> ID：13836855
> 
> 赞同：1
> 
> 时间：2012-12-12T09:41:18.877
> 
> 标签：ruby-on-rails, ruby, version, rvm

在执行以下操作之前，我安装了 Rails 3.2.9。

我使用命令'curl -L [https://get.rvm.io](https://get.rvm.io) |安装了 RVM。bash -s stable --ruby' 指的是[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/.)

然后使用命令 rvm install [x]'（[x] 代表版本）安装了 ruby​​ 1.8.7 和 1.9.3，我使用命令 'rvm use 1.9.3 --default' 将 ruby​​ 1.9.3 设置为默认值。早些时候，我使用的是在安装 RVM 之前安装的“1.8.7”。现在，当我在命令提示符中键入“rails -v”时，出现以下错误。

> /usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [bundler-1.2.3, rake-10.0.2, rubygems-bundler-1.1.0, rvm-1.11.3.5] (Gem::LoadError) from /usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:256:in`to_spec' 来自 /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:1208:in 'gem' 来自 /usr/local/垃圾箱/导轨：18

请帮我解决同样的问题。好的回应将永远受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:14:58.863

由于您使用的是 rvm，因此您需要在执行 rails -v 之前安装 rails 3.2.9 尝试此命令

```
gem install rails -v 3.2.9 
```

然后尝试 rails -v

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T03:28:34.063

从问题本身可知，问题出在某些 gem 依赖项上。因此，在设置 RVM 后，我再次使用 gem 命令更新了 gem 并安装了 rails。然后重新启动终端。哇，它有效！'rails -v' 输出 Rails 3.2.9。

还有一件事我想告诉你，如果你使用 bash，只需在设置默认 ruby​​ 版本之前执行命令'/bin/bash --login'。否则会抛出如下所示的错误。

'RVM 不是一个函数，用 'rvm use ...' 选择红宝石将不起作用。

感谢您的所有回复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T10:17:11.913

尝试通过 --default 设置默认的 ruby​​ 版本

```
rvm use 1.9.3 --default 
```

# ice - 在 Visual Studio 中使用 ICE 时未解决的外部符号错误

> ID：13836868
> 
> 赞同：1
> 
> 时间：2012-12-12T09:41:46.337
> 
> 标签：ice

我在 Visual Studio 2010 中使用了 ICE(www.zeroc.com/ice.html)，已经包含了“include”和“lib”目录，但是未能构建项目。像这样的错误：

```
error LNK2019: unresolved external symbol.
fatal error LNK1120: 111 unresolved externals. 
```

有什么建议和帮助吗？

# objective-c - 如何在 insertRowsAtIndexPaths 之后保持当前单元格显示

> ID：13836869
> 
> 赞同：1
> 
> 时间：2012-12-12T09:41:47.753
> 
> 标签：objective-c, ios, uitableview

我有`UITableView`20 个单元格，并显示第一个单元格，我在后台加载更多数据，加载数据后，我在原始 20 个单元格之前插入 10 个单元格。我想要`UITableView`仍然显示原始的第一个单元格（其他方式在插入后显示 No.11 单元格）。我使用以下代码：

```
// before insert 10 item, the UITableView(_contentTable) has 20 cell and displaying the first cell
// newItems is an NSArray has 10 item.
// insert 10 data to the data source (_contents)
if ( [newItems count] )
{
    for ( NSUInteger i = [newItems count]; i > 0; --i )
    {
        [_contents insertObject:[newItems objectAtIndex:i - 1] atIndex:0];
    }
}
// make the indexPaths for insertRowsAtIndexPaths
NSMutableArray *indexPaths = [[NSMutableArray alloc] initWithCapacity:newItems.count];
for (NSUInteger i = 0; i<newItems.count; ++i) {
    [indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
    }
    [_contentTable beginUpdates];
    // insert cell
    [_contentTable insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationNone];
    // scrall to number 10 cell, make the UITableView looks like nothing happen on the background
    NSIndexPath *path = [NSIndexPath indexPathForRow:10 inSection:0];
    [_contentTable scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionTop animated:NO];

    [_contentTable endUpdates]; 
```

该代码的问题是表格将向上滚动（可能由 引起`insertRowsAtIndexPaths`，我使用了参数`UITableViewRowAnimationNone`但表格仍然滚动）和向下（可能由 引起`scrollToRowAtIndexPath`）2 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:17:36.657

```
// scrall to number 10 cell, make the UITableView looks like nothing happen on the background
NSIndexPath *path = [NSIndexPath indexPathForRow:10 inSection:0];
[_contentTable scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionTop animated:NO]; 
```

如果您不希望表格视图滚动，您可以删除上面的代码。

# c# - 如何在 RDLC 报告中管理 System.OutOfMemory 和 SQL 超时异常

> ID：13836871
> 
> 赞同：1
> 
> 时间：2012-12-12T09:41:58.700
> 
> 标签：c#, exception-handling, rdlc

我制作了一个基于 SQL 数据库中的数据生成报告的应用程序。该应用程序适用于条目数量较少的报告，但在某些情况下，我会收到 OutOfMemory 异常或数据库超时异常。我的问题是如何管理这些异常，以便将所有数据正确写入报告中？我在我的应用程序中使用 C#（在 VS 2010 中）和 RDLC 报告。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:47:13.707

`System.OutOfMemory`除了给你的电脑增加内存之外，你不能做任何事情。要使用超时，您可以增加超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:55:11.177

您无法真正“处理”异常以在报告中获取所有数据。你可以调整超时，但它不会让你走得太远。

您可以做的是防止异常：

*   对于 OutOfMemoryException ：您不应该计算聚合或做大部分计算报告方面。您可能依赖视图或 OLAP 来完成大部分计算。
*   对于 TimeOutException，与内存的答案相同。但是您应该首先依赖查询优化（索引、查询提示）以及存储过程而不是非常复杂（编译时间长）的动态查询

# ssis - DFT中的脚本任务没有被执行

> ID：13836874
> 
> 赞同：2
> 
> 时间：2012-12-12T09:42:16.567
> 
> 标签：ssis

我有一个场景，我必须从未知的 excel 文件及其未知的选项卡中获取数据。所以我创建了一个有 50 列的表。 ![在此处输入图像描述](../Images/a1080341a407d16bed0133baa0be42be.png)

问题是进入第二个循环后 ssis 包没有进展。第一个循环获取文件名，第二个循环获取该文件中的选项卡名称。第二个循环中的 DTF 打开 excel 文件选项卡并读取数据并将其写入数据库表 ![在此处输入图像描述](../Images/1d9787206cc5c4b88ddb908a172704dc.png)

我创建了一个单独的变量来存储从 foreach 循环容器中检索的文件名和选项卡名，并在 DTF 任务中使用它们。即使没有任何错误，DFT 任务也会被执行。

在 DFT 中，我只有一个脚本源来打开 excel 文件并读取数据，然后将其传递给 oledb 目标。 ![在此处输入图像描述](../Images/94296691e87cd9f8ef2b103bbc4ee981.png)

在厌倦了所有奇怪的事情之后，现在循环处理了 DFT 任务。在 DFT 上方的 foreach 循环中，我放置了一个脚本任务并弹出了一些测试。MessageBox.Show("blabla")。及其工作。现在怎么办？

下面是脚本任务中的代码。

```
public class ScriptMain : UserComponent
{
    private OleDbDataReader excelReader;
    private OleDbConnection excelConnection;
    private OleDbCommand excelCommand;
    public override void PreExecute()
    {
        base.PreExecute();
        // Open 
        GetDataFromExcelToReader(Variables.IndividualFileNamesForDFT, Variables.IndividualTabNamesForDFT);
    }
    public override void PostExecute()
    {
        base.PostExecute();
        excelReader.Close();
        excelConnection.Close();
    }
    private void GetDataFromExcelToReader(string p_strFileName, string p_strTabName)
    {
        string l_strConnectionString;
        if (File.Exists(p_strFileName))
        {
            string extension = Path.GetExtension(p_strFileName);
            extension = extension.Replace(".", "");
            if (extension.ToLower() == "xlsx")
            {
                l_strConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" +
                "Data Source=" + p_strFileName + ";Extended Properties=\"Excel 12.0;HDR=NO;IMEX=1\";";
            }
            else
            {
                l_strConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" +
                    "Data Source=" + p_strFileName + ";Extended Properties=\"Excel 4.0;HDR=NO;IMEX=1\";";
            }
            excelConnection = new OleDbConnection(l_strConnectionString);
            excelConnection.Open();
            excelCommand = excelConnection.CreateCommand();
            excelCommand.CommandText = "SELECT * FROM [" + p_strTabName + "A1:AX1048576]";
            excelCommand.CommandType = CommandType.Text;
            excelReader = excelCommand.ExecuteReader();
        }
    }
    public override void CreateNewOutputRows()
    {
        int counter = 0;
        while (excelReader.Read())
        {
                Output0Buffer.AddRow();
                Output0Buffer.FileName = Variables.IndividualFileNamesForDFT.ToString();
                Output0Buffer.TabName = Variables.IndividualTabNamesForDFT.ToString();
                Output0Buffer.Col1 = excelReader.FieldCount > 0 ? excelReader[0].ToString() : null;
                Output0Buffer.Col2 = excelReader.FieldCount > 1 ? excelReader[1].ToString() : null;
                Output0Buffer.Col3 = excelReader.FieldCount > 2 ? excelReader[2].ToString() : null;
                Output0Buffer.Col4 = excelReader.FieldCount > 3 ? excelReader[3].ToString() : null;
                Output0Buffer.Col5 = excelReader.FieldCount > 4 ? excelReader[4].ToString() : null;
                Output0Buffer.Col6 = excelReader.FieldCount > 5 ? excelReader[5].ToString() : null;
                Output0Buffer.Col7 = excelReader.FieldCount > 6 ? excelReader[6].ToString() : null;
                Output0Buffer.Col8 = excelReader.FieldCount > 7 ? excelReader[7].ToString() : null;
                Output0Buffer.Col9 = excelReader.FieldCount > 8 ? excelReader[8].ToString() : null;
                Output0Buffer.Col10 = excelReader.FieldCount > 9 ? excelReader[9].ToString() : null;
                Output0Buffer.Col11 = excelReader.FieldCount > 10 ? excelReader[10].ToString() : null;
                Output0Buffer.Col12 = excelReader.FieldCount > 11 ? excelReader[11].ToString() : null;
                Output0Buffer.Col13 = excelReader.FieldCount > 12 ? excelReader[12].ToString() : null;
                Output0Buffer.Col14 = excelReader.FieldCount > 13 ? excelReader[13].ToString() : null;
                Output0Buffer.Col15 = excelReader.FieldCount > 14 ? excelReader[14].ToString() : null;
                Output0Buffer.Col16 = excelReader.FieldCount > 15 ? excelReader[15].ToString() : null;
                Output0Buffer.Col17 = excelReader.FieldCount > 16 ? excelReader[16].ToString() : null;
                Output0Buffer.Col18 = excelReader.FieldCount > 17 ? excelReader[17].ToString() : null;
                Output0Buffer.Col19 = excelReader.FieldCount > 18 ? excelReader[18].ToString() : null;
                Output0Buffer.Col20 = excelReader.FieldCount > 19 ? excelReader[19].ToString() : null;
                Output0Buffer.Col21 = excelReader.FieldCount > 20 ? excelReader[20].ToString() : null;
                Output0Buffer.Col22 = excelReader.FieldCount > 21 ? excelReader[21].ToString() : null;
                Output0Buffer.Col23 = excelReader.FieldCount > 22 ? excelReader[22].ToString() : null;
                Output0Buffer.Col24 = excelReader.FieldCount > 23 ? excelReader[23].ToString() : null;
                Output0Buffer.Col25 = excelReader.FieldCount > 24 ? excelReader[24].ToString() : null;
                Output0Buffer.Col26 = excelReader.FieldCount > 25 ? excelReader[25].ToString() : null;
                Output0Buffer.Col27 = excelReader.FieldCount > 26 ? excelReader[26].ToString() : null;
                Output0Buffer.Col28 = excelReader.FieldCount > 27 ? excelReader[27].ToString() : null;
                Output0Buffer.Col29 = excelReader.FieldCount > 28 ? excelReader[28].ToString() : null;
                Output0Buffer.Col30 = excelReader.FieldCount > 29 ? excelReader[29].ToString() : null;
                Output0Buffer.Col31 = excelReader.FieldCount > 30 ? excelReader[30].ToString() : null;
                Output0Buffer.Col32 = excelReader.FieldCount > 31 ? excelReader[31].ToString() : null;
                Output0Buffer.Col33 = excelReader.FieldCount > 32 ? excelReader[32].ToString() : null;
                Output0Buffer.Col34 = excelReader.FieldCount > 33 ? excelReader[33].ToString() : null;
                Output0Buffer.Col35 = excelReader.FieldCount > 34 ? excelReader[34].ToString() : null;
                Output0Buffer.Col36 = excelReader.FieldCount > 35 ? excelReader[35].ToString() : null;
                Output0Buffer.Col37 = excelReader.FieldCount > 36 ? excelReader[36].ToString() : null;
                Output0Buffer.Col38 = excelReader.FieldCount > 37 ? excelReader[37].ToString() : null;
                Output0Buffer.Col39 = excelReader.FieldCount > 38 ? excelReader[38].ToString() : null;
                Output0Buffer.Col40 = excelReader.FieldCount > 39 ? excelReader[39].ToString() : null;
                Output0Buffer.Col41 = excelReader.FieldCount > 40 ? excelReader[40].ToString() : null;
                Output0Buffer.Col42 = excelReader.FieldCount > 41 ? excelReader[41].ToString() : null;
                Output0Buffer.Col43 = excelReader.FieldCount > 42 ? excelReader[42].ToString() : null;
                Output0Buffer.Col44 = excelReader.FieldCount > 43 ? excelReader[43].ToString() : null;
                Output0Buffer.Col45 = excelReader.FieldCount > 44 ? excelReader[44].ToString() : null;
                Output0Buffer.Col46 = excelReader.FieldCount > 45 ? excelReader[45].ToString() : null;
                Output0Buffer.Col47 = excelReader.FieldCount > 46 ? excelReader[46].ToString() : null;
                Output0Buffer.Col48 = excelReader.FieldCount > 47 ? excelReader[47].ToString() : null;
                Output0Buffer.Col49 = excelReader.FieldCount > 48 ? excelReader[48].ToString() : null;
                Output0Buffer.Col50 = excelReader.FieldCount > 49 ? excelReader[49].ToString() : null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:07:46.437

你真的需要阅读 A1:AX1048576 吗？它是否处理这个并且只阅读它需要的内容？

您可以尝试只读取您需要的 excel 文件的部分吗？例如，如果您有一个 10 列和 400 行的 excel 文件，请尝试读取 A1:Z9999 - 想知道脚本任务是否只是因为试图将所有这些都放入内存而陷入困境，然后由于结果集非常巨大而将其丢弃到磁盘。 .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:58:56.643

@Ciarán - 谢谢，插入选择一个特定的范围，只需打开完整的标签就解决了我的问题。"选择 * FROM [" + p_strTabName + "]"

# c++ - 覆盖 push_back c++

> ID：13836881
> 
> 赞同：2
> 
> 时间：2012-12-12T09:42:37.860
> 
> 标签：c++, inheritance, vector, overriding, overloading

我有一个名为`Path`extends的类`std::vector<Square *>`，其中`Square`也是我创建的一个类。`Path`它将作为实体穿越 2D 环境的指南。我需要获得最长的路径和最短的路径，因此我希望找到`Squares`一个`Path`. 为此，我觉得重载 , 将是有益的`std::vector<Square *>::push_back(const value_type &__x)`，尽管我不确定它的语法是什么。我目前正在尝试这个：

```
class Path : public std::vector<Square *>
{   //... functional stuff, not relevant. 
    int length;
public:
    push_back(const value_type &__x)
    {   Square *last_square = this->at(this->size() - 1);

        // how do I call super class push_back?
        // however that works, I push back &__x square here.

        Square *most_recent = (Square *)&__x;
        int delta_x = compare_distance(last_square, most_recent);
        length += delta_x;
    };
    int path_length() { return length; };
}; 
```

当然，我想我可以只为超类编写一个调用 push_back 的方法，但我觉得重写该函数更简洁，而且学习如何正确重写 stl 函数对我来说是一个好习惯。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T09:46:39.107

> 另外，学习如何正确覆盖 stl 函数对我来说是个好习惯。

事实上，它不是。

STL 容器并不意味着被继承（无`virtual`方法），因此良好的做法是使用组合并为使用 STL 容器方法的类提供*有意义的接口*来实现其目标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T10:10:39.990

您可以覆盖基类中定义的*虚*函数以获得*动态多态性*- 在运行时确定的类型相关行为。

然而，STL 容器使用模板和非虚拟函数来提供*静态多态性*——在编译时确定的类型相关行为。没有要覆盖的虚函数，因此从它们继承没有什么意义。

特别是，您的类*隐藏*了基类函数；任何`push_back`通过指针/引用调用`std::vector`而不是`Path`不会调用您的版本的人，这很可能会导致令人困惑的错误。更好的方法是compisition：

```
class Path {                        // no inheritance
    std::vector<Square *> squares;  // composition instead
public:
    void push_back(Square * x)      // Don't use __ in identifiers
    {
        squares.push_back(x);
        // do other stuff
    }
}; 
```

为了回答代码注释中的问题，如果您确实出于某种奇怪的原因想要使用继承，您可以通过使用基类名称限定成员名称来调用基类版本：

```
std::vector<Square*>::push_back(x); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T10:02:04.530

您使用 a 的事实`std::vector`只是一个实现细节。它也可以是一个`std::list`，甚至是一个`std::set`。

这应该给你一个线索，即你不应该对这种类型过于强烈地承诺。

聚合而不是继承。你继承被重用，我认为这不是你需要的。

此外，使用标准容器的正确方法是不要从它们继承。它们没有虚拟析构函数，也没有要覆盖的虚拟函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:44:46.097

为了增加其他内容，在这种情况下，您将使用组合或私有继承（按条款实现）。

根据经验，提出问题并根据哪个更真实决定使用什么：

*   路径是根据 std::vector 实现的

或者

*   路径是一个 std::vector

如果“Path is a std::vector”更准确（因此 Path 不能是 std::list、或 std::deque 或 MyFunnyContainer），则从 std::vector 派生。如果“路径是根据 std::vector 实现的”更准确，请使用组合或私有继承。

# bash - 有没有办法告诉 unix expand 命令不要改变行尾？

> ID：13836882
> 
> 赞同：0
> 
> 时间：2012-12-12T09:42:39.373
> 
> 标签：bash, unix, cygwin, expand

我正在使用带有 bash shell 的 cygwin 版本的 expand 。

当调用用(空格)`expand`替换所有时，所有换行符结尾也从 更改为。`\t``expand``\n``\r\n`

我正在使用以下 bash 脚本：

```
#!/bin/bash

BRANCH=$1

TMPFILE=/tmp/temporaryExpander

EXTENSIONS=(
    cpp
    cxx
    h
    java
    txt
    cs
    csproj
    vcproj
    sln
    csdproj
)

function TabsToSpacesForFile
{
    relativeFilePath=$1
    absoluteFilePath=`pwd`/$relativeFilePath

    expand --tabs=4 $absoluteFilePath > $TMPFILE
    cat $TMPFILE > $absoluteFilePath
}

for project in `ls $BRANCH`
do
    for extension in "${EXTENSIONS[@]}"
    do
        find $BRANCH/$project -name "*\.${extension}" | while read file; do TabsToSpacesForFile "$file"; done
    done
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:23:08.627

代替：

```
expand --tabs=4 $absoluteFilePath > $TMPFILE
cat $TMPFILE > $absoluteFilePath 
```

为什么不试试：

```
sed -i 's/\t/    /g' $absoluteFilePath 
```

这根本不应该与行尾混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:53:11.060

`dos2unix "$file"`将行尾转换回 unix 样式。

> Dos2unix 软件包包括实用程序“dos2unix”和“unix2dos”，用于将 DOS 或 Mac 格式的纯文本文件转换为 Unix 格式，反之亦然。
> 
> 在 DOS/Windows 文本文件中，换行符（也称为换行符）是两个字符的组合：回车符 (CR) 后跟换行符 (LF)。在 Unix 文本文件中，换行符是单个字符：换行符 (LF)。在 Mac OS X 之前的 Mac 文本文件中，换行符是单个回车 (CR) 字符。现在 Mac OS 使用 Unix 风格 (LF) 换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:17:02.180

怎么样

```
function TabsToSpacesForFile
{
    relativeFilePath=$1
    absoluteFilePath=`pwd`/$relativeFilePath
    absoluteFilePathLineEndings=false
    expand --tabs=4 $absoluteFilePath > $TMPFILE
    file $absoluteFilePath | grep -q CRLF && dos2unix $TMPFILE
    cp $TMPFILE $absoluteFilePath
} 
```

我假设所有都是文本文件；没有二进制文件。

另外，你也许应该`rm $TMPFILE`在最后。如果需要，请引用 $absoluteFilePath 等的变量。

# vba - 复制粘贴 Excel VBA 代码说明

> ID：13836891
> 
> 赞同：1
> 
> 时间：2012-12-12T09:42:58.107
> 
> 标签：vba, excel

这是我在互联网上找到的代码，但我不想使用它，但我不知道它是如何工作的，所以想问是否有人可以为我解释一下？

```
Sub CopyPaste()
Dim sh As Worksheet, Src As Range, Dst As Range
For Each sh In Application.Worksheets
    If sh.Index <> Worksheets.Count Then
        Set Src = sh.Range("A1:L34")
        Set Dst = Worksheets(3).Range("A500").End(xlUp).Offset(1, 0).Resize(Src.Rows.Count, Src.Columns.Count)
        Dst.Value = Src.Value
    End If
Next sh
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:02:45.167

请注意，发布的代码会将特定范围从除最后一个以外的每个表复制到指定表

```
' Basically it is copying the VALUE (There are other things to copy, e.g. format, color)
' from the Source Range from all worksheet(s) to the Destination Range on another worksheet
Sub CopyPaste() 'The beginning of subroutine, you cannot return value in SubRoutine, and you can't call subroutine directly from Excel worksheet formula
Dim sh As Worksheet, Src As Range, Dst As Range 'declaring each variable
'You can look up each object in Object Explorer by F2 in VB Editor
For Each sh In Application.Worksheets 'iterate though each worksheet in all workbooks
    If sh.Index <> Worksheets.Count Then 'if this sheet isn't the last sheet
        Set Src = sh.Range("A1:L34") 'set Src variable to the src range
        Set Dst = Worksheets(3).Range("A500").End(xlUp).Offset(1, 0).Resize(Src.Rows.Count, Src.Columns.Count)
        'Worksheets(3) <-- a specific target worksheet
        '.Range("A500").End(xlUp).Offset(1, 0) <-- trying to find the last empty cell bottom up from cell A500
        '.Resize(Src.Rows.Count, Src.Columns.Count) <-- Resizing the range so that it fits with src range
        Dst.Value = Src.Value   'Assign the value of all cells in the dst range from src range
    End If
Next sh
End Sub ' The end of subroutine 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:02:08.397

您使用此代码所做的只是将目标范围的值设置为源范围的值。您不是在正常意义上的“复制”单元格，因为您不会像使用普通复制和粘贴（即通过执行 Crtl+C 和 Crtl+V）那样保留源单元格的任何格式。

然而，这种方法有它的优点，因为它比编码复制和粘贴要快得多，所以如果它只是你所追求的值，它会更有效。

最后，您还可以使用类似的方法将范围“复制”到可以处理的变量中。即，在您的示例中使用您的预定义范围：

```
Dim vVar as Variant

vVar = Src.value

for ii = lBound(vVar, 1) to uBound(vVar, 1)
    for jj = lBound(vVar, 2) to uBound(vVar, 2)
        vVar(ii, jj) = vVar(ii, jj) + 1
    next jj
next ii

Dst.Value = vVar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:05:01.883

使用此代码，您可以**将范围 A1:L34 从所有工作表复制到第三张工作表**（除了最后一张不会复制的工作表）。

**最重要的部分是这个：**

```
Set Dst = Worksheets(3).Range("A500").End(xlUp).Offset(1, 0).Resize(Src.Rows.Count, Src.Columns.Count) 
```

这里设置了**目标范围**。对于每个复制的工作表**，目标范围是 offset**，因此**复制的数据**在粘贴后不会重叠。

# windows-7 - 我们可以在受保护的 EAP 属性下禁用验证服务器证书选项吗

> ID：13836894
> 
> 赞同：2
> 
> 时间：2012-12-12T09:43:08.523
> 
> 标签：windows-7, batch-file

你能帮我禁用局域网属性身份验证选项卡中的验证服务器证书选项吗？我想在批处理文件的帮助下禁用验证服务器证书检查。谢谢乌梅尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:17:40.320

您的要求需要 Microsoft 为 Win7/Win2008 系统提供的修补程序：http: [//support.microsoft.com/kb/2493933](http://support.microsoft.com/kb/2493933)

修补程序可以编写脚本，通常在它们后面加上 /s 或 /q 表示“沉默”或“安静”，或两者兼而有之。

# css - 用于博客的下一个/上一个导航的图像

> ID：13836896
> 
> 赞同：0
> 
> 时间：2012-12-12T09:43:08.873
> 
> 标签：css, wordpress, navigation

我正在尝试在我的博客底部获取下一个/上一个链接，以便仅显示图像。我已经正确设置了定位和链接以及我想要使用的图像。问题在于链接仅适用于我从原始代码中使用的文本。我将要使用的图像设置为 div 的背景。我不知道如何使图像成为链接并删除文本。

博客链接：

[http://www.conutant.org/test-box/](http://www.conutant.org/test-box/)

我的 PHP 里面有什么：

```
<div id="bottomnavigation">
    <?php if($single) { ?>
        <div class="nextprev">
            <span class="prev"><?php previous_post('&lsaquo;&lsaquo;&lsaquo; %', 'PREVIOUS TUTORIAL', 'no', 'no'); ?></span>

            <a href="http://www.conutant.org"><div id="homeicon"></div></a>

            <span class="next"><?php next_post('% &rsaquo;&rsaquo;&rsaquo;', 'NEXT TUTORIAL', 'no', 'no'); ?></span>
        </div>
    <?php } ?>
</div> 
```

和 CSS

```
.nextprev {
    height: 100px;
}

.nextprev .prev {
    float: left;
    height: 100px;
    width:200px;
    background: url(http://www.conutant.org/wp-content/uploads/2012/12/Prev.png);
    background-repeat: no-repeat;
    background-position: left top;
    margin-left: 19px;
}

.nextprev .next {
     float: right;
     height: 100px;
     width:186px;
     background: url(http://www.conutant.org/wp-content/uploads/2012/12/next.png);
     background-repeat: no-repeat;
     background-position: left top;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:49:12.260

尝试：

```
<div id="bottomnavigation">

<?php if($single) { ?>
<div class="nextprev">
<span class="prev"><img src="http://www.conutant.org/wp-content/uploads/2012/12/Prev.png" alt="<?php previous_post('&lsaquo;&lsaquo;&lsaquo; %', 'PREVIOUS TUTORIAL', 'no', 'no'); ?>" /></span>
<a href="http://www.conutant.org"><div id="homeicon"></div></a>
<span class="next"><img src="http://www.conutant.org/wp-content/uploads/2012/12/next.png" alt="<?php next_post('% &rsaquo;&rsaquo;&rsaquo;', 'NEXT TUTORIAL', 'no', 'no'); ?>"</span>
</div>
<?php } ?>

</div> 
```

你的 CSS 不再需要背景了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:49:16.997

将背景图像应用于锚点，而不是跨度。

```
.prev a {
 float: left;
 background: url(http://www.conutant.org/wp-content/uploads/2012/12/Prev.png);
}

.next a {
 float: right;
 background: url(http://www.conutant.org/wp-content/uploads/2012/12/next.png);
} 
```

您还需要将锚点设置为块元素：

```
.prev a,
.next a {
 display:block;
} 
```

最后用于`text-indent: -9999px`隐藏文本。

# c++ - C++ 中的正则表达式：需要编译器支持错误

> ID：13836898
> 
> 赞同：3
> 
> 时间：2012-12-12T09:43:15.333
> 
> 标签：c++, regex, compiler-construction

我正在尝试`regex`在 C++ 中使用。以下是我的代码：

```
#include<iostream>
#include<stdlib.h>
#include<string.h>
#include<regex>
using namespace std;

int main(int argc, char** argv) {
    string A = "Hello!";
    regex pattern = "(H)(.*)";
    if (regex_match(A, pattern)) {
        cout << "It worked!";
    }
    return 0;
} 
```

但我遇到了这个错误：

```
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/regex:35:0,
                 from main.cpp:12:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/c++0x_warning.h:31:2: error: #error This file requires compiler and library support for the upcoming ISO C++ standard, C++0x. This support is currently experimental, and must be enabled with the -std=c++0x or -std=gnu++0x compiler options. 
```

如何解决这个问题，有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:45:20.727

> 并且必须使用 -std=c++0x 或 -std=gnu++0x 编译器选项启用

将这些选项之一`-std=c++0x`或`-std=gnu++0x`, 添加到您的编译器命令中：

> g++ -std=c++0x ...

请注意，如果`std::regex`不支持，请参阅[`boost::regex`](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/index.html)替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:46:21.190

看起来您正在尝试使用正则表达式类，它是新 C++11 标准的一部分，但没有告诉编译器编译到该标准。

将 -std=c++0x 添加到您的编译器标志并重试。

编辑：正如[gcc 实现状态页面](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)所示，gcc 中的正则表达式支持远未完成。因此，即使添加正确的标志也无济于事。如果您需要正则表达式支持，您可以尝试[boost](http://www.boost.org/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-29T11:42:33.603

只需添加

```
g++ -std=gnu++0x <filename.cpp> 
```

或者

```
g++ -std=c++0x <filename.cpp> 
```

它会正常工作

# delphi - MainFormOnTaskbar + 工具提示导致焦点窃取

> ID：13836899
> 
> 赞同：5
> 
> 时间：2012-12-12T09:43:23.377
> 
> 标签：delphi, delphi-xe2, z-order

我使用 Delphi XE2 构建了下面的代码。它创建 Form1，Form1 立即创建 Form2 的一个实例。当我按下 Form2 上的按钮时，会创建第二个 Form2。

现在，如果我将鼠标悬停在第二个最顶部的 Form2 上的按钮上，然后等待工具提示出现，在工具提示出现的那一刻，第**一个**Form2 就出现在前面，抢走了焦点。

仅当`Application.MainFormOnTaskbar`是时才会出现问题`True`。它还依赖于从 Form1 的`FormCreate`方法创建的第一个 Form2。如果我使用`PostMessage()`延迟创建第一个 Form2 直到应用程序完成初始化，问题就会消失。

我想了解为什么会这样。我已经了解到 Delphi 的 Application 对象处理了很多事情，包括提示显示，并且我知道 Delphi 可以在初始化期间重新创建一个窗口的句柄，但是我无法按照这个来完全解释上述行为（或确实上述两个事实是否相关）。

**项目1.dpr**

```
program Project1;

uses
  Vcl.Forms,
  Unit1 in 'Unit1.pas' {Form1},
  Unit2 in 'Unit2.pas' {Form2};

{$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True; // False makes problem go away
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

**单元1.pas**

```
unit Unit1;
interface
uses
  Vcl.Forms, Unit2;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  public
    procedure CreateForm2;
  end;

var
  Form1: TForm1;

implementation
{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  CreateForm2;
end;

procedure TForm1.CreateForm2;
var
  frm : TForm2;
begin
  frm := TForm2.Create(Application); // (Could pass Self - makes no difference)
  frm.Show;
end;

end. 
```

**单元2.pas**

```
unit Unit2;
interface
uses
  Vcl.Forms, System.Classes, Vcl.Controls, Vcl.StdCtrls, WinApi.Windows;

type
  TForm2 = class(TForm)
    Button1: TButton; // This button has a hint
    procedure Button1Click(Sender: TObject);
  end;

var
  Form2: TForm2;

implementation
uses
  System.SysUtils, Unit1;

{$R *.dfm}

procedure TForm2.Button1Click(Sender: TObject);
begin
  Form1.CreateForm2;
end;

end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T11:30:59.410

这里的关键问题是第一个实例`TForm2`被创建为应用程序窗口拥有的窗口，`Application.Handle`. 这里我指的是[Windows 中 owner 的含义](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)。在 VCL 语言中，这被称为弹出父级。

现在，当您创建第一个`TForm2`实例时，该`Application.MainForm`属性仍然是`nil`. 并且由于您没有明确指定`PopupParent`，因此中的代码`TCustomForm.CreateParams`将所有者设置为应用程序窗口。

您只是不希望您的窗口归隐藏的应用程序窗口所有。这就是为什么第一个`TForm2`实例有时会出现在所有其他窗口之后的原因，尤其是在您的主窗体之后。它只是用错误的所有者创建的。

拥有的表单`Application.Handle`显示在 中`THintWindow.ActivateHint`。发生这种情况是由于读取的行`ParentWindow := Application.Handle`。这之后是一个调用`SetWindowPos(Handle, ...)`，导致错误拥有的表单出现在前面。据推测，该表格出现在最前面是因为它也归`Application.Handle`. 现在我对确切的机制没有一个明确的解释，但我觉得这不是很有趣，因为表单显然设置错误。

无论如何，根本问题是您创建了一个不正确拥有的窗口。因此，解决方案是确保正确拥有该窗口。通过分配`PopupParent`. 例如：

```
procedure TForm1.CreateForm2;
var
  frm : TForm2;
begin
  frm := TForm2.Create(Application); // (Could pass Self - makes no difference)
  frm.PopupParent := Self;
  frm.Show;
end; 
```

# objective-c - 从 iPhone 应用程序共享 Facebook

> ID：13836914
> 
> 赞同：1
> 
> 时间：2012-12-12T09:44:12.073
> 
> 标签：objective-c, ios, facebook-graph-api, facebook-ios-sdk

在我的 iphone 应用程序中，我正在访问我的 facebook 信息并将其发送到服务器。从服务器 facebook 共享应该发生我已经在 FB 中创建了我的应用程序，并且在单击同步按钮时我能够转到 FB 登录页面。登录后它要求进行身份验证

但它只是要求“基本信息”而不是公开分享等（我已将其包含在我的 FB 应用程序中）

```
 -(IBAction)fbConnect:(id)sender{

    flag = 1;
     AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

  if (appDelegate.session.isOpen) {

    [self updateView];
  } else {
    if (appDelegate.session.state != FBSessionStateCreated) {
        appDelegate.session = [[FBSession alloc] init];
    }

    [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                     FBSessionState status,
                                                     NSError *error) {
        [self updateView];
    }];
   }

  NSLog(@"string issss %@",string);

   }

    - (void)updateView {
      AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
      if (appDelegate.session.isOpen) {

        string = [NSString stringWithFormat:@"%@",
              appDelegate.session.accessToken];

        NSLog(@"string issss %@",string);
         NSString *urlstrng;
        if(flag == 1){
        urlstrng = [NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@",string];
          [self dataFetching:urlstrng];
     }
     if(flag == 2){
        urlstrng = [NSString stringWithFormat:@"https://graph.facebook.com/me/friends? access_token=%@",string];
        [self dataFetching:urlstrng];
    }

     } else {

    string = [NSString stringWithFormat:@"%@",
              appDelegate.session.accessToken];
    NSString *urlstrng;
    if(flag == 1){
        urlstrng = [NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@",string];
        [self dataFetching:urlstrng];
        }

    if(flag == 2){
        urlstrng = [NSString stringWithFormat:@"https://graph.facebook.com/me/friends?access_token=%@",string];
        [self dataFetching:urlstrng];
    }

        }
     }

      -(void)dataFetching:(NSString*)strng1{

      NSURL *url = [NSURL URLWithString:strng1];
       ProfileConnector *obj = [[ProfileConnector alloc] init];
       obj.delegate1 = self;
       [obj parsingJson:url];

        } 
```

![在此处输入图像描述](../Images/a44ee45118c0960c4a4a44fa3187081d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:17:26.637

我相信您不会通过您的代码请求额外的项目。您可以使用 openSessionWithAllowLoginUI 来完成。

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_location",
                        @"user_birthday",
                        @"user_likes",
                        @"email",
                        nil];
return [FBSession openActiveSessionWithPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }]; 
```

}

# acl - Google Cloud Storage AllUsers 权限不起作用

> ID：13836915
> 
> 赞同：2
> 
> 时间：2012-12-12T09:44:14.280
> 
> 标签：acl, google-cloud-storage

我正在尝试创建一个存储桶，该存储桶具有特定用户的存储桶/对象的读/写权限以及仅适用于 AllUsers 的对象的读取权限。

我有：

*   创建了一个桶，
*   将此添加到默认 acl 列表中：

```
<Entry>
    <Scope type="AllUsers"/>
    <Permission>
        READ
    </Permission>
</Entry> 
```

通过：`gsutil setdefacl <f> gs://bucket`

*   添加了一个对象（test.png）

现在我正在尝试使用 url 从浏览器访问它，`http[s]://storage.cloud.google.com/bucket/test.png`但它会将我带到 google 帐户登录页面。当我使用另一个没有明确权限设置的谷歌账户（不是我用来创建项目/存储桶/对象）登录时，它会显示图片。

`gsutil getacl`在新对象上显示 AllUsers 具有 READ 权限，但它的工作方式与 AllAuthenticatedUsers 类似。

关于如何处理按预期工作的权限的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:18:27.437

当您说您将该条目添加到默认 ACL 时，您的意思是您将其添加为 AccessControlList.Entries 中的一个元素，对吗？如果没有看到完整的 ACL 文本，就很难知道发生了什么。

而且，由于您要使对象公开可读（为范围 AllUsers 授予 READ 权限），因此您不需要存储桶的默认对象 ACL 中的其他范围；你可以简单地做：

gsutil setdefacl public-read gs://bucket

然后将对象上传到存储桶。

我意识到您想为特定用户授予读/写权限，但写权限由存储桶 ACL 控制，而不是对象 ACL（因此也不受存储桶上的默认对象 ACL 控制）。

请尝试上述方法，并让我们知道您是否仍无法通过浏览器访问对象而无需先进行身份验证。

Mike Schwartz，谷歌云存储团队

# magento - Magento 设置多种货币

> ID：13836917
> 
> 赞同：0
> 
> 时间：2012-12-12T09:44:19.990
> 
> 标签：magento

我对 Magento 货币有疑问：否则我的代码工作正常，现在我想在更改货币后重定向页面。

假设我当前的 URL 是`http://www.example.com/women/?color=black`.

现在，当我更改货币时，它将重定向到`http://www.example.com/women/`：所以它删除了`?color=black`.

代码：

```
if($this->getCurrencyCount()>1): ?>
<div class="block block-currency">
    <div class="block-title">
        <strong><span><?php echo $this->__('Select Your Currency') ?></span></strong>
    </div>
    <div class="block-content">
        <select name="currency" title="<?php echo $this->__('Select Your Currency') ?>" onchange="setLocation(this.value)">
        <?php foreach ($this->getCurrencies() as $_code => $_name): ?>
            <option value="<?php echo $this->getSwitchCurrencyUrl($_code) ?>"<?php if($_code==$this->getCurrentCurrencyCode()): ?> selected="selected"<?php endif; ?>>
                <?php echo $_name ?> - <?php echo $_code ?>
            </option>
        <?php endforeach; ?>
        </select>
    </div>
</div>
<?php endif; 
```

更新代码：

```
<?PHP $currentParams = $this->getRequest()->getParams(); ?>
<div style="float:left; margin-top:10px; color:#727478;">
    <!--Change 1 to 0 if you wish to output selector always-->
    <?php if($this->getCurrencyCount() > 1): ?>
    <span>Select Currency:</span>

    <select name="custom-currency-selector" id="custom-currency-selector">
    <?php foreach ($this->getCurrencies() as $_code => $_name): 
                $currencyUrl = $this->getSwitchCurrencyUrl($_code);
                foreach ($currentParams as $_param) {
                    $currencyUrl = $this->helper('core/url')->addRequestParam($currencyUrl, $_param);
                }
                ?>
        <option value="<?php echo $currencyUrl; ?>"
            <?php if($_code == $this->getCurrentCurrencyCode()): ?>
                selected="SELECTED"
            <?php endif; ?>>
            <?php echo $_code ?>
        </option>
   <?php endforeach; ?>
   </select>
  <?php endif;?> 
```

更新代码：

```
 <!--Change 1 to 0 if you wish to output selector always-->
    <?php if($this->getCurrencyCount() > 1): 
    $currentParams = $this->getRequest()->getParams();
    ?>
    <span>Select Currency:</span>
    <select name="custom-currency-selector" id="custom-currency-selector">
    <?php foreach ($this->getCurrencies() as $_code => $_name):
    $currencyUrl = $this->helper('core/url')->addRequestParam($this->getSwitchCurrencyUrl($_code),$currentParams)
     ?>
        <option value="<?php echo $currencyUrl ?>"
            <?php if($_code == $this->getCurrentCurrencyCode()): ?>
                selected="SELECTED"
            <?php endif; ?>>
            <?php echo $_code ?>
        </option>
    <?php endforeach; ?>
    </select>
    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:06:00.897

您应该将这些参数添加到新的 url：

```
$currentParams = $this->getRequest()->getParams();
$currencyUrl = $this->helper('core/url')->addRequestParam(
    $this->getSwitchCurrencyUrl($_code), 
    $currentParams
) 
```

然后使用 $currencyUrl 作为 url 进行重定向。

# android - Android：如何将应用名称放入我们的文本视图

> ID：13836918
> 
> 赞同：1
> 
> 时间：2012-12-12T09:44:29.943
> 
> 标签：android, facebook

![在此处输入图像描述](../Images/39399af284f1bffc82b6d5113cd57da3.png)

我有`DialogBox`一个`TextView`，假设我的应用程序是 MyFriendsSecrets ..我正在从我的应用程序发送一个帖子，如何将我的应用程序名称放入`TextView`（例如：从上图：“通过 MyFriendSecrets”）任何建议表示赞赏。我有一个`JSON`obj如下

JSONObject me = new JSONObject(facebook.request("me"));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:59:24.270

它非常简单，只需将此代码粘贴到 string.xml

```
<string name="app_name">youAppName</string> 
```

然后在你的javacode中这样做

```
String appName = this.getString(R.string.app_name);

TextView appTextView = (TextView)findViewById(R.id.appTextView);
appTextView.setText(appName); 
```

干杯！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:08:31.270

如果您在 androidmanifest 中定义您的应用名称，例如

```
<application 
    ...
    android:label="@string/app_name">
 </application> 
```

您可以直接输入您的应用名称`getString(R.string.app_name)`，并且只有 1 个位置，其中定义了您的应用名称

那是您的应用程序的名称...在 android 设备上，在您的投递箱上，...我认为，facebook 也使用这个真实的应用程序名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:09:21.020

也许您可以通过 android.content.pm.PackageManager 找到一些解脱？这将使您能够访问清单中声明的​​信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T10:31:13.097

运行针对[应用程序表](https://developers.facebook.com/docs/reference/fql/application)的 FQL 查询。由于您在自己的应用程序上工作并且可以访问它的应用程序 ID，因此构建此查询将非常容易。

试试这段代码：

```
String queryApp = "SELECT display_name, namespace  FROM application WHERE app_id=284752504943219";
Bundle paramsApp = new Bundle();
paramsApp.putString("method", "fql.query");
paramsApp.putString("query", queryApp);
String resultApp = Utility.mFacebook.request(paramsApp);
Log.e("APP RESULT", resultApp);

JSONArray JAApp = new JSONArray(resultApp);

for (int i = 0; i < JAApp.length(); i++) {
    JSONObject JOApp = JAApp.getJSONObject(i);

    String getDisplayName = JOApp.getString("display_name");
    Log.e("DISPLAY NAME", getDisplayName);
} 
```

查询中的**display_name**字段将返回通过 App 发布时在 Facebook 上显示的 App 名称（如 OP 所附图片所示）。解析结果并将其设置为您的`TextView`.

由于这会直接查询 Facebook API，因此如果您要通过 Facebook 开发人员控制台更改应用程序的名称，您将不必担心手动更改*字符串。*

# regex - 使用正则表达式从不同文件夹中查找多个文件

> ID：13836923
> 
> 赞同：2
> 
> 时间：2012-12-12T09:44:36.950
> 
> 标签：regex, r, file-upload

我正在尝试从不同的文件夹在 R 中加载多个 .txt 文件。
我在使用正则表达式编写路径和模式时遇到问题。

我的路径有这样的结构：

```
'/Users/folderA/folderB/folderC/folderD/01_01_2012/folderE/file.txt' 
```

因此，路径几乎相同，只是日期名称的文件夹总是更改。
我试图像这样加载它：

```
filesToProcess <- list.files(path = "/Users/folderA/folderB/folderC/folderD/", 
                             pattern = "*_*_*/folderE/*.txt") 
```

但这似乎不起作用。
有人可以帮我用正则表达式写下来吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:46:57.233

这里的关键是使用参数`recursive=TRUE`，以便您可以在原始目录中的文件夹中进行搜索：

```
filesToProcess <- list.files(path = "/Users/folderA/folderB/folderC/folderD", 
                      pattern = "txt", recursive = TRUE, full.names = TRUE) 
```

模式必须与文件的名称相对应，不能引用文件夹的名称（请参阅 参考资料`?list.files`）。这就是为什么您需要第二步，您必须缩小到您想要的特定文件夹。请注意在上一个调用中使用的参数`full.names=TRUE`允许我们保留每个文件的路径（注意：您还必须删除参数的最后一个`/`，`path`否则它最终会在我们的输出中加倍并在您将尝试上传文件）。

```
filesToProcess[grep("folderE", filesToProcess)] 
```

最后一点：
您的正则表达式无论如何都有缺陷：`*`意味着

> 前面的项目将匹配零次或多次。

你想要的是`.`：见`?regexp`

> 时期 。匹配任何单个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:02:47.020

尽管主题是指正则表达式，但从示例中您似乎确实想使用 glob。在这种情况下尝试：

```
Sys.glob("/Users/folderA/folderB/folderC/folderD/*_*_*/folderE/*.txt") 
```

# c# - 在 C# 解决方案中添加属于另一个解决方案的项目

> ID：13836928
> 
> 赞同：0
> 
> 时间：2012-12-12T09:44:54.880
> 
> 标签：c#, visual-studio-2010

我有一个包含多个项目的解决方案，每个项目都引用第三方文件夹中的程序集。

我现在需要有权调试这些程序集的代码，幸运的是我必须编写代码。

我想知道在我当前的解决方案中引用程序集代码的最佳方法是什么？

我应该删除对程序集的所有引用（在第三方文件夹中），然后将这些程序集的项目添加到我当前的解决方案中还是有更好的方法？尽管这使我可以访问代码，但我在这里看到的问题是程序集最初位于第三方文件夹中，因此我需要确保在重新签入代码时必须切换回第三方文件夹。

一定有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:53:00.203

由于许可限制，调试第三方程序集并不是一个好主意。但是如果你想这样做，你只能删除对 dll 的引用并添加对项目的引用。您可以自动化构建以更改对 dll 的引用以进行发布构建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:54:11.233

您实际上只需要第三方 DLL 的相应 pdb 文件。pdb 文件包含所有必要的信息。无需删除引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:54:37.700

您在参考 3rdParty 文件夹的同时运行您的项目。在单独的 Visual Studio 实例中打开这些库代码，并在调试菜单中使用“附加到进程”选项

访问[http://msdn.microsoft.com/en-us/library/c6wf8e4z(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/c6wf8e4z(v=vs.100).aspx)了解如何执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T09:54:40.700

如果您有相关 DLL 的相应`*.pdb`文件，您可能只需将它们添加到您的解决方案中即可。当然，它们需要被复制到与它们的 DLL 文件相同的位置。

# android - 使用 httpclient 4.2.2 Android

> ID：13836930
> 
> 赞同：4
> 
> 时间：2012-12-12T09:44:55.763
> 
> 标签：android, apache-httpclient-4.x

这是异常的核心：

```
12-12 10:37:50.090: E/AndroidRuntime(8277): Caused by: java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.<init> 
```

我正在使用 Apache httpclient 4.2.2。然而，Android 决定使用其捆绑的过时 Apache httpclient 库是一个更好的选择。

我怎样才能避免这个异常？

以防万一：更改 org.apache 命名空间不是一个选项，因为此异常是由闭源库引发的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:15:08.453

> 然而，Android 决定使用其捆绑的过时 Apache httpclient 库是一个更好的选择。

谷歌关心向后兼容性。~~正如您所发现的，HttpClient 具有不同版本的不同 API，因此如果 Google 升级 HttpClient，所有现有应用程序都会中断。~~Google 需要维护一个一致的公共 API，以便为 Android 1.x 编写的应用程序可以在 Android 4.x 等上运行。不幸的是，谷歌选择的 HttpClient 版本导致与较新的 HttpClient 版本的公共 API 快速中断。

> 我怎样才能避免这个异常？

使用`jarjar`或等效将 HttpClient 库的副本重构为不同的包名称，然后使用它。

> 更改 org.apache 命名空间不是一个选项，因为此异常是由闭源库引发的。

然后用其他东西替换闭源库。显然，如果闭源库需要 HttpClient 4.2.2，那么该闭源库将无法在 Android 上运行，并且在 Android 上不受其开发人员的支持。即使您要解决 HttpClient 问题（例如，通过 ROM 模块 -- 见下文），该库在与 Android 的兼容性方面也可能存在其他问题。

或者，下载 Android 源代码，将 HttpClient 版本替换为您自己的版本，构建修改后的 Android 源代码，将结果倒入 ROM mod，然后将 ROM mod 安装到您想要的设备上。在此过程中，请务必测试任何现有的应用程序，以确保它们不会因为您的更改而中断（很可能使用`HttpUrlConnection`，但也可能不会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T22:38:31.713

此链接可能会有所帮助，它是 HttpClient 4.2.3 for Android 的重新打包，您可以在项目中将其作为库 jar/外部库引用：

[http://code.google.com/p/httpclientandroidlib/](http://code.google.com/p/httpclientandroidlib/)

# python - Project Euler 240：掷骰子的方法数

> ID：13836932
> 
> 赞同：6
> 
> 时间：2012-12-12T09:45:14.693
> 
> 标签：python, puzzle, itertools, dice

我正在尝试解决[Project Euler 问题 240](http://projecteuler.net/problem=240)：

> **有多少种方法可以掷出 20 个 12 面骰子（面数为 1 到 12），从而使前十名的总和为 70？**

我想出了解决这个问题的代码。但是计算起来确实需要很多时间。我知道这种方法很糟糕。有人可以建议我如何修复此代码以更好地执行吗？

```
import itertools
def check(a,b):   # check all the elements in a list a, are lesser than or equal to value b
    chk=0
    for x in a:
        if x<=b:
            chk=1
    return chk

lst=[]
count=0
for x in itertools.product(range(1,13),repeat=20):
    a=sorted([x[y] for y in range(20)])
    if sum(a[-10:])==70 and check(a[:10],min(a[-10:])):
        count+=1 
```

下面的代码是针对问题描述中定义的[问题](http://projecteuler.net/problem=240)。它完美地工作并给出了确切的解决方案....

```
import itertools
def check(a,b):
     chk=1
     for x in a:
         if x>b:
             chk=0
             break
     return chk

count=0
for x in itertools.product(range(1,7),repeat=5):
    a=sorted([x[y] for y in range(5)])
    if sum(a[-3:])==15 and check(a[:2],min(a[-3:])):
        count+=1 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T11:59:35.260

迭代所有可能性并不好，因为有 12 ^(20) = 3833759992447475122176 种方法可以掷出 20 个十二面骰子，例如每秒掷一百万次，这需要数百万年才能完成。

解决这类问题的方法是使用[动态规划](https://en.wikipedia.org/wiki/Dynamic_programming)。想办法把你的问题分解成几个小问题的总和，并为这些子问题建立一个答案表，直到你可以计算出你需要的结果。

例如，让 T( *n* , *d* , *k* , *t* ) 是掷*n* *d*面骰子的方式数，以使它们中的前*k*个总和为*t*。我们如何将其分解为子问题？好吧，我们可以考虑精确地掷出*d的骰子数量**i 。*有^(*n*) C [*i*]种方式来选择这些*i*骰子，并且有 T( *n*  − *i* , *d* − 1, ...) 种方式来选择最多必须掷*d的剩余**n*  − *i个骰子***********− 1.（对于我已经省略的*k*和*t*的一些合适的参数选择。）**********

 **取这些的乘积，并总结所有合适的*i*值，你就完成了。（好吧，还没有完成：您必须指定基本情况，但这应该很容易。）

您需要计算的子问题的数量最多为 ( *n* + 1)( *d* + 1)( *k* + 1)( *t* + 1)，在 Project Euler 的情况下 ( *n* = 20, *d* = 12 , *k* = 10, *t* = 70) 最多为 213213。（实际上，它比这要少得多，因为树的许多分支很快就达到了基本情况：在我的实现中，结果证明只有 791 个子问题的答案足以计算答案。）

要编写动态程序，通常最容易递归地表达它并使用[记忆](https://en.wikipedia.org/wiki/Memoization)化来避免重新计算子问题的答案。在 Python 中，您可以使用[`@functools.lru_cache`装饰器](https://docs.python.org/3/library/functools.html#functools.lru_cache)。

所以你的程序的骨架可能看起来像这样。我已将关键细节替换为，`???`以免剥夺您自己解决问题的乐趣。在尝试更大的情况之前，使用小示例（例如“两个 6 面骰子，其中的前 1 个总和为 6”）来检查您的逻辑是否正确。

```
def combinations(n, k):
    """Return C(n, k), the number of combinations of k out of n."""
    c = 1
    k = min(k, n - k)
    for i in range(1, k + 1):
        c *= (n - k + i)
        c //= i
    return c

@lru_cache(maxsize=None)
def T(n, d, k, t):
    """Return the number of ways n distinguishable d-sided dice can be
    rolled so that the top k dice sum to t.

    """
    # Base cases
    if ???: return 1
    if ???: return 0

    # Divide and conquer. Let N be the maximum number of dice that
    # can roll exactly d.
    N = ???
    return sum(combinations(n, i)
               * T(n - i, d - 1, ???)
               for i in range(N + 1)) 
```

有了适当的选择`???`，这回答了几毫秒的项目Euler问题：

```
>>> from timeit import timeit
>>> timeit(lambda:T(20, 12, 10, 70), number=1)
0.008017531014047563
>>> T.cache_info()
CacheInfo(hits=1844, misses=791, maxsize=None, currsize=791) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:15:33.997

该解决方案应该可以工作-不确定您的系统需要多长时间。

```
from itertools import product

lg = (p for p in product(xrange(1,13,1),repeat=10) if sum(p) == 70)

results = {}
for l in lg:
    results[l] = [p for p in product(xrange(1,min(l),1),repeat=10)] 
```

它所做的是首先创建“前十名”。然后向每个“前十”添加一个可能的“下十”项目的列表，其中最大值被限制为“前十”中的最小项目

results 是一个字典，其中 the`key`是“前十个”，值是可能的“下一个十个”的列表

解决方案（符合要求的组合数量）将计算所有结果字典中的列表数量，如下所示：

```
count = 0
for k, v in results.items():    
    count += len(v) 
```

然后`count`将是结果。

**更新**

好的，我想到了一种更好的方法。

```
from itertools import product
import math

def calc_ways(dice, sides, top, total):
    top_dice = (p for p in product(xrange(1,sides+1,1),repeat=top) if sum(p) == total)
    n_count = dict((n, math.pow(n, dice-top)) for n in xrange(1,sides+1,1))

    count = 0
    for l in top_dice:
        count += n_count[min(l)]

    return count 
```

因为我只计算“下一个十”的长度，所以我想我会预先计算“前十”中每个“最低”数字的选项数量，所以我创建了一个字典来做到这一点。上面的代码运行起来会更流畅，因为它只包含一个小字典、一个计数器和一个生成器。正如你可以想象的那样，它可能仍然需要很长时间......但我在不到 1 分钟的时间内运行了它以获得前 100 万个结果。所以我确信它在可行的范围内。

祝你好运 ：）

**更新 2**

在你的另一条评论之后，我明白我做错了什么并试图纠正它。

```
from itertools import product, combinations_with_replacement, permutations
import math

def calc_ways(dice, sides, top, total):
    top_dice = (p for p in product(xrange(1,sides+1,1),repeat=top) if sum(p) == total)
    n_dice = dice-top
    n_sets = len(set([p for p in permutations(range(n_dice)+['x']*top)]))
    n_count = dict((n, n_sets*len([p for p in combinations_with_replacement(range(1,n+1,1),n_dice)])) for n in xrange(1,sides+1,1))

    count = 0
    for l in top_dice:
        count += n_count[min(l)]

    return count 
```

正如你可以想象的那样，这是一场灾难，甚至没有给出正确的答案。我想我要把这个留给数学家。因为我解决这个问题的方法很简单：

```
def calc_ways1(dice, sides, top, total):
    return len([p for p in product(xrange(1,sides+1,1),repeat=dice) if sum(sorted(p)[-top:]) == total]) 
```

这是一个优雅的 1 行解决方案，并提供了正确的答案，`calc_ways1(5,6,3,15)`但需要永远解决这个`calc_ways1(20,12,10,70)`问题。

无论如何，数学似乎是解决这个问题的方法，而不是我的愚蠢想法。**

# webdriver - 使用 webdriver，我能够为第一个用户成功运行，而下一个用户在 if 条件下失败。如果条件不能正常工作

> ID：13836936
> 
> 赞同：0
> 
> 时间：2012-12-12T09:45:23.023
> 
> 标签：webdriver, selenium-webdriver

如果条件不能正常工作。我有一组用户 ID 可以使用 webdriver 登录到我的应用程序，我能够为第一个用户成功运行，而对于下一个用户，它在 if 条件下失败。请在下面找到代码，如果条件成功运行，它必须检查更多。

```
for (int i = 1; i < sh.getRows(); i++)
{           
  while(iter.hasNext())
  {
   System.out.println("Main Window ID :"+iter.next());
  }
 driver.findElement(By.id("lgnLogin_UserName")).clear();
    driver.findElement(By.id("lgnLogin_UserName")).sendKeys(sh.getCell(0,   
  i).getContents());
    driver.findElement(By.id("lgnLogin_Password")).clear();
    driver.findElement(By.id("lgnLogin_Password")).sendKeys(sh.getCell(1, 
  i).getContents());
    driver.findElement(By.id("lgnLogin_LoginButton")).click();
    Thread.sleep(5000L);

    if(driver.findElements(By.linkText("Logout")) != null)
        {

  driver.findElement(By.id("ctl00_Header_Lbtn_Logout")).click();
            msg ="Valid User Login";
            System.out.println(msg);
        }
else
    if(driver.getTitle().contains("700Dealers Inc."))
        {
            driver.findElement(By.xpath("//table[@id='lgnLogin']/tbody
  /tr/td/table/tbody/tr[4]/td")).getText();
            System.out.println(msg);
        }
        else
        if(driver.getTitle().contains("Security Question And Answers"))
        {
            driver.findElement(By.xpath("//table[@id='Table_01']/tbody
 /tr[5]/td/table/tbody/tr/td/table/tbody/tr/td/span/span[1]")).getText();
            System.out.println(msg);
        }
        else
        if(driver.getTitle().contains("700 credit Change Password"))
        {
            driver.findElement(By.xpath("//div[@id='panelscreen']/table
 /tbody/tr/th/span")).getText();
            System.out.println(msg);
        } 
```

请帮我解决这个问题。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:58:30.240

`Thread.sleep(5000L);`可能是你问题的根源。

因此，您可能想要替换它：

```
Thread.sleep(5000L);
if(driver.findElements(By.linkText("Logout")) != null) 
```

有明确的等待：

```
try {
  WebElement logout = (new WebDriverWait(driver, 5))
    .until(new ExpectedCondition<WebElement>(){
       @Override
       public WebElement apply(WebDriver d) {
        return d.findElement(By.linkText("Logout"));
     }});

  //Logout found, do stuff
} catch(TimeoutException e) {

  //No logout element, do stuff
} 
```

# asp.net - SinglePageApplication 404-错误

> ID：13836938
> 
> 赞同：2
> 
> 时间：2012-12-12T09:45:33.287
> 
> 标签：asp.net, singlepage, upshot

当我遇到问题时，我正在尝试使用 Upshot.js 对 SPA 进行编程。

```
upshot.metadata(@(Html.Metadata<...>())); 
```

错误：“System.Web.Mvc.HtmlHelper”不包含“元数据”的定义

我通过添加以下行解决了这个问题：

```
<add namespace="System.Web.Http.Data.Helpers" /> 
```

在 web.config 文件中。

但现在出现404错误。它找不到 Index.cshtml 文件。

在我添加“upshot.metadat ....”行之前，它运行良好。所以我不明白问题出在哪里。

# php - 如何在php中添加html表单？

> ID：13836945
> 
> 赞同：-6
> 
> 时间：2012-12-12T09:45:46.987
> 
> 标签：php, html, forms, isset

你如何在php中添加一个html表单？我必须检查 isset 的条件，即是否设置了会话，然后才应该显示表单。由于“”，ECHO 语句不起作用

```
<pre>
<form action="index.php" method="post">
<br />
&nbsp;First Name:    Last Name:<br/>
<input type="text" name="firstname" placeholder ="First Name"/>  
<input type="text" name="lastname" placeholder ="Last Name"/><br />

&nbsp;Email-id:<br />
<input type="text" name="email-id" placeholder ="Your Email-id"/><br />

&nbsp;Password:<br />
<input type="password" name="password" placeholder ="Your Password"/>
<br />
&nbsp;Re-enter Password:<br />
<input type="password" name="password1" placeholder ="Re-enter Password"/>
<br /></form><pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:47:44.643

```
<?php if( isset( $_SESSION['someValue'] ) ): ?>
<form action="index.php" method="post">
    <p>Whatevs...</p>
</form>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:49:00.653

```
echo "I want to echo \"quotes\""; // prints: I want to echo "quotes"
echo 'I want to echo "quotes"'; // prints: I want to echo "quotes" 
```

选择一个，它都有效。或者：

```
<?php if($something == $the_same_as_this): ?>
   I want to print whatever I want, including "quotes"
<?php endif; ?> 
```

将输出字符串（只要表达式评估为真）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:50:11.543

尝试以下操作：

```
<?php if(your_condition_here): ?>
<form> your form here </form>
<?php endif; ?> 
```

这样您就不必使用 echo 或 print 并使其复杂化。

# windows - C多进程：创建子进程时程序崩溃

> ID：13836947
> 
> 赞同：0
> 
> 时间：2012-12-12T09:46:01.180
> 
> 标签：windows, winapi

我正在尝试使用以下命令创建一个子进程：

```
 STARTUPINFO si;
    PROCESS_INFORMATION pi;    
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

  CreateProcess( NULL,   // No module name (use command line)
        NULL,           // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi ); 
```

它在这里崩溃了，我不知道为什么。

1.  现在我的原始过程需要命令行参数，所以我也必须在这里传递它们吗？如果是这样，那么由于我没有从 int main() 创建子进程，所以我可以执行以下操作：

    LPTSTR szCmdline = TEXT("nmctest -s TS -r DMR -tlLDMR");

然后在 CreateProcess() 中传递 szCmdline？

有人可以帮我为什么这会崩溃吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:49:13.267

您的代码失败了，因为您同时传递`NULL`了`lpApplicationName`和`lpCommandLine`。您必须为其中至少一个传递一个值。[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682425.aspx)清楚地说明了这一点。

看起来您还尝试将值传递给`lpCommandLine`. 但是您传递了一个不可修改的字符串文字。文档再次明确说明这是不允许的。传递一个指向可以修改的内存的指针。

> 此函数的 Unicode 版本 CreateProcessW 可以修改此字符串的内容。因此，此参数不能是指向只读内存的指针（例如 const 变量或文字字符串）。如果此参数是一个常量字符串，该函数可能会导致访问冲突。

您可以像这样满足该要求：

```
TCHAR szCmdline[] = _T("nmctest -s TS -r DMR -tlLDMR"); 
```

就个人而言，我认为`TCHAR`在这个时代没有必要。您肯定不是还在为 Windows 98 编写程序吗？我会这样做：

```
wchar_t szCmdline[] = L"nmctest -s TS -r DMR -tlLDMR"; 
```

代码中另一个可能的故障向量是`STARTUPINFO`参数。确保您已正确初始化。最简单的方法是这样的：

```
STARTUPINFO si = {0};
si.cb = sizeof(si); 
```

但您可能想添加对`GetStartupInfo`.

```
STARTUPINFO si = {0};
si.cb = sizeof(si);
GetStartupInfo(&si); 
```

# ios - 适用于 iOS 的 PJSIP - 无法弄清楚如何在适用于 iOS 的 pjsua 应用程序中发送命令

> ID：13836948
> 
> 赞同：2
> 
> 时间：2012-12-12T09:46:07.373
> 
> 标签：ios, pjsip

我已经按照这个[链接](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)编译了 pjsip，当我为 iPhone 运行 pjsip 示例应用程序 ipjsua 时，一切都很好。现在的问题是我无法理解命令是如何发送的。我的意思是，当我在该命令文本字段中输入一些文本时，**有人**正在听我在那里写的内容并被执行。这个人是谁，它在 ipjsua 应用程序代码中的什么位置？

在我的应用程序中，我将没有那个文本字段来编写命令。我将有一个联系人列表，然后在选择联系人时我将拨打我的 sip 电话。

使用哪个 pjsip 函数来执行命令以及哪个函数（事件、委托）来监听 sip 服务器的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:09:18.767

好的，我找到了解决方案。

ipjsua 应用程序的命令发送到 sip 服务器的位置`char * getInput(char *s, int n, FILE *stream)`在 ipjsuaAppDelegate.m 文件中的函数中。

这段代码在`char * getInput(char *s, int n, FILE *stream)`

```
if (stream != stdin)
{
    return fgets(s, n, stream);
} 
```

正在读取 config.cfg 文件及其内容，并将其发送到 sip 服务器执行。在此文件中，您可以放置​​帐户配置、媒体配置的任何设置......（更多关于此链接[pjsua 手册](http://www.pjsip.org/pjsua.htm)）。

读取config.cfg文件后，这段代码

```
while (!thread_quit && !app.mainView.hasInput)
{
    int ctr = 0;
    [NSThread sleepForTimeInterval:SLEEP_INTERVAL];
    if (ctr == 4)
    {
      [app performSelectorOnMainThread:@selector(displayMsg:) withObject:mstr waitUntilDone:YES];
        [mstr setString:@""];
        ctr = 0;
    }
    ctr++;
} 
```

正在运行并等待来自应用程序的更多命令输入。要触发此 while 循环以继续执行，您必须将**app.mainView.hasInput**设置为**true**。当你想发送一些命令时：

*   首先，您将命令文本放入此变量中`app.mainView.text`
*   二、设置`app.mainview.hasInput = true`

当然，您可以在 ipjsuaAppDelegate 类中将这些变量设为私有。重要的事实是它`while (!thread_quit && !app.mainView.hasInput)`包含`app.mainView.hasInput`您的局部变量`hasInput`。

发送命令后，这段代码被执行（`char * getInput(char *s, int n, FILE *stream)`函数内部）

```
[app.mainView.text getCString:s maxLength:n encoding:NSASCIIStringEncoding];
[app.mainView.textField setEnabled: false];    
[app performSelectorOnMainThread:@selector(displayMsg:) withObject:app.mainView.text waitUntilDone:NO];

return s; 
```

然后，执行 pjsua_app.c 文件中的相应代码，然后`char * getInput(char *s, int n, FILE *stream)`再次调用该函数并执行 while 循环（`while (!thread_quit && !app.mainView.hasInput)`）并等待另一个输入。因此，如果您需要执行两个或多个连续命令，您可以在此处使用 while 循环执行之前的时刻发送另一个命令（例如：要拨打电话，您必须发送 'm' 并在发送 sip uri 之后调用 'sip:account @example.com'，这是两个连续的命令）。

在我的应用程序中，它看起来像这样

```
char * getInput(char *s, int n, FILE *stream)
{
    if (stream != stdin)
    {
        return fgets(s, n, stream);
    }

    [appDelegate performSelectorOnMainThread:@selector(actionAfterCommand) withObject:nil waitUntilDone:NO];   

    app.mainView.hasInput = false;
    [app.mainView.textField setEnabled: true];
    [app performSelectorOnMainThread:@selector(displayMsg:) withObject:mstr waitUntilDone:YES];
    [mstr setString:@""];

    while (!thread_quit && !app.mainView.hasInput)
    {
        int ctr = 0;
        [NSThread sleepForTimeInterval:SLEEP_INTERVAL];
        if (ctr == 4)
        {
            [app performSelectorOnMainThread:@selector(displayMsg:) withObject:mstr waitUntilDone:YES];
            [mstr setString:@""];
            ctr = 0;
        }

        ctr++;
    }

    [app.mainView.text getCString:s maxLength:n encoding:NSASCIIStringEncoding];
    [app.mainView.textField setEnabled: false];    
    [app performSelectorOnMainThread:@selector(displayMsg:) withObject:app.mainView.text waitUntilDone:NO];

    return s;
} 
```

和选择器`actionAfterCommand`

```
- (void)actionAfterCommand
{
    [NSThread sleepForTimeInterval:1.0];//this is just to be sure that sip server is ready to listen agin

    if ([app.mainView.text isEqualToString:command])// command can be m, a, ...
    {
        app.mainView.text = secondCommand;
        appDelegate.hasInput = true;
    }
} 
```

*另外，如果有人对此问题有其他方法，请在此处添加。*

# c - C宏删除参数列表中的重复项

> ID：13836949
> 
> 赞同：0
> 
> 时间：2012-12-12T09:46:08.793
> 
> 标签：c, macros, p99

我想知道是否可以构建一个 gnu C 宏，该宏扩展为一个标记列表（整数），这些标记是没有重复的宏的参数。可以假设参数的数量是固定的（目前）。即我想要类似的东西：

```
#define MAC(a,b,c) ??? 
```

扩展例如

```
MAC(1,2,1) 
```

到`1,2`. 参数没有排序，结果也不必排序。

* * *

根据下面的建议，我构建了一个示例，它基本上可以使用 p99 完成我想要的功能，包括：

```
#include <p99/p99_if.h>
#include <p99/p99_paste.h>

#define MAC2(a,b) double P99_PASTE2(myvar_, a) P99_IF_EQ(a,b)()(; double P99_PASTE2(myvar_, b))
#define MAC3(a,b,c) double P99_PASTE2(myvar_, a) P99_IF_EQ(a,b)()(; double P99_PASTE2(myvar_, b)) P99_IF_EQ(a,c)()(P99_IF_EQ(b,c)()(; double P99_PASTE2(myvar_, c)) )

MAC2(1,2);
MAC2(3,3);

MAC3(1,2,3);
MAC3(10,10,1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:42:42.613

如果您的参数总是像您的示例中的小十进制数字，那么您*可以*摆脱我在[P99](http://p99.gforge.inria.fr)中提供的内容。它有`P99_IF_EQ`你可以使用的宏

```
#define MAC(A,B) unsigned P99_PASTE2(myvar_, A) P99_IF_EQ(A,B)()(; unsigned P99(unsigned P99_PASTE2(myvar_, B))

MAC(1,2); // -> myvar_1 and myvar_2
MAC(3,3); // -> myvar_3 
```

仅在`B`不等于时扩展声明`A`。显然，对于三个不同的论点，这已经变得有点乏味，但也是可行的。

# c# - 从后面的代码获取 loginview 中的文件输入

> ID：13836953
> 
> 赞同：0
> 
> 时间：2012-12-12T09:46:16.330
> 
> 标签：c#, asp.net, file-upload, loginview, htmlcontrols

我正在尝试创建文件上传，并为此使用 HTML 控件输入（文件）。由于此控件位于登录视图中，因此我无法直接在后面的代码中访问它，而必须像这样使用 FindControl 函数：

```
this.LoginView1.FindControl("file_img_upload") 
```

问题是，我需要对控件进行类型转换才能访问 PostedFile 属性。由于 Input 是一个 HTML 控件，因此您似乎无法像 Button 那样进行类型转换。

有没有办法对这个控件进行类型转换或以任何其他方式访问它？

这是控件嵌入到登录视图中的方式：

```
<asp:LoginView ID="LoginView1" runat="server">
  <AnonymousTemplate>
    <p>U heeft geen toegang tot deze pagina als u niet ingelogd bent.</p>
  </AnonymousTemplate>
  <LoggedInTemplate>
    <div class="fifth">
       <input id="file_img_upload" type="file" enctype="multipart/form-data"/>
       <asp:Button ID="btn_img_upload" runat="server" Text="Upload" 
                                    OnClick="btn_img_upload_Click"/>  
       <asp:Image ID="img_img_upload" runat="server" />
       <asp:Label ID="lbl_img_output" runat="server"  Text="Label"></asp:Label> 
    </div>
  </LoggedInTemplate>
</asp:LoginView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:10:39.020

使用 ASP FileUploadControl 更容易，它可以从后面的代码中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:30:33.803

`System.Web.UI.HtmlControls.HtmlInputFile`如果您添加 runat="server" 属性，您会发现它是一个控件。

```
<input id="file_img_upload" type="file" enctype="multipart/form-data" runat="server" /> 
```

# html - 对齐 h2 标题旁边的链接

> ID：13836957
> 
> 赞同：1
> 
> 时间：2012-12-12T09:46:27.983
> 
> 标签：html, css, alignment

非常简单的问题，如何强制链接与 h2 标题内联显示？我有以下代码： http: [//jsfiddle.net/jezzipin/6DpPX/](http://jsfiddle.net/jezzipin/6DpPX/)，我希望“返回顶部”链接与“社交媒体”标题内联显示，但我尝试的一切似乎都没有工作。甚至使用跨度。

任何帮助将不胜感激。

```
jme1988 
```

注意要清楚，这是我所追求的效果：

![在此处输入图像描述](../Images/2ac15c9577ff55b65b382306a8e00960.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:55:48.937

**添加这个CSS**

```
.b2t_link{
float:right;
    margin-left:0;
}
.page_title{
display:inline-block;
    vertical-align:top;
} 
```

**[演示](http://jsfiddle.net/6DpPX/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:54:30.537

应用以下样式：

```
.page_title{
    font-size:18px;
    font-family: Arial,Helvetica,sans-serif;
    font-weight:400;
    padding-left:16PX;
    /*color:#053452; Dark Blue*/
    color: #729ABD;
    float:left;  //Added float
}

.b2t_link{
   float: right;
   margin-left: 794px;  //Reduced margin by width of page-title
   font-family: 'FamiliarProBold',Arial,Helvetica,sans-serif;
   font-size: 11px;
   color: #729ABD;    
}

.two_col_textAndImage_text{
   width: 720px;
   font-size: 11px;
   display: block;
   float: left;
   padding-left: 5px;
   padding-right: 5px;
   padding-top: 10px;
   min-height: 300px;    
}

#main-content{
   clear:both;   
} 
```

然后在 html`div`中用 id将图像和文本包装起来`main-content`。

```
 <div id="main-content">
        <div class="two_col_textAndImage_text">
            <h2 class="item_title_no_image">Social Media Integrations</h2>
            <p class="item_text_no_image">
                Social Media is fast becoming a channel for advertising, promoting and applying for vacancies. Some organisations have fully embraced this within their recruitment strategies whilst others have not yet or do not wish to adopt this trend. Whatever the view of your own organisation's recruitment channels, ATS2go has been designed to integrate seamlessly with social media. <br/><br/>
                Social Media buttons, such as Facebook, Twitter and LinkedIn can be embedded within you vacancy postings enabling visitors to your site to forward a link to their friends and contacts about your vacancies. In addition, ATS2go includes automative "Job Tweets" for your vacancies which include a link back to your recruitment page; people simply click on the link within the Tweet and can then find out more about the role and hopefully submit their application immediately - simple, easy and free! <br/><br/>
            </p>
        </div>
        <div class="two_col_textAndImage_image">
          <img / src="https://text-development.ats2go.com/img/content_images/social-media.jpg" width="250px"/>
        </div>
   </div> 
```

示例：http: [//jsfiddle.net/6DpPX/8/](http://jsfiddle.net/6DpPX/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:55:18.950

你可以把链接放在你的 h2 中。

[http://jsfiddle.net/lollero/49VNH/1](http://jsfiddle.net/lollero/49VNH/1)

替代视图：http: [//jsfiddle.net/lollero/49VNH/1/show](http://jsfiddle.net/lollero/49VNH/1/show)

HTML：

```
<h2 class="page_title">
    Social Media 
    <a href="#top" class="b2t_link">Back to top</a>
</h2> 
```

CSS：

```
.b2t_link{
    float: right;
} 
```

# visual-studio-2010 - 如何更改edmx的ObjectContext类名

> ID：13836958
> 
> 赞同：1
> 
> 时间：2012-12-12T09:46:36.890
> 
> 标签：visual-studio-2010, entity-framework-4, edmx

当我从现有数据库更新模式时，模式和类是由 Entity Framework 5 生成的。但我想更正 ObjectContext 类的名称。我知道我们可以使用 Visual Studio 2010 的重构工具，但我不确定所有的代码文件都可以通过这种方式更新。请帮助我。谢谢。

# objective-c - 未调用 ParentViewController 的 ViewWillAppear

> ID：13836963
> 
> 赞同：0
> 
> 时间：2012-12-12T09:46:55.870
> 
> 标签：objective-c, ios, ios5, viewwillappear

我正在尝试实现自定义 UIActionSheet（由 ViewController 组成）我已将 View Controller 作为 subView 添加到我的 rootView 的 navigationcontroller

```
- (IBAction)ShowMenu:(id)sender
{
   [self.navigationController.view addSubview:self.menuViewController.view];
   [self.menuViewController setTest:YES];
   [self.menuViewController viewWillAppear:YES];
} 
```

这里 MenuViewController 有一个 tableview 有几个选项可供选择。选择后，我将打开那些各自的 ViewController。假设我点击 menu1 然后打开 menu1ViewController 并且它工作正常。现在当我关闭这个 viewController 时，我正在调用dismissViewController。

在 menuViewController 中，我编写了代码以通过 menuviewController 设置动画到底部，并且效果很好。

但是 MenuView 的父级是 TestViewController ，当 menuviewController 动画下来时，不会调用函数 viewdidAppear 。

这就是我的问题，

我正在使用此代码通过 menuViewController 设置动画到底部

```
- (void) slideOut {

  [UIView beginAnimations:@"removeFromSuperviewWithAnimation" context:nil];

    // Set delegate and selector to remove from superview when animation completes
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];

    // Move this view to bottom of superview
    CGRect frame = self.menusheet.frame;
    frame.origin = CGPointMake(0.0, self.view.bounds.size.height);
    self.menusheet.frame = frame;

    [UIView commitAnimations];
}

// Method called when removeFromSuperviewWithAnimation's animation completes
- (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
    if ([animationID isEqualToString:@"removeFromSuperviewWithAnimation"]) {
        [self.view removeFromSuperview];
    }
} 
```

菜单视图控制器

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if(m_test)
    {
        [self slideIn];
        m_test = FALSE;
    }
    else
    {
        [self slideOut];       
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:03:30.940

恕我直言，`-[UIViewController viewWillAppear]`并且`-[UIViewController viewDidAppear]`只会在被调用者被那些类似容器的控制器（如导航控制器、标签栏控制器）添加到视图控制器层次结构中时被调用。

`addSubview:`如果您只是通过调用代码来添加视图，则不会调用它。[另请参阅](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDisplay-Notifications/RespondingtoDisplay-Notifications.html)。

您可以在调用之前和之后使用或不使用动画在代码中以编程方式调用`-viewWillAppear`并在适当的情况下调用。`-viewDidAppear``addSubview:`

# java - 从文件中读取短裤和字符

> ID：13836965
> 
> 赞同：1
> 
> 时间：2012-12-12T09:47:07.843
> 
> 标签：java, file-io, unicode

我有一个二进制文件，它是 2 字节整数和 UTF-8 字符对的列表。我正在做的是

```
InputStream stream = ...;
InputStreamReader in = new InputStreamReader(stream);

while(...){
   stream.read(...);
   in.read();
} 
```

也就是说，我直接从 InputStream 读取字节，并从同一文件流的 InputStreamReader 读取字符。对我来说，这看起来像是一个奇怪的（可怕的？）想法，但我没有看到其他方式。DataInputStream 只会读取 UTF-16 字符，而且我不知道我的 UTF-8 字符自己从字节中读取它需要多少字节（我不想重新发明 InputStreamReader）。此外，相同的方案适用于输出。

我的问题是，在读取第一对之后， InputStream.read 返回 -1 （当然，文件比那个长）。

我想知道是否有更好的选择，或者是否有其他原因导致 EOF。另外，如果这个方案没问题，我应该关闭 Reader 还是 InputStream？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:28:38.583

没错，您不想同时访问 InputStreamReader 及其底层 InputStream。您可能必须编写自己的 InputStreamReader 版本，但编写起来并不多：

```
byte[] bytes = new byte[4];

DataInputStream dataStream = new DataInputStream(stream);
while (dataStream.available() > 0) {
    int intValue = dataStream.readUnsignedShort();

    int charValue;
    int b = dataStream.read();
    if (b < 0x80) {
        charValue = b;
    }
    else {
        int byteCount;
        if (b >= 0xf0) {
            byteCount = 4;
        } else if (b >= 0xe0) {
            byteCount = 3;
        } else {
            byteCount = 2;
        }

        bytes[0] = (byte) b;
        dataStream.readFully(bytes, 1, byteCount - 1);
        String s = new String(bytes, 0, byteCount, 
            StandardCharsets.UTF_8);
        charValue = s.codePointAt(0);
    }

    // Do something with intValue and charValue
} 
```

# url - Jquery的ajax请求在远程失败，而不是在本地

> ID：13836969
> 
> 赞同：0
> 
> 时间：2012-12-12T09:47:17.390
> 
> 标签：url, jquery

由于 url 问题，我正在使用在本地而不是远程工作的 ajax 请求。看起来像 ：

```
$.ajax({
        type: "POST",
        url: "../classes/file_to_process.php",
        data: "my data"
        success: function(msg){...}
}) 
```

我不断收到一条错误消息：`"The requested URL /classes/file_to_process.php {without the double dots behind it} was not found on this server"`

我的工作目录位于文件夹 /prod 中，其中有 index.php。/classes 文件夹与 /prod 处于同一级别。因此，要从 jquery 请求中获取它，我使用 ../classes/file_to_process

我通过使用 pwd 来获取远程服务器上的正确路径尝试了绝对路径，但我有相同的消息

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:45:42.167

“classes”文件夹与“public”文件夹处于同一级别，因此您无法直接从客户端（AJAX、JavaScript 等）访问它。您需要将其放在“公共”中或将其映射到 /classes 虚拟路径。或者，您可以在“公共”文件夹中有一个受信任的 .php 文件，该文件可以访问服务器端的“类”。

TL;博士; 从客户端，您无法访问未提供给客户端的文件。

# python - 将列和行标签分配给合并的 numpy 数组？

> ID：13836971
> 
> 赞同：0
> 
> 时间：2012-12-12T09:47:28.283
> 
> 标签：python, arrays, numpy

我有多个没有列名或行名的数组，我想使用类似的东西来组合它们`numpy.vstack()`or `numpy.hstack()`。

可以[在创建结构化数组时](https://stackoverflow.com/questions/5795748/store-numpy-row-and-column-headers)分配列和行标签，但是[hstack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html)和[vstack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vstack.html)似乎没有这个功能。

```
import numpy as np
a1 = np.array([1,2,3,4])
a2 = np.array([5,6,7,8])
a3 = np.vstack([a1,a2],dtype=[('RowName1','double'),('RowName2','double')]) 
```

产生：

```
TypeError: vstack() got an unexpected keyword argument 'dtype' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:36:47.833

一些可能的选择是（因为`recfunctions`非常隐藏）：

```
from numpy.lib import recfunctions
a1 = np.array([1,2,3,4]).astype(('RowName1',float))
a2 = np.array([5,6,7,8]).astype(('RowName2',float))
recfunctions.merge_arrays((a1, a2)) 
```

* * *

有这个，但这有一些问题需要小心，因为内存的重新解释如何与视图一起工作，最好只使用连接数组创建一个新的重新数组。

你可以扭转逻辑：

```
import numpy    
a1 = np.array([1,2,3,4])
a2 = np.array([5,6,7,8])
# ok, not that beautiful. But if your arrays are the correct type to begin with
# you can skip that astype call. Using `np.c_[]` since it happens to concatenate right.
a3 = np.c_[v1,v2].astype(float).copy('C').view(dtype=[('RowName1',float),('RowName2',float)]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:42:32.197

您也可以考虑查看[pandas](http://pandas.pydata.org)。Pandas 有一个不错的[数据框](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)数据结构，可能很好。

当然，这需要您在项目中添加另一个依赖项。幸运的是，如果你已经在使用 numpy，那么 Pandas 很容易上手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:21:04.293

`vstack`不适用于结构化数组，但仅适用于内存中连续的“标准”numpy 数组。最简单的方法是创建一个空的结构化数组，然后用所需的行填充它：

```
import numpy as np
a3 = np.empty(4, dtype=[('RowName1','double'),('RowName2','double')])
a3['RowName1'] = a1
a3['RowName2'] = a2 
```

# ssh - 使用 expect 通过 ssh 连接到交换机

> ID：13836972
> 
> 赞同：3
> 
> 时间：2012-12-12T09:47:29.277
> 
> 标签：ssh, expect

我正在尝试运行脚本以使用期望连接到 Procurve 4204vl 交换机。这是我创建的代码：

```
#!/usr/bin/expect -f
set timeout 20
spawn ssh -l user 192.168.0.10 
expect "user@192.168.0.10's password:"
send "1234"
send "\r"
expect "Press any key to continue" 
send "j\r"
send "conf"
send "\r"
send "no ip route 89.19.238.2 255.255.255.255 192.168.0.12"
send "\r"
send "exit"
send "\r"
send "exit"
send "\r"
send "exit"
send "\r"
expect "Do you want to log out [y/n]?"
send "y" 
```

我使用 simple 运行它`expect script.exp`，问题是我得到了这些错误：

1.  路线没有被删除
2.  脚本执行完成后，屏幕上出现以下错误：

    按任意键继续执行无效命令名称“y/n”，同时执行从“期望“您要注销 [y/n]？”（文件“script.exp”第 19 行）中调用的“y/n”

那么，我该如何解决这个问题呢？谢谢你。

PS：如果我评论所有`"exit"`行以及注销问题，然后在`"interact"`命令的最后一行添加，脚本可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:47:37.190

对于未删除的路线，程序给你什么输出？您是否看到路由器的任何错误？

在 expect 和 Tcl 中，方括号是执行命令的语法，很像 shell 中的反引号。最简单的解决方案是使用大括号而不是双引号来防止命令插值：

```
expect {Do you want to log out [y/n]?} 
```

大括号就像 shell 中的单引号一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T10:55:20.317

```
send "logout\r"
expect {
    "Do you want to log out" {
        send "yy"
        exp_continue
    } "Do you want to save current configuration" {
        set result $expect_out(0,string);
        puts "save..."
        send "y"
        puts "ok"
    } eof {
        puts "end of script"
    }
} 
```

# asp.net - 嵌入“正常” URL 时无法播放 youtube 视频

> ID：13836977
> 
> 赞同：0
> 
> 时间：2012-12-12T09:48:00.950
> 
> 标签：asp.net, youtube, youtube-api

我正在尝试在我的页面上嵌入视频，具体取决于用户在看到列表后选择的视频。在我的页面上，我有：

```
 <div id="vidContent" style="text-align:left">
           <object width="550px" height="350px" >
                 <asp:Literal ID="ltlVideo" runat="server"></asp:Literal>
            </object>
       </div> 
```

在我背后的代码中：

```
 Dim strVidPath As String = "http://www.youtube.com/v/" & strVidID
        ltlVideo.Text = "<embed src='" & strVidPath & "' type='application/x-shockwave-flash' allowscriptaccess='always' allowfullscreen='true' height='350' width='470'></embed>
        phVideoBanner.Visible = True 
```

..

这工作正常...如果你有“strVidID”

如果您有 strVidPath = www.youtube.com/v/_O7iUiftbKU，它似乎只会显示和播放

但如果 strVidPath = www.youtube.com/watch?v=_O7iUiftbKU ....这似乎是观看 youtube 视频时地址栏中的正常 URL，则不播放。

我希望用户能够将视频添加到页面，我想如果粘贴到视频的 URL 中会更容易，但现在看来我必须让他们粘贴到 videoID 中，而不是似乎只有在我使用 www.youtube.com/v/_O7iUiftbKU 时才能播放

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:39:52.980

与其尝试解析 YouTube 观看页面 URL 并自己构建嵌入代码，不如使用[oEmbed 服务](http://apiblog.youtube.com/2009/10/oembed-support.html)为您完成。

如果您需要取回旧版嵌入代码而不是 iframe 嵌入代码，`iframe=0`则需要作为 URL 参数之一传递给 oEmbed 服务，例如：[http ://www.youtube.com/oembed?url=http% 3A//www.youtube.com/watch%3Fv%3DbDOYN-6gdRE&format=json&iframe=0](http://www.youtube.com/oembed?url=http%3A//www.youtube.com/watch%3Fv%3DbDOYN-6gdRE&format=json&iframe=0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:19:00.947

正如您所指出的，其中包含“观看”一词的 URL 结构是 Youtube 面向公众的网页，其中包含的内容远不止视频……它还包括您在页面上看到的所有其他内容。本质上，它是一个解析为 HTML 页面的指针，您不能将 HTML 页面作为嵌入元素的来源。

正确的 URL 结构（即有效的）不是指向 HTML 页面的指针，而是直接解析到播放器本身的指针，因此可以用作嵌入元素的源。

这是 Stack Overflow 问题的链接，其答案包括一个 C# 代码块，该代码块将常规 YouTube URL（以其任何形式）作为输入，进行正则表达式匹配，并仅返回 Youtube ID——应该很简单根据您的需要修改它......因此您仍然可以继续让您的用户粘贴整个视频 URL：

[C# 正则表达式通过 url 从 youtube 和 vimeo 获取视频 ID](https://stackoverflow.com/questions/3652046/c-sharp-regex-to-get-video-id-from-youtube-and-vimeo-by-url)

# java - Maven跳过编译

> ID：13836978
> 
> 赞同：37
> 
> 时间：2012-12-12T09:48:04.680
> 
> 标签：java, maven, compilation

我想使用 Maven 执行某个只需要源代码的插件，但我不希望 Maven 编译任何东西（主要是因为项目无法编译）。

我如何告诉 Maven 跳过编译步骤并启动它的插件，然后将生成的资源打包到一个漂亮的 JAR 中？（我已经知道最后一步的过程。）

**附加信息：**

所以我们现在尝试了很多东西，例如：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.0</version>
    <configuration>
        <excludes>
            <exclude>**/*</exclude>
        </excludes>
        <source>1.7</source>
            <target>1.7</target>
    </configuration>
    <executions>
        <execution>
            <phase>deploy</phase>
        </execution>
    </executions>
</plugin> 
```

虽然当我们做 a`mvn package`我们得到这个：

```
[INFO] --- maven-compiler-plugin:3.0:compile (default-compile) @ project ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling ALOTOF source files to /home/myname/dir/dir/project/target/classes 
```

消息已编辑 ofc。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-03-12T05:47:35.140

```
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-compiler-plugin</artifactId>
   <executions>
     <execution>
       <id>default-compile</id>
       <phase>compile</phase>
       <goals>
          <goal>compile</goal>
       </goals>
       <configuration>
         <skipMain>true</skipMain> <--Skip
       </configuration>
     </execution>
   </executions>
</plugin> 
```

> 将此设置为“真”以绕过主要来源的编译。不推荐使用它，但有时很方便。用户属性是：maven.main.skip。

`mvn package -Dmaven.main.skip`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-12T10:22:47.350

Maven 功能部分组织在包含目标的插件中。这些目标可以在不成为生命周期的一部分的情况下执行。例如，对于 jar-plugin 的 jar-goal，您将调用：

```
mvn jar:jar 
```

如果您浏览[可用插件列表，](http://maven.apache.org/plugins/index.html)您可能会找到您正在寻找的功能。如果有必要，您甚至可以定义一个“程序集”来选择要捆绑到存档中的文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-09T14:13:19.330

为了防止 Maven 默认编译，首先确保**maven-compiler-plugin**的配置有**useIncrementalCompilation = false**：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.3</version>
    <configuration>
        <source>1.8</source>
        <target>1.8</target>
        <useIncrementalCompilation>false</useIncrementalCompilation>
    </configuration>
</plugin> 
```

此外，如果您的 Maven 配置文件使用**maven-clean-plugin**，那么默认情况下它会发现并删除在*project.build.directory*、*project.build.outputDirectory*、*project.build.testOutputDirectory*和*project.reporting.outputDirectory*中配置的目录。

要禁用这些默认清理，请添加到 maven-clean-plugin 配置：**excludeDefaultDirectories = true**：

```
<excludeDefaultDirectories>true</excludeDefaultDirectories> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-14T09:50:33.730

所以我像这样使用它并且它有效。（ 错误的）

```
<executions>
        <execution>
                    <id>default-compile</id>
                    <configuration>
                        <showDeprecation>true</showDeprecation>
                        <showWarnings>true</showWarnings>
                        <failOnError>false</failOnError>
                        <compilerArgument>-Xlint:unchecked</compilerArgument>
                        <compilerArguments>
                            <source>${maven.compiler.target}</source>
                            <target>${maven.compiler.source}</target>
                        </compilerArguments>
                    </configuration>
        </execution> 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-12T09:53:03.377

我会定义一个单独的 pom 来构建单独的工件。

在那个 pom 中，你只使用你的资源生成插件和打包插件。

那么你就不必担心它做的太多了。

# java - java/lang/UnsupportedClassVersionError 更改 tomcat ajp 端口时

> ID：13836979
> 
> 赞同：0
> 
> 时间：2012-12-12T09:48:09.657
> 
> 标签：java, jakarta-ee, tomcat, tomcat7

我在 eclipse helios 中使用**tomcat 7.0.23**，当尝试更改端口时，如下所示：

*   **Tomcat 管理端口：** 8008
*   **HTTP/1.1：** 8081
*   **AJP/103：** 11009

我收到以下错误：

```
Error occurred during initialization of VM
java/lang/UnsupportedClassVersionError: java/lang/Object : Unsupported major.minor version 51.0 
```

请告知如何解决它，谢谢。

编辑：忘了提到我在这台机器上有另一个正在运行的tomcat实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:14:54.747

更改**eclipse tomcat JRE**以匹配**JAVA_HOME**环境变量中的问题后问题解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:16:25.757

您是否尝试将 Eclipse Helios 与 Java 7 一起使用？这不起作用，您需要将 Eclipse 升级到至少[Eclipse Indigo SR1](http://eclipse.org/org/press-release/20110929_indigosr1.php)

# c++ - 在 C++11 上下文中调用 ObjC 函数

> ID：13836980
> 
> 赞同：2
> 
> 时间：2012-12-12T09:48:11.523
> 
> 标签：c++, objective-c, c++11, cross-platform, automatic-ref-counting

我的 Objective C ARC 项目中有一个 C++ 类。该类派生自纯 C++ 类，并为我的 iOS 项目添加了特定于平台的实现。我想在那里调用 Objective C 函数和框架。

我使用 C++11 lambda 函数实现了平台特定部分。我可以那样做吗？任何隐藏的陷阱（特别是因为我的 iOS 项目使用 ARC）？

```
bool MyDerivedCPPClass::getValue(const std::string& stdKey, std::string& stdValue) const
{
    NSString *key = [NSString stringWithUTF8String:stdKey.c_str()];

    // Do ObjC stuff

    if(value)
    {
        stdValue = std::string([value cStringUsingEncoding:NSUTF8StringEncoding]);
        return YES;
    }
    else
    {
        return NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:53:54.963

它看起来不错（通常 Objective-C 不会干扰 C++），除了：

*   你为什么定义一个 lambda 只是为了立即调用它？
*   C++`bool`应该是`true`/ `false`，而不是`YES`/`NO`
*   确保运行它的线程有一个自动释放池

# networking - 与互联网隔离 - 子网划分

> ID：13836983
> 
> 赞同：0
> 
> 时间：2012-12-12T09:48:18.563
> 
> 标签：networking

我正在介绍一些网络，我正在讨论子网划分的主题。一章结尾的练习让我难过。看起来很简单，但我什么都没有。练习如下：

> 解释子网 2 如何与 Internet 隔离（即无法向 Internet 发送/接收数据包，但能够与其他子网交换数据包（按所示格式填写相应路由器的路由表的相应部分）以下）

任何帮助将不胜感激！

子网（简化）：

```
*********    *********
* SUB 1 *    * SUB 2 *
*********    *********
    \           /
     \         /
      \       /
      #########   *********
      #ROUTER1#   * SUB 3 *
      #########   *********
          |        /
          |       /
      #########  /
      #ROUTER2#_/
      #########
          |
          |
   To/From Internet 
```

桌子：

```
Source NetID  |  Destination NetID  |  Action
---------------------------------------------------
              |                     |
              |                     | 
```

请注意，我打算在 serverexchange 上发布此内容，但显然 SO 是提出此类网络高级问题的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:11:58.527

*   子 1：1.0.0.0/8
*   子 2：2.0.0.0/8
*   子 3：3.0.0.0/8

路由器1：

*   1.0.0.0 -> 2.0.0.0：发送到 2.0.0.0
*   1.0.0.0 -> 0.0.0.0：发送到Router2的IP地址
*   2.0.0.0 -> 1.0.0.0：发送到 1.0.0.0
*   2.0.0.0 -> 3.0.0.0：发送到Router2的IP地址

路由器2：

*   1.0.0.0 -> 3.0.0.0：发送到 3.0.0.0
*   1.0.0.0 -> 0.0.0.0：发送到 Internet
*   2.0.0.0 -> 3.0.0.0：发送到 3.0.0.0
*   3.0.0.0 -> 1.0.0.0：发送到Router1的IP地址
*   3.0.0.0 -> 2.0.0.0：发送到Router1的IP地址
*   3.0.0.0 -> 0.0.0.0：发送到 Internet

诀窍是两个路由器上都没有来自 2.0.0.0/8 的任何东西的默认路由。

# jquery - 用户名不必要地重复

> ID：13836985
> 
> 赞同：0
> 
> 时间：2012-12-12T09:48:25.033
> 
> 标签：jquery, asp.net, signalr

我创建了一个简单的聊天应用程序，它将所有连接的用户名广播给连接到服务器的所有用户。每当连接新用户时，都会刷新用户名列表。

我的问题是.. 已连接用户列表仅对新连接的用户和其他用户显示良好，列表中充满了重复的用户名，如下图所示：

![在此处输入图像描述](../Images/acdbca70a7c9dd7ae706d5e78dee5859.png)

我不明白为什么会这样。为了清楚地理解，我什至清除了`showUsernames`显示用户名列表的 div。

请查看与此问题相关的以下代码。（随着用户的增加，第一个连接用户的列表也在增加，然后是第二个、第三个、第四个......）

```
chat.client.joins = function () {

    //calling the server side method "GetConnectedUsers"
    //The return value of the method is stored in a variable "users"
    chat.server.getConnectedUsers().done(function (users) {
        //clearing the div, to fill it again 
        $('#showUsernames').val('');
        console.log(users.length);
        //calling each username stored in a static dictionary on server side using for loop
        for (var i = 0; i < users.length; ++i) {
            $('#showUsernames').append('<li>' + users[i].Name + '</li>');
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:50:28.170

您不是在检查已连接的用户。

解决此问题的最快方法是先清空列表。

```
$('#showUsernames').empty();
for (var i = 0; i < users.length; ++i) {
  $('#showUsernames').append('<li>' + users[i].Name + '</li>');
} 
```

`line 72`的`files.js`

编辑：我现在看到您正在尝试使用`.val('')`. 这不起作用，因为`.val()`仅适用于输入元素等。`.empty()`如上所示。

所以，of `line 70`-`files.js`切换`.val('')``.empty()`

# java - 正确检查 FTP 服务器连接

> ID：13836989
> 
> 赞同：7
> 
> 时间：2012-12-12T09:48:40.023
> 
> 标签：java, ftp, ftp-client

我在程序开始时打开到 FTP 服务器的连接。

在我对服务器执行操作之前，我想检查连接是否成功建立。最简单的快速方式，所以如果连接消失，我会尝试再次连接。

我用这段代码来做到这一点：

```
private boolean checkConnection()
{
    try 
    {
        boolean success = ftpClient.login(user_name, password);
        if(success)
            return true;
        else 
            return false;
    }
} 
```

但是这个方法在连接关闭时会抛出 NullPointer 异常。

我可以检查与的连接，`ftpClient.connect(server, port);`但这就像试图重新连接。

检查连接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T10:55:34.897

尝试发送一个简单的`sendNoOp()`并检查回复可能是轻轻检查连接的好方法：

```
private boolean checkConnectionWithOneRetry()
{
    try 
    {
        // Sends a NOOP command to the FTP server. 
        boolean answer = ftpClient.sendNoOp();
        if(answer)
            return true;
        else
        {
            System.out.println("Server connection failed!");
            boolean success = reconnect();
            if(success)
            {
                System.out.println("Reconnect attampt have succeeded!");
                return true;
            }
            else
            {
                System.out.println("Reconnect attampt failed!");
                return false;
            }
        }
    }
    catch (FTPConnectionClosedException e) 
    {
        System.out.println("Server connection is closed!");
        boolean recon = reconnect();
        if(recon)
        {
            System.out.println("Reconnect attampt have succeeded!");
            return true;
        }
        else
        {
            System.out.println("Reconnect attampt have failed!");
            return false;
        }

    }
    catch (IOException e) 
    {
        System.out.println("Server connection failed!");
        boolean recon = reconnect();
        if(recon)
        {
            System.out.println("Reconnect attampt have succeeded!");
            return true;
        }
        else
        {
            System.out.println("Reconnect attampt have failed!");
            return false;
        }   
    }
    catch (NullPointerException e) 
    {
        System.out.println("Server connection is closed!");
        boolean recon = reconnect();
        if(recon)
        {
            System.out.println("Reconnect attampt have succeeded!");
            return true;
        }
        else
        {
            System.out.println("Reconnect attampt have failed!");
            return false;
        }   
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T10:03:02.780

```
private FTPClient ftp = null;

private void connect()
{
            ftp = new FTPClient();

            try {

                ftp.connect("Server",port);
                boolean login = ftp.login("username", "password");
                System.out.println(" login "+ login );

            } catch (FTPConnectionClosedException e) {          
                System.err.println("ERROR :: FTP Server Unreachable");
                sleep();
                connect();          
            } catch (SocketException e) {
                System.err.println("ERROR :: FTP Server Unreachable");
                sleep();
                connect();  
            } catch (IOException e) {
                System.err.println("ERROR :: FTP Server Unreachable");
                sleep();
                connect();  
            }
}

public void sleep(){
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
} 
```

# objective-c - 从 Objective-C 中的另一个类更新 UILabel 文本

> ID：13836993
> 
> 赞同：2
> 
> 时间：2012-12-12T09:49:09.433
> 
> 标签：objective-c, ios, xcode

我在 ViewCotroller 类中实现了一个方法，用于将消息设置为该类中的 UILable。

```
 -(void)setAuthenticationMessage:(NSString *)message{
        //lblStatus is the UILabel
        lblStatus.text = message;
 } 
```

我正在从另一个类访问此方法来设置消息。尽管代码正确执行，但此消息并未更新。我通过在不同的线程中执行此方法进行了尝试。但这也没有成功。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:55:24.263

什么是`lblStatus`内存管理属性？仅您的命名约定就使我相信这与此有关。通常您将实例变量称为： `_lblStatus`或`self.lblStatus`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:06:02.330

使用委托设计模式（google it）。例子：

```
 //In the updating class .h

        @protocol LabelChangerDelegate <NSObject>
        -(void)handleLabelChangeMessage;
        @end

        @property (assign, nonatomic) id <LabelChangerDelegate> delegate;

       //In the updating class .m

        -(void)changeLabelInOtherClass{
         if (self.delegate != nil && [self.delegate respondsToSelector:@selector(handleLabelChangeMessage)]) {
                [self.delegate performSelector:@selector(handleLabelChangeMessage)];
            }
        } else {
         NSLog(@"Delgate doesn't implement handleLabelChangeMessage");
        }

        //In the view controller .h

        <LabelChangerDelegate>

        -(void)viewDidLoad{
         //set the delegate to self
        }

 //In the view controller .m

        -(void)handleLabelChangeMessage{
         self.label.text=@"I changed through delegation";
        } 
```

另一种选择是使用 NSNotificationCenter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:03:26.433

使用@protocol & delegates 来访问另一个类参考这个链接[示例](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html) [example2](http://agilewarrior.wordpress.com/2012/03/19/simple-objective-c-protocol-example/)

# oracle - PL/SQL 获取游标到游标

> ID：13836996
> 
> 赞同：0
> 
> 时间：2012-12-12T09:49:12.027
> 
> 标签：oracle, plsql, cursor

我有我在其中声明游标的包。我想将该游标作为 PROCEDURE 的 OUT 变量返回。我不能只从该游标中获取数据，因为数据需要首先由 load_data proc 加载。我不想使用那个 MMM_CURSOR 因为有额外的功能，它使用相同的选择 - 在数据库级别写入文件。

```
create or replace PACKAGE BODY PCG_MMM AS

CURSOR MMM_CURSOR(OFFSET NUMBER) IS 
SELECT TYPE, VALUE FROM MMM_TEMP_LOGS WHERE VALUE = OFFSET;

TYPE RET_TYPE IS REF CURSOR;

PROCEDURE LOAD_DATA AS 
-- loading data into MMM_TEMP_LOGS--
END LOAD_DATA;

PROCDURE WRITE_TO_FILE AS
BEGIN
-- writing to file here --
END WRITE_TO_FILE;

PROCEDURE GET_DATA(DATA RET_TYPE, OFFSET NUMBER:=0) AS
BEGIN
   LOAD_DATA;

   DATA := MMM_CURSOR(OFFSET) ; <--- ??

END GET_DATA;

END PCG_MMM; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:59:42.983

您不能将 CURSOR 传递出过程，但可以传递 ref 游标。您也不能只将光标转换为参考光标。

因此，如果您想在几个地方使用该光标+能够将其传递出去，那么我建议您将其更改为视图，并使用它来代替光标。

例如

```
create view MMM_VIEW
as
SELECT TYPE, VALUE FROM MMM_TEMP_LOGS; 
```

（如果您在其中传递变量并且需要保持这种方式以提高性能，请查找“参数化视图”）

```
create or replace PACKAGE BODY PCG_MMM AS

TYPE RET_TYPE IS REF CURSOR;

PROCEDURE LOAD_DATA AS 
-- loading data into MMM_TEMP_LOGS--
  for r_cur in (select * from mmm_view) loop...or whatever (replace the cursor with the view)
END LOAD_DATA;

PROCDURE WRITE_TO_FILE AS
BEGIN
-- writing to file here --
END WRITE_TO_FILE;

PROCEDURE GET_DATA(DATA out RET_TYPE, OFFSET NUMBER:=0) AS
BEGIN
   LOAD_DATA;

   open DATA for select * From mmm_view where value = OFFSET;

END GET_DATA;

END PCG_MMM; 
```

# wordpress - Wordpress 页面永久链接错误

> ID：13836997
> 
> 赞同：0
> 
> 时间：2012-12-12T09:49:11.053
> 
> 标签：wordpress, permalinks

您好，我的名字是 vaibhav，我的网站是 www.tricky-photoshop.com 我的网站有一个特殊的问题。我为我的网站创建了一个“关于”页面，几天前它运行良好。

但现在使用相同的 URL，我的主题显示“ `page not found`”。例如，假设我已将“关于”页面的 URL 设置为“ `abc.com/about`”，然后发布该页面，但是当我`abc.com/about`在 Google Chrome 的 URL 框中键入“”时，我的网站显示“ `page not found`”。

**截图**

1.  [https://www.box.com/s/zcjm532yzavc4rdyyxki](https://www.box.com/s/zcjm532yzavc4rdyyxki)（注意网址是“/about”）
2.  [https://www.box.com/s/9jjfnsdv6i79glf7aa2r](https://www.box.com/s/9jjfnsdv6i79glf7aa2r)（相同的 URL 主题显示“找不到页面”）

**我网站中的所有页面（主页除外）都会发生同样的事情，但帖子工作正常。**

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:28:33.513

要尝试的一件事是将永久链接切换为默认值，然后返回帖子标题。

转到`Settings>Permalink Settings`选择`default`，保存，然后选择`post name`或您之前的任何设置。这在过去为我解决了一些奇怪的问题。如果您在字段中输入了错误的 url，那将毫无用处`permalink`，因此请首先确保它是正确的。