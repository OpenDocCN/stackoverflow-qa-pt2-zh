# StackOverflow 问答 15972000-15972999

# iphone - 将定义添加到 UIButton 的当前选择器

> ID：15972002
> 
> 赞同：1
> 
> 时间：2013-04-12T12:56:12.503
> 
> 标签：iphone, objective-c, cocoa-touch, uikit

我想为 UIView 中的每个按钮子视图添加声音。我有很多这样的按钮，所以我不想创建 UIButton 的类别或子类，因为在这种情况下，我必须在任何地方更改类名。

无论如何，我只是循环 [currentView subViews] 并一一获取按钮，并添加一个操作方法。

请记住，按钮也已经有了动作。所以我正在寻找某种方法来为该动作选择器添加定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:17:00.903

试试下面的东西......它没有经过测试，但应该可以工作......

```
for(UIButton *button in currentView.subViews) {
    if ([button isKindOfClass:[UIButton class]]) {
        [button addTarget:self 
                   action:@selector(playSound) 
         forControlEvents:UIControlEventTouchUpInside];
    }
} 
```

# iphone - 在 iPad App 中使用 Sharepoint Web Service 时返回错误

> ID：15972004
> 
> 赞同：1
> 
> 时间：2013-04-12T12:56:29.743
> 
> 标签：iphone, ios, ipad, sharepoint-2010

我几乎制作了一个 API 来使用 Sharepoint Web 服务，除了删除项目部分外，一切正常。

我正在使用 Lists.asmx Web 服务，并且正在调用 UpdateListItems 方法。

我的请求如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
<soap12:Body>
<UpdateListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
<listName>Shared Documents</listName>
<updates><Batch OnError="Continue" ListVersion="1" ><Method ID='1' Cmd='Delete'><Field Name='ID'>99</Field></Method></Batch></updates>
</UpdateListItems>
</soap12:Body>
</soap12:Envelope> 
```

并且响应显示以下错误：

```
<soap:Reason>
<soap:Text xml:lang="en">Exception of type 'Microsoft.SharePoint.SoapServer.SoapServerException' was thrown
</soap:Text></soap:Reason>
<detail>
<errorstring xmlns="http://schemas.microsoft.com/sharepoint/soap/">The security validation for this page is invalid. Click Back in your Web browser, refresh the page, and try your operation again.</errorstring>
<errorcode xmlns="http://schemas.microsoft.com/sharepoint/soap/">0x8102006d</errorcode> 
```

任何想法我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:46:09.847

经过大量测试和谷歌搜索，我发现这个错误是从创建、更新或删除的 Web 服务中收到的。错误显示是因为在头文件中我没有包含 SOAPAction。

您可以在我找到解决方案的博客上查看详细信息

[http://weblogs.asp.net/jan/archive/2009/05/25/quot-the-security-validation-for-this-page-is-invalid-quot-when-calling-the-sharepoint-web-服务.aspx](http://weblogs.asp.net/jan/archive/2009/05/25/quot-the-security-validation-for-this-page-is-invalid-quot-when-calling-the-sharepoint-web-services.aspx)

更改请求以包含以下代码后，安全错误消失了。

```
NSString *soapAction = [NSString stringWithFormat:@"http://schemas.microsoft.com/sharepoint/soap/%@", method];

    [theRequest addValue:serverName forHTTPHeaderField:@"Host"];
    [theRequest addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Lenght"];
    [theRequest addValue:soapAction forHTTPHeaderField:@"SOAPAction"];
    [theRequest setHTTPMethod:@"POST"]; 
```

我希望这个答案会对某人有所帮助。

# c# - 如何在wpf中使密码框不可编辑

> ID：15972008
> 
> 赞同：3
> 
> 时间：2013-04-12T12:56:40.540
> 
> 标签：c#, .net, wpf

我需要在 wpf 中将密码框设为不可编辑。我用
**IsEnabled = false**

但这影响了我的风格，因此产生了一些模糊效果……还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-14T22:57:04.373

我知道这已经两年了，但我有同样的需求并以这种方式解决了它：这两个属性的组合，都设置为 false，将防止在控件中输入/编辑，而不会影响您想要的样式：Focusable , IsHitTestVisible

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T13:09:35.653

您可以处理该[`PreviewTextInput`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewtextinput.aspx)事件，防止用户输入文本。像这样：

xml:

```
<PasswordBox PreviewTextInput="HandleInput"/> 
```

代码隐藏：

```
private void HandleInput(object sender, TextCompositionEventArgs e) {
  e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:14:32.623

一种解决方案是制作自定义功能来模仿`IsReadOnly`.

> 有几件事需要照顾 - 例如`clipboard pasting` 也。

您将`similar behavior`通过定义一些附加属性（例如`IsPasswordReadOnly`或相同）来获得 - 这将解决所有需要的问题。

这是一个很好的开始示例——我认为它是否也适用于密码框——但我还没有尝试过，你必须自己测试一下。

[带有可见光标的 WPF 的只读文本框 (.NET 3.5)](https://stackoverflow.com/questions/7580285/readonly-textbox-for-wpf-with-visible-cursor-net-3-5/7595634#7595634)

您必须替换对`TextBox`with的引用`PasswordBox`，将其重命名为 IsReadOnly - 我认为其余部分可能相同。

而你使用它就像...

```
<PasswordBox my:AttachReadOnly.IsReadOnly="True" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T10:12:14.843

很简单。。

在 XML 中为 PreviewTextInput 设置事件处理程序，如下所示：

```
 PreviewTextInput="PasswordBoxOnPreviewTextInput" 
```

在该方法中：

```
 private void PasswordBoxOnPreviewTextInput(object sender, TextCompositionEventArgs e)
    {
        if (m_DisablePasswordBox)
            e.Handled = true;
    } 
```

它现在会阻止您输入任何内容:)

# android - 为什么 OnclickListener 不能与 AlertDialog 中的 ViewList 一起使用？

> ID：15972009
> 
> 赞同：0
> 
> 时间：2013-04-12T12:56:41.647
> 
> 标签：android, listview, android-alertdialog, onclicklistener, filepicker

我想用基于 ListView 的 AlertDialog 创建一个文件选择器。
我的问题是我的 onClickListener 似乎什么也没做。因此，当我单击列表中的一行时，什么也没有发生。
这是我的 FilePicker 类：

```
public class FilePicker extends AlertDialog.Builder {

    public FilePicker(final Context context) {
        super(context);
        LayoutInflater li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final ListView v = (ListView) li.inflate(R.layout.file_list, null, false);
        File[] dirList = (new File (Environment.getExternalStorageDirectory().getAbsolutePath() + "/myDir")).listFiles();

        ArrayList<HashMap<String, String>> mylistData =
                new ArrayList<HashMap<String, String>>();
        String[] columnTags = new String[] {"col1", "col2"};

        for (File file: dirList){
            HashMap<String,String> map = new HashMap<String, String>();
            map.put(columnTags[0], file.getName());
            map.put(columnTags[1], DateFormat.format("yyyy-MM-dd",new Date(file.lastModified())).toString());
            mylistData.add(map);
        }

        int[] columnIds = new int[] {R.id.filelistitemview,R.id.datelistitemview};
        SimpleAdapter adapter = new SimpleAdapter(context, mylistData,R.layout.file_list_item,columnTags , columnIds);
        this.setAdapter(adapter, null);
        this.setTitle("Choose midi settings file");
        v.setOnItemClickListener(new OnItemClickListener() {
              public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
                String selectedFromList =(String) (v.getItemAtPosition(myItemInt));
                Toast.makeText(context, selectedFromList, Toast.LENGTH_SHORT).show();
              }                 
        });
        this.setView(v);
    }

} 
```

这是我的两个 xml 文件：
file_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/listview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    /> 
```

和 file_list_item.xml ：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal">
<TextView 
    android:id="@+id/filelistitemview"
    android:layout_width="120dip"
    android:layout_height="wrap_content"
    android:gravity="left"
    android:textColor="#000"
    android:textSize="23dp" 
    android:layout_weight="1"/>

<TextView 
    android:id="@+id/datelistitemview"
    android:layout_width="60dip"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:textColor="#000"
    android:textSize="18dp" 
    android:layout_weight="1"/>

 </LinearLayout> 
```

在我的活动中，我只需要像这样调用我的 FilePicker：

```
 FilePicker fp = new FilePicker(this);
fp.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:02:20.763

instead of setting adapter to dialog object

```
this.setAdapter(adapter, null); 
```

you probably need set it to your list view

```
v.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:37:55.180

换 `final ListView v = (ListView) li.inflate(R.layout.file_list, null, false);`行

```
`View vi = inflater.inflate(R.layout.file_list, null`); 
```

因为在这里你在列表视图中膨胀布局，现在

```
 final ListView v = (ListView)vi.findViewById(your listviewid); 
```

# web-services - GoToWebinar 组织者密钥

> ID：15972011
> 
> 赞同：6
> 
> 时间：2013-04-12T12:56:48.787
> 
> 标签：web-services, citrix

如何获取 GoToWebinar REST API 中使用的组织者密钥？网络上似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:31:49.820

来自 citrix 开发人员博客的[这个url 说明了该过程。](https://developer.citrixonline.com/forum/trying-get-oauth)

# c# - 如何在mvc中导出文本文件？

> ID：15972013
> 
> 赞同：2
> 
> 时间：2013-04-12T12:56:54.847
> 
> 标签：c#, asp.net-mvc-3, file, stream

我使用流编写器在我的代码中生成文本文件，该流编写器使用 mvc 格式用于 Web 应用程序。但是我的文本文件没有下载我的页面？我的示例代码如下：

// 文件具有流 writerformat 中的所有值

```
return File(file, "text/plain", "Export.txt"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:00:27.163

尝试在您返回之前添加此内容：

```
var cd = new System.Net.Mime.ContentDisposition
{
    FileName = "Export.txt", 
    Inline = false, 
};
Response.AppendHeader("Content-Disposition", cd.ToString());

return File(file, "text/plain"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:01:54.687

您可以调用一个方法，该方法将为您提供如下文件流：

```
public FileStreamResult DownloadFile()
{
    //
    // This part is where you build your file
    //
    // file should be a Stream
    return new FileStreamResult(file, "text/plain")
        {
            FileDownloadName = "optional_name_that_you_can_give_your_file"
        };
} 
```

# java - Html 内容在 mozilla 中显示为纯文本，而 chrome 和 ie 很好地显示它

> ID：15972015
> 
> 赞同：1
> 
> 时间：2013-04-12T12:57:06.540
> 
> 标签：java, sockets

下面是我的代码。在这段代码中，我使用 Java 套接字将一些 HTML 文本发送到特定端口（在本例中为 8900）。要访问通过 Java 套接字发送的 HTML 内容，我使用`http://localhost:8900/`本地浏览器上的 URL。问题在于，虽然 Chrome 和 Internet Explorer 可以很好地呈现 HTML 文本，但 Mozilla 只是将整个 HTML 内容显示为简单的文本。有什么解决办法吗？

```
import java.net.*;
import java.io.*;

class Proxy
{
     public static void main(String args[])
     {
          try
          {
                ServerSocket svr = new ServerSocket(8900);
                System.out.println("waiting for request");
                Socket s = svr.accept();
                System.out.println("got a request");
                InputStream in = s.getInputStream();
                OutputStream out = s.getOutputStream();

                FileOutputStream fout = new FileOutputStream("d:\\q.txt");
                int x;
                byte data[]= new byte[1024];

                x = in.read(data);
                fout.write(data,0,x);

                fout.flush();
                fout.close();

                String response  = "<html><head><title>HTML content via java socket</title></head><body><h2>Hi! Every Body.</h2></body></html>";
                out.write(response.getBytes());
                out.flush();

                s.close();
                svr.close();
                System.out.println("closing all");
          }
          catch(Exception ex)
          {
                System.out.println("Err : " + ex);
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:13:32.440

您的服务器未正确实现 HTTP 协议。您直接发送 HTTP 响应的正文，而不是发送回正确的 HTTP 响应，从状态行开始，然后是 HTTP 标头（应在其中指定 HTML 内容类型），然后是空行，最后是响应体。

见[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message)

# python - 使用 OpenCV 跟踪运动（Python 中的 cv2）

> ID：15972017
> 
> 赞同：0
> 
> 时间：2013-04-12T12:57:11.880
> 
> 标签：python, opencv

是否有使用[cv2](https://stackoverflow.com/questions/10417108/what-is-different-between-all-these-opencv-python-interfaces/10425504#10425504)进行运动跟踪的示例？

cv2 的文档几乎不存在（当然存在，但是......）。特别是 Stack Overflow 问题中代码的 cv2 版本*[如何在 Python 中使用 OpenCV 跟踪运动？](https://stackoverflow.com/questions/3374828)*.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:26:39.487

试试`samples/python2`OpenCV 下载目录中的 lk_demo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:55:13.497

查看此示例链接，因为它可能会有所帮助。

[http://www.calebmadrigal.com/facial-detection-opencv-python/#comment-19420](http://www.calebmadrigal.com/facial-detection-opencv-python/#comment-19420)

# apache - mod_rewrite 移动重定向循环

> ID：15972022
> 
> 赞同：0
> 
> 时间：2013-04-12T12:57:22.903
> 
> 标签：apache, .htaccess, mod-rewrite

无法弄清楚为什么我的重定向卡在一个循环中。我在 /mobile 目录中有一些动态移动内容，我只想将移动用户引导到该目录的根目录。我一直因“重定向过多”错误而停止

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} !^www.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

#-------------------------------------------------------------------------------#

RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT}  "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} !macintosh [NC]

RewriteCond %{HTTP_HOST}          !^www.mysite.com/mobile

RewriteRule ^(.*)$ http://www.mysite.com/mobile [L,R=301]

#-------------------------------------------------------------------------------#

<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/css text/javascript application/x-javascript application/javascript text/x-component text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon application/json
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress

IndexIgnore */*
AddType text/html cgi pl
AddHandler cgi-script cgi pl
Options +FollowSymLinks
Options +ExecCGI 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:46:58.537

这条线是有问题的：

```
RewriteCond %{HTTP_HOST} !^www.mysite.com/mobile 
```

记住`%{HTTP_HOST}`只匹配主机名部分而不是 URI。

您应该`%{REQUEST_URI}`像这样使用匹配 URL：

```
RewriteCond %{REQUEST_URI} !^/mobile [NC] 
```

# twitter - 我的 Twitter api 突然不工作了

> ID：15972026
> 
> 赞同：0
> 
> 时间：2013-04-12T12:57:31.267
> 
> 标签：twitter, twitter-oauth

我有一个使用 twitter api 的网络应用程序。它工作正常。但突然停止工作。我开始在谷歌上搜索并了解到 Twitter 升级了他们的 api。所以我需要使用支持 v1.1 的库

有没有人使用 v1.1 库请帮助我

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:30:07.063

在 GitHub 上查看[这个项目。](https://github.com/zkniebel/jquery-twitter-feed)不要被标题弄糊涂了——自从 Twitter 的 API 更新到 1.1 后它已经更新了。

页面上的 jQuery 插件已被重新用作渲染引擎，即它有助于渲染您的提要。

然而，重要的部分是在“服务器端示例和设置”目录中。去那里，阅读并按照 SETUP_INSTRUCTIONS 文档中的说明进行操作。完成后，如果您使用的是 PHP，请使用“Plug_And_Play”目录中的文件作为起点。如果你使用 C#，你可以使用[这个库](https://github.com/zkniebel/TweetNet)。它仍在开发中，但会定期更新并尽可能地模仿 Twitter API 的规范。

PS我是这两个项目的作者，所以如果您需要任何帮助，请告诉我。祝你好运！:)

# android - AsyncTask 和自定义 CursorAdaper

> ID：15972035
> 
> 赞同：1
> 
> 时间：2013-04-12T12:57:47.050
> 
> 标签：android, android-asynctask, android-cursoradapter

我在使用自定义 cursorAdapter 和 AsyncTask 时遇到了一些麻烦。我想先在 asyctask 中设置 listView 和适配器，然后再从数据库中查询数据。但是适配器中的第一次游标是空的，它会抛出一个异常。在我的自定义光标适配器中如何处理这种情况？将 setAdapter 重新定位到 onPostExecute 也没有帮助。任何建议也会很棒。

主要活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ConversationsListCursorAdapter conversationsListCursorAdapter = new ConversationsListCursorAdapter(context, R.layout.conversations_list_item, null, 0);
    conversationsListView = (ListView) findViewById(android.R.id.list);
    conversationsListView.setAdapter(conversationsListCursorAdapter);

}

@Override
protected void onResume() {
    super.onResume();
    new GetConversationsTask().execute((Object[]) null);
}

@Override
protected void onStop() {
    Cursor cursor = conversationsListCursorAdapter.getCursor();
    if (cursor != null) { 
        cursor.close();
    }

    conversationsListCursorAdapter.changeCursor(null);
    super.onStop();
}

private class GetConversationsTask extends AsyncTask<Object, Object, Cursor> {
    @SuppressLint("NewApi")
    @Override
    protected Cursor doInBackground(Object... params) {
        Uri uri = ClouContentProvider.CONVERSATIONS_CONTENT_URI;
        Cursor cursor = null;

        if (android.os.Build.VERSION.SDK_INT < 11) {
            cursor = getContentResolver().query(uri, null, null, null, null);
        } else {
            CursorLoader cursorLoader = new CursorLoader(context, uri, null, null, null, null);
            cursor = cursorLoader.loadInBackground();
        }

        return cursor;
    }

    @Override
    protected void onPostExecute(Cursor cursor) {
        conversationsListCursorAdapter.changeCursor(cursor);
        cursor.close();
    }
} 
```

光标适配器：

```
public class ConversationsListCursorAdapter extends CursorAdapter {

    private final Cursor mCursor;
    private final Context mContext;
    private final int mLayout;
    private final int mSnippetIndex;
    private final int mDateIndex;
    private final int mMessageCount;
    private final int mRead;
    private final LayoutInflater mLayoutInflater;

    //private static final String TAG = ConversationsListCursorAdapter.class.getSimpleName();

    static class ViewHolder {
        TextView tvBody;
        TextView tvPerson;
        TextView tvCount;
        TextView tvDate;
        QuickContactBadge ivPhoto;
        View vRead;
    }

    public ConversationsListCursorAdapter(Context context, int layout, Cursor cursor, int flags) {
        super(context, cursor, flags);

        this.mContext = context;
        this.mLayout = layout;
        this.mCursor = cursor;
        this.mSnippetIndex = mCursor.getColumnIndex(ConversationsProviderMetaData.ConversationsTableMetaData.SNIPPET);
        this.mDateIndex = mCursor.getColumnIndex(ConversationsProviderMetaData.ConversationsTableMetaData.DATE);
        this.mMessageCount = mCursor.getColumnIndex(ConversationsProviderMetaData.ConversationsTableMetaData.MESSAGE_COUNT);
        this.mRead = mCursor.getColumnIndex(ConversationsProviderMetaData.ConversationsTableMetaData.READ);
        this.mLayoutInflater = LayoutInflater.from(mContext);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        View rowView = mLayoutInflater.inflate(mLayout, parent, false);

        ViewHolder holder = new ViewHolder();
        holder.tvBody = (TextView) rowView.findViewById(R.id.body);
        holder.tvPerson = (TextView) rowView.findViewById(R.id.addr);
        holder.tvCount = (TextView) rowView.findViewById(R.id.count);
        holder.tvDate = (TextView) rowView.findViewById(R.id.date); 
        holder.ivPhoto = (QuickContactBadge) rowView.findViewById(R.id.photo);
        holder.vRead  = (View) rowView.findViewById(R.id.read);

        rowView.setTag(holder);

        return rowView;
    }

    @Override
    public void bindView(View v, Context context, Cursor cursor) {

        ViewHolder holder = (ViewHolder) v.getTag();

        String cBody = cursor.getString(mSnippetIndex);
        Integer cCount = cursor.getInt(mMessageCount);
        Long cDate = cursor.getLong(mDateIndex);
        Integer cRead = cursor.getInt(mRead);

        holder.tvBody.setText(cBody);

        if (cCount < 0) {
            holder.tvCount.setText("");
        } else {
            holder.tvCount.setText("(" + cCount + ")");
        }

        if (cRead == 0) {
            holder.vRead.setVisibility(View.VISIBLE);
        } else {
            holder.vRead.setVisibility(View.INVISIBLE);
        }

        holder.tvDate.setText(ClouUtils.getDate(context, cDate));
        holder.tvPerson.setText(cursor.getString(mCursor.getColumnIndex(ConversationsProviderMetaData.ConversationsTableMetaData.CANONICAL)));
        holder.ivPhoto.setImageResource(R.drawable.ic_contact_picture);
        holder.ivPhoto.setVisibility(View.VISIBLE);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:07:00.777

```
@Override
protected void onPostExecute(Cursor cursor) {
    // First check if it's null
    if(cursor !=null){
        // use swap to get the old cursor and close it
        Cursor oldC = conversationsListCursorAdapter.swapCursor(cursor);
        if(oldC != null){
           oldC.close();
        }
       // DO NOT CLOSE THE NEW CURSOR
       // this one you must close whenever the list goes onPause(); but not before
    }
} 
```

# ios - 密钥路径 在实体中找不到

> ID：15972040
> 
> 赞同：13
> 
> 时间：2013-04-12T12:57:56.823
> 
> 标签：ios, objective-c, core-data, nssortdescriptor

我想在表格视图的部分标题中显示格式化的日期..

我使用了以下代码。但它引发了异常`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'keypath dateSectionIdentifier not found in entity <NSSQLEntity Expense id=1>'`。

猜测添加排序描述符时会出现异常。

```
NSMutableArray *sortDescriptors = [[NSMutableArray alloc] initWithCapacity:20];
NSSortDescriptor *mainSortDescriptor = [[NSSortDescriptor alloc] initWithKey:dateSectionIdentifier ascending:NO];
[sortDescriptors addObject:mainSortDescriptor];
[fetchRequest setSortDescriptors:sortDescriptors]; 
```

//费用.h

```
NSString *dateSectionIdentifier; 
```

//费用.m

```
@dynamic dateSectionIdentifier

-(NSString *)dateSectionIdentifier{
[self willAccessValueForKey:@"dateSectionIdentifier"];
NSString *tempDate = [self primitiveDateSectionIdentifier];
[self didAccessValueForKey:@"dateSectionIdentifier"];
if(!tempDate){
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"d MMMM yyyy"];
    tempDate = [dateFormatter stringFromDate:[self date]];
    [self setPrimitiveDateSectionIdentifier:tempDate];
    [dateFormatter release];
}
return tempDate;

} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-12T13:30:11.467

您问题的标题表明“dateSectionIdentifier”是一个*临时*属性。

如果 SQLite 用作存储类型，则不能在 Core Data 获取请求的排序描述符（或谓词）中使用瞬态属性。这是一个记录的限制，只能使用持久属性。

有关更多信息，请参阅“核心数据编程指南”中的[持久存储类型和行为](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/PersistentStoreFeatures.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T11:35:57.240

我认为您会在子类中添加“dateSectionIdentifier”，但不会在 .xcdatamodelId 文件中更新。交叉检查以查看您是否在 .xcdatamodelId 文件中添加了“dateSectionIdentifier”。

# dojo - dojo 1.7 QueryReadStore 参数

> ID：15972042
> 
> 赞同：0
> 
> 时间：2013-04-12T12:58:05.340
> 
> 标签：dojo, treegrid, dojox.grid

我是 Dojo 的新手，我使用 QueryReadStore 作为存储来加载我的 TreeGrid，工作正常。但是 QueryReadStore 在 url 中附加了一些参数，例如 parentId、count、sort 等参数，我查看了这个链接[http://dojotoolkit.org/reference-guide/1.7/dojox/data/QueryReadStore.html](http://dojotoolkit.org/reference-guide/1.7/dojox/data/QueryReadStore.html)，但没有能够理解。

像这样传递参数 servlet/DataHandler?start=0&count=25

如何操作参数，比如我想设置 parentId 参数的值，以便我只获得特定的行详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:33:28.643

从理论上讲，您必须通过扩展“dojox.data.QueryReadStore”来创建一个新类，在您发布的链接中有一个示例可以完全按照您的意愿进行操作。看看你现在是否得到它（改变了一点）：

```
 dojo.require("dojox.data.QueryReadStore");

    dojo.declare("custom.MyReadStore", dojox.data.QueryReadStore, {
      fetch:function(request){
        //append here your custom parameters:
         var qs = {p1:"This is parameter 1",
                   q:request.query.name
                  }
        request.serverQuery = qs;
        // Call superclasses' fetch
        return this.inherited("fetch", arguments);
      }
    }); 
```

因此，当创建 QueryReadStore 时，您实际上使用您定义的类创建了一个对象。像这样的东西：

```
 var queryReadStore = new custom.MyReadStore({args...}) 
```

探索传递给函数的请求参数，看看你还能做什么。

# objective-c - Mac OS X 的命令行应用程序

> ID：15972043
> 
> 赞同：2
> 
> 时间：2013-04-12T12:58:06.313
> 
> 标签：objective-c, delegates, terminal

我有一个现有的“命令行工具”项目。该工具将永远运行，直到用户关闭终端。应用程序终止时不会调用任何方法。如何在此项目中设置类似于委托方法的 applicationWillTerminate。需要在用户单击终端窗口上的关闭时接收通知。

当用户通过按 CTRL+C 退出命令时，还有什么方法可以获取通知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:07:13.387

您应该能够捕获来自 Unix 的信号。

```
signal(SIGABRT, SignalHandler);
signal(SIGILL, SignalHandler);
signal(SIGSEGV, SignalHandler);
signal(SIGFPE, SignalHandler);
signal(SIGBUS, SignalHandler);
signal(SIGPIPE, SignalHandler); 
```

然后定义一个信号处理程序：`void SignalHandler(int signum) { ... }`

这是一个[例子](https://discussions.apple.com/thread/2743258?start=0&tstart=0)。

您也可以阅读[信号处理](http://www.gnu.org/software/libc/manual/html_node/Basic-Signal-Handling.html)，它应该会有所帮助。即使它适用于 iOS，[这也可能很有用。](http://www.cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html)

# python - 与基本的python代码混淆

> ID：15972045
> 
> 赞同：-3
> 
> 时间：2013-04-12T12:58:15.543
> 
> 标签：python, while-loop

我不明白这段代码。我在想，虽然 iterLeft 不等于 0，但它会将 ans 添加到 x。答案是 0 x 是 3，等于 3。Iterleft - 1 = 2

`print str(x)`应该打印 2 因为 x 是 2，然后再打印 2，然后是 3

我的解释有什么问题

```
x = 3
ans = 0
itersLeft = x
while (itersLeft != 0):
     ans = ans + x
     itersLeft = itersLeft - 1
print str(x) + '*' + str(x) + ' = ' + str(ans) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:00:52.737

> 我的解释有什么问题

`x`设置为`3`然后永远不会更改。我不明白你怎么能期望`print str(x)`print `2`。

> 它增加`ans`了`x`

不，相反：`ans = ans + x` 添加`x`到`ans`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:02:06.103

`x`总是`3`因为你没有在while循环下改变它。

你必须给`indentation after while loop`

# java - 如何在直播 Android 中播放视频之前显示进度条？

> ID：15972050
> 
> 赞同：16
> 
> 时间：2013-04-12T12:58:30.293
> 
> 标签：java, android, video-streaming, android-videoview, live-streaming

我正在开发一个应用程序，我需要将来自远程服务器的视频作为实时流播放。

这是我成功完成的。我管理了我的应用程序中的所有内容。

但是当视频加载时，我需要在 VideoView 上显示一个进度对话框。

我尝试使用 OnPreparedListener 作为“[如何在播放视频之前显示进度条](https://stackoverflow.com/questions/4921941/how-to-show-the-progress-bar-before-playing-the-video)”

```
@Override
public void onPrepared(MediaPlayer mp) {
    progressbar.setVisibility(View.GONE);
    mp.start();

} 
```

但进度条 5-7 秒后视频播放消失了。我在谷歌上搜索了很多，但没有找到任何解决方案。

任何人都可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-08-28T19:13:09.610

看看这个解决了我的问题希望对你也有帮助..

[http://www.quicktips.in/how-to-show-progressbar-while-loading-a-video-in-android-videoview/](http://www.quicktips.in/how-to-show-progressbar-while-loading-a-video-in-android-videoview/)

```
 progressbar.setVisibility(View.VISIBLE);

 videoView.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {

                mp.start();

                mp.setOnVideoSizeChangedListener(new OnVideoSizeChangedListener() {

                    @Override
                    public void onVideoSizeChanged(MediaPlayer mp, int arg1, int arg2) {
                        // TODO Auto-generated method stub
                        Log.e(TAG, "Changed");
                        progressbar.setVisibility(View.GONE);
                        mp.start();
                    }
                });

            }
        }); 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T16:10:43.463

令人难忘的是，Android 没有公开 OnStart Listener。在 Prepared 状态之后，MediaPlayer 在播放开始后进入 Started 状态。

但是只有在准备好的状态下，你才应该有足够的缓冲来玩。您可以使用 setOnBufferingUpdateListener（MediaPlayer.OnBufferingUpdateListener 侦听器）并打印缓冲区的百分比。这样您就可以看到，如果处于准备状态，您是否有足够的缓冲区。

# android - 使用 ParseFacebookUtils 通过 facebook 登录 android 应用程序

> ID：15972057
> 
> 赞同：0
> 
> 时间：2013-04-12T12:58:43.610
> 
> 标签：android, facebook, null, facebook-login

我正在开发一个使用 Parse 的应用程序，并且我想使用 Facebook 登录。

这是我的代码：

```
 Button facebook = (Button)findViewById(R.id.facebook);
    facebook.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            ParseFacebookUtils.logIn(signUpStep2.this, new LogInCallback() {
                  public void done(ParseUser user, ParseException err){
                      if (user == null) {Log.d("My app", "NULL");}
 }                    else if (user.isNew()){Log.d("My app", "New User");}
                      else{Log.d("My app", "User");} 
```

但是，我总是得到一个 Null 用户和一个 Null ParseException 错误。

我的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:07:39.427

尝试设置登录方法的权限。您还可以查看以下链接：[Android Facebook 登录返回 null 用户](https://parse.com/questions/android-facebook-login-returns-null-user-and-null-err)和[ParseFacebookUtils.LogIn 我一直得到一个 null ParseUser 对象](https://parse.com/questions/parsefacebookutilslogin-i-keep-getting-a-null-parseuser-object)

```
ParseFacebookUtils.logIn(Arrays.asList("email",Permissions.Friends.ABOUT_ME,Permissions.Friends.BIRTHDAY),
            this, new LogInCallback() {
        @Override
        public void done(ParseUser user, ParseException err) {
            if (user == null) {
                Log.d("My app", "NULL");
            } else if (user.isNew()) {
                Log.d("My app", "New User");                
            } else {
                Log.d("My app", "User");
            }
        } 
    }); 
```

# c++ - 未知函数中的断言失败

> ID：15972059
> 
> 赞同：3
> 
> 时间：2013-04-12T12:58:51.830
> 
> 标签：c++, visual-c++, opencv

我正在使用这个程序来读取和显示图像。我不知道为什么它会显示这个奇怪的错误：

> 未知函数中的断言失败`(scn==3 || scn ==4)`，文件......\src\modules\imgproc\src\color.cpp line 3326

我更改了一些图像，有时它运行没有错误，但即使它运行和所有内容，它也显示窗口而不是其中的图像。怎么了？

```
#include "stdafx.h"
#include "opencv2/calib3d/calib3d.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

using namespace cv;
using namespace std;

void main()
{

    Mat leftImg,frame=imread("C:\\Users\\user\\Downloads\\stereo_progress.png");
    leftImg=imread("C:\\Users\\user\\Downloads\\dm_sl.gif");//add of left camera

    cvtColor(leftImg,leftImg,CV_BGR2GRAY);
    imwrite("imreadtest.txt",leftImg);

    imshow("cskldnsl",leftImg);
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:28:32.053

1.  正如其他人所回答的，请确保 cvtColor 中的 parameter1 不是 1 通道图像。通过 type() 检查它。它应该是`CV_8UC3`等等。

2.  放在`waitKey`后面`imshow`。图像将显示。

3.  我不知道您为什么将 leftImg 保存在**imreadtest.txt**中。[虽然它没有犯错误。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:05:00.307

首先，通过测试确保图像已正确加载`leftImg.data != 0`。

然后，您可以通过将第二个参数传递给`cv::imread()`该值来强制通道数，`CV_LOAD_IMAGE_GRAYSCALE`或者`CV_LOAD_IMAGE_COLOR`以确保加载灰度（1 通道）或彩色（3 通道）图像，无论图像文件的类型是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:09:33.060

使用 时，您不能对输入矩阵和输出矩阵使用相同的矩阵`cvtColor()`。如果您以后不需要彩色图像，传递副本是一个简单的解决方案：

```
cvtColor(leftImg.clone(), leftImg, CV_BGR2GRAY); 
```

另一种解决方案是使用新的输出矩阵：

```
Mat leftImgGray;
cvtColor(leftImg, leftImgGray, CV_BGR2GRAY);
imshow("cskldnsl",leftImgGray); 
```

# javascript - 使用jquery拆分页面

> ID：15972063
> 
> 赞同：0
> 
> 时间：2013-04-12T12:59:01.190
> 
> 标签：javascript, html, ajax, jquery

我的任务是通过拆分屏幕来研究将内容动态插入网页。

我真的不知道从什么开始，因为我认为这是 jQuery 手风琴的一种形式，但是整个页面需要拆分并相应地移动内容。

```
*******************************
*                             *
* THIS IS                     *
* MY WEBPAGE                  *
*                             *
******************************* 
```

这将变成；

```
*******************************
*                             *
* THIS IS                     *
*                             *
* Inserted content here       *
*                             *
* MY WEBPAGE                  *
*                             *
******************************* 
```

break 下面的内容都会随之下移。如果我有很多内容要移动到拆分之下，我认为这是非常重的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T19:36:05.997

我意识到这是一个老问题，但您可以尝试[jQuery Simple Collapsible Panel Plugin](http://www.darreningram.net/jquery-collapsible-panel-plugin-2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:08:58.420

您必须在页面中插入一个带有 id 的 div，例如：

```
<div id="content">Hello World</div> 
```

当页面加载时，jQuery 可以隐藏内容

```
$('#content').hide(); 
```

如果未启用 javascript，这样做可以查看内容。然后你需要一个点击功能来显示内容：

```
$("#show").click(function(){
    $("content").show();
}); 
```

我不知道你想做什么，但你应该查阅 jQuery 文档：[http](http://api.jquery.com/hide/) ://api.jquery.com/hide/ 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:11:54.537

这听起来像您需要一个简单的可折叠面板。有很多可用的。我喜欢[达伦的](http://www.darreningram.net/pages/examples/jQuery/CollapsiblePanelPlugin.aspx)。

一个更基本的方法是有一个空的 div，您可以使用 jQuery 将[html 加载到其中。](http://api.jquery.com/html/#html-htmlString)加载 div 的 html 后，它下面的所有内容都会自动向下移动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:12:19.010

您可以尝试为您的网页使用一个 div，然后根据需要对其进行定位。

# asp.net - Asp.net 会话超时是否会自动延长？

> ID：15972066
> 
> 赞同：1
> 
> 时间：2013-04-12T12:59:07.687
> 
> 标签：asp.net, asp.net-session

我在我的 asp.net Web 应用程序中定义了会话：

```
<sessionState mode="InProc" customProvider="DefaultSessionProvider" timeout="5">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState> 
```

在应用程序中，我正在从/到会话中读取/保存数据。

```
Session["userId"] = "UID123443";
string userId = Session["userId"].ToString() 
```

我的问题是，如果我在会话中读取/写入数据，超时是否会自动重新初始化？

如果是，有什么方法可以防止这种情况发生吗？例如，我需要会话在 5 到 5 分钟后过期，即使我同时正在访问它的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:49:11.070

我相信每次您对服务器执行任何操作时都会重置超时会话。因此导致回发将重置计时器。

您可以添加一个名为“WhenToTimeout”的会话变量，将其设置为从现在起 5 分钟。只做一次。然后，当当前时间晚于该时间时-做您需要做的事情（将它们注销，...）

# jquery - 动态创建元素上的事件

> ID：15972068
> 
> 赞同：2
> 
> 时间：2013-04-12T12:59:13.923
> 
> 标签：jquery

请任何了解 ThreeDubMedia jquery.event.drop 的人。我正在使用选择演示中的代码。这是链接[ThreeDubMedia](http://threedubmedia.com/code/event/drop#demos)

我需要在动态元素上具有相同的拖动选择功能。对于点击事件，我只使用 jquery .on()。但我不知道如何使用此代码获得相同的效果。

```
$('.layout-grid [class*=span]')
  .drop("start",function(){
     $( this ).addClass("click");
  })
  .drop("end",function(){
     $( this ).removeClass("click");     
  }); 
```

如何在匹配选择器的动态元素上触发这些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:11:38.503

从你提供的链接——*这个插件还支持“实时”事件委托*

用这个 ：

```
.on("drop",".layout-grid [class*=span]",function(){ 
```

您也可以使用`dropstart`and`dropend`代替 drop

带有动态元素的[现场拖放演示](http://threedubmedia.com/code/event/drop/demo/live)

# coffeescript - 使用 WebGL 和 CoffeeScript 调用上下文

> ID：15972077
> 
> 赞同：0
> 
> 时间：2013-04-12T12:59:53.990
> 
> 标签：coffeescript, stack, closures, webgl

我认为我问的是不可能的，但我正在使用 Coffeescript 创建一个简单的 WebGL 库。我在看纹理和着色器，我有以下设置。在我的示例文件中，我有这个：

```
cgl = new CoffeeGL.App('webgl-canvas')

shader = new CoffeeGL.Shader.Basic(cgl).bind()

cgl.drawLoop = () ->

  @gl.clearColor(0.15, 0.15, 0.15, 1.0)
  @gl.clear(@gl.COLOR_BUFFER_BIT | @gl.DEPTH_BUFFER_BIT)

  @updateCamera(c)

  @draw(n0) if n0? 
```

看一下着色器。它通过了一个应用程序。这个 App 类基本上是一个处理上下文的对象。GL 上下文、画布和所有这些都很好地封装在一个类中。由于着色器在其整个生命周期中都需要上下文（与已发送到图形卡的纹理和几何图形相同），因此在创建它时会给出上下文。

这让我觉得不那么优雅。是否可以创建类似的东西

```
cgl = new CoffeeGL.App('webgl-canvas')

cgl.init = () ->

    shader = new CoffeeGL.Shader.Basic().bind()

cgl.drawLoop = () ->

  @gl.clearColor(0.15, 0.15, 0.15, 1.0)
  @gl.clear(@gl.COLOR_BUFFER_BIT | @gl.DEPTH_BUFFER_BIT)

  @updateCamera(c)

  @draw(n0) if n0? 
```

上下文实际上是从调用构造函数（或编译或绑定 - 本身不必是构造函数）的事实中收集到的

我想，因为 Coffeescript（特别是如果你使用 node.js 来组合你的脚本）将所有东西都包装在一个闭包中，这是不可能的。

# sql-server - SQL Server - 如何插入子字符串？

> ID：15972095
> 
> 赞同：0
> 
> 时间：2013-04-12T13:00:27.933
> 
> 标签：sql-server

我有一个字符串

```
`...<..../><... id='someID' .../><...../>....` 
```

（该字符串的总长度超过 15k 个字符，这是一个 XML 表单定义）

在那个字符串里面我有这个`someID`值。我想在包含该值的元素之后放置一个新字符串：

```
...<..../><... id='someID' .../><my_new_string><...../>.... 
```

我试图根据`someID`值拆分那个长字符串，但这种方法太慢了。我怎样才能以另一种方式实现这一目标？

或者也许可以选择子字符串`<... id='someID' .../>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:11:13.353

SQL 服务器可以使用 XML。您不需要使用子字符串。此页面上解决了一个类似的问题：[xml.modify](https://stackoverflow.com/questions/13234175/use-of-xml-modify-to-insert-parameters-into-specific-element-of-an-xml-column)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:08:46.833

您是否尝试过使用替换？例如：

```
REPLACE(yourString, yourPattern, yourPattern + newString); 
```

使用您的示例，它看起来像：

```
REPLACE('...<..../><... id='someID' .../><...../>....',
        '<... id=''someID'' .../>',
        '<... id=''someID'' .../><my_new_string>'); 
```

请注意，我转义了“someID”周围的 ' 字符。

此致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:36:28.290

目前尚不清楚您的字符串是什么数据类型：`xml`或`(n)varchar`？对于`xml`，可以使用各种[数据类型方法](http://msdn.microsoft.com/en-us/library/ms190798.aspx)；for[函数](http://msdn.microsoft.com/en-us/library/ms188043.aspx)`(n)varchar`将一个字符串插入到另一个字符串中。[`STUFF()`](http://msdn.microsoft.com/en-us/library/ms188043.aspx)

# php - ajax发布数据并插入数据库

> ID：15972096
> 
> 赞同：0
> 
> 时间：2013-04-12T13:00:32.903
> 
> 标签：php, ajax

我正在尝试使用 ajax 插入评论。除了 $_POST 一切正常。它似乎没有发布数据，因此表中的评论字段为空。其他工作正常，例如插入日期。我只有 ajax 有问题（php 没有问题）。

无论如何，这是我的代码：-

```
<head>
<script>
function su_post(id) {
    $("#load_post").show(),

    $("#post_submit").click(function() {
    var c_post = $("#c_post").val();
    var dataString = '&c_post=' + c_post;

    $.ajax({
    type: "POST",
    url: '/script/post.php',
    data: "id=post_script" + id,
    cache: false,
    success: function(){
    $("#load_post").fadeOut();
    }
  })});
};
</script>
</head>
<body>
<form id="form_post" method="post" action="javascript:su_post(1)">
<label for="c_post">Post your updates/status</label>
<input type="text" name="c_post" id="c_post" />
<br /><br /><input type="submit" id="post_submit" value="Post" />
</form>
</body> 
```

编辑：因为你可能不理解我；获取您在输入框中键入的值并将该值发布或发送到 post.php 时出现问题。当我输入`data: {id: post_script + id, c_post: c_post}`时，代码似乎根本没有加载 php 文件。（卡在发帖上-> [http://prntscr.com/10dmjt](http://prntscr.com/10dmjt)）

提前谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:11:32.407

您正在调用该函数`javascript:su_post(1)`，因此您的数据字段似乎`{id: "post_script1"}`只包含。您的“评论”在哪里传递给 AJAX？`var dataString`在为它分配值之后，您不会对它做任何事情......

也许你打算有这样的东西：

```
data: "id=post_script" + id + dataString, 
```

因为，我认为你做了`dataString`之后`&c_post=whatever the comment is`

```
var c_post = $("#c_post").val();
var dataString = '&c_post=' + c_post; 
```

我确实想知道您是否还需要一些额外的引用`dataString`......我不相信该`$(#c_post).val()`功能会处理它，所以我怀疑您需要一个`escape()`地方 - 还是`ajax`为您做？我想这就是@errieman's`{}`派上用场的地方......它将整个事物变成一个对象并为您处理逃逸的情况。这将使您需要的线路：

```
data: {id: post_script + id, c_post: c_post} 
```

我怀疑这是否完全正确，因为我不得不猜测您要做什么-但我确实希望其中一个能给您解决问题的灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:12:11.753

`$("#post_submit").click(function()`当我取出语句并将 var`c_post = $("#c_post").val();var dataString = '&c_post=' + c_post;`放在顶部时，它似乎起作用了。
现在我的代码看起来像这样：-

```
function su_post(id) {
    var c_post = $("#c_post").val();
    var dataString = '&c_post=' + c_post;
    $("#load_post").show(),

    $.ajax({
    type: "POST",
    url: '/script/post.php',
    data: {c_post:c_post},
    cache: false,
    success: function(){
    $("#load_post").fadeOut();
    }
  });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:09:33.390

函数中的 data 属性`ajax()`必须是 Object 类型。像这样：

```
data: { id: "post_script" + id } 
```

您还遇到了一些语法错误，您的函数应如下所示：

```
function su_post(id) {
    $("#load_post").show();

    $("#post_submit").click(function() {
        var c_post = $("#c_post").val();
        var dataString = '&c_post=' + c_post;

        $.post("ajax_login.php",{ user_name:$('#username').val(),password:$('#password').val(),rand:Math.random() });

        $.ajax({
            type: "POST",
            url: '/script/post.php',
            data: { id: "post_script" + id },
            cache: false,
            success: function(){
                $("#load_post").fadeOut();
            }
        });
    });
} 
```

# jquery - iPhone 上的 JQuery 图标看起来不正确

> ID：15972100
> 
> 赞同：0
> 
> 时间：2013-04-12T13:00:43.970
> 
> 标签：jquery, html, jquery-mobile

**这在桌面浏览器上工作正常，**但在所有 iPhone 浏览器上我都有这个错误（没有在安卓手机上测试）

通常，您可以在 iPhone 上完全看到圆圈内的白色向下箭头标志，正如您在图像中看到的那样，只有一小部分可见。

有什么想法可以解决这个问题吗？我使用 jQuery mobile 并从本地引用图像文件

```
css/images 
```

文件夹，我的头脚本是这样的

```
 <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/jquery.mobile-1.2.0.min.js"></script> 
```

和 html 是

```
 <select id="langoptions">
            <option class="langCH" value="0">Chinese</option>
            <option class="langEN" value="1">English</option>
        </select> 
```

![在此处输入图像描述](https://i.stack.imgur.com/MkIzi.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:44:24.307

原来我使用的是属于 jQuery 1.3.1 的图像文件，而我的 css 是 1.2.0

下载了 1.2.1 旧版 zip 文件，使用了正确的 sprite，并且已修复。这两个精灵实际上具有相同的图标，但其中一个的长度稍大，因此导致图像居中。

# twitter - Twitter：获取特定时间段的推文

> ID：15972101
> 
> 赞同：1
> 
> 时间：2013-04-12T13:00:52.040
> 
> 标签：twitter, twitter4j

我是 Twitter API 的新手。我正在用 Java 实现一个模块，它显示了#hashtag 的流行度。所以我必须定期收集推文。

有没有办法获取所有包含特定 #hashtag 的推文，这样我就可以计算每次推文的总数并获得受欢迎程度？下面的 URL 给了我推文，但不一致。不给我所有的推文。

`http://search.twitter.com/search.json?q=%23example`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:05:08.560

你为什么使用 url 使用 Api Twitter 4j

[http://twitter4j.org/en/](http://twitter4j.org/en/)

您可以使用它轻松执行此功能

使用 Twitter4J，您可以轻松地将 Java 应用程序与 Twitter 服务集成。

**但是 Twitter4J 是一个非官方的库。**

使用那个api的这个功能

搜索推文

```
 // The factory instance is re-useable and thread safe.
    Twitter twitter = TwitterFactory.getSingleton();
    Query query = new Query("source:twitter4j yusukey");
    QueryResult result = twitter.search(query);
    for (Status status : result.getStatuses()) {
        System.out.println("@" + status.getUser().getScreenName() + ":" + status.getText());
    } 
```

检查此网址以获取片段

[http://twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html)

# regex - 正则表达式：有没有办法将字符串传递给正则表达式而不需要 ecranisation？

> ID：15972106
> 
> 赞同：0
> 
> 时间：2013-04-12T13:01:04.573
> 
> 标签：regex, pcre

有没有办法将一些字符串传递给正则表达式，而不用担心特殊字符的 ecranisation。

例如，我不会找到以单词“\north+west\”开头的行，因为你可以看到“\n”和“h+”应该被删除。那么问题是否有一些特殊的组合可以按原样编写文本？

```
/^\s+(<some special combination> \north+west\)\s+/i 
```

或者也许你知道可以正确地整理我的文字的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:13:45.217

In PHP and Perl you can use `\Q...\E` delimiters to autoescape metacharacters inside regexp. Quoting [**the doc**](http://php.net/manual/en/regexp.reference.escape.php):

> `\Q` and `\E` can be used to ignore regexp metacharacters in the pattern. For example: `\w+\Q.$.\E$` will match one or more word characters, followed by literals `.$.` and anchored at the end of the string.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:46:43.543

除了[@raina77ow answer](https://stackoverflow.com/questions/15972106/regexp-is-there-way-to-pass-string-to-regexp-without-ecranisation#15974985)`\Q...\E`之外，当您通过 PHP 等需要模式分隔符的语言使用 pcre 时，如果您的字符串包含开始或结束分隔符，则无法使用该功能。例如，您不能编写如下模式：

```
/\Qabc/def\E/
~\Qabc~def\E~
[\Qabc[def\E]
[\Qabc]def\E]
(\Qabc)def\E)
(\Qabc(def\E) 
```

唯一的方法是使用该[`preg_quote`](http://php.net/manual/en/function.preg-quote.php)函数并将分隔符*（仅当这个分隔符还不是特殊的正则表达式字符时）*放在它的第二个参数中。

# android - 如何运行 CMUSphinxAndroid 示例进行语音识别

> ID：15972110
> 
> 赞同：1
> 
> 时间：2013-04-12T13:01:35.477
> 
> 标签：android, speech-recognition, cmusphinx, speech-synthesis

我想将音频文件转换为文本。所以，我发现链接 [Can CMU Sphinx be set up to identify ~200 words](https://stackoverflow.com/questions/9073856/android-speech-to-text-speech-recognition) to use CMUSphinx library to do this。这样做我遵循

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/) 并尝试运行 android 示例。但是我在那里找不到示例项目。如果是的话，是否有人用来编译此代码，而不是请告诉我如何在特定于窗口的操作系统中运行。是否需要安装 cygwig 和 swig 来编译构建。

编辑：我已经从[http://code.google.com/p/itce-team8-2012/source/browse/trunk/PocketSphinxAndroidDemo](http://code.google.com/p/itce-team8-2012/source/browse/trunk/PocketSphinxAndroidDemo)下载了代码。现在，当我编译和运行代码时，应用程序崩溃了。查找日志如下

```
04-15 17:58:12.584: D/dalvikvm(19618): Trying to load lib /data/data/edu.cmu.pocketsphinx.demo/lib/libpocketsphinx_jni.so 0x41b9e1c0
04-15 17:58:12.584: D/dalvikvm(19618): Added shared lib /data/data/edu.cmu.pocketsphinx.demo/lib/libpocketsphinx_jni.so 0x41b9e1c0
04-15 17:58:12.584: D/dalvikvm(19618): No JNI_OnLoad found in /data/data/edu.cmu.pocketsphinx.demo/lib/libpocketsphinx_jni.so 0x41b9e1c0, skipping init
04-15 17:58:12.649: D/edu.cmu.pocketsphinx.demo.RecognizerTask(19618): waiting
04-15 17:58:12.684: D/libEGL(19618): loaded /system/lib/egl/libEGL_mali.so
04-15 17:58:12.689: D/libEGL(19618): loaded /system/lib/egl/libGLESv1_CM_mali.so
04-15 17:58:12.689: D/libEGL(19618): loaded /system/lib/egl/libGLESv2_mali.so
04-15 17:58:12.694: D/(19618): Device driver API match
04-15 17:58:12.694: D/(19618): Device driver API version: 10
04-15 17:58:12.694: D/(19618): User space API version: 10 
04-15 17:58:12.694: D/(19618): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
04-15 17:58:12.729: D/OpenGLRenderer(19618): Enabling debug mode 0
04-15 17:58:12.729: E/SensorManager(19618): thread start
04-15 17:58:12.729: D/SensorManager(19618): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41bc3538
04-15 17:58:14.374: D/edu.cmu.pocketsphinx.demo.RecognizerTask(19618): signalling START
04-15 17:58:14.374: D/edu.cmu.pocketsphinx.demo.RecognizerTask(19618): signalled START
04-15 17:58:14.374: D/edu.cmu.pocketsphinx.demo.RecognizerTask(19618): gotSTART
04-15 17:58:14.374: D/edu.cmu.pocketsphinx.demo.RecognizerTask(19618): START
04-15 17:58:14.499: A/libc(19618): Fatal signal 11 (SIGSEGV) at 0x0000001c (code=1), thread 19639 (Thread-3329) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:32:32.783

我已经成功运行了演示。我的错误是我没有在配置文件中更改 sd 卡路径。

# asp.net-mvc-4 - ASP.NET MVC 4 中具有 StructureMap 自定义约定的单例

> ID：15972116
> 
> 赞同：0
> 
> 时间：2013-04-12T13:01:57.950
> 
> 标签：asp.net-mvc-4, singleton, structuremap

我在尝试使**单例**生命周期与StructureMap 中的**自定义约定**一起工作时遇到问题。

基本上我有一个自定义**注册表**类型类，其中包含一个我想成为**单例**的字典，以便在应用程序启动时创建一次。

我创建了一个**自定义约定**，它将查看类的**属性**并确定该类是否应该是**HttpContextScoped**或**Singleton**。

问题是，当我使用 Visual Studio 调试器运行应用程序时，**每次**加载网页时都会调用应该是单例的对象的**构造函数，而不是像我预期的那样发生一次。**看起来该对象表现为**HttpContextScoped**而不是**Singleton**。

 ******以下是一些细节：

****app_start**文件夹中的**StructuremapMvc**类**

 **```
public static class StructuremapMvc
    {
        public static void Start()
        {
            IContainer container = IoC.Initialize();
            DependencyResolver.SetResolver(new StructureMapDependencyResolver(container));
            GlobalConfiguration.Configuration.DependencyResolver = new StructureMapDependencyResolver(container);
        }
    } 
```

**国际奥委会**类

公共静态 IContainer Initialize()

```
ObjectFactory.Initialize(x =>
{
    x.Scan(scan =>
            {
                scan.TheCallingAssembly();
                scan.AssemblyContainingType<IConfigManager>();
                scan.WithDefaultConventions();
                scan.Convention<CustomConvention>();
            });

CustomConvention : IRegistrationConvention  

public void Process(Type type, Registry registry) public void Process(Type type, Registry registry)
        {
            var attributes = type.GetCustomAttributes(false);
            if (attributes.Length > 0)
            {
                if (attributes[0] is SingletonAttribute)
                {
                    registry.For(type).Singleton();
                }
                else if (attributes[0] is HttpContextScopedAttribute)
                {
                    registry.For(type).HttpContextScoped();
                }
            }
        }

[Singleton]
public class MyRegistry : IMyRegistry 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T22:32:24.093

这个问题似乎很老了，但无论如何我都会尝试回答它，因为可能还有其他人遇到了与结构图相同的问题。在某些情况下，单例实例是“每个实例”创建的，指的是它们被注入的实例。这意味着当它们被注入到其他地方时，您可以拥有不同的“单例”实例。我个人在 MVC 应用程序中使用 WEBAPI 看到了这种行为。

我可以使它作为“真正的”全局单例工作的唯一方法是使用具有特定类型参数的泛型接口来区分要使用的不同类型：

```
public interface ITest<T>
{
}

public class Test1 : ITest<int>
{
}

public class Test2 : ITest<string>
{
}

Scan(x =>
        {
            x.TheCallingAssembly();
            x.IncludeNamespace("MvcApplication1");
            x.ConnectImplementationsToTypesClosing(typeof(ITest<>))
                .OnAddedPluginTypes(a => a.LifecycleIs(InstanceScope.Singleton));
        }); 
```

我知道这不像上述方法那样优雅也不可用，但至少它按预期工作。其他可行的方法是一对一地进行标准映射，例如：

```
For<ISingleton>().Singleton().Use<Singleton>(); 
```********

# c# - 基于 WPF 浏览器的应用程序在不同的浏览器上产生问题

> ID：15972119
> 
> 赞同：0
> 
> 时间：2013-04-12T13:02:04.570
> 
> 标签：c#, wpf, silverlight

我想知道有没有办法在除 IE 和 firefox 之外的不同浏览器上运行基于 WPF 浏览器的应用程序。我发现 WPF 在 IE 和 firefox 上成功运行，但如果在其他浏览器上出现问题，则会产生很多问题。我想到一件事来创建 dll，但不知道该过程或通过 iframe 的一种方式。请需要帮助

# excel - Excel 主工作表

> ID：15972120
> 
> 赞同：0
> 
> 时间：2013-04-12T13:02:05.020
> 
> 标签：excel, excel-2013

我有一个用于错误跟踪的 Excel 表。每个客户端都有自己的 .xlsx，该客户端的每个应用程序在 .xlsx 中都有自己的工作表。因此，具有多个工作表的多个 Excel 文件都采用相同的格式。

所有工作表都具有相同的标题，并且某些列具有数据验证和条件格式。但是，有时，数据验证单元格中允许的布局/标题或值等必须更改，我必须浏览每张表并手动进行更改。

是否可以有一个主工作表，其他工作表将从该主工作表继承标题和标题样式，并且特定标题下的所有单元格都具有数据验证和条件格式？

（在建议之前，我曾经简单地将所有内容放在一张表中并使用过滤器来显示特定的客户端/应用程序，但是在与多人共享和版本控制表时这变得不切实际）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:09:31.333

您要查找的术语是模板。您创建模板并将其提供给您的“客户”以跟踪错误。如果您对模板进行更新并将其提供给客户，他们只需将数据复制/粘贴到新表单中即可。

在我看来，你这样做是错误的。Excel 是一个电子表格程序，虽然它可以用作各种“列表”，但它是错误跟踪的糟糕选择。如果您卡在 Office 应用程序上，请使用 Access 数据库或其他可以真正为您提供与“后端数据”分开的“前端显示”的东西。互联网上有许多免费的错误跟踪软件程序。设置其中一个，然后让您的客户在那里记录错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:58:06.940

使用模板然后让客户复制+粘贴旧数据是一种方法，但它并不是最安全的方法。

如果您确实想向用户分发新模板，最好添加一些导入功能。所以 VBA 处理复制旧数据。

如果您（个人）可以手动对模板进行更改，那么您也可以创建一个工作簿+宏来就地“修补”源（或源的副本）数据。

无论采用哪种方法，您都可能需要在源工作簿中添加一些内容以跟踪他们拥有的版本，并确保他们从正确的版本导入和导入，以防止将来出现不愉快。

你能举一个改变的例子吗？之前和之后等

# openlayers - OpenLayers：从 URL 中传递的信息中选择功能？

> ID：15972123
> 
> 赞同：0
> 
> 时间：2013-04-12T13:02:13.140
> 
> 标签：openlayers

我几乎不了解 js 或 OpenLayers 以及需要昨天完成的映射项目，因此我陷入了困境。我对其他语言的 OOP 和单元测试之类的东西非常满意。

我有一个“拼图”类型的地图，分为许多有界区域（属性）。单击一个时，边界将突出显示。

还有一个普通的 html 页面，其中包含有关每个属性的更多信息。

我需要创建一个指向地图页面的链接，并自动突出显示属性边界，而无需用户先单击它。我可以很容易地在 url 中传递一些信息，但我不知道下一步该做什么。我是否需要找到 OpenLayers.Control.SelectFeature 类型的对象，然后调用 select 方法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:11:59.580

我们有由“单元”多边形组成的“区域”。我们的用户可以从菜单中选择一个单位，该单位将在地图上突出显示。这听起来像你正在尝试做的事情。

我们这样做的方式是我们有一个图层来显示一个区域中的所有单位多边形。“all”层中的每个多边形都有不同的颜色，没有边框。如果用户选择了一个特定的单元，那么我们通过将 where 子句传递给服务器来检索第二层，以便只检索一个单元的多边形。“单元”层是相同的多边形填充颜色，但带有深色边框。“单元”层被 OpenLayers 覆盖在“全部”层之上。

对用户来说，看起来“单元”被突出显示——填充从 2 层开始变暗，并且该单元有边框，而其他单元没有边框。我们这样做的另一个原因是用户可以选择打开或关闭“所有”图层 - 它位于基础地图图层的顶部。

听起来你可以有一个“轮廓”层，它只有一个多边形的边界。这个“轮廓”层将覆盖在您的基础层之上，并且看起来您正在突出显示您的一个属性的边界。

我知道这并不能回答您关于如何执行您正在考虑的方法的问题，但它为您提供了一种在某些情况下效果很好的替代方法。

# sql - 如何多次使用 WITH 结果表？

> ID：15972125
> 
> 赞同：0
> 
> 时间：2013-04-12T13:02:18.073
> 
> 标签：sql, sql-server, tsql

```
DECLARE @count INT;
WITH CTE AS
(SELECT...)
SELECT @count = COUNT(ID) FROM CTE;
SELECT * FROM CTE 
```

我可以在第一个表达式后使用 CTE 表`SELECT @count = COUNT(ID) FROM CTE`吗？我收到错误`Invalid object name 'CTE'.` 我正在使用 SQL Server 2008。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:45:46.113

你不能，真的；CTE 仅存在于单个语句的范围内。但是，在这种情况下，您可以这样做：

```
DECLARE @count INT;

WITH CTE AS (SELECT...)
SELECT * FROM CTE;

SELECT @count = @@ROWCOUNT; 
```

如果您需要将计数作为结果集的一部分，那么您可以说：

```
WITH CTE AS (SELECT...)
SELECT *, COUNT(*) OVER() FROM CTE; 
```

如果您出于其他原因需要计数，请描述它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:45:51.213

您可以使用表变量并在任何地方使用它。

```
DECLARE @count INT;
DECLARE @CTE AS TABLE (<<columns>>)

INSERT INTO @CTE (<<columns>>)
SELECT ....

WITH CTE AS
(SELECT * FROM @CTE)
SELECT @count = COUNT(ID) FROM CTE;

SELECT * FROM @CTE 
```

# html - 我有一个链接设置为不显示，但它仍然显示

> ID：15972128
> 
> 赞同：0
> 
> 时间：2013-04-12T13:02:22.917
> 
> 标签：html, css

你可能会觉得难以置信，但我一直在试图弄清楚为什么这几个小时都行不通，如果有人能告诉我我做错了什么，我将不胜感激。

在我网站的一个页面上，我有一个导航链接列表，但我不希望“主页”链接出现在主页上，所以我为它分配了一个类并将这个类设置为不显示链接，但它不起作用.

这是我的链接

```
<li><a href='http://classifieds.your-adrenaline-fix.com/' class='homelink'>Classifieds Home</a></li> 
```

就在我拥有的 index.php 页面的结束头标签之前；

```
<style type="text/css">.homelink { display:none; }</style> 
```

然而，链接出现了。如果有人能告诉我如何使这项工作正常进行，我将不胜感激，并提前感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:04:57.517

尝试通过使用`!important`关键字来查看其是否存在特异性冲突

```
.homelink {
display: none !important;
} 
```

或者将其添加为内联样式：

`<li><a href='http://classifieds.your-adrenaline-fix.com/' style="display: none;">Classifieds Home</a></li>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:36:01.577

你应该使用

```
 display: none !important; 
```

我认为css中有另一个类或“a”标签

# multithreading - 为什么我的对象似乎从一行到下一行变为 NULL？- 会不会是硬件？

> ID：15972130
> 
> 赞同：0
> 
> 时间：2013-04-12T13:02:33.043
> 
> 标签：multithreading, thread-safety, nullreferenceexception, basic, blitzmax

首先要说的是：我使用一种相对未知的语言进行编程：Blitzmax，这是一种面向对象的基本方言。

我的问题如下：我编写了一个在自己的线程中运行的调试管理器。因此，从程序中的每个位置（这将是一场游戏），您都可以将调试或错误消息添加到经理的队列中。在它自己的线程中，它将从队列中获取消息并通过将它们写入文件来处理它们，并且（如果消息具有当前选择的 Debuglevel、Debugcategory 和 outputcategory，它们只是枚举）将其写入控制台。

现在我在三个系统上测试了这个程序：我的台式电脑，它有 Windows 8 作为操作系统，我自己的笔记本电脑有 Windows 7 和一个朋友的笔记本电脑也有 Windows 7。在我的电脑和我朋友的笔记本电脑上一切都很好。但是在我自己的笔记本电脑上，几乎每次都会在经理处理消息时出现“EXCEPTION_ACCESS_VIOLATION”错误。有时程序运行良好，但大多数时候它会因这个错误而崩溃。即使在调试模式下，也不会显示任何行或堆栈跟踪，这使得调试非常困难。

我将所有需要的类分解为最少的属性和功能，以便更容易找到问题。现在队列只是一个列表（在 Blitzmax 中内置），消息只有一个属性，它是一个字符串。此外，调试管理器仅将消息写入控制台，而不将其传递给将其写入文件等的进程方法。

所以实际需要的代码如下。

这是消息：

```
Type TThreadsafeMessage
     Field complete_String:String

     Method New_ThreadsafeMessage:TThreadsafeMessage(actual_Message:String, from_File:String, debugCategory:TDebugCategory_Enum,  ..
       debugLevel:TDebugLevel_Enum, outputCategory:TOutputCategory_Enum, from_Class:String = "", from_Method:String = "")

       'Just create the string from the parameters.
       Self.complete_String = actual_Message + " | " + from_File + "/" + from_Class + "/" + from_Method

        Return Self
     End Method

     Method ToString:String()
        'Just return the string attribute:
        Return Self.complete_String' out_String
     End Method

     Method toString_Formatted_For_File:String()
        Return Self.ToString()
     End Method

     Method toString_Formatted_For_Console:String()
        Return Self.ToString()
     End Method
End Type 
```

这是队列：

```
Type TThreadsafeQueue
     'Predefined list.
     Field list:TList

     Method New()
        Self.list = New TList
     End Method

     Method isEmpty:Byte()
        Return Self.list.IsEmpty()
     End Method

     Method enqueue(to_Enqueue:Object)
            'Add object to list
        Self.list.AddLast(to_Enqueue)
     End Method

     Method dequeue:Object()
        Return Self.list.RemoveFirst()
     End Method
End Type 
```

这是向调试管理器添加消息的方法：

```
Function enqueueMessage(message_To_Enqueue:TThreadsafeMessage)
    'Test message for null pointer.
    If(message_To_Enqueue = Null) Then
        Throw New TNullpointer_Exception.NewException("'message_To_Enqueue' is NULL.", "TDebugmanager.bmx",  ..
            "TDebugmanager", "enqueueMessage")
    EndIf

    'Lock mutex for threadsafety.
    LockMutex(TDebugmanager.getSingleton_Instance().queue_Mutex)

    'Enqeue message in the queue
    TDebugmanager.getSingleton_Instance().message_Queue.enqueue(message_To_Enqueue)

    'Tell the update thread there is a message
    SignalCondVar(TDebugmanager.getSingleton_Instance().sleep_ConditionVariable)

    'Free the mutex for update thread.
    UnlockMutex(TDebugmanager.getSingleton_Instance().queue_Mutex)
End Function 
```

现在这里是调试管理器的（当前较小的）更新功能：

```
Function _update:Object(thread_Object:Object)
    'Do this over and over till the queue is empty AND the debugmanager is shut down
    Repeat
        Local message_To_Process:TThreadsafeMessage = Null

        'Lock mutex for thread safety
        LockMutex(TDebugmanager.getSingleton_Instance().queue_Mutex)

        'Queue epmty...
        If(TDebugmanager.getSingleton_Instance().message_Queue.isEmpty()) Then
            '... Wait for a signal from the main thread
            WaitCondVar(TDebugmanager.getSingleton_Instance().sleep_ConditionVariable,  ..
                TDebugmanager.getSingleton_Instance().queue_Mutex)
        Else
            '...Get the next message from the queue.
            message_To_Process = TThreadsafeMessage(TDebugmanager.getSingleton_Instance().message_Queue.dequeue())
        EndIf

        'Unlock the mutex.
        UnlockMutex(TDebugmanager.getSingleton_Instance().queue_Mutex)

        'Check if the message is NULL.              
        If(message_To_Process = Null) Then
            Throw "Got null message from queue."
        EndIf

        'Actually the _processMessage method is used. But for debugging
        'it is commented out.   
    '   TDebugmanager.getSingleton_Instance()._processMessage(message_To_Process)

        'Write the message to the console.
        'HERE is the error.
        'See in the following description under the code section.
        DebugLog("Message processed: " + message_To_Process.complete_String)
    Until TDebugmanager.isFinished()
End Function 
```

所以在它在更新函数中说“这里是错误”的位置。问题如下：如果此行被注释掉或删除，程序在我的笔记本电脑上运行良好，没有错误发生。但是如果有这条线，那么大多数时候都会发生错误。例如，在以下情况下会抛出“EXCEPTION_ACCESS_VIOLATION”：堆栈溢出发生在某处。或者当您尝试访问 NULL 对象时。实际上所有试图从被禁止的内存中读取或写入的东西。真正奇怪的是：仅在前几行，我检查了我从队列中得到的消息是否为 NULL。如您所见，它应该会引发错误。但它永远不会。

有没有人见过这样的行为？我无法解释。正如我所说：在这种情况下调试真的很难。我可以把它分解成更小的类，最后是你在这里看到的代码。我也不能只用调试器一步一步地通过程序，因为这样就不会发生错误。有人可能会想到会导致这一刻错误的事情吗？

我知道，这是很多代码，但我不能让它更短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:22:45.553

您基本上是在同时写入流。如果`DebugLog`不是可重入的（例如，内部使用了一些静态缓冲区），您将获得随机访问冲突。在更快的机器上，这也许可以避免，因为消息队列会发生争用，因此每个线程都有时间自己完成一个完整的循环。

解决方案是锁定该函数的使用（您可能希望制作一个函数包装器，它独立于队列处理实现该锁定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:13:04.863

问题如下：当我尝试进一步调试程序时，有时调试器会启动并向我显示调试器认为错误发生的位置。它没有在那里发生，但我能够使用调试器的 step-In 功能。结果是：它跳进了一个用于网络方法的库。我不在项目的任何地方使用这个库。所以我进一步尝试了一点，实际的解决方案是：卸载 Blitzmax 并重新安装它。现在一切正常。似乎链接器以某种方式被破坏了。

# c# - 解析基本脚本语言的字符串命令

> ID：15972131
> 
> 赞同：1
> 
> 时间：2013-04-12T13:02:38.943
> 
> 标签：c#, string, parsing, scripting

我正在尝试解释字符串命令以运行关联的脚本。这是我到目前为止所拥有的：

```
 // A typical command that can come from a TextBox control
        string command = "Create";

        // Remove all white space
        command = System.Text.RegularExpressions.Regex.Replace(command, @"\s", "");

        // Make case insesitive by converting to lowercase
        command = command.ToLower();

        switch (command)
        {
            case "create": /* Run create script*/ break;
            case "delete": /* Run delete script*/ break;
            // etc.
        } 
```

在我引入与特定命令关联的参数之前，这很好用。

我认为这可以用圆括号表示，因此更复杂的命令如下所示：

```
string command = "Create(paramA, paramB, etc.)" 
```

假设我使用这种方法走在正确的道路上，那么检测和解释参数的好方法是什么？

该命令的规则是：

'(' ')' 打开和关闭参数集 ',' 分隔每个参数

换句话说，如何检测参数的开头和结尾并正确分隔每个参数？

另一个问题当然是将命令本身与参数分开。

我考虑过使用：

```
command.StartsWith("create"); // etc. 
```

但这在 switch case 条件结构中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:12:00.157

您必须创建一个解释器类，它将命令分成单独的部分，存储在一个`Command`类中。然后，您可以打开 Command.Name 例如。

一些伪代码来表明我的意思：

```
public static class Interpreter
{
    public static Command CreateCommand(string commandLine)
    {
        Command newCommand = new Command();
        newCommand.Name = commandLine.Split(' ')[0];
        newCommand.Parameters.Add(...)

        return newCommand
    } 
} 
```

您当然必须准确检查命令行的语法。命令类存储有关命令的信息，例如它的名称、参数列表、返回类型等。

一旦你有了一个`Command`对象，你可以在它的任何属性上执行 switch 语句（如果适用）。稍后，您可以编写方法来执行命令并将所有信息整齐地存储，而无需再次解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:15:48.320

在您的代码中只需更改

> 开关（命令）

和

> 开关 (command.Substring(0, command.IndexOf('(')))

对于参数，使用“，”分割

# elasticsearch - 根据搜索词过滤孩子

> ID：15972132
> 
> 赞同：2
> 
> 时间：2013-04-12T13:02:47.010
> 
> 标签：elasticsearch, nest

我一直试图弄清楚如何在 ElasticSearch 中对我的数据进行建模，以完成基于搜索的过滤嵌套对象。

这是我现有的数据模式：

```
[
   {
      "job":{
         "jobId":"d2f462c1-3015-460e-aa4f-3e5ed8969b4a",
         "jobName":"2651",
         "otherStuff":"my stuff",
         "order":[
            {
               "description":"D-Style, To Match",
               "orderID":"ad86b512-6da3-407d-931d-d20e8717650f",
               "poNumber":"2651-1"
            },
            {
               "description":"Switch-Style, To Match",
               "orderID":"3d86b512-6da3-407d-931d-d20e8717650f",
               "poNumber":"some data"
            }
         ]
      }
   }
] 
```

我想要完成的是：

1.  如果我进行搜索并且它匹配该“作业对象”（包括嵌套对象）中的任何值，则每次都返回顶级作业信息。
2.  同时，如果该数据仅匹配 1 个嵌套“订单”对象，则仅返回该订单。

因此，如果我搜索“一些数据”，我希望在结果集中看到它返回：

```
[
   {
      "job":{
         "jobId":"d2f462c1-3015-460e-aa4f-3e5ed8969b4a",
         "jobName":"2651",
         "otherStuff":"my stuff",
         "order":[
            {
               "description":"Switch-Style, To Match",
               "orderID":"3d86b512-6da3-407d-931d-d20e8717650f",
               "poNumber":"some data"
            }
         ]
      }
   }
] 
```

我研究了嵌套对象类型以及父/子关系。我无法弄清楚如何仅通过 1 个查询来完成此操作。谢谢您的帮助！

# javascript - phonegap Sqlite 插件实现-错误和警告：没有这样的表

> ID：15972141
> 
> 赞同：2
> 
> 时间：2013-04-12T13:03:27.170
> 
> 标签：javascript, android, database, sqlite, cordova

我实现了[之前问题](https://stackoverflow.com/questions/15968009/i-have-implemented-phonegap-sqlite-plugin-warnings)中提到的 Phonegap 插件。

我收到一个错误，因为查询中没有给出这样的表。而该名称中有一个表。

**代码**

```
 <script type="text/javascript" charset="utf=8" src="cordova-2.5.0.js"></script> 
    <script type="text/javascript" charset="utf-8" src="main.js"></script>
    <script type="text/javascript" charset="utf-8" src="SQLitePlugin.js"></script>
    <script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() 
    {
        var db =  window.sqlitePlugin.openDatabase("abc.db", "1.0", "test", 20000);

        db.transaction(function(tx) 
        {
            tx.executeSql("SELECT column_name FROM table_name;", [], function(tx) 
            {
                console.log("column_name length: " + column_name.length);

          });
        }, 
        function(e) 
        {
        console.log("ERROR: " + e.message);
        });

      }

  </script>

**Error and Warnings**

    04-12 18:11:58.271: D/dalvikvm(400): VFY: dead code 0x0047-0067 in Lcom/phonegap/plugin/sqlitePlugin/SQLitePlugin;.results2string (Landroid/database/Cursor;)Ljava/lang/String;
    04-12 18:11:58.281: V/info(400): Open sqlite db: /data/data/com.a.android.b/databases/abc.db.db
    04-12 18:11:58.351: D/CordovaLog(400): SQLitePluginTransaction - this.trans_id:1365770518342000
    04-12 18:11:58.351: I/Web Console(400): SQLitePluginTransaction - this.trans_id:1365770518342000 at file:///android_asset/www/SQLitePlugin.js:83
    04-12 18:11:58.351: D/CordovaLog(400): SQLitePluginTransaction.prototype.executeSql
    04-12 18:11:58.362: I/Web Console(400): SQLitePluginTransaction.prototype.executeSql at file:///android_asset/www/SQLitePlugin.js:164
    04-12 18:11:58.362: D/CordovaLog(400): success not null:SELECT column_name FROM table_name;
    04-12 18:11:58.362: I/Web Console(400): success not null:SELECT type FROM tpl_category; at file:///android_asset/www/SQLitePlugin.js:171
    04-12 18:11:58.362: D/CordovaLog(400): executeSql - add_to_transactionSELECT column_name FROM table_name;
    04-12 18:11:58.362: I/Web Console(400): executeSql - add_to_transactionSELECT column_name FROM table_name; at file:///android_asset/www/SQLitePlugin.js:199
    04-12 18:11:58.383: D/CordovaLog(400): SQLitePluginTransaction.prototype.complete
    04-12 18:11:58.383: I/Web Console(400): SQLitePluginTransaction.prototype.complete at file:///android_asset/www/SQLitePlugin.js:204
    04-12 18:11:58.391: I/Database(400): sqlite returned: error code = 1, msg = no such table: tpl_category
    04-12 18:11:58.391: W/System.err(400): android.database.sqlite.SQLiteException: no such table: table_name: , while compiling: SELECT column_name FROM table_name;
    04-12 18:11:58.391: W/System.err(400):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
    04-12 18:11:58.391: W/System.err(400):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
    04-12 18:11:58.391: W/System.err(400):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
    04-12 18:11:58.391: W/System.err(400):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
    04-12 18:11:58.401: W/System.err(400):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
    04-12 18:11:58.401: W/System.err(400):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
    04-12 18:11:58.401: W/System.err(400):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
    04-12 18:11:58.401: W/System.err(400):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1315)
    04-12 18:11:58.401: W/System.err(400):  at com.phonegap.plugin.sqlitePlugin.SQLitePlugin.executeSqlBatch(SQLitePlugin.java:263)
    04-12 18:11:58.401: W/System.err(400):  at com.phonegap.plugin.sqlitePlugin.SQLitePlugin.execute(SQLitePlugin.java:109)
    04-12 18:11:58.401: W/System.err(400):  at org.apache.cordova.api.CordovaPlugin.execute(CordovaPlugin.java:61)
    04-12 18:11:58.401: W/System.err(400):  at org.apache.cordova.api.PluginManager.exec(PluginManager.java:220)
    04-12 18:11:58.401: W/System.err(400):  at org.apache.cordova.ExposedJsApi.exec(ExposedJsApi.java:44)
    04-12 18:11:58.401: W/System.err(400):  at org.apache.cordova.CordovaChromeClient.onJsPrompt(CordovaChromeClient.java:221)
    04-12 18:11:58.401: W/System.err(400):  at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:566)
    04-12 18:11:58.401: W/System.err(400):  at android.os.Handler.dispatchMessage(Handler.java:99)
    04-12 18:11:58.401: W/System.err(400):  at android.os.Looper.loop(Looper.java:123)
    04-12 18:11:58.412: W/System.err(400):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    04-12 18:11:58.412: W/System.err(400):  at java.lang.reflect.Method.invokeNative(Native Method)
    04-12 18:11:58.412: W/System.err(400):  at java.lang.reflect.Method.invoke(Method.java:521)
    04-12 18:11:58.412: W/System.err(400):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    04-12 18:11:58.412: W/System.err(400):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    04-12 18:11:58.412: W/System.err(400):  at dalvik.system.NativeStart.main(Native Method)
    04-12 18:11:58.412: V/executeSqlBatch(400): SQLitePlugin.executeSql(): Error=no such table: table_name: , while compiling: SELECT column_name FROM table_name;
    04-12 18:11:58.412: V/executeSqlBatch(400): 1365770518342000
    04-12 18:11:58.432: D/CordovaLog(400): SQLitePluginTransaction.txErrorCallback---transId:1365770518342000
    04-12 18:11:58.432: I/Web Console(400): SQLitePluginTransaction.txErrorCallback---transId:1365770518342000 at file:///android_asset/www/SQLitePlugin.js:132
    04-12 18:11:58.444: D/CordovaLog(400): ERROR: undefined
    04-12 18:11:58.444: I/Web Console(400): ERROR: undefined at file:///android_asset/www/view all.html:27 
```

我错过了任何初始化或声明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:18:47.550

好吧，我找到了我这篇文章的答案。但这给我带来了一个新问题。

我做的假设...

我已将 .sqlite 放在 assets/www 文件夹中。所以我假设 eclipse 正在打开那个特定的 sqlite 文件夹。

**代码：**

```
var db =  window.sqlitePlugin.openDatabase("abc.db", "1.0", "test", 20000); 
```

形成的数据库是 abc.db.db。这是我的另一个错误。所以，当我发出命令通过命令访问表时

```
tx.executeSql("SELECT column_name FROM table_name;", [], function(tx) 
    {
        console.log("column_name length: " + column_name.length);

  });
}, 
function(e) 
{
console.log("ERROR: " + e.message);
}); 
```

**它向我显示了一个错误，因为没有这样的 table_name。**

**事实上，它创建了一个新的 .DB 文件（根据我的代码），其中没有这样的表。**

这完全是我的错误。

但是，这让我进一步思考如何让 eclipse 访问我的 .sqlite 文件，将它集成到我的 Phonegap 应用程序中？

**任何建议和解决方案请告诉我..**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:29:30.273

我认为 Cordova 2.6 中有一个错误，我今天刚从 2.5 升级，我所有的 sqlite 代码似乎都坏了，尽管我做了一些其他的改变。我不断收到同样的错误，但我 90% 确定它与科尔多瓦有关。

04-17 02:21:08.722：E/Web 控制台（1698）：“没有这样的表：api（代码 1）：，编译时：SELECT * FROM api WHERE md5 = ? LIMIT 1”在 file:///android_asset /www/js/app.js:9249

但是当我创建数据库和表时我没有得到任何错误，我可以使用文件资源管理器直接在 eclipse 中浏览数据库，并看到不仅数据库存在，而且表也在那里。

我会报告我找到的任何解决方案。

编辑：我回滚到cordova 2.5，现在一切似乎都对我有用。在追查问题之前，这可能会作为临时解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:41:24.183

检查这个并按照[它的工作！](https://github.com/k4ml/halal-android)

有 phonegap OF **2.1.0 版本** android OF **2.2** Jquery OF **1.8.2min**（如果你使用）我没有使用 Jquery。

我在 7 个月前更新的最新版本的 PHONEGAP **2.5.0**、ANDROID **4.1.2**和新的 SQLITE 插件上尝试了同样的方法......它没有工作......

**终于在将近 4-5 天后，我找到了解决方案！**

伊皮！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:03:06.167

请参考下面的链接，它对我有用。

[http://docs.phonegap.com/en/2.5.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.5.0/cordova_storage_storage.md.html#Storage)

# c# - 在下拉列表中插入一行以分隔两个间隔

> ID：15972146
> 
> 赞同：0
> 
> 时间：2013-04-12T13:03:38.257
> 
> 标签：c#, wpf, xaml, wpf-controls

我有一个充满 24 小时的下拉列表。在 12:00 之后，我想插入一条线来区分两个时间片。我能怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:24:13.513

如果您对值进行硬编码，那么这样的事情就可以解决问题：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <ComboBox HorizontalAlignment="Center" Margin="10">
        <!-- ... -->
        <ComboBoxItem Content="10:00"/>
        <ComboBoxItem Content="11:00"/>
        <ComboBoxItem>
            <ComboBoxItem.Content>
                <Border BorderBrush="Black" BorderThickness="0,0,0,1">
                    <TextBlock Text="12:00" Margin="0,0,0,1"/>
                </Border>
            </ComboBoxItem.Content>
        </ComboBoxItem>
        <ComboBoxItem Content="13:00"/>
        <!-- ... -->
    </ComboBox>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:39:04.557

我在网上找到了这个技巧......并且它有效！在我的 XAML 中，我介绍了这个代码片段：

```
<ComboBox.ItemContainerStyle>
  <Style TargetType="{x:Type ComboBoxItem}"
         BasedOn="{StaticResource {x:Type ComboBoxItem}}">
    <Style.Triggers>
      <DataTrigger Binding="{Binding}"
                   Value="">
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBoxItem}">
              <Separator HorizontalAlignment="Stretch"
                         IsEnabled="False" />
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </DataTrigger>
    </Style.Triggers>
  </Style>
</ComboBox.ItemContainerStyle> 
```

然后在我后面的代码中，我插入了一个全新的不可编辑的空白项目。结果是预选项目下的一行。我的目标达到了。

我希望这可以帮助某人（将来也是我:)）

# javascript - 通过javascript检查数据库中是否存在字段值

> ID：15972147
> 
> 赞同：0
> 
> 时间：2013-04-12T13:03:38.727
> 
> 标签：javascript, sql

检查字段值是否存在于数据库中`javascript`

可能吗？

也许是这样的..

```
search = mysql_query("SELECT * FROM table3 WHERE name = 'name' AND title = 'title'");
if(@mysql_num_rows(search) > 0){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:13:26.877

用 javascript 与任何类型的服务器通信是不可能的。IMPOSSIBLE 甚至不要尝试搜索某些内容。您需要其他语言，例如 php ( 推荐 )、java、asp... 查看连接 php 的教程：

[PHP mssql服务器连接教程](http://webcheatsheet.com/PHP/connect_mssql_database.php)

# facebook-graph-api - 如何使用 Facebook 图形 API 在 Facebook 上创建群组？

> ID：15972149
> 
> 赞同：2
> 
> 时间：2013-04-12T13:03:42.743
> 
> 标签：facebook-graph-api

我一直在尝试使用 Facebook Graph api 在 facebook 上创建群组。在参考了这个网站[http://developers.facebook.com/docs/concepts/app-game-groups/#impl](http://developers.facebook.com/docs/concepts/app-game-groups/#impl)他们提到了如何创建组之后，我编写了以下代码。但它不起作用。你能帮我看看如何在 facebook 上创建群组吗

**代码：-**

Ext.Ajax.request ({ url : ' [https://graph.facebook.com/342283535872845/groups/description?access_token=342283535872845|9Adi1Gb9qf2UpcZHu_NywK5bBxI](https://graph.facebook.com/342283535872845/groups/description?access_token=342283535872845|9Adi1Gb9qf2UpcZHu_NywK5bBxI) ', dataType: 'json', timeout: 60000, type:'POST', 成功：this.Success，失败：this.Failure，范围：this }); },

**回复 ：-**

{ “数据”： [

] }

响应应该有组 id，但我得到的是空数据。请帮助我了解如何创建群组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-27T14:47:17.733

您需要成为应用程序的管理员，并且您必须拥有应用程序访问令牌。

这是示例代码

$app_token = $app_id."|".$app_secret ; 这是获取应用访问令牌的方法 $response = $facebook->api( "/APPID/groups", "POST",array ( 'access_token' => $app_token,'name' => 'TEST NAME', ));

# web-analytics - 如何使用篡改数据验证omniture标签是否正确触发

> ID：15972150
> 
> 赞同：2
> 
> 时间：2013-04-12T13:03:43.180
> 
> 标签：web-analytics, adobe-analytics

很抱歉在这里问一个新手问题。我在网上搜索过，但其他人似乎都知道答案，所以我找不到任何明确的词。我需要在篡改数据中验证我的全能标签是否正确触发。我应该寻找来自 adobetag.com 的电话吗？或者我应该寻找什么其他 URL 调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T00:05:38.620

如果您的实施是 Omniture 的第 3 方 cookie，请求将被发送到`2o7.net`或`omtrdc.net`取决于您正在使用的 SiteCatalyst 版本（以及是否通过他们的 TagManager）。如果它是第一方实施，它将在您与 Omniture ClientCare 合作的域中进行设置。

您当然可以在任意数量的插件或其他程序中查找这些域（内置网络控制台、firebug、httpfox、charles 代理 - 基本上任何可以看到请求的东西）但仅供参考，有几个选项可以使它更容易查看 Omniture 请求。

如果您使用的是 FireFox 并拥有 firebug 插件，那么 firebug 有一个名为[omnibug](http://www.rosssimpson.com/dev/omnibug.html)的扩展。它为 firebug 添加了一个额外的选项卡，它将向您显示对 Omniture 的请求，甚至使其成为一种易于阅读的格式（它还报告其他格式，如 GA 和 WebTrends）。

或者，Omniture 提供了一个名为[DigitalPulse](http://blogs.adobe.com/digitalmarketing/analytics/meet-the-new-digitalpulse-debugger/)的调试工具。基本上，您创建一个书签，并为您放置 javascript 代码片段的位置/网址。然后在页面上单击书签，它会弹出一个窗口，显示有关提出的任何omniture 请求的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T08:23:29.310

**过滤到包含b/ss**的请求

 **它们是发送到 Omniture SiteCatalyst 的请求。

如果您需要更多信息，请参阅这些参考资料 -

[http://blogs.adobe.com/digitalmarketing/analytics/validate-your-mobile-app-measurement-implementation/](http://blogs.adobe.com/digitalmarketing/analytics/validate-your-mobile-app-measurement-implementation/)

[http://blogs.adobe.com/digitalmarketing/analytics/custom-link-tracking-capturing-user-actions/](http://blogs.adobe.com/digitalmarketing/analytics/custom-link-tracking-capturing-user-actions/)

[http://emptymind.org/validating-page-tags-with-httpfox/](http://emptymind.org/validating-page-tags-with-httpfox/)

[http://tech.groups.yahoo.com/group/webanalytics/message/24232](http://tech.groups.yahoo.com/group/webanalytics/message/24232)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T15:47:57.500

简而言之：“/b/ss”但是这个人写了一篇关于如何用 HTTPFox 做到这一点的非常深入的文章，它是一个很好的截图阅读：http: [//www.mikewebguy.com/2013/08/21/ httpfox-helps-you-verify-what-data-is-being-sent-to-your-analytics-provider/](http://www.mikewebguy.com/2013/08/21/httpfox-helps-you-verify-what-data-is-being-sent-to-your-analytics-provider/)**

# android - 使用进度条控制 MediaPlayer 音量

> ID：15972152
> 
> 赞同：1
> 
> 时间：2013-04-12T13:03:47.593
> 
> 标签：android, android-mediaplayer

我有 2 个媒体播放器播放不同的声音。我想用 ProgressBar 来控制 MediaPlayer 的声音。![在此处输入图像描述](https://i.stack.imgur.com/FB0UT.png)

我知道如何使用进度条控制系统声音，但它将两个媒体播放器的音量设置为相同，这就是我想要的：

*   如果进度条值为 50，则将 MediaPlayer1 和 MediaPlayer2 音量设置为 50
*   如果进度条值为 25，则将 MediaPlayer1 音量设置为 75，将 MediaPlayer2 音量设置为 25
*   如果进度条值为 0，则将 MediaPlayer1 音量设置为 100，将 MediaPlayer2 音量设置为 0
*   如果进度条值为 75，则将 MediaPlayer1 音量设置为 25，将 MediaPlayer2 音量设置为 75
*   如果进度条值为 100，则将 MediaPlayer1 音量设置为 0，将 MediaPlayer2 音量设置为 100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:22:26.940

音量控制类。

```
public class VolumeControl {
        private static VolumeControl sharedVolumeControl = null;

    /**
     * Obtain the singleton {@link VolumeControl} object.
     * 
     * @return the singleton {@link VolumeControl} object
     */
    public static synchronized VolumeControl sharedVolumeControl() {
        if (sharedVolumeControl == null) {
            sharedVolumeControl = new VolumeControl();
        }

        return sharedVolumeControl;
    }

    /**
     * The {@code VolumeChangeIndicator} enumerates the volume level change
     * indicators that can be used when programmatically changing the volume
     * level (using {@link VolumeControl#setVolume(float)}).
     * 
     * @author Ephraim A. Tekle
     * 
     */
    public static enum VolumeChangeIndicator {
        /**
         * Play a sound when changing the volume
         * 
         * @see #SHOW_DIALOG
         */
        PLAY_SOUND,
        /**
         * Show a (progress bar) dialog when changing the volume
         * 
         * @see #PLAY_SOUND
         */
        SHOW_DIALOG,
        /**
         * Play a sound and show a dialog when changing the volume
         * 
         * @see #PLAY_SOUND
         * @see #SHOW_DIALOG
         */
        PLAY_SOUND_AND_SHOW_DIALOG,
        /**
         * Do not show any volume level change indicator
         */
        NONE;

        int getFlag() {
            switch (this) {
            case PLAY_SOUND:
                return AudioManager.FLAG_PLAY_SOUND;
            case SHOW_DIALOG:
                return AudioManager.FLAG_SHOW_UI;
            case PLAY_SOUND_AND_SHOW_DIALOG:
                return PLAY_SOUND.getFlag() | SHOW_DIALOG.getFlag();
            default:
                return AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE;
            }
        }
    }

    private VolumeChangeIndicator volumeChangeIndicator = VolumeChangeIndicator.SHOW_DIALOG;
    private final static float GRANULARITY = 100;
    static final int VOLUME_MONITOR_RATE_MS = 1000;
    // static final int VOLUME_MONITOR_RATE_HIGH_MS = 100; // sampling rate when
    // volume change is detected

    private static float SYSTEM_MAX_VOLUME;

    private float playerVolume = 1;

    private AudioManager audioManager = null;
    private MediaPlayer mediaPlayer = null;
    private Activity activity = null;

    private boolean inLowVolumeMode = false;

    private final Handler handler = new Handler();
    private final List<VolumeChangeListener> volumeChangeListeners = new ArrayList<VolumeChangeListener>();
    private volatile float monitoredVolume;
    private volatile boolean stopVolumeMonitor;

    private VolumeControl() {
    }

    /**
     * Configures the {@link VolumeControl} object with the Audio Service system
     * service and {@link AudioManager}.
     * 
     * @param activity
     *            the Activity that will be used to retrieve the
     *            {@link AudioManager} and execute listener call backs on the
     *            main thread
     * @param mediaPlayer
     *            the {@link MediaPlayer} being used to play audio/video. While
     *            the {@code VolumeControl} will adjust system volumes, it's
     *            excepted that this class is being used within the context of a
     *            MediaPlayer.
     * @return returns {@code true} if configuration is successful. Returns
     *         {@code false} otherwise.
     */
    public boolean configure(Activity activity, MediaPlayer mediaPlayer) {

        if (activity == null || mediaPlayer == null) {
            return false;
        }

        this.audioManager = (AudioManager) activity
                .getSystemService(Activity.AUDIO_SERVICE);
        this.mediaPlayer = mediaPlayer;
        this.activity = activity;

        SYSTEM_MAX_VOLUME = audioManager
                .getStreamMaxVolume(AudioManager.STREAM_MUSIC);

        return true;
    }

    /**
     * Returns {@code true} if the {@code VolumeControl} is configured properly.
     * Otherwise, {@code false} is returned.
     * 
     * @return {@code true} if this {@code VolumeControl} is configured properly
     *         and can be used.
     */
    public boolean isConfigured() {
        return (this.audioManager != null && this.mediaPlayer != null && this.activity != null);
    }

    /**
     * Sets the volume using {@code AudioManager} and the {@code MediaPlayer}
     * (use {@link #setVolumeChangeIndicator(VolumeChangeIndicator)} to change
     * the volume change indicator).
     * 
     * @param volume
     *            the volume level between 0 (mute) and 1 (maximum volume).
     * @see #setVolumeChangeIndicator(VolumeChangeIndicator)
     */
    public void setVolume(float volume) {

        this.audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
                (int) (Math.ceil(SYSTEM_MAX_VOLUME * volume)),
                volumeChangeIndicator.getFlag());

        float systemVolume = this.getSystemVolume();

        if (Math.abs(systemVolume - volume) * GRANULARITY >= 1) {

            this.playerVolume = volume / systemVolume;

            this.mediaPlayer.setVolume(this.playerVolume, this.playerVolume);
        }
    }

    /**
     * Get the current volume level (using {@code AudioManager} and the
     * {@code MediaPlayer})
     * 
     * @return the volume level
     */
    public float getVolume() {
        return this.getSystemVolume() * this.playerVolume;
    }

    /**
     * Use this method to enter a low-volume mode. This is intended to be used
     * when volume {@link AudioManager#AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK} is
     * detected.
     */
    public synchronized void enterLowVolumeMode() {
        if (this.playerVolume > 0.1f) {
            this.mediaPlayer.setVolume(0.1f, 0.1f);
            this.inLowVolumeMode = true;
        }
    }

    /**
     * Use this method to exit a low-volume mode and set volume to pre
     * audio-focus loss. This is intended to be used when volume
     * {@link AudioManager#AUDIOFOCUS_GAIN} is detected.
     */
    public synchronized void exitLowVolumeMode() {
        if (this.inLowVolumeMode) {
            this.mediaPlayer.setVolume(this.playerVolume, this.playerVolume);
            this.inLowVolumeMode = false;
        }
    }

    private float getSystemVolume() {
        return this.audioManager.getStreamVolume(AudioManager.STREAM_MUSIC)
                / SYSTEM_MAX_VOLUME;
    }

    /**
     * Adds a volume change listener. The listener's {@code VolumeChanged}
     * method is called immediately on the UI thread.
     * 
     * @param l
     *            the {@link VolumeChangeListener} to be added
     */
    public synchronized void addVolumeChangeListener(
            final VolumeChangeListener l) {
        this.volumeChangeListeners.add(l);

        this.activity.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                l.volumeChanged(getVolume());
            }
        });
    }

    /**
     * Removes a volume change listener
     * 
     * @param l
     *            the volume change listener to remove
     */
    public synchronized void removeVolumeChangeListener(VolumeChangeListener l) {
        this.volumeChangeListeners.remove(l);
    }

    /**
     * Removes all volume change listeners. This method can be used as a cleanup
     * when the main Activity exits.
     */
    public void removeAllVolumeChangeListeners() {
        this.volumeChangeListeners.clear();
    }

    /**
     * Starts the volume monitor so that {@link VolumeChangeListener}s will get
     * notification if the volume is changed (for example, by the user using the
     * volume up/down buttons).
     */
    public void startVolumeMonitor() {
        stopVolumeMonitor = false;
        this.monitoredVolume = this.getVolume();
        this.primaryVolumeUpdater();
    }

    /**
     * Stops volume monitoring so that no volume change updates are sent to
     * listeners.
     */
    public void stopVolumeMonitor() {
        stopVolumeMonitor = true;
    }

    private void notifyVolumeListenersOnMainThread(final float volume) {
        this.activity.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                for (VolumeChangeListener l : VolumeControl.this.volumeChangeListeners) {
                    l.volumeChanged(volume);
                }
            }
        });
    }

    private void primaryVolumeUpdater() {
        if (this.stopVolumeMonitor) {
            return;
        }

        float volumeNow = this.getVolume();
        int samplingRate = VOLUME_MONITOR_RATE_MS;

        if (Math.abs(volumeNow - this.monitoredVolume) * GRANULARITY >= 1) {
            this.notifyVolumeListenersOnMainThread(volumeNow);
            // samplingRate = VOLUME_MONITOR_RATE_HIGH_MS;
            // sampling rate made no difference since we are bound by the UI
            // Thread
        }

        this.monitoredVolume = volumeNow;

        handler.postDelayed(new Runnable() {
            public void run() {
                primaryVolumeUpdater();
            }
        }, samplingRate);
    }

    /**
     * Set the volume change indicator used when volume is changed using
     * {@link #setVolume(float)}.
     * 
     * @param indicator
     *            the desired volume change indicator
     * @see #getVolumeChangeIndicator()
     */
    public void setVolumeChangeIndicator(VolumeChangeIndicator indicator) {
        this.volumeChangeIndicator = indicator;
    }

    /**
     * Returns the volume change indicator used when volume is changed using
     * {@link #setVolume(float)}.
     * 
     * @return the volume change indicator
     * @see #setVolumeChangeIndicator(VolumeChangeIndicator)
     */
    public VolumeChangeIndicator getVolumeChangeIndicator() {
        return this.volumeChangeIndicator;
    }

    /**
     * Interface for receiving notification when the system volume has changed
     * (eg when user changes volume using the device volume buttons). Update
     * calls are done on the UI (i.e. main) thread and therefore are safe to
     * update UI elements within the interface method implementation.
     * 
     * @author Ephraim A. Tekle
     * 
     */
    public static interface VolumeChangeListener {
        public void volumeChanged(float volume);
    }
} 
```

在您的活动中实施 VolumeChangeListener。随着你的进步而改变价值

```
VolumeControl.sharedVolumeControl().setVolume(value of progress change);
VolumeControl.sharedVolumeControl().addVolumeChangeListener(this);
        VolumeControl.sharedVolumeControl().startVolumeMonitor(); // this needed 
```

# rally - 释放组合框

> ID：15972153
> 
> 赞同：1
> 
> 时间：2013-04-12T13:03:48.953
> 
> 标签：rally

从 ReleaseComboBox 获取选定值时出现问题。

我试图让这个值用作过滤器，所以我的 _onChange 事件看起来像这样：

```
 _onReleaseComboboxChanged: function () {
                var config = {
                    storeConfig: {
                            filters: [
                            {
                                property: 'ScheduleState', 
                                value: 'Defined'
                            },
                            {
                                property: 'Release.Name',
                                value: this.iterationCombobox.rawValue 

                            }
                        ]
                    }
                };

                this.cardBoard.refresh(config);
            }, 
```

所以这在大多数情况下都很有效，除了组合框会截断较长的版本名称，所以如果你的版本被命名为 Release 2 - Cool new feature to production，rawValue = 类似于“Release 2 - Cool new feature to ... ”。显然，这使我的查询返回 0 条记录...

我在调试中查看了所有对象，检查了文档，我只是没有看到它。

当然我在这里遗漏了一些东西，我检查了组合框以查看是否有截断属性，但也没有看到。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:06:14.410

您应该始终能够使用 getRecord() 方法获取当前选定的记录。

```
var selectedIteration = this.iterationCombobox.getRecord();
var iterationName = selectedIteration.get('Name'); 
```

# itext - 使用 iTextSharp 在 pdf 文件中查找超链接

> ID：15972154
> 
> 赞同：0
> 
> 时间：2013-04-12T13:03:51.460
> 
> 标签：itext

从这一行中的 PDF 文件获取超链接时出现错误

```
PdfDictionary AnnotationAction = (PdfDictionary)AnnotationDictionary.Get(PdfName.A); 
```

得到下面提到的例外，有人请帮忙。

> 无法将类型为“iTextSharp.text.pdf.PRIndirectReference”的对象转换为类型
> “iTextSharp.text.pdf.PdfDictionary”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:11:53.237

代替

```
PdfDictionary AnnotationAction = (PdfDictionary)AnnotationDictionary.Get(PdfName.A); 
```

请试试

```
PdfDictionary AnnotationAction = AnnotationDictionary.GetAsDict(PdfName.A); 
```

对于您的文档，**/A**键的值似乎不会立即成为字典，而是对字典的引用。必须解决此引用。`GetAsDict`这样做和引擎盖下的演员。

# json - 如何在 oData 查询中使用 GUID 并解析 JSON

> ID：15972155
> 
> 赞同：0
> 
> 时间：2013-04-12T13:03:52.500
> 
> 标签：json, xmlhttprequest, dynamics-crm-2011, odata, dynamics-crm-online

我试图弄清楚如何在动态 CRM 中处理 Odata 查询和 XMLhttprequet 然而，无论我尝试做什么，最终都没有奏效。

因此，问题在于如何通过创建 XMLhttprequest 来发送带有 GUID 的 oDAta 查询。我也从下一个代码 GUID gof 记录中的查找中检查了这一点。

另外，我注意到 oData 查询也很有效，我认为这是因为我在处理 JSON 时遇到了一些问题。我想知道，它是否以我的方式同步工作？最终，我想解析一个 responseText 以获得一个“new_address1”变量。

实际上，如果我在查找的文本数据上更改 GUID，则此代码可以正常工作，但这不是最佳解决方案，因为有时它会重复

有人在 oData 查询中使用 GUID 吗？

提前致谢

```
 function test() 
   {
 //take a value from lookup
 var lookupItem = new Array(); 
  lookupItem = Xrm.Page.getAttribute("custom").getValue();
    var name = lookupItem[0].id; 

   var oDataPath =  "http://`ServerName`/`Organization`/xrmservices/2011/OrganizationData.svc/AccountSet(guid'" + name + "')";
 var retrieveRecordsReq = new XMLHttpRequest();
  retrieveRecordsReq.open("GET", oDataPath, true);
  retrieveRecordsReq.setRequestHeader("Accept", "application/json");
  retrieveRecordsReq.setRequestHeader("Content-Type", "application/json; charset=utf-8");

  retrieveRecordsReq.onreadystatechange = function () {
   if (this.readyState == 4) {
   if (this.status == 200) {
      var retrievedRecords = JSON.parse(retrieveRecordsReq.responseText).d;
  var address = retrievedRecords.results[0].new_address1;
alert(address);        
   }
}
};
     retrieveRecordsReq.send();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:03:30.200

The [OData Query Designer](https://crm2011odatatool.codeplex.com/) and [XrmServiceToolkit](https://xrmservicetoolkit.codeplex.com/) are two excellent, freely available resources out there to do the heavy lifting for you.

A bit of google research with the above and you should get further than you have.

# c# - 尝试更新数据库中的值时出错

> ID：15972158
> 
> 赞同：0
> 
> 时间：2013-04-12T13:04:14.337
> 
> 标签：c#, database, sql-update, insert-update

我有以下 c#/查询：

```
TrackDuration =TimeSpan.Parse( Request.Form["TrackDuration"].ToString());
string InsertQuery = string.Format("UPDATE tblTracks SET  TrackLength={0}, TrackDuration='{1}', TrackName='{2}',TrackDescription='{3}',TrackMap='{4}',DifficultLevel={5},OverallHeight={6},IsCircular='{7}', ForBeginners='{8}',StartPoint='{9}',ParkingPlace='{10}',SeasonOfYear={11},TrackLocation={12}, Images='{13}' WHERE UserID={14}",
                                                                      TrackLength, TrackDuration, TrackName, TrackDescription, TrackMap, DifficultID, OverallHeight, IsCircular, ForBeginners, StartPoint, ParkingPlace, SeasonID, AreaID, ImageList, UserID); 
```

但我收到了这个错误信息：

> UPDATE 语句中的语法错误
> 
> 查询表达式中的语法错误（缺少运算符）

我真的试图解决这个问题，但我不能。

我该如何解决这个问题？

更新：

这是查询的值：

```
UPDATE tblTracks SET  TrackLength=35, TrackDuration='02:30:00', TrackName='45',TrackDescription='<p>sometext.</p>
',TrackMap='f',DifficultLevel=3,OverallHeight=450,IsCircular='true', ForBeginners='false',StartPoint='<p>קיבוץיסעור </p>
',ParkingPlace='<p>כניסה לקיבוץ יסעור</p>
',SeasonOfYear=1,TrackLocation=3, Images='' WHERE UserID=1 
```

sql 值类型有：

```
TrackLength = number ; TrackDuration = date/time ; TrackName= string ;TrackDescription= string; TrackMap = string; DifficultLevel=number;OverallHeight=number;IsCircular=true/false;ForBeginners=true/false;
StartPoint=string; ParkingPlace=string; SeasonOfYear=number; TrackLocation=number;Images=string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:32:30.490

'02:30:00' 不是**日期**时间数据库字段 AFAIK 的正确值。默认格式由[日期格式设置](http://technet.microsoft.com/en-us/library/ms189491.aspx)控制。

此外，“20130412”在任何情况下都应该有效，但对于日期时间字段。您需要`TrackDuration`正确格式化或使用[`CAST/CONVERT`](http://msdn.microsoft.com/en-us/library/ms187928.aspx). 由于`TimeSpan`不包含日期部分（它代表一个持续时间而不是一个时间点），您只能弥补它（例如，前置“20100101”），但这是一个可怕的黑客攻击。

正确的解决方案是使用正确的 DB 字段类型。

`time`如果字段是类型，则“02:30:00”可能会起作用。请阅读更多关于[SQL Server 中时间类型的](http://technet.microsoft.com/en-us/library/ms186724.aspx)信息。

更好的是，为什么不使用纯整数来表示持续时间（以秒为单位）？无论如何，持续时间不是日期。

更大的问题是您正在连接字符串以设置命令文本，这为 SQL 注入攻击打开了大门。如果我将赛道命名为`a';DROP TABLE tblTracks;--`您的数据库是烤面包：

```
UPDATE tblTracks SET TrackLength=35, 
                     TrackDuration='02:30:00', 
                     TrackName='a';DROP TABLE tblTracks;-- ... 
```

# node.js - 用户注销后，如何防止浏览器的后退按钮访问受限信息？

> ID：15972159
> 
> 赞同：8
> 
> 时间：2013-04-12T13:04:15.753
> 
> 标签：node.js, express, mongoose, passport.js

我正在使用在 github 上找到的[这个例子，用于 mongoose/mongodb 的护照本地策略。](https://github.com/jaredhanson/passport-local/blob/master/examples/express3-mongoose-rememberme/app.js)我遇到的问题是，当用户注销时，他们仍然可以通过点击浏览器上的后退按钮来访问受限信息。我对 node.js 有点陌生，但我想在执行后退和前进按钮之前，需要实现某种钩子来调用该`ensureAuthenticated`函数 - 一直位于代码的最底部。在用户注销后，如何通过点击后退按钮来防止用户访问受限信息？

```
var express = require('express')
  , passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy
  , mongodb = require('mongodb')
  , mongoose = require('mongoose')
  , bcrypt = require('bcrypt')
  , SALT_WORK_FACTOR = 10;

mongoose.connect('localhost', 'test');
var db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function callback() {
  console.log('Connected to DB');
});

// User Schema
var userSchema = mongoose.Schema({
  username: { type: String, required: true, unique: true },
  email: { type: String, required: true, unique: true },
  password: { type: String, required: true},
  accessToken: { type: String } // Used for Remember Me
});

// Bcrypt middleware
userSchema.pre('save', function(next) {
    var user = this;

    if(!user.isModified('password')) return next();

    bcrypt.genSalt(SALT_WORK_FACTOR, function(err, salt) {
        if(err) return next(err);

        bcrypt.hash(user.password, salt, function(err, hash) {
            if(err) return next(err);
            user.password = hash;
            next();
        });
    });
});

// Password verification
userSchema.methods.comparePassword = function(candidatePassword, cb) {
    bcrypt.compare(candidatePassword, this.password, function(err, isMatch) {
        if(err) return cb(err);
        cb(null, isMatch);
    });
};

// Remember Me implementation helper method
userSchema.methods.generateRandomToken = function () {
  var user = this,
      chars = "_!abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",
      token = new Date().getTime() + '_';
  for ( var x = 0; x < 16; x++ ) {
    var i = Math.floor( Math.random() * 62 );
    token += chars.charAt( i );
  }
  return token;
};

// Seed a user
var User = mongoose.model('User', userSchema);
// var usr = new User({ username: 'bob', email: 'bob@example.com', password: 'secret' });
// usr.save(function(err) {
//   if(err) {
//     console.log(err);
//   } else {
//     console.log('user: ' + usr.username + " saved.");
//   }
// });

// Passport session setup.
//   To support persistent login sessions, Passport needs to be able to
//   serialize users into and deserialize users out of the session.  Typically,
//   this will be as simple as storing the user ID when serializing, and finding
//   the user by ID when deserializing.
//
//   Both serializer and deserializer edited for Remember Me functionality
passport.serializeUser(function(user, done) {
  var createAccessToken = function () {
    var token = user.generateRandomToken();
    User.findOne( { accessToken: token }, function (err, existingUser) {
      if (err) { return done( err ); }
      if (existingUser) {
        createAccessToken(); // Run the function again - the token has to be unique!
      } else {
        user.set('accessToken', token);
        user.save( function (err) {
          if (err) return done(err);
          return done(null, user.get('accessToken'));
        })
      }
    });
  };

  if ( user._id ) {
    createAccessToken();
  }
});

passport.deserializeUser(function(token, done) {
  User.findOne( {accessToken: token } , function (err, user) {
    done(err, user);
  });
});

// Use the LocalStrategy within Passport.
//   Strategies in passport require a `verify` function, which accept
//   credentials (in this case, a username and password), and invoke a callback
//   with a user object.  In the real world, this would query a database;
//   however, in this example we are using a baked-in set of users.
passport.use(new LocalStrategy(function(username, password, done) {
  User.findOne({ username: username }, function(err, user) {
    if (err) { return done(err); }
    if (!user) { return done(null, false, { message: 'Unknown user ' + username }); }
    user.comparePassword(password, function(err, isMatch) {
      if (err) return done(err);
      if(isMatch) {
        return done(null, user);
      } else {
        return done(null, false, { message: 'Invalid password' });
      }
    });
  });
}));

var app = express();

// configure Express
app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.engine('ejs', require('ejs-locals'));
  app.use(express.logger());
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.session({ secret: 'keyboard cat' })); // CHANGE THIS SECRET!
  // Remember Me middleware
  app.use( function (req, res, next) {
    if ( req.method == 'POST' && req.url == '/login' ) {
      if ( req.body.rememberme ) {
        req.session.cookie.maxAge = 2592000000; // 30*24*60*60*1000 Rememeber 'me' for 30 days
      } else {
        req.session.cookie.expires = false;
      }
    }
    next();
  });
  // Initialize Passport!  Also use passport.session() middleware, to support
  // persistent login sessions (recommended).
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(__dirname + '/../../public'));
});
app.get('/users', function(req, res) {
  var users = User.find();
  console.log(users);
  res.send(users);
});

app.get('/', function(req, res){
  res.render('index', { user: req.user });
});

app.get('/account', ensureAuthenticated, function(req, res){
  res.render('account', { user: req.user });
});

app.get('/login', function(req, res){
  res.render('login', { user: req.user, message: req.session.messages });
});

// POST /login
//   Use passport.authenticate() as route middleware to authenticate the
//   request.  If authentication fails, the user will be redirected back to the
//   login page.  Otherwise, the primary route function function will be called,
//   which, in this example, will redirect the user to the home page.
//
//   curl -v -d "username=bob&password=secret" http://127.0.0.1:3000/login
//   
/***** This version has a problem with flash messages
app.post('/login', 
  passport.authenticate('local', { failureRedirect: '/login', failureFlash: true }),
  function(req, res) {
    res.redirect('/');
  });
*/

// POST /login
//   This is an alternative implementation that uses a custom callback to
//   acheive the same functionality.
app.post('/login', function(req, res, next) {
  passport.authenticate('local', function(err, user, info) {
    if (err) { return next(err) }
    if (!user) {
      req.session.messages =  [info.message];
      return res.redirect('/login')
    }
    req.logIn(user, function(err) {
      if (err) { return next(err); }
      return res.redirect('/');
    });
  })(req, res, next);
});

app.get('/logout', function(req, res){
  req.logout();
  res.redirect('/');
});

app.listen(3000, function() {
  console.log('Express server listening on port 3000');
});

// Simple route middleware to ensure user is authenticated.
//   Use this route middleware on any resource that needs to be protected.  If
//   the request is authenticated (typically via a persistent login session),
//   the request will proceed.  Otherwise, the user will be redirected to the
//   login page.
function ensureAuthenticated(req, res, next) {
  if (req.isAuthenticated()) { return next(); }
  res.redirect('/login')
} 
```

**编辑**
我想我可能正在做某事，但无法让它发挥作用。在做了更多研究之后，看来我需要做的是防止本地缓存。我试图从我的`app.configure`功能中做到这一点：

```
app.configure(function() {
  app.use(function(req, res, next) {
    res.header('Cache-Control', 'no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0');
    next();
  });
}); 
```

但是，这似乎并没有影响我的标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T23:21:57.193

*由于浏览器从缓存中提取该页面，因此您*在该页面上执行的操作并不重要，除非您添加一个 JS 检查以查看用户是否仍然经过身份验证......但这并不能解决页面的问题在缓存中。

将问题重新定义为缓存问题，我找到了这个答案：[https ://stackoverflow.com/a/24591864/217374](https://stackoverflow.com/a/24591864/217374)

自从你问起已经一年多了，所以我不希望你再特别需要答案，但它是为其他任何人提供的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:59:16.813

当用户在浏览器中导航回来时，数据显示在本地浏览器缓存中，而不是从您的服务器请求。您可以做的是在您的注销事件中添加一些 javascript。那段js可以从浏览器历史记录中删除敏感页面。您可以使用 window.history 来操作浏览器历史记录。查看[本指南以操作浏览器历史记录](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)和[window.history api](https://developer.mozilla.org/en-US/docs/DOM/window.history)。

不确定这是否是防弹的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T19:39:06.903

在您的 html 中添加这些行（或查看文件）

```
meta(http-equiv='Cache-Control', content='no-store, no-cache, must-revalidate')
meta(http-equiv='Pragma', content='no-cache')
meta(http-equiv='Expires', content='-1') 
```

# sql - 何时缩小：缩小一列的大小后还是缩小所有列的大小？

> ID：15972160
> 
> 赞同：2
> 
> 时间：2013-04-12T13:04:17.457
> 
> 标签：sql, database, shrink

我们有一个巨大的数据库（300GB），其中大部分空间被一张大表占用。该表有许多列被定义为浮点数，每列占用 8 个字节。但是最近我们意识到只需要 4 个字节，我们必须更改每一列的大小，所以我们必须为每一列（大约 6 列）运行这样的查询：

```
alter table [HugeTable] alter column [Col] float(1) 
```

我的问题是：在减少列大小后，我们应该如何以及何时回收空间？对于我们何时有两种可能性的问题：在每个更改表之后（缺点：它需要更长的时间）或在所有列都减少之后。对于我们的想法是如何的问题：数据库收缩，聚集索引重建。DBCC CLEANTABLE 在我们的案例中也有用吗？据我所知，它仅对可变列类型有用。

谢谢！

编辑：最后我们决定不使用这种方法。相反，我们正在创建一个具有新结构的表并逐渐移动数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:06:11.953

我会调整所有列的大小，然后在数据库上运行维护。每列调整大小后无需执行此操作。

# php - 通过 php 中的用户选择使用数据库数据填充 html 表

> ID：15972165
> 
> 赞同：0
> 
> 时间：2013-04-12T13:04:34.550
> 
> 标签：php, html, mysql, filter

所以，我有一个复选框，允许用户选择他们想要查看的列。因此，例如，如果用户只想选择 2 列（例如，TicketID 和 Category），它将只显示 ID 的数据和票的类别。这是我到目前为止所拥有的：

形式：

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
    <ul>
        <li><input type="checkbox" name="filter[]" value="TicketID" >Ticket ID</li>
        <li><input type="checkbox" name="filter[]" value="Category" />Category</li>
        <li><input type="checkbox" name="filter[]" value="Priority" />Priority</li>
        <li><input type="checkbox" name="filter[]" value="Status" />Status</li>
        <li><input type="checkbox" name="filter[]" value="InitialDescription" />Initial Description</li>
        <li><input type="checkbox" name="filter[]" value="SubmittedDate" />Submitted Date</li>
        <li><input type="checkbox" name="filter[]" value="Description" />Status Description</li>
        <input type="submit" value="Refresh Filters">
    </ul>
</form>
</td>
<td>
    <?php 

    viewTicketTable($_SESSION['userID'],$_POST['filter']);

        ?> 
```

viewticketTable 函数：

```
function viewTicketTable($userID,$columns) {
/* Accepts $userID which will identify the tickets related with the user and
$columns which will filter only the columns that are required and outputs the
table with the columns passed through. */

/* 
$columns_array = explode(',', $columns);

foreach($array as $array){
    echo $array;
} */

foreach($columns as $filter) {
    $filter = $filter  . ',' ;

}

$filter = substr($filter, 0, -1);   

$query = mysql_query("
SELECT $filter
FROM Ticket
LEFT JOIN TicketHistory
ON Ticket.TicketID = TicketHistory.TicketID
WHERE CustomerID = $userID;
");

/* Creation of the table */
echo '
    <table border="1">
        <thead>
            <tr>';
            foreach($columns as $tableHeader) {
                $tableHeader = '<th scope="col">' . $tableHeader  . '</th>' ;
                echo $tableHeader;
            }
echo '
            </tr>
        </thead>
        <tbody>
';

/*Looping through the script to print out all the information.*/
while ($row = mysql_fetch_array($query) or die(mysql_error())) {
    echo '
            <tr>';
                foreach($columns as $field) {
                    echo '<td>' . $row[$field] . '</td>';
                }
            echo '</tr>
    ';
}

echo '  </tbody>
    </table>'; 
```

}

问题出在 while 循环中。row[$field] 仅填充最后一列，而不是全部填充。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:23:22.980

我修好了它。如果有人有同样的问题，我会发布答案。

问题在这里得到解决：

```
 $filter = "";
foreach($columns as $c) {
    $filter = $filter . $c  . ',' ;

}

$filter = substr($filter, 0, -1); 
```

循环没有将值分配给 $filter 变量，因此我必须创建一个外部变量。foreach 循环中还有另一个错误，我必须用 if 语句修复（不是最好的方法，但它有效）：

```
foreach($columns as $field) {
if ($field == 'Ticket.TicketID'){
    $field = 'TicketID';
}
echo '<td>' . $row[$field] . '</td>';
} 
```

$row 数组中不接受 Ticket.TicketID，因此我不得不将其更改为 TicketID

无论如何感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:07:46.983

您的 SQL 语法有错误 -在结束`;`前您有一个额外的错误`"`

此外，您应该使用`mysql_fetch_assoc`代替`mysql_fetch_array`as using`mysql_fetch_array`而不指定方法将返回一个双数组。

# c# - xaml DataGrid 绑定到字典中的字典

> ID：15972167
> 
> 赞同：2
> 
> 时间：2013-04-12T13:04:38.280
> 
> 标签：c#, xaml, dictionary, datagrid

我想将 xaml DataGrid 绑定到包含以下内容的模型：

```
TheModel{
  instanceOfClassA
}

ClassA{
  someProps
  Dictionary<string, classB>
}

ClassB{
  someOtherProps
  Dictionary<string, classC>
}

ClassC{
  someMoreProps
} 
```

这意味着在 DataGrid 内部，ClassA 中的 ClassB 中的每个 ClassC 都会有一行，其中的列包含所有三个字典的数据。

我不想在模型中实现 TOList 方法，因为这会破坏模型和视图之间的分离。

有我可以使用的 xaml 元素吗？

谢谢菲利普。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:58:42.090

我认为您需要将数据表示为 DataGrid 中的分层行。你可以这样做。

```
<DataGrid AutoGenerateColumns="False"
          ItemsSource="{Binding Data}"
          RowDetailsVisibilityMode="Visible">

  <DataGrid.Columns>
    <DataGridTextColumn Binding="{Binding P1}" />
    <DataGridTextColumn Binding="{Binding P2}" />
  </DataGrid.Columns>

  <DataGrid.RowDetailsTemplate>

    <DataTemplate>

      <DataGrid AutoGenerateColumns="False"
                ItemsSource="{Binding DictionaryInA.Values}"
                RowDetailsVisibilityMode="Visible">

        <DataGrid.RowDetailsTemplate>

          <DataTemplate>

            <DataGrid AutoGenerateColumns="False"
                      ItemsSource="{Binding DictionaryInB.Values}">

              <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding P1}" />
                <DataGridTextColumn Binding="{Binding P2}" />
              </DataGrid.Columns>

            </DataGrid>

          </DataTemplate>

        </DataGrid.RowDetailsTemplate>

        <DataGrid.Columns>
          <DataGridTextColumn Binding="{Binding P1}" />
          <DataGridTextColumn Binding="{Binding P2}" />
        </DataGrid.Columns>

      </DataGrid>
    </DataTemplate>
  </DataGrid.RowDetailsTemplate>
</DataGrid> 
```

您的数据将如下所示。

```
- A类第1行
  - B 类第 1 排
      - C类第1行
      - C类第2行
      - C 类 N 行
  - B 类第 2 排
      - C类第1行
      - C类第2行
      - C 类 N 行
  - B 类 N 行
      C类第1行
      C类第2行
      C 类 N 行
- A类第2行
  - B 类第 1 排
      - C类第1行
      - C类第2行
      - C 类 N 行
  - B 类第 2 排
      - C类第1行
      - C类第2行
      - C 类 N 行
  - B 类 N 行
      C类第1行
      C类第2行
      C 类 N 行
- A 级 N 行
  - B 类第 1 排
      - C类第1行
      - C类第2行
      - C 类 N 行
  - B 类第 2 排
      - C类第1行
      - C类第2行
      - C 类 N 行
  - B 类 N 行
      C类第1行
      C类第2行
      C 类 N 行

```

如果您想要展开/折叠功能，请查看此链接。

[在 WPF DataGrid 中显示分层父子数据](https://stackoverflow.com/questions/9773162/displaying-hierarchal-parent-child-data-in-wpf-datagrid)

如果您有权访问基础设施控件，我强烈建议您使用 XamDataGrid 而不是 .NET DataGrid。您几乎可以使用该控件做任何您想做的事情。

[http://www.infragistics.com/products/wpf/data-grid/](http://www.infragistics.com/products/wpf/data-grid/)

## 更新

对于平面数据，您可以像这样为您的模型创建一个包装器。

```
public IEnumerable FlattenedModel
{
    get
    {
        return (from b in TheModel.InstanceOfClassA.DictionaryInA.Values
                from c in b.DictionaryInB.Values
                select new
                {
                    PropertyA1 = TheModel.PropertyA1,
                    PropertyA2 = TheModel.PropertyA2,
                    PropertyB1 = b.PropertyB1,
                    PropertyB2 = b.PropertyB2,
                    PropertyC1 = c.PropertyC1,
                    PropertyC2 = c.PropertyC2
                }).ToList();
    }
} 
```

如果你不能做一个包装器，那么转换器也可以工作。

```
public class FlattenTheModelConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var InstanceOfTheModel = value as TheModel;

        return (from b in InstanceOfTheModel.InstanceOfClassA.DictionaryInA.Values
                from c in b.DictionaryInB.Values
                select new
                {
                    PropertyA1 = InstanceOfTheModel .PropertyA1,
                    PropertyA2 = InstanceOfTheModel .PropertyA2,
                    PropertyB1 = b.PropertyB1,
                    PropertyB2 = b.PropertyB2,
                    PropertyC1 = c.PropertyC1,
                    PropertyC2 = c.PropertyC2
                }).ToList();
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

如果您决定使用转换器，则需要按如下方式修改您的 XAML。

```
<DataGrid ItemsSource="{Binding TheModel, Converter={StaticResource FlattenTheModelConverter}, Mode=OneWay}"> 
```

# active-directory - 使用 UnboundID 添加组条目时不会执行错误 503

> ID：15972168
> 
> 赞同：4
> 
> 时间：2013-04-12T13:04:38.673
> 
> 标签：active-directory, unboundid-ldap-sdk

我正在尝试使用 UnboundID LDAP SDK 将组添加到我的 Active Directory 服务，并不断收到错误 503：将无法执行。

我已经验证我正在使用 SSL 连接，并且我正在与属于 Administrators 组的用户连接，除非我弄错了，否则他有权创建新条目。

我还将 LDAP 接口事件的日志记录级别一直提高到 5，并且事件查看器注册了许多事件，这些事件都无法解释为什么服务不愿意执行我的创建条目操作。

关于可能导致此问题的任何想法？

下面是我正在使用的 scala 代码示例：

```
val connection = connect("MyAdminUser", "MyAdminPass")

val addGroupResult = connection.add("CN=TestGroup2,OU=Groups,OU=mydomain,DC=mydomain,DC=local",
    new Attribute("objectClass", "top", "group"),
    new Attribute("name","TestGroup2"),
    new Attribute("sAMAccountName","TestGroup2"),
    new Attribute("sAMAccountType","268435456"),
    new Attribute("objectCategory","CN=Group,CN=Schema,CN=Configuration,DC=mydomain,DC=local"),
    new Attribute("cn","TestGroup2"),
    new Attribute("distinguishedName","CN=TestGroup2,OU=Groups,OU=mydomain,DC=mydomain,DC=local"),
    new Attribute("instanceType","4"),
    new Attribute("groupType","-2147483646")
    )

private def connect(user: String, pass: String) = {
    val options = new LDAPConnectionOptions()
    options.setFollowReferrals(true)
    val sslUtil = new SSLUtil(new TrustAllTrustManager())
    val socketFactory = sslUtil.createSSLSocketFactory()
    new LDAPConnection(socketFactory, options, host, securePort, DN(user), pass)
} 
```

这是我收到的错误消息：

```
Exception in thread "main" LDAPException(resultCode=53 (unwilling to perform), errorMessage='0000209A: SvcErr: DSID-031A104A, problem 5003 (WILL_NOT_PERFORM), data 0', diagnosticMessage='0000209A: SvcErr: DSID-031A104A, problem 5003 (WILL_NOT_PERFORM), data 0') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T13:39:00.897

我的错误是在添加操作中包含了太多属性，其中一些不应该手动设置，而是由 SAM（安全帐户管理器）设置。

正确的代码如下：

```
val addGroupResult = connection.add("CN=TestGroup2,OU=Groups,OU=simpleBI,DC=domain,DC=local",
            new Attribute("objectClass", "top", "group"),
            new Attribute("name","TestGroup2"),
            new Attribute("sAMAccountName","TestGroup2"),
            new Attribute("objectCategory","CN=Group,CN=Schema,CN=Configuration,DC=domain,DC=local")
            ) 
```

请注意，我删除了一些属性，包括被 AD 拒绝的 sAMAccountType。我还删除了一些多余的。我相信我所拥有的是满足我需求的最小属性集。

连接代码未更改。

# c# - 如何遍历和更新 IEnumerable 的每个元素

> ID：15972171
> 
> 赞同：0
> 
> 时间：2013-04-12T13:04:43.307
> 
> 标签：c#, asp.net-mvc-3, ienumerable

我有一个 IEnumerable 对象，该对象已由 SqlQuery 调用填充，我想遍历它并更新其类型类成员。

我的示例代码：

```
public class MyClass
{
    public string id { get; set; }
    public string data { get; set; }
}

...

public JsonResult GetMyClass(...)
{
    IEnumerable<MyClass> oMyClass = db.Database.SqlQuery<MyClass>("SELECT ...");

    // Here I want to iterate through the oMyClass object updating
    // the "data" member before returning it as a Json

    return Json(oMyClass, JsonRequestBehavior.AllowGet);
} 
```

似乎没有一种很好的方法来做到这一点，特别是如果人们还想更新对象而不仅仅是从中读取。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T13:05:54.987

使用`foreach`. 这就是它的用途：

```
foreach(var item in oMyClass)
{
    item.Property = newValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:08:07.913

```
public JsonResult GetMyClass(...)
{
    IEnumerable<MyClass> oMyClass = db.Database.SqlQuery<MyClass>("SELECT ...");

    foreach (var o in oMyClass)
    {
        // do somethig with o
    }

    return Json(oMyClass, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T13:07:39.247

```
IEnumerable<MyClass> oMyClass = db.Database.SqlQuery<MyClass>("SELECT ...").ToList();
oMyClass.ForEach(i => i.data = somevalue); 
```

# jsf-2 - 在 JSF2.0 中读取属性文件，它也可以在战争中工作

> ID：15972175
> 
> 赞同：2
> 
> 时间：2013-04-12T13:04:50.880
> 
> 标签：jsf-2, primefaces, glassfish-3

要`properties`使用位于`root directory`我的 Web 应用程序的 Glassfishv3 网络服务器读取 JSF2.0 中的文件，我使用以下代码 -

```
 ServletContext ctx = (ServletContext) FacesContext
            .getCurrentInstance().getExternalContext().getContext();
    String deploymentDirectoryPath = ctx.getRealPath("/");
    Properties prop = new Properties();
    prop.load(new FileInputStream(deploymentDirectoryPath
            + File.separator + "portal-config.properties")); 
```

下面是门户网站的截图——

![在此处输入图像描述](https://i.stack.imgur.com/qqLzS.png)

在运行门户网站时，我收到 FileNotFound 错误，因为 glassfish 域中不存在该文件。

有没有什么方法可以读取在开发阶段和战争文件中都可以工作的属性文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T13:22:06.163

您永远不应该使用`java.io.File`来引用网络资源。它对它所处的上下文一无所知。您也不应该使用它，因为当服务器配置为在内存中而不是在磁盘上扩展 WAR 文件时`ServletContext#getRealPath()`，它可能会返回，这超出了您在 3rd 方主机中的控制范围。`null`

只需使用[`ExternalContext#getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getResourceAsStream%28java.lang.String%29)以`InputStream`. 它采用相对于 webcontent 根目录的路径。

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
properties.load(ec.getResourceAsStream("/portal-config.properties")); 
```

### 也可以看看：

*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream/2308388#2308388)
*   [servletcontext.getRealPath("/") 是什么意思，我应该什么时候使用它](https://stackoverflow.com/questions/12160639/what-does-mean-in-the-function-servletcontext-getrealpath/12160863#12160863)
*   [在基于 servlet 的应用程序中放置以及如何读取配置资源文件？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application/2161583#2161583)

* * *

**更新**它似乎根本不是网络资源。您应该将文件移动到“WebContent”文件夹中，如屏幕截图所示。或者，更好的是`/WEB-INF`文件夹，这样任何人都无法通过 URL 访问它。

```
properties.load(ec.getResourceAsStream("/WEB-INF/portal-config.properties")); 
```

另一种方法是将它放在类路径中，如屏幕截图所示的“Java 源”文件夹。你不需要把它放在一个包里，这是可选的。假设你没有把它放在一个包里，然后这样做：

```
ClassLoader cl = Thread.currentThread().getContextClassLoader();
properties.load(cl.getResourceAsStream("portal-config.properties")); 
```

*（请注意，路径可能不以斜杠开头！）*

# ios - 在不继承 UIControl 的情况下实现目标动作模式

> ID：15972177
> 
> 赞同：4
> 
> 时间：2013-04-12T13:04:56.363
> 
> 标签：ios, objective-c, design-patterns

我正在为一个大学项目开发​​一个健身房计时器应用程序。我的主定时器类是 NSObject 的子类。我希望其他对象能够注册定时器事件，例如定时器暂停、定时器完成等。我认为目标动作模式最适合于此，但我将如何实现呢？我需要能够为每个特定操作添加多个目标，就像 UIButton 执行此操作一样。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:56:19.847

这是添加多个目标的简单方法。显然，您希望构建一些错误检查并使其更灵活一些，但希望您明白这一点：

**编写一个允许其他对象将自己添加为目标的方法：**

```
- (void) addTarget:(NSObject *)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents {
    if (controlEvents == UIControlEventValueChanged) {
        NSArray *targetAndAction = @[target, [NSValue valueWithPointer:action]];
        [valueChangedArray addObject:targetAndAction];  // valueChangedArray is a NSMutableArray, already initialized
     }
} 
```

如果您不想使用，则不必使用 UIControlEvents，也不必使用 NSArrays 来存储所有内容。这里重要的是你要抓住目标，并将选择器存储为 NSValue 对象。

**当发生某些事情时，对对象执行选择器：**

```
- (void) somethingHappened {
    // something happened, inform the objects who registered

    for (NSArray *targetAndAction in valueChangedArray) {
        NSObject *target = targetAndAction[0];
        NSValue *actionValue = targetAndAction[1];
        SEL action = [actionValue pointerValue];
        [target performSelector:action];
    }
} 
```

请注意，如果选择器保留任何对象，您可能会发生内存泄漏（Xcode 会警告您这一点）。只要您的选择器不返回他们创建/复制的对象，您就应该没问题。有关 performSelector 潜在泄漏的更详尽讨论，请参见此处：[performSelector may cause a leak because its selector is unknown](https://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:21:52.420

**通知模式**最适合您的应用。为此，您应该使用[NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

这里有一些教程
[1](http://www.theappcodeblog.com/2011/05/16/nsnotificationcenter-tutorial-using-the-notification-center-in-your-iphone-app/)
[2](http://iphonebyradix.blogspot.in/2011/07/nsnotificationcenter-tutorial.html)

为一个动作添加多个目标是不可能的（我认为）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:56:38.183

您可以创建一个单例对象，并让对象从类对象中请求该对象（就像 Apple 所做的那样）。将相同的 UIControl 方法添加到您的类中，并在可变字典中注册对象和其他信息，通过使用 ** valueWithNonretainedObject:** 方法将对象包装到 NSValue 对象中来保持对注册对象的弱引用。

# php - 为 Drupal 编码标准运行 CommandCLI Codesniffer 会出现错误

> ID：15972185
> 
> 赞同：1
> 
> 时间：2013-04-12T13:05:05.713
> 
> 标签：php, drupal, codesniffer

我从[http://drupal.org/project/coder](http://drupal.org/project/coder)下载了 Drupal 编码器包（7.x-2.0-beta2）并提取了相关的标准文件；但是当我尝试从 CLI 执行时，我得到：

> 致命错误：在第 1007 行的 /php/PEAR/PHP/CodeSniffer.php 中调用未定义的方法 Drupal_Sniffs_InfoFiles_ClassFilesSniff::register()

果然，查看文件本身，ClassFilesSniff.php 文件中没有定义 register() 方法。

有人知道这个嗅探应该监听什么令牌类型，以便我可以自己添加 register() 吗？

如果我手动添加一个注册方法，如

```
public function register()
{
    return array(T_CLASS);

}//end register() 
```

然后嗅探寄存器，但我得到

> 可捕获的致命错误：传递给 Drupal_Sniffs_InfoFiles_ClassFilesSn iff::process() 的参数 1 必须是数组类型，给定对象，在第 492 行的 /php/P EAR/PHP/CodeSniffer/File.php 中调用并在 /php/PEAR 中定义/PHP/Co deSniffer/Standards/Drupal/Sniffs/InfoFiles/ClassFilesSniff.php 第 44 行

处理时

我正在使用最新的 PEAR 代码嗅探器

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:01:23.220

我只是成功地消除了那个错误。

尝试将您的 pear 配置设置为不同的状态。

```
 pear config-set preferred_state stable 
```

然后删除 CodeSniffer

```
pear uninstall php_codesniffer 
```

并重新安装

```
pear install --alldeps php_codesniffer 
```

我的preferred_state 设置为“alpha”，但是当我将其更改为“stable”时，phpcs 表示再次工作。

# zip - ZIP 文件中的所有文件结构都应该是连续的吗？

> ID：15972186
> 
> 赞同：0
> 
> 时间：2013-04-12T13:05:05.807
> 
> 标签：zip, zipfile

在读取 ZIP 文件时，我们可以安全地假设所有文件结构（我的意思是本地文件头 + 文件数据（压缩或存储）+ 数据描述符）是完全连续的吗？中间会不会有不相关的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:17:48.853

PkWare Appnote 告诉你

> “紧随文件的本地标头的是文件的压缩或存储数据。[本地文件标头][文件数据][数据描述符]系列对 .ZIP 存档中的每个文件重复。”

所以它们之间应该没有间隙。

但是，我建议解析和读取中央目录，而不是通过本地文件头（除非您需要流式处理）。

# oracle - 为什么 GETDATE() 是无效标识符

> ID：15972188
> 
> 赞同：13
> 
> 时间：2013-04-12T13:05:12.520
> 
> 标签：oracle, function, triggers

当我调试此代码时，为什么 GETDATE() 是一个无效标识符说 Oracle Sql Developer 工具：

```
CREATE OR REPLACE TRIGGER SPName
AFTER UPDATE
ON TableName 
FOR EACH ROW
BEGIN
    UPDATE TableName SET LastModifiedDate = GETDATE() WHERE TableName.DET_ID = :new.DET_ID;
END; 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-12T13:08:01.110

我想你想要`SYSDATE`，不是`GETDATE()`。试试看：

```
UPDATE TableName SET LastModifiedDate = (SELECT SYSDATE FROM DUAL); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T13:08:27.940

使用 ORACLE 等效`getdate()`于`sysdate`. [在这里阅读。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions172.htm) Getdate() 属于 SQL Server ，不适用于 Oracle。

其他选项是`current_date`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-07T10:00:03.607

`getdate()`用于 MS-SQL，`sysdate`用于 Oracle 服务器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-09T08:37:59.353

`SYSDATE`并`GETDATE`执行相同的操作。

`SYSDATE`与 Oracle 语法`GETDATE`兼容，并且与 Microsoft SQL Server 语法兼容。

# ruby-on-rails-3 - 在 wicked pdf 中 render_to_string 的正确方法是什么？

> ID：15972189
> 
> 赞同：5
> 
> 时间：2013-04-12T13:05:21.813
> 
> 标签：ruby-on-rails-3, wicked-pdf

这是 wicked pdf 的文档指定的内容：

```
WickedPdf.new.pdf_from_string(
render_to_string(:pdf => "pdf_file.pdf", :template => 'templates/pdf.html.erb', :layout => 'pdfs/layout_pdf'), 
:footer => {:content => render_to_string({:template => 'templates/pdf_footer.html.erb', :layout => 'pdfs/layout_pdf'})}
) 
```

我得到的是 ActionView::MissingTemplate 即使我在目录中有 pdf.html.erb。我在应用程序控制器中使用 gen_pdf 方法，并在 views/application 文件夹中使用等效的 pdf.html.erb。我错过了什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-05T20:45:56.873

## 不要使用`template`.

我遇到了和你一样的问题。当您在控制器操作中而不是在邮件程序或其他东西中执行它时，您必须以完全不同的方式呈现您的 PDF。

首先，使用`template`将不起作用。还有一些其他细微差别，但这是我的实现，您可以从中构建：

**`notification_mailer.rb`**

```
def export

  header_html = render_to_string( partial: 'exports/header.pdf.erb', 
                                  locals:  { report_title: 'Emissions Export' } )

  body_html   = render_to_string( partial: "exports/show.pdf.erb" )

  footer_html = render_to_string( partial: 'exports/footer.pdf.erb' )

  @pdf = WickedPdf.new.pdf_from_string( body_html,
                                        orientation: 'Landscape',
                                        margin: { bottom: 20, top: 30 },
                                        header: { content: header_html },
                                        footer: { content: footer_html } )

  # Attach to email as attachment.
  attachments["Export.pdf"] = @pdf

  # Send email. Attachment assigned above will automatically be included.
  mail( { subject: 'Export PDF', to: 'elon@musk.com' } )

end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-13T08:44:32.617

如果您使用 wicked_pdf 并尝试在控制器之外生成 pdf（即在 cron 作业中），您可以这样做（raild 4.1 +）：

```
# app/renderers/pdf_renderer.rb

class PdfRenderer < ActionController::Metal
  include ActionView::ViewPaths
  include AbstractController::Rendering
  include AbstractController::Helpers
  include ActionController::Helpers
  include ActionView::Rendering
  include ActionView::Layouts
  include ActionController::Rendering
  include ActionController::Renderers
  include ActionController::Renderers::All

  append_view_path "app/views"

  View = Struct.new(:layout, :template, :locals)

  def render_pdf(view)
    wicked = WickedPdf.new
    pdf_string = render_to_string(template: view.template, layout: view.layout, locals: view.locals)
    # Make a PDF in memory
    pdf_file = wicked.pdf_from_string(pdf_string, pdf: "pdf_name",
                                      page_size: 'A4',
                                      wkhtmltopdf: ENV['WKHTMLTOPDF_EXECUTABLE_PATH'],
                                      margin: { top: '0.5in', bottom: '1in', left: '0.5in', right: '0.5in'}
    )

    # Write it to tempfile
    tempfile = Tempfile.new(['document', '.pdf'], Rails.root.join('tmp'))
    tempfile.binmode
    tempfile.write pdf_file
    tempfile.close
    tempfile
  end
end 
```

并调用此方法：

```
 renderer = PdfRenderer.new
  pdf_view = PdfRenderer::View.new.tap do |v|
    v.template = "postal/#{template_file}.pdf.erb"
    v.layout = 'layouts/layout.pdf.erb'
    v.locals = {:user=> @user, :other_stuff => @details}
  end
  temp_pdf = renderer.render_pdf pdf_view 
```

现在你可以用`temp_pdf.path`这个文件做任何你想做的事情（即发送电子邮件）

你可以在这里阅读更多关于这种方式的信息：http: [//blog.arkency.com/2014/03/pdf-in-rails-without-controllers/](http://blog.arkency.com/2014/03/pdf-in-rails-without-controllers/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T17:37:56.537

你可以在你的邮件里有这样的东西：

```
class ReportMailer < ActionMailer::Base

  default :from => DEFAULT_FROM

  def report_pdf(user, bookings)
    @bookings = booking
    @user = user
    mail(:subject => 'Overtime', :to => user.email) do |format|
      format.text # renders overtime_pdf.text.erb for body of email
      format.pdf do
        attachments['monthly_report.pdf'] = WickedPdf.new.pdf_from_string(
            render_to_string(:pdf => 'monthly_report', :template =>
                'hospital_bookings/index.pdf.erb', :layouts => 'pdf.html')
        )
      end
    end
  end
end 
```

希望这可以帮助。此外，如果您需要进一步的帮助，最好发布您的一些代码，以便其他人可以更好地了解您所做的事情以及您想要实现的目标。

# css - 填充容器的 CSS 定位：宽度与左/右？

> ID：15972192
> 
> 赞同：21
> 
> 时间：2013-04-12T13:05:34.187
> 
> 标签：css, cross-browser, width, css-position

考虑：

*   对于绝对定位在相对定位容器内的元素。
*   如果您希望元素填充容器的宽度。
*   该元素也是底部对齐的。

![在此处输入图像描述](https://i.stack.imgur.com/YG7vP.png)

[为元素设置 a`width`以像素](http://jsbin.com/ozaziy/1/edit)为单位是最好的浏览器兼容性，还是简单地[使用`left`and`right`](http://jsbin.com/ozaziy/4/edit)？

任何一种方法都需要注意的常见错误？

显然，在图像的宽度或填充发生变化的情况下，使用`left: 0;`and`right: 0;`会使代码更易于管理，但是是否有任何不利的地方`width: 300px`可以取而代之？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-17T02:33:55.443

历史上我们学会了使用`width`而不是`left & right`因为IE6没有同时支持同一轴的两个属性

```
<div style="top:0;bottom:0;position:absolute;">modern browsers</div>

<div style="top:0;height:100%;position:absolute;">MSIE6</div>

<div style="left:0;right:0;position:absolute;">modern browsers</div>

<div style="left:0;width:100%;position:absolute;">MSIE6</div>

<div style="left:0;right:0;top:0;bottom:0;position:absolute;">modern browsers</div>

<div style="left:0;top:0;height:100%;width:100%;position:absolute;">MSIE6</div> 
```

此外，此技术不适用于某些元素（[包括现代浏览器，按规范](http://www.w3.org/TR/CSS21/visudet.html#abs-replaced-width)）

```
<!-- these will not work -->
<!-- edit: on some browsers they may work,
but it's not standard, so don't rely on this -->

<iframe src="" style="position:absolute;top:0;bottom:0;left:0;right:0;"></iframe>

<textarea style="position:absolute;top:0;bottom:0;left:0;right:0;"></textarea>

<input type="text" style="position:absolute;left:0;right:0;">

<button ... ></button>

and possibly others... (some of these can't even be display:block) 
```

* * *

`width:auto`但是，使用该属性分析正常静态流中发生的情况

```
<div style="width:auto;padding:20px;margin:20px;background:lime;">a</div> 
```

你会看到它非常类似于...

```
<div style="width:auto;padding:20px;margin:20px;background:lime;
    position:absolute;top:0;left:0;bottom:0;right:0;">b</div> 
```

...具有相同值的相同属性！这真是太好了！否则它看起来像：

```
<div style="width:100%;height:100%;
    position:absolute;top:0;left:0;">
    <div style="padding:20px;margin:20px;
        background:lime;">c</div>
</div> 
```

这也是不同的，因为内部 div 不填充 y 轴。要解决这个问题，我们将需要 css`calc()`或`box-sizing`一个不必要的头痛。

* * *

我的回答是，`left + right | top + bottom`它们真的很酷，因为它们最接近静态定位`width:auto` 并且没有理由不使用它们。与替代方案相比，它们更易于使用，并且提供更多功能（例如，使用`margin-left`,`padding-left`并`left`同时在一个元素中）。

`left + right | top + bottom`与替代方案相比，浏览器对它的支持要好得多，`width:100% + box-sizing | calc()` 而且使用起来也更容易！

当然，如果您不需要（如在您的示例中）也在 y 轴上增长元素， `width:100%`使用一些嵌套元素进行填充，它也是对 MSIE6 存档支持的唯一解决方案

所以，看你的需求。如果您想支持 MSIE6（这是这样做的唯一实际原因），您应该使用`with:100%`，否则使用`left + right`！

希望能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:23:08.233

这两种方法都很好，但是如果您希望您的设计具有响应性或与手机兼容 - 我建议使用`Left:`并且`Bottom:`如果容器未包含在`<div>`.

如果它包含在一个`<div>`那么做它`width: 100%`或`max-width: 200px`在我看来是一种导致显示问题最少的方式。

如果您希望主题具有响应性，请避免在 CSS 中使用固定宽度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-10T11:49:24.733

我没有在所有浏览器（和模式）上对此进行测试，但对于 IE 怪癖模式（例如，在未定义 !DOCTYPE 的 .HTA 中），我创建了一个子例程，用于更正 LEFT/RIGHT 样式元素的 WIDTH 或 HEIGHT或设置顶部/底部样式（不是“自动”）。为了避免进行所有类型的单位转换，例程临时删除 LEFT（或 TOP）样式并将 WIDTH（或 HEIGHT）设置为 100% 以确定 RIGHT（或 BOTTOM）偏移量（以像素为单位）。

该脚本是用 VBScript 编写的，但是将这个想法转换为 JavaScript 应该是很困难的。

```
<html>
<head>
    <script language="VBScript">

Option Explicit

Sub Justify(ByVal hElement)

    Dim sStyleTop, iTop, iBottom, sStyleLeft, iLeft, iRight

    With hElement
        If .currentStyle.top <> "auto" And .currentStyle.height = "auto" And .currentStyle.bottom <> "auto" Then
            iTop = .offsetTop
            sStyleTop = .currentStyle.top
            .style.top = "auto"
            .style.height = "100%"
            iBottom = -.offsetTop 
            .style.height = .offsetHeight - iTop - iBottom & "px"
            .style.top = sStyleTop
        End If
        If .currentStyle.left <> "auto" And .currentStyle.width = "auto" And .currentStyle.right <> "auto" Then
            iLeft = .offsetLeft
            sStyleLeft = .currentStyle.left
            .style.left = "auto"
            .style.width = "100%"
            iRight = -.offsetLeft 
            .style.width = .offsetWidth - iLeft - iRight & "px"
            .style.left = sStyleLeft
        End If
        For Each hElement In .Children
            Justify hElement
        Next
    End With

End Sub

Sub window_onload

    Justify Document.body

End Sub

    </script>
    <style type="text/css">
    body {
        position:absolute;
        width:100%;
        height:100%;
    }
    #outer{
        background:blue;
        position:absolute;
        top:10px;
        right:20px;
        bottom:30px;
        left:40px;
    }
    #inner{
        background:green;
        position:absolute;
        top:40px;
        right:30px;
        bottom:20px;
        left:10px;
    }
    </style>
</head>
<body>
    <div id="outer">
        <div id="inner">
        </div>
    </div>
</body>
</html> 
```

证明文档中所有元素的命令是：

```
Justify Document.body 
```

我从 onload 事件中调用它，因为它在我的情况下涉及固定大小的 .HTA，但我希望该例程也适用于相当大的窗口（或父元素）的 onsize 事件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T13:18:53.953

这两种解决方案都可以在每个浏览器中正常运行，没有任何问题。在这些情况下，我喜欢添加一个**宽度：100%；左：0；底部：0；**对于元素，但如果你喜欢**left:0;right:0; 底部：0；**比你也可以使用的更多。

# java - 我需要在我的程序中包含一个关于系统的简短代码，以随机确定谁先进入 java

> ID：15972196
> 
> 赞同：-2
> 
> 时间：2013-04-12T13:05:48.710
> 
> 标签：java, random

大家好，这是我使用 java 大约 3 周的程序。我已经完成了这个简单的游戏，花了我很长时间，但我想做的是如何包含一个随机选择谁先进入游戏的代码，一些建议会很棒，（记住我很业余如果不是更少）

这不是家庭作业，也不是作业或工作……只是我下周在课堂上学到的东西，我想早点学习并取得领先……（有点笨拙哈哈）

感谢任何帮助的人

```
import java.util.Scanner;
/**
* The simple NIM game.
* There are 21 matches in the pile. On each move, each user take turns picking
* up 1, 2, or 3 matches until there are no more matches left.
* The one who picks up the last match loses.
*/

public class SimpleNIM {
private int matchesLeft = 21;
private String player = "A";

/**
* Starts and runs the game
*/

public void start() {
Scanner input= new Scanner(System.in);
while (true) {
  int pickmatches = 0;
  do {
    System.out.print(
        "Player " + player + ": How many matches do want to pick? (1, 2, or 3) ");
    pickmatches = input.nextInt();
    if (validMove(pickmatches)) {
      break;
    }
    System.out.println(
        matchesLeft - pickmatches < 0
        ? "You can't pick "
        + pickmatches
        + " matches as only "
        + matchesLeft
        + " matches left"
        : "That's an illegal move. "
        + "Choose 1, 2, or 3 matches.");
  }
  while (true);
  updateMatchesLeft(pickmatches);
  System.out.println(
      "Player "
      + player
      + " takes "
      + pickmatches
      + ( (pickmatches == 1) ? " match, " : " matches, ")
      + "leaving "
      + matchesLeft
      + '\n');
  player = otherPlayer(player);
  if (gameOver()) {
    System.out.println("Player " + player + " wins the game!");
    break;
      }
    }
  }

/**
* Update the number of matches left in pile.
* pickmatches No. of matches picked
*/
private void updateMatchesLeft(int pickmatches) {
matchesLeft = matchLeft - pickmatches;
}

/**
* Game Over?
* true if game is over.
*/

private boolean gameOver() {
}

/**
* Returns the other player
* The current player ("B" or "A")
* The other player ("A" or "B")
*/
private String otherPlayer(String p) {
// YOUR CODE GOES HERE
}

/**
* Valid move?
* numMatches The number of matches picked
* true if there are enough matches left and numMatches is between 1 and 3
*/

private boolean validMove(int numMatches) {
}

/**
* Plays the game
* args ignored
*/
public static void main(String[] args) {
SimpleNIM pickUpMatches = new SimpleNIM();
welcome();
pickUpMatches.start();
}

/**
* Displays the startup information banner.
*/
private static void welcome() {
System.out.println("WELCOME TO THE SIMPLE NIM GAME: 21 MATCHES IN PILE");
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:10:42.953

`new Random().nextInt(n)`给你一个介于 0 和 n-1 之间的随机数，所以你可以

```
Player[] players = ...
playerToStart = players[new Random().nextInt(players.length)]; 
```

随机选择一个。

如果您打算选择多个玩家，请考虑重用 Random 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:13:23.800

您可以执行以下操作：

```
public void start() {
  Scanner input = new Scanner(System.in);
  player = Math.random() < 0.5 ? "A" :"B";
  do { 
```

但是请先了解一些有关 Java 的知识。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:14:18.183

在您的`welcome`方法中添加以下行：

```
if(new java.util.Random().nextBoolean())
    player = "A";
else
    player = "B"; 
```

[查看Random class](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)的文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T13:10:06.947

```
Random rand = new Random();
int result = rand.nextInt(2); // a random number, either 0 or 1, see http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt(int)
if (result == 0) {
    // Player 1 goes first
}
else {
    // Player 2 goes first
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T13:12:25.360

将此行添加到您的库中

```
import java.util.Random; 
```

然后这一行添加了一个新的随机数生成器，有点像 Scanner。

```
Random generator = new Random(); 
```

使用[此](http://www.cs.geneseo.edu/~baldwin/reference/random.html)资源了解更多信息。

# android - 类似于新闻栏的文本滑动条

> ID：15972198
> 
> 赞同：1
> 
> 时间：2013-04-12T13:05:54.227
> 
> 标签：android, animation

我正在尝试开发类似于滚动新闻栏的东西，它在电视频道的底部显示新闻。它看起来像这样

> ..em Ipsum 只是印刷和排版行业的虚拟文本。洛雷姆·伊普斯...

每次从左到右移动时，它都会使用更新的文本更新内容。我正在考虑使用 textview 鳍状肢，但它只是从一个整个视图变为另一个。有什么建议可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:27:12.533

```
TextView txt = new TextView(this);     
txt.setText(“This is moving text”);      
txt.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);     
txt.setTextColor(Color.rgb(187, 88, 15));     
txt.setPadding(10, 10, 0, 0);     
txt.setEllipsize(TruncateAt.MARQUEE);     
txt.setSingleLine();     
txt.setMarqueeRepeatLimit(10);     
txt.setFocusable(true);     
txt.setHorizontallyScrolling(true);     
txt.setFocusableInTouchMode(true);     
txt.requestFocus();     
txt.setLayoutParams(new TableRow.LayoutParams(130, TableRow.LayoutParams.FILL_PARENT));
txt.setTypeface(Typeface.SERIF,Typeface.BOLD); 
```

希望这可以帮助。

# pentaho - 如何将 Pentaho 与 .NET 集成

> ID：15972201
> 
> 赞同：0
> 
> 时间：2013-04-12T13:05:58.357
> 
> 标签：pentaho

我一直在寻找一些教程或文章，我如何将[Pentaho](http://reporting.pentaho.com/)与 .NET 集成，但看起来什么都没有。没有例子，没有文章。

有可能吗？任何链接都会很有用。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:26:14.387

Pentaho 和 .NET 之间需要什么样的集成？

我们可以与 .net 进行集成：

请按照以下步骤操作：

如果您在 pentaho 中创建了作业和转换，那么您希望使用 .net 安排作业，然后使用 pentaho 创建 .BAT 文件并从 .NET 调用 .BAT 文件

问候普拉萨达

# python - Python/Tornado - time.sleep() 在 requesthandler.write() 之前执行

> ID：15972202
> 
> 赞同：0
> 
> 时间：2013-04-12T13:06:02.263
> 
> 标签：python, debugging, tornado

代码：

```
self.write("<html><head></head>"+
    <body><h1>You are now logged out.</h1></body></html>")
sleep(1) 
```

的内容`self.write()`将在 1 秒后打印出来，这不是我想要的。我希望首先将内容打印到屏幕上。为什么`sleep()`要先执行，我怎样才能`self.write`先执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:09:53.957

基本的 HTML 会话？

*   打开连接
*   请求数据
*   从服务器获取数据
*   紧密连接
*   向用户显示收到的数据

一切都是按照这个顺序运行的。而且由于连接在完成之前不会关闭`sleep()`，因此您将看不到数据。

# c++ - 将模板参数与 null 进行比较

> ID：15972207
> 
> 赞同：0
> 
> 时间：2013-04-12T13:06:19.167
> 
> 标签：c++, templates, null

我有一个带有模板参数的方法

```
bool insert_into_tree(const T new_key, const long &new_index){} 
```

`T`仅限于`std::string`和`int`类型。我希望 的值`new_key`是有意义的，因此我不想要一个空`std::string`但可以接受 的零值`int`。

这是一个 Java 模板与 null 比较的示例

```
if (key == null) {}

key defined as T extends Comparable<? super T> 
```

在 c++ 内

```
key is defined as template <class T> 
```

如果`T`是`std::string`，则不存在`overloaded operator==`与 进行比较`NULL`的可能。

如果`T`是`int`，与 null 的比较是可以接受的。

因此，我可以采用什么方法来使模板参数比较像在 Java 中一样工作？

换句话说，如果在 Java 中我有一个模板参数可以与 null 进行比较，那么我如何比较 c++ 中的模板参数，以便可以实现 NULL 或其他一些指示 null 的适当值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:09:23.710

C++ 没有可以为空的类型（C++ 中的所有类型默认都是值类型，没有引用类型，Java 中的情况，因此您无法将某些类型与某些神奇的 null 进行比较）。您可以在此处使用指针或[boost::optional](http://www.boost.org/doc/libs/1_52_0/libs/optional/doc/html/index.html)。

> 如果 T 是 int，则可以接受与 null 的比较。

是的，这是可以接受的，因为 C++ 中的 NULL 只是 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:22:27.947

首先请记住，这不是 Java，而是 C++，它们的工作方式不同。可能最*相似*的方法是创建一个`Comparable`模板并确保两者`key`以及您想要比较的类来实例化它。因此，与其使用`std::string`你，不如使用`Comparable< std::string >`这是一种方法，但*几乎可以肯定不是*最好的方法。

一种更好的方法是重载比较运算符以提供所需的比较。这将使您在比较中更加具体。不过要注意隐式转换。

无论您选择哪种方式，都将主要基于代码的更广泛上下文，并且没有更多信息，很难具体说明哪种方法最好。

# php - 何时使用视图以及何时使用存储过程

> ID：15972217
> 
> 赞同：0
> 
> 时间：2013-04-12T13:06:50.470
> 
> 标签：php, mysql, stored-procedures, views

我是一个报告数量更多的应用程序。我对每个报告所做的是创建一个 mysql 视图和一个 mysql 存储过程。从前端 php 我用 where 子句调用存储过程，基于这个 where 子句我从特定视图中获取结果。最近我发现它导致了性能问题。所以我避免了视图并在存储过程中编写了相同的代码并提高了性能。因此，从那个角度来看，我对何时应该使用存储过程以及何时应该使用视图的理想情况感到困惑。

上面解释的我的场景真的会导致性能问题还是我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:10:47.217

mysql中的视图主要是为了可读性。它们使您能够将可能对多个表的复杂查询隐藏到看似单个表的内容中。

我怀疑最可能的原因不是视图本身的使用（尽管不确定它们是否会以任何方式帮助您，而存储过程可能会更有效），而是您使用的视图优化不佳（可能忽略键）。

# joomla - Joomla 2.5：从前端将用户分配给用户组

> ID：15972221
> 
> 赞同：0
> 
> 时间：2013-04-12T13:07:09.950
> 
> 标签：joomla, acl, frontend, usergroups

我有静态定义的用户组，具有静态定义的访问权限。而且我希望能够使用某些模块从前端更改给定用户的用户组。

原因：用户可以自行注册，自动进入群“注册”。一段时间后，他们可以被提升并移动到组“成员”。但我不想从后端执行此操作，例如促销可以由任何其他已经成员完成。所以我在前端需要这个。

我在 Google 中没有找到任何关于此的提及。也许这只是显而易见的事情？是否有执行此类任务的模块/插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:35:51.353

Joomla 核心组件不允许这样做。但是，如果有适合您需求的东西，您可以在[http://extensions.joomla.org/extensions/clients-a-communities/user-management上搜索。](http://extensions.joomla.org/extensions/clients-a-communities/user-management)也许这个：[http ://extensions.joomla.org/extensions/clients-a-communities/user-management/13753](http://extensions.joomla.org/extensions/clients-a-communities/user-management/13753)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:47:10.260

您可以制作一个带有按钮的模块并让该按钮使用 JUserHelper::addUserToGroup。

# asp.net-mvc-4 - 如何在 Razor MVC4 中创建 DateTimePicker？

> ID：15972224
> 
> 赞同：4
> 
> 时间：2013-04-12T13:07:14.673
> 
> 标签：asp.net-mvc-4, razor, datetimepicker, quartz.net

我正在使用 QUARTZ.NET 和 RAZOR(MVC4) 创建一个基于 Web 的任务调度应用程序。有关更多详细信息，请[单击此处](https://stackoverflow.com/questions/15802755/how-to-implement-a-task-scheduler-service-using-quartz-net-for-multiple-servers/15854689?noredirect=1#15854689)，如下所示

![添加调度程序的表单](https://i.stack.imgur.com/i599H.png)

请给我一些代码或任何参考来在 RAZOR(MVC4) 中实现 DateTimePicker。

**感谢您提前提供的宝贵帮助。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T13:47:54.637

有关带有 jquery UI 的日期选择器，请参阅此基本博客。 [http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery- ui-datepicker-popup-calendar-with-aspnet-mvc-part-1](http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-1)

请参阅我的扩展博客以获取本地化支持 [http://locktar.wordpress.com/2012/09/10/localization-validation-in-mvc/](http://locktar.wordpress.com/2012/09/10/localization-validation-in-mvc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:35:47.787

从模型将字段设置为日期时间

```
public DateTime myDate { get; set; }
//View
@Html.EditorFor(model => model.myDate) 
```

# entity-framework-4.1 - 无法让 EF Code First 在 SQL Server Express 2012 上运行

> ID：15972225
> 
> 赞同：0
> 
> 时间：2013-04-12T13:07:15.417
> 
> 标签：entity-framework-4.1, sql-server-2012, code-first

我已经尝试了所有现有问题中提到的解决方案，但没有一个对我有用。当我运行我的应用程序（运行没有错误）并检查 SQLExpress 数据库（通过 SQL Management Studio）时，我可以看到**我的 Code First 类没有生成任何表**。

这是我的连接字符串：

```
<add name="BSContext" connectionString="Data Source=.\SQLEXPRESS; Integrated Security=SSPI; Initial Catalog=BSDomain; MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

我在 Win 8 Pro 64x 上，使用 VS 2012 和 SQL Express 2012。这是我的 BSContext 代码：

```
public class BSContext : DbContext
{
    public DbSet<Event> Events { get; set; }
    public DbSet<Location> Locations { get; set; }
    public DbSet<Author> Authors { get; set; }
} 
```

在我的 application_start() 我有以下内容：

```
Database.SetInitializer<BSContext>(new EventInitializer()); 
```

EventInitializer 的代码如下：

```
public class EventInitializer : DropCreateDatabaseAlways<BSContext>
{
    protected override void Seed(BSContext context)
    {
        // Seed Code
    }
} 
```

还是不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:32:14.103

事实证明，这仅仅是因为我在我的 ID 字段中使用了以下格式：

```
private int AuthorID { get; set; } 
```

当我应该使用时：

```
private int AuthorId { get; set; } 
```

现在一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:23:05.297

尝试将此添加到 Global.asax 中的 Application_Start() 方法中。

```
System.Data.Entity.DropCreateDatabaseAlways<BSContext>()); 
```

这将强制应用程序在您每次运行应用程序时创建数据库，所以不要把它留在那里！

# ember.js - Ember.js 将出口渲染为模态窗口

> ID：15972226
> 
> 赞同：6
> 
> 时间：2013-04-12T13:07:17.550
> 
> 标签：ember.js

我正在尝试渲染模态。为此，我使用`{{outlet modalOutlet}}`我的应用程序模板创建了一个自定义插座，该插座有两个插座，默认插座和 modalOutlet。但是，当模态模板呈现为`{{outlet modalOutlet}}`时，我的默认值`{{outlet}}`变为空。

如何更改它，以便默认 {{outlet}} 不会更改，因此我实际上可以呈现`{{outlet modalOutlet}}`为模态窗口，或作为布局的一部分的侧边栏

我不确定这是由于我的代码，还是与`renderTemplate()`我缺少的方法有关。带有我的代码的[jsFiddle 在这里](http://jsfiddle.net/rushi/vgvL4/9/)。

```
// Router
App.Router.map(function(){
    this.route('contributors');
    this.route('contributor', {path: '/contributors/:contributor_id'});
});

App.ContributorsRoute = Ember.Route.extend({
    model: function() {
        return App.Contributor.all();
    },
});

App.ContributorRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('contributor', {
            outlet: 'modalOutlet'
        });
    }
});

<script type="text/x-handlebars" data-template-name="application">  
    <nav>
        {{#linkTo "index"}}Home{{/linkTo}}
        {{#linkTo "contributors"}}Contributors{{/linkTo}}
    </nav>
    <div style='padding:5px;margin:5px;border:1px dotted red;'>
        Default Outlet
        {{outlet}}
    </div>
    <div style='padding:5px;margin:5px;border:1px dotted blue;'>    
        modalOutlet
        {{outlet modalOutlet}}
    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:00:14.420

您还必须渲染`contributors`模板，因为当您转换到同级路由时，默认出口会被清除。

```
App.ContributorRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('contributors');
        this.render('contributor', {
            outlet: 'modalOutlet'
        });
    }
}); 
```

但是，如果您像这样嵌套路由，则可以避免这种情况：

```
App.Router.map(function(){
    this.resource('contributors', function() {
        this.route('show', {path: ':contributor_id'});
    });
}); 
```

...并调整应用程序的其余部分以匹配新结构。在这种情况下，您需要`modalOutlet`使用选项指定谎言的位置`into`（在这种情况下`'application'`：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T13:57:19.887

问题是您的路由结构没有嵌套，一旦您嵌套了路由，您将需要指定包含模式出口的路由。

正在发生的事情是你渲染

> 应用程序 -> 贡献者

显示您的列表，但是当您单击链接时，您现在正在呈现

> 应用程序 -> 贡献者

并且`Contributor`模板被移除。

如果你嵌套你的路线，像这样：

> 应用程序 -> 贡献者 -> 贡献者

然后，您仍将拥有`Contributors`显示列表的模板。

[更新的 JSFiddle](http://jsfiddle.net/vgvL4/11/)

```
//Router
App.Router.map(function(){
    this.resource('contributors', function() {
        this.resource('contributor', {path: '/:contributor_id'});
    });   
});

//Route
App.ContributorRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render('contributor', {
            into: 'application',
            outlet: 'modalOutlet'
        });
    }
}); 
```

# spring - Postgres 空闲连接：CannotAcquireResourceException

> ID：15972228
> 
> 赞同：2
> 
> 时间：2013-04-12T13:07:31.437
> 
> 标签：spring, hibernate, postgresql

我有一个使用 Hibernate 4.1.1 和 Spring 3.1.1 和 Postgres 9.2 的 Java/Wicket 网络应用程序。我还使用 spring transaction api 和 c3p0 连接池。

我的问题是未释放可用连接，并且在执行由 gui 引​​起的一些选择语句后，我得到以下异常

> com.mchange.v2.resourcepool.CannotAcquireResourceException：ResourcePool 无法从其主要工厂或来源获取资源。执行`SELECT * FROM pg_stat_activity;`显示有很多这样的空闲查询：`SELECT NULL AS TABLE_CAT, n.nspname AS TABLE_SCHEM, c.relname AS TABLE_NAME, CASE n.nspname ~ '^pg_' OR n.nspname = 'information_schema' WHEN true THEN CASE WHEN n.nspname = 'pg_catalog' OR n.nspname = 'information_schema' THEN CASE c.relkind WHEN 'r' THEN 'SYSTEM TABLE' WHEN 'v' THEN 'SYSTEM VIEW' WHEN 'i' THEN 'SYSTEM INDEX' ELSE NULL END WHEN n.nspname = 'pg_toast' THEN CASE c.relkind WHEN 'r' THEN 'SYSTEM TOAST TABLE' WHEN 'i' THEN 'SYSTEM TOAST INDEX' ELSE NULL END ELSE CASE c.relkind
> WHEN 'r' THEN 'TEMPORARY TABLE' WHEN 'i' THEN 'TEMPORARY INDEX'
> WHEN 'S' THEN 'TEMPORARY SEQUENCE' WHEN 'v' THEN 'TEMPORARY VIEW'
> ELSE NULL END END WHEN false THEN CASE c.relkind WHEN 'r' THEN 'TABLE' WHEN 'i' THEN 'INDEX' WHEN 'S' THEN 'SEQUENCE' WHEN 'v' THEN 'VIEW' WHEN 'c' THEN 'TYPE' ELSE NULL END ELSE NULL END AS TABLE_TYPE, d.description AS REMARKS FROM pg_catalog.pg_namespace n, pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_description d ON (c.oid = d.objoid AND d.ob`

这是我的 applicationContext.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
                           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
                           http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.1.xsd"
       default-autowire="byName">

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
                    destroy-method="close">
           <property name="driverClass" value="org.postgresql.Driver"/>
           <property name="jdbcUrl" value="jdbc:postgresql://localhost:5432/mydatabase"/>
           <property name="user" value="myuser"/>
           <property name="password" value="mypassword"/>

           <!-- configuration pool via c3p0 -->
           <property name="initialPoolSize" value="3"/>
           <property name="minPoolSize" value="3"/>
           <property name="maxPoolSize" value="30"/>
           <property name="idleConnectionTestPeriod" value="600"/>
           <property name="maxIdleTime" value="0"/>
           <property name="maxStatements" value="0"/>
           <property name="maxStatementsPerConnection" value="0"/>
           <property name="acquireIncrement" value="1"/>
           <property name="acquireRetryAttempts" value="3"/>
           <property name="acquireRetryDelay" value="1000"/>
           <property name="autoCommitOnClose" value="false"/>
           <property name="maxConnectionAge" value="14400"/>
           <property name="forceIgnoreUnresolvedTransactions" value="false"/>
           <property name="numHelperThreads" value="20"/>
           <property name="testConnectionOnCheckin" value="false"/>
           <property name="testConnectionOnCheckout" value="false"/>
           <property name="maxAdministrativeTaskTime" value="0"/>
           <property name="debugUnreturnedConnectionStackTraces" value="false"/>
           <property name="maxIdleTimeExcessConnections" value="0"/>
           <property name="breakAfterAcquireFailure" value="false"/>
           <property name="checkoutTimeout" value="0"/>
           <property name="unreturnedConnectionTimeout" value="0"/>
           <property name="usesTraditionalReflectiveProxies" value="false"/>
      </bean>

    <bean id="exampleDao"
        class="com.mycompany.persistence.hibernate.daoimpl.ExampleDaoImpl">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
      <property name="dataSource" ref="dataSource" />
      <property name="annotatedClasses">
        <list>
            <value>com.mycompany.model.Example</value>
        </list>
      </property>

      <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.current_session_context_class">org.springframework.orm.hibernate4.SpringSessionContext</prop>
            <prop key="hibernate.auto_close_session">true</prop>
            <prop key="hibernate.c3p0.maxSize">30</prop>
            <prop key="hibernate.c3p0.minSize">1</prop>
            <prop key="hibernate.c3p0.acquireIncrement">1</prop>
            <prop key="hibernate.c3p0.idleTestPeriod">300</prop>
            <prop key="hibernate.c3p0.timeout">1800</prop>
            <prop key="hibernate.c3p0.maxStatements">0</prop>
            <prop key="hibernate.c3p0.unreturnedConnectionTimeout">30</prop> 
            <prop key="hibernate.c3p0.debugUnreturnedConnectionStackTraces">true</prop>
            <prop key="hibernate.c3p0.checkoutTimeout">0</prop>
            <prop key="hibernate.c3p0.preferredTestQuery">SELECT * FROM dual</prop>
        </props>
      </property>
    </bean>

   <!-- Transaction Management -->
   <tx:annotation-driven transaction-manager="transactionManager"/>
    <bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
</beans> 
```

配置是否正确？

我从数据库中检索数据的类是这样的：

```
@Repository
public class ExampleDaoImpl extends BaseDaoImpl implements ExampleDao {
...
    @Override
    @Transactional(readOnly=true)
    public List<Example> findExampleByCompanyAndType(Company company,
            int type) {
        return sessionFactory.getCurrentSession()
                .createCriteria(Example.class)
                .add(Restrictions.eq("company.companyId",
                        company.getCompanyId()))
                .add(Restrictions.eq("type", type)).list();

    }
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:16:48.110

PostgreSQL 没有实现“双重”，因此您可能打算在那里使用 SELECT 1 之类的东西来进行测试查询。我不知道这是否会解决您的问题，但它应该有助于容器更好地自我管理。

# vb.net - VB.Net 中的 Windows cmd.exe 变量替换

> ID：15972235
> 
> 赞同：1
> 
> 时间：2013-04-12T13:07:47.583
> 
> 标签：vb.net

VB.NET 中是否有可用的方法，通过它我可以像变量替换一样执行 Windows cmd.exe？

例如：“anyname_%date:~-4,10%%date:~-7,2%%date:~-10,2%.xml”

# java - SecurityContextHolder.getContext() 在不同的浏览器选项卡中是相同的

> ID：15972237
> 
> 赞同：0
> 
> 时间：2013-04-12T13:07:59.903
> 
> 标签：java, spring-security

我的 Web 应用程序有问题。

现状和一步一步：

1.  在浏览器中打开第一个会话
2.  调试看看

    `SecurityContextHolder.getContext() = A`

3.  打开第二个会话（在浏览器的不同选项卡中）

4.  调试看看

    `SecurityContextHolder.getContext() = B`

5.  回来调试第一个会话，看看

    `SecurityContextHolder.getContext() = B`

所以第一个会话的上下文被重写了。

你有什么想法来解决它吗？

非常感谢。

# php - 通过 AJAX 发送 PHP 变量

> ID：15972244
> 
> 赞同：2
> 
> 时间：2013-04-12T13:08:14.477
> 
> 标签：php, ajax, variables

我目前正在设计一个使用步骤的系统（例如航空公司预订，您可以在其中传递各种步骤来购买机票），并且这些步骤是通过 AJAX 完成的。因此，该`index.php`文件是加载的唯一文件，并且页面正在通过 AJAX 在 main 上加载`div`。

系统正常工作，但我需要根据之前输入的数据确保变量在后续加载的页面上传递。例如：

我在第 1 页上有一个表格，用户可以在其中输入一些数据，例如他的姓名和国家/地区。单击提交时，该按钮会触发 AJAX 请求，结果是页面 2 的内容，正在加载到`div`. 但我需要第 2 页的变量填充第 1 页上的值。第 2 页有另一个带有新数据的表单和另一个提交按钮。单击时，它会通过 AJAX 请求第 3 页，其中必须包含第 1 页和第 2 页的变量。依此类推。

哪种方法最聪明？使用*PHP 会话*？通过*$.get*或*$.post*传递？

我请求你的意见。

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T13:10:51.443

如果您使用像 jQuery 这样的库 - 最简单的选择是将变量作为 POST 或 GET 参数传递，请参阅：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例如：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
  }).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

您可以`type`根据需要将其更改为 GET 或 POST，并且`data`密钥应保存您希望发送的数据。（以 JSON 格式）

关于如何将 php 数据作为 JSON 传递给 js，请参阅[传递 php 变量](https://stackoverflow.com/questions/5700122/passing-php-variables-through-jquery-ajax?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:15:40.627

我会去的

```
$.post 
```

jQuery的选项。 [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) 将所有变量传递给您的 PHP 脚本，并让该 PHP 脚本使用所有变量（新变量 + 来自的变量）生成 div 的新内容（下一步）帖子）填写。如果有变量应该传输但未显示给访问者，请使用隐藏字段传输它们。顺便说一句：要通过 jQuery 获取表单中所有输入的内容，请使用

```
serialize() 
```

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/) 他们一起工作就像一个魅力！

# php - 使用 Web 应用程序打印 pdf

> ID：15972252
> 
> 赞同：0
> 
> 时间：2013-04-12T13:08:40.023
> 
> 标签：php, javascript, mysql, printing, label

我已经看到了几个关于这个问题的主题 - 通过浏览器打印的能力。

不幸的是，对我来说唯一可行的解​​决方案是使用 iframe 打印。iframe 的问题在于，当页面加载时，浏览器实际上会挂起相当多的时间，这很烦人。

有没有其他方法可以打印文件？我应该将其显示为 html 并打印还是保留 pdf 并使用 pdfjs 在画布中获取并打印？

所有这些都不允许我设置打印选项，因为我试图将它发送到需要特定尺寸的标签打印机。

提前致谢，

真挚地，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:59:32.210

我解决这个问题的方法是在我的服务器上安装[wkhtmltopdf 。](http://code.google.com/p/wkhtmltopdf/)因为我使用带有 Javascript 的动态页面来添加内容，所以我将整个 html 页面发送到我的 php，它将 html 文件存储在我服务器上的一个临时文件夹中，然后我使用 wkhtmltopdf 创建 pdf。完成后，我的 ajax 请求将打开那个新的 pdf 文件。完成后，您可以打印该pdf。

这是我发现用 pdf 文件打印出来的最佳解决方案，其他事情的问题是你无法摆脱网页顶部和页脚的额外混乱。

问候 Ezeky

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:16:54.120

对于 HTML 页面：如此处所述[，](http://www.w3schools.com/css/css_mediatypes.asp)您可以在 css 文件中为媒体类型**print**指定 css 规则。这将在您的浏览器中请求打印时应用。

# java - 如何使用 JOOQ 获得简单的 Sum？

> ID：15972257
> 
> 赞同：4
> 
> 时间：2013-04-12T13:08:56.553
> 
> 标签：java, sql, sum, jooq

什么是让`sum`JOOQ 变得简单的正确方法？

```
SELECT sum(PERSON.AGE) FROM PERSON; 
```

我想这样的事情：

```
BigDecimal sum = factory.select(sum(PERSON.AGE)).from(PERSON).fetch???; 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T00:50:19.490

```
Record1<BigDecimal> record = factory.select(sum(PERSON.AGE)).from(PERSON).fetchOne();
BigDecimal decimal = record.getValue(record.field1()); 
```

如果没有要求和的记录，则小数将为空。如果您尝试以以下方式结尾，这种情况将导致错误：

```
.fetchOneInto(Integer.class) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T04:44:41.350

这是你应该做的：

```
// Static imports are assumed to be present:
import static org.jooq.impl.DSL.*; 
```

然后使用：

```
BigDecimal sumValue = factory.select(sum(PERSON.AGE)).from(PERSON).fetch(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:27:12.737

```
BigDecimal sum = (BigDecimal) create.select( sum(PERSON.AGE).as("PERSON_AGE_SUM")) .from(PERSON); 
```

试试这个..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T10:07:28.693

尝试：

```
BigDecimal sum = factory.select(sum(PERSON.AGE)).from(PERSON).fetchOne(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-23T05:34:47.967

```
BigDecimal sum = factory.select(PERSON.AGE.sum()).from(PERSON).fetchAnyInto(BigDecimal.class); 
```

# javascript - 无法在 Jetty Web 应用程序中加载 java 脚本文件

> ID：15972262
> 
> 赞同：0
> 
> 时间：2013-04-12T13:09:13.630
> 
> 标签：javascript, html, tomcat, web-applications, jetty

我有一个非常简单的 web 应用程序，我正在尝试使用[flot](http://www.flotcharts.org/) javascript 库绘制图形。我的 JSP 文件以这种方式导入所需的 *.js 文件，如下所示。

相对于WEB-INF/pages/hello.jsp的hello.jsp文件，相关.js文件的scripts目录在../../scripts（即直接在ROOT下）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples: Categories</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
    <script language="javascript" type="text/javascript" src="../../scripts/jquery.flot.js"></script>
    <script type="text/javascript">

    $(function() {
     //code draw the graph 
    </script>
</head>
<body>
        <h2>Categories</h2>
        <div id="placeholder" style="width:788px;height:400px"></div>
        <h3>End of Page</h3>
</body>
</html> 
```

目录结构如下 root@domU-12-31-39-13-C5-F5:/usr/local/jetty/webapps# tree

```
.
|-- README.TXT
`-- ROOT
    |-- META-INF
    |   |-- MANIFEST.MF
    |   `-- maven
    |       `-- com.mkyong.common
    |           `-- SpringMVC
    |               |-- pom.properties
    |               `-- pom.xml
    |-- scripts
    |   |-- jquery.colorhelpers.js
    |   |-- jquery.flot.time.js
    |   |-- jquery.flot.time.min.js
    |   |-- jquery.js
    |   |-- jquery.min.js
    |   |-- LICENSE.txt
    |   |-- Makefile
    |   |-- NEWS.md
    |   |-- PLUGINS.md
    |   `-- README.md
    `-- WEB-INF
        |-- classes
        |   `-- com
        |       `-- mkyong
        |           `-- common
        |               `-- controller
        |                   `-- HelloController.class
        |-- hello.html
        |-- lib
        |   |-- aopalliance-1.0.jar
        |   |-- commons-logging-1.1.1.jar
        |   |-- spring-aop-3.0.5.RELEASE.jar
        |   |-- spring-asm-3.0.5.RELEASE.jar
        |   |-- spring-web-3.0.5.RELEASE.jar
        |   `-- spring-webmvc-3.0.5.RELEASE.jar
        |-- mvc-dispatcher-servlet.xml
        |-- pages
        |   |-- hello.html
        |   `-- hello.jsp
        `-- web.xml 
```

**观察**

1.  使用 firefox eclipse，我可以看到浏览器正在请求*GET [http://ec2-184-73-14-57.compute-1.amazonaws.com:5809/scripts/jquery.flot.js](http://ec2-184-73-14-57.compute-1.amazonaws.com:5809/scripts/jquery.flot.js)*但因此无法找到它失败并出现 404 Not found
2.  将脚本目录移动到 WEB-INF 下并更改相对路径也会导致相同的错误。
3.  当引用为 /scripts/*.js 时，部署在 tomcat 中的类似应用程序正在从 ROOT 目录中选择 .js 文件
4.  无法使用绝对路径引用 js 文件，当我这样做时，它会尝试将绝对路径附加到[http://ec2-184-73-14-57.compute-1.amazonaws.com:5809/](http://ec2-184-73-14-57.compute-1.amazonaws.com:5809/)并尝试获取它..因此导致404错误

以前没用过Jetty，这个问题是Jetty特有的吗？什么是导入 javascript 文件的更好方法。请指教

这是webapp启动后的转储

```
 2013-04-12 19:08:04.829:INFO:oejs.ServerConnector:main: Started ServerConnector@3ae0e5b7{HTTP/1.1}{0.0.0.0:5809}
    org.eclipse.jetty.server.Server@6a7ef378 - STARTING
     += qtp578065504{STARTED,10<=10<=200,i=8,q=0} - STARTED
     |   +- 12 qtp578065504-12-selector-0 RUNNABLE @ sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
     |   +- 13 qtp578065504-13-acceptor-0-ServerConnector@3ae0e5b7{HTTP/1.1}{0.0.0.0:5809} RUNNABLE @ sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)
     |   +- 14 qtp578065504-14 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     |   +- 15 qtp578065504-15 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     |   +- 16 qtp578065504-16 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     |   +- 17 qtp578065504-17 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     |   +- 18 qtp578065504-18 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     |   +- 19 qtp578065504-19 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     |   +- 20 qtp578065504-20 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     |   +- 21 qtp578065504-21 TIMED_WAITING @ sun.misc.Unsafe.park(Native Method) IDLE
     += org.eclipse.jetty.util.thread.ScheduledExecutorScheduler@7c8b3bd8 - STARTED
     += org.eclipse.jetty.server.handler.HandlerCollection@582b0e7b - STARTED
     |   += org.eclipse.jetty.server.handler.ContextHandlerCollection@7e999262 - STARTED
     |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   |   += o.e.j.w.WebAppContext@2f7e1b09{/,file:/usr/local/osmosix/jetty/webapps/ROOT/,AVAILABLE}{/ROOT} - STARTED
     |   |       += org.eclipse.jetty.server.session.SessionHandler@8a6bf88 - STARTED
     |   |       |   += org.eclipse.jetty.server.session.HashSessionManager@3620f49e - STARTED
     |   |       |   += org.eclipse.jetty.security.ConstraintSecurityHandler@5daa3e56 - STARTED
     |   |       |   |   +- org.eclipse.jetty.security.DefaultAuthenticatorFactory@12959ac0
     |   |       |   |   += org.eclipse.jetty.servlet.ServletHandler@72140bcb - STARTED
     |   |       |   |   |   += default@5c13d641==org.eclipse.jetty.servlet.DefaultServlet,0,false - STARTED
     |   |       |   |   |   |   +- maxCacheSize=256000000
     |   |       |   |   |   |   +- etags=true
     |   |       |   |   |   |   +- dirAllowed=true
     |   |       |   |   |   |   +- gzip=true
     |   |       |   |   |   |   +- maxCachedFileSize=200000000
     |   |       |   |   |   |   +- redirectWelcome=false
     |   |       |   |   |   |   +- acceptRanges=true
     |   |       |   |   |   |   +- welcomeServlets=false
     |   |       |   |   |   |   +- aliases=false
     |   |       |   |   |   |   +- useFileMappedBuffer=true
     |   |       |   |   |   |   +- maxCachedFiles=2048
     |   |       |   |   |   +- [/]=>default
     |   |       |   |   |   += jsp@19c47==org.apache.jasper.servlet.JspServlet,0,false - STARTED
     |   |       |   |   |   |   +- logVerbosityLevel=DEBUG
     |   |       |   |   |   |   +- fork=false
     |   |       |   |   |   |   +- scratchdir=/tmp/jetty-0.0.0.0-5809-ROOT-_-any-/jsp
     |   |       |   |   |   |   +- xpoweredBy=false
     |   |       |   |   |   +- [*.jsp, *.jspf, *.jspx, *.xsp, *.JSP, *.JSPF, *.JSPX, *.XSP]=>jsp
     |   |       |   |   |   += mvc-dispatcher@f974527a==org.springframework.web.servlet.DispatcherServlet,1,true - STARTED
     |   |       |   |   |   +- [/]=>mvc-dispatcher
     |   |       |   |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   |       |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   |       |   |   +~ HashLoginService[Test Realm] - STARTED
     |   |       |   |   +- org.eclipse.jetty.security.DefaultIdentityService@77df3248
     |   |       |   |   +- org.eclipse.jetty.security.authentication.BasicAuthenticator@652520bb
     |   |       |   |   |
     |   |       |   |   +> HashLoginService[Test Realm] - STARTED
     |   |       |   |   +> org.eclipse.jetty.security.DefaultIdentityService@77df3248
     |   |       |   |   +> org.eclipse.jetty.security.authentication.BasicAuthenticator@652520bb
     |   |       |   |   +> []
     |   |       |   |   +> /={TRACE={RoleInfo,F,C[]}}
     |   |       |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   |       += org.eclipse.jetty.servlet.ErrorPageErrorHandler@4ec93402 - STARTED
     |   |       |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   |       +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   |       |
     |   |       +> WebAppClassLoader=Spring Web MVC Application@bf6140f
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/classes/
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-aop-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-beans-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-expression-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/aopalliance-1.0.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-context-support-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-web-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-core-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-webmvc-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-asm-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/spring-context-3.0.5.RELEASE.jar
     |   |       |   +- file:/usr/local/osmosix/jetty/webapps/ROOT/WEB-INF/lib/commons-logging-1.1.1.jar
     |   |       |   +- startJarLoader@518cb416
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-xml-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/servlet-api-3.0.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-http-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-continuation-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-server-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-security-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-servlet-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-webapp-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-deploy-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-client-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-jmx-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jsp/com.sun.el-2.2.0.v201108011116.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jsp/javax.el-2.2.0.v201108011116.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jsp/javax.servlet.jsp.jstl-1.2.0.v201105211821.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jsp/javax.servlet.jsp-2.2.0.v201112011158.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jsp/org.apache.jasper.glassfish-2.2.2.v201112011158.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jsp/org.apache.taglibs.standard.glassfish-1.2.0.v201112081803.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jsp/org.eclipse.jdt.core-3.7.1.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/resources/
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-api-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-common-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-server-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-servlet-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-util-9.0.0.v20130308.jar
     |   |       |       +- file:/usr/local/osmosix/jetty/lib/jetty-io-9.0.0.v20130308.jar
     |   |       |       +- sun.misc.Launcher$AppClassLoader@e9576fd
     |   |       |           +- file:/usr/local/osmosix/jetty/start.jar
     |   |       |           +- sun.misc.Launcher$ExtClassLoader@76b6e385
     |   |       +> contextConfigLocation=/WEB-INF/mvc-dispatcher-servlet.xml
     |   |       +> javax.servlet.context.tempdir=/tmp/jetty-0.0.0.0-5809-ROOT-_-any-
     |   |       +> org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern=.*/servlet-api-[^/]*\.jar$
     |   |       +> org.springframework.web.context.support.ServletContextScope=org.springframework.web.context.support.ServletContextScope@392e8f9
     |   |       +> org.springframework.web.context.WebApplicationContext.ROOT=Root WebApplicationContext: startup date [Fri Apr 12 19:08:03 UTC 2013]; root of context hierarchy
     |   |       +> org.springframework.web.servlet.FrameworkServlet.CONTEXT.mvc-dispatcher=WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Fri Apr 12 19:08:04 UTC 2013]; parent: Root WebApplicationContext
     |   += org.eclipse.jetty.server.handler.DefaultHandler@423dc560 - STARTED
     |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   += org.eclipse.jetty.server.handler.RequestLogHandler@70a6302b - STARTED
     |   |   += org.eclipse.jetty.server.NCSARequestLog@6dbe7935 - STARTED
     |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     += HashLoginService[Test Realm] - STARTED
     +- org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   +- org.eclipse.jetty.security.ConstraintSecurityHandler@5daa3e56=org.eclipse.jetty.security:context=ROOT,type=constraintsecurityhandler,id=0
     |   +- org.eclipse.jetty.security.DefaultAuthenticatorFactory@12959ac0=org.eclipse.jetty.security:context=ROOT,type=defaultauthenticatorfactory,id=0
     |   +- qtp578065504{STARTED,10<=10<=200,i=8,q=0}=org.eclipse.jetty.util.thread:type=queuedthreadpool,id=0
     |   +- [*.jsp, *.jspf, *.jspx, *.xsp, *.JSP, *.JSPF, *.JSPX, *.XSP]=>jsp=org.eclipse.jetty.servlet:context=ROOT,type=servletmapping,name=jsp,id=0
     |   +- org.eclipse.jetty.server.Server@6a7ef378=org.eclipse.jetty.server:type=server,id=0
     |   +- org.eclipse.jetty.deploy.providers.WebAppProvider@3e9985a5=org.eclipse.jetty.deploy.providers:type=webappprovider,id=0
     |   +- HttpConnectionFactory@33192410{HTTP/1.1}=org.eclipse.jetty.server:context=HTTP/1.1@3ae0e5b7,type=httpconnectionfactory,id=0
     |   +- default@5c13d641==org.eclipse.jetty.servlet.DefaultServlet,0,false=org.eclipse.jetty.servlet:context=ROOT,type=servletholder,name=default,id=0
     |   +- org.eclipse.jetty.server.handler.DefaultHandler@423dc560=org.eclipse.jetty.server.handler:type=defaulthandler,id=0
     |   +- [/]=>default=org.eclipse.jetty.servlet:context=ROOT,type=servletmapping,name=default,id=0
     |   +- org.eclipse.jetty.server.handler.RequestLogHandler@70a6302b=org.eclipse.jetty.server.handler:type=requestloghandler,id=0
     |   +- org.eclipse.jetty.servlet.ServletHandler@72140bcb=org.eclipse.jetty.servlet:context=ROOT,type=servlethandler,id=0
     |   +- org.eclipse.jetty.server.handler.ContextHandlerCollection@7e999262=org.eclipse.jetty.server.handler:type=contexthandlercollection,id=0
     |   +- org.eclipse.jetty.server.session.HashSessionIdManager@434d3d4f=org.eclipse.jetty.server.session:type=hashsessionidmanager,id=0
     |   +- org.eclipse.jetty.jmx.MBeanContainer@3a55b9b=org.eclipse.jetty.jmx:type=mbeancontainer,id=0
     |   +- HashLoginService[Test Realm]=org.eclipse.jetty.security:type=hashloginservice,id=0
     |   +- jsp@19c47==org.apache.jasper.servlet.JspServlet,0,false=org.eclipse.jetty.servlet:context=ROOT,type=servletholder,name=jsp,id=0
     |   +- o.e.j.w.WebAppContext@2f7e1b09{/,file:/usr/local/osmosix/jetty/webapps/ROOT/,AVAILABLE}{/ROOT}=org.eclipse.jetty.webapp:context=ROOT,type=webappcontext,id=0
     |   +- HttpConfiguration@3636d04a{32768,8192/8192,https://:5809,[]}=org.eclipse.jetty.server:context=HTTP/1.1@3ae0e5b7,type=httpconfiguration,id=0
     |   +- org.eclipse.jetty.security.DefaultIdentityService@77df3248=org.eclipse.jetty.security:context=ROOT,type=defaultidentityservice,id=0
     |   +- org.eclipse.jetty.io.ArrayByteBufferPool@bba4cd7=org.eclipse.jetty.io:context=HTTP/1.1@3ae0e5b7,type=arraybytebufferpool,id=0
     |   +- sun.nio.ch.ServerSocketChannelImpl[/0:0:0:0:0:0:0:0:5809]=sun.nio.ch:context=HTTP/1.1@3ae0e5b7,type=serversocketchannelimpl,id=0
     |   +- org.eclipse.jetty.security.authentication.BasicAuthenticator@652520bb=org.eclipse.jetty.security.authentication:context=ROOT,type=basicauthenticator,id=0
     |   +- mvc-dispatcher@f974527a==org.springframework.web.servlet.DispatcherServlet,1,true=org.eclipse.jetty.servlet:context=ROOT,type=servletholder,name=mvc-dispatcher,id=0
     |   +- org.eclipse.jetty.server.session.SessionHandler@8a6bf88=org.eclipse.jetty.server.session:context=ROOT,type=sessionhandler,id=0
     |   +- [/]=>mvc-dispatcher=org.eclipse.jetty.servlet:context=ROOT,type=servletmapping,name=mvc-dispatcher,id=0
     |   +- org.eclipse.jetty.server.handler.HandlerCollection@582b0e7b=org.eclipse.jetty.server.handler:type=handlercollection,id=0
     |   +- org.eclipse.jetty.deploy.DeploymentManager@76bb5e95=org.eclipse.jetty.deploy:type=deploymentmanager,id=0
     |   +- org.eclipse.jetty.server.session.HashSessionManager@3620f49e=org.eclipse.jetty.server.session:context=ROOT,type=hashsessionmanager,id=0
     |   +- ServerConnector@3ae0e5b7{HTTP/1.1}{0.0.0.0:5809}=org.eclipse.jetty.server:context=HTTP/1.1@3ae0e5b7,type=serverconnector,id=0
     |   +- org.eclipse.jetty.util.log.Log@3daf611c=org.eclipse.jetty.util.log:type=log,id=0
     |   +- org.eclipse.jetty.server.ServerConnector$ServerConnectorManager@3b195903=org.eclipse.jetty.server:context=HTTP/1.1@3ae0e5b7,type=serverconnector$serverconnectormanager,id=0
     |   +- org.eclipse.jetty.servlet.ErrorPageErrorHandler@4ec93402=org.eclipse.jetty.servlet:context=ROOT,type=errorpageerrorhandler,id=0
     |   +- org.eclipse.jetty.server.NCSARequestLog@6dbe7935=org.eclipse.jetty.server:type=ncsarequestlog,id=0
     |   +- org.eclipse.jetty.util.thread.ScheduledExecutorScheduler@7c8b3bd8=org.eclipse.jetty.util.thread:type=scheduledexecutorscheduler,id=0
     +- org.eclipse.jetty.util.log.Log@3daf611c
     += ServerConnector@3ae0e5b7{HTTP/1.1}{0.0.0.0:5809} - STARTED
     |   +~ org.eclipse.jetty.server.Server@6a7ef378 - STARTING
     |   +~ qtp578065504{STARTED,10<=10<=200,i=8,q=0} - STARTED
     |   +~ org.eclipse.jetty.util.thread.ScheduledExecutorScheduler@7c8b3bd8 - STARTED
     |   +- org.eclipse.jetty.io.ArrayByteBufferPool@bba4cd7
     |   += HttpConnectionFactory@33192410{HTTP/1.1} - STARTED
     |   |   +- HttpConfiguration@3636d04a{32768,8192/8192,https://:5809,[]}
     |   |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   += org.eclipse.jetty.server.ServerConnector$ServerConnectorManager@3b195903 - STARTED
     |   |   +- org.eclipse.jetty.io.SelectorManager$ManagedSelector@6436babd keys=0 selected=0 id=0
     |   |       +- org.eclipse.jetty.io.SelectorManager$ManagedSelector.select(SelectorManager.java:443)
     |   |       +- sun.nio.ch.EPollSelectorImpl@27f703ba keys=0
     |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     |   +- sun.nio.ch.ServerSocketChannelImpl[/0:0:0:0:0:0:0:0:5809]
     += org.eclipse.jetty.deploy.DeploymentManager@76bb5e95 - STARTED
     |   +~ org.eclipse.jetty.deploy.providers.WebAppProvider@3e9985a5 - STARTED
     |   +~ org.eclipse.jetty.jmx.MBeanContainer@3a55b9b
     += org.eclipse.jetty.server.session.HashSessionIdManager@434d3d4f - STARTED
     |
     +> startJarLoader@518cb416
         +- file:/usr/local/osmosix/jetty/lib/jetty-xml-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/servlet-api-3.0.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-http-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-continuation-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-server-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-security-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-servlet-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-webapp-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-deploy-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-client-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-jmx-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jsp/com.sun.el-2.2.0.v201108011116.jar
         +- file:/usr/local/osmosix/jetty/lib/jsp/javax.el-2.2.0.v201108011116.jar
         +- file:/usr/local/osmosix/jetty/lib/jsp/javax.servlet.jsp.jstl-1.2.0.v201105211821.jar
         +- file:/usr/local/osmosix/jetty/lib/jsp/javax.servlet.jsp-2.2.0.v201112011158.jar
         +- file:/usr/local/osmosix/jetty/lib/jsp/org.apache.jasper.glassfish-2.2.2.v201112011158.jar
         +- file:/usr/local/osmosix/jetty/lib/jsp/org.apache.taglibs.standard.glassfish-1.2.0.v201112081803.jar
         +- file:/usr/local/osmosix/jetty/lib/jsp/org.eclipse.jdt.core-3.7.1.jar
         +- file:/usr/local/osmosix/jetty/resources/
         +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-api-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-common-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-server-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/websocket/websocket-servlet-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-util-9.0.0.v20130308.jar
         +- file:/usr/local/osmosix/jetty/lib/jetty-io-9.0.0.v20130308.jar
         +- sun.misc.Launcher$AppClassLoader@e9576fd
             +- file:/usr/local/osmosix/jetty/start.jar
             +- sun.misc.Launcher$ExtClassLoader@76b6e385 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:40:07.343

你的`servlet-mapping`设置不好。

命名的 servlet`mvc-dispatcher`设置在`url-pattern`of `"/"`，也称为 servlet 规范默认 servlet 路径规范。Web 容器本身提供的允许它提供静态内容（如 css 和 javascript 文件）的东西。

你的`mvc-dispatcher`at`"/"`这意味着 Default Servlet 本身不能提供静态内容。

这也意味着它`org.springframework.web.servlet.DispatcherServlet`现在负责提供来自 WebApp 的所有内容。这是一个非典型的`servlet-mapping`，我怀疑这是 spring DispatcherServlet 的作用。

考虑使用基于后缀的 servlet 路径规范`"*.html"`或基于前缀的 servlet 路径规范`"/*"` （这在 Servlet 规范的第 12 节中有概述）

# python - 为什么在我遍历 pandas DataFrame 后这个函数不“接受”？

> ID：15972264
> 
> 赞同：3
> 
> 时间：2013-04-12T13:09:14.790
> 
> 标签：python, pandas

我有一个带有时间戳的温度和风速值的 DataFrame，以及一个将它们转换为“风寒”的函数。我正在使用 iterrows 在每一行上运行该函数，并希望得到一个带有漂亮“Wind Chill”列的 DataFrame。

然而，虽然它似乎可以正常工作，并且实际上至少“工作”过一次，但我似乎无法始终如一地复制它。一般来说，我觉得这是我对 DataFrames 结构的遗漏，但我希望有人能提供帮助。

```
In [28]: bigdf.head()
Out[28]: 

                           Day  Temperature  Wind Speed  Year
2003-03-01 06:00:00-05:00  1    30.27        5.27        2003
2003-03-01 07:00:00-05:00  1    30.21        4.83        2003
2003-03-01 08:00:00-05:00  1    31.81        6.09        2003
2003-03-01 09:00:00-05:00  1    34.04        6.61        2003
2003-03-01 10:00:00-05:00  1    35.31        6.97        2003 
```

所以我添加了一个“Wind Chill”列`bigdf`并预先填充了`NaN`.

```
In [29]: bigdf['Wind Chill'] = NaN 
```

然后我尝试遍历这些行，以添加实际的 Wind Chills。

```
In [30]: for row_index, row in bigdf[:5].iterrows():
    ...:     row['Wind Chill'] = windchill(row['Temperature'], row['Wind Speed'])
    ...:     print row['Wind Chill']
    ...:
24.7945889994
25.1365267133
25.934114012
28.2194307516
29.5051046953 
```

正如您所说，新值*似乎*已应用于“风寒”列。这是`windchill`功能，以防万一：

```
def windchill(temp, wind):
    if temp>50 or wind<=3:
        return temp
    else:
        return 35.74 + 0.6215*temp - 35.75*wind**0.16 + 0.4275*temp*wind**0.16 
```

但是，当我再次查看 DataFrame 时，NaN 仍然存在：

```
In [31]: bigdf.head()
Out[31]: 

                           Day  Temperature  Wind Speed  Year  Wind Chill
2003-03-01 06:00:00-05:00  1    30.27        5.27        2003  NaN
2003-03-01 07:00:00-05:00  1    30.21        4.83        2003  NaN
2003-03-01 08:00:00-05:00  1    31.81        6.09        2003  NaN
2003-03-01 09:00:00-05:00  1    34.04        6.61        2003  NaN
2003-03-01 10:00:00-05:00  1    35.31        6.97        2003  NaN 
```

更奇怪的是它**已经**工作了一两次，我不知道我做了什么不同的事情。

我必须承认我对 pandas 的内部工作不是特别熟悉，并且对索引等感到困惑，所以我觉得我可能在这里遗漏了一些非常基本的东西（或者很难做到这一点）。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T13:24:57.883

您可以使用它[`apply`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html)来执行此操作：

```
In [11]: df.apply(lambda row: windchill(row['Temperature'], row['Wind Speed']),
                 axis=1)
Out[11]:
2003-03-01 06:00:00-05:00    24.794589
2003-03-01 07:00:00-05:00    25.136527
2003-03-01 08:00:00-05:00    25.934114
2003-03-01 09:00:00-05:00    28.219431
2003-03-01 10:00:00-05:00    29.505105

In [12]: df['Wind Chill'] = df.apply(lambda row: windchill(row['Temperature'], row['Wind Speed']),
                                    axis=1)

In [13]: df
Out[13]:
                           Day  Temperature  Wind Speed  Year  Wind Chill
2003-03-01 06:00:00-05:00    1        30.27        5.27  2003   24.794589
2003-03-01 07:00:00-05:00    1        30.21        4.83  2003   25.136527
2003-03-01 08:00:00-05:00    1        31.81        6.09  2003   25.934114
2003-03-01 09:00:00-05:00    1        34.04        6.61  2003   28.219431
2003-03-01 10:00:00-05:00    1        35.31        6.97  2003   29.505105 
```

.

为了扩展您感到困惑的原因，我认为它源于行变量是**[*副本*而不是](http://pandas.pydata.org/pandas-docs/dev/indexing.html#returning-a-view-versus-a-copy)*df[*视图*](http://pandas.pydata.org/pandas-docs/dev/indexing.html#returning-a-view-versus-a-copy)****的事实，因此更改不会传播：*

 *```
In [21]: for _, row in df.iterrows(): row['Day'] = 2 
```

我们看到它正在**成功地对**变量进行更改`row`：

```
In [22]: row
Out[22]:
Day               2.00
Temperature      35.31
Wind Speed        6.97
Year           2003.00
Name: 2003-03-01 10:00:00-05:00 
```

但他们不会更新到 DataFrame：

```
In [23]: df
Out[23]:
                           Day  Temperature  Wind Speed  Year
2003-03-01 06:00:00-05:00    1        30.27        5.27  2003
2003-03-01 07:00:00-05:00    1        30.21        4.83  2003
2003-03-01 08:00:00-05:00    1        31.81        6.09  2003
2003-03-01 09:00:00-05:00    1        34.04        6.61  2003
2003-03-01 10:00:00-05:00    1        35.31        6.97  2003 
```

以下内容也`df`保持不变：

```
In [24]: row = df.ix[0]  # also a copy

In [25]: row['Day'] = 2 
```

而如果我们确实采取了**看法**：（我们会看到*变化* `df`。）

```
In [26]: row = df.ix[2:3]  # this one's a view

In [27]: row['Day'] = 3 
```

请参阅[返回视图与副本（在文档中）](http://pandas.pydata.org/pandas-docs/dev/indexing.html#returning-a-view-versus-a-copy)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:23:46.357

试试看：

```
bigdf['Wind Chill'] = bigdf.apply(lambda x: windchill(x['Temperature'], x['Wind Speed']), axis=1) 
```

`windchill`使用您的简单函数一次为整个 DataFrame 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:24:02.473

我会说你不需要任何显式循环。以下希望能做你想要的

```
bigdf = pd.DataFrame({'Temperature': [30.27, 30.21, 31.81], 'Wind Speed': [5.27, 4.83, 6.09]})

def windchill(temp, wind):
    "compute the wind chill given two pandas series temp and wind"
    tomodify = (temp<=50) & (wind>3) #check which values need to be modified
    t = temp.copy()  #create a new series
    # change only the values that need modification
    t[tomodify] = 35.74 + 0.6215*temp[tomodify] - 35.75*wind[tomodify]**0.16 +
        0.4275*temp[tomodify]*wind[tomodify]**0.16
    return t

bigdf['Wind Chill'] = windchill(bigdf['Temperature'], bigdf['Wind Speed'])

bigdf

   Temperature  Wind Speed  Wind Chill
0        30.27        5.27   24.794589
1        30.21        4.83   25.136527
2        31.81        6.09   25.934114 
```

ps：这种实现`windchill`也适用于 numpy 数组。*

# makefile - 使用make打包目录中的文件

> ID：15972275
> 
> 赞同：0
> 
> 时间：2013-04-12T13:09:40.203
> 
> 标签：makefile, gnu-make

在现有项目中，我正在使用`make`. 我正在尝试重写 make，因此它不必在我的每次更改时都清除所有内容。我有这样的目标：

```
device1pack1.pack: images/device1/pack1/*.png packer
    packer -o device1pack1.pack -i images/device1/pack1/*.png 
```

问题是，图像没有改变。我只是将一些图像放入或删除它们，因此它们的修改日期通常很旧，因此 make target 不会重建。唯一改变的是修改日期`images/device1/pack1`。但那是目录。如何制作它，所以当我删除或放入文件时，make 会认为这是过时的目标并重建它？

PS 我有很多这样的目标（大约 800 个）和大约 30 个带有图像的文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:13:10.677

您可以将目录列为先决条件。然后，只要目录 time-last-modified 更改（每次在目录中添加、删除或重命名文件时都会发生这种情况），目标就会运行。

# xml - 扩展或重新定义 XSD complexType

> ID：15972281
> 
> 赞同：2
> 
> 时间：2013-04-12T13:09:51.647
> 
> 标签：xml, xsd, marshalling, jaxb2, unmarshalling

我尝试扩展[sitemap.xsd](http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd)：我想向 tUrl complexType 添加一个新元素（称为“crawl”）。

所以我创建了一个 sitemap-extended.xsd（我重新定义了 sitemap.xsd 并扩展了 tUrl）。：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema 
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.sitemaps.org/schemas/sitemap/0.9" 
xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
elementFormDefault="qualified">

<xsd:redefine schemaLocation="sitemap.xsd">
    <xsd:complexType name="tUrl">
        <xsd:complexContent mixed="false">
            <xsd:extension base="tUrl">
                <xsd:sequence>
                    <xsd:element name="crawl" type="xsd:string" maxOccurs="1" />
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
</xsd:redefine>
</xsd:schema> 
```

这是有效的，但生成的 XML 无效（例如，由于未知实体 - 抓取，googlebot 将无法验证此 XML）。所以我认为我应该使用不同的命名空间来实现这一点，但我没有找到任何解决方案。

我希望能够编组/解组这种 XML：

```
<?xml version='1.0' encoding='UTF-8'?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
 xmlns:ext="http://www.mycompany.com/schema/myns"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
   http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd
   http://www.mycompany.com/schema/myns http://www.mycompany.com/schema/myns/sitemap.xsd">
   <url>
     <loc>...</loc>
     <ext:crawl>...</ext:crawl>
      ...
   </url>
  </urlset> 
```

任何的想法 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:44:12.700

这里有几个问题。

您修改后的 XSD 描述了无法通过**sitemap.xsd**验证的 XML，因为您从`http://www.sitemaps.org/schemas/sitemap/0.9`- 添加内容是不允许的。

![在此处输入图像描述](https://i.stack.imgur.com/qnDB5.png)

正确的方法是移动`crawl`到另一个命名空间，然后引用它。

扩展 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="crawl" type="xsd:string"/>
</xsd:schema> 
```

修改重新定义：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSR Module (http://www.paschidev.com)-->
<xsd:schema xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:ext="http://tempuri.org/XMLSchema.xsd" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:redefine schemaLocation="../Standards/sitemap/sitemap.xsd">
    <xsd:complexType name="tUrl">
      <xsd:complexContent>
        <xsd:restriction base="tUrl">
          <xsd:sequence>
            <xsd:element name="loc" type="tLoc"/>
            <xsd:element name="lastmod" type="tLastmod" minOccurs="0"/>
            <xsd:element name="changefreq" type="tChangeFreq" minOccurs="0"/>
            <xsd:element name="priority" type="tPriority" minOccurs="0"/>
            <xsd:element ref="ext:crawl"/>
        </xsd:sequence>
        </xsd:restriction>
      </xsd:complexContent>
    </xsd:complexType>
  </xsd:redefine>
  <xsd:import namespace="http://tempuri.org/XMLSchema.xsd" schemaLocation="extending-or-redefining-xsd-complextype-ext.xsd"/>   
</xsd:schema> 
```

现在，即使这在技术上是正确的，不加载 的实体也`Extension XSD`应该无法验证包含的 XML，`ext:crawl`因为它`sitemap.xsd`使用`processContents="strict"`了元素通配符。

我没有尝试过，但您可以通过 xsi:schemaLocation 提供您的扩展 XSD 的 URL（如果看到 google 的验证器遵循外部模式位置提示，我会感到惊讶）。

如果您计划将修改后的 XSD 与 JAXB 一起使用，并希望现在在您的类定义中看到一个用于爬网的字段，您可能会感到惊讶（上次我检查时，通过限制重新定义至少不起作用）。

您仍然可以使用 ext:crawl 取消/编组 XML，您只需使用 XmlNode 手动执行此操作。

# javascript - 使用 Require.js 使 Backbone.js 模块化

> ID：15972284
> 
> 赞同：1
> 
> 时间：2013-04-12T13:09:55.200
> 
> 标签：javascript, backbone.js, requirejs

我正在尝试通过 Backbone.js 使我的 Backbone.js 组件、模型和视图模块化。但是，每当我尝试使用`require()`它时，它都会返回：

```
function (){return i.apply(this,arguments)} 
```

而不是我需要的 Backbone 魔法。

我已经像这样设置了我的 Require.js：

```
// Configure require.js
require.config(
    {
        paths: {
            "data": "config"
        ,   "jquery": "libs/jquery.min"
        ,   "underscore": "libs/underscore-min"
        ,   "backbone": "libs/backbone-min"
        ,   "events": "collections/events"
        ,   "eventModel": "models/eventModel"
        ,   "eventView": "views/eventView"
        }
    ,   shim: {
            underscore: {
                exports: '_'
            }
        ,   jquery: {
                exports: '$'
            }
        ,   backbone: {
                deps: ["underscore"]
            ,   exports: "Backbone"
            }
        }
    }
);

// Initiate app
require(
    [
        "data"
    ,   "jquery"
    ,   "underscore"
    ,   "backbone"
    ,   "events"
    ,   "eventModel"
    ,   "eventView"
    ], function(data, $, _, Backbone, Events, EventModel, EventView) {
        console.log(Events);
        _.each(["data/general.xml"], function(URI) {
            var general = new Events({url: URI});
        });
    }
); 
```

这是我的 collections/events.js：

```
define(
    [
        "backbone"
    ,   "eventModel"
    ]
,   function(Backbone, EventModel) {
        "use strict";
        var Events = Backbone.Collection.extend({
            model: EventModel

        ,   parse: function(data) {
                var parsed = [];
                $(data).find('Event').each(function(index) {
                    parsed.push({
                        title: $(this).find('title').text(),
                        date: $(this).find('date').text(),
                        content: $(this).find('content').text()
                    });
                });
                return parsed;
            }

        ,   fetch: function(options) {
                options = options || {};
                options.dataType = "xml";
                Backbone.Collection.prototype.fetch.call(this, options);
            }
        });

        return Events;
    }
); 
```

我希望这能归还`Events`收藏品，但显然不是。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:12:26.903

一切似乎都很好。你看到什么了：

```
function (){return i.apply(this,arguments)} 
```

是你的类的构造函数。不要理会它。相反，尝试记录`new myClass`.

**编辑：**
您看不到任何方法，因为它们存储在您的类的*原型中。*被调用的*i*函数是“真正的”构造函数（命名为*i*因为它已被缩小）。

# javascript - 使用 jquery 对具有子项的 HTML 表进行排序

> ID：15972285
> 
> 赞同：0
> 
> 时间：2013-04-12T13:09:57.280
> 
> 标签：javascript, jquery, sorting, html-table, hierarchy

我有以下表结构。我想通过拖放对其进行排序。请注意，我希望根页面有子页面。我让它与具有层次结构的列表一起使用，但这使得旧版浏览器的样式变得不可能。

```
<table>
   <tr data-id="1">
       <td>Page name</td>
       <td>Other column</td>
   </tr>
   <tr data-id="2">
       <td>Page name</td>
       <td>Other column</td>
   </tr>
   <tr class="children" data-parent="2">
       <table>
            <tr data-id="3">
                <td>Page name</td>
                <td>Other column</td>
            </tr>
            <tr data-id="4">
                <td>Page name</td>
                <td>Other column</td>
            </tr>
        </table>
   </tr>
</table> 
```

# image - chrome浮动图像无法正确显示

> ID：15972304
> 
> 赞同：0
> 
> 时间：2013-04-12T13:11:06.067
> 
> 标签：image, internet-explorer, google-chrome, html

我正在尝试为我的乐队网站创建一个“新闻”控件（facebook 样式），但我在 google chrome 上遇到了问题。

这是控件（我将在自定义 webcontrol 类中编写它以使用 c# asp.net 以编程方式添加控件）

```
<div runat="server" id="Div1" style="width:900px; margin-bottom:10px;height:auto">
<img runat="server" id="Img1" src="" alt="" style="width:150px;height:250px;float:left"/>
<h1 runat="server" id="H1" style="color:Silver;margin-bottom:0px">Title</h1>
<div runat="server" id="Div2" style="color:Silver" align="right">date</div>
<div runat="server" id="Div3" style="color:Silver;word-wrap:break-word;float:right;width:740px">body body body body body body body body body body body body body body body 
body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body 
body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body 
body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body 
</div>
</div> 
```

我的问题是：我用 IE 得到了我想要的东西，但是如果我尝试在 google chrome 中打开，我会得到这些图像（添加多个新闻）一个挨一个浮​​动，严重移动所有文本（对不起，我可以' t张贴图片）我该怎么办？

谢谢你，对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:25:15.990

问题是外部 div 并没有占用它的所有内容。为此，您可以使用`clear:both`or`float:left`或`overflow:hidden`外部 div 元素。

# mobile - 调试本地移动站点

> ID：15972305
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:11:06.360
> 
> 标签：mobile, web

我正在为 Android 和 iOS 开发一个移动网站，我想看看它在 Android Emulator 和 iOS 等效产品中的外观。我的网站仍然只是本地的，所以我不能简单地部署它并转到手机的浏览器。我正在使用 WAMP。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:16:30.193

您可以使用 PhoneGap 并在其中部署您的 HTML 文件以查看它的外观。虽然它不会像移动网络浏览器那样在顶部有 url 栏，但它可以让您很好地了解性能以及您使用移动设备获得的所有怪癖。

这是 PhoneGap 的入门公会。

[http://phonegap.com/developer/](http://phonegap.com/developer/)

# php - PHP 和 C++ 用于 UTF-8 编码单元逆序中的汉字

> ID：15972306
> 
> 赞同：0
> 
> 时间：2013-04-12T13:11:07.523
> 
> 标签：php, c++, c, utf-8, cjk

中文单词你好的 unicode 码位分别为 4F60 、 597D 。我从这个工具得到的[http://rishida.net/tools/conversion/](http://rishida.net/tools/conversion/)

下面的控制台应用程序会将你好的十六进制字节序列打印为 60:4F:7D:59 。如您所见，它与每个字符的 unicode 代码点的顺序相反。先60后4F，而不是4F后60。为什么会这样？谁是正确的？工具或控制台应用程序？或两者 ？

```
void printHex (char * buf, char *filename)
{
    FILE *fp;
    fp=fopen(filename, "w");

    if(fp == NULL) return;

    int len2 = sizeof(buf);
    int i;
    char store[10];
    for (i = 0; i < sizeof(buf); i++)
    {
        if (i > 0) fprintf(fp,":");
        //sprintf(store, );

        fprintf(fp,"%02X", buf[i]);
    }
    fprintf(fp,"\n");
    fclose(fp);
}

int main(int argc, char* argv[])
{
    char * str3 = (char*)(L"你好");
    printHex( str3, "C:\\Users\\william\\Desktop\\My Document\\test2.txt");

        return 0;
} 
```

当我在 PHP 中使用这个 mb_convert_encoding 函数时。

```
echo bin2hex(mb_convert_encoding("你好", "UTF-16", "UTF-8")); //result : 4f60 597d
echo bin2hex(mb_convert_encoding("恏絙", "UTF-16", "UTF-8")); //result : 604f 7d59 
```

PHP的结果与在线工具相同，但是当我使用这种编码在打印机上使用php_printer.dll函数打印你好时，打印输出变成恏絙，反之亦然。但是 C++ 应用程序可以正确打印出来。PHP 可能有什么问题？和解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:18:00.167

他们都是正确的。区别在于字节序。

我的猜测是 UTF-16 默认情况下会将字符串输出为 little-endian。您可以改用 UTF-16BE 来强制执行大端顺序。

那个，或者完全相反；）

请注意，这些不是 unicode 代码点，而是 UTF-16BE/LE/UCS-2 字节表示。代码点是一组不同的数字。

**编辑**：使用`UTF-16LE`in`mb_convert_encoding`会给你反向表示。

# xcode - Xcode 不是为 iPhone 模拟器构建的

> ID：15972308
> 
> 赞同：2
> 
> 时间：2013-04-12T13:11:10.407
> 
> 标签：xcode, xcode4, ios-simulator, xcode4.5

我正在使用 Xcode 4.5 开发一个 iOS 项目，并且我有一个包含一些旧库的工作区，我需要将它们作为依赖项链接到我的项目。在构建它之前我必须经历相当多的困难，现在它终于为我的设备构建了，但不是为模拟器构建的。问题是，我收到一堆错误，如下所示（都与 UIKit 框架有关）：

```
- error: 'UIResponder' is unavailable: not available on Mac OS X 
```

然后它只是说`too many errors emitted, stopping now`。看起来它正在尝试为 Mac OS X 而不是 iOS 构建项目，我不知道为什么。

我对 Xcode 4.5 开发很陌生，可能只是我错过了一些非常简单的东西，但我似乎无法在任何地方找到解决方案！如何让 Xcode 相信 iPhone 模拟器不是 Mac OS X？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:31:48.283

确保部署目标是最新的 (6.1)，基础 SDK 是 iOS 6.1，目标设备系列是 iPhone。所有这些选项都可以在项目的构建设置选项卡下找到。![在此处输入图像描述](https://i.stack.imgur.com/EaFPH.png)

# javascript - CKEditor 在动态创建的 p 元素上

> ID：15972315
> 
> 赞同：0
> 
> 时间：2013-04-12T13:11:40.800
> 
> 标签：javascript, ckeditor

我正在尝试动态添加 p 元素并使用 CKEditor 使它们可编辑。但是，当我尝试以下代码时，编辑器不会出现。

```
 var div = document.getElementById(divId);  
 div.innerHTML = '<p id="vbText'+ divId +'">Example text</p>';
 document.getElementById('vbText' + divId).contentEditable = "true";        
 CKEDITOR.inline('vbText' + divId); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-06T10:57:28.000

我的解决方案，它对我有用：

```
var node = document.getElementById('editor'),
div = document.createElement("div"),
h2 = document.createElement("h2");
h2.textContent = "Text";
div.appendChild(h2);
div.setAttribute('contenteditable','true');
var editor = CKEDITOR.inline(div, config);
node.appendChild(div); 
```

祝你好运！

# asp.net - Cookie 似乎永远不存在

> ID：15972322
> 
> 赞同：0
> 
> 时间：2013-04-12T13:11:58.067
> 
> 标签：asp.net, cookies

我面临一个关于 cookie 的奇怪问题：我试图在用户第一次登录应用程序时使用用户 ID 设置一个 cookie，下一次，如果 cookie 存在，则不需要再次进行用户身份验证。

为此，我使用以下代码：

*   设置 cookie：

    ```
    HttpCookie userCookie = new HttpCookie("UserCookie");
    userCookie.Value = UserId.ToString();
    userCookie.Expires = DateTime.Now.AddHours(1);
    System.Web.HttpContext.Current.Response.Cookies.Add(userCookie); 
    ```

*   获取 cookie：

    ```
    HttpCookie UserCookie = System.Web.HttpContext.Current.Request.Cookies["UserCookie"];
    if (UserCookie != null)
    {
          // redirect the user to another screen inside the application
    } 
    ```

奇怪的是，我的 cookie 似乎不存在，并且一直提示用户登录屏幕。当我尝试使用调试时，在我看来 cookie 不为空，但它有一个空字符串值。我能做些什么呢？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:42:14.560

您是否尝试在设置 cookie 的相同代码中获取 cookie？如果是这样，cookie 将不存在。页面交付后，Cookie 在用户浏览器上设置。

另外，您能否确认`UserID.ToString()`它实际上不是一个空字符串..？

要正确测试，请在页面 A 上设置 cookie，然后重定向到页面 B 并在此处获取 cookie。

# asp.net - ReadAsMultipartAsync 引发 System.ArgumentException

> ID：15972326
> 
> 赞同：2
> 
> 时间：2013-04-12T13:12:12.193
> 
> 标签：asp.net

我曾尝试在此处和 Google 上搜索此问题的答案，但尚未找到。我正在使用我发现的相当标准的 .NET 4.0 上传到 Web API 服务。这是代码：

```
 public HttpResponseMessage Post()
    {
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }
        StringBuilder sb = new StringBuilder();

        string root = HttpContext.Current.Server.MapPath("~/App_Data");
        var provider = new MyMultipartFormDataStreamProvider(root);

        var task = Request.Content.ReadAsMultipartAsync(provider).ContinueWith<HttpResponseMessage>(t =>
        {
            if (t.IsFaulted || t.IsCanceled)
            {
                Request.CreateErrorResponse(HttpStatusCode.InternalServerError, t.Exception);
            }

            // This will give me the form field data
            foreach (var key in provider.FormData.AllKeys)
            {
                foreach (var val in provider.FormData.GetValues(key))
                {
                    sb.Append(string.Format("{0}: {1}", key, val));
                }
            }

            // This will give me any file upload data
            foreach (MultipartFileData file in provider.FileData)
            {
                sb.Append(file.Headers.ContentDisposition.FileName);
                sb.Append("Server file path: " + file.LocalFileName);
            }
            return new HttpResponseMessage()
            {
                Content = new StringContent(sb.ToString())
            };
        });
        return Request.CreateResponse(HttpStatusCode.OK);
    } 
```

当我使用输入 type=file 创建一个非常基本的表单并提交它时，我收到超过 800Kb 文件的异常。这是一个例外：

```
System.ArgumentException was unhandled by user code
  HResult=-2147024809
  Message=Value does not fall within the expected range.
  Source=mscorlib
  StackTrace:
       at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)
       at System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(Int32 errorCode)
       at System.Web.Hosting.IIS7WorkerRequest.GetServerVariableInternal(String name)
       at System.Web.Hosting.IIS7WorkerRequest.GetServerVariable(String name)
       at System.Web.Hosting.IIS7WorkerRequest.GetRemoteAddress()
       at System.Web.HttpWorkerRequest.IsLocal()
       at System.Web.Configuration.CustomErrorsSection.CustomErrorsEnabled(HttpRequest request)
       at System.Web.HttpContextWrapper.get_IsCustomErrorEnabled()
       at System.Web.Http.WebHost.HttpControllerHandler.<>c__DisplayClassa.<ConvertRequest>b__9()
       at System.Lazy`1.CreateValue()
       at System.Lazy`1.LazyInitValue()
       at System.Lazy`1.get_Value()
       at System.Web.Http.HttpConfiguration.ShouldIncludeErrorDetail(HttpRequestMessage request)
       at System.Net.Http.HttpRequestMessageExtensions.CreateErrorResponse(HttpRequestMessage request, HttpStatusCode statusCode, Func`2 errorCreator)
       at System.Net.Http.HttpRequestMessageExtensions.CreateErrorResponse(HttpRequestMessage request, HttpStatusCode statusCode, Exception exception)
       at aocform.Controllers.ValuesController.<>c__DisplayClass2.<Post>b__1(Task`1 t) in c:\Users\fred_malone\Documents\Visual Studio 2012\Projects\aocform\aocform\Controllers\ValuesController.cs:line 30
       at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
       at System.Threading.Tasks.Task.Execute()
  InnerException: 
```

我检查了 App_Data 文件夹，并在那里看到了文件的一部分。这个小部分也不总是相同的大小，就像它可能在某个大小处切断一样。

我已经将 the`maxRequestLength`和 the调整`maxAllowedContentLength`为大数字，但没有成功。

此消息是什么意思，我应该如何解决它？

谢谢。

# c++ - Lint warnings when using std::unary_function

> ID：15972328
> 
> 赞同：0
> 
> 时间：2013-04-12T13:12:18.687
> 
> 标签：c++, functor, lint

when checking a functor which is derived from std::unary_function as follows

```
struct IsInterestingMsg : public std::unary_function<string,bool> 
```

Lint ejects the following info/warnings:

```
1790: Base class 'std::unary_function<std::basic_string<char>,bool>' has no non-destructor virtual functions 
```

and

```
Warning 1509: base class destructor for class 'unary_function' is not virtual 
```

According to **Scott Meyers**, functor classes should be made adaptable by deriving from `unary/binary_function` which are basically *only a collection of typedefs*, thus, they are no classes that *need* any constructor / destructor. Therefore, the lint warnings are per se correct.

Does anybody know how to suppress these warnings *globally* and only for all usage of `unary_function` etc.? I want to avoid writing an `-e1509` every time it's used.

Info #1790 can be suppressed by using private inheritance instead of public, but warning #1509 remains.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:51:09.157

Sigh, lint should have learned that... Anyhow, what you gain by deriving from unary_function is a few nested typedefs, see [http://www.cplusplus.com/reference/functional/unary_function/](http://www.cplusplus.com/reference/functional/unary_function/). You can create these yourself instead of inheriting them.

Another way would be to conditionally declare a virtual destructor in unary_function when lint is running. I personally wouldn't compromise perfectly valid code for the sake of lint though, neither in one way nor the other.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:40:29.960

The following suppression works for me:

```
/*lint -esym(1790, "std::unary_function<*,*>") -esym(1509, unary_function) */ 
```

There are a few pitfalls here:

*   Note the quotes for the argument to esym, so Lint doesn't interpret the comma in the template parameter list
*   Message 1790 is parameterized on a "Symbol" - thus you have to use the full namespace when refering to it
*   Message 1509 on the other hand is parameterized on a "Name" so you're not supposed to give the complete namespace with it

As for when to use the namespace and when to omit it, just use the string that is quoted in Lint's error message, and it should be fine. The downside is that there doesn't seem to be a way to disable 1509 for std::unary_function, but not for ns::unary_function.

# angularjs - 关闭电子邮件验证

> ID：15972333
> 
> 赞同：5
> 
> 时间：2013-04-12T13:12:34.953
> 
> 标签：angularjs

我有以下 html/angular

```
<input type="email" data-ng-model="myEmailVar" />
{{ myEmailVar }} 
```

现在的问题是 Angular 有一个用于电子邮件的自动验证器，除非它正确通过，否则它不会设置 myEmailVar。因此，例如，如果我输入“名称”，则不会设置 myEmailVar。你可以在这里看到它：http: [//jsfiddle.net/bFVsW/](http://jsfiddle.net/bFVsW/)（输入单词test，然后输入test@test.test）

现在，我想运行自己的验证，但也支持移动。如果我使用 type="email" 某些移动浏览器会切换键盘布局以更轻松地输入地址（例如 @ 符号）。所以我无法将其切换为 type="text"。我想做的是覆盖角度电子邮件验证器，或者完全关闭它，因为我将处理我自己的验证。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-25T08:32:05.907

在 HTML5 上，您可以使用表单的属性 novalidate 来禁用浏览器的验证：

```
<form novalidate>
    <input type="email"/>
</form> 
```

或者你可以使用`type="text"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-10T23:04:07.090

对于仍在寻找答案的任何人，我在此堆栈溢出答案中找到了答案：**[如何禁用 angulars type=email 验证？](https://stackoverflow.com/questions/14407546/how-to-disable-angulars-type-email-validation/18781558#18781558)**

本质上，您可以添加自己的自定义指令来禁用默认的角度验证器。

```
angular.module('app').directive('disableValidators', function() {
    return {
        require: 'ngModel',
        link: function(scope, elm, attrs, ctrl){
            var validator = function(value){
                return value;
            };

            // replace other validators with our own
            ctrl.$parsers = [validator];
            ctrl.$formatters = [validator];
        }
    }
}); 
```

同一线程中的另一个答案提供了更详细的答案：**[如何禁用 angulars type=email 验证？](https://stackoverflow.com/questions/14407546/how-to-disable-angulars-type-email-validation/19527142#19527142)**

编辑：这个解决方案过去对我有用，但当我从 angular 1.2.X 升级到 1.3.X 时不再有效。但是，它可以通过一些小的调整来工作：

```
angular.module('app').directive('disableValidators', function() {
    return {
        require: 'ngModel',
        link: function(scope, elm, attrs, ctrl) {
            var validator = function(value) {
                return value;
            };

            // replace the email validators
            ctrl.$validators = {email: validator};
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T17:26:00.127

更新：这不起作用......至少不是你想要的方式。将 ng-non-bindable 添加到表单或任何输入都会中断所有绑定。因此，输入中的 ng-model 将不再起作用。对不起 ....

ng-non-bindable 是这个问题的答案。在这里查看我的答案：

[https://stackoverflow.com/a/19387233/75644](https://stackoverflow.com/a/19387233/75644)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-08-21T12:07:08.120

简单的解决方案：使用类型初始化字段并将类型`'text'`更改为`'email'`超时。在这种情况下，angularjs 不会添加电子邮件验证器，您将拥有电子邮件键盘。

```
<input type="{{type}}" />

$scope.type = 'text';  
$timeout(function() { 
    $scope.type = 'email'; 
}); 
```

[http://jsfiddle.net/44pc5j8L/](http://jsfiddle.net/44pc5j8L/)

# c# - 对授权和未授权用户使用 ASP.NET MVC 控制器操作

> ID：15972335
> 
> 赞同：2
> 
> 时间：2013-04-12T13:12:39.650
> 
> 标签：c#, asp.net-mvc-4

我有一个 ASP.NET MVC 应用程序。这个应用程序有一个没有任何属性的控制器。这个控制器有一个相当复杂的动作。到目前为止，行动已经发生`[AllowAnonymous]`了。由于其复杂性，我想与授权和未授权用户共享此操作。如果是授权用户，我将为这个复杂的操作添加一个基本部分。

我尝试`[Authorize]`按照这篇[文章](https://stackoverflow.com/questions/15770413/share-action-with-authorized-and-unauthorized-user-in-asp-net-mvc-controller)中的建议添加。然而，无论如何，`User.Identity.IsAuthenticated`总是**假**的。我有自己的会员数据库结构。但是，我已将其绑定到这些`System.Web.Security`东西中。所以，当有人登录时，我有：

```
FormsAuthentication.SetAuthCookie(model.Username, model.RememberMe); 
```

到目前为止，这一切都很好。

如何允许授权和未授权用户访问控制器操作，同时确定用户是否被授权？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:44:18.730

Try this in your Controller/View:

```
if(Request.IsAuthenticated) 
{ 
    doAuthenticatedStuff(); 
}
else
{
    doAnonymousStuff();
} 
```

Does that help?

# c - Unable to establish connection using OpenSSL BIO interface

> ID：15972336
> 
> 赞同：0
> 
> 时间：2013-04-12T13:12:40.270
> 
> 标签：c, networking, openssl, connection

I'm debugging in VS2010\. BIO_do_connect() fails in the following code. What am I doing wrong?

(pBio is properly set up before use)

```
static const uint32_t kuSleepIntervalInMs = 50;

...
uint32_t uTimeTaken = 0;
...

BIO_set_nbio(pBio, 1);

for (;;)
{
    if (uTimeTaken > 10000)
        return ERR_CONNECTION_TIMED_OUT;

    if (BIO_do_connect(pBio) > 0)
        break;

    if (BIO_should_retry(pBio))
    {
        Sleep(kuSleepIntervalInMs);

        uTimeTaken += kuSleepIntervalInMs;

        continue;
    }

    BIO_free_all(pBio);

    return ERR_FAILED_TO_ESTABLISH_CONNECTION;
} 
```

It appears that if I increase the sleep interval (for example to 500), BIO_do_connect works fine but I'd like to know why it fails with shorter interval values.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:07:14.007

Since posting my original question, I've switched to use select() so the problem is no longer valid.

Instead of doing

```
uTimeTaken += kuSleepIntervalInMs; 
```

I'm now doing:

```
int nRet;
int fdSocket;
fd_set connectionfds;
struct timeval timeout;

BIO_set_nbio(pBio, 1);

nRet = BIO_do_connect(pBio);

if ((nRet <= 0) && !BIO_should_retry(pBio))
    // failed to establish connection.

if (BIO_get_fd(pBio, &fdSocket) <= 0)
    // failed to get fd.

if (nRet <= 0)
{
    FD_ZERO(&connectionfds);
    FD_SET(fdSocket, &connectionfds);

    timeout.tv_usec = 0;
    timeout.tv_sec = 10;

    nRet = select(fdSocket + 1, NULL, &connectionfds, NULL, &timeout);
    if (nRet == 0)
        // timeout has occurred.
} 
```

See my other [post](https://stackoverflow.com/questions/15852840/c-how-to-set-connection-timeout-and-operation-timeout-in-openssl).

# c# - 下拉列表未选择正确的索引

> ID：15972337
> 
> 赞同：1
> 
> 时间：2013-04-12T13:12:41.777
> 
> 标签：c#, asp.net, sql, html-select

我有一个数据库绑定下拉列表，它从数据库中获取其值。

当我将 ddl.SelectedItem 称为 .Text 或 .Value 时，索引不正确。

假设数据库表中的值是这样的：

```
Column1 | Column2

Dublin1 | Value1
Dublin2 | Value1
Dublin3 | Value1
London1 | Value2
London2 | Value2
London3 | Value2 
```

SQL选择查询：

```
SELECT [Column1],[Column2] FROM [Table] ORDER BY [Column1] 
```

DDL：

```
<asp:DropDownList runat="server" ID="ddl" 
 DataSourceID="SQLDataSource" DataTextField="Column1" 
 DataValueField="Column2"></asp:DropDownList> 
```

仅在 ASPX 上绑定：

```
<asp:SqlDataSource ID="SQLDataSource" runat="server" 
      ConnectionString="<%$ConnectionStrings:DatabaseConnectionString %>" 
      SelectCommand="SELECT [Column1],[Column2],FROM [Table] ORDER BY [Column1]">
</asp:SqlDataSource> 
```

因此，无论我选择 Dublin2 还是 Dublin3，当我从下拉列表中获取 Selected Item 时，它总是返回 Dublin1，与 London 值相同。

ddl 为 item.text 和 item.value 正确填充。

关于边界我需要设置什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:51:04.200

我认为下拉列表中的值必须是唯一的并且`Column2`具有重复值。您应该修改数据绑定以`Column1`同时用于文本和值：

```
<asp:DropDownList runat="server" ID="ddl" 
 DataSourceID="SQLDataSource" DataTextField="Column1" 
 DataValueField="Column1"></asp:DropDownList> 
```

然后在访问后面的代码中，您需要一个表的副本并像这样访问它以获取值：

```
Dictionary<string, string> table = //Get the table here with Column1 as keys    
table[ddl.SelectedItem.Value] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:17:40.600

您是否在 Page_Load 中检查 IsPostBack 。

```
if (!IsPostBack)
{  
    BindDropDownListddl();      
} 
```

还要为您的下拉列表设置 AutoPostBack 为 true。

```
<asp:DropDownList runat="server" ID="ddl" 
 DataSourceID="SQLDataSource" DataTextField="Column1" 
 DataValueField="Column2" AutoPostBack="true" ></asp:DropDownList> 
```

# javascript - GJS 同步读取文件

> ID：15972338
> 
> 赞同：5
> 
> 时间：2013-04-12T13:12:42.470
> 
> 标签：javascript, file-io, synchronous, gjs

我正在尝试使用 GJS，更准确地说是以同步方式读取文本文件。这是一个用于文件读取的异步函数的示例

[gio-cat.js](http://git.gnome.org/browse/gjs/tree/examples/gio-cat.js "gio-cat.js") 我发现了如何使用下一个函数继续种子：

```
function readFile(filename) {
    print(filename);
    var input_file = gio.file_new_for_path(filename);
    var fstream = input_file.read();
    var dstream = new gio.DataInputStream.c_new(fstream);
    var data = dstream.read_until("", 0);
    fstream.close();
    return data;
} 
```

但不幸的是，它不适用于 GJS。谁能帮我 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-29T15:18:44.793

GLib 有帮助函数[GLib.file_get_contents(String fileName)](https://people.gnome.org/~gcampagna/docs/GLib-2.0/GLib.file_get_contents.html)来同步读取文件：

```
const GLib = imports.gi.GLib;
//...
let fileContents = String(GLib.file_get_contents("/path/to/yourFile")[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:09:45.530

当我使用 GJS 开发 Cinnamon 小程序时，我曾经使用该`get_file_contents_utf8_sync`函数来读取文本文件：

```
const Cinnamon = imports.gi.Cinnamon;

let fileContent = Cinnamon.get_file_contents_utf8_sync("file path"); 
```

如果您安装了 Cinnamon 并且您同意使用它，它会回答您的问题。
否则，这里是`get_file_contents_utf8_sync`函数的 C 代码`cinnamon-util.c`，希望对您有所帮助：

```
char * cinnamon_get_file_contents_utf8_sync (const char *path, GError **error)
{
  char *contents;
  gsize len;
  if (!g_file_get_contents (path, &contents, &len, error))
    return NULL;
  if (!g_utf8_validate (contents, len, NULL))
    {
      g_free (contents);
      g_set_error (error,
                   G_IO_ERROR,
                   G_IO_ERROR_FAILED,
                   "File %s contains invalid UTF-8",
                   path);
      return NULL;
    }
  return contents;
} 
```

[肉桂源代码](https://github.com/linuxmint/Cinnamon/tree/master/src)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T19:17:52.177

这是一个仅适用于 Gio 的解决方案。

```
function readFile(filename) {
    let input_file = Gio.file_new_for_path(filename);
    let size = input_file.query_info(
        "standard::size",
        Gio.FileQueryInfoFlags.NONE,
        null).get_size();
    let stream = input_file.open_readwrite(null).get_input_stream();
    let data = stream.read_bytes(size, null).get_data();
    stream.close(null);
    return data;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T10:34:39.410

尝试更换

```
new gio.DataInputStream.c_new(fstream); 
```

和

```
gio.DataInputStream.new(fstream); 
```

它对我有用

# php - magento cron 作业和 cron_scheduler 表

> ID：15972343
> 
> 赞同：6
> 
> 时间：2013-04-12T13:12:54.383
> 
> 标签：php, xml, magento, cron

我制作了在 csv 文件中导出产品的 magento 模块。现在我想每天在 23.55 运行 cronjob。我设置了 config.xml，因为它是用[magento cronjob wiki](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job)编写的。

我的代码：

```
<crontab>
        <jobs>
            <gcompany_runprofilescronjob>
                <schedule>
                    <cron_expr>55 23 * * *</cron_expr>
                </schedule>
                <run>
                    <model>export/export_csv::runprofilescronjob</model>
                </run>
            </gcompany_runprofilescronjob>
        </jobs>
    </crontab> 
```

我还在服务器上设置了 cronjob。当 cronjob 运行时，magento 中的所有 cronjobs 都存储在数据库表 cron_schedule 中，但不是我的 gcompany_runprofilescronjob。如果我设置不同的间隔，例如：

```
<cron_expr>*/1 * * * *</cron_expr> 
```

我的 cronjob 是写在数据库中的，但是每分钟都在执行，这是我不想要的……我希望我的函数每天在 23.55 执行。有什么建议我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-14T21:57:38.653

虽然这是一个非常古老的问题，但没有发布正确的答案，所以让我把这个留给下一个人。

Magento 的`cron_schedule`表只填充了计划*在不久的将来*运行的 cron 作业。您没有在表中看到您的 cron 作业的原因是它每天只运行一次，恰好在 23:55。Magento 将`cron_schedule`在 23:45 左右将此 cron 作业添加到表中，具体取决于您的服务器 cron 作业配置和 Magento 在`System > Configuration > System > Cron`. 记下`Generate Schedules Every`和`Schedule Ahead for`设置，它们定义了 Magento 生成时间表的频率和距离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T13:33:19.057

我的第一步是安装 Fabrizio Branca 的[AOE Scheduler 扩展](http://www.fabrizio-branca.de/magento-cron-scheduler.html)。Fabrizio 的扩展有一个“列表视图”功能，它将向您显示当前在 Magento 的 cron 中注册的所有 Cron 作业，以及它们计划运行的时间。它还允许您在浏览器中立即运行 cron 作业（非常适合调试 cron 作业），或安排该作业立即执行。

如果您的 cron 作业未出现在 AOE 调度程序的列表视图中，则说明 cron 作业的配置存在问题。尝试清除配置缓存以确保 Magento 将解析您的 config.xml 以获取最新更改。我假设您的 XML 节点位于 XML 文档层次结构中的适当位置，即直接在`<config>`节点下方？

如果您的 cron 作业出现在列表视图中但仍未运行，请使用“生成计划”功能重新生成 cron 计划表。还可以尝试使用 AOE 调度程序的“立即运行”功能手动运行您的 cron 作业，以检查错误或异常。

# php - 如何将以前的会话帖子值保留或存储到另一个页面？

> ID：15972344
> 
> 赞同：0
> 
> 时间：2013-04-12T13:13:00.483
> 
> 标签：php, session, shopping-cart, shopping

我有两页产品和购物车，但问题是当我发布`$_SESSION['itemcode']`到购物车页面`select query working`时，当页面重定向到产品作为`continue shopping`旧产品的新产品覆盖时？

**产品页面**

```
session_start();
if(isset($_POST['size']))
{

$_SESSION['pid']= implode (",",$_POST['pid']);
$_SESSION['wid2']=$_POST['wid'];
$_SESSION['itemcode3']=$_POST['itemcode'];
if($_REQUEST['command']=='add' && $_REQUEST['id']){
$id=$_REQUEST['id'];
addtocart($id,1);
header('location:shoppingcart.php');
exit();
}

<input type="button" class="button1" name="check" value="Add To Cart" 
 onclick="addtocart(<?php echo $row3['id'];?>);" />

$length= count($_POST['product']);
for($i=0; $i<$length; $i++)
{
$size=$_POST['size'];

$query2=mysql_query("INSERT INTO mywishlist VALUES 
('','$id','".$_SESSION['id']."','".$_SESSION['email']."','".$_POST['itemcode']  
[$i]."','".$_POST['product'][$i]."','$size','".$_POST['price']
[$i]."','".$_POST['image1'][$i]."','')")
or die ("My Wish List");
} 
```

**购物车页面**

```
session_start();
$itemcode2=implode(',',$_SESSION['itemcode3']);

$querycart=mysql_query("SELECT * FROM products INNER JOIN mywishlist ON 
products.`id`=mywishlist.`pid` 
WHERE  mywishlist.itemcode='".$itemcode2."' ")
or die ("shoppingcart query"); 
while($rowcart=mysql_fetch_assoc($querycart))
{   
?>
<?php echo $rowcart['itemcode']; ?>
<?php echo $rowcart['products']; ?>
<?php echo $rowcart['qty']; ?>
<?php echo $rowcart['price']; ?>

<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:17:48.100

您还需要`session_start();`在开始时调用产品页面。还要确保在将输入传递给查询之前对其进行清理

# xml - 如何在 XML 中隐藏 GtkSpinButton

> ID：15972350
> 
> 赞同：0
> 
> 时间：2013-04-12T13:13:19.587
> 
> 标签：xml, ubuntu, gtk

我正在尝试在 Ubuntu 的时间和日期 UI 上隐藏 GtkSpinButton，以便用户只能编辑时区，但根本没有成功！我可以设置标签和东西的可见性属性，它工作得很好。但是当我编辑动态旋转按钮的可见性时，用户可以编辑小时、分钟和秒，设置 False 就不起作用。有任何想法吗？我在 Ubuntu 10.04 上编辑的文件位于 /usr/share/gnome-system-tools/ui/time.ui

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:24:05.633

您不打算更改安装在磁盘上的项目的 XML 文件：UI 描述文件是应用程序逻辑的一部分，而不是配置文件。

UI描述用于生成UI元素；然后应用程序将在内部操作这些元素，因此您不能只将“可见”属性值设置为 FALSE 并希望获得最好的结果。

你想要达到的只能通过修补应用程序而不显示时间UI，重新编译它并重新打包所有内容来完成。

# javascript - 获取 sass 导入的正则表达式

> ID：15972352
> 
> 赞同：1
> 
> 时间：2013-04-12T13:13:25.150
> 
> 标签：javascript, sass

大家好，你能提供给我正则表达式来获得 sass 和 scss 风格的@imports。

我试过了

```
/@import[\s"']*([^"';\n]+)[;"']*/g 
```

但它只给了我列表的第一个@import

```
@import "mainstyle",
"header",
"typography",
"somethingelese.scss"; 
```

它给我`mainstyle`的只是其他的。请帮忙。

这是codepen上的[笔](http://codepen.io/subash/pen/koCvm)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:16:01.183

`@import`它以分号开头和结尾，所以：

```
/@import[^;]*;/gm 
```

[**演示**](http://jsbin.com/xewiwikeni/edit?js,console)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:45:12.127

Sass 已经实现了这个逻辑，所以你可以使用 Sass API 来完成，而不是自己编写，如下所示：

```
ruby -rubygems -e "require 'sass/plugin'; puts Sass::Plugin::StalenessChecker.new(Sass::Plugin.engine_options).send(:dependencies, 'my_filename.sass', Sass::Importers::Filesystem.new('.')).map(&:first).join(%Q{\n})" 
```

如果您使用的是指南针，您可以将其更改为：

```
ruby -rubygems -e "require 'sass/plugin'; require 'compass'; puts Sass::Plugin::StalenessChecker.new(Compass.sass_engine_options).send(:dependencies, 'my_filename.sass', Sass::Importers::Filesystem.new('.')).map(&:first).join(%Q{\n})" 
```

# sql-server - 从 SQL Server 导出单表数据

> ID：15972354
> 
> 赞同：3
> 
> 时间：2013-04-12T13:13:28.073
> 
> 标签：sql-server

我有一个正在处理的大型 sql server 数据库（2012 express）。其中，有大量的测试数据。现在，由于某种原因，我必须使用另一台电脑。我不想只从我正在处理的这张表中导出数据库中的所有数据。我将模式编写为一个文件（该表是在本地以前的机器上创建的），然后在新电脑上运行它。但是，我需要一种导出数据的方法。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:16:29.223

您可以安装此工具包[http://www.ssmstoolspack.com/](http://www.ssmstoolspack.com/)然后右键单击该表，在 SSMS 工具选项下，您会找到一个将表脚本写入新查询窗口的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T10:56:51.147

如果您不想使用商业产品，此[答案](https://stackoverflow.com/a/20543132/1073262)将使用 SQLMS 中内置的工具。

# mysql - 如何向 mysql 数据库添加许多约束

> ID：15972356
> 
> 赞同：2
> 
> 时间：2013-04-12T13:13:35.277
> 
> 标签：mysql, sql

我正在尝试建立一个 MySQL 数据库。最终的数据库将包括大约。200 列分布在 7 个表中。现在我遇到了一个问题，我想为大多数列添加检查约束。一些列将只有一个约束，其他列将有许多和/或受不同表的列的影响。

例如，如果年龄超过 20 岁，或者如果邮政编码由 5 个字符组成并以 1 开头，或者如果入院日期（表格入院）早于出院日期（表格出院），则只能将行添加到表格中. 举三个例子。我能想出1000多个，这是我的问题。

我想以更结构化的方式添加这些约束。具有超过 10 个约束的触发器将很复杂，除了作者之外没有人能够重建所有约束。但是，如果数据库将使用多年，许多管理员将不得不使用数据库，并且可能会添加新的或删除不必要的约束。

```
DELIMITER $$
CREATE TRIGGER `test``_before_insert` BEFORE INSERT ON `zip`
FOR EACH ROW

BEGIN
    IF NEW.zip_id < 5 THEN
        SIGNAL SQLSTATE '12345'
        SET MESSAGE_TEXT = 'check constraint 1';
    END IF;

    IF NEW.zip_id = 5 THEN
        SIGNAL SQLSTATE '12345'
        SET MESSAGE_TEXT = 'check constraint 2';
    END IF;
END $$

DELIMITER ; 
```

这就是我不想处理问题的方式。 

我的问题是，是否有一种方法可以以普通人类可读的方式声明约束（例如，每个文本文件都有一个好名称的约束）并将它们添加到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:01:05.990

不幸的是，MySQL 中的检查约束不起作用。**[您可以在这个SO question](https://stackoverflow.com/questions/2115497/check-constraint-in-mysql-is-not-working)**了解更多信息。甚至这个问题的公认答案也建议使用触发器。

当您决定使用触发器时，您就走在了正确的轨道上。但是，您有一些误解。

触发器基本上是在表上的事件上定义的。由于您有 7 个表，因此每个表至少有 7 个单独的触发器。在[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)中阅读有关 MySQL 中触发器的更多信息。

只有你自己必须想办法让代码井井有条，这样你的队友甚至你也能很好地理解它。您需要做的就是遵循整个软件行业遵循的最佳实践。有关一些提示，您可以在 dba.stackexchange.com 上参考[此处](https://dba.stackexchange.com/questions/4560/what-are-the-best-practices-for-triggers-to-maintain-a-revision-number-on-record)和[此处。](https://dba.stackexchange.com/questions/4557/policies-re-database-triggers-in-well-designed-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:45:44.873

我已经考虑过我的问题，并且对触发器中的约束检查有另一个论点和解决方案。首先，论点：我可能至少需要一个 BEFORE INSERT 和一个 BEFORE UPDATE 触发器来检查我的数据。两个触发器或多或少相同。如果约束随时间发生变化，我必须将更改提交给两个触发器，否则我的数据可能会不一致。我想到了存储过程来实现一个约束，它可以在 INSERT 和 UPDATE 触发器中调用。现在，如果我更改一个程序，它会影响两个触发器。

```
DROP TRIGGER IF EXISTS test_before_insert;
DROP PROCEDURE IF EXISTS `procedureLess5`;
DROP PROCEDURE IF EXISTS `procedureEquals5`;

DELIMITER $$

CREATE PROCEDURE `procedureLess5` (IN myInput INT)
BEGIN
    IF myInput < 5 THEN
        SIGNAL SQLSTATE '12345'
        SET MESSAGE_TEXT = 'check constraint 1';
    END IF;
END $$

CREATE PROCEDURE `procedureEquals5` (IN myInput INT)
BEGIN
    IF myInput = 5 THEN
        SIGNAL SQLSTATE '12345'
        SET MESSAGE_TEXT = 'check constraint 2';
    END IF;
END $$

CREATE TRIGGER `test_before_insert` BEFORE INSERT ON `zip`
FOR EACH ROW
BEGIN
    CALL procedureLess5(NEW.zip_id);
    CALL procedureEquals5(NEW.zip_id);
END $$

DELIMITER ; 
```

这是一个机会吗？如果我有超过 20 个调用过程，我的数据库的性能如何？

还是你想别的办法？我不固定 MySQL，PostgreSQL 也是一个机会。在 PostgreSQL 中使用 CHECK CONSTRAINS 是否更好/更快/更标准？

# javascript - for循环中未定义的javascript变量

> ID：15972360
> 
> 赞同：-3
> 
> 时间：2013-04-12T13:13:41.730
> 
> 标签：javascript, json, for-loop, undefined

我有一个 json 文件返回给我类似的东西：

```
{"id0":"58955","id1":"15614","id2":"897987"} 
```

我解析该 json，并使用例如 identifier.id1 调用这些值

我想在 for 循环中显示我的所有标识符，我尝试了这个，但它出现“未定义未定义未定义”。如果我在循环中手动将 identifier.idk 替换为 identifier.id1，它会起作用并显示 15614。我的错误在哪里？

这是我的代码

```
identifier = JSON.parse(output)

var html = '<table border="0">';
html += '<tr valign="top" ><td><b>Identifiers :</b></td>';

for (var k = 0; k < 3; k++) 
    {
        html += '<tr>';
        html += identifier.idk;
        html += '</tr>';
};

html += '</tr></table>'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T13:14:23.500

因为它正在你的对象中寻找 idk ！JavaScript 并不神奇地知道您希望将字符串“id”和整数 k 连接在一起。你需要告诉它这样做。

使用括号表示法。

```
identifier["id" + k]; 
```

现在对于您的下一个问题，您没有 tds！我认为你想要 td 而不是 tr 在你的循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:14:58.283

而不是`identifier.idk`使用`identifier["id"+k]`.

解释：

`identifier.idk``idk`在您的标识符对象中查找字面上称为的属性；属性引用的`[]`形式允许您构造一个字符串并将其用作属性名称。

作为一般性评论，最好在其中放置一个数组，而不是进行字符串操作以动态创建属性名称。

# asp.net-mvc-4 - MVC 4 Html.EditorFor 不工作

> ID：15972367
> 
> 赞同：4
> 
> 时间：2013-04-12T13:14:18.790
> 
> 标签：asp.net-mvc-4

我想使用反射显示一个编辑页面，循环遍历我的对象的所有属性并为每个属性创建正确的编辑控件。我的视图看起来足以做到这一点，我运行应用程序并且编辑控件按预期显示，但是，说我想编辑 id=4 的对象，通常我应该在页面上一次使用编辑控件来编辑这个对象对于每个属性，问题是我多次获得同一个对象，该对象在页面上重复多次，具有相同的控件和属性。我在这里错过了什么吗？

```
...
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Test</legend>
        <table>
        @{
            var props = Model.GetType().GetProperties();}
            @foreach (var prop in props)
            {
                <tr>
                    <td><div>@Html.EditorFor(model => Model, prop.GetValue(Model, null))</div></td>
                </tr>                                
            }
        </table>
    </fieldset>
}
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:21:06.767

EditorFor 助手的第二个参数根本不像你想象的那样做。您似乎试图为其提供一个值，并期望该值将显示在生成的文本框中，但这不是该参数的用途。调用此参数`additionalViewData`，顾名思义，它允许您将自定义的附加视图数据传递给编辑器模板。但是，如果您没有自定义编辑器模板来对视图数据做一些有用的事情，您就不能期望会发生这么多事情。

我建议您阅读[`following blog post`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)以更好地熟悉 ASP.NET MVC 中的模板。

但要真正回答您的问题，您似乎正在尝试编写一个自定义模板来呈现您的对象的每个属性。您可以编写一个自定义编辑器模板来完成这项工作。[`following post`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)Brad Wilson 在（查看文章末尾的“*浅潜与深潜*”部分）中说明了这个概念。

# google-maps - Google Maps 如何使用地图 lat 、 long 和 zoom 动态更新 url？

> ID：15972369
> 
> 赞同：1
> 
> 时间：2013-04-12T13:14:26.927
> 
> 标签：google-maps

怎么可以在这里完成：

[http://www.360cities.net/map#lat=-25.87899&lng=-42.45117&zoom=4](http://www.360cities.net/map#lat=-25.87899&lng=-42.45117&zoom=4)

每次我们移动和放大地图时，url 都会动态更新。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:20:58.780

这并不难，观察`bounds_changed`地图的 -event 并在它触发时检索地图属性并将它们分配给位置对象的哈希属性：

```
 google.maps.event.addListener(map, 'bounds_changed',function(){
      location.hash='lat='+this.getCenter().lat().toFixed(6)+
                    '&lng='+this.getCenter().lng().toFixed(6)+
                    '&zoom='+this.getZoom();

    }); 
```

# .net - 正则表达式将值限制为小数点后两位

> ID：15972373
> 
> 赞同：0
> 
> 时间：2013-04-12T13:14:43.240
> 
> 标签：.net, asp.net-mvc, regex

我需要一个正则表达式才能在 MVC4 中使用它进行模型验证。

正则表达式应该允许带有两个小数点的数字目前我正在使用以下表达式，但它不允许用户输入整数，例如，如果我输入 10，它仍然需要两个小数点。如果它是浮点数，我需要允许整数或最多两个小数点。

我的表达是

```
@"^\d+.\d{0,2}$" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:24:11.037

试试这个： `^\d+\.?\d{0,2}$`你需要在 . 否则你可以在那里输入任何字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:16:43.637

使用这个 :`^\d+(\.\d{0,2})?$`代替。

* * *

编辑：正如拉菲的评论所指出的，`.`也应该被转义......

# c - 对函数签名感到困惑

> ID：15972375
> 
> 赞同：0
> 
> 时间：2013-04-12T13:14:47.293
> 
> 标签：c

所以我正在尝试将 PRBoom 移植到 arm，我可以解决一个问题......

有以下代码....

```
R_DrawColumn_f R_GetDrawColumnFunc(enum column_pipeline_e type,
                               enum draw_filter_type_e filter,
                               enum draw_filter_type_e filterz) {
  R_DrawColumn_f result = drawcolumnfuncs[V_GetMode()][filterz][filter][type];
  if (result == NULL)
    I_Error("R_GetDrawColumnFunc: undefined function (%d, %d, %d)",
        type, filter, filterz);
  return result;
} 
```

哪个生产

> 04-12 12:58:45.970: E/DJNI(16943): 系统错误: R_GetDrawColumnFunc: 未定义函数 (2, 1, 0)

所以我的理解是 drawcolumnfuncs 方法正在失控。但这是我挣扎的地方，我不确定这个函数 sig 在做什么......

```
static R_DrawColumn_f drawcolumnfuncs[VID_MODEMAX][RDRAW_FILTER_MAXFILTERS][RDRAW_FILTER_MAXFILTERS][RDC_PIPELINE_MAXPIPELINES] = {
{
  {
    {NULL, NULL, NULL, NULL,},
    {R_DrawColumn8_PointUV,
     R_DrawTLColumn8_PointUV,
     R_DrawTranslatedColumn8_PointUV,
     R_DrawFuzzColumn8_PointUV,},
    {R_DrawColumn8_LinearUV,
     R_DrawTLColumn8_LinearUV,
     R_DrawTranslatedColumn8_LinearUV,
     R_DrawFuzzColumn8_LinearUV,},
    {R_DrawColumn8_RoundedUV,
     R_DrawTLColumn8_RoundedUV,
     R_DrawTranslatedColumn8_RoundedUV,
     R_DrawFuzzColumn8_RoundedUV,},
  },
... 
```

看起来它正在制作 HashMap 的 C 版本，但为什么它会返回 null 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:19:51.207

先生，这不是一个函数，只是一个数组。

它在这个数组中说，如果第二个索引为零，则它的所有内容都是 NULL。它的第二个索引是函数的第三个参数，恰好为零。

这意味着**您的函数 R_GetDrawColumnFunc 正在使用错误的参数调用**。

# android - 对于另一种类型的视图，如何获得类似 ImageView.ScaleType.CENTER_INSIDE 的东西？

> ID：15972381
> 
> 赞同：2
> 
> 时间：2013-04-12T13:14:58.507
> 
> 标签：android, view

我有一个垂直菜单，里面有几个`ToggleButton`. 菜单具有固定宽度，我希望按钮在其中等距分布。

我使用`android:layout_gravity`来创建一些按钮容器，并且我希望按钮在容器内进行缩放`ImageView.ScaleType.CENTER_INSIDE`，即使最大按钮的尺寸适合容器，保持按钮的纵横比。

我尝试将按钮的尺寸设置为`wrap_content`并将容器的重力设置为`center`，但这仅在按钮小于容器时才有效。如果它更大，则按钮适合容器尺寸并且不会保持按钮的纵横比。

我怎样才能模仿`ImageView.ScaleType.CENTER_INSIDE`我的`ToggleButton`？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="100dp"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <ToggleButton
            android:id="@+id/btn_01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/btn_01_bg"
            android:textOn=""
            android:textOff=""/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <ToggleButton
            android:id="@+id/btn_02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/btn_02_bg"
            android:textOn=""
            android:textOff=""/>
    </LinearLayout>

    <!-- more ToggleButtons -->

</LinearLayout> 
```

# bash - 从文件中删除中间有图案的部分

> ID：15972382
> 
> 赞同：0
> 
> 时间：2013-04-12T13:14:59.417
> 
> 标签：bash, sed, awk

我有许多 Icinga 实例的 .cfg 文件，我需要使用 bash 脚本自动删除对特定主机的每个引用。这是一个示例，我需要删除 node2 的主机定义：

```
define host{
    use                     nonprod-iblade
    host_name               node1
    address                 node1.mydomain.com
    alias                   88.88.88.88
    }
define host{
    use                     nonprod-iblade
    host_name               node2
    address                 node2.mydomain.com
    alias                   88.88.88.88
    }
define host{
    use                     nonprod-iblade
    host_name               node3
    address                 node3.mydomain.com
    alias                   88.88.88.88
    } 
```

我已经尝试过`awk '/define host/ {for(i=1; i<=5; i++) {getline; print}}' filename`，但这不包括该`define host`行，并且对我正在寻找的节点的引用显然排除了该主机定义块中的所有其他行。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:21:56.323

这个解决方案非常自动化：

```
$ awk '!/node2/&&$1{printf "%s}",$0}' RS='}' file
define host{
    use                     nonprod-iblade
    host_name               node1
    address                 node1.mydomain.com
    alias                   88.88.88.88
    }
define host{
    use                     nonprod-iblade
    host_name               node3
    address                 node3.mydomain.com
    alias                   88.88.88.88
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:22:17.863

这是一个古怪的`grep`解决方案

```
grep -v -P "`grep -A2 -B2 node2 [file]`" [file] 
```

由于两个 grep，这很可能是最慢的。如果您有多个条目匹配，可能会导致问题`node2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:55:39.350

```
 sed -ne '/define/,/}/H;/}/{x;/node2/\!p;s/.*//;h}' filename 
```

这会做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:42:29.273

这是另一个 sed 解决方案：

```
sed -e '/define\s*host/{:next;/}/{/host_name\s*node2/d;b;};N;b next;}' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:29:46.747

使用 sed（有点复杂），删除空行

```
$ sed '/define/{x;p;x;}' < filename | sed -e '/./{H;$!d;}' -e 'x;/node2/d' | sed '/^$/d'
define host{
    use                     nonprod-iblade
    host_name               node1
    address                 node1.mydomain.com
    alias                   88.88.88.88
    }
define host{
    use                     nonprod-iblade
    host_name               node3
    address                 node3.mydomain.com
    alias                   88.88.88.88
    } 
```

# c++ - 虚拟基类的演员

> ID：15972384
> 
> 赞同：3
> 
> 时间：2013-04-12T13:15:02.710
> 
> 标签：c++, inheritance

我知道这段代码行不通，我也知道为什么，但有其他选择吗？

```
class A
{
public:
    A(void){}
    virtual ~A(void){}
protected:
    A* parent;
    int a;
};

class B : public virtual A
{
public:
    B(void){}
    virtual ~B(void){}
protected:
    void f(){ ((B*)parent)->a; }
}; 
```

不能强制`parent`转换为`B*`, 因为`A`它是一个虚拟基类。不强制转换`parent`也会出错。我希望我不必将所有成员都公开。有人知道如何访问 A::a 吗？

**编辑**

使用朋友不起作用，因为派生自的类`B`无权访问`A::a`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:35:18.250

一些选项：

1.  `a`公开_
2.  为 -创建一个公共的 setter/getter 方法`a`-
3.  **让 B 成为 A 类的朋友**（或只是函数`f()`）

如果您只想允许 A（或特定功能）访问`A`. 另一方面，使用其他 2 个选项，您只能将该成员设为公开（但将对所有人公开）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:26:07.887

从我上面的评论中做出回答，因为我对其进行了测试并且编译得很好。

如果没有强制转换，它可能会失败，因为您试图访问 B 中 A 的受保护字段。您只需添加一个公共 getter 并将强制转换删除到 B*

```
class A
{
public:
    A(void){}
    virtual ~A(void){}
    int getA() { return a; }
protected:
    A* parent;
    int a;
};

class B : public virtual A
{
public:
    B(void){}
    virtual ~B(void){}
protected:
    void f(){ (parent)->getA(); }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:55:24.830

这有效：

```
class A {
public:
    A(void){}
    virtual ~A(void){}
protected:
    A* parent;
    int a;
    int parent_a(){ return parent->a;}
};

class B : public virtual A
{
public:
    B(void){}
    virtual ~B(void){}
protected:
    void f(){ A::parent_a(); }
}; 
```

注意：

*   `a`不会暴露在外面的世界，
*   检索到`a`的必须是正确的，因为`B`实际上继承自，因此在获取其字段之前`A`成功的动态`parent`转换 to应该返回与上面提供的解决方案相同的一个。`B``a`

现在，*为什么*这行得通？

因为一个类隐含地是它自己的朋友。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T14:48:48.287

这`dynamic_cast`就是为了。如果您不想重新设计代码，只需将 C 样式转换为`dynamic_cast`：

```
void f() { dynamic_cast<B*>(parent)->a; } 
```

要使其正常工作，`A`必须至少具有一个虚拟功能（就像这个一样）。此外，如果`parent`实际上不指向类型的对象，则强制转换将产生一个空指针`B`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T16:44:01.323

谢谢大家，提到了一些可用的可能性，比如使用朋友和为每个变量创建附加函数。这可能在某些情况下有效，但不适用于我的情况。将每个派生类添加为朋友存在的问题是，当他们想要添加一个类时，它会使库的用户友好性降低。为每个变量添加函数将为某些类添加超过一百个额外的函数。

作为我的最终解决方案，我所做的是创建副本而不是演员表。虽然它会运行一点点慢，代码将保持干净。解决速度问题。访问局部变量比访问全局变量快得多。

这是它现在的样子：

```
class A
{
public:
    A* parent;
    virtual ~A(void){}
    virtual A & operator = (const A & x)
    {
        a = x.a;
        parent = x.parent;
        return *this;
    }
protected:
    int a;
};

class B : public virtual A
{
public:
    B(void){}
    virtual ~B(void){}
    using A::operator =;
    virtual B & operator = (const B & x)
    {
        A::operator = (x);
        return *this;
    }
    void f(void)
    {
        B p;
        p = *parent;
        int x = p.a;//Allowed.
    }
}; 
```

如果您有更好的解决方案，请随时发布。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T13:41:48.990

我认为这里的问题不在于如何访问元素`a`，而在于为什么您需要在设计中使用菱形层次结构树。您应该首先退后一步，评估您是否真的需要一棵钻石树。

如果你*这样做*了，那么代替你当前的方法，提供`A`一个很好的合适的（公共）抽象接口，可以从`B`. 当您开始直接访问受父级保护的属性时，您将紧密耦合组件，从而很容易破坏您的代码，并且很难在应用程序生命周期的后期更改您的设计。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T13:22:10.647

```
class B : public virtual A
{
public:
    B(void){}
    virtual ~B(void){}
protected:
    void f(){ this->a; }
}; 
```

您可以从父类（B 的母类）访问受保护的成员。

# javafx - 进度指示器下的 JavaFX 更改文本（默认：完成）

> ID：15972387
> 
> 赞同：1
> 
> 时间：2013-04-12T13:15:22.960
> 
> 标签：javafx, javafx-2, progress-bar, javafx-8

如何在 JavaFX 的 ProgressIndicator 下更改默认文本“完成”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:20:55.033

这有点棘手，但有可能：

在**JavaFX 2.2**中是这样制作的：

```
ProgressIndicator indicator = new ProgressIndicator();
ProgressIndicatorSkin indicatorSkin = new ProgressIndicatorSkin(indicator);
final Text text = (Text) indicatorSkin.lookup(".percentage");
indicator.progressProperty().addListener(new ChangeListener<Number>() {
    @Override
    public void changed(ObservableValue<? extends Number> ov, Number t, Number newValue) {
        // If progress is 100% then show Text
        if (newValue.doubleValue() >= 1) {
            // This text replaces "Done"
            text.setText("Foo");
        }
    }
});
indicator.skinProperty().set(indicatorSkin);
indicator.setProgress(1); 
```

在**JavaFX 8**中，您必须先调用`applyCss()`，然后再进行查找，并且您不再需要皮肤：

```
ProgressIndicator indicator = new ProgressIndicator();
indicator.progressProperty().addListener(new ChangeListener<Number>() {
    @Override
    public void changed(ObservableValue<? extends Number> ov, Number t, Number newValue) {
        // If progress is 100% then show Text
        if (newValue.doubleValue() >= 1) {
            // Apply CSS so you can lookup the text
            indicator.applyCss();
            Text text = (Text) indicator.lookup(".text.percentage");
            // This text replaces "Done"
            text.setText("Foo");
        }
    }
});
indicator.setProgress(1); 
```

将文本“Foo”更改为您完成的文本，您就准备好了

我已经测试了这段代码，它应该可以正常工作。;-)

# javascript - 如何将获取的自动完成数据从 JSON API 推送到文本框？

> ID：15972388
> 
> 赞同：0
> 
> 时间：2013-04-12T13:15:25.623
> 
> 标签：javascript, jquery, html, autocomplete

我正在尝试将值作为 Autocomplete jQuery 方法获取，并将选定的输入值存储到文本框中（推送到文本框）。听起来很简单，但这个 JSON 模式有点花时间。

我可以在这里获得快速帮助吗？

[http://jsfiddle.net/ebPCq/1/](http://jsfiddle.net/ebPCq/1/)

jQuery代码：

```
 $("#material_number").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "http://ws.geonames.org/searchJSON",
            dataType: "json",
            data: {
                style: "full",
                maxRows: 12,
                name_startsWith: request.term
            },
            success: function (data) {
                response($.map(data.geonames, function (item) {
                    return {
                        // following property gets displayed in drop down
                        label: item.name + ", " + item.countryName,
                        // following property gets entered in the textbox
                        value: item.name,
                        // following property is added for our own use
                        my_description: item.fcodeName
                    }
                }));
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:37:29.230

在修复并最终确定初始功能后，我得出结论，将这个小提琴作为我上面发布的查询的解决方案。

[http://jsfiddle.net/ebPCq/7/](http://jsfiddle.net/ebPCq/7/)

JS代码：

```
$(function () {
$("#input").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "http://ws.geonames.org/searchJSON",
            dataType: "json",
            data: {
                style: "full",
                maxRows: 12,
                name_startsWith: request.term
            },
            success: function (data) {
                response($.map(data.geonames, function (item) {
                    return {
                        // following property gets displayed in drop down
                        label: item.name + ", " + item.countryName,
                        // following property gets entered in the textbox
                        value: item.name,
                        // following property is added for our own use
                        my_description: item.fcodeName
                    }
                }));
            }
        });
    },
    minLength: 2,
    select: function (event, ui) {
        if (ui.item) {
            $("#push-input").prepend(ui.item.value + '\r\n');
        }
    }
  });
}); 
```

# groovy - Groovy 静态编译

> ID：15972389
> 
> 赞同：1
> 
> 时间：2013-04-12T13:15:29.093
> 
> 标签：groovy, static-compilation

1.  我可以使用 groovy 编写 100% 的静态代码吗？即使我使用标准库？
2.  如何在应用程序范围内启用 100% 静态编译？

# java - EclipseLink - 在元模型中未找到关键类 [CurriculumTree] 的 [EntityType]

> ID：15972391
> 
> 赞同：2
> 
> 时间：2013-04-12T13:15:36.397
> 
> 标签：java, tomcat, jpa-2.0, persistence.xml

部署到 tomcat 后，我​​在我的axis2 Web 服务中得到以下信息。

```
java.lang.IllegalArgumentException: No [EntityType] was found for the key class [VOs.CurriculumTree] in the Metamodel - please verify that the [Entity] class was referenced in persistence.xml using a specific <class>VOs.CurriculumTree</class> property or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element. 
```

当我从 Eclipse 运行时，JPA 工作正常。我在 persistence.xml 中定义了实体，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="NewAge-Test" transaction-type="RESOURCE_LOCAL">
        <class>VOs.CurriculumTree</class>
        <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/contentserver_development"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value="quadfusion"/>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
        </properties>
    </persistence-unit>
</persistence> 
```

这是我的实体类：

```
@Entity
@Table(name="curriculum_trees")
public class CurriculumTree implements NodeInfo, Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private int id;

    @LevelColumn
    @Column(name="depth",updatable=false)
    private int level;

    @Lob
    private String description;

    @LeftColumn
    @Column(updatable=false)
    private int lft;

    private String name;

    @Column(name="node_type")
    private String nodeType;

    @Column(name="parent_id")
    private int parentId;

    private int position;

    private boolean prassoTopicGroup;

    @RightColumn
    @Column(updatable=false)
    private int rgt;

    @RootColumn
    private int rootId;

    public CurriculumTree() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getDescription() {
        return this.description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public int getLft() {
        return this.lft;
    }

    public void setLft(int lft) {
        this.lft = lft;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getNodeType() {
        return this.nodeType;
    }

    public void setNodeType(String nodeType) {
        this.nodeType = nodeType;
    }

    public int getParentId() {
        return this.parentId;
    }

    public void setParentId(int parentId) {
        this.parentId = parentId;
    }

    public int getPosition() {
        return this.position;
    }

    public void setPosition(int position) {
        this.position = position;
    }

    public boolean getPrassoTopicGroup() {
        return this.prassoTopicGroup;
    }

    public void setPrassoTopicGroup(boolean prassoTopicGroup) {
        this.prassoTopicGroup = prassoTopicGroup;
    }

    public int getRgt() {
        return this.rgt;
    }

    public void setRgt(int rgt) {
        this.rgt = rgt;
    }

    @Override
    public int getLeftValue() {
        return getLft();
    }

    @Override
    public int getRightValue() {
        return getRgt();
    }

    @Override
    public int getLevel() {
        return this.level;
    }

    @Override
    public int getRootValue() {
        return 0;
    }

    @Override
    public void setLeftValue(int value) {
        setLft(value);
    }

    @Override
    public void setRightValue(int value) {
        setRgt(value);
    }

    @Override
    public void setLevel(int level) {
        this.level = level;
    }

    @Override
    public void setRootValue(int value) {
        // TODO Auto-generated method stub
    }

    @Override public String toString() {
        return "[Curriculum Node: id=" + this.id + ", name=" + this.name + "-" + super.toString() + "]";
    }

} 
```

我尝试了包含标签的替代方法，`<exclude-unlisted-classes>false</exclude-unlisted-classes>`但`persistence.xml`它没有任何好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:20:51.177

删除对`<class>com.hm.newAge.VOs.CurriculumTree</class>`

并把财产`<exclude-unlisted-classes>false</exclude-unlisted-classes>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:37:42.607

错误报告`VOs.CurriculumTree`，但在您的持久性 xml 中存在`com.hm.newAge.VOs.CurriculumTree`包问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T13:13:18.003

如果您不使用托管持久性单元，请尝试在使用后关闭实体管理器工厂。

# asp.net-mvc - JSON 函数 - 级联 DropDownList - 更新模型

> ID：15972393
> 
> 赞同：0
> 
> 时间：2013-04-12T13:15:44.487
> 
> 标签：asp.net-mvc, json, mvvm, html-select, cascadingdropdown

前提：我是MVC的新手，我的英语不是很完美，希望你能理解我的帖子，否则我是来解释的。

我正在开发由 ASP.Net MVC 中的另一个开发人员创建的项目，但我遇到了这个问题：

在一个视图中，我有两个级联的 DropDownList：一个是 Distributors，另一个是在第一个 DropDownList 中选择的 Distributor 的 Vendors。

这是代码：

* * *

在身体里：

```
<tr>
    <td>
       <span>Distributor</span>
    </td>
    <td>
       @Html.DropDownList("DistributorID")
       @Html.ValidationMessageFor(model => model.DistributorID)
    </td>
 </tr>
 <tr>
    <td>
       <span>Vendor</span>
    </td>
    <td class="tdAlignLeft">
       @Html.DropDownList("VendorCode")
       @Html.ValidationMessageFor(model => model.ClientHeaderInformation.VendorCode)
    </td>
 </tr> 
```

* * *

在脚本中：

```
$("#DistributorID").change(function (e) {

   var SelectGroupId =$(this).val();

   $.getJSON('@Url.Action("VendorByDistributor", "ClientInfo")', { VendorGroup: DistributorID }, function (param) {
       var vendorCodes = $('#VendorCode');
       vendorCodes.empty();
       $.each(param, function (index, param) {
          vendorCodes.append(
             $('<option/>')
                .attr('value', param.vendorCode)
                .text(param.vendorName)
          );
       });
    });
 }); 
```

* * *

在控制器中：

```
public ActionResult VendorByDistributor(int _DistributorID)
 {
    var Vendors = db.View_Vendors.Where(n => n.DistributorID.Equals(_DistributorID)).Select(
       x => new
       {
          vendorCode = x.VendorCode,
          vendorName = x.VendorName
       });
    return Json(Vendors, JsonRequestBehavior.AllowGet);
 } 
```

* * *

'View_Vendors' 是一个 SQL Server 视图，与实体框架映射，这是 SQL：

```
SELECT A.DistributorID, A.DistributorName, B.VendorName, B.VendorCode
 FROM dbo.Distributors AS A LEFT OUTER JOIN dbo.Vendors AS B ON 
 A.VendorCode = dbo.Vendor.VendorCode 
```

* * *

一切似乎都运行良好，但是当我保存视图时，有时 ClientInfo 类的 VendorCode 属性没有最后选择的值。如果我更改第一个 DropDownList 上的 Distributor 会发生这种情况，在这种情况下，第二个 DropDownList（供应商）获得正确的值，但如果我选择一个供应商然后保存模型，则属性 VendorCode 仍然具有第一个值。

我还尝试创建一个函数来测试 Vendors DropDownList 的事件“更改”...

```
$ ("# VendorCode.") Change (function (e) {
     SelectId var = $ (this). val ();
     $. getJSON ('@ Url.Action ("updateVendorCode", "ClientInfo")', {VendorCodePass: SelectId});
  }); 
```

...事实上，只有当我不更改分销商并且未重新加载供应商项目时，事件才会正确触发，在这种情况下，事件只会在第一次触发。

听起来像是第二个 DropDownList Vendors 的刷新问题，但我找不到解决方案...

皮莱吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:30:16.057

[我在这里](http://setiabud.blogspot.com/2009/05/cascading-drop-down-with-aspnet-mvc.html)写了一篇关于这个的博客文章。这是与您的情况类似的相关代码。

```
$("#ClientId").change(function () {
    var clientId = "";
    $("#ClientId option:selected").each(function () {
        clientId += $(this)[0].value;
    });
    var url = '<%:Url.Action("ProjectList", "Client") %>' + "/" + clientId;
    $.getJSON(url, null, function (data) {
        var selectedValue = '<%:Model.ProjectId %>';
        $("#ProjectId").empty();
        $.each(data, function (index, optionData) {
            if (optionData.OBJID == parseInt(selectedValue))
                $("#ProjectId").append("<option value='" + optionData.ObjId+ "' selected='true'>" + optionData.Name + "</option>");
            else 
                $("#ProjectId").append("<option value='" + optionData.ObjId + "'>" + optionData.Name + "</option>");
        });
    });
}).change(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:33:16.253

好的，对不起，这是一个非常微不足道的问题。代码是正确的，只是一个字段是错误的： VendorCode 代替了 VendorNumber ... :-)

有时您看不到最简单的解决方案...

我不会删除帖子，因为代码是正确的，并且可能对其他人有用。

问候！

皮莱吉

# neo4j - 我如何在 neo4j 中使用 PathExpander？

> ID：15972396
> 
> 赞同：1
> 
> 时间：2013-04-12T13:15:49.273
> 
> 标签：neo4j

我如何在 neo4j 中使用 PathExpander？我可以在每次迭代时从节点创建路径还是错误？

TIA。

UPD。

```
 StandardExpander se = StandardExpander.DEFAULT;
                         se.add(DynamicRelationshipType.withName("TRANSPORT"),  Direction.OUTGOING);
                         se.add(DynamicRelationshipType.withName("TRANSPORT_LONGER"),  Direction.OUTGOING);
                         se.addRelationshipFilter(myFilter); 
```

我必须`myFilter`手动创建吗？谢谢。

UPD#2。还有一个问题：我如何使用扩展结果如下：

```
Expansion ss = se.expand(graphDb.getNodeById(1)); 
```

（`Expansion`课程已关闭且不可见）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:55:23.650

好的，我使用 Traversal.expanderForTypes(...) 和一些关系类型。

# c# - 如何使用 tweetsharp.search？

> ID：15972400
> 
> 赞同：0
> 
> 时间：2013-04-12T13:16:11.303
> 
> 标签：c#, twitter, tweetsharp

我正在使用 TweetSharp，但无法使用“搜索”功能。我试图找到它，但在每个例子中，我看到第二个参数是一个整数，它不起作用。

```
TwitterService service = new TwitterService(consumerKey, consumerSecret);
            service.AuthenticateWith(accessToken, tokenSecret); 
            var options = new SearchOptions { Q = "stackoverflow" };
            XmlDocument xmlTwitterPost = new XmlDocument();

            xmlTwitterPost.Load(@"c:\socialShare.xml");
            xmlTwitterPost.LoadXml("<TableBox></TableBox>");

            foreach (var tweet in service.Search(options,)) 
            {..
} 
```

我无法找到插入第二个参数的方法，即：

```
System.Action<TweetSharp.TwitterSearchResult,TweetSharp.TwitterResponse> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T14:55:21.423

我使用了你的一些代码并创建了这个样本，据我所知，它对我来说很好，我没有将任何操作作为第二个参数，我得到了结果

```
var service = new TwitterService(consumerKey, consumerSecrete);
        service.AuthenticateWith(token, tokenSecrete);
        var options = new SearchOptions { Q = "vucic" };

        var tweets = service.Search(options);

        foreach (var tweet in tweets.Statuses)
        {
            Console.WriteLine("{0} says '{1}'", tweet.User.ScreenName, tweet.Text);
        } 
```

# html - HTML5 中的剃刀

> ID：15972401
> 
> 赞同：0
> 
> 时间：2013-04-12T13:16:11.760
> 
> 标签：html, razor

我无法将 Razor 放入 HTML5 中。我无法获得**id**的值。

我将 Razor 放在 body 标签内。

这是它的样子：

```
@using ThisIsNamespace
  @{
      VBEncrypt enc = new VBEncrypt();
  if(IsPost)
  {
     if(Request["txtUserID"] != null || Request["txtPassword"] != null)
     {
         Session["USER"] = Request["txtUserID"];
         Session["PASSWORD"] = Request["txtPassword"];
         Session["ID"] = enc.Encrypt("" + Session["USER"] + "]#USERID#[" + Session["Password"] + "");
     }
  } 
```

}

然后将 Session["ID"] 分配给一个变量：它位于 head 标签中。

```
<script type="text/javascript">
        var id = @Session["ID"];
</script> 
```

我没有收到任何错误，但似乎无法将会话分配给变量。如果我的问题不清楚，请告诉我。

非常感谢大家的帮助。先感谢您 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:49:48.657

简单测试：

```
@{
    Session["ID"] = 1;
} 
```

然后：

```
<script type="text/javascript">
    var id = @Session["ID"];
    var id2 = @Session["ID2"];
</script> 
```

呈现为：

```
<script type="text/javascript">
    var id = 1;
    var id2 = ;
</script> 
```

其中一项检查失败。`IsPost`是假的`Request["txtUserID"]`或者`Request["txtPassword"]`是`null`

# sql-server - 使用 VS2012、SSDT 和 TFS 进行实际开发

> ID：15972403
> 
> 赞同：1
> 
> 时间：2013-04-12T13:16:16.473
> 
> 标签：sql-server, visual-studio-2012, tfs, sql-server-data-tools

使用 SSDT/VS2012/TFS，存储过程被保存为 CREATE 脚本。

我也有数据库引用，我在一些脚本中使用它，例如 select * from [$(MyOtherDatabase)].[dbo].[someTable]

如果我在我的项目中打开一个存储过程并执行它，它会执行 CREATE 脚本，这将出错。此外，$(MyOtherDatabase) 等变量也无法解析。

处理这些问题的最佳方法是什么？

我是否手动将脚本更改为 ALTER？我是否手动将所有变量替换为它们的值？然后当我将该过程重新检入 TFS 时，我是否必须撤消所有这些操作？还是我需要为所有内容发布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:13:08.680

**问：我是否手动将脚本更改为 ALTER？**

不，当您编译和发布项目时，它会自动确定适当的 DDL。

**问：我是否手动将所有变量替换为它们的值？**

不可以。您可以更改或设置您正在使用的每个配置中的变量值，即 Local、Test、Stage...

**问：我需要为所有内容进行发布吗？**

当您发布时，它将创建一个脚本或根据您的配置文件将更改直接应用于数据库。您选择将在其中设置目标数据库的配置，然后发布将创建脚本或直接应用更改。所以这取决于你所针对的环境。

如果您使用的是 VSDT 或数据库项目，那么您的部署旨在通过直接编译和发布项目或通过创建的脚本来处理。

如果将 create 语句更改为 alter 语句，您会失去核心功能并错误地使用数据库项目。当您编译您的项目时，它将确定脚本是否应该使用 Create 或 alter DDL 语句，并将根据您部署的目标数据库自动做出此决定。

[数据库项目设置](http://msdn.microsoft.com/en-us/library/hh272681%28v=vs.103%29.aspx)

[如何：更改目标平台并发布数据库项目](http://msdn.microsoft.com/en-us/library/hh272687%28v=vs.103%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:39:52.090

你可以试试我在 UDF 中使用的这个技巧。

我在删除它们并重新添加它们时遇到了问题（我大部分时间都使用存储过程）。所以我想出了下面的幂等解决方案。

```
Use [$(DBName)]
GO

:Error $(ErrorOutputFileFromCommandLine)  

/*
Create a stubbed version if it does not exist... if it exists, this could shouldn't run, thus not violating permissions
*/

if NOT exists (select *  from sysobjects 
    where id = object_id('dbo.udfMySuperCoolUDF') and sysstat & 0xf = 0)
    BEGIN
        print 'Creating the stubbed version of dbo.udfMySuperCoolUDF'
        EXEC ( 'CREATE FUNCTION dbo.udfMySuperCoolUDF (@i as smallint , @j as smallint ) RETURNS bit AS BEGIN RETURN 0 END')
    END
GO

ALTER FUNCTION dbo.udfMySuperCoolUDF (@ValidationLookupCategoryKey smallint , @ValidationLookupKey smallint  )
    RETURNS bit AS
    BEGIN
        declare @exists int

        select @exists = 0

        /* Logic Here */

        return @exists
    END 
```

第二。

研究“sqlcmd”模式。保持 $(MyVariable) “原样”，并了解如何在 sqlcmd 模式（在 SSMS 内部）和部署（sqlcmd.exe）中操作它们。

# php - Symfony2 验证日期时间 1 应该在日期时间 2 之前

> ID：15972404
> 
> 赞同：20
> 
> 时间：2013-04-12T13:16:24.643
> 
> 标签：php, symfony, validation, doctrine-orm, assert

我正在查看 Symfony2 验证参考，但我没有找到我需要的东西。

我有一个带有**StartDate**和**EndDate**的类就业。我想添加一个 \@Assert() 来验证*StartDate 始终是 BEFORE EndDate*。是否有将类属性作为验证约束进行比较的标准方法，还是应该创建自定义验证约束？

```
class Employment {

    /**
    * @ORM\Id
    * @ORM\Column(type="integer")
    * @ORM\GeneratedValue(strategy="AUTO")
    * @Expose() 
    */
    protected $id;

    /**
    * @ORM\Column(type="datetime") 
    * @Expose()
    * @Assert\DateTime()
    */
    protected $startDate;

    /**
    * @ORM\Column(type="datetime", nullable=TRUE)
    * @Expose()
    * @Assert\DateTime()
    */
    protected $endDate;

...
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-12T13:37:52.120

您可以向实体添加一个验证 getter - [Symfony2 Validation Getters](http://symfony.com/doc/2.1/book/validation.html#getters)

在您的验证中

```
Acme\YourBundle\Entity\Employment:
    getters:
        datesValid:
            - "True": { message: "The start date must be before the end date" } 
```

然后在你的实体中

```
public function isDatesValid()
{
    return ($this->startDate < $this->endDate);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-12T13:26:34.327

您可以编写自定义 DateRangeValidator。

```
class DateRange extends Constraint {

    public $message = "daterange.violation.crossing";
    public $emptyStartDate = "daterange.violation.startDate";
    public $emptyEndDate = "daterange.violation.endDate";

    public $hasEndDate = true;

    public function getTargets() {
        return self::CLASS_CONSTRAINT;
    }

    public function validatedBy() {
        return 'daterange_validator';
    }
}

class DateRangeValidator extends ConstraintValidator
{

    public function isValid($entity, Constraint $constraint)
    {

        $hasEndDate = true;
        if ($constraint->hasEndDate !== null) {
            $hasEndDate = $constraint->hasEndDate;
        }

        if ($entity->getStartDate() !== null) {
            if ($hasEndDate) {
                if ($entity->getEndDate() !== null) {
                    if ($entity->getStartDate() > $entity->getEndDate()) {
                        $this->setMessage($constraint->message);
                        return false;
                    }
                    return true;
                } else {
                    $this->setMessage($constraint->emptyEndDate);
                    return false;
                }
            } else {
                if ($entity->getEndDate() !== null) {
                    if ($entity->getStartDate() > $entity->getEndDate()) {
                        $this->setMessage($constraint->message);
                        return false;
                    }
                }
                return true;
            }
        } else {
            $this->setMessage($constraint->emptyStartDate);
            return false;
        }
    } 
```

将其注册为服务：

```
parameters:
    register.daterange.validator.class:     XXX\FormExtensionsBundle\Validator\Constraints\DateRangeValidator

services:
    daterange.validator:
        class: %register.daterange.validator.class%
        tags:
            - { name: validator.constraint_validator, alias: daterange_validator } 
```

并在您的实体中使用它：

```
use XXX\FormExtensionsBundle\Validator\Constraints as FormAssert;

/**
 *
 * @FormAssert\DateRange()
 */
class Contact extends Entity
{
    private $startDate;

    private $endDate;
} 
```

尽管对于这样一个简单的事情来说似乎有点多，但经验表明，人们需要一个日期范围验证器，而不仅仅是一次。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-01-13T12:58:44.770

还有另一种解决方案：[使用表达式语言进行验证](http://symfony.com/doc/current/reference/constraints/Expression.html)：

```
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Column(type="date", nullable=true)
 * @Assert\Date()
 */
private $startDate;

/**
 * @ORM\Column(type="date", nullable=true)
 * @Assert\Date()
 * @Assert\Expression(
 *     "this.getStartDate() < this.getEndDate()",
 *     message="The end date must be after the start date"
 * )
 */
private $endDate; 
```

如果需要，您可以添加此约束`$startDate`。

# android - 在Android项目中包含OpenGL java代码

> ID：15972406
> 
> 赞同：0
> 
> 时间：2013-04-12T13:16:27.597
> 
> 标签：android, opengl-es, render

我有 2 个 java 类，`photocube.java`并`MyGLRenderer.java`使用 OpenGL ES。

当我开始 ADT New 项目时，我`MainActivity.java`已经得到了这个，它只是提供了 Hello World 输出窗口。

我应该如何以及在哪里包含我的这两个文件以使我的 Android 应用程序正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:22:04.053

如果您的某个文件描述了您要启动的活动而不是默认的 MainActivity，则删除 MainActivity.java，将文件重命名为 MainActivity.java 并将其放在旧的位置，然后重新构建。

# actionscript-3 - 在 Flex 中的 actionscript 中编辑其他类的 mxml 代码

> ID：15972409
> 
> 赞同：0
> 
> 时间：2013-04-12T13:16:34.197
> 
> 标签：actionscript-3, apache-flex, flex3, mxml

我有一个类，它在 mxml 中描述 UI，另一个在 as 中保存逻辑。

有什么方法，如何根据我的 actionscript 类中某个变量的值通过更改 mxml 来更改 UI？

as 类如下所示：

```
public class SomeDialog extends MyDialog
{
public function SomeDialog(noteToTask:Boolean=false)
{
    this.noteToTask=noteToTask;
    resizable = false;
}

    // WHEN noteToCase is true, add to mxml some component, ie a button
private var noteToCase:Boolean;

override protected function createView():MyDialog
{
    var view:SomeDialogView  = new SomeDialogView ();
    return view;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:08:16.277

首先，简单的解决方案：使noteToCase public static 可绑定（如果可以是静态的），并在mxml中绑定可见性等。

第二，更清洁：为您的 mxml 创建一个视图模型，无论是在 as 中，还是在脚本中，在视图模型中，您可以在 mxml 上使用 addElement 等，并在 noteToCase 更改时通过设置器等调用视图模型。

# .net - 存储大量数据行以进行查询的最佳方法

> ID：15972410
> 
> 赞同：0
> 
> 时间：2013-04-12T13:16:37.000
> 
> 标签：.net, sql-server, database

存储用于创建报告的大量（数百万）记录的最佳方式是什么？应用程序的性质要求将与搜索匹配的每条记录发送到应用程序进行处理，因此查询执行速度和查询结果传输速度对我们来说都是重要因素。

目前，我们的应用程序将记录存储在一个直接的 MSSQL 表中，该表为查询性能而进行了大量索引。是否有人有任何替代存储想法，或者即使我们只能将记录存储在一个表中，因为数据本身不是关系，但关系数据库是否适合此？

SQL 解决方案为我们提供了相当不错的性能，但如果还有其他更好的后端替代方案，我很感兴趣，例如 NoSQL 数据库是开始研究的有效解决方案吗？

我们的查询是针对少量列进行的，但结果的大小可能会有所不同（每次执行所需的行数取决于周期和其他一些参数）。

提前感谢您帮助我获得一些新的观点。

由于我们是一家 .NET 商店，任何适合 .NET 和 Windows 服务器的解决方案/想法对我们来说都是一个很大的优势，但我很感激我能得到的所有意见。解决方案是指 MSSQL 或其他关系数据库以外的其他后端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:29:37.763

查询效率取决于查询和索引

将数据传输到客户端：

*   只是一个直接的 DataReader 是非常有效的
*   Drapper 也很快，但我没用过

我有一个有效的解释，即应保存查询结果以重新运行
查询仅运行一次

```
Data
int ID iden 
varchar Value1
varchar Value2

SavedQuery
int ID iden 
varchar name 

SavedQueryResults 
int QueryID PK
int DataID PK

Select [Data].[Value1],  [Data].[Value2]
From [Data] 
Join [SavedQueryResults]
  on [SavedQueryResults].[DataID] = [Data].[ID]
 and [SavedQueryResults].[QueryID] = x 
```

使用 SavedQueryResults 上的 PK 这应该会导致索引搜索并且不能做得比这更好。

当您创建 SavedQueryResults 时，使用插入中的 DataID 顺序来降低碎片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:27:13.887

你为什么不宁愿有几个报告表，用触发器更新，它会更有效率。与 CQRS 世界中的视图模型相同。

# c# - 子网格 SelectionChanged 事件不会在 DevExpress 中触发

> ID：15972412
> 
> 赞同：0
> 
> 时间：2013-04-12T13:16:44.040
> 
> 标签：c#, asp.net, devexpress

我有 2 个 ASPxGridView 控件 - gvPatient 和 - gvOrder gvOrder 放置在 gvPatient 的详细信息行模板内。我面临的问题是我必须在焦点行更改或选择更改时获取 gvOrder(child) 行的值。我有这些事件的代码，但这些事件不会在选择行和子网格的焦点更改时触发。奇怪的是 - 这些子网格事件在 gvPatient(parent) 行选择和焦点更改时触发。

代码：

```
<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/Main.master" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content" ContentPlaceHolderID="MainContent" runat="server">
    <table width="100%" border="0" cellpadding="2" cellspacing="2">
    <tr>
        <td>

        </td>
    </tr>
    <tr>
        <td style="height:300px;" valign="top">
            <dx:ASPxGridView ID="gvPatient" runat="server" AutoGenerateColumns="false"  DataSourceID="SqlDataSourceMaster"
                Width="100%" Font-Size="11px" KeyFieldName="PAT_NUMBER" >

                <Columns>
                    <dx:GridViewDataTextColumn Caption="PAT_NUMBER" FieldName="PAT_NUMBER"  Visible="false">
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="" FieldName="PATIENT_ID"  Visible="false">
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="Patient" FieldName="FULL_NAME" >
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="MRN" FieldName="MRN" >
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="Nursing Unit" FieldName="NURSING_UNIT">
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="Room" FieldName="ROOM_BED" >
                    </dx:GridViewDataTextColumn>
                </Columns>
                <Templates>
                    <DetailRow>
                       <div style="padding:5px;">
                           <div>
                               <dx:ASPxGridView ID="gvOrder" runat="server" KeyFieldName="ORDER_KEY" DataSourceID="SqlDataSourceDetail"
                                Width="100%" AutoGenerateColumns="false"
                                nbeforeperformdataselect="gvOrder_BeforePerformDataSelect" 
                                OnSelectionChanged="gvOrder_SelectionChanged" 
                                onfocusedrowchanged="gvOrder_FocusedRowChanged" 
                                ondetailrowexpandedchanged="gvOrder_DetailRowExpandedChanged">
                                    <Columns>
                                        <dx:GridViewDataTextColumn Caption="ORDER KEY" FieldName="ORDER_KEY"  Visible="false">
                                        </dx:GridViewDataTextColumn>
                                        <dx:GridViewDataTextColumn Caption="PAT_NUMBER" FieldName="PAT_NUMBER"  Visible="false">
                                        </dx:GridViewDataTextColumn>
                                        <dx:GridViewDataTextColumn Caption="Rx Edit" FieldName="RX" >
                                        </dx:GridViewDataTextColumn>
                                        <dx:GridViewDataTextColumn Caption="Reason Code" FieldName="REASON_CODE" >
                                        </dx:GridViewDataTextColumn>
                                        <dx:GridViewDataTextColumn Caption="Note" FieldName="NOTE">
                                        </dx:GridViewDataTextColumn>
                                    </Columns>
                                <Settings ShowFooter="True" />
                                <SettingsBehavior AllowFocusedRow="true" AllowSelectByRowClick="true" />
                            </dx:ASPxGridView>
                           </div>

                           <div style="padding-top:5px; padding-left:5px;">
                                <table cellpadding="2" cellspacing="2" border="0" width="100%">
                                    <tr>
                                        <td rowspan="3">
                                            <dx:ASPxRoundPanel ID="ASPxRoundPanel2" runat="server" Width="500px" BackColor="White"
                                            HeaderText="PLEASE FOLLOW FEDERAL AND STATE GUIDELINES TO ORDER THIS CONTROLLED SUBSTANCE" >
                                                <PanelCollection>
                                                    <dx:PanelContent>
                                                         <table border="0" cellpadding="2" cellspacing="2" width="100%">
                                                            <tr>
                                                                <td align="left">
                                                                    <dx:ASPxLabel ID="ASPxLabel11" runat="server" Text="Start">
                                                                    </dx:ASPxLabel>&nbsp;&nbsp;&nbsp;
                                                                    <b><dx:ASPxLabel ID="ASPxLabel12" runat="server"  Text="04-04-13" Font-Bold="true" >
                                                                    </dx:ASPxLabel></b>

                                                                </td>
                                                                <td align="right">
                                                                 <dx:ASPxLabel ID="ASPxLabel13" runat="server" Text="Active" Font-Bold="true" >
                                                                    </dx:ASPxLabel>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="2">
                                                                    <dx:ASPxLabel ID="ASPxLabel14" runat="server" Text="Initial">
                                                                    </dx:ASPxLabel>&nbsp;&nbsp;&nbsp;
                                                                     <b><dx:ASPxLabel ID="ASPxLabel15" runat="server" Text="04-04-13" Font-Bold="true" >
                                                                    </dx:ASPxLabel></b>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="2">
                                                                     <dx:ASPxLabel ID="ASPxLabel16" runat="server" Text="Time Stamp">
                                                                    </dx:ASPxLabel>&nbsp;&nbsp;&nbsp;
                                                                     <b><dx:ASPxLabel ID="ASPxLabel17" runat="server" Text="04-04-13 02:53" Font-Bold="true" >
                                                                    </dx:ASPxLabel></b>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td colspan="2">
                                                                <dx:ASPxLabel ID="ASPxLabel18" runat="server" Text="OXYCODONE HCL IR 5MG TABLET (OXYCODONE HCL IR 5MB TABLET)" ></dx:ASPxLabel>
                                                                <br /><dx:ASPxLabel ID="ASPxLabel19" runat="server" Text="ONE TAB(5 mg) by mouth every 4 hours as neded pain tele order by bhardwaj, rakesh" ></dx:ASPxLabel>
                                                                <br /><dx:ASPxLabel ID="ASPxLabel20" runat="server" Text="noted on 04-04-13 2:53pm by erma entena, md" ></dx:ASPxLabel>
                                                                    &nbsp;
                                                                </td>
                                                            </tr>

                                                        </table>
                                                    </dx:PanelContent>
                                                </PanelCollection>
                                            </dx:ASPxRoundPanel>

                                        </td>
                                        <td>
                                            <dx:ASPxLabel ID="ASPxLabel1" runat="server" Text="Action:"></dx:ASPxLabel>
                                        </td>
                                        <td>
                                            <dx:ASPxComboBox ID="ASPxComboBox1" runat="server" ValueType="System.String" Width="300px" >
                                                <Items>
                                                    <dx:ListEditItem Text="" />
                                                    <dx:ListEditItem Text="Continue" />
                                                    <dx:ListEditItem Text="Discontinue" />
                                                    <dx:ListEditItem Text="Substitute" />
                                                    <dx:ListEditItem Text="Wean/Taper" />
                                                </Items>
                                            </dx:ASPxComboBox>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <dx:ASPxLabel ID="ASPxLabel3" runat="server" Text="Reason:"></dx:ASPxLabel>
                                        </td>
                                        <td>
                                            <dx:ASPxComboBox ID="cbReason" runat="server" ValueType="System.String" Width="300px" >
                                                <Items>
                                                    <dx:ListEditItem Text="" />
                                                    <dx:ListEditItem Text="Duplicate Drugs" />
                                                    <dx:ListEditItem Text="Ineffective drug therapy" />
                                                    <dx:ListEditItem Text="Non-compliance with drug therapy" />
                                                    <dx:ListEditItem Text="Significant side effects" />
                                                    <dx:ListEditItem Text="Significant drug interactions" />
                                                    <dx:ListEditItem Text="Behavioral Changes" />
                                                    <dx:ListEditItem Text="POLST/MOLST" />
                                                    <dx:ListEditItem Text="Refusing Medication" />
                                                </Items>
                                            </dx:ASPxComboBox>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <dx:ASPxLabel ID="ASPxLabel2" runat="server" Text="Comment:"></dx:ASPxLabel>
                                        </td>
                                        <td>
                                            <dx:ASPxMemo ID="tbNote" runat="server" Height="70px" Width="300px" ></dx:ASPxMemo>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            <dx:ASPxButton ID="btnSave" runat="server" Text="Save" onclick="btnSave_Click"></dx:ASPxButton>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            <dx:ASPxLabel ID="lblMsg" runat="server" Text="" ForeColor="Red"></dx:ASPxLabel>
                                        </td>
                                    </tr>
                                </table>
                           </div>
                       </div>
                    </DetailRow>
                </Templates>
                <SettingsDetail ShowDetailRow="true" AllowOnlyOneMasterRowExpanded="true" />
                <SettingsBehavior AllowFocusedRow="true" AllowSelectByRowClick="true" ProcessSelectionChangedOnServer="True" />
            </dx:ASPxGridView>
        </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:26:20.497

您需要将属性[SettingsBehavior.ProcessSelectionChangedOnServer](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridViewBehaviorSettings_ProcessSelectionChangedOnServertopic)和 [SettingsBehavior.ProcessFocusedRowChangedOnServer 设置](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridViewBehaviorSettings_ProcessFocusedRowChangedOnServertopic)为 true。
来自文档：*“如果 ProcessSelectionChangedOnServer 属性设置为 false，则在客户端处理 ASPxClientGridView.SelectionChanged 事件而无需回发到服务器”。*

# sql - 在 SQL 中：当查询返回“无结果”时显示一些默认结果

> ID：15972417
> 
> 赞同：4
> 
> 时间：2013-04-12T13:16:51.727
> 
> 标签：sql, postgresql, union

我`Postgres`用来从表中获取结果。我想用 SQL 来解决一个问题。

当我的 postgresql 查询没有返回结果时，我希望出现一些默认的行结果。我正在使用 Jasper-reports，所以我没有很多工具来捕捉没有结果的事件，然后提供默认结果。

当第一个查询显示结果时，我不希望出现默认结果。目前我正在尝试使用 UNION 但我希望`Union`命令之后的第二个查询仅在第一个查询显示 0 结果时发生。

这可以在 SQL 中完成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T13:24:39.390

您可以尝试 CTE：

```
with fooresults as
(
select c1, c2 from foo
)

select c1, c2 from fooresults
union
select c1, c2 from blah
where (select count(*) from fooresults)=0 
```

或者您可以在不计算的情况下测试空 fooresults：

```
 where not exists (select 1 from fooresults) 
```

PS 当然，您可以在实例化 CTE 时添加所需的任何条件：

```
 select c1, c2 from foo where .... <some conditions> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T13:30:30.517

不要`count`检查行的存在，因为它会计算整个表。相反，使用`exists`

```
select c1, c2, c3
from t
union
select 1, 2, 3
where not exists (select * from t) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:22:29.700

```
SELECT * 
FROM table1
UNION ALL
SELECT *
FROM table2
WHERE 0 = (
   SELECT count(table1.id)
   FROM Table1
   GROUP BY table1.id) 
```

从头上看，虽然感觉很丑...

# scala - 在运行时访问源代码文本的宏

> ID：15972419
> 
> 赞同：8
> 
> 时间：2013-04-12T13:16:59.437
> 
> 标签：scala, macros

是否已经有或者是否有可能有一个 Scala 宏来让我访问源代码的文本？例如我想写这样的代码：

```
val list = List(1, 2, 3)
val (text, sum) = (list.sum).withSource{(source, sum) => (source, sum)}
// would return ("list.sum", 6)
(list.sum).withSource{(source, sum) => println(s"$source: $sum"}
// prints list.sum: 6 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T14:01:28.047

你真的想要一个源代码还是`Tree`足够了？

因为`Tree`你可以这样使用`prefix`：`Context`

```
import scala.language.experimental.macros
import reflect.macros.Context

implicit class WithSourceHelper[T](source: T) {
  def withSource[R](f: (String, T) => R): R = macro withSourceImpl[T, R]
}

def withSourceImpl[T, R](c: Context)(f: c.Expr[(String, T) => R]): c.Expr[R] = {
  import c.universe.{reify, Apply}

  val source = c.prefix.tree match {
    case Apply(_, List(s)) => s
    case _ => c.abort(c.enclosingPosition, "can't find source")
  }

  reify{ f.splice.apply(c.literal(source.toString).splice, c.Expr[T](source).splice) }
} 
```

用法：

```
scala> val (x, y) = (1, 2)
x: Int = 1
y: Int = 2

scala> {x + y}.withSource{ (s, r) => s"$s = $r" }
res15: String = x.+(y) = 3

scala> val list = List(1, 2, 3)
list: List[Int] = List(1, 2, 3)

scala> val (text, sum) = (list.sum).withSource{(source, sum) => (source, sum)}
text: String = list.sum[Int](math.this.Numeric.IntIsIntegral)
sum: Int = 6

scala> (list.sum).withSource{(source, sum) => println(s"$source: $sum")}
$line38.$read.$iw.$iw.$iw.list.sum[Int](math.this.Numeric.IntIsIntegral): 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:58:04.390

我无法`withSource`直接重用以打印源和值并返回值。不能从同一个对象本身使用`withSource`宏（所以我不能只在该文件中添加我稍微修改过的 withSource 版本）并且我不能`withSource`从 的子类中调用`WithSourceHelper`，从而限制了通过继承的重用。

如果有人感兴趣，这里是对 Senia 答案的补充，只需将值与源一起记录并返回值，以便可以进行其余的计算。

```
def logValueImpl[T](c: Context): c.Expr[T] = {
  import c.universe._
  val source = c.prefix.tree match {
    case Apply(_, List(s)) => s
    case _ => c.abort(c.enclosingPosition, "can't find source")
  }
  val freshName = newTermName(c.fresh("logValue$"))
  val valDef = ValDef(Modifiers(), freshName, TypeTree(source.tpe), source)
  val ident = Ident(freshName)
  val print = reify{
    println(c.literal(show(source)).splice + ": " + c.Expr[T](ident).splice) }
  c.Expr[T](Block(List(valDef, print.tree), ident))
} 
```

然后我将其定义为对`def p = macro Debug.logValueImpl[T]`. 然后我可以这样使用：

```
List(1, 2, 3).reverse.p.head 
// prints: immutable.this.List.apply[Int](1, 2, 3).reverse: List(3, 2, 1) 
```

有趣的是我可以应用两次：

```
List(1, 2, 3).reverse.p.p 
```

它会告诉我`logValueImpl`宏做了什么：

```
{
  val logValue$7: List[Int] = immutable.this.List.apply[Int](1, 2, 3).reverse;
  Predef.println("immutable.this.List.apply[Int](1, 2, 3).reverse: ".+(logValue$7));
  logValue$7
} 
```

它似乎也适用于其他宏：

```
f"float ${1.3f}%3.2f; str ${"foo".reverse}%s%n".p`
//prints:
{
  val arg$1: Float = 1.3;
  val arg$2: Any = scala.this.Predef.augmentString("foo").reverse;
  scala.this.Predef.augmentString("float %3.2f; str %s%%n").format(arg$1, arg$2)
}: float 1.30; str oof%n 
```

更有趣的是，如果我使用`showRaw`而不是，`show`我什至可以看到扩展宏的树，这可能会很方便地弄清楚如何编写其他宏。

# android - 在 android 中解析 SOAP 时出现内存不足错误

> ID：15972422
> 
> 赞同：0
> 
> 时间：2013-04-12T13:17:04.823
> 
> 标签：android, parsing, soap

我正在使用 SOAP Parsing 在 android 中。在我的应用程序中，有一点我必须下载大量数据，其中也存在字节数组类型的数据。

对于解决方案，我参考了链接[非常大的 SOAP 响应 - Android - 内存不足错误](https://stackoverflow.com/questions/4941581/very-large-soap-response-android-out-of-memory-error)，但无法了解它如何与我的肥皂对象一起使用。

我用来获取肥皂响应的方法如下：

```
public SoapObject taskDetail() {

    SoapObject result = null;

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    request.addProperty("ID", "4");
    request.addProperty("fromDate", "02/06/2013");       
        request.addProperty("toDate", "02/06/2013");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet = true;

    envelope.setOutputSoapObject(request);

    AndroidHttpTransport transport = new AndroidHttpTransport(URL);

    transport.debug = true;

    try {
        transport.call(SOAP_ACTION, envelope);

        result = (SoapObject)envelope.getResponse();

        for(int i=0; i<result.getPropertyCount(); i++) {
                SoapObject view_task_master = (SoapObject) result.getProperty(i);

        screen = view_task_master.getProperty("Screen").toString();
        Log.i("screen",screen);

        date = view_task_master.getProperty("Createddate").toString();
        Log.i("date",date);

    }

        } 
        catch (IOException e) {
            Log.i("IOException",e.getMessage());
        } 
        catch (XmlPullParserException e) {
            Log.i("XMLPullParserException",e.getMessage());
        }
            return result;
    } 
```

我知道主要问题是由于数据量大，结果对象无法处理它。
请帮助...提前谢谢...！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:06:20.963

*   尝试使用 AynckTask 进行肥皂请求 - 因为它不需要太多堆内存

两种策略可帮助您解决此问题：

下载时将 SOAP XML 流直接保存到磁盘。不要将其存储在内存中。使用 SAX 样式的解析器对其进行解析，您不会将整个 DOM 加载到内存中，而是将其解析为块。根据您处理的 XML 类型，在代码中使用 SAX 解析器通常更难；您将不得不自己跟踪许多事情，并且您将无法从 DOM 树的一个部分“跳转”到另一个部分。但是内存消耗会低很多。

但是请注意，许多“高级”网络通信库通常将整个 XML DOM 加载到内存中，这里可能就是这种情况。您可能必须自己创建和管理 HTTP 连接，然后手动解析结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:05:59.880

使用[ContentHandler](http://developer.android.com/reference/org/xml/sax/ContentHandler.html)。当它找到包含数据的标签时，使用 characters() 方法从输入流中获取字符数组并将其写入文件或数据库。这样您就不需要将所有数据保存在 ram 中。（这是您的肥皂对象包含 BLOB 的情况的解决方案）

另请记住，AsyncTask 不是执行长时间运行的网络请求的最佳方式（如果您使用 execute() 启动它，目前只有一个 AsyncTask 可以在 3.0+ 上运行）

# spring - Bean 名称“用户”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：15972423
> 
> 赞同：0
> 
> 时间：2013-04-12T13:17:07.037
> 
> 标签：spring, spring-mvc

我正在使用 spring，但我遇到了一个例子。如果我解决了一个错误，它会给我带来不同的错误......

我有一个名为 UserController2.java 的控制器程序，如下所示

```
package project2;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

@Controller
public class UserController2 extends MultiActionController {

    private UserDAO userDAO;

    public void setUserDAO(UserDAO userDAO) {
        this.userDAO = userDAO;
    }
    @RequestMapping(params = "add", method = RequestMethod.POST)
    public ModelAndView add(HttpServletRequest request,
           HttpServletResponse response, User user) throws Exception {
        userDAO.saveUser(user);
        return new ModelAndView("redirect:list.htm");
    }
    @RequestMapping(params = "delete", method = RequestMethod.POST)
    @Transactional
    public ModelAndView delete(HttpServletRequest request,
        HttpServletResponse response, User user) throws Exception {
        userDAO.deleteUser(user);
        return new ModelAndView("redirect:list.htm");
    }

    public ModelAndView list(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("userList", userDAO.listUser());
        modelMap.addAttribute("user", new User());
        return new ModelAndView("userForm", modelMap);
    }
} 
```

和jsp页面userForm.jsp如下

```
<body>
 <center> WELCOME TO CUSTOMER ACCESS SITE.PLEASE ENTER THE FOLLOWING 
  INFORMATION</center>
<form:form method="POST" action="add.htm"  modelAttribute="user">
   <table>
    <tr>
        <td><form:label path="name">Name</form:label></td>
        <td><form:input path="name" /></td>
    </tr>

    <tr>
        <td><form:label path="id">id</form:label></td>
        <td><form:input path="id" /></td>
    </tr>

    <tr>
        <td><form:label path="password">password</form:label></td>
        <td><form:input path="password" /></td>
    </tr>
    <tr>
        <td><form:label path="gender">Gender</form:label></td>
        <td><form:input path="gender" /></td>
    </tr>
    <tr>
        <td><form:label path="country">Country</form:label></td>
        <td><form:input path="country" /></td>
    </tr>
    <tr>
        <td colspan="2">
            <input type="submit" value="Submit"/>
        </td>
    </tr>
 </table>  
</form:form>

</body> 
```

和 UserController2-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans  
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema 
    /aop/spring-aop-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema 
    /tx/spring-tx-2.5.xsd">
<bean   
class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

<bean id="urlMapping"  
class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy- 
method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/indi"/>
    <property name="username" value="admin"/>
    <property name="password" value=""/>
</bean>

<bean id="mySessionFactory"   
class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    <property name="annotatedClasses">
        <list>
            <value>Spring.project2.User</value>

        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean>

<bean id="myUserDAO" class="project2.UserDAOImpl">
     <property name="sessionFactory" ref="mySessionFactory"/>
</bean>

 <bean name="/user/*.htm" class="project2.UserController2" >
    <property name="userDAO" ref="myUserDAO" />
</bean>

<bean name="indexController"  
class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="userForm" />

 </beans> 
```

而web.xml文件如下

```
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>UserController2</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
 </servlet>
<servlet-mapping>
     <servlet-name>UserController2</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

现在我收到以下错误

```
org.apache.jasper.JasperException: java.lang.IllegalStateException: Neither  
BindingResult nor plain target object for bean name 'user' available as request 
attribute 
```

我只在 jsp 和控制器类中使用了“用户”。有人告诉我将以下代码行从

```
modelMap.addAttribute("user", new User()); 
```

对此

```
modelMap.addAttribute("user", new user()); 
```

但我收到错误

```
 user cannot be resolved to a type 
```

我已经彻底搜索了网络，查看了各种示例，但我无法解决代码。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T08:12:15.337

我有同样的问题。确保在控制器中返回页面 userForm.jsp 时放入代表用户的模型对象。例如，在我的情况下：

```
@RequestMapping(value = "registration", method = RequestMethod.GET)
public String registration(Model model) {
    model.addAttribute("UserForm", new UserForm()); // !!!!
    return PATH_REGISTRATION;
}

 @RequestMapping(value = "/register", method = RequestMethod.POST)
public String register(
        @Valid @ModelAttribute("UserForm") UserForm userForm,
        BindingResult result, HttpServletRequest request, Model model,
        Principal principal) {
    if (!result.hasErrors()) {
        model.addAttribute("message", "Registration success");
    }
    try {
        userService.create(createUser(userForm));
    } catch (SQLException e) {
        model.addAttribute("message", "Can't create user");
        log.error("Can't create user " + userForm.getLogin(), e);
    }
    return PATH_REGISTRATION;
} 
```

在 JSP 中：

```
...
<form:form method="POST" action="registrate" commandName="UserForm">
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:50:10.513

如果我没记错的话，我认为您正在混合 Spring 新版本和旧版本中的一些概念。在您的控制器中：

*   使用`@Controller`和拆卸`extends MultiActionController`（弹簧 3 方式）

或者

*   从延伸`MultiActionController`和移除`@Controller`（弹簧 2 方式）。您还应该在 Spring XML 配置文件中声明这个 bean。

也许这有帮助，或者我错了，但对我来说用这两种东西声明一个控制器似乎很奇怪。

此外，您必须`UserController2`从`web.xml`. 如果您使用 Spring 2 方法，则必须在 Spring XML 配置文件中声明它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T10:50:56.913

**我在我的项目中遇到了同样的问题。我通过修改控制器类解决了这个问题。这里是代码：** LoginForm.jsp 页面

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Login</title>
<style>
    .error { 
        color: red; font-weight: bold; 
    }
</style>
</head>
<body>
    <div align="center">
        <h2>Spring MVC Form Validation Demo - Login Form</h2>
        <table border="0" width="90%">
        <form:form action="login" commandName="userFormNew">
                <tr>
                    <td align="left" width="20%">Email: </td>
                    <td align="left" width="40%"><form:input path="email" size="30"/></td>
                    <td align="left"><form:errors path="email" cssClass="error"/></td>
                </tr>
                <tr>
                    <td>Password: </td>
                    <td><form:password path="password" size="30"/></td>
                    <td><form:errors path="password" cssClass="error"/></td>
                </tr>
                <tr>
                    <td></td>
                    <td align="center"><input type="submit" value="Login"/></td>
                    <td></td>
                </tr>
        </form:form>
        </table>
    </div>
</body>
</html> 
```

在 LoginForm.jsp 页面中观察**commandName="userFormNew"** 并且在控制器中我有两种方法一种是自动填充 loginForm.jsp 页面，当我们尝试使用**@RequestingMapping(value="/",method运行应用程序时=RequestMethod.GET)**并通过重定向 LoginForm.jsp 页面返回模型对象。

这是控制器类：

```
@Controller
public class LoginController {
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String viewLogin(Map<String, Object> model) {
        User user = new User();
        model.put("userFormNew", user);
        return "LoginForm";
    }

    @RequestMapping(value = "/login", method = RequestMethod.POST)
    public String doLogin(@Valid @ModelAttribute("userFormNew") User userForm,
            BindingResult result, Map<String, Object> model) {

        if (result.hasErrors()) {
            return "LoginForm";
        }

        return "LoginSuccess";
    }
} 
```

我的模型类：

```
public class User {
    @NotEmpty
    @Email
    private String email;

    @NotEmpty(message = "Please enter your password.")
    @Size(min = 6, max = 15, message = "Your password must between 6 and 15 characters")
    private String password;

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

# wix - 无法删除其他安装程序安装的文件

> ID：15972424
> 
> 赞同：1
> 
> 时间：2013-04-12T13:17:10.003
> 
> 标签：wix

我想要：

1.  创建一个目录。
2.  运行另一个安装程序（不是 MSI），将一些文件从第 1 点安装到目录中。
3.  替换在第 2 点安装的一些文件。

所有这些都必须在我在 WiX（Windows Installer XML）的帮助下创建的安装下完成。

下面是我的 WiX 文件的一个重要部分。问题是这个安装不会像我想要的那样替换文件。要删除文件，我使用带有 Property 属性的 RemoveFile 元素，因为它是删除不在安装程序数据库中的文件的唯一方法（除了在自定义操作中编写代码 - 这是我不想要的）。

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFilesFolder">
        <Directory Id="ManufacturerDirectory" Name="$(var.Manufacturer)">
            <Directory Id="ProductDirectory" Name="$(var.ProductName)">
                <Directory Id="SubDirectory" Name="$(var.SubDirectoryName)">
                </Directory>
            </Directory>
        </Directory>
    </Directory>
</Directory>

<!-- Create the directory at point 1\. -->
<Component
    Id="RemoveOldData" Guid="..."   KeyPath="yes" 
    Directory="ManufacturerDirectory">
    <CreateFolder Directory="ProductDirectory" />
</Component>

<!-- Following two components replace the file(s) (point 3). -->

<Component
    Id="RemoveOldData" Guid="..."
    Directory="SubDirectory" KeyPath="yes"      
    >   
    <RemoveFile 
        Id="Remove_MyFile.exe" On="install"
        Property="SUBDIRECTORYPROPERTY" Name="MyFile.exe" />
</Component>

<Component
    Id="FilesToReplace" Guid="..."
    Directory="SubDirectory">
    <File 
        Id="MyFile.exe" Vital="yes" KeyPath="yes" DiskId="1"        
        Source="$(var.SourcePath)MyFile.exe" Name="MyFile.exe"
        />
</Component>

<Binary Id="WiseInstallation" SourceFile="$(var.WiseSourcePath)..." />

<!-- Launch Wise installation at point 2\. -->
<CustomAction
    Id="LaunchWiseInstallation"
    BinaryKey="WiseInstallation"
    ExeCommand=""
    Return="check"
    Execute="deferred"
    Impersonate="yes" />

<!-- Following custom action assigns a property.
This needs to remove files that are not in the current installer database.
To do it, the Property attribute of the RemoveFile element is needed. -->   
<CustomAction
    Id="Assign_SUBDIRECTORYPROPERTY"
    Property="SUBDIRECTORYPROPERTY"
    Value="[SubDirectory]" />

<InstallExecuteSequence>
    <Custom Action="Assign_SUBDIRECTORYPROPERTY" After="InstallInitialize" >
        NOT Installed</Custom>
    <Custom Action="LaunchWiseInstallation" After="CreateFolders" >
        NOT Installed</Custom>
    <RemoveFiles Sequence="3720"/>
    <RemoveFolders Sequence="3730"/>
</InstallExecuteSequence> 
```

从 Orca 的角度来看 InstallExecuteSequence：

*   验证产品 ID 700
*   成本初始化 800
*   文件成本 900
*   成本最终确定 1000
*   安装验证 1400
*   安装初始化 1500
*   **分配_SUBDIRECTORYPROPERTY 1501**
*   过程组件 1600
*   取消发布功能 1800
*   删除注册表值 2600
*   删除快捷方式 3200
*   创建文件夹 3700
*   **LaunchWise 安装 3701**
*   **删除文件 3720**
*   **删除文件夹 3730**
*   安装文件 4000
*   创建快捷方式 4500
*   写入注册表值 5000
*   注册用户 6000
*   注册产品 6100
*   发布功能 6300
*   发布产品 6400
*   安装完成 6600

我还检查了安装日志文件：

*   SUBDIRECTORYPROPERTY 属性分配得当；
*   正确遵循了 InstallExecuteSequence；
*   安装完成，没有错误。

但是这些文件从未被删除或替换！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:52:53.303

首先，一个 MSI 不能安装另一个 MSI，所以 #2 中的安装包不能是一个 MSI。如果不是，则安排启动其他安装包的自定义操作，如下所示：

```
<InstallExecuteSequence>
   <Custom Action='LaunchOtherInstaller' After='CreateFolders' />
</InstallExecuteSequence> 
```

该`CreateFolders`操作发生在`InstallFiles`操作之前，因此您的安装程序应该能够在两者之间跳转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:33:41.277

首先，我意识到 MSI 不能直接删除由另一个安装程序（MSI 与否）安装的文件 - 它仅适用于安装过程中其数据库中提到的文件（即由它自己或以前版本安装的文件） ）。但是通过自定义操作可以。因此，如果没有自定义操作，就无法实现第 3 点。所以正确的顺序可以是这样的：

```
<InstallExecuteSequence>
  <Custom 
    Action="LaunchWiseInstallation" 
    After="CreateFolders" 
    >
    NOT Installed
    </Custom>
  <Custom 
    Action="DeleteOldData" 
    After="LaunchWiseInstallation" 
    >
    NOT Installed
    </Custom>
</InstallExecuteSequence> 
```

其中 DeleteOldData 是一个 CustomAction 元素，它指向包含实际删除文件的自定义操作的 DLL 或 .exe。只能提到，也许 DeleteOldData 自定义操作应该具有 Execute="deferred" 属性以在脚本中运行，并且应该具有 Impersonate="yes" 属性以避免 UAC 限制和文件访问。如果安装程序由具有高于 LocalSystem 预先设置的管理权限的用户运行，则后者是正确的。

并且 RemoveFile 标签只能与 MSI 数据库中提到的文件一起使用 - 而不是随机文件。所以在这种情况下是没有用的。

# c - 如何优化核心转储文件大小？

> ID：15972425
> 
> 赞同：2
> 
> 时间：2013-04-12T13:17:16.707
> 
> 标签：c, linux, debugging, embedded, coredump

我想在运行 Linux 的嵌入式系统上为我的大型 C 应用程序生成核心转储文件。如果我设置

```
 ulimit -c unlimited 
```

我得到大约 100Mb 的大转储文件。这对我来说太多了，因为如果我的应用程序崩溃并且核心没有完全生成，我的系统就会重新启动。此外，它更难以操作（压缩或压缩）。

我认为我不需要整个内存转储，我只想看看当我有一个时我的崩溃在哪里。所以我只需要堆栈和我猜的堆......

如果我设置

```
ulimit -c 1024 
```

我会丢失什么数据？

在 core(5) 手册页上，他们解释了我们如何设置掩码来选择要转储的数据：

```
 bit 0  Dump anonymous private mappings.
       bit 1  Dump anonymous shared mappings.
       bit 2  Dump file-backed private mappings.
       bit 3  Dump file-backed shared mappings.
       bit 4 (since Linux 2.6.24)
              Dump ELF headers.
       bit 5 (since Linux 2.6.28)
              Dump private huge pages.
       bit 6 (since Linux 2.6.28)
              Dump shared huge pages. 
```

也许那里有优化？

谢谢！

# c# - 将双精度转换为有意义的时间

> ID：15972427
> 
> 赞同：0
> 
> 时间：2013-04-12T13:17:28.673
> 
> 标签：c#, datetime

基本上我设置了用户可以使用的时间限制。现在，每次按下按钮时，该人累积的任何时间都会从该总值中扣除。

但是，由于限制将表示为 156 小时，并且 5 分钟的日期时间表示将是 00.05，因此结果将是 155.95，而不是 155.55 。

我像这样解决这个问题

```
 string date2 = TotalMonthlyHours.ToString("HH.mm");
                    double date = double.Parse(date2);                  
                    RunningTotal = date + RunningTotal;
                    Total = limit - RunningTotal; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:22:23.297

我认为您试图将 5 分钟表示为 0.05。这样做的方法是首先将分钟作为整数获取。然后简单地转换为双倍。

```
double floatmins = minutes/100.0; 
```

然后你像这样在另一个方向转换：

```
int minutes = (int) (floatmins*100.0); 
```

但是，我敦促您不要再这样做了。你不能指望对这样的数量进行算术运算。2.20-1.50的结果是什么？你我都知道是 30 分钟，但计算机显示 0.70，这根本没有用。

使用真正的小数表示存储小时数。所以 5 分钟`5/60.0`。或者将总分钟数存储在一个整数中。或整数的总秒数。或者一个`TimeSpan`.

关键是您可以编写自己的辅助例程，将合理的存储格式转换为人类可读的值。但是您必须将原始数据存储在允许算术运算的表示中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:05:27.760

我想我是通过做这样的事情来解决的

```
 string[] times = date.ToString().Split('.');

                    if (date != 0.0)
                    {
                        string minutesString = times[1];
                        string hoursString = times[0];
                        double minutes = Convert.ToDouble(minutesString);
                        double hours = Convert.ToDouble(hoursString);

                        // end of splitting
                        TimeSpan Limit = TimeSpan.FromHours(limit);

                        TimeSpan Hours = TimeSpan.FromHours((int)hours);
                        TimeSpan Minutes = TimeSpan.FromMinutes((int)minutes);

                        TimeSpan SubTotal = Hours + Minutes;

                        Time = Limit - SubTotal;
                    } 
```

编辑：很高兴你想出了和我一样的想法，只需阅读你的回复大卫，希望它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T13:25:34.027

我会先将其转换为分钟，而不是在日期中添加分钟

```
var min = Convert.ToDouble(Convert.ToDecimal(textbox.Text) * 60);
DateTimePickerEnd.DbSelectedDate = e.NewDate.Value.AddMinutes(min); 
```

# java - JUnit 自定义跑步者不起作用？

> ID：15972430
> 
> 赞同：2
> 
> 时间：2013-04-12T13:17:35.813
> 
> 标签：java, html, exception, junit

我正在尝试编写一个自定义 Runner，它只是按随机顺序进行测试。跑者：

```
public class TestClassRunnerForParameters extends BlockJUnit4ClassRunner {
    public TestClassRunnerForParameters(Class<?> type) throws Exception {
        super(type);
    }

    protected java.util.List<org.junit.runners.model.FrameworkMethod> computeTestMethods() {
        java.util.List<org.junit.runners.model.FrameworkMethod> methods = super
                .computeTestMethods();
        Collections.shuffle(methods);
        return methods;
    }
} 
```

现在，如果它不是参数化测试，这可以正常工作。是否可以使用参数测试来做到这一点？实现参数化接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:22:18.333

我会说这个错误是非常自我描述的：

> 自定义运行器类 TestClassRunnerForParameters 应该有一个带有签名 TestClassRunnerForParameters(Class testClass) 的公共构造函数

您的类没有具有该签名的构造函数。它唯一的构造函数有参数`Class<?> type`,`List<Object[]> parameterList`和`int i`. 您应该删除后两个参数。另外，该构造函数不是`public`；你应该`public`在它前面添加。

此外，如果您正在尝试构建参数化测试，您可能会在`org.junit.runners.Parameterized`runner 中进行测试，因为它正是这样做的。这是一个很好的[教程](http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:20:42.063

只需添加一个构造函数，（按照建议）：

```
public TestClassRunnerForParameters(Class testClass) {
   ...
} 
```

并让它委托给您的构造函数。您的构造函数应该`public`在这种情况下，因为 JUnit/Surefire 正在使用反射。

# php - 使用 mysql_fetch_array() 和 foreach() 显示结果时本地 Apache 服务器崩溃

> ID：15972441
> 
> 赞同：0
> 
> 时间：2013-04-12T13:17:52.597
> 
> 标签：php, apache, foreach

所以，基本上我想做的是在页面上显示搜索命中。我已经设置了一个发布到下面页面的表单，然后在我的 MySQL 数据库中搜索这些数据，结果应该以以下格式显示：

* * *

姓名
个人资料 图片 路径
年龄

* * *

我在互联网上进行了广泛搜索，发现您必须使用 while 循环，因为我之前只是使用了 foreach 循环。

但是每当我搜索某些东西时，我的 apache 服务器就会崩溃。我认为这可能是因为 while 循环，因为它之前没有崩溃，但它只会显示**同一**组结果（名称、图像和年龄）一定次数，具体取决于在数据库中找到的行数.

这是搜索页面代码：

```
require_once "lib/mysql.php"; 
```

if (isset($_POST[search]) && !empty($_POST[search])){

```
$search = $_POST[search];

// The mysql class used for functions.

$mysql = new mysqlHandle;

// Opens access to the mysql server.

$mysql->accessOpen('root', '', 'Portfolio', 'localhost');

// Sets $rows to number of entries (rows) with the 'Name' value of $search.

$rows = $mysql->tableCheckNum('*', stats, Name, $search, Portfolio);

echo "<div id='content'>
    <div id='content_main'>
        <h2>Search Results for '$search'</h2>
        <br/><hr/><br/>";

// Makes sure that there's at least 1 search hit.

if ($rows>0){

    // Sets the current hit number. (the first one is 1, the second is 2 et.c)

    $num = 1;

    $user = array();

    // My mysql function for checking the order of entries, see the attached myqsl code.

    while ($result = $mysql->tableCheckOrder('*', stats, Name, $search, ID, DESC, Portfolio)){

        // The $user array should hold the user's (searched for) details.

        $user[] = $result;

        foreach ($user as $result){

        // Makes sure that we haven't exceeded the number of rows.

            if ($num<=$rows){

            // Adds one to the number of displayed rows, as we have dsplayed another.

                $num++;

            // Prints the user's (searched for) details.

                print_r ($user[Name]."<br/>");
                print_r ($user[Image]."<br/>");
                print_r ($user[Age]."<br/>"."<br/>"."<hr/>"."<br/>");

            }

        }               
    }

}else{

    echo "No users found";

}

echo '</div>
    </div>'; 
```

}

这是适用的 MySQL 代码：

```
// Gets order of entries (rows) The indentations under "function tableCheckOrder" isn't showing up btw.
    function tableCheckOrder($span, $table, $column, $value, $order, $mode, $base){

    mysql_select_db($base);

    $this->query11="SELECT $span FROM $table WHERE $column = '$value' ORDER BY $order $mode";
    $this->result11=mysql_query($this->query11) or die("<br/>"."Invalid $table CHECK ORDER query: " .mysql_error());

    return mysql_fetch_array($this->result11, $result_type = MYSQL_BOTH);

}

// This function checks amount of rows in table.

function tableCheckNum($span, $table, $column, $value, $base){

    mysql_select_db($base);

    $this->query="SELECT $span FROM $table WHERE $column = '$value'";
    $this->result=mysql_query($this->query) or die("Invalid $table CHECK NUM query: " .mysql_error());

    return mysql_num_rows($this->result);

} 
```

这是我的“统计”表结构的图片：

![我的“统计”表结构](https://i.stack.imgur.com/IKm3C.png)

我真的希望能够显示搜索结果而不会崩溃

如果我可以给你更多的信息，请询问！

提前致谢！

# c# - Issue comparing String to array, then returning value from a second array?

> ID：15972442
> 
> 赞同：1
> 
> 时间：2013-04-12T13:17:57.033
> 
> 标签：c#, arrays

I have created a piece of code in c# that takes an incoming phone number, and presents this as variable `lineuri`.

There is then an array containing each of the possible international Dialling Prefixes (e.g. 44 for the uk, 00 for the US e.t.c.

However, in order for this to function, i need to present to the user in a message box the country that the incoming call is coming from.

Essentially, i guess i need to take variable `LineUri`, and compare it to the Array of international number prefixes. If this matches, i then need a method of returning the Country Name from a second Array containing the names of each country?

Apologies if this is overly wordy - first time posting on this site.

If any further information is required, more than happy to help.

Appreciate any help you are able to offer - Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:24:49.877

I would not use an array. You need a keyed collection:

```
Dictionary<string,string> countriesByDialingCode = new Dictionary<string,string>();

...

countriesByDialingCode.Add("00", "USA");
countriesByDialingCode.Add("44", "USA");

...

string country = countriesByDialingCode["44"]; 
```

# sharepoint-2013 - 在 Windows Server 2012 上配置 WCF 服务

> ID：15972444
> 
> 赞同：1
> 
> 时间：2013-04-12T13:18:04.250
> 
> 标签：sharepoint-2013, windows-server-2012

我安装了 windows server 2012 和 sharepoint 2013。现在我想在服务器上配置我的 wcf 服务。

创建新的应用程序池和站点后，它向我显示以下 **错误 HTTP 错误 500.19 - 内部服务器错误**

无法读取配置部分“system.serviceModel”，因为它缺少部分声明

[我还在HTTP 错误 404.17 - 未找到](https://stackoverflow.com/questions/7083533/http-error-404-17-not-found)下面的链接上找到了解决方案

建议在哪里运行命令“servicemodelreg -i”。我也做了同样的事情，我的服务开始工作了。但是共享点服务停止工作，显示以下错误

**异常消息：**无法从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.ServiceModel.Activation.HttpModule”。

请帮我解决这个问题......

谢谢是提前

# jquery - 我不想要 jQuery YouTube 弹出播放器插件中的 YouTube 底部链接

> ID：15972448
> 
> 赞同：0
> 
> 时间：2013-04-12T13:18:08.190
> 
> 标签：jquery, youtube, youtube-api

您好，我正在使用 jQuery YouTube Popup Player Plugin 在我的网站中嵌入 YouTube 视频。我不想要带有徽标的 YouTube 底部链接。我该怎么办。请![在此处输入图像描述](https://i.stack.imgur.com/ZIcFc.png)帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:23:52.730

您唯一能做的就是将 &modestbranding=1 添加到您的字符串中

例子`http://www.youtube.com/embed/n3dBmbyoqbU?modestbranding=1`

在这里您可以找到所有可用的参数 [https://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

# linux - 用于保护文件免受 Alt + f4 影响的陷阱命令

> ID：15972454
> 
> 赞同：0
> 
> 时间：2013-04-12T13:18:38.537
> 
> 标签：linux, bash, shell, signals, bash-trap

我想知道**Trap**命令是否用于保护文件免受**SIGKILL (ALT+ F4)**信号的影响。如果是，那么以下命令会这样做吗？

```
trap ~/Desktop/left.py SIGABRT 
```

我正在尝试中止所有试图关闭的信号`left.py`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:23:12.697

ALT+F4 通常不会发送`SIGKILL`. 如果您试图阻止一个进程在其父 shell 窗口关闭时被杀死，您需要类似...

```
nohup ~/Desktop/left.py & 
```

...诱捕`SIGHUP`.

或者，您可以在脚本本身内捕获所有信号（`SIGKILL`和除外）。`SIGSTOP`看一下 Python[信号](http://docs.python.org/2/library/signal.html)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:22:06.383

在您的程序文本中`left.py`可以执行以下操作：

```
trap "" INT 
```

也就是说，在引发 SIGINT 时什么也不做。如果需要，您也可以使用 TERM。我不确定 Alt+F4 在您的平台上究竟发出了哪个信号，您也提到了 SIGABRT 和 SIGKILL ；你不能忽略 SIGKILL。

# networking - Kryonet：发现主机总是返回 null

> ID：15972456
> 
> 赞同：0
> 
> 时间：2013-04-12T13:18:48.610
> 
> 标签：networking, discovery, kryonet

我尝试使用 Kryonet 创建一个在线游戏。

当我提供 IP 地址（在代码中硬编码）时，连接和发送/接收工作。但是如果我尝试发现服务器，它永远不会响应我：该方法总是返回 null。

服务器：

```
public static int UDP_PORT = 54723, TCP_PORT = 54722;
public static void main(String args[]) {

    /* ***** server starting ***** */
    Server server = new Server();
    server.start();

    try {
        server.bind(TCP_PORT, UDP_PORT);
    } catch (IOException e) {
        System.out.println("server not deployed");
        e.printStackTrace();
        System.exit(1);
    }
    System.out.println("server started");
    server.addListener(new ServerListener());
} 
```

客户：

```
public static void main(String[] args) {
    Client client = new Client();

    client.start();
    InetAddress addr = client.discoverHost(UDP_PORT, 10000);
    System.out.println(addr);
    if(addr == null) {
        System.exit(0);
    }

    try {
        client.connect(5000, addr, TCP_PORT, UDP_PORT);
    } catch (IOException e) {
        e.printStackTrace();
    }

    for(int i = 0; i < 100; i++) {
        client.sendTCP(new String("bouh" + i));
    }

    client.close();
} 
```

这段代码有什么问题？请注意，我的测试是在 localhost 上启动的。这里有问题吗？

谢谢大家的回复。

乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:04:04.793

如果您遇到与发现主机（[http://code.google.com/p/kryonet/issues/detail?id=29](http://code.google.com/p/kryonet/issues/detail?id=29)）相关的相同问题，然后从 SVN 签出项目（而不是使用 2.20 zip文件）为我解决了这个问题。

# c++ - 如何将`std::string`传递给`QString``arg`方法？

> ID：15972461
> 
> 赞同：2
> 
> 时间：2013-04-12T13:19:25.100
> 
> 标签：c++, qt, templates

```
class StringResourceTable
{
private:
    StringResourceTable();

public:
    static StringResourceTable& instance();

    void configure(const QString& path);
    QString message(const QString& id) const;

    template <typename T1>
    QString message(const QString& id, T1 a1) const
    {
        return message(id).arg(a1);
    }

    template <typename T1, typename T2>
    QString message(const QString& id, T1 a1, T2 a2) const
    {
        return message(id).arg(a1).arg(a2);
    }

    template <typename T1, typename T2, typename T3>
    QString message(const QString& id, T1 a1, T2 a2, T3 a3) const
    {
        return message(id).arg(a1).arg(a2).arg(a3);
    }

private:
    QString m_path;
    QMap<QString, QString> m_map;
} 
```

这段代码使用`arg`if `QString`class 的方法来替换`%1`, `%2`, ... 的一些参数。参数可以是 int、char*、double 和任何`QString`支持的，但不是`std::string`. `std::string`传递给任何`message`函数都会非常方便。我不能专门化它们，`std::string`因为它的顺序没有定义。可能是第一，第二，...

我认为它应该是一个模板结构，它将转换`std::string`为`QString`使用它的`.c_str()`方法。谁能帮忙写一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:22:27.010

[fromStdString](http://qt-project.org/doc/qt-4.8/qstring.html#fromStdString)函数怎么样？

但是，您可以使用类似的东西

```
template<typename T>
const T& convert(const T& v)
{
   return v;
}

QString convert(const std::string& s)
{
   return QString::fromStdString(s);
} 
```

并使用

```
return message(id).arg(convert(a1)); 
```

# windows - 在 Windows 32 位上构建 GMP

> ID：15972462
> 
> 赞同：2
> 
> 时间：2013-04-12T13:19:27.100
> 
> 标签：windows, cygwin, mingw, 32-bit, gmp

您好，我正在尝试编译 gmp，因为我需要它用于 Perl 模块。我必须手动安装everyrthing，因为机器无法访问互联网。我在 GMP 文件夹的 cygwin 中运行了 configure 并使用了这个命令：

```
./configure --prefix=C:\gmp --disable-static --enable-shared 
```

现在这也没有问题，并且在我运行时创建了 MAKEFILE，这会发生：

```
$ make
gcc -std=gnu99 `test -f 'gen-fac.c' || echo './'`gen-fac.c -o gen-fac.exe
./gen-fac 32 0 >fac_table.h || (rm -f fac_table.h; exit 1)
gcc -std=gnu99 `test -f 'gen-fib.c' || echo './'`gen-fib.c -o gen-fib.exe
./gen-fib header 32 0 >fib_table.h || (rm -f fib_table.h; exit 1)
./gen-fib table 32 0 >mpn/fib_table.c || (rm -f mpn/fib_table.c; exit 1)
gcc -std=gnu99 `test -f 'gen-bases.c' || echo './'`gen-bases.c -o gen-bases.exe -lm
./gen-bases header 32 0 >mp_bases.h || (rm -f mp_bases.h; exit 1)
./gen-bases table 32 0 >mpn/mp_bases.c || (rm -f mpn/mp_bases.c; exit 1)
gcc -std=gnu99 `test -f 'gen-trialdivtab.c' || echo './'`gen-trialdivtab.c -o gen-trialdivtab.exe -lm
./gen-trialdivtab 32 8000 >trialdivtab.h || (rm -f trialdivtab.h; exit 1)
gcc -std=gnu99 `test -f 'gen-jacobitab.c' || echo './'`gen-jacobitab.c -o gen-jacobitab.exe
./gen-jacobitab >mpn/jacobitab.h || (rm -f mpn/jacobitab.h; exit 1)
gcc -std=gnu99 `test -f 'gen-psqr.c' || echo './'`gen-psqr.c -o gen-psqr.exe -lm
./gen-psqr 32 0 >mpn/perfsqr.h || (rm -f mpn/perfsqr.h; exit 1)
make  all-recursive
make[1]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp'
Making all in tests
make[2]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests'
Making all in .
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests'
make[3]: Für das Ziel »all-am« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests'
Making all in devel
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/devel'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/devel'
Making all in mpn
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpn'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpn'
Making all in mpz
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpz'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpz'
Making all in mpq
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpq'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpq'
Making all in mpf
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpf'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/mpf'
Making all in rand
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/rand'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/rand'
Making all in misc
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/misc'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/misc'
Making all in cxx
make[3]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/cxx'
make[3]: Für das Ziel »all« ist nichts zu tun.
make[3]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests/cxx'
make[2]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/tests'
Making all in mpn
make[2]: Entering directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/mpn'
/bin/sh ../libtool --tag=CC    --mode=compile gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -D__GMP_WITHIN_GMP -I..  -DOPERATION_`echo fib_table | sed 's/_$//'`     -m32 -O2 -pedantic -fomit-frame-pointer -mtune=corei7 -march=corei7 -c -o fib_table.lo fib_table.c
libtool: compile:  gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -D__GMP_WITHIN_GMP -I.. -DOPERATION_fib_table -m32 -O2 -pedantic -fomit-frame-pointer -mtune=corei7 -march=corei7 -c fib_table.c  -DDLL_EXPORT -DPIC -o .libs/fib_table.o
In file included from ../gmp-impl.h:134:0,
                 from fib_table.c:4:
../gmp-mparam.h:1:1: error: expected identifier or '(' before '!' token
../gmp-mparam.h:1:1: error: stray '\377' in program
../gmp-mparam.h:1:1: error: stray '\376' in program
../gmp-mparam.h:1:14: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:16: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:18: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:20: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:22: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:24: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:26: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:28: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:30: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:32: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:34: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:36: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:38: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:40: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:42: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:44: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:46: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:48: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:50: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:52: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:54: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:56: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:58: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:60: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:62: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:64: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:66: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:68: warning: null character(s) ignored [enabled by default]
../gmp-mparam.h:1:70: warning: null character(s) ignored [enabled by default]
In file included from ../gmp-impl.h:144:0,
                 from fib_table.c:4:
e:\fagprogramme\mingw\bin\../lib/gcc/mingw32/4.7.1/../../../../include/inttypes.h:272:1: error: unknown type name 'wchar_t'
e:\fagprogramme\mingw\bin\../lib/gcc/mingw32/4.7.1/../../../../include/inttypes.h:273:29: error: unknown type name 'wchar_t'
e:\fagprogramme\mingw\bin\../lib/gcc/mingw32/4.7.1/../../../../include/inttypes.h:274:1: error: unknown type name 'wchar_t'
e:\fagprogramme\mingw\bin\../lib/gcc/mingw32/4.7.1/../../../../include/inttypes.h:275:9: error: unknown type name 'wchar_t'
Makefile:389: recipe for target `fib_table.lo' failed
make[2]: *** [fib_table.lo] Error 1
make[2]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp/mpn'
Makefile:833: recipe for target `all-recursive' failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/cygdrive/e/FAGProgramme/Perl Modules/gmp'
Makefile:656: recipe for target `all' failed
make: *** [all] Error 2 
```

现在我不知道该怎么办。我也尝试过没有任何参数它仍然给出相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-18T03:55:05.527

2 1/2 年后，但我也许可以为遇到类似问题的任何人回答这个问题（比如我！）。

打开一个 cygwin 终端，创建一个名为的小文本文件`hello.txt`并在其中放入少量文本，然后执行以下命令：

```
ln -s hello.txt link.txt 
```

现在，`cat link.txt`将显示您的文本。但是，如果你进入 Windows，打开 Notebook 并`link.txt from`在那里打开，你会看到一些非常奇怪的字符。您可能会看到“ `hello.txt`”。或无。

原因是 cygwin 的 ln 命令创建了一种只有 cygwin 知道如何处理的假链接。Windows 和 Windows 程序不知道这是一个 cygwin 链接，所以他们只是打开文件并看到 cygwin 放在那里的假东西。

现在，如果您查看失败的命令：

```
/bin/sh ../libtool --tag=CC    --mode=compile gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -D__GMP_WITHIN_GMP -I..  -DOPERATION_`echo fib_table | sed 's/_$//'`     -m32 -O2 -pedantic -fomit-frame-pointer -mtune=corei7 -march=corei7 -c -o fib_table.lo fib_table.c
libtool: compile:  gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -D__GMP_WITHIN_GMP -I.. -DOPERATION_fib_table -m32 -O2 -pedantic -fomit-frame-pointer -mtune=corei7 -march=corei7 -c fib_table.c  -DDLL_EXPORT -DPIC -o .libs/fib_table.o 
```

你会看到 libtool 正在运行 gcc，而 gcc 必须在某个时候尝试打开`gmp-mparam.h`，**这是一个链接**。因为它将它作为垃圾而不是`gmp-mparam.h`链接到的内容来读取，这一定意味着 gcc 正在使用某些 Windows 库来读取文件。所以，gcc 失败了。

此链接由`config.status`您运行时创建`configure`。

现在，这样做：

```
rm link.txt
export CYGWIN=winsymlinks
ln -s hello.txt link.txt 
```

现在`cat link.txt`AND Notebook 都应该显示`hello.txt`. 原因是设置`CYGWIN=winsymlinks`告诉 cygwin 创建 Windows 链接文件。[在 Cygwin 用户指南的第 3 章中](https://cygwin.com/cygwin-ug-net/using.html#pathnames-symlinks)阅读有关 cygwin 链接的更多信息。

现在`CYGWIN`已经设置了环境变量，再次运行 configure，它将使用“正确的”Windows 链接文件重新创建链接。

除问题外的任何错误`error: stray '\377' in program`都有其他原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T07:30:19.600

切换到 Strawberry Perl 并使用本教程，这就是解决方案：

[http://www.cs.nyu.edu/exact/core/gmp/](http://www.cs.nyu.edu/exact/core/gmp/)

# xml - 从 xsd（xml 模式）文件中提取值

> ID：15972463
> 
> 赞同：1
> 
> 时间：2013-04-12T13:19:27.583
> 
> 标签：xml, vb.net, xsd

我有以下 xsd 文件（只是一个简单的例子），我想从中提取一些值。

```
<xs:element name="ACES">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="ADVANCE-PAYMENT-AMOUNT-DEPOSITEDS"/>
      </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="ADVANCE-PAYMENT-AMOUNT-DEPOSITEDS">
<xs:complexType>
  <xs:sequence>
    <xs:element ref="ADVANCE-PAYMENT-AMOUNT-DEPOSITED" minOccurs="0" maxOccurs="unbounded"/>
  </xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="ADVANCE-PAYMENT-AMOUNT-DEPOSITED" type="T_GENERAL_DATA_ONE"/>

<xs:complexType name="T_GENERAL_DATA_ONE">
    <xs:simpleContent>
        <xs:extension base="ST_LEGNTH_13">
            <xs:attribute name="Duration">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:enumeration value="Jul-Jan"/>
                        <xs:enumeration value="Aug-Feb"/>
                        <xs:enumeration value="Sep-Mar"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="Description">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:enumeration value="Total"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:attribute>
        </xs:extension>
    </xs:simpleContent>
</xs:complexType>

<xs:simpleType name="ST_LEGNTH_13">
    <xs:restriction base="xs:string">
        <xs:maxLength value="16"/>
        <xs:pattern value="\d{0,13}(\.[0]{1,2})?"/>
    </xs:restriction>
</xs:simpleType> 
```

我正在寻找一些代码，显示如何使用[System.Xml.Schema](http://msdn.microsoft.com/en-us/library/system.xml.schema.aspx) API从 XSD 文件中获取 xs:enumeration 和 xs:maxLength 值，如此处[所示](http://www.codeproject.com/Articles/30109/Parsing-XSD-Schema-with-SOM)。

# .net - 相同的代码，不同的运行时间

> ID：15972465
> 
> 赞同：0
> 
> 时间：2013-04-12T13:19:42.260
> 
> 标签：.net, vb.net, wcf, web-services

我有两个应用程序，使用一个通用方法和相同的代码，第一个应用程序是一个 32 位编译的网站，第二个是 64 位编译的 wcf 服务。

两台机器都是 64 位：Ram 6 gb 处理器 Intel(R) Xeon(R) CPU E5645 @2.40 GHZ

问题是同一段代码在 WCF 服务中运行时需要更多时间：

```
 Private Shared Sub AddImageToOutputPDF(ByRef pdfDoc As PdfSharp.Pdf.PdfDocument, ByVal freeImg As FreeImgDLL.freeImage)
    Dim page As PdfSharp.Pdf.PdfPage = pdfDoc.AddPage
    Dim gfx As PdfSharp.Drawing.XGraphics = PdfSharp.Drawing.XGraphics.FromPdfPage(page)
    Dim ts As New TimeSpan
    Dim st As New DateTime
    Dim en As New DateTime

    st = DateTime.Now
    If freeImg.verticleDPI = 0 Then
        freeImg.EstimateAndSetResolution()
    End If

    Dim tiffImage As PdfSharp.Drawing.XImage = PdfSharp.Drawing.XImage.FromFreeImage(freeImg)

    page.Width = New PdfSharp.Drawing.XUnit((tiffImage.Width / tiffImage.HorizontalResolution) * 72)
    page.Height = New PdfSharp.Drawing.XUnit((tiffImage.Height / tiffImage.VerticalResolution) * 72)

    gfx.DrawImage(tiffImage, 0, 0, page.Width, page.Height)

    en = DateTime.Now

    ts = en - st

    _log.Debug("Page Operation--- Add Page To Pdf using PdfSharp. ------------------Time in seconds: " + ts.TotalSeconds.ToString)

End Sub 
```

有什么想法吗？

# windows-phone-7 - 在 windows Phone 中绘制图表

> ID：15972469
> 
> 赞同：2
> 
> 时间：2013-04-12T13:19:53.070
> 
> 标签：windows-phone-7, windows-phone-8

我如何在 windows phone 中绘制这样的图表？(x) 行是我确定的数字；例如 (1 , 2, 3, 4, ..) 和 (y) 行是我以特定方式检索它的值。

[http://sdrv.ms/Yuy6O0](http://sdrv.ms/Yuy6O0)

# jquery - 使用按钮 jQuery 滚动定位的 div

> ID：15972471
> 
> 赞同：2
> 
> 时间：2013-04-12T13:19:55.343
> 
> 标签：jquery

我在其他几个里面有一个定位的 div（出于设计目的嵌套）并且想要一些按钮来控制滚动位置

这是HTML布局

```
 <div class="outer">
        <div class="inner">
            <div class="inner-lines">
                <div class="content">
                    <p>CONTENT HERE</p>
                </div>
            </div>
        </div>
    </div>    

     <div id = "up-down-nav">
        <a class="up-button" href="#">Up</a>
    <a class="down-button" href="#">Down</a>
 </div> 
```

和代码

```
 var step = 25;
var scrolling = false;

// Wire up events for the 'scrollUp' link:
$(".down-button").bind("click", function(event) {
    event.preventDefault();
    // Animates the scrollTop property by the specified
    // step.
    $(".content").animate({
        "margin-top" : "-=" + step + "px"
    });
});

$(".up-button").bind("click", function(event) {
    event.preventDefault();
    $(".content").animate({
        "margin-top" : "+=" + step + "px"
    });
});

function scrollContent(direction) {
    var amount = (direction === "up" ? "-=1px" : "+=1px");
    $(".content").animate({
        "margin-top" : amount
    }, 1, function() {
        if (scrolling) {
            scrollContent(direction);
        }
    });
} 
```

我知道这不起作用，因为 ScrollTop 与文档的滚动有关，但文档不会滚动，因为所有内容都已定位。

[http://jsfiddle.net/s5mgX/1336/](http://jsfiddle.net/s5mgX/1336/)

我只是想不出一个好的选择（设计没有回旋余地）

Margin-top 动画意味着 div 滑过 div 的底部/顶部，我希望它在没有滚动时停止。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:46:25.693

看到这个：**[小提琴](http://jsfiddle.net/WnzKe/1/)**

```
$("#scrollUp").on("click", function (event) {
    // Animates the scrollTop property by the specified
    // step.
    $(".inner-lines").animate({
        scrollTop: "-=" + step + "px"
    });
     event.preventDefault();
})

$("#scrollDown").on("click", function (event) {
    $(".inner-lines").animate({
        scrollTop: "+=" + step + "px"
    });
     event.preventDefault();
}) 
```

# c# - WPF中DataGrid中逗号分隔的列值

> ID：15972473
> 
> 赞同：0
> 
> 时间：2013-04-12T13:19:57.917
> 
> 标签：c#, wpf, datagrid, comma

我`DataGrid`在 WPF 中使用。我将`Teacher`类列表绑定到`DataGrid`.

```
class Teacher
{
   public string Name{get;set;}
   public int Age{get;set;}
   public List<Subject> Subjects {get;set;}
}

class Subject
{
   public string Name{get;set;}
   public int Weight {get;set;}
} 
```

我已经设置了`DataGrid`“教师姓名”、“年龄”、“主题”列。我希望第三列“主题”具有属于类属性的类属性`Subject`的逗号分隔列表。`Name``Subjects``Teacher`

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:06:26.650

如果教师 obj 是 t1。

尝试将值分配给网格，例如：

```
t1.Name
t1.Age
string.Join(", ", from s in t1.Subjects select s.Name) 
```

这样就不需要为主题添加属性。尝试这样做。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:29:25.653

向类中添加一个属性，该属性返回使用 string.Join 分隔的主题逗号。将属性绑定到网格。

检查下面是否使用 string.Join：

```
List<string> val = new List<string>();
val.Add("A");
val.Add("B");
val.Add("C");

string res = string.Join(", ", from item in val select item); 
```

希望能帮助到你。

# c++ - 指向引用的指针是否指向引用的地址或值？

> ID：15972474
> 
> 赞同：2
> 
> 时间：2013-04-12T13:20:01.983
> 
> 标签：c++, pointers, reference

想象以下场景：

```
class ABC
{ 
  public: 
  int abc;
};

ABC& modifyABC(ABC& foo)
{
  foo.abc+=1337;
  return foo;
}

void saveABC(ABC& bar, std::vector<ABC*>& list)
{
  list.push_back(&modifyABC(bar));
}

int main()
{
  ABC foobar;
  std::vector<ABC*> ABCList;
  saveABC(foobar,ABCList);
  return 0;
} 
```

modifyABC() 返回对 ABC 的引用（它在内部也是某种指针，AFAIK）。“地址” & 运算符现在是否返回指向引用地址或引用后面的实际对象的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:22:14.007

我正在努力解决您问题的最后一句话（“*指向参考地址的指针*”？）

可以说的是，`modifyABC()`它引用了一个`ABC`，并返回完全相同的引用。不制作对象的副本。

您的代码的总体效果是将 的地址`foobar`附加到`ABCList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:22:37.430

> “地址” & 运算符现在是否返回指向引用地址或引用后面的实际对象的指针？

在 C++ 中，引用本身没有*自己的*地址。因此，引用的地址意味着引用所指对象的地址。

```
X x; 
X &r = x; //reference
X *p = &r; //same as &x 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:24:16.267

> `modifyABC()`返回对`ABC`（*在内部也是某种指针 AFAIK*的引用）

**不完全是**。

指针是需要一些存储空间并在该存储空间中保存另一个对象的内存地址的对象（变量）。**引用是纯*别名***，如替代名称。理论上，它们根本不需要任何存储空间。

根据 C++11 标准的第 8.3.2/4 段：

> 未指定引用是否需要存储 (3.7)。

因此，指向引用的指针实际上是指向被引用对象的指针，并且对引用执行的**任何操作**（除了在初始化时将其绑定到对象的行为）**实际上是在引用为其别名的对象上执行的**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T13:26:22.767

您对引用所做的任何事情（包括获取其地址）都等同于对引用的对象执行此操作。在 C++ 中，引用本身*不是*对象，不一定占用内存空间，也没有地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:22:22.560

引用和指针是两个不同的概念。您可能会将引用视为**现有对象**的别名。所以就像别名的别名又是原始的别名一样，这里 modifyABC() 的返回值又是对原始对象的引用。获取指向引用的指针始终返回您引用的对象的地址。

# php - 在PHP中将整数转换为X字符串

> ID：15972475
> 
> 赞同：2
> 
> 时间：2013-04-12T13:20:11.503
> 
> 标签：php, string, numbers, integer

我有一个整数，需要将其转换为 4 位字符串。我知道整数介于 1 和 9999 之间。如果数字是 4，我希望输出字符串为“0004”。如果数字是 134，我需要将字符串输出为“0134”等等。

在 PHP 中实现这一目标的最短最优雅的方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T13:21:24.763

我会使用[`sprintf()`](http://php.net/sprintf)：

```
$string = sprintf( "%04d", $number); 
```

使用[这个演示](http://viper-7.com/BuFkfh)：

```
foreach( array( 4, 134) as $number) {
    $string = sprintf( "%04d", $number);
    echo $string . "\n";
} 
```

你得到作为输出：

```
0004
0134 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T13:21:39.423

尝试这个

```
 $num = 1;
 $paddedNum = sprintf("%04d", $num);
 echo $paddedNum; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:23:42.990

尝试这个

```
str_pad($input, 4, "0", STR_PAD_LEFT); 
```

这适用于整数和字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T13:28:30.863

```
$num = rand(1,9999);
echo sprintf( "%04d", $num); 
```

尝试这个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T13:23:49.990

[http://php.net/manual/de/function.str-pad.php](http://php.net/manual/de/function.str-pad.php)

```
$input = 9;
$str = str_pad($input, 4, "0", STR_PAD_LEFT); //results in 0009 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T13:24:52.610

您可以将 sprintf 与 %d 选项一起使用：

```
$NewString = sprintf( "%04d", $OldNumber); 
```

04 告诉 sprintf 您的号码应该是多少位数，如果没有达到该号码，将用零填充。

# c++ - ORA-01460: 未实现或不合理的转换请求的 blob 插入

> ID：15972476
> 
> 赞同：1
> 
> 时间：2013-04-12T13:20:11.547
> 
> 标签：c++, oracle, insert, odbc, blob

我正在尝试将 blob 插入数据库。为此，我使用 c++ 和 microsoft ODBC 驱动程序。

该应用程序适用于少于 4000 位的文件。当我试图插入一个超过 4000 字节（即 3.9 KB）的文件时，它会返回：ORA-01460：未实现或不合理的转换请求。

数据库是 oracle 11.2.0 。我已经在 internat 中搜索了解决方案，但没有找到。

我该如何解决这个问题？我能做些什么 ？

我的插入函数的代码是：

```
try{
    CString strSqlStat(szSqlStat);

    if(IsConnectionDead())
    {
        if(!Reconnect())
            return ERR_RECONNECT_FAILED;
    }

    CFileException exFile;
    CFile sourceFile;
    if(!sourceFile.Open(szFilePath, CFile::modeRead | CFile::shareDenyNone, &exFile))
        return ERR_BLOB_READFILE;

    int nrBytesToRead = (int)sourceFile.GetLength();
    char* pData = new char[nrBytesToRead+1];

    DWORD nrBytesRead;

    if(!ReadFile((HANDLE)sourceFile.m_hFile,pData,nrBytesToRead, &nrBytesRead, NULL))
    {
        delete pData;
        return ERR_BLOB_READFILE;
    }

    sourceFile.Close();

    if(nrBytesRead == 0)//file empty
    {
        delete pData;
        return 0;
    }

    //variables
    SQLRETURN retCode; 
    SDWORD   cbTextSize, lbytes;
    lbytes = (SDWORD)nrBytesRead;
    cbTextSize = SQL_LEN_DATA_AT_EXEC(lbytes);
    PTR pParmID;
    SDWORD cbBatch = nrBytesRead;
    int rgbValue = 1;

    // Bind the parameter marker.
    retCode = retcode = SQLBindParameter(hstmt,  // hstmt
         1,                     // ipar
         SQL_PARAM_INPUT,            // fParamType
         SQL_C_BINARY,               // fCType
         SQL_LONGVARBINARY,           // FSqlType
         lbytes,                  // cbColDef
         0,                     // ibScale
         &rgbValue,       // rgbValue
         0,                     // cbValueMax
         &cbTextSize);            // pcbValue

    SqlError(hstmt,SQL_HANDLE_STMT,_T("WriteBlob"), _T("CTLSqlConnection"), _T("SQLBindParameter"));
    if(retCode != SQL_SUCCESS)
    {
        delete pData;

        if(!EndTransaction(FALSE))
            return ERR_ENDTRANSACTION_FAILED;
        else
            return -3;
    }

    //SQLExec       
    retcode = retCode = SQLExecDirect(hstmt,(SQLTCHAR*)szSqlStat, SQL_NTS);
    retcode = retCode = SQLParamData(hstmt, &pParmID);
        SQLRETURN ret; //ADI fix all warnings - including this var that is unreferenced - delete it if you don't use it
        SQLCHAR* SQLState; //ADI same here
        SQLINTEGER NativeError;
        SQLSMALLINT errmsglen;
        SQLWCHAR errmsg[255];
        SQLWCHAR errstate[50];

SQLGetDiagRec(SQL_HANDLE_STMT, hstmt, 1, (SQLWCHAR*)errstate, &NativeError, (SQLWCHAR*)errmsg, sizeof(errmsg), &errmsglen);

    if(retCode == SQL_NEED_DATA)
    {
        // Put final batch.
        SQLPutData(hstmt, pData, lbytes); 
    }
    else
    {
        delete pData;

        SqlError(hstmt,SQL_HANDLE_STMT,_T("WriteBlob"), _T("CTLSqlConnection"), _T("SQLExecDirect or SQLParamData"));
        if(!EndTransaction(FALSE))
            return ERR_ENDTRANSACTION_FAILED;
        else
            return -4;
    }

    delete pData;

    // Make final SQLParamData call.
    retcode = retCode = SQLParamData(hstmt, &pParmID);
    /*SQLRETURN ret; //ADI fix all warnings - including this var that is unreferenced - delete it if you don't use it
        SQLCHAR* SQLState; //ADI same here
        SQLINTEGER NativeError;
        SQLSMALLINT errmsglen;
        SQLWCHAR errmsg[255];
        SQLWCHAR errstate[50];
    */  

SQLGetDiagRec(SQL_HANDLE_STMT, hstmt, 1, (SQLWCHAR*)errstate, &NativeError, (SQLWCHAR*)errmsg, sizeof(errmsg), &errmsglen);

    if(SqlError(hstmt,SQL_HANDLE_STMT,_T("WriteBlob"), _T("CTLSqlConnection"), _T("The last SQLParamData")))
        if(!EndTransaction(FALSE))
            return ERR_ENDTRANSACTION_FAILED;
        else
            return -5;

    retcode = SQLCloseCursor(hstmt);

    if(!EndTransaction(TRUE))
        return ERR_ENDTRANSACTION_FAILED;

}catch(...){
    WRITEERRORINLOGFILE(_T("Error: An exception has been caught in WriteBlob."));
    return -10;
} 
```

返回0；

}

等待您的答复。谢谢 。

# c++ - 当复制构造函数在下面的代码中是私有的时，为什么会出现错误 C2248？

> ID：15972478
> 
> 赞同：0
> 
> 时间：2013-04-12T13:20:15.260
> 
> 标签：c++, private-methods, rvo

此代码`error C2248: 'A::A' : cannot access private member declared in class 'A'`在 VS2010 中发出，尽管 RVO 不需要复制构造函数。为了证明这一点，只需将`A(const A&);`下面的声明公开，代码将毫无问题地执行，即使没有复制构造函数的定义。

```
class A
{
    int i;
    A(const A&);

    public:
    A() : i(1) {}

};

A f() { return A(); }

int main()
{
    A a;
    a = f();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:53:30.420

仅仅因为您的程序最终没有实际调用复制构造函数并不意味着可以省略它。声明但不定义它只是通过在编译期间而不是在链接期间使函数可用来“欺骗”编译器，因此一旦优化了对它的调用，一切都“正常工作”。但是 RVO 是对性能的优化，您的程序必须编写成在没有 RVO 的情况下它是正确的。

# ruby-on-rails - 查询模型并加入关联模型

> ID：15972480
> 
> 赞同：0
> 
> 时间：2013-04-12T13:20:23.583
> 
> 标签：ruby-on-rails, ruby, database, model-associations

我希望在一行中选择所有`QuizVersion`模型信息和相关模型。`Quiz`

以下是我到目前为止所拥有的，它没有输出任何`Quiz`信息，只是`QuizVersion`信息：

**控制器：**

```
class QuizzesController < ApplicationController

    def getquiz

        @myquiz = QuizVersion.joins(:Quiz).find([14,16])
    end

end 
```

**测验模型：**

```
class Quiz < ActiveRecord::Base
  set_table_name "quizzes"
  set_primary_key "quiz_ID"
  has_many :QuizVersions, :primary_key => "quiz_version_id", :foreign_key => "quiz_version_id"
end 
```

**测验版本型号：**

```
class QuizVersion < ActiveRecord::Base
  # attr_accessible :title, :body
  set_primary_key "quiz_version_id"
  belongs_to :Quiz, :primary_key => "quiz_id", :foreign_key => "quiz_id"
end 
```

这是结果信息：

```
---
- !ruby/object:QuizVersion
  attributes:
    quiz_version_id: 14
    quiz_id: 18
    quiz_name: Super Hero Quiz
    intro: Take this quiz to find out which super hero you are most like!
    email: ''
    activated: 0
    ip_address: 127.0.0.1
    public: 0
    quiz_type: ''
    created_time: 1347360590
- !ruby/object:QuizVersion
  attributes:
    quiz_version_id: 16
    quiz_id: 18
    quiz_name: Super Hero Quiz
    intro: Take this quiz to find out which super hero you are most like!
    email: ''
    activated: 0
    ip_address: 127.0.0.1
    public: 0
    quiz_type: ''
    created_time: 1347706841 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:25:00.490

尝试：

```
@myquiz = Quiz.includes(:QuizVersions).find([14,16]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:29:27.383

首先，通常使用小写来定义关联：

```
class Quiz < ActiveRecord::Base
  set_table_name "quizzes"
  set_primary_key "quiz_ID"
  has_many :quiz_versions
end

class QuizVersion < ActiveRecord::Base
  # attr_accessible :title, :body
  set_primary_key "quiz_version_id"
  belongs_to :quiz
end 
```

有了它，您可以使用：

```
QuizVersion.includes(:quiz).find([14,16]) 
```

希望有帮助

编辑：我承认我没有运行这个来仔细检查......

# ios - iOS：44k 音频文件应以 22k 采样率播放

> ID：15972481
> 
> 赞同：0
> 
> 时间：2013-04-12T13:20:24.520
> 
> 标签：ios, objective-c, audio, core-audio

在我的音频应用程序中，我需要能够更改音频文件 (AIFF) 的格式，更具体地说是采样率。音频会话以 22050 Hz 运行，音频文件本身在 libpd/Pure Data 中创建，也运行相同的采样率。问题是该文件似乎是一个 44100 Hz 的音频文件，这意味着在设备上播放时它的播放速度是原来的两倍。

是否可以更改文件的标题或其他内容，使其采样率变为 22050 Hz，而无需重新采样音频？

我看过其他相关主题，其中一个建议是以半速播放文件。但是，这并不能解决我的问题，因为文件将被进一步压缩为 AAC 以上传到服务器，并且它需要能够在其他设备上以正确的速度播放。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:32:18.653

我发现问题是由 Pure Data 中创建对象的文件中的错误引起的。无论我将文件设置为何种采样率，它最终都是 44100 Hz。所以我只是切换到使用 wav 文件，文件最终具有正确的采样率 22050，现在以正确的速度播放。

现在一切都好！

# javascript - 有没有办法用颜色填充按钮背景的一半？

> ID：15972482
> 
> 赞同：2
> 
> 时间：2013-04-12T13:20:25.480
> 
> 标签：javascript, css, colors

有没有办法用颜色填充按钮背景的一半？

喜欢：

```
|BLUEBLUEBLUE REDREDREDRED| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:21:00.200

是的，你可以在带有渐变背景的 CSS 中做到这一点。

```
background-image: linear-gradient(left , rgb(255,0,0) 50%, rgb(0,0,255) 51%);
background-image: -o-linear-gradient(left , rgb(255,0,0) 50%, rgb(0,0,255) 51%);
background-image: -moz-linear-gradient(left , rgb(255,0,0) 50%, rgb(0,0,255) 51%);
background-image: -webkit-linear-gradient(left , rgb(255,0,0) 50%, rgb(0,0,255) 51%);
background-image: -ms-linear-gradient(left , rgb(255,0,0) 50%, rgb(0,0,255) 51%);

background-image: -webkit-gradient(
    linear,
    left bottom,
    right bottom,
    color-stop(0.5, rgb(255,0,0)),
    color-stop(0.51, rgb(0,0,255))
); 
```

使用此站点根据您的需要对其进行自定义：http: [//gradients.glrzad.com/](http://gradients.glrzad.com/)

这是一个小提琴：http: [//jsfiddle.net/GNCRL/](http://jsfiddle.net/GNCRL/)

# ios - 如何使用 css 和 jquery 文件为 baker 框架创建 .hpub

> ID：15972489
> 
> 赞同：2
> 
> 时间：2013-04-12T13:20:47.600
> 
> 标签：ios

我对 baker 框架非常陌生，但是我知道我必须创建 hpub 文件，我们是否还必须压缩我们的图像、css 和 jquery 文件，或者我们只需要压缩 html 文件？

另外，如何创建 book:// 而不是 http://

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-23T08:43:34.627

您必须将所有文件压缩到您的 hpub 文件中。但是请注意，您必须在没有父目录的情况下压缩它们，而不是构成您的内容、图像、css 等的文件

因此，如果您的 hpub 文件位于名为“MyGreatNewBook”的目录中，则可以从命令行创建一个如下所示的 hpub 文件：

```
 cd MyGreatNewBook
 zip -r ~/MyGreatNewBook.hpub . 
```

这将压缩您的所有文件并将 hpub 文件放在您的主目录中。

# java - BufferedImage - 获取灰度彩色模型图片中某个像素的值

> ID：15972490
> 
> 赞同：8
> 
> 时间：2013-04-12T13:20:48.033
> 
> 标签：java, pixel, grayscale

我`BufferedImage`使用此代码转换为灰度。我通常通过`BufferedImage.getRGB(i,j)`gor 和 R、G 和 B 的每个值获得像素值。但是如何获得灰度图像中像素的值？

编辑：对不起，忘记了转换。

```
static BufferedImage toGray(BufferedImage origPic) {
    BufferedImage pic = new BufferedImage(origPic.getWidth(), origPic.getHeight(), BufferedImage.TYPE_BYTE_GRAY);
    Graphics g = pic.getGraphics();
    g.drawImage(origPic, 0, 0, null);
    g.dispose();
    return pic;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-12T13:27:13.057

如果你有 RGB 图像，那么你可以得到 (Red , green , blue , Gray) 这样的值：

```
BufferedImage img;//////read the image
int rgb = img.getRGB(x, y);
int r = (rgb >> 16) & 0xFF;
int g = (rgb >> 8) & 0xFF;
int b = (rgb & 0xFF); 
```

灰色是 (r , g , b) 的平均值，如下所示：

```
int gray = (r + g + b) / 3; 
```

但如果将 RGB 图像（24 位）转换为灰度图像（8 位）：

```
int gray= img.getRGB(x, y)& 0xFF;/////////will be the gray value 
```

# android - 通过替换视图寻呼机中的 imageview 将 webview 加载到 viewpager

> ID：15972499
> 
> 赞同：0
> 
> 时间：2013-04-12T13:21:09.770
> 
> 标签：android, android-webview, android-viewpager, lazy-loading, android-imageview

我正在实现一个应用程序，我首先将图像加载到 viewpager 中。我需要在完全加载后替换图像并获取 webview。我该怎么做。

我的viewpager代码如下：

```
public class HtmlPagerAdapter extends PagerAdapter {
    private ArrayList<LinearLayout> views;

    Context con;

    public HtmlPagerAdapter(Context context, ArrayList<LinearLayout> filelist) {
        this.con = context;

        views = new ArrayList<LinearLayout>();

        this.views = filelist;

    }

    @Override
    public void destroyItem(View view, int arg1, Object object) {

        ((ViewPager) view).removeView((LinearLayout) object);

    }

    @Override
    public void finishUpdate(View arg0) {

    }

    @Override
    public int getCount() {
        return views.size();
    }

    @Override
    public Object instantiateItem(View view, int position) {

        View myView = views.get(position);
        ((ViewPager) view).addView(myView);

        return myView;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {

    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {

    }
} 
```

我的 imageview 创建代码如下：

```
for(int t=0;t<list.length;t++){
            ImageView img=new ImageView(con);   // con is context
            img.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
            line = new LinearLayout(con);
            img.setBackgroundResource(drawable.bg_downissue);
            line.addView(img);
            filelist.add(line);       //filelist is arraylist<linearlayout>
        }
            adapter = new HtmlPagerAdapter(con, filelist);
            viewPager.setAdapter(adapter); 
```

我的 webview 创建也是一个动态的 webview

```
for(int t=0;t<list.length;t++){
WebView web=new WebView(this);
web.loadDataWithBaseURL(myUrl);
} 
```

我想将此 webview 放入 viewpager 中的 imageview 中。请帮我。我真的被困在这部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:44:35.933

我建议您更改相当多的代码：

将 ImageView 和 WebView 创建更改为 XML 布局，将两者都放在带有 match_parent 的 FrameLayout 中。

在 WebView 上，您将附加一个[WebViewClient](https://developer.android.com/reference/android/webkit/WebViewClient.html#onPageFinished%28android.webkit.WebView,%20java.lang.String%29)并覆盖 onPageFinished 以了解页面何时完成加载。

那么这只是膨胀 XML 并使 WebView 不可见的问题；然后每当 WebViewClient 通知它完成加载时，您设置 WebView 可见和 ImageView 不可见。

# fedora - Fedora 18 yum 更新事务检查错误在尝试安装 colord 之间发生冲突

> ID：15972501
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:21:13.800
> 
> 标签：fedora, yum

一位朋友让我在一台新笔记本电脑上使用带有 XFC 的 DVD 安装 Fedora 18，并给了我一些他认为需要的软件包。

我安装了 F18 和 XFC 作为窗口管理器没有问题，然后我应用了这些 yum 更新：

```
sudo yum install fontconfig-devel.x86_64
sudo yum install freetype-devel.x86_64
sudo yum install gdk-pixbuf2-devel.x86_64
sudo yum install gl-manpages.noarch
sudo yum install glib.x86_64
sudo yum install glib-devel.x86_64
sudo yum install glib2-devel.x86_64
sudo yum install gtk+.x86_64
sudo yum install gtk+-devel.x86_64
sudo yum install gtk2.x86_64
sudo yum install gtk2-devel.x86_64
sudo yum install guile.x86_64
sudo yum install harfbuzz-devel.x86_64
sudo yum install khrplatform-devel.noarch
sudo yum install libICE-devel.x86_64
sudo yum install libSM-devel.x86_64
sudo yum install libX11-devel.x86_64
sudo yum install libXau-devel.x86_64
sudo yum install libXcomposite-devel.x86_64
sudo yum install libXcursor-devel.x86_64
sudo yum install libXdamage-devel.x86_64
sudo yum install libXext.x86_64
sudo yum install libXext-devel.x86_64
sudo yum install libXfixes-devel.x86_64
sudo yum install libXft-devel.x86_64
sudo yum install libXi-devel.x86_64
sudo yum install libXinerama-devel.x86_64
sudo yum install libXrandr-devel.x86_64
sudo yum install libXrender-devel.x86_64
sudo yum install libXt-devel.x86_64
sudo yum install libXxf86vm-devel.x86_64
sudo yum install libdrm-devel.x86_64
sudo yum install libpng-devel.x86_64
sudo yum install libxcb-devel.x86_64
sudo yum install mesa-libEGL-devel.x86_64
sudo yum install mesa-libGL-devel.x86_64
sudo yum install msttcore-fonts.noarch
sudo yum install mtd-utils.x86_64
sudo yum install ncurses-devel.x86_64
sudo yum install pango-devel.x86_64
sudo yum install perl-Text-CSV.noarch
sudo yum install perl-Text-CSV-Separator.noarch
sudo yum install pixman-devel.x86_64
sudo yum install tkcvs.noarch
sudo yum install uboot-tools.x86_64
sudo yum install zlib-devel.x86_64 
```

这似乎没问题，但我随后做了一个 yum 更新，得到了这个：

```
...
Transaction Summary
==============================================================================================================================================================================================
Install    6 Packages (+58 Dependent packages)
Upgrade  379 Packages

Total size: 326 M
Downloading Packages:
Running Transaction Check
Running Transaction Test

Transaction Check Error:
  file /usr/share/color/icc/colord/AdobeRGB1998.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/AppleRGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/CIE-RGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/ColorMatchRGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/NTSC-RGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/PAL-RGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/ProPhotoRGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/SMPTE-C-RGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/SwappedRedAndGreen.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/bluish.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/gamma5000.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/gamma5500.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/gamma6500.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/sRGB.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64
  file /usr/share/color/icc/colord/x11-colors.icc conflicts between attempted installs of colord-0.1.31-1.fc18.i686 and colord-0.1.31-1.fc18.x86_64

Error Summary
------------- 
```

如何诊断根本原因并解决它。在一次尝试中，我尝试删除有色...这很糟糕...我最终没有窗口管理器。

谢谢你，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:20:33.410

当我从 FC17 更新到 FC18 时，我遇到了同样的错误。看起来Skype需要colord.i686。我只是用Skype删除它。

# css - 快速设置调色板窗口样式的有效方法是什么？

> ID：15972502
> 
> 赞同：3
> 
> 时间：2013-04-12T13:21:15.790
> 
> 标签：css

我有一个使用以下调色板实现基本 MS-Paint 类型功能的页面：

![在此处输入图像描述](https://i.stack.imgur.com/XzyFq.png)

选择工具时，将显示灰色轮廓。

目前，带有灰色轮廓的窗口图像被设置为窗口 div 的背景。各个工具位于一个单独的图像上：

![在此处输入图像描述](https://i.stack.imgur.com/K5jei.png)![在此处输入图像描述](https://i.stack.imgur.com/NdevH.png)

当我开始为窗口设置样式时，每个工具都使用这种性质的 css 进行绝对定位：

```
#sketchpad_tools .tool.paintbrush {
     background: url(../images/sketchpad/selected_tools.png) no-repeat -15px -80px;
     top: 90px; left: 10px;
     height: 100px;
     width: 100px;
} 
```

这需要我观察每个位置，调整 top 和 left 属性，然后在工具所在的背景图像中找到正确的位置。事实证明，这是一项非常耗时的任务。如果我决定缩小图像的背景尺寸——我不得不多次这样做——完成任务的时间就会增加一倍。

有没有更高效的方法来快速设计这种功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:34:52.080

为什么不使用带有阴影的调色板的背景图像，而不是为每个工具选择一个选定的图像（灰色）而不是选定的图像（颜色）呢？选择该工具时，只需隐藏彩色图像并显示灰色版本。

如果您将图像（没有定位）放在宽度设置为调色板的 DIV 中，那么当超出 DIV 宽度时，它们应该自动换行。

请参阅[此处的 JSFiddle 示例，](http://jsfiddle.net/sF42X/1/)显示图像如何包装在 DIV 中，只需设置它的宽度。

您只需要在和中添加图片链接的代码示例：

```
<DIV style="width: 300px;">
    <p>My Toolbox</p>
    <img src="Tool1_Image_Location_Grey" />
    <img src="Tool2_Image_Location_Color" />
    <img src="Tool3_Image_Location_Color" />
    <img src="Tool4_Image_Location_Color" />
    <img src="Tool5_Image_Location_Color" />
</DIV> 
```

# plone - 我的服务器有可用内存，但我的 zope 进程似乎“上限”为 3GB。增加缓存大小不再有帮助

> ID：15972503
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:21:18.113
> 
> 标签：plone, zope

下面的屏幕截图显示了我的 zope 实例的缓存相关状态随时间的变化（到目前为止 3 个月）。

在此期间，我们已经将缓存大小从 3000 增加到 6000000 数倍。除了最近的一个亮点外，我们已经达到了 3000 万的上限（不知道那是什么参数）（参见 'by年的图表）。这发生在大约 1000000 的缓存大小，之后，对缓存大小的更改似乎对缓存对象或 zope 的内存使用没有影响。

zope/plone 进程从使用大约 500 MB 内存转移到使用 3GB（我们在这台服务器上有 8GB）。

我的预期是向上滑动缓存大小将使 zope 能够利用更多可用的服务器内存，但它停留在 3GB（服务器上可能有 8GB）。

是否有另一种设置可能会“限制”3GB 的东西？

![zope 对象缓存统计](https://i.stack.imgur.com/CbPgS.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:03:51.703

我不知道您的服务器内存发生了什么，但您这样做是错误的：您根本不能在内存中拥有 600 万个对象，**这是不可能的**：在 Plone 4.x 的典型安装中，您应该需要为此，内存介于 **50 GB**和**150 GB**之间。

为了解决这个问题，我们需要更多信息：您使用的是哪个 Plone 版本？您的数据库中有多少对象？有多少线程？您的服务器的架构是什么，32 位还是 64 位？

其次，确保安装最新版本的[munin.zope](http://pypi.python.org/pypi/munin.zope)插件以收集有关您的服务器的可靠信息（向 Leo Rochael 致敬）。

第三，阅读[核心开发人员列表上的这个线程，](http://plone.293351.n2.nabble.com/zodb-cache-size-bytes-setting-in-plone-recipe-zope2instance-td7495368.html)了解如何为您的缓存大小计算更实际的数字（向 Hanno Schlichting 致敬）。

第四，将数字慢慢上移，并花时间监控结果；检查内存中的对象总数并不惜一切代价避免内存交换。如果您看到对象的数量低于您的目标值，您可以停止增加缓存大小。记住：你永远不会在内存中拥有所有对象，这非常困难，因为人们往往只访问你内容的一部分。

第五，如果您在 Plone 4.x 中测试[DateTime 3.0.3](https://pypi.python.org/pypi/DateTime/3.0.3)（在将其投入生产之前在暂存服务器上），这可能会进一步减少高达 40% 的内存消耗（有人告诉我它现在也适用于 Plone 3。 x，但我自己没有检查过）。

[第六，在Plone 设置列表](http://lists.plone.org/mailman/listinfo/plone-setup)上分享您的结果！

晚安，好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:52:53.430

猜测一下，您的操作系统正在限制每个进程的内存大小。

在 bash shell 中，检查`ulimit -v`是否设置了虚拟内存限制。有关`man bash`该命令的完整选项列表，请参阅。

有关如何使用的更多信息，请参阅[限制单个 Linux 进程的内存](https://unix.stackexchange.com/questions/44985/limit-memory-usage-for-a-single-linux-process)`ulimit`使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:02:55.057

32 位平台——不知道这是否仅限于英特尔——每个进程限制为 3GB。那是因为它每个进程最多只能寻址 4GB，而底部的 1GB 被内核使用。当然，PAE 允许您访问高达 64GB 的空间，但是您在此处遇到了某些每个进程的限制。你真的不能再在 32 位平台上运行高流量的 plone 站点了。通常最简单的解决方案是将您的操作系统升级到 64 位版本，因为除非您拥有非常古老的硬件，否则它应该已经能够运行 x86-64。

# paypal - Paypal返回商家链接和表单提交

> ID：15972505
> 
> 赞同：0
> 
> 时间：2013-04-12T13:21:19.503
> 
> 标签：paypal

我在英国与 paypal 网站支付专业版进行了集成。集成设置为不自动返回，并且 PDT 已关闭，因此客户的付款确认会显示在 paypal 网站上。没关系。我的问题是此确认页面上返回商家网站的链接（它只是转到主页 - 不是 SSL URL）在浏览器中产生警告，说明表单数据正在从安全页面传递到非安全页面页。有没有办法通过这个链接关闭表单数据的传递？它只是进入主页，所以没有必要，警告的出现只会让客户担心。

谢谢，

格林。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:10:41.327

无论如何都无法关闭此警告，唯一的选择是将返回 URL 设置为 https://。

# c++ - Eclipse 抱怨递归函数调用

> ID：15972507
> 
> 赞同：0
> 
> 时间：2013-04-12T13:21:22.223
> 
> 标签：c++, class, implementation

一个简单的二叉搜索树类声明：

```
#include <vector>
#include <stdio.h>

// Provides various structures utilized by search algorithms.

// Represents an generalized node with integer value and a set of children.
class Node {
protected:
    std::vector<Node*> children;
    int value;
public:
    //Creates a new instance of a Node with a default value=-1.
    Node(){value = -1;}
    //Creates a new instance of a Node with a specified value.
    explicit Node(int value){this->value = value;}
    virtual ~Node(){delete children;}

    //Adds new Node with specified value to the list of child nodes. Multiple
    //children with the same value are allowed.
    //Returns added node.
    virtual Node* Insert(int value);
    //Removes first occurrence of a Node with specified value among children.
    virtual void Remove(int value);
};

// Represents a binary search tree node with at most two children.
class BTNode: public Node {
public:
    //Creates a new instance of a BTNode with a default value=-1.
    BTNode():Node(){}
    //Creates a new instance of a BTNode with a specified value.
    explicit BTNode(int value):Node(value){}

    //Adds new BTNode with specified value to the list of child nodes in an
    //ordered manner, that is right child value is >= value of this node and
    //left child value < value of this node.
    virtual BTNode* Insert(int value);
    //Removes first occurrence of a Node with specified value from the tree.
    virtual void Remove(int value);
    //Returns a node with specified value.
    virtual BTNode* Search(int value);
}; 
```

eclipse 抱怨它的定义：

```
BTNode* BTNode::Search(int value){
    if (this->value == value) return *this;

    //Determines whether value is in left(0) or right(1) child.
    int child = this->value > value ? 0 : 1;
    if (children[child] != NULL)
        return children[child]->Search(value);

    return NULL;
} 
```

呼叫发生的确切`children[child]->Search(value)`位置，并显示“方法搜索无法解析”消息。**构建运行得很好（没有任何编译错误）**。那有什么问题？

PS：还没有尝试运行代码。正在努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:26:06.187

`Search`是`BTNode`接口的一部分，但不是`Node`s 接口的一部分，`children`是 a`vector`的，因此调用a`Node*`是无效的。如果有一个方法是有意义的，那么添加它可以解决这个问题。如果不是，那么您需要重新考虑您的设计，这可能超出了这个问题的范围。`Search``Node *``Node``Search``Node`

还有一些其他问题。你有：

```
virtual ~Node(){delete children;} 
```

但`children`不是一个`pointer`它是一个`std::vector<Node*>`。您需要遍历`vector`并调用`delete`每个元素。在`Search`你有这个：

```
if (this->value == value) return *this; 
```

但`Search`返回 a`BTNode*`所以它应该是：

```
if (this->value == value)  return this ; 
```

# python - 在 SQLite3 DELETE 语句中引用 python 变量

> ID：15972508
> 
> 赞同：1
> 
> 时间：2013-04-12T13:21:24.433
> 
> 标签：python, sqlite, tkinter, where-clause

我正在编写一个函数来从表中删除记录。我试图在 delete 语句中引用的变量是 Tkinter 输入字段。

我使用 .get() 方法获取变量，但是我不能在不返回错误的情况下将其传递给 SQLite 语句。

以下代码是框架的一部分，我只是在问题中添加了相关代码

```
from tkinter import *

import sqlite3

class EditOrdersForm(Frame):

        def __init__(self):

        Frame.__init__(self)
        self.master.title("Edit Orders form:")
        self.pack()

        def displayDelOrderOptions(self):
            self.deleteOrderOptionsLabel = Label(self, text="Enter the Order ID of the order you wish to delete: ").grid(row=numOrders+4, pady=2, sticky=W)
            self.deleteOrderOptionsEntry = Entry(self, bd=3, width=10)
            self.deleteOrderOptionsEntry.grid(row=numOrders+4, pady=5, column=1)
            global orderToDelete
            orderToDelete = self.deleteOrderOptionsEntry.get()
            self.deleteButton = Button(self, text = "Delete this order", command = self.deleteOrder)
            self.deleteButton.grid(row=numOrders+5, pady=5, column=1)
        def deleteOrder(self):
            conn = sqlite3.connect("testdb.db")
            c = conn.cursor()

            c.execute("DELETE FROM orders WHERE orders_id=:1)", (orderToDelete,))

            conn.commit
            c.close()

root = EditOrdersForm()
root.mainloop() 
```

我遇到的问题是 WHERE 语句，我如何引用 orderToDelete。我尝试将其转换为字符串并使用 (?) 作为参数，但这也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T13:24:56.767

[参数化](http://docs.python.org/2/library/sqlite3.html)查询的正确语法是：

`c.execute("DELETE FROM orders WHERE orders_id=?)", (orderToDelete,))`

我相信你只需要调用 commit 而不是引用它

`conn.commit()`

# android - 我的 Sprite 如何从 andEngine 中的当前位置旋转（平滑旋转）给定角度？

> ID：15972517
> 
> 赞同：2
> 
> 时间：2013-04-12T13:21:43.770
> 
> 标签：android, andengine

目前我正在使用andEngine版本1在android中创建一个游戏演示应用程序。

目前我的精灵以如下代码所示的角度旋转

```
 aircraft.setRotation((float) rotationAngle); 
```

但是我的精灵每次都从它的初始位置旋转，但我想从它的当前位置而不是它的初始位置旋转。因为在我的游戏应用程序中，精灵以不同的角度反复旋转（很多次）。所以它看起来很糟糕！（每次都有混蛋）所以我想要我的精灵平滑旋转我该怎么做？

我也使用此代码进行平滑旋转，但我仍然没有获得平滑旋转..？

// 这是为了飞机的平滑旋转

for (int i = 0; i <= 旋转角度; i++) {

```
_aircraft.setRotation((float) i); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:20:27.480

如果我正确阅读了您的问题，这就是您想要的：每次调用“setRotation”时，您都希望旋转考虑当前旋转加上“rotationAngle”变量指定的额外旋转量。如果是这种情况，那么解决方案很简单。

代替：

```
 aircraft.setRotation((float) rotationAngle); 
```

利用：

```
 aircraft.setRotation((float) (aircraft.getRotation()+rotationAngle)); 
```

通过这种方式，您可以随时将飞机旋转一个设定的角度（rotationAngle），并将该角度添加到飞机的当前旋转中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:56:23.617

据我了解您的问题，您必须使用

```
aircraft.setRotationCenter(pCenterX,pCenterY); 
```

使用此方法，您可以将对象旋转到所需的位置。默认旋转点是精灵的中心。

# visual-studio-2012 - 使用 Visual Studio / .net 开发单页应用程序的可用模板/框架有哪些？

> ID：15972519
> 
> 赞同：-2
> 
> 时间：2013-04-12T13:21:53.653
> 
> 标签：visual-studio-2012, single-page-application

我们正在开发单页应用程序/网站。我们从 Visual Studio/ASP/C# 作为我们的开发平台开始。虽然最初的应用程序更像是一个概念证明并且没有太多的“架构” - 我们希望更好地构建它并使用一些已经可用的框架。Visual Studio 2012 中可用于开发单页应用程序的框架有哪些，使用它们的优缺点是什么？

TIA

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-26T18:56:15.080

这可能是一个有用的地方。

[http://www.asp.net/single-page-application/overview/introduction/other-libraries](http://www.asp.net/single-page-application/overview/introduction/other-libraries)

# c++ - 尝试写入 Log4cpp 流时调试断言失败

> ID：15972525
> 
> 赞同：0
> 
> 时间：2013-04-12T13:22:10.507
> 
> 标签：c++, visual-c++, crash, log4cpp

我正在尝试通过以下方式使用 log4cpp 启用日志记录。

```
class Foo
{
    private: 
        log4cpp::Appender* _logAppender;
        log4cpp::Layout* _logAppenderLayout;
}

Foo::Foo()
{
    _logAppender = new log4cpp::FileAppender("foo", "logs/bar.log"));
    _logAppenderLayout = new log4cpp::BasicLayout();
    _logAppender.setLayout(_logAppenderLayout);
    log4cpp::Category::getRoot().setPriority(log4cpp::Priority::DEBUG);
    log4cpp::Category::getRoot().addAppender(_logAppender);

    // Crash on line below.
    log4cpp::Category::getRoot().debugStream() << "test";
} 
```

当我到达尝试将“测试”写入日志的行时，我得到一个显示“调试断言失败！”的崩溃。断言在 f:\dd\vctools\crt_bld_self_64_amd64\crt\src\write.c 第 67 行。失败的断言是

```
fh >= 0 && (unsigned)fh < (unsigned)_nhandle 
```

我已经创建了日志目录和 bar.log 文件以确保它存在。我还确认我的应用程序和库都是作为 64 位多线程调试 DLL 构建的。log4cpp 源中没有 64 位构建，所以我基于 32 位构建配置创建了一个。我正在使用最新版本的 log4cpp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T09:09:09.067

这是旧帖子，但我想这个问题的解决方案可能对某人有用。

很可能您只是**忘记在代码中创建目录“logs”**。

这是关闭流的问题：记录器不会为您的日志自动创建目录，因此，没有目录 -> 没有文件 -> 打开文件失败 -> 文件处理程序无效 -> 异常。您应该手动创建目录。宏断言和没有更多信息是可悲的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T15:13:00.867

刚刚发现了这个问题并试图得到这个断言。我已经为 MSVC2010 中的 Win32 和 x64 平台构建了 log4cpp (ver 1.1) 库和**user1229080**的测试，**并且**没有得到任何断言。

 **我添加了几行来编译它，并从文件路径中删除了“logs”目录，只是为了摆脱与缺少目录相关的问题：

```
#include "stdafx.h"

#include <log4cpp/Category.hh>
#include <log4cpp/FileAppender.hh>
#include <log4cpp/OstreamAppender.hh>
#include <log4cpp/BasicLayout.hh>

class Foo
{
    private:
        log4cpp::Appender* _logAppender, *_conAppender;
        log4cpp::Layout* _logAppenderLayout;
    public:
        Foo();
};

Foo::Foo()
{
    _conAppender = new log4cpp::OstreamAppender("con", &std::cout);
    _logAppender = new log4cpp::FileAppender("foo", "bar.log");
    _logAppenderLayout = new log4cpp::BasicLayout();
    _logAppender->setLayout(_logAppenderLayout);

    log4cpp::Category::getRoot().setPriority(log4cpp::Priority::DEBUG);
    log4cpp::Category::getRoot().addAppender(_logAppender);
    log4cpp::Category::getRoot().addAppender(_conAppender);

    // Crash on line below. (but not in msvc2010)
    log4cpp::Category::getRoot().debugStream() << "test" << log4cpp::eol;
}

int main(int argc, char* argv[]) {
    Foo f;

    return 0;
} 
```

您在哪个版本的 Visual c++ 上遇到了断言？**

# javascript - asm.js 对编译器的限制

> ID：15972530
> 
> 赞同：1
> 
> 时间：2013-04-12T13:22:17.240
> 
> 标签：javascript, performance, compiler-construction, emscripten

我想知道 asm.js 规范中是否有任何“设计限制”会阻止任何编译器直接从中生成本机汇编代码。

目前，firefox 的速度似乎是本机代码的一半，但我想知道为什么它不能以本机速度运行。如我所见，asm.js 与 asm 非常相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:25:11.883

目前的限制是使用`Typed Array`Javascript 的类型作为内存（即*堆栈*和*堆*）。这是由于其他脚本与您的 asm.js 生成的 Javascript 交互，并且需要共享的“内存”空间。此外，我猜`Typed Array`s 是作为实际堆内存实现的，这将比使用堆栈慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:05:08.980

因为 Firefox 的编译器没有像 C 编译器那样做很多有利于 asm.js 代码的优化。在 Windows 上，也是因为编译后的代码必须对数组访问执行边界检查（在其他操作系统上，Firefox 的 asm.js 编译器 OdinMonkey 使用内存保护）。

# python - 如何使用 Sphinx 记录异常？

> ID：15972544
> 
> 赞同：30
> 
> 时间：2013-04-12T13:22:50.030
> 
> 标签：python, exception, python-sphinx

我似乎无法弄清楚如何使用 Sphinx 记录异常。

我尝试了以下方法：

```
def some_funct():
    """
    :raises: ExceptionType: Some multi-line
        exception description.
    """

def some_funct():
    """
    :raises: ExceptionType, Some multi-line
        exception description.
    """

def some_funct():
    """
    :raises ExceptionType: Some multi-line
        exception description.
    """

def some_funct():
    """
    :raises:
        ExceptionType: Some multi-line
            exception description.
    """ 
```

斯芬克斯一直在说：

> “字段列表结束时没有空行；意外取消缩进。”

那么如何摆脱该消息以及使用多行文档记录可能的多个异常的正确方法是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-12T14:04:57.967

您可以使用反斜杠进行续行：

```
def some_funct():
    """
    :raises ExceptionType: Some multi-line \
        exception description.
    """ 
```

**更新：**

缩进似乎起作用而不是转义换行符：

```
def some_funct():
    """
    :raises ExceptionType: Some multi-line
        exception description.
    """ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T10:56:07.960

```
def some_funct():
    """
    My documentation, but watch the empty line below (necessary)

        :raise: Exception

            when status != my_status 
            | status <= max_status 
```

注意：[https](https://pythonhosted.org/an_example_pypi_project/sphinx.html#full-code-example) ://pythonhosted.org/an_example_pypi_project/sphinx.html#full-code-example有一些不错的示例（不幸的是，不在多行异常中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:36:35.700

这给了我一些好东西。

您忘记了`:`异常名称之前

```
def some_funct():
    """
    :raise: 
        :IOException: a probleme occured
                      and it can't be passed
    """ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-25T12:39:45.537

我认为有一个样本不会让 Sphinx 抱怨：

```
def some_funct():
    """
    :raises: ExceptionType: Some multi-line
        exception description.

    """ 
```

（注意最后的空行）

# java - JPA 集合在映射表中有不需要的唯一约束

> ID：15972549
> 
> 赞同：8
> 
> 时间：2013-04-12T13:23:03.307
> 
> 标签：java, spring, hibernate, jpa

当我自动生成具有`hibernate.hbm2ddl.auto=create`“不需要的”唯一约束的数据库时，正在映射表中创建。我正在运行 postgres 9.1，create table 语句变为：

```
CREATE TABLE schemaname.scanalerts
(
  scanid bigint NOT NULL,
  alerts_id bigint NOT NULL,
  CONSTRAINT fkd65bd7541b5b1a8e FOREIGN KEY (scanid)
      REFERENCES rfid.scan (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT fkd65bd754860b0886 FOREIGN KEY (alerts_id)
      REFERENCES rfid.alert (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT scanalerts_alerts_id_key UNIQUE (alerts_id ),
  CONSTRAINT scanalerts_scanid_alerts_id_key UNIQUE (scanid , alerts_id )
) 
```

不需要的约束是`CONSTRAINT scanalerts_alerts_id_key UNIQUE (alerts_id )`，基本上我只想要scanid和alerts_id的唯一约束。

我正在使用 JPA 注释来创建映射，这是我的代码：

```
@ElementCollection(targetClass = Alert.class, fetch = FetchType.EAGER)
@CollectionTable(name = "scanalerts", schema = RfidConstants.SCHEMA, 
    joinColumns = @JoinColumn(name = "scanid"), 
    uniqueConstraints = @UniqueConstraint(columnNames = { "scanid", "alerts_id" }))
private List<Alert> alerts; 
```

有没有办法停止创建 alert_id 唯一约束？

谢谢

@JBNizet 这是警报映射注释：

```
@Entity
@Table(name = "alert", schema = "schemaname", 
    uniqueConstraints = @UniqueConstraint(columnNames = {"message", "alertPriority"}) )
public class Alert implements Serializable {

    @Id
    @Column(name="id")
    @SequenceGenerator(name = "alertSeq", sequenceName="ALERT_SEQ", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "alertSeq")
    private Long id;

    @Column(name="versionnum")
    @Version
    private Long version;

    @Column(name = "message", nullable = false)
    private String message;

    @Column(name = "alertpriority", nullable = false)
    @Enumerated(EnumType.STRING)
    private AlertPriority alertPriority; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T18:00:23.480

正如在[JavaDocs](http://docs.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html)中所说的那样，`@ElementCollection`用于映射基本类型或可嵌入的集合。`Alert`是一个实体，因此 `List<Alert>`不是基本类型或嵌入的集合。

因为由`scanid`and组成的唯一约束是首选的，所以我假设and`alert_id`之间的关系确实具有多对多的性质。这可以通过以下方式实现：`Scan``Alert`

```
@ManyToMany
@JoinTable(name = "scanalerts",  schema = RfidConstants.SCHEMA,
  joinColumns = @JoinColumn(name = "scanid"),
  inverseJoinColumns = @JoinColumn(name = "alert_id")
)
private List<Alert> alerts; 
```

表的主键包含两列，这就是`@UniqueConstraint`不需要 using 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:41:36.627

创建的约束在这里声明：

```
uniqueConstraints = @UniqueConstraint(columnNames = { "scanid", "alerts_id" })) 
```

只需删除它并`Alert`在每个属性的实体内声明约束即可。

# windows - setvbuf 在应用程序（可执行文件）中的用途是什么？

> ID：15972550
> 
> 赞同：0
> 
> 时间：2013-04-12T13:23:04.683
> 
> 标签：windows

```
setvbuf (stdout, NULL, _IOLBF, 0); 
```

这条线出现在我的一个代码中，我无法弄清楚原因。如果我注释掉这一行，我的应用程序就可以正常工作。但是如果我保留它，那么我的应用程序就会崩溃。另请阅读[http://msdn.microsoft.com/en-us/library/86cebhfs(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/86cebhfs(v=vs.100).aspx)，但无法正确理解应用程序崩溃的原因。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:30:04.527

MSDN 描述的一部分`setvbuf()`说：

![在此处输入图像描述](https://i.stack.imgur.com/rTV0F.png)

因此，在 Windows 上，您将获得与 相同的效果`_IOFBF`，正如它在文本中所说，它将使用您指定大小的自动分配的缓冲区。

在您的代码中，您指定的大小*为零*。因此崩溃。

在非 Win32 系统上，相同的命令将激活行缓冲，因此可能没问题。也许这段代码是多平台的？

# twitter-bootstrap - 导航栏导航链接上的引导下拉菜单

> ID：15972554
> 
> 赞同：0
> 
> 时间：2013-04-12T13:23:14.903
> 
> 标签：twitter-bootstrap, drop-down-menu, navbar

嗨，我是网络编程的新手（仅限网络！）所以请温柔一点。我正在尝试使用引导程序构建示例应用程序。我的兴趣是导航栏，我希望能够在悬停时在导航链接上拥有下拉菜单。更具体地说，我需要导航链接像往常一样运行（显示选项卡内容，例如单击时的某些页面），但在悬停时显示下拉菜单。我现在不能有展位 'data-toggle="tab"' 和 'data-toggle="dropdown"' 可以吗？感谢这个网站，我设法完成了悬停部分：但我一直停留在显示下拉菜单上，一些链接或示例会很棒。提前致谢。

我的 HTML 代码：

```
<div class="container">    <!------- Container start --------->
    <div class="row">
        <div class="span12">
            <div class="navbar">
                <div class="navbar-inner">
                    <a class="brand span2" href="#">Title</a>
                    <ul class="nav">
                        <li class="divider-vertical"></li>
                        <li class="active"><a id="nav_callcen"  href="#t_link1" data-toggle="tab">Link1</a></li>
                        <li class="divider-vertical"></li>
                        <li><a href="#t_link2" data-toggle="tab">Link2</a></li>
                        <li class="divider-vertical"></li>
                        <li><a href="#t_link3" data-toggle="tab">Link3</a></li>
                        <li class="divider-vertical"></li>
                        <li class ="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#t_link4" >Link4*</a>
                                <ul class="dropdown-menu" >
                                    <li><a id="link1" tabindex="-1" href="#">Link1</a></li>
                                    <li><a id="link2" tabindex="-1" href="#">Link2</a></li>
                                </ul>
                        </li>
                     </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="span12">
            <div id="appContent" class="tab-content">

                <div class="tab-pane active" id="t_link1">
                    <p>This is Link1</p>
                </div>   
                <div class="tab-pane" id="t_link2">
                    <p>This is Link2</p>
                </div>    
                <div class="tab-pane" id="t_link3">
                    <p>This is Link3</p>
                </div>    
                <div class="tab-pane" id="t_link4">
                    <p>This is Link4</p>
                </div>    

            </div>
        </div>
    </div>          

</div> <!------- Container end ---------> 
```

CSS：

```
ul.nav li.dropdown:hover > ul.dropdown-menu{
    margin: 0;
    display: block;    
}

a.menu:after, .dropdown-toggle:after {
  content: none;
} 
```

JS：

```
$('.dropdown').on('click', 'li', function(event) {
        $("a[href=#t_"+event.target.id+"]").tab('show');
}); 
```

# ruby - 如何通过 Sublime Text 2 构建系统运行 Ruby Gem？

> ID：15972555
> 
> 赞同：8
> 
> 时间：2013-04-12T13:23:15.010
> 
> 标签：ruby, gem, sublimetext2

我尝试了不同的设置，例如：

```
{
  "cmd": "rubocop '$file_name'"
} 
```

我也尝试过设置路径等：

```
{
  "cmd": "rubocop '$file_name'",
  "path": "~/.rvm/bin",
  "selector": "source.rb",
  "working_dir":"$project_path"
} 
```

对于两者，我都会收到一条错误消息：

```
[Errno 2] No such file or directory
[cmd:  rubocop 'configurer.rb']
[dir:  /home/rafal/Documents/Projects/configurer]
[path: /usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games]
[Finished] 
```

和：

```
[Errno 2] No such file or directory
[cmd:  rubocop 'configurer.rb']
[dir:  /home/rafal/Documents/Projects/configurer]
[path: ~/.rvm/bin]
[Finished] 
```

分别。我遵循了一些我在网上找到的教程以及 StackOverflow 上的一些答案，但没有运气。关于为什么会发生这种情况的任何想法？在当前打开的文件上运行 Ruby Gem 的正确且有效的方法是什么？Gem [Rubocop](https://github.com/bbatsov/rubocop)肯定已安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T22:34:57.500

我在 SublimeText2 上进行了自定义构建

```
{
  "env": {
    "PATH":"${HOME}/.rvm/bin:${PATH}"
  },
  "cmd": ["rvm-auto-ruby", "-S", "bundle", "exec", "rubocop -n ${file}" ],
  "selector": "source.ruby"
} 
```

请注意，`-n`rubocop 选项是[5 天前](https://github.com/bbatsov/rubocop/commit/e4db90782565610235b11b580536751a6539584c)在 repo 中引入的（在 0.6.1 版本之后），因此如果您不使用[git repo](https://github.com/bbatsov/rubocop)中的 rubocop ，它可能不起作用。在 0.6.2 发布之前，它会在输出中显示奇怪的字符，但至少它会起作用。

# android - 使用 mupdf 进行密码身份验证不起作用

> ID：15972558
> 
> 赞同：0
> 
> 时间：2013-04-12T13:23:32.840
> 
> 标签：android, pdf, mupdf

对我来说 Mupdfcore.authenticatePassword("password") 不起作用。没有密码保护的 Pdf 文件可以正确呈现，但有密码的文件会导致错误。

```
error : AES padding out of range : 154 
```

谁能帮帮我吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T14:37:42.023

`authenticatePassword(String password)`在 MuPDFCore 中没有实现。
改为使用`MuPDFCore.authenticatePasswordInternal(password)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:22:31.223

Without seeing the file in question, it's very hard to make a judgement on this - there are simply too many possible combinations of security revision/versions within Acrobat.

Why not come to the #ghostscript irc channel and speak to the devs? See the link on [http://mupdf.com](http://mupdf.com) if you don't have an irc client.

We'll probably ask you to make the file available to us via our bug tracker at [http://bugs.ghostscript.com/](http://bugs.ghostscript.com/) - we can mark it 'private' so it's not world readable if you want to keep it confidential.

# ajax - AngularJS JSON解析（ajax）

> ID：15972559
> 
> 赞同：7
> 
> 时间：2013-04-12T13:23:41.437
> 
> 标签：ajax, json, angularjs

我一直在尝试发出 ajax 请求，但似乎有问题。当我的 json 属性名称在 " （例如 {"name":value"} ）中时，它可以工作，但是当属性名称不是时。我有以下异常

```
SyntaxError: Unexpected token s
at Object.parse (native)
at pb (http://localhost:8080/angularjs/lib/angular.min.js:12:472)
at Vc.d.defaults.transformResponse (http://localhost:8080/angularjs/lib/angular.min.js:92:314)
at http://localhost:8080/angularjs/lib/angular.min.js:92:127
at Array.forEach (native)
at n (http://localhost:8080/angularjs/lib/angular.min.js:6:192)
at Qb (http://localhost:8080/angularjs/lib/angular.min.js:92:109)
at c (http://localhost:8080/angularjs/lib/angular.min.js:93:295)
at h (http://localhost:8080/angularjs/lib/angular.min.js:77:437)
at http://localhost:8080/angularjs/lib/angular.min.js:78:169 
```

这是我的代码：

索引.html：

```
<!doctype html>
<html ng-app>
<head>
<script src="lib/angular.min.js"></script>
<script src="js/indexApp.js"></script>
</head>
<body>
    <div>
        <div ng-controller="AjaxController">
            {{users.data}}
        </div>
    </div>
</body>
</html> 
```

indexApp.js

```
function AjaxController($scope, $http) {
$scope.beers = [ 0, 1, 2, 3, 4, 5, 6 ];
console.log("OMW");
$http({
    method : 'GET',
    url : 'data.json'
}).success(function(data, status, headers, config) {
    $scope.users = data;
}).error(function(data, status, headers, config) {
    $scope.users = "error" + data;
}); 
```

};

数据.json

```
{
    success : "true",
    data: [{name:"val"}]
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-03T09:27:22.240

您*必须*将属性名称包装在`"`. 这是指定有效传输 JSON 的唯一方法，它比可执行 JavaScript 上下文中的对象表示法更严格。如果您尝试使用更宽松的表示法，任何 JSON 解析器都会失败。

另请参阅强制执行此[操作的 JSON 规范。](http://json.org/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-06T05:07:15.080

即使我遇到了类似的问题，解决方案是，您的字符串数据应该采用**JSON.parse**或**angular.fromJson**工作的特定格式。

例如：

```
var myString = '{"name":"nomad"}';
console.log(JSON.parse(myString)); 
```

* * *

控制台输出为： Object {name: "nomad"}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-10T21:16:01.647

我有同样的错误。其中一个 firstName 是这样的空字符串。 `{"firstName":"", "lastName":"Doe"}` 编辑：此错误也可能意味着您的 json 文件中主要存在一些语法错误。例如，注释掉 json 文件中的某些内容，或者在分隔两个键值对的逗号之间不留空格也会引发相同的错误。非常初学者的错误认为这会对其他人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T17:09:57.063

就我而言，它返回以下错误：

> SyntaxError：意外的令牌'
> 
> 在 Object.parse （本机）
> 
> 在 fromJson ( [http://www.example.com/bower_components/angular/angular.js:1072:14](http://www.example.com/bower_components/angular/angular.js:1072:14) )

所以我们发现 Angular 内部发生的情况如下：

```
JSON.parse("{'error': 'message'}"); // error 
```

实际上它返回了一个解析器错误，因为它期望 JSON 包含用 包裹的字符串`"`，[正如接受的答案所指出的那样](https://stackoverflow.com/a/16355633/1064325)。

因此，我们只是修复了服务器响应以符合[JSON 字符串规范](http://www.json.org/)：

```
JSON.parse('{"error": "message"}'); // works! 
```

# css - 如何在 Firefox/IE 上隐藏导航栏溢出

> ID：15972564
> 
> 赞同：0
> 
> 时间：2013-04-12T13:23:49.160
> 
> 标签：css, twitter-bootstrap, overflow

我在引导导航栏上实现溢出隐藏的问题。如果页面宽度较小，我希望隐藏导航栏元素。我让它在 chrome 上工作，使用：

`white-space: nowrap; overflow: hidden;`

但它不适用于 Firefox 和 IE。元素被包裹在两行或多行中。

这是示例：[plunker 示例](http://plnkr.co/edit/Z0p1FsgLGc0nf111hEt0)

我也尝试过： `overflow-x: hidden;` 但它也不适用于 FIrefox/IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:32:00.900

而不是`float: left`使用

```
display: inline-block; 
```

关于`li`元素。

（在火狐上测试）

# python - Python Numpy recarray 双向排序

> ID：15972568
> 
> 赞同：6
> 
> 时间：2013-04-12T13:23:55.483
> 
> 标签：python, sorting, numpy, recarray

我有一个结构化的 numpy 数组，我按顺序对其进行排序。它工作得很好，但只有一个方向！

降序：

```
sort(myStructuredArray,order=my_order)[::-1] 
```

和

上升：

```
sort(myStructuredArray,order=my_order) 
```

my_order 的顺序类似于`[col1,col2,-col3,col4,-col5,...,colN]`，对于某些列，我想像 col1,col2 和 colN 一样将其按升序排序，而对于其他列，则按 col3 和 col5 (minus signal) 降序排序。在这个例子中，我想先按 col1 升序对数组进行排序，然后按 col2 升序，然后按 col3 降序，然后按 col4 升序，然后按 col5 降序，依此类推……我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T16:11:18.013

你可以这样做`numpy.lexsort`

```
In [1]: import numpy as np
In [2]: a = np.array([(4,0), (1,9), (1,0), (4,9)],
                     dtype=[('x',int),('y',float)])

In [3]: a
Out[3]: 
array([(4, 0.0), (1, 9.0), (1, 0.0), (4, 9.0)], 
      dtype=[('x', '<i8'), ('y', '<f8')])

In [4]: a['x']
Out[4]: array([4, 1, 1, 4])

In [5]: a['y']
Out[5]: array([ 0.,  9.,  0.,  9.]) 
```

参数的顺序优先级与 的`lexsort`相反`np.sort(..., order=...)`。因此，首先按降序排序`'x'`，然后按升序排序`'y'`：

```
In [6]: a[np.lexsort((a['y'], -a['x']))]
Out[6]: 
array([(4, 0.0), (4, 9.0), (1, 0.0), (1, 9.0)], 
      dtype=[('x', '<i8'), ('y', '<f8')]) 
```

笔记：

*   假设您的所有值都是数字的（因为负数不会反转字符串排序），这是可行的。
*   我在某处看到过`a['x'][::-1]`用作键而不是，`-a['x']`但现在这对我不起作用。

# uiimageview - 绘制图像 javaFx

> ID：15972571
> 
> 赞同：3
> 
> 时间：2013-04-12T13:24:01.787
> 
> 标签：uiimageview, javafx, draw

我有一个 ImageView 对象存储在一个滚动窗格中，我需要能够在该图像上绘图。请给我一些建议。我使用 javaFx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:07:42.637

遵循以下解决方案：[应用程序 javafx](https://stackoverflow.com/questions/15072108/view-of-the-application-javafx)的视图，其中有一些源代码可[在 JavaFX 中创建可平移的地图背景](https://gist.github.com/jewelsea/5032398)

![在此处输入图像描述](https://i.stack.imgur.com/9n14Y.jpg)

该解决方案使用[StackPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html)在图像上分层内容，但您可以绘制任何您喜欢的节点。

# java - 为什么注释属性 Rest.rootUrl 的值必须是常量表达式？

> ID：15972574
> 
> 赞同：3
> 
> 时间：2013-04-12T13:24:09.627
> 
> 标签：java, android, rest, android-annotations

我正在使用[Android Annotations Framework](https://github.com/excilys/androidannotations)，特别是用于 Rest 集成。我有以下代码。

主机配置界面

```
public interface Host {
    public String URL = "http://192.168.2.137";
} 
```

以及用于 Rest 通信的带注释的接口。

```
@Rest(rootUrl = Host.URL, converters = { MappingJacksonHttpMessageConverter.class })
public interface RestClient {
    @Get("/entities.json")
    Entity[] allEntities();
} 
```

我的问题是，**为什么注释属性 Rest.rootUrl 的值必须是常量表达式？以及如何将 String 资源用于 Rest.rootUrl ？**

我想做类似的事情

```
@EBean
public class Host{
    @StringRes
    String URL;
} 
```

但是使用 RestClient 接口是不可能的。

这个想法是处理一个本地化的休息应用程序，假设不同的 URL 按语言

```
http://en.myapp.com
http://es.myapp.com 
```

我知道 Java 接口必须具有最终属性，但是，有办法处理本地化的 rootUrl 值吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-28T02:58:59.363

Jon 关于注解值是正确的，但 Android Annotations 实际上确实为您提供了一种为 RestClient 动态设置根 url 的方法。

只需从注解中省略 rootUrl 属性，并在接口中添加一个方法：

```
void setRootUrl(String rootUrl); 
```

请记住，`RestClient.setRootUrl(url)`在实际使用 RestClient 之前，您需要在应用程序中的某个时间点调用。

更多信息在[https://github.com/excilys/androidannotations/wiki/Rest%20API#rest](https://github.com/excilys/androidannotations/wiki/Rest%20API#rest)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:29:09.840

> 为什么注释属性 Rest.rootUrl 的值必须是常量表达式？

这并不是一个真正的 Android 问题，也不是关于那些特定注释的问题。Java 中的*所有注解值都必须是常量表达式——因为这些值**在编译时*被烘焙到类文件中。

从[JLS 第 9.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.7)：

> 当且仅当以下条件之一为真时，元素类型 T 与元素值 V 相称：
> 
> *   T 是数组类型 E[] 并且：
>     *   V 是 ElementValueArrayInitializer，V 中的每个 ElementValue（类似于数组初始值设定项中的 VariableInitializer）都与 E 相称；或者
>     *   V 是与 E 相称的 ElementValue。
> *   V 的类型与 T 的赋值兼容（第 5.2 节），此外：
>     *   如果 T 是原始类型或字符串，并且 V 是常量表达式（第 15.28 节）。
>     *   V 不为空。
>     *   如果 T 是 Class，或 Class 的调用，并且 V 是类文字（第 15.8.2 节）。
>     *   如果 T 是枚举类型，而 V 是枚举常量。

# forms - Perl WWW：机械化表单填写不起作用

> ID：15972577
> 
> 赞同：1
> 
> 时间：2013-04-12T13:24:12.450
> 
> 标签：forms, perl, login, fill, www-mechanize

在使用 WWW::Mechanize 填写登录表单时，我遇到了一些不错的问题。

首先，我将向您展示网站的一部分，不幸的是，它是德语的：

```
<form action="/login.php" method="post" onsubmit="md5pass();">
<p><br/></p>
<table width="350" border="0" cellpadding="5" cellspacing="0" align="center" style="border:dotted 1px black">
    <tr bgcolor="#ffb442" align="center">
        <td colspan="2">
            <p></p><b>Bitte <a href="http://www.xyz.de/startseite.php">Flirtlife</a> Usernamen und Passwort eingeben!</b></p>
        </td>
    </tr>
    <tr bgcolor="#ffae35">
        <td>
            <b>Username: &nbsp;</b></font>
        </td>
        <td>
            <input type="text" name="user" size="25" maxlength="40" value="">
            <input type="hidden" name="relocate" value="/profil.php?user=1180038">          </td>
    </tr>
    <tr bgcolor="#ffae35">
        <td>
            <b>Passwort: </b>
        </td><td>
            <input type="password" id="passwd" name="passwd" size="25" maxlength="32">
        </td>
    </tr>
    <tr bgcolor="#ffae35">
        <td>
            <b>Autologin: </b>
        </td><td>
            <input onclick="toggle('hinweis_setautologin', 'setautologin');" type="checkbox" id="setautologin" name="setautologin" value="true"> automatisch einloggen
        </td>
    </tr>
    <tr>
        <td align="center" colspan="2" id="hinweis_setautologin" style="background:#fff;font-size:9px;display:none;" bgcolor="#ffae35">
             Du wirst solange automatisch eingeloggt bis du auf LOGOUT klickst oder auf einem anderen Rechner das AUTOLOGIN aktivierst.
        </td>
    </tr>
    <tr bgcolor="#ffae35">
        <td>
            <b>Unsichtbar:</b>
        </td><td>
            <input onclick="toggle('hinweis_invisible', 'invisible');" type="checkbox"  id="invisible" name="invisible"> unsichtbar einloggen <img src="images/prem_small.gif" alt="prem_small" height="12"/>
        </td>
    </tr>
    <tr>
        <td align="center" colspan="2" id="hinweis_invisible" style="background:#fff;font-size:9px;display:none;" bgcolor="#ffae35">
             Wenn du Premium-User bist, dann loggst du dich dieses mal unsichtbar ein. Du erscheinst dann als OFFLINE und man sieht dich nicht auf den Profilbesuchern.
        </td>
    </tr>
    <tr bgcolor="#ffb442">
        <td colspan="2" align="center">
            <p></p><a href="sendpassword.php"><strong>Passwort vergessen?</strong></a></p>
            <p></p><input type="hidden" id="hash" name="hash" value=""><input id="loginsubmit" type="submit" value="Absenden"></p>
        </td>
    </tr>
</table>
<p align="center">
    <b>Hinweis:</b> Cookies und Javascript m&uuml;ssen aktiviert sein!<br/> 
    <a href="http://hilfe.xyz.de/faq/doku.php/das_login_funktioniert_nicht"><b>Probleme beim Login?</b></a>
</p>
<p align="center"><a href="/registrieren.php"><img src="/images/teaser.gif"></a></p>
</form> 
```

嗯...如您所见，只有一张表格要填写，但用户名字段没有“id”。

其次，有一个按钮可以点击确认登录数据。

我试过这个：

```
my $a = WWW::Mechanize->new( 
     cookie_jar => HTTP::Cookies->new( file => "./cookies.txt" ) 
     );

$a->get("$FLUserProfileLoginURL$FLuserID");
unless($a->success()) {
  print "Problem while loading site...\n\n";
        exit;
    }
$dest = $a->response->content;

@FORMS = $a->forms;

for $entry (@FORMS) {
   print Dumper ($entry);
} 
```

表明：

```
$VAR1 = bless( {
             'default_charset' => 'UTF-8',
             'enctype' => 'application/x-www-form-urlencoded',
             'accept_charset' => 'UNKNOWN',
             'action' => bless( do{\(my $o = 'http://www.xyz.de/login.php')}, 'URI::http' ),
             'method' => 'POST',
             'attr' => {
                         'onsubmit' => 'md5pass();',
                         'method' => 'post'
                       },
             'inputs' => [
                           bless( {
                                    'maxlength' => '40',
                                    'value_name' => '',
                                    'value' => '',
                                    'name' => 'user',
                                    'type' => 'text',
                                    'size' => '25'
                                  }, 'HTML::Form::TextInput' ),
                           bless( {
                                    'readonly' => 1,
                                    'value_name' => '',
                                    'value' => '/profil.php?user=1180038',
                                    'name' => 'relocate',
                                    'type' => 'hidden'
                                  }, 'HTML::Form::TextInput' ),
                           bless( {
                                    'maxlength' => '32',
                                    'value_name' => '',
                                    'name' => 'passwd',
                                    'id' => 'passwd',
                                    'type' => 'password',
                                    'size' => '25'
                                  }, 'HTML::Form::TextInput' ),
                           bless( {
                                    'current' => 0,
                                    'menu' => [
                                                {
                                                  'seen' => 1,
                                                  'value' => undef,
                                                  'name' => 'off'
                                                },
                                                {
                                                  'value' => 'true',
                                                  'name' => 'automatisch einloggen'
                                                }
                                              ],
                                    'name' => 'setautologin',
                                    'onclick' => 'toggle(\'hinweis_setautologin\', \'setautologin\');',
                                    'id' => 'setautologin',
                                    'type' => 'checkbox'
                                  }, 'HTML::Form::ListInput' ),
                           bless( {
                                    'current' => 0,
                                    'menu' => [
                                                {
                                                  'seen' => 1,
                                                  'value' => undef,
                                                  'name' => 'off'
                                                },
                                                {
                                                  'value' => 'on',
                                                  'name' => 'unsichtbar einloggen prem_small'
                                                }
                                              ],
                                    'name' => 'invisible',
                                    'onclick' => 'toggle(\'hinweis_invisible\', \'invisible\');',
                                    'id' => 'invisible',
                                    'type' => 'checkbox'
                                  }, 'HTML::Form::ListInput' ),
                           bless( {
                                    'readonly' => 1,
                                    'value_name' => '',
                                    'value' => '',
                                    'name' => 'hash',
                                    'id' => 'hash',
                                    'type' => 'hidden'
                                  }, 'HTML::Form::TextInput' ),
                           bless( {
                                    'value_name' => '',
                                    'value' => 'Absenden',
                                    'id' => 'loginsubmit',
                                    'type' => 'submit'
                                  }, 'HTML::Form::SubmitInput' )
                         ]
           }, 'HTML::Form' ); 
```

不幸的是，我无法为该站点发送正确的“提交表单”。问题可能是，有一个复选框可以激活，它调用“setautologin”。

任何帮助都会很棒。

# 更新

我已经用 WWW::Mechanize::Shell 再次尝试过，毕竟构建了一个 perl 脚本......首先我使用“get”来获取登录 URL，然后使用“fillout”来填充所有数据。

不幸的是，它让我回到 login.php。

```
#!/usr/bin/perl -w
use strict;
use WWW::Mechanize;
use WWW::Mechanize::FormFiller;
use URI::URL;

my $agent = WWW::Mechanize->new( autocheck => 1 );
my $formfiller = WWW::Mechanize::FormFiller->new();
$agent->env_proxy();

  $agent->get('http://www.xyz/login.php');
   $agent->form_number(1) if $agent->forms and scalar @{$agent->forms};
  $formfiller->add_filler( 'user' => Fixed => 'MyUsername' );
  $formfiller->add_filler( 'passwd' => Fixed => 'MyPassword' );
  $formfiller->add_filler( 'setautologin' => Fixed => 'true' );
  $formfiller->add_filler( 'invisible' => Fixed => 'off' );$formfiller->fill_form($agent->current_form);
  $agent->submit(); 
```

可能有一种存储cookie的方法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:36:20.760

`WWW::Mechanize`将自动为您处理所有 cookie。所以在这样的结构中没有必要：

```
cookie_jar => HTTP::Cookies->new( file => "./cookies.txt" ) 
```

当然*，如果您不想稍后将这些 cookie 加载到另一个脚本（或同一脚本的另一个运行）中*...

我看到的主要内容是 Javascript 的`md5pass()`功能，它（我相信）会`hash`在您的表单中设置字段。所以你只需要在你的代码中模拟这个函数并提交这个值：

```
$mech->submit_form(
    with_fields => {
        user => $user,
        passwd => $password,
        hash => $hash,
    },
); 
```

# javascript - RadImageEditor onSaving 事件不允许发送响应脚本

> ID：15972584
> 
> 赞同：0
> 
> 时间：2013-04-12T13:24:41.500
> 
> 标签：javascript, asp.net, telerik

我正在使用版本为 2013.1.220.40 的 Telerik RadImageEditor 控件，控件放在页面上，页面显示在 RadWindow 中。我想要的只是传递一个 url 或不传递（分别用于更新和添加场景），当用户单击图像编辑器中的保存按钮时，在弹出窗口中裁剪图像后，我想将路径发送回页面通过将响应脚本添加到 Ajax 管理器。所有的东西都工作正常，但响应脚本不起作用。我试图在 onSaving 事件中放置一个隐藏字段来保存值，然后捕获图像编辑器的 onClientSaved 事件，但隐藏字段的值总是返回空。离开 onSaving 事件后，似乎所有值都重置了。而图像已成功保存在目录中。我不知道导致此错误的缺少什么。

这是服务器端代码。

```
public void RadImageEditor1_ImageSaving(object sender, Telerik.Web.UI.ImageEditorSavingEventArgs e)
        {
            string filename = e.FileName;

            //If Derectory not exist, creat new
            if (!Directory.Exists(Server.MapPath(ConfigurationManager.AppSettings["TempImagePath"])))
                Directory.CreateDirectory(Server.MapPath(ConfigurationManager.AppSettings["TempImagePath"]));

            //Set Image Path
            Path = ConfigurationManager.AppSettings["TempImagePath"] + "/" + filename.Trim() + Extention;
            if (File.Exists(Path))
                File.Delete(Path);

            //Save  image to temp directory
            e.Image.Image.Save(Server.MapPath(Path));

           //Send image path back to the page where this popup Appeared
            RadAjaxManager1.ResponseScripts.Add("CloseAndSendPath('" + Path +"')");
            //ClientScript.RegisterStartupScript(this.Page.GetType(), "CloseAndRebind", "<script>CloseAndRebind('" + Path + "');</script>");

            //Cancel built in Saving.
            e.Cancel = true;
        }

        public string Path
        {
            get
            {
                if (ViewState["Path"] == null)
                    return string.Empty;
                else
                    return ViewState["Path"].ToString();
            }
            set
            {
                ViewState["Path"] = value;
            }
        }

        public string Extention
        {
            get
            {
                if (ViewState["Extention"] == null)
                    return string.Empty;
                else
                    return ViewState["Extention"].ToString();
            }
            set
            {
                ViewState["Extention"] = value;
            }
        }

        public void BtnDeleteClick(object sender, EventArgs e)
        {
            Context.Cache.Remove(Session.SessionID + "UploadedFile");
            Path = string.Empty;
            Extention = string.Empty;
            imgUploaded.ImageUrl = string.Empty;
        }

        public void BtnCropClick(object sender, EventArgs e)
        {
            panelCrop.Visible = panelUpload.Visible;
            panelUpload.Visible = !panelCrop.Visible;
        }

        public void BtnUploadClick(object sender, EventArgs e)
        {
            imgUploaded.ImageUrl = Path;
        }

        public void RadAsyncUpload1_FileUploaded(object sender, Telerik.Web.UI.FileUploadedEventArgs e)
        {
            //Clear changes and remove uploaded image from Cache
            RadImageEditor1.ResetChanges();
            Context.Cache.Remove(Session.SessionID + "UploadedFile");
            using (Stream stream = e.File.InputStream)
            {
                byte[] imgData = new byte[stream.Length];
                stream.Read(imgData, 0, imgData.Length);
                MemoryStream ms = new MemoryStream();
                ms.Write(imgData, 0, imgData.Length);

                Context.Cache.Insert(Session.SessionID + "UploadedFile", ms, null, DateTime.Now.AddMinutes(20), TimeSpan.Zero);
            }

            //Save to Temp Folder as well
            string fileExt = e.File.GetExtension().ToLower();
            if (fileExt != ".jpg" && fileExt != ".png" && fileExt != ".jpeg" && fileExt != ".bmp" && fileExt != ".gif")
            {
                lblError.Text = "Please upload photo only in .jpg, .jpeg, .png, .bmp or .gif format";
                return;
            }
            string filename = e.File.FileName;
            Extention = fileExt;
            if (!Directory.Exists(Server.MapPath(ConfigurationManager.AppSettings["TempImagePath"])))
                Directory.CreateDirectory(Server.MapPath(ConfigurationManager.AppSettings["TempImagePath"]));
            Path = ConfigurationManager.AppSettings["TempImagePath"] + "/" + filename.Trim();
            e.File.SaveAs(Server.MapPath(Path));
        }

        public void RadImageEditor1_ImageLoading(object sender, Telerik.Web.UI.ImageEditorLoadingEventArgs e)
        {
            //Handle Uploaded images
            if (!Object.Equals(Context.Cache.Get(Session.SessionID + "UploadedFile"), null))
            {
                using (EditableImage image = new EditableImage((MemoryStream)Context.Cache.Get(Session.SessionID + "UploadedFile")))
                {
                    e.Image = image.Clone();
                    e.Cancel = true;
                }
            }
        }

        protected void Page_Init(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                if (!string.IsNullOrEmpty(Request.QueryString["usertype"]))
                {
                    string usertype = Request.QueryString["usertype"];
                    switch (usertype)
                    {
                        case "employee":
                        case "customer":
                            RadImageEditor1.ExternalDialogsPath = "~/Controls/Crop/Employee/ImageEditorDialogs";
                            break;
                        case "company":
                            RadImageEditor1.ExternalDialogsPath = "~/Controls/Crop/Company/ImageEditorDialogs";
                            break;
                    }
                }
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                Context.Cache.Remove(Session.SessionID + "UploadedFile");
                if (!string.IsNullOrEmpty(Request.QueryString["path"]))
                {
                    Path = Request.QueryString["path"];
                    imgUploaded.ImageUrl = Path;
                    System.IO.FileInfo file = new FileInfo(Path);
                    if (file != null)
                    {
                        Extention = file.Extension;
                        using (FileStream stream = new FileStream(Server.MapPath(Path), FileMode.Open))
                        {
                            byte[] imgData = new byte[stream.Length];
                            stream.Read(imgData, 0, imgData.Length);
                            MemoryStream ms = new MemoryStream();
                            ms.Write(imgData, 0, imgData.Length);

                            Context.Cache.Insert(Session.SessionID + "UploadedFile", ms, null, DateTime.Now.AddMinutes(20), TimeSpan.Zero);
                        }
                    }
                }
            }
        } 
```

这是带有java脚本的标记

```
<form id="form1" runat="server">
    <telerik:RadScriptManager ID="RadScriptManager1" runat="server">
        <Scripts>
            <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.Core.js">
            </asp:ScriptReference>
            <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQuery.js">
            </asp:ScriptReference>
            <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQueryInclude.js">
            </asp:ScriptReference>
        </Scripts>
    </telerik:RadScriptManager>
    <telerik:RadAjaxLoadingPanel ID="loadingPanel1" runat="server">
    </telerik:RadAjaxLoadingPanel>
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" LoadingPanelID="loadingPanel1">
        <AjaxSettings>
        </AjaxSettings>
    </telerik:RadAjaxManager>
    <asp:Panel ID="panelUpload" runat="server" DefaultButton="btnUpload">
        <telerik:RadAsyncUpload ID="RadAsyncUpload1" runat="server" OnFileUploaded="RadAsyncUpload1_FileUploaded"
            MaxFileSize="5242880" OnClientValidationFailed="validationFailed" AllowedFileExtensions="jpg,png,gif,bmp"
            AutoAddFileInputs="false" OnClientFileUploadRemoved="fileRemoved" MaxFileInputsCount="1"
            HideFileInput="true" Localization-Select="Browse">
        </telerik:RadAsyncUpload>
        <asp:Label ID="lblError" runat="server" ForeColor="Red" ViewStateMode="Disabled"></asp:Label>
        <asp:Panel ID="PanelButtons" runat="server">
            <asp:Button ID="btnUpload" Text="Upload Image" runat="server" CausesValidation="False"
                OnClick="BtnUploadClick"></asp:Button>
            <asp:Button ID="btnCrop" runat="server" Text="Crop" OnClick="BtnCropClick" />
            <asp:Button ID="btnDelete" runat="server" Text="Delete" OnClick="BtnDeleteClick" />
            <asp:Image ID="imgUploaded" runat="server" Width="150px" Height="150px" />
        </asp:Panel>
    </asp:Panel>
    <asp:Panel ID="panelCrop" runat="server" Visible="false">
        <telerik:RadImageEditor ID="RadImageEditor1" runat="server" Width="750px" Height="480px"
            ToolsFile="~/Utilities/Tools/ImageUploadToolsFile.xml" OnImageLoading="RadImageEditor1_ImageLoading"
            OnImageSaving="RadImageEditor1_ImageSaving" OnClientLoad="ImageEditorLoad">
            <Tools>
                <telerik:ImageEditorToolGroup>
                    <telerik:ImageEditorTool Text="SaveImage" CommandName="SaveImage" ImageUrl="~/images/toolBarSprite.png" />
                </telerik:ImageEditorToolGroup>
            </Tools>
        </telerik:RadImageEditor>
    </asp:Panel>
    <telerik:RadScriptBlock ID="RadScriptBlock" runat="server">
        <script type="text/javascript">

            function validationFailed(sender, eventArgs) {
                $telerik.$("#asyncUpload").html("Validation failed for '" + eventArgs.get_fileName() + "'.").fadeIn("slow");
            }
            function fileRemoved(sender, eventArgs) {
                $telerik.$("#asyncUpload").html('').fadeOut("slow");
            }

            function waitForCommand(imageEditor, commandName, callback) {
                var timer = setInterval(function () {
                    var widget = imageEditor.get_currentToolWidget();
                    if (widget && widget.get_name() == commandName) {
                        clearInterval(timer);
                        callback(widget);
                    }
                }, 100);
            }
            Telerik.Web.UI.ImageEditor.CommandList["SaveImage"] = function (imageEditor, commandName, args) {
                var dt = new Date();
                var year = dt.getFullYear();
                var month = dt.getMonth();
                var day = dt.getDate(); var hour = dt.getHours();
                var min = dt.getMinutes();
                var newdate = year + "-" + month + "-" + day + " " + hour + "-" + min;

                imageEditor.saveImageOnServer(newdate, true); //saves the image on the server - it either overwrites the file or keeps both files
            };

            function ImageEditorLoad(imgEditor, args) {
                //open the Crop tool dialog with a little timeout
                setTimeout(function () {
                    imgEditor.fire("Crop");
                }, 0);
            }

            function CloseAndSendPath(arg) {
                GetRadWindow().BrowserWindow.UpdateImageUrl(arg);//a method from page where this popup appeared
                GetRadWindow().close();

            }

            function GetRadWindow() {
                var oWindow = null;
                if (window.radWindow) oWindow = window.radWindow; //Will work in Moz in all cases, including clasic dialog
                else if (window.frameElement.radWindow) oWindow = window.frameElement.radWindow; //IE (and Moz as well)
                return oWindow;
            }
        </script>
    </telerik:RadScriptBlock>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:19:35.917

RadImageEditor 的服务器事件是回调，因此您不能在其中注册脚本。这就是 MS AJAX 框架使用回调操作的方式。看看这里到底什么是回调以及它与您期望的部分回发有何不同：http: [//blogs.telerik.com/aspnet-ajax/posts/13-03-21/different-ways-to-向服务器发出请求](http://blogs.telerik.com/aspnet-ajax/posts/13-03-21/different-ways-to-make-a-request-to-the-server)。

# php - 创建权限并在模块安装时为其设置角色

> ID：15972588
> 
> 赞同：0
> 
> 时间：2013-04-12T13:24:48.417
> 
> 标签：php, drupal, drupal-7, user-permissions

我一直在寻找大约一个小时，要么我找不到它，要么没有人问这个——我会觉得很奇怪。

我希望我的模块在安装时创建一个新角色，创建新权限，并将特定角色分配给新权限。我似乎被挂断的是最后一部分。

我意识到，按照惯例，权限是在 hook_permissions() 中设置的，并且我通过我的网站行为假设在创建这些权限之前调用了 hook_install()（这很有意义。）所以，我的问题很可能只是：

> 有没有办法在 hook_install()/hook_permissions() 之外创建权限？我似乎找不到任何这样的例子，或者在模块安装之前不存在的设置权限的任何例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:19:04.730

功能模块可以为您解决这个问题，因为您可以导出分配给这些角色的角色和权限。

具有权限的角色的实际创建发生在启用模块而不是安装模块时，这实际上是同一件事。功能还允许您导出许多其他内容，并且是一个非常方便的模块。

# sql-server - 使用 LINQ 查询内存中的数据集与直接查询 SQL 表（字典表） - 性能

> ID：15972591
> 
> 赞同：1
> 
> 时间：2013-04-12T13:24:53.570
> 
> 标签：sql-server, linq, memory, datatable

我还没有找到确切的答案，所以：

想象一个 3 列的字典表，其结构如下：

> 整数 | 字符串1 | string2（其中 int+string1 是 pk）

表有超过 20k 行，它的查询非常广泛，`pk`以返回`string2`值

这里最好的方法是什么？

**1.**直接LINQ DB请求

**亲：**通过PK查询确实非常快

**缺点：**每秒可能有几百次调用数据库服务器

**2.**预加载数据一次到DataTable对象

**pro：**所有数据都在本地.net内存中（无需每次都去db）

**缺点：**使用 LINQ 需要调用`AsEnumerable()`返回`DataTable`可枚举对象`DataSource`的 LINQ 查询。在这里对对象的 LINQ 查询比调用 DB 更有效吗？这里使用PK约束吗？

**3.**将所有表预加载到`Dictionary<string, string>`key`int.ToString()+string1`和value所在的位置`string2`

**pro：**始终使用 PK 约束，字典直接以正确的值响应

**缺点：**是比1好还是2好？

**4.**你更好的主意

我的好奇心正在等待答案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T14:42:41.813

最后我有时间写了一个简单的测试应用程序，但使用的是真实数据，所以结果在这种情况下非常相关。

所以 - 一旦我将大约 4k 条记录预加载到 Dictionary 并进行了 100k 循环，结果是检索数据**00:00:00.950095**！

第二次我做了同样的 100k 循环，每次都询问数据库，结果如下：**00:02:32.81...**

似乎选择很容易。

# etl - 如何使用 pentaho 从网络驱动器复制文件

> ID：15972601
> 
> 赞同：0
> 
> 时间：2013-04-12T13:25:19.910
> 
> 标签：etl, pentaho, data-integration

我已经通过提供如下凭据访问了 FTP 路径

![访问 FTP 路径](https://i.stack.imgur.com/SGaU2.jpg)

对于我这样访问的常用文件夹。

![访问网络路径](https://i.stack.imgur.com/XXoRP.jpg)

当我的 Windows 电脑存储网络登录密码时，这可以正常工作。我需要在步骤本身中提及，我必须使用哪种类型的步骤或任何其他建议？？？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T23:21:11.607

这里的问题是挂载网络文件系统是非常特定于操作系统的。FTPS 步骤允许使用密码，因为这是在 FTP(S) 协议中定义的。复制文件步骤使用操作系统的复制命令，该命令没有指定密码的机制。

要在您未登录时进行这项工作，您必须设置一个计划作业，该作业在您的帐户下登录并运行该作业（厨房）。我在 Windows Scheduler 中并没有搞砸太多。当我没有登录时，我总是无法让它运行。

我使用 pgAgent 在我的有效域帐户下安排我的作业，但我必须指定完整的 UNC 路径名。它不保留我的驱动器映射。

抱歉，我无法提供更多帮助。这是基于 Java 的 PDI 在 Windows 上的一个缺点。访问特定于 Windows 的技术可能很棘手。

# sql - LINQ 实体框架中的 WITH 语句

> ID：15972602
> 
> 赞同：0
> 
> 时间：2013-04-12T13:25:22.603
> 
> 标签：sql, sql-server, linq, entity-framework, sql-to-linq-conversion

我有一个这样的 SQL 代码，我将在 .NET 应用程序中使用它，我熟悉 LINQ，但我不知道如何处理 WITH 语句。

```
WITH records
AS
(
    SELECT  [key], [rev], [IsCurrent],
            ROW_NUMBER() OVER(PARTITION BY [key]
            ORDER BY CASE WHEN [rev] = @revNUm          
            THEN 0 ELSE 1 END) rn
    FROM    tableName
    WHERE   [Rev] IN (@revNUm,0)
)
SELECT  [key], [rev], [IsCurrent]
FROM    records 
WHERE   rn = 1 
```

编辑： ROW_NUMBER() 似乎也很难，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:51:05.700

看起来您正在获取每个键分组中的第一条记录，其中`rev`0 或等于`revnum`参数。您可以在 Linq 中执行以下操作：

```
 var query = db.records
               .OrderBy(r => r.rev == revNum ? 0 : 1)
               .Where(r => rev == 0 || rev == revNum)
               .GroupBy(r => r.key)
               .Select(g => g.First()); 
```

如果记录包含的字段多于查询中的三个字段，则只需添加

```
 .Select(r => new {r.key, r.rev, r.IsCurrent}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:42:52.883

将查询保存为存储过程并使用 LINQ，调用存储过程（请参见此处：http: [//msdn.microsoft.com/en-us/library/bb918119.aspx](http://msdn.microsoft.com/en-us/library/bb918119.aspx)）。像这样的东西：

```
CREATE PROCEDURE newprocedure
@revNUm INT
AS    
BEGIN
WITH records
AS
(
    SELECT  [key], [rev], [IsCurrent],
            ROW_NUMBER() OVER(PARTITION BY [key]
            ORDER BY CASE WHEN [rev] = @revNUm          
            THEN 0 ELSE 1 END) rn
    FROM    tableName
    WHERE   [Rev] IN (@revNUm,0)
)
SELECT  [key], [rev], [IsCurrent]
FROM    records 
WHERE   rn = 1
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:25:16.417

从您的代码创建内联表值函数

```
CREATE FUNCTION YourFunction
(   
)
RETURNS TABLE 
AS
RETURN 
(
WITH records
AS
(
    SELECT  [key], [rev], [IsCurrent],
            ROW_NUMBER() OVER(PARTITION BY [key]
            ORDER BY CASE WHEN [rev] = @revNUm          
            THEN 0 ELSE 1 END) rn
    FROM    tableName
    WHERE   [Rev] IN (@revNUm,0)
)
SELECT  [key], [rev], [IsCurrent]
FROM    records 
WHERE   rn = 1
)
GO 
```

将此函数交给您的 DBML 设计器。这样您将获得最快的执行时间和最简单的实现方式。

# html - 可以用 CSS 实现吗？

> ID：15972604
> 
> 赞同：5
> 
> 时间：2013-04-12T13:25:33.237
> 
> 标签：html, css, css-shapes

![带圆圈的 div，包含投影](https://i.stack.imgur.com/WsNtf.jpg)

有没有用 HTML/CSS 做这个的好方法？基本上是一个 div，边缘有一个圆形“凸起”。这部分使用伪类很容易，但我的问题是让阴影将其视为形状的一部分。

当我分别对圆圈应用阴影时，它不能可靠地工作。我知道有办法做到这一点..但我不确定浏览器支持是什么。

你们会推荐什么是解决这个问题的最佳方法？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:39:27.300

你可以用一堆 CSS 来接近这个。请参阅[此 JSFiddle](http://jsfiddle.net/boldewyn/2hNLf/)以获取实时示例。但是，也有缺点：

*   低于 9 的 IE 支持不好
*   不是像素完美的，因为一些盒子阴影重叠
*   容器*必须*有`position: relative`（或`absolute`）

CSS：

```
div {
    margin: 100px;
    width: 100px;
    height: 100px;
    box-shadow: 0 0 10px black;
    border-radius: 10px;
    position: relative;
}

div:before {
    display: block;
    content: "";
    width: 40px;
    height: 40px;
    position: absolute;
    left: -20px;
    top: 30px;
    border-radius: 20px;
    box-shadow: 0 0 10px black;
    clip: rect(-10px, 20px, 50px, -10px);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:28:15.770

老实说，一个图像，如果你想让它在 mozilla、safari 和 chrome 上运行。它可以用css3完成，但我不推荐它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:29:15.700

用 CSS 做这个只会增加开销。我建议使用简单的背景图片。使用 CSS3，您可以很好地控制定位、透明度等。

可能更重要的是，如果他们必须使用您的代码，它会给其他开发人员造成一层“混乱”。保持干净。如果需要显示图像，请使用图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T13:37:53.140

是的，您可以这样做，但需要进行大量手动调整才能获得更容易使用图像完成的功能。

本质上问题在于阴影，为了解决这个问题，您必须使用定位和 z-indexes 创建一个元素三明治。您需要一个圆形元素位于矩形元素的后面，然后将圆形元素的副本放在矩形元素的顶部。然后是使用 CSS3 属性（如阴影和渐变）的另一个问题，这将导致浏览器兼容性问题。

这是一个**[jsFiddle 示例](http://jsfiddle.net/j08691/zu624/1/)**。

显然，这个例子的问题是让渐变完美地铺满，我没有花太多时间。

```
#circ {
    border-radius: 40px;
    width:40px;
    height:40px;
    box-shadow: 0px 0px 10px #999;
    position: absolute;
    left: 37px;
    top: 77px;
    background: #fcfcfc;
    position:absolute;
    left: 40px;
    top:75px;
    /* Old browsers */
    background: -moz-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #fcfcfc), color-stop(100%, #cccccc));
    /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* IE10+ */
    background: linear-gradient(to bottom, #fcfcfc 0%, #cccccc 100%);
    /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfcfc', endColorstr='#cccccc', GradientType=0);
    /* IE6-9 */
    z-index: -1;
}
#rect {
    width:200px;
    height:80px;
    background: #fcfcfc;
    position:relative;
    left: 50px;
    top:50px;
    box-shadow: 0px 0px 10px #999;
    /* Old browsers */
    background: -moz-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #fcfcfc), color-stop(100%, #cccccc));
    /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* IE10+ */
    background: linear-gradient(to bottom, #fcfcfc 0%, #cccccc 100%);
    /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfcfc', endColorstr='#cccccc', GradientType=0);
    /* IE6-9 */
}

#circ2 {
    border-radius: 40px;
    width:40px;
    height:40px;
    position: absolute;
    left: 37px;
    top: 77px;
    background: #fcfcfc;
    position:absolute;
    left: 40px;
    top:75px;
        /* Old browsers */
    background: -moz-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #fcfcfc), color-stop(100%, #cccccc));
    /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #fcfcfc 0%, #cccccc 100%);
    /* IE10+ */
    background: linear-gradient(to bottom, #fcfcfc 0%, #cccccc 100%);
    /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfcfc', endColorstr='#cccccc', GradientType=0);
    /* IE6-9 */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:43:59.003

您可以在 css3 中使用border-radius 函数，但最好的方法是使用图像。

边界半径的示例：

## html

```
<div id="wrap">
<div class="round">
    Border
</div>
</div> 
```

## css

```
html,body{
    background-color: #ccc;
    padding: 0;
    margin: 0;
}

#wrap{

    background-color: #fff;
    padding: 20px;
    width: 44%;
    margin: 20px;
    position: absolute;
    z-index: 1;
}

.round{
    width: 200px;
    padding: 20px;
    background-color: #fff;
    border-radius: 50px;
} 
```

一个jsfiddle示例：

[http://jsfiddle.net/RpE4G/](http://jsfiddle.net/RpE4G/)

# sql - SQL Server 子查询返回超过 1 个值

> ID：15972607
> 
> 赞同：1
> 
> 时间：2013-04-12T13:25:40.690
> 
> 标签：sql, sql-server, subquery, case

我正在尝试对 SQL Server 2012 进行分类（查看[SQL Fiddle](http://sqlfiddle.com/#!6/04779/1)演示）

但是，当我引入子查询时，它检索到以下消息：“*子查询返回超过 1 个值。当子查询遵循 =、!=、<、<=、>、>= 或使用子查询时，这是不允许的作为表达*“

我应该改用什么脚本？

编辑：我希望有以下输出，基于 SQL Fiddle 演示：

```
CATEGORY    REGION    PRECIO    CATEGORY
Pepe         Paris      21        Other
Pizza        Paris      21        Pizza
Pizza        Paris      22        Pizza
Salad        Paris      22        Other
Beverage    Vidreres    20       Beverage   
Beverage    Vidreres    24       Beverage   
Pizza       Vidreres    19        Pizza
Pizza       Vidreres    20        Pizza 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:42:41.210

添加计数（请停止更改要求）。为避免重复代码，您可以`CASE`在 CTE 中执行表达式（也可以使用派生表）。

```
;WITH x AS 
(
  SELECT Category, Region, Precio, 
    Products = CASE WHEN Category IN ('Pizza','Beverage')
      THEN Category ELSE 'Other' END
  FROM dbo.supportContacts
)
SELECT Category, Region, Precio, Products,
  ProductCount = COUNT(*) OVER (PARTITION BY Products)
FROM x; 
```

[SQL小提琴演示](http://sqlfiddle.com/#!6/04779/30)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:32:33.230

尝试这个。

```
SELECT *, case
            when Category = 'Pizza' then 'Pizza'
            when Category = 'Beverage' then 'Beverage'
            else 'Other' end as Products

 FROM supportContacts
Group by Region, Category, Precio 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:32:47.027

你不需要子查询

```
SELECT *, case
      when Category = 'Pizza' then 'Pizza'
          when Category = 'Beverage' then 'Beverage'
       else 'Other' end as Products
 FROM supportContacts
Group by Region, Category, Precio 
```

输出：

```
| CATEGORY |   REGION | PRECIO | PRODUCTS |
-------------------------------------------
|     Pepe |    Paris |     21 |    Other |
|    Pizza |    Paris |     21 |    Pizza |
|    Pizza |    Paris |     22 |    Pizza |
|    Salad |    Paris |     22 |    Other |
| Beverage | Vidreres |     20 | Beverage |
| Beverage | Vidreres |     24 | Beverage |
|    Pizza | Vidreres |     19 |    Pizza |
|    Pizza | Vidreres |     20 |    Pizza | 
```

**[SQLFiddle](http://sqlfiddle.com/#!6/04779/9)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T13:34:40.537

我认为您编写该查询以获得以下结果...

![在此处输入图像描述](https://i.stack.imgur.com/beupK.png)

如果我得到你然后尝试下面的查询..

```
Select Category, Region, Precio,Products,count(Products) _Count from
(Select Category, Region, Precio,
case
        when Category = 'Pizza' then 'Pizza'
        when Category = 'Beverage' then 'Beverage'
        else 'Other' 
end as Products 
FROM supportContacts) res
Group by Category,Region,Precio,Products 
```

# jquery - jQuery - 萤火虫返回不是一个函数

> ID：15972608
> 
> 赞同：0
> 
> 时间：2013-04-12T13:25:42.337
> 
> 标签：jquery, raphael

我使用 jQuery 和 Raphael 根据选中的复选框隐藏/显示形状，但我收到一个 .show();/.hide(); 的萤火虫错误 当我将变量分配给复选框 id 并尝试显示/隐藏时，它们不是函数。但是当我直接传递形状变量名称并显示/隐藏它时它可以工作。

非常感谢关于为什么第一种方法返回错误或指向我的教程的任何帮助。谢谢！

jQuery：

```
var p = Raphael("test");

var square = p.rect(100, 100, 60, 60);
square.attr('fill', 'orange');
square.hide();

var circle = p.circle(250, 250, 60);
circle.attr('fill', 'yellow');
circle.show();

$("#shapePosition input[type=checkbox]").on('click', function () {
var $this = $(this);
var shapeId = $(this).attr('id');
if ($this.is(':checked')) {
    alert(shapeId);
    square.show(); //This works
    shapeId.show(); //This does not work(Error type: is not a function)
} else {
    shapeId.hide();
}
}); 
```

小提琴：

[http://jsfiddle.net/adam123/Jw9h5/30/](http://jsfiddle.net/adam123/Jw9h5/30/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:26:52.593

在您的代码中：

```
var shapeId = $(this).attr('id'); 
```

`shapeId`是一个字符串对象。并且字符串对象没有`.show()`函数。

你可以做的是让你的形状可以从一个对象访问，并像下面这样处理它们：

```
var p = Raphael("test");

var shapes = {};

shapes.square = p.rect(100, 100, 60, 60);
shapes.square.attr('fill', 'orange');
shapes.square.hide();

shapes.circle = p.circle(250, 250, 60);
shapes.circle.attr('fill', 'yellow');
shapes.circle.show();

$("#shapePosition input[type=checkbox]").on('click', function () {
    var $this = $(this);
    var shapeId = $(this).attr('id');
    if ($this.is(':checked')) {
        shapes[shapeId].show();
    } else {
        shapes[shapeId].hide();
    }
}); 
```

**演示**：http: [//jsfiddle.net/Jw9h5/32/](http://jsfiddle.net/Jw9h5/32/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:32:07.663

如前所述，`shapeId`是一个字符串。您需要将其映射到您希望显示的对象。我看到 ID 与您的变量名称相同。我建议您以这种方式进行映射：

```
var p = Raphael("test");
var shapes = {};

var square = shapes['square'] = p.rect(100, 100, 60, 60);
square.attr('fill', 'orange');
square.hide();

var circle = shapes['circle'] = p.circle(250, 250, 60);
circle.attr('fill', 'yellow');
circle.show();

$("#shapePosition input[type=checkbox]").on('click', function () {
var $this = $(this);
var shapeId = $this.attr('id');
if ($this.is(':checked')) {
    shapes[shapeId].show();
} else {
    shapes[shapeId].hide();
}
}); 
```

# javascript - JSON响应被浏览器修改

> ID：15972612
> 
> 赞同：1
> 
> 时间：2013-04-12T13:25:50.840
> 
> 标签：javascript, json, http, httpresponse

我正在调用返回 JSON 数据的 RESTFUL Web 服务。响应包含一个数值（不带引号）10000000000223169，但在针对此响应获取 JavaScript 对象后，我得到 10000000000223168。

直接在浏览器中显示的 JSON 响应也显示 10000000000223168 但内容选项卡中的 FireBug HTTP 响应显示正确的值，即 10000000000223169

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:28:22.567

这是因为 JavaScript 中的数字是[IEEE754 双精度浮点数](http://en.wikipedia.org/wiki/Double_precision)。

整数最多只能表示为 2^53。

您的号码太大，无法作为号码发送，您应该将其作为字符串发送。

如果您需要在浏览器中使用此数字进行计算，最简单的解决方案是使用大数字专用库（请参阅[此相关问题](https://stackoverflow.com/questions/4288821/how-to-deal-with-big-numbers-in-javascript)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:28:13.997

10000000000223169 超出了在 JavaScript（以及 JSON）中可以表示为精确整数的范围。它大约是*2 ^ 53.151*，而 IEEE 754 仅允许双精度浮点数尾数中的 53 位分辨率。

要在不修改的情况下传输它，需要将其作为字符串发送。

在使用此代码的客户端中，还需要将其存储为字符串或 64 位整数（假设您使用的是具有这种数据类型的语言）。

如果您尝试将其存储在 IEEE 754 浮点数中（这是 JS 中的默认数字类型，只要您尝试对其执行任何数学运算，它仍会四舍五入为 53 位精度。

# javascript - JavaScript 作用域基础：监听自定义事件？

> ID：15972617
> 
> 赞同：0
> 
> 时间：2013-04-12T13:26:09.177
> 
> 标签：javascript, google-maps, backbone.js

关于 JavaScript 范围的问题。我有三个文件（我正在使用 Backbone，但我不确定这是否相关）。第一个文件定义了一个谷歌地图自定义信息窗口。第二个文件定义了一个谷歌地图标记并将信息窗口应用到它。最后，第三个文件将标记和其他页面元素添加到地图中。

我希望第三个文件能够侦听信息窗口上的鼠标悬停事件，并在其他页面元素发生时调用它们的方法。但是，我的 JavaScript 还不够好，不知道如何：

```
// InfoWindow.js defines the info window & adds a mouseover event
AI.InfoWindow.prototype = new google.maps.OverlayView;
AI.InfoWindow.prototype.onAdd = function() {
  this.listeners = [
    google.maps.event.addDomListener(this.$content.get(0), "mouseover", function (e) {
       clearTimeout( window.hidePopupTimeoutId );
    }) ...
  ];
};

// Marker.js defines the map marker and adds the infowindow 
AI.Marker = function() {
  google.maps.Marker.prototype.constructor.apply(this, arguments);
  this.infoWindow = new AI.InfoWindow();
}

// Home.js creates the markers for the map
var myOtherHomePageElement = new AI.OtherHomePageElement();
var marker = new AI.Marker({
   data: entity 
});
// how to listen to infowindow events here? 
```

所以我的问题是：infowindow 上的鼠标悬停工作正常，但我希望能够在`myOtherPageElement.start()`鼠标悬停时调用。如何从 Home.js 文件中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:43:15.910

当鼠标悬停发生时，您可以使用`Backbone.trigger`and`Backbone.on`通知 Home.js 中的对象。

```
// InfoWindow.js defines the info window & adds a mouseover event
AI.InfoWindow.prototype = new google.maps.OverlayView;
AI.InfoWindow.prototype.onAdd = function() {
  this.listeners = [
    google.maps.event.addDomListener(this.$content.get(0), "mouseover", function (e) {
       clearTimeout( window.hidePopupTimeoutId );
       Backbone.trigger('infowindow:mouseover', e);
    }) ...
  ];
};

// Marker.js defines the map marker and adds the infowindow 
AI.Marker = function() {
  google.maps.Marker.prototype.constructor.apply(this, arguments);
  this.infoWindow = new AI.InfoWindow();
}

// Home.js creates the markers for the map
var myOtherHomePageElement = new AI.OtherHomePageElement();
var marker = new AI.Marker({
   data: entity 
});
Backbone.on('infowindow:mouseover', myOtherHomePageElement.start, myOtherHomePageElement); 
```

# ruby-on-rails - 访问助手以获取会话对象

> ID：15972620
> 
> 赞同：1
> 
> 时间：2013-04-12T13:26:21.343
> 
> 标签：ruby-on-rails, session

我的应用程序中有 2 个不同的控制器应该访问同一个会话对象。目前我正在使用`:active_record_store`，因为我不想使用数据库来获取我的用户。

我正在做这样的事情：

api 控制器获取用户电子邮件并创建用户对象（有效？、哈希和其他方法）

```
class ApiController < ApplicationController
  def login
    user = Requester.validate_email params[:email]
    if user.valid?
      session[:current_user] = user # works
      current_user = user           # dont work
      redirect_to app_root_path
    else
      redirect_to app_signup_path
    end
  end
end 
```

家庭控制器将向用户显示一些页面，因为他已经“登录”了

```
class PagesController < ApplicationController

  def home
    puts "Home"

    # Everything here works fine
    puts session[:current_user].hash
    puts session[:current_user]
    puts session[:current_user].nil?

    # Nothing here works
    puts current_user.hash
    puts current_user
    puts current_user.nil?
  end
end 
```

和`current_user`方法`current_user=`位于`ApplicationController`：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

private 
  def current_user
    session[:user]
  end

  def current_user=(user)
    session[:user] = user
  end
end 
```

我究竟做错了什么？为什么我不能`session[:user]`从私有方法内部访问？

* * *

在开发中使用 rails 3.2.11 和 sqlite3，在生产中使用 postgresql

* * *

**编辑**

我发现我的问题，显然我不能使用`current_user = <some object>`，如果我使用，`current_user(<some object>)`那么这将工作。

```
def current_user(user)
  session[:user] = user
end

def current_user=(user)
  session[:user] = user
end

def current_user
  session[:user]
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:24:45.680

current_user = user # 这个设置变量 current_user with value = user

self.current_user = user # 这个调用方法 current_user=() with arg user

# asp.net-web-api - application/x-www-form-urlencoded 的自定义属性名称绑定

> ID：15972626
> 
> 赞同：7
> 
> 时间：2013-04-12T13:26:37.420
> 
> 标签：asp.net-web-api

对于`application/json`或者`application/xml`我可以`DataContract`用于自定义属性名称绑定：

```
[HttpPost]
public string Method([FromBody]Model request)
{
}

[DataContract]
public class Model
{
    [DataMember(Name="custom_name")]
    public string CustomName { get; set; }
} 
```

我该如何使用`DataContract`或其他用途`application/x-www-form-urlencoded`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:20:29.683

这是关于设置 DataContractFormat 的 MSDN 帖子：http: [//blogs.msdn.com/b/endpoint/archive/2011/05/15/using-datacontracts-with-wcf-web-api.aspx](http://blogs.msdn.com/b/endpoint/archive/2011/05/15/using-datacontracts-with-wcf-web-api.aspx)

[MediaTypeFormatterCollection](http://msdn.microsoft.com/en-us/library/system.net.http.formatting.mediatypeformattercollection%28v=vs.108%29.aspx)类包含FormUrlEncodedFormatter [。](http://msdn.microsoft.com/en-us/library/system.net.http.formatting.mediatypeformattercollection.formurlencodedformatter%28v=vs.108%29.aspx)您可以尝试上面的帖子来设置您的 DataContractSerializer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:36:59.597

有一个用于 form-urlencoded 的内置 FormUrlEncodedMediaTypeFormatter 实现，您可以使用它。它应该适用于任何 POCO 类（您的数据合同也应该适用，但它会忽略 DataContract 属性），

[http://msdn.microsoft.com/en-us/library/system.net.http.formatting.formurlencodedmediatypeformatter(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.net.http.formatting.formurlencodedmediatypeformatter(v=vs.108).aspx)

确保您在 Web api 中配置了该媒体类型格式化程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T12:07:48.890

这是一个旧帖子，但也许这可以帮助其他人。这是使用[ModelBinder 和 AliasAttribute](https://gist.github.com/ToineSeiter/5e124769b09ab425952526958f9caa06)执行此类代码的解决方案：

```
[ModelBinder(typeof(AliasBinder))]
public class MyModel
{
    [Alias("state")]
    public string Status { get; set; }
} 
```

希望这可以帮助 ：）

# android - 使用片段中的 setText() 修改同一片段中的文本

> ID：15972627
> 
> 赞同：0
> 
> 时间：2013-04-12T13:26:41.407
> 
> 标签：android, android-fragments, textview, settext

我有一项活动可以在其 UI 上膨胀 3 个不同的片段。这个片段之一（myTable）有 3 个我需要修改的 TextView。

事实是我在不同的活动中使用了同一个片段，所以我需要直接从片段中执行这个文本更改。

我正在这样做：

```
int d_ex=145909;

@Override   
public void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
barEx = (TextView) getActivity().findViewById(R.id.tvExQty);
barEx.setText(String.valueOf(d_ex));  // app crash here!!!!!!!
} 
```

我更改了相同的说明并将它们粘贴到另一个方法（如 onCreateView()）上，但我得到了同样的错误。

我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:32:27.357

据我了解。

myTable 有您想要更改的 TextView，并且您想在 myTable 本身中更改它。

所以你应该在 onCreateView 中这样做：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.frag_my_table, null);
            TextView txt = (TextView) v.findViewById(R.id.txExQty);
            txt.setText(Integer.toString(d_ex)); 
```

# iphone - ICS 文件下载在 iPhone Chrome 上失败，出现“未知文件类型”

> ID：15972628
> 
> 赞同：8
> 
> 时间：2013-04-12T13:26:44.783
> 
> 标签：iphone, google-chrome, mobile-safari, icalendar, mobile-chrome

我有一个为移动网络应用程序自动生成 ics 文件的 php 脚本。

在我的 Win7 桌面上使用 Chrome，ics 文件下载正常，并且 Outlook 喜欢它。

在我的 iPhone 上使用 Safari，ics 文件按预期打开日历应用程序，并允许我添加到日历。

在我的 iPhone 上使用 Chrome，我得到“下载失败。Chrome 无法下载此文件。错误 102 ()：未知文件类型。”

我正在发送这些标头：

```
header("Content-Type: text/Calendar; charset=utf-8");
header("Content-Disposition: inline; filename={$slug}.ics");
header("HTTP/1.0 200 OK", true, 200); 
```

我的 ics 文件输出是：

```
BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
PRODID:-//example.com//NONSGML blah blah//EN
METHOD:PUBLISH
BEGIN:VEVENT
UID:20130412T062148-527420343@example.com
DTSTAMP:20130412T062148
DTSTART:20130524T134500Z
DTEND:20130524T153000Z
LOCATION:
SUMMARY:This is the summary
DESCRIPTION:This is the description
STATUS:CONFIRMED
TRANS:OPAQUE
END:VEVENT
END:VCALENDAR 
```

关于 iPhone Chrome 不喜欢什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-22T09:45:35.217

它看起来像 iOS 版 Chrome 中的一个错误。见[https://bugs.chromium.org/p/chromium/issues/detail?id=666211](https://bugs.chromium.org/p/chromium/issues/detail?id=666211)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T11:52:46.300

我看到的大多数例子都是小写的 [http://www.w3.org/Protocols/rfc1341/4_Content-Type.html](http://www.w3.org/Protocols/rfc1341/4_Content-Type.html)

试着做那个

内容类型：文本/日历

不是

内容类型：文本/日历

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-21T16:32:40.667

使用 webcal://your_link.ics

这应该可以解决您的问题。[这是它的外观预览](https://i.stack.imgur.com/E1rrE.png)

这是一个[jsbin](https://jsbin.com/ruqulosaco/1/edit?html,css,js,output)，演示了基于用户代理的协议自动选择。

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
  <a href="webcal://w3assets.angelbroking.com/wp-content/uploads/2020/07/ANGEL_BROKING_MONSOON_FESTIVAL.ics">Test webcal://</a>
  <br><br>
  <a href="https://w3assets.angelbroking.com/wp-content/uploads/2020/07/ANGEL_BROKING_MONSOON_FESTIVAL.ics">Test https://</a>
  <br><br>
  <a id="auto" href="https://w3assets.angelbroking.com/wp-content/uploads/2020/07/ANGEL_BROKING_MONSOON_FESTIVAL.ics">Auto (check JS)</a>
  <br><br>
  <textarea readonly id="ua"></textarea>
</body>
</html> 
```

**Javascript：**

```
// Source: https://stackoverflow.com/a/9039885/3577736
function is_iOS() {
  return [
    'iPad Simulator',
    'iPhone Simulator',
    'iPod Simulator',
    'iPad',
    'iPhone',
    'iPod'
  ].includes(navigator.platform)
  // iPad on iOS 13 detection
  || (navigator.userAgent.includes("Mac") && "ontouchend" in document)
}

if(is_iOS()) {
    document.getElementById('auto').href = document.getElementById('auto').href.replace(/https?:/, 'webcal:');
}

// Debugging
document.getElementById('ua').value =  navigator.userAgent; 
```

**CSS：**

```
textarea {
  width: 100%
} 
```

# c - 矩阵乘法动态分配矩阵错误：分段错误（核心转储）

> ID：15972636
> 
> 赞同：1
> 
> 时间：2013-04-12T13:27:06.467
> 
> 标签：c, memory, time, matrix, dynamic-allocation

我正在写一个矩阵乘法程序，我需要检查不同大小的不同矩阵的运行时间。然后我需要将我的代码与 main 中的 pthread 并行化，因此我创建了一个头文件，其中包括初始化和乘法函数，然后我的 main 在一个单独的 .c 文件中，但是当我执行我的程序时，我得到以下错误：

> 错误：分段错误（核心转储）

请注意，我正在尝试对大小为 1000 的方阵进行矩阵乘法。

这是我的代码：

```
// mm.h

#ifndef MM_H
#define MM_H

#include <stdlib.h>
#include <time.h>

int SIZE, NTHREADS;
int **A, **B, **C;

void init(int **A, int **B, int **C)
{
    int i, j;

    A = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        A[i] = malloc(SIZE * sizeof(int));

    B = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        B[i] = malloc(SIZE * sizeof(int));

    C = (int**)malloc(SIZE * sizeof(int *));
    for(i = 0; i < SIZE; i++)
        C[i] = malloc(SIZE * sizeof(int));

    srand(time(NULL));

    for(i = 0; i < SIZE; i++) {
        for(j = 0; j < SIZE; j++) {
            A[i][j] = rand()%100;
            B[i][j] = rand()%100;
        }
    }
}

void mm(int **A, int **B, int **C)
{
    int i, j, k;

    for(i = 0; i < SIZE; i++) {
        for(j = 0; j < SIZE; j++) {
            C[i][j] = 0;
            for(k = 0; k < SIZE; k++) {
                C[i][j] += A[i][k] * B[k][j];
            }
        }
    }
}

#endif 
```

任何我的主要功能：

```
// mmserial.c

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include "mm.h"

int main(int argc, char* argv[])
{
    int i;

    if(argc != 2)
    {
        printf("Usage: %s <size_of_square_matrix>\n", argv[0]);
        exit(1);
    }

    SIZE = atoi(argv[1]);
    init(A, B, C);

    clock_t begin, end;
    double time_spent;

    begin = clock();

    mm(A, B, C);

    end = clock();

    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;

    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    for(i = 0; i < SIZE; i++)
        free((void *)A[i]);
    free((void *)A);

    for(i = 0; i < SIZE; i++)
        free((void *)B[i]);
    free((void *)B);

    return 0;
} 
```

如果有人可以帮助我克服这个问题，我会很高兴。还有更多的问题，我是否也应该动态分配我的最终矩阵，它将保存乘法的结果值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-17T18:14:40.303

我一直在寻找最终代码，但没有可用的更新，对于那些对动态分配的矩阵乘法感兴趣的人，这里是最终代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
void allocate_mem(double*** arr, int rows, int cols);
void deallocate_mem(double*** arr, int n);
void printMatrix(double** a, int rows, int cols);
void printMatrixE(double** a, int rows, int cols);
void multMatrixp(double **A, double **B, double **C,int r1,int c1,int r2,int c2);
void init(double*** a, int rows,int cols);

int main(int argc, char* argv[])
{

   int ro1, co1, ro2, co2;
   double **a, **b, **c;    

//ro1=10;
//co1=10000;
//ro2=10000;
//co2=33;

ro1=atoi(argv[1]);
co1=atoi(argv[2]);
ro2=atoi(argv[3]);
co2=atoi(argv[4]);

init(&a,ro1,co1);
init(&b,ro2,co2);
allocate_mem(&c,ro1,co2);

clock_t begin, end;
double time_spent;
begin = clock();
multMatrixp(a, b, c, ro1, co1, ro2, co2);  
end = clock();
time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
printf("Elapsed time: %.2lf seconds.\n", time_spent);

printMatrix(a,ro1,co1); 
printMatrix(b,ro2,co2); 
printMatrixE(c,ro1,co2); 

deallocate_mem(&a,ro1);
deallocate_mem(&b,ro2);
deallocate_mem(&c,ro1);

    return 0;
}

//______________________________________________________________________________
void allocate_mem(double*** arr, int rows, int cols)
{
  int i;
  *arr = (double**)malloc(rows*sizeof(double*));
  for( i=0; i<rows; i++)
    (*arr)[i] = (double*)malloc(cols*sizeof(double));
} 

//______________________________________________________________________________
void deallocate_mem(double*** arr, int rows){
 int i;
    for (i = 0; i < rows; i++)
        free((*arr)[i]);
    free(*arr); 
}

//______________________________________________________________________________

void init(double*** a, int rows,int cols)
{
   int i, j;

*a= (double**) malloc(rows*sizeof(double*));
for(i=0;i<rows;i++)
(*a)[i]=(double*)malloc(cols*sizeof(double));
    for(i=0;i<rows;i++)
        for(j=0;j<cols;j++)
        (*a)[i][j] = rand()%1000;
}

//______________________________________________________________________________
void printMatrix(double** a, int rows, int cols)
{
    int i, j;
   printf("Matrix[%d][%d]\n",rows,cols);    
   for(i=0;i<rows;i++){
      for(j=0;j<cols;j++)
      printf("%7.1lf ",a[i][j]);
      printf("\n");
   }
   printf("\n");   
}

//______________________________________________________________________________
void printMatrixE(double** a, int rows, int cols)
{
    int i, j;
   printf("Matrix[%d][%d]\n",rows,cols);    
   for(i=0;i<rows;i++){
      for(j=0;j<cols;j++)
      printf("%9.2e ",a[i][j]);
      printf("\n");
   } 
   printf("\n");     
}

//______________________________________________________________________________

void multMatrixp(double **A, double **B, double **C,int ro1,int co1,int ro2,int co2)
{
    int i, j, k;
    for(i = 0; i < ro1; i++) {
        for(j = 0; j < co2; j++) {
            C[i][j] = 0;
            for(k = 0; k < co1; k++) {
                C[i][j] += A[i][k] * B[k][j];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:57:58.620

您的代码存在多个问题。以下是您在程序中遇到的问题的解决方案。

**首先**，您需要为`C`数组分配空间。**tacp**已经涵盖了这一点，因此，我将跳过相同的内容。

主要问题来自`init(A,B)`功能。这里有几个问题。一，`A`并且`B`是全局指针，因此，这实际上不需要作为函数参数传递。但是，由于您的代码是为此而设计的，因此您必须合并以下更改

```
//main function invoking init
init(&A, &B); // Pass references to A and B 
```

脚印`init`需要修改为

```
void init(int ***Aptr, int ***Bptr)
{
     int    **A; // Define a local pointer to keep rest of the code intact
     int    **B; // Define a local pointer to keep rest of the code intact
     .....................
     //Rest of your code

     // End of function
     *Aptr = A;
     *Bptr = B;
} 
```

通过这 2 项更改，您的代码应该可以正常工作了。在您之前的实现中，只有 和 的本地副本在函数`A`中`B`进行了更新，`init`并且没有反映在实际指针上。因此，当`init`完成时，`A`并`B`指向潜在`NULL`的指针，这是导致分段错误的原因。

这个问题还有**另一种**解决方案。您可以避免将参数传递给`init`即转换`init`为`init()`并将实现修改为`void init()`. 这可以正常工作（再次假设`C`也已分配）

但是，还有一点。**最后**，您还需要注意删除`C`数组的内存（假设它是在`init`函数中分配的）

```
for(i = 0; i < SIZE; i++)
    free((void *)C[i]);
free((void *)C); 
```

**后记：**

从编程的角度来看，我觉得你不应该混合全局变量并将这些非常全局的变量作为函数参数传递。范围是全局的，这意味着函数绝对可以访问变量，因此不需要将相同的变量传递给函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:36:23.370

`C`也是一个动态矩阵，但你从来没有为它分配内存，直接将值分配给不存在的内存，所以这就是你有核心转储的原因。您还应该为`C`.

```
 void mm(int **A, int **B, int **C)
 {
   int i, j, k;

   for(i = 0; i < SIZE; i++) {
      for(j = 0; j < SIZE; j++) {
        C[i][j] = 0;   ///^^^Need to first allocate space for C
        for(k = 0; k < SIZE; k++) {
            C[i][j] += A[i][k] * B[k][j];
        }
      }
   }
} 
```

# c# - 我不断收到语法错误c#

> ID：15972637
> 
> 赞同：-9
> 
> 时间：2013-04-12T13:27:11.703
> 
> 标签：c#, database, syntax

我正在做一个音乐数据库程序，我添加了按钮来通过程序更新数据库。例如：编辑/新曲目/删除。但它不断拖累语法错误，使更新只是暂时的。

我的更新代码是：

```
private void UpdateDB()
{
        try
        {
            myConnection.Open();
            myAdapter.Update(myDataTable);
            myConnection.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in UpdateDB : \r\n" + ex.Message); 
```

但它提出了这个错误（使用删除按钮）：

![在此处输入图像描述](https://i.stack.imgur.com/52LPv.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:29:45.187

您需要以某种方式转义带有空格的列名。我认为这取决于您使用的 DBMS，但通常，您必须使用双引号或方括号：

```
"Artists Name" = ? 
```

或者

```
[Artists Name] = ? 
```

# c - 从图像创建一个数组

> ID：15972642
> 
> 赞同：1
> 
> 时间：2013-04-12T13:27:36.380
> 
> 标签：c, imagemagick

我有一张图像（从我的手机相机拍摄或可能在我的电脑上用油漆绘制），其中我有白色背景并在矩形图形内绘制线条。我只考虑矩形内的东西，包括它的边界。

现在我想从中创建一个数组，这样对于所有行，数组的值都应该是 1，而对于所有可用空间，数组的值应该是 0。

我正在使用 ubuntu，一旦创建了数组，我就会在我的 C 程序中进一步使用它。

关于我可以使用什么软件的任何线索？我听说过 imagemagick，这会有帮助吗？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:41:42.707

我会遵循这些步骤：

*   **使用图像处理库**加载图像（无论格式）。**我建议[CImg](http://cimg.sourceforge.net/)作为一个易于使用的库。**

***   应用**阈值**图像并创建黑白版本。这里可能会有一些噪音，您可能不得不使用阈值。

    *   **检测大矩形**（这有点棘手）并**裁剪**其内部。** 

 **现在转换为数组应该很容易，只需迭代像素并检查它是黑色还是白色。**

# html - 样式化称呼

> ID：15972643
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:27:46.847
> 
> 标签：html, css, layout, semantics

我有心理障碍！！

1.  “尊敬的先生”是称呼吗？我认为这就是我的css类将被称为

2.  `span`从语义上讲，称呼应该是 a`p`还是完全不同的东西！

我倾向于`span`，但想知道是否有人有多余的 2 美分。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:35:23.227

您应该使用`<span>`内联元素。

另外，试试[`:first-line`](https://developer.mozilla.org/en-US/docs/CSS/%3a%3afirst-line)伪元素怎么样？它将为段落的第一行设置样式（假设您的称呼是第一行）。例如：

```
p:first-line {
    font-size: 120%;
} 
```

[这是一个 jsfiddle 证明](http://jsfiddle.net/YTJWt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:51:48.143

HTML 标记中没有语义，因为某些元素意味着“该元素的含义是一种称呼”。通常所说的“语义”是关于结构的。称呼不是结构概念；它可能出现在段落的开头，或者作为自己的段落，在极少数情况下甚至可能作为标题。

因此，自然的方法是使用具有所需默认呈现的标记。这样，即使样式被禁用，页面外观也尽可能是您想要的。

对于要单独出现在一行上的称呼，`div`如果不需要上方或下方的间距，请使用。用于`p`在上方和下方获取空行。如果称呼出现在段落的开头，并且没有任何换行符，则使用`span`（或其他内联标记，例如`i`or ，如果需要斜体或粗体）。`b`或者不要使用任何标记，如果您不需要将称呼作为元素处理：

```
<p>Dear Sir, thank you...</p> 
```

您可以为称呼分配一个类，但这仅在您在某处使用该类时才有用。`class`属性不描述含义，尽管它可能向阅读标记的人暗示一个含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:32:18.100

我会选择一个 span 元素，因为它默认为没有样式更改的内联元素。
这基本上就是 w3schools 上的`<span>`标签[页所说](http://www.w3schools.com/tags/tag_span.asp)的。
然后，您可以根据自己的喜好对其进行样式设置。

# datetime - SQL 数据库、日期类型和时区 (ADO.NET)

> ID：15972646
> 
> 赞同：1
> 
> 时间：2013-04-12T13:27:56.643
> 
> 标签：datetime, ado.net

我们遇到了一个问题，其中进行选择查询的程序位于一个时区，数据库位于另一个时区，并且日期比较包括额外的一天。我猜这是因为说@date < '2013-01-04' 其中@date 在英国被设置为参数，但对于美国的数据库，由于时区差异，timeoffset 部分移动它进入第二天。

数据库中的 DateTime 基本上是一个整数（或长整数）。那么当数据库的日期列值为 2013-01-04T00:00:00 时，这如何与 ADO.NET 一起工作 - 是存储为 UTC 日期时间、本地日期时间（无论本地偏移量恰好在那个点） ，还是特定的偏移量？

当我使用 DateTime (Kind == Local) 设置该参数时，它是如何翻译的？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:44:32.630

取决于数据库。但是，如果说所有数据库都将日期时间存储为一个整数（就像 dot Net 或 javascript 一样），那肯定是不正确的。您没有在问题中指定您使用的是哪个数据库产品，但 SQL Server 例如使用***两个***整数：

SQL Server 对 datetime 和 smalldatetime 值的内部表示是一个由两部分组成的值，其中第一部分是一个整数，表示自 1900 年 1 月 1 日以来的天数，第二部分是一个小数部分，表示一天的小数部分（对于time) --- 所以整数值 0（零）总是直接转换为 1900 年 1 月 1 日午夜的早晨。

第二部分，时间部分在内部也是一个整数，表示自午夜以来的时钟滴答数。看到[这个](http://www.sql-server-performance.com/2004/datetime-datatype/)。时钟滴答是 1/300 秒，大约 3.333 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T18:32:16.597

如果您存储一个 .NET DateTime ，它将在数据库中始终具有与 .ToString() 相同的值

它不会指定时区。

我建议您`.ToUniversalTime()`在将它们存储到数据库之前使用所有日期时间，并在读取它们时假设所有日期时间都是 UTC。

# c# - 从单独的进程枚举/与 WPF 窗口和控件交互

> ID：15972647
> 
> 赞同：0
> 
> 时间：2013-04-12T13:27:58.717
> 
> 标签：c#, wpf, accessibility

很久以前，我开发了一个测试自动化系统，遗憾的是当时存在的框架都无法实现。

关键功能之一是它能够利用标准 Win32 API（EnumWindows、FindWindowEx 等）查找 Win32 对话框并与之交互。

由于 Windows 8 的变化，一个团队最近引入了一个 WPF 应用程序，我开始了一项我认为很简单的任务，即查找窗口、枚举控件（查找 OK 按钮）并单击它。需要注意的是，我的系统不会调用被测应用程序。这是一个系统级事件，本质上我需要通过“确定”按钮“找到它”并“关闭它”，因为它采用的代码路径。

我很快意识到这并不像我想象的那么简单，但我知道它是可能的，因为使用 Snoop 我可以找到窗口并向下钻取控制树直到找到它。关于这个主题有很多问题，但它们都在同一个应用程序/应用程序域中。

就我而言，这是从一个完全独立的应用程序（.net 4）中发生的。我知道windows的标题，但其他的很少。

有谁知道如何实现 Snoop 本质上正在做的事情（找到一个窗口，获取其控件列表，通过某些标准遍历它以查找特定控件），然后模拟点击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:03:36.743

I've never used it, but you might be looking for [this page on MSDN](http://msdn.microsoft.com/en-us/library/ms753388%28v=vs.110%29.aspx).

From that page:

> Microsoft UI Automation is the new accessibility framework for Microsoft Windows. It addresses the needs of assistive technology products and automated test frameworks by providing programmatic access to information about the user interface (UI). In addition, UI Automation enables control and application developers to make their products accessible.

# wcf - WCF 中使用 SSL 的消息级别安全性

> ID：15972648
> 
> 赞同：0
> 
> 时间：2013-04-12T13:28:00.237
> 
> 标签：wcf, security, certificate, message

我正在尝试使用 WCF 通过 Internet 设计 Web 服务。要求是我们需要提供 TLS（传输层安全）和 MLS（消息层安全）。为此，我们使用安全模式为“ **TransportWithMessageCredential ”的“** **ws2007HttpBinding** ”。在这里，我发现请求是通过 SSL 传输的，但是当使用 Fiddler（用于 https）时，我发现肥皂正文是明文格式。

 **对于传输级安全性，我使用 ClientCredentialType 作为“None”，对于消息级安全性，我使用“Certificate”作为 ClientCredentialType。

我正在使用 .net 框架 3.5。

供您参考，我正在为 SSL 和服务器使用不同的证书。

我的服务器 Web.config 如下。

```
<system.serviceModel>
    <services>
        <service behaviorConfiguration="API_WCF.Service1Behavior" name="API_WCF.API">
            <endpoint address="https://localhost/API_WCF/API.svc" name="API" binding="ws2007HttpBinding" bindingConfiguration="customWsHttpBinding" contract="API_WCF.IARDAPI">
                <identity>
                    <dns />
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
        </service>
    </services>
    <bindings>
        <ws2007HttpBinding>
            <binding name="customWsHttpBinding">
      <!-- For http  -->
      <!--
      <security mode="Message">
        <message clientCredentialType="Certificate" negotiateServiceCredential="false" establishSecurityContext="false"/>
      </security>
      -->
      <!-- For https  -->
        <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="None"/>
                    <message clientCredentialType="Certificate" negotiateServiceCredential="false" establishSecurityContext="false"/>
                </security>
            </binding>
        </ws2007HttpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior name="API_WCF.Service1Behavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpsGetEnabled="true" httpsGetUrl="https://localhost/API_WCF/API.svc/API"/>
                <serviceCredentials>
                    <serviceCertificate findValue="CN=WSE2QuickStartServer" storeLocation="LocalMachine" x509FindType="FindBySubjectDistinguishedName" storeName="My"/>
                    <clientCertificate>
                        <authentication certificateValidationMode="ChainTrust" revocationMode="NoCheck"/>
                    </clientCertificate>
                </serviceCredentials>

                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true"/>

            </behavior>
        </serviceBehaviors>
    </behaviors>
    <diagnostics wmiProviderEnabled="true" performanceCounters="ServiceOnly">
        <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" maxMessagesToLog="3000"/>
    </diagnostics>
</system.serviceModel> 
```

请指导如何通过 Internet 上的 WCF 中的传输层安全性实现消息级别的安全性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:59:07.243

如果您需要在 HTTPS 模式下运行 fiddler 来查看您的 WCF 消息，那么您已经在使用 TLS！

如果在 HTTP 模式下使用 fiddler 时对消息进行了加密，则这表明您的消息在通过网络发送之前已受到保护。请参阅：[如何：使用传输安全和消息凭据](http://msdn.microsoft.com/en-AU/library/ms789011.aspx)

使用 TransportWithMessageCredential 意味着在 HTTP 场景中，您的服务将通过 HTTPS 受到保护，并且您可以选择拥有额外的消息内凭据 (MLS)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:24:35.137

如果您想要 SSL 和消息级加密（而不仅仅是消息级身份验证），那么您需要使用自定义绑定。例如（实际配置取决于你想要什么）：

```
<textMessageEncoding messageVersion="Soap11" />
<security authenticationMode="MutualCertificate" messageSecurityVersion="WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10"></security>
<httpsTransport /> 
```**

# c# - 正则表达式的匹配，主题字符串中的破折号

> ID：15972649
> 
> 赞同：0
> 
> 时间：2013-04-12T13:28:00.707
> 
> 标签：c#, .net, regex

```
var subject = "Parametre - Bloc Notes"
var match = Regex.Match(subject, "(?i)(?:blah|para|foo).*?");
// This will work 
//"Para" doesn't match "Param" and it is before the dash

var subject = "Parametre - Bloc Notes"
var match = Regex.Match(subject, "(?i)(?:blah|blo|foo).*?");
// This will not work
// "Blo" match "Bloc" and it is after the dash 
```

我认为“-”是我误解的主要原因。

编辑：

我真的很抱歉，所以我希望正则表达式在破折号之前匹配 Param，我该怎么做？

编辑2：

我承认我的问题真的很模棱两可，所以我的目标是在任何字符串中找到参数词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:33:08.997

要匹配之前出现的任何单词，`-`您可以简单地执行以下操作：

```
/(\w+)\s*\-/ 
```

在上面的示例中，第一组将是“参数”。例如，

```
"Foo - bar baz" // first group will be "Foo"

"Hello - World" // first group will be "Hello" 
```

* * *

更新：我似乎误解了你的问题。如果目的只是想知道字符串中是否存在“参数”一词，您可以使用`String.Contains`：

```
"Parametre - Bloc Notes".Contains("Parametre"); // true 
```

或者，如果您关心单词边界（即，您*不想*匹配“参数”），您仍然可以使用正则表达式：

```
/\bParametre\b/ 
```

# c# - 在安装 C# windows 应用程序期间复制/创建 SQL Server 文件夹中的 .mdf 文件

> ID：15972657
> 
> 赞同：0
> 
> 时间：2013-04-12T13:28:22.297
> 
> 标签：c#, sql-server-2005-express

是否可以在安装 Windows C# 应用程序期间将我的数据库文件（即 .mdf 文件）复制到目标文件夹，即我的 SQL Server 文件夹？

另外，如何在设置中自动将这些文件附加到 sql server 的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:31:42.723

您可以为您的应用程序使用附加的数据库。[这](http://www.c-sharpcorner.com/UploadFile/vishnuprasad2005/SetupProjects12022005022406AM/SetupProjects.aspx)将帮助您为此创建设置。

1.  将名为“DB”的文件夹添加到项目中，并在将数据库文件从 SQL Server 分离后将其复制到其中。

2.  像这样更改您的连接字符串：

    ```
    <connectionStrings>
        <add name="WindowsFormsApplication1.Properties.Settings.BabakConnectionString"
            connectionString="Data Source=.;AttachDbFilename=|DataDirectory|\DB\Babak.mdf;
            Initial Catalog=test;Integrated Security=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings> 
    ```

3.  之后，当您运行应用程序时，数据库文件将自动附加到 SQL Server，数据库名称为“test”。您可以打开 SQL Server Management Studio 来找到它。

# c# - WPF 工具提示触发器不工作

> ID：15972668
> 
> 赞同：3
> 
> 时间：2013-04-12T13:29:17.823
> 
> 标签：idataerrorinfo, 工具提示, 工具提示, c#, wpf, mvvm, tooltip

我在 ViewModel 中实现[idataerrorinfo](/questions/tagged/idataerrorinfo "显示标记为“idataerrorinfo”的问题")以对我的一些绑定属性执行验证。然后我尝试使用以下设置[工具提示](/questions/tagged/tooltip "显示标记为“工具提示”的问题")并自动显示它：

```
<Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="True">
                <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self},Path=(Validation.Errors)[0].ErrorContent}"/>
                <Setter Property="ToolTip.IsOpen" Value="True"></Setter>
                <Setter Property="ToolTip.StaysOpen" Value="True"></Setter>
                <Setter Property="ToolTip.Placement" Value="Bottom"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

问题是，在设置[工具提示](/questions/tagged/tooltip "显示标记为“工具提示”的问题")时，除非我将光标放在输入上，否则它不会出现。我想在验证失败时自动显示工具提示。

我可以想出很多方法来验证数据，但我正在寻找一种简化、易于重用并且不会弄乱我的其余代码（和 UI）的解决方案。如果有更好的方法来做到这一点我想听听。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:59:37.360

我同意薇薇。我使用样式为样式中的文本框定义了一个validation.errortemplate。它在控件下添加了一个带有错误消息的红色框。你可以试试这个并调整它。我不认为强制工具提示是正确的想法。如果您确实必须具有该功能，我会使用来自 validation.errortemplate 的弹出窗口。

```
<Style x:Key="FTC_ValidateTextBox" BasedOn="{x:Null}" TargetType="{x:Type TextBox}">
    <Setter Property="FontFamily" Value="Open Sans Condensed"/>
    <Setter Property="FontSize" Value="19" />
    <Setter Property="Margin" Value="3,3,15,6"/>
    <Setter Property="Padding" Value="10,3"/>
    <Setter Property="TextWrapping" Value="Wrap" />
    <Setter Property="HorizontalAlignment" Value="Stretch" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="Background" Value="{StaticResource DetailTextBox}" />
    <Setter Property="BorderBrush" Value="{StaticResource MediumGray}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Foreground" Value="Black" />
    <Setter Property="AllowDrop" Value="true"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
    <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <Border BorderBrush="{StaticResource MediumRed}" >
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <AdornedElementPlaceholder x:Name="parentTextBox" />
                        <TextBlock Grid.Row="1" Style="{StaticResource DetailError}"
                            Text="{Binding AdornedElement.(Validation.Errors).CurrentItem.ErrorContent, ElementName=parentTextBox}"/>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" Value="{Binding (Validation.Errors).CurrentItem.ErrorContent, RelativeSource={x:Static RelativeSource.Self}}"/>
            <Setter Property="BorderBrush" Value="{StaticResource MediumRed}"/>
            <Setter Property="Foreground" Value="{StaticResource MediumRed}"/>
            <Setter Property="Margin" Value="3,3,15,31"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

# javascript - jquery：使用字符串作为函数（错误：字符串不是函数）

> ID：15972673
> 
> 赞同：0
> 
> 时间：2013-04-12T13:29:32.150
> 
> 标签：javascript, jquery, arrays, string, each

下面的代码为单行数组中的每个给定 ID 生成点击函数，使用未注释的代码，我得到错误“字符串不是函数”。如果我取消注释注释的代码，并注释单行数组，它确实工作得很好。但是，出于显而易见的原因，我更喜欢使用单线阵列的方法。

谁能给我一些好的建议？我在正确的道路上吗？

提前致谢。

```
// callme
function callme() {
    alert("call me");
    return true;
}

// create javascript object
//var adapter = {};
// set values - key contains: ID associated with link, button or tab - value contains:   the function to call
//adapter['callme'] = callme;
//adapter['callme1'] = callme1;
//adapter['callme2'] = callme2;
//adapter['callme3'] = callme3;

var adapter = ["callme", "callme1", "callme2", "callme3"];

// foreach the object - key as ID - value as associated function
$.each(adapter, function(index, value) {
    // click on listed ID
  $("#"+ value).click(function() {
    // call associated function
        value();    
    });
    // end foreach
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:32:01.273

这有点取决于范围，但一般的想法是您可以使用方括号表示法来获取对函数的引用并执行它。例如，以下内容：

```
window[value](); 
```

将等效于`callme()`第一次迭代，假设`callme`函数是全局范围的（`window`对象的属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:34:19.313

您可以尝试使用`eval`将字符串评估为函数，尽管您必须小心安全。评估来自用户输入或表单提交的字符串可能会使您的站点容易受到[跨站点脚本](https://www.owasp.org/index.php/Cross_site_scripting)和[会话劫持](https://www.owasp.org/index.php/Session_hijacking_attack)的攻击。

例子：

```
eval(value + "();"); //call "value" as a function 
```

# python - 使用Calendar v3 api python插入事件时出现HttpError 401“需要登录”

> ID：15972675
> 
> 赞同：2
> 
> 时间：2013-04-12T13:29:36.810
> 
> 标签：python, google-app-engine, google-calendar-api

我正在使用 python 和 appengine 创建一个使用 Google Calendar API (V3) 的应用程序。

我可以从多个日历等中列出事件。但是，在尝试将事件插入日历时遇到了问题。

如果我在我的处理程序中使用 get()，一切正常（即事件被正确插入。但是，如果我使用表单和 post() 插入事件（在同一个日历中）它会失败并显示以下消息

* * *

```
<HttpError 401 when requesting https://www.googleapis.com/calendar/v3/calendars/.../events?alt=json returned "Login Required">

Traceback (most recent call last):

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
   return route.handler_adapter(request, response)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
return self.handle_exception(e, self.app.debug)

File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
return method(*args, **kwargs)

File "/base/data/home/apps/.../oauth2client/appengine.py", line 469, in check_oauth
return method(request_handler, *args, **kwargs)

File "/base/data/home/apps/...", line 99, in post
request = service.events().insert(calendarId='MyCalendarId', body=event).execute()

File "/base/data/home/apps/.../apiclient/http.py", line 678, in execute
    raise HttpError(resp, content, uri=self.uri)

HttpError: <HttpError 401 when requesting https://www.googleapis.com/calendar/v3/calendars/.../events?alt=json returned "Login Required"> 
```

* * *

函数 get() 和 post() 的简化版本如下：

```
class AddEvent(webapp2.RequestHandler):
@decorator.oauth_required
def post(self):
    if decorator.has_credentials():          
        #event_name = self.request.get('event-name')
        event = {  
         'summary': self.request.get('summary'),  
         'location': self.request.get('place'),  
         'status' : self.request.get('status'),
         'start': {    
                   'dateTime': '2013-05-11T10:00:00.000-07:00'  ,
                   'timeZone': 'America/New_York'
                   },  
         'end': {    
                 'dateTime': '2013-05-11T10:25:00.000-07:00',
                 'timeZone': 'America/New_York'  
                 },  
        }

        request = service.events().insert(calendarId='MyCalendarId', body=event).execute()

    else:
        self.response.out.write(json.dumps({'error': 'No credentials'}))

    page = 'main'
    template_values = {
      'url': url,
      'url_linktext': url_linktext,
      'menu' : page    
    }

    template = jinja_environment.get_template('templates/index.html')
    self.response.out.write(template.render(template_values))

@decorator.oauth_required
def get(self):
    if decorator.has_credentials():          
        event_name = self.request.get('event-name')
        event = {  
         'summary': 'Appointment from get',  
         'location': 'Somewhere close to it',  
         'start': {    
                   'dateTime': '2013-04-15T10:00:00.000-07:00'  ,
                   'timeZone': 'America/New_York'
                   },  
         'end': {    
                 'dateTime': '2013-04-15T10:25:00.000-07:00',
                 'timeZone': 'America/New_York'  
                 },  
        }

        http = decorator.http()

        request = service.events().insert(calendarId='MyCalendarId', body=event)
        inserted = request.execute(http)

    else:
        self.response.out.write(json.dumps({'error': 'No credentials'}))

    page = 'main'
    template_values = {
      'url': url,
      'url_linktext': url_linktext,
      'menu' : page    
    }

    template = jinja_environment.get_template('templates/index.html')
    self.response.out.write(template.render(template_values)) 
```

OAuth2 的使用如下：

```
decorator = OAuth2Decorator(
  client_id='client ID',
  client_secret='client secret',
  scope='https://www.googleapis.com/auth/calendar') 
```

我无法弄清楚这里出了什么问题，以及为什么我在一种情况下得到“需要登录”异常，而在另一种情况下，两种方法几乎都做同样的事情。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:11:39.897

了解如何解决问题。

我需要将 post() 方法更改为如下所示：

```
@decorator.oauth_aware    
def post(self):

if decorator.has_credentials():          
    #event_name = self.request.get('event-name')
    event = {  
     'summary': self.request.get('summary'),  
     'location': self.request.get('place'),  
     'status' : self.request.get('status'),
     'start': {    
               'dateTime': '2013-05-11T10:00:00.000-07:00'  ,
               'timeZone': 'America/New_York'
               },  
     'end': {    
             'dateTime': '2013-05-11T10:25:00.000-07:00',
             'timeZone': 'America/New_York'  
             },  
    }
    http = decorator.http()
    request = service.events().insert(calendarId='MyCalendarId', body=event).execute(http=http)
    :
    : 
```

该解决方案实际上是基于[this answer](https://stackoverflow.com/questions/13812813/oauth2-authentication-in-gae-accessing-calendar-api-v3-domain-hosted)。

# javascript - IE：jQuery click 不会在 div 上触发，而只会在该 div 内的 p 上触发

> ID：15972681
> 
> 赞同：0
> 
> 时间：2013-04-12T13:29:52.060
> 
> 标签：javascript, jquery, html

这是html

```
<!doctype html>
<html lang="en">
…

    <div class="wrapper greenhouse">
    <img src="htmlData/img/background.jpg" class="background">
    <h1 class="super-title">Treibhausgasneutralität – unsere Vier-Pfad-Strategie</h1>
    <h2 class="sub-title">Zusammensetzung der Treibhausgasreduktionszertifikate (ERC) 2012</h2>

    <div class="box interact one">
        <span>1.</span>
        <p>Betriebs-<br>optimierungen</p>
    </div>
    … 
```

这是Javascript

```
$(document).ready(function(){

  conditionizr();

  $('.box.interact').click(function(e){
    clicked($(e.target).attr('class').split(' ')[2]);
  });

  $('.box.interact p').click(function(e){
    clicked(target = $(e.target).parent().attr('class').split(' ')[2]);
  });

  function clicked(target){
    $('.overlay.'+target).css('display', 'block');
    $('.overlays').css('display', 'block').stop().fadeTo('fast', 1);
  }

  $('.close').click(function(){
    $('.overlays').stop().fadeTo('fast', 0, function(){
      $('.overlays').css('display', 'none');
      $('.overlay').css('display', 'none');
    });
  });

}); 
```

点击事件不会在 ie 上触发，但在 chrome 等中可以正常工作。

# jsf - a4j:commandLink 不调用动作但调用 PhaseListener

> ID：15972686
> 
> 赞同：0
> 
> 时间：2013-04-12T13:30:12.093
> 
> 标签：jsf, jsf-1.2, ajax4jsf

我`a4j:commandLink`在 Jquery 对话框中。

```
 $h(document).ready(function() {
            $h("#myForm").attr("style", "display:block");
            $h("#myForm").dialog({
                duration: 800,
                height: 100,
                minWidth: 250,
                width: 250,
                position: [490, 160],
                zIndex: 99999999,
                modal: true,
                show: {
                    effect: 'puff',
                    duration: 400
                },
                hide: {
                    effect: 'puff',
                    duration: 400
                }

            });
        });

<div id="myForm" style="visibility:hidden">
<a4j:region id="hdRegion" renderRegionOnly="true">
    <a4j:commandLink immediate="true" value="Connect me &#187;" styleClass="connectMe" action="#{myBean.myMethod}" ></a4j:commandLink>
    </a4j:region>
 </div>

publid String myMethod()
{
  log.debug("Entered into myMethod");
  return null;
} 
```

`myBean`是在`request`范围内。

当我单击时`a4j:commandLInk`，`myMethod`没有被调用。相反，我的 PhaseListener 被调用了。

如何确保 commandLink 仅调用`myMethod`？

# c# - SmptClient SendAsync 阻塞应用程序，不异步发送

> ID：15972688
> 
> 赞同：1
> 
> 时间：2013-04-12T13:30:18.450
> 
> 标签：c#, asp.net, smtpclient, sendasync

我使用开发服务器和 SmtpClient.SendAsync，邮件被发送，但它仍然阻止页面上的所有其他操作，直到发送完成。我搜索了很多，似乎无法看到问题所在

```
 protected void SendMailButton_Click(object sender, EventArgs e) {

        SendMailTemplate("verify@site.com", "your-email@gmail.com", "Your company Listing is Approved !", "CompanyApproved.txt", new string[] { "Send Mail company" });           
    }

    public void SendMailTemplate(string From, string To, string Subject, string EmailTemplate, string[] Params) {

        var message = new MailMessage(From, To);
        message.IsBodyHtml = true;
        message.Subject = Subject;

        var sr = new StreamReader(HttpRuntime.AppDomainAppPath + "/Resources/EmailTemplates/" + EmailTemplate);         //Cannot use Server.MapPath here
        message.Body = sr.ReadToEnd(); sr.Close();
        for (int i = 0; i < Params.Length; i++) {
            message.Body = message.Body.Replace("<%Param" + (i + 1) + "%>", Params[i]);
        }

        var smtpClient = new SmtpClient("mail.site.com", 25);

        smtpClient.SendCompleted += new SendCompletedEventHandler(SendCompletedCallback);
        smtpClient.SendCompleted += (s, e) => { smtpClient.Dispose(); message.Dispose(); };
        smtpClient.SendAsync(message, null);

    } 
```

# javascript - 如何使用jQuery排除无序列表中的最后一个元素

> ID：15972692
> 
> 赞同：2
> 
> 时间：2013-04-12T13:30:27.530
> 
> 标签：javascript, jquery, events, dom

我有一个无序列表 ( `ul`) 和一些列表元素 ( `li`)。
我想绑定`li`除最后一个之外的所有 's。

例子：

```
$('ul li').on('click', someFunction);

$('ul li:last-child').off('click'); 
```

使用 jQuery，有没有办法在一行代码中做到这一点？
任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T13:31:51.320

是的，使用选择器`:not`：

```
$('#elementName li:not(:last-child)').on('click', someFunction); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:31:58.913

这个选择器应该可以工作：

```
$('#elementName li:not(:last-child)').on('click', someFunction); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T13:32:07.773

您可以使用[`:not`](http://api.jquery.com/not-selector/)：

```
$('#elementName li:not(:last-child)').on('click', someFunction); 
```

# javascript - Primefaces p:editor 可以安全使用吗？

> ID：15972696
> 
> 赞同：3
> 
> 时间：2013-04-12T13:30:43.393
> 
> 标签：javascript, security, primefaces, xss

我的意思是，primefaces p:editor 使用 html 来构造文本，所以我必须将 h:outputText 的转义属性设置为 false，以显示没有 html 标记的输出。

我试图玩弄这个组件，并输入了以下 javascript：

```
<script>
    $(document).ready(function(){
        $("div").text("haha");
    })
</script> 
```

输出是相同的（我得到一个简单的文本，没有执行 js），直到我打开选项“显示源”并输入相同的内容。现在，当我试图显示文本时，te javascript 被执行并破坏了页面。

所以我的问题是：我的方法、实现、使用这个组件是否存在漏洞？还是 p:editor 如此脆弱？我应该改用简单的文本区域，还是有办法从编辑器中删除此选项？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-01-05T19:23:48.563

您可以通过属性“控件”禁用对编辑器的任何控制

[http://courses.coreservlets.com/Course-Materials/pdf/jsf/primefaces/users-guide/p-editor.pdf](http://courses.coreservlets.com/Course-Materials/pdf/jsf/primefaces/users-guide/p-editor.pdf)

粗体 • 斜体 • 下划线 • 删除线 • 下标 • 上标 • 字体 • 大小 • 样式 • 颜色 • 突出显示 • 项目符号 • 编号 • 左对齐 • 居中 • 右对齐 • 对齐 • 撤消 • 重做 • 规则 • 图像 • 链接 • 取消链接 • 剪切 • 复制 • paste • pastetext • print • source • outdent • indent • removeFormat

您可以使用上述任何关键字来指定您想要的控件

例如：

# scripting - 一种“选择并转换”的 XML 转换语言？

> ID：15972698
> 
> 赞同：0
> 
> 时间：2013-04-12T13:31:00.333
> 
> 标签：scripting, xslt

我想将 XML 文档转换编写为一次性命令和独立脚本，就像我使用 Unix 工具（例如`grep`、`sed`、`awk`等）来操作文本文件一样。脚本必须可在 Linux 和 Windows 之间移植（使用 Cygwin 即可）。

如果您*已经*定期执行此操作，您使用什么解决方案？你能推荐它吗？

（一些背景：

现在，我想从一组 XML 文档中删除某种元素。我经常需要进行这种系统的 XML 文档重写；有时，在运行中（在命令行上，我经常使用）；更多时候，我想构建更复杂的转换，将它们保存到文件中，然后从文件中执行它们。

所以我想要一种可以在命令行上使用的 XML 转换脚本语言。类似于 XML 文档的东西`sed`：`awk`它的命令将指定一个选择器，用于选择输入文档中的节点，以及一个操作，该操作指定在每个选定节点处对文档进行什么操作。

[通常，我会退缩并使用XML::LibXML](http://search.cpan.org/perldoc?XML::LibXML)编写 Perl 脚本。这行得通，但它确实不符合要求：

*   语法上：代码过于冗长，无法在命令行上使用
*   语义上：没有给出“选择和转换”模式，我必须将这种行为明确地编程到我的代码中，所以读者很难理解这是真正发生的事情
*   句法/语义：阅读或编写此代码需要语言流利

使用任何其他通用编程语言也是如此。

嗯，这就是 XSLT 的发明目的，对吧？

也许; [我可以使用 XSLT](https://stackoverflow.com/questions/4391038/remove-elements-from-xml)，但它确实有同样的缺点。

一个更好的匹配是[xmlstarlet](https://stackoverflow.com/questions/3135241/selecting-elements-from-xml-file-with-xmlstarlet-cant-quite-get-the-syntax-rig)：它真的很像`sed`，因为它支持我想要的类型的简短、神秘的命令。然而，就像使用 sed 一样，由这些命令组成的大型程序很难理解。

另一个想法是使用[jQuery DOM 操作](http://api.jquery.com/category/manipulation/)：

*   比 XPath 更强大的选择器
*   优雅而紧凑的方式将选择和操作结合起来
*   具有任意 JavaScript 函数的内置可扩展性（但对于简单的情况*不需要*太多 JavaScript 知识）

太好了，但我需要一个实用程序来允许我将这些表达式用作独立脚本：

```
jqmanip --html '$(a:parent).detach()' foo.html > bar.html
jqmanip convert-tables-to-divs.jqm foo.html > bar.html 
```

这就是我正在寻找的那种实用程序。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:29:25.440

现在我正在使用`/bin/sh`and的组合`xmlstarlet`，例如

```
#!/bin/sh
#
# csproj2csproj - clean up VS 2010/2012 C# project files in various ways
#
# $Id$

dft='//*[local-name()="PropertyGroup" and not(@Condition)]'
dbg='//*[local-name()="PropertyGroup" and contains(*/@Condition,"Debug")]'
rel='//*[local-name()="PropertyGroup" and contains(*/@Condition,"Release")]'

RemoveTree()
{
  xmlstarlet ed -d "$1"
}

AppendAsLastChild()
{
  xmlstarlet ed -i "$1"'/*[last()]' -t elem -n "$2" -v "$3"
}

sed 's/encoding="utf-8"/encoding="Windows-1252"/' "$@" |
RemoveTree '//*[@Include="My Project\"]' |
RemoveTree '//*[not(@*|*) and not(normalize-space(.))]' |
RemoveTree '//*[local-name()="LangVersion"]' |
RemoveTree '//*[local-name()="CheckForOverFlowUnderFlow"]' |
RemoveTree '//*[local-name()="DocumentationFile"]' |
AppendAsLastChild "$dft" LangVersion ISO-2 |
AppendAsLastChild "$dbg" CheckForOverflowUnderflow true |
AppendAsLastChild "$rel" CheckForOverflowUnderflow false |
AppendAsLastChild "$rel" DocumentationFile 'bin\Release\vsdocs.xml' 
```

# java - 我无法确定导致此 Java 运行时错误的原因，

> ID：15972700
> 
> 赞同：0
> 
> 时间：2013-04-12T13:31:02.523
> 
> 标签：java, runtime-error

我正在尝试构建一个在对话框中具有三个单选按钮的应用程序。我遇到了一个令人头疼的错误。以下是我注意到的案例之间的一致性：

*   所有文件都在我的`java/bin/*`目录中
*   所有错误文件都使用 swing 组件**并且**正在扩展 JPanel**并且**正在扩展 ActionListener
*   我可以扩展 JPanel 或扩展 ActionListener 而不会出错
*   所有错误文件编译时没有错误或警告
*   所有错误文件在运行时出错
*   所有错误消息都包含一个类名错误（或丢失？）的行，即使我可以在 Win Explorer 中看到它

无奈之下，我求助于[Java 的代码示例库](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#radiobutton)来抓取一些代码进行测试。可启动的小程序运行良好，推断我有正确的 Java 版本来运行该程序。我将`RadioButtonDemo.java`源代码以及完整项目下载到了我的`java/bin/*`目录中。它全部解压缩到正确的路径，除了从 zip 文件中提取之外，由于它离开 Java 的服务器而未触及，我得到了同样的错误。

![截屏](https://i.stack.imgur.com/Eh18R.jpg)

我自己下载的代码的链接在[这里](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/RadioButtonDemoProject/src/components/RadioButtonDemo.java)。

我在进口

```
package components;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*; 
```

而且还不是很熟悉`package`，我想知道我是否需要摆脱它；这是我为这个项目创建的第一个代码......所以我没有任何其他包元素可供该类查找......但如果我正在考虑的话，我不知道。

我在跑：

*   IE 8.0.7601.17514 使用 Java 1.6.0_21
*   Win7 6.1.7601 命令行 Java 为 1.7.0_02。

任何人以前见过这个和/或知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:22:02.603

这些`.class`文件必须在`java/bin`目录中的包结构中。

```
java/bin/components/RadioButtonDemo.class. 
```

甚至

```
java/bin/classes/components/RadioButtonDemo.class 
```

取决于你的类路径。

* * *

对您当前构建的简单测试是将该`RadioButtonDemo.class`文件移动到一个名为的文件夹中`components`，然后重试，它会起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:34:44.930

1.  更新您的 Java 版本（如果不仅仅是出于安全原因）
2.  确保您的目录结构与包声明匹配。RadioButtonDemo 似乎不在正确的目录中。

# c# - 如何使用 await 关键字获取任务的数据？

> ID：15972701
> 
> 赞同：1
> 
> 时间：2013-04-12T13:31:03.017
> 
> 标签：c#, task-parallel-library, .net-4.5, async-await, c#-5.0

我只需要在主代码中获取 FlowDocument ...

我喜欢这样，但没有成功

```
this.flowDoc = engine.CreateFlowDocument(contentItems); // Can't compile
 public async Task<FlowDocument> CreateFlowDocument(ContentItems contentItems)
 {   return await Task.Run(() =>
     {
         try
         {
             var fd = new FlowDocument();
             foreach (var item in contentItems.Items)
             {
                 if (item.ContentType == ContentTypes.Header)
                 {
                     var paraHeader = new Paragraph();  
                     paraHeader.FontSize = 14;
                     paraHeader.Foreground = Brushes.Black;
                     paraHeader.FontWeight = FontWeights.Bold;
                     paraHeader.Inlines.Add(new Run(item.Data));
                     fd.Blocks.Add(paraHeader);
                 }
                 if (item.ContentType == ContentTypes.Paragraph)
                 {
                      var paragraph = new Paragraph();
                      paragraph.FontSize = 12;
                      paragraph.Foreground = Brushes.Black;
                      paragraph.FontWeight = FontWeights.Normal;
                      paragraph.Inlines.Add(new Run(item.Data));
                      fd.Blocks.Add(paragraph);
                 }
             }                     
             return fd;
          }
          catch (Exception)     {                        }
          return new FlowDocument();
      }
                                 );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:33:01.483

您需要等待您返回的任务`CreateFlowDocument`：

```
 this.flowDoc = await engine.CreateFlowDocument(contentItems); 
```

当然，这意味着*代码*也必须在异步函数中。

如果您不希望它在异步方法中，您*可以*使用该`Result`属性，但*请务必*小心操作 - 这是一个阻塞调用，您很容易陷入僵局。

或者您可以使用[`Task.ContinueWith`](http://msdn.microsoft.com/en-GB/library/system.threading.tasks.task.continuewith.aspx).

# r - 我可以使用哪个包来代替包 uroot？

> ID：15972702
> 
> 赞同：0
> 
> 时间：2013-04-12T13:31:04.797
> 
> 标签：r

我想在包 uroot 中使用函数“bbaplot”和“bbplot”，但我发现没有名为 uroot 的包。我可以用哪个包来代替这个？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T02:53:07.850

@Tyler Rinkers 指出，这里有一个[更普遍](https://stackoverflow.com/questions/15973594/how-to-build-an-archived-package-on-r-3-0-0/15973981#15973981)的问题是很好的。

@hadleys 答案（来自上面的链接）很简洁。

以下（较慢）解决方案也对我有用，并且无需安装`devtools`.

[从这里](http://cran.r-project.org/src/contrib/Archive/uroot/)下载感兴趣的版本，例如`uroot_1.4-1.tar.gz`（最新的）。

`R`用于`setwd()`确保您与此文件位于同一目录中。（我喜欢复制和修改输出`getwd()`以快速完成此操作）。

按如下方式安装（从[此处借用 SO](https://stackoverflow.com/questions/1474081/how-do-i-install-an-r-package-from-source)）：

```
install.packages("uroot_1.4-1.tar.gz", repos = NULL, type="source") 
```

然后确保一切正常：

```
require(uroot)
?bbaplot 
```

我的`sessionInfo()`输出包括：

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit) 
```

# android - 使用 Kii Cloud SDK 修改存储桶写入访问级别时出现异常

> ID：15972703
> 
> 赞同：4
> 
> 时间：2013-04-12T13:31:09.807
> 
> 标签：android, mobile, backend, paas, kiicloud

我正在 Android 应用程序中测试[Kii Cloud](http://developer.kii.com)移动后端即服务 (MBaaS)。我正在尝试*在进行*任何用户身份验证之前在[应用程序级存储桶中创建一个对象。](http://documentation.kii.com/en/buckets--2) 为此，我想修改应用存储桶以允许匿名用户对其进行写入：

 *```
 Kii.initialize("my_app_id", "my_app_key", Kii.Site.US);

        KiiBucket bucket = Kii.bucket("app_status");

        KiiACL ubACL = bucket.acl();
        ubACL.putACLEntry(new KiiACLEntry(KiiAnonymousUser.create(), KiiACL.BucketAction.CREATE_OBJECTS_IN_BUCKET, true));
        ubACL.save(new KiiACLCallBack() {
            @Override
            public void onSaveCompleted(int token, KiiACL acl, Exception exception) {
                if (exception != null)
                    Toast.makeText(getInstance().getApplicationContext(), exception.toString(), Toast.LENGTH_LONG);
            }
        }); 
```

但是我在尝试保存 ACL 时总是遇到异常（onSaveCompleted() 返回异常）：

```
com.kii.cloud.storage.exception.ACLOperationException: Error: null
HTTP Response Status: 403
HTTP Response Body: {
  "errorCode" : "WRONG_TOKEN",
  "message" : "The provided token is not valid",
  "appID" : "bc4100c0",
  "accessToken" : "null",
  "suppressed" : [ ]
} 
```

我在开头（示例代码的第一行）正确地传递了我的 app_id 和 app_key。任何想法可能导致此错误？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:44:24.600

尝试更换

```
KiiAnonymousUser.create() 
```

和

```
new KiiAnonymousUser() 
```

似乎静态 create() 方法已被删除。

最好的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:37:57.587

回答我自己的问题。我的代码片段肯定会导致异常，因为通过 ACL 的自定义访问控制只能应用于组和用户级别的存储桶（而不是应用级别的存储桶）*

# sql - 链表上的Oracle分层查询

> ID：15972705
> 
> 赞同：1
> 
> 时间：2013-04-12T13:31:14.953
> 
> 标签：sql, oracle, hierarchical-data

我有下表实现了一个链表。我想从 rate_sequence_id 为 1 开始查询，并获取链接到它的下一条记录，在本例中为 30。所以查询应该返回两行（rate_sequence_id 为 1 和 30）。

但是，以下查询要么仅返回 1 行，要么返回“循环”错误，具体取决于 CONNECT BY 子句中的哪一列。

我想用这些数据做些什么？

```
SELECT * FROM TEST
CONNECT BY PRIOR RATE_SEQUENCE_ID = NEXT_RATE
START WITH RATE_SEQUENCE_ID = 1 
```

测试数据：

```
CREATE TABLE TEST (
  RATE_SEQUENCE_ID      NUMBER(10,0),
  NEXT_RATE             NUMBER(10,0),
  DURATION              NUMBER,
  RATE                  NUMBER
);  

Insert into TEST (RATE_SEQUENCE_ID,NEXT_RATE,DURATION,RATE) values (50,51,28,0.99);
Insert into TEST (RATE_SEQUENCE_ID,NEXT_RATE,DURATION,RATE) values (51,51,112,9.99);
Insert into TEST (RATE_SEQUENCE_ID,NEXT_RATE,DURATION,RATE) values (1,30,28,0.99);
Insert into TEST (RATE_SEQUENCE_ID,NEXT_RATE,DURATION,RATE) values (30,30,112,14.99);
Insert into TEST (RATE_SEQUENCE_ID,NEXT_RATE,DURATION,RATE) values (0,0,0,0);
Insert into TEST (RATE_SEQUENCE_ID,NEXT_RATE,DURATION,RATE) values (31,0,30,0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:38:48.060

所以这是你的问题：

```
Insert into TEST (RATE_SEQUENCE_ID,NEXT_RATE,DURATION,RATE) values (30,30,112,14.99); 
```

30 与自身相连。这是对的还是错字？

如果该数据是正确的并且您使用的是现代版本的 Oracle，您可以使用 NOCYCLE 子句来退出循环。这绝对是在 10g 中（也许在 9i 中，我的记忆在这里失败了）。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm#i2053935)。

```
SELECT * FROM TEST
CONNECT BY NOCYCLE PRIOR RATE_SEQUENCE_ID = NEXT_RATE
START WITH RATE_SEQUENCE_ID = 1 
```

# java - 后按力关闭

> ID：15972706
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:31:16.960
> 
> 标签：java, android

*   我在我的活动中使用了选择联系人功能。它可以很好地选择联系人和其他详细信息，如姓名。
*   但是当我单击按钮时，它会显示联系意图并显示数字一切都很好。
*   但是，如果我没有选择数字并单击后按意味着应用程序强制关闭。

**代码**

```
Intent inten = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(inten,PICK_CONTACT);

@Override
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

    Cursor c;
    switch (reqCode) {
    case (PICK_CONTACT):

        Uri result = data.getData();
    Log.v("TAG", "Got a result: " + result.toString());

    // get the contact id from the Uri
    String id = result.getLastPathSegment();

    // query for phone numbers for the selected contact id
    c = getContentResolver().query(
            Phone.CONTENT_URI, null,
            Phone.CONTACT_ID + "=?",
            new String[]{id}, null);

    int phoneIdx = c.getColumnIndex(Phone.NUMBER);
    int phoneType = c.getColumnIndex(Phone.TYPE);

    if(c.getCount() > 1) { // contact has multiple phone numbers
        final CharSequence[] numbers = new CharSequence[c.getCount()];
        int i=0;
        if(c.moveToFirst()) {
            while(!c.isAfterLast()) { // for each phone number, add it to the numbers array
                String type = (String) Phone.getTypeLabel(this.getResources(), c.getInt(phoneType), ""); // insert a type string in front of the number
                String number = type + ": " + c.getString(phoneIdx);
                numbers[i++] = number;
                c.moveToNext();
            }
            // build and show a simple dialog that allows the user to select a number
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Select Number");
            builder.setItems(numbers, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int item) {
                    String number = (String) numbers[item];
                    int index = number.indexOf(":");
                    number = number.substring(index + 2);
                    cNumber=number;
                    edt.setText(cNumber);
                    //Toast.makeText(getApplicationContext(), number, Toast.LENGTH_LONG).show();
                    // loadContactInfo(number); // do something with the selected number
                }
            });
            AlertDialog alert = builder.create();
            alert.setOwnerActivity(this);
            alert.show();

        } else Log.w("TAG", "No results");
    } else if(c.getCount() == 1) {
        // contact has a single phone number, so there's no need to display a second dialog

        if(c.moveToFirst())
        {
            cNumber = c.getString(c.getColumnIndex("data1"));
            edt.setText(cNumber);
            //Toast.makeText(getApplicationContext(), cNumber, Toast.LENGTH_LONG).show();
        }
    }

    break;
    }

} 
```

在我的活动中，我还写了回压...

```
@Override
public void onBackPressed() {

    btnflag++;
    if(btnflag==1)
    {
        Intent mainscr = new Intent(FindList1.this, MainScreen.class);
        startActivity(mainscr);
        btnflag=0;
        finish();
    }
} 
```

但不幸的是，事故发生了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:16:18.067

当用户单击返回按钮时，它将调用 activityResult()。我猜你在这段代码中得到了空指针异常。

```
Uri result = data.getData();
Log.v("TAG", "Got a result: " + result.toString());

// get the contact id from the Uri
String id = result.getLastPathSegment();

// query for phone numbers for the selected contact id
c = getContentResolver().query(
Phone.CONTENT_URI, null,
Phone.CONTACT_ID + "=?",
new String[]{id}, null);

int phoneIdx = c.getColumnIndex(Phone.NUMBER);
int phoneType = c.getColumnIndex(Phone.TYPE); 
```

data.getData() 它将返回 null。因为您没有选择任何联系人并且您在联系人活动中按下了返回按钮。

`if(data==null){ return; }`

并处理异常

onBackPressed() 方法将在当前活动按下返回按钮时调用。当您进行其他活动时，它不会被调用。

# c++ - 使用宏定义具有额外操作的类成员字段 (C++)

> ID：15972710
> 
> 赞同：0
> 
> 时间：2013-04-12T13:31:39.053
> 
> 标签：c++, macros

有人可以帮我解决以下情况：

在类定义中，需要定义任意数量的特定类型的成员字段，并在创建此类实例时自动调用它们的特定操作。喜欢，

```
class C {
}
class F1 {
public:
   int check(C* host);
} 
class C1:public C {
public:
   C1() { this->pre_checks();   }
   F1 m_a1;
   F1 m_a2;
public:
   void pre_checks() { // use inline solution
      m_a1.check(this);
      m_a2.check(this);
   }
} 
```

在上述情况下，类 C1 包含两个 F1 类型的字段。因此在 C1 的函数 pre_checks() 中，每个字段都会在创建 C1 的实例时自动执行其额外的操作“check()”。

字段编号可以是任何或非。C2 类可以：

```
class C2: public C {
public:
   C2() { this->pre_checks();  }
   F1 m_t1;
   F1 m_t2;
   ...
   F1 m_tn;
public:
   void pre_checks() { // use inline solution
      m_t1.check(this);
      m_t2.check(this);
      ...
      m_tn.check(this);
   }    
} 
```

我怎样才能使用一个宏，比如 MDEF_FIELD，来做这样的事情：

```
class C3: public C {
   MDEF_FIELD  m_b1;
   MDEF_FIELD  m_b2;
   ...
   MDEF_FIELD  m_bn;
} 
```

并且 C3 类定义还将包含以下代码：

```
m_b1.check(this);
m_b2.check(this);
...
m_b3.check(this); 
```

并且每次创建 C3 实例时都会自动执行它们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:53:06.190

这对我来说看起来/听起来像是一个真正的问题（老实说，我想到了“混乱”这个词）。如果可能的话，我（强烈）建议尝试找到一些完全不同的方法。

如果你真的需要这样做，宏几乎肯定是错误的方式。正确的方法（在某种程度上不仅仅是一个矛盾的说法）是一个有点复杂的类结构：首先，一个 F1_proxy，这是客户实际使用的。在大多数方面，这将是一种简单的 pImpl 类型的东西，它只是将其功能转发给它“拥有”的 F1 对象。

不同之处在于代理类将包含指向 F1 实例的指针的静态向量。每次创建 F1 代理时，它都会遍历当前向量并对每个实例进行“检查”。假设成功，它将创建 F1 的实例并将其添加到向量中。当您销毁 F1 代理时，它将销毁关联的 F1 对象*并*从静态向量中删除指向该 F1 对象的指针，因此在创建其他对象时将不再检查它。

然而，我觉得有必要重复一遍，虽然（我认为）这符合你所说的要求，但这些要求让我觉得很成问题。它会做你所说的你想要的，但它让我觉得不太可能是解决真正问题的好方法（不管它是什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:16:00.090

使用包装类。

```
class F1_autocheck : public F1 {
public:
    F1_autocheck(C *p) : F1() { this->check(p); }
};

class C1 : public C {
public:
   C2() : m_t1(this), m_t2(this), ..., m_tn(this) { }
   F1_autocheck m_t1;
   F1_autocheck m_t2;
   ...
   F1_autocheck m_tn;
} 
```

# matlab - Matlab的Graphviz：删除没有边的节点

> ID：15972726
> 
> 赞同：0
> 
> 时间：2013-04-12T13:32:05.333
> 
> 标签：matlab, graphviz

我正在将 Graphviz 用于 matlab。有没有办法删除最终图中没有边的节点，因为我的图非常大（~9100 个节点），并且以更好的方式表示图的任何其他帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:43:50.757

的输入`graphviz`是[邻接矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)，因此您可以执行以下操作：

```
% Generate random adjacency matrix with no nodes connected to themselves
N = 10; 
adj = (randi(N, N) > 5) .* (ones(N) - eye(N));

% Spuriously set one row and column to zero: no connections for this node
adj(:, 2) = 0; adj(2, :) = 0;

% Find the nodes with no edges
noEdgeNodes = all(adj == 0, 1) & all(adj == 0, 2)'

noEdgeNodes =

 0     1     0     0     0     0     0     0     0     0

% Remove nodes with no edges
adj(noEdgeNodes, :) = []; 
adj(:, noEdgeNodes) = [];

% Call graphviz
graphViz4Matlab('-adjMat', adj, '-nodeLabels', ...
    arrayfun(@(x){num2str(x)}, 1:size(adj, 1))) 
```

# r - R中的colorRampPalette函数

> ID：15972728
> 
> 赞同：1
> 
> 时间：2013-04-12T13:32:07.630
> 
> 标签：r, colors

我正在使用 R 中的 colorRampPalette 函数来创建一组颜色，以在散点图中使用来为不同的值着色。

```
 testcol  <- colorRampPalette(c('blue','red')) 
```

哪个返回

```
> testcol(6)
[1] "#0000FF" "#3300CC" "#660099" "#990065" "#CC0032" "#FF0000" 
```

然后将每个代码分配给一个值。

为了提高视觉冲击力，我想跳过一些颜色，以减少渐变效果，并使值之间的颜色变化更明显。

我需要在 colorRampPalette 函数中做一些插值吗？

# ios - 如何在 cocos2d 中从 url 播放音乐文件

> ID：15972742
> 
> 赞同：1
> 
> 时间：2013-04-12T13:32:38.200
> 
> 标签：ios, cocos2d-iphone

如何从 cocos2d 中的 URL 播放 m4a 音乐文件？

我尝试使用 SimpleAudioEngine：

```
[[SimpleAudioEngine sharedEngine] preloadBackgroundMusic:@"http://a1327.phobos.apple.com/us/r1000/073/Music/v4/14/d7/9a/14d79aa4-53bb-d7be-e7d0-8f4f3f5d235d/mzaf_8740286426674526399.aac.m4a"]; 
[[SimpleAudioEngine sharedEngine] playEffect:@"http://www.mydomain.com/music.m4a"]; 
```

但不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:34:36.210

Cocos2d 暂不支持 url 播放。您可以做的是将文件下载到您的设备，然后使用本地路径播放。

# sql - 从 SELECT 插入但更改一列？

> ID：15972743
> 
> 赞同：33
> 
> 时间：2013-04-12T13:32:40.840
> 
> 标签：sql

想知道是否有一种方法可以将行从另一个表插入到另一个表中，但一列除外？

这对于有限数量的列当然很容易，但是当列数增加时列出所有列会有点累。

我在想一些事情：

```
Insert into table
select * replace col1 with current date
from table
where yada yada yada 
```

一种可能是复制一行并执行和更新，但假设由于索引或其他原因，这不是一个选项。

有任何想法吗？

编辑：它是 DB2 v10，但这个问题纯粹出于好奇。只是想知道有没有可能...

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-08-15T08:59:01.963

您可以使用临时表

## 创建临时表

```
CREATE TEMPORARY TABLE temp_table AS (SELECT * FROM MyTable WHERE ...); 
```

## 更新栏

```
UPDATE temp_table SET column='Value' WHERE ...; 
```

## 或删除一列

```
ALTER TABLE temp_table DROP column_name; 
```

## 插入到目标表

```
INSERT INTO MyDestinationTable SELECT * FROM temp_table; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-12T13:35:14.533

对于 SQL Server，语法为：

```
insert  into TargetTable
        (col1, col2, col3, ...)
select  getdate(), col2, col3, ... 
from    SourceTable 
```

SQL Server 可以为您生成列列表。右键单击表名，然后选择`Script as -> Select -> To New Window`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-27T15:09:07.283

使用甲骨文

```
DECLARE
CURSOR CUR_D IS
  SELECT *
  FROM TABLE
  WHERE id = some id;
ROW_D CUR_D%ROWTYPE;

BEGIN
  OPEN CUR_D;
  FETCH CUR_D INTO ROW_D;
  CLOSE CUR_D;

  ROW_D.column := 'some data';

  INSERT INTO some table
  VALUES ROW_D;

END;
/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T13:44:49.700

使用所需的列数创建一个 VIEW。

假设 Tbl1 有 4 列。创建一个包含所需列的视图。这里 Col1 已被排除。

```
CREATE VIEW V1 AS
SELECT col2, col3, col4
FROM TBL1 
```

使用 VIEW 进行插入。TBL2 的 Col1 值将是当前日期，对于其他列，值将来自视图 V1，即来自 TBL1 的 col2、col3、col4

```
INSERT INTO TBL2
SELECT GETDATE(), * 
FROM V1 
```

这样您就不需要每次都指定所有列。

希望能帮助到你

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T14:03:08.743

假设您的选择具有在插入之前将结果集唯一地定义为目标表内容的属性，您可以应用以下两个步骤：

```
 Insert into target_table
 select *
  from source_table
 where yada yada yada
   and characteristic_yada
     ;

update target_table
   set col1 = current date
 where characteristic_yada
     ;

 commit; 
```

确保在同一个事务中发出两个命令，如图所示。还要注意，`characteristic_yada`必须同样适用于源表和目标表，并且`characteristic_yada`在每次应用语句之前都需要检查其适用性，除非它们引用了 taregt 表的 pks/aks

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-30T21:02:56.827

zim RDBMS 将允许它。所有由 fieldname 匹配的字段都将从源中获取值，除非被 let 语句覆盖。例如。

```
 `add all details from details where account_month = 20190101 let level = 2 increase = base * 1.1 total = increase * amount` 
```

这将为指定会计月份的所有详细记录添加一个级别 2 记录，其中所有字段值与源集匹配，除了这些分配/计算的金额：级别为 2。增加是原始基数乘以 1.1。总计是新增加（原始基数乘以 1.1）乘以金额。如果您切换增加和总计的分配顺序，那么总计将在计算中使用源/原始增加。

# c++ - accept() 函数作为非阻塞函数

> ID：15972747
> 
> 赞同：1
> 
> 时间：2013-04-12T13:32:52.747
> 
> 标签：c++, sockets, winsock

我正在使用等待客户端连接的 Winsock 编写服务器程序。代码是这样的：

```
#include <winsock.h>
#pragma comment(lib, "wsock32.lib")

WSADATA wsaData;
WSAStartup(0x101, &wsaData);
SOCKET listeningSocket;
listeningSocket = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);

SOCKADDR_IN serverInfo;
serverInfo.sin_family = AF_INET;
serverInfo.sin_addr.s_addr = INADDR_ANY;
serverInfo.sin_port = htons(80);

bind(listeningSocket, (LPSOCKADDR)&serverInfo, sizeof(struct sockaddr));
listen(listeningSocket, 5);

SOCKET theClient;
while(true)
{
    theClient = accept(listeningSocket,NULL,NULL);
    ....
    recv(theClient,Message,strlen(Message),0);
    ....
    ....
} 
```

我遇到的问题是服务器不等待客户端并在接受（）函数后继续执行。具体来说，accept() 函数不会阻塞执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:36:06.307

您应该检查所有库函数的返回值。可能是早期调用（例如`bind()`）失败，但您永远不会发现，因为您忽略了返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:45:09.440

尝试在接受时打印出错误消息，它可能有助于解决您遇到的问题（您也应该使用 bind 执行此操作。）

绑定错误检查：

```
int result; 
result = bind(listeningSocket, (LPSOCKADDR)&serverInfo, sizeof(struct sockaddr));
if (result == SOCKET_ERROR) {
    printf("bind failed with error: %d\n", WSAGetLastError());
    freeaddrinfo(serverInfo);
    closesocket(listeningSocket);
    WSACleanup();
    return 1;
} 
```

接受错误检查：

```
theClient = INVALID_SOCKET;

// Accept a client socket
theClient = accept(listeningSocket, NULL, NULL);
if (theClient == INVALID_SOCKET) {
    printf("accept failed: %d\n", WSAGetLastError());
    closesocket(listeningSocket);
    WSACleanup();
    return 1;
} 
```

有关更多信息，请查看：

[http://msdn.microsoft.com/en-ca/library/windows/desktop/ms737593(v=vs.85).aspx](http://msdn.microsoft.com/en-ca/library/windows/desktop/ms737593(v=vs.85).aspx)

和

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb530751(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530751(v=vs.85).aspx)

# mysql - mysql搜索短词

> ID：15972749
> 
> 赞同：0
> 
> 时间：2013-04-12T13:33:01.793
> 
> 标签：mysql, full-text-search

我有一个查询，它查找一些关键字，这些关键字使用全文索引可以正常工作，但是像“Adidas Adistar Salvation 3”这样的产品存在问题

3 实际上很重要，但 mysql 全文索引不包括在搜索中。

确保一行包含“Adidas”、“Adistar”和“Salvation 3”的最佳方法是什么

通常搜索将是：

```
SELECT * FROM products WHERE (title LIKE "%adidas%" AND title LIKE "%Adistar%" AND title LIKE "%Salvation%" AND title LIKE "%3%") 
```

非常感谢布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:55:34.777

从[这个问题](https://stackoverflow.com/questions/4172195/mysql-like-multiple-values)，您可以尝试使用`REGEXP`：

```
SELECT * 
FROM products 
WHERE title REGEXP "adidas|Adistar|Salvation 3" 
```

你也可以试试[find_in_set()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# php - 使用php检查mysql datetime是否> 1小时

> ID：15972753
> 
> 赞同：0
> 
> 时间：2013-04-12T13:33:18.157
> 
> 标签：php, mysql, time

这是我现在拥有的代码：

```
<?php while($row = mysql_fetch_array( $result )){ ?>
<tr>
    <td><?php echo $row["ID"] ?></td>
    <td><?php echo $row["LOCATION"] ?></td>
    <?php 
        if ($row["STATUS"] != "OK")
        { 
        ?><td bgcolor="red"><?php echo $row["STATUS"] ?></td><?php 
        } else{ 
        ?><td><?php echo $row["STATUS"] ?></td><?php 
        } 
        ?><td><?php echo $row["TIME"] ?></td>
</tr>
<?php } ?> 
```

我想要做的是另一个类似于我为状态所做的 if 语句，但将超过 1 小时的任何内容突出显示为红色。我知道 MySql 正在 UMT 中运行，而服务器本身正在 EST 中运行，并且不知道这是否会导致问题（因为我很喜欢 php）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:43:19.730

最好的方法是使用你的 SQL 查询来计算它是否超过 1 小时，这样你就没有“时区问题”。

```
SELECT *, IF(HOUR(TIMEDIFF(NOW(), DateTimeField)) >= 1, 1, 0) AS OlderThanAnHour 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:39:14.703

我喜欢将 DateTime 用于此类任务，因为它通常比某些时间戳计算更具可读性。也许你也喜欢这种方法。

```
$inOneHour = new DateTime();
$inOneHour->modify('-1 hour');
$time = new DateTime($row['TIME']);

if ($time < $inOneHour) {
    /* your code */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:40:27.373

如果数据库服务器采用 UTC，您可以使用以下方式比较时间`strtotime()`：

```
$now = time();

while ... {

    if (strtotime("{$row['TIME']} GMT") + 3600 < $now) {
         // it's old, dude!
    }
} 
```

您还可以在查询中添加一个表达式来确定年龄：

```
`TIME` < DATE_SUB(NOW(), INTERVAL 1 HOUR) AS is_old 
```

然后，在 PHP 中：

```
if ($row['is_old']) {
    // it's old dude!
} 
```

# ant - Jenkins 不执行通过 ant 调用的批处理脚本

> ID：15972755
> 
> 赞同：1
> 
> 时间：2013-04-12T13:33:21.480
> 
> 标签：ant, jenkins

通过 jenkins，使用默认目标调用 ant 文件 build.xml。ant 任务调用一个批处理文件，该文件启动一个新窗口，并在执行后执行我的 ant 单元测试。

```
<exec dir="${baseLoc}/Temp/${ant.project.name}/@{testdata}" executable="cmd" vmlauncher="false">
            <env key="WAHL" value="@{option}"/>
            <arg line="/c "/>
        <arg value="start /wait __Make.bat"/> 

</exec> 
```

问题是詹金斯无法启动批处理脚本。这有什么原因吗？注意：相同的东西通过 ANT 执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:21:19.257

我记得几年前我自己在运行 ant 批处理文件、正确获取返回码等方面遇到了类似的问题。这是我在 ant（以及由 Jenkins/Hudson 运行的 ant）中成功使用了 5 年的 exec：

```
<property name="my.batch.file" value="${path.to.my.file}/myBatch.bat"/>

<exec dir="${dir.property.you.want}" executable="cmd" failonerror="true">
  <!-- any env lines can go here -->
  <arg line="/c call ${my.batch.file}"/> <!-- must be the first arg tag -->
  <arg line="arg1"/> <!-- batch file arguments start here if needed--> 
  <arg line="arg2"/>
</exec> 
```

我建议使用 ant 属性来存储批处理文件的完整路径，和/或确保 dir 条目与批处理文件所在的位置匹配。这可能是它没有在 Jenkins 中运行的原因，因为它的工作目录最终会有所不同。

在您的情况下，您提到它会弹出一个新窗口（因为您正在使用 start），因此您可能需要对其进行一些调整才能获得该行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:01:39.733

出于某种原因，我在 exec 任务中包含了标签**vmlauncher="false" 。**删除它解决了这个问题。

现在，我可以看到正在执行的每个批处理脚本的新命令 shell。

感谢您的提示和建议。

# ruby-on-rails - 并发请求未完成时无法注销设计用户

> ID：15972756
> 
> 赞同：1
> 
> 时间：2013-04-12T13:33:22.343
> 
> 标签：ruby-on-rails, asynchronous, devise, angularjs, logout

Devise 身份验证 gem 的经典应用程序结构是仅限服务器端的 Rails 应用程序。在这种情况下，当一个人退出时，没有任何东西可以防止会话破坏。

但我正在使用 Rails+Devise+Angular.js 并尝试以正确的方式退出 - 这意味着 - `/users/sign_out`URL 必须由 Angular 应用程序调用，而不是通过单击`<a href="/users/sign_out">`链接。

我的应用程序以块的形式加载数据。如果在调用 /users/sign_out URL 时某些数据请求尚未完成，则 Devise 重新登录用户。

我做了我的自定义注销方法，看看会发生什么：

```
before_filter :authenticate_user!

def data_request
  .............
end

def logout
  sign_out(current_user)
  if current_user
    puts 'Has not signed out!'
  else
    puts 'Has signed out!'
  end
  redirect_to '/users/sign_out'
end 
```

在`sign_out`方法调用之后`current_user`真的是`nil`，但是接下来对 data_request 的请求就`before_filter`好像我没有注销一样通过。

如果您能帮助我了解发生了什么以及如何实现可靠的注销，我将不胜感激。

**更新**

我遇到了一个奇怪的行为：

如果我停止 Webrick 服务器，重新启动它并重新加载页面，应用程序允许我调用 API 方法，就好像会话没有被破坏一样。据我所知，Devise 的身份验证 cookie 不包含加密/编码的登录名和密码，而是代表一个临时会话 ID，该 ID 仅在特定会话处于活动状态且会话销毁后应变为无效时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:18:49.487

当 Angular 应用程序调用 url 时，您传递的是什么方法？默认情况下，设备期望删除方法用于注销 url。尝试更改设备配置文件 (config/initializers/devise.rb) 并修改 sign_out_via 属性。默认是:delete，你只需要改成:get。

```
config/initializers/devise.rb
config.sign_out_via = :get 
```

# jquery - 让 jQuery Validation 插件与 requirejs 一起工作

> ID：15972757
> 
> 赞同：1
> 
> 时间：2013-04-12T13:33:39.050
> 
> 标签：jquery, wordpress, jquery-plugins, requirejs

我在 WordPress 驱动的网站上创建了一个表单。它目前正在使用 RequireJS 向页面元素添加两个按钮，但我也希望 Require 来控制 jQuery Validation 插件中的一些东西。添加按钮工作正常，但遗憾的是，验证不起作用。

表单在 HTML 中如下所示：

```
 <form id="contact" method="get" action="">
    <fieldset id="contact-form-fields">
      <p>
        <label for="form_name" class="form-titles">Name</label>
        <input name="form_name" id="form_name" type="text" placeholder="Name" aria-required="true" class="required"> 
      </p>
      <p>
        <label for="form_email" class="form-titles">Email</label>
        <input name="form_email" id="form_email" type="text" placeholder="Email" aria-required="true" value="">  
      </p>
      <p>
        <label for="msg_text" class="form-titles">Email</label>
        <textarea tabindex="-8" rows="10" placeholder="Type your awesome message here." class="placeholder" name="msg_text" id="msg_text" aria-required="true" class="required"></textarea>
      </p>
    </fieldset>
    <input type="submit" value="Send Your Message" name="submit" class="button">
  </form> 
```

RequireJS 像这样附加到页面：

```
<script data-main="http://livetest.kaidez.com/wp-content/themes/kaidez-2012/js/config.js" src="http://livetest.kaidez.com/wp-content/themes/kaidez-2012/js/require-jquery.js"></script> 
```

上面提到的 config.js 文件是这样的：

```
require.config({
  baseUrl: "http://livetest.kaidez.com/wp-content/themes/kaidez-2012/js",

  deps: ['scripts'],

  paths: {
    jquery: "jquery",
    jqueryValidate: "jquery-validate.min" 
  },

  shim: {
    jquery: {
      exports: "jquery"
    },
    jqueryValidate: {
      deps: ["jquery"]
    }
  }
}); 
```

config.js 说它有一个名为 scripts.js 的依赖项，它看起来像这样：

```
// code that adds buttons to the page
require(['jquery'], function ($) {

  var header = document.getElementById("masthead"),
    $navMenu = $("#site-navigation-list"),
    $searchBox = $("#searchform"),
    menuButton = document.createElement("div"),
    searchButton = document.createElement("div"),
    showMenus;

  $(menuButton).attr("id", "menu");
  $(searchButton).attr("id", "search");

  header.appendChild(searchButton);
  header.appendChild(menuButton);

  showMenus = function(btn,el) {
    $(btn).click(function() {
      if (el.is(":visible") ) {
        el.slideUp({
          complete:function(){
            $(this).css("display","");
          }
        });
       } else {
         el.slideDown();
       }
    });
  };

  showMenus(menuButton, $navMenu);
  showMenus(searchButton, $searchBox);

});

//code that controls jQuery Validate
require(["jquery", "jqueryValidate"], function($, jqueryValidate) {
  $("#contact").validate({
    rules: {
      form_email: {
        required: true,
        number: true
      }
    }
  });
}); 
```

查看其他发布的问题、jsFiddles 等，我似乎找不到答案。我认为我的错误出在我的 RequireJS 设置中，但我不确定。工作开发环境代码在[这里](http://livetest.kaidez.com/)。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:59:19.757

我相信我已经找到了自己问题的答案。TL;DR 的答案是：

> *RequireJS 可以添加到 WordPress 中工作，但是如果您通过 WP-Admin 安装依赖于 jQuery 的插件，那么您很有可能会再次加载 jQuery 核心，这并不好。*

长答案......我们开始：

我试图在[jQuery Validation](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件的帮助下使用两个 RequireJS 模块来管理表单验证（上面提到的添加按钮的代码无关紧要）。我让它与以下代码一起工作：

联系表单在 HTML 中如下所示：

```
<p id="success-msg" style="display:none">Your message has been sent successfully.</p>
<!-- The tag above appears if the form goes through-->
  <form id="contact" method="post">
    <fieldset>
      <div class="left">
        <input name="form_name" id="form_name" type="text" placeholder="Your Name"> 
      </div>
      <div>
        <input name="form_email" id="form_email" type="text" placeholder="Your Email" class="required email">  
      </div>
      <textarea tabindex="-8" rows="10" placeholder="Type your awesome message here." class="placeholder" name="msg_text" id="msg_text" ></textarea>
    </fieldset>
    <input type="submit" value="Send Your Message" name="submit" class="button">
  </form> 
```

RequireJS 在 HTML 中是这样引用的：

```
// both require.js and config.js are stored in a directory called 'js' in a child theme
<script src="<?php echo get_stylesheet_directory_uri(); ?>/js/require.js" data-main="<?php echo get_stylesheet_directory_uri(); ?>/js/config.js"></script> 
```

config.js 看起来像这样：

```
requirejs.config({
  baseUrl: "http://yourdomain.com/wp-content/themes/yourTheme/js",

  deps: ["form"], // lists 'form.js' as a dependency, where our form code will be

  paths: {
    /*
     * Referencing the 'wp-includes/js/'
     * directory in WP. jQuery was pre-installed 
     * but Validation was manually added.
     */
    jquery: "http://yourdomain.com/wp-includes/js/jquery/jquery",
    val: "http://yourdomain.com/wp-includes/js/validate"
  },

  shim: { 
  jquery: {
    exports: 'jquery'
  },
  val: {
    deps: ['jquery'],
    exports: 'jquery'
  }
},

  waitSeconds: 20
}); 
```

上述 form.js 文件如下所示：

```
define("form", ["jquery", "val"], function($) {

$("#contact").submit(function(event) {
  var name = $("#form_name").val();
  var email = $("#form_email").val();
  var text = $("#msg_text").val();
  var dataString = 'name='+ name + '&email=' + email + '&text=' + text;

  event.preventDefault();

    if($("#contact").valid()){
      $.ajax({
      type: "POST",
      url: "http://yourdomain.com/wp-content/themes/yourTheme/email.php",
      data: dataString,
      success: function(){
        $("#contact").fadeOut(100);
        $('#success-msg').fadeIn(100);
      }
    });

    return false;
    }
  });
}); 
```

为了清楚起见，在成功提交表单 (email.php) 后发送电子邮件的 PHP 看起来像这样。

```
<?php

if($_POST){
  $name=$_POST['name'];
  $email=$_POST['email'];
  $text=$_POST['text'];

  //send email
  mail("your@email.com", "your subject",
  $text, "From:" . $email);
}

?> 
```

好消息是上面的一切都按原样工作。如果您使用 WordPress 安装依赖于 jQuery 的插件，就会出现坏消息。由于 WordPress 架构，像这样的插件将自动安装 jQuery 核心，除非它已经通过`functions.php`或其他一些 WP 内部方法安装。像我一样通过 RequireJS 调用 jQuery 不会阻止这一点。

我尝试了很多不同的方法来使用`wp_deregister_script()`,`wp_enqueue_script()`等来解决这个问题，但没有运气。这适用于我正在处理的个人项目，但可能不适合客户项目。

有一张 WordPress 票可以向 WordPress 添加 AMD 功能，目的是调用不同版本的 jQuery。（在[这里阅读）](http://core.trac.wordpress.org/ticket/23285)。如果票上有后续，希望这个问题能够得到解决。在那之前，我很确定现在情况就是这样。

# jquery - jQuery 选项卡无法在 IE8 或 IE7 中呈现

> ID：15972759
> 
> 赞同：0
> 
> 时间：2013-04-12T13:33:47.953
> 
> 标签：jquery, tabs

我的 jQuery 选项卡不在 IE8 或 IE7 中呈现。我检查了主页上的 jQuery 选项卡，它们似乎运行良好。这在所有其他浏览器中都没有问题。我错过了 IE 需要的东西吗？我附上了它在 IE 中的样子的图像。这是我的代码：

```
 var tabcontent1 = "<article id='tabs-min' class='tabs ui-tabs ui-widget ui-widget-content ui-corner-all'><ul class='ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all'><li class='ui-state-default ui-corner-top'><a href='#tabs-min-1'>Description</a></li>";
        var tabcontent2 = "<div id='tabs-min-1'><p>"+ description +"</p></div>";

        if(jQuery('.features-label').size() > 0){
            var featureslabel = jQuery(".features-label").text();
        }
        if(jQuery('.technical-label').size() > 0){
            var technicallabel = jQuery(".technical-label").text();
        }
        if(jQuery('.owners-label').size() > 0){
            var ownerslabel = jQuery(".owners-label").text();
        }
        if(jQuery('#tab_image').size() > 0){
            var imagelabel = "Image";
            var imagetext = jQuery("#tab_image").text();
        }

        if(jQuery('.features-text').size() > 0){
            var featurestext = jQuery(".features-text").html();
        }
        if(jQuery('.technical-text').size() > 0){
            var technicaltext = jQuery(".technical-text").html();
        }
        if(jQuery('.owners-text').size() > 0){
            var ownerstext = jQuery(".owners-text").html();
        }

        if (featurestext != null){
            var tabcontent1 = tabcontent1 + "<li class='ui-state-default ui-corner-top'><a href='#tabs-min-2'>"+ featureslabel +"</a></li>";
            var tabcontent2 = tabcontent2 + "<div id='tabs-min-2'><p>"+ featurestext +"</p></div>";
        }
        if (technicaltext != null){
            var tabcontent1 = tabcontent1 + "<li class='ui-state-default ui-corner-top'><a href='#tabs-min-3'>"+ technicallabel +"</a></li>";
            var tabcontent2 = tabcontent2 + "<div id='tabs-min-3'><p>"+ technicaltext +"</p></div>";
        }
        if (ownerstext != null){
            var tabcontent1 = tabcontent1 + "<li class='ui-state-default ui-corner-top'><a href='#tabs-min-4'>"+ ownerslabel +"</a></li>";
            var tabcontent2 = tabcontent2 + "<div id='tabs-min-4'><p>"+ ownerstext +"</p></div>";
        }
        if (imagetext != null){
            var tabcontent1 = tabcontent1 + "<li class='ui-state-default ui-corner-top'><a href='#tabs-min-5'>"+ imagelabel +"</a></li>";
            var tabcontent2 = tabcontent2 + "<div id='tabs-min-5'><p><img src='/v/images_tabs/"+ imagetext +"'></p></div>";
        }
        //LOAD THE TABS
            jQuery("#test123").before(tabcontent1 + "</ul>" + tabcontent2 + "</article>");
jQuery(function() {
jQuery( "#tabs-min" ).tabs();
}); 
```

![它在 IE 中的样子](https://i.stack.imgur.com/kXxTk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:23:05.023

问题是“文章”。IE 不喜欢这样。将其更改为 div。

```
<article id='tabs-min' 
```

应该

```
<div id='tabs-min' 
```

# ios - UIWebView 不填充 4 英寸视网膜

> ID：15972765
> 
> 赞同：0
> 
> 时间：2013-04-12T13:34:16.787
> 
> 标签：ios, uiwebview

我的应用程序有一个 uiwebview 在非视网膜和 3.5 英寸视网膜上效果很好，但是在 Iphone 5 又名 4 英寸视网膜上，它不会填满屏幕，webview 和 tabbar 之间存在间隙。

![在此处输入图像描述](https://i.stack.imgur.com/9mdjk.png)

这个试过了，不行

```
myview.autoresizingMask = UIViewAutoresizingFlexibleWidth;//myview is the webview
myview.scalesPageToFit = YES;
self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

也试过这个： ![在此处输入图像描述](https://i.stack.imgur.com/UQkrf.png) ![在此处输入图像描述](https://i.stack.imgur.com/PJ8sJ.png)

我怎么解决这个问题？

谢谢，莫德

# java - 如何指定输入

> ID：15972766
> 
> 赞同：2
> 
> 时间：2013-04-12T13:34:18.720
> 
> 标签：java

请在此代码中提供帮助以仅指定整数的输入.......................... …………………………………………………………………………………………

```
 int shape=0;
        boolean inp=false;
        while (! inp) {
            try 
            {
                shape = (int)(System.in.read()-'0');

            }//try
            catch (IOException e) 
            {
                System.out.println("error");
                System.out.println("Please enter the value again:");
            }//catch
                if ((shape == 1) || (shape == 2)) {
                inp = true;
            }//if
        }//while 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:45:36.540

如果唯一有效的输入是`1`or`2`然后我将限制为那些确切的字符（编辑：这已经过测试并且有效）：

```
char c = '-'; //invalid character to default
while (! (c == '1' || c == '2'))
{
   System.out.println("Please enter 1 or 2:");
   c = (char) System.in.read();
   System.out.println(c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:40:30.903

我编辑了答案并输入了完整的代码。它现在可以工作（经过测试）。使用 BufferedReader 可以让您阅读真实的内容`Strings`（这就是它之前陷入无限循环的原因）

```
 int shape = 0;
    boolean inp = false;
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));
    while (!inp) {
        try {
            System.out.println("Type in a number");
            shape = Integer.parseInt(bufferedReader.readLine());  // parse the string explicitly
            System.out.println("thanks");
        }//try
        catch (IOException e) {
            System.out.println("error");
            System.out.println("Please enter the value again:");
        }//catch
        catch (NumberFormatException e) // here you catch the exception if anything but a number was entered
        {
            System.out.println("error");
            System.out.println("Please enter the value again:");
        }//catch
        System.out.println("Shape = " + shape);
        if ((shape == 1) || (shape == 2)) {
            System.out.println("should be true");
            inp = true;
        }//if 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:25:17.667

```
 Integer i = null;
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    while (true)
    {
        System.out.println("Please enter 1 or 2:");
        try {
            i = Integer.parseInt(in.readLine());
            if(i==1 || i==2){
                System.out.println("Success! :)");
                break;
            }
        } catch (IOException ex) {
            System.out.println("IO Exception");
        } catch (NumberFormatException e){
            System.out.println("Invalid input");
        }     
    } 
```

# javascript - 如何在安全或非安全 http 请求上获取 location.href

> ID：15972770
> 
> 赞同：0
> 
> 时间：2013-04-12T13:34:29.813
> 
> 标签：javascript, jquery

我有以下语句来获取 iframe 窗口的 href 位置...

```
var mbackwindow = document.getElementById("mframe").contentWindow.location.href; 
```

根据我加载初始页面的方式，console.log(mbackwindow) 将显示我 `http://something/page/stuff.html`，或者`https://something/page/stuff.html`

从我的变量`mbackwindow,`中，我想获取“/page/stuff.html”，无论该位置是来自 http 还是 https。我如何通过 javascript / jquery 收集它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:37:14.513

使用以下`window.location`属性：

```
window.location.pathname 
```

因此，在您的情况下，请使用：

```
var mbackwindow = document.getElementById("mframe").contentWindow.location.pathname; 
```

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.location#Properties](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:39:39.917

而不是 href 使用路径名

```
document.getElementById("mframe").contentWindow.location.pathname 
```

# android - 渲染脚本多维数组

> ID：15972775
> 
> 赞同：2
> 
> 时间：2013-04-12T13:34:42.257
> 
> 标签：android, arrays, multidimensional-array, renderscript

是否有可能在 RenderScript for Android 中使用二维数组？分配只允许我将一个向量（一维）数组放入分配中。但我不知道如何生成二维数组。我[找到了关于这个主题的谷歌群组讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/aLq4BGXYe5w)，但是这个人没有收到任何答案。如果我想在 rs 文件中创建一个二维数组，我会得到一个错误：

```
int array[10][10]; 
```

将显示以下错误：

```
error: multidimensional arrays cannot be exported: 'array' 
```

正如我在渲染脚本文件中看到的那样，数组 2x2、3x3 和 4x4 基于一维数组。对我来说，这是非常严格的使用。因为对于数学的东西，也应该支持计算大矩阵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:43:41.340

马克是静态的。问题是没有干净的方法可以将它导出到 Java 反射文件。非导出数组应该没有问题。

RS 对未标记为静态的全局变量进行额外检查。作为一般规则，如果您不是从另一侧设置它们，请将它们设为静态。

# sublimetext2 - 如何使用键盘在 SublimeText 2 侧边栏上打开上下文菜单？

> ID：15972780
> 
> 赞同：7
> 
> 时间：2013-04-12T13:34:47.727
> 
> 标签：sublimetext2, text-editor, sublimetext

在 SublimeText 上，我们可以使用`Ctrl`+`0`将导航移动到侧边栏。无论如何，当您右键单击时，是否可以在带有键盘的项目上打开上下文菜单？

我在 Windows xp 和 SublimeText 2.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:02:50.917

以下是你想要的吗？添加以下键映射。并尝试`Ctrl`+`f`然后`Ctrl`+ `l`。

```
{ "keys": ["ctrl+f", "ctrl+l"], "command": "context_menu" } 
```

# sql - 如何查找部分重复项？

> ID：15972781
> 
> 赞同：1
> 
> 时间：2013-04-12T13:34:50.800
> 
> 标签：sql, duplicates

我有一个包含两个 NVARCHAR 列的表：源和目标。

**我想找到您可以找到具有相同源和包含当前行的目标的另一行的行。**

在下面的示例中，我想查找第 1 行和第 7 行：

*   第 1 行是第 3 行的“部分重复”
*   第 7 行是第 6 行的“部分重复”

下面是一段 SQL 代码：

```
CREATE TABLE #YourTable (ID int, [source] nvarCHAR(12), [target] nvarCHAR(12))

INSERT INTO #YourTable ([ID],[source],[target]) VALUES (1,'wordA','word1')
INSERT INTO #YourTable ([ID],[source],[target]) VALUES (2,'wordA','word2')
INSERT INTO #YourTable ([ID],[source],[target]) VALUES (3,'wordA','word3 ; word1')
INSERT INTO #YourTable ([ID],[source],[target]) VALUES (4,'wordB','word4')
INSERT INTO #YourTable ([ID],[source],[target]) VALUES (5,'wordC','word5')
INSERT INTO #YourTable ([ID],[source],[target]) VALUES (6,'wordD','word6 ; word7')
INSERT INTO #YourTable ([ID],[source],[target]) VALUES (7,'wordD','word7')

SELECT 
  [source],
  STUFF((
    SELECT ', ' + [target]
    FROM #YourTable 
    WHERE ([source] = Results.[source]) 
    FOR XML PATH (''))
  ,1,2,'') AS NameValues
FROM #YourTable Results
GROUP BY [source]
HAVING COUNT(1)>1

DROP TABLE #YourTable 
```

我的第一个想法是连接，但它并没有让我更接近解决方案......

我可以将我的数据导出到 CSV 并使用编程语言（python、C#、...）来隔离 ID，但我很想知道如何在 SQL 中完成它。

**最终目标是删除“部分重复”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:46:55.397

您的工作可以使用`exists`运算符完成：

```
delete
  from #yourtable   t1
 where exists (
          select 1
            from #yourtable t2
           where t2.source = t1.source
             and t2.target <> t1.target
             and t2.target like t1.target || '%'
       )
     ; 
```

# shell - 在 .sh 脚本中编辑 html 文件

> ID：15972788
> 
> 赞同：2
> 
> 时间：2013-04-12T13:35:13.320
> 
> 标签：shell, sh

我在 'docs/index.html' 有静态**html**文件，大约有 200 行代码。我需要使用 .sh 脚本在 2 个地方添加**html 标签。**我知道有命令**sed** 来编辑文件，但不知道它是如何使用的。

我需要添加

`<li><a class="reference" href="#front-end-docs">Front end documentation</a></li>`

之前

`<li><a class="reference internal" href="#indices-and-tables">`

或将我的标签附加到第**137行的末尾**

当然，在那之后保存文件:)

和另一个地方的类似标签。你能给我一个例子来说明如何使用这些特定的代码行来插入吗？

*谢谢*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:42:05.543

让我们看看我是否正确理解了您的问题：

```
$ cat testfile
one
two
<li><a class="reference internal" href="#indices-and-tables">
four
five

$ sed '3s|\(.*\)|<li><a class="reference" href="#front-end-docs">Front end documentation</a></li>\1|' testfile
one
two
<li><a class="reference" href="#front-end-docs">Front end documentation</a></li><li><a class="reference internal" href="#indices-and-tables">
four
five 
```

`3s`与有问题的行号交换，例如`137s`- 这告诉`sed`您希望替换发生在哪一行。您编写了*add before 或 append*，所以我不确定您是否真的打算将字符串附加或将其添加到行中，因此将 移动`\1`到您需要的任何地方。上面的命令*捕获*了您可以在替换字符串`3`中引用的整行。`\1`

一旦它提供了所需的输出，添加`-i`开关`sed`以覆盖原始文件。

# xamarin.ios - MonoTouch NSKeyedUnarchiver

> ID：15972792
> 
> 赞同：0
> 
> 时间：2013-04-12T13:35:17.210
> 
> 标签：xamarin.ios, xamarin, nskeyedarchiver

在 Monotouch 中寻求 NSKeyedUnarchiver 的帮助

在 SQLite blob 字段中记录字典项数组

**IOS代码**

```
NSData     *data = [[NSData alloc] initWithBytes:ptr length:size];
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
NSMutableArray *myArray = [unarchiver decodeObjectForKey:@"pricing"];
[unarchiver finishDecoding];
NSMutableArray *MutData = [[NSMutableArray alloc] init];
for (NSDictionary *obj in myArray) {
     NSMutableDictionary *element = [[NSMutableDictionary alloc] initWithDictionary:obj];
     [MutData addObject:element];
} 
```

尝试转换为 MonoTouch，到目前为止我有

**MonoTouch 代码**

```
NSData data = NSData.FromString(item.pricing);

NSKeyedUnarchiver unarchive =  new NSKeyedUnarchiver(data);
unarchive.DecodeObject();
unarchive.FinishDecoding();

NSMutableArray array = unarchive.GetNativeField("pricing") as NSMutableArray;
NSMutableArray mutArray = new NSMutableArray();

for (uint count=0; count < array.Count; count++)
{
    NSMutableDictionary mutDict = new NSMutableDictionary(array.ValueAt(count));
    mutArray.Add(mutDict);
} 
```

运行时产生和错误

> 未处理的托管异常：抛出了 Objective-C 异常。名称：NSInvalidArgumentException 原因：*** -[NSKeyedUnarchiver initForReadingWithData:]：无法理解的存档（0x62、0x70、0x6c、0x69、0x73、0x74、0x30、0x30）（MonoTouch.Foundation.MonoTouchException）在（包装器托管到本机）MonoTouch。 ObjCRuntime.Messaging:monotouch_IntPtr_objc_msgSend_IntPtr (intptr,intptr,intptr) 在 MonoTouch.Foundation.NSKeyedUnarchiver..ctor (MonoTouch.Foundation.NSData 数据) [0x00027] 在 /Developer/MonoTouch/Source/monotouch/src/Foundation/NSKeyedUnarchiver.g。 cs:88 堆栈跟踪：

从新的 NSKeyedUnarchiver(data) 行

有人可以建议 MonoTouch NSKeyedUnarchiver 的教程/示例吗？

两个人可以帮助解决这个错误吗？

最后，鉴于该项目是跨平台并在Android下工作（最终），这是最好的方式吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:21:23.577

问题可能与您创建初始 NSData 的方式有关。

[这](https://github.com/mono/maccore/blob/master/src/Foundation/NSData.cs#L66)就是 NSData.FromString 所做的，这看起来不像您在 Objetive-C 中所做的。

如果您在 C# 中有可用的指针，请尝试`NSData.FromBytes`改用。

# google-maps-sdk-ios - 在 Google IOS Maps SDK 中添加图片到位置

> ID：15972795
> 
> 赞同：-4
> 
> 时间：2013-04-12T13:35:20.737
> 
> 标签：google-maps-sdk-ios

如何将图片添加到我在 Google Maps IOS SDK 中有标记的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:54:30.450

只需将 的`icon`属性设置`GMSMarkerOptions`为 a `UIImage`。

这里有一个例子：

[https://developers.google.com/maps/documentation/ios/marker#customize_a_marker](https://developers.google.com/maps/documentation/ios/marker#customize_a_marker)

**更新：**

您可以使用 a`UIImagePickerController`来拍照。您需要调整返回的`UIImage`，以使其足够小以用作标记。

您可以使用 上的`myLocation`属性`GMSMapView`来获取要添加标记的当前位置。您需要在首次创建地图视图时设置`myLocationEnabled`为`YES`on ，以便跟踪您的当前位置。`GMSMapView``myLocation`

# c# - 自动播放处理程序：错误的剪贴板格式？

> ID：15972801
> 
> 赞同：2
> 
> 时间：2013-04-12T13:36:02.120
> 
> 标签：c#, windows, com, interop, autoplay

我正在尝试实现 Windows 自动播放处理程序；根据我找到的文档和示例，我应该查询`IDataObject`剪贴板`"Autoplay Enumerated IDList Array"`格式。

所以我试着做这样的事情：

```
[DllImport("user32.dll", SetLastError = true, EntryPoint = "RegisterClipboardFormatW")]
public static extern uint RegisterClipboardFormat([MarshalAs(UnmanagedType.LPWStr)] String format);

private const string CFSTR_AUTOPLAY_SHELLIDLISTS = "Autoplay Enumerated IDList Array";
private static readonly uint AUTOPLAY_SHELLIDLISTS = RegisterClipboardFormat(CFSTR_AUTOPLAY_SHELLIDLISTS);

...

public int Drop(IDataObject pDataObj, int grfKeyState, Point pt, ref DropEffect pdwEffect)
{
    var fmt = new FORMATETC
    {
        cfFormat = (short)AUTOPLAY_SHELLIDLISTS,
        ptd = IntPtr.Zero,
        dwAspect = DVASPECT.DVASPECT_CONTENT,
        lindex = -1,
        tymed = TYMED.TYMED_HGLOBAL
    };

    int hr = pDataObj.QueryGetData(ref fmt);
    if (hr == S_OK)
    {
        ...
    }
    return 0;
} 
```

但`QueryGetData`总是返回`S_FALSE`（并且`GetData`显然抛出）。因此，我尝试使用以下方法枚举可用格式`EnumFormatEtc`：~~它仅返回一种格式~~，它返回 4 种格式，其中没有一种与我传递给的格式相同`QueryGetData`（`cfFormat`值为 -16238、15、-16378 和 -16377）。如果我使用第一种格式`EnumFormatEtc`，而不是`AUTOPLAY_SHELLIDLISTS`，一切正常，但我认为这不是正确的方法......

有人可以解释发生了什么吗？我使用了错误的格式吗？

编辑：显然从返回的第一个格式`EnumFormatEtc`是`"Shell IDList Array"`; 显然我可以使用它，但是发生了`"Autoplay Enumerated IDList Array"`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:03:14.283

好的，我终于找到了一种*更*简单的方法，使用[`System.Windows.Forms.DataObject`](http://msdn.microsoft.com/en-us/library/system.windows.forms.dataobject.aspx)类：

```
 public int Drop(IDataObject pDataObj, int grfKeyState, Point pt, ref DropEffect pdwEffect)
    {
        try
        {
            var dataObj = new DataObject(pDataObj);
            if (dataObj.ContainsFileDropList())
            {
                StringCollection files = dataObj.GetFileDropList();

                // Do something with files...

            }
            return 0;
        }
        catch(Exception ex)
        {
            Trace.WriteLine(string.Format("Error: {0}", ex));
            return 1;
        }
    } 
```

不需要任何低级 COM 互操作（`IDropTarget`接口声明除外）...

# powerbuilder - 嵌套数据窗口需要对特定报表对象进行动态排序

> ID：15972809
> 
> 赞同：0
> 
> 时间：2013-04-12T13:36:31.040
> 
> 标签：powerbuilder

我们如何在特定报表对象的嵌套 DataWindow 中动态排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:27:28.817

我认为这会解决你的问题。首先，如果您有一个复合 DataWindow（其中包含更多 DataWindow），则必须首先获取“子”DataWindow（这是复合 DataWindow 中的 DataWindow 之一）。在你得到这个参考之后，你可以像一个普通的 DataWindow 一样对它进行排序。假设您有一个名为 dw_report 的复合 DataWindow

```
long    ll_ret  = -7
string  ls_sort
DataWindowChild dwc_child

dw_report.GetChild("myChildDW", dwc_child)

dwc_child.SetTransObject(SQLCA)
dwc_child.Retrieve()

ls_sort = "Column1 ASC"
ll_ret  = dwc_child.SetSort(ls_sort)
ll_ret  = dwc_child.Sort() 
```

让我们详细看看：

long ll_ret = -7 字符串 ls_sort DataWindowChild dwc_child

在这里，您可以获得对孩子的引用。重要的是，myChildDW 是子数据窗口的名称，而不是报告名称或数据对象

```
dw_report.GetChild("myChildDW", dwc_child) 
```

如果您已经检索了数据，则不需要这 2 行

```
dwc_child.SetTransObject(SQLCA)
dwc_child.Retrieve() 
```

假设您有一个列名：Column1，并且您想对其进行升序排序

```
ls_sort = "Column1 ASC"
ll_ret  = dwc_child.SetSort(ls_sort)
ll_ret  = dwc_child.Sort() 
```

我希望这会有所帮助 :) 祝你有美好的一天！

兄弟。加博尔

# c++ - ->* 运算符应在何时何地重载？

> ID：15972813
> 
> 赞同：0
> 
> 时间：2013-04-12T13:36:44.373
> 
> 标签：c++, operator-overloading

我是 C++ 新手，正在学习它，在学习运算符重载的同时，我知道我们也可以重载 `->*`，在什么情况下我们需要它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:22:27.427

C++ 运算符重载是一项有用且非常强大的功能，但它也很容易被误用并导致灾难性后果。

经验法则是遵循毫不意外的原则。也就是说，您的运算符重载的语义应该与内置版本的语义相匹配。*（是的，有一些例外，例如特定领域的语言、boost::spirit 等，但这些都是孤立的事务）。*

让我们将此应用于`->*`. 通常可以使用指针作为左操作数和指向成员的指针作为右操作数来调用此运算符。因此，您应该只在您想要模拟此类语义的情况下重载它。假设您正在创建一个类似指针的类，可能是一个句柄或一个特殊的智能指针（当其中的那些`std`不适用于您的情况时）。然后，您可能希望`->*`为您的类重载，以使其尽可能多地用作常规指针。

例子：

```
template <typename T>
class LoggingPointer
{
  T *ptr_;
  std::ostream &log_;

public:
  T& operator* () const {
    log_ << "Deref";
    return *ptr_;
  }

  T* operator-> () const {
    log_ << "Access";
    return ptr_;
  }

  template <typename Mem>
  Mem& operator->* (Mem T::*arg) const {
    log_ << "Member access";
    return ptr_->*arg;
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:52:04.130

我们使用运算符的一个地方`->*`是我们在操作方法指针时。

由于方法必须知道在哪个对象中调用了她，我们可以这样做：

```
class     A
{
    public:
          int    some_integer;

          void   add_then_print(int value)
          {
                  this->some_integer = this->some_integer + value;
                  std::cout << "My integer now: " << this->some_integer;
          }
};

typedef void    (A::*method_pointer)(int);
int    main(void)
{
    A*                   my_first_class_a = new A;
    A*                   my_second_class_a = new A;
    method_pointer       method = &A::add_then_print;         

    (my_first_class_a->*(method))(10);
    (my_second_class_a->*(method))(12);
    return 0;
} 
```

在这种情况下，您可以看到该`add_then_print`方法已保存到`method`.

但是为了知道`this`中代表什么`add_then_print`，当我们使用方法指针调用方法时，语法是这样的： `(object->*(method_pointer))(parameters_to_the_method);`

在某些情况下，您可能希望重载此运算符以执行其他操作，而不是仅使用给定参数或您想要的任何参数调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:06:20.180

这可能不是您正在寻找的答案，但您需要它的唯一情况是让项目中的其他人感到困惑。这包括你在路上的两周。所以请不要。并非所有可能做的事情都是实际实施的好主意。

# amazon-web-services - 创建自动缩放网络服务器组添加到现有 elb

> ID：15972814
> 
> 赞同：3
> 
> 时间：2013-04-12T13:36:44.340
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing, autoscaling, amazon-cloudformation

我有一个已经配置了端口和 SSL 证书等的弹性负载均衡器，并且 Route 53 设置为将我的站点的流量路由到它。

我想知道是否有一个示例 cloudFormation 模板可以创建一个自动缩放的 ec2 实例组，其中每个实例都被添加到这个现有的负载均衡器或从中删除。

我已经在网上四处寻找示例 - 下面的那个似乎几乎是我需要的，但它的问题（以及所有其他似乎使用这个变体的）是它假设你想要创建一个新的负载均衡器. 我不。

[https://s3.amazonaws.com/cloudformation-templates-us-east-1/AutoScalingMultiAZWithNotifications.template](https://s3.amazonaws.com/cloudformation-templates-us-east-1/AutoScalingMultiAZWithNotifications.template)

有可能按照我的建议去做吗？有人有例子吗？

我的 CloudFormation 脚本如下所示（我删除了实际的服务器包配置部分）。这成功创建了一个新实例，但它不会添加到负载均衡器“load4”。我可以手动将主机添加到负载均衡器，但这显然违背了目的。

```
{
"AWSTemplateFormatVersion" : "2010-09-09",

"Description" : "Create an Auto-scaling group that will attach to existing load balancer and inhereit existing security groups.",

"Parameters" : {
"KeyName" : {
    "Description" : "mykeyname",
    "Type" : "String" 
},

"InstanceType" : {
    "Type" : "String", 
    "Default" : "m1.small", 
    "AllowedValues" : [ "m1.small", "m1.medium", "m1.large", "m1.xlarge", "m2.xlarge", "m2.2xlarge", "m2.4xlarge", "c1.xlarge", "cc1.4xlarge" ],
    "Description" : "EC2 instance type (e.g. m1.large, m1.xlarge, m2.xlarge)"
},
"SpotPrice": {
    "Description": "Spot price for application AutoScaling Group",
    "Type": "Number",
    "MinValue" : ".03"
},
"MinInstances" : {
  "Description" : "The minimum number of Workers",
  "Type" : "Number",
  "MinValue" : "0",
  "Default"  : "0",
  "ConstraintDescription" : "Enter a number >=0"
},

"MaxInstances" : {
  "Description" : "The maximum number of Workers",
  "Type" : "Number",
  "MinValue" : "1",
  "Default"  : "4",
  "ConstraintDescription" : "Enter a number >1"
},

"OperatorEmail": {
  "Description": "Email address to notify if there are any scaling operations",
  "Type": "String"
}
},

"Mappings" : {
"AWSInstanceType2Arch" : {
  "t1.micro"    : { "Arch" : "64" },
  "m1.small"    : { "Arch" : "64" },
  "m1.medium"   : { "Arch" : "64" },
  "m1.large"    : { "Arch" : "64" },
  "m1.xlarge"   : { "Arch" : "64" },
  "m2.xlarge"   : { "Arch" : "64" },
  "m2.2xlarge"  : { "Arch" : "64" },
  "m2.4xlarge"  : { "Arch" : "64" },
  "m3.xlarge"   : { "Arch" : "64" },
  "m3.2xlarge"  : { "Arch" : "64" },
  "c1.medium"   : { "Arch" : "64" },
  "c1.xlarge"   : { "Arch" : "64" },
  "cc1.4xlarge" : { "Arch" : "64HVM" },
  "cc2.8xlarge" : { "Arch" : "64HVM" },
  "cg1.4xlarge" : { "Arch" : "64HVM" }
},

"AWSRegionArch2AMI" : {
  "us-east-1"      : { "32" : "ami-31814f58", "64" : "ami-1b814f72", "64HVM" : "ami-0da96764" },
  "us-west-2"      : { "32" : "ami-38fe7308", "64" : "ami-30fe7300", "64HVM" : "NOT_YET_SUPPORTED" },
  "us-west-1"      : { "32" : "ami-11d68a54", "64" : "ami-1bd68a5e", "64HVM" : "NOT_YET_SUPPORTED" },
  "eu-west-1"      : { "32" : "ami-973b06e3", "64" : "ami-953b06e1", "64HVM" : "NOT_YET_SUPPORTED" },
  "ap-southeast-1" : { "32" : "ami-b4b0cae6", "64" : "ami-beb0caec", "64HVM" : "NOT_YET_SUPPORTED" },
  "ap-southeast-2" : { "32" : "ami-b3990e89", "64" : "ami-bd990e87", "64HVM" : "NOT_YET_SUPPORTED" },
  "ap-northeast-1" : { "32" : "ami-0644f007", "64" : "ami-0a44f00b", "64HVM" : "NOT_YET_SUPPORTED" },
  "sa-east-1"      : { "32" : "ami-3e3be423", "64" : "ami-3c3be421", "64HVM" : "NOT_YET_SUPPORTED" }
}
},

"Resources" : {
"NotificationTopic": {
  "Type": "AWS::SNS::Topic",
  "Properties": {
    "Subscription": [ {
        "Endpoint": { "Ref": "OperatorEmail" },
        "Protocol": "email" } ]
  }
},

"WebServerGroup" : {
  "Type" : "AWS::AutoScaling::AutoScalingGroup",
  "Properties" : {
    "AvailabilityZones" : { "Fn::GetAZs" : ""},
    "LaunchConfigurationName" : { "Ref" : "LaunchConfig" },
    "MinSize" : "0",
    "MaxSize" : "4",
    "LoadBalancerNames" : [ "load4" ],             
    "NotificationConfiguration" : {
      "TopicARN" : { "Ref" : "NotificationTopic" },
      "NotificationTypes" : [ "autoscaling:EC2_INSTANCE_LAUNCH","autoscaling:EC2_INSTANCE_LAUNCH_ERROR","autoscaling:EC2_INSTANCE_TERMINATE", "autoscaling:EC2_INSTANCE_TERMINATE_ERROR"]
    }
  }
},

"CfnUser" : {
    "Type" : "AWS::IAM::User",
    "Properties" : {
        "Path": "/",
        "Policies": [ {
            "PolicyName": "root",
            "PolicyDocument": { "Statement": [ {
                "Effect":"Allow",
                "Action":"cloudformation:DescribeStackResource",
                "Resource":"*"
            } ] }
        } ]
    }
},

"HostKeys" : {
    "Type" : "AWS::IAM::AccessKey",
    "Properties" : {
        "UserName" : { "Ref" : "CfnUser" }
    }
},

"LaunchConfig" : {
  "Type" : "AWS::AutoScaling::LaunchConfiguration",
  "Metadata" : {
    "Comment" : "Create a single webserver",
    "AWS::CloudFormation::Init" : {
      "config" : {
        "packages" : {
            "yum" : {

            }
        },
        "files" : {

        }
      }
    }
  },
  "Properties" : {
    "KeyName" : { "Ref" : "KeyName" },
    "SpotPrice" : { "Ref" : "SpotPrice" },
    "ImageId" : { "Fn::FindInMap" : [ "AWSRegionArch2AMI", { "Ref" : "AWS::Region" },
                                      { "Fn::FindInMap" : [ "AWSInstanceType2Arch", {     "Ref" : "InstanceType" },
                                      "Arch" ] } ] },
    "SecurityGroups" : [ "webserver" ],
    "InstanceType" : { "Ref" : "InstanceType" },
    "UserData"       : { "Fn::Base64" : { "Fn::Join" : ["", [
      "#!/bin/bash\n",
      "yum update -y aws-cfn-bootstrap\n",
      "# Install the Worker application\n",
      "/opt/aws/bin/cfn-init ",
      "         --stack ", { "Ref" : "AWS::StackId" },
      "         --resource LaunchConfig ",
      "         --configset ALL",
      "         --region ", { "Ref" : "AWS::Region" }, "\n"
    ]]}}        
  }
},

"WorkerGroup" : {
  "Type" : "AWS::AutoScaling::AutoScalingGroup",
  "Properties" : {
    "AvailabilityZones" : { "Fn::GetAZs" : ""},
    "LaunchConfigurationName" : { "Ref" : "LaunchConfig" },
    "MinSize" : { "Ref" : "MinInstances" },
    "MaxSize" : { "Ref" : "MaxInstances" }
  }
},

"WebServerScaleUpPolicy" : {
  "Type" : "AWS::AutoScaling::ScalingPolicy",
  "Properties" : {
    "AdjustmentType" : "ChangeInCapacity",
    "AutoScalingGroupName" : { "Ref" : "WorkerGroup" },
    "Cooldown" : "60",
    "ScalingAdjustment" : "1"
  }
},
"WebServerScaleDownPolicy" : {
  "Type" : "AWS::AutoScaling::ScalingPolicy",
  "Properties" : {
    "AdjustmentType" : "ChangeInCapacity",
    "AutoScalingGroupName" : { "Ref" : "WorkerGroup" },
    "Cooldown" : "60",
    "ScalingAdjustment" : "-1"
  }
},  ...

  "WorkerThreadHigh": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
      "AlarmDescription": "Scale-up if Worker Thread Vs. Idle Percent > 80% for 10min",
      "MetricName": "PctActiveWorkers",
      "Namespace": "EC2",
      "Statistic": "Average",
      "Period": "300",
      "EvaluationPeriods": "2",
      "Threshold": "80",
      "AlarmActions": [ { "Ref": "WebServerScaleUpPolicy" } ],
      "Dimensions": [
        {
          "Name": "AutoScalingGroupName",
          "Value": { "Ref": "WebServerGroup" }
        }
      ],
      "ComparisonOperator": "GreaterThanThreshold"
    }
  },
  "WorkerThreadLow": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
      "AlarmDescription": "Scale-down if CPU < 50% for 10 minutes",
      "MetricName": "PctActiveWorkers",
      "Namespace": "EC2",
      "Statistic": "Average",
      "Period": "300",
      "EvaluationPeriods": "2",
      "Threshold": "50",
      "AlarmActions": [ { "Ref": "WebServerScaleDownPolicy" } ],
      "Dimensions": [
        {
          "Name": "AutoScalingGroupName",
          "Value": { "Ref": "WebServerGroup" }
        }
      ],
      "ComparisonOperator": "LessThanThreshold"
    }
  }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:50:49.323

参数[LoadBalancerNames](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html#cfn-as-group-loadbalancernames)仅表示*与此 Auto Scaling 组关联的负载均衡器列表*。您引用的示例[AWS CloudFormation](http://aws.amazon.com/cloudformation/)模板（以及我知道的所有其他示例）已将其配置为[LoadBalancer](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html)资源的结果，如下所示：

```
"LoadBalancerNames": [
    {
        "Ref": "ElasticLoadBalancer"
    }
], 
```

[Ref](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html)函数的结果在[LoadBalancer](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-elb.html)底部的*Return Values*部分中定义：

> 当将此资源的逻辑 ID 提供给 Ref 内部函数时，它会返回资源名称。例如，mystack-myelb-1WQN7BJGDB5YQ。

这只是[AWS 管理控制台](http://aws.amazon.com/console/)中显示的*负载均衡器名称*，因此您可以通过直接提供其名称来使用在 CloudFormation 之外创建的任何[弹性负载均衡器](http://aws.amazon.com/elasticloadbalancing/)，例如：

```
"LoadBalancerNames": [ "existing-load-balancer-1" ], 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T14:29:02.047

当添加到“类型”资源的配置中时，我可以确认以下工作：“AWS::AutoScaling::AutoScalingGroup”：

```
"LoadBalancerNames" : [ "YourELBNameHere" ] 
```

或者，如果您将名称作为参数，

```
"LoadBalancerNames" : [ {"Ref" : "YourELBParameterNameHere"} ] 
```

*   如果您终止堆栈，则由 ASG 创建的实例将添加到 ELB 或在 ELB 中注册，并自动删除/取消注册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:26:05.457

你不能将两者解耦。我已经通过亚马逊支持验证了一个不相关的用例。糟透了。

这是我们的讨论。[https://forums.aws.amazon.com/thread.jspa?messageID=362467蟣](https://forums.aws.amazon.com/thread.jspa?messageID=362467&#362467)亚马逊最后没有回复他们的说法是，我们不支持。

**更新**我下面的答案不再正确。亚马逊已添加此功能。查看其他讨论。

# php - 在表格单元格内放置一个提交按钮

> ID：15972816
> 
> 赞同：0
> 
> 时间：2013-04-12T13:36:49.663
> 
> 标签：php, mysql, button, html-table

从数据库检索数据后，我试图在我的表中放置一个按钮，但是在创建按钮时遇到了问题。

这是我创建按钮的代码：

```
while($row = mysql_fetch_array($query))
{
    Print "<tr>"; 
    Print "<td><input type="submit" name="asc_sort" value-"Submit">sort</input></td>";
    Print "<td>high:</td> <td>".$row['invention_title'] . "</td>"; 
    Print "<td>lower:</td> <td>".$row['invention-title'] . " </td></tr>"; 
}
Print "</table>"; 
```

但我有一个错误

> 语法错误，第 35 行 C:\xampp\htdocs\fak_ict1999\showDB.php 中的意外 T_CONSTANT_ENCAPSED_STRING

第 35 行是

```
 Print "<td><input type="submit" name="asc_sort" value-"Submit">sort</input></td>"; 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:38:32.833

您需要转义打印语句中的引号，例如，

```
print "<td><input type=\"submit\" name=\"asc_sort\" value=\"Submit\">sort</input></td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:38:42.870

尝试更改您在第 35 行使用的引号类型或转义双引号。

```
Print '<td><input type="submit" name="asc_sort" value-"Submit">sort</input></td>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:40:26.487

在第二个打印行中将封闭的引号更改为撇号：

```
while($row = mysql_fetch_array($query))
{
    Print "<tr>"; 
    Print '<td><input type="submit" name="asc_sort" value="Submit">sort</input></td>';
    Print "<td>high:</td> <td>".$row['invention_title'] . "</td>"; 
    Print "<td>lower:</td> <td>".$row['invention-title'] . " </td></tr>"; 
}
Print "</table>"; 
```

或转义内部引号：

```
while($row = mysql_fetch_array($query))
{
    Print "<tr>"; 
    Print "<td><input type=\"submit\" name=\"asc_sort\" value=\"Submit\">sort</input></td>";
    Print "<td>high:</td> <td>".$row['invention_title'] . "</td>"; 
    Print "<td>lower:</td> <td>".$row['invention-title'] . " </td></tr>"; 
}
Print "</table>"; 
```

另外，请注意您在提交按钮上犯的错误，应该`=`代替`-`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:38:49.810

**第一：**了解[令牌](http://php.net/manual/en/tokens.php)，因为它将让您深入了解导致语法错误的原因以及如何自己处理它们，而不是在这里询问。第二：

改变这个

```
"<td><input type="submit" name="asc_sort" value-"Submit">sort</input></td>"; 
```

对此

```
"<td><input type=\"submit\" name=\"asc_sort\" value=\"Submit\">sort</input></td>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:39:01.210

你的行应该像`print "<td><input type=\"submit\" name=\"asc_sort\" value=\"Submit\">sort</input></td>";`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T13:39:16.507

将while循环更改为此

```
while($row = mysql_fetch_array($query))
{
    Print "<tr>"; 
    Print "<td><input type='submit' name='asc_sort' value='Submit'>sort</input></td>";
    Print "<td>high:</td> <td>".$row['invention_title'] . "</td>"; 
    Print "<td>lower:</td> <td>".$row['invention-title'] . " </td></tr>"; 
}
Print "</table>"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T13:38:13.477

你必须从`"`里面`\"`逃走`"`。或者您可以使用`'`引用字符串然后`"`在内部使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-12T13:39:44.337

您需要转义双引号或使用单引号。你的行应该是：

```
Print '<td><input type="submit" name="asc_sort" value="Submit">sort</input></td>'; 
```

这是代码突出显示真正有用的示例。看看你的例子，你可以看到“提交”这个词是黑色的，而该行的其余部分是红色的。那是因为 PHP 认为它不是您正在打印的字符串的一部分。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-12T13:39:56.090

值应该有一个 = 不是 -，如前所述，尝试在外部使用双引号，在内部使用单引号。

```
value="Submit" 
```

# websphere - Websphere 资源适配器，自定义属性不可编辑

> ID：15972817
> 
> 赞同：1
> 
> 时间：2013-04-12T13:36:54.670
> 
> 标签：websphere, websphere-7

在 Websphere 7 外部安装资源适配器（自定义资源适配器）

打开资源适配器自定义属性，下图

![在此处输入图像描述](https://i.stack.imgur.com/CYxs3.png)

尝试编辑主机属性

![在此处输入图像描述](https://i.stack.imgur.com/xyQpI.png)

但该字段不可编辑。有什么理由吗？我需要通过控制台修改这些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:20:14.983

我找到了解决方案。而不是编辑资源适配器的自定义属性。我打开了与适配器关联的 J2C 连接工厂的自定义属性，从那里我可以修改属性，这对我有用。

截屏 ![在此处输入图像描述](https://i.stack.imgur.com/Jh1w7.png) ![在此处输入图像描述](https://i.stack.imgur.com/0TvuM.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:55:27.753

您似乎没有对 Websphere 配置进行更改的管理权限。

为此，您的用户 ID 至少需要分配**配置者角色** 。

您应该与您的 Websphere 管理员沟通以获取此权限。

# apache-flex - 为 Flex 项目创建 actionscript 应用程序文件

> ID：15972818
> 
> 赞同：0
> 
> 时间：2013-04-12T13:36:58.697
> 
> 标签：apache-flex, actionscript

我正在尝试使用`actionscript`应用程序文件而不是`mxml`文件创建 Flex 项目。

我只是使用这段代码：

```
package
{   

import spark.components.Application;

    public class Test extends Application
    {       
        public function Test(){
            super();    
        }       
    }
} 
```

但我收到此错误：

```
TypeError: Error #1007: Instantiation attempted on a non-constructor.
at mx.preloaders::Preloader/initialize()[E:\dev\4.y\frameworks\projects\framework\src\mx\preloaders\Preloader.as:261]
at mx.managers::SystemManager/http://www.adobe.com/2006/flex/mx/internal::initialize()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2097]
at mx.managers::SystemManager/initHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2582] 
```

请问如何为 Flex 项目创建一个完整的 AS 应用程序类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:13:44.343

In a Flex Project; you're main application file has to be MXML. Everything else can be ActionScript, though.

# django - / 不支持的操作数类型：“QueryDict”和“float”

> ID：15972820
> 
> 赞同：0
> 
> 时间：2013-04-12T13:37:04.380
> 
> 标签：django, django-forms

我收到以下错误：

```
unsupported operand type(s) for /: 'QueryDict' and 'float' 
```

'amount' 中传递的值是 4.90，所以我很困惑为什么它不能 /。

```
class OrderForm(forms.Form):
    amount = forms.FloatField()
    credits = forms.FloatField()

 def __init__(self, amount, *args, **kwargs):
    super(OrderForm, self).__init__(*args, **kwargs)
    self.fields['amount'].widget = forms.HiddenInput()
    self.fields['amount'].initial = amount
    total_credits = credit_total(amount)

    self.fields['credits'].widget = forms.HiddenInput()
    self.fields['credits'].initial = total_credits 
```

我曾尝试使用 float() 但这不起作用。

校准函数

```
def credit_total(amount):

    credit_total = amount / 0.049
    return credit_total 
```

我必须注意，在我第一次加载表单时，它可以工作......

```
 cost_amount = float(request.POST['amount'])
        form = OrderForm(amount=cost_amount) 
```

但是，当我再次填写表单时，在发布时它不会....

```
if request.method == 'POST':
        form = OrderForm(request.POST) 
```

但是帐户现在在 POST 请求中。

也许我需要做这样的事情......

```
 def __init__(self, amount=None, *args, **kwargs):
        super(OrderForm, self).__init__(*args, **kwargs)

        if amount is none then make amount from args = ammount???? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:58:01.440

问题出在你的`def __init__(self, amount, *args, **kwargs):`. 这在很多地方都没有写，但是您不能按名称将自己的参数添加到表单`__init__`方法的参数列表中。

不过不用担心，一切都不会丢失。你想要的是这样的：

```
def __init__(self, *args, **kwargs):
    amount = kwargs.pop('amount', None)
    super(OrderForm, self).__init__(*args, **kwargs)
    self.fields['amount'].widget = forms.HiddenInput()
    self.fields['amount'].initial = amount
    total_credits = credit_total(amount)

    self.fields['credits'].widget = forms.HiddenInput()
    self.fields['credits'].initial = total_credits 
```

唯一的事情是，在实例化表单时需要小心。您将需要以命名 arg 的形式提供金额，我看到您已经在这样做了。

原因是当您打电话时，`form = OrderForm(request.POST)`您将 POST QueryDict 分配给`amount`arg。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:58:48.863

当您从 填充表单时`request.POST`，您将传递整个`request.POST`as `amount`，这是表单的第一个参数`__init__`。你想把它作为`data`. 你仍然需要传递一些东西给`amount`：

```
if request.method == 'POST':
    amount = float(request.POST.get('amount', 0))
    OrderForm(amount=amount, data=request.POST) 
```

我认为您最好在表格之外计算初始数据：

```
class OrderForm(forms.Form):
    amount = forms.FloatField(widget=forms.HiddenInput)
    credits = forms.FloatField(widget=forms.HiddenInput)

...

form = OrderForm(initial={'amount': amount, 'credits': credit_total(amount)})

...

if request.method == 'POST':
     form = OrderForm(data=request.POST) 
```

`request.POST`当方法不是 POST 时，您如何获得金额？我希望你已经发布了你的整个观点。

# asp.net - 如何从 Reporting Services 身份验证扩展中获取详细错误

> ID：15972821
> 
> 赞同：0
> 
> 时间：2013-04-12T13:37:06.437
> 
> 标签：asp.net, sql-server, reporting-services, reportviewer

我正在为 SQL Server Reporting Services 2008 R2 开发身份验证扩展。它适用于使用浏览器访问报表管理器或报表服务，但尝试使用`ReportViewer`控件在 aspx 页面中打开报表会出现以下错误：

身份验证扩展引发意外异常或返回无效值: 。(rsAuthenticationExtensionError) 获取联机帮助 有关此错误的详细信息，请导航到本地服务器计算机上的报告服务器，或启用远程错误

是否有可能获得发生错误的详细信息？我在本地服务器机器上运行它，并且自定义错误在 Report Server 的 web.config 中关闭。也没有任何内容写入应用程序事件日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:56:19.807

根据错误消息，有关这些消息中的更多信息，您需要为报告服务器启用远程错误：

[启用远程错误](http://msdn.microsoft.com/en-us/library/aa337165%28v=sql.100%29.aspx)。

您没有提及您使用的版本，因此请确保在 MSDN 页面上选择正确的版本。

启用此功能后，您的错误消息将更加详细。不过，不确定是否需要重新启动 SSRS 服务。

# asp.net-mvc - 单元测试 nHibernate 存储库 - 如何添加到存储库？

> ID：15972822
> 
> 赞同：1
> 
> 时间：2013-04-12T13:37:06.443
> 
> 标签：asp.net-mvc, nhibernate, nunit

我刚刚收到一个未完成的 asp.Net MVC 3 / nHibernate 项目来修复和完成，我正在尝试让已经存在的 nUnit 单元测试通过。

存储库测试是导致问题的原因。我想要做的只是向测试存储库添加几个项目，但如果我能弄清楚如何做到这一点，我会很高兴。情况如下：

```
[Test]
public void CanGetAllThings()
{
    ServiceLocatorInitializer.Init();

    ThingRepository thingRepository = new ThingRepository(); // ThingRepository inherits from NHibernateRepository<T>, IRepository<T>

    Thing thingA = new Thing { /*initialization values*/ };
    Thing thingB = new Thing { /*initialization values*/ };

    componentAuthorizationRepository.DbContext.BeginTransaction(); 

    ThingRepository.Save(ThingA); // Doesn't appear to be doing anything
    ThingRepository.Save(ThingB);

    componentAuthorizationRepository.DbContext.CommitTransaction(); 

    ThingRepository.GetAll().ShouldNotBeNull(); // Passes
    ThingRepository.GetAll().Count.ShouldEqual(2); // Fails with actual value 0 
} 
```

我应该使用模拟框架来创建内存数据库吗？对于这样一个简单的测试来说，这似乎有点过头了，应该只有一个 Repository.Add() 或 Repository.Save() 方法，但我显然在这里遗漏了一些重要的东西。

我是一名初级开发人员，不熟悉 MVC、nHibernate 和单元测试，所以我什至不清楚我的知识差距在哪里，所以我可以研究！任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:10:13.647

由于您已注释掉事务，因此您的 Save() 操作未提交。您需要以某种方式将事务管理添加到您的存储库，或者有一个工作单元来为您管理它。

或者，如果您想要快速而肮脏，您需要一种在存储库的 ISession 上调用 Flush() 的方法。

# spring - 有没有办法覆盖组件扫描发现的 bean？

> ID：15972824
> 
> 赞同：17
> 
> 时间：2013-04-12T13:37:16.030
> 
> 标签：spring, dependency-injection, spring-3, spring-annotations

我有一个java配置类直接提供fooBean和通过组件扫描提供barBean。

```
@Configuration
@ComponentScan(basePackages = { "com.blah" })
public class Config {

    @Bean
    public FooBean fooBean {
        return new FooBean();
    }
} 
```

我想在测试用例中重用它，我需要用模拟替换bean：

```
@Configuration
@Import(Config.class)
public class TestConfig {

    @Bean
    public FooBean fooBean {
        return new FooBeanMock();
    }

    @Bean
    public BarBean barBean {
        return new BarBeanMock();
    }
} 
```

（这里重用 Config 没有多大意义，但在现实生活中我有 1000 个 Bean，我只需要模拟几个）

这里 fooBean 被覆盖，但 barBean 没有。

```
Skipping loading bean definition for %s: a definition for bean " + "'%s' already exists. This is likely due to an override in XML. 
```

还有一个官方问题： [https ://jira.springsource.org/browse/SPR-9682](https://jira.springsource.org/browse/SPR-9682)

有人知道覆盖组件扫描发现的 bean 的任何解决方法吗？

考虑到 bean 是遗留代码并且不能被修改，并且它的依赖项没有设置器（私有属性 + @Resource）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T14:41:31.780

尝试跳过不必要的 bean：

```
@ComponentScan(basePackages = { "com.blah" }, excludeFilters = @Filter({UnnecessaryBean1.class, UnnecessaryBean2.class})) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-23T08:25:56.413

是的，您可以覆盖组件扫描发现的 bean。我在测试用例中这样做。我使用 XML 配置，但我认为 Java 配置会非常相似。

春天.xml：

```
 <context:component-scan base-package="cz.backend"/> 
```

MyBeanImpl.java

```
@Component("myBean")
public class MyBeanImpl implements MyBean {
   //Something
} 
```

**在测试文件夹中，我有：**

弹簧测试.xml：

```
<import resource="classpath:/spring.xml"/>
<bean id="myBean" class="cz.backend.MyBeanTestMock"/> 
```

MyBeanTestMock.java：

```
public class MyBeanTestMock implements MyBean {
    //Something
} 
```

覆盖 bean 的名称必须相同。

# formatting - 公式字段的水晶报表格式问题

> ID：15972825
> 
> 赞同：0
> 
> 时间：2013-04-12T13:37:17.463
> 
> 标签：formatting, crystal-reports

我正在写一份具有以下结构的水晶报告：

```
Group 1: School
    Group 2: Student
        Group 3: Category
            Details 
```

我正在尝试将详细信息拆分为带有公式字段的两个单独的列。这工作正常，除了一个公式字段打印在另一个下面，我不知道如何让它们在同一级别上打印。

它看起来像这样：

```
Category A       Category B
detail 1
detail 2
                detail 1
                detail 2
                detail 3 
```

我希望它看起来像这样：

```
Category A       Category B
detail 1         detail 1
detail 2         detail 2
                 detail 3 
```

我觉得我错过了一些非常简单的东西，任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:33:15.457

不幸的是，这不是一件简单的事情。问题是，由于数据是按类别分组的，它会在下一个类别之前显示一个类别的所有内容。即使您按类别取出分组，您仍然会得到如下数据：

```
Category A      Category B
detail 1
                detail 1
                detail 2
detail 2
                detail 3 
```

有一种方法可以完全按照您想要的方式获得它，但是每个类别下的整个结果集将被放入每个类别的一个字段中。如果您在屏幕上打印或查看它，这不是问题，但导出到 Excel 会将每一列放入一个单元格中；像这样：

```
Category A      Category B
+---------+     +---------+
|detail 1 |     |detail 1 |
|detail 2 |     |detail 2 |
+---------+     |detail 3 |
                +---------+ 
```

为此，我们将创建基本上是一个文本运行总计字段（或其中两个）。首先，报告标题中的初始化程序：

```
WhilePrintingRecords;
Global StringVar CatA := "";
Global StringVar CatB := "";
""; //print nothing on screen 
```

然后，详细信息部分中的更新程序。详细信息部分本身实际上会被隐藏（**而不是**抑制）。

```
WhilePrintingRecords;
Global StringVar CatA;
Global StringVar CatB;

If {Table.Category} = "Category A"
    //Chr(10) + Chr(13) is a return/newline
    Then CatA := CatA + Chr(10) + Chr(13) + {Table.Detail};

If {Table.Category} = "Category B"
    Then CatB := CatB + Chr(10) + Chr(13) + {Table.Detail};

""; //print nothing 
```

最后，在完成与类别相关的所有内容后（我假设在*第 2 组：学生*页脚），打印全局变量的结果。因此，对于 A 类：

```
WhilePrintingRecords;
Global StringVar CatA; 
```

您必须确保结果字段设置为`Can grow`.

# jquery - jquery post返回整个html页面代码

> ID：15972826
> 
> 赞同：0
> 
> 时间：2013-04-12T13:37:18.737
> 
> 标签：jquery, codeigniter, jquery-post

**脚本：**

```
$.post("<?php echo base_url(); ?>home/comment?"+$("#MYFORM").serialize(), {

                    }, function(response){

                    if(response.msg == '1')
                    {
                        .....
                    }
                    else
                    {
                                            ....
                    }
            }, "json"
            ); 
```

**行动：**

```
function comment()
{   
    echo json_encode("msg=".$this->homemodel->comments());          
} 
```

**问题：** homemodel->comments 返回 1 或 0 问题是在萤火虫的响应面板中，它显示了动作的回声值加上整个 html 页面。因此我不能将 response.msg 的值设为 1 或 0。这段代码有什么问题。我必须更改什么以仅将评论操作上的值回显返回到帖子 jquery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:54:16.650

我不确定你的事情是如何工作的，甚至不知道它应该做什么，但是当我使用 $.post（或 ajax）时，我通常会在 post 数据中添加一个额外的参数（ajax=1），以便我当它是一个ajax调用时，可以知道并只做我想要的回声。所以基本上，在服务器端，它可能看起来像这样：

```
if (isset($_POST['ajax']) && $_POST['ajax']) {
   echo json_encode($anArray);
   die()
} 
```

die() 函数防止页面的其余部分被回显。这非常有用，因为您可以创建一个文件（我们将其称为 inc.ajax.php），该文件包含在任何代码被回显之前（比如说在 index.php 的标题或第一行中），您可以使用它作为控制器。所以你可以添加一个操作符，inc.ajax.php 将成为你的 ajax 控制器。收回之前的例子：

```
if (isset($_POST['ajax']) && $_POST['ajax']) {
   $operator = $_POST['operator'];
   switch ($operator) {
     case 'upload':
        $obj->upload();
        echo json_encode($obj,true);
     break;
     default:
        echo json_encode($anArray);
     break;
   }
   die()
} 
```

如果 inc.ajax 包含在每个页面中（可能在 index.php 上），则使用 ajax=1&operator=[your operator] 在当前 url 上很容易 $.post() 并且您将始终获得所需的 json （或者响应仍然可以是 html。例如，在一个操作员中，您可以回显整个模板，然后“die()”，这样您就可以得到您想要的网站的一部分。）希望这会有所帮助，希望我没有不要错过重点，当然希望我没有把你和那些东西搞混了！

# .net - Contract.Requires 和装饰器模式。如何避免过度检查条件？

> ID：15972830
> 
> 赞同：2
> 
> 时间：2013-04-12T13:37:31.230
> 
> 标签：.net, unity-container, decorator, code-contracts, argument-validation

我目前有一个命令处理接口，由几个不同的类针对不同的命令类型实现。我将装饰器模式与 IoC 容器（在我的情况下为 Unity）结合使用，为这些处理程序添加横切关注点，因此我创建了一些类，例如：

*   ValidatorCommandHandlerDecorator
*   LoggingCommandHandlerDecorator
*   AsyncCommandHandlerDecorator

这一切都按预期工作，实际上非常好。这里的潜在问题是每个装饰器实现都会检查接口的代码协定。我想通过只验证一次合同（最好在最外面的装饰器上）来潜在地避免这种情况。

是否有开箱即用的东西来实现这一目标？如果没有，您有什么建议来克服这个问题？

通用接口和合约类是这样的：

```
[ContractClass(typeof(CommandHandlerContracts<>))]
public interface ICommandHandler<TCommand>
{
    void Handle(TCommand command);
}

[ContractClassFor(typeof(ICommandHandler<>))]
internal abstract CommandHandlerContracts<TCommand>
    : ICommandHandler<TCommand>
{
    public void Handle(TCommand command)
    {
        Contract.Requires<ArgumentNullException>(
            command != null);
    }
} 
```

ValidatorCommandHandler（作为我如何实现它们的一个例子）看起来像这样：

```
public sealed class ValidatorCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private ICommandHandler<TCommand> m_decoratedHandler;
    private ICommandValidator<TCommand> m_commandValidator;

    public ValidatorCommandHandlerDecorator(
        ICommandHandler<TCommand> decoratedHandler,
        ICommandValidator<TCommand> commandValidator)
    {
        m_decoratedHandler = decoratedHandler;
        m_commandValidator = commandValidator;
    }

    public void Handle(TCommand command)
    {
        m_commandValidator.Validate(command);
        m_decoratedHandler.Handle(command);
    }
} 
```

即使我创建了另一个仅用于装饰器的接口，它也必须继承原始接口并且仍然会检查合同，所以我不知道该怎么做。

这是 .NET 4.0 / VS2012，如果有帮助的话，我正在使用最新版本的代码合同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:29:34.613

您在该接口上定义了一个合同，因此代码合同将确保合同得到满足；合同就是合同。我猜你担心性能问题，但是从性能的角度来看这应该不是问题，因为我希望代码契约编织的代码在这种情况下会非常快（只是一个空检查）。您可以使用 IL 反编译器来验证这一点。

但如果你真的想这样做，解决方案其实很简单。在查看您在做什么时，这个问题甚至看起来有点傻，因为您应该已经知道答案：

## 使用装饰器！

这是您新的最外层装饰器：

```
public class ContractCheckerCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private readonly ICommandHandler<TCommand> decoratee;

    public ContractCheckerCommandHandlerDecorator(
        ICommandHandler<TCommand> decoratee)
    {
        this.decoratee = decoratee;
    }

    public void Handle(TCommand command)
    {
        if (command == null)
        {
            throw new ArgumentNullException("command");
        }

        this.decoratee.Handle(command);
    }
} 
```

但是请注意，在使用 Unity 时，添加额外的装饰器来执行 null 检查的开销将远大于使用 Code Contracts 为每个实现添加 null 检查。在大多数情况下，使用 Unity 添加这个额外的装饰器时，开销可能仍然可以忽略不计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:49:30.910

如果当务之急是关于在每个调用的 Handle(ICommand) 上验证的合同。我会说这没关系，因为这是预期的，因为无法保证包装器将传递给装饰器链中的 wrap-pee 的内容，即使收到非空命令也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:30:20.473

在 Code Contracts devlabs 论坛的[这个线程](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/thread/801f86f0-e61f-4d2d-81e6-57eb0ff14d0e)中，我再次从 Manuel Fahndrich 那里得到了一个非常有趣的答案。

有一个属性可以放在成员上以设置特定的合约行为选项，这个属性用于禁用对 handle 方法的合约运行时检查，例如：

```
[ContractOption("runtime", "checking", false)]
public void Handle(TCommand command)
{ ... } 
```

正如我在评论中所说，我将保持运行时检查，以防某些装饰器决定将 null 传递给它的装饰类（完全可能）。由于开销应该是最小的，我最终放弃了最初的想法。很高兴知道这样的事情是可能的，也许这个答案在搜索时对其他人有用。

# html - 如何使用画布动态缩放图像

> ID：15972831
> 
> 赞同：0
> 
> 时间：2013-04-12T13:37:32.843
> 
> 标签：html, image, canvas, pixel

我正在尝试根据画布大小调整图像大小。我的代码如下。问题是当我尝试 drawImage() 时，它画得很好，但像素在图像中会失真。任何帮助将不胜感激！我一直在尝试做很多事情，比如使用画布 imageData 操作像素，但完全没有运气:(

```
var imgURL = $('img#AS0017CF5A').attr('src');
                imgH = $('img#AS0017CF5A').height();
                imgW = $('img#AS0017CF5A').width();
                $('img#AS0017CF5A').parent().attr('id','pImg');
                $('img#AS0017CF5A').hide();

                imageObj = new Image();

                imageObj.onload = function(ev) {

                   document.getElementById('pImg').innerHTML = '<canvas id="myCanvas" width="' + imgW + '" height="' + imgH + '"></canvas>';
                    var toto = document.getElementById("myCanvas");
                    var c = toto.getContext("2d");
                    c.drawImage(imageObj, 0, 0, imgW, imgH);

                   //context.drawImage(imageObj, 0, 0, imageObj.width, imageObj.height, 0, 0, imgW, imgH);                 
                };
                imageObj.src = imgURL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:58:04.767

这段代码对我有用：

```
var img = new Image();
img.src = "icon.png";
img.onload = function()
{
    document.body.innerHTML = '<canvas id="toto" width="' + img.width + '" height="' + img.height + '"></canvas>';
    var toto = document.getElementById("toto");
    var c = toto.getContext("2d");
    c.drawImage(img, 0, 0, img.width, img.height);
} 
```

也许是 JQuery 未能正确创建画布？

并确保在画布上设置的 CSS 中没有任何宽度/高度。

# javascript - 针对奇数进行测试

> ID：15972835
> 
> 赞同：8
> 
> 时间：2013-04-12T13:37:41.783
> 
> 标签：javascript, modulo, bitwise-and

大多数情况下，模运算符`%`用于测试偶数或奇数。

现在我的问题是，使用按位与对奇数进行测试是否有任何问题，因为它感觉更自然地测试最右边的位是否`1`比`0`进行模检查`2`

并且作为 32 位转换不改变最右边的位。

两个都

`(1 + Math.pow(2,52)) & 1 //1`

和

`(1 + Math.pow(2,52)) % 2 //1`

产生相同的结果。

是否有理由更喜欢模运算符而不是按位？

编辑：这个问题只考虑在 64 位精度范围内的值，因为只有偶数可以精确表示在 2^53 以上，因此两个操作数都失败（`9007199254740993 % 2 //0)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T13:38:24.650

在 JavaScript 中，使用任何位运算符都会导致数字首先被截断为 32 位整数。这意味着它不适用于一些更大的值。（嗯，有很多更大的值:-)

`%`运营商不这样做。

*编辑*- 嘿，所有支持我的好人：保持你的马:-) [C5H8NNaO4](https://stackoverflow.com/users/1487756/c5h8nnao4)指出整数截断过程应该保留低位，如果你考虑只去掉尾数的顶部，这很直观，并且确实一些粗略的“测试”表明它似乎工作正常。

*当然，对于非常*大的值，事情会变得更加复杂，当以不精确的浮点数表示时，它可能是奇数或偶数，因为缺少最不重要的数字。换句话说，当浮点值中的二进制指数导致有效值大于尾数容量（我认为是 53 位）时，您要么必须考虑所有此类数字（因为低位始终为零）否则你必须考虑这个问题是不确定的。

应该清楚的是，我不是数学家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:17:53.123

如果您的数字总是能很好地转换为 32 位 int，那么看起来 Bitwise 可以更快——我猜一些 javascript 引擎可以将它 JIT 到硬件按位操作。我构建了一个 jsperf 来测试它：

[http://jsperf.com/evenness](http://jsperf.com/evenness)

我在 Firefox 20 上得到了非常多变的结果，有时 Bitwise 稍微快一点，有时快很多倍。

如果您的数字可能会或可能不会很好地转换为 32 位整数，那么请坚持模数。

# javascript - 剑道树视图复选框 - 父节点检查 - 每个复选框上的更改事件

> ID：15972838
> 
> 赞同：1
> 
> 时间：2013-04-12T13:37:45.883
> 
> 标签：javascript, kendo-ui

我有一个带有父节点和子节点的**2 级 Kendo UI Treeview 。**当我检查父节点时，会自动检查所有子节点（包括父节点）。

现在**我想发送一个具有当前树选择**状态的事件。问题是当我尝试在**dataSource.change**方法中执行此操作时，因为它**会分别触发每个复选框选择**（1 个父节点 + 3 个子节点 = 4 个更改事件）。这是代码的样子：

```
treeView.data("kendoTreeView").dataSource.bind("change", function() {
    alert('event fired!');
}); 
```

我在[这里创建了一个工作示例](http://jsfiddle.net/ydyfQ/)

是否有另一个事件要附加到所有复选框更新后只触发一个事件？或者也许有一种方法可以将所有这些“更改”事件分组并只触发一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:26:45.967

我已经结束了这个解决方案：

```
tree.data("kendoTreeView").dataSource.bind("change", function() {
        treeView = tree.data("kendoTreeView");
        checkedNodes = [];
    checkedNodeIds(treeView.dataSource.view(), checkedNodes);
    if (!timeoutSet) {
        setTimeout(fireCheckboxChangeOnce, 50);//fires only one event when parent checkbox checks all the children
        timeoutSet = true;
    }
}); 
```

只有第一个事件会创建对函数的延迟调用（使用*setTimeout()*）。所有剩余的“更改”事件仅修改*checkedNodes*参数。

*fireCheckboxChangeOnce*函数还清除*timeoutSet*标志。

# jquery - jquery validation for lot of related checkbox / textfields with dependency-expression

> ID：15972842
> 
> 赞同：0
> 
> 时间：2013-04-12T13:37:57.377
> 
> 标签：jquery, jquery-validate

I have multiple checkbox / textfield related one to each other, PHP generated, with different IDs and names:

```
<ul>
    <li>
        <input type="checkbox" name="cb_1" id="cb_1">
        <input type="text" name="txt_1" id="txt_1">
    </li>
    <li>
        <input type="checkbox" name="cb_2" id="cb_2">
        <input type="text" name="txt_2" id="txt_2">
    </li>
    ...
    <li>
        <input type="checkbox" name="cb_N" id="cb_N">
        <input type="text" name="txt_N" id="txt_N">
    </li>
</ul> 
```

When each checkbox is checked, the related textfield should be required

I can do this for one pair, like this:

```
rules: {
    txt_1: {
      required: "#cb_1:checked"
    } 
```

But how to do for all my N pairs? Is there a simple way or do I have to write validation rules one by one?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:45:22.657

Write a custom validation rule that looks at the sibling checkbox to see it is checked. Like this

```
$.validator.addMethod("requiredWithCheckbox", function (value, element) {
    if ($(element).siblings(":checkbox:checked").length) {
        return value != '';
    }
    else {
        return true;
    }
}, "You've checked the checkbox, now fill in the field"); 
```

then add this rule to the form fields in whatever way you like, for instance you could do this to add the rule to all text fields

```
$('input[type=text]').addClass('requiredWithCheckbox');
$("form").validate(); 
```

# rest - 我在哪里可以找到实用的 HATEOAS Javascript 客户端示例？

> ID：15972843
> 
> 赞同：10
> 
> 时间：2013-04-12T13:37:58.143
> 
> 标签：rest, backbone.js, single-page-application, hateoas

我正在寻找 WOA/HATEOAS 中的具体示例！

我阅读了很多博客，看到了很多关于 HATEOAS 的演示文稿，但从来没有一个例子......

你如何实现客户端？

真的，当您使用 Backbone、AngularJS、Ember、Knockout 制作 HTML5 应用程序时……您如何制作 HATEOAS ？！

例如，在 Backbone 中，如何动态设置模型的“url”属性以从服务器检索资源？

谢谢你们的回复！

此致，

托马斯·庞斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:48:32.447

HATEOAS 的重点是您从对请求的响应中获取其他资源的链接。与 URL 模板相比，不同之处在于客户端知道，已经硬连线，只有几个 URL（入口点），其余 URL 是从动态响应中获取的。它带来了客户端和服务器之间的松散耦合，这是 HATEOAS 的主要优点。

使用 HATEOAS 就像在网上冲浪一样，您只需单击包含在最后一个响应中的链接（例如 HTML 页面），然后一次又一次。要点是，在您获得对您知道的 URL（入口点）的第一个响应之前，您并不知道所有 URL。

不幸的是，今天，HATEOAS 并没有被很好地采用。大多数 API 都在发布 URL 模板，这意味着紧密耦合；所以我认为你现在不能期望现有框架的支持，但是在客户端实现你自己的 URL 存储库并不难，它将从你得到的响应中收集 URL。

# ffmpeg - 使用 ffmpeg 从 PNG 创建 MOV：旧版 quicktime (7.6.6) 中的播放问题

> ID：15972845
> 
> 赞同：0
> 
> 时间：2013-04-12T13:38:00.227
> 
> 标签：ffmpeg, imagemagick, quicktime

我正在使用 ffmpeg 从一系列图像创建一个 MOV 文件。当我在 Quicktime 7.7.x 中观看电影时，它看起来很棒（左图）。当我在 Quicktime 7.6.6 中查看时，我遇到了这个奇怪的问题（在右侧）：

[在 Quicktime 7.7.x 中 http://jimlindstrom.com/stills-good.png](http://jimlindstrom.com/stills-good.png) [在 Quicktime 7.6.6 中 http://jimlindstrom.com/stills-bad.png](http://jimlindstrom.com/stills-bad.png)

知道这是什么，更不用说如何解决了？

### 细节

我的源图像混合了 PNG 和 JPG，我使用 ImageMagick 进行了预处理（用于绘制文本、标题等）。我将中间结果存储为 MPC，将最终帧存储为 PNM。

为了绘制上面的框架，我这样做：

```
convert -background none -fill white -font my_font.ttf -pointsize 132 -gravity \
        center -size 945x550 caption:"Stills Demo" background-template.png     \
        +swap -composite -resize 1920x1080! /tmp/title_screen4338355.png
convert -auto-orient /tmp/title_screen4338355.png -resize 100% -type TrueColor \
        /tmp/1b2764754ce6e420986ed74b942bcf67.mpc
convert /tmp/1b2764754ce6e420986ed74b942bcf67.mpc -set option:distort:viewport \
        1920x1080+0+0  +distort SRT '960.0,540.0 1.0 0 960.0,540.0'            \
        /tmp/stills-project-6224/video_frames/img_0000.pnm 
```

我像这样使用 ffmpeg 渲染帧：

```
ffmpeg -y -f image2 -i /tmp/stills-project-6224/video_frames/img_%04d.pnm      \
       -i /tmp/soundtrack_8702693.wav -vcodec libx264 -pix_fmt yuvj444p        \
       -b:v 2200k  -r 25 -strict experimental                                  \
       /tmp/stills-project-6224/video_rendered/output.mov 
```

视频的其余部分很好。其他图像是我以相同方式处理的照片（jpg 或 png）。我还注意到，如果我不将文本应用到此背景模板，图像会显示得很好，所以我认为这个问题与我如何处理或保存该图像有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:43:36.777

自己解决了这个问题。它与这篇文章的 ImageMagick 部分无关，我只是错误地使用了 ffmpeg。我现在这样称呼它：

```
ffmpeg -y -f image2 -i /tmp/stills-project-6723/video_frames/img_%04d.pnm \
       -i /tmp/soundtrack_9080161.wav -c:v libx264 -preset slow -crf 22   \
       -pix_fmt yuv420p -r 25 -strict experimental                        \
       /tmp/stills-project-6723/video_rendered/output.mov 
```

它就像一个魅力。

# html - 图像未显示在 html 模板 Django python 上

> ID：15972846
> 
> 赞同：0
> 
> 时间：2013-04-12T13:38:01.527
> 
> 标签：html, django, python-2.7

我有一个具有图像源的模板，每次我运行我的 html 文件时图像都不会显示，我尝试了一些示例但没有成功，我设置了 url.py、settings.py 和 html 文件。我是 Django 的新手。

网址.py

```
from django.conf.urls.defaults import *
from rulebase.rulesapp.views import myview
import settings

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Example:
    # (r'^rulebase/', include('rulebase.foo.urls')),

    # Uncomment the admin/doc line below and add 'django.contrib.admindocs' 
    # to INSTALLED_APPS to enable admin documentation:
    # (r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    (r'^admin/', include(admin.site.urls)),
    (r'^myview/$', myview),
    (r'^media/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT}), 
) 
```

设置文件

```
 MEDIA_ROOT = '/home/user/dev/Django/rulebase/media/'

    MEDIA_URL = 'http://127.0.0.1:8080/media/'

    ADMIN_MEDIA_PREFIX = '/media/' 
```

HTML `<img src="{{ MEDIA_URL }}logo-on-trans.png" width="448" height="255" />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:55:49.023

我建议让 Django 提供图像，`STATIC_URL`而不是`MEDIA_URL`.

阅读[Django 文档](https://docs.djangoproject.com/en/dev/howto/static-files/)。

这很简单：

*   `STATIC_ROOT = ''`
*   `STATIC_URL = '/media/'`
*   `STATICFILES_DIRS = ('/home/user/dev/Django/rulebase/media/',)`
*   删除`'^media/...'`（不再需要）的 URL 模式
*   将 HTML 行更改为`<img src="{{ STATIC_URL }}logo-on-trans.png" width="448" height="255" />`并假设该文件位于您声明它应该与 HTML 一起提供的目录中。

阅读文档，但有重要的理由说明原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-16T01:18:02.943

从主 URLs 文件中删除并尝试索引 URL，因此以这种方式使用的 URL url('',view=index)，两个引号之间为空 url，删除

# php - SQL SELECT JOIN 重复输出

> ID：15972848
> 
> 赞同：0
> 
> 时间：2013-04-12T13:38:09.300
> 
> 标签：php, mysql, sql, database

这是查询

```
    选择
        f.id AS main_forum_id,
        f.forumname AS main_forumname,
        m.useraid AS main_forum_moderator_id,
        m.useradn AS main_forum_moderator_dn,
        f2.id AS sub_forum_id,
        f2.forumname AS sub_forumname,
        m2.useraid AS sub_forum_moderator_id,
        m2.useradn AS sub_forum_moderator_dn
    来自论坛 f
        LEFT JOIN 主持人 m ON(m.forumid=f.id)
        左加入论坛 f2 ON(f2.relatedto=f.id)
        左加入版主 m2 ON(m2.forumid=f2.id)
    其中 f.adminid='$userid'
        和 f.relatedto=0
    按 f.id,f2.id DESC 排序

```

这是输出： ![在此处输入图像描述](https://i.stack.imgur.com/dlBOl.png)

知道如何解决吗？我的查询有什么问题？

我想做的是：

**主论坛：**

*   主持人 1
*   主持人 2
*   主持人3...

    **分论坛：**

    *   主持人 1
    *   主持人2...

    **分论坛：**

    *   主持人1...

**ANATHER 主论坛：**

*   版主1……等等……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:48:46.443

数据是重复的，因为您有三个单独的`sub_forum_moderator_id`和`sub_forum_moderator_dn`值，因此每个值都有不同的行。

您有几个选项，您可以使用聚合函数为这些列中的每一列返回一个值，或者您可以使用`GROUP_CONCAT`将这些行组合成一行：

```
SELECT f.id AS main_forum_id,
  f.forumname AS main_forumname,
  m.useraid AS main_forum_moderator_id,
  m.useradn AS main_forum_moderator_dn,
  f2.id AS sub_forum_id,
  f2.forumname AS sub_forumname,
  group_concat(m2.useraid) AS sub_forum_moderator_id,
  group_concat(m2.useradn) AS sub_forum_moderator_dn
FROM forums f
LEFT JOIN moderator m ON(m.forumid=f.id)
LEFT JOIN forums f2 ON(f2.relatedto=f.id)
LEFT JOIN moderator m2 ON(m2.forumid=f2.id)
WHERE f.adminid='$userid'
  AND f.relatedto=0
GROUP BY f.id, f.forumname, m.useraid, m.useradn,
  f2.id, f2.forumname
ORDER BY f.id,f2.id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:41:56.367

使用`DISTINCT(f.id)`or `DISTINCT(forum.id)`，也添加`GROUP BY f.id`在您的查询中，这将消除重复的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:42:21.867

```
try : SELECT DISTINCT 
```

不确定它是否有效

# c# - JSON 对象显示 null

> ID：15972852
> 
> 赞同：2
> 
> 时间：2013-04-12T13:38:15.287
> 
> 标签：c#, json, entity-framework, asp.net-web-api, poco

这是我的模型。

```
 public class User
{
    public string Id { get; set; }
    public string Username { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Password { get; set; }
    public string Headline { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
    public virtual ICollection<Phonenumber> Phonenumbers { get; set; }
    public virtual ICollection<Email> Emails { get; set; }
    public virtual ICollection<Position> Positions { get; set; }
} 
```

这是 GET 方法。

```
 // GET api/App
    public IEnumerable<User> GetUsers()
    {
        db.Configuration.ProxyCreationEnabled = false;
        return db.Users.AsEnumerable();
    } 
```

我已禁用代理创建，因为显然实体框架和序列化存在某种问题。

当我转到 localhost:12345/api/App/ 时，它返回以下 JSON 对象。您会注意到 Addresses 字段和 Positions 的所有路径都显示为空。

```
[{"$id":"1","Id":"1","Username":"Bob","FirstName":"Foo","LastName":"Bar","Password":"123","Headline":"Something","Addresses":null,"Phonenumbers":null,"Emails":null,"Positions":null}] 
```

但是我不明白为什么它是空的，因为它曾经显示它们。当我转到显示的 localhost:12345/api/App/1 时，我可以确认它在那里，数据：

```
{"$id":"1","Addresses":[{"$id":"2","Id":"3","Uaddress":"Test address","Country":"Fantasy Land","Zipcode":"0000","Cycle":0,"UserId":"3","User":{"$ref":"1"}}],"Phonenumbers":[{"$id":"3","Id":"2","Number":"12345678","Cycle":0,"UserId":"3","User":{"$ref":"1"}}],"Emails":[{"$id":"4","Id":"2","Uemail":"bob@example.com","Cycle":0,"UserId":"3","User":{"$ref":"1"}}],"Positions":[{"$id":"5","Company":{"$id":"6","Id":"2","Name":"Bobs ApS","Type":"Bobs","Industry":"Magic","Size":"1337"},"Id":"2","Title":"CEO","Iscurrent":true,"CompanyId":"2","UserId":"1","User":{"$ref":"1"}}],"Id":"1","Username":"bob","FirstName":"Foo","LastName":"Bar","Password":"1234","Headline":"Something"} 
```

正如您将看到的那样，该字段都填写了数据。任何想法为什么当我尝试获取所有用户时它没有显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:44:06.430

现在您已禁用代理，延迟加载不会为您获取子实体。您需要专门询问他们：

```
return db.Users.Include(x => x.Addresses).Include(x => x.Positions).AsEnumerable(); 
```

# php - 将数据导出到 csv 后出现未定义的变量错误

> ID：15972853
> 
> 赞同：-2
> 
> 时间：2013-04-12T13:38:19.653
> 
> 标签：php

我尝试学习如何使用此脚本将数据导出到 csv，是的，我可以导出所有数据，但在 csv 中我发现了一个错误（在 localhost 中运行时）：

```
<b>Notice</b>:  Undefined variable: csv_output in <b>C:\xampp\htdocs\import_export\index.php</b> on line <b>10</b><br /> 
```

不知道为什么，但我可以在实时服务器中运行此代码而没有任何问题。

完整代码

```
error_reporting(E_ALL);

mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("csv") or die(mysql_error());

$file  = "product_export"; // csv name.

//CSV Header
$csv_output .= "ID " . ", ";
$csv_output .= "Content " . ", ";

$csv_output .= "\n";

//CSV Content rows
$query = mysql_query("SELECT * FROM `users`");
while ($row = mysql_fetch_array($query)) {
    $csv_output .= $row["id"] . ", ";
    $csv_output .= $row["content"] . ", ";

    $csv_output .= "\n";
}

$filename = $file . "_" . date("d-m-Y_H-i");

header("Content-type: application/vnd.ms-excel");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header("Content-disposition: filename=" . $filename . ".csv");

print $csv_output;

exit; 
```

p/s：我只使用 mysql_* 进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:42:12.310

在第一行：

```
//CSV Header
$csv_output .= "ID " . ", "; 
```

您正在尝试将 id 连接到变量，但从未定义过该变量。

第一次使用变量时不要使用“等号”前面的点，所以试试这个：

```
In the first line:

//CSV Header
$csv_output = "ID " . ", "; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:40:15.670

PHP 只是让您知道您正在使用尚未定义的变量。这是一个通知，而不是警告或错误。

此行正在提示通知：

```
$csv_output .= "ID " . ", "; 
```

这是此变量的第一次使用，此时您不需要连接。简单的解决方法是将其更改为：

```
$csv_output = "ID " . ", "; 
```

如果您不希望 PHP 发出通知，您可以将脚本的第一行更改为：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:45:10.857

附加变量`.=`需要您首先以正确的形式声明变量，例如：`$variable = $value`然后你可以附加它，否则它会给你总是未声明的变量错误。

# java - 使用 GSON-Library 的 JSON：错误应为 BEGIN_OBJECT 但为 STRING

> ID：15972856
> 
> 赞同：8
> 
> 时间：2013-04-12T13:38:26.580
> 
> 标签：java, json, parsing, gson

我正在尝试使用 gson 将 json 字符串解析回 Java 对象。但我不断收到上述错误：

```
Expected BEGIN_OBJECT but was STRING. 
```

我看到这个错误有一些 SO 问题，但似乎没有一个适用于我的情况。

我的 Java 代码如下：

```
Gson gson = new Gson();
Payment p = gson.fromJson(paymentJson, Payment.class); 
```

其中paymentJson 是支付对象的JSON 字符串，我通过http 帖子获取。

我用来测试它的 Json-String 如下：

```
{
"creationDate": "2013-04-10T09:59:45.890+02:00",
"beneficiary": "Heat Hot Sauces",
"amount": 31.54,
"ibanSender": "CH190020600000DEMO303",
"paymentType": "ACCOUNT_TO_ACCOUNT",
"executionDate": "2013-04-10",
"fees": 0,
"ibanReceiver": "CH730020600000DEMO301",
"status": {
    "code": "PENDING"
},
"currency": "CHF",
"description": "Sudden Death Sauce",
"id": "25202",
"total": 31.54 
```

}

我用 JsonLint 检查了 JSON 的有效性，它是有效的 json。

我知道通过 http 向我发送 json 数据的另一方也使用 GSON 和同一个类“付款”，但我不能/不允许在那里更改代码。

付款类如下所示：

```
public class Payment {

  private String id;
  private PaymentType paymentType;
  private PaymentCategory paymentCategory;
  private String ibanSender;
  private LocalDate executionDate;
  private DateTime creationDate;
  private String currency;
  private Double amount;
  private Double fees;
  private PaymentStatus status;
  private String description;
  private Double total;

  // attributes which identifiers the beneficiary of the payment
  private String ibanReceiver;
  private String accountNumber;
  private String swift;
  private String referenceNumber;
  private PaymentFeesChargingCode feesCharging;
  private String beneficiary;

  // the following 5 beneficiary fields can be used for address (beneficiary_5
  // should be used for country)
  private String beneficiary_1;
  private String beneficiary_2;
  private String beneficiary_3;
  private String beneficiary_4;
  private String beneficiary_5; // country
  // the reference to the StandingOrder which created this payment, or null
  private String standingOrderId;

  public Payment() {
    super();
  }
  public String getId() {
    return id;
  }
  public void setId(String id) {
    this.id = id;
  }
  public PaymentType getPaymentType() {
    return paymentType;
  }
  public void setPaymentType(PaymentType paymentType) {
    this.paymentType = paymentType;
  }
  public String getIbanSender() {
    return ibanSender;
  }
  public void setIbanSender(String ibanSender) {
    this.ibanSender = ibanSender;
  }
  public LocalDate getExecutionDate() {
    return executionDate;
  }
  public void setExecutionDate(LocalDate executionDate) {
    this.executionDate = executionDate;
  }
  public DateTime getCreationDate() {
    return creationDate;
  }
  public void setCreationDate(DateTime creationDate) {
    this.creationDate = creationDate;
  }
  public String getCurrency() {
    return currency;
  }
  public void setCurrency(String currency) {
    this.currency = currency;
  }
  public Double getAmount() {
    return amount;
  }
  public void setAmount(Double amount) {
    this.amount = amount;
  }
  public Double getFees() {
    return fees;
  }
  public void setFees(Double fees) {
    this.fees = fees;
  }
  public PaymentStatus getStatus() {
    return status;
  }
  public void setStatus(PaymentStatus status) {
    this.status = status;
  }
  public String getDescription() {
    return description;
  }
  public void setDescription(String description) {
    this.description = description;
  }
  public Double getTotal() {
    return total;
  }
  public void setTotal(Double total) {
    this.total = total;
  }
  public String getIbanReceiver() {
    return ibanReceiver;
  }
  public void setIbanReceiver(String ibanReceiver) {
    this.ibanReceiver = ibanReceiver;
  }
  public String getAccountNumber() {
    return accountNumber;
  }
  public void setAccountNumber(String accountNumber) {
    this.accountNumber = accountNumber;
  }
  public String getSwift() {
    return swift;
  }
  public void setSwift(String swift) {
    this.swift = swift;
  }
  public String getReferenceNumber() {
    return referenceNumber;
  }
  public void setReferenceNumber(String referenceNumber) {
    this.referenceNumber = referenceNumber;
  }
  public PaymentFeesChargingCode getFeesCharging() {
    return feesCharging;
  }
  public void setFeesCharging(PaymentFeesChargingCode feesCharging) {
    this.feesCharging = feesCharging;
  }
  public String getBeneficiary() {
    return beneficiary;
  }
  public void setBeneficiary(String beneficiary) {
    this.beneficiary = beneficiary;
  }
  public String getBeneficiary_1() {
    return beneficiary_1;
  }
  public void setBeneficiary_1(String beneficiary_1) {
    this.beneficiary_1 = beneficiary_1;
  }
  public String getBeneficiary_2() {
    return beneficiary_2;
  }
  public void setBeneficiary_2(String beneficiary_2) {
    this.beneficiary_2 = beneficiary_2;
  }
  public String getBeneficiary_3() {
    return beneficiary_3;
  }
  public void setBeneficiary_3(String beneficiary_3) {
    this.beneficiary_3 = beneficiary_3;
  }
  public String getBeneficiary_4() {
    return beneficiary_4;
  }
  public void setBeneficiary_4(String beneficiary_4) {
    this.beneficiary_4 = beneficiary_4;
  }
  public String getBeneficiary_5() {
    return beneficiary_5;
  }
  public void setBeneficiary_5(String beneficiary_5) {
    this.beneficiary_5 = beneficiary_5;
  }

  @Override
  public String toString() {
    return "Payment [id=" + id + ", ibanSender=" + ibanSender + ", ibanReceiver=" + ibanReceiver + ", beneficiary=" + beneficiary + ", executionDate=" + executionDate + ", creationDate=" + creationDate + ", currency=" + currency + ", amount=" + amount + ", fees=" + fees + ", status=" + status + ", description=" + description + ", total=" + total + "]";
  }

  public PaymentCategory getPaymentCategory() {
    return paymentCategory;
  }
  public void setPaymentCategory(PaymentCategory paymentCategory) {
    this.paymentCategory = paymentCategory;
  }
  public String getStandingOrderId() {
    return standingOrderId;
  }
  public void setStandingOrderId(String standingOrderId) {
    this.standingOrderId = standingOrderId;
  }
} 
```

编辑：这是堆栈跟踪：

```
java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 48
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
com.google.gson.Gson.fromJson(Gson.java:795)
com.google.gson.Gson.fromJson(Gson.java:761)
com.google.gson.Gson.fromJson(Gson.java:710)
com.google.gson.Gson.fromJson(Gson.java:682)
ch.ti8m.bank.payment.scanbuy.controller.ScanAndBuyController.preparePayment(ScanAndBuyController.java:58)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:822)
javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:180)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
java.lang.Thread.run(Thread.java:722) 
```

有谁知道为什么我会收到该错误消息？

提前致谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-15T09:44:07.160

GSON 无法解析 creationDate 字段的值，因为它不知道如何处理 Joda-Time DateTime 对象。

尝试使用 GsonBuilder 的 registerTypeAdapter 方法为此类注册类型适配器。

```
Gson gson = new GsonBuilder().registerTypeAdapter(DateTime.class, new JsonDeserializer<DateTime>() {
    @Override
    public DateTime deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
            throws JsonParseException {
        return new DateTime(json.getAsString());
    }
}).create(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-08T00:25:35.143

我实现了一种稍微不同的方法，因为在我的情况下，我的 Spring Boot 项目中 java.time.LocalDate 的序列化和反序列化属性都存在问题：

```
@Configuration
@EnableWebMvc
public class ApplicationConfig implements WebMvcConfigurer {

    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        GsonHttpMessageConverter gsonConverter = new GsonHttpMessageConverter();
        gsonConverter.setGson(gson());
        converters.add(gsonConverter);
    }

    @Bean
    public Gson gson() {
        return new GsonBuilder()
                .serializeNulls()
                .registerTypeAdapter(LocalDate.class,
                        (JsonSerializer<LocalDate>) (localDate, type, context)
                        -> new JsonPrimitive(localDate.format(DateTimeFormatter.ofPattern("yyyy-MM-dd"))))
                .registerTypeAdapter(LocalDate.class,
                        (JsonDeserializer<LocalDate>) (jsonElement, type, context)
                        -> LocalDate.parse(jsonElement.getAsString(), DateTimeFormatter.ofPattern("yyyy-MM-dd")))
                .create();
    }
    ...
} 
```

该配置不仅允许我为我的 GsonHttpMessageConverter 配置了 LocalDate 的适配器，而且还为我的应用程序提供了这个 Gson 配置的单例 bean。

# jquery - jquery 响应错误或自动完成在哪里？

> ID：15972857
> 
> 赞同：1
> 
> 时间：2013-04-12T13:38:27.207
> 
> 标签：jquery, xml, autocomplete

**首先是背景信息：应用程序是一个旧的 .net 框架 1.1 应用程序（当时不支持 json，所以我不得不使用 xml。** 由于不值得进入的原因，我无法升级这个特定的应用程序。

* * *

我正在尝试将自动完成添加到我网站上的文本框中。但是在输入某些单词后应该会弹出自动完成功能。例如，在一个文本框中，如果我开始输入自动完成功能会弹出。一旦我按下空格键并再次开始输入，那么自动完成功能将再次出现。

我发现了一些很酷的东西，jquery 文档包含的内容与此处的内容完全相同：http: [//jqueryui.com/autocomplete/#multiple](http://jqueryui.com/autocomplete/#multiple)我已经做了很多他们正在做的事情，但我的自动完成功能没有出现。这是我的jQuery代码：

## 我的jQuery代码

```
function split(val) 
{
  return val.split(/\s*/);
}

function extractLast(term) 
{
  return split(term).pop();
}

$("#txtTags").bind( "keydown", function( event ) {
        //parameters for the ajax call.
        var FacilityID = $("#ddlFacility").val();
        var ClientID = $("#ddlClient").val();   
        var params = '{"ClientID":"' + ClientID + '", "FacilityID":"' + FacilityID + '"}';

    // don't navigate away from the field on tab when selecting an item.
        if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).data( "ui-autocomplete" ).menu.active ) {
          event.preventDefault();
        }
      }).
autocomplete({
        minLength: 1,
        source: function(request, response) {
            $.ajax({
                type: "POST",
                data: params,
                url: "GetTags.asmx/GetTags",
                dataType: "xml",
                contentType: "text/xml; charset=utf-8",
          success: function(xml) {
                var data = [];
                 $(xml).find('string').each(function(){ 
                    data.push($(this).text());
                    });
                //response(data);
                // delegate back to autocomplete, but extract the last term
                response( $.ui.autocomplete.filter(
                        data, extractLast(request.term)));
          },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        }, 
        search: function() {
          // custom minLength
          var term = extractLast( this.value );
          if(typeof(term) !== 'undefined')
            {           
            if (term.length < 1) {
                return false;
            }
          }
        }, 
        focus: function() {
          // prevent value inserted on focus
          return false;
        },
    }); 
```

我已尽我所能发表评论，如果您有任何问题，请告诉我。我知道 .asmx Web 服务文件正在返回正确的数据，因为我从 ie / chrome 运行 Web 服务的输出如下：

## XML 的结果

```
 This XML file does not appear to have any style information associated with it. The document tree is shown below.
<ArrayOfString xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/quikfix.jakah.com/GetTags">
<string>3g</string>
<string>6283</string>
<string>7641</string>
<string>8-id</string>
<string>80070005</string>
<string>active-directory</string>
<string>ad</string>
<string>addin</string>
<string>authentication</string>
<string>badge</string>
<string>batch</string>
<string>boot</string>
</ArrayOfStrings> 
```

无论我在文本框中输入什么内容，我都没有在 chrome 开发人员工具/即工具中看到任何错误。我只是没有得到自动完成功能。我的 jquery 有什么明显的错误吗？

* * *

## 网络服务 (.asmx)

如果有人感兴趣，这里的附加信息是我的网络服务，它只是 vb.net：

```
Public Function GetTags(ByVal ClientID As Long, ByVal FacilityID As Long) As String()
        Dim arr() As String = BindTags(ClientID, FacilityID)
        Return arr
    End Function
    Public Function BindTags(ByVal ClientID As Long, ByVal FacilityID As Long) As String()
        Dim cmdSelect As SqlCommand
        Dim conMyData As SqlConnection
        Dim reader As SqlDataReader
        Dim myList As New ArrayList

        'try and make a connection   
        Try
            conMyData = New SqlConnection(ConfigurationSettings.AppSettings("strConn"))
            cmdSelect = New SqlCommand("select_tags_grid", conMyData)

            With cmdSelect
                .CommandType = CommandType.StoredProcedure
                'add parameters
                .Parameters.Add("@ClientID", SqlDbType.BigInt).Value = ClientID
                .Parameters.Add("@FacilityID", SqlDbType.BigInt).Value = FacilityID
                .Parameters.Add("@SortOrder", SqlDbType.TinyInt).Value = 4
                'check the clientid
                conMyData.Open()
                reader = cmdSelect.ExecuteReader(CommandBehavior.CloseConnection)
            End With

            While (reader.Read())
                myList.Add(CType(reader("Tag"), String))
            End While

            Dim arr() As String = CType(myList.ToArray(Type.GetType("System.String")), String())
            Return arr
        Catch e As Exception
            'clean up and close resources
            Throw e
        Finally
            cmdSelect = Nothing
            conMyData.Close()
            conMyData = Nothing
        End Try
    End Function 
```

* * *

# 迄今为止的发现

我在这里非常接近，我看到的是如果我从我的 jquery 和我的网络服务中删除参数，即：

```
 //parameters for the ajax call.
        //var FacilityID = $("#ddlFacility").val();
        //var ClientID = $("#ddlClient").val(); 
        //var params = '{"ClientID":"' + ClientID + '", "FacilityID":"' + FacilityID + '"}'; 
```

自动完成正确显示。但是我需要这些参数......所以当我将它们添加回我的 jquery 和我的 web 服务（我的 asmx 文件）时，chrome 会引发内部服务器 500 错误。它说：

```
System.InvalidOperationException: Request format is invalid: text/xml; charset=utf-8\. at System.Web.Services.Protocols.HttpServerProtocol.ReadParameters() at System.Web.Services.Protocols.WebServiceHandler.Invoke() at System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest() 
```

但我需要 text/xml 类型，因为 .net 1.1 不支持 json。请问有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:48:23.593

我知道了！

```
function split(val) 
    {
      //return val.split(/\s*/);
      return val.split(" ");
    }

    function extractLast(term) 
    {
      return split(term).pop();
    }

        //parameters for the ajax call.
        var FacilityID = $("#ddlFacility").val();
        var ClientID = $("#ddlClient").val();   
        var params = '{"ClientID":"' + ClientID + '", "FacilityID":"' + FacilityID + '"}';

$("#txtTags").bind( "keydown", function( event ) {  
    // don't navigate away from the field on tab when selecting an item.
        if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).data( "ui-autocomplete" ).menu.active ) {
          event.preventDefault();
        }
      }).
    autocomplete({
        minLength: 1,
        source: function(request, response) {
            $.ajax({
                type: "GET",
                data: "ClientID=" + ClientID + "&FacilityID=" + FacilityID,
                url: "GetTags.asmx/GetTags",
                dataType: "xml",
                contentType: "text/xml; charset=utf-8",
          success: function(xml) {
                var data = [];
                 $(xml).find('string').each(function(){ 
                    data.push($(this).text());
                    });
                //response(data);
                // delegate back to autocomplete, but extract the last term
                response( $.ui.autocomplete.filter(
                        data, extractLast(request.term)));
          },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        }, 
        search: function() {
          // custom minLength
          var term = extractLast( this.value );
          if(typeof(term) !== 'undefined')
            {           
            if (term.length < 1) {
                return false;
            }
          }
        }, 
        focus: function() {
          // prevent value inserted on focus
          return false;
        },
        select: function( event, ui ) 
        {       
            var terms = split(this.value);          
            // remove the current input          
            terms.pop();          
            // add the selected item          
            terms.push(ui.item.value);          
            // add placeholder to get the comma-and-space at the end          
            terms.push("");          
            //add space to each term object
            this.value = terms.join(" ");          
            return false;        
        },
    }); 
```

# extjs - Ext.tab.Panel 不显示内容

> ID：15972858
> 
> 赞同：0
> 
> 时间：2013-04-12T13:38:30.957
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我有一个应用程序，它在 form.Panel 中有一个表单，当用户按下搜索时，它会在 tab.Panel 中显示结果。一切正常，标签第一次正常工作。我有一个按钮，允许用户返回到 form.Panel 并输入不同的信息。用户再次按下搜索，一切正常，但是如果您从初始选项卡更改然后尝试返回它，则不会显示任何内容。我在控制台中没有错误，只是一个带有标签栏的空面板。有人知道这可能发生的任何原因吗？

列表项点击控制器：

```
 Ext.define('FirstApp.controller.Details', {
     extend: 'Ext.app.Controller',

    config: {
    refs: {
        placesNavView:'placesContainer',

    },
    control: {
        'placesContainer places list':{
            itemtap:function(list,index,target,record){

      var ref = record.get('reference');
     var name = record.get('name');
    console.log(name);
      console.log(ref);

    // Instantiate a "please wait" message
    Ext.Viewport.setMasked({xtype:'loadmask', message:'Please Wait...'});

       var proxy = {
        type:'ajax',
        url:'https://maps.googleapis.com/maps/api/place/details/json?reference='+ref+'&sensor=true&key=',
        reader:{
            type:'json',
            rootProperty:'result'
        }
    }
    Ext.StoreMgr.get('Details').setProxy(proxy);
    Ext.StoreMgr.get('Details').load();

    console.log(proxy);

             Ext.getCmp('placesContainer').push({
         xtype: 'details',
       title: name
          });

       Ext.Viewport.setMasked(false);

            }
        }

    }

  }
  }); 
```

更新：

```
 Ext.define('FirstApp.view.PlacesContainer',{
 extend:'Ext.NavigationView',

 xtype:'placesContainer',
 id:'placesView',

config:{
    title:'Places',
    iconCls:'organize',
    items:[
        {
            xtype:'places'
        }

    ]
   }
  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:25:37.663

这可能是因为您硬编码`id: placesView`，请尝试使用`itemId`。

```
xtype:'placesContainer',
itemId:'placesView' 
```

为什么要用`itemId`over `id`？

> 当没有可用的对象引用时，itemId 可用作获取对组件的引用的替代方法。不要使用带有 Ext.getCmp 的 id，而是使用带有 Ext.Container.getComponent 的 itemId，它将检索 itemId 或 id。**由于 itemId 是容器内部 MixedCollection 的索引，因此 itemId 的范围仅限于容器本地 - 避免与需要唯一 id 的 Ext.ComponentManager 发生潜在冲突。**

# css - disable_with 不能在表标签中工作？

> ID：15972862
> 
> 赞同：0
> 
> 时间：2013-04-12T13:38:38.567
> 
> 标签：css, ruby-on-rails-3.2

这是我的表格

```
 <table>
    <%= form_for Slot.new, :url => slots_path(@current_webclass), :validate => true, remote: true, :html => {:class => 'form-horizontal', id: 'slot-form', data: {type: "script", method: :post}} do |f| %>
    <tr>
      <td>
        <%= f.text_field :title %>
      </td>
      <td>
        <%= f.text_field :start_at, class: 'timepicker' %>
      </td>
      <td>
        <%= f.text_field :start_at, class: 'timepicker' %>
      </td>

      <td>
        <%= f.submit 'add', class: 'btn btn-success', disable_with: "process..." %>
      </td>
    </tr>
    <% end %>
   </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:43:17.530

尝试将其用作符号`button_tag "Checkout", :disable_with => "Please wait..."`

如果这不起作用，请尝试使用：

'btn btn-success', disable_with => "进程..."} %>

# ios - 如何在核心图形中填充黑色透明png中的黑色？

> ID：15972866
> 
> 赞同：0
> 
> 时间：2013-04-12T13:38:53.087
> 
> 标签：ios, objective-c, uiimage, core-graphics

我已经为此苦苦挣扎了几个小时，但无济于事。

我在透明背景上有一个黑色形状的 PNG。我想用另一种颜色填充图像的黑色部分，并使透明背景保持透明。

我怎样才能做到这一点？

# linux - 在Linux上跟踪加载到内存中的图像的内存地址

> ID：15972867
> 
> 赞同：1
> 
> 时间：2013-04-12T13:38:55.490
> 
> 标签：linux, memory, kernel, trace, memory-address

每次将 linux 上的图像加载到内存中时，我都会尝试跟踪信息。理想情况下，我需要

*   进程的pid，
*   事件的时间戳，
*   加载图像的路径，
*   以及加载图像的内存位置。

我已经设法使用`open_exec`linux 上可用的跟踪点获取 pid、时间戳和路径，但是在跟踪加载图像的内存位置时遇到问题。有什么建议（跟踪点、标记、系统调用等）我可以如何跟踪这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:21:49.847

一个想法可能是跟踪所有 mmap(2) 调用，其方式类似于 strace(1) 跟踪调用的方式（srace 使用 ptrace(2) API）。`strace (some command) 2> FOO`您可以通过检查使用然后 grep看到的 strace 来尝试自己`mmap FOO`：

```
mmap2(NULL, 40654, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb80e5000
mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb80e4000
mmap2(0x724000, 37456, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x724000
mmap2(0x72c000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x7) = 0x72c000
mmap2(0x27e000, 117704, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x27e000
mmap2(0x299000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1a) = 0x299000
mmap2(0x697000, 17008, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x697000
mmap2(0x69b000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x3) = 0x69b000 
```

每个描述符都有对应的文件名（来自 open(2)），mmap(2) 的返回值将是图像在内存中映射的地址。

根据你如何拦截进程，你也可以在 dlopen 上注入一个钩子，尽管上面应该足够了

# wordpress - lessphp 导入路径问题，如果我使用手动导入路径

> ID：15972877
> 
> 赞同：1
> 
> 时间：2013-04-12T13:39:17.490
> 
> 标签：wordpress, import, path, lessphp

我正在为自己的开发需求开发**lessphp**编译器，这就是我想要实现的目标。

a）我有父主题和子主题都有较少的文件。

b) 使用**twitter 引导**较少的文件

c) 父主题的 twitter bootstrap 文件较少

d）我正在尝试通过使用@import 在我的子主题更少文件中使用来自父主题的更少文件

我试过：a）通过使用lessphp setVariables（）将路径作为php变量传递，它给了我这样的东西。

i) @import "E:\wamp\personal\multisite/wp-content/themes/my-theme/bootstrap/variables.less";

ii) @import "E:\wamp\personal\multisite/wp-content/themes/my-theme/bootstrap/mixins.less";

使用的代码：

```
@import "@{template_directory_path}/bootstrap/mixins.less"; 
@import "@{template_directory_path}/bootstrap/variables.less"; 
```

但它在 .css 文件中按原样输出，而不是作为 less 文件导入以进行解析。

b) 我尝试使用lessphp addImportDir() 设置目录搜索路径，但也没有用，

所以有谁熟悉我的情况，想帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T07:33:51.157

问题在于编码。我使用的 less 编译器需要将 .less 文件编码为没有 BOM 的 UTF-8。我所有的文件都被编码为带有 BOM 的 UTF-8。一旦我更改了编码，文件就会根据需要开始编译。

# android - 如何以编程方式检测杜比系统是否在 Android 应用程序上处于活动状态

> ID：15972884
> 
> 赞同：2
> 
> 时间：2013-04-12T13:39:34.180
> 
> 标签：android, audio, android-mediaplayer, kindle-fire, dolby-audio-api

我的 android 应用程序有问题，当我在启用杜比的 kindle fire 7" 上运行时，声音存在缺陷，但禁用此选项后，问题就消失了。

我正在使用 MediaPlayer 播放长音频文件，我不能使用 AudioPool 因为这些是背景声音，我已经在使用 SoundPool 播放效果。

有一种方法可以以编程方式检测杜比系统是否在 Android 应用程序上处于活动状态？

有没有办法让 MediaPlayer 接受多频道？

对不起我的英语不好：p

* * *

我找到了一种以编程方式设置属性“dolby.ds.state”的方法，但这导致了一个大问题，所以不要那样做！

这种方式是：

```
System.setProperty("dolby.ds.state", "off"); 
```

当我这样做时，该属性被应用但仅在重新启动设备时，完成后我通常通过设备更改菜单选项仍然保持以编程方式设置值。

如果你做了同样愚蠢的事情，我已经找到了解决它的方法，运行以下代码并重置设备：

```
Properties sysProps = System.getProperties();
sysProps.remove("dolby.ds.state");
System.clearProperty("dolby.ds.state"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:23:57.617

如果你这样做，`adb shell getprop | grep dolby`你会看到有一个系统属性 dolby.ds.state 在它处于活动状态（播放音频）时在 On 和 Off 之间切换

要从您的应用程序查询活动状态，您可以查询系统属性（请注意，您可能必须将 try/catch 块包裹起来以保持 Java 满意）

```
Class getSysProp = null;
getSysProp = Class.forName("android.os.SystemProperties");
Method method = null;
method = getSysProp.getDeclaredMethod("get", String.class);
String prop = null;
prop = (String)method.invoke(null, "dolby.ds.state"); 
```

看起来不同类型的音频触发了杜比状态 - 如果您观看 logcat 播放 iHeartRadio 之类的东西，您会看到杜比设置被绕过，因此您可以简单地更改您正在使用的编解码器。不想让它打开。

** 编辑：使用新的官方杜比 API 更新 **

请参阅[http://developer.dolby.com/](http://developer.dolby.com/)以获得更完整（且不那么 hacky！）的解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T19:19:29.813

杜比现在有一个可用的官方 API，我相信它会满足您的需求。请务必查看[http://developer.dolby.com](http://developer.dolby.com)

作为应用程序开发人员，您现在可以访问杜比技术。

# c++ - 各种类型的默认模板参数

> ID：15972885
> 
> 赞同：1
> 
> 时间：2013-04-12T13:39:34.713
> 
> 标签：c++, templates

我正在尝试创建一个程序，我必须在其中使用模板，我现在有点卡住了。这是我的代码的一部分：

```
 template <typename _Type, typename _Comparator = equal_to</*char*/> >
        class CSearch {
public:
    CSearch();
    CSearch(const _Comparator & cmp);
    void Add(int id,
            const _Type & needle);
    set<int> Search(const _Type & hayHeap) const;
private:

    struct CSElem {
        int id;
        _Type sekvence;
    };
    vector<CSElem> data;
    _Comparator comp;
};

template <typename _Type, typename _Comparator>
CSearch<_Type, _Comparator>::CSearch() {
    comp = _Comparator();
}

.......

template <typename _Type, typename _Comparator>
void CSearch<_Type, _Comparator>::Add(int id, const _Type& needle) {
    CSElem temp;

    .....

    data.push_back(temp);
}

template <typename _Type, typename _Comparator>
set<int> CSearch<_Type, _Comparator>::Search(const _Type& hayHeap) const {
typename _Type::const_iterator j, t;

   ...... //trying to find out which items of the variable data are part of hayHeap

                    if (comp(*t, *j)) {
                        ......
                    }

   ......

}

/*
 *
 */
int main(int argc, char** argv) {
    CSearch <string> test1;
    test1 . Add(0, "hello");
    test1 . Add(1, "world");
    test1 . Search("hello world!");

    CSearch <vector<int> > test2;

....

} 
```

所以问题是，当我不向模板提供第二个参数时，对于存储在测试变量中的类型，比较器应该是 equal_to，所以对于字符串来说它应该是

```
equal_to<char> 
```

或用于整数向量

```
equal_to<int> 
```

我已经考虑了很长时间，但仍然没有弄清楚如何声明模板或做什么，它具有前面提到的功能。如果有人能给我一个提示或如何解决这个问题的例子，我会很高兴。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:45:20.420

您可以在模板签名中使用先前的模板参数来形成后续模板参数的默认参数。此外，您可以利用所有标准容器`value_type`为所包含元素的类型定义别名的事实：

```
template <typename _Type, 
          typename _Comparator = equal_to<typename _Type::value_type> >
//                                                      ^^^^^^^^^^^^ 
```

`std::string`s 也有成员函数和类型别名，允许它们被 C++ 标准库的通用算法使用，所以上面的方法在 is 时也应该`_Type`有效`std::string`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:45:44.990

试试这个为你的模板定义：

```
template <typename _Type, typename _Comparator = equal_to<_Type> > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:56:30.820

您还可以将 _ 设为`Container`模板模板参数。

```
template <typename _Type, template <typename> class _Comparator = equal_to > 
class CSearch {
public:
    typedef typename _Type::value_type elem_type;
    CSearch();
    CSearch(const _Comparator<elem_type> & cmp);
    void Add(int id,
            const _Type & needle);
    set<int> Search(const _Type & hayHeap) const;
private:

    struct CSElem {
        int id;
        _Type sekvence;
    };
    vector<CSElem> data;
    _Comparator<elem_type> comp;
}; 
```

# sitecore - Sitecore 网站元素说明

> ID：15972887
> 
> 赞同：1
> 
> 时间：2013-04-12T13:39:37.370
> 
> 标签：sitecore, sitecore6

sitecore 的新手。有人可以帮我理解下面的元素是如何工作的吗？而且，我需要什么样的场景来更新它。

```
<sites>
      <site name="shell" virtualFolder="/sitecore/shell" physicalFolder="/sitecore/shell" rootPath="/sitecore/content" startItem="/home" language="en" database="core" domain="sitecore" loginPage="/sitecore/login" content="master" contentStartItem="/Home" enableWorkflow="true" enableAnalytics="false" analyticsDefinitions="content" xmlControlPage="/sitecore/shell/default.aspx" browserTitle="Sitecore" htmlCacheSize="2MB" registryCacheSize="3MB" viewStateCacheSize="200KB" xslCacheSize="5MB" disableBrowserCaching="true"/>
      <site name="login" virtualFolder="/sitecore/login" physicalFolder="/sitecore/login" enableAnalytics="false" database="core" domain="sitecore" disableXmlControls="true"/>
      <site name="admin" virtualFolder="/sitecore/admin" physicalFolder="/sitecore/admin" enableAnalytics="false" enableWorkflow="true" domain="sitecore" loginPage="/sitecore/admin/login.aspx"/>
      <site name="service" virtualFolder="/sitecore/service" physicalFolder="/sitecore/service"/>
      <site name="modules_shell" virtualFolder="/sitecore modules/shell" physicalFolder="/sitecore modules/shell" rootPath="/sitecore/content" startItem="/home" language="en" database="core" domain="sitecore" content="master" enableAnalytics="false" enableWorkflow="true"/>
      <site name="modules_website" virtualFolder="/sitecore modules/web" physicalFolder="/sitecore modules/web" rootPath="/sitecore/content" startItem="/home" language="en" database="web" domain="extranet" allowDebug="true" cacheHtml="true"/>
      <site name="website" virtualFolder="/" physicalFolder="/" rootPath="/sitecore/content" startItem="/home" database="web" domain="extranet" allowDebug="true" cacheHtml="true" htmlCacheSize="10MB" registryCacheSize="0" viewStateCacheSize="0" xslCacheSize="5MB" filteredItemsCacheSize="2MB" enablePreview="true" enableWebEdit="true" enableDebugger="true" disableClientData="false"/>
      <site name="scheduler" enableAnalytics="false" domain="sitecore"/>
      <site name="system" enableAnalytics="false" domain="sitecore"/>
      <site name="publisher" domain="sitecore" enableAnalytics="false" enableWorkflow="true"/>
    </sites> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T13:46:27.467

这是`Sitecore`应用程序站点的配置。每个请求都与此配置中的所有站点匹配，第**一个**匹配`<site>`的节点用于确定`database`、和其他属性。`rootPath``startItem`

在**Sitecore**应用程序的单站点场景中，您很可能不需要更改它 - 只需使用标准配置并将您的内容放在`sitecore/content/home`节点下。

如果您计划多站点应用程序，则需要更改它 - 添加另一个`site`具有适当`hostName`和`virtualFolder`其他属性的节点。

更多信息可以在[这里](http://sdn.sitecore.net/Articles/Administration/Configuring%20Multiple%20Sites/Configuring%20Sites%20in%20web,-d-,config%20File.aspx)找到。这[是一个](http://sdn.sitecore.net/SDN5/Articles/Administration/Configuring%20Multiple%20Sites/Adding%20New%20Site/Examples.aspx)如何将新站点添加到您的`Sitecore`应用程序的示例。

# java - 如何解决更深版本的 jar-hell？

> ID：15972892
> 
> 赞同：4
> 
> 时间：2013-04-12T13:39:55.293
> 
> 标签：java, jar, osgi

我有两个 java 项目 Test1 和 Test2。Test1 在其 Eclipse Java Build Path 中添加了一个库库。Test2 在其构建路径中添加了一个 jar。

```
Test1      Test2
/src        /src
lib         Referenced Libraries
 x-1.1.jar   a.jar
 y.jar        x-1.2
              z 
```

Test1 中的代码调用依赖于 x-1.1.jar 的 y.jar 的函数/类。我不知道 y.jar 使用了 x-1.1.jar 的哪些函数/类，因为我没有 jar 的来源。类似地，Test2 调用 a.jar 的 z 包的函数/类，这些函数/类依赖于 x-1.2 版本的 jar。

现在我有一个测试项目，我需要两个项目 Test1 和 Test2

```
Test
/src
 Test1 code
 Test2 code
 some other code which uses Test1 as well as Test2 libraries
lib
 x-1.1.jar
 y.jar
Referenced Libraries
 a.jar
  x-1.2
  z 
```

现在，当我运行测试项目时，我陷入了 jar-hell 的境地。我的研究使用的两种方法是：

1.  类路径：这种方法的问题在于，由于 Test1 和 Test2 的库/jar 都添加到了 eclipse Java 构建路径中，因此只能访问第一个加载的 x.jar 版本，并且即使使用类加载器，Test2 代码也会中断。
2.  osgi：方法的问题是我只能从 osgi 包中导出 Test1 和 Test2 的 src 文件夹中的包，而不是项目引用的包。但是 Test 项目的代码使用了 Test1 和 Test2 库。

希望我足够清楚。任何帮助是极大的赞赏。提前致谢。

在问题中添加更多信息：我必须在我的项目中使用两个不同的 java sdk，它们捆绑了不同的 jar 文件。有冲突的是：

```
jar file                     Test1 ver  Test2 ver
org.apache.commons.codecs    1.3        1.6
org.apache.commons.logging   1.1.1      1.1.1
org.apache.log4j             1.2.7      1.2.15
httpclient                   4.1.1      4.0.3   
httpcore                     4.1        4.1.4 
```

有什么可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T15:01:14.947

OSGI 实际上很可能是一种解决方案，您有两种方法可以做到：

1.  将依赖的 jar 转换为 osgi 包，定义它们导出的包的版本（只需使用真实版本号）从您的测试项目中引用（OSGI 方式）它们，在导入包时指定确切的所需版本。这样，您将为每个库 jar 和每个项目创建 osgi 包。
2.  创建两个 osgi 包：test1 和 test2。嵌入他们所需版本的库（作为嵌入式 jar 或内联），并且不导出依赖包。您可以从测试包中自由引用 test1 和 test2。它们不会发生冲突，但会驻留在隔离的类加载器（捆绑类加载器空间）中。有关如何使用 maven 捆绑插件嵌入依赖项的信息： [​​http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin%28BND%29-EmbedDependencyandExportPackage](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin%28BND%29-EmbedDependencyandExportPackage)

强调这个配置：

```
<Embed-Dependency>
    *;scope=compile|runtime;inline=false
</Embed-Dependency> 
```

如何使用 BND 工具将 jars 包装到 osgi：http: [//java.dzone.com/articles/how-creategenerate-osgi](http://java.dzone.com/articles/how-creategenerate-osgi)

顺便说一句，您提到的大多数（如果不是全部）库应该已经准备好 osgi，因此您甚至不需要将它们转换为 osgi 包。这里可能出现的唯一问题是某些 jar 与 osgi 不兼容（例如那些对容器的类加载器架构做出假设的 jar），但这种情况很少见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:47:08.423

您可以尝试模拟类路径分离，就像 OSGi 所做的那样，通过实现具有两个`URLClassLoader`s 的自定义类加载机制，每个`x-1.*.jar`s 一个。

这是一般的想法：

```
File x1jar = new File("path/to/x-1.1.jar");
URLClassLoader x1loader = new URLClassLoader (x1ar.toURL(), this.getClass().getClassLoader());

File x2jar = new File("path/to/x-1.2.jar");
URLClassLoader x2loader = new URLClassLoader (x2ar.toURL(), this.getClass().getClassLoader());

// Test1 should look into x-1.1.jar ..
Class test1class = Class.forName("Test1", true, x1loader);

// .. Test2 should look into x-1.2.jar ..
Class test2class = Class.forName("Test2", true, x2loader);

// .. but both should see y.jar and z.jar via system class locader.

// Invoke whatever methods in testXclasses. 
```

**重要提示：** `x-1.1.jar`并且`x-1.2.jar`不能在系统类路径中，即您应该将它们放在单独的`lib`文件夹中，即您的类部署应如下所示：

```
+ myapp
  + lib
    myapp.jar
    y.jar
    z.jar
  + sandbox
    x-1.1.jar
    x-1.2.jar 
```

并且您**不能**`Test1`直接（使用or ）引用 Test1 / Test2 类`Test1.class`，只能使用类名（在 string 中`"Test1"`）。

看看[这个答案](https://stackoverflow.com/questions/60764/how-should-i-load-jars-dynamically-at-runtime)和[这个](https://stackoverflow.com/questions/738393/how-to-use-urlclassloader-to-load-a-class-file)。

# deployment - 适用于 vb6 的 Installshield 兼容版本？

> ID：15972896
> 
> 赞同：0
> 
> 时间：2013-04-12T13:40:06.647
> 
> 标签：deployment, vb6, installshield

我有**InstallShield version-16**。
但它与**vb6****不兼容**。 我用谷歌搜索了很多，但我无法弄清楚哪个版本与**vb6****兼容**。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:36:33.293

InstallShield v16 是 InstallShield 2010。V​​B6 虚拟机已包含在 Windows 中 10 多年了。如果您正在查看最新的 XP、Vista、7、8、Server 2008/R2 等的服务包，那么您很好。

InstallShield 处理 COM 提取，因此我想不出您断言它“与 vb6 不兼容”的依据是什么。你应该没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:34:52.597

一个版本的 InstallShield 与 Visual Studio 6 一起打包。您可以尝试获取 Visual Studio 6 的正版副本并从那里使用 InstallShield。

或者尝试一些设置创建市场上可用的应用程序。******

# c - JNI 将 Char* 2D 数组传递给 JAVA 代码

> ID：15972897
> 
> 赞同：3
> 
> 时间：2013-04-12T13:40:12.930
> 
> 标签：c, arrays, pointers, java-native-interface, char

我想通过 C 代码中的 JNI 层传递以下指针数组

```
char *result[MAXTEST][MAXRESPONSE] = {
    { "12", "12", "" },
    { "8",  "3",  "" },
    { "29", "70", "" },
    { "5",  "2",  "" },      
    { "42", "42", "" }
}; 
```

在java代码中我写了以下声明

```
public static native String[][] getResult(); 
```

我很困惑如何通过 JNI 层将该数组传递给 Java 代码？？？以下是JNI层描述

```
JNIEXPORT jobjectArray JNICALL Java_com_example_CheckResult_getResult
  (JNIEnv *env, jclass thiz) {
Confused over here ????
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:04:44.933

最后在 jop 的共享[链接](https://stackoverflow.com/questions/6070679/create-populate-and-return-2d-string-array-from-native-code-jni-ndk)上工作了几个小时后，我可以解决我的问题。代码如下：

```
JNIEXPORT jobjectArray JNICALL Java_com_example_CheckResult_getResult(JNIEnv *env, jclass thiz) {
    jboolean flag = JNI_TRUE;
    jclass stringClass = (*env)->FindClass(env, "java/lang/String");
    jobjectArray row;
    jobjectArray rows;

    jsize i, j;
    for(i=0; i<5; i++) {
        row = (*env)->NewObjectArray(env, MAXRESPONSE, stringClass, 0);
        for(j=0; j<3; j++) {
            (*env)->SetObjectArrayElement(env, row, j, (*env)->NewStringUTF(env, userResponse[i][j]));
        }

        if(flag == JNI_TRUE) {
            flag = JNI_FALSE;
            rows = (*env)->NewObjectArray(env, MAXTEST, (*env)->GetObjectClass(env, row), 0);
        }

        (*env)->SetObjectArrayElement(env, rows, i, row);
    }

    return rows;
} 
```

# cmake - CMake：如何在其他一切之前运行 add_custom_command

> ID：15972898
> 
> 赞同：33
> 
> 时间：2013-04-12T13:40:13.513
> 
> 标签：cmake

我有一个自定义命令

```
add_custom_command(
    OUTPUT config.h
    PRE_BUILD
    COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/mk_config_h.py ${CMAKE_CURRENT_BINARY_DIR}/config.h
) 
```

我试图在其他一切之前运行它并生成 unix Makefile。

但是 PRE_BUILD 仅支持 VS2010，这意味着它`config.h`是在链接之前构建的。

如何在 cmake 开始编译源代码之前制作自定义命令。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-12T14:15:36.790

您应该[`add_custom_target`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_target)改为使用[`add_dependencies`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_dependencies)并使您的正常目标依赖于它：

```
add_custom_target(
    myCustomTarget
    COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/mk_config_h.py ${CMAKE_CURRENT_BINARY_DIR}/config.h
)
add_dependencies(myTarget myCustomTarget) 
```

这应该确保在编译源代码之前运行该命令`myTarget`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-04T09:45:37.590

通常基于 makefile 的构建系统不需要将标头作为目标的一部分。此外，将标头添加到目标被认为是一种反模式。但生成标头是此规则的一个例外。

[http://voices.canonical.com/jussi.pakkanen/2013/03/26/a-list-of-common-cmake-antipatterns/](http://voices.canonical.com/jussi.pakkanen/2013/03/26/a-list-of-common-cmake-antipatterns/)

您应该将您的设置`${CMAKE_CURRENT_BINARY_DIR}/config.h`为其他一些编译目标的一部分。例如：

```
set(PROGRAM1_SOURCES main_program1.cpp)
set(PROGRAM1_HEADERS main_program1.h ${CMAKE_CURRENT_BINARY_DIR}/config.h)
add_executable(program1 ${PROGRAM1_SOURCES} ${PROGRAM1_HEADERS}) 
```

这样，CMake 将知道哪个目标实际需要生成`config.h`，并且能够将生成命令插入到正确的构建步骤中。

[另外，请参阅https://cmake.org/cmake-tutorial/#s5](https://cmake.org/cmake-tutorial/#s5)中的示例

# c# - 虚拟化 TreeView 中的滚动问题

> ID：15972901
> 
> 赞同：9
> 
> 时间：2013-04-12T13:40:21.013
> 
> 标签：c#, wpf, treeview, scroll

今天我终于决定尝试虚拟化 TreeView。要做到这一点，绑定是必需的。所以我决定做两件事测试 - 基于类型 + 虚拟化的 HierarchicalDataTemplate。

我为一些数据创建了一个基类。从基类创建了 2 个派生类。制作了 2 个 HierarchicalDataTemplate（每个派生类 1 个）以获得不同格式的节点。并运行 2 种类型的 10k 个节点。

**课程：**

```
public class ListItem_Generic
{
    public string Name { get; protected set; }
    public ListItem_Generic(string Name = "") { this.Name = Name; }
}

public class ListItem_Single : ListItem_Generic
{
    public ListItem_Single(string Name = "") : base(Name) { }
}

public class ListItem_Multi : ListItem_Generic
{
    public List<ListItem_Generic> Items { get; protected set; }
    public ListItem_Multi(string Name = "", List<ListItem_Generic> Items = null)
        : base(Name)
    {
        if (Items == null) 
            this.Items = new List<ListItem_Generic>(); 
        else 
            this.Items = new List<ListItem_Generic>(Items);
    }
} 
```

**生成带有一些子节点的 10k 一级节点，绑定：**

```
 public MainWindow()
    {
        InitializeComponent();

        // Create a list of sample items and populate them
        var lst = new List<ListItem_Generic>();

        int MaxHeaders = 10000;
        var rnd = new Random();
        // Now generate 10 000 records. First select random amount of headers
        int HeadersCount = rnd.Next(MaxHeaders);

        for (int i = 0; i < HeadersCount; i++)
        {
            var Childrencount = rnd.Next(100);
            var children = new List<ListItem_Generic>();
            for (int j = 0; j < Childrencount; j++)
                children.Add(new ListItem_Single("Child #"+j+" of parent #"+i));
            lst.Add(new ListItem_Multi("Header #" + i + " (" + Childrencount + ")", children));
        }
        for (int i = 0; i < MaxHeaders - HeadersCount; i++)
            lst.Add(new ListItem_Single("Line #" + i));

        // Bind lstView to lst
        lstView.ItemsSource = lst;
        lstView.UpdateLayout();
    } 
```

**带有 HierarchicalDataTemplates 的 XAML：**

```
<Window x:Class="Test_DataTemplates.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:Test_DataTemplates"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TreeView Name="lstView" VirtualizingPanel.IsVirtualizing="True">
            <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type loc:ListItem_Multi}" ItemsSource="{Binding Path=Items}">
                    <Border Background="RosyBrown">
                        <TextBlock Text="{Binding Path=Name}" Foreground="White" FontWeight="Bold"/>
                    </Border>
                </HierarchicalDataTemplate>
                <HierarchicalDataTemplate DataType="{x:Type loc:ListItem_Single}">
                    <TextBlock Text="{Binding Path=Name}"/>
                </HierarchicalDataTemplate>
            </TreeView.Resources>
        </TreeView>
    </Grid>
</Window> 
```

一切正常：

*   树视图被虚拟化（通过内存占用+加载时间很容易注意到）
*   从类型派生的节点格式正确

然而，当滚动到标题 #1000 并展开它时 - 滚动位置会跳转到其他地方，使展开的节点及其子节点不可见。

我做错了什么？有没有什么办法解决这一问题？

**更新：**移除虚拟化也移除了滚动错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T15:51:37.607

在 C# WPF 中的树虚拟化存在许多问题（包括主要问题，即只有第一级被虚拟化）之后 - 我无法找到合适的修复程序。微软接受了一份错误报告并回答说，滚动问题将在未来的某个版本中得到修复。

至于我个人的最终解决方案 - 我已经切换到自己的 ListTreeView 实现，即使用 List 和模拟树。这解决了虚拟化和滚动行为的所有问题。唯一的问题是 - 折叠树节点后删除许多项目。我必须检查是否更容易/更快地重新创建一个新列表而不是逐个删除项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:22:22.817

尝试关闭（不打开）回收

```
VirtualizingStackPanel.VirtualizationMode="Standard" 
```

优化文章是指开启它

[如何：提高 TreeView 的性能](http://msdn.microsoft.com/en-us/library/cc716882.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:20:48.473

如果 some1 可以在他们的环境中测试并确认问题，我将不胜感激。另外，玩了一下发现了另一种奇怪的行为：

*   将模式更改为标准
*   实现了 IsExpanded 双向绑定（不确定这是否需要）

接下来运行程序：

*   用一些大数字展开标题，比如 1000 - 滚动条跳转到其他地方

重新运行程序（为了实验的纯度）

*   展开第一个标题，如#2。
*   用一些大数字展开标题，比如 1000 - 滚动条保持在正确的位置......

扩展第一个节点看起来是一种解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T02:40:48.570

我在 MSDN 上找到了解决方案。显然它与默认的 TreeView 模板有关。以下修复了滚动条闪烁并在快速滚动时阻止随机节点扩展。

```
<Style x:Key="{x:Type TreeView}" TargetType="{x:Type TreeView}">
    <Setter Property="TreeView.Background" Value="Transparent"/>
    <Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True"/>
    <Setter Property="VirtualizingStackPanel.VirtualizationMode" Value="Recycling"/>
    <Setter Property="TreeView.SnapsToDevicePixels" Value="True" />
    <Setter Property="TreeView.OverridesDefaultStyle" Value="True" />
    <Setter Property="ItemsControl.ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="TreeView.Template">
        <Setter.Value>
            <ControlTemplate TargetType="TreeView">
                <ScrollViewer Focusable="False" CanContentScroll="True" Padding="4">
                    <ItemsPresenter HorizontalAlignment="Stretch"/>
                </ScrollViewer>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我尝试快速滚动，似乎没有再注意到问题。令人敬畏的是，您甚至不必取消虚拟化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-11T10:37:55.987

根据[https://msdn.microsoft.com/en-us/library/system.windows.controls.scrollunit(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.controls.scrollunit(v=vs.110).aspx) (ScrollUnit Enumeration)，有两个可能的值。默认值似乎是“像素”，这会导致滚动问题。如下所示切换到“项目”可解决问题：

VirtualizingStackPanel.ScrollUnit="Item"

# unix - /usr/local/bin/node: 未找到

> ID：15972902
> 
> 赞同：9
> 
> 时间：2013-04-12T13:40:21.090
> 
> 标签：unix, npm

我一直收到上面的错误，当我执行哪个节点时，我收到以下错误：

```
/usr/bin/node 
```

所以在我的 .bash_profile 中，我输入了：

```
export PATH=/usr/bin:$PATH 
```

但错误仍然没有消失

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-12-07T12:30:47.583

如果您**不能**或**不想**更改您正在运行的程序。（您可以在该程序中将 /usr/local/bin/node 更改为 /usr/bin/node ），另一种解决方案是创建一个从您的节点安装到它试图从中加载它的路径的链接。

以 root 身份运行：

```
ln -s /usr/bin/node /usr/local/bin/node 
```

其中第一个路径参数是**源**，第二个路径参数是**目标**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-24T12:50:24.590

这是完全正常的，不是错误。运行时`which`，如果安装成功，结果将是程序的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-23T12:51:12.883

您正在尝试运行 node.js 吗？在 ubuntu 14.04 中，node.js 安装在 usr/bin/nodejs 中。因此，要运行您需要使用的程序，而不是像 windows 操作系统这样`nodejs my_file.js`的节点。`node my_file.js`

您可以使用上述命令进行确认`which`。

# ios - 我可以启用警告以比较枚举和非枚举值吗？

> ID：15972911
> 
> 赞同：2
> 
> 时间：2013-04-12T13:40:35.140
> 
> 标签：ios, objective-c, c

我最近调试了一个问题，该问题是由于将枚举与非枚举值进行比较而引起的。这是一个简化的示例：

```
typedef NS_ENUM(NSInteger, MyType) {
    TypeVal1,
};

...

MyType type = TypeVal1;
int randomValue = 0;

BOOL compareTypeAndPrimiative = (randomValue == typeA); // No warning 
```

是否可以为此打开警告？

如果需要，我可以通过显式转换来抑制：

```
BOOL iKnowWhatImDoing = (randomValue == (int) typeA); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:02:16.137

不支持这种警告，因为 C 枚举不是强类型的，我相信标准要求将它们视为整数（或无符号整数）。作为 C 标准的一部分，始终允许将它们与常规整数进行比较，并且这种类型的警告最终会标记出许多正确的代码。我相信有人可以链接到 C 标准的适当部分。

特别是对于 iOS 和 Apple API，您会发现枚举值通常用作位掩码。在这些情况下，通常会编写如下代码：

```
if ((value & flag) == kFlag) { ... } 
```

您可能会争辩说为此目的使用枚举是一个坏主意，但您最终可能不得不对所有类型的代码禁用此警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:06:19.263

我刚刚浏览了 LLVM 手册，似乎没有选择。然后我尝试打开所有编译器警告（`-Weverything`），但是没有警告您的`enum`情况。

所以答案是否定的。

避免此类错误的最佳解决方案是适当地命名变量/常量。明确变量/常量代表什么。那么比较中的错误也应该很明显。

# javascript - 在javascript中将svg路径转换为多边形

> ID：15972912
> 
> 赞同：2
> 
> 时间：2013-04-12T13:40:46.670
> 
> 标签：javascript, svg, polygon

我正在尝试将 svg 路径转换为 ​​javascript 中的 svg 多边形。我发现这个函数可以沿着路径爬行并提取它的坐标。

```
 var length = path.getTotalLength();
    var p=path.getPointAtLength(0);
    var stp=p.x+","+p.y;

    for(var i=1; i<length; i++){

        p=path.getPointAtLength(i);
        stp=stp+" "+p.x+","+p.y;

    } 
```

这可行，但它会为最初只有六个点的多边形返回数百个点。我怎样才能只得到必要的点（所有路径都是直线，没有曲线）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:03:32.130

好的。。函数 getPathSegAtLength() 返回实际路径段的编号。这样就很容易了。

```
 var len = path.getTotalLength();
    var p=path.getPointAtLength(0);
    var seg = path.getPathSegAtLength(0);
    var stp=p.x+","+p.y;

    for(var i=1; i<len; i++){

        p=path.getPointAtLength(i);

        if (path.getPathSegAtLength(i)>seg) {

        stp=stp+" "+p.x+","+p.y;
        seg = path.getPathSegAtLength(i);

        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:11:29.797

`path.getPointAtLength()`适用于不需要速度和质量的粗略用途。如果你得到每个像素，你会得到数千个点，但质量仍然很低，因为 SVG 路径可以有十进制值，例如。0.1，0.2。

如果你想通过调用例如更精确。`path.getPointAtLength(0.1)`您可以轻松地在复杂路径中获得数万个点，并且该过程持续几秒或几十秒。之后，您必须减少点数（[https://stackoverflow.com/a/15976155/1691517](https://stackoverflow.com/a/15976155/1691517)），这又会持续几秒钟。但是，如果删除了错误的点，质量仍然会很低。

更好的技术是首先将所有路径段转换为三次曲线，例如。使用[Raphael 的](http://raphaeljs.com/)path2curve()，然后使用一些自适应方法 ( [http://antigrain.com/research/adaptive_bezier/](http://antigrain.com/research/adaptive_bezier/) ) 将立方线段转换为点，您可以同时获得速度和质量。之后就不需要减分了，因为自适应过程本身就有参数来调整质量。

我已经制作了一个可以完成所有这些功能的函数，当它对速度进行足够优化时，我将发布它。经过数千条随机路径的测试，质量和可靠性似乎是 100%，而且速度明显快于`path.getPointAtLength()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:12:17.817

要遍历这些段，请使用以下内容：

```
var segList = path.normalizedPathSegList; // or .pathSegList

for(var i=1; i<segList.numberOfSegments; i++){
    var seg = segList.getItem(i);
} 
```

如果你想减少顶点的数量，那么你可以使用[这里描述](https://stackoverflow.com/questions/13730062/simplifying-svg-path-strings-by-reducing-number-of-nodes/13738156#13738156)的[Simplify.js](http://mourner.github.com/simplify-js/)。

# c++ - SDL DevC++ 链接器问题

> ID：15972913
> 
> 赞同：1
> 
> 时间：2013-04-12T13:40:59.313
> 
> 标签：c++, sdl, dev-c++

我开始了lazyfoo SDL教程（[http://lazyfoo.net/SDL_tutorials/lesson01/windows/devcpp/index.php](http://lazyfoo.net/SDL_tutorials/lesson01/windows/devcpp/index.php)），我完全按照所写的安装说明进行操作，但是当我编译它时-->

```
#include "SDL/SDL.h"

int main( int argc, char* args[] )
{
   //Start SDL
   SDL_Init( SDL_INIT_EVERYTHING );

   //Quit SDL
   SDL_Quit();

   return 0;    
} 
```

发生这种情况-->

> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 在搜索 -lSDLmain 时跳过不兼容的 C:/SDL-1.2.15/lib/libSDLmain.a
> 
> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 在搜索 -lSDLmain 时跳过不兼容的 C:/SDL-1.2.15/lib\libSDLmain.a
> 
> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 在搜索 -lSDLmain 时跳过不兼容的 C:/SDL-1.2.15/lib/libSDLmain.a
> 
> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 找不到 -lSDLmain
> 
> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 在搜索 -lSDL 时跳过不兼容的 C:/SDL-1.2.15/lib/libSDL.dll.a
> 
> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 在搜索 -lSDL 时跳过不兼容的 C:/SDL-1.2.15/lib/libSDL.dll.a
> 
> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 找不到 -lSDL
> 
> C:\SDL Tutorial Projects\collect2.exe [错误] ld 返回 1 退出状态

我有`DevC++ 5.4.1`并且我正在尝试安装`SDL-devel-1.2.15-mingw32.tar.gz`

这和我的问题有关系吗？

我已经尝试了一切，它只是说跳过不兼容的`libSDLmain.a`和`libSDL.dll.a`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T17:35:24.530

您应该使用 MinGW 安装 32 位的 Dev-C++ 并使用此选项来使用 SDL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:03:51.310

> c:\program files (x86)\dev-cpp\mingw64\x86_64-w64-mingw32\bin\ld.exe 在搜索 -lSDLmain 时跳过不兼容的 C:/SDL-1.2.15/lib/libSDLmain.a

您可能有不兼容的二进制文件。为什么要使用 x64 编译器？尝试安装[MinGW](http://sourceforge.net/projects/mingw/files/)并使用原始 gcc 进行编译。

如果您尝试这样做，请将 MinGW/bin 添加到您的路径并运行`gcc 'filelocation' -lmingw32 -lSDLmain -lSDL`

或者尝试使用 x86 版本的 Dev。此外，IIRC`-lSDLmain`应该出现在 Windows 之前`-lSDL`和 Windows 上，您需要添加`-lmingw32`它才能链接并正常工作。

如果这一切都失败了，一种肯定的方法是获取相同的 MinGW 并使用 msys 自己编译[SDL](http://www.libsdl.org/release/SDL-1.2.15.zip) .. 只需更改目录并运行

```
./configure
mingw32-make 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-28T09:42:08.100

我认为这是因为您正在尝试使用 32 位二进制文​​件编译 64 位应用程序。您需要做的就是设置一个标志以将您的应用程序编译为 32 位应用程序，例如 gcc（或 g++）main.cpp -o -m32，或者，如果您使用的是 CMAKE 添加

```
set(CMAKE_C_FLAGS -m32)
set(CMAKE_CXX_FLAGS -m32) 
```

一开始。

# c# - Asp.net MVC 始终使用参数路由到 Root

> ID：15972914
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:41:01.050
> 
> 标签：c#, asp.net, asp.net-mvc, routing, url-routing

现在，问题。我有一个电子商务网站，并且我有一个名为 Store 的控制器，其中包含一个操作索引。当有人键入 www.mysite.com/sony 时，我想使用参数路由到控制器存储和操作索引`brand=Sony`。如果有人键入 www.mysite.com/sony-tv，我想路由到控制器存储和操作索引，但使用参数`brand=sony`和`department=tv`.

我通过为存储在数据库中的每种情况创建路由并在应用程序启动时动态构建路由来获得这一点。它在少数情况下工作正常。首先，我需要索引路线。我需要在sony之前映射路线sony-tv，否则/sony-tv同样映射到/sony。

当我进入站点主页 (www.mysite.com) 并单击 Url.Action("Index","Store", new {brand=Sony}) 时，它会将我引导至 www.mysite.com/sony。好的！。现在，在 SONY 品牌中，我将点击 Url.Action("Index","Store", new {brand=sony, department=tv})，我可以看到所有来自 Sony 的电视。

直到这里一切都运行良好。在数据库中，我有 1 条通往 /sony 的路线，我说我有一个名为品牌的参数，其值为 Sony，以及一个受约束的命名品牌，其值为 Sony。我有另一条路线对索尼电视说同样的方式。模式sony-tv 有一个名为brand 的参数，其值为sony 和一个名为deparment 的参数，其值为tv，参数约束相同。

在我看来，这意味着 www.mysite.com/Sony 的路线是 Store/Index/brand=sony，而 www.mysite.com/sony-tv 是 Store/Index/brand=sony&department=tv。有了约束，我知道如果部门不是电视或者参数部门不存在，它将发送到 www.mysite.com/sony

当我在 www.mysite.com/sony-tv 时，如果我将鼠标移到其他品牌上，则指向 Url.Action("Index","Store", new {brand=Apple}) 的链接是 www .mysite.com/Apple-Tv 我有一条通往 Apple-TV 的路线，与索尼相同。URL 存在，但我没有传递 TV 参数。我只传递了这个链接（品牌链接）的品牌。我想将用户移至品牌的根目录，而他已移至品牌+部门。

我不知道，看起来部门变量又通过了，我不知道如何取消它。

我完全错了吗？我在做什么是有效的？我能做到吗？我的错误在哪里？

在 cshtml 文件中：

```
@Html.ActionLink(febrand.Name.ToUpper(), "Index", new { controller = "Store", brand= febrand.FriendlyName, department = string.Empty }) 
```

在最终的 html 文件中（显示来自 google chrome 的源代码）：

```
<a href="/sony?department=tv">SONY</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:20:00.213

首先，对于您可以使用两条自定义路线进行的操作来说，这似乎需要做很多工作。此外，随着您的路由表变得更大（例如，添加更多品牌和/或部门），由于必须扫描更大的路由列表，对您站点的每个请求都将需要更长的时间来完成。

因此，让我们尝试修复您的路由表。将这两个路由放在 global.asax 中默认路由的**上方：**

```
routes.MapRoute(
    "Department",
     "{brand}-{department}",
     new { controller = "Store", action = "Index" };

routes.MapRoute(
     "Brand",
      "{brand}",
      new { controller = "Store", action = "Index" }); 
```

至于您的问题，当您创建操作链接时，路由引擎会从您当前所在的视图中保留部门路由值。为了让它在生成链接时忘记该参数，请在不需要时为部门变量发送一个空值。

```
@Html.ActionLink("Apple", "Index", new{controller="Store", brand="Apple", department = string.empty}); 
```

**编辑**

我觉得您的路由可能处于一个奇怪的边缘情况（并且整个 SO 中都有很多这个问题的例子，例如[这里](https://stackoverflow.com/questions/6530220/how-to-ignore-current-route-values-when-generating-links?lq=1)和[这里](https://stackoverflow.com/questions/780643/asp-net-mvc-html-actionlink-keeping-route-value-i-dont-want)）。除了我提供的解决方案之外，解决方案是切换到 Html.RouteLink 而不是 Html.ActionLink。

*我们将要使用的 RouteLink 签名*

```
Html.RouteLink(string linkText, string routeName, object RouteValues) 
```

*您的代码的示例品牌链接*

```
@Html.RouteLink(febrand.Name.ToUpper(), "Brand", new { controller = "Store", action = "Index", brand= febrand.FriendlyName}) 
```

# java - selenium 服务器在 Firefox 中启动两个测试执行选项卡

> ID：15972916
> 
> 赞同：2
> 
> 时间：2013-04-12T13:41:07.770
> 
> 标签：java, jsf, selenium, seam, htmlsuite

因此，正如标题所暗示的那样，当`HTML`使用自定义 firefox 配置文件（也带有`multiwindow`）启动我的套件时，服务器正在启动两个选项卡，都试图执行测试，目标是执行操作的同一个窗口。如果我关闭硒选项卡之一，然后测试将成功完成。

自定义配置文件是在 Firefox 19.0.2 中创建的配置文件，我现在在 20.0 中运行它

现在，如果我更新自定义配置文件以与最新版本的 Firefox 一致，这将修复启动测试时的选项卡问题......但是我的问题是......

有人知道这种行为的原因吗？

非常感谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T16:48:42.557

我认为 Firefox 会打开第二个选项卡，因为浏览器软件的当前里程碑与 prefs.js 中的设置值不匹配`browser.startup.homepage_override.mstone`：浏览器尝试在新选项卡中显示某种成功的更新页面。

根据[https://bugzilla.mozilla.org/show_bug.cgi?id=102313](https://bugzilla.mozilla.org/show_bug.cgi?id=102313)`browser.startup.homepage_override.mstone`您可以通过手动设置来 抑制这种行为`ignore`。对我来说，prefs.js 中的这个单一更改就成功了。

半位

# c# - 如何在 MySQL 数据库中保存印地语字符

> ID：15972917
> 
> 赞同：0
> 
> 时间：2013-04-12T13:41:09.720
> 
> 标签：c#, mysql, mysql-workbench

我在一个窗口应用程序（C#）中工作，数据库是 MySQL。在应用程序中，我正在获取 gmail 收件箱并将其保存到数据库中。但是我的问题是，当我在代码中使用插入查询时，`Subject`或者`message`在印地语中显示消息的列中，但是当保存在数据库中时，它会显示`????????`这样的字符。我已经在 MySQL 中更改了 UTF-8 中的所有内容。

当我使用 MySQL 编辑器插入相同内容时，它会保存在印地语字体中。这对我来说是一个奇怪的情况，因为我是 MySQL 新手。

```
 foreach (ImapMessageInfo message in messages)
        {

            InsertMail(message.UniqueId, message.Sender.ToString(), message.To.ToString(), message.Subject.Trim(), message.Date.LocalTime, client.GetMailMessage(message.SequenceNumber).BodyText);

        }

 public void InsertMail(string uid, string from, string to, string subject, DateTime datetime, string message)
    {
        try
        {

            MySqlCommand cmd = new MySqlCommand();

            cmd.Parameters.AddWithValue("@unique_id", uid);
            cmd.Parameters.AddWithValue("@sender", from);
            cmd.Parameters.AddWithValue("@reciever", to);
            cmd.Parameters.AddWithValue("@subject", subject);
            cmd.Parameters.AddWithValue("@date", datetime);
            cmd.Parameters.AddWithValue("@message", message);

            cmd.Parameters.AddWithValue("@mail_status", "unread");
            cmd.Connection = con;
            string query = "Insert Ignore into gmail_inbox(unique_id,sender,reciever,subject,date,message,mail_status) values (@unique_id,@sender,@reciever,@subject,@date,@message,@mail_status) ";
            cmd.CommandText = query;
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:58:04.353

检查数据库的字符集和排序规则。使用 UTF8 应该可以让您正确保存这些内容并正确显示它们。还要确保在初始化连接时将连接字符集设置为 utf8，否则可能会出现其他错误。

基本上你需要确保列/表和连接字符集是 utf8，然后你应该可以插入你想要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T09:15:26.860

尝试这个：

```
// mytable=2 fields id(Auto increment),title(nvarchar(max))
string title = "बिलाल";

SqlCommand cmd = new SqlCommand("insert into mytable values (N'" + title + "')", con);

con.Open();
cmd.ExecuteNonQuery();
con.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-05T10:42:13.443

# 对于每个数据库：

```
ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci; 
```

# 对于每个表：

```
ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; 
```

# 对于每一列：

```
ALTER TABLE table_name CHANGE column_name column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

#update database properties
datasource.url = jdbc:mysql://localhost:3306/DBName?useUnicode=yes&characterEncoding=UTF-8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-24T17:31:45.160

按照步骤：

1.  在我的 sql 中更改`"utf8 - default collection"`表中的集合。

[![在此处输入图像描述](https://i.stack.imgur.com/tbMQi.png)](https://i.stack.imgur.com/tbMQi.png)

2.  添加`"Character Set=utf8;"`到连接字符串中。

    ```
    <appSettings>
        <add key="ConnString" value="Server=xxxxx; Port=3306; Database=books;Uid=xxxx; Pwd=xxxx; Convert Zero Datetime=True; Character Set=utf8;" />
    </appSettings> 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-30T10:33:13.543

1) 使用以下查询将表排序规则设置为 utf8_unicode_ci

```
alter table <table_name> convert to character set utf8 collate utf8_unicode_ci; 
```

2）你需要修改你的连接字符串并添加 Character Set=utf8 它应该是这样的

```
"User Id=YourUserID;Password=YourPassword;Port=3306;Database=YourDatabaseName;Character Set=utf8; 
```

# c# - 文本框中的 C# 正则表达式只显示“...”？

> ID：15972918
> 
> 赞同：0
> 
> 时间：2013-04-12T13:41:15.503
> 
> 标签：c#, winforms, textbox

```
 string input = "href http://www.url.com/news/world/391370/abc/abc/abc.htm"; // input
        Match match = Regex.Match(input, @"/([a-z0-9\-].+)", RegexOptions.IgnoreCase); // pattern
        if (match.Success)
        {
            string key = match.Groups[1].Value;
            Console.WriteLine(key);
        } 
```

输出

“ [http://www.url.com/news/world/391370/abc/abc/abc.htm](http://www.url.com/news/world/391370/abc/abc/abc.htm) ” 这是工作。！！

但是在winForm文本框中

```
 private void button1_Click(object sender, EventArgs e)
      {
        string tb1 = Convert.ToString(textBox1);       // input
        string tb2 = Convert.ToString(textBox2);  // output
        Match match = Regex.Match(tb1, @"/([a-z0-9].+)", RegexOptions.IgnoreCase);
        if (match.Success)
        {
            string key = match.Groups[1].Value;
           textBox2.Text = key.ToString();
        } 
```

输出

**“www.url.com/news/world/391370/abc...”** <--- 文本框无法显示完整结果只显示“...”，为什么？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:16:13.787

您的文本框在物理上不足以显示所有数据，整个字符串。您需要转到表单并使文本框变大。您还可以使用文本框的其他属性，这将阻止 ... 出现，包括“自动调整大小”属性。

# sql - Vaadin SQLContainer 参考 - 如何实现外键关系？

> ID：15972920
> 
> 赞同：1
> 
> 时间：2013-04-12T13:41:21.463
> 
> 标签：sql, vaadin

我不明白如何实现与 Vaadin 的 SQLContainer 的外键关系。假设我有两个表：

1.  带有属性*title*和 *author_id*的书
2.  AUTHOR 具有属性 *id_author、first_name* 和 *last_name*

当然 BOOK.author_id 引用了 AUTHOR.id 我已经创建了一个具有所有必要约束的 MySQL-DB。此外，我创建了容器并按如下方式填充它们：

```
private static void initContainers() {
    try {
        /* TableQuery and SQLContainer for book -table */
        TableQuery q1 = new TableQuery("book", connectionPool);
        bookContainer = new SQLContainer(q1);

        /* TableQuery and SQLContainer for author -table */
        TableQuery q2 = new TableQuery("author", connectionPool);
        authorContainer = new SQLContainer(q2);

    } catch (SQLException e) {
        e.printStackTrace();
    }
}

@SuppressWarnings("unchecked")
public boolean addBook(Book book) {
    Object id_author = authorContainer.addItem();
    authorContainer.getContainerProperty(id_author,  "first_name").setValue(book.getAuthor().getFirstName());
    authorContainer.getContainerProperty(id_author, "last_name").setValue(book.getAuthor().getLastName());      

    Object id = bookContainer.addItem();   
    bookContainer.getContainerProperty(id, "title").setValue(book.getTitle());         

//HERE IS MY TRY FOR ADDING THE REFERENCE (FOREIGN KEY RELATION)
    bookContainer.addReference(authorContainer, "author_id", "id_author");         
    authorContainer.setReferencedItem("id_author", "author_id", bookContainer);
    bookContainer.getContainerProperty(id, "author").setValue(bookContainer.getReferencedItem("id_author", authorContainer)); 

    try {
        authorContainer.commit();
        bookContainer.commit();
        return true;
    } catch (UnsupportedOperationException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return false;
} 
```

谁能告诉我我在这里做错了什么？我还尝试在添加引用之前提交作者容器，但这也不起作用。

我总是在 *bookContainer.getReferencedItem("id_author", authorContainer)* 处得到 NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T15:09:27.520

尝试`authorContainer.getReferencedItem("id_author", bookContainer)`

# c# - Windows 窗体加载后调用服务

> ID：15972921
> 
> 赞同：0
> 
> 时间：2013-04-12T13:41:26.397
> 
> 标签：c#, winforms, windows-mobile, compact-framework

我有一个在系统启动后立即启动的移动应用程序（用于 Windows Mobile 6.1 的 .NET CF2）。

我想强制加载表单，然后他们调用 Web 服务。还有一个手动调用 WS 的按钮。

到目前为止，我还没有设法首先加载表单。首先，它调用服务，然后它们显示表单。

你能帮助我吗？

下面是我正在使用的代码。

//APP主窗体

使用系统；

```
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

using System.Diagnostics;
using System.Threading;

namespace AtualizaColetores
{
    public partial class frmInicio : Form
    {
        public frmInicio()
        {
            InitializeComponent();
            Program.ShowHide.ShowTopStatusbar(false);

            ThreadPool.QueueUserWorkItem(delegate
            {
                Thread.Sleep(1000);

                //incia animação para indicar processamento em segundo plano
                Cursor.Current = Cursors.WaitCursor;
                Cursor.Show();

                Atualizador executar = new Atualizador();
                executar.AtualizaColetor();
            });

            try
            {
                Process firstProc = new Process();
                firstProc.StartInfo.FileName = @"\WOPT\RF_WOPT.exe";
                firstProc.EnableRaisingEvents = true;

                firstProc.Start();

                firstProc.WaitForExit();
                this.Activate();
                Form destino = new frmControles();
                destino.Show();

            }
            catch (Exception ex)
            {
                MessageBox.Show("Erro na incialização do programa: " + ex.Message);
                return;
            }

            //Para a animação para indicar processamento em segundo plano
            Cursor.Current = Cursors.Default;
            Cursor.Show();
        }

    }
} 
```

//此处的中心代码ODE下载并替换应用程序的当前版本，如果需要的话

```
using System;

using System.Collections.Generic;
using System.Text;
using System.IO;

using System.Xml;
using Ionic.Zip;

namespace AtualizaColetores
{
    class Atualizador
    {
        public void AtualizaColetor()
        {

            if (File.Exists(@"\WOPT\About.xml"))
            {
                string versaoAplicativo = "", LocalAplicativo = "", tipoColetor = "";

                XmlDocument xmlDoc = new XmlDocument();
                xmlDoc.Load(@"\WOPT\About.xml");

                XmlNodeList xnList = xmlDoc.GetElementsByTagName("VersaoRF");

                foreach (XmlNode xn in xnList)
                {
                    versaoAplicativo = xn["versaoAplicativo"].InnerText;
                    LocalAplicativo = xn["localAplicativo"].InnerText;
                    tipoColetor = xn["tipoColetor"].InnerText;
                }

                ConectorWOPT.WOPT executar = new ConectorWOPT.WOPT();

                //inserir tratamento de erro aqui.
                byte[] arquivo = executar.AtualizaColetores(LocalAplicativo, versaoAplicativo, tipoColetor);

                string caminhoWOPT = @"\WOPT";

                if (arquivo.Length > 0)
                {
                    try
                    {
                        MemoryStream ms = new MemoryStream(arquivo);
                        FileStream fs = new FileStream(
                        @"\novaVersao.zip", FileMode.Create);
                        ms.WriteTo(fs);
                        ms.Close();
                        fs.Close();
                        fs = null;
                        ms = null;
                    }
                    catch (Exception ex)
                    {
                        System.Windows.Forms.MessageBox.Show(ex.Message);
                    }

                    if (System.IO.Directory.Exists(caminhoWOPT))
                    {
                        try
                        {
                            System.IO.Directory.Delete(caminhoWOPT, true);

                            if (!System.IO.File.Exists(caminhoWOPT))
                            {
                                System.IO.Directory.CreateDirectory(caminhoWOPT);
                            }
                        }
                        catch (IOException e)
                        {
                            System.Windows.Forms.MessageBox.Show(e.Message);
                        }
                    }

                    if (File.Exists(@"\novaVersao.zip"))
                    {
                        using (ZipFile zip = ZipFile.Read(@"\novaVersao.zip"))
                        {
                            foreach (ZipEntry e in zip)
                            {
                                e.Extract(@"\WOPT\", ExtractExistingFileAction.OverwriteSilently);  // overwrite == true
                            }
                        }
                        System.IO.File.Delete(@"\novaVersao.zip");

                        System.Windows.Forms.MessageBox.Show("Coletor atualizado com sucesso");

                    }
                    else
                    {
                        System.Windows.Forms.MessageBox.Show("Falha na atualização");
                    }
                }
            }
            else
            {
                System.Windows.Forms.MessageBox.Show("O aplicativo não está instalado neste coletor. Contate um supervisor.");
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:18:25.207

只需使用计时器或线程延迟处理即可。这些方面的东西：

```
public frmInicio()
{
    InitializeComponent();
    Program.ShowHide.ShowTopStatusbar(false);

    ThreadPool.QueueUserWorkItem(delegate
    {
        Thread.Sleep(1000); // or however long you need
        btnZip_Click(this, EventArgs.Empty);
    });
} 
```

或者拨打电话`OnActivate`，检查第一次运行。

**编辑 1**

您的构造函数中有很多（IMO 太多）在进行。我敢打赌，Form 可见性问题与您在 Form 构造函数中创建一个 Process 并等待该过程完成后再继续这一事实有很大关系。如果该应用程序正在等待您的 Web 服务调用的输出，则线程创建毫无意义，因为您仍然使构造函数串行依赖于调用。

# .net - 影响整个系统的大型数据库查询

> ID：15972928
> 
> 赞同：1
> 
> 时间：2013-04-12T13:41:52.807
> 
> 标签：.net, sql, sql-server

我们有一个支持大约 500 多个用户的 Windows 应用程序（用 .Net 编写）。这个应用程序有一个特定的功能，它将带回大约 40k 记录（在 MS SQL Server 上），每天运行几次。

但是，当运行这个大型查询时，系统的其他用户似乎正在“超时”，这对我来说似乎意味着大型查询占用了服务器资源并导致其他用户无法正确使用系统。

我试图了解资源分配是如何工作的，因为我觉得 40k 查询并不完全庞大，但相当大。

我们的应用架构是 UI -> 服务层 -> Web Service -> 数据库

可能是导致问题的 Web 服务，还是我的查询可能“锁定”了 SQL 数据库而不让其他用户与之交互？

SQL 查询非常简单，它从特定表中选择所有记录（该表包含从其他表中提取的数据，现在大约有 40k 条记录，表中大约有 50 列）：

```
SELECT * 
FROM MyTable 
```

几乎是查询。没有连接，我正在使用存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:04:09.120

If you do select * from MyTable it's going to lock the table so everybody else has to wait.

First thing to check - in your code, how are you reading the records? If you are using a datareader, it will lock the table until you close it. Use a SQLDataAdapter and put it into a table. That will only leave the table locked for the time it takes actually pull the data.

Another thing is the die hards will say don't do a * on the pull. Only pull the fields you need.

If you don't mind having 'dirty' data (non-committed) do a select * from mytable with (nolock). That means that it will get anything that hasn't been committed yet. But if the tables is not changing constantly, that should be an issue.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:57:37.233

我真的没有足够的信息来说出任何确定的信息，但我可以做出一些猜测/建议。

首先，如果没有从任何来源写入此表......当查询处于活动状态时，您可以通过`with (nolock)`向该选择添加提示来改进事情。再说一遍：只有在查询期间表保持不变，或者如果您对此查询感到满意，因为脏读而产生过时/错误的结果时才这样做。

此外，您对查询的描述中的短语“差不多”表明我们可能没有*看到*其他内容；它仍然很简单，但它是一些东西。如果该内容是 ORDER BY 子句，则使顺序与主键匹配（或将主键与您需要的顺序对齐）也可能会有所帮助。

至于作为瓶颈的 Web 服务层与数据库，这应该很容易确定。如果是 Web 服务，您会知道，因为 CPU、RAM 或网络 I/O 会在服务层的服务器上飙升至 100%，淹没其他客户端。可能是服务，因为服务网络层必须处理您的所有数据两次：一次从数据库中提取数据，另一次将数据重新传输到最终用户客户端。所以它的数据使用有一个小的乘数效应。但即使有这种效果，我认为数据库更有可能是罪魁祸首。

最后一个建议是，如果这些数据过时是可以的，您可以尝试将代码添加到您的服务层以缓存它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:27:34.067

40k 行 x 50 列是要在拥有 500 多个用户的实时系统上提取的大量数据。假设这 50 列的平均列大小为 20 字节，那么您将检索大约 800k 的数据，但如果您有许多 varchar 的 100 字节长，那么该大小将大大增加。

我会质疑为什么您需要如此庞大的查询，对于某人而言，显然数据太多了，无法在屏幕上舒适地查看。如果它是为其他数据存储提供数据的数据提取，那么请考虑仅在非办公时间运行，或者在后台分批提取数据或将数据复制到单独的服务器。

# mstest - 执行 Web 测试时 MSTest 挂起

> ID：15972930
> 
> 赞同：2
> 
> 时间：2013-04-12T13:42:01.897
> 
> 标签：mstest, tfsbuild

我正在从 2010 年到 2012 年进行 TFS 服务器的测试迁移。我们采用了概念验证服务器并成功将其升级到 TFS2012。现在我们正在尝试重新利用旧的构建控制器，在 Windows 2003 上运行 TFS2010 来运行构建。建筑有点古老。它们最初是为 TFS2005 创建的，并且在过去的某个时候直接升级到 TFS2010，但仍然使用 MSBuild 脚本和升级模板。绝大多数代码库仍以 .NET 2.0 和 VS2005 为目标，尽管这将很快发生变化。

所以，这就是背景。在 TFS2012 构建控制器上，一切都成功构建并且测试运行。万岁！现在进入问题。

在 TFS1010 构建控制器上，一切构建成功，但 Web 测试“挂起”。当从命令行手动执行时，它只是说“开始执行”，然后在那里坐了几个小时，最终超时。有*单元*测试，它们*确实会*运行，所以这是 web 测试特别发生的事情。

有趣的是，TFS2012 构建控制器显然使用的是 2012 版本的 MSTest，在 \Microsoft Visual Studio 11.0\ 文件夹中，而 TFS2010 构建控制器使用的是 VS2010 版本。当我使用 VS2010 版本的 MSTest 在 2012 构建控制器上通过命令行运行相同的测试时，会出现同样的问题。

我已经确认 TFS2010 构建服务器正在运行 VS2010 Ultimate SP1，并通过 Windows 更新安装了所有适当的更新。它最初运行的是高级版，当时无法运行的网络测试实际上是有意义的。我完全卸载了 Premium，然后安装了 Ultimate。TFS2010 已修补到 SP1 并安装了 CU 2。

TFS2012 服务器正在运行更新 2。

以下是来自构建服务器的发生问题的日志：

```
 TeamFoundationServerUrl="http://[redacted]:8080/tfs/eCommerce" BuildUri="vstfs:///Build/Build/46594" (TaskId:4359)
  C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe /nologo /usestderr /testSettings:"G:\Builds\19\124\Sources\Main\Source\ES_[redacted].testrunconfig" /searchpathroot:"G:\Builds\19\124\Binaries\ESIntegration" /resultsfileroot:"G:\Builds\19\124\TestResults" /testmetadata:"G:\Builds\19\124\Sources\Main\Tests\WebTests\Common\SmokeTests\SmokeTests.vsmdi" /testlist:"Division1" /testlist:"Division2" /publish:"http://[redacted]:8080/tfs/ecommerce" /publishbuild:"vstfs:///Build/Build/46594" /teamproject:"Web" /platform:"Any CPU" /flavor:"ESIntegration"  (TaskId:4359)
  Loading G:\Builds\19\124\Sources\Main\Source\ES_[redacted].testrunconfig... (TaskId:4359)
  The file 'G:\Builds\19\124\Sources\Main\Source\ES_[redacted].testrunconfig' was created in an earlier version of Visual Studio. This file will be converted, in memory only, to the current format. (TaskId:4359)
  Loading G:\Builds\19\124\Sources\Main\Tests\WebTests\Common\SmokeTests\SmokeTests.vsmdi... (TaskId:4359)
   (TaskId:4359)
  Search path(s) for tests: (TaskId:4359)
  G:\Builds\19\124\Binaries\ESIntegration (TaskId:4359)
  G:\Builds\19\124\Sources\Main\Tests\WebTests\Common\SmokeTests (TaskId:4359)
  Search path(s) for default test settings: (TaskId:4359)
  G:\Builds\19\124\Sources\Main\Tests\WebTests\Common\SmokeTests (TaskId:4359)
   (TaskId:4359)
  Starting execution... (TaskId:4359)
   (TaskId:4359)
  Results               Top Level Tests (TaskId:4359)
  -------               --------------- (TaskId:4359)
  Timeout               (Division1/)SmokeTests.Division1 (TaskId:4359)
  Timeout               (Division2/)SmokeTests.Division2 (TaskId:4359)
  0/2 test(s) Passed, 2 Timeout (TaskId:4359) 
```

请注意，从构建控制器上的 IDE 运行时，测试存在相同的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:07:14.553

我完全卸载了 VS2010 和 TFS2010，然后按以下顺序重新安装了所有内容：

1.  VS2010 终极版
2.  来自 Windows 更新的所有 VS2010 更新
3.  VS2010 SP1（也来自 Windows 更新）
4.  TFS 2010
5.  TFS 2010 SP1
6.  TFS 2010 SP1 CU2
7.  [TFS 2012 兼容性 GDR](http://www.microsoft.com/en-us/download/details.aspx?id=29082)

然后我配置了构建服务器和代理。现在它按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T12:42:51.460

仅供参考，我遇到了同样的问题。当您重新安装 VS2010 SP1 时，MSTest 适用于 VS2010，但适用于 VS2012。可能是共享组件。这是一个错误：[http ://connect.microsoft.com/VisualStudio/feedback/details/728659/mstest-not-working-after-installing-vs11-next-to-vs10#](http://connect.microsoft.com/VisualStudio/feedback/details/728659/mstest-not-working-after-installing-vs11-next-to-vs10#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T20:00:56.073

如果这对任何人都有帮助，我遇到了这个问题，因为我的设置脚本批处理文件中有一个“PAUSE”语句。

# ember.js - 销毁 Ember 控制器

> ID：15972931
> 
> 赞同：1
> 
> 时间：2013-04-12T13:42:03.553
> 
> 标签：ember.js

`destroy()`当我离开某个视图（不是视图控制器，而是我使用的附加控制器）时，我正在调用控制器。如果我再回到同一个视图，控制器仍然在那里，它具有以下属性：

```
_didCallDestroy: true
isDestroyed: true
isDestroying: true 
```

一切都按预期设置，但我的观点仍然对它们具有约束力。它不是因为它的内容仍然保存数据而导致破坏吗？这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:44:13.747

上面提到的附加数组控制器被放置在一个数组中。解决方案是不仅要销毁控制器，还要将数组重置为 []：

```
this.get('dataSets').forEach(function (ds) {
  ds.destroy();
});
this.set('dataSets', []); 
```

# .net - 时间格式保存为短但检索为一般日期

> ID：15972940
> 
> 赞同：0
> 
> 时间：2013-04-12T13:42:26.523
> 
> 标签：.net, ms-access, datagridview

当我在我的 Visual Studio 程序中将时间作为短日期保存到访问数据库中时，它会保存为短日期（例如 07:30 或 18:30）。但是当我检索它时，它显示为一个长日期（12/30/1899 07:30 AM 或 12/30/1899 18:30 PM）。我从我自己添加的时间组合框中选择日期，但是当我检索数据时，它是通过在 datagridview 中显示数据的查询。我在 Visual Studio 2010 Ultimate 中使用 Visual Basic 对其进行了编程。

仍然是在网站上发布问题的新手，但第一个块保存到数据库，第二个块检索：要保存： *TblAttendanceTableAdapter.InsertAttendance(number, currentModule, fname, sname, CurrentUser, Date.Today, cmbFrom.SelectedItem.ToString, cmbTo. SelectedItem.ToString)*

检索： *Dim userdate As String = dtpDate.Value.ToShortDateString*

 *```
 Dim records = From students In ESADataSet.tblAttendance
                  Where students.ModuleCode = currentModule And students.Date1 =         userdate
                  Order By students.StudentNumber
                  Select students

    dgvAttendance.DataSource = records.AsDataView 
```*

# jpeg - 从树莓派中移除 PIL

> ID：15972941
> 
> 赞同：0
> 
> 时间：2013-04-12T13:42:26.770
> 
> 标签：jpeg, python-imaging-library, uninstallation, raspberry-pi

嗨，我在尝试从 PIL 实现某些功能时收到错误“IOError：decoder jpeg not available”。我想做的是删除PIL，安装jpeg解码器然后重新安装PIL，但我不知道如何卸载PIL？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:32:42.347

您可以这样做以重新安装 PIL

点安装-I PIL

# ruby-on-rails - 创建一个无数据库的 rails 模型，作为在 elasticsearch 中索引数据的视图

> ID：15972942
> 
> 赞同：0
> 
> 时间：2013-04-12T13:42:26.827
> 
> 标签：ruby-on-rails, postgresql, activerecord, elasticsearch, tire

我正面临一个我还无法解决的复杂问题。

我将 Rails 4(edge) 与 postgresql 9、ElasticSearch 0.20.6 和 gem Tire (0.5.7) 一起使用。我有多个链接在一起的表。例如：

代理机构有很多客户客户有很多项目项目有很多文件

我的目标是能够以两种方式索引文件：

*   首先有一个索引，它只允许在所有文件中轻松快速地搜索。我仅通过使用轮胎就成功地做到了。我的索引有一个类型“文件”，它就像一个魅力。
*   我想创建的另一个索引将包含一些文件信息，还有一些客户端和代理的属性。这是一个外部工具，能够根据项目类别或客户位置等标准获取最佳文件......

当我使用 postgresql 时，我想我可以从那里[做一个数据库视图](http://ecin.tumblr.com/post/1530992362/database-views-and-models-in-rails-3)和索引数据。我不确定这样做是否很好，尽管因为视图会非常复杂，有多个连接。另外，我担心任何更新都会触发完整的数据库重新索引。

我想知道是否有办法做一个纯轮胎模型并轻松触发它的任何链接表上的索引更新。例如，我将索引数据类型命名为`files_front`. 我会有一个模型`FilesFront`，`has_one :file`每次我更新文件或任何父文件时，所有受影响的文件都会在 ES 中看到它们的值更新。

我真的不确定如何做到这一点，所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:07:15.617

拥有一个单独的、无表的或独立的模型是一个很好的解决方案。我认为这里的问题是将`FileFront`类连接到系统的其余部分。实际上，每当您更新`File`或任何关联的`Client`等对象时，您都需要更新该`FileFront`对象。

您实际上可以使用[Model::Persistence](https://github.com/karmi/tire/blob/master/lib/tire/model/persistence.rb)。因此，对于每个`File`您都有一个关联`FrontFile`的 ，您可以将其组装为 JSON并在回调中`File`创建/更新。`after_save`棘手的部分是确保对父对象的更改传播到文件，反之亦然。

# javascript - 颜色框上一个和下一个按钮未显示

> ID：15972944
> 
> 赞同：0
> 
> 时间：2013-04-12T13:42:30.287
> 
> 标签：javascript, jquery, html, colorbox

我一直在电子商务网站上展示产品图片，但是我遇到了一些麻烦。

我正在使用颜色框在弹出窗口中显示图像，我的代码是：

```
jQuery("a.largeImgPop").colorbox({opacity:0.4, rel:'largeImgPop', photo:true}); 
```

我的链接看起来像这样：

```
<a class="largeImgPop" href="/img1.jpg">test1</a>
<a class="largeImgPop" href="/img2.jpg">test2</a>
<a class="largeImgPop" href="/img3.jpg">test3</a> 
```

当我单击 test1、test2 或 test3 时，它会显示正确的图像，但不会显示上一个和下一个按钮以在三者之间导航。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:07:52.100

我的猜测是你错过了这两件事中的一件。

未将彩盒图像复制到您的项目中

或者

将它们复制到您的项目中，但忘记更新 CSS 文件以将图像指向正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:18:41.117

我没有看到上一个和下一个按钮的原因是因为 z-index。这些按钮隐藏在颜色框中显示的图像后面。为了解决这个问题，我增加了颜色框 css 中按钮的 z-index，然后将它们重新定位到我想要的位置

要了解有关 z-index 的更多信息，请单击下面：

[单击此处获取 z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# matlab - 我需要找到图像的欧拉数以及图像中上游凹面和凸面的数量

> ID：15972946
> 
> 赞同：0
> 
> 时间：2013-04-12T13:42:38.197
> 
> 标签：matlab, eulers-number

我正在使用 MATLAB。这是我写的代码

```
 I = imread('image.tif');
 imshow(I);
 title('Original');
 eul = bweuler(I,8);
 CH = bwconvhull(BW);
bwlabel() 
```

它给了我欧拉数，但没有给出凹面的数量。我知道我在最后一部分遗漏了一些东西。你能解释一下我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:45:36.933

如果您正在寻找图像上每个对象中的孔数，我宁愿这样做（请参阅[regionprops](http://www.mathworks.com/help/images/ref/regionprops.html)函数的手册）：

```
I = imread('circles.png');  
% assuming that I is logical (binary) image
I = [ I fliplr(I) ; flipud(I) I];   % just to make image bigger

figure;
Props = regionprops(I,{'image','filledImage'});
NRegions = length(Props);
for k=1:NRegions
    DiffImage = Props(k).FilledImage-Props(k).Image;
    strT = sprintf('Region %d of %d',k,NRegions);
    subplot(2,2,1); imshow(Props(k).Image);       title([strT ': Original image']);
    subplot(2,2,2); imshow(Props(k).FilledImage); title([strT ': Filled image']);
    subplot(2,2,3); imshow(DiffImage);            title([strT ': Filled-Original image']);
    drawnow;
    pause(1); % allows to see the images
    [L, NHoles] = bwlabel(Props(k).FilledImage-Props(k).Image,8);
    fprintf('%s has %d holes\n',strT,NHoles);
end 
```

# spring - JSF PrimeFaces - 将上传的文件路径存储在另一个 bean 的属性中

> ID：15972953
> 
> 赞同：0
> 
> 时间：2013-04-12T13:43:00.027
> 
> 标签：spring, jsf, file-upload, primefaces, path

**总结一下**：我想将用户通过`<p:fileUpload>`使用`fileUploadController`ManagedBean 作为其的表单传递的文件上传`fileUploadListener`到某个路径，然后将该路径与文件名一起获取并以某种方式将其存储（问题是 - 如何？）在`wydarzenieMB`ManagedBean 中，因为我在我的方法中需要`filePath`作为字符串`addWydarzenie()`将此路径存储在数据库中并稍后使用它。

我的数据库中有一个名为“Wydarzenie”的表。它有许多值，例如名称等，我在我的 JSF 表单中指定这些值供用户使用 primefaces 填写。获取它们没有问题，我只是使用 ManagedBean 存储输入，然后使用 addWydarzenie() 方法将此输入写入数据库。

utworzWydarzenie.xhtml 表单的一部分：

```
...
<h:outputLabel for="opis" value="Opis :" />
<p:inputTextarea id="opis" value="#{wydarzenieMB.opis}" label="opis">
...
<p:commandButton id="addWydarzenie" value="Zatwierdź" action="#{wydarzenieMB.addWydarzenie}" ajax="false"/> 
```

我在 wydarzenieManagedBean 中的 addWydarzenie() 方法：

```
public String addWydarzenie() {
    try {
        Wydarzenie wydarzenie = new Wydarzenie();
        ...
        wydarzenie.setOpis(getOpis());
        ...
        getWydarzenieServiceImpl().addWydarzenie(wydarzenie);
        return SUCCESS;
    } catch (DataAccessException e) {
        e.printStackTrace();
    }   

    return ERROR;
} 
```

例如，我使用的值没有问题，因为我指定了要存储它们`p:inputText`的 bean 的值（例如：）。`value="#{wydarzenieMB.opis}"`问题从我的`<p:fileUpload>`字段开始，因为：
1\. 我没有在那里指定值，因为没有返回值（？） - 仅上传文件
2\. 我正在使用`fileUploadController`ManagedBean 处理文件上传但我想要它拥有的上传文件的 filePath 字符串存储在我的`wydarzenieMB`ManagedBean 中。

这是我从 utworzWydarzenie.xhtml 表单上传文件的代码：

```
...
<h:outputLabel for="plakat" value="Plakat :" />
<p:fileUpload id="plakat" update="messages" fileUploadListener="#{fileUploadController.handleFileUpload}" multiple="false" sizeLimit="1000000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
<p:growl id="messages" showDetail="true"/>
... 
```

还有我的 fileUploadController 类：

```
@ManagedBean(name="fileUploadController")
@RequestScoped
public class FileUploadController 
{  
private String destination="E:/PROJEKT ZESPOLOWY/events/WebContent/resources/plakaty/";
private String sciezkaPliku = "";           // complete file path including destination and file name

public void handleFileUpload(FileUploadEvent event) throws IOException { 
    FacesMessage msg = new FacesMessage("Plik: ", event.getFile().getFileName() + " został poprawnie wysłany na serwer.");
    FacesContext.getCurrentInstance().addMessage(null, msg);

    String path = destination;

    SimpleDateFormat fmt = new SimpleDateFormat("yyyyMMddHHmmss");
    String name = fmt.format(new Date())
            + event.getFile().getFileName().substring(
                  event.getFile().getFileName().lastIndexOf('.'));
    File file = new File(path + name);

    sciezkaPliku += path + name;            // I set file path here

    InputStream is = event.getFile().getInputstream();
    OutputStream out = new FileOutputStream(file);
    byte buf[] = new byte[1024];
    int len;
    while ((len = is.read(buf)) > 0)
        out.write(buf, 0, len);
    is.close();
    out.close();
}   

public String getSciezkaPliku() {
    return sciezkaPliku;
}

public void setSciezkaPliku(String sciezkaPliku) {
    this.sciezkaPliku = sciezkaPliku;
}
} 
```

它被声明为 ManagedBean，因为我试图访问它的`sciezkaPliku`变量，它是`wydarzenieMB`这样的文件路径：

```
@ManagedProperty(value="#{fileUploadController.sciezkaPliku}")
private String plakat; 
```

但它始终为空。我还尝试完整地`wydarzenieMB`进入内部`fileUploadController`并使用它的 setter 方法：

```
@ManagedBean(name="fileUploadController")
@RequestScoped
public class FileUploadController 
{  
    @ManagedProperty(value="#{wydarzenieMB}")
    WydarzenieManagedBean w;

    public void handleFileUpload(FileUploadEvent event) throws IOException { 

        ...
        sciezkaPliku += path + name;            // I set file path here
        w.setPlakat(sciezkaPliku);
        ...

    }
    ...
} 
```

但它也没有成功。文件上传并保存在指定的文件夹中没有问题，当我`sciezkaPliku`从`handleFileUpload`它打印时可以，但是当我使用`addWydarzenie()`它创建新的 Wydarzenie 时总是`null`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:36:56.733

如果我清楚地理解了您的问题，我建议您在**FileUploadController中将您的范围更改为****“@SessionScoped”**。我有同样的问题，它是通过这种方式解决的。

 **检查出来并告诉我结果；）**

# vb.net - UnauthorizedAccessException VB.NET

> ID：15972954
> 
> 赞同：0
> 
> 时间：2013-04-12T13:43:06.987
> 
> 标签：vb.net, vb.net-2010

我创建了一个简单的控制台应用程序，用于从 FTP 站点检索文件。一切都很完美。然后我决定将其设置为 Windows 服务，以便它按预定的时间间隔在后台运行。当我进行更改以将其设置为服务时，我遇到了*UnauthroizedAccessException*，其形式为*Access to the path ... is denied。*是否像将文件夹访问权限授予服务帐户一样简单？我已将全部权利授予*所有人*用户，但没有运气。我对此感到茫然。

谢谢您的帮助。

乔纳森

# jms - Storm 作为多线程消费者/生产者方法的替代品来处理大量数据？

> ID：15972956
> 
> 赞同：1
> 
> 时间：2013-04-12T13:43:12.433
> 
> 标签：jms, producer-consumer, apache-storm

我们有一个现有的设置，上游系统在消息队列上向我们发送消息，我们处理这些消息。内容是 xml，我们只是解组。这个解组步骤之后是写入 db（将相关值放入相关列） . 该系统将与更多上游系统连接，我们的产量将增加到每天 40 毫米的峰值尺寸。

我们当前的处理方式是在队列中设置监听器，然后使用多个生产者和消费者线程进行解组和后续的数据库写入。

我的问题：这个过程是否适合 Storm 用例场景？我的意思是 MQ 可以成为我的喷口，我有 2 个螺栓要解组，然后这将成为下一个写入 db 的螺栓的喷口？

如果是，我可以获得什么好处？是否可以告别繁琐的多线程生产者/工作者代码模式。如果它像上面那样简单，那么在哪里/为什么要使用传统的多线程方法来处理生产者/消费者场景我的观点是，与传统方法相比，Storm 开始大放异彩的数据量/频率。

PS：我对此很陌生，并试图掌握这一点，并想确定思路是否正确

问候， CVM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:18:49.737

当然，这种情况可以适应风暴拓扑。spout 可以从 MQ 中拉出，而 bolts 可以处理解组和后续处理。

与传统多线程模式相比的主要好处是能够随着负载的增加添加更多的工作节点。对于传统的生产者消费者模式来说，这并不容易。

具体的数据量是一个非常广泛的问题，因为它取决于硬件等大量因素。

# c# - 窗体加载时无法设置窗体焦点？

> ID：15972961
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:43:40.040
> 
> 标签：c#, winforms

我在问这个问题之前确实搜索过谷歌。基本上我已经尝试了一个小蛇游戏。我的游戏从向下箭头键开始。此箭头键在焦点窗口形成时起作用。如果我们删除每种类型的按钮和控件，然后将焦点放在 windows 窗体上，否则不会将焦点设置在 windows 窗体上。我刚刚在按钮上添加了按钮焦点设置。任何人的帮助，并提前感谢..

![在此处输入图像描述](https://i.stack.imgur.com/A3RYV.png)

```
 private void Key_down(object sender, KeyEventArgs e)
    {
        int xx = pictureBox1.Location.X;
        int yy = pictureBox1.Location.Y;
        i = xx;
        ii = yy;

        if (e.KeyCode == Keys.Right)
        {
          //  x = x + 1;
           // MessageBox.Show("Test");
       //     pictureBox1.DisplayRectangle = Rectangle.
           cr = true;
           cl = false;
           cu = false;
           cd = false;
         // pictureBox1.Location = new Point(x, y);

        }
        else if (e.KeyCode == Keys.Left)
        {
            cl = true;
            cr = false;
            cu = false;
            cd = false;
        }
        else if (e.KeyCode == Keys.Up)
        {
            cu = true;
            cl = false;
            cr = false;
            cd = false;
        }

        else if (e.KeyCode == Keys.Down)
        {
            cd = true;
            cu = false;
            cr = false;
            cl = false;
        }
      //  pictureBox1.Location = new Point(x, y);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-01T09:58:48.803

当我放入 Form 的 Load 事件时，这条线对我不起作用

```
 this.Focus(); 
```

它仅在我将其放入 Form's Shown 时才有效。我相信必须在表单完成加载后调用 Focus() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:14:41.220

`JamesB`在评论中添加了正确答案：您只需`KeyPreview`将表单的属性设置为`true`，然后您的 KeyDown 方法将接收所有键事件，无论表单上的哪个控件具有焦点。请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:04:59.043

添加`this.Focus();`为表单加载过程的最后一行

如果您想防止它失去焦点，请添加一个计时器并在`.tick`过程中添加`this.Focus();`并将间隔设置为 1000，以便它每秒检查表单是否具有焦点

希望这可以帮助

# sql - Max and Where 子句

> ID：15972963
> 
> 赞同：2
> 
> 时间：2013-04-12T13:43:42.277
> 
> 标签：sql, sybase

我想检索表中满足某些条件的最多一列。我尝试了以下 SQL

```
Select Name, Max(version) from table1 where name="Asdf"; 
```

我得到的结果集的名称比我在 where 子句中给出的名称要多。您认为上述查询有什么问题？

先感谢您

注意：它的 Sybase 数据库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:44:45.303

您不能混合使用聚合函数和普通列选择。尝试

```
select max(version) 
from table1 
where Name = 'Asdf' 
```

或使用 a`group by`获取所有名称及其`max(version)`：

```
select Name, Max(version) 
from table1 
group by Name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:45:39.770

`group by`处理聚合函数时需要使用子句：

```
Select Name, Max(version) from table1 where name="Asdf" Group by Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:46:12.450

这是因为您没有在选择中包含名称字段。如果你想得到那个然后尝试......

```
Select top 1 name, version 
from table1
where name = 'Asdf'
order by version desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-13T05:13:12.560

这应该会给您返回您正在寻找的数据集。它应该只为您提供名称“Asdf”的最大版本。如果这不是您想要的数据集，请提供示例数据集。

SQL查询：

```
Select Name, version 
from table1 
where name="Asdf"
having max(version) = version 
```

如果数据库中有不止一行具有相同的名称和最大版本，并且您只希望在数据集中返回一行。对

SQL查询：

```
Select top 1 Name, version 
from table1 
where name="Asdf"
having max(version) = version 
```

或者如果你想做一组名称：

```
Select distinct Name, version 
from table1 
where name in ("Asdf", "ghjk")
having max(version) = version 
```

# android - 添加 Facebook sdk 3.0 作为库后 AAPT 崩溃

> ID：15972970
> 
> 赞同：0
> 
> 时间：2013-04-12T13:44:04.170
> 
> 标签：android, facebook

我正在用我的应用程序升级 Facebook SDK，在我的应用程序中添加 Facebook SDK 3.0 作为库后，eclipse 试图构建我的应用程序，然后 aapt 崩溃了。下面是我为此问题获得的唯一日志信息

执行 aapt 时出错：返回码 -1073741819

有点奇怪，不知道哪里出了问题。我猜资源有些问题，似乎与我的项目资源发生冲突。

注意：如果我添加 Facebook sdk 2.0，它的工作正常

期待一些帮助或方法来解决这个问题

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:50:35.203

经过一天痛苦的搜索，我解决了这个问题，在我的项目 style.xml 中，一些样式定义有 android:id ，这会导致 aapt 崩溃，在我删除它之后它工作正常。

# ios - ios 6 ,5 ans 4 中的通知问题

> ID：15972972
> 
> 赞同：0
> 
> 时间：2013-04-12T13:44:11.293
> 
> 标签：ios, objective-c, notifications

我得到了一些日期和时间，比如约会时间。我想在那个特定时间之前提醒用户。我用谷歌搜索并获得了一些知识，但仍然有点困惑，我应该在应用程序输入后台方法中在哪里编写我的代码，我必须使用警报视图或任何其他。请帮助我.

```
 NSString *today=[NSString stringWithFormat:@"%@ %@",appDelegate.appointmentDate,appDelegate.timeStart1];
    NSLog(@"%@",today);

    NSDateFormatter *format=[[NSDateFormatter alloc]init];

    [format setDateFormat:@"MM/dd/yyyy hh:mm a"];
    NSDate *date1=[format dateFromString:today];
           NSLog(@"%@",date1);

    NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *datefo1 =[[NSDateComponents alloc]init];
    [datefo1 setMinute:1];

  [datefo1 setSecond:0];

    NSDate *alerttime=[cal dateByAddingComponents:datefo1 toDate:date options:0];

    UIApplication* app = [UIApplication sharedApplication];
    UILocalNotification* notifyAlarm = [[UILocalNotification alloc]
                                        init];
    if (notifyAlarm)
    {
        notifyAlarm.fireDate = alerttime;
        notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];
        notifyAlarm.repeatInterval = 0;

        notifyAlarm.alertBody = @"you have an appointment  in 30 minutes";
        [app scheduleLocalNotification:notifyAlarm];
    } 
```

我想要顶部的通知我想显示一些警报，即使我的应用程序正在运行并且也没有运行。但它没有任何消息，我哪里出错了，我需要使用 nsnotification 中心吗？对不起，我的英语很差。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:06:49.880

您正在使用本地通知，这是一个好的开始，但您应该知道只有当您的应用程序在后台时才会显示本地通知。如果您的应用程序在时间到来时在前台运行，您将需要自己显示通知（UIView / UIAlertView）。

您可以随时安排本地通知，这实际上取决于您允许用户进行的编辑，因此，您可能需要多少取消本地通知并安排新版本。

其他几件事：

*   考虑使用 'NSDate -dateByAddingTimeInterval' （它只是您的用例的更少代码）
*   您要在约会中增加一分钟，因此警报将在事件发生后（并说约会在 30 分钟内？）
*   将 NSLocalizedString 用于将显示给用户的任何字符串
*   将来，在 appDelegate 中存储更少的数据，这不是该类的用途:)

# android - 使服务关闭外部活动（通过隐式意图创建）

> ID：15972975
> 
> 赞同：1
> 
> 时间：2013-04-12T13:44:21.587
> 
> 标签：android, service, android-activity

我想做的很简单：我的应用程序让用户观看最多 10 分钟的视频，然后它停止视频并返回到我的应用程序（之前的活动）。该视频显示在带有该代码的外部播放器中：

```
Intent intentVideo = new Intent();
intentVideo.setAction(Intent.ACTION_VIEW);
intentVideo.setData(Uri.parse(url)));
startActivity(intentVideo); 
```

`Service`然后，如果时间已过，则定期进行背景检查。

我的服务如何终止视频活动（**我无法添加代码或侦听器或其他任何内容，因为它是由外部应用程序提供的**）并在时间过去后让我的应用程序恢复到以前的活动？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:49:24.117

好的，这是我的最终代码，如果它可以提供帮助，感谢 Egor。

注意：有两种解决方案可以强制停止玩家活动：

1.  使用`startActivityForResult(intent, rq)`/`finishActivity(rq)`
2.  使用 `FLAG_ACTIVITY_CLEAR_TOP`

小心使用`finishActivity()`，一些外部应用程序不会因为它们的行为而关闭。对我来说，当我使用 VLC 播放器打开视频时它运行良好，但当我使用 Dailymotion 应用程序打开视频时它不起作用。

*ActivityThatLaunchesPlayer.java*

```
public class ActivityThatLaunchesPlayer extends Activity 
{

    private BroadcastReceiver brdreceiver = new BroadcastReceiver() 
    {
        @Override
        public void onReceive(Context context, Intent intent) 
        {
            System.out.println("broadcast signal received");

             //either
             finishActivity(57); //57 is my arbitrary requestcode

             //or either :
            Intent intentback = new Intent(getApplicationContext(),  ActivityThatLaunchesPlayer.class);
            intentback.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intentback); 
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
    super.onCreate(savedInstanceState);

            //set the brdcstreceiver to listen to the slot
    getApplicationContext().registerReceiver(brdreceiver, new IntentFilter("com.example.portail10.timeElapsed"));

            //here we launch the player (android opens a new appropriate activity)
    Intent intent = new Intent();

    intent.setAction(android.content.Intent.ACTION_VIEW);
    intent.setData(Uri.parse(uri));
        startActivityForResult(intent, 57); //again arbitrary rqstcode

            //here we start the service that watch the time elapsed watching the video
            intentServ = new Intent(this, TimeWatcher.class);
            startService(intentServ);
     }
} 
```

*TimeWatcher.java*

```
public class TimeWatcher extends Service 
{

    //... some code is missing, but the main idea is here

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    super.onStartCommand(intent, flags, startId);

    timer.scheduleAtFixedRate(new TimerTask() 
    {
        public void run() 
        {
            //send the broadcast when time's up
            Intent intentbrd = new Intent();
            intentbrd.setAction("com.example.portail10.timeElapsed");
            sendBroadcast(intentbrd); 

            System.out.println("Brdcast sent");

            stopSelf();

        }
    }, 0, 600000); //in ms = 10min

    return START_NOT_STICKY;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:57:04.200

解决此问题的一种方法是`BroadcastReceiver`在`Activity`. 当`Service`需要通知`Activity`时间到时，发送广播并在`BroadcastReceiver`. 然后，在里面`onReceive()`调用`finish()`就`Activity`杀了它。希望这可以帮助。

# c# - 使用 C# 代码运行 powershell 脚本

> ID：15972977
> 
> 赞同：0
> 
> 时间：2013-04-12T13:44:29.547
> 
> 标签：c#, powershell

当我尝试使用我的 C# 代码运行脚本时。我收到以下错误：

```
 "You cannot call a method on a null-valued expression." 
```

这会是我的 C# 代码错误吗

```
 Runspace runSpace = RunspaceFactory.CreateRunspace();
        runSpace.Open();

        RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runSpace);
        Pipeline pipeLine = runSpace.CreatePipeline();
        pipeLine.Commands.AddScript(@"D:\NewSites\test-new\ConfigureIIS7.ps1");
        try
        {
            pipeLine.Invoke();
        }
        catch (Exception ex)
        {
            throw ex;
        }

        pipeLine.Stop();

        runSpace.Close(); 
```

还是我应该在我的 powershell 脚本中查找问题？shell 脚本在正常执行时工作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:51:34.503

我根本不是专家，但您的错误似乎是 POWERSHELL 错误。

[例如](http://communities.quest.com/docs/DOC-10635)，请参见此。

我认为问题出在您的 PowerShell 脚本中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T14:01:03.787

你可以试试：

```
System.Diagnostics.Process.Start(@"D:\NewSites\test-new\ConfigureIIS7.ps1"); 
```

# entity-framework - 工作单元、存储库和 IDisposable

> ID：15972978
> 
> 赞同：7
> 
> 时间：2013-04-12T13:44:31.517
> 
> 标签：entity-framework, repository-pattern, unit-of-work

我一直在研究在我正在从事的项目中实现这些模式。UoW 具有数据库上下文，然后使用该上下文实例化多个存储库。我的问题与处理上下文有关。我见过的很多文章都将存储库设置为 IDisposable，然后它们会处理上下文。这让我困惑不已，我是否遗漏了什么，或者（在我的情况下）应该只是处理上下文的 UoW 吗？另外，我应该在我的存储库上实现 IDisposable 吗？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T13:52:49.847

是的，工作单元应该实施`IDisposable`和处置上下文，而不是存储库。

这是一个例子：

```
public interface IUnitOfWork : IDisposable
{
    void Commit();
}

public class EntityFrameworkUnitOfWork<TContext> : IUnitOfWork 
    where TContext : DbContext, new()
{
    public EntityFrameworkUnitOfWork()
    {
        this.DbContext = new TContext();
        ConfigureContext(this.DbContext);
    }

    protected virtual void ConfigureContext(TContext dbContext)
    {
        dbContext.Configuration.ProxyCreationEnabled = false;
        dbContext.Configuration.LazyLoadingEnabled = false;
        dbContext.Configuration.ValidateOnSaveEnabled = false;
    }

    protected TContext DbContext { get; private set; }

    public void Commit()
    {
        this.DbContext.SaveChanges();           
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!disposing)
        {
            return;
        }

        if (this.DbContext == null)
        {
            return;
        }

        this.DbContext.Dispose();
        this.DbContext = null;
    }
} 
```

# extjs - CellEditing 插件 - 输入类型密码

> ID：15972981
> 
> 赞同：0
> 
> 时间：2013-04-12T13:44:39.500
> 
> 标签：extjs, extjs4.1

我的网格使用插件`Ext.grid.plugin.CellEditing`。

我的列是根据我的数据动态生成的。

网格如下所示：

```
 ...
  columns: [],
  plugins: [
     Ext.create( 'Ext.grid.plugin.CellEditing', {
        clicksToEdit: 1
        listeners: {
           beforeedit: function( oEditor, oOptions ) { ... }
           edit: function( oEditor, oOptions ) { ... }
        }
     } )
  ... 
```

我现在正在尝试将输入字段类型从单行更改为`text`to ，其中column中有一个值。`password``pass``key`

```
| Key   |  Value  |
__________________|
|  id   |   5     |
| user  |  admin  |
| pass  |  ****   |  <-- this cell should be input type password
___________________ 
```

我尝试了什么：

`Ext.get( 'textfield-1160-inputEl' ).dom.type = 'password';`通过in 侦听器更改输入类型`beforeedit`失败，因为它尚未呈现。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:56:23.300

您可以创建一个自定义字段以在网格中使用：

```
Ext.define('Ext.form.PasswordField', {
    extend: 'Ext.form.field.Base',
    alias: 'widget.passwordfield',
    inputType: 'password',
}); 
```

您`xtype`在网格中设置的内容：

```
editor: {
    xtype: 'passwordfield',
    allowBlank: false,
} 
```

[http://jsfiddle.net/jvtjS/](http://jsfiddle.net/jvtjS/)

# angularjs - 如何执行不复制 ng-repeat 元素的 ng-repeat

> ID：15972986
> 
> 赞同：3
> 
> 时间：2013-04-12T13:44:53.067
> 
> 标签：angularjs

我需要使用 ng-repeat 来生成几个元素，但这些元素不能每个都包装在一个 div 中（这是出于盒子布局的目的，其中盒子布局仅适用于直接子级）。例如，我需要这个结果：

```
<div class='box-layout'>
  <div class='item-header>Head 1</div>
  <div class='item-body>Body 1</div>

  <div class='item-header>Head 2</div>
  <div class='item-body>Body 2</div>
</div> 
```

重复部分没有包装元素。这种结构是使用 flex-box 样式布局所必需的。我怎样才能用 AngularJS 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:50:33.483

正如@Anders Bornholm 所说，它无法完成（仅供参考，[在knockout.js 中这很容易](http://knockoutjs.com/documentation/custom-bindings-for-virtual-elements.html)）。

尽管它很丑，但您*可以*通过指令来完成此操作，例如：

1.  [AngularJS ng-repeat 没有 html 元素](https://stackoverflow.com/questions/12857714/angularjs-ng-repeat-with-no-html-element)
2.  [ng-repeat 没有 HTML 元素（这次真的没有）](https://stackoverflow.com/questions/15552708/ng-repeat-without-html-element-this-time-really-without-any)

JS：

```
directive('htmlAppend', function() {
    return {
        restrict: 'A',
            link: function(scope, element, attrs) {
                element.append(attrs.htmlRepeat);
        }
    };
}) 
```

HTML：

```
<div class='box-layout'>
  <div class='item-header' ng-repeat="s in sections" html-append="<div class='item-body'>Body</div>">Head</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:27:50.297

简短的回答：做不到。对我个人而言，Angular 的最大缺点之一。

如果指令模板允许多个根元素，您可以使用指令来完成，但这也不起作用。

# jsf-2 - 如何一次可以扩展一排 ?

> ID：15972990
> 
> 赞同：7
> 
> 时间：2013-04-12T13:45:01.840
> 
> 标签：jsf-2, primefaces, datatable

在我的应用程序中，我有一个`<p:datatable>`with`rowExpansion`列。我需要一次打开一行。如果有人试图扩展第二行，剩余的第一行已扩展，则会生成一条消息说`First close the expanded row and then open another row`.

这如何实施？任何指针都会对我很有帮助。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-19T12:57:48.517

截至 2015 年，这个问题是谷歌搜索结果中的第一个问题，我想补充一点，对于 PrimeFaces 5.1，有 dataTable 属性`rowExpandMode`，当设置为`single`- 时，只允许显示一行。例子：

```
<p:dataTable var="line" value="#{bean.lines}" rowExpandMode="single"> 
```

这不完全是问的，但我希望它会对其他人有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T16:01:32.657

您可以使用（我已经在 mojarra 2.1.20 和 Primefaces 3.5 中对其进行了测试，并且工作正常）以下解决方案，该解决方案在扩展行时调用 JavaScript 函数。当点击第二行，并且有另一个展开的行时，它会触发一个`click`事件，这反过来又会折叠之前打开的行。

### xhtml:

```
<p:ajax event="rowToggle" onstart="test();"/> 
```

### Javascript：

```
<script type="text/javascript">
    function test(){
        var i = $('.ui-row-toggler.ui-icon-circle-triangle-s').length;
        if(i == 1){return;}
            $('.ui-row-toggler.ui-icon-circle-triangle-s').trigger('click');
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:03:21.723

[在此处](http://primefaces.googlecode.com/svn/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/datatable/datatable.js)查看`datatable.js`Primefaces 中的文件。有一个名为.`toggleExpansion`

也许您可以覆盖此函数并在没有展开行时调用原始函数，并在另一行已展开时显示消息（而不是调用原始行）。

只是一个想法...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T09:05:06.320

您可以借助此自定义方法来实现此目的。

给'togglerClass'这个类

```
 <pou:column styleClass="togglerClass" style="width:16px">
                                            <pou:rowToggler/>
                                        </pou:column> 
```

JavaScript 代码在这里；

```
function prodsToggler() {
    $('.togglerClass div').click(function () {
        var currentTr = $(this).closest("tr");
        var $trs = $('.togglerClass').closest("tr").not(currentTr);
        $trs.each(function (index, el) {
            var $this = $(el),
                    $next = $this.next(".ui-expanded-row-content");

            $this.removeClass("ui-expanded-row");
            $next.remove();

            $this.find(".ui-row-toggler").removeClass("ui-icon-circle-triangle-s");
        });
    });
} 
```

在windows中调用这个方法准备好了。

# android - 在 SQLite 中插入或更新，但仅在其中一个值满足条件时更新

> ID：15972994
> 
> 赞同：2
> 
> 时间：2013-04-12T13:45:06.627
> 
> 标签：android, sqlite

我想插入一条记录，除非它存在，然后如果它的`COLUMN_GENERATION`值小于现有记录的值，我想更新该记录。我什至不确定如何构建查询，或者使用什么命令。

我像这样设置我的数据库：

```
public static final String TABLE_SEARCH = "SearchTable";
public static final String COLUMN_OWNER = "Owner";
public static final String COLUMN_SPOUSE = "Spouse";
public static final String COLUMN_CHILD = "Child";
public static final String COLUMN_GENERATION = "Generations";

private static final String DATABASE_NAME = "searches.db";
private static final int DATABASE_VERSION = 1;

// Database creation sql statement
private static final String DATABASE_CREATE = "CREATE TABLE "
        + TABLE_SEARCH + "("
        + COLUMN_OWNER + " INTEGER PRIMARY KEY, "
        + COLUMN_SPOUSE + " INTEGER DEFAULT 0, "
        + COLUMN_CHILD + " INTEGER DEFAULT 0, "
        + COLUMN_GENERATION
        + " INTEGER DEFAULT 0);"; 
```

这是我现在使用的查询，它只是忽略了冲突的条目：

```
values.put(SearchDatabaseHelper.COLUMN_OWNER, personID);
values.put(SearchDatabaseHelper.COLUMN_SPOUSE, spouseID);
values.put(SearchDatabaseHelper.COLUMN_CHILD, childID);
values.put(SearchDatabaseHelper.COLUMN_GENERATION, gens);
long insertID = database.insertWithOnConflict(SearchDatabaseHelper.TABLE_SEARCH, null, values, SQLiteDatabase.CONFLICT_IGNORE); 
```

我尝试输入一个查询来首先搜索数据库，然后根据需要插入或更新，但这真的很慢并且实际上并没有工作。我肯定会感谢一些帮助。

哇——作为一个重复的问题关闭了。没有真正的答案。我担心我没有正确地说出我的问题的标题，所以人们只是略读了一下，并没有阅读我所问的内容。

似乎没有人注意到第一段中的关键短语：

`COLUMN_GENERATION`“如果它的值小于现有记录的值，我想更新该记录。”

我可以插入/更新数据库。潜在的问题是，“是否可以使用我的主键进行单个查询来查看数据库中是否存在行，如果不存在，则插入，如果存在，则仅在存储的情况下更新其中一列的值高于输入的数据？”

我真的希望能够在一个 SQLite 调用中完成这一切，因为 SQLite 比 SQLite 之外的比较和决策要快得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:32:57.387

从数据库中读取现有记录的生成。如果它存在并且具有较低的代，则将其删除。如果它不存在或具有较低的一代，则插入新的一代。

各种`INSERT OR XXX`命令仅适用于特定的常见情况；对于您的算法，您必须将其写出来。

只需正确编写命令并围绕它们包装一个事务，它就会快速运行。

# facebook - 无法通过应用发布到 fb 的链接

> ID：15972997
> 
> 赞同：1
> 
> 时间：2013-04-12T13:45:10.973
> 
> 标签：facebook, post

如果我发布链接，它会显示我作为用户发布的广告。如果我发布一条消息，它会显示为页面本身发布的。这是为什么？我需要显示页面发布的链接，而不是我。页面是我的。

```
$attachment = array(
'access_token' => 'page-token-here', 
'image' => $code->image_urls,
'name' => $code->title,
'link' => $short_url,

);

$page_id="page-id-here";
$res = $facebook->api('/'.$page_id.'/feed','POST',$attachment); 
```

# android - 在 Eclipse Android Developer Tools (ADT) Bundle 中安装 Google Plugin for Eclipse

> ID：15972998
> 
> 赞同：4
> 
> 时间：2013-04-12T13:45:11.143
> 
> 标签：android, eclipse, ide, google-plugin-eclipse

我已经从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载了 Eclipse ADT 包 现在我想为 Eclipse 添加 Google 插件。所以我去帮助 - >安装新软件...并输入以下内容：

```
gpe - http://dl.google.com/eclipse/plugin/4.2 
```

我看到以下列表，我在其中执行以下选择：

```
[ ] Developer Tools
[ ] Google App Engine Tools for Android (requires ADT)
[X] Google Plugin for Eclipse (required)
[ ] GWT Designer for GPE (recommended)
[ ] NDK Plugins
[ ] SDKs 
```

但收到以下安装错误：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Google Plugin for Eclipse 4.2 3.2.2.v201303261859-rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.2.2.v201303261859-rel-r42)
  Missing requirement: Google Plugin for Eclipse 4.2 3.2.2.v201303261859-rel-r42 (com.google.gdt.eclipse.suite.e42.feature.feature.group 3.2.2.v201303261859-rel-r42) requires 'org.eclipse.mylyn.commons.ui 0.0.0' but it could not be found 
```

我的问题是：

1.  为什么我会收到此错误？
2.  当我已经用 Eclipse 安装了 ADT 时，为什么站点要求我安装 [ ] Developer Tools？

谢谢，

杰森·波西特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:16:41.870

我刚刚（再次）遇到了这个问题，我通过检查“在安装过程中联系所有更新站点以查找所需的软件”来修复它 *在 Win7 Eclipse Juno SP1 4.2.1 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:19:19.090

（你没有指定你正在运行什么操作系统，所以我会解释什么对我有用。）

通过简单地以管理员身份运行 Eclipse，我已经在 Windows 上解决了类似的插件安装问题。