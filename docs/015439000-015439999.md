# StackOverflow 问答 15439000-15439999

# javascript - 缩放图像 80% - jquery

> ID：15439001
> 
> 赞同：1
> 
> 时间：2013-03-15T17:50:48.333
> 
> 标签：javascript, jquery, css, media-queries

我使用媒体查询来使我的网站上的文本和布局（边距、填充等）具有响应性..

我将其设置为“如果浏览器窗口 < 1300px”，然后将所有度量更改为 80%。这一切都很好，但我的图像没有响应，有没有办法使用 jquery 在我的图像上设置类似的东西，以使 img 宽度为其全尺寸的 80%（与缩放页面的其余部分成比例？ )

我使用的媒体查询是：

```
@media only screen 
  and (max-width : 1300px) {
    /* new css */
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:55:26.720

`img`如果屏幕宽度小于以下内容，则将元素缩放到 80% `1300px`：

```
if ($(window).outerWidth() < 1300) {
    $('img').each(function(){
        $(this).width ( $(this).width () * 0.8) );
        $(this).height( $(this).height() * 0.8) );
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:19:47.257

这类似于 Aaron 的回答，但我认为它完成了一些不同的事情，因为它使其与窗口的大小成正比，但并不总是其全尺寸的 80%。

```
if ($(window).outerWidth() < 1300) {
  $('img').css('width', '80%');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T09:50:35.487

太糟糕了，您的图像宽度是由属性而不是由 CSS 定义的 :(

将 JS 解决方案用于与 CSS\design 相关的东西对我来说是错误的。使用纯 CSS 解决方案怎么样？这里有一些想法：

# 方法一

用硬编码的图像 css 覆盖你的硬编码图像属性。[jsfiddle](http://jsfiddle.net/opherv/U9aNk/)

```
@media only screen 
  and (max-width : 1300px) {

    img.pasta{
        width: 250px;
        height: 300px;
    }

    img.pizza{
        width: 450px;
        height: 200px;
    }

  } 
```

# 方法二

使用 css 将图像扩展到其容器尺寸。这将确保图像扩展，同时保持纵横比

```
img{
    max-width: 100%;
    max-height: 100%;
}

@media only screen 
  and (max-width : 1300px) {

    .image_container{
        /* lets say that 300px is the "80%" of normal size */
        width: 300px;
     }

  } 
```

# 方法三

发挥创意并使用 CSS 转换来缩小图像，而不改变它们的宽度或高度

```
@media only screen 
  and (max-width : 1300px) {
    img{
        -webkit-transform: scale(0.8);  /* Saf3.1+, Chrome */
        -moz-transform: scale(0.8);  /* FF3.5+ */
        -ms-transform: scale(0.8);  /* IE9 */
        -o-transform: scale(0.8);  /* Opera 10.5+ */
         transform: scale(0.8);
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T23:27:58.087

我已经玩了一段时间了，并找到了使用媒体查询和 css 的替代方法，使用`img {max-width: 100%;}`- 没有 js .. 在这里查看 jsfiddle - [http://jsfiddle.net/qEf5J/](http://jsfiddle.net/qEf5J/)

# html - 文件扩展名上的 mod_rewrite 会干扰验证文件吗？

> ID：15439016
> 
> 赞同：0
> 
> 时间：2013-03-15T17:51:42.120
> 
> 标签：html, url, mod-rewrite, google-apps, pinterest

我目前正在使用从文件`mod_rewrite`中删除`.HTML`扩展名，以及重定向到他们的友好版本。

我使用`pinterest.html`和`google.html`文件来验证我的 Pinterest 页面和 Google Apps 帐户。

对于 mod_rewrite，我使用这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L,QSA]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*\.html\ HTTP/
RewriteRule ^(.*)\.html$ /$1 [R=301,L] 
```

我的问题是关于它与验证文件相关的逻辑和功能。`'x' file`据我了解，目的是为`'y' URL`.

因此，即使我由于重定向和删除而`example.com/pinterest.html`担任，也不应该有任何干扰，因为文件仍然像往常一样可读，对吗？`example.com/pinterest``.HTML`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:42:37.857

不要重写这两个特殊文件。向 cond 正则表达式添加否定断言：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(?!pinterest\.html|google\.html).*\.html\ HTTP/ 
```

PS。为什么不只是匹配`%{REQUEST_URI}` ？

```
RewriteCond %{REQUEST_URI} !(pinterest|google)\.html$
RewriteCond %{REQUEST_URI} \.html$ 
```

我用简单的正则表达式重写了这个。这说的是不匹配两个特殊文件，但匹配任何其他`.html`文件请求。

# android - 在 android 中预览 URL，就像 facebook 在发布链接之前所做的那样（链接预览）

> ID：15439017
> 
> 赞同：7
> 
> 时间：2013-03-15T17:51:43.410
> 
> 标签：android, url

我有一个 EditText 来输入网络链接。我想预览输入的 URL，类似于 Facebook 中的功能，我们在其中发布链接并会看到页面的图像，标题在顶部，URL 在底部。

如何在 Android 中开发它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T17:56:00.843

在用户在编辑文本中输入链接后使用[JSOUP](http://jsoup.org/)来解析您的链接 OG 元标记（这是 FB 所查看的）刮掉元标记：

[这是您希望从最近的纽约时报文章](http://www.nytimes.com/2013/03/16/world/europe/pope-francis-praises-benedict-urges-cardinals-to-spread-gospel.html?hp)中获得的元信息示例

```
<meta property="og:url" content="http://www.nytimes.com/2013/03/16/world/europe/pope-francis-praises-benedict-urges-cardinals-to-spread-gospel.html"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Vatican Rejects Argentine Accusations Against Pope Francis"/>
<meta property="og:description" content="The Vatican on Friday formally defended Pope Francis’ role in Argentina’s so-called “Dirty War,” amid accusations that he failed to halt abuses of which he had knowledge.">
<meta property="og:image" content="http://graphics8.nytimes.com/images/2013/03/16/world/16vatican/16vatican-superJumbo.jpg"/> 
```

# ios - 在 iOS 中解析 OFX 或 SGML

> ID：15439025
> 
> 赞同：1
> 
> 时间：2013-03-15T17:52:07.473
> 
> 标签：ios, objective-c, sgml, ofx

如何在 iOS 中解析 OFX？OFX 采用 SGML 格式，我找不到任何好的解析器可以在 iOS 上的 C 或 Objective-C 中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T05:40:34.073

尝试使用[libofx](http://libofx.sourceforge.net)。它依赖于 SGML 的 OpenJADE，但我已经让它们在 iOS 上编译和工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:56:56.590

这里有一些挑战：

(1) OFX 1.x 文档是基于 SGML 的，而 2.x 文档是基于 XML 的，所以如果您知道您只会处理 2.x 文档，您可能会使用 XML 解析器。

(2) 如果您必须处理 1.x 文档，您将面临一些代码提升。一般的 SGML 和特别是 OFX 1.x 不强制简单类型的关闭标记。这意味着您将看到如下内容：

```
<INVACCTFROM>
    <BROKERID>Fidelity Investments
    <ACCTID>FidRoth
</INVACCTFROM> 
```

除非您提供自己的模式逻辑，或者将数据预处理为更“有效”的格式，否则解析这种事情会很棘手。[Scott Hanselman 的博客](http://www.hanselman.com/blog/PostprocessingAutoClosedSGMLTagsWithTheSGMLReader.aspx)中给出了后者的示例，虽然不在 C/Obj-C/C++ 中。

可以在[此处找到有关 OFX 的良好资源。](http://www.ofx.net/)

# sql-server - 在内容数据库之间移动数据

> ID：15439028
> 
> 赞同：0
> 
> 时间：2013-03-15T17:52:11.920
> 
> 标签：sql-server, sharepoint-2010

我想将数据从 contentdb 移动到另一个 Web 应用程序的 contentdb。这可能吗？请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:53:44.260

这篇[MSDN 帖子](http://technet.microsoft.com/en-us/library/cc287899%28v=office.14%29.aspx)可能会对您有所帮助。

# php - 如何在 PHP 和 Apache 中使用友好 URL

> ID：15439040
> 
> 赞同：0
> 
> 时间：2013-03-15T17:52:56.700
> 
> 标签：php, html, apache

我正在尝试在我的网站上获取友好的 URL，因此我不必通过 URL 调用特定文件。

例子：

索引页 - [http://www.website.com](http://www.website.com)

转到用户个人资料页面 - [http://www.website.com/username](http://www.website.com/username)

有人可以指出我正确的方向，以了解这是如何完成的。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:56:10.593

您可以使用 Apache 重写引擎模块。

1.  创建文件名为`.htaccess`
2.  在其中添加您的重写条件

    ```
     <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
        Options -Indexes     </IfModule> 
    ```

并且您对服务器的所有请求都将被转发到`index.php`您可以从查询字符串中获取的来自 url 的数据

```
$_GET["url"] 
```

然后你可以用它做任何你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:56:32.307

您正在谈论使用 URL 重写。试试： http: [//www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

# java - 返回 ArrayList 的所有元素，而不是打印它们

> ID：15439041
> 
> 赞同：-3
> 
> 时间：2013-03-15T17:52:58.070
> 
> 标签：java

```
public double getAllElementsInCollection(ArrayList<Double> nameofCollection){

      double result = 0.0;
      for(Double nameofDouble : nameofCollection){
        result = nameofDouble;
      }
      return  result;       
} 
```

我正在尝试编写一个方法来返回`ArrayList`传递它的所有元素，但我只是得到最后一个是插入数组的方法。我怎样才能完成这项任务？从昨天开始，我一直在尝试这样做。我注意到如果我这样做`System.out.println(nameofDouble);`实际上会打印所有元素..但我不想打印它们。我想返回传递的所有内容`ArrayList`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:59:27.890

这个问题没有意义……你想把ArrayList变成double[]吗？

只需调用：

```
public Double[] getAllElementsInCollection(ArrayList<Double> nameofCollection){

    return  nameofCollection.toArray(new Double[nameofCollection.size()]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:23:28.830

您可以通过以下方式更改方法以返回`ArrayList`可以进一步打印的 in String 的所有元素。

```
public String getAllElementsInCollection(ArrayList<Double> nameofCollection){

      return java.util.Arrays.toString(nameofCollection);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:00:42.810

你可以做以下两件事之一：

首先：

```
ArrayList<Double> list = new ArrayList<Double>();

...

Double[] elements = list.toArray(new Double[list.size()]); 
```

或者，如果您想使用该方法：

```
public double[] getAllElementsInCollection(ArrayList<Double> list){
    double[] elements = new double[list.size()];
    for(int i = 0; i < elements.length; i++){
        elements[i] = list.get(i);
    }
    return elements;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:13:37.573

你搞错了。首先，您的方法的返回类型是双精度，这表明您只能返回一个双精度值，而不是整个数组。此外，变量“结果”将只包含一个值。所以这是您的代码的修改版本：

```
public List<Double> getAllElementsInCollection(List<Double> nameofCollection){

  List<Double> resultList = new ArrayList<Double>();
  for(Double nameofDouble : nameofCollection){
    // some processing on the elements (if required)
    resultList.add(nameofDouble);
  }
  return  resultList; 
```

}

另外，我建议您使用超类/接口（例如 List 而不是 ArrayList）作为参数或返回类型，因为您可能不知道传递给方法的实际参数（例如 LinkedList 或 ArrayList）。为此，请通读 OOP 概念。多态性样本：[sample1](http://www.sitepoint.com/quick-guide-to-polymorphism-in-java/)和[sample2](http://www.java-made-easy.com/polymorphism-in-java.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T23:08:18.000

您的问题不清楚，“返回所有元素”是什么意思？ArrayList 包含所有元素，您希望以哪种形式返回它们？

查看您的代码，您的意思是所有元素的总和吗？那你就犯了一个小错误。您的代码`result = nameofDouble`只是替换结果，因此返回最后一个。`result = result + nameofDouble`或`result += nameofDouble`将所有元素相加。

# asp.net-mvc-4 - 如何编写 MapRoute mvc4

> ID：15439042
> 
> 赞同：1
> 
> 时间：2013-03-15T17:52:58.363
> 
> 标签：asp.net-mvc-4, maproute

我有一个 api 控制器：

```
public class ExchangesController : ApiController
{
    [HttpGet]
    public List<ExchangesTrade> GetTrades(long tid)
    { 
```

我希望能够从浏览器中调用它`/api/USD/trades.json?tid=5`

我应该如何在 RouteConfig 中编写“routes.MapRoute”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:02:04.183

首先，routes.MapRoute 将为传统的 MVC 应用程序添加路由，如果你想为你的 web api 添加路由，你需要在你的 web api HttpConfiguration 路由上使用 MapHttpRoute 添加 Http 路由。

在您的 web api 配置中，您可以添加一个 URI 路径映射扩展，如下所示：

```
config.Formatters
      .JsonFormatter
      .MediaTypeMappings
      .Add(new UriPathExtensionMapping("json", "application/json")); 
```

添加这样的路线：

```
config.Routes.MapHttpRoute(
        name: "ExchangesRouteWithExtensions",
        routeTemplate: "api/USD/{action}.{ext}/{tid}",
        defaults: new { controller = Exchanges, tid = RouteParameter.Optional }
    ); 
```

然后像这样访问您的端点：

```
api/USD/trades.json?tid=5 
```

# t4 - 如何查看无法加载的依赖项？

> ID：15439047
> 
> 赞同：6
> 
> 时间：2013-03-15T17:53:21.797
> 
> 标签：t4

[无法在 T4 模板中引用程序集](https://stackoverflow.com/questions/3434713/cant-reference-an-assembly-in-a-t4-template)

所以当我把

`<#@ assembly name="$(ProjectDir)$(OutDir)$(TargetFileName)" #>`在 T4 模板中，它说

`The assembly $(ProjectDir)$(OutDir)$(TargetFileName) could not be loaded. There was an exception during load: A dependency could not be found!`

据我了解，T4 已更新为不锁定程序集，因此引用当前项目应该是安全的，但似乎在具有依赖关系的项目中这样做是可怕的。

如何找出无法加载的程序集是什么？

# c# - 如何使用 bing-api 获取地图比例？

> ID：15439049
> 
> 赞同：0
> 
> 时间：2013-03-15T17:53:34.573
> 
> 标签：c#, javascript, bing-api, bing-maps

如下面的 bing-map 所示，底部有两个数字（例如：这里 500 英里和 1000 公里）。他们的意思是什么？我正在使用 bing-api。**如何使用 bing-API 获取这两个数字**？

![在此处输入图像描述](../Images/7a656ee0f47f4dd7f9c51b7f7c686741.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:35:16.533

**API参考：**

如果您使用的是 AJAX v7 控件，那么您`getMetersPerPixel`在 Map 类上有一个方法，该方法将返回一个像素的米数。

[http://msdn.microsoft.com/en-us/library/gg427609.aspx](http://msdn.microsoft.com/en-us/library/gg427609.aspx)

如果您想将它与屏幕上元素的特定尺寸一起使用，则需要乘以元素的大小（以像素为单位）。

**例子：**

这是我的同事阿拉斯泰尔的一个非常酷的例子：

[http://alastaira.wordpress.com/2011/06/29/creating-a-custom-bing-maps-scale-bar-aka-yes-but-how-many-space-needles-is-that/](http://alastaira.wordpress.com/2011/06/29/creating-a-custom-bing-maps-scale-bar-a-k-a-yes-but-how-many-space-needles-is-that/)

# php - 问题，在其中回显带有脚本的 HTML，需要第三个“”

> ID：15439052
> 
> 赞同：0
> 
> 时间：2013-03-15T17:53:42.607
> 
> 标签：php, javascript

```
<?php

echo '

<input type="file" name="image_path" style="visibility:hidden;" id="image_file">
<div class="input-append">
  <input id="photoCover" class="input-large" type="text">
    <a class="btn" onclick="$('input[id=image_file]').click();">Browse</a>
</div>

<script type="text/javascript">
   $('input[id=image_file]').change(function() {
   $('#photoCover').val($(this).val());
   });
</script>

'; 
?> 
```

如您所见，这在

```
<a class="btn" onclick="$('input[id=image_file]').click();">Browse</a> 
```

并且在

```
<script type="text/javascript">
   $('input[id=image_file]').change(function() {
   $('#photoCover').val($(this).val());
   });
</script> 
```

由于脚本开始“结束回声”，你将如何解决这个问题？对不起，如果这是一个愚蠢的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:59:21.433

尝试这个。这将起作用。

```
echo '

<input type="file" name="image_path" style="visibility:hidden;" id="image_file">
<div class="input-append">
<input id="photoCover" class="input-large" type="text">
<a class="btn" onclick="$(\'input[id=image_file]\').click();">Browse</a>
</div>

<script type="text/javascript">
$("input[id=image_file]").change(function() {
$("#photoCover").val($(this).val());
});
</script>

'; 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:04:05.550

看起来您正在寻找 heredoc 语法。Heredoc 语法就像第三种类型的`'`or `"`。

```
echo <<<HEREDOC

<input type="file" name="image_path" style="visibility:hidden;" id="image_file">
<div class="input-append">
  <input id="photoCover" class="input-large" type="text">
    <a class="btn" onclick="$('input[id=image_file]').click();">Browse</a>
</div>

<script type="text/javascript">
   $('input[id=image_file]').change(function() {
   $('#photoCover').val($(this).val());
   });
</script>

HEREDOC; 
```

以 NO 空格开始 heredoc 语句，`<<<UNIQUEIDENTIFIER`然后以 NO 结尾`UNIQUEIDENTIFER`，可能是 a `;`，然后是换行符。关闭它的语法非常特殊，所以要小心。

见：[http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

注意：您不必使用 HEREDOC 作为您的唯一标识符，但我倾向于这样做，因为它使那些对语法不熟悉的人更容易通过 google 找出他们所看到的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:57:15.927

你可以逃避`'`，`"`像这样：

```
$html = ' " \" \' '; 
```

这样你就可以得到 3 个不同的报价：

```
$html = '<script type="text/javascript">
   $(\'input[id=image_file]\').change(function() {
   $(\'#photoCover\').val($(this).val());
   });
</script>'; 
```

在 javascript 代码中使用转义的 qoutation 时也要小心，它位于 PHP 字符串中：

```
$html = '<script type="text/html">
    var = \'This text has \\\'quoted\\\' single quotes :)\';
</script>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:56:35.050

简短的回答是使用反斜杠转义，如下所示：

```
<?php
echo '
<input type="file" name="image_path" style="visibility:hidden;" id="image_file">
<div class="input-append">
<input id="photoCover" class="input-large" type="text">
<a class="btn" onclick="$(\'input[id=image_file]\').click();">Browse</a>
</div>
<script type="text/javascript">
$(\'input[id=image_file]\').change(function() {
   $(\'#photoCover\').val($(this).val());
});
</script>
'; 
?> 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T18:01:12.507

我不知道你为什么在 PHP 中回显这个，但你可以这样做：

```
<?php
    // PHP Code
    // In a PHP file, anything outside of PHP tags just gets echoed
?>

<input type="file" name="image_path" style="visibility:hidden;" id="image_file">
<div class="input-append">
  <input id="photoCover" class="input-large" type="text">
    <a class="btn" onclick="$('input[id=image_file]').click();">Browse</a>
</div>

<script type="text/javascript">
   $('input[id=image_file]').change(function() {
   $('#photoCover').val($(this).val());
   });
</script>

<?php
    // PHP Code
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T18:03:14.193

或者，您可以使用`Heredoc`语法：

```
<?php

$html = <<<HTML

<input type="file" name="image_path" style="visibility:hidden;" id="image_file">
<div class="input-append">
  <input id="photoCover" class="input-large" type="text">
    <a class="btn" onclick="$('input[id=image_file]').click();">Browse</a>
</div>

<script type="text/javascript">
   $('input[id=image_file]').change(function() {
   $('#photoCover').val($(this).val());
   });
</script>

HTML;

echo $html;

?> 
```

在这种情况下，您无需担心引号和转义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T18:03:20.977

由于这在 PHP 字符串构造中很常见，因此我将其保留为示例：

```
echo 'I want this text to show my ' in the sentence'; 
```

上面的例子是一个语法错误，因为字符串在预期之前被关闭了。但是，如果字符串中的单引号被转义，它将有效并显示如下：

```
echo 'I want this text to show my \' in the sentence';
//output : I want this text to show my ' in the sentence 
```

其他方法是在双引号和单引号之间来回切换：

```
echo "This will show my ' in the sentence";
//output : This will show my ' in the sentence 
```

但有时您需要更多，并且执行以下操作看起来很难看：

```
echo "I want this ' in here but I need to quote ".'"poney"'." in my sentence";
//output : I want this ' in here but I need to quote "poney" in my sentence 
```

所以记得逃跑。HTML 的另一种方法是退出 PHP 以显示它（有时不是一个选项）：

```
<?php if(true) : ?>
<p>Show some html <?php echo $var;?> here</p>
<?php endif; ?> 
```

或者干脆

```
<?php
    //some code here
?>
<html>
</html> 
```

这可以通过多种方式完成，并且可以避免在`echo`

# architecture - AMD：有两个模块相互依赖

> ID：15439053
> 
> 赞同：0
> 
> 时间：2013-03-15T17:53:43.370
> 
> 标签：architecture, requirejs, amd

我有一个名为 的 Backbone 应用程序模块`app.js`，它看起来像这样：

```
// module: app
define([
  'Marionette',
  'collections/links'
], function (Marionette, Links) {

  var app = Marionette.Application()

  app.addInitializer(function () {
    new Links()
  })

  return app

}) 
```

该`app`模块创建一个实例`Marionette.Application`并添加适当的初始化程序。其中之一是创建我的`Links`集合的一个实例。

但是，我`collections/links`的模块依赖`app`于其观察者系统的模块。

```
// module: collections/links
define([
  'app',
  'Backbone'
], function (app, Backbone) {

  var Links = Backbone.Collection.Extend({
    initialize: function () {
      // Outputs undefined
      console.log(app)
      // This then wouldn't work because app hasn't been initialised:
      // app.on('someEvent', function () {})
    }
  })

  return Links

}) 
```

由于该模块被列为 的依赖项`app`，并且`app`是该模块的依赖项，因此我发现自己具有递归依赖项。最后，RequireJS 似乎在加载`collections/links`之前初始化了模块。`app`

如何使用 AMD 设计我的应用程序，以便`app`可以使用我的`collections/links`模块并且`collections/links`可以使用我的`app`模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:57:01.767

然后，您应该创建两个模块`app`：事件管理器和*初始化程序*。

问题是你的`app`模块不是模块化的（它没有一个任务/关注点），它是一堆代码放在一起。

顺便说一句，从 Backbone 0.9.9 开始，`Backbone`对象是一个全局事件管理器。另外，创建自己的非常容易：`_.extend({}, Backbone.Events)`.

# python - 在 Flask 中是否有使用 API 密钥进行身份验证的公认方法？

> ID：15439055
> 
> 赞同：48
> 
> 时间：2013-03-15T17:53:45.663
> 
> 标签：python, api, flask, api-key

我有一个小 API，我想向其中添加身份验证。我希望能够为 API 消费者生成 API 密钥；然后，消费者可以使用将密钥包含在他们的请求中。

有没有做这样的事情的 Flask 库？或者有没有典型的方法来做到这一点？我做了一个搜索，我才真正发现了[这个](https://coderwall.com/p/4qickw)，它并没有真正深入。如果有图书馆，我正在寻找图书馆。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T18:04:05.343

对于身份验证密钥，创建一个随机值并将该值存储在数据库中。`random()`为这样的事情提供不足的熵，所以使用`os.urandom()`.

您发布的链接有一个很好的例子，说明如何使用装饰器功能处理事情。在装饰器函数中，检查请求中设置的appkey值，验证它在数据库中是否有效，然后返回函数。如果 appkey 无效，`raise AuthenticationError("Invalid appkey")`那么您就完成了。

您链接到的示例有点令人困惑。我喜欢[How to make a chain of function decorators 中的演示？](https://stackoverflow.com/questions/739654/understanding-python-decorators)更好的。

```
def checkAppKey(fn):
    def inner(*args, **kwargs): #appkey should be in kwargs
        try:
            AppKey.get(appkey)
        except KeyError:
            raise AuthenticationError("Invalid appkey")
            #Whatever other errors can raise up such as db inaccessible
        #We were able to access that API key, so pass onward.
        #If you know nothing else will use the appkey after this, you can unset it.
        return fn(*args, **kwargs)
    return inner 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-11T19:56:12.223

这是一个使用 hashlib 的函数，对我来说效果很好：

```
def generate_hash_key():
    """
    @return: A hashkey for use to authenticate agains the API.
    """
    return base64.b64encode(hashlib.sha256(str(random.getrandbits(256))).digest(),
                            random.choice(['rA', 'aZ', 'gQ', 'hH', 'hG', 'aR', 'DD'])).rstrip('==') 
```

在应用程序中实现此功能的可能解决方案是在您要保护的每条路由上应用装饰器。

例子：

```
def get_apiauth_object_by_key(key):
    """
    Query the datastorage for an API key.
    @param ip: ip address
    @return: apiauth sqlachemy object.
    """
    return model.APIAuth.query.filter_by(key=key).first()

def match_api_keys(key, ip):
    """
   Match API keys and discard ip
   @param key: API key from request
   @param ip: remote host IP to match the key.
   @return: boolean
   """
   if key is None or ip is None:
      return False
   api_key = get_apiauth_object_by_key(key)
   if api_key is None:
      return False
   elif api_key.ip == "0.0.0.0":   # 0.0.0.0 means all IPs.
      return True
   elif api_key.key == key and api_key.ip == ip:
      return True
   return False

def require_app_key(f):
   """
   @param f: flask function
   @return: decorator, return the wrapped function or abort json object.
   """

   @wraps(f)
   def decorated(*args, **kwargs):
      if match_api_keys(request.args.get('key'), request.remote_addr):
         return f(*args, **kwargs)
      else:
         with log_to_file:
            log.warning("Unauthorized address trying to use API: " + request.remote_addr)
         abort(401)
      return decorated 
```

然后你可以像这样使用装饰器：

```
@require_app_key
def delete_cake(version, cake_id):
   """
   Controller for API Function that gets a cake by ID
   @param cake_id: cake id
   @return: Response and HTTP code
   """ 
```

此示例使用 SQLAlchemy 将密钥存储在数据库中（您可以使用 SQLite）。

你可以在这里看到实现：[https](https://github.com/haukurk/flask-restapi-recipe) ://github.com/haukurk/flask-restapi-recipe 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T18:03:26.800

生成 API 密钥的“典型”方法是创建 UUID（通常通过创建用户信息的某些子集 + 一些随机信息（如当前时间）的 md5 散列）。

但是，所有 API 密钥都应该是 UUID。md5创建的16进制hash符合这个要求，但肯定还有其他方法。

为用户创建密钥后，将其作为用户信息的一部分存储在数据库中，并检查他们的密钥（通常存储在 cookie 中）是否与您所拥有的相匹配。您链接到的页面中（某种程度上）描述了这种实际机制。

# python - Python 中的装饰器

> ID：15439056
> 
> 赞同：0
> 
> 时间：2013-03-15T17:53:48.937
> 
> 标签：python, python-2.7, decorator, python-decorators

假设您有以下代码：

```
def addTags(functionHere):
    def wrapper():
        return "NumberTag" + functionHere() + "NumberTagOver"
    return wrapper

@addTags
def numbers(firstValue, secondValue):
    return firstValue + secondValue 
```

然后将 numbers(4, 5) 放入解释器会吐出一条痕迹，说明 wrapper 不接受任何参数。好的，然后将 numbers() 放入解释器会吐出 numbers 需要两个参数！使困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:54:57.827

您的包装函数替换了被包装的函数，并且需要匹配它所采用的参数数量。您的包装函数需要两个参数`(firstValue, secondValue)`，但您的包装器根本不需要。

您也可以将这两个添加到您的装饰器包装器中：

```
def addTags(functionHere):
    def wrapper(firstValue, secondValue):
        return "NumberTag" + functionHere(firstValue, secondValue) + "NumberTagOver"
    return wrapper 
```

但这会将您的装饰器与该特定功能联系起来。

但是，您可以使用一个技巧：

```
def addTags(functionHere):
    def wrapper(*args):
        return "NumberTag" + functionHere(*args) + "NumberTagOver"
    return wrapper 
```

`*args`位置参数充当一个包罗万象的功能，函数的所有位置参数现在都传递给包装函数。

关键字参数也有一个等价物：

```
def addTags(functionHere):
    def wrapper(*args, **kw):
        return "NumberTag" + functionHere(*args, **kw) + "NumberTagOver"
    return wrapper 
```

# javascript - index.js.erb 未在 rails 中加载

> ID：15439057
> 
> 赞同：0
> 
> 时间：2013-03-15T17:53:51.777
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript, erb

我在创建但未执行的 index.js.erb 时遇到问题。我的控制器中有以下内容：

```
def index
    @images = Image.order('id desc')

    respond_to do |format|
      format.js
      format.html
    end
end 
```

在我的 index.js.erb 中有以下内容：

```
alert("it works") 
```

如果这也有帮助，我的咖啡脚本文件中有以下内容：

```
ImagePoller =
poll: ->
    setTimeout @request, 5000

request: ->
    $.get($('#images').data('url'))

jQuery ->
if $('#images').length > 0
    ImagePoller.poll() 
```

我可以告诉 js.erb 文件没有加载，因为我没有看到警报？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:50:28.160

为了发出 ajax 请求，您从 '#images' 元素中检索 url。您需要确保您的 URL 包含正确的格式。

您可以简单地`.js`在代码中附加 URL：

```
request: ->
    $.get($('#images').data('url')) + '.js' 
```

但是，更好的方法是使用 rails 辅助方法。例如：

**哈姆**：

```
#images{:'data-url' => url_for(:action => 'index', :format => 'js')} 
```

**再培训局**：

```
<div id="images" data-url="<%=url_for(:action => 'index', :format => 'js')%>"></div> 
```

后一种情况将已经在 URL 中包含“.js”。所以你不需要在我开始展示的末尾附加“.js”。

# android - 如何解决 java.lang.OutOfMemoryException 导致的 AsyncTask 中的 FATAL EXCEPTION

> ID：15439058
> 
> 赞同：0
> 
> 时间：2013-03-15T17:53:52.230
> 
> 标签：android, android-asynctask

我在我的 中写了这段代码`AsyncTask`，但我不明白这一点`Exception`。有人能告诉我哪里错了吗？我不知道我必须做什么。这是我的 3 种方法`AsyncTask`。

```
protected void onPreExecute() {

        HttpParams params = httpClient.getParams();

        if(script.contains("appscan.php"))
        {
            Params.printLog(TAG,"onPreExecute appscan.php script:"+script);
            HttpConnectionParams.setConnectionTimeout(params, 10000);
            HttpConnectionParams.setSoTimeout(params, 10000);
        }
        else
        {
            Params.printLog(TAG,"onPreExecute  script:"+script);
            HttpConnectionParams.setConnectionTimeout(params, 120000);
            HttpConnectionParams.setSoTimeout(params, 120000);
        }
    }

    protected String doInBackground(Void... urls) {
        String st_response="";
        try {
            final HttpResponse response;
            //synchronized (httpClient) {
                if(request==null)
                     cancel(true);
                String m_url;
                if(isPost)
                {
                    m_url=baseUrl+script;
                    HttpPost httppost = new HttpPost(m_url);
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                    nameValuePairs.add(new BasicNameValuePair("id", "12345"));

                    httppost.setEntity(new UrlEncodedFormEntity((List<NameValuePair>)request));
                    if(getClient()==null)
                    {
                        return "";
                    }
                    response = getClient().execute(httppost);

                }
                else
                {
                    String m_request=request==null?"":Uri.encode(request.toString());
                    if(DEBUG)
                        m_url=baseUrl1+script+m_request;
                    else
                        m_url=baseUrl+script+m_request;

                    Params.printLog(TAG,"run :"+m_url);
                    HttpUriRequest request1=new HttpGet(m_url);
                    if(getClient()==null || request1==null)
                    {
                        return "";
                    }
                    response = getClient().execute(request1);
                }
                StringBuilder builder = new StringBuilder();
                InputStream is=response.getEntity().getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
                for (String line = null; (line = reader.readLine()) != null;) {
                    builder.append(line).append("\n");
                }
                is.close();
                st_response=builder.toString();
            //}
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (UnknownHostException e)
        {
            st_response="{\"httperr\":1}";
            e.printStackTrace();
        } 
        catch (IOException e) {
            st_response="{\"httperr\":1}";
            e.printStackTrace();
        }
        return st_response;
    }

    protected void onPostExecute(String content) {
        if(o==null)
            ((ResponseListener)listener).onResponseReceived(content);
        else
            ((ResponseWithObjectListener)listener).onResponseReceived(content,o);
     } 
```

当我尝试加载大量数据时，出现此错误：

```
03-15 13:50:23.160: E/AndroidRuntime(4980): FATAL EXCEPTION: AsyncTask #4
03-15 13:50:23.160: E/AndroidRuntime(4980): java.lang.RuntimeException: An error occured while executing doInBackground()
03-15 13:50:23.160: E/AndroidRuntime(4980):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.lang.Thread.run(Thread.java:1019)
03-15 13:50:23.160: E/AndroidRuntime(4980): Caused by: java.lang.OutOfMemoryError
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:95)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:153)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.lang.StringBuilder.append(StringBuilder.java:217)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at com.qriket.qriket.httpclient.HttpAsyncTask.doInBackground(HttpAsyncTask.java:126)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at com.qriket.qriket.httpclient.HttpAsyncTask.doInBackground(HttpAsyncTask.java:1)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-15 13:50:23.160: E/AndroidRuntime(4980):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:11:40.313

看起来响应很大，（字符串生成器无法构建整个字符串）我建议将其存储在文件中保存，并在任务完成后分块读取。

# android - 如何从 ArrayAdapter 填充 ListView

> ID：15439062
> 
> 赞同：0
> 
> 时间：2013-03-15T17:53:58.590
> 
> 标签：android, arrays, android-arrayadapter

我正在阅读一个 HTML 页面并从一个由`two colums`. 我需要将这些值插入到`ListView`.

我很难掌握`Arrays`, 和的概念`ArrayAdapter`，所以我尝试通过阅读各种代码示例来说明一些内容。

当我静态填充我的 ArrayAdapter（在 Java 代码中）时，我的代码运行良好，但我需要使用循环（或其他什么？）用我从 HTML 页面获得的内容填充数组的内容（所有这些代码都有效并且是到位）。

这就是我正在使用的：

**排名.java**

```
public class Ranking {
    public String month;
    public String rank;

    public Ranking() {
        super();
    }
    public Ranking(String month, String rank) {
        super();
        this.month = month;
        this.rank = rank;
    }
} 
```

此代码有效：

```
Ranking ranking_data[] = new Ranking[] {
    new Ranking("January 2013", "67"),
    new Ranking("February 2013", "45"),
} 
```

然后我`ranking_data`用我自己的 RankingAdapter 引用；

`RankingAdapter adapter = new RankingAdapter(this, R.layout.listview_item_row, ranking_data);`

所以我的问题是；

**如何动态填充ranking_data？**

例如，这**似乎不适**用于循环填充；

```
Ranking ranking_data[] = null;
String mVal1, mVal2;
while (myIterator1.hasNext() && myIterator2.hasNext()) {
   mVal1 = myIterator1.next().text();
   mVal2 = myIterator2.next().text();
   new Ranking(mVal1, mVal2);
} 
```

这给了我`NullPointerException`对 的调用`RankingAdapter adapter = new RankingAdapter(this, R.layout.listview_item_row, ranking_data);`，也许是因为我的初始化`ranking_data`将它设置为`null`，但是我应该如何初始化它？

**编辑**
我`RankingAdapter`的声明如下：

`public class RankingAdapter extends ArrayAdapter<Ranking>`如果有帮助？

**编辑 2**

添加了**RankingAdapter.java的代码**

```
public class RankingAdapter extends ArrayAdapter<Ranking> {
  Context context;
  int layoutResourceId;   
  Ranking data[] = null;

public RankingAdapter(Context context, int layoutResourceId, Ranking[] data) {
  super(context, layoutResourceId, data);
  this.layoutResourceId = layoutResourceId;
  this.context = context;
  this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    RankingHolder holder = null;

    if(row == null) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new RankingHolder();
        holder.txtMonth = (TextView)row.findViewById(R.id.item_month);
        holder.txtRank = (TextView)row.findViewById(R.id.item_rank);

        row.setTag(holder);
    } else {
        holder = (RankingHolder)row.getTag();
    }

    Ranking ranking = data[position];

    holder.txtMonth.setText(ranking.month);
    holder.txtRank.setText(ranking.rank);

    return row;
}
static class RankingHolder {
    TextView txtMonth;
    TextView txtRank;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:06:02.723

在您编写的代码中，您没有将数据分配/添加到您的列表中，并且它仅在第一次初始化为 null 并抛出错误。

您可以编写如下内容：

```
//declare arraylist
ArrayList<Ranking> ItemArray = new ArrayList<Ranking>();
String mVal1, mVal2;
while (myIterator1.hasNext() && myIterator2.hasNext()) {
   mVal1 = myIterator1.next().text();
   mVal2 = myIterator2.next().text();
   //add item in your arrayList
   ItemArray.add(new Ranking(mVal1, mVal2));
} 
```

`adapter.notifydatasetchanged()`如果您要更改列表视图的内容，请不要忘记写

请参阅下面的链接以清楚地了解带有自定义数组适配器的列表视图：

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:57:35.900

使用空集合初始化适配器，并动态更改集合的数据，更改后调用[数组适配器的 notifyDatasetChanged 方法](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

# jquery - 仅在母版页中使用 JS 脚本

> ID：15439064
> 
> 赞同：1
> 
> 时间：2013-03-15T17:54:00.243
> 
> 标签：jquery, asp.net

我有一个带有母版页的页面。母版页有很多 jQuery 引用，但其中之一是冲突的，即 core.js 文件。通常我会从母版页中删除引用并根据需要在页面到页面的基础上使用引用，但是我需要在母版页中使用这个 core.js 文件，因为母版页本身有一个使用它的模块。因此，所有子页面现在都可以看到这个 core.js 文件。我尝试通过使用不同的文件名 (core.old.js) 页面添加旧版本的文件作为对有问题的 aspx 的引用，但没有运气，它只是继承了母版页的 core.js。有谁知道如何添加对仅母版页且没有子页的母版页的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:56:01.613

在主视图中设置`var page = 'master';`，然后将一个添加`if () {}`到您的 JavaScript 中，只有在`page === 'master'`.

# webdriver - 单击 WebDriver 中框架内的链接

> ID：15439079
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:54:39.830
> 
> 标签：webdriver, selenium-webdriver

在 makemytrip.com 中单击取消链接会打开一个新框架，其中显示“取消您的航班预订”，这是一个框架。在此框架中，我尝试单击“关闭此窗口”链接。但这并没有发生，在 eclipse 中它给出了 element not exist 错误。

这是代码，

```
driver.findElement(By.xpath("//div[@class='dialog_closepanel']//span//a[text()='close this window']")).click(); 
```

我如何点击这个链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:43:41.520

试试这个代码：

```
driver.findElement(By.cssSelector("span.ui-icon.ui-icon-closethick")).click(); 
```

编辑：

如果您看到关闭模式的链接和图标，请尝试以下操作：

```
driver.findElement(By.linkText("close this window")).click(); 
```

或者

```
driver.findElement(By.cssSelector("img[alt=\"close\"]")).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:47:19.093

尝试这样的事情：

```
public static int DEFAULT_IMPLICIT_WAIT = 30;
getElementByLocator( By.cssSelector("span.ui-icon.ui-icon-closethick")).click(); 
```

从这个方法：

```
public static WebElement getElementByLocator( By locator ) {
  long startTime = System.currentTimeMillis();
  driver.manage().timeouts().implicitlyWait( 5, TimeUnit.SECONDS );
  WebElement we = null;
  boolean unfound = true;
  while ( unfound ) {
    try {
      we = driver.findElement( locator );
      unfound = false; // FOUND IT
    } catch ( StaleElementReferenceException e ) {                      
      unfound = true;
      try {
        Thread.sleep(4000);
      } catch (InterruptedException e1) {
        e1.printStackTrace();
      }
    }       
  } 
  // and finally the cleanup          
  driver.manage().timeouts().implicitlyWait( DEFAULT_IMPLICIT_WAIT, TimeUnit.SECONDS );
  return we;
 } 
```

# sql - Oracle 循环插入

> ID：15439083
> 
> 赞同：0
> 
> 时间：2013-03-15T17:54:43.523
> 
> 标签：sql, oracle, loops, insert, cursor

我在我们的 Oracle 数据库中执行一次大规模更新时遇到问题。

我想批量插入映射表，我们可以称之为**map**

还有另外两个表，我必须从中获取数据 第一个表是**帐户**表，我可以从中选择所需的帐户以使用此查询插入：

```
select account_id
from account
where company_id in (
select company_id
from company
where company_name = 'string'); 
```

此查询将根据我要插入的公司名称选择我的所有帐户。

接下来我有一个我们可以称之为**组**的表，在这个表中我有我插入的组的确切数量，组有 UID，所以我们有 group_id 1 到 500。

这是我需要做的：我需要在表映射中插入帐户和组之间的 UID 映射。没有需要执行的特殊顺序

```
insert into map (account_id, group_id) 
  values (number,number); 
```

但不幸的是，我不知道如何使用包含多个结果的选择进行这种大规模插入，以及如何计算循环。

所以我的想法是做这样的事情：

```
insert into map (account_id, group_id) values ((select account_id
from account
where company_id in (
select company_id
from company
where company_name = 'string')),loop from 1 to 500); 
```

规则`group_id`可以插入多个`account_id`，但一个`account_id`只能链接到一组。

当然这个查询是行不通的，我只是想表达我想做的事情。希望这是有道理的。

我因为我知道我到底想在哪里插入什么，并且我知道我有 500`account_id`秒和 50`group_id`秒的所有计数。它们也按顺序表示`account_id`1 到 500 和`group_id`1 到 500，所以我认为在这种情况下，以某种方式循环插入应该相当容易。

我希望我已经尽可能地把自己说清楚了。

感谢您的回答和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:11:51.340

像这样的东西会起作用。它使用语法（参见[此处](http://www.techonthenet.com/sql/insert.php)`INSERT ... SELECT`的示例）从查询中插入多行。

要进行循环，请将结果与此查询交叉连接，这将为您提供一个包含 500 行且带有序号的表。

```
select LEVEL as group_id from dual connect by LEVEL <= 500 
```

这是最终的答案。它未经测试，因此您可能需要修复和调整，但这是一般方法：

```
insert into map (account_id, group_id)
  select account_id, group_id
    from account
    where company_id in (select company_id 
                         from company 
                         where company_name = 'string')
  cross join (select LEVEL as group_id
              from dual 
              connect by LEVEL <= 500) 
```

**加法**- OP 询问包含 1,000 到 1,500 组（而不是 1 到 500）的查询将如何工作......

始终必须从`CONNECT BY LEVEL`1 开始，因此您需要`CONNECT BY LEVEL <= 1500`在内部查询中使用外部 WHERE 子句过滤掉 1 到 999。这是一个例子；差异都在交叉连接的查询中：

```
insert into map (account_id, group_id)
  select account_id, group_id
    from account
    where company_id in (select company_id 
                         from company 
                         where company_name = 'string')
  cross join (
     select group_id from (
       select LEVEL as group_id
         from dual
         connect by LEVEL <= 1500)
     where group_id >= 1000) 
```

目前我还没有 Oracle，所以这和我之前的回答一样未经测试。

另请注意：像这样上升到 1,500 是没有问题的，但在某些时候你会注意到速度放缓。我不知道它会是一万、十万还是一百万，但迟早你会碰壁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:06:58.803

这将插入帐户 ID 和组 ID 的每个组合：

```
INSERT INTO map(account_id, group_id)
SELECT a.id, g.id
FROM account a, group g
WHERE a.company_id IN ( select company_id 
                        from company 
                        where company_name = 'string'); 
```

编辑：如果我理解你的评论正确，你想要这样的东西：

```
INSERT INTO map(account_id, group_id)
SELECT a.id, g.id
FROM account a, group g
WHERE a.company_id IN ( SELECT company_id 
                        FROM company 
                        WHERE company_name = 'string')
AND 1000 <= a.id AND a.id <= 1500
AND g.id = a.id + 1000; 
```

它将帐户 1000 与组 2000 连接，帐户 1001 与组 2001 连接，依此类推。现在加入组有点不必要，但它会确保存在具有预期组 id 的行（如果不存在则跳过它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:07:44.367

回答你的问题：

```
INSERT INTO map(account_id, group_id)
SELECT a.id, g.id
  FROM account a
 INNER JOIN company c
    ON a.company_id = c.company_id
   AND c.company_name = 'string'
 CROSS JOIN group g 
```

我最讨厌的，别再控制 SQL 了！您不必使用`IN`.

# algorithm - 找到最小元素堆栈或堆数据结构哪个更好

> ID：15439084
> 
> 赞同：1
> 
> 时间：2013-03-15T17:54:44.460
> 
> 标签：algorithm, data-structures, stack, heap

哪个更好，实现堆栈以获取最小元素或维护堆数据结构以提取最小元素。两者都给出了 O(1) 中的最小元素（如果您实现 2 个堆栈，一个具有最小元素，另一个堆栈具有实际输入）。

解释一下，在哪些情况下我们可以使用堆栈或堆来提取最小或最大元素以及为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:06:40.343

您基本上可以使用[基于两个堆栈的解决方案](https://stackoverflow.com/questions/685060/design-a-stack-such-that-getminimum-should-be-o1)来找到最小值，但它不是有效的（因为它消耗 2*N 内存而堆消耗 N 内存）并且堆栈应该用于其他目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:15:56.820

类似堆栈的数据结构[1] 和堆都支持“获取最小值”操作。（请注意，我们谈论的是堆数据结构，而不是用于内存分配的“堆”。）它们都允许添加新元素。

它们在删除元素方面有所不同。具体来说，使用堆栈，您可以按照与插入相反的顺序删除元素。使用堆，您可以按值顺序删除元素（即始终删除最小值）。

所以你应该使用支持你需要的操作的那个。

* * *

[1] 所指的数据结构要么是两个并行的堆栈，要么是一对项目的堆栈；在这两种情况下，堆栈都会将添加的项目和最小值保持到该点，这可以在 中计算`O(1)`，因为它只是推送的项目的最小值和之前的最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:19:38.660

MinHeaps 旨在快速为您提供最小元素。只需查看最小元素（不删除）就需要 O(1)（恒定）时间。通常，您将删除最小元素，这将迫使您重新堆化堆，这需要 log(n) 时间。维基[百科文章](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)绘图显示了 MaxHeap，但实现 MinHeap 几乎相同。

要在（单个）堆栈中找到最小元素需要**n**时间（并且 log(n) < n），因为您必须搜索堆栈中的所有元素才能找到最小值。因此，您需要`pop()`关闭每个元素，检查它是否小于您记住的最小值，然后将其 push() 到辅助堆栈上，直到您遍历整个堆栈。因此，如果获取最小元素是数据结构的主要目的，您通常会希望使用 MinHeap。

另一方面，其他人提到的双栈解决方案的操作（add、remove、getMin）复杂度为 O(1)，而 removeMin 的时间复杂度为 O(n)。在最坏的情况下，它还需要 2N 空间。

总结一下：

```
 add/push 1    remove/pop 1   peekMin   removeMin   space
              ==========    ============   =======   =========   =====
one stack         O(1)          O(1)         O(n)       O(n)       n
two stacks        O(1)          O(1)         O(1)       O(n)      2n
minHeap         O(log(n)        N/A          O(1)     O(log n)     n 
```

正如@rici 指出的那样，minHeap 支持 O(log n) 中的 removeMin 操作，即比堆栈快，但是，对于 add/remove 和 peekMin，两堆栈解决方案更快。minHeap 也不维护“大于”和“小于”关系之外的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T06:52:55.953

我真的不明白这个问题。

似乎类似于问题：我应该使用锤子还是水壶？答案是：目的是什么？

堆和栈的目的/行为是*不同*的。

Heap 提供 API，例如：Insert(Key x)、GetandDeleteMin()

虽然堆栈提供了一个 LIFO（后进先出）API：Push(Value x)、Value Pop()（如果需要，还有 GetMin()）。

你应该问自己的问题是，我需要一个支持 min 的 LIFO 结构吗？如果是这样，您可以使用堆栈。

或者

我是否需要一个“优先级结构”，我可以在其中以随机顺序插入，并删除具有最高/最低优先级的结构？如果是这样，您可以使用堆。

即您应该首先查看您*需要*的行为。

所有这些比较运行时间和空间使用情况的答案对我来说似乎也很奇怪。当用法本质上不同时，进行这种比较有什么意义呢？首先确定行为，然后如果您有选择，请进行时间/空间等比较。

你真正在寻找什么？

# java - 想要写入 jar (Java) 中捆绑的文本文件

> ID：15439087
> 
> 赞同：2
> 
> 时间：2013-03-15T17:54:56.547
> 
> 标签：java

标题几乎说明了一切。我读过几个人只是说你可以从文件中读取，但不能写入文件。

我曾尝试使用 getResourceAsStream 但它似乎对我不起作用。

通过代码可以很容易地理解我的程序；

在启动时，它从给定的文本文件中读取文本（如果不存在，则创建一个）。然后解析该字符串，并出现一个输入框以输入一个新数字。

然后将这些数字相加，并将结果写回文件中。

如果我需要先提取文本文件，写入它，然后以某种方式将其放回 jar 中，就这样吧，但我希望这是一个自动化过程，因此 jar 文件可以从它所在的任何地方运行如果它被移动，则不需要其他任何东西来复制它。

```
public static void main(String[] args) throws IOException {

    int iCount;
    int nCount;
    int fCount;
    String Count = "";
    String in;
    String workingDir = System.getProperty("user.dir");
    String file = workingDir + "\\File.txt";
    String[] dialog = {"Yes", "No"};
    String[] end = {"Restart", "Exit"};

        try { 

            BufferedReader readText = new BufferedReader(new FileReader(file));
            String input = readText.readLine();
            Count = input;

        } catch (FileNotFoundException e) {

        JOptionPane.showMessageDialog(null, "There is no file.");

        String fPre = "File";
        String fileName = fPre + ".txt";
        File f = new File(workingDir, fileName);
        f.createNewFile();
        BufferedWriter outputText = new BufferedWriter(new FileWriter(file));
        outputText.write("0");
        outputText.close();

        int selected = JOptionPane.showOptionDialog(null, "The file has been created for you. \n Do you wish to continue?", "Message", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, dialog, dialog[0]);

        if(selected == 0){
                Do.main(args); 
            } else { 
                System.exit(0); 
            } 

        }

    iCount = Integer.parseInt(Count);
    in = JOptionPane.showInputDialog("The current count is " + iCount + ". Please enter the new count amount.");
    nCount = Integer.parseInt(in);

    /* if(in == "[a-zA-Z]+" == true){
        in = JOptionPane.showInputDialog("The value entered is not a number. \n" + "Please enter a number.");
    } */

    fCount = iCount + nCount;

    try {
        BufferedWriter outputText = new BufferedWriter(new FileWriter(file));
        outputText.write(String.valueOf(fCount));
        outputText.close();
        JOptionPane.showMessageDialog(null, "New count is: " + fCount + ".");
        int selectedLast = JOptionPane.showOptionDialog(null, "Value has been written to file.\n" + "Do you wish to restart or exit?", "Confirm", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, end, end[0]);
        if(selectedLast == 0){
            Do.main(args);
        } else {
            System.exit(0);
        }   
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }   

} 
```

我对 Java 很陌生，只学习了两个月，所以我不知道它的所有细节。

# ios - 不兼容的指针类型分配

> ID：15439097
> 
> 赞同：1
> 
> 时间：2013-03-15T17:55:25.517
> 
> 标签：ios, nsdictionary

我有一个已初始化的静态字典，并且数据已添加到不同的.m 文件中，现在在我的视图控制器中我需要该静态字典。字典实际上包含运营商名称作为键，它们各自的号码作为值，所以我最想做的是检查手机所属的运营商，然后获取相应的号码。已形成静态字典的 .m 文件是 Config.m，它有一个实际返回静态字典的方法。

```
+ (NSDictionary*) getMccMncToCodeDictionary
{
    return mccMncLISDictionary;
} 
```

我在 ViewController 中所做的是：“分配给不兼容的指针类型

```
Config* network_number = [[Config alloc] init];
network_number = [Config getMccMncToLISCodeDictionary];
NSLog(@"network number:::%@", network_number); 
```

在我的控制台中显示

```
network number:::(null) 
```

我得到的警告（黄色错误）是 ViewController 代码第二行中的“不兼容的指针类型从 NSDictionary* 分配给 'Config*_strong'”

我的 initLISDictionary 代码：

```
- (void) initLISDictionary
{ 
NSString* MCC = @"520";
NSString* CAT3G = [NSString stringWithFormat:@"%@00",MCC];
NSString* AIS = [NSString stringWithFormat:@"%@01",MCC];
NSString* CAT_CDMA =[NSString stringWithFormat:@"%@02",MCC];
NSString* TOT3G = [NSString stringWithFormat:@"%@15",MCC];
NSString* DTAC = [NSString stringWithFormat:@"%@18",MCC];
NSString* AIS_GSM_1800 = [NSString stringWithFormat:@"%@23",MCC];
NSString* TRUE_MOVE_H = [NSString stringWithFormat:@"%@88",MCC];
NSString* TRUE_MOVE = [NSString stringWithFormat:@"%@99",MCC];

mccMncLISCodeDictionary = [NSMutableDictionary dictionary];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:2] forKey:CAT3G];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:1] forKey:AIS];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:2] forKey:CAT_CDMA];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:4] forKey:TOT3G];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:3] forKey:DTAC];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:1] forKey:AIS_GSM_1800];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:5] forKey:TRUE_MOVE];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:5] forKey:TRUE_MOVE_H];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:05:02.993

当然，这是行不通的。

```
Config* network_number = [[Config alloc] init];
network_number = [Config getMccMncToLISCodeDictionary];
NSLog(@"network number:::%@", network_number); 
```

此代码启动一个新的 Config 对象，但是当您调用 network_number 时，您正在调用一个 CLASS 方法，因此您之前启动它毫无价值。您需要将其设为实例方法（只需更改 + 的 - 并确保其在标题中声明），以便您可以调用：

```
Config* network_number = [[Config alloc] init];
network_number = [network_number getMccMncToLISCodeDictionary]; 
```

或者你必须让你的类方法完全自给自足，但我确定它不是你想要的。

编辑：

```
+ (NSDictionary*) getMccMncToCodeDictionary
{

NSString* MCC = @"520";
NSString* CAT3G = [NSString stringWithFormat:@"%@00",MCC];
NSString* AIS = [NSString stringWithFormat:@"%@01",MCC];
NSString* CAT_CDMA =[NSString stringWithFormat:@"%@02",MCC];
NSString* TOT3G = [NSString stringWithFormat:@"%@15",MCC];
NSString* DTAC = [NSString stringWithFormat:@"%@18",MCC];
NSString* AIS_GSM_1800 = [NSString stringWithFormat:@"%@23",MCC];
NSString* TRUE_MOVE_H = [NSString stringWithFormat:@"%@88",MCC];
NSString* TRUE_MOVE = [NSString stringWithFormat:@"%@99",MCC];

mccMncLISCodeDictionary = [NSMutableDictionary dictionary];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:2] forKey:CAT3G];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:1] forKey:AIS];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:2] forKey:CAT_CDMA];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:4] forKey:TOT3G];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:3] forKey:DTAC];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:1] forKey:AIS_GSM_1800];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:5] forKey:TRUE_MOVE];
[mccMncLISCodeDictionary setValue:[NSNumber numberWithInt:5] forKey:TRUE_MOVE_H];

return mccMncLISDictionary;
} 
```

这是最接近您似乎正在尝试做的事情。

只需使用这 2 行，忽略 init

```
NSMutableDictionary *network_number = [Config getMccMncToLISCodeDictionary];
NSLog(@"network number:::%@", network_number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:23:17.497

尝试使该`initLISDictionary`方法成为类方法，然后您可以执行以下操作：

```
+ (NSDictionary*) getMccMncToCodeDictionary
{
    if (mccMncLISDictionary == nil) {
        [Config initLISDictionary];
    }
    return mccMncLISDictionary;
} 
```

但是，您也在初始化`mccMncLISCodeDictionary`而不是`mccMncLISDictionary`，因此您也需要理顺它。

你应该做：

```
NSDictionary *network_number = [Config getMccMncToLISCodeDictionary];
NSLog(@"network number:::%@", network_number); 
```

因为你正在调用这个方法，它的返回类型是 NSDictionary

```
+ (NSDictionary*) getMccMncToCodeDictionary
{
    return mccMncLISDictionary;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:26:07.230

这些都是返回静态对象的类方法。

你可能想做这样的事情：

```
NSDictionary *network_number = [Config getMccMncToLISCodeDictionary]; 
```

# reflection - 当我尝试使用 List 调用成员时，Type.InvokeMember 引发 MissingMethodException > 作为参数之一

> ID：15439103
> 
> 赞同：0
> 
> 时间：2013-03-15T17:55:45.563
> 
> 标签：reflection, invokemember

我正在尝试使用 WCF Web 服务的 WSDL 动态创建代理并在其上调用方法。我试图通过在运行时构造代理来调用的 WCF 服务中的方法签名如下：

（我为此目的使用来自 MSDN 的 DynamicProxy 代码，该代码位于[此处](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=netfxsamples&DownloadId=3939)）

我使用以下代码片段在运行时使用 wsdl 创建代理 -

```
 var factory = new DynamicProxyFactory(wsdl);
    var proxy = factory.CreateProxy(contract);
    object value1 = topic;
    object value2 = emailMessage;
    object value3 = messageProperties; //This is of type List<KeyValuepair<string,string>>

     proxy.CallMethod(method, value1, value2, value3); 
```

上述调用中的方法具有下面列出的签名：

```
 void ReceiveMessage(string topic, string message, List<KeyValuePair<string, string>> propertyBag); 
```

一旦我为包含上述方法的 Web 服务动态创建代理，并在其上执行 type.InvokeMember，我得到一个方法未找到异常。

但是，当我尝试使用所有字符串作为参数调用类似方法时，我可以成功调用该方法。例如，以下方法被成功调用

```
 void ReceiveMessage2(string message, string topic, string anything); 
```

我使用 InvokeMember 的方式非常简单

```
 public object CallMethod(string method, params object[] parameters)
    {
        object retval = this.objType.InvokeMember(
            method,
            BindingFlags.InvokeMethod | CommonBindingFlags,
            null /* Binder */,
            this.obj,
            parameters /* args */);

        return retval;
    } 
```

有人可以帮我弄清楚我做错了什么吗？对于两个调用（ReceiveMessage 和 ReceiveMessage2），我都以相同的方式传递对象。提前致谢。这一直让我发疯。

编辑：

上述函数中的 commonBindingFlags 实际上是对此的封装——

```
 BindingFlags.Instance | BindingFlags.Public; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:37:33.440

我找到了解决我的问题的方法。看起来 KeyValuePair 不可序列化。我用了

```
 Dictionary<string, string> 
```

代替

```
 List<KeyValuePair<string,string>> 
```

它解决了这个问题。

谢谢

# git - 可以安装 EGit：缺少要求：Git Team Provider Core

> ID：15439104
> 
> 赞同：13
> 
> 时间：2013-03-15T17:55:48.923
> 
> 标签：git, eclipse-plugin, windows-7-x64, egit, coldfusionbuilder

所以我将 Coldfusion Builder 与 Ecpise 一起使用。我正在尝试在其中安装 EGit，以便我可以做 Git 的事情。我唯一能安装的是 EGit 0.11.1 来自`http://download.ecplise.org/releases/helios/`. 当我尝试从`http://download.eclipse.org/egit/updates`版本 2.3.1.xxx 安装最新版本时，我总是收到 Missing requirements 错误：

```
Missing requirement: Git Team Provider Core 2.3.1.201302201838-r (org.eclipse.egit.core 2.3.1.201302201838-r) requires 'bundle org.eclipse.core.runtime [3.7.0,4.0.0)' but it could not be found
Cannot satisfy dependency: From: Eclipse EGit 2.3.1.201302201838-r (org.eclipse.egit.feature.group 2.3.1.201302201838-r)
To: org.eclipse.egit.core [2.3.1.201302201838-r] 
```

我不知道如何安装 Git Team Provider Core。我已经阅读了一些有关设置系统配置等的内容，但我所做的似乎无济于事。我试过安装所有不同的东西，比如 Mylyn、JGit 等，但我显然错过了一些重要的东西。

如果这很重要，我确实在 Windows 中安装了 Git，但仍然没有。这必须是一个简单的配置问题，对吧？我的意思是，我安装的版本（0.11.1）正在按预期工作。我可以拉/分支/推，所有这些好东西。但是我的朋友注意到我缺少`Team`菜单下的一些选项，我认为这是因为我无法启动并运行最新版本。

想法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-15T20:14:08.460

您说您正在尝试通过 更新`http://download.eclipse.org/releases/helios/`，所以听起来您仍在运行 Eclipse 3.6 (Helios)。

根据[EGit FAQ](http://wiki.eclipse.org/EGit/FAQ#What_versions_of_Eclipse_does_EGit_target.3F)，Helios 支持的最新版本 EGit 是 2.1.0.201209190230-r。它还说：

> 如果可能，我们不会阻止在旧版本中使用，但如果我们想利用仅在最新的两个 Eclipse 版本之一中可用但在旧版本中不可用的新功能，我们将更新依赖项，这实际上将停止对旧版本的支持。

您可能遇到了在您的 Eclipse 版本上破坏 EGit 的那些依赖项之一。

我建议：

*   安装 EGit 2.1，这是 Helios 的最后一个支持版本。在“Help->Install New Software”下，添加这个站点：http: [//download.eclipse.org/egit/updates-2.1/](http://download.eclipse.org/egit/updates-2.1/)。从那里安装 EGit。

*   升级到 Eclipse 3.7 (Indigo) 或 4.2 (Juno，最新版本) 并使用 EGit 2.3 重试。请注意，升级 Eclipse 可能会给您带来新问题。

# css - 我可以设置这些 div 的样式，以便它们在末尾带有一个 break 内联吗

> ID：15439106
> 
> 赞同：0
> 
> 时间：2013-03-15T17:55:50.687
> 
> 标签：css, html

我希望显示器是这样的。

```
Div1 Div2
Div3 Div4 
```

html是这样的：

```
<div class="class1">Div1</div> <div class="class2">Div2</div>
<div class="class1">Div3</div> <div class="class2">Div4</div> 
```

样式表是这样的：

```
.class1
{
    font-weight:bold;
    font-size:9pt;
    display:inline-block;
}

.class2
{
    font-weight:normal;
    font-size:9pt;
    display:inline;   
} 
```

使用纯 CSS，我希望能够像我上面提到的那样安排布局。

是否可以在不将 class1 和 class2 包装在容器 div 中的情况下使用 CSS 执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:58:27.827

[http://jsfiddle.net/pxpvw/1](http://jsfiddle.net/pxpvw/1)

```
.class1 {
    float: left;
    clear: left;
}

.class2 {
    float: left;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:02:25.907

加入`float:left`_`.class1`

```
.class1
{
    font-weight:bold;
    font-size:9pt;
    display:inline-block;
    float:left;
} 
```

你会得到你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:19:04.070

Float:left 用于所有这些，而不是添加一个 margin-right 值，以便 .class3 元素进入。

# asp.net-mvc - 将 MVC 应用程序发布到现有 Web 表单应用程序的子文件夹

> ID：15439112
> 
> 赞同：1
> 
> 时间：2013-03-15T17:56:02.767
> 
> 标签：asp.net-mvc, webforms

我构建了一个需要与现有 Web 应用程序集成的 MVC Web 应用程序。不幸的是，现有网站是一个 Web 表单应用程序。

我想将我的 MVC 应用程序发布到一个子目录，例如[http://www.webforms.com/mvc](http://www.webforms.com/mvc)。理想情况下，该网站将在任何地方运行 Web 表单，直到它到达“mvc”子目录（或更深入），在这种情况下，它将切换到 MVC 配置。

另一件需要注意的是，用户在 web 表单端登录，登录应该转移到 mvc 端。

我做了一些研究，但我读过的大多数文章都是针对早期的 .NET 框架的。只是想知道是否有人对此有很好的解决方案，最好不需要修改旧的 webforms 代码。希望可以主要通过 IIS 来实现。请让我知道你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:00:13.770

我认为有两件事很重要：正确设置路由（不要忘记将子目录名称附加到模式中）以及在集成模式应用程序池中运行应用程序。（您可以在 IIS 管理控制台中创建任何应用程序。）

# jquery - 鼠标单击时下拉表单消失

> ID：15439115
> 
> 赞同：0
> 
> 时间：2013-03-15T17:56:07.800
> 
> 标签：jquery, forms, drop-down-menu, twitter-bootstrap, onclick

我的下拉列表中有一个表单，单击它会消失
我尝试了 jquery

```
 $(function() {
                  // Fix input element click problem
                  $('.dropdown-menu').find('form').click(function (e)
                  {
                    e.stopPropagation();
                  });
            }); 
```

但这并不能解决我的问题
这是我的代码

```
<li class="dropdown" style="float:right">
<a class="dropdown-toggle" data-toggle="dropdown" href="#" style="text-decoration:none">
<img src="img/button.png" style="float:right;"/>
</a> 
<ul class="dropdown-menu">               
    <form action="" method="post">
    <li>
        <input type="text" class="input-large" id="name" name="name"/>
    </li>
    <br>
    <li>
        <input type="password" class="input-large " id="pass" name="pass"/>
    </li><br>
        <input type="submit" value="submit"/>
</form>
</ul>
</li> 
```

已经使用了 bootstrap.min.js 。我只是在我的应用程序中包含了 js 文件，这是下拉列表的代码

```
{
    function d()
    {
       a(b).parent().removeClass("open")
    }"use strict";
    var b='[data-toggle="dropdown"]',c=function(b)
    {
    var c=a(b).on("click.dropdown.data-api",this.toggle);
    a("html").on("click.dropdown.data-api",function()
    {
    c.parent().removeClass("open")
    }
    )
    };
    c.prototype={
    constructor:c,toggle:function(b)
    {
    var c=a(this),e=c.attr("data-target"),f,g;
    return e||(e=c.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),f=a(e),f.length||(f=c.parent()),g=f.hasClass("open"),d(),!g&&f.toggleClass("open"),!1
    }
    },a.fn.dropdown=function(b)
    {
    return this.each(function()
    {
    var d=a(this),e=d.data("dropdown");
    e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown.data-api",b,c.prototype.toggle)
    }
    )
    } 
```

# asp.net - ajax calendarextender 选择 2014 年时的错误转移回 2013

> ID：15439116
> 
> 赞同：0
> 
> 时间：2013-03-15T17:56:09.267
> 
> 标签：asp.net, asp.net-ajax

我有一个 ASP.NET Ajax 日历扩展器。

日期显示正常，一切看起来都很好，除了问题是当我从年份中选择 2014 时，显示的月份标题显示 2013。选择 2015 或其他年份不会导致出现此问题。

这只发生在我选择当前年份（2013 年）之前。一旦我选择了当前年份，我就可以选择未来的年份。

我不知道为什么它第一次不起作用我不确定这是一个错误还是已知问题。如果有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:04:21.860

在你的 aspx 页面...

```
 <Ajax:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"/>
    Pick a date: 
    <asp:TextBox ID="txtCal" runat="server"/>
    <Ajax:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="txtCal" SelectedDate="6/6/2012" StartDate="6/1/2012" EndDate="7/1/2012">
</Ajax:CalendarExtender> 
```

在脚本中使用它

```
<script type="text/javascript">

function ShowYears(sender,args)

{

sender._switchMode("years", true);           

 }

</script> 
```

再次在您的 aspx 页面中..

```
<asp:TextBox ID="txtCalendar" runat="server"/> 
<asp:Image ID="imgCal" runat="server" ImageUrl="~/Images/calendar.png"/>
<Ajax:CalendarExtender ID="CalendarExtender2" runat="server"
                       TargetControlID="txtCalendar" 
                       PopupButtonID="imgCal" 
                       OnClientShown="ShowYears"/> 
```

# powershell - 回显到文件时Powershell生成未知字符

> ID：15439120
> 
> 赞同：12
> 
> 时间：2013-03-15T17:56:21.750
> 
> 标签：powershell

我正在尝试使用 Powershell 将 3 个纯文本行回显到文件中：

```
echo "#Generated" > psftp.scp
echo "put test.txt" >> psftp.scp
echo "quit" >> psftp.scp 
```

然后我使用 psftp.exe 批处理模式来运行文件（在 SFTP 中执行命令），但是 psftp 错误地看到一个无效字符：

```
psftp: unknown command " ■#" 
```

我错过了什么？我可以在 Windows 记事本中手动输入文件，它 (psftp) 可以工作。无论我将第一行更改为 ( `#Generated`) ，它都会在第一部分中使用块符号出现此错误。

我已经尝试在 NotePad++ 中查看带有“显示所有符号”的文件，但只在行尾看到 CR 和 LF，这是正常的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T18:32:27.293

尝试使用 set/add-content 而不是重定向。您可能还需要设置编码。

```
"#Generated" | set-content psftp.scp -Encoding Ascii
"put test.txt" | add-content psftp.scp -Encoding Ascii
"quit" | add-content psftp.scp -Encoding Ascii 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T01:18:33.873

就我而言，我将 .ps1 管道传输到 .cmd 文件中的 powershell

```
type script.ps1 | powershell -ExecutionPolicy Bypass 
```

虽然脚本以其他方式运行时没有错误，但以这种方式运行时，由于无效字符，它会在第一行（注释行）抛出语法错误。

我发现如果我使用 wScite 编辑器保存 .ps1 文件，默认为“带有 BOM 的 UTF-8”。我将其更改为“UTF-8”，然后将脚本通过管道传输到 powershell 工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-19T01:28:00.227

与 Out-File 一样，Powershell 5 中“>”和“>>”的默认编码是 UTF16LE（“Unicode”）。我猜 psftp 无法读取？“FF FE”是编码签名或“BOM”。你是如何运行 psftp 的？

```
format-hex psftp.scp

           Path: C:\Users\me\psftp.scp

           00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F

00000000   FF FE 23 00 47 00 65 00 6E 00 65 00 72 00 61 00  .þ#.G.e.n.e.r.a.
00000010   74 00 65 00 64 00 0D 00 0A 00 70 00 75 00 74 00  t.e.d.....p.u.t.
00000020   20 00 74 00 65 00 73 00 74 00 2E 00 74 00 78 00   .t.e.s.t...t.x.
00000030   74 00 0D 00 0A 00 71 00 75 00 69 00 74 00 0D 00  t.....q.u.i.t...
00000040   0A 00                                            .. 
```

# ms-access - 访问表达式构建对自身的引用

> ID：15439123
> 
> 赞同：1
> 
> 时间：2013-03-15T17:56:26.387
> 
> 标签：ms-access, vba, ms-access-2010, expressionbuilder

假设我有一个包含两列的报告；“佣金”和“取消佣金”。在我的报告中，这些被表示为文本框；txtC 和 txtCC。如果 txtCC 不为空，我希望 txtC 为 $0。我因此尝试了以下操作，`Expression Builder IIF(ISNULL([txtCC]), [txtCC], 0)`但这给了我对自身错误的引用。我遇到了为自己赋值的循环问题，但我已经找到了解决问题的方法。我确信比我更聪明的人已经解决了这个问题，所以我呼吁聪明的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:03:45.917

在进行此更改之前，您是否确保将文本框重命名为其他名称？

```
 =IIF(ISNULL([txtCC]), [txtCC], 0) 
```

在名为 say, 的文本框中应该没问题`atextbox`。

# asp.net-mvc - 带有控制器/操作名称的 ASP.NET MVC 自定义筛选器属性

> ID：15439126
> 
> 赞同：0
> 
> 时间：2013-03-15T17:56:33.630
> 
> 标签：asp.net-mvc, actionfilterattribute

我有一个自定义`ActionFilterAttribute`类，可将用户发送到错误屏幕，其中包含返回上一页的链接。

此属性接受两个控制器/操作对：一个用于错误屏幕操作（通常在应用程序范围内相同），另一个用于返回操作（通常对于控制器中的所有操作都相同）。这个想法是，当发生错误时，我不希望我的用户因为无法返回应用程序而感到迷茫。

现在我有四个属性：两个用于控制器名称，两个用于操作名称。我不喜欢在我的应用程序中硬编码这两个操作。为它们设置友好的默认值会很好。我希望能够全局指定默认错误操作。

所以，有几个问题：

*   如何全局配置我的属性可以引用的路由？
*   当我需要覆盖默认值时，引用控制器/动作对的最佳方式是什么？

它作为属性的问题之一是属性的所有参数都必须是常量。所以我不能计算一个`ActionResult`或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:13:36.893

您可以像这样在 RouteConfig 中定义路由：

```
routes.MapRoute(
                name: "Error",
                url: "error/generalerror",
                defaults: new { controller = "Error", action = "GeneralError" },
                namespaces: new[] { "YourApplication.namespace" }
            );
routes.MapRoute(
                name: "CustomError",
                url: "error/customerror",
                defaults: new { controller = "Error", action = "CustomError" },
                namespaces: new[] { "YourApplication.namespace" }
            ); 
```

然后在你的`ActionFilter`类中你可以有一个默认的两个构造函数

```
public YourFilterAttribute()
 : this("Error")
{}

public YourFilterAttribute(string route)
{
//store route in some class variable
} 
```

这样大多数类会使用这样的属性：`[YourFilter]`而那些需要自定义路由的会使用它：`[YourFilter("CustomError")]`

这样，您的一般路线只会在它真正属于的类中硬编码一次。当然，对于自定义错误路由，您可以创建一些常量字符串来清理更多代码

# visual-sourcesafe - Visual SourceSafe 要求我签入某些文件，但会自动签入其他文件

> ID：15439130
> 
> 赞同：3
> 
> 时间：2013-03-15T17:56:55.630
> 
> 标签：visual-sourcesafe

我正在使用命令行将一个项目合并到另一个项目中。例如

`ss merge $/XXXXXXXX -GF -R`

我期待得到这样的输出，这些很好：

```
A.cpp has been merged with no conflicts.
Check in now?(Y/N)n

An automatic merge has occurred and there are conflicts.
Edit C:\XXXXXXXX\B.cpp to resolve them. 
```

但是关于：

```
C.cpp
Comment for C.cpp: 
```

系统提示我发表评论，然后 VSS 会自动为我签入文件。直到我签入了几个文件，我才意识到发生了什么……为什么它在这些文件上这样做，而不是像在其他文件上那样先问我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:28:28.930

从我进一步的测试来看，我*认为*当合并与源文件相同时，签入是自动完成的，即目标与源的早期副本相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:15:53.137

在合并时，将源文件与目标文件进行比较有三种情况：相同，不同但可以自动合并，以及有冲突的不同。c.cpp 可能是第一种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T19:57:33.187

视觉源安全合并的问题是合并是在服务器上完成的。也就是说，如果 Visual Source Safe 成功合并文件，它会自动签入服务器上的文件。另一方面，颠覆和其他源代码控制系统在本地工作区而不是远程服务器上合并文件。

[请参阅以下有关Visual Source Safe Merge](http://msdn.microsoft.com/en-us/library/ek8hk7e2%28v=vs.80%29.aspx)和[How to: Merge File Versions 的](http://msdn.microsoft.com/en-us/library/ms181073%28v=vs.80%29.aspx)Microsoft 文章。

在步骤 10。“检查数据库以确保已正确合并分支文件版本。”

从帮助文档中可以明显看出，我使用默认选项自动签入数据库。

# c# - 为什么字典键是不可变的？

> ID：15439134
> 
> 赞同：1
> 
> 时间：2013-03-15T17:57:03.927
> 
> 标签：c#, dictionary, key, immutability

有一个关于他们为什么要求使用不可变对象作为字典中的键的问题。

当我最近使用字典（显然不是为了哈希表的目的）将 Xml 节点对象作为键放置时，这个问题实际上出现在我的脑海中。然后我在使用过程中多次更新节点。

那么“使用不可变密钥”的真正含义是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T18:01:05.863

当您将键插入哈希表时，哈希表会询问键的哈希码，并将其与键本身和相关值一起记住。当您稍后执行查找时，哈希表会向您要*查找*的键询问其哈希码，并且可以非常快速地找到表中具有相同哈希码的所有键。

只要哈希表中的键在其生命周期中保持相同的哈希码，这一切都很好 - 但如果它们是*可变*的（并且在插入哈希表后发生突变），那么通常哈希码会改变，此时搜索时永远找不到该条目。

当然，这只适用于影响平等的突变。例如，如果您`Person`使用名称和生日对实体进行哈希处理，但由于某种原因，只有名称用于相等（因此在计算哈希码时仅使用名称），那么您可以将 a`Person`作为键，更改它的生日，以后仍然可以再次查找它，没有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T18:18:23.437

字典根据键的哈希码将项目放在桶中。如果您添加一个项目，然后更改其密钥，您将无法再找到该项目。

如果您使用新的键值查找它，字典将在不同的桶中查找，如果您使用旧键值，字典将找到它所在的桶，但键不再匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:03:09.323

字典类型是键和值之间的映射。映射将使用键的各种属性在内部字典存储中为其分配一个槽。在大多数情况下，它只是将属性简化为一个`int`值。

如果一个键随时间变化，那么它的属性可能会开始映射到表中的不同索引。因此，该键将不再能够检索它最初在表中映射到的值。不可变类型完全避免了这种情况，因为它们永远不会改变。因此它们的映射始终是一致的

# shell - 无法使用 netcat 发送文件

> ID：15439137
> 
> 赞同：1
> 
> 时间：2013-03-15T17:57:16.507
> 
> 标签：shell, networking, proxy, netcat

我正在使用 netcat 通过我的校园网络发送文件。我用过

c:\nc -w200 10.xxx 9638 < 文件.txt

在我的客户端机器上和

c:\nc -v -L -p 9638 >> nc.out

在我作为服务器接收文件的计算机上。[当我使用 localhost 对其进行测试时它工作得非常好，因此仅在我的系统上发送和接收文件。我使用的是 netcat 版本，没有从http://www.rodneybeede.com/Compile_Netcat_on_Windows_using_MinGW.html](http://www.rodneybeede.com/Compile_Netcat_on_Windows_using_MinGW.html)下载的 GAPING_SECURITY_HOLE 。

我们的系统使用代理服务器连接到网络。他们会干涉吗？ping 计算机也被禁用。我现在正在窗户上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:04:01.010

是的，代理和路由器可能会干扰。试试看能不能telnet到那个端口

```
telnet <ip> port 
```

这将告诉您是否可以在该端口上访问该机器

# c# - PrintTicket 范围（默认、用户、作业、文档、页面等）

> ID：15439141
> 
> 赞同：0
> 
> 时间：2013-03-15T17:57:36.460
> 
> 标签：c#, .net, printing, xps

我正在完成一个 Web 服务的构建，该服务构建并打印出 XPS 文档，并将它们发送到各种打印服务器上的各种打印队列。根据站点部署，Web 服务以 2 种模式运行。第一种是使用应用程序池身份帐户作为打印用户，第二种模式对“跟我来”类型的打印机使用用户模拟，以便用户注册打印作业。这一切都很好。

我必须针对打印队列上的特定托盘并为每个作业设置各种其他参数，因此我生成了 printickets，将托盘命名空间添加到 xml，这似乎也有效。

我担心的是这个（并且是我需要一些手的地方），因为我正在做所有这些 STA 线程服务器端，比如 Bob 在打印 200 个混合文档（A4、A5、信封）时运行，并且门票关闭说在打印机上进行双面打印，并且我的应用程序池身份帐户正在运行说 20 个打印线程，同时具有具有各种参数的各种目标托盘的多个文档，我会遇到任何问题还是会破坏默认的打印机队列设置？

根据 MS 的说法，MergeAndValidatePrintTicket 的范围可以分为不同的级别（我会满足于工作级别），但我只是想知道是否有任何有这种情况经验的人可以验证这是真的，是否有任何问题，因为整个 .Net 打印malarkey 似乎充满了它们。

'小费给任何这样做的人。如果您的目标打印机很简单，比如只有 3 个不同尺寸的托盘，只需在票据中设置介质尺寸（ISOA4 或其他）并将输入箱设置为未知，打印机就会解决。不幸的是，我所针对的打印机有大约 7 个垃圾箱，所以我必须针对确切的托盘。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:53:12.383

**编辑以显示解决方案**

乔恩……这是相关部分……

PrintTicket ptclone = pqTarget.UserPrintTicket* ***.Clone();* *** <--删除克隆（）

//我在下面指定用于作业和其他设置的托盘的方法。poj 是我的 printJob 类

PrintTicket pt = GetPrintTicketForJob(ptclone, poj.trayMediaSize, poj.trayNameSpace, poj.trayUri);

ValidationResult vr= pqTarget.MergeAndValidatePrintTicket(ptclone, pt, PrintTicketScope.JobScope);

**pqTarget.UserPrintTicket = vr.ValidatedPrintTicket;** <--去掉这个

//pqTarget.Commit() // localPrintServer 模式下的打印服务器不喜欢用户模拟下的打印服务器

**PrintSystemJobInfo pj = pqTarget.AddJob(poj.id, poj.fileName, false)** <--不要这样做

我尝试使用其中包含打印票证的 .Net 4.5 重载，但 localPrintServer 模式下的服务器不理解该方法，即使服务器上有 .Net 4.5 并且是...

**PrintSystemJobInfo pj = pqTarget.AddJob(poj.id.ToString(), poj.fileName, false, vr.ValidatedPrintTicket)** <--改为.Net 4.5，一切正常

一切正常，但有以下例外......

1) 在由 3rd 方软件控制并使用用户模拟的 mfds 上，默认双面设置对于打印的第一个文档保持活动状态，之后就可以了。它适用于 Lexmarks（使用的应用程序池标识）。与其他设置一样，两种类型的托盘都已正确分配。

2) 日期和数字（作为字符串插入到文档中）并在 XPS 查看器中显示正常，即使它们所在的段落是令人费解的 Times New Roman，也会被重新格式化为 san serif。

你能发现任何错误吗？

问候

尼尔

# ios - 如何以编程方式重新排序 TabBar 的选项卡？

> ID：15439143
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:57:52.297
> 
> 标签：ios, xcode, tabbar

有没有办法在 xCode 上以编程方式重新排序 TabBar 的选项卡？

非常感谢，马特奥！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:59:30.760

尝试这个：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

   tabBarController = [[UITabBarController alloc] init];

   MyViewController* vc1 = [[MyViewController alloc] init];
   MyOtherViewController* vc2 = [[MyOtherViewController alloc] init];

   NSArray* controllers = [NSArray arrayWithObjects:vc1, vc2, nil];
   tabBarController.viewControllers = controllers;

  // Add the tab bar controller's current view as a subview of the window
  [window addSubview:tabBarController.view];
 } 
```

# java - 创建一个作为 java.util.HashMap 类的扩展的类

> ID：15439144
> 
> 赞同：2
> 
> 时间：2013-03-15T17:58:01.010
> 
> 标签：java, superclass

所以我试图创建一个名为 UniqueHashMap 的 HashMap 类的扩展，它具有 HashMap 类的所有属性，但是不能重复键，不能重复值。如果重复值，则替换键，例如：

`Apple`->`Green`

我试着`put("Pear", "Green")`

我们不会有：`Pear`->`Green`

```
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

public class UniqueHashMap extends HashMap {

    public UniqueHashMap() {
    }

    public UniqueHashMap(int arg0) {
        super(arg0);
    } 

    public UniqueHashMap(Map arg0) {
        super(arg0);
    }

    public UniqueHashMap(int arg0, float arg1) {
        super(arg0, arg1);
    }

    public V put(K k, V v){
        Set entrySet = (Set) hash.entrySet(); //Store entry of HashMap in a set

        Iterator entryIterator = entrySet.iterator(); //Create iterator for the set

        if(hash.containsValue(v))
        {           
            while(entryIterator.hasNext())
            {
                Map.Entry mapEntry = (Map.Entry) entryIterator.next();

                String key = (String) mapEntry.getKey();
                String value = (String) mapEntry.getValue();

                System.out.println("Key is = " + key + " and Value is = " + value);
                System.out.println();

                if (value.equals(v))
                {
                    hash.remove(key);
                    hash.put(v, value);
                    break;
                }
            }

            System.out.println(hash);
        }
    } 
```

如您所见，我拥有超类的所有构造函数，但是它不会解析它应该从`HashMap`类中继承的值（K、V、Hash、Map）

我做错扩展了吗？还是我错过了一些进口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:00:12.683

如果这不是一项学术任务，而您只需要一个具有唯一键和值的集合 - 使用 BiMap。

您可以在 Google Guava ( [BiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html) ) 和 Apache Commons ( [BidiMap](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections/BidiMap.html) ) 中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:01:04.410

由于您正在反向执行您的唯一关系，因此您`UniqueHashMap`应该类似地委托给它的父类。

```
 public V put(K k, V v) {
     // reverse the order you put, and what you're keying off of.
     super.put(v, k);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:01:07.723

如果你想使用 的通用形式`HashMap`，你应该这样继承：

```
public class UniqueHashMap<K, V> extends HashMap<K, V> {
    ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:01:23.897

在另一个方向创建一个 HashMap，其中它的键是第一个映射值。我认为这就是 Apache Commons 的 BiMap 所做的。

# javascript - JavaScript 可以向任何域发出 POST HTTP 请求吗？

> ID：15439148
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:58:15.060
> 
> 标签：javascript, security, http, post

我知道可以从 JavaScript 加载来自任何域的任何类型的文档（不一定能够查看其内容），但它通常涉及常规`GET`请求。关于什么`POST`？

是否可以制作HTTP`POST`是否可以从 JavaScript 向任何域名（我对表单提交特别感兴趣。）

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:58:15.060

根据附近问题的一些答案，« [JavaScript 中的 HTTP GET 请求？](https://stackoverflow.com/questions/247483/http-get-request-in-javascript)»，您可以使用`XMLHttpRequest`，因为根据文档，`POST`方法也受支持。

[http://www.w3.org/TR/XMLHttpRequest/](http://www.w3.org/TR/XMLHttpRequest/)
[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

来自上述 w3.org 文档的示例代码：

```
function log(message) {
  var client = new XMLHttpRequest();
  client.open("POST", "/log");
  client.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
  client.send(message);
} 
```

但是，似乎为了让它处理对与`POST`您的域无关的域的请求（而不是指定`"/log"`完整`http`或`https`URL），可能必须在目标服务器上支持和启用*跨域资源共享*，根据[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Simple_requests](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Simple_requests)。

因此，看起来，至少通过`XMLHttpRequest`，您不能通过`POST`请求提交表单（事实上，看起来即使`GET`请求也不会飞）。

# c# - SelectItem 没有选择项目

> ID：15439151
> 
> 赞同：0
> 
> 时间：2013-03-15T17:58:16.997
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

查看 (RelacionamentoConvidado.cshtml)

```
@Html.DropDownList("Foi_Emitido", (IEnumerable<SelectListItem>)ViewBag.Foi_Emitido, @SRSVP.Util.Constante.HTML_HELPER_DROPDOWN_EMPTY_VALUE, new { @class = "input-small" }) 
```

控制器（EventoConvidadoController）

```
ViewBag.Foi_Emitido = new SelectList(Common.SimNao(model.foi_emitido), "Value", "Text"); 
```

Common.cs（静态类）

```
public static List<SelectListItem> SimNao(object selectedItem)
{
    List<SelectListItem> _returnList = new List<SelectListItem>();
    SelectListItem _mList = new SelectListItem();

    _mList = new SelectListItem() { Text = "Sim", Value = "true", Selected = selectedItem == null ? false : selectedItem.ToString().Equals("true") };
    _returnList.Add(_mList);

    _mList = new SelectListItem() { Text = "Não", Value = "false", Selected = selectedItem == null ? false : selectedItem.ToString().Equals("false") };
    _returnList.Add(_mList);

    return _returnList;
} 
```

加载页面时，选择项目不是从我的数据库返回的选择项目。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:01:01.607

这通常发生在 Select List 和绑定变量共享相同名称 - **Foi_Emitido 时**。尝试重命名 ViewBag SelectList

```
@Html.DropDownList("Foi_Emitido", (IEnumerable<SelectListItem>)ViewBag.Foi_Emitido_SelectList, @SRSVP.Util.Constante.HTML_HELPER_DROPDOWN_EMPTY_VALUE, new { @class = "input-small" }) 
```

控制器（EventoConvidadoController）

```
ViewBag.Foi_Emitido_SelectList= new SelectList(Common.SimNao(model.foi_emitido), "Value", "Text"); 
```

# wpf - WPF 虚线 - 在调整大小期间修复破折号

> ID：15439153
> 
> 赞同：2
> 
> 时间：2013-03-15T17:58:17.923
> 
> 标签：wpf, line, rectangles

如何在窗口调整大小期间避免划线调整大小？考虑下图： http: [//leprastuff.ru/data/img/20130315/b83eea4a7a3f07ca53a0e118ddbb9230.Gif](http://leprastuff.ru/data/img/20130315/b83eea4a7a3f07ca53a0e118ddbb9230.Gif)

```
<Rectangle SnapsToDevicePixels="True"
           Stroke="DarkGray"
           StrokeDashArray="10 10"
           StrokeThickness="1" /> 
```

谢谢，托尼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:36:50.667

将`Height`Rectangle 的 设置为大于一的值。

目前，您正在绘制上下边框。随着虚线笔划顺时针绘制矩形的边框，从左上角开始，您会得到观察到的行为。

如果您打算绘制一个高度为 1 的 Rectangle，则最好绘制一条[Line](http://msdn.microsoft.com/en-us/library/system.windows.shapes.line.aspx)。

# c# - 如何在javascript中查找下拉列表值

> ID：15439154
> 
> 赞同：-1
> 
> 时间：2013-03-15T17:58:27.373
> 
> 标签：c#, asp.net

我有一个`master page`，下面是一个`content page'`代码..我无法`dropdownlist dpbatchname`在 javascript 中找到 's 值..我是`javascript`plz 的新手，帮助我想根据该值验证文本框`dropdownlist`值..

```
 <asp:Content ID="Content1" ContentPlaceHolderID="Contentplaceholder2" Runat="Server">
   <script  type="text/javascript" language="javascript">
       function ClientValidate(source, arguments) {
           var ddl = document.getElementById("dpbatchname");
           if (ddl.value.length == 2) {
                   arguments.IsValid = true;
               }
               else {
                   arguments.IsValid = false;
               }
           }

   </script>

       <div>
               <table style="width: 100%; background-color:Silver"  border="1">

                <td align="right" width="50%" valign="top">
                           <asp:Label ID="Label3" runat="server" Text="Select Batch:" 
                               Font-Underline="False" ForeColor="#FF3300"  Font-Bold="True" Font-Size="Larger"></asp:Label>
                       </td>
                       <td width="50%" valign="top">
                           <asp:DropDownList ID="dpbatchname" runat="server" AutoPostBack="True" 
                               DataSourceID="SqlDataSource5" DataTextField="batch_name" 
                               DataValueField="batch_name" Width="119px" Height="33px">
                           </asp:DropDownList>
  <asp:TextBox ID="tbnooflecture" runat="server"  Width="113px" Height="33px"></asp:TextBox>
       <asp:CustomValidator id="CustomValidator1" ControlToValidate="tbnooflecture"    ClientValidationFunction="ClientValidate"
     ValidationGroup="upper" Display="Static" ErrorMessage="Not an even number!" ForeColor="green" Font-Name="verdana"    Font-Size="10pt"
      runat="server"/>

                     </td>
       </tr>
       </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:05:31.427

利用

```
<%=dpbatchname.ClientID %> 
```

获取渲染的 ID：

```
document.getElementById("<%=dpbatchname.ClientID %>"); 
```

# sencha-touch - 选择操作表的 itemid 以隐藏/销毁它

> ID：15439156
> 
> 赞同：1
> 
> 时间：2013-03-15T17:58:42.620
> 
> 标签：sencha-touch, sencha-touch-2

我正在尝试使用选项的 itemId 选择一个 ActionSheet。我尝试了很多选择器，但文档不是最好的，我不知道如何选择 ActionSheet 的 itemId。

谢谢

```
Ext.define('crystal.controller.view', {
    extend: 'Ext.app.Controller',
    config: {
        refs: {
            test: {
                selector: 'test #viewapphb',
            },
            actionsheet: {
                selectors: 'options',
                xtype: 'test',
                autoCreate: true,
            }
        },
        control: {

            test: {
                tap: 'viewapphb',
            },
        },
    },

    viewapphb: function () {
        var action = Ext.ComponentQuery.query('test #options');
        Ext.Viewport.setActiveItem(Ext.create('crystal.view.apphb'));
        action.hide();
    },
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:59:57.190

试试这个

```
actionsheet: {
                selectors: 'options',
                id: 'actnopt',
                xtype: 'test',
                autoCreate: true,
            } 
```

> Ext.getCmp('actnopt');

[有关操作表](http://docs.sencha.com/touch/2-0/#!/api/Ext.ActionSheet)的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T16:05:47.303

我使用了以下代码，它适用于我：

```
Ext.getCmp('btApagarCategoria').actions.hide(); 
```

其中**btApagarCategoria**是调用操作表的按钮

# machine-learning - 使用 Weka 预测测试数据集中的文本数据标签？

> ID：15439157
> 
> 赞同：1
> 
> 时间：2013-03-15T17:58:46.513
> 
> 标签：machine-learning, weka

我正在使用 Weka gui 在数据集上训练 SVM 分类器（使用 libSVM）。.arff 文件中的数据是

```
@relation Expandtext

@attribute message string 
@attribute Class {positive, negative, objective}

@data 
```

我用字符串到词向量把它变成一个词袋，运行 SVM 并获得不错的分类率。现在我有我的测试数据，我想预测他们不知道的标签。同样，它的标题信息是相同的，但是对于每个类，它都标有问号（？），即

```
'Musical awareness: Great Big Beautiful Tomorrow has an ending\u002c Now is the time does not', ? 
```

我再次对其进行了预处理，字符串到单词向量，类与训练数据的位置相同。

我进入“分类”菜单，加载我训练过的 SVM 模型，选择“提供的测试数据”，加载测试数据并右键单击模型说“在当前测试集上重新评估模型”，但它给了我测试和训练不兼容的错误。我不确定为什么。

我是否以错误的方式标记测试数据？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:39:49.943

对于几乎任何机器学习算法，训练数据和测试数据都需要具有相同的格式。这意味着，两者必须具有相同的特征，即 weka 中的属性，具有相同的格式，包括类。

问题可能是您分别对训练集和测试集进行了预处理，并且`StrintToWordVectorFilter`将为每个集创建不同的特征。因此，在训练集上训练的模型与测试集不兼容。

您更愿意做的是在训练集上初始化过滤器，然后将其应用于训练集和测试集。

[Weka: ReplaceMissingValues for a test file](https://stackoverflow.com/questions/14798421/weka-replacemissingvalues-for-a-test-file)的问题处理了这个问题，但我将在这里重复相关部分：

```
Instances train = ...   // from somewhere
Instances test = ...    // from somewhere
Filter filter = new StringToWordVector(); // could be any filter
filter.setInputFormat(train);  // initializing the filter once with training set
Instances newTrain = Filter.useFilter(train, filter);  // configures the Filter based on train instances and returns filtered instances
Instances newTest = Filter.useFilter(test, filter);    // create new test set 
```

现在，您可以训练 SVM 并将生成的模型应用于测试数据。

如果训练和测试必须在单独的运行或程序中进行，则应该可以将初始化的过滤器与模型一起[序列化。](http://weka.wikispaces.com/Serialization)当您加载（反序列化）模型时，您还可以加载过滤器并将其应用于测试数据。他们现在应该是兼容的。

# jquery-ui-dialog - 找到一种方法来恢复 JQuery UI 对话框对话框的功能

> ID：15439160
> 
> 赞同：0
> 
> 时间：2013-03-15T17:58:53.497
> 
> 标签：jquery-ui-dialog

我正在尝试找到一种方法来恢复 jQuery UI 对话框的 dialog() 调用。

我首先在我的应用程序中做的是在 div 上调用对话框，如下所示：

```
$('#dialog').dialog({
...options
}); 
```

然后，一旦用户按下关闭按钮，我希望 div 标记及其内容再次出现在调用 dialog() 之前的相同位置，但不在 jQuery 对话框中。

我试过这个：

```
$('#dialog').dialog('close'); 
$('#dialog').show(); 
```

但它不起作用。调用 dialog('destroy') 时，#dialog 的内容似乎已清空。

有任何想法吗？

谢谢，吉米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:01:02.700

也许您可以做的是将#dialog 复制到一个新的div，然后将dialog() 复制到那个div，而保持原始状态不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:59:04.257

事实上，它比直接的 html() 或 append() 要困难一些，因为在我的 div 中我有一个 jQuery 数据表组件 + 一堆其他自定义事件。所以我首先必须用所有事件深度克隆它的孩子，然后在正确的地方调用fadeIn()fadeOut()。所以我来了：

HTML（#dialog 子项被克隆到 #dialog2 div 中）：

```
 <div id="main">
                <div id='dialog'>
                    <input id='input1' type="text"></input>
                    <input id='input2' type="text"></input>
                    <table cellpadding="0" cellspacing="0" border="0" class="display" id="example" width="100%">
<thead>
    <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
    </tr>
</thead>
<tbody>
    <tr class="odd gradeX">
        <td>Trident</td>
        <td>Internet
             Explorer 4.0</td>
        <td>Win 95+</td>
        <td class="center"> 4</td>
        <td class="center">X</td>
    </tr>
    <tr class="even gradeC">
        <td>Trident</td>
        <td>Internet
             Explorer 5.0</td>
        <td>Win 95+</td>
        <td class="center">5</td>
        <td class="center">C</td>
    </tr>
</tbody>
<tfoot>
    <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
    </tr>
</tfoot>
    </table>

                </div>
                <div id='dialog2' style='display:block;'>
                </div>

                <button id="open">Detach Me</button> 
```

JavaScript：

```
 <script type="text/javascript">
    $(document).ready(function(){

$("#dialog").children().clone(true, true).appendTo($("#dialog2"));
    $('#dialog2').hide();
    $('#open').click(function(){
         $('#dialog2').fadeOut();
         $("#dialog").dialog({
          width: 1000,
          height:800,
          close : function(){
             $('#dialog2').fadeIn();
             return true;
          }
         });
    });

 this.datatable = $('table').dataTable({
   "fnRowCallback": function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $(nRow).on('click', function(){
            $(this).addClass('selected', true);
        });
        }
  });
});

</script> 
```

# java - 修剪 OpenCSV 中的前导和尾随空格

> ID：15439162
> 
> 赞同：13
> 
> 时间：2013-03-15T17:58:58.737
> 
> 标签：java, trim, opencsv

我正在使用 OpenCSV`CSVReader`从文件中读取一些逗号分隔的值。我不确定如何修剪前导和尾随空格。当然，我可以这样做，`String.trim()`但不这样做会更干净。在[文档](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVReader.html)中没有指定这样的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-20T16:00:06.637

可以切换[`SuperCSV`](http://supercsv.sourceforge.net/)吗？它可以选择忽略其[`CsvPreference.Builder`](http://supercsv.sourceforge.net/apidocs/org/supercsv/prefs/CsvPreference.Builder.html#surroundingSpacesNeedQuotes%28boolean%29). 这是一个非常优秀的图书馆，IMO。如果该偏好不能满足您的需求，您始终可以扩展 Tokenizer 类并覆盖[`readColumns`](http://supercsv.sourceforge.net/apidocs/org/supercsv/io/Tokenizer.html#readColumns%28java.util.List%29)。否则，它看起来`OpenCSV`不是很精细，需要您扩展`CSVReader`和覆盖[`readNext`](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVReader.html#readNext%28%29). 这可能有效：

```
class MyReader extends au.com.bytecode.opencsv.CSVReader {
    @Override public String[] readNext() throws IOException {
        String[] result = super.readNext();
        for (int i=0; i<result.length; i++) result[i] = result[i].trim();
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-15T23:59:38.680

如果您正在使用 bean 映射和 OpenCSV，我个人更喜欢扩展 MappingStrategy，因为它处理对其相关字段的最终值分配。想象一下您的字段是制表符分隔的。那么你可能很难扩展 CSVReader。此外，需要更少的编码。

在以下示例中，我使用的是 ColumnPositionMappingStrategy，但您的可以是任何其他 MappingStrategy，因为 populateNewBean 在父抽象类中。

```
private <T> MappingStrategy<T> createMappingStrategy() {
    return new ColumnPositionMappingStrategy<T>() {
        @Override
        public T populateNewBean(String[] line) throws CsvDataTypeMismatchException, CsvConstraintViolationException,
                CsvRequiredFieldEmptyException, CsvValidationException {
            Arrays.setAll(line, (i) -> line[i].trim());
            return super.populateNewBean(line);
        }
    };
} 
```

如您所见，在填充 bean 之前修剪每个字段/行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-09T10:48:28.053

使用 ngreen 的想法，我想出了以下工作解决方案：

```
public class CSVReaderExtended extends CSVReader {

    private static final String EXP_ALPHA_AND_DIGITS = "[^a-zA-Z0-9]+";

    public CSVReaderExtended(Reader reader) {
        super(reader);
    }

    @Override
    public String[] readNext() throws IOException {
        String[] result = super.readNext();
        if (result == null)
            return null;

        for (int index = 0; index < result.length; index++) {
            result[index] = result[index].replaceAll(EXP_ALPHA_AND_DIGITS, "");
        }
        return result;
    }
} 
```

# string - 转换为仅在运行时通过其字符串名称知道的类型。C＃

> ID：15439163
> 
> 赞同：0
> 
> 时间：2013-03-15T17:59:00.203
> 
> 标签：string, types, casting

我这里有问题。（C＃）

另一个程序集中有一个集合（我无法更改它），它接受一个字符串作为参数并返回一个对象。

喜欢：

```
object Value = ThatCollection.GetValue("ParameterName"); 
```

问题是，对于每个参数字符串，它返回一个不同的类型作为对象。我想要的是将这些对象转换为它们各自的类型，仅在运行时通过它们的字符串名称知道类型。

我需要对这些返回值进行一些操作。为此，我需要正确地投射它们以访问它们的成员等。

限制：

*   我不能使用“动态”，因为我的代码需要在较旧的框架中完成：3.5（因为互操作问题）。
*   我需要对许多不同类型的返回值进行操作（当然，除了“对象”之外，没有通用接口或基类）
*   我所拥有的只是一个将参数名称与其返回类型相关联的表（包含字符串值）。
*   是的，我可以将该表转换为 biiig “switch” 语句，不是很好，不希望那样。

有什么提示吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:24:57.393

您想研究反射，类似以下的东西应该可以将对象转换为类型 T。设置一个简单的转换方法：

```
 public static T CastToType<T>(object o)
    {
        return (T)o;
    } 
```

使用反射调用它：

```
 Type t = Type.GetType(stringName)
    MethodInfo castTypeMethod = this.GetType().GetMethod("CastToType").MakeGenericMethod(t);
    object castedObject = castTypeMethod .Invoke(null, new object[] { obj }); 
```

# android - 三星 Galaxy 上缺少 wifi 信息文件 (/sys/devices/virtual/net/wlan0/*)

> ID：15439165
> 
> 赞同：0
> 
> 时间：2013-03-15T17:59:04.877
> 
> 标签：android, kernel

在三星设备上，缺少网络统计信息 /sys/devices/virtual/net/wlan0/ 的目录……还有其他（例如环回）接口的目录。

wlan0 是接口的正确名称，它位于 /sys/class/net 或 java 应用程序的程序列表中。

有谁知道为什么或在哪里可以找到这些数据（例如传输字节的 nr 和类似的？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:58:42.700

以下摘自开源代码 PowerTutor

```
String interfaceName = SystemInfo.getInstance().getProperty("wifi.interface");
if(interfaceName == null) interfaceName = "eth0";

transPacketsFile = "/sys/devices/virtual/net/" +
                   interfaceName + "/statistics/tx_packets"; 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T05:03:40.893

在摩托罗拉 X 和 Nexus 7 中，该文件位于：

```
/sys/class/net/wlan0/* 
```

[Nexus 7 上的网络统计信息](https://stackoverflow.com/questions/12854866/network-statistics-on-nexus-7)

# ios - MDM 配置文件无法安装

> ID：15439166
> 
> 赞同：0
> 
> 时间：2013-03-15T17:59:05.740
> 
> 标签：ios, mdm

我正在尝试制作 IOS MDM 服务器的原型，以向我的客户展示一些工作中的功能。我刚开始，经过大量搜索和阅读有关 MDM 的内容后，我正在尝试创建配置文件，我碰壁了（可能导致一天结束时很累）。

当我使用 safari 从 ipad 上的服务器下载它时，出现错误：

```
Safari could not install a profile due to an unknown error. 
```

当我尝试在我的 macbook 上安装它时，出现错误：

```
The payload 'com.mytests.mdm.mdm' is missing the required key 'IdentityCertificateUUID'.` 
```

这是我当前使用 iPCU 生成的配置文件的一部分（我删除了标有 [] 的某些值，例如 url）

```
<plist version="1.0">
<dict>
<key>PayloadContent</key>
<array>
    <dict>
        <key>AccessRights</key>
        <integer>8179</integer>
        <key>CheckInURL</key>
        <string> [my url] </string>
        <key>CheckOutWhenRemoved</key>
        <true/>
        <key>PayloadDescription</key>
        <string>Configures Mobile Device Management</string>
        <key>PayloadDisplayName</key>
        <string>Mobile Device Management</string>
        <key>PayloadIdentifier</key>
        <string>com.mytests.mdm</string>
        <key>PayloadOrganization</key>
        <string> [my organisation] </string>
        <key>PayloadType</key>
        <string>com.apple.mdm</string>
        <key>PayloadUUID</key>
        <string> [my payload] </string>
        <key>PayloadVersion</key>
        <integer>1</integer>
        <key>ServerURL</key>
        <string> [my url] </string>
        <key>SignMessage</key>
        <false/>
        <key>Topic</key>
        <string>com.novabase.mdm.pushcert</string>
        <key>UseDevelopmentAPNS</key>
        <true/>
    </dict>
</array>
<key>PayloadDescription</key>
<string>Profile description.</string>
<key>PayloadDisplayName</key>
<string>MDM test</string>
<key>PayloadIdentifier</key>
<string>com.mytests.mdm</string>
<key>PayloadOrganization</key>
<string> [my organisation] </string>
<key>PayloadRemovalDisallowed</key>
<false/>
<key>PayloadType</key>
<string>Configuration</string>
<key>PayloadUUID</key>
<string>8357C602-E971-4EA4-AD5F-ACBABB8D0FBD</string>
<key>PayloadVersion</key>
<integer>1</integer>
</dict>
</plist> 
```

任何想法如何使用 iPCU 创建缺少的键/值或此处缺少的内容。同样，目前服务器还没有完全工作，它只是发送配置文件并等待对签入 url 的调用（但我没有收到任何消息，所以我认为问题不在服务器实现中）。

谢谢你的帮助，这让我发疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:27:09.977

对于 MDM 配置文件，您需要至少有两个有效负载：

*   MDM 有效负载（你有它）
*   身份有效负载（您缺少它）。

身份有效负载可能是以下两种情况之一：

*   PKCS#12 身份（意味着证书和私钥打包为 PKCS#12）
*   SCEP（意思是有关您的 SCEP 服务器的信息以及用于向其请求证书的其他数据）。

您可以进入 iPCU 并添加“Credentails”并从您的磁盘中选择 PKCS#12 文件，或者您可以添加“SCEP”。

在 MDM 有效负载（iPCU 下的移动设备管理）中，您需要从名为“身份”的下拉列表中选择创建的有效负载。一般来说，您所说的错误是 iOS 抱怨您的 MDM 有效负载不指向任何身份有效负载。

如果您有任何其他问题，请告诉我。

# jquery - jQuery Validation 插件在按钮单击时验证表单

> ID：15439171
> 
> 赞同：9
> 
> 时间：2013-03-15T17:59:24.427
> 
> 标签：jquery, forms, jquery-validate

所以我有一个七部分的表单，其中六个选项卡通过 CSS 隐藏，当用户单击下一个时，另一个部分淡入。

我已提交页面以确保插件正常工作；它是。本质上它只是进入表单的下一部分而不验证当前部分

举个例子

HTML

```
<form id = "form1" action = "backend.php" method = "post">
<label for "phone">First Name </label>
    <input type = "text" name = "fName" placeholder = "First Name..." class = "required" id = "fName" />
<button id = "btn" type = "button" class = "buttonnav next">next</button>
</form> 
```

Javascript

```
$('#btn').click( function() { $("#form1").validate();}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T18:11:24.713

如果您在代码中使用[jQuery Validate](http://docs.jquery.com/Plugins/Validation)插件，则在单击按钮之前，该插件不会被初始化。如果插件未初始化，则没有验证。

```
$('#btn').click( function() { $("#form1").validate();}); 
```

相反，[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate)在 DOM 上调用一次，准备在表单上*初始化*插件。

如果要在初始化后随时*测试*表单，可以[`.valid()`使用](http://docs.jquery.com/Plugins/Validation/valid).

```
$(document).ready(function () {

    $('#form1').validate({ // initialize plugin
        // your options
    });

    $('#btn').click( function() { 
        $("#form1").valid();  // test the form for validity
    });

}); 
```

* * *

我不知道您如何设置每个部分以相互交互或使用其他代码。仅基于您的 OP，这是一个使用我上面的答案的工作示例。

**演示：http: [//jsfiddle.net/pqVJM/](http://jsfiddle.net/pqVJM/)**

```
$(document).ready(function () {

    $('#form1').validate();

    $('#btn').click(function () {
        if ($("#form1").valid()) {
            alert('hello - valid form');
        }
    });

}); 
```

# c# - Linq to 实体查询具有多级子引用

> ID：15439172
> 
> 赞同：0
> 
> 时间：2013-03-15T17:59:27.530
> 
> 标签：c#, .net, linq, linq-to-entities, entity-framework-5

我在设计一个查询来检索候选人已经尝试过的问题以及另一个查询候选人没有尝试过的问题时遇到了太多麻烦。这是一个考试/测试/表格/调查类型的应用程序。

![架构](../Images/acb64ee151c0fa0324dae5006155a083.png)

该场景是一个候选（OAS_UserDetail）与许多组（OAS_Group）相关联。一组可以有许多测试。一个测试可以有很多问题。一个问题可以有很多选项。

当一个候选人尝试一个问题时，它被存储在表 TestResponse 中，并引用了会话，（表 TestResponse 中的 answerSelected 实际上是 QuestionOption.Id）。我相信 TestSession 可以作为 TestResponse 获取用户、测试和组详细信息的桥梁。

*在我看来，就通过 Linq 进行查询而言，这对我来说是一个不错但有些复杂的设计。以下是我尝试做的事情并被卡住并最终以方法语法而不是查询语法编写 Linq。*

```
OAS.DataModels.OAS_Question questionsAttempted = 
            from q in db.OAS_Questions
            where q.OAS_Test.OAS_Group.Candidates.Contains(
                      db.OAS_UserDetails.Single(u => u.UserName == HttpContext.User.Identity.Name)
            )                         
            select q; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:57:18.930

因此，您正在寻找候选人的问题，其中选项在候选人的记录中或不在候选人的`TestResponse`记录中。我认为这可以工作：

```
(from u in OAS_UserDetail
from g in u.OAS_Group
from t in g.OAS_Test
from q in t.OAS_Question
from o in q.OAS_QuestionOption
where u.Id == userId // a variable
where u.OAS_TestSession
      .SelectMany(s => s.OAS_TestResponse)
      .Select(r => r.AnswerSelectedId).Contains(o.Id)
select q).Distinct() 
```

对于候选人没有尝试的问题：`where !u.OAS_TestSession...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:20:03.950

Linq 查询语法与 SQL 非常相似。您应该能够使用“加入”运算符来做您需要的事情。

这是一个很好的概述：

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

# php - 如何从数据库中选择包含特定单词的帖子？

> ID：15439175
> 
> 赞同：1
> 
> 时间：2013-03-15T17:59:30.763
> 
> 标签：php, sql

我正在我的网站上进行搜索，我想从数据库中选择包含用户搜索的单词（或单词）的帖子。我正在使用下面的代码并且它有效，但是由于我使用的是 LIMIT 10，因此可能会发生在 10 个选定的帖子中，例如，只有 2 个帖子包含搜索词，所以即使有 2 个帖子也会显示数据库中包含搜索词的更多帖子。

```
$posts = mysql_query("SELECT * FROM posts ORDER BY id DESC LIMIT 10");
while($posts_row = mysql_fetch_assoc($posts )) {
...
$post_body = $posts_row ['post_body'];
if (strstr($post_body, $search)) {
 echo $post_body;
}
...
} 
```

有没有办法只从包含搜索词的数据库中选择帖子？就像是

```
$posts = mysql_query("SELECT * FROM posts WHERE strstr($post_body, $search) ORDER BY id DESC LIMIT 10"); 
```

编辑：感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:02:08.607

试试这个（在 MySQL 中测试过，其他人不确定）：

```
"SELECT * FROM posts WHERE post_body LIKE ( '%".$search."%' ) ORDER BY id DESC LIMIT 10" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:07:39.657

第一：不要使用 mysql_ - 它已被弃用，出于安全原因正在逐步淘汰。请改用 mysqli_。

第二：使用“喜欢”这样做：

```
SELECT * FROM tableName WHERE columnName LIKE '%keyword%'; 
```

`'keyword searches are fun'`将在也`'Find this keyword'`和的数据值中找到匹配项`'all keywords are words.'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:03:19.870

您可以利用`LIKE`来进行此搜索。

```
SELECT * FROM posts WHERE post_body LIKE ('%?%') ORDER BY id DESC LIMIT 10; 
```

这`post_body`将是存储帖子内容的任何文件，`?`并将被您的搜索字符串替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:04:24.193

您可以将其用作查询：

```
SELECT * FROM posts WHERE $post_body like '%$search%' ORDER BY id DESC LIMIT 10 
```

不过，这可能非常有限且缓慢。根据您的应用程序有多大以及您拥有多少数据，您可能希望提供“全文搜索”。 [全文检索](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)

# debugging - OpenMP 中的分析/调试 - Linux 和免费？

> ID：15439176
> 
> 赞同：2
> 
> 时间：2013-03-15T17:59:31.653
> 
> 标签：debugging, profiling, openmp

我正在尝试寻找一些不错的*免费*OpenMP 调试器和分析器。你们在 Linux RHEL 6 上使用什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:34:44.403

在某种程度上，人们可以使用`gdb`和`valgrind`调试此类应用程序，但这些工具对 OpenMP 的支持非常基本。幸运的是，两大供应商都认识到，免费为 Linux 提供他们的高级开发工具是个好主意。

*   [Oracle Solaris Studio](http://www.oracle.com/us/products/servers-storage/solaris/studio/features/index.html) for Linux 是免费的，并配有优化编译器、调试器、集成了这两者的基于 Netbeans 的 IDE，以及性能分析器和线程分析器等性能工具套件。

*   [可免费获取英特尔](http://software.intel.com/en-us/linux-tool-suites/)Linux 软件开发工具并将其用于[非商业软件开发](http://software.intel.com/en-us/non-commercial-software-development)。英特尔 Parallel Studio XE 包括 VTune Amplifier 和 Inspector 应用程序，它们在调试线程代码时都非常有用。

# javascript - KineticJS，动画层内的特定对象/节点

> ID：15439181
> 
> 赞同：0
> 
> 时间：2013-03-15T18:00:03.113
> 
> 标签：javascript, kineticjs

我很难弄清楚我想做的事情是否可行，如果可以，该怎么做。

我有一堆形状分为 3 组。在这 3 个组中，其中 1 个包含通过动画更新其位置的对象。我还试图允许所有组/对象可拖动（它们相对于彼此的位置需要保持不变，所以现在我只是将它们所在的图层设置为可拖动）。

问题是动画必须重绘包含所有对象的整个图层。似乎没有必要重绘一堆不动的形状，所以我只想为一组中的对象设置动画。但我不知道怎么做。

我正在使用的结构的一般示例：

```
 Stage
              |
            Layer
              |
   +----------+----------+
   |          |          |
Group 1    Group 2    Group 3 
```

第 1 组需要进行动画处理。所有三个组都需要是可拖动的。我尝试将 Group 1 放在一个图层中，然后将该图层添加到父图层，但这似乎不起作用。

非常粗略的例子：http: [//jsfiddle.net/UTcaL/](http://jsfiddle.net/UTcaL/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:29:57.903

你需要这样做：

```
 Stage
          | 
   +------+------+
   |      |      |
 Layer  Layer   Layer
   |
 shapes 
```

KineticJS 的一大优点是能够根据需要创建尽可能多的层，并根据重绘的频率将事物组合在不同的层中

# ruby-on-rails - 如何定义用户角色

> ID：15439182
> 
> 赞同：0
> 
> 时间：2013-03-15T18:00:03.847
> 
> 标签：ruby-on-rails

我需要帮助来定义用户角色。我已经创建了自己的身份验证，并且正在处理自定义授权。但是我需要定义用户角色。我已经创建了我的角色，但我不相信他们对他们应该做什么有任何真正的价值。

用户.rb：

```
class User < ActiveRecord::Base
  has_secure_password
  attr_accessible :password_confirmation, :about_me, :feet, :inches, :password, :birthday, :career, :children, :education, :email, :ethnicity, :gender, :height, :name, :password_digest, :politics, :religion, :sexuality, :user_drink, :user_smoke, :username, :zip_code
  validates_uniqueness_of :email
  validates_presence_of :password, :on => :create
  before_create { generate_token(:auth_token) }
  ROLES = %w[admin user guest banned]

  def send_password_reset
    generate_token(:password_reset_token)
    self.password_reset_sent_at = Time.zone.now
    save!
    UserMailer.password_reset(self).deliver
  end

  def generate_token(column)
    begin
      self[column] = SecureRandom.urlsafe_base64
    end while User.exists?(column => self[column])
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:16:46.713

您可以在您的数据库中为您的每个角色放置一个布尔字段，以便您可以直接调用

如果用户.admin？
// 你的授权逻辑在这里
结束

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:38:00.483

我会看看[`rolify`](https://github.com/EppO/rolify)和[`cancan`](https://github.com/ryanb/cancan)。

`rolify`允许您轻松地为您的用户定义角色：

```
user = User.find(1)
user.add_role :admin 
```

在特定类上定义角色：

```
user.add_role :moderator, Forum 
```

在特定实例上定义角色：

```
user.add_role :moderator, Forum.first 
```

`cancan`然后允许您定义能力，即 a`user`可以做什么。它非常适用于`rolify`：

```
if user.has_role? :admin, User
  can :manage, :all
else
  can :manage, User, :id => user.id
end 
```

第一个能力定义定义了管理员可以管理（即`read`、`create`、`update`和`destroy`）所有内容。

第二个能力定义说非管理员只能管理自己。即我只能编辑我自己的电子邮件地址；我什至无法查看您的用户记录！

两者的自述文件都`gems`非常好，并链接到进一步阅读。在接下来的几天里，我还将在博客中介绍一个相当完整的示例，其中涉及`rolify`、`cancan`、和 Rails 观察者。该示例将展示如何创建基于状态机 ( ) 的电子邮件确认模型，使用和获取权限`aasm``omniauth``aasm``rolify``cancan`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:03:51.813

你可以在你的控制器上做类似的事情：

```
class ResourcesController < ApplicationController
  before_filter :check_current_user_is_admin, :only => [:new,...]

  ...

  private

  def check_current_user_is_admin
    return if current_user.role == 'admin'
    redirect_to error_page
  end
end 
```

这是一个例子，你可以做你想做的......

# html - CSS - 按钮不对齐

> ID：15439185
> 
> 赞同：0
> 
> 时间：2013-03-15T18:00:12.777
> 
> 标签：html, css

我在让按钮为我的网页正确排列时遇到问题。

到目前为止，这就是我所拥有的：

![http://img17.imageshack.us/img17/2209/capturekxh.png](../Images/d48d1e264c43b9fe6196743c61f52485.png)

```
<div class="containerBoxes">                                        
   <div class="search">
       <form id="search-form" action="search.aspx" method="GET" accept-charset="utf-8" class="navbar-form" style="height:35px; width:100%" >
       <input type="text" name="s" onblur="if(this.value=='') this.value=''" onfocus="if(this.value =='' ) this.value=''"  />
       <a href="#" onclick="document.getElementById('search-form').submit()"></a>
       </form>
   </div>

   <form id="Form1" runat="server">
        <asp:ToolkitScriptManager ID="scrpMngMaster" runat="server">
        <Scripts>
          <asp:ScriptReference Path="~/js/jquery.js"/>
          <asp:ScriptReference Path="~/js/jquery.easing.1.3.js"/>
          <asp:ScriptReference Path="~/js/camera.js"/>
          <asp:ScriptReference Path="~/js/jquery.ui.totop.js"/>
          <asp:ScriptReference Path="~/search/search.js"/>                        
          <asp:ScriptReference Path="~/js/google.js"/>
          <asp:ScriptReference Path="~/js/livechat.js"/>  
          <asp:ScriptReference Path="~/js/bootstrap.js"/>  
        </Scripts>
        </asp:ToolkitScriptManager>    

  <div class="newsletter">                               
    <input type="text" runat="server" id="inputNewsletterEmail" onfocus="if(this.value =='Newsletter Sign Up - Enter Email' ) this.value=''" onblur="if(this.value=='') this.value='Newsletter Sign Up - Enter Email'" value="Newsletter Sign Up - Enter Email" style="background-color:#232323; width:95%;" />
    <asp:RegularExpressionValidator  
        ID="regEmail"
        ControlToValidate="inputNewsletterEmail"
        Text="(Invalid email)"
        ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
        Runat="server" />
        <asp:Button id="btnNewsletter" runat="server" class="btn btn_" Text="subscribe" OnClick="btnNewsletter_OnClick" />
        <asp:Label ID="lblSuccess" runat="server" Visible="false" ForeColor="#97D816" Font-Bold="true" Font-Size="12px"></asp:Label>
   </div>

 </form>
</div> 
```

CSS：

```
.containerBoxes
{
  float:right;
} 
```

我遇到的问题是“提交按钮”仍然没有与时事通讯文本字段对齐。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:21:35.330

如前所述，不要在布局中使用表格，唯一需要使用`table`的时候是需要表格时（有意义，不是吗？）您需要的是：

**HTML**

```
<div class="search">
    <input type="text" />
    <img src="glass.png" />
</div> 
```

**CSS**

```
.search{
    position:relative;
}
input{
    padding-left:30px;
}
img{
    position:absolute;
    top:5px; /* adjust value so it looks right */
    left:300px; /* adjust value so it looks right */
    z-index:100;
} 
```

编辑：OP改变了他原来的问题，我会把这个留给任何正在寻找在文本字段中插入放大镜的解决方案的人。

# opengl - 平铺渲染 glFrustum 剪裁平面计算

> ID：15439189
> 
> 赞同：0
> 
> 时间：2013-03-15T18:00:27.420
> 
> 标签：opengl, frustum, perspectivecamera

我试图让一个平铺渲染器工作（这个想法是通过将它分解成块并单独渲染来渲染一个大视图平截头体）。

我有代码可以将具有视角的标准透视投影转换为左、右、上和下剪切平面，然后可以将其传递给 glFrustum。

我被困在正确地打破这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:00:27.420

在几次失误之后，我制作了以下内容：

```
//"int  rect[4]" is the pixel rectangle of the original view
//"int rect2[4]" is the pixel subrectangle within rect corresponding to the new view
//"left", "right", "bottom", and "top" are the left, right, bottom, and top clipping
//    planes of the old view, respectively.

float diff_x = right -   left;
float diff_y =   top - bottom;

result_left   = (float)(rect2[0]         ) / (float)(rect[2]) * diff_x  +    left;
result_right  = (float)(rect2[0]+rect2[2]) / (float)(rect[2]) * diff_x  +    left;
result_bottom = (float)(rect2[1]         ) / (float)(rect[3]) * diff_y  +  bottom;
result_top    = (float)(rect2[1]+rect2[3]) / (float)(rect[3]) * diff_y  +  bottom; 
```

# javascript - KineticJS - 动态创建形状数组并使用事件

> ID：15439191
> 
> 赞同：0
> 
> 时间：2013-03-15T18:00:28.297
> 
> 标签：javascript, events, kineticjs, shape, konvajs

我设法动态地创建了一个形状数组，并且它们很好地放置在不同的坐标处。

但是，当我尝试在该循环中分配事件时，单击的结果总是相同的。好像点击事件仍在引用我循环的最后一次迭代。

我究竟做错了什么？谢谢！

编辑：实际上，在孤立的环境中重新产生了这种行为：

```
var stage = new Kinetic.Stage({
        container: 'container',
        width: 1024,
        height: 768
    });
    var layer = new Kinetic.Layer();
    singleSegment=40;
    for (var i = 0; i < 4; i++) {
                depth=singleSegment+(singleSegment*i);
                dotLabel = new Kinetic.Text({
                    x: depth,
                    y: depth,
                    text: "test"
                });
                dotLabel.on('click', function(evt){
                    console.log(this.x);
                });
                layer.add(dotLabel);
    }
    stage.add(layer); 
```

如何为这四个标签添加不同的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:53:37.523

我认为你做的一切都是正确的。但正因为如此；

```
 console.log(i); 
```

i的最后一个值是array.length-1，当它被点击时，它会显示那个值，它不会改变，因为它被点击时它在循环之外。

这将显示不同的价值。

```
 console.log(this.attrs.x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T02:27:51.033

我只需要处理同样的问题。我通过将其位置存储到每个形状来解决它。

```
 for (var axisItem=0;axisItem<innerCircleXAxisArray.length;axisItem++)
        {
            var arc = new Kinetic.Shape({
                drawFunc: function(canvas){
                    var allAttrs = this.getAttrs();
                    var start = allAttrs['start'];
                    var end = allAttrs['end'];
                    var context = canvas.getContext();
                    context.strokeStyle = 'red';

                    var centerOfCanvasX = canvasWidth / 2;
                    var centerOfCanvasY = canvasHeight / 2;

                    context.translate(centerOfCanvasX, centerOfCanvasY);
                    context.lineWidth = 15;
                    context.beginPath();
                    context.arc(0, 0, 284, start , end, true); 
                    canvas.stroke(this); // Fill the path
                    context.closePath();
                    context.translate(-centerOfCanvasX, -centerOfCanvasY);
                },
                fill: 'red',
                stroke: 'red',
                strokeWidth: 15
            });

            arc.setAttrs({'start': innerCircleXAxisArray[axisItem]['start'], 'end': innerCircleXAxisArray[axisItem]['end']});

            layer.add(arc);
        }
        stage.add(layer); 
```

创建对象时，我使用 setAttrs 来存储对象的位置 - 开始和结束角度，因为它们是弧线，但它也可以很容易地成为 x 和 y 点。然后在 drawFunc 中，我使用 getAttrs 来检索该数据并绘制对象。

# c - C - 从套接字写入和读取

> ID：15439195
> 
> 赞同：0
> 
> 时间：2013-03-15T18:00:30.857
> 
> 标签：c, sockets, tcp

我必须使用 c 中的 tcp 套接字发送两个字节。

到目前为止我的尝试：

```
static void send_request(int sockfd) {
    uint8_t buffer[SEND_BYTES];
    uint8_t requestLowByte = 0;
    uint8_t requestHighByte = 0;

.... calculating the values for the two bytes

    bzero(buffer,SEND_BYTES);
    buffer[0] = requestLowByte;
    buffer[1] = requestHighByte;

    connfd = write(sockfd, buffer, strlen(buffer));
    if (connfd < 0) {
        bail_out(EXIT_FAILURE, "ERROR writing to socket\n", progname);
    }
} 
```

我的测试值：我尝试将值 248 和 127 循环发送到服务器。在服务器端，我收到：248 127, 7 248, 127 7, 7 7,7 7, 248 127 ... 额外的值从何而来？

提前感谢您的回答，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:05:49.813

这一行：

```
connfd = write(sockfd, buffer, strlen(buffer)); 
```

应该：

```
connfd = write(sockfd, buffer, SEND_BYTES); 
```

`strlen`函数正在寻找 a`\0`来计算缓冲区的长度，并且由于您不确定`\0`要发送的数组中的第二个值之后是否存在 a，因此它是未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:05:26.860

是什么`SEND_BYTES`？2？如果是，则`strlen`无法正常工作，因为终止零被`requestHighByte`. make `SEND_BYTES`> 2 或用于`sizeof(buffer)`确定字节数。

此外，您可能需要检查结果是否`write`完全等于您发送的数据量。

# sql-server - 将 Vanilla 论坛导入 SQL Server

> ID：15439200
> 
> 赞同：0
> 
> 时间：2013-03-15T18:00:53.167
> 
> 标签：sql-server, ssis, migration, bids, yaf

我正在尝试将数据从 Vanilla 论坛导出到 SQL Server，以便我可以编写某种脚本将其导入 YAF.NET。我尝试过使用集成服务项目和 SQL Server 导入向导。论坛和用户最终都过去了，但主题表给我带来了麻烦。问题是记录的分离，我无法使用平面文件数据源正确拆分它们。

例如：

```
DiscussionID,CategoryID,InsertUserID,UpdateUserID,Name,Body,Format,CountComments,CountViews,Closed,Announce,Sink,DateInserted,DateUpdated,InsertIPAddress,UpdateIPAddress,DateLastComment,Score
1,2,2,0,"Welcome","","Html",1,1,0,0,0,"2005-11-22 20:36:00","2005-11-22 20:36:00",\N,\N,"2005-11-22 20:36:00",\N
13,5,5,0,"Custom Feilds","Hi Echilon\,\
\
I've been fiddling with iZeit Calendar a bit (though I haven't published anything\, as that would be inapropriate without your permission) and I have tried\, without success\, to add extra fields to both the input form and the calendar output.\
\
So far I've added the extra columns to the database\, attempted to edit the multiple queries in functions.php -&gt; addevent() function with little success.\
\
I was wondering if you could help me out a bit in better understanding the flow of data from input fields to database query.\
\
Once I get the data into the database\, I shouldn't see any future problems of displaying it.\
\
I would also like to note that you've done a fantastic job with this software!\
\ 
-Ax","Html",4,1830,0,0,0,"2006-02-23 00:14:43","2006-02-24 18:57:53",\N,\N,"2006-02-24 18:57:53",\N
3,4,2,0,"[Wallpaper] Aeon Genesis","<a target=\"_blank\" href=\"http://www.deviantart.com/deviation/24402244/\"></a><img src=\"http://mi6.nu/aeon_small.jpg\" border=\"0\" />\
<a target=\"_blank\" href=\"http://www.deviantart.com/deviation/24402244/\">Full Size - 1600x1200</a>\
\
I made this in 2004\, it's an edited photo of the view from my window at sunset.","Html",1,1052,0,0,0,"2005-11-23 09:46:29","2005-11-23 09:46:29",\N,\N,"2005-11-23 09:46:29",\N
4,7,2,0,"Moodsig","This is a script which lets you pick a mood from a control panel\, then have it display that mood in a sig\, along with a random quote from a database. It's not quite finished yet\, but it should be released sometime this week. I just have to track down the guys who made the smileys for permission. It's a bit buggy at the minute\, but it should be working in a few days.\
\
At the minute\, you need PHP and a MySQL database\, but I might release a version which only needs php and a text file if there's demand for it.\
\
This is the control panel\, which controls the sig I'm using now.\
<a target=\"_blank\" href=\"http://mi6.nu/moodsig_0.8.jpg\"></a><img src=\"http://mi6.nu/moodsig_0.8_thumb.jpg\" border=\"0\" />","Html",1,1100,0,0,0,"2005-11-23 15:38:56","2005-11-23 15:38:56",\N,\N,"2005-11-23 15:38:56",\N
5,4,2,0,"Dynasig 1.0","Dynasig lets you set your current mood with a web based control panel\, then display it aswell as a random quote in a signature which you can use on a forum.\
\
<b>Installation</b>\
You'll need a webserver with PHP and MySQL. In the future\, I might release a version that doesn't need MySQL\, but for now\, you have to have it. \
\
1) Set up a database on ... 
```

在这种情况下，新记录从这些行开始：

```
3,4,2,0,"[Wallpaper] Aeon Genesis","<a ta
4,7,2,0,"Moodsig","
5,4,2,0,"Dynasig 1.0","Dynasig l 
```

我如何将它放入 SQL 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:35:57.913

如果您只处理特定的分隔符（例如逗号），则可以使用该`BULK INSERT`任务（请参阅：http: [//blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file- into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/](http://blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/)）。

```
BULK
INSERT ForumTable
FROM 'c:\ForumFlatFile.txt'
WITH
(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
)
GO 
```

如果您想导入某些标签和语句（我无法从 OP 中得知，抱歉），我会建议使用函数。例如，根据论坛帖子的导出方式，构建可以解析标签之间某些值的函数（例如，解析`A HREF`标签的函数）。有时论坛帖子可以以某些模式开头和结尾，并且函数可以“识别”这些开始和结束标签并抓住值之间的中间值。

# javascript - 在之间添加选项字段和

> ID：15439212
> 
> 赞同：1
> 
> 时间：2013-03-15T18:01:21.773
> 
> 标签：javascript

我有一个天 <SELECT> 字段和一个月份 <SELECT> 字段，并且天 <SELECT> 应该包含当月的 <OPTION> 天数。例如，如果我从月份 <SELECT> 选择四月，则 <SELECT> 日的 <OPTION> 数量为 30。我的问题是：如何在 <SELECT> 和 </SELECT> 之间添加 <OPTION> 字段?

这是 HTML 代码：

```
<div class="input">
    <label>Date de naissance</label>
    <br>
    <select name="jour"></select>
    <select name="mois" onchange="ajouterJours(this.options[this.selectedIndex].text);"></select>
    <input type="number" name="annee">
</div> 
```

这是我到目前为止创建的 JS 脚本：

他是在页面加载时起作用的功能：

```
function main()
{
    var i = 0;
    var moisSelect = form.mois;
    while (i<12)
    {
        i++;
        moisSelect // here I cant figure out what to do with the month SELECT to add options
    }
} 
```

这是在 <SELECT> 和 </SELECT> 之间为日期 <SELECT> 字段添加选项的函数：

```
function ajouterJours(mois)
{
    var mois = 0;
    var jourSelect = form.jour;
    switch(mois)
    {
        case 1,3,5,7,8,10,12:
            mois = 31;
            break;
        case 2:
            mois = 29;
            break;
        case 4,6,9,11:
            mois = 30;
    }
    var i = 0;
    while (i<m)
    {
        i++;
        jourSelect  // here I cant figure out what to do with the day SELECT to add options
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:17:54.573

将一个元素添加为另一个元素的子元素的通用代码如下所示：

```
// i assume this has already been done
var select = <get your select element here>;
...

var option = document.createElement('option');
option.value = "the value";
option.appendChild(document.createTextNode('The Label'));
select.appendChild(option); 
```

删除一个的代码很简单；实际上，要删除最后一个，这是微不足道的。

```
select.removeChild(select.lastChild); 
```

我能想到的最简单的代码来确定一个月中的天数（同时适当考虑闰年）：

```
function daysInMonth(month, year) {
    if (!month) month = (new Date()).getFullYear();
    var lastDay = new Date(Date.UTC(year, month % 12, 1) - 1);
    return lastDay.getDate();
} 
```

所以现在，考虑问题。当月份发生变化时，您希望使选项数与该月的天数相匹配。在伪代码中：

```
on month change:
    newNumberOfDays = daysInMonth(selected month, selected year)
    while current number of options =/= newNumberOfDays:
        if newNumberOfDays > current number of options
            add an option for (current number of options) + 1
        else
            remove the last option 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:35:25.563

您可以像这样将新的选项元素添加到选择中：

```
select.options[index] = new Option(text, value); 
```

`length`您也可以通过将属性设置为来清除选择`0`

这是您的问题的一个工作示例：http: [//jsfiddle.net/inti/KTJMA/](http://jsfiddle.net/inti/KTJMA/)

HTML

```
<select name="mois"></select>
<select name="jour"></select> 
```

JS

```
var select_mois = document.getElementsByName("mois")[0];
var select_jour = document.getElementsByName("jour")[0];

select_mois.length = 0;
for (var m=0; m<12; m++) {
    select_mois.options[m] = new Option(m+1, m+1);
}
select_mois.onchange = function() {
    var val = this.options[this.selectedIndex].value
    addJour(val);
}
select_mois.onchange();

function addJour(m) {
    var days = daysInMonth(m, (new Date()).getFullYear())
    select_jour.length = 0;
    for (var j=0;j<days;j++) {
        select_jour.options[j] = new Option(j+1, j+1);
    }
}

function daysInMonth(month, year) {
    return new Date(year, month, 0).getDate();
} 
```

# jpa - JpaRepository 使用的模式？

> ID：15439217
> 
> 赞同：0
> 
> 时间：2013-03-15T18:01:37.937
> 
> 标签：jpa, jpa-2.0, spring-data-jpa

我刚刚开始使用 JpaRepository 并且想知道其他人使用什么模式来处理它。我注意到我最终在我的 dao 层中声明了至少 2 个存储库。

```
public interface CustomerRepository extends JpaRepository<Customer, Integer> {

Customer findById(Integer id); 
Page<Customer> findByLastname(String name, Pageable pageable);

Page<Customer> findByLastnameLike(String name, Pageable pageable);

}

 public interface FilmRepository extends JpaRepository<Film, Long>

Page<Film> findByTitleLike(String name, Pageable pageable);

Page<Film> findByDescriptionLike(String name, Pageable pageable);

Film findById(Long id);

} 
```

大多数人会推荐/尝试使用单独的控制器和服务层（每个接口 1 个）还是尽可能多地组合？我认识到这个问题是高度特定于应用程序的，但是在使用 JpaRepository 接口时是否有这方面的一般最佳实践？我最终将它们结合起来，坦率地说，它看起来一团糟，我正在考虑重写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:42:00.297

当我编写业务层时，我更喜欢编写一个具有**通用业务逻辑**操作的服务。该服务可以使用多个 DAO（存储库）类，并将它们组合起来。通常，在业务服务逻辑中，不仅需要访问不同的数据库表，还需要使用其他服务（调用外部 Web 服务、与 MQ 通信、日志服务、安全服务等）。从所有这些我们可以得出结论，在单个业务层类中，我们必须使用多个存储库和/或其他服务类。

业务层不应该只是访问存储库的接口，业务层应该在与存储库交互的同时做一些业务逻辑。

如果你的代码看起来很乱，也许你应该尝试重构它，但我怀疑如果你隔离所有业务服务和控制器，你会不会有很多好处。

但正如您所说，每种方法都是高度特定于应用程序的。但是，一般来说，如果您编写 CRUD 应用程序，每个存储库一个业务类是一个好方法，但如果您有复杂的业务逻辑，恐怕这是不可能的。

例如，您可以定义

 ````
@RestResource(path = "customer", rel="customer")
public interface CustomerRepository extends CrudRepository<Customer, Integer> {

Customer findById(Integer id);

Page<Customer> findByLastname(String name, Pageable pageable);

Page<Customer> findByLastnameLike(String name, Pageable pageable);

} 
```` 

`并通过使用 spring-data-rest 获得 crud REST 服务，而无需创建业务层逻辑（注意：这只是一个示例）。`

 `同样的事情也适用于控制器。`

# javascript - 即使我使用 0，javascript 结果数组也只打印最后一个 XML 行

> ID：15439219
> 
> 赞同：0
> 
> 时间：2013-03-15T18:01:45.727
> 
> 标签：javascript, xml, html

我有具有 start、dur 和 text 的字幕 XML 文件来分配 temporay 数组，然后将每个索引传递给 Subtitle 数组。当我想查看索引为 0 的字幕数组时，它应该打印包括 start、dur 和 text 在内的第一行文本，而是打印最后一个文本行。错误的结果显示，

467.071,3.643，感谢收看，请订阅，评分和评论

我尝试了索引 50，它仍然打印最后一行。我是在错误的循环中添加它还是什么？

这是前 3 行 XML 的示例（总文本行为 136），

```
<transcript>
<text start="2.014" dur="1.276">Greetings fellow nerds.</text>
<text start="3.291" dur="3.446">In this video we&#39;re going to make glow sticks of various colors</text>
<text start="6.738" dur="2.277">and explain a few interesting points about them.</text>
</transcript> 
```

这是一个javascript示例，

```
<script type="text/javascript">
            function loadXMLDoc(dname)
            {
                if (window.XMLHttpRequest)
                {
                xhttp=new XMLHttpRequest();
                }
                else
                {
                xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xhttp.open("GET",dname,false);
                xhttp.send();

                return xhttp.responseXML;
            }

            function init()
            {
                var subtitleArray = new Array();
                var tempArray = new Array();
                var c = document.getElementById('container');

                captionsDoc = loadXMLDoc("captions.xml");
                x=captionsDoc.getElementsByTagName('text');

                for(i=0;i<x.length;i++)
                {
                    tempArray[0] = x[i].getAttribute('start');
                    tempArray[1] = x[i].getAttribute('dur');
                    tempArray[2] = x[i].childNodes[0].nodeValue;

                    subtitleArray[i] = tempArray;

                }

                c.innerHTML = subtitleArray[0];
            }
            window.onload = init;
        </script> 
```

# c#-4.0 - C#中基于参考程序集版本的条件方法

> ID：15439222
> 
> 赞同：2
> 
> 时间：2013-03-15T18:01:54.210
> 
> 标签：c#-4.0

我有一个将要更新参考的项目。现在新的参考有一些现有的没有的 API。而且这个参考也不完全向后兼容现有的参考。因此，我希望我的项目根据构建中包含的引用，使用 [Conditional] 属性编译类中的某些方法。是否可以在 C# 中执行此操作，如果可以，我如何在编译时执行此操作？

# java - 如何从 JBoss AS 7 上的（可能是远程的）Web 应用程序访问 OSGi 服务？

> ID：15439224
> 
> 赞同：0
> 
> 时间：2013-03-15T18:02:04.493
> 
> 标签：java, jakarta-ee, jboss, osgi

我正在使用 JBoss AS 7。据我了解，它带有 felix 作为 ogsi 容器。我一直将 JBoss 用作普通 Java EE Web 应用程序 (webapp) 的容器。但是，我遇到了很多依赖冲突，我正在重构我的一些代码以成为捆绑包（用于 osgi）。我的问题如下。

*   我可以从我的 webapp 访问 osgi 服务吗？请注意，webapp 将正常部署，而不是通过 osgi（它不是 webapp 包，也称为 wab）。如果是这样，请向我提供一些有关如何执行此操作的参考链接。我已经看到了相反的例子（从 osgi 包访问 webapp，但我认为 webapp 是作为 wab 部署的）。
*   是否可以从 webapp 以编程方式控制捆绑包的生命周期（停止、卸载、启动、安装）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T11:54:21.440

从您的 Web 应用程序访问 OSGi 服务很容易。

首先，您需要 MANIFEST.MF 中的 Dependencies，它通常会部署
到 webapp/META-INF 文件夹。

要添加的依赖项是 org.osgi.core 和 org.jboss.osgi.framework 以及您部署的 Bundles 作为 deployment.yourbundle:version。

例如你的包被命名为“yourbundle_1.0.0.1.jar”：

```
Manifest-Version: 1.0
Built-By: me
Build-Jdk: 1.7.0_09
Dependencies: org.osgi.core,org.jboss.osgi.framework,deployment.yourbundle:1.0.0.1 
```

在 Activator 类中将您的捆绑包注册为服务（应该已经完成​​）：

```
public void start(BundleContext bundleContext) throws Exception {

    context.registerService(YourBundleService.class.getName(), new YourBundle(),null);
} 
```

在 JBoss AS 中访问 OSGi BundleContext 需要一个 EJB：

```
@Stateless
public class OSGiServiceBean {
    @Resource
    BundleContext context;

    public YourBundleService getBundleService() {
        ServiceReference sref = context.getServiceReference(YourBundleService.class.getName());

        return (YourBundleService) context.getService(sref);
    }
} 
```

# android - Android JNI java.lang.UnsatisfiedLinkError

> ID：15439228
> 
> 赞同：1
> 
> 时间：2013-03-15T18:02:08.560
> 
> 标签：android, android-ndk, java-native-interface

我正在尝试实现[另一个问题](https://stackoverflow.com/questions/14398670/rotating-a-bitmap-using-jni-ndk)中找到的方法 rotateBitmapCcw90 。为了使用这种方法，我创建了一个名为 Utils 的 java 类。这个类很简单：

```
package com.test.jnitest;

import android.graphics.Bitmap;

public class Utils {
    static {
        System.loadLibrary("utils");
    }

    public static native Bitmap rotateBitmapCcw90(Bitmap bitmap);
} 
```

**rotateBitmapCcw90**在 poject_path/jni 下的 com_test_jnitest_Utils.cpp中实现。这个文件的内容是：

```
#include <jni.h>
#include <android/log.h>
#include <android/bitmap.h>

#include <stdio.h>
#include <stdlib.h>

#define  LOG_TAG    "libutils"
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)
#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)

extern "C" {
JNIEXPORT jobject JNICALL Java_com_test_jnitest_Utils_rotateBitmapCcw90(JNIEnv * env, jobject obj, jobject bitmap)
{
    // same code of other question
    ...
}
}; 
```

我的 Android.mk 是：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := libutils
LOCAL_SRC_FILES := com_test_jnitest_Utils.cpp
LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog
LOCAL_LDLIBS += -ljnigraphics

include $(BUILD_SHARED_LIBRARY) 
```

一切都成功编译（ndk-build 和 Eclipse 项目），但只要我调用 Utils.rotateBitmapCcw90 传递位图，我就会得到一个 java.lang.UnsatisfiedLinkError。日志说：

```
03-15 14:46:48.243: D/dalvikvm(1936): Trying to load lib /data/data/com.example.jnitest/lib/libutils.so 0x40f77c98
03-15 14:46:48.253: D/dalvikvm(1936): Added shared lib /data/data/com.example.jnitest/lib/libutils.so 0x40f77c98
03-15 14:46:48.253: D/dalvikvm(1936): No JNI_OnLoad found in /data/data/com.example.jnitest/lib/libutils.so 0x40f77c98, skipping init
03-15 14:46:48.333: W/dalvikvm(1936): No implementation found for native Lcom/test/jnitest/Utils;.rotateBitmapCcw90:(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap; 
```

问题是：我做错了什么？我的cpp文件有什么问题吗？我也已经尝试使用 javah 生成标头并将其包含在我的 cpp 中，但出现了相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:14:31.287

在将库名称从 utils 更改为 bitmaputils 后，我终于让它工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:18:32.980

试图这样做：

```
import android.graphics.Bitmap;

static {
        System.loadLibrary("utils");
    }

public class Utils {

    public static native Bitmap rotateBitmapCcw90(Bitmap bitmap);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:22:45.797

您的 ndk 代码在“com_test_jnitest_Utils.cpp”中，但您在“Android.mk”中添加了“com_test_jnitest_Utils.c”。如果更改文件扩展名，此程序不会出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T09:15:35.507

在你的`.mk`文件中应该是这样的：

```
LOCAL_MODULE    := utils 
```

# algorithm - BIT：使用二叉索引树？

> ID：15439233
> 
> 赞同：26
> 
> 时间：2013-03-15T18:02:28.857
> 
> 标签：algorithm, language-agnostic, tree

与其他数据结构相比，二叉索引树几乎没有或相对没有理论可供研究。唯一简洁地教授它的地方[是 topcoder 教程](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)。尽管教程中的所有解释都很完整，但我无法理解这样一棵树背后的直觉是什么？以及如何证明它的正确性？

我认为这个证明很难解释。那么在使用 BIT 时，您遵循什么方法呢？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-16T02:35:55.367

我通过@templatetypedef 找到[了这个答案](https://cs.stackexchange.com/questions/10538/bitwhat-is-the-intuition-behind-a-binary-indexed-tree-and-how-was-it-thought-ab)，非常清楚地解释了二叉索引树的直觉和证明：答案....

直观地，您可以将二叉索引树视为二叉树的压缩表示，它本身就是标准数组表示的优化。这个答案进入了一个可能的推导。

例如，假设您要存储总共 7 个不同元素的累积频率。您可以从写出将分配数字的七个存储桶开始：

```
[   ] [   ] [   ] [   ] [   ] [   ] [   ]
  1     2     3     4     5     6     7 
```

现在，让我们假设累积频率看起来像这样：

```
[ 5 ] [ 6 ] [14 ] [25 ] [77 ] [105] [105]
  1     2     3     4     5     6     7 
```

使用此版本的数组，您可以通过增加存储在该点的数字的值来增加任何元素的累积频率，然后增加之后所有元素的频率。例如，要将 3 的累积频率增加 7，我们可以将 7 添加到数组中位置 3 处或之后的每个元素，如下所示：

```
[ 5 ] [ 6 ] [21 ] [32 ] [84 ] [112] [112]
  1     2     3     4     5     6     7 
```

这样做的问题是它需要 O(n) 时间来执行此操作，如果 n 很大，这将非常慢。

我们可以考虑改进此操作的一种方法是更改​​我们存储在存储桶中的内容。您可以考虑仅存储当前频率相对于前一个存储桶增加的数量，而不是将累积频率存储到给定点。例如，在我们的例子中，我们将上面的桶重写如下：

```
Before:
[ 5 ] [ 6 ] [21 ] [32 ] [84 ] [112] [112]
  1     2     3     4     5     6     7

After:
[ +5] [ +1] [+15] [+11] [+52] [+28] [ +0]
  1     2     3     4     5     6     7 
```

现在，我们可以在 O(1) 时间内增加一个桶内的频率，只需将适当的数量添加到该桶中。但是，现在进行查找的总成本变为 O(n)，因为我们必须通过汇总所有较小存储桶中的值来重新计算存储桶中的总数。

我们需要从这里获得二叉索引树的第一个主要见解如下：与其不断地重新计算特定元素之前的数组元素的总和，不如预先计算特定元素之前的所有元素的总和。序列中的点？如果我们能做到这一点，那么我们可以通过将这些预先计算的和的正确组合相加来计算出某个点的累积和。

一种方法是将表示从桶数组更改为节点的二叉树。每个节点都将使用一个值进行注释，该值表示该给定节点左侧所有节点的累积和。例如，假设我们从这些节点构造以下二叉树：

```
 4
          /     \
         2       6
        / \     / \
       1   3   5   7 
```

现在，我们可以通过存储包括该节点及其左子树在内的所有值的累积和来扩充每个节点。例如，给定我们的值，我们将存储以下内容：

```
Before:
[ +5] [ +1] [+15] [+11] [+52] [+28] [ +0]
  1     2     3     4     5     6     7

After:
                 4
               [+32]
              /     \
           2           6
         [ +6]       [+80]
         /   \       /   \
        1     3     5     7
      [ +5] [+15] [+52] [ +0] 
```

鉴于这种树结构，很容易确定一个点的累积总和。想法如下：我们维护一个计数器，最初为 0，然后进行正常的二进制搜索，直到找到有问题的节点。当我们这样做时，我们还进行了以下操作：每当我们向右移动时，我们也会将当前值添加到计数器中。

例如，假设我们要查找 3 的总和。为此，我们执行以下操作：

*   从根 (4) 开始。计数器为 0。
*   向左转到节点 (2)。计数器为 0。
*   向右转到节点 (3)。计数器为 0 + 6 = 6。
*   找到节点 (3)。计数器是 6 + 15 = 21。

您也可以想象反向运行此过程：从给定节点开始，将计数器初始化为该节点的值，然后沿着树向上走到根。每当您向上跟随右子链接时，在您到达的节点处添加值。例如，要找到 3 的频率，我们可以执行以下操作：

*   从节点 (3) 开始。计数器是 15。
*   向上到节点 (2)。计数器是 15 + 6 = 21。
*   向上到节点 (1)。计数器是 21。

为了增加一个节点的频率（以及隐式地，它之后的所有节点的频率），我们需要更新树中的节点集，包括该节点在其左子树中。为此，我们执行以下操作：增加该节点的频率，然后开始走到树的根部。每当您点击一个将您作为左孩子的链接时，通过添加当前值来增加您遇到的节点的频率。

例如，要将节点 1 的频率增加 5，我们将执行以下操作：

```
 4
               [+32]
              /     \
           2           6
         [ +6]       [+80]
         /   \       /   \
      > 1     3     5     7
      [ +5] [+15] [+52] [ +0] 
```

从节点 1 开始，将其频率增加 5 得到

```
 4
               [+32]
              /     \
           2           6
         [ +6]       [+80]
         /   \       /   \
      > 1     3     5     7
      [+10] [+15] [+52] [ +0] 
```

现在，转到它的父级：

```
 4
               [+32]
              /     \
         > 2           6
         [ +6]       [+80]
         /   \       /   \
        1     3     5     7
      [+10] [+15] [+52] [ +0] 
```

我们沿着左子链接向上，所以我们也增加了这个节点的频率：

```
 4
               [+32]
              /     \
         > 2           6
         [+11]       [+80]
         /   \       /   \
        1     3     5     7
      [+10] [+15] [+52] [ +0] 
```

我们现在转到它的父级：

```
 > 4
               [+32]
              /     \
           2           6
         [+11]       [+80]
         /   \       /   \
        1     3     5     7
      [+10] [+15] [+52] [ +0] 
```

那是一个左子链接，所以我们也增加这个节点：

```
 4
               [+37]
              /     \
           2           6
         [+11]       [+80]
         /   \       /   \
        1     3     5     7
      [+10] [+15] [+52] [ +0] 
```

现在我们完成了！

最后一步是将其转换为二进制索引树，这就是我们可以用二进制数做一些有趣的事情的地方。让我们用二进制重写这棵树中的每个桶索引：

```
 100
               [+37]
              /     \
          010         110
         [+11]       [+80]
         /   \       /   \
       001   011   101   111
      [+10] [+15] [+52] [ +0] 
```

在这里，我们可以做一个非常非常酷的观察。取出这些二进制数中的任何一个，找到数字中设置的最后一个 1，然后删除该位以及其后的所有位。您现在剩下以下内容：

```
 (empty)
               [+37]
              /     \
           0           1
         [+11]       [+80]
         /   \       /   \
        00   01     10   11
      [+10] [+15] [+52] [ +0] 
```

这是一个非常非常酷的观察：如果您将 0 表示“左”，将 1 表示“右”，则每个数字上的剩余位准确地说明了如何从根开始，然后一直走到那个数字。例如，节点 5 具有二进制模式 101。最后一个 1 是最后一位，因此我们将其删除以得到 10。确实，如果您从根开始，向右 (1)，然后向左 (0)，您结束在节点 5 上！

这很重要的原因是我们的查找和更新操作取决于从节点备份到根的访问路径以及我们是跟随左子链接还是右子链接。例如，在查找期间，我们只关心我们关注的左侧链接。在更新期间，我们只关心我们遵循的正确链接。这个二叉索引树只使用索引中的位就可以非常高效地完成所有这些工作。

关键技巧是这个完美二叉树的以下属性：

> 给定节点 n，通过取 n 的二进制表示并删除最后一个 1 来给出访问路径上的下一个节点，该节点返回到我们向右走的根。

例如，看一下节点 7 的访问路径，即 111。我们采用的访问路径上涉及到向上跟随右指针的节点是

*   节点 7：111
*   节点 6：110
*   节点 4：100

所有这些都是正确的链接。如果我们取节点 3 的访问路径，即 011，并查看我们向右走的节点，我们得到

*   节点 3：011
*   节点 2：010
*   *（节点 4：100，跟随左链接）*

这意味着我们可以非常非常有效地计算到一个节点的累积和，如下所示：

*   用二进制写出节点 n。
*   将计数器设置为 0。
*   在 n ≠ 0 时重复以下操作：
    *   在节点 n 处添加值。
    *   从 n 中删除最左边的 1 位。

同样，让我们​​考虑一下如何进行更新步骤。为此，我们希望沿着访问路径回到根，更新我们沿着左链接向上的所有节点。我们可以通过本质上执行上述算法来做到这一点，但将所有 1 转换为 0 并将 0 转换为 1。

二叉索引树的最后一步是要注意，由于这种按位技巧，我们甚至不需要再显式存储树了。我们可以将所有节点存储在长度为 n 的数组中，然后使用按位旋转技术隐式导航树。事实上，这正是按位索引树所做的——它将节点存储在一个数组中，然后使用这些按位技巧有效地模拟在这棵树中向上行走。

希望这可以帮助！

# iphone - 如何检查已触摸对象的 ID (iOS)

> ID：15439234
> 
> 赞同：0
> 
> 时间：2013-03-15T18:02:31.883
> 
> 标签：iphone, ios, objective-c, xcode

在我的视图中，我有一个包含一堆不同点的数组，然后我通过循环运行该数组以在视图中创建一堆不同的正方形。您还可以看到我尝试使用可访问性标识符来创建类似系统的 ID。这可能是一个非常糟糕的做法，但我的想法已经用完了哈哈。这是视图：

```
#import "LevelOneView.h"

@implementation LevelOneView
@synthesize squareLocations;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{

    squareLocations = [[NSMutableArray alloc] init];

    CGPoint dotOne = CGPointMake(1, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotOne]];

    CGPoint dotTwo = CGPointMake(23, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotTwo]];

    CGPoint dotThree = CGPointMake(45, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotThree]];

    CGPoint dotFour = CGPointMake(67, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotFour]];

    CGPoint dotFive = CGPointMake(89, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotFive]];

    CGPoint dotSix = CGPointMake(111, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotSix]];

    CGPoint dotSeven = CGPointMake(133, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotSeven]];

    CGPoint dotEight = CGPointMake(155, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotEight]];

    CGPoint dotNine = CGPointMake(177, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotNine]];

    CGPoint dotTen = CGPointMake(199, 25);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotTen]];

    int numby = [squareLocations count];

    for (int i = 0; i < numby; i++)
    {
        NSValue *pointLocation = [squareLocations objectAtIndex:i];
        CGPoint tmpPoint = [pointLocation CGPointValue];

        UIImage *theSquare = [UIImage imageNamed:@"square.png"];

        NSString *myID = [NSString stringWithFormat:@"%d", i];
        [theSquare setAccessibilityLabel:myID];
        [theSquare drawInRect:CGRectMake(tmpPoint.x, tmpPoint.y, theSquare.size.width, theSquare.size.height)];

    }

}

@end 
```

所以，我的目标是在滑过时能够分辨出哪个方格被滑过！所以我正在寻找一个类似系统的 ID，我可以检查当前滑动到对象的“ID”上，并从那里决定如何处理它。我试图在视图的控制器中写类似的东西：

```
#import "LevelOneController.h"

@interface LevelOneController ()

@end

@implementation LevelOneController
@synthesize whereStuffActuallyHappens;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"View loaded");
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    for (UIView *view in self.view.subviews)
    {

        if ([touch.accessibilityLabel isEqual: @"1"] && CGRectContainsPoint(view.frame, touchLocation))
        {

            [view removeFromSuperview];
        }

    }

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

在这种情况下，您可以再次看到我尝试使用可访问性标签……哈哈。有谁知道如何实现这一目标？有没有办法给每个单独的方格一个 ID，然后在滑动时检查该方格的 ID？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:34:35.250

Rakesh 的评论绝对正确，`UIImageView`如果可以，请使用。

也`touchesMoved`不会检测到您的正方形，因为您没有将它们添加为子视图，它们只是在您的视图中绘制的图像，这是您应该使用 uiimageviews 的另一个原因。

如果您坚持这样做（更难）：我建议您保留一个 NSDictionary，其中您的 id 作为键，并将正方形的 cgrect 框架作为对象。然后每次触摸都会遍历所有可能的键并调用`CGRectContainsPoint`您的对象。当点包含在矩形中时，返回附属的 id（键）。但我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:19:21.843

您可以使用 a`UIImageView`将图像放在屏幕上，而不是`drawRect:`使用该`tag`图像视图的 来识别它是哪个视图。

该`tag`属性适用于所有 UIView 及其子类。（UIButton、UIImageView 等）

从您的方法来看，我认为当您`UIImage`在`drawRect:`. 所有图像将被绘制到一个视图中。因此，除了您无法识别图像之外，当您从超级视图中删除时，它也不会按预期工作。我猜，使用 a`UIImageView`会解决很多问题。

# javascript - jQuery show 和 fadeIn 函数不起作用

> ID：15439236
> 
> 赞同：2
> 
> 时间：2013-03-15T18:02:48.593
> 
> 标签：javascript, jquery, html, css, visibility

我正在使用一些基本的 jquery 函数，例如 show 和 fadeIn，但是它们不起作用。你能看到我做错了什么吗？我知道正在处理脚本，因为我看到控制台中打印了“它可以工作”。

脚本

```
$(document).ready(function(){
$('#submit').on("click",function(e){
    e.preventDefault();
    console.log("It works");
    $("#username-triangle").show('slow');
    $("#username-error").fadeIn(500);
    $("#password-triangle").fadeIn(500);
    $("#password-error").fadeIn(500);
    $("#form input").addClass("error-glow");

});
}); 
```

html的一部分

```
 <div class="login-form">
             <div class="username-triangle" id="username-triangle"><img src="img/triangle.png"></div><!--username-triangle -->
             <div class="error username-err" id="username-error">
                 <img src="img/error.png">
                 <p>Wrong Username</p>
             </div><!--end error username-err -->
             <div class="password-triangle" id="password-triangle"><img src="img/triangle.png"></div><!--end password-triangle -->
             <div class="error password-err" id="password-error">
                 <img src="img/error.png">
                 <p>Wrong Password</p>
             </div><!--end error passsword-err --> 
```

元素的可见性设置为隐藏的 CSS 的一部分。

```
.username-err
{
visibility: hidden;
position:absolute;
margin-top: 64px;
margin-left: 310px;
}
.username-triangle
{
visibility: hidden;
margin-top: 70px;
margin-left: 299px;
position: absolute;
z-index: 3;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:07:22.457

`visibility: hidden;`您可以使用`display:none`.

删除`visibility:hidden`并`display:block`在您的 CSS 中使用。

并且

**代替**

```
$('#submit').on("click",function(e){ 
```

**和**

```
$('#submit').click(function(e){ 
```

# c# - 带有实体框架的 C# 有没有办法使用抽象基类来实现存储库模式？

> ID：15439239
> 
> 赞同：0
> 
> 时间：2013-03-15T18:03:00.453
> 
> 标签：c#, entity-framework, repository-pattern

我希望我的存储库继承自抽象类（基本存储库），而不是接口。我决定要使用抽象类，因为我不会对存储库进行单元测试（我将改为对服务层进行单元测试）并且我不想将相同的实现复制到从这个基础存储库继承的每个存储库类.

例如：

```
public abstract class BaseRepository<T> where T : class
{
    protected DbSet<T> dbSet;

    public BaseRepository(DbContext dataContext)
    {
        dbSet = dataContext.Set<T>();
    }

    public void Insert(T entity)
    {
        dbSet.Add(entity);
    }

    public IEnumerable<T> SearchFor(Expression<Func<T, bool>> predicate)
    {
        return dbSet.Where(predicate);
    }

    public IEnumerable<T> GetAll()
    {
        return dbSet;
    }

    public T GetById(int id)
    {
        return dbSet.Find(id);
    }
} 
```

当我尝试创建从该基础存储库继承的其他存储库时，构造函数出现问题。如何将数据上下文传递到这些派生类中以便可以使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:43:43.507

您需要在构造函数中传递上下文：

```
 public class Repository<TEntity> where TEntity : class
    {
        internal MyEntities context;
        internal DbSet<TEntity> dbSet;

        public Repository(MyEntities context)
        {
            this.context = context;
            this.dbSet = context.Set<TEntity>();
        }

        public virtual IEnumerable<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            string includeProperties = "")
        {
            IQueryable<TEntity> query = dbSet;

            if (filter != null)
            {
                query = query.Where(filter);
            }

            foreach (var includeProperty in includeProperties.Split
                (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                query = query.Include(includeProperty);
            }

            if (orderBy != null)
            {
                return orderBy(query).ToList();
            }
            else
            {
                return query.ToList();
            }
        }

        public virtual TEntity GetByID(object id)
        {
            return dbSet.Find(id);
        }

        public virtual void Insert(TEntity entity)
        {
            dbSet.Add(entity);
        }

        public virtual void Delete(object id)
        {
            TEntity entityToDelete = dbSet.Find(id);
            Delete(entityToDelete);
        }

        public virtual void Delete(TEntity entityToDelete)
        {
            if (context.Entry(entityToDelete).State == EntityState.Detached)
            {
                dbSet.Attach(entityToDelete);
            }
            dbSet.Remove(entityToDelete);
        }

        public virtual void Update(TEntity entityToUpdate)
        {
            dbSet.Attach(entityToUpdate);
            context.Entry(entityToUpdate).State = EntityState.Modified;
        }
    } 
```

利用：

```
var repo = new Repository<MyClass>(context); 
```

# html - URL：遵循带有斜杠的相对路径的规则

> ID：15439241
> 
> 赞同：3
> 
> 时间：2013-03-15T18:03:01.867
> 
> 标签：html, url, web-crawler

我在服务器端找到了很多关于带有尾随斜杠的相对路径问题的答案，但在客户端却没有。帮帮我。

我正在编写一个网络爬虫来获取一组网站的统计数据，并且遇到了问题。我正在使用的一个网站有一个带有斜杠的相对路径的导航栏，并打算将这些路径视为绝对路径，如下所示：

在页面上`http://www.example.com/foo/bar`

导航栏链接地址 -> `foo/`, `baz/`,`quox/`

预期的绝对网址 -> `http://www.example.com/foo/`, `http://www.example.com/baz/`,`http://www.example.com/quox/`

问题是，据我所知，这是非标准行为——但 Firefox 和 Chrome 都将这些路径视为绝对路径。根据[RFC 1808](http://www.ietf.org/rfc/rfc1808.txt)和[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)，这些应该像相对路径一样处理，如下所示：

规范正确的绝对网址 -> `http://www.example.com/foo/foo/`, `http://www.example.com/foo/baz/`,`http://www.example.com/foo/quox/`

特别是在 RFC 1808 中的第 5.1 节和 RFC 2396 中的 C.1 节中，第 4 个示例显示了这种情况被特别视为相对路径。在我正在编写爬虫的 Ruby 中，[Addressable gem](http://addressable.rubyforge.org/)根据规范处理这些。

更糟糕的是，有问题的服务器很乐意为这些路径返回 200 OK，并且所有路径都有这个导航栏：所以我最终爬取`http://www.example.com/foo/`了与 相同的页面`http://www.example.com/foo/foo/`，`http://www.example.com/foo/foo/foo/`依此类推，组合成奇怪的 URL，如`http://www.example.com/foo/baz/quox/foo/`

那么问题来了：我是否遗漏了一些允许 Chrome 和 Firefox 都将这些 url 解释为绝对路径的东西？有什么方法可以消除规范正确且绝对路径是预期的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-19T12:41:04.837

必须在元素`<base>`内部定义一个标签`<head>`，用于指定页面中相对路径的基本 URL。

[RFC-1808](https://www.rfc-editor.org/rfc/rfc1808#section-10)

# c# - 获取任务取消令牌

> ID：15439245
> 
> 赞同：32
> 
> 时间：2013-03-15T18:03:13.957
> 
> 标签：c#, .net, multithreading, cancellation-token

我可以获取在任务操作执行期间`CancellationToken`传递给`Task`构造函数的内容吗？大多数示例如下所示：

```
CancellationTokenSource cts = new CancellationTokenSource();
CancellationToken token = cts.Token;

Task myTask = Task.Factory.StartNew(() =>
{
    for (...)
    {
        token.ThrowIfCancellationRequested();

        // Body of for loop.
    }
}, token); 
```

但是，如果我的操作不是 lambda 而是放置在其他类中的方法并且我没有直接访问权限怎么办`token`？`token`唯一的方法是作为状态传递吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T18:04:47.980

> 但是，如果我的操作不是 lambda 而是放置在其他类中的方法并且我没有直接访问令牌的权限怎么办？唯一的方法是将令牌作为状态传递吗？

是的，在这种情况下，您需要传递作为状态装箱的令牌，或者包含在您用作状态的其他类型中。

但是，仅当您计划`CancellationToken`在方法内使用时才需要这样做。例如，如果您需要调用`token.ThrowIfCancellationRequested()`.

如果您仅使用令牌来阻止方法被调度，那么它不是必需的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-15T18:06:01.213

> 我可以获得在任务操作执行期间传递给 Task 构造函数的 CancellationToken 吗？

不，您不能直接从`Task`对象中获取它，不。

> 但是，如果我的操作不是 lambda 而是放置在其他类中的方法并且我没有直接访问令牌的权限怎么办？唯一的方法是将令牌作为状态传递吗？

这是两个选项，是的。不过还有其他的。（可能不包括在内。）

1.  您可以通过匿名方法关闭取消令牌

2.  您可以将其作为状态传递

3.  您可以确保用于任务委托的实例具有保存取消令牌的实例字段，或保存保存令牌的某个对象等。

4.  您可以通过其他更大的范围将令牌公开为状态，即作为公共静态字段（在大多数情况下是不好的做法，但有时可能适用）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-02-05T18:54:38.543

这似乎有效：

```
public static CancellationToken GetCancellationToken(this Task task)
{
  return new TaskCanceledException(task).CancellationToken;
} 
```

这对于使通用任务助手保留已取消任务的 CancellationToken 是必要的（我到达这里时试图让[Jon Skeet 的 WithAllExceptions 方法](https://codeblog.jonskeet.uk/2011/06/22/eduasync-part-11-more-sophisticated-but-lossy-exception-handling/)保留令牌）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-19T20:11:43.337

正如其他答案所述，您可以将令牌作为参数传递给您的方法。但是，重要的是要记住您仍然希望将其传递给`Task`as。`Task.Factory.StartNew( () => YourMethod(token), token)`， 例如。

这确保：

1.  如果在执行之前发生取消，`Task`则不会运行`Task`（这是一个很好的优化）

2.  被调用方法抛出的`OperationCanceledException`正确将任务转换为`Canceled`状态

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-23T16:46:20.750

有一个非常简单的解决方案：

```
 class CancelingTasks
{
    private static void Foo(CancellationToken token)
    {
        while (true)
        {
            token.ThrowIfCancellationRequested();

            Thread.Sleep(100);
            Console.Write(".");                
        }
    }

    static void Main(string[] args)
    {
        CancellationTokenSource source = new CancellationTokenSource();
        CancellationToken tok = source.Token;

        tok.Register(() =>
        {
            Console.WriteLine("Cancelled.");
        });

        Task t = new Task(() =>
        {
            Foo(tok);
        }, tok);

        t.Start();

        Console.ReadKey();
        source.Cancel();
        source.Dispose();

        Console.WriteLine("Main program done, press any key.");
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-11T16:37:40.237

您可以通过使用反射访问内部字段来获取 CancellationToken。

```
public CancellationToken GetCancellationToken(Task task)
{
    object m_contingentProperties = task
        .GetType()
        .GetField("m_contingentProperties",
            BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance)
        .GetValue(task);

    object m_cancellationToken = m_contingentProperties
        .GetType()
        .GetField("m_cancellationToken",
            BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance)
        .GetValue(m_contingentProperties);

    return (CancellationToken)m_cancellationToken;
} 
```

[提示：您可以使用ILSpy](http://ilspy.net/)自行搜索此类内容。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-10-26T10:58:52.323

当我们查看 Task 类参考源代码时，我们可以看到取消令牌存储在一个内部类中： ContingentProperties

[https://referencesource.microsoft.com/#mscorlib/system/threading/Tasks/Task.cs,90a9f91ddd80b5cc](https://referencesource.microsoft.com/#mscorlib/system/threading/Tasks/Task.cs,90a9f91ddd80b5cc)

目的是避免访问这些属性，而这些属性并不总是必需的。

```
 internal class ContingentProperties
    {
        // Additional context

        internal ExecutionContext m_capturedContext; // The execution context to run the task within, if any.

        // Completion fields (exceptions and event)

        internal volatile ManualResetEventSlim m_completionEvent; // Lazily created if waiting is required.
        internal volatile TaskExceptionHolder m_exceptionsHolder; // Tracks exceptions, if any have occurred

        // Cancellation fields (token, registration, and internally requested)

        internal CancellationToken m_cancellationToken; // Task's cancellation token, if it has one
        internal Shared<CancellationTokenRegistration> m_cancellationRegistration; // Task's registration with the cancellation token
        internal volatile int m_internalCancellationRequested; // Its own field because threads legally ---- to set it.

        // Parenting fields

        // # of active children + 1 (for this task itself).
        // Used for ensuring all children are done before this task can complete
        // The extra count helps prevent the ---- for executing the final state transition
        // (i.e. whether the last child or this task itself should call FinishStageTwo())
        internal volatile int m_completionCountdown = 1;
        // A list of child tasks that threw an exception (TCEs don't count),
        // but haven't yet been waited on by the parent, lazily initialized.
        internal volatile List<Task> m_exceptionalChildren;

        /// <summary>
        /// Sets the internal completion event.
        /// </summary>
        internal void SetCompleted()
        {
            var mres = m_completionEvent;
            if (mres != null) mres.Set();
        }

        /// <summary>
        /// Checks if we registered a CT callback during construction, and deregisters it. 
        /// This should be called when we know the registration isn't useful anymore. Specifically from Finish() if the task has completed
        /// successfully or with an exception.
        /// </summary>
        internal void DeregisterCancellationCallback()
        {
            if (m_cancellationRegistration != null)
            {
                // Harden against ODEs thrown from disposing of the CTR.
                // Since the task has already been put into a final state by the time this
                // is called, all we can do here is suppress the exception.
                try { m_cancellationRegistration.Value.Dispose(); }
                catch (ObjectDisposedException) { }
                m_cancellationRegistration = null;
            }
        }
    } 
```

# zend-framework - PHP::SoapClient 代替 Zend_Soap_Client (Zend Server with Zend Framework Version 1.10.7)

> ID：15439247
> 
> 赞同：0
> 
> 时间：2013-03-15T18:03:14.770
> 
> 标签：zend-framework, soap-client, zend-server, zend-server-ce

我的所有 SOAP 调用都在 PHP CORE 中成功运行（当我在 WAMP 中运行它们时）。但是当我尝试将相同的代码添加到 Zend Server 时，由于某种原因它说“服务器遇到内部错误”。不知道发生了什么！使用呼叫`SoapClient()`根本不起作用...我正在使用 Alchemy 提供的本地 WSDL 和本地肥皂服务。不管怎样，我也试过了`Zend_Soap_Client`，但是还是不行！！这是 Zend Soap 客户端创建的转储：

```
object(Zend_Soap_Client)#37 (29) { ["_encoding":protected]=> string(5) "UTF-8" ["_classmap":protected]=> NULL ["_faultExceptions":protected]=> array(0) { } ["_soapVersion":protected]=> int(2) ["_uri":protected]=> NULL ["_location":protected]=> NULL ["_style":protected]=> NULL ["_use":protected]=> NULL ["_login":protected]=> NULL ["_password":protected]=> NULL ["_proxy_host":protected]=> NULL ["_proxy_port":protected]=> NULL ["_proxy_login":protected]=> NULL ["_proxy_password":protected]=> NULL ["_local_cert":protected]=> NULL ["_passphrase":protected]=> NULL ["_compression":protected]=> NULL ["_connection_timeout":protected]=> NULL ["_stream_context":protected]=> NULL ["_features":protected]=> NULL ["_cache_wsdl":protected]=> NULL ["_user_agent":protected]=> NULL ["_wsdl":protected]=> string(77) "C:\Program Files (x86)\Zend\Apache2\htdocs\C3Nexus\application\WSAlchemy.wsdl" ["_soapClient":protected]=> NULL ["_lastMethod":protected]=> string(0) "" ["_soapInputHeaders":protected]=> array(0) { } ["_permanentSoapInputHeaders":protected]=> array(0) { } ["_soapOutputHeaders":protected]=> array(0) { } ["location"]=> string(29) "http://localhost:3434/Alchemy" 
```

即使是像`getFunctions()`客户端这样的电话也给了我错误。我究竟做错了什么？

在 ZendEnabler.log 中发现这些错误

```
[3/15/2013 2:21:55 PM] Error: Read data error - unable to get read result. Code 109.
[3/15/2013 2:21:55 PM] Error: Request for C:/Program Files (x86)/Zend/Apache2/htdocs/SOME/public/index.php: Unable to get the response from PHP process
[3/15/2013 2:21:55 PM] Error: PHP process 9872 from the "application/x-httpd-php" pool has exited with status 255. 
```

网址请求：`http://localhost:8089/SOME/public/index.php/NewPatient/load-gsdd-data`

因此，

控制器： `NewPatient` 动作：`loadGssdData`

我在那个动作中写肥皂电话。

这有效：

```
$hey = new Zend_Soap_Client(APPLICATION_PATH . '\WSAlchemy.wsdl');
$hey->location ='http://localhost:3434/Alchemy';
echo var_dump($hey); 
```

但是当我打电话时失败了`$hey->getFunctions()`！

这根本行不通

```
$hey = new SoapClient(APPLICATION_PATH . '\WSAlchemy.wsdl');
$hey->location ='http://localhost:3434/Alchemy';
echo var_dump($hey); 
```

甚至这个！

```
 $hey = new SoapClient("http://localhost:8089/SOME/public/WSAlchemy.wsdl");
 echo var_dump($hey); 
```

注意：我可以在以下位置访问 wsdl 文件`http://localhost:8089/SOME/public/WSAlchemy.wsdl`

我想知道为什么我不能`SoapClient`在 Zend Server 中使用，这是核心 PHP 之一！:(

为了尝试，我在 Zend Server 中禁用了 Soap Client 它说：

```
[15-Mar-2013 14:46:23] PHP Fatal error:  Class 'SoapClient' not found in C:\Program Files (x86)\Zend\Apache2\htdocs\SOME\application\controllers\GSDD.php on line 2 
```

所以，我再次启用，它说那里没有错误，但我仍然收到错误！这是启用扩展后我的服务器访问日志：

```
127.0.0.1 - - [15/Mar/2013:14:54:06 -0400] "POST /ZendServer/index.php/Log-Tail/Index HTTP/1.1" 200 9205
127.0.0.1 - - [15/Mar/2013:14:54:07 -0400] "POST /ZendServer/index.php?controller=systray&action=exec&do=ping HTTP/1.1" 200 643
127.0.0.1 - - [15/Mar/2013:14:54:35 -0400] "GET /SOME/public/index.php/NewPatient/load-gsdd-data HTTP/1.1" 500 499 
```

所以当我加载我得到这个：

![错误](../Images/cb78f4fbdd1c397429d68450c2d76501.png)

打开该文件后，那里有服务器错误。

其他控制器和操作工作正常！我只是对这个动作有问题。

非常感谢您的时间:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:07:46.367

嗯，有点似曾相识。几乎可以肯定是奇数球端口号...... openCM？WSDL 会效仿吗？尝试使用您`'proxy_host'`的`'proxy_port'`SoapClient 选项？

发现这可能是同一件事：[当 wsdl 将服务端口绑定定义为 https 和端口 80 时 PHP SOAP 请求失败的解决方法？](https://stackoverflow.com/questions/1439615/workaround-for-php-soap-request-failure-when-wsdl-defines-service-port-binding-a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:26:38.167

好的，终于修好了！

在此过程中，了解了事物的工作原理，但是，哈哈，这是一个愚蠢的理由！

`Zend was unable to read the Schema File` 这就对了！！！

小问题，呸！

对不起，如果这个问题困扰你;）

但是是的，WSDL 和 Schema 文件必须齐头并进！我怎么会错过这个！

感谢大家查看这个问题！

# c# - 如何将 innerXML 值分配给 XPathNavigator？

> ID：15439251
> 
> 赞同：1
> 
> 时间：2013-03-15T18:03:26.300
> 
> 标签：c#, xml, xml-parsing, linq-to-xml

`System.NotSupportedException`当我尝试将值分配给时，以下代码行会引发`InnerXml`：

```
XPathNavigator dataItem = currentXPathDoc.CreateNavigator();
dataItem.MoveToChild(XPathNodeType.Element);
dataItem.InnerXml = TemplateEvaluator.NormalizeUnicode(dataItem.InnerXml); 
```

这是文档中预期的：

```
// Exceptions:
//   System.InvalidOperationException:
//     The System.Xml.XPath.XPathNavigator.InnerXml property cannot be set. 
```

我试图弄清楚是否有一种方法可以更改`InnerXml`此节点的，而无需完全重构它以使用`XDocument`而不是`XPathNavigator`

这可能吗？还是我必须承受性能/一致性的影响并在这里使用其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:10:19.347

可以编辑由 XMLDocument 对象创建的 XPathNavigator 对象。由 XPathDocument 创建的 XPathNavigator 对象是只读的。

SO上还有一个与此类似的问题：

[在 C# 中修改现有 XML 内容](https://stackoverflow.com/questions/3623211/modifying-existing-xml-content-in-c-sharp)

它还链接到 Microsoft 关于如何使用 XPathNavigator 修改 XML 的文章：http: [//msdn.microsoft.com/en-us/library/zx28tfx1.aspx](http://msdn.microsoft.com/en-us/library/zx28tfx1.aspx)

# ios - 几秒钟后消失的ios文本通知是什么

> ID：15439253
> 
> 赞同：1
> 
> 时间：2013-03-15T18:03:29.283
> 
> 标签：ios

在 Instagram 上，当我发布一张照片后，屏幕中间会出现一个小文本框，上面写着“已发布推文”，如下图所示。它会在一两秒钟后消失。它到底是什么？如何在 IOS 中构建类似的东西？谢谢！

![在此处输入图像描述](../Images/dcb054ced1df394449bf97aeb669096e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:12:21.600

它确实是一个标准控件。它被称为[UILabel](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)。

```
NSString *text = @"Tweet posted";
UIFont *font = [UIFont boldSystemFontOfSize:20.0f];
CGSize size = [text sizeWithFont:font constrainedToSize:CGSizeMake(320, 100)];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, size.width + 20, size.height + 20)];
label.textColor = [UIColor whiteColor];
label.backgroundColor = [[UIColor darkGrayColor] colorWithAlphaComponent:0.8];
label.textAlignment = NSTextAlignmentCenter;
label.font = font;
label.text = text;
label.layer.cornerRadius = 5.0f;
label.shadowColor = [UIColor darkGrayColor];

label.center = CGPointMake(self.view.bounds.size.width/2, self.view.bounds.size.height/2);

[self.view addSubview:label];

double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [UIView animateWithDuration:0.5f animations:^{
        label.alpha = 0.0f;
    } completion:^(BOOL finished) {
        [label removeFromSuperview];
    }];
}); 
```

没什么花哨的，只是标准属性和一些层“魔法”。和 GCD。
代码应该是不言自明的。不要忘记`#import <QuartzCore/QuartzCore.h>`

# nhibernate - 休眠环境和乐观并发

> ID：15439254
> 
> 赞同：0
> 
> 时间：2013-03-15T18:03:33.240
> 
> 标签：nhibernate, nhibernate-envers

我正在使用 nhibernate envers 进行审计。为数据库中的每个表创建一个对应的审计表。

Envers 需要两个必填字段：一个版本和另一个时间戳。

但是为了乐观并发，主表中也需要版本字段。

假设： TableA { id , version , name } 然后根据 envers 审计表有： { id, version, name, revision, revisionType }

审计表中的字段：版本和修订版完全相同，都包含条目的版本。

如果我从主表中删除版本字段，那么乐观并发将不适用于 nhibernate，并且对于 envers，必须指定修订字段。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:06:56.457

Envers`version`和 Optimistic Concurrency`version`字段是不同的东西。如果这些是默认名称，您可能应该重命名其中一个。

# ios - 创建一个透明的 UIview

> ID：15439255
> 
> 赞同：0
> 
> 时间：2013-03-15T18:03:34.563
> 
> 标签：ios, xcode

不幸的是，从标题中我想做什么并不完全清楚。我想为我的 IOS 应用程序创建一个交互式导师。目前我有一个带有一些图像的简单 UIviewcroller，但我想让它更具交互性。我想在我的普通 UIview 之上添加第二个 UIview，它是部分透明的，以使用户能够看到它下面的内容，并且在某些部分是不可见的。有些部分是用户必须触摸的。在这个 UIview 上会有箭头、标签和其他信息。这可能吗？如果一个 UIview 被另一个覆盖，我可以让用户与它下面的部分交互吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:05:53.297

设置`view.userInteractionEnabled = NO;`为禁用交互。

并`view.backgroundColor = [UIColor clearColor];`用于透明背景。

触摸将直接穿过视图到其下方的下一个视图。

**编辑：**

或者，您可以尝试设置`view.alpha = 0.0f;`. 这将使视图透明。然后将任何按钮和标签添加到此视图。这些按钮将可见并按预期工作，但点击其他任何地方将通过透明视图。如果 alpha 低于某个阈值（不确定确切值），触摸将被忽略并传递到下一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:08:53.197

在您想要透明设置 userInteractionEnabled = FALSE 的子视图上。你也可以对 UIWebVIew、UIImageView 等做同样的事情。你也可以将背景颜色设置为 UIColor 清晰的颜色。这样它就可以看到下面的图层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:18:28.673

尝试使顶视图透明并在下面添加第三个视图并将其背景色设置为黑色并将 alpha 设置为 0.5

# c - 如何使用变量类型标记此输入行，以便我可以决定保存我的信息的结构的大小？

> ID：15439267
> 
> 赞同：2
> 
> 时间：2013-03-15T18:04:24.910
> 
> 标签：c, regex, unix, bison, flex-lexer

这是一个多部分的问题。首先，我的输入文件将如下所示：

```
category Shoes brand:char[50],cost:int
category Shirts brand:char[20],cost:int 
```

我的问题是：

a.) 如何`:`仅在类别名称之后拆分行？`Shoes`或`Shirts`在这些情况下。

b.) 我将如何编写我的 Bison 解析器，以便确定`char[30]`保存每一行信息的结构的变量（例如 ）？

如果这些问题看起来过于本地化，如果我能被引导到一些可以帮助我做同样事情的资源，我将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:56:30.857

遗漏的细节太多了。例如，“int”可以用作类别名称吗？你打算如何存储你解析的数据？

尽管如此，解析器的初始草图将是这样的：

```
%token CATEGORY "category"
       EQ       "="
       COLON    ":"
       COMMA    ","
       LBRA     "["
       RBRA     "]"
       INT      "int"
       CHAR     "char"
       ID
       NATURAL
;
%%    
categories:
  category
| categories category
;

category:
  "category" ID fields
;

fields:
  field
| fields "," field
;

field:
  ID ":" type
;

type:
  "char"
| "int"
| type "[" NATURAL "]"
; 
```

这对于扫描仪：

```
%%
"category"   return CATEGORY;
"="          return EQ;
":"          return COLON;
","          return COMMA;
"["          return LBRA;
"]"          return RBRA;
"int"        return INT;
"char"       return CHAR;
[a-zA-Z]+    return ID;
[0-9]+       return NATURAL;
[ \n\t]+     continue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T08:36:30.663

(b.) 我不确定我是否正确理解了你的问题。我假设您要解析输入文件中的每个条目并将信息存储在结构中。Category 和 Brand 是字符串，cost 是 int。您想事先知道字符串的长度，因此您可以分配一个变量来保存解析后的值（例如 char[20]）。

为什么不使用 C++ 字符串？那么你不必声明长度。[这里](http://aquamentus.com/flex_bison.html#11)的例子。如果必须使用 C，则可以只使用 char * 并使用 malloc 在堆上分配字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:21:38.023

[此页面](http://en.wikipedia.org/wiki/GNU_bison)有一个合理、简单的示例，可以作为您尝试做什么的指南。编写 flex/bison 解析器的完整一般过程是：

1.  确定标记是什么，编写一个正则表达式并为每个标记选择一个标识符（就像@akim 在他的 flex/bison 代码中所做的那样）。
2.  为您尝试解析的“合法”输入编写 LALR(1) 上下文无关语法。@akim 在这方面为您提供了帮助。
3.  设计一个目标数据结构来保存解析器结果。这是您帖子中缺少的关键内容。如果你只是想计算一个整数大小，那么你就完成了。如果您需要传递更多细节以进行进一步处理，您将需要某种记录/枚举/列表结构，通常称为*抽象语法树*或 AST，即使它通常不是真正的树。
4.  实现 AST（如有必要）数据结构，包括构造函数，如`CATEGORY_NODE make_category(enum category_e cat);`. 这些构造函数将被解析器调用。
5.  在没有操作代码的 flex 扫描程序文件中实现令牌。
6.  在野牛解析器程序文件中实现 CFG，无需操作代码。
7.  构建一个测试框架和一个测试套件，并测试扫描器和解析器是否读取合法输入并拒绝错误输入。到目前为止，该程序什么也没做。这就是@akim 的代码现在所在的位置。
8.  决定哪些数据必须与每个令牌相关联（如果有）。例如，无符号数的值是从扫描仪返回的大小为`unsigned int`. 标识符的值将是一个字符串。但是括号`[`根本没有任何价值。使用这些类型来创建 bison`%union`指令以接受来自扫描仪的值。将这些作为`<union_field>`标签添加到相应的`%token`指令中。请参阅`@union`此处使用的示例，它有两种标记值类型。
9.  通过在顶部添加一个并添加操作代码来修复`flex`扫描仪，以返回相应令牌的正确令牌值。`#include "foo.tab.h"`此时一切都应该再次编译并运行，但仍然什么都不做。再次参考示例。
10.  现在在解析器中实现数据处理。您将使用美元`$n`和`$$`指令并将`<union_field>`类型标签添加到语法非终结符以在语法规则之间移动数据，最后调用 AST 结构的构造函数以在读取输入时构建结构（或增加整数，如果这是就是这样）。这就是 LALR 解析器的经验和更深入的知识很有帮助的地方。文档中后面的示例`Bison`是这部分的另一个参考。如果遇到障碍，请返回具体问题。
11.  再次运行测试并以您可以验证的形式打印生成的 AST。XML 可以很好地解决这个问题。

现在我敢肯定，有人会注意到这种完全通用的方法对于您迄今为止所要求的内容来说太过分了。这取决于。您当前的输入非常简单，您可能可以更快地手写一个小的*临时解析器，根本不使用 flex 或 bison。*

但是，如果您正在编写的程序可能会使用一段时间并随着时间的推移而改变，那么在一开始就准备好通用解析器的所有机制可以让生活变得更轻松。将程序输入视为一种真实的语言而不仅仅是原始数据，可以引导您创建您永远不会想到的功能。

# python - 插入模式下的 Vim 在输入 # 时跳转到行首

> ID：15439269
> 
> 赞同：1
> 
> 时间：2013-03-15T18:04:32.147
> 
> 标签：python, vim, comments

出于某种原因，当我在 vim 中创建一个新行并且我输入的第一个字符是“#”（例如在 python 中添加注释）时，vim 取消了自动创建的选项卡并将数字符号和光标移动到开头线。当我在普通模式下使用“o”命令以及在插入模式下按 enter 时会发生这种情况。

例如，如果我有一个功能：

```
def some_function():
    a = 1 
```

我在 "a = 1" 下新建一行，vim 会自动缩进新行。但如果我输入“#”，它会跳回到行首。

有人知道这是什么原因吗？更重要的是，我如何取消它？

# gwt - 将小部件插入纯 HTML 代码

> ID：15439275
> 
> 赞同：0
> 
> 时间：2013-03-15T18:05:02.677
> 
> 标签：gwt, web-applications, servlets

由于我要显示的页面包含很多文本，我想在他们自己的文本文件中预先格式化，所以我执行以下操作：

```
execute: onModuleLoad()
         - make an Async call to the server and load 
           the text files which are html-formatted 
```

代码如下所示：

```
homeAsync.load(new AsyncCallback<String>() {
  public void onFailure(Throwable caught) {
    contentHome.add(new HTML("<h1>FAIL</h1>something went wrong"));
    caught.printStackTrace();
  }

  public void onSuccess(String result) {
    contentHome.getElement().setId("inner");
    contentHome.add(new HTML(result));
    //RootPanel.get("content").add(new HTML(result));
  }
}); 
```

现在.. 在这些文本文件中是一些自定义标签：

```
<!graph> 
```

我想用一些 GWT 小部件替换它。我的问题是，我只是不知道我怎么能轻松地做到这一点。

我可以做一个像这样的工作：

```
- load text part 1 (async call)
- insert graph for part 1
- load text part 2 (asynca call)
- insert foobar
- and so on .. 
```

我什至不知道这是否可行，但老实说..这太丑了^^

对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:10:03.687

知道`part1`和`part2`二会让事情变得更清楚。

是的，您可以将所有`HTML`内容呈现到`widget`（但以安全的方式，是的，谈论[SafeHtml](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml)）。

并避免两次`RPC`调用从数据库中获取字符串。如果您知道`part1`并`part2`一次加载字符串（使用标识符并将其拆分`client side`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:35:44.650

您还可以使用以下方法：

```
Label w = new Label();
w.getElement().setInnerHTML(html);
w.getElement().setInnerSafeHtml(safeHtml); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:50:57.637

使用[HTMLPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLPanel.html)作为模板。

一个例子：

```
String html = "<div id='one' style='border:3px dotted blue;'></div>"
    + "<div id='two' style='border:3px dotted green;'></div>";
HTMLPanel panel = new HTMLPanel(html);
panel.setSize("200px", "120px");
panel.addStyleName("demo-panel");
panel.add(new Button("Do Nothing"), "one");
panel.add(new TextBox(), "two");
RootPanel.get("demo").add(panel); 
```

# java - 在java的内容窗格中显示类

> ID：15439283
> 
> 赞同：0
> 
> 时间：2013-03-15T18:05:35.960
> 
> 标签：java, class, pane

我有一个关于 java 的一般性问题。因为我想创建 StronaGlowna.java （类），我在其中放置了我想在主类中显示的所有按钮、复选框和其他 GUI 组件。第一个问题是这样的，对吗？或者也许是做这件事的更好方法。我的代码看起来像这样：

```
import java.awt.CardLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.FileNotFoundException;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;

public class Main extends JFrame {

    private static final long serialVersionUID = -4575271483481196192L;

    Container pane;
    CardLayout layout;

    public Main() throws FileNotFoundException, IOException {

        layout = new CardLayout();
        setLayout(layout);

        pane = this.getContentPane();

        /*Page: Strona główna */
        JPanel newPanel = new JPanel();
        pane.add("New", newPanel);      
        JButton przycisk = new JButton("Przycisk");
        newPanel.add(przycisk);

... 
```

在 "pane.add("New", newPanel);" 我想显示以下元素：

```
package aplikacja.glowna;

import javax.swing.JButton;
import javax.swing.JPanel;

public class StronaGlowna {

    public void StronaGlownaDisplay() {
        JPanel newPanel = new JPanel();
        JButton przycisk2 = new JButton("Przycisk");
        newPanel.add(przycisk2);
    }

} 
```

我可以在 main() 中导入/显示所有类 StronaGlowna，比如 PHP 中的包含吗？你对我的想法有什么看法，它是正确的还是我错了？感谢帮助和讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:47:51.627

First - 从不，从不，从不，Main 类中的代码。从中调用一个方法，然后在另一个类中启动您的员工。当然，不要扩展它。构造函数也不是一个好主意。所有这些都是不好的做法。现在，进入你的问题，我的建议是你让 StronaGlowna 扩展 JPanel，然后通过公共构造函数获取它的实例，并将该实例用作 JScrollPane 构造函数的参数。这将使 scrollPane 充当“屏幕”，您可以在其中看到 StronaGlowna 的内容，这就是我理解您所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:38:52.293

这听起来像是 Netbeans 处理 GUI 的方式。您可以查看[http://netbeans.org/kb/docs/java/quickstart-gui.html](http://netbeans.org/kb/docs/java/quickstart-gui.html)中的文章，它可以帮助您了解 GUI 的工作原理，因为 Netbeans 可以为您生成代码。您始终可以导入类并创建对象来访问方法（通常是公共方法）。我认为它不像 PHP 中的包含。PHP include 喜欢直接包含源代码，而jave 则不然。

# variables - 获取文件名 bat

> ID：15439293
> 
> 赞同：0
> 
> 时间：2013-03-15T18:06:07.783
> 
> 标签：variables, date, batch-file, filesize

我是 BAT 写作的新手。
我正在尝试编写一个批处理文件，它将检查文件是否高于或低于特定大小，然后相应地发送电子邮件。我写了一些可以用静态文件名做到这一点的东西

```
@echo off
setlocal
set file="ssoff.bat"
set maxbytesize=1000

FOR /F "usebackq" %%A IN ('%file%') DO set size=%%~zA

if %size% LSS %maxbytesize% (
    echo.File is ^< %maxbytesize% bytes
    blat -server mail.omers.com -f checker@omers.com -t rplomp@omers.com -s "filesize less than" -body testbody 
) ELSE (
    echo.File is ^>= %maxbytesize% bytes
    blat -server mail.omers.com -f checker@omers.com -t rplomp@omers.com -s "filesize greater than" -body testbody
) 
```

在这种情况下，被检查的文件名是`ssoff.bat`. 但是，我需要让 bat 检查根据日期每天更改的文件名。文件名的掩码使用日期字符串 IE: `deployEAR_restartWAS_03132013.log ; deployEAR_restartWAS_03142013.log`... 等等 - 最后 8 个字符反映生成的日期。bat 需要检查该目录中的最新文件。今天将是 `deployEAR_restartWAS_03152013.log`

该日志文件也不在父目录中。

我想也许让蝙蝠将最新文件从该目录复制到父目录，然后检查它的大小？或者使用文件名的静态部分， `'deployEAR_restartWAS_'`然后通过`date`变量传递它的最后一部分？但我不确定哪种方法最好，而且我敢肯定还有其他我没有想到的方法。

bat 文件运行时间与文件名末尾的日期变量是同一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:20:08.147

```
for /f %%i in ('dir /b /a-d /od deployEAR_restartWAS_*.log') do set name=%%i&set size=%%~zi
echo latest file is %name% size %size% 
```

从您的描述中无法确定这组`.log`文件位于哪个目录中。您告诉我们它不会出现，`the parent directory`并且您唯一的参考似乎是`that`目录。

如果`.log`文件不在 CURRENT 目录中，您只需将目录名称添加到`deploy...`因此：`Q:\wherever\it\maybe\deployEAR_restartWAS_*.log`或者，如果文件的路径包含空格，请引用名称：`"Q:\where ever\it\may be\deployEAR_restartWAS_*.log"`

# tmux - Tmux：切换两个相邻窗格的拆分样式

> ID：15439294
> 
> 赞同：45
> 
> 时间：2013-03-15T18:06:12.920
> 
> 标签：tmux

我意识到，*一般来说*，重塑窗格布局并非易事，但我对至少能够交换两个相邻窗格的布局感兴趣。

假设我将这些窗格布置成这样

```
 _____________
|    |        |
|    |   2    |
|    |________|
| 0  |        |
|    |        |
|    |        |
|    |   3    |
|____|        |
| 1  |        |
|____|________| 
```

现在我发现我想要更多的垂直空间与窗格 3。考虑如何用窗格 0 或 1 重新排列它显然不是一件容易的事，但如果我能告诉 3 和 2 翻转拆分轴，那就太好了：

```
 _____________
|    |     |  |
|    |     |  |
|    |     |  |
| 0  |     |  |
|    |  3  |2 |
|    |     |  |
|    |     |  |
|____|     |  |
| 1  |     |  |
|____|_____|__| 
```

（注意这里 tmux 很可能会重新排序，所以旧的 3 变成了新的窗格 #2）

目前，当我尝试运行`join-pane -h`以重新组织它时，它告诉我“无法将窗格加入自己的窗口”。是的，好吧，我只是想在不破坏整个布局的情况下对其进行洗牌。

我想一种解决方法是将其拆分为自己命名的窗口，然后立即将其重新加入，尽管它看起来无法确定切换到的方向（水平与垂直）。

请注意，这与交换两个窗格的位置的操作不同，其中存在一个可以使用的命令。我正在寻找交换分裂轴。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-10-18T18:46:43.283

前缀+空格绑定到`next layout`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-12-12T19:35:12.063

```
# Here is a jewel of a bind which does the task of flipping the
# orientation of the current pane with the pane before it (in the
# ordering) -- I had a SO question on this and nobody answered.
bind -n M-f move-pane -t '.-'
bind M-f move-pane -t '.-'
bind -n M-r move-pane -h -t '.-'
bind M-r move-pane -h -t '.-' 
```

评论是谎言，这个功能不直观，坦率地说很糟糕，但它确实在紧要关头工作。

更新：我已经更新了这个以删除`-n`我的配置中的绑定，基本上你确实希望保持打开通过 tmux“通过”击键的能力。例如，一段时间后，我希望在 Vim 中具有相同的功能，我将其绑定到相同的组合。

* * *

更新：可以在这里与出色的解决方案结合使用：[https ://stackoverflow.com/a/70024796/340947](https://stackoverflow.com/a/70024796/340947)

这使您可以抓住一个窗格并四处走动。使我的绑定过时了，但对于熟悉的行为，两者都可以保留（就像我会的那样）。如果您碰巧在第一个窗格上运行它，我真的不喜欢我的会做一些令人困惑的事情（在这种情况下，'.-' 会选择右下角的窗格）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-11-12T17:37:26.423

`C-b space`（默认绑定到下一个布局）通过可用布局循环

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-11-18T18:15:58.063

```
#flipping the orientation of the current pane with the pane <arrow-way>-of

    bind -n S-Up move-pane -h -t '.{up-of}'
    bind -n S-Right move-pane -t '.{right-of}'
    bind -n S-Left move-pane -t '.{left-of}'
    bind -n S-down move-pane -h -t '.{down-of}' 
```

这是我的示例，仅以箭头的方式使用窗格更改选项按 Shift 和箭头键或根据需要重新绑定命令

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-02T17:37:30.163

如果您真的想完全按照您所说的去做，我建议您将窗格打开到一个新窗口，然后将其重新加入。

例如...

确保您有两个窗格之一处于活动状态并将其拆分：

字首`break-pane`

返回主窗口（前缀`w`）并在其余窗格上执行任何操作以使其成为您想要的布局

确保您的窗格处于活动状态，您希望另一个窗格与之相邻

确保窗口已命名（或指定的名称已知）

转到窗格被分解成的新窗口（`w`再次添加前缀）

`join-pane -t <Main Window Name> -h`（或者`-v`如果你想要垂直分割）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-06T20:34:00.150

重申：

```
You have panes
laid out like
this:

 _____________                    _____________
|    |        |                  |    |     |  |
|    |   2    |                  |    |     |  |
|    |________|                  |    |     |  |
| 0  |        |   but you want   | 0  |     |  |
|    |        |   them to look   |    |  3  |2 |
|    |        |   like this:     |    |     |  |
|    |   3    |                  |    |     |  |
|____|        |                  |____|     |  |
| 1  |        |                  | 1  |     |  |
|____|________|                  |____|_____|__| 
```

* * *

由于您知道所有窗格编号（尤其是要重新排列的窗格的窗格编号），因此简短的回答是键入：

`CTRL`+`B` `:move-pane -s 3 -t 2 -h` `ENTER`

* * *

但是，如果您不知道所有窗格编号，这里有一个重新定位窗格的简单方法：

1.  如果您的鼠标支持尚未打开，请使用以下命令打开它：
    `CTRL`+`B` `:set-option -g mouse on` `ENTER`
2.  使用鼠标单击要*撕下*的窗格- 即单击要重新定位到*另一个窗格右侧或下方的窗格*。（在您的示例中，这将是窗格 2，因为您想将其撕下并将其重新定位到窗格 3 的右侧。）
3.  接下来，单击要附加/重新定位撕下窗格的窗格。（在您的示例中，这将是窗格 3，因为您希望将窗格 2 附加到它的右侧。）
4.  最后，输入：
    `CTRL`+`B` `:move-pane -s ! -h` `ENTER`

* * *

解释：

*   魔术主要发生在第 4 步，即`-s !`开关。它告诉`tmux`将您单击的倒数第二个窗格移动到您单击的最后一个窗格。
*   第 4 步中的`-h`开关告诉`tmux`水平重新连接窗格 - 即右侧。如果您想将其附加在下方，请改用该`-v`开关，或`-h`完全不使用该开关。

* * *

笔记：

*   这些步骤会将窗格 2 放置在窗格 3 的右侧。如果您希望窗格 2 位于窗格 3 的*左侧*，则只需将窗格 3 作为“撕下”面板，将窗格 2 作为面板运行这些步骤即可附在。（或者您可以交换面板；您可以通读`man tmux`以了解如何操作。）
*   如果您通过 Unix shell 提示符运行第 4 步，请记住引用`!`，如下所示：
    `tmux move-pane -s '!' -h`
*   line:
    `set-option -g mouse on`
    是一个很好的放在`~/.tmux.conf`文件中的行，如果你还没有它的话。
*   正如您上面所说，`tmux` *将*在您重新排序后分配新的窗格编号。
*   要查看特定窗格的窗格编号，请单击您想要的页面（使其成为当前页面），然后键入：
    `CTRL`+`B`   `i`
    如果显示窗格编号的状态消息对您来说消失得太快，您可以延长它的时间可见：
    `CTRL`+`B` `:set-option -g display-time 4000` `ENTER`
*   要快速查看所有窗格的窗格编号/索引，请键入：
    `CTRL`+`B`   `Q`
    如果窗格编号对您来说消失得太快，您可以延长它们的可见时间：
    `CTRL`+`B` `:set-option -g display-panes-time 4000` `ENTER`

* * *

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-20T19:12:24.030

结合你的前缀（通常`crtl+b`），然后`space`。

当您有 2 个窗格时，它将在水平模式和垂直模式之间切换。

# php - PHP：PDFlib、OOP 和注释

> ID：15439296
> 
> 赞同：0
> 
> 时间：2013-03-15T18:06:31.070
> 
> 标签：php, class, pdf, pdflib

从 PHP 4.0.5 开始，有一些函数可以动态生成 PDF (PDFlib)。我对 PDFlib 有 3 个问题：

1.  有面向对象的课程吗？如果没有，是否计划在 PHP 的未来版本中使用？
2.  是否有向 pdf 添加评论并覆盖旧评论的功能？
3.  有没有替代方案，它能够做上面的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:13:09.587

在 PHP5 中有 PDFlib 上的 OOP 版本。在此处查看：[http](http://www.php.net/manual/en/intro.pdf.php) ://www.php.net/manual/en/intro.pdf.php 据我所知，您不能将其完整版用于商业目的。您可以尝试改用 FPDF：[http ://www.fpdf.org/](http://www.fpdf.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:31:39.837

我使用这个库即时创建 PDF ezPDF [http://sourceforge.net/projects/pdf-php/](http://sourceforge.net/projects/pdf-php/)，可以以相对简单的方式制作非常复杂的 PDF。他的手册是使用图书馆创建的。[http://pdf-php.sf.net/pdf-php-code/readme.pdf](http://pdf-php.sf.net/pdf-php-code/readme.pdf)

# django - CSV 导入跳过重复记录

> ID：15439298
> 
> 赞同：0
> 
> 时间：2013-03-15T18:06:32.033
> 
> 标签：django, csv

我正在使用[django-adaptors](http://django-adaptors.readthedocs.org/en/latest/) 我需要一种方法来检查重复的手机号码并跳过仅导入这些记录，同时继续将其余记录添加到 CSV 文件中。

这是我现在的`CsvModel.py`

```
class ContactCSVModel(CsvModel):

    first_name = CharField()
    last_name = CharField()
    company = CharField()
    mobile = CharField()
    # groups = DjangoModelField(Groups)

    class Meta:
        delimiter = "^"
        dbModel = Contacts 
```

这是进口

```
 # Try to import CSV
            ContactCSVModel.import_from_file(self.filepath) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:31:15.057

您正在寻找的是元选项中的更新，以这个例子为例......

```
class Meta:
        delimiter = ','
        dbModel = Product
        update = {
            'keys': ['name']   # or mfr_code, main_photo_url, etc..., price
        } 
```

会成功的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:19:20.953

我不知道将 3rd 方应用程序用于这么简单的事情。只需编写一个管理命令（将其命名为 myapp/management/commands/csvimport.py）：

```
from django.core.management.base import BaseCommand, CommandError
from fabric.colors import _wrap_with
from optparse import make_option
import os, csv

green_bg = _wrap_with('42')
red_bg = _wrap_with('41')

class Command(BaseCommand):
    help = "Command to import a list of stuff"
    option_list = BaseCommand.option_list + (
        make_option(
            "-f", 
            "--file", 
            dest = "filename",
            help = "specify import file", 
            metavar = "FILE"
        ),
    )

    def handle(self, *args, **options):
        # make sure file option is present
        if options['filename'] == None :
            raise CommandError("Option `--file=...` must be specified.")

        # make sure file path resolves
        if not os.path.isfile(options['filename']) :
            raise CommandError("File does not exist at the specified path.")

        # print file
        print green_bg("Path: `%s`" % options['filename'])

        # open the file
        with open(options['filename']) as csv_file:
            reader = csv.reader(csv_file)
            for row in reader:

                try :
                    object, created = Contacts.objects.get_or_create(
                        mobile = row[3],
                        defaults={
                            "first_name": row[0],
                            "last_name": row[1],
                           "company": row[2],
                        }
                    )
                except:
                    print red_bg("Contacts `%s` could not be created." % row['mobile']) 
```

运行它也很容易：

```
python manage.py csvimport --file=path/to/myfile.csv 
```

其中 csvimport 是管理命令的文件名。

# mysql - MySQL RegEx 大量搜索

> ID：15439301
> 
> 赞同：0
> 
> 时间：2013-03-15T18:06:42.327
> 
> 标签：mysql, regex, concat

我有一个产品数据库，每周都会更新现在的产品。每个产品都有一个用于 UniqueID、供应商、添加日期、产品编号和 ReplacementID 的列。更新产品时，它带有一个新的 UniqueID，但具有相同的供应商 ID 和产品编号，因此我更新旧产品以使用 ReplacementID 指向新产品（相同的产品编号，新的 UniqueID）。我没有发现一些供应商正在简化他们的产品编号，我需要将旧的与新的相匹配。例子：

旧：BRB-410-12
新：BRB-410

旧：SM999 BL
新：SM999

旧：5555i
新：5555

旧：346blk
新：346

基本上我需要匹配旧产品编号比新产品长 1-4 个“项目”（空格、破折号、数字或字母）的位置。这是我正在尝试的：

```
select a.UniqueId as OLDID, b.UniqueId as NEWID
from productdata a, productdata b
where a.ProdNum REGEXP CONCAT('^', b.ProdNum, '.?.?.?.?')
and b.UniqueId > a.UniqueId
and b.DateAdded != a.DateAdded
and a.DateAdded != '2013-03-11'
and a.ProdNum !=''
and a.ReplacementId IS NULL
and b.ReplacementId IS NULL
and b.ProdNum !=''
and a.Supplier = b.Supplier); 
```

现在我的数据库大约有 800,000 种产品，其中 400,000 种产品已经有 ReplacementID。我在我的本地机器暂存数据库上运行它，所以这是唯一运行的查询，但 20 小时后它仍然无法正常工作。你能想出一个更好的查询来捕捉这些吗？

我确实对所有使用的列都有索引。

# jquery-plugins - Jquery Joyride - 不适用于 Jquery Mobile

> ID：15439305
> 
> 赞同：2
> 
> 时间：2013-03-15T18:07:03.370
> 
> 标签：jquery-plugins, jquery-mobile

我正在尝试使用 Jquery-Joyride - [http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)，但我无法让它与 Jquery Mobile 一起使用。一旦我添加了标准 JQM 标记，帮助窗口将不再显示。

这是我正在尝试的：......

```
<ol id="joyRideTipContent">
  <li data-id="numero2" data-text="Next" class="custom">
    <h2>Stop #1</h2>
    <p>You can control all the details for you tour stop. Any valid HTML will work inside of Joyride.</p>
  </li> 
```

……

```
<script>
  $(window).load(function() {      
    $('#joyRideTipContent').joyride({postStepCallback : function (index, tip){
      if (index == 2) {
        $(this).joyride('set_li', false, 1);
      }
    }});
  });
</script> 
```

......

```
<div class="row">
 <div class="four columns">
    <img src="280x120.gif"></img>
  </div>
  <div class="eight columns">
    <h3 id="numero2">Customize Each Stop Along the Way</h3>
    <p>Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. </p>
  </div>
</div> 
```

......

上面的代码一切正常。但是，一旦我添加了 JQM 特定标签，帮助窗口就不再出现。

```
<div data-role="page" class="type-home" data-dom-cache="false" id="home"> 
```

我不知道如何让这个工作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:31:57.877

这里的问题是**`window load`**，**`document ready`**它不能正常工作**`jQuery Mobile`**。

相反，你应该使用这个：

```
$(document).on('pageshow', '#index', function(){       
    $('#joyRideTipContent').joyride();
}); 
```

**`#index`**您的页面的 id在哪里。

工作**`jsFiddle`**示例：http: [//jsfiddle.net/Gajotres/sdwXt/](http://jsfiddle.net/Gajotres/sdwXt/)

它是根据官方的**DEMO**示例制作的。

最后一件事，在你进一步**`jQuery Mobile`**阅读我的另一篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**之前，或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T13:45:22.133

如果您必须调用 joyride() 函数两次，请恢复到版本 2.0.3，可以在[https://github.com/zurb/joyride/releases](https://github.com/zurb/joyride/releases)找到- 我尝试了几个版本，这是唯一的一个没有任何明显错误的！

# python - 使用自定义中间表的 Django ManyToMany 关系 QuerySet

> ID：15439306
> 
> 赞同：5
> 
> 时间：2013-03-15T18:07:08.720
> 
> 标签：python, django, django-models, django-templates

我想为产品及其属性使用自定义中间表。我定义了以下模型，

```
class Products(models.Model):
    name = models.CharField(max_length=600, blank=True)
    brand = models.CharField(max_length=300, blank=True) 
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)     

class Attributes(models.Model):
    name = models.CharField(max_length=600)
    product = models.ManyToManyField(Products, through="AttributesMapping", related_name="attributes")

class AttributesMapping(models.Model):
    attribute = models.ForeignKey(Attributes)
    product = models.ForeignKey(Products)
    value = models.TextField(blank=True) 
```

在视图中将产品对象添加到上下文并从模板中尝试通过说来获取属性

```
{% for attribute in product.attributes.all %}{{ attribute.name }}: {{ attribute.value }} {% endfor %} 
```

我得到了名字，但价值没有出现。我尝试检查执行的 sql 语句。

```
SELECT `attributes`.`id`, `attributes`.`name` FROM `attributes` INNER JOIN `attributes_mapping` ON (`attributes`.`id` = `attributes_mapping`.`attribute_id`) WHERE `attributes_mapping`.`product_id` = 1 
```

该值在“attributes_mapping”表中，Select 语句具有引用但未选择该字段。

提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:06:38.207

请记住，`value`它不是在 上定义的`attribute`，而是在直通表上定义的。为了访问它，您需要访问属性映射对象：

```
for mapping in AttributesMapping.objects.get(product=product):
    print mapping.attribute.name, mapping.value 
```

或者：

```
for attribute in product.attributes.all():
    mapping = attribute.attributemapping_set.get(product=product)
    print attribute.name, mapping.value 
```

这当然意味着你必须改变你做事的方式，因为 django 模板不支持这种函数调用。在不了解您的设置的情况下，我真的无法建议如何最好地做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:06:59.037

您`Attribute`在模板 ( `{% for attribute in product.attributes.all %}`) 中获得了一个对象，但使用它就像您有一个`AttributesMapping`对象一样。该`Attribute`对象没有`value`属性。

# mysql - mysql_secure_installation "无法通过套接字连接到本地 MySQL 服务器"

> ID：15439307
> 
> 赞同：18
> 
> 时间：2013-03-15T18:07:12.277
> 
> 标签：mysql, database-administration, mysql-error-2002

当我调用文件时，`mysql_secure_installation`我收到一个错误，例如

```
 [mysqk123@InstallZeMo bin]$ ./mysql_secure_installation 
NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MySQL to secure it, we'll need the current
password for the root user.  If you've just installed MySQL, and
you haven't set the root password yet, the password will be blank,
so you should just press enter here.

Enter current password for root (enter for none): 
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
Enter current password for root (enter for none): 
```

但是 my.cnf 文件中给定的 sock 文件是 /home/mysqk123/tmp/mysql.sock 并且我使用的是 redhat linux 5.3 和 mysql 5.1.47

我知道 mysql_secure_installation 脚本执行的任务可以手动执行，但在这里我必须运行脚本 [不允许手动执行任务]

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T18:53:12.507

由于此实用程序旨在通过标准安装使用，并且因为它似乎不接受任何参数，所以我看到的选项很少：

*   临时将 MySQL 配置为在过程期间使用默认套接字位置（或者，从默认位置到自定义位置的符号链接可能会起作用）。
*   修改脚本`mysql_secure_installation`，使其使用您的自定义位置。如果我理解正确，脚本会在子例程的第 46 行附近创建一个临时配置文件`./.my.cnf.$$`（`$$`是 pid）`make_config`。

修改如下：（免责声明：未测试：）

```
make_config() {
    echo "# mysql_secure_installation config file" >$config
    echo "[mysql]" >>$config
    echo "user=root" >>$config
    echo "password='$rootpass'" >>$config
    # add the line below
    echo "socket=/home/mysqk123/tmp/mysql.sock" >>$config
} 
```

同样，此脚本旨在用于标准的开箱即用安装。告诉您的老板（或您的客户），如果您能够将 MySQL 配置为使用非标准套接字位置，您还可以手动运行简单的命令，例如删除帐户和设置密码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-21T15:13:04.610

确保启动 mysql 或 mariadb，例如：

```
sudo systemctl start mariadb.service
sudo systemctl enable mariadb.service 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-06-18T14:12:17.337

MySQL Socket 声明应位于`[mysqld]`您的`my.cnf`（位于`/etc/mysql/my.cnf`Debian 风格中）下。MySQL Socket 信息也可以使用以下命令找到：

```
mysql> show variables like 'socket';
+-----------------------------------------+-------------------------------+
| Variable_name                           | Value                         |
+-----------------------------------------+-------------------------------+
| socket                                  | /yourpath/mysql.sock          |
+-----------------------------------------+-------------------------------+
1 rows in set (0.00 sec) 
```

更新当前会话的环境变量并执行命令，例如：

```
export MYSQL_UNIX_PORT=/home/mysql123/tmp/mysql.sock
./mysql_secure_installation 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-27T06:00:06.320

您还可以对套接字文件进行符号链接，然后将其删除：

```
ln -s /home/mysqk123/tmp/mysql.sock /var/lib/mysql/mysql.sock
mysql_secure_installation # Do your stuff
rm -rf /var/lib/mysql/mysql.sock 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-06T14:43:41.427

我发生了同样的错误，结果我已经停止了 MySQL 服务并忘记重新启动它。因此，您可能需要使用以下命令检查 mysql 服务的状态：

`mysqladmin -u root -p status`

如果报错，说明 MySQL 没有运行，可以启动 MySQL 服务。或者，如果您愿意，您可以在不先检查其状态（如果它已经在运行，则无法使用）的情况下，使用以下命令之一鲁莽地尝试启动该服务：

```
/etc/init.d/mysql start
service mysql start 
```

如果您的系统正在使用该版本的 MySQL，请替换`mysqld`为。`mysqld`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-11T19:09:43.310

如果您使用 mariadb，请执行此操作

在运行之前：mysql_secure_installation

```
Step 1: sudo systemctl stop mariadb
Step 2: sudo systemctl start mariadb
Step 3: mysql_secure_installation 
```

它将询问 root 密码，您只需按 Enter 并设置新的 root 密码。

# junit - 用于 Sauce Labs 测试的 JUnit 或 TestNG？

> ID：15439308
> 
> 赞同：1
> 
> 时间：2013-03-15T18:07:13.260
> 
> 标签：junit, testng, saucelabs

我们目前使用 JUnit 进行测试，但这将是我们团队首次尝试并行测试。

使用 TestNG 移动会有很大的优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T06:41:46.073

在测试的并行化方面，我不认为使用 TestNG 而不是 JUnit 有任何特定的优势。使用任一库并行运行测试非常简单，我们为 JUnit 创建了一个[示例测试](https://github.com/saucelabs/sauce-java/blob/sauce_java-2.1.9/junit/src/test/java/com/saucelabs/junit/WebDriverParallelWithHelper.java)，演示如何并行运行测试。

Sauce TestNG 示例还演示了如何配置测试以并行运行，这是通过[XML 配置文件](https://github.com/saucelabs/sauce-java/blob/sauce_java-2.1.9/testng/src/test/resources/xml/WebDriverTest.xml)完成的。

我们还为 JUnit 创建了一个[ConcurrentParameterized](https://github.com/saucelabs/sauce-java/blob/master/junit/src/main/java/com/saucelabs/junit/ConcurrentParameterized.java)测试运行器，它将支持并行运行参数化测试。

# python - Python，IDLE：递归错误太多

> ID：15439310
> 
> 赞同：0
> 
> 时间：2013-03-15T18:07:20.587
> 
> 标签：python, recursion, runtime-error, python-idle, python-3.3

这应该是 Python 的 IDLE 编辑器的问题。（我在 OSX 上运行 Python 3.3.0，但同样的问题出现在 2.7.3 上）

我正在使用 IDLE 编写 Python 程序。我的问题是：调用一个递归函数，它调用自己太多次（1000 次），不会给我一个运行时错误，而是会一直向我发送错误消息，直到我关闭程序。

它应该发送的错误是：“RuntimeError：超出最大递归深度。” 它发送一千次的错误只是指出脚本中的问题所在：

```
Traceback (most recent call last):
  File "<pyshell#112>", line 1, in <module>
    factorial(1.5)
  File "/Users/User/Documents/Python/Scripts/program1.py", line 187, in factorial
    recurse = factorial(n-1)
  File "/Users/User/Documents/Python/Scripts/program1.py", line 187, in factorial
    recurse = factorial(n-1) 
```

等等

这适用于所有递归函数调用自身太多次，但这里使用的具体函数是：

```
def factorial(n):
    if n == 0:
        return 1
    else:
        recurse = factorial(n-1)
        result = n * recurse
        return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:16:26.740

要阻止 python 显示这数百个错误，您可以使用一个`try-except`块：

```
def factorial(n):
    if n == 0:
        return 1
    else:
        recurse = factorial(n-1)
        result = n * recurse
        return result
try:
    print (factorial(6000))
except RuntimeError as e:
    print (e) 
```

输出：

```
#print factorial(1000)
93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000

#print factorial(6000)
maximum recursion depth exceeded in comparison 
```

在您的情况下，发生此错误是因为 python 对最大递归深度有限制，它可以阻止 C 堆栈溢出。但是您可以使用以下方法更改它`sys.setrecursionlimit`：

```
In [4]: import sys

In [5]: sys.getrecursionlimit()
Out[5]: 1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:13:06.973

问题是您正在尝试使用浮点数并且代码无法处理。因此，1.5 -1 变为 0.5，这会导致第一次递归调用。然后，0.5 -1 变为 -0.5，这会导致进一步的递归调用。

只是为了处理它，请使用：-

> 如果 n<=0：返回 1

# javascript - 将长字符串拆分为多个动态 div

> ID：15439312
> 
> 赞同：0
> 
> 时间：2013-03-15T18:07:22.953
> 
> 标签：javascript, jquery, html

当 div 的高度达到一定长度时，我试图将一个长字符串拆分为多个动态 div。这是我认为应该工作的代码：

```
$(document).ready(function () {
    var arr = longishstring.split(' ');
    $('#bookpages').append("<div id='cont'></div>");
    elem = $('#cont');
    for (i = 0; arr.length > i; i++) {
        elem.append(arr[i] + ' ');
        if (elem.text().height > 475) {
            $('#bookpages').append("<div id='cont" + i + "'></div>");
            elem = $('#cont' + i);
            elem.append(arr[i] + ' ');
        }
    }
}); 
```

问题是它将 div 高度读取为 0 而不是更新后的高度。我在这里想念什么？如果我按长度拆分它就可以了，但这不适用于我想要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:35:34.193

```
$(function(){
    var l, i = 0, arr = longishstring.split(' '),
        elem = $('<div id="cont"/>').appendTo("#bookpages");
    for (l = arr.length; l > i; i++) {
        elem.append(arr[i] + ' ');
        if (elem.height() > 475) {
            elem = $('<div id="#cont'+i+'"/>').appendTo('#bookpages');
            elem.append(arr[i] + ' ');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:12:17.317

`elem.text().height`不会给你身高，它会给你`undefined`。

利用：

```
elem.height() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:57:27.670

这似乎是由编码的位置引起的。出于某种原因，如果我在另一个 javascript 插件的编码之前使用该代码，那么高度总是返回为 0。通过将代码放在另一个脚本后面，创建了 div。现在唯一的问题是，尽管已创建，但 div 似乎无法与插件一起使用，并且 #bookpages 的 CSS 被忽略了。我最终使用了大部分乔·约翰逊版本的剧本，并结合了我自己的风格。

```
 $(function() {
    var l, i = 0, arr = longishstring.split(' ');
      $("#bookpages").append('<div id="cont"></div>');
      elem = $('#cont');
      for (l = arr.length; l > i; i++) {
        elem.append(arr[i] + ' ' + elem.height());
        if (elem.height() > 200) {
          $("#bookpages").append('<div id="cont'+i+'"></div>');
          elem = $('#cont' +i);
          elem.append(arr[i] + ' ');
        }
      }
    }); 
```

我将不得不研究为什么 CSS 被忽略，并且最终可能不得不发布与此相关的另一个问题。感谢大家！

# gnuplot - get_data：在请求的列中找不到键标题

> ID：15439313
> 
> 赞同：-1
> 
> 时间：2013-03-15T18:07:23.250
> 
> 标签：gnuplot

gnuplot 中的以下错误是什么意思。

```
get_data: key title not found in requested column 
```

好像这个错误是由于一些空格，制表符问题，因为如果我在数据文件中手动键入相同的数据，它不会发生，但是如果我生成数据，它会发生，虽然数据完全相同列数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T17:41:26.290

我遇到了同样的问题，这是因为输入文件的格式。确保一开始的行数是正确的。对我来说，由于我从 gnuplot github 帐户复制了数据文件，而不是 11 行，我的 vi 编辑器将其复制为 15 行，我无法发现这个问题，因为每一行都很长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T13:45:57.987

通过确保为数据文件中的所有列提供列名，可以避免此警告。例如，对于像这样的数据文件
`MMC SMC A 0.5723111021 0.4871628549 B 0.6666981168 0.6819255992 C 0.2744373558 0.2129806222 D 0.7185714286 0.3357142857`

如果第一列没有列名，则会发生此错误。

# java - 清除 JSF 上的输出字段

> ID：15439314
> 
> 赞同：0
> 
> 时间：2013-03-15T18:07:30.710
> 
> 标签：java, jsf, primefaces

我在使用 JSF 和 PrimeFaces 时遇到了一点问题。我有一个带有两个`<p:selectonemenu>`s 和两个`<h:outputText>`s 的表格。第一个的内容`<p:selectonemenu>`更新第二个，两个`<h:outputText>`s 用第二个更新`<p:selectonemenu>`。两个`<p:selectonemenu>`s 都依赖于我的支持 bean 上的值。`<h:outputText>`问题是当 FIRST`<p:selectonemenu>`更改它的值时，我无法清除s 。

我尝试使用`<f:ajax>`监听器来清除当前显示的实体的内容。

这是xhtml：

```
<h:outputText value="#{bundle.BailmentFamiliesLabel_bailmentFamCode}"/>
<p:selectOneMenu id="bailmentFamilyCode" value="#{bailmentsController.selected.bailmentFamId}" required="false">
    <f:selectItems value="#{bailmentFamiliesController.itemsAvailableSelectOne}" var="famid"/>
    <f:ajax event="change" render="description price bailmentCode" listener="${bailmentsController.clearView(famid)}"/>
</p:selectOneMenu>
<h:outputText value="#{bundle.BailmentsLabel_bailmentCode}"/>
<p:selectOneMenu id="bailmentCode" value="#{bailmentsController.selected}" required="false">
    <f:selectItems value="#{bailmentsController.itemsAvailableSelectOneByFamId}"/>
    <f:ajax event="change" render="globalForm" listener="#{bailmentsController.view(bailmentsController.selected.bailmentCode,bailmentsController.selected.bailmentFamId)}" />
</p:selectOneMenu>
<h:outputText value="#{bundle.Label_description}"/>
<h:outputText value="#{bailmentsController.selected.description}" title="#{bundle.Title_description}" id="description"/>
<h:outputText value="#{bundle.BailmentsLabel_purchasePriceMsj}"/>
<h:outputText value="#{bailmentsController.selected.purchasePrice}" title="#{bundle.BailmentsTitle_purchasePrice}" id="price"/> 
```

bailmentsController上的第一个监听器`<p:selectonemenu>`：

```
public void clearView(BailmentFamilies bf) {
    if (bf != null) {
        current = new Bailments();
        current.setBailmentFamId(bf);
    }
} 
```

在我的数据库中，每个 Bailment 都分配有一个 BailmentFamily，这就是我使用两步过滤器的原因。第一个`<p:selectonemenu>`列出所有可用的 BailmentFamily，第二个`<p:selectonemenu>`显示选定 BailmentFamily 的所有可用 Bailments。s 显示所选 Bailment的`<h:outputText>`信息，这就是为什么我需要在 BailmentFamily 更改时清除它们。

任何人都可以提出另一种行动方案吗？因为这并没有被证明是有效的。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:52:52.777

我刚刚解决了这个问题。原来我必须清除我实体中的所有值。可能很傻，但其他开发人员可能会遇到这样的问题：

我编辑了我的`clearView()`方法。这是有效的代码：

```
public void clearView(BailmentFamilies bf) {
    if (bf != null) {
        // Create a new empty object to recieve the new BailmentFamily
        current = new Bailments();
        current.setBailmentFamId(bf); // This property has to be kept. 
        // I pass it as parameter and reassigned it to the current entity. 
        // Otherwise, the <p:selectonemenu> will clear upon rendering because of the new call above.
    }

    // Set ALL displayed properties to null
    current.setBailmentCode(null);
    current.setDescription(null);
    current.setPurchasePrice(null);
} 
```

希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:37:43.220

当它们没有在第一个选择菜单的标记属性中列出时，为什么你期望`<h:outputText>`它们被更新？你需要`render``<f:ajax/>`

1.  为两个s分配`id`属性`<h:outputText>`

    ```
    <h:outputText id="text1" value="#{bundle.BailmentFamiliesLabel_bailmentFamCode}"/>
    <h:outputText id="text2" value="#{bundle.BailmentsLabel_bailmentCode}"/> 
    ```

2.  参考id中的`<f:ajax/>`

    ```
    <f:ajax event="change" render="description text1 text2 price bailmentCode" listener="${bailmentsController.clearView(famid)}"/> 
    ```

到目前为止，它会起作用。出于最佳/最佳实践的观点

1.  改为使用`<p:ajax/>`。它应该执行得更快（因为底层的 jquery）并让您可以访问其他功能

    ```
    <p:ajax update="description, text1, text2, price, bailmentCode" listener="${bailmentsController.clearView(famid)}"/> 
    ```

2.  使用 EL 表示法 ( `#`) 而不是 JSTL( `$`)

    ```
    <p:ajax update="description, text1, text2, price, bailmentCode" listener="#{bailmentsController.clearView(famid)}"/> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:23:27.570

你也可以使用，

```
<input type="button" value="Reset Form" onclick="this.form.reset()" /> 
```

这将重置表单值，但不会重置支持 bean，因此如果您使用表单外的 actionListener/action 中的表单数据，这种方法将不安全。

# maven - 使用参数到 Maven 配置文件

> ID：15439316
> 
> 赞同：3
> 
> 时间：2013-03-15T18:07:41.347
> 
> 标签：maven, maven-2, maven-3, aem, maven-profiles

无论如何我可以在 Maven 配置文件中传递参数。如果对默认配置文件另有指定，就像我想在特定端口上运行服务器一样。就像我运行 mvn clean install -Pdeploy 4322 时一样，包应该部署到在端口 4322 上运行的服务器，否则部署到 4052。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T18:21:30.270

是的，您可以传递环境变量，如下所示：`mvn ... -Pdeploy -DdeploymentPort=4322`

然后像这样访问配置文件中的变量：

```
...
<port>${deploymentPort}</port>
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:23:14.657

您可以定义要在父 pom.xml 中使用的默认属性

```
 <properties>
    <crx.userId>admin</crx.userId>
    <crx.password>admin</crx.password>
    <crx.host>localhost</crx.host>
    <crx.port>4502</crx.port>
</properties> 
```

然后稍后在父 pom.xml 或子项目的 pom.xml 中，您可以使用这些属性。

例子：

```
<plugin>
    <groupId>com.day.jcr.vault</groupId>
    <artifactId>content-package-maven-plugin</artifactId>
    <extensions>true</extensions>

    <configuration>
        <targetURL>http://${crx.host}:${crx.port}/crx/packmgr/service.jsp</targetURL>
        <userId>${crx.userId}</userId>
        <password>${crx.password}</password>
    </configuration>
</plugin> 
```

然后在您的 Maven 命令中使用`-D[property name] = [value]`覆盖默认值。

# thrift - 双向消息传递的节俭

> ID：15439317
> 
> 赞同：4
> 
> 时间：2013-03-15T18:07:44.593
> 
> 标签：thrift

我很好奇 Thrift 是否适合我的用例？我正在制作另一个消息传递系统，其中有客户端和服务器，但客户端和服务器都向对方发起请求消息，并非所有消息都可能是请求，只是通知。

回到 10 年前，我使用基于二进制的手动编解码器做到了这一点。回到 5 年前，我使用 Google 协议缓冲区再次做到了这一点。但我现在听到更多关于 Thrift 的消息。

Thrift 可以简单地用作编解码器，还是真的围绕请求/回复模式构建？我需要保持与传输无关，因为我将使用自定义消息总线、websockets 和可能的 zeromq。

我也在考虑消息包和协议缓冲区，因为我知道它们确实很适合非请求/回复消息传递模式。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:38:13.377

我只与 Thrift 的 C++ 版本密切合作，所以这个答案是基于此的——它可能也适用于其他语言，也可能不是。

不过根据我的经验，Thrift 是相当模块化的——为您提供一个完整的堆栈，可以处理 RPC、套接字通信、数据序列化以及基本上介于两者之间的任何东西。

您首先在 Thrift IDL 文件中指定数据结构和服务，其方式类似于在类中指定成员变量（用于数据结构）和成员函数（用于服务）（在 C++/Java/等中） .)。您使用 Thrift 编译器编译这些以生成特定于语言的源文件，然后您可以在应用程序中实现这些源文件。

如果您使用完整的堆栈，那么只需创建必要的对象（服务器、协议、传输等）并打开客户端和服务器之间的连接（服务器实现 IDL 指定的功能）。然后客户端可以调用服务器上的函数，就像服务器是一个本地对象一样，使用自定义的数据结构（或只是一些标准的 Thrift 数据类型）作为参数和返回值。

这些函数默认是阻塞的，也就是说，它们在返回之前需要服务器的回答。但是，您也可以将函数指定为`oneway`（只要它们返回`void`），在这种情况下，您只需发送函数调用，然后立即继续。

但是，所有这一切只有在您使用完整的 Thrift 堆栈时才会出现。您通过实例化各种对象（协议、传输、处理程序、服务器等）来创建您的客户端和服务器，虽然我自己从未尝试过，但我不明白为什么您不能创建一个例如传输的派生实现，然后使用它而不是 Thrifts 自己的传输。

如果您只想使用 Thrift 以跨平台的方式定义数据结构，您也可以这样做，然后使用 Thrift 序列化这些（忽略堆栈的其余部分和 RPC-stuff），然后将它们发送为二进制数据通过您自己的传输。

# c++ - 回调函数不起作用 多线程调试 (/MTd)

> ID：15439324
> 
> 赞同：1
> 
> 时间：2013-03-15T18:08:28.977
> 
> 标签：c++, dll, callback, microsoft-runtime-library, visual-studio-2010

我需要创建一个与回调函数一起使用的 dll。当我在项目属性中设置 Runtime Libary = Multi-threaded Debug (/MTd) 时，它会生成以下错误消息：

![在此处输入图像描述](../Images/5a6e16e9aad2a46e724678f6bac29f4d.png)

但是当我设置 Runtime Libary = Multi-threaded Debug DLL (/MDd) 时，应用程序可以完美运行

看看我的DLL：

**回调过程.h**

```
#include <string>

#ifdef CALLBACKPROC_EXPORTS
#define CALLBACKPROC_API __declspec(dllexport)
#else
#define CALLBACKPROC_API __declspec(dllimport)
#endif

// our sample callback will only take 1 string parameter
typedef void (CALLBACK * fnCallBackFunc)(std::string value);

// marked as extern "C" to avoid name mangling issue
extern "C"
{
    //this is the export function for subscriber to register the callback function
    CALLBACKPROC_API void Register_Callback(fnCallBackFunc func);
} 
```

**回调程序.cpp**

```
#include "stdafx.h"
#include "callbackproc.h"
#include <sstream>

void Register_Callback(fnCallBackFunc func)
{
    int count = 0;

    // let's send 10 messages to the subscriber
    while(count < 10)
    {
        // format the message
        std::stringstream msg;
        msg << "Message #" << count;

        // call the callback function
        func(msg.str());

        count++;

        // Sleep for 2 seconds
        Sleep(2000);
    }
} 
```

**标准数据文件**

```
#pragma once

#include "targetver.h"    
#define WIN32_LEAN_AND_MEAN           
// Windows Header Files:
#include <windows.h> 
```

**我使用 dll 的应用程序**

```
#include <windows.h>
#include <string>

#include "callbackproc.h"

// Callback function to print message receive from DLL
void CALLBACK MyCallbackFunc(std::string value)
{
    printf("callback: %s\n", value.c_str());
}

int _tmain(int argc, _TCHAR* argv[])
{
    // Register the callback to the DLL
    Register_Callback(MyCallbackFunc);

    return 0;
} 
```

我哪里错了？坦克！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:27:21.917

在我看来，这是跨 DLL 边界传递`std`类型（在这种情况下）的经典问题。`std::string`

作为最佳实践，跨 DLL 边界仅传递“本机”数据类型，我敢肯定，如果您将原型从

```
typedef void (CALLBACK * fnCallBackFunc)(std::string value); 
```

到

```
typedef void (CALLBACK * fnCallBackFunc)(const char* value); 
```

无论您的底层运行时如何，您的代码都可以正常工作

# odata - 为什么 Breeze 强制执行 OData 5.2.0？

> ID：15439329
> 
> 赞同：1
> 
> 时间：2013-03-15T18:08:53.453
> 
> 标签：odata, breeze

不幸的是，微风 nuget 包 1.2.1 似乎绑定到 Microsoft.Data.OData 5.2.0。

`Install failed. Rolling back... Updating 'Microsoft.Data.OData 5.3.0' to 'Microsoft.Data.OData 5.2.0' failed. Unable to find a version of 'Microsoft.Data.Services.Client' that is compatible with 'Microsoft.Data.OData 5.2.0'.`

这有什么原因吗？我们已经依赖于 5.3.0，所以我们不能回去！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:29:33.133

这是因为 Breeze nuget 安装了“Microsoft Asp.NET Web Api OData”nuget，而后者又具有“Microsoft.Data.OData 5.2.x”（而不是 5.3）的硬限制。

也就是说，我会尝试与 MS 核实限制的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T00:28:43.480

## 2013 年 4 月 1 日更新

我被告知更新的 Microsoft.Aspnet.Webapi.odata nuget 包 4.0.1 应该可以解决此问题。请尝试并确认。

## 原始答案

我有一个临时的解决方法。我的意思是**暂时**的，因为我将要列举的步骤需要精确，并且将来很容易中断。

我在从当前部署的[Breeze/Knockout SPA 模板](http://www.asp.net/single-page-application/overview/templates/breezeknockout-template)生成的样本上对它们进行了测试，并成功升级到了 Breeze 的 1.2.1 版本。应该适用于后续的 Breeze 版本（如果没有，请告诉我们）

在包管理器控制台中输入以下序列：

1.  Uninstall-Package Microsoft.Aspnet.Webapi.odata （幸运的是，这并没有卸载这个特定包的依赖项，我假设因为其他包具有相同的依赖项）
2.  安装包 Microsoft.Data.OData -Version 5.3.0
3.  安装包 Microsoft.Aspnet.Webapi.odata -pre –IgnoreDependencies
4.  Update-Package 微风.webapi –IgnoreDependencies

“-IgnoreDependencies”开关提供了将 v.5.3.0 硬塞到您的解决方案中的杠杆作用。

我想再次强调，这是一个临时解决方案，可能只能工作一段时间。我期待回到您的 SO 问题并报告该建议已被撤销。我什至可以删除这个答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T02:50:58.187

我们发布了更新的 nuget 包[4.0.1](http://nuget.org/packages/Microsoft.AspNet.WebApi.OData/4.0.1)来解决此问题。

# javascript - 在两秒内执行第一次 window.setInterval 然后每 10 秒调用一次

> ID：15439333
> 
> 赞同：0
> 
> 时间：2013-03-15T18:09:07.450
> 
> 标签：javascript, jquery, html, onload

我在js中有一个函数：

```
(function($){
   $(document).ready(function(){
    $(function () {     
         index = 0;
         window.setInterval(function () {
            if (index > 10){ 
               index = 0;
            }    
            myFunction("so1", "flipping-right");
            myFunction("so2", "flipping-left");        
            myFunction("so3", "flipping-top");
            myFunction("so4", "flipping-bottom");
            myFunction("so5", "flipping-right");
            i++;
         }, 2000); 
        });

        myFunction = function (id, effect ) { 
              $('#' + id).toggleClass(effect);
        } 

   });
})(jQuery); 
```

我怎么能用参数**“2秒”****只第一次执行它**

 **```
window.setInterval(function () {...}, 2000); 
```

然后每次调用它，将参数更改为 8 秒

```
window.setInterval(function () {...}, 8000); 
```

所以恢复，第一次用参数2000执行它，然后每次8000？

这是[小提琴](http://jsfiddle.net/v2wxX/5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:10:32.450

将第一个调用放入`setTimeout`带有 2000 参数的调用中，然后将`setInterval`带有 8000 参数的调用放在函数的末尾`setTimeout`。**

# ssas - MDX 按成员筛选

> ID：15439334
> 
> 赞同：3
> 
> 时间：2013-03-15T18:09:10.607
> 
> 标签：ssas, mdx, dimensions, olap-cube, ssas-2008

这更像是一个通用的 MDX 问题。我想从报告 date.fiscal 层次结构中过滤这些日期。我以前使用的是计算成员，但我只是把它放在查询中，它没有返回任何结果。

```
 SELECT 
               { 
                FILTER (
                         [Reporting Date].[Fiscal].MEMBERS
                        ,[Reporting Date].[Fiscal].currentmember > [Reporting Date].[Fiscal].[Date].&[2013-03-06]
                         AND
                         [Reporting Date].[Fiscal].currentmember < [Reporting Date].[Fiscal].[Date].&[2013-03-11]
                       )

               }   on 1
              , 
               {
                  Measures.Gross
               } on 0
    FROM [Revenue] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:24:26.500

这个表达式实际上是在评估 2 个元组，然后对评估的值进行比较：

> [报告日期].[财政].currentmember > [报告日期].[财政].[日期].&[2013-03-06]

是 ：

> ( [报告日期].[财政].currentmember ) > ( [报告日期].[财政].[日期].&[2013-03-06] )

其中 () 表示一个元组（即，对多维数据集中的单元格的引用）。因此，您正在比较单元格值而不是成员日期。我想你想要的是这样的：

> 选择 ... {[报告日期].[财政].[日期].&[2013-03-06] : [报告日期].[财政].[日期].&[2013-03-11] } on 1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:06:36.577

您可以使用 MDX 范围运算符`:`指定文字成员范围

```
SELECT 
    { Measures.Gross } ON 0,
    {[Reporting Date].[Fiscal].[Date].&[2013-03-06] : [Reporting Date].[Fiscal].[Date].&[2013-03-11] } ON 1
FROM [Revenue] 
```

请参阅此处的文档：http: [//msdn.microsoft.com/en-us/library/ms146001.aspx](http://msdn.microsoft.com/en-us/library/ms146001.aspx)

# r - 显示由 R 脚本生成的警告，因为它们发生

> ID：15439336
> 
> 赞同：16
> 
> 时间：2013-03-15T18:09:15.707
> 
> 标签：r

我有一个脚本，其中包含多个块，这些块的行看起来像这样......

```
#Read data for X
DataX = read.delim(file = 'XRecords.txt',
                   col.names = XFields[,'FieldName'])
print('Data X read')
#Convert fields that should be numeric into numeric so they can summed
DataX[,NumFieldNames] = as.numeric(as.character(XData[,NumFieldNames]))
print('Data X scrubbed') 
```

当我获取脚本时，我得到这样的输出......

```
[1] "Data X read"
[1] "Data X scrubbed"
[1] "Data Y read"
[1] "Data Y scrubbed"
Warning message:
In eval(expr, envir, enclos) : NAs introduced by coercion 
```

基于该输出，我重新加载数据 Y 并开始查找字符串到数字转换失败的记录。经过几个小时的挫折，我意识到数据 X 实际上是有类型转换错误的那个。

看起来正在发生的事情是引发了警告，但在脚本完成之前它不会显示在控制台上。有没有办法让警告一出现就输出到控制台？我尝试了flush.console()，但它似乎不适用于警告。

如果可以避免的话，我宁愿不要在我的系统上加载任何额外的包。我正在使用它来工作，为了在我的计算机上安装 CRAN 发行版，我不得不跳过几圈。

谢谢你。我很感激帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T18:45:35.547

让我们举个例子来说明问题

```
foo <- function() {
  X <- c("1", "2", "three")
  print("Data X read")
  X <- as.numeric(X)
  print("Data X scrubbed")
  Y <- c("1", "2", "3")
  print("Data Y read")
  Y <- as.numeric(Y)
  print("Data Y scrubbed")
} 
```

如果运行（甚至以交互方式），您看到的行为就会出现

```
> foo()
[1] "Data X read"
[1] "Data X scrubbed"
[1] "Data Y read"
[1] "Data Y scrubbed"
Warning message:
In foo() : NAs introduced by coercion 
```

`warn`使用选项处理警告行为（请参阅 参考资料`help("options")`）。这给出了选择，包括

> 如果`warn`是 1，则在出现警告时打印警告。

将选项更改为 1 然后给出

```
> options(warn=1)
> foo()
[1] "Data X read"
Warning in foo() : NAs introduced by coercion
[1] "Data X scrubbed"
[1] "Data Y read"
[1] "Data Y scrubbed" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T18:23:26.470

问题是 R 中的警告被打印到 stderr 而不是 stdout。刷新 stderr 和 out 应该可以解决问题。

```
flush(stderr()) 
```

# c# - 一段时间后如何调用ac#方法

> ID：15439339
> 
> 赞同：-3
> 
> 时间：2013-03-15T18:09:26.683
> 
> 标签：c#, .net, windows-services

我在 Windows 服务中实现了一个上传 API，用于在服务器上上传一些文件。这些文件随时从网络系统到达服务器。此上传 API 必须在特定间隔后工作，并且这些间隔存储在数据库中。

服务第一次启动时，它会上传它拥有的所有文件，并在下次必须再次运行该方法以上传接收到的文件时获得它的下一次。

例如：服务在 6:30 开始，它上传文件并从数据库中获取它的设置，它必须在 8:30 运行。这意味着它应该在 2 小时后再次运行。**那么2小时后调用上传API的正确方法是什么。**目前我在想的是我可以使用一个计时器控件，我将设置其间隔为 2 小时（例如），其 Tick 事件将调用我的方法。

可能是我在做/想错了什么。请纠正我并向我建议替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:13:28.027

您可以使用 Windows 调度程序。它有一个 API，因此您可以创建任务来安排任何应用程序或服务的启动，而无需 24/7 运行您的服务。

# checkboxlist - asp.net updatepanel checkboxlist 属性消失

> ID：15439344
> 
> 赞同：0
> 
> 时间：2013-03-15T18:09:52.937
> 
> 标签：checkboxlist

我在更新面板中有一个复选框列表。在回发时，列表就像我想要的那样记住。

问题：当我填写复选框列表时，我添加了自定义属性。

```
 cblItems.Items(1).Attributes.Add("id", "") 
```

它在页面加载上工作。但是在回发时，我的新属性消失了。

我不想重新填充列表，因为用户可能有检查项目，我想记住检查的值。

你知道如何记住属性吗？或者也许有办法重新创建列表并记住检查的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:19:17.170

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 处理 Me.Load

```
If Page.IsPostBack Then
            Recreate_attribute_cblItems() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:52:07.863

在您的页面加载中验证是否不是回发并尝试添加新属性。像这样的东西：

```
 protected void Page_Load(object sender, EventArgs e) {
    if (!this.IsPostBack) {
       cblItems.Items(1).Attributes.Add("id", "");
    }
 } 
```

# node.js - Windows azure 上 node.js 站点的默认根 (server.js) 文件

> ID：15439345
> 
> 赞同：8
> 
> 时间：2013-03-15T18:09:54.210
> 
> 标签：node.js, azure

似乎 Windows Azure 期望您的 node.js 站点应该运行：

```
node server.js 
```

有没有办法改变这个命令？具体来说，我的应用程序的根不是`index.js`，`server.js`所以我更喜欢它：

```
node index.js 
```

有谁知道这是否可以配置？即使是这样，除了 之外，它通常被认为是不好的形式`server.js`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T01:02:03.213

对我有用的是上面generalhenry的建议：

在 package.json 中，添加：

```
"scripts": {
    "start": "node index.js"
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-14T10:00:19.610

上述解决方案都不适合我。寻找另一件事，我找到了解决方案。您必须在 web.config 文件中设置您的入口点，该文件是一个 xml 文件。检查此示例文件（您只需将 server.js 替换为您想要的任何内容）：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.webServer>         
      <handlers>
           <add name="iisnode" path="server.js" verb="*" modules="iisnode"/>
     </handlers>
      <rewrite>
           <rules>
                <rule name="LogFile" patternSyntax="ECMAScript" stopProcessing="true">
                     <match url="iisnode"/>
                </rule>
                <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">                    
                    <match url="^server.js\/debug[\/]?" />
                </rule>
                <rule name="StaticContent">
                     <action type="Rewrite" url="public{{REQUEST_URI}}"/>
                </rule>
                <rule name="DynamicContent">
                     <conditions>
                          <add input="{{REQUEST_FILENAME}}" matchType="IsFile" negate="True"/>
                     </conditions>
                     <action type="Rewrite" url="server.js"/>
                </rule>
           </rules>
      </rewrite>
   </system.webServer>
 </configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:29:23.453

You are asking about Azure Web Sites?

Try to set

```
"main": "./index.js" 
```

in your package.json file.

# javascript - 智能 javascript jquery 对象

> ID：15439347
> 
> 赞同：1
> 
> 时间：2013-03-15T18:09:55.747
> 
> 标签：javascript, jquery

好吧，我觉得这真的很有趣，当然，如果我比这更深入地研究代码，我肯定会知道他们是如何做到的。我在说的是 JQuery 库。看看下面的代码 -

```
 $.prototype.mymethod=function(str){
    alert(str);
}

//now call the added method
$(document).mymethod('hello') //alert out hello 
```

如果`$`是纯普通的 javascript 函数（不使用 jquery 库），则添加的方法不会按预期工作，除非`new`之前添加了关键字`$`

```
new $(document).mymethod('hello') 
```

但是对于 JQuery，`new`关键字是非常可选的！

有人可以在我不必通过他们的图书馆的情况下就他们如何做到这一点提供更多的见解吗？

编辑：经过一番艰苦的努力，我终于找出了上述工作原理的实际根本机制（在不使用`new` 关键字的情况下构造 JavaScript 对象）！我相信这对于任何想要学习高级 javascript 的人来说都是一个很好的未来参考！

```
function a(){
    return a.prototype;
}
a.prototype.fn=function(){
    alert('hello')
}

a.prototype.test=123;

console.log(a().test)//123 
a().fn()//alerts out hello 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:12:41.140

从[源代码](http://code.jquery.com/jquery-latest.js)：

```
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
}, 
```

`new`调用时已经调用了`$(document)`。

如果你想以 jQuery 的方式做同样的事情，可以这样做：

```
var A = function(str){
    return new A.prototype.init(str);
}
A.prototype.init =function(str){
     this.str = str;
     return this;
};
A.prototype.init.prototype = A.prototype;

A.prototype.f = function(arg){ // add your function
   console.log(this.str+' '+arg);
};
A('hello').f('world'); // logs "hello world"
A('bye').f('bye'); // logs "bye bye" 
```

# java - 小数位不工作

> ID：15439354
> 
> 赞同：-3
> 
> 时间：2013-03-15T18:10:30.877
> 
> 标签：java

下面我的部分代码显示了我希望它返回带两位小数的双精度的方法之一，但它说价格是一个字符串，为什么会这样？

```
public Double calculate(double k, double m, int l, int n, double hr){
double price = 10.00;

 NumberFormat nf = NumberFormat.getNumberInstance();
    nf.setMaximumFractionDigits(2); 
```

//这里的方法

```
 return nf.format(price); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:14:32.890

当您计算 a`double`时，计算机将其存储在内存中的方式不会以任何方式说明您希望如何显示它。这是一个没有任何属性的值。

通过使用`NumberFormat`，您正在创建代码，该代码获取存储在内存中的值并以所需的方式对其进行操作。调用`nf.format()`返回 a`String`您可以[从文档](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)中看到。

如果你想从函数返回一个格式化的数字，你必须将返回类型设置为 a `String`。如果您仍然需要保留的值，`price`您可以返回 price 并稍后在需要显示时在代码中完成格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:13:02.457

[http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)

这就是方法应该做的！

原型说它返回一个字符串。

```
String format(double number); //Specialization of format. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T18:13:05.890

它说价格是一个字符串，因为该`format`方法返回一个字符串。

也许尝试这样的事情，

`return Double.parseDouble(nf.format(price));`

# php - 在一个应用程序中定义两个不同的登录过程

> ID：15439358
> 
> 赞同：0
> 
> 时间：2013-03-15T18:10:43.323
> 
> 标签：php, login, yii, identity

我的 yii 应用程序中的登录过程有问题。我有两种不同类型的用户，包括管理站点和客户的管理员用户。我正在使用`CwebUser`和`UserIdentitiy`管理这两个组的登录。但我的问题是，当客户登录网站时，他也可以访问管理页面。我想做的是说应用程序为他们创建两个不同的身份会话。我不想使用访问控制规则之类的东西。有什么方法可以用 Yii 风格为他们创建不同的会话吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T09:56:44.550

如果您不想像其中一条评论中建议的那样使用复杂的 RBAC 设置，则可以通过配置 2 个不同的用户组件来实现`stateKeyPrefix`：

```
'user' => array(              // Webuser for the frontend
    'class'             => 'CWebUser',
    'loginUrl'          => array('site/login'),
    'stateKeyPrefix'    => 'frontend_',
),
'adminUser' => array(         // Webuser for the admin area (admin)
    'class'             => 'CWebUser',
    'loginUrl'          => array('/admin/site/login'),
    'stateKeyPrefix'    => 'admin_',
), 
```

所以现在你有 2 个独立的用户组件：`user`和`adminUser`. 您必须创建另一个`AdminLoginForm`并`AdminUserIdentity`用于`/admin/site/login`进行身份验证。这应该很简单。

尽管您仍然有问题，但您无法`accessRules`在管理模块中轻松定义，因为它会使用该`user`组件来执行授权检查，而您希望它使用该`adminUser`组件。为了解决这个问题，您可以`AdminModule`像这样更改组件配置：

```
class AdminModule extends CWebModule
{
    public function beforeControllerAction($controller, $action)
    {
        if(parent::beforeControllerAction($controller,$action))
        {
            // Make 'adminUser' the main user in this module.
            // Frontend user is available as 'Yii::app()->frontendUser'.
            Yii::app()->setComponent('frontendUser', Yii::app()->user);
            Yii::app()->setComponent('user', Yii::app()->adminUser);
            return true;
        }
        else
            return false;
    }
} 
```

现在您可以登录网站的 2 个不同部分，都使用不同的用户群进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:26:20.997

The way I've solved my problem is something like @michael solution but with some difference. I've defined two different user component in my config file : `user` and `customer` :

```
 'user' => array(
            'loginUrl' => '/admin/default/login',
            // enable cookie-based authentication
            'allowAutoLogin' => true,
        ),
        'customer' => array(
            'class' => 'NWebUser',
            'loginUrl' => '/customer/signIn',
            // enable cookie-based authentication
            'allowAutoLogin' => true,
        ), 
```

For customers I've defied an extended class from `CWebUser` named `NWebUser`. It's just an empty class. besides them I've defined another class which extend `UserIdentity` Calls `CustomerIdentity` in wich I've defined my customer authenticate method:

```
class CustomerIdentity extends CUserIdentity {

    private $_id;

    public function authenticate() {
        $record = Customer::model()->findByAttributes(array('email' => $this->username));
        if ($record === null) {
            $this->errorCode = self::ERROR_USERNAME_INVALID;
        } else if ($record->password !== Customer::hashPassword($this->password)) {
            $this->errorCode = self::ERROR_PASSWORD_INVALID;
        } else {
            $this->_id = $record->id;
            $this->errorCode = self::ERROR_NONE;
        }
        return !$this->errorCode;
    }

    public function getId() {
        return $this->_id;
    }

} 
```

Now in my login method I just use this CustomerIdentity class :

```
public function login() {
        if ($this->_identity === null) {
            $this->_identity = new CustomerIdentity($this->username, $this->password);
            $this->_identity->authenticate();
        }
        if ($this->_identity->errorCode === CustomerIdentity::ERROR_NONE) {
            $duration = $this->rememberMe ? 3600 * 24 * 30 : 0; // 30 days
            Yii::app()->customer->login($this->_identity, $duration);
            return true;
        }
        else
            return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T23:28:08.363

就在这里。如果您有两个登录页面，则可以轻松使用两个`CUserIdentity`子类。然后，您的身份验证过程可能会非常不同。

如果您的登录页面需要对两组用户相同，则需要更多的参与。但这应该是可行的。

# r - 在 R 中使用 ifelse 替换值

> ID：15439359
> 
> 赞同：4
> 
> 时间：2013-03-15T18:10:47.310
> 
> 标签：r, if-statement, multiple-columns

我对以下数据有一个非常琐碎的问题：

```
sample<-list(c(10,12,17,7,9,10),c(NA,NA,NA,10,12,13),c(1,1,1,0,0,0))
sample<-as.data.frame(sample)
colnames(sample)<-c("x1","x2","D")

>sample
x1  x2  D
10  NA  1
12  NA  1
17  NA  1
7   10  0
9   20  0
10  13  0 
```

注意：D=1 的观察次数与 D=0 相同

现在，我想创建一个`x3`具有与`D=0`when相关的值`D=1`和与`D=1`when相关的值的变量`D=0`。预期输出：

```
x1  x2  D   x3
10  NA  1   10
12  NA  1   20
17  NA  1   13
7   10  0   NA
9   20  0   NA
10  13  0   NA 
```

我尝试使用`ifelse`如下功能：

```
sample.data$x3<-with(sample.data, ifelse(D==1,x2[which(D==0)],x2[which(D==1)])) 
```

我收到以下错误：

```
logical(0) 
```

我还尝试了以下方法：

```
sample.data$x3<-with(sample.data, ifelse(D==1,tail(x2,3),head(x2,3))) 
```

同样，我得到了同样的错误：

```
logical(0) 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:33:40.250

你知道吗`data.table`，这里有一个解决方案......

```
install.packages("data.table")
library(data.table)

sample = as.data.table(sample)
sample[,x4:=ifelse(D==1,x2[D==0],x2[D==1])] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T18:16:24.253

您的命令中的逻辑是合理的，但是您错误地引用了数据框。您只需要在整个代码行中删除`.data`之后。`sample`所以这个命令会给你你需要的东西：

```
sample$x3<-with(sample,ifelse(D==1,x2[which(D==0)],x2[which(D==1)])) 
```

* * *

然而，该代码仍然有点冗长。

正如@Arun 在评论中指出的那样，在选择`x2`要使用的值作为`ifelse`. 以下代码将为您提供相同的结果：

```
sample$x3<-with(sample,ifelse(D==1,x2[D==0],x2[D==1])) 
```

# wordpress - WordPress 仅显示在子和孙子页面上

> ID：15439360
> 
> 赞同：0
> 
> 时间：2013-03-15T18:10:51.080
> 
> 标签：wordpress

我试图仅在父页面以及任何子页面和孙页面上显示侧边栏小部件，但使用我拥有的代码，它不适用于孙页面。

```
 <?php if (is_page(8) || $post->post_parent=="8") { ?>
    //Do something
<?php } else { ?>
          //Do something else
<?php }?> 
```

任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:17:01.007

首先获取父母的祖先：

```
$ancestors = get_post_ancestors($post); 
```

然后询问当前 postID 是否在该数组中：

```
if( in_array(8, $ancestors) || is_page(8) || (8 == $post->post_parent)  ) :

   //do your thing

endif; 
```

# c# - 如何从类中获取“ReadOnly”或“WriteOnly”属性？

> ID：15439363
> 
> 赞同：8
> 
> 时间：2013-03-15T18:10:59.487
> 
> 标签：c#, reflection, properties, readonly, writeonly

我需要从 MyClass 中获取属性列表，不包括“只读”属性，我可以得到它们吗？

```
public class MyClass
{
   public string Name { get; set; }
   public int Tracks { get; set; }
   public int Count { get; }
   public DateTime SomeDate { set; }
}

public class AnotherClass
{
    public void Some()
    {
        MyClass c = new MyClass();

        PropertyInfo[] myProperties = c.GetType().
                                      GetProperties(BindingFlags.Public |
                                                    BindingFlags.SetProperty |
                                                    BindingFlags.Instance);
        // what combination of flags should I use to get 'readonly' (or 'writeonly')
        // properties?
    }
} 
```

最后，我可以让它们排序吗？我知道添加 OrderBy<>，但是如何？我只是在使用扩展。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T18:20:03.117

不能使用 BindingFlags 指定只读或只写属性，但可以枚举返回的属性，然后测试 PropertyInfo 的 CanRead 和 CanWrite 属性，如下所示：

```
PropertyInfo[] myProperties = c.GetType().GetProperties(BindingFlags.Public |
                                                    BindingFlags.SetProperty |
                                                    BindingFlags.Instance);

foreach (PropertyInfo item in myProperties)
{
    if (item.CanRead)
        Console.Write("Can read");

    if (item.CanWrite)
        Console.Write("Can write");
} 
```

# javascript - javascript cleartimeout() issue

> ID：15439368
> 
> 赞同：1
> 
> 时间：2013-03-15T18:11:14.827
> 
> 标签：javascript, jquery, html

My main question is: Does clearTimeout() stop the timer AND not execute the function within the timer? OR does it just clear the timeout and immediately execute the function?

Here's my example

```
$('input').keyup(function(){
        var thisClass = $(this).attr('class').split(" ");
        var thisValue = $(this).val();
        var thisError = $(this).parent().siblings('.error');
        var thisTimeout;
        if(thisClass[1] == "letters"){
            if(thisValue.length <= 1){
                thisTimeout = setTimeout(function(){
                    thisError.html("You must have at least 2 characters");  
                    thisError.show();
                }, 800);
            } else {
                clearTimeout(thisTimeout);
                thisError.hide();
                thisError.html(""); 
            }
        }

    }); 
```

This is part of a code checks to see if an input box has at least 2 characters in it. currently, This code executes the timeout well after 800 miliseconds if it has 2 or less characters. When the input box has more than 2 characters, if I'm typing fast enough, the error box still shows up when I finish typing. I can clear the error by typing one more character, but if I were to type my name quickly, The error shows up when I'm done typing.

I also have this piece of code:

```
$('input').keydown(function(){
        clearTimeout(thisTimeout);
        thisError.hide();
    }); 
```

Hoping that it would clear the error if I kept typing Thoughts?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:14:58.283

You may be overwriting the previous setTimeout id. Thus you would not be able to clear it out.

```
var thisTimeout;
$('input').keyup(function(){
    var thisClass = $(this).attr('class').split(" ");
    var thisValue = $(this).val();
    var thisError = $(this).parent().siblings('.error');

    if(thisClass[1] == "letters"){
        if(thisValue.length <= 1){
            clearTimeout(thisTimeout); // <-- already clear the timeout here before 
                                       // starting another one
            thisTimeout = setTimeout(function(){
                thisError.html("You must have at least 2 characters");  
                thisError.show();
            }, 800);
        } else {
            clearTimeout(thisTimeout);
            thisError.hide();
            thisError.html(""); 
        }
    }

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:21:18.193

You have to move `thisTimeout` to a higher scope so its value is preserved and you have to clear it before you overwrite the previous value:

```
var thisTimeout;
$('input').keyup(function(){
    var thisClass = $(this).attr('class').split(" ");
    var thisValue = $(this).val();
    var thisError = $(this).parent().siblings('.error');
    if(thisClass[1] == "letters"){
        if(thisValue.length <= 1){
            clearTimeout(thisTimeout);
            thisTimeout = setTimeout(function(){
                thisError.html("You must have at least 2 characters");  
                thisError.show();
            }, 800);
        } else {
            clearTimeout(thisTimeout);
            thisError.hide();
            thisError.html(""); 
        }
    }

}); 
```

FYI, this code can be cleaned up a bit too:

```
var thisTimeout;
$('input').keyup(function(){
    var self = $(this);
    var thisError = self.parent().siblings('.error');
    if (self.hasClass("letters")) {
        if(self.val().length <= 1){
            clearTimeout(thisTimeout);
            thisTimeout = setTimeout(function(){
                thisError.html("You must have at least 2 characters");  
                thisError.show();
            }, 800);
        } else {
            clearTimeout(thisTimeout);
            thisError.hide();
            thisError.html(""); 
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:16:55.340

The already set time out is being replaced.. and isn't clearing

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T18:21:20.847

In your first question you asked:

> Does clearTimeout() stop the timer AND not execute the function within the timer? OR does it just clear the timeout and immediately execute the function?

The answer is the first option – `clearTimeout` stops the timer and does not execute the timer callback.

The problem in your code question is because `thisTimeout` is declared inside the `keyup` function. The `keydown` function doesn't have a reference to `thisTimeout`.

You should move it to a shared scope instead:

```
var thisTimeout;

$('input').keyup(function(){
    var thisClass = $(this).attr('class').split(" ");
    var thisValue = $(this).val();
    var thisError = $(this).parent().siblings('.error');
    if(thisClass[1] == "letters"){
        if(thisValue.length <= 1){
            thisTimeout = setTimeout(function(){
                thisError.html("You must have at least 2 characters");  
                thisError.show();
            }, 800);
        } else {
            clearTimeout(thisTimeout);
            thisError.hide();
            thisError.html(""); 
        }
    }
});

$('input').keydown(function(){
        clearTimeout(thisTimeout);
        thisError.hide();
    });
}); 
```

# php - 使用另一个表更新选定的表记录 (PHP)

> ID：15439369
> 
> 赞同：0
> 
> 时间：2013-03-15T18:11:17.347
> 
> 标签：php, sql

希望有人可以帮助...

我有两张桌子，里面有渔获量，并记录了每个垂钓者的个人最佳成绩。我现在所做的是在不断增长的列表中添加更多物种。

所以我现在已经备份了旧数据库（catches_old）并创建了一个新表（catchs）。

捕获量将所有物种设置为零。

提取唯一记录的唯一方法是同时使用 FishName 和 Angler。

我需要的是一段简单的代码来检查权重是否大于零，这意味着它有记录，然后我会用旧的详细信息更新记录。

我尝试了多种方法，但失败得很惨。

旧表（Specie、FishNm、Position、Fisherman、lb、oz、dr、Drams、PegName、Date）新表相同。

旧表包含 - 来自捕获的旧记录。新表基本上是对所有记录的重置，其中包含要捕获的附加鱼名。

新表包含所有鱼名并重置为 0 德拉姆。

旧表现在需要用过去捕获的捕获记录更新新表。旧表中仍未捕获的渔获物无需转移，只需旧渔获物即可。

样本数据 - （不准确的德拉姆计算哈哈）

```
Carp - Wobbles - 2 - David Williams - 12 - 4 - 6 - 897 - Willow Island - 21/05/1999  
Carp - Fanta - 1 - David Williams - 14 - 7 - 9 - 900 - Bay of Dreams - 14/05/2004  
Goldfish - Harry - 1 - Fred Ball - 1 - 1- 2 - 258 - Willow Island - 12/05/2010  
Goldfish - Whipper - 2 - - 0 - 0- 0- 0- -
Goldfish - Harriet - 3 - David Williams - 0 - 15 - 2 - 251 - The Fair - 23/09/2012 
```

新代码 - 对两个唯一字段使用内部连接。这个工作是否正常，因为它失败了？

```
UPDATE NewTable  
INNER JOIN OldTable  
    ON NewTable.Fishname = OldTable.Fishname AND NewTable.Angler = OldTable.Angler
SET NewTable.Weight = OldTable.Weight 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:19:05.340

如果您想从旧数据中获取数据，并将其插入新数据，请使用带有 select 语句的插入查询。它将插入所有匹配的记录。您不一定必须使用 php，只需使用 mysql 查询：

```
INSERT INTO NewTableName (Field1, Field2, Field3, Weight)
SELECT Field1, Field2, Field3, Weight)
FROM OldTableName
WHERE Weight > 0 
```

请注意，字段的顺序必须匹配。

# sockets - 在读取处理程序上释放的 Boost 绑定对象

> ID：15439382
> 
> 赞同：0
> 
> 时间：2013-03-15T18:11:58.547
> 
> 标签：sockets, boost-asio, boost-thread

我正在使用 Boost asio 打开几个套接字我使用一个集合，该集合具有指向具有所有套接字信息的自定义类的共享指针。这个类也有这样的`handle_read`功能，`async_receive`因为我需要对每个接收做不同的事情，我不能绑定额外的参数。

我遇到的问题是，当我关闭套接字时，我删除了对该指针的最后一个引用，因此在`handle_read`没有任何有效引用的情况下调用该函数，然后代码就中断了。

```
void SocketsAPI::do_close(const SocketInfo socket)
{
    log("do_close");
    if (!socket.m_socket || !socket.m_socket->is_open()) {
        return;
    }   
    boost::system::error_code errorcode;
    socket.m_socket->shutdown(boost::asio::ip::tcp::socket::shutdown_both, errorcode);
    if (errorcode) {
        trace("Closing failed: ", errorcode.message());
    }
    socket.m_socket->close(errorcode);
    if (errorcode) {
        trace("Closing2 failed: ", errorcode.message());
    }
    mapType::iterator iter = sockets.find(socket.key);
    if (iter != sockets.end()) {
        sockets.erase (iter);
    }
    log("do_close end");
} 
```

事实上，我不希望`handle_read`调用该函数，但我无法避免它，而且在多线程实现（多个线程调用`io_service.run()`）中更糟糕的是，`handle_read`将在关闭仍在处理时调用，因此“this”对象将在处理程序的任何点被释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:39:30.693

听起来您很接近，但还不太了解通常使用 Boost.Asio 异步方法在应用程序中完成的共享所有权语义。您需要`shared_from_this()`在[绑定回调](https://stackoverflow.com/a/13071142/283302)处理程序时使用，以确保它们在异步操作期间保持在范围内。`io_service::~io_service()`文档很好地[解释了这一点](https://stackoverflow.com/a/4099375/283302)。

当您需要提前停止异步操作时，请[取消它](https://stackoverflow.com/a/4546693/283302)`SocketsAPI::do_close()`而不是在您的方法中关闭套接字。然后您的回调将获得一个错误代码[`boost::asio::error::operation_aborted`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/error__basic_errors.html)，您可以使用该代码做出适当的反应。

* * *

> 将`handle_read`在关闭仍在处理时调用，因此“this”对象将在处理程序的任何点被释放。

这确实是一个单独的问题，您需要使用`strand`s 来确保在处理程序回调中[独占访问数据结构。](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/io_service__strand.html)

# java - 正则表达式提取每个非空间组

> ID：15439385
> 
> 赞同：1
> 
> 时间：2013-03-15T18:12:13.760
> 
> 标签：java, regex

**输入：**

```
2 43: 72: Y 
```

**期望的输出：**

```
ArrayList<String> resultArr = { "2", "43:", "72:", "Y" }; 
```

我当前创建这个数组的代码是......

```
String stateString = "2 43: 72: Y";
String stateStringFinder = "\\s*(\\S+)(\\s*(\\S+))+";
Pattern stateStringPattern = Pattern.compile(stateStringFinder);

Matcher matcher = stateStringPattern.matcher(stateString);

while(matcher.find()) {
    resultArr.add(matcher.group());
} 
```

但是 resultArr 的内容是`{ "2 43: 72: Y" }`，这表明我的正则表达式过于贪婪，并且匹配整个字符串。

我怎样才能将它分解，以便它放入 中的每个“子字符串” `stateString`，同时忽略空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:13:58.643

使用[`String.split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
String stateString = "2 43: 72: Y";
String[] resultArray = stateString.split("\\s");
List<String> resultList = Arrays.asList(resultArray); 
```

当您有多个连续空格时，您可能希望将其视为`"\\s+"`分隔符，而不是简单地`"\\s"`，以避免结果中出现空字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:15:49.750

试试这个。

```
String abc= "2 43: 72: Y";
List<String> strList = Arrays.asList(abc.split("\\s")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:15:51.830

更容易的是：

```
List<String> list = Arrays.asList(stateString.split(" ")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T18:19:10.517

解决您的查询的示例代码：

```
public class RegexTester {
public static void main(String[] args) {
    String input = "2 43: 72: Y";

    Pattern pattern = Pattern.compile("[^\\s]+");
    Matcher matcher = pattern.matcher(input);
    List<String> list = new ArrayList<String>();
    while (matcher.find()) {
        list.add(matcher.group());
    }
    System.out.println(list);
} 
```

}

# ios - 目标 C. 追踪一个无法识别的选择器

> ID：15439394
> 
> 赞同：2
> 
> 时间：2013-03-15T18:12:48.953
> 
> 标签：ios, objective-c, xcode, selector, unrecognized-selector

我正在处理一个相当复杂的项目。我收到与无法识别的选择器相关的错误。通常我可以快速追踪这些问题，通常只使用逻辑，否则使用 NSLog 或断点。我很难找到这个。

追踪这个问题的有条不紊的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T18:14:16.820

方法很多，最简单的就是设置异常断点。
![在此处输入图像描述](../Images/612de97929f5dcd6fa6947396adfc7f2.png)

# c++ - 我的 C++ 代码有什么问题？

> ID：15439395
> 
> 赞同：0
> 
> 时间：2013-03-15T18:12:55.807
> 
> 标签：c++

在我的书中有一个示例如何复制字符串（2 个指针）。我复制了整个代码，但是当我在终端中启动程序时，它显示*“分段错误（核心转储）”* >。<

这段代码有什么问题？：

```
#include <iostream>
#include <string>

using namespace std;

void cpy(char* p,const char* q){

    while(*p++ = *q++) ;
}

int main(){

    char* hello;

    cpy(hello, "Whazzap");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:14:01.627

您的程序具有**Undefined Behavior**，因为您使用的是未初始化变量的值（`hello`在本例中为指针）。

您可能打算`hello`成为一个字符数组。如果是这样，请以这种方式声明：

```
char hello[SIZE]; 
```

哪里`SIZE`是一个足够大的编译时常量，以确保数组能够保存您想要复制到其中的所有字符。如果您的目标只是使用字符串文字初始化数组，您可以简单地执行以下操作：

```
char hello[] = "Whazzap"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T18:15:05.147

您的指针`hello`未初始化。这意味着它指向某个随机内存位置，您尝试在`cpy`函数中写入该位置。你基本上是在写你不允许写的地方。

您需要通过创建`char`数组来为副本分配空间，但您必须确保有足够的空间来复制整个字符串。

既然您似乎正在学习，我将指出这种方法充满危险：无论您做什么，都必须确保不会超出您创建的存储范围进行写入。请放心，C++ 标准库提供了有用的类来安全地处理此类问题，因此这应该只是学习过程的一部分，而不是您在实际编程中所做的事情。

# java - 如何确定井字游戏 (Java) 中的获胜者

> ID：15439398
> 
> 赞同：1
> 
> 时间：2013-03-15T18:13:00.163
> 
> 标签：java

对于我的作业，我必须创建一个方法来检查 TicTacToeArray 变量并确定是否有人获胜。特别是，如果游戏板的任何列、行或主对角线完全被 Xs 或 Os 填充，则获胜。当检测到获胜者时， scoreTTT() 应将获胜者变量设置为“X”或“O”，具体取决于谁获胜。如果 X 或 O 均未获胜，则获胜者变量应为“*”。

到目前为止，我有这个：

公共课井字游戏{

```
public static void main(String[] args){

}

//state variables
static char[][] TicTacToeArray;  //the game board
static int step = 0;             //the current step number
static char winner = '*';        //who has won (X/O/*)        *=nobody
static char player = 'X';        //whose turn it is (X/O)   *=nobody

//Creates a game board of size n x n and resets state variables to
//their initial conditions for a new game.
public static void startTTT(int n){
    TicTacToeArray = new char [n][n];
    for(int i = 0; i < n; i++){
        for(int j=0; j < n; j++){
            TicTacToeArray [i][j] = '*';
    }
}

step = 0;
winner = '*';
player = 'X'; 
```

}

```
public static void displayTTT(){
    String row;

    int n = TicTacToeArray.length;

    //now I'm priting row0
    row = "       Column";
    System.out.println(row);

    //row 1
    row = "       ";
    for (int i=0; i<n; i++){
        row = row + " "+ i;

    }
    row = row + "  TicTacTow";
    System.out.println(row);

    //row 2
    row = "      +";
    for (int i=0; i<n; i++){
    row = row + "--";

    }

    System.out.println(row +"  Step = " + step);

    //row 3
    row = "    0 |" ; 
    for (int i=0; i<n; i++){
    row = row + " " + TicTacToeArray [0][i];
    }
    System.out.println(row + "  Player = " + player);

    //row 4
    row = "Row 1 |";
    for (int i=0; i<n; i++){
    row = row + " " + TicTacToeArray[1][i];
    }
    System.out.println(row);

    //row 5
    row = "";
    for( int i=2;i<n;i++){
    row = "    " + i + " |" ;
        for( int j=0; j < n; j++){
    row += " " + TicTacToeArray[i][j];
    if (j == n)
    System.out.println(row);

    }
    if(i == n-1)
    row += "  Winner = " + winner;
    System.out.println(row);
    }

}

//Updates a position on the game board, increments the step counter,
//and toggles the player from X to O (or vica versa). This method should
//test for invalid input (see assignment document) before changing
//the game state. If no error is encountered, it performs the update
//and returns true. Otherwise it returns false.
public static boolean updateTTT(char sym, int row, int col){
    if (sym != 'X' && sym != 'O'){
            return false;
    }
    if(row < 0 || col < 0 || row >= TicTacToeArray.length || col >= TicTacToeArray.length){
            return false;
    }   

    if (TicTacToeArray[row][col] == '*')
    TicTacToeArray [row][col] = sym;
    else
    return false;

    // toggle player
    for(;;){
    if (player =='X'){
    player = 'O';
    break;
    }
    if(player == 'O'){
    player = 'X';
    break;
    }
    }
    //inc step count
    step +=1;

    return true;
} 
```

//（这被注释掉了/到目前为止我对这个方法有什么，但是其余的代码应该可以工作） //public static void scoreTTT(){

```
//for(int i=0; i < TicTacToeArray.length; i++){
    //for(int j =0; j < TicTacToeArray.length; j++)
    //if (TicTacToeArray[i][j] ==  TicTacToeArray[i][j+1])

} 
```

我想我需要创建 3 个不同的嵌套循环来检查对角线和行/列，它们还必须检查任何数组大小（例如 4 x 4）的完整行/列。我只是不确定如何我会让循环穿过整个行/列/对角线。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:19:30.907

你是对的，你有三种不同的情况。

首先检查所有列，然后检查所有行，然后检查对角线。

第一个应该是一个循环（对于每一列，检查每一行）。第二个应该像第一个（只是反转列和行）。第三种情况很简单，你只有两个选项，从左上到右下，从右上到左下。只要确保所有相应的框都相等。

我会给出更具体的细节，但这是家庭作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:41:52.283

```
char[][] board = new char[][] {
        {'x', 'o', 'x'},
        {'x', 'o', 'o'},
        {'o', 'o', 'x'}
};

//check rows/cols
for (int i = 0; i < board.length; i++) {
    String row = "";
    String col = "";
    for (int j = 0; j < board.length; j++) {
        row += board[i][j];
        col += board[j][i];
    }
    System.out.println("Row: " + row);
    System.out.println("Col: " + col);
}

//check diagonals -- the logic in this loop could be folded into the previous one
String diag1 = ""; //top-left to bottom-right
String diag2 = ""; //bottom-left to top-right
for (int i = 0; i < board.length; i++) {
    diag1 += board[i][i];
    diag2 += board[board.length-i-1][board.length-i-1];
}
System.out.println("Diag1: " + diag1);
System.out.println("Diag2: " + diag2); 
```

您将必须弄清楚如何检查获胜者。

# java - Java - 使不同的类打印到客户端而不是 System.out

> ID：15439402
> 
> 赞同：1
> 
> 时间：2013-03-15T18:13:05.420
> 
> 标签：java, class, networking, io

我正在将一个有效的单人游戏转换为跨网络运行。

这是一个在终端上运行的简单游戏。它只是程序的文本输入/文本输出。

它有几个类，其中大部分打印到 System.out 或 System.err

但我想将这些消息发送到客户端，而不是在服务器系统上打印它们。

当套接字 i/o 在一个类的主线程中进行时，我该怎么做？

基本上我如何从其他类访问它？

```
 public static void main(String[] args) throws IOException {

    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(45444);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 45444.");
        System.exit(1);
    }

    Socket clientSocket = null;
    try {
        clientSocket = serverSocket.accept();
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }

    PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(new InputStreamReader(
            clientSocket.getInputStream()));
    String inputLine;
    String outputLine; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:17:23.413

您可以使用`System.setOut()`and`System.setErr()`将 STDOUT 和 STDERR 重定向到任意输出流（在您的情况下为网络 I/O 流）。

# java - 接近传感器 - 静音呼叫应用程序

> ID：15439405
> 
> 赞同：0
> 
> 时间：2013-03-15T18:13:07.033
> 
> 标签：java, android, android-activity, android-sensors, proximitysensor

我正在尝试构建一个 android 应用程序，当一个人在电话上挥动他/她的手时，它会在电话开始使用接近传感器振铃/振动时使呼叫静音。

我是android开发的新手。我试图让应用程序检查手机是否处于 State-Ring 状态。如果是，则应用程序检查接近传感器的值是否 ==0（接近值）。如果接近传感器的值为 0，则意味着传感器在振铃广告期间被覆盖，因此它应该使呼叫静音。但它仍处于振铃状态。

我认为问题在于 ServiceReceiver 仅在电话开始响铃时检查接近传感器的值。如果此时传感器值不为零，则手机不会静音。那么如何让它在振铃或来电期间检查接近传感器值的变化，以便一旦传感器值变为零，呼叫就会静音

第一类“mainactivity”包含接近传感器的代码。

```
package example.ringcheck;

import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.media.AudioManager;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity implements SensorEventListener {
static TextView proxText;
SensorManager sm;
Sensor proxSensor;
static float proxValue = 8;
// static boolean muteCall = false;
private AudioManager amanager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    sm = (SensorManager) getSystemService(SENSOR_SERVICE);
    proxSensor = sm.getDefaultSensor(Sensor.TYPE_PROXIMITY);
    proxText = (TextView) findViewById(R.id.ProximityTextView);

    sm.registerListener(this, proxSensor, SensorManager.SENSOR_DELAY_NORMAL);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub

}

@Override
public void onSensorChanged(SensorEvent event) {

    // TODO Auto-generated method stub
    proxText.setText(String.valueOf(event.values[0]));
    proxValue = event.values[0];
    Log.d("SENSOR VALUE", "********" + proxValue + "*******");

    }

} 
```

第二类“ServiceReceiver”包含接近传感器的代码。

```
package example.ringcheck;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;
import android.telephony.TelephonyManager
import android.util.Log;

public class ServiceReceiver extends BroadcastReceiver {

private AudioManager amanager;
// static boolean isRinging = false;

public void onReceive(Context context, Intent intent) {

    if (intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(
            TelephonyManager.EXTRA_STATE_RINGING)) {
        // isRinging = true;
            if (MainActivity.proxValue == 0) {
                amanager = (AudioManager) context
                        .getSystemService(Context.AUDIO_SERVICE);
                amanager.setRingerMode(0x00000000);
                // isRinging = false;

            }

    Log.d("MPR", "Its Ringing");

    }
}

} 
```

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:39:29.163

代替

```
amanager.setRingerMode(0x00000000); 
```

尝试

```
amanager.setStreamMute(AudioManager.STREAM_RING, true); 
```

# wpf - 带绑定的 WPF 默认值（使用样式触发器）

> ID：15439407
> 
> 赞同：2
> 
> 时间：2013-03-15T18:13:12.203
> 
> 标签：wpf, wpf-controls

我是 WPF 的新手，所以请多多包涵。我的 WPF 窗口上有一个 ComboBox，ItemSource 属性绑定到字符串列表属性（Countries），SelectedItem 绑定到字符串属性（SelectedCountry）。这两个属性都在后面的代码中 - 我将 DataContext 设置为“this”（即 Window）。

组合框 xaml 是：

```
<ComboBox Name="CountryComboBox" 
    VerticalAlignment="Center" 
    Width="200"
    ItemsSource="{Binding Path=Countries, Mode=OneTime}"
    SelectedItem="{Binding Path=SelectedCountry, Mode=TwoWay}">
</ComboBox> 
```

我希望在未选择项目时显示默认的“- Please Select -”选项，因此我在 App.xaml 中放置了以下 xaml：

```
<Style TargetType="ComboBox">
    <Style.Triggers>
        <Trigger Property="SelectedItem" Value="{x:Null}">
            <Setter Property="IsEditable" Value="true" />
            <Setter Property="IsReadOnly" Value="true" />
            <Setter Property="Text" Value="- Please Select -" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

当我的窗口首次显示时，组合框确实具有预期的“-请选择-”文本。然后当我在组合框中选择一个值时，SelectedCountry 会被适当地填充，但是当我将“null”分配给 SelectedCountry 属性时，组合框仍然具有相同的选定国家/地区，而我希望它返回“-请选择——”。我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T23:08:24.090

当 a为空时，不修改`ComboBox`并简单地将 a 覆盖在 a`TextBlock`上可能是一个更好的选择。`ComboBox``SelectedItem`

`ComboBox`只需将and a包装在a 中并`TextBlock`在a上`Grid`设置 a以检查是否为 null 并切换其`DataTrigger``TextBlock``SelectedItem``Visibility`

例子：

```
 <Grid> 
        <ComboBox x:Name="combo" ItemsSource="{Binding Countries}" SelectedItem="{Binding SelectedItem}" />
        <TextBlock x:Name="textblock" Text="- Please Select -" Margin="5,3,0,0" IsHitTestVisible="False">
            <TextBlock.Style>
             <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Hidden" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding SelectedItem,ElementName=combo}" Value="{x:Null}">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
    </Grid> 
```

结果：

![在此处输入图像描述](../Images/64c4af374a0f43c5075a6dc4bbfd2060.png)

![在此处输入图像描述](../Images/503035158e75e157a0ed808354b7cbcc.png)

![在此处输入图像描述](../Images/f64e037beac18b7eb619dfda49394581.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:17:04.153

您需要在 Country 列表中插入一条记录，其值为 null 且名称为“- Please Select -”。

或者，我想您可以扩展 ComboBox 控件并编写自己的控件，这样您就可以在列表中指定空值，而不必将记录放入国家选择中。

但是在这两者中，向国家添加记录要容易得多。

# .net - 如果 DNS 条目绑定到多个地址，.NET HttpWebRequest 使用哪个 IP

> ID：15439408
> 
> 赞同：2
> 
> 时间：2013-03-15T18:13:13.460
> 
> 标签：.net, dns, amazon-web-services, load-balancing, system.net.httpwebrequest

我正在使用 System.Net.HttpWebRequest 来访问负载均衡器后面的 AWS 中托管的 API 应用程序。LB 有 6 个实例，3 个在 2 个不同的 AZ。因此，LB 的 DNS 条目有 2 个 IP 地址（每个 AZ 1 个）。

当我运行我的 C# 应用程序时，Web 请求似乎在单个 AZ 内的 3 个服务器之间完美平衡。它没有击中第二个可用区。

在我看来，WebRequest 对象只命中绑定到 LB DNS 条目的第一个 IP，这就是流量平衡的原因，但仅在单个 AZ 中。

那有意义吗？如何让 WebRequest 将其他 IP 绑定到 DNS 条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:39:07.863

HttpWebRequest 始终使用列表中的第一个 IP 地址。Route53 以随机顺序从单个负载均衡器返回 IP 地址，这有助于平衡 AZ 之间的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:16:22.510

当 C# 进行 DNS 查找（通过 .NET）时，它会缓存该结果。这意味着它将继续使用它首先返回的任何 IP。

看看[如何清除 System.Net 客户端 DNS 缓存？](https://stackoverflow.com/questions/7277582/how-do-i-clear-system-net-client-dns-cache)- 这可能会引导您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T19:09:25.093

我认为您遇到了 AWS ELB 的弱点之一。来自单个 IP 的所有请求都将路由到一个 AZ。这使得 elb 对于具有大量流量但仅来自小 ip 子集的 Web 服务存在问题。

# javascript - 将参数传递给 Raphael.js 中的 .mouseover 函数

> ID：15439410
> 
> 赞同：2
> 
> 时间：2013-03-15T18:13:23.020
> 
> 标签：javascript, raphael

我在节点数组上有一个循环，我试图将每个节点的名称显示为屏幕上某些 Raphael 元素的工具提示。

这是我的代码：

```
for(var i=0; i<nodes.length; i++){
       paper.rect(nodes[i].getX(), nodes[i].getY(), nodes[i].width, nodes[i].getHeight())
            .attr({fill:nodes[i].getColor(), "fill-opacity": 1}).mouseover(function () {
                    this.animate({"fill-opacity": .4}, 500);
                    this.attr({title:nodes[i].name});
            }).mouseout(function () {
                this.animate({"fill-opacity": 1}, 500);
            }).drag(move, dragstart, dragend);
    } 
```

但是，.mouseover 函数中的节点[i] 是未定义的。（为什么？！）我可以像 .mouseover(nodes[i]) 一样将它传递给函数吗？那我该怎么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:08:36.480

您的`mouseover`函数在循环完成后被调用，因此`i`不再存在。一个简单灵活的解决方案是利用 Raphael 的`data()`方法来存储您需要的东西：

```
paper.rect(nodes[i].getX(), nodes[i].getY(), nodes[i].width, nodes[i].getHeight())
    .attr({fill:nodes[i].getColor(), "fill-opacity": 1})
    .data({"title": nodes[i].name})
    .mouseover(function () {
          this.animate({"fill-opacity": .4}, 500);
          this.attr({title: this.data("title") });
    }).mouseout(function () {
          ... 
```

当然，您可以根据自己的喜好更改此设置：

```
.data({"index": i})
...
this.attr({title: nodes[this.data("index")].name }); 
```

或者，如果您需要多个属性，只需存储整个对象本身

```
.data({"node": nodes[i]})
...
this.attr({title: this.data("node").name }); 
```

这一切都归结为最适合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T00:22:38.467

这是一个通过闭包将额外的东西传递给事件处理程序/回调的 javascript 技巧：

```
paper.rect(nodes[i].getX(), nodes[i].getY(), nodes[i].width, nodes[i].getHeight())
    .attr({fill:nodes[i].getColor(), "fill-opacity": 1})
    .data({"title": nodes[i].name})
    .mouseover(handleMouseOver(dataYouWant))
    .mouseout(function () {
    ...

function handleMouseOver(dataYouWant) {
    return function(){
      // use dataYouWant in your code
      this.animate({"fill-opacity": .4}, 500);
      this.attr({title: this.data("title") });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:21:56.243

事件处理程序中的范围更改。尝试在 for 循环之外声明和定义节点和 mouseover/out 函数。然后使用鼠标事件的函数名称： .mouseover(myFunctionDefinedOutsideForloop);

```
var myFunctionDefinedOutsideForloop = function(){
    this.animate({"fill-opacity": .4}, 500);
    this.attr({title:nodes[i].name});
} 
```

# jquery - 在 jquery 插件中返回表单语句

> ID：15439411
> 
> 赞同：0
> 
> 时间：2013-03-15T18:13:25.837
> 
> 标签：jquery

我看到下面的代码，它有一个语句 return $p。这里的return $p 语句有什么意义？我想知道为什么有人会返回一个form 语句。

```
ssoWelcome: (function () {
    var $p = $('<form class="full controls"><p>Welcome <span class="username"></span>!</p><input type="submit" value="Continue" name="welcome" class="welcomeBtn"></form>');
    $p.submit(function (e) {
        C.options.postAction('redirect');
        preventDefault(e);
        return false;
    });
    return $p;
}()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:32:51.323

它不返回表单语句。它返回一个 jQuery 对象，该对象又包含由函数生成的 DOM 对象，该对象又被分配为`ssoWelcome`某个对象中键的值。

简而言之，编写这段代码的人想要一次做很多事情：创建一个 Form 的 DOM 对象，为其创建一个 jQuery 包装器，在 上分配一个动作`submit`，最后存储一个 jQuery 包装的表单 DOM 对象的句柄以供将来使用参考。存储对生成对象的引用有很多原因，例如想要将对象添加到当前 DOM，在某些情况下禁用它，甚至可能完全删除它。

# sql-server - 有没有办法在我的 C# 应用程序中复制无法读取内存的错误消息？

> ID：15439413
> 
> 赞同：2
> 
> 时间：2013-03-15T18:13:27.617
> 
> 标签：sql-server, memory, sql-server-2005, c#-2.0

让我预先声明，我非常感谢在这个问题上提供的任何帮助。

我有一个 C# (2.0) 应用程序。这是一个相对简单的应用程序，它基于作为命令行参数传递的 XML 文件执行存储过程。

我们用它作为调用不同存储过程的工具。这个应用程序会做一些日志记录，并且在大多数情况下工作得很好。

应用程序从 XML 文件中读取存储过程名称和参数。它设置了一个连接字符串和 SQL 命令对象 (System.Data.SqlClient.SqlCommand)。

然后它使用 ExecuteReader 方法运行存储过程。

不幸的是，在少数情况下，此应用程序会产生以下错误：

```
 “Application popup: StoredProcLauncher.exe - Application Error : The instruction
 at "0x7c82c912" referenced memory at "0x00000000". The memory could not be "read” 
```

此错误已出现在多个服务器上，因此它必须是代码问题。

似乎当我们的生产服务器滚动一定数量时，它会发出此内存错误。

问题是我在开发中没有看到这个问题。我无法复制它，所以我被卡住了。

有没有办法模拟这个错误。我可以以某种方式填充本地 PC 上的内存以尝试复制此错误吗？

有谁知道一些可能导致此类错误的常见编码问题？

有人有绳子可以借吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:21:08.123

一种方法是将有问题的代码包装在 try catch 块中，并将堆栈跟踪和错误消息写入 Windows 应用程序事件日志、文本文件、电子邮件等。

这将为您提供一些行号和其他信息。

另请注意，您可能需要在调试模式下部署它，或者至少使用应用程序 exe/dll 复制 .​​pdb 文件，以便它可以获取调试符号。我不记得它是如何工作的，但我认为当你在发布模式下部署时，你可能会丢失一些有价值的调试信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:28:35.043

> “0x7c82c912”处的指令引用了“0x00000000”处的内存

这是[访问冲突](http://msdn.microsoft.com/en-us/library/system.accessviolationexception.aspx)：

> 当代码尝试读取或写入尚未分配或无权访问的内存时，在非托管或不安全代码中会发生访问冲突。这通常是因为指针的值不正确。

为什么你的程序有非托管/不安全的代码？为了做你描述的事情，它不需要本机代码。

唉，代码崩溃了，现在不是想知道如何最终调用本机代码的时候。要解决这个问题，您将不得不捕获转储并分析转储。请参阅[捕获应用程序故障转储](http://blogs.technet.com/b/askperf/archive/2007/06/15/capturing-application-crash-dumps.aspx)。有专门针对此的工具，例如[breakpad](https://code.google.com/p/google-breakpad/)。还有一些服务可以帮助您收集和跟踪应用程序产生的崩溃，例如[crittercism.com](https://www.crittercism.com/)或[AirBrake](https://airbrake.io/pages/home)。我什至为自己创建了一个并公开了[bugcollect.com](http://bugcollect.com)。

# vb.net - 尝试从 VB.Net 中的 Excel 读取数据时出错

> ID：15439415
> 
> 赞同：0
> 
> 时间：2013-03-15T18:13:30.390
> 
> 标签：vb.net, excel, oledb

我已经尝试了许多不同的方法来构建一个允许用户选择一个 Excel 文件然后从该文件中读取数据的页面。到目前为止，我得到的只是错误。

我最新的错误是：“无法更新。数据库或对象是只读的。”

这是我的代码：

```
Protected Sub Upload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Upload.Click
    If (testFile.HasFile) Then
        Dim ds As DataSet
        Dim strFileType As String = System.IO.Path.GetExtension(testFile.FileName).ToString().ToLower()

        Dim MyCommand As System.Data.OleDb.OleDbDataAdapter
        Dim MyConnection As System.Data.OleDb.OleDbConnection
        MyConnection = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & testFile.FileName & ";Extended Properties=""Excel 12.0;HDR=Yes;IMEX=2")

        ' Select the data from Sheet1 ([in-house$]) of the workbook.
        MyCommand = New System.Data.OleDb.OleDbDataAdapter("select * from [Sheet1$]", MyConnection)

        ds = New System.Data.DataSet
        MyCommand.Fill(ds) - __This is where the error points.__
        grvExcelData.DataSource = ds.Tables(0)

    End If
End Sub 
```

关于为什么要抛出这个的任何想法？我现在只是想将数据输出到gridview。稍后我将需要遍历每个单元格，但我一次尝试一步。

另外，如果有更好的方法可以做到这一点，我完全愿意接受！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:26:22.650

但是`strFileType`是您要打开的文件的扩展名。（对于 filename.xls 的 IE，它只是 .xls 部分）
您可能想要完整的文件名。

```
 MyConnection = New System.Data.OleDb.OleDbConnection( _
    "provider=Microsoft.Jet.OLEDB.4.0; " & _
    "data source=" & testFile.FileName & "; " & _
    "Extended Properties=Excel 8.0") 
```

现在，对于“更好的部分”：
您不会关闭连接，这永远不会发生。一个简单的 Using 块将节省您

```
 Using MyConnection = New OleDbConnection( _
        "provider=Microsoft.Jet.OLEDB.4.0; " & _
        "data source=" & strFileType & "; " & _
        "Extended Properties=Excel 8.0")

        ' Select the data from Sheet1 ([in-house$]) of the workbook.
        Using MyCommand = New OleDbDataAdapter("select * from [Sheet1$]", MyConnection)
            Dim ds = New System.Data.DataSet
            MyCommand.Fill(ds) 
        End Using
    End Using 
```

我建议添加 Import 指令以避免每个 OleDb 变量的命名空间前缀过长

# java - JavaFX 和 Swing --- 找到中间立场？

> ID：15439421
> 
> 赞同：2
> 
> 时间：2013-03-15T18:13:48.307
> 
> 标签：java, swing, javafx-2

我对 Swing 很一般，刚开始学习 JavaFX。关于使用哪一个，我对 SO 进行了一些回答，但我仍然无法下定决心。

有没有可能两全其美？？

就像，使用 JavaFX 来提供一些视觉上吸引人的图形，并在我想要的时候向 JavaFX 添加一些 Swing ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:31:20.097

您可以通过[JFXPanel](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)控件[在 Swing 应用程序中使用 JavaFX 。](http://docs.oracle.com/javafx/2/swing/jfxpub-swing.htm)请参阅[SwingInterOp](http://www.oracle.com/technetwork/java/javafx/samples/index.html)示例。您还可以从复杂的基于 Swing 的平台（例如[NetBeans RCP](https://blogs.oracle.com/geertjan/entry/deeper_integration_of_javafx_in) ）内部使用 JavaFX 。

JavaFX/Swing 集成的当前限制是您可以将 JavaFX 组件嵌入到 Swing 应用程序中，但不能将 Swing 组件嵌入到 JavaFX 应用程序中。 [JavaFX 嵌入支持](http://javafx-jira.kenai.com/browse/RT-12100)中的 RT-12100 Swing 当前计划用于 Java 8。

如果您要开发一个全新的新应用程序，我建议您选择一种技术或另一种技术并坚持使用该技术，或者至少将集成点保持本地化并且很少且相距甚远。这两个框架都很大并且需要时间来学习，而且您将避免任何集成难题，例如需要注意 Swing 处理是在 Swing Event Dispatch 线程上完成的，而 JavaFX 处理是在 JavaFX 应用程序线程上完成的。

JavaFX 还与[SWT](http://docs.oracle.com/javafx/2/swt_interoperability/jfxpub-swt_interoperability.htm)集成，该集成目前比 JavaFX/Swing 集成更简单（因为只需担心一个 GUI 线程）。

这是来自 Oracle 的 JavaFX/Swing 互操作示例的屏幕截图：

![swinginterop 映像](../Images/c1f92af8ecb14cb21623946722329931.png)

> 关于使用哪一个，我对 SO 进行了一些回答，但我仍然无法下定决心。

我建议不要这样做，而是选择一个小型应用程序并在 Swing 和 JavaFX 中从头开始实现它，然后看看你喜欢哪个。最好花点时间，因为亲身体验无可替代 - 然后，如果您仍有问题（希望更具体和更有针对性），请返回 StackOverflow 进行研究或提问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T09:21:20.340

It depends on your motivation for learning them. If you're looking primarily to boost your CV in the near future and become attractive to businesses, then (for the moment at least) there's many more applications out there written in Swing than JavaFX, purely because the latter is a much newer toolkit.

However, if you're thinking more long term or just want the best tool for the job, personally I find JavaFX to offer more flexibility, be much easier to code in an aesthetically pleasing way, and easier to learn as well (the API behind it is just much nicer.) The only thing against it at the moment is that there's some features that I'd really like to be included, [but aren't yet](https://stackoverflow.com/questions/12717969/javafx-2-custom-popup-pane) (again, naturally this is what you get by going for the newer toolkit.)

I'd also advise against mixing the two. I'm currently involved in two projects using JavaFX, one entirely JavaFX based and the other a mixture of FX and swing. The latter is much more fiddly to maintain, primarily because of the difference in dispatch threading.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T15:06:31.327

正如之前的海报所述，您现在可以在 Swing 应用程序中使用 JavaFX。但是，既然 Oracle 已经宣布 JavaFX 是 Java 桌面的未来，为什么不直接学习它。我试图让两者都保持最新，这是一件苦差事。我计划在未来专门专注于 JavaFX——减少自己困惑的机会。

也就是说，JavaFX 似乎仍然不是 JDK 的成熟成员，尤其是在与其他语言结合使用时，例如 Clojure。根据 JavaFX 版本，需要通过不同的机制将其拉入构建工具。但是随着每个版本的发布，这种情况正在变得更好。

# java - 在 src 目录下找不到文件和图像

> ID：15439429
> 
> 赞同：1
> 
> 时间：2013-03-15T18:14:25.150
> 
> 标签：java

在我的程序中，我在 src 目录下列出了三个文件夹：文件、声音、图像。我不确定为什么我的代码没有检测到。当我运行程序时，我收到了这条消息：“java.io.FileNotFoundException: files\7.txt (The system cannot find the path specified)”。我在这里附上了图片。请帮忙。

下面是我的代码：

```
package riddle;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.net.URL;
import java.util.Random;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;
import javax.swing.BorderFactory;
import javax.swing.ButtonGroup;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.border.Border;
import javax.swing.border.CompoundBorder;

public class Math_Riddle extends JFrame implements ActionListener
{
/**
*
*/
private static final long serialVersionUID = 1L;
JLabel lblQuestion;
JLabel lblImage;
JButton bOK;
JButton bExit;
JPanel radioPanel;
JPanel panBottom;
JRadioButton[] radioButton;
String [] store ;
ButtonGroup bg;
JButton bNext;
JPanel mainPanel;
JPanel pRight;
JLabel lblCorrect;
JLabel lblWrong;
int vCorrect = 0;
int vWrong = 0;
public Math_Riddle()
{
mainPanel = new JPanel(new BorderLayout());
buildingGUI();
listAllFiles();
innitializeAllComponents();
int fileNumber = generateRandomNumber();
String filePath = "files/" + fileNumber + ".txt";
String strQuestion = readTextFile(filePath);
store = strQuestion.toString().split("!!!");
lblQuestion.setText("<html>" + store[0] + "</html>");
//I need to get the image and display at the center according
//to the fileNumber;
getTheImageAndDisplay(fileNumber);
assignRandomNumberToRadioButton(store[1]);
mainPanel.add(lblQuestion, BorderLayout.NORTH);
mainPanel.add(radioPanel, BorderLayout.WEST);
mainPanel.add(panBottom, BorderLayout.SOUTH);
mainPanel.add(lblImage, BorderLayout.CENTER);
mainPanel.setPreferredSize(new Dimension(640, 480));

this.getContentPane().add(mainPanel);
}

private void listAllFiles()
{
// TODO Auto-generated method stub
File file = new File(".");
for(String fileNames : file.list()) System.out.println(fileNames);
}

private void getTheImageAndDisplay(int fileNumber)
{
// TODO Auto-generated method stub
String filePath = "images/";
lblImage.setIcon(new ImageIcon(filePath + fileNumber + ".png"));
}

private void assignRandomNumberToRadioButton(String sAnswer)
{
// TODO Auto-generated method stub
int number  = Integer.parseInt(sAnswer.toString().trim());
System.out.println("number: " + number);
Random random = new Random();
int rand = random.nextInt(4); //This is the number of radioButton.
System.out.println("rand is: " + rand);
radioButton[rand].setText(sAnswer);

if(!radioButton[0].getText().equals(""))
{
    radioButton[1].setText("" +( number + 2));
    radioButton[2].setText("" + (number - 2));
    radioButton[3].setText("" + (number + 1));
}
else if(!radioButton[1].getText().equals(""))
{
    radioButton[0].setText("" +( number + 2));
    radioButton[2].setText("" + (number - 2));
    radioButton[3].setText("" + (number + 1));
}
else if(!radioButton[2].getText().equals(""))
{
    radioButton[1].setText("" +( number + 2));
    radioButton[0].setText("" + (number - 2));
    radioButton[3].setText("" + (number + 1));
}
else if(!radioButton[3].getText().equals(""))
{
    radioButton[1].setText("" +( number + 2));
    radioButton[2].setText("" + (number - 2));
    radioButton[0].setText("" + (number + 1));
}
}

/**
* Construct GUI.
*/
private void buildingGUI()
{
lblImage = new JLabel();
bNext = new JButton("Next");
lblQuestion = new JLabel();
bOK = new JButton("OK");
bExit = new JButton("Exit");
lblQuestion.setFont(new Font("Tahoma", Font.PLAIN, 12));
radioPanel = new JPanel();
panBottom = new JPanel();
panBottom.setLayout(new GridLayout(1, 2));
panBottom.add(bOK);
panBottom.add(bExit);
bg = new ButtonGroup();
radioPanel.setLayout(new GridLayout(4, 1));
radioButton = new JRadioButton[4];
radioButton[0] = new JRadioButton();
radioButton[1] = new JRadioButton();
radioButton[2] = new JRadioButton();
radioButton[3] = new JRadioButton();
radioPanel.setLayout(new GridLayout(10, 1));
radioPanel.add(radioButton[0]);
radioPanel.add(radioButton[1]);
radioPanel.add(radioButton[2]);
radioPanel.add(radioButton[3]);
radioPanel.add(new JLabel());
radioPanel.add(new JLabel());
radioPanel.add(new JLabel());
radioPanel.add(bNext);
radioPanel.add(new JLabel());
radioPanel.add(new JLabel());
bg.add(radioButton[0]);
bg.add(radioButton[1]);
bg.add(radioButton[2]);
bg.add(radioButton[3]);
pRight = new JPanel();
pRight.setLayout(new GridLayout(5, 2));
lblCorrect = new JLabel();
pRight.add(lblCorrect);
lblWrong = new JLabel();
pRight.add(lblWrong);
pRight.add(new JLabel("                   "));
pRight.add(new JLabel("                   "));
mainPanel.add(pRight, BorderLayout.EAST);
}

private int generateRandomNumber()
{
// TODO Auto-generated method stub
Random random = new Random();
int rand = random.nextInt(20);  //This is the number of Files in the system.
return rand;
}

private void innitializeAllComponents()
{
// TODO Auto-generated method stub
CompoundBorder border;
Border raisedbevel = BorderFactory.createRaisedBevelBorder();
Border loweredbevel = BorderFactory.createLoweredBevelBorder();
border = BorderFactory.createCompoundBorder( raisedbevel, loweredbevel);
lblQuestion.setFont(new Font("Tahoma", Font.PLAIN, 18));
lblQuestion.setBorder(BorderFactory.createLineBorder(Color.GREEN));
lblQuestion.setBorder(border);
radioPanel.setBorder(border);
pRight.setBorder(border);
panBottom.setBorder(border);
radioButton[0].setFont(new Font("Tahoma", Font.BOLD, 16));
radioButton[1].setFont(new Font("Tahoma", Font.BOLD, 16));
radioButton[2].setFont(new Font("Tahoma", Font.BOLD, 16));
radioButton[3].setFont(new Font("Tahoma", Font.BOLD, 16));
lblCorrect.setFont(new Font("Tahoma", Font.BOLD, 14));
lblCorrect.setForeground(Color.BLUE);
lblCorrect.setHorizontalAlignment(JLabel.CENTER);
lblWrong.setFont(new Font("Tahoma", Font.BOLD, 14));
lblWrong.setForeground(Color.red);
lblWrong.setHorizontalAlignment(JLabel.CENTER);
bNext.addActionListener(this);
}
@SuppressWarnings("resource")
private static String readTextFile(String fileName)
{
// TODO Auto-generated method stub
BufferedReader reader;
try
{
    reader = new BufferedReader(new FileReader(fileName));
    String line = null;
    StringBuilder  stringBuilder = new StringBuilder();
    String ls = System.getProperty("line.separator");
    try
    {
        while(( line = reader.readLine()) != null )
        {
            stringBuilder.append(line);
            stringBuilder.append(ls);
        }
    }
    catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }
    return stringBuilder.toString();
}
catch (FileNotFoundException e)
{
    // TODO Auto-generated catch block
    e.printStackTrace();
    return null;
}
}

@Override
public void actionPerformed(ActionEvent ae)
{
// TODO Auto-generated method stub
if(ae.getSource().equals(bNext))
{
    //if nothing selected, display a message,
    //else: get the answer and display.
    if(!radioButton[0].isSelected() && !radioButton[1].isSelected() &&
            !radioButton[2].isSelected() && !radioButton[3].isSelected())
    {
        JOptionPane.showMessageDialog(this,"Please select an Answer.", "Nothing selected",
                JOptionPane.OK_OPTION);
        return;
    }
    else //when user select an answer.
    {
        String strAnswer = "";
        if(radioButton[0].isSelected())
        {
            strAnswer = radioButton[0].getText().trim();
        }
        else if(radioButton[1].isSelected())
        {
            strAnswer = radioButton[1].getText().trim();
        }
        else if(radioButton[2].isSelected())
        {
            strAnswer = radioButton[2].getText().trim();
        }
        else if(radioButton[3].isSelected())
        {
            strAnswer = radioButton[3].getText().trim();
        }
        if(strAnswer.equals(store[1].trim()))
        {
            String strCorrect = lblCorrect.getText();
            if(strCorrect.equals(""))
            {
                strCorrect = "0";
            }
            vCorrect = Integer.parseInt(strCorrect);
            vCorrect = vCorrect + 1;
            lblCorrect.setText("" + vCorrect);
            playSound("correct");
        }
        else
        {
            String strWrong = lblWrong.getText();
            if(strWrong.equals(""))
            {
                strWrong = "0";
            }
            vWrong = Integer.parseInt(strWrong);
            vWrong = vWrong + 1;
            lblWrong.setText("" + vWrong);
            playSound("wrong");
        }
        int fileNumber = generateRandomNumber();
        String filePath = "files\\" + fileNumber + ".txt";
        System.out.println("filePath: " + filePath);
        String strQuestion = readTextFile(filePath);
        store = strQuestion.toString().split("!!!");
        lblQuestion.setText("<html>" + store[0] + "</html>");
        System.out.println("store[0] is: " + store[0]);
        System.out.println("store[1]" + store[1]);
        clearTextInAllRadioButtons();
        assignRandomNumberToRadioButton(store[1]);
        getTheImageAndDisplay(fileNumber);
    }
}
}

private void playSound(String sound)
{
// TODO Auto-generated method stub
try
{
    URL url = null;
    if(sound.equals("correct"))
    {
        url = this.getClass().getClassLoader().getResource("sound/ding.wav");
    }
    else if(sound.equals("wrong"))
    {
        url = this.getClass().getClassLoader().getResource("sound/buzz.wav");
    }
    AudioInputStream audioIn = AudioSystem.getAudioInputStream(url);
    // Get a sound clip resource.
    Clip clip = AudioSystem.getClip();
    // Open audio clip and load samples from the audio input stream.
    clip.open(audioIn);
    clip.start();
}
catch (UnsupportedAudioFileException e)
{
    e.printStackTrace();
}
catch (IOException e)
{
    e.printStackTrace();
}
catch (LineUnavailableException e)
{
    e.printStackTrace();
}
}

private void clearTextInAllRadioButtons()
{
// TODO Auto-generated method stub
radioButton[0].setText("");
radioButton[1].setText("");
radioButton[2].setText("");
radioButton[3].setText("");
bg.clearSelection();
}

/**
* @param args
*/
public static void main(String[] s)
{
Math_Riddle mr = new Math_Riddle();
mr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
mr.pack();
mr.setVisible(true);
}
} 
```

* * *

关于文件 file = new File(resource.toURI()); 这是我尝试过但仍然没有工作的方法：

```
URL url = null;
Random rand = new Random();
int random = rand.nextInt(19);
String filePath = "files/" + random + ".txt";
System.out.println("file: " + filePath);
url = this.getClass().getClassLoader().getResource(filePath);
System.out.println(url.toString().trim());
try
{
File file = new File(url.toURI());
}
catch (URISyntaxException e1)
{
// TODO Auto-generated catch block
e1.printStackTrace();
}
File folder = new File(".");
for(String fileNames : folder.list())
{
System.out.println(fileNames);
}
BufferedReader reader;
try
{
reader = new BufferedReader(new FileReader(filePath));
String line = null;
StringBuilder  stringBuilder = new StringBuilder();
String ls = System.getProperty("line.separator");
try
{
while(( line = reader.readLine()) != null )
{
stringBuilder.append(line);
stringBuilder.append(ls);
}
}
catch (IOException e)
{
// TODO Auto-generated catch block
e.printStackTrace();
}
}
catch (FileNotFoundException e)
{
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

以下是eclipse中的错误信息：

file: files/5.txt file:/C:/JavaProject/Tesing/bin/files/5.txt .classpath .project .settings bin images src java.io.FileNotFoundException: files\5.txt (系统找不到指定路径）在 java.io.FileInputStream.open(Native Method) 在 java.io.FileInputStream.(Unknown Source) 在 java.io.FileInputStream.(Unknown Source) 在 java.io.FileReader.(Unknown Source) 在 Testing .actionPerformed(Testing.java:72)

当我试图列出所有文件/文件夹时。它只列出了文件夹：bin、images、src....如上所示。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:35:04.720

您正在使用路径指定资源文件。仅当您实际上知道当前目录的完整路径或相对路径时，这才有效；例如，在另一个答案中建议以“src”开头。

但是，最好在构建中包含资源（无论是通过 IDE 构建还是通过 gradle 或 maven 等外部构建系统构建），以便将这些文件复制到类路径中（可能您已经这样做了） ）。在这种情况下，您可以使用 Java 类加载器检索资源，如下所示：

```
URL resource = getClass().getResource("/path/to/resource"); 
```

这里有几点注意事项：

1.  前导“/”指定类加载器应该从根包中搜索。如果省略，它将从您所在类的包中搜索相对。
2.  你得到的是一个 URL 而不是一个文件。很多时候，可以直接使用这些 URL，就像在`ImageIcon`您正在使用的构造函数中一样。此方法的另一个好处是，如果您的应用程序也打包在 jar 文件中，它也可以工作，因为这样 URL 将指向 jar 文件中的正确位置。但是，如果您*知道*它是一个文件，*并且*您需要文件引用，则可以像这样转换它：`File file = new File(resource.toURI());`.

编辑：以下是一个适用于丹尼的例子，基于他的“回答”帖子和一个例子。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.net.URISyntaxException;
import java.net.URL;

public class ResourceTest {

    public static void main(String[] args) throws IOException, URISyntaxException {
        new ResourceTest().test();
    }

    public void test() throws URISyntaxException, IOException {
        URL url = getClass().getClassLoader().getResource("files/1.txt");
        System.out.println("URL: " + url);

        File file = new File(url.toURI());
        System.out.println("FILE: " + file);

        File folder = file.getParentFile();
        System.out.println("FOLDER: " + folder);
        System.out.println("FOLDER LIST: ");
        for (String fileName : folder.list()) {
            System.out.println("  " + fileName);
        }

        System.out.println("FILE CONTENTS:");
        BufferedReader reader = new BufferedReader(new FileReader(file));
        String line = reader.readLine();
        while (line != null) {
            System.out.println(line);
            line = reader.readLine();
        }
    }
} 
```

产生以下输出：

```
URL: file:/home/steinar/Safe/source/private/out/production/files/1.txt
FILE: /home/steinar/Safe/source/private/out/production/files/1.txt
FOLDER: /home/steinar/Safe/source/private/out/production/files
FOLDER LIST: 
  1.txt
FILE CONTENTS:
This is
my test
text file 
```

# c# - 将上传的文件映射到不同的目录

> ID：15439430
> 
> 赞同：-1
> 
> 时间：2013-03-15T18:14:26.950
> 
> 标签：c#, asp.net

使用`AjaxFileUpload`

```
string path = Server.MapPath("~/Files/") + e.FileName; 
```

`asp.net.`此代码正在将文件上传到..中网站文件夹下的文件目录

我如何将上传的文件映射到不同的目录？

例如

组合框 -> 有两个选项

*   图片
*   文档。

如果用户选择图像，则上传的文件应移至图像文件夹 .. 与 Doc 类似。

如何为此编写代码`asp.net c#`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:36:10.850

您只需要一个条件来检查他们选择了哪个选项，然后相应地放置它们。以下代码假定目录存在，如果不是这种情况，那么您必须添加一些逻辑以在它们不存在的情况下创建它们。

```
 string path = System.String.Empty;
 if (image == true)
     path = Server.MapPath("~/Files/Images") + e.FileName;
 else
     path = Server.MapPath("~/Files/Docs") + e.FileName; 
```

更有可能您必须执行一些逻辑来根据文件扩展名对它们进行分组。另一种选择是为图像放置一个单选按钮，在用户提交图像的点击侦听器中，您可以检查是否设置了该选项（我的代码示例期待这样的东西）。

# parsing - 管道 attoparsec 中的“子解析器”

> ID：15439438
> 
> 赞同：5
> 
> 时间：2013-03-15T18:15:06.493
> 
> 标签：parsing, haskell, attoparsec, haskell-pipes

我正在尝试使用 Haskell 中的管道 attoparsec 解析二进制数据。涉及管道（代理）的原因是将读取与解析交错以避免大文件的高内存使用。许多二进制格式基于块（或块），它们的大小通常由文件中的字段描述。我不确定这样一个块的解析器被称为什么，但这就是我在标题中所说的“子解析器”的意思。我遇到的问题是以简洁的方式实现它们，而不会占用大量内存。我想出了两个在某些方面都失败的替代方案。

备选方案 1 是将块读入单独的字节串并为其启动单独的解析器。虽然简洁，但大块将导致高内存使用。

备选方案 2 是在相同的上下文中继续解析并跟踪消耗的字节数。这种跟踪很容易出错，并且似乎感染了构成最终 blockParser 的所有解析器。对于格式错误的输入文件，在可以比较跟踪的大小之前，它还可能通过比大小字段指示的更远的解析来浪费时间。

```
import Control.Proxy.Attoparsec
import Control.Proxy.Trans.Either
import Data.Attoparsec as P
import Data.Attoparsec.Binary
import qualified Data.ByteString as BS

parser = do
    size <- fromIntegral <$> anyWord32le

    -- alternative 1 (ignore the Either for simplicity):
    Right result <- parseOnly blockParser <$> P.take size
    return result

    -- alternative 2
    (result, trackedSize) <- blockparser
    when (size /= trackedSize) $ fail "size mismatch"
    return result

blockParser = undefined

main = withBinaryFile "bin" ReadMode go where
    go h = fmap print . runProxy . runEitherK $ session h
    session h = printD <-< parserD parser <-< throwParsingErrors <-< parserInputD <-< readChunk h 128
    readChunk h n () = runIdentityP go where
        go = do
            c <- lift $ BS.hGet h n
            unless (BS.null c) $ respond c *> go 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:37:21.813

我喜欢称其为“固定输入”解析器。

我可以告诉你怎么`pipes-parse`做。`pipes-parse`您可以在库的[`parseN`](https://github.com/Gabriel439/Haskell-Pipes-Parse-Library/blob/master/Control/Proxy/Parse/Commit.hs#L328)和[`parseWhile`](https://github.com/Gabriel439/Haskell-Pipes-Parse-Library/blob/master/Control/Proxy/Parse/Commit.hs#L365)函数中看到我将要描述的内容的预览。这些实际上是用于通用输入的，但我[在此处](https://github.com/Gabriel439/Haskell-Pipes-Parse-Library/blob/master/Control/Proxy/String/Backtrack.hs#L263)和[此处](https://github.com/Gabriel439/Haskell-Pipes-Parse-Library/blob/master/Control/Proxy/String/Backtrack.hs#L309)`String`也为示例解析器编写了类似的输入。

诀窍非常简单，您在希望解析器停止的地方插入一个假的输入标记结尾，运行解析器（如果它碰到输入标记的假结尾，它将失败），然后删除输入标记的结尾。

显然，这并不像我说的那么容易，但这是一般原则。棘手的部分是：

*   以仍然流式传输的方式进行操作。我链接的那个还没有这样做，但是您以流方式执行此操作的方式是在上游插入一个管道，该管道计算流过它的字节数，然后在正确的位置插入输入结束标记。

*   不干扰现有的输入结束标记

这个技巧可以适应`pipes-attoparsec`，但我认为最好的解决方案是`attoparsec`直接包含这个特性。但是，如果该解决方案不可用，那么我们可以限制提供给`attoparsec`解析器的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T19:56:46.823

好的，所以我终于想出了如何做到这一点，并且我已经在`pipes-parse`库中编写了这个模式。本[`pipes-parse`教程](http://hackage.haskell.org/packages/archive/pipes-parse/1.0.0/doc/html/Control-Proxy-Parse-Tutorial.html)解释了如何做到这一点，特别是在“嵌套”部分。

本教程仅对与数据类型无关的解析（即通用元素流）进行了解释，但您也可以将其扩展为与`ByteString`s 一起使用。

实现这项工作的两个关键技巧是：

*   修复`StateP`为全局（in `pipes-3.3.0`）

*   将子解析器嵌入瞬态`StateP`层，以便它使用新的剩余上下文

将`pipes-attoparsec`很快发布一个更新，`pipes-parse`以便您可以在自己的代码中使用这些技巧。

# vb.net - 检查表单是否已打开

> ID：15439440
> 
> 赞同：25
> 
> 时间：2013-03-15T18:15:20.670
> 
> 标签：vb.net

我提出这个问题以获得更多知识。我怎么知道表单是否在我的应用程序中打开，为了不再打开它我的意思是不要在它运行时创建同一个表单的实例

```
 Dim frmCollection As New FormCollection()
    frmCollection = Application.OpenForms()
    If frmCollection.Item("Form2").IsHandleCreated Then
        MsgBox("Yes Opened")
    Else
        Dim f As New Form2()
        With f
            .Text = "form2"
            .Show()
        End With
    End If 
```

如果我多次执行此代码，它将创建表单 Form2 的更多实例如何检查此表单是否尚未打开

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-15T18:23:12.400

你可以这样尝试：

```
 Imports System.Linq ' need to add 

If Application.OpenForms().OfType(Of Form2).Any Then
  MessageBox.Show("Opened")
Else
  Dim f2 As New Form2
  f2.Text = "form2"
  f2.Show()
End If 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-20T20:47:59.440

您可以使用以下代码：

```
If myForm.IsHandleCreated then
   myForm is open
End If 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-10T03:37:38.610

作为给出的答案的扩展（谢谢大家），这是一种激活或显示的简单方法：

```
Dim frmCollection = System.Windows.Forms.Application.OpenForms
If frmCollection.OfType(Of Form2).Any Then
    frmCollection.Item("Form2").Activate()
Else
    Dim newForm2 = New Form2
    newForm2.Show()
End If 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-05T21:55:29.990

为了更简单，您可以创建一个公共静态 bool 变量，该变量将告知表单是否打开。在表单加载事件上分配“真”，在关闭事件上分配“假”值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-12T18:08:31.447

HumbleBeginnings 发起的另一种重构方式：

```
 Dim xChildWindows = Application.OpenForms.OfType(Of frmForm2)
    If xChildWindows.Any Then
        xChildWindows.First().Focus() 'Focus if exists
    Else
        Dim xfrmNew As New frmForm2() 'Open window if doeasn't exists
        xfrmNew.MdiParent = Me
        xfrmNew.Show()
    End If 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-21T09:29:27.613

讨厌成为一种杀戮的乐趣，但有一天有人会尝试理解你的代码。

```
Dim frm as New frmDontknow
Dim frmCollection = System.Windows.Forms.Application.OpenForms
For i As Int16 = 0I To frmCollection.Count - 1I
  If frmCollection.Item(i).Name = frm.Name Then
      frmCollection.Item(i).Activate()
      Exit Sub
  End If
Next i 
```

然后按要求做节目等？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-04T14:24:29.120

检查表单是否打开，为了验证表单是否打开，我们使用此方法和函数能够从任何表单调用并使用更少的代码。

示例：这将在带有 mdiContainer 的表单和带有 3 个按钮的面板对象中使用它，以显示 3 个窗口表单。

导入系统导入 System.Reflection

```
Private Sub OpenWindowsForm(ByVal FormName As String)
    Dim instForm As Form = Application.OpenForms.OfType(Of Form)().Where(Function(frm) frm.Name = FormName).SingleOrDefault()
    If instForm Is Nothing Then
        Dim frm As New Form
        frm = DirectCast(CreateObjectInstance(FormName), Form)
        frm.MdiParent = Me
        Me.Panel1.Controls.Add(frm)
        Me.Panel1.Tag = frm
        frm.Show()
    Else
        instForm.Select()
        instForm.WindowState = FormWindowState.Maximized
        instForm.BringToFront()
    End If
End Sub

Public Function CreateObjectInstance(ByVal objectName As String) As Object
    Dim obj As Object
    Try
        If objectName.LastIndexOf(".") = -1 Then
            objectName = [Assembly].GetEntryAssembly.GetName.Name & "." & objectName
        End If

        obj = [Assembly].GetEntryAssembly.CreateInstance(objectName)

    Catch ex As Exception
        obj = Nothing
    End Try
    Return obj

End Function 
```

**如何在点击事件中使用** Private Sub btnRegistro_Click(sender As Object, e As EventArgs) Handles btnRegistro.Click OpenWindowsForm("Registro") End Sub

```
Private Sub btnBusqueda_Click(sender As Object, e As EventArgs) Handles btnBusqueda.Click
    OpenWindowsForm("Busqueda")
End Sub

Private Sub btnCalendario_Click_1(sender As Object, e As EventArgs) Handles btnCalendario.Click
    OpenWindowsForm("Calendario")
End Sub 
```

[这是示例代码的图像](https://i.stack.imgur.com/xWl2I.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-13T17:15:37.873

你可以试试这个

```
Dim formText As String
Dim prevText As String

 Private Sub OpenForm(ByVal frm As Windows.Forms.Form)
        formText = frm.Text
        If formText = prevText Then Exit Sub
        CloseForms()
        ' Make it a child of this MDI form before showing it.
        frm.MdiParent = Me
        frm.Show()
        frm.Location = New Point(0, 0)
        prevText = formText
    End Sub

    Private Sub CloseForms()
        For Each ChildForm As Form In Me.MdiChildren
            ChildForm.Close()
        Next
    End Sub

    Private Sub NewToolStripButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PayablesToolStripMenuItem.Click
            OpenForm(frmPayables)
        End Sub 
```

# java - 集合洗牌后如何找到特定项目？

> ID：15439444
> 
> 赞同：0
> 
> 时间：2013-03-15T18:15:31.547
> 
> 标签：java, android, sqlite

好的，我之前的线程不是很好的概念，所以这里是另一个更精确的。我有一个带有问题和 4 个可能答案的测验。问题来自资产文件夹中导入的预填充 sqlite 数据库。我使用集合 shuffle 将答案随机放置到按钮上。现在，我有一个 50/50 帮助按钮，就像我想成为百万富翁一样，删除两个错误的答案。这是我的问题？如果我不知道它们在哪里，如何删除两个错误的答案（将它们的按钮文本设置为“”）？其中之一是正确答案。这是我的问题代码：

```
public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{ 

            mDbHelper.open();

            Cursor c = mDbHelper.getTestData(generateWhereClause());
            mAnsweredQuestions.add(c.getLong(0));

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            Collections.shuffle(labels);

            tacanOdg = c.getString(2);

            if(brojacPogresnihOdgovora < 5){

        question.setText(c.getString(1));

        bOdgovor1.setText(labels.get(0).option);
        bOdgovor1.setTag(labels.get(0));
        bOdgovor1.setOnClickListener(clickListener);

        bOdgovor2.setText(labels.get(1).option);
        bOdgovor2.setTag(labels.get(1));
        bOdgovor2.setOnClickListener(clickListener);

        bOdgovor3.setText(labels.get(2).option);
        bOdgovor3.setTag(labels.get(2));
        bOdgovor3.setOnClickListener(clickListener);

        bOdgovor4.setText(labels.get(3).option);
        bOdgovor4.setTag(labels.get(3));
        bOdgovor4.setOnClickListener(clickListener);

        netacniOdg.setText("" + brojacPogresnihOdgovora);
        score.setText("Score: " + brojacTacnihOdgovora);
            }

        }
        finally{ 
            mDbHelper.close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:31:05.113

实际上你有两个问题要解决：如何知道一个答案是错误的，以及如何从三个答案中随机删除两个错误答案？我的意思是，如果你总是按显示顺序选择前两个错误的答案，你就经常将答案提供给玩家。

我的想法将解决这两个问题：在开始时创建另一个包含 2 个错误答案的列表：您可以系统地选择 c.getString(3) 和 c.getString(4)，因为它是在 shuffle 之前，没关系。

使第二个列表可用于五十/五十进程，并删除相应的答案，例如通过比较文本。

**编辑**

我只是看到了一些我不明白的东西。如果我没记错的话，你可能会忘记我上面说的，实际上要简单得多。

*   您像这样在列表中插入 Answers: `labels.add(new Answer(c.getString(2), true));`，所以我想 Answer 是一个具有（至少）2个属性的类。其中一个是文本，另一个是布尔值，意思是“正确与否？”。我不知道该属性的名称，但我认为对于本说明的其余部分，它的名称是正确的
*   然后你这样`bOdgovor1.setTag(labels.get(0));`做意味着你将 Answer 对象存储在按钮标签中。

因此，有一种方法可以比我上面所说的简单得多。要知道答案是否正确，您只需执行以下操作：

```
((Answer)bOdgovor1.getTag()).correct 
```

对于四个按钮中的三个，它将返回 false，对于正确答案，它将返回 true。所以你有你的信息。只需从三个答案中选择两个。就像是：

```
// Get a random number between 1 and 3, 
// it is the number of the wrong answer you will not delete
int rnd = new Random().nextInt(3) + 1;

// Init the incorrect answer counter
int i = 0;

// Check the answers. Of course, this code could be factorized in a sub-method
if (!((Answer)bOdgovor1.getTag()).correct) {
  // Incorrect answer
  i++;
  // The (rnd)th incorrect answer will not be deleted, the others will
  if (i != rnd) {
    bOdgovor1.setText("");
  }
}
if (!((Answer)bOdgovor2.getTag()).correct) {
  // Incorrect answer
  i++;
  // The (rnd)th incorrect answer will not be deleted, the others will
  if (i != rnd) {
    bOdgovor2.setText("");
  }
}
if (!((Answer)bOdgovor3.getTag()).correct) {
  // Incorrect answer
  i++;
  // The (rnd)th incorrect answer will not be deleted, the others will
  if (i != rnd) {
    bOdgovor3.setText("");
  }
}
if (!((Answer)bOdgovor4.getTag()).correct) {
  // Incorrect answer
  i++;
  // The (rnd)th incorrect answer will not be deleted, the others will
  if (i != rnd) {
    bOdgovor4.setText("");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:34:07.953

您可以做的是在将答案添加到列表中时，将对 Answer 对象的引用保存在变量中。现在，当您需要引用 Answer 对象时，您可以使用此引用。在您的情况下，您可以确保在 50-50 之后删除的答案与您参考的答案不同（即正确答案）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:37:20.410

我终于设法解决了这个问题，现在它正在工作！这是代码。

```
int rnd1, rnd2;

                List<Integer> list = new ArrayList<Integer>();              

                if (!((Answer)bOdgovor1.getTag()).isCorrect) {
                    list.add(1);
                }
                if (!((Answer)bOdgovor2.getTag()).isCorrect) {
                    list.add(2);
                }
                if (!((Answer)bOdgovor3.getTag()).isCorrect) {
                    list.add(3);
                }
                if (!((Answer)bOdgovor4.getTag()).isCorrect) {
                    list.add(4);
                }   
                Collections.shuffle(list);
                rnd1 = list.get(0);
                rnd2 = list.get(1);

                if ((rnd1 == 1) || (rnd2 == 1)){
                    bOdgovor1.setText("");
                }
                if ((rnd1 == 2) || (rnd2 == 2)){
                    bOdgovor2.setText("");
                }
                if ((rnd1 == 3) || (rnd2 == 3)){
                    bOdgovor3.setText("");
                }
                if ((rnd1 == 4) || (rnd2 == 4)){
                    bOdgovor4.setText("");
                }
            } 
```

# css - 引导子菜单放置错误

> ID：15439445
> 
> 赞同：1
> 
> 时间：2013-03-15T18:15:32.083
> 
> 标签：css, drop-down-menu, twitter-bootstrap, submenu

二级子菜单放置在一级子菜单的第一个元素的旁边，当一级子菜单的较低元素具有较少二级子菜单元素时，用户无法导航到新的二级子菜单，因为鼠标悬停在菜单外.

如何将第二级子菜单放置在每个第一级子菜单的选定元素旁边？

这是 JSFiddle，检查元素并尝试导航到它们的子菜单：内存设备、打印机、笔记本电脑包、投影仪等。

HTML

```
Code too large to be displayed here. Check JSFiddle 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:19:08.960

只需添加此规则：

```
.dropdown-menu > li { position: relative; } 
```

你需要的是第一级子菜单`position: relative`，这样当下一级定义`position: absolute; top: 0;`它的顶部时，它的顶部就是直接父级的。

# c# - 按列表和/或通过切换按钮更改的标题在页面上显示信息

> ID：15439446
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:15:33.167
> 
> 标签：c#, asp.net-mvc

我不确定要查找什么或如何查找示例，因此将不胜感激。

我有一个视图页面，它按用户名显示用户列表，然后是电子邮件-图片-个人资料页面的小图标。

我想在页面上创建一个切换按钮，它将更改用户的显示页面并通过用户图片显示它们，然后是电子邮件和个人资料的小图标。

有没有这个功能的例子？

我正在使用 asp.net mvc4 c# VS2012。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:32:55.040

如果您有一个提供获取人员数据的控制器，那么达到您的目标的最简单方法是创建两个不同的视图（一个按姓名显示用户列表，另一个按用户图片显示）。然后切换按钮可能只是指向另一个视图的 html 链接。

# java - 单击时更改列表视图项目背景

> ID：15439466
> 
> 赞同：3
> 
> 时间：2013-03-15T18:17:16.570
> 
> 标签：java, android, android-listview

我有一个列表视图，当我单击一行时，我想它的背景变为蓝色。我使用这个代码：

```
listView1.setOnItemClickListener(new OnItemClickListener() {
                        public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {
                            // TODO Auto-generated method stub
                            parent.getChildAt(position).setBackgroundColor(Color.BLUE);
                        }

                    }); 
```

这有一些错误。当我点击第一个项目时，它变成蓝色，但项目#3 和#5 也变成蓝色！！！我不明白为什么！我只想要选定的项目变成蓝色！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:27:55.917

如何使用选择器？它们工作正常并提供干净的解决方案。

**列表选择器.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/normal" />

    <item
        android:state_selected="true"
        android:state_focused="false"
        android:drawable="@drawable/hover" 
        />

    <item 
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="@drawable/hover" />
</selector> 
```

**正常的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"
     >
    <solid 
        android:color="#cccccc"
        />
</shape> 
```

**悬停.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"
     >
    <solid 
        android:color="#dddddd"
        />
</shape> 
```

## 用法

```
<ListView
   android:id="@+id/list"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:listSelector="@drawable/listselector"
/> 
```

关键属性是`android:listSelector="@drawable/listselector"`为您的`ListView`.

## 笔记：

您可以在形状中使用渐变属性而不是纯色。有关更多详细信息，您还可以查看教程[Android Custom ListView](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:35:15.410

use listselectors to achieve this goal:

Hree is an example: [http://www.michenux.net/android-listview-highlight-selected-item-387.html](http://www.michenux.net/android-listview-highlight-selected-item-387.html)

and if you want your listview item color permanent, then, you need to create an `array` of selected positions, an in `getview()` method of your cutom adapter, you need to check if that position is exists in array or not, if yes, then change background color of your view manually

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:33:22.627

如果您有自定义列表视图，请使用以下代码。

```
 public View getView(final int arg0, View arg1, ViewGroup arg2) {
final ViewHolder vh;
vh= new ViewHolder();

if(arg1==null )
{
                arg1=mInflater.inflate(R.layout.lyourcustomlayouttobe inflated, arg2,false);//custom layout inflated
        arg1.setTag(vh);
        }

return arg1; 
```

}

您的自定义布局

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="horizontal"
 android:cacheColorHint="#000000"
 android:background="@drawable/listviewbkg">
 //other items to be inlfated.
 </LinearLayout> 
```

在资源下创建一个可绘制文件夹。将以下 xml 发布为 listviewbkg

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_pressed="true" 
 android:drawable="@drawable/pressed" />
 <item  android:state_focused="false" 
 android:drawable="@drawable/normal" />
 </selector> 
```

在名称 normal.xml 的可绘制对象下正常时的形状

```
 <?xml version="1.0" encoding="UTF-8"?> 
   <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
   <solid android:color="#FFFFFF"/>//change color    
    <stroke android:width="3dp"
    android:color="#0FECFF" /><!-- #330000FF #ffffffff -->//border color
   <gradient                               // remove the gradient if do not wish to use.
    android:startColor="#ffffffff" 
    android:endColor="#110000FF" 
    android:angle="90"/> 

    <padding android:left="5dp"
     android:top="5dp"
     android:right="5dp"
     android:bottom="5dp"/> 
    <corners android:bottomRightRadius="7dp"      // change this to increase the rounded edge radius
     android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp"
     android:topRightRadius="7dp"/> 
     </shape> 
```

在drawable文件夹中以名称pressed.xml按下时的形状

```
 <?xml version="1.0" encoding="UTF-8"?> 
  <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
  <solid android:color="#FF1A47"/>    //change color 
  <stroke android:width="3dp"
    android:color="#0FECFF"/>//border color
  <padding android:left="5dp"
     android:top="5dp"
     android:right="5dp"
     android:bottom="5dp"/> 
  <corners android:bottomRightRadius="7dp"// increase the radius at the edge
     android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp"
     android:topRightRadius="7dp"/> 
  </shape> 
```

# google-chrome-app - 等时 USB 传输回调没有数据

> ID：15439469
> 
> 赞同：1
> 
> 时间：2013-03-15T18:17:28.320
> 
> 标签：google-chrome-app

文档在这里很简单：http: [//developer.chrome.com/apps/app_hardware.html#isochronous_transfers](http://developer.chrome.com/apps/app_hardware.html#isochronous_transfers)

它说回调将在 findDevice.onEvent 回调上完成。但是，文档似乎落后了，因为 API 不再使用 usb.findDevice，而是使用 usb.findDevices。usb.findDevices 似乎没有定义 onEvent 的选项。

这是当前的 usb.findDevices 文档：http: [//developer.chrome.com/apps/usb.html#method-findDevices](http://developer.chrome.com/apps/usb.html#method-findDevices)

Packaged Apps 的概念很棒，但目前文档非常混乱。希望得到一些帮助。谢谢

**更新的问题** 我的问题是，如何从同步连接中获取数据？

# c++ - C++ 新手需要了解链表插入

> ID：15439470
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:17:32.757
> 
> 标签：c++, visual-c++

我对编程很陌生，一直在尝试按字母顺序插入标题，但我的插入功能似乎没有工作。请帮忙！

```
class Book {

public:
    Book() {
    }
    ;
    Book(char *newTitle) {
        strcpy(title, newTitle);
    }

    char *getBook() {
        return title;
    }

    int compareTo(Book *getbook) {
        return (strcmp(title, getbook->title));
    }

private:
    char title[81];

};

void BookList::insert(Book *newBook) {
    BookNode *node = new BookNode(newBook);
    BookNode *current = NULL;
    BookNode *previous = current;

    node->next = NULL;
    current = head;

    if (current == NULL) {
        head = node;
        head->next = NULL;
    }

    else {
        while (current->next != NULL && (newBook->compareTo(current->book) > 0)) {
            previous = current;

            current = current->next;
        }
        node->next = previous->next;
        previous->next = node;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:20:26.587

我认为

```
while (current->next != NULL ... 
```

应该读

```
while (current != NULL ... 
```

目前看不出其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:15:00.267

您并没有真正利用您的实现中的链接列表。插入链表应该是一个 O(1) 操作。非常简单高效。只需跟踪列表的末尾，您就可以删除 while 循环。

```
class BookList {
public:
    BookNode* head;
    BookNode* end;

    BookList():head(NULL), end(NULL) {}

    void insert(Book data) {
        if(head == NULL) {
            head = new BookNode(data);
            end = head;
        } else {
            end.next = new BookNode(data);
            end = end.next;
        }
    }
}; 
```

# mysql - 为什么此 SQL INNER JOIN 有效而无效？

> ID：15439474
> 
> 赞同：0
> 
> 时间：2013-03-15T18:17:50.753
> 
> 标签：mysql, sql, wordpress

我对 SQL 还是很陌生，我很难理解为什么这些查询中的一个可以正常工作而一个不能正常工作。这源于我尝试[优化复杂而缓慢的查询](https://stackoverflow.com/q/8893160/931860)。[@kalengi](https://stackoverflow.com/users/212076/kalengi)建议了对我来说似乎是一个[绝妙的解决方案](https://stackoverflow.com/a/15398104/931860)，但它似乎不适用于我的网站。以下是查询。

这是 WordPress 生成的标准 SQL（按预期工作）：

```
SELECT SQL_CALC_FOUND_ROWS wp_posts.ID
FROM wp_posts 
INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id)
INNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id)
WHERE 1=1 
AND wp_posts.post_type = 'product'
AND (wp_posts.post_status = 'publish')
AND (
   (wp_postmeta.meta_key = '_visibility' AND CAST(wp_postmeta.meta_value AS CHAR) IN ('visible','catalog'))
   AND  (mt1.meta_key = '_stock_status' AND CAST(mt1.meta_value AS CHAR) = 'instock')
)
GROUP BY wp_posts.ID
ORDER BY wp_posts.menu_order,wp_posts.post_title asc
LIMIT 0, 10 
```

这是@kalengi 的过滤器处理它以将多个 INNER JOIN 合并为一个之后的 SQL（返回 0 个结果）：

```
SELECT SQL_CALC_FOUND_ROWS wp_posts.ID
FROM wp_posts 
INNER JOIN wp_postmeta AS pmta ON (wp_posts.ID = pmta.post_id) 
WHERE 1=1 
AND wp_posts.post_type = 'product'
AND ( wp_posts.post_status = 'publish' )
AND (
  ( pmta.meta_key = '_visibility' AND CAST(pmta.meta_value AS CHAR) IN ( 'visible','catalog' ) )
  AND ( pmta.meta_key = '_stock_status' AND CAST(pmta.meta_value AS CHAR) = 'instock' )
)
GROUP BY wp_posts.ID
ORDER BY wp_posts.menu_order,wp_posts.post_title asc
LIMIT 0, 10 
```

谁能解释为什么第二个对我不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:23:15.280

看起来您的`WHERE`子句中有一个条件同时在`pmta.meta_key`and`pmta.meta_value`列中查找两个值：

```
....
( pmta.meta_key = '_visibility' AND CAST(pmta.meta_value AS CHAR) IN ('visible','catalog' ) )
AND ( pmta.meta_key = '_stock_status' AND CAST(pmta.meta_value AS CHAR) = 'instock' )
.... 
```

一列不能在同一行中有两个不同的值，因此此测试将返回 FALSE，因此不会返回任何行。

如果您重写原始查询以将连接条件分组到`ON`子句中，您可以看到为什么您的第二个查询不起作用：

```
SELECT 
    SQL_CALC_FOUND_ROWS wp_posts.ID
FROM 
    wp_posts 
    INNER JOIN wp_postmeta 
        ON wp_posts.ID = wp_postmeta.post_id
        AND wp_postmeta.meta_key = '_visibility' 
        AND CAST(wp_postmeta.meta_value AS CHAR) IN ('visible','catalog')
    INNER JOIN wp_postmeta AS mt1 
        ON wp_posts.ID = mt1.post_id
        AND mt1.meta_key = '_stock_status' 
        AND CAST(mt1.meta_value AS CHAR) = 'instock'
WHERE 
    1=1 
    AND wp_posts.post_type = 'product'
    AND wp_posts.post_status = 'publish'
GROUP BY 
    wp_posts.ID
ORDER BY 
    wp_posts.menu_order,
    wp_posts.post_title asc
LIMIT 0, 10 
```

如果您只想加入表一次，请尝试以下操作：

```
SELECT 
    SQL_CALC_FOUND_ROWS wp_posts.ID
FROM 
    wp_posts 
    INNER JOIN wp_postmeta 
        ON wp_posts.ID = wp_postmeta.post_id
        AND (
            wp_postmeta.meta_key = '_visibility' 
            AND CAST(wp_postmeta.meta_value AS CHAR) IN ('visible','catalog')
        ) OR (
            wp_postmeta.meta_key = '_stock_status' 
            AND CAST(wp_postmeta.meta_value AS CHAR) = 'instock'
        )
WHERE 
    1=1 
    AND wp_posts.post_type = 'product'
    AND wp_posts.post_status = 'publish'
GROUP BY 
    wp_posts.ID
ORDER BY 
    wp_posts.menu_order,
    wp_posts.post_title asc
LIMIT 0, 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:28:18.023

两个内连接：

```
INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id)
INNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id) 
```

代表两个数据集（恰好是“相同的”）。

给定`WHERE`条件，结果将是两行的集合，其中第一行 ( `wp_postmeta`) 满足一个条件：

```
 (wp_postmeta.meta_key = '_visibility' AND CAST(wp_postmeta.meta_value AS CHAR) IN ('visible','catalog')) 
```

第二个满足完全不同的条件：

```
 (mt1.meta_key = '_stock_status' AND CAST(mt1.meta_value AS CHAR) = 'instock') 
```

通过将所有内容组合为 one `INNER JOIN`，您正在寻找与这两个条件匹配的 ONE ROW 。显然没有。

如果您查看“出色的解决方案”，您会看到“与”已更改为“或”以保留语义：

```
AND (
  ( pmta.meta_key = '_visibility' AND CAST(pmta.meta_value AS CHAR) IN ( 'visible','catalog' ) )
  OR ( pmta.meta_key = '_stock_status' AND CAST(pmta.meta_value AS CHAR) = 'instock' )
) 
```

# c++ - 在开放框架中使用 C++ 向量的生命细胞自动机游戏

> ID：15439485
> 
> 赞同：1
> 
> 时间：2013-03-15T18:18:41.153
> 
> 标签：c++, openframeworks, cellular-automata

我正在用 C++（openFrameworks）构建一个生命 CA 游戏。由于我是 C++ 新手，我想知道是否有人可以让我知道我是否在以下代码中正确设置了向量。CA 没有绘制到屏幕上，我不确定这是否是我设置矢量的结果。我必须使用一维向量，因为我打算将数据发送到仅处理一维结构的纯数据。

```
GOL::GOL() {
    init();
}

void GOL::init() {
  for (int i =1;i < cols-1;i++) {
    for (int j =1;j < rows-1;j++) {
        board.push_back(rows * cols);
        board[i * cols + j] = ofRandom(2);
    }
  } 
}

void GOL::generate() {
  vector<int> next(rows * cols);

  // Loop through every spot in our 2D array and check spots neighbors
  for (int x = 0; x < cols; x++) {
    for (int y = 0; y < rows; y++) {

      // Add up all the states in a 3x3 surrounding grid
      int neighbors = 0;
      for (int i = -1; i <= 1; i++) {
        for (int j = -1; j <= 1; j++) {
          neighbors += board[((x+i+cols)%cols) * cols + ((y+j+rows)%rows)];
        }
      }

      // A little trick to subtract the current cell's state since
      // we added it in the above loop
      neighbors -= board[x * cols + y];

      // Rules of Life
      if ((board[x * cols + y] == 1) && (neighbors <  2)) next[x * cols + y] = 0;        // Loneliness
      else if ((board[x * cols + y] == 1) && (neighbors >  3)) next[x * cols + y] = 0;        // Overpopulation
      else if ((board[x * cols + y] == 0) && (neighbors == 3)) next[x * cols + y] = 1;        // Reproduction
      else next[x * cols + y] = board[x * cols + y];  // Stasis
    }
  }

  // Next is now our board
  board = next;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:45:35.177

这在您的代码中看起来很奇怪：

```
void GOL::init() {
  for (int i =1;i < cols-1;i++) {
    for (int j =1;j < rows-1;j++) {
        board.push_back(rows * cols);
        board[i * cols + j] = ofRandom(2);
    }
  } 
} 
```

“vector.push_back(value)”表示“将值附加到此向量的末尾”参见[std::vector::push_back 参考](http://www.cplusplus.com/reference/vector/vector/push_back/) 执行此操作后，您访问 board[i * cols + j] 的值并将其更改为随机值。我认为您正在尝试做的是：

```
void GOL::init() {
  // create the vector with cols * rows spaces:
  for(int i = 0; i < cols * rows; i++){
      board.push_back( ofRandom(2));
  }

} 
```

这是您访问向量中位置 x,y 的每个元素的方式：

```
 for (int x = 0; x < cols; x++) { 
    for (int y =  0; y < rows; y++) {
        board[x * cols + y] = blabla;
    }
  } 
```

这意味着在 void GOL::generate() 中，当您执行此操作时，您没有访问正确的位置：

```
 neighbors += board[((x+i+cols)%cols) * cols + ((y+j+rows)%rows)]; 
```

我想你想这样做：

```
 neighbors += board[((x+i+cols)%cols) * rows + ((y+j+rows)%rows)]; 
```

所以 x * rows + y 而不是 x * cols + y

# asp.net - 如何从 MVC 项目的 Views 文件夹中的剃刀视图调用根 Web 表单

> ID：15439486
> 
> 赞同：0
> 
> 时间：2013-03-15T18:18:48.887
> 
> 标签：asp.net, asp.net-mvc, razor, webforms

我必须从项目结构下方的 Home/Index 视图调用位于项目根目录中的 Web 表单：

![在此处输入图像描述](../Images/e0d9efab912cdd9ca0201e7a1b5602a4.png)

我使用了下一个代码：

**@Html.Partial("~/WebForm1");**

但得到下一个错误：

未找到局部视图“~/WebForm1”或没有视图引擎支持搜索到的位置。搜索了以下位置：~/WebForm1，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:27:07.063

要进入视图文件夹，请使用

```
@Html.Partial("~/Views/pathToYourView"); 
```

或者将您的视图放在“共享”文件夹中以访问视图

```
@Html.Partial("ViewName"); 
```

就像四十二建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:25:40.457

使用此代码

```
@Html.Partial("~/Views/pathToYourView"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:27:01.660

MVC 识别 Web 表单的解决方案是添加其扩展名“ **.aspx** ”

@Html.Partial("~/WebForm1.aspx");

# .htaccess - .htaccess 中的重写规则太多

> ID：15439488
> 
> 赞同：0
> 
> 时间：2013-03-15T18:18:54.367
> 
> 标签：.htaccess

上周我不得不重新设计一个网站。问题是最后一个 url 对 seo 不友好，所以为了避免谷歌因为太多的 404 错误而惩罚我的网站，我必须创建很多重写规则，因为所有内容都有糟糕的 URL（并且内容有一个很好的SERP 上的位置）。

例如：

```
RewriteRule ^documents/documents_for_subject/22-ecuaciones-exponenciales-y-logaritmicas http://%{HTTP_HOST}/1o-bachillerato/matematicas-cc.ss/aritmetica-y-algebra/ecuaciones-exponenciales-y-logaritmicas [R=301,L] 
```

这对我的表现有问题吗？我的情况还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:13:49.987

> 它们在同一个域中。

然后内部重定向要好得多。标头重定向将新 URL 发送到浏览器并使其发出新请求；顾名思义，内部处理是内部处理的。

这应该有效：

```
RewriteRule ^documents/documents_for_subject/22-ecuaciones-exponenciales-y-logaritmicas /1o-bachillerato/matematicas-cc.ss/aritmetica-y-algebra/ecuaciones-exponenciales-y-logaritmicas [L] 
```

任何性能问题都可以忽略不计——除非你有成千上万条单独的规则，否则这些规则可能会减慢 Apache。在这种情况下，如果您有权访问中央服务器配置，请将规则放在那里而不是 .htaccess 文件，因为服务器配置中的指令存储在内存中并且速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:14:36.060

A. 是的，使用 301 是通知搜索机器人有关更改的 URL 的正确方法，最终您的旧 URL 将从搜索结果中删除。

B. 你不需要`%{HTTP_HOST}`在你的重写规则中使用它，就像这样使用它：

```
RewriteRule ^documents/documents_for_subject/22-ecuaciones-exponenciales-y-logaritmicas http://%{HTTP_HOST}/1o-bachillerato/matematicas-cc.ss/aritmetica-y-algebra/ecuaciones-exponenciales-y-logaritmicas [R=301,L] 
```

C. 如果你有很多像上面这样的 RewriteRules，我建议使用[RewriteMap](https://httpd.apache.org/docs/current/rewrite/rewritemap.html)或者使用一些脚本支持（如 PHP）从旧的 URL 重定向到新的 301。

# c# - 从日志文件中提取数据的正则表达式

> ID：15439489
> 
> 赞同：-2
> 
> 时间：2013-03-15T18:18:59.343
> 
> 标签：c#, regex

我似乎无法为我正在寻找的东西写一个正则表达式。

这就是我所拥有的......我有一个日志文件，在该日志文件中经常有这样的行

```
 [Feb 14 15:43:23 UTC] RC5-72: Summary: 6 packets (6.00 stats units)
                              0.00:18:08.40 - [23.68 Mkeys/s] 
```

在摘要行的末尾有一个回车、换行。

我想搜索“Summary”这个词，然后从中提取“23.68 Mkeys/s”。

我正在尝试在 C# 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:23:19.593

我的头顶上： `Summary(.*)?[(?<mkeys>.*?)\sMkeys`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:24:26.483

```
var mkeys = Regex.Match(logLine, @"Summary[^\[]+\[(?<mkeys>[^\]]+\]").Groups["mkeys"].Value 
```

**mkeys** 将包含**[**和**]之间的字符串**

# html - Webkit 中的滚动、固定定位 div 和 flash 问题

> ID：15439490
> 
> 赞同：1
> 
> 时间：2013-03-15T18:19:02.123
> 
> 标签：html, css, webkit, flash

我在 webkit 中遇到问题，这是由于渲染引擎（或功能）中的错误，我似乎无法解决。

HTML：

```
<div id="left">
    Content
</div>
<div id="right">
    <div id="scroll">
        <div class="video">
            <!-- Flash -->
        </div>
        Sidebar
    </div>
</div> 
```

CSS：

```
#left {
    float: left;
    width: 50%;
}

#right {
    float: right;
    position: fixed;
    right: 0;
    width: 50%;
    height: 100%;
}

#scroll {
    overflow-y: auto;
    position: absolute;
    top: 0;
    bottom: 0;
} 
```

JSFiddle：http: [//jsfiddle.net/andrewryno/pUaM2/1/](http://jsfiddle.net/andrewryno/pUaM2/1/)

当我在位置固定的滚动 div 中有一个 flash 对象时，就会出现问题。当您滚动时，一切都会按预期工作，直到您将鼠标悬停在 flash 对象上。一旦你这样做了，flash 会窃取你的注意力并开始滚动文档，而不是 div。似乎这只发生在 webkit 中。

我发现的唯一解决方法是在 flash 周围添加一个 div（我提供的 HTML 中的 .video）并添加：

```
.video {
    position: relative;
    z-index: -1;
} 
```

问题在于它将 flash/div 移动到其父级后面，因此当它仍然可见并且滚动有效时，您无法再与 flash 交互。

这甚至可以解决吗？删除`position: fixed;`它使其工作，因此窃取焦点不是问题，而是固定位置是问题。

**更新：**

一直在尝试一些 JS 解决方案，但都没有奏效。使用 z-index “hack”，因此滚动开始/停止时 z-index 在 -1/0 之间的变化不起作用，因为当您将鼠标悬停在 flash 上时，jQuery 无法识别滚动事件。并且用 div 覆盖 flash 并在点击时将其删除是行不通的，因为您的第一次点击不会通过（而且我不能让 JS 点击 flash）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:10:29.953

你为什么使用旧的嵌入代码？使用 iframe，它正在成为标准。

也不需要使用固定。使用绝对。

```
#left {
overflow-y: auto;
position: absolute;
left:0;
width: 50%;
height: 100%;
}

#right {
overflow-y: auto;
position: absolute;
right: 0;
width: 50%;
height: 100%;
} 
```

这行得通吗？

[http://jsfiddle.net/pUaM2/10/](http://jsfiddle.net/pUaM2/10/)

# php - 使用 PHP 遍历来自 Yandex API 的 XML 响应

> ID：15439496
> 
> 赞同：2
> 
> 时间：2013-03-15T18:19:12.493
> 
> 标签：php, xml, dom, traversal, yandex

我正在使用 Yandex API 创建一个元搜索引擎。Yandex 以 XML 格式给出结果。所以我们需要遍历 XML 响应以获取不同的字段，如 URL、标题、描述等。

Yandex 的 XML 响应如下： http: [//pastebin.com/kAVAVri9](http://pastebin.com/kAVAVri9)

这就是我实现的方式：[粘贴](http://pastebin.com/jsuwU50B)

```
$dom5 = new DOMDocument();

if ($dom5->loadXML($site_results)) {

    $results  = $dom5->getElementsByTagName("response");
    $results1 = $results->getElementsByTagName("results");
    $results2 = $results1->getElementsByTagName("group");

    $totals["yandex"] = 1000;

    foreach ($results1 as $link) {

        $url = $link->getElementsByTagName("doc")->item(2)->nodeValue;
        ;
        $url = str_replace('http://', '', $url);
        if (substr($url, -1, 1) == '/') {
            $url = substr($url, 0, strlen($url) - 1);
        }
        $search_results[$i]["url"] = $url;

        $title                       = $link->getElementsByTagName("doc")->item(4)->nodeValue;
        $search_results[$i]["title"] = $title;
        $test                        = $link->getElementsByTagName("doc");
        $test1                       = $test->getElementsByTagName("title");
        $desc                        = $test1->getElementsByTagName("headline")->item(0)->nodeValue;
        $search_results[$i]["desc"]  = $desc;

        $search_results[$i]["engine"]   = 'yandex';
        $search_results[$i]["position"] = $i + 1;
        $i++;

    }
} 
```

我是 php 新手。如果我犯了一些愚蠢的错误，请原谅我。我无法通过我的实施来检索结果。请帮我找出错误并从 xml 响应中获取必要的字段。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T00:42:41.610

该方法`getElementsByTagName()`返回一个`DOMNodeList`：

```
$results  = $dom5->getElementsByTagName("response"); 
```

`DOMNodeList`没有名为 的方法，***但***`getElementsByTagName()`您调用它：

```
$results1 = $results->getElementsByTagName("results"); 
```

因此触发了致命错误：每当在 PHP 中对不存在的对象执行方法时，您将收到致命错误并且脚本停止工作。

不要调用未定义的对象方法，你应该没问题。

除了这些基础知识，对于解析此类 XML 文档，我通常建议使用 SimpleXML，但是此 XML 文件有点具体，因此我建议从 SimpleXML 扩展并添加您可能需要使用的功能，部分来自正则表达式以及 DOMDocument .

解析这些 XML 文件时应该了解的一个概念是 Xpath。例如，要访问您在上面遇到很多问题的元素，您可以逐字编写路径：

```
/*/response/results/grouping/group 
```

在带有 SimpleXML 的 PHP 中，这看起来像：

```
$url = 'http://pastebin.com/raw.php?i=kAVAVri9';
$xml = simplexml_load_file($url, 'MySimpleXML');
foreach ($xml->xpath('/*/response/results/grouping/group') as $link) {
    # ... operate on $link
} 
```

一个更大的例子：

```
$url = 'http://pastebin.com/raw.php?i=kAVAVri9';
$url = '../data/yandex.xml';
$xml = simplexml_load_file($url, 'MySimpleXML');
foreach ($xml->xpath('/*/response/results/grouping/group') as $link) {
    $url      = $link->doc->url->str()->preg('~^https?://(.*?)/*$~u', '$1');
    $title    = $link->doc->title->text();
    $headline = $link->doc->headline->text();
    printf("<%s> %s\n%s\n\n", $url, $title, wordwrap($headline));
} 
```

这是典型的输出：

```
<www.facebook.com> " Facebook" - a social networking service
Allows users to find and communicate with friends, classmates and
colleagues, share thoughts, photos and videos, and join various groups.

<en.wikipedia.org/wiki/Facebook>  Facebook - Wikipedia, the free encyclopedia
 Facebook is a social networking service launched in February 2004, owned
and operated by Facebook, Inc. As of September 2012, Facebook has over one
billion active users, more than half of them using Facebook on a mobile
device.

<mashable.com/category/facebook>  Facebook 

... 
```

上面的 PHP 代码示例需要更多代码才能工作，因为它从 SimpleXML 扩展而来以便于使用。这是通过以下代码完成的：

```
class MySimpleXML extends SimpleXMLElement
{
    public function text()
    {
        $string = null === $this[0] ? ''
            : (dom_import_simplexml($this)->textContent);

        return $this->str($string)->normlaizeWS();
    }

    public function str($string = null)
    {
        return new MyString($string ?: $this);
    }
}

class MyString
{
    private $string;

    public function __construct($string)
    {
        $this->string = $string;
    }

    public function preg($pattern, $replacement)
    {
        return new self(preg_replace($pattern, $replacement, $this));
    }

    public function normlaizeWS()
    {
        return $this->preg('~\s+~', ' ');
    }

    public function __toString()
    {
        return (string) $this->string;
    }
} 
```

刚开始这可能有点多，请查看 SimpleXML 的 PHP 手册和代码示例中使用的其他函数。

# mysql - 从 2 个表中选择

> ID：15439497
> 
> 赞同：-4
> 
> 时间：2013-03-15T18:19:12.807
> 
> 标签：mysql

![表结构](../Images/144b5e743f2ad4a2322d415343964f97.png)

我从log_table中选择，`user_id` `changes`但选择时，我希望在user_name表中`user_id`对应`username`，其中log_table和user_table匹配的ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:36:04.923

我将在这里提供一个额外的答案，因为您才刚刚开始。此 INNER JOIN 代码将从 LOG_TABLE 中选择与 USER_TABLE 匹配的每一行。

```
SELECT l.id, l.changes, u.username
FROM LOG_TABLE l
INNER JOIN USER_TABLE u ON u.id = l.user_id 
```

如果您想从 LOG_TABLE 中选择，但真的不在乎它是否在 USER_TABLE 中匹配，您可以改为执行 LEFT JOIN：

```
SELECT l.id, l.changes, u.username
FROM LOG_TABLE l
LEFT JOIN USER_TABLE u ON u.id = l.user_id 
```

在编写 JOIN 时，明确说明您的 JOIN 关键字和条件总是一个好主意。如果您使用隐式 JOIN（在 FROM 子句之后列出的表，用逗号分隔），如果您的 WHERE 子句被意外省略，您将面临生成笛卡尔积的风险。

举个例子，这里是一个问题，其中 OP 使用了逗号分隔的 JOIN 表示法，并且无意中创建了笛卡尔积：[MySQL Query - Join Issues](https://stackoverflow.com/questions/15457079/mysql-query-join-issues)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:21:32.700

你想要的是一个JOIN。查看[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)对于这个特定的例子，你想要的是这样的：

```
SELECT l.changes, u.username
FROM LOG_TABLE l, USER_TABLE u
WHERE u.id=l.user_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:44:13.067

```
SELECT l.changes, u.username
FROM LOG_TABLE l
JOIN USER_TABLE u on u.id=l.user_id 
```

# r - 错误时继续循环

> ID：15439501
> 
> 赞同：0
> 
> 时间：2013-03-15T18:19:27.723
> 
> 标签：r

我在循环中有一个函数，如果出现错误，我希望循环继续。我试过了：

```
for (num in 1:20) {
    tryCatch(fnABC(num),error=0)
} 
```

但是循环因错误而停止，我收到一条消息：

> tryCatchOne(expr, names, parentenv, handlers[[1L]]) 中的错误：
> 尝试应用非函数

我会很高兴知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:51:22.983

tryCatch 的错误参数应该是一个函数，尽管与@joran 不同，我无法在帮助页面的任何详细信息部分中看到这一点。但是，从第 4 个示例中可以明显看出（如果您从错误消息中处于正确的思维框架中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:01:46.160

您可以使用“尝试”功能来完成您的任务：

```
for (num in 1:20) {
    try({
        fnABC(num)
    }, silent=T)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T12:07:56.730

```
for (num in 1:20) {
tryCatch(fnABC(num),error = function(e) {error=0 } )
} 
```

# objective-c - 从 NSAttributedString 获取属性字典

> ID：15439506
> 
> 赞同：5
> 
> 时间：2013-03-15T18:19:39.780
> 
> 标签：objective-c

如何获取 NSAttributedString 的属性？

我想使用`enumerateAttributesInRange:NSMakeRange(0, str.length)`然后将每个属性保存在 NSMutableDictionaries 中，但我想知道是否存在更好的方法。

编辑------ 我的问题是我有一个`NSAttributedString`并且我想在它的属性上使用这个函数......

```
CTFramesetterSuggestFrameSizeWithConstraints(framesetter,range, __ATTRIBUTES__, size , NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-07T10:22:01.603

```
 NSDictionary *attributesFromString = [string attributesAtIndex:0 longestEffectiveRange:nil inRange:NSMakeRange(0, string.length)]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-18T11:44:25.640

```
UITextView *t = [[UITextView alloc] init];
[t setAttributedText:a];
t.typingAttributtes 
```

# excel - 在电子表格仍打开时将 Excel 数据导入 SAS

> ID：15439507
> 
> 赞同：1
> 
> 时间：2013-03-15T18:19:46.410
> 
> 标签：excel, sas

我正在使用 SAS 和 Excel 进行演示，并且希望能够在 Base SAS 中运行一个脚本来导入我*的屏幕上的*Excel 数据。

这是否可以使用本机 SAS 例程或 DDE 作为最后的手段？我正在使用 Excel 2010 和 SAS 9.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:15:30.450

您可以使用 FILELOCKS 选项。SAS 将忽略任何锁并照常进行。我一直将它与 PROC IMPORT 一起使用。

options filelocks = ("&workbookdir" NONE);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:37:04.097

Base SAS alone cannot read from an Excel workbook. With the SAS Access to PC File Formats product (a separately licensed component), SAS can read from the most recently "saved" copy of the workbook:

```
proc import datafile='c:\temp\test4sas.xlsx'
     out=test
     replace;
run; 
```

Note that SAS will not read directly from your Excel application, it reads from the workbook file itself. If you have "autosave" features turned on, the SAS dataset imported will contain whatever is currently "saved" in the workbook.

You might very well have SAS Access licensed on your site (most Windows sites have it as part of a bundle). To confirm, run this to see all the products licensed:

```
proc setinit;
run; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T23:20:10.037

认为 DDE 是您最好的选择 - 以下代码应该可以解决问题（根据需要进行修改）：

```
filename xlSheet1 dde "Excel|C:\Location_of_excel_file\[demo.xlsx]Sheet1!R2C1:R40C2";
data mydataset;
   infile xlSheet1 dlm='09'x notab dsd missover;
   input var1:$15\. var2:$15.;
run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:45:36.670

我认为 DDE 将是*屏幕*数据最明显的解决方案。我不是 DDE 专家，但鉴于 DDE 通过与当前正在运行的 Excel 进程交互来运行，它当然似乎是为您的结果量身定做的，尽管它有缺点并且即使没有被实际弃用也很有效。

另一个合理的解决方案是编写一个宏，将您的屏幕数据导出到 CSV，然后调用导入该 CSV 的 SAS 例程。您可以从 VBA 调用 SAS（与任何其他程序一样），因此它将集成到您的 Excel 工作簿中（如果这可以来自许多工作簿，请将宏放在您的个人工作簿中，或者如果您需要使用 .xlsm别人的电脑）。这大概就是我会做的。

最后，还有适用于 Excel 的 SAS 插件。 [http://support.sas.com/documentation/onlinedoc/addin/index.html](http://support.sas.com/documentation/onlinedoc/addin/index.html) 我没有这方面的经验，但它可能会满足您的需求[取决于具体细节]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T16:46:50.463

我没有尽可能地密切关注，但似乎有一段时间它不允许我这样做，但现在它允许我使用 Proc Import 并在 Excel 中打开文件。然而，它还可以打开另一个版本的 Excel，电子表格以只读模式打开。我希望它不会那样做，这就是我看到这篇文章的方式。我不知道这是否重要，但我正在使用 PC 文件服务器引擎来读取工作表 (DBMS=EXCELCS)。

注意： http: [//support.sas.com/kb/15/547.html](http://support.sas.com/kb/15/547.html)说如果文件打开而不是关闭，SAS 会得到不同的结果。我有这样的经验，如果电子表格打开，列将被读取为与工作表关闭时的读取方式不同的类型。

# arrays - 在 Matlab 中比较不同大小的数组

> ID：15439509
> 
> 赞同：1
> 
> 时间：2013-03-15T18:19:58.943
> 
> 标签：arrays, matlab, compare

我需要在 Matlab 中比较两个不同的数组。它将用于 Yahtzee 游戏。如果我有一个包含 [1 2 3 4] 的数组和一个包含 [1 2 3 4 5] 的数组，我如何检查第一个数组是否包含在第二个数组中。我只需要知道 T/F 结果，而不是关于缺少哪些元素等的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:21:59.550

`ismember`会做的。例如：

```
x = [1 2 3 4]
y = [1 2 3 4 5]
all(ismember(x,y)) 
```

您也可以使用`setdiff`. 例如：

```
isempty(setdiff(x,y)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:01:22.040

另外一个选项，

```
all(intersect(x,y)==x) 
```

但`ismember`可能更有效....

# android - android在Service中实现数据库检查器方法

> ID：15439513
> 
> 赞同：0
> 
> 时间：2013-03-15T18:20:09.927
> 
> 标签：android

我如何在服务中实现以下方法，我希望它每 1 分钟工作一次（如果对应于当前时间，代码是检查天小时 mint 做某事）我看到了很多问题但没有用，请帮助。谢谢

{String[] columns = new String[] { KEY_ROWID, KEY_chNAME, KEY_prNAME, KEY_Rerun, KEY_HOUR, KEY_MINUTE, KEY_SUN, KEY_MON, KEY_TUE, KEY_WED, KEY_THU, KEY_FRI, KEY_SAT }; 光标 c = ourdatabase.query(DATABASE_TABLE, columns, null, null, null,null, null); 字符串结果 = "";

```
 Calendar cl = Calendar.getInstance();
    int today = cl.get(Calendar.DAY_OF_WEEK);

    // String mStr="";
    // mStr=mStr.concat("<body>");
    // mStr=mStr.concat("<table border='1' ><tr> <th style='width:5px></th><td align='center'><b> Channal  </b></td><td align='center'><b>  Program  </b></td><td align='center'><b>  Time  </b></tr>");
    int iRow = c.getColumnIndex(KEY_ROWID);
    int iCh = c.getColumnIndex(KEY_chNAME);
    int ipr = c.getColumnIndex(KEY_prNAME);
    int iHr = c.getColumnIndex(KEY_HOUR);
    int iMin = c.getColumnIndex(KEY_MINUTE);
    int iRerun = c.getColumnIndex(KEY_Rerun);
    int iSun = c.getColumnIndex(KEY_SUN);
    int iMon = c.getColumnIndex(KEY_MON);
    int iTue = c.getColumnIndex(KEY_TUE);
    int iWed = c.getColumnIndex(KEY_WED);
    int iThu = c.getColumnIndex(KEY_THU);
    int iFri = c.getColumnIndex(KEY_FRI);
    int iSat = c.getColumnIndex(KEY_SAT);

    DecimalFormat twoDigits = new DecimalFormat( "00" );

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        if (today == Integer.parseInt(c.getString(iSun))) {
            result += c.getString(iRow) + " - " + c.getString(iCh) + "\t  "
                    + c.getString(ipr) + "\t " + c.getString(iHr) + ":"
                    + twoDigits.format(Integer.parseInt(c.getString(iMin))) + "  " + c.getString(iRerun) + "\n";
        }

        else if (today == Integer.parseInt(c.getString(iMon))) {

            //int mm=Integer.parseInt( twoDigits.format(Integer.parseInt(c.getString(iMin))));

            result += c.getString(iRow) + " - " + c.getString(iCh) + "\t  "
                    + c.getString(ipr) + "\t " + c.getString(iHr) + ":"
                    + twoDigits.format(Integer.parseInt(c.getString(iMin))) + "  " + c.getString(iRerun) + "\n";
        }

        else if (today == Integer.parseInt(c.getString(iTue))) {
            result += c.getString(iRow) + " - " + c.getString(iCh) + "\t  "
                    + c.getString(ipr) + "\t " + c.getString(iHr) + ":"
                    + twoDigits.format(Integer.parseInt(c.getString(iMin)))+ "  " + c.getString(iRerun) + "\n";
        }

        else if (today == Integer.parseInt(c.getString(iWed))) {
            result += c.getString(iRow) + " - " + c.getString(iCh) + "\t  "
                    + c.getString(ipr) + "\t " + c.getString(iHr) + ":"
                    + twoDigits.format(Integer.parseInt(c.getString(iMin))) + "  " + c.getString(iRerun) + "\n";
        }

        else if (today == Integer.parseInt(c.getString(iThu))) {
            result += c.getString(iRow) + " - " + c.getString(iCh) + "\t  "
                    + c.getString(ipr) + "\t " + c.getString(iHr) + ":"
                    + twoDigits.format(Integer.parseInt(c.getString(iMin))) + "  " + c.getString(iRerun) + "\n";
        }

        else if (today == Integer.parseInt(c.getString(iFri))) {
            result += c.getString(iRow) + " - " + c.getString(iCh) + "\t  "
                    + c.getString(ipr) + "\t " + c.getString(iHr) + ":"
                    + twoDigits.format(Integer.parseInt(c.getString(iMin))) + "  " + c.getString(iRerun) + "\n";
        }

        else if (today == Integer.parseInt(c.getString(iSat))) {
            result += c.getString(iRow) + " - " + c.getString(iCh) + "\t  "
                    + c.getString(ipr) + "\t " + c.getString(iHr) + ":"
                    +twoDigits.format(Integer.parseInt(c.getString(iMin))) + "  " + c.getString(iRerun) + "\n";
        }
    }
    c.close(); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:29:38.897

使用 AlarmManager + IntentService 的组合。

使用警报管理器，您可以安排事件。IntentServices 是在后台线程中执行一次性任务的服务。它们的组合是执行预定作业的更直接的方式。

检查例如[这篇](http://www.dotkam.com/2011/01/10/android-prefer-alarms-and-intent-receivers-to-services/)文章

# python - sqlalchemy 和 postgresql 的自动增量

> ID：15439514
> 
> 赞同：7
> 
> 时间：2013-03-15T18:20:14.397
> 
> 标签：python, postgresql, sqlalchemy

我创建了一个带有主键和序列的表，但是通过调试广告稍后查看表设计，没有应用序列，只是创建了。

```
from sqlalchemy import create_engine, MetaData, Table, Column,Integer,String,Boolean,Sequence
from sqlalchemy.orm import mapper, sessionmaker
from sqlalchemy.ext.declarative import declarative_base
import json
class Bookmarks(object):
    pass

#----------------------------------------------------------------------
engine = create_engine('postgresql://iser:p@host/sconf', echo=True)
Base = declarative_base()

class Tramo(Base):
    __tablename__ = 'tramos'
    __mapper_args__ = {'column_prefix':'tramos'}

    id = Column(Integer, Sequence('seq_tramos_id', start=1, increment=1),primary_key=True)
    nombre = Column(String)
    tramo_data = Column(String)
    estado = Column(Boolean,default=True)

    def __init__(self,nombre,tramo_data):
        self.nombre=nombre
        self.tramo_data=tramo_data

    def __repr__(self):
        return '[id:%d][nombre:%s][tramo:%s]' % self.id, self.nombre,self.tramo_data

Session = sessionmaker(bind=engine)
session = Session()

tabla = Tramo.__table__
metadata = Base.metadata
metadata.create_all(engine) 
```

表就是这样创建的

```
CREATE TABLE tramos (
    id INTEGER NOT NULL, 
    nombre VARCHAR, 
    tramo_data VARCHAR, 
    estado BOOLEAN, 
    PRIMARY KEY (id)
) 
```

我希望看到序列的默认 nexval 的声明，但它不存在。

我也使用了，`__mapper_args__`但看起来它被忽略了。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-22T20:05:14.567

我意识到这是一个旧线程，但我偶然发现了同样的问题并且无法在其他任何地方找到解决方案。

经过一些试验，我能够用以下代码解决这个问题：

```
TABLE_ID = Sequence('table_id_seq', start=1000)

class Table(Base):
    __tablename__ = 'table'

    id = Column(Integer, TABLE_ID, primary_key=True, server_default=TABLE_ID.next_value()) 
```

这样，序列被创建并用作 column 的默认值`id`，其行为与 SQLAlchemy 隐式创建的行为相同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-22T20:21:52.617

我遇到了复合多列主键的类似问题。`SERIAL`仅隐式应用于单列主键。但是，可以通过[autoincrement](http://docs.sqlalchemy.org/en/latest/core/metadata.html#sqlalchemy.schema.Column.params.autoincrement)参数（默认为`"auto"`）控制此行为：

```
id = Column(Integer, primary_key=True, autoincrement=True) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-15T18:38:06.907

您指定了一个`Sequence()`带有名称的显式对象。如果您要省略它，则将`SERIAL`添加到`id`主键规范中：

```
CREATE TABLE tramos (
    id INTEGER SERIAL NOT NULL, 
    nombre VARCHAR, 
    tramo_data VARCHAR, 
    estado BOOLEAN, 
    PRIMARY KEY (id)
) 
```

`DEFAULT`仅当列不是主键时才会生成A。

插入时，SQLAlchemy 将`select nextval(..)`根据需要发出 a 以创建下一个值。有关详细信息，请参阅[PostgreSQL 文档](http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sequences-serial)。

# mysql - 将一张表的计数与另一张表的计数相结合

> ID：15439516
> 
> 赞同：1
> 
> 时间：2013-03-15T18:20:19.843
> 
> 标签：mysql, sql

我已经设置了一个比赛，其中发送视频提交，然后人们对其进行投票。提交被发送到`submissions`具有以下结构的表中：

```
submission_id, title, videoname 
```

投票表`votes`结构为：

```
video_id, voter_id 
```

video_id 与提交表中的 submit_id 相关。

我想获得每个视频的票数，如下所示：

```
select video_id, count(1) from votes group by submission_id 
```

但我也想显示每个视频的标题，所以结果是：

```
video_id, count, title 
```

我是一个 sql 菜鸟，所以如果这是一个简单的陈述，请原谅我。我已经做了一些研究，但无法自己提出一些建议，希望能提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:23:35.287

我建议使用 a`LEFT JOIN`而不是`INNER JOIN`... 而`COUNT(v.video_id)`不是`COUNT(*)`. 这样，您仍将返回当前有 0 票的提交：

```
select
  s.submission_id as video_id,
  count(v.video_id) as vote_count,
  s.title
from
  submissions s
  left join votes v on v.video_id = s.submission_id
group by 
  s.submission_id, 
  s.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:23:54.870

```
select s.submission_id, s.title, s.videoname, c.cnt
from
submissions s,
(select video_id, count(1) as cnt from votes group by video_id) c
where
s.submission_id = c.video_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:23:59.407

这将返回您提交表中的每个视频，并在投票表中显示投票数。如果没有任何投票，它将在结果中显示为 NULL 作为 Votes 列

```
SELECT video_id, title, COUNT(voter_id) Votes
FROM submissions s
    LEFT OUTER JOIN votes v ON s.submission_id = v.video_id
GROUP BY video_id, title, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:25:18.403

您必须在两个表之间进行连接以检索投票和视频标题，如下所示：

```
SELECT submissions.submission_id
     , COUNT(1)
     , submissions.videoname
FROM submissions LEFT OUTER JOIN votes
    ON votes.video_id = submissions.submission_id
GROUP BY submissions.submission_id, submissions.videoname 
```

# python - 使用单例作为计数器

> ID：15439518
> 
> 赞同：3
> 
> 时间：2013-03-15T18:20:28.020
> 
> 标签：python, singleton, python-2.6

我有一个自动化测试，它使用为文件夹创建屏幕截图的功能。该函数被多个截图实例调用。在每次测试运行时，都会创建一个新文件夹，所以我不关心计数器重置。为了反映这些屏幕截图的顺序，我必须想出可以按顺序排序的名称。这是我的解决方案：

```
def make_screenshot_file(file_name):
    order = Counter().count
    test_suites_path = _make_job_directory()
    return make_writable_file(os.path.join(test_suites_path,'screenshot',file_name % order))

class Counter():
    __counter_instance = None

    def __init__(self):
        if Counter.__counter_instance is None:
            self.count = 1
            Counter.__counter_instance = self
        else: 
            Counter.__counter_instance.count += 1
            self.count =  Counter.__counter_instance.count 
```

这对我来说可以。但我一直认为应该有一种更简单的方法来解决这个问题。在那儿？如果单例是唯一的方法，我的代码可以以任何方式优化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:44:34.037

您在这里尝试做的是模拟一个全局变量。

没有充分的理由这样做。如果您真的想要一个全局变量，请将其明确设为全局变量。

您可以创建一个简单的`Counter`类，`count`每次访问它时递增 1，然后创建它的全局实例。但是标准库已经免费为您提供了类似的东西[`itertools.count`](http://docs.python.org/2/library/itertools.html#itertools.count)，正如 DSM 在评论中解释的那样。

所以：

```
import itertools

_counter = itertools.count()
def make_screenshot_file(file_name):
    order = next(_counter)
    test_suites_path = _make_job_directory()
    return make_writable_file(os.path.join(test_suites_path,'screenshot',file_name % order)) 
```

我不确定您为什么如此担心这会占用多少存储空间或时间，因为我无法想象任何程序可能对您使用 8 字节或 800 字节的单个对象很重要，您永远不会有多个或，或者当你只访问它几次时，它是否需要 3ns 或 3us 才能访问它。

但是如果你*担心*，正如你从[源代码](http://hg.python.org/cpython/file/2.7/Modules/itertoolsmodule.c#l3229)中看到的那样，`count`它是用 C 实现的，它非常节省内存，如果你不做任何花哨的事情，它基本上可以归结为一个`PyNumber_Add`生成每个数字，这比解释几行代码要少得多。

* * *

既然你问了，这里是你可以通过使用`_count`类属性而不是类属性从根本上简化现有代码的方法`__counter_instance`：

```
class Counter():
    _count = 0
    def count(self):
        Counter._count += 1
        return Counter.count 
```

当然，现在你必须这样做，`Counter().count()`而不是仅仅——但如果重要的话`Counter().count`，你可以用微不足道的方式解决`@property`这个问题。

值得指出的是，使用经典类而不是新式类（通过在括号内不传递任何内容）是一个非常糟糕的主意，如果你*确实*想要一个经典类，你应该关闭括号，大多数 Python 程序员将 name`Counter`与 class相关联`collections.Counter`，没有理由`count`不能是 a `@classmethod`or `@staticmethod`... 在这一点上，这正是 Andrew T. 的答案。正如他所指出的，这比您正在做的事情要简单得多，而且或多或少是 Pythonic。

但实际上，所有这一切并不比仅仅创建`_count`一个模块级全局并添加一个模块级`count()`函数来递增和返回它更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:23:51.620

为什么不做

```
order = time.time() 
```

或做类似的事情

```
import glob #glob is used for unix like path expansion
order = len(glob.glob(os.path.join(test_suites_path,"screenshot","%s*"%filename)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:35:40.610

Using static methods and variables. Not very pythonic, but simpler.

```
def make_screenshot_file(file_name):
    order = Counter.count() #Note the move of the parens
    test_suites_path = _make_job_directory()
    return make_writable_file(os.path.join(test_suites_path,'screenshot',file_name % order))

class Counter():
  count_n = 0

  @staticmethod
  def count():
    Counter.count_n += 1
    return Counter.count_n

print Counter.count()
print Counter.count()
print Counter.count()
print Counter.count()
print Counter.count()

atarzwell@freeman:~/src$ python so.py
1
2
3
4
5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T21:56:46.103

好吧，你可以使用这个解决方案，只要确保你从不初始化 order kwarg！

函数中的 Mutable Kwargs 就像类全局变量一样。并且该值不会在调用之间重置为默认值，正如您一开始可能会想到的那样！

```
def make_screenshot_file(file_name , order=[0]):
    order[0] = order[0] + 1
    test_suites_path = _make_job_directory()
    return make_writable_file(os.path.join(test_suites_path,'screenshot',file_name % order[0])) 
```

# java - 在对象列表中，当你只有对象的唯一名称时，如何获取对象

> ID：15439522
> 
> 赞同：0
> 
> 时间：2013-03-15T18:20:53.057
> 
> 标签：java, arraylist

我有一个`ArrayList`对象，我试图返回对象中的`arrayList`对象`.getName() == target`

```
if(arrayList.contains(target)){
    System.out.print(arrayList.get(target));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:24:35.300

假设您的对象是类型`Foo`：

```
for (Foo item : arrayList) {
    if (item.getName().equals(target)) return item;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:26:34.877

你可以试试这个：

```
int index = list.indexOf(elementToBeMatched);
    if (index != -1) {
        // Match found. Use this index
    } else {
        // match not found
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:22:46.477

```
for (int i = 0; i < arrayList.size(); ++i) {
  if (arrayList.get(i).equals(target))
    return i;
} 
```

或更好：

```
arrayList.indexOf(target) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:23:58.307

用这个

```
arrayList.get(arrayList.indexOf(target)) 
```

您需要检查 -1 条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T18:24:14.337

```
if(arrayList.contains(target)){
   System.out.print(arrayList.get(arrayList.indexOf(target)));
} 
```

# iphone - 添加图像视图时按钮创建错误

> ID：15439523
> 
> 赞同：0
> 
> 时间：2013-03-15T18:20:57.913
> 
> 标签：iphone, ios, xcode, uiimageview, uibutton

每当我单击旋转时，它都会生成此错误并使应用程序崩溃。在我上传图像视图之前，该应用程序运行良好并且旋转很棒。我知道代码可能告诉我出了什么问题，但我在理解这一点时遇到了问题。

下面用粗体表示的是它的生成

```
- (IBAction)spinAction:(id)sender {

    [_chosenComponents removeAllObjects];
    for (int i = 0; i < _componentsInPicker.count; i++) {
        int randNum = arc4random() % [self.theSlotPicker numberOfRowsInComponent:i];

        [_theSlotPicker selectRow:randNum inComponent: i animated:YES];
        [_chosenComponents addObject:
         [NSNumber numberWithInt:[(NSArray *)[_baseList objectAtIndex:i] indexOfObject:[(NSArray *)[_componentsInPicker objectAtIndex:i] objectAtIndex:randNum]]]];
    }
    NSLog(@"%@", _chosenComponents); 
```

按下按钮后吐出/崩溃“线程 1：EXC_ARITHMETIC (code=EXC_1386_DIV,subcode=0x0)”

如果可以，请指导我如何解决此错误。

谢谢！

* * *

输出错误：（lldb）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:40:32.220

发生此错误可能是因为在使用时发生除以零`arc4random() % .....`

而不是使用`arc4random() % n`use `arc4random_uniform(n)`。它将返回一个 0 到 n 范围内的数字。

然而，这并不能解决固有的问题

`[self.theSlotPicker numberOfRowsInComponent:i]`在某个时间点返回零。

# css - 将 DIV 置于绝对 DIVS（页脚）下方

> ID：15439524
> 
> 赞同：1
> 
> 时间：2013-03-15T18:21:00.853
> 
> 标签：css, html, position, footer, absolute

如果你能帮我定位一下，我会很高兴的。这是[网站](http://fami.nazwa.pl/cc/apro)。问题是我的页脚。我不能让它始终显示在容器下方（如果文本容器低于 img）。如果文本足够短，不会低于 img 就可以了。我尝试了许多解决方案，但似乎没有一个对我有用。对此的解决方案可能是制作带有背景的滑块 div，但我不能使用它，因为我希望它适合屏幕（所以我需要在`<img>`其中使用。）任何帮助将不胜感激。长话短说：

```
<div id="container">
<div class="slider"><img with background</div>
<div id="page absolute div">
content
</div>
</div>
<div id="footer"></div> 
```

当“页面” div 不断变大时，另一种解决方案可能是拉伸“容器”高度，但这是不可能的（据我所知），因为它的位置是绝对的。[编辑] www[dot]fami[dot]nazwa.pl/cc/apro/wp-content/themes/apro/style.css div id dol 是页脚网站在我看来如何：[http://i.stack.imgur .com/yjY2a.png](http://i.stack.imgur.com/yjY2a.png) 我希望页脚（div id dol）低于包含内容的绝对 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:31:59.633

我认为您的页面没有任何问题，所以我不明白您要做什么。但是，您是否考虑过使用浮动和清除页脚？

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-15T18:33:23.530

使用 firefox 查看代码和 css，我找不到“页脚”....？

# git - git：为什么“合并分支'master' of ...”？当拉和推

> ID：15439527
> 
> 赞同：37
> 
> 时间：2013-03-15T18:21:12.387
> 
> 标签：git, git-push, git-pull, git-commit

我还是 git 新手。我修改了一些源文件并提交。然后，我做到了`git push`。但是，我得到了这个错误。

```
To /foo/bar/  ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to '/foo/bar/' To prevent you from
losing history, non-fast-forward updates were rejected Merge the
remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details. 
```

`git pull`这个拒绝似乎我以前没有`push`。所以，我做到了`git pull`。好的，有两个其他人修改过的文件。

然后，我能够 `git push`成功。

**问题：**在这种情况下，我看到另一个日志，如下所示，其中包含我的原始提交消息：

```
commit 59e04ce13b8afa...
Merge: 64240ba 76008a5
Author: Jone Doe <jone@doe.com>
Date:   Fri Mar 15 11:08:55 2013 -0700

    Merge branch 'master' of /foo/bar/ 
```

这是我最初的提交信息。

```
commit 64240bafb07705c...
Author: Jone Doe <jone@doe.com>
Date:   Fri Mar 15 11:06:18 2013 -0700

    Fixed bugs and updated! 
```

我想了解为什么要添加“位置合并分支主控”。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-15T18:26:08.527

当您执行 a`git-pull`时，来自远程分支的修改被合并到您的本地分支中。自动生成的提交表明了这一点。

合并可能会导致冲突，然后需要手动解决。在您的特定情况下，这并没有发生，git 可以处理所有事情。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-16T01:53:21.410

如果其他人可能会进行更改，那么最好先做一个`git pull --rebase`（即，在远程更改*之后*添加您的新更改；这可能会发现您必须解决`git push`的冲突）然后结果。小心，这会创建以前从未存在过的新提交（就像任何历史重写一样），但它提供了一个干净的线性历史（没有合并的纠结）

# mysql - 如何在mysql中进行加密数据库备份

> ID：15439529
> 
> 赞同：0
> 
> 时间：2013-03-15T18:21:17.893
> 
> 标签：mysql, encryption, mysqldump, redhat

我正在使用 mysql-5.5 和 rhel5，我的意图是使用 mysqldump 进行加密备份和压缩备份

因为我使用mysqldump如下

```
mysqldump -u root -p db_name | gzip >file_name.sql.gz 
```

它将提供压缩备份但不加密备份

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:49:21.033

这个怎么样：

```
mysqldump -u root -p db_name | gpg --encrypt -r 'user_id' | gzip >file_name.sql.gz 
```

当然，您需要要为其加密的用户的公钥。

例如

```
gpg --import keyfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:23:51.267

除非您真的喜欢 GPG，否则不要使用 GPG，坦率地说，有点矫枉过正，您可以使用 OpenSSL，它可能是内置的，没有真正的依赖结构，可以轻松进行可移植和可解密的备份。通过这种方式，您可以轻松地在几乎任何 Linux 系统（和许多其他平台）上解密备份，而无需任何密钥环，只需知道密码。

在[此链接上阅读有关如何操作](http://tombuntu.com/index.php/2007/12/12/simple-file-encryption-with-openssl/)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-28T19:21:10.887

另请注意，`-p`通过命令行使用是非常糟糕的做法，因为密码可以通过`ps aux`.

我建议使用`openssl`as`pgp`来减慢大文件的速度。

到目前为止，我在工作中经常使用的最佳解决方案是[mysqldump-secure](https://github.com/cytopia/mysqldump-secure)。

它提供了 openssl 加密和压缩以及其他更多功能，甚至还附带了一个 nagios 监控插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-08T07:13:17.147

备份一个数据库，更改里面的内容 [..]

```
mysqldump -u root --single-transaction [DataBaseName] | gzip | openssl enc -pbkdf2 -k [MyPassword] > database.sql.zip.enc 
```

分别备份所有数据库：

```
date=`date "+%Y%m%d"`
for DB in $(mysql -u root -e 'show databases' -s --skip-column-names); do
        mysqldump -u root --single-transaction $DB | gzip | openssl enc -pbkdf2 -k [MyPassword] > db-$DB-$date.sql.gz.enc;
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-18T01:54:57.053

我使用以下 Bash 脚本，该脚本使用 Dropbox 将备份直接同步到我们自己的公司服务器（然后自动备份该数据）。用您自己的替换脚本变量。然后我只需将它添加到我的 crontab 中，每 12 小时运行一次。

```
FILENAME=dbname.$(date +%Y-%m-%d-%H-%M)

SQLFILE=/root/Desktop/$FILENAME.sql
ZIPFILE=/root/Desktop/$FILENAME.zip
GPGFILE=/root/Dropbox/SQL-Backups/$FILENAME.gpg

mysqldump --user=dbuser --password=password --port=3306 --default-character-set=utf8 --single-transaction=TRUE --databases "dbname" --result-file="$SQLFILE"
zip -9 $ZIPFILE $SQLFILE
gpg --output "$GPGFILE" --encrypt --recipient "recipient@company.com" "$ZIPFILE"
unlink $ZIPFILE
unlink $SQLFILE 
```

这使用 GnuPG 加密生成的压缩 SQL 转储。切记永远不要将*私钥*导入Web 服务器。Web 服务器的 GPG 设置只需要公钥。

您可以使用适用于大多数平台的[GPG 软件](https://gpgtools.org/)来创建您的密钥并将公钥发布到密钥服务器。

# java - 从 Java 中的 SharePoint 列表中删除文件

> ID：15439534
> 
> 赞同：0
> 
> 时间：2013-03-15T18:21:27.753
> 
> 标签：java, sharepoint, soap

我正在尝试从 Java 中的 Sharepoint 列表中删除文件并遇到一些问题。我正在使用[此处描述的批处理元素](http://msdn.microsoft.com/en-us/library/lists.lists.updatelistitems%28v=office.12%29.aspx)

我可以提出请求，但返回的结果为 null 并且文件没有被删除（我没有收到任何错误）。

这是我正在使用的 UpdateListItems.Update 的代码：

```
 UpdateListItems.Updates updates = new UpdateListItems.Updates();
    updates.getContent().add(this.generateXmlNode(      
        "<Batch PreCalc='True' OnError='Continue' ListVersion='1' ListName='" + spMoveRequest.getListName() + "'>" +
            "<Method ID='1' Cmd='Delete'>" +
            "<Field Name='ID'>5</Field>" +//this must be where we   specify the file
            "</Method>" +
        "</Batch>"
    )); 
```

然后我对 listSoap 对象进行方法调用，如下所示：

```
 UpdateListItemsResult updateResult = listSoap.updateListItems("<my list name here>", updates); 
```

我还尝试了许多变体，例如使用 GUID 而不是实际列表名称并使用

```
 <Field Name='FileRef'><my file url here></Field> 
```

来识别文件。

似乎没有任何效果，我也没有得到任何有用的反馈。

我使用的 generateXmlNode 方法如下所示：

```
 protected Node generateXmlNode(String sXML) throws ParserConfigurationException, SAXException, IOException {

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setValidating(false);
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document documentOptions = builder.parse(new InputSource(new StringReader(sXML)));
    Node elementOptions = documentOptions.getDocumentElement();
    return elementOptions;

} 
```

但是我过去在毫无问题地检索共享点列表时使用过它。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:24:40.290

另一种解决方案是使用**HTTP DELETE 方法**将文件直接删除到具有 NTLMv2 身份验证的 Sharepoint

为此，您可以使用**Apache HTTP 客户端**：

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.2.3</version>
</dependency> 
```

要允许 NTLMv2 身份验证，您需要**JCIF**库。

```
<dependency>
   <groupId>jcifs</groupId>
   <artifactId>jcifs</artifactId>
   <version>1.3.17</version>
</dependency> 
```

首先，我们需要编写一个包装器以允许 Apache HTTP 客户端使用 JCIF 来支持 NTLMv2：

```
public final class JCIFSEngine implements NTLMEngine {

    private static final int TYPE_1_FLAGS =
            NtlmFlags.NTLMSSP_NEGOTIATE_56
            | NtlmFlags.NTLMSSP_NEGOTIATE_128
            | NtlmFlags.NTLMSSP_NEGOTIATE_NTLM2
            | NtlmFlags.NTLMSSP_NEGOTIATE_ALWAYS_SIGN
            | NtlmFlags.NTLMSSP_REQUEST_TARGET;

    @Override
    public String generateType1Msg(final String domain, final String workstation)
            throws NTLMEngineException {
        final Type1Message type1Message = new Type1Message(TYPE_1_FLAGS, domain, workstation);
        return Base64.encode(type1Message.toByteArray());
    }

    @Override
    public String generateType3Msg(final String username, final String password,
            final String domain, final String workstation, final String challenge)
            throws NTLMEngineException {
        Type2Message type2Message;
        try {
            type2Message = new Type2Message(Base64.decode(challenge));
        } catch (final IOException exception) {
            throw new NTLMEngineException("Invalid NTLM type 2 message", exception);
        }
        final int type2Flags = type2Message.getFlags();
        final int type3Flags = type2Flags
                & (0xffffffff ^ (NtlmFlags.NTLMSSP_TARGET_TYPE_DOMAIN | NtlmFlags.NTLMSSP_TARGET_TYPE_SERVER));
        final Type3Message type3Message = new Type3Message(type2Message, password, domain,
                username, workstation, type3Flags);
        return Base64.encode(type3Message.toByteArray());
    }
} 
```

[参考](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)

使用身份验证执行 HTTP DELETE 的主要代码：

```
 try {

        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        DefaultHttpClient httpclient = new DefaultHttpClient(params);

        //Register JCIF NTLMv2 to manage ntlm auth.
        httpclient.getAuthSchemes().register("ntlm", new AuthSchemeFactory() {
            @Override
            public AuthScheme newInstance(HttpParams hp) {
                return new NTLMScheme(new JCIFSEngine());
            }
        });

        //Provide login/password
        httpclient.getCredentialsProvider().setCredentials(
                AuthScope.ANY,
                new NTCredentials([LOGIN], [PASSWORD], "", [DOMAIN]));
        //Create HTTP PUT Request   

        HttpPut request = new HttpDelete("http://[server]/[site]/[folder]/[fileName]");         
        return httpclient.execute(request);

    } catch (IOException ex) {
      //...
    } 
```

将文件上传到 Sharepoint 的链接问题：[如何使用 Java 将文档上传到 SharePoint？](https://stackoverflow.com/questions/314258/how-do-i-upload-a-document-to-sharepoint-with-java/16188830#16188830)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-12T12:11:39.243

您可以查看我开发的这个项目，以提供一个可以以非常简单的方式使用的工作共享点休息 api 客户端。看看这里的github：

[https://github.com/kikovalle/PLGSharepointRestAPI-java](https://github.com/kikovalle/PLGSharepointRestAPI-java)

# php - 尝试使用类方法将文件上传到数据库

> ID：15439537
> 
> 赞同：2
> 
> 时间：2013-03-15T18:21:35.383
> 
> 标签：php, class, upload

我正在尝试使用类中的方法将图像文件上传到数据库。它应该像一个函数一样工作。

我有 2 个 php 文件。第一个，接收图片并调用方法的文件：

```
<?php
if (!empty($_FILES)){
    require_once('masterclass.php');

    $galeria = $_POST['gal'];
    $fecha = $_POST['fecha'];
    $titulo = $_FILES['Filedata']['name'];
    $imagen = $_FILES['Filedata']['tmp_name'];

    $mc = new masterclass;
    $mc->saveImage($galeria, $fecha, $titulo, $imagen, 800, 600, 80);
}
?> 
```

第二个，应该做的方法：

```
public function saveImage($galeria, $fecha, $titulo, $tmpImagen, $maxWidth, $maxHeight, $quality){
    if( isset($galeria, $fecha, $titulo, $tmpImagen, $maxWidth, $maxHeight, $quality) ){
        $ms->dbc(true); // connect to database

        $fecha = $this->formatFecha($fecha); // format date string

        $origen = imagecreatefromjpeg($tmpImagen);
        $x = imagesx($origen);
        $y = imagesy($origen);

        if( $x > $maxWidth ){
            $nx = $maxWidth;
            $ny = $y*$nx/$x;
        }
        if( $y > $maxHeight ){
            $ny = $maxHeight;
            $nx = $x*$ny/$y;
        }
        else{
            $nx = $x;
            $ny = $y;
        }

        $destino = imagecreatetruecolor($nx,$ny);
        imagecopyresized($destino,$origen,0,0,0,0,$nx,$ny,$x,$y);
        imagejpeg($destino, $tmpImagen, $quality);
        $imagen = addslashes(fread(fopen($tmpImagen, "rb"), filesize($tmpImagen)));

        $peticion = "insert into galeria_fotos (galeria, fecha, titulo, imagen) values ('$galeria', '$fecha', '$titulo', '$imagen')";
        mysql_query($peticion) or die($this->isError(2));

        $ms->dbc(false); // disconnect from database
     }
     else{
        die($this->isError(2));
    }
} 
```

如果我直接在第一个 php 文件中执行该方法的工作，它就可以工作。但是当我使用类中的 saveImage() 时它不会。我从去年开始只使用 JavaScript，而我对 PHP 很冷淡。

很抱歉西班牙语中的变量名称，但我认为这是完全可以理解的。

作为附加信息，我可以说我`$_FILES`在调用方法时尝试直接发送数组，但没有结果。

希望您能够帮助我。谢谢你们。问候 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:14:18.533

我试图重现您的问题。然而，我做不到。我对我的世界做了一些改变，但我相信会涵盖你发布的所有内容。

按照我的例子：

索引.php

```
<html>
<head></head>
<body>
    <form action="upload.php" enctype="multipart/form-data" method=post>
        <input type="file" id="f_up" name="f_up">
        <input type="submit" value=go>
    </form>
</body>
</html> 
```

上传.php

```
<?php
require_once('masterclass.php');
if (!empty($_FILES)){
    require_once('masterclass.php');

    $galeria = $_POST['gal'];
    $fecha = $_POST['fecha'];
    $titulo = $_FILES['f_up']['name'];
    $imagen = $_FILES['f_up']['tmp_name'];

    $mc = new masterclass;
    $mc->saveImage($imagen, 800, 600, 80);
} 
```

大师班.php

```
<?php
class masterclass{
    public function saveImage($tmpImagen, $maxWidth, $maxHeight, $quality){
        $db = mysql_connect('127.0.0.1','root') or die('could not connect');
        mysql_select_db('examples',$db);
        $origen = imagecreatefromjpeg($tmpImagen);
        if( isset($tmpImagen, $maxWidth, $maxHeight, $quality) ){

            //$fecha = $this->formatFecha($fecha); // format date string

            $origen = imagecreatefromjpeg($tmpImagen);
            $x = imagesx($origen);
            $y = imagesy($origen);

            if( $x > $maxWidth ){
                $nx = $maxWidth;
                $ny = $y*$nx/$x;
            }
            if( $y > $maxHeight ){
                $ny = $maxHeight;
                $nx = $x*$ny/$y;
            }
            else{
                $nx = $x;
                $ny = $y;
            }

            $destino = imagecreatetruecolor($nx,$ny);
            imagecopyresized($destino,$origen,0,0,0,0,$nx,$ny,$x,$y);
            imagejpeg($destino, $tmpImagen, $quality);
            $imagen = addslashes(fread(fopen($tmpImagen, "rb"), filesize($tmpImagen)));

            $peticion = "insert into upload_image (image) values ('$imagen')";
            mysql_query($peticion,$db) or die('error');

        }
        else{
            die($this->isError(2));
        }
    }
} 
```

此代码在 mysql 5.5.27 和 PHP 5.3.15 上运行良好。让我们更多地了解您的环境。

# php - 将 glob 文本文件从 php 导入 mysql

> ID：15439539
> 
> 赞同：0
> 
> 时间：2013-03-15T18:21:35.573
> 
> 标签：php, mysql, mysqlimport

我的 glob 代码找到了该文件并尝试将其插入表中，但失败了。我找不到任何人问同样的问题。我将有许多文件需要插入到同一个表中。它是一个逗号分隔的文本文件。

**更新代码***

只要我重新加载数据线，以下代码就可以工作。当我手动使用加载数据命令时，它可以工作。我还没有找到解决“为什么加载数据命令不起作用？”问题的帖子示例。

```
$con = new mysqli('localhost', 'username', 'password', 'schaadan_hash');
if (mysqli_connect_errno($con))
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
else
{
    echo "Connected. ";
    echo "<br />";
}
$upload = "LOAD DATA LOCAL INFILE 'ntlmhash2_1.txt' INTO TABLE ntlm2 FIELDS TERMINATED BY ',' ENCLOSED BY '' ESCAPED BY '\\' LINES TERMINATED BY '\n'(`clear` , `hash`);";
mysqli_query($con,$upload);
?> 
```

# varnish - 多个 url 清除清漆问题

> ID：15439541
> 
> 赞同：2
> 
> 时间：2013-03-15T18:21:41.163
> 
> 标签：varnish, varnish-vcl

我对清漆清除有疑问：

我们的应用程序非常动态。因此，对象 A 上的事件将生成 10.000 次清除，因为对象 A 信息存在于所有页面中。

对象 A 是统计卖家，页面是广告页面。

我们通过使用 curl 对 php 代码中的清漆进行异步 http PURGE 调用来管理它。

所以我们将有 10000 个 http 调用无法计算 url（所以 REgex 不是选项）

我想问你们，清漆有没有可能做一些批量清除（HTTP接口）？

如果没有，当模型和事件对您的页面有很大影响时，您在一个非常动态的应用程序中测试和工作的选项是什么。

在此先感谢纳比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:18:39.070

进行清除`varnishadm`将是您最好的选择。您可以通过 SSH 隧道命令（假设您正在处理远程 Varnish 服务器）或允许从您的 Web 服务器远程访问 Varnish 服务器。

您可以轻松编写自己的 shell 脚本来运行批处理清除，`varnishadm`或者您可以查看[Thinner](http://propublica.github.com/thinner/)，这是一个基于 Ruby 的清除器，可以完全按照您的要求进行操作。

您很可能已经考虑过的显而易见的替代方法是重新编写您的应用程序以在 URL 或自定义标头（例如）中包含*对象 A*`X-Object: A`，因此您可以根据该标头执行禁令：

```
sub vcl_recv {
  if (req.request == "BAN") {
    ban("obj.http.x-object == " +  req.http.x-object);
  }
} 
```

# powershell - 如何使用 PowerShell 来清点计划任务

> ID：15439542
> 
> 赞同：11
> 
> 时间：2013-03-15T18:21:46.913
> 
> 标签：powershell, scheduled-tasks

是否有人拥有使用 PowerShell 来清点服务器上的计划任务（包括操作）的链接或脚本？

我能够获取计划服务 com 对象和我称之为“顶级”属性（名称、状态、lastruntime）的内容，但还想从计划任务的“操作”部分获取信息（本质上是名称计划任务及其命令行）。

例如：

```
$schedule = new-object -com("Schedule.Service") 
$schedule.connect() 
$tasks = $schedule.getfolder("\").gettasks(0)

$tasks | select Name, LastRunTime

foreach ($t in $tasks)
{
foreach ($a in $t.Actions)
{
    $a.Path
}
} 
```

上面的代码片段在列出任务方面起作用；但是 Actions 上的循环似乎没有做任何事情，没有错误，没有任何输出。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T12:48:29.020

这可能与当前的答案非常相似，但我写了一个快速脚本来帮助你。当前脚本的问题是任务中没有`Actions`属性。您需要从 comobject 提供的 xml 任务定义中提取它。以下脚本将返回一组对象，每个计划任务一个。**如果动作是运行一个或多个命令，**它包括动作。这只是为了让您继续前进，因此如果需要，您需要对其进行修改以包含更多属性。

```
function getTasks($path) {
    $out = @()

    # Get root tasks
    $schedule.GetFolder($path).GetTasks(0) | % {
        $xml = [xml]$_.xml
        $out += New-Object psobject -Property @{
            "Name" = $_.Name
            "Path" = $_.Path
            "LastRunTime" = $_.LastRunTime
            "NextRunTime" = $_.NextRunTime
            "Actions" = ($xml.Task.Actions.Exec | % { "$($_.Command) $($_.Arguments)" }) -join "`n"
        }
    }

    # Get tasks from subfolders
    $schedule.GetFolder($path).GetFolders(0) | % {
        $out += getTasks($_.Path)
    }

    #Output
    $out
}

$tasks = @()

$schedule = New-Object -ComObject "Schedule.Service"
$schedule.Connect() 

# Start inventory
$tasks += getTasks("\")

# Close com
[System.Runtime.Interopservices.Marshal]::ReleaseComObject($schedule) | Out-Null
Remove-Variable schedule

# Output all tasks
$tasks 
```

前任。输出

```
PS > .\Untitled1.ps1 | ? { $_.Name -eq "test" }

Actions     : notepad.exe c:\test.txt
              calc.exe 
Path        : \test
Name        : test
LastRunTime : 30.12.1899 00:00:00
NextRunTime : 17.03.2013 13:36:38 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:27:01.810

从 W7 RK 获取 PowerShellPack，然后尝试 get-scheduledtask

[http://archive.msdn.microsoft.com/PowerShellPack](http://archive.msdn.microsoft.com/PowerShellPack)

摘自 MSDN：

Windows 7 Resource Kit PowerShell Pack 包含 10 个模块，用于使用 PowerShell 完成各种有趣的事情。Import-Module PowerShellPack 实际上导入了 10 个模块供您使用。以下是每个模块的简要概述。

*   **WPK**从 Windows PowerShell 快速轻松地创建丰富的用户界面。想想 HTA，但很容易。超过 600 个脚本可帮助您构建快速的用户界面
*   **TaskScheduler**列出计划任务，创建或删除任务
*   **文件**系统监控文件和文件夹，检查重复文件，检查磁盘空间
*   **IsePack**使用超过 35 个快捷方式在集成脚本环境中增强您的脚本编写能力
*   **DotNet**探索加载的类型，查找可与类型一起使用的命令，并探索如何将 PowerShell、DotNet 和 COM 结合使用
*   **PSImageTools**转换、旋转、缩放和裁剪图像并获取图像元数据
*   **PSRSS**利用 PowerShell 的FeedStore
*   **PSSystemTools**获取操作系统或硬件信息
*   **PSUserTools**获取系统上的用户，检查提升，并启动-processaadministrator
*   **PSCodeGen**生成 PowerShell 脚本、C# 代码和 P/Invoke

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:02:48.043

另一种方法是我编写的名为 Get-ScheduledTask.ps1 的脚本，可在本文中找到：

[操作方法：使用 PowerShell 报告计划任务](http://www.itprotoday.com/management-mobility/how-use-powershell-report-scheduled-tasks)

通过这种方式，您只需要这个单一的脚本，您不需要下载或安装任何其他东西。

账单

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-12T19:53:19.297

我知道我迟到了，但@Frode F. 提供的答案虽然有效，但在技术上是不正确的。

您可以通过 PowerShell 访问计划任务的 Actions 集合的项目，这并不是很明显。我今天也必须自己弄清楚这一点。

下面是在 PowerShell 中完成所有这些操作的代码，而无需使用 XML：

```
# I'm assuming that you have a scheduled task object in the variable $task:
$taskAction = $task.Definition.Actions.Item.Invoke(1) # Collections are 1-based 
```

这就是在不使用`foreach`.

因为该`Actions`属性是一个包含参数化属性的集合`Item`（例如，在 C# 中您将编写`myTask.Actions[0]`或在 VB 中`myTask.Actions.Item(1)`），PowerShell 将`Item`属性表示为一个`PSParameterizedProperty`对象。要调用与属性关联的方法，请使用`Invoke`方法（用于 getter）和`InvokeSet`方法（用于 setter）。

我运行了一个运行 OP 代码的快速测试，它对我有用（但是，我正在运行 PowerShell 4.0，所以也许这与它有关）：

```
$schedule = new-object -com("Schedule.Service") 
$schedule.connect() 
$tasks = $schedule.getfolder("\").gettasks(0)

$tasks | select Name, LastRunTime

foreach ($t in $tasks)
{
    foreach ($a in $t.Actions)
    {
        Write-Host "Task Action Path: $($a.Path)" # This worked
        Write-Host "Task Action Working Dir: $($a.workingDirectory)" # This also worked
    }

    $firstAction = $t.Actions.Item.Invoke(1)
    Write-Host "1st Action Path: $($firstAction.Path)"
    Write-Host "1st Action Working Dir: $($firstAction.WorkingDirectory)"
} 
```

HTH。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-02T18:23:27.323

这里有一个快速的基于：[https ://blogs.technet.microsoft.com/heyscriptingguy/2015/01/17/weekend-scripter-use-powershell-to-document-scheduled-tasks/](https://blogs.technet.microsoft.com/heyscriptingguy/2015/01/17/weekend-scripter-use-powershell-to-document-scheduled-tasks/)

使用 Powershell：**Get-ScheduledTask**和**Get-ScheduledTaskInfo**

```
### run like >>  Invoke-Command -ComputerName localhost, server1, server2 -FilePath C:\tmp\Get_WinTasks.ps1

$taskPath = "\"
$outcsv = "c:\$env:COMPUTERNAME-WinSchTaskDef.csv"
Get-ScheduledTask -TaskPath $taskPath |
    ForEach-Object { [pscustomobject]@{
     Server = $env:COMPUTERNAME
     Name = $_.TaskName
     Path = $_.TaskPath
     Description = $_.Description
     Author = $_.Author
     RunAsUser = $_.Principal.userid
    LastRunTime = $(($_ | Get-ScheduledTaskInfo).LastRunTime)
     LastResult = $(($_ | Get-ScheduledTaskInfo).LastTaskResult)
     NextRun = $(($_ | Get-ScheduledTaskInfo).NextRunTime)
     Status = $_.State
     Command = $_.Actions.execute
     Arguments = $_.Actions.Arguments }} |
     Export-Csv -Path $outcsv -NoTypeInformation 
```

# ruby-on-rails - Rails：如何通过 URL 人为指定参数键/值值？

> ID：15439543
> 
> 赞同：0
> 
> 时间：2013-03-15T18:21:48.800
> 
> 标签：ruby-on-rails

我必须触发特定网站的操作。但是，它应该处理具有某些键/值对 ( `params = {:cost => 5, :state => "NY"}`) 的参数。有没有办法在 URL 中指定这些参数值？否则我将如何提供这些键/值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:23:48.733

```
show_things_path(:cost => 5, :state => "NY") 
```

将这些键/值添加到参数中。

编辑：

对于字符串 URL

```
"/show_things?cost=5&state='NY'" 
```

# android - 即使特定查询与更新不匹配，也会调用 LoaderManager.onLoadFinished

> ID：15439551
> 
> 赞同：1
> 
> 时间：2013-03-15T18:22:26.377
> 
> 标签：android, android-contentprovider, android-loadermanager

我有一个 Android 应用程序，它有一个我经常更新的内容提供程序。为了加载上述数据的列表，我使用了 LoaderManager。

在详细信息页面上，我也使用了 LoaderManager，但我像这样创建 CursorLoader：

```
return new CursorLoader(getActivity(), DataProvider.POST_URI, projection, "_id = ?", new String[]{String.valueOf(post_id)}, null); 
```

正如你所看到的，我只从桌子上得到一个项目。当行被更新时，`onLoadFinished`回调被更新，但是，当其他行被添加/修改到表中时。这不会很麻烦，但有时，它会导致整个列表变为空白并重新绘制，当它多次发生时，这可能会让用户感到沮丧。

你知道我怎样才能避免这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:06:32.100

正在重新加载，因为您将此游标加载器与`DataProvider.POST_URI`我假设您用于您的帖子表的那个关联。每当此表中的任何元素发生更改时，`Uri`都会通知所有具有该更改的游标。如果你想接收单个项目的通知，你应该实施一个新的`Uri`方案来匹配那个项目。[例如，查看UriMatcher](http://developer.android.com/reference/android/content/UriMatcher.html)类的文档。你应该做一些类似于`PEOPLE`和`PEOPLE_ID`情况的事情。

**编辑**

`ContentProvider` [你可以在这里](http://www.vogella.com/articles/AndroidSQLite/article.html)找到一个很好的教程。特别的第 9.4 节应该有助于正确实施`ContentProvider`.

# sql - SQL Server 查询 + 加入结果

> ID：15439552
> 
> 赞同：1
> 
> 时间：2013-03-15T18:22:28.060
> 
> 标签：sql, sql-server

我有一个这样的查询：

```
SELECT recipientid AS ID,
COUNT(*) AS Recieved FROM Inbox
GROUP BY recipientid

UNION

SELECT SenderId,
COUNT(*) AS [Sent] FROM Inbox
GROUP BY SenderId 
```

**输出：**

```
RecipientID  Recieved

001             3
001             4
002             4
002             2
003            18
003            55 
```

我如何重写是这样的，它显示如下：

```
RecipientID  Recieved  Sent

001             3       4
002             4       2
003            18       55 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:25:24.873

只需加入子查询：

```
select a.ID,Received,Sent
from(
  SELECT recipientid AS ID,
  COUNT(*) AS Recieved FROM Inbox
  GROUP BY recipientid
)a
full outer join(
  SELECT SenderId as ID,
  COUNT(*) AS [Sent] FROM Inbox
  GROUP BY SenderId
)b
on (a.ID = b.ID)
order by a.ID; 
```

请注意，这会获取任何收件人或发件人的所有`sent`和`received`值。如果您只想要`ID`属于收件人和发件人的 s 的结果，请执行`inner join`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:27:19.647

我会`source`在您的查询中添加一列并做一个简单的数据透视

```
select ID, 
       max (case when source=1 then Cnt else 0 end) as Received,
       max (case when source=2 then Cnt else 0 end) as Sent
from (
  SELECT 1 as Source, 
         recipientid AS ID,
         COUNT(*) AS Cnt 
  FROM Inbox
  GROUP BY recipientid
  UNION
  SELECT 2 as Source, 
         SenderId,
         COUNT(*)  
  FROM Inbox
  GROUP BY SenderId
  ) x
GROUP BY ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:26:25.507

如果是 Postgres、MS SQL 或其他支持 CTE -

```
With Both as
(
SELECT
  recipientid AS ID,
  Count(*) AS Recieved,
  0 as [Sent] 
FROM Inbox
GROUP BY recipientid
UNION
SELECT
  SenderId as ID,
  0 as Recieved,
  Count(*) AS [Sent]
FROM Inbox
GROUP BY SenderId
)
SELECT
  ID,
  Sum(Received) as [Received],
  Sum(Sent) as [Sent]
FROM BOTH
GROUP BY ID
ORDER BY 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:44:11.473

假设您有一个`users`带有 ID 的表，您可以执行以下操作：

```
SELECT
    users.id,
    COUNT(sent.senderid) AS sent,
    COUNT(received.recipientid) AS received
FROM
    users
    LEFT JOIN inbox AS sent ON sent.senderid = users.id
    LEFT JOIN inbox AS received ON received.recipientid = users.id
GROUP BY sent.senderid, received.recipientid
ORDER BY users.id; 
```

# python - 测试 Django 对 Stripe Webhook 的响应

> ID：15439554
> 
> 赞同：6
> 
> 时间：2013-03-15T18:22:44.087
> 
> 标签：python, django, payment-processing, stripe-payments, webhooks

我试图找出一种有效的方法来测试我的服务器如何处理来自 Stripe 的 webhook。我正在设置一个系统来向客户的信用卡添加多个订阅，这在 Stripe 的网站上有描述：

[https://support.stripe.com/questions/can-customers-have-multiple-subscriptions](https://support.stripe.com/questions/can-customers-have-multiple-subscriptions)

我遇到的问题是弄清楚如何有效地测试我的服务器是否正确执行脚本（即，向发票添加正确的订阅，在我的数据库中记录事件等）。我现在不太关心自动化测试，我只是在努力有效地在脚本上运行任何好的测试。以前有人用 Django 做过这个吗？您使用了哪些资源和工具来运行这些测试？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:43:57.467

我真的很喜欢 stripe 为 web hooks 提供日志，但是，很难查看它们的错误响应，所以我使用[Requests](http://docs.python-requests.org/en/latest/)库设置了一个脚本。首先，我去了 Stripe 仪表板并复制了他们发送的一个请求。

事件和 Webhook --> 单击其中一个请求 --> 复制整个请求

```
import requests

data = """ PASTE COPIED JSON REQUEST HERE """

# insert the appropriate url/endpoint below
res = requests.post("http://localhost:8000/stripe_hook/", data=data).text
output = open("hook_result.html", "w")
output.write(res)
output.close() 
```

现在我可以打开`hook_result.html`并查看可能出现的任何 django 错误（在 django 中给定 DEBUG=True）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:47:20.923

我没有使用任何工具来运行测试。影响条带有一个完整的 API 参考，显示您发送给他们的信息，他们也显示错误。Stripe 非常容易设置，价格便宜，并且在文档中有完整的详细信息。

我做的是什么？

1.  首先，我创建一个条带帐户。在该帐户中，他们将为您提供：

    *   TEST_SECRET_KEY：用于以条带发送付款和信息（用于测试）
    *   TEST_PUBS_KEY：在与 Stripe 通信时识别您的网站（用于测试）
    *   LIVE_SECRET_KEY：用于以条带形式发送付款和信息（实时）
    *   LIVE_PUBS_KEY：在与 Stripe 通信时识别您的网站（实时）
    *   API_VERSION: "2012-11-07" //这是测试版本
2.  登录后，您将在顶部看到文档。单击文档，他们将为您提供有关如何创建表单、如何创建订阅、如何处理错误等等的分步教程。

3.  检查您的脚本是否正在执行并连接到条带。单击完整的 API 参考，然后选择 Python。在该页面中，您将看到您发送的信息和遇到的错误。

我真正喜欢的是，如果 Stripe 检测到错误，系统会指出并为您提供解决方案。解决方案在左侧，检查信息发送在右侧。

Stripe 分为两个世界：测试模式和现场。在测试模式下，您可以执行创建新客户、添加新发票、设置订阅等等。您在测试模式下所做的一切，在您的 Stripe 上线时都是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T01:20:47.560

在[django-stripe-payments](https://github.com/eldarion/django-stripe-payments)我有一个[测试套件](https://github.com/eldarion/django-stripe-payments/blob/master/payments/tests/test_webhooks.py)，虽然远非全面，但它只是一个开始。我所做的只是复制一个真正的 webhook 的数据，擦洗敏感数据并将其作为数据添加到测试中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T19:31:45.697

测试 stripe webhooks 很痛苦。我不使用 Django，所以我的回答会更笼统。

我的 php webhook 处理程序解析 webhook 数据并相应地调度处理程序函数。在我的处理程序类中，我为测试 webhook 破坏的所有 id 设置了具有合法数据的类属性。然后我在每个处理程序函数中都有一个条件来测试实时模式。如果为 false，我用合法的测试 id 替换损坏的 id。

我还有另一个名为 $fakeLiveMode 的类属性，我在测试时将其设置为 true。这使我可以强制代码像在实时模式下一样处理。

因此，例如，在测试 customer.subscription.updated 事件时，计划 ID 和客户 ID 会搞砸。所以在那个处理程序中我会这样做：

```
if ($event->livemode === true || $this->fakeLivemode)
{
    if ($this->fakeLivemode)
    {
        // override botched data returned by test webhook
        $event->data->object->plan->id = $this->testPlanId;
        $event->data->object->customer = $this->testCustomerId;
    }

    // process webhook
} 
```

这有帮助吗？

# java - Logback：通过过滤器修改消息？

> ID：15439555
> 
> 赞同：15
> 
> 时间：2013-03-15T18:22:45.173
> 
> 标签：java, slf4j, logback

匹配过滤器后是否可以修改日志事件？

我有一个 Web 容器（Jersey），它在 ERROR 级别记录未捕获的异常。但是，对于服务器（Jetty）抛出的某些异常（EofException），我想将它们记录在较低级别（INFO）。

我可以使用与异常类型 (EofException) 匹配的 Logback 过滤器完全删除这些消息。但是我还没有找到一种支持的方法来修改日志事件，例如，更改日志级别。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T16:25:22.840

您可以使用 TurboFilter 模拟此行为，方法是使用提供的记录器记录您自己修改的消息，并拒绝原始消息。

不过，我不相信这种 hack 是个好主意。

```
package com.example.logback;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.Marker;

import ch.qos.logback.classic.Level;
import ch.qos.logback.classic.LoggerContext;
import ch.qos.logback.classic.turbo.TurboFilter;
import ch.qos.logback.core.spi.FilterReply;

public class LogbackTest
{
    private static class ModifyingFilter
    extends TurboFilter
    {
        @Override
        public FilterReply decide(
                Marker marker,
                ch.qos.logback.classic.Logger logger, 
                Level level,
                String format, 
                Object[] params, 
                Throwable t)
        {
            if (level == Level.ERROR &&
                logger.getName().equals("com.example.logback.LogbackTest") &&
                format.equals("Connection successful: {}"))
            {
                logger.debug(marker, format, params);
                return FilterReply.DENY;
            }

            return FilterReply.NEUTRAL;
        }
    }

    public static void main(String[] args)
    {
        LoggerContext lc = (LoggerContext)LoggerFactory.getILoggerFactory();
        lc.addTurboFilter(new ModifyingFilter());

        Logger logger = LoggerFactory.getLogger(LogbackTest.class);
        logger.error("Connection successful: {}", "no problem", new RuntimeException("Hi"));
    }
} 
```

# c - 使用c在oracle中插入空白blob数据

> ID：15439557
> 
> 赞同：1
> 
> 时间：2013-03-15T18:22:47.740
> 
> 标签：c, oracle

我正在尝试在 oracle 数据库中使用 C 程序在表的 blob 列中插入空白数据，但它作为 Null 插入，如何使其空白而不是 null。数据类型是 lpBlob。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:28:37.790

根据您对“空白”的定义，我的假设是您想使用该`empty_blob`功能

```
INSERT INTO table_name( ..., blob_column_name )
  VALUES( ..., empty_blob() ); 
```

# javascript - 试图让一个已经可以点击的 div 打开 fancybox

> ID：15439563
> 
> 赞同：0
> 
> 时间：2013-03-15T18:23:05.437
> 
> 标签：javascript, wordpress, fancybox

我不是一个编码员。只是通过wordpress自学。我有一个网站，我从一个空白主题一起破解了，我已经走了很远。

我要做的最后一步是用fancybox或fancybox`#brick`打开永久链接页面。`rel``class`

使用 WP fancybox 插件。

这是我首先要使 div 可点击的操作

```
<div id="brick" onclick="location.href='<?php the_permalink(); ?>';" style="cursor:pointer;"> 
```

我会在这一行的哪里添加`rel="fancybox"`或`class="fancybox"`？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:24:52.167

直接向元素添加`rel`或属性：`class`

```
<div id="brick" onclick="location.href='<?php the_permalink(); ?>';" style="cursor:pointer;" rel="fancybox" class="fancybox"> 
```

JavaScript 可以是：

```
$("div.fancybox").fancybox(); 
```

或您想使用的任何选择器。`class`因为您可以使用,`id`或的组合使用 jQuery 进行选择`tag name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:54:57.460

由于您已经`href`在标签中设置了该集合`<a>`，因此就像代码的这一部分一样。

```
<h2 class="entry-title"><a rel="bookmark" title="Permalink to Art and commerce in the digital age" href="http://throughthelattice.com/art-and-commerce-in-the-digital-age/">Art and commerce in the digital age</a></h2> 
```

...然后，我会这样做：

1.  删除此行

    ```
    <script src="//throughthelattice.com/wp-content/themes/lh_wordpress_blank_theme/js/jquery-1.7.1.min.js"></script> 
    ```

    ...您已经在您的`<head>`部分中加载了 jQuery v1.8.3

2.  全部替换`id="brick"`为`class="brick"`

3.  替换此脚本

    ```
    <script>
    $('#brick').fancybox();
    </script> 
    ```

    ... 这样 ：

    ```
    <script>
    jQuery(document).ready(function () {
        jQuery("a[rel='bookmark']").fancybox({
            "type": "iframe"
        });
    }); // ready
    </script> 
    ```

见**[JSFIDDLE](http://jsfiddle.net/m3Fce/)**

# objective-c - 在 XCODE 中简单调整 UIImage 的大小

> ID：15439564
> 
> 赞同：7
> 
> 时间：2013-03-15T18:23:06.727
> 
> 标签：objective-c, xcode, uiimage

有什么办法可以用尽可能少的行来调整 UIImage 的大小？我不介意比例，我只想将图像分辨率设置为 80x60。就这样

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T18:27:35.087

这可能有点矫枉过正，但是，您可以简单地获取图像，并以您想要的分辨率创建图形上下文，然后您可以将 tempImage 设置为 UIImageView，并覆盖它。

```
 UIImage *image = YourImageView.image;
        UIImage *tempImage = nil;
        CGSize targetSize = CGSizeMake(80,60);
        UIGraphicsBeginImageContext(targetSize);

        CGRect thumbnailRect = CGRectMake(0, 0, 0, 0);
        thumbnailRect.origin = CGPointMake(0.0,0.0);
        thumbnailRect.size.width  = targetSize.width;
        thumbnailRect.size.height = targetSize.height;

        [image drawInRect:thumbnailRect];

        tempImage = UIGraphicsGetImageFromCurrentImageContext();

        UIGraphicsEndImageContext();

        YourImageView.image = tempImage; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:29:29.507

使用此类（相应地将代码添加到 .h 文件）

```
#import "UIImage+Resize.h"

@implementation UIImage (Resize)

- (UIImage *)resizedImage:(CGSize)bounds {
   return [self resizedImage:bounds upScale:YES];
}

- (UIImage*)resizedImage:(CGSize)bounds upScale:(BOOL)upScale {
   CGSize originalSize = self.size;
   float xScale = bounds.width / originalSize.width;
   float yScale = bounds.height / originalSize.height;
   float scale = MIN(xScale, yScale);

   if (!upScale) {
      scale = MIN(scale, 1);
   }

   CGSize newSize = CGSizeMake(originalSize.width * scale, originalSize.height * scale);
   UIGraphicsBeginImageContextWithOptions(newSize, NO, [UIScreen mainScreen].scale);
   [self drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
   UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();

   return resultImage;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:18:14.020

```
- (void)resizeImage:(UIImage *)image
{
   CGSize origImageSize = [image size];
   CGRect imageRect = CGRectMake(0, 0, 80, 60);
   float ratio = MAX(newRect.size.width / origImageSize.width,
                  newRect.size.height / origImageSize.height);
   UIGraphicsBeginImageContextWithOptions(newRect.size, NO, 0.0);
   UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:newRect
                                                cornerRadius:5.0];
   [path addClip];
   CGRect imageRect;
   imageRect.size.width = ratio * origImageSize.width;
   imageRect.size.height = ratio * origImageSize.height;
   imageRect.origin.x = (newRect.size.width - imageRect.size.width) / 2.0;
   imageRect.origin.y = (newRect.size.height - imageRect.size.height) / 2.0;
   [image drawInRect:imageRect];
   UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();
   NSData *data = UIImagePNGRepresentation(smallImage);
   UIGraphicsEndImageContext();
} 
```

不要忘记添加 CoreGraphics 框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-08T12:02:43.283

我在[此页面](https://medium.com/@aommiez/xcode-resize-image-scaled-to-width-d0e2b9088cbf)上找到了以下代码：

```
- (UIImage*)imageWithImage: (UIImage*) sourceImage scaledToWidth: (float) i_width{

if (sourceImage.size.width>sourceImage.size.height) {
    sourceImage = [[UIImage alloc] initWithCGImage: sourceImage.CGImage
                                             scale: 1.0
                                       orientation: UIImageOrientationRight];
}

float oldWidth = sourceImage.size.width;
float scaleFactor = i_width / oldWidth;
float newHeight = sourceImage.size.height * scaleFactor;
float newWidth = oldWidth * scaleFactor;

UIGraphicsBeginImageContext(CGSizeMake(newWidth, newHeight));   [sourceImage drawInRect:CGRectMake(0, 0, newWidth, newHeight)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext();
return newImage;
} 
```

您所要做的就是为它提供`i_width`，它会相应地缩放它。

我给它添加了一点扭曲，这样如果图片处于横向模式，它将被旋转为纵向，然后调整大小。如果您希望它是相反的（纵向到横向），请更改：

```
 if (sourceImage.size.width>sourceImage.size.height) {
    sourceImage = [[UIImage alloc] initWithCGImage: sourceImage.CGImage
                                             scale: 1.0
                                       orientation: UIImageOrientationRight];
} 
```

对此：

```
 if (sourceImage.size.height>sourceImage.size.width) {
    sourceImage = [[UIImage alloc] initWithCGImage: sourceImage.CGImage
                                             scale: 1.0
                                       orientation: UIImageOrientationRight];
} 
```

注意：我的旋转方法没有考虑图片是指向左还是右。换句话说，如果图像是倒置的横向，我的代码将无法识别。我希望其他人可以对此有所了解:)

# javascript - 如何获取用户脚本中文本之间的文本

> ID：15439565
> 
> 赞同：0
> 
> 时间：2013-03-15T18:23:06.843
> 
> 标签：javascript

我有源代码...

```
<div class="pd10 tbg2 cbl tcnt" style="line-height: 26px;">
<b>Opps ! please try again</b>
</div> 
```

我想在网页上搜索这个模式&如果找到了文本做一些工作所以..我把脚本写成......

```
 if (path == "/dash/process/")
    {
        var content=document.getElementsByTagName('b')[0].innerHTML;
        var pat="Opps";

        if(content.search(pat)<0)
        {
            //do some job
        }
             else
              {
               //do some job
              }
     } 
```

这是对的吗..？请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:33:19.463

尝试这个：

```
if (path == "/dash/process/")
{
    var content=document.getElementsByTagName('b')[0].innerHTML;
    var pat="Opps";

    if(content.indexOf(pat) != -1)
    {
        //do some job
    }
    else
    {
        //do some job
    }
} 
```

在上面的代码`indexOf`中，当在字符串中找不到您要查找的内容时，返回值 -1。在这种情况下， if 正在检查字符串`content`中的文本*Opps*。如果可以找到，意思`indexOf`是没有返回-1，然后做一些事情，否则如果找不到，做其他事情。

希望这可以帮助。

# javascript - 阻止用户在表单中提交数据

> ID：15439569
> 
> 赞同：0
> 
> 时间：2013-03-15T18:23:13.700
> 
> 标签：javascript, html

我想阻止用户在表单中提交数据，但是当我用 JavaScript 测试它时它没有返回 true。

我正在使用一种方法，将提交按钮的类型设置为，`type="button"`而不是`type="submit"`：`<input type="button" name="envoyer" onclick="valider(this.form)">`

然后我使用这个 JavaScript 脚本：

```
function valider(formulaire)
        {
            if(//my test)
            {
                formulaire.envoyer.type = "submit";
                formulaire.envoyer.submit();
                return true;
            }

            return false;
        } 
```

有没有其他方法可以离开提交按钮而不将其类型更改为按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:28:06.480

在普通的 Javascript 中

您可以使用函数的返回值来阻止表单提交

```
<form name="myForm" onsubmit="return validateMyForm();"> 
```

和功能一样

```
<script type="text/javascript">
function validateMyForm()
{
  if(check if your conditions are not satisfying)
  { 
    alert("validation failed false");
    returnToPreviousPage();
    return false;
  }

  alert("validations passed");
  return true;
}
</script> 
```

在 jQuery 中

```
$('#form').submit(function (evt) {
    evt.preventDefault();
    window.history.back();
}); 
```

在道场

```
dojo.connect(form, "onsubmit", function(evt) {
    evt.preventDefault();
    window.history.back();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:26:58.907

只需将函数绑定到表单的提交事件。您不需要更改输入类型：

```
myForm.submit = function valider(formulaire)
        {
            if(//my test)
            {
                formulaire.envoyer.type = "submit";
                formulaire.envoyer.submit();
                return true;
            }

            return false;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:28:25.643

为什么要更改按钮的类型？

做吧`onclick="return valider(this.form)"`。返回 false 将阻止提交。

# jquery - 需要可扩展的多个开/关按钮

> ID：15439572
> 
> 赞同：1
> 
> 时间：2013-03-15T18:23:17.123
> 
> 标签：jquery, css, button, toggle

我一直在搞乱[一些代码](http://jsfiddle.net/johniehjelm/zAVqU/4/)（感谢@JohnieHjelm！）我找到了切换按钮。我将它减少到我需要的最低限度并将其包含在我的页面中。效果很好，一键搞定。[当按钮不止一个时，问题就来了](http://jsfiddle.net/KwKjd/3/)。它开始看起来不错，但随后就出错了，正如您在上一个链接中看到的那样：

```
<div id = 'settings'>
  <p>
    Links: 
    <span class = 'onoff on'>ON</span>
    <span class = 'onoff'>OFF</span>
    </p><br />
  <p>
    Chapters: 
    <span class = 'onoff on'>ON</span>
    <span class = 'onoff'>OFF</span>
  </p>
</div>

$(function(){
    $('#settings .onoff').click(function(){
        $('#settings .onoff').removeClass("on");
        $(this).addClass("on"); 
    });
}); 
```

切换按钮起初看起来不错：

![切换按钮起初看起来不错](../Images/849a4bb8c4c93aca7fe4a4ad4c315924.png)

但是当点击时，一切都出错了：

![单击时，一切都出错了](../Images/00360af0b3c4eb14858b8b4647bec38b.png)

现在，我知道我可以只调用第二个按钮“onoffb”并为新类（或 id）重复整个 $(function()) 位。它甚至可能适用于 2 或 3 个按钮，但我根本不喜欢重复那一堆代码，甚至在可能有 10 个或更多这样的按钮时更不喜欢。

我还不擅长javascript，我想不出解决这个问题的方法。我应该调查什么？我需要一些关于在哪里继续寻找这个特定问题的指针。我正在考虑为每个按钮添加一个 id，并以某种方式从 jquery 中检索它并仅修改它，但无论如何我都无法做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:31:03.117

只是因为你听起来像你想学习并且只是被指出而不是给出答案，所以考虑使用“this”而不是特定的类。

这将做的是说'当单击它时，将其设置为开/关等'......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:27:06.273

以下代码应该可以解决问题：

```
$(function(){
    $('#settings .onoff').click(function(){
        $(this).siblings().removeClass("on");
        $(this).addClass("on"); 
    });
}); 
```

问题是您选择了所有`.onoff`按钮，`$("#settings .onoff)`而您只需要兄弟姐妹（同一容器中的按钮）

在这里查看我的 jsfiddle：http: [//jsfiddle.net/KwKjd/4/](http://jsfiddle.net/KwKjd/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:27:47.923

这可能是微不足道的，并且可能无法回答这个问题，因为我不确定你在问什么，但你不能只在 javascript 中创建一个方法并拥有许多按钮参数。

有点像（伪代码）

```
function onoff(var Numberofbuttons)
{
Insert code here
} 
```

所以如果你想制作 x 数量的按钮，你可以使用 for 循环？

（来自 C# 的角度）

# ios - 如何在我的 ios 应用程序中创建一个线程，每 5 分钟获取一次我的当前位置？

> ID：15439575
> 
> 赞同：-4
> 
> 时间：2013-03-15T18:23:26.157
> 
> 标签：ios, multithreading, sample

如果有人有任何类似的项目并且可以分享它，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:36:35.727

You'd start with an NSTimer Object. Do Research on it. IN particular there's a parameter that specifies duration float and repeats boolean. Then do some reasearch on the built in Libraries and Frameworks that uses your iPhone Location Services. From there you can get the coordinates, Long and Latitude. There is also a sample project on Apple's Developers site that has Location Services detailed in a dummy down project sample.

Also you can take the long and lat and send it into GEO Services provided by Google Maps, and Locations APIs that will reverse lookup your long/lat into ZIP, City, Street Address Burrough, etc, etc. Please do some research and hopefully this will point you in the right direction(s).

# mysql - 如何最好地检查 SQL 表内容是否未更改？

> ID：15439581
> 
> 赞同：0
> 
> 时间：2013-03-15T18:23:41.457
> 
> 标签：mysql

假设我有下表名为“联系人”：

```
id|name|age
1|John|5
2|Amy|2
3|Eric|6 
```

是否有一些简单的方法可以检查该表是否会像 sha/md5 哈希在获取计算机上文件的校验和时的工作方式一样发生变化？

因此，例如，如果向该表添加了新行，或者如果表中的值发生了更改，“散列”或某些生成的值表明该表已更改。

如果没有直接的机制，那么最好的方法是什么（可能是一些任意散列机制，只要该方法强调性能和最小化延迟）？它可以应用于多个表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:26:12.277

没有直接的机制可以通过 SQL 获取该信息。

您可以考虑为每一行添加一个额外的 LastModified 列。要知道上次修改表的时间，请选择该列的最大值。

[您可以通过在表上使用 INSERT、UPDATE 和 DELETE触发器](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)来获得类似的结果，该触发器使用最后修改的时间戳更新单独的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:28:38.927

如果您想知道某件事是否发生了变化，则需要进行比较。例如日期。您可以添加一个包含两列的表，即表名和时间戳，并为您有兴趣控制的表上的事件编写一个触发器，因此此触发器将更新此控制表的时间戳列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:28:54.763

如果表不是太大，您可以复制整个表。当您想要检查更改时，您可以查询旧数据与新数据。

```
drop table  backup_table_name;
CREATE TABLE backup_table_name LIKE table_name;
INSERT INTO backup_table_name SELECT * FROM `table_name`; 
```

# python - Python：给定 2 个进程 A 和 B，从 B 调用 A 中的函数

> ID：15439582
> 
> 赞同：2
> 
> 时间：2013-03-15T18:23:44.173
> 
> 标签：python, python-2.7, multiprocessing, shared-memory, python-multiprocessing

基于：[http](http://docs.python.org/2/library/multiprocessing.html#managers) ://docs.python.org/2/library/multiprocessing.html#managers我正在重写一个示例，将其拆分为 2 个进程，一个客户端和一个服务器。它是以下代码：

```
from multiprocessing.managers import BaseManager
import multiprocessing

class ManagerServer(multiprocessing.Process):
def __init__(self):
    multiprocessing.Process.__init__(self)

    class MathsClass(object):
        def add(self, x, y):
            return x + y
        def mul(self, x, y):
            return x * y

    class MyManager(BaseManager): 
        pass

    MyManager.register('Maths', MathsClass)
    m = MyManager(address=('', 50000), authkey='abracadabra')
    self.s = m.get_server()

def run(self):
    self.s.serve_forever()

class ManagerClient(multiprocessing.Process):
def __init__(self):
    multiprocessing.Process.__init__(self)

    class MyManager(BaseManager): 
        pass

    MyManager.register('Maths')
    self.m = MyManager(address=('', 50000), authkey='abracadabra')

def run(self):
    self.m.connect()
    maths = self.m.Maths()
    print maths.add(4, 3)
    print maths.mul(7, 8)

if __name__ == "__main__":
ms = ManagerServer()
mc = ManagerClient()

ms.start()
mc.start() 
```

此代码有效，并且从客户端我可以从服务器调用 MathsClass 类中的函数。

我遇到的问题是我仅限于在 MathsClass 中直接定义的函数，这些函数不处理来自其他任何地方的数据。

例如，如果在 ManagerServer 中我定义了一个名为“addOuter(self,x,y)”的函数，然后在类 MathsClass 中，在它的函数 add 中我调用 addOuter()，它看不到它，它说它不存在.

**所以，我的问题是，给定两个进程 A 和 B，其中 A 的函数定义在与init**相同的级别，而不是在另一个类中，我如何从 B 调用 A 中的这些函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:43:53.283

首先，您应该将`self`变量重命名为`MathsClass`其他名称以避免冲突。要访问示例中的函数`ManagerServer`，您必须静态调用它，并将实例`ManagerServer`作为第一个参数传递给它。好在我们已经定义了一个`self`。这应该可以解决问题：

```
from multiprocessing.managers import BaseManager
import multiprocessing

class ManagerServer(multiprocessing.Process):
    def __init__(self):
        multiprocessing.Process.__init__(self)

        class MathsClass(object):
            def add(innerSelf, x, y):
                return ManagerServer.addOuter(self, x, y)
            def mul(innerSelf, x, y):
                return x * y

    class MyManager(BaseManager): 
        pass

    def addOuter(self, x, y):
        return x + y

    MyManager.register('Maths', MathsClass)
    m = MyManager(address=('', 50000), authkey='abracadabra')
    self.s = m.get_server()

    def run(self):
        self.s.serve_forever()

class ManagerClient(multiprocessing.Process):
    def __init__(self):
        multiprocessing.Process.__init__(self)

        class MyManager(BaseManager): 
            pass

        MyManager.register('Maths')
        self.m = MyManager(address=('', 50000), authkey='abracadabra')

    def run(self):
        self.m.connect()
        maths = self.m.Maths()
        print maths.add(4, 3)
        print maths.mul(7, 8)

if __name__ == "__main__":
    ms = ManagerServer()
    mc = ManagerClient()

ms.start()
mc.start() 
```

# java - 如何在 Java 中模拟静态方法？

> ID：15439592
> 
> 赞同：4
> 
> 时间：2013-03-15T18:24:01.523
> 
> 标签：java, junit, tdd, mockito, powermock

我有一个 class `FileGenerator`，我正在为`generateFile()`应该执行以下操作的方法编写测试：

1）它应该调用静态`getBlockImpl(FileTypeEnum)`方法`BlockAbstractFactory`

`blockList`2）它应该从子类方法中填充变量`getBlocks()`

3) 它应该从传递 String 参数`createFile`的最终辅助类调用静态方法`FileHelper`

4）它应该调用`BlockController`blockList中每个的run方法

到目前为止，我有这个空方法：

```
public class FileGenerator {
    // private fields with Getters and Setters

    public void generateBlocks() {
    }
} 
```

我正在使用 JUnit、Mockito 来模拟对象，并且我尝试使用 PowerMockito 来模拟静态和最终类（Mockito 不这样做）。

`getBlockList()`我的问题是：我的第一个测试（从调用方法`BlockAbstractFactory`）通过了，即使`generateBlocks()`. 我已经在`BlockAbstractFactory`（到目前为止返回 null）中实现了静态方法，以避免 Eclipse 语法错误。

如何测试静态方法是否在内部调用`fileGerator.generateBlocks()`？

到目前为止，这是我的测试课：

```
@RunWith(PowerMockRunner.class)
public class testFileGenerator {
    FileGenerator fileGenerator = new FileGenerator();

    @Test
    public void shouldCallGetBlockList() {
            fileGenerator.setFileType(FileTypeEnum.SPED_FISCAL);

            fileGenerator.generateBlocks();

            PowerMockito.mockStatic(BlockAbstractFactory.class);
            PowerMockito.verifyStatic();
            BlockAbstractFactory.getBlockImpl(fileGenerator.getFileType());
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:56:39.593

我没有使用 PowerMock 的经验，但是由于您还没有得到答案，我只是在阅读文档，看看我是否可以在您的路上为您提供一些帮助。

我发现你需要准备 PowerMock 以便我知道它需要准备哪些静态方法来模拟。像这样：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(BlockAbstractFactory.class) // <<=== Like that
public class testFileGenerator {
    // rest of you class
} 
```

[在这里](http://code.google.com/p/powermock/wiki/MockitoUsage)您可以找到更多信息。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T09:52:22.100

工作示例：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({ClassStaticA.class, ClassStaticB.class})
public class ClassStaticMethodsTest {

    @Test
    public void testMockStaticMethod() {
        PowerMock.mockStatic(ClassStaticA.class);
        EasyMock.expect(ClassStaticA.getMessageStaticMethod()).andReturn("mocked message");
        PowerMock.replay(ClassStaticA.class);
        assertEquals("mocked message", ClassStaticA.getMessageStaticMethod());
    } 
```

# android - 使 Android 项目开源？

> ID：15439595
> 
> 赞同：15
> 
> 时间：2013-03-15T18:24:17.253
> 
> 标签：android, github, open-source

我已经开发了一个 Android 应用程序，但将来我没有足够的时间来维护它（约 30 万次下载，约 3 次更新），我正在考虑将其开源，以便其他程序员可以帮助我。

没用过Git-Hub之类的网站，有没有详细的一步一步介绍如何上传Android项目以及如何维护？使应用程序开源时要考虑的最重要的事情是什么？

我应该注意，我没有任何开源项目的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:16:10.897

Git 是专门为满足开源开发社区的需求而设计的。我在 git 的网站上找到了最好的指南：http: [//git-scm.com/book/](http://git-scm.com/book/)该指南将快速（大约一个小时的阅读时间）并清楚地（有很好的例子和图表）解释你需要知道的一切开始使用 git。

为了托管您的项目，有几个支持 git 的免费主机，例如 Github 或 Bit Bucket。

使您的项目开源时的重要考虑因素是选择适当的许可证并确定您授予谁管理员访问主机上的存储库（项目副本）的权限。

祝你好运！克里斯

# jquery - 从嵌套函数中获取值

> ID：15439596
> 
> 赞同：0
> 
> 时间：2013-03-15T18:24:17.853
> 
> 标签：jquery

我只是无法获得 arr 的值。任何建议...

```
function my_f() {
    var arr;
    $.post('data.php', function(data) {
        arr = $.makeArray($("tr",data).map(function(){
            return $(this).attr("id");
        }).get());

        return false;
        //alert(arr); ...this work 
    });
    return arr;
}

alert(my_f()); //return undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:26:52.253

它不起作用，因为`post`是异步调用。当您调用时`my_f()`，它会调用`post`然后返回`arr`而不等待`post`完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:27:38.150

AJAX 不能以这种方式工作。 `$.post`向服务器发出异步请求，该请求几乎总是在调用它的函数返回 **后完成。**

这就是它通常下降的方式。

1.  输入功能
2.  发送请求
3.  退出函数（返回 null，因为请求尚未完成）
4.  请求完成（现在`arr`已设置，但为时已晚）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:30:22.487

您的方法存在多个问题。除了 ajax 没有按照你试图让它工作的方式工作之外，你没有设置`arr`任何东西，并且你的警报在所有内容加载之前运行。如果您将警报包装在其中，`$( //code to run )`您将收到一条警报，显示 arr 等于空值，代码如下

```
function my_f() {
  var arr = '';
  $.post('data.php', function(data) {
  arr = $.makeArray ($("tr",data).map(function(){return $(this).attr("id")}).get());
  return false;
  //alert(arr); ...this work 
});
return arr;
}

$(alert(my_f())); //return undefined 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:30:38.140

问题是 $.post 是异步的，所以当你尝试返回 arr 时，它还没有值。

尝试这样的事情：

```
function my_f(callback) {
    $.post('data.php', function(data) {
        var arr = $.makeArray($("tr",data).map(function(){
            return $(this).attr("id");
        }).get());
        callback(arr);
        return false;
    });
}

my_f(alert); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T18:48:53.153

您的函数的内容在收到答案之前执行。

您传递给 post 函数的函数是您的*回调*函数。回调函数是在您收到响应时执行的函数。

另外，您的“回调”函数不是回调函数，因为它是在调用 post 函数后执行的，而不是在收到答案时执行的。

此外，警告数组不会为您提供太多信息，请使用 console.log() 进行测试。

最后，您可以在回调函数内部使用相关值（arr 的值），而不是称为“回调”的函数。

我希望这可以帮助你。

# matlab - Matlab 新手 - 不知道如何运行这些文件

> ID：15439600
> 
> 赞同：1
> 
> 时间：2013-03-15T18:24:43.727
> 
> 标签：matlab, driver

我想运行的文件在这里找到：

[http://www.mathworks.co.uk/matlabcentral/fileexchange/12552-multicanonical-monte-carlo-scheme-for-finding-rare-growth-factors/content/mcmc2.m](http://www.mathworks.co.uk/matlabcentral/fileexchange/12552-multicanonical-monte-carlo-scheme-for-finding-rare-growth-factors/content/mcmc2.m)

它由 3 个文件组成，其中一个称为驱动程序。

我试过在 Matlab 中运行每个单独的，每个都出错，我认为这是因为我需要同时运行它们或什么？

在驱动程序脚本的开头，它说“这是要从命令行运行的驱动程序脚本。还需要函数 mcmc1 和 mcmc2”。mcmc1 和 mcmc2 是我尝试在命令行中运行它的另外两个文件，但我不断收到错误消息。

知道如何让这些文件运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:30:56.777

您应该能够`gf_mmc_driver`从 Matlab 中的命令行运行。和文件需要在你的matlab路径中`mcmc1.m`，`mcmc2.m`但不需要直接调用。

但是，我确实在驱动程序文件中注意到以下注释：

```
% Telling the Distributed Computing Toolbox to complete one job with 
% 'numberchain' tasks.  Each task is comprised of running a MCMC 
% for the burnin time (mcmc1.m) with a different initial matrix. 
```

你有分布式计算工具箱吗？驱动程序文件似乎需要它。

# javascript - 在滚动时更改正文的背景颜色

> ID：15439604
> 
> 赞同：1
> 
> 时间：2013-03-15T18:24:54.057
> 
> 标签：javascript, background-color

我正在努力实现这个结果，你可以在这里看到它的出色使用 [http://www.formuswithlove.se](http://www.formuswithlove.se)

当我到达一个名为#about 的特定 div 时，我希望身体背景发生变化。

你能帮我么？

非常感谢，F。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:34:56.003

你可以在没有任何 jQuery 插件的情况下根据滚动偏移量来做

```
$(window).scroll(function(){
    if($(window).scrollTop()>500){
        $('body').addClass('redBg')
    }else{
        $('body').removeClass('redBg')
    }
}) 
```

或使用类似[jQuery.inview 的东西](https://github.com/protonet/jquery.inview)

```
$("#someElement").bind('inview', function(e, isInView) {
   if(isInView){
     $('body').addClass('redBg')
   }else{
      $('body').removeClass('redBg')
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:20:48.033

这是一个让您入门的基本示例。它已在 Firefox、Chrome 和 IE 9 和 10 中进行了测试——但未在 Safari 中进行测试。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
body{
    margin:0;
    padding:0;
    background:white;
}
div{
    width:100%;
    height:1600px;
}
</style>
<script type="text/javascript">
var section = {
    sections: [
        'section1',
        'section2',
        'section3'
    ],

    sectionOffset: {},

    sectionBackground: {
        'section1': 'rgb(0, 0, 0)',
        'section2': 'rgb(132, 132, 132)',
        'section3': 'rgb(255, 255, 255)'
    },

    currentSection: null
}

window.onload = function()
{
    var looplen = section.sections.length;

    for(var i = 0; i < looplen; ++i)
    {
        section.sectionOffset[section.sections[i]] = document.getElementById(section.sections[i]).offsetTop;
    }

    setTimeout("initialBackgroundChange()", 50);
}

window.onscroll = function()
{
    tryBackgroundChange();
};

function tryBackgroundChange()
{
    var looplen = section.sections.length,
        match,
        backgroundColor;

    for(var i = 0; i < looplen; ++i)
    {
        if(pageYOffset >= section.sectionOffset[section.sections[i]])
        {
            match = section.sections[i];
        }
    }

    if(match != section.currentSection)
    {
        section.currentSection = match;
        changeBackground();
    }
}

function changeBackground()
{
    var cbc, // Current background-color
        tbc, // Target backgrounc-color
        ri,  // Red incrementation
        gi,  // Green incrementation
        bi,  // Blue incrementation
        rgb, // Temporary color from cbc to tbc
        smoothness = 20; // Higher is smoother

    cbc = getStyle(document.body, 'background-color');
    cbc = cbc.substr(4, cbc.length-5);
    cbc = cbc.split(", ");

    tbc = section.sectionBackground[section.currentSection];
    tbc = tbc.substr(4, tbc.length-5);
    tbc = tbc.split(", ");

    ri = (tbc[0] - cbc[0]) / smoothness;
    gi = (tbc[1] - cbc[1]) / smoothness;
    bi = (tbc[2] - cbc[2]) / smoothness;

    for(var i = 1; i <= smoothness; ++i)
    {
        rgb = [
            Math.ceil(parseInt(cbc[0]) + (ri * i)),
            Math.ceil(parseInt(cbc[1]) + (gi * i)),
            Math.ceil(parseInt(cbc[2]) + (bi * i))
        ];

        setTimeout("document.body.style.backgroundColor = 'rgb(" + rgb.join(",") + ")'", i * (240/smoothness));
    }
}

function initialBackgroundChange()
{
    if(pageYOffset == 0)
    tryBackgroundChange();
}

function getStyle(elem, name)
{
    if (document.defaultView && document.defaultView.getComputedStyle)
    {
        name = name.replace(/([A-Z])/g, "-$1");
        name = name.toLowerCase();
        s = document.defaultView.getComputedStyle(elem, "");
        return s && s.getPropertyValue(name);
    }

    else if (elem.currentStyle)
    {
        if (/backgroundcolor/i.test(name))
        {
            return (function (el)
            { // get a rgb based color on IE
                var oRG=document.body.createTextRange();

                oRG.moveToElementText(el);

                var iClr=oRG.queryCommandValue("BackColor");

                return "rgb("+(iClr & 0xFF)+","+((iClr & 0xFF00)>>8)+","+
                        ((iClr & 0xFF0000)>>16)+")";
            })(elem);
        }

        return elem.currentStyle[name];
    }

    else if (elem.style[name])
    {
        return elem.style[name];
    }

    else
    {
        return null;
    }
}

</script>
</head>

<body>

<div id="section1"></div>

<div id="section2"></div>

<div id="section3"></div>

</body>
</html> 
```

# android - 更改 videoview 中的系统文本 - “无法播放视频”、“抱歉，无法播放此视频”

> ID：15439607
> 
> 赞同：0
> 
> 时间：2013-03-15T18:25:00.507
> 
> 标签：android, android-alertdialog, android-videoview

无法播放视频时，有什么方法可以更改错误的默认文本？

![在此处输入图像描述](../Images/85261a3dd6b8277b14d9423b5b3182b0.png)

我正在使用 Android 1.5 并希望在设置为中文时对其进行更改 - 我希望中文`AlertDialog`是斯洛伐克语 - 因为在 Android 1.5 中没有`Locale.Slovak`所以我必须“伪造它”并在对话框中制作我自己的系统文本。谢谢你 ：）

# wordpress - 将使用智能手机和平板电脑的用户重定向到另一个网页

> ID：15439609
> 
> 赞同：0
> 
> 时间：2013-03-15T18:25:03.803
> 
> 标签：wordpress, responsive-design, tablet, smartphone

我有一个响应式的 WordPress 网站。问题是当智能手机或平板电脑连接到我的首页时，我的首页就乱了。

无论如何，使用智能手机或平板电脑的用户是否会重定向或拥有一个完全不同的页面？我见过一些网站这样做，但经过大约几个小时的搜索和测试，我还没有弄清楚是怎么做到的。

任何人都知道一个插件，或解决我的问题的代码方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:34:54.287

至少有以下三种方式：

1.  使用插件重定向到新的 URL。如果您使用的是 WordPress 3.4+，则可以使用[http://wordpress.org/extend/plugins/simple-mobile-url-redirect/之类的插件](http://wordpress.org/extend/plugins/simple-mobile-url-redirect/)

2.  修改您的主题以检测浏览器差异（类似于此问题：[https](https://wordpress.stackexchange.com/questions/3875/how-to-detect-mobile-devices-and-present-them-a-specific-theme) ://wordpress.stackexchange.com/questions/3875/how-to-detect-mobile-devices-and-present-them-a-specific-theme ） . 除非您自己创作主题，否则我不建议您尝试此操作。

3.  使用自动检测移动设备的新主题。大多数更新的响应式主题都会自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:47:44.883

如果可能，您应该有两个单独的主题，其中适用于相同 id 和类的规则会有所不同。如果没有，您需要创建两个单独的版本，一个用于较小的屏幕，一个用于较大的屏幕。

# android - 我在哪里包含 Drive 服务帐户的文件

> ID：15439613
> 
> 赞同：2
> 
> 时间：2013-03-15T18:25:11.100
> 
> 标签：android, google-drive-api, android-file

我正在尝试使用 google Drive 服务帐户，与我的应用程序集成。我不知道将 XXXXXXXXXXXXXXXX-privatekey.p12 for android 放在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:29:04.263

看起来这篇文章很有帮助：[https ://stackoverflow.com/a/4310733/1888585](https://stackoverflow.com/a/4310733/1888585)

我所要做的就是将文件包含在文件`/res/raw/`夹中并将其加载到输入流中，如下所示：（如果在活动中工作）

`InputStream in = getAssets().open("path/to/file.ext");`

或者

`InputStream in = getResources().openRawResource(R.raw.yourfile);`

从那里将弄清楚如何使用这个输入流来为这个文件加载到谷歌。以上，显示了我需要做什么来回答我原来的问题。

# css - 图像不会在较小的浏览器中调整大小

> ID：15439620
> 
> 赞同：1
> 
> 时间：2013-03-15T18:25:41.217
> 
> 标签：css

我正在尝试将图像放在页面的右下角并让它始终存在。我已经设法做到了这一点，但是在缩小浏览器窗口时遇到了问题（在使用较小屏幕的不同建议中查看它时，这也是一个问题）。当我使浏览器变小时，图像保持相同的大小，并最终与其他项目重叠（例如我的菜单）。有没有办法让图像与浏览器一起自动变小？

我用来将图像放在右下角的 css 代码如下所示：

```
display:block;
float:right;
bottom:0;
right:0;
width:340px; 
```

该图像是放置在我的 html 中的 div 内的 png 图像。

我希望有人能理解我的意思并帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:31:10.483

您可以为图像指定宽度百分比而不是像素宽度。然后，当您调整窗口大小时，它将调整大小。尝试设置`width: 20%`为起点，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:35:09.823

You can try this

```
<html>
<style>
img{
position:absolute;
bottom:0;
right:0;
max-width: 100%;
height: auto;
width: auto; 
}
</style>
<body>
<img src="slide2.jpg"/>
</body>
</html> 
```

resizing browser also resizes image, and is always at bottom.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T23:47:31.993

在这种情况下不要使用浮动，您的定位应该是绝对的，并且不要设置基于像素的大小。如果你想设置它的大小，你可以按百分比来设置，但是，也许最好的解决方案是为不同的屏幕大小设置不同的主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:33:59.723

使用`%`图像的宽度和高度值应该可以工作。

# objective-c - 在 Objective-C 中何时/何处应该使用箭头符号“->”？

> ID：15439623
> 
> 赞同：8
> 
> 时间：2013-03-15T18:26:06.300
> 
> 标签：objective-c, notation

我刚刚清楚地解释了“->”符号的含义：[Dot (".") operator and arrow ("->") operator use in C vs. Objective-C](https://stackoverflow.com/questions/9072688/dot-operator-and-arrow-operator-use-in-c-vs-objective-c?lq=1)

但我仍然不明白*这个符号在 Objective-C 中的真正用例是什么？*

这是我正在谈论的示例：[https](https://github.com/gnustep/gnustep-base/blob/master/Source/NSOperation.m) ://github.com/gnustep/gnustep-base/blob/master/Source/NSOperation.m - 为什么所有这些字符串（如**internal->lock**）都写在那里 - 为什么不只是使用 ivars 或点符号吗？

* * *

相关主题：[object_setClass() 的性能而不是分配 isa 指针](https://stackoverflow.com/questions/14986248/performance-of-object-setclass-instead-of-assigning-isa-pointer#comment21188214_14986248)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T19:03:38.953

从您的问题来看，尚不清楚您是否了解`->`运营商的工作。

GNUStep NSOperation 源代码中的那个例子*是*使用 ivar。这就是`->`操作符所做的——它取消引用指针并访问命名成员。

至于“为什么不使用点符号？” 显而易见的答案是他们不想通过访问器。通过访问器比直接访问要慢，并且在我们只是使用“哑”内部状态的这种情况下没有真正的好处。

那么什么时候应该在你的 Objective-C 代码中使用它呢？主要是当您通过指针访问结构时。很少需要直接访问另一个对象的实例变量。如果你这样做了，那代码就是例外，而不是规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-26T05:25:26.460

可能是这种情况。我在苹果的 Reachability.m 文件中看到了一个例子。这里是：

```
@implementation Reachability
{
    SCNetworkReachabilityRef _reachabilityRef;
}

+ (instancetype)reachabilityWithHostName:(NSString *)hostName
{
    ...
    if (reachability != NULL)
    {
        returnValue= [[self alloc] init];
        if (returnValue != NULL)
        {
            returnValue->_reachabilityRef = reachability;
        }
        ...
    }
    return returnValue;
} 
```

因此，您可以使用它来通过类方法中的对象调用全局变量。

# cuda - 没有 GPU 的系统上的 CUDA

> ID：15439626
> 
> 赞同：6
> 
> 时间：2013-03-15T18:26:08.837
> 
> 标签：cuda, gpu, nvidia

我的系统中没有安装 GPU 卡。我想知道是否有任何方法可以在 CUDA 中编码并在我的无 GPU 笔记本电脑上访问 CUDA 库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:29:39.390

是的，您可以使用 CUDA 模拟器，例如

[https://code.google.com/p/cuda-waste/](https://code.google.com/p/cuda-waste/)

[https://code.google.com/p/gpuocelot/](https://code.google.com/p/gpuocelot/)

请注意，许多任务的性能将远逊于实际的 GPU，但您可以使用模拟器学习编程模型。

# java - 将带有颜色的文本复制到剪贴板

> ID：15439627
> 
> 赞同：0
> 
> 时间：2013-03-15T18:26:11.463
> 
> 标签：java, windows, swing, clipboard

正如标题所说，如何将彩色/样式文本复制到 Java 中的 Windows 剪贴板？

文本位于`JEditorPane`这样的位置：

```
JEditorPane je = new JEditorPane("text/html","a <font color=\"yellow\">banana</font>"); 
```

选择文本并按`ctrl`+`c`后，我想将文本复制并粘贴到 word 中，并且样式仍处于活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:35:06.780

它不能复制为纯文本。您需要使用 CF_HTML 或富文本格式。

# java - 如何在 OSX 10.8(.3) 的 Console.app 中启用 Java 输出？

> ID：15439629
> 
> 赞同：1
> 
> 时间：2013-03-15T18:26:14.763
> 
> 标签：java, macos, debugging, console, output

我习惯于使用 Console.app 来查看我编译的 Java 应用程序的 System.err/out.println() 输出。我刚刚在一台新的 10.8 机器上安装了一个 Java 应用程序，现在 Console.app 是静音的。

如何在 10.8 上的 Console.app 中启用 Java 输出？

我正在摆弄 Java Preferences，我从[这个链接](http://appleupdate.centenary.usyd.edu.au/appleupdates/content/downloads/11/30/041-4540/6JfG7McpmBmS2nbCWvJXX9GQmYhYQ8dWQJ/JavaEssentials.pkg)（在[这个线程](https://forum.processing.org/topic/how-to-re-enable-java-1-6-on-mac-osx-mountain-lion)上找到）下载了它，但似乎没有什么能解决问题。

# asp.net-mvc - 将 windowsidentity 拉入 mvc 视图

> ID：15439630
> 
> 赞同：1
> 
> 时间：2013-03-15T18:26:20.173
> 
> 标签：asp.net-mvc, label

我需要在 asp.net 4.5 mvc 视图中显示当前登录的用户。想如果我在控制器中有代码并在视图中执行 labelfor，我可以获得我需要的结果。已经尝试了各种事情，但没有什么是正确的。我目前拥有的是这样的：

在家庭控制器中：

```
 public String CurrentUserName()
    {
        return System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString();
    } 
```

在我看来：

```
 @ViewBag.CurrentUserName(); 
```

我要去哪里穿？出于某种原因，两人只是没有走到一起。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:34:39.857

家庭控制器：

```
public void setCurrentUserName()
{
    ViewBag.CurrentUserName = System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString();
} 
```

你可以`@ViewBag.CurrentUserName`在你的视图中使用它。

# python - 从 python 代码控制本地 redis 服务器

> ID：15439633
> 
> 赞同：3
> 
> 时间：2013-03-15T18:26:28.510
> 
> 标签：python, linux, redis

我正在寻找一种方法来检查 redis 实例（在具有默认端口的本地计算机上）是否正在运行。如果没有，我想从我的 python 代码开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:46:58.723

如果你启动了一个 redis 客户端，你可以先尝试 ping——如果你得到一个，`redis.exceptions.ConnectionError`那么服务可能没有运行。以下是此类功能的示例。还有其他方法可以获得类似或更可靠的结果——这只是一种简单的方法。另请注意，这不会告诉您是否设置了特定密钥或有关 redis 设置的任何信息。它只会告诉您本地主机上是否有实时 redis 服务器。

```
def redisLocalhostLive():
    redtest = redis.StrictRedis() # non-default ports could go here
    try:
        return redtest.ping()
    except ConnectionError:
        return False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:05:30.057

gah，Pyrce 击败了我，给出了类似的答案。无论如何发布：

```
import redis

server = redis.Redis()
try:
    server.ping()
except redis.exceptions.ConnectionError:
    # your redis start command here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:12:06.197

一种方法是[使用 psutil](https://pypi.python.org/pypi/psutil)，这是一个 Python 模块，它提供了一种跨平台的方式来检索正在运行的进程的信息。

```
>>> import psutil
>>> processes = psutil.process_iter()   # Get all running processes
>>> if any(process.name == 'redis-server' for process in processes):
...     print "redis is running"
... 
redis is running 
```

# java - 一个合适的 Java UpdateLauncher 是什么样子的？

> ID：15439635
> 
> 赞同：0
> 
> 时间：2013-03-15T18:26:36.683
> 
> 标签：java, version, updates, launcher

我正在为 java .jar 应用程序开发更新启动器。我有几个 .jar 档案和一个 main.jar。我的启动器在更新时添加/替换了必要的 jar。

我只是不确定要遵循什么标准。所以我将描述这个过程是如何工作的，如果我忘记了什么，你可能会告诉我。

1.  从 ftp 更新服务器加载和比较 version.xml 文件
2.  借助两个 version.xml 文件制作更新项目列表
3.  检查（确定）那些仍然有效的文件是否确实存在于硬盘上（或者将它们添加到需要下载的项目列表中......无论如何都不应该发生）
4.  创建需要下载的文件列表（这些项目以压缩形式在服务器上）
5.  将所有需要的文件下载到 /temp 文件夹
6.  将所有文件解压到 /temp/unpack
7.  将所有解压文件移动到 /data 文件夹（或它们所属的位置）
8.  更新本地 version.xml
9.  检查所有文件是否与实际版本文件列表匹配

我真的不确定我是否忘记了什么？如果某些用户弄乱了 /data 中的文件，我的更新程序会识别出这一点并提出“修复更新”，其中所有丢失的文件都将被重新下载。但是，那些搞乱version.xml 的用户呢？我应该加密存储。是否有必要保持从更新服务器下载的 version.xml 保持打开状态，以便在检查版本和更新时没有人可以更改？还是我太担心这一切了？

到目前为止，这一切是否可行，是否足够安全，不会在补丁后在用户 PC 上创建凌乱的安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:33:18.347

您是否打算使用 Java 1.6 中的 System Tray 类来通知用户更新？对我来说，这样的事情似乎需要[实现一个 OSGi 更新程序](https://stackoverflow.com/questions/7097169/using-osgi-to-implement-auto-update)（有点像 Eclipse 项目在 IDE 中的操作方式）。此外，JVisualVM.exe 工具（JDK 附带）是这类事情的一个很好的例子，也许你可以从中得到一些想法，尽管我怀疑它是用 C++ 编码的。

# java - MultiActionController 的意义何在？

> ID：15439648
> 
> 赞同：4
> 
> 时间：2013-03-15T18:27:25.000
> 
> 标签：java, spring, spring-mvc

我今天遇到`MultiActionController`了，我不确定我是否理解它的用途......在 Spring[文档](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/mvc/multiaction/MultiActionController.html)上，它说

> 允许同一类处理多种请求类型的控制器实现。这个类的子类可以处理几种不同类型的请求，方法如下：

在另一个[网站上](http://www.goospoos.com/2009/11/spring-multiactioncontroller-example/)，他们说

> 它将多个请求处理方法聚合到单个控制器中，因此可以轻松地将相关功能保持在一起。

我仍然不明白如何扩展`MultiActionController`比以下更好或不同？或者`MultiActionController`更多的是旧版本 Spring 的遗产？我觉得我有一些基本的误解......

```
@Controller
public class MyController {

    @RequestMapping("/SomePage.html")
    public ModelAndView epdReview(
        @RequestParam(value="sessionID", required=true) String sessionId,
        MyFormData form,
        HttpSession session,
            HttpServletRequest request){
        //....
    }

    @RequestMapping(value = "/newData.json", method = RequestMethod.POST)
    public @ResponseBody ValidationResponse process(Model model,
        @Valid SomeData formData, BindingResult result,
        HttpSession session) {
        //....
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:36:01.260

Yes, that is from the Spring 2.0 MVC API, as is anything that implements the old [Controller Interface](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/mvc/Controller.html). I can't find anything around the web from a Spring Developer regarding why this one was not deprecated when all of its cousins were.

I could offer 100% pure speculation that it could be because people could have totally valid custom-implementations of the [MethodNameResolver](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/mvc/multiaction/MethodNameResolver.html) that are impossible to replace with the behaviour of DefaultAnnotationMethodHandlerAdapter. Therefore annotation based config does not provide a 100% alternative to every legitimate use of this class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T09:09:58.080

Spring 提供了一个多动作控制器，通过它可以将多个动作聚合到一个控制器中，将功能分组在一起。多动作控制器能够将请求映射到方法名称，然后调用正确的方法名称。当您在一个控制器中有很多常用功能，但又希望控制器有多个入口点时，使用多动作控制器特别方便

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:45:53.527

使用带注释的控制器的漏洞——就像你后面的例子一样——是支持请求处理而不依赖于继承或框架特定的类（比如第一个例子中的四个）。在[Spring 文档](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s11.html)中，您可以找到以下内容：

> Spring 2.5 为 MVC 控制器引入了基于注解的编程模型，使用 @RequestMapping、@RequestParam、@ModelAttribute 等注解。这种注解支持可用于 Servlet MVC 和 Portlet MVC。以这种风格实现的控制器不必扩展特定的基类或实现特定的接口。

因此，如果您已经在使用带注释的控制器，那么扩展 Spring 内置控制器（如`MultiActionController`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T07:22:00.630

Spring MultiActionController 用于将类似的操作映射到单个控制器。所以如果你使用 MultiActionController 类，你不需要为每个动作创建新的控制器类。

例如：当我们登录网上银行时，有一个添加和删除收款人的选项。因此我们可以使用单个 PayeeController 来执行类似的操作，例如添加和删除。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T18:35:05.847

引自[mkyong.com](http://www.mkyong.com/spring-mvc/spring-mvc-multiactioncontroller-example/)：

在 Spring MVC 应用程序中，MultiActionController 用于将相关操作分组到单个控制器中，方法处理程序必须遵循以下签名：

```
public (ModelAndView | Map | String | void) actionName(
    HttpServletRequest, HttpServletResponse [,HttpSession] [,CommandObject]); 
```

例子

```
package com.vitthal.common.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

public class CustomerController extends MultiActionController{

    public ModelAndView add(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        return new ModelAndView("CustomerPage", "msg","add() method");

    }

    public ModelAndView delete(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        return new ModelAndView("CustomerPage", "msg","delete() method");

    }

    public ModelAndView update(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        return new ModelAndView("CustomerPage", "msg","update() method");

    }

    public ModelAndView list(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        return new ModelAndView("CustomerPage", "msg","list() method");

    }

} 
```

配置了 ControllerClassNameHandlerMapping。

```
<beans ...>

 <bean 
  class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

  <bean class="com.mkyong.common.controller.CustomerController" />

</beans> 
```

映射示例 现在，请求的 URL 将按照以下模式映射到方法名称：

```
CustomerController –&gt; /customer/*
/customer/add.htm –&gt; add()
/customer/delete.htm –&gt; delete()
/customer/update.htm –&gt; update()
/customer/list.htm –&gt; list() 
```

InternalPathMethodNameResolver InternalPathMethodNameResolver 是将 URL 映射到方法名称的默认 MultiActionController 实现。但是，您仍然可以在方法名称中添加前缀或后缀：

```
<beans ...>
 <bean 
  class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

  <bean class="com.vitthal.common.controller.CustomerController">
     <property name="methodNameResolver">
    <bean class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver">
       <property name="prefix" value="test" />
       <property name="suffix" value="Customer" />
    </bean>
     </property>
   </bean>
</beans> 
```

现在，URL 将按照以下模式映射到方法名称：

```
CustomerController –&gt; /customer/*
/customer/add.htm –&gt; testaddCustomer()
/customer/delete.htm –&gt; testdeleteCustomer()
/customer/update.htm –&gt; testupdateCustomer()
/customer/list.htm –&gt; testlistCustomer() 
```

注意 有了注解，MultiActionController 更容易配置

# android - 自定义对话框布局小部件绘图问题

> ID：15439653
> 
> 赞同：1
> 
> 时间：2013-03-15T18:27:39.240
> 
> 标签：android, dialog

我正在尝试创建一个配置有几个文本视图、一个编辑文本、滚动视图和一个“确定”按钮的自定义对话框。由于某些原因，我无法正确对齐对话框中的“确定”按钮。

我创建对话框的代码如下：

```
 mLineupDialog=new Dialog(context,R.style.CustomDialogTheme);

           mLineupDialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
           View view = LayoutInflater.from(context).inflate(R.layout.custom_dialog, null, false);
           rg = (RadioGroup) view.findViewById(R.id.radiogroup);
           RadioGroup.LayoutParams layoutParams = new RadioGroup.LayoutParams(
                           RadioGroup.LayoutParams.WRAP_CONTENT,
                           RadioGroup.LayoutParams.WRAP_CONTENT);

           for (int i = 0; i < lobjs.length; i++){
                   rb = new RadioButton(context);
                   rb.setText(lobjs[i].carrierName);               
                   rb.setId(i);
    //             rb.setTextColor
                   rg.addView(rb, layoutParams);
               }                  

           zipEntry.setText(mZipCode);  
           mPrefs.edit().putString(sharedZipEntry, mZipCode).commit();
     }             

       mLineupDialog.setContentView(view);            

       Button Ok =(Button)view.findViewById(R.id.lineupdialogButton); 
```

我的布局文件如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linlayoutBase"
    android:layout_width="@dimen/favorite_dialog_width"
    android:layout_height="match_parent"
    android:background="@drawable/add_remove_to_favs_question_bottom_bubble"
    android:focusableInTouchMode="false"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lineup_heading"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="@dimen/favorite_dialog_text_margin_left"
        android:layout_marginTop="@dimen/favorite_dialog_text_margin_top"
        android:text="@string/sel_lineup"
        android:textColor="@color/white_font"
        android:textSize="@dimen/fav_alert_text_size"
        android:typeface="sans" >
    </TextView>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/zipcode_prompt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/favorite_dialog_text_margin_left"
            android:text="@string/sel_zipcode"
            android:textColor="@color/white_font"
            android:textSize="@dimen/fav_alert_text_size"
            android:typeface="sans" >
        </TextView>

        <EditText
            android:id="@+id/zipEntry"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textColor="@color/white_font"
            android:textSize="@dimen/fav_alert_text_size"
            android:typeface="sans" >
        </EditText>
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:layout_weight="1" >

        <LinearLayout
            android:id="@+id/linearMain"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/favorite_dialog_text_margin_left" >

            <RadioGroup
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/radiogroup"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="@dimen/favorite_dialog_text_margin_left"
                android:orientation="vertical"
                android:textColor="@color/white_font"
                android:textSize="@dimen/fav_alert_text_size"
                android:typeface="sans" >
            </RadioGroup>
        </LinearLayout>
    </ScrollView>

    <Button
        android:id="@+id/lineupdialogButton"
        android:layout_width="@dimen/favorite_dialog_button_width"
        android:layout_height="wrap_content"
        android:layout_marginLeft="200dp"
        android:gravity="center_horizontal"
        android:text="@string/favorite_dialog_button_ok_text"
        android:textColor="@xml/info_panel_button_text_watch_selector"
        android:textSize="@dimen/favorite_dialog_button_text_size"
        android:textStyle="bold"
        android:typeface="sans" >

        <!-- android:layout_weight="1" -->

    </Button>

</LinearLayout> 
```

问题是“确定”按钮只是部分超出了对话框的底部边框。. 任何解决此问题的建议将不胜感激！谢谢！！

[附加的自定义对话框的图像](http://i.stack.imgur.com/yWbx9.png)

# ruby-on-rails - Ruby on Rails 与遗留数据库的无表模型关联

> ID：15439655
> 
> 赞同：0
> 
> 时间：2013-03-15T18:27:48.560
> 
> 标签：ruby-on-rails, activerecord

我只是在学习 RoR，并且正在尝试围绕我的遗留数据库构建一个模型，该模型更多地围绕 SPROC 构建用于查询数据。我找到了[activerecord-tableless](http://rubygems.org/gems/activerecord-tableless) gem 并使用它来帮助构建模型。

到目前为止，我能够让基本模型正常工作：

```
class Wine < ActiveRecord::Base
  has_no_table

  self.primary_key = "iWine"

  column :iWine, :integer
  column :Wine, :string
  column :Vintage, :integer
  ....etc......

  attr_accessible :iWine, :Wine, :Vintage, .....

  has_many :labelImages

  def self.find_wine(id)
    r = ActiveRecord::Base.execute_procedure "sp_FetchWineVerbose", 'iWine' => id.to_i
    if r.size > 0
      w = Wine.new(r[0])
      return w;
    end
  end
end 
```

现在，我想利用 ActiveRecord 的关联来提取其他相关数据，例如标签图像、其他年份等。这是我目前所拥有的：

```
class LabelImage < ActiveRecord::Base
  has_no_table

  column :id, :integer
  column :width, :integer
  column :height, :integer
  column :wine_id, :integer

  attr_accessible :id, :width, :height, :wine_id
  after_initialize :fetch_data

  belongs_to :wine

  def fetch_data()
    sql = <<-eos
SELECT iLabel AS id, Width AS width, Height AS height, ....
eos

    r = ActiveRecord::Base.connection.select_all(sql, 'Label Image', [[wine_id,wine_id]])
    if r.size > 0
        self.assign_attributes(r[0])
    end
  end
end 
```

所以，现在，我可以调用`w = Wine.find_wine(1)`then `w.labelImages.build`，然后我得到一个带有正确数据的 LabelImage 对象。但是，我还在控制台中收到以下消息：

```
Could not log "sql.active_record" event. NoMethodError: undefined method `name' for 1:Fixnum 
```

我已经尝试挖掘源代码，但无法弄清楚这是从哪里来的。而且，我也无法弄清楚如何覆盖初始化以返回多个 LabelImage 对象的数组——因为任何给定的葡萄酒都可能有很多。我应该重写该`build`方法（如果是这样，如何？），还是有另一种方法来创建对象，然后将它们分配给 Wine.labelImages 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:06:43.130

您可能会遇到困难，`activerecord-tableless`gem 实际上是用于未存储在 SQL 数据库中的信息。

我建议查看类似的东西`https://rubygems.org/gems/rmre`可以帮助基于您现有的模式构建 active_models。

# quartz-scheduler - 如何知道特定作业是否正在使用带有 jboss 接缝的石英运行？

> ID：15439658
> 
> 赞同：0
> 
> 时间：2013-03-15T18:28:16.450
> 
> 标签：quartz-scheduler, jboss-seam

我正在使用 Jboss-seam 2.2.2.Final 并且我有一些石英工作。在应用程序执行期间，我必须验证特定作业是否正在运行。

我已经可以访问这些工作，但每个工作都有一个由石英创建的名称。这是接缝注入的代码：

```
 @In("org.jboss.seam.async.dispatcher")
    private QuartzDispatcher quartzDispatcher; 
```

为了获得正在运行的作业，我有以下代码：

```
 Scheduler scheduler = quartzDispatcher.getScheduler();
    List<JobExecutionContext> currentJobs;
    currentJobs = scheduler.getCurrentlyExecutingJobs();
    for (JobExecutionContext jobCtx: currentJobs){
        System.out.println(jobCtx.getJobDetail().getName());
    } 
```

任何人都知道如何使用 jboss-seam 在石英工作上命名？我做了一些研究，在 jira 上找到了这张票：[https ://issues.jboss.org/browse/JBSEAM-4399](https://issues.jboss.org/browse/JBSEAM-4399)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T15:14:03.530

Seam 为每个作业生成一个基于 UUID 的唯一名称，没有直接的方法可以覆盖它。您的替代方案是：

1.  使用找到的补丁，这需要使用添加的自定义代码构建自定义 Seam 库。

2.  用您自己的自定义调度程序覆盖 OOTB 石英调度程序，覆盖该`scheduleWithQuartzService`方法并使用您自己的方案来命名作业（查看源代码，`org.jboss.seam.async.QuartzDispatcher`您会看到它调用了`nextUniqueName()`一个为作业生成新的唯一名称的方法，您需要从其他地方获取作业名称，最终以与在您找到的补丁中相同的方式通过注释完成）。

3.  `org.quartz.JobListener`您可以创建一个石英事件侦听器来实现并注册一个作业何时开始和结束在全局哈希表或类似的东西中执行，而不是尝试查看作业是否正在运行。然后，您在哈希表中查找作业以获取其状态，而不是按名称搜索。但是，这仅在您的调度程序未集群时才有效（quartz 将仅通知本地节点中的侦听器，其他节点将不知道该作业已被触发）。

# c++ - 没有“Windows 窗体”或“框架”的 C++ GUI

> ID：15439662
> 
> 赞同：3
> 
> 时间：2013-03-15T18:28:32.797
> 
> 标签：c++, visual-c++

我想在 Visual Studio 2012 Express 中使用 C++ 创建普通程序。我知道有很多带有 GUI 的程序（我不确定它是否是 GUI，但我用它来调用普通程序）。我想创建这样的程序。我试着用 VB 和他们的 windows 窗体来做。但是当我把它给我的朋友时，它需要一些愚蠢的文件，比如 pdb（我再次不确定，但它无法打开）或者它需要 .NET 框架。无论如何它没有工作。我想创建一个不需要另一个文件或程序来工作的程序。

只是我想用按钮、标签、文本框制作一个简单的程序，它不会请求其他文件。只有1个exe。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:31:29.417

对于纯“本机代码”用户界面，您有几个选项。

[Microsoft 基础类 (MFC) 库](http://msdn.microsoft.com/en-us/library/d06h2x6e.aspx)是 Visual Studio 中包含的主要选项。

否则，您可以转到第 3 方选项。 [如果您愿意安装 Qt， Qt](http://qt-project.org/)是一个非常不错的选择，并且为丰富的用户界面提供了更好的开发模型（在我看来）。

话虽如此 - 如果您已经使用 Windows 窗体工作，让您的朋友安装 .NET 框架比重写整个代码库只是为了避免它要简单得多。删除对库的所有依赖项非常困难——尽管拥有本机 UI 可能会简化部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:32:20.390

您应该学习如何使用 WINAPI

# visual-studio - 如何告诉 Visual Studio 使用自定义编辑器打开文件？

> ID：15439668
> 
> 赞同：4
> 
> 时间：2013-03-15T18:28:47.533
> 
> 标签：visual-studio, visual-studio-extensions

我正在为 Visual Studio 实现一个自定义编辑器。我是这样注册的：

```
[ProvideEditorExtension(typeof(MyEditorType), ".myext", 99, NameResourceID = 106)] 
```

当扩展的包被初始化时，我像这样注册编辑器实例：

```
RegisterEditorFactory (new MyEditorType()); 
```

注册似乎有效，因为我可以在 Open With... 命令显示的列表中看到我的编辑器，如果我在那里选择它，我可以在我的编辑器中打开文件。但是，当我在解决方案资源管理器中双击文件时，它总是会打开文本编辑器，尽管我的自定义编辑器在“打开方式”对话框中设置为默认值。

我缺少什么？

# php - 将后备图像添加到 wordpress 高级自定义字段循环

> ID：15439674
> 
> 赞同：0
> 
> 时间：2013-03-15T18:29:17.123
> 
> 标签：php

我目前正在我正在开发的 wordpress 网站上使用高级自定义字段插件，事实证明它非常有用。

我购买了中继器插件，它帮助我生成了工作人员列表。但是我想工作人员不会总是有可用的图像，所以我想使用后备图像或使用在线占位符图像服务，如[http://placehold.it](http://placehold.it)？

这是代码：

```
 <?php if(get_field('about_the_practioner')): ?>

                <?php while(the_repeater_field('about_the_practioner')): ?>

                <article class="colleague_excerpts">

                         <figure>
                            <?php if(get_field('image')): ?>
                            <img src="<?php the_field('image' ) ?>" alt="<?php the_sub_field('image_alt_text'); ?>">
                            <?php else: ?>
                            <img src="http://placehold.it/160x160&text=Awaiting Image">
                            <?php endif; ?> 

                         </figure>

                        <div class="description">
                            <header>
                                <h4><?php the_sub_field('header')?><span><?php the_sub_field('title')?></span></h4>
                            </header>
                            <p><?php the_sub_field('text') ?></p>
                            <a href="<?php the_sub_field('page_link')?>" class="button"><?php the_sub_field('page_link_text') ?></a>
                        </div>
                    <hr>

                </article>

                <?php endwhile; ?>

                <?php endif; ?> 
```

如果特色图像不可用，我已经看到用于创建后备图像的条件语句。在这种情况下，我在调用图像时尝试了类似的方法，但是我不擅长使用 php，即使填充了图像字段，也只会将后备图像带入网页。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:00:34.087

刚刚想通了！我传递给条件语句的函数不正确！我正在使用高级自定义字段的转发器字段功能，并且应该为上述所有值传递 get_sub_field 。那些小事让你大吃一惊！

```
<?php if(get_sub_field('image')): ?>
<img src="<?php the_sub_field('image' ) ?>" alt="<?php the_sub_field('image_alt_text'); ?>">
<?php else: ?>
<img src="http://placehold.it/160x160&text=Awaiting Image">
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:41:01.547

虽然我不知道其中一些函数返回什么，但无论是否有图像，函数**get_field('image')都可能返回一些东西，所以不是**

```
<?php if(get_field('image')): ?>
<img src="<?php the_field('image' ) ?>" alt="<?php the_sub_field('image_alt_text'); ?>">
<?php else: ?>
<img src="http://placehold.it/160x160&text=Awaiting Image">
<?php endif; ?> 
```

也许试试

```
<?php if(!empty(the_field('image'))): ?>
<img src="<?php the_field('image' ) ?>" alt="<?php the_sub_field('image_alt_text'); ?>">
<?php else: ?>
<img src="http://placehold.it/160x160&text=Awaiting Image">
<?php endif; ?> 
```

如果图像为空，则返回占位符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T11:09:49.203

我可能数错了，事实上我是。忽略这个答案。我认为括号不匹配，并且生成的 HTML 中的问题导致了问题。乔尼·比奇（Jonny Beech）已经解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T09:47:24.713

尝试这个

```
 <?php 
$image = get_field('banner');
if( !empty($image) ): 
?>
<img src="<?php echo $image['url']; ?>" alt="<?php echo $image['alt']; ?>"/>
<?php else: ?>
<?php 

 echo "no image";?>

<?php endif; ?> 
```

# ruby-on-rails - assert_equal 语法

> ID：15439675
> 
> 赞同：3
> 
> 时间：2013-03-15T18:29:20.683
> 
> 标签：ruby-on-rails, ruby

我无法理解我正在阅读的书中的一大段代码。

这是代码：

```
test "product price must be positive" do
  product = Product.new(:title => "My Book Title", :description => "yyy", :image_url => "zzz.jpg")
  product.price = -1

  assert product.invalid?
  assert_equal "must be greater than or equal to 0.01", product.errors[:price].join('; ' )

  product.price = 0
  assert product.invalid?

  assert_equal "must be greater than or equal to 0.01", product.errors[:price].join('; ' )
  product.price = 1
  assert product.valid?
end 
```

形成我得到的红宝石文档：

**assert_equal** (exp, act, msg = nil)

如果可能，除非 exp == act 打印两者之间的差异，否则失败。

我是否正确地假设该行：

> assert_equal "必须大于等于 0.01" ,

方法：

> assert_equal ("must be greater than or equal to 0.01", , ) #with no act or msg.

另外，有人可以解释下一行使用什么数组以及做什么用的吗？

> product.errors[:price].join(';')

我无法掌握数组在哪里以及作者通过加入实现了什么。

提前感谢您提供任何信息。

这本书是：Agile Web Development with Rails 4th Edition

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:43:59.540

完整的断言在一行中，如下所示：

```
 assert_equal "must be greater than or equal to 0.01" , product.errors[:price].join('; ' ) 
```

在这里，`exp = "must be greater than or equal to 0.01"`和`act = product.errors[:price].join('; ' )`

`product.errors[:price]`是一个数组，包含多个错误消息。

链接`.join(';')`到它是使所有错误消息与';'连接在一起 作为分隔符。

在这种情况下，只有一个错误 ( `"must be greater than or equal to 0.01"`)，因此[join 方法](http://ruby-doc.org/core-2.0/Array.html#method-i-join)只是返回相同的值而不添加分隔符。因此断言应该通过。

举例说明`join(';')`在这种情况下的行为：

```
> ['a', 'b'].join(';')
=> "a;b" 

> ['a'].join(';')
=> "a" 
```

# javascript - VideoJS 无法在 IE8 上使用 WordPress

> ID：15439676
> 
> 赞同：0
> 
> 时间：2013-03-15T18:29:28.413
> 
> 标签：javascript, wordpress, html5-video, video.js

我在我的[网页上](http://www.feliciasearcy.com/test-video-page-2)使用 VideoJS ，它在 FF19 和 Chrome25 中工作，但在 IE8 上不起作用。

控制台在 IE8 中记录以下内容：

`Invalid argument. video.js?ver=3.5.1, line 21 character 32228`

...这是以下内容：

`this.el.removeChild(this.tag);`

我还制作了一个仅包含视频并且适用于所有浏览器的[测试页面](http://www.feliciasearcy.com/video/test_gift_video.html)，这让我觉得我的主题中的某些东西干扰了视频......但为什么这只适用于 IE8 而不是其他浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:40:42.770

IE 8 对关闭标签的方式非常挑剔。[通过 W3C 验证器 ( http://validator.w3.org/](http://validator.w3.org/) )运行我的文件并更正任何错误，我的问题得到了解决。尤其要注意关闭 CSS 包含以及`<script>`标签的方式。

# cocoa-touch - Cocoa 触摸视图/视图控制器约定

> ID：15439688
> 
> 赞同：0
> 
> 时间：2013-03-15T18:30:12.390
> 
> 标签：cocoa-touch, uiview, uiviewcontroller

我是 iOS 开发新手，正在处理现有项目。我只是有一个关于视图和视图控制器应该如何概念化以及处理它们的约定的快速问题。

我注意到基`UIViewController`类有一个`view`引用实际“物理”（因为没有更好的词）视图的属性，而控制器基本上管理该物理视图（并将其与模型联系起来，等等——我理解的标准 mvc 东西）。

这表明视图控制器在可可触摸中具有概念上的优先级。但是，当添加子视图（到父物理视图？或父视图控制器？）时，它接受物理视图，而不是视图控制器。

是否期望我首先创建子视图*控制器*（大概创建自己的物理视图）然后将其`view`属性传递给`addSubView`？我只是想确保在这里的传统工作流程中没有遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:27:57.727

视图和视图控制器的比例不是 1:1。视图控制器管理给定功能区域所需的尽可能多的视图——在 iPhone 上，通常是一个充满内容的屏幕，但这个定义略有变化。

控制器的 view 属性只是父视图——它可以有尽可能多的子视图来完成这项工作。控制器在这些视图和数据模型之间进行协调以提供应用程序的功能。

您可以拥有子视图控制器，它们被添加到视图控制器层次结构以及视图层次结构中（子视图控制器的视图被添加为父视图控制器视图的子视图），但您不会对每个子视图都这样做。

在 WWDC 2012（“视图控制器的演变”，IIRC）中有一个精彩的演讲很好地解释了这一点。

# wix - WinZip Self Extractor 将命令行参数传递给 msi

> ID：15439692
> 
> 赞同：1
> 
> 时间：2013-03-15T18:30:25.147
> 
> 标签：wix, zip, self-extracting

我使用 wix 3.6 创建了一个安装程序，它生成一个包含多个对话框（EULA、安装位置等）的 msi 文件。然后，我在启动 msi 的“软件安装”模式下使用 WinZip Self Extractor 创建了一个自解压 zip 文件。这一切都很好。

但是，一些用户要求使用不提示输入的“最小”安装模式，它只是使用所有默认值并安装。这将作为较大安装脚本的一部分用于管理员类型的安装。我可以将 /qb 传递给 msi 并获得他们想要的确切行为，但是如果我将 /qb 传递给自提取器 exe，它不会像我想要的那样将它传递给 msi。我查看了 WinZip Self Extractor 文档，但没有找到答案。关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:12:54.140

我不建议使用 WinZip 等通用自解压可执行文件，因为它们不缓存 MSI 文件。未来对 MSI 的操作（包括次要升级、补丁和修复）可能需要为 MSI 提供自解压器使用的名称（希望 WinZip 不会更改该名称），并将默认使用路径（通常为 %TEMP%）。发生这种情况时，用户通常会非常困惑，无法升级或修复他们的安装。

相反，我建议使用旨在安装包的 Bootstrapper/Chainer。WiX v3.6+ 带有一个名为的新功能`Bundle`，它使用新的 Burn 引擎来处理所有自解压场景，以及更多。预先创建需要更多的工作，但可以表现得完全像你在这个问题中提出的问题。

可能不是您正在寻找的答案，但我强烈建议您考虑使用真正的引导程序/链接器而不是自提取器。

# java - 通过 java 访问 AD 时出现即时 Timelimit 错误的原因

> ID：15439694
> 
> 赞同：1
> 
> 时间：2013-03-15T18:30:26.403
> 
> 标签：java, active-directory, ldap, cas, spring-ldap

我正在尝试解决导致引发以下异常的 CAS 问题：

```
javax.naming.TimeLimitExceededException: [LDAP: error code 3 - Timelimit Exceeded]; remaining name ''
        at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3097)
        at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2987)
        at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2794)
        at com.sun.jndi.ldap.LdapNamingEnumeration.getNextBatch(LdapNamingEnumeration.java:129)
        at com.sun.jndi.ldap.LdapNamingEnumeration.hasMoreImpl(LdapNamingEnumeration.java:198)
        at com.sun.jndi.ldap.LdapNamingEnumeration.hasMore(LdapNamingEnumeration.java:171)
        at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:295)
        at org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:361)... 
```

几乎立即返回错误。客户端超时设置为 10 秒，但这并没有发生，因为根据查看 com.sun.jndi.ldap 代码，域控制器似乎正在返回状态为 3 的响应，表示超过时间限制。

我们正在访问 Active Directory 全局目录，我们的过滤器和基础非常广泛：base = '', filter = (proxyAddresses=*:someone@somewhere.com) 但是，查询有时会成功，但会立即返回状态代码 3 .

有谁知道可能导致这种行为的原因是什么？或者也许如何确定到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T14:28:29.533

原来我们的搜索过滤器太宽泛了。

如您所见，我们在过滤器中使用了通配符，查询耗时不到 2 秒。

但是，2 秒比 Active Directory 配置的时间限制要短得多，所以我无法弄清楚为什么会立即发生错误（失败时甚至不需要 2 秒）。

我假设 AD 一定是在累积来自同一帐户的多个请求所花费的时间，并且在某个时候开始返回超出时间限制的错误。

为了解决这个问题，我们修改了搜索过滤器，使其不再包含通配符。然后搜索几乎立即运行，不再发生超出时间限制。

# android - 如何在 android 中动态调整 Shape 的大小？

> ID：15439695
> 
> 赞同：0
> 
> 时间：2013-03-15T18:30:34.287
> 
> 标签：android, shapes

我想选择相机视图的特定部分。我正在考虑绘制一个可重新调整大小的矩形/圆形，其大小可以通过触摸动态更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:56:23.277

覆盖 onDraw 方法

```
private void onDraw(Canvas c){

invalidate();
super.onDraw();

//detect position of two fingers touching screen to define the corners of your rectangle

//draw your rectangle
} 
```

# sql - 在组中包括 null/0 行

> ID：15439698
> 
> 赞同：1
> 
> 时间：2013-03-15T18:30:45.347
> 
> 标签：sql, sql-server, group-by

我想查询数据库中的用户以及他们在每个活动类别上花费的时间。这些类别存储在表 ActivityCategory (int Id, varchar Name) 中。其中只有 8 个，我希望看到所有这些，即使**没有人**花时间在特定类别上。

我有以下查询：

```
select u.NoEmploye, u.FirstName, u.LastName, Total=sum(h.NbHeures), ac.Name
from Users u
join Semaines s on u.EntityGuid=s.UserGuid
join HeuresProjets hp on s.Id=hp.WeekId
join Heures h on hp.HPId=h.HpGuid
join ActivityCodes code on h.Code=code.ActivityId
join ActivityCategory ac on code.Categorie=ac.Id
group by u.NoEmploye, u.FirstName, u.LastName, ac.Name
order by u.NoEmploye 
```

它工作正常，但不会返回未使用的 ActivityCategories。我尝试了全/左/右/内/外/you-name-it 连接的每一种组合。当没有人使用某个类别时，我能得到的最好结果是完全为空的行，而特定用户不使用但其他人使用的类别为空 ac.Name。我怀疑这`group by [...]`*`ac.Name`*部分是什么“吃”了未使用的类别。我究竟做错了什么？我应该编写第二个选择查询来对结果进行分组吗？我将有十几个类似的查询要写，所以我想理解而不是仅仅有一个没有解释的固定查询。

**编辑** Lamak 的第二个查询到目前为止有效，但是当我添加 where 子句时它有同样的问题。

**EDIT2** ypercube' 编辑工作完美

现在让我们看看我是否正确理解了查询。当结果为空时，我将 Sum 与 0 合并以获得适当的值。我从 ActivityCategory 开始选择，以确保我拥有所有这些，甚至是未使用的，我与用户交叉加入以获得 ActivityCategory 和用户的每种组合。我离开 join Activitycodes 只获取相关行，然后我内部加入我的其他表以到达 Semaine。我的条件适用于 Semaine 表的连接，因为我想在交叉连接之前过滤我的数据。最后，我按用户和 ActivityCategory 对我的数据进行分组，以使总和有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:34:07.807

这应该这样做：

```
SELECT  u.NoEmploye, u.FirstName, u.LastName, Total=sum(h.NbHeures), ac.Name
FROM ActivityCategory ac
LEFT JOIN ActivityCodes code
    ON code.Categorie=ac.Id
LEFT JOIN Heures h
    ON h.Code=code.ActivityId
LEFT JOIN HeuresProjets hp
    ON hp.HPId=h.HpGuid
LEFT JOIN Semaines s
    ON s.Id=hp.WeekId
LEFT JOIN Users u
    ON u.EntityGuid=s.UserGuid
GROUP BY u.NoEmploye, u.FirstName, u.LastName, ac.Name
ORDER BY u.NoEmploye 
```

基本上，如果您想要所有类别，则需要将该表用作您的第一个表`FROM`并`LEFT JOIN`对该表执行操作。

**更新** 如果您希望结果中每个用户的每个类别，您将需要一个`CROSS JOIN`：

```
SELECT  u.NoEmploye, u.FirstName, u.LastName, Total=sum(h.NbHeures), ac.Name
FROM ActivityCategory ac
CROSS JOIN Users u
LEFT JOIN ActivityCodes code
    ON code.Categorie=ac.Id
LEFT JOIN Heures h
    ON h.Code=code.ActivityId
LEFT JOIN HeuresProjets hp
    ON hp.HPId=h.HpGuid
LEFT JOIN Semaines s
    ON s.Id=hp.WeekId AND u.EntityGuid=s.UserGuid
GROUP BY u.NoEmploye, u.FirstName, u.LastName, ac.Name
ORDER BY u.NoEmploye 
```

要解决要添加`WHERE`子句时的问题：

```
SELECT  u.NoEmploye, u.FirstName, u.LastName, 
        Total=COALESCE(SUM(h.NbHeures),0), ac.Name
FROM ActivityCategory ac
CROSS JOIN Users u
LEFT JOIN 
        ActivityCodes code
        JOIN Heures h
            ON h.Code=code.ActivityId
        JOIN HeuresProjets hp
            ON hp.HPId=h.HpGuid
        JOIN Semaines s
            ON s.Id=hp.WeekId 
            AND (some condition on the dates)            -- add here
    ON  ac.Id = code.Categorie
    AND u.EntityGuid = s.UserGuid
GROUP BY u.NoEmploye, u.FirstName, u.LastName, ac.Name
ORDER BY u.NoEmploye 
```

# php - 希比吉比 123456789

> ID：15439701
> 
> 赞同：1
> 
> 时间：2013-03-15T18:30:54.823
> 
> 标签：php

我目前正在尝试创建一个可以使用存储在外部文本文件中的缩写词来缩短单词的应用程序。单词后面可以跟标点符号，缩短后也应该保留。

如果找不到它的缩写，我无法让该方法返回原始单词。从表面上看，该方法没有达到我的最终退货声明，我不确定为什么。

```
public class WordShortener {

private Scanner fileIn;
private String shortenedWord ="";
private String s="";

    public WordShortener() throws Exception {
    // to be completed
    Scanner fileIn = new Scanner(new File("abbs.txt"));
    this.fileIn = fileIn;
    }

public String wordShortener( String WordToShorten ) {
    // to be completed
        String s = wordToShorten;
            String shortened ="";
        while ( shortenedWord.equals(WordToShorten) && fileIn.hasNextLine()  ) {
            String line = fileIn.nextLine();
            String punctuationChar="";
            String[] lines = line.split(",");
            String originalWord = lines[0];
            String shortenedWord = lines[1];
            String punctuations = "'?.";

            if ( punctuations.contains(s.substring(s.length() - 1)) ) {
                punctuationChar = s.substring(s.length() - 1);
            }

            if ( wordToShorten.contains(lines[0]) ) {
                String shortenedWord = s.replaceAll(wordToShorten, lines[1]);
                shortenedWord = shortened + punctuationChar;
            }
        }
        if ( shortenedWord == wordToShorten ) {
            return wordToShorten;
            }
fileIn.close();
return shortenedWord;
}

this is the otherfile that is used to conduct the shortenWord message on a given word(I have imported java util and java io in the file on my computer:

public class cmdShortener {

    public static void main(String[] args) throws Exception {
        WordShortener WS = new WordShortener();
        String return = WS.shortenWord("hello");
        System.out.println( "Shortened Message:" + return );
        }
} 
```

用逗号分隔的缩写文件中的一些示例行（这些将不会被编辑）：

八,8

九,9

你，你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:37:26.813

您应该更改循环条件：

```
while ( shortenedWord.equals(inWord) | fileIn.hasNextLine()  ) 
```

对此：

```
while ( shortenedWord.equals(inWord) && fileIn.hasNextLine()  ) 
```

事实上，只要您没有找到缩写或文件中还有剩余的行，循环就会继续。如果你没有更多的行，也没有找到缩写，那么它就永远不会结束。

此外，您应该始终使用逻辑运算符 ( `&&`and `||`) 而不是按位运算符 ( `&`and `|`)，因为如果没有必要，前者不会计算表达式的其余部分。

**编辑：**我看到您正在努力提出一个好问题，但您仍然无法提供可以编译的代码。因此，我将尽力帮助您解决我所拥有的一切。实际上，这段代码对于它试图实现的目标来说太复杂了。你想要的更像是这样的：

```
private static final String PUNCTUATIONS = "'?.!;";

public String shortenWord( String inWord ) {

    String originalWord = inWord; // keep track of original input

    // Step 1: get punctuation char and trim inWord to what is needed
    String punctuationChar = "";
    int lengthMinus1 = inWord.length() - 1;
    if (PUNCTUATIONS.contains(inWord.substring(lengthMinus1))) {
        punctuationChar = inWord.substring(lengthMinus1);
        inWord = inWord.substring(0, lengthMinus1);
    }

    while (fileIn.hasNextLine()) {
        // Step 2: get the parts from the line.
        String line = fileIn.nextLine();
        if (line.isEmpty()) {
            continue;
        }
        String[] parts = line.split(",");

        // Step 3: check that inWord is the left part
        if (inWord.equals(parts[0])) {
            // Step 4: return the result
            return parts[1] + punctuationChar;
        }
    }

    // Step 5: if nothing is found, return original.
    fileIn.close();
    return originalWord;
} 
```

我希望它是不言自明的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:46:55.853

首先，不要`Short`在代码中用作变量名，因为 Short 本身就是包中的一个类`java.lang`。这是旁注。现在您的方法在此块中返回空字符串：

```
if ( inWord.contains(parts[0]) ) {
            String Short = s.replaceAll(inWord, parts[1]);
            shortenedWord = Short + punctuationChar;
                                return shortenedWord;//This is returning blank
        } 
```

这可能是因为`s`您的代码中的值是空白的。！！

**编辑**
按照您的评论观点，我认为您需要以下方法代码`shortenWord`：

```
public String shortenWord( String inWord ) 
{
    String punctuations = "'?.!;"; 
    if (punctuations.contains(String.valueOf(inWord.charAt(inWord.length() - 1)))
    {
        while (fileIn.hasNextLine())
        {
            String read = fileIn.nextLine();
            String parts[] = read.split(",");
            if (parts[0].equals(inWord.substring(0,inWord.length() - 1))))
            {
                return parts[1];
            }
        }

    }  
  fileIn.close();  
  return inWord;
} 
```

# javascript - Backbone 101 - 在主干中使用 JSON 数据

> ID：15439705
> 
> 赞同：0
> 
> 时间：2013-03-15T18:31:05.640
> 
> 标签：javascript, json, backbone.js

我正处于将我的应用程序移动到主干框架的开始阶段。

我有一些来自 ajax 调用的 json 数据

```
{f1:"f1_value", f2:"f2_value", f3:"f3_value"},
{f1:"f1_value", f2:"f2_value", f3:"f3_value"},
{f1:"f1_value", f2:"f2_value", f3:"f3_value"}, 
```

这个数据集总是有 3 列，但只要每组需要的行数就可以了。

它用于在将客户端处理为 HTML 后填充 div，相应地可以根据需要向下扩展。我正在计划这个数据块代表框架中的一个视图。

```
<div id = "data_hold"></div> 
```

我如何将其与框架匹配：

```
 var ModelTest,
        CollectionTest,
        ViewTest;

    ModelTest = Backbone.Model.extend({
    });
    CollectionTest = Backbone.Collection.extend({
        model: ModelTest
    }
    ViewTest = Backbone.View.extend({
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:48:43.117

骨干网 101：

```
var ModelTest,
    CollectionTest,
    ViewTest;

ModelTest = Backbone.Model.extend({ });

// associate your collection with a URL.  This is static here; it can be
// passed in as an option using the Collection's initialize function()
// instead.

CollectionTest = Backbone.Collection.extend({
    model: ModelTest,
    url: 'http://localhost/my_json_source'
});

ViewTest = Backbone.View.extend({
    // Have a target to render into.  This can be an existing element, as  
    // here, or it can be dynamically generated and attached to the DOM
    // programattically.
    el: $('#data_hold'),

    // specify than when the collection is updated, call the local render
    // method.

    initialize: function(options) { 
        this.collection.bind('reset', _.bind(this.render, this));
    },

    // Empty the element, then append subsequent rows of the collection
    // to it as paragraphs.  The '_this = this' idiom allows us to access
    // the outside context (the View's context), since the each() call 
    // will create a new inner context.

    render: function() {
        var _this = this;
        this.$el.html('');
        this.collection.each(function(l) {
            _this.$el.append('<p>' + l.get('f2') + '</p>');
            });
    }
});

// initialize the collection and view, then fetch the collection, which
// will trigger the render after the collection has been updated.

$(function() {
    ct = new CollectionTest();
    vt = new ViewTest({collection: ct});
    ct.fetch();
}); 
```

# java - 已在 null 中定义的类

> ID：15439706
> 
> 赞同：1
> 
> 时间：2013-03-15T18:31:07.383
> 
> 标签：java, inheritance

当我尝试继承时，出现错误“CheckingAccount 已在 null 中定义”。这是什么意思，我该如何解决？
这是我拥有的代码：

```
public class BankAccount 
{
    double balance;

    public void Bankaccount() {
        balance = 0;
    }

    public BankAccount(double initialBalance) {
        initialBalance = balance;
    }

    public void deposite(double amount) {
        balance = balance + amount;
    }

    public void withdraw(double amount) {
        balance = balance - amount;
    }

    public double getBalance(double balance) {
        return balance;
    }

    public void transfer(double amount, double bankAccountOther) {
        balance = balance - amount;

    }
}

public class CheckingAccount 
{
    public class CheckingAccount extends BankAccount {
    }
} 
```

谁能帮帮我，我真的不明白这是什么意思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:32:55.270

您在其内部定义了相同的类，这就是问题所在：

```
public class CheckingAccount {
    public class CheckingAccount extends BankAccount{
    }
} 
```

内部类应该以不同的方式命名。或者，也许您打算扩展外部类`BankAccount`？目前尚不清楚您要实现什么，但也许这就是您的目标：

```
public class CheckingAccount extends BankAccount{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:38:04.430

答案已经成功给出了很多次，但我会添加一个无关的评论，关于这段代码：

```
//constructor
    public void Bankaccount()
    {
    balance = 0;
    } 
```

这不是构造函数。如果你想让它成为一个构造函数，你必须删除`void`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:35:21.683

Your error is most likely right here:

```
public class CheckingAccount {
public class CheckingAccount extends BankAccount{

    }
} 
```

You're defining a CheckingAccount class within an already existent CheckingAccount class. I don't think you can hide an enclosed type.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:35:36.390

```
1   class CheckingAccount {
2   public class CheckingAccount extends BankAccount {
3
4        }
5   } 
```

remove 1st and 5 line above and add no-argument constructor in Super class

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T18:33:34.750

你应该只写 -

```
public class CheckingAccount extends BankAccount{

    } 
```

并不是

```
public class CheckingAccount {
    public class CheckingAccount extends BankAccount{

        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T18:34:49.450

替换以下内容：

```
public class CheckingAccount {
public class CheckingAccount extends BankAccount{

    }
} 
```

这样 ：

```
 public class CheckingAccount extends BankAccount{

 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T18:46:40.483

另一个并不是真正答案的旁注：

```
public BankAccount(double initialBalance) {
        initialBalance = balance;
    } 
```

应该

```
public BankAccount(double initialBalance) {
        balance = initialBalance;
    } 
```

因为前者一事无成。

# system-verilog - Modelsim 对 SV 的支持

> ID：15439710
> 
> 赞同：0
> 
> 时间：2013-03-15T18:31:18.400
> 
> 标签：system-verilog, modelsim

我目前正在使用 modelsim SE 5.8e。它不支持 SystemVerilog。我需要使用 SystemVerilog 来设计和验证我的项目。知道哪个版本的 Modelsim 同时支持 sytemverilog 的设计和验证子集吗？我以前用过VCS，想看看能不能用Modelsim代替VCS进行仿真。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T03:27:33.527

根据[此表](http://model.com/content/compare-modelsim-product-line)，**ModelSim**支持 SystemVerilog 设计功能，但不支持验证功能。这意味着它可能不支持类、随机化或 SV 的覆盖特性。

Mentor Graphics 的最新模拟器平台品牌为**Questa**。这实际上只是对 Modelsim 的扩展。Questa 完全支持 SystemVerilog。如果您拥有（或可以获得）许可证，这就是您想要的。我的经验是 EDA 模拟器是以分层方式获得许可的，因此某些功能可能只有在您拥有特定许可的情况下才能使用。

Questa 模拟器营销页面位于[http://www.mentor.com/products/fv/questa/](http://www.mentor.com/products/fv/questa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-06T00:42:56.557

**ModelSim 10.1d**支持 SystemVerilog，但 SystemVerilog 覆盖率、SystemVerilog 断言、`randomize()`方法和`program`块除外。学生版和 Altera-Starter 版是免费的。

ModelSim 10.1d 可用于验证。大多数验证工程师都在使用 UVM 库，[ModelSim 可以运行 UVM](http://eda-playground.readthedocs.org/en/latest/modelsim-uvm.html)。

[ModelSim 的一个简单的 UVM 测试平台](http://www.edaplayground.com/s/example/546)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T18:45:17.443

您使用的是学生版，因此请尝试以下[列表](http://www.asic-world.com/systemverilog/tools.html)之一。

我想没有开源模拟器，如果你发现了什么，请告诉我们。

其他选项，您也可以使用[myhdl 之](http://www.myhdl.org/doku.php/why)类的其他选项，也可以查看[此](http://hackaday.com/2012/06/11/programming-fpgas-with-python/)选项。

# tortoisesvn - 使用 TortoiseSVN 设置 PHPStorm

> ID：15439714
> 
> 赞同：7
> 
> 时间：2013-03-15T18:31:38.223
> 
> 标签：tortoisesvn, installation, phpstorm, visualsvn-server

我已经在我们的 Windows Server 2008 上安装了 VisualSVN 服务器，而且我确实将它与其他客户端 PC 上的 Dreamweaver 连接起来。

所以 Dreamweaver 已准备就绪。但我也想用那个visualSVN在其他客户端PC上设置PHPStorm。

但我希望 PHPStorm 使用 TortoiseSVN 连接到 VisualSVN。

我找不到它的设置页面，我是 PHPStorm 的新手，尤其是这个 Subversion Control 的东西。

我也在网上搜索过这个，但我找不到使用 TortoiseSVN 或连接到 VisualSVN 服务器的特定 PHPStorm 设置过程。

谁能引导我走向正确的道路？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-08T14:13:09.853

接受的答案并不完全准确。可以通过 PHPStorm 的外部工具配置使用 TortoiseSVN。这不会直接集成到项目导航中，但允许直接文件操作（并允许“责备”支持——PHPStorm 的颠覆所缺乏的）。

[eclipse](http://www.functor.be/wiki/index.php/Eclipse_External_Tools)中使用了类似的功能。

*例如，路径/宏可能需要更改：*

*   **名称**：SVN 查看日志
*   **程序**：C:\Program Files\TortoiseSVN\bin\TortoiseProc.exe
*   **参数**：/command:log /path:"$FileName$"
*   **工作目录**：$FileDir$

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T23:29:40.760

将 PhpStorm 连接到 TortoiseSVN 是不可能的，因为它们正在做同样的事情。

那么你有两个选择：

*   使用他的内置功能将 PhpStorm 连接到您的 SVN 服务器。
*   或者使用 TortoiseSVN

我会推荐使用 PhpStorm 功能，因为它直接在 IDE 中。

您可以在此处找到文档：[https ://www.jetbrains.com/phpstorm/webhelp/using-subversion-integration.html](https://www.jetbrains.com/phpstorm/webhelp/using-subversion-integration.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-30T15:53:07.330

你实际上可以很容易地做到这一点，它可以在 PHP Storm 8 中工作。安装 Tortoise SVN 并确保在安装过程中包含“命令行工具”。然后您可以启用外部客户端并选择“svn.exe”作为可执行文件。这将启用 SVN 1.8 格式并且仍然在 IDE 中工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-21T15:57:12.720

我的解决方案：

*   安装 TortoiseSVN
*   使用命令行二进制文件（32 位或 64 位）安装 CollabNet Subversion

    [![在此处输入图像描述](../Images/778eb8f18b55a2f9e02a7efbcadcd403.png)](https://i.stack.imgur.com/yKAYN.png)

    *   打开 phpStorm
    *   文件 > 设置 > 版本控制 > 颠覆
    *   为您的 SVN 命令行客户端设置路径

例如

> C:\Program Files\CollabNet\Subversion Client\svn.exe

Tortoise 可用作 GUI 工具，而 CollabNet Subversion 命令行工具可与 phpStorm 一起使用。享受！

# asp.net - 非 Gridview 事件捕获编辑模式行索引

> ID：15439718
> 
> 赞同：0
> 
> 时间：2013-03-15T18:32:06.003
> 
> 标签：asp.net, vb.net, gridview

如何`gridview`从不是 gridview 事件的事件中获取编辑模式下的行索引？

我在 Gridview 的单元格中有一个 DDL。当 DDL 更改时，我想对同一行中另一个单元格的标签执行更新。

所以我正在使用`DDL_SelectedIndexChanged`事件并且一切正常，包括标签的帖子，但它始终是第一行。从事件外部以编辑模式获取行索引的正确方法是什么`gridview`？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:35:42.213

试试这个

```
protected void DDL_SelectedIndexChanged(Object sender, EventArgs e)
{
    DropDownList ddlcontrol = (DropDownList) sender;
    GridViewRow grrow = (GridViewRow) ddlcontrol.NamingContainer;
    int rowindex = grrow.RowIndex;
} 
```

# node.js - npm 是如何绘制依赖树的？

> ID：15439719
> 
> 赞同：25
> 
> 时间：2013-03-15T18:32:06.870
> 
> 标签：node.js, console

npm 在控制台中将包的依赖层次结构绘制为树，这非常棒：

```
$ npm ls
my-awesome-project@0.0.1
├── colors@0.6.0-1
├─┬ express@2.5.11
│ ├─┬ connect@1.9.2
│ │ └── formidable@1.0.11
│ ├── mime@1.2.4
│ ├── mkdirp@0.3.0
│ └── qs@0.4.2
└── uglify-js@1.2.6 
```

npm 如何做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-15T18:32:06.870

npm 使用 Unicode[方框绘图字符](http://unicodinator.com/#Block-Box_Drawing)(U+2500-2800) 来绘制树的漂亮线条。

要在您自己的应用程序中绘制类似的树，最好的方法可能是使用与 npm 本身相同的模块[——archy](https://npmjs.org/package/archy)。

```
var archy = require('archy');
var s = archy({
  label : 'beep',
  nodes : [
    'ity',
    {
      label : 'boop',
      nodes : [
        {
          label : 'o_O',
          nodes : [
            {
              label : 'oh',
              nodes : [ 'hello', 'puny' ]
            },
            'human'
          ]
        },
        'party\ntime!'
      ]
    }
  ]
});
console.log(s); 
```

输出

```
beep
├── ity
└─┬ boop
  ├─┬ o_O
  │ ├─┬ oh
  │ │ ├── hello
  │ │ └── puny
  │ └── human
  └── party
      time! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-10T09:12:26.937

要列出您的文件夹和文件，您可以使用 tree-cli：

[https://www.npmjs.com/package/tree-cli](https://www.npmjs.com/package/tree-cli)

只需安装：

```
npm install -g tree-cli 
```

并在您的文件夹中使用：

```
tree -L 2, -d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T09:16:30.920

你也可以使用[console2](https://github.com/safebyte/console2)，它做的事情几乎一样`archy`，但给你有用的附加功能，比如改进的堆栈跟踪、对象检查等等：

[![在此处输入图像描述](../Images/1f9ffb4f5ed2fefd7ac3ed9a950d6504.png)](https://i.stack.imgur.com/msi55.png)

`[**Feature screenshot**](https://raw.githubusercontent.com/safebyte/console2/master/media/help.png)`

^(*完全披露：**我是存储库的作者***)

# c# - NullReferenceException 即使在上一页中存在控件

> ID：15439721
> 
> 赞同：0
> 
> 时间：2013-03-15T18:32:07.930
> 
> 标签：c#, asp.net, web-applications

每当我尝试在 bedCount() mwethod 中检索上一页下拉列表控件时，它都会给出此异常，而我向您保证，我正在搜索的控件非常多地存在于上一页中。这是什么原因？我的代码如下：

```
public partial class Room2 : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        DropDownList[] adult=new DropDownList[6];
        DropDownList[] child = new DropDownList[6];
        TableRow[] trp = new TableRow[5];
        TableRow[] trc ={ trc1, trc2, trc3, trc4, trc5 };
        DropDownList[] rtype ={ DropDownList1,DropDownList2, DropDownList3, DropDownList4, DropDownList5, DropDownList6 };
        Label[] bed ={Label1,Label2,Label3,Label4,Label5,Label6};
        int i,x,c=2;
        for (i = 0; i < 5; i++)
        {
            trp[i] = (TableRow)PreviousPage.Master.FindControl("ContentPlaceHolder1").FindControl("tr" + (i + 1));
        }
        for (i = 0; i < 6; i++,c+=4)
        {
            adult[i] = (DropDownList)PreviousPage.Master.FindControl("ContentPlaceHolder1").FindControl("DropDownList" + c++);
            child[i] = (DropDownList)PreviousPage.Master.FindControl("ContentPlaceHolder1").FindControl("DropDownList" + c);
        }
        for (i = 0; i < 6; i++)
        {
            x = adult[i].SelectedIndex + child[i].SelectedIndex;
            switch (x)
            {
                case 0:
                case 1:
                    rtype[i].Items.Add("Executive Class");
                    rtype[i].Items.Add("Business Class");
                    rtype[i].Items.Add("Gold Class (Type-I)");
                    rtype[i].Items.Add("Gold Class (Type-II)");
                    rtype[i].SelectedIndex = 0;
                    bed[i].Text = "No";
                    break;
                case 2:
                    rtype[i].Items.Add("Business Class");
                    rtype[i].Items.Add("Gold Class (Type-I)");
                    rtype[i].Items.Add("Gold Class (Type-II)");
                    rtype[i].SelectedIndex = 0;
                    bed[i].Text = "1";
                    break;
                case 3:
                    bed[i].Text = "1";
                    goto case 4;
                case 4:
                    rtype[i].Items.Add("Gold Class (Type-I)");
                    rtype[i].Items.Add("Gold Class (Type-II)");
                    rtype[i].SelectedIndex = 0;
                    bed[i].Text = "2";
                    break;
                case 5:
                    bed[i].Text = "2";
                    goto case 6;
                case 6:
                    rtype[i].Items.Add("Gold Class (Type-II)");
                    rtype[i].SelectedIndex = 0;
                    bed[i].Text = "3";
                    break;
            }
            if (i<5 && trp[i].Visible)
                trc[i].Visible = true;
        }
    }
}
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if(DropDownList1.Items.Count<=3)
        bedCount(DropDownList1,Label1,0);
}
protected void bedCount(DropDownList d,Label l,int a)
{
    protected void bedCount(DropDownList d,Label l,int x)
{
    DropDownList a=new DropDownList();
    DropDownList c = new DropDownList();
    int s;
    a = (DropDownList)PreviousPage.Master.FindControl("ContentPlaceHolder1").FindControl("DropDownList"+x++);//gives exception here
    c = (DropDownList)PreviousPage.Master.FindControl("ContentPlaceHolder1").FindControl("DropDownList"+x);
    s = c.SelectedIndex + c.SelectedIndex;
    if (d.SelectedItem.Equals("Business Class"))
        if(s==2)
            l.Text = "1";
        else 
            l.Text = "No";
    else if(d.SelectedItem.Equals("Gold Class (Type-I)"))
        if(s==3)
            l.Text = "1";
        else if(s==4)
            l.Text = "2";
        else
            l.Text = "No";
    else if(d.SelectedItem.Equals("Gold Class (Type-II)"))
        if(s==4)
            l.Text = "1";
        else if(s==5)
            l.Text = "2";
        else if(s==6)
            l.Text = "3";
        else
            l.Text = "No";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:44:21.187

当您更改 DropDownList1 中的选定项目时，数组的每个项目

```
DropDownList[] adult=new DropDownList[6];
DropDownList[] child = new DropDownList[6]; 
```

将变为**空**，因为在每次回发后重新创建页面（即使在更改下拉列表选定项之后）

在第一次加载页面时，您会填充数组，因为您在**Page_Load中手动填充它们**

# node.js - Node.js Express 使用 require 与 app.get

> ID：15439724
> 
> 赞同：0
> 
> 时间：2013-03-15T18:32:16.317
> 
> 标签：node.js, express, coffeescript

```
# app.get "/example", example.index

# require("./routes/index") app 
```

我知道我的第一行转到名为 example 的控制器并使用 index 函数。我不太确定第二行是做什么的。这个比那个好吗？一个完整的解释将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:35:44.493

The first line: `app.get "/example", example.index` says that if someone hits the URL `http://localhost:3000/example`, then you are loading the `example` file (presumably `require`d somewhere above) and running the `index` function on it.

The second line `require("./routes/index") app` is simply `require`ing some file called `index.coffee` in the `routes` folder and passing `app` as a variable.

# javascript - JavaScriptEncode 看起来不正确

> ID：15439726
> 
> 赞同：2
> 
> 时间：2013-03-15T18:32:23.023
> 
> 标签：javascript, security, xss, antixsslibrary

我需要在注入到 html 的服务器端编码一些 javascript。我正在使用 Microsoft.Security.Application.Encoder.JavaScriptEncode() 但它最终从视图源看起来像这样：

'var DesignTheme \x3d \x7b\x22StyleId\x22\x3a\x2235\x22,\x22BackgroundColor\x22\x3a\x22\x23DDF1FA\x22,\x22HeaderColor\x22\x3a\x22\x230B70A6\x22,\x22ButtonColor\x22\x3a \x22\x2347B937\x22,\x22BoxBackgroundColor\x22\x3a....

是什么赋予了？我是否使用错误的方法进行编码？目标是防止跨站点脚本，这个 javascript 在最近对我们网站的安全扫描中抛出了一个危险信号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T20:28:49.730

`Microsoft.Security.Application.Encoder.JavaScriptEncode()`仅用于编码将在 JavaScript 字符串文字中使用的不受信任的数据。可选的第二个参数 ,`boolean emitQuotes`指定是否在输出字符串的任一端添加引号（默认为 true）。因此，例如，在 ASP.NET WebForms 中可以使用以下两种方法：

```
<script>
    <% string nameEnteredByUser = "alert('I am a hacker');"; %>

    var name = <%= Microsoft.Security.Application.Encoder
        .JavaScriptEncode(nameEnteredByUser) %>;
    var nameWithMessage = '<%= Microsoft.Security.Application.Encoder
        .JavaScriptEncode(nameEnteredByUser, false) %>' + ' is a very nice name.';

    console.log(name); //alert('I am a hacker');
    console.log(nameWithMessage); //alert('I am a hacker'); is a very nice name.

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:36:38.157

Maybe you are looking for one of the encodes in System.Web.HttpUtility?

# c# - 使用c#在asp.net网站页面的用户登录中创建会话

> ID：15439728
> 
> 赞同：0
> 
> 时间：2013-03-15T18:32:29.827
> 
> 标签：c#, asp.net, session

我正在尝试在我的 ASP.NET 网站中创建会话以保存当前用户，但该词`session`没有显示为保留词，并且我不断收到错误消息！任何人都可以帮忙吗？

```
using System;
using System.Data;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.SqlClient;
using System.Web.UI.WebControls;
public partial  class login : System.Web.UI.Page
{
    public static string x;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["dbconnection"].ConnectionString);
        con.Open();
        SqlCommand cmd = new SqlCommand("select * from UserInformation where UserName =@username and Password=@password", con);
        cmd.Parameters.AddWithValue("@username", txtUserName.Text);
        cmd.Parameters.AddWithValue("@password", txtPWD.Text);
        //System.DateTime.Now
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);

        if (dt.Rows.Count > 0)
        {
            Response.Redirect("myprofile.aspx"); 
        }
        else
        {
            ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script    language='javascript'>alert('خطأ في اسم المستخدم او كلمة المرور')</script>");
        }
    }
    protected void SqlDataSource1_Selecting(object sender, System.Web.UI.WebControls.SqlDataSourceSelectingEventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:40:07.583

Session 是 的继承属性，`login`因此您可以设置会话值，例如：`this.Session["key"] = value;`

# ruby-on-rails - RSpec - 没有相应视图的控制器规范

> ID：15439729
> 
> 赞同：1
> 
> 时间：2013-03-15T18:32:31.917
> 
> 标签：ruby-on-rails, rspec, controller

对于更高级的 Rails 开发人员来说，这是一个简单的问题，但我无法确定答案。我有两个非常基本的控制器规格没有通过。我没有关联的视图（我正在通过 添加/删除产品`RailsAdmin`）但这不应该是一个问题，因为在控制器中我在每个操作中都进行了重定向。

下面附上相关代码。非常感谢您的帮助。谢谢！

**products_controller_spec.rb** 需要'spec_helper'

```
describe ProductsController do
   describe 'GET #new' do
it "creates a new product" do
  get :new
    response.should be_success
  end
end

describe 'POST #create' do
  it "creates a new product and saves it" do
    expect{
  post :create, product: FactoryGirl.attributes_for(:product)
  }.to change(Product, :count).by(1)
end
  end
end 
```

**控制器/products.rb**

```
class ProductsController < ApplicationController

  def new
    @product = Product.new
    redirect_to 'home'
  end

  def create
   @product = Product.create(params[:product])
   redirect_to 'home'
   end
 end 
```

错误信息：

```
Failures:

  1) ProductsController GET #new creates a new product
     Failure/Error: response.should be_success
       expected success? to return true, got false
     # ./spec/controllers/products_controller_spec.rb:7:in `block (3 levels) in <top (required)>'

  2) ProductsController POST #create creates a new product and saves it
     Failure/Error: expect{
       count should have been changed by 1, but was changed by 0
     # ./spec/controllers/products_controller_spec.rb:13:in `block (3 levels) in <top (required)>'

Finished in 0.07747 seconds
2 examples, 2 failures 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T00:40:19.967

如果您真的不想呈现响应，请使用它而不是重定向。

```
head :ok 
```

您应该使用 Product.create！

```
def create
  Product.create!(params[:product])
  head :ok
end 
```

或者查看 Product.create 的返回结果

```
def create
  if Product.create(params[:product])
    head :ok
  else
    head :unprocessable_entity
  end
end 
```

甚至更好，在响应中返回错误

```
def create
  product = Product.new(params[:product])

  if product.save
    head :ok
  else
    render json: product.errors
  end
end 
```

您当前的代码无法创建产品，并且对 create 的调用返回 false，但您没有检查它。使用创建！如果创建失败会为你抛出一个错误，否则你需要检查 create 的返回值并处理返回值是 true 还是 false 的逻辑。如果你不这样做，你会得到无声的失败，这是最糟糕的失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:49:35.140

对于第一种情况，只有在返回`response.should be_success`状态代码时才会通过`200`。在您的情况下，您正在重定向到，`home`因此状态代码将介于`300 - 399`. 将第一个测试更改为：

```
 response.should be_redirect 
```

还不确定第二个。

# java - 字段子类访问 - 可能的最佳方式

> ID：15439730
> 
> 赞同：2
> 
> 时间：2013-03-15T18:32:32.430
> 
> 标签：java, reflection, annotations, field, getter

所以我在处理程序中的首选项时遇到了一些问题。考虑到这将使用的次数，最好使用单一方法。每个变量的吸气剂可能会导致文件更大。

（5 个字段 * 200 到 300 个类 = 大量浪费的空间）

**我试图弄清楚如何从子类中访问具有已定义和常量名称的字段。**

超类是抽象的，定义在一个列表中，我可以完全访问它。这是我希望该领域的吸气剂所在的类。

我希望它的工作方式是这样的：

```
import java.lang.reflect.Field;

public class Test {

    public Test() {
        final B b = new B();
        final C c = new C();
        System.out.println(b.getFoo());
        System.out.println(c.getFoo());
    }

    public static void main(String[] args) {
        new Test();
    }

    public class A {

        public String getFoo() {
            try {
                Field f = this.getClass().getField("FOO");
                f.setAccessible(true);
                return (String) f.get(null);
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            }
        }

    }

    public class B extends A {

        private static final String FOO = "$HOME.DIR/lib/res/image1.png";

    }

    public class C extends A {

        private static final String FOO = "$HOME.DIR/lib/res/image2.png";

    }

} 
```

不出所料，那没有用。该类`A`不包含字段“FOO”。理想情况下，如果它成功了，我会期望它打印出来：

> $HOME.DIR/lib/res/
> image1.png $HOME.DIR/lib/res/image2.png

我（到目前为止）看到的方式是可能的：

1.  反射
2.  使用吸气剂 -**想避免**
3.  使用注释

使用注释是我认为可行的一种方式，但我通常不喜欢它们的整体概念，但如果这是唯一的方式，我当然会接受它。

感谢您阅读本文，希望您能提供见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:49:31.057

您能否更详细地描述您的更高级别的问题，因为听起来您可以进行一些设计更改来缓解此问题。通常，通过反射访问父类的子类字段似乎是个坏主意。

但是，话虽如此，您需要使用`getDeclaredField`而不是`getField`为了通过反射访问私有字段。

例如

```
public String getFoo() {
        try {
            Field f = this.getClass().getDeclaredField("FOO");
            f.setAccessible(true);
            return (String) f.get(null);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:54:15.237

您可以使用地图，如下所示：

```
import java.util.HashMap;
import java.util.Map;

public class Test 
{
    public Test() 
    {
        final B b = new B();
        final C c = new C();
        System.out.println(b.getFoo());
        System.out.println(c.getFoo());
    }

    public static void main(String[] args)
    {
        new Test();
    }
}

class A 
{
    private static final Map<String, String> values;

    static
    {
        values = new HashMap<String, String>();
    }

    public String getFoo() 
    {
        return (values.get("FOO"));
    }

    protected static void addValue(final String key,
                                  final String value)
    {
        values.put(key, value);
    }
}

class B extends A 
{
    static
    {
        addValue("FOO", "$HOME.DIR/lib/res/image1.png");
    }
}

class C extends A 
{
    static
    {
        addValue("FOO", "$HOME.DIR/lib/res/image2.png");
    }
} 
```

# ios - 如何让视图控制器为异步任务保持活动状态？

> ID：15439731
> 
> 赞同：0
> 
> 时间：2013-03-15T18:32:40.623
> 
> 标签：ios, objective-c

我正在制作我的第一个 iphone 应用程序并且有一点误解。

我有一个菜单视图控制器和一个游戏视图控制器。我希望我的菜单视图控制器能够从 Web 服务中异步获取一些天气数据，这些数据可以传递到我的游戏视图控制器上。

在游戏菜单之​​间的序列中，我的想法是这样的：

```
if user presses playgame BEFORE weather data loaded
    store a reference to the game view Controller and send it the data later.
else
    we already have the weather data so we'll just set send that now. 
```

但是我没有意识到一旦玩家转换到游戏视图控制器，在菜单视图控制器中接收天气数据的功能将停止触发！

当玩家在另一个视图控制器中时，有没有一种方法可以让一个视图控制器保持“活动”并在后台运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:39:34.577

因此，假设您使用 nsurlconnection 来获取数据，您只需将连接的委托设置为游戏视图控制器并让它为您处理数据。

更理想的方法是将天气内容分离到一个不同的类中，该类扩展 nsobject 并实现 nsurlconnectiondelegate 协议，然后将该类作为数据传递给您的游戏视图控制器，因为同一个类理论​​上可以包含所有天气数据也是如此。

# cassandra - 防止 Cassandra 中的重复行

> ID：15439737
> 
> 赞同：0
> 
> 时间：2013-03-15T18:32:57.333
> 
> 标签：cassandra, duplicates, row, cql

我有一个 CF，它的 PK 是一个 UUID，我还有一个像 regNum 这样的列，它是一个自然键。我确实有一个关于 regNum 的索引。

目前，每当我尝试插入新记录时，我都会在 regNum 上进行查询，以确保在生成用于插入的 UUID 之前没有重复记录。

但是，我发现我在这个 CF 中确实有重复的 regNum。知道如何防止这种情况吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:10:45.417

您可以将 regNum 设置为您的密钥而不是 UUID。这将解决你的问题

# python - 在两个包含子字符串的列表中查找元素

> ID：15439739
> 
> 赞同：2
> 
> 时间：2013-03-15T18:33:06.200
> 
> 标签：python, list-comprehension, string-matching

我有两个列表，可能长度不同。每个列表都包含字符串形式的文件名。我无法控制名称，但我确信名称结构不会改变。它总是类似于 name1_name2_number1_+(or-)number2.jpg

Number1 是我想在两个列表之间匹配的子字符串。如果一个列表中的文件名包含与另一个列表中的文件名相同的 number1，我想将这两个文件名都附加到第三个列表中。我有一个简单的函数可以获取给定列表中的 number1，例如：

```
>>>list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg']
>>>def GetNum(imgStrings):
...    ss = []
...    for b in imgStrings:
...        ss.append([w for w in b.split('_') if w.isdigit()])
...    #flatten zee list of lists because it is ugly.
...    return [val for subl in ss for val in subl]
>>>GetNum(list1)
['200', '800] 
```

因此对于

```
>>>list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg']
>>>list2 = ['inara03_summer40_8000_-2.jpg', 'book23_42jayne_400_+2.jpg', 'summer53_21simon_300_-1.jpg']
>>>awesomesauceSubstringMatcher(list1, list2)
['inara03_kaley40_8000_-1.jpg', 'inara03_summer40_8000_-2.jpg'] 
```

我觉得我应该能够用我的 GetNum 函数和一些列表理解来做到这一点，但是整个 '[blah for blah in ...]' 语法的精巧对我来说是新的，我不能完全包装我的绕过这个。想法？建议？死亡威胁？提前感谢所有有用的回复，如果我的 googlefu 未能让我尝试找到类似的问题/答案，我们深表歉意。

**编辑** 我刚刚想出了这个解决方案：

```
[str for str in list1+list2 if any(subs in str for subs in GetNum(list1)) and any(subs in str for subs in GetNum(list2))] 
```

我知道它又长又丑，但我真的想向自己证明它可以通过列表理解来完成。感谢所有有用的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:56:43.463

```
list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg']
list2 = ['inara03_summer40_8000_-2.jpg', 'book23_42jayne_400_+2.jpg', 'summer53_21simon_300_-1.jpg']

def getNum(image_name_list):
    for s in image_name_list:
        s = s.split('_')[2]
        if s.isdigit():
           yield s        
        else:
            yield None

def getMatchingIndex(list1, list2):
    other_list = list(getNum(list2))
    for (i, num) in enumerate(getNum(list1)):
        if not num:
            continue
        for (j, other_num) in enumerate(getNum(list2)):
            if (num == other_num):
                yield (i, j)

for i1, i2 in getMatchingIndex(list1, list2):
    print list1[i1], list2[i2] 
```

由于我们只需要一次将一个项目与第二个列表中的每个时间进行比较，因此我在 getNum 中使用了一个生成器来节省内存。由于一个数字可能不止一次匹配，我会不断检查每个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:22:41.550

```
My bit of the solution using map,reduce, filter and list flattening using sum:-
l=['a_b_1_2','b_c_2_3']
s=['c_d_3_4','d_e_1_4']
a=map(lambda y: map(lambda z:  [y,z] if y[2] == z[2] else '', map(lambda v:v.split('_'), s)),map(lambda x:x.split('_'),l))

map(lambda x: '_'.join(x), sum(filter(lambda qq: qq is not '',sum(a,[])))) 
```

在实际数据集上显示：

```
>>> list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg']    
>>> list2 = ['inara03_summer40_8000_-2.jpg', 'book23_42jayne_400_+2.jpg', 'summer53_21simon_300_-1.jpg']

>>> a=map(lambda y: map(lambda z:  [y,z] if y[2] == z[2] else '', map(lambda v:v.split('_'), list2)),map(lambda x:x.split('_'),list1))

>>> a 

    [['', '', ''], [[['inara03', 'kaley40', '8000', '-1.jpg'], ['inara03', 'summer40', '8000', '-2.jpg']], '', '']]

>>> sum(filter(lambda qq: qq is not '',sum(a,[])),[])

    [['inara03', 'kaley40', '8000', '-1.jpg'], ['inara03', 'summer40', '8000', '-2.jpg']]

>>> map(lambda x: '_'.join(x), sum(filter(lambda qq: qq is not '',sum(a,[])),[]))

    ['inara03_kaley40_8000_-1.jpg', 'inara03_summer40_8000_-2.jpg'] #This is the output you want. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:08:35.410

我将为两个列表构建一个字典，其中键是文件名中的数字，值是文件名本身。然后“相交”这两组密钥，然后可以使用生成的公共密钥来构建第三个列表，例如：

```
def List2Dic(List):
    return dict(map(lambda x: [ x.split("_")[2], x], List))

list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg']
list2 = ['inara03_summer40_8000_-2.jpg', 'book23_42jayne_400_+2.jpg', 'summer53_21simon_300_-1.jpg']

d1 = List2Dic(list1)
d2 = List2Dic(list2)

for x in set(d1) & set(d2):
    print d1[x], d2[x] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:09:29.357

将字符串解析为您可以实际筛选的数据。那时事情会容易得多。

```
def process(filename):
    splitup = filename.rstrip('.jpg').split('_')
    keys = ["name1", "name2", "number1", "number2"]
    r = dict(zip(keys, splitup))
    r["filename"] = filename
    return r

list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg']
list2 = ['inara03_summer40_8000_-2.jpg', 'book23_42jayne_400_+2.jpg', 'summer53_21simon_300_-1.jpg']

plist1 = [process(f) for f in list1]
plist2 = [process(f) for f in list2]

nlist1 = [i['number1'] for i in plist1]
nlist2 = [i['number1'] for i in plist2]

ilist1 = [i for i in plist1 if i['number1'] in nlist2]
ilist2 = [i for i in plist2 if i['number1'] in nlist1]

intersection = set([i["filename"] for i in ilist1 + ilist2])

for i in intersection:
    print i 
```

编辑：射击，我现在看到你想要两个列表中的交叉点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T19:25:43.493

这将返回两个列表中所有匹配值的列表。例如，如果有数字 8000 和 300 的匹配项，它将为每个可能的数字返回一个完整的列表，然后仅使用匹配项填充列表。

```
list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg',
         'inara03_34simon_300_+1.jpg']
list2 = ['inara03_summer40_8000_-2.jpg', 'book23_42jayne_400_+2.jpg',
         'summer53_21simon_300_-1.jpg']

def GetNum(imgStrings):
    ss = []
    for b in imgStrings:
        ss.append([w for w in b.split('_') if w.isdigit()])
        #flatten zee list of lists because it is ugly.
    return [val for subl in ss for val in subl]

print GetNum(list1)

def addToThird(input1, input2):

    numlist1 = GetNum(input1)
    numlist2 = GetNum(input2)

    numgroups = set(numlist1 + numlist2)
    numgroups = list(numgroups)
    collectionsList = []

    for i in numgroups:
    collectionsList.append([])

    for item1 in numlist1:
        for item2 in numlist2:
            if item1 == item2:
                print item1, item2
                goindex = numgroups.index(item1)
                collectionsList[goindex].append(input1[numlist1.index(item1)])
                collectionsList[goindex].append(input1[numlist2.index(item2)])
    return collectionsList

print addToThird(list1, list2) 
```

输出：

```
['200', '8000', '300']
8000 8000
300 300
[['inara03_34simon_300_+1.jpg', 'inara03_34simon_300_+1.jpg'], [], 
'inara03_kaley40_8000_-1.jpg', 'serentity01_20malcolm_200_+3.jpg'], []] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T18:56:31.793

未经测试，但逻辑应该是正确的：

```
list1 = ['serentity01_20malcolm_200_+3.jpg','inara03_kaley40_8000_-1.jpg']
list2 = ['inara03_summer40_8000_-2.jpg', 'book23_42jayne_400_+2.jpg', 'summer53_21simon_300_-1.jpg']
list3 = []

seenInList1Dict = {}

for element in list1:
    splitelem = element.split('_')
    seenInList1Dict[splitelem[2]] = 1

for element in list2:
    splitelem = element.split('_')
    if splitelem[2] in seenInList1Dict:
        list3.append(element) 
```

我没有使用你的`GetNum`，因为它不必要地使 IMO 复杂化。如果您想稍后快速查找/比较它们的存在，我发现将它们转储到字典中会更容易。此外，如果您想要数字，您只需要对`split`文件名执行 a 并从相应的索引中获取您想要的值。

# c++ - EnumMonitors WinAPI 上的分段错误

> ID：15439740
> 
> 赞同：4
> 
> 时间：2013-03-15T18:33:14.123
> 
> 标签：c++, qt, winapi, segmentation-fault

我正在编写一个代码来检查我的虚拟打印机是否已安装，为此我使用 EnumMonitors winapi，代码编译，但是当我尝试运行我的程序时，它崩溃了。`EnumMonitors(NULL, 0, (LPBYTE)buffer, sizeof(buffer), &capacity, &returned);` 调试我的程序时，我在这一行遇到了分段错误错误`LIBS += "C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib\WinSpool.Lib"` ：

我的代码：

```
#include <windows.h>
#include <winspool.h>

void Enum()
{
    char buffer[4096];
    DWORD capacity;
    DWORD returned;
    QString monitorname = "Redirected Port";

    /*Program crashes here*/ EnumMonitors(NULL, 1, (LPBYTE)buffer, sizeof(buffer), &capacity, &returned);

    MONITOR_INFO_1 *mi = (MONITOR_INFO_1*)buffer;
    for (uint i = 0; i < returned; i++)
    {
        if (QString::fromWCharArray(mi[i].pName) == monitorname)
        {
            //Do something
        }
    }
} 
```

### 编辑：我已将我的代码从 0 更新为 1 作为第二个参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:06:20.057

您使用的是哪个编译器？当我在 C++Builder 中按原样尝试您的代码时，`EnumMonitors()`不会崩溃并按`ERROR_INVALID_LEVEL`预期返回错误。这让我觉得你的编译器可能没有`EnumMonitors()`正确声明，例如调用堆栈管理不善。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:59:05.367

以下注释代码似乎适用于 VS2010 SP1 (VC10)。

按照评论了解如何调用`EnumMonitors()`API。

基本上，在第一次调用中，您要求输出缓冲区大小，[调用`EnumMonitors()`时`cbBuf`设置为零。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162631%28v=vs.85%29.aspx)

然后，您`std::vector`使用适当的输出缓冲区大小正确调整 a 的大小，并将向量中第一个字节的地址（使用`std::vector::data()`）传递给对 的第二次调用`EnumMonitors()`，以用结构填充输出缓冲区`MONITOR_INFO_1`。

（请注意，在函数退出时，无论是在成功路径上还是在失败异常抛出路径上，`std::vector`都会*自动*释放自己分配的内存。）

```
#include <exception>        // for std::exception
#include <iostream>         // for std::wcout, std::wcerr, std::endl
#include <sstream>          // for std::ostringstream
#include <stdexcept>        // for std::runtime_error
#include <vector>           // for std::vector
#include <windows.h>        // Win32 SDK main header
#include <winspool.h>       // for EnumMonitors()
using namespace std;

void ThrowOnApiFailure(const char* apiName, DWORD errorCode)
{
    ostringstream errorMessage;
    errorMessage << apiName << "() failed with error code " << errorCode;
    throw runtime_error(errorMessage.str());    
}

void PrintMonitors()
{
    static const int kMonitorInfoLevel = 1; // for MONITOR_INFO_1

    // Ask output buffer size
    DWORD bufferSize = 0;
    DWORD infoCount = 0;
    ::EnumMonitors(
        nullptr, 
        kMonitorInfoLevel,
        nullptr,
        0,          // ask buffer size
        &bufferSize,
        &infoCount);
    DWORD error = ::GetLastError();
    if (error != ERROR_INSUFFICIENT_BUFFER)
    {
        ThrowOnApiFailure("EnumMonitors", error);
    }   

    // Size output buffer
    vector<BYTE> buffer(bufferSize);

    // Fill buffer with monitor info
    if ( ! ::EnumMonitors(
        nullptr,
        kMonitorInfoLevel,
        buffer.data(),
        buffer.size(),
        &bufferSize,
        &infoCount       
        ) )    
    {
        error = ::GetLastError();
        ThrowOnApiFailure("EnumMonitors", error);
    }

    // Print monitor info
    const MONITOR_INFO_1 * monitorInfo = 
        reinterpret_cast<const MONITOR_INFO_1*>(buffer.data());    
    for (DWORD i = 0; i < infoCount; i++)
    {
        wcout << monitorInfo[i].pName << endl;
    }
}

int main()
{
    try
    {
        PrintMonitors();    
    }
    catch(const exception& e)
    {
        wcerr << "\n*** ERROR: " << e.what() << endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:37:58.733

您正在为第二个参数传递“0”。它应该是 1（或 2）。

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162631%28v=vs.85%29.aspx)

> Level [in] pMonitors 指向的结构版本。
> 
> 该值可以是 1 或 2。

# url - 贝宝网址参数

> ID：15439749
> 
> 赞同：0
> 
> 时间：2013-03-15T18:33:37.113
> 
> 标签：url, paypal

我正在寻找一个 Paypal URL 参数列表，以创建特定于某个请求的链接（即个人对个人，而不是商家交易）。我在 Paypal 网站上查看过，但没有找到我要找的东西...... :( Google 上的大部分内容都是针对“商家”类型的交易。

最终，我想创建一个 url 发送给能够点击的人，它会自动设置金额、货币、支付类型（朋友和家人）等的值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:31:01.163

请参阅[PayPal 标准变量参考](https://developer.paypal.com/docs/paypal-payments-standard/integration-guide/Appx-websitestandard-htmlvariables/)以查看您可以使用的所有参数。

# php - 循环遍历数组

> ID：15439759
> 
> 赞同：-1
> 
> 时间：2013-03-15T18:34:08.903
> 
> 标签：php

我的问题是如何在循环遍历它们时将数组值粘贴到变量中。

我正在使用它来获取我的数组 - 我需要查询中的两个值。

```
$categ = array();   
while ($row = mysql_fetch_array($result)) {
    array_push($categ, array(
        'cat' => $row["CategoryName"],
        'course' => $row["Course"]
    ));
} 
```

这里有重复，所以我使用以下来获得一个唯一的数组：

```
$categ = array_map("unserialize", array_unique(array_map("serialize", $categ))); 
```

这给出了以下输出：

```
Array (
  [0] => Array ( [cat] => Dogs [course] => Kempton Park )
  [2] => Array ( [cat] => Dogs [course] => Lingfield Park )
  [4] => Array ( [cat] => Gallops [course] => Wincanton )
) 
```

然后我想遍历这个数组，将 [cat] 和 [course] 的值分配给两个变量：`$cat`和`$course`

我已经尝试了各种方法，但它不起作用：下面给出了一个语法错误 - 不知道为什么？

```
foreach ($categ as list($cat2, $course2)){
    require ('C04_by_Account_by_Bet.php');
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:37:39.460

你不能像那样使用`list()`。`foreach`你需要这样做：

```
foreach ($categ as $value){
    list($cat2, $course2) = $value;
} 
```

**编辑**：你可以*在*`foreach ($categ as list($cat2, $course2)){`PHP 5.5+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:52:11.853

```
$categ = array();   
while ($row = mysql_fetch_array($result)) {
    $obj = new stdClass();
    $obj->cat = $row["CategoryName"];
    $obj->course = $row["Course"];
    $categ[] = $obj;
}

foreach($categ as $thing)
{
    $thing->cat;
    $thing->course;
} 
```

我会推荐这样的东西。

编辑：甚至更好

```
$categ = array();   
while ($obj = mysql_fetch_object($result)) {
    $categ[] = $obj;
}

foreach($categ as $thing)
{
    $thing->cat;
    $thing->course;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:07:36.190

我们也可以这样做：

```
$categ = array();   
while ($row = mysql_fetch_array($result)) {
    $categ[$row["CategoryName"]][] = $row["Course"];
} 
```

数组将是

```
Array (
  [Dogs] => Array ( Kempton Park, Lingfield Park ),
  [Gallops] => Array ( Wincanton )
) 
```

那么你可以这样做：

```
foreach($categ as $category => $courses) {
   $courses = array_unique($courses);
   foreach($courses as $course) {
      echo $category . ' : ' . $course; //or any other action
   }
} 
```

# python - pycurl登录joomla网站

> ID：15439760
> 
> 赞同：2
> 
> 时间：2013-03-15T18:34:09.153
> 
> 标签：python, pycurl

我尝试使用 python pycurl 为登录 joomla 网站创建小脚本，我编写了以下代码：

```
import sys, re
import pycurl
import cStringIO
import time
import urllib

def LoginJoomla(url):
    buf = cStringIO.StringIO()
    c = pycurl.Curl()
    c.setopt(c.URL, url)
    post_params = [('usrname','admin'),('passwd','1234567789'),('submit','Login')]
    resp_data = urllib.urlencode(post_params)
    c.setopt(c.POSTFIELDS, resp_data)
    c.setopt(pycurl.POST, 1)
    c.setopt(c.WRITEFUNCTION, buf.write)
    c.perform()
    html = buf.getvalue()
    buf.close()
    print html

LoginJoomla("http://www.domain.com/administrator/index.php?option=com_user&view=login") 
```

蝙蝠不工作，给我正常的登录网页，请任何人都可以告诉我我哪里错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:41:04.467

先读BUT！

您需要正确获取 URL 参数（我认为您的 URL 不好）：

`POST to http://www.example.com/administrator/`

具有**以下参数：**

*   选项=com_login
*   任务=登录
*   用户名=你的用户（不是你的用户名！你有）
*   密码

**但是**根据我对 Joomla 的了解！认证，你不能这样做，因为Joomla！从网络浏览器将发送一个令牌，以确保表单是从浏览器发布的。

如果它不是从浏览器发布的，则会出现类似“最近的请求被拒绝，因为它包含无效的安全令牌”之类的错误。请刷新页面并重试。

我知道可以远程登录 Joomla!，继续搜索。您可能需要自定义身份验证插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-25T09:29:40.173

我需要同样的事情，我已经设法做到了。我们需要做以下事情：

1.  打开登录页面，并接受所有返回的 cookie。
2.  解析 html 页面并获取随机令牌 - 隐藏输入字段。
3.  将包含所有字段和 cookie 的 HTTP POST 发送到登录处理脚本。

    ```
    import bs4
    import requests
    import urllib, urllib2, cookielib 

    jar = cookielib.FileCookieJar("cookies")
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(jar))

    r = opener.open("[INSERT LOGIN PAGE URL]").read()

    soup=bs4.BeautifulSoup(r, "html.parser")

    hidden_tags = soup.find_all("input", type="hidden")       

    # Get the randomized token - which is the 5th hidden field in the form
    token_name = hidden_tags[4]['name']
    token_val= hidden_tags[4]['value']

    login_data = {'username':'[INSERT USERNAME]',
              'password':'[INSERT PASSWORD]',
              'remember':'yes',
              token_name: token_val}

    # Attempt login
    opener.open("[LOGIN PAGE FORM ACTION]", urllib.urlencode(login_data))

    # Now open logged-in page you wish
    logged_response = opener.open("[LOGIN PROTECTED PAGE]")
    logged_result = logged_response.read()
    print logged_result 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-29T12:29:38.977

对于在 Python 3 中寻找解决方案的任何人，我将发布我的解决方案：

它使用`requests`包并查看登录操作后是否返回了正确的 set-cookie 标头。

```
import re
import requests

session = requests.Session()

response = session.get("[INSERT LOGIN PAGE URL]")

hidden_tags = re.findall(r'<input.+type="hidden".+>', response.text)

# Get the randomized token - which is the 6th hidden field in the form
token_name = re.findall(r'name="(\S+)"', hidden_tags[5])[0]
token_val = re.findall(r'value="(\S+)"', hidden_tags[5])[0]

login_data = {
    "username": '[INSERT USERNAME]',
    "password": '[INSERT PASSWORD]',
    "remember": "yes",
    "return": "",
    token_name: token_val,
}

login_response = session.post("[LOGIN PAGE FORM ACTION]", data=login_data, allow_redirects=False)

login_cookie = login_response.headers.get('set-cookie', "")

print("joomla_user_state=logged_in" in login_cookie) 
```

# session - 如何将数据放入会话变量并在vaadin的不同页面中获取数据？

> ID：15439761
> 
> 赞同：7
> 
> 时间：2013-03-15T18:34:09.487
> 
> 标签：session, cookies, request, response, vaadin

我想我应该使用应用程序范围会话来处理这个问题。但我对此没有任何经验。我尝试了从互联网上获得的不同方式，例如：

```
HttpServletRequest request;
HttpSession sess = request.getSession();
sess.setAttribute("name", name);

later in other page
HttpServletRequest request;
String=(String)request.getAttribute(name); 
//or HttpSession sess = request.getSession();
// sess.getAttribute(name); 
```

都行不通。我认为 vaadin 可能有一些特别的东西可以处理。请帮我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-30T20:30:20.407

# 两个级别的范围

请参阅Roland Krüger 的[这篇文章，了解 Vaadin 7 中的范围级别以及](https://blog.oio.de/2013/02/22/vaadins-variable-scopes-vaadinsession-and-ui/)[VaadinSession](https://vaadin.com/api/com/vaadin/server/VaadinSession.html)和[UI](https://vaadin.com/api/com/vaadin/ui/UI.html)类。他包含了与 Vaadin 6 的比较。好文章除了手动锁定的讨论在 Vaadin 7.1 中已经过时（请参阅我在该页面上的评论，并查看[我](https://stackoverflow.com/a/25578867/642706)对类似问题的回答）。

了解虽然 Vaadin 6 和 Vaadin 7 的大部分内容相似或相同，但在这个主题上 6 和 7 完全不同，涉及不同的架构和不同的类。

请注意，我们讨论`VaadinSession`的是 HTTP 或[Servlet 会话](http://en.wikipedia.org/wiki/Java_Servlet)。VaadinSession 包装或包含 Servlet 会话，因此我们不必关心 Servlet 级别。

此 VaadinSession 代表单个用户的工作会话。用户打开了一个或多个窗口/选项卡（`UI`实例）。

![该图显示了您的整个 Vaadin 应用程序如何绑定在 VaadinSession 的一个实例中，并且该 VaadinSession 拥有一个或多个 UI 实例。 状态可以放置在两个级别的范围（应用程序范围或一个浏览器窗口/选项卡）中。](../Images/128e3c83b51e97449dda4f0cec65210e.png)

上图有点过于简单了。这里有一个更详细的。

[![Servlet 和 Vaadin 会话的类层次结构详图](../Images/a767923fc665e238330a6040d44c4dc9.png)](https://i.stack.imgur.com/ufjIQ.png)

# 多个窗口

Vaadin 7 支持在同一个 Vaadin 应用程序上打开多个浏览器窗口/选项卡。这是 Vaadin 6 架构的重大变化。

每个浏览器窗口/选项卡的内容是您的`UI`子类的一个实例。所有这些实例都属于同一个`VaadinSession`. 如果用户单击浏览器窗口/选项卡上的重新加载功能，该`UI`实例将被销毁并实例化一个新实例。但`VaadinSession`经久不衰。添加[`@PreserveOnRefresh`注释](https://vaadin.com/api/com/vaadin/annotations/PreserveOnRefresh.html)会更改该行为以保留相同的 UI 实例，但这不是重点。

关键是 Vaadin 7 有两个级别的范围：

*   `VaadinSession`（你的整个应用程序）
*   `UI`（每个浏览器窗口/选项卡）。

您可能希望在任一级别存储数据。例如，用户登录/身份验证信息应该放在 VaadinSession 中。

# 开启状态`UI`

要在 UI 上存储数据，请将字段或集合添加到 UI 子类。简单明了。

# 开启状态`VaadinSession`

要在 VaadinSession 上存储数据，请调用[`setAttribute`](https://vaadin.com/api/com/vaadin/server/VaadinSession.html#setAttribute(java.lang.String,%20java.lang.Object))和[`getAttribute`](https://vaadin.com/api/com/vaadin/server/VaadinSession.html#getAttribute(java.lang.String)). 您将不得不转换结果。很简单，除了一个问题：线程安全。

## 线程安全

您可以手动管理锁定以同时保护 VaadinSession。但是，如果您遵循记录在案的规则，Vaadin 会为您提供线程安全保护。

### 主线程

如果从通常的主用户界面线程修改 VaadinSession，则没有问题。您从主线程在 Vaadin 中所做的大多数事情都已经影响到 VaadinSession 对象。这就是您的应用程序所在的位置。因此，线程安全锁定已经由 Vaadin 自动提供。

### 其他主题

如果从另一个线程使用 VaadinSession，请在[Runnable](http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html)中进行调用，然后将其传递给`access`UI 或 VaadinSession 对象上的方法。如果影响除了会话之外的任何用户界面布局或小部件，请[`access`](https://vaadin.com/api/com/vaadin/ui/UI.html#access(java.lang.Runnable))在 UI 方法上调用该方法。如果只影响会话而不影响用户界面，请将您的 Runnable[`access`](https://vaadin.com/api/com/vaadin/server/VaadinSession.html#access(java.lang.Runnable))方法传递给 VaadinSession。

# 第三级范围：应用程序范围

仅供参考，您可以使用更广泛的范围。如果您有“全局”数据或对象要在所有用户的会话中共享应用程序范围，则可以访问该[`ServletContext`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html)对象。“上下文”是指你的网络应用程序的世界，你的网络应用程序可以访问的东西。您的 Vaadin 应用程序有一个`ServletContext`由您的 Servlet 容器自动实例化的对象。调用这对方法 ,[`getAttribute`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#getAttribute(java.lang.String))和[`setAttribute`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#setAttribute(java.lang.String,%20java.lang.Object)), 来存储[`Object`](http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html)你拥有的任何东西。

有关更多信息，请参阅我的这个问答，[如何`ServletContext`从 Vaadin 7 应用程序中访问？](https://stackoverflow.com/q/27933599/642706).

用文字总结（和下图）：一个 Servlet 容器，如 Tomcat 或 Jetty 可以运行一个或多个 Vaadin Web 应用程序。每个 Web 应用程序都有一个`ServletContext`由容器自动管理的对象，其中`get/setAttribute`方法可以存储您选择的任何对象。每个 Vaadin Web 应用程序`VaadinSession`对于每个用户的当前工作会话都有一个对象。每个`VaadinSession`对象包含一个或多`UI`个子类实例，表示在 Web 浏览器的窗口/选项卡（或 Portlet 视图区域）中看到的内容。每个`UI`子类实例可以有任意数量的成员变量，就像任何[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)一样。

![带有一个或多个 Vaadin 应用程序的 Servlet 容器示意图，每个应用程序都有一个 ServletContext 实例](../Images/f4199f6bbdb702ce91469454b33efc4f.png)

* * *

提示：如果您愿意，您的 Runnable 可以使用 Java 8 中新的更短的 Lambda 语法。NetBeans 8 甚至会建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:11:14.260

Vaadin 旨在使这个问题很容易解决，并且在这里不必考虑正常的 http 请求/响应周期是有帮助的。

在典型的 Vaadin webapp（6 或 7）中，您有一个处理与 webapp 的第一个连接的类（在 7 中，您扩展了 UI 类）。从第一个连接开始，您需要做的就是以您在普通应用程序中的任何方式存储您想要保留的信息——变量、映射、列表、普通的旧 java 对象 (POJO) 等。假设您使用 POJO。该对象与任何其他 Java 对象一样。将它保存在任何需要它的对象都可以访问的变量中。如果您向 web 应用程序添加了任何类型的交互性，用户将通过该交互性组件（例如 Button 侦听器）再次“进入”应用程序。从该按钮侦听器中，您可以访问您之前在用户的“会话”中创建的 POJO。

而已。它实际上非常简单，并且不涉及您接触 http（除非您以后想要）。对于这种存储级别，当然不是 threadlocals。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:01:52.990

您可以使用 ThreadLocal 变量来保存您的数据。然后，您从变量中获取数据并清理它。不要忘记将您的变量设为 public 和 static 以便从另一个类中访问它。

# windows - 关于 JvPatchFile 组件的东西？

> ID：15439764
> 
> 赞同：1
> 
> 时间：2013-03-15T18:34:30.420
> 
> 标签：windows, delphi, delphi-xe2, jedi, jedi-code-library

我到处寻找，但找不到与此组件相关的任何内容，请您给我一些有关如何使用它的建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:44:55.823

TJvPatchFile 是实现文件修补实用程序的 TJvComponent 后代。TJvPatchFile 可用于将 Differences 属性中的补丁应用于原始文件的内容，以生成具有所需内容的文件。差异属性中的值采用 TJvPatchFile 组件所需的特定格式。为差异属性提供了设计时属性编辑器，可用于创建组件所需格式的补丁。指定文件的补丁使用设计时提供的密码进行加密。可以使用 TJvPatchFile 组件将差异属性中的补丁保存到文件中以供后续分发和处理。当使用 Patch 方法应用补丁时，更新后的文件内容可以覆盖在原始文件中，也可以存储在具有更新内容的新文件中。在差异属性中应用补丁需要创建文件差异列表时使用的密码。

来自[http://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvPatchFile](http://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvPatchFile)

# scala - 在 Scala 中检查字符是否为 ASCII 字母 (aZ) 的优雅方法是什么？

> ID：15439765
> 
> 赞同：7
> 
> 时间：2013-03-15T18:34:34.477
> 
> 标签：scala, ascii

我目前正在使用扫描仪和解析器，需要一个解析器来接受 ASCII 字母字符 - 所以我不能使用`char.isLetter`.

我自己想出了两个解决方案。我不喜欢他们两个。

### 正则表达式

```
def letter = elem("ascii letter", _.toString.matches("""[a-zA-Z]""")) 
```

用正则表达式检查这样一个简单的事情似乎相当“矫枉过正”。

### 范围检查

```
def letter = elem("ascii letter", c => ('A' <= c && c <= 'Z') || ('a' <= c && c <= 'z')) 
```

在我看来，这将是 Java 的发展方向。但它并不是真正可读的。

有没有更清洁、更类似于 Scala 的解决方案来解决这个问题？我并不真正担心性能，因为在这种情况下并不重要。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T22:42:52.237

你说你不能使用`Char.isLetter`，因为你只想要 ASCII 字母。为什么不将其限制为 7 位 ASCII 字符范围？

```
def isAsciiLetter(c: Char) = c.isLetter && c <= 'z' 
```

如果读者想要检查包含非字母的 ASCII，那么：

```
def isAscii(c: Char) = c.toInt <= 127 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:55:39.257

不管你最终选择什么，我建议将“是一个 ASCII 字母”的定义抽象出来，以提高可读性和性能。例如：

```
object Program extends App {
  implicit class CharProperties(val ch: Char) extends AnyVal {
    def isASCIILetter: Boolean =
      (ch >= 'a' && ch <= 'z') || (ch >= 'A' && ch <= 'Z')
  }
  println('x'.isASCIILetter)
  println('0'.isASCIILetter)
} 
```

或者，如果您想将 ASCII 字母描述为一组：

```
object Program extends App {
  object CharProperties {
    val ASCIILetters = ('a' to 'z').toSet ++ ('A' to 'Z').toSet
  }
  implicit class CharProperties(val ch: Char) extends AnyVal {
    def isASCIILetter: Boolean =
      CharProperties.ASCIILetters.contains(ch)
  }
  println('x'.isASCIILetter)
  println('0'.isASCIILetter)
} 
```

一旦您使用具有可理解名称的显式函数，无论哪种方式，您的意图都应该很清楚，您可以选择性能更好的实现（尽管上述两个版本之间的任何性能差异应该很小）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:55:11.710

第二个可以写成：

```
def letter = elem("ascii letter", c => ('a' to 'z') ++ ('A' to 'Z') contains c) 
```

它更具可读性，但性能较差。

或者，如果您对`++`, 几乎没有简单的英语感到恐惧：

```
c => ('a' to 'z') union ('A' to 'Z') contains c 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T20:37:02.513

另一个 - 很好 - 优雅的解决方案可能是使用 min/max：

```
c => 'A'.max(c.toUpper) == 'Z'.min(c.toUpper) 
```

或者

```
c => 'A'.max(c) == 'Z'.min(c) || 'a'.max(c) == 'z'.min(c) 
```

# android - Android Facebook SDK - Null GraphUser

> ID：15439774
> 
> 赞同：2
> 
> 时间：2013-03-15T18:35:00.803
> 
> 标签：android, facebook, sdk

我正在尝试在我的 Android 应用程序中实现 Facebook SDK，但到目前为止我没有成功。我已按照 Facebook 的以下教程中的所有步骤操作： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

然而，没有任何效果 - GraphUser 总是返回 null。我已将调试哈希添加到 Facebook 中，并且我已经完成了我被告知要做的所有事情。

您的帮助将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T08:26:51.083

哦，我今天也遇到了同样的问题，我只是通过添加`Internet`项目的权限来解决它`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# java - struts1 ognl 静态方法调用

> ID：15439777
> 
> 赞同：0
> 
> 时间：2013-03-15T18:35:07.673
> 
> 标签：java, struts, struts-1

过去一段时间我一直在尝试使用谷歌搜索，但似乎我无法找到正确的短语。

我想知道struts1中是否支持静态方法调用。如果是，那么如何配置它？在 struts-config.xml 中进行一些更改？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:34:31.960

Struts 1 中没有 OGNL。

您可以使用包括调用函数的标准 JSP 自定义标记功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:44:32.657

您不能配置`Action`或`ForwardAction`使用其他方法`execute`。要执行其他方法，您需要一个`DispatchAction`仅动态调用方法的方法。

# php - Symfony2 SecurityIdentity and ACE remove

> ID：15439780
> 
> 赞同：2
> 
> 时间：2013-03-15T18:35:10.307
> 
> 标签：php, symfony, acl

I create a new RoleSecurityIdentity and ROLE if a new UserGroup is generated. Like:

```
new RoleSecurityIdentity('ROLE_GROUP-'.$groupName); 
```

If the Admin creates a new Object, like a Media, he can assign the Groups to the Media to View:

```
$acl->insertObjectAce($groupSecurityIdentity, MaskBuilder::MASK_VIEW); 
```

Now i have the Problem, that i don´t know how to revoke all the Aces of the RoleSecurityIdentity if i remove a Group?

Are there any ready Functions etc.? Didn´t found some yet, so i coded this:

```
 $connection = $this->getDoctrine()->getManager()->getConnection();
 // find securityIdentity ID
 $secIdSearch = $connection->prepare('select * from acl_security_identities where identifier = "'.$groupRole.'"');
 $secIdSearch->execute();
 $secIdFetch = $secIdSearch->fetch();
 $securityIdentitiyId = $secIdFetch['id'];

 if($securityIdentitiyId):
      // Delete all connected Object Entities for this RoleIdentitiys
  $connection->prepare('DELETE FROM acl_entries where security_identity_id ='.$securityIdentitiyId)->execute();
      // Remove the Role Identitiy itself. 
  $connection->prepare('DELETE FROM acl_security_identities where id ='.$securityIdentitiyId)->execute();
 endif; 
```

It not only looks really dirty, if i want to save a new ACL on a Object i removed the Ace from, i get a

```
 Notice: Undefined offset: 6 in  /../../Acl/Dbal/MutableAclProvider.php line 842 
```

because the ace_order isn´t correct.

Is there a solution already? Or i have to go my way and have to re order the aces?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T13:33:54.657

测试一下：

```
public function myDeleteAce($securityIdentity, $acl,$entity){
    foreach($acl->getObjectAces() as $index => $ace) {

        if($securityIdentity->equals($ace->getSecurityIdentity())) {
                if (count($acl->getObjectAces())== 1){
                    $objectIdentity = ObjectIdentity::fromDomainObject($entity);
                    $this->provider->deleteAcl($objectIdentity);
                    $response = ('No more ACE, So ACL deleted');
                }else{
                    $acl->deleteObjectAce($index);
                    $this->provider->updateAcl($acl);
                    $response = ('Rights deleted !');
                }

        }  

            }
    return $response;
} 
```

我希望这可以帮助你

# java - Can not find class org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory in Tomcat7/Ubuntu 12.10? (Possible bug)

> ID：15439782
> 
> 赞同：1
> 
> 时间：2013-03-15T18:35:16.740
> 
> 标签：java, tomcat, servlets, tomcat7, jndi

Tomcat 7 has the jar files commons-dbcp.jar and tomcat-dbcp.jar but in tomcat-dbcp.jar, it is the file org.apache.tomcat.**dbcp**.BasicDataSourceFactory class instead of org.apache.tomcat.**dbcp.dbcp**.BasicDataSourceFactory that is looking for.

**root cause**

```
javax.naming.NamingException: Could not create resource factory instance [Root exception is java.lang.ClassNotFoundException: org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory]
    org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:121)
    javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:321)
    org.apache.naming.NamingContext.lookup(NamingContext.java:843)
    org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    java.lang.Thread.run(Thread.java:722) 
```

Servlet code

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.annotation.Resource;
import javax.sql.DataSource;

@WebServlet("/person.do")
public class PersonServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Resource(name = "jdbc/javalabs")
    DataSource ds;

    public PersonServlet() {
        super();
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        try {
            Connection con = ds.getConnection();

            Statement stmt = con.createStatement();
            String query = "select * from t_person";
            ResultSet rs = stmt.executeQuery(query);

            PrintWriter out = response.getWriter();
            response.setContentType("text/html");
            out.print("<center><h1>Person Details</h1></center>");
            out.print("<html><body>");
            out.print("<table border=\"1\" cellspacing=10 cellpadding=5>");
            out.print("<tr><th>ID</th>");
            out.print("<th>First Name</th>");
            out.print("<th>Last Name </th>");
            out.print("<th>Date of birth</th></tr>");

            while (rs.next()) {
                out.print("<tr>");
                out.print("<td>" + rs.getLong("id") + "</td>");
                out.print("<td>" + rs.getString("firstName") + "</td>");
                out.print("<td>" + rs.getString("lastName") + "</td>");
                out.print("<td>" + rs.getDate("dob") + "</td>");
                out.print("</tr>");
            }
            out.print("</table></body></html>");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
    }
} 
```

META-INF/context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
 <!-- The contents of this file will be loaded for each web application -->
  <Context crossContext="true">

    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>

   <Resource name="jdbc/testDB" auth="Container"
        type="javax.sql.DataSource"
        maxActive="100" maxIdle="30" maxWait="10000"
        username="myuser"
        password="myuser"
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/javalabs"/>
</Context> 
```

Element in WEB-INF/web.xml

```
 <resource-ref>
    <description>DB Connection</description>
    <res-ref-name>jdbc/testDB</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
```

# php - php mysql 显示/获取使用连接从 2 个表中按 ORDER_DATE 分组的客户订购的所有产品

> ID：15439783
> 
> 赞同：0
> 
> 时间：2013-03-15T18:35:17.467
> 
> 标签：php, mysql, left-join, inner-join

我有这两张桌子`CART`和`ORDERS`. 我想显示/获取客户订购的所有产品，按`ORDER_DATE`我如何通过加入这两个表进行分组？或者它的正确代码、脚本或语法是什么.. 这是一个 1:n 关系我还想显示客户订购的商品 ORDERED BY order_date..

`CART`桌子：

*   cart_id
*   product_id
*   用户身份
*   产品名称
*   价格
*   数量
*   图片

`ORDER`桌子：

*   order_id
*   cart_id
*   用户身份
*   全部的
*   顾客姓名
*   订购日期

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:43:46.407

如果您希望列出按订单日期**订购**的所有商品（未分组），那么它将是这样的：

```
SELECT * 
FROM `order` 
LEFT JOIN cart ON cart.cart_id=`order`.cart_id 
ORDER BY order_date ASC 
```

或者 ：

```
SELECT * 
FROM cart 
LEFT JOIN `order` ON `order`.cart_id=cart.cart_id
ORDER BY order_date ASC 
```

从结构上看，购物车似乎可以包含多个订单（而订单不能包含更多购物车） - 这就是您必须告诉我们的地方，无论是 1:n 关系（这两个表的）还是 1:1（在在这种情况下，您不需要 cart_id 并且可以使用 order_id 作为两个表中的链接元素）

如果您想对其进行“分组”，那么您将不得不牺牲细节（将被分组在一起）分组很有用，如果您想查看所有订单的总值 - 但这样做，您会只看到总值，但看不到每个订单的项目（不是逐行视图）

**编辑：**
*[对不起，我忘记了..这是一个 1:n 关系..我还需要显示每个客户的订购物品..这可能吗？:)]*

在这种情况下，假设主表是“订单”，那么结构似乎不是很合理，那么带有详细信息的表应该包含对主表的引用：

购物车表：

*   cart_id
*   order_id ^(（添加）)
*   product_id
*   用户身份
*   产品名称
*   价格
*   数量
*   图片

订单表：

*   order_id
*   ~~购物车 ID~~ ^(（已删除）)
*   用户身份
*   全部的
*   顾客姓名
*   订购日期

你的问题又不是很清楚。您想查看用户购买的商品按商品分组吗（也就是说，如果他们今天买了一支铅笔，明天买了橡皮，后天买了另一支铅笔，你会看到两行类似的结果：

```
item   | qty
-------+----
pencil | 2  
rubber | 1 
```

然后使用：

```
SELECT `order`.*, product_id, product_name, SUM(quantity) AS qty 
FROM `order` 
LEFT JOIN cart ON cart.order_id=`order`.order_id
GROUP BY product_id
ORDER BY product_name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T18:28:08.557

Juan，我真的很长，我不确定 Stack Overflow 网站是否适合这种对话，但我会再次尝试解释。我会简化你的表格，所以我在这里发布的代码很简单。

```
CREATE TABLE orders (
    orderID int unsigned not null auto_increment,
    user int unsigned not null,
    PRIMARY KEY (orderID)
);

CREATE TABLE orderitems (
    oiID int unsigned not null auto_increment,
    order int unsigned not null,
    item int unsigned not null,
    PRIMARY KEY (oiID)
); 
```

以上假设有一个用户表（用户名和电子邮件等在哪里）和项目表（项目名称和项目价格在哪里）。

我还假设（错误地，但为了简单起见），在我的场景中，没有人会想要购买超过 1 件我正在销售的任何物品，也没有人会想要购买超过 3 件物品同时。

然后我的 HTML 输入表单就足够简单了，因为用户在订购时必须登录（因此我已经知道他们的用户 ID - 它保存在我的 php $_SESSION['userID'] 全局变量中），订单总是动态的在用户单击 CHECKOUT 按钮（提交表单）时分配，因此我们唯一需要用户输入的是项目 ID（或者更确切地说是从下拉列表中选择它）。

所以这是非常简单的输入表：

```
<form action='orderit.php' method='post'>
    <select name='item[]'>
        <option value='' selected='selected'>Pick an item from the list!</option>
        <option value='1'>Knife</option>
        <option value='2'>Spoon</option>
        <option value='3'>Lava lamp</option>
        <option value='4'>HB pencil</option>
    </select><br/>
    <select name='item[]'>
        <option value='' selected='selected'>Pick an item from the list!</option>
        <option value='1'>Knife</option>
        <option value='2'>Spoon</option>
        <option value='3'>Lava lamp</option>
        <option value='4'>HB pencil</option>
    </select><br/>
    <select name='item[]'>
        <option value='' selected='selected'>Pick an item from the list!</option>
        <option value='1'>Knife</option>
        <option value='2'>Spoon</option>
        <option value='3'>Lava lamp</option>
        <option value='4'>HB pencil</option>
    </select><br/><br/>
    <input type='submit' value=' Checkout ' name='do'/>
</form> 
```

从上面你可以看到，当用户点击结帐时所有数据（即客户所做的选择被发送到`action`设置为`orderit.php`. 请注意，我并不担心确保用户提交有效信息，我是不使用最新的技术（即 msqli），而是使用已弃用的 mysql 例程。

所以这里如下：

```
<?php
     //here you will have your database opened, session initiated and so on
     // $db contains the database connection handler
     // $_POST['userID'] contains valid user's id

     if (isset($_POST['item']) && count($_POST['item'])>0) {
         //they ordered something we can create the order
         $q=mysql_query("INSERT INTO orders SET user='".mysql_real_escape_string($_SESSION['userID'])."'",$db);
         if (!$q)
             die("An error while creating new order");
         $orderID=mysql_insert_id($db); //fetch the just-now created order's ID
         foreach($_POST['item'] as $item) { //go through all the ordered items
            $q=mysql_query("INSERT INTO orderitems SET order='$orderID', item='".abs((int) $item)."'");
            if (!$q)
                die("Couldn't save item $item of order #$orderID");
         }
         print "Your order was saved successfuly!";
     } else
         die("This is an empty order");
?> 
```

就这样。

请注意，我现在正在从头顶编写此代码，因此可能存在拼写错误或其他类型的错误。把它更多地作为一个大致的指南，而不是一个工作代码。

# html - 我的网页图像在 Firefox 中显示正常，但在 Chrome 中不显示

> ID：15439793
> 
> 赞同：0
> 
> 时间：2013-03-15T18:35:50.900
> 
> 标签：html, image, google-chrome, firefox, web

这就是我感到困惑的原因。左侧标志显示正常（在 Chrome 和 Firefox 中），但是右侧的标志很大并且不像左侧那样显示（仅在 Chrome 中）。即使代码完全相同！这让我认为问题与我缺少的东西有关。我将非常感谢任何输入，因为我仍在学习。

更新：这是查看页面的链接：
您可以向右滚动以查看另一组标志。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <!-- DISCLAIMER ALERT ONE-TIME ONLY -->
        <script type="text/javascript" src="firsttime.js"></script>              

    <!-- RED background <body bgcolor="#FF0000"> -->
    <!-- <body bgcolor="#003588"> -->
     <!-- <body bgcolor="#373737"> -->

    <title> Extra Help </title>
        <center>
            <p id="Title">
                <h1>
                    <img src="https://dl.dropbox.com/u/1914809/Senora/Senora%20bannerfans_6810928%20fancy.jpg"></img>   
                </h1>
            </center>

    <script type="text/javascript">
        document.getElementById("Title")
        </script>

</head>
<body bgcolor="#3f3f3f">
<table> 
    <tr> 
    <!-- LEFT FLAGS -->
        <td>  
        <img src="Flag_Spain.jpg" width=90%>        
        <br> 
        <img src="Flag_Spain.jpg" width=90%>        
        <br> 
        <img src="Flag_Spain.jpg" width=90%>        
        <br> 
        <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
        <br> 
        </td>
    <!-- BUTTONS -->
    <td>
        <form action="SenoraLearn.html">
            <input type="submit" value="Learn  ">
            </form>
        <form action="SenoraLearn.html">
            <input type="submit" value="Practice">
            </form>
        <form action="SenoraDiscuss.html">
            <input type="submit" value="Discuss">
            </form>
            <br>
        <form action="SenoraProblem.html">
            <input type="submit" value="Report a Problem">
            </form>
            <br>
        <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>  
    </td> 

    <!-- BEGIN GAP COLUMNS-->   
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td>  
        <!-- END GAP COLUMNS -->

    <!-- BEGIN CONTENT COLUMN-->
        <td>
            <!--YOUTUBE VIDEO -->
                <iframe width="420" height="315" src="https://www.youtube.com/embed/EkWlmL1Nnfw?rel=0" frameborder="0" allowfullscreen></iframe>
                <!-- END YOUTUBE VIDEO -->

            <!-- begin htmlcommentbox.com -->
                <div id="HCB_comment_box"><a href="http://www.htmlcommentbox.com">HTML Comment Box</a> is loading comments...</div> 
                <link rel="stylesheet" type="text/css" href="//www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css?v=0" />
                <script type="text/javascript" language="javascript" id="hcb"> /*<!--*/ if(!window.hcb_user){hcb_user={};} (function(){var s=document.createElement("script"), l=(""+window.location || hcb_user.PAGE), h="//www.htmlcommentbox.com";s.setAttribute("type","text/javascript");s.setAttribute("src", h+"/jread?page="+escape(l).replace("+","%2B")+"&opts=16862&num=10");if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})(); /*-->*/ </script>
                <!-- end htmlcommentbox.com -->
                <br> <br> <br> <br> <br> <br> 
            </td> 
        <!-- CONTENT COLUMN --> 
    <!--RIGHT SPACING COLUMN--> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> 
        <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td> <td> <p> </td>  

    <!-- RIGHT FLAGS -->    
        <td>  
        <img src="Flag_Spain.jpg" width='90%'>
        <br> 
        <img src="Flag_Spain.jpg" width='90%'>
        <br> 
        <img src="Flag_Spain.jpg" width='90%'>
        <br> 
        <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
        <br> 
        </td>

    </tr> 
</table>
<!--END TABLE-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:50:36.853

表格格式是这里的问题。对浏览器更友好。

您应该使用类似的设置

.html

```
<div class="wrapper">
   <div class="column1">
      images here....
   </div>
   <div class="column2">
      content here...
   </div>
   <div class="column3">
      images here......
   </div>
</div> 
```

.css

```
.wrapper {
  width: 960px
 }

.column1 {
  float: left;
  width: 33%;
}
.column2 {
  float: left;
  width: 33%;
}
.column3 {
  float: left;
  width: 33%;
}

.column1 img, .column2 img, .column3 img {
 width: 90%;
} 
```

类似的东西

# javascript - Validate file upload with javascript/jquery

> ID：15439801
> 
> 赞同：0
> 
> 时间：2013-03-15T18:36:27.593
> 
> 标签：javascript, jquery, asp.net, file-upload, filesize

Ok, this is frustrating. I have searched a lot on google on how to validate selected file (to upload) extension and size but no success on the file size matter. I have an image upload control in asp.net (meant to upload images) but the extension and file size is validated on the server. That's how it works. What if the user submits a 1GB file that is a movie renamed to .jpg?

Somehow Twitter for example managed to validate the input file on client side, both extensions and file size. Anyone got any ideas how to do that before submitting to the server?

Thanks!

LE: No, no HTML5\. It's not supported in all browsers. I need a solution to work in IE 7 and 8 also!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:41:57.227

如果用户浏览器支持 html5 [fileapi](http://www.w3.org/TR/FileAPI/)，您可以从文件输入中读取文件大小。

```
document.getElementById('file').files[0].size  //size of file in bytes
document.getElementById('file').files[0].name  //name of file
document.getElementById('file').files[0].type  //mime type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:57:16.990

正如 Musa 所指出的，HTML5 api 可能会过滤掉大多数情况。

也有专有的 ActiveX 方法可以做到这一点，但支持有点未知。

如果您坚持不使用 html5，Flash 可以为您检查，您可以查看类似 swfupload [https://code.google.com/p/swfupload/](https://code.google.com/p/swfupload/)

# bash - 在两个顺序不重要的文件中查找不常见的行

> ID：15439807
> 
> 赞同：1
> 
> 时间：2013-03-15T18:36:54.177
> 
> 标签：bash, shell, awk

我有两个文件

```
1 2
1 3
1 4
2 3
2 6 
```

和

```
3 1 
6 2
1 4 
```

我想在字段顺序不重要的地方找到`file2`不在其中的行。`file1`输出应该是：

```
1 2
2 3 
```

我试过了，`awk 'FNR==NR{a[$0];next}!($0 in a)' file1 file2`但我认为如果字段颠倒了它就行不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:40:12.143

允许字段顺序无关紧要的小改动：

```
$ awk 'FNR==NR{a[$1" "$2];next}!($1" "$2 in a||$2" "$1 in a)' file2 file1
1 2
2 3 
```

注意：你需要先给`file2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:39:56.690

```
sdiff -s file1 file2 
```

并重新格式化输出

# wso2 - wso2 身份服务器 - 扩展 AbstractUserStoreManager 类和 doAuthenticate() 方法

> ID：15439813
> 
> 赞同：0
> 
> 时间：2013-03-15T18:37:07.157
> 
> 标签：wso2

我扩展了 AbstractUserStoreManager 类，并在 doAuthenticate() 方法中覆盖了代码来执行自定义身份验证过程。当我使用我的凭据登录时，doAuthenticate 方法正确返回 true。

但是，wso2 身份服务器用户管理控制台仍然抛出登录失败消息。（即正在调用 CarbonAuthenticationUtil.onFailedAdminLogin 方法）。

可能是一个问题，如果没有做工作来表明这个用户是管理员角色。

但是，我在每种方法中都添加了一些日志记录，以查看触发了什么。然而，在触发 doAuthenticate() 方法后，我没有看到任何检查角色被触发的方法。

谁能指出我正确的方向？

以下是以 DEBUG 详细程度运行的日志：

```
 [2013-03-15 15:17:55,669] DEBUG -  getRequestAddressingRequirementParameterValue: got value from MessageContext [MessageContext: logID=cd1ae48ec92e8ccb25cd294c255c695acb01113f991655f8], value: 'null' {org.apache.axis2.addressing.AddressingHelper}
[2013-03-15 15:17:55,669] DEBUG -  getRequestAddressingRequirementParameterValue: value: 'null' {org.apache.axis2.addressing.AddressingHelper}
[2013-03-15 15:17:55,669] DEBUG -  getRequestAddressingRequirementParameterValue: value: 'null' {org.apache.axis2.addressing.AddressingHelper}
[2013-03-15 15:17:55,670] DEBUG -  [MessageContext: logID=dd1ae48ec92e8ccb25cd294c255c695acb01113f991655f8] isReplyRedirected: ReplyTo is null. Returning false {org.apache.axis2.addressing.AddressingHelper}
[2013-03-15 15:17:55,670] DEBUG -  [MessageContext: logID=dd1ae48ec92e8ccb25cd294c255c695acb01113f991655f8] isReplyRedirected: ReplyTo is null. Returning false {org.apache.axis2.addressing.AddressingHelper}
[2013-03-15 15:17:55,670]  INFO -  isAuthenticated?: true {com.dg.rio.proxy.user.store.DGProxyReadOnlyUserStoreManager}
[2013-03-15 15:17:55,670] DEBUG -  Post authenticator is called in IdentityMgtEventListener {org.wso2.carbon.identity.mgt.IdentityMgtEventListener}
[2013-03-15 15:17:55,670] DEBUG -  Post authenticator is called in IdentityMgtEventListener {org.wso2.carbon.identity.mgt.IdentityMgtEventListener}
[2013-03-15 15:17:55,671] DEBUG -  AUTHORIZATION_CACHE Memory cache hit, but element expired {net.sf.ehcache.Cache}
[2013-03-15 15:17:55,672] ERROR -  System error while Authenticating/Authorizing User : null {org.wso2.carbon.core.services.authentication.AuthenticationAdmin}
java.lang.NullPointerException
    at org.wso2.carbon.user.core.authorization.JDBCAuthorizationManager.isUserAuthorized(JDBCAuthorizationManager.java:134)
    at org.wso2.carbon.core.services.authentication.AuthenticationAdmin.login(AuthenticationAdmin.java:107) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:31:59.153

IS 4.10 的文档刚刚发布（我认为是上周）。我阅读了配置外部 ldap 和 jdbc 存储的部分，它说在领域配置中使用用户名作为管理员（在 user-mgt.xml 中）。

```
 <AdminUser>
                 <UserName>MYADMINUSER</UserName> 
```

使用任意（后门）密码添加此用户名确实允许管理员用户使用有效密码进行身份验证。IE

如果 doAuthenticate 返回 true，他将进行身份验证。如果为假，他会按预期被拒绝。

似乎有点胡说八道，但很高兴看到它起作用。

# c# - 数据源绑定时DataGridView自动排序不起作用

> ID：15439816
> 
> 赞同：20
> 
> 时间：2013-03-15T18:37:20.387
> 
> 标签：c#, .net, winforms, datagridview

我的问题是：当我将数据源绑定到 DataGridView

```
BindingList<Contract> contracts = new BindingList<Contract>(Contract.GetAll());
dgEndingContracts.DataSource = contracts.Where(c => c.ExpirationDate <= nextMonth && c.IsArchived == false).ToList(); 
```

并将每一列设置为`SortMode = DataGridViewColumnSortMode.Automatic` 当我单击 dataGridView 标题行时不排序。

但是当我手动创建每一列时，在dataGridView的每一行创建和填充数据，并将列排序模式设置为自动，排序工作正常。

有什么区别，如何在第一种方法中启用排序？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-15T19:32:31.910

我找到了解决方案。

似乎 DataGridView 无法排序`List <T>`或`BindingList<T>`

所以我`class SortedBindingList<T>`根据来自的[代码添加了](http://www.martinwilley.com/net/code/forms/sortablebindinglist.html)：现在我`DataGridView`可以对列进行排序。

谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:59:50.340

.ToList() 不返回实现 IBindingList 的内容。使用一些东西，比如：

```
dgEndingContracts.DataSource = new BindingList<Contract>(contracts.Where(c => c.ExpirationDate <= nextMonth && c.IsArchived == false).ToList()); 
```

# android - AlertDialog.Builder 未在片段中显示来自 setUserVisibleHint(boolean) 的按钮

> ID：15439817
> 
> 赞同：2
> 
> 时间：2013-03-15T18:37:21.883
> 
> 标签：android, fragment, android-alertdialog

我正在尝试制作一个`AlertDialog`在 a`Fragment`可见时显示的`setUserVisibleHint(boolean)`，它告诉用户打开他们的 GPS 设置。我正在使用这段代码：

```
new AlertDialog.Builder(getActivity())
.setTitle(R.string.dialogLocationDisabledTitle)
.setMessage(R.string.dialogLocationDisabledMsg)
.setCancelable(true)
.setPositiveButton(R.string.gpssettings, new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));
        mRecheckLocationOnResume = true;
    }
})
.setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
    }
})
.create()
.show(); 
```

但是，当您在禁用 GPS 的情况下进入应用程序并转到屏幕时，两个按钮都不会显示。当您进入应用程序时，关闭 GPS，然后转到屏幕，它工作正常。谁能建议为什么？

编辑：在@pax2K 的建议下，我包含了一段 logcat。我在上面的代码中添加了日志语句：

```
03-19 16:05:40.062: D/LocateServiceFragment(11193): Starting AlertDialog build
03-19 16:05:40.062: D/LocateServiceFragment(11193): Adding positive button
03-19 16:05:40.072: D/LocateServiceFragment(11193): Adding negative button
03-19 16:05:40.072: D/LocateServiceFragment(11193): Building AlertDialog
03-19 16:05:40.072: D/LocateServiceFragment(11193): Showing AlertDialog
03-19 16:05:40.182: D/LocateServiceFragment(11193): AlertDialog shown
03-19 16:05:40.803: I/Adreno200-EGLSUB(11193): <ConfigWindowMatch:2089>: Format RGBX_8888.
03-19 16:05:40.903: I/Adreno200-EGLSUB(11193): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-19 16:05:41.123: D/dalvikvm(11193): GC_FOR_ALLOC freed 1560K, 19% free 17223K/21219K, paused 48ms
03-19 16:05:41.363: D/OpenGLRenderer(11193): has fontRender patch
03-19 16:05:42.084: D/memalloc(11193): ashmem: Mapped buffer base:0x5576b000 size:737280 fd:166
03-19 16:05:45.668: D/memalloc(11193): /dev/pmem: Unmapping buffer base:0x56ff8000 size:16613376 offset:15998976
03-19 16:05:45.668: D/memalloc(11193): /dev/pmem: Unmapping buffer base:0x53882000 size:614400 offset:0
03-19 16:05:45.668: D/memalloc(11193): /dev/pmem: Unmapping buffer base:0x57fd0000 size:1966080 offset:1351680
03-19 16:05:45.958: D/memalloc(11193): /dev/pmem: Unmapping buffer base:0x5857d000 size:4239360 offset:3502080
03-19 16:05:45.958: D/memalloc(11193): /dev/pmem: Unmapping buffer base:0x55e8a000 size:1351680 offset:614400
03-19 16:05:46.178: D/OpenGLRenderer(11193): Flushing caches (mode 1) 
```

两边都是来自代码完全不同部分的调试语句。我并不聪明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:22:55.287

`setUserVisibleHint(boolean)`实际上不是生命周期方法：它只是告诉您用户可以看到您的`Fragment`. 我原以为它直到之后才会被击中`onResume()`；我错了。（顺便说一句，我一开始没有使用的原因是我们在它们不可见`onResume()`的情况下进行了预加载。）`Fragments`

放入代码以确保*两者* 都已被调用已解决此问题`onResume()` *。* `setUserVisibleHint(boolean)`

# javascript - 属性中的 JS var

> ID：15439820
> 
> 赞同：0
> 
> 时间：2013-03-15T18:37:33.197
> 
> 标签：javascript, jquery, html

```
element.append('<div class="' + used_class + '"/>'); 
```

我的javascript知识不太好。

我已经搜索过这个问题的答案，但一无所获。

JavaScript中有没有办法插入`used_class`具有不同语法的var，最好是更短的？就像`#{used_class}`在 node.js 中一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:40:22.693

并不真地。你可以这样做（使用 jQuery）：

```
$('<div/>').appendTo($element).addClass(used_class); 
```

或者

```
$('<div/>').appendTo($element)[0].className = used_class; 
```

*   $element 可以引用 DOMElement 或 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:40:40.100

使用 jquery 获得它的几种方法....

试试这个

```
 element.append($('<div>').attr('class',used_class)); //using attr() 
```

或者

```
element.append($('<div>').addClass(used_class); //using addClass 
```

或者

```
element.append($('<div>',{ 'class' : used_class }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:41:59.027

`format`没有类似于 python或 php语法的内置函数`"$var"`，但很容易编写自己的，例如：

```
function format(str, args) {
    return str.replace(/{(\w+)}/g, function($0, $1) {
        return args[$1] || ''
    })
} 
```

用法：

```
message = format("{foo} {bar}", {
    foo: 'hello',
    bar: 'world',
}) // "hello world" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:42:56.220

没有“更短”的语法可以达到预期的效果，但有一些更好的选择。例如，您可以使用该[`addClass()`](http://api.jquery.com/addClass/)功能，或者[`prop()`](http://api.jquery.com/prop/)：

```
$('<div />').addClass(used_class);
$('<div />').prop('class', used_class); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T18:44:00.133

你的代码看起来不错，但你也可以试试这个

```
var div = $('<div/>', {
    'class' : used_class,
    'id' : 'someId'
});
$('#anElement').append(div); 
```

[**一个例子。**](http://jsfiddle.net/A3qjJ/)

# python - 比较列表中的多个唯一字符串

> ID：15439824
> 
> 赞同：3
> 
> 时间：2013-03-15T18:37:41.977
> 
> 标签：python, list, python-2.7

编辑：我正在使用 Python 2.7

我有一个给定的“矩阵”，如下所示，其中包含多个字符串列表。我想对矩阵进行排序，只打印出只包含一组特定字符串的行。

任何人都可以给我一个关于如何去做的提示吗？

到目前为止我已经尝试过：

```
matrix = [("One", "Two", "Three"),
("Four", "Five", "Six"),
("Seven", "Eight", "One"),
("Four", "Five", "Six"),
("One", "Three", "Six")]

for index, data in enumerate(matrix):
    if "One" and "Three" and "Six" in data:
        print data 
```

所需的输出：

```
("One", "Three", "Six") 
```

实际输出（截至目前）：

```
('Four', 'Five', 'Six')
('Four', 'Five', 'Six')
('One', 'Three', 'Six') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T18:39:18.740

您的测试不正确，您想分别测试每个字符串`in`：

```
if "One" in data and "Three" in data and "Six" in data: 
```

`and`不为`in`测试分组操作数；每个组件都单独评估：

```
("One") and ("Three") and ("Six" in data): 
```

导致`"Six" in data`返回的结果；其他两个值肯定总是 True，因为它们是非空字符串。

更好的方法是使用[set](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)：

```
if {"One", "Three", "Six"}.issubset(data): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:40:18.340

我会为此使用集合：

```
matrix = [("One", "Two", "Three"),
("Four", "Five", "Six"),
("Seven", "Eight", "One"),
("Four", "Five", "Six"),
("One", "Three", "Six")]

target = {"One", "Three", "Six"}

for row in matrix:
    if target <= set(row):
         print row 
```

在这里，`target <= set(row)`检查是否`target`是 的子集`set(row)`。

您的代码不起作用的原因是：

```
if "One" and "Three" and "Six" in data: 
```

相当于：

```
if bool("One") and bool("Three") and ("Six" in data): 
```

因为`bool("One")`and `bool("Three")`are `True`，整个表达式只检查是否`"Six"`是 in `data`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:54:44.273

实际上，根据你的`if`说法

```
 if "One" and "Three" and "Six" in data: 
```

你得到所有包含的列表`Six`，（*注意你的输出*）

`("Seven", "Eight", "One")`并且`("One", "Two", "Three")`没有打印，因为`Six`不在你的元组中：

此外，每个字符串（不是`""`） if 在 python 中都是 true 例如：

```
>>> if("One"):
...     print "Yes"
... else:
...     print "No"
... 
Yes 
```

所以你如果表达

```
 if "One" and "Three" and "Six" in data: 
```

相当于

```
 if True and True and "Six" in data: 
```

这相当于：

```
 if "Six" in data: 
```

如果您需要“一”、“三”和“六”都存在的地方，请这样做：

```
if  ( ("One" in data) and 
      ("Three" in data) and 
      ("Six" in data)
     ): 
```

正如@Martijn Pieters 回答的那样。另外获得一种技术：

```
>>> target = {"One", "Three", "Six"}
>>> for data in matrix:
...     if (set(map(tuple, data)) <= set(map(tuple, target))):
...             print data
... 
('One', 'Three', 'Six')
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:40:13.073

这背后的原因是你滥用`and`

尝试

```
"One" and "Three" 
```

在交互式控制台中 - 它会输出`True`，因为 "One" 和 "Three" 是 'cast' tobooleans，它们被视为真值。因此，要使其正常工作，您应该将条件重写为

```
if "One" in data and "Three" in data and "Six" in data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T18:47:07.773

你为什么不把它作为一个集合来测试：

```
for data in matrix:
    if set(["Three","Six","One"]).issubset(set(data)):
        print data 
```

结果是：

```
('One', 'Three', 'Six'). 
```

请注意，当您作为一组进行测试时，排序存在问题。

# javascript - 通过 HTML 或 Javascript 自定义 iOS UI 元素？

> ID：15439828
> 
> 赞同：0
> 
> 时间：2013-03-15T18:37:52.090
> 
> 标签：javascript, ios, html, web

在 iPad 上，如果您在网页上，并选择一个文本块，会出现一个带有几个选项的菜单栏 Copy | 全选 | 定义 ...

有谁知道如何通过 HTML 或 javascript 向此菜单添加自定义选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:45:01.710

你不能。要查看 Mobile Safari 为 Web 内容提供了哪些扩展，请查看 Apple 开发人员网站上的 Safari Web Content Guide。

[https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/Introduction/Introduction.html](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/Introduction/Introduction.html)

# database - 本地数据库与方案

> ID：15439833
> 
> 赞同：7
> 
> 时间：2013-03-15T18:38:01.153
> 
> 标签：database, sqlite, scheme, racket

我想为我的程序构建一个**本地数据库**，该数据库必须填充用户首选设置、搜索过的网站等。

但是我在互联网（谷歌和这个网站）上可以找到的只是来自服务器或本地数据库的数据库，具有特定的方言，独家球拍是所有方案方言中最受欢迎的。

以下是数据库球拍文档中的信息：

[方案中的 Web 应用程序](http://docs.racket-lang.org/continue/index.html?q=database&q=sql&q=read&q=net/url&q=sybmol#%28part._.Using_an_.S.Q.L_database%29)

[使用数据库连接](http://docs.racket-lang.org/db/using-db.html?q=database&q=sql&q=read&q=net/url&q=sybmol)

据我所知，没有关于将本地数据库与球拍一起使用的信息或示例。

任何人都可以举一个小**例子**来构建和使用带有方案（球拍）的本地数据库吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T20:29:19.877

SQLite 使用本地数据库文件：

```
(require db)
(define c (sqlite3-connect #:database "path/to/db-file" #:mode 'create) 
```

Racket db 文档假定您已经知道如何使用数据库系统，所以首先阅读 SQLite 文档。然后阅读球拍数据库文档以了解如何将 SQL 命令发送到 SQLite 数据库。

# c# - MVVM in WPF - How to alert ViewModel of changes in Model... or should I?

> ID：15439841
> 
> 赞同：124
> 
> 时间：2013-03-15T18:38:23.737
> 
> 标签：c#, .net, wpf, mvvm

I am going through some MVVM articles, primarily [this](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx) and [this](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/).

My specific question is: **How do I communicate Model changes from the Model to the ViewModel?**

In Josh's article, I don't see that he does this. The ViewModel always asks the Model for properties. In Rachel's example, she does have the model implement `INotifyPropertyChanged`, and raises events from the model, but they are for consumption by the view itself (see her article/code for more detail on why she does this).

Nowhere do I see examples where the model alerts the ViewModel of changes to model properties. This has me worried that perhaps it's not done for some reason. **Is there a pattern for alerting the ViewModel of changes in the Model?** It would seem to be necessary as (1) conceivably there are more than 1 ViewModel for each model, and (2) even if there is just one ViewModel, some action on the model might result in other properties being changed.

I suspect that there might be answers/comments of the form "Why would you want to do that?" comments, so here's a description of my program. I'm new to MVVM so perhaps my whole design is faulty. I'll briefly describe it.

I am programming up something that is more interesting (at least, to me!) than "Customer" or "Product" classes. I am programming BlackJack.

I have a View that doesn't have any code behind and just relies on binding to properties and commands in the ViewModel (see Josh Smith's article).

For better or worse, I took the attitude that the Model should contain not just classes such as `PlayingCard`, `Deck`, but also the `BlackJackGame` class that keeps state of the whole game, and knows when the player has gone bust, the dealer has to draw cards, and what the player and dealer current score is (less than 21, 21, bust, etc.).

From `BlackJackGame` I expose methods like "DrawCard" and it occurred to me that when a card is drawn, properties such as `CardScore`, and `IsBust` should be updated and these new values communicated to the ViewModel. Perhaps that's faulty thinking?

One could take the attitude that the ViewModel called the `DrawCard()` method so he should know to ask for an updated score and find out if he is bust or not. Opinions?

In my ViewModel, I have the logic to grab an actual image of a playing card (based on suit,rank) and make it available for the view. The model should not be concerned with this (perhaps other ViewModel would just use numbers instead of playing card images). Of course, perhaps some will tell me that the Model should not even have the concept of a BlackJack game and that should be handled in the ViewModel?

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-15T19:48:10.317

If you want your Models to alert the ViewModels of changes, they should implement [INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx), and the ViewModels should subscribe to receive PropertyChange notifications.

Your code might look something like this:

```
// Attach EventHandler
PlayerModel.PropertyChanged += PlayerModel_PropertyChanged;

...

// When property gets changed in the Model, raise the PropertyChanged 
// event of the ViewModel copy of the property
PlayerModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "SomeProperty")
        RaisePropertyChanged("ViewModelCopyOfSomeProperty");
} 
```

But typically this is only needed if more than one object will be making changes to the Model's data, which is not usually the case.

If you ever have a case where you don't actually have a reference to your Model property to attach the PropertyChanged event to it, then you can use a Messaging system such as Prism's `EventAggregator` or MVVM Light's `Messenger`.

I have a [brief overview of messaging systems](http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/) on my blog, however to summarize it, any object can broadcast a message, and any object can subscribe to listen for specific messages. So you might broadcast a `PlayerScoreHasChangedMessage` from one object, and another object can subscribe to listen for those types of messages and update it's `PlayerScore` property when it hears one.

But I don't think this is needed for the system you have described.

In an ideal MVVM world, your application is comprised of your ViewModels, and your Models are the just the blocks used to build your application. They typically only contain data, so would not have methods such as `DrawCard()` (that would be in a ViewModel)

So you would probably have plain Model data objects like these:

```
class CardModel
{
    int Score;
    SuitEnum Suit;
    CardEnum CardValue;
}

class PlayerModel 
{
    ObservableCollection<Card> FaceUpCards;
    ObservableCollection<Card> FaceDownCards;
    int CurrentScore;

    bool IsBust
    {
        get
        {
            return Score > 21;
        }
    }
} 
```

and you'd have a ViewModel object like

```
public class GameViewModel
{
    ObservableCollection<CardModel> Deck;
    PlayerModel Dealer;
    PlayerModel Player;

    ICommand DrawCardCommand;

    void DrawCard(Player currentPlayer)
    {
        var nextCard = Deck.First();
        currentPlayer.FaceUpCards.Add(nextCard);

        if (currentPlayer.IsBust)
            // Process next player turn

        Deck.Remove(nextCard);
    }
} 
```

(Above objects should all implement `INotifyPropertyChanged`, but I left it out for simplicity)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-15T19:17:41.837

Short answer: it depends on the specifics.

In your example the models are being updated "on their own" and these changes of course need to somehow propagate to the views. Since the views can only directly access the viewmodels, it means the model must communicate these changes to the corresponding viewmodel. The established mechanism for doing so is of course `INotifyPropertyChanged`, which means that you 'll get a workflow like this:

1.  Viewmodel is created and wraps model
2.  Viewmodel subscribes to model's `PropertyChanged` event
3.  Viewmodel is set as view's `DataContext`, properties are bound etc
4.  View triggers action on viewmodel
5.  Viewmodel calls method on model
6.  Model updates itself
7.  Viewmodel handles model's `PropertyChanged` and raises its own `PropertyChanged` in response
8.  View reflects the changes in its bindings, closing the feedback loop

On the other hand if your models contained little (or no) business logic, or if for some other reason (such as gaining transactional capability) you decided to let each viewmodel "own" its wrapped model then all modifications to the model would pass through the viewmodel so such an arrangement would not be necessary.

I describe such a design in another MVVM question [here](https://stackoverflow.com/questions/10437241/mvvm-binding-to-model-while-keeping-model-in-sync-with-a-server-version/10445415#10445415).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T19:30:34.493

Your choices:

*   Implement INotifyPropertyChanged
*   Events
*   POCO with Proxy manipulator

As I see it, `INotifyPropertyChanged` is a fundamental part of .Net. i.e. its in `System.dll`. Implementing it in your "Model" is akin to implementing an event structure.

If you want pure POCO, then you effectively have to manipulate your objects via proxies/services and then your ViewModel is notified of changes by listening to the proxy.

Personally I just loosely implement INotifyPropertyChanged and then use [FODY](https://github.com/Fody/PropertyChanged) to do the dirty work for me. It looks and feels POCO.

An example (using FODY to IL Weave the PropertyChanged raisers):

```
public class NearlyPOCO: INotifyPropertyChanged
{
     public string ValueA {get;set;}
     public string ValueB {get;set;}

     public event PropertyChangedEventHandler PropertyChanged;
} 
```

then you can have your ViewModel listen to PropertyChanged for any changes; or property specific changes.

The beauty of the INotifyPropertyChanged route, is you chain it up with an [Extended ObservableCollection](https://stackoverflow.com/questions/8490533/notify-observablecollection-when-item-changes). So you dump your near poco objects into a collection, and listen to the collection... if anything changes, anywhere, you learn about it.

I'll be honest, this could join the "Why wasn't INotifyPropertyChanged autmatically handled by the compiler" discussion, which devolves to: Every object in c# should have the facility to notify if any part of it was changed; i.e. implement INotifyPropertyChanged by default. But it doesn't and the best route, that requires the least amount of effort, is to use IL Weaving (specifically [FODY](https://github.com/Fody/PropertyChanged)).

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-20T14:38:49.507

Fairly old thread but after a lot of searching I came up with my own solution: A PropertyChangedProxy

With this class, you can easily register to someone else's NotifyPropertyChanged and take appropriate actions if it is fired for the registered property.

Here's a sample of how this could look like when you have a model property "Status" which can change on it's own and then should automatically notify the ViewModel to fire it's own PropertyChanged on it's "Status" property so that the view is also notified :)

```
public class MyModel : INotifyPropertyChanged
{
    private string _status;
    public string Status
    {
        get { return _status; }
        set { _status = value; OnPropertyChanged(); }
    }

    // Default INotifyPropertyChanged
    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
}

public class MyViewModel : INotifyPropertyChanged
{
    public string Status
    {
        get { return _model.Status; }
    }

    private PropertyChangedProxy<MyModel, string> _statusPropertyChangedProxy;
    private MyModel _model;
    public MyViewModel(MyModel model)
    {
        _model = model;
        _statusPropertyChangedProxy = new PropertyChangedProxy<MyModel, string>(
            _model, myModel => myModel.Status, s => OnPropertyChanged("Status")
        );
    }

    // Default INotifyPropertyChanged
    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

and here's the class itself:

```
/// <summary>
/// Proxy class to easily take actions when a specific property in the "source" changed
/// </summary>
/// Last updated: 20.01.2015
/// <typeparam name="TSource">Type of the source</typeparam>
/// <typeparam name="TPropType">Type of the property</typeparam>
public class PropertyChangedProxy<TSource, TPropType> where TSource : INotifyPropertyChanged
{
    private readonly Func<TSource, TPropType> _getValueFunc;
    private readonly TSource _source;
    private readonly Action<TPropType> _onPropertyChanged;
    private readonly string _modelPropertyname;

    /// <summary>
    /// Constructor for a property changed proxy
    /// </summary>
    /// <param name="source">The source object to listen for property changes</param>
    /// <param name="selectorExpression">Expression to the property of the source</param>
    /// <param name="onPropertyChanged">Action to take when a property changed was fired</param>
    public PropertyChangedProxy(TSource source, Expression<Func<TSource, TPropType>> selectorExpression, Action<TPropType> onPropertyChanged)
    {
        _source = source;
        _onPropertyChanged = onPropertyChanged;
        // Property "getter" to get the value
        _getValueFunc = selectorExpression.Compile();
        // Name of the property
        var body = (MemberExpression)selectorExpression.Body;
        _modelPropertyname = body.Member.Name;
        // Changed event
        _source.PropertyChanged += SourcePropertyChanged;
    }

    private void SourcePropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == _modelPropertyname)
        {
            _onPropertyChanged(_getValueFunc(_source));
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-20T19:29:23.027

I found this article helpful: [http://social.msdn.microsoft.com/Forums/vstudio/en-US/3eb70678-c216-414f-a4a5-e1e3e557bb95/mvvm-businesslogic-is-part-of-the-?forum=wpf](http://social.msdn.microsoft.com/Forums/vstudio/en-US/3eb70678-c216-414f-a4a5-e1e3e557bb95/mvvm-businesslogic-is-part-of-the-?forum=wpf)

My summary:

The idea behind MVVM organization is to allow easier reuse of views and models and also to allow decoupled testing. Your view-model is a model that represent the view entities, your model represents the business entities.

What if you wanted to make a poker game later? Much of the UI should be reusable. If your game logic is bound up in your view-model, it would be very hard to reuse those elements without having to reprogram the view-model. What if you want to change your user interface? If your game logic is coupled to your view-model logic, you would need to recheck that your game still works. What if you want to create a desktop and a web app? If your view-model contains the game logic, it would become complicated trying to maintain these two applications side-by-side as the application logic would inevitably be bound up with the business logic in the view-model.

Data change notifications and data validation happen in every layer (the view, the view-model, and the model).

The model contains your data representations (entities) and business logic specific to those entities. A deck of cards is a logical 'thing' with inherent properties. A good deck can't have duplicate cards put into it. It needs to expose a way to get the top card(s). It needs to know not to give out more cards than it has left. Such deck behaviors are part of the model because they inherent to a deck of cards. There will also be dealer models, player models, hand models, etc. These models can and will interact.

The view-model would consist of the presentation and application logic. All the work associated with displaying the game is separate from the logic of the game. This could include displaying hands as images, requests for cards to the dealer model, user display settings, etc.

The guts of the article:

> Basically, the way that I like to explain this is that your business logic and entities comprise the model. This is what your specific application is using, but could be shared across many applications.
> 
> The View is the presentation layer - anything relating to actually directly interfacing with the user.
> 
> The ViewModel is basically the "glue" that's specific to your application that links the two together.
> 
> I have a nice diagram here that shows how they interface:
> 
> [http://reedcopsey.com/2010/01/06/better-user-and-developer-experiences-from-windows-forms-to-wpf-with-mvvm-part-7-mvvm/](http://reedcopsey.com/2010/01/06/better-user-and-developer-experiences-from-windows-forms-to-wpf-with-mvvm-part-7-mvvm/)
> 
> In your case - lets tackle some of the specifics...
> 
> Validation: This typically comes in 2 forms. The validation related to user input would happen in the ViewModel (primarily) and the View (ie: "Numeric" TextBox preventing text from being entered is handled for you in the view, etc). As such, the validation of the input from the user is typically a VM concern. That being said, there's often a second "layer" of validation - this is the validation that the data being used matches the business rules. This often is part of the model itself - when you push data to your Model, it may cause validation errors. The VM will then have to remap this information back to the View.
> 
> Operations "behind the scenes with no view, like writing to DB, sending email, etc": This is really part of the "Domain Specific Operations" in my diagram, and is really purely part of the Model. This is what you're trying to expose via the application. The ViewModel acts as a bridge to expose this information, but the operations are pure-Model.
> 
> Operations for the ViewModel: The ViewModel needs more than just INPC - it also needs any operation that are specific to your application (not your business logic), such as saving preferences and user state, etc. This is going to vary app. by app., even when interfacing the same "model".
> 
> A good way to think about it - Say you want to make 2 versions of your ordering system. The first is in WPF, and the second is a web interface.
> 
> The shared logic that deals with the orders themselves (sending emails, entering into DB, etc) is the Model. Your application is exposing these operations and data to the user, but doing it in 2 ways.
> 
> In the WPF application, the user interface (what the viewer interacts with) is the "view" - in the web application, this is basically the code that (at least eventually) is turned into javascript + html + css on the client.
> 
> The ViewModel is the rest of the "glue" that is required to adapt your model (these operations related to ordering) in order to make it work with the specific view technology/layer you're using.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-16T12:05:43.043

Notification based on **INotifyPropertyChanged** and **INotifyCollectionChanged** is exactly what you need. To simplify your life with subscription to property changes, compile-time validation of property name, avoiding memory leaks, I would advice you to use **PropertyObserver** from [Josh Smith's MVVM Foundation](http://mvvmfoundation.codeplex.com/). As this project is open source, you can add just that class to your project from sources.

To understand, how to use PropertyObserver read [this article](http://joshsmithonwpf.wordpress.com/2009/07/11/one-way-to-avoid-messy-propertychanged-event-handling/).

Also, have a look deeper at [Reactive Extensions (Rx)](http://msdn.microsoft.com/en-us/data/gg577609.aspx). You can expose **IObserver<T>** from your model and subscribe to it in view model.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-15T19:26:27.697

I have been advocating the directional Model -> View Model -> View flow of changes for a long time now, as you can see in the *Flow of Changes* section of my [MVVM article](http://www.codeproject.com/Articles/28802/Item-Level-Presentation-Models-for-WPF) from 2008\. This requires implementing `INotifyPropertyChanged` on the model. As far as I can tell, it's since become common practice.

Because you mentioned Josh Smith, take a look at [his PropertyChanged class](http://joshsmithonwpf.wordpress.com/2009/07/11/one-way-to-avoid-messy-propertychanged-event-handling/). It's a helper class for subscribing to the model's `INotifyPropertyChanged.PropertyChanged` event.

You can actually take this approach much further, as I have recenty by creating [my PropertiesUpdater class](http://happynomad121.blogspot.com/2013/01/data-binding-among-complex-expressions.html). Properties on the view-model are computed as complex expressions that include one or more properties on the model.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-15T22:31:14.300

The guys did an amazing job answering this but in situations like this i really feel that the MVVM pattern is a pain so i would go and use a Supervising Controller or a Passive View approach and let go of the binding system at least for model objects that are generate changes on their own.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-04T11:23:22.227

There's nothing wrong to implement **INotifyPropertyChanged** inside Model and listen to it inside ViewModel. In fact you can even dot into model's property right in XAML : {Binding Model.ModelProperty}

As for dependent / calculated read-only properties, by far I haven't seen anything better and simpler than this: [https://github.com/StephenCleary/CalculatedProperties](https://github.com/StephenCleary/CalculatedProperties). It's very simple but incredibly useful, it's really "Excel formulas for MVVM" - just works same way as Excel propagating changes to formula cells without extra effort from your side.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-15T18:47:12.780

You can raise events from the model, which the viewmodel would need to subscribe to.

For example, I recently worked on a project for which I had to generate a treeview (naturally, the model had a hierarchical nature to it). In the model I had an observablecollection called `ChildElements`.

In the viewmodel, I had stored a reference to the object in the model, and subscribed to the `CollectionChanged` event of the observablecollection, like so: `ModelObject.ChildElements.CollectionChanged += new CollectionChangedEventHandler(insert function reference here)`...

Then your viewmodel gets automatically notified once a change happens in the model. You can follow the same concept using `PropertyChanged`, but you will need to explicitly raise property change events from your model for that to work.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-04T22:57:14.080

This seems to me like a really important question - even when there is no pressure to do it. I am working on a test project, which involves a TreeView. There are menu items and such that are mapped to commands, for example Delete. Presently, I am updating both the model and the view model from within the view model.

For example,

```
public void DeleteItemExecute ()
{
    DesignObjectViewModel node = this.SelectedNode;    // Action is on selected item
    DocStructureManagement.DeleteNode(node.DesignObject); // Remove from application
    node.Remove();                                // Remove from view model
    Controller.UpdateDocument();                  // Signal document has changed
} 
```

This is simple, but seems to have a very basic flaw. A typical unit test would execute the command, then check the result in the view model. But this does not test that the model update was correct, since the two are updated simultaneously.

So perhaps it is better to use techniques like PropertyObserver to let the model update trigger a view model update. The same unit test would now only work if both actions were successful.

This is not a potential answer, I realize, but it seems worth putting out there.

# javascript - 使用 Javascript 填充 HTML 选择

> ID：15439842
> 
> 赞同：0
> 
> 时间：2013-03-15T18:38:29.737
> 
> 标签：javascript, jquery, html, string, listbox

我正在尝试使用 javascirpt (jquery) 填充 html 选择，但没有成功。

我知道如何用 jquery 填充选择（通过使用方法'append'）。

我不能做的是我必须从以下格式的字符串中读取选择的值：“AA,B,CCC,DD,E”; 所以各种值用逗号分隔。

结果必须如下：

```
<select id="select">
    <option value="AA">AA</option>
    <option value="B">B</option>
    <option value="CCC">CCC</option>
    <option value="DD">DD</option>
    <option value="E">E</option>
</select> 
```

有人能帮我吗 ？？

谢谢 ：）

* * *

如何将选择从另一个字符串中获得的相同格式的值插入为“值”（str2 =“1,2,3,4,5”）？

```
<select id="select">
    <option value="1">AA</option>
    <option value="2">B</option>
    <option value="3">CCC</option>
    <option value="4">DD</option>
    <option value="5">E</option>
</select> 
```

很抱歉这个问题，但我真的是 js 和 jquery 的新手。

谢谢 ;）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:46:32.113

一个简单的使用`.split()`将有所帮助。

```
var str = "AA,B,CCC,DD,E";
str = str.split(',');
$.each(str, function (idx, val) {
    console.log(val);
    $('#select').append("<option value='" + val + "'> " + val + " </option>");
}); 
```

还有[小提琴](http://jsfiddle.net/v8BDm/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:21:10.143

我已经这样解决了：

```
var str = "AA,B,CCC,DD,E";
var str2 = "1,2,8,4,5";
str = str.split(',');
str2 = str2.split(',');

$.each(str, function (idx, val) {
     $('#select1').append("<option value='" + str2[idx] + "'> " + val + " </option>");
}); 
```

# scala - 为什么伴随对象中的两个 apply 方法不起作用？

> ID：15439843
> 
> 赞同：0
> 
> 时间：2013-03-15T18:38:32.843
> 
> 标签：scala

我在伴随对象中定义了两个应用方法`PS`，假设这可能是语法 desuger，但是当我尝试实例化时`PS`，显示的错误（代码内联）让我感到困惑：

```
package tests
import scala.collection.immutable.TreeSet
import scala.collection.immutable.SortedSet

object TestCompanionApply {

  val members = List(2,3,5,7)

  /**
   *  error for the next line:
    type mismatch;  found   : <:<[Nothing,Nothing]  required: A => tests.PH with Ordered[A] 

   */
  val ps1 = PS()

  /**
   * The two errors for the next line: 
   * 
     No implicit view available from Int => tests.PH with Ordered[Int].

     not enough arguments for method apply: (implicit evidence$3: Int => tests.PH with Ordered[Int])tests.PS[Int] in object PS. 
    Unspecified value parameter evidence$3\. 

   */
  val ps = PS(members: _*)

}

 class PS[A <% PH with Ordered[A]] 
(val comp : BigInt, val members : SortedSet[A]) {
  def + (a : A) : PS[A] = {
    val h = a.pH
    if (comp % h == 0) {
      this
    } else {
      new PS[A](comp * h, members + a)
    }
  }

  override def hashCode() : Int = comp.hashCode()
  override def equals (o : Any) = o match {
    case a : PS[_] => a.comp == comp
  }

  override def toString = members.toString
}

trait PH {
  def pH : BigInt  
}

object PS {
  def apply[A <% PH with Ordered[A]] () =
    new PS(1, TreeSet[A]())

  def apply[A <% PH with Ordered[A]] (vals : A*) = 
    new PS[A](vals.foldLeft (BigInt(1)) ((ans,v) => ans * v.pH),TreeSet[A]() ++ vals.toList)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:00:31.123

第二个错误表明，没有从`Int`to的隐式转换`test.PH with Ordered[Int]`。在这种情况下，您可以简单地自己提供一个隐式转换`TestCompanionApply`，如下所示：

```
implicit def intToPH(i: Int) = new PH with Ordered[Int]{
  val pH: BigInt = i
  def compare(that: Int) = pH.toInt - that
} 
```

或者不是隐式地显式地执行它（在右侧使用 Ordered 定义一些新的 PH）。

并且`val ps1 = PS()`编译器无法推断任何类型参数。我想在你的情况下你可能是指int？因此，通过上述隐式转换，当您定义 ps1 时，您将获得编译成功：

```
val ps1 = PS[Int]() 
```

但是，我不确定这是否符合您的要求。

# sql - 递增 varbinary 时 TSQL 中的结果令人困惑

> ID：15439846
> 
> 赞同：1
> 
> 时间：2013-03-15T18:38:48.723
> 
> 标签：sql, sql-server

```
DECLARE @V AS VARBINARY(8)
SET @V = 0x000000003B654036;
SELECT @V as 'Before'
Set @V = @V+0x0000000000000001;
SELECT @V as 'After'

Before: 0x000000003B654036
After: 0x000000003B654036

Expanding the varbinary result to a larger value I see where the 0x0000000000000001 is going

DECLARE @V AS VARBINARY(8);
DECLARE @R AS VARBINARY(max);
SET @V = 0x000000003B654036;
SELECT @V as 'Before';
SET @R = @V +0x0000000000000001;
SELECT @R as 'After' ;

Before: 0x000000003B654036
After: 0x000000003B6540360000000000000001 
```

但我正在寻找 0x000000003B65407 的结果，我如何通过将 1 添加到二进制值来获得它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:52:58.967

`VARBINARY`在 T-SQL 中更像是二进制字符串数据类型，因此`+`运算符将两个值连接起来，而不是执行数学加法。这是有道理的，因为 SQL Server 不知道您在该字段中存储的是整数、浮点数还是 jpeg 图像。

在您的情况下，由于您有 8 个字节，您可以这样做：

```
DECLARE @V AS VARBINARY(8)
DECLARE @W AS VARBINARY(8)
SET @V = 0x000000003B654036;
SELECT @V as 'Before'
Set @W = 0x0000000000000001;
SET @V = CAST( CAST(@V AS BIGINT) + CAST(@W AS BIGINT) AS VARBINARY(8));
SELECT @V as 'After' 
```

如果超过 8 个字节，则必须编写自己的加法代码。在那种情况下，我会考虑 CLR。

您可能还想查看 using`BINARY(8)`而不是`VARBINARY(8)`所有值的长度始终为 8 个字节。这将在磁盘上保留一点空间，因为 SQL Server 不再需要存储每一行​​的长度。

# java - Java 程序的未知行为

> ID：15439848
> 
> 赞同：0
> 
> 时间：2013-03-15T18:38:58.677
> 
> 标签：java

```
 System.out.println(symbol_b.symbolName + "  " + symbol_b.pointsTo.size());

    // change the fieldpointsTo set of all above symbols
    for (int i = 0; i < samePointsTo.size(); i++) 
    {
        for (int j = 0; j < samePointsTo.elementAt(i).size(); j++) 
        {
            Symbol symbol = samePointsTo.elementAt(i).elementAt(j);
            System.out.println(symbol.symbolName);

            // if field information is already present
            if (symbol.fieldPointsTo.containsKey(fieldObj)) 
            {
                symbol.fieldPointsTo.get(fieldObj).clear();
                symbol.fieldPointsTo.get(fieldObj).addAll(symbol_b.pointsTo);
            } 
            else 
            {
                // we have to create field information
                symbol.fieldPointsTo.put(fieldObj, symbol_b.pointsTo);
            }
        }
    }

    System.out.println(symbol_b.symbolName + "  " + symbol_b.pointsTo.size()); 
```

在*for*循环之前**symbol_b.pointsTo**的大小是*2*，但在*for 循环*之后它的值从*2 更改为 0*。它是如何发生的，谁能告诉我。我没有对 symbol_b.pointsTo 做任何事情，而 symbol_b.pointsTo 是一个投票者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:45:13.370

也许 pointsTo 不仅由该变量名称引用，而且还是 symbol.fieldPointsTo.get(fieldObj) 返回的值，因此当您对其调用 .clear() 时，它会删除所有向量的元素？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:46:10.150

会不会是这样：

```
if (symbol.fieldPointsTo.containsKey(fieldObj)) 
{
    symbol.fieldPointsTo.get(fieldObj).clear();
    symbol.fieldPointsTo.get(fieldObj).addAll(symbol_b.pointsTo);
} 
```

符号变量指向的`symbol_b`，`symbol_b`是不是在`fieldPointsTo`所以它调用`clear()`它呢？

# c# - 找不到路径的一部分

> ID：15439852
> 
> 赞同：1
> 
> 时间：2013-03-15T18:39:22.207
> 
> 标签：c#

这是我的 C# 代码

```
files = Directory.GetFiles(@"\\MYREMOTESERVER123\\PATH1\\PATH2\\PATH3_20130315.4\\PATH4\\PATH5", "*.*"); 
```

我可以在本地开发机器上**成功地**针对 ABOVE 路径运行单元测试

```
\\MYREMOTESERVER123\PATH1\PATH2\PATH3_20130315.4\PATH4\PATH5 
```

但是当这段代码在远程机器上运行时..我收到以下错误..

```
System.IO.DirectoryNotFoundException: Could not find a part of the path '\\MYREMOTESERVER123\PATH1\PATH2\PATH3_20130315.4\PATH4\PATH5\' 
```

我不知道发生了什么..请帮助..谢谢..

# javascript - 从锚（a）标签获取本地href值

> ID：15439853
> 
> 赞同：170
> 
> 时间：2013-03-15T18:39:23.610
> 
> 标签：javascript, html, href

我有一个具有本地 href 值的锚标记，以及一个使用 href 值但将其定向到与通常情况略有不同的位置的 JavaScript 函数。标签看起来像

```
<a onclick="return follow(this);" href="sec/IF00.html"></a> 
```

和一个看起来像的 JavaScript 函数

```
baseURL = 'http://www.someotherdomain.com/';
function follow(item) {
    location.href = baseURL + item.href;
} 
```

我希望它`item.href`只会返回一个短字符串“sec/IF00.html”，但它会返回完整的href，“http://www.thecurrentdomain.com/sec/IF00.html”。有没有办法可以只提取锚`<a>`标记中的短href？还是我会因为自然的 HTML 行为而失去它？

我想我可以使用字符串操作来执行此操作，但这会变得很棘手，因为我的本地页面实际上可能是“http://www.thecurrentdomain.com/somedir/somepath/sec/IF00.html”，而我的 href 字段可能或者可能没有子目录（对于 ex `href="page.html"`vs. `href="sub/page.html"`），所以我不能总是在最后一个斜杠之前删除所有东西。

您可能想知道我为什么要这样做，这是因为它只会使页面更干净。如果不能只获得简短的 href（如放置在锚`<a>`标记中），那么我可能只是在标记中插入一个额外的字段，例如`link="sec/IF00.html"`，但同样，这会有点混乱。

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2013-03-15T18:44:20.180

下面的代码获取完整路径，其中锚点：

```
document.getElementById("aaa").href; // http://example.com/sec/IF00.html 
```

而下面的获取`href`属性的值：

```
document.getElementById("aaa").getAttribute("href"); // sec/IF00.html 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-23T12:46:59.573

`document.getElementById("link").getAttribute("href");` 如果您有多个`<a>`标签，例如：

```
<ul>
  <li>
    <a href="1"></a>
  </li>
  <li>
    <a href="2"></a>
  </li>
  <li>
    <a href="3"></a>
  </li>
</ul>
```

您可以这样做：`document.getElementById("link")[0].getAttribute("href");`访问第一个`<a>`标签数组，或者取决于您所做的条件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-08-19T07:47:36.963

就我而言，我有一个带 # 的 href，而 target.href 正在向我返回完整的 url。Target.hash 为我完成了这项工作。

```
$(".test a").on('click', function(e) {
    console.log(e.target.href); // logs https://www.test.com/#test
    console.log(e.target.hash); // logs #test
  }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-13T07:33:50.287

此代码适用于我获取文档的所有链接

```
var links=document.getElementsByTagName('a'), hrefs = [];
for (var i = 0; i<links.length; i++)
{   
    hrefs.push(links[i].href);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-17T07:15:56.997

href 属性设置或返回链接的 href 属性的值。

```
 var hello = domains[i].getElementsByTagName('a')[0].getAttribute('href');
    var url="https://www.google.com/";
    console.log( url+hello); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-23T05:15:32.023

```
document.getElementById("aaa").href; //for example: http://example.com/sec/IF00.html 
```

# java - Java 数据结构，用于保存一组可以迭代的项目、字符串和日期

> ID：15439854
> 
> 赞同：0
> 
> 时间：2013-03-15T18:39:24.627
> 
> 标签：java, data-structures, hashset

我目前将字符串存储在 HashSet 中，但我想将每个字符串与日期对象配对。该日期将用作衰减计时器（为字符串设置一个日期，以便在该天过去后可以将其删除）。当程序启动时，我想遍历列表并检查所有字符串的日期，删除那些已经过期的。

是否有一个 2 元组数据结构可以让我遍历列表并具有 contains 方法？

另外，如果我太切换到列表数据结构而不是集合，那么与 HashSet 相比，迭代数据结构对性能有多大影响，HashSet`.contains(string)`在尝试找出字符串是否存在时具有方法？检查需要相对较快，最好在一秒钟内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:49:39.497

你可以尝试使用这个：

```
 Map<Date,List<String>> map = new HashMap<Date,List<String>>(); 
```

用于迭代 map 中的所有元素：

```
for (Date date : map.keySet()) {
        // Check with current date and remove from map if date has expired
        } 
```

我建议你使用 List 而不是 Set，因为它总是会调用函数来检查元素是否已经存在于 Set 中。因此，如果您不担心重复项，请选择 List。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:55:12.157

我发现一个泛型`Pair`类非常有用：

```
public class Pair<T, R> {

    T first;
    R second;

    public Pair(T first, R second) {
        this.first = first;
        this.second = second;
    }

    public T getFirst() {
        return first;
    }

    public R getSecond() {
        return second;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Pair pair = (Pair) o;

        if (first != null ? !first.equals(pair.first) : pair.first != null) return false;
        if (second != null ? !second.equals(pair.second) : pair.second != null) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = first != null ? first.hashCode() : 0;
        result = 31 * result + (second != null ? second.hashCode() : 0);
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T18:46:33.393

用一个

```
Map<String,Date> stringDateMap = new HashMap<String,Date>(); 
```

而不是一个集合，因为一个集合不做任何映射。

您可以通过这样做放入更多数据：

```
stringDateMap.put("Key1", new Date()); 
```

您可以通过以下方式删除相同的数据：

```
stringDateMap.remove("Key1"); 
```

在此处查看其他功能 [Hash Map Java Doc](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T18:50:07.143

java中没有元组，但是你可以很容易地创建一个自己。

```
public class StringDatePair {

    private final String str;
    private final Date date;

    public StringDatePair(String str, Date date) {
        this.str = str;
        this.date = date;
    }

    public getString() {
        return str;
    }
    public getDate() {
        return date;
    }
} 
```

如果您想在列表中使此元组可排序，您可以实现`Comparable`并按日期进行比较。

在检查包含时，集合比列表更快，并且随着集合/列表的内容变大，差异会变大。但是必须有非常大量的内容才能使运行时间> 1 秒来检查列表中是否存在项目。

此外，如果您最终使用按日期对项目进行排序的列表，您可以从头开始迭代列表，当您找到日期未过期的第一个项目时，您可以丢弃所有较早的项目。

# actionscript-3 - 只刷新数据提供者的一部分——这可能吗？

> ID：15439858
> 
> 赞同：1
> 
> 时间：2013-03-15T18:39:33.580
> 
> 标签：actionscript-3, flash, flex4

是否可以仅刷新 flex DataProvider 中的一项？

例如，实现这样的事情

```
[Bindable]
private var nodes : VectorCollection = new VectorCollection();

/* thousands of insertions on nodes */

/* Triggered by some event */
public function nodeStatusChanged(nodeId : Number) : void {
      nodes.refresh(nodeId);
} 
```

`nodes.refresh()`而不是每次`nodeStatusChanged(nodeId)`通话都做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:07:21.373

我不确定我是否完全理解您的问题，但是如果您希望在同时插入大量值时只发送一个事件，那么您应该使用中间向量：

```
var tempVector:Vector.<Node> = new Vector.<Node>();
// Do whatever you need to perform here;
nodes.vector = tempVector;
nodes.refresh(); 
```

将 Node 替换为与向量一起使用的类名。在您的`refresh()`方法中，您然后调度您的事件：

```
dispatchEvent(new CollectionEvent(CollectionEvent.COLLECTION_CHANGE)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:44:23.570

你可以试试这个

要更新矢量集合中的一项，您可以`itemUpdated()`在 ICollectionView 中使用。

如果对象未实现 IEventDispatcher 接口，您还可以使用 itemUpdated() 方法通知对数据提供者对象的更改集合；

```
[Bindable]
private var nodes:VectorCollection = new VectorCollection(); 
```

当您更新节点 VectorCollection 中的字段时，如下所示，控件不会自动更新，因此请使用 itemUpdated()。

```
nodes.getItemAt(0).field1="someOtherValue";

nodes.itemUpdated(nodes.getItemAt(0));

Instead of nodes.refresh(); 
```

# c# - 检查 IEnumerable 类型的集合中的属性

> ID：15439859
> 
> 赞同：4
> 
> 时间：2013-03-15T18:39:38.650
> 
> 标签：c#, ienumerable

我正在尝试查找类型集合是否`IEnumerable`包含属性。

假设`RowModels`是类型的集合`IEnumerable`，我有......

```
 foreach (var items in RowModels) {
       if (items.GetType()
                .GetProperties()
                .Contains(items.GetType().GetProperty("TRId").Name) ) 
        {
               // do something...
        }
    } 
```

我得到错误

```
System.Reflection.PropertyInfo[] does not contain a definition for 'Contains' 
and the best extension method overload has some invalid arguments. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T18:44:00.583

您可以使用`Enumerable.Any()`：

```
foreach (var items in RowModels) {
   if(items.GetType().GetProperties().Any(prop => prop.Name == "TRId") ) 
    {
           // do something...
    }
} 
```

话虽如此，您也可以直接检查该属性：

```
foreach (var items in RowModels) {
   if(items.GetType().GetProperty("TRId") != null) 
    {
           // do something...
    }
} 
```

另外 - 如果您正在寻找`RowModels`实现特定接口或属于某个特定类的项目，您可以编写：

```
foreach (var items in RowModels.OfType<YourType>())
{
   // do something
} 
```

该`OfType<T>()`方法将自动过滤到指定类型的类型。这也具有为您提供强类型变量的优点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:44:53.477

将您更改`if`为：

```
if(items.GetType().GetProperty("TRId") != null)
//yeah, there is a TRId property
else
//nope! 
```

# c# - 如何覆盖 && （逻辑和运算符）？

> ID：15439864
> 
> 赞同：13
> 
> 时间：2013-03-15T18:39:52.483
> 
> 标签：c#, operator-overloading

其他一切似乎都遵循这种模式，但是当我尝试时：

```
public static ColumnOperation operator&&(ColumnOperation lhs, ColumnOperation rhs)
{
    return new ColumnBooleanOperation(lhs, rhs, ExpressionType.And);
} 
```

我得到“预期的可重载二进制运算符”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-15T18:42:11.723

条件逻辑运算符不能重载。

根据[文档](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)：

> 条件逻辑运算符不能重载，但使用**&**和**|计算它们** , 可以重载。

[本文](http://msdn.microsoft.com/en-us/library/aa691312%28v=vs.71%29.aspx)提供了有关如何实现您自己的自定义**&&**和**||的更多信息** 运营商。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-15T18:42:22.663

您不能`&&`直接重载，但可以重载`false`,`true`和`&`运算符 - 请参阅[运算符 &&](http://msdn.microsoft.com/en-us/library/2a723cdk.aspx)

```
public static bool operator true(ColumnOperation x)
{
    ...
}

public static bool operator false(ColumnOperation x)
{
    ...
}

public static ColumnOperation operator &(ColumnOperation lhs, ColumnOperation rhs)
{
    return new ColumnBooleanOperation(lhs, rhs, ExpressionType.And);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-15T18:43:26.233

请参阅可以重载运算符的[MSDN 页面：](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)

> 条件逻辑运算符不能重载，但使用 & 和 | 求值，可以重载。

那是指`&&`和`||`运算符。

因此，简而言之，覆盖`&`，您将`&&`免费获得它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-15T18:43:35.937

从此：[_](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)

> &&, || : 条件逻辑运算符不能重载，但使用 & 和 | 求值，可以重载。

所以你不能覆盖它，但你可以覆盖`&`or `|`。

# ajax - 仅更改活动 div 而不是所有具有相同名称的类

> ID：15439865
> 
> 赞同：0
> 
> 时间：2013-03-15T18:39:56.143
> 
> 标签：ajax, jquery

当我按下其中一个按钮时，我有一组带有按钮的类。变化发生在所有班级。但我希望它只在活动 div 上。

我知道我应该使用 $this。但我无法管理它。有任何想法吗 ？

```
function close(){
      $('.close').click(function() {
        $.ajax({
            url: "php/functions.php",
            type: "POST",
            data: "php",
            success: function(html) {
               var note =  $(".note").html(html);
            }

        });

 return false;
});
} 
```

php 文件只包含一个回声

```
<?php echo "Heloo" ?> 
```

html

```
<div class="note">
<div class="close"></div>
</div>
<div class="note">
<div class="close"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:23:02.850

你要的是这个——

```
$('.close').click(function() {
  var $this = $(this);
  $.ajax({
    url: "php/functions.php",
    type: "POST",
    data: "php",
    success: function(html) {
        $this.closest(".note").html(html);
        //or
        $this.parent().html(html);
        //or
        $this.parent().html(html);
    }
  });
}); 
```

但是，这将覆盖您关闭的 div。如果你想保持你关闭的 div -

HTML：

```
<div class="notewrap">
  <div class="note"></div>
  <div class="close"></div>
</div>
<div class="notewrap">
  <div class="note"></div>
  <div class="close"></div>
</div> 
```

Javascript（仅使用回调中提供的选项之一）：

```
$('.close').click(function() {
  var $this = $(this);
  $.ajax({
    url: "php/functions.php",
    type: "POST",
    data: "php",
    success: function(html) {
        //Option 1 - will work even if you change the html structure a fair bit
        $this.parents(".notewrap").find(".note").html(html);
        //Option 2 - will only work if your structure remains very similar
        $this.siblings(".note").html(html);
        //Option 3
        $this.parent().find(".note").html(html);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:44:24.110

```
$('.close').click(function() {
     $(this).addClass("SOMETHING"); <--- like this
        $.ajax({
            url: "php/functions.php",
            type: "POST",
            data: "php",
            success: function(html) {
               var note =  $(".note").html(html);
            }

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:45:47.783

如果我正确理解您的问题，您是否只是想更改在 ajax`success`回调中单击的按钮？这在回调中不起作用，因为它不会返回按钮（我认为它返回窗口。不确定）。
您必须在 ajax 发布之前获得对按钮的引用。尝试这个：

```
$('.close').click(function() {
    var self = $(this);
    $.ajax({
        url: "php/functions.php",
        type: "POST",
        data: "php",
        success: function(html) {
            //Now you can do whatever you want with 'self', which is the button that was clicked
            self.addClass('myclasstoadd');
            var note =  $(".note").html(html);
        }
    }); 
```

# javascript - 在 jquery 中使用自定义结构解析 JSON

> ID：15439867
> 
> 赞同：-6
> 
> 时间：2013-03-15T18:40:05.070
> 
> 标签：javascript, jquery, json

如何在 jQuery 中解析这个 JSON：

```
{"3":[
 {"project_id":27,"name":"Name1"},
 {"project_id":28,"name":"Name2"},
 {"project_id":29,"name":"Name3"},
 {"project_id":32,"name":"Name4"}
]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:45:40.577

就像我们每天解析 JSON 一样，Pinky：

```
var parsed = JSON.parse(input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:46:12.597

通常，您使用 JQuery 解析 JSON，如下所示：

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:47:46.930

我不确定您到底需要什么，但您可以通过核心 JavaScript 访问对象中的元素。你不需要 jQuery。例如：

```
theObject[3][0].product_id 
```

将返回 27

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T18:50:07.967

JSON 数据（例如，从 AJAX 调用返回的数据）会自动“解析”为连接到变量的结构。或者，您可以使用 Adrian 展示的内容将字符串转换为结构。

现在，关于您的结构有一个问题：据我所知，“3”不是关联数组中的 OK 名称。将其更改为“列表”或符合键要求的内容，如下所示：

```
var projects = {"list":[
 {"project_id":27,"name":"Name1"},
 {"project_id":28,"name":"Name2"},
 {"project_id":29,"name":"Name3"},
 {"project_id":32,"name":"Name4"}
]}; 
```

然后你可以像这样访问元素。

```
console.log(projects.list);
console.log(projects.list[0].project_id, projects.list[0].name); 
```

# android - android如何管理预装应用程序的更新

> ID：15439871
> 
> 赞同：1
> 
> 时间：2013-03-15T18:40:14.677
> 
> 标签：android

在 android 中预安装的应用程序存储在 /system/app/ 目录中。一旦我们下载了该应用程序的更新，该应用程序就会更新为最新版本。我的问题是：1.当应用程序更新时，是否删除预安装的 apk 并用新版本替换（我猜不是）或更新保存在某个不同的目录中，如果是这样，那么系统在哪里以及如何决定启动哪一个?

# ruby-on-rails - 在做一个只有 api 的应用程序时设计与强参数冲突

> ID：15439872
> 
> 赞同：0
> 
> 时间：2013-03-15T18:40:18.093
> 
> 标签：ruby-on-rails, devise, strong-parameters

我想用新的 gem 创建一个仅 api 的应用程序：[strong_parameters](https://github.com/rails/strong_parameters)。我的应用程序使用设计令牌身份验证来对用户进行身份验证。一切都很好，直到我意识到用户永远无法通过身份验证。我已经遵循了创建 api 和使用设计的所有指南。甚至在过滤器之前做了前置以获取令牌并将其分配给 auth_token 参数。每次我尝试获取数据时，我都会收到此响应“ `{"error":"You need to sign in or sign up before continuing."}`”，即使我在 HTTP 标头中发送用户的令牌。

我可以请求获取 auth_token 就好了，但是当我 ping 说用户控制器上的用户索引方法时，我会得到上面列出的错误。我已经像这样在 HTTP 标头中包含了身份验证令牌`:headers => {"Authorization" => "Token token=#{token["auth_token"]}"}`（这是在我用来测试 api 的 api 测试器类中。）

我拿出了强大的参数，现在我没有这个问题。其他人有设计和strong_parameters的api错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:09:35.747

尝试查看这些更改`https://gist.github.com/kazpsp/3350730`以将 devise 和 strong_parameters 的信息列入白名单

# mysql - SQLzoo JOIN 教程#13

> ID：15439874
> 
> 赞同：4
> 
> 时间：2013-03-15T18:40:19.323
> 
> 标签：mysql, sql, join

我一直在研究 SQLzoo 问题，但在 JOIN 教程问题 #13 中的最后一个问题 - 列出每场比赛以及每支球队的进球数，如图所示。

链接：[http ://sqlzoo.net/wiki/The_JOIN_operation](http://sqlzoo.net/wiki/The_JOIN_operation)

在他们提供的示例代码中，它使用了一个案例。我这样修改它：

```
SELECT game.mdate, game.team1,
  CASE WHEN goal.teamid=game.team1 THEN 1 ELSE 0 END score1, game.team2,
  CASE WHEN goal.teamid=game.team2 THEN 1 ELSE 0 END score2
  FROM game, goal WHERE game.id=goal.matchid
GROUP BY game.mdate, goal.matchid, game.team1, game.team2 
```

他们建议在 score1/score2 上使用 SUM 函数将提供答案。我对如何在 SQL 中创建的这 2 列上使用 SUM 函数感到困惑。

任何人都可以提供有关如何做的提示，或从广义上提及如何以更好的方式编写此 SQL 查询吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-24T22:23:15.737

这对我来说适用于左连接的更正。

```
SELECT mdate, team1,
SUM(CASE WHEN teamid = team1 THEN 1 ELSE 0 END) score1,
team2,
SUM(CASE WHEN teamid = team2 THEN 1 ELSE 0 END) score2
FROM game LEFT JOIN goal ON matchid = id GROUP BY mdate, matchid, team1, team2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T18:49:02.897

好吧，你确实需要`SUM`那些列（`SUM`是一个聚合函数，这就是你在`GROUP BY`那里的原因）。至于以更好的方式编写查询，您需要放弃旧的隐式`JOIN`样式并使用 ANSI 显式样式：

```
SELECT  game.mdate, 
        game.team1,
        SUM(CASE WHEN goal.teamid=game.team1 THEN 1 ELSE 0 END) score1, 
        game.team2,
        SUM(CASE WHEN goal.teamid=game.team2 THEN 1 ELSE 0 END) score2
FROM game
INNER JOIN goal 
    ON game.id=goal.matchid
GROUP BY game.mdate, goal.matchid, game.team1, game.team2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T19:13:03.777

你的 SQL 很好，你只需要一个`SUM`聚合函数的好例子。
这是我的解决方案：

```
 SELECT mdate,
 team1, SUM(CASE game.team1 WHEN goal.teamid THEN 1 ELSE 0 END) 'score1',
 team2, SUM(CASE game.team2 WHEN goal.teamid THEN 1 ELSE 0 END) 'score2'
 FROM game LEFT JOIN goal ON game.id=goal.matchid
 GROUP BY game.id
 ORDER BY mdate, matchid, team1, team2 
```

注意：我原来的帖子给出了不正确的值，需要使用`LEFT JOIN`而不是`INNER JOIN`. 左连接处理两支球队得分为 0 的情况，内连接不处理这些情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-29T15:58:55.360

我认为 SQLzoo 问题已更新，上述答案似乎并未完全解决问题 #13。`ORDER BY`请注意，现在需要排序子句。

```
SELECT
        mdate,
        team1,
        SUM(CASE                  
            WHEN teamid=team1 THEN 1                              
            ELSE 0              
        END) as 'score1',
        team2,
        SUM(CASE                  
            WHEN teamid=team2 THEN 1                  
            ELSE 0              
        END) as 'score2'             
    FROM
        game          
    LEFT JOIN
        goal                  
            ON (
                goal.matchid = game.id                 
            )          
    GROUP BY
        mdate,
        team1,
        team2          
    ORDER BY
        mdate,
        matchid,
        team1,
        team2     ; 
```

# hyperlink - 链接显示不正确

> ID：15439879
> 
> 赞同：0
> 
> 时间：2013-03-15T18:40:38.560
> 
> 标签：hyperlink, ascii, haml

在我的haml代码中，我输入了以下链接

```
.download_section
  %a{href:"https://mailto:xxxx@gmail.com"}
    %b
      Work wth us 
```

但是，在显示中，检查链接后，我意识到只显示了“gmail”

![在此处输入图像描述](../Images/0ce0ffd4ee01d9878a2996e064e83f17.png)

我试图将 @ 和冒号更改为 ASCII 码，但似乎没有帮助

```
.download_section
  %a{href:"https://mailto&#58;xxxx&#64;gmail.com"}
   %b
    Work wth us 
```

谁能告诉我如何使链接按原样显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:47:14.233

如果你尝试这样的事情怎么办：

```
.download_section
  %a{:href => "mailto:xxxx@gmail.com"} Work with us 
```

该链接可能会被`https://`您问题中的代码部分弄糊涂。*（在此处查看有关[mailto 链接的](http://en.wikipedia.org/wiki/Mailto)更多信息。）*

# apache-flex - 在 URLLoader 上使用代理？类似于httpservice？

> ID：15439881
> 
> 赞同：0
> 
> 时间：2013-03-15T18:40:42.897
> 
> 标签：apache-flex, flex4.5, httpservice, urlloader, urlrequest

在不受信任的服务器上加载 Https 图像有限制。我们决定从代理服务加载图像，而不是让空气自己从几个域中加载。当我检查 blazeds 文档时，httpservice 具有 useproxy 属性，可以将服务调用转移到 proxy-service.xml，而不是客户端通过其自身进行。我可以为 URLLoader 做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:35:59.660

我们决定使用 tomcat 阀门来加载图像，阀门充当从 https 域加载图像的代理。

# spring-security - 春天记住我不重定向到主页

> ID：15439884
> 
> 赞同：1
> 
> 时间：2013-03-15T18:40:49.200
> 
> 标签：spring-security, remember-me

这是我配置 Spring-security 的方式：

```
 <security:http auto-config="true">
        <security:remember-me key="123456" />   <!--  Be Aware -->
        <!-- Restrict URLs based on role -->
        <security:intercept-url pattern="/index*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/account/*" access="IS_AUTHENTICATED_ANONYMOUSLY" />        
        <security:intercept-url pattern="/assets/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />

        <security:intercept-url pattern="/**" access="ROLE_USER" />
        <!-- Override default login and logout pages -->
        <security:form-login login-page="/account/login.html" 
                             login-processing-url="/account/loginProcess" 
                             default-target-url="/home.html" 
                             authentication-failure-url="/account/login.html?login_error=1" />
        <security:logout logout-url="/account/logout" logout-success-url="/account/login.html" />
    </security:http> 
```

我的登录页面还包括 Spring 安全性的所有必要项目（**记住我的复选框**、**j_username**、**j_password**）。要指出的另一件事是我登录后创建的 Spring-security cookie。但是，下次我启动浏览器时，我不会自动重定向到主页。（虽然会话存在，如果我尝试输入*home.html*我可以）。我想知道也许这是我应该在我的配置中暗示重定向到 home.html 的东西。但是我在互联网上找到的任何例子都提到了它。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:41:14.563

尝试`default-target-url=/path/to/your/homepage`在表单登录标签下设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:34:25.313

我不确定您到底期望什么，但 remember-me 过滤器不应该在成功的自动登录时执行任何重定向（基于 remember-me cookie 的身份验证）。记住我功能的全部意义在于让请求通过身份验证检查并在不中断其流程的情况下进行处理，以防记住我的 cookie 有效。

**编辑：** 目前尚不清楚您希望重定向发生的时间和原因。在用户以交互方式验证自己（通过填写并提交登录表单）后，他会收到一个由浏览器保存的记住我的 cookie。然后稍后（可能几天后）在随后的会话中，他浏览到您的应用程序的某个随机 URL（例如通过书签）。浏览器仍然有记住我的 cookie，所以它与请求一起发送。然后服务器端的 remember-me 过滤器处理 cookie，并在没有任何进一步交互的情况下对用户进行身份验证。现在为什么要将该请求重定向到 home.html 而不是提供用户请求的内容？

# vb.net - 必应地图中图钉的 AddHandler

> ID：15439889
> 
> 赞同：1
> 
> 时间：2013-03-15T18:41:16.000
> 
> 标签：vb.net, bing-maps

[VB2012] 我使用以下代码重复地将图钉从数据库添加到 Bing Maps WPF MapLayer (ml)：

```
Dim pp As New Pushpin()
pp.Location = New Location(utm.Latitude.GetDecimalCoordinate, utm.Longitude.GetDecimalCoordinate)
pp.PositionOrigin = PositionOrigin.BottomCenter
pp.Content = PinLabel
pp.ToolTip = PinLabel
pp.FontSize = 6.0R
' need to put an AddHandler in here
ml.Children.Add(pp) 
```

图钉被添加并显示在地图播放器上。我不明白的是如何为每个图钉添加 AddHandler 以便我可以确定何时单击图钉。我真的很感激一些见解。我只是没有从我找到的在线示例中得到我需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:57:09.563

在 WPF 中，Addhandler 语句与其他 VB.Net 应用程序中的构造相同。由于所有图钉都被路由到此事件，发送者对象将为您提供正确的图钉。

```
Addhandler pp.MouseDown, AddressOf pp_MouseDown 
```

您必须使用与事件匹配的签名来制作子例程。

```
Private Sub pp_MouseDown(sender As Object, e As RoutedEventArgs)
  'sender is the PushPin in question
  Dim pp as PushPin = DirectCast(sender, PushPin)
End Sub 
```

# c - 影响 gcc 中的函数克隆/复制/常量传播

> ID：15439890
> 
> 赞同：5
> 
> 时间：2013-03-15T18:41:19.290
> 
> 标签：c, optimization, gcc, compiler-flags

当`gcc`使用优化运行时，当它认为函数位于热路径中或有常量传播到函数参数时，它会克隆（复制）C 函数。

更具体地说，这似乎是由`fipa-cp-clone`选项控制的。

有什么办法可以影响这个吗？例如，用某个属性标记一个参数，作为编译时常量（就像你可以在 C++ 中使用模板参数做的那样），这会导致函数被克隆？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T18:56:45.903

重要的是是否使用常量参数调用函数（实际的*常量表达式*，或者编译器通过常量传播确定为常量的东西）。在这种情况下，GCC 将克隆该函数，除非它确定这样做成本太高或收益太少；我不知道如何影响该指标。请注意，除非您一次编译整个程序或使用链接时优化，否则持续传播仅发生在单个翻译单元（源文件）中，并且我不确定克隆是否仍然可以在那时发生。

我最好的猜测是，如果克隆没有在您期望的时候发生，那么 GCC 永远不会看到调用函数的常量参数。即使您知道它是常量，编译器也可能无法证明它是常量。

# java - 使用 @Resource 时处理 EJB 上的异常

> ID：15439892
> 
> 赞同：0
> 
> 时间：2013-03-15T18:41:47.090
> 
> 标签：java, jakarta-ee, glassfish

我最近一直在编写代码，该代码会定期从我公司正在逐步淘汰的旧数据库中导入一些数据。我在 glassfish 上为旧数据库设置了一个连接池，然后通过 @Resource 注释将其作为数据源注入。它运行良好，除非数据库不可用。在这种情况下，服务器会将整个堆栈跟踪转储到与 javax.resource.spi.ResourceAllocationException 相关的日志中。这是有道理的，因为查找资源会引发 SQLException（与无法访问数据库有关）。我不清楚在哪里捕获和处理异常，因为它确实发生在 bean 之外。

有没有办法让 EJB 处理在向其中注入资源时发生的异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:07:33.073

如果您需要对连接进行该级别的控制/恢复，请手动创建它而不是注入它：

```
try {
  Context ctx = new InitialContext();
  DataSource ds = (DataSource) ctx.lookup("jdbc/myDBResource");
  Connection connection = ds.getConnection();
  ...
}
catch (Exception exc) {
  ...
} 
```

请参阅[“旧式”连接管理的附加材料](https://stackoverflow.com/a/1918482/1448212)。

# java - JavaFX - 将 FXML 包装到 Java 类控制器

> ID：15439894
> 
> 赞同：5
> 
> 时间：2013-03-15T18:41:54.687
> 
> 标签：java, treeview, javafx, fxml

我有一个具有 TreeView 控件的 FXML 文件：

```
<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="500.0" xmlns:fx="http://javafx.com/fxml" fx:controller="test.MyControllerClass">

<TreeView fx:id="locationTreeView" layoutX="12.0" layoutY="158.0" prefHeight="193.0" prefWidth="471.0" /> 
```

然后我的 Java 类控制器需要用这个 TreeView 包装并动态添加 TreeItem。这就是问题所在，它没有加载那些 TreeItem。这是下面的测试代码，来自我的控制器：

```
public class MyControllerClass extends Application {

    @FXML
    private TreeView<String> locationTreeView;

    @Override
    public void start(Stage stage) throws Exception {

        stage.initStyle(StageStyle.TRANSPARENT);
        stage.getIcons().add(new Image(getClass().getResourceAsStream("myIcon.png")));

        Parent root = FXMLLoader.load(getClass().getResource("myInterface.fxml"));

        Scene scene = new Scene(root);
        stage.setScene(scene);

        loadTreeItems();

        stage.show();
    }

    // Just a simple example that still doesn't works
    private void loadTreeItems() {

        try {
            TreeItem<String> root = new TreeItem<String>("Root Node");
            root.setExpanded(true);
            root.getChildren().addAll(
                new TreeItem<String>("Item 1"),
                new TreeItem<String>("Item 2"),
                new TreeItem<String>("Item 3")
            );

            locationTreeView = new TreeView<String>(root);

        } catch (Exception exc) {
            System.out.println("Error: " + exc.getMessage());
        }
    }

    public static void main(String[] args) {
         launch(args);
    }
} 
```

任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T22:39:39.100

您的应用程序无法运行的原因有几个：

1.  您需要将 Controller 和 Application 分开的类。
2.  您应该允许 FXML 系统注入 TreeView 实例，而不是创建一个新实例（正如 Aaron 在他的回答中指出的那样）。

您当前构建应用程序的方式会发生什么：

1.  Java 系统将`MyControllerClass`在启动时创建一个实例（并调用它的`start`方法）。
2.  *每次*加载文件时都会`FXMLLoader`创建*另一个实例*。`MyControllerClass` *`myInterface.fxml`*
**   将`FXMLLoader`创建一个新实例并对它创建的*新*实例的成员`TreeView`执行 FXML 注入。`locationTreeView` *`MyControllerClass`***   将`FXMLLoader`尝试在新的（您没有）上调用该`initialize`方法。`MyControllerClass`*   `FXMLLoader`不会调用*new**上*的`start`方法。 *`MyControllerClass`***   您`start`对原始方法的原始方法调用`MyControllerClass`将继续处理并创建另一个*新* `TreeView`实例，它将*旧*`locationTreeView`实例的成员设置为该实例。 *`MyControllerClass`****

 **** * *

我更新了您的代码以进行我上面建议的修改，并且代码现在可以工作。更新后的[代码可用](https://gist.github.com/jewelsea/5174074)。

运行代码的示例屏幕截图是： ![动态树视图](../Images/68732e2724a47522acf94cfbaf88c05f.png)

*MyApplicationClass.java*

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.event.*;
import javafx.fxml.FXMLLoader;
import javafx.scene.*;
import javafx.scene.image.Image;
import javafx.scene.input.MouseEvent;
import javafx.stage.*;
import javafx.util.Duration;

/** Sample application to demonstrate programming an FXML interface. */ 
public class MyApplicationClass extends Application {
  @Override public void start(final Stage stage) throws Exception {
    // load the scene fxml UI.
    // grabs the UI scenegraph view from the loader.
    // grabs the UI controller for the view from the loader.
    final FXMLLoader loader = new FXMLLoader(getClass().getResource("myInterface.fxml"));
    final Parent root = (Parent) loader.load();
    final MyControllerClass controller = loader.<MyControllerClass>getController();

    // continuously refresh the TreeItems.
    // demonstrates using controller methods to manipulate the controlled UI.
    final Timeline timeline = new Timeline(
      new KeyFrame(
        Duration.seconds(3), 
        new TreeLoadingEventHandler(controller)
      )
    );
    timeline.setCycleCount(Timeline.INDEFINITE);
    timeline.play();

    // close the app if the user clicks on anywhere on the window.
    // just provides a simple way to kill the demo app.
    root.addEventFilter(MouseEvent.MOUSE_CLICKED, new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent t) {
        stage.hide();
      }
    });

    // initialize the stage.
    stage.setScene(new Scene(root));
    stage.initStyle(StageStyle.TRANSPARENT);
    stage.getIcons().add(new Image(getClass().getResourceAsStream("myIcon.png")));
    stage.show();
  }

  /** small helper class for handling tree loading events. */
  private class TreeLoadingEventHandler implements EventHandler<ActionEvent> {
    private MyControllerClass controller;
    private int idx = 0;

    TreeLoadingEventHandler(MyControllerClass controller) {
      this.controller = controller;
    }

    @Override public void handle(ActionEvent t) {
      controller.loadTreeItems("Loaded " + idx, "Loaded " + (idx + 1), "Loaded " + (idx + 2));
      idx += 3;
    }
  }

  // main method is only for legacy support - java 8 won't call it for a javafx application.
  public static void main(String[] args) { launch(args); }
} 
```

*MyControllerClass.java*

```
import javafx.fxml.FXML;
import javafx.scene.control.*;

/** Sample controller class. */ 
public class MyControllerClass {
  // the FXML annotation tells the loader to inject this variable before invoking initialize.
  @FXML private TreeView<String> locationTreeView;

  // the initialize method is automatically invoked by the FXMLLoader - it's magic
  public void initialize() {
    loadTreeItems("initial 1", "initial 2", "initial 3");
  }  

  // loads some strings into the tree in the application UI.
  public void loadTreeItems(String... rootItems) {
    TreeItem<String> root = new TreeItem<String>("Root Node");
    root.setExpanded(true);
    for (String itemString: rootItems) {
      root.getChildren().add(new TreeItem<String>(itemString));
    }

    locationTreeView.setRoot(root);
  }
} 
```

*我的接口.fxml*

```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" xmlns:fx="http://javafx.com/fxml" fx:controller="test.MyControllerClass">
  <TreeView fx:id="locationTreeView" layoutX="0" layoutY="0" prefHeight="193.0" prefWidth="471.0" />
</AnchorPane> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:23:06.310

在您的 loadTreeItems() 函数中，您正在创建一个新的 TreeView 实例。这是用不属于场景图的新实例替换在 FXML 文件中定义并附加到场景的实例。

要将项目添加到通过 FXMLLoader 创建的 TreeView，您可以使用[setRoot()](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeView.html#setRoot%28javafx.scene.control.TreeItem%29)函数。

```
private void loadTreeItems() {

    try {
        TreeItem<String> root = new TreeItem<String>("Root Node");
        root.setExpanded(true);
        root.getChildren().addAll(
            new TreeItem<String>("Item 1"),
            new TreeItem<String>("Item 2"),
            new TreeItem<String>("Item 3")
        );

        locationTreeView.setRoot(root);

    } catch (Exception exc) {
        System.out.println("Error: " + exc.getMessage());
    }
} 
```***

# android - MediaPlayer() 音频口吃(android)

> ID：15439895
> 
> 赞同：0
> 
> 时间：2013-03-15T18:41:56.083
> 
> 标签：android, media-player, audio-streaming, live-streaming

我正在使用 MediaPlayer 功能在我的 android 应用程序中从远程服务器流式传输实时音频流。但是音频断断续续，口吃。问题不在于我的互联网，因为当我在计算机上播放提要时，它可以完美播放。可能是什么问题？*注意：流是实时的。这是我正在使用的代码：

```
MediaPlayer mp = new MediaPlayer();
    try{
    mp.setDataSource("http://radiotool:80/feed 342.mp3");//hardcoded for testing purposes
    mp.prepare();
    mp.start();
    }
    catch(Exception e)
    {Log.d("Error came up man",", check the internet connection and stuff.."); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:54:14.633

您链接到的流没有在流的开头发送大量数据缓冲区。通常这不是问题，因为客户端负责确定播放速率、观察数据传输速率并相应地管理客户端缓冲区。这就是为什么当我给你一个链接来尝试使用大缓冲区时，这不是问题。

基本上，音频丢失是由于不断的缓冲区欠载造成的。要解决此问题，您需要增加缓冲区大小。现在看来这是不可能的，但另一种方法可能是自己[管理 HTTP 客户端并将数据代理到 MediaPlayer](https://stackoverflow.com/questions/4413300/change-buffer-size-on-mediaplayer)。该链接很旧......希望从那时起有人已经想出了如何以另一种方式做到这一点。我不是 Android 开发人员，所以我不能肯定地告诉你。

我首先要做的是 call `mp.prepareAsync()`，并在 MediaPlayer 告诉您它已准备好启动后等待 2 秒钟。我有一种预感，数据将继续在后台缓冲，直到您实际调用`.start()`.

# amazon-ec2 - 如果人们从市场购买 AMI，Amazon EC2 实例的访问控制是什么？

> ID：15439911
> 
> 赞同：0
> 
> 时间：2013-03-15T18:42:53.300
> 
> 标签：amazon-ec2

我是 Amazon EC2 平台和市场的新手，所以我需要一些帮助来解决我的问题。

目前我们公司正在尝试创建一个定制的 Linux AMI 以投放市场，我负责设置整个事情。当客户加载一个新实例时，我不太确定以下内容：

他们是否可以访问我们在获得实例时预先配置的 Linux 系统？我不知道客户购买后的实例如何，但我们希望保护实例的设置不被客户修改，我们只希望他们通过端口 443(https) 使用 Web 界面.

新实例如何申请安全组？客户是否负责设置防火墙规则，或者我创建 AMI 时是否将安全组绑定到实例？

默认情况下，实例没有任何公共 IP 地址，目前我必须手动获取弹性 IP 地址并将其挂接到实例。这是客户加载实例时的责任吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:55:24.657

AMI 只是一个磁盘映像。完全由客户进行安全组配置、应用弹性 IP 等。

事实上，如果您尝试使用 HTTPS，最终客户还需要能够在实例上安装自己的证书。

用户通常具有对系统的完全访问权限，并且能够对系统执行任何您无法通过自己对系统的自定义来明确禁止的事情。

# java - JOptionPane 中的选项值

> ID：15439912
> 
> 赞同：1
> 
> 时间：2013-03-15T18:42:54.333
> 
> 标签：java, nullpointerexception, joptionpane

我正在尝试使用 for 循环将名称从我的类文件中获取到一个`String`数组中，并将其显示在`JOptionPane`列表菜单中。但是，我面临一个`NullPointerException`但是如果我不将`String`数组声明为`null`，编译器会抱怨。

```
public void showWindow()
{
    String[] theNames = null;

    for(int i=0; i<person.length; i++)
    {
        if(person[i] != null)
        {
            System.out.println(person[i].name);
        }
    }

    String s = (String)JOptionPane.showInputDialog(null, "Select your name and click on confirm", "Results", JOptionPane.PLAIN_MESSAGE, null, theNames, "Eric");
} 
```

如果不一一列出选项值，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:32:56.327

选项可以是任何对象的数组，但请确保 toString() 方法是您希望在下拉菜单中显示的内容。无需一一列出选项，甚至无需将对象转换为字符串。例如：

```
public class Person {

  String firstName, lastName;

  public Faculty(String f, String last) {
     firstName = f;
     lastName = last;
  } 

  public String toString() {
     return firstName + " " + lastName;
  }  
}

public static void showWindow()  {
  Person[] guys= new Person[5];
  guys[0] = new Person("Dick","Wall");
  guys[1] = new Person("Tor","Norbye");
  guys[2] = new Person("Chet","Haase");
  guys[3] = new Person("Carl","Quinn");
  guys[4] = new Person("Scott","Hanselman");

  Personp = (Person) JOptionPane.showInputDialog(null, 
     "Pick your favorite podcaster.", 
     "Java Posse",
     JOptionPane.QUESTION_MESSAGE, null, 
     guys, guys[0]); 

  System.out.println("You picked:" + p.toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:02:22.323

那行代码没有问题：

```
String [] theNames = null;  
      String s=(String)javax.swing.JOptionPane.showInputDialog(null, "Select your name and click on confirm","Results",
              javax.swing.JOptionPane.PLAIN_MESSAGE, null, theNames, "Eric");
      System.out.println(s); 
```

注意：您必须初始化`theNames`，除非您将获得`RuntimeException`.

我注意到您的班级中有一个 Person 变量。你能向我解释为什么你将 theNames 初始化为 null 吗？它在方法中有什么好处？

# colors - 如果默认颜色为“透明”，则无法在运行时更改列颜色

> ID：15439914
> 
> 赞同：2
> 
> 时间：2013-03-15T18:42:58.057
> 
> 标签：colors, powerbuilder, datawindow

当我打开日期窗口进行编辑时，我使用以下代码更改特定列的颜色：

```
dw_1.object.description.Background.Color = RGB(255, 255, 255) 
```

只要画家中的默认背景颜色不是“透明”，这就会很好。如果它一开始是透明的，那么这段代码什么也不做。

我怎样才能让列是透明的，但将其更改为白色然后再变回来？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:48:58.147

`background.mode`将属性更改为`0`以删除透明度并考虑`background.color`在内。

该手册在`Background.property DataWindow object property`条目中说：

> 透明背景
> 如果 Background.Mode 为透明 (1)，则忽略 Background.Color。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:21:46.993

将列背景色设置为白色（例如）并将其背景色**表达式**设置为`553648127`.

之后你可以用`Modify`

```
// To white
dw_1.Modify("description.Background.Color='16777215~t16777215'")
// To transparent
dw_1.Modify("description.Background.Color='16777215~t553648127'") 
```

可能`dw_1.SetRedraw(true)`会需要。

您还可以创建隐藏列（`desc_bc`例如），将其名称设置为背景颜色的表达式，并更改其值而不是调用 Modify。

# html - Internet Explorer 7 中的破折号

> ID：15439917
> 
> 赞同：-3
> 
> 时间：2013-03-15T18:43:03.097
> 
> 标签：html, css, internet-explorer, internet-explorer-7

有谁知道如何让 em dash 出现在 IE7 中？

我曾尝试使用该`IE9.js`文件，但它似乎不起作用。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:46:38.910

为什么不能直接打出来？

在 HTML 中：

```
&mdash; or &#8212; 
```

在 CSS 中：

```
content:"\2014" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:17:48.683

在 CSS 中：

```
// Support IE7, which doesn't support :before pseudo selectors
*zoom: expression(
  function(t) {
    t.runtimeStyle['zoom'] = '1';
    t.innerHTML = "&mdash; " + t.innerHTML;
  }(this)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:21:29.013

对于 IE 8 以上的版本，通过 JavaScript 生成真实元素，并使其包含与`:before`/`:after`生成的伪元素内容等价的真实内容：

```
var example = document.getElementById('example'),
    span    = document.createElement('span');

span.innerHTML = '&mdash;'
example.appendChild(span); 
```

然后附加与您/生成的伪`span`元素具有相同样式的元素。`:before``:after`

顺便说一句，考虑放弃对 IE7 等古老的 IE 版本的支持。实际上，是时候考虑放弃对 IE8 的支持了。;-)

# php - mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值

> ID：15439919
> 
> 赞同：48
> 
> 时间：2013-03-15T18:43:11.237
> 
> 标签：php, mysql, mysqli, boolean

我在检查我的数据库中是否已经存在 Facebook User_id 时遇到了一些麻烦（如果不存在，它应该接受用户作为新用户，否则只需加载画布应用程序）。我在托管服务器上运行它并且没有问题，但是在我的本地主机上它给了我以下错误：

> mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值

这是我的代码：

```
<?
$fb_id = $user_profile['id'];
$locale = $user_profile['locale'];

if ($locale == "nl_NL") {
    // Checking User Data @ WT-Database
    $check1_task = "SELECT * FROM `users` WHERE `fb_id` = " . $fb_id . " LIMIT 0, 30 ";
    $check1_res = mysqli_query($con, $check1_task);
    $checken2 = mysqli_fetch_array($check1_res);
    print $checken2;
    // If the user does not exist @ WT-Database -> insert
    if (!($checken2)) {
        $add = "INSERT INTO users (fb_id, full_name, first_name, last_name, email) VALUES ('$fb_id', '$full_name', '$first_name', '$last_name', '$email')";
        mysqli_query($con, $add);
    }
    // Double-check, the user won't be able to load the app on failure inserting to the database
    if (!($checken2)) {
        echo "Excuse us " . $first_name . ". Something went terribly wrong! Please try again later!";
        exit;
    }
} else {
    include ('sorrylocale.html');
    exit;
} 
```

我读过它与我的查询错误有关，但它已经在我的托管服务提供商上工作，所以不可能！

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-03-15T18:52:06.610

给出的查询`mysqli_query()`失败并返回`false`。

把这个放在后面`mysqli_query()`看看发生了什么。

```
if (!$check1_res) {
    printf("Error: %s\n", mysqli_error($con));
    exit();
} 
```

了解更多信息：

[http://www.php.net/manual/en/mysqli.error.php](http://www.php.net/manual/en/mysqli.error.php)

# javascript - data:uri for ical 不适用于 Android 或 iPhone

> ID：15439922
> 
> 赞同：8
> 
> 时间：2013-03-15T18:43:24.953
> 
> 标签：javascript, android, iphone, icalendar

我正在尝试使用 data:Uri 在移动设备上使用 ical 创建日历条目，如[https://stackoverflow.com/a/4551467/90236](https://stackoverflow.com/a/4551467/90236)中所述。现在，当我在 Chrome 中运行它并且我的日历应用程序是 MS Outlook 时，它在我的台式机上运行良好。

基本上，我在 Javascript 中所做的是：

```
var icalsample = "BEGIN:VCALENDAR\r\n\
VERSION:2.0\r\n\
PRODID:-\/\/mycompany.com\/myproduct\/\/NONSGML v1.0\/\/EN\r\n\
BEGIN:VEVENT\r\n\
UID:" + uuid + "@mycompany.com\r\n\
DTSTAMP:" + dtstamp.toISOString() + "\r\n\
ORGANIZER;CN=mycompany scheduler\r\n\
DTSTART:" + dtstart.toISOString() + "\r\n\
DTEND:" + dtend.toISOString() + "\r\n\
SUMMARY:" + title + "\r\n\
DESCRIPTION:" + description + "\r\n\
END:VEVENT\r\n\
END:VCALENDAR\r\n";

var uriContent = "data:text/calendar," + encodeURIComponent(icalsample);
location.href = uriContent; 
```

下面是我的应用程序中的一个示例 uriContent。当我将其复制并粘贴到 Chrome 的地址栏中时，它按预期工作：

```
data:text/calendar,BEGIN%3AVCALENDAR%0AVERSION%3A2.0%0APRODID%3A-%2F%2Fmycompany.com%2Fmyproduct%2F%2FNONSGML%20v1.0%2F%2FEN%0ABEGIN%3AVEVENT%0AUID%3A3e40a5db-bfe3-4ab5-92c0-22cb7aeaa2d4%40mycompany.com%0ADTSTAMP%3A2013-03-15T18%3A17%3A55.792Z%0AORGANIZER%3BCN%3Dmycompany%20scheduler%0ADTSTART%3A2013-03-18T16%3A00%3A00.000Z%0ADTEND%3A2013-03-18T20%3A00%3A00.000Z%0ASUMMARY%3AService%20Appointment%0ADESCRIPTION%3Aupgrade.%0AEND%3AVEVENT%0AEND%3AVCALENDAR 
```

我的问题是它不适用于 iPhone 或 Android。从我读过的内容来看，我认为 data:Uris 是受支持的。

在使用默认浏览器（不是 Chrome）的 Android 4.1.1 上，我看到我的字符串文本在浏览器中显示为纯文本文档。在 iPhone 上，我看到“下载失败：Safari 无法下载此文件”。

如何在 iPhone 和 Android 上进行这项工作？

更新 - -

上面的原始代码中有一些错误。所有行必须以 \r\n 结尾。我只有\n。最后一行也需要\r\n。javascript Date.toISOString 格式对 iCal 无效。您必须删除破折号、分号和秒的小数部分。用于捕获这些错误的真正有价值的工具是[ical 验证器](http://severinghaus.org/projects/icv/)。

最重要的是，我认为 Android 不支持 iCal 或 ics 文件。有很多论坛帖子讨论这个和[第 3 方工具](https://play.google.com/store/apps/details?id=com.aurigroup.icsimporter)来填补这个空白。所以我认为我的代码是正确的（除了上面更新中列出的错误），但它在我的手机上失败了，因为没有为文本/日历 mime 类型注册应用程序或 Intent。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T10:10:39.627

我遇到了同样的问题——直到找到这个帖子，我才能让 iPhone 读取我的 iCal 文件。

Safari 会说“Safari 无法下载此文件”，这具有误导性——Safari 已经下载了该文件——但它不喜欢带有破折​​号和冒号的标准 ISO 格式日期。

正如您正确地说的那样，解决方案是：

*   确保行尾是 CRLF。
*   确保 BEGIN:VCALENDAR 上方没有空行
*   确保日期格式为 ISO - 但已删除破折号和分号。

感谢您指出正确的方向！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T07:44:16.977

我尝试了这个确切的代码并且它有效！

```
BEGIN:VCALENDAR
PRODID:-//Some organization//some application//EN
VERSION:2.0
METHOD:REQUEST
BEGIN:VEVENT
UID:20120925T072912Z-140@http://localhost/www/
CREATED:20120925T072912Z
DTSTAMP:20120922T090500Z
DTSTART:20120922T090500Z
DTEND:20120923T090500Z
DESCRIPTION:Please attend this sample meeting
SUMMARY:Invitation to attend training
LOCATION:Earth
ATTENDEE;RSVP=TRUE:mailto:periklis@example.com
ORGANIZER;CN=periklis@example.com:mailto:periklis@example.com
LAST-MODIFIED:20120922T090500Z
PRIORITY:5
SEQUENCE:0
STATUS:CONFIRMED
TRANSP:TRANSPARENT
END:VEVENT
END:VCALENDAR 
```

# coldfusion - cftextarea 富文本编辑器在 IE10 中不起作用

> ID：15439926
> 
> 赞同：1
> 
> 时间：2013-03-15T18:43:32.693
> 
> 标签：coldfusion, internet-explorer-10, fckeditor

我在 IE10 中`<cftextarea>`遇到问题。`richtext="true"`问题是`<cftextarea>`使用了似乎与 IE10 不兼容的 FCK 编辑器。

使用 CK 编辑器（这将是我的第一选择）重新进行这项工作将是一项艰巨的工作。有谁知道如何强制内置ColdFusion富文本编辑器兼容IE10？

我尝试编辑`fckeditor.js`and`fckutils.cfm`文件，以便它使用两位数考虑 IE10 版本号。但是，我正在使用的 cftextarea 实例似乎没有拾取/使用这些文件。但是，该`fckeditor.html`文件正在被击中。

我所做的更改`fckeditor.js`：

```
// Internet Explorer 5.5+
if ( /*@cc_on!@*/false && sAgent.indexOf("mac") == -1 )
{
    //var sBrowserVersion = navigator.appVersion.match(/MSIE (.\..)/)[1] ;
    var sBrowserVersion = navigator.appVersion.match(/MSIE ([\d.]+)/)[1] ;
    return ( sBrowserVersion >= 5.5 ) ;
} 
```

我在 fckutils.cfm 中所做的更改

```
// check for Internet Explorer ( >= 5.5 )
if( find( "msie", sAgent ) and not find( "mac", sAgent ) and not find( "opera", sAgent ) )
{
    // try to extract IE version
    stResult = reFind( "msie ([0-9]+\.[0-9]+)", sAgent, 1, true );
    if( arrayLen( stResult.pos ) eq 2 )
    {
        // get IE Version
        sBrowserVersion = mid( sAgent, stResult.pos[2], stResult.len[2] );
        if( sBrowserVersion GTE 5.5 )
            isCompatibleBrowser = true;
    }
} 
```

对于`cftextarea`FCK 编辑器实例，我应该在某处进行任何其他更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:05:59.030

我通过在 Coldfusion 中使用 ajaxonload() 函数解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T20:39:13.263

我完全无法让它在 CF9 中与 IE 10 一起使用。我尝试了您建议的更改，但 IE10 上还有其他几个 JavaScript 错误。

问题是 CF 使用的是旧版本的[CKEditor](http://ckeditor.com/)（仍然使用原来的名称 FCKEditor）。您可能想尝试下载最新版本的 CKEditor 并在您的项目中使用它们。这就是我所做的，我发现它很容易实现。基本上，您只需将 ckeditor.js 包含在脚本标签中，然后为任何`<textarea>`标签赋予`class="ckeditor"`属性，该库会为您处理其他所有事情。

显然，如果您使用通用组件来生成文本字段，这会容易得多。如果您到处都有随机`<cftextarea>`标签，则必须进行更大的搜索/替换。

您也可以尝试在 CFIDE 中更新库，但这可能会导致更多的问题而不值得。

# ruby-on-rails-3 - 使用 jquery.ajax 发送时如何在 Rails 控制器中获取 PUT 参数

> ID：15439927
> 
> 赞同：0
> 
> 时间：2013-03-15T18:43:35.657
> 
> 标签：ruby-on-rails-3, jquery

点击按钮我有

```
(function() {
$("#btnStep2").click(function() {

    number = $('#btnStep2').attr('number');
     var dataString='number='+number+'&reserved='+$('#rd'+number).is(':checked')+'&environment=qa1';
    alert(dataString);
$.ajax({
    type: "PUT",
    url: "/tnrepos/"+number,
    contentType: "application/text; charset=utf-8",
    beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
    data: dataString, 
    success: function(data){ 
        alert("update successfully");

    }});
    return false;
});
}); 
```

在服务器上看到

```
 Started PUT "/tnrepos/12345" for 127.0.0.1 at 2013-03-15 11:38:03 -0700
Processing by TnreposController#update as */*
  Parameters: {"id"=>"12345"} 
```

但我没有看到其他参数传递..

在控制器中我打印参数

```
"action"=>"update", "controller"=>"tnrepos", "id"=>"12345"} 
```

为什么不存在其他参数？我在 Firefox 和 chrome 上进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:52:27.820

```
$.ajax({
    type: "PUT",
    url: "/tnrepos/" + number,
    contentType: "application/text; charset=utf-8",
    beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
    data: {data : dataString} ,
    success: function(data){ 
        alert("update successfully");

    }});
    return false;
});
}); 
```

您在上面看到了数据的使用：“{data : dataString}”。

现在，您的 params[:data] 将拥有 dataString。

> 我建议将它们传递为 "{number : number , reserved : $('#rd'+number).is(':checked') } 并在控制器上使用它们的名称访问它们，例如 params[:number]、params [:reserved] 等等。

试试看，让我知道！

# gwt - 如何读取功能键？

> ID：15439930
> 
> 赞同：0
> 
> 时间：2013-03-15T18:43:40.473
> 
> 标签：gwt

我有一个带有 FocusPanel 的小部件，并且我阅读了 KeyPress 事件。是否可以定义按下哪个功能键？我尝试使用 event.getUnicodeCharCode()，但我只能扫描 Enter (code-13) 和 Ctrl-Enter (10) 功能键。

1.  那么按下 Esc 键时有什么方法可以触发功能吗？

2.  还有哪些功能键以及如何扫描？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:12:14.760

改为使用`nativeKeyCode`。

这是[keyCodes的列表](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

```
 FocusPanel  panel = new FocusPanel();
    panel.addKeyUpHandler(new KeyUpHandler() {

        @Override
        public void onKeyUp(KeyUpEvent event) {
             if(event.getNativeEvent().getKeyCode() ==KeyFromLIst){
                 //DO something
               }

        }
    }); 
```

为了摆脱浏览器不兼容的问题，首选`keyup handler`.

# javascript - Cocos2d-x C++ vs JavaScript 手机应用

> ID：15439935
> 
> 赞同：0
> 
> 时间：2013-03-15T18:43:59.553
> 
> 标签：javascript, c++, cocos2d-x

我只是盯着写一个游戏，我想使用 Cocos2d，我注意到，基本上我有两种方法来开发它。使用该框架，为了编写和打电话的应用程序，我可以在 javascript 或 c++ 上编写它。

我想知道使用与框架相关的每种技术的优缺点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:58:38.783

你没有两个，而是无数的选择。你问[错问题了](http://www.learn-cocos2d.com/2012/05/the-game-engine-dating-guide-how-to-find-the-right-engine-for-your-game/)。

有区别吗？是的。主要是编程语言，然后是开发工作流程。

但是你的要求是什么？是否使用引擎创建了类似的应用程序？您对哪种语言最有经验，或者只是更喜欢哪种语言？你的个人目标是什么，你的编程经验水平是什么？

这才是**真正**决定一种引擎相对于另一种引擎的优缺点的原因。

# html - WebKit 在填充文本时会减小表格单元格的大小

> ID：15439943
> 
> 赞同：1
> 
> 时间：2013-03-15T18:44:14.137
> 
> 标签：html, css, twitter-bootstrap, webkit

我在这里有一个表格，显示图标、标题和描述。这是示意性的：

```
 | Title
 icon | -------------------
      | Description 
```

以下是生成此布局的相关 HTML 代码：

```
<table><tbody>
<tr>
  <td rowspan="2"><img style="margin-right: 2.0em;" src="icon.png"></td>
  <td valign="top"><h2>Title goes here</h2></td>
</tr>
<tr>
  <td valign="bottom"><b>
    description description description description description description description extra text extra text extra text extra text
  </b></td>
</tr>
...
</tbody></table> 
```

此表在 Chrome 中如下所示：

![Chrome 中的破碎表](../Images/84054912988c280eef28190eac3e62df.png)

当我从描述中删除文本时，表格恢复了适当的外观：

![在 Chrome 中没有那么破碎的桌子](../Images/71be0c2973b113f99161b438a5ce4ff5.png)

但是，在 Firefox 中始终会正确显示同一个表格：

![从未在 Firefox 中被砸过](../Images/7f289c1fc4b45e47b5560c23511af345.png)

似乎 WebKit 不尊重`margin-right`图标，而 Firefox 确实如此。我尝试通过更改但没有任何效果来使用描述和标签`td`的`b`样式。我也改变了，但也没有任何效果。`display``overflow``margin-right``padding-right`

我怎样才能让 WebKit 尊重图标的`margin-right`？

我正在使用 Twitter Bootstrap 作为我网站的 CSS 框架。我没有为这张表使用 Bootstrap 的 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:19:59.250

是的，它是引导 CSS。这个类有`max-width: 100%`，这是原因：

```
img {
    width: auto 9;
    height: auto;
    max-width: 100%;  /* the culprit */
    vertical-align: middle;
    border: 0;
    -ms-interpolation-mode: bicubic;
} 
```

要解决它，请重置`max-width`：

```
td img {
    margin-right: 2.0em;
    max-width: initial;
} 
```

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/eJhHM/)]]]

### 输出：

![输出](../Images/971ca65ad01ece26f5f0037b2c908222.png)

### CSS：

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

td img {
    margin-right: 2.0em;
    max-width: initial;
} 
```

### HTML：

```
<table>
    <tr>
        <td rowspan="2"><img src="http://placekitten.com/75" /></td>
        <td><h2>Title goes here</h2></td>
    </tr>
    <tr>
        <td><b>description description description description description ajdjaslkd lasdjalksjd asjdlasjdlkas asjdklasdjas jaskldja asdjlkasdsjal asjdlksa</b></td>
    </tr>
</table> 
```

# haskell - 函数的模式匹配

> ID：15439945
> 
> 赞同：2
> 
> 时间：2013-03-15T18:44:19.810
> 
> 标签：haskell, functional-programming, pattern-matching

我有一个功能，`dir_con :: (Int -> Dir)`

我想进行模式匹配以查找 dir_con 是哪个特定的构造函数。数据类型为：

```
data Dir = Define Int
         | Equals Int 
         | Data Int  
         | LCset Int
         | NoArg Int 
```

所以，dir_con 要么是Define，Equals等。它被传递给一个函数，我想像这样进行模式匹配：

```
case dir_con of
    NoArg -> Do something specific
    _     -> Do something for the rest 
```

编译器不喜欢这样。错误信息是`Couldn't match expected type 'Int -> Dir' with actual type 'Dir'`。

肯定`NoArg`是类型的构造函数`(Int -> Dir)`？Haskell 不允许这种类型的模式匹配吗？我必须这样做，因为`Dir`构造函数来自地图。有没有关于我可以如何`NoArg`区别对待的建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:02:30.163

两种方式：

```
case dir_con of
    NoArg _ -> Do something specific
    _     -> Do something for the rest 
```

您匹配的是 /value/ 而不是构造函数。

或者，用户记录语法：

```
case dir_con of
    NoArg {} -> Do something specific
    _     -> Do something for the rest 
```

这是良好的卫生习惯，因为它在字段数量方面是中性的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T19:12:05.017

您不能对函数进行模式匹配。type 的值`Dir`是通过应用几个构造函数之一来构建的，但`dir_con`它是 type 的函数`Int -> Dir`。

您可能希望在模式匹配之前应用该函数：

```
case dir_con 7 of  -- `7` is just an arbitrary value I'm passing
  NoArg _ -> ...
  _       -> ... 
```

此外，您还必须匹配`NoArg`构造函数的参数，否则在将参数添加到`dir_con`.

在您的具体情况下，您很可能不想传递文字整数，但可能是您从其他地方获得的参数：

```
myfun n = ... case dir_con n of
                NoArg _ -> ...
                _       -> ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T22:26:24.877

如果您的所有构造函数都是 type `Int -> Dir`，那么我建议与@hammar 相同：使构造函数类型为枚举：

```
data DirType = Define | Equals | Data | LCset | NoArg

data Dir = Dir DirType Int 
```

然后你可能可以重构任何需要知道它是什么构造函数来使用`DirType`那里的值。

试图确定构造函数`dir_con :: Int -> Dir`是什么的基本问题是，并非该类型的所有内容都是构造函数。例如：

```
dispatch :: Int -> Dir
dispatch 0 = Define 0
dispatch 1 = Equals 1
dispatch n = NoArg n 
```

对于“哪个构造函数”是没有好的答案`dispatch`。

如果`Dir`是参数

```
data Dir a = Define a | Equals a | Data a | LCset a | NoArg a 
```

然后有一种`Dir`构造函数；即`forall a. a -> Dir a`（您需要`{-# LANGUAGE RankNTypes #-}`扩展才能使用此类类型）。这种类型不允许`dispatch`检查其论点之类的恶作剧。因此，如果您有：

```
dir_con :: forall a. a -> Dir a 
```

然后你可以通过传递一个微不足道的值来检查它的构造函数

```
case dir_con () of
    ... 
```

即使您*实际上*只使用 a `Dir Int`，多态性也可以让您对您的类型更具描述性。

# python - Python 在 Mac OS X Lion 中自动别名

> ID：15439953
> 
> 赞同：6
> 
> 时间：2013-03-15T18:44:34.107
> 
> 标签：python, macos, python-2.7, installation

我一直在努力将 Python 2.7 设置为我系统上的默认 Python。

Python 2.6 随我的操作系统一起提供，并且我已经安装了 2.7（从源代码）并且一直在尝试将其作为我的默认版本。

有一次有人建议我尝试一个包管理器（MacPorts / Fink / Homebrew）并且我做到了，我认为这可能是个坏主意。

总的问题是，在某个地方，不知何故，每次我的 shell 启动时，Python 2.6 都会自动别名为我的默认 python。我已经浏览了我的 .profile 和 .bashrc，并且没有可以给它们起别名的命令。

我还设置了我的默认路径以`/Library/Frameworks/Python.framework/Versions/2.7/bin`首先查看。我也尝试过此[SO 帖子](https://stackoverflow.com/questions/6998545/how-can-i-make-python-2-6-my-default-in-mac-os-x-lion)和此[SU 帖子](https://superuser.com/questions/304220/how-can-i-update-the-default-python-installation-fix-my-path-on-mac-os-x-10-6-7)中的建议，但无济于事。我需要使用 2.7 作为我的默认值，因为我有依赖于 argparse 等的脚本。

此外，我的 /usr/bin/python 没有任何别名，而 /usr/local/bin 是：`/usr/local/bin/python -> ../../../Library/Frameworks/Python.framework/Versions/2.7/bin/python`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:54:54.110

> 我一直在努力将 Python 2.7 设置为我系统上的默认 Python。

已经是了。当你拿一个透明的 Lion 框，然后`python`在 shell 中键入时，它会运行`/usr/bin/python`，即 Python 2.7.2。

> 我的操作系统附带 Python 2.6

Lion 带有 2.5、2.6 和 2.7，以及隐藏的 2.3。

它们安装在`/System/Library/Frameworks/Python.framework/Versions`. 除了 2.3 之外的所有符号链接`/usr/bin/python2.x`，在一个干净的系统上，将是 PATH 上第一个具有该名称的东西，因此只需键入`python2.6`将运行 2.6，而`python2.7`将运行 2.7。

而且还有一个特殊的包装器`/usr/bin/python`默认运行 2.7，但您可以使用`VERSIONER_PYTHON_VERSION`或`com.apple.versioner.python`首选项进行配置。

> 从那以后，我已经安装了 2.7（从源代码），并一直在尝试将其作为我的默认版本。

“默认版本”是什么意思？您只是希望它成为您`python`在新的终端 shell 中键入时运行的内容，还是`#!/usr/bin/env python`在脚本中用作 shebang 行？

最简单的方法是将安装它的任何目录放在 PATH 上比 /usr/bin 更高的位置。

如果您已经安装了“框架构建”（您应该拥有），那么`/Library/Frameworks/Python.framework/Versions/2.7/bin`您可以将一个目录放在 PATH 的顶​​部。这避免了影响 /usr/local 和 /usr 的顺序，这意味着您可以使用由 Python setup.py 安装安装的任何脚本，而无需将它们符号链接到 /usr/local/bin。

这很重要，因为 Apple 的 Python 会将脚本安装到 /usr/local/bin 中——例如，如果你为你的定制 Python`/usr/bin/easy_install-2.7 pip`获得`/usr/local/bin/pip`/usr/local/bin/pip-2.7 pip`，你不需要`. If you also install`不希望它出现在同一个地方；否则，无论您最后安装的是哪个，都会替换另一个。

如果您没有安装框架构建，或者您已经将其配置为安装脚本`/usr/local/bin`，或者您*想*影响 /usr/local 的顺序，只需将其放在`/usr/local/bin`PATH 的顶​​部即可。

> 不知何故，每次我的 shell 启动时，Python 2.6 都会自动别名为我的默认 python

通过自动别名，你的意思是有一个 bash `alias`？就像你输入的那样`alias`，它会给你一个清单，包括`python`？

如果是这样，您需要解决此问题，而不是尝试在其上堆放另一个 hack 以撤消它所产生的任何影响。

如果 中没有别名命令`~/.*`，请查看`/etc/`. 如果你`grep -r alias /etc`，它会给你一个很大的列表，你将不得不跳过邮件别名和 apache 别名（可能还有一些权限被拒绝输出到 stderr），但在那之后，应该没有 shell 别名。

> 此外，我的 /usr/bin/python 没有任何别名，

这让我觉得你混淆了别名和符号链接。他们不是一回事。哪一个是问题？你必须先知道哪里出了问题，然后才能修复它。

所以，试试这个：

```
which python 
```

`/Library/Frameworks/Python.framework/Versions/2.7/bin/python`如果您的 PATH 是您所说的那样，它应该是。如果没有，你没有正确设置你的 PATH ，所以`echo $PATH`看看。

如果*是*这样，那么`ls -l /Library/Frameworks/Python.framework/Versions/2.7/bin/python`。它应该是指向`python2.7`or的符号链接`./python2.7`，而不是指向其他目录中任何内容的符号链接。如果没有，您的安装已损坏，最好的办法是卸载 Python 并正确重新安装。或者只是*不要*重新安装它，而使用 Apple 的。或者，如果您实际上需要 2.7.3 而不是 2.7.2，或者您需要构建独立的`py2app`捆绑包（特别是如果您需要它们与旧版 OS X 兼容），或者您对`sudo`系统范围的文件过敏并更喜欢是世界可写的，或者由于某些其他原因你不能使用苹果的，从 python.org 或 Homebrew 安装，而不是尝试自己做。

# eclipse - 使用 gradle 添加 Eclipse 项目方面

> ID：15439955
> 
> 赞同：2
> 
> 时间：2013-03-15T18:44:41.690
> 
> 标签：eclipse, groovy, gradle

我有一个为我设置 Eclipse 项目的 gradle 脚本。我的项目除了默认的项目外，还需要添加一个额外的项目方面。[该文档](http://www.gradle.org/docs/current/dsl/org.gradle.plugins.ide.eclipse.model.EclipseWtpFacet.html)具有以下示例

```
eclipse {
  wtp {
    facet {
      //you can add some extra wtp facets; mandatory keys: 'name', 'version':
      facet name: 'someCoolFacet', version: '1.3'
    }
  }
} 
```

我尝试使用给定的示例添加我自己的方面，但不是将方面*添加*到现有方面，它实际上替换了所有其他方面，因此是设置中的唯一方面。显然，这不是我想要的。问题是，如何向默认构面*添加*额外构面？

编辑：

我想创建一个脚本，将 eclipse 项目配置到一个文件夹，该文件夹仅包含 eclipse 项目的项目结构，但没有配置文件（.classpath、.project、.settings/）。我正在尝试将 Eclipse facet 的 Vaadin 插件添加到 Vaadin 项目中。这就是我的脚本的样子

```
subprojects {
    apply plugin: 'war'  
    apply plugin: 'eclipse-wtp'

    sourceCompatibility = 1.6  
    targetCompatibility = 1.6  
    webAppDirName = 'WebContent'  
    vaadinDir = webAppDirName+'/VAADIN'  

    eclipse {

        wtp {
            facet {         
              facet name: 'com.vaadin.integration.eclipse.core', version: '7.0'
            }
        }

    }

    // Source directories  
    sourceSets{  
        main{  
            java{  
                srcDir 'src'  
            }  
        }  
    }  

}

defaultTasks 'eclipse' 
```

这是生成的构面设置

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
    <installed facet="com.vaadin.integration.eclipse.core" version="7.0"/>
</faceted-project> 
```

在不定义任何自定义方面的情况下，生成的配置是

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
    <fixed facet="jst.java"/>
    <fixed facet="jst.web"/>
    <installed facet="jst.web" version="2.4"/>
    <installed facet="jst.java" version="6.0"/>
</faceted-project> 
```

如前所述，我是设置中的所有方面:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:44:46.450

修改默认值（而不是覆盖它们）有时会很棘手（这对 Gradle 来说不是一个容易解决的问题），但您可以尝试以下方法：

```
facet {
    facets = facets
    facet name: 'com.vaadin.integration.eclipse.core', version: '7.0'
} 
```

或者，您可以显式声明默认构面以及自定义构面。

# jquery - 如何使用 jquery mobile 创建“完成”软键

> ID：15439956
> 
> 赞同：0
> 
> 时间：2013-03-15T18:44:46.703
> 
> 标签：jquery, jquery-mobile

我有一个表格，其中有一个搜索框。点击那个我想显示一个自定义的“完成”软键，点击那个按钮，我的搜索关键字应该被提交到服务器。谁能指导我如何使用 jquery mobile 实现这些自定义软键。

# d3.js - 过滤 json 数据 D3.js

> ID：15439957
> 
> 赞同：0
> 
> 时间：2013-03-15T18:44:53.080
> 
> 标签：d3.js

我有一个折线图，其中填充了以下格式的数据：

```
 [{"id":"3",
    "testSource_id":"2",
    "dateTimeTaken":"2013-01-01  14:05:14",
    "dateTimeReceived":"2013-03-01 14:05:45",
    "reading":"0.90000",
    "testSourceLocationDescription":"Somewhere",       
    "parameter_id":"3",
    "inspectionPoint_id":"2",
    "testSourceLowerLimit":"3.000000000000000",
    "testSourceUpperLimit":"11.000000000000000",
    "testSourceLocationLongtitude":"-8.459472656250000",
    "testSourceLocationLatitude":"54.201010239738880",
    "parameterType":"Flouride",
    "unitMeasurement":"F",
    "client_id":"1"},...................... 
```

我正在尝试根据从地图上的点击事件传递的值来过滤这些数据。值 - i - 被正确传递，但由于某种原因，我的过滤器函数没有返回它应该返回的所有数据，例如返回一个包含 45 个对象的数组，什么时候应该返回 100？任何人都可以帮忙吗？

```
d3.json("Data.php", function(error,data) {  
    var data = data.filter(function(d) { return d.inspectionPoint_id == i; })
    console.log(data)

data.forEach(function(d) {
    d.inspectionPoint_id = +d.inspectionPoint_id;
    d.dateTimeTaken = parseDate(d.dateTimeTaken);
    d.reading = +d.reading;
    d.parameterType = d.parameterType;}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T07:39:13.320

d3.json 与 .php 文件兼容吗？

[https://github.com/mbostock/d3/wiki/Requests#convenience-methods](https://github.com/mbostock/d3/wiki/Requests#convenience-methods)

# c# - 实体框架延迟加载问题

> ID：15439959
> 
> 赞同：1
> 
> 时间：2013-03-15T18:44:54.717
> 
> 标签：c#, entity-framework

我喜欢在我的公司班级和我的工作单元班级内拥有我的雇主资料库。我已经尝试了下面的测试代码。从数据库重新加载数据后，我的雇主信息库为空。
我有延迟加载活动。

```
public class Company
{
    public int Id { get; set; }
    public string CompanyName { get; set; }
    public ICollection<Employee> Employers { get; set; }
}

public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string SureName { get; set; }
}   

TEST CODE :

var company = new Company();

var employee1 = new Employee();
employee.Name = "myFirst employee";

unitOfWork.companys.Add(companys);
unitOfWork.Commit();

unitOfWork.companys.Employers.Add(employee1);

uow.Commit(); 
```

如果我让这些工作，另一个问题应该是：可以为我的雇主使用我的 IObservableRepository(implements ICollection) 而不是 ICollection。我还想将所有公司的所有雇主像一个实体一样放在一起。

```
public class UnitOfWork
{
    public IObservableRepository<Company> Company { get { return GetRepo<IObservableRepository<Company>>(); } }
    public IObservableRepository<Employee> Employers { get { return GetRepo<IObservableRepository<Employee>>(); } }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:54:06.517

在我看来，您实际上还没有在代码文件中创建公司和员工之间的关系。您已经完成了 Company 部分——包括员工的集合——但您还需要在 Employee 上包含几个属性以最终确定关系：

```
public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string SureName { get; set; }

    [ForeignKey("Company"), Required]
    public int CompanyID { get; set; }

    public virtual Company Company { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:54:07.950

ProxyCreationEnabled 已禁用。感谢 IronMan84 解决了另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:25:51.637

首先让我说你的代码有点乱。`UnitOfWork`有`Company`（单数）和`Employers`（复数）。你做`unitOfWork.companys.Add`（小写）和`unitOfWork.companys.Employers.Add`（??）。还有... 一个由 s`Employers`组成的集合`Employee`？我认为这些是错别字。

因此，如果我读得很好，您可以插入 a`Company`和 an`Employee`但从不将两者联系起来。你应该有一个像这样的声明

```
company.Employees.Add(employee1); 
```

* * *

> 是否可以为我的雇主使用我的 IObservableRepository(implements ICollection) 而不是 ICollection

不，不是。EF 不会`IObservableRepository<Employee>`为您创建一个。它甚至不知道它应该首先使用哪个具体类，但它需要一个由 or 之类的集合类实现的`EntityCollection`接口。`HashSet``List`

# ruby-on-rails-3 - 获取无法将符号转换为整数的错误

> ID：15439960
> 
> 赞同：0
> 
> 时间：2013-03-15T18:44:54.673
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试将以下行传递给 find 方法

```
query = "?name=#{CGI.escape(name)}&limit=#{limit}#{offset}"

def find(opts = {},limit,offset)

      if opts[:query].nil? || opts[:query].empty?
        return Net::HTTPNotFound
      end
      path = '/'
      if opts[:query]
      path << "?#{opts[:query]}"
      path << "&limit=#{limit}" 
      path << "&offset=#{offset}" 
```

当我执行 opts [:query] 时，我似乎无法将 Symbol 转换为 Integer。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:29:45.757

The method assumes that opts is a `Hash` when it's really a `String`

One way of fixing is to call the `query_account` method like:

```
response = query_account({:query => query},limit,offset) 
```

Or change the method to work with `query` directly.

# c# - 尝试调用将引用游标返回到 C# 的 Oracle 存储函数

> ID：15439963
> 
> 赞同：0
> 
> 时间：2013-03-15T18:45:09.697
> 
> 标签：c#, oracle, function, cursor, return

我一直在努力从返回引用光标的 oracle 存储函数中获取结果集。

以下是 Oracle 存储函数的声明：

```
TYPE GetInspectorCursor IS REF CURSOR;
FUNCTION GetInspectorInformation
   (inUserID IN inspectortable.userid%type,
    inPassword IN inspectortable.password%type,
    inCompanyID IN inspectortable.cid%type,
    inSubCompanyID in inspectortable.scid%type,
    outErrorcode OUT NUMBER)
RETURN GetInspectorCursor; 
```

这是我获取结果集的 c# 程序：

```
 String connString = "DATA SOURCE=PEOPLE.WORLD;PASSWORD=password;PERSISTSEC CURITY INFO=True;USER ID=userid";

        DataSet ds;
        OracleDataAdapter myAdapter = null;
        Oracle.DataAccess.Types.OracleRefCursor refCursor = null;

        OracleConnection myCon = new OracleConnection(connString);

        String commandText = "schema.package.GetInspectorInformation";

        OracleCommand cmd = new OracleCommand(commandText, myCon);
        cmd.CommandType = CommandType.StoredProcedure;

        // inpectorID
        OracleParameter param = new OracleParameter();
        param.OracleDbType = OracleDbType.Char;
        param.Direction = ParameterDirection.Input;
        param.Value = "JOHN";
        cmd.Parameters.Add(param);

        // inspector Password
        OracleParameter param2 = new OracleParameter();
         param2.OracleDbType = OracleDbType.Char;
         param2.Direction = ParameterDirection.Input;
         param2.Value = "12345";
        cmd.Parameters.Add(param2);

        // VALUE 1
        OracleParameter param3 = new OracleParameter();
         param3.OracleDbType = OracleDbType.Char;
         param3.Direction = ParameterDirection.Input;
         param3.Value = "VA1";
        cmd.Parameters.Add(param3);

        // VALUE 2
        OracleParameter param4 = new OracleParameter();
         param4.OracleDbType = OracleDbType.Char;
         param4.Direction = ParameterDirection.Input;
         param4.Value = "VA2";
        cmd.Parameters.Add(param4);

        // outParam Error Code
        OracleParameter param5 = new OracleParameter();
         param5.OracleDbType = OracleDbType.Decimal;
         param5.Direction = ParameterDirection.Output;
         //param5.IsNullable = true;
        cmd.Parameters.Add(param5);

        OracleParameter param6 = new OracleParameter();
         param.ParameterName = "RefCursor";
         param6.OracleDbType = OracleDbType.Object;
         param6.OracleDbTypeEx = OracleDbType.RefCursor;
         param6.Direction = ParameterDirection.ReturnValue;
         ///param6.IsNullable = false;
         cmd.Parameters.Add(param6);

         myCon.Open();

         cmd.ExecuteNonQuery();

        refCursor = (Oracle.DataAccess.Types.OracleRefCursor)cmd.Parameters["RefCursor"].Value;
        myAdapter = new OracleDataAdapter("", myCon);
        ds = new DataSet("testDS");
        myAdapter.Fill(ds, refCursor);

        // Clean up
        cmd.Dispose();
        myCon.Close();
        myCon.Dispose(); 
```

在 myCon.Open() 调用中，我得到：

```
 ORA-06550: line 1, column 15:
 PLS-00306: wrong number or types of arguments in call to 'GETINSPECTORINFORMATION'
 ORA-06550: line 1, column 7:
 PL/SQL: Statement ignored 
```

有人会善意地节省一些脑细胞，然后告诉我错误传递了什么/哪个参数吗？

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:17:17.717

我不知道如何通过函数返回一个，但你可以通过一个过程返回一个 REF CURSOR。试试这个 - 它在许多项目上都对我有用：

首先，将函数更改为过程：

```
PROCEDURE GetInspectorInformation
   (inUserID IN inspectortable.userid%type,
    inPassword IN inspectortable.password%type,
    inCompanyID IN inspectortable.cid%type,
    inSubCompanyID in inspectortable.scid%type,
    outErrorcode OUT NUMBER,
    retCursor getInspectorCursor OUT); 
```

然后在你的 C# 代码中，改变这个......

```
param6.Direction = ParameterDirection.ReturnValue; 
```

……到这……

```
param6.Direction = ParameterDirection.Output; 
```

然后通过替换`myCon.Open()`以以下内容开头的所有内容来填充数据集：

```
ds = new DataSet("testDS");
new OracleDataAdapter(cmd).Fill(ds); 
```

如果您对此有疑问，请注意，每当我这样做时，我的代码与您发布的代码有以下不同：

*   参考光标一直是*唯一* `OUT`的参数
*   ref 游标是通用的`SYS_REFCURSOR`
*   `adapter.Fill`已经到数据集中的一个数据表（`new OracleDataAdapter(cmd).Fill(ds.myTableName)`

因此，您可能仍需要进行一些实验，但正如我所说，这对我之前有用。

# haskell - 何时/为什么在 TVar 上使用 MVar

> ID：15439966
> 
> 赞同：40
> 
> 时间：2013-03-15T18:45:26.077
> 
> 标签：haskell, shared-memory, stm

我发现 TVar 很容易使用，尽管 MVar 看起来更简单一些，而 TVar 更有特色。

所以我的问题很简单，我想去 MVar 而不是 TVar 的条件是什么？我想任何时候我不需要事务更新我**都可以**使用 MVar，但这对我有什么好处？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-15T19:06:11.200

**MVar**

*   可以为空
*   用于实现线程之间的同步模式
*   允许线程之间的单向通信
*   可能比`TVar`某些情况下更快

**电视柜**

*   不能**为**空
*   原子事务
*   线程之间的“共享内存”；可用于实现，例如，一个查找缓存，多个线程可以从中读取/写入
*   访问是事务日志中操作次数的线性时间
*   如果有许多较短的事务，长时间运行的事务很容易受到饥饿，从而阻止它们成功提交

**IORef**

*   可变指针类引用
*   通常用于破坏性`IO`写入/更新
*   具有原子 CAS 操作，但复杂的事务逻辑更适合`TVar`

`MVar`对于何时使用or并没有真正的硬性规定`TVar`。如果我要保护的资源将永远“丢失”（而不是空的，考虑`Nothing`vs `Just mempty`），那么`MVar`通常是最有意义的。如果我需要对资源执行原子修改块，那么`TVar`是最合适的。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-15T19:00:34.363

TVar 更安全但速度较慢。

MVar 可能会死锁，但效率要高得多。

更有效的仍然是`IORef`and `atomicModifyIORef`(CAS)，但是你可以用它做什么受到了很大的限制。

这实际上是一种安全而不是性能的权衡。TVars是完全通用的，非常安全。其他一切都不那么重要，而且规模越来越小。

# objective-c - 有没有办法替换默认的 X11 菜单栏？

> ID：15439970
> 
> 赞同：5
> 
> 时间：2013-03-15T18:45:40.807
> 
> 标签：objective-c, cocoa, x11

我有一个适用于 Mac OS X 10.5 及更高版本的 X11 应用程序，我正在尝试围绕它编写一个包装器，以赋予它更原生的感觉。
有谁知道是否可以用我自己的自定义菜单栏替换默认的 X11 菜单栏，以便在应用程序窗口打开时显示它？如果是这样，我将如何使用 Cocoa 来做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:53:40.060

简而言之：没有。X11 不允许你修改它的菜单栏。这将是困难的，因为首先没有 X 调用来设置菜单栏（由工具包提供），而且还因为 Apple 希望区分原生应用程序和使用 X11 作为“黑客”解决方案以提供 Mac 兼容性的应用程序。

为此，您需要修改 X11.app/XQuartz.app 的源代码并自己添加此功能。但请记住，除非您小心，否则您的解决方案将无法在其他 X 服务器上运行，因为 X 不提供菜单栏功能。

有关 Mac 的 X 服务器源代码的信息，请参见[此处](http://xquartz.macosforge.org/trac/wiki/Releases)。

# html - 如何保持 2 个固定 div 的位置相同？

> ID：15439972
> 
> 赞同：0
> 
> 时间：2013-03-15T18:45:49.907
> 
> 标签：html, css

我正在尝试创建两个`divs`定位为`fixed`并设置`left`和`bottom`值

```
<div id='div1'>test1</div>
<div id='div2'>test2</div> 
```

我希望这些 div 排列在中心

```
_________________________________________

              ____    ____
             |____|  |____|

_________________________________________ 
```

我的CSS如下

```
div#div1{
    position: fixed;
    display: block;
    bottom: 48px;
    left: 35%;
    width: 200px;
    height: 300px;
    background-color:grey;
    background-repeat: repeat-x;
    text-align: center;
    z-index: 500;
}
div#div2{
    position: fixed;
    display: block;
    bottom: 48px;
    left: 55%;
    width: 200px;
    height: 300px;
    background-color:grey;
    background-repeat: repeat-x;
    text-align: center;
    z-index: 500;
} 
```

我还需要这些`fixed`位置，因为即使用户滚动，我也希望它们保持在同一个位置。

`left`我的问题是，`div`如果我更改浏览器宽度或更改为不同的屏幕，我无法保持相同的距离。

所以它可能就像

```
___________________________________

        ____      ____
       |____|    |____|

___________________________________ 
```

如果我有一个较小的屏幕。

谁能帮我解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:55:47.903

你可以试试这个：

```
<div class="wrapper">
  <div id="div1"></div>
  <div id="div2"></div>
</div> 
```

和CSS：

```
 .wrapper{
  margin:0 auto;
  position:fixed;
  left:50%;
  margin-left:-250px;
  bottom:48px;
  width:500px;
}

div#div1{
 float:left;
 display: block;
 width: 200px;
 height: 300px;
 background-color:grey;
 background-repeat: repeat-x;
 text-align: center;
 z-index: 500;
}

div#div2{
 float:right;
 width: 200px;
 height: 300px;
 background-color:grey;
 background-repeat: repeat-x;
 text-align: center;
 z-index: 500;
} 
```

# android - 使用多个系列的不同颜色条

> ID：15439976
> 
> 赞同：6
> 
> 时间：2013-03-15T18:45:53.517
> 
> 标签：android, eclipse, achartengine

我对 Android 完全陌生，我正在尝试使用 AChartEngine 创建一个条形图，它有 3 个条形图，每个条形图应该是不同的颜色。我尝试使用多个系列，但无法使我的 x 轴值与条形对齐

```
protected void onResume() {
    super.onResume();
     layout = (LinearLayout) findViewById(R.id.chart);
     if (mChartView == null) 
     {
             PeakSeries = new XYSeries("Income");
             ForecastPeakSeries = new XYSeries("Expense");
             ForecastSeries = new XYSeries("Expense");

            int[] x = { 1,2,3};
            int income = 2000;
            int expense =  2700;
            System.out.println("Here");
            Series1.add(x[0],income);
            Series2.add(x[1],expense);
            Series3.add(x[2],expense);

            // Creating a dataset to hold each series
            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

            dataset.addSeries(Series1);
            dataset.addSeries(Series2);
            dataset.addSeries(Series3);

            XYSeriesRenderer Renderer1 = new XYSeriesRenderer();
            Renderer1 .setColor(Color.RED);
            Renderer1 .setChartValuesTextSize(18);
            Renderer1 .setFillPoints(true);
            Renderer1 .setDisplayChartValues(true);

            // Creating XYSeriesRenderer to customize expenseSeries
            XYSeriesRenderer Renderer2 = new XYSeriesRenderer();
            Renderer2 .setColor(Color.YELLOW);
            Renderer2 .setChartValuesTextSize(18);
            Renderer2 .setDisplayChartValues(true);

            XYSeriesRenderer Renderer3 = new XYSeriesRenderer();
            Renderer3 .setColor(Color.CYAN);
            Renderer3 .setChartValuesTextSize(18);
            Renderer3 .setFillPoints(true);
            Renderer3 .setChartValuesTextAlign(Align.CENTER);
            Renderer3 .setDisplayChartValues(true);

            // Creating a XYMultipleSeriesRenderer to customize the whole chart
                double[] range = {0,5,0,5};
            multiRenderer.setMargins(new int[] {50, 50, 50, 50});
            multiRenderer.setAxisTitleTextSize(16);
            multiRenderer.setChartTitleTextSize(30);
            multiRenderer.setLabelsTextSize(15);
            multiRenderer.setLegendTextSize(20);
            multiRenderer.setLegendHeight(40);
            multiRenderer.setBarSpacing(-0.7);
            multiRenderer.setAxesColor(Color.WHITE);
            multiRenderer.setInitialRange(range, 1);
            multiRenderer.setXAxisMin(0.4);
            multiRenderer.setXAxisMax(4);
            multiRenderer.setYAxisMax(5000);
            multiRenderer.setYAxisMin(0);
            multiRenderer.setXLabelsAlign(Align.RIGHT);
            multiRenderer.setYLabelsAlign(Align.RIGHT);
            //multiRenderer.s(Align.LEFT);
            multiRenderer.setPanEnabled(false, false);
            multiRenderer.setZoomEnabled(true, true);

            multiRenderer.setChartTitle("7 Day Outlook - Maxiumum Demand");
            multiRenderer.setXTitle("Date");
            multiRenderer.setYTitle("MW");

            multiRenderer.addSeriesRenderer(Renderer1 );
            multiRenderer.addSeriesRenderer(Renderer2 );
            multiRenderer.addSeriesRenderer(Renderer3 );

            final GraphicalView mChartView = ChartFactory.getBarChartView(TestSevenDay1.this, dataset, multiRenderer,Type.DEFAULT);
            layout.addView(mChartView);

     }
     else
     {
         mChartView.repaint();
     }
} 
```

任何帮助是极大的赞赏。 ![在此处输入图像描述](../Images/11d76abf51ddd3e9e6fb4019a9df75f6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T19:36:10.007

我`Type`通过`Type.Default`在. `Type.Stacked`_`getBarChartView`

```
ChartFactory.getBarChartView(TestSevenDay1.this, dataset, multiRenderer, Type.STACKED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:10:36.067

当您的条形图每个系列只有一个项目时，最好不要`renderer.setBarSpacing()`使用`renderer.setBarWidth()`而是使用。

# jsf - 清除级联下拉菜单的值

> ID：15439992
> 
> 赞同：0
> 
> 时间：2013-03-15T18:46:58.240
> 
> 标签：jsf, primefaces

我正在开发一个 JSF 2.0 应用程序，其中有一个带有 4 个级联下拉列表的 xhtml 页面。下拉列表是根据一些查询从数据库中填充的。效果很好！现在，我需要在完成选择后清除/重置这些下拉菜单。当我第二次来到这个页面时，下拉菜单仍然被填充。如果我从第一个下拉列表中选择，则第二个下拉列表会刷新，但不会刷新第三个和第四个。其中的数据仍然完好无损。这是我正在使用的代码。我这里只显示 3 个下拉菜单，第四个类似。任何帮助/建议表示赞赏。

```
<label class="control-label">Dropdown1</label>
<div>
<h:selectOneMenu id="drop1" value="#{myBean.aId}">
    <f:selectItem itemLabel="Select" itemValue="" />
    <f:selectItems value="#{myBean.aList}" var ="a"
                    itemLabel="#{a.name}"
                    itemValue="#{a.id}" />

    <p:ajax update="drop2" listener="#{myBean.populateDrop2}" />  

</h:selectOneMenu>
</div>         

<label class="control-label">Dropdown2</label>
<div>
<h:selectOneMenu id="drop2" value="#{myBean.bId}">
    <f:selectItem itemLabel="Select" itemValue="" />
    <f:selectItems value="#{myBean.bList}" var ="b"
                    itemLabel="#{b.name}"
                    itemValue="#{b.id}" />

    <p:ajax update="drop3" listener="#{myBean.populateDrop3}" />  

</h:selectOneMenu>
</div>   

<label class="control-label">Dropdown3</label>
<div>
<h:selectOneMenu id="drop3" value="#{myBean.cId}">
    <f:selectItem itemLabel="Select" itemValue="" />
    <f:selectItems value="#{myBean.cList}" var ="c"
                    itemLabel="#{c.name}"
                    itemValue="#{c.id}" />
</h:selectOneMenu>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:54:50.433

如果您的 bean 在会话范围内，或者您在同一视图上通过回发导航，则会发生这种情况。只需将 bean 放在视图范围内并通过 GET 请求进行导航。只要您通过回发与同一个视图交互，视图范围 bean 就存在，并且 GET 请求将有效地创建一个全新的视图范围 bean。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)
*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink/4317723#4317723)