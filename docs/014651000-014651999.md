# StackOverflow 问答 14651000-14651999

# c# - DataTable 没有得到请求的数据

> ID：14651000
> 
> 赞同：0
> 
> 时间：2013-02-01T16:42:23.820
> 
> 标签：c#, sql, winforms, datatable, sqlcommand

我在 SQL Server Management Studio 中运行了 SQL Query，它工作正常。

我在 WinForm C# 应用程序中收到以下错误

```
The parameterized query '(@word1 text)SELECT distinct [database].[dbo].[tableName].[n' expects the parameter '@word1', which was not supplied. 
```

这是我的代码

```
 private void buttonRunQuery_Click(object sender, EventArgs e)
     {
         if (connection == null)
         {
             connection = ConnectionStateToSQLServer();
             SqlCommand command = new SqlCommand(null, connection);
             command = createSQLQuery(command);
             GetData(command);
         }
         else
         {
             SqlCommand command = new SqlCommand(null, connection);
             command = createSQLQuery(command);
             GetData(command);
         }
     }

    private SqlCommand createSQLQuery(SqlCommand command)
     {
         string[] allTheseWords;
         if (textBoxAllTheseWords.Text.Length > 0)
         {
             allTheseWords = textBoxAllTheseWords.Text.Split(' ');
             string SQLQuery = "SELECT distinct [database].[dbo].[customerTable].[name], [database].[dbo].[customerTable].[dos], [database].[dbo].[customerTable].[accountID], [database].[dbo].[reportTable].[customerID], [database].[dbo].[reportTable].[accountID], [database].[dbo].[reportTable].[fullreport] FROM [database].[dbo].[reportTable], [database].[dbo].[customerTable] WHERE ";
             int i = 1;
             foreach (string word in allTheseWords)
             {
                 var name = "@word" + (i++).ToString();
                 command.Parameters.Add(name, SqlDbType.Text);
                     //(name, SqlDbType.Text).Value = word;
                 SQLQuery = SQLQuery + String.Format(" [database].[dbo].[reportTable].[fullreport] LIKE {0} AND ", name);
             }
             SQLQuery = SQLQuery + " [database].[dbo].[customerTable].[accountID] = [database].[dbo].[reportTable].[accountID]";
             command.CommandText = SQLQuery;
         }
         MessageBox.Show(command.CommandText.ToString());
         return command;
     }

    public DataTable GetData(SqlCommand cmd)
     {
         //SqlConnection con = new SqlConnection(connString);
         //SqlCommand cmd = new SqlCommand(sqlcmdString, cn);
         SqlDataAdapter da = new SqlDataAdapter(cmd);
         connection.Open();
         DataTable dt = new DataTable();
         da.Fill(dt);
         connection.Close();
         return dt;
     } 
```

错误发生在 da.Fill(dt)

任何的意见都将会有帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:45:41.697

在 var name = "@word" + (i++).ToString(); 仅使用 i，在其他地方增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:52:27.327

在您的示例中，您已注释掉设置参数值的行：

```
command.Parameters.Add(name, SqlDbType.Text);
//(name, SqlDbType.Text).Value = word; 
```

如果您没有为参数设置值，它将被忽略（并且不存在）。改成这样：

```
command.Parameters.AddWithValue(name, word); 
```

为清楚起见，请考虑以下引用：

> 要添加的值。使用 DBNull.Value 代替 null，以指示空值。

从这里开始：[SqlParameterCollection.AddWithValue 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

# php - 在 Zend Framework 2 中使用 ZendPdf

> ID：14651001
> 
> 赞同：2
> 
> 时间：2013-02-01T16:42:24.810
> 
> 标签：php, zend-framework2

我正试图围绕 zend 框架 2 和它的模块系统。我在入门指南中的骨架应用程序工作。我现在想使用 ZendPdf 加载现有的 pdf 文件并使用它。到目前为止，我已经完成了以下工作：

*   使用作曲家下载并安装 ZendPdf 到我的骨架应用程序
*   将 ZendPdf 添加到我的 application_config.php
*   添加了一个简单的控制器操作来创建一个新的 ZendPdf 类并加载到一个文档中
*   我还为控制器操作创建了一个视图。

每当我在控制器中调用操作时，我都会收到以下错误

```
Fatal error: Uncaught exception 'Zend\ModuleManager\Exception\RuntimeException' with message 'Module (ZendPdf) could not be initialized 
```

显然，从错误中，我需要将 zendpdf 添加到 module_config.php 以便 ModuleManager 可以拾取它。这是我迷路了。我不知道如何在配置文件中配置zendpdf。这是我到目前为止所拥有的：

**相册模块中的**module.config****

 **```
return array(
'controllers' => array(
    'invokables' => array(
        'Album\Controller\Album' => 'Album\Controller\AlbumController',
    ),
),
// Routes for 
'router' => array(
    'routes' => array(
        'album' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
),
'view_manager' => array(
    'template_path_stack' => array(
        'album' => __DIR__ . '/../view',
    ),
),
'zendpdf' => array() /* what to do here */
); 
```

这是我的**AlbumController中的控制器操作**

```
public function viewPdfAction()
{
  $pdf = ZendPdf::load('/tmp/pdf_report.pdf');
} 
```

这是**application.config**

```
<?php
   return array(
     'modules' => array(
       'Application',
       'Album',
       'AlbumRest',
       'ZendPdf'
     ),
     'module_listener_options' => array(
        'config_glob_paths'    => array(
        'config/autoload/{,*.}{global,local}.php',
     ),
      'module_paths' => array(
          './module',
          './vendor',
     ),
  ),
); 
```

我一直在阅读文档，但只是不明白。我需要朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:55:01.793

Using clues from Andy this is what I found that worked.

Install ZendPdf via composer. Using composer will make ZF2 automatically auto-the library. below is the composer.json file that I used

```
{
    "repositories": [
      {
        "type": "composer",
        "url": "http://packages.zendframework.com/"
      }
    ],
    "name": "zendframework/skeleton-application",
    "description": "Skeleton Application for ZF2",
    "license": "BSD-3-Clause",
    "keywords": [
        "framework",
        "zf2"
    ],
    "homepage": "http://framework.zend.com/",
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*",
        "zendframework/zendpdf": "*"
    }
} 
```

In your controller import the ZendPdf namespace

```
use ZendPdf\PdfDocument; 
```

Then somewhere in a Controller action create a new pdf object and work with it

```
public funciton someAction()
{
     $pdf = PdfDocument::load('path/to/pdf');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:02:45.383

我假设您使用的是[这个](https://github.com/zendframework/ZendPdf)？在这种情况下，它不是一个模块，而是一个*库*，这可以解释为什么你不能将它作为一个模块加载。如果您使用 Composer 安装它，那么您应该能够在您的`vendor`目录中找到它，并且它应该是自动加载的。然后，您应该能够像使用 Zend Framework 中的所有类一样使用它，方法是使用适当的名称空间。我自己没有使用过这个，但我认为这是你做错了。**

# iphone - iOS TabBar 图标设计与技巧和实现：如何？

> ID：14651002
> 
> 赞同：2
> 
> 时间：2013-02-01T16:42:28.243
> 
> 标签：iphone, ios, ipad, tabbar

我的设计师希望标签栏图标类似于 fitbit 应用程序中的图标：[https ://itunes.apple.com/us/app/fitbit/id462638897?mt=8](https://itunes.apple.com/us/app/fitbit/id462638897?mt=8)

查找这些提示是如何完成的？

设计师一定要这样设计吗？

还是在代码中完成？

非常感谢您的见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:01:16.483

这是一个示例： http: [//www.cocoacontrols.com/platforms/ios/controls/bctabbarcontroller](http://www.cocoacontrols.com/platforms/ios/controls/bctabbarcontroller)

巨大的来源：[http ://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar)

# html - 使背景图像粘在页面底部

> ID：14651007
> 
> 赞同：0
> 
> 时间：2013-02-01T16:42:44.880
> 
> 标签：html, css

在[这个网站](http://festivals.ie)上，页脚中有一个背景图片，应该贴在页面底部。我不是指页面的可见部分，而是页面的最底部。然而，在内容很短的页面上——[比如这个](http://festivals.ie/artist/list?name=X)——它出现在底部上方的一段距离上。

我目前使用的 CSS 是：

```
html {
  background: url(../images/responsive/bg.svg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  outline:0!important;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:46:52.593

您要求做的是更符合“粘性页脚”的概念。[示例](http://ryanfait.com/sticky-footer/)和[教程](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-02-01T16:46:53.237

如何使用 float 属性：

```
float: bottom; 
```

# virtualization - VHD (Virtual PC) - 如何强制启动而不考虑更改的 VHD

> ID：14651012
> 
> 赞同：0
> 
> 时间：2013-02-01T16:42:52.567
> 
> 标签：virtualization, virtual-pc, vhd

我正在使用虚拟机来自动执行基于服务器的产品的集成测试。

我在开发人员机器上使用“Windows XP 模式和虚拟 PC”。

我正在使用 PowerShell 做所有事情。我希望：

1.  挂载 VHD（磁盘部分）

2.  将发布包复制到 VHD 文件系统

3.  卸载 VHD（磁盘部分，再次）

4.  启动虚拟机

只要我不这样做，一切都很好 2\. 如果我完全更改 VHD 文件系统，那么 4\. 会静默失败。

如果我然后转到主机上的虚拟机并使用 GUI 启动 VM，我会收到警告：

```
"Inconsistency in virtual hard disk time stamp detected"
"The virtual hard disk's parent appears to have been modified" 
```

我怀疑这里有一个安全功能（会有意义）。但在我的情况下，这个功能是不可取的。

任何人都知道如何在我卸载 VHD（之前？）之后禁用时间戳检查或设置时间戳......？

编辑：查看 Startup2() 选项...方法采用一个参数，其中一个参数表示：

```
vmStartupOption_FixParentTimestampMismatch  = 1 
```

...来自： [微软方法细节](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd796774%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:53:51.923

根据我的编辑 - 有一个 Startup2() 方法，它接受一个表示忽略时间戳的参数。

# android - 如何在代码中选择列表视图中的第一项（使用 baseadapter）以更改其背景

> ID：14651021
> 
> 赞同：1
> 
> 时间：2013-02-01T16:43:25.747
> 
> 标签：android, android-listview, onclicklistener, baseadapter

我有一个带有 baseadapter 的菜单列表视图。

我的活动：

```
listView_menu = (ListView) findViewById(R.id.listView_menu);
model_category = new Model_Category(context);
listView_menu.setAdapter(new BaseAdapter_Menu(context, model_category.GetAllDifferentCategory()));
listView_menu.setOnItemClickListener(new OnItemClickListener() 
    {
        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3)
        {
            view.setSelected(true);
        }
    });
listView_menu.setSelection(0); 
```

我的 BaseAdapter_Menu 的 getView 方法（扩展 BaseAdapter）：

```
@Override
public View             getView(int position, View convertView, ViewGroup parent)
{
    View                rowView = convertView;

    if (rowView == null)
    {
        rowView = this.inflater.inflate(R.layout.customitemlistview_menu, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.category = (TextView) rowView.findViewById(R.id.category_menu);
        rowView.setTag(viewHolder);
    }
    ViewHolder holder = (ViewHolder)rowView.getTag();
    holder.category.setText(this.data.get(position));
    return (rowView);
} 
```

每个项目都有一个背景选择器，根据其状态（SELECTED 或 NOT）有 2 个不同的背景。

当我单击列表视图中的某个项目时，我设置为我的视图`item.setSelected("true")`。

因此，当我单击时，项目的背景会发生变化，但是如何在不单击的情况下更改列表视图的第一项的背景。我已经尝试过“listView_menu.setSelection(0)”，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:22:29.350

我找到了解决方案！:)

在我的 onCreate 中，我应用了这段代码：

```
listView_menu.setAdapter(new BaseAdapter_Menu(context, model_category.GetAllDifferentCategory()));
    listView_menu.setOnItemClickListener(new OnItemClickListener() 
    {
        @Override
        public void onItemClick(AdapterView<?> listView, View view, int position, long id)
        {
            ((BaseAdapter_Menu) listView_menu.getAdapter()).setPositionSelected(position);
        }
    }); 
```

在我的 BaseAdater_Menu ：

我创造`private int PositionSelected = 0;`

我添加了这个方法

```
public void setPositionSelected(int position)
{
    PositionSelected = position;
    this.notifyDataSetChanged();
} 
```

我覆盖了 getView 方法

```
public View getView(int position, View convertView, ViewGroup parent)
{
    View rowView = convertView;

    if (rowView == null)
    {
        rowView = this.inflater.inflate(R.layout.customitemlistview_menu, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.category = (TextView) rowView.findViewById(R.id.category_menu);
        rowView.setTag(viewHolder);
    }
    ViewHolder holder = (ViewHolder)rowView.getTag();
    holder.category.setText(this.data.get(position));
    if (position == PositionSelected)
        rowView.setBackgroundResource(R.drawable.item_menu_selected_background);
    else
        rowView.setBackgroundResource(R.drawable.item_menu_background);
    return (rowView);
} 
```

谢谢您的帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:38:00.260

编辑：

它是一种解决方法，但我认为它有效：保存 FisrtTime 的变量，它将在创建后立即选择视图（在 BaseAdapter_Menu 上）

```
public BaseAdapter_Menu(...){
    ....
    mFirstTime = true;
    ....
}

public getView(int position, ...){
    .... // create your view

    if (mFirstTime && position == 0){
         mFirstTime = false;
         rootView.setSelected(true);
    }

    ... //Setup your view
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:34:37.463

**res/layout-v11/cell.xml**

如果您以后只需要开发 API 级别 11 的应用程序，您所要做的就是编写如下 xml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="?android:attr/activatedBackgroundIndicator"
    android:orientation="vertical">
    <TextView 
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    <TextView 
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

**资源/布局/cell.xml**

但是，在 API 级别 <= 10 中，上述代码会崩溃。所以它需要像以下......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <TextView 
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    <TextView 
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

**DataListCursorAdapter.java**

其次，需要通知您的适配器分配数据。//...(a)

```
class DataListCursorAdapter extends CursorAdapter {
    private Listener mListener;
    public static class ViewHolder {
        public TextView name;
        public TextView text;
    }
    @SuppressWarnings("deprecation")
    public DataListCursorAdapter(Context context, Cursor c, Listener listener) {
        super(context, c);
        mListener = listener;
    }
    public DataListCursorAdapter(Context context, Cursor c, Listener listener, boolean autoRequery) {
        super(context, c, false);
        mListener = listener;
    }
    public DataListCursorAdapter(Context context, Cursor c, Listener listener, int flags) {
        super(context, c, FLAG_REGISTER_CONTENT_OBSERVER);
        mListener = listener;
    }
    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        try {
            ViewHolder holder = (ViewHolder) view.getTag();
            JSONObject json = new JSONObject(cursor.getString(cursor.getColumnIndex(Table.DATA)));
            final Data data = new Data(json);
            mListener.onDataAssigned(data, view);//...(a)

            holder.name.setText(data.name);
            holder.text.setText(data.text);
        }
        catch (JSONException e) {
        }
    }
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.cell, null);
        ViewHolder holder = new ViewHolder();
        holder.name      = (TextView) view.findViewById(R.id.name);
        holder.text      = (TextView) view.findViewById(R.id.text);
        view.setTag(holder);
        return view;
    }
    public interface Listener {
        public void onDataAssigned(Data data, View view);//...(a)
    }
} 
```

**YourFragment.java 或 YourActivity.java**

您实现接口并...

```
@Override
public void onDataAssigned(Data data, View view) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        return;
    }
    if (TextUtils.equals(mLastSelectedDataId, data.id)) {// default color
        view.setBackgroundColor(0xfff7aecb);
    }
    else {// selected color
        view.setBackgroundColor(0x00000000);
    }
} 
```

您将所选项目保留在班级的字段中。

```
@Override
public void onItemClick(AdapterView<?> listView, View view, int position, long id) {
    Cursor cursor = mArrayCursorAdapter.getCursor();
    JSONObject json = new JSONObject(cursor.getString(cursor.getColumnIndex(Table.DATA)));
    final Data data = new Data(json);
    if (data != null && TextUtils.equals(mLastSelectedDataId, data.id)) {
        getListView().setItemChecked(position, false);
        mLastSelectedDataId = null;
    }
    else if (data != null) {
        getListView().setItemChecked(position, true);
        mLastSelectedDataId = data.id;
    }
} 
```

**重要的**

*   在列表视图上，项目视图的数量不是项目的数量。
*   已更改颜色的选定视图被重新用于其他数据。

**更新**

```
public class YourAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    private Listener mListener;
    private Model_Category mData;

    static class ViewHolder {
        TextView category;
    }
    public YourAdapter(Context context, Model_Category data, LayoutInflater inflater, Listener listener) {
        mInflater = inflater;
        mListener = listener;
        mData = data;
    }
    @Override
    public int getCount() {
        return /*return count*/;
    }
    @Override
    public Object getItem(int position) {
        return /*return item by position*/;
    }
    @Override
    public long getItemId(int position) {
        return /*return id by position*/;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        int type = getItemViewType(position);
        if (convertView == null){
            holder = new ViewHolder();
            convertView = mInflater.inflate(R.layout.customitemlistview_menu, null);
            holder.category = (TextView) convertView.findViewById(R.id.category_menu);
            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }
        mListener.onDataAssigned(mData.get(position), convertView);//...(a)
        holder.category.setText(mData.get(position));
        return convertView;
    }
    public interface Listener {
        public void onDataAssigned(Data data, View view);//...(a)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:46:35.607

`getView()`在您的方法中添加此代码：

```
if(position == 0) {
   rowView.setClickable(true);
   rowView.setSelected(true);
} 
```

**编辑 ：**

你`Activity`应该实现`OnItemClickListener`这样的：

```
public class YourActivity extends Activity implements OnItemClickListener { 
```

`onCreate()`在你的方法中试试这个：

```
//after setting the onItemClickListener to your listView : 
listView_menu.setOnItemClickListener(this);
listView_menu.setSelection(0);
View firstView = listView_menu.getChildAt(0);
onItemClick(listView_menu, firstView, 0, -1); 
```

并将方法提取`onItemClick()`到您的活动中：

```
@Override
public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3) {
     view.setSelected(true);
} 
```

# c# - 如何使用 WatiN 访问 iframe 中的控件？

> ID：14651024
> 
> 赞同：4
> 
> 时间：2013-02-01T16:43:31.227
> 
> 标签：c#, dom, iframe, dynamic, watin

我正在尝试使用`WatiN`C# 访问 iframe 中的复选框。

文档建议使用这个：

`var frame = browser.Frame(frameId);`

但是，我尝试过这种格式，如下所示：

```
var edUsrFrame = browser.Frame(Find.ByName ("ctl00_ContentPlaceHolder1_WindowManager1359542712913")); 
```

但是，我不知道如何访问嵌套在该框架上的元素（复选框）。

iframe 使用动态名称的问题是什么？我试过直接访问复选框，但同样没有成功。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:49:09.473

当您想要访问框架内的项目时，您就像对待“顶级”浏览器一样对待框架。

要单击复选框：

```
var myFrame = browser.Frame(Find.bywhatever());  //Gets the frame
myFrame.CheckBox(Find.ByName("checkboxnamehere")).Click(); 
```

或者更简单地说：

```
browser.Frame(Find.Bywhatever(...)).CheckBox(Find.ByWhatever(...)).Click(); 
```

如果框架使用的动态名称在每次页面加载时都会发生变化，而不是按名称查找，而是通过正则表达式或索引查找，或者通过简洁地标识该框架的东西来查找。底线：如果名称将页面加载更改为页面加载，则不能使用名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:54:06.997

browser.Frame(Find.ByName("ctl00_ContentPlaceHolder1_WindowManager1359542712913")).CheckBox(Find.ById("abc")).Click();

# python - 如何判断一个整数是偶数还是奇数

> ID：14651025
> 
> 赞同：-5
> 
> 时间：2013-02-01T16:43:40.887
> 
> 标签：python

```
def is_odd(num):
    # Return True or False, depending on if the input number is odd. 
    # Odd numbers are 1, 3, 5, 7, and so on. 
    # Even numbers are 0, 2, 4, 6, and so on. 
```

我想知道你会怎么做才能得到这些答案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-01T16:46:50.673

```
def is_odd(num):
    return num & 0x1 
```

它不是最易读的，但它很快：

```
In [11]: %timeit is_odd(123443112344312)
10000000 loops, best of 3: 164 ns per loop 
```

相对

```
def is_odd2(num):
   return num % 2 != 0

In [10]: %timeit is_odd2(123443112344312)
1000000 loops, best of 3: 267 ns per loop 
```

或者，使返回值与`is_odd`：

```
def is_odd3(num):
   return num % 2

In [21]: %timeit is_odd3(123443112344312)
1000000 loops, best of 3: 205 ns per loop 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T16:45:21.337

```
def is_odd(num):
   return num % 2 != 0 
```

符号“%”被称为模并返回一个数字除以另一个数字的余数。

# sql - 如何选择按日期排序的具有不同列值的行？

> ID：14651026
> 
> 赞同：3
> 
> 时间：2013-02-01T16:43:41.867
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有这张桌子：

```
create table #tmp
(
  column1 varchar(3),
  column2 varchar(5),
  column3 datetime,
  column4 int
)

insert into #tmp values ('AAA', 'SKA', '2013-02-01 00:00:00', 10)
insert into #tmp values ('AAA', 'SKA', '2013-01-31 00:00:00', 15)
insert into #tmp values ('AAA', 'SKB', '2013-01-31 00:00:00', 20)
insert into #tmp values ('AAA', 'SKB', '2013-01-15 00:00:00', 5)
insert into #tmp values ('AAA', 'SKC', '2013-02-01 00:00:00', 25) 
```

我想选择具有不同column2 的行，按column3 排序。这是期望的结果：

```
Col1  Col2   Col3                       Col4
AAA   SKB    2013-01-15 00:00:00.000    5
AAA   SKA    2013-01-31 00:00:00.000    15
AAA   SKC    2013-02-01 00:00:00.000    25 
```

我怎样才能做到这一点？
我正在使用 MS SQL 2005 和 2008

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:58:45.887

试试这个

```
;with cte as 
(
  select *, 
  row_number() over (partition by column1, column2 
             order by column3) rnk
  from #tmp

) select * from cte where rnk = 1
  order by column3; 
```

[SQL 演示在这里](http://sqlfiddle.com/#!3/1a5a9/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:47:13.910

这应该做

```
http://sqlfiddle.com/#!3/d3dad/11

select * from
(
select max(column1) as column1, column2 as column2, max(column3) as column3, 
  max(column4) as column4
from #tmp
group by column2
) a
order by column3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:48:06.020

这取决于你想要什么。您必须处理其他列。

从那个确切的数据，得到那个确切的结果：

```
select column1, column2, min(column3), min(column4)
from #tmp
group by column1, column2 
```

但是，一般来说，column3 的值可能来自与 column4 值不同的记录，并且如 SQL 中所写，如果您有多个 column1 值具有相同的 column2 值，您将获得多个具有相同 column2 的结果.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T17:01:09.657

```
SELECT t.column1, t.column2, t.column3, t.column4
FROM @tmp t
INNER JOIN (SELECT DISTINCT column2, MIN(column3) [column3] FROM @tmp GROUP BY column2) v
    ON t.column2 = v.column2 AND t.column3 = v.column3
ORDER BY t.column3 
```

这将获得具有最旧 column3 的唯一 column2，并通过按 column3 排序的结果过滤表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T17:18:22.797

我认为`row_number()`更好（[Sql-Demo](http://sqlfiddle.com/#!3/4d359/6)）

```
select column1, column2, column3, column4 
from (
  select column1, column2, column3, column4, 
         row_number() over (partition by column2 order by column3) rn
  from #tmp ) A
where rn=1
order by column3 
```

# android - 谷歌是否提供了滑动抽屉小部件？

> ID：14651027
> 
> 赞同：0
> 
> 时间：2013-02-01T16:43:42.743
> 
> 标签：android

Android 版 YouTube 应用有一个滑动抽屉。这是SDK提供的小部件吗？似乎有一堆开源的，但它们都以不同的方式表现。谷歌是否提供了“官方”版本？

![在此处输入图像描述](../Images/b88026c97d3b498f6e4e659be9c711dc.png)

有一个 SlidingDrawer 小部件类，但它已被弃用（我不理解弃用消息）：http: [//developer.android.com/reference/android/widget/SlidingDrawer.html](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-20T23:18:58.497

Google 确实通过一个在应用程序中相当容易实现的小部件提供了 DrawerView。这是它的[谷歌图书馆](http://android-developers.blogspot.com/2015/05/android-design-support-library.html)。这就是我在此[示例代码](https://github.com/AdamSHurwitz/Hacking_Environment)中实现 DrawerView 的方式。Google的[CheeseSquare 示例](https://github.com/chrisbanes/cheesesquare)也很好地实现了 DrawerView。

[![在此处输入图像描述](../Images/7bb95d89e17fbd661e72b1b878403e16.png)](https://i.stack.imgur.com/ArhtI.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:45:14.543

不是官方的。谷歌没有发布它。

在这里你可以找到一个很好的图书馆。

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

# c++ - 推荐的 C++ 库设计

> ID：14651036
> 
> 赞同：4
> 
> 时间：2013-02-01T16:44:05.120
> 
> 标签：c++, design-patterns, dll

我正在开发一个提供与图像/信号处理和其他东西相关的不同功能的 C++ 库。它基本上是一个供开发人员进一步使用的开发库。我希望它尽可能方便易用。我有 3 种不同的模型：

# 型号 1：

包含库的所有功能的单个大型命名空间。例如，C++ 标准库在`namespace std`. 或者 OpenCV 在`namespace cv`.

```
namespace library
{
    //all classes, variables, functions, datatypes are present inside this namespace
} 
```

# 型号 2：

父命名空间，根据功能进一步细分为子命名空间。例如 .NET Framework 的父级`namespace System`包含`namespace Collections`等`namespace Windows`...

```
namespace library
{
    //datatypes go here

    namespace group1
    {
       //functions related to group 1
    }

    namespace group2
    {
       //functions related to group 2
    }

    .
    .
    .
} 
```

# 模型 3：

与模型 2 几乎相同，但包含作为`static`类成员而不是名称空间的函数。

```
namespace library
{
   //datatypes go here

   class group1
   {
     public:
        static function1();
        static function2();
   }

   class group2
   {
     public:
        static function1();
        static function2();
   }
} 
```

我需要推荐哪种设计模型最好？还有其他更好的方法吗？目前我对第二种模式感到满意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T16:57:43.923

如果函数可以独立使用（看起来是这样，看看你的建议），并且可以在语义上对几个函数进行分组，我绝对会选择第二个选项。

* * *

选项 1：将所有内容放在一个单独的组中`namespace`会导致添加太多不同的东西，并分组到一个组中。

选项 2：我发现它比其他的更直观。`namespace`由于该库结合了几个完全不同的东西，将所有内容分组并将所有这些组作为一个大名称的一部分似乎是一个好主意- 库的名称。

选项 3：此选项与选项 2 几乎相同，但使用`class`而不是`namespace`对我来说似乎很糟糕。C++ 标准`namespace`为此提供了 s，请使用它们。

* * *

但这真的取决于图书馆，你要写。老实说，选择其中一个选项然后切换到另一个选项并不是什么大不了的事。因此，您可以开始使用其中一个选项，如果事情变得丑陋并且您看到，其他一些选项将是更好的选择 - 去做吧。

* * *

示例：我有自己的库，它实现了套接字、线程、IPC 通信等的包装器。我选择的结构正是您在选项 2 中建议的结构。

# xml - XSL - 比较两个节点集并输出不匹配

> ID：14651041
> 
> 赞同：0
> 
> 时间：2013-02-01T16:44:20.143
> 
> 标签：xml, xslt

我有两个节点集，如果没有匹配项，我想在其中输出（a）节点的值。逻辑如下：

如果节点集#1 中属性“term”的任何值与节点集#2 中的任何“key”属性值都不匹配，则从节点集#1 输出“term”值。我该怎么做？

节点集#1

```
 <stuff term="foo" />
    <stuff term="bar" />
    <stuff term="test" /> 
```

节点集#2

```
 <other key="time" />
    <other key="rack" />
    <other key="foo" />
    <other key="fast" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:16:47.763

假设您的 XML 看起来像这样

```
<record>
   <stuff>
      <stuff term="foo"/>
      <stuff term="bar"/>
      <stuff term="test"/>
   </stuff>
   <other>
      <other key="time"/>
      <other key="rack"/>
      <other key="foo"/>
      <other key="fast"/>
   </other>
</record> 
```

您可以设置一个键来根据它们的**键**属性查找**其他元素**

 **```
<xsl:key name="other" match="other/*" use="@key"/> 
```

然后，要选择没有匹配**其他元素的****stuff**元素，您可以像这样使用键

 **```
<xsl:apply-templates select="stuff/*[not(key('other', @term))]"/> 
```

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="other" match="other/*" use="@key"/>

   <xsl:template match="/*">
      <xsl:apply-templates select="stuff/*[not(key('other', @term))]"/>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于上述 XML 时，输出如下

```
<stuff term="bar"></stuff>
<stuff term="test"></stuff> 
```****

# firefox - 在 OS X 上的 Firefox 中的 Sublime Text 2 中打开源文件

> ID：14651043
> 
> 赞同：0
> 
> 时间：2013-02-01T16:44:30.120
> 
> 标签：firefox, sublimetext2

我正在尝试将 Firefox 设置为在 OS X 上的 Sublime Text 2 中打开源文件，但运气不佳。

我之前将 Firefox 配置为在 TextWrangler 中打开源文件，但是当我将配置更改为使用 ST2 时出现错误：

```
[JavaScript Application] The external editor cannot be found.  Please double check the path and try again. 
```

..随后是在 Firefox 本机源代码浏览器中打开的源文件。

在`about:config`我已经设置`view_source.editor.external`为`true`和`view_source.editor.path`两者`/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl`和`/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl`。

设置的正确路径是什么`view_source.editor.path`，或者如果这不是我的问题，那是什么？

# perl - 将 unicode 文件名与 Module::Starter 一起使用

> ID：14651048
> 
> 赞同：3
> 
> 时间：2013-02-01T16:44:47.723
> 
> 标签：perl, unicode, perl-module

### 背景：

我希望创建一个包含一些供个人使用的模块的发行版——它永远不会出现（又名。CPAN）。我想使用`Module::Starter`简单的测试和版本管理来启动这些模块。

（Ubuntu GNU/Linux 上的 perl 5.12.4）

### 问题：

如何在 Module::Starter 中使用 Unicode 文件名，例如`Local::Λ`← (Lambda)？

这不起作用：

```
$ module-starter --module Local::Λ
Invalid module name: Local::Λ at /usr/local/share/perl/5.12.4/Module/Starter/App.pm line 132. 
```

实际失败的行是

```
croak "Invalid module name: $_" unless /\A[a-z_]\w*(?:::[\w]+)*\Z/i; 
```

在[`Module::Starter::Simple`](https://metacpan.org/source/XSAWYERX/Module-Starter-1.60/lib/Module/Starter/Simple.pm)（第 95 行）。

Lambda 显然是一个“单词”字符。

顺便说一句，这有效：

```
$ cat > xΛ.pm
use utf8;
package xΛ;
sub foo { print "42\n" }
1;
^D
$ perl -Mutf8 -MxΛ -e 'xΛ::foo()'
42
$ 
```

### 我还没有尝试过的事情：

*   花一天时间编译 perl 5.16 以获得更多的 unicode 优点。
*   从源头上破解，并启用任何远程连接到 unicode 的东西。
*   检查这不仅仅是对*分发名称*的限制（我并不担心，因为 CPAN 永远不会看到这一点）。
*   检查这是否可能是一个`Getopt::Long`问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:19:16.990

'word character' 的定义随着以下因素的变化而变化：a）您的 perl 版本。b) 如果有问题的脚本使用您的输入作为二进制字符串或字符串。查看最新版本的 perl 正则表达式引擎的`/a`&`/u` 标志。

仅供参考：因为 Perl 人力求跨平台兼容性，并且在各种文件系统中对 Unicode 的支持差异很大，所以他们决定目前不支持 Unicode 模块名称。

* * *

来自 Amon 评论的决议：这成功了：

```
perl -Mutf8 -M5.012 -MModule::Starter::App -E'$ARGV[1]="Local::\x{039B}";Module::Starter::App->run' -- --module Local::Λ --license gpl3 --ignore git 
```

（`\x{...}`根据[perlre](http://perldoc.perl.org/perlre.html)使用转义强制 unicode ）。

# listview - 从 ViewHolder Android 获取作为标签的位置

> ID：14651052
> 
> 赞同：0
> 
> 时间：2013-02-01T16:45:03.083
> 
> 标签：listview, android-intent, view, get, custom-adapter

我正在尝试从列表视图开始一项新活动。我正在从数据库中加载一些数据并在另一个活动中打开它......当我使用来自我的 customAdapter 的 OnItemClickListener 和 getTag 时工作正常......但结果显示在 listview 上的某些项目中重复。搜索一些主题...我找到了资源 ViewHolder。

它解决了重复问题，但我无法从 holder.getTag() 开始新活动。

我的观点持有人

```
static class ViewHolder {
    TextView hs;
    TextView hi;
    TextView ha;
    ImageView ho;
    ImageView hm;   
} 
```

我的 customAdapter 查看代码

```
public View getView(int position, View convertView, ViewGroup parent) {

    DataAdapter.ItemLista item = itens.get(position);
    final ViewHolder holder;

    if(convertView==null){
        convertView = inflater.inflate(R.layout.linha_listview, null);
        holder = new ViewHolder();

        holder.hi = (TextView)convertView.findViewById(R.linhaLista.id);
        holder.hs = (TextView)convertView.findViewById(R.linhaLista.musica);
        holder.ha = (TextView)convertView.findViewById(R.linhaLista.cantor);
        holder.ho = (ImageView)convertView.findViewById(R.linhaLista.cat_oracao);
        holder.hm = (ImageView)convertView.findViewById(R.linhaLista.cat_missa);

        /*if (imgMissa.equals(null)) {
            missa.setImageResource(R.drawable.blank);
        }else if(imgOra.equals("louvor")) {
            missa.setImageResource(R.drawable.louvor);
        }else if(imgOra.equals("adoracao")) {
            missa.setImageResource(R.drawable.adoracao);
        }*/
        convertView.setTag(holder);
        Log.v(String.valueOf(holder),"valor do setholder");
    }else {
        holder = (ViewHolder) convertView.getTag();
        Log.v(String.valueOf(holder),"valor do getholder");
    }
    holder.hi.setText(String.valueOf(item.id));
    holder.hs.setText(item.musica);
    holder.ha.setText(item.cantor);
    String imgOra = item.oracao;

    if (imgOra.equals(null)) {
        holder.ho.setImageResource(R.drawable.blank);
    }else if(imgOra.equals("louvor")) {
        holder.ho.setImageResource(R.drawable.louvor);
    }else if(imgOra.equals("adoracao")) {
        holder.ho.setImageResource(R.drawable.adoracao);
    }

    return convertView;
} 
```

在这种情况下，我需要将字段 holder.hi 作为标签。任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:46:55.040

我解决了这个问题，在自定义适配器而不是片段中添加了一个意图。所以为了它的工作我不得不改变代码的某些部分添加一个字符串 [] 和一个上下文。以下是我找到的解决方案。希望对以后的疑惑有所帮助。

```
public class CustomAdapter extends BaseAdapter{
    LayoutInflater inflater;
    List<DataAdapter.ItemLista> itens;
    DataAdapter.ItemLista item;
    ViewHolder holder;
    Context context;

    public CustomAdapter(Context contexto, List<DataAdapter.ItemLista> itens) {
        super();    
        this.itens = itens;
        this.context = contexto;
        this.inflater = (LayoutInflater)contexto.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
.
.
.
    public View getView(final int position, View convertView, ViewGroup parent) {
        final String[] extra = new String[itens.size()];
        item = itens.get(position);
        if(convertView==null){
            convertView = inflater.inflate(R.layout.linha_listview, null);
            holder = new ViewHolder();
            holder.hi = (TextView)convertView.findViewById(R.linhaLista.id);
            holder.hs = (TextView)convertView.findViewById(R.linhaLista.musica);
            holder.ha = (TextView)convertView.findViewById(R.linhaLista.cantor);
            holder.ho = (ImageView)convertView.findViewById(R.linhaLista.cat_oracao);
            holder.hm = (ImageView)convertView.findViewById(R.linhaLista.cat_missa);

            convertView.setTag(holder);

        }else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.hi.setText(String.valueOf(item.id));
        holder.hs.setText(item.musica);
        holder.ha.setText(item.cantor);
        extra[position] = String.valueOf(item.id);
        String imgOra = item.oracao;
        if (imgOra.equals(null)) {
            holder.ho.setImageResource(R.drawable.blank);
        }else if(imgOra.equals("louvor")) {
            holder.ho.setImageResource(R.drawable.louvor);
        }else if(imgOra.equals("adoracao")) {
            holder.ho.setImageResource(R.drawable.adoracao);
        }
        convertView.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent mostraLetra = new Intent();
                mostraLetra.setClass(context, ExibeMusica.class);
                mostraLetra.putExtra("id",extra[position]);
                context.startActivity(mostraLetra);
            }
         });
         return convertView;
    } 
```

# youtube - 在哪里调用 widget.setVideoTitle(title)

> ID：14651057
> 
> 赞同：0
> 
> 时间：2013-02-01T16:45:27.087
> 
> 标签：youtube, youtube-api

在 google 提供的示例中，我可以在哪里调用 widget.setVideoTitle(title)：

```
<div id="widget"></div>
<div id="player"></div>

<script>
  // 2\. Asynchronously load the Upload Widget and Player API code.
  var tag = document.createElement('script');
  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. Define global variables for the widget and the player.
  //    The function loads the widget after the JavaScript code
  //    has downloaded and defines event handlers for callback
  //    notifications related to the widget.
  var widget;
  var player;
  function onYouTubeIframeAPIReady() {
    widget = new YT.UploadWidget('widget', {
      width: 500,
      events: {
        'onUploadSuccess': onUploadSuccess,
        'onProcessingComplete': onProcessingComplete
      }
    });
  }

  // 4\. This function is called when a video has been successfully uploaded.
  function onUploadSuccess(event) {
    alert('Video ID ' + event.data.videoId + ' was uploaded and is currently being processed.');
  }

  // 5\. This function is called when a video has been successfully
  //    processed.
  function onProcessingComplete(event) {
    player = new YT.Player('player', {
      height: 390,
      width: 640,
      videoId: event.data.videoId,
      events: {}
    });
  }
</script> 
```

附言。onProcessingComplete 根本不起作用，如果评论它对上传没有任何影响，所以我在处理时没有收到任何返回的消息.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:57:46.630

在上传开始之前，您应该可以在 onApiReady 中设置它。例如，请参阅[http://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/panels/webcam.js](http://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/panels/webcam.js)

# javascript - 在 JavaScript 中从 gps 位置指向另一个不指向正确方向的箭头

> ID：14651060
> 
> 赞同：3
> 
> 时间：2013-02-01T16:45:34.223
> 
> 标签：javascript, bearing

我在互联网和 stackoverflow 上进行了很多搜索，但不知何故我似乎无法做到正确！我试图让箭头从 1 GPS 方向指向另一个方向。

我附上了一个测试 HTML，它准确地解释了我的问题。我无法让箭头指向正确的方向，我也不知道我做错了什么。它计算角度，箭头以该角度旋转，但它不是正确的角度，我没有得到我期望的结果。

任何帮助将非常感激。

![地图.png](../Images/364e07a3560e4531202d646b3fb337d8.png)

![箭头.png](../Images/2155a3ff4710d15eb6c5859b4c7b66c8.png)

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Point to a direction test</title>
    <script>
        function getLocation() {
            var info = document.getElementById("info");
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(calculateArrowRotation);
            }
            else {
                info.innerHTML = "Geolocation is not supported by this browser.";
            }
        }   

        function calculateArrowRotation(location) {
            // Point from here (Arc de Triomph, Paris)
            // var phoneLatitude = 48.873934;
            // var phoneLongitude = 2.2949;

            // Point from here (Gare du Nord, Paris)
            var phoneLatitude = 48.87977;
            var phoneLongitude = 2.355752;

            // Point to here (Musée du Louvre, Place du Carrousel, Paris, France)
            var destinationLatitude =  48.861519;
            var destinationLongitude = 2.3345495;

            var arrowAngle = bearing(phoneLatitude, phoneLongitude, destinationLatitude, destinationLongitude);

            var element = document.getElementById('arrow');
            element.style['transform'] = 'rotate(' + arrowAngle + 'deg)';

            var info = document.getElementById("info");
            info.innerHTML = "Longitude = " + phoneLongitude + "<br/>Latitude = " + phoneLatitude + "<br/>Arrow angle = " + arrowAngle;
        }

        function bearing(lat1,lng1,lat2,lng2) {
            var dLon = (lng2-lng1);
            var y = Math.sin(dLon) * Math.cos(lat2);
            var x = Math.cos(lat1)*Math.sin(lat2) - Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);
            var rad = Math.atan2(y, x);
            var brng = toDeg(rad);
            return 360 - ((brng + 360) % 360);
        }

        function toRad(deg) {
             return deg * Math.PI / 180;
        }

        function toDeg(rad) {
            return rad * 180 / Math.PI;
        }           
    </script>
</head>
<body onload="getLocation()">
    <img id="map" src="map.png" style="position: absolute; top: 20; left: 20px;">
    <img id="arrow" src="arrow.png" style="position: absolute; top: 80px; left: 105px;">
    <div id="info" style="position: absolute; top: 340px; left: 20px; font-family:sans-serif; font-size:11px;"></div>       
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T17:43:10.017

您的最后一行`bearing`用于将轴承的方向从顺时针方向更改为逆时针方向。

你应该只使用

```
return (brng + 360) % 360; 
```

此外，您确实意识到您正在使用硬编码值并且从未使用`calculateArrowRotation()`过输入参数，对吗？`location`

最后，您对轴承的实施不正确。但这不是您的错，列出实现的站点可能在一个重要细节上模糊不清：您输入三角函数的所有内容都必须首先转换为弧度：

```
function bearing(lat1,lng1,lat2,lng2) {
    var dLon = toRad(lng2-lng1);
    lat1 = toRad(lat1);
    lat2 = toRad(lat2);
    var y = Math.sin(dLon) * Math.cos(lat2);
    var x = Math.cos(lat1)*Math.sin(lat2) - Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);
    var rad = Math.atan2(y, x);
    var brng = toDeg(rad);
    return (brng + 360) % 360;
} 
```

# intellij-idea - 将 RubyMine 设置传输到 IntelliJ IDEA？

> ID：14651067
> 
> 赞同：1
> 
> 时间：2013-02-01T16:46:09.863
> 
> 标签：intellij-idea, rubymine

我有兴趣从 RubyMine 5 升级到完整的 IntelliJ IDEA Ultimate 12。但是，我希望在进行转换时保持我的 RubyMine 设置不变。

是否可以将我的 RubyMine 设置转移到 IntelliJ IDEA Ultimate？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:03:31.183

您可以使用`File`| `Export Settings`和`File`| `Import Settings`. 并非所有功能都可以转移，因为 RubyMine 只是 IDEA 的一个子集，但它应该适用于大多数部分。

# configuration - 玩模块化开发：子项目鸡和蛋

> ID：14651069
> 
> 赞同：1
> 
> 时间：2013-02-01T16:46:14.503
> 
> 标签：configuration, module, routing, playframework, playframework-2.0

在 Play 2.x 中，子项目是构建模块化应用程序的方式，看起来很棒。

现在，进入本质，一些问题变得清晰：

```
1) Cyclical dependencies not possible (A can depend on B, but B cannot depend on A)  
2) A child project cannot access a parent project  
3) Routing and Assets are isolated to each sub project 
```

就我而言，我想按如下方式构建应用程序：

```
Main
Modules
-> Core
-> Model
-> Common
-> View
  -> Desktop
  -> Mobile
-> Controller
  -> admin
  -> account
  -> public 
```

现在，假设管理员控制器收到一个移动请求，但用户尚未登录。好的，我们需要拉入`View > Mobile > views > login > index.scala.html`

由于控制器子项目依赖于视图（反之亦然），因此视图将无法访问控制器路由，这意味着类似的东西`@form(action = admin.routes.auth)`将不起作用。

可以废弃视图子项目并在每个单独的控制器子项目下存储视图，但这看起来像是大量模板代码重复的秘诀。

基本的核心、模型、主要（资产、控制器、视图）子项目设置一切都很好，但是当您需要支持移动和桌面界面以及 crud 和正面视图时，它会变得更加复杂。

当您看到由单个路由文件产生的巨大构建时间时，子项目开始看起来像圣杯。

实施是另一回事。

# asp.net - 辐射编辑器。如何在服务器上获取完整的 HTML？

> ID：14651070
> 
> 赞同：1
> 
> 时间：2013-02-01T16:46:19.097
> 
> 标签：asp.net, telerik, radeditor

我尝试使用该`Content`属性，但这只给了我`div`包含已编辑内容的内容。我需要包含 div 的完整 html。

我知道`get_html()`客户端有一种方法，但是服务器端有什么等价物吗？

我也尝试过`.GetHtml(EditorStripHtmlOptions.None)`，但返回的内容与`Content`属性相同。

我查看了[http://www.telerik.com/help/aspnet-ajax/methods_t_telerik_web_ui_radeditor.html](http://www.telerik.com/help/aspnet-ajax/methods_t_telerik_web_ui_radeditor.html) 但没有看到任何其他可以帮助我的东西。

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:31:53.980

MikeSmithDev 是正确的。.Content 在我将其设置为完整的 HTML 后确实返回了完整的 HTML

# nhibernate - 带有连接（或获取）的休眠查询返回重复项

> ID：14651071
> 
> 赞同：3
> 
> 时间：2013-02-01T16:46:21.540
> 
> 标签：nhibernate, fluent-nhibernate, queryover

我遇到了意想不到的行为，我不清楚。当然我可以使用 distinct，但原因是什么？

我有**实体**（流畅的自动映射）：

```
public class Ticket
{
    public virtual int Id { get; set; }
    public virtual string Title { get; set; }
    public virtual IList<Activity> Activities { get; set; }
}

public class Activity
{
    public virtual int Id { get; set; }
    public virtual string Title { get; set; }
    public virtual Ticket Ticket { get; set; }
} 
```

测试**数据**（1 张票，5 个活动）：

```
new Ticket { Id = 1, Activities = new List<Activity>
    {
        new Activity(), new Activity(), new Activity(), new Activity()
    }; 
```

**查询**：_

```
var report = GetSessionFactory()
    .OpenSession()
    .QueryOver<Ticket>()
    .JoinAlias(ticket => ticket.Activities, () => activity)
    .List<Ticket>(); 
```

我有以下**结果**：

![在此处输入图像描述](../Images/76dfce924ee5e02f5cebd6670d354854.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:57:51.567

当您站立时，您将在加入`one-to-many`表格时返回笛卡尔积，在您的情况下为 1 x 5 行。所以如果你想沿着这条路线走，那么你需要添加`.TransformUsing(Transformers.DistinctRootEntity)`

您确定不想加载活动并使用延迟加载的优点来检索活动吗？在大多数情况下，这可能是更有效的方式。

像这样的东西： -

```
var ticket = session.QueryOver<Ticket>.Where(w => w.Id == id).SingleOrDefault();
OR
var ticket = session.Get<Ticket>(1); 
```

那么你可以简单地打电话

```
foreach(var activity in  ticket.Activities)
{
 // do something here....
} 
```

# debugging - 是否有 gdb 命令来完成循环构造？

> ID：14651073
> 
> 赞同：39
> 
> 时间：2013-02-01T16:46:26.313
> 
> 标签：debugging, loops, gdb, walkthrough

在 gdb 中，我有`finish`命令轻松完成函数框架的执行，通常在调试器中遍历代码时，在查看循环的几次迭代后，我想完成循环并继续执行它。目前，我通过在循环后的第一行设置断点来做到这一点`continue`，但是，如果有一个简单的 gdb 命令具有相同的效果但不需要设置断点，那将非常方便后来清了。

gdb 中是否有完成当前正在执行的循环的执行？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-01T20:54:02.650

> 是否有 gdb 命令来完成循环构造？

在循环的最后一行执行`until`，或者循环的最后一行`until NNN`在哪里`NNN`。

```
(gdb) help until
Execute until the program reaches a source line greater than the current
or a specified location (same args as break command) within the current frame. 
```

> 不需要设置断点并稍后清除。

临时断点会自动清除自己：

```
(gdb) help tbreak
Set a temporary breakpoint.
Like "break" except the breakpoint is only temporary,
so it will be deleted when hit.  Equivalent to "break" followed
by using "enable delete" on the breakpoint number. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T16:51:42.290

`gdb`不知道循环在哪里结束，所以它不能这样做。我认为你能做的最好的就是`advance`在循环之后使用带有位置的命令。

# visual-studio-2010 - Visual Studio - 在同一解决方案中制作项目的副本

> ID：14651086
> 
> 赞同：1
> 
> 时间：2013-02-01T16:47:01.783
> 
> 标签：visual-studio-2010, project

在 Visual Studio 2010 中，我试图制作一个项目的副本并将其放入同一个解决方案中。我将文件复制到 Windows 资源管理器中解决方案文件夹下的单独文件夹中，然后在 VS 中从原始项目复制并粘贴到新项目。

当我从原始项目运行解决方案时，它工作正常。但是，当我尝试从新项目中运行它时，它会引发异常：

```
Multiple types were found that match the controller named 'Main'. This can
happen if the route that services this request ('{controller}/{action}/{id}')
does not specify namespaces to search for a controller that matches the
request. If this is the case, register this route by calling an overload of
the 'MapRoute' method that takes a 'namespaces' parameter.

The request for 'Home' has found the following matching controllers:
TheCopiedProject.Controllers.MainController
TheOriginalProject.Controllers.MainController 
```

我对复制的项目（Ctrl-Shift-F）进行了搜索，但在任何地方都没有对原始项目的命名空间的引用。

显然，我遗漏了一些东西 - 我需要做什么来解决这个问题？

# ruby-on-rails - 在rails中跨表拆分集合

> ID：14651087
> 
> 赞同：0
> 
> 时间：2013-02-01T16:47:02.937
> 
> 标签：ruby-on-rails, database-design, rails-activerecord

我想知道是否有人可以为我指出如何建模以下内容的正确方向：

我将 twitter 和 facebook 指标存储在 postgresql 数据库中。我们的应用程序可以授权许多不同的 facebook 和 twitter 帐户，并每天提取每个帐户的所有数据。直观地说，我可以只拥有一个名为“metrics”的表，它可以存储所有帐户的 facebook 和 twitter 每日指标，但是，我担心这样的表会很快增长到无法使用的大小。所以我想知道，是否有可能，并且是否建议根据帐户类型和帐户动态生成表。因此，如果我授权了 15 个不同的 facebook 帐户和 10 个不同的 twitter 帐户，这将导致 25 个表。

有没有支持这个的ORM？有活动记录吗？这是一条可取的路线吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:50:42.873

一张表中的许多记录将比多张表执行得更好，并且不会那么麻烦。一张表中的数百万条记录在建立索引时会表现良好，并且能够使用索引。

这不是一条可取的路线。

# jqplot - jqplot如何计算条形宽度？

> ID：14651092
> 
> 赞同：4
> 
> 时间：2013-02-01T16:47:13.113
> 
> 标签：jqplot

我试图了解 jqplot 在未指定宽度时如何计算条的宽度。假设我有以下图表：

```
$.jqplot(chartDiv.attr("id"), [
    [
        ['2013-02-15', 0],
        ['2013-03-01', 2],
        ['2013-03-15', 4],
        ['2013-03-29', 6],
        ['2013-04-12', 8],
        ['2013-04-26', 10],
        ['2013-05-10', 12],
        ['2013-05-24', 14],
        ['2013-06-07', 16],
        ['2013-06-21', 18],
        ['2013-07-05', 20],
        ['2013-07-19', 22],
        ['2013-08-02', 24],
        ['2013-08-16', 26],
        ['2013-08-30', 28],
        ['2013-09-13', 30],
        ['2013-09-27', 32],
        ['2013-10-11', 34],
        ['2013-10-25', 36],
        ['2013-11-08', 38], , ], ], {

    axes: {
        xaxis: {
            renderer: $.jqplot.DateAxisRenderer,
            min: '2013-1-20',
            max: '2013-12-1',
            tickRenderer: $.jqplot.CanvasAxisTickRenderer,
            tickInterval: '14 days',
            tickOptions: {
                angle: 45,
                formatString: '%d/%m/%Y',
            },
        }
    },
    series: [{
        xaxis: 'xaxis',
        yaxis: 'yaxis',
        renderer: $.jqplot.BarRenderer,
    }],
    seriesDefaults: {
        shadow: false,
    },
    axesDefaults: {
       useSeriesColor: true,
        rendererOptions: {
            alignTicks: true
        }
    },
}); 
```

当我在 7 天和 14 天之间更改 tickInterval 时，条形的宽度会发生变化，尽管在同一物理区域上存在相同数量的条形。在计算条形宽度时如何使用 tickInterval？或者如果做不到这一点，我该如何改变这个例子，使得 tickInterval 可以变化（最终将根据数据计算）但条形的宽度设置为合理的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T05:47:05.693

里面有`jqplot.barRenderer.js`一个属性叫做`barWidth`：

> ```
> // prop: barWidth
> // Width of the bar in pixels (auto by devaul).  null = calculated automatically.
> this.barWidth = null; 
> ```

在设置系列选项时，您还可以提供`rendererOptions`. 添加这个：

```
rendererOptions: { barWidth: 10 } 
```

所以`series`变成：

```
series: [{
    xaxis: 'xaxis',
    yaxis: 'yaxis',
    renderer: $.jqplot.BarRenderer,
    rendererOptions: { barWidth: 10 }
}], 
```

将强制所有条为 10 像素宽，无论`tickInterval`.

**编辑：**

确定条形宽度的详细信息在 中的`setBarWidth`函数中`jqplot.barRenderer.js`。

举个例子，计算未堆叠的 x 轴（y 轴非常相似）的条形宽度如下：

```
var nticks = paxis.numberTicks;
var nbins = (nticks-1)/2;

this.barWidth = ((paxis._offsets.max - paxis._offsets.min) / nbins -
    this.barPadding * (nseries - 1) - this.barMargin * 2) / nseries; 
```

本质上，我们首先取轴的宽度（或高度），然后将其除以最大箱数（在本例中为条形图）。从中我们减去系列之间的总填充（在这种情况下，它为零，因为只有一个系列），然后减去条形外部周围的边距。之后，条形的总宽度除以图中的系列数。

正如您从该代码中看到的那样，重要的是确定要显示的刻度数。在您的特定情况下，这发生在`DateAxisRenderer`，它基本上找到最大和最小日期之间的天数（`'2013-1-20' and '2013-12-1'`） - 315 - 在除以间隔中的天数之前，从 yoru 问题是 7 或 14，分别给出 46 和 24。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T19:22:16.807

非常感谢您的回答。这是旧的，但这是我为解决我的问题所做的

```
$.jqplot.DateBarRenderer = function(){
    $.jqplot.BarRenderer.call(this);
};
$.jqplot.DateBarRenderer.prototype = new $.jqplot.BarRenderer();

  $.jqplot.DateBarRenderer.prototype.setBarWidth = function() {
  // need to know how many data values we have on the approprate axis and figure it out.
  var i;
  var nvals = 0;
  var nseries = 0;
  var paxis = this[this._primaryAxis];
  var s, series, pos;
  var temp = this._plotSeriesInfo = this.renderer.calcSeriesNumbers.call(this);
  nvals = temp[0];
  nseries = temp[1];
  var nticks = paxis.numberTicks;
  var nbins = (nticks-1)/2;
  // so, now we have total number of axis values.
  if (paxis.name == 'xaxis' || paxis.name == 'x2axis') {
      if (this._stack) {
          this.barWidth = (paxis._offsets.max - paxis._offsets.min) / nvals * nseries - this.barMargin;
      }
      else {
          this.barWidth = ((paxis._offsets.max - paxis._offsets.min)/ (nvals + 1 )  - this.barPadding * (nseries-1) - this.barMargin*2)/nseries;
          //this.barWidth = ((paxis._offsets.max - paxis._offsets.min)/nbins  - this.barPadding * (nseries-1) - this.barMargin*2)/nseries;
          // this.barWidth = (paxis._offsets.max - paxis._offsets.min) / nvals - this.barPadding - this.barMargin/nseries;
      }
  }
  else {
      if (this._stack) {
          this.barWidth = (paxis._offsets.min - paxis._offsets.max) / nvals * nseries - this.barMargin;
      }
      else {
          this.barWidth = ((paxis._offsets.min - paxis._offsets.max)/nbins  - this.barPadding * (nseries-1) - this.barMargin*2)/nseries;
          // this.barWidth = (paxis._offsets.min - paxis._offsets.max) / nvals - this.barPadding - this.barMargin/nseries;
      }
  }
  return [nvals, nseries];
}; 
```

我只是将 的 替换`setBarWidth`为`BarRenderer`使用值的数量而不是刻度的数量。其余代码来自 BarRenderer 对象，在更新时保持不变。

要使用它，只需使用：

```
var plot = $.jqplot('graphID', [graphData], {
    axes:{
      xaxis:{
        renderer:$.jqplot.DateAxisRenderer
      }
    },
    seriesDefaults:{
      renderer:$.jqplot.DateBarRenderer
    }
  }); 
```

# javascript - Sencha Touch 2：如何在导航视图中显示列表？

> ID：14651096
> 
> 赞同：2
> 
> 时间：2013-02-01T16:47:17.480
> 
> 标签：javascript, mobile, extjs, sencha-touch, sencha-touch-2

我正在尝试动态创建一个列表，然后在导航视图中动态显示它，但是当我尝试执行此操作时，我没有收到任何错误并且列表没有显示。我想知道如何从导航视图中显示列表。

```
Ext.define('MyApp.view.Navigation', {
    extend: 'Ext.navigation.View',
    id: 'NavView',
    xtype: 'navigationcard',
    config: {
        title: 'Schedule',
        iconCls: 'settings',
        //we only give it one item by default, which will be the only item in the 'stack' when it loads
        items: [
                   {
                       xtype: 'mainview'
                   }
        ]
    }
});
Ext.define('MyApp.view.Main', {
    extend: 'Ext.TabPanel',
    xtype: ['mainview','widget.mainview'],
    config: {
        title:'MyApp',
        fullscreen: true,
        tabBarPosition: 'bottom',

        defaults: {
            styleHtmlContent: true
        },
        items: [
            { xtype: 'schedulecard' },
            { xtype: 'settingscard' }
        ]
    }

});

var scheduleStore = Ext.create('Ext.data.Store', {
    storeId: 'schedulestore',
    fields: ['scheduleId', 'templateName', 'startDate', 'times'],
    sorters: 'day',
    grouper: {
        groupFn: function (record) {
            var startDate = $.datepicker.formatDate('DD, MM dd', new Date(record.get('startDate')));
            return startDate;
        },
        sortProperty: 'startDate',
    }
}); // create()

Ext.define('MyApp.view.Schedule', {
    extend: 'Ext.List',
    xtype: 'schedulecard',
    grouped: true,
    config: {
        title: 'Schedule',
        iconCls: 'time',
        store: 'schedulestore',
        grouped: true,
        itemTpl: '<span style="font-weight:bold;">{templateName}</span><br/>{times}',
        listeners: {
            itemtap: function (list, index, item, e) {
                var self = Ext.getCmp('NavView');
                var listRecord = list.getStore().getAt(index);
                var scheduleId = listRecord.get('scheduleId');

                var scheduleItem = GetScheduleItemById(scheduleId);

                var button = Ext.create('Ext.Button', {
                    iconCls: 'compose',
                    text:'Forms',
                    iconMask: true,
                    handler: function () {
                        var self = Ext.getCmp('NavView');

                        var cListStore = Ext.create('MyApp.view.ScheduleFormsList');
                        var panelForms = Ext.create('Ext.Panel', {
                            id: 'panelForms',
                            items: [{ xtype: 'schedulecard' }]
                        });

                        var newView = {
                            title: scheduleItem.AppointmentType.Name,
                            id: 'ScheduleItemDetailForms',
                            items: [cListStore]
                        };
                        self.push(newView);
                    }
                });

                var panelScheduleDetails = Ext.create('Ext.Panel', {
                    id: 'panel',
                    html: '<div style="margin:10px;"><span style="font-weight:bold;">' + timesTxt + '</span></div><hr/><div style="float:left;margin:10px;clear:both;">' + locationtxt + '</div><div style="float:left;margin:10px;">' + googleMap + '</div>'
                });

                var scheduleDetailsContainer = Ext.create('Ext.Container', {
                    fullscreen: true,
                    layout: 'vbox',
                    items: [
                        {
                            xtype: 'panel',
                            flex: 1,
                            items: [button]
                        },
                        {
                            xtype: 'panel',
                            flex: 2,
                            items: [panelScheduleDetails]
                        }
                    ]
                });

                var newView = {
                    title: scheduleItem.AppointmentType.Name,
                    id: 'ScheduleItemDetailTabs',
                    items: [scheduleDetailsContainer]
                };
                self.push(newView);

            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:48:26.370

尝试在 main 中添加列表的 xtype

主.js

```
Ext.define('MyApp.view.Main',{
    extend:'Ext.TabPanel',
    xtype:'mainView',
    id:'idMain',
    config:{
        tabBar:{
            docked:'bottom',
            hidden:true
        },
        items:[
            { xtype: 'schedulecard' }
              ]
    }
}); 
```

Schedule.js

```
Ext.define("MyApp.view.Schedule", {
    extend: "Ext.Container",
    xtype: 'schedulecard',
    config: {
        title: 'Schedule',
        iconCls: 'time',
        layout:'fit',
        items: [

                    {
                        xtype: 'navigationview',
                        id:'idScheduleListNavView',
                        items: [
                                {
                                    xtype:'list',
                                    onItemDisclosure:true,
                                    loadingText: "Searching ...",
                                    emptyText: "<div class=\"empty-text\">No Places Found.</div>",
                                    id:'idSearchNavList',
                                    store: 'schedulestore',
                                    itemTpl: '<span style="font-weight:bold;">{templateName}</span><br/>{times}',
                                },
                            ],  
                    }
          ]
    }
}); 
```

调度控制器.js

在您的控制器中创建新视图并推送它

```
Ext.define('MyApp.controller.ScheduleController',{
    extend:'Ext.app.Controller',
    config:{
        refs:{
            idScheduleList:'schedulecard',
            navScheduleList:'#idScheduleListNavView',
        },
        control:{
            '#idScheduleListNavView' : {itemtap:'showScheduleDetails'},
        }
    },

    showScheduleDetails : function(){
        var navScheduleList = this.getNavScheduleList();
        navScheduleList.push(newView);
    }
}); 
```

# wpf - 数据绑定 2 组合框问题

> ID：14651098
> 
> 赞同：1
> 
> 时间：2013-02-01T16:47:18.850
> 
> 标签：wpf, data-binding, combobox, viewmodel

我有 2 个组合框。如果我在第一个活动中选择一个活动，则相关的子活动应显示在第二个组合框中。根据 MVVM 样式，代码看起来不错，但是当我在第一个活动中选择一个活动时，第二个组合框中的相关子活动不会同步。这是我的代码： **查看**

```
<Window x:Class="TestDGCombosBinding.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TestDGCombosBinding"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.Resources>
        <ObjectDataProvider x:Key="ActivitiesDataProvider" ObjectType="{x:Type local:Activities}" MethodName="GetActivities"/>
        <local:DebugConverter x:Key="DebugConverter" />
    </Grid.Resources>
    <DataGrid 
        Grid.Row="1" Grid.Column="1" 
                 AutoGenerateColumns="False"                     
                 SelectionUnit="CellOrRowHeader"
                 SelectionMode="Single"
                 IsSynchronizedWithCurrentItem="True" 
                 RowBackground="White" 
                 AlternatingRowBackground="LightGray"                                          
                 AlternationCount="2" Name="dataGrid1" CurrentCellChanged="dataGrid1_CurrentCellChanged">
        <DataGrid.BindingGroup>
            <BindingGroup />
        </DataGrid.BindingGroup>
        <DataGrid.Resources>

        </DataGrid.Resources>

        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Activities Custom" CanUserSort="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox Text="{Binding CurrentActivity}"                                       
                                    SelectedValuePath="ActivityID"                                        
                                    DisplayMemberPath="ActivityName"
                                    ItemsSource="{Binding Source={StaticResource ActivitiesDataProvider}}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="SubActivities Custom" >
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox Text="{Binding CurrentSubActivity}"                                       
                                    SelectedValuePath="SubActivityID"                                      
                                    DisplayMemberPath="SubActivityname"
                                    ItemsSource="{Binding Path=SubActivitiesOfCurrentActivity}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

* * *

**模型**

```
public class Activities
{
    public DataView GetActivities()
    {
        return ActivitiesAccess.GetAllActivities();
    }
} 
```

* * *

**视图模型**

```
public class ActivitiesViewModel : INotifyPropertyChanged
{
    public ActivitiesViewModel()
    { }
    private int currentActivity;

    public int CurrentActivity
    {
        get { return currentActivity; }
        set { 
                currentActivity = value;
                SubActivitiesOfCurrentActivity = ActivitiesAccess.GetAllSubActivitiesinActivity(currentActivity);
                OnPropertyChanged("CurrentActivity");
            }
    }

    private DataView subActivitiesOfCurrentActivity;

    public DataView SubActivitiesOfCurrentActivity
    {
        get {return subActivitiesOfCurrentActivity; }
        set
        {
            subActivitiesOfCurrentActivity = value;
            OnPropertyChanged("SubActivitiesOfCurrentActivity");
        }
    }

    private int currentSubActivity;

    public int CurrentSubActivity
    {
        get { return currentSubActivity; }
        set
        {
            currentSubActivity = value;
            OnPropertyChanged("CurrentSubActivity");
            }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

当我从第一个下拉列表中选择一个活动时调试代码时，CurrentActivity 属性值始终为 0，我不知道为什么。此值应等于所选活动的 ActivityID。我搜索了很多以寻求帮助，但我找不到任何东西。如果有人可以在代码中指定任何问题，我将非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:24:50.553

不要绑定到组合框中的 Text 属性，尝试替换：

```
 <ComboBox Text="{Binding CurrentActivity}"                                       
                                SelectedValuePath="ActivityID"                                        
                                DisplayMemberPath="ActivityName"
                                ItemsSource="{Binding Source={StaticResource ActivitiesDataProvider}}"/> 
```

和：

```
<ComboBox ItemsSource="{Binding Source={StaticResource ActivitiesDataProvider}}"                                      
                                SelectedValuePath="ActivityID"                                        
                                DisplayMemberPath="ActivityName"
                                SelectedValue="{Binding CurrentActivity}"
                                IsSynchronizedWithCurrentItem="True"/> 
```

子活动组合框的想法相同。通常，对于组合框，使用 SelectedItem 和 SelectedIndex 属性。也使用 IsSynchronizedWithCurrentItem （取决于 ItemsSource 的类型。

顺便说一句，如果您不想绑定到 ID，则不需要绑定，您可以使用以下方法直接绑定到整个对象：

```
 SelectedValue="{Binding SelectedItem}" 
```

这会将组合框的值绑定到列表的选定项，只需使用 IsSynchronizedWithCurrentItem="True" 使其与您的 VM 保持同步（如果您的 VM 正在管理列表并知道所选项目是哪个，则适用）。

希望这对你有帮助！问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:13:34.520

我解决了我的问题。当一个活动发生变化时，应该通知相关的子活动变化。但是当 Sub-Activity 发生变化时，不需要通知 Activity。

我刚刚在 CurrentSubActivity 属性中评论了 OnPropertyChanged() 调用。这是代码

```
private int currentSubActivity;

    public int CurrentSubActivity
    {
        get { return currentSubActivity; }
        set
        {
            //OnPropertyChanged("CurrentSubActivity");
            this.currentSubActivity = value;

        }
    } 
```

我希望这也可以帮助那里的人:)

# delphi - 在双缓冲 TTreeView 上自定义绘图时闪烁

> ID：14651099
> 
> 赞同：2
> 
> 时间：2013-02-01T16:47:23.130
> 
> 标签：delphi, delphi-7, doublebuffered

当以这种方式监听 TTreeView 事件的 AdvancedCustomDraw 事件时：

```
if Stage = cdPrePaint then begin
    // modify some Sender.Canvas properties and let it draw itself
end else if Stage = cdPostPaint then begin
    // draw 'something extra' using a separate TControlCanvas
    TControlCanvas.TextOut(SomeRect, 'Hello');
end; 
```

...似乎当我启用 DoubleBuffered 时，控件决定不将“额外的东西”复制到屏幕外缓冲区。这意味着只要我不打扰有问题的窗户，一切都很好。当我这样做时，“额外的东西”仅在窗口的随机部分可见。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T21:31:08.440

Since your comment gave me carte blanche to suggest an alternative solution, here's what I would do:

1.  Stop using `DoubleBuffered`. It leads to lots of visual oddities in lots of controls. I personally avoid it like the plague.
2.  Solve your flickering problem by adding the `WS_EX_COMPOSITED` extended window style to your control. This window style can be a bit of a performance drag and I'd recommend that you only add this during the sizing loop, which is when you need it. I describe how to do that in my answer here: [TLabel and TGroupbox Captions Flicker on Resize](https://stackoverflow.com/questions/8058745/tlabel-and-tgroupbox-captions-flicker-on-resize).

# python - 脚本不能在 ubuntu 中运行，但在 Windows 中运行良好

> ID：14651100
> 
> 赞同：0
> 
> 时间：2013-02-01T16:47:27.117
> 
> 标签：python, beautifulsoup

所以这是我正在运行的脚本，它可以在 Windows 中很好地输出，但在 ubuntu 中，它只是打印一个空列表

```
import urllib2
import os
import re
import csv
from bs4 import BeautifulSoup

useragent = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1309.0 Safari/537.17'

def main():
    # lib-talkingpointsmemo.py
    archive = 'http://talkingpointsmemo.com/archive.php'    
    getweeklinks(archive)

def getweeklinks(archivelink):
    print 'something'
    urls = []
    request = urllib2.Request(archivelink, headers={'User-agent': useragent})
    webpage = urllib2.urlopen(request).read()   
    soup = BeautifulSoup(webpage)
    anchors = soup('a') 
    print anchors
    for a in anchors:
        print a['href']

if __name__ == '__main__' : main() 
```

和输出：

```
something
[] 
```

怎么了？我正在使用 Ubuntu 12.04.1 LTS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:58:33.530

嗯......你的脚本没有问题，它在 Ubuntu 上对我来说工作正常，除了我使用的是：Ubuntu 10.04.2 LTS 和 Python 2.6.5

在黑暗中拍摄，但也许可以尝试...

```
soup = BeautifulSoup(webpage,"html.parser") 
```

...确保您在 Windows 和 ubuntu 测试之间使用相同的解析器。您可能还想尝试其他一些[解析器选项](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)

# java - 用Java构建一个包类

> ID：14651105
> 
> 赞同：0
> 
> 时间：2013-02-01T16:47:41.887
> 
> 标签：java, collections, bag

我急需这个项目的帮助。我正在尝试`Bag`为编程作业实现一个类，并且我正在挂断`addAll()`,`Union()`和`equals()`, 方法。

**编辑：**根据分配，`addAll()`应该将第二个数组中的所有对象添加到第一个数组中。运行它时我不再收到错误，但由于某种原因，它不会添加第二个数组中的所有元素，它只会添加前 2 个。谢谢大家，这个现在运行良好！

**编辑：**对于`Union()`，我应该创建第三个袋子，其中包含前两个袋子的所有内容。`ArrayIndexOutOfBoundsException`运行此方法时我得到了一个。我已经更新了 biddulph.r 之后的代码，它也运行良好。再次感谢！

**编辑：“第一次尝试”**对于`equals()`，它应该检查袋子的大小以确保它们的大小相等，然后检查它们是否包含相同的数字。所以正如现在所写，我的`equals()`方法将比较大小并返回布尔值，但我不确定如何让它比较实际值。

```
import java.util.Arrays;
import javax.swing.*;

public class bag {
  int maxSize = 10; //Size of the arrays
  int count = 0; //Number of items stored in the array
  int[] a;
  int[] b;
  bag c;
  bag d;

  public bag() {
    //for(int i = 0; i < maxSize; i++){
    //a[i] = (int)(1+Math.random()*100);
    //}
    a = new int[maxSize];
  }

  public String bagString() {
    return Arrays.toString(a);
  }

  public void add(int b) {
    try {
      a[count] = b;
      count++;
    } catch (ArrayIndexOutOfBoundsException n) {
      JOptionPane.showMessageDialog(null, "Array is full, element will not be added");
    }
  }

  public void removeRandom() {
    int i = (int)(1 + Math.random() * (count - 1));
    a[i] = a[count - 1];
    a[count - 1] = 0;
    count--;
  }

  public void remove(int b) {
    for (int i = 0; i < maxSize; i++) {
      if (contains(b)) {
        a[i] = a[count - 1];
      }
    }
  }

  public boolean isEmpty() {
    if (count == 0) return true;
    else return false;
  }

  public boolean contains(int b) {
    int tf = 0;
    for (int i = 0; i < maxSize; i++) {
      if (a[i] == b) tf = 1;
    }
    if (tf == 1) return true;
    else return false;
  }

  public int size() {
    return count;
  }

  public void addAll(bag c, bag d) {
    if (a.length >= c.size() + d.size()) {
      for (int i = 0; c.size() <= d.size(); i++) {
        c.add(d.a[i]);
      }
    }
  }

  public void union(bag c, bag d) {
    bag bigger = new bag();
    for (int i = 0; i < c.size(); i++) {
      bigger.add(c.a[i]);
    }
    for (int i = 0; count < d.size() - 1; i++) {
      bigger.add(d.a[i]);
    }
    System.out.println(bigger.bagString());
  }

      public boolean equals(bag c, bag d){

        if(c.size() != d.size()){

                return false;

        }else{

                for(int i = 0; i < c.union(c, d).size(); i++){

                        if(c.union(c, d).contains(c.a[i]) && c.union(c, d).contains(d.a[i])){

                        return true;                                   
                        }                              

                }              
                    return false;                              
        }

    }

} 
```

我真的很感谢你们能给我的任何帮助，谢谢。

**编辑：**感谢大家的帮助，你们是救生员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:37:00.333

你的方法：

```
public void addAll(bag c, bag d) {
    if (a.length >= c.size() + d.size()) {
        for (int i = 0; c.size() <= d.size(); i++) {
            c.add(d.a[i]);
        }
    }
} 
```

暴露了你对面向对象编程缺乏了解。请记住，方法 addAll() 已经作用于一个袋子，因此您不需要在参数中指定 2 个袋子。

调用示例：

```
mybag.addAll(yourBag); 
```

将演示一种可能的用法 - 它将 yourBag 的所有内容添加到 myBag 中。

我将免费为您提供此方法（假设数组 'a' 包含包的内容 - 我不确定，因为您的变量名称不清楚）：

```
public void addAll(Bag otherBag) {
    for (int i : otherBag.a) {
        add(i);
    }
} 
```

上述方法会将 otherBag 的所有内容复制到这个包中。

我注意到的另一件事 - 你也有 ab[] 实例变量 - 那是为了什么？您还有 2 个其他包实例变量。不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:10:28.240

我认为您应该首先解决的课程设计存在很多问题。如果您将包表示为静态或动态数组，那么您只需要一个数组，而不是 2 个。您也不需要每个包内有两个包作为属性，这没有任何意义；您应该剩下的只是袋子或计数的大小以及保存所有元素的数组（在您的情况下是整数）。此外，避免以相同的方式为类的函数和属性命名参数。不这样做可能会使编译器感到困惑，并且需要像 self.attributeName 这样的代码来使用属性；否则，编译器会假定您正在谈论参数。

如果您进行这些更改，其余的应该从这里直接开始。由于这是一项作业，因此您应该进行这些更改并重试，因为如果我们为您提供答案，您将不会学习；一旦你正确地构建它，你会发现它会容易得多。

PS这是一个以大写字母开头的类名的惯例。`Bag`并不是`bag`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:54:18.750

您的 addAll() 问题在这里

```
 if (a.length >= c.size() + d.size()) {

        for (int i = 0; c.size() <= d.size(); i++) {
            c.add(d.a[i]);
        }
   } 
```

在您的 c 包变得大于 d 之前，您不应该添加元素，您应该将 d 的所有元素添加到 c。

```
for (int i = 0; i < d.size(); i++) {
    c.add(d.a[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:54:27.463

因此，您遇到问题的作业部分是：

```
public void addAll(bag c, bag d){
    if (a.length >= c.size() + d.size()) {

        for (int i = 0; c.size() <= d.size(); i++) {
            c.add(d.a[i]);
        }
    }
} 
```

您所说**的应该将第二个数组中的所有对象添加到第一个数组中**。

如果您将其分解并将其应用于您的 addAll() 方法，听起来您应该将包“d”中的所有项目添加到包“c”中。

你的 for 循环说**从 0 开始 i**，然后**添加 1**直到**c 的大小小于或等于 d**。

它应该说的是**从 0 开始 i**，然后**将 1 添加**到它，直到你完成了**d 中的每个项目**。

看起来像这样：

```
for (int i = 0; i < d.size(); i++){
 c.add(d.a[i]);
} 
```

每次通过 for 循环时 i 都会增加，当达到 d 的大小（第二个条件）时 i 将停止增加。此时，您将退出 for 循环。您不必担心 c 的大小。

事实上，你也可以摆脱这 `if (a.length >= c.size() + d.size())`条线。

我希望我的解释可以帮助您理解为什么对方法进行了更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T17:05:39.240

**全部添加**

这个函数有几个问题。首先是它让调用者感到困惑。使用此方法的代码将是这样的：

```
Bag bag1 = ...
Bag bag2 = ...
Bag bag3 = ...

bag1.addAll(bag2, bag3) 
```

...或者也许`bag2.addAll(bag2, bag3)`。该函数旨在将一个包中的元素添加到另一个包中，那么为什么调用者必须指定三个不同的包呢？只涉及两个。您应该将函数设为静态，以便可以像这样调用它，`Bag.addAll(bag1, bag2)`或者（更好地）通过使其接受单个参数来完全清楚谁在添加元素`bag1.addAll(bag2)`。

第二个问题是该功能未正确实现，但我认为这是因为您感到困惑，因为您涉及三个袋子而不是两个袋子。勾勒出应该如何修复它：

```
Bag target = ...
Bag source = ...

if (target.a.length >= target.size() + source.size()) {
    for (int i = 0; i < source.a.length; i++) {
        target.add(source.a[i]);
    }
} 
```

好的变量命名是你的朋友。

**联盟**

你还没有具体说明你的实现有什么问题，所以我不会简单地为你重写它。用问题编辑您的问题，我会提供帮助。

然而，这是一个很好的例子，应该是`static`一个方法（实际上是工厂方法）。它应该不能被称为：`Bag biggerBag = Bag.union(bag1, bag2)`.

**在他对 .union 问题发表评论后进行编辑**

.union 的问题在于您使用其他尺寸循环遍历每个袋子。归结为，如果您想将 in 中的每个元素添加`source`到 中`target`，您应该只计算 中的元素`source`，如下所示：

```
bag bigger = new bag();
for (int i = 0; i <= c.size(); i++) {
  bigger.add(c.a[i]);
} 
```

请注意，您的方法不能防止较大的袋子不够大。您应该检查以确保它在循环之前，或者更好的是创建一个足够大的袋子。

**等于**

同样，您需要表明您已经尝试过编写它，然后提出一个问题，说明您需要什么帮助。更新您的问题，我会提供帮助。

# php - .htaccess mod_rewrite GET 形式的未知变量数

> ID：14651110
> 
> 赞同：2
> 
> 时间：2013-02-01T16:47:52.343
> 
> 标签：php, html, forms, .htaccess, mod-rewrite

**我在做什么：**

我正在使用高级过滤器（许多复选框）创建搜索，并且我正在使用 PHP 功能，即在末尾为所有这些过滤器提供相同的名称，并带有 []。这是一个简化的示例：

*(HTML)*

```
<h3>Elements</h3>
<label><input type="checkbox" name="elementPicked[]" value="1" checked="checked" /> Fire</label>
<label><input type="checkbox" name="elementPicked[]" value="2" checked="checked" /> Water</label>
<label><input type="checkbox" name="elementPicked[]" value="3" checked="checked" /> Wind</label>

<h3>Rarity</h3>
<label><input type="checkbox" name="rarityPicked[]" value="10,11,12" /> Common</label>
<label><input type="checkbox" name="rarityPicked[]" value="19,20,21,22" /> Uncommon</label>
<label><input type="checkbox" name="rarityPicked[]" value="29,30,31,32" /> Rare</label>

<!-- (...other somethingPicked[] types, like atk, def and cost...) --> 
```

*(PHP)*

```
if(!empty($_GET['elementPicked'])) {
    foreach($_GET['elementPicked'] as $elementPicked) {
        //do something with each $elementPicked
    }
} 
```

对于 mod_rewrite，目前我的重写工作如下：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

#Example: ./
RewriteRule ^index$ index.php [NC,L]

#Example: ./p/dashboard
RewriteRule ^p/([^/]*)$ index.php?z=$1 [NC,L,QSA] 
```

这意味着如果我调用`http://example.com`，它将重写为调用`http://example.com/index.php`。

如果我打电话`http://example.com/p/cardlist`，它会改写为打电话`http://example.com/index.php?z=cardlist`。这个很简单。

**所以，现在是 htaccess 问题：**

对于这种形式，URL 是这样的： `http://example.com/p/carddisplay?elementPicked%5B%5D=1&elementPicked%5B%5D=2&elementPicked%5B%5D=3&rarityType=Select&rarityPicked%5B%5D=39%2C40%2C41%2C42&rarityPicked%5B%5D=49%2C50%2C51%2C52` 由于是搜索并且人们稍后可能会访问相同的 url，因此 POST 不是一个选项（它不会“保存”为其他会话选择的复选框）。

我想要实现的是`http://example.com/p/carddisplay/var1/something/var2/something/var3/something...`或翻译上面的示例，`http://example.com/p/carddisplay/elementPicked%5B%5D/1/elementPicked%5B%5D/2/elementPicked%5B%5D/3/rarityType/Select/rarityPicked%5B%5D/39%2C40%2C41%2C42/rarityPicked%5B%5D/49%2C50%2C51%2C52`（或者如果可以删除 url 编码的 [] 也会很棒，因为它仍然丑陋得要命。欢迎任何让它更漂亮的建议）。

我在这里找到了与我想要的相反的东西-> [.htaccess mod_rewrite 在 url 中有多个变量](https://stackoverflow.com/questions/12217261/htaccess-mod-rewrite-with-multiple-variable-in-url)

但无论如何，我无法让它与它一起工作，因为我有不止一个`var[]`. *这实际上可以通过重写来实现吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:20:03.627

您可以在 a 中一一捕获变量[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并在其上循环

```
RewriteEngine On

RewriteBase /

# capture query string variables
RewriteCond %{QUERY_STRING} ^(.+?)=(.+?)&(.+)$
RewriteRule ^/?p/carddisplay.*$ $0/%1/%2?%3 [L]

# capture last variable and redirect
RewriteCond %{QUERY_STRING} ^(.+?)=(.+?)$
RewriteRule ^/?p/carddisplay.*$ $0/%1/%2? [R,L]

# redirect URL with empty query string to index.php
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^/?p/(.*)$ index.php?z=$1 [NC,L] 
```

只要有查询字符串并建立新的 URL，它就会循环，然后将重定向发送到客户端。

如果要删除`[]/%5B%5D`，请将 RewriteCond 更改为类似这样

```
RewriteCond %{QUERY_STRING} ^(.+?)%5B%5D=(.+?)(?:&(.*))?$ 
```

### 这里会发生什么？

当请求`/p/carddisplay?var1=value1&var2=value2`来自表单时，浏览器首先被重定向到`/p/carddisplay/var1/value1/var2/value2`. 当浏览器请求这个 URL 时，它会被重写并在内部重定向到`index.php?z=carddisplay/var1/value1/var2/value2`.

`index.php`这仅使用一个参数调用 PHP 页面，`$_GET['z']`该参数的值为`carddisplay/var1/value1/var2/value2`。

任何其他以 开头的请求`/p/...`都会在内部重定向到`index.php?z=...`没有剩余参数。

# ruby - 如何在 Ruby 中确定给定城市、州的时区（EST、PST、MST、CST、AKST、HST）？

> ID：14651118
> 
> 赞同：3
> 
> 时间：2013-02-01T16:48:15.223
> 
> 标签：ruby, ruby-on-rails-3, datetime, rubygems, timezone

所以我写了一个 Ruby 脚本，给定一个城市，州，比如纽约，你可以得到一个时区字符串，比如“美国/纽约”。我使用了地理编码器和时区宝石。但是有没有一种简单的方法（即内置函数或库）将“America/New York”映射到“EST”？将城市、州映射到 EST/PST/等是我追求的真正结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:07:59.823

我不是 Ruby 程序员，但我知道您要查找的缩写信息包含在 tzdb 数据库中。我浏览了[TimeZone](https://github.com/panthomakos/timezone) ruby​​ gem 的源代码，但没有找到任何关于缩写的内容，所以我的猜测是该库的作者认为它没有价值，因此没有将其包含在解析器中。 *（这只是一个假设。）*

我确实找到了另一个名为[TZInfo](http://tzinfo.rubyforge.org/)的 tzdb 数据库的 Ruby 实现，它似乎确实公开了每个区域的缩写属性。您可能想改为使用该库进行调查。不过，我无法就总体而言哪个更好提供具体建议。

正如其他人在评论中警告的那样，请确保您仅将缩写用于显示目的。它仅对人类有意义，并且仅在他们具有其他上下文（例如其位置）时才有意义。在全球范围内，时区缩写并不是唯一的。他们之间有很多歧义。您可以[在此处查看完整列表](http://www.timeanddate.com/library/abbreviations/timezones/)。

# verilog - 4'b1001 , 32'h0 代表什么（VERA SYNTAX）？

> ID：14651119
> 
> 赞同：1
> 
> 时间：2013-02-01T16:48:18.770
> 
> 标签：verilog, system-verilog

我是 vera 的新手，并试图理解语法。4b'和32'代表什么？这像4位和32位吗？

我很困惑，必须做一些与此相关的事情。

另一个问题是 bit [31:0] 是什么意思？这是否意味着第 31 位和第 0 位的任何内容？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:09:23.343

数字编号格式为：

`[width]'[base][value]`

所以 4'b1001 是一个 4 位的二进制值 1001 (9)

32'h0 是一个 32 位的十六进制值 0。

有时你会看到 'd 也是十进制的。

附加到总线末端的`[n:m]`是一个部分选择，这意味着选择该总线`n`的位`m`。因此 [31:0] 选择总线的低 32 位（如果是 32 位宽，则选择整个总线）。

# entity-framework - EF Code First DB 迁移：无法更新数据库以匹配当前模型，因为存在

> ID：14651120
> 
> 赞同：0
> 
> 时间：2013-02-01T16:48:18.957
> 
> 标签：entity-framework, database-migration

即使我设置了 AutomaticMigrationsEnabled = true;

我仍然收到此错误

> 无法更新数据库以匹配当前模型，因为存在待处理的更改并且自动迁移已禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。
> 
> 您可以使用 Add-Migration 命令将挂起的模型更改写入基于代码的迁移。

我尝试了 Add-Migration，然后是 Update-Database，但仍然出现此错误。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:10:24.853

我在这里遇到的问题是数据库类库 dll 没有被复制到主项目中。

# list - Lisp 移动列表中的元素

> ID：14651130
> 
> 赞同：1
> 
> 时间：2013-02-01T16:49:12.447
> 
> 标签：list, lisp

我有一个表格列表：

```
(or a b c (and d e) f g (and h i) (==> x y)) 
```

我喜欢像这样移动以以下开头的子`and`列表`or`：

```
(or (and d e) (and h i) a b c f g (==> x y)) 
```

我怎样才能做到这一点？我不确定什么是最好的方法，因为它是一个列表，我不能像使用其他数据结构一样放置任何我想要的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:56:46.163

```
? (stable-sort (rest '(or a b c (and d e) f g (and h i) (==> x y)))
               (lambda (x y)
                 (and (consp x) (eq (first x) 'and))))
((AND H I) (AND D E) A B C F G (==> X Y)) 
```

# javascript - 单击链接时如何阻止切换脚本结束？

> ID：14651134
> 
> 赞同：0
> 
> 时间：2013-02-01T16:49:30.487
> 
> 标签：javascript, jquery

我正在使用下面的代码来显示/隐藏导航及其子项。它按预期工作。当导航显示时，我单击其中一个子链接，它会关闭，然后将我带到一个新页面。

```
 // swap classes for lower level nav
  jQuery('.toggle').click(function() {
  $(this).toggleClass('toggle');
  $(this).toggleClass('toggle_open');
 });

 jQuery('a.portfolio').click(function(e) {
  e.preventDefault();
 }); 
```

Safari 不会这样做，但 Chrome 和 Firefox 会显示上述行为。当我观察检查员打开时发生的事情时；我单击父链接，应用切换类，单击子链接，切换类被交换回来。

**在将我带到请求的页面之前，如何阻止导航关闭？**

我的标记（对于导航来说非常规 - 我知道）：

```
<span class="toggle">
 <a href="portfolio/" class="level1 portfolio">Portfolio</a>
   <span>
     <a href="portfolio/item1/" class="first level2">item 1</a>
     <a href="portfolio/item2/" class="level2">item 2</a>
     <a href="portfolio/item3/" class="last level2">item 3</a>
   </span>   
</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:05:15.727

您应该添加`e.stopPropagation()`到 all`<a>`的点击处理程序，并删除`e. preventDefault()`这将阻止您进入新页面。

试试这个代码：

```
jQuery('.toggle').click(function() {
  $(this).toggleClass('toggle');
  $(this).toggleClass('toggle_open');
 });

 jQuery('.toggle a.level2').click(function(e) {
    e.stopPropagation();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:50:46.460

尽量`e.stopPropagation()`避免调用额外的事件处理程序。您可能需要更改事件处理程序的顺序。

# asp.net - 更新有特定值的数据库行

> ID：14651137
> 
> 赞同：0
> 
> 时间：2013-02-01T16:49:51.993
> 
> 标签：asp.net, sql

我需要更新存在某个值的行。返回 0 表示数据库未`ExecuteNonQuery`更新。在调试中单步执行时，更新被命中并包含正确的值，但是没有进行任何更新。

```
string verifySql = @"UPDATE UserInfo SET Verified='@Verified' 
WHERE UserID='@UserID'";

using (var con = newSqlConnection(
ConfigurationManager.ConnectionStrings["UserInfoDB"].ConnectionString))

 using (var cmd = new SqlCommand(verifySql, con))
{
        con.Open();
        cmd.Parameters.AddWithValue("@Verified", "Verified " + DateTime.Now);
        cmd.Parameters.AddWithValue("@UserID", user.UserId);
        Response.Write(cmd.ExecuteNonQuery());
        con.Close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:51:28.477

丢失 sql 语句中参数名称周围的单引号。您不需要它们，它们使您的代码将您的参数占位符解释为简单的字符串文字。

然后删除 con.Close() 行。你也不需要那个；它被`using`块覆盖。

最后，您还可以考虑将已验证的列更改为简单的 DateTime 类型，而不是尝试将该数据存储为文本。

# java - PowerMock，模拟一个静态方法，然后在所有其他静态上调用真实方法

> ID：14651138
> 
> 赞同：45
> 
> 时间：2013-02-01T16:49:53.437
> 
> 标签：java, junit, mockito, powermock

我正在设置模拟类的静态方法。我必须在带注释的`@Before`JUnit 设置方法中执行此操作。

我的目标是设置类来调用真正的方法，**除了**那些我明确模拟的方法。

基本上：

```
@Before
public void setupStaticUtil() {
  PowerMockito.mockStatic(StaticUtilClass.class);

  // mock out certain methods...
  when(StaticUtilClass.someStaticMethod(anyString())).thenReturn(5); 

  // Now have all OTHER methods call the real implementation???  How do I do this?
} 
```

我遇到的问题是，不幸的是，在`StaticUtilClass`方法中`public static int someStaticMethod(String s)`抛出了一个`RuntimeException`if 提供了一个`null`值。

所以我不能简单地将调用真实方法的明显路线作为默认答案，如下所示：

```
@Before
public void setupStaticUtil() {
  PowerMockito.mockStatic(StaticUtilClass.class, CALLS_REAL_METHODS); // Default to calling real static methods

  // The below call to someStaticMethod() will throw a RuntimeException, as the arg is null!
  // Even though I don't actually want to call the method, I just want to setup a mock result
  when(StaticUtilClass.someStaticMethod(antString())).thenReturn(5); 
} 
```

在我模拟了我感兴趣的方法的结果**后，**我需要设置默认的 Answer 以在所有其他静态方法上调用真实方法。

这可能吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-01T17:27:44.513

你在找什么叫做**partial mocking**。

在 PowerMock 中，您可以使用**mockStaticPartial**方法。

在 PowerMockito 中，您可以使用存根，它将仅存根已定义的方法，而其他保持不变：

```
PowerMockito.stub(PowerMockito.method(StaticUtilClass.class, "someStaticMethod")).toReturn(5); 
```

也不要忘记

```
@PrepareForTest(StaticUtilClass.class) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-08-21T11:12:13.210

虽然我迟到了，但我们可以通过显式指定来实现部分模拟并覆盖模拟对象的默认行为。

下面的例子展示了`PowerMockito`如果行为没有明确定义，我们如何调用真正的方法：

例如`PowerMockito.mockStatic(MyClass.class, new CallsRealMethods());`

# zend-framework - 如何在全球范围内访问自定义验证器？

> ID：14651139
> 
> 赞同：0
> 
> 时间：2013-02-01T16:49:54.347
> 
> 标签：zend-framework, zend-form, zend-validate

我在下面创建了一个自己的验证类`/library/My/Validate/`

在我的表格中，我有`$this->addElementPrefixPath('My_Validate', 'My/Validate', 'validate');`

我正在使用我的验证器，如下所示：

```
$this->addElement('text', 'aField', array(
    'validators' => array(
        array('TestValidator', false, array('messages' => 'test failed')
    ), 
)); 
```

这一切都有效。但是，我有兴趣通过两种方式改进这一点。

1.  我想让它让所有表单都可以访问我的验证器。以每种形式调用`addElementPrefixPath()`似乎都不是一种干净的方式。

2.  我想通过`My_Validate_TestValidator`而不是`TestValidator`让其他开发人员立即知道他们正在使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:21:14.613

要回答您的第一个问题，唯一真正简单的方法是创建您自己的表单实例 - My_Form_Abstract - 它有一个设置前缀路径的 init() 方法 - 然后当然调用父 init() .

我不知道有一种方法可以使您的第二种方法完美无缺。您需要存储前缀才能正确构建验证器加载器。但是，作为替代方案，您可以尝试使用全名创建类的新实例，然后将其添加到元素中：

```
$element = $this->getElement('aField');
$myValidateTestValidator = new My_Validate_TestValidator();
$element->addValidator($myValidateTestValidator); 
```

# php - file_get_contents 不返回 php 代码

> ID：14651145
> 
> 赞同：1
> 
> 时间：2013-02-01T16:50:10.620
> 
> 标签：php

我试图将字符串定义为硬编码字符和另一个文件内容的组合。我试过的是这个。

```
$html = "<h1>
           ".file_get_contents("file.php", TRUE)."
        <h1>"; 
```

问题是 file.php 只返回原始文本。无论 PHP 应该回显的是什么，都没有回显..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:54:21.200

您需要[输出缓冲](http://www.php.net/manual/en/ref.outcontrol.php)来做到这一点：

```
function generate_h1()
{
    ob_start();
    include('file.php');

    return '<h1>' . ob_get_clean() . '</h1>';
}

$html = generate_h1(); 
```

也可以看看：[`ob_start()`](http://www.php.net/ob_start) [`ob_get_clean()`](http://www.php.net/ob_get_clean%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:55:53.537

file_get_contents() 返回文件的实际来源，它不将其用作脚本。你需要的是要么

```
include 'file.php'; //or
require 'file.php'; 
```

或者更好

```
include_once 'file.php';
require_once 'file.php'; 
```

如果您在 file.php 中声明了函数，这会更好。如果你包含一个文件两次，它会抛出一个错误，说明一个函数已被多次声明。所以 include_once 如果它是你可以生活的东西，以防文件发生某些事情，或者 require_once 如果文件不存在，这将导致致命错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:51:13.480

您需要使用`include`or`require`代替`file_get_contents`. `file_get_contents`不会执行本地文件，它只会获取其内容 - 纯文本 PHP 代码。

# javascript - 在 jquery 中使用 js 变量

> ID：14651147
> 
> 赞同：0
> 
> 时间：2013-02-01T16:50:12.120
> 
> 标签：javascript, jquery

我遇到了这个 jquery 脚本的问题。我有一个高度：80% 的标签，宽度由 Javascript 计算。我试图在鼠标悬停时用jquery水平扩展它，所以宽度必须由JS再次计算。我正在使用的脚本如下：

```
 $(document).ready(function(){
      $("#bmenu1-1").mouseenter(function(){
    var imh=(window.innerHeight||screen.availHeight)*0.18;
    var imw=imh+"px";
        $("#bmenu1-1").animate({width: imw },500);
      });
    }); 
```

页面上没有任何反应（当我将鼠标放在元素上时），我尝试在那里放置一个 window.alert(imw) 但也没有任何反应！如果有人有任何想法......

谢谢你的帮助！

# iphone - 调用多个类中存在的方法的最佳方式

> ID：14651150
> 
> 赞同：0
> 
> 时间：2013-02-01T16:50:27.870
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有一个主要`UIViewController`的用户交互发生的地方。在主 ViewController 中有三个子视图。用户可以将单独的 ViewControllers 加载到 UIView 子视图中。

加载的每个子视图都处理数据输入。反过来，`firstResponders`被调用。我希望能够`firstRespnders`通过主 ViewController 关闭，也许可以使用“完成”按钮。

我在想我可以在每个单独的子视图中添加一个名称为 ex 的方法；

```
-(void) methodToResignResponders {} 
```

然后，在主 ViewController 中调用此方法到当前对用户打开的视图。依次辞去在子视图中处于活动状态的响应者。

*更多信息：*

这就是我将每个视图设置为主 ViewController 的子视图的方式：

```
UIViewController *calcVC;

//set up the view to be added depending on the name of the view that was passed

if ([viewName isEqualToString:@"Tax"]) {

    calcVC= [[TAXViewController alloc]initWithNibName:@"TAXViewController" bundle:nil];

}else if ([viewName isEqualToString:@"Rent"]){

    calcVC= [[RENTViewController alloc]initWithNibName:@"RENTViewController" bundle:nil];

}else //continues with more views...

//Then add it to the subview

[firstView addSubview:calcVC.view]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:33:23.780

不确定我是否掌握了要点，主要是因为听起来您已经自己解决了。:)

但是，据我所知，您所说的 ViewController 始终是一个名为 calcVC 的 UIViewController 实例。如果您所指的始终是这个 viewController 的视图，您可以简单地调用`[calcVC.view resignFirstResponder];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:13:57.037

您可以制定一个基本协议，您的所有子视图控制器都实现了该协议，该协议可以完成您需要的一切（辞职第一响应者和其他任何事情）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:27:57.213

不确定这是否回答了您的问题，但您可以遍历所有子视图并在它存在时调用它，如下所示：

```
for (UIView *subview in [self.view subviews]) {
    if ([subview respondsToSelector:@selector(resignFirstResponder)]) {
        [subview resignFirstResponder];
    }
} 
```

# vb.net - 如何从逗号分隔的字符串中选择一个值？

> ID：14651151
> 
> 赞同：1
> 
> 时间：2013-02-01T16:50:31.367
> 
> 标签：vb.net, csv, string-split

我有一个包含逗号分隔文本的字符串。逗号分隔的文本来自一个 excel .csv 文件，因此有数百行七列宽的数据。此文件中的一行示例如下：

2012-10-01,759.05,765,756.21,761.78,3168000,761.78

我想按第一列中的日期搜索数百行。一旦我找到正确的行，我想提取逗号分隔字符串的第一个位置的数字，所以在这种情况下，我想提取数字 759.05 并将其分配给变量“Open”。

到目前为止，我的代码是：

```
strURL = "http://ichart.yahoo.com/table.csv?s=" & tickerValue
strBuffer = RequestWebData(strURL)

Dim Year As String = 2012
Dim Quarter As String = Q4
If Quarter = "Q4" Then
    Dim Open As Integer =
End If 
```

一旦我可以将其缩小到正确的行，我认为类似 row.Split(",")(1).Trim) 的东西可能会起作用。

我已经做了很多研究，但我自己无法解决这个问题。有什么建议么！？！

***附加信息：***

```
Private Function RequestWebData(ByVal pstrURL As String) As String
    Dim objWReq As WebRequest
    Dim objWResp As WebResponse
    Dim strBuffer As String
    'Contact the website
    objWReq = HttpWebRequest.Create(pstrURL)
    objWResp = objWReq.GetResponse()
    'Read the answer from the Web site and store it into a stream
    Dim objSR As StreamReader
    objSR = New StreamReader(objWResp.GetResponseStream)
    strBuffer = objSR.ReadToEnd
    objSR.Close()

    objWResp.Close()

    Return strBuffer
End Function 
```

***更多附加信息：***

我的代码的更完整的图片

```
Dim tickerArray() As String = {"GOOG", "V", "AAPL", "BBBY", "AMZN"}

For Each tickerValue In Form1.tickerArray

        Dim strURL As String
        Dim strBuffer As String
        'Creates the request URL for Yahoo
        strURL = "http://ichart.yahoo.com/table.csv?s=" & tickerValue

        strBuffer = RequestWebData(strURL)

        'Create Array
        Dim lines As Array = strBuffer.Split(New String() {Environment.NewLine}, StringSplitOptions.None)

        'Add Rows to DataTable
        dr = dt.NewRow()
        dr("Ticker") = tickerValue
        For Each columnQuarter As DataColumn In dt.Columns
            Dim s As String = columnQuarter.ColumnName
            If s.Contains("-") Then
                Dim words As String() = s.Split("-")
                Dim Year As String = words(0)
                Dim Quarter As String = words(1)
                Dim MyValue As String
                Dim Open As Integer
                If Quarter = "Q1" Then MyValue = Year & "-01-01"
                If Quarter = "Q2" Then MyValue = Year & "-04-01"
                If Quarter = "Q3" Then MyValue = Year & "-07-01"
                If Quarter = "Q4" Then MyValue = Year & "-10-01"
                For Each line In lines
                    Debug.WriteLine(line)
                    If line.Split(",")(0).Trim = MyValue Then Open = line.Split(",")(1).Trim
                    dr(columnQuarter) = Open
                Next
            End If

        Next
        dt.Rows.Add(dr)
    Next 
```

现在在`For Each line in lines`循环中，`Debug.WriteLine(line)`输出 2,131 行：

从

```
Date,Open,High,Low,Close,Volume,Adj Close
2013-02-05,761.13,771.11,759.47,765.74,1870700,765.74
2013-02-04,767.69,770.47,758.27,759.02,3040500,759.02
2013-02-01,758.20,776.60,758.10,775.60,3746100,775.60 
```

一路...

```
2004-08-19,100.00,104.06,95.96,100.34,22351900,100.34 
```

但是，我期望的是在循环`Debug.WriteLine(line)`中一次输出一行。`For Each line in lines`所以我希望第一个输出是`Date,Open,High,Low,Close,Volume,Adj Close`，下一个输出是`2013-02-05,761.13,771.11,759.47,765.74,1870700,765.74`. 我预计这会发生 2,131 次，直到最后一个输出是`2004-08-19,100.00,104.06,95.96,100.34,22351900,100.34`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:14:21.950

您可以遍历这些行并调用`String.Split`以解析每行中的列，例如：

```
Dim lines() As String = strBuffer.Split(New String() {Environment.NewLine}, StringSplitOptions.None)
For Each line As String In lines
    Dim columns() As String = line.Split(","c)
    Dim Year As String = columns(0)
    Dim Quarter As String = columns(1)
Next 
```

但是，有时 CSV 并不是那么简单。例如，电子表格中的单元格可能包含逗号字符，在这种情况下，它将以 CSV 格式表示，如下所示：

```
example cell 1,"example, with comma",example cell 3 
```

为确保您正确处理所有可能性，我建议使用[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类。例如：

```
Using parser As New TextFieldParser(New StringReader(strBuffer))
    parser.TextFieldType = FieldType.Delimited
    parser.SetDelimiters(",")
    While Not parser.EndOfData
        Try
            Dim columns As String() = parser.ReadFields()
            Dim Year As String = columns(0)
            Dim Quarter As String = columns(1)
        Catch ex As MalformedLineException
            ' Handle the invalid formatting error
        End Try 
    End While 
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:08:49.973

您可以使用`String.Split`这个 linq 查询：

```
Dim Year As Int32 = 2012
Dim Month As Int32 = 10
Dim searchMonth = New Date(Year, Month, 1)
Dim lines = strBuffer.Split({Environment.NewLine}, StringSplitOptions.None)
Dim dt As Date
Dim open As Double
Dim opens = From line In lines
    Let tokens = line.Split({","c}, StringSplitOptions.RemoveEmptyEntries)
    Where Date.TryParse(tokens(0), dt) AndAlso dt.Date = searchMonth AndAlso Double.TryParse(tokens(1), open)
If opens.Any() Then
    open = Double.Parse(opens.First().tokens(1))
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:54:06.940

我会将其分解为`List(of string())`- 每一行都是列表中的一个新条目。

然后遍历列表并查看 Value(0)。 `If Value(0) = MyValue, then Open = Value(1)`

# php - 如何使用 Codeigniter 自动添加斜线？

> ID：14651152
> 
> 赞同：0
> 
> 时间：2013-02-01T16:50:33.003
> 
> 标签：php, codeigniter, addslashes

我想将 addlashes() 应用于所有通过的帖子元素

$this->input->post('my_var');

我怎样才能做到这一点 ？wordpress 下是否有类似过滤器的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T16:41:37.090

我认为你想要一些全球性的东西。我的想法是在 codeigniter 中编辑全局 post 函数以在所有内容上使用 addlashes。您可以在以下位置找到该功能：

**/yourfolder/system/core/Input.php**

您可以通过将其设置为全局来逃避它。

```
function post($index = NULL, $xss_clean = FALSE)
    {
        // Check if a field has been provided
        if ($index === NULL AND ! empty($_POST))
        {
            $post = array();

            // Loop through the full _POST array and return it
            foreach (array_keys($_POST) as $key)
            {
                $post[$key] = addslashes($this->_fetch_from_array($_POST, $key, $xss_clean));
            }
            return $post;
        }

        return addslashes($this->_fetch_from_array($_POST, $index, $xss_clean));
    } 
```

尽管我并不认为它是修改全局函数的好解决方案，但这应该可以解决您的问题。

编辑：我看到 input->post**已经这样做了**，您不需要另外添加该功能。

# c++ - 将点添加到图表的程序以代码 0xc0000409 退出

> ID：14651158
> 
> 赞同：1
> 
> 时间：2013-02-01T16:50:51.833
> 
> 标签：c++, arrays, visual-studio-2010, charts

我编写了一个函数，将richTextbox 中的行添加到数组中，然后将它们添加到图表中。

```
 double y[] = { 0 };
        double x[] = { 0 };

        String^ name = "Pobrana moc";
        chart1->Series->Clear();
        chart1->Series->Add(name);

        for (int i=0; i < richTextBox1->Lines->Length; i++){ 
            y[i] = Convert::ToDouble(richTextBox1->Lines[i]);
            x[i] = i+1;
            chart1->Series[name]->Points->AddXY( x[i] , y[i] );
        } 
```

我编译程序没有检测到问题。当我运行它并调用此函数时，程序关闭并显示以下消息：程序'[6356] GUI.exe：托管（v4.0.30319）'已退出，代码为-1073740791（0xc0000409）。

如果我将所有“i”替换为数字，则效果很好：

```
 y[0] = Convert::ToDouble(richTextBox1->Lines[0]);
            x[0] = 1;
            chart1->Series[name]->Points->AddXY( x[0] , y[0] ); 
```

我做错了什么，或者有没有其他方法可以让它工作？我需要它向图表添加与richTextbox 中的行一样多的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:52:14.773

您正在写结束`x`and `y`，这是未定义的行为。您需要确保它们足够大以容纳`richTextBox1->Lines->Length`元素。

# servlets - 创建会话对象

> ID：14651160
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:50:56.920
> 
> 标签：servlets

当我学习如何在 Servlet 中创建会话时。我读到 Servlet API 提供了一个调用`HttpSession`来创建会话的类。

```
HttpSession session = request.getSession(true); 
```

然后，我在查看一些示例代码并看到了这段代码。

```
// Get the bean from session.

Customer customer = request.getSession(true).getAttribute("userinfo"); 
```

这里到底发生了什么？他们如何在不使用课程的情况下创建会话`HttpSession`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:55:40.807

线

```
Customer customer = request.getSession(true).getAttribute("userinfo"); 
```

相当于

```
HttpSession tempVariable = request.getSession(true);
Customer customer = tempVariable.getAttribute("userinfo"); 
```

但没有临时变量。这只是方法链。`request.getSession(true)`是一个类型为 的表达式`HttpSession`，因为该`getSession()`方法返回一个`HttpSession`。`HttpSession`所以你可以在这个表达式上调用方法。

请注意，这`request`是一个 HttpServletRequest，而不是`HttpServlet`您的问题所说的。

# javascript - jQuery.merge() 和 JavaScript 原生函数 concat() 有什么区别？

> ID：14651162
> 
> 赞同：9
> 
> 时间：2013-02-01T16:51:01.907
> 
> 标签：javascript, jquery

我想将两个数组合并为一个。我发现有两个功能可以完成这项工作；一个是`jQuery.merge()`，另一个是 JavaScript 内置函数`concat()`。他们似乎做同样的事情，我发现[了这个](http://jsperf.com/arrays-jquery-merge-vs-concat)。它说：“合并创建了一个更小的占用空间，因为它循环遍历原始数组并添加新项目。Concat 是一个内置的 Javascript 函数，应该更快，但占用空间更大。” 我不确定这个说法是否属实，还有其他区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T17:04:52.137

该引用是正确的，这两个函数实际上并没有做同样的事情，一个将两个数组合并到一个（第一个参数）中，第二个从两者构建一个新数组。

它所指的“足迹”是在任何时候都将使用的最大内存量。由于合并只会复制第二个数组，它应该使用更少的内存，因为在任何时候，它只需要在内存中有 2 个数组。

内置函数需要有 3 个数组，并且新数组必须是被连接的两个数组的大小。

假设数组 A 和 B 中有 1000 个元素，合并后的数组为 C：

*   合并需要 1000+1000[a->c] 和 1000[b] 或 3000 个点。
*   Concat 需要 1000+1000[c] 和 1000[a] 和 1000[b] 或 4000 个点。

如果使用大量内存，更少的内存可能会更快，更少的移动也可能更快。

[我发现的一些测试](http://www.sitepoint.com/javascript-fast-string-concatenation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T06:26:52.760

在 tmaster 的情况下，他使用 jQuery.merge() 来合并 2 个数组。实际上，JQuery.merge 可以用来将 jQuery Object(jQuery Object has length prop too) 与 Array 合并。这里是 jQuery.merge() 的代码：

```
merge: function( first, second ) {
    var len = +second.length,
        j = 0,
        i = first.length;

    for ( ; j < len; j++ ) {
        first[ i++ ] = second[ j ];
    }

    first.length = i;

    return first;
}, 
```

因此，对于具有长度属性的 JQuery 对象，它可以使用合并将第二个 JQuery 对象属性（如 0,1）复制到第一个 JQuery 对象。这是一个示例：

```
 pushStack: function( elems ) {

    // Build a new jQuery matched element set
    var ret = jQuery.merge( this.constructor(), elems );

    ...

    return ret;
}, 
```

this.constructor() 也返回一个 jQuery 对象，元素。但是 concat 不能，只能与 Array 一起使用。这也是 concat 和 JQuery.merge 之间的差异。

# android - 使用 Android Facebook SDK 进行编程登录

> ID：14651163
> 
> 赞同：2
> 
> 时间：2013-02-01T16:51:04.750
> 
> 标签：android, facebook-android-sdk

我已阅读此处的文档和源代码以及其他相关问题，但我仍然在使用适用于 Android 的 Facebook SDK 3 授权/登录我的应用程序时遇到问题。

我不想使用提供的“登录”按钮。

以下是相关代码：

在 Activity.onCreate 我开始会话：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Session session = Session.getActiveSession();
    mPrefs = getSharedPreferences("facebook_storage", MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (session == null) {
        if (access_token != null) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putString("access_token", null);
            editor.commit();
            AccessToken accessToken = AccessToken.createFromExistingAccessToken(access_token, null, null, null, null); 
            session.open(accessToken, this);

        } else {
            session = new Session(getApplicationContext());
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this).setCallback(this));
        } else if (session.getState().equals(SessionState.CREATED)) {
            System.out.println("Session created, no token. I guess");
            session.openForRead(new Session.OpenRequest(this).setCallback(this));
        }
    } 
```

这会触发：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    } 
```

这又会触发下一个块，输入 at `if (session.isOpened())`：

```
public void call(Session session, SessionState state, Exception exception) {
    // TODO Auto-generated method stub
    if (session == null) {
        MmfLogger.error("FacebookLogin session == null in call()");
    } else if (session.isOpened()) {
        System.out.println("Session.StatusCallback success: " + session.getState());
        Request request = new Request(session, REQUEST_FIELDS, null, null, this);
        request.executeAsync();
    }   
    if (!session.isOpened()) {
        System.out.println("session failed to open");
    }
    if (session.isOpened() && session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
        Request request = new Request(session, REQUEST_FIELDS, null, null, this);
        request.executeAsync();
    } else if (session.isOpened() && session.getState().equals(SessionState.CREATED)) {
        System.out.println("session isOpened and state is created");
    }

} 
```

从这里我得到一个错误，指出我需要一个活动令牌。但是，在发出请求之前，我可以看到令牌。会议有一个。我哪里错了？

感谢您的时间。

# c# - 我必须在 Windows 服务中实现 Stop 方法吗？

> ID：14651165
> 
> 赞同：6
> 
> 时间：2013-02-01T16:51:05.843
> 
> 标签：c#, .net, windows-services

我正在查看一些 Windows 服务形式的遗留代码。

我注意到在他们的 OnStop() 方法中，他们只是写入事件日志，但是没有对象清理或终止任何线程的控制。有 2 个后台线程在服务启动时启动，所以我想知道，这个服务真的停止了吗？而且，如果是这样，线程是否正确关闭？

stop 方法是物理地终止进程还是只是一个逻辑停止，如果不实现它实际上不会做任何事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:56:03.887

[服务停止时调用OnStop()](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstop.aspx)方法，您可以在此处清除对象并停止线程等。如果您的线程在服务停止时不需要做任何特别的事情，那么您可以离开 OnStop 方法

> OnStop 预计将在派生类中被覆盖。为了使服务有用，OnStart 和 OnStop 都应该在您的服务类[msdn中实现](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstop.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:22:18.543

停止服务与终止服务不同。这是一个*合乎逻辑*的条件。管理员会期望您在服务启动后停止做任何事情。所以你的服务不会妨碍他接下来要做的任何事情。比如说备份目录或编辑配置文件等。

您不必实际实现这一点*。*Windows 也不会强制执行它，当您报告您停止并且不会阻止您执行任何操作时，服务管理器会相信您的话。但当然有让管理员感到困惑的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:55:24.620

回答第一个问题它终止了进程。但它必须实现清理代码，因为一个常见的场景是你让线程在服务上运行并且它被停止但进程仍然存在，因为线程。我对左线程有同样的经验，所以我们应该实现线程清理代码和其他可以防止进程终止的资源。

# ios - 如何在自定义 Xcode 项目模板中创建或定义新目标

> ID：14651166
> 
> 赞同：14
> 
> 时间：2013-02-01T16:51:11.883
> 
> 标签：ios, objective-c, xcode, project-template

***TL;DR：****在创建新的 Xcode 项目时，我应该将哪些 XML 片段添加到我的 TemplateInfo.plist 文件中以创建第二个编译器目标？*

在处理我自己的 Xcode 项目模板时，我试图让[KIF 集成测试](https://github.com/square/KIF)以一种“开箱即用”的方式工作。KIF 要求您[复制常规目标](https://github.com/square/KIF#create-a-testing-target)，然后修改一些属性。这通常是手动完成的，但这既需要时间，又会留下错误的余地，而它是如此平凡以至于可以自动化。

为清楚起见，我希望在此屏幕截图中**自动创建****第二个目标**：

 **![手动复制后的截图](../Images/006547d123f37106d4deb1b0ca1ea8ed.png)

我在整个模板定制方面已经走得很远了，但我就是不知道如何创建另一个目标，即使如果你点击该复选框，模板会为单元测试创​​建一个目标。*苹果是如何做到这一点的*？

[在我的 github 存储库中](https://github.com/epologee/Project-Template-iOS)查看模板项目。如果你想看看我在用 KIF 做什么（即使对于这个问题的答案，这不是必需的），请查看[KIF Integrations.xctemplate](https://github.com/epologee/Project-Template-iOS/tree/master/template/Additions/KIF%20Integrations.xctemplate)文件夹中的 plist。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T04:32:11.310

如果我正确理解你的问题...

要自动复制构建目标而不手动创建新目标并进行设置，请选择要复制的目标并按 CMD+D

* * *

（关于如何使用（更有可能）构建方案（对于想知道这个问题的未来用户）做同样事情的说明如下：

在 xCode 中单击产品（顶部栏...在文件、编辑、视图等对面），然后在下拉菜单的底部单击“新方案”。

要复制您的方案（如您建议的那样），请单击“编辑方案”而不是“新方案”，然后单击“复制方案”**

# linux - 具有多个遥控器和操作顺序的 git 工作流

> ID：14651167
> 
> 赞同：0
> 
> 时间：2013-02-01T16:51:11.993
> 
> 标签：linux, git, github

我有一个裸 git 存储库，用于在 linux 机器上推送和拉取（我们将裸 git 存储库称为远程*originlinux*）。从我的具有*originlinux*作为远程的工作存储库中，我推拉，直到最后我决定把它放在 github 上。我在他们的 web gui 上添加了 github 的存储库，并使用后面的命令在我的工作存储库中添加远程存储库（我们称之为远程*origingithub*），然后`git remote add``git pull --rebase``git push`（在推送之前拉，因为不允许我简单地推送到新创建的 github 存储库而没有得到其中之一：'提示：更新被拒绝，因为您当前分支的尖端落后'。我认为这与他们创建自述文件的选项）。这里的问题是，执行这些步骤后，*originlinux存储库与**origingithub*完全不同步*即使它们具有完全相同的提交并且从相同的确切工作存储库推送到存储库。有人可以详细解释为什么会发生这种情况，以及我可以采取哪些不同的措施来防止这种情况发生，而无需重新排序我创建远程存储库的方式？看起来我正在使用的工作流程或操作顺序在 git 领域没有意义，但是您如何在一个工作副本上保持多个远程存储库同步？*

 *谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:06:38.123

这两个存储库**没有**相同的提交。

当您这样做时`git pull --rebase`，您重写了项目的整个历史记录，以便每个修订版都包含该自述文件。所以历史中的每个提交都会有一个不同的 SHA1 标识符。

有几种方法可以让您从中恢复。

首先，您可以恢复本地存储库的状态以匹配该状态或您的第一个（非 github）远程。这将消除您在 github 上创建的自述文件（如果需要，您可以将其复制到其他位置并稍后将其添加回 git），以及您尚未推送到第一个远程的任何更改（包括尚未承诺）。

```
git reset --hard originlinux/master
git push -f origingithub 
```

那里的`-f`选项会导致强制推送，即使这正在删除一些提交。这是一般情况下应该避免的事情，但有时是必要的，例如在这种情况下。

另一种选择是强制推送到您的第一个遥控器，接受由变基引起的新历史。

```
git push -f originlinux 
```

如果您提到的三个存储库是唯一的，那么您使用哪种方法并不重要。如果还有其他存储库，您可能想要尝试确定哪个版本的历史更广为人知，并保留该版本。*

# r - 对矩阵中的列值进行采样，无需替换

> ID：14651171
> 
> 赞同：4
> 
> 时间：2013-02-01T16:51:28.467
> 
> 标签：r

我对 R 有一些经验，但总是难以编写新代码。我在处理当前项目时在这里找到了几个非常有用的帖子，但似乎找不到下一步。这是我到目前为止所做的：

*   导入一个 20x20 .csv 的排名；每列包含从 1 到 20 的每个整数的一个实例，因此所有 colSums 都是 210。 rowSums 各不相同。

*   使用此处的帖子从原始矩阵中随机采样 4 行并将它们放入新的 4x20 矩阵中。

现在，我需要从每行中抽取 5 列，*而不需要替换列。* 也就是说，我只需要使用每列一次，并且每行有五个值。（我不喜欢这是否给了我一个在正确位置有 20 个值和 60 个零的矩阵，或者如果我得到 5 个值的 4 个向量。我想我有点想要矩阵？）

如果上下文有帮助，我正在尝试根据课堂上的主题排名创建小组。行是主题，列是选民（学生）。最终我想在for循环中创建这些随机分配，并多次运行程序以希望自动优化选择（通过一些测量；显然有不同的优化方法）而不是盯着原始矩阵，这就是我过去做过。

这是我的 4x20 矩阵：

```
 J  E  I  S  A  N  H  T  M  B  D  K  O  G  P  L  Q  R  F  C
2   5  4  1  1  5 13  3  4 13 11 14 14 20  9 15  9 11 17  9 15
13 20 19 17 19 19  7  4 19  7  1  5  1 17 15 10  6  7 14  6  3
14 18  2 12 14 11 19 18 15 19  4  8 19  2  2 13  7  9  1 12 10
18  4  7 18  5 12 18  2 20  6  7 16 15  5 18  1 13  2 18 14 16 
```

这是我想要的（一个版本）：

```
 J  E  I  S  A  N  H  T  M  B  D  K  O  G  P  L  Q  R  F  C
2   0  4  1  1  0  0  3  4  0  0  0  0  0  0  0  0  0  0  0  0
13  0  0  0  0  0  7  0  0  0  1  5  1  0  0  0  0  0  0  0  3
14  0  0  0  0 11  0  0  0  0  0  0  0  0  2  0  7  0  1 12  0
18  4  0  0  0  0  0  0  0  6  0  0  0  5  0  1  0  2  0  0  0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T17:13:37.277

您可以使用`apply`. 以下命令将从每行中随机抽取五个值并返回结果矩阵：

```
apply(mat, 1, sample, 5) 
```

您可能希望转置返回的矩阵`t`以匹配原始矩阵。

* * *

如果您只想使用每列一次，可以使用以下命令：

```
mat[cbind(seq(nrow(mat)), sample(ncol(mat), 5 * nrow(mat)))] 
```

它将返回一个包含值的向量。

要匹配所需的输出格式（包括零和随机选择的值的矩阵），您可以使用以下策略：

```
# create an index of the values to be kept
idx <- cbind(seq(nrow(mat)), sample(ncol(mat), 5 * nrow(mat)))

# create a new matrix of zeroes
mat2 <- matrix(0, ncol = ncol(mat), nrow = nrow(mat))

# copy the values from the original matrix to the new one
mat2[idx] <- mat[idx] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:39:50.497

假设您`data.frame`的名称为“x”，这是一种简单的方法，可`list`生成单行`data.frame`s。

这是您的数据：

```
x <- structure(list(J = c(5L, 20L, 18L, 4L), E = c(4L, 19L, 2L, 7L
  ), I = c(1L, 17L, 12L, 18L), S = c(1L, 19L, 14L, 5L), A = c(5L, 
  19L, 11L, 12L), N = c(13L, 7L, 19L, 18L), H = c(3L, 4L, 18L, 
  2L), T = c(4L, 19L, 15L, 20L), M = c(13L, 7L, 19L, 6L), B = c(11L, 
  1L, 4L, 7L), D = c(14L, 5L, 8L, 16L), K = c(14L, 1L, 19L, 15L
  ), O = c(20L, 17L, 2L, 5L), G = c(9L, 15L, 2L, 18L), P = c(15L, 
  10L, 13L, 1L), L = c(9L, 6L, 7L, 13L), Q = c(11L, 7L, 9L, 2L), 
      R = c(17L, 14L, 1L, 18L), F = c(9L, 6L, 12L, 14L), C = c(15L, 
      3L, 10L, 16L)), .Names = c("J", "E", "I", "S", "A", "N", 
  "H", "T", "M", "B", "D", "K", "O", "G", "P", "L", "Q", "R", "F", 
  "C"), class = "data.frame", row.names = c("2", "13", "14", "18"
  )) 
```

和抽样：

```
set.seed(1)
temp <- matrix(sample(20), nrow = 4)
do.call(rbind, lapply(1:4, function(y) {
  x[y, -temp[y, ]] <- 0
  x[y, ]
}))
#     J E  I S  A  N H  T M B D  K O  G  P  L Q R F  C
# 2   0 0  0 1  0 13 0  0 0 0 0 14 0  0  0  0 0 0 9 15
# 13 20 0  0 0  0  0 0 19 0 1 0  0 0 15  0  0 7 0 0  0
# 14  0 0 12 0 11  0 0  0 0 0 8  0 0  0 13  0 0 1 0  0
# 18  0 7  0 0  0  0 2  0 6 0 0  0 5  0  0 13 0 0 0  0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:07:02.017

这应该工作

```
data <- matrix(sample(letters,20*4,rep=T),4) # Create a fake data

sample <- sample(1:20) # Scramble the order of the columns

out <- matrix(0,4,5) # 5 letters for 4 lines

for (i in 1:4) {
 out[i,] <- data[i,sample[1:5 + (i-1)*5]] # Sample 5 values of each line
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-31T18:58:00.470

使用这个`Matrix`包，我们可以很容易地从索引构建它：

```
i <- sample(nrow(X), ncol(X), replace=TRUE)
j <- seq(ncol(X))
sparseMatrix(i,j,x=X[cbind(i,j)]) 
```

产量：

```
> sparseMatrix(i,j,x=X[cbind(i,j)])
4 x 20 sparse Matrix of class "dgCMatrix"

[1,] . .  .  .  . 13 .  . 13 . 14  . . 9  .  . .  . . 15
[2,] . .  .  .  .  . .  .  . .  .  . . .  .  . .  . 6  .
[3,] . .  . 14 11  . . 15  . 4  . 19 2 . 13  . .  . .  .
[4,] 4 7 18  .  .  . 2  .  . .  .  . . .  . 13 2 18 .  . 
```

# android - 为 ListView getView 扩展 BaseAdapter 不正确地更新视图

> ID：14651172
> 
> 赞同：0
> 
> 时间：2013-02-01T16:51:29.373
> 
> 标签：android, android-view, baseadapter

我有一个 RSS 提要查看器，想向用户展示他们上次收听特定提要的时间。

这适用于列表中加载的第一个项目（在当前视图中可见的项目），但是当用户向下滚动列表视图时，`lastViewedText`对于每个其他查看的提要都将隐藏。此外，当用户向上滚动到顶部（`lastViewedText`之前成功显示的位置）时，`lastViewedText`现在隐藏。BaseAdapters`getView`方法是我设置可见性的地方。

自定义 BaseAdapter：

```
public class PodcastAdapter extends BaseAdapter{

    private ArrayList<Podcast> feed;
    private LayoutInflater inflater = null;

    public PodcastAdapter(Activity a, ArrayList<Podcast> feed){
        this.feed = feed;
        inflater = (LayoutInflater)a.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return feed.size();
    }

    public Object getItem(int position) {
        return feed.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if(convertView == null)
            vi = inflater.inflate(R.layout.rss_listview_item, null);

        TextView title = (TextView)vi.findViewById(R.id.title);
        TextView desc = (TextView)vi.findViewById(R.id.description);
        TextView date = (TextView)vi.findViewById(R.id.date);
        TextView lastViewedText = (TextView)vi.findViewById(R.id.lastViewedText);

        Podcast feedIndex = feed.get(position);

        title.setText(feedIndex.Title);
        desc.setText(feedIndex.Description);
        date.setText(feedIndex.Date);
        lastViewedText.setText(feedIndex.LastViewedText);

        if(feedIndex.LastViewedText.equals("")){
            lastViewedText.setVisibility(View.GONE);
        }

        return vi;
    }
} 
```

为什么视图没有正确更新？标题、描述、日期都加载正确！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:55:06.143

```
 if(feedIndex.LastViewedText.equals("")){
            lastViewedText.setVisibility(View.GONE);
        } else {
            lastViewedText.setVisibility(View.VISIBLE);
    } 
```

该视图隐藏在转换视图中，您不要取消隐藏它:)

此外，您可以使用[TextUtils.isEmpty(CharSequence string)](http://developer.android.com/reference/android/text/TextUtils.html#isEmpty%28java.lang.CharSequence%29)来检查 String 是否为空或 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:54:53.220

改为这样做：

```
 if(feedIndex.LastViewedText.equals("")){
        lastViewedText.setVisibility(View.GONE);
    }else{
        lastViewedText.setVisibility(View.VISIBLE);
    } 
```

# c# - 同时使用 Horizo ntalDrag 和 VerticalDrag XNA

> ID：14651178
> 
> 赞同：0
> 
> 时间：2013-02-01T16:51:43.677
> 
> 标签：c#, xna, gesture

我目前正在 VS2012 上使用 C#/XNA 构建游戏，在我的代码中，我希望用户在切换到垂直或水平手势时触摸一个对象并垂直和水平拖动它，而不用抬起手指。这是我的代码示例：

```
protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // Move the sprite by speed, scaled by elapsed time. 
        //shipPosition += shipSpeed; 

        // check whether gestures are available
        while (TouchPanel.IsGestureAvailable)
        {
            // read the next gesture
            GestureSample gesture = TouchPanel.ReadGesture();

            // has the user tapped the screen?
            switch (gesture.GestureType)
            {
                case GestureType.HorizontalDrag:

                    shipPosition += gesture.Delta;

                    break;
                case GestureType.VerticalDrag:

                    shipPosition += gesture.Delta;

                    break;
            }
        }

        // Make sure that the ship does not go out of bounds 
        shipPosition.X = MathHelper.Clamp(shipPosition.X, 35 / 2 , 765 + 35 / 2 - shipTexture.Width);
        shipPosition.Y = MathHelper.Clamp(shipPosition.Y, 21 / 2, 451 + 21 / 2 - shipTexture.Height);

        // TODO: Add your update logic here

        base.Update(gameTime);
    } 
```

有人可以建议吗？我在某处看到我必须使用原始输入触摸，但我想知道它是如何与拖动一起工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:22:04.107

听起来您需要改用 Touch Location

[http://msdn.microsoft.com/en-us/library/ff434208.aspx](http://msdn.microsoft.com/en-us/library/ff434208.aspx)

往下看

> 从触控输入设备获取多点触控数据

# c++ - 对于客户端服务器程序，并行接收多个客户端连接请求的最佳方法是什么？

> ID：14651181
> 
> 赞同：2
> 
> 时间：2013-02-01T16:51:53.160
> 
> 标签：c++, c, linux, sockets, client-server

该程序是在 Linux 上用 C 语言开发的客户端服务器套接字应用程序。有一个远程服务器，每个客户端都连接到该服务器并将自己记录为在线。在任何给定时间点，很可能会有多个客户端在线，所有客户端都试图连接到服务器以将自己记录为在线/忙碌/空闲等。那么服务器如何处理这些并发请求。什么是好的设计方法（每个连接请求的分叉/多线程可能？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:02:13.637

我个人会对服务器使用事件驱动的方法。在那里你注册一个回调，一旦连接到达就会被调用。以及每当套接字准备好读取或写入时的事件回调。

与线程相比，拥有大量连接，您将获得巨大的性能和资源优势。但我也更喜欢这个，因为它的连接数较少。

如果您确实需要使用多个内核，或者如果您有一些请求可能需要更长的时间来处理并且在没有线程的情况下处理它太复杂，我只会使用线程。

我使用[libev](http://software.schmorp.de/pkg/libev.html)作为基础库来处理事件驱动的网络。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:58:47.940

一般来说，您需要一个线程池来服务请求。

一个典型的结构将从一个线程开始，该线程除了将传入请求排队之外什么都不做。由于它做的不多，一个线程通常很容易跟上网络的最大速度。

这会将项目放入某种并发队列中。然后你有一个其他线程池从队列中读取项目，做需要的事情，然后将结果存放在另一个队列中（并重复，直到服务器关闭）。

最后，您有另一个单线程，它只从结果队列中获取项目，并将回复发送给客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:35:13.267

看看 Comer 的“Internetworking with TCP/IP”第 3 卷（BSD 套接字版本），它有详细的示例，用于编写服务器和客户端的不同方式。完整的代码（不幸的是没有解释）在网上。或者在[http://tldp.org](http://tldp.org)中翻找，您会找到一系列教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:25:21.350

最好的方法是结合事件驱动模型和多线程模型。

您创建了一堆非阻塞套接字，但线程数应该少得多。即每个线程 10 个套接字。

然后，您只需以非阻塞模式在每个线程上侦听一个事件（传入请求）并在它发生时对其进行处理。

这种技术通常比单独的非阻塞套接字或多线程模型执行得更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T03:30:39.527

select 或 poll 或 epoll

这些是 *nix 系统上的工具，用于将多个事件源（连接）聚合到单个等待点。服务器将连接添加到数据结构中，然后通过调用 select 等来等待。当这些连接中的任何一个发生问题时，它会被唤醒，找出哪个连接，处理它，然后重新进入睡眠状态。详见手册。

在这些机制之上构建了几个更高级别的库，这使得它们的编程更加容易，例如 libevent、libev 等。

# c++ - 在 Windows 上使用 4Gb 的 Standby 抛出 bad_alloc

> ID：14651182
> 
> 赞同：2
> 
> 时间：2013-02-01T16:51:59.370
> 
> 标签：c++, windows

我有一个程序一直在抛出一个`std::bad_alloc`。该平台是 Windows 8 x64，并且正在使用 ICC 进行编译，没有进行优化。

我注意到当“空闲”内存量达到 0 时会引发异常，但仍有大约 4Gb 的“备用”内存剩余。根据我所知道的和[这个](https://stackoverflow.com/questions/11089638/what-is-the-standby-list-in-windows-memory-management)答案，我认为当可用内存耗尽时，将使用备用内存。这似乎没有发生。

该问题似乎不是由单个大分配引起的。在深度递归期间始终抛出异常，因此有问题的分配已经完成了很多次。在抛出过程中堆栈看起来像这样：

```
 KernelBase.dll!_RaiseException@16()    Unknown
    msvcr110d.dll!_CxxThrowException(void * pExceptionObject, const _s__ThrowInfo * pThrowInfo) Line 152    C++
    msvcr110d.dll!operator new(unsigned int size) Line 63   C++
    Project2.exe!list_make(int elt, void * list) Line 85    C++
    Project2.exe!`anonymous-namespace'::ReverseHelper(void * list, void * reverse) Line 225 C++
    Project2.exe!`anonymous-namespace'::ReverseHelper(void * list, void * reverse) Line 227 C++
    Project2.exe!`anonymous-namespace'::ReverseHelper(void * list, void * reverse) Line 227 C++ 
```

传递给的大小`operator new`是 only `12`。关于什么可能导致这种行为的任何想法？

# java - 无效的 Xsl 格式（或）文件名

> ID：14651183
> 
> 赞同：1
> 
> 时间：2013-02-01T16:52:01.260
> 
> 标签：java, wmic

我想做的是在计算机中获取所有已安装的应用程序，并且我决定使用 java 的命令提示符的 /output 命令。我的代码在我的计算机中与这行代码一起正常工作：

```
Process proc = rt.exec("wmic /output:C:\\Users\\Public\\Documents\\list.csv product get name,version /format:csv "); 
```

但是，当我尝试在另一台计算机上运行该程序时，我遇到了“无效的 XSL 格式或文件名”错误。我尝试阅读其他问题，并在上​​面的代码之前添加了这行代码：

```
proc2 = rt.exec("xcopy /y C:\\Windows\\System32\\wbem\\en-US\\*.xsl C:\\Windows\\System32\\"); 
```

但仍然没有发生任何事情。错误仍然存​​在。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-13T09:55:30.753

这是 Windows 7 WMIC 中的一个[错误](https://social.msdn.microsoft.com/Forums/vstudio/a9beeed3-99f0-4627-ba1e-aa0161fa58c9#be9e599a-5cd8-4238-9918-df650a98c66b)。当您在英语 Windows 安装中使用（例如）荷兰语区域设置时，WMIC 会搜索其中的 xsl 文件`C:\Windows\System32\wbem\nl-NL`，而不是`C:\Windows\System32\wbem\en-US`它们所在的位置。

解决方法：

1.  `C:\Windows\system32\wbem\en-US\*.xsl`将文件复制或向上移动到文件`C:\Windows\system32\wbem\`夹中。
2.  更改您的区域设置以匹配您的 Windows 语言版本，注销并重新登录。
3.  指定完整路径：`WMIC process get /format:"%WINDIR%\System32\wbem\en-US\csv"`.

# ios - IOS：获取双精度（€）的两位数不显示该值，只需返回它

> ID：14651187
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:52:25.320
> 
> 标签：ios, xcode, compare, double, limit

*我已经阅读了很多关于此的帖子，但所有帖子都是为了限制数字来显示它们（NSString）。就我而言，我有：*

我比较了两个双精度值（它们是“相同的”），它们中的每一个都来自不同的数学运算。例如：（4.800000 和 4.800000）

双倍结果1=4.800000，结果2=4.800000

//比较结果：

```
if(result1==result2){
    msg.text=@"well done!!";        
}else if(result1>result2){
    msg.text=@"continue your work";    
} 
```

“我在用钱工作 (4,80€)”

在味精标签中，我收到“继续你的工作”消息，而不是“做得好”。我什至不知道比较是否以正确的方式进行。

我认为最好的办法是将 4.800000 限制为 4.80，以便删除小值并进行精确比较。（我怎么能这样做？）我不想将数字限制为两位数只是为了打印解决方案，我想用那个号码工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:56:01.057

你可以这样做：

```
double a = 2.55000, b = 2.55002;
if(fabs(a-b)<1e-3) {
    // code here, a == b
} else {
   // code here, a != b
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:56:09.220

使用`floor(<#double#>)`四舍五入或只是减去它们并降低结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:02:08.277

有关此问题的一个很好的答案，请参见：
[https ://stackoverflow.com/a/10335601/474896](https://stackoverflow.com/a/10335601/474896)

可以简单概括为：

```
if (fabs(x-y) < FLT_EPSILON) {/* ... */} 
```

但是，由于您使用的是金钱价值，因此您应该检查一下`NSDecimalNumber`。

或者正如 Marcus Zarra 所说：

> [“如果你正在处理货币，那么你应该使用 NSDecimalNumber。”](http://www.cimgf.com/2008/04/23/cocoa-tutorial-dont-be-lazy-with-nsdecimalnumber-like-me/) .

# html - 当父母有 pos: absolute 并且他的父母有 pos: relative 时 z-index 不起作用

> ID：14651189
> 
> 赞同：1
> 
> 时间：2013-02-01T16:52:31.860
> 
> 标签：html, css, z-index

我提供了一个小提琴：

[http://jsfiddle.net/dCYdw/](http://jsfiddle.net/dCYdw/)

这是一个可怕的例子，但可以看到问题。

`.levelFive`是问题所在。这应该在所有其他元素的前面，因为它的 a`z-index`为 3，而其他元素的 2 和 1 向上。

`.levelFive`只是css的第146行，以防你找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:34:41.783

你不应该穿上`position: relative;`和穿上你做的`float: left;`那样`.internalMenu > ul > li, .levelThree > ul > li``ul.levelFive``div``ul.levelFour`

见[http://jsfiddle.net/dCYdw/12/](http://jsfiddle.net/dCYdw/12/)

# html - HTML 表格中的填充数据未对齐

> ID：14651191
> 
> 赞同：1
> 
> 时间：2013-02-01T16:52:35.417
> 
> 标签：html, perl

我正在使用 Perl 将数据从文件读取到数组中，然后使用 HTML::Template 在 HTML 页面中显示数据。我所做的就是将数据逐行读取到数组中并输出。

或者直到我注意到文件中间部分的数据在网页上没有对齐。然后我编写了一些 Perl 代码来填充该行的第一部分，然后将第二列添加回。网页上的示例：

```
T - Online Transmit Done                                    R - Online Request Allowed 
E - Extracted batch                                      M - Multiple transmission 
P - Transmission in Progress                                  U - Batch Unextractable 
N - Batch Nontransmittable                                  B - BSC 
```

如果我从网页复制并粘贴数据，我会得到完美对齐：

```
T - Online Transmit Done                                    R - Online Request Allowed 
E - Extracted batch                                         M - Multiple transmission 
P - Transmission in Progress                                U - Batch Unextractable 
N - Batch Nontransmittable                                  B - BSC 
```

我哪里错了？数据显示为正确填充但不在 HTML 页面上的表格内。这是我正在使用的 HTML，没什么特别的：

```
<TABLE BORDER=1 ALIGN="center">
    <TR>
        <TD ALIGN="center"><B>DATA</B></TD>
    </TR>

    <TMPL_LOOP NAME="THIS_LOOP">
    <TR>
         <TD ALIGN="left"><TMPL_VAR NAME="DATA"></TD>
    </TR>
    </TMPL_LOOP>
</TABLE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:52:13.580

您可以为表数据使用[等宽字体](http://en.wikipedia.org/wiki/Samples_of_monospaced_typefaces)，例如 Courier。您的列没有对齐，因为您使用的字体对于不同的字母有不同的宽度。

但是用空格定位元素并不是一个好主意。重新考虑您的布局/逻辑并使用它们打算使用的表格是值得的。

# php - 更改变量 php 的值

> ID：14651192
> 
> 赞同：0
> 
> 时间：2013-02-01T16:52:36.633
> 
> 标签：php, forms, validation, variables

我需要更改变量的值`$destination`以帮助验证表单。如果表单中没有任何字段，则页面会刷新并显示错误消息，这很有效。如果所有字段均已填写，则`$destination`值应更改并`'it works!'`打印消息。但是，如果填写了所有字段并且用户提交了表单，`'it works!'`则会打印消息，但`$destination`' 的值仍设置为`'this-page'`。我在这里想念什么？

```
$destination = '';

$fname = $_POST['fname'];
$lname = $_POST['lname'];
$phone = $_POST['phone'];
$email = $_POST['email'];

if (!$fname OR !$lname OR !$email OR !$phone) {
print 'Please fill in all of your contact information';
$destination = 'this-page';
}
else {
print 'It works!';
    $destination = 'results-page';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:38:16.080

似乎问题与此处的验证部分无关。您从 else 语句中得到 print 和从 if 语句中得到 $destination 变量？这在逻辑上应该是不可能的。您确定您的代码中没有任何语法错误等吗？那是您程序中的确切代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:57:58.980

```
$destination = '';

$fname = $_POST['fname'];
$lname = $_POST['lname'];
$phone = $_POST['phone'];
$email = $_POST['email'];

if (!empty($fname) || !empty($lname) || !empty($email) OR !empty($phone)) {
    print 'Please fill in all of your contact information';
    $destination = 'this-page';
}
else {
    print 'It works!';
    $destination = 'results-page';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:58:29.860

希望这是学术性的。有更好的方法来解决这个问题。但在这儿：

```
$destination = '';

$fname = isset($_POST['fname']) ? $_POST['fname'] : null ;
$lname = isset($_POST['lname']) ? $_POST['lname'] : null ;
$phone = isset($_POST['phone']) ? $_POST['phone'] : null ;
$email = isset($_POST['email']) ? $_POST['email'] : null ;

if (empty($fname) || empty($lname) || empty($phone) || empty($email)) {
    print 'Please fill in all of your contact information';
    $destination = 'this-page';
} else {
    print 'It works!';
    $destination = 'results-page';
} 
```

有朝一日看看一些 PHP 框架以及它们如何处理表单验证。例如： http: [//framework.zend.com/manual/1.12/en/zend.form.elements.html](http://framework.zend.com/manual/1.12/en/zend.form.elements.html) 可能会给你一些见解。

# jsf - 如何让 WebLogic 12c 使用 Java EE 版本 5 而不是 6？

> ID：14651195
> 
> 赞同：1
> 
> 时间：2013-02-01T16:52:47.077
> 
> 标签：jsf, jakarta-ee, jstl, weblogic

我们正在将在 WebLogic 10 上运行的应用程序迁移到 WebLogic 12。

我在 application.xml 中指定 Java EE 版本为 5：

```
<?xml version="1.0" encoding="UTF-8"?>

<application xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="5"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd"> 
```

我不明白为什么我仍然在控制台上收到此警告消息...

```
"<Warning> <Munger> <BEA-2156203> <A version attrib
ute was not found in element "application" in the deployment descriptor weblogic
.utils.classloaders.GenericClassLoader@1e21f52 finder: weblogic.utils.classloade
rs.CodeGenClassFinder@2696ac annotation: /META-INF/application.xml. A version at
tribute is required, but this version of the WebLogic Server will assume that th
e latest version is used. Future versions of WebLogic Server will reject descrip
tors that do not specify the Java EE version. To eliminate this warning, add an
appropriate "version=" to element "application" in the deployment descriptor.>" 
```

我能够部署应用程序。但是当我运行应用程序时，我得到了这个错误：

```
WARN - javax.servlet.ServletException: Could not find a RenderKit for "HTML_BASIC"
javax.servlet.ServletException: Could not find a RenderKit for "HTML_BASIC"
    at javax.faces.webapp._ErrorPageWriter.throwException(_ErrorPageWriter.java:549)
    at javax.faces.webapp.FacesServlet.handleLifecycleException(FacesServlet.java:293)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:187)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:242)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:216)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:132)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:338)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
    at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:74)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3288)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3254)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57)
    at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2163)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2089)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1513)
    at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:254)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221)
Caused by: java.lang.IllegalArgumentException: Could not find a RenderKit for "HTML_BASIC"
    at org.apache.myfaces.shared_impl.renderkit.RendererUtils.getResponseStateManager(RendererUtils.java:1181)
    at org.apache.myfaces.lifecycle.DefaultRestoreViewSupport.isPostback(DefaultRestoreViewSupport.java:141)
    at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:80)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:103)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:76)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:178)
    ... 25 more 
```

我们使用的是 JSF 1.2，我在部署应用程序之前确实部署了 jsf 1.2。

这是我的 weblogic-application.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application 
    xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="5" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd"
>
    <wls:application-param>
        <wls:param-name>webapp.encoding.default</wls:param-name>
        <wls:param-value>UTF-8</wls:param-value>
    </wls:application-param>

    <wls:prefer-application-packages>
        <wls:package-name>org.apache.*</wls:package-name>
        <wls:package-name>javax.faces.*</wls:package-name>
        <wls:package-name>com.sun.faces.*</wls:package-name>
        <wls:package-name>org.mozilla.javascript.*</wls:package-name>
        <wls:package-name>org.mozilla.classfile.*</wls:package-name>
    </wls:prefer-application-packages>

<wls:prefer-application-resources>
    <wls:resource-name>org.apache.*</wls:resource-name>
        <wls:resource-name>javax.faces.*</wls:resource-name>
        <wls:resource-name>com.sun.faces.*</wls:resource-name>
    <wls:resource-name>META-INF/services/javax.servlet.ServletContainerInitializer</wls:resource-name>
    <wls:resource-name>META-INF/services/com.sun.faces.spi.FacesConfigResourceProvider</wls:resource-name>
</wls:prefer-application-resources>

<wls:library-ref>
    <wls:library-name>jsf</wls:library-name>
    <wls:specification-version>1.2</wls:specification-version>
    <wls:implementation-version>1.2.9.0</wls:implementation-version>
    <wls:exact-match>true</wls:exact-match>
 </wls:library-ref>

</wls:weblogic-application> 
```

更新：“找不到用于“HTML_BASIC”的 RenderKit”错误是由缺少 myfaces 库引起的。我将 myfaces-api.jar 和 myfaces-imp.jar 添加到 /lib 并且错误消失了。之后我的应用程序运行良好。但我仍然收到警告消息，抱怨缺少 Jave EE 版本描述符。

更新 2：看起来关于 Java EE 版本描述符的警告是由 jsf 的双重部署引起的。我们的应用程序自己部署 jsf。如果我不将 jsf 1.2 与管理控制台分开部署，那么我不会收到警告。

# sql-server - 在 SQL Server 中迁移海量数据库

> ID：14651197
> 
> 赞同：2
> 
> 时间：2013-02-01T16:52:58.900
> 
> 标签：sql-server, database, backup, database-migration

我正在处理的项目中的一项任务是将 SQL Server 2000 上的现有数据库迁移到运行 SQL Server 2008 的新服务器。这个数据库非常庞大，有 2300 万行和一个 78GB 的​​ mdf 文件。

迁移这种大小的数据库的最佳方法是什么？

我目前的方法是：

*   允许应用程序停机，以便应用程序不会将记录写入数据库
*   在 SQL Server 2000 上执行完整备份。
*   通过网络将备份文件移动到新服务器。
*   在 SQL Server 2008 上恢复完整备份。
*   配置应用程序以引用新服务器上的数据库
*   重新启动应用程序。
*   停用 SQL Server 2000 上的数据库。

但是，我不确定这将涉及多少应用程序停机时间。

有没有更简单的方法，或者停机时间很少的方法？可以在应用程序运行时进行备份吗？显然，当传输备份文件并完成恢复时，我需要停止应用程序。有兴趣听听您对此类任务的处理方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:54:33.027

如果您愿意停机：

*   分离数据库
*   将数据文件和日志文件复制到新服务器
*   在新服务器实例上附加数据库

分离会关闭数据库并最终确定文件，以便可以安全地移动它们（或通过文件系统备份进行备份）。在您重新附加它之前，它将无法再在服务器实例上访问。

不要剪切和粘贴/移动数据和日志文件，以防在复制过程中发生爆炸。

迁移到新的服务器实例时，还需要记住其他几件事，例如确保新实例上存在登录名、正在使用的可能已弃用的功能等。

这是[**detach/attach**](http://msdn.microsoft.com/en-us/library/ms190794.aspx)的参考。

# spring - 使 bean 无法自动装配或自行处理？

> ID：14651198
> 
> 赞同：2
> 
> 时间：2013-02-01T16:53:00.470
> 
> 标签：spring

我们需要一个春豆

防止框架使用 @Autowired -ing它。

或者

一旦它完成它的工作，它就会自我毁灭吗？

bean 大致如下所示：

```
public final class Registrar implements ApplicationListener<SOFrameworkInitializedEvent> 
```

因此，在它收到此 1 次事件后，完成工作并离开。我们使用的是 Spring 3.0.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:51:28.847

使用`autowire-candidate`bean 定义 XML 中的属性，例如：

```
 <bean id="MyBean" class="com.acme.SimpleTestServiceImpl" autowire-candidate="false"/> 
```

# hyperlink - 如何为顶点中的自定义对象名称字段输出超链接：PageBlockTable

> ID：14651200
> 
> 赞同：1
> 
> 时间：2013-02-01T16:53:04.277
> 
> 标签：hyperlink, salesforce, fieldset

听起来很简单，但我从多个字段集中获取表中输出的值，因此管理员用户可以自定义表中显示的列。

这是我的功能页面块...

```
 <apex:pageBlock title="{!$Label.Search_Results}">
        <apex:pageBlockTable value="{!SearchResults}" var="pictureGallerySearchResult" title="SearchResults">
            <apex:column headerValue="Image" styleClass="imageDataCell">
                <a target="_blank" href="/servlet/servlet.FileDownload?file={!pictureGallerySearchResult.ActualAttachment.Id}" >
                    <img class="searchResultImage" style="{!SearchResultsImageStyle}" src="/servlet/servlet.FileDownload?file={!pictureGallerySearchResult.ActualAttachment.Id}" alt="{!pictureGallerySearchResult.ActualAttachment.Name}"/>
                </a>
            </apex:column>
            <apex:column headerValue="Test" value="{!pictureGallerySearchResult.Project[pictureGallerySearchResultField]}"/>
            <apex:repeat value="{!$ObjectType.Project__c.FieldSets.Picture_Gallery_Search_Results}" var="pictureGallerySearchResultField">
                <apex:column headerValue="{!$ObjectType.Project__c.Fields[pictureGallerySearchResultField].label}" value="{!pictureGallerySearchResult.Project[pictureGallerySearchResultField]}"/>
            </apex:repeat>              
            <apex:repeat value="{!$ObjectType.Store__c.FieldSets.Picture_Gallery_Search_Results}" var="pictureGallerySearchResultField">
                <apex:column headerValue="{!$ObjectType.Store__c.Fields[pictureGallerySearchResultField].label}" value="{!pictureGallerySearchResult.Store[pictureGallerySearchResultField]}"/>
            </apex:repeat>
            <apex:repeat value="{!$ObjectType.Visit__c.FieldSets.Picture_Gallery_Search_Results}" var="pictureGallerySearchResultField">
                <apex:column headerValue="{!$ObjectType.Visit__c.Fields[pictureGallerySearchResultField].label}" value="{!pictureGallerySearchResult.Visit[pictureGallerySearchResultField]}"/>
            </apex:repeat>
            <apex:repeat value="{!$ObjectType.Photo_Attachment__c.FieldSets.Picture_Gallery_Search_Results}" var="pictureGallerySearchResultField">
                <apex:column headerValue="{!$ObjectType.Photo_Attachment__c.Fields[pictureGallerySearchResultField].label}" value="{!pictureGallerySearchResult.PhotoAttachment[pictureGallerySearchResultField]}"/>
            </apex:repeat>
        </apex:pageBlockTable>
    </apex:pageBlock> 
```

您可以看到我在第一列中为图像创建了一个“硬编码”超链接，但是如果它是自定义对象的名称字段，我想动态地超链接一个字段。

例如，如果字段集...

```
$ObjectType.Project__c.FieldSets.Picture_Gallery_Search_Results 
```

...包含一个名为“名称”的字段，我想插入一个超链接，将您带到销售人员页面以查看该项目。

因此，首先我需要能够确定该字段是否是自定义对象名称字段，其次，输出超链接而不是标签。

如果有人有任何想法，我将不胜感激。

感谢您抽时间阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:29:02.097

您是否考虑过在 APEX 控制器/扩展中执行此逻辑？执行查询后，您可以遍历结果，确定您希望每个超链接的内容，并填充您向 Visualforce 页面公开的地图，该地图由搜索结果中的某个唯一值（可能是 ID）和值将是超链接。然后在您的 Visualforce 迭代器中，您可以执行 map[SearchResult.Id] 或任何最终的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:52:36.100

```
<apex:column headerValue="{!$Label.Filename}">{!pictureGallerySearchResult.ActualAttachment.Name}</apex:column>
<apex:repeat value="{!$ObjectType.Project__c.FieldSets.Picture_Gallery_Search_Results}" var="pictureGallerySearchResultField">
    <apex:column headerValue="{!$ObjectType.Project__c.Fields[pictureGallerySearchResultField].label}">
        <apex:outputLabel value="{!pictureGallerySearchResult.Project[pictureGallerySearchResultField]}" rendered="{!NOT(ShowResultFieldHyperlinkMap[$ObjectType.Project__c.Fields[pictureGallerySearchResultField].label])}"/>
        <apex:outputLink value="{!URLFOR($Action.Project__c.View, pictureGallerySearchResult.Project['Id'])}" rendered="{!ShowResultFieldHyperlinkMap[$ObjectType.Project__c.Fields[pictureGallerySearchResultField].label]}" styleClass="resultFieldHyperlink">
            <apex:outputLabel value="{!pictureGallerySearchResult.Project[pictureGallerySearchResultField]}" styleClass="resultFieldHyperlinkLabel"/>
        </apex:outputLink>
    </apex:column>
</apex:repeat> 
```

# java - 单击按钮时将文本从 EditText 发送到 TextView，如果选中单选按钮/复选框，则添加格式

> ID：14651202
> 
> 赞同：0
> 
> 时间：2013-02-01T16:53:14.657
> 
> 标签：java, android, android-edittext, textview, android-button

我正在尝试制作一个程序，该程序接受用户文本输入并将其显示在文本视图中，同时还根据已选中的单选按钮和/或复选框进行格式化。

这是我的 mainactivity.java 的完整代码

包 com.example.lab3_lefelhocz；

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.*;
import android.graphics.Color;

public class MainActivity extends Activity {
TextView messageTextView;
EditText inputEditText;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onRadioButtonClicked(View view) {
    // Is the button now checked?
    boolean checked = ((RadioButton) view).isChecked();

    // Check which radio button was clicked
    switch(view.getId()) {
        case R.id.radioBlack:
            if (checked)
                // Text is black.
                messageTextView.setTextColor(Color.BLACK);
            break;
        case R.id.radioBlue:
            if (checked)
                // Text is blue.
                messageTextView.setTextColor(Color.BLUE);
            break;
        case R.id.radioRed:
            if(checked)
                // Text is red.
                messageTextView.setTextColor(Color.RED);
                break;
}
}
public void inputEditText(View view) {        
    if (inputEditText.getText().toString().equals("")) {
         String editTextValue =   inputEditText.getText().toString();
           messageTextView.setText(editTextValue);
    } else {
         inputEditText.setText("");
         messageTextView.setText("");
}
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:24:07.750

我猜你试图通过使用 XML 中的 onClick 属性来捕获对 EditText 的点击。我认为这不适用于您的工作。你想寻找按键而不是点击。尝试在 oncreate 中的 EditText 上放置一个监听器。类似于以下内容。

```
inputEditText.setOnEditorActionListener(new OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE) {
            inputEditText(v);
            return true;
        }
        return false;
    }
}); 
```

# javascript - 如何使用 jQuery/js 打开多个窗口并触发表单提交事件？

> ID：14651204
> 
> 赞同：0
> 
> 时间：2013-02-01T16:53:25.973
> 
> 标签：javascript, jquery, new-window

给定一个逗号分隔的 URL 字符串，我想为其*转换为*数组的每个元素打开一个单独的窗口，然后提交一个表单。

以下代码只打开一个窗口，并没有进行表单提交：

```
$.each(urlList.split(","), function (index, item) {

    urlList = "http://www.cnn.com,http://www.foxnews.com";

    _gaq.push(['_trackEvent', 'Results', 'Click', 'Classifieds+: ' + item + ' : ' + SourceUrlProviderID]);
    window.open(item, "_blank");
});
document.forms[0].submit(); 
```

当我执行以下操作时，我得到了所需的操作 - 打开了三个新选项卡/窗口，但我看起来表单提交将完成两次并且不太有意义：

```
urlList = "http://www.cnn.com,http://www.foxnews.com";

// opens windows for each URL in the string
$.each(urlList.split(","), function (index, item) {
    _gaq.push(['_trackEvent', 'Results', 'Click', 'Classifieds+: ' + item + ' : ' + SourceUrlProviderID]);
    document.forms[0].submit();
    window.open(item, "_blank");
}); 
```

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:36:44.643

为什么`urlList`在里面`$.each`？无论如何，我尝试了这个，并且有效：

```
var urlList = "http://www.cnn.com,http://www.foxnews.com"
$.each( urlList.split( "," ), function( index, item ) {
    window.open( item, "_blank" )
});
document.forms[0].submit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:08:44.950

如果您不能这样做，您应该在循环之外提交表单（在这种情况下是每个），只需检查它是否是最后一项。

```
if (index == urlList.split(",").length)
   document.forms[0].submit(); 
```

但老实说，这看起来不像是正确的做法。如果只是为了统计信息，您为什么要提交表单，您可以使用简单的 AJAX 调用。

# emacs - 杀死环保存与剪贴板杀死环保存

> ID：14651205
> 
> 赞同：1
> 
> 时间：2013-02-01T16:53:27.837
> 
> 标签：emacs, ubuntu-12.04, emacs23

在 Emacs-23 的菜单栏中的 [Edit] 下有 Cut、Copy、Paste 都是显式的剪贴板相关命令；不再提供传统的`C-w`, `M-w`,`C-y`并且这些不再具有与 X 相关的效果。

使传统命令剪贴板感知的最干净的方法是什么？似乎必须有一些比重新定义一切更系统的方法。`C-h C-n`没有帮助我。

是否旨在向用户隐藏传统命令？

编辑：或者至少：与剪贴板“同步”的命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:29:16.550

X 有两个“剪贴板”：主选区和剪贴板。Emacs 23 默认使用主要选择，但您似乎需要剪贴板。您可以使用以下内容启用此功能`.emacs`：

```
(setq x-select-enable-clipboard t) 
```

此设置在 Emacs 24 中更改为默认使用剪贴板。另见：[http ://emacswiki.org/emacs/CopyAndPaste](http://emacswiki.org/emacs/CopyAndPaste)

# javascript - CSS 动画 + Javascript 回调

> ID：14651206
> 
> 赞同：0
> 
> 时间：2013-02-01T16:53:28.320
> 
> 标签：javascript, css, transform, transition

我有一个 CSS 过渡，用于`-webkit-transform: translateX`将 div 从右向左移动，它是一个基本的滑动移动（我保证在我的情况下只有 webkit 用户）。

我的问题是我需要在动画完成时运行一个动作，到目前为止，我一直在使用 JavaScript 中的 setTimeout 调用在动画完成后运行 1 毫秒。

它在 99% 的情况下都可以完美运行，但在极少数情况下，它运行不顺利并且会导致问题，我知道这是由于超时没有在正确的时间准确运行。

从我的在线研究中，我听说为 webkit 转换结束添加了一个事件侦听器，但无法使其正常工作，它在网上其他人的示例中运行良好：

[jsfiddle.net/jfriend00/5FnwY/](http://jsfiddle.net/jfriend00/5FnwY/)

我的动画是由 javascript 触发的，单击按钮时，`.move_in`该类被添加到主`div`元素中，然后开始动画。CSS如下：

```
.renderZone {
    -webkit-animation-timing-function:ease-in-out;
    -webkit-animation-duration:805ms;
    -moz-animation-timing-function:ease-in-out;
    -moz-animation-duration:805ms;
}

.move_in {
    -webkit-transform: translateX(0%) !important;
    -webkit-animation-name: slideouttoleft;
    -moz-transform: translateX(-0%) !important;
    -moz-animation-name: slideouttoleft;
}

.move_out {
    -webkit-transform: translateX(-100%) !important;
    -webkit-animation-name: slideouttoleft;
    -moz-transform: translateX(-100%) !important;
    -moz-animation-name: slideouttoleft;
}

@-webkit-keyframes slideouttoleft {
    from {
        -webkit-transform: translateX(0);
    }
    to {
        -webkit-transform: translateX(-100%);
    }
} 
```

有没有人知道解决这个问题的最佳方法，甚至是更好的方法来做我正在做的事情？我需要保持 CSS 动画按原样运行，因为这在我一直在试验的 iOS 上提供了最佳性能。

希望有人能帮忙！

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:09:13.690

CSS3 有一个名为“webkitAnimationEnd”的属性，它可以用作 JavaScript 中的事件列表器。

示例代码：

```
function cssAnimationEnd() {
    //looks for the ID box from the css and fires the event listen when the animation is complete.
    box.addEventListener( 'webkitAnimationEnd', function( event) {
      alert( "Finished animation!" );
    }, false );
} 
```

# javascript - Javascript 和样式优化

> ID：14651208
> 
> 赞同：0
> 
> 时间：2013-02-01T16:53:36.883
> 
> 标签：javascript, optimization

我现在正在开发一个 Web 应用程序，它非常慢。在 Chrome 中查看网络监视器后，我看到它加载了几十个样式和脚本（可能超过 150 个）。这太荒谬了，所以我编写了一个 PHP 类来缩小我的脚本和样式并缓存它们。它现在正在工作，而且速度要好得多！

我只是想知道，为缩小的 JS 提供服务的最佳方式是什么？打印标签之间的所有JS `<script>`（以及标签之间的css `<style>`）更好还是我应该把所有东西都放在一个文件中，比如js_loader.php，我会在其中打印它并将标题设置为javascript？

对于最终用户来说最快的是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:02:50.320

如果您可以将它们缩小并合并到一个文件中，请执行此操作。更多的脚本/链接标签意味着更多的 HTTP 请求，因此加载速度更慢。特别是关于 JS 的时候。

阅读@http://developer.yahoo.com/yslow/ 中`Web Performance Best Practices and Rules`的[主题](http://developer.yahoo.com/yslow/)

特别是主题`#1 Minimize HTTP Requests`，`#5 Gzip Components`和`#11 Minify JavaScript and CSS`。至于加载时间更令人敬畏，请阅读`#6 Put StyleSheets at the Top`和`#7 Put Scripts at the Bottom`.

来自#7：

> 脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。**但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:00:59.743

当前的一些最佳实践是

*   `<style>`尽早加载，`<head>`以便尽早应用并且用户看不到“半生不熟”的页面

*   关闭`<script>`前加载`<body>`

例如，参见 HTML5 样板

[https://github.com/h5bp/html5-boilerplate/blob/master/index.html](https://github.com/h5bp/html5-boilerplate/blob/master/index.html)

永远不要使用内联 Javascript 或 CSS，因为这会增加后续页面加载的大小（相同的代码会一次又一次地加载......）

# perl - 在 Perl 中打开一个闭包作为句柄

> ID：14651209
> 
> 赞同：3
> 
> 时间：2013-02-01T16:53:40.007
> 
> 标签：perl, closures, handles

于是我有了这个疯狂的想法。现在，我正在使用 Text::CSV_XS 在 Word 中生成一个表格，如下所示：

```
use Win32::OLE;
use Win32::OLE::Const 'Microsoft Word';
use Text::CSV_XS;

# instantiation of word and Text::CSV_XS omitted for clarity
my $select = $word->Selection;
foreach my $row (@rows) { # @rows is an array of arrayrefs
    $csv->combine(@{$row});
    $select->InsertAfter($csv->string);
    $select->InsertParagraphAfter;
}
$select->convertToTable(({'Separator' => wdSeparateByCommas}); 
```

但如果我能做这样的事情会更酷：

```
use Win32::OLE;
use Win32::OLE::Const 'Microsoft Word';
use Text::CSV_XS;

# instantiation of word and Text::CSV_XS omitted for clarity
my $select = $word->Selection;
foreach my $row (@rows) { # @rows is an array of arrayrefs
    $csv->bind_columns($row);
    $csv->print( 
        sub {
            my $something; # Should be the combine()'d string
            $select->InsertAfter($something);
            $select->InsertParagraphAfter;
        },
        undef
    ); 
}
$select->convertToTable(({'Separator' => wdSeparateByCommas}); 
```

那么，我的问题是如何`$something`从第二个代码示例中取出，以及我需要做什么才能使闭包看起来像一个句柄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:33:59.360

我相信您实际上是在问如何使用以下界面使数据最终出现在 Word 中：

```
my $fh = SelectionHandle->new($selection);
my $csv = Text::CSV_XS->new({ binary => 1 });
$csv->print($fh, $_) for @rows; 
```

（我认为这是一个坏主意。它是由内而外的。创建一个使用封装的 CSV 对象进行格式化的对象。）

如果你想给一个对象一个变量的接口（标量、数组、哈希、文件句柄），你想要`tie`. 当你这样做时，你最终得到

```
use SelectionHandle qw( );
use Text::CSV_XS    qw( );

my $selection = ...;
my @rows      = ...;

my $fh = SelectionHandle->new($selection);
my $csv = Text::CSV_XS->new({ binary => 1 });
$csv->print($fh, $_) for @rows; 
```

模块看起来像：

```
package SelectionHandle;

use strict;
use warnings;

use Symbol      qw( gensym );
use Tie::Handle qw( );

our @ISA = qw( Tie::Handle );

sub new {
   my ($class, $selection) = @_;
   my $fh = gensym();
   tie(*$fh, $class, $selection);
   return $fh;
}

sub TIEHANDLE {
   my ($class, $selection) = @_;
   return bless({
      selection => $selection,
   }, $class);
}

sub PRINT {
   my ($self, $str) = @_;
   my $selection = $self->{selection};
   $selection->InsertAfter($str);
   $selection->InsertParagraphAfter();
   return 1;
}

1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:06:34.070

`Text::CSV::print`不一定需要手柄。文档只是说它需要一种`print`方法。

```
{
    package Print::After::Selection;
    sub new {
        my ($pkg, $selection) = @_;
        my $self = { selection => $selection };
        return bless $self, $pkg;
    }
    sub print {
        my ($self, $string) = @_;
        my $selection = $self->{selection};
        $selection->InsertAfter($string);
        $selection->InsertParagraphAfter;
        return 1;  # return true or Text::CSV will think print failed
    }
}

...
$csv->print( Print::After::Selection->new( $word->Selection ), undef );
... 
```

（未测试）

# php - cakephp 中的日期操作

> ID：14651212
> 
> 赞同：0
> 
> 时间：2013-02-01T16:53:43.463
> 
> 标签：php, cakephp, date

cakephp中的日期如何操作？

我想计算两个日期之间的天数差，例如：一个日期减去 10 天或一个日期加上 20 天。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:55:26.027

你可以使用这个：

```
CakeTime::format('r', '+20 days', true); 
```

看看这个：[http ://book.cakephp.org/2.0/en/core-libraries/helpers/time.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/time.html)

也许你也不想看到这个：[http ://www.php.net/manual/en/function.date.phpenter](http://www.php.net/manual/en/function.date.phpenter)

# iphone - TabBarController 由另一个 TabBarController 中的 TableViewCell 调用

> ID：14651213
> 
> 赞同：0
> 
> 时间：2013-02-01T16:53:47.200
> 
> 标签：iphone, ios, xcode, uitabbarcontroller

我想知道是否有可能拥有以下内容：

一个 TabBarController 有两个按钮，每个按钮包含一个 UITableView。然后，如果单击其中一个 TableView 单元格，我想推送到一个新的 TabBarController，其中包含一组不同的 4 个按钮，其中包含其他表视图。

谁能指出我正确的方向？

我尝试的第一件事是在每个按钮下使用 UITableView 设置第一个 TabBarController。但是，当我添加要从单击的 tableview 单元格触发的第二个 TabBarController 时，我得到的是第一个包含 2 个按钮的选项卡，最重要的是，第二个选项卡包含 4 个按钮。

我希望第二个 TabBarController 替换并留下第一个。

我希望我能很好地解释自己，谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:36:11.617

您应该将推送转场更改为模态转场。

要返回，您需要在目标视图控制器中实现一个返回按钮：

```
- (IBAction) dismiss:(id)sender
{
    [[self presentingViewController] dismissViewControllerAnimated:YES completion:nil];
} 
```

（请注意，您必须在代码中执行此操作 - 您不能画一条转接线返回）

目前，您的推送序列中必须有一个导航控制器。当您更改为模态 segue 时，您可以删除 navController，它不会在导航中发挥作用。

# javascript - Express auth 应用程序不会在表单提交上挂起

> ID：14651215
> 
> 赞同：0
> 
> 时间：2013-02-01T16:53:54.967
> 
> 标签：javascript, node.js

我正在尝试来自 Jump start node.js（第 1 章身份验证）的示例。我编写了所有程序并创建了第 1 章所需的所有文件和文件夹。对于那些不知道第 1 章是关于使用 mongolab 云服务的人。

### 表单.html

```
<form action="/signup" method="post">
  <div>
    <label>Username:</label>
    <input type="text" name="username"/><br/>
  </div>
  <div>
    <label>Password:</label>
    <input type="password" name="password"/>
  </div>
  <div><input type="submit" value="Sign Up"/></div>
</form>` 
```

### 库/db.js

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
module.exports.mongoose = mongoose;
module.exports.Schema = Schema;
// Connect to cloud database

var username = "user"
var password = "password";
var address = ' @dbh42.mongolab.com:27427/nockmarket';
connect();
// Connect to mongo
function connect() {
  var url = 'mongodb://' + username + ':' + password + address;
  console.log('[*] not reaching here');
  mongoose.connect(url);
}
function disconnect() {mongoose.disconnect()} 
```

### 模型/User.js

```
var db = require('../lib/db');
var UserSchema = new db.Schema({
  username : {type: String, unique: true}
  , password : String
})
var MyUser = db.mongoose.model('User', UserSchema);
// Exports
module.exports.addUser = addUser;
// Add user to database
function addUser(username, password, callback) {
  var instance = new MyUser();
  instance.username = username;
  instance.password = password;
  instance.save(function (err) {
    if (err) {
      callback(err);
    }
    else {
      callback(null, instance);
    }
  });
} 
```

当我总结表单应用程序挂起并且它没有调用 connect() 函数女巫连接到 mongolab 它只是等待完成但没有任何反应。

谢谢，

# .net - 使用 EPPLUS 隐藏 Excel 网格线

> ID：14651217
> 
> 赞同：22
> 
> 时间：2013-02-01T16:54:02.863
> 
> 标签：.net, vb.net, epplus

在 EPPLUS 中隐藏 excel 电子表格网格线的方法/命令是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-01T18:21:41.760

```
WorkSheet.View.ShowGridLines = false 
```

希望这能解决问题！

# sql-server - 如何在 ado.net 中绑定 datagridview

> ID：14651221
> 
> 赞同：0
> 
> 时间：2013-02-01T16:54:16.897
> 
> 标签：sql-server, ado.net

我想使用 ado.net “无法创建字段 Physio_cureTable 的子列表”在表单加载时绑定 datagridview。错误我把我的代码粘贴在这里请给我建议或帮助

con = new SqlConnection("数据源=ADMIN\SQLEXPRESS；初始目录=PhysioCure；集成安全=true");

```
 sda = new SqlDataAdapter("select RegisterNo,RegistrationDate,Stimulation,PationName,DateOfBirth,ContactNo,Occupation,Age,Sex,Weight,Chief_Complain,Investigation_Result,PastHistoryAny,Physical_Examination,Ref_By_Doctor,Medications,Prognosis,Electro_Therapy,Neuro_Rehabilitation,Ortho_Rehabilitation,Cardio_Pulmonery_Rehabilitation,Sports_Rehabilitation from Physio_cureTable where Syncoperation <>'D'",con);
        ds = new DataSet();
        sda.Fill(ds);
        dataGridView1.AutoGenerateColumns = true;
        dataGridView1.DataSource = ds;

        dataGridView1.DataMember = "Physio_cureTable".ToString();// error coming this line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:07:33.133

```
dataGridView1.DataMember = "Physio_cureTable".ToString(); 
```

Physio_cureTable 必须是您已与 DataGridView 绑定的列名

```
dataGridView1.DataMember = "RegisterNO".ToString(); 
```

# java - 将格式化规则应用于整个 Eclipse 工作空间

> ID：14651224
> 
> 赞同：2
> 
> 时间：2013-02-01T16:54:18.783
> 
> 标签：java, eclipse, code-formatting

因此，我们正在代码库中集成另一个项目。它不符合我们的格式规则。我在保存配置后自动格式化。因此，我可以转到每个文件并再次保存它，但是有没有办法编写 Eclipse 脚本，以便它将格式化规则应用于我工作区中的每个文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:55:49.607

右键单击项目（可以多选）并`Source -> Format`在菜单中选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:07:58.403

试试`Source -> Clean up...`，`Use custom profile -> Configure...`。它在那里有更强大的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:49:05.270

确保您在 Package Explorer 中，然后右键单击并选择 Source 菜单。其他一些视图（例如，导航器）不会显示此选项。

# deployment - 在 Glassfish 3.12 中部署 .war 时保留文件

> ID：14651231
> 
> 赞同：1
> 
> 时间：2013-02-01T16:54:36.610
> 
> 标签：deployment, upload, glassfish, war

我的项目部署有点问题，经过数小时的网络搜索后，我找不到答案。

**情况：** 我正在开发一个 Web 应用程序，该应用程序包含在使用过程中生成的上传文件和其他文件。为了简单起见，我将这些存储到：`.../mywebapp/web/some subfolders/*`

到现在为止还挺好。

**我的问题：** 每次我在实际服务器上重新部署我的项目时（在更新类/jsp 之后），Glassfish 都会删除`.../mywebapp/`重新部署期间的全部内容。

**到目前为止我的程序：**

1.  将我的 webapp 的最新版本导出为 .war。
2.  将更改的文件添加到服务器上的 .war 文件中（重命名为 .zip，然后重新命名为 .war）
3.  使用管理控制台在我的服务器上重新部署 .war (locahost:4848)

**我的问题是** 这个当前的过程很容易出现数据丢失（我可能会丢失文件！）有没有一种直接的方法可以将更改上传到我的服务器，而不会丢失在运行时添加的所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:11:29.880

我看到两个选择：

1.  将数据“远离危险”（为它找到一个不在部署目录中的地方；比如数据库）

2.  切换到目录部署而不是存档部署。

这两个选择中更好的是第一个……它比另一个更便携；那里的每台服务器都支持部署档案。很多服务器都支持基于目录的部署……但它们的做法都有些不同……所以部署在 A 上的目录结构可能不会部署在 B 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T05:10:10.980

我遇到了同样的问题，使用 XCOPY 和 Event Scheduler 解决了。

实际上，您不断同步两个文件夹

每 X 分钟运行以下批处理文件的计划任务

同步.bat：

```
xcopy "domain1\applications\%YOUR_APP_NAME%l\path\to\folder" "D:\folder\to\sync" /D /I /Y

xcopy "D:\folder\to\sync" "domain1\applications\%YOUR_APP_NAME%l\path\to\folder" /D /I /Y 
```

开关：

```
/D - Only copy newer files if the destination file exists

/I - If the destination does not exist, and you are copying more than one file, this switch assumes that the destination is a folder.

/Y - Overwrite without prompting 
```

# javascript - 如何使用 jquery 将 iframe 添加到 div

> ID：14651232
> 
> 赞同：2
> 
> 时间：2013-02-01T16:54:39.390
> 
> 标签：javascript, jquery, iframe

[我在此处](https://stackoverflow.com/questions/13584252/how-to-create-an-iframe-on-clicking-a-link/13584316#13584316)接受的答案中找到了此代码...它通过单击按钮将 iframe 加载到特定区域...

```
<a href="#" onclick="setIframe(this,'http://www.stackoverflow.co.uk')" >Set the Iframe up</a>

function setIframe(element,location){
    var theIframe = document.createElement("iframe");
    theIframe.src = location;
   element.appendChild(theIframe);
} 
```

如何更改此设置以允许我设置高度宽度和滚动样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:59:38.010

```
theIframe.style.* 
```

您要设置样式的任何属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:00:19.447

这不是 jQuery，而是纯 Javascript：

```
function setIframe(element,location){
    var theIframe = document.createElement("iframe");
    theIframe.src = location;
    theIframe.setAttribute("weight", "500");
    theIframe.setAttribute("width", "500");
    theIframe.setAttribute("scrolling", "yes");
    element.appendChild(theIframe);
} 
```

这不是您的问题的一部分，但这是您使用 jQuery 切换 div 的方法：

标记：

```
<input type="button" value="Toggle Div"  id="btnToggle"/>

    <div id="randomContent">
        This is random Content.
        <br />
        This is random Content.
        <br />
        This is random Content.
        <br />
        This is random Content.
        <br />
        This is random Content.
        <br />
        This is random Content.
        <br />
    </div> 
```

jQuery：

```
 $(document).ready(function () {
        $("#btnToggle").bind("click", function () {
            $("#randomContent").toggle();
        });
    }); 
```

# javascript - 动画柱形图

> ID：14651233
> 
> 赞同：2
> 
> 时间：2013-02-01T16:54:47.900
> 
> 标签：javascript, highcharts

我正在使用 Highcharts 创建条形图，并试图弄清楚如何为我对图表所做的更改设置动画。我已将动画设置为 true，但它没有显示任何更改，只是将条形重新绘制到新高度。

我怎样才能让它动画变化？现在我正在使用 series.setData() 设置数据，不确定是否有设置特定条的方法，也许这就是它没有动画的原因？

[http://jsfiddle.net/nycynik/FACtf/](http://jsfiddle.net/nycynik/FACtf/)

```
var series = this.series[0];

chartData1[Math.floor(Math.random()*10)] = Math.random()*125;
series.setData(chartData1, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:42:27.610

Series.setData() 没有动画，因为所有点都被丢弃并替换为新点。

您正在寻找的是[Point.update()](http://api.highcharts.com/highcharts#Point.update%28%29)。当您运行点更新时，您只更新值，因此点能够从旧值动画到新值。

```
chart.series[0].data[0].update(Math.random()); 
```

[见演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/point-update-column/)。

# jquery - 我已经搜索了很多关于使用 jquery 的帖子：可见，看看是否有人在涉及时发生冲突

> ID：14651234
> 
> 赞同：0
> 
> 时间：2013-02-01T16:54:50.957
> 
> 标签：jquery, radio-button, label, hide, visible

当用户选择单选选项时，我正在使用 jquery 显示/隐藏更多信息。这是一个简单的概念——当用户在<dt> 标记内单击（即，他们单击<input> 或<label>）时，​​<dd> 滑动并保持打开状态以显示更多信息。在 <dt> 标记内再次单击会关闭 <dd>。

我过去曾成功使用过这个显示/隐藏脚本，但从未包含输入或标签标签。通过添加带有 for= 参数的标签，我遇到了问题：

如果单击 radio ，幻灯片可以正常打开并保持打开状态，但单击标签区域，幻灯片会打开并立即弹回关闭。在尝试调试时，我发现如果我更改或删除 for= 以不匹配单选按钮的正确 ID（例如，< input type="radio" id="option01" > < label for="" >），幻灯片将不再从打开到关闭弹跳，但是，唉，然后我会通过删除 for= 来牺牲可访问性。

关于保持这种结构或接近它而不处理反弹关闭效应的任何想法？

```
$(document).ready(function() {
   $('.serviceOption').find('dd').hide().end().find('dt').click(function() {
    var moreInfo = $(this).next();
    if (moreInfo.is(':visible')) {
        moreInfo.slideUp();
    } else {
        moreInfo.slideDown('slow');
    }
   });
});

<dl class="serviceOption">  
    <dt>
        <input type="radio" name="serviceOptions" id="option01" value="value01">
        <label for="option01">Option 1</label>
    </dt>  
    <dd>Show more information on Option 1</dd>
    <dt>
        <input type="radio" name="serviceOptions" id="option02" value="value02">
        <label for="option02">Option 2</label>
    </dt>
    <dd>Show more information on Option 2</dd>
</dl> 
```

这是一个示例 jsFiddle ....

[http://jsfiddle.net/8JjvT/](http://jsfiddle.net/8JjvT/)

单击单选按钮将正确打开和关闭`dd`。尝试单击标签以查看问题。它会立即打开和关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:01:54.787

好的，我纠正了：显然，带有 for= 的标签确实有点击事件的问题！

看到这个答案：[jQuery Click fires two when click on label](https://stackoverflow.com/questions/8238599/jquery-click-fires-twice-when-clicking-on-label)

现在，考虑到这一点，我们必须做出决定......我能让它正常工作的唯一方法是将点击事件绑定到输入字段，而不是 dt。

这是我的小提琴：http: [//jsfiddle.net/mori57/X9pNY/](http://jsfiddle.net/mori57/X9pNY/)

```
// get all the input items from the dt's
var terms = $(".serviceOption dt input");
// attach a click handler, pass in the event
terms.click(function (evt) {
    // store the clicked item's closest dt
    var clickedDT = $(this).closest("dt");
    // if there are visible dd's
    if ($("dd:visible").length > 0) {
        // hide them
        $("dd:visible").slideUp(400, function () {
            // May not need to put this inside the callback, 
            // now that I know it was label's fault
            $(clickedDT).next("dd").slideDown();
        });
    } else {
        // otherwise, just show the nearest dd
        $(clickedDT).next("dd").slideDown();
    }
}); 
```

# twitter-bootstrap - Bootstrap：简单表单上的按钮

> ID：14651241
> 
> 赞同：0
> 
> 时间：2013-02-01T16:55:13.490
> 
> 标签：twitter-bootstrap

使用引导程序，如果我有这样的表格：

```
<form>
<fieldset>
<legend>Legend</legend>
<label>Label name</label>
<input type="text" placeholder="Type something…">
<button type="submit" class="btn">Submit</button>
</fieldset>
</form> 
```

按钮留在输入旁边。但我需要它保持在底部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:50:01.373

添加：

```
.block {
    display:block
} 
```

在 bootstrap.css 的末尾，然后将“block”类添加到您的提交按钮：

```
<button type="submit" class="btn block">Submit</button> 
```

# java - 在 Java 中使用类

> ID：14651242
> 
> 赞同：1
> 
> 时间：2013-02-01T16:55:22.767
> 
> 标签：java

我正在尝试使用我制作的课程，但是当我打电话时，课程不起作用，我有点迷失了。

错误出现在程序底部的类调用和计数初始化中。

```
package counter;

public class Counter {
    private int value;
    public Counter(int intialValue){
        value = intialValue;
    }

    private void count() {
        value = value + 1;
    }
    private void reset(){
        value = 0;
    }
    public int getValue(){
        return value;
    }

    Counter tally = new Counter();
    tally.count();

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:57:33.830

所有 Java 语句都必须放入某种方法中。

目前，您的最后两行不在方法中。

```
Counter tally = new Counter();
tally.count(); 
```

尝试这样的事情：

```
public class Counter {

  ... existing members ...

  public static void main(String[] args) {
    int initialValue = Integer.parseInt(args[0]);
    Counter tally = new Counter(initialValue);
    tally.count();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:59:29.610

从您到目前为止所展示的内容来看，您的类 Counter 似乎有一个 Counter 作为实例成员，因此您有一个无限回归试图实例化它。您没有给出错误，但我希望会导致 StackOverflowError 。

假设它已编译，这不应该发生，因为 line tally.count() 不应该是合法的。进入类的唯一内容是构造函数声明、方法声明、变量声明、初始化块和嵌套的内部类声明。您班级底部的代码不算作任何这些。

此外，如果你包含一个带参数的构造函数，那么如果你想调用一个零参数的构造函数，你必须显式地创建一个。调用不存在的零参数构造函数的代码将导致另一个编译器错误。

因此，您对构造函数存在误解，并且对在类中声明事物的含义感到困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:57:05.497

```
Counter tally = new Counter();
tally.count(); 
```

在任何方法之外，这是错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:57:01.860

`tally.count();`应该在方法体内。

```
public void someMethod() {
    tally.count();
} 
```

此外，编译器不会在您的类中包含默认的无参数构造函数，因为您已经编写了一个 1-arg 构造函数，因此您必须将有效的 int 值传递给您的构造函数。

```
Counter tally = new Counter(someintval); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T16:57:18.197

您还没有将值传递给类的实例：

```
Counter tally = new Counter(10); 
```

或者可能是因为它不在

```
public static void main(String args) 
```

方法体

# java - 为 java 开源项目推荐 Eclipse 友好的 checkstyle 配置？

> ID：14651248
> 
> 赞同：3
> 
> 时间：2013-02-01T16:55:32.100
> 
> 标签：java, eclipse, checkstyle

我想开源我的一些代码。为了让贡献者更容易，我想设置一个 checkstyle 配置来配合它。然而，我最近的经验是 Eclipse Checkstyle 插件能够生成与 checkstyle.xml 文件相对应的格式化程序规则，这有待改进。也就是说，我需要手动调整生成的格式化程序规则，以使它们实际格式化文件，使其符合 checkstyle 规则。

是否有“参考”checkstyle.xml 文件被认为是开源项目的半标准文件，并且从 Checkstyle 插件生成的格式化程序规则兼容的意义上说，这些文件是 Eclipse 友好的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:01:21.187

我肯定会推荐[Geosoft](http://geosoft.no/development/javastyle.html) Checkstyle 配置。[在这里](http://geosoft.no/development/geosoft_checks.xml)
也可以找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:00:31.503

默认的 Eclipse checkstyle 规则是 Sun 标准规则，它是最小的规则集。
你可以使用这些。

# java - XML 错误和 Java(TM) Platform SE Binary 崩溃

> ID：14651254
> 
> 赞同：0
> 
> 时间：2013-02-01T16:55:58.120
> 
> 标签：java, android, xml, eclipse, user-interface

所以昨晚我正在创建一个 android XML 文件来显示编辑文本和切换按钮。然后今天当我启动 eclipse 并打开我的项目时，XML 图形布局显示：

```
The rendering target (Android 4.2) is still loading.
The layout will refresh automatically once the process is finished. 
```

当我收到错误时，我什至没有输入一个单词

```
Java(TM) Platform SE Binary has crashed 
```

并且 Eclipse 返回了一个错误对话框

```
Java was started but returned exit code=255
C:\Windows\system32\javaw.exe
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar
C:\Users\<name>\Desktop\Android\eclipse\\plugins/org.eclipse.equinox.launch
er_1.3.0.v20120522-1813.jar
-os win32
-ws win32
-arch x86_64
-showsplash
C:\Users\<name>\Desktop\Android\eclipse\\plugins/org.eclipse.platform_4.2.1.v
201209141800\splash.bmp
-launcher C:\Users\<name>\Desktop\Android\eclipse\eclipse.exe
-name Eclipse
-launcher.library
C:\Users\<name>\Desktop\Android\eclipse\\plugins/org.eclipse.equinox.launch
er.win32.win32.x86_64_1.1.200.v20120522-1813\eclipse_1503.dll
-startup
C:\Users\<name>\Desktop\Android\eclipse\\plugins/org.eclipse.equinox.launch
er_1.3.0.v20120522-1813.jar
--launcher.overrideVmargs
-exitdata b24_5c
-product org.eclipse.epp.package.mobile.product
-vm C:\Windows\system32\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar
C:\Users\<name>\Desktop\Android\eclipse\\plugins/org.eclipse.equinox.launch
er_1.3.0.v20120522-1813.jar 
```

好吧，我不明白它在说什么，现在我无法启动 Eclipse。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:39:06.277

将鼠标悬停在 java 对象上时有类似的 java 退出代码和错误。不确定您是否有同样的问题，但由于错误几乎相同，我的解决方案可能对您有用。我在 eclipse.ini 中添加了“-Dorg.eclipse.swt.browser.DefaultType=mozilla”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T19:39:26.157

在 eclipse.ini 中设置以下属性已解决此问题 -Dcom.ibm.ws.management.event.max_polling_interval=1000

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T16:31:48.067

I'm using Windows 8.1 Professional x64 and I was getting the same annoying error, I tried to execute Eclipse by using **Troubleshoot compatibility** (right click on eclipse.exe) then I chose the option "execute in Windows 8 Mode" and up now, this workaround has solved the problem...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T05:21:19.160

此错误也是由于您尝试在 Windows 8.1 上安装 Sony Vaio 驱动程序时发生的 ntdll.dll 损坏引起的。该崩溃还会影响其他应用程序，例如 Windows Media Player、BSPlayer、Catalist Control Center，并且在使用之前的答案中提到的故障排除兼容性选项执行这些应用程序时，所有这些应用程序都会得到解决……我通过不安装所有应用程序解决了这个问题索尼司机。索尼 Vaio 型号 VPCSB25FB 似乎还不完全支持 Windows 8.1。主要是当你直接安装 Windows 8.1，而不是从 Windows 8 或 7 升级...

# php - 使用 php 和 imap 进行电子邮件搜索 gmail

> ID：14651256
> 
> 赞同：2
> 
> 时间：2013-02-01T16:56:03.357
> 
> 标签：php, search, gmail, imap

我需要代码来搜索符合主题的电子邮件（确实如此），但只返回在两个日期之间到达的电子邮件。我目前使用的代码是搜索 SINCE，但即使这样也会返回早于 2013 年 1 月 20 日的电子邮件：

```
$emailSearch = "SUBJECT \"PerformanceStatement ($orgSaboName)\" SINCE \"20-Jan-2013\"";

function downloadDataSearch($emailAddress, $reportUrl, $reportType, $emailSearch)
{
    $result = "error";
    // DOWNLOAD DATA
    // the max time allows for the email to download
    set_time_limit(30000);

    // connect to gmail with your credentials
    $hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
    $username = $emailAddress; # e.g somebody@gmail.com
    $password = '*************';

    // try to connect
    $inbox = imap_open($hostname,$username,$password) or die('Cannot download information: ' . imap_last_error());

     $max_emails = 1;

    /* get all new emails. If set to 'ALL' instead 
     * of 'NEW' retrieves all the emails, but can be 
     * resource intensive, so the following variable, 
     * $max_emails, puts the limit on the number of emails downloaded.
     * 
     */
     $emails = imap_search($inbox, "$emailSearch");

    // if any emails found, iterate through each email
    if($emails > 0)
        {
            $count = 1;

            // put the newest emails on top
            //rsort($emails);

            // for every email...
            foreach($emails as $email_number) 
                {
                    // get information specific to this email
                    $overview = imap_fetch_overview($inbox,$email_number,0);

                    // get mail structure
                    $structure = imap_fetchstructure($inbox, $email_number);

                    $attachments = array();

                    // if any attachments found...
                    if(isset($structure->parts) && count($structure->parts)) 
                        {
                          for($i = 0; $i < count($structure->parts); $i++) 
                            {
                                $attachments[$i] = array(
                                    'is_attachment' => false,
                                    'filename' => '',
                                    'name' => '',
                                    'attachment' => ''
                                    );

                            if($structure->parts[$i]->ifdparameters) 
                                {
                                    foreach($structure->parts[$i]->dparameters as $object) 
                                        {
                                            if(strtolower($object->attribute) == 'filename') 
                                                {
                                                    $attachments[$i]['is_attachment'] = true;
                                                    $attachments[$i]['filename'] = $object->value;
                                                }
                                        }
                                }

                            if($structure->parts[$i]->ifparameters) 
                                {
                                    foreach($structure->parts[$i]->parameters as $object) 
                                        {
                                            if(strtolower($object->attribute) == 'name') 
                                                {
                                                    $attachments[$i]['is_attachment'] = true;
                                                    $attachments[$i]['name'] = $object->value;
                                                }
                                        }
                                }

                            if($attachments[$i]['is_attachment']) 
                                {
                                    $attachments[$i]['attachment'] = imap_fetchbody($inbox, $email_number, $i+1);

                                    // 4 = QUOTED-PRINTABLE encoding
                                    if($structure->parts[$i]->encoding == 3) 
                                        { 
                                            $attachments[$i]['attachment'] = base64_decode($attachments[$i]['attachment']);
                                        }
                                    // 3 = BASE64 encoding
                                    elseif($structure->parts[$i]->encoding == 4) 
                                        { 
                                            $attachments[$i]['attachment'] = quoted_printable_decode($attachments[$i]['attachment']);
                                        }
                                                //imap_delete($inbox,$email_number);
                                                //imap_mail_move($inbox, $email_number,'[Gmail]/Bin');
                                        }
                                 }
                          }

                     // iterate through each attachment and save it
                     foreach($attachments as $attachment)
                        {
                            if($attachment['is_attachment'] == 1)
                                {
                                    // SCAN REPORT SET OUTSIDE OF FUNCTION
                                    $filename = $reportUrl;
                                    if(empty($filename)) $filename = $attachment['filename'];
                                    if(empty($filename)) $filename = time() . ".dat";

                                    /* prefix the email number to the filename in case two emails
                                    * have the attachment with the same file name.
                                    */
                                    $fp = fopen($filename, "w+");
                                    fwrite($fp, $attachment['attachment']);
                                    fclose($fp);
                                    $result = "success";
                                 }

                        }
                    // Only include if you have set $max_emails above //
                    // if($count++ >= $max_emails) break;
                }
        } 
    // close the connection
    imap_close($inbox,CL_EXPUNGE);
    return $result;
} 
```

任何想法我做错了什么让它返回自特定日期以来的第一封电子邮件或在两个日期之间搜索的方式？

*编辑* 在没有任何建议的情况下，我决定将生成的电子邮件从最旧到最新排序，然后当我浏览每封邮件时，我从 1 开始对它们进行编号。从中我得到 x 最近或最旧等。它没有回答这个问题，但它适用于我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:12:35.327

With no suggestions I decided to order the resulting emails from oldest to newest and then as I go through each one I number them from 1 on. From that I get the x most recent or oldest, etc. It doesn't answer this question but it worked for what I needed.

# c# - 存储过程不更新在 asp.net 中触发的 sql 表

> ID：14651258
> 
> 赞同：0
> 
> 时间：2013-02-01T16:56:04.593
> 
> 标签：c#, sql-server, stored-procedures

我有一个网站，其中一个表格将显示资产列表及其从 sql 表格中提取的信息。我有一个部分按钮，如有必要，职员可以通过在文本或下拉字段中输入新信息来按下和修改现有信息。这是使用存储过程完成的；在您检查工作之前，一切似乎都运行良好，没有任何更新！

这是编辑信息的代码；

```
 protected void ADD_Click(object sender, EventArgs e)
{
    using (SqlConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["DATASYSTEMS"].ConnectionString))
    {
        SqlCommand cmd = new SqlCommand("UPDATING_ASSETS", connection);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@ASSET_NUMBER", Txtasset_number.Text);
        cmd.Parameters.AddWithValue("@MACHINE_NAME", Txtmachine_name.Text);
        cmd.Parameters.AddWithValue("@PORT_NUMBER", Txtport_number.Text);
        cmd.Parameters.AddWithValue("@BUILDING_NUMBER", DPBUILDING.SelectedValue);
        cmd.Parameters.AddWithValue("@ROOM_NUMBER", Txtroom_number.Text);
        cmd.Parameters.AddWithValue("@TELEPHONE_NUMBER", Txttelephone_number.Text);
        cmd.Parameters.AddWithValue("@FLOOR", Txtfloor.Text);
        cmd.Parameters.AddWithValue("@SERIAL", Txtserial.Text);
        cmd.Parameters.AddWithValue("@TYPE", DPTYPE.SelectedValue);
        cmd.Parameters.AddWithValue("@BRANCH", DPBRANCH.SelectedValue);
        cmd.Parameters.AddWithValue("@SECTION", DPSECTION.SelectedValue);
        cmd.Parameters.AddWithValue("@USERS", txtuser1.Text);
        ClientScript.RegisterClientScriptBlock(this.GetType(), "key", "<script type='text/javascript'>alert('Record has been updated.');window.location='navigation.aspx';</script>");
    }
}
protected void dglocaltables_SelectedIndexChanged(object sender, EventArgs e)
{

} 
```

}

这是应该更新的存储过程。

```
 CREATE PROCEDURE [dbo].[update_TBL_INFO_1] @ASSET_NUMBER as nvarchar(50), @PORT_NUMBER as nvarchar(50), @MACHINE_NAME as nvarchar(50), @TYPE as nvarchar(50) ,  @BRANCH as nvarchar(50), @SECTION as nvarchar(50), @BUILDING_NUMBER as nvarchar(50), @ROOM_NUMBER as nvarchar(50), @TELEPHONE_NUMBER as nvarchar (50), @FLOOR as nvarchar (50), @USERS as nvarchar (50), @ID as float (8), @SERIAL as nvarchar (50) as

If (SELECT ASSET_NUMBER FROM dbo.TBL_INFO WHERE ASSET_NUMBER=@ASSET_NUMBER AND [ID]=@ID)=@ASSET_NUMBER
BEGIN
    If (SELECT MACHINE_NAME FROM dbo.TBL_INFO WHERE MACHINE_NAME=@MACHINE_NAME AND [ID]=@ID)=@MACHINE_NAME
    BEGIN
        If (SELECT PORT_NUMBER FROM dbo.TBL_INFO WHERE PORT_NUMBER=@PORT_NUMBER AND [ID]=@ID)=@PORT_NUMBER
        BEGIN
            If (SELECT [ID] FROM dbo.TBL_INFO WHERE [ID]=@ID)=@ID
            BEGIN

                UPDATE dbo.TBL_INFO
                    SET
                    dbo.TBL_INFO.ASSET_NUMBER = @ASSET_NUMBER,
                        dbo.TBL_INFO.MACHINE_NAME = @MACHINE_NAME,
                        dbo.TBL_INFO.PORT_NUMBER = @PORT_NUMBER,
                        dbo.TBL_INFO.BUILDING_NUMBER = @BUILDING_NUMBER,
                        dbo.TBL_INFO.ROOM_NUMBER = @ROOM_NUMBER,
                        dbo.TBL_INFO.TELEPHONE_NUMBER = @TELEPHONE_NUMBER,
                        dbo.TBL_INFO.[FLOOR]= @FLOOR,
                        dbo.TBL_INFO.TYPE = @TYPE,
                        dbo.TBL_INFO.BRANCH = @BRANCH,
                    dbo.TBL_INFO.[SECTION] = @SECTION,
                        dbo.TBL_INFO.USERS = @USERS,
                    dbo.TBL_INFO.[ID] = @ID,
                    dbo.TBL_INFO.SERIAL = @SERIAL
                                WHERE dbo.TBL_INFO.ASSET_NUMBER=@ASSET_NUMBER
                INSERT INTO dbo.TBL_INFO (ASSET_NUMBER, MACHINE_NAME, PORT_NUMBER, BUILDING_NUMBER, ROOM_NUMBER, TELEPHONE_NUMBER, [FLOOR], TYPE, BRANCH, [SECTION], USERS, SERIAL, [ID]) VALUES (@ASSET_NUMBER, @MACHINE_NAME, @PORT_NUMBER, @BUILDING_NUMBER, @ROOM_NUMBER, @TELEPHONE_NUMBER, @FLOOR, @TYPE, @BRANCH, @SECTION, @USERS, @SERIAL, @ID) 
                SELECT @ID, ACCESS='VALID'

            END

                 ELSE   
                BEGIN
                    SELECT @ID, ACCESS='INVALID'
                END
        END

    ELSE
        BEGIN
            SELECT ACCESS='RESTRICTED'
        END
    END
ELSE
    BEGIN
        SELECT ACCESS='DENIED'      
    END
END 
```

去

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:59:20.470

***你永远不会执行命令！***

您需要在所有这些 .AddWithValue() 调用结束时使用它：

```
cmd.ExecuteNonQuery(); 
```

# ios - 核心数据和 GCD：将正确的托管对象上下文传递给自定义 NSManagedObjects

> ID：14651259
> 
> 赞同：3
> 
> 时间：2013-02-01T16:56:07.287
> 
> 标签：ios, objective-c, cocoa-touch, core-data, grand-central-dispatch

我收到运行时错误，这似乎是由于我不正确地`GCD`结合我的自定义 NSManagedObjects 实现的。

嵌套在`GCD`调用中，我正在使用自定义 NSManagedObjects，它（似乎）有自己的托管对象上下文（= `self.managedObjectContext`）。

我正在使用提供的托管对象上下文在应用程序委托中创建托管对象上下文`UIManagedDocument`：`self.managedDocument.managedObjectContext`。

我不明白如何将正确的托管对象上下文传递给我的自定义 NSManagedObjects。我需要如何更改我的代码以使用正确的托管对象上下文？

这是我的主要方法（在​​视图控制器内）：

```
dispatch_queue_t queue;
queue = dispatch_queue_create("queue", NULL);
dispatch_async(queue, ^{
// ...
NSDecimalNumber *value = [reportedPeriod 
   valueForCoa:figure.code 
   convertedTo:self.currencySymbol];
// ...});
} 
```

在这个主要方法中，我没有对托管对象上下文的任何引用，我只是调用`valueForCoa:convertedTo:`（编码如下）：

```
- (NSDecimalNumber*)valueForCoa:(NSString*)coaStr
convertedTo:(NSString*)targetCurrencyStr {
// ...
CoaMap *coa = [CoaMap coaItemForString:coaStr
   inManagedObjectContext:self.managedObjectContext];
// ...
} 
```

`valueForCoa`是我的自定义子类 NSManagedObject 中的一种方法，`ReportedPeriod`并使用其（默认）托管对象上下文`self.managedObjectContext`。

`CoaMap`然后，应用程序在执行 fetch 请求时通常会在以下方法中的自定义子类 NSManagedObject 中崩溃：

```
+ (CoaMap*)coaItemForString:(NSString*)coaStr 
inManagedObjectContext:(NSManagedObjectContext*)context {

NSFetchRequest *request = [NSFetchRequest 
fetchRequestWithEntityName:NSStringFromClass([self class])];
NSPredicate *predicate = 
   [NSPredicate predicateWithFormat:@"coa == %@",coaStr];
   request.predicate = predicate;
// ** The runtime error occurs in the following line **
NSArray *results = [context executeFetchRequest:request error:nil];
// ...
} 
```

错误信息是：`Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSCFSet: 0x9a8a4a0> was mutated while being enumerated.`

您能否帮我解决这个问题，并就如何改进我的代码以传递正确的托管对象上下文（或如何确保在所有方法中使用正确的上下文）给我一些建议？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T17:12:11.550

该错误通常与跨不同线程或队列错误地使用托管对象上下文有关。您在主队列上创建了 MOC，但您在后台队列上使用它而不考虑这一事实。在后台队列上使用 MOC 并没有*错*，但您需要注意这一点并做好准备。

你没有说你是如何创建 MOC 的。我建议你*应该*这样做：

```
NSManagedObjectContext *context = [[NSManagedObjectContext alloc]
    initWithConcurrencyType: NSMainQueueConcurrencyType]; 
```

使用主队列并发，您可以在主线程上正常使用它。但是，当您在调度队列中时，请执行以下操作：

```
[context performBlockAndWait:^{
    NSFetchRequest *request = [NSFetchRequest 
        fetchRequestWithEntityName:NSStringFromClass([self class])];
    NSPredicate *predicate = 
       [NSPredicate predicateWithFormat:@"coa == %@",coaStr];
    request.predicate = predicate;
    NSArray *results = [context executeFetchRequest:request error:nil];
    // ...
}]; 
```

这将确保 MOC 的工作发生在主线程上，即使您在后台队列中也是如此。（从技术上讲，这实际上意味着 MOC 在后台的工作将与它在主队列上的工作正确同步，但结果是相同的：这是执行此操作的安全方法）。

类似的方法是使用`NSPrivateQueueConcurrencyType`。如果你这样做，你会在 MOC 的任何地方使用`performBlock`或使用`performBlockAndWait`，而不仅仅是在后台线程上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:21:00.720

第一的，

> “如何将正确的托管对象上下文传递给我的自定义 NSManagedObjects。”

我们`NSManagedObject`用`NSManagedObjectContext`. 不是相反。因此，当您拥有 时`NSManagedObject`，您可以`NSManagedObjectContext`通过询问其属性来访问 ：如[**Apple Document**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)`– managedObjectContext`中所列[](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)

 **第二，

使用 CoreData 时，多线程可能有点棘手。特别是对于初学者。这些都是您需要注意的细节。

我强烈建议您查看`Parent-Child NSManagedContext`. 然后，使用[**MagicRecord**](https://github.com/magicalpanda/MagicalRecord)。

通过使用[**MagicRecord**](https://github.com/magicalpanda/MagicalRecord)，您可以简单地使用带有这样的块的 Grand Central Dispatch：

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext){

    // here use the `localContext` as your NSManagedContext and do things in the background.
    // it will take care of all the rest.

}]; 
```

如果你需要传递`NSManagedObject`到这个块，记住只传递`NSManagedObjectID`而不是属性。

这是一个例子。

```
NSManagedObjectID *coaMapID = CoaMap.objectID;

[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext){
    coaMap *aCoaMap = (coaMap *)[localContext existingObjectWithID:coaMapID error:&error];
    // then use aCoaMap normally.
}]; 
```

希望这有帮助。**

# eclipse - 编译/构建之前的 Eclipse EXPORT DLL

> ID：14651265
> 
> 赞同：0
> 
> 时间：2013-02-01T16:56:23.977
> 
> 标签：eclipse, dll, mingw, dllimport, dllexport

我正在使用两天前更新的 Eclipse Juno，全新安装并安装了 C/C++ 并将 MinGW 链接到 Windows（顺便说一下 7 64 位）。一切正常，我可以构建/编译“Hello World”并执行 eclipse 生成的文件。

现在我有三个文件，main.cpp：

```
#include "functions.cpp"
#include <iostream>
using namespace std;
int main(int){
    int a = mult(20,5);
    cout << "Twenty times 5 is " << a;
    cout << a << "Plus 2 is " << add2(a);
    return 0;
} 
```

函数.cpp：

```
#include "header.h"
int EXPORT  add2(int num){
  return num + 2;
}
int EXPORT  mult(int num1, int num2){
  int product;
  product = num1 * num2;
  return product;
} 
```

标头.h：

```
#ifndef HEADER_H_
#define HEADER_H_
#ifdef BUILD_DLL
#define EXPORT __declspec(dllexport)
#else
#define EXPORT __declspec(dllimport)
#endif
int EXPORT add2(int num);
int EXPORT mult(int num1, int num2);
#endif /* HEADER_H_ */ 
```

在代码中进行此设置后，我需要首先生成一个 DLL 文件，然后在构建时使用。例如，如果我将这些文件放在我的桌面上，我可以 /cd desktop 并使用以下命令：

```
g++ functions.cpp -o functions.dll -DBUILD_DLL -shared -Wl,--out-implib,libfunctions.dll.a 
```

这将创建一个 DLL 文件和一个 .A 文件，一个动态一个静态。

简而言之，我的问题：

我可以让 Eclipse 在尝试将我的代码构建到 .exe 文件之前从 functions.cpp 创建一个 DLL 文件吗？在这个阶段，我的代码正在寻找要导入的 DLL 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:31:36.580

我发现了如何做到这一点。这可能不是最好的选择，但是我可以进入我的项目属性-->C/C++ Build--->Settings--->Build Steps。

![带有代码的构建步骤选项卡的屏幕截图。](../Images/5292c1d00bfa5cf8558e6122ec5056c9.png)

这似乎可行，但是我现在正试图找到一种方法来设置命令以使用项目的源目录，而不必使用 C:/eclipse/workplace 等。

# android - ListView 行失去焦点

> ID：14651266
> 
> 赞同：0
> 
> 时间：2013-02-01T16:56:27.050
> 
> 标签：android, android-listview, xamarin.android

我遇到了一个问题，即 EditText 在 ListView 中的一行中。

用户可以在 EditText 中输入多行文本。每个新行都会导致 Row 展开，并且 ListView 刷新/更新。

我怎样才能：

*   A) 防止列表视图整体更新？
*   B）将列表视图重新聚焦在前一个文本视图的位置（视图被回收）
*   C) 更好的方法？

我努力了：

*   继承 ListView 并设置选择 OnSizeChanged、OnFinishInflate 等。
*   拦截 EditText 的失去焦点并在那里重置列表选择。（问题是视图被回收）

* * *

目前使用：

*   MonoDevelop 3.0.6
*   适用于 Android 的单声道：4.4.55
*   Android SDK：4.0（API 级别 14）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:10:19.553

尝试[`DescendantFocusability`](http://developer.android.com/reference/android/R.attr.html#descendantFocusability)在`ListView`. 我认为将其设置为`DescendantFocusability.AfterDescendants`，可能会解决焦点和调整大小的问题。

它适用于我的小样本：

MainActivity.cs

```
using Android.App;
using Android.Views;
using Android.Widget;
using Android.OS;

namespace ListViewTests
{
    [Activity(Label = "ListViewTests", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.Main);

            var lv = FindViewById<ListView>(Resource.Id.listView);
            lv.Adapter = new ArrayAdapter(this, Resource.Layout.ListViewItem, Resource.Id.textView, new [] {"1", "2"});
            lv.DescendantFocusability = DescendantFocusability.AfterDescendants;
        }
    }
} 
```

ListViewItem.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
  <TextView
    android:id="@+id/textView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
  <EditText
    android:id="@+id/editText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
</LinearLayout> 
```

但是，您对视图被回收的问题可能需要更多的工作。您需要以某种方式保存视图的状态，并在它们再次创建时恢复状态。因此，对于适配器中的每个项目，您都需要连接到视图的事件。即，`EditText`您想要连接到其中一个`TextChanged`或`AfterTextChanged`获取包含的文本并将状态保存在某处。这可能是您正在显示的适配器中的项目。

# winapi - 在Win32中，如何将文本文件成功读入内存？

> ID：14651269
> 
> 赞同：2
> 
> 时间：2013-02-01T16:56:42.730
> 
> 标签：winapi

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:10:14.497

好的，我从评论开始，但它失去了控制。

**写作**

这个：

```
WCHAR *lpszText = new WCHAR[dwTextSize]; 
```

应该：

```
WCHAR *lpszText = new WCHAR[dwTextSize+1]; 
```

这个：

```
DeleteObject(hTextFile); 
```

根本不应该在那里**。**. 摆脱它。

`delete [] lpszText;`当你完成它时，我假设你在某个地方。如果没有，请这样做。

* * *

**阅读**

第二个参数`GetFileSize()`不应与您的返回值是同一个变量。对于大文件大小，它是 64 位值的 HIGH 32 位。如果您知道您的文件大小小于 4gB，则可以将其保留为 NULL，因此请更改以下内容：

```
DWORD dwFileSize = GetFileSize(hTextFile, &dwFileSize); 
```

对此：

```
DWORD dwFileSize = GetFileSize(hTextFile, NULL); 
```

您必须考虑文件缓冲区的空终止符，因此：

```
WCHAR *lpszText = new WCHAR[dwFileSize / 2]; 
```

应该改成这样：

```
WCHAR *lpszText = new WCHAR[dwFileSize / 2 + 1];
lpszText[dwFileSize / 2] = 0; 
```

其余的应该像你希望的那样工作。没有错误检查，这不好，但我见过更糟的。`delete [] lpszText;`和以前一样，当你完成它时，我假设你在某个地方。如果没有，请这样做。

# javascript - 使用 AJAX 和 CORS 连接到 webService

> ID：14651271
> 
> 赞同：0
> 
> 时间：2013-02-01T16:56:49.690
> 
> 标签：javascript, cordova, cors

我正在开发一个带有 html5、css、js 和 jQuery Mobile 的 phonegap 应用程序，我需要连接到一个已经完成并且可以正常工作的 web 服务。问题是访问控制允许来源和跨域。好像这还不够难，我还必须考虑身份验证，这对于连接到 Web 服务至关重要。我已经完成了我的研究，阅读了很多 tuts，尝试了很多解决方案，其中一些使用 jsonP，这在我看来是最接近工作的。问题是我是新手，没有教程看起来不错，所以希望这里有人可以引导我。webService 是在 asp.net 中构建的，如果需要，我可以完全访问它。我正在使用 AJAX 进行“通话”，但我无法通过 ForeFront 身份验证。

这是 JS+AJAX 代码：

```
function conteudoProg() {
    var webMethod = "myURL";
    var credentials = {
      username : "myUser",
      password : "myPass"
  };

$.ajax({
    type : "GET",
    url : webMethod,
    //data: credentials,
    contentType : "application/json; charset=utf-8",
    dataType : "jsonp",
    success : function(msg) {
        alert(msg);
    },
    error : function(e) {
        alert(e.status + " " + e.statusText );
    }
});
} 
```

如果我将 dataType 从 jsonp 更改为 json，我会收到以下错误：

```
OPTIONS https://myURL 440 (Login Timeout) 
XMLHttpRequest cannot load https://myURL Origin http://127.0.0.1:8020 is not allowed by Access-Control-Allow-Origin. 
```

使用 jsonp，错误如下所示：

```
Resource interpreted as Script but transferred with MIME type text/html: "https://myURL/CookieAuth.dll?GetLogon?curl=Z2FWSInqueritosZ2FServ…1820135927463_1359737732559Z26_Z3D1359737732605&reason=0&formdir=3". jquery-1.8.2.min.js:2
Uncaught SyntaxError: Unexpected token < 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:03:22.537

该代码不起作用，因为当您告诉 jQuery .ajax 方法需要一个 dataType json 时，这就是试图将响应解析为的内容。如果响应是 html，那么您应该使用 dataType html（或无，让默认的智能猜测工作）。有关更多信息，请参阅[jQuery.ajax() 数据类型](http://api.jquery.com/jQuery.ajax)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:01:17.780

对另一个域的请求将导致一个飞行前`OPTIONS`请求，以查看请求域是否可以调用该域。

接收端需要发出正确的标头，否则您的浏览器将阻止请求并给您发布的错误。

假设您要求从`mydomain.com`到`webservice.com`

然后`webservice.com/api`应该发出这些标头：

```
Access-Control-Allow-Origin: http[s]://mydomain.com
Access-Control-Allow-Credentials: true                      # if you want cookies
Access-Control-Allow-Headers: Content-Type, X-Custom-Header # any extra headers you want to send 
```

确保网络服务知道`OPTIONS`请求。它实际上只需要发出一些 CORS 标头，它不需要做任何其他事情（例如处理对其 API 的请求）。

您不需要更改 AJAX 处理程序中的任何内容，它将作为任何其他请求传递。如果您想要 cookie，请确保设置`http_request.withCredentials = true;`

* * *

请记住，HTTPS URL 被认为与 HTTP 域不同，并**确保您的 HTTPS 证书有效**，如果它无效，请求可能会静默失败。如果您使用的是自签名证书（用于测试），请将其添加到您的浏览器或操作系统白名单中。 [从 HTTP 到 HTTPS 的跨域请求立即中止](https://stackoverflow.com/questions/11690191/cross-domain-request-from-http-to-https-aborts-immediately)

* * *

至于兼容性。早期版本的 Internet Explorer（8 及更低版本）使用`ActiveXObject`，此 API 在 CORS 方面非常糟糕。它不支持身份验证/cookie 或自定义标头（例如`Content-Type: application/JSON`）。我会推荐一个**JSONp**后备。

# google-groups - Google 网上论坛设置 API 更新

> ID：14651274
> 
> 赞同：0
> 
> 时间：2013-02-01T16:57:00.783
> 
> 标签：google-groups

我正在尝试更新 Google 群组的设置。我有一个 Oauth2 令牌，但是当我执行以下代码时：

```
Groupssettings mygs = buildGS();
Groups.Update hisgs = mygs.new Groups().update("11_sp_abd_000_01", gSettings);
hisgs.setOauthToken(token);
hisgs.buildHttpRequest();
hisgs.execute();

public static Groupssettings buildGS()
{
    return new Groupssettings.Builder(HTTP_TRANSPORT, JSON_FACTORY, null)
    .setApplicationName("ApplicationName")
    .build();
} 
```

我收到以下错误：

```
Exception in thread "main" java.lang.NoSuchMethodError: 
com.google.api.services.groupssettings.Groupssettings$Groups$Update.set(Ljava/lang/String;Ljava/lang/Object;)V

at com.google.api.services.groupssettings.Groupssettings$Groups$Update.<init>(Groupssettings.java:363)
at com.google.api.services.groupssettings.Groupssettings$Groups.update(Groupssettings.java:351)
at GetAuth.main(GetAuth.java:62) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:59:48.863

我想到了。显然，我的 POM 文件和类路径中的定义在 Maven 中存在冲突。我有 2 个对 com.google.api.blah.blah.Groupssettings 类的引用，这让 Eclipse 感到困惑。为了解决这个问题，我删除了对 jar 文件的类路径引用，并留下了 POM 引用 et Viola！

# java - java - MySql 中的多个更新语句

> ID：14651276
> 
> 赞同：2
> 
> 时间：2013-02-01T16:57:03.887
> 
> 标签：java, mysql, jdbc, sql-update, sql-parametrized-query

所以我有一个软件，它基本上从我的 MySQL db 下载 1.5K 游戏服务器地址。然后它会ping所有这些，然后将在线玩家等信息上传回数据库。该过程如下所示：

1.  下载服务器地址
2.  ping 服务器并获取信息
3.  将信息上传回数据库

到目前为止，我已经能够解决下载服务器主机名并 ping 它们的部分，但是在更新服务器时会出现问题。

为了更新，我考虑过使用 for 循环来构造一个包含许多更新语句的大字符串并立即执行它，但这很容易发生 sql 注入。因此，理想情况下，人们会想要使用准备好的语句。

我正在使用的 SQL 更新语句是：

```
UPDATE serverlist SET `onlineplayers` = '3', maxplayers = '10', 
name = 'A game server' WHERE `ip` = 'xxx.xxx.xxx.xxx' AND `port` = 1234; 
```

所以我的问题是：
**如何使用参数化查询执行所有 1.5K 更新语句？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:01:49.940

如果你用谷歌搜索“jdbc 批量更新”，你会得到很多[类似 this](http://www.mkyong.com/jdbc/jdbc-preparedstatement-example-batch-update/)或[this](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/tjvbtupd.htm)的结果。

后者有一个这样的例子：

```
try {
...
  connection con.setAutoCommit(false);                   
  PreparedStatement prepStmt = con.prepareStatement(    
    "UPDATE DEPT SET MGRNO=? WHERE DEPTNO=?");           
  prepStmt.setString(1,mgrnum1);                         
  prepStmt.setString(2,deptnum1);
  prepStmt.addBatch();                                   

  prepStmt.setString(1,mgrnum2);                        
  prepStmt.setString(2,deptnum2);
  prepStmt.addBatch();
  int [] numUpdates=prepStmt.executeBatch();             
  for (int i=0; i < numUpdates.length; i++) {            
    if (numUpdates[i] == -2)
      System.out.println("Execution " + i + 
        ": unknown number of rows updated");
    else
      System.out.println("Execution " + i + 
        "successful: " numUpdates[i] + " rows updated");
  }
  con.commit();                                          
} catch(BatchUpdateException b) {
  // process BatchUpdateException
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:59:33.270

听起来您想要进行批量 SQL 更新。准备好的陈述是你的朋友。下面是一个批量使用准备好的语句的例子：

[http://www.mkyong.com/jdbc/jdbc-preparedstatement-example-batch-update/](http://www.mkyong.com/jdbc/jdbc-preparedstatement-example-batch-update/)

使用准备好的语句使设置参数更容易，它允许数据库有效地执行多次更新。执行多个 SQL 字符串会起作用，但效率会很低，因为每个 SQL 字符串都将被发送到 DBMS、解析、编译，然后执行。使用准备好的语句，SQL 会被解析和编译一次，然后重新用于具有不同参数的未来更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-28T15:37:43.550

在 MySQL 批量更新/插入期间您应该注意的另一个重要步骤是 JDBC 连接属性***rewriteBatchedStatements=true***（默认为 false ）。没有它批处理模式是无用的。在我发现这一点之前，我花了 1 天的时间来“修复错误”。当您的行数较少并关闭客户端到数据库的位置（1ms ping）时，您甚至无法意识到您处于“假批处理模式”，但是当我将环境切换到远程客户端（ping=100ms）和 100k要更新的行，默认***rewriteBatchedStatements=false***需要 4 小时的“批量模式更新”，而 rewriteBatchedStatements=true只需***2 分钟***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T17:02:51.087

创建一个准备好的语句：

```
String sql = "update serverlist SET onlineplayers = ?, maxplayers = ?, name = ? where ip = ? and port = ?";
PreparedStatement stmt = connection.prepareStatement(sql); 
```

然后遍历您的列表，并在每次迭代时执行

```
stmt.setInt(1, onlinePlayers);
stmt.setInt(2, maxPlayers);
stmt.setString(3, name);
stmt.setString(4, ip);
stmt.setInt(5, port);
stmt.executeUpdate(); 
```

为了获得更好的性能，您还可以使用批量更新。

阅读[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

# android - Android 正在读取 SQLite 中的 iOS 日期（NSDate）

> ID：14651289
> 
> 赞同：0
> 
> 时间：2013-02-01T16:57:48.737
> 
> 标签：android, ios, sqlite, nsdate

在 Android 中，我正在阅读最初从 iOS 创建的 SQLite3 数据库（通过**NSDate**）。我可以很好地阅读表格和值，但是有一个 TIMESTAMP 问题......

当查看 SQLite 数据库浏览器时， **TIMESTAMP**字段显示一个数值。例如，在数据库中找到了**385192800**的值，我相信它对应于 Sun March 17 2013, 6:00 AM UTC/GMT+0。

我如何解释 Android (Java) 的这个日期？通常，时间戳应该是从 1970-01-01 开始的秒数（甚至毫秒）。这个日期甚至还没有结束……

当我发出以下查询时，我得到“1982-03-16”...

```
SELECT strftime('%Y-%m-%d', datetime(385192800, 'unixepoch')) AS somedate 
FROM SOMETABLE LIMIT 1 
```

它一定不是典型的 unix 时间戳。iOS 的 NSDate 在坚持到 SQLite3 时会做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:23:44.857

核心数据根据参考日期存储时间戳，即 2001 年 1 月 1 日。有关更多信息，请参阅[此讨论](https://stackoverflow.com/questions/10705062/behind-the-scenes-core-data-dates-stored-with-31-year-offset)。

PS：您的问题没有提及您指定的时间戳的年份。

# mysql - 一表多参数查询

> ID：14651292
> 
> 赞同：0
> 
> 时间：2013-02-01T16:57:56.257
> 
> 标签：mysql

我有 2 个表，如下所示：

表 1 包含`UserID`和`Name`而表 2 包含`UserID`, `Skill_ID`, 和`SkillName`

我想要做的是，我想搜索具有 2 技能的人，通过 SkillName 搜索。

例如：我有*Andy*，`Name`因为他有 2 项技能*PHP*和*C#*，所以当我搜索*PHP* & *C#*时，Andy 将显示为结果。

有谁能够帮助我？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:02:46.367

```
SELECT a.Name
FROM    table1 a
        INNER JOIN table2 b
            ON a.userID = b.user_ID
WHERE   b.skill_name IN ('PHP','C#')
GROUP   BY a.Name
HAVING  COUNT(*) = 2 
```

你的桌子的设计没有很好地规范化。关系的类型是`Many-to-Many`，在这种情况下，这应该是三个表，`Users`和`Skills`链接表`User_Skills`。

建议的设计是：

桌子`User`

*   用户 ID (PK)
*   姓名

桌子`Skills`

*   技能 ID (PK)
*   技能名称

桌子`User_Skills`

*   用户 ID (FK)
*   技能 ID (FK)

# php - 查询SQL表成csv文件并下载

> ID：14651294
> 
> 赞同：-1
> 
> 时间：2013-02-01T16:58:01.323
> 
> 标签：php, sql, csv, pdo

我想查询一个表到一个 .csv 文件并自动下载它。该文件是使用适当的数据创建的，但下载的文件显示错误的数据。

```
$filename = 'file.csv';
$i=0;
    try {
        $stmt = $conn->prepare("SELECT DATE, TYPE, AMOUNT, BALANCE FROM TRANSACTIONS WHERE USERNAME=? ORDER BY DATE ASC");
        $stmt->execute(array($user));
        $num_rows = $stmt->rowCount();

        $handle = fopen($filename, 'w+')  or die("can't open file");
        fputcsv($handle, array('Date','Type','Amount','Balance'));
        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

            $row2[$i][0] = $row['DATE'];
            $row2[$i][1] = $row['TYPE'];
            $row2[$i][2] = $row['AMOUNT'];
            $row2[$i][3] = $row['BALANCE'];
            $i++;
            echo $i;
            fputcsv($handle, array($row['DATE'], $row['TYPE'], $row['AMOUNT'], $row['BALANCE']));
        }

        fclose($handle);
        header('Content-disposition: attachment; filename='.$filename);
        header("Content-Type: application/force-download");
        header("Content-Length: " . filesize($filename));
        header("Connection: close");
        } catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage(); 
    } 
```

这是文件在我的浏览器中下载时的样子： ![在此处输入图像描述](../Images/eab17c6a1fb84b7ce128e0202aa9fafe.png)

有时它看起来像这样： ![在此处输入图像描述](../Images/2fc40f7cdf533f951c18ece773ff9964.png)

这是它在服务器上创建时的样子： ![在此处输入图像描述](../Images/944fc61f1fe1cfdcb0996f03f0dae5a5.png)

**在服务器上创建的文件始终包含适当的结构和数据。由于某种原因，为用户下载的文件不同且错误。**

代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:44:49.420

我打了

```
$handle = fopen($filename, 'w+')  or die("can't open file"); 
```

代替

```
$handle = fopen("php://output", "w"); 
```

# python - 为什么 python 解释器不打印 python 模式的 emacs python shell 缓冲区中的输入代码和输出？

> ID：14651296
> 
> 赞同：4
> 
> 时间：2013-02-01T16:58:05.853
> 
> 标签：python, emacs, ipython, ess, python-mode

我当前在 emacs 中的 python 设置是：

```
(setq py-shell-name "ipython") ;; sudo pip install ipython
(setq py-shell-name "/usr/local/bin/ipython")
(setq py-force-py-shell-name-p t)
(add-to-list 'load-path "~/.emacs.d/python-mode.el-6.1.0/") 
(setq py-install-directory "~/.emacs.d/python-mode.el-6.1.0/")
(require 'python-mode)
(add-to-list 'auto-mode-alist '("\\.py\\'" . python-mode))
(add-to-list 'interpreter-mode-alist '("python" . python-mode)) 
```

在 python 文件中，我用 "Cc !" 启动 python 解释器。（py 壳）。我用“抄送|”评估代码区域 （py 执行区域）。

如果我单独执行以下每一行，

```
x = "hello world"
x
print(x) 
```

我在 python shell 缓冲区中得到以下内容：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: 
In [5]: 
In [6]: hello world

In [7]: 
```

如果我使用默认的 python 解释器，我会得到

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> >>> >>> hello world
>>> 
```

问题：

1.  这些行为是否正确（没有显示正在评估哪些代码，也没有显示 python 解释器通常会打印什么）？

2.  如何设置它以便 python shell 像终端中的普通 python 解释器一样打印输出？（打印输入代码和输出）

我想我已经习惯了 R 的 ESS。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:58:34.283

您正在寻找可能会实施的功能。

在这种情况下，请将其作为问题提交至

[https://answers.launchpad.net/python-mode](https://answers.launchpad.net/python-mode)

完成后，在底部使用“(+) 创建错误报告”。

它会创建一张票，帮助我们跟踪问题。

或者，您可以创建蓝图并在之后链接工单。

到目前为止完成：

[https://blueprints.launchpad.net/python-mode/+spec/print-input-code](https://blueprints.launchpad.net/python-mode/+spec/print-input-code)

此外，您的 init 会显示一些无用的代码 - 但无害。“py-shell-name”的第二个设置采用第一个的符号。

“...-mode-alist”的东西已经从 python-mode 完成了，你不必关心。

# perl - 三元运算符中的条件不会导致任何变化

> ID：14651297
> 
> 赞同：2
> 
> 时间：2013-02-01T16:58:08.873
> 
> 标签：perl, ternary-operator, fizzbuzz

这是我的代码示例：

```
for $i(1..100){
   if ($i%15==0){$s="Divisible by 15"}
   elsif($i%5==0){$s="Divisible by 5"}
   else {$i%3==0 ? $s="Divisible by 3" : $s=$i};
   print $s."\n"} 
```

这会显示部分正确的结果，如果一个数字可以被 3 整除，它会显示“数字”而不是“能被 3 整除”。

输出示例：

```
1
2
3
4
Divisible by 5
6
7
8
9
Divisible by 5 
```

PS：我必须以最少的数量编写此代码。可能的字符数。（代码这么卡顿的原因）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:11:03.873

第四行被解析为

```
(((($i % 3) == 0) ? ($s = 'Divisible by 3') : $s) = $i) 
```

这意味着即使`$i`可以被 3 整除，分配看起来像

```
($s = 'Divisible by 3') = $i 
```

一些修复：

```
$i%3==0 ? ($s="Divisible by 3") : ($s=$i)
$s = ($i%3==0 ? "Divisible by 3" : $i) 
```

* * *

专业提示：`B::Deparse`对于弄清楚这些东西非常有帮助。我运行了命令

```
perl -MO=Deparse,-p -e '$i%3==0 ? $s="Divisible by 3" : $s=$i' 
```

看看到底是什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:10:10.413

三元`?:`的[优先级](http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity)高于赋值。使用括号来解决这个问题：

```
for my $i (1 .. 100) {
   my $s = "Divisible by ";
     $i%15==0 ? ($s .= 15)
   : $i%5==0  ? ($s .= 5)
   : $i%3==0  ? ($s .= 3)
   :            ($s  =$i);
   print "$s\n";
} 
```

输出：

```
1
2
Divisible by 3
4
Divisible by 5
Divisible by 3
7
8
Divisible by 3
Divisible by 5 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T17:44:04.077

如果你想要一个字符更少的版本，

```
for $i(1..100){print(($i%3&&$i%5?$i:"Divisible by ".($i%5?3:$i%15?5:15))."\n");} 
```

print 函数后面的括号表示调用 print 函数，而不是对表达式进行分组。原因是括号对于该函数是可选的。

# php - 如何处理海量数据集并提供实时用户体验

> ID：14651299
> 
> 赞同：2
> 
> 时间：2013-02-01T16:58:12.343
> 
> 标签：php, ajax, large-data-volumes

我是一家主要生产工具的互联网营销公司的程序员。这些工具有一定的要求：

*   它们在浏览器中运行，并且必须在所有浏览器中运行。
*   用户要么上传一些东西（.csv）来处理，要么他们提供一个 URL 并进行 API 调用以检索有关它的信息。
*   他们正在移动数千行数据（想想大型数据库）。这些工具实际上运行了几个小时，通常是一整夜。
*   用户必须能够在他们的信息被处理并呈现给他们时实时观看。

目前我们正在使用 PHP、MySQL 和 Ajax 编写代码。

我的问题是如何处理大量数据并在工具运行时提供用户体验。目前我使用一个自定义队列系统，它发送 ajax 调用并将行插入到表中或将数据插入到 div 中。

这种方法是一个巨大的痛苦，不可能是正确的方法。我应该使用模板系统还是有更好的方法来刷新包含大量数据的页面块。我的意思是大量数据，因为我们接近于用尽 PHP 内存，这是我们一直在寻找的东西。

我也很想这样做，这样这些工具就可以自己在服务器上运行。我的意思是上传一个 .csv 文件并关闭浏览器窗口，然后在工具完成后向用户发送一封电子邮件。

有没有人有比使用 .ajax 调用更好的方法（编程标准）？谢谢你。

* * *

我想更新一些笔记，以防有人有同样的问题。我正在研究以下内容，看看哪个是最好的解决方案：

*   SlickGrid / 数据表
*   齿轮人
*   网络套接字
*   棘轮
*   节点.js

这些没有特别的顺序，我选择的一个将基于什么对我的问题有用，什么可以被我部门的其他人使用。当我选择黄金框架时，我会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:10:41.610

首先，您无法通过 Ajax 处理大数据。为了让用户能够实时观看进程，您可以使用 Web 套接字来执行此操作。正如您在 PHP 方面的经验一样，我可以向您推荐[Ratchet](http://socketo.me/)，它是相当新的。

另一方面，为了进行计算和存储大数据，我会使用 NoSQL 而不是 MySQL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:48:23.003

我认为您可以使用某种队列管理器在后台运行所需的内容。我使用与 CakePHP 类似的东西，它让我可以在后台异步运行时间密集型进程，因此不需要打开浏览器。

另一个优点是它是可扩展的，因为它很容易增加运行的队列工作者的数量。

基本上使用 PHP，您只需要一个每隔一段时间运行一次的 cron 作业，它会启动一个检查队列数据库的待处理任务的工作人员。如果没有找到，它会一直循环运行，直到出现一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:33:51.443

由于您已经有点时间紧迫，迁移到[Node.js](http://nodejs.org/)可能对时间不敏感。它还有助于解决通知用户何时准备好结果的问题，因为它可以在不进行轮询的情况下进行浏览器通知推送。由于它使用 Javascript，您可能会发现您的一些客户端代码是可重用的。

# javascript - 时间范围内的 HTML5 视频

> ID：14651302
> 
> 赞同：0
> 
> 时间：2013-02-01T16:58:15.380
> 
> 标签：javascript, html, html5-video, popcornjs

所以我正在开发一个交互式 HTML5 视频播放器，目前在使用 popcorn.js 时一切正常，但我现在正试图回去让我的播放器在不依赖 popcorn.js 的情况下工作。

使用 popcorn.js 时，您可以使用如下代码：

```
popcorn.code((
    start: 0,
    end: 5,
    onStart: function( options ) {
        //put code here
    }
}} 
```

当您的视频时间跨度从 0 到 5 时，您的代码将被执行。现在，我试图在视频的某个时间范围内执行某些代码块，但我似乎无法让它正常工作并且只是想知道是否有人可以看到我要解决这个问题的地方。

```
while (myVideo.currentTime >= 0 && myVideo.currentTime <= 5)
{
    console.log(myVideo.currentTime);
} 
```

这个 while 循环也运行得非常快，以至于导致浏览器变慢并死机。但是，如果我尝试使用 if 循环而不是 while 循环，它（显然）只检查一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:03:25.790

您可以检查的次数少于`while`循环次数。

```
var check = setInterval(function() {
    if (myVideo.currentTime >= 5) {
        clearInterval(check);
        console.log("5 seconds reached");
    }
}, 500); 
```

当用户暂停并重新开始，或者如果他跳到时间线内的另一个时间时，您可以再次开始此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:09:21.347

尝试使用以下方法，以便您的函数每秒只运行一次。

```
setInterval(function(){
if(myVideo.currentTime >= 0 && myVideo.currentTime <= 5){
console.log(myVideo.currentTime);
}
},1000); 
```

祝你好运！

# griffon - 试图在 griffon 中显示选定复选框的值

> ID：14651305
> 
> 赞同：0
> 
> 时间：2013-02-01T16:58:20.983
> 
> 标签：griffon

在我的 griffon 应用程序中，我可以选择复选框，但是当我点击提交时，我的 JOptionPane 窗口显示值的空白。关于我可能做错了什么的任何想法？

这是我的模型代码：

==================================================== =================================

```
package test1
import groovy.beans.Bindable
class Test1Model {
    @Bindable String deviceType

    List deviceTypes = [
        [title: 'No Devices', selected: true, devices: []],
        [title: 'Android Tablets', selected: false,
            devices: [
                [name: 'Asus Transformer Prime #1', selected: false],
                [name: 'Asus Transformer Prime #2', selected: false],
                [name: 'Motorola Xoom #1', selected: false],
                [name: 'Motorola Xoom #2', selected: false],
                [name: 'Sony S Tablet #1', selected: false],
                [name: 'Sony S Tablet #2', selected: false]
            ]
        ],
        [title: 'Android Phones', selected: false,
            devices: [
                [name: 'Nexus 7 #1', selected: false],
                [name: 'Nexus 7 #2', selected: false],
                [name: 'HTC Droid Eris', selected: false],
                [name: 'HTC EVO 4G LTE', selected: false],
                [name: 'Samsung Galaxy Nexus #1', selected: false],
                [name: 'Samsung Galaxy Nexus #2', selected: false],
                [name: 'Droid Razr Maxx #1', selected: false],
                [name: 'Droid Razr Maxx #2', selected: false],
                [name: 'Samsung Galaxy S2', selected: false]
            ]
        ],
        [title: 'iOS Devices', selected: false,
            devices: [
                [name: 'iPad Gen1', selected: false],
                [name: 'iPad Gen2', selected: false],
                [name: 'iPad Gen3', selected: false],
                [name: 'iPod Touch', selected: false]
            ]
        ]
    ]
} 
```

==================================================== ========================================

这是我的控制器代码：

* * *

```
package test1

import griffon.transform.Threading
import griffon.util.GriffonNameUtils as GNU

class Test1Controller {
    def model

    def clear = {
        model.griffonClass.propertyNames.each { name ->
            model[name] = ''
        }
    }

    @Threading(Threading.Policy.SKIP)
    def submit = {
        javax.swing.JOptionPane.showMessageDialog(
            null, "You have selected: " + model.deviceTypes.devices.grep.{it.selected}
        )
        println model.deviceTypes.devices.grep.{it.selected = true}

    }
} 
```

* * *

谢谢！！

铁螳螂7x！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:09:55.803

答案在于 GPath 表达式。这个做你需要的

```
model.deviceTypes.devices.flatten().grep{ it.selected } 
```

甚至

```
model.deviceTypes.devices.flatten().grep{ it.selected == true } 
```

# javascript - 在div中获取鼠标位置？

> ID：14651306
> 
> 赞同：22
> 
> 时间：2013-02-01T16:58:28.743
> 
> 标签：javascript, jquery, canvas

> **可能重复：**
> [相对于 div](https://stackoverflow.com/questions/3824332/mouse-position-relative-to-div)
> [的鼠标位置在画布内使用 javascript 获取鼠标位置](https://stackoverflow.com/questions/4848310/getting-mouse-position-with-javascript-within-canvas)

如何在固定大小但具有自动边距的画布中获取鼠标的位置？

我不能固定它的位置，也不能只使用页面上的常规鼠标位置。

此代码完美运行：

```
mouseX = e.pageX - div.offsetLeft;
mouseY = e.pageY - div.offsetTop; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-01T17:06:23.000

使用 jQuery：

```
var divPos = {};
var offset = $("#divid").offset();
$(document).mousemove(function(e){
    divPos = {
        left: e.pageX - offset.left,
        top: e.pageY - offset.top
    };
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:08:26.263

使用`event.layerX`and`event.layerY`获取鼠标相对于当前元素的位置：

```
$('#canvas').mousemove(function(e){
  var mousePos = {'x': e.layerX, 'y': e.layerY};
}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-01T17:07:01.987

取自 jQuery 网站：[Jquery 教程网站](http://docs.jquery.com/Tutorials%3aMouse_Position)

```
$(document).mousemove(function(e){
      $('#status').html(e.pageX +', '+ e.pageY);
   }); 
```

注意：固定语法

# python - 将一个计数器从 python 线程传递到 wxpython 量具？

> ID：14651314
> 
> 赞同：1
> 
> 时间：2013-02-01T16:59:00.107
> 
> 标签：python, wxpython, python-multithreading

我正在尝试将来自 python COM 线程的计数器传递回 wxpython 选项卡面板。任何人都有可行的解决方案。我的一些代码如下：

这个类与我的 wxPython 代码是分开的，但被调用并将数据发送到这个线程。

`class Log_COM_thread(Thread): ............ def run(self):
.............
int_log_cnt = int_log_cnt + 1
int_log.TabPanel.gauge.SetValue(int_log_cnt)
if int_log_cnt == 64:
int_log.TabPanel.Int_Log_Status.SetLabel('Extraction Complete')`

这个计数器值被发送到的单独模块 int_log 调用如下：

`class TabPanel(wx.Panel):
def __init__(self, parent):
self.gauge = wx.Gauge(self, range=72, size=(250, 25))
.....and then more wxpython code.`

我遇到的错误是：

`Exception in thread Thread-8:
Traceback (most recent call last):
File "F:\Python27\lib\threading.py", line 551, in __bootstrap_inner self.run()
File "F:\Documents and Settings\swhite\Desktop\OG GUI Working Jan 13\nbm.py", line 267, in run
int_log.TabPanel.gauge.SetValue(int_log_cnt)
AttributeError: type object 'TabPanel' has no attribute 'gauge'`

我如何将我的计数器从我的外部线程发送回 wxpython 中的那个仪表。任何有关如何做到这一点的帮助都将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:37:25.667

您不能直接从单独的线程调用 wx 方法。您需要使用其中一种 wxPython 线程安全方法与主 GUI 线程进行通信。它们是 wx.CallAfter、wx.CallLater 和 wx.PostEvent。

[wxPython wiki](http://wiki.wxpython.org/LongRunningTasks)上有很多关于线程和 wx 的信息。我还写了一篇关于这个主题的[教程](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)，可能会对你有所帮助。

# android - 如何识别在 onResume 中“打开”了哪个 Activity

> ID：14651315
> 
> 赞同：0
> 
> 时间：2013-02-01T16:59:01.820
> 
> 标签：android, onresume

在我的主要活动中，我想覆盖 onResume 方法，使其行为不同，具体取决于之前打开的活动。例如：如果用户为 listView 创建了一个新项目（在 addNewItem 活动中），我需要重新加载数据库以显示新项目。但如果他只是切换到一个活动，它不会改变主活动中显示的对象的任何内容，则不应重新加载数据库并且不应再次构建 GUI。因此，我需要知道之前“打开”了哪个活动。

我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:17:54.600

正确的做法是使用`startActivityForResult(intent, resultCode)`.

> 当一个活动退出时，它可以调用 setResult(int) 将数据返回给它的父级。

[链接到开发人员资源](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:05:25.880

当你调用 Activity 时，你可以在你的意图中发送一些东西。

```
Intent myIntent = new Intent(Activity1.this,Activity2.class);
Bundle myData = new Bundle();
myData.putString("previousActivity", "Activity1");
myIntent.putExtras(myData);
startActivity(myIntent); 
```

然后在新的活动中，您访问它并比较结果：

```
Intent myLocalIntent = getIntent();
Bundle myBundle = myLocalIntent.getExtras();
String str1 = myBundle.getString("previousActivity");
if string.equals("Activity1"){
   // do code changes for activity 1 here
} 
```

有一些更精细的方法可以做到这一点（即通过一个对应于特定活动的 int 变量），但这是最基本的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:07:02.073

一种肮脏的方法是扩展您的应用程序类并设置一个属性 lastActivity，您将在应用程序中每个活动的每个 onResume/OnPause 方法中设置该属性。这样，当您在简历上的主要活动被调用时，只需阅读这个 lastActivity 字段即可知道您来自哪里。但我认为这是肮脏的做法：D

# c# - 在 RavenDb 会话中查找更改

> ID：14651317
> 
> 赞同：2
> 
> 时间：2013-02-01T16:59:13.467
> 
> 标签：c#, ravendb

如何找出在 RavenDb 会话中已修改/更改的实体？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T17:10:40.860

您不能遍历更改列表。但是，您可以做一些简单的事情：

```
// check if an entity has been modified
session.Advanced.HasChanged(entity)

// check if there are any changes at all
session.Advanced.HasChanges 
```

如果您尝试对所有已更改的实体执行某些操作，则可以连接[DocumentStoreListener](http://ravendb.net/docs/client-api/advanced/client-side-listeners#document-store-listener)。

# ios - NSScanner 和 GCD 性能下降

> ID：14651322
> 
> 赞同：0
> 
> 时间：2013-02-01T16:59:30.083
> 
> 标签：ios, objective-c, grand-central-dispatch

我创建了一种方法来解析`.m3u8`文件、下载引用的文件并重新创建`.m3u8`要在本地提供的新文件以供离线播放。一切正常，但也许我滥用了其中一个`NSScaner`或 Grand Central Dispatch，因为在我看来，该方法应该快速运行并在 GCD 中排队下载。但是，该方法需要花费全部时间来运行（在后台，是的，但我希望尽快创建新文件，而不是在所有内容下载完成后）。谁能看到我的瓶颈在哪里？提前致谢。

```
- (void)beginDownloadAndCreateLocalM3U8FileForLocalPlaybackFromPlaylist:(NSString*)playlist forId:(NSString*)_id withProgressBlock:(void (^)(float))progress withCompletionBlock:(void (^)(id))success
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        @autoreleasepool {
            NSString *stringURL = playlist;
            NSURL  *url = [NSURL URLWithString:stringURL];
            NSError *error;
            NSString *stringData = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error];
            NSString *foundData;
            NSScanner *scanner=[NSScanner scannerWithString:stringData];
            NSUInteger counter = 0;
            NSMutableString *m3u8 = [NSMutableString new];
            [scanner scanUpToString:@"#EXTINF" intoString:&foundData];
            [m3u8 appendString:foundData];
            NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString  *documentsDirectory = [paths objectAtIndex:0];
            if (![self directoryExistsAtAbsolutePath:[NSString stringWithFormat:@"%@/Web", documentsDirectory]]) {
                [[NSFileManager defaultManager] createDirectoryAtPath: [NSString stringWithFormat:@"%@/Web", documentsDirectory] withIntermediateDirectories: YES attributes:nil error: &error];
            }
            if (![self directoryExistsAtAbsolutePath:[NSString stringWithFormat:@"%@/Web/%@", documentsDirectory, _id]]) {
                [[NSFileManager defaultManager] createDirectoryAtPath: [NSString stringWithFormat:@"%@/Web/%@", documentsDirectory, _id] withIntermediateDirectories: YES attributes:nil error: &error];
            } else {
                success([NSString stringWithFormat:@"http://127.0.0.1:12345/%@.m3u8", _id]);
                return;
            }
            while (![scanner isAtEnd]) {
                [scanner scanUpToString:@"\n" intoString: &foundData];
                if ([foundData hasPrefix:@"#EXTINF:"]) {
                    [m3u8 appendFormat:@"%@\n", foundData];
                } else if ([foundData hasPrefix:@"http:"]) {
                    NSData *urlData = [NSData dataWithContentsOfURL:[NSURL URLWithString:foundData]];
                    if ( urlData )
                    {
                        NSString  *filePath = [NSString stringWithFormat:@"%@/Web/%@/%i.ts", documentsDirectory, _id, counter];
                        NSString *localURL = [NSString stringWithFormat:@"http://127.0.0.1:12345/%@/%i.ts", _id, counter];
                        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
                            @autoreleasepool {
                                [urlData writeToFile:filePath atomically:YES];
                            }
                        });
                        //assemble the m3u8 file here for each entry with the original durations.  No need to recalculate.
                        //NSLog(@"Adding this: %@", filePath);
                        [m3u8 appendFormat:@"%@\n", localURL];
                        counter++;
                    }
                }
            }
            [m3u8 appendString:@"#EXT-X-ENDLIST"];
            [m3u8 writeToFile:[NSString stringWithFormat:@"%@/Web/%@.m3u8", documentsDirectory, _id] atomically:YES encoding:NSUTF8StringEncoding error:&error];
            NSLog(@"Final m3u8 is %@", m3u8);
            success([NSString stringWithFormat:@"http://127.0.0.1:12345/%@.m3u8", _id]);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:12:46.070

这条线在这里

```
NSData *urlData = [NSData dataWithContentsOfURL:[NSURL URLWithString:foundData]]; 
```

...在您的`while`循环与您的扫描仪同步运行时，您的扫描仪在下载的 URL 下载之前无法进入下一个令牌。尝试提升低优先级的 dispatch_async() 以涵盖`else`案例的所有逻辑，而不仅仅是`writeToFile:`调用。

# javascript - XSP.getElementById 与 document.getElementById

> ID：14651328
> 
> 赞同：0
> 
> 时间：2013-02-01T16:59:48.823
> 
> 标签：javascript, xpages

`XSP.getElementById`和 和有什么不一样`document.getElementById`？在我的测试中，两者似乎都返回相同的值（存储在字段中的值）。为 XPage 编码时应该首选哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T18:45:41.943

**已编辑**

`XSP.getElementById`与`dojo.byId`我认为在比`document.getElementById`.

这是来源`XSP.getElementById`：

```
 /**
    * Convenience function for retrieving an element given its id in a browser independent manner.
    */
    this.getElementById = function x_gbi(elementId){
        return dojo.byId(elementId);
    } 
```

我想为了更好的未来 XPage 支持，使用`XSP.getElementById`（因为他们可能会改变它）而不是`dojo.byId`. 我一直在使用`dojo.byId`，因为它更短。`document.getElementById`永远不应该在 XPages 中使用，因为我们有`dojo.byId`.

**更新**

从 Dojo 1.7 开始，语法要复杂得多：

```
require(["dojo/dom"], function(dom){
    // fetch a node by id="someNode"
    var node = dom.byId("someNode");
}); 
```

今天我的同事指出，*Dojo 2*将不再支持当前的简单调用方式`dojo.byId`。这意味着这`XSP.getElementById`绝对是要走的路，`require`每当我们将 Dojo 与 ND9 一起使用时，我们都应该开始使用新的基于语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:13:13.610

XSP 包含用于处理 Notes 客户端 (XPiNC) 和 Web 浏览器情况的代码。在 XPiNC 中不使用 XSP 调用可能会起作用或可能会产生副作用。

XSP.getElementById 的工作方式与 document.getElementById 相同，只是它确保它可以跨具有相同功能的浏览器工作。

您可以在 getElementById 的“XPages Portable Command Guide”第 184 页中阅读有关 XSP 工作原理的更多信息。

# grails - Grails：使用 remoteFuction 和渲染的问题

> ID：14651329
> 
> 赞同：0
> 
> 时间：2013-02-01T16:59:52.800
> 
> 标签：grails, render

我在使用远程功能更新第二个 g:select 时遇到问题，它基于第一个的选择。我已经尝试了多种方法，并且愿意改变我的风格，但是可以做到这一点。以下是我尝试 GSP 的部分内容：

```
 <div class="baitSelectionFields">
  <div class ="manufactureSelect">
    <g:select name="manuList" from="${manufactures}" optionValue="name" 
               onclick="${remoteFunction(action: 'loadStyles', update: 'styleSelection')}"/>
  </div>
  <div class="styleSelection" id="styleSelection">
  </div>
</div> 
```

控制器：

```
 styles = Style.findAll()
    for(int i = 0; i<styles.size(); i++){
    println("Worked")
        if(styles.get(i).getActive()==false){
            styles.remove(i)
            i--
        }
    }
    String send = ("<g:select name=\"styleList\" from=\"${styles}\" optionValue=\"name\"/>")
    redner send 
```

任何有帮助的建议或观点都会很棒。我一直在浏览grails doc，它似乎真的没有帮助。这也是我的错误消息没有方法签名：com.manifest.baitCreation.TypeController.redner()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:44:14.827

标签在`<g:select />`服务器端呈现。您不能将其作为字符串发送。你可以做的是`render g.select(name: "styleList", from: styles, optionValue: "name")`

# javascript - jQuery remove() 检索

> ID：14651346
> 
> 赞同：1
> 
> 时间：2013-02-01T17:01:12.880
> 
> 标签：javascript, jquery, html, ajax

基本上我使用 OnClick 调用来删除一个 DIV，一旦我单击 OnClick，它就会调用 remove() jQuery 函数来删除一个 div，

这是我当前使用 remove() 删除的 div 代码。

```
<div id="add">
<button type="submit" onclick="showdiv('adduser');">Add User</button>
</div> 
```

“showdiv”的 javascript 调用是

```
function showdiv(id){
    $("#add").remove();
    document.getElementById(id).style.display = "inherit";
} 
```

在 div id“adduser”中，我想显示另一个按钮来执行 onclick 以带回 div id“add”，这可能吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:02:14.670

您可以使用 show() 和 hide() 函数，而不是使用永久删除 div`remove()`

```
function showdiv(id){
    $("#add").hide();
    document.getElementById(id).style.display = "inherit";
} 
```

# javascript - 使用javascript检查图像是否存在

> ID：14651348
> 
> 赞同：23
> 
> 时间：2013-02-01T17:01:17.780
> 
> 标签：javascript

> **可能重复：**
> [使用jquery检查给定url的](https://stackoverflow.com/questions/3381663/check-if-image-exists-with-given-url-using-jquery)
> [图像是否存在 如果文件存在则更改图像源](https://stackoverflow.com/questions/5678899/change-image-source-if-file-exists)

我将图像路径的值从文本框扔到 boxvalue 中，并想使用 javascript 验证图像是否存在。

```
 var boxvalue = $('#UrlQueueBox').val(); 
```

我浏览了 stackoverflow 并找到了以下内容来获取图像宽度/高度，但不想使用它。

```
var img = document.getElementById('imageid'); 
```

我如何验证它是否真的是来自图像路径的图像？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-01T17:40:13.870

```
// The "callback" argument is called with either true or false
// depending on whether the image at "url" exists or not.
function imageExists(url, callback) {
  var img = new Image();
  img.onload = function() { callback(true); };
  img.onerror = function() { callback(false); };
  img.src = url;
}

// Sample usage
var imageUrl = 'http://www.google.com/images/srpr/nav_logo14.png';
imageExists(imageUrl, function(exists) {
  console.log('RESULT: url=' + imageUrl + ', exists=' + exists);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T17:06:06.650

您可以创建一个函数并检查`complete`属性。

```
function ImageExists(selector) {
    var imageFound = $(selector); 

    if (!imageFound.get(0).complete) {
        return false;
    }
    else if (imageFound.height() === 0) {
        return false;
    }

    return true;
} 
```

并调用这个函数

```
 var exists = ImageExists('#UrlQueueBox'); 
```

*与 url 而不是选择器作为参数的相同功能（您的情况）：*

```
function imageExists(url){

    var image = new Image();

    image.src = url;

    if (!image.complete) {
        return false;
    }
    else if (image.height === 0) {
        return false;
    }

    return true;
} 
```

# html - 使用 Popover 展开 jQuery UI 对话框

> ID：14651351
> 
> 赞同：1
> 
> 时间：2013-02-01T17:01:26.007
> 
> 标签：html, css, jquery-ui

我在一个 jQuery UI 对话框中有一个表格，里面有各种数据。单击“选择代码...”链接时，会出现一个[Twitter Bootstrap 弹出窗口](http://twitter.github.com/bootstrap/javascript.html#popovers)。问题是当弹出框出现时它太大而无法容纳在 jQuery UI 对话框的边界内（见图）。出现一个滚动条，我可以滚动查看其余部分，但我想知道如何动态扩展 Dialog 以显示整个弹出框。然后，当弹出框被删除时，通过重新单击链接，我希望对话框重新调整到原来的高度。

这`Work Orders`是一个 jQuery UI 对话框。它位于常规 HTML 页面之上。这`Select a code for this Work Order`是一个 Twitter Bootstrap 弹出框。因此，下图显示了 HTML 页面顶部 1 个对话框顶部的 1 个弹出框。

这是该问题的简单 jsFiddle 娱乐： [http://jsfiddle.net/AaronSalazar/aa7Jr/](http://jsfiddle.net/AaronSalazar/aa7Jr/)

![在此处输入图像描述](../Images/dd460a07608816f5749e256fde1fdd60.png)

```
$("#workOrdersModal").dialog({ 
    title: "Work Orders", 
    width: 1000, 
    closeOnEscape: false, 
    draggable: true, 
    resizable: true, 
    modal: true, 
    autoOpen: false 
}); 
```

# java - JSF - f:ajax 执行不更新 bean 的支持属性

> ID：14651353
> 
> 赞同：0
> 
> 时间：2013-02-01T17:01:35.783
> 
> 标签：java, ajax, jsf, execute

我有两个组件，一个 commandButton 和一个 selectOneListbox。

单击命令按钮后，我需要更新绑定到 selectOneListBox 的支持属性的值。

两个组件都在同一个`<h:form>`. 支持 Bean 是 Named/SessionScoped bean。

这是我页面中定义组件的部分：

按钮：

```
 <h:commandButton formnovalidate="formnovalidate" title="Select Variable" 
                     type="button" styleClass="button_green close_window" 
                     tabindex="2" id="btnSelectVar" value="Confirm">
         <f:ajax execute="lstVarSelected" event="click" 
                 listener="#{systemOptionsControl.updateText}" onevent="updateParent"/>
    </h:commandButton>

SelectOneListBox: (selectedVariable is a String and variables is a List of String)

    <h:selectOneListbox id="lstVarSelected" name="lstVarSelected" 
                        tabindex="1" value="#{systemOptionsControl.selectedVariable}" >
        <f:selectItems value="#{systemOptionsControl.variables}"/>
    </h:selectOneListbox> 
```

单击按钮后，我需要获取 oneListBox 的支持属性，但 JSF 没有在支持 bean 上调用 set 方法。然后，当我尝试获取 updateText 方法的值时，我得到了 NullPointerException。

我尝试了很多解决方案，但都没有奏效，任何人都可以给出任何想法吗？

这是xhtml：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:escriba="http://java.sun.com/jsf/composite/components/escriba"
      xmlns:f="http://java.sun.com/jsf/core" lang="pt-br" class="no-js">
    <body>
        <h:head>
            <h:outputScript name="jsf.js" library="javax.faces"/>
            <script language="javascript">
                function callParentButton(data) {
                    //Verifica o status da execução do ajax. 
                    var status = data.status;
                    //alert(status);
                    switch(status)
                    {
                        case 'begin':
                            break; 
                        case 'complete':
                            //Gets the name of parent button
                            var a = #{systemOptionsControl.idBtnAtualizarTextAreas}; 
                            //Calls the click.
                            var btn = document.getElementById(a.valueOf().name);
                            btn.click();
                            break;
                        } 
                    }
            </script>
        </h:head>
        <h:form prependId="false" id="frmVariables">
            <section class="box_padrao">
                <header id="box_padrao_header">
                    <h1>System Options</h1>            
                    <div id="actions_menu">
                        <h:commandButton type="button" title="Select Variable" styleClass="button_green" tabindex="2" 
                                         id="btnConfirmar" value="Confirm">
                            <f:ajax execute="lstVariables" event="click" listener="systemOptionsControl.updateText" onevent="callParentButton"/>
                        </h:commandButton>
                        <button type="button" title="Cancel" class="button_red close_window" tabindex="3" id="btnCancelar" name="btnCancel">Cancel</button>
                    </div> 
                </header>
                <div class="box_padrao_content">
                    <div class="grid_100">
                        <h2 class="legend">» Variables List </h2>   
                        <fieldset class="fieldset">
                            <div class="grid_100">
                                <h:selectOneListbox id="lstVariables" name="lstVariables" tabindex="1" value="#{systemOptionsControl.selectedVariable}" >
                                    <f:selectItems value="#{systemOptionsControl.variables}"/>
                                </h:selectOneListbox>
                            </div>
                        </fieldset>
                    </div>      
                </div>
            </section>
        </h:form> 
    </body>
</html> 
```

这是 Bean：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package br.com.xxx.rodrigoms.control;

import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

/**
 *
 * @author rodrigos
 */
@Named
@SessionScoped
public class SystemOptionsControl{    

    private String selectedVariable;

    @PostConstruct
    public void initialize() {
        //non-matter code
    }

    //<editor-fold desc="GETS/SETS">
    public String getIdBtnAtualizarTextAreas(){
        return "btnUpdateTextAreas";
    }

    public String getSelectedVariable() {
        return selectedVariable;
    }

    public void setSelectedVariable(String selectedVariable) {
        this.selectedVariable = selectedVariable;
    }

    public List<String> getVariables() {
        List<String> ret = new ArrayList<>();
        //just simulating
        ret.add("1");
        ret.add("2");
        ret.add("3");
        ret.add("4");
        return ret;
    }

    //</editor-fold>

    //<editor-fold desc="Other methods">
    public void updateText(){
        //I get the NullPointerException right on next line
        String variavelAInserir = "<".concat(this.selectedVariable).concat(">");,

        /*
        code do other suffs
        */
    }
    //</editor-fold>

    } 
```

抱歉有任何语言错误，需要更改一些名称，因为它是公司的“工作”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:59:14.680

您没有提供足够的关于您的支持 bean 或 xhtml 页面的信息。甚至你提供的部分也包含太多无效的语法，所以我决定做一个例子。

这是给你的。

**SystemOptionsControl.java**

```
import java.util.Arrays;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.model.SelectItem;

@ManagedBean
@ViewScoped
public class SystemOptionsControl {

    private Integer selectedVariable;
    private List<SelectItem> variables = Arrays.asList(new SelectItem(1),
                                                       new SelectItem(2),
                                                       new SelectItem(3));

    public void updateText(){
        System.out.print("updateText method invoked");
        System.out.print("Selected Value " + selectedVariable);        
    }

    public Integer getSelectedVariable() {
        return selectedVariable;
    }

    public void setSelectedVariable(Integer selectedVariable) {
        this.selectedVariable = selectedVariable;
    }

    public List<SelectItem> getVariables() {
        return variables;
    }

    public void setVariables(List<SelectItem> variables) {
        this.variables = variables;
    }
} 
```

**页面.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <title>Title</title>
    </h:head>

    <h:body>

        <h:form prependId="false">

            <h:commandButton type="button" id="btnSelectVar" value="Confirm">
                <f:ajax execute="lstVarSelected" event="click" listener="#{systemOptionsControl.updateText}" />
            </h:commandButton>

            <h:selectOneListbox id="lstVarSelected" value="#{systemOptionsControl.selectedVariable}" >
                <f:selectItems value="#{systemOptionsControl.variables}"/>
            </h:selectOneListbox>

        </h:form>

    </h:body>

</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T19:14:43.967

好吧，我使用绑定属性解决了。

在我的 bean 中绑定了一个 inputTextArea 之后。我能够在我的侦听器方法中获得 selectedValue 。

执行的原因不是“真正”在执行我还没有发现的侦听器之前执行 set 方法。

无论如何，谢谢你们两个人的大力帮助 :) 这是我第一次在 stackoverflow 中提问，你们两个非常有说服力:)

谢谢！

# playframework-2.0 - play2-scalate 发布本地错误

> ID：14651355
> 
> 赞同：2
> 
> 时间：2013-02-01T17:01:40.073
> 
> 标签：playframework-2.0, scalate

我正在尝试使用 play2-scalate 插件 ( [https://github.com/adetante/play2-scalate](https://github.com/adetante/play2-scalate) ) 在我的 Play 框架应用程序中利用 Jade 模板，但在尝试运行“play publish-local”时遇到错误.

在我提出问题之前，我想我会在这里检查一下是否有一个简单的解决方法（我是 Play/Scala/Scalate 的新手）。提前感谢您提供的任何帮助。

版本：播放 2.1-RC1、sbt 0.12.0、scala-2.10.0

说明是`play > publish-local`在项目核心目录中运行，这是我得到的错误：

```
[info] Generating Scala API documentation for main sources to /tools/play2-scalate/project-code/target/scala-2.10/api...
[error] /tools/play2-scalate/project-code/app/controllers/Template.scala:21: not enough arguments for constructor TemplateEngine: (sourceDirectories: Traversable[java.io.File], mode: String)org.fusesource.scalate.TemplateEngine
[error] /tools/play2-scalate/project-code/app/controllers/Template.scala:21: not enough arguments for constructor TemplateEngine: (sourceDirectories: Traversable[java.io.File], mode: String)org.fusesource.scalate.TemplateEngine
[error]   val engine:TemplateEngine=new TemplateEngine()
[error]   val engine:TemplateEngine=new TemplateEngine()
[error]                             ^
[error]                             ^
[info] No documentation generated with unsucessful compiler run
[error] one error found
[error] one error found
[error] (compile:doc) Scaladoc generation failed 
```

看起来它在文档生成步骤上失败了；我不知道如何解决这个问题。任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:56:02.680

似乎与使用 scala 2.9 和 2.10 构建的库在默认参数方面存在二进制不兼容；请参阅： [Scala 2.10.0 RC2 和可选参数](https://stackoverflow.com/questions/13336819/scala-2-10-0-rc2-and-optional-parameters)

解决方案是修改`project-code/project/Build.scala`以将 scalate 依赖项设置为`"scalate-core_2.10" % "1.6.1"`：

```
object ApplicationBuild extends Build {

  val appName         = "play2-scalate"
  val appVersion      = "0.1-SNAPSHOT"

  val appDependencies = Seq(
    "org.fusesource.scalate" % "scalate-core_2.10" % "1.6.1"
  )

  val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  )

} 
```

`/project`需要对文件进行其他更改：

```
/project-code/project/build.properties
    -sbt.version=0.11.2
    +sbt.version=0.12.2

/project-code/project/plugins.sbt
    // Use the Play sbt plugin for Play projects
    -addSbtPlugin("play" % "sbt-plugin" % "2.0.1")
    +addSbtPlugin("play" % "sbt-plugin" % "2.1.0") 
```

希望这可以帮助。

# android - 如何在不查看日历的情况下调用事件日历？

> ID：14651359
> 
> 赞同：0
> 
> 时间：2013-02-01T17:01:58.670
> 
> 标签：android, events, android-intent, android-calendar

我正在创建一个带有时间表的时间表。我的问题是，当我需要创建一个新事件时，我通过此代码调用该活动。

```
 public void callEventDialog(int line, int column){
    Intent intent = new Intent(Intent.ACTION_EDIT);
    Calendar c = Calendar.getInstance();
    c.setTimeInMillis(startWeek.getTimeInMillis() + column * DIM + line * 30 * 60 * 1000);
    intent.setType("vnd.android.cursor.item/event");
    intent.putExtra(Events.TITLE, "title");
    intent.putExtra(Events.DTSTART, c.getTimeInMillis());
    intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, c.getTimeInMillis());
    intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, c.getTimeInMillis() + 1800 * 1000);
    intent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
    startActivityForResult(intent, 100);
} 
```

但是当我单击确定按钮时，我不想查看日历活动。我只需要注册事件而不是日历就可以了。我怎么能这样做？？？感谢您的时间和帮助

![在此处输入图像描述](../Images/e920d862bafbafc5818bea29754c37ae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:14:58.020

如果您想直接将事件添加到日历中，则需要使用内容解析器并请求日历权限 - 不使用日历活动。

清单中的权限：

```
<uses-permission android:name="android.permission.READ_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_CALENDAR" /> 
```

将事件放入数据库示例：

```
public static int insertEventToDb(Context context, Event event, int calendarId) {
    ContentValues values = new ContentValues();

    values.put(Events.CALENDAR_ID, calendarId);
    values.put(Events.TITLE, event.getName());
    values.put(Events.EVENT_LOCATION, event.getLocation());
    values.put(Events.DTSTART, event.getStartDate().getTime());
    values.put(Events.DTEND, event.getEndDate().getTime());
    values.put(Events.DESCRIPTION, event.getDescription());
    values.put(Events.EVENT_TIMEZONE, TimeZone.getTimeZone("GMT+1").getID());

    Uri result = context.getContentResolver().insert(Events.CONTENT_URI, values);
    int eventId = Integer.valueOf(result.getPathSegments().get(1));
    return eventId;
} 
```

您还需要要插入数据的日历的 ID。您可以通过使用 SQLite 查询来找到它或通过创建自己的日历来获得它（这应该只能通过 来完成`SyncAdapter`）。这是另一个示例，您可能需要根据需要对其进行修改（这`Constants.ACCOUNT_TYPE`是我的习惯）：

```
Uri uri = Calendars.CONTENT_URI.buildUpon()
                .appendQueryParameter(android.provider.CalendarContract.CALLER_IS_SYNCADAPTER, "true")
                .appendQueryParameter(Calendars.ACCOUNT_NAME, "LOCAL")
                .appendQueryParameter(Calendars.ACCOUNT_TYPE, Constants.ACCOUNT_TYPE).build();
Cursor cursor = context.getContentResolver().query(uri, new String[] {Calendars._ID}, null, null, null); 
```

[您可以在Android 开发者网站 - Calendar Provider](http://developer.android.com/guide/topics/providers/calendar-provider.html)上找到更多信息。

# php - 使用 LIKE 和撇号的 Mysql 查询问题

> ID：14651360
> 
> 赞同：6
> 
> 时间：2013-02-01T17:02:04.500
> 
> 标签：php, mysql, database

所以我有一个有趣的问题，我从来没有遇到过，而且似乎找不到很多关于纠正这个问题的信息。我有一个庞大的数据库，其中包含大量数据（价值 10 年），并试图通过它进行搜索。

现在搜索的东西工作正常，但如果你愿意的话，最近有人提请我注意一个“错误”。我试图对其进行故障排除以获得预期的结果，但无济于事。

这是我的问题：

当有人在搜索中使用撇号时，并不是搜索失败，而是没有返回任何结果。因此，例如在搜索`Pete's`查询时执行但不返回任何内容。是的，我确保查询具有 mysql_real_escape_string() 以便`Pete's`变为`Pete\'s`.

即使我尝试使用 phpmysql 的搜索功能查询它，我也会得到奇怪的结果。该查询旨在如下所示：

```
SELECT * FROM  `smd_article` WHERE  `copy` LIKE  '%Pete\'s%' 
```

但是当我在 phpmyadmin 中使用搜索功能时，它给了我：

```
SELECT * FROM  `smd_article` WHERE  `copy` LIKE  '%Pete''s%' 
```

当我实际在 sql 选项卡中输入查询时，它仍然没有返回任何结果。但是当我只使用 Pete 时会返回一些 17K 记录，而当我只使用 Petes 时会返回一些 3k 记录。

所以我很好奇我做错了什么，或者错过了什么，以便它可以允许在使用 LIKE 语句的查询中使用撇号。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:07:41.263

试一试`mysql_real_escape_string`

```
LIKE '%" . mysql_real_escape_string($find) . "%' 
```

或者

```
 LIKE  '%Pete%27s%' 
```

或者如果你使用 pdo 你可以这样做

```
$search ='Pete\'s'
$stmt = $db->prepare("SELECT * FROM  `smd_article` WHERE  `copy` LIKE ?");
$stmt->bindValue(1, "%$search%", PDO::PARAM_STR);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:09:03.410

问题不是因为`'`单引号。你正确地逃脱了它。（作为 phpmyadmin 中的搜索功能）：

> 字符串：Pete's
> 
> MySQL：“皮特”的

因此，以下查询将起作用。（我已经测试过了）

```
SELECT *
FROM `smd_article`
WHERE copy
LIKE '%Pete''s%' 
```

你也可以看看`IN`声明：

```
SELECT *
FROM `smd_article`
WHERE copy
IN (
 'Pete', 'Pete''s'
) 
```

# android - 在网格视图中延迟加载图像，解码来自 SD 卡的图像路径

> ID：14651361
> 
> 赞同：0
> 
> 时间：2013-02-01T17:02:06.517
> 
> 标签：android, performance, android-imageview

嗨，我有一组 SD 卡上图像的路径，所有图像都很大，如 1024*768 像素。

我需要在网格视图中显示所有这些图像，并使用相对按比例缩小的图像。我需要首先显示网格视图，然后加载生成的按比例缩小的图像。我怎样才能做到这一点。

现在是：

获取所有图像路径，

```
File imgFile = new File(pathToImageOnSD);
            if (imgFile.exists()) {

                BitmapFactory.Options op = new BitmapFactory.Options();
                op.inSampleSize = 4;

                Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

                item.bitmap = myBitmap;
                imageview.setImageBitmap(myBitmap);

            } 
```

我对每个图像路径都这样做，我以内存错误结束。有一些库可以从 url 加载图像，但我需要一个类似的库来在 SD 卡上加载本地图像。

编辑：

```
public Bitmap loadBitmapFromPath(File f) {
            // decodes image and scales it to reduce memory consumption

            try {
                // decode image size
                BitmapFactory.Options o = new BitmapFactory.Options();
                o.inJustDecodeBounds = true;
                FileInputStream stream1 = new FileInputStream(f);
                BitmapFactory.decodeStream(stream1, null, o);
                stream1.close();

                // Find the correct scale value. It should be the power of 2.
                final int REQUIRED_SIZE = 70;
                int width_tmp = o.outWidth, height_tmp = o.outHeight;
                int scale = 1;
                while (true) {
                    if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                        break;
                    width_tmp /= 2;
                    height_tmp /= 2;
                    scale *= 2;
                }

                if (scale >= 2) {
                    scale /= 2;
                }

                // decode with inSampleSize
                BitmapFactory.Options o2 = new BitmapFactory.Options();
                o2.inSampleSize = scale;
                FileInputStream stream2 = new FileInputStream(f);
                Bitmap bitmap = BitmapFactory.decodeStream(stream2, null, o2);
                stream2.close();
                return bitmap;
            } catch (FileNotFoundException e) {
            } catch (IOException e) {
                e.printStackTrace();
            }
            return null;
        } 
```

我使用上述方法缩小位图，效果很好。但我的问题是当我滚动网格时，视图被重绘并且流程不流畅，如何缓存这些位图以及如何延迟加载它们，这样我就不需要等待视图完全填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:43:41.830

为了节省内存，请始终将位图解码为您计划显示它们的相同大小。对于这个问题，官方文档是你最好的朋友。下载 BitmapFun 项目，了解如何正确执行此操作。[https://developer.android.com/training/displaying-bitmaps/index.html](https://developer.android.com/training/displaying-bitmaps/index.html)

# jquery-mobile - 捕获滚动 坐标 Jquery Mobile

> ID：14651365
> 
> 赞同：0
> 
> 时间：2013-02-01T17:02:17.110
> 
> 标签：jquery-mobile

当用户滚动到初始数据集的底部时，我想将 50 条数据记录附加到列表视图。我看到jquery mobile中有一个滚动事件..

```
$('div[data-role="page"]').live('pageinit', function (event, ui) {
    var eventsElement = $('#events');
    $(window).bind('scrollstart', function () {
        console.log('start');
        $('.ui-body-c').css('background', 'green');
        eventsElement.append('<li><a href="">Start</a></li>');
        eventsElement.listview('refresh');
    }); 
```

有没有办法使用此事件或其他事件来触发知道用户何时滚动到初始数据的末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:10:30.057

我可以帮助你用我的老例子。但是您需要修复它，以便它可以与 jQM 1.2 一起使用。

这是一个示例：http: [//jsfiddle.net/Gajotres/v4NxB/](http://jsfiddle.net/Gajotres/v4NxB/)。它远非完美的演示，但它可以为您提供足够的信息以正确使用它。

它使用这个 jQuery 插件来检测底部滚动触摸：http: [//imakewebthings.com/jquery-waypoints/#get-started](http://imakewebthings.com/jquery-waypoints/#get-started)

我用 jQM 1.0 构建了它

这将检测底端：

```
$('#example-offset-pixels').waypoint(function() {
    //notify('100 pixels from the top');
}, { offset: 100 }); 
```

**编辑 ：**

此版本适用于所有 jQM 版本，包括 1.3：http: [//jsfiddle.net/Gajotres/Bn2Du/](http://jsfiddle.net/Gajotres/Bn2Du/)。它使用纯 jQuery，不需要额外的框架。

# java - Java SE 应用程序如何连接到 JBoss MQ？

> ID：14651366
> 
> 赞同：1
> 
> 时间：2013-02-01T17:02:23.137
> 
> 标签：java, jboss, jms, jbossmq

我查看了 JBoss 文档，搜索过，但找不到从 JAVA SE 应用程序连接到 JBoss MQ 的示例代码。

你有一些链接可以分享或更好的一些示例代码吗？

**JBoss 5.1.0**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:04:14.467

我能找到的最简单的例子是

[http://docs.jboss.org/jbossas/jboss4guide/r4/html/ch6.chapt.html](http://docs.jboss.org/jbossas/jboss4guide/r4/html/ch6.chapt.html)

这对我来说看起来并不简单。;)

我一直发现 ActiveMQ 更简单[http://activemq.apache.org/hello-world.html](http://activemq.apache.org/hello-world.html) 也许 JBoss MQ 应该有更简单的例子。

# excel - 粘贴图片excel

> ID：14651367
> 
> 赞同：1
> 
> 时间：2013-02-01T17:02:32.360
> 
> 标签：excel, vba

我可以成功浏览并在所选单元格中插入图像，并根据需要调整其大小。问题是当我将 excel 文件通过电子邮件发送给 asscoiates 时，图像不显示，因为图像文件的路径不在他们的电脑上。这是我正在使用的代码，使用键盘快捷键 Ctrl-i 调用它：

```
Public Sub InsertAndResize()
CellWidth = Selection.Width
CellHeight = Selection.Height
CellLeft = Selection.Left
CellTop = Selection.Top
ActiveSheet.Pictures.Insert( _
Application.GetOpenFilename( _
"JPG picture files (*.jpg),*.jpg", , "Select the picture")).Select
Selection.ShapeRange.Width = CellWidth
If Selection.ShapeRange.Height > CellHeight Then Selection.ShapeRange.Height = CellHeight
With Selection
    .Height = Selection.ShapeRange.Height - 4
    .Width = Selection.ShapeRange.Width - 4
    .Left = CellLeft + ((CellWidth - .Width) / 2)
    .Top = CellTop + ((CellHeight - .Height) / 2)
End With
End Sub 
```

如何将图像插入/粘贴到单元格中并消除或断开指向源文件的链接，以便其他人在打开文件副本时可以看到它？

在此先感谢您的任何建议。史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:17:37.837

您可以`image links`通过将图像链接到`cell name`

*   [更多信息可以在这里找到：](https://superuser.com/questions/117623/inserting-a-jpg-picture-into-a-cell-in-microsoft-excel-2007)

# javascript - THREE.js 忽略 THREE.Line 中 BufferGeometry + LineBasicMaterial 的线宽？

> ID：14651368
> 
> 赞同：2
> 
> 时间：2013-02-01T17:02:34.077
> 
> 标签：javascript, three.js, webgl

我为我的问题创建了一个最小的测试用例：http: [//pastebin.com/TPXFgxLj](http://pastebin.com/TPXFgxLj)

预期的行为是一组红色的线，线宽为 19。实际行为是一组红色的线，线宽（显然）为 1。

我究竟做错了什么？我已经测试了材质的不透明度选项，并遵循它（将其更改为 1 确实会产生一组更不透明的线条）。颜色似乎也被正确地遵循了，那么为什么不是线宽呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:20:42.840

这确实是一个错误，它刚刚在 r56 开发分支中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:18:22.577

你在运行 Windows 吗？如果是这样，则可能是 ANGLE 问题，在这种情况下无法更改线宽。请参阅此相关[问题](https://stackoverflow.com/questions/11638883/thickness-of-lines-using-three-linebasicmaterial)。

编辑：在 的情况下`THREE.BufferGeometry`，无法设置`material.linewidth`是`THREE.LineBasicMaterial`一个错误。它已在当前的 r56dev 分支中修复。

三.js r.55

# javafx-2 - 如何在 JavaFX 2 中禁用表格单元格进行编辑

> ID：14651369
> 
> 赞同：1
> 
> 时间：2013-02-01T17:02:37.420
> 
> 标签：javafx-2, javafx

在 JavaFX 2 中，我想禁用列中的一些单元格以进行编辑。类似的东西

```
TableModel.isCellEditable(row, col) 
```

在摇摆。我需要行中的项目来决定单元格是否可编辑，单元格值不够。

我设法编写的代码是：

```
TableView<FilterItem> localTableView = new TableView<FilterItem>() {
    public void edit(int paramInt, TableColumn<FilterItem, ?> paramTableColumn) {
        if (paramInt >= 0) {
            FilterItem item = getItems().get(paramInt); //get item in the row
                if (!item.isPropagated()) {             //condition
                    return;
                }
        }
        super.edit(paramInt, paramTableColumn);
    }

}; 
```

问题是没有视觉线索表明某些项目被禁用以进行编辑。

设置单元工厂是我尝试的第一件事，但我无法在更新单元方法中访问行数据：

```
localValueCol.setCellFactory(
    new Callback<TableColumn<FilterItem, String>, TableCell<FilterItem, String>>() {

        @Override
        public TableCell<FilterItem, String> call(TableColumn<FilterItem, String> paramTableColumn) {
            return new TextFieldTableCell<FilterItem, String>() {
                @Override
                public void updateItem(String s, boolean b) {
                    super.updateItem(s, b);
                    // it is possible set editable property here, 
                    // but other cells are not available to make a decision
                }

            };
        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:41:35.440

看起来

```
TableRow row = getTableRow();
FilterItem item = (FilterItem) row.getItem(); 
```

可用在单元格中完成这项工作。完整的方法如下：

```
@Override
public void updateItem(T t, boolean empty) {
    super.updateItem(t, empty);
    TableRow row = getTableRow();
    if (row != null) {
        FilterItem item = (FilterItem) row.getItem();
        //Test for disable condition
        if (item != null && item.getRating() < 10) {
            setDisable(true);
            setEditable(false);
            this.setStyle("-fx-text-fill: grey");
        }
    }
} 
```

# .net - 带有 vb.net 的 AUTOCAD 插件调色板 - 自动启动 - 易于安装 - 易于使用

> ID：14651372
> 
> 赞同：1
> 
> 时间：2013-02-01T17:02:49.653
> 
> 标签：.net, vb.net, vb.net-2010, autocad, autocad-plugin

我对 Autocad 和 vb.net 之间的集成很感兴趣。任务是让autocad使用vb.net代码自动绘制。最终项目将允许我自动创建电缆绘图，从 tmeplates 和带有信息的 csv 文件（当然还有我的插件）开始。

“用户友好”是我的关键词。我不喜欢用户必须在 autocad 上键入命令来安装插件然后使用它的实现。出于这个原因，我有两个问题：

**1）**找到一种方法让我的用户轻松安装插件

**2）**开发一个易于使用的图形界面插件。

我找到了解决方案，我想与您分享。

编辑：@David wolfe 回答了在 autocad 2012 及更早版本中自动启动插件的解决方案，但我的工厂只有 autocad 2011 及更高版本的许可证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:37:19.327

对于 2012 年及更高版本，请使用 2012 年引入的 AutoCAD 自动加载器格式。您的安装程序只需将其解压缩到一个文件夹，其余的由 Autocad 处理。

[http://adndevblog.typepad.com/autocad/2013/01/autodesk-autoloader-white-paper.html](http://adndevblog.typepad.com/autocad/2013/01/autodesk-autoloader-white-paper.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:02:49.653

编辑：@david wolfe 为这个问题写了一个答案，以在 Autocad 2012 及更高版本中自动安装插件，但我什至处理 autocad 2011 和 autocad 2000，然后我找到了以下解决方案。

**问题1 解决方法：** vb.net开发的autocad插件是一个dll文件。要在 AutoCAD 启动时自动加载它，AutoCAD 需要修改系统注册表。为此，我更喜欢不使用AutoCAD的方法。我在 vb.net 中创建了一个新的“Windows 窗体应用程序”项目（称为 INSTALLER），在默认表单中我添加了 2 个按钮：一个用于注册插件，一个用于删除插件。注意：在这个示例中，我决定 dll 插件文件必须放在我们要创建的 exe 应用程序（安装程序）的同一文件夹中。这是我们的插件安装程序/删除程序的代码。首先创建一个模块并粘贴此代码：（代码中的一些评论和消息是意大利语的，您可以使用谷歌翻译轻松地将它们翻译成您的语言）

```
Imports Microsoft.Win32

Module GeneralFunctions

    Public Sub RegisterModule()

        Dim regKey As RegistryKey
        Dim PathToDll As String
        If MsgBox("Suggerimento: copia questo eseguibile,la dll e gli altri file, in una cartella a piacere prima di avviare la registrazione." & vbCrLf & "Se sposterai successivamente i file, sarà necessario registrare nuovamente il modulo" & vbCrLf & "Proseguire?", MsgBoxStyle.YesNo) <> MsgBoxResult.Yes Then
            Exit Sub
        End If

        PathToDll = System.Windows.Forms.Application.StartupPath & "\SupportoCavi.dll"

        If Not (FileIO.FileSystem.FileExists(PathToDll)) Then
            MsgBox("Il file SupportoCavi.dll non è stato trovato nella cartella")
            Exit Sub
        End If

        On Error GoTo PercorsoNonTrovato

        regKey = My.Computer.Registry.CurrentUser.OpenSubKey("Software\Autodesk\AutoCAD", True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\
        Dim keysList() As String = regKey.GetSubKeyNames

        regKey = regKey.OpenSubKey(keysList(0), True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\
        keysList = regKey.GetSubKeyNames()
        regKey = regKey.OpenSubKey(keysList(0), True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\ACAD-9001:410\
        regKey = regKey.OpenSubKey("Applications", True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\ACAD-9001:410\Applications

        On Error GoTo CreazioneChiaveFallita
        regKey = regKey.CreateSubKey("cavi") 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\ACAD-9001:410\Applications\cavi
        regKey.SetValue("DESCRIPTION", "Modulo per la creazione di cavi e cablaggi")
        regKey.SetValue("LOADCTRLS", 2)
        regKey.SetValue("MANAGED", 1)
        regKey.SetValue("LOADER", PathToDll)
        MsgBox("Modulo registrato con successo. Apri autocad per usare il nuovo set di strumenti")
        Exit Sub

PercorsoNonTrovato:
        On Error Resume Next
        Dim more As String = ""
        If Not (IsNothing(regKey)) Then
            more = "Errore su chiave " & regKey.Name
        End If
        MsgBox("Percorso non trovato nel registro di sistema," & vbCrLf & "comunica la tua versione di autocad e questo messaggio di errore a me@me.com  " & vbCrLf & more)
        Exit Sub

CreazioneChiaveFallita:
        On Error Resume Next

        If Not (IsNothing(regKey)) Then
            more = "Errore su chiave " & regKey.Name
        End If
        MsgBox("Errore durante la registrazione del modulo," & vbCrLf & "comunica la tua versione di autocad e questo messaggio di errore a me@me.com  " & vbCrLf & more)
        Exit Sub

    End Sub

    Public Sub UnregisterModule()

        Dim regKey As RegistryKey

        On Error GoTo PercorsoNonTrovato

        regKey = My.Computer.Registry.CurrentUser.OpenSubKey("Software\Autodesk\AutoCAD", True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\
        Dim keysList() As String = regKey.GetSubKeyNames

        regKey = regKey.OpenSubKey(keysList(0), True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\
        keysList = regKey.GetSubKeyNames()
        regKey = regKey.OpenSubKey(keysList(0), True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\ACAD-9001:410\
        regKey = regKey.OpenSubKey("Applications", True) 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\ACAD-9001:410\Applications

        On Error GoTo EliminazioneChiaveFallita
        regKey.DeleteSubKeyTree("cavi") 'HKEY_CURRENT_USER\Software\Autodesk\AutoCAD\R18.1\ACAD-9001:410\Applications\cavi
        MsgBox("Modulo rimosso con successo dal registro di sistema.")
        Exit Sub

PercorsoNonTrovato:
        On Error Resume Next
        Dim more As String = ""
        If Not (IsNothing(regKey)) Then
            more = "Errore su chiave " & regKey.Name
        End If
        MsgBox("Percorso non trovato nel registro di sistema," & vbCrLf & "comunica la tua versione di autocad e questo messaggio di errore a emanuele.vacca@selex-si.com  " & vbCrLf & more)
        Exit Sub

EliminazioneChiaveFallita:
        On Error Resume Next

        If Not (IsNothing(regKey)) Then
            more = "Errore su chiave " & regKey.Name
        End If
        MsgBox("Errore durante la rimozione del modulo," & vbCrLf & "comunica la tua versione di autocad e questo messaggio di errore a emanuele.vacca@selex-si.com  " & vbCrLf & more)
        Exit Sub

    End Sub
End Module 
```

现在您只需调用 RegisterModule() 和 UnregisterModule() 子例程即可注册或注销我们的插件。这是我的安装程序 GUI：

![安装程序](../Images/1c3b1cddce1912c3c99d390dfb2e1f1e.png)

**问题 2 解决方案：** 要创建一个易于使用的插件，我认为最好是使用图形用户界面。出于这个原因，我创建了一个带有按钮、下拉菜单和图片的调色板。每次打开 AutoCAD 时，我们的插件都会自动加载，并创建我们的调色板。以下代码是一个简单的实现，您可以使用您的按钮和代码来个性化调色板。首先创建一个新项目（创建一个Windows控件库）并添加对以下组件的引用：

（根据您的 AutoCAD 版本，此路径可能会更改）

C:\Program Files\Autodesk\AutoCAD 2011\acdbmgd.dll

C:\Program Files\Autodesk\AutoCAD 2011\acmgd.dll

然后创建一个类并粘贴此代码（注意：有一些我的实现代码，如结构，但您可以根据需要轻松清除它。loadDatabase，例如是我的自定义例程，您可能不需要）：

```
Imports Autodesk.AutoCAD.Runtime
Imports Autodesk.AutoCAD.ApplicationServices
Imports Autodesk.AutoCAD.EditorInput
Imports Autodesk.AutoCAD.DatabaseServices
Imports Autodesk.AutoCAD.Geometry
Imports System.IO

Imports System.Reflection

<Assembly: ExtensionApplication(GetType(adskClass))> 

Public Class adskClass

    Implements IExtensionApplication

    Public currentPath As String

    Public templates() As template

    Public Structure template
        Dim title As String
        Dim description As String
        Dim previewPath As String
        Dim templatePath As String
    End Structure

    Public Sub Initialize() Implements Autodesk.AutoCAD.Runtime.IExtensionApplication.Initialize
        'get current path
        Dim myAssy As [Assembly]
        myAssy = [Assembly].GetExecutingAssembly
        currentPath = myAssy.Location
        currentPath = System.IO.Path.GetDirectoryName(currentPath)

        loadPalette()
        loadDatabase()
    End Sub

    Public Sub Terminate() Implements Autodesk.AutoCAD.Runtime.IExtensionApplication.Terminate
        myPaletteSet.Remove(0)
    End Sub

    ' declare a paletteset object, this will only be created once
    Public myPaletteSet As Autodesk.AutoCAD.Windows.PaletteSet
    ' we need a palette which will be housed by the paletteSet
    Public myPalette As UserControl1

    Public Sub loadPalette()
        ' check to see if it is valid
        If (myPaletteSet = Nothing) Then
            ' create a new palette set, with a unique guid
            myPaletteSet = New Autodesk.AutoCAD.Windows.PaletteSet("SUPPORTO CAVI") ', New Guid("D61D0875-A507-4b73-8B5F-9266BEACD596"))
            ' now create a palette inside, this has our tree control
            myPalette = New UserControl1(Me)

            ' now add the palette to the paletteset
            myPaletteSet.Add("Supporto Cavi", myPalette)
        End If

        ' now display the paletteset
        myPaletteSet.Visible = True

    End Sub

    Public Sub loadDatabase()

        Dim databaseFile As String = currentPath & "\modelli\database.csv"
        If Not (FileIO.FileSystem.FileExists(databaseFile)) Then
            MsgBox("Non ho trovato il file database.csv nella cartella modelli per il modulo SUPPORTO CAVI" & vbCrLf & databaseFile)
            Exit Sub
        End If

        'carica file database
        On Error GoTo erroreDuranteCaricamentoDatabase
        Dim tmpstream As StreamReader = File.OpenText(databaseFile)
        Dim strlines() As String
        Dim strline() As String

        strlines = tmpstream.ReadToEnd().Split(Environment.NewLine)
        ReDim templates(UBound(strlines))

        For i As Integer = 0 To UBound(templates)
            strline = strlines(i).Split(",")
            templates(i).title = strline(0)
            Dim tmpFileName = strline(1)
            templates(i).previewPath = currentPath & "\modelli\" & tmpFileName & ".png"
            templates(i).templatePath = currentPath & "\modelli\" & tmpFileName & ".dwg"
            templates(i).description = strline(2)
            myPalette.cableTemplate.Items.Add(templates(i).title)
        Next

        Exit Sub
erroreDuranteCaricamentoDatabase:
        MsgBox("Errore durante il caricamento del database per il modulo SUPPORTO CAVI." & vbCrLf & Err.Description)

    End Sub

    Protected Overrides Sub Finalize()
        MyBase.Finalize()
    End Sub

End Class 
```

然后在我们的 userControl 中，从图形视图切换到代码视图并粘贴以下代码：

```
Imports Autodesk.AutoCAD.ApplicationServices
Imports Autodesk.AutoCAD.EditorInput
Imports Autodesk.AutoCAD.DatabaseServices

'Imports Autodesk.AutoCAD.Windows
Imports Autodesk.AutoCAD.Runtime

Public Class UserControl1

    Public parentClass As adskClass

    Public Sub New(ByVal parent As adskClass)
        ' This call is required by the Windows Form Designer.
        InitializeComponent()
        parentClass = parent
    End Sub

    Private Sub UserControl1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    End Sub

    End Class

'Now we create a class that will help us if we have objects that we want to drag and drop from the palette to the autocad draw area. this class detects when the object is "dropped" in the AutoCAD editor. It Inherits from Autodesk.AutoCAD.Windows.DropTarget. 

Public Class MyDropTarget
    Inherits Autodesk.AutoCAD.Windows.DropTarget

    Public Overrides Sub OnDrop(ByVal e As System.Windows.Forms.DragEventArgs)
        Dim ed As Editor = Application.DocumentManager.MdiActiveDocument.Editor

        Try
            Using docLock As DocumentLock = Application.DocumentManager.MdiActiveDocument.LockDocument()
                'Run the AddAnEnt procedure if needed
                'adskClass.AddAnEnt()
            End Using

        Catch ex As System.Exception
            ed.WriteMessage("Error Handling OnDrop: " + ex.Message)
        End Try

    End Sub
End Class 
```

编译所有内容，将生成的dll文件复制到之前创建的安装程序路径中并进行测试。

现在您已准备好在您的调色板上添加图形按钮、代码以及任何您想用它做的事情。

这是我在 AutoCAD 上的调色板的 GUI： ![调色板](../Images/e14fa508220ed9ee06bd6684725a4d52.png)

**如何分发：**我将安装程序 exe、dll 插件、自述文件以及自定义插件所需的模板或其他文件放在一个文件夹中。然后我压缩这个文件夹并通过电子邮件发送给我的用户。这样，用户只需解压硬盘中的文件夹（非临时路径），打开exe并按下“REGISTER PLUGIN”按钮即可。**结束！** 现在用户可以打开 AutoCAD 并使用该插件。

# c# - 带有子类型的 Automapper 映射类型

> ID：14651377
> 
> 赞同：1
> 
> 时间：2013-02-01T17:03:02.303
> 
> 标签：c#, automapper

我有一个案例，我需要映射这样的东西：

```
public class Event
{
    string Name {get;set;}
    int EventType {get;set;}
    SubType Sub {get;set;}
} 
```

问题是SubType里面应该映射的方式是由类的`EventType`属性决定的`Event`。对于不同类型的事件，我希望映射不同的事物。

通常的方法是为 Event 和 SubType 创建映射 - 它们彼此不相关：

```
 map.CreateMap<EventDTO, Event>();
 map.CreateMap<SubTypeDTO, SubType>(); 
```

如何告诉 automapper 更改基于的 SubType 映射中的行为`Event.EventType`？

PS> 我知道这是一个糟糕的设计，它确实应该通过重构整个事情来解决（例如，删除 EventType 并创建子类）不幸的是我继承了这段代码，只需要解决错误而无需花费太多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:10:21.077

我不确定是否有什么可以实现的，但您可以执行以下操作：

```
 Mapper.CreateMap<EventDTO, Event>()
            .ForMember(to => to.Name, from => from.Ignore() )
            .ForMember(to => to.Sub, from => from.Ignore() )
            .ForMember(to => to.EventType, from => from.Ignore() )
            .AfterMap((source, dest) =>
                          {
                              switch (dest.EventType)
                              {
                                  case 1:
                                      // Behaviour EventType 1
                                      ...
                                      dest.Name = source.NameDTO + "1";
                                      ...
                                      break;
                                  case 2:
                                      // Behaviour EventType 2
                                      ...
                                      dest.Name = source.NameDTO + "2";
                                      ...
                                      break;
                                  default:
                                      // Behaviour EventType 3
                                      ...
                                      dest.Name = source.NameDTO + "0";
                                      ...
                                      break;
                              }
                          }); 
```

# .htaccess - 重写规则。.htaccess 。ERR_TOO_MANY_REDIRECTS

> ID：14651379
> 
> 赞同：1
> 
> 时间：2013-02-01T17:03:09.750
> 
> 标签：.htaccess, redirect, rewrite, rule

我将以下重写规则添加到 .htaccess：

```
RewriteEngine on
RewriteRule ^page/?$ index.php?cat=123 [L] 
```

当我访问 www.site.com/page 时，它​​会加载 /index.php?cat=123 的内容

问题是我还需要设置从 www.site.com/index.php?cat=123 到 www.site.com/page 的重定向，但是当我尝试这样做时，我得到“重定向太多”错误。任何想法如何解决这个问题？

```
RewriteEngine on
RewriteRule ^page/?$ index.php?cat=123 [L]
RewriteCond %{QUERY_STRING} ^cat=123$
    RewriteRule ^index\.php$ http://www.mysite.com/page [L,R=301] 
```

# xml - 在此上下文中不知道替代组的类型或其任何子类

> ID：14651385
> 
> 赞同：1
> 
> 时间：2013-02-01T17:03:32.890
> 
> 标签：xml, jaxb, xml-serialization, jaxb2

对于从替换组生成的抽象超类，我似乎无法正确理解所有 JAXB 魔法。我正在使用 JAXB 的参考实现。

这是类层次结构：

```
+ DatasourceAbstract
  +----- DatasourceQuery
  +------DatasourceStatic 
```

鉴于（如下文所述）我已经明确地向 JAXBContext 提供了该类及其**所有**子类，为什么它们“不为人知”对我来说是个谜。

如果需要更多信息，请告诉我。我提供了我认为相关的所有内容，但不想让帖子超载。

## 错误（为清楚起见进行了一些编辑）：

```
com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
Invalid @XmlElementRef : Type "class com.escholar.reports.reportXML.DatasourceAbstract" or any of its subclasses are not known to this context.
this problem is related to the following location:
    at protected java.util.LinkedList com.escholar.reports.reportXML.Data.dataSourceSubstitutionGroupHead
    at com.escholar.reports.reportXML.Data
    at protected com.escholar.reports.reportXML.Data com.escholar.reports.reportXML.ReportJAXB.data
    at com.escholar.reports.reportXML.ReportJAXB
    at public com.escholar.reports.reportXML.ReportJAXB com.escholar.reports.reportXML.ObjectFactory.createReportResourceJAXB()
    at com.escholar.reports.reportXML.ObjectFactory

at com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException$Builder.check(Unknown Source)
    .....  Partially ellided stacktrace ............
at javax.xml.bind.JAXBContext.newInstance(Unknown Source)
at com.escholar.reports.utilities.reportsamples.ReportXMLGenerator.main(ReportXMLGenerator.java:69) 
```

## JAXB上下文创建

这是我创建 JAXB 上下文的地方（触发上述异常的行）：

```
JAXBContext jc = 
    JAXBContext.newInstance(
        com.escholar.reports.reportXML.ObjectFactory.class, 
        com.escholar.reports.reportXML.DatasourceAbstract.class, 
        com.escholar.reports.reportXML.DatasourceStatic.class, 
        com.escholar.reports.reportXML.DatasourceQuery.class); 
```

## 数据源抽象类

这是它抱怨的课程。请注意，我还使用@XmlSeeAlso 来标识子类。

```
package com.escholar.reports.jaxb;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "DatasourceAbstract")
@XmlSeeAlso({
    DatasourceStatic.class,
    DatasourceQuery.class
})
public abstract class DatasourceAbstract {

    @XmlAttribute(name = "Name")
    @XmlSchemaType(name = "anySimpleType")
    protected String name;

    public String getName() {
        return name;
    }

    public void setName(String value) {
        this.name = value;
    }
} 
```

## 引用 DatasourceAbstract

这是引用 DatasourceAbstract 的地方：

```
package com.escholar.reports.jaxb;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "dataSourceSubstitutionGroupHead"
})
@XmlRootElement(name = "Data")
public class Data {

    @XmlElementRef(name = "DataSourceSubstitutionGroupHead", type = JAXBElement.class)
    protected List<JAXBElement<?>> dataSourceSubstitutionGroupHead;

    public List<JAXBElement<?>> getDataSourceSubstitutionGroupHead() {
        if (dataSourceSubstitutionGroupHead == null) {
            dataSourceSubstitutionGroupHead = new ArrayList<JAXBElement<?>>();
        }
        return this.dataSourceSubstitutionGroupHead;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:05:44.257

在从 XML 模式生成的模型上创建 a`JAXBContext`时，您应该在生成的模型的包名称上而不是单个类上执行此操作。这将有助于确保`JAXBContext`引入所有必要的类。

```
JAXBContext jc = JAXBContext.newInstance("com.escholar.reports.reportXML"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-07T09:06:59.633

我遇到了同样的问题，所以我分享我的解决方案：

```
@XmlSeeAlso() 
```

由于子类的延迟加载，JAXB 几乎不可能在正确的时间使用子类。

我的基本抽象类是 FieldMapping，继承的是 FileFieldMapping 和 DatabaseFieldMapping（为简洁起见，我在这里省略了实现）。

```
@XmlRootElement(name = "fieldMapping")
@XmlSeeAlso({DatabaseFieldMapping.class, 
FileFieldMapping.class})
public abstract class FieldMapping {

}

@XmlRootElement(name = "fileFieldMapping")
public class FileFieldMapping extends FieldMapping {
}

@XmlRootElement(name = "databaseFieldMapping")
public class DatabaseFieldMapping extends 
FieldMapping 
{
} 
```

你可以在[这里](http://tonyz93.blogspot.com/2017/01/jaxb-problem-list.html)和[这里找到更多](https://stackoverflow.com/questions/17241634/jaxb-inheritance-using-substitution-but-not-to-root-element)

# vim - 为什么 fugitive-:Gdiff 色彩爆炸，却没有做任何有用的事情？

> ID：14651386
> 
> 赞同：3
> 
> 时间：2013-02-01T17:03:32.693
> 
> 标签：vim, vim-plugin, vim-fugitive

我刚刚安装了逃犯，它工作得很好。不过似乎有问题`:Gdiff`，可能是由于某个地方的设置不兼容，我希望你能帮助我识别。当我运行命令时，屏幕上的颜色变得疯狂，据我所知，没有任何有用的事情发生，例如突出显示更改的行。

任何线索可能是什么问题或我应该先看哪里？

* * *

我正在为 Windows 使用 Gvim x64。[这是输出，`gvim.exe --version`](http://pastebin.com/LNxFwz7n)这是我安装的捆绑包的列表：

```
单编译
l9
书呆子评论者
书呆子树
病原
皮林特
平滑滚动
狙击手
超级表
环绕
逃亡者
vim 缩进指南
vim 电力线
vim脚本
```

* * *

### 截图

以下是我的配置在 gvim.exe 中正常窗口的外观：

![在 Gdiff 之前](../Images/0629c2d6c93fa62b56bbe8df750933d0.png)

这就是我`:Gdiff`（文件没有更改）时的样子：

![在 Gdiff 之后（没有变化）](../Images/a755da2a78974830e6466a55b8c05ca3.png)

这就是当我`:Gdiff`和文件发生非分阶段更改时的样子。（我在第 13 行上方添加了 2 行）。

![在 Gdiff 之后（有变化）](../Images/bace7f7274d666b882b9dc7909e21988.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T16:45:45.173

在我看来，你的 diff 程序做得很糟糕。`:set diffexpr?`告诉你什么？

为了隔离问题，我将 git 和逃犯排除在外。只需制作文件的两个副本，然后在编辑 foo.py 时，`:diffsplit bar.py`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T09:40:42.807

尝试在以下高亮变量中调整颜色

```
hi! DiffAdd      guibg=#003300
hi! DiffChange   guibg=#003300
hi! DiffDelete   guifg=#330000 guibg=#330000
hi! DiffText     guibg=#990000 
```

# java - 带有 Hibernate 映射文件的 Spring Data JPA

> ID：14651393
> 
> 赞同：4
> 
> 时间：2013-02-01T17:04:18.357
> 
> 标签：java, spring, hibernate, hibernate-mapping, spring-data-jpa

我想将 Spring Data JPA 与 Hibernate 映射文件一起使用并且不使用 JPA-Annotations。

但是我在服务器启动（tomcat）时遇到了这个异常：

```
java.lang.IllegalStateException: No persistence units parsed from {classpath*:META-INF/persistence.xml}
at org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager.obtainDefaultPersistenceUnitInfo(DefaultPersistenceUnitManager.java:547)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.determinePersistenceUnitInfo(LocalContainerEntityManagerFactoryBean.java:311)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:260)

My dispatch-servlet.xml looks like the following:
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <!--<property name="persistenceUnitName" value="BLUPP" />-->
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter" ref="hibernateJpaVendorAdapter" />
    <!-- <property name="packagesToScan" value="org.cleanyourway.server.beans" />-->
    <property name="persistenceUnitPostProcessors">
        <list>
            <bean
                class="org.springframework.data.jpa.support.ClasspathScanningPersistenceUnitPostProcessor">
                <constructor-arg value="org.xxxxxx.server.beans" />
                <property name="mappingFileNamePattern" value="**hbm.xml" />
            </bean>
        </list>
    </property>
</bean> 
```

是否可以将 Hibernate 映射文件与 ClasspathScanningPersistenceUnitPostProcessor 一起使用？

我让它运行

```
<property name="packagesToScan" value="org.xxxxxxx.server.beans" /> 
```

和 JPA 注释。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-22T10:14:20.760

# 简要地

您的问题可能来自`mappingFileNamePattern`您提供的。尝试`**/*.hbm.xml`代替`**hbm.xml`.

完整片段：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <!--<property name="persistenceUnitName" value="BLUPP" />-->
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter" ref="hibernateJpaVendorAdapter" />
    <!-- <property name="packagesToScan" value="org.cleanyourway.server.beans" />-->
    <property name="persistenceUnitPostProcessors">
        <list>
            <bean
class="org.springframework.data.jpa.support.ClasspathScanningPersistenceUnitPostProcessor">
                <constructor-arg name="basePackage" value="org.xxxxxx.server.beans" />
                <property name="mappingFileNamePattern" value="**/*hbm.xml" />
            </bean>
        </list>
    </property>
</bean> 
```

# 详细介绍

## 蚂蚁路径模式

Spring 使用 Ant 路径样式模式。[您可以在Ant 网站](http://ant.apache.org/manual/dirtasks.html#patterns)上找到关于这些模式的良好文档。双星号通配符表示：*在子目录中递归*。它后面应该跟一个斜杠，因为它代表一个目录。

## ClasspathScanningPersistenceUnitPostProcessor

的映射文件检测部分`ClasspathScanningPersistenceUnitPostProcessor`考虑了两个参数（`basePackage`（您的构造函数参数）和`mappingFileNamePattern`）。*通过建议的更正，Spring 将搜索类路径的子文件夹org/xxxxxx/server/beans/*中的所有 **.hbm.xml* 。

换个说法，你不能指望你`mappingFileNamePattern`会被单独解释为搜索。

在下文中，它的代码片段完成了`ClasspathScanningPersistenceUnitPostProcessor`这项工作：

```
String path = ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX
    + basePackage.replace('.', File.separatorChar)
    + File.separator + mappingFileNamePattern; 
```

## 小限制`ClasspathScanningPersistenceUnitPostProcessor`

您无法扫描位于类路径中 JAR 文件根目录的 HBM 文件。`basePackage`不支持为空，也不能只使用一个`"."`值。

此外，底层`PathMatchingResourcePatternResolver`不适用于带有通配符的 Ant 样式路径模式（`*`在您的情况下），没有根目录（[此处](https://stackoverflow.com/questions/11047672/pathmatchingresourcepatternresolver-spring-usage)和[此处（](http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html)*其他注释*中的第一个警告））。

## 的错误`ClasspathScanningPersistenceUnitPostProcessor`

这个类从来没有使用过 Hibernate。

在 1.4.x 之前的版本中，有[这个错误](https://github.com/spring-projects/spring-data-jpa/pull/24)。

有了[这个拉取请求](https://github.com/spring-projects/spring-data-jpa/pull/24)，似乎有一个新错误阻止我在 JAR 中使用 HBM 进行整个工作。我`NullPointerException`在第 146 行得到了一个，因为`resource.getURI().getPath();`它似乎不适用于协议中带有两个*:的 URI（在本例中为**jar:file:/*）并返回一个`null`路径。

（当我找到或发布错误报告时，我将使用错误报告的链接更新我的答案。）

# css - div 内图像的最大高度或宽度，同时保持纯 css 中的比例

> ID：14651394
> 
> 赞同：0
> 
> 时间：2013-02-01T17:04:26.123
> 
> 标签：css

我有两种布局，但它们在概念上是相同的。

一个是包含图像的 div。另一个是两个浮动 div 元素，它们在左侧和右侧分别占其父 div 的一半，每个元素都包含一个图像。它们的父 div 大小和比例取决于主体大小和比例，直到显示时间才知道，所以我需要按百分比而不是恒定宽度或高度来指定它。在这两种情况下，我都需要最大宽度或高度，同时保持纵横比并且不溢出父 div，因此图像在保持比例的同时尽可能大地显示。

我知道如何保持最大高度的比例，或者同时保持比例，但不能同时保持比例，所以会有溢出。我也知道如何使用 Javascript 来实现这一点，但我试图在我的布局中避免使用脚本，我想在 css 中处理它。

我在网上没有看到类似的东西，谷歌搜索也没有给我任何线索，所以我什至怀疑这在 css 中是否真的可行。

任何解决方案将不胜感激。

编辑 ：

好的，我想出了怎么做。交易是将图像最大高度和最大宽度设置为 100%。但是我面临另一个问题，所以如果有人在做我想做的事情发现它有用，我会发布布局，我会重新提出问题以关注新问题。

这是布局。它将图像纵横比保持在最大可能的大小。

索引.html

```
<html> 
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <div class="header"></div>
        <div id="pageleft" class="page">
            <img src="img/1.jpg">
        </div>
        <div id="pageright" class="page">
            <img src="img/2.jpg">
        </div>
    </body>
</html> 
```

样式.css

```
html, body {
    height: 100%;
    overflow:hidden;
    padding:0px;
    margin:0px;
}

.header{
    background-color:blue;
    width:100%;
    height:2em;
}

 .page{
    width:50%;
    height:100%;
    position:relative;
 }

 #pageright{
    float:right;
    background-color:green;
 }

 #pageleft{
    float:left;
    background-color:yellow;
 }

.page > img{
    position:absolute;
    margin:auto;
    top:0;
    bottom:0;
    max-height:100%;
    max-width:100%;
}

#pageleft > img {
    right:0;
}
#pageright > img {
    left:0;
} 
```

注意 1：在 Chrome 和 Firefox 中进行了测试，包括桌面（将窗口调整为任意大小/比例）和移动（纵向和横向）。

注意 2：我对图像使用 A 剪纸比例，但应该适用于任何图像大小和比例，即使两个图像具有不同的纵横比。

问题是我的标题高度是 2em，这就是 .page div 溢出的地方。有谁知道解决这个问题的方法？

提前致谢。

# javascript - 在 nvd3 多图表中显示日期

> ID：14651395
> 
> 赞同：1
> 
> 时间：2013-02-01T17:04:37.527
> 
> 标签：javascript, d3.js, nvd3.js

我正在尝试在 nvd3 图表上显示日期。我已经使用 lineChart 模型成功地做到了这一点，但我在 multiChart 模型上苦苦挣扎。

图表显示正确，但我只能让 x 轴标签工作。据我所知，这是因为 d 传递的 tickFormat 的值是 NaN，我不知道为什么。

```
chart.xAxis.tickFormat(d) 
```

这意味着我无法从中获得创建 d3.time.format 的值。

然而，在绘制图表之后，d 的值就是我所期望的（它是 chart.x 函数的返回值）。

```
var chart = nv.models.multiChart()
.x(function(data,increment){
    return data.x
}); 
```

我对此有点不知所措，试图理解 nv 源代码，但是这一切如何挂在一起对我来说还不直观！

任何帮助建议将一如既往地不胜感激。

谢谢

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T02:49:28.643

根据我的个人经验，XAxis 中的日期似乎已更改为时间戳编号。尝试这个

```
chart.xAxis.tickFormat(function(d) {
    return d3.time.format('%x')(new Date(d));
}); 
```

# iphone - 忽略“UIViewController 可能无法响应 [方法]”警告的方法

> ID：14651396
> 
> 赞同：2
> 
> 时间：2013-02-01T17:04:38.083
> 
> 标签：iphone, ios, objective-c, cocoa-touch

有没有办法让编译器忽略这个特定的警告？

这就是我所做的：

```
UIViewController *firstViewController = AppDelegate.instance.viewController;

//open the view of the clicked subItem
if ([firstViewController respondsToSelector:@selector(openView:inView:)]) {
    [firstViewController openView:subItem.itemText.text inView:activeScreen]; //warning on this line
} 
```

我知道一种可行的方法是更改`UIViewController`​​为`ViewController`（班级名称）。但是这个修复在未来不会起作用，所以我只是在寻找一种方法来忽略这个警告。

它在未来不会起作用，因为，我会做这样的事情：

```
//.m

UIViewController *firstViewController;

//.h

if (someCondition) {
firstViewController = AppDelegate.instance.viewController;
}
else{
firstViewController = AppDelegate.instance.otherViewController;
}

if ([firstViewController respondsToSelector:@selector(openView:inView:)]) {
    [firstViewController openView:subItem.itemText.text inView:activeScreen]; //warning on this line
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:17:29.850

您应该在适当的情况下将对象转换为正确的类型。请注意，如果您愿意，您可以“强制转换”到协议。**这使您可以安全地知道所需方法已实现，而无需知道具体类型。**

如果您只想让编译器不抱怨，可以通过调用`performSelector:`. **但是你不会得到编译时检查。**

```
[object performSelector:@selector(doSomething)]; 
```

请参阅讨论：[使用 -performSelector：与仅调用方法](https://stackoverflow.com/questions/1493125/using-performselector-vs-just-calling-the-method)

如果您只想将一个对象传递给您的选择器，则可以使用 variant `performSelector:withObject:`。

如果要传递多个对象，则必须将它们包装在一个容器对象中，如[iOS - How to implement a performSelector with multiple arguments and with afterDelay?](https://stackoverflow.com/questions/8439052/ios-how-to-implement-a-performselector-with-multiple-arguments-and-with-afterd) .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:15:35.873

在这种情况下，您可以发出显式类型转换（强制转换）：

```
UIViewController *firstViewController;
// ...

[(FirstViewController *)firstViewController openView:subItem.itemText.text inView:activeScreen]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:16:39.847

确保导入 FirstViewController.h，以便编译器知道该方法。稍微调整一下你的代码：

```
UIViewController *vc = AppDelegate.instance.viewController;

//open the view of the clicked subItem
if ([vc respondsToSelector:@selector(openView:inView:)]) {
    FirstViewController *firstViewController = (FirstViewController *) vc;
    [firstViewController openView:subItem.itemText.text inView:activeScreen];
} 
```

这应该够了吧。

# java - 在 java webapp 中使用现有的 sqlite 数据库

> ID：14651401
> 
> 赞同：0
> 
> 时间：2013-02-01T17:04:46.747
> 
> 标签：java, sql, sqlite, web-applications

我有一个 Java 网络应用程序。我需要指向我在项目根目录（在 Eclipse 中）中拥有的现有 sqlite 数据库。

我有所有必需的驱动程序/罐子。

问题是从我的 sqlite 数据库表中选择的代码是针对新创建的数据库运行的。我收到我的表“Table1”不存在的错误。我相信这是因为正在创建一个新数据库，而不是在根目录中使用现有的 sqlite 数据库以及我需要的表和数据。

有谁知道我如何强制使用这个本地 sqlite 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:00:58.037

根据[SQLite 文档](http://www.sqlite.org/c3ref/open.html)，如果找不到现有数据库，则默认情况下会创建一个新数据库——因此最可能的解释是连接字符串中的路径未指向您预先存在的数据库。

请参阅[此处](https://stackoverflow.com/questions/2395737/java-relative-path-of-a-file-in-a-java-web-application)有关 Web 应用程序中的相对路径的问题：如果您的 Web 应用程序是 servlet，请使用[ServletContext.getResource](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResource%28java.lang.String%29)获取数据库的路径以在连接字符串中使用。因此，如果您现有的数据库位于 /WEB-INF：

```
ServletContext.getResource("/WEB-INF/my.db"); 
```

# c# - .net 泛型类型对象与它所持有的类型不同

> ID：14651407
> 
> 赞同：2
> 
> 时间：2013-02-01T17:05:03.330
> 
> 标签：c#, .net, generics

来自第三方应用程序的对象值提供了一个正确但键入错误的值。我正在尝试在我正在创建的通用方法中将这个对象值输入到我选择的类型中。我已经模拟了一个示例来演示该问题。

```
static void Main(string[] args)
{
    decimal d = 1; // this can't be changed
    var v = Method<int>(d); // what I'm trying to do
}

//the code in this method can be changed
static T Method<T>(object input)
{
    T output = default(T);

    //causes InvalidCastException
    output = (T)input;

    return output;
} 
```

如您所见，值“1”是一个有效的整数，但是当第三方应用程序将其键入为小数时，当尝试将其转换为整数时，它会失败。如何更改通用方法以使其不会因这种情况而崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:18:19.863

替换`output = (T)input;`为：

```
output = (T)Convert.ChangeType(input, typeof(T)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:18:23.150

尝试这样的事情：

```
static T Method<T>(object input)
{
    T output = default(T);

    var t = input.GetType();
    TypeConverter tc = TypeDescriptor.GetConverter(t);
    output = (T)tc.ConvertTo(input, typeof(T));

    return output;
} 
```

显然，您需要添加一些错误检查以确保类型兼容——查看 TypeConverter 上的方法。

您需要添加一个`using System.ComponentModel;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:19:18.753

“铸造”和“转换”是两个非常不同的东西。不幸的是，在某些情况下，C# 中的语法是相同的，因此可能会混淆主题。

`input`只能*转换*为 a `decimal`，因为它确实是这样。您可以将 a 转换为 a `decimal`，`int`但不能转换，而`object`这恰好包含 a`decimal`到 a `int`。

所以如果你这样做：

```
static int ToInt(object input)
{
    return (int)(decimal)input;
} 
```

然后它将起作用。

如果你想处理有一个*转换*运算符的一般情况`input`，`T`那么你就很不走运了。这些转换是编译时机制，而不是运行时机制。

# jquery - 学习 jQuery，但什么都没有发生？

> ID：14651411
> 
> 赞同：3
> 
> 时间：2013-02-01T17:05:16.953
> 
> 标签：jquery, function, click

我正在尝试使用 jQuery，但由于某种原因，当我单击按钮时什么都没有发生。我已经尝试以多种方式操作代码，但仍然没有任何反应

我正在使用 Firefox，并且 javascript 工作正常。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <style>
        body {
            background-color:royalblue; 
            margin:0px;
        }

        #div_header {
            background-color:black;
            height:200px;   
        }
    </style>

    <script type="text/javascript">
        $(document).ready(function() {
            $("button").click(function() {
                $("#div_header").hide();
            });
        });
    </script>
</head>
<body>
    <div id="div_header">
        <button type="button">Click me!</button>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:07:34.660

脚本源值不正确。将其更改为

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

# c# - 修改字符串变量

> ID：14651416
> 
> 赞同：-5
> 
> 时间：2013-02-01T17:05:46.697
> 
> 标签：c#

我有一个名为的字符串变量`query`。它的价值是：

> 从 tab1
> 内部连接中选择 col1、col2（从 tab2 中选择 col3、col4）

是否可以对这个字符串变量进行处理以替换第一次出现的`select`with `select top 100`？

字符串变量应变为：

> select top 100 col1, col2 from tab1
> inner join (select col3, col4 from tab2)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:07:45.697

```
query = "SELECT TOP 100 " + query.Substring("SELECT ".Length) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:08:48.353

```
var query = "select col1, col2 from tab1 inner join (select col3, col4 from tab2)";
var regex = new Regex("select");
query= regex.Replace(query, "Select TOP 100", 1); 
```

这将确保只替换第一个实例，而不是选择的所有实例。如果您需要通过更改正则表达式来更改要替换的内容，也可以轻松修改它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T17:10:17.990

或者：

```
query = query.Replace("select col1", "select top 100 col1"); 
```

# c++ - 在事件循环中处理套接字

> ID：14651417
> 
> 赞同：1
> 
> 时间：2013-02-01T17:05:49.383
> 
> 标签：c++, sockets, event-handling

任何人都可以推荐一个优雅而高效的框架来在 C++ 中制作一个主事件循环，我需要执行以下操作：

*   处理键盘输入
*   检查套接字上的传入数据报
*   排队并发送传出的回复数据报
*   管理基于 curses 的窗口

我主要熟悉 Cocoa，所有这些功能都方便地包装到核心类中。出于可移植性和防锈的目的，我选择了 C++ 来编写这个基于 curses 的网络客户端应用程序（为了那种运动型的 IRC/终端外观）。是的，我是个贪吃惩罚的人。

观察者模式会起作用吗？也许建立一个全球通知中心来注册和接收消息？网络部分应该在它自己的线程上运行吗？目标是在某个时候为 unix、linux 和 windows 制作一个版本，因此可移植性是重点。

任何关于此类的任何建议都会有所帮助。我正在寻找 ZMQ 来处理网络，但我不确定它是否会处理 UDP 数据报服务。

# c++ - C++如何调用模板的类构造函数

> ID：14651418
> 
> 赞同：-3
> 
> 时间：2013-02-01T17:05:49.257
> 
> 标签：c++, templates

我有这样一段代码：

```
template <class T>
struct Rgb
{
    T *r, *g, *b;

    Rgb(int nr, int ng, int nb)
    {
        r = new T(nr);
        g = new T(ng);
        b = new T(nb);
    }

    Rgb(int n)
    {
        Rgb(n, n, n);
    }

    ~Rgb()
    {
        delete r;
        delete g;
        delete b;
    }
}; 
```

我已经这样做了，因为我希望能够创建如下对象：

```
 Rgb<std::vector<int>> a(10); // so it creates 3 vectors inside,
        // each with 10 elements or

    Rgb<std::deque<double>> a(2, 5, 4); // so it creates 3 deques inside
        // with different sizes 
```

但是我上面给出的实现不起作用。请帮助我...谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:14:31.810

如果您的编译器支持[构造函数委托](http://en.wikipedia.org/wiki/C%2B%2B11#Object_construction_improvement)（例如 Clang 3.2），您可以执行以下操作：

```
 Rgb(int n) : Rgb(n, n, n)
    {
    } 
```

你正在做的是在构造函数中构造一个临时的 Rgb 实例，一旦 uninitialized 就会失败`r`，`g`并被`b`删除。

否则，我建议要么创建一个`init`执行初始化的通用函数，要么简单地复制代码。正如评论指出的那样，您不应该`new`在这里使用（这几乎总是现代 C++ 代码中的代码味道）。把它放在一起：

```
template <class T>
struct Rgb
{
    T r, g, b;

    Rgb(int nr, int ng, int nb) : r(nr), g(ng), b(nb)
    { }

    Rgb(int n) : r(n), g(n), b(n)
    { }

    ~Rgb()
    { }
}; 
```

# wpf - mvvm light icleanup 和 messenger 在 VB.NET 中注销

> ID：14651420
> 
> 赞同：0
> 
> 时间：2013-02-01T17:05:59.343
> 
> 标签：wpf, vb.net, mvvm, mvvm-light

我只需要一点帮助来阐明 Messenger 类如何与 MVVM-Light 中的 ICleanup 一起工作。我正在使用 Mvvm-Light v4 在 VB.Net 中创建 WPF 4 应用程序。

我有一个信使，它注册从我创建的 NavigationService 类发送的消息，如下所示：

这是在名为 ClientListViewModel 的 ViewModel 中的注册

```
 ''register for messages
  Messenger.[Default].Register(Of INavigationService)(Me, "NavigationStart", False, AddressOf HandleParentChildNavigate) 
```

这接收 NavigationService 类并根据与此问题无关的其他逻辑对其执行检查。

在我的 NavigationService 类中触发导航事件时发送消息，如下所示

```
''Send message that navigation has been requested
Messenger.Default.Send(Of INavigationService)(Me, "NavigationStart") 
```

如果我的接收类（在本例中为 ClientListViewModel）有数据验证错误，这允许我取消导航事件，并将焦点返回到有错误的记录。这一切都很好。

我的问题是，我在哪里以及如何取消注册该消息。我知道我需要这样做以避免在我阅读其他帖子时出现内存泄漏。我看到了类似以下的内容：

```
Public Overrides Sub CleanUp()
    Messenger.Default.Unregister(Me)
End Sub 
```

此清理位于接收消息的同一视图模型 (CientListViewModel) 中。

所以我有三个问题：

1.  我什么时候应该调用这个清理方法

2.  ViewModelLocator 有没有办法在应用程序关闭时取消注册所有消息收件人？

3.  *这个问题不太相关，但我也希望得到一些帮助*，我如何判断我是否由于未注册的消息收件人而出现“内存泄漏”？

谢谢你的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:03:38.570

何时应该“清理”视图模型取决于您的应用程序和视图模型的使用情况。例如，我处理带有选项卡式界面的应用程序。当用户关闭选项卡时，应用程序会在代表该选项卡的视图模型上调用清理（它本身会通过其视图模型并在它们上调用清理）。所以一般规则 - 一旦你不再需要视图模型 - 你应该清理它（关闭子窗口，选项卡等）至于其他问题：

2）如果你清理你的视图模型，关闭应用程序确实无关紧要。在关闭所有内存时，所有内存都将被释放，并且您不会出现内存泄漏 :)

3）您应该检查应用程序内存使用情况。在我们的应用程序中，我们遇到了严重的内存泄漏问题（实际上仍然存在但不是**那么大）。**我们确定我们可能会通过内存跟踪泄漏：打开/关闭了许多选项卡，调用`GC.Collect()`- 但内存使用量并没有下降。我们开始使用 WinDbg 跟踪内存泄漏，发现确实**有很多**地方我们没有从 Messenger 注销收件人。此外，我们正在使用绑定到 CommandManager 的旧版本的 MVVM Light，因此我们也遇到了 RelayCommands 的问题。

道德是-您应该考虑在编程期间清理资源，因为以后找到并修复它可能会很痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:56:58.277

我没有在 MVVM-Light 中使用过 Messenger，所以我不知道是否有固有的清理方法。以下是对这些问题的一些一般性答案：

1.  当您不再需要了解消息或不再需要您的视图模型时，您应该进行清理。如果 Navigate 未取消，您的 ViewModel 是否会再关心 Navigate 消息（即它是否被卸载或者它支持的视图是否消失）？如果是这种情况，那么您可以在收到导航命令并确定可以导航时取消注册。

2.  这个我不知道。但是在应用程序关闭时，这无关紧要（对于托管对象，请参见下文）。

3.  当应用程序关闭时，您不必担心托管对象的这些内存泄漏，当整个应用程序域终止时，任何未引用的对象都将被丢弃。如果您引用了非托管资源，这是另一回事。

# json - 如何使用 Code Igniter 和 twig 正确缓存

> ID：14651422
> 
> 赞同：0
> 
> 时间：2013-02-01T17:06:11.053
> 
> 标签：json, codeigniter, caching, twig, apc

我正在使用 CodeIgniter + Twig，我需要缓存一些数据。

它是不需要经常修改/访问并且仅在修改时才需要访问的数据（因为我每次修改它时都会缓存它的视图）。

最好的方法是什么？

*   将数据保存在 .json 的某处

*   将数据以json格式保存在表格中

我应该使用 APC 还是缓存到磁盘？我觉得它不需要缓存在内存中，但我并没有真正得到这一切。还有一个库可以缓存在磁盘上还是我自己用 file_put_contents 做

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T00:53:33.157

您到底要缓存什么，视图的 HTML 输出或传递给视图的数据？

CodeIgniter 有一个带有多个适配器（APC、文件、Memcached）的缓存驱动程序，可以在需要时轻松交换。[官方文档](http://ellislab.com/codeigniter/user-guide/libraries/caching.html)应该足以让您上路。

还有一种叫做[输出缓存](http://ellislab.com/codeigniter/user-guide/general/caching.html)的东西，它可以缓存整个页面的 HTML 输出。

# html - 如何将响应式菜单向右移动？

> ID：14651423
> 
> 赞同：0
> 
> 时间：2013-02-01T17:06:13.553
> 
> 标签：html, css, responsive-design

我对使用[本教程](http://designshack.net/articles/css/code-a-responsive-navigation-menu/)制作的响应式菜单有疑问，实现起来非常简单，我也会在此处添加代码。

如果你[在这里访问我的页面](http://bravotech.me/skeleton/menu.html)，你可以看到我在底部有一个 5 项菜单。但我试图让它向右移动，我尝试将“float：right”添加到导航，添加到 div，但它不起作用。

这是我的 HTML

```
<div class="container" style="background:lightgray; padding: 15px">
    <h3> 5 menu left </h3>
    <nav>
    <ul>
    <li><a class="current" href="#">PixelsDaily</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Clients</a></li>
    <li><a href="#">Work</a></li>
    <li><a href="#">Work2</a></li>
    </ul>       
    </nav>
</div> 
```

这是我的 CSS

```
.container {
    position: relative;
    width: 960px;
    margin: 0 auto;
    padding: 0;
}

* {
    padding: 0;
    margin: 0;

    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
}

nav {
    width: 90%;
    margin: 50px auto; 
}

nav ul {
    list-style: none;
   /* overflow: hidden; */
}

nav li a {
    background: #444;
    border-right: 1px solid #fff;
    color: #fff;
    display: block;
    float: left;
    font: 400 13px/1.4 'Cutive', Helvetica, Verdana, Arial, sans-serif;
    padding: 10px;
    text-align: center;
    text-decoration: none;
    text-transform: uppercase;
    width: 12.5%;

        /*TRANSISTIONS*/
    -webkit-transition: background 0.5s ease;
       -moz-transition: background 0.5s ease;
         -o-transition: background 0.5s ease;
        -ms-transition: background 0.5s ease;
            transition: background 0.5s ease;
}

 /*HOVER*/
nav li a:hover , nav li a.current{
    background: #222;
}

nav li a:visited {
    color:#FFF;
}

nav li:last-child a {
    border: none;
}

/*SMALL*/
nav small {
    color: #aaa;   
    font: 100 11px/1 Helvetica, Verdana, Arial, sans-serif;
    text-transform: none;

}

/* MEDIA QUERIES*/
@media only screen and (max-width : 1220px),
only screen and (max-device-width : 1220px){
    nav li a {
        font: 400 10px/1.4 'Cutive', Helvetica, Verdana, Arial, sans-serif;
    }

    nav small {
        font: 100 10px/1 Helvetica, Verdana, Arial, sans-serif;
    }
}

@media only screen and (max-width : 930px),
only screen and (max-device-width : 930px){
    nav li a {
        width: 25%;
        border-bottom: 1px solid #fff;
        font: 400 11px/1.4 'Cutive', Helvetica, Verdana, Arial, sans-serif;
    }

    nav li:last-child a, nav li:nth-child(4) a {
        border-right: none;
    }

    nav li:nth-child(5) a, nav li:nth-child(6) a, nav li:nth-child(7) a, nav li:nth-child(8) a {
        border-bottom: none;
    }
}

@media only screen and (max-width : 580px),
only screen and (max-device-width : 580px){
    nav li a {
        width: 50%;
        font: 400 12px/1.4 'Cutive', Helvetica, Verdana, Arial, sans-serif;
        padding-top: 12px;
        padding-bottom: 12px;
    }

    nav li:nth-child(even) a {
        border-right: none;
    }

    nav li:nth-child(5) a, nav li:nth-child(6) a {
        border-bottom: 1px solid #fff;
    }
}

@media only screen and (max-width : 320px),
only screen and (max-device-width : 320px){
    nav li a {
        font: 400 11px/1.4 'Cutive', Helvetica, Verdana, Arial, sans-serif;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:26:35.230

浮动你的 A 的右边而不是左边。

或者，切换到`display: inline-block;`设置，而不是使用浮点数。

jsfiddle：http: [//jsfiddle.net/LbApX/](http://jsfiddle.net/LbApX/)

**HTML：**

*   家
*   家
*   家
*   家
*   家

**CSS：** 导航 ul { 文本对齐：右；}

```
nav ul li {
    display: inline-block;
} 
```

# css - 在css3中定位多个背景

> ID：14651425
> 
> 赞同：0
> 
> 时间：2013-02-01T17:06:26.917
> 
> 标签：css, background, background-image

我有以下设置

```
background-image: url(image1.png) , url(image2.png); 
```

想法是`image1.png`到处重复，而`image2.png`应该只从页面顶部开始 200px 并且仅`repeat-x`. 我知道你可以像这样定位背景：

```
background-position: top left, left bot etc... 
```

但是我如何将它定位在距页面顶部 200px 的位置？并成功`repeat-x`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:08:31.037

您需要使用背景的简写：

```
{background: url(image1.png) repeat, url(image2.png) 0 200px repeat-x;} 
```

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

# oracle - NVARCHAR 到 VARCHAR 之间的转换

> ID：14651426
> 
> 赞同：3
> 
> 时间：2013-02-01T17:06:30.130
> 
> 标签：oracle, utf-8, nvarchar

我有一个使用字符集 UTF-16 定义为 NVARCHAR 或 NCHAR 或 NCLOB 的所有字符列的 Oracle DB。

现在我想迁移到具有字符集 UTF-8 的新数据库。由于它可以存储 unicode 字符，因此我在徘徊是否能够导入数据转换列类型。

我怀疑的原因是我知道如果不为空，我无法在 VARCHAR2 中转换 NVARCHAR2 列。

执行导入的最佳选择是什么。如果我导入架构、修改列类型然后导入数据，数据泵会抱怨吗？

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T12:00:18.740

是的，datapump 不会对您提出的解决方案印象深刻。您需要使用 to_char() 或 cast( MYNVARCHAR2 as VARCHAR2 ) 在导入之后或导出之前转换数据类型。据我所知，任何无法转换的字符都将被转换为“？”，因此您必须注意不要转换任何包含非英文字母字符的数据。

将数据按原样导入不同的模式可能是最简单的，然后在将数据复制到正确的修改模式的同时转换数据。IE

> impdp remap_schema=myschema:tempschema
> 
> 插入 myschema.mytable（从 tempschema.mytable 中选择 myprimarykey，to_char(mynvarchar2)）；

但这显然会占用数据库中两倍的空间。

# oracle11g - 在 SQLPlus ORA-00907 中使用 ENUM

> ID：14651428
> 
> 赞同：1
> 
> 时间：2013-02-01T17:06:37.520
> 
> 标签：oracle11g, sqlplus

因此，尝试使用 ENUM 而不是教师偏爱的 'CHECK(col_name IN ('ENUM', 'LIST')) 方法并得到缺少右括号的错误。无法弄清楚，并会感谢任何输入。我的好奇心是学术性的，检查条件很好，所以不要着急。

`SQL> CREATE TABLE service_labour_detail
2 (call_num NUMBER(8),
3 labour_code ENUM('A','B','C','D'),
4 labour_hours NUMBER(3,1) NOT NULL,
5 PRIMARY KEY(call_num, labour_code),
6 FOREIGN KEY(call_num)
7 REFERENCES service_call(call_num));
labour_code ENUM('A','B','C','D'),
* ERROR at line 3:
ORA-00907: missing right parenthesis` 干杯!

弗雷泽

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:15:37.183

`enum`不是 Oracle 中的有效数据类型。 `enum`是 MySQL 中的一种数据类型，但据我所知，没有多少其他数据库支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T12:49:25.993

试试这个13 END AS 部门 14 FROM emp;

从这个链接[http://www.oracle-developer.net/display.php?id=206](http://www.oracle-developer.net/display.php?id=206)

# php - 使用 PHP MySQL 和 paypal express checkout 记入用户帐户的最佳实践

> ID：14651429
> 
> 赞同：0
> 
> 时间：2013-02-01T17:06:51.927
> 
> 标签：php, sql, paypal, currency

我正在将 PayPal Express Checkout API 集成到数字商品/服务网站中。我解决了所有的技术问题，但现在我有一个理论上的问题 - 当交易完成并且我从 PayPal 获得确认时，存储来自 paypal 的确认并记入我用户帐户的最佳方式是什么？

贝宝库中的`ConfirmPayment()`函数从贝宝返回一个关联数组，包括交易 ID，并确认我的企业帐户中有用户的钱。

所以我的计划是，将该事务 ID 作为`unique`值存储在 SQL 表中，因此如果用户重新加载确认页面，然后重新调用`ConfirmPayment($token)`，我的 PHP 脚本不会再次记入他们的帐户，因为SQL 表将返回唯一 ID 错误。

聪明的程序员如何将最后的付款确认整合到他们的应用程序的其余部分？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:17:18.827

我会这样做：

保留您从 Paypal 收到的所有消息的完整日志。只是RAW数据应该没问题。然后超出这一点就不需要那么多的可追溯性。如果有任何事情发生，您可以检查日志。这真的不应该发生，如果您需要大量查看此日志以解决您遇到的任何问题，那么您会遇到不同类型的问题。这就是为什么我的建议是：不要花太多时间在上面，但要确保你有可追溯性（尽管非常粗略）。

* * *

如果用户重新加载确认页面，Paypal 将不会再向您发送消息。请记住，您应该只接受 Paypal 已验证的交易。用户不应该能够绕过 Paypal 来验证他自己的交易。

# python - 循环删除列表项

> ID：14651433
> 
> 赞同：1
> 
> 时间：2013-02-01T17:07:00.803
> 
> 标签：python, list, loops, pygame

我目前正在尝试使用 pygame 开发游戏，但我的一些列表存在一些问题。真的很简单，我希望镜头在屏幕外时被删除。我当前的代码可以完美运行，直到我拍摄不止一个。

当前代码：

```
#ManageShots
for i in range (len(ShotArray)):
    ShotArray[i].x += 10
    windowSurface.blit(ShotImage, ShotArray[i])
    if(ShotArray[i].x > WINDOWWIDTH):
        ShotArray.pop(i) 
```

错误信息：

```
ShotArray[i].x += 10
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:08:53.250

从列表中弹出一个项目会将该项目*之后*的所有内容移到一个位置。因此，您最终得到的索引`i`很容易超出范围。

循环后从列表中删除项目，或反向循环列表：

```
for shot in reversed(ShotArray):
    shot.x += 10
    windowSurface.blit(ShotImage, shot)
    if shot.x > WINDOWWIDTH:
        ShotArray.remove(shot) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:08:31.283

问题是`len(SortArray)`在循环开始时评估一次。但是，您可以通过调用来更改列表的长度`ShotArray.pop(i)`。

```
i = 0
while i < len(ShotArray):
    ShotArray[i].x += 10
    windowSurface.blit(ShotImage, ShotArray[i])
    if(ShotArray[i].x > WINDOWWIDTH):
        ShotArray.pop(i)
    else:
        i += 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T17:13:43.380

你可能想要这样的东西：

```
# update stuff
for shot in ShotArray:
    shot.x += 10
    windowSurface.blit(ShotImage, shot)

# replace the ShotArray with a list of visible shots
ShotArray[:] =  [shot for shot in ShotArray if shot.x < WINDOWWIDTH] 
```

不要更改您正在迭代的列表的长度，这会导致混乱。

# ios - 将应用程序限制为仅 iPad 1

> ID：14651437
> 
> 赞同：1
> 
> 时间：2013-02-01T17:07:03.287
> 
> 标签：ios, ipad, deployment, operating-system, limit

我有一个应用程序已经在商店里有一段时间了。我正在推出一款全新的应用程序来替换旧的应用程序，但它与原来的 iPad (iPad 1) 不兼容。我不想完全摆脱原来的应用程序，因为不管你信不信，仍然有很多人在 iPad 1 上运行它。有没有办法以某种方式将应用程序或应用程序商店设置为拥有较新 iPad 的用户只能在应用程序商店中看到新应用程序而不是旧应用程序？（它们有不同的标题、图标等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:12:30.437

编辑：提交新版本时，您似乎[无法更改已发布应用程序的功能。](http://oleb.net/blog/2011/12/uirequireddevicecapabilities-cannot-be-changed-in-app-updates/)这将排除我建议的第一种方法，只限制当前的部署目标。

您可能需要 iPad 1 上没有的设备功能，例如相机。

这相当于[`UIRequiredDeviceCapabilities`](http://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW3)在您的应用 plist 文件中设置为`front-facing-camera`.

如果前一个不起作用，您将拥有的另一个选择是将您的部署目标设置为 iOS 6——这也将排除 iPad 1s（以及所有运行 iOS 4 和 5 的设备）。

# django - django：使用字符串选择特定模型

> ID：14651438
> 
> 赞同：3
> 
> 时间：2013-02-01T17:07:05.920
> 
> 标签：django

我想要做的是能够使用模型的名称作为函数的输入，以便可以针对指定的模型执行对象方法。例如：

```
from app.models import model1, model2

def select_all_from_model(model_name):
    all = model_name.objects.all()
    return all

all = select_all_from_model('model1') 
```

`all = model_name.objects.all()`是一句废话。我需要一个模型对象，而不是字符串名称，才能使`objects.all()`选择起作用。如何根据 的字符串值加载模型对象`model_name`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:12:58.877

您可以使用 models.get_model() 功能：

```
>>> model_class = models.get_model('App', 'Model1')
>>> model_class.objects.all()
>>> [...] 
```

那就是如果您需要使用字符串。但是你可以在 python 中传递类。这是一个例子：

```
>>> from app.models import Model1
>>> select_all_from_model(Model1)
>>> [...] 
```

# javascript - Google Charts Annotated Time Line - 在缩放时调整 y 轴

> ID：14651439
> 
> 赞同：1
> 
> 时间：2013-02-01T17:07:15.157
> 
> 标签：javascript, google-visualization, annotatedtimeline

我在谷歌图表 API 中使用带[注释的时间线图。](http://code.google.com/apis/ajax/playground/?type=visualization#annotated_time_line)我有很长的数据线（20 年），数据范围从大约 0 到 900,000（见图）如果放大最近一年，则该集合的最大值仅为 400,000 左右。因此，当我们放大时，我不需要 y 轴一直到 900,000，而只需到 400,000。这样图表会更容易阅读。

我想要实现的是每次调整缩放时重新调整最大垂直轴值的图表。

![在此处输入图像描述](../Images/034aac58dc87bcb2a3473324b8209762.png)

放大最近一年：

![在此处输入图像描述](../Images/3a217bd7fe317d5b5486cc58200c8264.png)

在我开始破解之前，有没有人知道这样做的好方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:35:21.550

使用*scaleType* [配置选项](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline#Configuration_Options)。如果您有一个系列，请指定*最大化的值。*如果您有多个系列，请指定*allmaximized 。*此代码段适用于[代码游乐场](http://code.google.com/apis/ajax/playground/?type=visualization#annotated_time_line)：

```
 var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
      document.getElementById('visualization'));
  annotatedtimeline.draw(data, {'scaleType':'allmaximized'}); 
```

# vba - 在 Outlook 2010 的“新邮件消息”功能区中切换自定义按钮

> ID：14651440
> 
> 赞同：3
> 
> 时间：2013-02-01T17:07:16.907
> 
> 标签：vba, button, outlook, toggle, ribbon

我创建了一个新的自定义按钮，将敏感度设置为机密。

我希望按钮能够执行以下操作：

1.  每次按下按钮时切换设置（设置和取消设置机密标签）。
2.  当灵敏度设置当前设置为机密时突出显示（类似于设置“高重要性”标签的行为。

.

```
Sub setConfidential()

ActiveInspector.CurrentItem.Sensitivity = olConfidential

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:17:03.047

回复：每次按下按钮时切换设置（设置和取消设置机密标签）。

```
Sub ToggleSensitivity()
    if ActiveInspector.CurrentItem.Sensitivity = olConfidential then
        ActiveInspector.CurrentItem.Sensitivity = olNormal
    else
        ActiveInspector.CurrentItem.Sensitivity = olConfidential
    end if
End Sub 
```

# excel - 代码错误，无法弄清楚

> ID：14651451
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:07:58.200
> 
> 标签：excel, excel-2007, vba

修改后的代码：现在给出错误“下标超出范围”。

我遇到以下代码的问题。

此代码在同一文件夹中制作文件的多个副本。

除此之外，我在代码中添加了额外的语句，允许将新文件的“文件名”复制到已创建的新工作簿中的新工作表中。

在运行它给出一个错误：`application defined or object defined error`

谁能告诉我代码中缺少什么？非常感谢您的帮助。

```
 Sub CopyFile()
Dim i As Integer
Dim j As Integer
Dim Subfolder As String
Dim Sourcefile As String
Dim Targetfile As String
Dim targetwb As Workbook
Dim targetsheet As Worksheet
Dim myFSO As Object

Subfolder = "J:\Temp\Data\Report\"
Sourcefile = "Hospital .xls" 'The original file name
Set myFSO = CreateObject("Scripting.FileSystemObject")
'loop from A2 to A53
i = 2
Do While ActiveSheet.Cells(i, 1).Value <> Empty
'determine Targetfilename
Targetfile = Subfolder & ActiveSheet.Cells(i, 1).Value & ".xls"
'copy file
myFSO.CopyFile Subfolder & Sourcefile, Targetfile, True 'true will overwrite existing files
i = i + 1
Loop
Set myFSO = Nothing
targetwb = Workbooks(Targetfile)
targetsheet = targetwb("Sheet12")
j = 2
Do While targetsheet.Cells(j, 3).Value <> Empty
targetsheet.Cells(j, 3).copy
targetsheet.Cells(4).Paste
j = j + 1
Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:14:01.613

问题很可能与行和变量 columnCount 以及对“D”的引用有关。请参阅下面有关 .Cells 取值的评论。更新此以反映 columnCount 变量并将“D”更改为 4 以表示第 4 列又名“D”:)

```
dim columnCount as Integer
columnCount = 10

targetsheet.Cells(columnCount, 4).End(xlUp).PasteSpecial Transpose:=True 
```

# java - Java 和蓝牙——完全死了？

> ID：14651460
> 
> 赞同：1
> 
> 时间：2013-02-01T17:08:36.677
> 
> 标签：java, bluetooth, bluecove

我计划做一个程序，将短信从安卓手机发送到电脑。我认为使用蓝牙很简单，但没有。这些天我找不到任何材料。所有这些都是几年前的，似乎不起作用。

我发现了一些关于 Bluecove 的信息。我下载了库并包含在我的项目中。嗯，好像不是最新的。最新的是 2010 年（快照，2008 年稳定），甚至不能在 64 位系统上运行！

我还计划在未来进一步开发它，包括在 PC 上接听电话。有没有办法让蓝牙在这种情况下工作，或者我必须用互联网做一些技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:28:57.673

我通过将[这里](http://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.63/)的所有四个 jar 文件添加到项目中来使其工作。

# c++ - 将字符返回到while循环的函数

> ID：14651461
> 
> 赞同：-2
> 
> 时间：2013-02-01T17:08:39.673
> 
> 标签：c++, function, while-loop, character

我正在尝试编写一个计算程序，当它运行一次时，会询问用户是否希望进行另一次计算。这具有在主函数中的适当位置调用的单独函数的形式：

```
char repeatcalc(char y){

    cout << "Would you like to perform another calculation? [Y]es/[N]o" << endl;
    cin >> y;
    if(y == 'Y' || y == 'y'){
        return y == 'y';
    }
    else if(y == 'N' || y == 'n'){
        return y == 'n';
    }
    else{
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        repeatcalc(y);
    }
} 
```

这个想法是，用户点击一个按钮，函数返回一个“y”、一个“n”或重复自身。然后，这会反馈到 main 函数中的 while 循环，如果返回“y”则重复该循环，如果返回“n”则结束。

The repeat section in the function above works in the main code, as does the 'y' return, but when 'n' is selected, it seems to return a 'y' anyway.

我错过了一些明显的东西，但我无法弄清楚是什么！有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:16:37.110

将您的函数转换为返回布尔值。例如：

```
 if (y == 'Y' || y == 'y') return true; 
 if (y == 'N' || y == 'n') return false; 
```

...

```
return repeatcalc() ; 
```

是`y`一个局部 char 变量。这样函数就不需要参数了。你可以问简单`if (repeatcalc() ) reapeat;`

另外，请注意：`==`is 用于比较并返回 a `bool`，而您正在尝试进行评估：`return y='y';`with 在这种情况下只是`return 'y';`

# iphone - UIColletoinView 水平滚动与项目间间距

> ID：14651464
> 
> 赞同：5
> 
> 时间：2013-02-01T17:08:45.357
> 
> 标签：iphone, ios, ipad, uicollectionview

我正在为我的一些图像使用集合视图。

每个图像都应该以屏幕的大小显示，因此一个单元格具有屏幕的宽度。flowLayout的`minimumInterItemSpacing`值为 25。所以现在的问题是，如果我正在滚动，集合视图不会滚动到下一个图像的开头，而是滚动到 interItemSpacing 的开头。

让我们举个例子：

```
Image/Cell width = 320
CollectionView's interItemSpacing = 25 
```

如果我滚动一页，滚动视图内容偏移量为 320 而不是 345，这意味着第二个单元格不在屏幕中心。

如何解决这个问题？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:45:48.970

好的，我发现有 2 个选项可以实现正确的滚动。

`1\. UICollectionViewController size`

通过精确添加所需的值作为 interItemSpacing 来增加集合视图及其项目的大小。

这是一些代码：

```
- (void) setupCollectionView;
{
    PSTCollectionViewFlowLayout *flowLayout = [[PSTCollectionViewFlowLayout alloc] init];
    CGSize itemSize = self.view.bounds.size;
    itemSize.width +=25;
    [flowLayout setItemSize:itemSize];
    [flowLayout setScrollDirection:PSTCollectionViewScrollDirectionHorizontal];
    flowLayout.minimumInteritemSpacing = 0.0f;
    flowLayout.minimumLineSpacing = 0.0f;

    self.collectionView = [[PSTCollectionView alloc] initWithFrame:self.view.bounds
                                          collectionViewLayout:flowLayout];
    [self.collectionView registerClass:[AMDetailImageCell class]
        forCellWithReuseIdentifier:AMDetailImageCellIdentifier];
    self.collectionView.delegate = self;
    self.collectionView.dataSource = self;
    self.collectionView.pagingEnabled = YES;
    CGRect rectSize = self.view.bounds;
    rectSize.size.width +=25;
    self.collectionView.frame = rectSize;
    [self.view addSubview:self.collectionView];

    [self scrollToStartIndex]; 
```

}

`2\. SectionEdgeInset`

制作一页 = 一个部分并使用 sectionEdgeInset 将产生相同的解决方案，但 - 可以肯定 - 并不总是一个选项！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:56:16.353

我找到了一个解决方案，它涉及 UICollectionViewFlowLayout 的子类化。

我的 CollectionViewCell 大小为 302 X 457，我将最小行距设置为 18（每个单元格 9pix）

当您从该类扩展时，有一些方法需要被覆盖。其中之一是

*   (CGSize)collectionViewContentSize

在这种方法中，我需要将 UICollectionView 中的总宽度相加。这包括 ([datasource count] * widthOfCollectionViewCell) + ([datasource count] * 18)

这是我的自定义 UICollectionViewFlowLayout 方法....

```
-(id)init
{
    if((self = [super init])){

       self.itemSize = CGSizeMake(302, 457);
       self.sectionInset = UIEdgeInsetsMake(10, 10, 10, 10);
       self.minimumInteritemSpacing = 0.0f;
       self.minimumLineSpacing = 18.0f;
       [self setScrollDirection:UICollectionViewScrollDirectionHorizontal];
   }
    return self;
}

-(CGSize)collectionViewContentSize{
   return CGSizeMake((numCellsCount * 302)+(numCellsCount * 18), 457);
} 
```

这对我有用，所以我希望其他人觉得它有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:19:36.417

您还应该考虑 iterItemSpacing 来提供单元格宽度。尝试提供 cellWidth= 320-25=295。它应该工作。

# mysql - 语法错误--SELECT 语句

> ID：14651469
> 
> 赞同：0
> 
> 时间：2013-02-01T17:08:57.580
> 
> 标签：mysql, sql, syntax-error

我正在尝试打印位于 2 个位置的帐户列表。这是我输入的内容：

```
SELECT cust_id, account_id, product_cd 
from account 
SELECT name 
from branch 
where name = 'So. NH Branch' or name = 'Woburn Branch'; 
```

当我进行查询时，我收到以下消息：错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'SELECT name from branch 附近使用的正确语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:14:27.467

我想你想加入表格

```
SELECT  cust_id, account_id, product_cd 
from    account
        INNER JOIN branch 
            ON account.colName = branch.colName -- the relationship between
                                                -- the two tables
where   name IN ('So. NH Branch',  'Woburn Branch'); 
```

但查询的另一种解释是您要执行多个查询。这样做时，每个语句都应该用`semi-colon`

```
SELECT cust_id, account_id, product_cd 
from   account;

SELECT name 
from   branch 
where  name IN ('So. NH Branch',  'Woburn Branch'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:14:43.293

您想使用 JOIN。你可以试试

```
SELECT cust_id, account_id, product_cd, name
FROM account, branch
WHERE name = 'So. NH Branch' or name = 'Woburn Branch'; 
```

但这取决于您的架构是否会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:14:57.997

你这里有两条 SQL 语句，它们需要被拆分，或者合并成一条语句：

```
SELECT cust_id, account_id, product_cd 
from account;

SELECT name 
from branch 
where name = 'So. NH Branch' or name = 'Woburn Branch'; 
```

`;`SQL 解释器在找到第二个之前寻找一个`SELECT`。

# c++ - 使用递归将所有可能的组合（重复）作为数组中的值

> ID：14651471
> 
> 赞同：0
> 
> 时间：2013-02-01T17:09:00.440
> 
> 标签：c++, recursion, combinatorics, digits

我正在尝试解决一个问题，我需要在数字之间插入数学运算（在本例中为 +/-）或合并它们以获得请求的数字。

例如：`123456789 => 123+4-5+6-7+8-9 = 120`

我的概念基本上是在数组中生成不同的操作码组合并计算表达式直到它等于某个数字。

问题是我想不出一种方法来使用递归生成所有可能的数学运算组合。

这是代码：

```
#include <iostream>
#include <algorithm>

using namespace std;

enum {noop,opplus,opminus};//opcodes: 0,1,2

int applyOp(int opcode,int x, int y);
int calculate(int *digits,int *opcodes, int length);
void nextCombination();

int main()
{
    int digits[9] = {1,2,3,4,5,6,7,8,9};
    int wantedNumber = 100;

    int length = sizeof(digits)/sizeof(digits[0]);

    int opcodes[length-1];//math symbols
    fill_n(opcodes,length-1,0);//init

    while(calculate(digits,opcodes,length) != wantedNumber)
    {
        //recursive combination function here
    }

    return 0;
}
int applyOp(int opcode,int x, int y)
{
    int result = x;
    switch(opcode)
    {
        case noop://merge 2 digits together
            result = x*10 + y;
            break;
        case opminus:
            result -= y;
            break;
        case opplus:
        default:
            result += y;
            break;
    }
    return result;
}
int calculate(int *digits,int *opcodes, int length)
{
    int result = digits[0];
    for(int i = 0;i < length-1; ++i)//elem count
    {
        result = applyOp(opcodes[i],result,digits[i+1]);//left to right, no priority
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:37:08.287

关键是回溯。每一级递归处理一个数字；此外，你会想要停止你已经完成的递归。

最简单的方法是定义一个`Solver`类，它跟踪全局信息，如到目前为止生成的字符串和运行总数，并使递归函数成为成员。基本上是这样的：

```
class Solver
{
    std::string const input;
    int const target;

    std::string solution;
    int total;
    bool isSolved;

    void doSolve( std::string::const_iterator pos );
public:
    Solver( std::string const& input, int target )
        : input( input )
        , target( target )
    {
    }

    std::string solve()
    {
        total = 0;
        isSolved = false;
        doSolve( input.begin() );
        return isSolved
            ? solution
            : "no solution found";
    }
}; 
```

在`doSolve`中，你必须先检查你是否已经完成（`pos == input.end()`）：如果是，设置`isSolved = total == target` 并立即返回；否则，请尝试三种可能性，( `total = 10 * total + toDigit(*pos)`、`total += toDigit(*pos)`和`total -= toDigit(*pos)`)，每次保存原始 `total`and `solution`，将必要的文本添加到 ，并使用递增的`solution`调用。从递归调用返回时，如果，恢复和的先前值，并尝试下一个可能性。看到后立即返回，或者当所有三种可能性都已解决时。`doSolve``pos``! isSolved``total``solution``isSolved`

# php - 使用 PHP 和 mySQL，我需要连接两个表并将数据输入到现有行（更新行）

> ID：14651480
> 
> 赞同：2
> 
> 时间：2013-02-01T17:09:27.853
> 
> 标签：php, mysql, phpmyadmin, dreamweaver

我有其他页面可以很好地更新数据，所以我认为这与我的内部连接有关。

这两个表是：medArt，行 idMed_med 设置为 primary，artistArt，idLogin_art 设置为 primary，idMed_art 设置为外键 两个表都是 INNODB

这是我的查询，整个代码都在它下面，因此您可以根据需要查看我是如何设置变量的。

```
SELECT artistArt.idLogin_art, artistArt.titleFirst_art, 
       artistArt.medFirst_art, artistArt.wFirst_art, artistArt.hFirst_art, 
       artistArt.pxFirst_art, artistArt.imageFirst_art, medArt.idMed_med, 
       medArt.nameMed_med
FROM artistArt, medArt
WHERE artistArt.idMed_art = medArt.idMed_med AND artistArt.idLogin_art = colname 
```

代码：

```
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

mysql_select_db($database_connArt2013, $connArt2013);
$query_rsMedia = "SELECT * FROM medArt";
$rsMedia = mysql_query($query_rsMedia, $connArt2013) or die(mysql_error());
$row_rsMedia = mysql_fetch_assoc($rsMedia);
$totalRows_rsMedia = mysql_num_rows($rsMedia);

$colname_rsArtists = "1";
if (isset($_GET['idLogin_art'])) {
  $colname_rsArtists = $_GET['idLogin_art'];
}
mysql_select_db($database_connArt2013, $connArt2013);

$query_rsArtists = sprintf("
  SELECT artistArt.idLogin_art, artistArt.titleFirst_art, artistArt.medFirst_art,
         artistArt.wFirst_art, artistArt.hFirst_art, artistArt.pxFirst_art, 
         artistArt.imageFirst_art, medArt.idMed_med, medArt.nameMed_med 
  FROM artistArt, medArt WHERE artistArt.idMed_art = medArt.idMed_med 
    AND artistArt.idLogin_art = %s", GetSQLValueString($colname_rsArtists, "int"));

$rsArtists = mysql_query($query_rsArtists, $connArt2013) or die(mysql_error());
$row_rsArtists = mysql_fetch_assoc($rsArtists);
$totalRows_rsArtists = mysql_num_rows($rsArtists);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:16:04.467

你说：“*我没有收到错误，它只是不会发布。* ”——这是否意味着当你运行代码时，什么都没有显示？

您的代码以

```
$row_rsArtists = mysql_fetch_assoc($rsArtists);
$totalRows_rsArtists = mysql_num_rows($rsArtists); 
```

因此，没有可以显示表格内容的代码。 `$row_rsArtists`包含结果的第一行作为关联数组（要获取更多行，请`mysql_fetch_assoc()`在循环中调用。 `$totalRows_rsArtists`包含查询返回的行数。

为了在屏幕上显示某些内容，您需要`echo`在循环中获取一些结果行。

# python - 如何解决 PyQt 和 Py2exe 应用程序启动错误和问题？

> ID：14651482
> 
> 赞同：1
> 
> 时间：2013-02-01T17:09:29.873
> 
> 标签：python, dll, pyqt, py2exe

我使用 PyQt 构建了这个小应用程序，并使用 py2exe 使其可执行设置。在我的笔记本电脑上一切都很好，但是当我尝试将应用程序分发到其他机器时，它无法打开，在 .log 文件中出现以下错误。

```
Traceback (most recent call last):
  File "viewer.py", line 5, in <module>
  File "PyQt4\QtCore.pyo", line 12, in <module>
  File "PyQt4\QtCore.pyo", line 10, in __load
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

我尝试了很多但无法解决这个问题。请帮我 ！！

编辑 ：

这是 setup.py

```
#!/usr/bin/python
import sys
#C:\Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.21022.8_none_bcb86ed6ac711f91

#sys.path.append("C:\\Program Files\\Microsoft Visual Studio 9.0\\VC\\redist\\x86\\Microsoft.VC90.CRT")

import warnings
warnings.filterwarnings(action="ignore", message='the sets module is deprecated')
from distutils.core import setup
import py2exe

manifest = '''
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1"
manifestVersion="1.0">
<assemblyIdentity
version="0.64.1.0"
processorArchitecture="x86"
name="Controls"
type="win32"
/>
<description>Your Application</description>
<dependency>
<dependentAssembly>
<assemblyIdentity
    type="win32"
    name="Microsoft.Windows.Common-Controls"
    version="6.0.0.0"
    processorArchitecture="X86"
    publicKeyToken="6595b64144ccf1df"
    language="*"
/>
</dependentAssembly>
</dependency>
</assembly>
'''

'''
installs manifest and icon into the .exe
but icon is still needed as we open it
for the window icon (not just the .exe)
changelog and logo are included in dist
'''

sys.path.append('C:\\WINDOWS\\WinSxS\\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.21022.8_none_bcb86ed6ac711f91')

excludes = ["pywin", "pywin.debugger", "pywin.debugger.dbgcon",
            "pywin.dialogs", "pywin.dialogs.list"]

setup(
#options = {"py2exe": {"includes":["sip"],"dll_excludes": ["MSVCP90.dll"]}},
options = {"py2exe": {"typelibs":
                          # typelib for WMI
                          [('{565783C6-CB41-11D1-8B02-00600806D9B6}', 0, 1, 2)],
                          # create a compressed zip archive
                          "compressed": 1,
                          "optimize": 2,
                          "excludes": excludes,
                          "includes":["sip","PyQt4"]}},

    # The lib directory contains everything except the executables and the python dll.
    # Can include a subdirectory name.
    zipfile = "lib/shared.zip",

windows = [
    {
    "script": "viewer.py",
    #"icon_resources": [(1, "favicon.png")],
    #"other_resources": [(24,1,manifest)]
    }
    ],
    data_files=["msvcm90.dll","msvcp90.dll","msvcr90.dll"]

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:48:39.143

您应该发布您的 setup.py 以便我们查看它。无论如何，这种效果应该适用于您的 py2exe setup.py。您可能需要调整 bundle_files 和 zipfile 参数才能使用我们的设置。确保将“在此处插入 qt 路径”替换为 QT dll 的正确路径，并为“a.dll”、“b.dll”、“c.dll”等输入实际的 QT dll 名称。

设置.py：

```
# USAGE: 'python setup.py py2exe'
from distutils.core import setup
import py2exe, sys

sys.argv.append('py2exe')

setup(
    data_files=[
                ('.','viewer.ico']),
                ('insert qt path here', ['a.dll','b.dll', 'c.dll'])
               ],

    options={'py2exe':{
                       'bundle_files':   1, # 3 - Don't pack, 2 - Pack all but interpreter, 1 - pack all.
                       'unbuffered':     True,
                       'optimize':       2,
                       'compressed':     1
                      },
            }, 

    windows=[
             {
              'script':'viewer.py',
             },
            ],

    zipfile = None# None = All in EXE does not work with tcl/ttk gui's, Else 'shared.lib' make a lib file with name specified.
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T13:42:02.383

错误信息

```
 File "form1.pyc", line 11, in ?
  File "qt.pyc", line 9, in ?
  File "qt.pyc", line 7, in __load
ImportError: No module named sip 
```

解决方案

```
python setup.py py2exe --includes sip 
```

# iphone - 使用 JSON 将 NSData 发送到 WCF 服务

> ID：14651483
> 
> 赞同：1
> 
> 时间：2013-02-01T17:09:31.910
> 
> 标签：iphone, json, wcf, nsdata, nsjsonserialization

我正在尝试使用 WCF 服务将文件从 iPhone 上传到网站。WCF 服务有很多方法可以从 iPhone 上成功调用，除了这个。

```
[OperationContract]
[WebInvoke(Method = "POST",
   RequestFormat = WebMessageFormat.Json,
   ResponseFormat = WebMessageFormat.Json,
   BodyStyle = WebMessageBodyStyle.Bare,
   UriTemplate = "UploadFileBinary")]
UploadFileResponse jsonUploadFile(UploadFileRequest request); 
```

UploadFileRequest 分别包含 FileBinaryData 和 FileName 的 byte[] 和 string。

问题是我将文件数据作为 NSData 对象并且不知道如何将其转换为 JSON 兼容格式。我尝试了一些建议，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:40:02.487

答案是更改 WCF 数据协定并添加字符串类型的数据成员。

在 iPhone 端将 NSData 编码为 base64 字符串，在 WCF 端解码字符串并获取字节数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:48:57.657

您是否正在寻找由您的数据表示的 JSON 字符串？如果是这样...

```
NSString *string = [NSString stringWithUTF8String:[data bytes]]; 
```

或者您是否正在寻找 JSON 解析后代表的真实 NSObject？这也很容易...

```
NSError *error;
id parse = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error]; 
```

# google-chrome-extension - IE 或 FF 启动器

> ID：14651484
> 
> 赞同：0
> 
> 时间：2013-02-01T17:09:39.040
> 
> 标签：google-chrome-extension

我想知道是否有可能开发一个允许打开与另一个浏览器的链接的扩展：如果在 Chrome 中我单击在此类扩展中配置的链接，它会使用此链接打开 FF 或 IE。

我没有找到任何扩展（除了在 chrome 选项卡中有框架的扩展），这是否意味着这样做存在技术限制？此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:35:21.470

我为 FF 做了一些可以修改来做到这一点的东西。

我已经使用了从扩展执行 shell 命令的能力，并将调用配置为启动 3rd 方应用程序。

[在nsIProcess](https://developer.mozilla.org/en/nsIProcess)上查找示例

在 chrome 中，您可以使用 NPAPI 插件：[http ://code.google.com/chrome/extensions/npapi.html](http://code.google.com/chrome/extensions/npapi.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:33:15.517

不幸的是，我认为 kms 说您不能在 Chrome 扩展程序中执行本机代码是正确的，因此必须将您的扩展程序与 NPAPI 插件配对并让它们相互通信。这是我做过的最困难的编程任务之一，尽管 NPAPI 插件基于[FireBreath](http://firebreath.org)变得更容易，所以至少我不需要编写太多 C++。

更新：自 2014 年左右以来，Native Messaging 包含在 Chrome 的 Web 扩展 API 中，幸运的是，NPAPI 消失了。

# svg - SVG 投影 - 不透明度、feOffset 和 viewBox 困难

> ID：14651486
> 
> 赞同：4
> 
> 时间：2013-02-01T17:10:06.347
> 
> 标签：svg, vector-graphics, svg-filters

我想对 SVG 文件应用一个简单的阴影。因为这真的是我第一次深入研究 SVG 过滤器，所以我被卡住了，找不到（可能很简单）问题的解决方案：为什么`feColorMatrix`不应用于阴影？

这是过滤器：

```
<defs>
  <filter id="drop-shadow" filterUnits="userSpaceOnUse" width="120" height="120">
    <feGaussianBlur in="SourceAlpha" result="blur-out" stdDeviation="1" />
    <feOffset in="blur-out" result="the-shadow" dx="0" dy="1"/> 
    <feColorMatrix in="the-shadow" result="color-out" type="matrix"
      values="0 0 0 0   0
              0 0 0 0   0 
              0 0 0 0   0 
              0 0 0 0.1 0"/>
    <feBlend in="SourceGraphic" in2="the-shadow" mode="normal"/>
  </filter>
</defs> 
```

此外，FireFox 是否有可能忽略`feOffset`？还是语法有问题？

另外：在所有浏览器中，投影似乎在顶部和左侧被剪掉。svg（在`img`标签中）是 22px x 22px 大，我已经放大了`viewBox`：

```
<svg version="1.1" id="Layer_1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
  y="0px" width="22px" height="22px" viewBox="0 0 24 24" enable-background="new 0 0 24 24"
xml:space="preserve"> 
```

但仍然没有运气。在我的 CSS 文件中，`img`没有设置宽度或高度，所以我相信它与 SVG 有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T17:48:32.167

1）您的过滤区域可能太小。您可以放大默认值（尽管默认值：（-10%、-10%、120%、120%）通常对于正常的投影就足够了。）

2）另外——正如罗伯特提到的——你的最终过滤器没有正确连接。

这是一个似乎在跨浏览器中始终有效的版本 - 被夸大了，因此您可以清楚地看到。

```
 <filter id="drop-shadow" x="-20%" y="-20%" width="140%" height="140%">
    <feGaussianBlur in="SourceAlpha" result="blur-out" stdDeviation="2" />
    <feOffset in="blur-out" result="the-shadow" dx="0" dy="5"/> 
    <feColorMatrix in="the-shadow" result="color-out" type="matrix"
      values="0 0 0 0   0
              0 0 0 0   0 
              0 0 0 0   0 
              0 0 0 .5 0"/>
    <feBlend in="SourceGraphic" in2="color-out" mode="normal"/>
  </filter>
</defs> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:47:16.793

您的 feBlend 不采用颜色输出的 feColorMatrix 的输出，它采用 feOffset 的输出，因此 feColorMatrix 被忽略。

# android - 布局中的多个错误。 无法解析或不是字段

> ID：14651487
> 
> 赞同：0
> 
> 时间：2013-02-01T17:10:05.570
> 
> 标签：android

在运行温度转换器应用程序时...在 TemperatureConverter.java 的以下行中

```
setContentView(R.layout.main); 
text = (EditText) findViewById(R.id.editText1); 
RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0); 
RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1); 
```

我收到以下 4 个错误：

*   main 无法解析或不是字段
*   editText1 无法解析或不是字段
*   radio0 无法解析或不是字段
*   radio1 无法解析或不是字段

请帮我解决这些错误。我将此作为我的作业项目。所以请......下面给出了应用程序的整个源代码。

```
1.main.xml

<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/myshape"
android:orientation="vertical" > 

<EditText 
android:id="@+id/editText1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:inputType="numberSigned" > 
<requestFocus/>
</EditText> 

<RadioGroup 
android:id="@+id/radioGroup1"
android:layout_width="match_parent"
android:layout_height="wrap_content" > 

<RadioButton 
android:id="@+id/radio0"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:checked="true"
android:text="@string/celsius" > 
</RadioButton> 

<RadioButton 
android:id="@+id/radio1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/fahrenheit" > 
</RadioButton> 
</RadioGroup> 

<Button 
android:id="@+id/button1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/calc" 
android:onClick="myClickHandler"> 
</Button> 

</LinearLayout>

3.)  res/drawable/myshape.xml:
    <?xml version="1.0" encoding="UTF-8"?> 
<shape 
xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle"> 
<stroke 
android:width="2dp"
android:color="#FFFFFFFF" /> 
<gradient 
android:endColor="#DDBBBBBB"
android:startColor="#DD777777"
android:angle="90" /> 
<corners 
android:bottomRightRadius="7dp"
android:bottomLeftRadius="7dp"
android:topLeftRadius="7dp"
android:topRightRadius="7dp" /> 
</shape>

4.) res/values/strings.xml:

<resources> 

<string name="hello_world">Hello world!</string> 
<string name="menu_settings">Settings</string> 
<string name="title_activity_convert_temperture_example">ConvertTempertureExample</string> 
<string name="app_name">Temparature Converter</string> 
<color name="myColor">#3399CC</color> 
<string name="myClickHandler">myClickHandler</string> 
<string name="celsius">to Celsius</string> 
<string name="fahrenheit">to Fahrenheit</string> 
<string name="calc">Calculate</string> 

</resources>

5.) TemperatureConverter.java file 
package com.example.TemperatureConverter; 
import android.app.Activity; 
import android.os.Bundle; 
import android.view.View; 
import android.widget.EditText; 
import android.widget.RadioButton;

import android.widget.RadioGroup; 
import android.widget.Toast; 
   import android.R;
public class TempertureConverter extends Activity 
{ 
private EditText text; 

@Override
public void onCreate(Bundle savedInstanceState)
 { 
super.onCreate(savedInstanceState); 
setContentView(R.layout.main); 
text = (EditText) findViewById(R.id.editText1); 

} 

// This method is called at button click because we assigned the name to the 
// "On Click property" of the button 
public void myClickHandler(View view) 
{ 
        switch (view.getId()) 
       { 
        case R.id.button1: 
RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0); 
RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1); 
if (text.getText().length() == 0) 
{ 
 Toast.makeText(this, "Please enter a valid number", 
                                Toast.LENGTH_LONG).show(); 
             return; 
} 

float inputValue = Float.parseFloat(text.getText().toString()); 
if (celsiusButton.isChecked())
 { 
text.setText(String 
.valueOf(convertFahrenheitToCelsius(inputValue))); 
celsiusButton.setChecked(false); 
fahrenheitButton.setChecked(true); 
} else { 
text.setText(String 
.valueOf(convertCelsiusToFahrenheit(inputValue))); 
fahrenheitButton.setChecked(false); 
celsiusButton.setChecked(true); 
} 
break; 
} 
} 

 // Converts to celsius 
private float convertFahrenheitToCelsius(float fahrenheit) 
{ 
return ((fahrenheit - 32) * 5 / 9); 
} 

 // Converts to fahrenheit 
private float convertCelsiusToFahrenheit(float celsius)
 { 
return ((celsius * 9) / 5) + 32; 
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:22:47.673

您正在导入错误的 R 文件：

```
import android.R; 
```

从您的代码中删除上述行并将其替换为您项目的 R 文件的导入（可能是 com.example.TemperatureConverter.R）

# c++ - 用于解析 C 类型声明的库？

> ID：14651491
> 
> 赞同：3
> 
> 时间：2013-02-01T17:10:21.097
> 
> 标签：c++, c, parsing, cdecl

我正在尝试找到一个开源库（用`C`或编写`C++`）来帮助我解析任意`C/C++`类型声明（例如声明，如`void *(*(*foo[])( int, void * [] ))[123]`），然后我将使用元模型。

**有人可以推荐一个开源`C/C++`类型声明解析库吗？**

注意：我不能使用 GPL 许可代码（如该`cdecl`工具），因为这是用于封闭源代码的应用程序，我希望为我自己编写的内容提供更强大的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:59:27.637

解析 C 是出了名的困难，并且为了做你想做的事，你可能需要名称和类型解析。需要有一个完整的编译器前端才能做到这一点；实际上，您甚至需要预处理器，因为您将阅读的代码将包含预处理器指令。这些设备需要大量的工作。你是对的，除非你有很多空闲时间，否则你真的不想自己写一个。

您现实的选择是开源包，例如 GCC（很难为您的任务扭曲）、GCCXML（希望从格式良好的程序中生成声明）或 Clang（类似地）；Eclipse CDT 有一个 C 解析器（类似地）。我不能说这些是否有让你满意的 API 或许可证。闭源包可能更符合你的需求；EDG 提供 C 和 C++ 前端（仍然希望只处理完全格式良好的程序），我的公司（语义设计）也通过我们的 DMS 软件再工程工具包提供。

在这组中，只有 DMS 可能使单独解析类型声明的能力变得容易；它可以解析其语法的任何非终结符（甚至[包括模棱两可的](https://stackoverflow.com/questions/243383/why-cant-c-be-parsed-with-a-lr1-parser/1004737#1004737)）。更重要的是，如果你真的想“去一个元模型”，你可能想要解析一个声明，并确定子类型/引用类型（例如，如果它使用 typedef），所以你想要结合完整的解析使用名称/类型解析来提供背景定义，然后解析您关心的特定声明，然后使用背景定义提供的符号表上下文对特定声明进行名称和类型解析。DMS 机器提供了所有这些功能。

# mongodb - db.stats()/collections number & db.getCollectionNames() count 之间的差异

> ID：14651497
> 
> 赞同：1
> 
> 时间：2013-02-01T17:10:35.773
> 
> 标签：mongodb, mongodb-shell

我正在`mongodb-shell`尝试了解`mongodb`，并注意到`db.stats()`显示的集合数量比显示的数量多 1`db.getCollectionNames()`

这是示例：

```
> db.stats();
{   
  "db" : "learn",
  "collections" : 6,
  "objects" : 47, 
  ...
  ...

  "ok" : 1 
}   

> db.getCollectionNames();
[ "hit_stats", "hits", "system.indexes", "system.profile", "unicorns" ] 
```

所以`db.stats`说有**6 个集合**，其中 as`db.getCollectionNames`仅列出**5 个集合名称**。为什么会出现这种差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:08:36.663

您会看到这种差异，因为`system.namespaces`存储集合信息的集合不包括其自身。`items`带有 2 个集合（和）的示例`user`：

```
> db.system.namespaces.find()
{ "name" : "test.system.indexes" }
{ "name" : "test.items.$_id_" }      // index
{ "name" : "test.items" }
{ "name" : "test.users.$_id_" }      // index
{ "name" : "test.users" }

> db.stats()['collections']
4

> db.getCollectionNames()
[ "items", "system.indexes", "users" ] 
```

如您所见`system.namespaces`，不包括自身。`db.stats()`确实将其包含在其计算中，因此存在 1 个集合差异。希望这是有道理的。

另请参阅这些错误报告[SERVER-1162](https://jira.mongodb.org/browse/SERVER-1162)和[SERVER-1308](https://jira.mongodb.org/browse/SERVER-1308)。

# java - 比较相似的字符串，使用 levenstein 编辑距离，遇到了问题

> ID：14651499
> 
> 赞同：0
> 
> 时间：2013-02-01T17:10:40.250
> 
> 标签：java, string

我正在使用 levenstein 编辑距离来查找两个字符串的相似程度。这两个字符串是这样的。如果有的话，第一个是两者中较长的一个；它也是我希望比较另一个的非截断非修改字符串。第二个字符串可能在末尾被截断，并且缺少字符。可以有多个唯一的字符串一和字符串二。

我读到了第二个字符串列表，每个字符串都包含在一行中，格式为“[字符串二] - $0.00”，所以它是字符串二加上一个空格、一个破折号、一个空格，然后是一个价格。

所以我有一个第二个字符串列表（格式），我有两个选项。删除价格和“ - ”或保留在那里。

*   如果我删除它。我在每个字符串中读取两个并使用分隔符“$”对其进行标记。我不知道任何字符串 2 有多长，所以我必须执行 stringtwo.removeAll("-") 以摆脱破折号，然后为空白区域执行 .trim() 。好吧，如果字符串 2 中有破折号，它也会被非自愿删除。所以有了这个，我得到了精确的字符串（levenstein = 0），截断但仍然精确的字符串（字符串在长度字符串 1 - levenstein 之前是相同的），截断并缺少整数数量的破折号（字符串在几个地方之间相同破折号，如果被截断，最后也缺少），或者没有被截断但缺少整数个破折号。

*   如果我离开它。仍然在每个字符串中读取两个并使用分隔符“$”进行标记。所以现在我有了字符串二“[字符串二]-”的这种格式。所以所有 levenstein 距离都会减少 3。这里的问题是，如果我有一个字符串 1 Ex。“dog food is yummy”，我尝试比较的字符串二是“dog food is yum -”，levD = 3 但这与字符串 2“dog food is yum -”的 levD 相同。

如您所见，这两个选项都会产生问题。似乎我无法在我的程序中克服这些问题来尝试将字符串二的输入列表与我的字符串列表匹配。

谁能看到更好的方法，是否有任何其他字符串比较器可以用来减少问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:33:54.827

试试这个：应该在每个字符串中找到的最后一个“-”处截断字符串，同时保持字符串的其余部分完好无损。

```
StringTwo.substring(0, StringTwo.lastIndexOf("-")).trim(); 
```

这些字符串操作可能很昂贵，因此如果您使用大量字符串，您可能会考虑其他优化。

这个解决方案也很脆弱，因为它硬编码值以确定在哪里修剪代码。这可以在别处定义并传入，因此它可以变化。

一旦你的工作相对良好和安全，接下来尝试查看来自 Apache 的 StringUtils，它具有更广泛的字符串操作。

```
org.apache.commons.lang.StringUtils from Apache Commons Lang 
```

# mongodb - MongoDB $ 运算符

> ID：14651500
> 
> 赞同：0
> 
> 时间：2013-02-01T17:10:40.480
> 
> 标签：mongodb, mongoose

我有一个多级架构，我正在尝试使用 $ 运算符将元素添加到深层列表中。

我的架构看起来像这样，我正在尝试将对象添加到特定的 cList：

```
var cSchema = mongoose.Schema({c:String,
    cList[
       {
         d1:String
         d2:String   
       }
    ]
});

var bSchema = mongoose.Schema({c:String,
    b:String,
    bList:[cSchema]
});

var aSchema = mongoose.Schema({
    a:String,
    aList:[bSchema]
}); 
```

我尝试运行以下命令，但 count 始终返回 0：

```
Model.update( {_id:req.aid, "aList._id":req.params.bid, "bList.$.cList._id":req.params.cid}, 
              {'$addToSet' : {'aList.$.bList.$.cList': req.body}}, 
              function(err,count){

              }
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:19:59.243

[$ 运算符](http://docs.mongodb.org/manual/reference/operator/positional/#_S_)用于更新运算符对象（ 的第二个参数）`update`，*而不是*查询选择器（第一个参数）。在查询选择器中，您*应该可以*使用`aList.bList.cList._id`，这将`aList.$.bList.$.cList`对应于嵌入`cList`在更新运算符中的第一个匹配元素。

**编辑：**

`$`当前不支持嵌套位置 ( ) 运算符匹配。[这张票](https://jira.mongodb.org/browse/SERVER-831)显示了很久以前（2010 年！）对该功能的需求，但显然 mongoDB 中的低级代码并没有使这成为可能。似乎 10gen 有望在 2.6 版本中获得此功能。

看起来您必须单独查询和更新才能使用当前架构实现此目的，或者可能将架构更改为更平坦。

# c# - 将 GUI 从 C# 转换为 Java

> ID：14651503
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:10:43.930
> 
> 标签：c#, java, swing, user-interface, layout-manager

我正在尝试使用布局管理器将我目前在 C# 中拥有的表单转换为 Java。事实证明这是一场噩梦。

我试过设置组件的大小，但是没有区别。此外，我无法让标签和文本框彼此靠近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:12:59.627

对于所有按钮和文本字段，只需将 then 放入其中只有一个项目的面板中。这将阻止按钮/文本字段填充布局中的整个空间。

除此之外，您似乎唯一需要做的就是在整个东西周围留出一点边距，这样您的物品就不会正好靠在窗户的边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:18:24.280

尝试`GridBagLayout`代替`GridLayout`. `GridLayout`强制所有组件大小相同。

另请参阅`javax.swing.Box`，将标签-文本字段对放在一个窗格中。

# sql - 试图将行扁平化为列

> ID：14651511
> 
> 赞同：25
> 
> 时间：2013-02-01T17:11:20.500
> 
> 标签：sql, common-table-expression

我在一个表中有一组具有 id 的行。我正在尝试将其展平为具有多列的行。我几乎可以肯定我已经用 cte 和分区做到了这一点。

我已经使用 cte 删除重复数据，并且我认为我已经做了类似于我在这里想要完成的事情。我能够提出可行的解决方案（如下所列），但仍然觉得应该提供更优雅的解决方案。

```
CREATE TABLE #MyTable ( RowID int , field VARCHAR(10), value  VARCHAR(10))  

INSERT INTO #MyTable ( RowID, field, value ) VALUES  ( 1, 'first', 'neil' )

INSERT INTO #MyTable ( RowID, field, value ) VALUES  ( 2, 'first', 'bob'  )

INSERT INTO #MyTable ( RowID, field, value ) VALUES  ( 3, 'first', 'tom'  )

INSERT INTO #MyTable ( RowID, field, value ) VALUES  ( 1, 'last', 'young' )

INSERT INTO #MyTable ( RowID, field, value ) VALUES  ( 2, 'last', 'dylan' )

INSERT INTO #MyTable ( RowID, field, value ) VALUES  ( 3, 'last', 'petty' )

SELECT * FROM #mytable 
```

--尝试使用 cte/partition 完成此操作：

```
SELECT rowid, 
   [first] = (Select value FROM #mytable where field = 'first' and rowid = t.rowid), 
   [last] = (Select value FROM #mytable where field = 'last' and rowid = t.rowid)
FROM #mytable t
GROUP BY rowid 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-01T17:21:00.357

这种数据转换称为[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 在 SQL Server 2005+ 中有一个函数可以执行这个过程。：

```
select *
from
(
  SELECT * 
  FROM mytable
) src
pivot
(
  max(value)
  for field in (first, last)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/cf727/2)。

或者您可以使用带有`CASE`表达式的聚合函数：

```
select rowid,
  max(case when field = 'first' then value end) first,
  max(case when field = 'last' then value end) last
from MyTable
group by rowid 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/cf727/6)。

您还可以在表上使用多个连接：

```
select t1.rowid,
  t1.value first,
  t2.value last
from mytable t1
left join mytable t2
  on t1.rowid = t2.rowid
  and t2.field = 'last'
where t1.field = 'first' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/cf727/8)

所有版本的结果都是一样的：

```
| ROWID | FIRST |  LAST |
-------------------------
|     1 |  neil | young |
|     2 |   bob | dylan |
|     3 |   tom | petty | 
```

# mysql - 即使有看似正确的索引和足够的内存，查询运行时间也太长

> ID：14651512
> 
> 赞同：0
> 
> 时间：2013-02-01T17:11:28.743
> 
> 标签：mysql, query-optimization

我有一个有 300 万行和 6 列的表。

### 表结构：

```
| Sample | CREATE TABLE `sample` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `FileMD5` varchar(32) NOT NULL,
  `NoCsumMD5` varchar(32) NOT NULL,
  `SectMD5` varchar(32) NOT NULL,
  `SectNoResMD5` varchar(32) NOT NULL,
  `ImpMD5` varchar(32) NOT NULL,
  `Overlay` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`ID`),
  KEY `FileMD5` (`FileMD5`),
  KEY `NoCsumMD5` (`NoCsumMD5`)
) ENGINE=InnoDB AUTO_INCREMENT=3073630 DEFAULT CHARSET=latin1 |
```

### 临时表值：

```
`mysql> SHOW VARIABLES LIKE 'tmp_table_size';
+----------------+----------+
| Variable_name  | Value    |
+----------------+----------+
| tmp_table_size | 16777216 |
+----------------+----------+
1 row in set (0.00 sec)
mysql> SHOW VARIABLES LIKE 'max_heap_table_size';
+---------------------+----------+
| Variable_name       | Value    |
+---------------------+----------+
| max_heap_table_size | 16777216 |
+---------------------+----------+
1 row in set (0.00 sec)`
```

### `我的查询`

 ````
mysql> explain SELECT NoCsumMD5,Count(FileMD5) 
FROM Sample GROUP BY NoCsumMD5 
HAVING Count(FileMD5) > 10 ORDER BY Count(FileMD5) Desc ;
+----+-------------+--------+-------+---------------+-----------+---------+------+---------+---------------------------------+
| id | select_type | table  | type  | possible_keys | key       | key_len | ref  | rows    | Extra                           |
+----+-------------+--------+-------+---------------+-----------+---------+------+---------+---------------------------------+
|  1 | SIMPLE      | Sample | index | NULL          | NoCsumMD5 | 34      | NULL | 2928042 | Using temporary; Using filesort |
+----+-------------+--------+-------+---------------+-----------+---------+------+---------+---------------------------------+ 
```

### 如何优化此查询。即使在 10 分钟后，它也不会产生任何输出。

我觉得我已经索引了正确的列并为临时表提供了足够的内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:23:05.943

我不确定这是否会有所帮助，但 MySQL 一次只能使用一个索引，因此在两者上创建索引可能会有所帮助`FileMD5`和`NoCsumMD5`：

```
KEY `someName` (`NoCsumMD5`, `FileMD5`), 
```

以下是[有关多列索引的一些信息](https://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)：

> MySQL 可以将多列索引用于测试索引中所有列的查询，或者只测试第一列、前两列、前三列等的查询。如果您在索引定义中以正确的顺序指定列，则单个复合索引可以加快对同一张表的多种查询。

简短的版本是索引中列的顺序很重要，因为 MySQL 只能按该顺序使用索引（例如，在我上面给出的索引中，它可以 test `NoCsumMD5`，然后使用 缩小结果`FileMD5`）。

不过，我不确定它对这个查询有多大帮助，因为你关心的只是`FileMD5`是否`NULL`..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:44:26.680

由于`FileMD5`在您的表定义中不是 NULL，因此可以简化查询，并且您不需要@brendan-long 建议的复合索引（NoCsumMD5 索引就足够了）：

```
SELECT NoCsumMD5, Count(*) as cnt 
FROM Sample
GROUP BY NoCsumMD5 
HAVING cnt > 10
ORDER BY cnt DESC; 
````

# build-process - TFS 2010 中的构建过程

> ID：14651513
> 
> 赞同：0
> 
> 时间：2013-02-01T17:11:30.100
> 
> 标签：build-process, build-automation

我读过关于构建自动化的文章，它看起来很简单，但我真的不确定参数化构建。我相信，必须有一个 xml 文件。

当我们说构建是自动化的时，我相信这意味着我们的代码/二进制文件位于测试环境中。并且所有与应用程序相关的设置也将只需单击构建和推送即可配置。

需要哪些工具？什么是 MSBuild？

请给它一些光。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:52:27.423

MSBuild 是您使用命令行工具运行的 exe，并将项目文件 (.csproj) 传递给它，正如您所说，它是一个 XML 文件，它具有您配置所需的所有说明。

我创建了一系列视频，描述了如何创建简单的 MSBuild 任务以及如何组织任务等，有关更多信息，请单击以下链接：

[MSBuild 教程](http://mohamedradwan.wordpress.com/2010/10/15/msbuild-tutorial/)

*   **MSBuild 是 exe**

![在此处输入图像描述](../Images/27f7e5c481653ab1b6ded2b282a87dee.png)

*   **从命令行运行 MSBuild 时**

![在此处输入图像描述](../Images/8ac399742bb9a633e5d74ac456e6c183.png)

*   **您将需要卸载项目，以便您可以编辑 (.csproj) 或项目文件**

![在此处输入图像描述](../Images/21db80ed9b4a062f08059ee47f2d17a9.png)

*   **(.csproj) 或项目文件**

![在此处输入图像描述](../Images/f851d755ce3a1dbd4fd27d3313020fd6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:38:41.120

您在询问构建自动化，并且通过您的标签提到 TFS 2010 如果是这样，那么您只需要对 msbuild 有一个粗略的了解即可开始。它最终称为编译器，但总的来说，您需要它上面的步骤，即构建模板和定义，以及如何设置代理和控制器。

[这](http://www.woodwardweb.com/talks/tsugve/TeamBuild2010.pdf)是 Martin Woodward 的一个很好的概述文档，它应该足以让你弄清楚事情，或者提出更具体的问题

# java - 可以将 IntelliJ 配置为在不使用快捷方式的情况下调用 SmartType 代码完成吗？

> ID：14651514
> 
> 赞同：6
> 
> 时间：2013-02-01T17:11:31.973
> 
> 标签：java, intellij-idea

现在 IntelliJ 会在我输入时立即弹出一个框，其中包含代码完成建议。然而，这些建议只是“基本”，而不是像我使用 (Ctrl+Shift+Space) 快捷方式调用 SmartType 完成时那样“智能”。有没有办法将 IntelliJ 配置为在我键入时自动调用 SmartType 完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:40:22.830

这是不可能的。没有人要求，它只提供了几个变种，它可能会提示你不想自动写什么，并且在空格和点上自动完成时会产生意想不到的结果。

基本的自动完成已经设计为在可能的情况下在顶部包含智能变体。

# ruby-on-rails - 两个模型之间的关联 rails 3

> ID：14651515
> 
> 赞同：0
> 
> 时间：2013-02-01T17:11:32.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, associations

这应该有点简单，但似乎无法掌握关联。

我正在使用nested_form 和回形针。我有一个名为 photo 的模型来存储所有图像和一个帖子模型。我正在尝试显示与相关帖子关联的照片，但在渲染视图时出现“未定义的方法头像”。

```
class Post < ActiveRecord::Base
has_many :photos, :dependent => :destroy
accepts_nested_attributes_for :photos
attr_accessible :title, :comments, :photo_id, :avatar, :photos_attributes
end

Class Photo < ActiveRecord::Base
belongs_to :post
attr_accessible :avatar, :post_id
has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" }
end 
```

控制器

```
def new
@post = Post.new
@post.photos.build
end 
```

所以我的印象是，当建立一个帖子时，帖子和照片模型之间会建立关联吗？是对的吗？

所以当我在视图中调用它时，我得到了未定义的方法，谁能告诉我哪里出错了

```
<% @posts.each do |f| %>
<ul>
 <li><%= f.title %></li>
 <li><%= f.department.name %></li>
 <li><%= image_tag f.avatar.url(:thumb) %></li>
 <li><%= link_to "Delete Post", post_path(f.id), :confirm => "Are you sure?", :method => :delete %></li>
</ul>
<% end %> 
```

我试过了

```
<%= image_tag f.photo.avatar.url(:thumb) %> 
```

但这也不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:27:51.563

可能是您创建错误的照片。

在这里您可以看到表单的外观：[使用回形针的嵌套表单](https://stackoverflow.com/questions/5851013/nested-form-using-paperclip)

而且`Post` `has_many :photos`，所以它必须是somth。像

```
<% @posts.each do |f| %>
....

 <% f.photos.each do |photo| %>
   <%= image_tag photo.avatar.url(:thumb) %>
 <% end %>

...
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:47:30.817

当我使用嵌套属性时，我遵循三个步骤。首先，在父模型中你可以使用accepts_nested_attributes_for：

```
Class Post
  has_many :photos, dependent: :destroy
  accepts_nested_attributes_for :photos
  attr_accessible :photos_attributes
end 
```

其次，您可以为照片合并一个嵌套表单，以便您可以为该特定帖子设置照片的属性：

```
<%= form_for(@post) do |f| %>
  <%= f.fields_for :photos do |p| %>
  ...rest of form here... 
```

第三，您可以通过post模型中的新动作创建照片：

```
Class UserController
  def new
    @user = User.new(photos: Photo.new)
  end
end 
```

最后一步很重要。如果您不这样做，否则您将看不到用户表单中的照片字段。如果您按照这些步骤操作，您应该能够在用户表单中设置照片和用户的所有属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:24:22.400

我认为在您的控制器中，您应该首先定义`post`您要关联的对象：

```
 def new
   @post = Post.find(params[:post_id]
   @photo = @post.photos.build

  ....
  end 
```

的`create`动作也是如此`PhotosController`。

# php - 限制服务器访问

> ID：14651522
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:12:20.080
> 
> 标签：php, linux, web-services, ubuntu

我最近开始在家里运行我自己的 linux (Ubuntu) Web 服务器，到目前为止没有任何问题。我正在通过家用无线路由器运行服务器，服务器的 IP 地址是 XXX.XXX.1.7

我已经存储了一些文件 XXX.XXX.1.7/myFiles/Data 并且我可以看到所有文件而无需通过 fileZilla 进行 FTP

当我从家庭网络外部运行服务器时，我只需将我的 IP 地址输入为 myIP#.XXX/myFiles/Data

这就是问题所在，我不希望其他人能够在未经许可的情况下从我的家庭网络外部访问我的服务器文件，但我确实希望他们能够访问该网站，而不是我的文件......我该怎么做要求输入密码或阻止所有人在未经适当许可的情况下查看这些文件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:26:18.090

如果您使用 Apache，您可以使用`.htaccess`

简单的谷歌搜索我发现了一篇文章如何做到这一点。您可以添加多个用户，稍后您不希望该人拥有访问权限，您可以删除他们的用户和密码。

[http://www.htaccesstools.com/articles/password-protection/](http://www.htaccesstools.com/articles/password-protection/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T18:10:12.697

考虑到 suphp 一个 suexec 模块到 apache 之后为您的网站创建一个用户不要忘记给他密码 :) （每个网站的用户）

安装见谷歌

并拒绝访问您的文件夹为您的主目录设置密码

# go - GC 收集时释放 C 指针

> ID：14651526
> 
> 赞同：3
> 
> 时间：2013-02-01T17:12:37.823
> 
> 标签：go

我有一个与 C 库接口的包。现在我需要在 Go 结构中存储一个指向 C 结构的指针

```
type A struct {
  s *C.struct_b
} 
```

显然，这个指针需要在 GC 收集结构之前释放。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T18:15:48.860

最好的办法是尽可能将 C 结构复制到受控内存中。

```
var ns C.struct_b
ns = *A.s
A.s = &ns 
```

显然，这并不适用于所有情况。C.struct_b 可能过于复杂或与仍在 C 代码中的某些内容共享。在这种情况下，您需要创建一个 .Free() 或 .Close() 方法（以更有意义的为准）并记录您的结构的用户必须调用它。在 Go 中，一个 Free 方法应该总是可以安全地调用。比如free运行后，一定要设置As=nil，这样如果用户调用Free两次，程序就不会崩溃。

还有一种方法可以创建终结器。[请参阅我在这里](https://stackoverflow.com/a/11812524/727643)写的另一个答案。但是，它们可能并不总是运行，如果创建垃圾的速度足够快，那么垃圾的创建很可能会超过收集速度。这应该被认为是对 Free/Close 方法的补充，而不是替代。

# sql - Pentaho Report Designer (PRD)：在选择子句中使用参数

> ID：14651532
> 
> 赞同：0
> 
> 时间：2013-02-01T17:13:02.353
> 
> 标签：sql, pentaho, pentaho-report-designer

在我正在使用的报表中，我需要显示一个数据库表的四列的信息。该表的前三列是 SEX、AGE 和 NAME。其他 N 列（N 就像 100！）是问题，表格的每一行都表示该人对该问题的回答：

```
SEX | AGE | NAME | Q1 | Q2 | Q3 | ... | Q100 
```

在我的报告中，我需要显示其中四列，其中前三列始终相同，第四列根据用户选择的选项而有所不同：

```
SEX | AGE | NAME | <QUESTION_COLUMN> 
```

到目前为止，我已经创建了一个下拉参数（填充“Q1”、“Q2”、“Q3”等），用户可以在其中选择他想要比较的问题。我尝试在报告查询的 SELECT 子句中使用所选选项的值（例如“Q1”），但没有成功：

```
SELECT sex, age, name, ${QUESTION} FROM user_answers 
```

Pentaho Report Designer 没有显示任何错误，它只是没有显示**问题**列的任何值（其他列 -**性别、年龄和姓名**- 总是返回它们的值）

所以，我想让你知道：

1.  我可以这样做吗？我的意思是，在 SELECT 子句中使用参数？
2.  根据参数有没有其他方法有这个“通配符”列？

提前致谢！布鲁诺·伽马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T06:33:21.903

我正在使用 SQL 服务器作为数据库。这个问题是这样解决的：

> 执行（'选择性别，年龄，姓名，'+${QUESTION}+' as Q1 FROM user_answers'）

请注意 ${QUESTION} 必须是 user_answers 的列名。在此示例中，我使用了一个文本框参数名称 QUESTION，其中列名称作为输入给出。如果输入参数不是文本框，您可能需要其他编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T08:12:38.327

你可以使用pentaho报表设计来设计。

1.  首先，您必须在参数上构建参数“QUESTION”，例如： `SELECT question FROM user_ansewers order by XXXX`
2.  你可以使用 sql

    `SELECT sex, age, name,question FROM user_answers where question= ${QUESTION}`

3.  最后，您可以看到“下拉”以实现选择

# c# - C# - 使用属性与字段的优势

> ID：14651533
> 
> 赞同：1
> 
> 时间：2013-02-01T17:13:09.403
> 
> 标签：c#, properties, field

> **可能重复：**
> [C# 中的字段和属性有什么区别？](https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property-in-c)
> [C# .NET 3.5+ 中属性和字段的区别](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp-net-3-5)

前段时间，我继承了一个 C# Web 应用程序，其中大多数*可能是字段*的类成员以以下两种方式之一定义为属性：

```
private Guid id;
public Guid Id
{
  get { return id; }
  set { id = value; }
}

public int someValue{ get; set; } 
```

也就是说，getter/setter 除了将值传送到私有字段之外，不做任何事情。在这些情况下，将这些成员构建为属性与字段是否有优势[或理由]？反之亦然？

通过将它们更改为字段，我是否会违反任何潜规则或最佳实践？是否存在显着的性能差异 - 例如，`someValue`以一种或另一种方式递增 N 个对象的列表？（我目前的理解是，字段访问必然不那么复杂[和高效]。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:24:21.873

它主要是一个 OOP（面向对象编程）概念：封装您可以在此处查看简要说明；

[关于封装的维基百科条目](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)

一种可能的用途是，例如，当尝试分配一个值时，调用一个函数来验证这个新值。例如：

```
private Guid id;
public Guid Id
{
    get { return id; }
    set
    { 
        if (checkValue(value)==true)
        {
            id = value;
        } 
    }
} 
```

# javascript - 如何制作一个javascript计时器，当时间大于60时，它会转换为分钟和秒

> ID：14651540
> 
> 赞同：-2
> 
> 时间：2013-02-01T17:13:42.660
> 
> 标签：javascript, function, timer

```
function countdown()
{
    seconds = 1000;
    delay = delay-seconds;
    conversion = Math.ceil(delay / seconds );
    document.getElementById('timer').innerHTML =  conversion + ":seconds until alarm goes off";
    t3 = setTimeout("countdown()",1000);

    if(conversion == 0)
    {
        alert('Wake UP!!!');
        DontDoIt();
    }
} 
```

此代码以秒为单位显示计时器。如果时间大于 60，我希望能够以分钟和秒为单位显示时间。

我希望能够用小时、分钟和秒来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:40:29.787

这应该可以为您解决问题 如果需要，它会显示小时、分钟（带前导零）和秒

```
function countdown() {
    seconds = 1000;
    delay = delay - seconds
    secs = Math.ceil(delay / seconds);
    var hrs = Math.floor(secs / 3600);
    var mins = Math.floor((secs - (hrs * 3600)) / 60);
    secs -= ((hrs * 3600) + (mins * 60));

    document.getElementById('timer').innerHTML = ((hrs>0) ? hrs + ':' : '') + ((mins>0) ? ((mins>9) ? mins : '0'+mins) + ':' : '') + ((secs>9) ? secs : '0'+secs) + " until alarm goes off";
    t3 = setTimeout("countdown()", 1000);
    if (delay == 0) {
        alert('Wake UP!!!');
        DontDoIt();
    }
} 
```

# android - 如何将 Socket.IO 与服务器要求身份验证一起使用

> ID：14651542
> 
> 赞同：1
> 
> 时间：2013-02-01T17:14:00.797
> 
> 标签：android, authentication, socket.io, serversocket

这是我从中获取 socketIO 文件的地方。 [https://github.com/Gottox/socket.io-java-client/tree/master/src/io/socket](https://github.com/Gottox/socket.io-java-client/tree/master/src/io/socket)

我在客户端。我知道当服务器不需要身份验证时连接有效。

但是当它需要身份验证（用户名和密码）时，我会收到一条握手错误消息。

我如何获得通过身份验证？会不会是服务器端错误？如果添加了身份验证，服务器端的事情会改变吗？

这是抛出错误的函数......我没有写它。这一行是导致问题的原因： InputStream stream = connection.getInputStream(); 它说它是由以下原因引起的：java.io.FileNotFoundException: url:80/socket.io/1/

```
private void handshake() {
    URL url;
    String response;
    URLConnection connection;
    try {
        setState(STATE_HANDSHAKE);
        url = new URL(IOConnection.this.url.toString() + SOCKET_IO_1);
        connection = url.openConnection();
        if (connection instanceof HttpsURLConnection) {
            ((HttpsURLConnection) connection)
                    .setSSLSocketFactory(sslContext.getSocketFactory());
        }
        connection.setConnectTimeout(connectTimeout);
        connection.setReadTimeout(connectTimeout);

        /* Setting the request headers */
        for (Entry<Object, Object> entry : headers.entrySet()) {
            connection.setRequestProperty((String) entry.getKey(),
                    (String) entry.getValue());
        }

        InputStream stream = connection.getInputStream();
        Scanner in = new Scanner(stream);
        response = in.nextLine();
        String[] data = response.split(":");
        sessionId = data[0];
        heartbeatTimeout = Long.parseLong(data[1]) * 1000;
        closingTimeout = Long.parseLong(data[2]) * 1000;
        protocols = Arrays.asList(data[3].split(","));
    } catch (Exception e) {
        error(new SocketIOException("Error while handshaking", e));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T09:02:08.623

问题解决了（有点），这里：[Android developmentpement，Gottox socket.io-java-client: file not fount Exception /socket.io/1/](https://stackoverflow.com/questions/24112943/android-developpement-gottox-socket-io-java-client-file-not-fount-exception-s)

（尝试使用较早版本的 socket.io - 首先从 node_modules 中删除 socket.io 文件夹，然后使用以下命令安装较旧版本，例如 0.9.16：npm install socket.io@0.9.16）

# php - 在 Zend Navigation Menu 中将 id css 添加到第一个 ul

> ID：14651550
> 
> 赞同：1
> 
> 时间：2013-02-01T17:14:07.970
> 
> 标签：php, css, zend-framework

我正在使用 .ini 文件来呈现我的菜单。

引导程序

```
 $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/menu.ini', 'nav');
    $nav = new Zend_Navigation($config);
    $view->navigation($nav); 
```

布局.phtml

```
<?php echo $this->navigation()->menu()->setMaxDepth(3) ?> 
```

我要达到的目标：

```
<ul class="navigation" id="navigation">
    <li>

        <a id="menu-1" href="/">Home</a>
    </li>
</ul> 
```

**如何为第一次出现设置 id="navigation"`<ul>`而不是 class="navigation"？**

现在我只有`<ul class="navigation">`并且我想要`<ul id="navigation">`或`<ul class="navigation" id="navigation">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:10:22.570

您需要在您的代码库中，而不是在 Zend_ 下设置自定义视图助手。

也许像`GZ_View_Helper_Navigation_Menu2`

然后根据你想如何配置这个新的视图助手路径的添加，在你的引导程序 initView 中是这样的：

```
$view->addHelperPath('GZ/View/Helper/', 'GZ_View_Helper'); 
```

或者，如果使用应用程序和资源，您也可以通过 ini 进行设置：

```
resources.view.helperPath.GZ_View_Helper = "GZ/View/Helper" 
```

您的 lib GZ 当然需要在 PHP 的[包含路径](http://www.php.net/manual/en/ini.core.php#ini.include-path)上。

渲染时，您将调用更改为：

```
<?= $this->navigation()->menu2()->setMaxDepth(3) ?> 
```

虽然我认为您也可以为 Navigation 分配一个默认视图助手（现在无法在文档中找到它）并调用

```
<?=  $this->navigation ?> 
```

相关：[如何扩展 Zend Navigation Menu View Helper？](https://stackoverflow.com/questions/2364695/how-do-i-extend-the-zend-navigation-menu-view-helper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:32:57.473

你可以用 jQuery 做到这一点：

```
$('document').load(function(){
    $("body > ul:first-child").attr('id', 'navigation');
}) 
```

**编辑：**

阅读您的评论后，我注意到您正在使用 Mootols 库，因此您可以执行`jQuery`等效操作，如下所示：

```
window.addEvent('domready', function() {                       
    var myMenu = new MenuMatic({ orientation:'vertical' });  
    myMenu.getElement('ul').set('id', 'navigation');              
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:20:38.600

我自己也考虑过很多这种方法。我经常在我的 Zend Framework 项目中创建多个导航对象。

相反，我会提交一个不同的答案。在您看来，将对导航输出的调用附在 HTML5 **nav**元素内。这使得它在语义上更清晰，并且允许您轻松地将自己的 ID 添加到每个部分。所以，试试这个：

```
<nav id="navigation"><?php echo $this->navigation()->menu()->setMaxDepth(3) ?></nav> 
```

需要注意的一件有趣的事情 - 如果页面上只有 1 个导航元素，那么您甚至不需要 ID。您可以使用 css 中的 nav 元素定位它...例如，要使导航中的所有 ul 的边距为零，您可以在 css 中执行此操作：

```
nav ul { margin: 0px } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T09:44:10.657

在 ZF 1.12 中（不知道确切来自哪个版本）有一种方法：

$this->navigation()->menu()->setUlId('navigation')->setMaxDepth(0);

# jquery - jQuery在清除textarea文本时删除textarea占位符

> ID：14651557
> 
> 赞同：3
> 
> 时间：2013-02-01T17:14:35.330
> 
> 标签：jquery, twitter-bootstrap

我有一个带有 textarea 的 Bootstrap 模式。当您打开模式时，文本区域需要清除任何以前的文本，以便每次打开它时都是新鲜的。

问题是，第一次清除文本时，字段上的占位符也会被删除。

我`$('textarea').val('')`用来清除文本。

[http://jsfiddle.net/dkRS8/1/](http://jsfiddle.net/dkRS8/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:24:07.250

您需要触发该`blur`占位符再次出现的事件。它仅在隐藏事件期间有效，因此当它再次出现时，占位符被放回。

```
$('#modal').on('hide', function() {
    $(this).find('textarea').val('').blur();
}); 
```

工作[jsfiddle](http://jsfiddle.net/dkRS8/5/)

**编辑**：我错了，似乎只需将事件从 更改为 就可以正常工作，`show`正如`hide`马丁在他使用事件的回答中所解释的那样`shown`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:26:28.443

当您注册到“显示”事件而不是“显示”事件时，它确实有效。

```
$(document).ready(function() {

    $('#modal').on('shown', function() {
        $(this).find('textarea').val('');
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T03:05:53.780

尝试

```
$(document).ready(function() {
    $('#modal').bind('hide',function(){
        $('textarea',this).val('')
    })
}); 
```

多浏览器，jquery-ui 事件标准

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T17:26:10.280

**在 IE 版本中.. IE 10 仅支持占位符**....所以不要在旧版本的 IE 上尝试此操作....

但其他浏览器，如 firefox、Chrome、Opera……都支持这个属性……

试试下面的代码它会帮助你...

更新小提琴：http: [//jsfiddle.net/dkRS8/6/](http://jsfiddle.net/dkRS8/6/)

```
$(document).ready(function() {

    $('#modal').on('show', function() {
        var ele = $(this).find('textarea');
        ele.val('');
    });

}); 
```

# opencl - OpenCL 通过引用传递不同的地址空间

> ID：14651558
> 
> 赞同：6
> 
> 时间：2013-02-01T17:14:40.657
> 
> 标签：opencl, pass-by-reference

**短篇小说：**

我有通过输出变量的引用传递的功能

```
void acum( float2 dW, float4 dFE, float2 *W, float4 *FE ) 
```

如果满足某些条件，则假定变量 *W、*FE、dW、dFE 递增。我想让这个函数通用 - 输出变量可以是本地的或全局的。

```
acum( dW, dFE, &W , &FE  );   // __local acum
acum( W, FE, &Wout[idOut], &FEout[idOut] );  // __global acum 
```

当我尝试编译它时出现错误

```
error: illegal implicit conversion between two pointers with different address spaces 
```

有可能以某种方式实现吗？？？我在想我是否可以使用宏而不是函数（但我对 C 中的宏不是很熟悉）。

另一种可能性可能是：

1.  使用返回 struct{Wnew, FEnew} 的函数
2.  或 (float8)(Wnew,FEnew,0,0) 但我不喜欢它，因为它使代码更加混乱。
3.  当然，我也不想只是在所有地方复制“acum”的主体（比如手动内联它:)）

**背景（无需阅读）：**

我正在尝试使用 OpenCL 对一些热力学采样进行编程。因为统计权重 W = exp(-E/kT) 很容易在低温下溢出浮点数 (2^64)，所以我制作了一个组合数据类型 W = float2(W_digits, W_exponent) 并定义了操作这些数字“acum”的函数。

我尽量减少全局内存操作的数量，所以我让 work_items 超过 Vsurf 而不是 FEout，因为我预计 Vsurf 中只有几个点会具有相当大的统计权重，因此每个工作项的 FEout 累积只会被调用几次。虽然迭代 FEout 需要 sizeof(FEout)*sizeof(Vsurf) 内存操作。整个代码在这里（欢迎任何如何使其更有效的建议）：

```
// ===== function :: FF_vdW  - Lenard-Jones Van Der Waals forcefield
float4 FF_vdW ( float3 R ){
 const float C6    = 1.0;
 const float C12   = 1.0;
 float ir2  = 1.0/ dot( R, R );
 float ir6  = ir2*ir2*ir2;
 float ir12 = ir6*ir6;
 float E6   = C6*ir6;
 float E12  = C12*ir12;
 return (float4)(     
                ( 6*E6  -  12*E12 ) * ir2    *  R 
                ,   E12 -     E6
);}

// ===== function :: FF_spring  - harmonic forcefield
float4 FF_spring( float3 R){
 const float3 k = (float3)(  1.0, 1.0, 1.0 );
 float3 F = k*R;
 return (float4)(  F,
                   0.5*dot(F,R)
);}

// ===== function :: EtoW    -   compute statistical weight
float2 EtoW( float EkT ){
    float Wexp = floor( EkT);
    return (float2)(  exp(EkT - Wexp)
                   ,   Wexp
); }

// ===== procedure : addExpInplace    -- acumulate F,E with statistical weight dW
void acum( float2 dW, float4 dFE, float2 *W, float4 *FE   )
{
            float dExp = dW.y - (*W).y; // log(dW)-log(W)
            if(dExp>-22){               // e^22 = 2^32 ,    single_float = 2^+64
               float fac = exp(dExp); 
               if (dExp<0){             // log(dW)<log(W)
                 dW.x *= fac;
                 (*FE)    += dFE*dW.x;
                 (*W ).x  +=     dW.x;
               }else{                   // log(dW)>log(W)
                 (*FE)     = dFE  + fac*(*FE); 
                 (*W ).x   = dW.x + fac*(*W).x;
                 (*W ).y   = dW.y;
               }
            }
}

// ===== __kernel :: sampler
__kernel void sampler( 
__global float  * Vsurf, // in  : surface potential (including vdW)  // may be faster to precomputed endpoints positions like float8
__global float4 * FEout, // out : Fx,Fy,Fy, E
__global float2 * Wout,  // out : W_digits, W_exponent
int3   nV    ,
float3 dV    ,
int3   nOut     ,
int3   iOut0    ,        // shift of Fout in respect to Vsurf
int3   nCopy    ,        // number of copies of 
int3   nSample  ,        // dimension of sampling in each dimension around R0   +nSample,-nSample
float3 RXe0     ,        // postion Xe relative to Tip
float  EcutSurf ,        
float  EcutTip  ,        
float  logWcut  ,        // accumulate only when  log(W) > logWcut
float  kT                // maximal energy which should be sampled
) {

    int  id  = get_global_id(0);  // loop over potential grid points
    int  idx = id/nV.x; 
    int3 iV  =  (int3)( idx/nV.y
                      , idx%nV.y
                      , id %nV.x  );
    float V = Vsurf[id];
    float3 RXe = dV*iV;

if (V<EcutSurf){
// loop over tip position
for (int iz=0;iz<nOut.z;iz++ ){
for (int iy=0;iy<nOut.y;iy++ ){
for (int ix=0;ix<nOut.x;ix++ ){ 

    int3   iTip = (int3)( iz, iy, ix );
    float3 Rtip = dV*iTip;
    float4 FE = 0;
    float2 W  = 0;
    // loop over images of potential
    for (int ix=0;ix<nCopy.x;ix++ ){
    for (int iy=0;iy<nCopy.y;iy++ ){
        float3 dR = RXe - Rtip;
        float4 dFE    = FF_vdW( dR );
               dFE   += FF_spring( dR - RXe0 );
               dFE.w += V;

        if( dFE.w < EcutTip  ){
            float2 dW = EtoW( - FE.w / kT );
            acum( dW, dFE, &W , &FE  );   // __local acum
        }
    } 
    }

    if( W.y > logWcut  ){ // accumulate force
        int  idOut = iOut0.x + iOut0.y*nOut.x + iOut0.z*nOut.x*nOut.y;
        acum( W, FE, &Wout[idOut], &FEout[idOut] );  // __global acum
    }

}}}}

} 
```

我在 ubuntu 12.04 64bit 上使用 pyOpenCL 但我认为它与问题无关

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T04:42:45.093

好的，这里发生了什么，来自 OpenCL 手册页：

[http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/global.html](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/global.html)

“如果对象的类型由地址空间名称限定，则在指定的地址名称中分配对象；否则，在通用地址空间中分配对象”

...

“程序中函数的参数或函数的局部变量的通用地址空间名称是__private。所有函数参数都应在__private地址空间中。”

因此，您的 acum(... ) 函数参数位于 __private 地址空间中。

所以编译器正确地说

acum( ..&Wout[idOut], &FEout[idOut] )

当函数 args 必须在私有地址空间中时，在全局地址空间中使用 &Wout 和 &FEout 调用。

解决方案是全局和私有之间的转换。

创建两个私有临时变量来接收结果。

用这些变量调用 acum( ... )。

在调用 acum( .. ) 之后，将临时私有值分配给全局值

代码看起来有点乱

记住在 GPU 上你有很多地址空间，你不能通过强制转换来神奇地在它们之间跳转。您必须通过分配在地址空间之间显式移动数据。

# android - Android：如何在不保留纵横比的情况下缩放图像以填充 LinearLayout 的背景？

> ID：14651566
> 
> 赞同：4
> 
> 时间：2013-02-01T17:15:02.457
> 
> 标签：android, xml, image, android-linearlayout, android-framelayout

我有一个这样的RelativeLayout：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                       android:id="@+id/favoriteLinearLayout"
                       android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:orientation="vertical">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background1"
        >
    ....
    </LinearLayout>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background2"
            android:layout_below="@+id/linearLayout1"
        >
    ....
    </LinearLayout>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background3"
            android:layout_below="@+id/linearLayout2"
        >
    ....
    </LinearLayout>

</RelativeLayout> 
```

我想在三个 LinearLayout 中的每一个中都有一个不同的背景图像，并且应该缩放这个图像以填充它的 LinearLayout，而不保留图像的纵横比。而且我不希望每个LinearLayout都被缩放以适应图像的大小（如果图像高于LinearLayout，我希望降低图像高度）。

此后它应该是什么样子：

![在此处输入图像描述](../Images/17b1d6f91db6fb906da69c596207b17f.png)

任何人都知道如何做到这一点？

谢谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:19:07.297

您可以使用 imageView 并将其 scaleType 设置为 fitXY。这是一个例子：

```
<FrameLayout  android:layout_width="fill_parent" android:layout_height="fill_parent">

    <ImageView 
      android:layout_width="fill_parent" android:layout_height="fill_parent"
      android:src="@drawable/blue_dark_background" android:scaleType="fitXY" />

    <LinearLayout>....</LinearLayout>
</FrameLayout> 
```

如果这对您有帮助，请告诉我。问候！

**编辑**

这是一个更清楚的例子

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:weightSum="3"
    android:orientation="vertical">

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:src="@drawable/ic_menu_share" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </LinearLayout>
</FrameLayout>
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:src="@drawable/ic_menu_share" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </LinearLayout>
</FrameLayout>
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:src="@drawable/ic_menu_share" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </LinearLayout>
</FrameLayout>

</LinearLayout> 
```

# java - java file.renameTo() 确实重命名文件但返回 false。为什么？

> ID：14651567
> 
> 赞同：9
> 
> 时间：2013-02-01T17:15:08.213
> 
> 标签：java, file-io

问题是我需要在我的其余逻辑工作之前移动文件，所以当方法返回 false 时我停止执行。

但是，当我在 Windows 资源管理器中检查文件时，它有一个新名称并且它移动了。

只是好奇为什么会这样。

这是我刚刚尝试重新创建问题的一些示例代码。这几乎是一样的，而且工作正常。

```
File testfile = new File("TestFile");

    if(!testfile.exists()){

        testfile.mkdirs();

    }

    File sample = new File("sample.txt");

    if(sample.exists()){

        boolean success = sample.renameTo(new File(testfile.getPath() + "\\" + sample.getName()));

        if(success){

            System.out.println("Moved");

        }
        else{

            System.out.println("Failed");

        }

    } 
```

编辑：解决了。很抱歉把大家的时间浪费在这么愚蠢的事情上。但是，如果不是为了发表这篇文章，我真的不认为我会追踪到这一点。

解决方案是我实际上是在循环几个文件来移动。当输出说它失败时，程序停止了，当我查看资源管理器时，实际上只有第一个文件被移动了，所以我认为它正在移动，然后返回 false。但是，问题是我使用了错误的变量作为索引，所以发生的事情是它确实成功地将文件移动到索引 0 中，然后当循环重复时索引没有增加，所以它试图再次移动索引 0 和因此失败了。

就像我说的，非常愚蠢，但感谢您对我的包容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-01T17:20:45.380

Java`File.renameTo()`似乎存在问题，尤其是在 Windows 上。正如 API 文档所说：

> 此方法的行为的许多方面本质上是平台相关的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，并且如果具有目标抽象路径名的文件可能不会成功已经存在。应始终检查返回值以确保重命名操作成功。

您可以使用 apache.commons.io 库，其中包含`FileUtils.moveFile()`或还包含`Files.move()`JDK 7 中的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:32:48.313

您的文件是否有可能在某处打开了 Inputstream 但尚未关闭，因此重命名不起作用。在关闭之前尝试关闭与文件对象相关的所有打开的流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-25T13:50:20.540

这个对我有用

```
File file = new File("E:/Javadocs/" , "new.txt");   

File file1 = new File("E:/Javadocs/" , "myDoc.txt");          

file1.createNewFile();

if (file1.exists()){  
  System.out.println(file1.renameTo(file));
} 
```

这将创建一个文件 myDoc.txt 并将其重命名为 new.txt 并将打印 true
我也尝试使用 File(URI) 构造函数它工作正常

# spring - 在 Spring 控制器中使用 CDI ConversationScoped bean

> ID：14651571
> 
> 赞同：0
> 
> 时间：2013-02-01T17:15:23.800
> 
> 标签：spring, model-view-controller, cdi, conversation-scope

我正在尝试制作应该将百里香与弹簧控制器一起使用的 webapp。但我想将一些 CDI ConversationScoped bean 注入到我的 Spring 控制器中。现在我设法用我的 Spring 应用程序配置 CDI，当我尝试将 CDI bean 注入我的控制器时，它似乎工作正常，但是当我尝试注入 Conversation bean 时，它失败并出现错误：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.enterprise.context.Conversation] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@javax.inject.Inject()} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T16:10:36.900

在 CDI 1.0 中，对话范围与 JSF 相关联。如果您不使用 JSF，您将无法访问对话范围。不过，您可以创建另一个模仿对话范围的范围。

# unix - 在 unix 上挂载文件系统

> ID：14651577
> 
> 赞同：1
> 
> 时间：2013-02-01T17:15:37.450
> 
> 标签：unix, command-line

当我尝试跨多个服务器进行多次挂载时遇到了一个问题。

我有一个服务器，它在服务器 A 上有一个名为 /etc/exports 的文件系统

```
mount -o vers=3 1.1.1.1/export/scripts/ /export/scripts/ 
```

但是现在我想像中间人一样从服务器 B 挂载到服务器 C，但我得到了错误：

```
exportfs: /export/scripts does not support NFS export 
```

基本上我想要 A -> B -> C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:26:31.587

您不能从 NFS 客户端重新导出 NFS 文件系统，以便它充当另一个下游客户端的服务器。您需要直接从主机 A 将文件系统挂载到主机 C 上。

# testcomplete - 如何使用链接的脚本文件。测试完成

> ID：14651582
> 
> 赞同：1
> 
> 时间：2013-02-01T17:16:27.663
> 
> 标签：testcomplete

TestComplete 9 中的链接文件有问题。

问题模型：
在一套项目中，我有几个项目。
第一个项目 (Project_1) 包含所有通用的脚本文件。例如Utiles1.sj、Utiles2.sj ...等；Helper1.js ...验证.js

所有其他项目都有来自 Project_1 的链接脚本文件 Utiles1.sj。
目前一切正常。

接下来，在 Utiles1.sj 的 Project1 中，我使用了 //USEUNIT Helper1（仅存在于 Project_1 中）

为了使项目生效，我已将 Helper1 链接到我需要 Utiles1.sj 功能的所有项目

结果当我有很多这样的项目和这样的文件时，我应该链接链接链接。

对于这种情况，是否有一种解决方法，只需花费最少的精力？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:57:43.223

您可以将共享脚本单元放在硬盘驱动器上的单独文件夹中。当您需要将它们链接到一个新项目时，请在**Add Existing Child - Script**对话框中打开此文件夹，然后按`Ctrl`+`A`快捷方式选择所有文件，以免一一添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T10:03:41.023

```
USEUNIT unitA 
```

在您要导入的脚本顶部，然后您可以在当前脚本文件中使用 unitA 的功能

# c - 从 Cygwin/POSIX 打开 URL？

> ID：14651583
> 
> 赞同：0
> 
> 时间：2013-02-01T17:16:36.917
> 
> 标签：c, url, cygwin, posix

我正在编写一个应该打开网络链接的 cygwin 程序。此代码不起作用：

```
 system("cygstart \"http://www.mysite.com\""); 
```

Cygstart 从命令行工作，但不在 system() 内部。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:23:55.597

您可能必须通过完整路径引用 cygstart 命令。例如：

```
system("/usr/bin/cygstart.exe \"http://www.mysite.com\""); 
```

编辑：您甚至可能必须使用完整的 Windows 路径而不是 cygwin 路径。

# xml - 使用 Schematron 识别 xml 文本元素

> ID：14651586
> 
> 赞同：1
> 
> 时间：2013-02-01T17:16:40.477
> 
> 标签：xml, schematron

是否可以在 XPath 中制定一个规则来识别像这样的 xml 元素：

```
<A>something...<A> 
```

?

我正在使用 Schematron，我需要指定某些元素不能像示例中的那样具有子元素，这就是我需要识别它们的原因。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:18:53.053

对于以下输入：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <a>Only Text</a>
  <a><b>Child node</b></a>  
  <a><b>Child node</b>Mixed content</a>
</root> 
```

这些 Schematron 规则应该可以满足您的需求：

```
<?xml version="1.0" encoding="UTF-8"?>
<iso:schema xmlns:iso="http://purl.oclc.org/dsdl/schematron">
<iso:pattern id="children tests">
    <iso:rule context="a">
        <iso:assert test="child::node()">
            Element has nodes
        </iso:assert>
        <iso:report test="child::*">
            Element has child elements
        </iso:report>
        <iso:assert test="empty(child::text())">
            Element has text
        </iso:assert>
        <iso:report test="child::text() and empty(child::*)">
            Element has only text
        </iso:report>               
    </iso:rule>
</iso:pattern>
</iso:schema> 
```

![在 XML ValidatorBuddy 中测试 Schematron 规则](../Images/ade37b443c0901691028739168ade836.png)

# xml - 使用 xslt 解析复杂的 xml

> ID：14651587
> 
> 赞同：0
> 
> 时间：2013-02-01T17:16:43.207
> 
> 标签：xml, xslt, csv

我尝试解析 xml，但我没有机会，如果有人能解释我该怎么做或解释问题出在哪里，我将不胜感激：

这是我的xml代码：

```
 <?xml version='1.0' encoding='UTF-8'?>
    <nvd xmlns:vuln="http://scap.nist.gov/schema/vulnerability/0.4" xmlns:scap-        core="http://scap.nist.gov/schema/scap-core/0.1" xmlns="http://scap.nist.gov/schema/feed/vulnerability/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cpe-lang="http://cpe.mitre.org/language/2.0" xmlns:patch="http://scap.nist.gov/schema/patch/0.1" xmlns:cvss="http://scap.nist.gov/schema/cvss-v2/0.2" pub_date="2013-01-22T06:34:06" xsi:schemaLocation="http://scap.nist.gov/schema/patch/0.1 http://nvd.nist.gov/schema/patch_0.1.xsd http://scap.nist.gov/schema/scap-core/0.1 http://nvd.nist.gov/schema/scap-core_0.1.xsd http://scap.nist.gov/schema/feed/vulnerability/2.0 http://nvd.nist.gov/schema/nvd-cve-feed_2.0.xsd"         nvd_xml_version="2.0">
      <entry id="CVE-2009-0001">
        <vuln:vulnerable-software-list>
          <vuln:product>cpe:/a:apple:quicktime:3</vuln:product>
          <vuln:product>cpe:/a:apple:quicktime:7.3.1.70</vuln:product>
        </vuln:vulnerable-software-list>
        <vuln:cvss>
          <cvss:base_metrics>
          <cvss:score>9.3</cvss:score>
          <cvss:access-vector>NETWORK</cvss:access-vector>
          <cvss:access-complexity>LOW</cvss:access-complexity>
          <cvss:authentication>NONE</cvss:authentication>

          </cvss:base_metrics>
          </vuln:cvss>
      </entry>
      <entry id="CVE-2009-0002">
        <vuln:vulnerable-software-list>
          <vuln:product>cpe:/a:apple:quicktime:3</vuln:product>
          <vuln:product>cpe:/a:apple:quicktime:6.5</vuln:product>
          <vuln:product>cpe:/a:apple:quicktime:7.0</vuln:product>
          <vuln:product>cpe:/a:apple:quicktime:7.3.1.70</vuln:product>
        </vuln:vulnerable-software-list>
        <vuln:cvss>
          <cvss:base_metrics>
            <cvss:score>3.2</cvss:score>
            <cvss:access-vector>NETWORK</cvss:access-vector>
            <cvss:access-complexity>LOW</cvss:access-complexity>
            <cvss:authentication>NONE</cvss:authentication>

          </cvss:base_metrics>
        </vuln:cvss>
      </entry>
    </nvd> 
```

我将 xslt 与下面的 xsl 文件一起使用：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:nvd="http://scap.nist.gov/schema/feed/vulnerability/2.0"
                    xmlns:vuln="http://scap.nist.gov/schema/vulnerability/0.4" version="1.0">

    <xsl:output encoding="UTF-8" method="text" />

    <xsl:template match="/"><xsl:apply-templates select="nvd:nvd" /></xsl:template>

    <xsl:template match="nvd:nvd"><xsl:apply-templates select="nvd:entry" /></xsl:template>

    <xsl:template match="nvd:entry">
    <xsl:apply-templates select="vuln:vulnerable-software-list">
      <xsl:with-param name="entryid" select="@id" />
    </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="vuln:vulnerable-software-list">
    <xsl:param name="entryid" />
    <xsl:for-each select="vuln:product">
    <xsl:value-of select="$entryid" />:<xsl:value-of select="text()" /><xsl:text>
    </xsl:text>
    </xsl:for-each>
    </xsl:template>

    </xsl:stylesheet> 
```

结果是：

```
 # xsltproc a2.xsl a2.xml
    CVE-2009-0001:cpe:/a:apple:quicktime:3
    CVE-2009-0001:cpe:/a:apple:quicktime:7.3.1.70
    CVE-2009-0002:cpe:/a:apple:quicktime:3
    CVE-2009-0002:cpe:/a:apple:quicktime:6.5
    CVE-2009-0002:cpe:/a:apple:quicktime:7.0
    CVE-2009-0002:cpe:/a:apple:quicktime:7.3.1.70 
```

但现在我想像这样添加 cvss:score a 结尾：

```
 CVE-2009-0001:cpe:/a:apple:quicktime:3@9.3
    CVE-2009-0001:cpe:/a:apple:quicktime:7.3.1.70@9.3
    CVE-2009-0002:cpe:/a:apple:quicktime:3@3.2
    CVE-2009-0002:cpe:/a:apple:quicktime:6.5@3.2
    CVE-2009-0002:cpe:/a:apple:quicktime:7.0@3.2
    CVE-2009-0002:cpe:/a:apple:quicktime:7.3.1.70@3.2 
```

我尝试过这样的想法：

添加

```
 <xsl:apply-templates select="vuln:cvss/cvss:base_metrics/cvss:score"> 
```

或者

```
 select="*/score" 
```

但它不起作用.... :-(

当然我添加了一个参数：

```
 <xsl:value-of select="$score" /><xsl:text> 
```

在模板 vuln:vulnerable-software-list

谢谢你的帮助

问候

阿诺

* * *

嗨 Jallopa：我尝试在 for-each 部分中添加您的代码，但它返回：

```
 xsltproc a.xsl a.xml
    XPath error : Undefined namespace prefix
    xmlXPathCompiledEval: evaluation failed
    runtime error: file a.xsl line 21 element value-of
    XPath evaluation returned no result. 
```

第 21 行包含：

```
 <xsl:value-of select="ancestor::entry[1]/vuln:cvss/cvss:base_metrics/cvss:score"/> 
```

嗨 wst，我已经尝试过你的代码，但这次

```
 xsltproc a.xsl a.xml
    XPath error : Undefined namespace prefix
    xmlXPathCompiledEval: evaluation failed
    runtime error: file a.xsl line 15 element with-param
    Failed to evaluate the expression of variable 'score'. 
```

第 15 行是：

```
 <xsl:with-param name="score" select="vuln:cvss/cvss:base_metrics/cvss:score"/> 
```

（我在 with-param 中的选择中添加了 =）

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:24:58.177

在 foreach 元素中，添加：

```
<xsl:value-of select="ancestor::entry[1]/vuln:cvss/cvss:base_metrics/cvss:score"/> 
```

这将向上导航到第一个“条目”元素，然后向下导航到 cvss:score。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:25:10.210

这个问题可以更简单地解决，但保持模板样式，您可以将值作为另一个参数传递：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:nvd="http://scap.nist.gov/schema/feed/vulnerability/2.0"
    xmlns:vuln="http://scap.nist.gov/schema/vulnerability/0.4" version="1.0">

<xsl:output encoding="UTF-8" method="text" />

<xsl:template match="/"><xsl:apply-templates select="nvd:nvd" /></xsl:template>

<xsl:template match="nvd:nvd"><xsl:apply-templates select="nvd:entry" /></xsl:template>

<xsl:template match="nvd:entry">
    <xsl:apply-templates select="vuln:vulnerable-software-list">
        <xsl:with-param name="entryid" select="@id" />
        <xsl:with-param name="score" select"vuln:cvss/cvss:base_metrics/cvss:score"/>
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="vuln:vulnerable-software-list">
    <xsl:param name="entryid" />
    <xsl:param name="score" />
    <xsl:for-each select="vuln:product">
        <xsl:value-of select="$entryid" />:<xsl:value-of select="text()" />@<xsl:value-of select="$score" /><xsl:text>
    </xsl:text>
    </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

# java - 为什么 javac 不能为用作参数的函数推断泛型类型参数？

> ID：14651589
> 
> 赞同：11
> 
> 时间：2013-02-01T17:16:49.343
> 
> 标签：java, generics, type-inference

在下面的示例中，为什么编译器能够推断出第一次调用`Foo.create()`in的通用参数`Foo.test()`，但不能在第二次调用中推断出来？我正在使用 Java 6。

```
public class Nonsense {
    public static class Bar {
        private static void func(Foo<String> arg) { }
    }

    public static class Foo<T> {

        public static <T> Foo<T> create() {
            return new Foo<T>();
        }

        private static void test() {
            Foo<String> foo2 = Foo.create(); // compiles
            Bar.func(Foo.create());          // won't compile
            Bar.func(Foo.<String>create());  // fixes the prev line
        }
    }
} 
```

（编译错误是*Nonsense.Bar 类型中的方法 func(Nonsense.Foo) 不适用于参数 (Nonsense.Foo)*）。

注意：我知道编译器错误可以通过 test() 中的第三行修复 - 我很好奇是否存在阻止编译器推断类型的特定限制。在我*看来*，这里有足够的上下文。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T17:57:41.607

从 Java 7 开始，必须先进行方法重载解析，然后才能考虑您正在调用的方法中的任何目标类型信息，以尝试`T`推断`func`. 这似乎很愚蠢，因为我们都可以看到，在这种情况下，只有一个名为 的方法`func`，但是，它是 JLS 规定的，并且是`javac`Java 7 的行为。

编译过程如下：首先，编译器看到它正在编译对名为 func 的类 Bar 的静态方法的调用。要执行重载决议，它必须找出调用该方法的参数。尽管这是一个微不足道的情况，但它仍然必须这样做，并且在它这样做之前，它没有任何关于可用于帮助它的方法的形式参数的信息。实际参数由一个参数组成，一个调用`Foo.create()`被声明为返回`Foo<T>`。同样，在目标方法没有标准的情况下，它只能推断出返回类型是 is 的擦除`Foo<T>`，`Foo<Object>`并且确实如此。

然后方法重载解析失败，因为没有一个重载`func`与 的实际参数兼容`Foo<Object>`，并且会为此发出错误。

这当然是非常不幸的，因为我们都可以看到，如果信息可以简单地从另一个方向流动，从方法调用的目标返回到调用站点，则可以很容易地推断出类型并且不会出现错误。事实上，Java 8 中的编译器可以做到这一点，而且确实做到了。正如另一个答案所述，这种更丰富的类型推断对于 Java 8 中添加的 lambda 以及为利用 lambda 进行的 Java API 扩展非常有用。

您可以从前面的链接下载[带有 JSR 335 lambda 的 Java 8](http://jdk8.java.net/lambda/)的预发布版本。它编译问题中的代码，没有任何警告或错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:22:36.050

从上下文推断类型太复杂了。主要障碍可能是方法重载。例如`f(g(x))`，要确定`f()`应用哪个，我们需要知道 的类型`g(x)`；但是`g(x)`可能需要从`f()`的参数类型中推断出的类型。在某些语言中，简单地禁止方法重载，以便更容易进行类型推断。

在 Java 8 中，您的示例可以编译。由于 lambda 表达式用例，Java 团队更有动力扩展类型推断。这不是一件容易的事。

java 7 的 java 语言规范包含 40 页，仅用于规范方法调用表达式（第 15.12 节）

# knockout.js - 为什么将 ko.mapping 与 observableArray 一起使用时更新绑定会触发两次？

> ID：14651591
> 
> 赞同：2
> 
> 时间：2013-02-01T17:17:01.277
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用 knockoutjs 并尝试设置一个项目，包括 ko.mapping 和 observableArray 的自定义更新绑定。直接设置值时，更新绑定触发一次，使用 ko.mapping.fromJS 时，更新绑定触发两次。请参阅下面[的小提琴](http://jsfiddle.net/edNCJ/)或代码：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="knockout-2.2.1.js"> </script>
    <script type="text/javascript" src="knockout.mapping.js"></script>
</head>
<body>
    <div data-bind="foreach: ObservableArray, updateBinding: ObservableArray">
        <span data-bind="text: Value"></span>
    </div>
    <script type="text/javascript">
        ko.bindingHandlers['updateBinding'] = {
            init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                console.log("Binding Handler (Init)");
            },
            update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                console.log("Binding Handler (Update)");
                var data = ko.utils.unwrapObservable(valueAccessor());
            }
        };

        function MainViewModel() {
            var self = this;

            self.ObservableArray = ko.observableArray();
        }

        var viewModel = new MainViewModel();

        // Fires Init + Update for ObservableArray
        ko.applyBindings(viewModel);

        // Setting directly fires Update for ObservableArray once
        viewModel.ObservableArray([{ "Value": "Lucky Luke" }]);

        // Setting via mapping fires Update for ObservableArray twice
        ko.mapping.fromJS({ "ObservableArray": [{ "Value": "Ludwig van Beethoven" }] }, {}, viewModel);
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:36:09.023

这是在常规对象中嵌入数组时由 knockout.mapping 造成的错误，现在已修复（参见[github](https://github.com/SteveSanderson/knockout.mapping/issues/135)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:17:18.360

您不需要在 updateBinding 绑定中使用完整的函数调用语法，因为它不是表达式。

```
updateBinding: People().Records() 
```

应该：

```
updateBinding: People().Records 
```

稍作调整：http : [//jsfiddle.net/twRFf/3/](http://jsfiddle.net/twRFf/3/)

# php - 如何在没有 phar 支持的 PHP 5.2.8 上安装 symfony（Composer 依赖）？

> ID：14651592
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:17:02.053
> 
> 标签：php, symfony, installation, phar

我一直试图在我的网站上安装 symfony，但是我没有成功，因为它取决于作曲家。

安装：

```
php -r "eval('?>'.file_get_contents('https://getcomposer.org/installer'));" 
```

当我尝试安装时（所有安装选项似乎都需要 phar 支持）我得到了这个输出：

```
-------------------------------------------------- ---------
警告：输入中的意外字符：'\' (ASCII=92) state=1 in Command line code(1) : eval()'d code on line 378
#!/usr/bin/env php
您机器上的某些设置使 Composer 无法正常工作。
确保您修复了下面列出的问题并再次运行此脚本：

缺少 phar 扩展名。
安装它或重新编译没有 --disable-phar 的 php

您的 PHP (5.2.8) 太旧，您必须升级到 PHP 5.3.2 或更高版本。
-------------------------------------------------- ---------

```

我没有安装不同版本 php 的权限，因为我使用的是有点限制的付费虚拟主机。我有哪些选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T17:18:30.653

Symfony 2 不支持 php < 5.3.2 [http://symfony.com/doc/2.0/reference/requirements.html](http://symfony.com/doc/2.0/reference/requirements.html)

如果您无法升级您的 php 版本，请找到另一个网络主机或使用不同的框架。

# r - R中的多个输出文件名

> ID：14651594
> 
> 赞同：0
> 
> 时间：2013-02-01T17:17:08.953
> 
> 标签：r, output

我在下面编写的代码有问题。我需要为输入矩阵 (aa) 的每一行计算距离矩阵，并将结果保存在以行名作为文件名的文件中。aa 矩阵是 100x100，但测试矩阵如下所示：

```
ID  A   B   C   D
AA  0.5 0.4 0.9 0.5
BB  0.2 0.1 0.8 0.96
CC  0.3 0.5 0.8 0.4
DD  0.1 0.4 0.5 0.78 
```

实际上，我想为每一行获取一个包含距离矩阵的文件，并以“AA.txt”和“BB.txt”以及“CC.txt”和“DD.txt”作为文件名。

```
a<- read.table ("test_matrix.txt", header = TRUE)
aa<- structure (a, class = "data.frame")
d_ply(aa, 1, function(row){
cu<- dist(as.numeric(row))
cucu<- as.matrix(cu)
write.table(cucu, quote = TRUE, file = paste(row$ID, "txt", sep = "."), sep = "\t")
}, .progress='text', .print = TRUE) 
```

使用上面的代码，我获得了正确的文件名，但内容不正确，因为我有一个 5x5 矩阵而不是 4x4 矩阵。有人可以告诉我是哪个问题吗？我想在阅读标题时有些东西......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:40:01.007

当我运行您的代码时，输​​出如下所示：

```
"1" "2" "3" "4" "5"
"1" 0   NA  NA  NA  NA
"2" NA  0   0.1 0.4 0
"3" NA  0.1 0   0.5 0.1
"4" NA  0.4 0.5 0   0.4
"5" NA  0   0.1 0.4 0 
```

您需要调整您的功能以包含我和 Joran 的建议：

```
myfun <- function(row) {
  cu<- dist(as.numeric(row[-1]))
  cucu<- as.matrix(cu)
  write.table(cucu, file=paste(row$ID, 'txt', sep='.'), sep='\t', quote=TRUE, row.names=FALSE, col.names=FALSE)
} 
```

运行`d_ply(aa, 1, myfun, .print=TRUE)`给出的文件如下所示：

```
0   0.1 0.4 0
0.1 0   0.5 0.1
0.4 0.5 0   0.4
0   0.1 0.4 0 
```

# certificate - 证书问题：来自 P7B 和 CRT 的 KEY 或 PFX

> ID：14651599
> 
> 赞同：19
> 
> 时间：2013-02-01T17:17:28.190
> 
> 标签：certificate, ssl-certificate, x509certificate, pfx

我是证书的新手，这是我第一次购买它。

我生成了 CSR 文件（在 IIS 中）并使用 GoDaddy 网站购买了证书。他们给我发了两个文件：P7B 和 CRT。由于我将使用 Azure Web 角色的证书，因此我需要 PFX。如何仅使用 CSR、P7B 和 CRT 创建它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T18:12:48.113

最后我设法做到了。在 IIS 中，我选择了 Complete Certificate Request，安装了 CRT 证书，然后使用 Export 选项将其另存为 PFX。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-14T18:36:06.067

> 由于我将使用 Azure Web 角色的证书，因此**我需要 PFX**

虽然我的目标服务器是 Nancy，但我发布了答案，因为它与生成 PFX 证书的过程有关。

基于 Nancy 的项目需要受信任的证书。**我找到了使用PFX**证书设置自签名的程序，[为自托管 Nancy 启用 SSL](https://coderead.wordpress.com/2014/08/07/enabling-ssl-for-self-hosted-nancy/)，但如何继续使用 GoDaddy 证书并不明显。挖掘了一下，我在一个商业 SSL 站点找到了答案。

因此，我使用 OpenSSL 创建了 CSR，从 GoDaddy 订购并获取了我的证书包，然后也使用 OpenSSL 生成了 PFX，如下所述。

作为南希的旁注，我使用以下方法在本地安装了 PFX

```
c:> certutil -importPFX certname.pfx 
```

此处描述@ [https://stackoverflow.com/a/33351095/241296](https://stackoverflow.com/a/33351095/241296)

也许可以完全绕过本地 IIS 来满足 Azure PFX 要求。

* * *

使用OpenSSL@ssl.com[创建 .pfx/.p12 证书文件](https://www.ssl.com/how-to/create-a-pfx-p12-certificate-file-using-openssl/)

```
openssl pkcs12 -export -out certificate.pfx -inkey privateKey.key -in certificate.crt -certfile more.crt 
```

> 分解命令：
> 
> *   openssl – 执行 OpenSSL 的命令
> *   pkcs12 – OpenSSL 中 PKCS#12 文件的文件实用程序
> *   -export -out certificate.pfx – 将 PFX 文件导出并保存为 certificate.pfx
> *   -inkey privateKey.key – 使用私钥文件 privateKey.key 作为私钥与证书结合。
> *   -in certificate.crt – 使用 certificate.crt 作为私钥将与之组合的证书。
> *   -certfile more.crt - 这是可选的，如果您有任何其他想要包含在 PFX 文件中的证书。

* * *

我使用 -certfile 选项来指定 GoDaddy 捆绑包：

```
openssl pkcs12 -export -out my.pfx -inkey my.key -in my.crt -certfile gd_bundle-g2-g1.crt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-15T06:53:36.010

您可以按照[安装 SSL 证书的支持中提供的步骤进行操作。](http://support.godaddy.com/help/article/4801/installing-an-ssl-certificate-in-microsoft-iis-7)

摘自以上链接。

**重要提示**：*要以 .pfx 格式导出证书，您需要在请求证书的**同一台机器上执行这些步骤。***

![在此处输入图像描述](../Images/4aa7b5e13de8ee91935189618a00f76d.png)

# backbone.js - 每个布局需要不同的事件吗？

> ID：14651603
> 
> 赞同：0
> 
> 时间：2013-02-01T17:17:43.860
> 
> 标签：backbone.js, marionette

我的渲染方法在_initializeLayout 之前被调用：

```
var _initializeLayout = function() {

    console.log('initializeLayout...');

    Controller.layout = new Layout();

        Controller.layout.on("show", function() {

        vent.trigger("layout:rendered");

    });

    vent.trigger('app:show', Controller.layout);

}; 
```

我在渲染方法中使用布局：

```
// controller attach a sub view/ search View
vent.on("layout:rendered", function() {
    console.log('layout:rendered =>StartController');

    // render views for the existing HTML in the template, and attach it to the layout (i.e. don't double render)
    var inspectorStartView = new InspectorStartView();
    Controller.layout.inspector.attachView(inspectorStartView);

    var playerStartView = new PlayerStartView();
    Controller.layout.player.attachView(playerStartView);
}); 
```

当我尝试它时，我的渲染回调在_initializeLayout() 之前被调用。我让它在路由器/控制器方法中调用 _initializeLayout：

```
Controller.go_inspector_control_center = function(term) {
        _initializeLayout();
        //vent.trigger("search:term", term);
    }; 
```

我只是再次运行它，发现一个事件被另一个控制器的 _initializeLayout() 方法触发：

```
 // private
var _initializeLayout = function() {
    console.log('initialize Start Layout...');
    Controller.layout = new Layout();
    Controller.layout.on("show", function() {
        **vent.trigger("layout:rendered"); // <--**
    });
    vent.trigger('app:show', Controller.layout);
}; 
```

看来事件需要具有唯一的名称。我会试试的。如果有人知道，请插话。

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:00:08.523

你不能把我们 Java 人带到任何地方。答案（在 Javascript 中）是我确实需要唯一地命名我的事件。当你考虑它时，这是有道理的。

尽管我使用过的大多数事件系统都使用 X11/Java，但您不会使用它们给您的事件命名。

这是[关于事件命名的stackoverflow问题。](https://stackoverflow.com/questions/11450397/javascript-event-naming-conventions)

我希望我的公开学习能帮助他人。;-)

# c# - 如何从远程源配置 ASMX Web 服务 URL

> ID：14651604
> 
> 赞同：1
> 
> 时间：2013-02-01T17:17:44.937
> 
> 标签：c#, web-services, url, configuration, asmx

我们正在开发旧版 C# 企业应用程序。它的客户端使用多个 Web 服务，其 URL 以及许多其他设置都是从​​本地 app.config 文件中读取的。我们希望将这些设置迁移到全局数据库中以简化它们的管理。但是，我无法弄清楚如何（以及是否）可以迁移 Web 服务 URL。这些是从 VS 生成的服务客户端代码中读取的，我似乎无法找到一种方法来告诉 VS 使用与生成的设置提供程序不同的设置提供程序`Settings.Designer.cs`。

*我们可以在创建后*用我们想要的值覆盖服务外观的`Url`属性——这是目前在代码中的几个地方使用的解决方案。但是，我不想触及我们代码库中使用任何这些服务的每个部分（现在和将来）。我更不想修改生成的代码。

 *必须有一个更好、更清洁、更安全的解决方案——或者有吗？

顺便说一句，我们的应用程序在 .NET 2.0 上运行，在可预见的将来我们不会迁移到更新版本的平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:44:14.403

Visual Studio 生成的`Refernce.cs`文件指示将从设置中检索 Web 服务的 URL：

```
this.Url = global::ConsoleApplication1.Properties.
    Settings.Default.ConsoleApplication1_net_webservicex_www_BarCode; 
```

我相信[约翰桑德斯](https://stackoverflow.com/users/76337/john-saunders)在他的评论中给了你一个很好的建议。你需要一个[`SettingsProvider`类](http://msdn.microsoft.com/en-us/library/system.configuration.settingsprovider.aspx)：

> ...定义了用于存储应用程序设置架构中使用的配置数据的机制。.NET Framework 包含一个默认设置提供程序 LocalFileSettingsProvider，它将配置数据存储到本地文件系统。但是，您可以通过从抽象 SettingsProvider 类派生来创建备用存储机制。包装类使用的提供者是通过使用 SettingsProviderAttribute 装饰包装类来确定的。如果未提供此属性，则使用默认值 LocalFileSettingsProvider。

我不知道您采用这种方法取得了多大的进步，但它应该非常简单：

1.  创建`SettingsProvider`类：

    ```
    namespace MySettings.Providers
    {
        Dictionary<string, object> _mySettings;

        class MySettingsProvider : SettingsProvider
        {
            // Implement the constructor, override Name, Initialize, 
            // ApplicationName, SetPropertyValues and GetPropertyValues (see step 3 below)
            // 
            // In the constructor, you probably might want to initialize the _mySettings 
            // dictionary and load the custom configuration into it.
            // Probably you don't want make calls to the database each time
            // you want to read a setting's value
        }
    } 
    ```

2.  扩展项目分部类的类定义`YourProjectName.Properties.Settings`并用`SettingsProviderAttribute`:

    ```
    [System.Configuration.SettingsProvider(typeof(MySettings.Providers.MySettingsProvider))]
    internal sealed partial class Settings
    {
        //
    } 
    ```

3.  在覆盖`GetPropertyValues`方法中，您必须从`_mySettings`字典中获取映射值：

    ```
    public override SettingsPropertyValueCollection GetPropertyValues(
        SettingsContext context,
        SettingsPropertyCollection collection)
    {
        var spvc = new SettingsPropertyValueCollection();
        foreach (SettingsProperty item in collection)
        {
            var sp = new SettingsProperty(item);
            var spv = new SettingsPropertyValue(item);
            spv.SerializedValue = _mySettings[item.Name];
            spv.PropertyValue = _mySettings[item.Name];
            spvc.Add(spv);
        }
        return spvc;
    } 
    ```

正如您在代码中看到的那样，为了做到这一点，您需要知道添加到 Web 服务 ( )的引用时添加`app.config`的设置名称：`Settings.settings``ConsoleApplication1_net_webservicex_www_BarCode`

```
<applicationSettings>
    <ConsoleApplication30.Properties.Settings>
        <setting name="ConsoleApplication1_net_webservicex_www_BarCode"
            serializeAs="String">
            <value>http://www.webservicex.net/genericbarcode.asmx</value>
        </setting>
    </ConsoleApplication30.Properties.Settings>
</applicationSettings> 
```

这是一个非常简单的示例，但您可以使用更复杂的对象来存储配置信息以及上下文中可用的其他属性，例如`item.Attributes`或`context`为了获得正确的配置值。*

# jquery - jQuery生涩的滚动

> ID：14651609
> 
> 赞同：1
> 
> 时间：2013-02-01T17:17:52.847
> 
> 标签：jquery, animation, position

我有这种方法可以在屏幕上上下滚动左侧菜单：

```
$window.scroll(function () {

    var windowScroll = $window.scrollTop();
    var sideMenuOffset = $sidebar.offset();
    var scrollInArticle = Math.max(windowScroll - tutOffsetTop, 0);
    if (scrollInArticle > tutHeight) {
        scrollInArticle = tutHeight;
    }
    var percentageThrough = scrollInArticle / tutHeight;

    $sidebar.offset({ top: Math.max(windowScroll - (percentageThrough * 100), menuStartTop), left: sideMenuOffset.left });

}); 
```

它在大约 90% 的时间里运行顺畅，但它确实时不时地显得很生涩（在使用 Chrome 的良好桌面上查看）。

关于我们如何使这更顺畅的任何解决方案？

# iphone - 如何从功能菜单中关闭 @synthesize 指令

> ID：14651610
> 
> 赞同：0
> 
> 时间：2013-02-01T17:17:54.907
> 
> 标签：iphone, ios, objective-c, xcode, xcode4.3

我们使用`#pragma mark - StackOverFlow Example`来组织我们的功能菜单（实现导航菜单中最内层的菜单）。

我想要做的是通过删除不需要的指令来简化功能菜单，例如`@synthesize`或者我们可以使用任何忽略键来部分忽略功能菜单中的代码段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:22:08.670

好吧，从 Xcode 4.4 开始，你不再需要`@synthesize`你的属性了。编译器会自动为您执行此操作，因此您可以删除它们，从而将它们从下拉列表中删除。请记住，您需要为此功能使用 LLVM 4.0 编译器。

`@property NSString *string;`

将自动导致编译器`@synthesize string = _string;`在您的实现中执行等效的操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:23:02.653

您不能从函数菜单中隐藏声明；它可以提供帮助，如果某些内容属于该文件时未列出，则不要混淆。

因此，您有几个选择：

1.  完全删除`@synthesize`。带有 LLVM 4.0 的最新版本的 Xcode 意味着不再需要这些指令，属性将自行合成。如果您手动声明了支持实例变量并在整个代码中引用它，这可能不是一个容易的更改。IE

    ```
    @synthesize myProperty = m_myProperty;

    m_myProperty = ...; 
    ```

2.  `#pragma mark -`在您的属性合成之前和之后插入一个，以尝试将它们与其他方法分开。

恐怕这是您能做的最好的事情，没有任何其他`#pragma`指令可以从函数列表中删除某些内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T17:32:58.420

尝试将`@synthesize`语句写在一行中。
然后它将仅显示一行。

# bash - 自动解密并运行加密的 bash 脚本，无需将解密的文件保存到文件系统

> ID：14651616
> 
> 赞同：3
> 
> 时间：2013-02-01T17:18:20.253
> 
> 标签：bash, encryption, gnupg

我有一个运行时会产生敏感内容的 shell 脚本。它位于一个只有少数用户有权访问的盒子上。但是，我还通过以下方式添加了分层混淆以防止未经授权的使用：

1.  脚本必须以 root 身份运行
2.  必须向脚本传递特定的命令行参数才能产生任何输出
3.  脚本已由 shell 编译器“ [shc](http://www.thegeekstuff.com/2012/05/encrypt-bash-shell-script/) ”编码，以从普通用户（那些不知道使用 TRACE 或 STRINGS 仍查看实际代码的用户）屏蔽事实 #1 和 #2。

然后添加一层实际的安全性以再次保护更高级的用户和系统管理员，我还使用 gpg 加密了脚本。

我的问题是——是否有一个我可以运行的 gpg 命令（或其他加密方法）提示输入解密密码，并解密脚本并仅在内存中运行它（不将文件的解密版本保存到文件系统)?

我意识到敏感信息在执行时可能仍然存在于未受保护的内存中，我将单独解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:26:31.850

您可以通过以下方式捕获解密的输出

```
decrypted=$(gpg -d ...) 
```

然后您可以评估结果

```
eval "$decrypted" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:01:40.947

与 choroba 的答案对比的另一个简单选项：

将解密的输出保存到`/dev/shm/`. （在几乎所有 Linux 发行版上，默认情况下它都是一个 in-ram tmpfs 文件系统。）设置 a`trap`以在脚本退出时删除文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T15:11:37.307

很有可能我可以改进它，但这是另一个想法，您可以执行脚本而不是像 choroba 的示例中那样评估它。它允许您传递参数...

```
bash <( gpg -d ... ) arg1 arg2 
```

...不过，它“覆盖”了解释器。即我会用`bash -ue`. 取决于脚本以及您是否自己编写它们，可能会或可能不会有问题:)

# wordpress - wordpress 模板特定的元框？

> ID：14651622
> 
> 赞同：0
> 
> 时间：2013-02-01T17:18:37.237
> 
> 标签：wordpress

我为我的 WP 网站构建了几个不同的模板，每个模板都调用不同的元数据。

好的，我正在寻找一种添加元框的方法，该元框仅在选择正确的页面模板时才会显示。

假设我有一个 homepage.php 模板，这个模板调用了一些只有主页使用的特定元信息，一个示例的行动号召，所以我需要元框在选择正确的页面模板后出现，如果不同则消失页面模板被选中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:53:51.933

[get_page_template](http://codex.wordpress.org/Function_Reference/get_page_template)将返回您正在查看的模板。你可以打开它来显示你想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:03:20.893

好的，我终于找到了解决方法，这里是：

```
<?php
function my_admin() {
    $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ;
    $template_file = get_post_meta($post_id,'_wp_page_template',TRUE);
// check for a template type
    if ($template_file == 'home.php'){
        add_meta_box( 'product_info',
        'Informacion de Producto',
        'display_product_info_meta_box',
        'ex_producto', 'normal', 'high'
        );
    }  
}

function display_product_info_meta_box( $product_info ) {
    $product_price = floatval( get_post_meta( $product_info->ID, 'product_price', true           ) );
$product_code = esc_html( get_post_meta( $product_info->ID, 'product_code', true ) );
?>
<table>
    <tr style="width: 100%">
        <td >Precio Producto</td>
        <td><input type="text" size="80" name="product_info_product_price" value="<?php echo $product_price; ?>" /></td>
    </tr>
    <tr style="width: 100%">
        <td >Codigo de Producto</td>
        <td><input type="text" size="80" name="product_info_product_code" value="<?php echo $product_code; ?>" /></td>
    </tr>
</table>
<?php

}
add_action( 'admin_init', 'my_admin' );

?> 
```

所以...是的，我希望给别人一些好处:)

# c# - 'MyEnum' 类型的表达式不能用于类型参数

> ID：14651624
> 
> 赞同：2
> 
> 时间：2013-02-01T17:18:48.713
> 
> 标签：c#, linq, enums, extension-methods

我为我的枚举创建了 Enum ToFrendlyString 函数，但我不能在 Linq 中使用。

```
 public enum MyEnum
    {

        Queued = 0,           
        [Description("In progress")]
        In_progress = 2,            
        [Description("No answer")]
        No_answer = 6,

    }

  public static class EnumToFrendlyString
    {

        public static string ToFrendlyString(this Enum value)
        {
            return value.GetEnumDescription();
        }

        public static string GetEnumDescription(this Enum value)
        {
            FieldInfo fi = value.GetType().GetField(value.ToString());

            var attributes =
                (DescriptionAttribute[])fi.GetCustomAttributes(
                    typeof(DescriptionAttribute),
                    false);

            if (attributes.Length > 0)
                return attributes[0].Description;

            return value.ToString();
        }
    } 
```

当我尝试在 Linq 中使用此功能时，我收到错误

```
 var res = collection.AsQueryable().Where(p => p.UserID == UserID).OrderByDescending(p=> p.DateCreated).Select(p => new MyClass
                {                          
                     Date = p.DateCreated.ToString(),
                     Status = p.Status.ToFrendlyString(),                        
                }).Take(10).ToList(); 
```

如果我在同一个类中创建另一个函数，比如

```
 private string MyStatusToString(MyEnum status)
       {
           return status.ToFrendlyString();
       } 
```

并更改我的 Linq 以使用此功能，然后一切正常。

错误

```
Expression of type 'DAL.MyEnum' cannot be used for parameter of type 'System.Enum' of method 'System.String ToFrendlyString(System.Enum)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:04:17.533

我不确定您是否可以将`Enum`其用作此类扩展方法的类型 - 请改用此方法。我冒昧地整理了一下代码，请随意忽略这些更改 :)

```
public static class EnumToFrendlyString
{
    public static string ToFrendlyString<T>(this T value)
        where T : struct
    {
        return value.GetEnumDescription();
    }

    public static string GetEnumDescription<T>(this T value)
        where T : struct
    {
        return EnumDescriptionCache<T>.Descriptions[value];
    }

    private static class EnumDescriptionCache<T>
        where T : struct
    {
        public static Dictionary<T, string> Descriptions =
            Enum.GetValues(typeof(T))
                .Cast<T>()
                .ToDictionary(
                    value => value,
                    value => value.GetEnumDescriptionForCache());
    }

    private static string GetEnumDescriptionForCache<T>(this T value)
        where T : struct
    {
        if (!typeof(T).IsEnum)
        {
            throw new ArgumentException("Only use with enums", "value");
        }

        var descriptionAttribute = typeof(T)
            .GetField(value.ToString())
            .GetCustomAttributes(typeof(DescriptionAttribute), false)
            .Cast<DescriptionAttribute>()
            .FirstOrDefault();

        return (descriptionAttribute != null)
            ? descriptionAttribute.Description
            : value.ToString();
    }
} 
```

我添加了一个私有的通用类来缓存枚举成员的描述，以避免大量运行时使用反射。它看起来有点奇怪进出类首先缓存然后检索值，但它应该可以正常工作:)

[我在这个答案](https://stackoverflow.com/questions/10450566/what-is-the-best-method-for-attaching-a-single-key-value-pair-attribute-to-an-en/10451388#10451388)中给出的警告仍然适用 - 传递给字典的枚举值未经过验证，因此您可以通过调用`((MyEnum)5367372).ToFrendlyString()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:38:35.527

我不确定，但可能是您尚未将 DAL 项目添加到当前项目中（添加参考 -> 解决方案中的项目 -> Dal）。那么它可能会起作用。（我曾经遇到过类似的问题，这是我的解决方案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:07:29.707

似乎问题在于您的集合是`IQueryable<T>`并且查询提供程序正在尝试将您`Select()`转换为查询字符串。

避免这种情况的一种方法是`Select()`在内存中使用`IEnumerable<T>`：

```
var res = collection.AsQueryable()
            .Where(p => p.UserID == UserID)
            .OrderByDescending(p=> p.DateCreated)
            .Take(10)
            .AsEnumerable()
            .Select(p => new MyClass
            {                          
                 Date = p.DateCreated.ToString(),
                 Status = p.Status.ToFrendlyString(),                        
            })
            .ToList(); 
```

# symfony - Doctrine oneToMany - 查询一个

> ID：14651625
> 
> 赞同：1
> 
> 时间：2013-02-01T17:18:52.327
> 
> 标签：symfony, doctrine, relationship, one-to-many

我有一对多的关系，其中一页有多个版本。

```
**page**

id
parent_id

**page_version**
id
page_id
title
published
date 
```

这些由外键 page_id 关联。所以我有一个 Page 实体和一个 PageVersion 实体：

> ```
> class Page
> {
>     /**
>     * @ORM\OneToMany(targetEntity="PageVersion", mappedBy="page")
>     */
>    private $pageversions;
> } 
> ```

```
class PageVersion
{
    /**
     * @var page
     *
     * @ORM\ManyToOne(targetEntity="Page", inversedBy="pageversions")
     *
     */
    private $page;

} 
```

所以我可以获得每个页面的所有页面版本。但是，每个页面都只会有一个已发布的页面版本。因此，在查询时如何获取最新版本？即 Where published = '1' 而不是获取所有版本的列表？

这是我的查询示例：

```
public function findAllPages()
{
    $query = $this->getEntityManager()
        ->createQuery('
        SELECT DISTINCT p,v
        FROM XYZWebsiteBundle:Page p
        JOIN p.pageversions v
        WHERE v.published = :published
        AND v.deleted = :deleted'
    )->setParameters(array('published' => 1, 'deleted' => 0));

    try {
        return $query->getResult();
    } catch (\Doctrine\ORM\NoResultException $e) {
        return null;
    }
} 
```

但是，如果我遍历结果，我只能访问 Page 属性而不是 PageVersion 属性，例如标题、发布、日期等。

> $entities = $em->getRepository('XYZWebsiteBundle:Page')->findAllPages();

```
 foreach($entities as $entity){
        print($entity->getPageVersion()->getTitle());
    } 
```

返回的错误是致命错误：调用未定义的方法 Doctrine\ORM\PersistentCollection::getTitle()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:12:17.817

```
$er = $this->getDoctrine()->getRepository('XYZWebsiteBundle:Page');
$qb = $er->createQueryBuilder('p')
    ->where('p.published = :published')
                ->setParameter('published', 1)
    ;

$entities=$qb->getQuery()->getResult(); 
```

如果您确定发布状态的页面永远不会超过 1 个，您甚至可以使用 getOneOrNullResult() 而不是 getResult()。如果没有匹配的实体，则返回 null，如果有一个匹配则返回实体，如果有多个则返回异常。

编辑：好的，所以你必须在 PageVersion 而不是 page 上构建查询。尝试：

```
 $er = $this->getDoctrine()->getRepository('XYZWebsiteBundle:PageVersion');
    $qb = $er->createQueryBuilder('p')
        ->where('p.page = :page')
                    ->setParameter('page', $page)
        ->andWhere('p.published = :published')
                    ->setParameter('published', 1)
        ;

    $pageVersion=$qb->getQuery()->getResult(); 
```

$page 是您尝试为其查找已发布版本的页面。

# pear - PEAR 路径配置 注意已经定义

> ID：14651629
> 
> 赞同：0
> 
> 时间：2013-02-01T17:19:06.213
> 
> 标签：pear, config, php, notice

似乎我的 pear 配置不好，但找不到原因，使用此库时收到“通知已定义”消息。

在我的 php.ini 上，我有：

```
.:/usr/share/php:/usr/share/php/libzend-framework-php 
```

命令“which pear”返回：

```
/usr/bin/pear 
```

并且命令“pear config-get php_dir”返回：

```
/usr/share/php/ 
```

我不知道为什么似乎要加载两次类。

这就是我使用代码的方式：

```
 require_once ('Auth.php');//Pear Auth

       $dns = 'mysql://'.USER.':'.Util::decodePass(PASSWORD).'@'.SERVER.'/'.DBNAME;

       // All options:
       // Use specific username and password columns.
       // Use SHA1() to encrypt the passwords.
       // Retrieve all fields.
       $options = array(
       'dsn' => $dns,
       'table' => 'usuario',
       'usernamecol' => 'login',
       'passwordcol' => 'password',
       'cryptType' => 'md5', //'sha1'
       'db_fields' => '*'
       );

      // Create the Auth object:
      $auth = new Auth('DB', $options, 'show_login_form');

      // Start the authorization:
      $auth->start();

      // Confirm authorization:
      if ($auth->checkAuth()) {
         //Authorized      

              echo(javaScriptRedirect(true,$js));

       } else { // Unauthorized.

         echo(javaScriptRedirect(false,$js));

                //no se valida la autenticacion
       } 
```

# asp.net-mvc - Structuremap 没有为此对象定义无参数构造函数

> ID：14651635
> 
> 赞同：4
> 
> 时间：2013-02-01T17:19:19.197
> 
> 标签：asp.net-mvc, asp.net-mvc-4, structuremap

我是 StructureMap 的新手，一段时间以来我一直在尝试修复该错误。只是无法弄清楚如何解决它以及我在哪里做错了。我什至建立了一个模板 MVC4 站点，其中没有任何内容，但仍然出现该错误。

有人可以帮我吗？

```
public static class IoC {
    public static IContainer Initialize() {
        ObjectFactory.Initialize(x =>
                    {
                        x.Scan(scan =>
                                {
                                    scan.TheCallingAssembly();
                                    scan.WithDefaultConventions();
                                });

                        x.For<IDbSession>().Use(() => MvcApplication.DbSession);
                        x.For<IDbService>().Use<DbService>();
                    });
        return ObjectFactory.Container;
    }
} 
```

* * *

```
public class HomeController : Controller
{
    protected readonly IDbService _dbService;

    public HomeController(IDbService dbService)
    {
        _dbService = dbService;
    }

    ...
} 
```

* * *

```
public interface IDbSession : IDisposable
{
    void Commit();
    void Rollback();
} 
```

* * *

```
public interface IDbService
{
    StudentsService Students { get; }
    CoursesService Courses { get; }
    ...
} 
```

* * *

```
public class DbService : IDbService
{
    private readonly IDbSession _dbSession;        

    public StudentsService Students { get; }
    public CoursesService Courses { get; }
    ...

    public DbService(IDbSession dbSession)
    {
        _dbSession = dbSession;
    }
} 
```

* * *

```
public class MvcApplication : System.Web.HttpApplication
    {
        private static readonly string _connectionString;
        private static readonly IDbSessionFactory _dbSessionFactory;

        public static IDbSession DbSession
        {
            get { return (IDbSession)HttpContext.Current.Items["Current.DbSession"]; }
            private set { HttpContext.Current.Items["Current.DbSession"] = value; }
        }

        static MvcApplication()
        {
            _connectionString= ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            _dbSessionFactory = new DbSessionFactory(_connectionString);
        }

        protected MvcApplication()
        {
            BeginRequest += delegate
            {
                DbSession = _dbSessionFactory.Create();
            };

            EndRequest += delegate
            {
                if (DbSession != null)
                    DbSession.Dispose();
            };
        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:07:04.480

您必须配置依赖解析器以处理控制器构造函数中的参数。你可以在这里找到如何：[http ://ardalis.com/How-Do-I-Use-StructureMap-with-ASP.NET-MVC-3](http://ardalis.com/How-Do-I-Use-StructureMap-with-ASP.NET-MVC-3)

# python - 递归求解河内塔

> ID：14651636
> 
> 赞同：1
> 
> 时间：2013-02-01T17:19:20.330
> 
> 标签：python

我知道河内塔背后的想法，也知道算法，但我在实现它时遇到了麻烦。

```
class Hanoi:
    def __init__(self, n):
       == code==

    def move(self, src, dst):
   =code for moving the disk from source to destination==

    def spare(self, src, dst):
    ==Returns the peg which is not src and dst==

    def print_pegs(self):

h = Hanoi(4)

def hanoi(n, src, dst):         
        if n==1:
           h.move(src,dst)
        else:
            spare=h.spare(src,dst)
            hanoi(n-1,src,spare)
            hanoi(1,src,dst)
            hanoi(n-1,spare,dst)

hanoi(4, 0, 2) 
```

我遇到的问题是我不知道如何将递归定义与类函数结合起来移动磁盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:28:16.130

您需要将递归调用放在 and 的主体中`move()`，`spare()`并将​​函数的逻辑移动`hanoi()`到相关方法中

所以

```
class Hanoi(object):

    # snip

    def move(self, src, dst):

        # your logic goes here
        # example of a recursive call
        self.move(foo, bar) 
```

# ios - 在 iOS 中检索按最后播放时间排序的歌曲列表

> ID：14651641
> 
> 赞同：8
> 
> 时间：2013-02-01T17:20:11.550
> 
> 标签：ios, ipod, mpmediaquery

我需要按顺序从 iOS 设备中获取最近播放的*N首歌曲的列表。*

目前，我能想象到的唯一方法是通过 an 获取所有歌曲`MPMediaQuery`并手动对它们进行排序`lastPlayedDate`。

这是一个潜在的昂贵操作，我想知道是否有更好的方法。

* * *

编辑：经过一些测试，这是一项非常昂贵的操作。在包含 2500 首歌曲的测试库中，大约需要 20 秒：

1.  获取所有歌曲。
2.  为所有从未播放过的歌曲指定一个日期（1970 年 1 月 1 日）。
3.  按日期订购。
4.  获取前*N*个条目。

任何改进建议将不胜感激。

* * *

编辑2：现在解决了，但只是为了记录，这就是我正在做的事情。

我正在使用此处描述的块进行排序：[https](https://stackoverflow.com/a/805589/112702) ://stackoverflow.com/a/805589/112702 。只需将排序方法更改为 Bryan 的答案，我在 iPod Touch 3 上的速度提高了近 20 倍。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T18:37:33.200

一种方法是`MPMediaItem`获取从 s 获得的数组，并使用 a`MPMediaQuery`对其进行排序：`MPMediaItemPropertyLastPlayedDate``NSSortDescriptor`

```
NSTimeInterval start  = [[NSDate date] timeIntervalSince1970];

MPMediaQuery *songsQuery = [MPMediaQuery songsQuery];
NSArray *songsArray = [songsQuery items];

NSSortDescriptor *sorter = [NSSortDescriptor sortDescriptorWithKey:MPMediaItemPropertyLastPlayedDate
                                                         ascending:NO];
NSArray *sortedSongsArray = [songsArray sortedArrayUsingDescriptors:@[sorter]];

NSTimeInterval finish = [[NSDate date] timeIntervalSince1970];
NSLog(@"Execution took %f seconds.", finish - start); 
```

这将按照最近播放的顺序对新数组进行排序。我在 iPhone 4S 上使用 2000 首歌曲进行了测试，耗时 0.98 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:46:51.170

我认为这`MPMediaQuery`是目前从 iOS 设备获取最近播放的歌曲的唯一方法。

您可以使用属性`MPMediaItemPropertyLastPlayedDate`返回用户播放媒体项目的最新日历日期和时间。价值是一个`NSDate`对象。

[http://developer.apple.com/library/IOs/#documentation/MediaPlayer/Reference/MPMediaItem_ClassReference/Reference/Reference.html#//apple_ref/doc/constant_group/General_Media_Item_Property_Keys](http://developer.apple.com/library/IOs/#documentation/MediaPlayer/Reference/MPMediaItem_ClassReference/Reference/Reference.html#//apple_ref/doc/constant_group/General_Media_Item_Property_Keys)

# functional-programming - 如何在没有该安装程序的情况下在 Windows 中安装 SML/NJ？

> ID：14651648
> 
> 赞同：1
> 
> 时间：2013-02-01T17:20:48.397
> 
> 标签：functional-programming, sml, smlnj

好的，我知道 SML/NJ 有一个自安装的 windows `.msi`。

不幸的是，作为严格的安全策略，我不能将它安装在我的办公室 Windows 机器上，我不想与那些 IT 人员争论是否授予我权限。

那么，我可以在没有安装程序的情况下安装 SML/NJ`maybe some zip I can get and just uncompress it for the sml.exe`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:40:07.100

当然。我已经以这种形式为 Windows 构建了 SML/NJ：http: [//people.cs.uchicago.edu/~larsberg/smlnj.zip](http://people.cs.uchicago.edu/~larsberg/smlnj.zip)

要使用它，请将其解压缩到桌面等位置，然后在命令提示符（或全局）中执行：set SMLNJ_HOME=c:\Users\USERNAME\Desktop\smlnj

然后您应该能够运行 sml.bat。如果您遇到任何问题，请随时向我提问；我是 SML/NJ 的 Windows 版本的维护者。

# linux - linux多线程编程，原子代码区

> ID：14651651
> 
> 赞同：0
> 
> 时间：2013-02-01T17:20:58.267
> 
> 标签：linux, sockets, networking, pthreads

我正在编写一个网络应用程序。并且有一些关于线程竞争条件的问题。

“cd”是一个套接字描述符。我的一个线程检索套接字描述符并通过套接字发送一些数据。

假设 map_sd 返回 5。但是另一个线程可能会关闭套接字 5 并重新分配另一个。这将破坏程序的逻辑。

```
 // wait until there is valid descriptor mapping
                while( !(cd = map_sd( sd )) ){
                    sleep(1);
                }                   

                // forward PAYLOAD header
                if( send(cd, &payload, sizeof(PAYLOAD), MSG_NOSIGNAL) < 0 ){    
                    printf("send fail 813\n");
                } 
```

我想要的是使上面的代码“原子”当我在 linux 中使用 pthread 库时我该怎么做？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:00:33.020

您需要一个条件变量和一个互斥锁：

```
pthread_cond_t cond = PTHREAD_COND_INITIALIZER;
pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER; 
```

在传递 cd 的线程中：

```
pthread_mutex_lock(&lock);
/* here you pass cd through a data structure or whatever */
pthread_cond_signal(&cond);
pthread_mutex_unlock(&lock); 
```

在等待 cd 的线程中：

```
pthread_mutex_lock(&lock);
if (pthread_cond_wait(&cond, &lock) != 0) {
    /* handle error */
}
/* here you can acquire cd */
pthread_mutex_unlock(&lock); 
```

应该就是这样 - 您使用条件变量和锁进行独占访问，并通知其他线程资源现在可用。`pthread_cond_wait()`释放锁以等待，并在其他线程通知它后重新获取它`pthread_cond_signal()`。

编辑：格式化。

# tsql - 计算两个日期之间天数的程序

> ID：14651655
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:21:12.857
> 
> 标签：tsql

似乎是多余的，但我试图在一个过程中计算一个临时创建的表中的行数。

（注意：表格很可能编码错误）`@rows`需要对变量进行计数，并且应该从变量中输出一年中的确切天数`@StartDate`。（这包括闰年）。

创建的表还应在变量`INSERT`之后`VALUES`的每一天准确地记录一年。`@StartDate`

此作业需要 TEMPORARY TABLE。对不起人们，但这是老师要求的。

仅供参考：我是新手，非常感谢您的帮助:)

```
CREATE PROCEDURE usp_DateLookup
    @StartDate DATE,
    @Rows INT OUTPUT

AS
    DECLARE @countIndex INT
    DECLARE @yearDate DATE
    DECLARE @todaysDate DATE
    SET @yearDate = DATEADD(YEAR, 1,@StartDate)
    SET @todaysDate = GETDATE()
    BEGIN

        CREATE TABLE #DateLookup
        (
        DateID INT IDENTITY (1,1),
        DateDescription DATE
        )

     WHILE (SELECT DATEDIFF(DD,@StartDate, @yearDate) FROM #DateLookup) <= 366   
     BEGIN
         SET @countIndex = @countIndex +1

        INSERT #DateLookup (DateDescription)
        VALUES (DAY(@todaysDate)+ @countIndex)

    END
    SET @Rows = (SELECT COUNT(DateDescription) FROM #DateLookup) 
END
GO

DECLARE @StartDate DATE
DECLARE @Rows INT

SET @StartDate = '2012-05-06'
EXEC usp_DateLookup @StartDate, @Rows OUTPUT
PRINT CONVERT(NVARCHAR,@Rows) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:08:31.760

我不确定你为什么需要`#DateLookup`桌子？您可以按如下方式获取一年中的天数（最好用作函数）

```
CREATE PROCEDURE usp_DateLookup
    @StartDate DATE,
    @Rows INT OUTPUT

AS
    --DECLARE @StartDate DATE = '2012-05-06'
    select @Rows = datediff(day,@StartDate,dateadd(year,1,@StartDate))

END
GO; 
```

根据您的评论（您需要分配临时表），您可以在没有如下循环的情况下执行此操作；[SQL-DEMO](http://sqlfiddle.com/#!3/f0e54/1)

```
CREATE PROCEDURE usp_DateLookup
    @StartDate DATE,
    @Rows INT OUTPUT

AS
    --DECLARE @StartDate DATE = '2012-05-06'
    DECLARE @Rows INT = DATEDIFF(day,@StartDate,dateadd(year,1,@StartDate))

    CREATE TABLE #DateLookup
    (
      DateID INT IDENTITY (1,1),
      DateDescription DATE
    )

    ;with Digits as (
    select Digit 
    from (
        values (0), (1), (2), (3), (4), (5), 
            (6), (7), (8), (9)) as t(Digit)),
    Numbers as (
        select u.Digit + t.Digit*10 +h.Digit*100  as Number
        from Digits u
        cross join Digits t
        cross join Digits h
    )
    insert into #DateLookup
    select  dateadd(day,Number+1,@StartDate) from Numbers where Number < @Rows 
    order by Number

END
GO; 
```

你还需要一个循环吗？`INSERT`由于您尝试在字段中输入数字 ( `DAY(@todaysDate)+ @countIndex`) ，因此您失败了`DATE`

```
INSERT #DateLookup (DateDescription)
    VALUES ('this-should-be-a-valid-date') 
```

# javascript - 一次一个淡入附加元素

> ID：14651656
> 
> 赞同：0
> 
> 时间：2013-02-01T17:21:13.273
> 
> 标签：javascript, jquery

我有一个带有 ID 的数组，我正在从另一个页面加载带有这些 ID 的元素。

```
 $.each(idArr, function() {
        var divline = '<div class="line" id="' + this + '">';
        var url = 'allitems.php #' + this + ' div';
        $('#the-list').append($(divline).load(url).hide().fadeIn());
    }); 
```

它工作正常，但我希望加载的元素一次淡入一个，或者至少不是一次全部淡入。我无法弄清楚如何在我的代码中使用 .delay。或者还有其他方法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:23:16.947

一个简单的解决方案是使用`setTimeout`：

```
$.each(idArr, function(i) {
    var divline = '<div class="line" id="' + this + '">';
    var url = 'allitems.php #' + this + ' div';
    setTimeout(function(){
        $('#the-list').append($(divline).load(url).hide().fadeIn());
    }, i*1000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:23:25.453

试试这个方法：

```
$(".elements").each(function(i, e) { $(e).delay(i * 400).fadeIn(400); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:23:50.637

```
$.each(idArr, function(i,el) {
    var divline =  $('<div />', {'class':'line', id: el}),
        url = 'allitems.php #' + el + ' div';
    $('#the-list').append(divline.load(url).hide().delay(i*1000).fadeIn());
}); 
```

# sql - 如何确定脚本是否为 DML？OCI？

> ID：14651657
> 
> 赞同：1
> 
> 时间：2013-02-01T17:21:17.667
> 
> 标签：sql, oracle, ddl, oracle-call-interface, dml

我的目标是以某种方式发送（可能通过 OCI）处理 sql 脚本以确定它是 DML 脚本（所有代码块都不是 DDL 或 DCL）还是与其他数据语言的混合。

可能吗？如果是这样，怎么做？

假设您可能无法使用 OCI。您将如何自动进行检查以验证这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:32:29.877

[按照https://stackoverflow.com/a/13528133/103724](https://stackoverflow.com/a/13528133/103724)`OCI_ATTR_STMT_TYPE`的说明使用，您将获得此表[http://docs.oracle.com/cd/E14072_01/appdev.112/e10646/oci04sql 中的值之一。 .htm#CIHEHCEJ](http://docs.oracle.com/cd/E14072_01/appdev.112/e10646/oci04sql.htm#CIHEHCEJ)。

还有`OCI_ATTR_SQLFNCODE`提供更详细的信息，但正如上面的问题所示，使用起来可能很棘手。--DD

# javascript - Javascript - 有没有办法使用 ActiveX 将 HTML 以及格式导出到 word 文档？

> ID：14651658
> 
> 赞同：3
> 
> 时间：2013-02-01T17:21:24.897
> 
> 标签：javascript, html, ms-word, activex, activex-documents

我想出了一种使用 ActiveX 组件写入 word 的方法，但我不确定是否可以将 HTML 写入 Word，

```
function generateWord(elementIdValue){

  var value=$("#"+elementIdValue)).html();

  var word= new ActiveXObject('Word.Application');
  word.Visible=true;
  var doc=word.Documents.Add();
  var sel=word.Selection;
  sel.TypeText(value);

} 
```

我不想将 HTML 直接保存到 word（所有 html 标签都无法读取它），而是想将数据与 HTML 样式一起写入 word。

我已经成功地将 HTML 写入 Outlook 以及使用 HTMLBody 属性进行格式化，

```
var objO = new ActiveXObject('Outlook.Application');     
var objNS = objO.GetNameSpace('MAPI');     
var mItm = objO.CreateItem(0);     
mItm.To = "";
mItm.Subject = "Test";
mItm.HTMLBody = (($(("#"+elementIdValue)).html()) 
```

Word 对象中是否有类似于 Outlook 对象的属性可以使用 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T13:29:28.500

您可以在不使用 ActiveX 的情况下实现它。检查[这个](http://www.jqueryscript.net/other/Export-Html-To-Word-Document-With-Images-Using-jQuery-Word-Export-Plugin.html)。

# f# - 是否可以在 F# 中编写本机或访问本机代码

> ID：14651660
> 
> 赞同：1
> 
> 时间：2013-02-01T17:21:30.590
> 
> 标签：f#

是否可以在 F# 中编写本机或访问本机代码？我知道 F# 使用 .Net sdk，但我想知道是否可以加载 Native C++ dll 或直接使用字节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:24:05.967

是的，使用 P/Invoke：

[如何：从 F# 调用本机库](http://msdn.microsoft.com/en-us/library/hh304361%28VS.100%29.aspx)

# blackberry - 具有多个属性的字段

> ID：14651662
> 
> 赞同：0
> 
> 时间：2013-02-01T17:21:33.897
> 
> 标签：blackberry, user-interface, toolbar, blackberry-eclipse-plugin, blackberry-jde

如何在应用程序中创建具有多个属性的字段（每个字段包含多行文本、图像图标、日期等）。？？他们到底叫什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:36:02.673

在 BlackBerry Java UI 框架中，基本类是`Field`. A`Field`可能是`TextField`or`BitmapField`或`ButtonField`。

## 经理人

如果你想创建一个字段是一组字段，你通常会使用或创建一个*扩展* `Manager`类。[管理器](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html)是字段对象的容器，负责正确布局（大小和定位）它包含的字段。

此外， a`Manager`本身就是 a `Field`，因为它扩展了`Field`。因此，您可以拥有字段对象和管理器的层次结构。A`Manager`可以包含子`Manager`对象，这些子对象本身包含低级字段：按钮、标签、滑块等。

您可以自己扩展`Manager`该类，[并实现方法以正确调整其子项的大小和布局](http://supportforums.blackberry.com/t5/Java-Development/Create-a-custom-layout-manager-for-a-screen/ta-p/442990)，

```
protected abstract void sublayout(int width, int height);
public int getPreferredWidth();
public int getPreferredHeight(); 
```

或者您可以使用预先编写的 RIM 管理器之一，例如`VerticalFieldManager`或`HoriztonalFieldManager`.

`VerticalFieldManager`例如，按顺序从上到下垂直排列所有`Field`对象。您可以通过调用每个字段`add()`来调整子字段的间距。`setMargin()`

其他一些内置`Manager`子类：

*   `HorizontalFieldManager`- 按添加顺序从左到右水平布置子字段
*   `FlowFieldManager`- 水平布局子字段，直到水平空间已满，然后垂直（如页面*流*上的单词）
*   `AbsoluteFieldManager`- 在固定的 (x,y) 屏幕坐标处布置子字段
*   `GridFieldManager`- 在行和列的网格中布置子字段......就像一个表格

# c++ - 从视频文件录制中复制帧

> ID：14651663
> 
> 赞同：0
> 
> 时间：2013-02-01T17:21:37.710
> 
> 标签：c++, opencv

我从网络摄像头开始录制会话，然后我想制作另一个已经录制了 200 帧的文件，然后是来自网络摄像头的其他实时帧。

我这样做是为了从正在录制的“Blob.avi”文件中获取帧：

```
 VideoWriter writeVideo;

        VideoCapture savedVideo;
        savedVideo.open("E:\\Blob.avi");

        int startFrame = savedVideo.get(CV_CAP_PROP_FRAME_COUNT);
        cout << " startFrame:"<< startFrame;
        startFrame -= 200; 
        savedVideo.set(CV_CAP_PROP_POS_FRAMES,startFrame);
        cout <<"-"<< startFrame << " ms: " << savedVideo.get(CV_CAP_PROP_POS_MSEC) << endl;

        sprintf_s(filename,150, "E:\\FramesTest.avi");
        writeVideo.open(filename,xvid, 10, Size(640,480));
        Mat tempPic;
        for( int i = 0; i < 200; i++ ){
            savedVideo >> tempPic;
            writeVideo.write(tempPic);
        }
       //then add realtime frames. 
```

问题是它无法读取正在录制的文件中的总帧数：它给了我 0 和 ms。这样，它会实时开始新文件录制，而无需先复制另一个文件的 200 帧。

我认为问题在于文件视频正在使用中。那么如何从未发布的文件视频中复制一些帧？

编辑：我必须添加至少 30 毫秒的延迟：

```
 for( int i = 0; i < 200; i++ ){
            savedVideo >> tempPic;
            writeVideo.write(tempPic);
            Sleep(30)
        } 
```

这样它就可以工作，如果它从第 0 帧减去 200 开始，而不是从最后一帧减去 200。但这很慢：我失去了大约 10 秒的实时捕捉时间。也因为每帧都有重新编码。所以我认为最好先记录实时捕捉，然后在新创建的文件的开头添加 200 帧。我怎样才能做到这一点？可能无需重新编码，在文件级别更好。

这样做的目的是在检测到一些 blob 时制作视频，包括在 blob 触发前几秒钟的视频。

# xslt - 是否可以在 EXSLT str:replace 中使用变量？

> ID：14651667
> 
> 赞同：1
> 
> 时间：2013-02-01T17:22:01.697
> 
> 标签：xslt

我想用变量中的值进行字符串替换，如下所示：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:str="http://exslt.org/strings" extension-element-prefixes="str" >
<xsl:variable name="my-variable">bar</xsl:variable>
<xsl:template match="text()">
    <xsl:value-of select="str:replace( . ,'foo', $my-variable )"/>
</xsl:template>
</xsl:stylesheet> 
```

当我在文件上运行它时，例如，

```
<?xml version="1.0" encoding="utf-8"?>
<root>foobar</root> 
```

我来自 xsltproc / libxslt 这个错误

```
XPath error : Invalid type
xmlXPathCompiledEval: evaluation failed
runtime error: file C:/Users/Adam/Documents/WakhiLD/XSL/replace.xsl line 6 element value-of
XPath evaluation returned no result. 
```

在函数调用中使用变量似乎是合理的，所以我不知道我应该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:27:36.303

只需使用`<xsl:variable name="my-variable" select="'bar'"/>`它应该可以工作。您当前正在创建类型为结果树片段的变量，并且看起来扩展函数在传递此类参数时没有对字符串进行任何转换。但是只需创建一个如上所示的字符串变量就可以解决它。

如果您确实需要将变量创建为结果树片段，请尝试显式转换为字符串，如`<xsl:value-of select="str:replace( . ,'foo', string($my-variable) )"/>`.

# algorithm - 随机化网格中的数字

> ID：14651669
> 
> 赞同：0
> 
> 时间：2013-02-01T17:22:04.137
> 
> 标签：algorithm, permutation

我的应用程序视图显示了一个由 16 个数字组成的网格。每次按下按钮时，我都希望数字的排列发生变化，并且每次都是随机的。该应用程序通过有 16 个小的 UIImageView 来工作，每个都有与之关联的图像（数字）。目前，我通过生成一个随机数并让该数字对应于特定的排列来“随机化”排列。像这样：

```
int  number = rand() % 7;

if (number == 1) {
    space1.image = three;
    space2.image = ten;
    space3.image = one;
    space4.image = eight;
    space5.image = two;
    space6.image = five;
    space7.image = thirteen;
    space8.image = six;
    space9.image = four;
    space10.image = fifteen;
    space11.image = sixteen;
    space12.image = nine;
    space13.image = fourteen;
    space14.image = eleven;
    space15.image = twelve;
    space16.image = seven;
}
else if (number == 2) {
    space1.image = ten;
    ................
    .............etc 
```

显然有数百万种可能的安排，我在这里只捕捉其中的 7 个。任何人都可以提出一种真正随机化安排的方法吗？

我希望我已经足够清楚了。提前感谢您的帮助。

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:35:45.450

您可以简单地实现[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)算法。

您有一个默认组合，而不是硬编码多个组合，当您在其上应用算法时，它会转换为随机排列。

您可以通过这种方式实现它，例如：

```
NSMutableArray * space; // Array containing your UIImageViews
// Initial combination
[(UIImageView *)space[0] setImage:one];
[(UIImageView *)space[1] setImage:two];
...
[(UIImageView *)space[14] setImage:fifteen];
[(UIImageView *)space[15] setImage:sixteen];

[self fisherYatesShuffle:space]; 
```

FisherYates Shuffle 实现将是：

```
 - (void)fisherYatesShuffle:(NSArray *) array {
    for(int i = array.count - 1; i >= 0; i++) {
        int j = arc4random() % i;
        [space exchangeObjectAtIndex:i withObjectAtIndex:j];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:41:35.827

不是制作 16 个相同的实例变量，而是将`UIImageView`对象存储在一个数组中，将`UIImage`对象存储在一个可变数组中，并随机化图像数组的元素：

```
NSMutableArray *imageViews, *images;

imageViews = [[NSMutableArray alloc] init];
images = [[NSMutableArray alloc] init];

for (int i = 0; i < 16; i++) {
    UImageView *imageView = [[UIImageView alloc] initWithFrame:someFrame];
    [imageViews addObject:imageView];
    [imageView release];

    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"image_%d"], i];
    [images addObject:image];        
}

- (void)randomize
{
    for (int i = 0; i < 100; i++) {
        int idx1 = arc4random() % images.count;
        int idx2 = arc4random() % images.count;
        [images exchangeObjectAtIndex:idx1 withObjectAtIndex:idx2];
    }

    for (int i = 0; i < imagesViews.count) {
        [[imageViews objectAtIndex:i] setImage:[images objectAtIndex:i]];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:34:13.907

C 中的提示，因为这并不是您使用的 Obj-C 或 IDE 所特有的。

```
Image images[n];
numbers = {0, 1, 2, /* ... n - 1 */ };

shuffle(numbers);
Images pmut[n];
for (int i = 0; i < n; ++i) {
    pmut[i] = images[numbers[i]];
} 
```

# puppet - Puppet Enterprise for Windows 无法运行

> ID：14651675
> 
> 赞同：0
> 
> 时间：2013-02-01T17:22:21.757
> 
> 标签：puppet

尝试运行 Puppet Enterprise for Windows 时出现以下错误。

```
Faulting application name: ruby.exe, version: 1.8.7.370, time stamp: 0x4fede15f
Faulting module name: KERNELBASE.dll, version: 6.1.7601.17514, time stamp: 0x4ce7afc9
Exception code: 0x80000003
Fault offset: 0x00014159
Faulting process id: 0x9e4
Faulting application start time: 0x01ce00a0586d444c
Faulting application path: c:\Program Files (x86)\Puppet Labs\Puppet Enterprise\sys\ruby\bin\ruby.exe
Faulting module path: C:\Windows\syswow64\KERNELBASE.dll
Report Id: ac79500b-6c93-11e2-bda6-000c2947d060 
```

UAC 已禁用 防火墙已关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:32:20.910

我得到了调试 Windows 安装程序。我的错

# python - 使用 cmd 模块实时更改用户输入

> ID：14651680
> 
> 赞同：1
> 
> 时间：2013-02-01T17:22:40.000
> 
> 标签：python, windows

我希望能够在用户使用 cmd python 模块将文本键入（cmd.Cmd）提示符时更改字符。因此，当用户输入一个字符时，我希望能够处理该字符并在线更改它。有没有办法使用 cmd 模块来处理和替换输入的每个字符，或者我应该使用另一个模块？

编辑：这是为了在 Windows 环境中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T22:58:32.973

似乎您正在寻找使用 python 在 Windows 上挂钩键盘击键。如果我的假设没有记错，那么在 python 上挂钩并非易事，因为需要 dll。

你可以试试[pyHook](http://www.cs.unc.edu/Research/assist/developer.shtml)，它使用 Windows API 来完成这项工作。

这是[API](http://www.cs.unc.edu/Research/assist/doc/pyhook/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:26:55.323

我没有看到任何方法可以做到这一点，`cmd.Cmd`但可以使用`curses`- 请参阅[Curses Programming with Python](http://docs.python.org/3.1/howto/curses.html)。该`getch()`函数将返回键码，但除非`curses`被告知，否则不会回显`echo()`它。这将让您在屏幕上显示字符之前获取键码并按照您喜欢的方式对其进行转换（例如，转换为“X”以隐藏作为密码输入的字符）。

或者，虽然我没有使用它，但[Console 模块](http://effbot.org/zone/console-handbook.htm)似乎为 Windows 上的 Python 提供了等效的功能。

# html - Bootstrap - 粘性页脚溢出

> ID：14651692
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:23:23.243
> 
> 标签：html, css, twitter-bootstrap

我使用 Bootstrap 中的示例：

[http://twitter.github.com/bootstrap/examples/sticky-footer.html](http://twitter.github.com/bootstrap/examples/sticky-footer.html)

问题是当页面上的文本比屏幕分辨率（高度：100%）长时，红线下的所有内容都是页脚，但“测试”是内容：

[http://postimage.org/image/55l8q3xuz/](http://postimage.org/image/55l8q3xuz/)

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:33:51.503

如果您可以发布您的实际代码会有所帮助，但是有两种常见的方式可能会发生这种情况。

1.  您的内容有一个固定的高度，并且没有任何溢出集
2.  粘性页脚有一个负边距，在这种情况下，您需要在内容上放置一个补偿边距。如果您展示您的代码，我们可以帮助您进行实际测量。

# regex - RegEx 查找模式并忽略所有空格

> ID：14651694
> 
> 赞同：1
> 
> 时间：2013-02-01T17:23:23.330
> 
> 标签：regex, vb.net, visual-studio-2010

我想在脚本文件中找到以下 For Next 循环。我尝试了以下正则表达式，但不起作用。我不知道如何跳过所有的空格。For Next 中间的文本也可以变化。

正则表达式...

```
/[fF]or [eE]ach.*[aA]s [lL]ist[iI]tem [iI]n .*\.[]tems\s*.*[nN]ext/ 
```

寻找这个...

```
For Each item As ListItem In CheckBoxList1.Items
   If item.Selected = True Then
       MyList.Add(item.Text)
   End If
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:35:46.113

如果 For 和 Next 之间的内容可能会有所不同，我认为您正在寻找：

```
/[fF]or[\S\s]*?[nN]ext/ 
```

这将匹配任何看起来像**For(anything at all until next:)Next**

如果按照您的描述匹配更多单词，我会使用类似的内容：

```
/[fF]or\s+?[eE]ach[\S\s]+?[aA]s\s+?[lL]ist[iI]tem\s+?[iI]n[\S\s]+?[iI]tems[\S\s]+?[nN]ext/ 
```

如果您想要对此进行更详细的描述，请告诉我，但您在下面评论中的示例将无法确保中间词也存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:29:54.407

`\s`将匹配空格：

```
/[fF]or\s+[eE]ach.*[aA]s\s+[sS]tring\s+[iI]n\s+.*\.[]tems\s*.*[nN]ext/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:41:12.880

我认为这个可以做到： `/[fF]or\s+[eE]ach.*?[aA]s\s+[sS]tring\s+[iI]n\s+.*?\.[]tems\s+.*?\s+[nN]ext/` 记住`.*?`会匹配最短的字符串。

# javascript - jqplot反转y轴点等问题

> ID：14651697
> 
> 赞同：1
> 
> 时间：2013-02-01T17:23:37.097
> 
> 标签：javascript, jquery, jqplot

我得到这样的结果： ![在此处输入图像描述](../Images/92f35e39e81db25b4dc2e4532cc6aed6.png)

这很奇怪，因为我到底为什么要在我的 y 轴上得到这个值`1 1 2 2 2`。我预期的 Y 轴点只有 1 和 2，因为我得到的结果是

`[[["2013-01-30", "2"], ["2013-01-31", "2"], ["2013-02-01", "1"]]]`

我在这里要做的是将 Y 轴反转为 1 作为最高或顶部，就像在屏幕截图上一样。

这是我的代码：

我通过 ajax 在我的 json 结果中得到了这个。这是结果：

`[{"execution_datetime":"2013-01-30","sales_rank":"2"},{"execution_datetime":"2013-01-31","sales_rank":"2"},{"execution_datetime":"2013-02-01","sales_rank":"1"}]`，这是数据的结果`jQuery.each`

```
 var response =[[]];
    var maxSR = 1;
    jQuery.each(data, function(index, value) {
        if( this.sales_rank > maxSR ) {
        maxSR = this.sales_rank; //I am getting the largest number in the response array so that I can assign it on the Y-AXIS MIN 
        }
        response[0].push([this.execution_datetime, this.sales_rank]);
    });

    //response has already a value of:
    //[[["2013-01-30", "2"], ["2013-01-31", "2"], ["2013-02-01", "1"]]]

    var tmpMin = response[0][0];
    var xMin = tmpMin[0];

    var plot2 = $.jqplot('myChart',response,{
    axes:{
        xaxis:{
            renderer:$.jqplot.DateAxisRenderer,
            tickOptions:{formatString:'%b %#d'},
            tickInterval:"1 days",
            min: xMin,
          },
        yaxis:{
            tickOptions:{ formatString:'%d'  },
            max:1,
            min:parseInt(maxSR),
        },
    },
        highlighter:{
            show:true,
            sizeAdjust: 7.5,
        },
        cursor: {
          show:false,
        },
  }); 
```

我还尝试删除`tickOptions:{ formatString:'%d' },`y 轴上的，它似乎正在工作，问题是，我的 Y 轴上有一些我不喜欢的浮动。我将如何解决那个问题？

另一个问题，如果这将得到解决，是否可以设置一种对 x 轴的偏移量，以便点不会位于边界上？

对你的帮助表示感谢！谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:36:35.200

有了这个，您可以反转 Y 轴值：

```
tickOptions:{ formatString:'%i'} 
```

要消除 y 轴 1 1 2 2 2 上的值，您应该使用：

```
numberTicks: value 
```

> 是否可以对 x 轴设置一种偏移量，以便这些点不会位于边界上？

你可以使用这个：

```
xaxis:{
//
min: xMin <-- subtract 1 to this value.

//
yaxis:{
   min: parseInt(maxSR) <-- subtract 1 to this value. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:41:32.377

我认为以下代码中的最大值为 1，最小值为 2。您想将 max 设置为 2 并将 min 设置为 1

```
yaxis:{
                tickOptions:{ formatString:'%d'  },
                max:1,
                min:parseInt(maxSR),
            }, 
```

例子

```
 yaxis:{
                    tickOptions:{ formatString:'%d'  },
                    max:2,
                    min:1,
                }, 
```

# xml - 将 xsl 参数与 xsl if 子句中的值进行比较

> ID：14651701
> 
> 赞同：1
> 
> 时间：2013-02-01T17:23:47.170
> 
> 标签：xml, xslt, if-statement

我对 XSLT 很陌生。以下模板应该用于连接具有相同 item_group_id 的许多产品的颜色。

```
<xsl:template name="find-colors" mode="concat">
  <xsl:param name="param_item_group_id" />
  <xsl:param name="products" />
  <xsl:for-each select="$products/product">
    <xsl:if test="item_group_id = $param_item_group_id">
       <xsl:value-of select="concat($param_item_group_id,\'-\',item_group_id,\'-\', color,\', \')" />
    </xsl:if>
  </xsl:for-each>
</xsl:template> 
```

在调用模板中，item_group_id 设置为 $param_item_group_id。串联本身效果很好，但我似乎无法找到一种方法

```
<xsl:if test="item_group_id = $param_item_group_id"> 
```

工作。该语句始终为真，因此在此模板的输出中也存在这些类型的字符串

```
354655-354655-green, 54655-354632-red, 354655-354632-green 
```

它应该只在哪里

```
354655-354655-green 
```

谢谢，

彼得

**编辑：**

最终解决方案（改编自 JLRishe 建议）是使用

```
<xsl:if test="item_group_id[position()] = $param_item_group_id[position()]"> 
```

映射两个数组的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:58:37.800

我可以看到两种可能的解释：

1.  `$param_item_group_id`包含多个节点。
2.  有`product`多个 s `item_group_id`：

例如，如果`$param_item_group_id`看起来像这样：

```
[1] - <someNode>54655<someNode>
[2] - <someNode>354632<someNode> 
```

你有一个`product`这样的：

```
<product>
   <item_group_id>354632</item_group_id>
   <name>widgets</name>
   <color>periwinkle</color>
</product> 
```

The comparison would evaluate to `true` (because they have a value in common), and the `value-of` would produce `54644-354632-periwinkle` (because "54655" is the first node value in `$param_item_group_id`). In the opposite case (one node in `$param_item_group_id` and more than one `item_group_id` in a `product`), the same thing could happen.

That's only conjecture. I'd need to see your source XML and more of the XSLT to provide a more confident answer or help you remedy the issue.

I would expect this to prevent those incongruous outputs:

```
<xsl:if test="item_group_id[1] = $param_item_group_id[1]"> 
```

but I suspect there is a deeper underlying issue that this would not fix.

**To clarify your questions from the comments:**

The equality operator in XPath works differently from equality in a lot of other languages. Supposing `A` or `B` or both are node-sets, the expression `A = B` will be true if *any* of the values in `A` equal *any* of the values in `B`. Hence my description above.

Regarding this question:

> > correct me if I'm wring, but this should not display if it was an array, right?

It would display. Passing a nodeset to `concat()` converts it to a string value, and the string value of a nodeset is the string value of its first node. If the value of the first node in `$param_item_group_id` is 54644, then that is what would display.

I think that `$param_item_group_id` is exhibiting some behavior that you haven't pinned down and it's possible there's an issue in the way you're producing it. I'd suggest trying out the following to get a closer look at the contents of this variable:

```
<xsl:value-of select="concat('param_item_group_id contains ', 
                             count($param_item_group_id),
                             ' nodes.')" />
<xsl:for-each select="$param_item_group_id">
   <xsl:value-of select="concat(., ', ')" />
</xsl:for-each> 
```

# linux - 进程存在后保存 /proc/PID/

> ID：14651714
> 
> 赞同：2
> 
> 时间：2013-02-01T17:24:19.117
> 
> 标签：linux, process, systems-programming

我希望进程的 /proc/PID/ 目录即使在程序退出后也能保留一段时间，以便它的“祖父”可以从 /proc/PID/stat 中检查资源使用情况。我不能使用 wait4() 因为我担心“grand cild”的资源使用情况。那么如何保存 /proc/PID/ 目录呢？

**注意**：在退出程序之前复制 /proc/PID/stat 在我的上下文中不是解决方案，因为我需要该进程在其整个生命周期内的总资源使用统计信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:35:28.040

您的问题的答案可能是在完成后根本不让孙子退出。相反，它应该告诉祖父母它已经完成（通过管道或先进先出或信号甚至一些共享内存通道是可能的），以便祖父母可以从 /proc/PID 获取它需要的信息，然后告诉孙子退出（同样，可以使用任何方法，但信号可能是最简单的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:45:00.920

你不能。`/proc/PID`不是一个真正的目录——它是由内核构建来表示一个正在运行的进程。如果该进程不存在，则该目录也不存在，并且没有办法解决。

# python - Parse HTML uploaded CSV file in Python

> ID：14651726
> 
> 赞同：1
> 
> 时间：2013-02-01T17:25:05.043
> 
> 标签：python, csv, html-parsing

I am using GAE to host a website which needs inputs from a CSV file. After this csv file has been uploaded, I will convert it to a table. However, I met the problem about Mac and Windows compatibility issue. The CSV file generated in Mac will not be recognized, and I got the error:

```
new-line character seen in unquoted field - do you need to open the file in universal-newline mode? 
```

Here is my Python CODE

```
def loop_html(thefile):
    reader = csv.reader(thefile.file)   
    header = reader.next()
    i=1
    iter_html=""
    for row in reader:
        iter_html = iter_html +html_table(row,i)  #generate inputs table
        i=i+1

def html_table(row_inp,iter):
    mai_temp=float(row_inp[0])

    Input_header="""<table border="1">
                        <tr><H3>Batch Calculation of Iteration %s</H3></tr><br>
                        <tr>
                            <td><b>Input Name</b></td>
                            <td><b>Input value</b></td>
                            <td><b>Unit</b></td>
                        </tr>"""%(iter)
    Input_mai="""<tr>
                    <td>Mass of Applied Ingredient Applied to Paddy</td>
                    <td>%s</td>
                    <td>kg</td>
                </tr>""" %(mai_temp) 
    Inout_table = Input_header+Input_mai
    return Inout_table 
```

Later I changed the code 'reader = csv.reader(thefile.file) ' to 'reader = csv.reader(open(thefile.file,'U')) ' which gave me different types of error:

```
TypeError: coercing to Unicode: need string or buffer, cStringIO.StringO found 
```

Can anyone take a look at my code and give me some suggestions? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:53:16.527

I just found a solution. 'splitlines()' will handle the new line issue. Here is the [source](http://madebyknight.com/handling-csv-uploads-in-django/).

```
reader = csv.reader(thefile.file.read().splitlines()) 
```

# mysql - Mysql分组排名

> ID：14651728
> 
> 赞同：4
> 
> 时间：2013-02-01T17:25:09.413
> 
> 标签：mysql, greatest-n-per-group

*与[这个问题有关](https://stackoverflow.com/questions/1895110/row-number-in-mysql)。*

其实免得说我们要解决**mysql**中的分组排序问题。我们有一个表，每行代表一个实体，属于一个组。我们希望根据每个组单独的属性为每个实体分配一个等级。稍后我们可以对排名进行各种操作，例如要求每个组的前 10 个实体也满足另一个条件，等等。

例如，实体可以是根据他们最喜欢的编程语言属于不同“组”的程序员。然后每个程序员都有一个声誉（比如说在论坛上）。我们想添加一个额外的字段，该字段将是基于下降声誉的程序员排名。我们希望为每个组独立地执行此操作。

```
gid | repu | name |
1       1    john
1       3    anna
2       2    scot
2       1    leni 
```

成为

```
gid | repu | name | rank
1       3    anna      1
1       1    john      2
2       2    scot      1
2       1    leni      2 
```

现在让我们也要求**我们不想使用基于会话变量的解决方案**。是的，它们工作得很好，但它们显然违反了 mysql 的要求，即不在同一语句上读写会话变量。（[见这里](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)）

[现在这篇文章](https://stackoverflow.com/questions/1895110/row-number-in-mysql)中提出的解决方案说

```
-- SOL #1 (SELF-JOIN)
SELECT a.*, count(*) as row_number FROM test a
JOIN test b ON a.gid = b.gid AND a.repu <= b.repu
GROUP BY a.gid, a.repu 
```

这几乎可以做到这一点。我的一些问题是，这是合法的 SQL 还是违反了任何标准或 mysql 怪癖？是否保证它可以在 mysql 上运行？

[我在这里](http://forums.devshed.com/mysql-help-4/mysql-rank-function-487657.html)读到的另一个解决方案是，这对我来说更像是一种黑魔法，但看起来更优雅

```
-- SOL #2 (SUBQUERY)
SELECT t.* ,
    ( SELECT COUNT(*) + 1
        FROM test
        WHERE repu > t.repu AND gid = t.gid 
    ) AS rank
FROM test AS t
ORDER BY gid ASC, rank ASC 
```

这使用了一个引用外部表的子查询，并且也可以做到这一点。有人能解释一下这个是如何工作的吗？

此外，这里的问题与解决方案 #1 相同。

加上对评估两个提议的解决方案的性能/兼容性的任何评论。

编辑：其他方法，供参考

从[这篇文章](https://stackoverflow.com/questions/12109027/how-can-i-number-query-result-groups-by-row-result-order-in-a-single-query/12109250#12109250)中，会话变量方法的一种变体。**警告**：这是我要避免的。请注意，在单个语句中，@rand 和 @partition 会话变量被读取（在 WHEN 和 THEN 之后的情况下）和写入（在 THEN AND ELSE 之后的情况下以及在初始化变量的下一个子查询中）。

```
-- SOL #3 (SESSION VARIABLES / ANTIPATTERN)
SELECT t.*, ( CASE gid
             WHEN @partition THEN @rank := @rank + 1 
             ELSE @rank := 1 AND @partition := gid ) AS rank
FROM test t, 
    (SELECT @rank := 0, @partition := '') tmp
ORDER BY gid ASC, repu DESC 
```

这里还有一个基于集合的解决方案，相当复杂，由下面的一位同事发布。

```
-- SOL #4 (SET BASED)
SELECT x.*, FIND_IN_SET(CONCAT(x.gid,':',x.repu), y.c) rank 
    FROM test x 
    JOIN (
        SELECT GROUP_CONCAT(DISTINCT CONCAT(gid,':',repu) ORDER BY gid, repu DESC) c 
        FROM test GROUP BY gid
    ) y ON FIND_IN_SET(CONCAT(x.gid,':',x.repu), y.c) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:37:11.510

`JOIN`是合法的 MYSQL 语法。如果它不起作用，怀疑有人会将其标记为答案。

在子查询方面，它会比第一个解决方案快。查看`EXPLAIN PLAN`将是了解这些查询的执行的好主意。

还有另一种方法可以达到同样的效果：-

*   -- SOL #3：在这篇文章中以 30 票回答：

[MySQL 中的 ROW_NUMBER()](https://stackoverflow.com/questions/1895110/row-number-in-mysql)

# matlab - 在 parfor 循环内计算 PSD 但不是 for 循环时出错

> ID：14651730
> 
> 赞同：2
> 
> 时间：2013-02-01T17:25:10.780
> 
> 标签：matlab

我正在尝试使用 并行计算一系列光谱`parfor`，但我的`parfor`循环崩溃了。

我相当有信心崩溃不是由于未能预先分配变量，而是 matlab 正在以不同的方式计算频谱：

这是一个演示问题的简单脚本（在 Ubuntu 和 R2012b 上）：

```
% allocate the data and objects
mtm = spectrum.mtm;
data = rand(3000,1);
Fs = 500;

fprintf('Entering for loop\n');
for i = 1:5
    h = psd(mtm, data, 'Fs', Fs);
end

fprintf('Entering parfor loop\n');
parfor i = 1:10
    h = psd(mtm, data, 'Fs', Fs);
end 
```

`for`循环正确执行，但是，错误`parfor`出来了。这是输出：

> 进入for循环
> 
> 进入 parfor 循环
> 
> 警告：PSD 已被 SPECTRUM 对象取代。PSD 仍然有效，但将来可能会被删除。请改用 SPECTRUM（或其功能形式 PWELCH）。
> 
> > 在 psd 中 33 在 parallel_function>make_general_channel/channel_general 在 885 在 remoteParallelFunction 在 30 使用 parallel_function 时出错（第 589 行）
> 
> 需要向量（行或列）输入。
> 
> 错误堆栈：psd.m at 37

有没有人遇到过这个？有没有更好的方法来并行化谱计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:19:16.827

在咨询 Mathworks 支持后，通过在循环`spectrum.mtm`内移动对象的创建来解决问题。`parfor`

### 这有效

```
fprintf('Entering parfor loop\n');
parfor i = 1:10
    mtm = spectrum.mtm;
    h = psd(mtm, data, 'Fs', Fs);
end 
```

### 这不

```
mtm = spectrum.mtm;

fprintf('Entering parfor loop\n');
parfor i = 1:10
    h = psd(mtm, data, 'Fs', Fs);
end 
```

根本问题是这`spectrum.mtm`是一个 simulink 对象，而不是 matlab 对象，并且 simulink 对象不能在`parfor`循环中使用。

# c++ - 运行代码时是否有可能在 main() 之前调用其他方法/指令

> ID：14651731
> 
> 赞同：0
> 
> 时间：2013-02-01T17:25:21.133
> 
> 标签：c++, invoke, main

> **可能重复：**
> [在进入主函数之前，你能用 C++ 打印任何东西吗？](https://stackoverflow.com/questions/9439871/can-you-print-anything-in-c-before-entering-into-the-main-function)

在调用 int main() 之前是否有可能运行任何其他指令？

```
int main(){cout<<"a";} 
```

在 main() 调用之前，调用 cout<<"b"; 之前的某个地方。也许这个#define 东西可以提供帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T17:26:55.110

你不需要一个`define`. 只需创建一个全局对象（在同一个文件中），它的 ctor（或用于初始化它的任何其他东西，例如调用函数）将在 main 被调用之前运行。

编辑：同样，这些全局对象将在主退出后被销毁，因此它们的析构函数将在那时运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:39:15.960

全局对象在 main() 运行之前构建。所以你可以定义一个类，把你的代码放在它的构造函数中，然后声明这个类的一个全局实例：

```
class temp
{
public:
    temp()
    {
        cout << "before main" << endl;
    }

    ~temp()
    {
       cout << "after main" << endl;
    }
};

temp t;

int main()
{
    cout << "in main" << endl;
    return 0;
} 
```

全局变量也在 main() 运行之前初始化。您可以定义一个返回值的函数，然后调用该函数并将值分配给其声明中的全局变量，就像@jrok 显示的那样。

一些编译器还支持`#pragma startup`在启动时执行用户定义函数的语句（以及相应`#pragma exit`的关闭语句）：

```
void beforeMain()
{
    cout << "before main" << endl;
}
#pragma startup beforeMain

void afterMain()
{
    cout << "after main" << endl;
}
#pragma exit afterMain

int main()
{
    cout << "in main" << endl;
    return 0;
} 
```

# java - 在 Android 中加载屏幕时出错

> ID：14651734
> 
> 赞同：0
> 
> 时间：2013-02-01T17:25:27.290
> 
> 标签：java, android, android-layout

当我尝试加载屏幕时，它会出错。它有一个相对布局，里面有一个表格布局。该错误与屏幕膨胀有关，所以我认为这是相关的。

我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#777777"
android:orientation="horizontal" >

<TextView
    android:id="@+id/txtTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="70dp"
    android:text="Choose"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/txtTitle"
    android:layout_marginLeft="80dp"
    android:layout_marginTop="50dp"
    android:background="#000000" >
    <TableRow
        android:id="@+id/Header1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/txtProblema"
            android:layout_margin="2dp"
            android:gravity="center"
            android:background="#FFF000"
            android:textColor="#000000"
            android:text="Problema"
            android:layout_span="2"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtAbreviatura"
            android:layout_margin="2dp"
            android:gravity="center"
            android:background="#FFF000"
            android:textColor="#000000"
            android:text="Abreviatura"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkWorms"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtWorms"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="Gusano"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtGU"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="GU"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkCSBAdult"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtCSBAdult"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="CSB-Adulto"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtCSBA"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="CSB-A"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkCSBLarva"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtCSBLarva"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="CSB-Larva"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtCSBL"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="CSB-L"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkCSFLarva"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtCSFLarva"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="CSF-Larva"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtCSFL"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="CSF-L"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkAves"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtAves"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="Aves"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtAve"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="Ave"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkThrips"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtThrips"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="Thrips"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtTH"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="TH"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkHongo"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtHongo"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="Hongo"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtHG"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="HG"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkBacteria"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtBacteria"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="Bacteria/Pudrición"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtBac"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="Bac"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkKernelPopping"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtKernelPopping"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="Kernel Popping"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtKP"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="KP"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <CheckBox
            android:id="@+id/chkNoKernel"
            android:layout_margin="2dp"
            android:background="#FFFFFF"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtNoKernel"
            android:layout_margin="2dp"
            android:background="@string/table_bg_color"
            android:gravity="center"
            android:text="No Kernel"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#FF0000"
            android:textSize="30dp" />

        <TextView
            android:id="@+id/txtNK"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="NK"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@string/abrv_bg_color"
            android:textSize="30dp" />
    </TableRow>
</TableLayout>

<Spinner
    android:id="@+id/spnNoKernel"
    android:layout_width="500dp"
    android:layout_height="80dp"
    android:layout_alignLeft="@+id/tableLayout1"
    android:layout_below="@+id/tableLayout1"
    android:layout_marginTop="30dp" />

<Button
    android:id="@+id/btnSave"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="30dp"
    android:onClick="SaveKernelInspection"
    android:text="Save" />
</RelativeLayout> 
```

我的清单以防万一

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.domedroid"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="13"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.domedroid.MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.example.domedroid.DomeScreen"
        android:parentActivityName="com.example.domedroid.MainActivity"
        android:screenOrientation="portrait" >
        <meta-data 
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.domedroid.MainActivity" />
    </activity>

    <activity
        android:name="com.example.domedroid.PotholderScreen"
        android:parentActivityName="com.example.domedroid.MainActivity"
        android:screenOrientation="portrait" >
        <meta-data 
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.domedroid.MainActivity" />
    </activity>

    <activity
        android:name="com.example.domedroid.PlantScreen"
        android:parentActivityName="com.example.domedroid.MainActivity"
        android:screenOrientation="portrait" >
        <meta-data 
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.domedroid.MainActivity" />
    </activity>

    <activity
        android:name="com.example.domedroid.DataSelectionScreen"
        android:parentActivityName="com.example.domedroid.MainActivity"
        android:screenOrientation="portrait" >
        <meta-data 
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.domedroid.MainActivity" />
    </activity>

    <activity
        android:name="com.example.domedroid.InspectionScreen"
        android:parentActivityName="com.example.domedroid.MainActivity"
        android:screenOrientation="portrait" >
        <meta-data 
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.domedroid.MainActivity" />
    </activity>

    <activity
        android:name="com.example.domedroid.KDCScreen"
        android:parentActivityName="com.example.domedroid.MainActivity"
        android:screenOrientation="portrait" >
        <meta-data 
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.domedroid.MainActivity" />
    </activity>

    <activity
        android:name="com.example.domedroid.KernelInspectionScreen"
        android:parentActivityName="com.example.domedroid.MainActivity"
        android:screenOrientation="portrait" >
        <meta-data 
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.domedroid.MainActivity" />
    </activity>
</application>
</manifest> 
```

除了通常的 OnCreate 和 onCreateOptionsMenu 之外，这些屏幕没有代码。当然，setContentView 设置为该屏幕。错误是这样的：

```
02-01 13:20:22.314: E/AndroidRuntime(6494): FATAL EXCEPTION: main
02-01 13:20:22.314: E/AndroidRuntime(6494): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.domedroid/com.example.domedroid.KernelInspectionScreen}: android.view.InflateException: Binary XML file line #64: Error inflating class <unknown>
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.os.Looper.loop(Looper.java:137)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at java.lang.reflect.Method.invokeNative(Native Method)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at java.lang.reflect.Method.invoke(Method.java:511)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at dalvik.system.NativeStart.main(Native Method)
02-01 13:20:22.314: E/AndroidRuntime(6494): Caused by: android.view.InflateException: Binary XML file line #64: Error inflating class <unknown>
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.Activity.setContentView(Activity.java:1881)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at com.example.domedroid.KernelInspectionScreen.onCreate(KernelInspectionScreen.java:10)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.Activity.performCreate(Activity.java:5104)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-01 13:20:22.314: E/AndroidRuntime(6494):     ... 11 more
02-01 13:20:22.314: E/AndroidRuntime(6494): Caused by: java.lang.reflect.InvocationTargetException
02-01 13:20:22.314: E/AndroidRuntime(6494):     at java.lang.reflect.Constructor.constructNative(Native Method)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
02-01 13:20:22.314: E/AndroidRuntime(6494):     ... 26 more
02-01 13:20:22.314: E/AndroidRuntime(6494): Caused by: android.content.res.Resources$NotFoundException: File #0f6f0f from drawable resource ID #0x7f040002
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.content.res.Resources.loadDrawable(Resources.java:1970)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.view.View.<init>(View.java:3328)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.widget.TextView.<init>(TextView.java:454)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.widget.TextView.<init>(TextView.java:449)
02-01 13:20:22.314: E/AndroidRuntime(6494):     ... 29 more
02-01 13:20:22.314: E/AndroidRuntime(6494): Caused by: java.io.FileNotFoundException: #0f6f0f
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.content.res.AssetManager.openNonAssetNative(Native Method)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.content.res.AssetManager.openNonAsset(AssetManager.java:407)
02-01 13:20:22.314: E/AndroidRuntime(6494):     at android.content.res.Resources.loadDrawable(Resources.java:1962)
02-01 13:20:22.314: E/AndroidRuntime(6494):     ... 33 more 
```

感谢您的任何帮助！

编辑：我正在添加类的代码。就像我说的，它没有太多重要的代码，但也许你们可以看到我看不到的东西。

```
package com.example.domedroid;

import android.os.Bundle;
import android.view.Menu;

public class KernelInspectionScreen extends MainActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.kernel_inspection_screen);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:56:36.873

我认为问题来自您使用字符串作为背景的事实

> android:background="@string/table_bg_color"

它应该是一个颜色对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:58:01.250

根据我并查看您的日志错误是在这一行：

```
android:background="@string/table_bg_color" 
```

尝试在所有地方使用这条线：

```
android:background="#0f6f0f" 
```

**或者 ：**

将 XML 文件保存在 res/values/colors.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <color name="table_bg_color">#0f6f0f</color>
   <color name="translucent_red">#80ff0000</color>
</resources> 
```

然后像这样使用：

```
android:background="@color/table_bg_color" 
```

谢谢。

# android - Android Webview 无法显示高度超过 3000 像素的 jpg 图像

> ID：14651735
> 
> 赞同：0
> 
> 时间：2013-02-01T17:25:28.730
> 
> 标签：android, webview

我在 Android Activity 中使用 WebView 来显示一个简单的 html，里面只有一个 jpg。当jpg高度小于3000像素时，没有问题，完美显示，但是当jpg高于3000像素时，不显示。这可以是一个限制吗？还是内存问题？我正在使用 Android 2.3 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:10:21.620

您的问题是您使用的是巨大的图像，因此设备无法处理那么多数据。为了正确和漂亮地显示它，我的建议是使用一个**html 表格**，其中**每个单元格都包含一个图像切片**。

浏览器只会渲染正在显示的表格部分，因此您的图像将被正确加载。

我在一个项目中使用了这种方法并且效果很好。

问候。

# python - Python：每个应用程序的 Mako 模板查找

> ID：14651737
> 
> 赞同：0
> 
> 时间：2013-02-01T17:25:36.687
> 
> 标签：python, templates, cherrypy, mako

我正在使用带有 Mako 的cherrypy 作为模板引擎。

我希望 Mako 根据请求的应用程序查找不同的目录。

即我有三个“应用程序”：站点、管理和安装。

他们都有自己的模板文件夹，结构看起来像：

*   /模板
*   /模板/网站
*   /模板/管理员
*   /模板/安装
*   /模板/系统

/system 包含一些系统范围的模板，如 404 页面等。

我在尝试掌握cherrypy / mako时使用[Twiseless作为参考，但我不知道如何做到这一点。](https://github.com/Lawouach/Twiseless)

请继续阅读我如何尝试执行此操作的简要概述，但请注意：我认为我的做法完全错误！:) 因此，如果您有任何想法/建议，最好省去阅读更多内容的麻烦。

在我的主文件 server.py 中，我执行以下操作：

```
from libs.plugins.template import MakoTemplatePlugin

engine = cherrypy.engine
makoTemplate = MakoTemplatePlugin(engine, self.base_dir)
setTemplateDirs(makoTemplate, self.template_path) 
```

MakoTemplatePlugin 是上面链接的 Twiseless 中同名插件的略微修改版本。

这段代码所做的是将 TemplateLookup 设置为使用我的全局配置文件中的默认模板目录。IE

*   /模板
*   /模板/系统

然后，每次加载应用程序时，我都会调用一个函数 (setTemplateDirs) 来更新 Mako 搜索的目录。

我认为这会奏效，但事实并非如此。最初，我犯了为每个应用程序创建一个新的 MakoTemplatePlugin 实例的错误。这只是导致它们在每次页面加载时**都**被调用，从第一个实例化开始，仅包含基本的、非应用程序特定的目录。

因为这是第一次调用，所以它触发了 404 错误，因为它在错误的文件夹中搜索。

相反，我确保将对 MakeTemplatePlugin 的引用传递给我的所有应用程序。我想如果我`setTemplateDirs`每次调用每个应用程序时都运行，这将解决问题......但事实并非如此。

我不知道把函数放在哪里，所以每次请求页面时它都会运行......

例如

```
# /apps/site/app.py

import somemodule.setTemplateDirs

class Site(object, params):
    def __init__(self):
        self.params = params
        self.makoTemplate = params['makoTemplate']
        self.base_path = params['base_path']
        setTemplateDirs(self.makoTemplate, self.base_path, '', '/')

    @cherrypy.expose
    @cherrypy.tools.render(template='index.html')
    def index(self):
        pass 
```

这显然只在第一次加载应用程序时起作用......我尝试将更新函数调用移动到一个单独的方法`update`中，并尝试为每个页面调用它，例如：

```
@cherrypy.exposed
@cherrypy.tools.render(template='index.html')
@update
def index(self):
    pass 
```

但这只会给我与配置相关的错误。

与其继续纠结这个，不如有一个更简单*的*方法。

你会怎么做？

非常感谢，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:22:57.657

我得到了这个工作。感谢 stephan 提供 mako 工具示例的链接：[http](http://tools.cherrypy.org/wiki/Mako) ://tools.cherrypy.org/wiki/Mako 。

我只是稍微修改了一下以使其正常工作。

如果有人想知道，它的基础是您`tools.mako.directories`在全局配置中定义，然后您可以在单个应用程序配置文件中覆盖它。

例如

**服务器配置文件**

```
...
tools.mako.directories: ['', 'system']
... 
```

**站点配置文件**

```
...
tools.mako.directories: ['site', 'system']
... 
```

我做了一些额外的工作来将相对 URI 转换为绝对路径，但它的关键在上面已经解释过了。

# symfony - 如何结合 DoctrineExtensions 中的 Translatable 和 Sluggable？

> ID：14651738
> 
> 赞同：5
> 
> 时间：2013-02-01T17:26:04.823
> 
> 标签：symfony, doctrine-orm

我已经安装了[https://github.com/stof/StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle)并在 Country 实体中的特定字段上同时使用 Translatable 和 Sluggable：

```
...
class Country
{
    ...
    /**
     * @Gedmo\Translatable
     * @Gedmo\Slug(fields={"name"})
     * @ORM\Column(length=255, nullable=false)
     */
    private $slug; 
```

对于英语用户，页面的 URL 应该是 .../country/france，对于德语用户，应该是 .../land/frankreich。

在控制器中，我得到特定语言的 slug 并由这个特定于语言环境的 slug 过滤，我想检索一个国家实体。

我在这里或文档中没有找到任何关于如何做到这一点的信息。

感谢您提供有关如何解决该问题的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:21:54.753

刚刚[在这篇博客文章中找到了解决方案](http://gediminasm.org/article/translatable-behavior-extension-for-doctrine-2)。解决方案是使用 TranslationWalker 的 ORM 查询提示自动加入翻译表，因此您可以按任何翻译字段排序或过滤。这很棒！

然后代码看起来像：

```
...
->createQuery('SELECT...FROM MyFooBundle:Country c WHERE c.slug = :slug...)
->setParameter('slug', $slug)
->setHint(
    \Doctrine\ORM\Query::HINT_CUSTOM_OUTPUT_WALKER,
    'Gedmo\\Translatable\\Query\\TreeWalker\\TranslationWalker'
)
->getSingleResult(); 
```

顺便说一句：如果您想使用回退（即如果没有特定的翻译可用，则采用默认字符串/文本），然后只需通过 setTranslationFallback 方法调用（在教义扩展名.yml 中）为您的 gedmo.listener.translatable 服务配置它.

# java - 实例化新的 Activity 让应用程序崩溃

> ID：14651741
> 
> 赞同：0
> 
> 时间：2013-02-01T17:26:10.727
> 
> 标签：java, android, android-intent

我是 Android 应用程序开发的新手，现在正在尝试编写第一个应用程序。当我想显示另一个活动时，应用程序崩溃并显示以下日志（取自 LogCat）：

```
02-01 18:05:50.148: D/HomeScreen(24970): news_button clicked
02-01 18:05:50.203: D/dalvikvm(24970): newInstance failed: p0 i0 [0 a1
02-01 18:05:50.210: D/AndroidRuntime(24970): Shutting down VM
02-01 18:05:50.210: W/dalvikvm(24970): threadid=1: thread exiting with uncaught exception (group=0x40018578)
02-01 18:05:50.218: E/AndroidRuntime(24970): FATAL EXCEPTION: main
02-01 18:05:50.218: E/AndroidRuntime(24970): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{me.the_Seppi.freakhall/me.the_Seppi.freakhall.NewsScreen}: java.lang.InstantiationException: me.the_Seppi.freakhall.NewsScreen
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.os.Looper.loop(Looper.java:130)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at java.lang.reflect.Method.invokeNative(Native Method)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at java.lang.reflect.Method.invoke(Method.java:507)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at dalvik.system.NativeStart.main(Native Method)
02-01 18:05:50.218: E/AndroidRuntime(24970): Caused by: java.lang.InstantiationException: me.the_Seppi.freakhall.NewsScreen
02-01 18:05:50.218: E/AndroidRuntime(24970):    at java.lang.Class.newInstanceImpl(Native Method)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at java.lang.Class.newInstance(Class.java:1409)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-01 18:05:50.218: E/AndroidRuntime(24970):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
02-01 18:05:50.218: E/AndroidRuntime(24970):    ... 11 more 
```

执行的代码是：

```
//HomeScreen.java
//...
public void gotoNews (View view) {
    Log.d(TAG, "news_button clicked");
    Intent news = new Intent(this, NewsScreen.class);
    startActivity(news);
}

//NewsScreen.java
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_news_screen);
    Log.d("NewsScreen", "created");
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(R.string.update_text).setTitle(R.string.update_title).create().show();
    Log.d("NewsScreen", "Started update");  
} 
```

我在代码中找不到错误，因为日志中没有行号。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:27:40.660

您是否将此 NewScreen Activity 添加到清单文件中？这是崩溃活动的最常见问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:23:31.733

您需要将 Activity 添加到您要重定向到的清单文件中。

```
 <activity android:name="sanatan.engine.MainActivity" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T12:44:27.933

清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="me.the_Seppi.freakhall"
    android:versionCode="1"
    android:versionName="1.0" android:installLocation="auto">

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="me.the_Seppi.freakhall.HomeScreen"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="me.the_Seppi.freakhall.NewsScreen"
            android:label="@string/title_activity_news_screen" >
        </activity>
    </application>

</manifest> 
```

NewsScreen.java：

```
public abstract class NewsScreen extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_news_screen);
        Log.d("NewsScreen", "created");
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.update_text).setTitle(R.string.update_title).create().show();
        Log.d("NewsScreen", "Started update");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_news_screen, menu);
        return true;
    }

} 
```

我希望这能帮助你解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T13:59:18.437

问题已解决：刚刚重新创建了活动 NewsScreen 及其所有资源。

但是代码和清单条目是相同的。=> 出了什么问题？

# multithreading - Rails 3.2.x + Glassfish + 如何多线程？

> ID：14651750
> 
> 赞同：1
> 
> 时间：2013-02-01T17:26:41.753
> 
> 标签：multithreading, glassfish, jrubyonrails

我在 Glassfish 上部署了一个 JRuby 1.6.7/Rails 3.2.11 Web 应用程序（前面没有 Web 服务器）。我想让我的应用程序多线程。

一篇[最佳实践文章](https://github.com/jruby/jruby/wiki/RailsMulti-ThreadingBestPractices)建议我需要将最大和最小运行时间设置为 1，然后转到**config/environment.rb**并放入该行

```
config.threadsafe! 
```

但是，[Oracle 的一条说明](http://docs.oracle.com/cd/E19798-01/821-1760/gjixw/index.html)（连同[Github 上的这条说明](https://github.com/jruby/jruby-rack)）说我只需要在**web.xml**配置文件或命令行中设置运行时的最小和最大数量，它没有说明 config.threadsafe!。（我对这种方法的感觉是它会占用大量内存，因为每个运行时都会加载一个完整的 Rails 实例）。

哪种方法是正确的？他们俩都对吗？哪个是多线程的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:22:23.340

必须做到以下几点

1.  将最小和最大运行时间设置为 1
2.  进入 config/environments/production.rb 并取消注释该
    `#config.threadsafe!`行，您还必须为您希望线程安全模式工作的任何其他环境执行此操作。

通过执行这些操作，Rails 将使用一个运行时和多个线程运行，从而为您节省大量内存。有关线程安全 jruby on rails 应用程序的其他信息可以在这里找到[http://nowhereman.github.com/how-to/rails_thread_safe/](http://nowhereman.github.com/how-to/rails_thread_safe/)

如果您使用的是 Warbler，则可以跳过第一步 - 如果您只遵循步骤#2，默认情况下将设置最小和最大运行时查看 war 文件中的 web.xml，您将看到它已被设置。同样，如果未设置线程安全，您将看到缺少最小和最大设置。

话虽如此，Rails 4 默认启用线程安全。这是提交[https://github.com/rails/rails/pull/6685](https://github.com/rails/rails/pull/6685)

另外，这里有一篇关于如何和为什么的帖子：http: [//tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html](http://tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html)

# spring - 键中的 Spring @Cachable bean 引用

> ID：14651757
> 
> 赞同：1
> 
> 时间：2013-02-01T17:27:06.790
> 
> 标签：spring, ehcache, spring-el

我想在我的一个方法上使用@Cachable 注释，但我有一个问题，即结果取决于不是方法签名一部分的 spring bean 的属性。

所以我想要这样的东西：

```
@Cachable(value="mycache", key="#id, #myspringbean.referenceId")
MyResult myMethod(int id); 
```

我想这实际上是两个问题：如何使用复合键以及如何在表达式中使用另一个 spring bean。

如何使用复合键的问题可能可以像这个 SO 问题一样解决：[@Cacheable key on multiple method arguments](https://stackoverflow.com/questions/14072380/cacheable-key-on-multiple-method-arguments)

但是，我找不到有关如何在此表达式中引用另一个 spring bean 的任何信息。有可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:09:26.413

[您可以在 Spring 文档 ( http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/expressions.html](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/expressions.html) )中获得很多关于 SpEL 的详细信息。如您所见，您可以使用`@myBean`语法来使用 bean 引用。您必须在上下文中包含一个 bean 解析器才能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T17:13:46.637

不能使用当前的 Spring bean 名称。我想我会使用以下模式，以便每个 bean 对象都有自己的“键空间”，另请参阅[What can be the default key generator](https://jira.spring.io/browse/SPR-9036)。至于上面的问题可以使用：

```
@Cachable(value="mycache", key = "{#id, #root.targetClass.getDeclaredField('attribute').get(#root.target)}")
MyResult myMethod(int id); 
```

只需确保您的属性是公开的

# objective-c - 打印枚举的字符串表示，NSLog

> ID：14651760
> 
> 赞同：18
> 
> 时间：2013-02-01T17:27:26.553
> 
> 标签：objective-c, enums

我正在尝试 NSLog 我拥有的一些枚举。例如，这段代码打印枚举的整数表示，但我希望它输出实际的字符串名称，在本例中为 MON。我怎样才能做到这一点？

```
#import <Foundation/Foundation.h>
int main(void)
{
    typedef enum {
        SUN,
        MON,
        TUES
    } DAYS;

  DAYS d = MON;
  NSLog(@"%@", d);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-25T08:01:20.553

LLDB 调试器将显示字符串标识符。因此，您可以使用带有调试器命令操作的断点（在您的情况下为“p d”），而不是使用 NSLog，并将断点设置为在评估后自动继续。

您可以通过右键单击蓝色标记来配置断点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-01T17:35:05.803

不容易。枚举值的字符串标识符供开发人员使用，但在内部它只是一个具有特定类型的值（在您的示例中为`DAYS`）。

您可以编写一个翻译方法，以返回枚举值的名称，例如

```
- (NSString*)nameForDay:(DAYS)day {
    switch (day) {
        case SUN:
            return @"SUN";
        break;
        case MON:
            return @"MON";
        break;
        case TUES:
            return @"TUES";
        break;
        default:
            return nil;
        break;
    };

    return nil;
} 
```

这是一种令人讨厌的做法，因为它不能完全适应枚举值的变化，但它是一种将字符串与枚举值相关联的方法。

# mysql - 获取一种且只有一种类型的记录

> ID：14651761
> 
> 赞同：3
> 
> 时间：2013-02-01T17:27:27.197
> 
> 标签：mysql, sql, select

我坐了几个小时试图解决特定问题，但我无法得到它。最后，我决定把它贴在这里。这里有一些记录，

```
╔════════╦════════════╦═════════╦══════════════════╗
║ AUTOID ║ PERSONNAME ║ FLOWER  ║ Other columns... ║
╠════════╬════════════╬═════════╬══════════════════╣
║      1 ║ Alex       ║ Rose    ║                  ║
║      2 ║ Rene       ║ Rose    ║                  ║
║      3 ║ Rene       ║ Jasmin  ║                  ║
║      4 ║ Darwin     ║ Rose    ║                  ║
║      5 ║ Alex       ║ Rose    ║                  ║
║      6 ║ Darwin     ║ Jasmin  ║                  ║
║      7 ║ Alex       ║ Rose    ║                  ║
║      8 ║ Rene       ║ Jasmin  ║                  ║
║      9 ║ Hello      ║ World   ║                  ║
║     10 ║ Hello      ║ World   ║                  ║
╚════════╩════════════╩═════════╩══════════════════╝ 
```

我怎样才能得到这个结果，**他/她的所有记录中只有一种花的人**。

```
╔════════════╦════════════╗
║ PERSONNAME ║ FLOWERNAME ║
╠════════════╬════════════╣
║ Alex       ║ Rose       ║
║ Hello      ║ World      ║
╚════════════╩════════════╝ 
```

我尝试过的最好的查询是下面的这个查询，但仍然无法正常工作。

```
SELECT  DISTINCT t1.PersonName, t1.Flower
FROM    TableName t1 
        INNER JOIN
        (
            SELECT  personname, COUNT(DISTINCT flower) totals
            FROM    tableName
            GROUP   BY personname, Flower
        )  t2 ON t1.personname = t2.personname and
                    t2.totals = 1 
```

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:29:15.977

您可以使用`GROUP BY`子句，`HAVING`子句和`COUNT()`这个问题，*无需加入子查询*

```
SELECT  PersonName, MAX(Flower) flowerName
FROM    TableName
GROUP   BY PersonName
HAVING  COUNT(DISTINCT Flower) = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/584e0/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:15:07.490

或者，因为总是有不止一种方法可以给猫剥皮……

```
SELECT x.*
  FROM tablename x
  LEFT
  JOIN tablename y
    ON y.personname = x.personname
   AND ((y.flower <> x.flower)
    OR  (y.flower = x.flower AND y.autoid < x.autoid))
 WHERE y.autoid IS NULL; 
```

# ios - NSMetadataQuery 按更新日期排序不起作用

> ID：14651765
> 
> 赞同：4
> 
> 时间：2013-02-01T17:27:40.650
> 
> 标签：ios, sorting, icloud, uidocument, nsmetadataquery

我正在尝试按更新日期对 NSMetadataQuery 的结果进行排序，但它不起作用。

这是我的代码：

```
self.query = [[NSMetadataQuery new] autorelease];
[self.query setSearchScopes:@[NSMetadataQueryUbiquitousDataScope]];
NSSortDescriptor *sortKeys=[[[NSSortDescriptor alloc] initWithKey:NSMetadataItemFSContentChangeDateKey ascending:YES] autorelease];
[self.query setSortDescriptors:@[sortKeys]];
[self.query setPredicate:[NSPredicate predicateWithFormat:[NSString stringWithFormat:@"%%K LIKE '*.%@'", EXTENSION], NSMetadataItemFSNameKey]];
[self.query enableUpdates];
[self.query startQuery]; 
```

但是我收到的结果肯定不是按更新日期排序的……有什么建议吗？

# iphone - 如何以编程方式更改主窗口笔尖名称？

> ID：14651767
> 
> 赞同：0
> 
> 时间：2013-02-01T17:27:49.243
> 
> 标签：iphone, ios, mainwindow

如何更改主窗口笔尖名称？我正在为 iPhone4 和 iPhone5 使用两个 xib。但我的项目有主窗口。如何检查和更改 iPhone5 和 iPhone4 的 xib。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:31:37.643

使用以下宏：

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

然后在您的代码中：

```
if (IS_IPHONE_5) {
... load the nib for iPhone5 ...
} else {
... load the nib for iPhone4 ...
} 
```

# c - 是否可以在 printf 内部的另一个函数中使用 2 个函数返回？

> ID：14651776
> 
> 赞同：0
> 
> 时间：2013-02-01T17:28:20.923
> 
> 标签：c

我正在尝试创建 3 个函数，一个用于计算单词，一个用于计算字母，另一个用于打印字母和单词的平均值。我在最后一个函数（`printing_average()`） printf 中无法理解的 xcode 中出现错误...

感谢你的帮助。

我的代码：

```
...main()
int num_of_words()

{
    int userInput;
    int numOfWords = 0;

    while ((userInput = (getchar())) != EOF)

    {
        while (userInput != ' ')
        {
            if (userInput == ' ')
                numOfWords++;
        }
    }

    return numOfWords;
}

int num_of_letters()

{
    int userInput;
    int numberOfLetters = 0;

     while ((userInput = (getchar())) != EOF)
    {
        if (ispunct(userInput) && numberOfLetters > 0)
        {
            numberOfLetters--;
        }

        else if(userInput == 'n' && numberOfLetters > 0)
        {
            numberOfLetters--;
        }

        else if (userInput == ' ' && numberOfLetters > 0)
        {
            numberOfLetters--;
        }

        else if (isdigit(userInput))
            printf("please enter only characters:\n");
            continue;
    }

    return numberOfLetters;
}

int printing_average()

{
    printf("please enter couple of words:\n");

    return printf("the average of number of letters and number of words is: %d", num_of_letters()/num_of_words());

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:33:40.743

我没有尝试编译你的程序，但我会说这个逻辑不起作用：

```
while (userInput != ' ')
{
    if (userInput == ' ')
        numOfWords++;
} 
```

像这样， numOfWords 永远不会增加，所以在你最后一次打印中，你将被零除...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:43:06.973

要回答您的实际问题：是的，您可以调用任意数量的函数作为 printf 调用的一部分。

如果您想实际计算字母和单词的同一组单词，那么您的逻辑不起作用。每次调用“getchar()”时，都会从输入缓冲区中取出一些东西。因此，第一次调用将读取一些输入，直到看到 EOF。此时，第二个函数被调用，它立即看到 EOF，因此不会有任何字母/单词要计算。

要解决这个问题，您需要将代码重新排列为： 1\. 将所有输入收集到一个数组中，然后使用这两个函数来确定每种事物的数量。2\. 编写一个新函数，在一个函数中计算两个事物的数量。

我更喜欢选项二。这是一个更简单的解决方案，如果输入非常大，也不会导致问题 - 当然，这需要一些时间，但您不需要存储所有内容然后计算两次！

# delphi - 为什么在使用 TStream 类时会出现“抽象错误”？

> ID：14651780
> 
> 赞同：5
> 
> 时间：2013-02-01T17:28:35.657
> 
> 标签：delphi

当我尝试运行以下简单代码序列时，我收到`Abstract Error`错误消息：

```
type
  TForm1 = class(TForm)
    Image1: TImage;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

procedure TForm1.Button1Click(Sender: TObject);
var
  ImageStream: TStream;
begin
  ImageStream := TStream.Create;
  Image1.Picture.Bitmap.SaveToStream(ImageStream);
  ...
end; 
```

我需要提取流以`TBitmap`供以后处理...我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:30:26.847

TStream[类](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TStream)是一个抽象类，是所有流的基础。

> TStream 是流对象的**基类**类型，可以读取或写入各种存储介质，例如磁盘文件、动态内存等。
> 
> 使用专门的流对象来读取、写入或复制存储在特定介质中的信息。

您可能想要使用[TMemoryStream](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TMemoryStream)或[TFileStream](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TFileStream)，顾名思义，它将流内容存储在内存或系统文件中。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  ImageStream: TMemoryStream;
begin
  ImageStream := TMemoryStream.Create;
  try
    Image1.Picture.Bitmap.SaveToStream(ImageStream);
    ...
  finally
    ImageStream.Free;
  end;
end; 
```

# javascript - 在带有上下文菜单的 Firefox 中右键单击时目标未定义

> ID：14651785
> 
> 赞同：-2
> 
> 时间：2013-02-01T17:28:57.300
> 
> 标签：javascript, jquery, firefox

我正在使用代码来创建自定义上下文菜单。它的工作但是在Firefox中有一个问题。当右键单击选择框/下拉列表或按钮时，它会在 Firefox 中出现以下错误：

```
TypeError: this.target is undefined
[Break On This Error]   Filtered chrome url chrome://browser/content/nsContextMenu.js
nsContextMenu.js (line 162)
TypeError: gContextMenu is null 
```

以下代码在 Chrome 和 Internet Explorer 中有效，但在 Firefox 中出错：

```
$(document).on("contextmenu",function(e){
        if($(e.target).prop("tagName")=="A"){
         //do something
        }
}); 
```

请注意，到目前为止，此错误仅在 Firefox 中发生，当右键单击以下标签时。

```
<select>
<button> 
<input type='checkbox'> 
```

然而，文本框工作正常。

编辑：好的，即使“contextmenu”函数中没有代码，它仍然会给出错误。

# 更新：这似乎是 Firefox 中的一个 Firebug 问题，因为使用 Firefox 的开发人员工具 javascript 控制台没有出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:13:51.990

这个问题可以通过禁用 Firebug 来解决。这是一个与萤火虫相关的问题，而不是 Firefox 本身的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:30:47.810

尝试将标签名称与`DOM`这样的对象一起使用`e.target.tagName`

```
$(document).on("contextmenu",function(e){
        if(e.target.tagName =="A"){
         //do something
        }
}); 
```

# entity-framework - 实体框架代码优先 - 模型更改中断种子

> ID：14651787
> 
> 赞同：1
> 
> 时间：2013-02-01T17:29:01.370
> 
> 标签：entity-framework

我们使用 Entity Framework Code First 5 已经有一段时间了，没有出现大问题。

我最近发现，我对模型所做的任何更改（例如添加字段或删除字段）都意味着 Seed 方法不再运行，从而使我的数据库处于无效状态。

如果我反转更改，则种子方法运行良好。

我已经尝试对模型的不同部分进行更改，所以这不是相关的具体更改。

任何人都知道我如何（a）调试具体问题是什么，或者（b）自己遇到这个问题并知道如何解决它？

**更新：**模型更改后，无论我多次查询数据库，它都没有运行种子。但是，我发现如果我手动运行 IISRESET，然后重新执行执行查询的 Web 服务，它*就会*运行种子！任何人都知道为什么会这样，为什么突然我需要在数据库初始化和种子执行之间重置 IIS？

非常感谢史蒂夫

# .net - VB.Net Lambda 查询

> ID：14651789
> 
> 赞同：4
> 
> 时间：2013-02-01T17:29:11.203
> 
> 标签：.net, vb.net, linq, lambda

我知道我可以更改这样的查询

```
Dim myList As List(Of Tickets) = (From a In db.myTable
                  Where a.ID = id AndAlso a.IsOnline = True).ToList 
```

到拉姆达

```
Dim myList as List(of Tickets) = db.Where(Function(x) x.ID = id ANDAlso a.IsOnline = true).ToList 
```

如何编写 lambda 版本并告诉它使用结果创建一个新对象？像这样：

```
Dim myList As List(Of Tickets) = (From a In db.myTable
                             Where a.ID = id AndAlso a.IsOnline = True
                             Select New TicketType With {
                                       .Id = a.rsID.ToString,
                                       .Title = a.rsTitle}).ToList 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:30:10.120

您正在寻找`Select()`方法：

```
.Select(Function(x) New TicketType With { ... }) 
```

# c# - Autofac 难题

> ID：14651794
> 
> 赞同：1
> 
> 时间：2013-02-01T17:29:43.153
> 
> 标签：c#, autofac, lifetime-scoping

我使用 Autofac 作为我选择的 IoC 容器。这个问题的其余部分指的是 SignalR 与 SignalR 的结合，但不需要真正的 SignalR 知识来回答；这是一个源于 Autofac 的问题。

作为使用 Autofac 作为 SignalR 的依赖解析器的一部分，我想提供我自己的 IJsonSerializer 实例，配置我喜欢的方式。但是，我不想让 IJsonSerializer 实例在软件的其余部分中共享。

为此，我使用附加注册创建了一个新的生命周期范围，并将该范围提供给依赖解析器。这是我的问题开始的时候。

我没有意识到的是，通过这样做，以前从根容器中检索到的 SignalR 请求的每生命周期实例依赖项现在正在从生命周期范围请求，因此在整个 SignalR 中共享。不是很好。例如，短期数据库会话现在在我的应用程序的生命周期内共享。

如何使我的每生命周期实例范围依赖项基本上假装我传递给 SignalR 的生命周期范围不应该用于导致这些依赖项被重用？或者，我怎样才能完全避免创建生命周期范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:16:35.493

我最终重写了 SignalR 的 Autofac 集成，以支持为每个 HTTP 上下文创建生命周期范围，方法是依赖 Autofac MVC 支持：

[https://github.com/bytenik/Autofac.Integration.Mvc.SignalR](https://github.com/bytenik/Autofac.Integration.Mvc.SignalR)

（注意这是 Autofac.Integration.Mvc **.SignalR**，而不是 Autofac.Integration.SignalR。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:25:25.410

问题已有几个月了，但我想我会与您分享我使用的方法（也许有人可以改进它）。

我向我的集线器添加了一个事件，在集线器处理后触发。（实际上是通过一个基础集线器，因为无论如何我已经有了一些共同的逻辑）

```
public event Action OnDisposing;

protected override void Dispose(bool disposing)
{
    if (OnDisposing != null) OnDisposing.Invoke();
} 
```

有了这个，我然后修改了 autofac 注册这个集线器的方式。解析时，会创建一个新的生命周期范围，并在释放集线器时将范围的 dispose 方法设置为触发。

```
builder.Register(x =>
{
    ILifetimeScope scope = x.Resolve<ILifetimeScope>().BeginLifetimeScope();
    MyHub hub = new MyHub(scope.Resolve<IMyDependency>());
    hub.OnDisposing += scope.Dispose;
    return hub;
})
.As<MyHub>().InstancePerDependency(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:34:42.607

您可以考虑将首选的 IJsonSerializer 实现设置为命名或键控注册，由依赖它的组件专门请求。我对 SignalR 的了解还不够，无法告诉您如何或在哪里可以完成，但它可能会帮助您找到可行的解决方案。

更多详情：[http ://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices](http://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices)

# c++ - C++ | 对象列表

> ID：14651798
> 
> 赞同：0
> 
> 时间：2013-02-01T17:30:10.620
> 
> 标签：c++, list

我有`Item`（一些类）的列表，这个类有 3 个变量`price`，，`name`和`count`。

我想知道如何删除他们价格为的所有项目`320`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T17:38:29.337

那这个呢？

```
std::list<Item> l;
//...
l.remove_if ([] (Item const& i) {
    return i.price == 320;
}); 
```

请参阅文档：

*   [http://en.cppreference.com/w/cpp/container/list/remove](http://en.cppreference.com/w/cpp/container/list/remove)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T17:34:25.433

如果您`std::list`用作容器，请使用`std::list::remove_if`; 请参阅@wilx 答案。

* * *

如果您*不*使用`std::list`，而是使用另一个容器，请使用[`std::remove_if`](http://en.cppreference.com/w/cpp/algorithm/remove).

```
#include <algorithm>

list.erase(std::remove_if(list.begin(), list.end(), [] (Item const& i) {
    return i.price == 320;
}), list.end()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:01:18.443

以防万一您使用的是 c++ 而不是 c++11 - 它类似于：

```
bool my_predicate (const Item& value) { return (value.price==320); }

void foo() {
  std::list<Item> l;
  //...
  l.remove_if (my_predicate);
} 
```

# jquery - 启用文本框时，JQuery DatePicker 未显示在文本框中

> ID：14651800
> 
> 赞同：0
> 
> 时间：2013-02-01T17:30:25.363
> 
> 标签：jquery, asp.net

我有一组控件，它们位于 ajax 更新面板中，这些控件是通过用户勾选复选框来启用的。其中一个控件是一个文本框，它使用 JQuery Datepicker 用日期填充文本框。我看到的问题是启用文本框时，您单击日期选择器未显示的文本框。我可以让日期选择器显示的唯一方法是在验证器被修复以显示没有设置日期之后。

没有魔法密码。如果选中该复选框，则 txtDate.enabled = true。

有没有人遇到过这个问题？如果是这样，它是如何解决的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:39:56.330

可能，在 UpdatePanel 重新加载之后，正在重新创建 HTML 内容并且 datepicker 事件绑定丢失。

尝试以这种方式注册您的日期选择器：

```
<script type="text/javascript">
$(document).ready(function() {      
    $(".datepicker").datepicker();

    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function(evt, args) {
        $(".datepicker").datepicker();
    });
});
</script> 
```

也检查此帖子：[帖子 1](https://stackoverflow.com/questions/6072713/using-jquery-ui-datepicker-inside-updatepanel)和[帖子 2](https://stackoverflow.com/questions/520645/jquery-datepicker-ms-ajax-updatepanel-doesnt-work-after-post-back)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:35:26.397

试试这个

//此函数将在文本框回发后触发。

```
function pageLoad(sender,args){
  $(".datepicker").datepicker();
} 
```

也[读这个](http://forums.asp.net/t/1735774.aspx/1)

# java - 一段时间后失去 JPA 连接

> ID：14651803
> 
> 赞同：1
> 
> 时间：2013-02-01T17:30:40.230
> 
> 标签：java, hibernate, jpa

每次 API 空闲一段时间时，我都会失去与数据库的连接（时间无法精确定义。它可能在几秒钟的空闲时间后发生，有时在几分钟后空闲时间，有时甚至在码头重新启动后）。这个问题在不同的机器上是可以重现的，所以我认为它与 mysql 数据库直接无关。

抛出的异常可以在[这里找到](https://gist.github.com/raw/c80ccb7748f2e1dcf7af/0bf51ecefa0bf90045076b481a8bafdf7041c277/gistfile1.txt)

数据库配置基于hibernate和spring：

```
 <!-- c3p0 of version 0.9.2.1 (current stable) -->
 <!-- spring data: 1.2.0.RELEASE -->
 <!-- mysql connector: 5.1.18 -->
 <!-- hibernate: 4.1.9.FINAL --> 
 <bean id="basisDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass" value="${jdbc.driverClassName}" />
    <property name="jdbcUrl" value="${jdbc.url}" />
    <property name="user" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="20" />
    <property name="maxIdleTime" value="600" />
    <property name="maxConnectionAge" value="86400" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="de.yourdelivery.data.*" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="false" />
            <property name="showSql" value="true" />
            <property name="database" value="MYSQL" />
        </bean>
    </property
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

数据库连接和驱动程序如下：

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://xxx:3306/xxx?zeroDateTimeBehavior=convertToNull 
```

它甚至不能通过扩展 jdbc.url

```
&autoReconnect=true&autoReconnectForPools=true 
```

我使用 OpenSessionInView 模式在推土机映射期间延迟加载所有我需要的关系（我知道它被认为是一种反模式，但到目前为止它工作得很好，所以目前没有将其归咎于该模式）

mysql`wait_timeout`设置为28800

C3PO 的启动日志看起来像这样

> 属性] 13:34:54,823 INFO MLog:80 - 使用 log4j 日志记录的 MLog 客户端。13:34:54,883 信息 C3P0Registry:204 - 初始化 c3p0-0.9.1.2 [建于 2007 年 5 月 21 日 15:04:56；调试？真的; 跟踪：10] 13:34:55,111 INFO XmlWebApplicationContext:1350 - [class com.mchange.v2.c3p0.ComboPooledDataSource] 类型的 Bean 'deDataSource' 不符合所有 BeanPostProcessors 处理的条件（例如：不符合自动代理）13:34:55,148 INFO XmlWebApplicationContext:1350 - [class com.mchange.v2.c3p0.ComboPooledDataSource] 类型的 Bean 'plDataSource' 不符合所有 BeanPostProcessors 处理的条件（例如：不符合自动代理条件） 13:34:55,150 INFO XmlWebApplicationContext:1350 - Bean 'dataSource' 类型 [class de.yourdelivery.data.routing.*******, 密码=********}，propertyCycle -> 0，testConnectionOnCheckin -> false，testConnectionOnCheckout -> false，unreturnedConnectionTimeout -> 0，useTraditionalReflectiveProxies -> false] 13:34:56,086 信息方言：123 - HHH000400：使用方言：org.hibernate.dialect.MySQLDialect 13 :34:56,095 INFO LobCreatorBuilder:120 - HHH000424：禁用上下文 LOB 创建作为 createClob() 方法引发错误：java.lang.reflect.InvocationTargetException 13:34:56,108 INFO TransactionFactoryInitiator:73 - HHH000268：事务策略：org.hibernate.engine .transaction.internal.jdbc.JdbcTransactionFactory 13:34:56,112 INFO ASTQueryTranslatorFactory:48 - HHH000397：使用 ASTQueryTranslatorFactory 13:34:56,149 INFO 版本：24 - Hibernate Validator 4.2.0.Final 13:34:56,916 INFO XmlWebApplicationContext:1350 - Bean '[class org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] 类型的 entityManagerFactory' 不符合被所有 BeanPostProcessors 处理的条件（例如：不符合自动代理的条件）***

 ***那么为什么应用程序在空闲时间会失去连接呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:06:36.423

有趣的问题

它可能由于多种原因而发生。您的应用服务器正在失去与您的数据库的连接。查看日志很难判断只有空闲的连接是唯一被杀死的连接。您的数据库服务器可能没有分配连接。我希望你已经检查了你的数据库日志是否有错误。您如何处理服务中的交易？你在使用春季交易吗？

如果您使用外部连接池提供程序，最好始终指定destroy-method，以便在spring应用程序关闭时立即关闭数据源

```
<bean id="basisDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close"> 
```

在您的 c3p0 池设置中更改以下内容

采取两种方法删除`maxConnectionAge`&`maxIdleTime`

通过更改以下两个参数进行测试，它们在性能损失方面是昂贵的

```
testConnectionOnCheckout =true 
preferredTestQuery =SELECT 1 
```

如果您能够使用上述设置解决它

将上述设置更改为以下设置，因为以下设置在性能方面的成本较低

```
idleConnectionTestPeriod – 30 
preferredTestQuery =SELECT 1 
```

发表你的发现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:17:55.937

我会检查

*   mysql 是否没有从其一侧关闭连接 - my.cnf 中 wait_timeout 的值是多少？

*   如果hibernate使用自己的内部连接池，你应该设置hibernate.connection.provider_class，你可以发布你的hibernate配置吗？见[http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#d5e150](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#d5e150)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:26:46.033

您需要定期进行连接测试，以便防火墙等网络设备不会终止连接。此处的所有详细信息：[C3P0 配置](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T21:21:18.450

我建议，首先按照“user395072”的建议在您的应用程序 bean 配置中添加一个销毁方法

除此之外，请检查 mySQL 连接和服务器配置属性。我相信，mySQL 有大约 1000 个查询的默认限制（我在 mySQL 5.24 上看到了这个）。据我推测，断开连接发生在 mySQL 层——服务器可能“认为”不再需要连接。如果有固定的“断开连接”时间框架或与断开连接相关的任何用户事件，则可能会出现应用程序配置问题。

在您的情况下，我强烈认为这是数据库服务器配置。***

# ios - 如何使 iPhone 库中的图像在 iOS 中旋转？

> ID：14651807
> 
> 赞同：2
> 
> 时间：2013-02-01T17:30:56.167
> 
> 标签：ios, xcode, image, rotation

我有一个应用程序，它显示从库中选择的歌曲中的艺术作品，`iPod`并希望让它不断旋转。

到目前为止的代码如下：

```
-(void)chosen:(MPMediaItem*)song withObject:(id)obj
{

    AppDelegate* app = (AppDelegate*)[[UIApplication sharedApplication] delegate];

    //ARTWORK STUFF
    UIImage *artworkImage = [UIImage imageNamed:@"noArtworkImage.png"] 

    MPMediaItemArtwork *artwork = [song valueForProperty: MPMediaItemPropertyArtwork];

    if (artwork)
    {
        artworkImage = [artwork imageWithSize: CGSizeMake (200, 200) ];
    }
    [app.viewController.artworkImage1 setImage:artworkImage];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:37:47.847

使用 Quartz 核心框架。这是未经测试的，但我想它应该在理论上起作用。

```
#import <QuartzCore/QuartzCore.h>

CABasicAnimation *fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
fullRotation.fromValue = [NSNumber numberWithFloat:0];
fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
fullRotation.duration = 6;
fullRotation.repeatCount = 1e100f;
[app.viewController.artworkImage1.layer addAnimation:fullRotation forKey:@"360"]; 
```

# c++ - 运行代码时是否有可能在 main() 之后调用其他方法/指令

> ID：14651810
> 
> 赞同：0
> 
> 时间：2013-02-01T17:31:03.277
> 
> 标签：c++, invoke, main

调用 int main() 后是否有可能运行任何其他指令？

```
int main(){cout<<"a";} 
```

在 main() 调用之后，调用 cout<<"b"; 之后的某个地方。没有任何变化`main()`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T17:33:00.443

静态对象的析构函数和用 注册的函数[`std::atexit`](http://en.cppreference.com/w/cpp/utility/program/atexit)，在`main`退出后执行。

```
#include <iostream>
#include <cstdlib>

struct S {~S() {std::cout << "c";}};
void f() {std::cout << "b";}

S s;

int main() {
    std::atexit(f);
    std::cout << "a";
} 
```

输出：abc

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T17:32:42.593

你可以把你的最后一部分放在[**`atexit()`**](http://www.cplusplus.com/reference/cstdlib/atexit/). 它将在程序终止时运行，即在您对 main() 的调用完成之后。

你也可以有多个`atexit`s 。

> 如果对该函数的不同调用指定了多个 atexit 函数，则它们都作为堆栈以相反的顺序执行（即，最后指定的函数是退出时第一个执行的函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T17:32:30.037

是的，定义一个`cout << "b"`在其析构函数中执行的类，然后定义该类的全局实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T17:32:55.310

简而言之，选择很少。您可以使用`atexit()`在 main 退出后发生某些事情，或者您可以拥有一个全局对象，其析构函数在 main 退出后调用。但是 main 的结束是你程序的正式结束。

# mongodb - 云托管中的MongoDB，好处

> ID：14651816
> 
> 赞同：-2
> 
> 时间：2013-02-01T17:31:34.983
> 
> 标签：mongodb, amazon-ec2, cloud-hosting, dotcloud, joyent

我仍在与 mongoDB 战斗，我认为这场战争不会很快结束。

我的数据库大小为 15.95 Gb；

*   对象 - 9963099；
*   数据大小 - 4.65g；
*   存储大小 - 7.21g；
*   范围 - 269；
*   索引 - 19；
*   索引大小 - 1.68g；

供电：

```
Quad Xeon E3-1220 4 × 3.10 GHz / 8Gb 
```

让我为专用服务器付出高昂的代价。在 VPS 6GB 内存上，不导入数据库。

迁移到云服务？

[https://www.dotcloud.com/pricing.html](https://www.dotcloud.com/pricing.html)

我尝试加快速度，但 mongoDB 内存最大为 4Gb（552.96 美元/月 o_0），我什至无法导入您的基础，内存不足。或者我对云服务一无所知（没有经验）？云服务对大型数据库 mongoDB 不可用？

```
2 x Xeon 3.60 GHz, 2M Cache, 800 MHz FSB / 12Gb 
```

[http://support.dell.com/support/edocs/systems/pe1850/en/UG/p1295aa.htm](http://support.dell.com/support/edocs/systems/pe1850/en/UG/p1295aa.htm)

将在该服务器上运行我的数据库吗？

这当然是所有的乐趣和获得的开发经验，但已经开始黯然失色...... =]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:07:43.073

这种大小的数据库应该没有问题。我们在 Dotcloud 上运行一个具有 100 GB 数据的 mongodb 实例。这可能只是因为 Dotcloud 默认情况下每个服务只允许 10GB 的硬盘空间。

我们能够在 4GB 的 RAM 上备份和恢复该实例——尽管这需要几个小时

我建议您直接向他们发送电子邮件 support@dotcloud.com 以获得增加实例的 HDD 分配的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:15:13.237

您还可以考虑使用作为服务的 MOngoDB 的 ObjectRocket。对于 20Gb 数据库，价格为每月 149 美元 - [http://www.objectrocket.com/pricing](http://www.objectrocket.com/pricing)

# php - 使用 PDO 计算表的行数

> ID：14651822
> 
> 赞同：0
> 
> 时间：2013-02-01T17:31:52.027
> 
> 标签：php, pdo, count

我想知道，使用 PDO 使用 PHP 计算表行数的最佳方法是什么？

这是我所拥有的，但没有得到任何东西`$count`。

```
$count = $con -> query("SELECT COUNT(*) FROM item_descr")->fetch(PDO::FETCH_NUM);
echo $count[0];
if (count($count)>0)
{
$subStatus = "The email introduced is already in our database.";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:45:42.227

没有理由对 fetch() 返回的数组使用 PHP count() 函数。计数已在 SQL 中计算，因此您希望将*值*存储在结果中，而不是结果的计数。

我会这样写：

```
$countStmt = $con->query("SELECT COUNT(*) FROM item_descr");
if ($countStmt === false) {
  // do something to report the error
}
$count = 0;
while ($row = $countStmt->fetch(PDO::FETCH_NUM)) {
  $count = $row[0];
}
if ($count > 0)
{
  $subStatus = "The email introduced is already in our database.";
} 
```

*始终*检查 query() 的返回值是否是有效的 PDOStatement。任何错误都会导致它返回`false`，并且标量值`false`不是具有 fetch() 方法的对象。换句话说，您不能以流畅的接口方式（`$con->query()->fetch()`）进行调用，因为 query() 不能保证返回对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:34:20.050

```
$count = $con->query("SELECT COUNT(*) as `num` FROM `item_descr`")
             ->fetch(PDO::FETCH_ASSOC);

echo $count['num'];

if ( $count['num'] > 0 )
{
  $subStatus = "The email introduced is already in our database.";
} 
```

会工作。如果您在查询中执行 COUNT，您将始终只有一个结果，即行数。所以 count($result) 总是会给你 1。在我的例子中，我使用查询中的 COUNT。

# python - 解析 csv 文件而不忽略第一行

> ID：14651825
> 
> 赞同：0
> 
> 时间：2013-02-01T17:32:16.187
> 
> 标签：python, csv

我为 csv 文件编写了一个小型解析器，从第一行读取列数。

但是，我需要第一行进行计算……有没有办法不忽略第一行？

```
with open(dataset_path, "r") as f:
    coloumns =  f.readline().strip().split(',')
    numRows = 0
    sums = coloumns
    for line in f:
        values = line.split(',')
            for i in xrange(len(values)):
                sums[i] = float(values[i]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:42:39.453

如果您的文件不是很大，您可以一次读取所有行：

```
lines = f.readlines()
columns = lines[0].strip().split(',')
numRows = 0
sums = columns
for line in lines:
    values = line.split(',')
    for i in xrange(len(values)):
        sums[i] = float(values[i]) 
```

# unix - 从差异重新创建文件

> ID：14651828
> 
> 赞同：3
> 
> 时间：2013-02-01T17:32:22.720
> 
> 标签：unix, diff

如何从差异中创建原始文件，我拥有其中一个文件并在不知不觉中删除了另一个文件。是否有任何工具可以将 diff 输出转换为 'ed' diff（diff -e 输出）格式或补丁输出格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:35:27.647

**如果你有：**

*   旧文件，以及
*   差异

那么这只是以通常的方式应用差异的问题：

```
patch the_file <the_diff 
```

这只是应用差异的正常用例。

**如果你有：**

*   新文件，和
*   差异

那么您可以使用`patch`'s`-R`选项简单地反向应用补丁：

```
patch -R the_file <the_diff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:35:13.593

这正是`patch`它的用途！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:35:14.107

是的，用于[`patch`](http://linux.die.net/man/1/patch)将差异应用于原始文件之一。

# tinymce - TinyMCE 不会将 html 注释包装在

> ID：14651829
> 
> 赞同：0
> 
> 时间：2013-02-01T17:32:23.517
> 
> 标签：tinymce, modx

...这是正确的行为，但是在 TinyMCE 3.4.7 中具有此设置的文件在哪里（在 modx Revolution 2.2.6 中是 TinyMCE 4.3.3）？是否可以添加其他一些例外？例如，如果我希望除 img 之外的所有内容都包含在 p 中，等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:28:16.317

您可以配置什么是有效的，什么是无效的。为此检查 tinymce 配置参数 valid_elements、valid_children 和 extended_valid_elements。

# xml - 如何将具有多列的行转换为具有两列（字段名和值）和多行的表？

> ID：14651830
> 
> 赞同：3
> 
> 时间：2013-02-01T17:32:28.913
> 
> 标签：xml, sql-server-2008, select, xfdf, select-for-xml

因为我讨厌要求具体的解决方案，所以这里是我的问题的背景，以防我以错误的方式接近它。如果您想跳过背景并直接回答问题，请跳至粗线。我正在创建一个 PDF 表单，该表单将预填充来自 SQL 数据库的数据。为此，我需要将数据库中的数据导出到 XFDF 文件中，然后我可以轻松地将其与空白 PDF 表单合并以填写值。

XFDF 文件具有以下格式：

```
<fields>
    <field name="FirstName">
        <value>John</value>
    </field>
    <field name="LastName">
        <value>Smith</value>
    </field>
</fields> 
```

其中“FirstName”和“LastName”对应于 PDF 表单上的字段名称，“John”和“Smith”是数据库中用于填充表单的对应值。

所以我的目标是创建 XFDF 文件，并使 PDF 上的字段名称与表中列的名称相对应。我目前的方法是使用 SELECT FOR XML EXPLICIT 语句。要使用它，我首先需要将数据选择为 for xml 显式语句所需的“通用表”格式，该格式对于原始数据表中的每一列都有单独的行。我可以手动浏览每个字段，为每个列编写单独的选择语句 - 例如，FirstName 列部分看起来像：

```
SELECT  2               AS Tag,
        1               AS Parent,
        null            AS [fields!1],
        FirstName       AS [fields!2!name],
        D.FirstName     AS [value!3!]
From    Data AS D 
```

（我不确定 select for XML 语句的语法是否完全正确，但应该是这样的）

如果我对原始表中的每一列都做了一个这样的选择语句（加上一个用于根级“字段”元素，然后将它们联合在一起，它应该创建我需要的表，然后执行 SELECT FOR XML EXPLICIT 语句。

但是，此表单上有大量字段（政府机构！是的！），我更喜欢某种方式以编程方式执行此操作。

**所以现在我已经给出了背景，这是我的实际问题。如果您阅读了背景并认为我的方法很糟糕，请告诉我。**

我需要一种方法来获取包含这样一行的表：

```
+-----------+---------+------+
| 名字 | 姓氏 | 等 |
+-----------+---------+------+
| 约翰 | 史密斯 | 123 |
+-----------+---------+------+

```

并从中构造一个新表，如下所示：

```
+-----------+-------+
| 字段名 | 价值 |
+-----------+-------+
| 名字 | 约翰 |
| 姓氏 | 史密斯 |
| 等 | 123 |
+-----------+-------+

```

如果这是有效的，我会这样做：

```
SELECT  2               AS Tag,
        1               AS Parent,
        null            AS [fields!1],
        C.column_name       AS [fields!2!name],
        D.{C.column_name}       AS [value!3!]
From        Data AS D, information_schema.columns AS C 
WHERE   C.table_name = 'Data' 
```

显然这是不可能的，并且您不能使被选择的列成为变量。我查看了这个问题（[在 SQL server 2008 上的 Select 语句中使用变量列名](https://stackoverflow.com/questions/7687825/use-variable-column-name-in-select-statement-on-sql-server-2008)），最佳答案可能很有希望，但它以“但这一切都非常可怕，恕我直言”结束。在踏上这条路之前，我想研究一下不是“非常可怕”的解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:41:06.797

您可以`UNPIVOT`在 MS SQL 2008 中使用，问题是您需要在所有列中具有相同的数据类型和排序规则，或者像下面的示例中那样进行转换。结果应该与您想要的完全一样

```
SELECT seq,ts
FROM 
    (select 

  convert(nvarchar(200),FirstName) COLLATE Latin1_General_CI_AS  as FirstName,
  convert(nvarchar(200),LastName) COLLATE Latin1_General_CI_AS  as LastName,
  convert(nvarchar(200),Etc) COLLATE Latin1_General_CI_AS  as Etc,

    from youPersonTable P 
       where  id = 1
) p
UNPIVOT
    (ts FOR Seq IN 
        (FirstName,LastName,Etc)
) AS unpvt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:30:08.600

`for xml`使用XML 变量查询您的表并将结果存储在其中。然后查询 XML 变量以创建您需要使用的 XML 形状，`local-name(.)`以便从 XML 变量中获取列/节点名称。

[SQL小提琴](http://sqlfiddle.com/#!3/96ba2/1)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  FirstName varchar(25),
  LastName varchar(25),
  Etc int
)

insert into YourTable values ('John', 'Smith', 123) 
```

**查询 1**：

```
declare @XML xml

set @XML = (
           select *
           from YourTable
           for xml path('row'), type
           )

select T.N.value('local-name(.)', 'sysname') as "@name",
       T.N.value('text()[1]', 'varchar(max)') as "value"
from @XML.nodes('/row/*') as T(N)
for xml path('field'), root('fields') 
```

**[结果](http://sqlfiddle.com/#!3/96ba2/1/0)**：

```
<fields>
  <field name="FirstName">
    <value>John</value>
  </field>
  <field name="LastName">
    <value>Smith</value>
  </field>
  <field name="Etc">
    <value>123</value>
  </field>
</fields> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T18:12:33.650

另一种选择是使用两个表和一个临时表：

```
tblEmployee
tblXTABEmployee --This table basically swaps the rows for columns.
tmpXTABEmployee 
```

您可以使用以下命令获取 tblEmployee 中的所有列名：

```
EXEC sp_help tblEmployee 
```

然后您可以使用光标来填充您的 tblXTABEmployee。如果您想了解更多详细信息，请随时询问。

更新：您必须创建一个 tmpXTABEmployee，您将使用 sp_help 选择所有列名，然后使用类似这样的游标（请注意，我没有对此进行测试）：

```
declare @ColumnName nvarchar(255)
declare @SQLString nvarchar(4000)
declare columnNameCursor cursor for

SELECT     ColumnName
FROM       tmpXTABEmployee
GROUP BY ColumnName
ORDER BY ColumnName

OPEN columnNameCursor

FETCH NEXT FROM columnNameCursor INTO @ColumnName

BEGIN TRY
    WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @SQLString = 'INSERT INTO dbo.tblXTABEmployee (FieldName, DataValue) VALUES (' + @ColumnName + ', ' + dbo.tmpXTABEmployee.DataValue + ')'
    EXEC (@SQLString)
    FETCH NEXT FROM columnNameCursor INTO @ColumnName
END
END TRY 
BEGIN CATCH
DECLARE @msg VARCHAR(4096)
SET @msg = 'Failure occurred attempting to insert into tblXTABEmployee.';
RAISERROR(@msg, 0, 1);
END CATCH

CLOSE columnNameCursor
DEALLOCATE columnNameCursor
GO 
```

# java - 如何将响应从 servlet 转换为字符串？

> ID：14651832
> 
> 赞同：0
> 
> 时间：2013-02-01T17:32:31.150
> 
> 标签：java, servlets, response, printwriter, requestdispatcher

很抱歉用这个来打断你的一天，但我已经花了很长时间在网上搜寻答案，但我完全被困住了！

在 Web 应用程序中，我使用 RequestDispatcher 将请求从 servlet_A 发送到 servlet_B。在 servlet_B 中，我运行一些代码来生成一个简单的字符串值，该值作为对 servlet_A 的响应返回。

servlet A 中的代码：

```
ServletContext context = getServletContext();
RequestDispatcher dispatcher = context.getRequestDispatcher("/servlet_B");
dispatcher.forward(request, response);

/*
How do I catch the response from servlet_B and convert it to a String?
*/ 
```

servlet B 中的代码：

```
/*
Some other code which creates a String
*/

String result = "someValue";

// Send the response to servlet_A.
response.setContentType("text/plain");
response.setContentLength(result.length());
PrintWriter out = response.getWriter();
out.println(result); 
```

在 servlet_A 中，我需要将来自 servlet_B 的响应转换为一个简单的字符串值，这就是我坚持的一点。如何将来自 servlet_B 的响应作为 servlet_A 中的简单字符串处理？

我想我需要使用 PrintWriter 来解析响应，我已经在网上搜索了一个示例，但我能找到的只是展示如何使用 PrintWriter 发送响应或将数据输出到屏幕的示例。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:19:25.650

从技术上讲，您在挽救问题方面走错了方向。您要转发到的另一个 servlet 显然是紧耦合的，它的代码需要重构为一个独立类，该类立即将所需数据作为字符串返回，以便另一个 servlet 可以将其写入响应并且当前 servlet 可以直接使用独立类，而不是首先为此调用整个其他 servlet。

忽略臭气熏天的糟糕设计，您可以通过将当前响应替换为`HttpServletResponseWrapper`写入内部字符串缓冲区而不是实际响应主体的实现来解决它。这是一个适合您特定功能要求的具体启动示例（应注意实际实现可能比这复杂得多，您还需要考虑`getOutputStream()`并`getCharacterEncoding()`考虑）：

```
final StringWriter buffer = new StringWriter();
request.getRequestDispatcher("/servlet_B").include(request, new HttpServletResponseWrapper(response) {
    private PrintWriter writer = new PrintWriter(buffer);
    @Override
    public PrintWriter getWriter() throws IOException {
        return writer;
    }
});

String writtenByServletB = buffer.toString();
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:09:16.690

我想您所需要的只是将一个字符串从前一个 servlet 传递到下一个，然后您所要做的就是在您的请求对象中添加一个属性。因此，当您将请求传递给下一个 servlet 时，请求对象将值设置为属性

所以在第一个 Servlet 中你可以写

```
String sendThisValue = "some Important value to be sent";
request.setAttribute("sendThisValue",sendThisValue);
RequestDispatcher dispatcher = context.getRequestDispatcher(“/servlet_B”);
dispatcher.forward(request, response); 
```

然后当控制传递到下一个 servlet 时，您可以通过请求对象访问您在上一个 servlet 中设置的值

```
String gotTheValue = request.getAttribute("sendThisValue"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:52:42.227

在 servlet BI 中认为您可以再次使用调度程序返回到 servlet A

```
ServletContext context = getServletContext();
RequestDispatcher dispatcher = context.getRequestDispatcher(“/servlet_A”);
request.setAttribute("result",result);//the String you want to pass
dispatcher.forward(request, response); 
```

# python - Python新手，使用字符串作为输入实现函数

> ID：14651833
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:32:34.077
> 
> 标签：python

我是 Python 新手，我的家庭作业问题之一让我陷入了困境。

问题来了？实现函数cheer()，将团队名称（作为字符串）作为输入并打印欢呼，如下所示：

```
cheer(‘Huskies’) 
```

你如何拼写获胜者？
我知道我知道！
哈士奇！
这就是你拼写获胜者的方式！
去哈士奇！

除了第三行隔开的团队名称外，我已经能够弄清楚所有事情。我将在下面发布我的内容。如果有人对如何解决它有任何想法，我将不胜感激？

```
def cheer(team):
    print("How do you spell winner?"+"\nI know, I know!""\n"+team.upper()+"!"+"\nAnd that's how you spell winner!"+"\nGo "+ team+"!"+"\n") 
```

使用团队名称“Devils”作为输入，这就是上面代码得到的结果：

```
cheer("Devils")
How do you spell winner?
I know, I know!
DEVILS!
And that's how you spell winner!
Go Devils! 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T17:35:33.563

[您可以使用str.join](http://docs.python.org/2/library/stdtypes.html#str.join)在每个字母之间添加一个空格：

```
In [22]: team = 'Huskies'

In [23]: ' '.join(team.upper())
Out[23]: 'H U S K I E S' 
```

或者，包括感叹号，

```
In [27]: ' '.join(team.upper()+'!')
Out[27]: 'H U S K I E S !' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:51:26.927

迭代字符串中的元素的最简单方法是使用 Python 中的列表推导，您可以在此处阅读有关它们的更多信息：

[列出理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

在您的示例中，您希望遍历字符串中的每个项目，附加一个空格，然后使用连接将这些结果连接在一起。这可以在 python 中的一行代码中完成：

```
("".join([s + ' ' for s in team])).upper() 
```

剖析这段代码，我在一行中做了几件事：

1) 遍历字符串中的每个字母，并附加一个空格

2）该迭代返回一个列表，所以我用一个空字符串加入该列表，它给出了一个字符串

3）将该字符串转换为大写

# xml - SQL Server 2005 - 查询复杂的 XML（SOAP 响应）

> ID：14651834
> 
> 赞同：1
> 
> 时间：2013-02-01T17:32:35.503
> 
> 标签：xml

我想使用 SQL Server 以将以下 XML 示例转换为平面表的方式查询 XML 文件：

```
<?xml version="1.0" ?> 
  <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
  <ns1:getArtifactDetailListResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://schema.open.collab.net/sfee50/soap60/service">
  <getArtifactDetailListReturn href="#id0" /> 
  </ns1:getArtifactDetailListResponse>
  <multiRef id="id0" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns2:ArtifactDetailSoapList" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2="http://schema.open.collab.net/sfee50/soap60/type">
  <dataRows soapenc:arrayType="ns2:ArtifactDetailSoapRow[4]" xsi:type="soapenc:Array">
  <dataRows href="#id1" /> 
  <dataRows href="#id2" /> 
  <dataRows href="#id3" /> 
  <dataRows href="#id4" /> 
  </dataRows>
  <fullListSize xsi:type="xsd:int">4</fullListSize> 
  </multiRef>
  <multiRef id="id2" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns3:ArtifactDetailSoapRow" xmlns:ns3="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <actualEffort xsi:type="xsd:int">0</actualEffort> 
  <artifactGroup xsi:type="xsd:string" /> 
  <assignedToFullname xsi:type="xsd:string">Anon User</assignedToFullname> 
  <assignedToUsername xsi:type="xsd:string">anon_user</assignedToUsername> 
  <autosumming xsi:type="xsd:boolean">false</autosumming> 
  <category xsi:type="xsd:string">Internal Improvement</category> 
  <closeDate xsi:type="xsd:dateTime" xsi:nil="true" /> 
  <customer xsi:type="xsd:string" /> 
  <description xsi:type="xsd:string">Description Here</description> 
  <estimatedEffort xsi:type="xsd:int">0</estimatedEffort> 
  <flexFields href="#id5" /> 
  <folderId xsi:type="xsd:string">tracker15657</folderId> 
  <folderPathString xsi:type="xsd:string">tracker.brd_new_request</folderPathString> 
  <folderTitle xsi:type="xsd:string">BRDs (New/Change Requests)</folderTitle> 
  <id xsi:type="xsd:string">artf705037</id> 
  <lastModifiedDate xsi:type="xsd:dateTime">2013-02-01T10:43:02.000Z</lastModifiedDate> 
  <planningFolderId xsi:type="xsd:string" xsi:nil="true" /> 
  <planningFolderTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <points xsi:type="xsd:int">0</points> 
  <priority xsi:type="xsd:int">4</priority> 
  <projectId xsi:type="xsd:string">proj7173</projectId> 
  <projectPathString xsi:type="xsd:string">projects.rapid_application_developmet</projectPathString> 
  <projectTitle xsi:type="xsd:string">Rapid Application Development</projectTitle> 
  <remainingEffort xsi:type="xsd:int">0</remainingEffort> 
  <reportedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <reportedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <status xsi:type="xsd:string">RAD Reviewing</status> 
  <statusClass xsi:type="xsd:string">Open</statusClass> 
  <submittedByFullname xsi:type="xsd:string">Anon User</submittedByFullname> 
  <submittedByUsername xsi:type="xsd:string">anon_user</submittedByUsername> 
  <submittedDate xsi:type="xsd:dateTime">2013-02-01T10:43:02.000Z</submittedDate> 
  <title xsi:type="xsd:string">SWAPS - Weekly Tracer Exception Report</title> 
  <trackerIcon xsi:type="xsd:string" xsi:nil="true" /> 
  <version xsi:type="xsd:int">100</version> 
  </multiRef>
  <multiRef id="id1" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns4:ArtifactDetailSoapRow" xmlns:ns4="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <actualEffort xsi:type="xsd:int">0</actualEffort> 
  <artifactGroup xsi:type="xsd:string" /> 
  <assignedToFullname xsi:type="xsd:string">Anon User</assignedToFullname> 
  <assignedToUsername xsi:type="xsd:string">anon_user</assignedToUsername> 
  <autosumming xsi:type="xsd:boolean">false</autosumming> 
  <category xsi:type="xsd:string">Internal Improvement</category> 
  <closeDate xsi:type="xsd:dateTime" xsi:nil="true" /> 
  <customer xsi:type="xsd:string" /> 
  <description xsi:type="xsd:string">KOP embelished for internal improvement/automation.</description> 
  <estimatedEffort xsi:type="xsd:int">0</estimatedEffort> 
  <flexFields href="#id6" /> 
  <folderId xsi:type="xsd:string">tracker15657</folderId> 
  <folderPathString xsi:type="xsd:string">tracker.brd_new_request</folderPathString> 
  <folderTitle xsi:type="xsd:string">BRDs (New/Change Requests)</folderTitle> 
  <id xsi:type="xsd:string">artf705038</id> 
  <lastModifiedDate xsi:type="xsd:dateTime">2013-02-01T10:49:14.000Z</lastModifiedDate> 
  <planningFolderId xsi:type="xsd:string" xsi:nil="true" /> 
  <planningFolderTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <points xsi:type="xsd:int">0</points> 
  <priority xsi:type="xsd:int">4</priority> 
  <projectId xsi:type="xsd:string">proj7173</projectId> 
  <projectPathString xsi:type="xsd:string">projects.rapid_application_developmet</projectPathString> 
  <projectTitle xsi:type="xsd:string">Rapid Application Development</projectTitle> 
  <remainingEffort xsi:type="xsd:int">0</remainingEffort> 
  <reportedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <reportedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <status xsi:type="xsd:string">RAD Reviewing</status> 
  <statusClass xsi:type="xsd:string">Open</statusClass> 
  <submittedByFullname xsi:type="xsd:string">Anon User</submittedByFullname> 
  <submittedByUsername xsi:type="xsd:string">anon_user</submittedByUsername> 
  <submittedDate xsi:type="xsd:dateTime">2013-02-01T10:49:14.000Z</submittedDate> 
  <title xsi:type="xsd:string">SWAPS   Weekly Trade Support Report</title> 
  <trackerIcon xsi:type="xsd:string" xsi:nil="true" /> 
  <version xsi:type="xsd:int">100</version> 
  </multiRef>
  <multiRef id="id4" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns5:ArtifactDetailSoapRow" xmlns:ns5="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <actualEffort xsi:type="xsd:int">0</actualEffort> 
  <artifactGroup xsi:type="xsd:string" /> 
  <assignedToFullname xsi:type="xsd:string">Anon User</assignedToFullname> 
  <assignedToUsername xsi:type="xsd:string">anon_user</assignedToUsername> 
  <autosumming xsi:type="xsd:boolean">false</autosumming> 
  <category xsi:type="xsd:string">Internal Improvement</category> 
  <closeDate xsi:type="xsd:dateTime" xsi:nil="true" /> 
  <customer xsi:type="xsd:string" /> 
  <description xsi:type="xsd:string">BRD submitted for internal automation of BAU.</description> 
  <estimatedEffort xsi:type="xsd:int">0</estimatedEffort> 
  <flexFields href="#id7" /> 
  <folderId xsi:type="xsd:string">tracker15657</folderId> 
  <folderPathString xsi:type="xsd:string">tracker.brd_new_request</folderPathString> 
  <folderTitle xsi:type="xsd:string">BRDs (New/Change Requests)</folderTitle> 
  <id xsi:type="xsd:string">artf704445</id> 
  <lastModifiedDate xsi:type="xsd:dateTime">2013-01-30T16:31:35.000Z</lastModifiedDate> 
  <planningFolderId xsi:type="xsd:string" xsi:nil="true" /> 
  <planningFolderTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <points xsi:type="xsd:int">0</points> 
  <priority xsi:type="xsd:int">4</priority> 
  <projectId xsi:type="xsd:string">proj7173</projectId> 
  <projectPathString xsi:type="xsd:string">projects.rapid_application_developmet</projectPathString> 
  <projectTitle xsi:type="xsd:string">Rapid Application Development</projectTitle> 
  <remainingEffort xsi:type="xsd:int">0</remainingEffort> 
  <reportedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <reportedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <status xsi:type="xsd:string">RAD Reviewing</status> 
  <statusClass xsi:type="xsd:string">Open</statusClass> 
  <submittedByFullname xsi:type="xsd:string">Anon User</submittedByFullname> 
  <submittedByUsername xsi:type="xsd:string">anon_user</submittedByUsername> 
  <submittedDate xsi:type="xsd:dateTime">2013-01-30T16:29:02.000Z</submittedDate> 
  <title xsi:type="xsd:string">SWAPS Daily MIS Overall Performance</title> 
  <trackerIcon xsi:type="xsd:string" xsi:nil="true" /> 
  <version xsi:type="xsd:int">101</version> 
  </multiRef>
  <multiRef id="id3" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns6:ArtifactDetailSoapRow" xmlns:ns6="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <actualEffort xsi:type="xsd:int">0</actualEffort> 
  <artifactGroup xsi:type="xsd:string" /> 
  <assignedToFullname xsi:type="xsd:string">Anon User</assignedToFullname> 
  <assignedToUsername xsi:type="xsd:string">anon_user</assignedToUsername> 
  <autosumming xsi:type="xsd:boolean">false</autosumming> 
  <category xsi:type="xsd:string">Internal Improvement</category> 
  <closeDate xsi:type="xsd:dateTime" xsi:nil="true" /> 
  <customer xsi:type="xsd:string" /> 
  <description xsi:type="xsd:string">BRD submitted for internal automation of BAU.</description> 
  <estimatedEffort xsi:type="xsd:int">0</estimatedEffort> 
  <flexFields href="#id8" /> 
  <folderId xsi:type="xsd:string">tracker15657</folderId> 
  <folderPathString xsi:type="xsd:string">tracker.brd_new_request</folderPathString> 
  <folderTitle xsi:type="xsd:string">BRDs (New/Change Requests)</folderTitle> 
  <id xsi:type="xsd:string">artf704570</id> 
  <lastModifiedDate xsi:type="xsd:dateTime">2013-01-31T10:27:13.000Z</lastModifiedDate> 
  <planningFolderId xsi:type="xsd:string" xsi:nil="true" /> 
  <planningFolderTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <points xsi:type="xsd:int">0</points> 
  <priority xsi:type="xsd:int">4</priority> 
  <projectId xsi:type="xsd:string">proj7173</projectId> 
  <projectPathString xsi:type="xsd:string">projects.rapid_application_developmet</projectPathString> 
  <projectTitle xsi:type="xsd:string">Rapid Application Development</projectTitle> 
  <remainingEffort xsi:type="xsd:int">0</remainingEffort> 
  <reportedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <reportedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseId xsi:type="xsd:string" xsi:nil="true" /> 
  <resolvedInReleaseTitle xsi:type="xsd:string" xsi:nil="true" /> 
  <status xsi:type="xsd:string">RAD Reviewing</status> 
  <statusClass xsi:type="xsd:string">Open</statusClass> 
  <submittedByFullname xsi:type="xsd:string">Anon User</submittedByFullname> 
  <submittedByUsername xsi:type="xsd:string">anon_user</submittedByUsername> 
  <submittedDate xsi:type="xsd:dateTime">2013-01-31T10:27:13.000Z</submittedDate> 
  <title xsi:type="xsd:string">SWAPS Heatmap</title> 
  <trackerIcon xsi:type="xsd:string" xsi:nil="true" /> 
  <version xsi:type="xsd:int">100</version> 
  </multiRef>
  <multiRef id="id7" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns7:SoapFieldValues" xmlns:ns7="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <names soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <names xsi:type="xsd:string">BRD Received</names> 
  <names xsi:type="xsd:string">Dev Started</names> 
  <names xsi:type="xsd:string">EUDA Registered</names> 
  <names xsi:type="xsd:string">Prioritised   Pending Dev</names> 
  <names xsi:type="xsd:string">Product</names> 
  <names xsi:type="xsd:string">Product Group</names> 
  <names xsi:type="xsd:string">Requestor POC</names> 
  <names xsi:type="xsd:string">Signed Off</names> 
  <names xsi:type="xsd:string">UAT Delivered</names> 
  <names xsi:type="xsd:string">UAT Delivery Date</names> 
  <names xsi:type="xsd:string">VP Approval</names> 
  <names xsi:type="xsd:string">BMSC POC</names> 
  <names xsi:type="xsd:string">$fild306322$Coverage</names> 
  <names xsi:type="xsd:string">$fild306551$test</names> 
  </names>
  <types soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  </types>
  <values soapenc:arrayType="xsd:anyType[14]" xsi:type="soapenc:Array">
  <values xsi:type="xsd:dateTime">2013-01-30T08:00:00.000Z</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="soapenc:string">Synthetics</values> 
  <values xsi:type="soapenc:string">GPF</values> 
  <values xsi:type="soapenc:string" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:dateTime">2013-01-30T08:00:00.000Z</values> 
  <values xsi:type="soapenc:string">anon_user</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  </values>
  </multiRef>
  <multiRef id="id8" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns8:SoapFieldValues" xmlns:ns8="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <names soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <names xsi:type="xsd:string">BRD Received</names> 
  <names xsi:type="xsd:string">Dev Started</names> 
  <names xsi:type="xsd:string">EUDA Registered</names> 
  <names xsi:type="xsd:string">Prioritised   Pending Dev</names> 
  <names xsi:type="xsd:string">Product</names> 
  <names xsi:type="xsd:string">Product Group</names> 
  <names xsi:type="xsd:string">Requestor POC</names> 
  <names xsi:type="xsd:string">Signed Off</names> 
  <names xsi:type="xsd:string">UAT Delivered</names> 
  <names xsi:type="xsd:string">UAT Delivery Date</names> 
  <names xsi:type="xsd:string">VP Approval</names> 
  <names xsi:type="xsd:string">BMSC POC</names> 
  <names xsi:type="xsd:string">$fild306322$Coverage</names> 
  <names xsi:type="xsd:string">$fild306551$test</names> 
  </names>
  <types soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  </types>
  <values soapenc:arrayType="xsd:anyType[14]" xsi:type="soapenc:Array">
  <values xsi:type="xsd:dateTime">2013-01-31T08:00:00.000Z</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="soapenc:string">Synthetics</values> 
  <values xsi:type="soapenc:string">GPF</values> 
  <values xsi:type="soapenc:string" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:dateTime">2013-01-31T08:00:00.000Z</values> 
  <values xsi:type="soapenc:string">anon_user</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  </values>
  </multiRef>
  <multiRef id="id6" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns9:SoapFieldValues" xmlns:ns9="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <names soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <names xsi:type="xsd:string">BRD Received</names> 
  <names xsi:type="xsd:string">Dev Started</names> 
  <names xsi:type="xsd:string">EUDA Registered</names> 
  <names xsi:type="xsd:string">Prioritised   Pending Dev</names> 
  <names xsi:type="xsd:string">Product</names> 
  <names xsi:type="xsd:string">Product Group</names> 
  <names xsi:type="xsd:string">Requestor POC</names> 
  <names xsi:type="xsd:string">Signed Off</names> 
  <names xsi:type="xsd:string">UAT Delivered</names> 
  <names xsi:type="xsd:string">UAT Delivery Date</names> 
  <names xsi:type="xsd:string">VP Approval</names> 
  <names xsi:type="xsd:string">BMSC POC</names> 
  <names xsi:type="xsd:string">$fild306322$Coverage</names> 
  <names xsi:type="xsd:string">$fild306551$test</names> 
  </names>
  <types soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  </types>
  <values soapenc:arrayType="xsd:anyType[14]" xsi:type="soapenc:Array">
  <values xsi:type="xsd:dateTime">2013-02-01T08:00:00.000Z</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="soapenc:string">Synthetics</values> 
  <values xsi:type="soapenc:string">GPF</values> 
  <values xsi:type="soapenc:string" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:dateTime">2013-02-01T08:00:00.000Z</values> 
  <values xsi:type="soapenc:string">anon_user</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  </values>
  </multiRef>
  <multiRef id="id5" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns10:SoapFieldValues" xmlns:ns10="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <names soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <names xsi:type="xsd:string">BRD Received</names> 
  <names xsi:type="xsd:string">Dev Started</names> 
  <names xsi:type="xsd:string">EUDA Registered</names> 
  <names xsi:type="xsd:string">Prioritised   Pending Dev</names> 
  <names xsi:type="xsd:string">Product</names> 
  <names xsi:type="xsd:string">Product Group</names> 
  <names xsi:type="xsd:string">Requestor POC</names> 
  <names xsi:type="xsd:string">Signed Off</names> 
  <names xsi:type="xsd:string">UAT Delivered</names> 
  <names xsi:type="xsd:string">UAT Delivery Date</names> 
  <names xsi:type="xsd:string">VP Approval</names> 
  <names xsi:type="xsd:string">BMSC POC</names> 
  <names xsi:type="xsd:string">$fild306322$Coverage</names> 
  <names xsi:type="xsd:string">$fild306551$test</names> 
  </names>
  <types soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  </types>
  <values soapenc:arrayType="xsd:anyType[14]" xsi:type="soapenc:Array">
  <values xsi:type="xsd:dateTime">2013-02-01T08:00:00.000Z</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="soapenc:string">Synthetics</values> 
  <values xsi:type="soapenc:string">GPF</values> 
  <values xsi:type="soapenc:string" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:dateTime">2013-02-01T08:00:00.000Z</values> 
  <values xsi:type="soapenc:string">anon_user</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  </values>
  </multiRef>
  </soapenv:Body>
  </soapenv:Envelope> 
```

所有这些仅代表来自 TeamForge CollabNet 站点的 4 条记录。

我可以看到这样的“结构”。该路径`/soapenv:Envelope/soapenv:Body/multiRef/dataRows`包含对 4 个奇数格式记录的 4 个引用`<dataRows href="#id1" />`。

然后使用 href id，您可以转到如下路径：

```
/soapenv:Envelope/soapenv:Body/multiRef (where the id attribute matches the record) 
```

在这个节点上，我希望能够挑选出一些元素，例如“assignedToFullname”、“title”等。

然而，在这个节点中有一个名为“flexFields”的元素，看起来像这样：

```
<flexFields href="#id6" /> 
```

这是因为在 CollabNet 中您可以拥有许多自定义字段。因此，遵循与以前相同的规则，弹性域信息位于：

```
/soapenv:Envelope/soapenv:Body/multiRef (where the id attribute matches the flexfield href) 
```

一条记录的此 XML 的片段如下：

```
<multiRef id="id7" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns7:SoapFieldValues" xmlns:ns7="http://schema.open.collab.net/sfee50/soap60/type" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <names soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <names xsi:type="xsd:string">BRD Received</names> 
  <names xsi:type="xsd:string">Dev Started</names> 
  <names xsi:type="xsd:string">EUDA Registered</names> 
  <names xsi:type="xsd:string">Prioritised   Pending Dev</names> 
  <names xsi:type="xsd:string">Product</names> 
  <names xsi:type="xsd:string">Product Group</names> 
  <names xsi:type="xsd:string">Requestor POC</names> 
  <names xsi:type="xsd:string">Signed Off</names> 
  <names xsi:type="xsd:string">UAT Delivered</names> 
  <names xsi:type="xsd:string">UAT Delivery Date</names> 
  <names xsi:type="xsd:string">VP Approval</names> 
  <names xsi:type="xsd:string">BMSC POC</names> 
  <names xsi:type="xsd:string">$fild306322$Coverage</names> 
  <names xsi:type="xsd:string">$fild306551$test</names> 
  </names>
  <types soapenc:arrayType="xsd:string[14]" xsi:type="soapenc:Array">
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">String</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">Date</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  <types xsi:type="xsd:string">User</types> 
  </types>
  <values soapenc:arrayType="xsd:anyType[14]" xsi:type="soapenc:Array">
  <values xsi:type="xsd:dateTime">2013-01-30T08:00:00.000Z</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="soapenc:string">Synthetics</values> 
  <values xsi:type="soapenc:string">GPF</values> 
  <values xsi:type="soapenc:string" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:dateTime">2013-01-30T08:00:00.000Z</values> 
  <values xsi:type="soapenc:string">anon_user</values> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  <values xsi:type="xsd:anyType" xsi:nil="true" /> 
  </values>
  </multiRef> 
```

是否可以以任何方式使用 SQL Server 将其输出到一个表中，其中包含许多指定元素作为列*加上*fledFields 及其值作为列。

对此的任何帮助将不胜感激。

**更新** OK 到目前为止，我已经设法从 XML 文件中获取正常数据，如下所示：

```
SELECT T.c.value('@id','varchar(5)') as [id]
    , T.c.value('title[1]','varchar(255)') as [Title]
    , T.c.value('id[1]','varchar(255)') as [Artifact]
    , T.c.value('priority[1]','varchar(255)') as [Priority]
    , T.c.value('assignedToFullname[1]','varchar(255)') as [Assignee]
    , T.c.value('status[1]','varchar(255)') as [Status]
    , T.c.value('statusClass[1]','varchar(255)') as [statusClass]
    , T.c.value('folderTitle[1]','varchar(255)') as [Tracker]
    , Replace(T.c.value('flexFields[1]/@href','varchar(255)'),'#','') as [flexFieldsID]
FROM @xml.nodes('declare namespace soapenv="http://schemas.xmlsoap.org/soap/envelope/";
/soapenv:Envelope[1]/soapenv:Body[1]/multiRef') T(c)
WHERE T.c.value('@id','varchar(5)') IN
    (SELECT Replace(DR.h.value('@href','varchar(5)'),'#','') as [DataRowID]
    FROM @xml.nodes('declare namespace soapenv="http://schemas.xmlsoap.org/soap/envelope/";
    /soapenv:Envelope[1]/soapenv:Body[1]/multiRef/dataRows/dataRows') DR(h)) 
```

但是，这看起来很可怕，我想知道是否有人可能知道更优雅的方式。我还坚持如何将“flexFields”附加到此结果表的末尾。

**进一步更新** 我想我已经很接近了，但我无法弄清楚如何将 flexFields 放入“平面”表中，因为“名称”和“值”之间没有结构联系，它只是按顺序匹配它的外观，所以第一个名称是第一个值的字段名称，依此类推，我只是不知道如何编写查询来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:15:11.577

SQL Server 提供了 OPENXML 方法来从 XML 中获取数据，这些数据可以插入到任何表或临时表中。例子：

```
 DECLARE @idoc int
DECLARE @doc varchar(1000)
SET @doc ='
<ROOT>
<Customer CustomerID="VINET" ContactName="Paul Henriot">
   <Order CustomerID="VINET" EmployeeID="5" OrderDate="1996-07-04T00:00:00">
      <OrderDetail OrderID="10248" ProductID="11" Quantity="12"/>
      <OrderDetail OrderID="10248" ProductID="42" Quantity="10"/>
   </Order>
</Customer>
<Customer CustomerID="LILAS" ContactName="Carlos Gonzlez">
   <Order CustomerID="LILAS" EmployeeID="3" OrderDate="1996-08-16T00:00:00">
      <OrderDetail OrderID="10283" ProductID="72" Quantity="3"/>
   </Order>
</Customer>
</ROOT>'
--Create an internal representation of the XML document.
EXEC sp_xml_preparedocument @idoc OUTPUT, @doc
-- Execute a SELECT statement that uses the OPENXML rowset provider.
SELECT    *
FROM       OPENXML (@idoc, '/ROOT/Customer',1)
            WITH (CustomerID  varchar(10),
                  ContactName varchar(20)) 
```

详细可以参考： [OPENXML](http://msdn.microsoft.com/en-us/library/aa276847%28v=sql.80%29.aspx)

我在这种方法中看到的唯一问题是您的示例 XML 有很多用于读取 xml 的转义/无效字符。为此，您必须使用 REPLACE 将中间 PL/SQL 中的 XML 替换为某个有效字符，以便您可以将值从 XML 提取到表中。抱歉，回复不完整，我现在有点忙于提供实际工作查询。希望能帮助到你。

# android - 从消息 AlertDialog 创建新活动

> ID：14651835
> 
> 赞同：0
> 
> 时间：2013-02-01T17:32:38.207
> 
> 标签：android, android-activity, android-alertdialog

我想单击 AlertDialog 显示的文本的某些部分并开始一个新活动。我只是不知道这是否可能。这是我的代码示例

```
case R.id.about:
        final AlertDialog d = new AlertDialog.Builder(this)
        .setPositiveButton(android.R.string.ok, null)
        .setMessage(Html.fromHtml(getResources().getString(R.string.infoAuthor)+" <br> <a href=\"https://www.youtube.com">click here for help</a>"))
        .create();
        d.show();
        // Make the textview clickable. Must be called after show()   
        ((TextView)d.findViewById(android.R.id.message)).setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:53:41.177

与其直接设置 AlertDialog 的消息，不如创建一个 TextView 并在其上设置 HTML 和 LinkMovementMethod。然后[`AlertDialog.Builder#setView()`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setView%28android.view.View%29)用这个 TextView 调用。使用您的代码的示例：

```
case R.id.about:
        TextView tv = new TextView(this);
        tv.setText(Html.fromHtml(getResources().getString(R.string.infoAuthor)+" <br> <a href=\"https://www.youtube.com">click here for help</a>");
        tv.setMovementMethod(LinkMovementMethod.getInstance());

        final AlertDialog d = new AlertDialog.Builder(this)
        .setPositiveButton(android.R.string.ok, null)
        .setView(tv);
        .create();
        d.show(getFragmentManager, "tag"); 
```

# jquery - 关闭时重置模式对话框

> ID：14651840
> 
> 赞同：4
> 
> 时间：2013-02-01T17:32:48.337
> 
> 标签：jquery

我有一个模式表单，可供用户重置密码。

```
<div id="password-form" title="Reset Password">
<form method="post">
<fieldset>
<label for="emailreset">Enter Email Address</label>
<input type="text" name="emailreset" id="emailreset" class="text ui-widget-content   ui-corner-all" />
</fieldset>
</form>
</div> 
```

当用户点击重置密码按钮时，我会调用一个函数来检查用户是否存在。在帖子成功后，我将 div 的内容更改为生成的消息。所有这些都按预期工作。现在我想要发生的是一旦关闭模式对话框，我希望内容重置回表单。我在实现这一点时遇到了问题。

这是我为 jquery 所拥有的

```
$( "#password-form" ).dialog({
autoOpen: false,
height: 200,
width: 300,
modal: true,
buttons: {
"Reset Password": function() {

$.ajax({
url: "/model/websitemanager.cfc"
, type: "post"
, dataType: "html"
, data: {
method: "resetpassword"          
, emailreset: $("#emailreset").val()
}
, success: function (data){
//alert(data);
$('#password-form').html('<p>'+data+'</p>');
}
// this runs if an error
, error: function (xhr, textStatus, errorThrown){
// show error
alert(errorThrown);
}
});
<!--//end ajax call//-->
},
},
close: function() {
emailreset.val( "" ).removeClass( "ui-state-error" );
$(this).dialog('destroy').remove()
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:54:07.573

这是我在我的应用程序中全局可用的一个简单函数：

```
function clearInputs(target) {
  $(target).find(':input').each(function () {
    switch (this.type) {
        case 'password':
        case 'select-multiple':
        case 'select-one':
        case 'text':
        case 'textarea':
            $(this).val('');
            break;
        case 'checkbox':
        case 'radio':
            this.checked = false;
    }
  });
} 
```

以下是我将它用于 jQuery 对话框的方法：

```
$('#myDialog').dialog({
    buttons:{
        'Submit':function () {
            // Do something here
            clearInputs($(this).find('form'));
            $(this).dialog('close');
        },
        'Cancel':function () {
            clearInputs($(this).find('form'));
            $(this).dialog('close');
        }
    },
    close:function () {
        clearInputs($(this).find('form'));
    }
}); 
```

# java - Java 嵌入式网页界面

> ID：14651842
> 
> 赞同：1
> 
> 时间：2013-02-01T17:32:54.203
> 
> 标签：java, servlets, jetty, embeddedwebserver

对于我创建的插件，我想添加一个`webinterface`您可以从中更改设置并进行一些简单数据操作的插件。这种数据操作应该通过`sqlquerys`. 我正在使用 sqlite 数据库，这就是问题开始的地方：

网站（servlet）必须与插件的其余部分共享数据库连接，以防止“数据库被锁定”错误并保持数据完整性。

我已经尝试嵌入 jetty 和 tomcat，但我不知道如何将网站集成到 jar 中。

PS：我不会切换到mysql。此外，由于该网站只是一个管理界面，因此非常欢迎不使用 servlet 或 jsps 的访问和解决方案，尽管它必须支持按钮和登录（ajax ??）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:20:31.917

对于非常简单的管理/调试/监控界面，我有时会使用 Oracle/OpenJDK JVM 中的[内置 HTTP 服务器](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html)。

它是内置的，尽可能轻巧。但不能跨 Oracle/OpenJDK 以外的 JVM 移植。不可移植，我只推荐它用于调试接口或类似的。

# c# - LoadTesting，如何在不影响 Avg 的情况下在 TestInitialize 中完成工作。测试时间

> ID：14651850
> 
> 赞同：0
> 
> 时间：2013-02-01T17:33:15.527
> 
> 标签：c#, unit-testing, load-testing

我的负载测试中的一些测试涉及两个步骤来获取我需要的数据，但是我想单独测试该过程的每个组件所花费的时间，以便我可以轻松地将其保存到我的负载测试数据库中，并允许另一个人创建一个报告。例如我需要测试这两种方法的时间：

```
public FooObject[] GetFooList()  
public FooObject GetFoo( FooId ) 
```

你会使用这些的方式是这样的：

```
 FooObject[] results = GetFooList();  
 FooObject finalResult = GetFoo( results[0].FooId ); 
```

我想知道 GetFooList() 和 GetFoo() 需要多长时间才能完成，所以我认为通过在 TestInitialize 方法中为 GetFoo() 所需的准备工作，它不会影响记录的测试时间。在用 thread.sleep() 进行了一些测试后，我意识到事实并非如此。这是我现在的班级。

```
[TestClass]  
public class MyTestClass
{  

  public static object f;  
  public static Random r = new Random();  

  public TestContext TestContext { get; set; }  

  [TestInitialize]  
  public void testInit() {  
    if( TestContext.TestName == "GetFooTest" ) {  
        FooObject[] results = GetFooList();  
        f = results[ r.nextInt( results.Length ) ];  
    }  
  }  

  [TestMethod]  
  public void GetFooTest()  
  {   
    GetFoo( ((FooObject)f).FooId );  
  }  

  [TestMethod]
  public void GetFooListTest()
  {
     GetFooList();
  }  
} 
```

我想知道是否：
1\. 负载测试有办法忽略测试的 TestInitalize 组件，或者
2\. 如果没有，是否有关于如何解决此问题的建议。

我有大约 10 对不同的这些方法（GetBarList、GetBar 等）要做，这就是为什么我将**f**存储在一个通用对象中，并最终让测试初始化​​有一个大的 switch 语句。任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:29:34.357

IFAIK，时间不包括 TestInitialize。此外，您可以与 Timer 一起使用：

```
this.TestContext.BeginTimer("transaction name");  
//the code you want to measure   
this.TestContext.EndTimer("transaction name"); 
```

# assembly - SPARC 汇编语言

> ID：14651855
> 
> 赞同：0
> 
> 时间：2013-02-01T17:33:27.493
> 
> 标签：assembly, sparc

我正在尝试运行一个示例 Sparc 汇编语言，但我什至不知道从哪里开始。我试过了`vim macro`，`m4 example.m`但我不知道在哪里以及如何编译它。我搜索了互联网，阅读了文章，但没有一篇提到如何开始编码。

例如，我想输入这种汇编语言：

```
.global main
 main:  save    %sp, -96, %sp   

 mov    PROMPT, %o0 
 call   writeChar
 nop
 call   readInt 
```

我应该使用什么推荐来编译和运行？（使用 Linux）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:40:05.843

您不“编译”汇编代码，而是“组装”它！也就是说，您的编译器驱动程序可能可以做到。汇编源代码的常见文件扩展名是`.s`，所以可能类似于：

```
cc -o example example.s 
```

然后，如果它有效，您将拥有一个名为`example`运行、测试和调试的可执行文件。

# git - Git S3 密钥错误

> ID：14651856
> 
> 赞同：1
> 
> 时间：2013-02-01T17:33:33.057
> 
> 标签：git, amazon-s3, repository

我正在尝试将[GitS3](http://wiki.cs.pdx.edu/oss2009/index/projects/gits3.html)设置为将 git 与 s3 一起使用。我只是不确定如何处理这个错误：

```
~/code/jumpin/pipe: python $GITS3/src/gits3/gits3.py push s31 refs/head/master
Local Refs:  refs/head/master
HEAD 8d1ccd43c5d7245c8376d8245f460ea554de5cab
refs/remotes/origin/HEAD 8d1ccd43c5d7245c8376d8245f460ea554de5cab
refs/remotes/origin/master 8d1ccd43c5d7245c8376d8245f460ea554de5cab
refs/heads/master 8d1ccd43c5d7245c8376d8245f460ea554de5cab
Traceback (most recent call last):
  File "/Users/frout/code/gits3/src/gits3/gits3.py", line 124, in <module>
    main(sys.argv[1:])
  File "/Users/frout/code/gits3/src/gits3/gits3.py", line 93, in main
    updated_objects = client.get_updates(refs, tracking_ref)
  File "/Users/frout/code/gits3/src/gits3/local_repo.py", line 67, in get_updates
    local = refs[local_ref]
KeyError: 'refs/head/master' 
```

任何人都知道我需要修复什么？

我也会推荐其他好的工具来顺利完成这项工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:57:48.890

[考虑到这段代码](https://github.com/abdelhalim/gits3/blob/master/src/gits3/amazon_s3_transport.py#L149-L181)（它可以引发 a `KeyError`），这似乎与不正确的 ref 有关。

```
 # .git/HEAD
        if refs.startswith('refs/heads'):
            head_str = 'ref: ' + refs + '\n'
        else:
            head_str = 'refs: refs/heads/' + refs + '\n' 
```

尝试：

```
 python $GITS3/src/gits3/gits3.py push s31 refs/heads/master
                                                    ^
                                                    |
                                                    --- heads, not head 
```

在[Git Internals: Git References](http://git-scm.com/book/en/Git-Internals-Git-References)中，`refs/heads`确实存在，而不是`refs/head`.

# ios - 将 UITableViewController 推送到导航堆栈失败

> ID：14651860
> 
> 赞同：1
> 
> 时间：2013-02-01T17:33:50.873
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我有一个应用程序，其中嵌套`UITabBarController`了一些，以及这些导航控制器内部的子类。当我尝试将新创建的导航控制器推送到其中包含现有 tableView 的现有导航控制器时，应用程序挂起，并且 Instruments 显示它通过调用来一遍又一遍地分配一些东西，不管那是什么。`UINavigationController``UITableViewController``UITableViewController``[UIWindow _subtreeMonitorsForView:]`

我以一种非常简单的方式推动控制器，只是：

```
_orderForm = [[OrderFormViewController alloc] init];
[self.navigationController pushViewController:_orderForm animated:YES]; 
```

如果我改变它以便我推动一个平原`UIViewController`而不是一个桌子，它就可以了。也就是说，如果我只是将 OrderFormViewController.h 文件中的声明从`UITableViewController`to更改为`UIViewController`，它会向我显示空白视图，没有挂起。可能是什么问题呢？

注意，OrderFormViewController.h 的内容非常简单，只包含标准的内置函数。我尝试推送不同的子类`UITableViewController`（用于初始化 a 时工作正常`UINavigationController`），结果是相同的 - 应用程序挂起并不断消耗内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:35:03.350

我已经找到了这个问题的罪魁祸首以及其他一些类似的错误。这是我在实例化控制器之前在我的应用程序委托中执行此操作的事实：

```
UIView *bg = [[UIView alloc] initWithFrame:CGRectZero];
bg.backgroundColor = [UIColor whiteColor];
[[UITableView appearance] setBackgroundView:bg]; 
```

关于使用的一些东西`[UITableView appearance]`不能很好地与代码一起使用，包括无法`UIDatePicker`在任何变体中使用（尽管`UIPickerView`仍然有效，这只会让我更加困惑）。

出于某种原因，尽管听起来很有希望，但整个`UIAppearance`协议存在一些问题，这不是我第一次发现它是导致一些奇怪错误的原因。摆脱它可以让一切完美运行。

# javascript - Highcharts - 如何通过 js 切换数据标签？

> ID：14651865
> 
> 赞同：3
> 
> 时间：2013-02-01T17:34:01.997
> 
> 标签：javascript, jquery, internet-explorer, highcharts

我想以这样一种方式使用 Highcharts，即单击图例项可以启用该特定类别的数据标签。这可能吗？我尝试了以下方法来启用数据标签，但没有成功：

```
chart.series[0].data.dataLabels.enabled = true; 
```

这是我正在使用的 jsfiddle：http: [//jsfiddle.net/MXZgj/3/](http://jsfiddle.net/MXZgj/3/)（请搜索 legendItemClick 以查看适用代码的位置）。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-19T22:04:40.890

这有效：

```
 chart.series[0].update({ dataLabels: { enabled:true }}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:32:28.117

我最终不得不遍历系列中的每个点并启用每个单独的数据标签。

```
series: {
    events: {
        legendItemClick: function(event) {                   
            var selected = this.index;
            var allSeries = this.chart.series;

            $.each(allSeries, function(index, series) {                
                if (selected == index) {
                    $.each(series.points, function(i, point) {
                        point.update({
                            dataLabels: {
                                enabled: true
                            }
                        });
                    });
                } else {
                    $.each(series.points, function(i, point) {
                        point.update({
                            dataLabels: {
                                enabled: false
                            }
                        });
                    });
                }
            });

            return false;
        }
    }
} 
```

可以使用一些代码清理，但效果很好。

# svg - 如何在 HighCharts 条形图中绘制 SVG 线条？

> ID：14651866
> 
> 赞同：1
> 
> 时间：2013-02-01T17:34:07.433
> 
> 标签：svg, highcharts, renderer

我有一个分组条形图，就像在[http://www.highcharts.com/demo/column-basic](http://www.highcharts.com/demo/column-basic)中一样。我想为每个组绘制带有平均值的水平线（例如，1 月、2 月等的历史世界平均降雨量？）有没有简单的方法可以做到这一点？当然，每个组都会有不同的水平线 - 但我不知道是否有办法处理单个条并使用 SVG 线或任何其他方式。非常感谢任何指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:48:01.650

您可以使用循环计算每组的平均值，然后转换位置。显然，您还应该需要有关刻度宽度的信息。

[http://jsfiddle.net/rfwd9/2/](http://jsfiddle.net/rfwd9/2/)

```
var i = 0,
            avg,
            yAxis = chart.yAxis[0],
            r = chart.renderer,
            tickWidth = chart.plotWidth / chart.series[0].data.length,
            startX = chart.plotLeft,
            len = chart.series[0].data.length,
            seriesCount = chart.series.length;

        for (i = 0; i < len; i++) {
            avg = 0;
            $.each(chart.series, function (j, serie) {
                avg += serie.data[i].y;
            });
            avg = Math.floor(avg / seriesCount);

            r.path(['M', startX, chart.plotHeight -  yAxis.translate(avg), 'L', startX + tickWidth, chart.plotHeight - yAxis.translate(avg)])
                .attr({
                'stroke-width': 2,
                stroke: 'red'
            })
                .add();
            startX = startX + tickWidth;
        } 
```

# symfony - 如何将部分动态附加到 Symfony 2 配置？

> ID：14651871
> 
> 赞同：15
> 
> 时间：2013-02-01T17:34:21.873
> 
> 标签：symfony

```
my_bundle:
    algorithm: blowfish # One of 'md5', 'blowfish', 'sha256', 'sha512' 
```

此配置由此配置树完成：

```
// Algorithms and constants to check
$algorithms = array(
    'md5'      => 'CRYPT_MD5',
    'blowfish' => 'CRYPT_BLOWFISH',
    'sha256'   => 'CRYPT_SHA256',
    'sha512'   => 'CRYPT_SHA512',
);

$rootNode
    ->children()
        ->scalarNode('algorithm')
            ->isRequired()
            ->beforeNormalization()
                ->ifString()
                ->then(function($v) { return strtolower($v); })
            ->end()
            ->validate()
                ->ifNotInArray(array_keys($algorithms))
                ->thenInvalid('invalid algorithm.')
            ->end()
            ->validate()
                ->ifTrue(function($v) use($algorithms) {
                    return 1 != @constant($algorithms[$v]);
                })
                ->thenInvalid('algorithm %s is not supported by this system.')
            ->end()
        ->end()
    ->end(); 
```

由于每种算法都需要不同的参数，如何根据所选算法动态地将它们添加为根节点的子节点？

例如，如果算法是“blowfish”，则应该有一个名为“cost”的标量节点，而如果“sha512”是一个标量节点“rounds”，每个节点都有不同的验证规则。

**编辑**：我真正需要的是弄清楚当前的算法（如何处理`$rootNode`？）而不是调用：

```
$rootNode->append($this->getBlowfishParamsNode());
$rootNode->append($this->getSha256ParamsNode());
$rootNode->append($this->getSha512ParamsNode()); 
```

**编辑**：我想完成的可能配置：

```
my_bundle:
    algorithm: blowfish
    cost: 15 
```

其他：

```
my_bundle:
    algorithm: sha512
    rounds: 50000 
```

还有一个：

```
my_bundle:
    algorithm: md5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:41:20.967

`ifTrue()`如果值为 ，您可以检查（使用`algorithm`）`md5`。如果是这种情况，请取消设置包含原始配置值的数组中的`blowfish`, `sha256`,`sha513`键。

然后，您可以使用类似的逻辑 if `algorithm`is或。`blowfish``sha256``sha513`

* * *

```
$rootNode->
    ->beforeNormalization()
        //...
        ->ifTrue(function($v) {
            // $v contains the raw configuration values
            return 'md5' === $v['algorithm'];
        })
        ->then(function($v) {
            unset($v['blowfish']);
            unset($v['sha256']);
            unset($v['sha512']);
            return $v;
        })
        ->end()
        // ...do same logic for the others
    ->end(); 
```

你必须使用这样的东西：

```
my_bundle:
    algorithm: blowfish
    md5: #your params
    blowfish: #will be unset if algorithm is md5 for example
    sha256: #will be unset if algorithm is md5 for example
    sha512: #will be unset if algorithm is md5 for example 
```

正如您所提到的，您可以附加所有这些：

```
$rootNode->append($this->getMd5ParamsNode());
$rootNode->append($this->getBlowfishParamsNode());
$rootNode->append($this->getSha256ParamsNode());
$rootNode->append($this->getSha512ParamsNode()); 
```

## 编辑

还有一个`thenUnset()`功能。

## 编辑

Doctrine 的[做法在这里](https://github.com/doctrine/DoctrineBundle/blob/master/DependencyInjection/Configuration.php)可能很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:21:03.473

Gremo，也许我在这里走错了路。顺便说一句，感谢您对我的问题的答复。

它只是一个意见，也许它只是一个愚蠢的答案......好吧，我们开始吧。

对于您的回答，我知道您已经知道/了解[捆绑扩展](http://symfony.com/doc/current/cookbook/bundles/extension.html)的工作原理。

也许您可以定义所需的 4 个空参数，如[配置服务和设置参数中所见](http://symfony.com/doc/current/cookbook/bundles/extension.html#configuring-services-and-setting-parameters)

...*您将根据传入的配置值在扩展类中设置此参数*...

然后您可以对树进行特定检查（例如，如果算法是“河豚”，则需要成本）

```
$rootNode->
    ->beforeNormalization()
        ->ifTrue(function($v) {
            // $v contains the raw configuration values
            // if 'algorithm' blowfish -> cost isRequired
            // or as you said on your question you can call
            // ->append($this->addBlowfishParametersNode())
        })
        ->then(function($v) {
            // maybe some unsetting, but not needed
        })
        ->end()
    ->children()
        // ...
    ->end()
; 
```

检查“[附加部分](http://symfony.com/doc/current/components/config/definition.html#appending-sections)”

```
public function addBlowfishParametersNode()
{
    $builder = new TreeBuilder();
    $node = $builder->root('parameters');

    $node
        ->isRequired()
        ->requiresAtLeastOneElement()
        ...
        ... 
```

# regex - 为什么 DFA 中不能有多态？

> ID：14651874
> 
> 赞同：0
> 
> 时间：2013-02-01T17:34:32.780
> 
> 标签：regex, dfa

我的问题是，state3 是否也可以命名为 state2，或者一般情况下。为什么我们可以用相同的名称命名我们的州。对于表达式`ab+a*a` First state 采用“a”。然后它将进入 state2/state3。![在此处输入图像描述](../Images/be5809130a1c6738d52819b7b230595a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:44:00.420

有限状态机被定义为包含（除其他外）一*组*状态，因此对每个状态进行唯一标识是有意义的。状态的命名与它们可能被击中的顺序没有任何关系。

FSM 涉及循环的情况并不少见。一个示例是 FSM 接受具有偶数个 0 的二进制字符串，由下面的状态表表示：

```
输入 --> | 0 | 1 |
\/--状态 | | |
----------|--------|--------|
状态0 | 状态1 | 状态0 |
状态1 | 状态0 | 状态1 |

状态：{state0，state1}
开始状态：state0
接受状态：{state0}

```

在这种情况下，机器可能会`state0`来回移动`state1`很多次。如果我们每次都必须有一个新的状态，机器的复杂性就会爆炸到无穷大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:43:17.427

你可以随意命名你的状态，只要它们是唯一可识别的。

如果状态没有不同，那么它们首先不应该是两个独立的状态

* * *

您的特定示例没有任何`or`-ing，因此您的正则表达式将永远不会使用像那样分支的 DFA。

但是假设你有一个像这样的正则表达式

`a(bb | cc)`, 可以匹配`abb`或`acc`

`ab`并且`ac`是不同的状态，必须将它们彼此区分开来，并且它们的输出会导致不同的结论。

如果你在`ab`并且你得到了一个`c`比你将不得不回到开始，但如果你在这个状态`ac`并且得到`c`比你将继续`acc`并完成。

# php - SQL 视图和 JSON 磁盘缓存

> ID：14651880
> 
> 赞同：0
> 
> 时间：2013-02-01T17:34:51.313
> 
> 标签：php, sql, json, caching, views

我正在编写一个**类似 reddit 的网站**。

用户可以显示其选择的类别中的项目。

为此，我正在查询他订阅的类别和项目的**JOIN 。**

铁杆查询

第一个解决方案：将数据存储在磁盘上的“ **categories_1-2-4-7-10.json** ”中，并将其提供给浏览相同类别的用户。

缺点：占用磁盘空间，**负载重**。

我正在考虑一个新的解决方案：**views**。但是我真的不知道它们是如何工作的，它们是否经常重新生成以成为服务器的重载？

View 可以让我查询已经加入的数据

进一步：我只是为首页项目制作一个视图。我不需要优化后面的页面，因为它们的访问频率不高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:40:34.510

将内容存储到磁盘然后将它们加载到站点是一个坏主意。与内存操作相比，磁盘操作非常慢。

您仍然可以存储 JSON 文档，但请考虑将它们存储在缓存层中。

像 Redis 这样的东西，这是最近的新热点 ( [http://redis.io/](http://redis.io/) ) 或 Couchbase ( [http://www.couchbase.com/](http://www.couchbase.com/) )

将所有内容存储在内存中，站点会更快。

至于重新生成视图的频率……一个好主意是给它们一个过期时间。阅读有关一般缓存如何工作的信息。您可以将类别视图设置为在缓存中存在大约 1 分钟。一分钟后，该项目离开内存，您进行数据库查询以放回较新的版本。冲洗并重复。

# java - pdf 生成失败时向 portlet 资源响应提供错误页面

> ID：14651882
> 
> 赞同：1
> 
> 时间：2013-02-01T17:34:57.007
> 
> 标签：java, servlets, spring-mvc, pdf-generation, portlet

我有一个资源感知 spring mvc portlet，我用它来提供 PDF。以前，我们从 portlet 提供 PDF 的方法是链接到 servlet 以实际编写 PDF 响应。我们在 servlet 中的模式基本上是这样的：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        OutputStream out = response.getOutputStream();
        FileInputStream certIn = null;
        try {
            certIn = new FileInputStream(pdfFile);
            if (certIn.available() > 0) {
                while (certIn.available() > 0) {
                    out.write(certIn.read());
                }
                out.flush();
            }                       
        } catch (IOException e) {
            response.reset();
            response.setContentType("text/html");
            getServletContext().getRequestDispatcher("/WEB-INF/jsp/error.jsp").include(request, response);
        } finally {
            if (certIn != null) {
                try {
                    certIn.close();
                } catch (IOException e) {
                    LOG.warn(
                            "Failed to close FileInputStream", e);
                }
            }
            if (out != null) {
                try {
                    out.close();
                } catch (IOException e) {
                    LOG.warn("Failed to close ServletOutputStream", e);
                }
            }
        }
    } 
```

我现在正试图在资源感知 portlet 中复制它。我遇到的问题是，如果出现错误，我无法将其重定向到错误 jsp。

如果我使用 portletContext.getRequestDispatcher() 转发到 jsp，我会收到一条错误消息，指出我无法在 getOuputStream() 之后调用 getWriter()。如果我尝试将 spring ModelAndView 返回到 error.jsp，我会得到同样的错误。

谁能建议我如何在 ResourceResponse 上调用 getOutputStream() 后将用户重定向到 jsp？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:43:21.757

最后稍微改变了我正在做的事情的顺序。现在在我知道文件存在并且可读之前不要调用 getPortletOutputStream()。如果它在实际写入输出流时失败，它就不能为 jsp 提供服务，但对于 servlet 也是如此。

# jquery - 通过href标签提交表单不起作用

> ID：14651883
> 
> 赞同：0
> 
> 时间：2013-02-01T17:34:58.710
> 
> 标签：jquery, html, forms

在我们的应用程序中，我们最近采用了改进的 GUI 样式。最初，我们的表单提交链接类似于以下内容：

```
<input type=submit class="some-style" name="Command" value="Save" /> 
```

但是，我们正在尝试使用以下内容：

```
<input id='hiddenSaver' type="hidden" name="Command" value="Save" />
<a id='saveButton' href="#" class="some-style"><i class="some-icon"></i> Save</a>

<!-- SNIP: Extraneous other stuff -->

<script>
var $saveButton = $('saveButton'),
    $hiddenSaver = $('hiddenSaver');

$(document).ready(function () {
  $saveButton.click(function () {
    $saveButton.preventDefault();
    $hiddenSaver.submit();
  });
});
</script> 
```

然而我们的表单并没有提交......事实上，他们只是什么都不做。我们缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:36:39.343

您没有正确使用[**id 选择器**](http://api.jquery.com/id-selector/)并错过了`#`选择器中的前 id。

```
var $saveButton = $('#saveButton'),
$hiddenSaver = $('#hiddenSaver'); 
```

在表单对象上调用提交而不是在按钮上

```
$hiddenSaver.closest('form').submit(); 
```

或者

```
$hiddenSaver = $('hiddenSaver').closest("form");
$hiddenSaver.submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:43:37.100

您正在`.submit()`输入字段而不是表单上调用。以下是 jQuery 文档的摘录：

> 当用户尝试提交表单时，提交事件被发送到元素。它只能附加到`<form>`元素上。`<input type="submit">`可以通过单击显式、`<input type="image">`或`<button type="submit">`或在某些表单元素具有焦点时按 Enter来提交表单。

请参阅`.submit()`此处的 jQuery API 页面：

[jQuery .提交()](http://api.jquery.com/submit/)

尝试将 附加`.submit()`到您提交的表单。也不要考虑什么输入，他们建议提交表单。我不确定你是否可以用你的锚标签来做到这一点。你当然可以使用：

```
<button type="submit">Submit</button> 
```

我知道你正在使用一个新的 GUI，但是通过一些 CSS 样式，你可以让按钮看起来很漂亮。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:51:20.443

这个答案完全解决了发布的原始问题，包括一个工作演示......

> **标题**：“通过 a href 标签提交”

您的代码存在以下几个问题...

1) 您的 jQuery ID 选择器缺少该`#`标志。

2）您未能将事件变量传递`e`给`.preventDefault()`使用`function(e)`和`e.preventDefault()`

3)`submit()`依附于`form`自身，而不是`input`元素。

我在下面更正了您的代码：

```
<form id="myform">
    <input id='hiddenSaver' type="hidden" name="Command" value="Save" />
</form>

<a id='saveButton' href="#" class="some-style"><i class="some-icon"></i> Save</a>

<!-- SNIP: Extraneous other stuff -->

<script>
var $saveButton = $('#saveButton'),
    $hiddenSaver = $('#hiddenSaver'),
    $myform = $('#myform');

$(document).ready(function() {
    $saveButton.click(function(e) {
        e.preventDefault();
        $myform.submit();
    });
});
</script> 
```

**工作演示：http:** [//jsfiddle.net/sBueS/](http://jsfiddle.net/sBueS/)

我在 jsFiddle 中包含了 jQuery Validate 插件，只是为了证明表单确实是使用`submit()`由锚标记触发的事件提交的`<a>`。

# c# - 将三角形旋转到 Z = 0

> ID：14651884
> 
> 赞同：0
> 
> 时间：2013-02-01T17:35:00.393
> 
> 标签：c#, xna, rotation, geometry

我试图在 3D 空间中使用 XNA 在三角形中打一个洞。我想将此问题转换为二维空间。但我不知道如何旋转所有点都有 Z = 0 的三角形。Point1 的坐标 X = 0，Y = 0，Z = 0。有人知道解决方案吗？LG延斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:40:53.233

1.  选择不在 (0,0,0) 处的点之一。围绕 y 轴旋转形状，直到该点的 z 值为 0。

2.  选择剩余的点。围绕 X 轴旋转形状，直到该点的 z 值为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:49:17.953

给定`P1`, `P2`,`P3`三角形的点。

让我们注意：

*   `a = P2 - P1`
*   `b = P3 - P1`
*   `n = Vector3.CrossProduct(a, b).Normalized()` ->`n`是三角形的法线

三角形在`Z = 0`平面上当且仅是，`n.z = 0` 然后，只需使用：

*   `d = Vector3.CrossProduct(n, z).Normalized()`-> 这是你的旋转轴
*   `angle = (float)System.Math.Acos(Vector3.DotProduct(n, z))`-> 这是你旋转的角度

代码是：

```
Vector3 a = P2 - P1;
Vector3 b = P3 - P1;
Vector3 n = Vector3.Cross(a, b);
n.Normalize();
Vector3 d = Vector3.Cross(n, Vector3.UnitZ);
d.Normalize();
float angle = (float)System.Math.Acos(Vector3.Dot(n, Vector3.UnitZ));

Vector3 newpoint2 = P1 + Vector3.Transform(a, Matrix.CreateFromAxisAngle(d, angle));
Vector3 newpoint3 = P1 + Vector3.Transform(b, Matrix.CreateFromAxisAngle(d, angle)); 
```

# ruby-on-rails - rails postgres zsh Symbol not found: _rb_eEncCompatError (LoadError)

> ID：14651886
> 
> 赞同：0
> 
> 时间：2013-02-01T17:35:02.217
> 
> 标签：ruby-on-rails, postgresql, zsh, iterm

一段时间以来，我一直在解决本地开发 Rails 设置中的一个非常奇怪的问题。虽然我无法准确跟踪它何时开始，但我想发布此消息以查看是否有其他人看到此问题或对如何解决此问题有想法。

如何复制此错误。我启动 iterm2 (zsh) 并在项目的第一个选项卡中运行`rails s`以启动服务器。和大多数开发人员一样，我按 cmd+t 打开一个新选项卡，当我尝试运行`rails c`rails 控制台时，会显示此错误。就像我被限制在一个选项卡上一样。我在网上几乎没有找到关于如何解决这个问题的研究或方向，我希望有人能指出我正确的方向。

它似乎在 PG gem 上失败了，我已经验证我正在运行最新版本。

我的 .zshrc 文件：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # This loads RVM into a shell session.
export PATH=/Users/chrishough:/Users/chrishough/.rvm/gems/ruby-1.9.3-head/bin:/Users/chrishough/.rvm/gems/ruby-1.9.3-head@global/bin:/Users/chrishough/.rvm/rubies/ruby-1.9.3-head/bin:/Users/chrishoug$ 
```

这是终端中弹出的确切错误的副本。

```
/Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/pg-0.14.1/lib/pg_ext.bundle: dlopen(/Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/pg-0.14.1/lib/pg_ext.bundle, 9): Symbol not found: _rb_eEncCompatError (LoadError)
  Referenced from: /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/pg-0.14.1/lib/pg_ext.bundle
  Expected in: flat namespace
 in /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/pg-0.14.1/lib/pg_ext.bundle - /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/pg-0.14.1/lib/pg_ext.bundle
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/pg-0.14.1/lib/pg.rb:4
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `require'
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
    from /Users/chrishough/Huedio/Code/Profiles/config/application.rb:13
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/railties-3.2.11/lib/rails/commands.rb:39:in `require'
    from /Users/chrishough/.rvm/gems/ruby-1.9.3-p374@My-Application-Profiles/gems/railties-3.2.11/lib/rails/commands.rb:39
    from script/rails:6:in `require'
    from script/rails:6 
```

非常感谢大家的帮助。周末愉快。

***更新***

从@crazymykl 我更新了我的 .zshrc 配置，看起来像这样，错误似乎已经消失了。

```
# RUBY DEVELOPMENT
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # This loads RVM into a shell session.
# export PATH=/Users/chrishough:/Users/chrishough/.rvm/gems/ruby-1.9.3-head/bin:/Users/chrishough/.rvm/gems/ruby-1.9.3-head@global/bin:/Users/chrishough/.rvm/rubies/ruby-1.9.3-head/bin:/Users/chrishoug$ 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:56:36.823

您的问题的根源是您的 .zshrc 指的是`ruby-1.9.3-head`，它正在寻找`ruby-1.9.3-p374`pg_ext.bundle。不匹配的版本会导致各种奇怪。

# batch-file - dos 命令使用通配符删除文件夹和文件

> ID：14651887
> 
> 赞同：1
> 
> 时间：2013-02-01T17:35:04.823
> 
> 标签：batch-file, dos

在 DOS 批处理命令窗口中，我想删除文件夹（以及该目录中的相应文件），其名称的一部分包含以下字符串（SUB

我想从名为 C:\app2\proc 的特定根目录开始。

我想删除目录和目录中包含的文件。

我想删除部分文件名所在的文件夹（SUB。到目前为止我尝试过的方法不起作用。

这是我到目前为止所尝试的：

```
del /f /s /q C:\app2\proc\*(SUB* 
```

注意：之前的星号 (SUB 和之后的星号 (SUB 没有出现在我尝试过的内容的显示中。那么你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:51:32.793

您可以使用 for 循环来运行您的文件并将变量（在本例中为 %x）发送到`rmdir`您的路径。尝试这个：

```
for /d %x in (*(sub*) do rmdir /s /q c:\app2\proc\%x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:47:12.450

您可能需要转义该 ( 字符，以免对其进行评估。

结帐[http://www.robvanderwoude.com/escapechars.php](http://www.robvanderwoude.com/escapechars.php)看来你应该替换 ( 用 ^(

# ember.js - Ember.JS + Require.JS — 根据路由渲染特定视图

> ID：14651889
> 
> 赞同：0
> 
> 时间：2013-02-01T17:35:07.307
> 
> 标签：ember.js, requirejs, javascript-framework

我正在尝试 Ember.JS，到目前为止，我**很难**将它与 Require.JS 一起使用，即使是一个（非常）基本的例子。

首先，我想说 Require.JS 应该（我认为）改进我在 Ember.JS 中看到的两个弱点：

*   组织应用程序，尤其是在单独的 js 文件中
*   不加载不必要的代码

我基本上是在尝试显示带有页眉/内容/页脚的应用程序。所以，当我创建我的应用程序时，我绑定了一个 ApplicationController 和一个 ApplicationView，并且视图处理模板。这在显示（很容易）页眉和页脚时效果很好。

然后，我正在尝试为索引渲染模板（例如），并且我想**动态**加载 IndexView/IndexController（例如）并将其与路由绑定。这就是我遇到困难的地方。

我找到了一个简单的方法，通过将 IndexView 直接设置为 App.IndexView，但是这个解决方案的问题是，如果我加载 IndexView，我也会加载索引模板文件内容（使用 text.js 插件）。这对我的示例来说没问题，但是因为我正在尝试构建一个复杂的网站，这意味着在加载网站时加载所有模板，这正是 Require.JS 试图避免的。

**我在这里错在哪里？**如何根据路由动态加载模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:58:49.137

**编辑**：实际上不需要在主 html 文档中声明占位符，因为它是使用 view.append() 注入的。

我一直在为同样的事情苦苦挣扎，最后我想出了一种方法来分割路由器、控制器、视图和模板，动态加载它们。

这是我的主要“embermain.js”文件：

```
window.MyRanks = Ember.Application.create();

MyRanks.Router.map(
    function() {
        this.route('about');
    }
);

MyRanks.AboutRoute = Ember.Route.extend({
    setupController: function(controller, model) {
        require(['app/controller/AboutController'], function(controller) {
        });
    }
}); 
```

这是我的 AboutController：

```
require(
    ['app/view/AboutView'],
    function (view) {
        var controller = MyRanks.AboutController = Ember.Controller.extend({
        });
        return controller;
    }); 
```

这是我的关于视图：

```
define(
    ['text!app/templates/about.html'],
    function (template) {
        var view = Ember.View.create({
            template: Ember.Handlebars.compile(template),
            templateName: 'about',
            variable: 'my value',
            didInsertElement: function() {
                console.log( "Yes the view was included");
            }
        });
        view.append();
        return view;
    }
); 
```

这是模板 about.html

```
This is the template {{view.variable}} 
```

希望能帮助到你！:)

# iphone - 适配一个 Urlview Iphone5 和 4

> ID：14651892
> 
> 赞同：1
> 
> 时间：2013-02-01T17:35:20.257
> 
> 标签：iphone, xcode

这是 iphone4 在 ladscape 模式下工作的代码，但在 iphone5 中给出了两个黑色条横向。提前致谢！

CGRect contentRect = CGRectMake(-80, 80, 480, 320); viewRot.bounds = contentRect;

# java - 无法创建套接字，抛出 IOException

> ID：14651894
> 
> 赞同：0
> 
> 时间：2013-02-01T17:35:22.777
> 
> 标签：java, sockets, ioexception

我创建了一个聊天程序，要求用户选择客户端或服务器角色。我消除此要求的方法是让每个用户都启动他们自己的服务器，他们将从那里获取消息。这应该允许我让两个客户端与另一个客户端交谈，而不必在它们之间放置服务器。

现在我已经修改了我的程序，让客户端进行发送，服务器进行接收。

请注意，在这些更改之前，两个程序之间的通信工作得非常好。但是，既然我已经更改了一些东西，那么早在我创建套接字时就会发生错误。

直到出现问题为止，我的程序流程如下：

*   程序开始
*   服务器自动启动，绑定本地6666端口
*   弹出连接配置，用户点击保存按钮（目标主机和端口被保存）
*   用户单击连接按钮
*   程序创建一个客户端线程
*   线程创建套接字并启动出站流

经过一些调试，我发现这个套接字永远不会被创建。

当流程进入此阶段（列表中的最后一项）时，仅执行“第一个测试”。

```
public void run() {
            System.out.println("First test");
            createConnection();
            System.out.println("Second test");
            initiateIO();
    }

private void createConnection() {
        try {
            socket = new Socket(host, port);
        } catch (UnknownHostException e) {
            OutputUtil.showErrorMessage("Couldn't bind socket to unknown host", "Unknown host");
        } catch (IOException e) {
            OutputUtil.showErrorMessage("General IO error at creating client socket", "IO error");
        }
    }

private void initiateIO() {
        try {
            outbound = new PrintWriter(socket.getOutputStream(), true);
        } catch (IOException e) {
            OutputUtil.showErrorMessage("Couldn't load IO streams from client", "IO Error");
        }
    } 
```

输出：

```
Console: First test
Popup: General IO error at creating client socket
Console: Second test
Console: NPE at `outbound.close()` 
```

我假设 NPE 是第一个错误的结果，考虑到在创建`PrintWriter`. 还应注意，显示第一个错误大约需要 10 秒。

一开始我以为可能是因为本地服务器和与其他客户端的连接都使用了6666端口，但在6667端口上创建链接后，问题仍然存在。审查后这是有道理的。

当我的调试器指向`outbound`初始化的行时（在“第二次测试”消息之后，套接字具有 value `null`。

我的问题是：为什么不能创建套接字？该文档仅指定

> IOException - 如果创建套接字时发生 I/O 错误。

这没什么用。

完整的源代码可以在[这里](https://github.com/Vannevelj/Messy)找到以获得更好的概述。

编辑：从第一个主要错误打印堆栈跟踪。

```
java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at core.Client.createConnection(Client.java:30)
    at core.Client.run(Client.java:64)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-21T01:51:03.370

这是防火墙问题。您指定的目标端口未在目标的防火墙中打开。

服务器也可能*没有*运行，但如果这是唯一的问题，那就是“连接被拒绝”，而不是“连接超时：连接”。

# highcharts - 在多窗格 Highstock 图表中延伸到图表区域下方的线

> ID：14651895
> 
> 赞同：0
> 
> 时间：2013-02-01T17:35:23.780
> 
> 标签：highcharts, highstock

我在使用 Highstock 时遇到问题。我有一个多窗格图表（多个图表堆叠在一起）。当我为 y 轴指定最小值和最大值时，如果系列中的任何值小于最小值，它将延伸到图表下方，通常延伸到下面的图表中。出于某种原因，当数据点高于最大值时，情况并非如此。我不知道这是 Highstock 中的错误还是我做错了什么。

我知道这对于 Highstock 来说是一个不寻常的用例，但对于我正在开发的应用程序来说是必要的。我可以在 Highstock 的多窗格图表中找到的唯一示例是在[http://www.highcharts.com/stock/demo/candlestick-and-volume](http://www.highcharts.com/stock/demo/candlestick-and-volume)的演示页面上，但情况不同。

请看我的例子：http: [//jsfiddle.net/afoster777/UJaJG/](http://jsfiddle.net/afoster777/UJaJG/)

这是我的配置：

```
var chart = new Highcharts.StockChart({
chart: {
    renderTo: 'container',
    alignTicks: false,
    plotOptions: {
        shadow: false,
        series: {
            connectNulls: false
        },
        plotBorderColor: "#CCCCCC",
        plotBorderWidth: 2,
        plotBackgroundColor: "#FFFFFF"
    }
},
navigator: {
    enabled: false
},
xAxis: {
    title: {
        text: 'Time'
    },
    type: 'datetime',
    ordinal: false
},
yAxis: [{
    title: {
        text: "Y"
    },
    min: 0.8,
    max: 0.9,
    labels: {
        align: 'right',
        x: -6,
        y: 3
    },
    lineWidth: 1,
    height: 250,
    offset: 0,
    startOnTick: false,
    endOnTick: false
}, {
    title: {
        text: "Y"
    },
    min: 0.8,
    max: 0.9,
    labels: {
        align: 'right',
        x: -6,
        y: 3
    },
    lineWidth: 1,
    top: 320,
    height: 250,
    offset: 0,
    startOnTick: false,
    endOnTick: false
}],
series: [{
    type: 'line',
    id: 0,
    name: 'Series1',
    yAxis: 0,
    data: series1data,
    marker: {
        enabled: false
    },
    tooltip: {
        valueDecimals: 2
    },
    gapSize: 2,
    connectNulls: false
}, {
    type: 'line',
    id: 1,
    name: 'Series2',
    yAxis: 1,
    data: series2data,
    marker: {
        enabled: false
    },
    tooltip: {
        valueDecimals: 2
    },
    gapSize: 2,
    connectNulls: false
}]
}); 
```

我将不胜感激任何建议。

编辑：显然已经有一个未解决的问题（问题＃1387）。有没有人有任何解决方法的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:45:13.477

显然 github 用户 sappling 已经修复了这个问题并提交了一个拉取请求。我加入了 sappling 的 Highstock 版本`<script src="http://raw.github.com/sappling/highcharts.com/clip/js/highstock.src.js"></script>`而不是香草版本，问题似乎已经解决。[http://jsfiddle.net/afoster777/jEZ9w/](http://jsfiddle.net/afoster777/jEZ9w/)

# c# - 创建整数数组的副本

> ID：14651899
> 
> 赞同：16
> 
> 时间：2013-02-01T17:35:45.943
> 
> 标签：c#

> **可能重复：**
> [C#：复制数组的任何更快的方法？](https://stackoverflow.com/questions/5099604/c-any-faster-way-of-copying-arrays)

我有一个整数数组

```
int[] a; 
```

我想将它的副本（不是参考）分配给

```
int[] b; 
```

更简单的方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-01T17:37:27.693

您可以使用本机`Clone`方法，尝试这样的事情：

```
int[] b = (int[])a.Clone(); 
```

其他选项是，使用 linq：

```
using System.Linq;

// code ...
int[] b = a.ToArray(); 
```

并复制数组

```
int[] b = new int[a.Length];
a.CopyTo(b, 0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T17:54:54.817

我认为最简单的方法是

```
int[] b = a.ToArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T17:40:52.267

你可以使用[`Array.CopyTo`](http://msdn.microsoft.com/en-us/library/system.array.copyto.aspx)方法。

```
int[] a = new[] { 1, 2, 3 };
int[] b = new int[3];
a.CopyTo(b,0); 
```

# jquery - 在背景图像的外观上触发 JQuery 代码？

> ID：14651902
> 
> 赞同：0
> 
> 时间：2013-02-01T17:35:55.527
> 
> 标签：jquery

```
 <script type="text/javascript">

            jQuery(function ($) {

                $.supersized({

                    // Functionality
                    slide_interval: 5000,       // Length between transitions
                    transition: 1,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                    transition_speed: 700,      // Speed of transition

                    // Components                           
                    slide_links: 'blank',   // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                    slides: [           // Slideshow Images
                                                        { image: 'http://farm9.staticflickr.com/8080/8339311971_cb6706842b_h.jpg', title: 'Image Credit: Maria Kazvan', thumb: 'http://farm9.staticflickr.com/8080/8339311971_cb6706842b_h.jpg', url: 'http://farm9.staticflickr.com/8080/8339311971_cb6706842b_h.jpg' },
                                                        { image: 'http://farm9.staticflickr.com/8345/8208481483_fc6b1bdf7d_h.jpg', title: 'Image Credit: Maria Kazvan', thumb: 'http://farm9.staticflickr.com/8345/8208481483_fc6b1bdf7d_h.jpg', url: 'http://farm9.staticflickr.com/8345/8208481483_fc6b1bdf7d_h.jpg' },
                                                        { image: 'http://farm8.staticflickr.com/7055/6866255833_cf22b71843_b.jpg', title: 'Image Credit: Maria Kazvan', thumb: 'http://farm8.staticflickr.com/7055/6866255833_cf22b71843_b.jpg', url: 'http://farm8.staticflickr.com/7055/6866255833_cf22b71843_b.jpg' },
                                                        { image: 'http://farm9.staticflickr.com/8487/8185988415_62ca8175e9_h.jpg', title: 'Image Credit: Colin Wojno', thumb: 'http://farm9.staticflickr.com/8487/8185988415_62ca8175e9_h.jpg', url: 'http://farm9.staticflickr.com/8487/8185988415_62ca8175e9_h.jpg' },
                                                        { image: 'http://farm9.staticflickr.com/8079/8340357550_397f7e09e3_h.jpg', title: 'Image Credit: Colin Wojno', thumb: 'http://farm9.staticflickr.com/8079/8340357550_397f7e09e3_h.jpg', url: 'http://farm9.staticflickr.com/8079/8340357550_397f7e09e3_h.jpg' },
                                                        { image: 'http://farm9.staticflickr.com/8490/8187033496_cf9587943c_h.jpg', title: 'Image Credit: Colin Wojno', thumb: 'http://farm9.staticflickr.com/8490/8187033496_cf9587943c_h.jpg', url: 'http://farm9.staticflickr.com/8490/8187033496_cf9587943c_h.jpg' },
                                                        { image: 'http://farm7.staticflickr.com/6002/5923622568_46d8e065cc_b.jpg', title: 'Image Credit: Brooke Shaden', thumb: 'http://farm7.staticflickr.com/6002/5923622568_46d8e065cc_b.jpg', url: 'http://farm7.staticflickr.com/6002/5923622568_46d8e065cc_b.jpg' },
                                                        { image: 'http://farm9.staticflickr.com/8502/8339293377_a1574a28be_h.jpg', title: 'Image Credit: Brooke Shaden', thumb: 'http://farm9.staticflickr.com/8502/8339293377_a1574a28be_h.jpg', url: 'http://farm9.staticflickr.com/8502/8339293377_a1574a28be_h.jpg' },
                                                        { image: 'http://farm9.staticflickr.com/8497/8339319687_629c824dc1_h.jpg', title: 'Image Credit: Brooke Shaden', thumb: 'http://farm9.staticflickr.com/8497/8339319687_629c824dc1_h.jpg', url: 'http://farm9.staticflickr.com/8497/8339319687_629c824dc1_h.jpg' }
                    ]

                });
            });

        </script>

<script>

    $(document).ready(function () {
        function loop(){
      $("#p1").delay("1000").fadeIn("slow");
      $("#p2").delay("1000").fadeIn("slow");
      $("#p1").delay("3000").fadeOut("slow");
      $("#p2").delay("3000").fadeOut("slow");
      $("#p3").delay("6000").fadeIn("slow");
      $("#p3").delay("3000").fadeOut("slow");
      $("#p4").delay("12000").fadeIn("slow");
      $("#p4").delay("3000").fadeOut("slow");
      $("#p5").delay("18000").fadeIn("slow");
      $("#p5").delay("3000").fadeOut("slow");
      $("#p6").delay("24000").fadeIn("slow");
      $("#p6").delay("3000").fadeOut("slow");
      $("#p7").delay("30000").fadeIn("slow");
      $("#p7").delay("3000").fadeOut("slow");
      $("#p8").delay("35000").fadeIn("slow");
      $("#p8").delay("3000").fadeOut("slow");
      $("#p9").delay("41000").fadeIn("slow");
      $("#p9").delay("3000").fadeOut("slow");
      $("#p10").delay("46000").fadeIn("slow");
      $("#p10").delay("4084").fadeOut("slow",loop);
        }
        loop();
    });

</script> 
```

好的，伙计们，问题来了。我有一个完整的背景幻灯片，我想与屏幕上出现的一些文本同步。如您所见，此文本由“p”fadeIns 表示。我的问题是，我目前确保文本始终出现在正确背景幻灯片上的方法只是延迟最后一张图像，这不太理想，因为它不同步。我很感激有人告诉我可以做到这一点的更好方法：DI 认为我们可以告诉 fadeIn 函数在第一个背景图像出现在屏幕上时立即激活，但不确定如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:17:02.247

理想情况下，您应该将代码淡入主题的函数[theme.beforeAnimation()](http://www.buildinternet.com/project/supersized/docs.html#theme-before)中，如果您使用默认主题（快门）检查文件 supersized.shutter.js 并搜索 'beforeAnimation : function(direction){' .

另一种（丑陋的）方式可能是：

*   将幻灯片放映设置为关闭
*   [使用 API 使用api.nextslide()](http://www.buildinternet.com/project/supersized/docs.html#api-nextslide)使用您想要的文本“手动”转换幻灯片

**编辑：** 首先确保您使用的是未缩小的模板版本：在您的 html 的头部，您会发现：

```
<script type="text/javascript" src="theme/supersized.shutter.min.js"></script> 
```

用。。。来代替：

```
<script type="text/javascript" src="theme/supersized.shutter.js"></script> 
```

然后编辑 supersized.shutter.js 文件并在 beforeAnimation() 函数中添加以下行（第 239 行）

```
$('[id^="p"]').fadeOut(); 
$('#p' + (vars.current_slide + 1)).delay(500).fadeIn("slow"); 
```

因为我不知道你的 html 怎么样，所以我隐藏了所有 id 以 'p' 开头的元素，最好改进这个选择器 $('[id^="p"]').fadeOut(); . 这就对了。

希望能帮助到你。

# java - 测试maven组装结果

> ID：14651903
> 
> 赞同：0
> 
> 时间：2013-02-01T17:36:19.490
> 
> 标签：java, maven, testing, maven-assembly-plugin, multi-module

我有一个 maven 多模块项目，我的两个模块应该通过 maven 插件组装，以便部署在容器顶部。

假设我的层次结构如下

*   模块1
*   模块2
*   测试模块

我在测试模块中有一个测试用例，它应该检索模块 1 和模块 2 组装的 jar 并尝试将它们部署在容器顶部。是否有可能以编程方式进行，即通过其 API 遍历 maven 项目并从项目中检索组装 jar 的文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:32:15.647

这是可能的，因为 mvn 只是调用了一个 Maven 启动类，但更简洁的方法是编写一个插件，作为安装生命周期的一部分执行测试。这样，您对程序集本身的“测试”只是构建设置的一个元素。

# sql - 如何检查 MS SQL 服务器的安全性没有被破坏？

> ID：14651904
> 
> 赞同：0
> 
> 时间：2013-02-01T17:36:23.970
> 
> 标签：sql, security

我有带有 MS SQL Server 2008 R2 标准版的 Windows Server 2008。在 Windows 服务器上，我创建了一个本地组并将域用户添加到其中。在 SQL 服务器上，我创建了一个映射到 windows 组的登录。对于这个登录，我为几个具有公共角色的数据库创建了用户映射。每个数据库表都有权选择公共角色。问题是域用户可以从除一个数据库之外的所有表中选择数据。我比较了所有数据库的设置。他们是一样的。

它是一种检查安全设置的方​​法，就像我可以使用 DBCC CHECKDB 或其他东西检查数据库一致性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:59:42.723

使用“SELECT * FROM fn_my_permissions ('Accounts', 'OBJECT') ORDER BY subentity_name, permission_name;”后 问题消失了。我使用了很多其他功能来检查安全设置（例如 sp_helpuser、sp_helprolemember），所以我不确定哪一个真的有帮助。

无论如何，问题得到了解决。

# java - 使用java线程进行多监视器同步

> ID：14651905
> 
> 赞同：2
> 
> 时间：2013-02-01T17:36:26.597
> 
> 标签：java, multithreading, synchronize

我正在编写一个小应用程序（比“HelloWorld”大一点）。任务是创建一个生产者和多个消费者。生产者生成整数并将它们放入动态堆栈（这是我的监视器对象），消费者尝试从堆栈中获取这些整数。我确实知道如何使用标志创建 1 个生产者 + 1 个消费者，并在其中使用 wait()。但是如何对多个消费者做同样的事情。

请看一下我的代码：

```
public interface StackQueueIF {
    void push(int value);
    int pop();
}

public class DynamicStack implements StackQueueIF{

    private volatile int stck[];
    private volatile int tos;

    boolean valueSet = false;

    public DynamicStack(int size) {
        stck = new int[size];
        tos = -1;
    }

    @Override
    public synchronized void push(int item) {
        while(valueSet){
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        if (tos == stck.length-1) {
            System.out.println("---------STACK HAS BEEN DOUBLED--------");
            int temp[] = new int[stck.length * 2];
            for (int i = 0; i < stck.length; i++)   temp[i] = stck[i];
            stck = temp;
            stck[++tos] = item;
        }else
            stck[++tos] = item;

        valueSet = true;
        notifyAll();
    }

    @Override
    public synchronized int pop() {
        while(!valueSet){
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        valueSet = false;
        notifyAll();
        return stck[tos--];
    }
}

class Producer implements Runnable{
    StackQueueIF queue;
    String producerName;
    private static int counter = 0;

    public Producer(StackQueueIF queue, String name) {
        this.queue = queue;
        this.producerName = name;
        new Thread(this,producerName).start();
    }

    @Override
    public void run() {
        while(true){
            System.out.println(this.producerName + " puts " + (++counter) 
              + " into stack");
            this.queue.push(counter);
            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                System.err.println(producerName + " interrupted");
                e.printStackTrace();
            }
        }
    }
}

class Consumer implements Runnable{
    StackQueueIF queue;
    String consumerName;

    public Consumer(StackQueueIF queue, String consumerName) {
        this.queue = queue;
        this.consumerName = consumerName;
        new Thread(this, this.consumerName).start();
    }

    @Override
    public void run() {
        while(true){
            System.out.println(this.consumerName + " gets " + queue.pop() + " from stack");
            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                System.err.println(consumerName + "interrupted");
                e.printStackTrace();
            }
        }
    }

}

public class QueueTester {
    public static void main(String[] args) {
        StackQueueIF queue = new DynamicStack(10);
        new Producer(queue,"Producer №1");

        new Consumer(queue,"Consumer №1");
        new Consumer(queue,"Consumer №2");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:58:23.960

这就是我编写堆栈的方式

```
public interface IntStack {
    void push(int value);
    int pop() throws InterruptedException;
}

public class DynamicStack implements IntStack {
    private int size = 0, stack[];

    public DynamicStack() {
        this(16);
    }

    public DynamicStack(int capacity) {
        stack = new int[capacity];
    }

    @Override
    public synchronized void push(int item) {
        if (size + 1 == stack.length)
            stack = Arrays.copyOf(stack, stack.length * 2);
        stack[size++] = item;
        notifyAll(); // notify() would also do.
    }

    @Override
    public synchronized int pop() throws InterruptedException {
        while (size == 0)
            wait();
        return stack[--size];
    }
} 
```

# c# - 将 GridView 导出到 Excel/CSV 不起作用

> ID：14651907
> 
> 赞同：0
> 
> 时间：2013-02-01T17:36:31.027
> 
> 标签：c#, asp.net, gridview

在过去的两天里，我一直在试图弄清楚为什么我不能将一个非常简单的 gridview 导出到 Excel 文件或 CSV 文件中。当我单击导出按钮时，什么也没有发生，我也没有收到任何错误。起初我尝试了一个导出到 excel 但没有工作的代码，现在我正在尝试这个导出到 csv 文件的代码，它也不起作用。有人可以帮忙吗？谢谢：这是标记：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        CellPadding="4"  ForeColor="#333333" 
        GridLines="None">
    <AlternatingRowStyle BackColor="White" />
    <Columns>
        <asp:BoundField DataField="GroupCategory" HeaderText="GroupCategory" 
            SortExpression="GroupCategory" />
        <asp:BoundField DataField="TotalCount" HeaderText="TotalCount" 
            SortExpression="TotalCount" />
    </Columns>
    <EditRowStyle BackColor="#7C6F57" />
    <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#E3EAEB" />
    <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#F8FAFA" />
    <SortedAscendingHeaderStyle BackColor="#246B61" />
    <SortedDescendingCellStyle BackColor="#D4DFE1" />
    <SortedDescendingHeaderStyle BackColor="#15524A" />
</asp:GridView> 
```

这是后面的代码：

```
 public void BindData()
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        SqlDataAdapter da = new SqlDataAdapter("SELECT [GroupCategory], [TotalCount] FROM [Test] ", con);
        DataTable dt = new DataTable();
        da.Fill(dt);
        GridView1.DataSource = dt;
        // GV_InlineEditing.DataBind();
        this.GridView1.DataBind();
    }

    protected void btnExportExcel_Click(object sender, EventArgs e)
    {
        Response.Clear();
        Response.Buffer = true;
        Response.AddHeader("content-disposition",
         "attachment;filename=GridViewExport.csv");
        Response.Charset = "";
        Response.ContentType = "application/text";

        GridView1.AllowPaging = false;
        GridView1.DataBind();

        StringBuilder sb = new StringBuilder();
        for (int k = 0; k < GridView1.Columns.Count; k++)
        {
            //add separator
            sb.Append(GridView1.Columns[k].HeaderText + ',');
        }
        //append new line
        sb.Append("\r\n");
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            for (int k = 0; k < GridView1.Columns.Count; k++)
            {
                //add separator
                sb.Append(GridView1.Rows[i].Cells[k].Text + ',');
            }
            //append new line
            sb.Append("\r\n");
        }
        Response.Output.Write(sb.ToString());
        Response.Flush();
        Response.End();

    }

    public override void VerifyRenderingInServerForm(Control control)
    {
        /* Verifies that the control is rendered */
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:30:07.280

您可以尝试使用这些命令将数据集导出到 Excel：

```
public void ConvertDataSetToExcel(DataSet dataSet, string strTempFileName)
{
    XmlDocument xmlDataDoc = null;
    XslCompiledTransform xslTransform = new XslCompiledTransform();
    StreamReader srrReader = null;

    XmlTextReader xtrRdr = null;
    StringWriter stwWriter = null;
    StreamWriter srwWriter = null;

    xmlDataDoc = new XmlDocument();
    xmlDataDoc.LoadXml(dataSet.GetXml());
    srrReader = new StreamReader(path_to_embedded_xsl);
    xtrRdr = new XmlTextReader(srrReader);
    stwWriter = new StringWriter();
    xslTransform.Transform(xmlDataDoc, null, stwWriter);
    xslTransform.Transform(xmlDataDoc, null, stwWriter);
    srwWriter = new StreamWriter(strTempFileName);
    srwWriter.Write(stwWriter.ToString());
    srwWriter.Close();
} 
```

请注意，这更多是针对桌面的实现，因此您必须对其进行更改以与您的应用程序一起使用。更多详情，请参阅：

[http://www.codeproject.com/Articles/9380/Export-a-DataSet-to-Microsoft-Excel-without-the-us](http://www.codeproject.com/Articles/9380/Export-a-DataSet-to-Microsoft-Excel-without-the-us) [http://www.codeproject.com/Articles/11171/DataSet-to-Excel -in-two-steps-with-Different-Style](http://www.codeproject.com/Articles/11171/DataSet-to-Excel-in-Two-steps-with-Different-Style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:11:01.200

现在一切正常，但我的错误是我什至忘记为按钮添加点击，所以这就是它没有做任何事情的原因。谢谢大家

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:49:54.523

```
Public Shared Sub Export(ByVal fileName As String, ByVal gv As GridView, Optional ByVal IncludeFooter As Boolean = True)

        HttpContext.Current.Response.Clear()
        HttpContext.Current.Response.AddHeader("content-disposition", String.Format("attachment; filename={0}", fileName))
        HttpContext.Current.Response.ContentType = "application/vnd.ms-excel"
        HttpContext.Current.Response.Charset = "UTF-8"
        Dim sw As StringWriter = New StringWriter
        Dim htw As HtmlTextWriter = New HtmlTextWriter(sw)
        '  Create a form to contain the grid
        Dim table As Table = New Table
        '  add the header row to the table
        If (Not (gv.HeaderRow) Is Nothing) Then
            myGridview.PrepareControlForExport(gv.HeaderRow)
            table.Rows.Add(gv.HeaderRow)
        End If
        '  add each of the data rows to the table
        For Each row As GridViewRow In gv.Rows
            myGridview.PrepareControlForExport(row)
            table.Rows.Add(row)
        Next
        '  add the footer row to the table
        If IncludeFooter Then
            If (Not (gv.FooterRow) Is Nothing) Then
                myGridview.PrepareControlForExport(gv.FooterRow)
                table.Rows.Add(gv.FooterRow)
            End If
        End If
        '  render the table into the htmlwriter
        table.RenderControl(htw)
        '  render the htmlwriter into the response
        HttpContext.Current.Response.Write(Replace(sw.ToString, "'", "''"))

        HttpContext.Current.Response.End()
    End Sub

    ' Replace any of the contained controls with literals
    Private Shared Sub PrepareControlForExport(ByVal control As Control)
        Dim i As Integer = 0
        Do While (i < control.Controls.Count)
            Dim current As Control = control.Controls(i)
            If (TypeOf current Is LinkButton) Then
                control.Controls.Remove(current)
                control.Controls.AddAt(i, New LiteralControl(CType(current, LinkButton).Text))
            ElseIf (TypeOf current Is ImageButton) Then
                control.Controls.Remove(current)
                control.Controls.AddAt(i, New LiteralControl(CType(current, ImageButton).AlternateText))
            ElseIf (TypeOf current Is HyperLink) Then
                control.Controls.Remove(current)
                control.Controls.AddAt(i, New LiteralControl(CType(current, HyperLink).Text))
            ElseIf (TypeOf current Is DropDownList) Then
                control.Controls.Remove(current)
                control.Controls.AddAt(i, New LiteralControl(CType(current, DropDownList).SelectedItem.Text))
            ElseIf (TypeOf current Is CheckBox) Then
                control.Controls.Remove(current)
                control.Controls.AddAt(i, New LiteralControl(CType(current, CheckBox).Checked))
                'TODO: Warning!!!, inline IF is not supported ?
            End If
            If current.HasControls Then
                myGridview.PrepareControlForExport(current)
            End If
            i = (i + 1)
        Loop
    End Sub 
```

# class - 将 WordPress 循环放入一个类中

> ID：14651913
> 
> 赞同：-2
> 
> 时间：2013-02-01T17:37:01.050
> 
> 标签：class, php, wordpress

我正在尝试为 WordPress 开发人员构建一个框架，以帮助更有效、更快地开发主题和主题框架。

但是，通过将 wordpress 循环放入一个类中，我遇到了一个小问题，这就是我所拥有的：

```
class AisisCore_Template_Helpers_Loop{

    protected $_options;

    public function __construct($options = null){
        if(isset($options)){
            $this->_options = $options; 
        }
    }

    public function init(){}

    public function loop(){
        if(have_posts()){
            while(have_posts()){
                the_post();
                the_content();
            }
        }
    }
} 
```

现在请记住课程的简单性。你所要做的就是：

```
$loop = new AisisCore_Template_Helpers_Loop();
$loop->loop(); 
```

您应该会看到帖子列表。

但是，似乎没有出现帖子。有什么东西阻止了 WordPress 循环的工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:59:06.327

我相信您对“范围”有疑问。您将需要`$wp_query`进入课堂或通过`global`. 我相信这会起作用，但仅适用于全球`$wp_query`：

```
public function loop(){
    global $wp_query;
    if(have_posts()){
        while(have_posts()){
            the_post();
            the_content();
        }
    }
} 
```

未经测试，但我认为以下内容应该适用于全局`$wp_query`或传递一些其他查询结果集。

```
protected $wp_query;

public function __construct($wp_query = null, $options = null){
    if (empty($wp_query)) global $wp_query;
    if (empty($wp_query)) return false; // or error handling

    $this->wp_query = $wp_query;

    if(isset($options)){
        $this->_options = $options; 
    }
}

public function loop(){
    global $wp_query;
    if($this->wp_query->have_posts()){
        while($this->wp_query->have_posts()){
            $this->wp_query->the_post();
            the_content();
        }
    }
} 
```

手指交叉在那个上，但我认为它应该工作。虽然没有承诺。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-01T19:11:44.670

正确，干净的答案：

```
<?php

class AisisCore_Template_Helpers_Loop{

    protected $_options;

    protected $_wp_query;

    public function __construct($options = null){
        global $wp_query;

        if(isset($options)){
            $this->_options = $options; 
        }

        if(null === $this->_wp_query){
            $this->_wp_query = $wp_query;
        }
    }

    public function init(){}

    public function loop(){
        if($this->_wp_query->have_posts()){
            while($this->_wp_query->have_posts()){
                $this->_wp_query->the_post();
                the_content();
            }
        }
    }
} 
```

# sql - 历史、分层数据的开始和停止日期字段与单个日期字段

> ID：14651917
> 
> 赞同：0
> 
> 时间：2013-02-01T17:37:10.213
> 
> 标签：sql, hierarchy

在开发历史和分层 SQL 表时，最好使用开始和停止日期字段还是每个日期使用单个日期字段？每个都有优点和缺点，但我正在寻找证据，证明哪个更优化、更优雅，并且最有效地考虑了极端情况。

例子 -

```
-- Start/Stop
create table roster (
    id bigint identity primary key,
    start_date date not null,
    stop_date date not null,
    employee_id int not null references employee (id),
    supervisor_id int not null references employee (id),
    unique(start_date, stop_date, employee_id)
)

-- Single Date
create table roster (
    id bigint identity primary key,
    row_date date not null,
    employee_id int not null references employee (id),
    supervisor_id int not null references employee (id),
    unique(row_date, employee_id)
) 
```

# java - 使用多个命名空间解组

> ID：14651918
> 
> 赞同：4
> 
> 时间：2013-02-01T17:37:11.117
> 
> 标签：java, rest, jaxb, jersey

所以，假设我有这个带有多个命名空间的 xml。

```
<Envelope xmlns:pdi="http://www.mypage.com/schemas/pdi" xmlns:ib="http://www.mypage.com/schemas/ib" xmlns="http://www.mypage.com/schemas/envelope">
  <Product>
    <pdi:number>123456</pdi:number>
  </Product>
  <Instance>
    <ib:serial>abcdefg</ib:serial>
  </Instance>
</Envelope> 
```

我正在尝试为它建立一个客户端。我有一个这样声明的信封 POJO

```
@XmlRootElement(name ="Envelope", namespace = "http://www.mypage.com/schemas/envelope")
public class Envelope 
```

在里面，它有这些属性

```
@XmlElement(name="Product", namespace = "http://www.mypage.com/schemas/pdi")
public Product getProduct(){...}

@XmlElement(name="Instance", namespace = "http://www.mypage.com/schemas/ib")
public Instance getInstance(){...} 
```

此外，产品 POJO 看起来像这样：

```
@XmlRootElement(name="Product", namespace = "http://www.mypage.com/schemas/pdi")
public class Product 
```

和属性

```
@XmlElement(name="pdi:number", namespace = "http://www.mypage.com/schemas/pdi")
public int getNumber(){...} 
```

由于某种原因，我无法获得产品编号。我不断收到请求错误。我是否正确处理了命名空间，或者我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T18:04:31.207

对于这个用例，我建议利用包级别`@XmlSchema`注释来指定命名空间限定。

**包信息 (forum14651918/package-info.java)**

```
@XmlSchema(
    namespace="http://www.mypage.com/schemas/envelope", 
    elementFormDefault=XmlNsForm.QUALIFIED,
    xmlns={
            @XmlNs(namespaceURI = "http://www.mypage.com/schemas/envelope", prefix = ""),
            @XmlNs(namespaceURI = "http://www.mypage.com/schemas/ib", prefix = "ib"),
            @XmlNs(namespaceURI = "http://www.mypage.com/schemas/pdi", prefix = "pdi")
    }
)
@XmlAccessorType(XmlAccessType.FIELD)
package forum14651918;

import javax.xml.bind.annotation.*; 
```

**信封 (forum14651918/Envelope.java)**

由于我们在注解上指定了一个`namespace`和，所有与该类对应的元素都将自动使用命名空间进行限定。`elementFormDefault``@XmlSchema``Envelope``http://www.mypage.com/schemas/envelope`

```
package forum14651918;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="Envelope")
public class Envelope {

    @XmlElement(name="Product")
    private Product product;

    @XmlElement(name="Instance")
    private Instance instance;

} 
```

**产品 (forum14651918/Product.java)**

您可以`Product`使用`@XmlType`注解覆盖类的命名空间。

```
package forum14651918;

import javax.xml.bind.annotation.*;

@XmlType(namespace="http://www.mypage.com/schemas/pdi")
public class Product {

    private int number;

} 
```

**实例（forum14651918/Instance.java）**

您可以`Instance`使用`@XmlType`注解覆盖类的命名空间。

```
package forum14651918;

import javax.xml.bind.annotation.XmlType;

@XmlType(namespace="http://www.mypage.com/schemas/ib")
public class Instance {

    private String serial;

} 
```

**演示 (forum14651918/Demo.java)**

下面是一些您可以运行以证明一切正常的代码。

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Envelope.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14651918/input.xml");
        Envelope envelope = (Envelope) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(envelope, System.out);
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)
*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)
*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:41:46.650

尝试替换`name="pdi:number", namespace = "http://www.mypage.com/schemas/pdi"`为`name="number", namespace = "http://www.mypage.com/schemas/pdi"`. 不需要前缀。

更多的是看 XML 似乎两者的命名空间`Product`和`Instance`是`http://www.mypage.com/schemas/envelope`.

你不应该需要`@XmlRootElement`注释`Product`类。它不是根元素，并且已在`getProduct()`.

应该可以的完整配置是：

```
@XmlRootElement(name ="Envelope", namespace = "http://www.mypage.com/schemas/envelope")
public class Envelope {

   @XmlElement(name="Product", namespace = "http://www.mypage.com/schemas/envelope")
   public Product getProduct(){...}

   @XmlElement(name="Instance", namespace = "http://www.mypage.com/schemas/envelope")
   public Instance getInstance(){...}

}
public class Product {

    @XmlElement(name="number", namespace = "http://www.mypage.com/schemas/pdi")
    public int getNumber(){...}
}

public class Instance {

    @XmlElement(name="serial", namespace = "http://www.mypage.com/schemas/ib")
    public String getSerial(){...}
} 
```

# java - Bash 脚本子进程锁定 Java 应用程序/控制台

> ID：14651920
> 
> 赞同：1
> 
> 时间：2013-02-01T17:37:12.850
> 
> 标签：java, bash

我有以下简单的脚本（test.sh）：

```
 #!/bin/bash
    tail -f /var/log/dmesg > /tmp/output.log &
    echo "THE END"
    exit 0 
```

从 java 程序（远程在 ssh 下）调用此 test.sh 脚本后，java 控制台（eclipse）保持锁定状态。然后，1）如果我手动终止服务器中的“tail -f /var/log/dmesg > /tmp/output.log”进程，控制台将解锁并且我在控制台中收到“THE END”消息。2) 如果我从脚本中删除“tail -f /var/log/dmesg > /tmp/output.log”并运行 java 应用程序，则不会发生锁定，我会在控制台中收到“THE END”消息。

有没有人通过test.sh在bg中运行tail -f，并继续java应用流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:21:45.923

在通过 Java 运行 Unix 系统命令时，Java 方面也可能存在一些缺陷。例如，如果没有在 Java 线程中读取基于 Unix 操作系统的标准 I/O 流（stdout、stderr、stdin），则 Unix 系统调用可能会意外阻塞甚至死锁（有关此主题的更多详细信息，请参阅[Java exec - 使用 Java ProcessBuilder 和 Process (part 3) (2012) 执行系统进程](http://alvinalexander.com/java/java-exec-processbuilder-process-3)。

尝试以下基于`ThreadedStreamHandler.java`,的 Java 示例代码`SystemCommandExecutor.java`并`ProcessBuilderExample.java`运行`commands.add("ssh localhost /tmp/test.sh");`（它适用于我使用最新的 Eclipse Java EE IDE for Web Developers - Mac OS X 版本）：

```
# References: 
#
# - "Java exec - execute system processes with Java ProcessBuilder and Process (part 3)" (2012), 
# http://alvinalexander.com/java/java-exec-processbuilder-process-3
# 
# - "Running system commands in Java applications" (2012), 
# http://alvinalexander.com/java/edu/pj/pj010016
# 
# - "When Runtime.exec() won't: Navigate yourself around pitfalls related to the Runtime.exec() method" (2000),
# http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html

mkdir -vp /tmp/com/devdaily/system
cd /tmp/com/devdaily/system
curl -LO http://alvinalexander.com/java/edu/java-exec/ProcessBuilderExample.java
curl -LO http://alvinalexander.com/java/edu/java-exec/SystemCommandExecutor.java
curl -LO http://alvinalexander.com/java/edu/java-exec/ThreadedStreamHandler.java
cd ../../..

# create commands.add("ssh localhost /tmp/test.sh");
printf '%s\n' 'H' ',s|ls -l.*tmp|ssh localhost /tmp/test.sh|' 'wq' |
    ed -s com/devdaily/system/ProcessBuilderExample.java

echo '
#!/bin/bash
tail -f /private/var/log/system.log > /tmp/output.log &
echo "THE END"
exit 0
' > /tmp/test.sh

chmod +x /tmp/test.sh

javac com/devdaily/system/ProcessBuilderExample.java
java com/devdaily/system/ProcessBuilderExample

java -version
# java version "1.6.0_31"
# Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-10M3646)
# Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode)

# Eclipse Java EE IDE for Web Developers (Mac OS X version).
# Version: Juno Service Release 2
# Build id: 20130225-0426
#
# use the following menu sequences:
# Window --> Show View --> Console
# Run --> External Tools --> External Tools Configuration... --> Program (double-click) --> New_configuration
# Location: /usr/bin/java
# Working Directory: /tmp
# Arguments: com/devdaily/system/ProcessBuilderExample 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:29:23.713

看看 htis[文章](http://kylecartmell.com/?p=9)，它描述了使用进程时的主要错误。您需要做的是添加一个 Steam Gobbler - 输入流的消费者，以便外部程序在写入输出时不会因为缓冲区已满而卡住。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:49:50.247

尝试使用 nohup：

```
nohup tail -f /var/log/dmesg > /tmp/output.log & 
```

SSH 有时会在退出之前等待所有进程关闭 tty。`nohup`将 stdin`/dev/null`和 stdout/stderr 设置为一个文件，因此 SSH 可以立即退出（刷新任何可能阻止“THE END”显示的缓冲区）。

# android - Eclipse 的 Android 旧界面

> ID：14651921
> 
> 赞同：0
> 
> 时间：2013-02-01T17:37:13.730
> 
> 标签：android, eclipse

两个月前，我设置了 Eclipse Indigo 来构建 android 应用程序。然后我的电脑出现了一些问题，所以我卸载了它。

我再次下载了 Eclipse Indigo 并尝试设置 Eclipse，但界面发生了变化。还有一些额外的文件夹和选项。我按照[newboston](https://www.youtube.com/watch?v=sPFUTJgvVpQ)教程进行安装。

所以，我的问题是如何回到教程中的旧界面？我不喜欢新的。这是它在新界面中的外观。我还附上了一个具有旧界面的视频。

![在此处输入图像描述](../Images/910fb9563e448c0aa5ac744f0881aa02.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:33:34.953

我认为这不是 Eclipse 的问题。这与[Android 开发工具](http://developer.android.com/tools/sdk/eclipse-adt.html)(ADT) 有关，它是 Eclipse 的一个插件。

如果您真的想回到以前版本的 ADT，请查看此[答案](https://stackoverflow.com/questions/4710107/where-can-i-find-older-versions-of-eclipse-adt/4710123#4710123)以获取旧版本的 ADT。

# android - 如何使用 Python 获取在 Android 的 EditText 中键入的文本？

> ID：14651925
> 
> 赞同：0
> 
> 时间：2013-02-01T17:37:30.540
> 
> 标签：android, python, xml, android-edittext

我使用下面的 xml 来设计我的 android 应用程序的布局。我使用 EditText 字段从用户那里获取输入。

```
<EditText android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/editText1"
    android:tag="Tag Me"
    android:inputType="text">
            <requestFocus></requestFocus>
</EditText> 
```

如何获取输入的文本`EditText`并使用 Python 打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:23:23.750

你不能使用 Python，Android 编程是用 Java 完成的。`EditText`您可以从以下（在 Java 中）获取文本：

```
EditText et = (EditText)findViewById( R.id.editText1 );
String s = et.getText().toString(); 
```

如果您要询问如何将该文本发送到使用 Python 的网络服务器，那就有点复杂了。

# r - 在任何向量项上排除名称匹配的行

> ID：14651926
> 
> 赞同：2
> 
> 时间：2013-02-01T17:37:31.357
> 
> 标签：r

我有关于医院的数据，即患者详细信息、位置。现在我必须从表中排除`State`存储在 Vector 中的医院（可能会因情况而异），并将剩余的医院存储在另一张表上。我怎样才能在 R 中实现这一点。因为我是新的 bin，如果有任何功能可以完成这项任务，请建议我。

```
>test <- read.csv("outcome-of-care-measures.csv", colClasses = "character")
>test[, 11] <- as.numeric(outcome[, 11])
>test2 <- table(outcome$State)
>exc_state <- names(test2[test2 < 20]) 
```

现在从表中删除所有状态名称存储在 exc_State 上的行并存储在另一个名为 table2 的表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:49:46.730

不清楚你想要什么（没有可重复的例子）

```
 dat <- as.data.frame(test2)              ## convert to a data.frame
   test1 <- dat[dat$test2 %in% exc_state,]  ## get all row matching exc_state 
```

# javascript - JavaScript 对象存在，但无法访问

> ID：14651933
> 
> 赞同：-1
> 
> 时间：2013-02-01T17:38:08.590
> 
> 标签：javascript

我很想知道一些网站是如何工作的。在它的 JS 代码中，有一个在网页脚本中多次使用的“Commander”对象：

```
parent.Commander.SetTime();
parent.Commander.GetData();
etc... 
```

他们工作，我知道因为 SetTime() 已经为我在网站中查看的页面设置了时间，其他方法也在做他们的工作。
但是当我尝试访问 Commander 对象时我不能。（当我尝试在调试控制台中访问它时，parent.Commander 返回“未定义”）
另外，我找不到“Commander”的定义位置。
网页如下所示：
有一个框架集，其中一个框架的名称是“指挥官”。

```
...
<FRAME noResize src="/_Templates/Commander.htm" name=Commander scrolling=no>
... 
```

“Commander.htm”加载“Commander.js”。

```
...
<SCRIPT language=javascript src="/_Scripts/Commander.js"></SCRIPT>
... 
```

“Commander.js”由函数定义组成

```
function SetTime(){
...
}
... 
```

但是指挥官对象没有在任何地方定义。我期待这样的事情：

```
function Commander()
{
SetTime()
...
} 
```

或者

```
Commander = new Object();
Commander.SetTime=function(); 
```

所以我想知道如何访问指挥官的方法。（如果我的问题不清楚，请让我解释更多。谢谢）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:41:14.227

`parent.Commander`指的是框架的内容窗口，所以`parent.Commander.SetTime()`基本上是指框架`SetTime()`内定义的全局函数`Commander`。

# c# - AJAX 选项卡式面板在运行网站时不可见

> ID：14651934
> 
> 赞同：0
> 
> 时间：2013-02-01T17:38:14.010
> 
> 标签：c#, asp.net, ajax

我一直在尝试一整天，但是当我按 F5 时，ajax 选项卡式面板不会显示。无论。（注意我已经从互联网复制并粘贴了选项卡式面板的源代码。）页面顶部有：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

选项卡式面板等显示如下：

它没有用，所以我将其更改为：

```
<asp:TabPanel ID="tbpnluser" runat="server" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:04:38.590

来，试试这个。。

[Ajax 选项卡](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx)

```
<ajaxToolkit:TabContainer Id="Tabs" runat="server" 
        Height="150px"
        Width="400px"
        ActiveTabIndex="1"
        >
    <ajaxToolkit:TabPanel runat="server" Id="tbpnluser"
         HeaderText="Sample"
        Enabled="true"
        <ContentTemplate>
            You will place here what you want to display.
        </ContentTemplate>
    />
</ajaxToolkit:TabContainer> 
```

# youtube-api - youtube 上传小部件类别和标签

> ID：14651937
> 
> 赞同：0
> 
> 时间：2013-02-01T17:38:23.167
> 
> 标签：youtube-api

除了：

```
widget.setVideoTitle(title);
widget.setVideoDescription(description); 
widget.setVideoKeywords(keyword1, keyword2, ..., keywordn);
widget.setVideoPrivacy(privacy); 
```

是否也可以在视频上传时设置类别和标签？？？

加油！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:49:08.507

我认为不是小部件，只有您提到的属性和 onApiReady 中的属性：

[https://developers.google.com/youtube/youtube_upload_widget#onApiReady](https://developers.google.com/youtube/youtube_upload_widget#onApiReady)

当允许您为新上传的视频设置元数据的内部命令 API 准备就绪时，将触发此事件。此事件的事件处理程序可以调用以下函数来设置上传视频的元数据：

widget.setVideoTitle(title) – title 参数是一个指定视频标题的字符串。

小部件.setVideoDescription（描述）；– description 参数是一个指定视频描述的字符串。

widget.setVideoKeywords(keyword1, keyword2, ..., keywordn); – 该函数采用字符串参数列表，每个参数指定视频的关键字。

widget.setVideoPrivacy(privacy) – 隐私参数是一个字符串，用于指定新上传视频的初始隐私设置。有效值为公共、未列出和私有。默认设置为公开。

# asp.net-mvc-4 - 在 ASP.NET MVC 4 中预选值

> ID：14651938
> 
> 赞同：0
> 
> 时间：2013-02-01T17:38:23.783
> 
> 标签：asp.net-mvc-4

我有一个正在开发的应用程序。这个应用程序使用 ASP.NET MVC 4。我的一个屏幕有一个下拉列表和一个复选框。此屏幕是一个基本的注册表单。表单的模型当前如下所示：

```
public class SignUpModel
{
  public int SelectedBirthMonth { get; set; }
  public bool Agree { get; set; }
  public string Username { get; set; }
} 
```

相关视图代码如下所示：

```
@model MyApp.Models.SignUpModel
...
<input id="Username" name="Username" value="@Model.Username"  />
<select id="SelectedBirthMonth" name="SelectedBirthMonth">
  <option value="1">January</option>
  <option value="2">February</option>
  <option value="3">March</option>
  ...
  <option value="12">December</option>
</select>
<input id="Agree" name="Agree" type="checkbox" /> 
```

在大多数情况下，这是可行的。除了，当用户发布表单时，我会进行一些验证。如果验证失败，我会再次向用户显示视图。我的意图是让他们以前输入的值输入。我目前的方法是使用用户名文本框。但是，我不知道如何处理下拉列表，以便它们以前选择的值被选中，以及如果他们以前检查过它，如何检查复选框。

如何在 ASP.NET MVC 4 中解决这些类型的场景？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:53:23.060

您可以尝试通过 ajax 发布表单并将布尔值返回给回调，如果为 true，则重定向到下一页，如果为 false，您只需留在原处。

# jquery - jquery 事件未在 ajax 调用时触发

> ID：14651942
> 
> 赞同：0
> 
> 时间：2013-02-01T17:38:38.033
> 
> 标签：jquery, ajax

我正在使用 Jquery 1.7.2

在初始页面加载时，我在页面末尾加载并包装在 $(document).ready(function(){ 中的外部 JS 中执行以下脚本

```
 $('.accordionContent,.accordionContent-settings').hide();
$('.accordion-comments').click(function(){
            var target=$(this).attr('href');
            if($(target).css('display')=='none')
            {
                $(target).show();
                $(this).text('Hide Comments');
            }
            else
            {
                $(target).hide();
                $(this).text('Comments');
            }
            return false;
            }); 
```

该代码实质上隐藏了包含在此无序列表中的表单，并在单击“评论”链接时显示该表单。然后将措辞更改为隐藏评论，再次单击时，表单再次隐藏。

```
<ul class="sportswire-posts quarterfont">
                        <li>                            
                            <p><a href="/modals.cfm?action=profile_glimpse&script=%2Findex%2Ecfm%2Fgroup%2F3450%2Faction%2Fdashboard&member_id=5" rel="facebox" class="capitalize">Todd John</a> joined the team &quot;<a href="http://shootingattackclinic.playerspace.com/local_sports_teams.cfm?group=628">Mercury</a>&quot;.</p>
                            <p class="comments-date">11:38 AM EST on January 31, 2013</p>
                        </li>                       

                            <li class="comments-link">
                                <a href="#comments35800" class="accordion-comments">Comments</a> 
                            </li>                       

                        <li class="accordionContent posts-comments" id="comments35800">

                                <form method="post" action="/index.cfm/group/3450/action/dashboard/m0dal_update/leave_feedback/member_id/68/comment_type/17/id/35800">
                                    <ul>
                                        <li>
                                            <div class="expandingArea">
                                                <pre><span></span><br /></pre>
                                                <textarea name="str_comment" message="Enter a comment." rows="4" cols="10" required="Yes" html="No" id="str_comment24234"></textarea>                                           
                                            </div>                                      
                                            <div class="pixelspacer10"></div>
                                        </li>
                                        <li>
                                            <input name="Post Comment" type="submit" value="Post Comment" />
                                        </li>                               
                                    </ul>
                                </form>

                        </li>                                                                               
                    </ul> 
```

问题是当我进行 ajax 调用以获取像上面那样的额外 ULS（当然具有不同的 id）时。

```
$(document).on("click",'.siteusemore',function()
        {
        var ID = $(this).attr("id");
        var myscript = window.siteusemore_script || null;       
        if(ID)
            {
                $("#siteusemore"+ID).html('<img src="/images/processing.gif" />');                  
                $.ajax({type: "POST",url: myscript,data: "lastmsg="+ ID, cache: false,
                    success: function(html){                                    
                        $("ol#siteuseupdates").append(html);                
                        $('.accordionContent').hide();                      
                        $('.accordion-comments').on("click",function(){
                        var target=$(this).attr('href');
                        if($(target).css('display')=='none')
                        {
                            $(target).show();
                            $(this).text('Hide Comments');
                        }
                        else
                        {
                            $(target).hide();
                            $(this).text('Comments');
                        }
                        });                                                                                     
                        $("#siteusemore"+ID).remove();                      
                    }
                });             
            }
        else
        {
            $(".siteusemorebox").html('The End');                       
        }               
        return false;
    }); 
```

上述方法工作不一致。隐藏/显示事件会针对某些项目触发，但不是全部。我似乎无法弄清楚为什么我无法让它适用于通过 ajx 加载的每个评论/表单组合。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:10:52.377

我正在使用 click() 函数分配事件处理程序。这只会将事件绑定到页面首次加载时存在的元素。您需要将其更改为使用 on() ：

```
$("body").on("click", ".accordion-comments", function(){
     //put he click code in here
}); 
```

我绑定了两次点击事件——一次是在页面第一次加载时，一次是在你的 ajax 调用之后。使用 on() 函数意味着您只需要在页面首次加载时绑定它，因此将其从 ajax 调用的成功函数中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:21:56.397

杰弗里，

我看到的第一个问题在这里：

```
var target=$(this).attr('href');
if($(target).css('display')=='none')
{..} 
```

您的问题如下：

```
var target=$(this).attr('href'); 
```

变量“target”将保存一个字符串。在下一行：

```
if($(target).css('display')=='none') 
```

您试图将字符串用作 jQuery 对象，这将导致错误。

我没有尝试过，但我建议：

```
$('.accordion-comments').on("click",function(){
    if($(this).find("a").is(":visible"))
    {
        $(this).find("a").show();
        $(this).text('Hide Comments');
    }
    else
    {
        $(this).find("a").hide();
        $(this).text('Comments');
    }
}); 
```

主要变化是您正确地引用了对象，并且使用了“is”（jquery 实用程序）。

我希望这有帮助，

-里卡多

# alloy - 关系连接中合金谓词的含义

> ID：14651944
> 
> 赞同：1
> 
> 时间：2013-02-01T17:38:49.153
> 
> 标签：alloy

考虑以下地址簿示例的简单变体

```
sig Name, Addr {}
sig Book { addr : Name -> Addr } // no lone on Addr
pred show(b:Book) { some n : Name | #addr[b,n] > 1 }
run show for exactly 2 Book, exactly 2 Addr, exactly 2 Name 
```

在某些模型实例中，我可以在评估器中得到以下结果

```
all b:Book | show[b]
--> yields false
some b:Book | show[b]
--> yields true
show[Book]
--> yields true 
```

如果 show 是一个关系，那么人们可能会期望得到如下答案：{ true, false }。假设它是一个谓词，则返回一个布尔值。我本来希望 show[Book] 是上面普遍量化的表达式的简写。相反，它似乎是在使用存在量化来折叠结果。任何人都知道这可能是什么原因，或者对 show[Book] 的含义有另一种解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:23:31.807

（我不确定我的用词是否正确，如果这看起来很模糊，请耐心等待。）

请记住，Alloy 中所有表示个体的表达式都表示个体的集合，并且在语言中“个体 X”和“成员是个体 X 的单例集合”之间没有区别。（[后来的附录：]在更常用的术语中：Alloy 逻辑中的一般规则是所有值都是关系。二元关系是成对的集合，n 元关系的 n 元组集合，集合是一元关系和标量是单例集。参见*软件抽象第 3.2.2 节中的讨论，或*[Greg Dennis 和 Rob Seater 的合金分析器 4 教程](http://alloy.mit.edu/alloy/tutorials/day-course/s1_logic.pdf)中的幻灯片“一切都是关系” 。）

鉴于您对 'show' 谓词的声明，很容易预期 'show' 的参数应该是一本书——或者更准确地说，是一组书的单例——然后进一步期待，如果参数实际上不是一个单例集（如`show[Book]`这里的表达式），那么系统将强制它成为一个单例集，或者用某种隐含的存在或全称量化来解释它。但是在声明`pred show(b:Book) ...`中，表达式`b:Book`只是命名了一个对象 b，它将是签名 Book 中的一组对象。（要要求 b 是一个单例集，写成。）对于 b = Book 和 b = Book$0 一样，对`pred show(one b: Book) ...`构成 of 主体的表达式求值。`show`

存在量化的出现是表达式核心的点运算符`addr[b,n]`（或等效地`n.(b.addr)`定义）方式的结果。实际上，如果您进行实验，您会发现只要有任何名称为所有书籍的集合都包含到两个不同地址的映射，即使在存在解释会失败的情况下。尝试将其添加到您的模型中，例如：

```
pred hmmmm { show[Book] and no b: Book | show[b] }
run hmmmm for exactly 2 Book, exactly 2 Addr, exactly 2 Name 
```

# opengl - 如何使用 OpenGL 制作可拖动的对象？

> ID：14651945
> 
> 赞同：0
> 
> 时间：2013-02-01T17:38:53.760
> 
> 标签：opengl, graphics, glfw

我有一个代码，我用它在 OpenGL 中生成一个棋子。但是，我想让它的部分可拖动。我的问题更笼统，但这是我的典当的代码，以便您了解我在做什么：

```
int main()
{
    /* open gl initialization */

    while(running())
    {
        glClear(GL_COLOR_BUFFER_BIT + GL_DEPTH_BUFFER_BIT);
        glLoadIdentity();

        glColor3ub(0, 0, 0);

        /* the basis of the pawn */
        glPushMatrix();
        glScalef(1.6, 1.6, 0.8);
        glTranslatef(0.0, 0.0, -2.7 - offset);
        drawSmoothUnityEllipsoidPatch(0, 2*M_PI, 0, M_PI /2 );
        glPopMatrix();

        /* upped ellipsoid */
        glPushMatrix();
        glScalef(0.8, 0.8, 0.15);
        glTranslatef(0.0 - offset, 0.0, 6.0);
        drawSmoothUnitySphere();
        glPopMatrix();

        /* lower ellipsoid */
        glPushMatrix();
        glScalef(1.2, 1.2, 0.15);
        glTranslatef(0.0 - offset, 0.0, -10.0);
        drawSmoothUnitySphere();
        glPopMatrix();

        /* the cone */
        glPushMatrix();
        glScalef(1.0, 1.0, 3.5);
        glTranslatef(0.0 + offset, 0.0, -0.5);
        drawSmoothUnityCone();
        glPopMatrix();

        /* the sphere on top of the pawn */
        glPushMatrix();
        glScalef(0.7, 0.7, 0.7);
        glTranslatef(0.0, 0.0, 2.3 + offset);
        drawSmoothUnitySphere();
        glPopMatrix();

    glfwTerminate();
    return 0;
} 
```

其中偏移量无关紧要。函数 drawSmoothUnity(shape) 只是在坐标系的中心绘制一个统一的形状。我希望能够在可见区域（800x600，我的窗口大小）中拖放任何这些形状。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:46:46.777

您可以使用[gluUnproject](http://www.opengl.org/sdk/docs/man2/xhtml/gluUnProject.xml)将光标位置从屏幕空间映射到世界空间。通过在鼠标按钮第一次单击到当前位置（拖动后）时跟踪 3D 世界坐标的增量，这将为您提供用于平移对象的 x、y 和 z 值。

此外，它应该是 'glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);'

这有点出乎我的意料，而且是假的。这没有考虑任何选择或其中的任何一个。因此，即使单击时对象不在鼠标光标下，单击并移动鼠标也会移动对象。您显然需要添加鼠标处理程序。

```
glm::dvec3 original_position;//position of object when we start moving
glm::dvec3 world_anchor;//world space coordinates of where we left clicked
glm::ivec2 screen_anchor;//screen space coordinates of where we left clicked
Object object;
OnLButtonDown(int x, int y)//x,y = where we clicked
{
   original_position = object.GetPosition();
   screen_anchor = ivec2(x,y);//screen coords where we clicked
   gluUnproject(x,y,0,modelview_matrix,projection_matrix,viewport,&world_anchor.x,
   &world_anchor.y,&world_anchor.z);
}
OnMouseMove(int x, int y) //x,y = current mouse cursor position
{
   if(left_button_down)
      MoveObject(screen_anchor.x-x,screen_anchor.y-y);
}

}
MoveObject(int dx, int dy)//dx,dy = distance from current mouse position to screen_anchor
{
    glm::dvec3 world_position;//current mouse position in world coordinates
    gluUnProject(dx,dy,0,modelview_matrix,projection_matrix,viewport,&world_position.x,
    &world_position.y,&world_position.z);

    glm::dev3 world_delta = world_anchor-world_position;
    object.SetPosition(original_position+world_delta);

} 
```

# c++ - 浮点数到整数与双精度数到整数的精度，出乎意料的结果

> ID：14651948
> 
> 赞同：4
> 
> 时间：2013-02-01T17:39:24.140
> 
> 标签：c++, casting

我是计算机工程专业的学生，​​为 BYU-Idaho 的 C++ 入门课程做辅导，一名学生成功地难倒了我。

如果为此编写代码：

```
#include <iostream>
using namespace std;
int main()
{
   float y = .59;
   int x = (int)(y * 100.0);
   cout << x << endl;
   return 0;
} 
```

结果 = 58

```
#include <iostream>
using namespace std;
int main()
{
   double y = .59;
   int x = (int)(y * 100.0);
   cout << x << endl;
   return 0;
} 
```

结果 = 59

我告诉他这是一个精度问题，因为 int 比 float 更精确，它会丢失信息。double 比 float 更精确，因此可以工作。

但是我不确定我说的是否正确。我认为这与 int 用零填充有关，因此它在被强制转换时被“截断”，但我不确定。

如果你们中的任何一个人想解释这一切“下面”发生的事情，我会觉得这很有趣！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T17:44:06.493

问题是它`float`不够准确，无法保持*精确*值 0.59。如果您存储这样的值，它将以二进制表示形式（已经在编译期间）四舍五入到不同的值，在您的情况下，这是一个略小于 0.59 的值（它也可能略大于您想要的值）。将其与 100 相乘时，您会得到一个略小于 59 的值。将这样的值转换为整数会将其舍入*为 0*，因此得到 58。

0.59 作为浮点数将存储为（现在表示为人类可读的十进制数）：

```
0.589999973773956298828125 
```

现在到`double`类型。虽然这种类型具有基本相同的问题，但您获得预期结果的原因可能有两个：要么`double`可以保持您想要的*确切*值（0.59 不是这种情况，但对于其他值可能是这种情况），或者编译器决定对其进行*四舍五入*。因此，将其乘以 100 会得到一个*不*小于 59 的值，并将按预期向 0 舍入到 59。

现在请注意，`double`编译器可能仍将 0.59 作为 a 进行四舍五入。确实，我刚刚检查过，确实如此。0.59 作为 a`double`将存储为：

```
0.58999999999999996891375531049561686813831329345703 
```

但是，在将其转换为整数*之前*，您将此值乘以 100 。现在出现了一个有趣的点：当乘以 100 时，`y`编译器放置的 0.59 的差异被*消除了*，因为 0.59 * 100 又不能准确存储。事实上，处理器会计算`0.58999999999999996891375531049561686813831329345703 * 100.0`，将四舍五入*为*59，这个数字*可以*用`double`!

有关详细信息，请参阅此代码：http: [//ideone.com/V0essb](http://ideone.com/V0essb)

现在您可能想知道为什么相同的不计算在内`float`，它的行为应该完全相同但具有不同的准确性。问题是`0.589999973773956298828125 * 100.0`没有*四舍五入*（`59`也可以用 a 表示`float`）。计算后的舍入行为并未真正定义。

事实上，对浮点数的操作并没有完全指定，这意味着您可以在不同的机器上遇到不同的结果。这使得实现性能调整成为可能，*即使不涉及舍入*，也会导致稍微不正确的结果！可能是这样的情况，在另一台机器上你最终得到了预期的结果，而在其他机器上你却没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:42:26.990

0.59 不能完全用二进制浮点表示。所以`x`实际上是一个略高于或低于 0.59 的值。它可能会受到您是否使用`float`或的影响`double`。这反过来将确定您的程序的结果是 58 还是 59。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T17:44:50.983

这是一个精度问题，并且与在 a或 a`.59` 中都不能完全表示的事实有关。所以不是；*_* 它非常接近 （略多或略少）。乘以 是精确的，但由于原始值不是，所以你得到的东西比 略多或略少。转换为 截断为零，因此您得到或。`double``float``y` *`.59``.59``100``59``int``59``58`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T17:56:39.213

这与您使用旧计算器执行时的问题相同`1 / 3 * 3`，并且它会出现`2.9999999`或类似的东西。结合这个事实，`(int)(float_value)`将简单地去掉小数，所以如果`floatvalue`像`58.999996185`我的机器得到的那样，那么`58`结果就是，因为虽然`58.999996185`接近 59，但如果你只去掉前两位，它确实是 58。

浮点数非常适合计算很多东西，但是当涉及到“结果是什么”时，你必须非常小心。它是一个近似值，精度不是无限的，中间结果会四舍五入。

使用double时，位数更多，很可能当计算0.58999999999999乘以100时，最后一位是1而不是0，所以结果是59.00000000001或类似的东西，然后变成59作为整数。*

# yaml - Jekyll 帖子未找到

> ID：14651949
> 
> 赞同：0
> 
> 时间：2013-02-01T17:39:25.680
> 
> 标签：yaml, config, jekyll, permalinks

所以我设置了一个 Jekyll 页面，我创建了一些演示帖子，在它们之间进行导航并根据我的喜好对其进行样式设置，然后在根目录中使用“jekyll”。

这在我的根目录中生成了一个 _site 文件夹。惊人的。

但是当我在浏览器中打开此文件夹并尝试在帖子之间导航时，它会尝试转到 file:///2013/02/01/post-title.html 而不是实际位置，即 file:// /blablabla/_site/2013/02/01/post-title.html

我一直在查看 yml 文件中的永久链接选项，但我还没有找到可行的解决方案。

我用：

```
<a href="{{page.previous.url}}" title="Previous Post: {{page.previous.title}}">
{{page.previous.title}}</a> 
```

在帖子之间导航，并且：

```
{% for post in site.posts limit: 5 %}
    <a href="{{ post.url }}">{{ post.title }}</a>
{% endfor %} 
```

从主页链接帖子。

从我的 config.yml：

```
baseurl:     /
url:         http://localhost:5000
source:      .
destination: ./_site
permalink:   /writing/ 
```

在这里采取任何提示！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:57:06.053

所以我所做的是：

在我的 _config.yml 中，我添加了这个：

```
baseurl:     /
url:         http://some.link.he.re/~nameofdir/big_blog 
```

对于 CSS/JS 之类的资产，我只是使用 {{ site.url }} 来预先修复我所有的实际资产。：

```
<link href="{{ site.url }}/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" /> 
```

对于导航，我做了：

```
<a href="**{{site.url}}**{{page.previous.url}}" title="Previous Post: 
{{page.previous.title}}"> {{page.previous.title}}</a> 
```

在我的 post.html 布局中，我添加了： 在 中，我不确定这是否有必要，但现在它会持续存在。

对于我添加的所有静态页面：

```
<li><a href="**{{site.url}}**/journal.html">Journal</a></li> 
```

最后，即使一切都是一样的，对于链接帖子：

```
<a href="{{site.url}}{{post.url}}">{{ post.title }}</a> 
```

所以 {{ site.url }} 与您在 _config.yml 中在 url: xxxx 中编写的内容相同，如果您将页面托管在具有奇怪目录结构的服务器上（例如我的大学），您需要给 url：实际根目录的值，这意味着包含 blog-folder-name 作为 url 中的最后一个文件夹。然后只需为所有链接添加前缀，无论是静态链接还是由 {{ site.url }} 生成的 jekyll 链接，您都应该很酷！

# install4j - 使用库的子集使用 install4j 自动更新

> ID：14651950
> 
> 赞同：1
> 
> 时间：2013-02-01T17:39:32.633
> 
> 标签：install4j

是否可以提供仅包含更新的库而不包含整个数据包的更新。在我们的应用程序中，只有少数文件会定期更新。其他的从来没有。通过网络自动更新，这将导致更小的包......

这样的设置是否可行？如何设置？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:52:28.967

您可以通过将项目保存到不同的文件（保留应用程序 ID）并从分发树中删除不必要的文件来做到这一点。当您编译该项目时，会像往常一样创建一个 updates.xml 文件。使用该 updates.xml 文件进行自动更新，而不是独立安装程序项目中的 updates.xml 文件。

# django - 在 apache2+mod_wsgi 上部署 Django 应用程序时出现异常错误

> ID：14651951
> 
> 赞同：0
> 
> 时间：2013-02-01T17:39:34.863
> 
> 标签：django, django-models

我在`AttributeError`我目前正在开发的应用程序上感到很奇怪。我正在使用开发 Web 服务器进行开发，即 django 工具集的“runserver”命令。然后我决定在**apache+mod-wsgi**上测试应用程序，尽管有时它工作正常，但我一直收到这个错误。所以我认为那段代码一定有问题，

* * *

*所以我决定把**它注释掉**，看看会发生什么。**是**的，它仍然给我同样的错误（见第二张图片）。*<-- 现在不相关。**我在自定义用户模型上得到的 AttributeError ，即使它实际上包含`classmethod get_by_type_and_id()`我感兴趣的内容。**

* * *

你以前见过这样的吗？您认为这是什么原因造成的？我已按照[此处](http://www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/)的教程进行部署。请注意，虽然这`User` 不是内置的 django`User`模型。`Auth`我认为这是基于 django模块的“定制的、精简的”实现。

**请注意，我在使用 django 自己的开发服务器进行开发时没有收到此错误。这只发生在我在 Apache+mod_wsgi 上部署应用程序时。**

**更多信息：**

Django 版本 == 1.2.5

谢谢！我真的很感激任何帮助。

第一张图片： ![属性错误](../Images/ef28bc0cbb5e6b113438534187d2bcae.png)

第二张图片： ![即使注释掉的代码仍然会产生错误](../Images/d8e77cb5d8e6a8f27d1654c9070303c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:57:50.877

在潜入代码数小时后，我有一个灵光乍现的时刻。所以我想，也许在某些时候`django.contrib.auth.models.User`模型正在被应用程序中使用的一些 django 模块付诸实施。因为就像我提到的，这个应用程序的用户模型是定制的，应用程序`django.contrib.auth.*`至少没有直接使用。这是我的怀疑，因为这种错误并非特定于该特定属性。有时它会通过那个点，但随后另一个 AttributeError 会发生在其他一些引用其他 User 模型属性的视图上。然后在某一时刻，我注意到错误消息中的 User 属性是 django.contrib.auth.models.User 的属性。

所以我决定在我的 python 路径上“删除”django.contrib.auth.models，它显示，我正在使用的一个模块中发生了错误`django.contrib.messages`。我删除了它，我再也没有看到 AttributeError。原来django的`Message`model有一个foreign_key指向django.contrib.auth.models.User。

但是后来，我失去了 django 消息框架的灵活性，尤其是当我在视图中使用 HttpResponseRedirect 时，即无法将有用的消息放入模板的上下文中。或者也许有？:)

**更新2（现在很确定）：**

是的，我现在很确定这`django.contrib.messages`是导致错误的原因。我尝试在另一个使用自定义用户模型的应用程序上重现错误，即不是 django.contrib.auth.models.User。我启用了 django.contrib.messages 模块并产生了基本相同的错误。我想知道为什么在 Apache+mod_wsgi 上会发生这种情况，而不是在 django 自己的开发服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:11:09.163

有几点需要注意：

*   你确定你有`get_by_type_and_id`用户的方法吗？
*   你设置`pasword`而不是`password`（错字）
*   我认为您必须在第二个屏幕截图中缩进第 60 行

# javascript - 捕获事件列表我想知道当用户单击“选择”下拉列表时如何在下拉列表中捕获事件。例如，我想在列表的不同元素处于焦点时拦截事件。我试图将事件侦听器绑定到列表的选项元素，但它们没有捕获任何内容。在此处查看示例代码： <select><option onfocus="alert('Hi there');">Foo</option> <option>Bar</option></select> 当我运行您的代码时，输 出看起来像

> ID：14651955
> 
> 赞同：1
> 
> 时间：2013-02-01T17:39:53.087
> 
> 标签：javascript, events, dom-events, html-select

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:42:49.000

你不能，`<select>`是一个被替换的元素，它的子元素只作为它的数据而不是实际的子元素。

您能做的最好的事情就是将`onChange`事件应用于`<select>`自身，然后访问`this.options[this.selectedIndex]`做事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:19:13.487

您将捕获 onchange 事件，然后测试以查看值更改为，如下所示：

更新：注意我添加的 onfocus 事件。

有关更多想法，请查看此处：[HTML <select> 是否有 onSelect 事件或等效事件？](https://stackoverflow.com/questions/647282/is-there-an-onselect-event-or-equivalent-for-html-select)

```
<script type="text/javascript">

function myDDLOnChangeEvent()
{
    var selectedValue = document.getElementById('myDDL').value;
    if(selectedValue == 'Foo')
    {
        //alert('Hi there');
        //do stuff here - except for alerts
        //if you put an alert here, it will fire the onfocus event again..
        //  ..after you click 'ok' in the alert box
    }
}

</script>

<select id="myDDL" onchange="myDDLOnChangeEvent();" onfocus="this.selectedIndex = -1;">
    <option>Foo</option>
    <option>Bar</option>
</select> 
```

# php - 在字段集中添加验证消息而不是 js 弹出窗口

> ID：14651957
> 
> 赞同：0
> 
> 时间：2013-02-01T17:40:01.930
> 
> 标签：php, javascript, validation

我有一个 php 应用程序，它已经拼凑在一起，但我正在做一个疯狂的验证，我已经开始工作了。在验证结束时，以下函数运行并给我一个包含必填字段列表的弹出窗口。

```
function showReqFlds(emptyFlds) {
    for (var i = 0; i < emptyFlds.length; i++) {
    var holdErrMsgs = emptyFlds[i]+' is required.' + "\n";

    }
        alert(holdErrMsgs);
} 
```

效果很好，但现在我希望错误消息出现在表单顶部的字段集中，而不是 javascript 弹出框。

**步骤**：

用户打开表单，未显示错误字段集 用户单击提交按钮提交表单，但未填写几个必填字段 出现错误字段集，显示必填字段列表，未提交表单。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:20:47.053

好的，我认为您可以这样做（如果我理解您的问题）。

```
function showReqFlds(emptyFlds) {
    for (var i = 0; i < emptyFlds.length; i++) {
       var holdErrMsgs = emptyFlds[i]+' is required.' + "\n";
    }
    //This is where you change
    header("location:yourpageurl.php?errorMsg=".holdErrMsgs);
} 
```

然后，在 yourpageurl.php 中，在您想要消息的地方，您可以执行以下操作：

```
if(isset($_GET['errorMsg']))
   echo $_GET['errorMsg']; 
```

我希望它对你有帮助！

最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:29:19.753

想想这个：

```
function changeText(text)
{
elem = document.getElementById('error_message');
elem.innerHTML = text;
} 
```

你在你的html页面中有这个：

```
 <div id='error_message'>I'm a error message</div>      
 <button onclick="changeText('error1');">error1</button>
 <button onclick="changeText('error2');">error2</button> 
```

有了这样的东西，你应该做的伎俩。

萨卢多斯。

# javascript - ExtJS4 MVC是否支持在“store”的子文件夹下定义store

> ID：14651958
> 
> 赞同：2
> 
> 时间：2013-02-01T17:40:01.397
> 
> 标签：javascript, extjs4

在[http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-3](http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-3)上的“获取引用”下，sencha 给出了一个示例，通过自动生成的方式来引用 store 实例吸气剂：

```
stores: ['Stations']    
// creates getter named 'getStationsStore', returns the Stations store instance 
```

在此示例中，“Stations”直接放置在“store”文件夹下。

但就我而言，我想将商店类放在“商店”的子文件夹下，以使结构更清晰。一个商店的定义是“APPNAME.store.aspect1.MyStore”。我有三个问题：

1.  ExtJS4 MVC 允许这样的定义吗？
2.  如果允许，那么自动生成的 getter 是什么，或者我如何在控制器中引用它？
3.  我在哪里可以找到使用 ExtJS4 的优秀开源示例？（sencha提供的例子太简单了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:40:31.027

1.  是的。我一直用它把商店打包在一起。

2.  我没有方便的示例，但我认为应该是 get + PackageName + StoreName + Store()。所以在你分享的例子中，我认为它是 getAspect1MyStoreStore()

3.  你有什么特别的例子吗？那里有很多 ExtJS4 示例。你想要 MVC 示例、Store 示例、组件示例等吗？

# android - Android Alpha Fade in Animation 问题

> ID：14651959
> 
> 赞同：9
> 
> 时间：2013-02-01T17:40:02.703
> 
> 标签：android, animation, android-animation, fadein

我有一个 ImageView 元素，我在我的代码中创建并放置在我的 RelativeLayout 中。我将此图像设置为不可见，以使用以下代码开始：

```
arrow.setVisibility(View.INVISIBLE); 
```

然后我通过 XML 定义了一个 Fade-In Alpha 动画：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:shareInterpolator="false"
android:fillEnabled="true"
android:fillAfter="true"
android:fillBefore="true">

<alpha
    android:fromAlpha="0.0"
    android:toAlpha="1.0"
    android:startOffset="100"
    android:duration="300" />

/set> 
```

运行动画：

我只需调用以下命令来启动动画

```
myview.startAnimation(myanimation); 
```

我看到的问题是我的动画导致 ImageView 在完全可见的情况下闪烁，然后通过 alpha 0 到 1 的动画。我该如何解决这个问题？我无法将初始 alpha 值设置为 0，因为 alpha 动画基于百分比而不是绝对 alpha 值。（例如：0*当前值到 1*当前值）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T15:53:34.250

我认为问题在于，使用这行代码：

```
android:fillBefore="true" 
```

在这里，试试这个代码，它对我有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="2000"
    android:fillAfter="true"
    android:fromAlpha="0.0"
    android:toAlpha="1.0" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T18:12:54.260

如果您在布局文件中将 animateLayoutChanges 与动画结合使用，则切换视图可见性将导致两个动画运行并且视图闪烁或闪烁。设置视图可见性会导致布局 animateLayoutChanges 运行并将视图淡入一次，然后您创建的动画也会导致第二个动画运行。

# c# - 更新已发布的 wpf 应用程序的代码隐藏

> ID：14651963
> 
> 赞同：1
> 
> 时间：2013-02-01T17:40:10.937
> 
> 标签：c#, wpf, visual-studio-2010, updates

我有一个一年前发布的 WPF 应用程序，并且一直在使用它（和 MSSQL 数据库 .mdf-extension），我在过去一年中用一些数据填充了它。

现在我在我的应用程序中对后面的代码 (filename.cs) 进行了一些更改，所以当我发布时，我得到了一个全新的数据库。我想使用已经填充的数据库。

我如何做到这一点（这就像对我的 WPF 应用程序的升级/更新）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:20:57.910

您需要一个 SQL 架构比较工具来比较旧的 SQL 架构和新的 SQL 架构。有各种各样的工具，事实上 Visual Studio 甚至有一个。

但是对于复杂的场景，您可能有免费的替代品

您只需定义数据库之间的模式更改，并编辑生成的差异 SQL 以保留数据。

# templates - 骨干视图/模板是否可以更像典型的服务器端 MVC 模板那样使用，而不是空容器和大量附加？

> ID：14651965
> 
> 赞同：2
> 
> 时间：2013-02-01T17:40:14.393
> 
> 标签：templates, backbone.js, marionette, backbone-views

一位前端开发人员向我提出了这个询问，我不确定如何表达我的立场，但他让我思考：

因此，Backbone（或 Backbone.Marionette）中的约定是渲染与模板关联的视图，然后将结果视图的构造/合成 HTML 转储或附加到现有容器中，如下所示：

```
this.$el.append(this.subview.render().$el); 
```

但是，这当然需要页面上已经渲染的 DOM 元素来转储这个新渲染的视图。这会导致如下现象：

```
<ul id="scheduler-loadroutegroups" class="full-height"></ul> 
```

或者

```
collectionView.$("#scheduler-loadroutegroups").append(itemView.el); 
```

也就是说，**最终期望 content 的空容器**。

显然，这种渲染和附加模式是 Backbone 的核心概念，并且有容器来放置内容似乎是绝对必要的。

我的同事的问题是，是否可以使用更多的服务器端 MVC 模板模式，在这种模式中您不需要**任何**空容器：

```
<ul id="scheduler-loadroutegroups" class="full-height">
    {{#developers}}
        <ul>
            {{#pets}}
                <li>{{name}}</li>
            {{/pets}}
        </ul>
    {{/developers}}
</ul> 
```

在这种情况下，假设**开发人员**代表一组模型，而**宠物**代表一组模型。他们每个人都需要自己的视图/子视图，并附有事件。

我假设更经典的服务器端 MVC 模板系统的问题是视图及其相关模板将丢失对 Backbone 所依赖的上下文限制和事件绑定的细粒度控制。

我见过的所有 Backbone 示例/文档都使用这种“空容器/附加”模式。**是否有可能以其他方式做事？为什么或者为什么不？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:29:47.403

Backbone 视图需要一个 DOM 元素，并尽可能提供属性以简化其创建，但没有什么会强迫您使用模板引擎或 DOM 操作。您可以使用现有的标记结构，只需将视图附加到正确的 DOM 节点。

假设呈现的 HTML 看起来像这样

```
<ul id='scheduler-loadroutegroups'>
    <li id='d1'>
    <ul>
        <li id='p1'>P1</li>
        <li id='p2'>P2</li>
    </ul>
    </li>
    <li id='d2'>
    <ul>
        <li id='p3'>P3</li>
        <li id='p4'>P4</li>
    </ul>
    </li>
</ul> 
```

您可以使用一个视图来获取相关的 DOM 节点并关联子视图。子视图本身设置它们的 DOM 节点等等。

```
var DevListView = Backbone.View.extend({
    initialize: function() {
        this.inject();
    },

    inject: function() {
        var $el = this.$el;

        this.collection.each(function (model) {
            var subview = new DevView({
                el: $el.find("#d" + model.id),
                model: model
            });
        });
    }
});

var DevView = Backbone.View.extend({
    initialize: function() {
        this.inject();
    },

    inject: function() {
        var $el = this.$el;

        this.model.pets.each(function (model) {
            var subview = new PetView({
                el: $el.find("#p" + model.id),
                model: model
            });
        });
    }
});

var PetView = Backbone.View.extend({
    events: {
        'click ': function () {
            this.$el.toggleClass('selected');

            var msg = '<p>Pet '+this.model.get('id')+'</p>';
            $('body').append(msg);
        }
    }
}); 
```

然后，您使用相关数据调用根视图，初始化方法完成其余工作。

```
var Developer = Backbone.Model.extend({
    initialize: function () {
        this.pets = new Backbone.Collection(this.get('pets'));
    },
    parse: function (data) {
        this.pets.reset(data.pets);
        return data;
    }
});
var Developers = Backbone.Collection.extend({
    model: Developer
});
var v = new DevListView({
    el: '#scheduler-loadroutegroups',
    collection: devs
}); 
```

有关演示，请参见[http://jsfiddle.net/3xNHj/ 。](http://jsfiddle.net/3xNHj/)

当然，你可以更进一步，重新提出你的观点，这些问题可能会帮助你进一步挖掘

[Backbone，而不是包装BackboneJS 渲染问题](https://stackoverflow.com/questions/12004534/backbonejs-rendering-problems/12006179#12006179)[的“this.el”](https://stackoverflow.com/questions/11594961/backbone-not-this-el-wrapping/11598543#11598543)

# django - django join select 相关

> ID：14651971
> 
> 赞同：0
> 
> 时间：2013-02-01T17:40:35.317
> 
> 标签：django, django-models

我有一个看起来像这样的类别模型。

```
class categories(models.Model):
    name=models.CharField(max_length=50,db_index=True)

class tag_relation(models.Model):
    category=models.ForeignKey(categories,db_index=True)
    relation=models.ForeignKey(main_tb,db_index=True,related_name='categoryrelation')

class main_tb(models.Model):
    name=charfield
    img_file=charfield etc..
    location=charfield 
```

现在我需要做的是选择一个特定的类别并使用位置进一步过滤它。

我正在做的就是这个。

```
query=tag_relation.objects.filter(category='1orsomeother').selectrelated('categoryrelation').filter(location='india') 
```

我知道这不是正确的方法，但我应该如何进行连接和搜索以提供最佳性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:47:41.483

你需要这个：

```
query = tag_relation.objects.filter(category__id=cat_id, relation__location='india') 
```

# java - Java-调用方法实例的问题？

> ID：14651972
> 
> 赞同：0
> 
> 时间：2013-02-01T17:40:41.910
> 
> 标签：java, class

我创建了一个类，该类旨在获取 2 个分数，每个分数都有一个分子和分母，然后将它们相加，输出另一个分数。

当我编译程序时，我遇到了一个问题，涉及：

*分数 F3 = 新分数.add (F1, F2);* 在主要方法中

错误：*未找到类型 Fraction$add*

如果我将所有内容都设为一个类，程序将运行，但我希望所有方法都严格在 Fraction 类中，并在 UseFraction 类中调用分数。

```
import java.io.*;
import java.util.*;
import java.text.*;

public final class Fraction
{
    private int numerator, denominator;

    public Fraction (int numerator, int denominator) throws IllegalArgumentException
    {
        this.numerator = numerator;

        if (denominator == 0)
        {
            throw new IllegalArgumentException ();
        }
        this.denominator = denominator;
    }

    //As an instance method
    public void add (Fraction F)
    {
        this.numerator = this.numerator * F.denominator + this.denominator * F.numerator;
        this.denominator = this.numerator * this.denominator;
    }

    //As a static method
    public static Fraction add (Fraction F1, Fraction F2)
    {
        return new Fraction (F1.numerator * F2.denominator + F1.denominator * F2.numerator, F1.numerator);
    }

    //@ Override
    public String toString ()
    {
        return (this.numerator + "/" + this.denominator);
    }

}

public class UseFraction 
{

    public static void main (String str[]) throws IOException
    {
        BufferedReader stdin = new BufferedReader (new InputStreamReader (System.in));

        Fraction F1 = new Fraction (5, 7); // first fraction constructor
        Fraction F2 = new Fraction (3, 8); // second fraction constructor
        Fraction F3 = new Fraction.add (F1, F2); // addition

        System.out.println ("The sum is " + F3); 

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:41:42.463

使用`Fraction.add(F1, F2)`，不使用`new Fraction.add`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:44:50.440

```
Fraction F3 = new Fraction.add (F1, F2); // addition 
```

这应该只是：

```
Fraction F3 = Fraction.add (F1, F2); // addition 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:42:40.453

```
Fraction F3 = new Fraction.add (F1, F2); 
```

将其更改为：

```
Fraction F3 = Fraction.add (F1, F2); 
```

# python - 使用 Python Selenium Webdriver 捕获 PDF 文件

> ID：14651973
> 
> 赞同：2
> 
> 时间：2013-02-01T17:40:43.433
> 
> 标签：python, pdf, selenium, webdriver, selenium-webdriver

我们使用 python 测试套件测试内部开发的应用程序，该套件通过 Selenium WebDriver 完成网络导航/交互。我们网络测试的一个棘手部分是处理应用程序中的一系列 pdf 报告。我们正在测试 Firefox 从 v3.6 到 v16.0.1 的计划升级，结果发现我们之前捕获报告的方式不再有效，因为 Firefox 的临时文件夹的目录结构发生了变化。我没有编写原始的 pdf 捕获代码，但我会为我们最终使用 v16.0.1 重构它，所以我想知道是否有比我们使用 Python 的 selenium webdriver 绑定保存 pdf 更好的方法'目前正在做。

以前，对于 Firefox v3.6，在单击生成报告的链接后，我们会扫描“C:\Documents and Settings\\Local Settings\Temp\plugtmp”目录中的 pdf 文件（具有特定的命名约定）以被生成。需要明确的是，我们不是从网页本身保存报告，我们只是使用在 Firefox 的 Temp 文件夹中生成的报告。

在Firefox 16.0.1中，点击生成报告的链接后，在“C:\Documents and Settings\\Local Settings\Temp\tmp*\cache*”中生成文件，文件名随机，不以“.pdf”。如果使用与我们之前的技术类似的技术，这会使捕获此文件变得更加困难 - 每个浏览器都有一个不同的 tmp*** 文件夹，该文件夹有一个充满文件夹的缓存，其中生成的报告具有随机文件名.

我能看到的最简单的解决方案是直接保存 pdf，但我还没有找到这样做的方法。

要使用我们在 FF3.6 中使用的相同方法（在 Temp 文件夹目录中找到 pdf），我认为我们需要执行以下操作：

1.  找出哪个 tmp*** 文件夹属于这个特定的浏览器实例（我们可以检查浏览器实例化前后存在的 tmp*** 文件夹）
2.  在该浏览器的缓存中查找在生成 pdf 报告后立即生成的文件（我们可以通过比较时间戳）
3.  在缓存中生成多个文件的情况下，我们可能会根据大小进行排序，并取最大的文件，因为 pdf 几乎可以肯定是最大的临时文件（尽管这看起来很不稳定，需要在实践中进行测试） .

我对这种方法感觉不太好，想知道是否有更好的方法来捕获 pdf 文件。任何人都可以提出更好的方法吗？

注意：PDF 文件的实际抓取仍然可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:47:44.940

我们最终通过在测试前清除 firefox 的临时 Internet 文件，然后在生成报告后查找最近创建的文件来实现这一点。

# python - 当我唯一的输入是 ndb.Query 时，如何获取 ndb.Model？

> ID：14651975
> 
> 赞同：2
> 
> 时间：2013-02-01T17:40:48.710
> 
> 标签：python, google-app-engine, app-engine-ndb

假设有`ndb.Model`一个看起来像这样：

```
class Foo(ndb.Model):
  bar = ndb.StringProperty() 
```

我的问题是，如果我唯一的输入是`Foo.query()`如何将模型作为该查询所属的对象？

```
def query_to_model(query):
  # some magic 
  return model 
```

* * *

将`Foo.query().kind`模型的名称作为字符串返回，但我没有设法找到将其作为对象获取的方法。

以下工作使用`eval`，但仅当模型在同一文件中定义时：

```
def query_to_model(query):
  return eval(query.kind) 
```

我想要比这更普遍的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:42:32.983

使用此模型定义导入代码后，列表`ndb.Model._kind_map`应包含它。这是魔术：

```
def query_to_model(query):
  return ndb.Model._kind_map[query.name] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:08:14.183

如果您有种类名称，我将使用此代码查找模型类：

```
model_module = KIND_MODULES(kind_name)
mod = __import__(model_module, globals(), locals(), [kind_name], -1)
model_class = getattr(mod, kind_name) 
```

KIND Modules 字典包含要从以下位置导入模型的模块：

```
KIND_MODULES = { 'Users' : 'models', 'Comments' : 'models', 'Cities' : 'examples.models' } 
```

# ios - 转换从 CIFaceFeature 返回的 CGPoint 结果

> ID：14651976
> 
> 赞同：4
> 
> 时间：2013-02-01T17:40:49.480
> 
> 标签：ios, uiimage, face-detection, uiimageorientation, cifacefeature

我试图弄清楚如何转换从`CGPoint`返回的结果`CIFaceFeature`，以便在`CALayer`. 以前我已经将我的图像标准化为 0 旋转，以使事情变得更容易，但这会导致在横向模式下使用设备拍摄的图像出现问题。

我已经为此工作了一段时间但没有成功，我不确定我对任务的理解是否不正确，或者我的方法是否不正确，或两者兼而有之。以下是我认为正确的：

![来自相机的原始图像](../Images/027072246804314ba9a76e23e189f1a3.png)

根据该`CIDetector` `featuresInImage:options:`方法的文档

```
A dictionary that specifies the orientation of the image. The detection is 
adjusted to account for the image orientation but the coordinates in the 
returned feature objects are based on those of the image. 
```

![UIImageView 中显示的图像](../Images/c4e5efddd03ed22d9a0ade77eb292d6c.png)

在下面的代码中，我试图旋转一个 CGPoint，以便通过覆盖 UIImageView 的 CAShape 层来绘制它。

我正在做的（...或认为我在做...）是将左眼 CGPoint 平移到视图的中心，旋转 90 度，然后将点平移回原来的位置。这是不正确的，但我不知道我哪里出错了。是我的方法错误还是我实施它的方式？

```
#define DEGREES_TO_RADIANS(angle) ((angle) / 180.0 * M_PI) 
```

-- leftEyePosition 是一个 CGPoint

```
CGAffineTransform  transRot = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(90));

float x = self.center.x;
float y = self.center.y;
CGAffineTransform tCenter = CGAffineTransformMakeTranslation(-x, -y);
CGAffineTransform tOffset = CGAffineTransformMakeTranslation(x, y);

leftEyePosition = CGPointApplyAffineTransform(leftEyePosition, tCenter);
leftEyePosition = CGPointApplyAffineTransform(leftEyePosition, transRot);
leftEyePosition = CGPointApplyAffineTransform(leftEyePosition, tOffset); 
```

从这篇文章：[https://stackoverflow.com/a/14491293/840992](https://stackoverflow.com/a/14491293/840992)，我需要根据 imageOrientation 进行旋转

> 方向
> 
> Apple/UIImage.imageOrientation Jpeg/文件 kCGImagePropertyOrientation
> 
> ```
> UIImageOrientationUp    = 0  =  Landscape left  = 1
> UIImageOrientationDown  = 1  =  Landscape right = 3
> UIImageOrientationLeft  = 2  =  Portrait  down  = 8
> UIImageOrientationRight = 3  =  Portrait  up    = 6 
> ```

消息由 skinnyTOD 于 2013 年 2 月 1 日下午 4:09 编辑

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-10T07:28:45.900

我需要找出完全相同的问题。Apple 示例“SquareCam”直接在视频输出上运行，但我需要仍然 UIImage 的结果。因此，我使用一些转换方法扩展了 CIFaceFeature 类，以获取关于 UIImage 及其 UIImageView（或 UIView 的 CALayer）的正确点位置和边界。完整的实现发布在这里：[https](https://gist.github.com/laoyang/5747004) ://gist.github.com/laoyang/5747004 。你可以直接使用。

这是 CIFaceFeature 中点的最基​​本转换，返回的 CGPoint 基于图像的方向进行转换：

```
- (CGPoint) pointForImage:(UIImage*) image fromPoint:(CGPoint) originalPoint {

    CGFloat imageWidth = image.size.width;
    CGFloat imageHeight = image.size.height;

    CGPoint convertedPoint;

    switch (image.imageOrientation) {
        case UIImageOrientationUp:
            convertedPoint.x = originalPoint.x;
            convertedPoint.y = imageHeight - originalPoint.y;
            break;
        case UIImageOrientationDown:
            convertedPoint.x = imageWidth - originalPoint.x;
            convertedPoint.y = originalPoint.y;
            break;
        case UIImageOrientationLeft:
            convertedPoint.x = imageWidth - originalPoint.y;
            convertedPoint.y = imageHeight - originalPoint.x;
            break;
        case UIImageOrientationRight:
            convertedPoint.x = originalPoint.y;
            convertedPoint.y = originalPoint.x;
            break;
        case UIImageOrientationUpMirrored:
            convertedPoint.x = imageWidth - originalPoint.x;
            convertedPoint.y = imageHeight - originalPoint.y;
            break;
        case UIImageOrientationDownMirrored:
            convertedPoint.x = originalPoint.x;
            convertedPoint.y = originalPoint.y;
            break;
        case UIImageOrientationLeftMirrored:
            convertedPoint.x = imageWidth - originalPoint.y;
            convertedPoint.y = originalPoint.x;
            break;
        case UIImageOrientationRightMirrored:
            convertedPoint.x = originalPoint.y;
            convertedPoint.y = imageHeight - originalPoint.x;
            break;
        default:
            break;
    }
    return convertedPoint;
} 
```

以下是基于上述转换的类别方法：

```
// Get converted features with respect to the imageOrientation property
- (CGPoint) leftEyePositionForImage:(UIImage *)image;
- (CGPoint) rightEyePositionForImage:(UIImage *)image;
- (CGPoint) mouthPositionForImage:(UIImage *)image;
- (CGRect) boundsForImage:(UIImage *)image;

// Get normalized features (0-1) with respect to the imageOrientation property
- (CGPoint) normalizedLeftEyePositionForImage:(UIImage *)image;
- (CGPoint) normalizedRightEyePositionForImage:(UIImage *)image;
- (CGPoint) normalizedMouthPositionForImage:(UIImage *)image;
- (CGRect) normalizedBoundsForImage:(UIImage *)image;

// Get feature location inside of a given UIView size with respect to the imageOrientation property
- (CGPoint) leftEyePositionForImage:(UIImage *)image inView:(CGSize)viewSize;
- (CGPoint) rightEyePositionForImage:(UIImage *)image inView:(CGSize)viewSize;
- (CGPoint) mouthPositionForImage:(UIImage *)image inView:(CGSize)viewSize;
- (CGRect) boundsForImage:(UIImage *)image inView:(CGSize)viewSize; 
```

（需要注意的另一件事是在从 UIImage 方向提取面部特征时指定正确的 EXIF 方向。相当混乱......这是我所做的：

```
int exifOrientation;
switch (self.image.imageOrientation) {
    case UIImageOrientationUp:
        exifOrientation = 1;
        break;
    case UIImageOrientationDown:
        exifOrientation = 3;
        break;
    case UIImageOrientationLeft:
        exifOrientation = 8;
        break;
    case UIImageOrientationRight:
        exifOrientation = 6;
        break;
    case UIImageOrientationUpMirrored:
        exifOrientation = 2;
        break;
    case UIImageOrientationDownMirrored:
        exifOrientation = 4;
        break;
    case UIImageOrientationLeftMirrored:
        exifOrientation = 5;
        break;
    case UIImageOrientationRightMirrored:
        exifOrientation = 7;
        break;
    default:
        break;
}

NSDictionary *detectorOptions = @{ CIDetectorAccuracy : CIDetectorAccuracyHigh };
CIDetector *faceDetector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:detectorOptions];

NSArray *features = [faceDetector featuresInImage:[CIImage imageWithCGImage:self.image.CGImage]
                                          options:@{CIDetectorImageOrientation:[NSNumber numberWithInt:exifOrientation]}]; 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:54:59.923

我认为您需要翻转找到的关于图像水平中心轴的人脸坐标

你可以试试这个转换：

```
CGAffineTransform transform = CGAffineTransformIdentity;
transform = CGAffineTransformTranslate(transform, 0.0f, image.size.height);
transform = CGAffineTransformScale(transform, 1.0f, -1.0f);
[path applyTransform:transform]; 
```

仅当我们在查找人脸之前将 image.imageOrientation 设置为 0 时，此转换才有效。

# bash - 使用括号而不是大括号定义 bash 函数体

> ID：14651980
> 
> 赞同：9
> 
> 时间：2013-02-01T17:41:02.323
> 
> 标签：bash, bash-function

这个脚本演示了用括号和大括号定义一个 bash 函数。括号具有在函数“本地”中创建环境变量的良好效果，我猜是因为函数体是作为子外壳执行的。输出是：

```
A=something
A=
B=something
B=something 
```

问题是这是否是定义函数的允许语法。

```
#!/bin/bash

foo() (
    export A=something
    echo A=$A
)

bar() {
    export B=something
    echo B=$B
}

foo
echo A=$A
bar
echo B=$B 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T17:44:13.807

是的，该语法是允许的。如[`bash`手册页](http://linux.die.net/man/1/bash)所述，bash 函数的定义是：

```
[ function ] name () compound-command [redirection] 
```

更多描述（也来自手册页）：

> 函数的主体是复合命令`compound-command`。该命令通常是 和 之间的命令列表`{`，`}`但可以是上面的**复合命令**下列出的任何命令。

`()`和`{}`封闭的列表是复合命令。完整列表（同样来自手册页，只是编辑为一个简单列表）：

> 复合命令是以下之一：
> 
> ```
> (list)
> { list; }
> ((expression))
> [[expression]]
> for name [ in word ] ; do list ; done
> for (( expr1 ; expr2 ; expr3 )) ; do list ; done
> select name [ in word ] ; do list ; done
> case word in [ [(] pattern [ | pattern ] ... ) list ;; ] ... esac
> if list; then list; [ elif list; then list; ] ... [ else list; ] fi
> while list; do list; done
> until list; do list; done 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-09T11:11:36.363

两者都是有效的，正如 Carl 提到的，也可以使用任何*复合命令，例如：*

```
$ f() if [ "$1" = 'a' ]; then echo 'equals a'; fi
$ f a
equals a
$ f b
$ 
```

POSIX 7 **2.9.5 函数定义命令** [http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_09_05](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_09_05)：

> 函数定义命令的格式如下：
> 
> fname() 复合命令[io-redirect ...]
> 
> [...] 参数 Compound-command 表示复合命令，如复合命令中所述。

然后**是 2.9.4 复合命令** [http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_09_04](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_09_04)：

> (compound-list) [...] 影响环境的变量分配和内置命令在列表完成后将不再有效。
> 
> { Compound-list;} 在当前流程环境中执行复合列表。

语义与`()`不使用函数定义相同：它不会创建新进程，而是在 POSIX 和 Bash 所谓的“子shell 环境”中执行。

# mysql - 带有格式化日志文件的mysql批处理

> ID：14651981
> 
> 赞同：0
> 
> 时间：2013-02-01T17:41:05.980
> 
> 标签：mysql, logging, batch-file

我的目标是在 Windows 服务器上启动计划作业，删除本地 mysql 服务器上的数据集，该服务器也安装在 Windows 服务器上。

但我不只是删除数据，我想创建一个日志文件。

使用此命令：

```
mysql -v -h localhost -u user --password=password -P 3307 --database=smydatabase -B --silent --skip-named-commands < query.sql > logging.txt 
```

以下 sql 文件“query.sql

```
select count(*) from table; 
```

我得到以下日志文​​件：

```
--------------
select count(*) from table
--------------

4420101 
```

========================

我的第一个问题是：我可以暂停查询以及上下两行。

最终的 sql 文件将包含大约 20 行 sql 命令。我的首选目标是创建一个格式化的日志文件，如下所示：

```
Job started at <date>
Deleting <4420101> datasets in table <table>
4420101 rows affected
Deleting <22013> datasets in table <persons>
etc. 
```

所以我必须使用选择语句和变量创建日志文件行。其他行如删除语句不应出现在日志文件中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T05:45:19.803

包括 --skip-column-names：

```
mysql -v -h localhost -u user --password=password -P 3307 --database=smydatabase -B --silent --skip-named-commands --skip-column-names < query.sql > logging.txt 
```

希望这会有所帮助。

# unit-testing - Google Closure 和 AngularJS 的单元测试方法有什么区别？

> ID：14651985
> 
> 赞同：1
> 
> 时间：2013-02-01T17:41:18.983
> 
> 标签：unit-testing, angularjs, google-closure

我刚收到一个中等规模的项目，其中包含很多闭包单元测试。我将在 AngularJS 中重写 GUI 部分。对此我有一些疑问：

1.  用闭包测试来测试 AngularJS 可以吗？
2.  将 Closure 测试重写为 AngularJS 有什么好处？值得重写吗？

我是 Closure 和 Angular 的新手，如果我滥用了某些术语，请原谅我。

# node.js - 检查用户是否已经存在并等待回调

> ID：14651986
> 
> 赞同：0
> 
> 时间：2013-02-01T17:41:31.953
> 
> 标签：node.js, callback, mongoose

我有一个小功能来验证用户输入。在该功能中，我还将检查电子邮件地址是否已被占用。但是我对异步回调有些麻烦。我希望任何人都可以给我一个提示，我该如何解决这个问题。我将 nodejs 与 express 3 框架、mongodb 和 node-validator 库一起使用。

这是我的验证功能的一部分：

```
function check(data, callback) {
    mongoose.model('User', User).count(data, function (err, count) {
        callback(err, !! count);
    });
};

function validate(email, password, confirm) {
    var v = new Validator(),
        errors = new Array();

    v.error = function (msg) {
        errors.push(msg);
    };

    check({email: email}, function (err, exists) {
        v.check(exists, { email: 'E-Mail is already taken' }).equals(false);
    });
    ...
    return errors;
} 
```

基于异步回调，变量`errors`在`return`语句中为空。我怎么能检查电子邮件地址是否已经在数据库中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:55:02.493

您将不得不为您的`validate`函数添加一个回调。就目前而言，您的`check`函数是异步的，因此您会立即返回空`errors`数组。

```
function check(data, callback) {
    mongoose.model('User', User).count(data, function (err, count) {
        callback(err, !! count);
    });
};

function validate(email, password, confirm, callback) {
    var v = new Validator(),
        errors = new Array();

    v.error = function (msg) {
        errors.push(msg);
    };

    check({email: email}, function (err, exists) {
        if (err) {
            return callback(err);
        }

        v.check(exists, { email: 'E-Mail is already taken' }).equals(false);
        callback(null, v);
    });
};

// Calling to validate example
server.get("/validate_user_or_whatever", function(req, resp) {
    // Call validate with callback
    validate(req.param("email"), req.param("password"), true, function(err, validator) {
        if (err) {
            return resp.json({success: false, message: err.message});
        }

        var success = validator.isValid; // or something

        // Respond with the results
        resp.json({success: success});
    });
}); 
```

现在，您的下一个问题可能是我如何运行所有这些 validate 函数并在调用 validate 之前等待它们返回`callback`。好问题，看看[异步模块](https://github.com/caolan/async)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:49:38.287

您需要考虑异步并传递将异步调用的回调。快速示例：

```
app.get('/blah', function(req, res) {
   // Whatever
   validate(email, pass, confirm, function(errors) {
     if (errors.length == 0)
         resp.send(200, 'blah');
     else
         resp.send(400, 'blah blah');
   });
})

function validate(email, password, confirm, callback) {
    var v = new Validator(),
        errors = new Array();

    v.error = function (msg) {
        errors.push(msg);
    };

    check({email: email}, function (err, exists) {
        v.check(exists, { email: 'E-Mail is already taken' }).equals(false);
    }, function() {
        callback(errors);
    });
    // ...
    return errors;
} 
```

# php - opencart错误我无法移动到服务器我很好的错误与路径文件丢失

> ID：14651987
> 
> 赞同：0
> 
> 时间：2013-02-01T17:41:35.333
> 
> 标签：php, ajax, phpmyadmin, phpunit

opencart 我尝试移动，但出现这样的错误

```
Warning: require_once() [function.require-once]: URL file-access is disabled in the server configuration in /www/zxq.net/r/a/s/rasvi/htdocs/shop/index.php on line 15

Warning: require_once(http://zxq.net/r/a/s/rasvi/htdocs/shop/system/startup.php) [function.require-once]: failed to open stream: no suitable wrapper could be found in /www/zxq.net/r/a/s/rasvi/htdocs/shop/index.php on line 15

Fatal error: require_once() [function.require]: Failed opening required 'http://zxq.net/r/a/s/rasvi/htdocs/shop/system/startup.php' (include_path='.:/usr/lib/php') in /www/zxq.net/r/a/s/rasvi/htdocs/shop/index.php on line 
```

15

所以我改变了配置文件

至

```
define('HTTP_SERVER', 'http://www.rasvi.zxq.net/shop/');
define('HTTP_IMAGE', 'http://www.rasvi.zxq.net/shop/image/');
define('HTTP_ADMIN', 'http://www.rasvi.zxq.net/shop/admin/');

// HTTPS
define('HTTPS_SERVER', 'http://www.rasvi.zxq.net/shop/');
define('HTTPS_IMAGE', 'http://www.rasvi.zxq.net/shop/image/');

// DIR
define('DIR_APPLICATION', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/catalog/');
define('DIR_SYSTEM', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/system/');
define('DIR_DATABASE', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/system/database/');
define('DIR_LANGUAGE', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/catalog/language/');
define('DIR_TEMPLATE', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/catalog/view/theme/');
define('DIR_CONFIG', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/system/config/');
define('DIR_IMAGE', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/image/');
define('DIR_CACHE', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/system/cache/');
define('DIR_DOWNLOAD', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/download/');
define('DIR_LOGS', 'http://zxq.net/r/a/s/rasvi/htdocs/shop/system/logs/');

// DB
define('DB_DRIVER', 'mysql');
define('DB_HOSTNAME', 'localhost');
define('DB_USERNAME', 'myusername');
define('DB_PASSWORD', 'mypassword');
define('DB_DATABASE', 'rasvi_zxq_shop');
define('DB_PREFIX', 'sh_');
?> 
```

我想我的配置文件有什么问题我创建了数据库并导入所有表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:50:23.813

使用服务器基本路径`/home/yoursite/public_html/`而不是`sitename`

# python - Python 3.2 被动用户输入

> ID：14651989
> 
> 赞同：1
> 
> 时间：2013-02-01T17:41:38.160
> 
> 标签：python, input

有没有办法编写一个不需要用户输入的函数？例如，在井字游戏中，用户可以随时按“Q”，程序会关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:47:46.060

有几种方法可以做到这一点，它们都是不同的。

如果您的游戏是使用 的终端应用程序`curses`，您将`q`在调用 时捕获`getch()`，然后引发`SystemExit`或简单地跳出`while`许多应用程序使用的循环`curses`。

使用`tkinter`或其他 GUI 库，您可以将按键事件绑定到`Frame`包含井字游戏板的小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:19:31.980

假设您只是将棋盘打印出来（我有一个基本的井字游戏可以做到这一点），在输入过程中您可以关闭它（即使您特别询问过）：

user_option = input("输入要移动到的空格，或者'Q'退出：")

```
try:
    if user_option.lower() == 'q': # makes everything lowercase so it is easier to handle
        import sys
        sys.exit("Game Terminated.")
except TypeError:
    # other code 
```

我不确定玩家选择如何移动，所以我使用了`try`and `except`。在我的井字游戏中，我让用户输入一个整数，它对应于棋盘上的一个空格。

或者，您可以让用户按`Ctrl`+ `C`，这在 Python 中是自动`KeyBoardInterrupt`的（结束程序）。

# google-drive-api - 允许第三方网站保存到我的驱动器（并且没有共享权限）

> ID：14651993
> 
> 赞同：2
> 
> 时间：2013-02-01T17:41:46.443
> 
> 标签：google-drive-api

我们正在开发一个应用程序来销售我们的音乐，并且想知道 Google Drive 是否可以用作在线存储解决方案。

用户将在我们的网站上完成交易，然后授权我们将文件（或多个文件）保存到他们的 Google Drive。

对我们的吸引力是通过浏览器解决下载问题。我相信 Google Drive api 在交付完成后会返回成功的响应。如果不完整，我们将重新发送或更新。

另一个要求是我们是否可以将权限设置为在保存后不允许共享（并且该设置是永久的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:28:17.470

你可以做你想做的一切。关于不允许用户转发的最后一部分，如果您仍然拥有该文件，则可以这样做，但如果您让用户拥有该文件，则不能这样做。我不确定你是否能做到这一点——用户总是可以下载文件并自己分享，无论你使用的是云端硬盘还是你自己的自定义系统。

# android - 带有 EditText 字段和图像按钮的自定义微调器

> ID：14651995
> 
> 赞同：0
> 
> 时间：2013-02-01T17:41:57.580
> 
> 标签：android, spinner, android-custom-view

我正在尝试创建一个使用 EditText 字段和 ImageButton 的自定义微调器。但是，在按下 ImageButton 后，我找不到如何让我最初在 Spinner 中显示的相同弹出菜单。

[`This`](https://stackoverflow.com/questions/8619576/android-drawing-a-button-as-a-spinner)是我能找到的最接近的问题，但它与我的问题完全不同。

这是我的旧微调器代码：

```
apModeAdapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, res.getStringArray( R.array.anti_pump_ap_mode_array )  );
apModeAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
apModeSpinner = (Spinner) findViewById(R.id.apModeSpinner);
apModeSpinner.setAdapter(apModeAdapter);
apModeSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) { 
```

或者，`ArrayList`在我的`Resources:`

```
pumpCountAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, pumpCountList);
pumpCountAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
pumpCountSpinner.setAdapter(pumpCountAdapter);
pumpCountSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) { 
```

我不想要一个[`PopUp Menu`](http://android-er.blogspot.de/2012/03/example-of-using-popupmenu.html)。

我确实想要类似于 a 的东西[`ContextMenu`](http://saga-androidapplication.blogspot.in/2011/05/dialog-list-item.html)，但我不想要它底部的按钮。我尝试自己实现它并删除它们，但它不能干净地工作。该`onClick`方法仅具有按下哪个按钮的参数。

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    AlertDialog.Builder ab=new AlertDialog.Builder(MoreParameters.this);
    ab.setTitle(R.string.anti_pump_ap_mode);
    ab.setSingleChoiceItems(res.getStringArray( R.array.anti_pump_ap_mode_array ), 0,new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        // onClick Action             
    }
});
ab.show(); 
```

虽然这`ContextMenu`与我想要的很接近，但我真的很想复制上面显示的微调器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:04:24.650

我找到的解决方案是更改`ab.setSingleChoiceItems()`为`ab.setItems()`需要删除`0`它传递的参数。

这个：

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    AlertDialog.Builder ab=new AlertDialog.Builder(MoreParameters.this);
    ab.setTitle(R.string.anti_pump_ap_mode);
    ab.setSingleChoiceItems(res.getStringArray( R.array.anti_pump_ap_mode_array ), 0,new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        // onClick Action             
    }
});
ab.show(); 
```

变成这样：

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    AlertDialog.Builder ab=new AlertDialog.Builder(MoreParameters.this);
    ab.setTitle(R.string.anti_pump_ap_mode);
    ab.setItems(res.getStringArray( R.array.anti_pump_ap_mode_array ),new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        // onClick Action             
    }
});
ab.show(); 
```

# java - 有没有办法通过java中的参数来改变restful webservices的输出类型？

> ID：14651996
> 
> 赞同：1
> 
> 时间：2013-02-01T17:41:59.253
> 
> 标签：java, format, jersey, resteasy, restful-architecture

我想使用相同的静态 web 服务路径来生成 xml 或 json，或者带有 xsl 标头的 xml。是否可以在 java 中使用任何框架（jersey 或 resteasy）？例如：

```
@Path("/person")
public class PersonService {

    @GET
    @Path("/find")
    public Person find(@QueryParam("name") String name, @QueryParam("outputformat") String outputformat) {
            // do some magic to change output format
            return dao.findPerson(name);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:55:09.717

也许您可以编写一个 servlet 过滤器，该过滤器接受查询字符串并使用它来相应地设置请求的接受标头，然后 jersey 应该分派到任何带有 @Consumes 注释的匹配方法。

例如，servlet 过滤器拦截请求“?outputFormat=xml”并将 Accept 标头设置为“application/xml”。然后，jersey 应该分派到资源中带有以下注释的任何方法：`@Consumes("application/xml")`

这个问题可能会有所帮助：[REST。球衣。如何以编程方式选择要返回的类型：JSON 还是 XML？](https://stackoverflow.com/questions/11382158/rest-jersey-how-to-programmatically-choose-what-type-to-return-json-or-xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:40:12.577

您还可以轻松自定义 Jersey ServletContainer，并且不需要传递其他参数。您可以在 URL 中使用 .json 或 .xml 协商表示。

```
public class MyServletContainer extends ServletContainer {

  @Override
  protected void configure(ServletConfig servletConfig, ResourceConfig resourceConfig, WebApplication webApplication) {
    super.configure(servletConfig, resourceConfig, webApplication);
    resourceConfig.getMediaTypeMappings().put("json", MediaType.APPLICATION_JSON_TYPE);
    resourceConfig.getMediaTypeMappings().put("xml", MediaType.APPLICATION_XML_TYPE);
  }

} 
```

在您的 web.xml 中，您可以定义自定义 servlet，如下所示。

```
 <servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>com.sun.jersey.MyServletContainer</servlet-class>
    <init-param>
      <param-name>javax.ws.rs.Application</param-name>
      <param-value>com.sun.jersey.MyWebApplication</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:51:08.400

您可以使用 Jersey 并使用注释`@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})`。您还需要在应用程序中为 POJO 添加映射功能。文件中的`web.xml`包含将是

```
<filter>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
</filter> 
```

其他配置是必要的，但这都在文档[http://jersey.java.net/nonav/documentation/latest/user-guide.html](http://jersey.java.net/nonav/documentation/latest/user-guide.html)

# c - 命名管道和分叉令人头疼

> ID：14651997
> 
> 赞同：1
> 
> 时间：2013-02-01T17:42:03.263
> 
> 标签：c, fork, fifo

我需要编写具有这样结构的程序：

父母制作先进先出，然后`fork()`

*   孩子 1 从标准输入读取消息并将其写入命名管道 (FIFO)
*   然后在父进程中我需要创建管道（未命名）和另一个`fork()`
*   子编号 2 从 FIFO 中读取，计算消息长度并通过管道（未命名）将编号发送给父级。

我用一个叉子创建了一个简单的程序，孩子可以与父母交流：

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>

#define FIFO "/tmp/my_fifo"

int main()
{
pid_t fork_result;
int pipe_fd;
int res;
char writer[3];
char reader[3];

res = mkfifo(FIFO,0777);
if (res == 0)
{
    printf("FIFO created!\n");

    fork_result = fork();
    if (fork_result == -1)
    {
        fprintf(stderr, "fork error");
        exit(EXIT_FAILURE);
    }       
    if (fork_result == 0)
    {
        printf("CHILD 1\n");
        pipe_fd = open(FIFO, O_WRONLY | O_NONBLOCK);
        scanf("%s", writer);
        res = write(pipe_fd,writer,3);
        if (res == -1)
        {
            fprintf(stderr,"error writing fifo\n");
            exit(EXIT_FAILURE);
        } 
        (void)close(pipe_fd);
        exit(EXIT_SUCCESS);
    }
    else
    {
        printf("PARENT\n");
        pipe_fd = open(FIFO, O_RDONLY);
        res = read(pipe_fd, reader, 3);
        printf("reader: 0: %c\n",reader[0]);
        printf("reader: 1: %c\n",reader[1]);
        printf("reader: 2: %c\n",reader[2]);
        (void)close(res);
    }         
}
else
{
    printf("deleting fifo... run program again!\n");
    unlink(FIFO);
}
exit(EXIT_SUCCESS);
} 
```

它运行良好。所以我创建了具有上述架构的代码：

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>

#define FIFO "/tmp/my_fifo"

int main()
{
pid_t fork_result;
pid_t fork_result2;
int pipe_fd;
int res;
char writer[3];
char reader[3];

res = mkfifo(FIFO,0777);
if (res == 0)
{
    printf("FIFO created!\n");
    fork_result = fork();

    if (fork_result == -1)
    {
        fprintf(stderr, "fork error");
        exit(EXIT_FAILURE);
    }     

    if (fork_result == 0)
    {
        printf("CHILD 1\n");
        pipe_fd = open(FIFO, O_WRONLY | O_NONBLOCK);
        scanf("%s", writer);
        res = write(pipe_fd,writer,3);
        if (res == -1)
        {
            fprintf(stderr,"error writing to fifo\n");
            exit(EXIT_FAILURE);
        } 
        (void)close(pipe_fd);
    exit(EXIT_SUCCESS);
    }
    else
    {
        printf("PARENt 1\n");
        //don't forget pipe!

        fork_result = fork();
        pipe_fd = open(FIFO, O_RDONLY);
        if (fork_result == 0)
        {
           printf("CHILD 2\n");
           res = read(pipe_fd, reader, 3);
           printf("Odczytano: 0: %c\n",reader[0]);
           printf("Odczytano: 1: %c\n",reader[1]);
           printf("Odczytano: 2: %c\n",reader[2]);
           (void)close(res);
        } 
    }         
}
else
{
    printf("deleting fifo\n");
    unlink(FIFO);
}
exit(EXIT_SUCCESS);
} 
```

运行顺序是这样的：

```
PARENT 1
CHILD 1
CHILD 2 
```

因此，在父 1 中，我打开 FIFO 进行读取，在子 1 中，我正在写入 FIFO，而子 2 应该读取它。我的意思是在代码中，因为当我运行它时，我什至无法向 FIFO 写入任何内容。`scanf("%s", writer);`在第一个程序中工作的块中。

我使用`open()`正确吗？我需要在`getpid()`某个地方使用吗？为什么当我尝试写入 fifo 时它会阻塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:03:27.197

The problem is that CHILD1 is opening the fifo with `O_NONBLOCK`, which will fail (with `EWOULDBLOCK` or `EAGAIN`) if no other process has the fifo open for reading. Now in the first program, the parent continues running after the fork and opens the fifo for reading before the child gets going and opens the write end, so it works. But in the second case, the parent does an extra fork first, which slows it down just enough that CHILD1 gets to its open command before PARENT or CHILD2 has opened the fifo for reading, so the CHILD1 open fails.

Get rid of the `O_NONBLOCK` and it works just fine (though you do open the fifo for reading in both PARENT and CHILD2, which is probably not what you want).

如果你想从键盘上阅读，你还有另一个问题。如果您从 shell 运行此命令，PARENT 将立即退出（或多或少），因此 shell 将返回从键盘读取命令，这意味着 CHILD1 和 shell 将争夺输入。另一方面，如果你做你最初描述的事情并让 PARENT 等待从 CHILD2 的管道读取，它应该做你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:03:07.730

Isn't it because you use twice the same variable fork_result? As you created another variable fork_result2, which you don't use, it is probably unintended.

I don't know if this will solve your problem, but at least using fork_result2 at the second fork would make it easier to understand...

# google-app-engine - 未使用 Objectify 和 GAE 保存的对象

> ID：14651998
> 
> 赞同：8
> 
> 时间：2013-02-01T17:42:09.010
> 
> 标签：google-app-engine, loading, objectify

我正在尝试保存一个对象并验证它是否在之后立即保存，并且它似乎没有工作。

这是我的对象

```
import com.googlecode.objectify.annotation.Entity;
import com.googlecode.objectify.annotation.Id;

@Entity
public class PlayerGroup {
    @Id public String n;//sharks
    public ArrayList<String> m;//members [39393,23932932,3223]

} 
```

这是保存然后尝试立即加载的代码。

```
 playerGroup = new PlayerGroup();
        playerGroup.n = reqPlayerGroup.n;
        playerGroup.m = reqPlayerGroup.m;
        ofy().save().entity(playerGroup).now();
        response.i = playerGroup;
        PlayerGroup newOne = ofy().load().type(PlayerGroup.class).id(reqPlayerGroup.n).get(); 
```

但“newOne”对象为空。即使我刚刚完成保存它。我究竟做错了什么？

--更新-- 如果我稍后尝试（比如几分钟后），有时我确实会看到该对象，但不是在保存之后。这是否与高复制存储有关？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T19:06:58.037

前段时间有同样的行为，并在谷歌群组上提出了一个问题 - 客观化

**这是我得到的答案：**

```
You are seeing the eventual consistency of the High-Replication 
Datastore.  There has been a lot of discussion of this exact subject 
on the Objecify list in google groups , including several links to the 
Google documentation on the subject. 

Basically, any kind of query which does not include an ancestor() may 
return results from a stale view of the datastore. 

Jeff 
```

**我也得到了另一个很好的答案来处理这种行为**

> 对于删除，查询键，然后批量获取实体。确保您的获取设置为强一致性（尽管我相信这是默认设置）。batch-get 应该为已删除的实体返回 null。添加时，它变得有点棘手。索引更新可能需要几秒钟。AFAIK，有三种方法可以解决这个问题：1；使用预先计算的结果（完全避免查询）。如果您的下一个视图是用户最近创建的实体，请在用户实体中保留这些键的列表，并在创建新实体时更新该列表。该列表将始终是新鲜的，无需查询。除了避免过时的索引之外，这还可以加快您的应用程序。您可以可靠地管理的结果集越多，您可以避免的查询就越多。
> 
> 2；通过使用最近添加的实体“增强”查询结果来隐藏延迟。根据您添加实体的速度，要么仅注入最新的密钥，要么将其与[1](https://groups.google.com/forum/?fromgroups=#!searchin/objectify-appengine/Daniel/objectify-appengine/icuSeIt97Wg/s7lxSiviL30J)中的解决方案结合使用。
> 
> 3；在登陆基于查询的视图之前，通过让用户浏览一些未受影响的视图来隐藏延迟。这个策略肯定有味道。您需要确保这些额外的步骤与用户相关，否则您将获得糟糕的体验。
> 
> 蝴蝶，乔金

你可以在这里阅读所有内容：

[如果我在删除一个对象后不使用异步 api，我仍然会在删除后立即完成的查询中得到它，或者在我添加一个对象后没有立即得到它](https://groups.google.com/forum/?fromgroups=#!searchin/objectify-appengine/Daniel/objectify-appengine/icuSeIt97Wg/s7lxSiviL30J)

* * *

**类似问题的另一个好答案**：[Objectify does not store synchronously, even with now](https://stackoverflow.com/a/14003248/617373)