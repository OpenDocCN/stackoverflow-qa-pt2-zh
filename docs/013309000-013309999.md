# StackOverflow 问答 13309000-13309999

# c# - 如何在其他机器上为 COM 互操作注册 DLL？

> ID：13309000
> 
> 赞同：0
> 
> 时间：2012-11-09T13:29:06.353
> 
> 标签：c#, .net, com, interop, regasm

我在 C# 中创建了一个带有 2 个引用库的 ActiveX 库，并将其注册为 COM 互操作，并使用 Visual Studio 的强名称密钥对其进行签名。它工作正常，但现在我想在另一台计算机上注册它。我使用 regasm 和 /codebase 来注册 DLL，但是当我尝试实例化 ActiveX 对象时，调试器会抛出错误：自动化服务器无法创建对象。我已经将 Internet Explorer 配置为允许初始化未标记为可安全执行脚本的控件，但它没有帮助。

# java - JList 内容未更新

> ID：13309003
> 
> 赞同：0
> 
> 时间：2012-11-09T13:29:17.163
> 
> 标签：java, swing, jlist

我有一个名为 jListCustSearchResults 的 jList 对象，它包含许多 CustomerEntity 对象并将它们显示为用户选择客户的列表。

下面的第一个方法是一个 JButton 的 actionperformed 方法，它在单击时触发此 JList 的更新序列。它调用下面名为 fillCustomerList 的另一个函数，用从数据库中检索到的新客户重新填充 JList 对象。

这里的问题是提到的 jList 对象没有在 gui 中更新。相反，它完全是空的。作为替代解决方案，我将 refillCustomerList 方法放入 SwingWorker 对象的 doBackground 方法中，以便在 EDT 中不会发生更新。但是，jLIst 仍未使用 GUI 上的新内容进行更新。为什么你认为它没有更新？

在此消息的底部，我放置了我的实现的 SwingWorker 变体。jList 仍未在 gui 中更新（我还调用了 repaint()）。

```
private void jTextFieldCustomerSearchWordActionPerformed(ActionEvent evt) {                                                             
    int filterType = jComboBoxSearchType.getSelectedIndex() + 1;
    String filterWord = jTextFieldCustomerSearchWord.getText();

    try {
        controller.repopulateCustomerListByFilterCriteria(filterType, filterWord);
    } catch (ApplicationException ex) {
        Helper.processExceptionLog(ex, true);
    }

    refillCustomerList();
}                                                            

private void refillCustomerList() {
    if (jListCustSearchResults.getModel().getSize() != 0) {
        jListCustSearchResults.removeAll();
    }

    jListCustSearchResults.setModel(new javax.swing.AbstractListModel() {
        List<CustomerEntity> customerList = controller.getCustomerList();

        @Override
        public int getSize() {
            return customerList.size();
        }

        @Override
        public Object getElementAt(int i) {
            return customerList.get(i);
        }
    });

    jListCustSearchResults.setSelectedIndex(0);
} 
```

===========================

# 使用 SWING WORKER 变体：

```
private void jTextFieldCustomerSearchWordActionPerformed(ActionEvent evt)   {

    SwingWorker worker = new SwingWorker<Void, Void>() {
        @Override
        public void done() {
            repaint();
        }

        @Override
        protected Void doInBackground() throws Exception {
            int filterType = jComboBoxSearchType.getSelectedIndex() + 1;
            String filterWord = jTextFieldCustomerSearchWord.getText();

            try {
                controller.repopulateCustomerListByFilterCriteria(filterType, filterWord);
            } catch (ApplicationException ex) {
                Helper.processExceptionLog(ex, true);
            }

            refillCustomerList();
            return null;
           }
    };

    worker.execute();
} 
```

# javascript - 如何通过单击 HTML 按钮执行 JavaScript 函数？

> ID：13309005
> 
> 赞同：-1
> 
> 时间：2012-11-09T13:29:24.183
> 
> 标签：javascript, html, button, variable-assignment

我正在尝试编写一小段 html 代码，给定两个初始数量，尝试找到大于或等于第一个完全除第二个给定数量的数字。代码尝试除法，如果不成功，将第一个数字加 1 并尝试再次除法，等等...

我希望代码返回完全除以第二个数字的值和除法的答案（周围出现一些纯文本）。

除此之外，或者至少我想要的是，在单击 5 个不同按钮中的一个时，对第一个给定数字执行乘法运算，它被四舍五入到最接近的整数，然后函数尝试把它分成第二个给定的数字。

如果不向您展示我到目前为止的代码，很难准确地解释我想要什么，所以这里是：

* * *

```
<html>

<head>

<b>Rounded Commodity Pricing:</b><br>

<script language="Javascript">

function finddivid(marketprice,tradevalue) { 

var KWDex = 0.281955
var GBPex = 0.625907
var USDex = 1
var CADex = 0.998727
var EURex = 0.784594

if 
  (currency == "KWD") 
  var currencyMarketprice = Math.ceil(marketprice*KWDex)
else if
  (currency == "GBP")
  var currencyMarketprice = Math.ceil(marketprice*GBPex)
else if 
  (currency == "USD") 
  var currencyMarketprice = Math.ceil(marketprice*USDex)
else if 
  (currency == "CAD") 
  var currencyMarketprice = Math.ceil(marketprice*CADex)
else if 
  (currency == "EUR") 
  var currencyMarketprice = Math.ceil(marketprice*EURex)

if (tradevalue % currencyMarketprice == 0)
  return ("tonnage = " + tradevalue / currencyMarketprice + " mt, and price = " + currencyMarketprice +" " +currency +" per mt");
else
  {for (var counter = currencyMarketprice+1; counter<(currencyMarketprice*2); counter++) {
   if (tradevalue % counter == 0)
     return ("tonnage = " + tradevalue / counter + " mt, and price = " + counter +" " +currency +" per mt");}}};

</script>

</head>

<p>Select currency:
<input type="button" value="KWD" OnClick="var currency = KWD">
<input type="button" value="USD" OnClick="var currency = USD">
<input type="button" value="GBP" OnClick="var currency = GBP">
<input type="button" value="EUR" OnClick="var currency = EUR">
<input type="button" value="CAD" OnClick="var currency = CAD">

<P>Enter today's price of commodity in USD: <input name="mktprc" input type="number"><br><p>
<P>Enter value of trade: <input name="trdval" input type="number">

<input type="button" value="Calculate" OnClick="showMeArea.value=finddivid(mktprc,trdval);">

<p>
<br><br>

<input name="showMeArea" readonly="true" size="30">

</html> 
```

* * *

如果您在浏览器中运行此 html，您应该会看到我想要实现的目标。

它远未完成，但以下是我需要帮助的主要问题/功能：

1.  我希望能够单击“货币”按钮之一，以便在单击时分配变量“货币”，然后在函数 finddivid 中使用。

（2。这现在不那么重要，但最终，一旦它起作用，我希望它在单击其中一个货币按钮时改变颜色，或突出显示或让用户知道哪个他们使用的货币汇率。）

1.  在两个框中输入数字后，我想单击“计算”并将我在函数中编写的内容返回到代码末尾的“showMeArea”只读框中。

我知道我可能缺少很多东西，我可能距离成功还有很远，但我对编程很陌生（4 天前开始！）所以希望能提供任何类似的帮助。

在此先感谢您的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:40:32.680

第一个请求要求您将货币放入实际脚本中，我建议使用 setter 函数：

```
<script language="Javascript">

var currency;   // you might want to set this at a default just in case

function setCurrency(val) { currency = val; }    // Setter function

function finddivid(marketprice,tradevalue) { 
```

然后在您的按钮单击中调用它：

```
<input type="button" value="KWD" onClick="setCurrency('KWD');"> 
```

至于第二个请求，我想说你的概念已经足够好了，但是你没有完全正确的方法。首先，您的输入需要一个 id 属性：

```
<input name="mktprc" id="mktprc" input type="number">
<input name="trdval" id="trdval" input type="number"> 
```

name 属性用于发布值，id 属性由 javascript 用于查找页面中的元素。使用 jQuery 可以轻松检索这些元素，但我将展示 jQuery 和标准 JavaScript 方法来执行此操作：

jQuery：

```
<input type="button" value="Calculate" OnClick="$('#showMeArea').val(finddivid($('#mktprc'),$(#'trdval')));"> 
```

选择`$('#id')`一个元素。该方法`.val()`设置值。
*jQuery 纯粹主义者的注意事项：是的，有更好/更复杂的方法可以用 jQuery 完成此任务，但这个答案是针对我对 OP 的 JavaScript 功能的看法。*

标准Javascript：

```
<input type="button" value="Calculate" OnClick="document.getElementById('showMeArea').value = finddivid(document.getElementById('mktprc'),document.getElementById('trdval'));"> 
```

# curl - Mac OS X 命令行中的 curl -k HTTPS url 给出空响应

> ID：13309008
> 
> 赞同：0
> 
> 时间：2012-11-09T13:29:33.037
> 
> 标签：curl, https

我一直在尝试使用带有 HTTPS 网址的 curl 从远程服务器获取响应。

```
curl -k https://mymoviezone.com/verfiy -d un="zeus@gmail.com" -d pwd="goohoo" -d apiver="2.9" 
```

但它给出了空响应，我的服务器没有使用有效的证书，所以我添加了 "-k" ，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:00:35.760

这里有很多问题需要解决：

## 检查 DNS

```
dig mymoviezone.com 
```

我使用了 dig，果然您的网站将（A 记录）解析为 IP 地址。

## 只是在没有 SSL 的浏览器中尝试

```
http://mymoviezone.com 
```

重定向到：

```
http://bennettbizz.com 
```

可疑的。

## 试图查看 SSL 协商是否有效

```
openssl s_client -connect mymoviezone.com:443 
```

没有反应。让我们尝试连接一个简单的套接字。

## 尝试使用 netcat 连接到端口 443 (SSL)

```
nc mymoviezone.com 443 
```

这永远不会连接。所以...

## 结论

端口 443 上没有运行服务器，配置不正确，DNS 指向错误的服务器，或者防火墙阻止了连接。问题不在于卷曲。

# javascript - 更改 HTML5 画布中形状的颜色

> ID：13309009
> 
> 赞同：0
> 
> 时间：2012-11-09T13:29:33.520
> 
> 标签：javascript, html, canvas, polygon

我正在用 html5 显示交互式地图。

我已经将地图区域创建为数字数组（代表坐标），例如：

```
Zone1=[{x=3,y=4}, {x=8,y=5}] 
```

我还创建了一个地图，它是一个区域数组，例如：

```
map=[zone1, zone2....] 
```

我使用函数在画布中绘制区域没有问题`context.lineTo()`，就像我能够在单击时捕获鼠标位置并使用多边形算法中的点确定用户单击了哪个区域一样。

当我想在单击区域时填充区域的颜色时，我的困难就出现了。

有人有想法吗？

PS：

*   我做的形状不规则
*   我不喜欢使用 jQuery 之类的 JavaScript 库或其他任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:08:18.170

HTML5 Canvas 不知道您可以操作的对象形状的概念。在您的情况下，您有两种选择：

*   使用 SVG 绘制你需要的东西（查看[W3Schools 上的](http://www.w3schools.com/svg/svg_examples.asp)[示例](http://www.w3schools.com/svg/tryit.asp?filename=trysvg_animate2) ）
*   使用一些添加抽象的 JS 画布库来提供形状的概念（查看[EasleJS](http://www.createjs.com/#!/EaselJS)）
*   在画布上编写自己的抽象以提供形状

但是，您应该知道，即使有了这样的库，“形状”也会被完全重绘。可能会重新绘制整个场景。SVG 缓解了这一点，它的性能随着形状/对象数量的增加而降低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:38:13.353

你不能。您创建的形状一旦添加到画布上就不是变量或以任何方式可引用的。您可以在旧颜色上用新颜色重新绘制形状，但我认为最好的办法是使用库来为您处理。

由于我自己使用过，我自己的建议是 Kinetic.js，但有很多可供选择。

# javascript - 如何使用 D3 做一个类似于 GitHub 的时间线图？

> ID：13309010
> 
> 赞同：3
> 
> 时间：2012-11-09T13:29:42.397
> 
> 标签：javascript, d3.js, timeline, brush

GitHub 使用 D3 库作为其图表，但我找不到任何类似于 GitHub 处理时间线的示例。

GitHub 允许用户在图表中选择特定的时间段，然后显示特定于该时间段的数据。

D3的“周期选择”（“刷子”）的任何例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:42:53.987

我找到了我正在寻找的示例：

[http://bl.ocks.org/1667367](http://bl.ocks.org/1667367)

# css - CSS 文件 IE firefox chrome

> ID：13309011
> 
> 赞同：0
> 
> 时间：2012-11-09T13:29:47.917
> 
> 标签：css

在我的 css 文件中，我有以下代码，并希望将其应用于我的表格的标题

```
 caption 
 {
 color:green;
 font-style:bold;
 } 
```

我的 html 文件

```
<html> <head>

<link href="mystyles.css" rel="stylesheet" type="text/css" />

<title>Home Page - My Schedule</title> </head> <body>

<center> <h2>write your name here...</h2> 

<a href="index.html">Home Page</a>  <a href="CV.html">My CV</a>  <a href="Schedule.html">My Schedule</a>  <a href="Icourses.html">My Courses</a>  <a href="Banner.html">Banner</a> <a href="Links.html">Links</a> <a href="Frames.html">Frames</a>

<br/> <table border="1" width="800" height="300" align="center"> <caption><h3>My Schedule</h3></caption>

<br/> <thead> <tr align="center"> <td><img src="img3.jpg" alt="" width="200" height="280"></td> <td colspan="4"><center><h4>write your name here - level 4</h4> </td> </tr> </thead> <tr align="center"> <td>1</td> <td>Web Design</td> <td bgcolor="#C0C0C0" >Off</td> <td colspan="2">management</td> </tr> <tr align="center"> <td>2</td> <td>management</td> <td bgcolor="#C0C0C0" colspan="3">Off</td> </tr> <tr align="center"> <td>3</td> <td bgcolor="#C0C0C0">Off</td> <td >management</td> <td colspan="3">management</td> </tr> <tr align="center"> <td>4</td> <td>Web Design</td> <td>management</td> <td>math</td> <td bgcolor="#C0C0C0">Off</td> </tr> <tr align="center"> <td>5</td> <td bgcolor="#C0C0C0" colspan="4">Off</td> </tr> </table> 

<a href="index.html">Go Back</a>  </center> </body> </html> 
```

但问题是代码在 IE 上运行良好，但在 Firefox 和 Chrome 上无法运行。我试图清除缓存但没有任何帮助。

其次，我的网站位于以下路径

```
C:\Users\user\Desktop\My Website 
```

和我的css文件在以下路径

```
C:\Users\user\Desktop\My Website\styles 
```

当它在这个子文件夹中时，我无法链接 css 文件

我尝试了以下代码

```
<link href="../mystyles.css" rel="stylesheet" type="text/css" /> 
<link href="../styles/mystyles.css" rel="stylesheet" type="text/css" /> 
```

但不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:33:22.773

代替

```
<link href="mystyles.css" rel="stylesheet" type="text/css" /> 
```

和

```
<link href="styles/mystyles.css" rel="stylesheet" type="text/css"> 
```

您还没有告诉您的 HTML 文件该`mystyles.css`文件在`styles`文件夹中。

**仅供参考**..

`<link href="../mystyles.css" rel="stylesheet" type="text/css" />`

将会`C:\Users\user\Desktop\mystles.css`

和

`<link href="../styles/mystyles.css" rel="stylesheet" type="text/css" />`

将会`C:\Users\user\Desktop\styles\mystles.css`

# linux - zip 瘪了 0% ? 为什么不压缩？

> ID：13309012
> 
> 赞同：14
> 
> 时间：2012-11-09T13:29:54.230
> 
> 标签：linux, unix, compression, zip, command

我正在尝试压缩包含 4 个大文件的文件夹的内容，非常非常相似。所以我希望尺寸会减小。

这是我在 linux/fedora 上使用的命令：

```
zip -9 myarchive.zip -r myfolder -P mypassword 
```

我得到回应：

```
adding: myfolder/ (stored 0%)
adding: myfolder/Program1.exe (deflated 0%)
adding: myfolder/Program2.exe (deflated 0%)
adding: myfolder/Program3.exe (deflated 0%)
adding: myfolder/Program4.exe (deflated 0%) 
```

然后我得到存档，它与我的原始文件夹大小大致相同。

似乎根本没有发生压缩。为什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T13:52:34.613

与`tar`+不同`gzip`，`zip`它为每个文件使用一个新的压缩表，因此即使四个文件相同，它也会尝试单独压缩每个文件。

从技术上讲，`tar`也可以看到每个文件，但它将它们串在一起形成一个长输入`gzip`，因此压缩步骤适用于一个巨大的输入，这就是为什么`tar`+`gzip`通常产生的结果小于`zip`.

问题是为什么您的`exe`文件无法压缩。`exe`文件通常包含大量易于压缩的数据，因此它们应缩小（“放气”）至少 30%。也许文件被加密或混淆了；这些过程使结果难以压缩。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T15:51:43.427

Deflated 0% 表示它确实尝试压缩，但实际上没有压缩。如前所述，zip 格式不能利用不同条目之间的相似性。tar + gzip 可以，但即便如此，前提是相似之处最终彼此相距不到 32K 字节。其他格式可以利用更长距离的相似性，例如 xz。

未压缩的可执行文件压缩 30% 到 50% 是正常的，这意味着您的可执行文件要么是 a) 由类似[UPX](http://upx.sourceforge.net/)的东西压缩，b) 它们是自解压压缩数据，其中解压缩器存储在压缩数据之前, c) 它们是非常短的可执行文件，包含大量压缩数据，或者 d) 它们大多是加密的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T14:03:41.507

亚伦是对的。根据`Wikipedia`，`ZIP`格式在归档之前会压缩，因此不同文件之间的相似性无助于压缩。

您真的要压缩`.exe`文件吗？不知何故，我怀疑那是您的实际文件类型。

请参阅[http://en.wikipedia.org/wiki/ZIP_(file_format)#Advantages_and_disadvantages](http://en.wikipedia.org/wiki/ZIP_(file_format)#Advantages_and_disadvantages)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T13:35:03.920

有些文件不能被压缩，特别是当它们的熵很高时。当字节的统计分布是均匀的（例如，当字节 0 出现的频率与字节 1 和字节 2 一样...）时，就会发生这种情况。这发生在已经压缩的内容上。一些视频或音频格式属于该类别。

# c++ - 我可以在只支持 2.1 的卡中编程 OpenGL4+ 吗？

> ID：13309014
> 
> 赞同：3
> 
> 时间：2012-11-09T13:29:57.100
> 
> 标签：c++, c, opengl

这是我拥有的 OpenGL 版本：

```
Video Card Vendor:    Intel
Renderer:             Intel(R) HD Graphics
OpenGL Version:       2.1.0 - Build 8.15.10.2622
GLU Version:          1.2.2.0 Microsoft Corporation 
```

我想学习最新的 OpenGL API。但是我的卡只支持 2.1（我不能更新）。即使没有卡支持，是否可以使用最新的 API 进行编程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:36:04.417

这更多地与驱动程序支持的版本有关。尝试更新您的驱动程序，看看它是否支持较新的版本。否则我担心你会被那个版本卡住，你无能为力！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:06:28.607

AshleysBrain 的回答并不完全正确。您可以使用 OpenGL 的软件实现，例如[Mesa3D](http://www.mesa3d.org/)，它可以使用 CPU 而不是 GPU 执行更新的代码。它会更慢，但允许您~~针对它编译和运行您的 4+ 代码~~OpenGL 3.1 代码。

编辑：刚刚检查，似乎 Mesa 只支持 OpenGL 3.1。仍然; 这是相当不错的免费。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:00:23.533

~~寄钱/时间[Mesa 的](http://www.mesa3d.org/)方式，希望他们能很快在他们的软件光栅化器中支持 GL4。~~

~~或者纠缠[Khronos](http://www.khronos.org/opengl)以获得参考实现。~~

[从 Mesa 20.2 开始`llvmpipe`支持 OpenGL 4.5](https://gitlab.freedesktop.org/mesa/mesa/-/blob/mesa-20.2.0/docs/features.txt#L213)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:49:26.030

Intel(R) HD Graphics 通常是板载的。所以不，你不能使用 GPU 加速的 OpenGL 4.2。你需要像 Nvidia 那样的专用卡。我在专用卡上看到的 OpenGL 的最高版本是 3.1，它仍然可以提供修复了支持着色器的管道 API。但是 OpenGL 4.2 完全删除了所有这些，并使用可编程的做事方式，这也需要可编程的硬件。

# sharepoint - 在不同的 sharepoint 2007 服务器上恢复 sharepoint 2007 网站

> ID：13309015
> 
> 赞同：1
> 
> 时间：2012-11-09T13:30:00.377
> 
> 标签：sharepoint, sharepoint-2007, moss

我想更新现有的生产 moss2007 网站，为此我想在我的开发环境中创建这个网站（vhd win 2003EE，MOSS 2007 试用版）。

我得到：

1.  一些 stp 文件，其中包括（aspx 页面、javascript 文件等...）
2.  一些 aspx 页面、母版页、css 文件
3.  一些 wsp 文件
4.  几乎所有 wsp 文件的源代码。

没有文档说明如何安装所有这些东西，实际上我不是共享点开发人员，而是 Asp.net 开发人员。

[我设置了本地开发环境（我在关注http://www.pptspaces.com/sharepointreporterblog/Lists/Posts/Post.aspx?ID=28](http://www.pptspaces.com/sharepointreporterblog/Lists/Posts/Post.aspx?ID=28)时没有问题 ）并尝试根据给定文件创建网站。

我的问题：

1.  我需要数据库的副本吗？
2.  我注意到其中一个 wsp 文件不是 Web 部件，而是包含一些 Web 控件甚至母版页的项目） - 我应该如何处理它？
3.  我试图导入所有 stp 文件。我不得不使用 stsadm，但我看不到它们。我可以使用“stsadm -o enumtemplates”列出它们——它们都具有相同的 ID！我更改了 stp->cab->修改了 manifest.xml 中的“WebUrl”-> 创建了新的 cab 并将其重命名为 stp-> 导入到 sharepoint 但仍然相同，我看不到它们（自定义选项卡仍然没有可见的）。我在本地创建了一个自定义站点模板（自定义选项卡随之出现）并打开了它的 manifest.xml。我注意到该部分包含 17 个参数（来自其他 stp 文件的 manifest.xml 文件只有 9 个参数）。我认为我的 SharePoint（试用版）以不同的方式工作，这就是问题所在。是真的吗？
4.  在本地创建此站点的最佳方式是什么？

提前感谢所有答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:00:14.803

如果要设置包含与生产服务器相同功能的开发环境，可以通过以下方式复制生产网站集：

1.  将生产 SharePoint 内容数据库复制并附加到您的开发环境场
2.  通过 stsadm 工具备份和恢复

首先你需要准备你的开发环境。如果您在生产场上部署了任何 wsp 解决方案，请将其部署在您的开发环境中。然后，如果您更喜欢第一个选项，请检查[此链接](http://blah.winsmarts.com/2006-12-Backup-Restore_a_site_collection_in_SharePoint_2007.aspx) 如果您更喜欢第二个选项，请检查[此链接](http://geekswithblogs.net/WorldofTray/archive/2010/02/23/how-to-connect-to-a-restored-content-database-in-sharepoint.aspx)

但是，如果您更喜欢备份方式，您可能会发现生产和开发版本之间存在版本差异、安装的更新不同、GAC 中的程序集不同等问题。所以我建议使用附加数据库的方式，如果附加的数据库有不同的版本，它应该自动升级。只需谷歌一点，您可能会找到更完整的附加或恢复网站集的指南。我只是给你一个起点。

# html - CSS中的边距不起作用

> ID：13309016
> 
> 赞同：0
> 
> 时间：2012-11-09T13:30:03.110
> 
> 标签：html, css

我有表格，我想把它放在页面中间。如果我将 align 属性设置为 center，它可以工作，但我想用 CSS 来做到这一点。这是我的CSS：

```
center vorder, td
{
  border-color:Blue;
  border-style:double;
  color:#8A2BE2F;
  margin-left:auto;
  margin-left:auto;
  margin-right:auto;

} 
```

这是我的表格代码：

```
<table class="center vorder" >
<tr><td colspan="4">mittige Tabelle</td></tr>
<tr><td>Element 0 0</td><td>Element 0 1</td><td>Element 0 2</td><td>Element 0 3</td></tr>
<tr><td>Element 1 0</td><td>Element 1 1</td><td>Element 1 2</td><td>Element 1 3</td></tr>
<tr><td>Element 2 0</td><td>Element 2 1</td><td>Element 2 2</td><td>Element 2 3</td></tr>
</table> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:34:49.120

您的 CSS 语法已关闭。

```
table.center
{
  margin-left:auto;
  margin-right:auto;

}

td {
  border-color:Blue;
  border-style:double;
  color:#8A2BE2F;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T13:34:20.460

您缺少语法，需要在类前加上“。”

```
.center.vorder, td
{} 
```

请参阅工作修复[http://jsbin.com/azoxes/1/edit](http://jsbin.com/azoxes/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T13:38:36.207

你应该`.`在 CSS 中使用类：

```
.center.vorder
{
  border-color: blue;
  border-style: double;
  color: #8A2BE2F;
  margin: 0 auto;
} 
```

如果你想让 td 的文本居中，你应该使用这个：

```
td
{
    text-align: center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:36:46.160

从该代码中，您的 css 甚至没有被使用。它应该是这样的：

`.center.vorder, td`

或者

`.center.vorder td`

...取决于您要定位的目标。

你也有`margin-left: auto`两次，所以删除一个。您可以像这样在一行中执行此操作：

`margin: 0 auto;`

# java - 为 android 实现 4g 切换（仅限私人）

> ID：13309018
> 
> 赞同：2
> 
> 时间：2012-11-09T13:30:06.353
> 
> 标签：java, android, reflection, rooted-device, lte

我正在构建一个需要切换网络模式的应用程序，例如从 4g 切换到 3g，以模拟 MSC 间切换。由于此应用程序将仅是私有的，并且设备已植根，因此我愿意接受任何想法来实现这一点。

我尝试的第一件事是反射。我试图访问实现 CommandsInterface-Interface 的 BaseCommands-Class。但我没有成功。

由于设备已植根并且应用程序永远不会发布，因此我对任何策略/想法都很好，即使是直接操作 Systems.Properties 或其他类似的东西。

希望你们中的一些人有一些好主意：>

# google-apps-script - /dev 和 /exec + 管理版本之间的差异

> ID：13309029
> 
> 赞同：4
> 
> 时间：2012-11-09T13:31:00.933
> 
> 标签：google-apps-script, deployment, web-applications

我有几个关于脚本发布版本的问题。

1.  脚本`/exec`和版本之间的详细区别是什么？`/dev`
2.  如果我保存脚本的一个版本，然后发布它，然后对代码进行一些更改，会发生什么：
    *   `/exec`如果我在进行这些更改之前不创建下一个版本，它们会影响已发布脚本的版本吗？
3.  我有一个已发布的脚本版本，然后我发布了另一个新版本的脚本，然后我对代码进行了一些更改，但它们似乎也影响了最旧的发布版本，这可能还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:52:35.017

一个。/exec 点是您的应用程序当前部署的“生产”版本。这将指向 File -> Manage Versions 下的命名版本。这样，您可以在拍摄版本并发布后继续测试，而不会破坏任何人。/dev 指向代码的最新副本...您不必保存版本来测试任何更改。您只能发布一个版本的应用程序。

![当前发布的版本](../Images/59be5f9c52a5113e4a9558ccbae01ebc.png)

湾。根据以上几点，您在未发布该版本的情况下所做的任何更改（您必须先保存新版本）都不会影响 /exec。但这会立即出现在 /dev

C。我不明白这一点 - 你是什么意思“似乎也影响最旧的发布版本”？您无法访问最旧的已发布版本。只有一个已发布版本 (/exec) 和代码的当前状态 (/dev)。

# javascript - 确认消息字符串中的换行介绍

> ID：13309033
> 
> 赞同：0
> 
> 时间：2012-11-09T13:31:07.193
> 
> 标签：javascript

我有一个确认弹出对话框，我在其中传递了一个以逗号分隔的字符串的变量。

如何替换逗号并引入换行符？

我尝试使用替换。我尝试`'\n'`从后端传递单独的列表。但似乎没有任何工作 - 尽管`confirm()`用于测试目的的正常工作正常。

```
var listcontrol = document.getElementById(id3);
var List = listcontrol.innerText;
var finallist = List.replace("\n", "\n");

if (checkboxCell.checked == false) {
    if (labelCell.innerText == "Yes") {
        confirm("The selected exam is present in the following certifications: " + "\n" + finallist + "\n" +
        "Uplanning this exam here would unplan the same exam under other certification(s) also.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:40:00.943

在您的代码中，您将替换`"\n"`为`"\n"`，这没有什么区别。您想替换`","`为`"\n"`，对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T13:46:05.523

Js替换是，

*`string.replace(searchvalue,newvalue)`*

var finallist = List.replace(/,/g, "\n");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T13:39:40.353

```
var string = "Demetrius Navarro,Tony Plana,Samuel L. Jackson";
alert(string);
alert(string.replace(/,/g, "\n"));​​​​ 
```

现场测试 - [http://jsfiddle.net/9eZS9/](http://jsfiddle.net/9eZS9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:48:00.890

如果您的“弹出对话框”是自定义的基于 html/css 的对话框，那么换行符将被视为（或多或少）与空格字符相同。您需要改用`<br>`元素，因此：

```
var finallist = List.replace(/,/g, "<br>"); 
```

请注意使用正则表达式作为 replace() 的第一个参数 - 这是进行全局替换所必需的。

要在标准中使用，请确认您需要像以前一样使用换行符，但使用正则表达式而不是 replace() 搜索词的字符串：

```
var finallist = List.replace(/,/g, "\n"); 
```

# c# - 将列表中的字符串一一显示到标签中

> ID：13309039
> 
> 赞同：0
> 
> 时间：2012-11-09T13:31:26.887
> 
> 标签：c#, list, loops

我有一个标签。我有一个清单。当我执行“label1.Text = match.Value;”时，它只显示列表的最后一项，而不是每次单击按钮时都会更改的 1 个字符串。代码是：

```
private void frontPageToolStripMenuItem_Click(object sender, EventArgs e)
    {
        const string url = "http://reddit.com/r/pics";
        var source = getSource(url);
        var regex = new Regex([regex removed]);
        var links = new List<string>();
        var titles = new List<string>();

        foreach (Match match in regex.Matches(source))
        {
            links.Add(match.Groups[1].Value);
            titles.Add(match.Groups[2].Value);

        }

        foreach (var title in titles)
        {
            label1.Text = title; /*it just shows the last 'title' in 'titles', I want it to start at the first, and go to the next title every time the event occurs (frontPageToolStripMenuItem_Click)*/ 
        }

    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:34:11.507

您需要在单击事件处理程序之外初始化列表。您可以创建一个`FetchImageData`在程序启动时调用的方法（也许从类的构造函数中调用它）。或者您可以在第一次触发 click 事件时将其称为列表。

```
private int clickCounter = 0;
private List<string> links;
private List<string> titles;

private void FetchImageData()
{
    links = new List<string>();
    titles = new List<string>();

    const string url = "http://reddit.com/r/pics";
    var source = getSource(url);
    var regex = new Regex([regex removed]);

    foreach (Match match in regex.Matches(source))
    {
        links.Add(match.Groups[1].Value);
        titles.Add(match.Groups[2].Value);
    }
} 
```

您还没有说当用户单击的次数超过元素时会发生什么。一种选择是环绕并从头开始。这可以使用`%`运算符来实现。

```
private void frontPageToolStripMenuItem_Click(object sender, EventArgs e)
{
    if (titles == null) { FetchImageData(); }
    label1.Text = titles[clickCounter % titles.Count];
    clickCounter++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:38:00.543

UI 线程没有机会更新标签，因为您的 for 循环位于 UI 线程上。即使您将 for 循环移动到后台线程，您也很有可能只会看到一些闪烁，然后是最后的字符串。只需将字符串附加到文本框或使用 Debug.writeLine 输出它们。这将表明您正在阅读正确的字符串。

要更改标签一次，不要在 for 循环中进行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T11:06:51.407

在第二个**`foreach`**循环中放置**`label1.Text += title;`**而不是**`label1.Text = title;`**然后它会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:39:13.917

1)`titles`应该是全局变量

2) 在表单的构造函数中移动 this

```
 const string url = "http://reddit.com/r/pics";
                var source = getSource(url);
                var regex = new Regex("<a class=\"title \" href=\"(.*?)\" >(.*?)<");

        titles = new List<string>();

                foreach (Match match in regex.Matches(source))
                {
                    links.Add(match.Groups[1].Value);
                    titles.Add(match.Groups[2].Value);

                }
label1.Text = first value of the titles 
```

3）您的事件处理程序应该是这样的：

```
private void frontPageToolStripMenuItem_Click(object sender, EventArgs e)
    {
            label1.Text = next value of the titles variable;

    } 
```

# javascript - 如何制作具有固定标题的兼容可滚动表

> ID：13309042
> 
> 赞同：0
> 
> 时间：2012-11-09T13:31:31.373
> 
> 标签：javascript, jquery, html, css

我需要在下表中修复标题。

```
<thead>
    <tr >

<td>tjj</td>
    <td>Marketing Phjgjgh </td>
<td>Mhjgjg Program Description </td>
    <td>Markjghjghgram type </td>
<td>CRM CjgjgjFlag </td>
<td>Brajghjjative </td>
<td>Marketijhgjhm Brand </td>
<td>Acjhgjting Program </td>

<td>CRMjgjhype</td>
    <td>Sweejghjhkes</td>
<td>Oldgjjgjivity Bypass</td>

</tr>
</thead>

    <tbody>
    <tr class="alternate1">
<td align="center"></td>
<td>EShjgjARDI</td>
<td>eShojghjmports</td>
<td>4 - Datajgjgjg or gjghjCapture</td>
<td>Y</td>
<td>38 jgjhards</td>
<td>00 jghjhporate</td>
<td>jh</td>
<td>jh</td>
<td>jgh</td>
<td>ghjhg</td>
</tr>

---SNIP-just more rows--- 
```

我尝试了许多解决方案，但它们仅适用于某些浏览器。例如，

```
thead tr{
position:relative;
top: expression(offsetParent.scrollTop);
} 
```

并`<meta http-equiv="X-UA-Compatible" content="IE=7,IE=9">`使其仅在 IE 中工作。两表概念也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:34:41.943

你考虑过使用[`jQgrid`](http://www.trirand.com/blog/?page_id=6)吗？我强烈推荐它。它适用于我曾经尝试过的所有浏览器，并添加了重要的功能。

如果您不想这样做，则可能需要采用他们的渲染方法。他们有一个用于标题的表格和另一个用于正文的表格。这种方法的最大障碍是让列与宽度匹配，但他们的方法效果很好，您可以根据需要调整完整结果的大小。

[您可以在这里](http://www.trirand.com/blog/jqgrid/jqgrid.html)看到它的实际效果。

# python - 如何使用 python-oauth2

> ID：13309045
> 
> 赞同：3
> 
> 时间：2012-11-09T13:31:36.480
> 
> 标签：python, installation, oauth-2.0

我安装了 python-oauth2`pip install oauth2`并找到了名为“oauth2”的目录`/usr/lib/python2.7/dist-packages` 但是`from pyoauth2 import Client,AccessToken`说：没有名为 pyoauth2 的模块然后，我更改`pyoauth2`为`oauth2`相同的状态。[我从https://github.com/douban/douban-client](https://github.com/douban/douban-client)下载源代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:07:38.113

我认为您正在安装错误的软件包。尝试使用`pip install pyoauth2`.

`oauth2`是一个不同的包，没有定义`AccessToken`.

行得通，你可以`pip uninstall oauth2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:06:35.737

你过去在使用 pip 时遇到过问题吗？

您是否也尝试过在不指定 Client 和 AccessToken 的情况下简单地导入 oauth2。

我 pip 安装了 oauth2 (windows) 并且没有找到 AccessToken。

另外，您是否在与您称为 pip install 的终端不同的终端中运行 python？您将不得不重新启动python。

最坏的情况，重启你的机器。

这有什么帮助吗？

# javascript - jQuery对话框的beforeclose回调未在关闭时执行

> ID：13309048
> 
> 赞同：2
> 
> 时间：2012-11-09T13:31:39.830
> 
> 标签：javascript, jquery, jquery-ui, callback

我正在尝试在对话框关闭时触发回调，但我无法从开发人员工具/firebug 中对其进行调试。在 beforeclose 标签之后定义的代码永远不会执行：

```
$(".dialog").dialog({
    autoOpen: false,
    modal: true,
    width: 300,
    beforeclose: function(event, ui) 
    {
        // :input select all buttons, selects, textarea, checkbox
        $(':input').removeAttr('checked').removeAttr('selected');
    }
}); 
```

我从控制台没有收到任何错误，我进行了搜索，但似乎没有人遇到同样的问题。

如果需要，我会显示更多代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T13:40:20.070

我不确定它是否区分大小写，但在 API 中它是：

```
beforeClose 
```

资料来源： [API](http://api.jqueryui.com/dialog/#event-beforeClose)

# jquery - 使滚动条滑块从右到左

> ID：13309053
> 
> 赞同：1
> 
> 时间：2012-11-09T13:31:52.557
> 
> 标签：jquery, slide

再会，

第一：我英语说得不太好

我想创建一个从右向左滑动 div 的 schrollbar。

我使用这个滑块：[http ://www.switchonthecode.com/tutorials/using-jquery-slider-to-scroll-a-div](http://www.switchonthecode.com/tutorials/using-jquery-slider-to-scroll-a-div)

我从以下位置设置脚本：

```
 $(document).ready(function(){
  $("#content-slider").slider({
    animate: true,
    change: handleSliderChange,
    slide: handleSliderSlide
  });
}); 
```

至：

```
 $(document).ready(function(){
  $("#content-slider").slider({
    animate: true,
    change: handleSliderChange,
    slide: handleSliderSlide,
    value: 1000
  });
}); 
```

现在 Scrollbar 的 Handler 位于右侧，但 Div 始终位于左侧：

> 德语 = 英语链接 = 左中指 = 中

[http://s1.directupload.net/images/121109/678f8ov8.png](http://s1.directupload.net/images/121109/678f8ov8.png)

我希望 div 从最后一个 div 开始！

你知道我的意思

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:59:48.187

我认为你需要的主要东西在`value`这里

```
 $(document).ready(function(){
   $("#content-slider").slider({
     animate: true,
     change: handleSliderChange,
     slide: handleSliderSlide,
     value: $("#content-scroll").width()
   });
 }); 
```

并初始化已经向右滚动的容器

`$("#content-scroll").animate({scrollLeft: ($("#content-scroll").width()) }, 0);`

可以在此处查看完整的工作示例[http://jsbin.com/onodij/1/edit](http://jsbin.com/onodij/1/edit)

如果这不是您正在寻找的，请在 jsbin 或 jsfiddle 上添加您的代码版本，我会看看它。

# django - 选择 Django v1.4 应用程序进行标记和分类

> ID：13309054
> 
> 赞同：3
> 
> 时间：2012-11-09T13:31:54.617
> 
> 标签：django, taxonomy, tagging, categorization

我正在为 Django 项目寻找标记/分类应用程序。过去我使用过 django-tagging 和 django-taggit。看起来他们没有得到积极的维护。我还看到了其他一些，但它们要么没有维护，要么没有真正达到这两者的功能。

我过去一年从事的那种项目不需要像功能这样的标记，因此我在这个领域脱节。

因此，在开始编写自己的应用程序之前，我想，我会询问强大的 Stackoverflow 社区是否有这些应用程序的任何维护分支，或者是否有其他类似的应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:12:24.553

我已经在不同的项目中使用了这两种方法，也使用了不同的 Django 版本。有一些叉子。例如，对于 django-tagging，[**django-tagging-ng**](https://github.com/svetlyak40wt/django-tagging-ng)提供多语言、同义词和层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:32:45.927

这是你想要的？ [https://github.com/bkjones/django-taxonomy](https://github.com/bkjones/django-taxonomy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:17:18.093

我只想在这里参考 opencomparison 来比较 django 应用程序的包 - [http://django.opencomparison.org/grids/g/tagging/](http://django.opencomparison.org/grids/g/tagging/)

我会选择加入`django-tagging`并添加`django-tagging-ext`。

# ravendb - RavenDb 插入不会立即出现

> ID：13309056
> 
> 赞同：1
> 
> 时间：2012-11-09T13:31:58.933
> 
> 标签：ravendb

一页用户填写在 raven db 中创建记录的表单。然后他们被引导到一个列表页面，其中显示了他们的所有记录。

新项目不会立即出现在列表页面上。尽管按 F5 进行刷新会导致它出现。

这里的乌鸦有问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:38:46.593

这就是 ravendb 的设计方式，您在这里看到的是一个陈旧的索引。当您插入新文档时，与该文档相关的任何索引都需要赶上，此时该索引被归类为过时的。

您可以在 ravendb 网站上阅读更多内容，或者快速搜索一下 google 应该可以为您提供大量阅读内容。

# jquery - jQuery：提交后两秒钟使表单“不可用”？

> ID：13309061
> 
> 赞同：0
> 
> 时间：2012-11-09T13:32:26.043
> 
> 标签：jquery, forms, sleep

我想要做的是当一个表单被发布时，脚本循环遍历具有特定属性的所有输入，如果它是空的，它会将其标记为红色并将文本更改为“此字段是必需的”2 秒，然后它会改变返回默认文本。

每个字段都有字段的标题作为值，直到您单击它，它才会消失。就像一个占位符。

现在发生的是脚本运行良好，但是如果我在显示错误文本的那两秒钟内尝试发布表单，它会提交。我不知道为什么。

这是代码：

```
var isWorkingInputForm = false;

$(document).ready(function() {

    var defFormInputBgColor = null;

    // Warn user if required field is missing when posting form
    $('form').submit(function(e) {

        // Return is form is working
        if(isWorkingInputForm) console.log('is working');
        if(isWorkingInputForm) return false;

        // Halt is true by default.
        var halt = true;

        // Start working. If form is submitted between the start and stop it'll be ignored.
        isWorkingInputForm = true;

        // Nope, it's not working, let's loop through all inputs
        $('.formwrapper *[data-required="true"]').each(function(i, v) {
            console.log('not working');
            var val = $(this).val().trim();
            var defVal = $(this)[0].defaultValue.trim();
            var input = $(this);

            // Store bg color if not already stored
            if(!defFormInputBgColor) {
                defFormInputBgColor = $(this).css('background-color');
            }

            // Check if it's empty (or equal to the default value (placeholder))
            if( val == defVal || !val ) {
                halt = true;
                // Set red background
                $(input).css({
                    'background-color': '#FFDDDE'
                });
                // Show error text
                $(input).val('Det här fältet är obligatoriskt');

                // Wait for two seconds, then show the default text again
                setTimeout(function() {
                    $(input).val(defVal);
                }, 2000);
            } else {
                halt = false;
                $(input).css({
                    'background-color': defFormInputBgColor
                });
            }
        });

        isWorkingInputForm = false;

        if(halt) {
            // Form didn't validate, do nothing
            e.preventDefault();
        }
    });
}); 
```

注意`isWorkingInputForm`变量。提交表单后，它立即设置为 True，并在脚本底部再次设置为 False。

正如您在脚本顶部看到的那样，我检查是否`isWorkingInputForm`设置为 true（意味着它被暂停了两秒钟），如果是，则返回 false（不要继续）。

出于某种原因，如果我在暂停时按下提交按钮，表单就会提交。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:42:37.647

你清理的`isWorkingInputForm`太快了。当处理程序返回时，您正在清除它，这是在两秒钟之前。进入`isWorkingInputForm = false`超时：

```
setTimeout(function() {
  $(input).val(defVal);
  isWorkingInputForm = false;
}, 2000); 
```

# ruby-on-rails - 使用 Ransack 搜索多个字段

> ID：13309062
> 
> 赞同：2
> 
> 时间：2012-11-09T13:32:26.813
> 
> 标签：ruby-on-rails, ransack

我正在使用 Ransack 允许对我的用户进行高级搜索。目前，用户有`first_name`、`middle_name`和`last_name`列。这是我的代码：

```
.field
  = f.attribute_fields do |a|
    = a.attribute_select
    ... 
```

我怎样才能有一个名为“名称”的自定义项，让用户搜索上述所有三个列？

**请注意** ，我仍然希望将其余属性也保留为选项，例如电子邮件、电话号码等。在确定答案时请记住这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:45:40.093

我建议为此搜索提供一个专门的专栏。虽然这可能会创建冗余数据，但*搜索*比对现有列执行一些 SQL 魔术要容易得多。

您可以轻松地自动设置此字段：

```
before_save :set_full_name

def set_full_name
  self.full_name = [first_name, middle_name, last_name].reject(&:blank?).join(" ")
end 
```

然后就可以用正常的ransack方法来搜索这个字段了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-08T20:08:41.137

使用它来搜索多个字段：

```
= f.text_field(: first_name_or_middle_name_or_last_name_cont) 
```

这将生成如下查询：

```
where first_name like '%q%' or middle_name like '%q%' or last_name like'%q%' 
```

当您填写 aq 作为搜索参数时

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T06:19:13.553

另一种方法是搜索模型的每个属性，仅排除您不想搜索的*字段*。为此，您可以创建一个自定义帮助器方法，该方法构建 Ransack 的搜索方法所期望的标签和搜索字段名称。以下方法（位于帮助程序中）返回您希望以 Ransack 期望的方式搜索的所有属性的串联：

```
def most_attributes_cont
  most_attributes = []
  attributes_to_exclude = [
    "id",
    "created_at",
    "updated_at"
  ]
  ModelName.column_names.each do |column_name|
    most_attributes << column_name unless column_name.in?(attributes_to_exclude)
  end
  most_attributes.join("_or_") + "_cont"
end 
```

然后，只需将方法调用添加到您的搜索表单：

```
<%= search_form_for @q do |f| %>
  <%= f.label most_attributes_cont %>
  <%= f.search_field most_attributes_cont %>
  <%= f.submit %>
<% end %> 
```

# c# - WCF DataContract only visible if service referenced from client exe, not DLL

> ID：13309070
> 
> 赞同：1
> 
> 时间：2012-11-09T13:32:59.037
> 
> 标签：c#, .net, visual-studio-2010, wcf

I have a simple WCF logging service..

```
namespace WCFServiceLibrary
{
    [ServiceContract]
    public interface ILog
    {
        [OperationContract]
        string InsertLogItem(LogItem logItem);
    }

    [DataContract]
    public class LogItem
    {
        private string _Text = string.Empty;

        [DataMember]
        public string Text
        {
            get { return _Text; }
            set { _Text = value; }
        }
    }
} 
```

And I have a client, and a DLL, all in the same solution.

If I reference the service from the Client, I can see the DataContract. If I reference the service from the DLL, I can NOT see the DataContract.

By which I mean that it I reference the service as LogService, and have this code in the client...

```
static LogService.LogClient logService = new LogService.LogClient();
//create log item - <<< Compile error in DLL on following line >>>
var itemTolog = new LogService.LogItem { Text = "log this"}; 
string result = logService.InsertLogItem(itemTolog); 
```

then it works fine, but if the same code is in the DLL, then it will not compile due to LogService.LogItem not being visible, and reports the following error

```
The type or namespace name 'LogItem' does not exist in the namespace 'MyDll.LogService' (are you missing an assembly reference?) 
```

The dataContract "LogItem" is simply not in the object explorer when the service is referenced from the dll, but it is if referenced from the client exe.

What gives? Needless to say I want to reference the Service from the DLL. I've read elsewhere that you can only see the data contract if it is actively used in one of the service contracts, but it is.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:17:29.977

OK. I've fixed this by:

*   right clicking on the service reference in the DLL
*   clicked ‘Configure Service Reference...’</li>
*   unchecked "Resuse types in referenced assemblies".

tbh I do not know *why* this works, but it does... [gaelic shrug]

# sql - 关于如何在查询中同时比较两个列值的 SQL

> ID：13309075
> 
> 赞同：0
> 
> 时间：2012-11-09T13:33:33.943
> 
> 标签：sql, compare

我需要创建一个查询来查找在参加更多考试时考试成绩会降低的司机的姓名。所以我有以下表格：

```
branch(branch_id, branch_name, branch_addr, branch_city, branch_phone);
driver(driver_ssn, driver_name, driver_addr, driver_city, driver_birthdate, driver_phone);
license(license_no, driver_ssn, license_type, license_class, license_expiry, issue_date, branch_id);
exam(driver_ssn, branch_id, exam_date, exam_type, exam_score); 
```

**exam_date 是一个日期

所以我正在使用表格驱动程序和考试。我想以某种方式检查exam_date>anotherDate，同时检查exam_score

*编辑

这是我想出的，但我觉得有些语法是非法的。我不断收到语法错误。

```
s.executeQuery("SELECT driver_name " +
"FROM driver " +
"WHERE driver.driver_ssn IN " +
"(SELECT e1.driver_ssn" +
"FROM exam e1" +
"WHERE e1.exam_score < " +
"(SELECT e2.exam_score FROM exam e2)" +
"AND e1.exam_date > " +
"(SELECT e2.exam_date FROM exam e2)"); 
```

编辑！我让它工作了！感谢大家的投入！

```
SELECT driver.driver_name 
FROM driver
WHERE driver.driver_ssn IN
    (SELECT e1.driver_ssn 
    FROM exam e1, exam e2, driver d 
    WHERE e1.exam_score < e2.exam_score
    AND e1.exam_date > e2.exam_date 
    AND e1.driver_ssn=e2.driver_ssn) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:59:02.390

您将需要进行自我加入。请参阅此示例并将其应用于您的架构。

```
select d.name, 
       es.date_taken as 'prev date', 
       es.score as 'prev score',
       es.date_taken as 'new date', 
       es_newer.score as 'new score'
  from driver d
         inner join exam_score es
           on d.id = es.driver_id
         left outer join exam_score es_newer
           on d.id = es_newer.driver_id 
          and es_newer.date_taken > es.date_taken
          and es_newer.score < es.score
 where es_newer.id is not null 
```

这是我用来演示的[SQL Fiddle 。](http://sqlfiddle.com/#!2/947d9/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:46:28.800

SELECT 返回一个集合，您不能将单个值与集合进行比较。你可以尝试这些方面的东西。这与您的相似，不处理三个考试案例：-

```
SELECT driver_name 
  FROM driver
  JOIN exam e1 ON driver_ssn
  JOIN exam e2 ON driver_ssn
 WHERE e1.exam_score < e2.exam_score
   AND e1.exam_date > e2.exam_date 
```

查询选择驾驶员参加的所有考试对，其中分数较低且日期较大

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:04:35.967

解决这个问题的简单方法是让参加几次考试但第二次得分较低的司机。

为了比较同一个表中的列，SQL 使用自连接。您的加入条件应包括：

```
select e1.driver_ssn, e1.exam_type, e1.exam_score as score_before, 
       e2.exam_score as score_after
exam e1 join exam e2 on (e1.driver_ssn = e2.driver_ssn and 
                    e1.exam_type = e2.exam_type and
                    e1.exam_date < e2.exam_date and 
                    e1.exam_score > e2.exam_score) 
```

# node.js - 导轨接收错误的主体

> ID：13309081
> 
> 赞同：1
> 
> 时间：2012-11-09T13:33:38.553
> 
> 标签：node.js

我对以下代码有问题，该代码使用 POST 请求调用远程服务并接收 JSON 数据：

```
[..]
var options = {
    host:   REMOTE_HOST,
    port:   REMOTE_HOST_POST,
    path:   REMOTE_PATH,
    method: 'POST'
};

var req = http.request(options, function(res) {
    res.setEncoding('utf8');
    res.on('data', function (data) {
        // handles OK
    });
});

req.on('error', function(e) {
    // handles KO
});

req.write('user=myname&password=mypassword');
req.end();
[..] 
```

它在我的 OSX 机器上运行正常，但是当我在同事的 Windows 计算机上尝试时，发送到服务器的数据是错误的，我不知道是什么导致了问题。远程应用程序未按`user=myname&password=mypassword`预期接收，但：

```
35\r\nuser=myname&password=mypassword 
```

这可能是什么原因？谢谢

**编辑**

似乎问题不是 Node.js 进一步的调查证据表明，我的 OSX 机器在调用开发服务器时也会出现同样的错误，而它在生产中运行正常。似乎是 Rails 的问题。我'

# sql - 忽略单峰的内部联接

> ID：13309085
> 
> 赞同：0
> 
> 时间：2012-11-09T13:33:44.640
> 
> 标签：sql, tsql, self-join

我必须在桌子上做一个自我加入。我正在尝试返回几列的列表，以查看在同一天（MM/DD/YYYY）执行了多少每种类型的药物测试，其中至少完成了两项测试，其中至少一项导致了'UN'的结果代码。

我正在加入其他表格以获取如下信息。问题是我不太明白如何排除那些只有一个结果行的人，他们当天确实有一个“联合国”结果，但当天没有任何其他测试。

查询结果（列）

```
县、DrugTestID、ID、名称、CollectionDate、DrugTestType、结果、计数（DrugTestType）
```

我有几行 ID 12345 是正确的。但是 ID 12346 是单行，其中显示他们的行结果为 count (1)。他们在这一天得到了“联合国”的结果，但那天他们没有进行任何其他测试。我想排除这个。

我尝试了以下查询

```
选择  
    c.desc 为“县”，
    dt.pid 作为“PID”，
    dt.id 作为 'DrugTestID',
    p.id 作为“ID”，
    bio.FullName 为“参与者”，
    转换（varchar，dt.CollectionDate，101）为'CollectionDate'，       
    dtt.desc 作为“药物测试类型”，
    dt.result 作为结果，
    计数（dt.dru_drug_test_type）作为“测试类型计数”
从    
    dbo.Test as dt with (nolock)
       在 dt.pid = h.id 上以 h 身份加入 dbo.History
       在 h.pid = p.id 上以 p 身份加入 dbo.Participant
       在 bio.id = p.id 上加入 BioData 作为 bio
       在 p.CountyCode = c.code 上加入 County as c with (nolock)
       在 dt.DrugTestType = dtt.code 上加入 DrugTestType 作为 dtt 与 (nolock)
       内部联接
          (
             选择不同的
                dt2.pid,
                CONVERT(varchar, dt2.CollectionDate, 101) as 'CollectionDate'
             从   
           dbo.DrugTest as dt2 with (nolock)
                   在 dt2.pid = h2.id 上加入 dbo.History 作为 h2
                   在 h2.pid = p2.id 上以 p2 身份加入 dbo.Participant
             在哪里
                dt2.result = '联合国'
                和 '11-01-2011' 和 '10-31-2012' 之间的 dt2.CollectionDate
                和 p2.DrugCourtType = 'AD'
          ) 作为派生的
            在 dt.pid = 派生.pid
            和转换（varchar，dt.CollectionDate，101）=转换（varchar，派生。CollectionDate，101）
通过...分组
   c.desc、dt.pid、p.id、dt.id、bio.fullname、dt.CollectionDate、dtt.desc、dt.result
订购
    c.desc ASC、参与者 ASC、dt.CollectionDate ASC

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:52:14.990

如果我理解这个问题，这种查询的**基本模式**就是在你的联接中包含否定或排除条件。IE，列 A 匹配但列 B 和 C 不匹配的自联接：

```
select
  [columns]

from
  table t1
  join table t2 on (
    t1.NonPkId = t2.NonPkId
    and t1.PkId != t2.PkId
    and t1.category != t2.category
  ) 
```

如果基准更好，请将条件放在 WHERE 子句中：

```
select
  [columns]

from
  table t1
  join table t2 on (
    t1.NonPkId = t2.NonPkId
  )

where
    t1.PkId != t2.PkId
    and t1.category != t2.category 
```

从自联接开始通常是最简单的，将其视为联接所有相关信息的“基表”：

```
select
  [columns]

from
  (select
    [columns]

  from
    table t1
    join table t2 on (
      t1.NonPkId = t2.NonPkId
    )

  where
      t1.PkId != t2.PkId
      and t1.category != t2.category
  ) bt

  join [othertable] on (<whatever>)
  join [othertable] on (<whatever>)
  join [othertable] on (<whatever>) 
```

这可以让您专注于获得正确的自联接，而不受其他表的干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:05:13.270

这有点复杂，因为您的查询对于每个测试都有单独的行。您需要使用窗口/分析函数来获取所需的信息。这些允许您计算聚合函数，但将值放在每一行上。

以下查询从您的查询开始。然后它计算每个参与者在每个日期的联合国结果数量和测试总数。它应用适当的过滤器来获得你想要的东西：

```
with base as (<your query here>)
select b.*
from (select b.*,
             sum(isUN) over (partition by Participant, CollectionDate) as NumUNs,
             count(*) over (partition by Partitipant, CollectionDate) as NumTests
      from (select b.*,
                  (case when result = 'UN' then 1 else 0 end) as IsUN
            from base
           ) b
     ) b
where NumUNs <> 1 or NumTests <> 1 
```

如果没有`with`子句或窗口函数，您可以创建一个特别丑陋的查询来做同样的事情：

```
select b.*
from (<your query>) b join
     (select Participant, CollectionDate, count(*) as NumTests,
             sum(case when result = 'UN' then 1 else 0 end) as NumUNs
      from (<your query>) b
      group by Participant, CollectionDate
     ) bsum
     on b.Participant = bsum.Participant and
        b.CollectionDate = bsum.CollectionDate
where NumUNs <> 1 or NumTests <> 1 
```

# matlab - Smoothing out of rough plots

> ID：13309089
> 
> 赞同：3
> 
> 时间：2012-11-09T13:34:01.083
> 
> 标签：matlab, uniform, exponential-distribution

I want to draw some plots in Matlab.

*Details:* For class **1**, **p(x|c1)** is uniform for **x** between **[2, 4]** with the parameters **a = 1** and **b = 4**. For class **2**, **p(x|c2)** is exponential with parameter **lambda = 1**. Besides **p(c1) = p(c2) = 0.5** I would like to draw a sketch of the two class densities multiplied by **P(c1)** and **P(c2)** respectively, as a function of **x**, clearly showing the optimal decision boundary (or boundaries).

I have the solution for this problem, this is what the writer did (and *I want to get*), but there's no Matlab code, so I want to do it all by myself.

![IMAGE 1](../Images/e2a7e5ff34658970cc714aaaa35ba254.png)

And this is what I drew.

![IMAGE 2](../Images/933d12898fc5f879d7569b70567e9f8f.png)

And this is the MATLAB code I wrote.

```
x=0:1:8;

pc1 = 0.5;
px_given_c1 = exppdf(x,1);
px_given_c2 = unifpdf(x,2,4);

figure;
plot(x,px_given_c1,'g','linewidth',3);
hold on;
plot(x,px_given_c2,'r','linewidth',3);
axis([0 8 0 0.5]);
legend('P(x|c_1)','P(x|c_2)');

figure;
plot(x,px_given_c1.*pc1,'g','linewidth',3);
hold on;
plot(x,px_given_c2.*(1-pc1),'r','linewidth',3);
axis([0 8 0 0.5]);
legend('P(x|c_1)P(c_1)','P(x|c_2)P(c_2)'); 
```

As you can see, they are almost smiliar, but I am having problem with this uniform distribution, which is drawn in red. How can I change it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:45:52.670

You should probably change `x=0:1:8;` to something like `x=0:1e-3:8;` or even `x=linspace(0,8,1000);` to have finer plotting. This increases number of points in vectors (and therefore *line segments*) Matlab will use to plot.

* * *

*Explanation:* Matlab works with **line segments** when it does plotting!

By writing `x=0:1:8;` you create vector `[0 1 2 3 4 5 6 7 8]` that is of length 9, and by applying `exppdf` and `unifpdf` respectively you create two vectors of the same length derived from original vector. So basically you get vectors `[exppdf(0) exppdf(1) ... exppdf(8)]` and `[unifpdf(0) unifpdf(1) ... unifpdf(8)]`.

When you issue `plot` command afterwards Matlab plots only line segments (8 of them in this case because there are 9 points):

*   from **(x(1), px_given_c1(1))** to **(x(2), px_given_c1(2))**,
*   ...
*   from **(x(8), px_given_c1(8))** to **(x(9), px_given_c1(9))**.

# java - Java：对象输入流 + 套接字

> ID：13309094
> 
> 赞同：0
> 
> 时间：2012-11-09T13:34:12.100
> 
> 标签：java, sockets, objectinputstream

我正在创建简单的点对点游戏。目前我正在服务器/客户端（节点）端工作。我发生了奇怪的问题，我可以`ObjectOutputStream`从套接字创建，但程序**在**创建`ObjectInputStream`. 为了存储套接字和创建流，我使用了我自己的类（下面的代码）。我做错了什么？

```
public void run() {
    try {
        while (this.listen) {

            temp = serverSocket.accept();
            sockList.addSocket(temp);
            sockList.addObjOutStrm(temp);
            sockList.addObjInStrm(temp); // <------------------------ program stops

            setChanged();
            notifyObservers(temp);

            System.out.println("SERVER: Dodalem uzytkownika, oto pelna lista:\n\n"
                            + sockList + "\n");

            synchronized (sockList) {
                for (ObjectOutputStream oos : sockList.getOOSList()) {
                    oos.writeObject(sockList.extractToString());
                }
            }
        }
    } catch (IOException e) {
        System.err.println("SERVER: Błąd I/O serwera podczas nasluchu");
        //e.printStackTrace();
    }
} 
```

我自己的类来存储套接字和流：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class SocketList {
    private List<ObjectOutputStream> obOutStrList;
    private List<ObjectInputStream> obInStrList;
    private List<Socket> sockList;

    private int maxUsers;
    private int currentUsers;

    public SocketList() {
        obOutStrList = Collections
                .synchronizedList(new ArrayList<ObjectOutputStream>());
        obInStrList = Collections
                .synchronizedList(new ArrayList<ObjectInputStream>());
        sockList = Collections.synchronizedList(new ArrayList<Socket>());

        maxUsers = 4;
        currentUsers = 0;
    }

    synchronized public void addSocket(Socket sock) {
        if (sockList.size() < 4) {
            sockList.add(sock);
            currentUsers++;
        } else {
            System.out.println("sockList: Blad max uzytkownikow");
        }
    }

    synchronized public void addObjOutStrm(Socket sock) {
        try {
            obOutStrList.add(new ObjectOutputStream(sock.getOutputStream()));
        } catch (IOException e) {
            System.out.println("Problem z uzyskaniem strumienia wyjsciowego dla " + sock.getInetAddress().getHostAddress().toString());
            e.printStackTrace();
        }
    }

    synchronized public void addObjInStrm(Socket sock) {
        try {
            obInStrList.add(new ObjectInputStream(sock.getInputStream()));
        } catch (IOException e) {
            System.out.println("Problem z uzyskaniem strumienia wejsciowego dla " + sock.getInetAddress().getHostAddress().toString());
            e.printStackTrace();
        }
    }

    synchronized public void removeSock(Socket s) {
        if (sockList.contains(s)) {
            System.out.println("SOCKETLIST: Usuwam " + s.toString());
            sockList.remove((Socket) s);
        }
    }

    synchronized public List<Socket> getSockList() {
        return sockList;
    }

    synchronized public List<ObjectOutputStream> getOOSList() {
        return obOutStrList;
    }

    synchronized public List<ObjectInputStream> getOISList() {
        return obInStrList;
    }

    public String toString() {
        return sockList.toString();
    }

    public String[] extractToString() {
        String[] retArr = new String[currentUsers];

        for (int i = 0; i < sockList.size(); i++)
            retArr[i] = sockList.get(i).getInetAddress().getHostAddress()
                    .toString();

        return retArr;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:35:24.703

你确定你要这么做吗？读取写入对象不是很便携，使用某种具有 XML 或 JSON 等数据结构的协议进行通信。这更便携。
对于您的问题：

```
new ObjectInputStream(sock.getInputStream()) 
```

将阻塞并等待，直到标头已写入流，如 JavaDoc 所述：

*此构造函数将阻塞，直到相应的 ObjectOutputStream 已写入并刷新标头。*

总的来说，我强烈建议您使用不同的架构，使用多线程来处理服务器上的客户端连接，可能使用线程池，甚至可能使用消息队列。请参阅包装 `java.util.concurrent`以了解您需要的所有内容。

看看这里，首先：[http ://tutorials.jenkov.com/java-multithreaded-servers/multithreaded-server.html](http://tutorials.jenkov.com/java-multithreaded-servers/multithreaded-server.html)

# jquery - Magento Prototype 和第三方 jquery 文件冲突

> ID：13309096
> 
> 赞同：0
> 
> 时间：2012-11-09T13:34:18.287
> 
> 标签：jquery, prototype, magento-1.7

我需要在我的 Magento 商店中使用 jquery。我已经设法让我的扩展的原型和 jquery 一起工作。但问题是我正在使用两个第三方扩展。两者都有自己的 jquery 文件要包含。现在 Magento 的原型和两个额外的 jquery 文件把我的商店弄得一团糟。有没有办法为两个扩展使用一个 jquery 文件。我曾尝试使用最新的 jquery 版本，但没有一个扩展适用于该版本。我在这里没有选择和想法。谁能告诉我如何才能使这项工作？

我尝试删除脚本块。但它会产生更多错误。我有一个扩展程序，可以在产品列表页面的灯箱中显示产品图像。此扩展使用**jquery-1.7.2.min。**版本。另一个是使用**jQuery v1.4.2**版本的价格扩展调用。我从调用价格扩展的 xml 中删除了一个，并在 page.xml 中添加了一个**jQuery v1.8.2**版本。所以两个扩展都可以使用它。它现在生成以下错误：

```
TypeError: $(document).ready is not a function
$(document).ready(function() { 
```

这段代码写在我的 list.phtml 文件中。

```
$(document).ready(function() {
var curUrl = "<?php echo $this->getUrl('contacts/index/reseturl/') ?>";

    $("#selCat").change(function(){ 
        $.ajax({
        type: "POST",    
        data: "catUrl=" + $("#selCat").val(),
        url: curUrl,
        dataType: "text",
        success: function(response){
            //alert(response);
            window.location.replace(response);
          }   
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:56:47.450

嘿，我现在找到了解决我的问题的方法。我将我的两个第三方扩展的两个 jquery 文件合并为一个，所以现在我只包含一个文件。该文件与默认的prototype.js 之间仍然存在冲突。所以我所做的被添加了

```
$.noConflict(); 
```

on the top of my product view file **view.phtml** which released the use of **$** from the jquery code to prototype. And all is working as it should now. Thanks for all who replied to me and I hope my solution works for someone else.

# xml - 使用嵌套的 for-each 选择通过 XSL 选择 XML 节点

> ID：13309102
> 
> 赞同：1
> 
> 时间：2012-11-09T13:34:43.053
> 
> 标签：xml, xslt

我们需要将 xml 消息转换为更易读的格式，所以我尝试添加一些 XSL。我很难按照我想要的方式列出所有内容。

我对 XSL 很陌生，所以会得到一些帮助。

这是 XML 文件的一部分：

```
<biotronik-ieee11073-export format-version="3.0" creator="BioProgrammerConverter" creator-version="3.1">
<dataset>
    <section name="MDC">
        <section name="ATTR">
            <section name="PT">
                <value name="SEX" type="String">0</value>
            </section>
        </section>
        <section name="IDC">
            <section name="PG">
                <value name="TYPE" type="MDC_IDC_ENUM_PG_TYPE">IPG</value>
                <value name="MODEL" type="String">Evia DR-T</value>
                <value name="SERIAL" type="String">xxxxxxxx</value>
                <value name="MFG" type="MDC_IDC_ENUM_MFG">BIO</value>
                <value name="IMPLANT_DT" type="DateTime">20091126</value>
            </section>
            <section name="LEAD">
                <value name="MODEL" type="String">4524</value>
                <value name="MFG" type="MDC_IDC_ENUM_MFG">MDT</value>
                <value name="POLARITY_TYPE" type="MDC_IDC_ENUM_LEAD_POLARITY_TYPE">BI</value>
                <value name="LOCATION" type="MDC_IDC_ENUM_LEAD_LOCATION_CHAMBER">RA</value>
                <value name="CONNECTION_STATUS" type="MDC_IDC_ENUM_LEAD_STATUS">Connected</value>
            </section>
            <section name="LEAD">
                <value name="MODEL" type="String">T 44 F</value>
                <value name="MFG" type="MDC_IDC_ENUM_MFG">ELA</value>
                <value name="POLARITY_TYPE" type="MDC_IDC_ENUM_LEAD_POLARITY_TYPE">BI</value>
                <value name="LOCATION" type="MDC_IDC_ENUM_LEAD_LOCATION_CHAMBER">RV</value>
                <value name="CONNECTION_STATUS" type="MDC_IDC_ENUM_LEAD_STATUS">Connected</value>
            </section> 
```

以某种方式，我想显示 node = IDC 下的所有标签

我尝试使用以下 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
<body>
<h2>Biotronics Results</h2>
<table border="1">
<tr bgcolor="#9acd32">
<th>Test</th>
<th>Value</th>
</tr>
<xsl:for-each select="/biotronik-ieee11073-export/dataset/section[@name='MDC']/section[@name='IDC']">
<xsl:for-each select="section">
<xsl:for-each select="value">
<tr>
<td><xsl:value-of select="value"/></td>
</tr>
</xsl:for-each>
</xsl:for-each>
</xsl:for-each>
</table>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:46:21.083

**你想要**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:copy-of select="//section[@name='IDC']//value"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<biotronik-ieee11073-export format-version="3.0" creator="BioProgrammerConverter" creator-version="3.1">
    <dataset>
        <section name="MDC">
            <section name="ATTR">
                <section name="PT">
                    <value name="SEX" type="String">0</value>
                </section>
            </section>
            <section name="IDC">
                <section name="PG">
                    <value name="TYPE" type="MDC_IDC_ENUM_PG_TYPE">IPG</value>
                    <value name="MODEL" type="String">Evia DR-T</value>
                    <value name="SERIAL" type="String">xxxxxxxx</value>
                    <value name="MFG" type="MDC_IDC_ENUM_MFG">BIO</value>
                    <value name="IMPLANT_DT" type="DateTime">20091126</value>
                </section>
                <section name="LEAD">
                    <value name="MODEL" type="String">4524</value>
                    <value name="MFG" type="MDC_IDC_ENUM_MFG">MDT</value>
                    <value name="POLARITY_TYPE" type="MDC_IDC_ENUM_LEAD_POLARITY_TYPE">BI</value>
                    <value name="LOCATION" type="MDC_IDC_ENUM_LEAD_LOCATION_CHAMBER">RA</value>
                    <value name="CONNECTION_STATUS" type="MDC_IDC_ENUM_LEAD_STATUS">Connected</value>
                </section>
                <section name="LEAD">
                    <value name="MODEL" type="String">T 44 F</value>
                    <value name="MFG" type="MDC_IDC_ENUM_MFG">ELA</value>
                    <value name="POLARITY_TYPE" type="MDC_IDC_ENUM_LEAD_POLARITY_TYPE">BI</value>
                    <value name="LOCATION" type="MDC_IDC_ENUM_LEAD_LOCATION_CHAMBER">RV</value>
                    <value name="CONNECTION_STATUS" type="MDC_IDC_ENUM_LEAD_STATUS">Connected</value>
                </section>
            </section>
        </section>
    </dataset>
</biotronik-ieee11073-export> 
```

**产生了想要的正确结果：**

```
<value name="TYPE" type="MDC_IDC_ENUM_PG_TYPE">IPG</value>
<value name="MODEL" type="String">Evia DR-T</value>
<value name="SERIAL" type="String">xxxxxxxx</value>
<value name="MFG" type="MDC_IDC_ENUM_MFG">BIO</value>
<value name="IMPLANT_DT" type="DateTime">20091126</value>
<value name="MODEL" type="String">4524</value>
<value name="MFG" type="MDC_IDC_ENUM_MFG">MDT</value>
<value name="POLARITY_TYPE" type="MDC_IDC_ENUM_LEAD_POLARITY_TYPE">BI</value>
<value name="LOCATION" type="MDC_IDC_ENUM_LEAD_LOCATION_CHAMBER">RA</value>
<value name="CONNECTION_STATUS" type="MDC_IDC_ENUM_LEAD_STATUS">Connected</value>
<value name="MODEL" type="String">T 44 F</value>
<value name="MFG" type="MDC_IDC_ENUM_MFG">ELA</value>
<value name="POLARITY_TYPE" type="MDC_IDC_ENUM_LEAD_POLARITY_TYPE">BI</value>
<value name="LOCATION" type="MDC_IDC_ENUM_LEAD_LOCATION_CHAMBER">RV</value>
<value name="CONNECTION_STATUS" type="MDC_IDC_ENUM_LEAD_STATUS">Connected</value> 
```

# objective-c - AUGraph 使用 RemoteIO 和 MultiChannelMixer 录制和播放

> ID：13309103
> 
> 赞同：8
> 
> 时间：2012-11-09T13:34:43.843
> 
> 标签：objective-c, audio, core-audio, record, playback

我有个问题 ;）

我想从麦克风录制音频并将其写入具有扩展音频文件服务的文件系统，并播放录制的东西。如果我只使用带有两个回调的 remoteIO，一个用于读取，一个用于写入，它可以工作。

对于 Volumen Control，我想使用 MultiChannelMixer 和 AUGraph。可以用同一个混音器和RemoteIO实现回放**和录音吗？**

我认为它必须看起来像这样：

```
RemotIO Input   ->        -> Write Callback
                    Mixer
RemoteIO Output <-        <- Read Callback 
```

我创建了两个 AUNode（RemoteIO 和 MultiChannelMixer），我必须如何设置回调和连接，一个回调从麦克风传递 AudioData，另一个从文件读取数据并且两条路径都通过混音器？

读写不是问题，只是节点的配置！

…以及 CAShow 的输出：

```
AudioUnitGraph 0x8AEE000:
  Member Nodes:
    node 1: 'aumx' 'mcmx' 'appl', instance 0x865a510 O I
    node 2: 'auou' 'rioc' 'appl', instance 0x865d0a0 O I
  Connections:
    node   1 bus   0 => node   2 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x0000000C) 16-bit little-endian signed integer]
    node   2 bus   1 => node   1 bus   1  [ 2 ch,  44100 Hz, 'lpcm' (0x0000000C) 16-bit little-endian signed integer]
  Input Callbacks:
    {0x4150, 0x7573340} => node   2 bus   1  [2 ch, 44100 Hz]
    {0x4330, 0x7573340} => node   1 bus   0  [2 ch, 44100 Hz]
  CurrentState:
    mLastUpdateError=0, eventsToProcess=F, isRunning=F 
```

这是设置代码：

```
 OSStatus setupErr = noErr;

AudioComponentDescription mixerDescription;
AudioComponentDescription ioDescription;

// the AUNodes
AUNode mixerNode;
AUNode ioNode;

// the graph
setupErr = NewAUGraph(&_graph);
NSAssert(setupErr == noErr, @"Couldn't create graph");

// the mixer
mixerDescription.componentFlags = 0;
mixerDescription.componentFlagsMask = 0;
mixerDescription.componentType = kAudioUnitType_Mixer;
mixerDescription.componentSubType = kAudioUnitSubType_MultiChannelMixer;
mixerDescription.componentManufacturer = kAudioUnitManufacturer_Apple;

// the io 
ioDescription.componentFlags = 0;
ioDescription.componentFlagsMask = 0;
ioDescription.componentType = kAudioUnitType_Output;
ioDescription.componentSubType = kAudioUnitSubType_RemoteIO;
ioDescription.componentManufacturer = kAudioUnitManufacturer_Apple;

// add mixer Node
setupErr = AUGraphAddNode(self.graph, &mixerDescription, &mixerNode);
NSAssert(setupErr == noErr, @"Couldn't create master mixer");

// add io Node
setupErr = AUGraphAddNode(self.graph, &ioDescription, &ioNode);
NSAssert(setupErr == noErr, @"Couldn't create io node");

// open Graph
setupErr = AUGraphOpen(self.graph);
NSAssert(setupErr == noErr, @"Couldn't open graph");

// get the mixer info
setupErr = AUGraphNodeInfo(self.graph, mixerNode, &mixerDescription, &_mixer);
NSAssert(setupErr == noErr, @"Couldn't get master mixer info");

// get the io info
setupErr = AUGraphNodeInfo(self.graph, ioNode, &ioDescription, &_io);
NSAssert(setupErr == noErr, @"Couldn't get io Node info");

// enable io input
UInt32 enableFlag = 1;
setupErr = AudioUnitSetProperty(self.io, kAudioOutputUnitProperty_EnableIO, kAudioUnitScope_Input, kInputBus, &enableFlag, sizeof(enableFlag));
NSAssert(setupErr == noErr, @"Couldn't enable io input");

// set up the mixers input callbacks
AURenderCallbackStruct outputCallbackStruct;
outputCallbackStruct.inputProc = outputCallback;
outputCallbackStruct.inputProcRefCon = self;

AURenderCallbackStruct inputCallbackStruct;
inputCallbackStruct.inputProc = inputCallback;
inputCallbackStruct.inputProcRefCon = self;

setupErr = AUGraphConnectNodeInput(self.graph, mixerNode, 0, ioNode, 0);
NSAssert(setupErr == noErr, @"Couldn't connect mixer output to io output");
setupErr = AUGraphConnectNodeInput(self.graph, ioNode, 1, mixerNode, 1);
NSAssert(setupErr == noErr, @"Couldn't connect io input to mixer input");

// set output Callback
setupErr = AUGraphSetNodeInputCallback(self.graph, ioNode, 1, &outputCallbackStruct);
NSAssert(setupErr == noErr, @"Error setting io output callback");

// set input Callback
setupErr = AUGraphSetNodeInputCallback(self.graph, mixerNode, 0, &inputCallbackStruct);
NSAssert(setupErr == noErr, @"Error setting mixer input callback");

// describe format
AudioStreamBasicDescription audioFormat = {0};
audioFormat.mSampleRate                 = 44100.00;
audioFormat.mFormatID                   = kAudioFormatLinearPCM;
audioFormat.mFormatFlags                = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
audioFormat.mFramesPerPacket            = 1;
audioFormat.mChannelsPerFrame           = 2;
audioFormat.mBitsPerChannel             = 16;
audioFormat.mBytesPerPacket             = 4;
audioFormat.mBytesPerFrame              = 4;

// set the rio input properties
setupErr = AudioUnitSetProperty(self.io, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, kOutputBus, &audioFormat, sizeof(audioFormat));
NSAssert(setupErr == noErr, @"Error setting RIO input property");

// set the rio output properties
setupErr = AudioUnitSetProperty(self.io, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, kInputBus, &audioFormat, sizeof(audioFormat));
NSAssert(setupErr == noErr, @"Error setting RIO output property");

// set the master fader output properties
setupErr = AudioUnitSetProperty(self.mixer, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Global, kOutputBus, &audioFormat, sizeof(audioFormat));
NSAssert(setupErr == noErr, @"Error setting master output property");

// set the master fader input properties
setupErr = AudioUnitSetProperty(self.mixer, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Global, kOutputBus, &audioFormat, sizeof(audioFormat));
NSAssert(setupErr == noErr, @"Error setting master input1 property");

// initialize Graph
setupErr = AUGraphInitialize(self.graph);
NSAssert(setupErr == noErr, @"Error initializing graph - error code");

CAShow(self.graph);

// start Graph
setupErr = AUGraphStart(self.graph);
NSAssert(setupErr == noErr, @"Error starting graph. - error code"); 
```

我希望你能理解我的问题:) 谢谢..

**更新：** 还有一些东西来描述我的问题！

录音：RemoteIO InputScope Bus 0 -> Mixer Input Bus 0 -> Mixer Output Bus 0 -> Write Callback -> 文件播放：File -> Read Callback -> Mixer Input Bus 1 -> Mixer Output Bus 0 -> RemoteIO OutputScope Bus 1

![连接计划](../Images/5a4324ca116211347054bcc3a190b385.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:21:20.060

您需要创建具有三个节点（单元）的 AUGraph：

1.  文件播放器 (kAudioUnitSubType_AudioFilePlayer)
2.  远程IO
3.  混合器

像这样连接它们：

```
AUGraphConnectNodeInput(m_graph, m_player, 0, m_mixerNode, 0); // player -> mixer
AUGraphConnectNodeInput(m_graph, m_mixerNode, 0, m_rioNode, 0); // mixer -> output
AUGraphConnectNodeInput(m_graph, m_rioNode, 1, m_mixerNode, 1); // input -> mixer 
```

在 RIO 上启用输入：

```
UInt32 enable = 1;
AudioUnitSetProperty(m_rioUnit, kAudioOutputUnitProperty_EnableIO, kAudioUnitScope_Input, 1, &enable, sizeof(UInt32)); 
```

获取混音器输出格式并将其设置为扩展音频文件的客户端格式：

```
AudioStreamBasicDescription mixerASBD;
UInt32 prop = sizeof(mixerASBD);
AudioUnitGetProperty(m_mixerUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &mixerASBD, &prop);
ExtAudioFileSetProperty(extAudioFile, kExtAudioFileProperty_ClientDataFormat, sizeof(mixerASBD), &mixerASBD); 
```

定义渲染回调：

```
static OSStatus mixerCallBack(void *inRefCon, AudioUnitRenderActionFlags *ioActionFlags, const AudioTimeStamp * inTimeStamp, UInt32 inBusNumber,UInt32 inNumberFrames, AudioBufferList *ioData) {
    if ((*ioActionFlags) & kAudioUnitRenderAction_PostRender)
        return (ExtAudioFileWrite(extAudioFile, inNumberFrames, ioData));

    return noErr;
} 
```

为混音器的输出数据添加回调：

```
AudioUnitAddRenderNotify(m_mixerUnit, mixerCallBack, NULL); 
```

就这样。您需要将音频文件安排到 FilePlayer 单元进行播放。

# android - 当一个触摸事件在android中发生时以编程方式执行另一个触摸事件

> ID：13309111
> 
> 赞同：1
> 
> 时间：2012-11-09T13:35:11.317
> 
> 标签：android, ontouchlistener

我正在通过触摸原始实例来创建 ImageView 拖放并创建重复实例。

我有一个包含许多小图像的水平布局。当我触摸它时，它会创建它的重复实例并放在屏幕上的那个位置略有不同。

现在，我想继续触摸事件，但想完成在原始 ImageView 上完成的第一个触摸事件，并希望启动它的重复实例的触摸事件。但无需移除手指。

我做了以下工作：

```
img22.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        ImageView img2 = null;

        switch (event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN :
...   ...
...   ...
            Bitmap bmp2 = BitmapFactory.decodeResource(ImageListActivity.this.getResources(),
                R.drawable.img2);
            //ImageView 
            img2 = new ImageView(ImageListActivity.this);
            img2.setImageBitmap(bmp2);
            img2Param.setMargins( (rx-10-x), (ry-10-y-50), 0, 0);
            img2.setLayoutParams(img2Param);

            img2.setOnTouchListener(new OnTouchListener() {
                    @Override
                    public boolean onTouch(View v, MotionEvent event) {

                    System.out.println("   ---   img2 On Touch Called   ---");

                    RelativeLayout.LayoutParams img2Param =
                    (RelativeLayout.LayoutParams) v.getLayoutParams();
                    img2Param.setMargins((int)event.getRawX()-10, (int)event.getRawY()-60, 0, 0);
                    v.setLayoutParams(img2Param);
                    v.invalidate();
                        return true;
                    }
                });
            long downTime2 = SystemClock.currentThreadTimeMillis(),
                    eventTime2 = SystemClock.currentThreadTimeMillis() + 10;
            float x2 = 0.0f, y2 = 0.0f;
            int metaState2 = 0;
            MotionEvent motionEvent2 = MotionEvent.obtain(
                    downTime2, eventTime2, MotionEvent.ACTION_POINTER_1_UP, x2, y2, 1);
            v.dispatchTouchEvent(motionEvent2);

            long downTime = SystemClock.currentThreadTimeMillis(),
                    eventTime = SystemClock.currentThreadTimeMillis();// + 5000;
            float x1 = 0.0f, y1 = 0.0f;
                int metaState = 0;
            MotionEvent motionEvent = MotionEvent.obtain(
                    downTime, eventTime, MotionEvent.ACTION_MOVE, x1, y1, 1);
            img2.onTouchEvent(motionEvent);
...    ...
...    ... 
```

**谁能给我关于继续触摸事件和更改 ImageView 实例的想法。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:35:43.630

听起来您想要做的是单击“Image1”，让此操作创建一个“Image2”并继续触摸手势，就像单击“Image2”一样？

与其这样做，不如拥有一个 Touch Surface 可能是一个更好的主意——在这些视图之上分层的一个不可见视图，它捕获触摸事件，然后根据需要执行操作——这意味着你可以继续你的手势“关闭”图像而无需创建一个新的手势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:42:49.763

如果我对问题的理解正确，您需要在'方法中**返回 false**以便将触摸返回给调度程序 ( )。`img2``onTouch``img22`

# perl - 如何从 Net::Amazon::EC2 decribe_tags 返回的数组中获取特定标签？

> ID：13309114
> 
> 赞同：0
> 
> 时间：2012-11-09T13:35:22.360
> 
> 标签：perl, ec2-api-tools

我正在使用 Net::Amazon::EC2 来获取有关我的实例的一些信息。

我得到与一个实例关联的所有标签：

```
my $tags = $ec2->describe_tags("Filter.Name" => "resource-id", "Filter.Value" => $instance_id); 
```

根据文档，这将返回[DescribeTag](http://search.cpan.org/~mallen/Net-Amazon-EC2-0.22/lib/Net/Amazon/EC2/DescribeTags.pm)对象的数组 ref。

我可以遍历结果：

```
foreach my $tag (@$tags) {
    print $tag->key . " = " . $tag->value . "\n";
} 
```

有没有办法获得带有特定键的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:48:15.837

您可能可以`grep`通过它们。不是很优雅，但我不知道你正在使用的模块。

```
my @filtered_tags = grep { $_->key eq 'specific' } @$tags; 
```

# crash - 确定共享指针类型类不完整或完整以及崩溃的原因

> ID：13309116
> 
> 赞同：0
> 
> 时间：2012-11-09T13:35:49.643
> 
> 标签：crash, shared-ptr, incomplete-type

类构造函数具有这样的声明...

```
Class A:
{
  public:
 A(int a, SharedPtr<class T>sp = SharedPtr<class T>());
 ~A();
} 
```

现在从另一个类中，我将这个类作为共享指针销毁

```
delete (SharedPtr<A>*)(*iter); 
```

现在结果它崩溃了`checked_delete<class T>`

谁能说这`SharedPtr<class T>sp`是不完整的，或者崩溃的原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:15:24.083

```
delete (SharedPtr<A>*)(*iter); 
```

这是什么意思？

1）你为什么要投到`SharedPtr<A>`？你确定演员是安全的吗？什么类型`iter`？返回什么`*iter`？

2）你到底为什么要删除共享ptr **？**您是否在堆上创建了共享 ptr？！这违背了共享 ptr 的全部目的。您在堆栈上创建它并根据需要复制它，而不是在堆上创建它。

# ruby-on-rails - Rails.cache 在测试之间被清除了吗？

> ID：13309121
> 
> 赞同：48
> 
> 时间：2012-11-09T13:36:06.490
> 
> 标签：ruby-on-rails, ruby, caching, rspec

`Rails.cache`我们在 Rails 3.2 应用程序中使用缓存 id/path 映射。在某些机器上它工作正常，但在其他机器上是错误的。原因很难追踪，所以我对它`Rails.cache`本身有一些疑问。它在测试之间被清除了吗？开发模式中缓存的值是否有可能在测试模式中使用？如果它没有被清除，我怎么能在运行规范之前做到这一点？

我的缓存存储配置是：

```
#in: config/environments/development.rb
config.cache_store = :memory_store, {:size => 64.megabytes}

#in: config/environments/production.rb
# config.cache_store = :mem_cache_store 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-01-29T07:02:37.990

一种更有效（也更容易）的方法是将测试环境的缓存设置为使用 NullStore：

```
# config/environments/test.rb:
config.cache_store = :null_store 
```

NullStore 确保不会缓存任何内容。

例如在下面的代码中，它总是会落入块并返回当前时间：

```
Rails.cache.fetch('time') { Time.now } 
```

另请参阅 Rails 缓存指南： http: [//guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-nullstore](http://guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-nullstore)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-11-09T14:19:22.857

添加：

```
before(:all) do
  Rails.cache.clear
end 
```

在运行每个规范文件之前清除缓存。

添加：

```
before(:each) do
  Rails.cache.clear
end 
```

在每个规范之前清除缓存。

您可以将其放在块`spec/spec_helper.rb`内`RSpec.configure`以使其全局应用（建议在每个规范文件或案例中分散它）。

默认情况下，RSpec 不会自动清除该缓存。

# c# - 从 UserControl 实例化表单是不好的做法吗？

> ID：13309123
> 
> 赞同：3
> 
> 时间：2012-11-09T13:36:10.050
> 
> 标签：c#, compact-framework, .net-2.0

我正在使用 .NET CF Framework 构建一个应用程序，并且遇到了一种情况，我想向用户展示一个自定义对话框。

我的解决方案是创建一个简单的表单，其中包含用于选择的单选按钮和一个按钮。单击按钮时，会将选定的单选按钮值保存到公共属性并关闭表单。

UserControl 在窗体上调用 ShowDialog 后，检查公共属性以了解用户选择的选项。

这非常有效。我只是想知道这是否是不好的做法，如果我会以某种方式让自己陷入困境，这样做。UserControl 应该创建一个表单似乎很奇怪。

有没有更好的方法来从 UserControl 中创建自定义对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:44:42.783

这绝对没有错。`MessageBox.Show()`它本质上与从 UserControl调用相同。

是的，将结果作为公共属性访问是一种方法。

我猜这将是一个对话？如果您有多个“退出”选项 - 确定、取消等，您应该考虑使用[DialogResult 。](http://msdn.microsoft.com/en-us/library/system.windows.window.dialogresult.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T13:52:02.050

简短的回答：不，它不应该给你带来任何问题。

长答案：随着应用程序的增长，直接从 UserControl 打开表单之类的操作可能会给您一些类似意大利面条的代码。如果您编写的应用程序大于几千行代码，则文件后面的 Form 和 UserControl 代码通常应该是空的。它们不应包含任何业务逻辑，最好也不包含任何 UI 逻辑。看看[Passive View](http://martinfowler.com/eaaDev/PassiveScreen.html)等模式如何实现这一点。

# iphone - iOS 在 UITableView 中显示来自 ALAsset 的图像

> ID：13309125
> 
> 赞同：0
> 
> 时间：2012-11-09T13:36:19.377
> 
> 标签：iphone, ios, uitableview, uiimageview, alassetslibrary

我有一个存储项目的数据库。这些项目可以是不同类型的类型，如文本、视频和图像。加载视图时，我从数据库中获取这些项目并将它们显示在 UITableView 中。我面临的问题与在表格视图中显示图像有关。基本上在数据库中，我存储与图片相关的 ALAsset 链接，并尝试使用以下代码获取其图像：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

 //...Other Code

  else if ([object isMemberOfClass:[Picture class]]){

            //Get a reusable cell
            cell = [tableView dequeueReusableCellWithIdentifier:@"pictureCellIdentifier"];

            // [self performSelectorInBackground:@selector(performAsset:) withObject:dict];

            ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
            {
                ALAssetRepresentation *rep = [myasset defaultRepresentation];
                CGImageRef iref = [rep fullResolutionImage];
                if (iref) {
                    ((PictureViewCell *)cell).placeHolderImageView.hidden = YES;
                    ((PictureViewCell *)cell).pictureImageView.image =  [UIImage imageWithCGImage:[rep fullResolutionImage]  scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];

                }
            };

            ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
            {
                 [Utility showAlertViewWithTitle:@"Location Error" message:@"You must activate Location Services to access the photo" cancelButtonTitle:@"Dismiss"];

            };

            ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];
            [assetslibrary assetForURL:[NSURL URLWithString:((Picture *)objectInArray).imagePath]
                           resultBlock:resultblock
                          failureBlock:failureblock];

         //Set the background for the cell
            cell.backgroundView = iv;

        }

 //...Other code

} 
```

问题是，当您滑过单元格时，会调用该方法并且应用程序非常慢。所以我想有更好的方法来实现我想要做的事情。我还尝试使用`performselectorInBackground:`. 性能似乎更好，但获取图像需要更多时间。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:43:13.477

这里有一些可以改进的地方。

第一个如您所想：在后台线程中加载资产，然后在主线程上准备好图像时将其添加到单元格中。`ALAssetsLibrary`接下来，您将为您显示的每个单元格创建一个对象。`ALAssetsLibrary`理想情况下，只要您需要，应用程序应该只保留一个对象。`ALAssetsLibrary`在第一次需要时创建一个，然后重复使用它。

```
- (ALAssetsLibrary *)defaultAssetsLibrary {
    if (_library == nil) {
        _library = [[ALAssetsLibrary alloc] init];
    }
    return _library;
} 
```

最后，您`fullResolutionImage`在 tableview 单元格中使用 。如果你真的只需要显示图像，a`thumbnailImage`或至少 a`fullScreenImage`应该足够好。

```
- (void) loadImage:(NSNumber *)indexPath url:(NSURL*)url
{
    int index = [indexPath intValue];

    ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
    {
        CGImageRef iref = [[myasset defaultRepresentation] fullScreenImage];
        if (iref) {
            // TODO: Create a dictionary with UIImage and cell indexPath

            // Show the image on main thread
            [self performSelectorOnMainThread:@selector(imageReady:) withObject:result waitUntilDone:NO];
        }
    };
    ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
    {
         [Utility showAlertViewWithTitle:@"Location Error" message:@"You must activate Location Services to access the photo" cancelButtonTitle:@"Dismiss"];

    };

    [[self defaultAssetsLibrary] assetForURL:url
                   resultBlock:resultblock
                  failureBlock:failureblock];
}

-(void) imageReady:(NSDictionary *) result
{
    // Get the cell using index path

    // Show the image in the cell
} 
```

# android - 在布局中居中两个按钮

> ID：13309127
> 
> 赞同：-2
> 
> 时间：2012-11-09T13:36:29.330
> 
> 标签：android, android-layout, button

我创建了一行两个按钮，在这下面还有另一行两个按钮。我为所有这些按钮设置了相同的宽度。

有没有办法让它们居中？

编辑：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent">
    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="text"
        android:gravity="center" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="text"
        android:gravity="center" />

</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="text" />

        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Text" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:57:56.017

添加`android:gravity="center"`到你的根容器怎么样？

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >
    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="text" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="text" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="text" />

        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Text" />
    </LinearLayout>
</LinearLayout> 
```

# android - 为什么在我的android应用程序中，sdcard上的`mkdirs`这么慢？

> ID：13309136
> 
> 赞同：1
> 
> 时间：2012-11-09T13:37:13.527
> 
> 标签：android, performance, file-io

我的android应用程序代码中有一个`mkDirs`方法，很简单：

```
public static File mkDirs(File dir) {
    long start = System.currentTimeMillis();
    if (!dir.exists()) {
        dir.mkdirs();
        System.out.println("*** mk dir, cost: " + (System.currentTimeMillis() - start) + "ms");
    }
    return dir;
} 
```

我在我的应用程序中多次调用它来在 sdcard 上创建目录，路径基于`Environment.getExternalStorageDirectory()`.

这是日志：

```
11-09 21:40:18.002: INFO/System.out(28259): *** mk dir, cost: 2181ms
11-09 21:40:20.504: INFO/System.out(28259): *** mk dir, cost: 1629ms
11-09 21:40:20.570: INFO/System.out(28259): *** mk dir, cost: 36ms
11-09 21:40:20.635: INFO/System.out(28259): *** mk dir, cost: 38ms
11-09 21:40:20.697: INFO/System.out(28259): *** mk dir, cost: 35ms
11-09 21:40:20.760: INFO/System.out(28259): *** mk dir, cost: 38ms
11-09 21:40:20.827: INFO/System.out(28259): *** mk dir, cost: 34ms
11-09 21:40:20.909: INFO/System.out(28259): *** mk dir, cost: 52ms
11-09 21:40:20.970: INFO/System.out(28259): *** mk dir, cost: 35ms
11-09 21:41:17.433: INFO/System.out(28259): *** mk dir, cost: 24184ms
11-09 21:42:42.570: INFO/System.out(28259): *** mk dir, cost: 1593ms
11-09 21:44:26.709: INFO/System.out(28259): *** mk dir, cost: 1254ms 
```

你可以看到有时它非常快，但有些东西非常慢——超过 20 秒。

我想可能是内存造成的，可能不够：512M，另外还有一些其他的应用在后台运行。

所以我重新启动手机并重新启动应用程序，这是日志：

```
11-09 22:17:27.680: INFO/System.out(1000): *** mk dir, cost: 1983ms
11-09 22:17:35.138: INFO/System.out(1000): *** mk dir, cost: 2752ms
11-09 22:17:36.020: INFO/System.out(1000): *** mk dir, cost: 37ms
11-09 22:17:36.080: INFO/System.out(1000): *** mk dir, cost: 34ms
11-09 22:17:36.159: INFO/System.out(1000): *** mk dir, cost: 54ms
11-09 22:17:36.221: INFO/System.out(1000): *** mk dir, cost: 38ms
11-09 22:17:36.281: INFO/System.out(1000): *** mk dir, cost: 34ms
11-09 22:17:38.294: INFO/System.out(1000): *** mk dir, cost: 1988ms
11-09 22:17:39.499: INFO/System.out(1000): *** mk dir, cost: 413ms
11-09 22:17:39.577: INFO/System.out(1000): *** mk dir, cost: 49ms
11-09 22:18:41.583: INFO/System.out(1000): *** mk dir, cost: 810ms
11-09 22:18:46.768: INFO/System.out(1000): *** mk dir, cost: 811ms 
```

这次好多了，你可以看到最大时间不到3秒。

我在另一个 1G ram 的 android pad 上测试它，日志是：

```
11-09 21:58:36.770: INFO/System.out(13647): *** mk dir, cost: 2ms
11-09 21:58:36.949: INFO/System.out(13647): *** mk dir, cost: 3ms
11-09 21:58:37.027: INFO/System.out(13647): *** mk dir, cost: 2ms
11-09 21:58:37.035: INFO/System.out(13647): *** mk dir, cost: 1ms
11-09 21:58:37.035: INFO/System.out(13647): *** mk dir, cost: 1ms
11-09 21:58:38.723: INFO/System.out(13647): *** mk dir, cost: 2ms
11-09 21:58:38.730: INFO/System.out(13647): *** mk dir, cost: 2ms
11-09 21:58:38.754: INFO/System.out(13647): *** mk dir, cost: 1ms
11-09 21:58:38.770: INFO/System.out(13647): *** mk dir, cost: 1ms
11-09 21:58:38.785: INFO/System.out(13647): *** mk dir, cost: 1ms
11-09 21:58:38.855: INFO/System.out(13647): *** mk dir, cost: 5ms
11-09 21:58:38.887: INFO/System.out(13647): *** mk dir, cost: 2ms
11-09 21:58:38.926: INFO/System.out(13647): *** mk dir, cost: 7ms
11-09 21:58:38.934: INFO/System.out(13647): *** mk dir, cost: 1ms
11-09 21:58:38.949: INFO/System.out(13647): *** mk dir, cost: 2ms
11-09 21:58:59.871: INFO/System.out(13647): *** mk dir, cost: 4ms
11-09 21:59:06.176: INFO/System.out(13647): *** mk dir, cost: 7ms 
```

你可以看到它总是很快。

我还通过一个android sdcard-testing应用程序测试了我的sdcard，写入速度为3.x M/s，读取速度为7.x M/s，已经足够快了。

所以我猜原因是：如果内存不够，IO操作有时会很慢，是真的吗？

* * *

更新：我只是重写了这个问题，删除了那些不必要的信息。

# javascript - 如何从此 API 链接获取数据？

> ID：13309137
> 
> 赞同：5
> 
> 时间：2012-11-09T13:37:21.997
> 
> 标签：javascript, json, api

昨晚我才开始研究 JavaScript 和 jQuery。我正在使用foursquare API（我已经讨厌oauth，但这可能会在另一个时间发表另一篇文章）并且当您具有基本知识时很难，尽管我喜欢这种学习方式。

我的问题很简单，我想从不需要身份验证/授权的 API URL 获取数据。然后我只想显示它（在我的代码中，我已将其显示为警报 onclick）。

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script>
            $(document).ready(function () {
                $("button").click(function () {
                    $.getJSON('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108',

                    function (data) {
                        alert(data);
                    });
                });
            });
        </script>
    </head>

    <body>
        <button>Send an HTTP POST request to a page and get the result back</button>
    </body>
</html> 
```

当我单击警报时，它会提示我“[object, Object]”，显然这不是我想要的。如何让它显示来自 URL 的数据？

我意识到这是非常基础的（我知道该怎么做，只是不知道怎么做），非常感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T13:39:07.873

你不能`alert()`在 JSON 对象上做。

相反，试试这个：

```
alert(JSON.stringify(data)); 
```

或者，使用[`console.log`](https://stackoverflow.com/questions/4743730/what-is-console-log-and-how-do-i-use-it)：

```
console.log(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-02T11:44:45.613

只需编写 alert(data.tosource());

看来这就是你要找的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T13:40:34.723

查看每个属性及其相关值

```
function(data){
for(att in data){
console.log(data[att]);
} 
```

# twitter-bootstrap - 如何让 fontawesome 在 Azure 网页部署中工作？

> ID：13309138
> 
> 赞同：30
> 
> 时间：2012-11-09T13:37:26.957
> 
> 标签：twitter-bootstrap, azure, fonts, font-awesome

我们使用 Twitter Bootstrap 和[FontAwesome](http://fortawesome.github.com/Font-Awesome)来支持图标。

在部署到我们的一台 IIS 服务器时，我需要添加 MIME 支持。

部署到 Azure 时，我似乎没有这个能力，所以现在我的图标没有显示，因为它似乎不知道如何使用字体。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-09T13:44:52.397

只需将以下内容添加到 web.config ...

```
<system.webServer>    
   <staticContent>
       <remove fileExtension=".svg" />
       <remove fileExtension=".eot" />
       <remove fileExtension=".woff" />
       <mimeMap fileExtension=".svg" mimeType="image/svg+xml"  />
       <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
       <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
    </staticContent>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-08T12:13:49.497

**更新**

[由于最近对FontAwesome](http://www.nuget.org/packages/FontAwesome/) nuget 包的更改，现在不需要此答案。

* * *

除了接受的答案中描述的解决方案之外，我注意到我的项目中的字体位于 ~/Content/fonts 中，但该站点正在 Azure 上的 /fonts 中寻找字体。

作为一种解决方法，我将字体文件复制到 ~/fonts（确保 Build Action 设置为`Content`for all）并且在云端一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-13T10:48:31.103

完成上述操作后，如果仍然无法正常工作，请检查主题文件夹的 css 文件夹中的 font-awesome.css 文件。

有一个链接字体真棒文件的 URL。确保它指向新域中的字体文件指向 Azure 站点的文件夹，即输入完整 URL 而不是`../font/..`.

# c - 将 int 传递给需要 char* 的函数

> ID：13309139
> 
> 赞同：2
> 
> 时间：2012-11-09T13:37:31.293
> 
> 标签：c, linux

我想将 a 传递`int`给需要 a 的函数`char *`。

函数头如下所示：

```
void swapEndian(char *pElement, unsigned int uNumBytes) 
```

并用 int 调用函数（我知道，这行不通..）

```
int numLine;
swapEndian(numLine, sizeof(int)); 
```

那么我必须对 numline 做些什么才能将它传递给这个函数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:44:37.767

已经建议的 char* cast 将起作用

```
swapEndian( (char*) &numLine, sizeof(int) ); 
```

...但是，如果您可以将 swapEndian 更改为 void* 会更好，因为它避免了强制转换（这基本上是 void 指针的含义）并且还避免了与强制转换有关的任何潜在问题或潜在的未来问题操作本身...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T13:40:39.950

这听起来好像你只是想要：

```
swapEndian( (char*) &numLine, sizeof(int) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:59:56.467

除了其他答案，假设`swapEndian`它的名字暗示了它，我相信它被错误地声明了。我建议声明它（如果可以的话）

```
 void swapEndian(void *pElement, size_t uNumBytes); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:40:33.547

如果`swapEndian`适用于每个指向对象的指针，那么您可以传递您的指针，因为根据严格的别名规则，无论指向对象的类型如何，指向字符类型的指针都可以被取消引用。你只需要一个类型转换。

```
swapEndian((char *)&numLine, sizeof numLine); 
```

> **C11 (n1570), § 6.5 表达式**
> 
> 对象的存储值只能由具有以下类型之一的左值表达式访问：
> 
> — 与对象的有效类型兼容的类型，
> 
> — 与对象的有效类型兼容的类型的限定版本，
> 
> — 与对象的有效类型相对应的有符号或无符号类型，
> 
> — 对应于对象有效类型的限定版本的有符号或无符号类型，
> 
> — 在其成员中包含上述类型之一的聚合或联合类型（递归地，包括子聚合或包含联合的成员），或
> 
> — 一种字符类型。

# mysql - 将日期从列转换为 unix_timestamp

> ID：13309146
> 
> 赞同：0
> 
> 时间：2012-11-09T13:37:59.203
> 
> 标签：mysql, date, unix-timestamp

我得到了日期，存储在 MySQL 列中，如下所示：（`09-11-2012`格式为`DD/MM/YYYY`），但是当我这样做时：

```
SELECT UNIX_TIMESTAMP(t.date) FROM table t; 
```

它确实`0`为每一行返回。

如何将此格式日期转换为 unix 时间戳？我想像 PHP 那样转换这个日期`strtotime`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:40:39.537

我的客人`t.date`是一个字符串吗？尝试将其转换为`DATE`首先使用`STR_TO_DATE`

```
SELECT UNIX_TIMESTAMP(STR_TO_DATE(t.date, '%d-%m-%Y')) 
FROM table t; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/5deeac/1)

# .htaccess - 重写规则问题

> ID：13309153
> 
> 赞同：1
> 
> 时间：2012-11-09T13:38:18.767
> 
> 标签：.htaccess, mod-rewrite

我在 .htaccess 文件中使用以下命令

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule . index.php 
RewriteRule ^(design|JS|css|images|remoteLibraries)($|/) - [L]
RewriteRule ([a-z]+)$ index.php?action=$2 
```

当我在浏览器中运行[http://my.url/home/](http://my.url/home/)并打印 $_GET 我得到这个：

```
Array ( [action] => ) 
```

我做错了什么？

* * *

我明白了

```
Array ( [action] => php ) 
```

重写规则是

```
RewriteRule ([a-z]+)$ index.php?action=$1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:50:36.483

一开始就缺少^ ..愚蠢的我:)

```
RewriteRule ^([a-zA-Z_]+)$ index.php?action=$1 
```

# r - ggplot2在改变格式时改变方面

> ID：13309156
> 
> 赞同：0
> 
> 时间：2012-11-09T13:38:33.507
> 
> 标签：r, ggplot2

我最近试图重现由大卫·卡勒（David Kahle）制作的德克萨斯州[休斯顿市中心的犯罪](https://github.com/hadley/ggplot2/wiki/Crime-in-Downtown-Houston,-Texas-%3a-Combining-ggplot2-and-Google-Maps)，以便重现它以供以后进行另一次分析。

一切正常，我可以根据需要生成地图......但是，有一个我无法解释的问题。

当我尝试以更大的格式保存文件时（比如说，4500x1546 而不是普通的 1266x435），点、轴、标题、图例等的大小不会自动调整：它们变得太小了。为了说明这一点：

[第一张图片= 1200x435（正常格式），第二张图片= 4500x1546（调整后的格式）](http://imgur.com/Kus12,z08dh)，

我用 geom_density 图观察到同样的效果。

我想解决方案真的很简单，但我没有找到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:13:20.060

如果要创建更高分辨率的 png，有两种方法：

1.  增加地块的大小，例如英寸
2.  增加dpi，每英寸的像素数

您选择了第二种解决方案，这会使所有元素变小，这是预期的行为。如果要在不更改元素的情况下增加分辨率，请增加 dpi。这可以很容易地使用`ggsave`：

```
g = ggplot(...)
# low res png
ggsave("lowres.png", width = 6, height = 6, dpi = 50)
# high res png
ggsave("hires.png", width = 6, height = 6, dpi = 600) 
```

这样就无需使用`base_size`.

# c# - Ninject XML 扩展 - 插件架构

> ID：13309157
> 
> 赞同：1
> 
> 时间：2012-11-09T13:38:33.853
> 
> 标签：c#, dependency-injection, ninject, ninject-extensions

我正在使用 ninject xml 扩展来为同一个可执行文件（插件）配置不同的 DAL。我的想法是将所有这些（DLL）与 ninject xml 文件一起放在主应用程序的子文件夹中。

问题是ninject 在xml 中找不到引用的绑定。仅当我将 dll 复制到主应用程序 (.exe) 的同一文件夹时，它才有效。

我试图在加载内核之前加载 dll

```
Assembly assembly = Assembly.LoadFrom(dll);
AppDomain.CurrentDomain.Load(assembly.GetName());
Kernel.Load(xmlFile); 
```

但还是不行。（***错误：“无法解析在 'to' 属性中定义的类型 'MyType'”***）

有人知道在 ninject-xml 文件中引用具体文件夹或从另一个文件夹加载类型的方法吗？可以使用 ninject-xml 扩展名解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:40:02.823

约定扩展可能会通过根据存在的 DLL 加载绑定来解决问题吗？如果没有，您能否更详细地解释您的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:08:34.910

我用配置文件中的“探测”元素解决了这个问题。它包括分辨率范围内的文件夹。

```
<runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <probing privatePath="Plugins"/>
      </assemblyBinding>
 </runtime> 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/823z9h8w%28v=vs.100%29.aspx)。

谢谢大家。

# c# - 下载电子邮件附件时使用 C# 中的 Microsoft Security Essentials

> ID：13309167
> 
> 赞同：3
> 
> 时间：2012-11-09T13:38:55.627
> 
> 标签：c#, email-attachments, antivirus, ms-security-essentials

我正在制作一个简单的程序来使用 VS2010 从 pop3 服务器获取电子邮件。可能会使用开源 OpenPOP 来完成其中的一些。然后它应该将电子邮件和附件保存在 MS SQL 数据库中。

但问题是，虽然附件很容易从邮件服务器下载，但有没有办法扫描附件？我工作的这家小公司只使用 Microsoft 安全要素。

用谷歌搜索，但似乎找不到任何关于这件事的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:13:40.970

您可以使用：

```
"%ProgramFiles%\Microsoft Security Client\MpCmdRun.exe" -Scan -ScanType 3 -File "<Path>" 
```

并检查返回码。

附加信息：

```
-Scan [-ScanType value]
     0  Default, according to your configuration
     1  Quick scan
     2  Full system scan
     3  File and directory custom scan

        [-File <path>]
             Indicates the file or directory  to be scanned, only valid for
             custom scan.

        [-DisableRemediation]
             This option is valid only for custom scan.
             When specified:
               - File exclusions are ignored.
               - Archive files are scanned.
               - Actions are not applied after detection.
               - Event log entries are not written after detection.
               - Detections from the custom scan are not displayed in the user
                 interface.

   Return code is
   0    if no malware is found or malware is successfully remediated and no
        additional user action is required
   2    if malware is found and not remediated or additional user action is
        required to complete remediation or there is error in scanning.
        Please check History for more information. 
```

# qtp - 快速测试 pro 10.0 javascript 控件？

> ID：13309171
> 
> 赞同：0
> 
> 时间：2012-11-09T13:39:16.733
> 
> 标签：qtp

是否有任何插件可以与滑块和下拉列表等 javascript 控件一起使用？我的 qtp 只将它们识别为 WebElement，如果我想从下拉列表中选择一些东西，我根本做不到。JavaScript 框架是 Prototype JavaScript 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:29:08.973

QTP 不支持开箱即用的[prototypejs 。](http://prototypejs.org/)但是，您可以创建一个 Web 可扩展性项目来支持特定控件（如果您这样做，请与社区的其他人分享）。

[您可以在此处](https://stackoverflow.com/questions/917214/web-extensibility)找到有关如何入门的一些信息。

# .htaccess - htaccess : Display homepage on wrongly typed subdomain

> ID：13309172
> 
> 赞同：4
> 
> 时间：2012-11-09T13:39:17.263
> 
> 标签：.htaccess

I need to Display an custom url source,when users mistype an subdomain.

For example , If user types `hames.domain.com` instead of `games.domain.com` , The `hames.domain.com` should display html source of index of `domain.com`.

P.s : i dont want iframe or redirection,It needs to display index of main domain.

i tried below code

```
RewriteCond %{HTTP_HOST} ^([^.]+)\.example\.com$ [NC]
RewriteRule ^%1/(.*)$ /$1 [L,NC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:05:50.310

Humm I'm not a pro with htaccess, but if the user types a wrong sub domain he'll get a 404 error. So redirect him to your domain if he gets it.

ErrorDocument 404 domain.com

# android - 如何在 Android 的 kSOAP 信封中设置正确的安全标头

> ID：13309173
> 
> 赞同：2
> 
> 时间：2012-11-09T13:39:22.133
> 
> 标签：android, netbeans, https, glassfish, ksoap2

我正在开发一个调用在 GlassFish 3.1 服务器上运行的 SOAP Web 服务的 Android 应用程序。我使用 NetBeans 7 开发了 Web 服务。在我的应用程序中，我使用 kSOAP2 库连接到服务器。

连接使用 SSL 保护，在证书出现一些问题后，可以建立连接，所以现在我必须设置我的 SOAP 信封的正确安全标头，否则我会在服务器上收到 WssSoapFaultException: Invalid Security Header 异常。问题是，我不知道安全标头应该是什么样子。

我从这篇文章中知道如何设置标题一般[如何使用 ksoap2 设置肥皂标题](https://stackoverflow.com/questions/5613675/how-to-set-soap-header-using-ksoap2-android)

我试图从 GlassFish 管理工具中获取有关标题应该是什么样子的一些信息，但找不到任何东西。

那么我可以在 Web 服务文件的什么位置找到该信息，或者我可以直接从生成的 WSDL 文件中获取它吗？

这就是我的 WDSL 文件的样子。

编辑：我意识到在 NetBeans 的 Web 服务属性中（右键单击 ws -> 编辑 Web 服务属性）在 Secure Service 下我选择了 Mutual Certificates Security。不知道这是怎么发生的，我确信我在创建 Web 服务时检查了传输安全性 (SSL)。无论如何，我把它放回传输安全，现在 WSDL 文件更轻了。但是仍然需要安全标头，所以我遇到了和以前一样的问题。

```
 <!--
 Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. 
-->
<!--
 Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. 
-->
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://stawebservice.staws.stapf.de/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://stawebservice.staws.stapf.de/" name="stawebservice">
<wsp:Policy xmlns:wsapw3c="http://www.w3.org/2006/05/addressing/wsdl" wsu:Id="stawebservicePortBinding_Wsaw_Addressing_Policy-stawebservicePortBinding_WSAM_Addressing_Policy-stawebservicePortBinding_WSAM_Addressing_Policy">
<wsapw3c:UsingAddressing wsp:Optional="true"/>
<wsam:Addressing wsp:Optional="true">
<wsp:Policy/>
</wsam:Addressing>
</wsp:Policy>
<wsp:Policy xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" wsu:Id="stawebservicePortBindingPolicy">
<sp:TransportBinding>
<wsp:Policy>
<sp:AlgorithmSuite>
<wsp:Policy>
<sp:Basic128/>
</wsp:Policy>
</sp:AlgorithmSuite>
<sp:IncludeTimestamp/>
<sp:Layout>
<wsp:Policy>
<sp:Lax/>
</wsp:Policy>
</sp:Layout>
<sp:TransportToken>
<wsp:Policy>
<sp:HttpsToken RequireClientCertificate="false"/>
</wsp:Policy>
</sp:TransportToken>
</wsp:Policy>
</sp:TransportBinding>
<sp:Wss10/>
<wsam:Addressing/>
</wsp:Policy>
<types>
<xsd:schema>
<xsd:import namespace="http://stawebservice.staws.stapf.de/" schemaLocation="https://192.168.1.214:8181/STAwebservice_ssl/stawebservice?xsd=1"/>
</xsd:schema>
</types>
<message name="getPublicKey">
<part name="parameters" element="tns:getPublicKey"/>
</message>
<message name="getPublicKeyResponse">
<part name="parameters" element="tns:getPublicKeyResponse"/>
</message>
<message name="login">
<part name="parameters" element="tns:login"/>
</message>
<message name="loginResponse">
<part name="parameters" element="tns:loginResponse"/>
</message>
<message name="getOTP_HTTPS">
<part name="parameters" element="tns:getOTP_HTTPS"/>
</message>
<message name="getOTP_HTTPSResponse">
<part name="parameters" element="tns:getOTP_HTTPSResponse"/>
</message>
<message name="getOTP_SMS">
<part name="parameters" element="tns:getOTP_SMS"/>
</message>
<message name="getOTP_SMSResponse">
<part name="parameters" element="tns:getOTP_SMSResponse"/>
</message>
<message name="confirmOTP">
<part name="parameters" element="tns:confirmOTP"/>
</message>
<message name="confirmOTPResponse">
<part name="parameters" element="tns:confirmOTPResponse"/>
</message>
<portType name="stawebservice">
<operation name="getPublicKey">
<input wsaw:Action="http://stawebservice.staws.stapf.de/stawebservice/getPublicKeyRequest" wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/getPublicKeyRequest" message="tns:getPublicKey"/>
<output wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/getPublicKeyResponse" message="tns:getPublicKeyResponse"/>
</operation>
<operation name="login">
<input wsaw:Action="http://stawebservice.staws.stapf.de/stawebservice/loginRequest" wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/loginRequest" message="tns:login"/>
<output wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/loginResponse" message="tns:loginResponse"/>
</operation>
<operation name="getOTP_HTTPS">
<input wsaw:Action="http://stawebservice.staws.stapf.de/stawebservice/getOTP_HTTPSRequest" wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/getOTP_HTTPSRequest" message="tns:getOTP_HTTPS"/>
<output wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/getOTP_HTTPSResponse" message="tns:getOTP_HTTPSResponse"/>
</operation>
<operation name="getOTP_SMS">
<input wsaw:Action="http://stawebservice.staws.stapf.de/stawebservice/getOTP_SMSRequest" wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/getOTP_SMSRequest" message="tns:getOTP_SMS"/>
<output wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/getOTP_SMSResponse" message="tns:getOTP_SMSResponse"/>
</operation>
<operation name="confirmOTP">
<input wsaw:Action="http://stawebservice.staws.stapf.de/stawebservice/confirmOTPRequest" wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/confirmOTPRequest" message="tns:confirmOTP"/>
<output wsam:Action="http://stawebservice.staws.stapf.de/stawebservice/confirmOTPResponse" message="tns:confirmOTPResponse"/>
</operation>
</portType>
<binding name="stawebservicePortBinding" type="tns:stawebservice">
<wsaw:UsingAddressing/>
<wsp:PolicyReference URI="#stawebservicePortBinding_Wsaw_Addressing_Policy-stawebservicePortBinding_WSAM_Addressing_Policy-stawebservicePortBinding_WSAM_Addressing_Policy"/>
<wsp:PolicyReference URI="#stawebservicePortBindingPolicy"/>
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="getPublicKey">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="login">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="getOTP_HTTPS">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="getOTP_SMS">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="confirmOTP">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="stawebservice">
<port name="stawebservicePort" binding="tns:stawebservicePortBinding">
<soap:address location="https://192.168.1.214:8181/STAwebservice_ssl/stawebservice"/>
</port>
</service>
</definitions> 
```

# database - “参考数据”的反义词是什么？

> ID：13309175
> 
> 赞同：3
> 
> 时间：2012-11-09T13:39:43.427
> 
> 标签：database, terminology, static-data

我正在寻找一个表示“非参考”数据的术语，即数据库中严格不参考数据的任何数据。

```
 Master Data
           /\
          /  \
         /    \
        /      \
       /        \
      /          \
Reference Data   ??? 
```

有这样的说法吗？本来以为一定有但似乎找不到 - 建设性的建议非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-13T20:56:01.450

不久前我问过这个问题，但我个人喜欢的答案是**Operational Data**，它可以解释为可以由业务运营修改的数据。

也可以更进一步，大致分为三个（尽管这些之间可能有一些交叉）：-

*   **参考数据**：在整个应用程序期间固定。
*   **运营数据**：在正常业务运营期间由应用程序直接管理。
*   **易失性数据**：可以由外部进程更改，而无需由应用程序直接控制。（这可能是也可能不是运营数据的子集）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T12:56:40.793

交易数据是另一种可能性。再次在广义上使用“交易”。根据[维基百科](http://en.wikipedia.org/wiki/Transaction_data)交易数据需要一个时间值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:49:48.230

也许是客户数据？在广义上使用“客户”。因此，它可能涵盖部门和采购的内部列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-19T20:24:27.847

好吧，我的答案是与参考数据相反的偏好数据或推理数据。教授 O 而不是 E。[https://www.merriam-webster.com/dictionary/profer](https://www.merriam-webster.com/dictionary/profer)

我专注于使用 stem / root -fer。forrefer 表示返回。

偏好数据，如生产（或产品）数据。提供意味着进行或结转至或执行至。我不是说要约（就像法律要约一样）

推断数据可能是唯一的其他选择，因为它意味着按逻辑步骤执行。

该链接是我提出相关问题的地方：[https ://english.stackexchange.com/q/584642/440001](https://english.stackexchange.com/q/584642/440001)

# sql - SQL 子查询和连接性能问题

> ID：13309179
> 
> 赞同：0
> 
> 时间：2012-11-09T13:40:01.523
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005, sql-server-2000

```
 `select * from DETAIL a
        where a.BUILD > GETDATE() - 90 s
        and (a.IN + a.Rt) NOT IN (SELECT Sample_IN + Rt FROM  SUMMARY)                  
        and (a.Rt + a.Err) IN 
       (SELECT Rt + Err 
        FROM SUMMARY 
        where (sample_in + rt + err) NOT IN 
       (SELECT in + rt + err FROM DETAIL)) 
        group by a.rt, a.plant, a.in, a.build` 
```

此查询显示性能问题，它在 sql2000 服务器中运行得更快，但在 sql2008R2 中表现不佳。两个环境中的表具有相同的属性（列数据类型和索引）。我猜想选择子句的“+”运算符有一些可能性。谁能帮我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:44:42.063

连接字段时索引不起作用。您可以在表中创建已经组合这些字段的列，并在这些字段上创建索引。这将提高你的表现。

另外，请注意，此查询将运行得更快并使用您当前的索引（请原谅我的拼写错误，您没有包括表定义）：

```
select * 
  from DETAIL a
 where a.BUILD > DateAdd( Day, -90, GetDate() )
   and not exists ( select null 
                      from SUMMARY 
                     where SUMMARY.Sample_IN = a.IN and SUMMARY.Rt  = a.Rt )
   and exists ( select null
                 from SUMMARY 
                where not exists ( select null
                                     from DETAIL 
                                    where DETAIL.in = SUMMARY.Sample_IN 
                                      and DETAIL.Rt = SUMMARY.Rt 
                                      and DETAIL.Err = SUMMARY.Err)
                  and a.Rt = SUMMARY.Rt
                  and a.Err = SUMMARY.Err ) 
group by a.rt, a.plant, a.in, a.build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:04:02.570

```
 select * from DETAIL a 
    left outer join SUMMARY sm1
      on a.IN = sm1.Sample_IN 
     and a.Rt = sm1.Rt 
    join SUMMARY sm2
      on a.Rt = sm2.Rt
     and a.Err = sm2.Err
    left outer join Detail d 
      on sm2.Sample_IN = d.in
     and sm2.rt = d.rt
     and sm2.err = d.err
    where a.BUILD > GETDATE() - 90 s
    and sm1.Rt is null 
    and d.in is null
    group by a.rt, a.plant, a.in, a.build 
```

这是使用连接。对于您的问题，Dominic Goulet 的存在可能会更好。+1

# cocos2d-iphone - CCNode 递归 getChildByTag

> ID：13309180
> 
> 赞同：1
> 
> 时间：2012-11-09T13:40:02.667
> 
> 标签：cocos2d-iphone, ccnode

据我了解，该`CCNode::getChildByTag`方法仅在直接子代中搜索。

但是有没有办法在所有后代层次结构中通过标签递归地找到 CCNode 的子节点？

我正在从 CocosBuilder ccb 文件加载 CCNode，我想检索只知道它们的标签的子节点（而不是它们在层次结构中的位置/级别）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:02:52.053

一种方法 - 创建自己的方法。或使用此方法为 CCNode 创建类别。它看起来像这样

```
- (CCNode*) getChildByTagRecursive:(int) tag
{
    CCNode* result = [self getChildByTag:tag];

    if( result == nil )
    {
        for(CCNode* child in [self children])
        {
            result = [child getChildByTagRecursive:tag];
            if( result != nil )
            {
                break;
            }
        }
    }

    return result;
} 
```

将此方法添加到 CCNode 类别。您可以在所需的任何文件中创建类别，但我建议仅使用此类别创建单独的文件。在这种情况下，将导入此标头的任何其他对象都可以将此消息发送到任何 CCNode 子类。

实际上，任何对象都可以发送此消息，但如果不导入标头，它会在编译过程中引起警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T09:30:56.577

这是递归 getChildByTag 函数的 cocos2d-x 3.x 实现：

```
/** 
 * Recursively searches for a child node
 * @param typename T (optional): the type of the node searched for.
 * @param nodeTag: the tag of the node searched for.
 * @param parent: the initial parent node where the search should begin.
 */
template <typename T = cocos2d::Node*>
static inline T getChildByTagRecursively(const int nodeTag, cocos2d::Node* parent) {
    auto aNode = parent->getChildByTag(nodeTag);
    T nodeFound = dynamic_cast<T>(aNode);
    if (!nodeFound) {
        auto children = parent->getChildren();
        for (auto child : children)
        {
            nodeFound = getChildByTagRecursively<T>(nodeTag, child);
            if (nodeFound) break;
        }
    }
    return nodeFound;
} 
```

作为一个选项，您还可以将搜索的节点类型作为参数传递。

# java - 在 RCP 应用程序中使用反射实现注释扫描的问题

> ID：13309181
> 
> 赞同：2
> 
> 时间：2012-11-09T13:40:08.697
> 
> 标签：java, eclipse-plugin, eclipse-rcp, reflections

我的第一次尝试是简单地将罐子包含在我的主应用程序中。（Eclipse 3.7）我知道这是不受欢迎的，但我正在编写一个独立的专业应用程序，我不太担心试图找出捆绑包。

试图运行这个：

```
 Reflections r = new Reflections("mypackage");

 Set<Class<?>> activeActions = r
                .getTypesAnnotatedWith(MyAnnotation.class); 
```

在我的独立测试应用程序中，它运行良好，但在 RCP 中尝试时，我得到以下输出：

```
org.reflections.ReflectionsException: could not create Vfs.Dir from url, 
no matching UrlType was found [bundleresource://1009.fwk651584550/]

either use fromURL(final URL url, final List<UrlType> urlTypes) 
or use the static setDefaultURLTypes(final List<UrlType> urlTypes) 
or addDefaultURLTypes(UrlType urlType) with your specialized UrlType. 
```

所以我四处寻找答案，发现[这个问题](https://stackoverflow.com/questions/8339845/reflections-library-not-working-when-used-in-an-eclipse-plug-in/8451270#comment18148053_8451270)涵盖了我的问题，但没有给我足够的细节来解决它。作为第一步，我将反射包移到一个包中，但是现在当我运行它时，我根本没有输出，我不知道这是因为 log4j 路径错误还是什么，但我现在没有来自反射包的反馈。

我的 activeActions 列表是空的，所以扫描没有奏效（我没想到会这样），因为我没有实现解决方案的第二部分，即创建自定义 UrlType。但是，我现在已经实现了自定义 URL 类型，但仍然没有找到任何东西，我不知道为什么，因为我看不到反射包的任何反馈，只是没有找到任何东西。

我希望有人可以帮助我让反射日志记录正常工作，然后找出为什么 UrlType 解决方案不适合我。

**编辑**

这是一个笑话，如果我不打扰 Bundle 并且我只是将反射 jar 推到我的类路径中，那么只要注册了自定义 UrlType，扫描就可以工作。并且记录一切正常。我为什么要打扰 Bundles？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:10:30.673

这看起来像是 OSGI 框架下的类加载问题。您必须记住，每个包/插件都维护自己的类加载器，所以我认为您正在使用错误的类加载器来加载您的类并且资源没有得到解决。首先在 OSGI 中加载你的类，这是建议的方法：

通过执行此 Platform.getBundle("com.mybundle.id"); 获取包含您的类的 Bundle/Plugin；在 bundle 实例上有一个名为 .loadClass(String class); 的方法。

尝试使用我刚才提到的方法加载您的 MyAnnotation.class，看看会发生什么。您引用的帖子中的 eclipse buddy-register 功能对于诸如在 OSGI 下使用 hibernate 之类的事情很有用，您映射的数据类在您的包中，默认情况下，hibernate 使用 Class.forname() 加载类，它会遇到错误，因为该映射类不在休眠库包的类路径上。将对休眠插件的依赖添加到您的捆绑包是没有意义的，因此在休眠捆绑包的清单中设置 eclipse-buddy-policy:registered （在确切语法上不正确）然后在您的捆绑包中使用映射类将休眠注册为一个伙伴，在运行时，休眠类加载器将在其类路径上包含您的包中的所有类。

希望这能让您了解类加载，这似乎是问题所在。尝试从包实例 not = new() 加载您的类。

# javascript - 选择框不会调整大小

> ID：13309190
> 
> 赞同：0
> 
> 时间：2012-11-09T13:40:27.967
> 
> 标签：javascript, jquery

我有一个问题，我有一个与“请选择”字样一样宽的下拉框，但是当我附加到该框时，它会将新选项添加​​到下拉列表中，但即使新选项更宽，它仍保持相同的宽度. 我如何强制它更新宽度。

```
 var sOption = '
<option value="volvo">Volvoooooooooooooooooooooooooooooooooooo</option>
<option value="saab">Saab</option>
<option value="opel">Opel</option>
<option value="audi">Audi</option>';

$("mySelect").append(sOption); // how do I force the width to update 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:50:47.310

这听起来像你有一些 css 迫使我开始的宽度变薄

```
.mySelect{width:auto;} 
```

然后从那里去

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:06:39.957

这个问题是 CSS 相关的。默认情况下，它运行良好：http: [//jsfiddle.net/featalion/A6qbd/](http://jsfiddle.net/featalion/A6qbd/)。因此，尝试更新您的宽度样式以自动调整选择的大小：http: [//jsfiddle.net/featalion/f5QWH/1/](http://jsfiddle.net/featalion/f5QWH/1/)。

`$('#my_select').css('width', 'auto');`

# c++ - 我可以在基类中不指定类型名吗？

> ID：13309191
> 
> 赞同：1
> 
> 时间：2012-11-09T13:40:29.450
> 
> 标签：c++, templates, polymorphism

我正在实现多态协议处理程序，并且在我的基类中我想要一个纯虚函数，其中未指定模板函数参数。但是我的编译器在抱怨。我想这是做不到的。有人对如何实现这一目标有任何建议吗？如果可能的话？否则我将不得不放弃多态的想法。

这是我的代码，它给了我错误 C2976 'ProtoWrapper'：模板参数太少。编译器=MSVC++2008。

```
#include "smartptrs.hpp"
#include <iostream>

class realproto {
public:
   const char* getName() const { return "realproto"; }
}; 

class real2ndproto {
public:
   const char* get2Name() const { return "real2ndproto"; }
}; 

template<typename T>
class ProtoWrapper : public ref_type {
public:
   ProtoWrapper(T* real) : m_msg(real) {}
   ~ProtoWrapper() { delete m_msg; }  //cannot have smart ptr on real_proto - so do this way

   T* getMsg() { return m_msg; }

private:
   T* m_msg;
};

class ProtocolDecoder 
{
public:
  virtual void Parse(ProtoWrapper<>* decoded_msg) = 0;  //problem line - compile error
};

class CSTA2Decoder  : public ProtocolDecoder
{
public:
   virtual void Parse(ProtoWrapper<realproto>* decoded_msg) {
      realproto* pr = decoded_msg->getMsg();
      std::cout << pr->getName() << std::endl;
   }
};

int main(int argc, char* argv[])
{
   {
      ref_ptr<ProtoWrapper <realproto> > msg2 = new ProtoWrapper<realproto>(new realproto);

      realproto* pr1 = msg2->getMsg();

      std::cout << "created new realproto\n";
   } 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T13:49:43.290

不同的模板特化基本上是不相关的类型。您不能将模板传递给函数，您需要传递类型（特化），并且不同的实例化之间没有共同点。在其他情况下，您可以使用模板并让编译器在您专门化函数时生成多个重载，但您不能拥有虚拟模板成员函数。

最简单的建议是为您的类模板创建一个基类并将其传入。如果`Parse`函数将根据解码信息创建对象，那么您将需要传递对指针的引用，而不是指针，以便函数可以创建消息。另一方面，如果传入的对象`Decode`决定如何解释消息，那么您将需要提供类型信息（RTTI——即至少一个虚拟函数以便你可以这样做`dynamic_cast`——或者手动制作你自己的）。

附带说明一下，为什么不能在 上使用智能指针`real_proto`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:49:35.363

为什么你不能像模板一样简单地将解码器类声明为模板？

```
template<typename T>
class ProtocolDecoder 
{
public:
  virtual void Parse(ProtoWrapper<T>* decoded_msg) = 0;  //problem line - compile error
}; 
```

并在继承时提供类型

```
class CSTA2Decoder  : public ProtocolDecoder<your type>
{} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T13:47:47.537

要做到这一点，您需要`ProtocolDecoder`变成一个类模板：

```
template <typename T>
class ProtocolDecoder 
{
public:
  virtual void Parse(ProtoWrapper<T>* decoded_msg) = 0;  //problem line - compile error
};

class CSTA2Decoder  : public ProtocolDecoder<realproto>
{
  //...
}; 
```

# sql-server - 使用 NHibernate.Linq Query 时如何查询包含方括号的数据

> ID：13309192
> 
> 赞同：1
> 
> 时间：2012-11-09T13:40:29.523
> 
> 标签：sql-server, tsql, nhibernate

我的数据库中的一些记录包含方括号，例如。

```
dafalgan [1gram]
valium [15mg]
... 
```

但是，当我想使用以下表达式查询 NHibernate.Linq 时

```
return x => x.Description.Contains(searchTerm) 
```

其中 searchTerm 是 'dafalgan [1gram]' 使用/生成以下 SQL：

```
SELECT        FieldName1, FieldName2
FROM            TableName
WHERE        (Description LIKE '%' + N'dafalgan [1gram]' + '%') 
```

这不会返回任何结果，因为 SQL Server 认为`[`是正则表达式匹配括号之间任何一个字符的开始。这只是 SQL Server 的问题，pl-sql 不认为`[`是特殊字符。

[NH-938](https://nhibernate.jira.com/browse/NH-938)提到了允许传递转义字符的重载，`Restrictions.Like`但我无法控制使用的代码（NHibernate.Linq 的一部分）。

我知道我可以`searchTerm.Replace("[", "[[]");`在我的代码中做一个，但我正在寻找一个更通用的解决方案，例如。将其添加到 Hibernate.Dialect.MsSql2000Dialect 因为它仅特定于 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-21T15:09:02.180

基于@Jamie Ide 的链接，以下内容对我有用：

```
 private static AbstractCriterion MatchModeAnywhereSafeCriterion(string propertyName, string value)
    {
        const char escapeChar = '\u001B';
        var safeValue = value.Replace("%", escapeChar + "%").Replace("_", escapeChar + "_")
            .Replace("[", escapeChar + "[");
        return Restrictions.Like(propertyName, safeValue, MatchMode.Anywhere, escapeChar);
    } 
```

# git - 恢复复杂的合并

> ID：13309199
> 
> 赞同：0
> 
> 时间：2012-11-09T13:40:41.557
> 
> 标签：git

我们有一点混乱，一个旧分支完成了后续工作，这些工作全部合并到一个 dev 分支，但在 dev 分支之间完成了其他工作，所以：

我们从 dev 开始，
然后分支到 5.6.9
，在 dev 上继续工作，但在 5.6.9 上，5.6.9 上的
所有工作都被合并到 dev
一个分支是从最新的 dev 中创建的（到这个阶段，大约有 1800 个提交5.6.9)，然后合并到 5.6.9 - 这是我们想要恢复的

我们没有线性历史，我们可以恢复到给定的提交，因为在 5.6.9 上完成的工作在 dev 上的提交之间，并且现在无法找到任何方法来找到合并的提交哈希作为旧分支的日志包含所有开发（即 git log --merges 显示合并到开发的所有功能分支，而不是我们所做的合并到 5.6.9）

是否有记录 git 保存所有合并？有什么方法可以告诉它撤消合并（已被推送）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:52:35.957

你可以做一个

```
git log --grep Merge 
```

得到你的commitid。

接着：

```
git rebase --onto <commit-id>^ <commit-id> HEAD 
```

那应该处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T03:54:03.137

对于合并提交，您可以按照 sjakubowski 的建议在 git 日志中对其进行 grep，即

`git log --grep Merge`

然后，一旦您找到合并提交，您可以通过

`git revert -m 1 <merge_commit_id>`

这应该有效。

# database - 如何在 PostgreSQL 中获取与表绑定的所有序列

> ID：13309203
> 
> 赞同：2
> 
> 时间：2012-11-09T13:41:15.887
> 
> 标签：database, django, postgresql, sequences

我最近在我的 Django 应用程序中从 MySQL 切换到 PostgreSQL，我需要将所有序列的最后一个值设置为 max。对应表和列的数量。如何获取与表相关的所有序列？到目前为止，我正在做类似的事情：

```
SELECT sequence_name FROM information_schema.sequences 
WHERE sequence_name LIKE 'table_name%'; 
```

但我不喜欢这种方法，主要是因为我必须另外清理结果。是否有一些 ID 将表与其序列连接起来。

现在我无法将任何对象添加到我的数据库中，因为 Postgre“自动增量”从 1 开始运行，并且新对象的 PK 与现有记录发生冲突。

注意：我的 django 应用程序非常大，我使用了几个额外的包，所以命名约定不一致（表名有/没有应用程序前缀，PK 列就像 'id' 的 'tableid' 或 'table_id' 和很快）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T13:56:02.243

假设您没有做任何不寻常的事情，请尝试以下两个查询。

```
SELECT * FROM information_schema.sequences ;
SELECT * FROM information_schema.columns WHERE column_default LIKE 'nextval%'; 
```

这应该告诉你你需要知道什么。我可能只是将序列名称从`column_default`字段中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T13:57:45.690

尝试：

```
python manage.py sqlsequencereset <appname> 
```

并将其提供给`psql`cli

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-09T06:43:20.137

使用它来获取序列名称和计数。

```
SELECT sequence_name,start_value from information_schema.sequences; 
```

# events - AppleScript 将特定 iCal 事件提前一周

> ID：13309204
> 
> 赞同：1
> 
> 时间：2012-11-09T13:41:20.190
> 
> 标签：events, date, applescript, move, icalendar

我根据某个开始日期在 6 周内为各种客户安排了 iCal 活动。即客户端 1,2 和 3 在下周一开始，我在 6 周内设置了几个 iCal 事件，这些事件将触发其他不同的 AppleScript 等。（效果很好，但是......）

如果客户 2 决定比 1 和 3 晚 1 周参加该计划，并且我已经安排了他的活动，我如何在 iCal 中为客户 2 选择已经创建的活动并将它们全部上移一周？

这是我到目前为止所得到的：

```
tell application "Calendar"
tell calendar "ExampleCalendar"
set theEventList to every event whose summary contains "Client2"
end tell
end tell 
```

这将选择事件，现在我如何将它们全部向上移动一周（它们显然都有不同的开始日期并且间隔不等）

这将使我的生活更轻松！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:13:50.817

更新：

Yosemite 用户现在可以[在 AppleScript 中引用选定的日历事件](https://www.johneday.com/1086/reference-selected-calendar-events-applescript "在 AppleScript 中引用选定的日历事件")

尝试：

```
set daysAdded to 7

tell application "iCal"
    tell calendar "ExampleCalendar"
        set theEventList to every event whose summary contains "Client2"
        repeat with anEvent in theEventList
            tell anEvent
                set it's end date to (it's end date) + daysAdded * days
                set it's start date to (it's start date) + daysAdded * days
            end tell
        end repeat
    end tell
end tell 
```

这是另一种方法。

```
 tell anEvent
            set {sDate, eDate} to {(it's start date), (it's end date)}
            set it's start date to sDate + daysAdded * days
            set it's end date to eDate + daysAdded * days
        end tell 
```

# javascript - 对 ajax 加载内容的 jQuery 操作

> ID：13309208
> 
> 赞同：0
> 
> 时间：2012-11-09T13:41:26.873
> 
> 标签：javascript, jquery

我已将一些数据加载到 boostrap 中。

```
$(".open_modal").live('click', function () {
    var $url = $(this).attr('data-url');
    var $title = $(this).attr('title');
    var $modal_data = $('<div class="modal" id="my_modal"><div class="modal-header"><button class="close" data-dismiss="modal">×</button><h3><img src="/assets/imgs/loading.gif" /> Loading....</h3></div><div id="modal_content"></div></div>')
        $modal_data.modal({
            show: true,
            backdrop: 'static'
        });
       $modal_data.find("#modal_content").load($url,function(){         
            $modal_data.find("h3").text($title);
    });
    return false;
}); 
```

我正在加载的内容包含一个表单...

我正在尝试触发 jquery 代码块提交事件。

```
$("body").delegate("#post_status_frm", 'submit', function (e) {
    var $this = $(this);
    var $status = $("#shout_field").val();
    $.ajax({
        type: "POST",
        url: "/do/post_status.asp",
        data:  $this.serialize(),
        success: function (data) {
            if (data === 'true') {
                $("#my_modal").modal('hide');
                $("#activity").load('/content/activity.asp');
            } else {
                alert(data);
            }
        }

    });
    return false;
}); 
```

但它不起作用？

我尝试抛出一个`alert("")`事件以检查它是否正在触发。不是。

我难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:46:43.770

如果**post_status.asp**只是返回“200 OK”的标头响应和一个空的“响应主体”，则该`data`变量将返回`null`.

```
$.ajax({
    type: "POST",
    url: "/do/post_status.asp",
    data:  $this.serialize(),
    success: function (data) {
        console.log(data, data === null); // Output: null true
        $("#my_modal").modal('hide');
        $("#activity").load('/content/activity.asp');
    }
}); 
```

如果您希望**post_status.asp**以实际**[JSON](http://en.wikipedia.org/wiki/JSON)**数据进行响应，它们需要位于“键值对”中。

# matlab - Matlab 运算符**

> ID：13309209
> 
> 赞同：3
> 
> 时间：2012-11-09T13:41:28.310
> 
> 标签：matlab

我在这里检查了[以前的答案](https://stackoverflow.com/questions/1711784/computing-object-statistics-from-the-second-central-moments/1712019#1712019)。

Matlab中的操作符**是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T13:43:36.910

MATLAB 中没有`**`运算符。

```
>> 3**5
 3**5
  |
Error: Unexpected MATLAB operator. 
```

这[在 GNU/Octave](http://www.gnu.org/software/octave/doc/interpreter/Arithmetic-Ops.html)中用作 power operator 的替代品`^`。我认为该程序已在 GNU/Octave 上进行了测试，并且假定也可以在 MATLAB 上运行。

# reporting-services - 在 SSRS 2008 R2 中对组项目求和

> ID：13309211
> 
> 赞同：8
> 
> 时间：2012-11-09T13:41:33.987
> 
> 标签：reporting-services, scope

我有一个我认为是一个相当简单的问题，但我一生都无法弄清楚如何去做（SSRS 2008 R2）。我正在使用 tablix，因为我需要显示详细数据（不仅仅是聚合）

我有数据行（运费）和工作成本分布

报告中的（节略）数据是

```
TrackNo ShipCost NoJobs JobNo Job Cost
T1 10.00 1 J1 10.00
T2 10.00 3 J2 3.33
T2 10.00 3 J3 3.33
T2 10.00 3 J4 3.33

```

因此，TrackNo T1 可能有 1 个与之关联的工作，而 TrackNo T2 可能有 3 个关联的工作。然后我按比例计算所有工作的成本。如果每批货物的成本为 10 美元：

*   跟踪没有 T1，工作没有 J1 将获得 10.00 美元
*   跟踪没有 T2，工作 J2、J3 和 J4 将各获得 3.33 美元

我想要一个像这样的深入报告：

```
TrackNo Ship Total No. Jobs Job No Job Total
+ T1 10.00 1
                                                  J1 10.00
+ T2 10.00 2                                                          
                                                  J2 3.33
                                                  J3 3.33
                                                  J4 3.33

```

在我的报告中，第 1 组跟踪没有；第 2 组（子组）是工作编号。

```
曲目编号
    工作编号

```

报告中的船舶总数为`First(Fields!ShipTotal.Value)`

我想对整个报告的 ShipTotal 求和（不是对工作总数求和，因为它们有舍入误差：例如 3.33 * 3 = 9.99）

如何将显示的值与第 1 组 ( `First(Fields!ShipTotal.Value)`) 相加？我认为范围是方式，但我迷路了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T19:11:29.290

通常会针对旧版本的 SSRS 询问此问题，因此最好回答支持您所需功能的最新版本。SSRS 2008R2 引入了对聚合聚合的支持。

在报告的总框中，将表达式设置为：

```
=SUM( MAX(Fields!ShipTotal.Value, "TrackNo"), "DataSetName") 
```

正如您所提到的，范围是其中的关键部分。上面的表达式表明 SSRS 应该为每个“TrackNo”组获取 First ShipTotal，并为数据集中的每个 TrackNo 组添加它们。（当然，在其中替换您的数据集名称。）

获得此结果的另外两种方法也适用于早期版本的 SSRS：

*   使用嵌入式代码来[跟踪聚合](http://beyondrelational.com/modules/2/blogs/65/posts/11579/aggregate-of-an-aggregate-function-in-ssrs.aspx)。
*   在查询中执行数学运算，使用不同的数据集返回结果，或者作为每行的新字段。

# php - Preg 替换除 + 之外的所有非数字字符

> ID：13309212
> 
> 赞同：3
> 
> 时间：2012-11-09T13:41:49.223
> 
> 标签：php, preg-replace

我想替换字符串中的所有非数字字符，除了`+`.

我已经尝试过[这个](https://stackoverflow.com/questions/9885467/preg-replace-all-non-digit-characters-except-at-start-of-string)问题，但它不起作用......

这是我目前所拥有的：

```
$nn = preg_replace("/([^0-9\/+]+)/", "", $string ); 
```

它可以 100% 工作，除了以`+`任何方式删除...

**编辑**

我的输入将始终只包含 1 +，如果有更多，它们应该被删除。

基本上，如果用户输入电话号码，`(015) 234-2634`它应该返回`+27152342634`（南非国家代码 - 我在稍后阶段添加 +27）但是如果`+27 (15) 234-2634`输入，`+27152342634`应该返回。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T13:48:24.033

您应该可以使用以下正则表达式来做到这一点：

```
[^0-9+] 
```

在`preg_replace()`：

```
$nn = preg_replace('/[^0-9+]/', '', $string); 
```

您当前的正则表达式还保留一个正斜杠，因此要保留该功能：

```
$nn = preg_replace('/[^0-9\/+]/', '', $string); 
```

带输出的示例代码：

```
<?php
$string = '+27 (15) 234-2634';
$nn = preg_replace("/[^0-9+]/", "", $string );
echo $nn . "\n";
?> 
```

结果是：

```
+27152342634 
```

**更新**（只保留第一个匹配`+`）
根据您最新的问题更新，您也只想保留找到的*第一个* `+`符号。为此，由于可能没有关于第一个符号位置的“规则”（例如“它必须是字符串中的第一个字符），我建议使用其他方法，而不仅仅是`preg_replace()`：

```
$nn = preg_replace("/[^0-9+]/", "", $string);
if (substr_count($nn, '+') > 1) {
    $firstPlus = strpos($nn, '+') + 1;
    $nn = substr($nn, 0, $firstPlus) . str_replace('+', '', substr($nn, $firstPlus));
} 
```

此代码将正常执行原始代码`preg_replace()`，然后，如果结果中有超过 1 个`+`符号，它将获取结果的子字符串，直到第一个`+`，然后执行字符串替换以替换所有剩余的`+`符号。`preg_replace()`您也可以在这里始终使用第二个，但仅删除一个`+`符号将是矫枉过正。

这是示例的[键盘](http://codepad.org/k9n5dxRb)条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:01:35.740

因此，如果您想要删除所有加号和非数字，除了第一个，`+`那么您需要一个断言：

```
$str = preg_replace('~  (?! ^ \+)  [^\d]  ~x', "", $str); 
```

请注意，我在这里使用了不同的分隔符`~`。该`x`模式用于正则表达式中的额外空格。

仅当`+`它确实是字符串中的第一个字符时，这才有效。前面是否有空格，两者都会被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T10:20:53.387

据我了解您的问题，您可以使用 preg_replace_callback( [http://php.net/manual/en/function.preg-replace-callback.php](http://php.net/manual/en/function.preg-replace-callback.php) ) 函数来实现这一点。

**脚步：**

1.  获取带括号的 3 位数字并删除括号和前导 0
2.  删除所有非数字字符（包括+）
3.  如果它有国家代码，只需在开头添加“+”
4.  如果不添加“+”国家代码到开头

```
//$string = '(015) 234-2634';
$string = '+27 (015) 234-2634';
//  \(\d{3}\)\s* to capture (015)
//  \D to capture all non numeric characters
//  ^\d{2} to capture first two digits
$pattern = array("/\(\d{3}\)\s*/","/\D/","/^\d{2}/");

echo preg_replace_callback($pattern, function($matches){
    $countrycode = 27;

    if(strlen($matches[0])>4){ //(015)
        return substr($matches[0],2,-1); //grab 15 from (015)
    }
    else if(is_numeric($matches[0]) && $matches[0]==$countrycode ){
                //if it has country code just add "+" to the begining
        return "+".$matches[0];
    }
    else if(is_numeric($matches[0]) && $matches[0]!=$countrycode ){
                //if it has not country code add "+" and countrycode to the begining
        return "+".$countrycode.$matches[0];
    }
   else{
       // if its not a digit return null
       return null; 
   }
}, $string); 
```

请注意我不是正则表达式专家，它可能有简单的方法来完成你的任务，但这个例子对我来说非常有效。

# vb.net - 使用拆分解析 RSS 提要

> ID：13309213
> 
> 赞同：0
> 
> 时间：2012-11-09T13:41:52.017
> 
> 标签：vb.net, parsing, rss, split, cdata

嘿，我正在尝试解析以下 CDATA 描述：

```
 <description>
   <![CDATA[
     <p><b>Submission Date :</b> 2012-11-07 16:53:27<br/> <b>IP Address :</b> xx.xxx.xxx.xx<br/> <b>First Name :</b> dev<br/> <b>Email :</b> test3@here.com<br/> <b>18 yrs./Older :</b> YES<br/> <b>xxxxOffers :</b> <br/> </p>
   ]]>
</description> 
```

读入时看起来像这样：

```
Submission Date : 2012-11-07 16:53:27
IP Address : xx.xx.xx.xx
First Name : dev
Email : test3@here.com
18 yrs./Older : YES
xxxxOffers : [space here] 
```

目前我执行以下操作：

```
description = description.Replace("<p>", "").Replace("</p>", "").Replace("<b>", "").Replace("</b>", "").Replace("<br/>", "")
Dim descriptionArray() As String = Split(description, " : ") 
```

产生以下结果：

![在此处输入图像描述](../Images/e08cc1caf692248dca4c25d62b1972f7.png)

应该这样分解：

```
(0)Submission Date
(1)2012-11-07 16:53:27
(2)IP Address
(3)xx.xxx.xxx.xx
(4)First Name
(5)dev
(6)Email
(7)test3@here.com
(8)18 yrs./Older
(9)YES
(10)xxxxOffers
(11)[space here] 
```

我似乎无法找到一种方法将 CDATA 拆分为每个值，而不使用分母为**“：”**的 SPLIT，这使得它从时间（**16:53:27**）有**“：”**在它已经。

所以我试图通过检查**“：”**来回避这一点，但仍然没有给我想要的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:03:55.867

我建议您在面向字典的对象中获取信息。因此，您将在一次调用中获得描述和价值。例如，您可以执行以下操作：

```
Dim ht as new HashTable   
' by <br>, you will have  : <p><b>Submission Date :</b> 2012-11-07 16:53:27 as first line
For each inLine as string in split(description,"<br/>")
    '<p><b>Submission Date : and 2012-11-07 16:53:27
    dim keyValue as string = split(inLine,"</b>")
    'then clean up <p>,<b>,.... remaining either by "<" and ">" or full tag
    'add(key,value)
    ht.add(keyValue(0), keyValue(1))
Next 
```

如果出于某种原因您不想使用可枚举对象，则可以将其用作基线。

# php - ajax 在 Firefox 中不起作用

> ID：13309214
> 
> 赞同：-4
> 
> 时间：2012-11-09T13:41:56.213
> 
> 标签：php, javascript, codeigniter

先生有一些问题。我在codeigniter中的mac系统上工作这个ajax代码在google chrome上工作，但在firefox上工作我的firefox属性是Mozilla/5.0（Macintosh；U；Intel Mac OS X 10.6；en-US；rv：1.9.0.19）Gecko/2010031218火狐/3.0.19

```
<script>
function showUser(str)
{ 
    if (str=="")
    {
        document.getElementById("txtHint").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    { 
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        { 
            // alert(xmlhttp.responseText);
            document.location.reload(true);

            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("POST","http://localhost/first_project/index.php/admin/selectUser/blank?q=" + str,true);
    xmlhttp.send();
}
</script> 
```

请给我解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:48:00.953

这毫无意义

```
 document.location.reload(true);  <-- reload the document

        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;  <--set text 
```

当您重新加载文档时，有理由设置页面的文本。页面正在退出。如果要重新加载页面，为什么要发出 Ajax 请求？如果您要这样做，只需使用正常的表单提交即可。

更改功能以查看发生了什么

```
xmlhttp.onreadystatechange = function () { 
    if (xmlhttp.readyState==4) {
        if (xmlhttp.status==200) { 
            // alert(xmlhttp.responseText);
            document.location.reload(true);
            //document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        } else {
            //console.error(xmlhttp.status + "\t" + xmlhttp.statusText);
            alert(xmlhttp.status + "\t" + xmlhttp.statusText);
        }
    }
}; 
```

# .net - 向现有 WinForms 应用程序添加 Windows 8 触摸支持

> ID：13309218
> 
> 赞同：9
> 
> 时间：2012-11-09T13:42:23.700
> 
> 标签：.net, winforms, user-interface, windows-8, touch

我有一个面向 .NET Framework 4 的现有 Windows 窗体桌面应用程序，并希望向其添加 Windows 8 触摸支持。

目前该程序在 Windows 8 中运行良好，我可以调整一些元素的大小，使其在触摸设备上更加用户友好。但是，在数据网格上添加手势（例如捏合缩放）以及对其他元素的滑动支持将大大有助于使应用程序在纯触摸环境中更加现代。

我正在投资 Visual Studio 2012，它可以让我瞄准 .NET 4.5 和新的 Windows 8 功能，但是有人知道任何可以帮助我更新应用程序的资源吗？我特别关心以下几点：

*   无法在我的非触控开发机器上直接测试应用程序的触控功能。微软的模拟器似乎只支持 Metro 应用程序。我听说诸如 Splashtop 之类的平板电脑应用程序可以提供帮助（我有一个 Android 平板电脑），但还没有看到任何具体的具体情况
*   WinForms 应用程序是否支持手势。我是否必须将整个 UI 升级到 WPF 才能使其正常工作？（如果我真的走这条路，我相信我也可以针对 Windows 7，因为 WPF 4 支持多点触控）
*   在运行时检测设备的触控支持并适当地缩放/更改 UI，类似于 Microsoft 的 Windows RT Office 应用程序上的触控模式设置。我不想为了添加新功能而分叉项目
*   触摸交互的自动化测试

无论如何，这并不是一份详尽的清单，但我非常感谢那些过去可能进行过类似升级的人的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-31T22:47:50.780

在运行时检测设备的触摸支持是有问题的，因为用户可以随时连接触摸设备。如果您在检测到触摸设备连接后调整表单大小并且设备的连接不稳定，您最终可能会得到一个不断调整自身大小的表单。最好为所有输入提供一个稳定的界面（例如，使用功能区而不是小菜单栏）。如果你真的想检测触摸设备，你可以用 SM_DIGITIZER 调用 GetSystemMetrics。

Windows 窗体不支持手势（2005 年冻结的功能）。然而，表单控件仍然可以使用触摸输入，因为默认的触摸处理程序会将触摸转换为鼠标点击。如果您想拥有自己的触摸处理程序，因为触摸输入以 Windows 消息的形式发送，您可以覆盖您的表单或控件的[WndProc](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc(v=vs.110).aspx)函数来处理手势消息。有关示例代码，请查看Windows 7 SDK 中的[Windows Touch Samples](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562199(v=vs.85).aspx)。

要为您的触摸功能编写测试代码，您可以调用 InjectTouchInput 来模拟触摸输入。完整的示例可以在[Input: Touch injection sample](http://code.msdn.microsoft.com/windowsdesktop/Touch-Injection-Sample-444d9bf7)中找到。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-28T00:48:30.740

您可以从组件一中使用[TouchToolkit for WinForms 。](http://visualstudiogallery.msdn.microsoft.com/fc7f2b13-eba5-4d8f-83f5-7b1d684316ca)但是我认为您必须重写您的应用程序才能使用这些组件。

![在此处输入图像描述](../Images/4c342b3556af75c96be7b216a9d92400.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-01T16:41:20.080

关于*“无法在我的非触摸开发机器上直接测试应用程序的触摸功能。微软的模拟器似乎只支持 Metro 应用程序”*的评论- 我能够运行模拟器，进入模拟器中的桌面并运行模拟触摸输入时的任何应用程序 - 包括 WinForms 应用程序。

由于 WinForms 只是 WinAPI 的本机 UI API 的包装器 - 您可以使用 p/Invoke 来使用我认为是在 Vista/Windows 7 时间范围内添加的触摸 API。主要是[WM_TOUCH](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317341(v=vs.85).aspx)和[WM_GESTURE](http://msdn.microsoft.com/en-us/library/windows/desktop/dd353242(v=vs.85).aspx)消息。有很多关于 p/Invoking 和 using 的示例，`protected override void WndProc(ref Message m)`它们是您处理触摸所需的主要内容。除此之外 - 默认情况下，触摸输入在不作为触摸处理时会自动提升为鼠标事件，因此很多事情都可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-10T02:02:57.153

触摸应该或多或少“正常工作”，但当然，按钮需要更大等。另请参阅[此处](http://archive.msdn.microsoft.com/WindowsTouch/Release/ProjectReleases.aspx?ReleaseId=2127)了解比触摸更复杂的手势。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-27T22:54:10.910

向 winforms 添加手势支持 - 在这里解决：

[http://portal.fke.utm.my/libraryfke/files/1387_LIEWHONCHIN2011.pdf](http://portal.fke.utm.my/libraryfke/files/1387_LIEWHONCHIN2011.pdf)

```
'Imports System.Security.Permissions
'Imports System.Runtime.InteropServices

  Private first_point As New Point()
  Private second_point As New Point()
  Private iArguments As Integer = 0
  Private Const ULL_ARGUMENTS_BIT_MASK As Int64 = &HFFFFFFFFL
  Private Const WM_GESTURENOTIFY As Integer = &H11A
  Private Const WM_GESTURE As Integer = &H119
  Private Const GC_ALLGESTURES As Integer = &H1
  Private Const GID_BEGIN As Integer = 1
  Private Const GID_END As Integer = 2
  Private Const GID_ZOOM As Integer = 3
  Private Const GID_PAN As Integer = 4
  Private Const GID_ROTATE As Integer = 5
  Private Const GID_TWOFINGERTAP As Integer = 6
  Private Const GID_PRESSANDTAP As Integer = 7
  Private Const GF_BEGIN As Integer = &H1
  Private Const GF_INERTIA As Integer = &H2
  Private Const GF_END As Integer = &H4
  Private Structure GESTURECONFIG
    Public dwID As Integer
    Public dwWant As Integer
    Public dwBlock As Integer
  End Structure
  Private Structure POINTS
    Public x As Short
    Public y As Short
  End Structure
  Private Structure GESTUREINFO
    Public cbSize As Integer
    Public dwFlags As Integer
    Public dwID As Integer
    Public hwndTarget As IntPtr
    <MarshalAs(UnmanagedType.Struct)>
    Friend ptsLocation As POINTS
    Public dwInstanceID As Integer
    Public dwSequenceID As Integer
    Public ullArguments As Int64
    Public cbExtraArgs As Integer
  End Structure
  <DllImport("user32")> _
  Private Shared Function SetGestureConfig(ByVal hWnd As IntPtr, ByVal dwReserved As Integer, ByVal cIDs As Integer, ByRef pGestureConfig As GESTURECONFIG, ByVal cbSize As Integer) As <MarshalAs(UnmanagedType.Bool)> Boolean
  End Function
  <DllImport("user32")>
  Private Shared Function GetGestureInfo(ByVal hGestureInfo As IntPtr, ByRef pGestureInfo As GESTUREINFO) As <MarshalAs(UnmanagedType.Bool)> Boolean
  End Function
  Private _gestureConfigSize As Integer
  Private _gestureInfoSize As Integer
  <SecurityPermission(SecurityAction.Demand)>
  Private Sub SetupStructSizes()
    _gestureConfigSize = Marshal.SizeOf(New GESTURECONFIG())
    _gestureInfoSize = Marshal.SizeOf(New GESTUREINFO())
  End Sub
  <PermissionSet(SecurityAction.Demand, Name:="FullTrust")>
  Protected Overrides Sub WndProc(ByRef m As Message)
    Dim handled As Boolean
    Select Case m.Msg
      Case WM_GESTURENOTIFY
        Dim gc As New GESTURECONFIG()
        gc.dwID = 0
        gc.dwWant = GC_ALLGESTURES
        gc.dwBlock = 0
        Dim bResult As Boolean = SetGestureConfig(Handle, 0, 1, gc, _gestureConfigSize)
        If Not bResult Then
          Throw New Exception("Error in execution of SetGestureConfig")
        End If
        handled = True
      Case WM_GESTURE
        handled = DecodeGesture(m)
      Case Else
        handled = False
    End Select
    MyBase.WndProc(m)
    If handled Then
      Try
        m.Result = New IntPtr(1)
      Catch excep As Exception
        Debug.Print("Could not allocate result ptr")
        Debug.Print(excep.ToString())
      End Try
    End If
  End Sub
  Private Function DecodeGesture(ByRef m As Message) As Boolean
    Dim gi As GESTUREINFO
    Try
      gi = New GESTUREINFO()
    Catch excep As Exception
      Debug.Print("Could not allocate resources to decode gesture")
      Debug.Print(excep.ToString())
      Return False
    End Try
    gi.cbSize = _gestureInfoSize
    If Not GetGestureInfo(m.LParam, gi) Then
      Return False
    End If
    Select Case gi.dwID
      Case GID_BEGIN, GID_END
      Case GID_TWOFINGERTAP
        'Receipt.Show()
        'Invalidate()
      Case GID_ZOOM
        Select Case gi.dwFlags
          Case GF_BEGIN
            iArguments = CInt(Fix(gi.ullArguments And
            ULL_ARGUMENTS_BIT_MASK))
            first_point.X = gi.ptsLocation.x
            first_point.Y = gi.ptsLocation.y
            first_point = PointToClient(first_point)
          Case Else
            second_point.X = gi.ptsLocation.x
            second_point.Y = gi.ptsLocation.y
            second_point = PointToClient(second_point)
            RaiseEvent GestureHappened(Me, New GestureEventArgs With {.Operation = Gestures.Pan, .FirstPoint = first_point, .SecondPoint = second_point})
            'Invalidate()
            'MsgBox("zoom")
        End Select
      Case GID_PAN
        Select Case gi.dwFlags
          Case GF_BEGIN
            first_point.X = gi.ptsLocation.x
            first_point.Y = gi.ptsLocation.y
            first_point = PointToClient(first_point)
          Case Else
            second_point.X = gi.ptsLocation.x
            second_point.Y = gi.ptsLocation.y
            second_point = PointToClient(second_point)
            RaiseEvent GestureHappened(Me, New GestureEventArgs With {.Operation = Gestures.Pan, .FirstPoint = first_point, .SecondPoint = second_point})
            'Invalidate()
            'MsgBox("pan")
        End Select
      Case GID_PRESSANDTAP
        'If gi.dwFlags = GF_BEGIN Then
        '  Invalidate()
        'End If
      Case GID_ROTATE
        'Select Case gi.dwFlags
        '  Case GF_BEGIN
        '    iArguments = 0
        '  Case Else
        '    first_point.X = gi.ptsLocation.x
        '    first_point.Y = gi.ptsLocation.y
        '    first_point = PointToClient(first_point)
        '    Invalidate()
        'End Select
    End Select
    Return True
  End Function

  Public Enum Gestures
    Pan
    Zoom
  End Enum

  Public Class GestureEventArgs
    Inherits EventArgs
    Public Property Operation As Gestures
    Public Property FirstPoint As Point
    Public Property SecondPoint As Point
  End Class

  Public Event GestureHappened(sender As Object, e As GestureEventArgs) 
```

# mysql - MySQL Query 解析两个表，两个字段

> ID：13309220
> 
> 赞同：1
> 
> 时间：2012-11-09T13:42:38.333
> 
> 标签：mysql, sql

数据库名称 = 大学

```
table1: university_info
field = university_name, student_number
e.g. values:

university_name          student_number
USC                      12345
USC                      54321
UW                       23456
UW                       65432

table2: student_info
field = student_number, student_test_scores
e.g. values:

student_number           student_test_scores
12345                    50
12345                    60
54321                    70
54321                    80
23456                    90
23456                    92
65432                    90
65432                    100 
```

我上面有两张桌子。让我们打电话给数据库大学。我想在第一次查询时解析并输出大学名称、学号和学生考试成绩。

```
Example of first query:
e.g result
USC   12345   50
USC   12345   60
USC   54321   70
USC   54321   80
UW    23456   90
UW    23456   92
UW    65432   90
UW    65432  100 
```

在第二个查询中，我想要相同的输出，但这次学生的测试分数更高。

```
Example of second query:
USC 12345  60
USC 54321  80
UW  23456  92
UW  65432 100 
```

一旦我们有最高的学生考试成绩，我们需要对第三次查询中的考试成绩进行平均，并输出最高学生考试成绩的平均值。

```
Example of third query:
Average test scores = 83 
```

* * *

这是我到目前为止对第二个查询的内容。我不知道如何添加名称：

```
mysql> select student_info.student_number, student_info.student_test_scores
    -> from student_info
    -> where (student_number='12345' and student_test_scores > 50)
    -> or (student_number='54321' and student_test_scores > 70)
    -> or (student_number='23456' and student_test_scores > 90)
    -> or (student_number='65432' and student_test_scores > 90)
    -> ;
+----------------+---------------------+
| student_number | student_test_scores |
+----------------+---------------------+
|          12345 |                  60 |
|          54321 |                  80 |
|          23456 |                  92 |
|          65432 |                 100 |
+----------------+---------------------+
4 rows in set (0.00 sec) 
```

* * *

我知道有一种更好的方法来完成上面的 3 个查询。我只是不知道该怎么做。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:50:38.563

SQL 非常擅长这样做。

您需要使用 GROUP BY 语法以及聚合函数 MAX 和 AVG。

```
SELECT u.university_name, s.student_number, s.student_test_scores 
FROM student_info AS s
INNER JOIN university_info AS u ON s.student_number = u.student_number 
ORDER BY u.university_name, s.student_number, s.student_test_scores

SELECT u.university_name, s.student_number, MAX(s.student_test_scores) 
FROM student_info AS s
INNER JOIN university_info AS u ON s.student_number = u.student_number 
GROUP BY u.university_name, s.student_number
ORDER BY u.university_name, s.student_number

SELECT AVG(a.student_test_scores)
FROM (
    SELECT u.university_name, s.student_number, MAX(s.student_test_scores) AS student_test_scores
    FROM student_info AS s
    INNER JOIN university_info AS u ON s.student_number = u.student_number 
    GROUP BY u.university_name, s.student_number
) AS a 
```

# android - 如何在android中以编程方式打开数字拨号盘？

> ID：13309226
> 
> 赞同：21
> 
> 时间：2012-11-09T13:42:53.637
> 
> 标签：android, buttonclick, phone-call, numeric-keypad

我想以编程方式在 android 中单击按钮时显示数字拨号键盘（电话呼叫）。代码可用于直接号码拨号，但我只需要在单击按钮时显示拨号键盘。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-07-15T10:22:09.007

```
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(Uri.parse("tel:9999999999"));
startActivity(intent); 
```

为此，我们不需要在**AndroidManifest.xml中添加任何权限**

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-09T13:47:04.433

如果您想在不插入任何号码的情况下以编程方式打开拨号程序，则可以使用此代码：

**爪哇**

```
Intent intent = new Intent(Intent.ACTION_DIAL);
startActivity(intent); 
```

**科特林**

```
val intent = Intent(Intent.ACTION_DIAL)
startActivity(intent) 
```

如果您需要使用已经数字化的号码打开拨号器，您可以使用以下代码：

**爪哇**

```
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(Uri.parse("tel:123 456789"));
startActivity(intent); 
```

**科特林**

```
val intent = Intent(Intent.ACTION_DIAL)
intent.data = Uri.parse("tel:123 456789")
startActivity(intent) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T13:46:29.707

```
Intent intent =  new Intent(Intent.ACTION_CALL_BUTTON);
startActivity(intent); 
```

它将显示拨号窗口检查[这里](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL_BUTTON)的信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-12T10:45:33.170

制作按钮或任何小部件示例：button1

```
 button1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent callIntent = new Intent(Intent.ACTION_DIAL);
            callIntent.setData(Uri.parse("tel:"+button1.getText().toString().trim()));
            startActivity(callIntent);

        }
    }); 
```

在清单中添加权限：

```
 <uses-permission android:name="android.permission.CALL_PHONE" /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-10T13:00:00.273

```
 public void openDialPad(String phoneNumber) {
        Intent intent = new Intent(Intent.ACTION_DIAL);
        intent.setData(Uri.parse(phoneNumber));
        startActivity(intent);
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-23T23:59:19.880

```
Intent callIntent = new Intent(Intent.ACTION_DIAL);
callIntent.setData(Uri.parse("tel:" + phoneNumber));
 if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) {
                // TODO: Consider calling
                //    ActivityCompat#requestPermissions
                // here to request the missing permissions, and then overriding
                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
                //                                          int[] grantResults)
                // to handle the case where the user grants the permission. See the documentation
                // for ActivityCompat#requestPermissions for more details.
                return;
            }
startActivity(callIntent); 
```

此外，您应该在清单中按如下方式注册自定义拨号屏幕：

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" >
<activity
    android:name=".MyDialerApplication"
    android:label="@string/app_name" >

    <intent-filter android:priority="100" >
        <action android:name="android.intent.action.MAIN" />
         <action android:name="android.intent.action.DIAL" />
         <action android:name="android.intent.action.CALL_PRIVILEGED" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="tel" />

    </intent-filter>
</activity> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-11T06:52:19.317

如果你想在非活动类中使用它，那么创建一个这样的函数：

```
package bp;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;

import session.MyApplication;

/**
 * Created by Atiar Talukdar on 7/11/2019.
 */
public class Utils {

    public static void openDialPad(Activity activity, String phoneNumber) {
        Intent intent = new Intent(Intent.ACTION_DIAL);
        intent.setData(Uri.parse("tel:" + phoneNumber));
        activity.startActivity(intent);
    }
} 
```

然后从任何地方调用：

`Utils.openDialPad(getActivity(),data.getContactNo());`

或者

`Utils.openDialPad(this,data.getContactNo());`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-03T16:53:49.273

这是不同的，但是如果您想通过单击一个数字来访问您的拨号盘，请在您的 xml 中声明自动链接属性

```
android:autoLink="phone" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-30T09:38:05.440

使用给定手机号码打开拨号器的最简单代码：

```
val intent = Intent(Intent.ACTION_DIAL,Uri.parse("tel:$text"))
startActivity(intent) 
```

# c++ - GCC 构建时间并没有从预编译的头文件中获得太多好处

> ID：13309228
> 
> 赞同：18
> 
> 时间：2012-11-09T13:43:03.377
> 
> 标签：c++, gcc, build-process, gnu-make, precompiled-headers

我有一个巨大的项目，大约 150 000 LOC 的 C++ 代码。构建时间大约是 15 分钟。该项目由许多不同规模的子项目组成。

我为每个子项目构建了单独的预编译头文件，但是当我使用它们时，构建时间大致相同。似乎构建时间减少了 5-10%，而不是更多。

肯定会使用预编译头文件，我使用`-Winvalid-pch`选项并且我尝试使用编译`-H`器选项进行编译，我的预编译头文件出现在输出中并带有 'bang' 符号，这意味着编译器能够使用预编译头文件。

我所有的预编译头文件都不是很大，每个文件大约 50Mb。我使用 python 脚本，在[这里](http://gamesfromwithin.com/the-care-and-feeding-of-pre-compiled-headers)找到来生成最常用的预编译头列表，所以我的预编译候选列表非常好。

是否有任何免费/开源工具可用于构建优化？似乎标准`make`实用程序无法测量不同目标的构建时间。我找不到使用`make`. 我不是在谈论依赖分析或高级的东西。我只想知道大部分时间浪费在哪些目标上。

此外，GCC 在处理预编译头文件方面似乎效率很低。我无法使任何子项目的构建速度显着加快，在一个构建时间为三分钟的项目上，我获得的最大加速是 20%。与使用 GCC 在 linux 上优化构建时间相比，购买更快的带有固态驱动器的机器似乎更容易、更便宜。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T01:09:24.990

> GCC 构建时间并没有从预编译的头文件中获得太多好处

是的，不幸的是，这通常是真的，

有一些实验项目可以做得更好，请参阅[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3426.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3426.html)和[http://gcc.gnu.org/wiki /pph](http://gcc.gnu.org/wiki/pph)，但它们还不能使用。

我同意另一个答案，即 150KLOC 的 15 分钟非常慢。

我发现使用[Gold](http://en.wikipedia.org/wiki/Gold_(linker))链接器对构建时间有很大的影响，我强烈推荐它。

您还可以考虑[ccache](http://ccache.samba.org/)可以提供帮助，如果您在其他机器上有空闲周期[distcc](http://code.google.com/p/distcc/)

避免在慢速磁盘上构建，当然要避免网络磁盘。避免递归调用 make，这会花费更多时间阅读 makefile 和重新创建依赖关系图。如果您可以构建您的子项目 makefile 以便它们都可以包含在单个顶级 makefile 中，那么非递归 make 将需要更长的时间才能开始，但一旦开始构建目标就会运行。不过，重写 makefile 可能需要做很多工作。

这可能是不言而喻的，但是在多核机器上构建并使用`make -j N`一个好的经验法则是`N`内核数量应该是内核数量的两倍，或者如果编译受 I/O 限制则更多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T07:29:10.343

如果您想充分利用此功能，您需要了解如何构建您的项目以充分利用它们。最好的方法是手动减少构建时间的缓慢而艰难的过程。一开始听起来真的很愚蠢，但是如果所有的构建都快 5 倍，并且你知道如何构建你的项目和依赖关系，那么你就会意识到回报。

您可以设置一个包含目标的持续集成系统，以衡量和记录您的进度/改进，因为您的更改进入。

> 我有一个巨大的项目，大约 150 000 LOC 的 C++ 代码。构建时间大约是 15 分钟。该项目由许多不同规模的子项目组成。

假设你有一台现代机器，听起来它做了很多多余的工作。

还要考虑链接时间。

> 我所有的预编译头文件都不是很大，每个文件大约 50Mb。

这是相当大的，IMO。

> 我不是在谈论依赖分析或高级的东西。

同样，统计数据的持续集成。对于缓慢的构建，过度依赖很可能是问题所在（除非您有很多很多小的 cpp 文件，或者正在发生诸如物理内存耗尽之类的愚蠢事情）。

> 我无法使任何子项目的构建速度明显更快，我得到的最大加速是 20%

了解您的结构和依赖关系。PCH 减慢了我的大部分项目。

> 与使用 GCC 在 linux 上优化构建时间相比，购买更快的带有固态驱动器的机器似乎更容易、更便宜。

很有可能，这台机器不会让你的构建时间快 20 倍，但是*修复你的依赖项和项目结构可以让它快 20 倍*（或者不管问题的根源是什么）。这台机器的帮助只有这么多（考虑到 150KSLOC 的构建时间）。

您的构建可能受 CPU/内存限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:13:57.793

我在生成和使用 PCH 时使用 -include 来包含包含大量标头的文件。它有帮助，但仍然没有那么令人印象深刻。

不过，算你的福气：gcc 似乎比 MSVC 快好几倍，尽管 MSVC 有更好的 PCH 支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-16T15:57:52.800

目前我正在尝试改善我的项目构建时间。该项目使用 CMake 和 GCC，大约 100K LOC，使用 Boost。

通过切换到预编译头文件，我设法将构建机器上的构建时间从 43 分钟缩短到 35 分钟。我使用`-ftime-report`GCC 标志来获取每个编译阶段的时间，还使用帮助 Python[脚本](https://github.com/alex-che/gcc-phases)来汇总所有编译单元的时间。

这些时间帮助我理解，将预编译的头文件添加到项目中可能会大大减少解析和预处理阶段，但同时它可能会显着增加代码生成和优化阶段。这是因为您将所有预编译的头文件数据添加到每个编译单元，编译器现在也需要处理这些数据。根据这两个贡献，您可能会或可能不会从使用预编译头文件中受益。

# xml - XML/XSL：如何比较两个节点并根据比较设置另一个节点的值？

> ID：13309230
> 
> 赞同：1
> 
> 时间：2012-11-09T13:43:13.080
> 
> 标签：xml, xslt, compare, nodes

关于 XML 和 XSL 的问题（我使用的是 sharepoint 2007）

如何比较两个节点？

在下面的示例中，我想将“promotionprice”与“price”进行比较。

如果“promotionprice”等于或大于“price”，则“OK”应为“NO”。如果“promotionprice”小于“price”，则“OK”应为“YES”。

我不确定我使用的是正确的语法，因为在 sharepoint 中它不起作用，它总是给出 YES。

```
XML example:

<?xml version="1.0" encoding="ISO-8859-1" ?> 
<catalog>
<cd>
<title>Empire Burlesque</title> 
<artist>Bob Dylan</artist> 
<country>USA</country> 
<company>Columbia</company> 
<price>10.90</price>
<promotionprice>15.00</promotionprice>
<year>1985</year> 
<OK>Yes</OK>
</cd>
<cd>
<title>Hide your heart</title> 
<artist>Bonnie Tyler</artist> 
<country>UK</country> 
<company>CBS Records</company> 
<price>9.90</price> 
<promotionprice>5.00</promotionprice>
<year>1988</year> 
<OK>Yes</OK>
</cd>
</catalog>

XSL example:
...
<!-- title node -->
<td>
<xsl:value-of select="@title"/>
</td>
<!-- artist node -->
<td>
<xsl:value-of select="@artist"/>
</td>
...
<!-- OK node -->
<td>
<xsl:choose>
<xsl:when test="promotionprice &gt;= price">
<xsl:value-of select="'NO'"/>
</xsl:when>
<xsl:otherwise>
<xsl:value-of select="'YES'"/>
</xsl:otherwise>
</xsl:choose>
</td>

WANTED RESULT:
<table border="1">
<tr>
  <td>Empire Burlesque</td>
  <td>Bob Dylan</td>
  <td>USA</td>
  <td>Columbia</td>
  <td>10.90</td>
  <td>15.00</td>
  <td>1985</td>
  <td>NO</td>
</tr>
<tr>
  <td>Hide your heart</td>
  <td>Bonnie Tyler</td>
  <td>UK</td>
  <td>CBS Records</td>
  <td>9.90</td>
  <td>5.00</td>
  <td>1988</td>
  <td>YES</td>
</tr>
</table> 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:03:31.207

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <table border="1">
      <xsl:apply-templates/>
     </table>
 </xsl:template>

 <xsl:template match="cd">
   <tr><xsl:apply-templates/></tr>
 </xsl:template>

 <xsl:template match="title|artist">
  <td><xsl:value-of select="."/></td>
 </xsl:template>

 <xsl:template match="OK">
  <td>
   <xsl:value-of select=
    "substring('YESNO', 4 -3*(../price >= ../promotionprice),3)"/>
  </td>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <promotionprice>15.00</promotionprice>
        <year>1985</year>
        <OK>Yes</OK>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <promotionprice>5.00</promotionprice>
        <year>1988</year>
        <OK>Yes</OK>
    </cd>
</catalog> 
```

**产生我*猜*是想要的结果：**

```
<table border="1">
   <tr>
      <td>Empire Burlesque</td>
      <td>Bob Dylan</td>
      <td>NO</td>
   </tr>
   <tr>
      <td>Hide your heart</td>
      <td>Bonnie Tyler</td>
      <td>YES</td>
   </tr>
</table> 
```

# ruby-on-rails - Rails：确定何时完成分离运行

> ID：13309233
> 
> 赞同：2
> 
> 时间：2012-11-09T13:43:28.470
> 
> 标签：ruby-on-rails, heroku

我在 Heroku 上使用 Rails 和 heroku-api gem。

在预定的基础上，我运行一个 rake 脚本。我想在每次运行时查看该脚本的结果：

```
require 'heroku-api' 
heroku = Heroku::API.new(:api_key => 'abc123')
feedback_str = ""
begin
  heroku.post_ps('myapp', "rake do_this_and_that", { :attach => false })
  feedback_str += "-- Rake result -> OK" + "<br /><br />"
rescue Exception => exc
  feedback_str += "-- Rake result -> Failed with error: " + exc.message + "<br /><br />"     
end

puts feedback_str 
```

现在，这基本上只是告诉我 heroku.post_ps 命令执行得很好。它并没有真正告诉我它是否在运行期间崩溃（我有兴趣知道）。

我现在的问题是，在完成后，我该怎么做才能从分离的 rake 运行中获取结果（OK 或 Fail）？

# objective-c - 作为参数传递给 MDQuerySetSortComparatorBlock (Spotlight API) 的块未被调用

> ID：13309234
> 
> 赞同：3
> 
> 时间：2012-11-09T13:43:32.870
> 
> 标签：objective-c, macos, cocoa, spotlight, nsmetadataquery

我尝试在 MDQuery 框架内使用 MDQuerySetSortComparatorBlock 方法对查询结果列表进行排序。但是，作为参数传递给该方法的块根本不会被调用。下面是我用来发出查询请求的一段代码。任何帮助表示赞赏。

```
queryString = [NSString stringWithFormat:@"kMDItemDisplayName == \'*a*\'cd"];
CFStringRef query = (__bridge CFStringRef)(queryString);

queryReference = MDQueryCreate(NULL, query, (__bridge CFArrayRef)([NSArray arrayWithObjects:(id)kMDItemDisplayName, nil]), NULL);

MDQuerySetSortComparatorBlock(queryReference, ^CFComparisonResult(const CFTypeRef *attrs1, const CFTypeRef *attrs2) {

    NSLog(@"Block called");
    return kCFCompareLessThan;

});

MDQuerySetSearchScope(queryReference, (__bridge CFArrayRef)([NSArray arrayWithObjects:(id)kMDQueryScopeComputer, nil]), 0);

MDQueryExecute(queryReference, kMDQueryWantsUpdates); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:23:49.613

mdquerycreate 方法中的第四个参数已提供用于排序目的。我们可以将一组属性传递给它以对结果进行排序。如果第四个参数不为 NULL，则调用 sortcomparator 块。

# android - Android：帧动画拉伸到视图大小

> ID：13309236
> 
> 赞同：2
> 
> 时间：2012-11-09T13:43:52.680
> 
> 标签：android, animation

我试图让帧动画在下载图像之前保持在播放动画的图像视图的中心。基本上它是一个加载微调器的动画。这是我在 xml 文件中的图像视图。

```
<TableRow
          android:gravity="center"  >

            <ImageView
                android:id="@+id/imageViewUrl1"
                android:layout_width="0dp"
                android:layout_height="94dp"
                android:layout_gravity="center"
                android:layout_weight="0.5"
                android:adjustViewBounds="true"
                android:gravity="center"
                android:onClick="OnClickThumbnail"
                android:paddingTop="10dp"
                android:scaleType="fitCenter"
                android:textColor="@android:color/white" 
                android:src="@drawable/frameblack" /> 
```

这是我的框架 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>  
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"  
    android:oneshot="false" >  
        <item android:drawable="@drawable/framezero" android:duration="60" /> 
        <item android:drawable="@drawable/frameone" android:duration="60"  />  
        <item android:drawable="@drawable/frametwo" android:duration="60" />  
        <item android:drawable="@drawable/framethree" android:duration="60" /> 
    <item android:drawable="@drawable/framefour" android:duration="60" /> 
    <item android:drawable="@drawable/framefive" android:duration="60" /> 
    <item android:drawable="@drawable/framesix" android:duration="60" /> 
    <item android:drawable="@drawable/frameseven" android:duration="60" /> 
    <item android:drawable="@drawable/frameeight" android:duration="60" /> 
    <item android:drawable="@drawable/framenine" android:duration="60" /> 
    <item android:drawable="@drawable/frameten" android:duration="60"  /> 

</animation-list> 
```

这是我用来启动动画的代码

```
final ImageView imageView = (ImageView) findViewById(R.id.imageViewUrl1);   
        AnimationDrawable yourAnimation;   

        imageView.setBackgroundResource(R.drawable.loadinganim);   
        yourAnimation = (AnimationDrawable) imageView.getBackground();
                yourAnimation.start(); 
```

问题是动画拉伸了imageview的整个宽度和高度。图像视图设置为 fitCenter。我怎样才能避免这种拉伸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T07:21:31.517

我有同样的问题，问题是因为动画使用背景

解决方案是：

1.  在drawble文件夹中创建带有animationList图片的xml位图并将重力设置为中心

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <bitmap xmlns:android="http://schemas.android.com/apk/res/android"
      android:gravity="fill|center"
      android:src="@drawable/btn_wifi_anim_3" >

    </bitmap> 
    ```

2.  在运行时设置动画布局的宽度，如高度。

    ```
    wifiAnim.setLayoutParams(new LinearLayout.LayoutParams(wifiAnim.getHeight(),  wifiAnim.getHeight())); 
    ```

# css - 单击内部链接时，Opera 中的 div 消失

> ID：13309237
> 
> 赞同：1
> 
> 时间：2012-11-09T13:43:55.787
> 
> 标签：css

我对 Opera 中消失的 div 有疑问。
当您单击链接时，标题会消失...
请帮助。

```
 <style type="text/css">

  body {
  height: 100%;
  border: 0;
  margin: 0;
  padding: 0;
  font-size: 100%;
}

#top { 
    position:fixed;   
    height: 60px; 
    margin: 0; 
    background-color: #ccc;
    width:100%; 
    z-index:100;
    }

#content {
    position:relative; 
    z-index:0;
    padding-top:70px;   
}

 h1 {
    font-weight:bold;
    padding-top: 70px;
}

 </style> 
```

[问题示例](http://jsfiddle.net/KNdcL/show)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T12:34:12.990

您尚未声明#top 的“固定”位置。

尝试：

```
position: fixed;
top: 0px; 
```

# javascript - e.parameters 与其他参数一起传递

> ID：13309239
> 
> 赞同：0
> 
> 时间：2012-11-09T13:44:06.887
> 
> 标签：javascript, google-apps-script

如何在函数中传递“e”参数以及其他参数，下面的这个函数需要这些参数。

谢谢雷南奥特罗。

```
function Selectbox(e ,Name ,NameRow ,Row ,Col ,IDelement ,ID) {
  var sheet = SpreadsheetApp.openById(ID).getSheets()[0];
  var lastRow = sheet.getLastRow();
  var app = UiApp.getActiveApplication();
  var Prodb = app.createListBox().setWidth(125).setName(Name);
  var aux = e.parameter.(Name);
  if(aux = undefined)
    aux = NameRow;
  var ind = getColIndexByNamelink(aux, ID);
  Prodb.setVisibleItemCount(1);
  for (var i = 2; i < lastRow + 1; i++) {
    var Item = sheet.getRange(i, (ind * 1)).getValue();
    if (Item == "OK")
      break;
    else
    Prodb.addItem(Item);
  }
  var grid = app.getElementById(IDelement);
  grid.setWidget(Row, Col, Prodb);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:00:52.557

```
var aux = e.parameter.(Name); 
```

应该使用方括号表示法

```
var aux = e.parameter[Name]; 
```

你不是在这里比较，你是在分配

```
if(aux = undefined) 
```

应该

```
if(aux === undefined) 
```

# cocoa - 使用 NSPasteboard 数据启动应用程序

> ID：13309244
> 
> 赞同：1
> 
> 时间：2012-11-09T13:44:35.043
> 
> 标签：cocoa, nspasteboard, appleevents

我想使用 NSPasteboard 数据启动应用程序（或使用 AppleEvents 发送给它们），就像在 Finder 中将文件、文本、图像拖放到应用程序（或 Dock 中）并启动或调用应用程序中的数据。

像 LSOpenFromURLSpec 这样的启动服务功能仅适用于文件，我看到 AppleEvents 的任意参数有一个选项，但我不知道如何使它工作。

另一个问题是沙盒，但我不确定它是否可能。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:51:55.433

当您是接收者时，会发生什么取决于用户丢弃的内容：

*   ### 一个或多个文件

    向应用程序发送一个或多个打开的文档 Apple 事件。在尝试文档控制器之前，NSApplication 会尝试向其应用程序委托发送至少一条（实际上应该只有一条，但这已在几个版本中被破坏）消息。

*   ### 一个或多个 URL（不是文件：scheme）

    向应用程序发送一个或多个 get-URL 事件。您需要为此实现一个 Apple 事件处理程序。方便的是，这是[Apple 事件处理文档](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ScriptableCocoaApplications/SApps_handle_AEs/SAppsHandleAEs.html#//apple_ref/doc/uid/20001239-BBCBCIJE)使用的示例。

*   ### 任何其他数据

    您需要[实现一个服务](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/SysServices/)。Dock drop 使用哪个服务是根据类型自动检测的，我不知道它是如何在多个匹配项中进行选择的；无法指定仅某些服务可用于 Dock。关于 NSPasteboard，您猜对了：您使用粘贴板实现 I/O 服务。

* * *

当您是发件人时：

*   ### 发送文件

    最简单的方法是使用启动服务。这将代表您发送相应的 Apple 事件。

*   ### 发送 URL

    同样，Launch Services 将为您发送必要的 Apple 事件。事实上，在现代代码中，您可能会对文件和非文件 URL 使用相同的 LSOpen API。

*   ### 发送任何其他数据

    由于接收应用程序必须实现服务，因此您必须[执行服务](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/func/NSPerformService)。

    困难的部分是发现：您需要知道要执行的服务，并且它需要可用。我假设您知道要发送到哪个应用程序（模拟拖放到），这对大多数打算发送到服务的人来说是一个优势。我很确定您只需要查看目标应用程序的 Info.plist 并找到与您自己的类型最匹配的服务。

    一个潜在的问题是您不能指定应用程序包。您必须希望目标应用程序的服务能够显示在“服务”菜单中，并且您必须自己找出正确的菜单项名称。（用您自己的“服务”菜单中显示的内容进行实验，以尝试得出对应关系。）即使您提供了正确的服务项目名称并启用了该服务，也不能保证该服务将由该应用程序中的应用程序执行。您正在查看的捆绑包 - 它可能是不同的版本，甚至（可能，取决于名称的构造方式）具有相同名称的服务的不同应用程序。

    您可能需要就此[提交 Radar 。](https://bugreport.apple.com/)

# python - PyQt4 所需的基本帮助

> ID：13309255
> 
> 赞同：0
> 
> 时间：2012-11-09T13:45:04.917
> 
> 标签：python, window, pyqt, pyqt4, qtgui

基本上我有一个带有菜单栏和许多选项的主窗口。当我单击其中一个选项时，我的代码应该会打开另一个窗口。我的代码现在看起来像这样。导入所有必需的库。

```
class subwindow(self):
    //Another small window

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        super(MainWindow , self).__init__()     
        self.window()

    def window(self):
         Action = QtGui.QAction(QtGui.QIcon('action.png') , 'action' , self)          
         Action.triggered.connect(self.a)

         mb = self.menuBar()
         option = mb.addMenu('File')
         option.addAction(Action)

         self.show()

   def a(self):
         s = subwindow()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mw = MainWindow()
    sys.exit(app.exec_()) 
```

如何运行代码的子窗口部分。如何添加 QtGui.QApplication 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:41:31.823

就像@Bakuriu 在评论中说的那样，QApplication 的实例必须只有一个。这将启动应用程序的主事件循环。

您可以通过从 QDialog 类派生您的 SubWindow 类来创建一个新窗口，并根据需要对其进行自定义。您需要调用 QDialog 类的 exec_() 方法来显示对话框。

例如，在您的代码中：

```
from PyQt4 import QtGui
import sys

class SubWindow(QtGui.QDialog):
    def __init__(self):
        super(SubWindow , self).__init__()     
        label = QtGui.QLabel("Hey, subwindow here!",self);

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        super(MainWindow , self).__init__()     
        self.window()

    def window(self):
        Action = QtGui.QAction(QtGui.QIcon('action.png') , 'action' , self)          
        Action.triggered.connect(self.a)

        mb = self.menuBar()
        option = mb.addMenu('File')
        option.addAction(Action)

        self.show()

    def a(self):

        s = SubWindow()
        s.exec_()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mw = MainWindow()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:11:54.960

当您想在 Qt 应用程序和许多 gui 应用程序（如 GTK）中打开子窗口时，您打开一个对话框。下面的示例可以向您展示如何执行此操作。它有一个主窗口，其中有一个菜单，可以打开对话框并询问你的名字。如果您想自定义对话框，它使用内置对话框，您可以查看[创建自定义对话框](https://stackoverflow.com/questions/5760622/pyqt4-create-a-custom-dialog-that-returns-parameters)。有关创建对话框而不是另一个 QMainWindow 的讨论，请查看[PyQt4 中的 Multiple Windows](https://stackoverflow.com/questions/1442128/multiple-windows-in-pyqt4)。

```
import sys
from PyQt4 import QtGui

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        super(MainWindow, self).__init__()
        action = QtGui.QAction(QtGui.QIcon('action.png'), '&New Window', self)
        action.triggered.connect(self.new_win)
        self.menuBar().addMenu('&File').addAction(action)
        self.setGeometry(300, 300, 300, 200)
        self.show()

    def new_win(self):
        name, ok = QtGui.QInputDialog.getText(self, 'Input', 'Enter name:')
        print name, ok

app = QtGui.QApplication(sys.argv)
ex = MainWindow()
sys.exit(app.exec_()) 
```

# android - 设置文本时异步任务中的 NullPointerException

> ID：13309266
> 
> 赞同：0
> 
> 时间：2012-11-09T13:46:05.323
> 
> 标签：android, android-asynctask, textview, nullpointerexception, settext

我的活动中有 Asynctask。问题是当我在 onPostExecute() 中设置文本时，它给了我 NullPointerException。自定义对话框 XML 中的文本视图。我试图将 TextView 变量作为全局变量，但它是一回事。吐司工作正常。这是我的代码：

```
private class LikeDislike extends AsyncTask<String, Integer, JSONObject> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected JSONObject doInBackground(String... params) {
            UserFunctions userFunction = new UserFunctions();
            JSONObject json;
            json = userFunction.likeDislike(params[0]);
            return json;
        }

        @Override
        protected void onPostExecute(JSONObject json) {
            super.onPostExecute(json);

            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    //registerErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        String like = json.getString("like");
                        String disLike = json.getString("dislike");
                        TextView likeText = (TextView) findViewById(R.id.likenumber);
                        TextView dislikeText = (TextView) findViewById(R.id.dislikenumber);
                        likeText.setText(like);
                        dislikeText.setText(disLike);
                        //TODO
                    }else{      
                        Context context = getApplicationContext();
                        int duration = Toast.LENGTH_LONG;
                        Toast toast = Toast.makeText(context, "error in parsing", duration);
                        toast.show();
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:07:38.670

您是说 TextViews 在您的 Dialog 中，然后您必须调用 myDialog.findViewById() 来获取视图。否则 findViewById() 尝试在您的活动中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:49:42.020

```
TextView likeText = (TextView) findViewById(R.id.likenumber);
 TextView dislikeText = (TextView) findViewById(R.id.dislikenumber); 
```

这应该在`Oncreate()`通过设置 xml 文件之后在您的方法中定义`setcontentview()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:05:30.473

它返回 null 是因为您没有要求正确的组件`findViewById(int)`

您必须在 onCreateDialog （或类似的东西）内部膨胀您的自定义 XML 时执行此操作。您设置为对话框布局的那个视图，您必须询问该视图`findViewById()`，然后您的 TextView 将在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:09:09.693

首先，id R.id.likenumber 和 R.id.dislikenumber 应该在你的 xml 中，你在 setContentView 中拥有，如果你使用
Custom XML for Dialog 然后使用

```
 TextView likeText = (TextView) YOURDIALOG.findViewById(R.id.likenumber);
  TextView dislikeText = (TextView) YOURDIALOG.findViewById(R.id.dislikenumber);
  likeText.setText(like);
  dislikeText.setText(disLike); 
```

# python - 如何迭代字典列表以检查相同的键并连接

> ID：13309267
> 
> 赞同：-2
> 
> 时间：2012-11-09T13:46:06.560
> 
> 标签：python, list, dictionary

例如：

```
list  = [{'a':1122,'b':'qqqq'},{'a':1244,'b':'qqqq'},{'a':1233,'b':'wwww'}] 
```

我想连接两个字典的重复值在键 b 中包含相同的值

我想让它们像这样：

```
list = [{'a':2366,'b':'qqqq'},{'a':1233,'b':'wwww'}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:01:24.353

我假设键将始终是`a`and `b`。

我们将创建一个中间（默认）字典，其中的值`b`作为键并对 的值求和`a`。之后，我们将数据传输回列表。

```
import collections

data = [{'a':1122,'b':'qqqq'},{'a':1244,'b':'qqqq'},{'a':1233,'b':'wwww'}]

adder = collections.defaultdict(int)
for item in data:
    adder[item['b']] += item['a']

data = [{'a':value, 'b':key} for key, value in adder.iteritems()]
print(data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T13:50:37.323

你想怎么加'qqqq'和'wwww'？

也许这个代码片段会做你想做的事：

```
d = [{'a':1122,'b':'qqqq'},{'a':1244,'b':'qqqq'},{'a':1233,'b':'wwww'}]
res = []

for item in d:
    for key, value in item.iteritems():
        if key not in res:
            res[key] = []
        res[key].append(value)

print res
>>> {'a': [1122, 1244, 1233], 'b': ['qqqq', 'qqqq', 'wwww']} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:19:40.600

这是我能想到的最通用的解决方案：

```
from collections import Counter,defaultdict

def sum_list_dict(lst,spec):
    d = defaultdict(list)

    #accumulate dictionaries with same "special value"
    for dd in lst:
        d[ dd[spec] ].append(dd)

    out = []
    for v in d.values():
        #Add all keys together.  Previous version excluded the special key,
        #but that really isn't necessary as we overwrite it next anyway
        new_dict = sum((Counter(x) for x in v),Counter())
        new_dict[spec] = v[0][spec]
        out.append(dict(new_dict))
    return out

lst = [{'a':1122,'b':'qqqq'},{'a':1244,'b':'qqqq'},{'a':1233,'b':'wwww'}]
print (sum_list_dict(lst,'b')) 
```

据我所知，这个答案除了：

*   所有的字典都有`spec`钥匙。
*   输出中的 dicts 顺序无关紧要（可能可以补救）
*   如果 2 个 dicts 具有相同的键，则关联的值必须能够加在一起
*   您可以访问适当的`collections.Counter`类（python2.7+）

# android - Android垃圾收集器在我的应用程序中努力工作

> ID：13309269
> 
> 赞同：4
> 
> 时间：2012-11-09T13:46:14.440
> 
> 标签：android, garbage-collection

我的应用程序有一个带有线程的服务，它在后台运行并监听来自远程服务器的通信。当线程运行时，我在我的 LogCat 中看到了很多 dalvikvm 操作。可以吗？或者可能是某种内存泄漏：

这是我的线程运行（）：

```
@Override
public void run() {
    startKeepAliveTimer();  
    try {
            socket = new Socket(host, port);
            if (socket != null)
            {
                Log.i("ServerConnection", "Server connection opened");
                this.app.setConnectedToServer(true);
                serverManager.loginToServer();
            }
            else
                app.setConnectedToServer(false);

            while (app.isConnectedToServer()) 
            {
                app.getFacebookManager().refreshAccessToken();                      
                BufferedReader in = new BufferedReader(new InputStreamReader(
                socket.getInputStream()));
                String input;
                input = in.readLine();
                if (input != null)
                {
                    lastOnline = System.currentTimeMillis();
                    input = input.trim();
                    input = app.decrypt(input);
                    Log.e("Server Reponse", input);                 
                    serverManager.processData(app.convertToJSONObject(input));
                }
            }
        } catch (IOException e) {
            Log.e("ServerConnection", e.toString());
        }           

        Log.i("ServerConnection", "Server connection closed");
} 
```

这是我的堆栈跟踪：

```
paused 8ms
            11-09 15:42:36.862: D/dalvikvm(3806): GC_CONCURRENT freed 1367K, 33% free 10661K/15815K, paused 1ms+2ms
            11-09 15:42:36.892: D/dalvikvm(3806): GC_CONCURRENT freed 1390K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:36.902: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:36.932: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:36.952: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:36.972: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:36.992: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 12ms
            11-09 15:42:37.022: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 2ms+1ms
            11-09 15:42:37.032: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:37.052: D/dalvikvm(3806): GC_CONCURRENT freed 8K, 33% free 10644K/15815K, paused 1ms+1ms
            11-09 15:42:37.072: D/dalvikvm(3806): GC_FOR_ALLOC freed 1406K, 33% free 10629K/15815K, paused 9ms
            11-09 15:42:37.092: D/dalvikvm(3806): GC_CONCURRENT freed 1245K, 33% free 10652K/15815K, paused 1ms+0ms
            11-09 15:42:37.112: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:37.132: D/dalvikvm(3806): GC_CONCURRENT freed 8K, 33% free 10644K/15815K, paused 1ms+1ms
            11-09 15:42:37.152: D/dalvikvm(3806): GC_FOR_ALLOC freed 1406K, 33% free 10629K/15815K, paused 9ms
            11-09 15:42:37.182: D/dalvikvm(3806): GC_CONCURRENT freed 1245K, 25% free 12018K/15815K, paused 1ms+1ms
            11-09 15:42:37.212: D/dalvikvm(3806): GC_CONCURRENT freed 3208K, 33% free 10664K/15815K, paused 1ms+0ms
            11-09 15:42:37.232: D/dalvikvm(3806): GC_FOR_ALLOC freed 1426K, 33% free 10637K/15815K, paused 11ms
            11-09 15:42:37.252: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+0ms
            11-09 15:42:37.272: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:37.302: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 3ms+0ms
            11-09 15:42:37.312: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:37.332: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+0ms
            11-09 15:42:37.362: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 7ms
            11-09 15:42:37.402: D/dalvikvm(3806): GC_CONCURRENT freed 1360K, 33% free 10667K/15815K, paused 1ms+1ms
            11-09 15:42:37.432: D/dalvikvm(3806): GC_CONCURRENT freed 1299K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:37.452: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 13ms
            11-09 15:42:37.472: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:37.492: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 12ms
            11-09 15:42:37.512: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+0ms
            11-09 15:42:37.532: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:37.552: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:37.572: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:37.622: D/dalvikvm(3806): GC_CONCURRENT freed 1266K, 32% free 10761K/15815K, paused 1ms+1ms
            11-09 15:42:37.642: D/dalvikvm(3806): GC_FOR_ALLOC freed 1562K, 33% free 10629K/15815K, paused 13ms
            11-09 15:42:37.672: D/dalvikvm(3806): GC_CONCURRENT freed 1367K, 33% free 10653K/15815K, paused 1ms+1ms
            11-09 15:42:37.692: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:37.712: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:37.722: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:37.752: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 32% free 10758K/15815K, paused 2ms+1ms
            11-09 15:42:37.762: D/dalvikvm(3806): GC_FOR_ALLOC freed 1559K, 33% free 10629K/15815K, paused 11ms
            11-09 15:42:37.792: D/dalvikvm(3806): GC_CONCURRENT freed 1367K, 33% free 10653K/15815K, paused 2ms+1ms
            11-09 15:42:37.812: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:37.832: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:37.852: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:37.872: D/dalvikvm(3806): GC_CONCURRENT freed 8K, 33% free 10644K/15815K, paused 1ms+1ms
            11-09 15:42:37.882: D/dalvikvm(3806): GC_FOR_ALLOC freed 1406K, 33% free 10629K/15815K, paused 9ms
            11-09 15:42:37.912: D/dalvikvm(3806): GC_CONCURRENT freed 1245K, 33% free 10652K/15815K, paused 1ms+0ms
            11-09 15:42:37.932: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:37.962: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 0ms+1ms
            11-09 15:42:37.972: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:38.002: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 32% free 10758K/15815K, paused 1ms+1ms
            11-09 15:42:38.012: D/dalvikvm(3806): GC_FOR_ALLOC freed 1559K, 33% free 10629K/15815K, paused 12ms
            11-09 15:42:38.042: D/dalvikvm(3806): GC_CONCURRENT freed 1367K, 33% free 10653K/15815K, paused 1ms+1ms
            11-09 15:42:38.062: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:38.092: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:38.112: D/dalvikvm(3806): GC_CONCURRENT freed 1293K, 33% free 10652K/15815K, paused 1ms+0ms
            11-09 15:42:38.132: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 13ms
            11-09 15:42:38.162: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 2ms+1ms
            11-09 15:42:38.182: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 11ms
            11-09 15:42:38.202: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+0ms
            11-09 15:42:38.222: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:38.242: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.262: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 7ms
            11-09 15:42:38.272: D/dalvikvm(3806): GC_CONCURRENT freed 8K, 33% free 10644K/15815K, paused 1ms+1ms
            11-09 15:42:38.292: D/dalvikvm(3806): GC_FOR_ALLOC freed 1406K, 33% free 10629K/15815K, paused 8ms
            11-09 15:42:38.322: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10653K/15815K, paused 1ms+1ms
            11-09 15:42:38.342: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 7ms
            11-09 15:42:38.362: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.382: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:38.402: D/dalvikvm(3806): GC_CONCURRENT freed 8K, 33% free 10644K/15815K, paused 1ms+0ms
            11-09 15:42:38.412: D/dalvikvm(3806): GC_FOR_ALLOC freed 1406K, 33% free 10629K/15815K, paused 9ms
            11-09 15:42:38.442: D/dalvikvm(3806): GC_CONCURRENT freed 1245K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.462: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:38.492: D/dalvikvm(3806): GC_CONCURRENT freed 8K, 25% free 12019K/15815K, paused 1ms+2ms
            11-09 15:42:38.522: D/dalvikvm(3806): GC_CONCURRENT freed 3103K, 32% free 10769K/15815K, paused 1ms+2ms
            11-09 15:42:38.532: D/dalvikvm(3806): GC_FOR_ALLOC freed 1570K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:38.552: D/dalvikvm(3806): GC_CONCURRENT freed 1270K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.572: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 7ms
            11-09 15:42:38.592: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:38.622: D/dalvikvm(3806): GC_CONCURRENT freed 1293K, 32% free 10758K/15815K, paused 1ms+1ms
            11-09 15:42:38.632: D/dalvikvm(3806): GC_FOR_ALLOC freed 1559K, 33% free 10629K/15815K, paused 11ms
            11-09 15:42:38.662: D/dalvikvm(3806): GC_CONCURRENT freed 1246K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.682: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 13ms
            11-09 15:42:38.702: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.722: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 11ms
            11-09 15:42:38.742: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.762: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:38.782: D/dalvikvm(3806): GC_CONCURRENT freed 8K, 33% free 10644K/15815K, paused 1ms+1ms
            11-09 15:42:38.802: D/dalvikvm(3806): GC_FOR_ALLOC freed 1406K, 33% free 10629K/15815K, paused 10ms
            11-09 15:42:38.822: D/dalvikvm(3806): GC_CONCURRENT freed 1245K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:38.842: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:38.872: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 24% free 12027K/15815K, paused 1ms+1ms
            11-09 15:42:38.902: D/dalvikvm(3806): GC_CONCURRENT freed 3208K, 33% free 10672K/15815K, paused 1ms+0ms
            11-09 15:42:38.912: D/dalvikvm(3806): GC_FOR_ALLOC freed 1450K, 33% free 10629K/15815K, paused 9ms
            11-09 15:42:38.942: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10653K/15815K, paused 1ms+1ms
            11-09 15:42:38.962: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 7ms
            11-09 15:42:38.982: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.002: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:39.022: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.042: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:39.072: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:39.092: D/dalvikvm(3806): GC_CONCURRENT freed 1390K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:39.112: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:39.132: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+1ms
            11-09 15:42:39.152: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:39.172: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+0ms
            11-09 15:42:39.192: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 11ms
            11-09 15:42:39.212: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.232: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:39.252: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.272: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:39.302: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 2ms+1ms
            11-09 15:42:39.322: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 11ms
            11-09 15:42:39.342: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 2ms+1ms
            11-09 15:42:39.362: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 11ms
            11-09 15:42:39.382: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.402: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 11ms
            11-09 15:42:39.432: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 32% free 10758K/15815K, paused 1ms+1ms
            11-09 15:42:39.442: D/dalvikvm(3806): GC_FOR_ALLOC freed 1559K, 33% free 10629K/15815K, paused 11ms
            11-09 15:42:39.472: D/dalvikvm(3806): GC_CONCURRENT freed 1246K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.492: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 10ms
            11-09 15:42:39.522: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.532: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 8ms
            11-09 15:42:39.562: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 2ms+1ms
            11-09 15:42:39.572: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:39.602: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.612: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 12ms
            11-09 15:42:39.642: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.652: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 9ms
            11-09 15:42:39.682: D/dalvikvm(3806): GC_CONCURRENT freed 1269K, 32% free 10758K/15815K, paused 1ms+2ms
            11-09 15:42:39.692: D/dalvikvm(3806): GC_FOR_ALLOC freed 1559K, 33% free 10629K/15815K, paused 10ms
            11-09 15:42:39.722: D/dalvikvm(3806): GC_CONCURRENT freed 1246K, 33% free 10652K/15815K, paused 1ms+1ms
            11-09 15:42:39.742: D/dalvikvm(3806): GC_FOR_ALLOC freed 1414K, 33% free 10637K/15815K, paused 12ms
            11-09 15:42:39.762: D/dalvikvm(3806): GC_CONCURRENT freed 1366K, 33% free 10661K/15815K, paused 1ms+1ms 
```

***更新：*** 从循环内部删除所有“新”元素后，我使用了 DDMS 分配跟踪器，发现我在 input=in.readLine(); 中有很多分配；InputStream 对象中带有 wrap() 函数的东西……怎么可能？以及该怎么做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:40:28.207

这应该不是什么大问题——毕竟，这不是一个错误，而是 GC 完成了它的工作。

但是，在这种情况下，每秒都会释放大量内存（并且由于堆的状态保持不变（已分配 - 空闲），这也意味着每秒都会分配此内存。这将加剧电池消耗并会导致您的应用程序滞后。

像其他人建议的那样，尝试在 之外实例化对象`while`，而不是在每个循环中创建和删除它们。例如，将循环更改为：

```
BufferedReader in = new BufferedReader(new InputStreamReader(
            socket.getInputStream()));
while (app.isConnectedToServer()) 
        {
            app.getFacebookManager().refreshAccessToken();                      
            String input;
            input = in.readLine();
            if (input != null)
            {
                lastOnline = System.currentTimeMillis();
                input = input.trim();
                input = app.decrypt(input);
                Log.e("Server Reponse", input);                 
                serverManager.processData(app.convertToJSONObject(input));
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:00:14.077

当您拥有已创建但不再使用的对象时，垃圾收集器将激活。

这意味着，您的任何`new`关键字`run()`（包括在运行中调用的也具有此关键字的方法）都将在以后被垃圾收集。

有些东西必须一直重新创建（例如，Streams），但有些东西可能会保留在内存中（例如，套接字，如果它的生命周期处理得当）。你可以在里面挖`startKeepAliveTimer();`；`serverManager.processData(app.convertToJSONObject(input));`和其他方法来检查他们是否不是每次都在创建可以在您的服务生命周期中保留的东西。

但尽管如此……在我看来，GC 做得很好，它总是在收集，内存使用相当稳定，我不会太担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:21:52.640

我同意布迪乌斯的观点。GC 留给 android 操作系统。如果您的应用程序内存消耗过多，请尝试修改它。使用 MAT 分析器查找内存泄漏。这个视频是关于内存管理的。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。. 因此，如果您查看视频，您应该能够摆脱内存泄漏。

此外，如果您有长时间运行的操作，请确保在线程上运行它们。我建议你使用异步任务。在 UI Thread 上运行长时间运行的操作也会导致内存泄漏。

# internet-explorer - 从 DOM 中删除后再次添加面板失败

> ID：13309270
> 
> 赞同：1
> 
> 时间：2012-11-09T13:46:16.973
> 
> 标签：internet-explorer, extjs, panel, render, extjs4.1

我创建了一个面板：

```
oMainView = Ext.create('My.panel.view'); 
```

我存储`oMainView`到一个对象以稍后再次添加此面板！

然后我`oMainView`通过以下方式添加到我的 DOM `add()`：

```
// Div to put it in
var oWindowDiv = Ext.get( strStartDiv );
// Container to hold it
var oContainer = Ext.create( 'Ext.container.Container', {
         id        : 'findMe',
         layout    : 'fit',
         renderTo  : oWindowDiv,
         autoRender: true
      });
oContainer.add(oMainView); 
```

然后，我们的框架在最小化时删除了所有这些 Div。没有页面刷新。所以在最大化我想以`oMainView`同样的方式添加我已经存储的 。

这在 FF 和 Chrome 中完美运行。但是 Internet Explorer (7, 8, 9) 无法呈现面板。它只呈现空的 HTML 元素。

问题是什么？

PS。我不想重新创建面板！只需再次添加到容器中。

* * *

编辑：问题必须与创建的面板对象有关。因为添加新的测试面板有效：

```
oTest = Ext.create('Ext.panel.Panel', {
               title: 'Test',
               html: 'Text'
            }); 
```

但是添加这个存储面板不起作用，也没有错误。Div 只是保持空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:48:46.327

这不是 ExtJS 组件应该如何工作/使用的方式。请注意，渲染和布局是组件创建的重要部分，在您的情况下每次都需要完成。如果您真的不想销毁它们，我建议您隐藏未使用的组件。您可以使用卡片布局轻松存档。

但回到你的问题；该组件将存储私有参数，这些参数指示它是否已被渲染，这有时可能会导致问题。 您还应该通过使用从所有者容器调用的[remove()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Container-method-remove)从 DOM 中删除一个子组件（希望重置它的内部参数）`autoDestroy: false`。

还要检查您是否有重复的 ID！

顺便说一句，使用`renderTo: oWindowDiv`with`autoRender: true`没有意义。在您的情况下，第二个配置没有任何作用，因为您已经有一个渲染目标，容器被渲染到该目标中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:53:14.823

几天后终于解决了：

在 Ext 容器从 DOM 中删除之前，我需要调用`.removeAll(false);`.

# unit-testing - 在单元测试期间实例化 MVC 控制器时出现 VerificationException

> ID：13309278
> 
> 赞同：0
> 
> 时间：2012-11-09T13:46:44.830
> 
> 标签：unit-testing, asp.net-mvc-4, visual-studio-2012, microsoft-fakes

我正在使用 进行一些单元测试，并且在添加假程序集`Microsoft Fakes Framework`之前一切正常。`System.Web.Mvc`从那一刻起，每当我尝试在单元测试中初始化控制器时，`VerificationException`都会抛出 a 。当我删除 Fake 程序集引用时，一切正常。但是，我需要这个假的来填充一个对象的`Action`方法。`UrlHelper`

我在 SO 上看到了一些链接，但它们主要是关于**FluentValidation**的，这对我没有帮助。此外，**Rich Czyzewski**的一篇出色的文章，[ASP.NET MVC4 中的非侵入性单元测试 - Microsoft Fakes Deep Dive](http://www.richonsoftware.com/post/2012/05/02/Noninvasive-Unit-Testing-in-ASPNET-MVC-A-Microsoft-Fakes-Deep-Dive.aspx)，并没有帮助，因为我完全不知道他是如何设法实例化`UrlHelper`的。我遵循了他展示的相同示例，但`UrlHelper`构造函数也抛出`VerificationException`了。

除了 Rich 的存根，我还添加了`HttpResponseBase`,`HttpSessionBase`等来创建类似的场景，可以在**Scott Hanselman**的博客、 Mix08 的[ASP.NET MVC Session、TDD 和 MvcMockHelpers 上找到](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)，但仍然没有运气。

有没有人设法解决这个问题以及如何解决？

在此先感谢大家！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-09T16:31:48.670

这是 Visual Studio 2012 RTM 版本附带的 Fakes 版本的限制。我们已在即将到来的季度更新 2 中修复它，CTP 将在几周后可供下载。

# database - 如何将 Jena 模型存储在 SDB 数据库中？

> ID：13309279
> 
> 赞同：0
> 
> 时间：2012-11-09T13:46:47.150
> 
> 标签：database, jena

我有一个本体创建，我已经填充了个人。其实我的本体是一个可以`OntModel`说的对象`model`。如何将我的模型的所有个体存储在`SDB`数据库中。到目前为止，我看到的所有示例都只解决了从 SDB 数据库读取数据的问题。但首先，它们是怎么放在那里的！

感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:03:50.573

一旦你打开一个`Model`由 SDB 存储支持的，它就是一个普通的 Jena 模型，将文件读入模型并将三元组断言到模型中的标准技术将自动写入底层关系数据库。[文件](http://jena.apache.org/documentation/sdb/javaapi.html#loading-data)证实了这一点。

您还可以使用[命令行实用程序](http://jena.apache.org/documentation/sdb/commands.html#loading-data)将数据直接加载到 SDB 存储中。

# c# - 如何使用 C# 迭代“相关链接”

> ID：13309285
> 
> 赞同：5
> 
> 时间：2012-11-09T13:47:12.583
> 
> 标签：c#, user-controls, umbraco

我在使用 umbraco 默认数据类型“相关链接”时遇到问题。我的问题是我想迭代属性的子项/选项。我见过使用 xml 和 xslt 的示例，但我想知道是否有可能在用户控件中使用纯 c#。

像这样的东西（但一个工作变体）

```
Node node = new Node(Node.getCurrentNodeId());
var linklist = node.GetProperty("link");
if (node.GetProperty("link") != null)
{
    foreach (var item in linklist)
    { 
        //get each item here
    }
} 
```

谢谢！

（我也在[这里](http://our.umbraco.org/forum/developers/api-questions/36007-How-to-iterate-a-Related-Links-using-C)发布了这个问题）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T15:38:11.877

我认为你应该能够做这样的事情（剃刀）

```
@using umbraco.MacroEngines
@inherits DynamicNodeContext
@{
    var root = Model.AncestorOrSelf();
    var links = root.FooterLinks.link;
    <ul class="nav nav-pills">
    <li><span>@Dictionary.RelatedLinks</span></li>
    @foreach (var item in links)
    {
        var url = item.type == "internal" ? Library.NodeById(item.link).Url : item.link;
        var rel = item.type == "external" ? " rel=\"external\"" : string.Empty;
        var title = item.title;
        <li><a href="@url"@Html.Raw(rel)>@title</a></li>
    }
    </ul>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:35:49.567

你知道 XML 序列化/反序列化吗？

我会研究这个领域，通过将 XML 反序列化为 C# 对象（例如数组列表），它可以让您更轻松地阅读 XML 数据。

[http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)

希望这是有用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:44:50.187

好的，这就是我为使其工作所做的工作。我使用了 Jorge 的答案，但改变了一点，非常少。通过查看 umbraco.config 这就是我所做的

```
@using umbraco.MacroEngines
@using umbraco.NodeFactory;
@{
var root = Model;
var links = root.link;
if (links == null)
{
    return;
}
foreach(var item in links)
{
    DynamicNode linkNode = Model.NodeById(@item.link);
    Response.Redirect(@linkNode.Url);
    break;
}
} 
```

我想我可以在用户控件中使用一点 Derek 的 asnwer。我的意思是我可以像往常一样选择属性，并使用 XmlTextReader 来读取所选属性的 xml 部分。谢谢你的支持！

# ruby-on-rails - Sidekiq 独特作业的奇怪行为

> ID：13309286
> 
> 赞同：3
> 
> 时间：2012-11-09T13:47:16.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sidekiq

好。我正在使用 Sidekiq 在后台转换视频文件。我使用[sidekiq-unique-jobs gem](https://github.com/form26/sidekiq-unique-jobs)来避免工作与相同的有效负载对象重复。

我在默认队列中运行我的 sidekiq 进程，没有任何选项，并发为 25。

问题是：经过长时间处理的每个作业（视频文件非常大）都会进入队列积压，但已处理作业的大小也在增加。

工作就像既不完整也不独特。我被困住了。提前致谢

升级版：

我将 Puma 作为 Web 服务器运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T16:31:04.690

尝试在没有`sidekiq-unique-jobs`gem 的情况下运行它。无论如何，它只是保护你免受欺骗 30 分钟。该 gem 将其在 Redis 中的哈希键设置为在 30 分钟后自动过期（可配置）。`sidekiq`它本身将其作业设置为在 24 小时后在 Redis 中自动过期。

我显然看不到您的应用程序，但我敢打赌您根本不想经常处理同一个文件。我将在应用程序层控制它，并跟踪我自己的 hashkey 做一些类似于 unique-jobs gem 正在做的事情：

```
hash = Digest::MD5.hexdigest(Sidekiq.dump_json(md5_arguments)) 
```

中间件也可能`sidekiq-unique-jobs`妨碍`sidekiq`了解工作是否正确完成。我敢打赌，没有很多人在您的相同配置中使用长期运行的作业来测试它。

如果您在没有附加中间件的情况下继续看到此行为，请`resque`尝试一下。我从未见过这种 gem 的这种行为，失败的作业在管理 GUI 中有一个有用的重试选项。

sidekiq 的主要好处是它是多线程的。即便如此，具有大型视频进程的 25 个并发可能会有点推动它。根据我的经验，分叉更稳定、更便携，对应用程序的线程安全 (YMMV) 的担忧更少。

无论您做什么，请确保您了解这些系统将其数据放在 Redis 中的自动到期 TTL 设置。工作的规模和性质意味着工作可以轻松备份 24 小时。这些自动删除发生在数据库层。如果作业被自动删除，应用层没有回调来发出警告。例如，在`sidekiq`代码中，他们引入了自动过期行为以“避免任何可能的泄漏”。（[参考](https://github.com/mperham/sidekiq/blob/master/Changes.md)）如果您真的需要执行这些作业，这不是很令人鼓舞。

# javascript - Three.js - 几何在另一个之上

> ID：13309289
> 
> 赞同：11
> 
> 时间：2012-11-09T13:47:33.607
> 
> 标签：javascript, three.js

在 Three.js 中是否可以在场景顶部始终渲染网格，即使它的位置在所有对象的后面？我正在使用网格实现套索选择，我需要在场景的其余部分之上渲染选择框。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-09T14:16:55.727

是的。

首先这样做：

```
renderer.autoClear = false; 
```

然后创建第二个场景，其中仅包含您想要位于顶部的对象。然后，在您的渲染循环中：

```
renderer.clear();                     // clear buffers
renderer.render( scene, camera );     // render scene 1
renderer.clearDepth();                // clear depth buffer
renderer.render( scene2, camera );    // render scene 2 
```

* * *

编辑：另一种解决方案是只有一个场景，但使用这种模式：

```
mesh.renderOrder = 999;
mesh.onBeforeRender = function( renderer ) { renderer.clearDepth(); }; 
```

如果网格具有单一材质，它将在“顶部”渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-10T12:42:35.513

如果您只想在前面渲染一个网格，您还可以通过`depthTest`将该对象的材质设置为`false`：

```
var onTopMaterial = new THREE.MeshStandardMaterial({
  color: 'red',
  depthTest: false
});

mesh.material = onTopMaterial; 
```

[**检查这个小提琴**](https://jsfiddle.net/wilt/k03h6tp9/)中的演示[](https://jsfiddle.net/wilt/k03h6tp9/)

 *** * *

**注意：**确保您已`renderer.sortObjects`设置为默认`true`值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-23T18:16:24.817

除了设置 object.renderOrder 之外，您还必须在相关对象上将 material.depthTest 设置为 false。

```
var spriteMaterial = new THREE.SpriteMaterial( { map: texture1, depthTest: false} );

    this.context1 = context1;
    this.texture1 = texture1;

    var sprite1 = new THREE.Sprite( spriteMaterial );
    sprite1.scale.set(30,15,1);
    sprite1.center.x=0;
    sprite1.center.y=0;
    sprite1.position.set( 0, 0, 0 );
    this.scene.add( sprite1 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-09T06:50:58.627

以下是一个工作示例，它有一个`VisualLayers`用于管理任意数量层的类，它使用了`renderer.autoClear = false`West Langley 在他的回答中提到的清除深度技术。

这种方法很好，因为`renderOrder`对象没有被修改（这是另一种方法），因此不会引入其他不同的问题，您可以将其保存用于与分层分离的其他用例。

尝试使用 UI 中的选项来查看它的作用：

```
// @ts-check

////////////////////////
// LAYER SYSTEM
////////////////////////

/** @typedef {{name: string, backingScene: THREE.Scene, order: number}} Layer */

class VisualLayers {
    /**
     * @type {Array<Layer>}
     * @private
     */
    __layers = [];

    constructor(
        /** @private @type {THREE.WebGLRenderer} */ __renderer,
        /** @private @type {typeof THREE.Scene} */ __Scene = THREE.Scene
    ) {
        this.__renderer = __renderer;
        this.__Scene = __Scene;
    }

    defineLayer(/** @type {string} */ name, /** @type {number=} */ order = 0) {
        const layer = this.__getLayer(name);

        // The default layer always has order 0.
        const previousOrder = layer.order;
        layer.order = name === "default" ? 0 : order;

        // Sort only if order changed.
        if (previousOrder !== layer.order)
            this.__layers.sort((a, b) => a.order - b.order);

        return layer;
    }

    /**
     * Get a layer by name (if it doesn't exist, creates it with default order 0).
     * @private
     */
    __getLayer(/** @type {string} */ name) {
        let layer = this.__layers.find((l) => l.name === name);

        if (!layer) {
            layer = { name, backingScene: new this.__Scene(), order: 0 };
            layer.backingScene.autoUpdate = false;
            this.__layers.push(layer);
        }

        return layer;
    }

    removeLayer(/** @type {string} */ name) {
        const index = this.__layers.findIndex((l) => {
            if (l.name === name) {
                l.backingScene.children.length = 0;
                return true;
            }

            return false;
        });

        if (index >= 0) this.__layers.splice(index, 1);
    }

    hasLayer(/** @type {string} */ name) {
        return this.__layers.some((l) => l.name === name);
    }

    /** @readonly */
    get layerCount() {
        return this.__layers.length;
    }

    addObjectToLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {string | string[]} */ layers
    ) {
        if (Array.isArray(layers)) {
            for (const name of layers) this.__addObjectToLayer(obj, name);
            return;
        }

        this.__addObjectToLayer(obj, layers);
    }

    addObjectsToLayer(
        /** @type {THREE.Object3D[]} */ objects,
        /** @type {string | string[]} */ layers
    ) {
        for (const obj of objects) {
            this.addObjectToLayer(obj, layers);
        }
    }

    /** @private @readonly */
    __emptyArray = Object.freeze([]);

    /** @private */
    __addObjectToLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {string} */ name
    ) {
        const layer = this.__getLayer(name);
        const proxy = Object.create(obj, {
            children: { get: () => this.__emptyArray }
        });
        layer.backingScene.children.push(proxy);
    }

    removeObjectFromLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {string | string[]} */ nameOrNames
    ) {
        if (Array.isArray(nameOrNames)) {
            for (const name of nameOrNames) {
                const layer = this.__layers.find((l) => l.name === name);
                if (!layer) continue;
                this.__removeObjectFromLayer(obj, layer);
            }
            return;
        }

        const layer = this.__layers.find((l) => l.name === nameOrNames);
        if (!layer) return;
        this.__removeObjectFromLayer(obj, layer);
    }

    /** @private */
    __removeObjectFromLayer(
        /** @type {THREE.Object3D} */ obj,
        /** @type {Layer} */ layer
    ) {
        const children = layer.backingScene.children;
        const index = children.findIndex(
            (proxy) => /** @type {any} */ (proxy).__proto__ === obj
        );

        if (index >= 0) {
            children[index] = children[children.length - 1];
            children.pop();
        }
    }

    removeObjectsFromAllLayers(/** @type {THREE.Object3D[]} */ objects) {
        for (const layer of this.__layers) {
            for (const obj of objects) {
                this.__removeObjectFromLayer(obj, layer);
            }
        }
    }

    render(
        /** @type {THREE.Camera} */ camera,
        /** @type {(layerName: string) => void} */ beforeEach,
        /** @type {(layerName: string) => void} */ afterEach
    ) {
        for (const layer of this.__layers) {
            beforeEach(layer.name);
            this.__renderer.render(layer.backingScene, camera);
            afterEach(layer.name);
        }
    }
}

//////////////////////
// VARS
//////////////////////

let camera, stats, geometry, material, object, object2, root;
let time = 0;
/** @type {THREE.Scene} */
let scene;
/** @type {THREE.WebGLRenderer} */
let renderer;
/** @type {VisualLayers} */
let visualLayers;
const clock = new THREE.Clock();
const greenColor = "#27ae60";
const options = {
    useLayers: true,
    showMiddleBox: true,
    rotate: true,
    layer2Order: 2
};

//////////////////////
// INIT
//////////////////////

~(function init() {
    setup3D();
    renderLoop();
})();

////////////////////////////////
// SETUP 3D
////////////////////////////////

function setup3D() {
    const container = document.createElement("div");
    container.id = "container";
    document.body.appendChild(container);

    // CAMERA
    camera = new THREE.PerspectiveCamera(
        70,
        window.innerWidth / window.innerHeight,
        1,
        10000
    );
    camera.position.x = 0;
    camera.position.z = 500;
    camera.position.y = 0;

    scene = new THREE.Scene();

    // RENDERERS

    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setClearColor(0x111111);
    container.appendChild(renderer.domElement);

    // LAYERS

    visualLayers = new VisualLayers(renderer);
    // Layers don't have to be defined. Adding an object to a layer will
    // automatically create the layer with order 0\. But let's define layers with
    // order values.
    visualLayers.defineLayer("layer1", 1);
    visualLayers.defineLayer("layer2", 2);
    visualLayers.defineLayer("layer3", 3);

    // LIGHTS

    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(300, 0, 300);
    scene.add(directionalLight);
    visualLayers.addObjectToLayer(directionalLight, [
        "layer1",
        "layer2",
        "layer3"
    ]);

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
    scene.add(ambientLight);
    visualLayers.addObjectToLayer(ambientLight, ["layer1", "layer2", "layer3"]);

    // GEOMETRY

    root = new THREE.Object3D();
    scene.add(root);

    geometry = new THREE.BoxGeometry(100, 100, 100);
    material = new THREE.MeshPhongMaterial({
        color: greenColor,
        transparent: false,
        opacity: 1
    });

    object = new THREE.Mesh(geometry, material);
    root.add(object);
    visualLayers.addObjectToLayer(object, "layer1");
    object.position.y = 80;
    object.position.z = -20;
    // object.rotation.y = -Math.PI / 5

    object2 = new THREE.Mesh(geometry, material);
    object.add(object2);
    visualLayers.addObjectToLayer(object2, "layer2");
    object2.position.y -= 80;
    object2.position.z = -20;
    object2.rotation.y = -Math.PI / 5;

    const object3 = new THREE.Mesh(geometry, material);
    object2.add(object3);
    visualLayers.addObjectToLayer(object3, "layer3");
    object3.position.y -= 80;
    object3.position.z = -20;
    object3.rotation.y = -Math.PI / 5;

    // GUI

    const pane = new Tweakpane({
        title: "VisualLayers"
    });
    pane.addInput(options, "useLayers", { label: "use layers" });
    pane.addInput(options, "showMiddleBox", { label: "show middle box" });
    pane.addInput(options, "rotate");
    pane
        .addInput(options, "layer2Order", {
            label: "layer2 order",
            options: {
                0: 0,
                2: 2,
                4: 4
            }
        })
        .on("change", () => visualLayers.defineLayer("layer2", options.layer2Order));

    // STATS
    // SEE: https://github.com/mrdoob/stats.js

    stats = new Stats();
    stats.domElement.style.position = "absolute";
    stats.domElement.style.left = "0px";
    stats.domElement.style.top = "0px";
    stats.setMode(0);
    document.body.appendChild(stats.domElement);
}

//////////////////////
// RESIZE
//////////////////////

(window.onresize = function (event) {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
})();

//////////////////////
// RAF RENDER LOOP
//////////////////////

function render() {
    stats.begin();

    if (options.rotate) {
        time += clock.getDelta();
        object.rotation.y += 0.02;
        root.rotation.y = Math.PI / 2 + (Math.PI / 6) * Math.sin(time * 0.001);
    }

    object2.visible = options.showMiddleBox;

    if (options.useLayers) {
        scene.updateWorldMatrix(true, true);
        renderer.autoClear = false;
        renderer.clear();
        visualLayers.render(camera, beforeEachLayerRender, afterEachLayerRender);
    } else {
        renderer.autoClear = true;
        renderer.render(scene, camera);
    }

    stats.end();
}

function renderLoop() {
    render();
    requestAnimationFrame(renderLoop);
}

function beforeEachLayerRender(layer) {}
function afterEachLayerRender(layer) {
    renderer.clearDepth();
}
```

```
html,
body,
#container {
    margin: 0px;
    padding: 0px;
    width: 100%;
    height: 100%;
}

canvas {
    background: transparent;
    display: block;
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
}
```

```
<script src="https://cdn.jsdelivr.net/npm/tweakpane@1.5.5/dist/tweakpane.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/stats.js/r11/Stats.min.js"></script>
<script src="//unpkg.com/three@0.121.1/build/three.min.js"></script>
<script src="//unpkg.com/postprocessing@6.17.4/build/postprocessing.js"></script>
```

（[codepen 上的示例](https://codepen.io/trusktr/pen/fba5c480de9f08357152dad3c79b378b?editors=0010)）**

# ajax - Ajax 脚本突然无响应

> ID：13309297
> 
> 赞同：2
> 
> 时间：2012-11-09T13:47:50.200
> 
> 标签：ajax

在网站的主页上，我有以下 2 个 ajax 函数。只是对于网站的一些用户，前几天第一个（loadStaticView）突然开始没有响应，它一直显示预加载img（第二个，loadDynamicView，女巫类似，在页面中被调用2次作为第一个，仍在工作）。如果这些用户启动 loadStaticView 调用的 url，它可以正常工作，因此 ajax 脚本应该存在一些问题（可能与他们在工作站中所做的一些更改有关？）。任何想法？提前致谢

```
function loadStaticView(staticView) {
                try {
                    $('#content'+staticView).html("<div align='center' style='width: 265px;padding-top: 34px; padding-right:30px;padding-bottom: 20px;padding-left:30px;'><img style='vertical-align:middle;' src='/tweb/img/2/ba_loader.gif' align='center'/></div>");
                    $.ajax({
                        type: "POST",
                        url: '/tweb/twebservlet/home/DispatchServlet',
                        dataType: "html",
                        data: {
                            LoadStaticView: "",
                            StaticView: staticView
                        },
                        success:function(dati, textStatus, XMLHttpRequest){
                            $('#content'+staticView).html("");
                            $('#content'+staticView).html(dati);
                        },
                        error:function (xhr, ajaxOptions, thrownError){
                            $("#dynamicView").html("error");
                        }
                    });

                } catch (err){
                    document.getElementById("dynamicView").html = "error";
                }
            } 
```

* * *

```
 function loadDynamicView(dynamicView, market, data, page) {
            try {
                var dataNow = new Date().getTime();
                $('#content'+dynamicView+market).html("<div align='center' style='width: 265px;padding:52px 30px;'><img style='vertical-align:middle;' src='/tweb/img/2/ba_loader.gif' align='center'/></div>");
                $.ajax({
                    type: "POST",
                    url: '/tweb/twebservlet/home/DispatchServlet',
                    dataType: "html",
                    data: {
                        LoadView: "",
                        DynamicView: dynamicView,                        
                        Market: market,
                        View: data,
                        page: page,
                        date: dataNow
                    },
                    success:function(dati, textStatus, XMLHttpRequest){
                        $('#content'+dynamicView+market).html("");
                        $('#content'+dynamicView+market).html(dati);
                    },
                    error:function (xhr, ajaxOptions, thrownError){
                        $("#dynamicView").html("error");
                    }    
                });

                changeStyle(dynamicView, data, null);

            } catch (err){
                document.getElementById("dynamicView").html = "error";
            }
        } 
```

# android - 在企业移动混合应用程序中使用 Google Maps Javascript API v3

> ID：13309308
> 
> 赞同：2
> 
> 时间：2012-11-09T13:48:21.373
> 
> 标签：android, google-maps, cordova

我是谷歌地图 API 的新手。能够使其在我的应用程序中运行而无需传递任何客户端 ID。当我使用 clientid 时，我遇到了下面提到的错误“Google 已为此应用程序禁用 Maps API ....”。根据地图文档，我们需要注册调用者 domaian/url。当我在混合 android 应用程序中使用地图时，我不清楚要注册的网址。我看到请求“android-assets/www/xxx”进入服务器。

这个问题有什么解决方法吗？我在这里做错了吗？

网址: : [http://maps.google.com/maps/api/js?sensor=false&client=gme-xxx&callback=yyy](http://maps.google.com/maps/api/js?sensor=false&client=gme-xxx&callback=yyy)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T15:10:05.127

我相信它是您使用来自 www.yourdomain.com 的地图的网站

人族

# wia - WIA adf 扫描代码无法正常工作

> ID：13309311
> 
> 赞同：3
> 
> 时间：2012-11-09T13:48:33.230
> 
> 标签：wia

在开始之前，我对 Visual Basic 有一点了解。我可以阅读别人的代码并根据我的需要进行转换，但我不是程序员。

我正在尝试使用 Visual Basic 2010 创建一个扫描程序。

我在我的机器上设置了一个 xerox documate 3115 ADF 扫描仪，并使用了来自以下站点的 c# 代码：

[http://forums.codeguru.com/showthrea...ion-(WIA)-代码](http://forums.codeguru.com/showthrea...ion-(WIA)-Code)

并使用以下站点将其转换为 Visual Basic：

[http://www.developerfusion.com/tools.../csharp-to-vb/](http://www.developerfusion.com/tools.../csharp-to-vb/)

在进行了一些小的更改以消除错误后，我能够从 adf 扫描一页并且程序运行正常。

我遇到的问题是，如果我在 adf 中有多个页面，那么它会占用一页并在弹出页面之前停止，然后我必须再次单击表单上的扫描按钮以弹出它并获取下一页. 如果我只在 adf 中放置一页，那么它会获取该页面并将其弹出。

我已经在整个网络上寻找答案（包括这个网站上的大多数 wia 问题），但似乎最终只看到了相同的几个网页。

# c# - 进入工具栏中的 menuitem 选项卡显示访问指示符

> ID：13309317
> 
> 赞同：1
> 
> 时间：2012-11-09T13:48:57.690
> 
> 标签：c#, wpf

我在包含菜单的用户控件中有一个工具栏。当我进入菜单时，窗口中的所有访问键都带有下划线。有什么方法可以抑制这种行为，因为它看起来很奇怪。

您可以使用以下快速示例看到这一点：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="scratch.Window1"
    x:Name="Window"
    Title="Window1"
    Width="640" Height="480">
    <Window.Resources>
        <Style TargetType="Label">
            <Setter Property="MinWidth" Value="75"/>
        </Style>
        <Style TargetType="StackPanel">
            <Setter Property="Margin" Value="3" />
        </Style>
    </Window.Resources>
<StackPanel>
    <StackPanel Orientation="Horizontal">
        <Label Content="_First"/>
        <TextBox Text="First" />
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <Label Content="_Second"/>
        <TextBox Text="Second" />
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <Label Content="_Third"/>
        <TextBox Text="Third" />
    </StackPanel>

    <ToolBar>
        <Button Content="Tool1"/>
        <Menu>
            <MenuItem Header="Menu">
                <MenuItem Header="SubItem1" />
                <MenuItem Header="SubItem2" />
            </MenuItem>
        </Menu>
    </ToolBar>

    </StackPanel>
</Window> 
```

通过工具栏从文本框切换，您会看到一旦菜单获得焦点，访问指示符就会显示在标签中。

# c# - 使用 linq 从 xml 文件中查找

> ID：13309321
> 
> 赞同：2
> 
> 时间：2012-11-09T13:49:10.967
> 
> 标签：c#, xml, winforms, linq

我想读取一个 xml 文件并加载为列表并在表单加载期间查找值。我如何读取文件并将其作为列表获取？？？XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Types>
<Type>t1-p2</Type>
<Type>t1-k1</Type>
<Type>t2-s2</Type>
</Types> 
```

类文件：

```
class Testtypes
    {
        public string Type;

        public static List<Testtypes> getTypes()
        {
            XDocument doc = XDocument.Parse("test.xml");
            var q = doc.Descendants("Type").ToList();
            return getTypes.();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:54:21.287

首先，我*不会*有一个公共领域。至少使用一个属性。我还会将该类重命名为更有意义的名称。但是您可以将代码更改为：

```
class Testtypes
{
    public string Type { get; private set; }

    public static List<Testtypes> FromXml(string filename)
    {
        return XDocument.Load(filename)
                        .Root.Elements("Type")
                        .Select(x => new Testtypes { Type = x.Value })
                        .ToList();
    }
} 
```

或者假设您只有一个字符串，您可以避免创建自己的类型：

```
public static List<string> FromXml(string filename)
{
    return XDocument.Load(filename)
                    .Root.Elements("Type")
                    .Select(x => x.Value)
                    .ToList();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:06:09.950

Parse 方法接收一个准备好的字符串，您首先需要在其中读取文件。使用 Load 方法读取文件，并准备好使用 Descendants 方法，如下所示：

```
public static IEnumerable<string> GetTypes()
{
    XDocument doc = XDocument.Load("../../test.xml");
    var xmlElementList = doc.Descendants("Type");
    var stringList = xmlElementList.Select(element => element.Value);

    return stringList;
} 
```

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:02:26.987

```
 private static List<TestType> testType;

            public static List<TestType> TestTypes
            {
                get
                {
                    if (testType== null)
                    {
                        var fileName = GetFilePath("TestTypes.xml");

                        testType= DeseriaizeXml<List<TestType>>(fileName);
                    }

                    return testType;
                }
            }

  private static T DeseriaizeXml<T>(String fileName) where T : class
            {
                using (var stream = File.OpenRead(fileName))
                {
                    return DeseriaizeXml<T>(stream);
                }
            }

            private static T DeseriaizeXml<T>(Stream stream) where T : class
            {
                using (
                    var xmlReader = XmlDictionaryReader.CreateTextReader(stream, Encoding.UTF8,
                                                                         new XmlDictionaryReaderQuotas(), null))
                {
                    var xmlSer = new XmlSerializer(typeof (T));

                    return xmlSer.Deserialize(xmlReader) as T;
                }
            }

     private static String GetFilePath(String fileName)
        {
            var asmUri = new Uri(Assembly.GetExecutingAssembly().CodeBase);

            if (asmUri.IsFile)
            {
                var asmFolder = Directory.GetParent(asmUri.LocalPath);

                return Path.Combine(asmFolder.FullName, fileName);
            }

            throw new Exception();
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T15:11:38.963

您需要使用该`Load()`方法加载文件，然后`Testtype`为每个值创建一个新文件。由于每个 Type 都是根节点的子节点，`Elements()`因此是您想要的，而不是`Descendants()`.

```
class Testtypes
{
    public string Type;

    public static List<Testtypes> getTypes()
    {
        var doc = XDocument.Load("test.xml");
        return doc.Root.Elements("Type")
                   .Select(x => new Testtypes
                   {
                       Type = x.Value
                   }
                   .ToList();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T15:48:00.387

如果我的 xml 如此简单，我会这样做

```
var myList=XElement.Load("data.xml")
                   .DescendantNodes()
                   .Where(N => N.NodeType == XmlNodeType.Text); 
```

# jquery - 如何将硬编码/重复的 jQuery 语法和浓缩成动态的

> ID：13309322
> 
> 赞同：0
> 
> 时间：2012-11-09T13:49:22.867
> 
> 标签：jquery

我有一个带有一些 jQuery 代码的网页。现在，我正在对我的 jQuery 语法进行硬编码，以适应对 DB 表中 7 行的更新，并预计还会增加大约 3 行。但我不想每天检查我的应用程序以查看数据库表是否已超过 10 行，然后必须添加更多硬编码的 jQuery 语法。

谁能帮我把我的 jQuery 压缩成真正的动态——从而消除它的硬编码性质并使它能够处理任意数量的行？谢谢。

```
<style type="text/css">
div.icons {
    clear:both;
    float:left;
    height:24px;
    width:30px;
}
div.content {
    height:24px;
}
div.show {
    display:block;
}
div.hide {
    display:none;
}
input.textbox {
    padding:0;
    margin:0;
    width:300px;
}
input.submitButton {
    padding:0;
    margin:0;
    vertical-align:middle;
}
img.button {
    vertical-align:middle;
}
</style>

<script type="text/javascript">
$(document).ready(function(){
    $('#b-001').on('click', function(){
        //$('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-001-on').toggle();
        $('#d-001-off').toggle();
        $('#d-001-off-focus').focus();
    });
    $('#b-002').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        //$('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-002-on').toggle();
        $('#d-002-off').toggle();
        $('#d-002-off-focus').focus();
    });
    $('#b-003').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        //$('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-003-on').toggle();
        $('#d-003-off').toggle();
        $('#d-003-off-focus').focus();
    });
    $('#b-004').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        //$('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-004-on').toggle();
        $('#d-004-off').toggle();
        $('#d-004-off-focus').focus();
    });
    $('#b-005').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        //$('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-005-on').toggle();
        $('#d-005-off').toggle();
        $('#d-005-off-focus').focus();
    });
    $('#b-006').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        //$('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-006-on').toggle();
        $('#d-006-off').toggle();
        $('#d-006-off-focus').focus();
    });
    $('#b-007').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        //$('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-007-on').toggle();
        $('#d-007-off').toggle();
        $('#d-007-off-focus').focus();
    });
    $('#b-008').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        //$('#d-008-off').hide('slow');$('#d-008-on').show('slow');

        $('#d-008-on').toggle();
        $('#d-008-off').toggle();
        $('#d-008-off-focus').focus();
    });

    // 2 extra for growth
    $('#b-009').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');
        //$('#d-009-off').hide('slow');$('#d-009-on').show('slow');
        $('#d-010-off').hide('slow');$('#d-010-on').show('slow');

        $('#d-009-on').toggle();
        $('#d-009-off').toggle();
        $('#d-009-off-focus').focus();
    });
    $('#b-010').on('click', function(){
        $('#d-001-off').hide('slow');$('#d-001-on').show('slow');
        $('#d-002-off').hide('slow');$('#d-002-on').show('slow');
        $('#d-003-off').hide('slow');$('#d-003-on').show('slow');
        $('#d-004-off').hide('slow');$('#d-004-on').show('slow');
        $('#d-005-off').hide('slow');$('#d-005-on').show('slow');
        $('#d-006-off').hide('slow');$('#d-006-on').show('slow');
        $('#d-007-off').hide('slow');$('#d-007-on').show('slow');
        $('#d-008-off').hide('slow');$('#d-008-on').show('slow');
        $('#d-009-off').hide('slow');$('#d-009-on').show('slow');
        //$('#d-010-off').hide('slow');$('#d-010-on').show('slow');

        $('#d-010-on').toggle();
        $('#d-010-off').toggle();
        $('#d-010-off-focus').focus();
    });
})
</script>

<div class="content-wrapper">
    <div class="icons"><a id="b-001"><img src="images/edit.png" alt="Edit button" class="button" title="Edit" /></a></div>
    <div class="content">
        <div class="show" id="d-001-on">Northside</div>
        <div class="hide" id="d-001-off"><input class="textbox" id="d-001-off-focus" name="d-001-off" maxlength="50" type="text" value="Northside" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('update');$('#location').val('001');" title="Update" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div>
</div>

<div class="content-wrapper">
    <div class="icons"><a id="b-002"><img src="images/edit.png" alt="Edit button" class="button" title="Edit" /></a></div>
    <div class="content">
        <div class="show" id="d-002-on">South Lawn</div>
        <div class="hide" id="d-002-off"><input class="textbox" id="d-002-off-focus" name="d-002-off" maxlength="50" type="text" value="South Lawn" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('update');$('#location').val('002');" title="Update" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div>
</div>

<div class="content-wrapper">
    <div class="icons"><a id="b-003"><img src="images/edit.png" alt="Edit button" class="button" title="Edit" /></a></div>
    <div class="content">
        <div class="show" id="d-003-on">East Wing</div>
        <div class="hide" id="d-003-off"><input class="textbox" id="d-003-off-focus" name="d-003-off" maxlength="50" type="text" value="East Wing" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('update');$('#location').val('003');" title="Update" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div>
</div>

<div class="content-wrapper">
    <div class="icons"><a id="b-004"><img src="images/edit.png" alt="Edit button" class="button" title="Edit" /></a></div>
    <div class="content">
        <div class="show" id="d-004-on">West Wing</div>
        <div class="hide" id="d-004-off"><input class="textbox" id="d-004-off-focus" name="d-004-off" maxlength="50" type="text" value="West Wing" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('update');$('#location').val('004');" title="Update" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div>
</div>

<div class="content-wrapper">
    <div class="icons"><a id="b-005"><img src="images/edit.png" alt="Edit button" class="button" title="Edit" /></a></div>
    <div class="content">
        <div class="show" id="d-005-on">Lobby</div>
        <div class="hide" id="d-005-off"><input class="textbox" id="d-005-off-focus" name="d-005-off" maxlength="50" type="text" value="Lobby" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('update');$('#location').val('005');" title="Update" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div>
</div>

<div class="content-wrapper">
    <div class="icons"><a id="b-006"><img src="images/edit.png" alt="Edit button" class="button" title="Edit" /></a></div>
    <div class="content">
        <div class="show" id="d-006-on">Ground Floor</div>
        <div class="hide" id="d-006-off"><input class="textbox" id="d-006-off-focus" name="d-006-off" maxlength="50" type="text" value="Ground Floor" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('update');$('#location').val('006');" title="Update" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div>
</div>

<div class="content-wrapper">
    <div class="icons"><a id="b-007"><img src="images/edit.png" alt="Edit button" class="button" title="Edit" /></a></div>
    <div class="content">
        <div class="show" id="d-007-on">TBD</div>
        <div class="hide" id="d-007-off"><input class="textbox" id="d-007-off-focus" name="d-007-off" maxlength="50" type="text" value="TBD" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('update');$('#location').val('007');" title="Update" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div>
</div>

    <div class="icons"><a id="b-008"><img src="images/add.png" alt="Add button" class="button" title="Add" /></a></div>
    <div class="content">
        <div class="show" id="d-008-on">Add a new location</div>
        <div class="hide" id="d-008-off"><input class="textbox" id="d-008-off-focus" name="d-008-off" maxlength="50" type="text" value="" />&nbsp;<input src="images/go.png" alt="Go button" class="submitButton" onclick="$('#action').val('insert');$('#location').val('008');" title="Add" type="image" />&nbsp;<a href="/seminars/admin/index.php"><img src="images/cancel.png" alt="Cancel button" class="button" title="Cancel" /></a></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:11:31.997

**[DEMO——](http://jsfiddle.net/6mSgm/)**很抱歉这么说，但你的代码很糟糕。

以下是不更改任何 HTML 的 jQuery 替换，除了用`<div class="content-wrapper"></div>`.

```
$('.icons a').on('click', function(){
    var $contentWrapper = $(this).closest('.content-wrapper');
    var $siblings = $contentWrapper.siblings('.content-wrapper');
    $siblings.find('.hide').hide('slow');
    $siblings.find('.show').show('slow');
    $contentWrapper.find('.show').toggle();
    $contentWrapper.find('.hide').toggle().find('.textbox').focus();
}); 
```

不要忘记将上面的 jQuery 包装起来，`$(function(){ ... });`以便它只在 DOM 准备好后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:17:32.307

我只能同意科比。

想试试我的手可能会很有趣。但我不确定这些东西应该如何工作。因为我不应该链接 JS Fiddle，所以你应该使用 Coby 的代码。

您可以对标记和 JS 做很多改进。

您是否在代码中包含某种无 JS 后备的输入字段？否则，您可以使用 JS 添加它们而没有那么多标记。许多可能的变化之一。

# javascript - 为什么我的数组中有未定义的值？

> ID：13309324
> 
> 赞同：1
> 
> 时间：2012-11-09T13:49:31.993
> 
> 标签：javascript

为什么价值

```
(new Array(2)).map(function (x, i, a) { return i }) 
```

[未定义，未定义]而不是[0, 1]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:04:42.497

`new Array(2)`生成一个稀疏数组 - 没有值，但长度为 2。它相当于[`[,,]`](https://stackoverflow.com/q/11808946/1048572).

现在，[Array 的`.map()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)被指定为省略未初始化/已删除的索引，因此您只需返回另一个空数组。

关于您想要做什么的相关问题：[How to write List/Array comprehensions in JavaScript](https://stackoverflow.com/q/11808758/1048572)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:04:11.890

当您指定 javascript 数组的大小时，它会用未定义的值填充它

# xpages - 本地机器上的服务器名称

> ID：13309326
> 
> 赞同：0
> 
> 时间：2012-11-09T13:49:36.410
> 
> 标签：xpages

# 环境

我使用 Lotus Domino Designer 作为 Web 服务器在本地开发 Xpages 应用程序，但用于浏览器，而不是用于 Notes 客户端。

# 问题

我还没有找到使用**@DbLookup/@DbColumn**在另一个数据库中搜索的解决方案，因为我不知道如何定义服务器部分：

1.  **""**在浏览器的情况下似乎不起作用
2.  **database.getServer()**返回我的 Lotus Notes 用户名，这似乎也不起作用

# 问题

哪些**公式/SSJS 代码**可用于获取正确的服务器名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:25:14.930

这从本地数据库中读取（本地名称和地址簿中的所有用户名）：

```
var dbname = new Array("", "names.nsf");
@DbColumn(dbname, "($Users)", 1); 
```

=> 所以服务器被指定为空字符串（“”）。一个非常常见的错误是本地数据库的 ACL 必须授予匿名读者访问权限（因为您使用匿名 http 会话进行访问）。你能先检查一下吗？

# javascript - 使用数组中的值更改图像源

> ID：13309330
> 
> 赞同：-1
> 
> 时间：2012-11-09T13:49:42.837
> 
> 标签：javascript, arrays

```
<html>
<script type="javascript">
    var building=new Array(10)
    building[1]="images_buildings/abudhabi.jpg"
    building[2]="images_buildings/auckland.jpg"
    building[3]="images_buildings/coffsharbour.jpg"
    building[4]="images_buildings/endinburge.jpg"
    building[5]="images_building/la.jpg"
    building[6]="images_building/london.jpg"
    building[7]="images_building/newyork.jpg"
    building[8]="images_buildings/singapore.jpg"
    building[9]="images_buildings/sydney.jpg"
    building[10]="images_buildings/toronto.jpg"
    var num = 0

    function changepic()
    {
       num=num+1
       if (num==11)
       {num=1}

       document.buildingpic.src=eval("building"+num+".src" )
    }

</script>
</head>

<body>
    <center>
       <img src="images_buildings/abudhabi.jpg" name="buildingpic" width="400"          
height="400" />
       <p><A HREF="JavaScript:changepic()">next</A></p>
    </center>
</p>
</body>
</html> 
```

我试图研究，但找不到任何对我有帮助的东西——一旦我解决了这个问题，我将添加另一个 pic 数组和一个信息数组：/但我一次只构建一个 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:57:21.613

给你，试试这个。

```
 document.buildingpic.src=building[num] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:09:57.433

使用它，您可以将更多图像添加到数组中，而无需更改函数的工作方式。

```
<html>
<script type="text/javascript">
    var building = [];
    building[0] = "images_buildings/abudhabi.jpg";
    building[1] = "images_buildings/auckland.jpg";
    building[2] = "images_buildings/coffsharbour.jpg";
    building[3] = "images_buildings/endinburge.jpg";
    building[4] = "images_building/la.jpg";
    building[5] = "images_building/london.jpg";
    building[6] = "images_building/newyork.jpg";
    building[7] = "images_buildings/singapore.jpg";
    building[8] = "images_buildings/sydney.jpg";
    building[9] = "images_buildings/toronto.jpg";
    var num = 0;

   function changepic()
   {

      if (num>=building.length-1){
         num=0;
      }
      num=num+1;
      document.buildingpic.src=building[num];
   }

  </script>
  </head>

 <body>
 <center>
   <img src="images_buildings/abudhabi.jpg" name="buildingpic" width="400" height="400" />
   <p><A href="javascript:changepic();">next</A></p>
</center>
</body>
</html> 
```

# c# - MVC3 手动认证

> ID：13309331
> 
> 赞同：0
> 
> 时间：2012-11-09T13:49:49.093
> 
> 标签：c#, asp.net-mvc-3, authentication, manual

我只需要在 MVC3 上进行手动验证，问题是，当用户从项目访问 url 时，我在基类上有以下代码：

```
public class BaseController : Controller
{
    private Usuario loggedUser;
    protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {
        if (requestContext.HttpContext.Request.RawUrl != "/Home/Login")
        {
            if (requestContext.HttpContext.Session["usuario"] != null)
            {
                loggedUser = (Usuario)requestContext.HttpContext.Session["usuario"];
                ViewBag.nomeUsuario = loggedUser.Nome;
                ViewBag.idUsuario = loggedUser.Id;
            }
            else
            {
                requestContext.HttpContext.Response.RedirectPermanent("~/Home/Login");
            }
        }
        base.Initialize(requestContext);
    } 
```

问题是，当他们未经授权时，我发送重定向但初始化继续处理请求操作。我认为验证不是一个好地方，因为我可以删除 inicalize 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:01:59.323

重定向在这种情况下不起作用。尝试覆盖 OnAuthorization 并返回 RedirectResult。

更好的是将此逻辑实现为属性。

```
public class MyAuthorize : AuthorizeAttribute
{
    private Usuario loggedUser;
    protected override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext.HttpContext.Request.RawUrl != "/Home/Login")
        {
            if (filterContext.HttpContext.Session["usuario"] != null)
            {
                loggedUser = (Usuario) filterContext.HttpContext.Session["usuario"];
                ViewBag.nomeUsuario = loggedUser.Nome;
                ViewBag.idUsuario = loggedUser.Id;
            }
            else
            {
                filterContext.Result = new RedirectResult("~/Home/Login");
            }
            base.OnAuthorization(filterContext);
        }
    }
} 
```

# iphone - 如何以编程方式从 NSString 中删除特定字符？

> ID：13309332
> 
> 赞同：0
> 
> 时间：2012-11-09T13:49:51.560
> 
> 标签：iphone, objective-c, ios, xcode, nsstring

我需要帮助过滤 NSString。假设我有一个名为 myString 的字符串。

```
NSString *myString = @"HelloWorld"; 
```

我怎样才能过滤掉“你好”这个词。或者，如果我想删除前五个字母，我该如何删除特定数量的字母（以它开头）。

我面临的另一个例子：

```
NSString *myString = @"Hello hi World"; 
```

同样，我想删除“Hello”和之后的空格。还有一次我可能想删除“Hello hi”这两个词和之后的空格，这样就只剩下“World”了。

请有人可以解释在 NSStrings 中删除字符的基础知识吗？我对 Objective-c 的世界完全陌生，阅读类参考让我更加困惑。我只有 12 岁，所以不要因为不理解类参考而对我苛刻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:00:32.733

对于这种情况，您需要一个 NSMutableString：

```
NSMutableString *mutableString = @"Hello World";
[mutableString deleteCharactersInRange:NSMakeRange([mutableString length]-11, 6)];
NSLog (@"%@", mutableString); 
```

NSMakeRange 的解释：首先你走到字符串的末尾并倒数长度（11）。现在你在“H”字符上。现在您删除以下六个字符。“世界”现在就剩下了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:02:29.170

您不能编辑 NSString 对象，它是不可变的。您应该改用 NSMutableString。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T13:58:13.327

NSString 有很多方法可以做几乎所有事情，但要考虑的是 NSString 是不可变的，所以所有这些方法都返回一个新字符串。如果这成为问题，您可以查看具有操作当前字符串的方法的 NSMutableString。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-21T08:36:35.160

**Xcode 9 • Swift 4 或更高版本**

这两种从字符串中删除字符的方法：

**dropLast()**返回一个可选项，因此它可以为 nil。 **removeLast()**返回最后一个字符，不是可选的，所以如果字符串为空就会崩溃。

```
let string = "Hello World"

let substring1 = String(string.dropFirst())            // "ello World" 
let substring2 = String(string.dropFirst(2))           // "llo World" 

let substring3 = String(string.dropLast())             // "Hello Worl"
let substring4 = String(string.dropLast(2))            // "Hello Wor" 
```

# javascript - jQuery Datepicker 错误地格式化日期

> ID：13309335
> 
> 赞同：1
> 
> 时间：2012-11-09T13:50:04.693
> 
> 标签：javascript, jquery, datepicker, haml, date-format

目前我数据库中的所有日期的格式如下：

2012-11-06 - 所以 yyyy-mm-dd

但是使用我的新日期选择器，它们会像这样保存

2012-06-11 - 所以 yyyy-dd-mm

我需要更改日期选择器保存的方式，因为当它们转换为正确的日期时，新的日期显示如下：

2012-06-11 应该是 2012 年 11 月 6 日，但它却是 2012 年 6 月 11 日。

我正在使用 jQuery，这是它的安装方式：

```
%script{:src => "http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js", :type => "text/javascript"}
%link{:href => "http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css", :rel => "stylesheet"}/
%script{:src => "http://code.jquery.com/jquery-1.8.2.js"}
%script{:src => "http://code.jquery.com/ui/1.9.1/jquery-ui.js"}
%link{:href => "/resources/demos/style.css", :rel => "stylesheet"}/
:javascript
  $(function() {
      $( "#datepicker" ).datepicker();
      $( "#format" ).change(function() {
          $( "#datepicker" ).datepicker( "option", "dateFormat", $( this ).val() );
      });
  }); 
```

我可以在“dateFormat”位中添加一些可以改变这一点的东西吗？

更新数据库中的列类型是“时间戳”可以改变什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:52:40.520

[来自http://api.jqueryui.com/datepicker/#option-dateFormat](http://api.jqueryui.com/datepicker/#option-dateFormat)的文档-

```
dateFormat: 'yyyy-mm-dd' 
```

它作为您调用日期选择器的选项放置：

```
$('#datepicker').datepicker({
    dateFormat:'yyyy-mm-dd'
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:53:14.027

尝试这个 `$.datepicker._defaults.dateFormat = "yy-mm-dd";`

**更新**

```
 $( "#datepicker" ).datepicker();
      $( "#format" ).change(function() {
            $.datepicker._defaults.dateFormat = "yy-mm-dd";
          $( "#datepicker" ).datepicker( "option", "dateFormat", $( this ).val() );
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:16:05.447

最终使用了这个：

```
$("input[name=dateposted]").datepicker({ dateFormat: "yy-mm-dd" }); 
```

# webstorm - WebStorm 实时编辑不起作用

> ID：13309338
> 
> 赞同：4
> 
> 时间：2012-11-09T13:50:16.457
> 
> 标签：webstorm

我已经安装了`WebStorm 5.0.4`+ `JetBrains Chrome Extension 0.3.11`，检查了`View -> Live Edit`。现在我打开`index.html`，右键，`Open in browser`。文件由 Chrome ( `file:///D:/Dropbox/index.html`) 打开，但实时编辑不起作用

`Chrome 23.0.1271.64 m`, `Windows 7`. 选项`View -> Reload in Browser`未激活，`DevTools`未激活

**补充**
我打开了chrome扩展的后台页面，发现很多错误
`Unexpected response code: 400 chrome-extension://omlgoegcnmiikfiapaelkaichppahfkm:1`

可能这是问题的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:42:02.523

你可以试试这个修复它对我有用，但我在 XP 上：

下载[https://dl.dropbox.com/u/43511007/webide.jar](https://dl.dropbox.com/u/43511007/webide.jar)并复制到 WebStorm-install-dir/lib（替换现有文件）。

从 ：

[http://devnet.jetbrains.net/thread/439550?tstart=0](http://devnet.jetbrains.net/thread/439550?tstart=0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T09:22:16.823

伙计，如果您有最新版本，请不要这样做。只是：

1.  关闭铬
2.  关闭网络风暴
3.  启动网络风暴
4.  开始镀铬

然后点击查看->在浏览器中重新加载，并确保检查查看->实时编辑

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-30T08:54:36.883

让实时编辑工作！

我在 Windows 上使用 Webstorm，如果您使用其他 IDE，请自行安装。

编辑文件`<WebStorm installed dir>/bin/WebStorm.exe.vmoptions`。

对于 Mac OS，编辑文件`/Applications/<WebStorm.app>/bin/idea.vmoptions`.

只需添加这一行：

`-Drpc.port=53342`

然后将插件选项页面中的端口号更改为上述端口。

Live Edit 现在应该可以工作了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-17T17:59:18.417

您可以从 Chrome 商店获得它 - [https://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji](https://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji)

# linux - 程序员应该使用哪些工具从 Windows 机器上在 Ubuntu 机器上工作

> ID：13309339
> 
> 赞同：0
> 
> 时间：2012-11-09T13:50:15.017
> 
> 标签：linux, windows, ubuntu, development-environment, putty

一些开发人员拥有一台 Windows 7 机器，但必须远程登录到一台 Ubuntu 机器才能完成他们的工作。

他们要么需要登录到远程 AWS EC2 linux 实例，要么需要登录 LAN 中的本地 Ubuntu 机器。

我们目前使用 putty 登录到另一台机器，它提供了一个用于编程（Ruby 或 Python 应用程序）的 shell 接口，不太方便。

鉴于上述限制，我们应该使用什么工具才能获得更好的生产力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:45:36.447

修订控制将适用于您正在做的事情。我建议在代码所在的机器上设置一个共享的 git 存储库。这也将允许开发人员进行协作，而不会互相踩踏。

有许多与 git 交互的 GUI 应用程序，请查看以下问题： [https ://stackoverflow.com/questions/157476/what-guis-exist-for-git-on-windows](https://stackoverflow.com/questions/157476/what-guis-exist-for-git-on-windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:14:25.573

对于图形桌面登录，您可以使用 NoMachine 的[NX](http://www.nomachine.com)。那是要花钱的。一个免费的替代方案是[x2go](http://www.x2go.org)，它也是基于 NX（NX 核心是开源的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:46:26.133

为什么不在本地使用[VNC](http://en.wikipedia.org/wiki/VNC)来“查看”`xserver`远程机器上的运行情况？

# magento - Magento 死锁

> ID：13309341
> 
> 赞同：9
> 
> 时间：2012-11-09T13:50:23.493
> 
> 标签：magento, database-deadlocks

我正在使用 Magento 1.7.0.2 社区版，我遇到了一个大问题 - 死锁和“超过锁定等待超时”错误。执行特定**CRON**任务 时存在问题

*   导入/更新产品（尺寸、颜色、制造商以及）。大约有 5000 种产品，但在 90% 的脚本中出现“超过锁定等待超时”错误或死锁错误。脚本是使用 Magento 指南开发的，如果没有其他进程正在运行，它可以正常工作。例如，如果 reindex 正在运行，我们肯定会得到一个错误。它接缝是因为表锁
*   Magento 在某些情况下会设置读锁。我已经阅读了几个关于此的主题，唯一合适的解决方案是更改*/lib/Zend/Db/Statement/Pdo.php* _execute 函数。由于我们期待将 Magento 升级到最新的稳定版本，我们无法承受更改核心文件的费用。

所以我的问题 - 有没有办法避免这种情况（无论是在 PHP、MySQL 还是服务器（我们使用 nginx）级别）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T20:39:00.000

我在尝试一次进口超过五六种产品时遇到了这个问题。[这里](http://www.teamallita.net/index.php?option=com_content&view=article&id=19:mysqlperformance&catid=1:articles&Itemid=1)有更多关于死锁的信息。

为了解决这个问题，我必须尽可能将我的数据库查询放在[SERIALIZABLE](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_serializable)事务中，如下所示：

```
$adapter = Mage::getModel('core/resource')->getConnection('core_write');
// Commit any existing transactions (use with caution!)
if ($adapter->getTransactionLevel > 0) {
    $adapter->commit();
}
$adapter->query('SET TRANSACTION ISOLATION LEVEL SERIALIZABLE');
$product->save(); // etc 
```

交易示例：

```
$adapter = Mage::getModel('core/resource')->getConnection('core_write');
// Commit any existing transactions (use with caution!)
if ($adapter->getTransactionLevel > 0) {
    $adapter->commit();
}
$adapter->query('SET TRANSACTION ISOLATION LEVEL SERIALIZABLE');
$adapter->beginTransaction();
try {
    $adapter->query(/* SQL goes here */);
    $adapter->commit();
} catch (Exception $e) {
    // Rollback on fail always
    $adapter->rollBack();
    throw $e;
} 
```

如果您在这方面需要任何进一步的帮助，请随时告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-24T15:09:22.683

我们遇到了类似的问题，当客户试图将某些东西添加到他们的购物车中时，每天会出现几次死锁。我们的似乎也与当时正在刷新的索引有关（很可能是目录表的重新索引）。最终为我们解决这个问题的唯一事情是实现异步重新索引（我们最终购买了一个扩展）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-09T07:07:57.403

我们在尝试并行保存产品时也遇到了这个问题。

我们面临的主要问题是，在最初保存产品后，随后的索引过程并未包含在产品保存事务中。因此，每当我们遇到死锁时，它都是由索引器引起的，最重要的是，我们有一个不一致的数据库，导致无效的产品 URL 并迫使我们在每次发生时重新索引所有内容。

我们最终得到的解决方案是将索引器包含在事务中并重试最终陷入死锁的事务。然而，这不是一个理想的解决方案，它是我们能想到的最好的解决方案，而且它在 99% 的时间内都有效。

magento 的问题在于编程是草率的，并且事件驱动的瑞士军刀编码方法在 magento 的内部机制中导致了许多深刻的问题。

我们的下一个方法将是我们自己的界面，从头开始编写，以并行保存产品并为数据库留下与 magento 保存相同的结果。这当然意味着我们不能再添加扩展而不将它们集成到这个新概念中，以防它们与产品相关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-05T21:24:06.353

这是很棒的开源解决方案 - [https://github.com/AOEpeople/Aoe_DbRetry](https://github.com/AOEpeople/Aoe_DbRetry)

该模块非常简单，专注于一项任务。它将数据库适配器替换为扩展版本，如果连接丢失、查询无法获得所需的锁或发生死锁，它将重试查询。这三种情况是通过异常消息检测到的。底层（父）代码实际上将这些异常中的至少一个包装在另一个异常中，因此我们检查它并在需要时解开异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T08:51:20.613

在使用 CRON 脚本导入之前，我将索引模式设置为 MANUAL。

```
$indexCollection = Mage::getSingleton('index/indexer')->getProcessesCollection(); 
foreach ($indexCollection as $process) {
    $process->setMode(Mage_Index_Model_Process::MODE_MANUAL)->save();
    //$process->setMode(Mage_Index_Model_Process::MODE_REAL_TIME)->save();
} 
```

# ios5 - 这在 iOS 5.1 中是否可行？通过 UIButton (+action) 以编程方式将用户发送到地图？

> ID：13309345
> 
> 赞同：0
> 
> 时间：2012-11-09T13:50:36.797
> 
> 标签：ios5, maps, uiapplication

我正在尝试使用 NSURL 将用户发送到带有我数据库中地址的地图。我想在 UIButton 中的一个动作中做到这一点，就像我对电话、邮件和网络所做的那样。像这样;

```
- (IBAction)restActionWeb:(UIButton *)sender {
NSString *urlString = [NSString stringWithFormat:@"http://%@",[restDetails objectForKey:@"Web"] ];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]]; 
```

}

**对于像“123 My Road, MyTown, CA 95472, USA”这样的街道地址是否可以这样做？**

在没有任何运气的情况下尝试了一些变体；

```
- (IBAction)restActionFind:(UIButton *)sender {
// Merge street + zip
NSMutableString *tempAdress = [NSMutableString string];
[tempAdress appendString:@"address://"];
[tempAdress appendFormat:@"%@",[restDetails objectForKey:@"Street"]];
[tempAdress appendFormat:@", %@",[restDetails objectForKey:@"Zip"]];
[tempAdress appendFormat:@", %@",[restDetails objectForKey:@"City"]];
[tempAdress appendFormat:@", USA"]; // Have this limitation in future?
self.restFindLabel.text = tempAdress;

// CHECK don't work, whats the url schema for address?
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:tempAdress]]; 
```

}

希望它能够像您在单击的某个文本字段中检测到地址一样工作，然后进入带有该地址的地图并显示它。

我认为使用 B 计划将是“矫枉过正”：以这种方式使用 CoreLocation + 发送地址。它还利用电池。我的意思是，我的分贝中已经有了地址，只是希望地图显示它。

对此有任何建议或提示吗？谢谢！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:53:44.597

你试过这个吗？

```
NSString *stringURL = @"http://maps.google.com/maps?q=123+My+Road,+MyTown,+CA+95472,+USA"];
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

这意味着使用该`http://`方案而不是`address://`依靠操作系统来理解它的地图。在 iOS6 上可能无法正常工作，但在 iOS5 上应该可以。

（[来源](http://wiki.akosma.com/IPhone_URL_Schemes#Maps)）

# javascript - 用javascript滚动？

> ID：13309349
> 
> 赞同：2
> 
> 时间：2012-11-09T13:50:47.900
> 
> 标签：javascript

> **可能重复：**
> [如何转到页面上的特定元素？](https://stackoverflow.com/questions/4801655/how-to-go-to-a-specific-element-on-page)

我想滚动到下面代码中定义的变量 p 。有没有我可以用javascript（不是jquery）滚动到它的功能。它是一个位于可滚动 div 内的列表项，位于无序列表内。

`var x = document.getElementsByClassName('listSection') [0].getElementsByTagName('ul')[0];`
`var p = x.lastChild;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:23:29.110

`element.scrollIntoView`可能是您正在寻找的。如果没有，至少值得一试：

[https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:13:59.680

我认为这可能会有所帮助：

```
var x = document.getElementsByClassName('listSection') [0].getElementsByTagName('ul')[0];
var p = x.lastChild;
window.scrollTo(0, p.offsetTop); 
```

# yii - CGridView 依赖列表数据过滤器

> ID：13309350
> 
> 赞同：1
> 
> 时间：2012-11-09T13:50:52.680
> 
> 标签：yii

以下代码正在工作，除了一件事。用于部门的过滤器应取决于在过滤器中为区域选择的值（一个部门属于一个区域）。我已尝试使用您在部门过滤器上看到的 FindAllByAttributes()，但它不起作用。我可以使用 FindAll() 但是这两个过滤器不相关。关于如何实现这一目标的任何想法？

谢谢

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'mainGrid',
'dataProvider'=>$model->filterForDefaultSalesUserManagement(),
'filter'=>$model,
'columns'=>array(
                    array(
                            'class'=>'CCheckBoxColumn',
                            'id'=>'checkedColumn',
                            'selectableRows'=>2
                         ),
                    array(
                            'name'=>'Fr_RegionId',
                            'header'=>'Region',
                            'value'=>'$data->frDepartment->frRegion->NameFR',
                            'filter'=>CHtml::listData(FrRegion::model()->findAll(),'Id','NameFR')
                         ),
                    array(
                            'name'=>'Fr_DepartmentId',
                            'header'=>'Department',
                            'value'=>'$data->frDepartment->NameFR',
                            'filter'=>CHtml::listData(FrDepartment::model()->findAllByAttributes(
                                    array(),
                                    $condition = "fr_RegionId = :regionId",
                                    $params = array(':regionId'=>$data->frDepartment->frRegion->Id)
                                    ),
                                    'Id','NameFR')
                         ),
                    'PostalCode',
                    'NameFR',
                    )
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:47:04.700

将部门过滤的参数更改为以下内容：

```
array(':regionId'=>$model->Fr_RegionId) 
```

假设过滤`Region`已经有效，那么这也应该有效。

您当前发布的代码不起作用，因为您正在尝试访问该`$data`对象，该对象在您使用它的范围内不存在。它仅在每行基础上使用，并引用通过 dataProvider 返回的对象。

您需要使用`$model`的属性进行过滤。由于您使用Region 列`Fr_RegionId`的任何对象的属性，因此您还可以使用它来进一步过滤您的 Department 列。`$model`

注意：您可能必须调整是否甚至过滤部门，如果`FR_RegionId`属性中没有设置任何内容，那么它将尝试匹配部门为空的地方。或者它会抛出一个错误，这取决于你如何设置你的数据库。

```
'filter'=>$model->Fr_RegionId?
    CHtml::listData(FrDepartment::model()->findAllByAttributes(
       array(),
       "fr_RegionId = :regionId",
       array(':regionId'=>$model->Fr_RegionId)),
       'Id','NameFR'):
    false, 
```

试试上面的。如果从“区域”下拉框中选择，它应该让您过滤部门`Fr_RegionId`，否则它根本不会让您过滤。

或者，如果您希望在未选择区域的情况下让每个部门都可用，则替换`false`为

```
CHtml::listData(FrDepartment::model()->findAll(),'Id','NameFR') 
```

# matlab - matlab根据关联矩阵绘制图形

> ID：13309351
> 
> 赞同：4
> 
> 时间：2012-11-09T13:51:00.823
> 
> 标签：matlab, graph, plot, gplots

有没有办法从发生矩阵中绘制图表。通过图表，我的意思是[http://en.wikipedia.org/wiki/Graph_(mathematics](http://en.wikipedia.org/wiki/Graph_(mathematics) ) 不是情节。

到目前为止，我只发现了如何将关联矩阵转换为邻接矩阵。在 R 中，这可以通过`igraph`库来实现。那么有没有一种简单的方法可以在matlab中做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T13:58:03.583

您可以使用`gplot`：

```
k = 1:30;
[B,XY] = bucky;
gplot(B(k,k),XY(k,:),'-*')
axis square 
```

该函数常用于机器学习问题。在搜索时，我看到了[加权图形绘图的实现](http://www.mathworks.com/matlabcentral/fileexchange/24035-wgplot-weighted-graph-plot-a-better-version-of-gplot/content/wgPlot/wgPlot.m)。

![在此处输入图像描述](../Images/8abc5e95490dd41fac1bade910075322.png) [http://www.mathworks.com/help/matlab/ref/gplot.html](http://www.mathworks.com/help/matlab/ref/gplot.html)

**编辑：**

```
dt = 2*pi/10;
t = dt:dt:2*pi;
x = cos(t); y = sin(t);
A = ones(10);
gplot(A,[x' y']);
A = ones(3,3);
gplot(A,[x' y']);
a = [0 1 1; 1 0 0; 1 1 0];
gplot(a,[x' y'] ,'-*'); 
```

您所要做的就是确保`XY`平面对于图中的每个节点都有足够的 (x,y) 对。

这是A的`gplot`：

![在此处输入图像描述](../Images/be2dbd9dae24607ff0795da6639ae843.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-21T15:56:58.350

***带箭头的图表***

之前的所有回复都在处理图形，而没有考虑图形是否是直接的。我的意思是，如果存在边 (i,j)，则边 (j,i) 可能不存在。考虑到这一点，通过以下代码：

```
% This figure will be used to plot the structure of the graph represented
% by the current A matrix.
figure

dt = 2*pi/N_robots;
t = dt:dt:2*pi;
x = cos(t); y = sin(t);

agents=[       2    2.5;
               0.5  2.0;
               0.5  1.0;
               2.0  0.5;
               3.5  1.0;
               3.5  2.0;];

agents = p0;       

agents = [x' y'];

% plot(agents(:,1),agents(:,2),'s','MarkerSize', 20, 'MarkerFaceColor', [1 0 1])
grid on
%xlim([0 4])
%ylim([0 3])
hold on
index=1;
% The following prints the non-directed graph corresponding to the A matrix
for i=1:N_robots
    for j=index:N_robots
        if A(i,j) == 1
            arrowline(agents([i j],1),agents([i j],2),'arrowsize',600);          
%             plot(agents([i j],1),agents([i j],2),'--','LineWidth',2.5);
        end
    end
end
set(gca,'FontSize',fontsize2)

title('Structure of the Graph','interpreter', 'latex','FontSize', 18) 
```

您可以得到以下结果： ![在此处输入图像描述](../Images/1b899f363eaddcdd52c23e6cf6a7756f.png)

**目前，这肯定适用于 6 个代理。我没有时间测试通用数量的代理，但原则上它应该可以工作。您可以使用不同的代理向量来做到这一点。**

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T14:43:30.977

这是一个使用像你这样的矩阵的解决方案

```
% Define a matrix A.
A = [0 1 1 0 ; 1 0 0 1 ; 1 0 0 1 ; 0 1 1 0];

% Draw a picture showing the connected nodes.
cla
subplot(1,2,1);
gplot(A,[0 1;1 1;0 0;1 0],'.-');
text([-0.2, 1.2 -0.2, 1.2],[1.2, 1.2, -.2, -.2],('1234')', ...
    'HorizontalAlignment','center')
axis([-1 2 -1 2],'off')

% Draw a picture showing the adjacency matrix.
subplot(1,2,2);
xtemp=repmat(1:4,1,4);
ytemp=reshape(repmat(1:4,4,1),16,1)';
text(xtemp-.5,ytemp-.5,char('0'+A(:)),'HorizontalAlignment','center');
line([.25 0 0 .25 NaN 3.75 4 4 3.75],[0 0 4 4 NaN 0 0 4 4])
axis off tight 
```

取自关于 bucky 的示例 [http://www.mathworks.nl/products/matlab/examples.html;jsessionid=59c5cf7261bdf09589f79bab2bc2?file=/products/demos/shipping/matlab/buckydem.html](http://www.mathworks.nl/products/matlab/examples.html;jsessionid=59c5cf7261bdf09589f79bab2bc2?file=/products/demos/shipping/matlab/buckydem.html)

# c# - 在winforms文本框中显示不可打印的字符

> ID：13309352
> 
> 赞同：3
> 
> 时间：2012-11-09T13:51:05.927
> 
> 标签：c#, textbox, character

我正在尝试在 winforms 多行文本框中显示不可打印的字符（空格、换行符），这是大多数文本处理工具中的一项功能。

我这样做是通过

```
textbox.Text.Replace(' ','·').Replace(Environment.NewLine, "¶" + Environment.NewLine); 
```

到目前为止，这工作正常，但是由于缺少空格，自动换行不再起作用。所以我尝试测量每行的长度以手动添加自动换行，但我没有得到想要的结果：

```
private int GetTextWidth(TextBox tb)
{
    using (var g = textBox1.CreateGraphics())
    {
        SizeF size = g.MeasureString(tb.Text, tb.Font);
        int width = (int)(size.Width + 0.5);
        return width;
    }
} 
```

GetTextWidth 为不同的字符返回不同的结果。当我键入一行“l”时，GetTextWidth == textbox.Width 将在 ~80% 之后达到，而“M”sa 换行符甚至在 GetTextWidth == textbox.Width 之前发生。

使用等宽字体不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:52:31.457

你可以尝试使用[`Zero width space`](http://en.wikipedia.org/wiki/Zero_Width_Space)

```
textbox.Text.Replace(" ","·\u200B") 
```

它仍然应该允许换行，但不会看起来像任何东西。Backspaces/deletes 会出现奇怪的行为，因此您可能需要确认您将要删除一个`.`表示零宽度空格的字符（反之亦然），并且知道只需按一下键即可删除这两个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:27:35.470

该`Graphics.MeasureString()`方法在设计上是不准确的。有关替代方法，请参阅[MSDN 库页面](http://msdn.microsoft.com/en-us/library/6xe5hazb%28v=vs.100%29.aspx)上的备注部分。

# vb.net - 遍历类属性

> ID：13309353
> 
> 赞同：2
> 
> 时间：2012-11-09T13:51:28.650
> 
> 标签：vb.net, class, reflection, properties

我有一个名为 ticket 的 VB.NET 类，它有几个“字段”类型的公共属性。我想有一种方法可以遍历所有这些属性（每个属性都有一个）并在每个属性上执行特定任务。我认为也许最好的方法是创建一个列表（字段）并用该类的“字段”属性填充列表。我不知道如何动态地将属性添加到列表中，这样如果我将来添加属性，我就不必手动将它们输入到列表中。关于我如何做到这一点的任何想法？我尝试搜索并找到了一些使用反射的示例，但我只能弄清楚如何获取属性的名称而不是属性本身。

下面是一个类的例子：

```
Public Class ticket
    Public Property location As New field
    Public Property user As New field
    Public Property callType As New field
    Public Property dateOfCall As New field
    Public Property tech As New field
    Public Property description As New field

    Public Property myFields As New List(Of field)

'What if field had a property of value and I wanted to increment all of the fields    in this class by one

Public Sub plusOne()
    For Each x As field In myFields()
        x.value += 1
    Next
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:53:23.550

您想使用[Reflection](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.110%29.aspx)，这仅意味着检查程序集中的类型。您可以通过[System.Reflection](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)命名空间执行此操作。

有关 VB.Net 中反射的示例，请参阅 msdn 杂志上的以下文章：http: [//msdn.microsoft.com/en-us/magazine/cc163750.aspx](http://msdn.microsoft.com/en-us/magazine/cc163750.aspx)

该文章中迭代类型成员的示例如下：

```
Dim t As Type = GetType(AcmeCorp.BusinessLogic.Customer)
For Each member As MemberInfo In t.GetMembers
  Console.WriteLine(member.Name)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:50:20.983

再次作为先前的答案 - 您将使用反射。以 a 为例`Add`，`List(Of T)`我会这样做。

```
Public Class Test
  Public Property SomeList As List(Of String)
End Class 
```

然后使用以下代码调用 add`List(Of String)`

```
Dim pi As PropertyInfo = GetType(Test).GetProperty("SomeList")
Dim mi As MethodInfo = GetType(List(Of String)).GetMethod("Add")
Dim t As New Test()
t.SomeList = New List(Of String)
mi.Invoke(pi.GetValue(t, Nothing), New Object() {"Added through reflection"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:52:04.633

正如前面的答案所说，您需要使用 System.Reflection 来获取类的属性。然后检查属性是你想要的类型。

希望这应该给你你想要的。如果您运行代码，您将看到它只采用指定类型的属性。如果您想拥有所有属性，请删除 for each 循环上的 where 语句。

```
Imports System.Reflection

Module Module1

Sub Main()

    ' Create a list to hold your properties
    Dim myList As New List(Of MyProperty)

    ' check each property for its type using the where statement below. Change integer to "Field" in your case
    For Each el In GetType(Test).GetProperties.Where(Function(p) p.PropertyType = GetType(Integer))
        ' add each matching property to the list
        myList.Add(New MyProperty With {.Name = el.Name, .GetMethod = el.GetGetMethod(), .SetMethod = el.GetSetMethod()})
        Console.WriteLine(el.Name & " has been added to myList")
    Next

    Console.Read()
End Sub

Public Class MyProperty
    Public Property Name As String
    Public Property GetMethod As MethodInfo
    Public Property SetMethod As MethodInfo
End Class

Public Class Test
    Private var1 As String
    Private var2 As String
    Private var3 As String
    Private var4 As String

    Public Property myInt1 As Integer
    Public Property myInt2 As Integer
    Public Property myInt3 As Integer
    Public Property myInt4 As Integer
End Class
End Module 
```

希望有帮助

# ios - AdMob 中介：iAd 在 iOS 6 上无法正确显示

> ID：13309354
> 
> 赞同：1
> 
> 时间：2012-11-09T13:51:30.117
> 
> 标签：ios, ios6, admob, iad

我正在使用 AdMob 的中介在我的 iPhone 应用程序中显示添加。

在 iOS 5 的所有版本中，AdMob 广告和 iAd 始终都能正确显示。

在 iOS 6 上，AdMob 广告仍然始终正确显示，但在下面，您会看到我在使用 iAds 时遇到的问题。同样，这仅在 iOS 6 上。iAd 显示在 NavBar 后面，并被标签栏阻止/截断。

这是我用来设置我的代码`GADBannerView`：

```
 GADBannerView *tempBannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
    self.bannerView = tempBannerView;

    bannerView.adUnitID = @"OUR_ID_HERE";  //Our Mediation ID
    bannerView.rootViewController = [UIApplication sharedApplication].delegate.window.rootViewController;
    bannerView.delegate = self;
    [self.view addSubview:bannerView];

    GADRequest *request = [GADRequest request];
    request.testing = NO;
    [bannerView loadRequest:request]; 
```

**在点击广告之前**

![前](../Images/234ba30af04d9dbf2584d6a4a1c1a986.png)

**攻丝后**

![后](../Images/a2bf012fa88877163734018631e52f94.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:25:57.420

虽然我没有找到解决方案，但我决定看看这是否是“我的问题”。我用 Apple 的 ADViewBanner 替换了我的 GADViewBanner，并尝试自己实施 iAd 并放弃 AdMob 中介。

实施正确的委托后，AdViewBanner 始终正确显示！换句话说...我责怪调解软件的一些问题。

如果有人对原始问题有任何修复，请随时发布。否则，我将只使用自己实施的 iAd，而不是尝试使用 AdMob 中介。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:52:41.273

我现在尝试解决这个确切的问题 2 天。我同意这是 AdWhirl 的问题，因为 Google AdMob 广告运行良好。

尽管我从未找到“正确”的解决方案，但我确实设计了以下解决方法。当用户点击广告时，游戏可以使用一些 AdWhirl 事件来暂停游戏，我在这些事件中加入了这些事件以在显示广告时隐藏所有适当的资产（一个。虽然 AdWhirl 应该这样做，但出于某种原因我的情况并非如此，并且与发布我想使用广告中介的问题的人不同，因此解决方法对我来说是最好的解决方案。

```
- (void)adWhirlWillPresentFullScreenModal {
    [((MyAppDelegate *)[[UIApplication sharedApplication] delegate]).navController setNavigationBarHidden:YES];
    [SwitchViewController.instance.toolbar setHidden:YES];  // SwitchViewController is actually the root view controller also. It contains a custom toolbar.
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
}
- (void)adWhirlDidDismissFullScreenModal {
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
    [((MyAppDelegate *)[[UIApplication sharedApplication] delegate]).navController setNavigationBarHidden:NO];
    [SwitchViewController.instance.toolbar setHidden:NO];
} 
```

# java - 如何操作 jtextfield 返回类型？

> ID：13309356
> 
> 赞同：0
> 
> 时间：2012-11-09T13:51:50.480
> 
> 标签：java, swing, document, jtextfield, jformattedtextfield

我有一个 jtext 字段

当用户输入一个数字时

> 123456789,10

它将在 jtextfield 中自动设置

> 123,456,789.10

那么如果用户点击一个按钮，它会

System.out.print(the_same_number);

这将导致

> 123456789.10

*   这个怎么做？
*   如何让 jtextfield 只接受输入数字和点 (.) 和逗号 (,)？

（在这种情况下我应该使用格式化字段吗？）

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:33:21.643

您将需要使用 a[`DocumentFilter`](http://www.jroller.com/dpmihai/entry/documentfilter)来过滤进入文本字段的输入。

查看[MDP 的示例](http://www.jroller.com/dpmihai/entry/documentfilter)，其中包含您所问问题的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:51:06.327

您可以`DocumentFilter`按照@MadProgrammer 的建议选择。但是，很难解决在文本字段中以及在打印到控制台时具有不同显示的要求（这将需要一些额外的手动解析/格式化）。

结合只接受数字的要求，我强烈建议`JFormattedTextField`结合`NumberFormat`.

*   将`JFormattedTextField`只接受可以被 解析的输入`NumberFormat`（你可以输入无效的输入，但它永远不会被接受）
*   实际值 ( `JFormattedTextField#getValue`) 将是 a `Double`（如果您选择正确的格式），因此您可以完美打印

请注意，该标准`JFormattedTextField`存在一些可用性问题。通过谷歌搜索，您可以找到不同的改进版本`JFormattedTextField`。例如，我发现[唯一](http://tips4java.wordpress.com/2010/02/21/formatted-text-field-tips/)缺少的是输入无效时的视觉反馈（例如，将背景设为红色）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:00:00.227

“如何让 jtextfield 只接受输入数字和点 (.) 和逗号 (,)？”

```
 @Override
    public void keyPressed(KeyEvent e) {
        int key = e.getKeyCode();
        if ((e.KeyChar >= 48 && e.KeyChar <= 57) || e.KeyChar == 46 || e.KeyChar == 44){
        }
        else{
        }
    } 
```

# jquery - 使用 Jquery 添加、删除动态行

> ID：13309360
> 
> 赞同：0
> 
> 时间：2012-11-09T13:52:00.240
> 
> 标签：jquery, html

我已经完成了在 html、jquery 中添加和删除动态行。

[jsfiddle.net/gansai/p5QwC/1/](http://jsfiddle.net/gansai/p5QwC/1/)

HTML：

```
<form action="grading.php" method="post">               
<table width="100%" id="tableRealizzazione">
    <tr>
        <th></th>
        <th style="padding:12px;text-align:center;">Serial No</th>
        <th style="padding:12px;text-align:center;">Personale</th>
        <th style="padding:12px;text-align:center;">Percentage</th>
        <th style="padding:12px;text-align:center;">Marketing point</th>
        <th style="padding:12px;text-align:center;">Add/Remove</th>
    </tr>

    <tr class="even">
        <td></td>
        <td>
            <input type="text" name="serial[]"  class="add increment" value="1">
        </td>
        <td style="padding:12px;">
            <input type="text" value="" name="Personale[]">
        </td>
        <td style="padding:12px;">
            <input type="text" name="from[]" size="5%"> -
            <input type="text" name="to[]" size="5%"> %
        </td>
        <td style="padding:12px;">
            <input type="text" class="totaliCostiGestione" name="marketpt[]">
        </td>
        <td style="padding:12px;">
            <input type="text" name="programid[]" class="add" value="34" size="10%">
        </td>
        <td style="padding:12px;">
            <input type="button" class="addnew add" value="+" />
        </td> 
    </tr>
    <tr>
        <td>
            <input type="submit" name="submit" value="submit">
        </td>
    </tr>                     
</table> 
```

​</p>

jQuery：

```
 $('.addnew').live('click', function(){
var thisRow = $(this).parent().parent();
newRow = thisRow.clone(true).insertAfter(thisRow);
newRow.find('input:not(.add)').val("");

$(this).removeClass('addnew').addClass('remove');
    $(this).val("-");
    newRow.find('input.increment').val(parseInt(thisRow.find('input.increment').val())+1);
});

$('.remove').live('click', function(){
    $(this).parent().parent().remove();
}); 
```

​​但我想向同一个按钮添加/删除操作。而不是在上一行出现删除图标。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:32:15.217

我相信这就是您要寻找的东西，但如果不是，请告诉我。

```
 $('.addnew').live('click', function(){
    var thisRow = $(this).parent().parent();
    newRow = thisRow.clone(true).insertAfter(thisRow);
    newRow.find('input:not(.add)').val("");

    newRow.find('.addnew').removeClass('addnew').addClass('remove');
    newRow.find('.remove').val("-");
    newRow.find('input.increment').val(parseInt(thisRow.find('input.increment').val())+1);
});

$('.remove').live('click', function(){
    $(this).parent().parent().remove();
}); 
```

这将 + 保留在第一行并将 - 按钮添加到克隆的行。

[http://jsfiddle.net/p5QwC/3/](http://jsfiddle.net/p5QwC/3/)为一个工作示例。

**更新**

假设您不希望初始行可移动，也许这更符合您的要求。[http://jsfiddle.net/p5QwC/10/](http://jsfiddle.net/p5QwC/10/)

# c# - 处理给孩子的 WM 消息

> ID：13309363
> 
> 赞同：0
> 
> 时间：2012-11-09T13:52:17.610
> 
> 标签：c#, winforms, windows-messages

我正在开发一个包含 ListBox 的 Windows 窗体。

在后台运行的另一个应用程序将 WM_HSCROLL 发送到我正在处理的当前活动应用程序。表单内的列表框能够接收这些消息并且接收没有问题。

当我使用 Spy++ 进行调查时，我看到没有传入 WM_HSCROLL 消息到主窗口，但如果转储列表框窗口处理程序的消息，我看到 WM_HSCOLL。

我的目标是拦截这个 WM_HSCROLL 消息。试图覆盖 WndProc 但没有奏效。

我可以覆盖孩子的 WndProc 还是我如何知道列表框收到的消息？

谢谢。

# java - 证书链不包含在 singed pdf 中

> ID：13309364
> 
> 赞同：1
> 
> 时间：2012-11-09T13:52:21.767
> 
> 标签：java, pdf, certificate, itext, digital-signature

我有类似的问题。我尝试使用移动签名签署 pdf。我在签名时使用 itextpdf-5.1.3.jar,bcprov-jdk16-1.46.jar。

```
X509Certificate root0 = Utils.getCert(PropertyUtils 
                                                .getProperty(Property.SIGN_ROOT_CERT0_PATH.value)); 
X509Certificate root1 = Utils.getCert(PropertyUtils 
                                                .getProperty(Property.SIGN_ROOT_CERT1_PATH.value)); 
X509Certificate[] chain =  {root1,root0}; 
```

我创建 pdfstamper ，将值设置为 PdfSignatureAppearance （我创建带有颁发者证书的 Cert.chain ）并预先关闭 PdfSignatureAppearance 以计算 pdf 的哈希值。我将此哈希发送到移动签名服务，他们将证书和签名值返回给我。比我添加了这个证书。链接并继续签名过程。

我的问题是当我用 adobe 打开 pdf 文件时，我只看到一个证书，我看不到其他两个根证书。我在它下面放了链接，其中包含我的代码、单个 pdf 和我使用的证书。你能帮助我吗 ？

www dropbox.com/sh/g8yand5vlt5mxi8/I_mdANaJGC

更新

在图 1 中，我只看到一个证书。但我想在图 2 中看到。我怎样才能放置根证书。成pdf？

完整代码

```
package com.dotto.mobilesign.sign;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.security.MessageDigest;
import java.security.cert.X509Certificate;
import java.util.Calendar;
import java.util.HashMap;

import org.apache.log4j.Logger;
import org.bouncycastle.jce.provider.X509CertParser;
import org.etsi.uri.ts102204.v1_1.MSSSignatureRespType;

import com.dotto.mobilesign.types.Constant.FILE_TYPE;
import com.dotto.mobilesign.types.Constant.MESSAGE_TYPE;
import com.dotto.mobilesign.types.Constant.Property;
import com.dotto.mobilesign.types.dotto.AveaMobileSignResponse;
import com.dotto.mobilesign.util.ArchiveUtils;
import com.dotto.mobilesign.util.PropertyUtils;
import com.dotto.mobilesign.util.Utils;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.OcspClientBouncyCastle;
import com.itextpdf.text.pdf.PdfDate;
import com.itextpdf.text.pdf.PdfDictionary;
import com.itextpdf.text.pdf.PdfName;
import com.itextpdf.text.pdf.PdfPKCS7;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfSignature;
import com.itextpdf.text.pdf.PdfSignatureAppearance;
import com.itextpdf.text.pdf.PdfStamper;
import com.itextpdf.text.pdf.PdfString;

public class PDFSignHelper {

    private static Logger log = Logger.getLogger(PDFSignHelper.class.getName());
    private static String transId = "-1";
    private static byte[] pdfDataUnsigned;
    private static byte[] pdfDatasigned;

    public AveaMobileSignResponse signSync(String rawBase64File,
            String mobilePhone, String signText, FILE_TYPE fType,
            MESSAGE_TYPE mType) throws Exception {
        SignWSSyncHelper helper = new SignWSSyncHelper();
        AveaMobileSignResponse response = null;
        try {
            transId = System.currentTimeMillis() + "";
            log.info("Trans Id : " + transId);
            pdfDataUnsigned = Utils.base64Decode(rawBase64File);
            log.info("PDF Data decoded");
            /*
             * Sign pdf
             */
            try {
                PdfReader pdf = new PdfReader(new ByteArrayInputStream(
                        pdfDataUnsigned));
                ByteArrayOutputStream signedPdf = new ByteArrayOutputStream();
                Calendar cal = Calendar.getInstance();
                final PdfStamper stamper = PdfStamper.createSignature(pdf,
                        signedPdf, '\0');
                log.info("PDF stamper created");
                PdfSignatureAppearance sap = stamper.getSignatureAppearance();
                X509Certificate root0 = Utils.getCert(PropertyUtils
                        .getProperty(Property.SIGN_ROOT_CERT0_PATH.value));
                X509Certificate root1 = Utils.getCert(PropertyUtils
                        .getProperty(Property.SIGN_ROOT_CERT1_PATH.value));

                X509Certificate[] chain =  {root1,root0};
                sap.setCrypto(null, chain, null,
                        PdfSignatureAppearance.WINCER_SIGNED);

                sap.setContact(PropertyUtils
                        .getProperty(Property.SIGN_CONTACT.value));
                sap.setReason(PropertyUtils
                        .getProperty(Property.SIGN_REASON.value));
                sap.setLocation(PropertyUtils
                        .getProperty(Property.SIGN_LOCATION.value));
                sap.setCertificationLevel(PdfSignatureAppearance.CERTIFIED_NO_CHANGES_ALLOWED);
                sap.setSignDate(cal);

                sap.setAcro6Layers(true);
                sap.setLayer2Text(signText);
                sap.setVisibleSignature(new Rectangle(100, 100, 200, 200), 1,
                        "Signature");
                sap.setExternalDigest(new byte[128], new byte[20], "RSA");

                PdfSignature dic = new PdfSignature(PdfName.ADOBE_PPKLITE,
                        new PdfName("adbe.pkcs7.detached"));
                dic.setReason(sap.getReason());
                dic.setLocation(sap.getLocation());
                dic.setContact(sap.getContact());
                dic.setDate(new PdfDate(sap.getSignDate()));
                sap.setCryptoDictionary(dic);
                log.info("PDF hash  creating");

                int contentEstimated = 35000;

                HashMap<PdfName, Integer> exc = new HashMap<PdfName, Integer>();
                exc.put(PdfName.CONTENTS, contentEstimated * 2 + 2);
                sap.preClose(exc);

                final MessageDigest messageDigest = MessageDigest
                        .getInstance("SHA1");
                InputStream data = sap.getRangeStream();
                byte[] buf = new byte[8192];
                int n;
                while ((n = data.read(buf, 0, buf.length)) > 0) {
                    messageDigest.update(buf, 0, n);
                }
                byte hash[] = messageDigest.digest();
                log.info("PDF hash  created");
                log.info("PDF hash  sended to sign for web service");
                MSSSignatureRespType signResponse = helper.signSyncron(transId,
                        Utils.base64Encode(hash), mobilePhone, signText);
                log.info("WS returns result");
                int statusCode = -1;
                String statusMessage = null;
                if (signResponse.getStatus() != null) {

                    if (signResponse.getStatus().getStatusCode() != null
                            && signResponse.getStatus().getStatusCode()
                                    .getValue() != null) {
                        statusCode = signResponse.getStatus().getStatusCode()
                                .getValue().intValue();
                    }
                    log.info("WS returns status code " + statusCode);

                    statusMessage = signResponse.getStatus().getStatusMessage();
                    log.info("WS returns status message " + statusMessage);

                    String errorText = "";
                    boolean error = true;
                    if (statusCode == 502) {
                        log.info(statusMessage);
                        error = false;
                        /*
                         * success
                         */
                    } else if (statusCode == -1) {
                        errorText = "Status Code : none Status Message : "
                                + statusMessage;
                    } else if (statusCode == 208) {
                        errorText = "Status Code : "
                                + statusCode
                                + " Status Message : "
                                + statusMessage
                                + ".  Message can't reach client Timeout. Response "
                                + helper.soapResponseText;
                    } else {
                        errorText = "Status Code : " + statusCode
                                + " Status Message : " + statusMessage
                                + ".  General Error . Response "
                                + helper.soapResponseText;
                    }
                    if (error) {
                        log.error(errorText);
                        throw new Exception(errorText);
                    }
                }

                /*
                 * Success
                 */
                response = new AveaMobileSignResponse();
                response.fileType = fType.getValue();
                response.messageType = mType.getValue();
                response.mobilePhone = mobilePhone;
                response.statusCode = statusCode;
                response.statusMessage = statusMessage;
                if (signResponse.getMSSSignature() == null) {
                    log.error("Signature Empty. " + helper.soapResponseText);
                    throw new Exception("Signature Empty. "
                            + helper.soapResponseText);
                }
                log.info("getting cert. and sign ");
                byte[] certificate = signResponse.getMSSSignature()
                        .getBase64Signature();
                X509CertParser certParser = new X509CertParser();
                certParser.engineInit(new ByteArrayInputStream(certificate));
                X509Certificate cer = (X509Certificate) certParser.engineRead();
                if (root0 != null) {
                    chain = new X509Certificate[3];
                    chain[0] = cer;
                    chain[1] = root1;
                    chain[2] = root0;
                } else {
                    chain = new X509Certificate[1];
                    chain[0] = cer;
                }

                PdfPKCS7 sgn = new PdfPKCS7(null, chain, null, "SHA1", null,
                        true);
                byte[] signedHashValue = signResponse.getMSSSignature()
                        .getXMLSignature().getSignatureValue().getValue();

                String TSA_URL = PropertyUtils
                        .getProperty(Property.SIGN_TIMESTAMP_URL.value);
                String TSA_ACCNT = PropertyUtils
                        .getProperty(Property.SIGN_TIMESTAMP_ACC.value);
                String TSA_PASSW = PropertyUtils
                        .getProperty(Property.SIGN_TIMESTAMP_PSS.value);

                CustomTSAClient tsc=new CustomTSAClient(TSA_URL, Integer.parseInt(TSA_ACCNT), TSA_PASSW);

                //TSAClientBouncyCastle tsc=new TSAClientBouncyCastle("http://zd.e-guven.com/TSS/HttpTspServer");
                //TSAClient tsc = new TSAClientBouncyCastle(TSA_URL, TSA_ACCNT, TSA_PASSW);
                OcspClientBouncyCastle ocs = null;
                byte[] ocsp = null;
                if (chain.length >= 2) {
                    String url = PdfPKCS7.getOCSPURL(chain[0]);
                    if (url != null && url.length() > 0)
                        ocs = new OcspClientBouncyCastle();
                    ocsp = ocs.getEncoded(chain[0], chain[1], url);
                }

                byte sh[] = sgn.getAuthenticatedAttributeBytes(signedHashValue,
                        cal, ocsp);
                sgn.update(sh, 0, sh.length);

                sgn.setExternalDigest(signedHashValue, hash, "RSA");

                byte[] paddedSig = new byte[contentEstimated];

                byte[] encodedSig = sgn.getEncodedPKCS7(null, cal, tsc, ocsp);
                System.arraycopy(encodedSig, 0, paddedSig, 0, encodedSig.length);
                if (contentEstimated + 2 < encodedSig.length)
                    throw new Exception("Not enough space for signature");

                PdfDictionary dic2 = new PdfDictionary();
                dic2.put(PdfName.CONTENTS,
                        new PdfString(paddedSig).setHexWriting(true));
                sap.close(dic2);
                log.info("inserting sign ");
                pdfDatasigned = signedPdf.toByteArray();
                response.signedRawBase64File = Utils
                        .base64Encode(pdfDatasigned);
                log.info("insertied sign ");
                ArchiveUtils.archive(transId, pdfDataUnsigned, pdfDatasigned,
                        fType, mType);
                return response;
            } catch (Exception e) {
                log.error("Error while signing. " + helper.soapResponseText, e);
                throw new Exception("Error while signing. "
                        + helper.soapResponseText, e);
            }

        } catch (Exception e) {
            log.error("Error", e);
            throw e;
        }
    }
} 
```

图片 1：[http](http://dl.dropbox.com/u/24426467/pdf-sign/img1.jpg) ://dl.dropbox.com/u/24426467/pdf-sign/img1.jpg 图片 2：[http ://dl.dropbox.com/u/24426467/pdf-sign/img2.jpg](http://dl.dropbox.com/u/24426467/pdf-sign/img2.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:22:37.117

你好像混淆了什么。以下证书包含在 PDF 的 CMS 容器中（非 ASCII 字符可能有些混淆）：

第一个：

> 主题：序列号=20000000002,C=TR,CN=GÃœNAY DEMÄ°R
> 
> 发行人：CN=Avea Mobil Nitelikli Elektronik Sertifika Hizmet Saglayicisi,O=Elektronik Bilgi Guvenligi AS,C=TR

第二

> 主题：CN=e-Guven Nitelikli Elektronik Sertifika Hizmet Saglayicisi,O=Elektronik Bilgi Guvenligi AS,C=TR
> 
> 发行人：CN=e-Guven Kok Elektronik Sertifika Hizmet Saglayicisi,O=Elektronik Bilgi Guvenligi AS,C=TR

第三

> 主题：CN=Avea Mobil Nitelikli Elektronik Sertifika Hizmet Saglayicisi,O=Elektronik Bilgi Guvenligi AS,C=TR
> 
> 发行人：CN=e-Guven Kok Elektronik Sertifika Hizmet Saglayicisi,O=Elektronik Bilgi Guvenligi AS,C=TR

第一个是签名者证书，第三个是中间 CA 证书，即您的“根 1.crt”，但第二个只是基于相同根证书的另一个 CA 证书。

您的投递箱中的实际根证书“root.cer”已丢失。

您可能想要检查引用您的根证书和 CA 证书的属性的值。

（为了清楚起见，您应该更改变量和文件的名称，以不将中间 CA 证书称为根证书。）

# java - 使用 jaxb 在外部 xsd 中解组 xml 元素

> ID：13309373
> 
> 赞同：2
> 
> 时间：2012-11-09T13:52:49.973
> 
> 标签：java, xml, xsd, jaxb, any

我想使用 jaxb 解组具有此 xsd[定义的 XML 文件。](http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd)

我已经使用 Eclipse 右键单击​​生成了 java 类，生成了 jaxb 类等。我在解组 XML 文件时没有问题。

![在此处输入图像描述](../Images/195197e4ca003cfaebc1a1ff7a519779.png)

问题是我不知道如何取消编组（映射？）元数据类型。下面是 metadataType 的 xsd 定义和生成的类：

```
<complexType name="metadataType">
    <annotation>
      <documentation>Metadata must be expressed in XML that complies
       with another XML Schema (namespace=#other). Metadata must be 
       explicitly qualified in the response.</documentation>
    </annotation>
    <sequence>
      <any namespace="##other" processContents="strict"/>
    </sequence>
  </complexType> 
```

此类型的生成类是：

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, vJAXB 2.1.10 in JDK 6 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.11.08 at 05:28:26 PM PST 
//

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAnyElement;
import javax.xml.bind.annotation.XmlType;

/**
 * Metadata must be expressed in XML that complies
 *        with another XML Schema (namespace=#other). Metadata must be 
 *        explicitly qualified in the response.
 * 
 * <p>Java class for metadataType complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="metadataType">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;any namespace='##other'/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "metadataType", propOrder = {
    "any"
})
public class MetadataType {

    @XmlAnyElement(lax = true)
    protected Object any;

    /**
     * Gets the value of the any property.
     * 
     * @return
     *     possible object is
     *     {@link Object }
     *     
     */
    public Object getAny() {
        return any;
    }

    /**
     * Sets the value of the any property.
     * 
     * @param value
     *     allowed object is
     *     {@link Object }
     *     
     */
    public void setAny(Object value) {
        this.any = value;
    }

} 
```

外部 xsd 在[这里](http://www.openarchives.org/OAI/2.0/oai_dc.xsd)

未编组的 XML 文档生成以下内容： ![未编组的 XML 数据](../Images/7ffb72204e0e458e4edcfe7485d4e70f.png)

更新：

另外，我从外部[xsd](http://www.openarchives.org/OAI/2.0/oai_dc.xsd)生成了类：

OaiDcType.java ElementType.java

这些类必须包含 MetadataType 对象的数据。

我想将**任何**转换为​​我自己的 OaiDcType 对象，这是正确/最佳的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:35:42.860

如果您还为 oai_dc.xsd 模式生成了 JAXB 类，您应该能够执行另一个解组：

```
MetadataType metadata = ...;
Node oaidcNode = (Node)metadata.getAny(); // org.w3c.dom.Node
JAXBContext oaidcContext = ...;
Unmarshaller oaidcUnmarshaller = oaidcContext.createUnmarshaller();
// use Unmarshaller.unmarshal(Node) or Unmarshaller.unmarshal(Node, Class<T>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:48:54.617

当 DOM不知道它在 XML 中找到的元素的类型时，`Element`您会得到DOM。如果您有相关元素的 JAXB 注释类并且知道这些以及顶级 OAI-PMH 类，那么该元素将自动解组到相关类并返回该对象而不是元素。`any``JAXBContext``JAXBContext``getAny`

# apache-httpclient-4.x - 如何使用 apache 异步 http 客户端，因为这不起作用

> ID：13309375
> 
> 赞同：0
> 
> 时间：2012-11-09T13:52:59.870
> 
> 标签：apache-httpclient-4.x, asynchttpclient

我有一个非常简单的客户

```
private void start() throws IOReactorException, InterruptedException {
    DefaultHttpAsyncClient client = new DefaultHttpAsyncClient();

    HttpAsyncRequestProducer prod = HttpAsyncMethods.createGet("http://b1.bigde.nrel.gov:8080");

    HttpAsyncResponseConsumer<Object> handler = new MyResponseHandler();
    FutureCallback<Object> futureCb = new MyFutureCbHandler();
    client.execute(prod, handler, futureCb);

    log.info("now sleeping");
    Thread.sleep(30000);
    log.info("done sleeping");
} 
```

问题是没有调用任何侦听器方法。MyResponseHandler 正在扩展 AsyncCharConsumer，但没有调用他，也没有调用 FutureCallback。我从来没有得到回应。

注意 1：我需要能够调用 client.execute 并返回堆栈而不与 Futures 交互

注意2：我需要调用监听器方法（并且需要在数据进入时调用它们，因为远程端正在流回http分块。

有没有办法让它工作？还是我应该切换库？

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:09:05.063

启动客户端会有很大帮助；-)

客户端.start()

您可能还想在完成后将其关闭。

# objective-c - 如何正确使用 NSTimeInterval？

> ID：13309376
> 
> 赞同：7
> 
> 时间：2012-11-09T13:53:05.137
> 
> 标签：objective-c, ios, cocoa-touch, nsdate, nstimeinterval

我是 Xcode 新手，遇到以下问题：

我想要一种方法，它可以给我从给定日期到现在所经过的时间。如果是 2 年前，我想返回一个字符串“2 年前”，但如果是 5 分钟前，我希望它返回一个带有“5 分钟前”的字符串。

我已经检查了 NSTimeInterval 和 NSDateFormatter 但我找不到让它工作的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T14:39:24.557

只是为了让你开始......

您将创建一个这样的参考日期：

```
NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
dateComponents.year = 2012;
dateComponents.month = 1;
dateComponents.day = 1;
dateComponents.hour = 0;
dateComponents.minute = 0;
dateComponents.second = 0;

NSDate *referenceDate = [gregorian dateFromComponents: dateComponents]; 
```

当前日期可以这样获得：

```
NSDate *now = [NSDate date]; 
```

时间间隔以秒为单位，所以...

```
NSTimeInterval interval = [now timeIntervalSinceDate:referenceDate];
NSLog (@"reference date was %.0f seconds ago", interval); 
```

我敢肯定，从这里开始，您将能够自己弄清楚...

[这个答案](https://stackoverflow.com/a/1386746/653513)可能会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:02:12.887

> 谢谢，我想知道是否有一种更简单的方法可以在没有这么多代码的情况下做到这一点。

您可以像这样创建参考日期：

```
NSDate *referenceDate = [NSDate date];
[[NSCalendar currentCalendar] rangeOfUnit:NSYearCalendarUnit 
                                startDate:&referenceDate 
                                 interval:NULL
                                  forDate:referenceDate]; 
```

或者你试试这个：[https ://github.com/billgarrison/SORelativeDateTransformer](https://github.com/billgarrison/SORelativeDateTransformer)

# algorithm - 使用 PCA 选择特征

> ID：13309387
> 
> 赞同：5
> 
> 时间：2012-11-09T13:53:36.343
> 
> 标签：algorithm, matlab, image-processing, pca

我正在做无监督分类。为此，我有 8 个特征（绿色的方差、绿色的标准 div、红色的平均值、红色的方差、红色的标准 div、色调的平均值、色调的方差、色调的标准 div）进行分类每张图片，我想使用 PCA 选择 3 个最重要的特征。我为特征选择编写了以下代码（特征维度为：179X8）：

```
for c=1:size(feature,1)
   feature(c,:)=feature(c,:)-mean(feature)
end

DataCov=cov(feature); % covariance matrix
[PC,variance,explained] = pcacov(DataCov) 
```

这给了我：

个人电脑 =

```
0.0038   -0.0114    0.0517    0.0593    0.0039    0.3998    0.9085   -0.0922
0.0755   -0.1275    0.6339    0.6824   -0.3241   -0.0377   -0.0641    0.0052
0.7008    0.7113   -0.0040    0.0496   -0.0207    0.0042    0.0012    0.0002
0.0007   -0.0012    0.0051    0.0101    0.0272    0.0288    0.0873    0.9953
0.0320   -0.0236    0.1521    0.2947    0.9416   -0.0142   -0.0289   -0.0266
0.7065   -0.6907   -0.1282   -0.0851    0.0060    0.0003    0.0010   -0.0001
0.0026   -0.0037    0.0632   -0.0446    0.0053    0.9125   -0.4015    0.0088
0.0543   -0.0006    0.7429   -0.6574    0.0838   -0.0705    0.0311   -0.0001 
```

方差 =

```
0.0179
0.0008
0.0001
0.0000
0.0000
0.0000
0.0000
0.0000 
```

解释 =

```
94.9471
4.1346
0.6616
0.2358
0.0204
0.0003
0.0002
0.0000 
```

这意味着第一主成分解释了 94.9% 的方差，依此类推……但这些都是从最重要到最不重要的顺序。根据上述信息，我如何知道要选择哪些特征（从 1 到 8）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T14:53:28.853

[您的问题与 Mahoney 和 Drineas 在“用于改进数据分析的 CUR 矩阵分解”](http://www.pnas.org/content/106/3/697.abstract)中讨论的 COLUMNSELECT 问题相同。

他们首先计算每个维度的杠杆分数，然后使用杠杆分数作为权重随机选择其中的 3 个。或者，您可以选择最大的。这是您的问题的脚本：

我首先从网上获得了一张真实的自然图像，并将其调整为您要求的尺寸。图像如下：

![图像](../Images/daf8f7132d63078ced58873816406417.png)

```
%# Example data from real image of size 179x8
%# You can skip it for your own data
features = im2double(rgb2gray(imread('img.png')));

%# m samples, n dimensions
[m,n] = size(features); 
```

然后，计算集中数据：

```
%# Remove the mean
features = features - repmat(mean(features,2), 1, size(features,2)); 
```

我使用 SVD 来计算 PCA，因为它可以提供主成分和系数。如果样本在列中，则`U`保留主成分。[检查本文](http://www2.imm.dtu.dk/pubdb/views/edoc_download.php/4000/pdf/imm4000.pdf)第二页的关系。

```
%# Compute the SVD
[U,S,V] = svd(features); 
```

这里的关键思想是我们希望获得具有大部分变化的维度。一个假设是数据中有一些噪音。我们只选择主要的特征向量，例如代表 95% 的数据。

```
%# Compute the number of eigenvectors representing
%#  the 95% of the variation
coverage = cumsum(diag(S));
coverage = coverage ./ max(coverage);
[~, nEig] = max(coverage > 0.95); 
```

`nEig`然后使用主成分计算杠杆分数。也就是说，我们取`nEig`系数的范数。

```
%# Compute the norms of each vector in the new space
norms = zeros(n,1);
for i = 1:n
    norms(i) = norm(V(i,1:nEig))^2;
end 
```

然后，我们可以对杠杆分数进行排序：

```
%# Get the largest 3
[~, idx] = sort(norms);
idx(1:3)' 
```

并获得具有最大杠杆分数的向量的索引：

```
ans =
   6     8     5 
```

您可以查看论文以获取更多详细信息。

但是，请记住，如果您有许多维度，则基于 PCA 的技术是好的。在您的情况下，搜索空间非常小。我的建议是在空间中彻底搜索并按照@amit 的建议获得最佳选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:01:55.507

PCA 实际上是在生成一组新特征，每个特征都是原始元素的线性变换。

因此，您获得的向量不能直接转换为您需要选择的特征以获得这种差异——它只是根据原始向量创建一个新特征。
在你的情况下，你得到：

```
New_Feature = 0.038*F1 + 0.0755*F2 + 0.7008*F3 + ... + 0.0543*F8 
```

`New_Feature`尽管降维， 这会给你 94.9471% 的信息增益。
（如果你对下一个原理组件做同样的事情并使用它们，你显然会增加你的信息增益）

如果您需要获取原件的子集，而不是创建新功能 - 我会使用其他方法而不是 PCA。

遗传算法通常非常适合子集选择，如果你的特征集只包含 8 个特征——你也可以考虑蛮力搜索——只有 2 ⁸ =256 个可能的子集。在某些情况下，可能会尝试所有子集并查看什么可以为您提供最佳性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:09:17.463

来自[pcacov 文档](http://www.mathworks.nl/help/stats/pcacov.html)：

> COEFF 是一个 p×p 矩阵，每列包含一个主成分的系数。这些列按分量方差递减的顺序排列。

由于`explained`表明只有第一个组件确实对解释方差贡献了很大一部分，因此您应该查看 的第一列`PC`以查看它使用了哪些原始特征：

```
0.0038
0.0755
0.7008 <---
0.0007 
0.0320 
0.7065 <---
0.0026 
0.0543 
```

事实证明，在您的示例中，第 3 和第 6 个特征（用 <-- 表示）是第一个主成分的主要贡献者。你可以说这些功能是最重要的。

同样，基于第 1、第 4 和第 7 个特征仅在 的最后几列中获得较大权重的事实，`PC`可以得出结论，它们相对不重要。

然而，对于这种逐特征分析，PCA 可能不是最合适的。您也可以从原始特征的标准差中得出此类信息。

# java - 如何在 Eclipse 和 Ant 中使用不同的 Junit TestRunner？

> ID：13309392
> 
> 赞同：5
> 
> 时间：2012-11-09T13:54:06.397
> 
> 标签：java, ant, junit, jbehave, test-runner

我有几个想要从 Eclipse 和 Ant 运行的 JBehave 测试。在 Eclipse 中，我想查看在图形输出中执行的所有不同故事、场景和步骤的树，因此我在执行此操作的测试中添加了一个自定义运行程序：

```
@RunWith(de.codecentric.jbehave.junit.monitoring.JUnitReportingRunner.class)
public class MyStoryTest extends org.jbehave.core.junit.JUnitStories
{
    // ...
} 
```

但相反，在使用 Ant 和持续集成服务器运行测试时，我只想将每个完整故事视为输出中的单个项目。这通常无需任何注释即可实现：

```
public class MyStoryTest extends JUnitStories
{
    // ...
} 
```

那么如何告诉 Ant（junit Ant 任务）使用与 Eclipse 不同的运行器？让事情变得更复杂：目前我在 Eclipse（而不是 Ant）中使用一个测试套件来运行测试：

```
@RunWith(org.junit.extensions.cpsuite.ClasspathSuite.class)
@org.junit.extensions.cpsuite.ClassnameFilters("foo.mypackage.tests.*")
public class MyStoriesTestSuite
{
    // Nothing more to say ;)
} 
```

有任何想法吗？

干杯，蒂尔曼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T22:33:08.383

几周前我做了一些修改，可以满足您的需求。我意识到，在单元测试运行的情况下由 Eclipse 执行的 java 命令总是在其名称中包含一个包。因此，如果这返回 true，那么您可能正在 Eclipse 下运行测试：

```
System.getProperty( "sun.java.command" ).contains( "org.eclipse.jdt" ) 
```

我知道，它不是 100% 的解决方案，但**通常有效，而且总比没有好**。

我为您创建并测试了一个 Runner+Annotation 对：

**注释**：

```
package org.junit.annotation;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import org.junit.runner.Runner;
import org.junit.runners.JUnit4;

@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target( ElementType.TYPE )
public @interface RunWithInEnvironment {
    Class<? extends Runner> eclipse();
    Class<? extends Runner> defaultRunner() default JUnit4.class;
} 
```

默认情况下，它使用 JUnit4 作为 defaultrunner，这实际上是 JUnit4 的默认值。

**Runner**，它使用注解的信息：

```
package org.junit.runners;

import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.fail;

import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;

import org.junit.annotation.RunWithInEnvironment;
import org.junit.runner.Description;
import org.junit.runner.Runner;
import org.junit.runner.notification.RunNotifier;

public class EnvironmentDependentRunner extends Runner {
    protected Class<?> testClass;
    protected Runner delegate;

    public EnvironmentDependentRunner(Class<?> testClass) {
        super();
        this.testClass = testClass;
        RunWithInEnvironment annotation = findAnnotationInClassHierarchy(testClass);
        assertNotNull( EnvironmentDependentRunner.class.getSimpleName() + " can be used only with test classes, that are annotated with " + RunWithInEnvironment.class.getSimpleName() + " annotation somewhere in their class hierarchy!", annotation );
        Class<? extends Runner> delegateClass = null;
        if ( System.getProperty( "sun.java.command" ).contains( "org.eclipse.jdt" ) && annotation.eclipse() != null ) {
            delegateClass = annotation.eclipse();
        }
        else {
            delegateClass = annotation.defaultRunner();
        }
        try {
            Constructor<? extends Runner> constructor = delegateClass.getConstructor( Class.class );
            delegate = constructor.newInstance(testClass);
        } catch (NoSuchMethodException e) {
            fail( delegateClass.getName() + " must contain a public constructor with a " + Class.class.getName() + " argument.");
        } catch (SecurityException e) {
            throw new RuntimeException("SecurityException during instantiation of " + delegateClass.getName() );
        } catch (InstantiationException e) {
            throw new RuntimeException("Error while creating " + delegateClass.getName() );
        } catch (IllegalAccessException e) {
            throw new RuntimeException("Error while creating " + delegateClass.getName() );
        } catch (IllegalArgumentException e) {
            throw new RuntimeException("Error while creating " + delegateClass.getName() );
        } catch (InvocationTargetException e) {
            throw new RuntimeException("Error while creating " + delegateClass.getName() );
        }
    }

    private RunWithInEnvironment findAnnotationInClassHierarchy(Class<?> testClass) {
        RunWithInEnvironment annotation = testClass.getAnnotation(RunWithInEnvironment.class);
        if (annotation != null) {
            return annotation;
        }

        Class<?> superClass = testClass.getSuperclass();
        if (superClass != null) {
            return findAnnotationInClassHierarchy(superClass);
        }

        return null;
    }

    @Override
    public Description getDescription() {
        return delegate.getDescription();
    }

    @Override
    public void run(RunNotifier arg0) {
        delegate.run(arg0);
    }
} 
```

还有一个**用法示例**：

```
@RunWithInEnvironment( eclipse=JUnit4.class, defaultRunner=Parameterized.class)
@RunWith( EnvironmentDependentRunner.class)
public class FooTest {
...
} 
```

所以这个测试将在 Eclipse 中使用 JUnit4 运行器运行，在 Eclipse 外部使用 Parameterized。

# css - PIE.htc - 背景消失，但边界半径仍未应用

> ID：13309393
> 
> 赞同：1
> 
> 时间：2012-11-09T13:54:16.490
> 
> 标签：css, internet-explorer, rounded-corners, css3pie

Border-radius 适用于除 IE 以外的所有浏览器（我用 IE8 对其进行了测试）。解决方案是放入`behavior:url(PIE.htc);`css类。看起来路径`behavior:url(PIE.htc);`是正确的，因为：

1) PIE.htc 位于根文件夹中，并且

2）如果我使用`behavior:url(PIE.htc);` 和背景消失

3）如果我使用，背景会再次出现`behavior:url(/any/other/wrong/path/to/PIE.htc);`

所以，我相信`behavior:url(PIE.htc);`使用得当。很遗憾，

```
.superborder
{
border:5px solid red;
//here are a couple of strings for radius settings that are work for other browsers
behavior:url(/sdf/PIE.htc);
} 
```

删除 IE 中的背景，但 IE 中的边框仍未圆角。我已经阅读了 PIE 常见问题解答，可以一起玩，`position:relative; z-index and zoom.`也可以分开玩。没有什么帮助。有人知道为什么吗？

**补充：** 我找到了问题但不知道解决方案。问题是这个CSS：

```
#page-content{
 visibility  : hidden;
} 
```

where`#page-content`包含整个页面。它是隐藏的（如上所示），直到

```
$(window).bind("load", function ()
{
    /*jumping fonts fix*/
    $('#page-content').css('visibility', 'visible');
}); 
```

因此，当页面加载时，它变得可见。我之所以将其隐藏直到加载，是因为其中一个浏览器加载了页面，尽管尚未加载特殊字体。这是一个很好的解决方案，因此页面在完全加载之前不会跳转。不幸的是，现在我必须在这两个修复之间做出选择。如何将它们结合起来 - IE 的圆角和字体跳转修复器？非常感谢。

PS 上面的字体跳转修复器是我修改的[Using jQuery to know when @font-face fonts are loaded](https://stackoverflow.com/questions/4383226/using-jquery-to-know-when-font-face-fonts-are-loaded)

# java - JMS 和 HornetQ

> ID：13309399
> 
> 赞同：0
> 
> 时间：2012-11-09T13:54:54.423
> 
> 标签：java, jms, esb, hornetq

JMS 是 java 消息传递“API”，我仍然不清楚 HornetQ 等第三方 API 到底做了什么？没有任何默认/参考实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:17:42.790

JMS 只是一个规范，你可以选择任何你喜欢的实现：

*   大黄蜂Q
*   活动MQ
*   红帽 MRG
*   IBM MQ
*   Oracle MQ ...等等等等...等等

除了规范之外，每一个都将提供不同的功能。

例如，HornetQ 提供确认确认（因此您不需要阻塞等待确认的发送，并且可以使用高级技术进行异步操作，如异步 servlet）。

HornetQ 还提供大消息。

HornetQ 还提供了一个核心 API，您可以在没有 JMS 的情况下使用。

例如，我知道如果您不想使用 JMS，也可以使用 IBM 的 API。

因此，总结 Java 消息服务 - JMS 只是一组 Java 接口，您必须选择正确的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:17:52.463

我认为您正在混合一些概念。正如您所说，JMS 是一个 API（或者，如果您愿意，也可以是一个规范）。简化的 JMS 定义了一组接口，这些接口必须由某些供应商实现。在您的情况下，您使用的是 JBoss HornetQ。但是，还有其他实现方式，例如 Apache ActiveMQ 等。因此，如果您愿意或您的要求发生变化，您可以交换实施。

实现 JMS API 的 Provider 可能包含其他功能。但这些是专有的，不在 JMS 规范中。因此，可能复制包含在一个提供程序中，而另一个提供程序不提供这种功能。

Another example can be found in JDBC. JDBC itself is the API, but there exist different implementation for different databases. Same to JPA, where Hibernate and Toplink are prominent examples.

# visual-studio-2010 - Crystal Reports 参数下拉列表问题

> ID：13309402
> 
> 赞同：0
> 
> 时间：2012-11-09T13:55:12.317
> 
> 标签：visual-studio-2010, crystal-reports, crystal-reports-2010

大家好，我显然使用 Visual Studio 2010 的 Crystal Reports 和 Visual Studio。

我创建了一个带有参数 Employee 的水晶报表。这是用户从中选择的员工姓氏的下拉列表。问题是它只显示一个选项，即空白空间（如果您计算三个点（...）的无选项，则为 2 个选项）。

事情是在我插入一些新数据之前，它工作得很好。但是现在大约有 2500 行，每行都可以有一个员工，尽管大多数都没有。

另一方面，我的另一个使用相同 SQL 并以完全相同的方式创建的下拉列表工作正常。

我不知道是什么原因造成的。我以为是 sql，但我将员工姓名与 DropDownList 应该在另一个报告中提取的内容相同（这是显示两个日期之间所有内容的日期报告），它显示得很好。再次，用于填充报告的相同 sql 选择函数。

是否有这么多行和这么多可能的员工导致了这种情况？

我已经尝试了一切，但这就像它只给了我下拉列表中的第一个选项（空白）。

调试时，我可以看到可观察的集合已经获取了员工的姓氏并且可以读取它，但由于某种原因，在提示下拉列表中我看到的只是空白选项。

这是我在 CR 中使用的公式：

{Inventar_Model_ReportClass.ImeZaduzioca} = {?Zaduzio}

它可能与 Crystal Reports 将其查询限制在前 1000 行有关

[http://crystalreportsbook.com/forum/forum_posts.asp?TID=8029](http://crystalreportsbook.com/forum/forum_posts.asp?TID=8029)

我尝试在这里设置创建 MaxRowRecords

HKEY_LOCAL_MACHINE\SOFTWARE\Business Objects\Suite 12.0\Crystal Reports\DatabaseOptions\LOV

并将其设置为 5000 但仍然没有运气

我这样说是因为我检查了 sql 并且它返回的值很好，我尝试删除报告然后重新创建它，同样的问题，我尝试创建其他参数并且它们都无法正常工作，例如我有一个用于存储的参数，它只显示了 97 个选项，但是当我使用 Count Distinct 时，我得到 140 个值。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:16:21.753

我找到了答案 [http://scn.sap.com/thread/3195520](http://scn.sap.com/thread/3195520)

我正在更改错误的注册表项。它与您使用的 Windows 版本有关，32 位或 64 位。无论如何，这是正确的：

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Suite XI 4.0\Crystal Reports\DatabaseOptions

# c# - LINQ to SQL 使用本地集合引发 SQL 异常

> ID：13309405
> 
> 赞同：0
> 
> 时间：2012-11-09T13:55:16.967
> 
> 标签：c#, .net, linq, linq-to-sql, sqlexception

```
Amounts = 
    Context.Ppm_TblCodeType
    .Where(bc => bc.OrganisationId == Contract.OrganisationId)
    .Select(bc => new MacroPaymentValue
    {
        Code = bc.CodeTypeCode,
        ShortName = bc.ShortDescription,
        ValueForPayment = visits
            .Where(v => v.Detail.CodeTypeCode == bc.CodeTypeCode)
            .Sum(v => v.Detail.Charge != null ? v.Detail.Charge.Value : 0)
     }).ToArray(); 
```

我遇到了异常：本地序列不能在查询运算符的 LINQ to SQL 实现中使用，但 Contains 运算符除外。

我猜这与 .Sum() 调用有关...如何修改它以避免异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:18:18.600

发生这种情况是因为您试图`visits`在代码中使用哪个本地序列作为查询的一部分，而 LINQ to SQL 无法将其转换为 SQL。

查看您的代码，我认为一旦您将查询结果存储在内存中，您最好填充 ValueForPayment 。就像是：

```
Amounts = 
    Context.Ppm_TblCodeType
    .Where(bc => bc.OrganisationId == Contract.OrganisationId)
    .Select(bc => new MacroPaymentValue
    {
        Code = bc.CodeTypeCode,
        ShortName = bc.ShortDescription,
        CodeTypeCode = bc.CodeTypeCode,
        ValueForPayment = 0
     }).ToArray();

foreach(var bc in Amounts) 
{
    bc.ValueForPayment = visits
            .Where(v => v.Detail.CodeTypeCode == bc.CodeTypeCode)
            .Sum(v => v.Detail.Charge != null ? v.Detail.Charge.Value : 0)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:20:20.740

它抛出异常是因为您尝试使用`visits`，而不是因为您正在调用 sum()。如果您包含创建访问列表的代码部分可能会有所帮助...

那是从哪里来的，可以在同一语句中查询吗？

所以这样的事情会起作用：

```
Context...Select(bc => new MacroPaymentValue() 
{
    //stuff
    ValueForPayment =     bc.visits.sum(...)
}); 
```

事实上，我注意到在这个查询的最后你强制它使用 ToArray()。如果您对访问查询执行相同的操作，它会将查询转换为本地序列。只需去掉访问查询中的 ToArray() 部分，就会为您留下一个可用于其他 linq 查询的 IQueryable。

因此，如果访问确实需要来自 TblCodeType 之外，您可以确保不使用 ToArray()。

基本上，您不能在 linq to sql 查询中使用本地数组（大部分情况下）。不过，您可以在 linq to sql 查询中使用另一个查询。如果您调用 ToArray() 或 ToList()，它将实际运行查询，获取结果并将其存储在本地序列中（数组或列表取决于您调用的内容。）但是，如果您不这样做，则在您真正开始使用值之前，查询不会运行。这样查询就保持为一个查询，并且可以安全地用于其他查询。

# c# - SharpGL - 点云（使用 Kinect 深度数据中的 GL_TRIANGLES 绘制）不在本地轴坐标上旋转

> ID：13309411
> 
> 赞同：1
> 
> 时间：2012-11-09T13:55:55.670
> 
> 标签：c#, opengl, graphics, kinect

我们正在尝试使用 SharpGL（OpenGL 的 C# 包装器）将 Kinect 为我们提供的深度数据转换为点云。我们的目标是根据 Kinect 提供给我们的数据创建 3D 模型。到目前为止，我们已经完成了：

*   捕获深度数据（了解 Kinect 提供了什么）
*   获取给定每个深度数据的 x,y 坐标，从而生成我们的 x,y,z 点
*   使用 GL_Points 渲染所述点（我们也可以使用 GL_Triangles 渲染它，其中一个
    三角形代表一个 SINGLE 点）
*   捕获键盘事件以放大和缩小点云视图

我们使用什么：

*   视觉工作室 2010
*   用 C# 编程
*   微软 Kinect SDK 1.6
*   SharpGL（OpenGL 的 C# 包装器）

问题：

我们设法将 (x,y,z) 点渲染到 opengGLControl 上，我们可以放大和缩小并欣赏绘制的点。由于 3d 模型交互需要，我们继续尝试旋转（在 y 轴上）我们的点云。这是我们的麻烦开始的地方。

我们的点云确实会旋转，只是不在我们想要的本地坐标上。当它开始旋转时，它似乎是沿着世界 y 轴旋转，而不是对象的本地 y 轴。看到 SharpGL 如何不允许设置“中心旋转点”（因为每个对象都有一个世界坐标系和一个局部坐标系），我们尝试遵循不同的教程来解释 gl.Translate(.Translate(.Translate) 的组合。 ..) 和 gl.Rotate(...)。

1.  gl.Translate(..) // 移动到你想要的中心点作为你的对象的“中心旋转点”
2.  gl.Rotate(..) // 以指定的旋转角度沿想要的轴旋转
3.  gl.Translate(..) // 移回您想要绘制对象的原始点

我们尝试使用单个三角形来执行此操作，以确保我们了解需要做什么：

* * *

```
 private float zoom = -7.0f;
         private float xAxis = -3.5f;  //this is done so that image can be rendered in 
                                       //   the center of our view
        ************************************* 

        OpenGL gl = openGLControl.OpenGL;
        gl.Clear(OpenGL.GL_COLOR_BUFFER_BIT | OpenGL.GL_DEPTH_BUFFER_BIT);

        gl.LoadIdentity();

        float xAxisReturn = this.xAxis - 3.55f; //Needed for the second gl.Translate()
        float yAxisReturn = 1.5f + 2.25f;
        float zoomReturn = this.zoom - 0.67f;

       gl.Translate(3.55f, -2.25f, 0.67f); //Center Point calculated personally for 
                                       // the SINGLE triangle drawn
       gl.Rotate(this.triangleRotation, 0.0f, 1.0f, 0.0f);
       gl.Translate(xAxisReturn, yAxisReturn, zoomReturn); //means that the object will 
                                                    //be drawn at (-3.5f, 1.5f, -7f) 

        gl.Begin(OpenGL.GL_TRIANGLES);
            gl.Color(0f, 1f, 0f);
            gl.Vertex(3.55f, -2.18f, 0f);
            gl.Vertex(3.45f, -2.28f, 1f);
            gl.Vertex(3.65f, -2.28f, 1f);
        gl.End(); 
```

* * *

结果？就像我们不会做这两个 gl.Translate(...) 而是直接做一样：

```
 gl.Translate(-3.5f, 1.5f, -7f); 
 gl.Rotate(this.triangleRotation, 0.0f, 1.0f, 0.0f); 
```

总之，我们希望能够在它自己的局部轴上旋转我们的点云，但我们似乎无法设置它的“中心旋转点”。问题是，由于代码是有效的（没有发生错误），我们不知道为什么它没有按照它应该做的那样做。

我们最好用 GL_POINTS 而不是 GL_TRIANGLES 来渲染它，因为它看起来如何。

# java - 了解同步

> ID：13309412
> 
> 赞同：3
> 
> 时间：2012-11-09T13:55:57.967
> 
> 标签：java, multithreading, runnable

我正在尝试自学线程，但似乎无法使 synchronized() 工作。这就是我正在做的事情：

在类测试中，我声明了一个变量

```
static String toggy = "false"; 
```

然后是具有此运行方法的可运行（MyRunnable）：

```
@Override
public void run() {
    synchronized (toggy) {
        System.out.println("toggy for " + name + " BEFORE = " + toggy);
        int b = 0;
        for(int i=0; i<1000; i++) {
            b++;
        }
        System.out.println("toggy for " + name + " AFTER = " + toggy);
        System.out.println("--------------------------------------------\n");

        if(toggy.equals("false")) {
            toggy = "true";
        } else if(toggy.equals("true")) {
            toggy = "false";
        }                                       
    }
} 
```

我在这里测试这个：

```
for (int i = 0; i < 90; i++) {
    Runnable task = new Test.MyRunnable(i+"");
    Thread worker = new Thread(task);
    worker.setName(String.valueOf(i));
    // Start the thread, never call method run() direct
    worker.start();
} 
```

据我了解，同步块应该防止“toggy”的值在某个线程运行时发生变化。但是当我时不时地运行该程序时，它确实如此。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:00:04.027

通过为 分配不同的值（`String`实例）`toggy`，该`synchronized`块将锁定不同的对象：

```
synchronized ("false")
{
} 
```

或者：

```
synchronized ("true")
{
} 
```

这将允许多个线程输入`synchronized`要保护的块代码。使用不同的对象进行锁定：

```
static final Object lock = new Object();

synchronized (lock)
{
} 
```

# c - 当接收到来自“killall”或“kill -p pid”的kill信号时，如何在退出程序之前执行处理函数？

> ID：13309415
> 
> 赞同：2
> 
> 时间：2012-11-09T13:56:06.223
> 
> 标签：c, kill, signal-handling

我有以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

pthread_t test_thread;

void *thread_test_run (void *v)
{
    int i=1;
    while(1)
    {
       printf("into thread %d\r\n",i);
       i++; 
       sleep(1);
    }
    return NULL
}

int main()
{

    pthread_create(&test_thread, NULL, &thread_test_run, NULL);

    sleep (20);  

    pthread_cancel(test_thread);

    sleep(100);
    // In this period (before the finish of myprogram),
    // I execute killall to kill myprogram 
    // I want to add a signal handle function to
    // execute pthread_exit() before the program quit

} 
```

我想通过在程序退出之前添加一个信号句柄函数来执行 pthread_exit() 来完成我的代码。

怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:04:33.550

因为默认`killall`发送信号`SIGTERM`，所以可以处理这种类型的信号。

```
#include <signal.h>

void handler(int sig)
{
     /* ... */
}

signal (SIGTERM, handler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:56:49.120

这就是我如何在我的实用程序中实现某种你想要的东西[https://github.com/seriyps/wrk/commit/1d3c5dda0d46f0e567f3bae793bb3ae182de9438](https://github.com/seriyps/wrk/commit/1d3c5dda0d46f0e567f3bae793bb3ae182de9438)

```
static thread *threads;
int main(....){
    ...
    sigint_action.sa_handler = &sig_handler;
    sigemptyset (&sigint_action.sa_mask);
    /* reset handler in case when pthread_cancel didn't stop
       threads for some reason */
    sigint_action.sa_flags = SA_RESETHAND;
    sigaction(SIGTERM, &sigint_action, NULL);
    ...
}
static void sig_handler(int signum) {
    printf("interrupted\n");
    for (uint64_t i = 0; i < cfg.threads; i++) {
        if(pthread_cancel(threads[i].thread)) exit(1);
    }
} 
```

# zend-framework2 - Zend Framework 控制台应用程序

> ID：13309416
> 
> 赞同：2
> 
> 时间：2012-11-09T13:56:10.233
> 
> 标签：zend-framework2, php

我已按照步骤从骨架（[http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)）创建 Zend Framework 2 应用程序

还有一个非常好的 ZF2 本地控制台支持教程 [http://framework.zend.com/manual/2.0/en/modules/zend.console.introduction.html](http://framework.zend.com/manual/2.0/en/modules/zend.console.introduction.html)

现在教程说：

> 假设我们希望我们的应用程序处理以下命令行：

```
> zf user resetpassword user@mail.com 
```

> 当用户使用这些参数运行我们的应用程序 (zf) 时，我们希望调用 Application\IndexController 的操作 resetpassword。

问题是没有关于如何让脚本在 CONSOLE（当前是 windows）上运行的描述 - 在创建的文件夹结构中没有 zf 或任何其他可执行脚本

有什么提示吗？

理想情况下是应用程序根目录中的 bin 文件夹，其中包含每个应用程序模块的入口脚本

例如，运行一个名为 module1 的应用程序模块

```
php appfolder/bin/module1.php --verbose 
```

或者

```
php appfolder/bin/cli.php module1 --verbose 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:50:23.443

我找到了解决方案。就像基于 Web 的 ZF2 应用程序一样，入口点是 appfolder/public 中的 index.php

上面教程中的示例应用程序就是这样调用的

```
php.exe public\index.php user resetpassword user@mail.com 
```

### 调用 zf2 控制台应用程序的 linux 包装器

更改为您的 ZF2 应用程序文件夹

```
mkdir bin    
touch bin/app
chmod +x bin/app 
```

把它放到你的应用文件中

```
#!/bin/sh
PHP_BIN=`which php`
WDIR=`dirname ${0}"`
if test -x "${PHP_BIN}"; then
    cd "${WDIR}"
    "${PHP_BIN}" "../public/index.php" "${@}"
    exit "${?}"
fi
echo "php binary not found, please install php-cli"
exit 1; 
```

现在您应该能够以这种方式运行您的应用程序

```
app user resetpassword user@mail.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:07:46.367

对于那些有兴趣的人......根据 Michel Feldheim 的回答，我已经稍微改进了它以处理符号链接，并且从哪里运行脚本也无关紧要，因为它总能找到正确的位置。然而，这个确实使用 bash"

```
#!/bin/bash
PHP_BIN=`which php`
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ] ; do SOURCE="$(readlink "$SOURCE")"; done
scriptDir="$( cd -P "$( dirname "$SOURCE" )" && pwd )"
rootDir="$( cd -P "$( dirname "$scriptDir/../../../../" )" && pwd )"
if test -x "${PHP_BIN}"; then
    cd $rootDir
    "${PHP_BIN}" "public/index.php" "${@}"
    exit "${?}"
fi
echo "php binary not found, please install php-cli"
exit 1; 
```

在上面的示例中， $scriptDir 是您正在运行的实际脚本所在的位置。rootDir 应该是应用程序的基本目录。因此，假设应用程序位于 /data/www/someapplication 下，并且该应用程序包含一个 modules/Application/bin 文件夹，其文件名为 run。从 linux 路径 (/) 运行：

```
sh /data/www/someapplication/modules/Application/bin/run 
```

将目录更改为 /data/www/someapplication，然后运行：

```
php public/index.php <your arguments> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T14:43:19.437

一个命令行工具曾经随 ZF1 版本一起提供。可能教程指的是那个。

# c# - 使用可选参数

> ID：13309417
> 
> 赞同：4
> 
> 时间：2012-11-09T13:56:13.990
> 
> 标签：c#, optional-arguments

我有一个带有 2 个可选参数的方法。

```
public IList<Computer> GetComputers(Brand? brand = null, int? ramSizeInGB = null)
{
    return new IList<Computer>();
} 
```

我现在正在尝试在我不想指定`Brand`参数的其他地方使用此方法，而只是`int`使用此代码时出现错误：

```
_order.GetComputers(ram); 
```

我收到的错误：

```
Error   1   The best overloaded method match for 'ComputerWarehouse.Order.GetComputers(ComputerWarehouse.Brand?, int?)' has some invalid arguments  C:\Users\avmin!\Documents\InnerWorkings Content\630dd6cf-c1a2-430a-ae2d-2bfd995881e7\content\T0062A2-CS\task\ComputerWarehouse\ComputerStore.cs 108 59  ComputerWarehouse
Error   2   Argument 1: cannot convert from 'int?' to 'ComputerWarehouse.Brand?'    C:\Users\avmin!\Documents\InnerWorkings Content\630dd6cf-c1a2-430a-ae2d-2bfd995881e7\content\T0062A2-CS\task\ComputerWarehouse\ComputerStore.cs 108 79  ComputerWarehouse 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T13:58:12.530

如果要跳过其他可选参数，则必须指定可选参数的名称。

```
_order.GetComputers(ramSizeInGB: ram); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T13:58:23.780

要允许编译器填充*较早的*参数，您需要指定后面的参数的名称：

```
_order.GetComputers(ramSizeInGB: ram); 
```

基本上，C# 编译器假定除非您指定任何参数名称，否则您提供的参数是按附加顺序排列的。如果您没有为所有参数提供值，并且其余参数具有默认值，则将使用这些默认值。

`brand`所以所有这些都是有效的（假设和的适当值`ram`）：

```
_order.GetComputers(brand, ram);       // No defaulting
_order.GetComputers(brand);            // ramSizeInGB is defaulted
_order.GetComputers(brand: brand);     // ramSizeInGB is defaulted
_order.GetComputers(ramSizeInGB: ram); // brand is defaulted
_order.GetComputers();                 // Both arguments are defaulted 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T13:58:23.880

正确的语法是将命名参数与可选参数结合使用，如下所示：

```
_order.GetComputers(ramSizeInGB: ram); 
```

仅当可选参数位于指定参数之后时，才可以跳过可选参数（不使用命名参数），因此可以：

```
_order.GetComputers(new Brand()); 
```

就像这

```
_order.GetComputers(); 
```

* * *

要了解为什么必须以这种方式完成，请考虑具有如下签名的方法：

```
public void Method(double firstParam = 0, long secondParam = 1)

Method(3); 
```

在这里，编译器无法推断开发人员是否打算使用第一个参数或第二个参数调用该方法，因此区分的唯一方法是明确说明哪些参数映射到哪些参数。

# c# - 多线程时企业库日志记录错误

> ID：13309419
> 
> 赞同：1
> 
> 时间：2012-11-09T13:56:18.557
> 
> 标签：c#, multithreading, enterprise-library

我在尝试在新线程中使用 Microsoft Enterprise Library Logging 时遇到问题。这是我用来启动线程的代码：

```
Thread cleanupThread = new Thread(new ThreadStart(DirectoryCleanup));
cleanupThread.Start(); 
```

在 DirectoryCleanup 方法中，以下行会引发错误：

```
Logger.Write(ex.Message, "General", 100, 0, 
System.Diagnostics.TraceEventType.Critical); 
```

这是我得到的错误：

```
The type initializer for 'Microsoft.Practices.EnterpriseLibrary.Logging.Logger' 
threw an exception. 
```

这是内部异常：

```
{"Could not load file or assembly 'Microsoft.Practices.EnterpriseLibrary.Common,
Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its
dependencies. The system cannot find the file specified.":"
Microsoft.Practices.EnterpriseLibrary.Common, Version=4.1.0.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35"} 
```

记录器在程序的主线程中工作得很好。它只有新线程有问题。我花了很多时间搜索，但似乎找不到答案。谢谢你的帮助！

更新：

我尝试使用以下代码使用线程池：

```
Task.Factory.StartNew(DirectoryCleanup); 
```

它产生了与上面相同的错误。

# php - 在使用 X 次后过期的变量

> ID：13309420
> 
> 赞同：0
> 
> 时间：2012-11-09T13:56:19.777
> 
> 标签：php, security

是否可以创建一个在使用 X 次时取消设置变量的函数？

我知道`unset()`它是如何工作的。为了安全起见，这将很方便。

例如，要自动取消设置我从 MySQL 数据库中获取的个人信息，`unset()`代码中有 1000-2000 看起来很乱！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:11:37.190

尽管您的问题并不完全合理，但可以这样做：

```
class ExpiredValue {
    private $data;
    private $access_counter;
    private $max_access;

    public function __construct($data, $max_access) {
        $this->max_access = $max_access;
        $this->__invoke($data);
    }

    public function __invoke($data = null) {
        if(func_num_args() == 0) {
            $this->access_counter++;
            if($this->access_counter > $this->max_access) {
                $this->data = null; // remove data from memory
            }
            return $this->data;
        } else if(func_num_args() == 1) {
            $this->access_counter = 0;
            $this->data = $data;
        }
    }
} 
```

如何使用：

```
$value = new ExpiredValue("<data>", 3);
echo $value(); // "<data>"
$value("<other data>");
echo $value(); // "<other data>"
echo $value(); // "<other data>"
echo $value(); // "<other data>"
echo $value(); // null 
```

大多数情况下，如果你开始考虑这样的事情，你就走错了路。有时退一步找出真正的问题是有帮助的。您的问题并不是真的不可能使您的变量过期。

# zend-framework - 在 Netbeans for Zend Framework 库中无法自动完成

> ID：13309421
> 
> 赞同：0
> 
> 时间：2012-11-09T13:56:24.320
> 
> 标签：zend-framework, autocomplete, netbeans-7

我必须具有相同结构的项目，但 ZF 的不同版本：旧的 ZF 1.11.4 和新的 ZF 1.111.11。源文件夹包含^

```
31.05.2012  15:15             7 996 .zfproject.xml
25.06.2012  12:53    <DIR>          application
09.11.2012  13:01    <DIR>          cron
11.03.2012  15:11    <DIR>          library
09.11.2012  17:41    <DIR>          nbproject
09.11.2012  13:01    <DIR>          public 
```

在 library 文件夹中放置 Zend 和 My lib 文件夹。在旧项目中，当我编写一些 autocomlite 工作完美的代码时，在新项目中 - 它不起作用。项目有一些属性。

Netbeans 版本 - 7.2，Windows 7。

这个解决方案 - [Get Netbeans to Auto-suggest Zend Framework components](https://stackoverflow.com/questions/10096728/get-netbeans-to-auto-suggest-zend-framework-components)不起作用，因为 netbeans 说，库文件夹已经在我的项目中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T08:49:54.927

您要确保将库添加到 Netbeans 中的全局包含路径。

从**工具**下拉菜单访问，然后选择**选项**，单击**PHP**图标并参考**常规**选项卡。

Netbeans 将是此包含路径的唯一使用者，它根本不会影响您的 PHP 或 Zend Framework 设置。此信息主要用于自动完成和提示。

![在此处输入图像描述](../Images/0529bafef9fc6df8fe31827771de80af.png)

不是项目包含路径，可从每个项目的“**属性”菜单访问。**

![在此处输入图像描述](../Images/36f93ef60edca71e19a208501ed8eb2d.png)

除非您有非常具体且令人信服的理由，否则没有真正的理由拥有两个版本的 ZF 1.11。你也可以放弃 ZF 1.11.4 直接使用 ZF 1.11.11 甚至升级到 ZF 1.12，我怀疑你会遇到兼容性问题。

通常，在开发机器上，我只需将最新版本的 ZF 1 和 ZF 2 添加到我的 PHP 包含路径和我的 Netbeans Global 包含路径。这将使这两个库在我需要的任何地方都可用，而无需进行任何配置。

# asp.net - 关于 WebGet(UriTemplate=

> ID：13309422
> 
> 赞同：1
> 
> 时间：2012-11-09T13:56:28.710
> 
> 标签：asp.net, json, wcf

我有一段代码。

```
 [OperationContract]
    [WebGet(UriTemplate = "/Intest/GeneratePINs/{ID}/{count}/{SameID}", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json)]
    public void GeneratePINs(string ID, string count, string SameID)
    { 
```

我是 WCF 和 json 的新手，你能告诉我那是什么吗？我想这是从 UI 中检索值并将它们传递给服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:12:40.583

它是 WCF 服务中的一种方法，可通过 HTTP Get 调用进行访问。

Get 调用必须遵循 UriTemplate 参数给出的大纲。

URI 模板还说明了如何在查询字符串中传递 WCF 服务方法的参数。

它以 JSON 形式给出响应（也就是说，它是无效的，所以实际上并没有做任何事情）。

# node.js - nginx vs node-http-proxy

> ID：13309425
> 
> 赞同：17
> 
> 时间：2012-11-09T13:56:42.787
> 
> 标签：node.js, nginx, node-http-proxy

请告诉我，部署 nodejs 应用程序 nginx 或 node-http-proxy 最好使用什么。什么是最健壮的？

我需要的基本功能是

*   将所有请求代理到非 80 帖子
*   负载均衡器
*   Websocket 支持

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-09T15:04:38.047

这是一篇关于该主题的精彩文章[http://www.exratione.com/2012/07/proxying-websocket-traffic-for-nodejs-the-present-state-of-play/](http://www.exratione.com/2012/07/proxying-websocket-traffic-for-nodejs-the-present-state-of-play/)

就我个人而言，我在这个领域玩过很多配置，这一切都归结为你需要什么以及你需要在哪里部署。如果您在自己的硬件（或云切片等）上并且只需要支持 Node，那么端口 80 上的 node-http-proxy 非常强大、健壮，并且允许您利用 websockets 和 ssl 等技术有点头疼。

但是，如果您有其他需要支持的站点，例如 Drupal 或 Grails 站点，则在 80 上面向 Nginx 是更标准的做法。话虽如此，Nginx 没有理由不能在 80 上使用 node-http-proxy 安装到端口 8080，并根据所需的 CGI 语言代理流量。这是我的首选配置，也是我目前在生产中运行的配置。到目前为止我很高兴。它快速、强大，我仍然可以支持我的客户在 RapidWeaver 中构建站点以及我自己的使用 websockets 和 ssl 的 nodejs 应用程序。

哦，使用 node-http-proxy 进行负载平衡是小菜一碟...查看这个简单的循环示例[https://github.com/nodejitsu/node-http-proxy/blob/master/examples/balancer/简单平衡器.js](https://github.com/nodejitsu/node-http-proxy/blob/master/examples/balancer/simple-balancer.js)

编辑：

我发现在端口 80 上运行 node-http-proxy 是不好的做法，因为它需要 root 用户来执行 node。相反，使用 IP 表将端口 80 重新路由到运行 node-http-proxy 的非特权端口。更好的设置是将 varnish 放在 80 上（因为正如文章所说，任何严肃的 Web 应用程序前面都应该有一个 HTTP 加速器）并将请求转发到非特权端口上的 node-http-proxy。从这里开始，由您决定如何在节点服务器和 nginx 之间分配流量。

第二次编辑：

Nginx 现在支持 websockets！虽然节点的当前状态非常有能力提供完整的堆栈，但这并不意味着它应该这样做。我的意思是，从技术上讲，您可以使用螺丝刀的手柄将钉子敲入墙壁……但是如果您将锤子放在那里，您为什么要这样做？从服务静态到复杂的负载平衡，Nginx 已经过实战测试并部署在一些最先进的网络中。现在已经添加了 websocket 支持，这很简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-30T18:05:49.813

由于我们必须绕过中国互联网墙，我被迫在生产中使用 node-http-proxy，恕我直言，它非常健壮、灵活。

最近在考虑在其他领域更多地使用它，所以我谷歌并得到以下测试

[https://github.com/observing/balancerattle](https://github.com/observing/balancerbattle)

根据测试，node-http-proxy 似乎是最慢的。但是，我认为性能差异并不大，这也证明了 node-http-proxy 也很健壮。在使用 node-http-proxy 时，我可以纯粹使用 nodejs 并构建一个只有几个包的环境。（我们使用 FreeBSD，我讨厌构建很多我们永远不需要的包。）

在使用 node-http-proxy 时，您正在编写自己的代理服务器，因此您可以尽可能多地自定义逻辑。确实没有必要使用 nginx 或 haproxy 来获得更好的性能。

# sql - 您将如何为您的订单创建一个部分

> ID：13309429
> 
> 赞同：0
> 
> 时间：2012-11-09T13:57:06.123
> 
> 标签：sql, database, e-commerce

我希望在我的电子商务网站上创建一个部分，以显示消费者过去的订单。这必须通过为每个客户创建一个新表来完成，还是有更好/更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:09:32.663

这是使用 MySQL 来容纳您的数据的简单模式，这里也提供了脚本： [http ://sqlfiddle.com/#!2/f4aa3](http://sqlfiddle.com/#!2/f4aa3)

```
CREATE TABLE tblCustomers
(
   CustomerID INT AUTO_INCREMENT PRIMARY KEY
  ,CustomerName VARCHAR(50)
);

CREATE TABLE tblCustomerOrder
(
    OrderID INT AUTO_INCREMENT  PRIMARY KEY
  , CustomerID INT
  , OrderDate DATETIME
);

CREATE TABLE tblCustomerOrderLines
(
    OrderID INT
  , ProductID INT
  , Quantity INT
  , LineAmount FLOAT
); 
```

对于 SQL Server 2008：

```
CREATE TABLE tblCustomers
(
   CustomerID INT IDENTITY(1,1) PRIMARY KEY
  ,CustomerName VARCHAR(50)
);

CREATE TABLE tblCustomerOrder
(
    OrderID INT IDENTITY(1,1)  PRIMARY KEY
  , CustomerID INT
  , OrderDate DATETIME
);

CREATE TABLE tblCustomerOrderLines
(
    OrderID INT
  , ProductID INT
  , Quantity INT
  , LineAmount DECIMAL(9,2)
); 
```

# json - java.lang.IllegalStateException: getInputStream() 已经为此请求调用 + Struts2 和 JSON

> ID：13309430
> 
> 赞同：2
> 
> 时间：2012-11-09T13:57:07.587
> 
> 标签：json, struts2

我收到以下错误：java.lang.IllegalStateException：在使用 Struts2 实现 JSON 时，已经为此请求调用了 getInputStream()。例外：

```
org.apache.struts2.json.JSONException: org.apache.struts2.json.JSONException: 
    java.lang.reflect.InvocationTargetException
        org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:230)
        org.apache.struts2.json.JSONWriter.process(JSONWriter.java:160)
        org.apache.struts2.json.JSONWriter.value(JSONWriter.java:126)
        org.apache.struts2.json.JSONWriter.write(JSONWriter.java:94)
        org.apache.struts2.json.JSONUtil.serialize(JSONUtil.java:115)
        org.apache.struts2.json.JSONResult.createJSONString(JSONResult.java:197)
        org.apache.struts2.json.JSONResult.execute(JSONResult.java:170)
        com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
    ...........

java.lang.IllegalStateException: getInputStream() has already been called for this request

org.apache.catalina.connector.Request.getReader(Request.java:1242)
    org.apache.catalina.connector.RequestFacade.getReader(RequestFacade.java:506)
    javax.servlet.ServletRequestWrapper.getReader(ServletRequestWrapper.java:212)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:210)
    org.apache.struts2.json.JSONWriter.process(JSONWriter.java:160)
    org.apache.struts2.json.JSONWriter.value(JSONWriter.java:126)
    org.apache.struts2.json.JSONWriter.add(JSONWriter.java:355)
    org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:215)
    org.apache.struts2.json.JSONWriter.process(JSONWriter.java:160)
    org.apache.struts2.json.JSONWriter.value(JSONWriter.java:126)
    org.apache.struts2.json.JSONWriter.write(JSONWriter.java:94)
    org.apache.struts2.json.JSONUtil.serialize(JSONUtil.java:115)
    org.apache.struts2.json.JSONResult.createJSONString(JSONResult.java:197)
    org.apache.struts2.json.JSONResult.execute(JSONResult.java:170)

......... 
```

请帮我解决这个错误，因为我遇到了这个问题我有几个问题：我已经实现了 ServletRequestAware 并使用它来获取 userLocale。它是否与 JSONWriter 对象冲突。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T15:12:11.550

我假设您使用的是 Struts 的 2.x 版本，我遇到了同样的问题并发现了 Struts 的一个现有错误 -[在此处解释](http://codesecure.blogspot.in/2011/12/struts-2-session-tampering-via.html)

实际上，任何是 RequestAware 或 SessionAware 的操作都会自动绑定会话和请求。我从行动中删除了我的请求获取者，事情开始正常工作。

# jquery - jQuery分页 - 页数错误

> ID：13309434
> 
> 赞同：3
> 
> 时间：2012-11-09T13:57:43.890
> 
> 标签：jquery, rss, paging

我正在尝试在 rss 解析器中创建分页功能。它几乎可以工作了。只有最后一页是错误的。[在这里看小提琴](http://jsfiddle.net/d9vxX/)。最后一页显示 11-10。这是为什么？Feed 中当前有 10 个项目，因此在此示例中应该只有两页，而不是三页 - 在第二页上，“下一步”按钮应该被隐藏。

这是哪里出了问题吗？

```
if (numEntriesReturned+1-oRssConfig.contempOffset>0 && oRssConfig.contempOffset<100-oRssConfig.maxItems) $('#btnNext').css("display", "block");
    else $('#btnNext').css("display", "none"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:46:21.523

几个小时后，我完全重写了剧本。这应该可以使用 Zazar 的 zRSSFeed 插件加载和分页 RSS 提要。我评论了大多数功能，所以你可以看到并理解发生了什么，好吧，希望如此！

**特点：**
轻松选择“每页供稿”进行显示。
轻松输入 RSS 源的链接。
下一个和上一个按钮在需要时出现/消失。
在每页上自动显示 Feed Count。*示例：'1 of 5'*

看看这个[**Fiddle**](http://jsfiddle.net/videsignz/6vUVh/)看看它的实际效果！
任何问题？

**jQuery 脚本**

```
// Editable Values
var feedlink = 'http://feeds.reuters.com/reuters/oddlyEnoughNews'; // Set Feed Location
var fpp = 4; // Choose how many feeds per page to display (fpp = Feeds Per Page)
var feedview = '#RSSview'; // Choose where to diplay the RSS Feed

// Initial Variables ( Do Not Edit )
var feeds = null; // Variable to hold total feed count
var totalpages = null; // Variable to hold total pages
var currentpage = null; // Variable to hold Current Page being Displayed
var lastpagefeeds = null; // Variable to hold Amount of Feeds on the Last Page
var firstof = null; // Variable to hold First Feed Display - Example: 3 of ?
var lastof = null; // Variable to hold Last Feed Display - Example: ? of 10
var feedoffset = 1; // Set Initial Feed Offset

///////////////////
// RSS Functions //
///////////////////

// Calulate Feed Count Display
function displayfeedcount(){
    // Set 'First Of ???'
    firstof = feedoffset;
    // Set '??? of Last'
    if(currentpage == Math.ceil(totalpages)){ lastof = feeds; }else{ lastof = (firstof + fpp) - 1;}
    $('#offsetDispl').html( firstof + ' of ' + lastof); // Display Feed Count ' First of Last'
}

// Load Initial Feeds on Page 1
function initialfeeds(){
    $(feedview).rssfeed( feedlink , { limit: fpp , offset: 0 }); // Load Initial Set of Feeds
    currentpage = 1; // Set Current Page to 1
    displayfeedcount(); // Trigger the Display of Feedcount - Example: '1 of 5'
}

// Calculate Total Pages
function calculatepages(){
    totalpages = feeds / fpp; // Total Page Calculation
    console.log( 'Total Pages: ' + totalpages); // Log - For Testing Purposes Only - Delete if Desired
    initialfeeds(); // Trigger Initial Display of Feeds
}

// Determine if the NextBtn should be shown on load
function showbuttons(){
    if ( feeds > fpp ){ $('#btnNext').show(); } // Evaluate 'Next Button' Visibility
}

// Determine Total Feed Count
function feedcount() {
    feeds = arguments[1]; // Set Feed Count to Variable 'feeds'
    console.log( 'Total Feeds: ' + feeds ); // Log - For Testing Purposes Only - Delete if Desired
    showbuttons(); // Trigger Initial Button Display
    calculatepages(); // Trigger Total Page Calculation
}

// Function to Show Next Page
function nextpage(){
    currentpage = currentpage + 1; // Set New Current Page
    feedoffset = feedoffset + fpp ; // Set New Feed Offset   
    console.log('Current Page is: ' + currentpage);  // Log - For Testing Purposes Only - Delete if Desired
    console.log('Feed Offset is: ' + feedoffset );  // Log - For Testing Purposes Only - Delete if Desired
    $(feedview).rssfeed( feedlink , { limit: fpp , offset: feedoffset }); // Load Next Set of Feeds
    if( currentpage >= totalpages ){ $('#btnNext').hide();} // Evaluate 'Next Button' Visibility
    if( currentpage > 1){ $('#btnPrev').fadeIn('250');} // Evaluate 'Previous Button' Visibility
    displayfeedcount(); // Display Feed Count ' ??? of ??? '   
}

// Function to Show Previous Page
function prevpage(){
    currentpage = currentpage - 1;  // Set New Current Page
    feedoffset  = feedoffset - fpp ; // Set New Feed Offset
    console.log('Current Page is: ' + currentpage);  // Log - For Testing Purposes Only - Delete if Desired
    console.log('Feed Offset is: ' + feedoffset );  // Log - For Testing Purposes Only - Delete if Desired
    $(feedview).rssfeed( feedlink , { limit: fpp , offset: feedoffset });
    if( currentpage <= totalpages ){ $('#btnNext').fadeIn('250');} // Evaluate 'Next Button' Visibility
    if( currentpage <= 1){ $('#btnPrev').hide();} // Evaluate 'Previous Button' Visibility
    displayfeedcount(); // Display Feed Count ' ??? of ??? '
}

// Bind Previous and Next Button Clicks
$('#btnPrev').on('click', prevpage); // Bind the PrevPage Function
$('#btnNext').on('click', nextpage); // Bind the NextPage Function

// Retrieve Total Feeds
$('#hidden').rssfeed( feedlink , {}, feedcount);
// Make sure this divider exists on the page body >>>  <div id="hidden" style='display:none;'></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:13:47.307

第一页`numEntriesReturned`为 5，第二页为 10。我认为当最后一页已满时它没有用。

如果您检测到最后一页为空并删除按钮，也许您可​​以返回。

# sql - 从表中获取最大值（日期）

> ID：13309442
> 
> 赞同：1
> 
> 时间：2012-11-09T13:58:08.000
> 
> 标签：sql, ms-access, jet

希望这是一个简单的。我有一个已发送消息表和一个客户表。我正在尝试获取发送给客户的最后一条消息的日期，但我正在做噩梦，无法弄清楚发生了什么！

In Chinese：获取客户收到的最后日期，其中最后日期大于 DateX 且小于 DateY。

在我的 SQL 中：（Msaccess）

```
SELECT 
  Max(outgoingmessages.outgoingmessagedatetime), 
  outgoingmessages.outgoingmessagecustomerID 
FROM 
  outgoingmessages 
  inner join customers on customers.customerid = 
                          outgoingmessages.outgoingmessagecustomerid 
WHERE  
  (outgoingmessages.outgoingmessagedatetime>#20/Oct/2012# 
  and 
  outgoingmessages.outgoingmessagedatetime < #02/Nov/2012# )
  and 
  outgoingmessages.outgoingmessagecustomerID NOT IN (
    SELECT incomingMessageCustomerID from incomingmessages
  ) 
GROUP BY 
  outgoingmessages.outgoingmessagecustomerID; 
```

我知道`customerid=32`在 05/11 发送了一条消息，但查询似乎忽略了这一点并显示了他的旧日期。我实际上只需要获取`customerID`他们最后一条消息的日期和日期。

有任何想法吗？！

================ 更新

我认为如果我可以说“WHERE MAX(outgoingmessagetime) BETWEEN date1 and date2)...但我不能使用 MAX 日期，该语句会起作用。也许我需要一个子查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:12:45.530

为什么不 ... ？

```
SELECT Top 1 o.outgoingmessagedatetime, o.outgoingmessagecustomerID 
FROM outgoingmessages o
WHERE  o.outgoingmessagedatetime between #2012/10/02# And #2012/11/02#
ORDER BY o.outgoingmessagedatetime Desc 
```

请注意，这不包括 11 月 2 日之后发送的邮件。要包含截至 11 月 5 日的消息，请说

```
WHERE  o.outgoingmessagedatetime between #2012/10/02# And #2012/11/05# 
```

重新评论

```
SELECT  o.outgoingmessagecustomerID, Max(o.outgoingmessagedatetime)
FROM outgoingmessages o
WHERE  o.outgoingmessagedatetime between #2012/10/02# And #2012/11/02#
AND o.outgoingmessagecustomerID NOT IN (
    SELECT outgoingmessagecustomerID FROM outgoingmessages 
    WHERE outgoingmessagedatetime > #2012/11/02#)
GROUP BY o.outgoingmessagecustomerID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:08:11.443

这个怎么样，起初我不认为**客户**表是必需的，但看起来您可能只想显示与该表中的客户匹配的记录，所以我采用了这种方法：

```
SELECT A.MaxDT, A.outgoingmessagecustomerID
FROM
(SELECT Max(O.outgoingmessagedatetime) AS MaxDT, O.outgoingmessagecustomerID
FROM outgoingmessages AS O
WHERE O.outgoingmessagedatetime BETWEEN >#10/21/2012# AND Date()-7
AND O.outgoingmessagecustomerID NOT IN (SELECT incomingMessageCustomerID FROM imcomingmessages)
GROUP BY O.outgoingmessagecustomerID) AS A, customers AS C
WHERE A.outgoingmessagecustomerID = C.customerID 
```

这会在派生表中执行 MAX 计算，然后将结果链接回客户表

Ps：我希望你的字段名更短^_^

# tridion - SessionAwareCoreServiceClient 与 CoreServiceClient 的主要区别是什么？

> ID：13309446
> 
> 赞同：11
> 
> 时间：2012-11-09T13:58:14.060
> 
> 标签：tridion, tridion-2011

SessionAwareCoreServiceClient 与 CoreServiceClient 的主要区别是什么？

wsHttp 是来自未在服务器上运行的远程应用程序的首选绑定吗？是否可以从远程核心服务应用程序使用 netTcp 绑定？为什么不？

Tridion 核心服务为我们提供了 3 个用于 XML 内容的主要绑定：

*   netTcp - 最快
*   wsHttp - 使用 ws* 标准并且比 basicHttp 更好
*   basicHttp - 向后兼容 .NET 2.0

我发现这篇关于[wsHttp 和 basicHttp 之间区别](http://www.codeproject.com/Articles/36396/Difference-between-BasicHttpBinding-and-WsHttpBind)的文章。在另一篇文章中也很好地解释了为什么[netTcp 更快](https://stackoverflow.com/questions/5500030/wcf-nettcpbinding-vs-httpbinding-difference-in-data-sent-on-wire)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T14:16:06.583

如果仅打开端口 2660，则可以将 netTcp 用于远程客户端（请记住，配置 LDAP 可能很棘手）。

wsHttp 有一些优点，比如`Impersonate`比 basicHttp 更安全。

netTcp 是最好的，因为它是最安全的，可以模拟并且是最快的。唯一的问题是它现在在不同的端口上运行。

也有可能在 IIS 7 中使用 netTcp，但由于 Tridion 2011 仍然支持 Windows 2003（无法执行 netTcp 的 IIS 6），因此 IIS 中没有 netTcp 端点。它可能会在下一个版本中添加。

# macos - Apache 403 和 @ 文件权限

> ID：13309453
> 
> 赞同：-1
> 
> 时间：2012-11-09T13:58:36.517
> 
> 标签：macos, apache, permissions, filesystems, terminal

我在 Apache2 上有一个（真的）简单的网站配置（在山狮 Mac OS X 上）：

服务器名 myServerName 目录 /myDirectory/myWebsite

我优雅地使用 Apache，我得到的只是 403。即使在我网站的所有文件和文件夹上更改权限 777 后也无法正常工作。但是，当我“ls -l”文件时，我获得了以下权限：

（用于目录） drwxrwxrwx@

唯一的区别是“@”，但我找不到它的含义（不确定在谷歌搜索时是否正确处理）；谁能告诉我“@”代表什么？

仅供参考，文件是“真实文件”，不是别名或符号链接，而且我有其他网站在同一台服务器上正常运行（但没有“@”）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:08:54.673

@ 表示文件具有扩展属性。使用 ls -l@ 显示它们。在此处阅读 ls 手册页[。](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/ls.1.html)

# php - apache不理解php 可能重复： 如何启用 PHP 短标签？ 不知道如何在互联网上搜索这个问题:) 有效，但是 没有。 可能我需要更改 httpd.conf 中的某些内容，但找不到。 在您的 php.ini 文件中，将此属性设置为 on ： short_open_tag = on phpapachehttpd.conf 4 2 回答 2 This answer is useful 4 在您的 php.ini 文件中，将此属性设置为 on ： short_open_tag = on 于 2012-11-09T14:00:43.963 回答 This answer is useful 0 这是因为短标签被禁用。 要启用它们，请启用short_open_tagphp.ini中的设置 打开 php.ini 搜索short_open_tag并;从前面删除 于 2012-11-09T14:02:18.157 回答 Related 0 prolog - 在 Datalog 中如何计数？ 1 c# - 将上传图片的路径写入数据库 3 jquery - Bootstrap 3 嵌套选项卡 1 php - 我无法正确加载帖子的子帖子 2 java - 如果我想在新线程中做某事，为什么必须将最终对象发送到参数列表？ 1 html - 将 iframe 的滚动条设置为底部 1 crossrider - 将远程 JS 添加到 crossrider 扩展 1 rest - Dart：我无法使用 HttpRequest.send() 方法在 HTTP 消息正文中发布数据 2 c++ - 为一个函数定义一个 typedef，该函数返回一个函数指针，指向一个类似它的函数 1 formatting - 如何阻止代码块突出显示非关键字？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13309454
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：php, apache, httpd.conf

> **可能重复：**
> [如何启用 PHP 短标签？](https://stackoverflow.com/questions/2185320/how-to-enable-php-short-tags)

不知道如何在互联网上搜索这个问题:)

```
<?php
echo 'Hello world';
?> 
```

有效，但是

```
<?
echo 'Hello world';
?> 
```

没有。

可能我需要更改 httpd.conf 中的某些内容，但找不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:00:43.963

在您的 php.ini 文件中，将此属性设置为 on ：

```
short_open_tag = on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:02:18.157

这是因为短标签被禁用。

要启用它们，请启用`short_open_tag`php.ini中的设置

打开 php.ini 搜索`short_open_tag`并`;`从前面删除

# c++ - 如何在 C++ 中从向量中获取一系列项目

> ID：13309455
> 
> 赞同：4
> 
> 时间：2012-11-09T13:58:42.257
> 
> 标签：c++, vector, slice

我需要从`std::vector`. 类似于 python 切片运算符：

```
range = vector[0:n] 
```

显而易见的方法是遍历所需的元素。还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T14:00:23.680

vector 的构造函数之一是：

```
template <class InputIterator>
vector ( InputIterator first, InputIterator last, const Allocator& = Allocator() ); 
```

因此，您只需要创建一个传递所需迭代器的新向量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T14:01:17.987

`vector<T>`有一个构造函数，它接受两个标识范围的迭代器。

例子：

```
std::vector<int> range( &v[0], &v[0]+n ); 
```

请注意，即使`v`是常规数组而不是 a ，这也会起作用，`vector`因为指向数组中元素的指针的行为类似于迭代器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T14:03:38.290

在 C++ 领域，不使用范围，而是使用迭代器。迭代器是指向某个元素的容器的索引。因此，要在开始时使用迭代器，请使用，`vec.begin()`并使用 来获取迭代器。如果你想迭代这个，你可以简单地做`n``vec.begin() + n`

```
for (atd::vector<Foo>::iterator it = vec.begin(); it != vec.begin() + n; ++it) 
```

如果要创建一个新向量，可以使用 Luchian 提到的构造函数，如下所示：

```
std::vector<Foo> vec2(vec.begin(), vec.begin() + n) 
```

# mysql - SQL/MySQL 使用 JOIN 选择项目

> ID：13309456
> 
> 赞同：0
> 
> 时间：2012-11-09T13:58:51.447
> 
> 标签：mysql, sql

我有 2 个这样的表：

```
CREATE  TABLE IF NOT EXISTS tb_item (
  item_id INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  item_name VARCHAR(100) NULL ,
  PRIMARY KEY (item_id)
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS tb_item_img (
  item_img_id INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  item_img_thumb ENUM('0','1') NULL DEFAULT '0' ,
  item_img_image VARCHAR(100) NULL ,
  item_id INT UNSIGNED NOT NULL ,
  PRIMARY KEY (item_img_id) ,
  INDEX fk_tb_item_img_tb_item1_idx (item_id ASC) ,
  CONSTRAINT fk_tb_item_img_tb_item1
    FOREIGN KEY (item_id )
    REFERENCES tb_item (item_id )
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = InnoDB; 
```

我有一个查询，我想从中选择所有项目，`tb_item`每个项目**只有**一个图像，我不想使用子查询，我正在使用这样的**JOIN**：

```
SELECT `item_id`, `item_name`, `item_img_image`
FROM (`tb_item`)
INNER JOIN `tb_item_img` USING ( `item_id` ) 
LIMIT 8 
```

但是，当商品有超过 1 张图片时，它会返回超过 1 次。当项目没有图像时，它不会被选中。

所以，我的问题是：是否有可能，通过上面这样的查询，选择所有项目和 1 个图像 o NULL 到图像字段。但每次只有一次`item_id`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:02:07.007

不。

公平地说，可以使用`LEFT OUTER JOIN`. 但是没有办法使用 SQL 来获得只匹配满足限制的文件之一的连接。

更新：当然这里不包括像 MAX() 或 MIN() 这样的聚合函数，但这些不适用于这种情况。并且可以使用子选择，尽管很重:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:05:42.877

内连接是不可能的。

因为您使用的是小限制，所以您应该使用它

```
SELECT 
  `item_id`, 
  `item_name`,  
  (select `item_img_image` from `tb_item_img` where `item_id` = `tb_item`.`item_id`) as `item_img_image`
FROM (`tb_item`) 
LIMIT 8 
```

还尝试按 tb_item 中的列之一进行排序，然后限制始终具有相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:59:56.470

此查询将显示两个表中的所有记录 -

```
SELECT * FROM tb_item t1
  LEFT JOIN tb_item_img t2
    ON t1.item_id = t2.item_id 
```

如果您想为每个记录一个记录`item_id`，那么您需要对结果进行分组。例如 -

```
SELECT
  t1.*, GROUP_CONCAT(t2.item_img_id)
FROM tb_item t1
  LEFT JOIN tb_item_img t2
    ON t1.item_id = t2.item_id
GROUP BY
  t1.item_id 
```

[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_group-concat)函数在一个单元格中返回子值（逗号分隔样式）。

* * *

如果只有一个`item_img_image`= `item_img_thumb`1，那么试试这个查询 -

```
SELECT
  t1.*, t2.item_img_image -- GROUP_CONCAT(t2.item_img_image)
FROM tb_item t1
  LEFT JOIN tb_item_img t2
    ON t1.item_id = t2.item_id
WHERE
  t2.item_img_thumb = 1
GROUP BY
  t1.item_id 
```

...如果有多个，则应用聚合函数，例如 - GROUP_CONCAT。

# flyway - 我可以只使用flyway的解析器吗

> ID：13309460
> 
> 赞同：0
> 
> 时间：2012-11-09T13:59:12.207
> 
> 标签：flyway

我只想使用flyway的解析器来解析SQL脚本并通过JDBC执行它们。目前我自己做了一个简单的解析器来完成这项工作。但仅限于我迄今为止遇到的情况。我想使用 flyway 解析器，因为我认为它更复杂。有没有办法使用一些飞行类来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:33:34.957

目前没有明确支持。但是，如果您愿意接受版本之间出现问题的风险（因为这不是已发布 api 的一部分），请查看 com.googlecode.flyway.core.dbsupport 包和 SqlScript 类。您可以通过查看 com.googlecode.flyway.core.metadatatable 包中的元数据表格式迁移代码来了解如何独立实例化它。

# javascript - 在 DataTable 中保存状态和列排序。（使用 cookie）

> ID：13309461
> 
> 赞同：1
> 
> 时间：2012-11-09T13:59:15.983
> 
> 标签：javascript, jquery, jquery-datatables

我正在尝试确保将[DataTable](http://datatables.net/)的状态保存在 cookie 中，以便在重新加载页面时保持字段的排序顺序。这是我的代码，但 bStateSave 似乎没有任何效果。

我遵循了这里描述的方法：http: [//datatables.net/examples/basic_init/state_save.html](http://datatables.net/examples/basic_init/state_save.html)。

我究竟做错了什么？将感谢帮助！

```
tbl = $(selector).dataTable({
           "bStateSave": true,
           "bProcessing": true,
           "bServerSide": true,
           "sAjaxSource": dataSource,
           "iDeferLoading": totalRecCount,

           "sDom": layout ? layout : defaultLayout,
                   "fnDrawCallback": drawCallback,
                   "aoColumns": aoColumns,
                   "oLanguage": {
                   "sSearch": ""
           }
       }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T16:10:12.320

好的，我在这里找到了答案：http: [//datatables.net/forums/discussion/comment/41588](http://datatables.net/forums/discussion/comment/41588)

简而言之，它在使用 iDeferLoading 时不起作用。必须使用 cookie 手动维护该状态，该 cookie 每次用户排序或存储在用户模型中的其他位置时都会创建和更新。

# csv - 路由错误，导入 csv

> ID：13309462
> 
> 赞同：0
> 
> 时间：2012-11-09T13:59:28.053
> 
> 标签：csv, upload, ruby-on-rails-3.2, activeadmin

我想使用活动管理员上传一个 csv 文件，我想知道这是否可能，在 f.input 中创建一个 from_tag：

```
 <%= f.inputs do%>
    <%= f.input :contact, :as => :select, :collection => Contact.all %>
    <%= f.input :route_import, :as => :select, :collection => RouteImporter.all %>
    <% form_tag({:action => :upload}, :multipart => true) do %>
        <%= file_field_tag 'upload_data'%>
    <% end %>
<%end%> 
```

当我运行它时，我收到此错误：

> 路由错误没有路由匹配 {:action=>"upload", :controller=>"admin/routes"}

我正在尝试调用 RouteQuickcom 类中的方法上传，我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:53:13.427

快速说明，这不会解决您的路由问题：

将 a`form`放入另一个`form`不是有效的 HTML，根据我的经验，浏览器不知道如何处理这个并最终提交主表单，但如果你真的想这样做，显然有一些解决方法： [它是否有效在另一个 html 表单中有一个 html 表单？](https://stackoverflow.com/questions/555928/is-it-valid-to-have-a-html-form-inside-another-html-form)

# javascript - javascript 大数组或对象：浏览器性能和内存

> ID：13309464
> 
> 赞同：12
> 
> 时间：2012-11-09T13:59:40.210
> 
> 标签：javascript

我想知道使用包含大约 100 000 个元素（属性）的数组（或对象）是否会在使用 indexOf、slice 等频繁访问它们时导致浏览器中的性能或内存问题。在现代浏览器中使用大数组是否有一些建议？

我的特殊情况。我有以下结构：

tack01：[平均 10 000 个元素的数组] ... tack0n：[平均 10 000 个元素的数组]

跟踪平均数量为 10。

元素看起来像 {id: "xa432fds", some properties}

在运行时，我需要访问任何知道提供它的元素的元素。

如果我在没有转换的情况下使用这个结构，我需要在所有轨道上执行搜索并使用 indexOf 来查找具有 Id 的元素。

所以我打算创建一个索引对象，它具有以下结构： indexObj = {id1：引用带有 id1 的元素，id2：引用带有 id2 的元素}

要访问某个元素，我只需要访问 indexObj[id]，这对我的情况来说是正确的解决方案吗？

所有这些都应该在客户端执行。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-09T14:04:52.620

这是一个非常广泛的问题。

我想说的主要建议是真正深入了解您正在使用的内容。JavaScript[中的数组根本不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)，它们是具有 JavaScript 普通对象的所有正常管道的对象。数组索引不是数字，不是某些内存表的偏移量*；它们是类字典映射中的字符串键。一旦你接受了数组只是对象的事实，它可能会开辟结构化或访问数据的新方法，这样你就可以避免昂贵的操作，如`indexOf`.

*（* 除非 JavaScript 引擎优化，当然。引擎**会**优化。）*

* * *

**更新**`id`：查看您的编辑，是的，转换数据以便您可以使用它们作为属性名称 ( )来查找曲目`indexObj[id]`是我的建议。然后，您可以从 JavaScript 引擎对属性名称的处理中受益，而不是所需的昂贵的线性搜索`indexOf`，这通常是一种更有效的查找（b 树和/或散列结构等）。

创建索引版本后，如果您可以释放数组版本，则数组消耗的内存及其属性名称（`"0"`、`"1"`内存，因为您从索引结构中引用它们）。

# java - Google Graph 网格线

> ID：13309468
> 
> 赞同：0
> 
> 时间：2012-11-09T14:00:05.913
> 
> 标签：java, android

我想使用谷歌图表工具在图表中绘制一些线图。我设法做到了，并按照我喜欢的方式缩放轴。但我无法正确设置网格线。如何正确设置它们？

[我的图表](http://chart.googleapis.com/chart?&chtt=Laura&cht=lxy&chs=250x150&chd=t:0,20,40,80%7C0,10,0,10%7C0,20,40,80%7C35,3,23,250&chf=bg,s,FF00FF&chg=20,0&chco=000000,000000&chxr=0,0,80,10%7C1,0,250,10&chds=0,80,0,250&chxt=x,y&chxs=0,ff0000,12,0,lt%7C1,0000ff,10,1,lt)

从 URL 中可以看出，我希望它们在 X 轴上每 20 个单位。Y轴上的同样问题。

# c# - 在 ASP.Net 或 WinForm 应用程序中读取 SharePoint 列表

> ID：13309470
> 
> 赞同：0
> 
> 时间：2012-11-09T14:00:08.710
> 
> 标签：c#, asp.net, vb.net, winforms

我正在寻找一个好的示例代码来检索 SharePoint 列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:10:38.573

您可以使用[此](http://www.codeproject.com/Tips/77942/SharePoint-Reading-values-from-items-in-a-list)代码项目作为示例。您将需要导入[Microsoft.SharePoint](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.aspx)命名空间。

# python - Pyramid 忽略某些视图的 csrf 验证

> ID：13309471
> 
> 赞同：2
> 
> 时间：2012-11-09T14:00:13.580
> 
> 标签：python, pylons, pyramid

我正在寻找类似 Django 的`csrf_ignore`装饰器的东西。

我已经通过订阅者以通常的方式定义了我的 csrf 验证：

```
@subscriber(NewRequest)
def csrf_validation(event):
    ... 
```

然后我有另一个视图，它接受上传的 POST 图像：

```
@view_config(route_name="upload_images", request_method="POST", renderer="json")
def upload_images(request):
    ... 
```

但是如何忽略`upload_images`视图的 csrf 验证？如果有帮助，我正在使用 Pyramid 1.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:13:49.857

Pyramid 1.4 自带对自身`check_csrf`谓词的支持。`view_config`在此之前，您必须实现自己的自定义谓词来进行检查并将其应用于您的视图。

订阅者在请求管道的`NewRequest`早期发生，此时您无法使用许多属性。例如，它还没有计算出哪个路由匹配。因此你只能真正做到`if not request.path_info.startswith('/upload_image_path'):`。

您可以将检查推迟到`ContextFound`订阅者，在这种情况下您可以检查`if request.matched_route.name ~= 'upload_images'`.

但是，您最好的选择是将 csrf 检查显式应用于各个视图，这可以使用自定义谓词来完成。

```
def csrf_check(context, request):
    # do check, return True if passes, or raise some exception if fails

@view_config(..., custom_predicates=[csrf_check])
def not_upload_images(request):
    # .... 
```

# django - django createview 如何获取创建的对象

> ID：13309479
> 
> 赞同：44
> 
> 时间：2012-11-09T14:00:40.110
> 
> 标签：django, django-class-based-views, create-view

我有两个连接的形式。基本上，用户填写第一个表单，然后被重定向到第二个表单，这为第一个表单的数据增加了价值。EG 我有一个表单电影（第一个表单），然后我被重定向到将演员添加到电影的表单（演员）。

在我的情况下，电影 = Chiamata 和演员 = Offerta（我保留意大利名字来满足我的需要：D）

美好的。

这些是我在 urls.py 中的网址

```
url(r'^chiamata/$', ChiamataCreate.as_view(),name='chiamata_create'),
url(r'^chimamata/(?P<pk>\d+)/offerta$', OffertaCreate.as_view(), name='offerta_create'), 
```

我有这个创建视图

```
class ChiamataCreate(CreateView):
    template_name = 'chiamata_form.html'
    form_class = ChiamataForm
    success_url=reverse_lazy('offerta_create',args=(??,)) 
```

现在的问题是如何获得由 chiamataForm 创建的对象的 PK。我需要将其添加到 offerta_create 的 url。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-09T14:50:41.537

也许你可以使用`get_success_url()`方法（[见参考](https://docs.djangoproject.com/en/1.8/ref/class-based-views/#django.views.generic.edit.FormMixin.get_success_url)）

在这种情况下，它会是这样的：

```
def get_success_url(self):
    return reverse('offerta_create',args=(self.object.id,)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T15:44:13.497

请参阅已接受的答案，[为什么 CreateView 中的 self.object 在保存到数据库后没有 id？](https://stackoverflow.com/questions/25212745/why-doesnt-self-object-in-a-createview-have-an-id-after-saving-to-the-database)- 一旦我从我的模型中删除了“id”字段，并按照该答案中的建议让 Django 在每个模型上默认为其自己的 id AutoField，self.object.id 在我的 CreateView 中运行良好。

# php - 使用 PHP 读取文本文件时 HTML 源代码中的换行符

> ID：13309480
> 
> 赞同：0
> 
> 时间：2012-11-09T14:00:42.020
> 
> 标签：php, html, forms

通过 PHP 读取文本文件时，如下所示：

```
$file_handle = fopen("L:\\file.txt", "rb"); 
while (!feof($file_handle) ) 
{
    $line_of_text = fgets($file_handle); 
    $parts = explode('=', $line_of_text); 
    echo "<option value=\"$parts[0]\">$parts[0]</option>"; 
}
fclose($file_handle); 
```

... HTML 源代码最终看起来像：

```
<option value="AACM
">AACM
</option><option value="Academic Registry
">Academic Registry
</option><option value="Admin
">Admin 
```

.. 等等。很乱！有没有办法防止它？理想情况下，我希望它正确格式化为：

```
<option value="AACM">AACM</option>
<option value="Academic Registry">Academic Registry</option> 
```

... ETC。

这可能吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:03:10.987

```
echo "<option value=\"".trim($parts[0])."\">".trim($parts[0])."</option>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:04:14.527

您正在寻找`trim()`删除前导和尾随空格的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:09:29.507

删除这个：

```
$parts = explode('=', $line_of_text); 
```

无需逐行执行某项操作即可读取文件的更简单快捷的方法是`file_get_contents()` 示例：`echo file_get_contents("L:\\file.txt");`

但是，如果您想逐行读取文件，则

```
<?php
$filename = "L:\\file.txt";
$fp = fopen($filename, "r") or die("Couldn't open $filename");
while(!feof($fp)) {
   $line = fgets($fp, 1024);
   echo "$line\n";
}
?> 
```

来源： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php) http://www.codemiles.com/php-tutorials/reading-a-file-line-by-line-in -php-t1484.html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:14:17.697

我没有尝试过，但我认为这应该可行：

```
$file_handle = fopen("L:\\file.txt", "rb"); 
while (!feof($file_handle) ) 
{
    $line_of_text = fgets($file_handle); 
    $parts = explode('=', $line_of_text); 
    $option = "<option value=\"$parts[0]\">$parts[0]</option>";
    $new_option = preg_replace("/[\n\r]/","",$option) . "\n";
    echo $new_option;
}
fclose($file_handle); 
```

# reporting-services - SSRS 2012 中表矩阵中的排序顺序

> ID：13309486
> 
> 赞同：1
> 
> 时间：2012-11-09T14:00:59.520
> 
> 标签：reporting-services, ssrs-2012

我需要一些关于表格矩阵/钻取报告、排序顺序的帮助。我的报告看起来像这样

```
Account      Name         JNumber       AmountNet  
0133266      New Jets                   12469.86 
```

AmountNet 是钻取数据的总和

您单击报告`Name`字段，它打开如下

```
Account    Name       JNumber     AmountNet  
0133266    New Jets    1            900.00  
                       2            163.86  
                       3             90.00  
                       4          10506.00  
                       Total      12469.86 
```

我想要做的是当报告处于其原始状态时，即在您单击任何名称以查看其`AmountNet`组成之前，按`AmountNet`列降序对其进行排序。如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T18:50:12.783

您需要更改组的排序顺序。右键单击组并进入组属性。使用 Sorting 部分按表达式排序：

```
=SUM(Fields!AmountNet.Value) 
```

MSDN 有[这样的说法](http://technet.microsoft.com/en-us/library/dd220417.aspx#Sorting)：

> **Tablix 数据区域组。**为每个组（包括明细组）设置排序表达式，以控制组实例的排序顺序。例如，对于明细组，您可以控制明细行的顺序。对于子组，您可以控制父组中子组的组实例顺序。默认情况下，当您创建组时，排序表达式设置为组表达式并按升序排列。

# ios - phoneGap - iOS - 图像可以通过 wifi 加载，但不能使用 3G 加载（使用 safari 可以正常工作）

> ID：13309489
> 
> 赞同：3
> 
> 时间：2012-11-09T14:01:06.290
> 
> 标签：ios, image, cordova, uiwebview, 3g

我遇到了一个奇怪的行为 - 我的应用程序的（远程托管）图像仅在这种情况下才显示：

*   使用3G加载
*   在 iPhone 上
*   使用`phonegap`

图像在以下情况下正常加载：

*   我启动应用程序。带wifi（即使来自热点）
*   我启动了应用程序的网站版本（带有移动 safari）
*   我用的是安卓+3G

我在 Google 上进行了几次搜索，但没有发现任何关于该案例的信息。（图像远程托管在公共 IP 上，可使用 3G 访问，我的应用程序的 android 版本证明了这一点）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T10:41:16.500

问题是因为“SFR”（一个 3G 法语提供商）使用了 NAT，所有的 http 调用都是对“SFR”的 IP 进行的，而真正的 url 隐藏在 url 的参数中，唯一的解决方案是停用白色过滤的域名，并允许 *

# hibernate - JSR-303 验证属性没有对应的 Spring 数据绑定访问器

> ID：13309490
> 
> 赞同：6
> 
> 时间：2012-11-09T14:01:14.887
> 
> 标签：hibernate, validation, bean-validation

0.4 和休眠验证器 4.1.0.Final，我创建了一个自定义验证器来验证密码和确认密码字段，但是验证器抛出了以下异常：

```
00:16:11,891 DEBUG [org.hibernate.validator.resourceloading.PlatformResourceBundleLocator] (http--192.168.1.20-8080-6) ValidationMessages not found.
00:16:11,892 DEBUG [org.hibernate.validator.resourceloading.PlatformResourceBundleLocator] (http--192.168.1.20-8080-6) org.hibernate.validator.ValidationMessages found
00:16:11,894 DEBUG [org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver] (http--192.168.1.20-8080-6) Resolving exception from handler [deliveries.manager.controller.AdminSignUpController@455901d2]: org.springframework.web.bind.annotation.support.HandlerMethodInvocationException: Failed to invoke handler method [public java.lang.String deliveries.manager.controller.AdminSignUpController.submitProduct(javax.servlet.http.HttpServletRequest,org.springframework.ui.Model,deliveries.manager.pagebean.AdminSignupBean,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap)]; nested exception is java.lang.IllegalStateException: JSR-303 validated property 'password.confirmPassword' does not have a corresponding accessor for Spring data binding - check your DataBinder's configuration (bean property versus direct field access)
00:16:11,897 DEBUG [org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver] (http--192.168.1.20-8080-6) Resolving exception from handler [deliveries.manager.controller.AdminSignUpController@455901d2]: org.springframework.web.bind.annotation.support.HandlerMethodInvocationException: Failed to invoke handler method [public java.lang.String deliveries.manager.controller.AdminSignUpController.submitProduct(javax.servlet.http.HttpServletRequest,org.springframework.ui.Model,deliveries.manager.pagebean.AdminSignupBean,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap)]; nested exception is java.lang.IllegalStateException: JSR-303 validated property 'password.confirmPassword' does not have a corresponding accessor for Spring data binding - check your DataBinder's configuration (bean property versus direct field access)
00:16:11,900 DEBUG [org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver] (http--192.168.1.20-8080-6) Resolving exception from handler [deliveries.manager.controller.AdminSignUpController@455901d2]: org.springframework.web.bind.annotation.support.HandlerMethodInvocationException: Failed to invoke handler method [public java.lang.String deliveries.manager.controller.AdminSignUpController.submitProduct(javax.servlet.http.HttpServletRequest,org.springframework.ui.Model,deliveries.manager.pagebean.AdminSignupBean,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap)]; nested exception is java.lang.IllegalStateException: JSR-303 validated property 'password.confirmPassword' does not have a corresponding accessor for Spring data binding - check your DataBinder's configuration (bean property versus direct field access)
00:16:11,902 DEBUG [org.springframework.web.servlet.DispatcherServlet] (http--192.168.1.20-8080-6) Could not complete request: org.springframework.web.bind.annotation.support.HandlerMethodInvocationException: Failed to invoke handler method [public java.lang.String deliveries.manager.controller.AdminSignUpController.submitProduct(javax.servlet.http.HttpServletRequest,org.springframework.ui.Model,deliveries.manager.pagebean.AdminSignupBean,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap)]; nested exception is java.lang.IllegalStateException: JSR-303 validated property 'password.confirmPassword' does not have a corresponding accessor for Spring data binding - check your DataBinder's configuration (bean property versus direct field access)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:181) [spring-web-3.0.4.RELEASE.jar:3.0.4.RELEASE]
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:427) [spring-webmvc-3.0.4.RELEASE.jar:3.0.4.RELEASE] 
```

这是豆类：

```
@CompareStrings(propertyNames={"password", "confirmPassword"}, message="Password and Comfirm Password must be matched.")
public class AdminSignupBean {
   private String password = "";
        private String confirmPassword = "";
   private String emailAddress = "";
        private String firstName = "";
        private String lastName = "";
        private String gender = "M";
        private String loginName = "";
        private String address1 = "";
        private String address2 = "";
        private String suburb = "";
        private String state = "";
        private String postcode = "";
        private String phone = "";
...
<settings and getters> 
```

验证器类：

```
public class CompareStringsValidator implements ConstraintValidator<CompareStrings, Object> {

    public enum StringComparisonMode {
        EQUAL, EQUAL_IGNORE_CASE, NOT_EQUAL, NOT_EQUAL_IGNORE_CASE
    }

    private String[] propertyNames;
    private StringComparisonMode comparisonMode;
    private boolean allowNull;

    @Override
    public void initialize(CompareStrings constraintAnnotation) {
        this.propertyNames = constraintAnnotation.propertyNames();
        this.comparisonMode = constraintAnnotation.matchMode();
        this.allowNull = constraintAnnotation.allowNull();
    }

    @Override
    public boolean isValid(Object target, ConstraintValidatorContext context) {
        boolean isValid = true;
        List<String> propertyValues = new ArrayList<String> (propertyNames.length);
        for(int i=0; i<propertyNames.length; i++) {
            String propertyValue = ConstraintValidatorHelper.getPropertyValue(String.class, propertyNames[i], target);
            if(propertyValue == null) {
                if(!allowNull) {
                    isValid = false;
                    break;
                }
            } else {
                propertyValues.add(propertyValue);
            }
        }

        if(isValid) {
            isValid = ConstraintValidatorHelper.isValid(propertyValues, comparisonMode);
        }

        if (!isValid) {
          /*
           * if custom message was provided, don't touch it, otherwise build the
           * default message
           */
          String message = context.getDefaultConstraintMessageTemplate();
          message = (message.isEmpty()) ?  ConstraintValidatorHelper.resolveMessage(propertyNames, comparisonMode) : message;

          context.disableDefaultConstraintViolation();
          ConstraintViolationBuilder violationBuilder = context.buildConstraintViolationWithTemplate(message);
          for (String propertyName : propertyNames) {
            NodeBuilderDefinedContext nbdc = violationBuilder.addNode(propertyName);
            nbdc.addConstraintViolation();
          }
        }    

        return isValid;
    }
} 
```

控制器类：

```
public String submitProduct(HttpServletRequest req, Model model, 
          @ModelAttribute("adminsignup") @Valid final AdminSignupBean adminsignup,
                         BindingResult result, ModelMap map)
   {   
      UUID pbid=adminsignup.getPbid();
                logger.debug("====adminsignup:"+adminsignup.toString());

                if (result.hasErrors()) {
                    AdminSignupBean admin = products.get(pbid);
                    req.getSession().setAttribute("pbid", pbid);
                    BeanUtils.copyProperties(adminsignup, admin, new String[] {"pbid", "mpf", "password", "confirmPassword"});
                    map.addAttribute("adminsignupbean",admin);

                    return "adminsignup/createadmin";
                }
                Set<ConstraintViolation<AdminSignupBean>> violations 
                        = validatorFactory.getValidator().validate(adminsignup);
                for(ConstraintViolation<AdminSignupBean> violation : violations) {
                    logger.debug("=========Violation Message:- " + violation.getMessage());
                }
                if (!violations.isEmpty()) {
                    logger.debug("=====violations messages:"+violations.toString());
                    AdminSignupBean admin = products.get(pbid);
                    req.getSession().setAttribute("pbid", pbid);
                    BeanUtils.copyProperties(adminsignup, admin, new String[] {"pbid", "mpf", "password", "confirmPassword"});
                    map.addAttribute("adminsignupbean",admin);

                    return "adminsignup/createadmin";
                } 
```

任何建议都非常感谢。谢谢山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:03:16.247

# java - Java代码优化，会不会优化这个

> ID：13309493
> 
> 赞同：3
> 
> 时间：2012-11-09T14:01:28.283
> 
> 标签：java, optimization

对于较新的编译器，我发现自己正在尝试编写更易于阅读的代码，但如果我希望在后台完成的优化实际上并没有完成，则可能会占用更多内存。以这段代码为例，非常简单的案例

```
while (scanner.hasNextLine() && !result)
{
    String line = scanner.nextLine();
    result = line.indexOf(searchString) >= 0;
} 
```

假设（使用 Eclipse Juno，Java 7）这将生成与

```
while (scanner.hasNextLine() && !result)
{
    result = scanner.nextLine().indexOf(searchString) >= 0;
} 
```

前者虽然 2 行代码减少了第二行的长度并使其更容易阅读。恕我直言，但这也会导致创建一个不必要的 String 对象吗？我希望不是 ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:03:54.017

你无法逃避`String`被创造的东西。您将其分配给局部变量的事实在这里无关紧要，实际上在字节码级别甚至不会注意到这一事实：在该级别，无论有或没有显式变量，对结果的引用都必须放在堆栈中为了被传递到链中的下一个方法调用。

您认为`String`创建了不必要的实例的想法可能源于来自另一种语言（例如 C）的本能：赋值`String s = ...`仅复制对唯一一个字符串实例的**引用。**这是因为所有 Java 对象都驻留在堆上，因此您总是需要显式复制一个对象以实际涉及另一个实例。例如，如果你写了`String line = new String(scanner.nextLine())`，那确实会创建一个不必要的`String`.

总而言之，您的代码的任何版本都没有涉及优化，因此仅根据风格偏好进行选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T14:05:10.647

一些一般原则：

*   过早的优化毫无意义
*   在这些次要情况下保存可读性是没有意义的
*   大多数时候优化来自不断变化的算法及其复杂性
*   在尝试优化不是算法的东西时，你永远不是一个好的编译器
*   为了确保任何优化，只有两种方法：查看字节码或基准性能，其他一切通常都是猜测

在您的特定情况下：变量声明在优化方面不会改变任何内容，因为在这两种情况下，字符串都由堆栈进行实例化`nextLine()`并放置在堆栈上，将其分配给一个变量（它在字节码中消失，除非它是一个实例变量，如它的用处只是为了你的眼睛）不会改变任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T14:21:07.760

为什么不问*Java 类文件反汇编*器-`javap`每个 JDK 中包含的程序？

具有以下源代码：

```
public class Foo {

    static void m1(Scanner scanner, String searchString, boolean result) {
        while (scanner.hasNextLine() && !result) {
            String line = scanner.nextLine();
            result = line.indexOf(searchString) >= 0;
        }
    }

    static void m2(Scanner scanner, String searchString, boolean result) {
        while (scanner.hasNextLine() && !result) {
            result = scanner.nextLine().indexOf(searchString) >= 0;
        }
    }
} 
```

运行反汇编程序时：

```
javap -c Foo.class 
```

你得到以下字节码：

```
static void m1(java.util.Scanner, java.lang.String, boolean);
Code:
   0: goto          22
   3: aload_0
   4: invokevirtual #33                 // Method java/util/Scanner.nextLine:()Ljava/lang/String;
   7: astore_3
   8: aload_3
   9: aload_1
  10: invokevirtual #39                 // Method java/lang/String.indexOf:(Ljava/lang/String;)I
  13: iflt          20
  16: iconst_1
  17: goto          21
  20: iconst_0
  21: istore_2
  22: aload_0
  23: invokevirtual #45                 // Method java/util/Scanner.hasNextLine:()Z
  26: ifeq          33
  29: iload_2
  30: ifeq          3
  33: return

static void m2(java.util.Scanner, java.lang.String, boolean);
Code:
   0: goto          20
   3: aload_0
   4: invokevirtual #33                 // Method java/util/Scanner.nextLine:()Ljava/lang/String;
   7: aload_1
   8: invokevirtual #39                 // Method java/lang/String.indexOf:(Ljava/lang/String;)I
  11: iflt          18
  14: iconst_1
  15: goto          19
  18: iconst_0
  19: istore_2
  20: aload_0
  21: invokevirtual #45                 // Method java/util/Scanner.hasNextLine:()Z
  24: ifeq          31
  27: iload_2
  28: ifeq          3
  31: return 
```

如果您比较这两种方法的字节码，您会发现**唯一的区别**是`m1`包含以下两条额外指令：

```
7: astore_3
8: aload_3 
```

这只是将堆栈顶部对象的引用存储到局部变量中，仅此而已。

**编辑：**

反汇编器还可以显示方法的局部变量数量：

```
javap -l Foo.class 
```

哪个输出：

```
static void m1(java.util.Scanner, java.lang.String, boolean);
LocalVariableTable:
  Start  Length  Slot  Name   Signature
         0      34     0 scanner   Ljava/util/Scanner;
         0      34     1 searchString   Ljava/lang/String;
         0      34     2 result   Z
         8      14     3  line   Ljava/lang/String;

static void m2(java.util.Scanner, java.lang.String, boolean);
LocalVariableTable:
  Start  Length  Slot  Name   Signature
         0      32     0 scanner   Ljava/util/Scanner;
         0      32     1 searchString   Ljava/lang/String;
         0      32     2 result   Z
} 
```

这基本上证实了上面看到的唯一区别——这些`m1`方法只分配了一个局部变量—— `String line`。**它不会再创建任何对象，它只会再创建一个对以任一方式分配的对象的引用**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T14:37:11.970

似乎离题了，但这也会提高性能。

```
while (!result && scanner.hasNextLine())
{
    String line = scanner.nextLine();
    result = line.indexOf(searchString) >= 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T14:22:26.540

回答您的问题，何时`scanner.nextLine().indexOf(searchString)`执行；你期望`nextLine()`做什么？您希望在哪个对象`indexOf()`上执行？

正如您可能已经猜到的那样，它依赖于`String`; 所以是的，这`String`是创建的，是的，这`String`是使用的。这是（与您的猜测相反）**必要**的。

与对象的实例化（ ）相比，声明变量（`String s`）和赋值的操作没有任何成本`new String("test")`。

换句话说，您试图实现的目标既没有用，也没有显着提高性能。

* * *

这里还有第二个问题，一般来说对开发人员来说是一个更深层次的问题。在没有遇到实际问题并且没有任何明显迹象表明该代码可能使您的应用程序运行显着变慢的情况下尝试对此类代码进行优化还**为时过早**。

大多数情况下，它会分散您对想要实现的目标的注意力，并会导致您为了优化而编写不可读的代码（甚至可能根本不是优化！）。

在你的特殊情况下（我很惊讶之前没有人提到它，这就是我写这个答案的原因）你的“优化”代码会让每个人的生活变得更糟。

想象一下，您的代码运行，并且在某些时候一切都失败了，您`NullPointerException`在这一行得到了一个：

```
 result = scanner.nextLine().indexOf(searchString) >= 0; 
```

现在您必须手动调试该代码以查明是否`scanner`是`null`或是否由于某种原因`nextLine()`返回，而不是清楚地了解失败的原因`null`。

这个问题甚至在你以前的代码中都不存在，但是这种尽早优化并试图使你的代码更紧凑以避免浪费一些操作的愿望现在使你的代码在全球范围内变得更糟。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T14:04:34.150

编译器无论如何都会内联局部变量行，所以两者没有区别

# javascript - 使用 jQuery 选择器遍历 XMLDocument

> ID：13309495
> 
> 赞同：1
> 
> 时间：2012-11-09T14:01:44.767
> 
> 标签：javascript, jquery, xml

假设我从 AJAX 调用中收到了一些 XML。我知道如何在网页上使用选择器，例如，如果我有`<p id="foo"></p>`然后`$("#foo")`会选择它，但有没有办法让该选择器以我的 XML 为目标？因此，如果我的 XML 包含`<foo bar="baz"></foo>`，那么我可以选择它`$("[bar='baz']")`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:45:03.960

是的你可以; 您只需将该 XMLDocument 传递给 jQuery 选择器（作为其`context`参数）。事实上，你可以愉快地在那里传递一个字符串：

```
var xml = '<xml><foo id="foo">bar</foo><foo id="nonfoo">baz</foo></xml>',
 xmlDoc = $.parseXML(xml);

console.log( $('#foo', xmlDoc).text() ); // bar
console.log( $('#foo', xml)   .text() ); // bar 
```

请注意，像这样使用它（显然）是一个非常奇怪的想法：

```
$('#foo', xml).text();
$('#nonfoo', xml).text();
... 
```

...因为 jQuery 每次都必须将该 xml 字符串重新解析为 XMLDocument 对象。

# sql - 查询比较 2 个表结果并过滤掉某些记录

> ID：13309500
> 
> 赞同：1
> 
> 时间：2012-11-09T14:01:57.170
> 
> 标签：sql, sql-server-2008-r2

我需要执行一个查询，以便我可以提取某些文档条目号以进行删除。(SQL Server 2008) 第一个查询为我提供了 OINV 表的结果。

```
SELECT DocEntry AS "DocEntryINV" , Comments, DocTotal
FROM OINV WHERE DocDate BETWEEN '10-27-2012' AND '10-29-2012' AND Comments IS NOT NULL 
ORDER BY DocTotal ASC, Comments 
```

表 ORIN 中的第二个

```
SELECT DocEntry AS "DocEntryCN" , Comments, JrnlMemo, DocTotal
FROM ORIN WHERE DocDate BETWEEN '10-27-2012' AND '10-29-2012' AND Comments IS NOT NULL 
ORDER BY DocTotal ASC, Comments 
```

**OINV 样本结果**

```
DocEntryINV   JrnlMemo   DocTotal
1             kaka-19        500
3             kaka-19        500
5             kaka-19        500
6             kaka-19        500
7             Rob-23         750
9             Rob-23         750
10            Alex-09        1000
11            Olma-08        1150
12            Paul-17        1250 
13            Paul-17        1250
16            Paul-17        1250
17            Rita-99        1300
19            Rita-99        1300 
```

**ORIN 样本结果**

```
DocEntryCN    Comments    JrnlMemo      DocTotal
67            reverse     kaka-19       500
69            reverse     kaka-19       500
70            reverse     kaka-19       500
71            reverse     kaka-19       500
74            reverse     kaka-19       500
75            reverse     Rob-23        750
77            reverse     Rob-23        750
78            reverse     Rob-23        750
79            reverse     Rob-23        750
84            reverse     Paul-17       1250
86            reverse     Paul-17       1250
87            reverse     Paul-17       1250 
```

对于表 OINV，重复来自将发票重复推送到 ERP 数据库表 OINV 的销售点软件。一个旨在通过创建贷项通知单来取消发票来纠正这种情况的程序效果不佳，有时创建的贷项通知单比一开始的发票还要多。（发票总数 45,000+）。有时，未在需要重复发票的地方创建贷方票据。

如何使用这两个表创建查询，如果它们存在，我可以反转 ORIN 表上的额外条目？我需要查询返回要反转的 DocEntryCN 数字的结果，例如上述场景的以下结果。

```
DocEntryCN    Comments    JrnlMemo      DocTotal
67            reverse     kaka-19       500
69            reverse     kaka-19       500
75            reverse     Rob-23        750
77            reverse     Rob-23        750
78            reverse     Rob-23        750
84            reverse     Paul-17       1250
90            reverse     Rita-99       1300 
```

注意。注释存储唯一的发票编号。如果 OINV 表中任意两条注释相同，则表示存在重复错误。ORIN 表中的 JrnlMemo 字段存储 OINV 发票编号。对于任何发票重复没有。k，要冲销的贷方票据的正确数量应该是 k - 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:02:27.747

您应该知道 Rita 的数据不存在于 ORIN 样本中，因此它不会出现在结果中。我希望这可以解决您的问题：

```
;with a as
(
select row_number() over(partition by JrnlMemo order by DocEntry) rn,
count(*) over (partition by JrnlMemo) cnt
, DocEntry DocEntryCN, Comments, JrnlMemo, DocTotal from @ORIN
FROM ORIN WHERE DocDate BETWEEN '2012-10-27' AND '2012-10-29' AND Comments IS NOT NULL 
), b as
(
select JrnlMemo, count(*)-2 count 
from oinv
WHERE DocDate BETWEEN '2012-10-27' AND '2012-10-29' AND Comments IS NOT NULL 
group by JrnlMemo
)
select a.DocEntryCn, a.Comments, a.JrnlMemo, a.DocTotal
from a join b on a.cnt > a.rn + b.count and a.JrnlMemo = b.JrnlMemo
order by DocEntryCn 
```

# html - HTML 模板对齐

> ID：13309508
> 
> 赞同：0
> 
> 时间：2012-11-09T14:02:18.527
> 
> 标签：html, css, templates, web

我想创建一个 html 模板，但它不会正确对齐，并且在我尝试放入东西之前它工作正常，然后它就保持这样。

```
<html>
    <head><style>
    html, body {
    height:100%;
}
body {
    overflow-y:hidden;
    overflow-x:hidden;
}
header{
    width: 100%;
    background: -webkit-linear-gradient(#0e054d 0%, #2014ff 100%);
    position: fixed;
    top: 0;
    height: 62px !important;
    opacity:.8;
    border-style: Outset;
    border-color: blue;
}

.content {
    position:relative;
    height: 100%;
    width:600px; /* Sizing - any length */
    padding:60px 0 30px 0; /* Header height and footer height */
    margin:0 auto 0 auto; /* Center content */
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

.sidebar1, .sidebar2 {
    background: #000047;
    top:59px;
    bottom:30px;
    width: 151px;
    position:absolute;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

.sidebar1 {

  left: -212;

}

.sidebar2 {
  right: -239;
}

#scrollable2 {
  background:green;
  height: 99%;
  min-width: 750px;
  margin-left: -61px;
  margin-right: 100px;
    overflow:auto;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}

.button {
    -moz-box-shadow:inset 0px 1px 0px 0px #f29c93;
    -webkit-box-shadow:inset 0px 1px 0px 0px #f29c93;
    box-shadow:inset 0px 1px 0px 0px #f29c93;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #fe1a00), color-stop(1, #ce0100) );
    background:-moz-linear-gradient( center top, #fe1a00 5%, #ce0100 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fe1a00', endColorstr='#ce0100');
    background-color:#fe1a00;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #d83526;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #b23e35;
}.button:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ce0100), color-stop(1, #fe1a00) );
    background:-moz-linear-gradient( center top, #ce0100 5%, #fe1a00 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ce0100', endColorstr='#fe1a00');
    background-color:#ce0100;
}.button:active {
    position:relative;
    top:1px;
}

footer {
    width: 100%;
    background: #000047;
    position: fixed;
    bottom: 0;
    height: 30px;
}
.p {
    text-align: center;
    color: #bcbcbc;
    font-size: x-large;
}
    </style></head>
    <body>
        <!-- Always on top: Position Fixed-->
        <header>
            <!--<button class="button">Dynmap</button>-->
            <p class="p";>Header</p>
        </header>
        <!-- Fixed size after header-->
        <div class="content">
            <!-- Always on top. Fixed position, fixed width, relative to content width-->
            <div class="sidebar1">

            </div>
            <!-- Scrollable div with main content -->
            <div id="scrollable2">
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
                Server Info</br>
            </div>
            <!-- Always on top. Fixed position, fixed width, relative to content width -->
            <div class="sidebar2">

            </div>
        </div>
        <!-- Always at the end of the page -->
        <footer>

        </footer>
    </body>
</html> 
```

我尝试将按钮放入其中，但顶部未对齐，我无法修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:49:45.760

A 同意上述意见；你应该使用花车。

但是，如果您想保持绝对位置，以下将起作用。

尝试在下面的两个类中添加“px”：
`.sidebar1 { left: -212px; }` `.sidebar2 { right: -239px; }`

将 position: absolute 和 top: 68px 添加到#scrollable2
`#scrollable2 { position: absolute; top: 68px; }`

在 .sidebar1、.sidebar2 中将顶部从 59px 更新为 67px：
`.sidebar1, .sidebar2 { top: 67px; }`

演示：http: [//jsfiddle.net/uberrobert/9mDng/](http://jsfiddle.net/uberrobert/9mDng/)

# c - C：添加指数

> ID：13309514
> 
> 赞同：0
> 
> 时间：2012-11-09T14:02:33.497
> 
> 标签：c, double, floating-accuracy, addition, exponential

我认为是 GCC 编译的标准 C 代码中的一个微不足道的添加让我有些困惑。

如果我有一个称为 A 的双精度数，还有一个称为 B 的双精度数，并且 A = 一个非常小的指数，例如 1e-20，而 B 是一个较大的值，例如 1e-5 - 为什么我的双精度 C 等于 A+B 的总和在主导值 B 上？我希望当我指定打印到小数点后 25 位时，我会得到 1.00000000000000100000e-5。

相反，我得到的只是 1.00000000000000000000e-5。我必须使用 long double 还是其他东西？

非常困惑，我敢肯定，这是一个对大多数人来说很容易回答的问题！感谢您提前提供任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:10:12.210

是的，双尾数的精度不够。2^53（双尾数的精度）仅略大于 10^15（10^20 和 10^5 之间的比率），因此二进制扩展和舍入可以轻松压缩最后的小位。

[http://en.wikipedia.org/wiki/Double-precision_floating-point_format](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)

谷歌是你的朋友等等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T14:19:20.230

浮点变量可以保持比定点更大的值范围，但是它们在有效数字上的精度有限制。
您可以表示非常大或非常小的数字，但精度取决于有效数字的数量。
如果您尝试根据用于表示它们的指数在数字之间进行非常远的运算，那么使用它们的能力取决于用相同指数表示它们的能力。
在您的情况下，当您尝试将两个数字相加时，较小的数字与较大的数字在指数上匹配，导致 0 因为其有效数字超出范围。[您可以在wiki](http://en.wikipedia.org/wiki/Floating_point)上了解更多信息

# oracle11g - Oracle 服务器中的用户对象和权利

> ID：13309516
> 
> 赞同：1
> 
> 时间：2012-11-09T14:02:42.990
> 
> 标签：oracle11g, database-administration

在此任务中，我必须使用目录中名称以“ALL_”开头的任何视图来检索尽可能多的有关用户“HR”的信息，包括权限、角色、他拥有或有权访问的对象等。我在下面编写了一个包含此语句的脚本，这是否足够，或者我还需要添加更多，我必须添加什么？

```
`-- ****************** My Script *******************
SELECT * FROM all_users WHERE username = 'HR';
SELECT * FROM all_objects WHERE owner = 'HR';
SELECT * FROM ALL_constraints WHERE owner = 'HR';
select * from all_col_privs WHERE grantor = 'HR';
-- ************* End of the Script *****************` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:02:45.987

请参阅下面的 Oracle 系统表：

> ALL_ARGUMENTS -**用户**可访问的对象中的参数。**ALL_CATALOG -用户**
> 可访问的所有表、视图、同义词、序列。**ALL_DB_LINKS -用户** 可访问的数据库链接。ALL_ERRORS -允许**用户**创建 的存储对象的当前错误。**ALL_INDEXES -用户** 可访问的表的索引描述。**ALL_LOBS -用户** 可访问的表中包含的 LOB 的描述。**ALL_OBJECTS -用户** 可访问的对象。**ALL_OBJECT_TABLES -用户** 可访问的所有对象表的描述 **************. **ALL_SEQUENCES -用户**
> 可访问的 SEQUENCE 的描述。 ALL_SNAPSHOTS -**用户**可以访问的快照。ALL_SOURCE -允许**用户**创建 的存储对象的当前源。**ALL_SYNONYMS -用户** 可访问的所有同义词。**ALL_TABLES -用户** 可访问的关系表的描述。 ALL_TAB_COLUMNS -**用户**表、视图和集群的列。 ALL_TAB_COL_STATISTICS -**用户**表、视图和集群的列。**ALL_TAB_COMMENTS - 对用户** 可访问的表和视图的评论 ****************. **ALL_TRIGGERS - 当前用户**
> 可访问的触发器。 ALL_TRIGGER_COLS - **user**的触发器或**user**表的触发器中的列使用情况。**ALL_TYPES -用户** 可访问的类型的描述。 ALL_USERS - 有关数据库所有**用户**的信息。**ALL_VIEWS -用户** 可访问的视图的描述。 DBA_ROLE_PRIVS - 授予**用户**和角色的角色。 DBA_TS_QUOTAS - 所有**用户**的表空间配额。 DBA_USERS - 有关数据库所有**用户**的信息。******************************

# c++ - 在 xcode 中链接 boost 库

> ID：13309519
> 
> 赞同：0
> 
> 时间：2012-11-09T14:02:54.283
> 
> 标签：c++, boost, osx-mountain-lion, xcode4.5

我在这条路径中提升了 1_46_1： /Users/ramy/Documents/C++ 。
在 C++ xcode 项目中，我修改了用户标题搜索路径，并添加了此目录： /Users/ramy/Documents/C++/boost_1_46_1 。
我正在尝试包含 boost/regex.hpp 。该文件在那里：如果我去 /Users/ramy/Documents/C++/boost_1_46_1/boost 那里有 regex.hpp，但是在尝试构建项目时出现错误： boost/regex.hpp：找不到文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:24:22.327

嗯...您知道 Regex Boost 不是仅标题吗？

您可能必须构建 Boost 并链接到库（[链接选项](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/configuration/linkage.html)）

# iphone - 无法使用 drawInRect 绘制 NSString 以显示在弹出窗口中

> ID：13309520
> 
> 赞同：0
> 
> 时间：2012-11-09T14:02:58.040
> 
> 标签：iphone, objective-c, ios, ipad

在我的应用程序中，我有一个字符串数组，我试图在弹出窗口中绘制它们。以前，我已经能够在弹出窗口中绘制图像，但是尝试将其转换为显示文本我没有成功。下面列出的是我只是从数组中获取图像并绘制它们的函数。

```
CGRect b = self.bounds;

      CGFloat columnWidth = b.size.width / columnCount;
      CGFloat rowHeight = b.size.height / rowCount;

      for (NSUInteger rowIndex = 0; rowIndex < rowCount; rowIndex++) {
          for (NSUInteger columnIndex = 0; columnIndex < columnCount; columnIndex++) {
              CGRect r = CGRectMake(b.origin.x + columnIndex * columnWidth,
                                    b.origin.y + rowIndex * rowHeight,
                                    columnWidth, rowHeight);
              UIImage *image = [self.colors objectAtIndex:rowIndex * columnCount + columnIndex];
              [image drawInRect:r];

          }
      } 
```

在这个函数中（对于文本，不是上面那个），行数和列数有时会发生变化——对于文本显示，列总是 1，行总是等于数组中的项目数量（对于我们的测试目的，当前数组中有 1 个字符串）我尝试将图像设为 UIlabel，并将标签测试更改为字符串中的项目 - 但使用 drawInRect 时仍不显示。有人对此有解决方案吗？我基本上需要找到任何方法在矩形中绘制此文本，即使它不使用标签和另一种方法（例如将文本放在图像中，我也无法弄清楚）。谢谢你的帮助。

# html - Firefox 跳过在 Canvas 中呈现文本

> ID：13309521
> 
> 赞同：0
> 
> 时间：2012-11-09T14:03:04.423
> 
> 标签：html, firefox, canvas, html5-canvas

请在下面找到 jsfiddle 以供参考

[用于 Mozilla Firefox 的 jsFiddle](http://jsfiddle.net/ranu_mandan/EBmdf/)

## Javascript (FF)

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.font="30px Arial";

var counter = 0;
c.addEventListener('DOMMouseScroll',function(event){

    draw();

    return false;

}, false);

function draw(){   

   var j = ++counter;
   for(var i = 0; i < 10000; i++){
    ctx.clearRect(0, 0, c.width, c.height);
    ctx.fillText("Hello World " + j ,10,50);
   }

 } 
```

[用于谷歌浏览器的 jsFiddle](http://jsfiddle.net/ranu_mandan/mk5rZ/)

## Javascript（铬）

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.font="30px Arial";

var counter = 0;
c.addEventListener('mousewheel',function(event){

   draw();

   return false;

}, false);

function draw(){   

  var j = ++counter;
  for(var i = 0; i < 10000; i++){
   ctx.clearRect(0, 0, c.width, c.height);
   ctx.fillText("Hello World " + j ,10,50);
  }
} 
```

## HTML

```
<!DOCTYPE html>
<html>
<body>
<span>Scroll on below canvas</span>
<br/>    
<canvas id="myCanvas" width="600" height="100" style="border:5px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
</body>
</html> 
```

现在尝试在上面的 fiddles 的画布上使用 mouseWheel 快速滚动，您会发现在 Firefox 中跳过了数字，而 Google Chrome 可以流畅地渲染而不会跳过数字。

如何在 Firefox 浏览器中进行类似于 Google Chrome 的渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:12:15.957

[http://jsfiddle.net/mk5rZ/2/](http://jsfiddle.net/mk5rZ/2/)

这可能不是您想要的，但我无法理解您为什么要在您的`draw`方法中绘制 10k 次相同的东西。

```
window.requestAnimFrame = function(callback) {
    window.setTimeout(callback, 1000 / 60);
};
(function wheely() {
    var c = document.getElementById("myCanvas"),
        ctx = c.getContext("2d"),
        cnt = 0;

    ctx.font = "30px Arial";

    if ('onmousewheel' in c) c.addEventListener('mousewheel', wheeled, false);
    else c.addEventListener('DOMMouseScroll', wheeled, false);

    function wheeled(event) {
        cnt++;
        return false;
    }
    (function draw() {
        ctx.clearRect(0, 0, c.width, c.height);
        ctx.fillText("Hello World " + cnt, 10, 50);

        window.requestAnimFrame(draw);
    })();
})();​ 
```

# python - 使用 Django 包 facepy 创建 facebook 通知：[15] (#15) 必须使用应用程序 access_token 调用此方法

> ID：13309523
> 
> 赞同：4
> 
> 时间：2012-11-09T14:03:06.163
> 
> 标签：python, django, notifications, fandjango

我正在尝试使用 facepy 和 fandjango 创建一个 facebook 通知，但我经常遇到同样的错误，

```
@facebook_authorization_required
@csrf_exempt     
def notify_self(request):

     token = request.facebook.user.oauth_token.token #user token
     token_app=facepy.utils.get_application_access_token('APP_ID','APP_SECRET_ID') 
     graph = GraphAPI(token)
     graph.post(
        path = 'me/notifications',
        template = '#Text of the notification',
        href = 'URL',
        access_token= token_app
     )

     return HttpResponse('<script type=\'text/javascript\'>top.location.href = \'URL\';</script>')<code> 
```

[当我在https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)上检查应用程序 access_token 时，它说它是一个有效的令牌（我取回了我的 APP 的 ID）

我也尝试

> 图 = GraphAPI(token_app)

但它发送给我：

> [2500] 必须使用活动访问令牌来查询有关当前用户的信息。

我的应用程序拥有我需要的所有权限，我搜索了一段时间但没有找到任何帮助，所以我在这里问。

编辑：正确的代码是

```
@facebook_authorization_required
@csrf_exempt     
def notify_self(request):
   token_app=facepy.utils.get_application_access_token('APP_ID','APP_SECRET_ID') 
   graph = GraphAPI(token_app)
   graph.post(
      path = 'me/notifications',
      template = '#Text of the notification',
      href = 'URL'
   ) 

   return HttpResponse('<script type=\'text/javascript\'>top.location.href = \'URL\'</script>') 
```

感谢[joaopsf](https://stackoverflow.com/users/334446/joaopsf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:35:25.697

最后我发现问题出在哪里。当我尝试

> 图 = GraphAPI(token_app)

我在好的路上，唯一要做的就是删除

> access_token=token_app

令牌在指令 GraphAPI(token_app) 时被保存，因此无需再次提供。

正确的代码是：

```
@facebook_authorization_required
@csrf_exempt     
def notify_self(request):

   token = request.facebook.user.oauth_token.token #user token
   token_app=facepy.utils.get_application_access_token('APP_ID','APP_SECRET_ID') 
   graph = GraphAPI(token)
   graph.post(
      path = 'me/notifications',
      template = '#Text of the notification',
      href = 'URL',
      access_token= token_app
   ) 

   return HttpResponse('<script type=\'text/javascript\'>top.location.href = \'URL\'</script>') 
```

希望对某人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:42:03.430

创建通知时，您应该使用**应用令牌**，而不是用户令牌。因此，不需要*token = ...行。*

此外，由于您使用的是应用令牌而不是用户令牌，因此您不能在路径中使用“ *me/... ”；*您必须指定用户 ID。

这对我有用：

```
@facebook_authorization_required
@csrf_exempt
def notify_self(request):
    token_app = facepy.utils.get_application_access_token(
        settings.FACEBOOK_APPLICATION_ID,
        settings.FACEBOOK_APPLICATION_SECRET_KEY
    )
    graph = GraphAPI(token_app)
    graph.post(
        path='%s/notifications' % request.facebook.user.facebook_id,
        template='#Text of the notification',
        href='my targe URL',
    )
    return 'etc' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:20:58.047

Jiloko 忘记更新代码了，我试了下代码，正确的代码在这里：

```
@facebook_authorization_required
@csrf_exempt     
def notify_self(request):
   token_app=facepy.utils.get_application_access_token('APP_ID','APP_SECRET_ID') 
   graph = GraphAPI(token_app)
   graph.post(
      path = 'me/notifications',
      template = '#Text of the notification',
      href = 'URL'
   ) 

   return HttpResponse('<script type=\'text/javascript\'>top.location.href = \'URL\'</script>') 
```

您可以为“USER_ID/通知”更改“我/通知”

# python - django：如果 QueryDict 中不存在，则分配无值

> ID：13309530
> 
> 赞同：4
> 
> 时间：2012-11-09T14:03:32.673
> 
> 标签：python, django

我正在寻找一种更好的编码方式：

我的代码是，

```
@login_required 
def updateEmInfo(request):        
    userProfile = request.user.get_profile()
    if request.POST.__contains__('userType'):
        userType = request.POST['userType']
    else:
        userType = None

    if request.method == 'POST':
         ~~~~~~~~ 
```

如果我这样编码，那么如果不相等，`userType = request.POST['userType'],`我会得到一个错误。`userType`

我不认为使用该`__contains__`方法是个好主意，有没有更好的方法来编写这段代码？

像下面这样简单的东西

```
userType = request.POST['userType'] ? request.POST['userType'] : None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:06:03.577

您可以使用[`get`](http://docs.python.org/2/library/stdtypes.html#dict.get)

`request.POST.get('userType')`

> get(key[, default]) 如果 key 在字典中，则返回 key 的值，否则返回默认值。如果未给出默认值，则默认为 None，因此此方法永远不会引发 KeyError

.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:06:45.833

您可以使用：

```
userType = request.POST.get('userType', None) 
```

这大致相当于：

```
try:
    userType = request.POST['userType']
except KeyError:
    userType = None 
```

# ruby-on-rails-3 - 如何让 sencha 架构师从 rails 读取 json

> ID：13309538
> 
> 赞同：4
> 
> 时间：2012-11-09T14:03:52.243
> 
> 标签：ruby-on-rails-3, sencha-architect, rabl

我有一个 Ruby on Rails 3 新闻应用程序。它需要一个标题、一些内容和一个图像附件（使用回形针 gem）。我正在使用 RABL gem 提供一个带有[JSON 提要](https://feedr.org.uk/articles.json)的 Sencha Architect 项目。

问题是 Sencha Architect 无法读取 JSON url。当我尝试将数据加载到商店时，我收到一条非常无用的消息，说“无法使用提供的配置加载数据”和一个在浏览器中打开 url 的链接（打开得很好）。Sencha Architect 在某处是否有提供有关此错误的更多信息的日志？

以下是 RABL 文件：

```
# show.rabl
object @article
attributes :title, :body
node(:mobile_url) { |article| article.image.url(:mobile, false) }
node(:tablet_url) { |article| article.image.url(:tablet, false) }
node(:original_url) { |article| article.image.url(:original, false) }

# index.rabl
collection @articles
extends "articles/show" 
```

RABL 默认不提供内容类型，所以我在文章控制器中有这个：

```
before_filter :default_format_json

def default_format_json
  if(request.headers["HTTP_ACCEPT"].nil? && params[:format].nil?)
    request.format = "json"
  end
end 
```

这是 Architect 生成的代码，用于显示我使用的配置选项：

```
# Stories store
Ext.define('MyApp.store.Stories', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.Story'
    ],

    config: {
        autoLoad: true,
        model: 'MyApp.model.Story',
        storeId: 'Stories',
        proxy: {
            type: 'jsonp',
            url: 'https://feedr.org.uk/articles.json',
            reader: {
                type: 'json',
                rootProperty: 'article'
            }
        }
    }
});

# Story model
Ext.define('MyApp.model.Story', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            {
                name: 'title'
            },
            {
                name: 'body'
            },
            {
                name: 'mobile_url'
            },
            {
                name: 'tablet_url'
            }
        ]
    }
}); 
```

如何让 Sencha Architect 读取我的 JSON 数据？非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:57:30.400

好的，事实证明 Sencha 配置没有问题，问题出在我的 rails 应用程序上。我正在使用 RABL gem 来生成 Json 响应。RABL 需要配置为以初始化程序的形式生成 JsonP 响应，如下所示：

```
# config/initializers/rabl_init.rb
Rabl.configure do |config|
  config.include_json_root = false
  config.include_xml_root  = false
  config.enable_json_callbacks = true
end 
```

重要的选项是`enable_json_callbacks = true`. 它使 RABL 将响应作为我的 Sencha 应用程序可以理解的 JsonP 提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:46:21.997

不确定这是否适用，但是当我使用 sencha 时，我不得不在我的商店中使用它

```
 config: {
    autoLoad: true,
    model: 'UniversityData.model.Person',
    proxy:{
        type:'ajax',
        url: 'persons.json'
        },
    sorters: ['lastName', 'firstName'],
    grouper: {
        groupFn: function(record){
            return record.get('lastName')[0];
        }
    }
} 
```

似乎唯一的区别是

```
 type: 'jsonp'  to my type: 'ajax' 
```

# asp.net-mvc - 日期时间编辑器模板仅用于创建视图

> ID：13309541
> 
> 赞同：0
> 
> 时间：2012-11-09T14:04:01.643
> 
> 标签：asp.net-mvc

我的日期字段有一个编辑器模板，如果该字段为空，它会设置当前日期。

```
@model Nullable<DateTime>

@{
    var date = Model as DateTime?; // local reference to a DateTime? 

    if (!date.HasValue                     // check if it is not null 
        || date.Equals(default(DateTime))) // check if it is not default 01/01/0001
    {
        date = DateTime.Now;
    }

    @Html.TextBox("", String.Format("{0:d}", date.Value.ToShortDateString()), new { @class = "date" })
 } 
```

我想将此模板仅应用于我的创建视图。

当我编辑一条记录时，上面的代码会填充我故意保留为空的字段的当前日期，因为日期未知。

想知道我的代码是否可以修改以适应这种情况？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:26:08.117

有几种方法可以做到这一点。

第一种方法是通过您的 ViewData 传递一个标志，如下所示：

```
@Html.EditorFor(m => m.SomeDate, new { nowIfNull = true }) 
```

然后更新您的模板：

```
@model Nullable<DateTime>

@{
    var date = Model as DateTime?; // local reference to a DateTime? 

    if ((!date.HasValue                     // check if it is not null 
        || date.Equals(default(DateTime))) // check if it is not default 01/01/0001
        && ((bool?)ViewData["nowIfNull"] ?? false)) // check if it should set to now if null
    {
        date = DateTime.Now;
    }

    @Html.TextBox("", date == null ? String.Empty : String.Format("{0:d}", date.Value.ToShortDateString()), new { @class = "date" })
 } 
```

另一种方法是在您创建新模型时将其默认设置`DateTime.Now`在您的控制器中——或者甚至更好的映射器中。这将在控制器/映射器而不是视图中设置默认值的关注点分开。

# android - Android：调整 Horizo ntalScrollView 的大小

> ID：13309547
> 
> 赞同：1
> 
> 时间：2012-11-09T14:04:25.670
> 
> 标签：android, resize, horizontalscrollview

我正在尝试以这种方式在运行时调整仅包含 Linearlayout 的简单 Horizo​​ntalScrollView 的大小：

```
HorizontalScrollView h = (HorizontalScrollView)findViewById(R.id.scrollview_row_1);
h.setLayoutParams(new FrameLayout.LayoutParams(50,50)); 
```

但后来我得到这个错误：

```
E/AndroidRuntime(5098): FATAL EXCEPTION: main
E/AndroidRuntime(5098): java.lang.ClassCastException: android.widget.FrameLayout$LayoutParams 
```

我应该如何正确调整滚动视图的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:26:05.100

为了更通用，您可能只使用 ViewGroup.LayoutParams...（这样即使您将来更改了 LinearLayout，您也不必更改该代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:06:51.767

那是因为 Horizo​​ntalScrollView 不在 FrameLayout 内。布局参数必须与 Horizo​​ntalScrollView 的根视图相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:08:40.007

你试过了吗 ：

```
HorizontalScrollView h = (HorizontalScrollView)findViewById(R.id.scrollview_row_1);
h.setLayoutParams(new HorizontalScrollView.LayoutParams(50,50)); 
```

# python - Python IOError：文件未打开以供读取

> ID：13309548
> 
> 赞同：23
> 
> 时间：2012-11-09T14:04:27.727
> 
> 标签：python, file, file-io

当我尝试在 Python 中打开文件时出现错误。这是我的代码：

```
>>> import os.path
>>> os.path.isfile('/path/to/file/t1.txt')
>>> True
>>> myfile = open('/path/to/file/t1.txt','w')
>>> myfile
>>> <open file '/path/to/file/t1.txt', mode 'w' at 0xb77a7338>
>>> myfile.readlines()
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IOError: File not open for reading 
```

我也试过：

```
for line in myfile:
    print(line) 
```

我得到了同样的错误。有谁知道为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-09T14:05:13.790

您通过将模式指定为打开文件进行写入`'w'`；打开文件进行阅读：

```
open(path, 'r') 
```

`'r'`是默认值，所以可以省略。如果你需要读写，使用`+`模式：

```
open(path, 'w+') 
```

`w+`打开文件进行写入（将其截断为 0 字节），但也允许您从中读取。如果你使用`r+`它，它也可以读写，但不会被截断。

如果您要使用双模式，例如`r+`or `w+`，您也需要熟悉该[`.seek()`方法](http://docs.python.org/2/library/stdtypes.html#file.seek)，因为同时使用读取和写入操作会移动文件中的当前位置，您很可能想要移动当前文件在这些操作之间明确定位。

有关详细信息，请参阅该[函数的](http://docs.python.org/2/library/functions.html#open)[文档`open()`](http://docs.python.org/2/library/functions.html#open)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:10:58.660

如果你仔细想想，这是一个简单的错误。在您的代码中，您正在执行以下操作：

```
myfile = open('/path/to/file/t1.txt','w') 
```

指定它用于写入，您需要做的是将其设置为 r 用于读取

```
myfile = open('/path/to/file/t1.txt','r') 
```

# python - socket.getfqdn() 和 socket.gethostname() 在使用 socket.gethostname 时给出不同的 IP 地址

> ID：13309560
> 
> 赞同：8
> 
> 时间：2012-11-09T14:05:24.580
> 
> 标签：python, sockets

我正在运行一个虚拟机，它提供以下值以及代码何时运行（通过在网站上执行一些操作）

```
socket.getfqdn()
x-vps-01.abc.it

socket.gethostname()
x-vps-01

socket.gethostbyname(socket.getfqdn())
216.185.103.35

socket.gethostbyname(socket.gethostname())
78.47.171.19 
```

请注意，当我登录终端并运行上述程序时，我总是得到 **78.47.171.19**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T14:37:53.717

我尝试了你在 Linux 机器上所做的事情。也许您应该说明您正在运行的操作系统和网络情况。

使用`strace`我发现`socket.getfqdn()`正在使用文件中提供的信息，`/etc/hosts`而`socket.gethostname()`仅打印系统调用结果中的数据`uname()`；基本上你可以说一个询问网络模块，而另一个询问内核。两者都有你的问题的答案，但他们不一定匹配，因为他们对这个问题有不同的看法。

调用`socket.gethostbyname()`还查询网络模块（`/etc/hosts`在我的情况下搜索文件的内容以查找匹配项）。将内核的答案提供给网络功能并不是您真正应该做的。在大多数情况下，这仍然有效。你发现了一个产生奇怪结果的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-04T16:53:13.003

我认为这个问题是由特定于 MacOS 的 Python 错误引起的，我在[https://stackoverflow.com/a/53143006/99834中提到的那个](https://stackoverflow.com/a/53143006/99834)

好消息：有一种解决方法可以在您的机器上运行。

# kohana - Kohana 3.3 中的 VENDOR 文件夹是什么？

> ID：13309561
> 
> 赞同：2
> 
> 时间：2012-11-09T14:05:28.173
> 
> 标签：kohana, kohana-3.3

在 Kohana 3.3 的 DOCROOT 文件夹中有一个新`vendor`文件夹。

它是干什么用的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:31:57.910

它不应该在那里。它是作曲家遗留下来的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T13:17:44.883

您可以在此处删除外部库以与 Kohana 一起使用。

例如，这是我放置第 3 方 Twitter API 的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:22:41.737

可能无关紧要，但对于 KOHANA 3.3 的新手来说，该 Vendor 目录用于扩展/添加基于供应商的自定义功能，类似于插件概念。这并不是 kohana 3.3 的新增功能。

同样正如@zombor 提到的那样，它是 DOCROOT 中的遗留物。

在我看来，休息很清楚。

# sql - 在时间戳字段上查询选择

> ID：13309564
> 
> 赞同：0
> 
> 时间：2012-11-09T14:05:37.243
> 
> 标签：sql, h2

我使用 h2 数据库。我有 3 个表：USER、SCHEDULEWORKER 和 SECURITYACCESS。

用户

```
userNumber, firstName, lastName 
```

调度员

```
USERNUMBER, STARTDATE, ENDDATE 
```

安全访问

```
USERNUMBER, DATEACCESS, DOOR 
```

`STARTDATE, ENDDATE and DATEACCESS`使用时间戳`datatype`。

我想了解所有想工作一天并且在开始日期之后进入大门的用户。

所以对于这个例子

```
SCHEDULEWORKER  
USERNUMBER      STARTDATE               ENDDATE  
4141            2012-07-02 07:30:00.0   2012-07-02 16:30:00.0
4123            2012-07-02 07:30:00.0   2012-07-02 16:30:00.0

SECURITYACCESS
USERNUMBER      DATEACCESS      DOOR  
4145    2012-07-02 07:31:56.0   MainDoor
4123    2012-07-02 07:29:56.0   MainDoor 
```

我想拥有

```
USERNUMBER  STARTDATE              ENDDATE                DATEACCESS        DOOR        late
4141    2012-07-02 07:30:00.0  2012-07-02 16:30:00.0  2012-07-02 07:31:56.0 MainDoor    00:01:56 
```

我是否需要拆分我的字段时间戳才能执行此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:04:26.847

这会很慢，但如果您一天中有很多 SECURITYACESS，您必须比较当天的首次访问。我不使用 h2，因此您必须管理后期列的时间戳计算

```
select SW.USERNUMBER, STARTDATE, ENDDATE, DATEACCESS, DOOR, (h2 calculations on timestamps) as late
FROM SCHEDULEWORKER AS SW 
  inner join SECURITYACCESS AS SA on SW.USERNUMBER=SA.USERNUMBER
  inner join (SELECT USERNUMBER, MIN(DATEACCESS) as ACCESS
              FROM SECURITYACCESS 
              GROUP BY USERNUMBER, YEAR(DATEACCESS), DAY_OF_YEAR(DATEACCESS)) AS MSA ON SW.USERNUMBER = MSA.USERNUMBER AND MSA.ACCESS = SA.DATEACCESS
WHERE SW.STARTDATE < MSA.ACCESS 
```

如果您有更多 where 条件：可能是日期范围或用户编号作为参数，您应该更改 MSA 查询以获得更好的性能。

我没有找到时间戳到日期的转换或更好的 group by 子句的功能。

# java - 使用重复值设置 JTable 的 SortKey 不起作用

> ID：13309566
> 
> 赞同：-1
> 
> 时间：2012-11-09T14:05:44.347
> 
> 标签：java, swing, sorting, jtable, tablerowsorter

我在 java 中设置 SortKeys 时遇到问题。我使用了现有 JTable 中的 SortKey 并将其设置为另一个，但不知何故，当列中有重复值时它不起作用，例如值 1、2、3、4、5 排序正确，但值1, 1, 1, 2, 2, 2, 3, 3 在 JTable 中的顺序不同。

PS：我已经在 1 上设置了 setMaxSortKeys(int max)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:27:48.760

两个表中行的初始顺序可能不同。用于对表进行排序的排序算法也可能不稳定。在这些情况下，您不能期望重复列值的顺序相同。

# javascript - 如何使用 Web Audio API 移动/调制音频缓冲频率

> ID：13309567
> 
> 赞同：10
> 
> 时间：2012-11-09T14:05:51.853
> 
> 标签：javascript, html, audio, web-audio-api

我正在尝试使用 Web Audio API，我的目标是创建一个数字吉他，其中每个琴弦都有一个实际吉他的初始声源，打开琴弦，然后我想动态生成所有其他音品位置的声音。在对该主题进行了一些研究（这对我来说都是全新的）之后，听起来这可以通过改变源声音样本的频率来实现。

问题是我见过很多改变合成正弦波的算法，但没有任何改变音频样本频率的算法。这是我的代码示例，可以更好地了解我如何尝试实现它：

```
// Guitar chord buffer    
var chordBuffer = null;

// Create audio context
var context = new webkitAudioContext();

// Load sound sample
var request = new XMLHttpRequest();
request.open('GET', 'chord.mp3', true);
request.responseType = 'arraybuffer';
request.onload = loadChord;
request.send();

// Handle guitar string "pluck"
$('.string').mouseenter(function(e){
    e.preventDefault();

    var source = context.createBufferSource();
    source.buffer = chordBuffer;

    // Create javaScriptNode so we can get at raw audio buffer
    var jsnode = context.createJavaScriptNode(1024, 1, 1);
    jsnode.onaudioprocess = changeFrequency;

    // Connect nodes and play
    source.connect(jsnode);
    jsnode.connect(context.destination);
    source.noteOn(0);
});

function loadChord() {
    context.decodeAudioData(
        request.response,
        function(pBuffer) { chordBuffer = pBuffer; },
        function(pError) { console.error(pError); }
    );
}

function changeFrequency(e) {
    var ib = e.inputBuffer.getChannelData(0);
    var ob = e.outputBuffer.getChannelData(0);
    var n = ib.length;

    for (var i = 0; i < n; ++i) {
        // Code needed...
    }
} 
```

所以你有它 - 我可以很好地播放声音，但在创建**changeFrequency**函数中的代码时有点失败，这将改变和弦采样频率，所以它听起来像是弦上的另一个音品位置。对此代码的任何帮助将不胜感激，或者对我正在尝试做的事情是否有可能提出意见。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:37:25.063

PlaybackRate 会改变声音的音高，也会改变它的播放时间。

如果您只想改变音高，也许您可​​以使用音高转换器。[在此](https://github.com/janesconference/KievII/blob/master/dsp/pitchshift.js)检查我的 javascript pitch shifter implementation及其与 JavascriptNode[在此插件中的使用](https://github.com/janesconference/KievIIPlugins/blob/master/plugins/Voron/Voron.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:49:33.907

您可以通过设置获得所需的行为`playbackRate`，但正如布拉德所说，您将不得不使用多重采样。另请参阅此 SO 问题：[在连接到网络音频 api 的音频元素上设置播放速率](https://stackoverflow.com/questions/10239757/setting-playbackrate-on-audio-element-connected-to-web-audio-api)。

# sql-server - 如何将数据库从一台 SQL Server 2008 R2 机器移动到另一台机器？

> ID：13309572
> 
> 赞同：0
> 
> 时间：2012-11-09T14:06:10.567
> 
> 标签：sql-server, database, sql-server-2008-r2, database-migration

我必须将数据库从一个 SQL Server 2008 R2 移动到另一个。

我该如何执行此任务？

有人建议我在第一台服务器上制作备份并在第二台服务器上恢复。

这可能是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:08:52.517

有很多可能性，具体取决于您的限制。

*   您可以使用分离/附加方法
*   您可以使用备份/恢复方法
*   您可以使用 SSMS 中的复制数据库向导

# android - 带有 ActionBarSherlock 的 SlidingMenu 库

> ID：13309579
> 
> 赞同：6
> 
> 时间：2012-11-09T14:06:49.277
> 
> 标签：android, android-activity, actionbarsherlock

在 SlidingMenu 的纪录片中写下了：

> 进入您计划使用的 SlidingActivity，使它们扩展 Sherlock__Activity 而不是 __Activity。

设置应该没问题，我按照指南进行操作，但是如果我尝试`Activity`使用例如扩展我的：`SlidingSherlockFragmentActivity`或者`SherlockSlidingFragmentActivity`不起作用。

如果我延长我`Activity`的 with`SherlockFragmentActivity`我不能得到`SlidingMenu`with`getSlidingMenu()`或 call `setBehindContentView`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:37:07.527

没关系，进入`SlidingMenu`图书馆并扩展`Activity`by`SherlockFragmentActivity`而不是`FragmentActivity`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:56:43.577

转到库 SlidingMenu 的活动并将所有活动扩展到相应的 SherlockActivities，然后转到您的应用程序并将所有活动扩展到相应的 SlidingActivity。

示例：滑动菜单：

```
SlidingActivity extends SherlockActivity
SlidingMapActivity extends SherlockMapActivity 
```

示例：MyClass

```
MyClass extends SlidingActivity
MyClass extends SlidingMapActivity 
```

# html - 如何在输入复选框旁边添加图像

> ID：13309584
> 
> 赞同：2
> 
> 时间：2012-11-09T14:07:02.110
> 
> 标签：html, symfony

我有以下复选框字段 (1)
，我想在复选框中添加图像。

我通过以下方式（2）将它添加到树枝文件中，但放置不当。我想按以下方式放置（3）

```
// (1)
->add('remove_avatar', 'checkbox', array(
    'label' => 'user.label.current_avatar',
    'required' => false,
    'mapped' => false,
))

// (2)
{{ form_widget(form) }}
<span class="user">
    <img src="{{ get_avatar(user) }}" class="user-avatar">
</span>

// (3)
<div class="controls">
    <img src="some_like">
    <input type="checkbox" id="profile_remove_avatar" name="profile[remove_avatar]" value="1">
    <label class="control-label" for="profile_remove_avatar">Remove the current avatar</label>
</div> 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:38:32.797

`form_widget(form)`如果您为自己呈现每个字段，那么您可以做更多的事情，而不是只呈现整个表单。像这样：

```
<div class="controls">
    <img src="some_like">
    {{ form_widget(form.remove_avatar) }}
    {{ form_label(form.remove_avatar) }}
</div> 
```

如果您的表单中有更多字段，则以相同的方式呈现它们**或**将它们全部放在末尾`form_rest(form)`。

这就是你如何从一个 twig 模板中自定义一个 symfony2 表单。所以我认为这是最好和最简单的方法。

# jquery - jquery当id是scrolltop时改变css

> ID：13309592
> 
> 赞同：0
> 
> 时间：2012-11-09T14:07:39.900
> 
> 标签：jquery, css, scroll, scrolltop

我需要当一个'id'在Top中花费时，按钮会改变css

然后得到这样的东西：

*css

```
.active{
background:red;
}

.inactive{
background:#FFF;
} 
```

*纽扣：

```
<div id="button1" class="inactive">Box 1</div>
<div id="button2" class="inactive">Box 2</div> 
```

*身份证：

```
<span id="start1"></span>
Content Box 1
bla bla bla
<span id="end1"></span>

<span id="start2"></span>
Content Box 2
bla bla bla
<span id="end2"></span> 
```

*脚本

```
when '#start1' is scrolltop,
('#button1').removeClass('inactive').addClass('active');
('#button2').removeClass('active').addClass('inactive');

when '#end1' is scrolltop, **in case of passing the top with the scroll upwards
('#button1').removeClass('inactive').addClass('active');
('#button2').removeClass('active').addClass('inactive'); 

when '#start2' is scrolltop,
('#button2').removeClass('inactive').addClass('active');
('#button1').removeClass('active').addClass('inactive');

when '#end2' is scrolltop, **in case of passing the top with the scroll upwards
('#button2').removeClass('inactive').addClass('active');
('#button1').removeClass('active').addClass('inactive'); 
```

请，建议。

# linux - 最大套接字描述符值

> ID：13309594
> 
> 赞同：1
> 
> 时间：2012-11-09T14:07:43.077
> 
> 标签：linux, windows, sockets, file-descriptor

`socket()`我使用函数以及`accept()`在 Linux 和 Windows 上获得的套接字描述符的最大值是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:21:22.583

在 Windows 中，套接字不像在 Linux 中那样是“小整数”，它们是不透明的“句柄”。

因此，知道某种最大值的价值就更小了，例如，它可能与平台上的最大值*指针*相同。

有关更多信息，请参阅[此文档页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740516%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:15:49.877

最大值通常与该进程同时打开的文件描述符的数量相同。

但是，AFAIK 在任何标准中都不是这样定义的。

套接字描述符是`int`，因此*理论*值为`INT_MAX`，但这会使调用`select`有点难以实现，因此它们只是按顺序分配的。

# ios - 添加然后删除索引后核心数据错误“错误配置的实体：在复合索引属性中...不是有效属性”

> ID：13309595
> 
> 赞同：4
> 
> 时间：2012-11-09T14:07:48.233
> 
> 标签：ios, core-data, xcode4.5

我正在为我的一个实体玩复合索引。我添加了 2（我只是单击了两次“添加”按钮）并立即删除了它们（通过单击删除按钮）。现在，当我构建时，我收到错误：

**错误配置的实体：在实体 Entity 的复合索引属性中，不是有效属性。**

我已经尝试过：

1.  删除派生数据
2.  清洁工程
3.  关闭 Xcode
4.  从模拟器中删除应用程序

重新创建对应的Entity类，重复上面的

但错误仍然存​​在。关于如何解决这个问题的任何想法？

**编辑**：我终于回滚到以前的版本，但我仍然很想知道出了什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T23:42:49.417

我能够使用文本编辑器直接编辑 .xcdatamodeld/.xcdatamodel/contents 文件 (XML) 以删除受影响实体上的索引标签。

这似乎解决了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-03T23:48:18.910

在 Xcode 6 中，我解决此问题的方法是选择“Project”>“Clean Build Folder...”（按住“Option”键时菜单项从“Clean”更改）。

然后退出并重新启动 Xcode。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-10T23:24:42.673

不是一个真正的答案，我认为@smw 方式是一个好方法（清洁也是必要的）但是今天，2015 年 6 月 11 日，随着苹果宣布 iOS9 和新的音乐流媒体服务 - 这个愚蠢的错误仍然没有修复（xCode 6.3 ）。3 年多……他们真的使用 CoreData 吗？:D

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-29T20:37:12.983

我有同样的问题。我通过清理、删除项目目录中的构建目录并删除 ~/Library/Developer/Xcode/DerivedData 下的相应 DerivedData 目录来修复它。绝对看起来像一个 Xcode 错误。

我之前在已删除的属性上有一个索引，但它似乎保留了索引，即使 Xcode 中的 UI 显示它已经消失了。数据模型下的内容文件也已经消失了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T08:41:11.987

我有同样的问题。似乎是 Xcode 的一个错误。

我必须将`<app>.xcdatamodeld/<app>.xcdatamodel/contents`文件恢复到上次已知的良好状态才能解决它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-23T10:27:22.277

可以通过在删除属性本身之前删除引用给定属性的任何复合索引来避免这种情况。

如果您的任何复合索引用于单个属性，请考虑在属性上使用“索引”属性而不是复合索引列表 - 这样当您删除属性时，索引将自动删除。

# php - 你能在 PHP 中创建一个超级/全局类吗？

> ID：13309596
> 
> 赞同：1
> 
> 时间：2012-11-09T14:07:52.643
> 
> 标签：php, class, global, super

我知道这听起来可能有点奇怪，但是否可以创建一个超类或全局类，可以从任何页面/类调用而无需包含/使用？

我想在我的网站上有一个活动跟踪器和一个自定义错误日志，记录用户的活动和错误，但我在每个页面和每个班级都非常需要它们。您可以创建一个始终可用的项目，而不是必须导入所有项目吗？比如PHP的核心类？（mysql_ *、ftp_*、include_* 等）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:18:11.153

如果您可以至少包含一个文件，您可以将自动加载器放入包含中，并*让它*为您处理所有加载。[`spl_autoload_register`您可以在此处](http://php.net/manual/en/function.spl-autoload-register.php)阅读更多详细信息。

从文档中，示例设置可能是：

```
function my_autoloader($class) {
    include 'classes/' . $class . '.class.php';
}
spl_autoload_register('my_autoloader'); 
```

此代码将进入您的文件，该文件包含在每个页面上。有了它，您将能够执行以下操作，而无需手动包含类文件：

```
$superClass = new SuperClass(); 
```

现在，这样做假设您有一个位于 的文件`classes/SuperClass.class.php`，实际上它确实包含一个`class SuperClass {`声明（不是*必需*的，但如果没有，您会收到错误消息）。

您始终可以更改自动加载器函数中定义的路径以及文件命名模式。此外，您可以使用几个不同的位置/逻辑或任何适合您的设置所需的东西。

例如：

```
function adv_autoloader($class) {
    if (file_exists('classes/' . $class . '.class.php') {
        require('classes/' . $class . '.class.php');
    } else if (file_exists('includes/' . $class . '.inc.php') {
        require('includes/' . $class . '.inc.php');
    } else {
        // can't locate the class
        throw new Exception('Class not found: ' . $class);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:17:47.987

并非没有深入研究源代码或添加模块（或使用 mario 提到的 auto_prepend_file）。但是，您可以在需要时使用自动加载器自动包含类文件。这是我使用的代码（使用命名空间）：

```
 // Autoload any classes
  spl_autoload_register(function ($class)
  {

    // Throw an exception if the file does not exist or cannot be included
    if (!is_file($file = APPLICATION . ltrim(str_replace('\\', '/', $class), '/') . '.php') || !include $file)
    {
      throw new Exception(PAGE_NOT_FOUND);
    }

  }
  ); 
```

因此，假设我有一个名为（带有命名空间）的类，`\Models\EmailAddressValidator`我将其保存在其中`/application/Models/EmailAddressValidator.php`，当我尝试调用它时，自动加载器会自动包含该文件。

# salesforce - 带有自定义错误消息的 inputField 必需标记

> ID：13309597
> 
> 赞同：1
> 
> 时间：2012-11-09T14:07:53.987
> 
> 标签：salesforce, visualforce, input-field

我正在使用直接绑定到控制器中的自定义对象字段的 inputField。下面将生成一个带有标签的下拉列表。

```
 <apex:inputField value="{!Agency_Profile.Location_Principal_Activity__c}" /> 
```

我的问题是我需要在 inputField 旁边添加所需的标记，而不会丢失标签或默认错误消息。

当我使用

```
<apex:inputField value="{!Agency_Profile.Location_Principal_Activity__c}" required="true"/> 
```

我获得了所需的标记，但我丢失了用于验证的自定义错误消息。

当我使用

```
<apex:outputPanel styleClass="requiredInput" layout="block">
     <apex:outputPanel styleClass="requiredBlock" layout="block"/> 
     <apex:inputField value="{!Agency_Profile.Location_Principal_Activity__c}" />
  </apex:outputPanel> 
```

下拉列表附近的标签不再显示..

有什么方法可以完成我需要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:26:24.643

我最终使用了这个。

```
//this part to add the missing label.
<apex:outputLabel styleclass="labelCol" value="{!$ObjectType.Agency_Profile__c.fields.Location_Principal_Activity__c.Label}" />

<apex:outputPanel styleClass="requiredInput" layout="block">
     <apex:outputPanel styleClass="requiredBlock" layout="block"/> 
     <apex:inputField value="{!Agency_Profile.Location_Principal_Activity__c}" />
  </apex:outputPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T07:41:56.360

最好的方法是为这个对象添加这个字段的[验证规则](https://login.salesforce.com/help/doc/en/fields_validation_considerations.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T10:43:29.910

使用 raym0nds 方法，这就是它查找**自定义控制器变量**的方式，在我的例子中，名称来自对象的自定义字段：

```
//this part to add the missing label.
<apex:outputLabel for="myId" styleclass="labelCol" value="{!$ObjectType.Agency_Profile__c.fields.Location_Principal_Activity__c.Label}" />

<apex:outputPanel styleClass="requiredInput" layout="block">
     <apex:outputPanel styleClass="requiredBlock" layout="block"/> 
     <apex:inputText id="myId" required="true" value="{!myCustomField}" label="{!$ObjectType.Agency_Profile__c.fields.Location_Principal_Activity__c.Label}"  />
</apex:outputPanel> 
```

请注意`apex:inputText`现在具有`label`,`id`和`required`属性的类型。现在`apex:outputLabel`有一个`for`属性。`for/id`就是这样单击标签会将光标置于正确的字段中。启用表单验证，因为其余的`required`只是化妆。为该验证错误添加了`label`一个好的字段名称 - 否则它将在那里显示内部字段 ID。

如果您有一个所有记录共享某些值的批量编辑表（例如为同一家公司添加多个潜在客户），那么整个方法很有趣

# java - jsf primefaces，更新时显示 itemLabel 而不是 itemvalue

> ID：13309598
> 
> 赞同：0
> 
> 时间：2012-11-09T14:07:54.317
> 
> 标签：java, jsf, primefaces

我有 2 项：
单选按钮
outputtext

我想要做的是：当用户检查单选按钮时 - >在我的输出文本中获取选中的单选按钮的 itemLabel。（不是项目值）

我有以下代码在输出文本中显示 itemValue：

```
<h:form>
<p:selectOneRadio layout="pageDirection" id="test" name="testy" value="#{myBean.testValue}">
<p:ajax update="testOutput"/>
<p:selectItems value="#{myBean.getAllTestItems()}" var="selecter" itemLabel="#{selecter.label}" itemValue="#{selecter.val}"/>
</p:selectOneRadio>

<h:outputText id="testOutput" value="#{myBean.testValue}"/>
</h:form> 
```

当我选择其中一个单选按钮时，我在 outputText 中得到 itemValue。但是我想在 outputText 中获取所选项目的 itemLabel。

如何获取标签而不是单选按钮的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:16:46.070

几种方式。

1.  `#{myBean.getAllTestItems()}`根据已经包含标签和值的项目的集合获取它。在其中找到与所选值匹配的项目，然后获取标签。

2.  提交`#{selecter}`而不是`#{selecter.val}`作为单选按钮项目值。这样您就可以通过`#{myBean.testValue.label}`. 您只需要提供一个在（在 HTML 和 HTTP 请求参数中）和（在 Java 模型中）[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)之间进行转换。`String``Selecter`

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)
*   [如何从列表创建 Primefaces 单选按钮？](https://stackoverflow.com/questions/13129028/how-to-create-primefaces-radiobuttons-from-list/13129706#13129706)（对于您想`Selecter`用作值的情况）

# php - Mysql全文搜索不起作用

> ID：13309602
> 
> 赞同：0
> 
> 时间：2012-11-09T14:08:20.960
> 
> 标签：php, mysql, full-text-search

**这是我的数据库代码。问题结果显示 0 而不是 1**

```
 CREATE TABLE IF NOT EXISTS `house_details` (
   `houses_id` int(10) unsigned NOT NULL AUTO_INCREMENT,

   `everything_search` text NOT NULL

    FULLTEXT KEY `everything_search` (`everything_search`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 

    INSERT INTO `house_details` (`everything_search`) VALUES
     ('Good very good new-market Mymenshing Family sourov 4564'), 
```

**这是我的数据库查询命令**

```
SELECT * FROM house_details WHERE MATCH (everything_search) AGAINST ('Mymenshing') > 0   ORDER BY `houses_id` DESC LIMIT 0,3 
```

* *and result is ** MySQL 返回一个空的结果集（即零行）。（查询耗时 0.0013 秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:35:09.280

It works for me in boolean mode:

```
SELECT * FROM house_details WHERE MATCH (everything_search) 
AGAINST ('Mymenshing' In Boolean mode) > 0   ORDER BY `houses_id` DESC LIMIT 0,3 
```

take a look here: [http://www.sqlfiddle.com/#!2/d4471/6](http://www.sqlfiddle.com/#!2/d4471/6)

after make some reasearch I found that there's a bug with the match-agains in Mysql: [http://bugs.mysql.com/bug.php?id=19583](http://bugs.mysql.com/bug.php?id=19583)

and here is how fix the 'stopwords': [http://www.nivas.hr/blog/2009/09/15/how-to-disable-mysql-fulltext-stopwords/http://www.sqlfiddle.com/#!2/d4471/6](http://www.nivas.hr/blog/2009/09/15/how-to-disable-mysql-fulltext-stopwords/http://www.sqlfiddle.com/#!2/d4471/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:16:05.900

我认为您不需要`>0`where 子句：

```
 SELECT * FROM house_details 
        WHERE MATCH (everything_search) AGAINST ('Mymenshing')
        ORDER BY `houses_id` DESC LIMIT 0,3 ; 
```

# php - propel 的 toArray() 函数何时返回引用对象或仅返回顶层的规则是什么？

> ID：13309603
> 
> 赞同：4
> 
> 时间：2012-11-09T14:08:36.360
> 
> 标签：php, mysql, propel

我似乎无法确定使用时添加到数组中的确切经验法则`toArray()`，因为如果我要做这样的事情：

```
$sheep = SheepQuery::create()->find();
foreach ($sheep as $sheepii) {
  $sheepii->getShepherd();
}
return $sheep->toArray(); 
```

或它的一些变体，有时我似乎从羊表中的列*和*它们与牧羊人的子数组中都得到了结果，但有时它似乎不包括它，所以我必须做一些事情，比如添加值当我循环时到一个新数组。

任何人都可以指出（解释的链接）为什么会发生这种情况及其背后的规则，所以我不会盲目猜测，如果有更好的方法来做同样的事情，我愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:30:26.463

通常，如果您希望关系位于内部，则`toArray()`需要获取它*或*在初始查询中进行连接。

这将只返回对象的信息`Sheep`：

```
$sheep = SheepQuery::create()
  ->find();
$sheep->toArray(); 
```

这将返回对象的信息`Sheep` **及其**与`Shepherd`是否存在的关系：

```
$sheep = SheepQuery::create()
  ->find()
  ->joinWith('Shepherd');
$sheep->toArray(); 
```

这是一篇关于[了解 Propel 1.5 的好博文：当你真正需要数组时](http://propelorm.org/blog/2010/05/17/getting-to-know-propel-1-5-when-you-really-need-arrays.html)。

# r - 使用函数与 data.table 交叉乘积/连接

> ID：13309608
> 
> 赞同：3
> 
> 时间：2012-11-09T14:08:57.450
> 
> 标签：r, data.table

我想知道，是否可以针对某些特定任务对数据表进行有效的交叉连接。

假设我有一个向量化版本，可以将向量中的所有数字与所有其他数字进行比较。如果我没记错的话，那么它在 R 中的矢量化版本将是

```
somevector <- rnorm(10, 5)
sapply(somevector, function(x) {
  return(x-somevector)
}) 
```

是否可以使用 data.table 生成相同的矩阵？会有效率吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:06:19.980

`expand.grid`在 SQL 中执行所谓的交叉连接。您可以使用它轻松地减去两个向量。

```
x<-1:7
somevector <- rnorm(10, 5)
df<-(expand.grid(x,somevector))
df[,1]-df[,2] 
```

# java - java - 为什么在java中没有继承的情况下可以在同一个包中访问protected？

> ID：13309609
> 
> 赞同：14
> 
> 时间：2012-11-09T14:08:59.240
> 
> 标签：java, protected

```
 Modifier        Class     Package   Subclass  World
  public          Y         Y         Y         Y
  protected       Y         Y         Y         N
  no modifier     Y         Y         N         N
  private         Y         N         N         N 
```

```
 public class a {
  protected int x;
  }

  public class b {
        b() {
              a A=new a();
              A.x=9;//why we can access this field ?
        }
  } 
```

请帮助我了解 Java 中 protected 的具体工作

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T14:16:43.170

为什么？因为这就是 Java 编程语言的设计方式。没有更多的了。

可以`protected`从

*   班级本身，
*   同一个包中的类（不管它们是否是子类），
*   子类（不管它们是否在同一个包中）。

这与 C++ 不同，但 Java 不是 C++，因此不一定以相同的方式工作。

# html - html5 视频驱动网站的问题

> ID：13309611
> 
> 赞同：0
> 
> 时间：2012-11-09T14:09:08.507
> 
> 标签：html, video

我有一个网站，加载后会自动播放 9 MB 视频。我也有它，所以每当用户使用导航栏点击主页时，都会播放一个 2MB 的视频，然后它最终会到达它的目标目的地。问题是，虽然 9MB 的视频可以无缝加载，但 2MB 的视频会滞后，并且完整的视频在进入另一个页面之前无法播放。我什至有它，以便在通过 jQuery 切换到另一个页面之前有一个延迟，所以视频可以完成。

延迟是由于视频需要完全加载而我的 ISP 速度不够快，还是有办法真正加快它们的速度？我相当肯定答案是前者，但我只是想确定一下。

[http://www.brokenrecordsaustin.com/test/](http://www.brokenrecordsaustin.com/test/) 点击“我们”看看我的意思。

# graph - 灯泡 / Gremlin / Titan 的关键索引

> ID：13309613
> 
> 赞同：2
> 
> 时间：2012-11-09T14:09:13.593
> 
> 标签：graph, gremlin, titan, bulbs, tinkerpop

我正在尝试将我的 Neo4J 应用程序移植到 Titan，但遇到了一些与索引相关的问题。我知道 Titan 不支持顶点或边缘索引，只支持“关键”索引，对吗？

我也在使用灯泡模型，例如：

```
class Person(Node):
    element_type = 'person'
    facebook_id = String(indexed=True) 
```

添加 Person(facebook_id='111') 以检索时应该可以使用：

```
gremlin> g.getVertices('facebook_id', '111') 
```

它不起作用，并告诉我需要在使用之前创建键索引。所以我删除了键空间并在 rexster doghouse 中手动创建了索引：

```
gremlin> g.createKeyIndex("facebook_id", Vertex.class); 
```

之后，用灯泡创建了 Person(facebook_id='111') 并尝试在 rexster doghouse 上检索：

```
gremlin> g.getVertices("facebook_id", "111") 
```

并得到空洞的回应。使用 Titan 顶点 ID 获取时，它可以工作，但“facebook_id”为空并且“.map()”不起作用：

```
gremlin> g.v(4)
==>v[4]
gremlin> g.v(4).name
==>Renato Garcia Pedigoni
gremlin> g.v(4).facebook_id # nothing returned!
gremlin> g.v(4).map()
==>javax.script.ScriptException: java.lang.IllegalArgumentException: The value is already used by another vertex and the key is unique 
```

附言

*   这是我删除键空间后创建的第一个顶点
*   是否可以自动创建键索引？

有小费吗？

谢谢！

雷纳托·佩迪戈尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:52:10.720

是的，Titan 仅支持替换旧手动顶点索引的关键索引，其功能相似但开销较小。

异常表明该属性不仅是索引的，而且是唯一的（有关更多信息，请参阅[Titan 类型](https://github.com/thinkaurelius/titan/wiki/Type-Definition-Overview)）。

您是否尝试过在 Gremlin 中添加顶点和键索引（即没有灯泡）？此外，James 在 Bulbs 上做了很多与 Titan 集成相关的工作，因此这个特殊问题可能会在最新版本中得到解决。

# jquery - 当鼠标悬停在 iFrame 上时，jScrollPane 停止滚动

> ID：13309616
> 
> 赞同：3
> 
> 时间：2012-11-09T14:09:20.037
> 
> 标签：jquery, iframe, scroll, jscrollpane

我正在使用 jScrollPane 插件，它运行良好。但是，当您滚动 DIV 时，如果您的鼠标光标经过 iFrame，滚动过程将被中断。仅使用常规滚动条（没有 jScrollPane 插件）就不是这种情况。

有没有人对此有任何见解？

# android - 从 URL 读取 JSON 到 Android

> ID：13309619
> 
> 赞同：1
> 
> 时间：2012-11-09T14:09:39.100
> 
> 标签：android, json, url

我现在开始使用 Java / Android，我有这个错误......

按照[本](http://snipplr.com/view/53192/)教程（根据我的需要修改），我想连接到 rumonet.pt/feeder/index_android.php 输出一个 json 数组。

但是该代码给了我一个错误

```
 button = (Button) findViewById(R.id.btnFetch);
        buttonClear = (Button) findViewById(R.id.btnClear);
        textView = (TextView) findViewById(R.id.txtView);
        button.setOnClickListener(new Button.OnClickListener()
        {
            public void onClick(View v)
            {
               // examineJSONFile();
            }
        });
        buttonClear.setOnClickListener(new Button.OnClickListener()
        {
            public void onClick(View v)
            {
                //textView.setText("");
            }
        }); 
```

更具体地说，在 button 和 buttonclear SetOnClickListener 中，因为如果我评论那些行和 void，它会起作用......只是什么都不做......

Any1知道为什么，或者有更好的教程吗？=) 谢谢 =)

**编辑**

```
11-09 14:16:31.836: D/AndroidRuntime(9939): Shutting down VM
11-09 14:16:31.836: W/dalvikvm(9939): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
11-09 14:16:31.836: E/AndroidRuntime(9939): FATAL EXCEPTION: main
11-09 14:16:31.836: E/AndroidRuntime(9939): java.lang.RuntimeException: Unable to start activity ComponentInfo{noticias.rumonet.pt/noticias.rumonet.pt.MainActivity}: java.lang.NullPointerException
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.os.Looper.loop(Looper.java:137)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.ActivityThread.main(ActivityThread.java:4441)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at java.lang.reflect.Method.invokeNative(Native Method)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at java.lang.reflect.Method.invoke(Method.java:511)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at dalvik.system.NativeStart.main(Native Method)
11-09 14:16:31.836: E/AndroidRuntime(9939): Caused by: java.lang.NullPointerException
11-09 14:16:31.836: E/AndroidRuntime(9939):     at noticias.rumonet.pt.MainActivity.onCreate(MainActivity.java:85)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.Activity.performCreate(Activity.java:4465)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-09 14:16:31.836: E/AndroidRuntime(9939):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
11-09 14:16:31.836: E/AndroidRuntime(9939):     ... 11 more

   button.setOnClickListener(new Button.OnClickListener()
                {
                    public void onClick(View v)
                    {
                       // examineJSONFile();
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:32:23.150

检查 XML 布局。真的叫btnClear吗？？

在我看来，一旦您尝试分配 onClickListener，您就有一个空指针，因为它在布局上找不到视图。

# javascript - 将 Javascript UTF-8 转换为 ASCII（如 PHP 中的 Iconv('UTF-8', 'ASCII//TRANSLIT', $string) ）

> ID：13309620
> 
> 赞同：11
> 
> 时间：2012-11-09T14:09:44.220
> 
> 标签：javascript, utf-8, ascii, iconv

我想知道如何使用 Javascript 将 UTF-8 中的字符“翻译”为最接近的 ASCII 等价物，就像 PHP 中的 Iconv 一样。

例子：

ü 变成
了 ó 变成了 o

我宁愿不使用替换，因为a）它需要一组完整的字符，这需要大量工作，并且b）我很难获得一组完整的字符，而且我永远无法确定如果我缺少一两个。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-13T14:24:27.330

我发现的最简单的方法：

```
var str = "üó";
var combining = /[\u0300-\u036F]/g; 

console.log(str.normalize('NFKD').replace(combining, '')); 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T14:24:41.960

正如@Pointy 所说，您唯一的选择是根据字典映射/替换字符。

你会发现这真的很有用：[https ://github.com/backbone-paginator/backbone.paginator/blob/a579796a30e583c4dfa09e0a86e4abd21e0b5b56/plugins/diacritic.js](https://github.com/backbone-paginator/backbone.paginator/blob/a579796a30e583c4dfa09e0a86e4abd21e0b5b56/plugins/diacritic.js)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-28T07:20:22.917

现在有一个iconv到JS的端口：[https ://www.npmjs.com/package/iconv](https://www.npmjs.com/package/iconv)

```
var iconv = new Iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE');
iconv.convert('ça va が'); // "ca va " 
```

# javascript - 从 webapp 中的缓存清单加载时 Javascript 停止

> ID：13309621
> 
> 赞同：5
> 
> 时间：2012-11-09T14:09:48.590
> 
> 标签：javascript, web-applications, cache-manifest

当从全屏 WebApp 模式（iPad3/iOS6）中的缓存清单加载侧面时，我的 javascript 代码停止。

这会导致您在前 5 秒内无法做任何事情。之后，您可以正常使用该网站。

1) 为什么 JavaScript 代码会停止？（事件问题？）
2）我该如何解决？

涉及的是：

*   jquery-1.8.2.min.js

编辑：

我做了实验，发现在 onNoUpdate 和 onUpdateReady 事件之后 JavaScript 代码运行正常。在这两个事件启动之前，它会经过很长时间。所以这不是一个选择。

编辑2：

```
`<script type="text/javascript">

    $(document).bind('touchmove', false);

    $(document).ready(function () {
        applicationCache.onupdateready = function () {
            if (confirm("Ihre Applikation wurde aktualisiert. Soll die Darstellung neu geladen werden?")) {
                window.location.reload();
            }
        }
        applicationCache.onnoupdate = function () {

        }

        var a = document.getElementsByTagName("a");
        for (var i = 0; i < a.length; i++) {
            if (a[i].className.match("noeffect")) {
                // Here happens nothing
            }
            else {
                a[i].onclick = function () {
                    load();
                    window.location = this.getAttribute("href");
                    return false;
                };
            }
        }
    }
);` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:14:22.873

尝试在关键点插入一些日志，以找出代码中发生暂停的确切位置。通常，当您将其缩小到足够的范围时，答案就会变得清晰。

# javascript - 结合 Kinetic.js 手动定位 opentip 工具提示

> ID：13309622
> 
> 赞同：2
> 
> 时间：2012-11-09T14:09:49.760
> 
> 标签：javascript, tooltip, kineticjs

我正在制作一个将 Kinetic.js 用于一些花哨的图形功能的 Web 应用程序，并且我想在用户将鼠标悬停在每个元素上时显示一个工具提示，其中包含有关每个元素的一些信息。

我已经想出了如何使用 Kinetic.js 在悬停时调用函数：

```
myKineticObject.on("mousemove", function() {
    // Change content of tooltip depending on myKineticObject
    // Set position of tooltip to cursor position
    // Show tooltip
});

myKineticObject.on("mouseout", function() {
    // Hide tooltip
} 
```

我决定使用看似不错的[Opentip](http://www.opentip.org/)来显​​示工具提示。唯一的问题是 Kinetic.js 没有创建任何可用的 DOM 元素来用作 opentip 的目标。

这（大致）是我的 HTML 的样子：

```
<html>

    <head><!-- Styles --></head>

    <body>

        <div id="container">

            <canvas class = "kineticjs-buffer-layer">
            <canvas class = "kineticjs-path-layer">
            <canvas class = "myLayer1">
            <canvas class = "myLayer2">
            <!-- ... more layers -->

        </div>
        <!-- Scripts -->
    </body>

</html> 
```

重要的是要知道这些画布元素都具有相同的宽度和高度，并且彼此堆叠。所以它们不能用作目标。

因此，我需要手动显示/隐藏和定位工具提示，而不是使用 DOM 元素作为工具提示的目标。我已经想出了如何像这样显示和隐藏：

```
 var tooltip = new Opentip(
        "div#container", //target element 
        "DummyContent", // will be replaced
        "My Title", // title
        {
            showOn: null, // I'll manually manage the showOn effect
        }); 
```

我现在执行以下操作：

```
myKineticObject.on("mousemove", function() {
    tooltip.show();
});

myKineticObject.on("mouseout", function() {
    tooltip.hide();
} 
```

唯一的问题是它只显示在页面的左上角，我在文档中找不到关于如何手动定位这个东西的任何内容。

欢迎提出建议或想法。如有必要，我也愿意使用不同的工具提示库。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:14:52.593

看来（除了快速查看文档外，不了解 Opentip）您可以在配置中将 'fixed' 设置为 true。由于目标为空，文档建议 fixed=true 应该使工具提示出现在鼠标位置，但一旦鼠标移动就不要跟随它。

听上去怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:56:29.607

对于那些也在寻找解决方案的人，我设法解决了这样的问题：

```
group.on("mousemove", function(event) {

    tooltip.content = //change content 
    tooltip.show();
    $("#opentip-1").offset({ left: event.offsetX, top: event.offsetY });

}); 
```

# ios6 - IOS 6 UITableViewCellEditingStyle重叠TableViewCell标签

> ID：13309623
> 
> 赞同：1
> 
> 时间：2012-11-09T14:09:50.400
> 
> 标签：ios6

我正在使用 IOS 6 UITableView ，我的问题是，每当我将表格视图置于编辑模式时，出现在 deletestyle （ UITableViewCellEditingStyleDelete ）的表格视图单元格旁边的编辑控件与两个标签（ xyzname 和 xyzcollege ）重叠。我在 IOS 5 中没有这个问题（使用相同的代码）。

代码：

```
 - (void)viewDidLoad
     {
         [super viewDidLoad]; 
         NSString *path = [[NSBundle mainBundle]pathForResource:@"friends"ofType:@"plist"];

         NSDictionary *xyz = [[NSDictionary alloc]initWithContentsOfFile:path];

         _names = [xyz objectForKey:@"name"];
         _colls = [xyz objectForKey:@"college"];

         self.navigationItem.rightBarButtonItem = self.editButtonItem;

     }

     -(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection: (NSInteger)section
     {
         NSInteger count =_names.count;
         if(self.editing)
         {
             count++;
         }
         return count;
     }

    -(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:         (NSIndexPath *)indexPath
    {
         saumyaTableViewCell *cell;

         cell = [_saumyaTable dequeueReusableCellWithIdentifier:@"saumyacell"];

         if(indexPath.row < _names.count)
         {
            cell.xyzname.text = [_names objectAtIndex:indexPath.row];
            cell.xyzcollege.text = [_colls objectAtIndex:indexPath.row];
         }
         else
         {

            cell.xyzname.text = @"Add name.";
            cell.xyzcollege.text = @"Add College";
            cell.editingAccessoryType =
            UITableViewCellAccessoryDisclosureIndicator;
         }
         return cell;
    }

   -(void)setEditing:(BOOL)editing animated:(BOOL) animated
   {

      if( editing != self.editing )
      {
          [super setEditing:editing animated:animated];
          [_saumyaTable setEditing:editing animated:animated];

          NSArray *indexes = [NSArray arrayWithObject:
          [NSIndexPath indexPathForRow:_names.count inSection:0]];

          if (editing == YES )
          {
             [_saumyaTable insertRowsAtIndexPaths:indexes       withRowAnimation:UITableViewRowAnimationLeft];
          }
          else
          {
             [_saumyaTable deleteRowsAtIndexPaths:indexes
                         withRowAnimation:UITableViewRowAnimationLeft];
          }
       }
    }

   - (UITableViewCellEditingStyle)tableView:(UITableView *)tableView  editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row < _names.count)
    {
        return UITableViewCellEditingStyleDelete;
    }
    else
    {
        return UITableViewCellEditingStyleInsert;
    }
 } 
```

图片说明：

1.UITableViewCell有两个标签（xyzname和xyzcollege）

2.UITableViewCellEditingStyleDelete在单元格进入编辑模式时与这两个标签重叠

如果我希望这些标签在我的视图进入编辑模式时在右侧自动设置动画，并在退出编辑模式后再次动画到它们的原始位置，该怎么办？

谢谢你

# c# - SharpSSH - 使用 Sftp.Put 时如何设置权限

> ID：13309624
> 
> 赞同：0
> 
> 时间：2012-11-09T14:09:50.673
> 
> 标签：c#, sftp, sharpssh

我正在使用 SharpSSH 将文件写入 unix 机器。这些文件应该被驻留在 unix 机器上的另一个应用程序读取然后删除。
问题是unix应用程序没有删除文件的权限。我可以看到文件的权限是 rw-r-----
这是我的代码：

```
public override void WriteFileg(string directoryName, string fileName, string responseText, host, username, password, port) {
    // Write the file locally
    TextWriter writer = new StreamWriter("TempForSftp.txt");
    writer.WriteLine(responseText);
    writer.Close();

    // Transfer the local file
    Sftp sftp = new Sftp(host, username, password);
    sftp.Connect(int.Parse(port));
    sftp.Put("TempForSftp.txt", directoryName + "/" + fileName);
    sftp.Close();
} 
```

如何设置不同的权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:40:59.657

SharpSsh 库似乎为 SFTP 实现了非常基本的功能，它没有实现设置文件权限的方法。您可以尝试通过 SSH shell 设置权限（在 SSH 中存在子系统通道，它执行一个命令，因此您可以调用 chmod）如果他们支持的话，您应该搜索其他 C# 库。幸运的是，有很多可用的。

# django - 修改 Django ModelForm 的 HTML 输出

> ID：13309630
> 
> 赞同：0
> 
> 时间：2012-11-09T14:10:13.783
> 
> 标签：django, django-forms

默认情况下，我的 django ModelForm 生成一个 HTML 表单。我想通过在`select`元素中包含一个额外的属性来修改表单的 HTML 输出：

```
# models.py
class FoodForm(ModelForm):
    class Meta:
        model = Food
        fields = ('name', 'ingredients')

# default HTML output
<form action="/" method="post">
    <p>
        <label for="id_name">Name:</label>
        <input id="id_name" type="text" name="name" maxlength="30" />
    </p>
    <p>
        <label for="id_ingredients">Ingredients:</label> 
        <select multiple="multiple" name="ingredients" id="id_ingredients">
        <option value="1">Mozzarella</option>
        <option value="2">Cottage cheese</option>
        <option value="3">Onion</option> 
```

我想在选择字段中**添加一个新属性并****保持当前属性不变**：

```
# desired HTML output
<select multiple="multiple" name="ingredients" id="id_ingredients" data-placeholder="Choose ingredients..."> 
```

我试图用小部件来做（见下文），但它给了我一个错误：

```
class FoodForm(ModelForm):
    class Meta:
        model = Food
        fields = ('name', 'ingredients')
        widgets = {
            'ingredients': Select(attrs={'data-placeholder': "Choose ingredients..."}),
        }

# NameError: name 'Select' is not defined 
```

任何想法如何修改 HTML 输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:20:45.140

您需要[从`django.forms`](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#select)以下位置导入小部件：

```
from django import forms
class FoodForm(forms.ModelForm):
    class Meta:
        model = Food
        fields = ('name', 'ingredients')
        widgets = {
            'ingredients': forms.Select(attrs={'data-placeholder': "Choose ingredients..."}),
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:21:44.233

你只是忘了`from django.forms.widgets import Select`

# ruby-on-rails-3 - Rails 3 和缓存关联

> ID：13309631
> 
> 赞同：1
> 
> 时间：2012-11-09T14:10:14.330
> 
> 标签：ruby-on-rails-3, memcached, associations

关注.rb

```
belongs_to :show

def cached_show
  Rails.cache.fetch([self, :show]) do
    show      
  end
end 
```

看法：

```
<% @recently_favorited.each do |following| %>
<li>
  <%= link_to "#{following.cached_show.name}", show_path(:permalink => following.cached_show.permalink) %> <span><%= "(#{pluralize(following.cached_show.followers, "follower")})" %></span>
</li>
<% end %> 
```

控制台中的结果：

```
Cache read: followings/632770-20120929132253/show
Cache generate: followings/632770-20120929132253/show
  Show Load (0.7ms) SELECT `shows`.* FROM `shows`WHERE `shows`.`id` = 617 LIMIT 1
Cache write: followings/632770-20120929132253/show

Cache read: followings/632770-20120929132253/show
Cache fetch_hit: followings/632770-20120929132253/show

Cache read: followings/632770-20120929132253/show
Cache fetch_hit: followings/632770-20120929132253/show 
```

问题：
这甚至是获取/缓存关联的“正确”实现吗？
那么性能呢？
在某些视图中（如示例中），它会在每个循环中命中缓存 3 次。在我的情况下，我在页脚中循环了 10 个项目，因此每个请求都会命中 30 次。这很好，还是每个循环一个 n+1 查询会更好？

建议和一般最佳实践表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:40:18.520

据我所知，创建一种独特的方法来访问缓存与获取缓存并不常见。

大多数时候，您只需调用一个一直询问的方法`cache`，因为如果您在缓存键中包含一个对象，则该`updated_at`字段用于构建键。

对于您现在的示例，奇怪的部分是您实际上并没有对`Following`模型做任何事情，除了访问它的关联。因此，您应该直接在`Show`模型上查询：

```
@recently_favorited_shows = Show.joins(:followings).order("followings.created_at DESC").uniq 
```

然后在你看来，循环播放节目。只有一个查询，没有n+1

如果您期望有数千次点击，我只是建议缓存结果`@recently_favorited_shows`并使其每 X 分钟过期：

```
@recently_favorited_shows = cache_store.fetch('recently_favorited_shows', expires_in: 5.minutes){Show.joins(:followings).order("followings.created_at DESC").uniq} 
```

另一方面，如果您想在某个时间执行此操作，这里有一篇关于视图端缓存使用情况的很好的文章：http: [//37signals.com/svn/posts/3113-how-key-based-cache-expiration-作品](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)

### 无连接解决方​​案

编辑：现在，如果你在表中有无数行`followings`，这就是我要做的：

*   `last_followed_at`在表上创建一个字段`shows`，上面有一个索引
*   在`Following.rb`：`belongs_to :show, touch: :last_followed_at`。这样，只要您在 中添加新条目`Following`，它就会更新`shows`表格上的字段
*   然后，要获取最新关注的节目，请执行以下操作：

    ```
    @shows = Show.order("last_followed_at DESC").limit(10) # Fast query of course 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:48:52.777

这不能回答我的问题，但它解决了我的问题。我将这样做：

```
@shows = Rails.cache.fetch("recently_favorited_shows", expires_in: 1.minutes) do
  Show.find(Following.order("created_at DESC").limit(10).collect(&:show_id))
end 
```

查询非常快（约 0.8 毫秒每个表示 IRB 控制台）

# jquery-ui - Opera 忽略最大高度（jquery ui 选项卡）

> ID：13309632
> 
> 赞同：0
> 
> 时间：2012-11-09T14:10:18.037
> 
> 标签：jquery-ui, opera, css

我有一个元素，Opera 显示的比它应该的高（53 像素而不是 35 像素）。因此，我尝试明确设置此 jquery-ui 元素的样式。当我用 Dragonfly 查看元素时，这是我在样式中看到的：

```
.ui-tabs-nav { 
height: 35px;
max-height: 35px;
min-height: 35px;
padding: 0px;
vertical-align: bottom;
} 
```

看起来它已设置（否则会有删除线，对吧？）。最小高度、最大高度和高度相同 - 35px。但这就是“计算风格”的样子：

```
height: 53px;
max-height: none;
min-height: 35px; 
```

您对可能出现的问题有任何想法吗？为什么忽略 max-height 属性并且使用数字（偶然）切换来计算高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:19:16.393

我能问一下为什么你对最小和最大高度使用相同的值吗？如果您试图将项目的高度限制为 35px，请考虑使用`overflow:hidden`.

```
.ui-tabs-nav { 
    height: 35px;
    overflow: hidden;
    padding: 0px;
    vertical-align: bottom;
    display: block; /* if it is not a block element already */
} 
```

# jmeter - 将响应保存到文件Listerner - 设置文件名

> ID：13309638
> 
> 赞同：3
> 
> 时间：2012-11-09T14:10:36.747
> 
> 标签：jmeter

我有一个包含许多 HTTPRequest 的 JMeter 测试计划。对于每个 HTTPRequest，当发生故障时，我添加了一个“将响应保存到文件”侦听器。理想情况下，我希望文件名与它正在记录的请求的标签相同，并添加后缀“_FAILURE”。

有什么方法可以在我的计划的顶层使用单个“将响应保存到文件”侦听器并自动生成此侦听器，而不必自己为每个侦听器手动设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:21:27.873

任何侦听器都可以访问最后运行的采样器的 SampleResult。您可以使用[__Beanshell](http://jmeter.apache.org/usermanual/functions.html#__BeanShell)函数获取它。SampleResult 有[获取采样器标签的方法](http://jmeter.apache.org/api/org/apache/jmeter/samplers/SampleResult.html#getSampleLabel%28%29)。因此，将响应保存到文件侦听器的文件名前缀将是：

```
${__BeanShell(SampleResult.getSampleLabel())}_FAILURE 
```

# c# - 使用 Wpf/C#/EF5 创建自由文本样式的搜索

> ID：13309643
> 
> 赞同：1
> 
> 时间：2012-11-09T14:11:00.140
> 
> 标签：c#, entity-framework, query-optimization

我创建了大部分 C# 应用程序，其中核心是个人数据库（外围还有很多事情要做）。我将 EF 与 CodeFirst/DbContext 方法一起使用。对于我的前端，我有使用 MVVM 类型方法的 XAML。

我现在想要一个“感觉”像自由文本搜索的搜索框。我目前有一个可编辑的组合框，其属性设置为提供正确的感觉。我正在使用 EF 的“包含”查询方法来查询 SQL 数据库。

目前，我有以下几点：

```
x.Contains(p=> p.Forenames.Contains(s) || p.Surname.Contains(s)) 
```

这在有限的范围内运作良好。如果搜索字符串“s”同时包含名字和姓氏数据，这显然是一个问题。本质上，我希望用户能够通过键入“Joe Bloggs”*或*“Bloggs，Joe”或中间名的各种组合等来进行搜索……我什至可能希望将来在搜索中添加地址数据。

我的问题是我如何实现这一目标？想到的第一种方法是拆分字符串，然后在 foreach 循环中将数组的各个组件传递给每个搜索词。这可能会导致多个相当大的查询。

通过对 EF 本身使用不同的查询策略来实现我想要实现的目标是更好的方法吗？我想让用户感觉他们输入的任何搜索词都在组合框中提供了一些合理的东西！

# c# - 为什么从接口到类的转换失败？

> ID：13309644
> 
> 赞同：9
> 
> 时间：2012-11-09T14:11:03.010
> 
> 标签：c#, casting

```
private Vector2 ResolveCollision(ICollidable moving, ICollidable stationary)
{
    if (moving.Bounds.Intersects(stationary.Bounds))
    {
        if (moving is Player)
        {
            (Player)moving.Color = Color.Red;
        }
    }
    // ...
} 
```

我有一个`Player`实现`ICollidable`. 出于调试目的，我只是试图将一堆传递`ICollidables`给这个方法，并在它是播放器时做一些特殊的事情。但是，当我尝试进行强制转换`Player`时，`ICollidable`我收到一个错误，告诉我`ICollidable`没有`Color`属性。

我不能以这种方式进行演员表还是我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T14:12:27.687

我建议使用`as`而不是`is`：

```
Player player = moving as Player;
if (player != null)
{
    player.Color = Color.Red;
} 
```

优点是您只进行一次类型检查。

* * *

您的代码不起作用的具体原因（如其他答案中所述）是因为[operator priority](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)。该`.`运算符是一个优先级高于作为一元运算符的强制转换运算符的*主**运算符*。您的代码解释如下：

```
(Player)(moving.Color) = Color.Red; 
```

按照其他答案的建议添加括号可以解决此问题，但更改为使用`as`而不是`is`使问题完全消失。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-09T14:12:25.063

您的语法正在转换`Color`为`Player`，而不是`moving`。

```
((Player)mover).Color = Color.Red;
//^do the cast  ^access the property from the result of the cast 
```

此外，`as`往往会更好一点。如果失败，结果是`null`：

```
var player = moving as Player;
if(player != null)
{
    player.Color = Color.Red;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T14:13:44.510

并不是它不起作用，而是语法“有些”错误。

试试这个：

```
((Player) moving).Color = Color.Red; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T14:12:27.320

您应该添加额外的括号：

```
((Player)moving).Color = Color.Red; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-09T14:13:01.140

您需要在演员表和变量周围加上括号：

```
((Player)moving).Color = Color.Red; 
```

否则，您将尝试转换`moving.Color`为`Player`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-09T14:13:15.633

您忘记了一个括号：

改变

```
 (Player)moving.Color = Color.Red; 
```

到

```
 ((Player)moving).Color = Color.Red; 
```

您也可以使用[`as`运算符](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.110%29.aspx)进行强制转换。

```
Player p = moving as Player;
if (p != null)
{
    p.Color = Color.Red;
} 
```

# html - 每行独立的文本块

> ID：13309648
> 
> 赞同：1
> 
> 时间：2012-11-09T14:11:35.053
> 
> 标签：html, css

我刚开始玩 html 和 css，基本上我一直在从这里的所有帖子中学习一切，但现在我被一些我似乎无法通过研究弄清楚如何去做的事情困住了，并决定发布一个问题帮助。

我正在 tumblr 上自定义一个简单的投资组合风格主题，我的问题是关于图片右侧的文字标题

[http://www.alvaserigrafia.pt/post/34608701054](http://www.alvaserigrafia.pt/post/34608701054)

我只能让 3 个文本行显示在一个块上，我希望每一行都有自己的块，宽度成比例。这可以只用 html 和 css 来完成吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:18:01.683

这就是 Firebug（Firefox 扩展）或您最喜欢的浏览器的开发人员工具将派上用场的地方。如果您检查有问题的文本元素，您会发现它们都包含在`<p>`标签中。

`<p>`标签是块级元素，这意味着它将自动占据其父级的整个宽度。这也是推荐用于...嗯...文本段落的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:21:03.333

每行都包含在一个`p`元素中。块级元素通常填满父容器的整个宽度；这就是为什么它们是“块”元素。

要获得随内容缩小的内容，请将文本包装在 a 中`span`：

```
<p><span>text</span></p> 
```

`span`只会和里面的文字一样大。

# c# - 使用 httpwebrequest 检查 url 是否存在

> ID：13309651
> 
> 赞同：0
> 
> 时间：2012-11-09T14:11:43.393
> 
> 标签：c#, .net, httpwebrequest

我正在使用一个函数来检查是否存在外部 url。为了清楚起见，这是删除了状态消息的代码。

```
 public static bool VerifyUrl(string url)
    {
        url.ThrowNullOrEmpty("url");

        if (!(url.StartsWith("http://") || url.StartsWith("https://")))
            return false;

        var uri = new Uri(url);

        var webRequest = HttpWebRequest.Create(uri);
        webRequest.Timeout = 5000;
        webRequest.Method = "HEAD";

        HttpWebResponse webResponse;
        try
        {
            webResponse = (HttpWebResponse)webRequest.GetResponse();
            webResponse.Close();
        }
        catch (WebException)
        {
            return false;
        }

        if (string.Compare(uri.Host, webResponse.ResponseUri.Host, true) != 0)
        {
            string responseUri = webResponse.ResponseUri.ToString().ToLower();

            if (responseUri.IndexOf("error") > -1 || responseUri.IndexOf("404.") > -1 || responseUri.IndexOf("500.") > -1)
                return false;
        }

        return true;
    } 
```

我对一些外部 url 进行了测试，发现 100 个中约有 20 个作为错误返回。如果我添加用户代理，错误率约为 14%。

返回的错误是“禁止的”，尽管这可以使用用户代理解决 6%、“服务不可用”、“方法不允许”、“未实现”或“连接关闭”。

我可以对我的代码做些什么来确保更多，最好是对它们的存在做出有效的回应？

或者，可以购买代码以更有效地执行此操作。

更新 - 12 年 11 月 14 日 --------------------------------------------- -------------------------

在听取了之前回复者的建议后，我现在遇到了一个返回 Service Unavailable (503) 的域的情况。我的例子是 www.marksandspencer.com。

当我使用这个 httpsniffer [web-sniffer.net](http://web-sniffer.net/)而不是这个线程中推荐的那个时，它可以工作，使用 webrequest.GET 返回数据，但是我无法弄清楚我需要做什么才能使其工作我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:53:15.573

我终于到了 bieng 能够无一例外地验证所有网址的地步。

首先，我接受了戴维奥斯的建议。某些域在 Request.HEAD 上返回错误，因此我针对特定场景进行了重试。这为第二个请求创建了一个新的 Request.GET。

其次，亚马逊场景。亚马逊间歇性地为自己的网站返回 503 错误，而为托管在亚马逊框架上的网站返回永久的 503 错误。

经过一番挖掘，我发现将以下行添加到请求中解决了这两个问题。它是 Firefox 使用的 Accept 字符串。

```
var request = (HttpWebRequest)HttpWebRequest.Create(uri);
request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"; 
```

# php - 资源解释为样式表，但在 IIS 和 PHP 上以 MIME 类型 text/html 传输

> ID：13309654
> 
> 赞同：0
> 
> 时间：2012-11-09T14:12:02.433
> 
> 标签：php, css, iis, phpbb

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我已经通过 IIS 7.5 安装了 phpBB，并且主页显示没有 CSS。

Chrome 上的控制台显示“资源解释为样式表，但使用 MIME 类型 text/html 传输”，IE 显示类似错误。

关键是，有一个 CSS 是用 PHP 动态生成的，这就是问题所在。

style.php 文件已经有这个：

```
header('Content-type: text/css; charset=UTF-8'); 
```

我相信我在 IIS 上的应用程序设置上遗漏了一些东西，但谷歌并没有很有帮助。

# maven - Maven - 存储库标签阻止部署

> ID：13309655
> 
> 赞同：1
> 
> 时间：2012-11-09T14:12:03.817
> 
> 标签：maven, nexus

我有一个项目 POM，它指定了一个指向沙箱位置的存储库标签。

```
<repositories>
    <repository>
        <id>mysandbox</id>
        <name>Sandbox</name>
        <url>http://myTestingSite.com/repositories/sandbox/</url>
    </repository>
</repositories> 
```

这在 Eclipse 中运行良好并解决了所有依赖项，但是当我尝试部署时出现以下异常。

```
 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.5:deploy (default-depl
    oy) on project myweb-web: Deployment failed: repository element was not specified in the POM insid
    e distributionManagement element or in -DaltDeploymentRepository=id::layout::url parameter -> [Help
    1]
    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plug
    ins:maven-deploy-plugin:2.5:deploy (default-deploy) on project myweb-web: Deployment failed: repos
    itory element was not specified in the POM inside distributionManagement element or in -DaltDeployme
    ntRepository=id::layout::url parameter 
```

将其包装在 Distributionmanagement 元素中没有任何意义，因为我使用存储库来解决依赖关系而不是部署。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:15:45.463

该错误表示您没有`distributionManagement`元素或元素不正确。

所以这与内容无关`<repositories>`。只需创建一个正确的`distributionManagement`元素，它就会起作用。

请注意，损坏的元素可能在父 POM 中。运行`mvn help:effective-pom`以查看 Maven 看到的完整 POM。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T14:19:15.847

您最初定义的存储库仅考虑下载依赖项，而不是上传它们（如您所述）。

您需要添加的是分发管理中的存储库

```
<distributionManagement>
    <repository>
        <id>id</id>
        <name>name</name>
        <url>nexus_url</url>
    </repository>
</distributionManagement> 
```

如果您的关系是安全的，您还需要为密码定义一个服务器部分。

```
<servers>
    <server>
        <id>id</id>
        <username>username</username>
        <password>password</password>
    </server>
</servers> 
```

# sql - 如果值不存在，则插入新行并以任一方式获取 id

> ID：13309659
> 
> 赞同：3
> 
> 时间：2012-11-09T14:12:25.313
> 
> 标签：sql, performance, postgresql, concurrency, sql-insert

我想向表中插入一条记录，如果该记录已经存在，则获取其 ID，否则运行插入并获取新记录的 ID。

我将插入数百万条记录，但不知道如何以有效的方式执行此操作。我现在正在做的是运行一个选择来检查记录是否已经存在，如果没有，则插入它并获取插入记录的 id。随着桌子越来越大，我想那`SELECT`会杀了我。

我现在用 psycopg2 在 python 中做的事情是这样的：

```
select = ("SELECT id FROM ... WHERE ...", [...])
cur.execute(*select)
if not cur.rowcount:
    insert = ("INSERT INTO ... VALUES ... RETURNING id", [...])
    cur.execute(*insert)
rid = cur.fetchone()[0] 
```

是否有可能在这样的存储过程中做一些事情：

```
BEGIN
    EXECUTE sql_insert;
    RETURN id;
    EXCEPTION WHEN unique_violation THEN
        -- return id of already existing record
        -- from the exception info ?
END; 
```

关于如何优化这样的案例的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:12:02.327

首先，这显然*不是*从未提及`UPSERT`的。`UPDATE`不过，类似的并发问题也适用。

这种任务总会有竞争条件，但您可以将其最小化到一个非常小的时间段，同时使用数据修改 CTE（PostgreSQL 9.1 引入）只查询*一次ID：*

给定一张桌子`tbl`：

```
CREATE TABLE tbl(tbl_id serial PRIMARY KEY, some_col text UNIQUE); 
```

使用此查询：

```
WITH x AS (SELECT 'baz'::text AS some_col) -- enter value(s) once

   , y AS (
   SELECT x.some_col
        , (SELECT t.tbl_id FROM tbl t WHERE t.some_col = x.some_col) AS tbl_id
   FROM   x    
   )

   , z AS (
   INSERT INTO tbl(some_col)
   SELECT y.some_col
   FROM   y
   WHERE  y.tbl_id IS NULL
   RETURNING tbl_id
)

SELECT COALESCE(
         (SELECT tbl_id FROM z)
        ,(SELECT tbl_id FROM y)
       ); 
```

*   CTE`x`只是为了方便：输入一次值。
*   CTE`y`检索 tbl_id - 如果它已经存在。
*   CTE`z`插入新行 - 如果没有。
*   最后避免使用该构造`SELECT`在表上运行另一个查询。`COALESCE`

`y`现在，如果并发事务提交了一个恰好在 CTE和之间的 some_col = 'foo' 的新行，这仍然会失败`z`，但这极不可能。如果发生这种情况，您会遇到重复的密钥违规，并且必须重试。什么都没有丢失。如果您不面对并发写入，您可以忘记这一点。

您可以将其放入 plpgsql 函数并自动重新运行重复键错误的查询。

不用说，在此设置中您需要两个索引（如我`CREATE TABLE`上面的声明中所示）：

*   一个`UNIQUE`或`PRIMARY KEY`约束`tbl_id`（这是`serial`类型！）
*   另一个`UNIQUE`或`PRIMARY KEY`约束`some_col`

两者都自动实现索引。

# c++ - Visual Studio 中的 --enable-pic 等效项

> ID：13309662
> 
> 赞同：13
> 
> 时间：2012-11-09T14:12:35.940
> 
> 标签：c++, visual-studio

Visual Studio C++ 项目中的什么设置，相当于 *nix`--enable-pic`开关，即`./configure --enable-pic`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-09T14:18:08.640

没有，因为它不是必需的。

[http://en.wikipedia.org/wiki/Position-independent_code](http://en.wikipedia.org/wiki/Position-independent_code)：“Microsoft Windows DLL 不是 Unix 意义上的共享库，也不使用与位置无关的代码”

# iphone - 如何找到用于 xcode iphone 开发的库

> ID：13309669
> 
> 赞同：0
> 
> 时间：2012-11-09T14:13:00.270
> 
> 标签：iphone, ios, xcode4.5

我正在 youtube 上观看我的第一个 xcode 教程，它说我必须制作新的“基于视图应用程序”，但我发现“简单视图应用程序”是一样的，对吗？然后在教程中有一些按钮，textareas ......把它放在视图中但我用我的xcode 4.5.2找不到它，我在谷歌上读到它来自工具然后库但我没有“工具”，请问我该怎么做才能看到它？顺便说一句，我只有 mac os x lion 10.7.4 和 xcode 4.5.2 也许我必须安装其他程序？这就是我所看到的![在此处输入图像描述](../Images/83ab6fb2593603be3a9a057222b1c3ec.png)

当我按下新项目检查我看到的内容时，没有“基于视图的应用程序”![在此处输入图像描述](../Images/9b25fc5bed98e65b303cd57b6603fadc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:15:24.803

在右上角，“查看”上方有三个按钮，单击右侧打开右侧边栏。在右下角，您可以找到您的 UI 对象。不需要其他任何东西。

单击右下角的小“框”（四个符号中的第三个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:22:48.257

我不知道您在看哪个教程，但如果不清楚，您可以按照本教程进行操作。如果你向下滚动，你会找到你要找的！祝你好运

[从头开始创建基于视图的应用程序](http://www.mobisoftinfotech.com/blog/iphone/iphone-view-based-application-from-scratch/)

[同样的事情的另一个例子](http://www.nearsoft.com/blog/creating-a-view-based-iphone-application.html)

![在此处输入图像描述](../Images/827c8e9dac4e3da4b46307b59206bd0d.png)

# asp.net-mvc - MVC 3 连接字符串混淆

> ID：13309671
> 
> 赞同：1
> 
> 时间：2012-11-09T14:13:10.710
> 
> 标签：asp.net-mvc, c#-4.0, .net-4.0

使用 VS 2010、MVC 3 和 SQL Express，我一直在关注 ASP.net 上的教程。我也先使用 EF 代码。到目前为止，我的连接字符串是：

```
<add name="MusicStoreEntities"
     connectionString="Server=.\SQLExpress;Database=MusicStoreDB;Integrated Security=SSPI;User Instance=true"
providerName="System.Data.SqlClient" /> 
```

在以下位置创建数据库：

```
C:\Documents and Settings\username\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS 
```

我现在想让数据库驻留在 App_Data 文件夹中。因此，我按照不同的教程创建了一个新的 Web 应用程序，但这次我添加了一个 SQL 数据库，并通过更改数据库名称修改了会员数据库的连接字符串。然后我使用 aspnet_regsql.exe 创建成员表。然后我创建了 POCO 类、一个控制器并添加了种子数据。由于数据库已经存在，它抱怨没有 EdmMetadata 表。经过研究，我意识到我的错误并删除了数据库。更不用说数据库将随着项目的修改而被删除和创建。再次运行该项目给了我错误“未指定初始目录”，因此我修改了连接字符串。再次运行项目，我得到错误'C：\ContosoUniversity\ContosoUniversity\App_Data\School.mdf' 已存在。选择不同的数据库名称。

搜索我的硬盘驱动器显示该数据库不存在。我的连接字符串如下所示：

```
<add name="SchoolContext"
         connectionString="data source=.\SQLEXPRESS;Initial Catalog=School;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|School.mdf;User Instance=true"
         providerName="System.Data.SqlClient" /> 
```

是什么让它认为数据库存在？我需要做什么才能首先获取代码以在 App_Data 文件夹中创建数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:54:30.780

尽管我最终沮丧地更改了数据库名称，但搜索我的注册表后发现 app_data 目录中有多个 school.mdf 条目。删除这些解决了问题。

# html - 如何循环播放 CSS3 过渡？

> ID：13309673
> 
> 赞同：61
> 
> 时间：2012-11-09T14:13:16.510
> 
> 标签：html, css, stylesheet, transform

以下样式只是如何在 CSS3 中设置过渡的示例。
是否有一个纯 CSS 技巧可以让这个循环播放？

```
div {
    width:100px;
    height:100px;
    background:red;
    transition:width 0.1s;
    -webkit-transition:width 0.1s; /* Safari and Chrome */
    -moz-transition:width 0.1s; /* Firefox 4 */
    -o-transition:width 0.1s; /* Opera */
    transition:width 0.1s; /* Opera */
}

div:hover {
    width:300px;
} 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-11-09T14:19:42.970

CSS 过渡仅从一组样式动画到另一组样式；您正在寻找的是[CSS 动画](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_animations)。

您需要定义动画关键帧并将其应用于元素：

```
@keyframes changewidth {
  from {
    width: 100px;
  }

  to {
    width: 300px;
  }
}

div {
  animation-duration: 0.1s;
  animation-name: changewidth;
  animation-iteration-count: infinite;
  animation-direction: alternate;
} 
```

查看上面的链接以了解如何根据自己的喜好对其进行自定义，并且您必须添加浏览器前缀。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-08-13T20:16:29.053

如果您想利用“变换”属性提供的 60FPS 平滑度，您可以将两者结合起来：

```
@keyframes changewidth {
  from {
    transform: scaleX(1);
  }

  to {
    transform: scaleX(2);
  }
}

div {
  animation-duration: 0.1s;
  animation-name: changewidth;
  animation-iteration-count: infinite;
  animation-direction: alternate;
} 
```

关于为什么 transform 提供更平滑过渡的更多解释： [https ://medium.com/outsystems-experts/how-to-achieve-60-fps-animations-with-css3-db7b98610108](https://medium.com/outsystems-experts/how-to-achieve-60-fps-animations-with-css3-db7b98610108)

# mysql - MySQL 主键字段类型

> ID：13309675
> 
> 赞同：1
> 
> 时间：2012-11-09T14:13:19.443
> 
> 标签：mysql, types, primary-key, field

我正在处理一些事务数据并且我的主键字段存在问题。从我的订单管理系统和 Google 分析导入数据时，OrderID 字段具有以下两种值格式：

```
123456  
002-0130775-1483424 
```

如何将此字段格式化为主键？

预先感谢您的帮助！:)

（运行 MySQL 5.5.27）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:15:39.003

您应该创建一个包含任意整数（“内部”键）的自动增量主键字段......您可以将您的实际“键”数据放在另一个名为 OrderNumber 或类似名称的字段中，并在其上放置一个唯一索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:17:22.170

作为一种选择，您可以设置一个综合主键（仅供您的内部参考）和一个索引 CHAR(20) 列（可能带有一个唯一索引以保持一致性）——这似乎是一个更好的解决方案，因为有一天你可能希望与可能与现有数据发生冲突的另一个系统集成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T14:18:49.123

是的，将主键保留在内部有助于使您免受变化的影响。任何可以作为数据公开的东西都应该被重新考虑为密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:17:17.677

看，主键本质上应该是**bigint**，但是你可以修改你想要的方式。 **MYSQL 5.5.27**与早期版本相比有一些重要变化，请点击链接 [https://dev.mysql.com/doc/refman/5.5/en/news-5-5-27.html](https://dev.mysql.com/doc/refman/5.5/en/news-5-5-27.html)

# java - Selenium webdriver：我可以检查资源（例如 XML 文件）是否已加载？

> ID：13309678
> 
> 赞同：0
> 
> 时间：2012-11-09T14:13:37.120
> 
> 标签：java, junit, selenium-webdriver

我的应用程序中有 Fusion Maps 和 Fusion Charts，它们加载 XML 文件以获取数据以进行可视化。

我想做的是，使用 JUnit 测试（webdriver）来检查是否已加载某个 XML 文件（或者，在更高级别，是否已加载文件）。

这甚至可能吗？

我知道我可以通过进行 javascript 调用来做到这一点，但我对从 java 代码进行 js 调用持怀疑态度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:26:17.320

从 java 进行 JS 调用没有任何问题。[您可以在此处](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_How_do_I_execute_Javascript_directly?)阅读如何操作。

不幸的是，我认为没有办法（即使使用 html 单元驱动程序）来查找是否已下载资产（无论是图像还是 xml 文件）。

# objective-c - 如何使用 Objective-C 中的块进行结构化编程

> ID：13309686
> 
> 赞同：10
> 
> 时间：2012-11-09T14:14:08.760
> 
> 标签：objective-c, lambda, objective-c-blocks, continuations, structured-programming

当使用返回块的方法时，它们会非常方便。但是，当您必须将其中一些串在一起时，它会很快变得混乱

例如，您必须连续调用 4 个 URL：

```
[remoteAPIWithURL:url1 success:^(int status){
    [remoteAPIWithURL:url2 success:^(int status){
        [remoteAPIWithURL:url3 success:^(int status){
            [remoteAPIWithURL:url2 success:^(int status){
            //succes!!!
            }];
        }];
    }];
}]; 
```

因此，对于每次迭代，我都会更深一层，我什至还没有处理嵌套块中的错误。

当存在实际循环时，情况会变得更糟。例如，假设我想上传一个 100 个块的文件：

```
- (void) continueUploadWithBlockNr:(int)blockNr
{
    if(blocknr>=100) 
    {
    //success!!!
    }
    [remoteAPIUploadFile:file withBlockNr:blockNr success:^(int status)
    {
        [self continueUploadWithBlockNr:blockNr];
    }];
} 
```

这感觉非常不直观，并且很快变得非常难以理解。

在 .Net 中，他们使用 async 和 await 关键字解决了所有这些问题，基本上将这些延续展开为看似同步的流程。

Objective C 的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T12:56:50.973

你的问题立即让我想到了递归。事实证明，[Objective-c 块可以在递归中使用](http://ddeville.me/2011/10/recursive-blocks-objc/)。所以我想出了以下解决方案，它易于理解并且可以很好地扩展到 N 个任务。

```
// __block declaration of the block makes it possible to call the block from within itself
__block void (^urlFetchBlock)();

// Neatly aggregate all the urls you wish to fetch
NSArray *urlArray = @[
    [NSURL URLWithString:@"http://www.google.com"],
    [NSURL URLWithString:@"http://www.stackoverflow.com"],
    [NSURL URLWithString:@"http://www.bing.com"],
    [NSURL URLWithString:@"http://www.apple.com"]
];
__block int urlIndex = 0;

// the 'recursive' block 
urlFetchBlock = [^void () {
    if (urlIndex < (int)[urlArray count]){
        [self remoteAPIWithURL:[urlArray objectAtIndex:index] 
            success:^(int theStatus){
                urlIndex++;
                urlFetchBlock();
            }

            failure:^(){
                // handle error. 
            }];
    }
} copy];

// initiate the url requests
urlFetchBlock(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T23:00:24.377

减少嵌套的一种方法是定义返回单个块的方法。为了促进由 Objective C 编译器通过闭包“自动”完成的数据共享，您需要定义一个单独的类来保存共享状态。

这是如何做到这一点的粗略草图：

```
typedef void (^WithStatus)(int);

@interface AsyncHandler : NSObject {
    NSString *_sharedString;
    NSURL *_innerUrl;
    NSURL *_middleUrl;
    WithStatus _innermostBlock;
}
+(void)handleRequest:(WithStatus)innermostBlock
            outerUrl:(NSURL*)outerUrl
            middleUrl:(NSURL*)middleUrl
            innerUrl:(NSURL*)innerUrl;

-(WithStatus)outerBlock;

-(WithStatus)middleBlock;

@end

@implementation AsyncHandler

+(void)handleRequest:(WithStatus)innermostBlock
            outerUrl:(NSURL*)outerUrl
            middleUrl:(NSURL*)middleUrl
            innerUrl:(NSURL*)innerUrl {
    AsyncHandler *h = [[AsyncHandler alloc] init];
    h->_innermostBlock = innermostBlock;
    h->_innerUrl = innerUrl;
    h->_middleUrl = middleUrl;
    [remoteAPIWithURL:outerUrl success:[self outerBlock]];
}

-(WithStatus)outerBlock {
    return ^(int success) {
        _sharedString = [NSString stringWithFormat:@"Outer: %i", success];
        [remoteAPIWithURL:_middleUrl success:[self middleBlock]];
    };
}

-(WithStatus)middleBlock {
    return ^(int success) {
        NSLog("Shared string: %@", _sharedString);
        [remoteAPIWithURL:_innerUrl success:_innermostBlock];
    };
}

@end 
```

注意：所有这些都假设 ARC；如果您在没有它的情况下进行编译，则需要[`Block_copy`](https://stackoverflow.com/a/2659357/335858)在返回块的方法中使用。您还需要在下面的调用代码中进行复制。

[现在您的原始函数可以在没有“俄罗斯娃娃”](http://en.wikipedia.org/wiki/Matryoshka_doll)嵌套的情况下重写，如下所示：

```
[AsyncHandler
    handleRequest:^(int status){
        //succes!!!
    }
    outerUrl:[NSURL @"http://my.first.url.com"]
    middleUrl:[NSURL @"http://my.second.url.com"]
    innerUrl:[NSURL @"http://my.third.url.com"]
]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T18:12:09.700

**迭代算法**：

*   创建一个`__block`变量 ( `int urlNum`) 以跟踪当前 URL（在`NSArray`其中一个 URL 中）。
*   让 onUrlComplete 块触发下一个请求，直到所有 URL 都已加载。
*   触发第一个请求。
*   加载所有 URL 后，执行“//success!” 舞蹈。

在没有 XCode 帮助的情况下编写的代码（意思是，可能存在编译器错误——必要时会修复）：

```
- (void)loadUrlsAsynchronouslyIterative:(NSArray *)urls {
  __block int urlNum = 0;
  void(^onUrlComplete)(int) = nil; //I don't remember if you can call a block from inside itself.
  onUrlComplete = ^(int status) {
    if (urlNum < urls.count) {
      id nextUrl = urls[urlNum++];
      [remoteAPIWithURL:nextUrl success:onUrlComplete];
    } else {
      //success!
    }
  }
  onUrlComplete(0); //fire first request
} 
```

**递归算法**：

*   创建一个方法来加载所有剩余的 URL。
*   当剩余的 URL 为空时，触发“onSuccess”。
*   否则，触发对下一个 URL 的请求并提供一个完成块，该块递归地调用除第一个剩余 URL 之外的所有方法的方法。
*   复杂性：我们声明了“onSuccess”块来接受一个`int status`参数，所以我们向下传递了最后一个状态变量（包括一个“默认”值）。

不借助 XCode 编写的代码（*此处为 bug 免责声明*）：

```
- (void)loadUrlsAsynchronouslyRecursive:(NSArray *)remainingUrls onSuccess:(void(^)(int status))onSuccess lastStatus:(int)lastStatus {
  if (remainingUrls.count == 0) {
    onSuccess(lastStatus);
    return;
  }
  id nextUrl = remainingUrls[0];
  remainingUrls = [remainingUrls subarrayWithRange:NSMakeRange(1, remainingUrls.count-1)];
  [remoteAPIWithUrl:nextUrl onSuccess:^(int status) {
    [self loadUrlsAsynchronouslyRecursive:remainingUrls onSuccess:onSuccess lastStatus:status];
  }];
}

//fire first request:
[self loadUrlsAsynchronouslyRecursive:urls onSuccess:^(int status) {
  //success here!
} lastStatus:0]; 
```

**哪个更好**？

*   迭代算法简单明了——如果你喜欢玩带有`__block`变量和作用域的游戏的话。
*   或者，递归算法不需要`__block`变量并且相当简单，就像递归算法一样。
*   递归实现比迭代实现（如已实现）更具可重用性。
*   递归算法可能会泄漏（它需要对 的引用`self`），但有几种方法可以解决这个问题：使其成为函数、使用`__weak id weakSelf = self;`等。

**添加错误处理有多容易**？

*   迭代实现可以很容易地扩展以检查 的值`status`，但代价是`onUrlComplete`块变得更加复杂。
*   递归实现可能不那么直接扩展——主要是因为它是可重用的。当状态为某某时，是否要取消加载更多 URL？然后传递一个接受`int status`并返回的状态检查/错误处理块`BOOL`（例如`YES`继续，`NO`取消）。或者也许修改`onSuccess`以接受两者`int status`-`NSArray *remainingUrls`但您需要调用`loadUrlsAsynchronouslyRecursive...`您的`onSuccess`块实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T20:32:18.473

您说（在评论中），“异步方法无需使用显式线程即可提供简单的异步性。” 但是您的抱怨似乎是您正在尝试使用异步方法做某事，*这并不容易*。你看到这里的矛盾了吗？

当您使用基于回调的设计时，您牺牲了直接使用语言的内置结构表达控制流的能力。

所以我建议你停止使用基于回调的设计。Grand Central Dispatch (GCD) 使“在后台”执行工作变得容易（又是那个词！），然后回调到主线程以更新用户界面。因此，如果您有 API 的同步版本，只需在后台队列中使用它：

```
- (void)interactWithRemoteAPI:(id<RemoteAPI>)remoteAPI {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // This block runs on a background queue, so it doesn't block the main thread.
        // But it can't touch the user interface.

        for (NSURL *url in @[url1, url2, url3, url4]) {
            int status = [remoteAPI syncRequestWithURL:url];
            if (status != 0) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    // This block runs on the main thread, so it can update the
                    // user interface.
                    [self remoteRequestFailedWithURL:url status:status];
                });
                return;
            }
        }
    });
} 
```

因为我们只是使用正常的控制流，所以做更复杂的事情很简单。假设我们需要发出两个请求，然后以最多 100k 的块上传一个文件，然后再发出一个请求：

```
#define AsyncToMain(Block) dispatch_async(dispatch_get_main_queue(), Block)

- (void)uploadFile:(NSFileHandle *)fileHandle withRemoteAPI:(id<RemoteAPI>)remoteAPI {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        int status = [remoteAPI syncRequestWithURL:url1];
        if (status != 0) {
            AsyncToMain(^{ [self remoteRequestFailedWithURL:url1 status:status]; });
            return;
        }

        status = [remoteAPI syncRequestWithURL:url2];
        if (status != 0) {
            AsyncToMain(^{ [self remoteRequestFailedWithURL:url2 status:status]; });
            return;
        }

        while (1) {
            // Manage an autorelease pool to avoid accumulating all of the
            // 100k chunks in memory simultaneously.
            @autoreleasepool {
                NSData *chunk = [fileHandle readDataOfLength:100 * 1024];
                if (chunk.length == 0)
                    break;
                status = [remoteAPI syncUploadChunk:chunk];
                if (status != 0) {
                    AsyncToMain(^{ [self sendChunkFailedWithStatus:status]; });
                    return;
                }
            }
        }

        status = [remoteAPI syncRequestWithURL:url4];
        if (status != 0) {
            AsyncToMain(^{ [self remoteRequestFailedWithURL:url4 status:status]; });
            return;
        }

        AsyncToMain(^{ [self uploadFileSucceeded]; });
    });
} 
```

现在我确定你会说“哦，是的，看起来很棒。” ;^) 但你也可能会说“如果`RemoteAPI`只有异步方法，没有同步方法呢？”</p>

我们可以使用 GCD 为异步方法创建同步包装器。我们需要让包装器调用异步方法，然后阻塞直到异步方法调用回调。棘手的一点是，我们可能不知道异步方法使用哪个队列来调用回调，也不知道它是否用于`dispatch_sync`调用回调。因此，让我们通过从并发队列中调用异步方法来确保安全。

```
- (int)syncRequestWithRemoteAPI:(id<RemoteAPI>)remoteAPI url:(NSURL *)url {
    __block int outerStatus;
    dispatch_semaphore_t sem = dispatch_semaphore_create(0);
    [remoteAPI asyncRequestWithURL:url completion:^(int status) {
        outerStatus = status;
        dispatch_semaphore_signal(sem);
    }];
    dispatch_semaphore_wait(sem, DISPATCH_TIME_FOREVER);
    dispatch_release(sem);
    return outerStatus;
} 
```

## 更新

我会先回复您的第三条评论，然后再回复您的第二条评论。

### 第三条评论

您的第三条评论：

> 最后但并非最不重要的一点是，您使用一个单独的线程来环绕调用的同步版本的解决方案比使用异步替代方案的成本更高。线程是一种昂贵的资源，当它阻塞时，您基本上已经丢失了一个线程。异步调用（至少在 OS 库中的调用）通常以更有效的方式处理。（例如，如果您同时请求 10 个 url，很可能它不会启动 10 个线程（或将它们放入线程池中））

是的，使用线程比仅使用异步调用更昂贵。所以呢？问题是它是否*太贵*了。在当前 iOS 硬件上的某些场景中，Objective-C 消息过于昂贵（例如，实时人脸检测或语音识别算法的内部循环），但我大部分时间都不会担心使用它们。

线程是否是“昂贵的资源”实际上取决于上下文。让我们考虑一下您的示例：“例如，如果您同时请求 10 个 url，它很可能不会启动 10 个线程（或将它们放入线程池中）”。让我们来了解一下。

```
NSURL *url = [NSURL URLWithString:@"http://1.1.1.1/"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
for (int i = 0; i < 10; ++i) {
    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        NSLog(@"response=%@ error=%@", response, error);
    }];
} 
```

所以这里我使用苹果自己推荐的`+[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`方法异步发送10个请求。我选择了不响应的 URL，因此我可以准确地看到 Apple 使用哪种线程/队列策略来实现此方法。我在运行 iOS 6.0.1 的 iPhone 4S 上运行该应用程序，在调试器中暂停，并截取了 Thread Navigator 的屏幕截图：

![10 NSURLConnection sendAsynchronousRequest：线程](../Images/a91c1bdfc5f0809770bcba8c4edb7484.png)

您可以看到有 10 个线程标记为`com.apple.root.default-priority`。我已经打开了其中的三个，因此您可以看到它们只是普通的 GCD 队列线程。每个调用一个定义在 中的块`+[NSURLConnection sendAsynchronousRequest:…]`，它只是转身并调用`+[NSURLConnection sendSynchronousRequest:…]`. 我检查了所有 10 个，它们都有相同的堆栈跟踪。所以，事实上，操作系统库**确实启动了 10 个线程**。

我将循环计数从 10 增加到 100，发现 GCD 将`com.apple.root.default-priority`线程数限制为 64。所以我的猜测是我发出的其他 36 个请求在全局默认优先级队列中排队，甚至不会开始执行，直到64 个“正在运行”的请求中的一些完成了。

那么，使用线程将异步函数转为同步函数是否成本太高？我会说这取决于你计划同时做多少。如果这个数字低于 10 甚至 20，我会毫不犹豫。

### 第二条评论

这让我想到了你的第二条评论：

> 然而，当你有：同时做这三件事，当它们中的“任何”完成时，然后忽略其余的，同时做这三个调用，当它们全部完成时，就会成功。

在这些情况下，使用 GCD 很容易，但如果您愿意，我们当然可以将 GCD 和异步方法结合起来使用更少的线程，同时仍然使用语言原生工具进行控制流。

首先，我们将为远程 API 完成块创建一个 typedef，以便稍后节省输入：

```
typedef void (^RemoteAPICompletionBlock)(int status); 
```

我将以与以前相同的方式启动控制流，将其从主线程移至并发队列：

```
- (void)complexFlowWithRemoteAPI:(id<RemoteAPI>)remoteAPI {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ 
```

首先，我们要同时发出三个请求，并等待其中一个成功（或者，大概三个都失败）。

因此，假设我们有一个函数 ，`statusOfFirstRequestToSucceed`它发出任意数量的异步远程 API 请求并等待第一个成功。此函数将为每个异步请求提供完成块。但是不同的请求可能需要不同的参数……我们如何将 API 请求传递给函数？

我们可以通过为每个 API 请求传递一个文字块来做到这一点。每个文字块接受完成块并发出异步远程 API 请求：

```
 int status = statusOfFirstRequestToSucceed(@[
            ^(RemoteAPICompletionBlock completion) {
                [remoteAPI requestWithCompletion:completion];
            },
            ^(RemoteAPICompletionBlock completion) {
                [remoteAPI anotherRequestWithCompletion:completion];
            },
            ^(RemoteAPICompletionBlock completion) {
                [remoteAPI thirdRequestWithCompletion:completion];
            }
        ]);
        if (status != 0) {
            AsyncToMain(^{ [self complexFlowFailedOnFirstRoundWithStatus:status]; });
            return;
        } 
```

好的，现在我们已经发出了前三个并行请求，并等待一个成功，或者所有它们都失败。现在我们要再发出三个并行请求并等待所有请求都成功，或者其中一个请求失败。所以它几乎是相同的，除了我要假设一个函数`statusOfFirstRequestToFail`：

```
 status = statusOfFirstRequestToFail(@[
            ^(RemoteAPICompletionBlock completion) {
                [remoteAPI requestWithCompletion:completion];
            },
            ^(RemoteAPICompletionBlock completion) {
                [remoteAPI anotherRequestWithCompletion:completion];
            },
            ^(RemoteAPICompletionBlock completion) {
                [remoteAPI thirdRequestWithCompletion:completion];
            }
        ]);
        if (status != 0) {
            AsyncToMain(^{ [self complexFlowFailedOnSecondRoundWithStatus:status]; });
            return;
        } 
```

现在两轮并行请求都完成了，我们可以通知主线程成功了：

```
 [self complexFlowSucceeded];
    });
} 
```

总的来说，这对我来说似乎是一个非常简单的控制流程，我们只需要实现`statusOfFirstRequestToSucceed`and `statusOfFirstRequestToFail`. 我们可以在没有额外线程的情况下实现它们。由于它们非常相似，我们将让它们都调用一个辅助函数来完成真正的工作：

```
static int statusOfFirstRequestToSucceed(NSArray *requestBlocks) {
    return statusOfFirstRequestWithStatusPassingTest(requestBlocks, ^BOOL (int status) {
        return status == 0;
    });
}

static int statusOfFirstRequestToFail(NSArray *requestBlocks) {
    return statusOfFirstRequestWithStatusPassingTest(requestBlocks, ^BOOL (int status) {
        return status != 0;
    });
} 
```

在辅助函数中，我需要一个队列来运行完成块，以防止出现竞争条件：

```
static int statusOfFirstRequestWithStatusPassingTest(NSArray *requestBlocks,
    BOOL (^statusTest)(int status))
{
    dispatch_queue_t completionQueue = dispatch_queue_create("remote API completion", 0); 
```

请注意，我只会将块放在`completionQueue`using上`dispatch_sync`，并且`dispatch_sync`始终在当前线程上运行块，除非队列是主队列。

我还需要一个信号量，以在某些请求以传递状态完成或所有请求都完成时唤醒外部函数：

```
 dispatch_semaphore_t enoughJobsCompleteSemaphore = dispatch_semaphore_create(0); 
```

我将跟踪尚未完成的作业数量和最后一个要完成的作业的状态：

```
 __block int jobsLeft = requestBlocks.count;
    __block int outerStatus = 0; 
```

当`jobsLeft`变为 0 时，表示我已设置`outerStatus`为通过测试的状态，或者所有作业都已完成。这是完成块，我将在其中跟踪我是否完成等待。如果远程 API 并行调度多个完成块（在单独的线程或并发队列上），我将全部执行`completionQueue`以序列化对`jobsLeft`and的访问：`outerStatus`

```
 RemoteAPICompletionBlock completionBlock = ^(int status) {
        dispatch_sync(completionQueue, ^{ 
```

我检查外部函数是否仍在等待当前作业完成：

```
 if (jobsLeft == 0) {
                // The outer function has already returned.
                return;
            } 
```

接下来，我减少剩余的作业数量，并使已完成作业的状态可用于外部函数：

```
 --jobsLeft;
            outerStatus = status; 
```

如果已完成作业的状态通过测试，我将设置`jobsLeft`为零以防止其他作业覆盖我的状态或单选外部函数：

```
 if (statusTest(status)) {
                // We have a winner.  Prevent other jobs from overwriting my status.
                jobsLeft = 0;
            } 
```

如果没有待等待的作业（因为它们都已完成或因为该作业的状态通过了测试），我会唤醒外部函数：

```
 if (jobsLeft == 0) {
                dispatch_semaphore_signal(enoughJobsCompleteSemaphore);
            } 
```

最后，我释放了队列和信号量。（保留将在以后，当我遍历请求块来执行它们时。）

```
 dispatch_release(completionQueue);
            dispatch_release(enoughJobsCompleteSemaphore);
        });
    }; 
```

这是完成块的结束。该功能的其余部分是微不足道的。首先我执行每个请求块，并保留队列和信号量以防止悬空引用：

```
 for (void (^requestBlock)(RemoteAPICompletionBlock) in requestBlocks) {
        dispatch_retain(completionQueue); // balanced in completionBlock
        dispatch_retain(enoughJobsCompleteSemaphore); // balanced in completionBlock
        requestBlock(completionBlock);
    } 
```

请注意，如果您使用 ARC 并且您的部署目标是 iOS 6.0 或更高版本，则不需要保留。

然后我只是等待其中一个作业唤醒我，释放队列和信号量，并返回唤醒我的作业的状态：

```
 dispatch_semaphore_wait(enoughJobsCompleteSemaphore, DISPATCH_TIME_FOREVER);
    dispatch_release(completionQueue);
    dispatch_release(enoughJobsCompleteSemaphore);
    return outerStatus;
} 
```

请注意，结构`statusOfFirstRequestWithStatusPassingTest`是相当通用的：您可以传递任何您想要的请求块，只要每个请求块调用完成块并传入一个`int`状态。您可以修改该函数以处理来自每个请求块的更复杂的结果，或取消未完成的请求（如果您有取消 API）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T09:37:11.590

在我自己研究这个的时候，我碰到了一个对 Objective-C 的反应式扩展的端口。反应式扩展就像具有查询一组事件或异步操作的能力。我知道它在 .Net 和 JavaScript 下得到了很大的普及，现在显然也有一个用于 Objective-C 的端口

[https://github.com/blog/1107-reactivecocoa-for-a-better-world](https://github.com/blog/1107-reactivecocoa-for-a-better-world)

语法看起来很棘手。我想知道它是否有用于 iPhone 开发的真实世界经验，以及它是否确实优雅地解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T20:41:06.257

我倾向于像您在 NSOperation 的子类中描述的那样包装*大嵌套块集群 f**** ，这些子类描述了您的**大嵌套块集群 f****实际在做什么（而不是让它们散落在其他代码中）。

例如，如果您的以下代码：

```
[remoteAPIWithURL:url1 success:^(int status){
    [remoteAPIWithURL:url2 success:^(int status){
        [remoteAPIWithURL:url3 success:^(int status){
            [remoteAPIWithURL:url2 success:^(int status){
            //succes!!!
            }];
        }];
    }];
}]; 
```

旨在获得一个授权令牌，然后同步一些东西，也许它会是一个 NSAuthorizedSyncOperation ......我相信你明白了要点。这样做的好处是将漂亮整洁的行为捆绑在一个类中，如果事情发生变化，可以在一个地方编辑它们。我的 2 美分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T15:20:55.257

不确定那是不是要你在哪里寻找？尽管数组中的所有对象都需要不同的时间来完成，但它们都按照提交到队列的顺序出现。

```
typedef int(^SumUpTill)(int);
SumUpTill sum = ^(int max){
    int i = 0;
    int result = 0;
    while (i < max) {
        result += i++;
    }
    return result;
};

dispatch_queue_t queue = dispatch_queue_create("com.dispatch.barrier.async", DISPATCH_QUEUE_CONCURRENT);
NSArray *urlArray = @[  [NSURL URLWithString:@"http://www.google.com"],
                        @"Test",
                        [sum copy],
                        [NSURL URLWithString:@"http://www.apple.com"]
];

[urlArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    dispatch_barrier_async(queue, ^{
        if ([obj isKindOfClass:[NSURL class]]) {
            NSURLRequest *request = [NSURLRequest requestWithURL:obj];
            NSURLResponse *response = nil;
            NSError *error = nil;
            [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
            NSLog(@"index = %d, response=%@ error=%@", idx, response, error);
        }
        else if ([obj isKindOfClass:[NSString class]]) {
            NSLog(@"index = %d, string %@", idx, obj);
        }
        else {
            NSInteger result = ((SumUpTill)obj)(1000000);
            NSLog(@"index = %d, result = %d", idx, result);
        }
    });
}]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-20T15:38:36.293

在 NSDocument 中，以下方法可用于序列化：

```
Serialization
– continueActivityUsingBlock:
– continueAsynchronousWorkOnMainThreadUsingBlock:
– performActivityWithSynchronousWaiting:usingBlock:
– performAsynchronousFileAccessUsingBlock:
– performSynchronousFileAccessUsingBlock: 
```

我只是在深入研究这个，但看起来这将是一个很好的起点。

# ios - 修改 UIViewController.frame 时更改了约束

> ID：13309692
> 
> 赞同：2
> 
> 时间：2012-11-09T14:14:26.793
> 
> 标签：ios, uiviewcontroller, constraints, autolayout

我有一个我小时候`UIViewController`添加到另一个的。`UIViewController`当孩子被添加时，父母使用我的孩子设置框架`childVC.frame = ....`，但这会限制我的约束。

我可以很容易地在 IB 中复制这个问题。创建一个`UIViewController`，将大小更改为“自由格式”并放弃状态栏（只是让它在视觉上看起来正确）。添加一个`UIButton`（或任何东西）和约束，使它们的大小相同（见下图） ![在此处输入图像描述](../Images/87f57ed3a48777bc562be722a9316e39.png)

现在在视图控制器中更改顶层视图的大小并观察会发生什么。 ![在此处输入图像描述](../Images/dd56e50c45e34a1d3beda99de9f37947.png)

它改变了我对我的约束。我希望我的按钮变得更大并且仍然保持原来的约束。如果您在屏幕中的 iPhone Retina 3.5/4.0 之间切换或从横向更改为纵向，则会自动发生某些事情。但是当我调整视图大小时为什么不呢？以自由形式布置东西并测试不同的尺寸是一件非常痛苦的事情。

更重要的是......为什么在我为我的 VC 添加子项时设置 in 代码时会发生完全相同的事情，我该`frame`如何防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T15:38:46.963

基于帧的计算和自动布局不兼容。或者至少，它们的意思是暴风雨的水域。这就是你遇到问题的原因。切换到自动布局后，您必须接受不再`frame`直接操作的事实。

所以，你不能这样做`childVC.frame = whatever`。

相反，您现在必须使用自动布局来更新`childVC.frame`. 通过在 IB 中创建一个`IBOutlet`作为`childVC`. 同样，创建另一个`IBOutlet`高度`childVC`约束。

在您的视图控制器中，更新`constant`值以更改大小。

```
myWidthConstraint.constant = 123.f; 
```

这样做的地方是在控制器的`updateViewConstraints`方法中，或者在视图的情况下，`updateConstraints`.

也就是说，最好设置自动布局，这样您就不需要任何程序化更新。正确定义后，它将知道如何处理视图边界变化的事情。老实说，如果你想做一些更不寻常的事情，应该只需要以编程方式更新大小。

但是我可以说你更好吗

# ios - 为通用视图修改 UIWindow

> ID：13309694
> 
> 赞同：1
> 
> 时间：2012-11-09T14:14:39.897
> 
> 标签：ios, ipad, uiview, uiwindow, ios-universal-app

我正在尝试找到一种快速的方法来从 iPhone 应用程序更改为通用应用程序（iPhone、iPad）。（稍后我将为自定义视图完全重构应用程序以满足通用目标。）我阅读了这篇[非常好的博客文章](http://iphonedevelopment.blogspot.com/2010/04/converting-iphone-apps-to-universal.html)，它提供了一种直接的方法，首先删除硬编码的视图大小，然后将 UIWindow 框架设置为 UIScreen 框架 -适用于仅使用单个视图的应用程序。他的示例代码是这样的：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    CGRect  rect = [[UIScreen mainScreen] bounds];
    [self.window setFrame:rect];
} 
```

我将此代码放在我的应用程序 didFinishLaunchingWithOptions 中，但我仍然得到相同的 iPhone 视图，被推到 iPad 的左上角。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:37:37.480

您不需要任何 ifs，也不需要更改窗口上的框架。相反，当您创建窗口时，请使用：

```
window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

# solr - SOLR - 结果分组的结果计数

> ID：13309696
> 
> 赞同：2
> 
> 时间：2012-11-09T14:14:47.257
> 
> 标签：solr

我在 SOLR 中使用结果分组。我怎样才能得到结果的总数？结果是指分组数据的计数。

例如：

![在此处输入图像描述](../Images/06dba8ddee6152a9b93fe9a7ea0ddf1f.png)

我搜索了 2 个电子邮件地址（“Kartikeshwar@sterlinghofman.com”或“milojevics@mail.com”）。我在结果集中得到了 2 个结果。结果节点中有 numFound 属性，显示电子邮件地址“milojevics@mail.com”匹配了 16 次，电子邮件地址“Kartikeshwar@sterlinghofman.com”匹配了 28 次。有一个matches属性显示匹配的总数（16 + 28 = 44）。但我想知道结果集的总数为 2（“Kartikeshwar@sterlinghofman.com”为 1，“milojevics@mail.com”为 1）。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T15:03:48.463

对于组数，请使用`groups.ngroups`请求参数，该参数将为您提供组数。

[文档](http://wiki.apache.org/solr/FieldCollapsing#Request_Parameters)：-

```
group.ngroups
true/false
If true, includes the number of groups that have matched the query. Default is false. 
```

# mysql - MySql 查询中的错误

> ID：13309697
> 
> 赞同：3
> 
> 时间：2012-11-09T14:14:54.700
> 
> 标签：mysql, joomla, joomla2.5

我想创建一个包含统计信息的团队列表，所以我使用了 2 个函数，每个函数包含 2 个不同的数据库查询：

```
protected function getListQueryweqw() {
    // Create a new query object.
    $db = $this->getDbo();
    $query = $db->getQuery(true);
    $query_string = '';
    $query_string .= 'a.*, COUNT(w.id) AS played_games, SUM(w.team_goals) AS goals,';
    $query_string .= "COUNT(w.match_status = 'draw') AS draw,";
    $query_string .= "COUNT(w.match_status = 'win' ) AS win,";
    $query_string .= "COUNT(w.match_status = 'lose') AS lose,";
    $query_string .= "SUM(w.team_points) AS points, SUM(w.goal_lost) AS goal_lost, w.*";

    // Select the required fields from the table.
    $query->select($query_string);
    $query->from('`#__footsal_teams` AS a');
    $query->join('LEFT', '`#__footsal_resaults` AS w on w.id_team = a.id');

    return $query;
}

protected function getListQuery() {
    // Create a new query object.
    $db = $this->getDbo();
    $query = $db->getQuery(true);
    $query_string = '';
    $query_string .= 'a.*, COUNT(SELECT id FROM `#__footsal_resaults` WHERE id_team = a.id) AS played_games, ';
    $query_string .= "SUM(SELECT team_goals FROM `#__footsal_resaults` WHERE id_team = a.id) AS goals,";
    $query_string .= "COUNT(SELECT id FROM `#__footsal_resaults` WHERE match_status = 'draw') AS draw,";
    $query_string .= "COUNT(SELECT id FROM `#__footsal_resaults` WHERE match_status = 'win') AS win,";
    $query_string .= "COUNT(SELECT id FROM `#__footsal_resaults` WHERE match_status = 'lose') AS lose,";
    $query_string .= "SUM(SELECT team_points FROM `#__footsal_resaults` WHERE id_team = a.id) AS points, SUM(SELECT goal_lost FROM `#__footsal_resaults` WHERE id_team = a.id) AS goal_lost";

    // Select the required fields from the table.
    $query->select($query_string);
    $query->from('`#__footsal_teams` AS a');

    return $query;
} 
```

然而，这两个查询似乎都不起作用，我得到的错误的开始是：

```
JDatabaseMySQLi::query: 1064 ...... 
```

有人可以告诉我我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:27:56.203

你的东西与此类似，只是做了一些调整。

```
protected function getListQueryweqw() {
    $db = JFactory::getDBO();
    $query = $db->getQuery(true);
    $query_string = '';
    $query_string .= 'a.*, COUNT(w.id) AS played_games, SUM(w.team_goals) AS goals,';
    $query_string .= "COUNT(w.match_status = 'draw') AS draw,";
    $query_string .= "COUNT(w.match_status = 'win' ) AS win,";
    $query_string .= "COUNT(w.match_status = 'lose') AS lose,";
    $query_string .= "SUM(w.team_points) AS points, SUM(w.goal_lost) AS goal_lost, w.*";

    $query->select($query_string);
    $query->from('#__footsal_teams AS a');
    $query->join('LEFT', '#__footsal_resaults AS w on w.id_team = a.id');

    return $db->setQuery($query);
}

protected function getListQuery() {
    $db = JFactory::getDBO();
    $query = $db->getQuery(true);
    $query_string = '';
    $query_string .= 'a.*, COUNT(SELECT id FROM #__footsal_resaults WHERE id_team = a.id) AS played_games, ';
    $query_string .= "SUM(SELECT team_goals FROM #__footsal_resaults WHERE id_team = a.id) AS goals,";
    $query_string .= "COUNT(SELECT id FROM #__footsal_resaults WHERE match_status = 'draw') AS draw,";
    $query_string .= "COUNT(SELECT id FROM #__footsal_resaults WHERE match_status = 'win') AS win,";
    $query_string .= "COUNT(SELECT id FROM #__footsal_resaults WHERE match_status = 'lose') AS lose,";
    $query_string .= "SUM(SELECT team_points FROM #__footsal_resaults WHERE id_team = a.id) AS points, SUM(SELECT goal_lost FROM #__footsal_resaults WHERE id_team = a.id) AS goal_lost";

    $query->select($query_string);
    $query->from('#__footsal_teams AS a');

    return $db->setQuery($query);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:54:54.760

好的，我解决它

```
protected function getListQuery() {
    // Create a new query object.
    $db = $this->getDbo();
    $query = $db->getQuery(true);
    $query_string = '';
    $query_string .= 'a.*, (SELECT COUNT(id) FROM `#__footsal_resaults` WHERE id_team = a.id) AS played_games, ';
    $query_string .= "(SELECT SUM(team_goals) FROM `#__footsal_resaults` WHERE id_team = a.id) AS goals,";
    $query_string .= "(SELECT COUNT(id) FROM `#__footsal_resaults` WHERE match_status = 'draw' AND id_team = a.id) AS draw,";
    $query_string .= "(SELECT COUNT(id) FROM `#__footsal_resaults` WHERE match_status = 'win' AND id_team = a.id) AS win,";
    $query_string .= "(SELECT COUNT(id) FROM `#__footsal_resaults` WHERE match_status = 'lose' AND id_team = a.id) AS lose,";
    $query_string .= "(SELECT SUM(team_points) FROM `#__footsal_resaults` WHERE id_team = a.id) AS points, (SELECT SUM(goal_lost) FROM `#__footsal_resaults` WHERE id_team = a.id) AS goal_lost";

    // Select the required fields from the table.
    $query->select($query_string);
    $query->from('`#__footsal_teams` AS a');

    return $query;
} 
```

# eclipse - 在 Eclipse 上安装 Deckline SDK

> ID：13309699
> 
> 赞同：0
> 
> 时间：2012-11-09T14:15:05.760
> 
> 标签：eclipse, sdk

我刚刚下载了 Deckline API，我想在 Eclipse 中整合它。任何想法如何做到这一点。提前致谢。

# vb.net - 仅当作为服务运行时 ODP.NET ORA-12154 TNS 错误

> ID：13309702
> 
> 赞同：4
> 
> 时间：2012-11-09T14:15:18.710
> 
> 标签：vb.net, oracle, service, odp.net

我正在 VB.NET 中编写一个服务，以使用 ODP.NET 将数据持续记录到 Oracle DB

该应用程序最初是作为基本的 Windows 窗体应用程序编写的，并且可以工作，但是当我将其移植到服务时，它似乎看不到 TNS 文件并引发以下错误消息：

```
Service cannot be started. Oracle.DataAccess.Client.OracleException
ORA-12154:TNS:could not resolve the connect identifier specified 
```

因此，当使用以下示例连接字符串时

```
"Data Source= example;User Id= user;Password=password;" 
```

我得到 ORA-12154

如果我直接向应用程序提供完整的 TNS 条目，例如

```
"Data Source= (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = EXAMPLE)(PORT = 1521)) ) (CONNECT_DATA = (SERVICE_NAME = EXAMPLE) ) );User Id= user;Password=password;" 
```

然后它可以工作，但是当我最初将应用程序开发为表单应用程序时，它可以工作。

我假设环境变量可能没有正确设置，但我添加了所需的系统变量（ORACLE_HOME / TNS_ADMIN / 将 oracle 文件夹添加到 PATH）但它不起作用。

正在运行/安装服务的路径不包含括号，我已经使用进程监视器检查了进程，看起来它正在使用正确的环境变量启动（ORACLE_HOME / TNS_ADMIN / PATH 都在那里并且正确） . 用于测试的机器正在运行 Win XP

我在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:36:51.083

我怀疑运行该服务的用户需要对整个 oracle 目录树的文件系统权限。这感觉像是一个权限问题，因为它无法解析连接标识符，但如果不需要，它就可以工作。

尝试为运行该服务的任何用户添加对整个 oracle 客户端目录的读取权限。

# android - 在将图像解码在界限内后，使用样本大小解码图像时出现内存不足错误

> ID：13309706
> 
> 赞同：0
> 
> 时间：2012-11-09T14:15:34.617
> 
> 标签：android

我是android的初学者。在从 SD 卡中一一解码图像（大小为 1600x1200）时，出现以下错误。解码位图后，我必须为 imageview 应用动画才能像幻灯片一样全屏播放图像。我正在使用以下计算在对位图进行边界解码后获取样本大小。

```
while (true) {
    if (width_tmp / 2 < REQUIRED_WIDTH || height_tmp / 2 < REQUIRED_HEIGHT )
        break;
    width_tmp /= 2;
    height_tmp /= 2;
    scale *= 2;
} 
```

谁能帮我解决这个问题。

```
Error:
11-09 13:39:15.100: E/DhcpStateMachine(424): DHCP failed on wlan0: Timed out waiting for DHCP to finish
11-09 13:39:15.300: E/WifiStateMachine(424): IP configuration failed
11-09 13:39:32.840: E/dalvikvm-heap(2511): Out of memory on a 20155408-byte allocation.
11-09 13:39:32.870: E/AndroidRuntime(2511): FATAL EXCEPTION: AsyncTask #1
11-09 13:39:32.870: E/AndroidRuntime(2511): java.lang.RuntimeException: An error occured while executing doInBackground()
11-09 13:39:32.870: E/AndroidRuntime(2511):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.lang.Thread.run(Thread.java:856)
11-09 13:39:32.870: E/AndroidRuntime(2511): Caused by: java.lang.OutOfMemoryError
11-09 13:39:32.870: E/AndroidRuntime(2511):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:527)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:301)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at com.example.testproject1.Imgloader.loadImageFromSDCard(Imgloader.java:60)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at com.example.testproject1.Imgloader.access$0(Imgloader.java:50)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at com.example.testproject1.Imgloader$SDLoadImageTask.doInBackground(Imgloader.java:177)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at com.example.testproject1.Imgloader$SDLoadImageTask.doInBackground(Imgloader.java:1)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
11-09 13:39:32.870: E/AndroidRuntime(2511):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-09 13:39:32.870: E/AndroidRuntime(2511):     ... 5 more
11-09 13:39:32.970: E/dalvikvm-heap(2511): Out of memory on a 20155408-byte allocation.
11-09 13:39:46.530: E/DhcpStateMachine(424): DHCP failed on wlan0: Timed out waiting for DHCP to finish
11-09 13:39:46.749: E/WifiStateMachine(424): IP configuration failed
11-09 13:40:18.180: E/DhcpStateMachine(424): DHCP failed on wlan0: Timed out waiting for DHCP to finish
11-09 13:40:18.399: E/WifiStateMachine(424): IP configuration failed
11-09 13:40:18.399: E/WifiStateMachine(424): Failed 10 times, Disabling 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:17:22.867

Since you havent mentioned the SDK version that you can targeting, the best performance can be obtained through *Render Script*

A sample of its usage can also be found at [http://developer.android.com/guide/topics/renderscript/compute.html](http://developer.android.com/guide/topics/renderscript/compute.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:31:13.510

我使用以下方法根据经验确定的最大内存大小来缩放图像`max_size`，我的目的是 2,000,000。

```
private Bitmap decodeUri(Uri selectedImage) throws FileNotFoundException {

    InputStream inputStream = getContentResolver().openInputStream(
            selectedImage);
    UriHelper uriHelper = new UriHelper(this);
    mSaveFilenameRoot = uriHelper.getFilenameRoot(selectedImage);

    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(inputStream, null, o);
    try {
        inputStream.close();
    } catch (IOException e) {
        e.printStackTrace();
    }

    // Find the correct scale value. A power of 2 is best (fastest)
    // however using the scaling that maximizes the size of the image.
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;

    // maximum size due to heap size limitations
            // Bytes required based on width x height x 4 bytes per pixel
    int max_size = 2000000;
    while (true) {
        if (((width_tmp / scale) * (height_tmp / scale) * 4) < max_size)
            break;
        scale++;
    }

    // Decode the image at the appropriate scale
    inputStream = getContentResolver().openInputStream(selectedImage);
    o = new BitmapFactory.Options();
    o.inSampleSize = scale;
    o.inPreferredConfig = Bitmap.Config.RGB_565;
    Bitmap tmpBitmap = BitmapFactory.decodeStream(inputStream, null, o);
    try {
        inputStream.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return tmpBitmap;
} 
```

# asp.net - CommandButton 事件未触发

> ID：13309716
> 
> 赞同：0
> 
> 时间：2012-11-09T14:16:20.870
> 
> 标签：asp.net, visual-studio-2010

我正在从数据表中填充一个 html 表，每个数据表行的每个表行中都有一个编辑按钮。

我在代码中添加编辑按钮如下：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            if (UserName != null && UserName != "")
            {
                hUserName.Value = UserName;
            }
            else
                if (hUserName.Value != "")
                    UserName = hUserName.Value;
            ShowTrainingEntry();
            ShowUserTraining();  <-------------- this method populates table
            hTID.Value = TrainingID.ToString();
        }
    }

    public void ShowUserTraining()
    {
       ....

                        dTotalTrainingHours += ShowTrainingInPeriod(dv);
       ....
    }

    protected decimal ShowTrainingInPeriod(DataView dv)
    {
       ....
        foreach (DataRowView rowView in dv)
        {
            ....
            Button bEdit = new Button();
            int iTID = Convert.ToInt32(dr["ID"].ToString());
            bEdit.Text = "Edit";
            bEdit.ID = "btnEdit_" + iTID.ToString();
            bEdit.CommandName = "Edit";
            bEdit.CommandArgument = iTID.ToString();
            bEdit.Command += new CommandEventHandler(btnEdit_Click);
            ....
        }
        ....
    }

    public void btnEdit_Click(object sender, CommandEventArgs e)
    {
        clsLog.WriteLog("btnEdit_Click fired.");
        clsLog.WriteLog("\t" + e.CommandName);
        clsLog.WriteLog("\t" + e.CommandArgument.ToString());
        UserName = hUserName.Value;
        TrainingID = Convert.ToInt32(e.CommandArgument);
        ShowTrainingEntry();
        ShowUserTraining();
    } 
```

根据要求 - HTML 表格：

```
<asp:Table ID="tblMain" runat="server" Width="900" CellPadding="3" CellSpacing="0" CssClass="noborder">
</asp:Table> 
```

btnEdit_Click 没有被触发（没有日志条目）。

我已经对此进行了几个小时的研究，我发现唯一一致的是事件必须在 Page_Load 期间连接到按钮，我相信这是正确发生的。

任何帮助将不胜感激。

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:22:03.247

尝试做事件注册

```
btnEdit_Click.Click += new EventHandler(this.btnEdit_Click); 
```

# zend-framework - 更改脚本路径调用视图操作助手

> ID：13309717
> 
> 赞同：1
> 
> 时间：2012-11-09T14:16:22.483
> 
> 标签：zend-framework, zend-view

我想为我的应用程序中的每个模块创建不同的视图脚本。我的结构是这样的：

```
-- application
    -- modules
       -- default
          -- views
             -- default
                -- scripts
             -- fluid
                --scripts 
```

我在 Zend Controller Plugin 中设置了默认脚本路径，preDispatch() 通过请求执行：

```
$view->setScriptPath(sprintf('%s/modules/%s/views/%s/scripts', APPLICATION_PATH, $module, $views)); 
```

一切都很好，直到我从视图中调用操作：

```
$this->action('activity-stream', 'index', 'observation'); 
```

应用程序抛出异常消息：

> 在路径中找不到脚本'index/activity-stream.phtml' (C:/wamp/www/erp/application/modules/observation/views\scripts/;C:\wamp\www\erp\application/modules/user/视图/流体/脚本/）

看起来，当使用 View Action Helper 调用模块时，脚本路径设置不正确。知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:21:11.263

问题没有解决，但我以不同的方式修改了我想要的内容。我的应用程序的任何模块中的每个控制器都继承了我的自定义操作控制器，该控制器继承了 Zend_Controller_Action。在那个自定义控制器里面我有这样的东西：

```
public function init() {
    parent::init();
    $module = $this->_request->getModuleName();
    $config = new Zend_Config_Ini(APPLICATION_PATH . "/configs/modules.ini", $module);
    $layout = isset($config->layout) ? $config->layout : 'default';
    $views = isset($config->views) ? $config->views : 'default';
    $this->view->layout()->setLayout($layout);
    $this->view->setScriptPath(sprintf('%s/modules/%s/views/%s/scripts', APPLICATION_PATH, $module, $views));
} 
```

这不完全是我想要的，但解决了我的问题。

# c# - ASP.NET MVC3 & SQL DB：如何编写每天应该调用一次的程序？

> ID：13309719
> 
> 赞同：3
> 
> 时间：2012-11-09T14:16:40.460
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc-3

我正在编写 ASP.NET MVC3 应用程序并遇到了一个问题。该应用程序是一个留言板。广告可以有两种类型：免费（优先级 2）和付费（优先级 1），为期 2 周。如果用户发布付费广告，它具有最高优先级，并且始终位于留言板的顶部。问题是这样的：必须在2周内所有付费广告自动变为免费，即优先级从1变为2。请告诉我如何处理这个问题？我想我需要编写一个程序，每天自动运行 1 次（在 00:00:01）并检查所有付费广告的有效性，如果超过两周（14 天），自动更改他们的状态从 1 到 2。如果是这样，请告诉我如何自动调用过程 - 通过 SQL（存储过程）或直接从控制器？

这是我的模型文件：

```
public class Ad
    {
        public int AdId { get; set; }
        ...
        public int AdPriority { get; set; }
    } 
```

AdPriority 只能是 1 或 2 ...

在此先感谢您的帮助！

# .net - 使用 XDocument 构建带有嵌套标签的 XHTML

> ID：13309730
> 
> 赞同：0
> 
> 时间：2012-11-09T14:17:29.530
> 
> 标签：.net, linq, c#-4.0, linq-to-xml

我想使用 XDocument（或任何其他类似的库）来生成一些 XHTML。不幸的是，嵌套标签最终处于同一级别，而不是彼此之间。有人可以帮我解决这个简单的问题吗？

到目前为止我所拥有的：

```
var html = new XDocument(
  new XElement("div", new XAttribute("class", "MyTable"),
    new XElement("table",
      new XElement("thead"),
        new XElement("tr"),
          new XElement("th", "Test")))); 
```

这导致以下结果：

```
<div class="MyTable">
  <table>
    <thead />
    <tr />
    <th>Test</th>
  </table>
</div> 
```

这是我想要实现的布局：

```
<div class="MyTable">
  <table>
    <thead>
      <tr>
        <th>Test</th>
      </tr>
    </thead>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:28:59.057

```
new XDocument(
  new XElement("div", new XAttribute("class", "MyTable"),
    new XElement("table",
      new XElement("thead",
        new XElement("tr",
          new XElement("th", "Test")))))) 
```

`thead`查看和上的括号`tr`。除非您希望元素关闭，否则不应关闭它们。我只是将它们移到最后。

# jquery - 超大幻灯片，不同尺寸/纵横比的图像，中心图像

> ID：13309731
> 
> 赞同：1
> 
> 时间：2012-11-09T14:17:30.667
> 
> 标签：jquery, css, jquery-plugins, supersized

我有一个画廊，里面有不同尺寸的图片。有些是纵向的，有些是横向的。使用最新版本的 JQuery 和 Supersized，是否可以：

a）以#supersized ul的100％按比例显示我的所有图像，而不会切断我的横向格式图像，并且在调整窗口大小时所有图像仍按比例调整大小？

b) 将这些图像水平居中，随着它们变小，水平和垂直居中？

或者是否有其他插件我们可以这是我对使用 Wordpress 循环的 Supersized 的调用：

```
 jQuery(document).ready(function($){

                        $.supersized({

                            // Functionality
                            slideshow               :   1,
                            start_slide             :   1,          // Start slide (0 is random)
                            new_window              :   1,          // Image links open in new window/tab
                            image_protect           :   1,          // Disables image dragging and right click with Javascript
                            transition              :   6,  
                            autoplay                :   1,
                            slide_interval          :   7000,
                            transition_speed        :   1000,                                  
                            // Size & Position                         
                            min_width               :   0,          // Min width allowed (in pixels)
                            min_height              :   0,          // Min height allowed (in pixels)
                            vertical_center         :   0,          // Vertically center background
                            horizontal_center       :   0,          // Horizontally center background
                            fit_always              :   1,          // Image will never exceed browser width or height (Ignores min. dimensions)
                            fit_portrait            :   1,          // Portrait images will not exceed browser height
                            fit_landscape           :   1,          // Landscape images will not exceed browser width

                            // Components
                            thumb_links             :   1,
                            thumbnail_navigation    :   1,
                            slide_links             :   0,
                            keyboard_nav            :   1,
                            slides                  :   [       

                            <?php 
                            $category = get_queried_object();
                            $cid = $category->term_id;
                            $args = array('post_type'=>'photo', 'cat'=>$cid);
                            $i = 0;
                            $posts = query_posts( $args );
                            $count = count($posts) - 1;

                            $q = new WP_Query( $args );

                            if ($q->have_posts()) : while ($q->have_posts()) : $q->the_post(); 
                                        $post_thumbnail_id = get_post_thumbnail_id();
                                        $featured_src = wp_get_attachment_image_src( $post_thumbnail_id, 'square' );

                                        if ($i != $count) {     
                                            echo "{ image : '". $featured_src[0] ."', title :''},";
                                        } else {
                                            echo "{ image : '". $featured_src[0] ."', title :''}";
                                        }
                                        $i++;
                                        endwhile; 
                                         ?>
                            ],
                            progress_bar: 0

                        });
                    });
                </script> 
```

这是我的 CSS（特定于类别图像，因为我在页面的其他地方有一个实际的全屏 Supersized）：

```
 body.category #supersized-loader { margin:auto 0; position:fixed; top:50%; left:50%; z-index:0; width:60px; height:60px; margin:-30px 0 0 -30px; text-indent:-999em; background:url(../img/progress.gif) no-repeat center center;}
body.category #supersized {left:240px;display:block; position:fixed; margin:0 auto; overflow:hidden; z-index:1; height:100%; width:100%; /*max-width:1280px;max-height:720px;*/}
body.category #supersized img {width:auto; height:auto; position:relative; display:none; outline:none; border:none;}
body.category #supersized.speed img { -ms-interpolation-mode:nearest-neighbor; image-rendering: -moz-crisp-edges; } /*Speed*/
body.category #supersized.quality img { -ms-interpolation-mode:bicubic; image-rendering: optimizeQuality; }         /*Quality*/

body.category #supersized li { display:block; list-style:none; z-index:-30; position:absolute; overflow:hidden; top:0; left:0; width:100%; height:100%; background:#272727; }
body.category #supersized a { width:100%; height:100%; display:block; }
body.category #supersized li.prevslide { z-index:-20; }
body.category #supersized li.activeslide { z-index:-10; }
body.category #supersized li.image-loading { background:#111 url(../img/progress.gif) no-repeat center center; width:100%; height:100%; }
body.category #supersized li.image-loading img{ visibility:hidden; }
body.category #supersized li.prevslide img, body.category #supersized li.activeslide img{ display:inline; } 
```

# ios - 使用objective-c (ios/mac) 签署文件

> ID：13309734
> 
> 赞同：2
> 
> 时间：2012-11-09T14:17:34.513
> 
> 标签：ios, macos, file, import, sign

我的应用程序创建、导出和导入文件，要知道导入的文件是否是我的，我使用扩展名但这还不够，所以我在文件中添加了一个字符串（作为数据）来检测它，但我再次认为这是不是正确的方法。

你能告诉我objective-c是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:17:44.787

听起来像是[Uniform Type Identifiers](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_intro/understand_utis_intro.html)的工作。UTI 机制提供了基于不同标准识别不同类型数据的能力。

# objective-c - Objective-C 创建动态对象

> ID：13309736
> 
> 赞同：0
> 
> 时间：2012-11-09T14:17:38.937
> 
> 标签：objective-c, xml, cocoa

解析 XML 文件后，我想`textbox`根据 xml 的内容创建动态对象和按钮。
我已经解析了我的 xml 并检索了数据。
我已经为我的方法创建了一个单独的类`XMLParser`并进行了调用`vieDidload`。`mainViewController`是否可以从我的类中调用我的类中的方法`XMLParser`来创建动态对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:00:29.963

嗯......你可以用 NSMutableDictionary 来做到这一点。或者您可以从 xml 填充您之前建模的对象

* * *

基本上只是分配初始化现有对象并设置其属性：

例子：

```
//parse xml
NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path]];
parser.delegate = (id<NSXMLParserDelegate>)self;
[parser parse]; 
```

例如公司对象

```
//callback from parser
- (void)didStartFirmaWithParser:(NSXMLParser*)parser andAttributes:(NSDictionary*)dict {
[[self __didStartEntity:@"RLStoreFirma" withParser:parser] didStartFirmaWithParser:parser andAttributes:dict];
}

//general callback, sets the parsers delegate to THIS new object which then gets filled
- (id)__didStartEntity:(NSString*)name withParser:(AQXMLParser*)parser {
NSEntityDescription *entity = [[store.managedObjectModel entitiesByName] objectForKey:name];
M42StoreEntry *entry = (id)[[NSManagedObject alloc] initWithEntity:entity insertIntoManagedObjectContext:store.managedObjectContext];

entry.store = self->store;
parser.delegate = entry;

return entry;
} 
```

要填充的对象

```
#import "RLStoreFirma(info).h"

@implementation RLStoreFirma (info)
- (void)didStartFirmaWithParser:(AQXMLParser*)parser andAttributes:(NSDictionary*)dict {
}
-  (void)didEndFfkbWithParser:(AQXMLParser*)parser {
self.fkb = currentXMLCharacters;
}
-  (void)didEndFfirWithParser:(AQXMLParser*)parser {
self.name = currentXMLCharacters;
}
-  (void)didEndFirmaWithParser:(AQXMLParser*)parser {
if(!self.name) {
    self.name = self.fkb;
}
[self didEndMainWithParser:(AQXMLParser*)parser];
} 
```

*iphone sdk /它的objc运行时不允许在运行时生成新对象*

* * *

```
#pragma mark parser magic

- (SEL) __startSelectorForElement: (NSString *) element
{
NSString * str = nil;
NSMutableString * eSel = [NSMutableString stringWithString: [[element substringWithRange: NSMakeRange(0,1)] uppercaseString]];

if ( [element length] > 1 )
{
    [eSel appendString: [element substringFromIndex: 1]];

    NSRange range = [eSel rangeOfString: @"-"];
    for ( ; range.location != NSNotFound; range = [eSel rangeOfString: @"-"] )
    {
        NSString * cap = [[eSel substringWithRange: NSMakeRange(range.location+1, 1)] uppercaseString];
        range.length += 1;
        [eSel replaceCharactersInRange: range withString: cap];
    }
}

str = [NSString stringWithFormat: @"didStart%@WithParser:andAttributes:", eSel];

return ( NSSelectorFromString(str) );
} 
```

使 NSParser 更好的语法糖.. 我不能给你所有代码，但我认为这可能会有所帮助 - 我希望

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:36:12.830

您可以创建自己的类，该类将读取解析的值，并在此基础上继续创建所有 GUI 对象。这不是很困难。甚至您可以添加绑定、连接、约束等。实际上，在为我的项目创建框架时，我也做了同样的事情。我不能将代码作为它的版权发布，但我可以分享一些点击。我提到的一个基本提示。

# scala - 带有来自 shell 的 CLI 参数的“sbt run”

> ID：13309738
> 
> 赞同：27
> 
> 时间：2012-11-09T14:17:43.600
> 
> 标签：scala, sbt

我尝试使用 sbt 启动器版本 0.12.1 使用 CLI 参数运行我的 scala 项目。从 scala 提示符运行时它工作正常：

```
$ sbt
[info] (...)
> run sth
(...)
[success] Total time: 0 s, completed Nov 9, 2012 3:04:47 PM 
```

但是，当我想从 shell 中运行它时，例如按照[这个答案](https://stackoverflow.com/questions/11420221/sbt-run-from-outside-the-project-directory)，我得到一个错误：

```
$ sbt "run sth"
[info] (...)
you need to provide source file name
[success] Total time: 0 s, completed Nov 9, 2012 3:07:07 PM
[error] Not a valid command: sth (similar: set, last, shell)
[error] Expected '/'
[error] Expected ':'
[error] Not a valid key: sth (similar: test, state, watch)
[error] sth
[error]    ^ 
```

我的 scala 项目给出了“您需要提供源文件名”信息，以表明 main 没有获得任何 CLI 参数。

它是在以前版本的 sbt 中起作用的东西（在引用的问题中），还是我做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-09T15:25:45.810

问题可能是您将`sbt`启动文件中的参数传递给 Java 的方式。就我而言，它是：

```
java -Xmx4096M -jar `dirname $0`/sbt-launch_0.12.1.jar "$@" 
```

我刚刚确认：它适用于 0.12 和 0.12.1。例如，对于一个只打印其参数的程序，我得到：

```
$ sbt "run-main SomeMain blah blah"
Outut:
[blah, blah] 
```

通过使用`run-main`，您还可以避免 sbt 以某种方式看不到您的主要功能的可能性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T16:05:46.293

这是 0.12.1 启动器中的一个错误：[https ://github.com/sbt/sbt-launcher-package/issues/34](https://github.com/sbt/sbt-launcher-package/issues/34)

# ruby - 如何用更优雅的方式写下这三个案例？

> ID：13309740
> 
> 赞同：5
> 
> 时间：2012-11-09T14:17:49.030
> 
> 标签：ruby, coding-style, conditional-statements

是否可以使此代码更紧凑？我在这里错过了什么吗？

```
 if value < min_rate
      min_rate
    elsif value > max_rate
      max_rate
    else
      value
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:26:20.770

对我来说，这看起来更具可读性和易于理解。希望你喜欢。

```
def some_method    
  return min_rate if value < min_rate
  return max_rate if value > max_rate

  value
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T23:31:30.380

这是完全不同的东西：

```
[min_rate, value, max_rate].sort[1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T14:19:17.373

`max(min(value, max_rate), min_rate)`. 这分别隐藏了`min`和内部的 if 分支（“iffing”？） `max`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T14:22:54.867

三元赋值“更紧凑”，但绝对不是更漂亮：

```
value = (value < min_rate) ? min_rate : (value > max_rate) ? max_rate : value 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T09:46:39.190

你需要的是嵌套三元运算符

```
value < min_rate ? min_rate :
value > max_rate ? max_rate :
value 
```

如果您愿意，您可以将所有内容放在一行中，这样做只是为了便于阅读，这样做是为了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T18:33:09.060

好吧，我同意@pwned，但有一种更优雅的方式。恕我直言，是同样的事情，但阅读效果更好。

```
 def calculate(value)
    return min_rate if value < min_rate
    return max_rate if value > max_rate
    value
  end 
```

我根本不喜欢那种层叠风格。=)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T23:48:12.560

您可以尝试使用实用方法扩展 Range：

```
module RangeHelper
  def bound value
    value < self.begin ? self.begin :
    value > self.end   ? self.end :
    value
  end
end
Range.class_eval { include RangeHelper }

(1..10).bound 5  # => 5
(1..10).bound -5 # => 1
(1..10).bound 15 # => 10 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-24T08:35:43.190

```
class Range
  def limit(value)
    if value> last
      last
    elsif value< first
      first
    else
      value
    end
  end
end

p (-50..50).map{ |n| (10..20).limit(n) }.uniq== (10..20).to_a 
```

> $ 真

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-27T15:11:19.427

自 Ruby 2.4（2016 年 12 月）以来，我们有一个方法可以做到这一点[`Comparable#clamp`](https://ruby-doc.org/core-2.6.3/Comparable.html#method-i-clamp)：

```
value = 15
value.clamp(10, 20) # => 15
value.clamp(0, 10) # => 10
value.clamp(20, 30) # => 20 
```

由于它是 Comparable 的一部分，因此它适用于任何包含 Comparable 的类，例如：

```
"foo".clamp("bar", "baz") # => "baz" 
```

# silverlight - Silverlight URI 加载图像

> ID：13309742
> 
> 赞同：0
> 
> 时间：2012-11-09T14:17:52.797
> 
> 标签：silverlight, silverlight-4.0, uri

我正在尝试在 Silverlight 中加载图像，但是当我将其分配给 this.Image1.Source 时，我不断收到空指针异常。我查看了类似的堆栈问题，但没有一个能解决问题。我的图像文件位于 xap 文件旁边的文件夹中。

```
 public MainPage()
    {
        Uri uri = new Uri("Content/button.png", UriKind.Relative);
        var image = new BitmapImage { UriSource = new Uri("Content/button.png", UriKind.Relative) };
        try
        {
            BitmapImage img = new BitmapImage(uri);
            this.image1.Source = image;
        }
        catch (Exception e)
        {
            string problem = e.Message;
        }

        InitializeComponent();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:23:49.813

好的，我找到了问题，我试图将图像分配给 image1.Source，但尚未创建 image1 - 它是在 InitilizeComponent() 函数中创建的。

# scala - Scala List 对象方法实现

> ID：13309743
> 
> 赞同：0
> 
> 时间：2012-11-09T14:17:58.237
> 
> 标签：scala, functional-programming, scala-collections

我需要在 Scala 中实现我自己的 List 类。我已经实现：

```
trait List[+A] {
  /** The first element */
  def head: A
  /** The rest of the elements */
  def tail: List[A]

  def map[B](f: A => B): List[B]
  def flatMap[B](f: A => List[B]): List[B]
  def filter(f: A => Boolean): List[A]

  // Concatenate two lists
  def concat[B >: A](that: List[B]): List[B] = this match {
    case Empty => that
    case NonEmpty(head, tail) => NonEmpty(head, tail concat that)
  }
}

/** The empty list, also known as Nil */
case object Empty extends List[Nothing] {
  def head = throw new UnsupportedOperationException("Empty.head")
  def tail = throw new UnsupportedOperationException("Empty.tail")

  def map[B](f: Nothing => B): List[B] = Empty
  def flatMap[B](f: Nothing => List[B]): List[B] = Empty
  def filter(f: Nothing => Boolean): List[Nothing] = Empty

  override def toString = "Empty"
} 
```

现在我需要实现 filter、flatMap 和 Map 方法：

```
case class NonEmpty[A](head: A, tail: List[A]) extends List[A] {

    //def map[B](f: A => B): List[B] = ???
      //def flatMap[B](f: A => List[B]): List[B] = ???
      def filter(predicate: A => Boolean): List[A] = {        
      } 
```

例如方法`filter(predicate: A => Boolean): List[A]`我如何遍历这个列表中的每个元素？如何检查给定谓词是真还是假？（试过`if(predicate(head))`- 由于某种原因不起作用。）谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:24:05.663

您需要使用`head`and遍历元素`tail`：

```
def filter(f: A => Boolean): List[A] = {
  def loop(xs: List[A], ys: List[A]): List[A] =
    if (xs == Empty) ys else loop(xs.tail, if (f(xs.head)) NonEmpty(xs.head, ys) else ys)
  loop(this, Empty).reverse
} 
```

这个实现可以定义在`List`. 你最不需要的就是`reverse`方法。您可以以相同的方式实现它`filter`- 使用内部方法遍历所有元素。

您可以使用非尾递归实现代替`reverse`，该实现不得反转并且可以在子类中实现：

```
def filter(f: A => Boolean): List[A] =
  if (f(head)) NonEmpty(head, tail filter f)
  else tail filter f 
```

其他方法可以类似的方式定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:32:24.983

通常，当您只是*住在 Fairyland*并假装（几乎）一切都已经工作时，递归会变得更容易。

假设 filter 已经按照您的要求进行了操作，您将如何使用 filter 使其适用于另一个元素？

好吧，您可以决定是否要包含列表的第一个元素（取决于`f`），并让过滤器“已经工作”来处理其余部分。然后只需连接列表。

```
def filter(f: A => Boolean) : List[A] = {
  if (f(head)) NonEmpty(head, tail.filter(f))
  else tail.filter(f)
} 
```

# ios - 内存泄漏 - NSString & NSURL

> ID：13309745
> 
> 赞同：1
> 
> 时间：2012-11-09T14:18:04.333
> 
> 标签：ios, nsstring, avaudioplayer, memory-leaks, nsurl

```
@property ( nonatomic, strong ) NSURL * urlPath;

self.urlPath = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"bark" ofType:@"caf"]]; 
```

运行 ARC，部署目标 4.3。Instruments 在 self.urlPath = 行上给出了泄漏。

self.urlPath 稍后在视图出现后用于设置 AVSoundPlayer。现在声音播放器上没有显示泄漏，仅在此 NSURL 行上。音频播放，但是当视图被弹出时，会发生内存泄漏。

我现在有任何想法> 12小时......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:45:05.793

Seems to be a memory leak in Core Foundation only in iOS 6.

Therefore filed as a bug:

Bug ID# 12699818\.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:49:26.117

您的播放器正在泄漏，如果您的播放器泄漏，每个播放器也会保留其 URL 和字符串对象。

```
self.player = [[[AVAudioPlayer alloc] initWithContentsOfURL:pingURL error:nil] autorelease]; 
```

如果您声明`player`为保留财产，那么

```
self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:pingURL error:nil]; 
```

将引用计数保留为 2。

```
self.player = nil; 
```

将使其成为 1。

# bash - 在配置文件中导出 PATH

> ID：13309748
> 
> 赞同：0
> 
> 时间：2012-11-09T14:18:09.927
> 
> 标签：bash

这听起来可能非常愚蠢，但无论出于何种原因，我有两个确切的出口：

```
#does not work
export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/dev1/test/jsunpack-n-read-only/depends/js-1.8.0-rc1-src/Linux_All_OPT.OBJ
#works
export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/dev1/test/jsunpack-n-read-only/depends/js-1.8.0-rc1-src/Linux_ALL_OPT.OBJ 
```

它们的创建方式不同，一个是通过使用生成的，`pwd`另一个是通过我对其进行硬编码生成的。大家觉得这里有什么不同吗？:s 我完全糊涂了。是误读字符吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T14:26:16.720

区别在于`"ALL"`，`"All"`大小写就是一切；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:26:25.893

我不确定你有正确的方法。我的建议是保持`$PATH`最小或至少相当小。（如果需要，同样适用`$LD_LIBRARY_PATH`）。

实际上，我建议您有一个`$HOME/bin/`目录（您将其添加一次`PATH`），然后将您的程序放在那里，或者至少一个指向某些可执行程序（或某些可执行脚本）的绝对路径的符号链接。

# emacs - emacs 前进和后退键

> ID：13309750
> 
> 赞同：2
> 
> 时间：2012-11-09T14:18:13.710
> 
> 标签：emacs

我是不寻常的还是emacs前进和后退键的方式错误？

我经常按 Cb 向前，Cf 向后，因为 b 在 f 前面，f 在 b 后面，如（qwerty）键盘上所示（至少这是我的逻辑）

Cn 和 Cp 不会引起这样的问题，因为它们直观上是正确的，例如 p 从 n 'up'

同样与 Ca 和 Ce

很高兴让字母表示某些东西，例如 f 代表前进，b 代表后退，但我的大脑更喜欢实际位置而不是正确的初始位置

还有其他人有这个问题吗？

顺便说一句，dvorak 用户如何应对？

我应该交换键绑定还是那样疯狂？

（可能部分问题是我刚刚开始使用 no-easy-keys.el 让自己摆脱箭头键）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:43:32.283

如果您愿意摆脱默认设置，您可能需要查看 Xah Lee 的 ErgoEmacs 绑定。

[http://ergoemacs.org/emacs/ergonomic_emacs_keybinding.html](http://ergoemacs.org/emacs/ergonomic_emacs_keybinding.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:33:31.580

让我在著名的 SO 内容纳粹删除您的问题之前快速回答，因为您的问题过于开放。标准 104 键 PC 键盘上的 Emacs 键绑定是一场灾难。我个人从来没有混淆 Cf 和 Cb，但我确实因为一直按 Ctrl 而感到紧张，[直到我将 Caps Lock 重新定义为 Ctrl](http://emacswiki.org/emacs/MovingTheCtrlKey)。从那时起，Emacs 奇迹般地成为了我机器上最舒适的软件。但回到你原来的问题，我认为我从来没有遇到过混淆 Cb 的问题，因为它很难达到。尽管如此，尽管我非常喜欢 Emacs，但我必须承认*vi*非常适合分别使用 h、j、k、l 键来表示返回、向下、向上和向前。我听说 Emacs 有一个名为 'vile' 的插件，但我从未尝试过。[那可能对你有帮助](http://www.emacswiki.org/emacs/ViKeys)。

# opengl - 使用红皮书中的代码使用 opengl 绘制球体，但半径不同

> ID：13309755
> 
> 赞同：1
> 
> 时间：2012-11-09T14:18:46.503
> 
> 标签：opengl, geometry

我已经阅读了红皮书中关于绘制球体的代码，但它是一个半径 = 1 的单位球体。它从一个二十面体开始，定义了一个 x 和 az 以使所有 12 个顶点与中心之间的距离等于 1。那么如果我需要更大或更小的球体怎么办？我按比例更改了 x 和 z，但它不起作用。我应该如何设置 x 和 z 的值以获得更小的球体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:41:44.277

在绘制球体之前应用缩放变换。如果您使用的是固定功能管道，您可以使用`glScalef(...)`. 否则，您将不得不自己构建[缩放矩阵](http://en.wikipedia.org/wiki/Scaling_%28geometry%29)。

# php - 从文本块中提取和删除 URL

> ID：13309757
> 
> 赞同：3
> 
> 时间：2012-11-09T14:18:55.457
> 
> 标签：php, regex, preg-replace

我有这段文字：

```
$text = 'This just happened outside the store http://somedomain.com/2012/12/store there might be more text afterwards...'; 
```

它需要转换为：

```
$result['text_1'] = 'This just happened outside the store';
$result['text_2'] = 'there might be more text afterwards...';
$result['url'] = 'http://somedomain.com/2012/12/store'; 
```

这是我当前的代码，它确实检测到了 url，但我只能从文本中删除它，我仍然需要在数组中单独的 url 值：

```
$string = preg_replace('/https?:\/\/[^\s"<>]+/', '', $text);
//returns "This just happened outside the store  there might be more text afterwards..." 
```

有任何想法吗？谢谢！

**时间解决方案**（可以优化吗？）

```
$text = 'This just happened outside the store http://somedomain.com/2012/12/store There might be more text afterwards...';
preg_match('/https?:\/\/[^\s"<>]+/',$text,$url);
$string = preg_split('/https?:\/\/[^\s"<>]+/', $text);
$text = preg_replace('/\s\s+/','. ',implode(' ',$string));
echo '<a href="'.$url[0].'">'.$text.'</a>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:43:17.800

您需要将其存储在变量中还是只需要将其存储在 ahref 中？这个怎么样？

```
<?php
$text = 'This just happened outside the store http://somedomain.com/2012/12/store There might be more text afterwards...';
$pattern = '@(.*?)(https?://.*?) (.*)@';
$ret = preg_replace( $pattern, '<a href="$2">$3</a>', $text );
var_dump( $ret ); 
```

$1、$2 和 $3 对应第 1、2、3 个括号

输出将是

```
<a href="http://somedomain.com/2012/12/store">There might be more text afterwards...</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:22:57.547

[你可以使用preg_split](http://php.net/manual/en/function.preg-split.php)在正则表达式上拆分你的字符串，给你一个数组

```
$result = preg_split('/(https?:\/\/[^\s"<>]+)/', $the_string, -1, PREG_SPLIT_DELIM_CAPTURE);
// $result[0] = preamble
// $result[1] = url
// $result[2] = possible afters 
```

# button - 在 cocos2D 中，如何根据“装备”场景中选择的法术显示不同的“法术”按钮精灵

> ID：13309760
> 
> 赞同：1
> 
> 时间：2012-11-09T14:19:09.477
> 
> 标签：button, cocos2d-iphone, sprite

这是我的第一篇文章，在过去的几个月里一直受益于其他人的问题和答案，所以首先感谢 stackoverflow 和所有贡献者！

对于我的问题 - 在我的主要游戏场景中，我希望有拼写按钮，如果选中，它会调用特定的方法。很简单。

我的困难是用户可以在“装备”场景中预先选择不同的法术，我需要法术按钮来显示不同的精灵，具体取决于预先选择的法术。因此，如果选择了法术 1 和 2，则游戏场景会显示游戏场景中场景 1 和 2 的精灵；而如果选择了法术 3 和 4 等，则显示法术 3 和 4 的精灵。

到目前为止，我的困难一直是根据所选能力选择要包含在菜单按钮中的精灵。

我还没有发布任何代码，因为我对编码本身比较有信心，它只是想弄清楚如何构造代码来解决这个问题。

有关信息：装备场景会将变量保存到保存文件中，然后游戏玩家将从保存文件中加载变量以确定要显示的精灵。

在此先感谢所有人 - 如果我违反任何规则或礼仪，或未包含正确的信息，请告诉我，我会尽快修改！

再次感谢！芝士汉堡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:56:29.613

任何一个：

1.  使用在场景转换中幸存的对象单例（例如 GameState 单例）来存储法术

2.  使用 NSUserDefaults 存储法术并在转换场景后将它们加载回来

下面的链接向您展示了如何执行此操作：

[http://www.karnakgames.com/wp/2010/12/basic-game-data-and-state-persistence-with-nsuserdefaults/](http://www.karnakgames.com/wp/2010/12/basic-game-data-and-state-persistence-with-nsuserdefaults/)

# postgresql - 无法从 NHibernate.Driver.NpgsqlDriver 创建驱动程序

> ID：13309761
> 
> 赞同：6
> 
> 时间：2012-11-09T14:19:11.370
> 
> 标签：postgresql, nhibernate, npgsql

我继承了一个 C#/NHibernate/MS SQL Server 项目，并且是 NHibernate 的新手。给我的首要任务之一是将数据库从 MS SQL Server (2008 R2) 迁移到 Postgresql 9.2。我正在使用 Npgsql 2.0.12（.net 2.0 版本）。Mono.Security.dll 和 Npgsql.dll 包含在我的项目引用中，它们存在于我的 bin 目录中。当代码执行以下行时：

```
SessionFactory.OpenSession(); 
```

消息引发异常

“无法从 NHibernate.Driver.NpgsqlDriver 创建驱动程序。”

在网上搜索，给了我一些想法，但都没有奏效。我继承的这段代码在使用 MS SQL Server 没有问题的几个客户端上进行生产。这是我的 hibernate.cfg.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory>
    <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
    <property name="dialect">NHibernate.Dialect.PostgreSQLDialect</property>
    <property name="connection.driver_class">NHibernate.Driver.NpgsqlDriver</property>
    <property name="connection.connection_string">server=localhost;Port=5432;Database=vehicletracker;User Id=postgres;Password=********;</property>
  </session-factory>
</hibernate-configuration> 
```

我没有忘记包括“使用 Npgsql；”，它就在那里。有什么建议么？

问候，

乙

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T21:45:17.227

我找到了自己问题的答案。有几个特定于我的工作环境的问题，但最终 Mono.Security.dll 和 Npgsql.dll 在我的最终输出目录中不可用。这两个文件存在于我的数据访问层（一个类库）的 bin 目录中，但不在称为类库的测试项目的 bin 目录中。现在一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:49:55.263

If you're using NuGet for the nhibernate libraries try uninstalling the packages and reinstall them. I'm sure there is a more efficient way someone knows of to fix this kind of issue but for me it solved this exact issue.

# php - 如果网络外的用户访问了网站的链接，是否可以隐藏该链接？

> ID：13309772
> 
> 赞同：0
> 
> 时间：2012-11-09T14:19:34.390
> 
> 标签：php, system

很难解释，但我们有这个提议的医院系统，我们正处于编码阶段，但问题是我们无法将其可视化，因为系统需要基于互联网。我们有3个模块，分别是计费、员工管理和临床系统。这三个模块显然只有医院内的工作人员才能访问。但我们所做的是将这 3 个模块链接到网站本身。因此，任何用户都可以看到他们没有业务的链接，但他们仍然可以看到它。怎么能避免呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:23:54.300

使用客户端的 IP 地址来确定是否允许用户查看链接。

在 PHP 中，客户端的 IP 地址通常可以在[`$_SERVER['REMOTE_ADDR']`](http://www.php.net/manual/en/reserved.variables.server.php). 但是，如果 Web 服务器位于反向代理之后，则所有请求都来自反向代理。在这种情况下，请查阅反向代理的文档，了解它发送哪些 HTTP 标头以通知服务器有关客户端的实际 IP 地址。

医院可能有一个IP 地址的[CIDR](http://de.wikipedia.org/wiki/Classless_Inter-Domain_Routing)块，因此您可以测试客户端是否在该块内，而无需实际在列表中搜索 IP 地址。

如果医院为患者和客人提供 WLAN，则应该排除这些 IP 地址。

# twitter-bootstrap - 您如何在 BootStrap 中设置最大宽度和网格列？

> ID：13309777
> 
> 赞同：2
> 
> 时间：2012-11-09T14:19:45.640
> 
> 标签：twitter-bootstrap

我想将宽度设置为 960px。目前是979px。我在 variables.less 中看到你得到：

```
@navbarCollapseWidth:             960px; 
```

更重要的是，诸如：

```
@gridColumns:             16;
@gridColumnWidth:         60px;
@gridGutterWidth:         10px; 
```

但是，更改这些不会影响任何标准 Bootstrap 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:49:17.520

这是你想要的？

[如何使用 Twitter Bootstrap 2 获得 16 列响应式布局？](https://stackoverflow.com/questions/10233260/how-do-i-get-a-16-column-responsive-layout-with-twitter-bootstrap-2)

它指的是`line 517 of the mixins`你必须寻找`_mixins.less`（我猜是 .less 因为我使用的是 .scss 版本）

另一件小事（只是一个错字？）：使用 16 列`@gridColumnWidth: 60px`时，本身总计为 960px :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T09:37:33.237

您可能想要编辑引导文件中的媒体查询，因此它也没有设置为 979px 最大宽度或最小宽度，这个数学可以帮助您正确计算列和装订线的大小

```
@gridRowWidth: (@gridColumns * @gridColumnWidth) + (@gridGutterWidth * (@gridColumns - 1)); 
```

# knockout.js - ko.observableArray 上的 ko.DirtyFlag 总是脏的

> ID：13309778
> 
> 赞同：3
> 
> 时间：2012-11-09T14:19:49.057
> 
> 标签：knockout.js, ko.observablearray, kolite

在我的视图模型中，我有以下代码：

```
var self = this;
self.Name = ko.observable(data.Name);
var mapped = $.map(data.Addresses, function (item) { return new Address(item) });
self.AddressList = ko.observableArray(mapped);
self.dirtyFlag = new ko.DirtyFlag([self.Name, self.AddressList]); 
```

由于`AddressList`.

有没有办法指定什么值不脏或者什么时候开始监控变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T01:48:10.167

听起来您的地址中的某些内容可能`select`与绑定绑定到 a ，`value`并且它正在初始绑定上写入一个值。它将数字更改为字符串。您始终可以选择`reset`在应用绑定后调用标志（调用`self.dirtyFlag.reset()`

# actionscript-3 - 如何强制编译器编译我项目中的所有类？

> ID：13309779
> 
> 赞同：1
> 
> 时间：2012-11-09T14:19:51.643
> 
> 标签：actionscript-3, flash-builder

我使用的是 Adob​​e® Flash® Builder™ 4.6，以前的版本也存在这个问题。

出于某种原因，我正在使用

```
cls = applicationDomain.getDefinition(name) as Class; 
```

获取对象的构造函数，然后创建我的模块类的实例。因此使编译忽略我的模块类，因为它们与我的主类无关。如何强制其他类也编译到我的 swf 或 swc 文件中？我没有找到可以调整编译选项的地方。

现在我用这种方式来解决我的问题，在程序入口的最开始。

```
if(1+1==3){
    //never be run but do make classes merge into swf files.
    new MyModule();
} 
```

我有数百个这样的模块，我希望我能找到一种方法来永久解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:31:01.927

您需要使用该类使其在 swf 中编译。
不是最好的方法，但

```
private var someVar:someClass; 
```

使用“new”关键字将导致运行时为对象分配内存，因此您不想使用它。

整个加载模块和编译类都有代码味道。
你最好让模块中的类实现一个接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T07:49:27.327

你可以试试这个

```
package
{
public class IncludeClasses
{
    import com.abc.db.Database;Database;
    import com.abc.logs.RemoteLogTarget; RemoteLogTarget;
    import com.abc.logs.LocalLogTarget; LocalLogTarget;
    import com.abc.exception.GlobalExceptionHandler; GlobalExceptionHandler;
    import com.abc.utils.NetConnectionMonitor;NetConnectionMonitor;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:07:05.703

您需要至少一个对您的类的严格引用才能出现在项目中。我使用 Array 类型的静态变量来填充我需要的所有类，如果可以的话，我永远不会真正引用该数组。

```
private static var dummy:Array=[OneClass, AnotherClass, Class01, Etc]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T20:51:03.530

您也可以通过设置编译器标志来做到这一点。 [关于应用程序编译器选项](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html)

请参阅： *包含库库 [...]*

> 仅包含作为 include-classes 编译器选项所包含的类的继承依赖项的类。
> 
> 默认值为假。
> 
> 这是一个高级选项。如果您正在创建自定义 RSL 并希望将尽可能多的类外部化，则可以使用此编译器选项。例如：

```
compc -include-classes mx.collections.ListCollectionView 
-include-inheritance-dependencies-only=true 
-source-path . -output lcv2 -directory 
```

# android - 在 AndEngine 中动态操作 TMX 映射

> ID：13309783
> 
> 赞同：1
> 
> 时间：2012-11-09T14:19:56.863
> 
> 标签：android, andengine, tmx

是否可以在 AndEngine 中动态操作加载的 TMX 地图？例如，在平铺地图上添加对象、拖动对象或调整地图大小？

请有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:05:29.283

您只能获取 TiledMap 和 TMXTile 的参数。您将无法设置参数并将它们保存在 .tmx 文件中（android 不允许您修改 /res 和 /assets 文件）。

您只能修改您的 tmx 图层，例如：设置比例、设置 alpha 等。

# ios - 进入applicationWillEnterForeground后如何刷新View？

> ID：13309784
> 
> 赞同：6
> 
> 时间：2012-11-09T14:19:57.857
> 
> 标签：ios, uiviewcontroller

> **可能重复：**
> [如何判断控制器何时从后台恢复？](https://stackoverflow.com/questions/3535907/how-to-tell-when-controller-has-resumed-from-background)

用户进入 applicationWillEnterForeground 后如何刷新视图？

我想完成召回例如 HomeViewController。

我在 HomeViewController 中有更新功能，我想在用户进入时调用更新功能并重新加载表数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T14:30:49.977

任何类都可以注册到`UIApplicationWillEnterForegroundNotification`，并做出相应的反应。它不保留给应用程序委托，有助于更好地分离源代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T14:40:11.517

为您的 HomeViewController 创建一个像这样的 viewDidLoad 方法

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(yourUpdateMethodGoesHere:)
                                                 name:UIApplicationWillEnterForegroundNotification
                                               object:nil];
}

// Don't forget to remove the observer in your dealloc method. 
// Otherwise it will stay retained by the [NSNotificationCenter defaultCenter]...
- (void) dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
} 
```

如果你的 ViewController 是一个 tableViewController 你也可以直接调用 reload data 函数：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:[self tableView]
                                             selector:@selector(reloadData)
                                                 name:UIApplicationWillEnterForegroundNotification
                                               object:nil];

}
- (void) dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
} 
```

或者你可以使用一个块：

```
[[NSNotificationCenter defaultCenter] addObserverForName:UIApplicationWillEnterForegroundNotification
                                                  object:nil
                                                   queue:[NSOperationQueue mainQueue]
                                              usingBlock:^(NSNotification *note) {
                                                  [[self tableView] reloadData];
                                              }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:30:45.873

您可以在应用程序委托类中声明一个指向 HomeViewController 对象的属性。然后您可以在 applicationWillEnterForeground 中调用您的更新函数。

# shell - 如果使用shell脚本以数字开头，如何删除文本文件中的行

> ID：13309788
> 
> 赞同：1
> 
> 时间：2012-11-09T14:20:26.203
> 
> 标签：shell, text

我想知道一种读取文件并删除所有以数字开头的文本行的好方法，即使用一些shell脚本[0-9]。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:23:26.767

你可以使用这样的东西：

```
grep -v '^[0-9]' input-file > output-file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:06:54.857

Using sed:

```
sed '/^[0-9]/d' file > outfile 
```

If you have GNU sed, the original file itself can be updated:

```
sed -i '/^[0-9]/d' file 
```

# java - 在并发系统中读取 ArrayList

> ID：13309790
> 
> 赞同：6
> 
> 时间：2012-11-09T14:20:38.243
> 
> 标签：java, list, concurrency, arraylist

我有一个简单的`ArrayList`，我通过 Java 并发`ArrayList`从多个s 提供这个。`Thread`每个`Thread`都只会读取 this 的同一个实例`ArrayList`。读取操作过程中是否有出错的可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:25:40.757

如果列表已完全填充并且所有线程始终以只读方式访问，则不会有问题。如果有写操作，则需要同步所有对列表的访问，或者使用并发列表（如`CopyOnWriteArrayList`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T14:26:21.173

如果不再有写入，则使用它使其不可变`Collections.unmodifiableList`，然后忘记读取问题。

# android - 在现有的 android 调用应用程序中添加一个额外的按钮？

> ID：13309796
> 
> 赞同：3
> 
> 时间：2012-11-09T14:21:02.520
> 
> 标签：android, exists

我想要的是，当我的安卓手机有来电时，会出现一个通话屏幕。如果有按钮，例如 1）参加呼叫 2）结束呼叫，我想更新该屏幕。我想在该屏幕上添加第三个按钮，那么我该怎么做？或者像拨号栏一样，我想做一些更新，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:24:22.497

不能这样做...（除非您正在为您的设备编译整个 Android 框架）

# c# - 旧 ASP.NET 站点中输出的 Html 编码

> ID：13309799
> 
> 赞同：1
> 
> 时间：2012-11-09T14:21:07.387
> 
> 标签：c#, asp.net, security, httprequest

我有一个旧的 ASP.Net 站点（最近升级到 .NET 4.0），它从未打开过请求验证，它根本没有对任何用户输入进行 Html 编码。

我的解决方案是打开请求验证并在 Global.asax 中捕获 HttpRequestValidationException 并将用户重定向到错误页面。我不会对用户输入进行 Html 编码，因为我必须在数千个地方进行编码。我希望我的方法能够阻止任何 XSS 向量被保存到数据库中。

但是，如果数据库中已经存储了任何 XSS 向量，我认为我还应该对所有输出进行 Html 编码。不幸的是，我的开发和测试资源非常有限，无法成功实现这一目标。我想出了一个我需要经历的变化列表：

1.  搜索并用 <%: %> 替换所有 <%= %>。
2.  搜索并用文字替换所有标签并添加 Mode="Encode"。
3.  用 HtmlEncode 包装所有 eval()。

我的问题是：

1.  有没有更简单的方法可以打开所有输出以自动进行 Html 编码？
2.  我错过了上面列表中的任何内容吗？
3.  我应该注意哪些陷阱？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:09:00.863

> Search and Replace all <%= %> with <%: %>.

Don't forget the <%# and Response.Write which will be harder to replace

> Search and Replace all Labels with Literals and add Mode="Encode".

But you will loose all formatting on the previously generated spans, break the DOM and the corresponding js/css

You would also have to search all Literals with Mode="PassThrough" and set them to Encode

> Wrap all eval() with HtmlEncode.

Yes, it seems like a subset of the <%# matter above

Also, you could have some custom controls with funky render method

Assuming there is "only" a relational DB as back-end, If I had access to the DB, I would first go on identifying the problematic tables and columns which values contain markup.

I would then :

*   cleanup as best as I can those values in DB.
*   ensure HtmlEncoding of the corresponding outputs in my pages

I could then go for a basic global replace <%= becoming <%: and sanitize outputs on the long run.

# php - Joomla 2.5 在我的模块中呈现内容插件

> ID：13309800
> 
> 赞同：3
> 
> 时间：2012-11-09T14:21:09.107
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

我想在我的模块中呈现 Joomla 内容插件，该怎么做？

这是我的代码

```
<pre>

<?php
defined( '_JEXEC' ) or die;

$db = JFactory::getDBO();   
$query = $db->getQuery(true);  
$query->select('stendas_id, stendas_lat, stendas_lon, stendas_name, stendas_description, stendas_kaire, stendas_desine')
        ->from('#__stendukai_stendai')
        ->where('published = 1');  
$db->setQuery($query);

$rows = $db->loadObjectList();

require JModuleHelper::getLayoutPath('mod_stendulist', $params->get('layout', 'default'));

</pre> 
```

这是**default.php**文件代码

```
<pre>
<?php
defined( '_JEXEC' ) or die;

$document = JFactory::getDocument();

$document->addStyleSheet('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css');     
$document->addScript("http://maps.google.com/maps/api/js?sensor=false&language=en");  
$document->addScript(JURI::base() . 'modules/mod_stendulist/libs/jquery.min.js');
$document->addScript(JURI::base() . 'modules/mod_stendulist/libs/jquery-noconflict.js');
$document->addScript('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js');  
$document->addScript(JURI::base() . 'modules/mod_stendulist/libs/jquery.ui.map.js');
$document->addScript(JURI::base() . 'modules/mod_stendulist/libs/frontend_map.js');
$document->addScript(JURI::base() . 'modules/mod_stendulist/libs/jquery.ui.map.services.js');
$document->addScript(JURI::base() . 'modules/mod_stendulist/libs/jquery.ui.map.extensions.js');

?>

<div id="themapstuff">
    <table class="stendu_table" border="0" cellpadding="0" cellspacing="0" height="151" width="406">
       <tbody>
         <tr><th width="33">Nr.</th><th width="115">Stendai</th><th width="74">Kairė</th><th width="74">Dešinė</th></tr>
    <?php $i=1; ?>

         <?php foreach ($rows as $row): ?>
         <tr data-gmapping='{"id":" <?php echo $row->stendas_id ?>","latlng":{"lat": <?php echo $row->stendas_lat ?>,"lng": <?php echo $row->stendas_lon ?>},"tags":" <?php echo $row->stendas_name ?>"}'>
            <td><?php echo $i++ ?></td>
            <td> <span class="title"><?php echo $row->stendas_name ?></span> 
               <div class="info-box">
                  <?php echo $row->stendas_description;?>
               </div>
            </td>
            <td><?php echo $row->stendas_kaire ?></td>
            <td><?php echo $row->stendas_desine ?></td>

         </tr>
         <?php endforeach ?>
       </tbody>
    </table>      
</div> 
</pre> 
```

如果可能的话，我最感兴趣的是在其中运行内容插件

`$row->stendas_description`

因为这是实际内容，其他人是 id 和别名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T11:50:34.113

如果将 Prepare Content 参数设置为 true，则自定义 html 模块会呈现插件。

```
JPluginHelper::importPlugin('content');

$module->content = JHtml::_('content.prepare', $module->content, '', 'mod_custom.content'); 
```

[https://github.com/joomla/joomla-cms/blob/master/modules/mod_custom/mod_custom.php#L14](https://github.com/joomla/joomla-cms/blob/master/modules/mod_custom/mod_custom.php#L14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:43:13.633

我从未测试过这个扩展，但它可能是你正在寻找的。

[http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/embed-a-include/6713](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/embed-a-include/6713)

尽管它只显示 Joomla 1.5 图标，但它也与 Joomla 1.7 兼容，因此也与 2.5 兼容。此扩展允许在模块中执行插件。

希望这可以帮助。

# python - python将多个字符串分配给一个变量？如何运行此代码？

> ID：13309801
> 
> 赞同：1
> 
> 时间：2012-11-09T14:21:10.223
> 
> 标签：python, while-loop

所以我是新手，我正在尝试为剧院票务系统编写程序。这只是我试图找出如何使用 while ，所以如果输入错误，我可以阻止程序执行下一步，这是 while 代码：（我在某个地方得到了它，我改变了一些东西）

```
Movie_is = "a"# i want to assign more than one string like "A","b","B" etc
movie_slection = True

while movie_slection:
Choose=raw_input("Choose your movie by typing the correct letter")
if Choose != Movie_is:
    print 'Wrong input'
    movie_slection = False 
elif Choose == Movie_is:
    print 'Your movie is :'

else:
print 'Wrong input.'

print 'Done'</i> 
```

这是我想在其中使用第一个代码的另一个代码，如果我输入 d 它会进入门票选择：

```
print "a.Fight Club (1999)", "b.Freaks (1932)","c.Barton Fink (1992)"

Movie_is=raw_input("Choose your movie by typing the correct letter")
if Movie_is == "a" or Movie_is== "A":
 movie = "Fight Club (1999)"
elif Movie_is == "b" or Movie_is=="B":
 movie = "Freaks(1932)"
elif Movie_is == "c"  or Movie_is== "C":
 movie = "Barton Fink (1992)"
else:
 movie = "You have entered a wrong letter ,\n note:this application is case sensitive"
print " Selected Movie : ", movie

# the tickets selection
Tickets_is=raw_input(" Select Tickets: a.(Adult) b.(Children) c.(Senior) d.(Student)")
if Tickets_is=="a" or Tickets_is== "A"  :  
tickets="""
    ||       SCREEN         ||

     1 2 3 4 5 6 7 8 9 10

  """

elif Tickets_is == "b" or Tickets_is=="B":
 tickets= """
    ||       SCREEN         ||

     1 2 3 4 5 6 7 8 9 10

  """
elif Tickets_is == "c" or Tickets_is== "C":
 tickets= """
    ||       SCREEN         ||

     1 2 3 4 5 6 7 8 9 10

  """
elif Tickets_is == "d" or Tickets_is== "D":
 tickets= """
    ||       SCREEN         ||

     1 2 3 4 5 6 7 8 9 10

  """

else:
 tickets= "You have entered a wrong input , please type a valid seat number"
print "Seats: ",tickets </i> 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:26:14.857

您将需要使用列表而不是字符串：

```
movies = [ 'a', 'b', 'c' ]
for movie in movies:
    print movie 
```

但是你可能想要一个[类](http://docs.python.org/2/tutorial/classes.html)来定义一部电影。这使您可以在一个地方收集有关一部电影的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:27:42.920

您将需要查看 Python 列表。像这样的东西

```
movie_is = ['a', 'b', 'c']
if choice not in movie_is:
    print 'Wrong input' 
```

有关列表的更多信息，请参阅[http://docs.python.org/2/tutorial/datastructures.html](http://docs.python.org/2/tutorial/datastructures.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:28:14.423

你想要这样的东西吗？：

```
>>> choose = "a"
>>> movie_names = ["A", "a"]

>>> choose in movie_names
True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T23:04:22.527

[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)将比您当前使用的方法有用得多。我不会根据您的需要修改脚本来执行 while 循环，但您应该能够轻松地将其转换。

```
movies={'a':'Movie A','b':Movie B'}
if choice.lower() is not in movies.keys():
     print 'Invalid choice. Try again'
else:
     print 'You have selected '+movies[tolower(choice)] 
```

正如在其他地方所说，类将是一个更好的选择，因为您可以包含更多数据。但是如果你确定你只想要电影的名字，你可以这样做。

# c# - HttpWebRequest 序列

> ID：13309804
> 
> 赞同：1
> 
> 时间：2012-11-09T14:21:27.433
> 
> 标签：c#, .net, http, web, httpwebrequest

我目前正在自动化管理 FTP 用户的 Web 界面。

我正在尝试使用 HttpWebRequest 来执行此操作，我有一个呼叫将我记录在该站点上，而第二个呼叫是为 FTP 访问添加一个新用户。

我已经在浏览器中尝试了我的两个 url，它们都可以工作，它们最终创建了一个用户。

```
string login = "https://www.ftpsite.net/./panel/index.php?txvUsername=myaccount&txvPassword=myPassword&submitButton=Login"; 
```

当我在浏览器地址栏中输入它时，这会让我登录。

创建用户的第二次调用如下。

```
string createUser = "https://www.ftpSite.net/panel/ftpsites/updatelogin?login_id=&login=toto123&realname=realnametoto&homedir=root&passwd=superpassword11&expdate=01-01-2100&neverExpire=on&quota_value=0&quota_unit=GB&group_id=0&status=on&ftp=on&filelist=on&ftp_download=on&http=on&web_filelist=on&web_download=on&email="; 
```

当我在浏览器的地址栏中输入它时，如果它跟随我们登录的用户，这将创建一个用户。

我的问题是我正在尝试使用 HttpWebRequest 执行此操作但没有成功。我可以让自己登录，但是当我尝试创建用户时，它似乎返回一个“错误”错误代码，说我已经创建了太多用户，但事实并非如此，因为我可以在该调用之后创建更多用户。这是我与 HttpRequest 一起使用的代码

```
 _datCookie = new CookieContainer();
        HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(login);
        httpWebRequest.Method = "POST";
        httpWebRequest.CookieContainer = _datCookie;

        WebResponse response = httpWebRequest.GetResponse();
        referer = response.ResponseUri.AbsoluteUri;

        Stream requestStream = response.GetResponseStream();
        StreamReader streamReader = new StreamReader(requestStream);
        _datCookie = httpWebRequest.CookieContainer;
        response.Close();

        httpWebRequest = (HttpWebRequest)WebRequest.Create(createUser);
        httpWebRequest.CookieContainer = _datCookie;
        httpWebRequest.Referer = referer;
        httpWebRequest.Method = "POST";

        response = httpWebRequest.GetResponse();

        requestStream = response.GetResponseStream();
        streamReader = new StreamReader(requestStream);

        webBrowser.DocumentText = streamReader.ReadToEnd();

        response.Close(); 
```

[我在这里](http://i.imgur.com/UtIbz.jpg)捕捉并试图模仿但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:23:05.697

~~您确定它们应该是 POST 请求吗？URL 似乎包含查询字符串中的所有字段，这表明它们应该是 GET 请求。~~

根据 Fiddler 屏幕截图，您需要使用正文中的字段而不是查询字符串发出 POST 请求：

```
var cookies = new CookieContainer();

// Request 1 : Login
var request = (HttpWebRequest)WebRequest.Create("https://www.ftpsite.net/./panel/index.php");
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.CookieContainer = cookies;

string postData = "txvUsername=myaccount&txvPassword=myPassword&submitButton=Login";
byte[] postBytes = Encoding.Default.GetBytes(postData);
request.ContentLength = postBytes.Length;
using (Stream bod = request.GetRequestStream())
{
   body.Write(postBytes, 0, postBytes.Length);
}

WebResponse response = request.GetResponse();
string referer = response.ResponseUri.AbsoluteUri;

// Request 2 : Create user
request = (HttpWebRequest)WebRequest.Create("https://www.ftpSite.net/panel/ftpsites/updatelogin");
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.CookieContainer = cookies;

postData = "login_id=&login=toto123&realname=realnametoto&homedir=root&passwd=superpassword11&expdate=01-01-2100&neverExpire=on&quota_value=0&quota_unit=GB&group_id=0&status=on&ftp=on&filelist=on&ftp_download=on&http=on&web_filelist=on&web_download=on&email=";
postBytes = Encoding.Default.GetBytes(postData);
request.ContentLength = postBytes.Length;
using (Stream bod = request.GetRequestStream())
{
   body.Write(postBytes, 0, postBytes.Length);
}

response = request.GetResponse();
requestStream = response.GetResponseStream();
streamReader = new StreamReader(requestStream);
webBrowser.DocumentText = streamReader.ReadToEnd();
response.Close(); 
```

# c# - SQL 脚本 USE 语句 - C#

> ID：13309805
> 
> 赞同：0
> 
> 时间：2012-11-09T14:21:35.887
> 
> 标签：c#, sql-server

在我的 C#.NET 应用程序中，我使用 Microsoft.SqlServer.Management.Server.ConnectionContext.ExecuteNonQuery() 针对 SQL Server 数据库运行脚本。

我想知道是否有办法确保脚本不包含“USE”语句。

我必须确保脚本是针对特定数据库运行的，并且在执行时它不会更改数据库。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:30:31.933

> 必须确保脚本是针对特定数据库运行的，并且在执行时不会更改数据库。

您在 sql server 中控制它的方式是通过安全性。您在 sql server 中创建一个只有读取访问权限的用户帐户，并且仅用于该数据库，然后确保在连接到服务器时使用该帐户。如果这意味着在此处使用与应用程序中其他点不同的连接，那就这样吧。

# fubumvc - 集成测试 FubuMVC

> ID：13309808
> 
> 赞同：1
> 
> 时间：2012-11-09T14:21:59.317
> 
> 标签：fubumvc

我正在查看此示例[https://github.com/DarthFubuMVC/fubumvc/blob/master/src/FubuMVC.AspNetTesting/Http/can_read_response.cs](https://github.com/DarthFubuMVC/fubumvc/blob/master/src/FubuMVC.AspNetTesting/Http/can_read_response.cs)并想知道如何集成测试 fubu mvc。

我想做的是给它我的请求或输入模型，然后执行所有行为和处理程序，所以我只返回视图模型或重定向，即我不需要它来呈现视图。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:38:44.823

请查看 FubuMVC 中集成测试项目中的测试。如果您能侥幸成功，那么使用 Self Host 功能会容易*得多。*我想这可能是我本周的每周博客文章。

# asp.net-mvc - 如何插入/注入假用户（IPrincipal）

> ID：13309812
> 
> 赞同：0
> 
> 时间：2012-11-09T14:22:27.593
> 
> 标签：asp.net-mvc, dependency-injection, windows-authentication

我们需要在新项目上使用 Windows 身份验证。因此，我们将在动作方法上使用 AuthorizeAttribute，也许还会在有限数量的控制器动作中使用。

效果很好，当然。但是要对此进行测试（无论是在单元测试中，还是在我集成这些东西时进行手动测试），我需要能够模拟具有任何角色的用户，并在不同角色之间频繁地来回切换。

我无法修改控制器的 User 对象（它是只读的），所以**我可以从哪里插入一个实现 IPrincipal 的假用户，该用户**可以在我的应用程序的任何地方访问，包括：

*   在控制器动作中
*   在自定义属性中

我还没有深入研究 DI 框架——此时有必要吗？如果您强烈推荐，我仍然想知道如何通过“穷人”的 DI 做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:26:21.650

在`global.asax`/ `Application_PostAuthenticateRequest(object sender, EventArgs e)`。

在 ASP.NET 对主体感到满意后调用该方法。

如果您只想提供自己的角色，则可以实现 a`RoleProvider`代替。

**更新**

你可以这样做：

```
public void Application_PostAuthenticateRequest(object sender, EventArgs e)
{
    var principal = LoadFromTheDb();
    HttpContext.Current.User = Thread.CurrentPrincipal = principal;
} 
```

然后你可以在任何你喜欢的地方使用那个主体。

如果您已`runAllManagedModulesForAllRequests`在 web.config 中启用，您可能应该先检查用户是否经过身份验证，然后再执行其他任何操作。

# java - 捕获的 ActivitiException 仍然被抛出并中断应用程序

> ID：13309822
> 
> 赞同：2
> 
> 时间：2012-11-09T14:23:13.997
> 
> 标签：java, activiti, atomikos

我无法理解正在发生的事情以及为什么我的循环没有继续。我正在为所有打开的活动任务创建一个仪表板。现在我遇到的麻烦是当有人在创建仪表板时关闭任务。

代码是这样的：

```
List<Task> approvalTasks = taskQueryApproval.list();
for (Task task : approvalTasks) {
    try {
        ActivitiApplicationRequest activitiRequest = (ActivitiApplicationRequest) taskService
                .getVariable(task.getId(), ACTIVITIREQUEST);
        if (!dashboardValues.containsKey(activitiRequest.getGlobalRequestId())) {
            GlobalRequest globalRequest = globalRequestDao
                .findMinimalGlobalRequestForDashboardBySyscode(activitiRequest.getGlobalRequestId());
            if (globalRequest != null) {
                DashboardValueObject vo = new DashboardValueObject(globalRequest);
                vo.setHasApproval(true);
                dashboardValues.put(activitiRequest.getGlobalRequestId(), vo);
            }
        }
        } catch (ActivitiException ex) {
            LOGGER.debug("Approval already done, skipping activititask");
        }
} 
```

我遇到的麻烦是我知道当任务不存在时，Activiti 会抛出异常，这就是为什么我在 for 循环中放置了一个 try-catch。

我期望的是，当错误被捕获时，它只会继续列表的其余部分。在调试时，我什至看到了捕获已完成。但循环仍然中断，应用程序停止。除了这些例外：

```
SEVERE: Error while closing command context org.activiti.engine.ActivitiException: task 203039 doesn't exist
at org.activiti.engine.impl.cmd.GetTaskVariableCmd.execute(GetTaskVariableCmd.java:55)
at org.activiti.engine.impl.interceptor.CommandExecutorImpl.execute(CommandExecutorImpl.java:24)
at org.activiti.engine.impl.interceptor.CommandContextInterceptor.execute(CommandContextInterceptor.java:42)

9-nov-2012 14:45:42 org.activiti.engine.impl.interceptor.CommandContext close
SEVERE: Error while closing command context
org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: com.atomikos.jdbc.AtomikosSQLException: The transaction has timed out - try increasing the timeout if needed
### The error may exist in org/activiti/db/mapping/entity/Task.xml
### The error may involve org.activiti.engine.impl.persistence.entity.TaskEntity.selectTask
### The error occurred while executing a query
### SQL: select * from ACT_RU_TASK where ID_ = ?
### Cause: com.atomikos.jdbc.AtomikosSQLException: The transaction has timed out - try increasing the timeout if needed
at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:8)
at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:81) 
```

我究竟做错了什么？

# java - 将 Java SE 类添加到 Java ME 阅读 PDF

> ID：13309835
> 
> 赞同：1
> 
> 时间：2012-11-09T14:24:12.060
> 
> 标签：java, java-me, itext, lwuit

我正在编写一个使用 iText 阅读 PDF 的 Java ME 应用程序。当我用标准 Java 编写代码时，包括类路径中的 iText 库，应用程序就会运行。但是，如果我将代码移动到包含类路径中的 iText 库的 java 移动应用程序中，则在编译期间会出现错误，提示

```
error: cannot access URL
PdfReader reader = new PdfReader(pdfPath);                 
class file for java.net.URL not found 
```

我的问题是我需要解决这个问题才能阅读 PDF 文件。我尝试将`rt.jar`作为库添加到我的代码中，这是包含`java.io`但它太大而无法编译的包。请帮我找到解决办法。我的代码在这里

```
package PDFreaderpackage;

import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.parser.PdfTextExtractor;
import com.sun.lwuit.Display;
import com.sun.lwuit.Form;
import com.sun.lwuit.TextArea;
import javax.microedition.midlet.MIDlet;

public class Midlet extends MIDlet {

Form displayForm;
TextArea pdfText;
private String bookcontent;
public static String INPUTFILE = "c:/test.pdf";
public static int pageNumber = 1;

public void startApp() {
    Display.init(this);
    this.bookcontent = readPDF(INPUTFILE, pageNumber);
    pdfText = new TextArea(bookcontent);
    displayForm = new Form("Works");
    displayForm.addComponent(pdfText);
    displayForm.show();
}

public void pauseApp() {
}

public void destroyApp(boolean unconditional) {
}

public String readPDF(String pdfPath, int pageNumber) {

    try {
        PdfReader reader = new PdfReader(pdfPath);
        this.bookcontent = PdfTextExtractor.getTextFromPage(reader, pageNumber);
    } catch (Exception e) {
        System.out.println(e);
    }
    return bookcontent;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:59:30.833

这些类在移动设备上不可用，并且 JavaME 不支持 Java 5 功能。您尝试做的事情有些不切实际。[由于字节码处理， Codename One](http://www.codenameone.com/)允许更多的类，但即便如此，这也不是一个完整的 rt.jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:02:48.153

如果您有时间，您可以尝试创建符合 Java ME 的 iText 版本，但要正确打开 PDF，该库必须使用某种形式，[`Random Access File`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html)因为文件末尾的外部参照表。这种文件连接在 Java ME中**不可用。**

该库可以做的是将 PDF 完全加载到内存中，这在很大程度上取决于文件大小和可用的手机内存。

您最好创建一个 Web 服务来接收您的 PDF 并从中返回例如 PNG 图像。

# jquery - 如何使用 .each() 和 .last() 选择每个 tr 中的最后一个 td？

> ID：13309839
> 
> 赞同：0
> 
> 时间：2012-11-09T14:24:26.547
> 
> 标签：jquery

我想使用 .each() 循环和 .last() 方法选择每个 tr 中的最后一个 td。

这就是我正在做的事情：

```
$('tr:has(td)').children().each(function(){return $(this).parent().last()}); 
```

但是该代码返回每个 td 而不仅仅是每一行的最后一个。

有人可以告诉我如何解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T14:25:36.150

你可以简单地写

```
$('tr > td:last-child') 
```

由于多种原因，您的代码是错误的：

*   `.last()`选择当前集合中的最后一个元素；你需要`.children().last()`
*   `.each()`不对其回调的返回值做任何事情；你要`.map()`
*   `children()`使您的回调针对每行中的每个单元格运行。

# api - 使用 TestFlight API 提交 iOS .app 时出错

> ID：13309845
> 
> 赞同：3
> 
> 时间：2012-11-09T14:25:03.120
> 
> 标签：api, bash, file-upload, testflight

我正在运行以下脚本：

```
#!/bin/bash
archive=`./builds/myapp.ipa`
curl http://testflightapp.com/api/builds.json
-F file=$archive
-F api_token='xxxxxxxxxxxxxxxxxxxxxxxxxx'
-F team_token='xxxxxxxxxxxxxxxxxxxxxxxxxx'
-F notes='here comes the new app!' 
-F notify=True
-F distribution_lists='MyFriends' 
```

但我得到了错误：

> 您必须提供 api_token、team_token、文件和注释（缺少文件）

我实际上是从 TestFlight 网站复制/粘贴脚本。那有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:03:51.137

请注意，如[TestFlight API 文档](https://testflightapp.com/api/doc/)中给出的示例所示，您需要在 IPA 文件名之前使用“@”字符。

你应该尝试：

```
#!/bin/bash
archive=`./builds/myapp.ipa`
curl http://testflightapp.com/api/builds.json \
-F file=@$archive \
-F api_token='xxxxxxxxxxxxxxxxxxxxxxxxxx' \
-F team_token='xxxxxxxxxxxxxxxxxxxxxxxxxx' \
-F notes='here comes the new app!' \
-F notify=True \
-F distribution_lists='MyFriends' 
```

# delphi - 如何在 Delphi XE3、Firemonkey2 中更新 TStringGrid 单元格

> ID：13309853
> 
> 赞同：3
> 
> 时间：2012-11-09T14:25:45.117
> 
> 标签：delphi, firemonkey, delphi-xe3

我之前已经看到这个问题是另一个[问题](https://stackoverflow.com/questions/7531973/change-colour-of-tlabel-in-firemonkey-ios-app-and-add-items-to-tstringgrid)的一部分，所以知道它不能只是我......如果我打开一个新的 FireMonkey2 HD 应用程序，添加一个 TButton 和 TStringGrid，然后将其添加到单击事件的按钮中，当我单击按钮时，网格中什么也没有发生！

```
procedure TForm33.Button1Click(Sender: TObject);
var
  i: Integer;
begin
  for i:= 0 to 6 do
   begin
     StringGrid1.Cells[0,i] := 'Row:' + IntToStr(i);
   end;
   stringgrid1.UpdateColumns;
   stringgrid1.SetFocus;
 end; 
```

有任何想法吗 ？PS 我也尝试过使用 TStringGrid.OnGetValue，但它仍然不会在 StringGrid 中显示任何内容。

进一步查看 TStringGrid 源代码后，C 为 nil，因此从未设置单元格。

```
procedure TStringGrid.SetValue(Col, Row: Integer; const Value: TValue);
var
  C: TColumn;
begin
  C := Columns[Col];
  if Assigned(C) then
  begin
    C.UpdateRowCount(RowCount);
    C.SetCells(Row, Value);
  end; 
```

我似乎在“处女”StringGrid 中没有列，那么如何添加它们？有一个 r+w RowCount 属性，但 ColCount 是只读的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:41:37.860

您必须至少添加一列[`TStringGrid`](http://docwiki.embarcadero.com/Libraries/XE2/en/FMX.Grid.TStringGrid)才能向单元格添加数据，您可以在运行时执行此操作

```
StringGrid1.AddObject(TStringColumn.Create(Self)); 
```

或在设计时使用项目设计器

![在此处输入图像描述](../Images/cbb1e691ec85020e7d587aa7806da4fe.png)

# .htaccess - 使用 FQDN（TLD 后的点）将 URL 重定向到与 PQDN 等效的 URL

> ID：13309854
> 
> 赞同：5
> 
> 时间：2012-11-09T14:25:52.063
> 
> 标签：.htaccess, redirect, url-rewriting, canonicalization, fqdn

许多网站都可以通过[FQDN](https://en.wikipedia.org/wiki/Fully_qualified_domain_name "完全限定域名")访问（即，在 TLD 上附加一个点）：

*   [https://www.ebay.com./](https://www.ebay.com./)
*   [https://www.google.com./](https://www.google.com./)
*   [https://www.reddit.com./](https://www.reddit.com./)
*   [https://stackoverflow.com./](https://stackoverflow.com./)
*   [https://en.wikipedia.org./wiki/Main_Page](https://en.wikipedia.org./wiki/Main_Page)

有些网站无法通过这种方式访问​​，但我现在找不到示例。¹ ²

**是否可以在`.htaccess`文件中将所有带有点后缀的变体重定向到没有的变体？**

理想情况下使用“通配符”规则，这样您就不必明确列出域（无需编辑即可在不同的站点/域上使用它）。

重定向示例：

*   `http://example.com./`→<br> `http://example.com/`
*   `http://example.com./foo`→<br> `http://example.com/foo`
*   `http://sub.example.com./bar.html`→<br> `http://sub.example.com/bar.html`

* * *

¹ stackoverflow.com，当通过 HTTP 访问时，会给出 HTTP 错误 400：“Bad Request - Invalid Hostname”。

² Wikipedia，当通过 HTTPS 访问时（当它仍然是可选的）时，用于给出证书错误：“证书仅对以下名称有效：`*.wikipedia.org`，`wikipedia.org`（错误代码：ssl_error_bad_cert_domain）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:23:27.790

这应该工作：

```
RewriteCond %{HTTP_HOST} ^([a-z0-9\.-]+)\.com\.$ 
RewriteRule ^(.*) http://www.domain.com/$1  [QSA,L,R=301] 
```

# php - php循环中的ajax对按钮单击执行操作

> ID：13309855
> 
> 赞同：2
> 
> 时间：2012-11-09T14:25:53.407
> 
> 标签：php, ajax, jquery

所以我有一个 php 循环，我正在使用 jquery 幻灯片切换来隐藏/显示带有 sql 结果的表。目前该表仅使用 php 加载，但由于存在很多导致一些加载问题的问题，我需要使用滑动切换 btn 触发 ajax，因此它仅在按下按钮时请求当前项目的详细信息。我可以让它从 jquery 调用 php 文件，但我很难传递每个项目的值，所以它可以在数据库上执行请求。这是 php foreach 循环内容的样子；

```
<span class="searchitem">
  // some visible content here 
  <span value="item name" class="btn">button</span>
  <span class="slide_area">
    // hidden slide content ajax needs to populate with php result
  </span>
</span> 
```

这个html重复我使用jquery slidetoggle隐藏slide_area，我需要做的是用来自php的结果填充slide_area，php文件需要名称来返回结果名称是通过带有url的get传递的，所以我只需要从 btn 的值中附加带有实际名称的 url，我确定这不会那么困难，但我在这里。

这是jQuery：

```
<script type="text/javascript">
//<![CDATA[  
    $(document).ready(function ()
              {
                    $('.searchitem').each(function () {
                        $(this).find('.slide_area').hide();
                        $(this).find('.btn').click(function ()
                        {
                            var ajax_load = "<img src='images/spinner.gif' style='width:50px;' alt='loading...' />";  
                            var loadUrl = "ajax/item.php?name=";    
                            var loadName = $(".btn");
                            var Name = URLEncode(loadName);
                            var loadString = loadUrl + Name;
         $(this).parent().find('.slide_area').slideToggle(1500).html(ajax_load).load(loadString);
                        });
                    });
              });
 //]]>
 </script> 
```

我需要从 btn 获取值并附加 loadURL，如果需要，我可以通过 post 等不同的方式发送数据，更新 jquery 仍然无法正常工作我在这里做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:38:31.467

最简单的方法是使用 Phery 库[http://phery-php-ajax.net/](http://phery-php-ajax.net/) 这里的关键是`data-phery-remote="toggle"`点击时会自动调用 PHP 函数，并且可以在任何地方重用

```
<span class="searchitem">
  // some visible content here 
  <span value="item name" data-phery-remote="toggle" class="btn">button</span>
  <span class="slide_area">
  // hidden slide content ajax needs to populate with php result
  </span>
</span> 
```

逻辑相反，负载将只发生一次 AJAX 调用，而不是两次。

```
Phery::instance()->set(array(
  'toggle' => function($data){
    $r = new PheryResponse;
    /* do your code, fill $html_content */
    $r->this()->siblings('.slide_area')->html($html_content)->toggle();
    return $r;
  }
))->process(); 
```

# macos - mac os x 10.7.5 上的 java 6

> ID：13309856
> 
> 赞同：1
> 
> 时间：2012-11-09T14:26:00.357
> 
> 标签：macos, installation, java

在我的 Mac 上，我在本地删除了 java，只是删除了带有 java (/System/Library/Frameworks/JavaVM.framework/Versions/) 的文件夹。

当我再次安装 java 6 时，我被安装到：/Library/Java/JavaVirtualMachines/

然后在安装新的之后，尝试从控制台调用“./java”时出现此错误：

在这里，我将 java 放入我的主目录。但是，即使使用标准的我也有同样的例外：

```
dyld: Library not loaded: /System/Library/Frameworks/JavaVM.framework/Versions/A/JavaVM
  Referenced from: /Users/myuser/java/1.6.0.jdk/Contents/Home/bin/./java
  Reason: image not found
Trace/BPT trap: 5 
```

有什么办法可以解决吗？

---2---

在这里，我只是从不同的机器上复制工作 Java 6 并放到正确/默认位置，然后转到 .../bin 并输入 ./java：

```
$ pwd
/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin
$ ./java -version
dyld: Library not loaded: @rpath/libjli.jnilib
  Referenced from: /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/./java
  Reason: image not found
Trace/BPT trap: 5 
```

但是如果安装 Java 7，它就可以完美运行。

--3--

如果在其中安装带有 jdk6 的 JavaDeveloper.pkg 包 (javadeveloper_for_os_x_2012006__11m3909.dmg) - 来自 Apple 网站

dyld：库未加载：/System/Library/Frameworks/JavaVM.framework/Versions/A/JavaVM 引用自：/Library/Java/JavaVirtualMachines/1.6.0_37-b06-434.jdk/Contents/Home/bin/./ java 原因：找不到图像 Trace/BPT 陷阱：5

--4--

如果尝试从**mac 端口安装 java 6 (open jdk)**

**$ sudo 端口安装 openjdk6**

```
info:build Exiting because of the above error(s). \n 
:info:build make: *** [post-sanity] Error 1
:info:build Command failed:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_java_openjdk6/openjdk6/work/." && /usr/bin/make  ARCH_DATA_MODEL="64" ALT_BOOTDIR="/opt/local/share/java/openjdk6_bootstrap" ALT_JDK_IMPORT_PATH="/opt/local/share/java/openjdk6_bootstrap" ALT_BINARY_PLUGS_PATH="/opt/local/share/java/icedtea6-plugs/jre/lib/rt-closed.jar" ALT_DROPS_DIR="/opt/local/var/macports/distfiles/openjdk6" ANT_HOME="/opt/local/share/java/apache-ant" ALT_FREETYPE_HEADERS_PATH="/opt/local/include" ALT_FREETYPE_LIB_PATH="/opt/local/lib" ALT_CUPS_HEADERS_PATH="/usr/include" ALT_MOTIF_DIR="/opt/local" ALT_X11_PATH="/opt/local" ALT_DEVTOOLS_PATH=/usr ALT_CACERTS_FILE=/System/Library/Frameworks/JavaVM.framework/Home/lib/security/cacerts NO_DOCS=true LANG="C" BUILD_NUMBER="b20" MILESTONE=fcs HOTSPOT_BUILD_JOBS="2"  
**:info:build Exit code: 2
:error:build org.macports.build for port openjdk6 returned: command execution failed
:debug:build Error code: CHILDSTATUS 7773 2
:debug:build Backtrace: command execution failed** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:30:48.730

行。我修好了它。

问题是 Java 位于两个地方。

1.  /System/Library/Frameworks/JavaVM.framework（是真正的jdk 6所在）
2.  /Library/Java/JavaVirtualMachines/（现在可能是 java6，它只有链接）

如果将 JDK 放到源 1，它将尝试使用特定版本的 java（在我的情况下是 1.6.0）引用源 2（通过符号链接），并且找不到要链接到的正确对象/文件。

我一修好它就开始工作。

所以，我只是恢复了所有内容，从另一台工作机器上获取。但是这个想法是 Mac OS 使用两个位置来存储 java 相关文件。

# php - 通过表单更新 mySQL 数据字段不起作用

> ID：13309861
> 
> 赞同：0
> 
> 时间：2012-11-09T14:26:07.160
> 
> 标签：php, mysql, forms, updates

我正在尝试编辑 mySQL 数据库生成列表中的项目。这是代码：

```
<?php
// contact to database
$connect = mysql_connect("<HOST>", "<USER>", "<PASSWORD>") or die ("Error , check your server connection.");
mysql_select_db("tvc");
?>

<html>
<head>
<title></title>
</head>

<body>

<?php 
$result = mysql_query("UPDATE closet SET
    pattern = '{$_POST['pattern']}'
    WHERE id='{$_POST['id']}'") or die ("Error in query");

// if successfully updated. 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='patterns.php'>Back to Patterns List</a>";
}

else {
echo "ERROR";
}

?>

</body>
</html> 
```

我收到“查询中的错误”错误消息，但我不知道是什么原因造成的。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:27:42.130

`,`你之前忘记删除了`WHERE`

改变

```
$result = mysql_query("UPDATE closet SET
    pattern = '{$_POST['pattern']}',
    WHERE id='{$_POST['id']}'") or die ("Error in query"); 
```

到

```
$pattern = mysql_real_escape_string($_POST['pattern']);
$id= mysql_real_escape_string($_POST['id']);

$result = mysql_query("UPDATE closet SET
    pattern = '".$pattern."' WHERE id='".$id."'") or
die("Could not connect: " . mysql_error()); 
```

建议：

1.学会防止MySQL注入：[好链接](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

2.不推荐使用Mysql扩展来编写新代码。相反，应该使用 mysqli 或 PDO_MySQL 扩展。更多阅读：[PHP 手册](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

# build - 使用 SDK10.6 或 10.7 在 OSX 10.7.5 上构建 Portaudio 失败

> ID：13309864
> 
> 赞同：4
> 
> 时间：2012-11-09T14:26:14.480
> 
> 标签：build, compiler-errors, osx-lion, portaudio

我仍然无法在我的系统上构建 Portaudio 库，这是带有 Xcode 4.3.2 的 OSX 10.7.5，安装了命令行工具并在下安装了 SDK10.6 和 SDK10.7

```
 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ 
```

我简要描述了（也适用于遇到相同问题的其他人）到目前为止我所做的事情（遵循我在网上找到的不同解决方案）。

1）我从以下位置下载了“Portaudio”/pa_stable_v19_20111121.tgz（最后一个稳定版本）：

> > www.portaudio.com/download.html

2）我在这里阅读了关于构建 Portaudio 的说明：

> > www.portaudio.com/docs/v19-doxydocs/compile_mac_coreaudio.html

并尝试使用建议的命令从终端窗口编译：

> > ./配置 && 制作

这导致（并不奇怪）很多错误以以下结尾：

llvm-gcc-4.2：错误尝试执行'/usr/bin/../llvm-gcc-4.2/bin/powerpc-apple-darwin11-llvm-gcc-4.2'：execvp：没有这样的文件或目录lipo：可以't open input file: /var/folders/1_/xkp08ky561jg02zjjrpsxg940000gn/T//ccPxCTrJ.out (没有这样的文件或目录) make: *** [src/hostapi/coreaudio/pa_mac_core.lo] 错误1

发生这种情况是因为自 OSX 10.5 起不再支持“ppc”。此外，OSX 10.7 上不存在“Developer”文件夹，并且 Developer 文件夹中的所有内容都已移至

```
 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ 
```

3）我下载了一个补丁（mac_configure_patch.txt）来修复“配置”：

> > [https://www.assembla.com/spaces/portaudio/tickets/216#/activity/ticket](https://www.assembla.com/spaces/portaudio/tickets/216#/activity/ticket)：

并将其复制到 portaudio 目录并通过键入终端应用它：

> > $补丁<mac_configure_patch.txt

一条确认消息说：

> > 修补文件configure.in

所以一切似乎都很好。但 Portaudio 仍在尝试为“ppc”构建。

4) 现在我将 ARCHFLAGS、CFLAGS、LDFLAGS 设置为仅为 i386 架构构建，如下所示（禁用通用构建）：

> > $ MACOSX_DEPLOYMENT_TARGET="10.7" ARCHFLAGS="-arch i386" CFLAGS="-O2 -g -Wall -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk -arch i386 -mmacosx-version-min=10.7" LDFLAGS="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sd -arch i386 -mmacosx-version -min=10.7" ./configure --disable-mac-universal

5）此外，我发现：

> A）：“.include/pa_mac_core.h”中的“#include AudioToolbox.h”应取消注释
> 
> B）：应该删除“Makefile”（不是 Makefile.in）中的“-wError”。

[根据： http](http://www.fluxforge.com/blog/building-portaudio-under-os-x-107-lion) ://www.fluxforge.com/blog/building-portaudio-under-os-x-107-lion

6）现在我尝试构建（使用：“sudo make”），编译开始但失败：

> > ld：找不到框架CoreAudio
> > 
> > collect2: ld 返回 1 个退出状态
> > 
> > 制作：*** [lib/libportaudio.la] 错误 1

7) 所以我尝试使用“-F/System/Library/Frameworks -framework CoreAudio”来指向框架

导致以下终端命令：

> > $ MACOSX_DEPLOYMENT_TARGET="10.7" ARCHFLAGS="-arch i386" CFLAGS="-O2 -g -Wall -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk -arch i386 -mmacosx-version-min=10.7" LDFLAGS="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sd -arch i386 -mmacosx-version -min=10.7 -F/System/Library/Frameworks -framework CoreAudio" ./configure --disable-mac-universal

这似乎解决了 CoreAudio 框架问题，但导致另一个错误说：

> > ld: 找不到 -lSystem 的库
> > 
> > collect2: ld 返回 1 个退出状态
> > 
> > 制作：*** [lib/libportaudio.la] 错误 1

我现在被困在这一点上。尝试使用 SDK10.6 或 SDK10.7 在 OSX 10.7 上构建 Portaudio 时，是否有人遇到过同样的问题。有没有人找到如何从终端构建 Portaudio 的解决方案？我非常感谢任何提示！！！提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T17:08:28.187

试试最新的svn。如果这不能立即奏效，您*可能*需要使用一些标志。

例如，在 configure.in 中：

*   将 -Werror 更改为 -Wall
*   添加 -Wno-deprecated （你不应该需要这个，但以防万一）

然后运行

```
./configure --disable-mac-universal 
```

和往常一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:51:13.077

好的，最后我解决了这个问题。希望解决方案也能帮助其他人。我只是忘了将 CoreAudio 框架的路径添加到 CFLAGS 中。这是在 OSX 10.7.5 上使用 SDK10.7 为架构 i386 和 x86_64 构建 portaudio 的最终配置/构建命令：

在 portaudio 目录中打开一个终端窗口并输入：

> > MACOSX_DEPLOYMENT_TARGET="10.7" ARCHFLAGS="-arch i386" CFLAGS="-O2 -g -Wall -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk - arch i386 -mmacosx-version-min=10.7 -F/System/Library/Frameworks -framework CoreAudio" LDFLAGS="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10\. 7.sdk -arch i386 -mmacosx-version-min=10.7 -F/System/Library/Frameworks -framework CoreAudio" ./configure --disable-mac-universal

如果这已经完成，您需要编辑`Makefile`并将提及更改`-Werror`为`-Wall`。

然后：

> > 制作

瞧。在 portaudio/lib 目录中有你的“libportaudio.la”。您现在可以输入

> > 须藤使安装

（系统会要求您使用密码进行确认）

将库放在系统目录中。

最后你可以玩弄 Portaudio 了！玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T00:59:42.440

在 Mac OSX Mountain Lion (10.8) 上尝试了您的说明，它在编译方面取得了很大进展，但随后失败：

```
In file included from ./test/patest_sine_channelmaps.c:53:
./include/pa_mac_core.h:100:1: error: unknown type name 'AudioDeviceID'
AudioDeviceID PaMacCore_GetStreamInputDevice( PaStream* s );
^
./include/pa_mac_core.h:109:1: error: unknown type name 'AudioDeviceID'
AudioDeviceID PaMacCore_GetStreamOutputDevice( PaStream* s );
^
2 errors generated.
make: *** [bin/patest_sine_channelmaps] Error 1 
```

但是，我发现您可以简单地使用[Homebrew](http://brew.sh/)（类似 apt 的 OSX 数据包管理器），它会像魅力一样完成肮脏的工作。在指定的安装目录中查找二进制文件和头文件:)

```
$ brew install portaudio
Warning: It appears you have MacPorts or Fink installed.
Software installed with other package managers causes known problems for
Homebrew. If a formula fails to build, uninstall MacPorts/Fink and try again.
==> Downloading http://www.portaudio.com/archives/pa_stable_v19_20111121.tgz
######################################################################## 100.0%
==> Downloading patches
######################################################################## 100.0%
==> Patching
patching file include/pa_mac_core.h
==> ./configure --prefix=/usr/local/Cellar/portaudio/19.20111121 --enable-mac-un
==> make install
/usr/local/Cellar/portaudio/19.20111121: 8 files, 316K, built in 20 seconds 
```

# c# - 获取选项列表中选项的值

> ID：13309869
> 
> 赞同：0
> 
> 时间：2012-11-09T14:26:22.447
> 
> 标签：c#, dynamics-crm-2011

我正在创建一个实体的虚假实例`beep`。它有一个类型`picklist`为的必填字段`pickaboo`。`beep`首先我省略了它，但由于某些业务逻辑要求所有新创建的实例都分配该字段，因此应用程序开始抱怨向我抛出错误消息。

```
Entity entity = new Entity { LogicalName = "beep" };
Guid guid = proxy.Create(entity);
proxy.Delete("beep", guid); 
```

我没有给出啮齿动物的尾巴部分关于这个需求，因为在我创建实例之后，我正在删除它。然而，CRM 提供了一个巨大的啮齿动物，并没有让我发挥我的魔力。所以，我很聪明，为缺失的属性添加了一个属性。

```
OptionSetValue option = new OptionSetValue(0);
Entity entity = new Entity { LogicalName = "beep" };
entity.Attributes.Add("pickaboo", option);
Guid guid = proxy.Create(entity);
proxy.Delete("beep", guid); 
```

当然，它不起作用，因为零不是有效值。显然，CRM 根据解决方案添加了一个哈希数，因此实际的“零”具有像“846000000000”这样的数值，实际的“一”具有“846000000001”等。

如何以编程方式获得该值？

*现在我有一个丑陋的解决方法来获取**所有的`beep`s**并从它们中的第一个中获取价值。甚至不要让我开始知道我失去了多少睡眠，知道它看起来多么尴尬，有人会花时间给我一些反馈。:(*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:03:46.967

你有两个选择。

1.  您可以使用 CrmSrvcUtil 将您的 OptionSetValues 生成为枚举...这将创建一个 pickaboo 枚举，然后您可以在代码中引用该枚举 `entity.Attributes.Add("pickaboo", new OptionSetValue((int)pickaboo.YourEnumValue);`

2.  您还可以使用该`RetrieveOptionSetRequest`消息来获取您感兴趣的特定选项集的所有值的列表。请参阅[此 SO question](https://stackoverflow.com/questions/5470498/retrieve-optionsets-in-dynamics-2011)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:37:50.933

由于我知道*所有*CRM 程序员都是懒猪（亲身经历，哈哈），我知道您更喜欢简短而全面的解决方案。我意识到您正在寻找对**单个有效值**的快速访问。如果我弄错了，请停止阅读-使用@Daryl 的建议-他为您提供了很好的答案。

但是，如果我是对的，请使用此代码获取第一个有效的选项值（假设它存在）。以防万一，记得把它包围起来，`try/catch`这样如果你拼错了，你就不会挠头了。

```
RetrieveAttributeRequest request = new RetrieveAttributeRequest
{
  EntityLogicalName = "beep",
  LogicalName = "pickaboo",
  RetrieveAsIfPublished = true
};
RetrieveAttributeResponse response 
  = proxy.Execute(request) as RetrieveAttributeResponse;
PicklistAttributeMetadata metaData 
  = response.AttributeMetadata as PicklistAttributeMetadata;
OptionSetValue option 
  = new OptionSetValue(metaData.OptionSet.Options[0].Value ?? -1); 
```

1.  注意 - 我假设您通过名为`proxy`.
2.  在整个代码周围设置一个`try/catch`，以防万一发生越界异常。
3.  确保处理 的选项`-1`，因为`Value`返回的是一个可为空的整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T22:27:21.583

这个问题启发了我写博客。

如果你看看我下面的帖子，它有一个函数可以用来查找选项列表（全局和本地选项集）、状态码、状态码和布尔（两个选项）字段的 int 值。

[CRM 2011 以编程方式查找选项列表、选项集、状态码、状态码和布尔值的值（两个选项）](http://woodsworkblog.wordpress.com/2012/11/10/crm-2011-programatically-finding-the-values-of-picklists-optionsets-statecode-statuscode-and-boolean-two-options/)

# java - 可运行有时间限制

> ID：13309870
> 
> 赞同：4
> 
> 时间：2012-11-09T14:26:22.947
> 
> 标签：java, multithreading

试图构建一个`Runnable`必须在给**定**时间限制内结束的。

目前我正在使用`java.util.Timer`中断`Runnable`线程。

`Timer`开始后`Runnable`立即开始。

```
import java.util.Timer;
import java.util.TimerTask;

public class test {
    Thread task;
    Timer  timer;

    public void start(){

        task = new Thread(new worker());
        timer = new Timer("timer",true);

        task.start();
        timer.schedule(new Terminator(),1000*2);
    }

    class worker implements Runnable{
        @Override
        public void run() {

            for (int i = 0 ; i < 2; i++){
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    System.out.println("Test Interrupted !!");
                    return;
                }
            }

            System.out.println("Test Finished !!");
            timer.cancel();
        }
    }

    class Terminator extends TimerTask{
        @Override
        public void run() {
            task.interrupt();
            System.out.println("Test Terminated !!");
        }
    }
} 
```

但我怀疑这会导致`Timer`和`Runnable`线程之间的竞争条件： `Runnable`即将完成，并且`Timer`也在触发。

这会导致两个都*完成！*并*终止！*正在打印？如果是这样，如何避免它？

更新：

它发生：

```
11-09 21:14:40.741: INFO/System.out(31442): Test Finished !! 18
11-09 21:14:40.751: INFO/System.out(31442): Test Terminated !! 18
11-09 21:14:40.751: INFO/System.out(31442): Test Finished !! 19
11-09 21:14:40.751: INFO/System.out(31442): Test Terminated !! 19 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:30:17.140

> 这会导致两个都完成！并终止！正在打印？

是的。打印“完成”消息时，计时器可能会在取消之前触发。

```
System.out.println("Finished !!");
// The timer can fire here.
timer.cancel(); 
```

如果发生这种情况，将打印两条消息。

* * *

为避免该问题，您可以使用同步。

```
synchronized (someObject) {
    if (!finished) {
        finished = true;
        System.out.println("Finished !!");
        timer.cancel(); 
    }
} 
```

在终结者中：

```
synchronized (someObject) {
    if (!finished) {
        finished = true;
        task.interrupt();
        System.out.println("Test Terminated !!");
    }
} 
```

这可以防止打印两种消息形式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T14:31:59.700

是的。如果你想避免这种情况，你需要使用`synchronize`和共享锁对象：

```
public class test {
    private Object lock = new Object();
    ...

        synchronized(lock) {
            System.out.println("Test Finished !!");
            timer.cancel();
        }
    ...

        synchronized(lock) {
            if( ! task.isRunning() ) return;

            task.interrupt();
            System.out.println("Test Terminated !!");
        }

    ... 
```

# inversion-of-control - 使用 UnitOfWork 模式时的依赖注入

> ID：13309875
> 
> 赞同：0
> 
> 时间：2012-11-09T14:26:26.697
> 
> 标签：inversion-of-control, unit-of-work

我试图了解基于该`UnitOfWork`模式构建的现有系统。有很多存储库都`IUnitOfWork`在其构造函数中接受一个，以便服务层可以执行多个存储库调用，然后选择何时提交更改。

当前的服务代码可能如下所示：

```
using (var uow = UnitOfWork.Start())
{
    var orderRepository = new OrderRepository(uow);
    var productRepository = new ProductRepository(uow);
    orderRepository.DoSomething();
    productRepository.DoSomethingElse();
    uow.Persist();
} 
```

如何在服务层中引入真正的依赖注入并仍然保持`UnitOfWork`模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:20:45.873

我会使用工厂模式。在构造函数中注入工厂并重写：

```
using (var uow = this.unitOfWorkFactory.Create().Start())
{
    var orderRepository = new OrderRepository(uow);
    var productRepository = new ProductRepository(uow);
    orderRepository.DoSomething();
    productRepository.DoSomethingElse();
    uow.Persist();
} 
```

此致

# html5-video - 视频显示第一帧，然后在当前时间的每个设置下从当前时间开始播放

> ID：13309876
> 
> 赞同：1
> 
> 时间：2012-11-09T14:26:29.123
> 
> 标签：html5-video

我使用多个视频。当我设置视频当前时间时，首先我看到视频的第一帧比视频从当前时间开始播放。我怎样才能摆脱我设置视频源和当前时间的代码块的第一帧在这里

```
v.src="videos/"+v_name+".webm";
    v.load();
    arc_time = arc_length / 20;
    dist = Math.abs(x-node_x[s_node-1]);
    v.addEventListener("loadedmetadata", function()
    {
        v.currentTime = (v.duration/arc_length) * dist;
        v.playbackRate = v.duration / arc_time;
    });
    v.play(); 
```

要在此链接中测试我的研究：http: [//fbe.karabuk.edu.tr/gis/canvas1.php](http://fbe.karabuk.edu.tr/gis/canvas1.php) - 按下绘制节点和绘制线条按钮 - 将起点设置为 3 - 多次按下右箭头

# mongodb - mongodb-erlang/bson-erlang 如何将 ISODate 插入 mongodb

> ID：13309877
> 
> 赞同：0
> 
> 时间：2012-11-09T14:26:32.353
> 
> 标签：mongodb, erlang, bson

我想使用 ISODate 类型将 UTC 日期（ISO 8601 格式）字段插入 MongoDB。

根据[MongoDB 日期文档](http://www.mongodb.org/display/DOCS/Dates)ISODates 存储为 BSONSpec 的 UTC 日期/[时间](http://bsonspec.org/#/specification)。这是 \x09 根据此规范。 [bson-erlang](https://github.com/mongodb/bson-erlang)似乎以某种方式实现了这一点。

现在会研究这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:59:12.237

以 erlang 的时间戳格式（{MegaSecs, Secs, MicroSecs}）指定字段，bson-erlang 应该处理它。

例如：Doc = {timestamp, {0, 1000, 100}}

# fonts - 报告查看器导出为 pdf 不嵌入字体

> ID：13309882
> 
> 赞同：4
> 
> 时间：2012-11-09T14:27:20.563
> 
> 标签：fonts, pdf-generation, rdlc, report-viewer2010

我有一个使用 Arial 作为字体的本地报告 (rdlc)。当我使用报表查看器 2010 控件 (Winforms) 将报表导出为 PDF 时，它不会使用正确的字体。它使用 Helvetica 而不是 Arial。可以强制嵌入字体吗？我读到 Report viewer 2010 支持字体嵌入，但您如何强制这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T17:15:39.437

当以下条件适用时，字体会嵌入到 PDF 文件中（可在[此处](http://technet.microsoft.com/en-us/library/ms159713%28SQL.100%29.aspx)找到）：

*   字体嵌入权限由字体作者授予。已安装的字体包含一个属性，该属性指示字体作者是否打算允许在文档中嵌入字体。如果属性值为 EMBED_NOEMBEDDING，则字体不会嵌入 PDF 文件中。有关详细信息，请参阅 msdn.microsoft.com 上的“TTGetEmbeddingType”。
*   字体是 TrueType。
*   字体由报表中的可见项引用。如果字体被 Hidden 属性设置为 True 的项目引用，则字体不需要显示渲染数据，也不会包含在文件中。仅当需要显示呈现的报表数据时才会嵌入字体。

有关更多详细信息，请尝试第二篇[文章](http://www.networksteve.com/enterprise/topic.php/How_to_get_TTGetEmbeddingType_for_font/?TopicId=30923&Posts=1)可能会有所帮助。

# javascript - 褪色的最新新闻代码

> ID：13309884
> 
> 赞同：5
> 
> 时间：2012-11-09T14:27:28.300
> 
> 标签：javascript, jquery, html

我正在寻找最有效的方法来制作最新的新闻行情。

我有一个`ul`可以容纳任意数量的`li`'s 和所有我需要循环通过它们淡入一个，保持 5 秒钟然后淡出，一次`li`一个。该列表以 40px 的`li`高度显示，它显示的井也是 40px，`overflow: hidden`从而产生所需的效果。`li`如果光标在显示时悬停在其上，也能够将其保持在原位，这将是构建它的好方法。

我知道有一个广泛使用的 jQuery ticker 插件（ala 旧的 BBC 风格），但我尝试使用它，它看起来很笨重，因为我需要的简单性，而且它对我使用的样式造成了严重破坏。

到目前为止我一直在使用这个：

```
function tickOut(){
        $('#ticker li:first').animate({'opacity':0}, 1000, function () { 
            $(this).appendTo($('#ticker')).css('opacity', 1); });

    }

    setInterval(function(){ tickOut () }, 5500); 
```

但它实际上并没有在下一个淡入淡出，`li`所以效果有点混乱。

如果有人可以提出一些替代方案来帮助产生我需要的效果，那将非常有用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:40:06.353

`hide()`并`fadein()`在元素成为列表顶部后调用它。

```
function tickOut(){
        $('#ticker li:first').animate({'opacity':0}, 1000, function () {
            $(this).appendTo($('#ticker'))
            $('#ticker li:first').hide()
            $('#ticker li:first').fadeIn(1000)
              $('#ticker li:not(:first)').css('opacity', '1')
        });
    }

setInterval(function(){ tickOut () }, 5500); 
```

看：

[http://codepen.io/anon/pen/lHdGb](http://codepen.io/anon/pen/lHdGb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:50:02.517

我会这样做：

```
function tickOut(){
    $('#ticker li:first').animate({'opacity':0}, 1000, function () { 
            $(this).appendTo($('#ticker')).css('opacity', 1); });
    }
var interval;
$(function() {
    interval = setInterval(function(){ tickOut () }, 5500);
    $('#ticker').hover(function() {
             if(interval)
                 clearInterval(interval);
             $('#ticker li:first').stop();   
             $('#ticker li:first').css('opacity', 1).stop();  
         }, function(){
             interval = setInterval(function(){ tickOut () }, 5500);
             });
}); 
```

查看[`$('#ticker').hover`](http://api.jquery.com/hover/)哪个清除间隔并停止动画并`opacity`在鼠标进入时返回 1 `UL`（当只有一些特殊元素在鼠标下方时，可能会更改为这样做`LI`）并在它离开后再次启动它`UL`。演示：http: [//jsfiddle.net/KFyzq/6/](http://jsfiddle.net/KFyzq/6/)

# matlab - Matlab 是否有内置的 OCR 库或工具包？

> ID：13309885
> 
> 赞同：4
> 
> 时间：2012-11-09T14:27:29.543
> 
> 标签：matlab, ocr, tesseract, matlab-cvst

我需要一个预先构建的（即已经训练过的）OCR 库来识别简单的字符（标准字体，如 Arial、Times New Roman、Courier 等）。Matlab 的其中一个工具箱中有类似的东西吗？还是我必须使用像 Tesseract 这样的外部程序（以及使用系统调用的接口）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-07T20:11:32.067

在 MATLAB R2014a 中，计算机视觉系统工具箱中有一个内置的 ocr 函数。 [http://www.mathworks.com/help/vision/ref/ocr.html](http://www.mathworks.com/help/vision/ref/ocr.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:50:48.163

我不熟悉官方的 MATLAB OCR 工具箱。但是，您可以在 MATLAB File Exchange 中找到各种宝石，例如[这个 OCR 工具](http://www.mathworks.com/matlabcentral/fileexchange/18169-optical-character-recognition-ocr)。这很整洁。

# windows - 如何在 Visual Studio 编辑器中禁用字体平滑？

> ID：13309891
> 
> 赞同：10
> 
> 时间：2012-11-09T14:27:42.007
> 
> 标签：windows, fonts, visual-studio-2012

如何在 Visual Studio 的文本编辑器中禁用字体平滑？在我使用的某些机器上，这是可行的，但在大多数机器上都不是。

[左侧编辑器中的文本不是很清晰。但是Windows中的字体是。](http://i.stack.imgur.com/pYqUe.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-01-19T18:14:25.753

有一个名为*Text Sharp*的扩展，它允许您完全禁用 Visual Studio 的字体平滑 (ClearType)：

[https://visualstudiogallery.msdn.microsoft.com/7aafa2ea-8c54-4da8-922e-d26bf018514d](https://visualstudiogallery.msdn.microsoft.com/7aafa2ea-8c54-4da8-922e-d26bf018514d)

我将它与[Source Code Pro](https://store1.adobe.com/cfusion/store/html/index.cfm?event=displayFontPackage&code=1960)字体结合使用以获得非常易读的代码。

好吧，这些字符至少是可读的。代码本身可能是另一回事。:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-05-06T21:22:49.443

在 Visual Studio 2019 v16.5.4（可能更低）中，文本编辑器 -> 高级设置下有一个新功能，称为“文本渲染方法”。这似乎在安装时默认为“ClearType”。在我的机器上，我在操作系统级别禁用了 ClearType，但在全新安装/更新后，我注意到我的字体被平滑了。

只需将此设置切换为“别名”即可恢复像素完美的字体渲染。

[![转到文本编辑器 - 高级 - 文本渲染方法](../Images/ae957774c8bf9051b22226d99a251947.png)](https://i.stack.imgur.com/yO5V5.png)

[![更改为 Aliased 以恢复像素完美渲染](../Images/2ce98b83ecade2e2dba4416af828f091.png)](https://i.stack.imgur.com/9aeBL.png)

同样，这假设您已经在系统级别禁用了 ClearType。我不确定 VS 设置是否会忽略/覆盖系统级 ClearType 设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-13T13:25:25.370

就我而言，问题是我将文本大小设置为 120%，我只是将其更改为 100%。

是位于分辨率选择器上方的显示设置中的一个选项。它说：“更改文本、应用程序和其他项目的大小”将值设置为：100%（推荐）

当我在我的设置中添加一个新的 LCD 显示器时，这发生在我身上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-23T17:50:37.413

根据[blogs.msdn.com](http://blogs.msdn.com/b/visualstudio/archive/2010/03/15/visual-studio-2010-text-clarity-cleartype-and-aliased-fonts.aspx)和[SuperUser 上的这篇文章](https://superuser.com/questions/405066/what-are-all-the-places-where-cleartype-can-be-disabled)，您可能必须在许多地方禁用它，但对于 VStudio，两个就足够了：

*   控制面板 > 显示 > 调整 ClearType 文本
*   控制面板 > 系统 > 调整 Windows 的外观和性能 > 视觉效果 > 屏幕字体的平滑边缘

不要使用`Consolas`它，因为它总是使用 ClearType，正如 Alex K. 在评论中指出的那样。

首选`Lucida Console`固定字体（它们在工具 > 选项 > 环境 > 字体和颜色中的 VStudio 字体列表中为粗体）并且似乎不受 ClearType 或平滑边缘的影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-14T16:10:35.087

对于那些愿意在今天的 VS Code 上禁用抗锯齿/平滑边缘/cleartype 的人，VS Code 程序中没有官方选项可以做到这一点。相反，我发现这种方法对我有用，这要归功于这篇文章：[https ://medium.com/kasun-kodagoda/fix-text-becomes-blurry-when-vs-code-application-loses-focus -问题-Windows-d95697b2f927](https://medium.com/kasun-kodagoda/fix-text-becomes-blurry-when-vs-code-application-loses-focus-issue-on-windows-d95697b2f927)

以下是步骤：

```
<img src="https://i.stack.imgur.com/L2i9S.png" alt="..." />
```

禁用抗锯齿 VSCode 图像：

![禁用抗锯齿 VSCode 图像](../Images/f62a99cecbbff8e4d2e64b3c2d15b25c.png)

1.  右键单击 VS Code 程序并转到属性。

2.  在应用程序的“目标”部分中，添加以下行：`--disable-gpu --enable-use-zoom-for-dsf`

3.  应用更改，就是这样。

我希望它有用。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-02-26T05:18:34.720

对我来说，它有助于切换到“Consolas”字体，然后在工具->选项->环境->字体和颜色中切换回“Courier New”。切换到 Consolas 后不要忘记按“确定”。

# javascript - $(window).scroll 不准确，快速滚动时

> ID：13309895
> 
> 赞同：7
> 
> 时间：2012-11-09T14:28:03.270
> 
> 标签：javascript, jquery

我试图操纵元素的位置，所以在某些页面滚动位置之间，他的 css 被改变了。看看这个简单的例子：http: [//jsfiddle.net/6RtTX/8/](http://jsfiddle.net/6RtTX/8/)

问题是 -`$(window).scroll`不是那么准确，所以如果我滚动得非常快，它就会变得非常混乱。

有没有办法解决这个问题？我可以在 $(window).scroll 方法中对这些操作进行排队吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-16T10:07:21.703

尝试像这样更改小提琴的代码：

```
$(window).scroll(function(event) {
    if ( event.pageY > 100 && event.pageY < 5000) {
        $('.test').css({
            'left' : $(window).scrollTop() - 80,
            'top' : $(window).scrollTop() + 100
        });            
    }
}); 
```

通过使用传递的事件来获取测量值而不是再次测量，我发现准确性大大提高。

# json - 从 KendoUI TreeView 获取当前数据

> ID：13309896
> 
> 赞同：4
> 
> 时间：2012-11-09T14:28:10.493
> 
> 标签：json, treeview, datasource, kendo-ui

我正在使用带有来自 JSON 文件的远程数据源的剑道 UI 树。我在树页面上有一个按钮，它获取树的当前数据，通过 POST 将其发送到服务器，服务器将当前数据保存到 JSON 文件，以便下次我重新加载页面时，我所做的更改将被保留。这就是我想要发生的事情。

所以我知道树的当前数据在：

```
$("#treeview").data("kendoTreeView").dataSource.data() 
```

这意味着数据在那里实时变化，例如当有人拖放树的一个节点时。

我的问题开始于当我在树内拖放节点时这些数据似乎没有改变，并且只有当我将节点拖放到树的根级别时才会改变，即使那样它也不能正确地做到这一点节点也应该移到那里，但是节点被复制，过去的节点也留在树中......

例如，我有这棵树：

![起始树](../Images/8112804a5e32d45cfb8b15d6d7512927.png)

如果我像这样进行拖放更改：

![变化 1](../Images/f4005fb1cd66d161570efc0c15a9b801.png)

我发送数据，保存并重新加载根本没有进行更改！

PS：即使我在发送之前查看更改后的当前数据，我发现数据根本没有更改，即使我通过拖放进行了视觉更改。所以它与发送、保存和服务器。

另一方面，如果我做出这样的改变：

![在此处输入图像描述](../Images/ed4141f77ab142e1d54375e5adc4cb27.png)

我可以在当前数据中看到移动的节点确实添加到了数据的末尾，但它并没有从它在数据中的初始位置删除！所以如果我将当前数据发送到服务器，保存它然后刷新我得到结果：

![在此处输入图像描述](../Images/0dac377af2897007e740311a3b96dae1.png)

查看和发送数据的代码是：

```
function sendData() {
            var req = createRequest();
            var putUrl = "rest/hello/treeData";
            req.open("post", putUrl, true);
            req.setRequestHeader("Content-type","application/json");
            var dsdata = $("#treeview").data("kendoTreeView").dataSource.data();
            alert(JSON.stringify(dsdata));
            req.send(JSON.stringify(dsdata));

            req.onreadystatechange = function() {
                if (req.readyState != 4) {
                    return;
                }
                if (req.status != 200) {
                    alert("Error: " + req.status);
                    return;
                }
                alert("Sent Data Status: " + req.responseText);
            }
        } 
```

这是一个错误还是我做错了什么？有没有人能够在每次拖放时看到当前数据正确更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T10:53:17.763

首先也是最重要的，您必须使用仍处于测试阶段的最新版本的 KendoUI（Kendo UI Beta v2012.3.1024），但他们已经解决了许多问题。

然后，当您创建 kendoTreeView 时，您必须这样说：

```
 tree = $("#treeview").kendoTreeView({
        dataSource :kendo.observableHierarchy(data),
        dragAndDrop:true
    }).data("kendoTreeView"); 
```

这里重要的是**不要**直接使用数据数组，而是用`kendo.observableHierarchy`.

然后，您将使用拖放结果更新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-05T17:17:04.403

对我来说，除了 OnaBai 答案之外，我还必须在保存方法上使用同步功能。我正在使用类型脚本。

```
 this.treeData = new kendo.data.HierarchicalDataSource({
                data: kendo.observableHierarchy([]),//Thanks OnaBai

                schema: {
                    model: {
                        id: "MenuItemId",
                        children: "MenuItemChildren",
                        hasChildren: (e) => {
                            //this removes arrow next to items that do not have children. 
                            return e.MenuItemChildren && e.MenuItemChildren.length > 0;
                        }
                    }
                }
            });

public save() {
        this.treeData.sync().done(() => {
            console.log("sync data"); 
            var myType = this.treeData.view();

            this.$http.post("/api/TreeViewPicker", myType)
                .then((response) => {

                }); 
        });

    } 
```

# xslt - 使用带有 xslt 的查找表替换子字符串

> ID：13309899
> 
> 赞同：4
> 
> 时间：2012-11-09T14:28:29.310
> 
> 标签：xslt, xslt-2.0

我有一些包含十六进制字符串变体的字符串（如果有人愿意的话，来源是 framemaker）。因此，字符串可能看起来像

> 这是一些带有一些十六进制代码\x27 s 的句子，我们需要修复它。

并且需要更改为

> 这是一些带有一些十六进制代码的句子，我们需要修复它。

实际上，单个字符串中可能有其中一些，因此我正在寻找遍历文本、捕获所有十六进制代码（看起来像 \x## ）并用正确的字符替换所有这些代码的最佳方法. 我制作了一个包含所有字符的 xml 列表/查找表，如下所示：

```
<xsl:param name="reflist">
    <Code Value="\x27">'</Code>
<Code Value="\x28">(</Code>
<Code Value="\x29">)</Code>
<Code Value="\x2a">*</Code>
<Code Value="\x2b">+</Code>
    <!-- much more like these... -->
</xsl:param> 
```

现在我使用了一个简单的替换参数，但是字符太多，无法使用。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T05:18:06.860

**可以完全避免使用任何“参考表”——像这样：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:my="my:my" exclude-result-prefixes="my xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="text()[matches(.,  '\\x(\d|[a-f])+')]">
   <xsl:analyze-string select="." regex="\\x(\d|[a-f])+" >
     <xsl:matching-substring>
       <xsl:value-of select=
       "codepoints-to-string(my:hex2dec(substring(.,3), 0))"/>
     </xsl:matching-substring>
     <xsl:non-matching-substring>
      <xsl:value-of select="."/>
     </xsl:non-matching-substring>
   </xsl:analyze-string>
 </xsl:template>

 <xsl:function name="my:hex2dec" as="xs:integer">
  <xsl:param name="pStr" as="xs:string"/>
  <xsl:param name="pAccum" as="xs:integer"/>

  <xsl:sequence select=
   "if(not($pStr))
     then $pAccum
     else
      for $char in substring($pStr, 1, 1),
          $code in
            if($char ge '0' and $char le '9')
              then xs:integer($char)
              else
                string-to-codepoints($char) - string-to-codepoints('a') +10
       return
          my:hex2dec(substring($pStr,2), 16*$pAccum + $code)
   "/>
 </xsl:function>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
 <p>this is some sentence with some hex code\x27 s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x28 s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x29 s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x2a s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x2b s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x2c s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x2d s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x2e s ,
    and we need that fixed.</p>
 <p>this is some sentence with some hex code\x2f s ,
    and we need that fixed.</p>
</t> 
```

**产生了想要的正确结果**：

```
<t>
   <p>this is some sentence with some hex code' s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code( s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code) s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code* s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code+ s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code, s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code- s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code. s ,
    and we need that fixed.</p>
   <p>this is some sentence with some hex code/ s ,
    and we need that fixed.</p>
</t> 
```

**请注意**：

这种转换是*通用*的，可以正确处理任何十六进制 unicode 代码。

**例如，如果在此 XML 文档上应用相同的转换**：

```
<t>
 <p>this is some sentence with some hex code\x0428\x0438\x0448 s ,
    and we need that fixed.</p>
</t> 
```

**产生了正确的结果（包含保加利亚语中“烤架”的西里尔字母）**：

```
<t>
   <p>this is some sentence with some hex codeШиш s ,
    and we need that fixed.</p>
</t> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T15:15:02.773

使用`analyze-string`如

```
<xsl:template match="text()">
  <xsl:analyze-string select="." regex="\\x[0-9a-f]{{2}}" flags="i">
    <xsl:matching-substring>
      <xsl:value-of select="$reflist/Code[@Value = .]"/>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
      <xsl:value-of select="."/>
    </xsl:non-matching-substring>
  </xsl:analyze-string>
</xsl:template> 
```

我还建议使用密钥，例如

```
<xsl:param name="reflist" as="document-node()">
  <xsl:document>
    <Root>
      <Code Value="\x27">'</Code>
      <Code Value="\x28">(</Code>
      <Code Value="\x29">)</Code>
      <Code Value="\x2a">*</Code>
      <Code Value="\x2b">+</Code>
      <!-- much more like these... -->
    </Root>
  </xsl:document>
</xsl:param>

<xsl:key name="code-by-value" match="Code" use="@Value"/> 
```

那么查找可以改进为

```
<xsl:template match="text/text()">
  <xsl:analyze-string select="." regex="\\x[0-9a-f]{{2}}" flags="i">
    <xsl:matching-substring>
      <xsl:value-of select="key('code-by-value', ., $reflist)"/>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
      <xsl:value-of select="."/>
    </xsl:non-matching-substring>
  </xsl:analyze-string>
</xsl:template> 
```

我找到了一些时间将提出的建议转化为工作代码，输入为

```
<root>
  <text>this is some sentence with some hex code\x27 s , and we need that \x28and this\x29 fixed.</text>
</root> 
```

完整的样式表是

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

<xsl:param name="reflist" as="document-node()">
  <xsl:document>
    <Root>
      <Code Value="\x27">'</Code>
      <Code Value="\x28">(</Code>
      <Code Value="\x29">)</Code>
      <Code Value="\x2a">*</Code>
      <Code Value="\x2b">+</Code>
      <!-- much more like these... -->
    </Root>
  </xsl:document>
</xsl:param>

<xsl:key name="code-by-value" match="Code" use="@Value"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="text/text()">
  <xsl:analyze-string select="." regex="\\x[0-9a-f]{{2}}" flags="i">
    <xsl:matching-substring>
      <xsl:value-of select="key('code-by-value', ., $reflist)"/>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
      <xsl:value-of select="."/>
    </xsl:non-matching-substring>
  </xsl:analyze-string>
</xsl:template>

</xsl:stylesheet> 
```

Saxon 9.4 将输入转换如下：

```
<root>
  <text>this is some sentence with some hex code' s , and we need that (and this) fixed.</text>
</root> 
```

# c++ - 从源代码构建 MySQL 连接器/C++（找不到 Boost 库错误）

> ID：13309900
> 
> 赞同：3
> 
> 时间：2012-11-09T14:28:31.997
> 
> 标签：c++, boost, build, cmake

我正在尝试从源代码（在 Windows 7 上）制作 MySQL Connector/C++ 1.1.1 的发布版本，以便我可以在 Visual Studio 2010 的 Win32 项目中使用它（仅限 mysqlcppconn.dll 文件）。我遵循以下说明：

[http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-installation-source-windows.html](http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-installation-source-windows.html)

但是当我尝试执行命令*cmake -G "Visual Studio 10"*时，我收到一条错误消息，提示找不到 Boost 或其某些库。错误是：

```
C:\CMake 2.8\bin>cmake -G "Visual Studio 10"
CMake Warning (dev) in CMakeLists.txt:
A logical block opening on the line

C:/CMake 2.8/bin/CMakeLists.txt:39 (if)

closes on the line

C:/CMake 2.8/bin/CMakeLists.txt:41 (endif)

with mis-matching arguments.
This warning is for project developers.  Use -Wno-dev to suppress it.

-- Environment compile flags:
-- Environment link flags:
-- Could NOT find Boost
-- Could NOT find Boost
CMake Error at CMakeLists.txt:120 (MESSAGE):
Boost or some of its libraries found.  If not in standard place please set
-DBOOST_ROOT:STRING=

-- Configuring incomplete, errors occurred! 
```

首先，我尝试将文件夹 boost_1_49_0 复制到与 CMake 相同的目录（C:\CMake 2.8\bin），但这导致了同样的错误。然后我尝试使用命令 *cmake -DBOOST_ROOT:STRING=\boost_1_49_0* 将 -DBOOST_ROOT:STRING= 变量设置为消息指示的变量，但这也不起作用。

所以我的问题是：如何将变量设置为正确的值，以便可以找到 Boost 库？（我在变量名称上搜索了谷歌，但没有找到结果）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:23:10.820

解决它！我已将 CMakeList 文件中的 BOOST_ROOT 变量更改为正确的路径，然后它终于起作用了。

# css - 图像边框问题

> ID：13309901
> 
> 赞同：0
> 
> 时间：2012-11-09T14:28:37.590
> 
> 标签：css

如果有人可以提供帮助，我有一点 CSS 问题。

所附图像显示了我想用作 div 底部背景图像的切片区域。我试过这个无济于事。

我也尝试将它用作页面底部的边框图像 - 但似乎无法让它发挥作用。由于这在 CSS 中使用渐变，任何人都可以告诉我如何在现有的#main div 中执行此操作，而不是在下面添加一个备用 div（没有内容-淘气）。

一如既往的帮助。

[http://plusonetesting.co.uk/creative/](http://plusonetesting.co.uk/creative/)

啊正在尝试添加图像，但它不会让我把图像放在这里

[http://plusonetesting.co.uk/creative/screen.jpg](http://plusonetesting.co.uk/creative/screen.jpg)

G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:43:19.897

这是一个使用线性渐变作为背景的示例，使用 px 值而不是更常见的 %。

[http://jsfiddle.net/byZPb/](http://jsfiddle.net/byZPb/)

```
#main{
background-image: linear-gradient(bottom, rgb(241,0,105) 5px, rgb(255,27,137) 10px, rgb(40,153,153) 20px);
background-image: -o-linear-gradient(bottom, rgb(241,0,105) 5px, rgb(255,27,137) 10px, rgb(40,153,153) 20px);
background-image: -moz-linear-gradient(bottom, rgb(241,0,105) 5px, rgb(255,27,137) 10px, rgb(40,153,153) 20px);
background-image: -webkit-linear-gradient(bottom, rgb(241,0,105) 5px, rgb(255,27,137) 10px, rgb(40,153,153) 20px);
background-image: -ms-linear-gradient(bottom, rgb(241,0,105) 5px, rgb(255,27,137) 10px, rgb(40,153,153) 20px);
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:25:48.600

You can achieve this effect with `box-shadow`: [http://jsfiddle.net/YxVEy/](http://jsfiddle.net/YxVEy/)

```
#one{
    height:200px;
    background:-webkit-linear-gradient(top, #f0f0f0 0%,#ddd 100%);
    box-shadow:0px 0px 10px 3px rgba(0,0,0,.35);
}
#two{
    position:relative;
    height:200px;
    background:#def;
    z-index:-1;
    box-shadow:0 0px 10px 3px rgba(0,0,0,.45);
} 
```

​<code>position:relative;z-index:-1; allows `#two` to be overlayed by the box-shadow of `one`.

# algorithm - matlab中调用函数

> ID：13309902
> 
> 赞同：0
> 
> 时间：2012-11-09T14:28:42.160
> 
> 标签：algorithm, function, matlab, partition-problem

我在 matlab 中有一个 MinCUT 算法。这是一个功能！我如何从我的邮件文件中调用它！我必须定义所有变量吗？还是我必须只定义输入？

```
function [MinCutGroupsList, MinCutWeight] = MinCut(SourceNodes, WeightedGraph)
%%% performs Min Cut algorithm described in "A Simple Min Cut Algorithm" by
%%% M. Stoer and F. Wagner.

%%% input - 
%%%     SourceNodes - a list of Nodes that are forced to be kept in one side of the cut.
%%%     WeightedGraph - symetric matrix of edge weights. Wi,j is the edge connecting Nodes i,j
%%%                     use Wi,j=0 or Wi,j == inf to indicate unconnected Nodes.
%%% output -
%%%   MinCutGroupsList - two lists of verices, SECOND one contains the sourve vertives
%%%   MinCutWeight - sum of weight of edges alosng the cut

    GraphDim = size(WeightedGraph,1);
    SourceNodes = SourceNodes(SourceNodes ~= 0); %remove zero Nodes

    %%% remove self edges and ZEROed ones
    WeightedGraph = WeightedGraph+diag(inf(1,GraphDim));
    % for ii = 1:GraphDim
    %     WeightedGraph(ii,ii) = inf;
    % end
    WeightedGraph(WeightedGraph == 0) = inf;

    %%%Merge all Source Vrtices to one, so they'll be unbreakable, descending order is VITAL!!!
    SourceNodes = sort(SourceNodes);
    GroupsList = zeros(GraphDim);   %each row are the Nodes melted into one vertex in the table.
    GroupsList(:,1) = 1:GraphDim;
    for ii=length(SourceNodes):-1:2;
        [WeightedGraph,GroupsList] = MeltTwoNodes(SourceNodes(1),SourceNodes(ii),WeightedGraph,GroupsList);
    end
    Split = GroupsList(:,1);

    %%% By now I have a weighted graph in which all seed Nodes are
    %%% merged into one vertex. Run Mincut algrithm on this graph
    [MinCutGroupsList_L, MinCutWeight] = MinCutNoSeed(WeightedGraph);

    %%% Convert Data so the seed Nodes will be reconsidered as different
    %%% Nodes and not one vertex.
    for ii = 1:2
        MinCutGroupsList(ii,:) = Local2GlobalIndices(MinCutGroupsList_L(ii,:), Split);
    end

    if (length(find(MinCutGroupsList(1,:) == SourceNodes(1))) == 1)
        SeedLocation = 1;
    else
        SeedLocation = 2;
    end
    MinCutGroupsList_withSeed = [MinCutGroupsList(SeedLocation,(MinCutGroupsList(SeedLocation,:)~=0)) SourceNodes(2:length(SourceNodes))];
    MinCutGroupsList_withSeed = sort(MinCutGroupsList_withSeed);
    MinCutGroupsList_withSeed = [MinCutGroupsList_withSeed zeros(1,GraphDim - length(MinCutGroupsList_withSeed))];

    MinCutGroupsList_NoSeed = MinCutGroupsList(3 - SeedLocation,(MinCutGroupsList(3 - SeedLocation,:)~=0));
    MinCutGroupsList_NoSeed = sort(MinCutGroupsList_NoSeed);
    MinCutGroupsList_NoSeed = [MinCutGroupsList_NoSeed zeros(1,GraphDim - length(MinCutGroupsList_NoSeed))];

    MinCutGroupsList = [MinCutGroupsList_NoSeed ; MinCutGroupsList_withSeed];

return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:31:10.693

将函数定义放在一个名为的文件中，该文件`MinCut.m`必须位于您当前的 matlab 路径中（例如，您当前的工作目录）。

然后你就可以调用函数编写了

```
 [MinCutGroupsList, MinCutWeight] = MinCut(yourSourceNodes, yourWeightedGraph); 
```

还要考虑[这个答案（Matlab：调用用户定义函数）](https://stackoverflow.com/a/13091418/1714661)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:31:27.323

你可以这样称呼它：

```
MinCut(SourceNodes, WeightedGraph) 
```

或者如果您希望收集输出

```
[MinCutGroupsList, MinCutWeight] = MinCut(SourceNodes, WeightedGraph) 
```

# javascript - 为什么我的 javaScript 不能在本地或服务器上工作，而是在 jsFiddle 上工作

> ID：13309903
> 
> 赞同：0
> 
> 时间：2012-11-09T14:28:44.027
> 
> 标签：javascript, jquery, jsfiddle

这是工作 jsfiddle [http://jsfiddle.net/akshatyagi/SD66b/的链接](http://jsfiddle.net/akshaytyagi/SD66b/)

以下是我试图在我的网站上运行的代码（与一个 jsFiddle 相同）

我在两台电脑上试过。我究竟做错了什么？

```
<html>
<head>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(function() {

var tips = [
    "creative",
    "innovative",
    "awesome",
    "amazing",
    "social"
    ];

setInterval(function() {
    var i = Math.round((Math.random()) * tips.length);
    if (i == tips.length)--i;

    $('#tip').slideUp(500, function() {
        var $this = $(this);
        $this.html(tips[i]);
        $this.toggleClass('first second');
        $this.slideDown(500);
    });

}, 3 *1000);

});
</script>
</head>

<body>
<div style=" background-position:center; background-repeat:no-repeat; background-color:#c84d5f; height:500px">
<div class="thousand">
<div style="font-size:72px; font-family:Museo; padding-top:100px; padding-left:auto; padding-right:auto; color:#FFF;">The <span id="tip">creative</span><br />brand.
</div>
</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T14:29:59.157

您需要将访问 DOM 元素的脚本放入其中，`$(document).ready`以确保元素在被访问之前准备就绪。

```
$(document).ready(function(){

}) 
```

*根据评论编辑*

**改变**

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

**至**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T14:33:23.677

我复制并粘贴了你的 HTML，之后`}, 3 * 1000);`有一个特殊的字符。

删除整行 ( `}, 3 * 1000);`) 并重新键入。

看：

![这里](../Images/75860229e03b8ab68ec9a150c8e7f681.png)

正如 andyb 所评论的那样，如果您在本地加载文件，您的 jquery url 将不起作用。您可以将其更改为 http:// 或将文件上传到某处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:37:02.453

尽管已经给出了正确的答案，但我冒昧地修复了您的标记。我可以建议您使用正确的 CSS 代替内联样式吗？它使您的代码更具可读性，并将标记和设计分开，

```
<html><head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>
    var tips = [
        'creative',
        'innovative',
        'awesome',
        'amazing',
        'social'
    ];

    setInterval(function() {
        var i = Math.round((Math.random()) * tips.length);
        if (i == tips.length)--i;

        $('#tip').slideUp(500, function() {
            var $this = $(this);
            $this.html(tips[i]);
            $this.toggleClass('first second');
            $this.slideDown(500);
        });
    }, 3000);
    </script>
</head><body>
    <div style="background-position:center; background-repeat:no-repeat; background-color:#c84d5f; height:500px">
        <div class="thousand">
            <div style="font-size:72px; font-family:Museo; padding-top:100px; padding-left:auto; padding-right:auto; color:#FFF;">
                The <span id="tip">creative</span><br />brand.
            </div>
        </div>
    </div>
</body></html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:03:43.717

使其在本地工作的问题是 // 链接无法解析为 http:// ( src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min. js 而不仅仅是 src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js")

[感谢@andyb：我想知道为什么谷歌在他们的网站上有不正确的代码。]

# javascript - Sencha Touch 变量访问的问题

> ID：13309905
> 
> 赞同：0
> 
> 时间：2012-11-09T14:28:52.353
> 
> 标签：javascript, model-view-controller, extjs, sencha-touch-2

我对使用 Sencha Touch 很陌生。我正在创建一个具有侧边栏和地图窗格的应用程序，当用户单击侧边栏区域中的“显示地图”按钮时，地图应该以该位置为中心。我遇到的问题是我不确定如何从处理函数访问 tpl 变量中的 {lat} 和 {lon} 属性。如果这是一个微不足道的问题，我很抱歉，但这让我很困惑。

```
Ext.define('Admin.view.Details',
{
extend: 'Ext.Panel',
xtype: 'details',

config:
{
    styleHtmlContent: true,
    scrollable: 'vertical',
    title: 'Individual',
    tpl:
    [
        'Account Number: {comid}',
        '<br />',
        'Address: ',
        '{address} <br />',
        '{lat},{lon}',
    ],

    items:
    [
        {
            title: 'Utilities',
            items:
            [
                {
                    xtype: 'selectfield',
                    label: 'Utility Type',
                    options: 
                    [
                        {text: 'Electricity', value: 'U1'},
                        {text: 'Water', value: 'U2'},
                        {text: 'Gas', value: 'u3' },
                    ],

                    id: 'utilityType',
                },
                {
                    xtype: 'selectfield',
                    label: 'Coverage Area',
                    options: 
                    [
                        {text: 'Subdivision', value: 'a1'},
                        {text: 'Zipcode', value: 'a2'},
                        {text: 'County', value: 'a3' },
                    ],

                    id: 'areaType',
                },
                {
                    xtype: 'button',
                    text: 'Show Map',
                    ui: 'round',
                    padding:3,
                    margin:10,
                    id:  'mapsBTN',
                    handler: function() {

                        olMap.setCenter(new OpenLayers.LonLat(lon, lat).transform
                        (
                            new OpenLayers.Projection("EPSG:4326"),
                            olMap.getProjectionObject()
                        ), 16);

                    }
                },
            ]
        },
    ]
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:21:18.737

您需要通过添加对视图和按钮的引用来在视图的控制器中实现 de 处理程序，然后为`itemtap`按钮的事件添加侦听器，或者在视图的构造函数方法中实现它：

```
Ext.define('Admin.view.Details',{
  extend: 'Ext.Panel',
  xtype: 'details',

  config:{
    ...
  },

  constructor: function() {
    this.callParent(arguments);

    var me = this;

    this.child('#mapsBTN').setHandler(function() {
      me.getTpl(); // Here's your tpl config object
    });
  }
}); 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:45:46.100

您可以通过 getter 获取配置对象内的任何变量。

```
this.getTpl(); //returns tpl variable 
```

还要注意`this`一定要指出你的`Admin.view.Details`观点。

# signal-processing - 从信号中检测曲线形状

> ID：13309909
> 
> 赞同：1
> 
> 时间：2012-11-09T14:29:12.553
> 
> 标签：signal-processing, match, detection, shape, curve

我正在尝试从信号中检测某种**形状**的曲线及其**位置**，如下所示：

（图片链接：[http](http://tinypic.com/view.php?pic=ab5j45&s=6) ://tinypic.com/view.php?pic=ab5j45&s=6 ）

我会将信号作为浮点数组获取。

由于噪声和其他变化，曲线可能不准确，所以我不能使用简单的数字匹配。我想知道 OpenCV 中是否有可以用于此目的的东西。

请注意，我需要检测不同形状的曲线及其在信号中的位置，但如果我知道检测一种类型，我可以使用相同的方法检测其他类型。

问候，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:12:00.283

我会尝试定义一个参数数学函数来表示您想要匹配的形状。

然后，您需要做的就是应用一种技术（例如[最小二乘法](http://en.wikipedia.org/wiki/Least_squares)）来获得与信号曲线最匹配的参数值。

您可能希望将您的函数与滑动窗口进行匹配，尤其是当您想匹配信号中的多个事件时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:05:56.663

噪声和“其他变化”是高频，因此您需要使用低通滤波器对信号进行滤波（对于滤波，使用卷积操作）。看来您的信号频率非常低（可能低于 5KHz？）。过滤后，查看您的信号，当您获得所需的曲线形状时，应用数值匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:31:39.537

匹配滤波器在与给定形状（或要匹配的模式的能量）最匹配的信号的整数位置处具有最高峰。但除此之外，匹配滤波器输出的相邻值通常可用于通过计算 (IIRC) 来微调位置`tau = a-b/(a+b)`，其中 a=峰值，b 是次优值。

如果要匹配的信号具有良好的自相关特性——一个高峰值并且在距峰值 +-1 处接近零（基本上意味着检测导频信号），则此方法尤其有效。

# python - 在 Python 中自动读取配置值

> ID：13309914
> 
> 赞同：3
> 
> 时间：2012-11-09T14:29:57.227
> 
> 标签：python, configuration-files, python-2.6

我想将 Python 中的配置文件完全读入数据结构中，而无需显式“获取”每个值。这样做的原因是我打算以编程方式修改这些值（例如，我将有一个变量表示我想修改`[Foo] Bar = 1`为 be `[Foo] Bar = 2`），目的是根据我的更改编写一个新的配置文件。

目前，我正在手动读取所有值：

```
parser = SafeConfigParser()
parser.read(cfgFile)
foo_bar1 = int(parser.get('Foo', 'Bar1'))
foo_bar2 = int(parser.get('Foo', 'Bar2')) 
```

我希望拥有的（在 Google 方面没有发现太多）是一种将它们读入列表的方法，可以轻松识别它们，以便我可以将该值从列表中拉出并进行更改。

本质上将其称为（或类似）：

```
config_values = parser.read(cfgFile)
foo_bar1      = config_values('Foo.bar1') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:35:55.563

对不起，如果我误解了——这看起来与你所拥有的并没有太大的不同——似乎一个非常简单的子类可以工作：

```
class MyParser(SafeConfigParser):
    def __call__(self,path,type=int):
        return type(self.get(*path.split('.'))) 
```

当然，您实际上也不*需要*子类。你可以把这些东西`__call__`放到一个单独的函数中......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:02:24.553

你在运行python 2.7吗？

几个月前我发现了一种很好的方法来解析配置文件并使用字典理解设置字典。

```
config = ConfigParser.ConfigParser()
config.read('config.cfg')
# Create a dictionary of complete config file, {'section':{'option':'values'}, ...}
configDict = {section:{option:config.get(section,option) for option in config.options(section)} for section in config.sections()} 
```

尽管这种方式更难阅读，但它占用的空间更少，而且您不必显式声明您想要获取的每个变量。

*   注意：这不适用于 python 2.6（*我知道）。我过去曾在使用它的地方编写过脚本，并且由于我在 Windows 上运行 2.7，因此在运行 2.6 的 linux 机器上的某些人会在字典理解上崩溃。

- 编辑 -

您仍需要手动更改值的数据类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:22:15.413

```
import sys
from ConfigParser import SafeConfigParser

parser = SafeConfigParser()
parser.readfp(sys.stdin)

config = dict((section, dict((option, parser.get(section, option))
                             for option in parser.options(section)))
              for section in parser.sections())
print config 
```

### 输入

```
[a]
b = 1
c = 2
[d]
e = 3 
```

### [输出](http://ideone.com/HUIFfy)

```
{'a': {'c': '2', 'b': '1'}, 'd': {'e': '3'}} 
```

# statistics - 在社交网络 vk.com 中生成视图时，YouTube 统计数据无法正常工作

> ID：13309916
> 
> 赞同：2
> 
> 时间：2012-11-09T14:29:59.777
> 
> 标签：statistics, youtube-api

请帮助我们解决以下问题。YouTube 统计数据不计算在 vk.com 社交网络中生成的所有观看次数。例如，根据他们的统计，这个视频 - [http://www.youtube.com/watch?v=EUpwC6ZxAA8-](http://www.youtube.com/watch?v=EUpwC6ZxAA8-)在 vk.com 上有超过 220,000 次观看。但是您的统计数据显示，其中只有 188,756 个是在 vk.com 上制作的。我们知道这一点是因为 vk.com 使用 YouTube API 收集自己的统计数据。你能否检查一下这个问题，也许你可以给我们写一个简短的答案，为什么会这样。先感谢您。

最好的问候，安东

# android - 从当前活动访问不同的布局参数

> ID：13309918
> 
> 赞同：0
> 
> 时间：2012-11-09T14:30:14.737
> 
> 标签：android, android-layout

假设我当前的活动是`Main.java`并且我已经通过`setContentView(R.layout.layout1)`它的`onCreate`方法声明了它的布局。现在，我是否可以通过任何方式访问不同的布局？例如，假设有另一个布局 -`layout2`具有`TextView`id `tv`，那么我将无法执行以下代码`Main.java`：

```
TextView text = (TextView) findViewById(R.id.tv);
text.setText("blah blah"); 
```

有什么方法可以让我`tv`从`Main.java`.

我的实际代码如下

```
setContentView(R.layout.layout);
Button button = (Button) findViewById(button);
    button(buttonListener);
Dialog dialog; 
```

在侦听器内部，我有以下代码：

```
TextView dialogTitle = (TextView) findViewById(R.id.dialog_title);
        dialogTitle.setText("Email");

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        View customView = getLayoutInflater().inflate(R.layout.dialog, null);
        builder.setView(customView);            

        dialog = builder.create();
                    dialog.show(); 
```

我面临的问题`dialog_title`是在 dialog.xml 而不是`layout.xml`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:40:29.013

您可以随时扩充您想要的任何 XML 布局：

```
 View layout2 = LayoutInflater.from(this).inflate(R.layout.layout2, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:39:35.073

您可以使用`Bundles`

**在活动 1**

```
String your_string = "Hello, World!";
Bundle bundle = new Bundle();
bundle.putString("The key for this string", your_string );

Intent ActivityToLaunch= new Intent(this, ActivityB.class); 
ActivityToLaunch.putExtras(bundle);
this.startActivity(ActivityToLaunch); 
```

**在活动 2**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout2); //Setup some layout, set to your own

    String content = getIntent().getExtras().getString("The key for this string");
    TextView text = (TextView) findViewById(R.id.tv);
    text.setText(content);     
} 
```

**线程启动者说他想提出一个自定义对话框，所以这里是编辑**

这是我的类，它将生成一个自定义对话框：

```
public class ErrorDialog {

    TextView msgTextView;
    Button toSettings;
    final Context c;
    Dialog errorDialog;

   /**
     * @param c The Context
     * @param title Title of the Dialog
     * @param msg Message og the Dialog
     * @param textOnButton The text on the button
     */

    public ErrorDialog(final Context c, String title, String msg, String textOnButton) {

        this.c = c;
        errorDialog = new Dialog(c);
        errorDialog.setContentView(R.layout.error_dialog);
        errorDialog.setTitle(title);

        msgTextView = (TextView) errorDialog.findViewById(R.id.errorMSG);
        msgTextView.setText(msg);

        toSettings = (Button) errorDialog.findViewById(R.id.toSettings);
        toSettings.setText(text);
        toSettings.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

               //doing operations when the user clicks my button in the dialog. 
            } 
        });

        errorDialog.show();
        errorDialog.setCancelable(true);
    }
} 
```

以这种方式使用此类：

```
new ErrorDialog(getApplicationContext(), "My Title", "My Message to the user", "Text on the button"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:02:45.200

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
        View customView = getLayoutInflater().inflate(R.layout.dialog, null);
        builder.setView(customView);      
TextView dialogTitle = (TextView) customView.findViewById(R.id.dialog_title); 
dialogTitle.setText("Email"); 
```

# spring - Spring 3.1.1 中的 Spring factorybean 错误，但 3.1.0 中没有

> ID：13309921
> 
> 赞同：1
> 
> 时间：2012-11-09T14:30:19.057
> 
> 标签：spring, spring-3

我有一个上下文文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<bean id="aFactoryBean" class="com.kilo.SpecialFactoryBean"
    factory-method="createInstance">
</bean>

</beans> 
```

使用 Spring v 3.1.1.RELEASE 时加载上下文失败并出现异常`Exception in thread "main" org.springframework.beans.factory.BeanIsNotAFactoryException: Bean named 'aFactoryBean' must be of type [org.springframework.beans.factory.FactoryBean], but was actually of type [com.kilo.SpecialObject]`，而使用 v 3.1.0.RELEASE 时同样可以正常工作。以为我可能会在这里问我是否在配置时遗漏了一些明显的东西，然后错误地将其声明为错误:)

**SpecialFactoryBean.java**

```
package com.kilo;

import org.springframework.beans.factory.FactoryBean;

public class SpecialFactoryBean implements FactoryBean<SpecialObject> {

private static SpecialObject ourInstance;

@Override
public SpecialObject getObject() throws Exception {
    return ourInstance;
}

@Override
public Class<?> getObjectType() {
    return SpecialObject.class;
}

@Override
public boolean isSingleton() {
    return true;
}

public static SpecialObject createInstance() {
    if (ourInstance == null) {
        init();
    }
    return ourInstance;
}

private static void init() {
    ourInstance = new SpecialObject();
}

} 
```

**特殊对象.java**

```
package com.kilo;

import org.apache.log4j.Logger;

public class SpecialObject {

private static final Logger LOG = Logger.getLogger(SpecialObject.class);

public void doSomething() {
    LOG.info("Did something special");
}

} 
```

**SpringFBDriver.java**

```
package com.kilo;

import org.apache.log4j.Logger;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class SpringFBDriver {

private static final Logger LOG = Logger.getLogger(SpringFBDriver.class);

private static ApplicationContext applicationContext;

public static void main(String[] args) {
    applicationContext = new ClassPathXmlApplicationContext(
            "classpath:com/kilo/applicationContext.xml");
    LOG.info("Inited");
    doSomething();
}

private static void doSomething() {
    SpecialObject specialObject = applicationContext
            .getBean(SpecialObject.class);
    specialObject.doSomething();
}

}

Exception in thread "main" org.springframework.beans.factory.BeanIsNotAFactoryException: Bean named 'aFactoryBean' must be of type [org.springframework.beans.factory.FactoryBean], but was actually of type [com.kilo.SpecialObject]
at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1420)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:305)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at com.kilo.SpringFBDriver.main(SpringFBDriver.java:15) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:53:45.597

我认为您混淆[了文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)中指定的*工厂 bean*和**工厂 Bean 。**

> 在 Spring 文档中，工厂 bean 是指在 Spring 容器中配置的 bean，它将通过实例或静态工厂方法创建对象。相比之下， FactoryBean （注意大写）指的是 Spring 特定的 FactoryBean 。

您的类已经是**FactoryBean**，因此您无需指定它为工厂 bean 保留的方法 factory-method="createInstance" - 可以创建简单对象的普通旧 bean，而不是`FactoryBeans`集成到 bean 定义中的那些。

# c# - POCO、ORM 和不变性。如何让它们协同工作？

> ID：13309925
> 
> 赞同：4
> 
> 时间：2012-11-09T14:30:42.390
> 
> 标签：c#, orm, poco, immutability

假设我有以下 C# 类，我希望它是不可变的。您只能使用参数化构造函数来设置它。

```
public class InsulineInjection
{
    private InsulineInjection()
    {
        // We don't want to enable a default constructor.
    }

    public InsulineInjection(Millilitre millilitre, DateTime dateTime, string remark)
    {
        this.Remark = remark;
        this.DateTime = dateTime;
        this.Millilitre = millilitre;
    }

    public string Remark { get; private set; }
    public DateTime DateTime { get; private set; }
    public Millilitre Millilitre { get; private set; }
} 
```

现在我想使用 ORM 来创建这个 POCO。但是，据我所见，所有 .NET ORM 都期望属性是可访问的，并且具有能够创建此 POCO 的公共构造函数。所以我不得不把我的 POCO 改成这样：

```
public class InsulineInjection
{
    public InsulineInjection()
    {
    }

    public InsulineInjection(Millilitre millilitre, DateTime dateTime, string remark)
    {
        this.Remark = remark;
        this.DateTime = dateTime;
        this.Millilitre = millilitre;
    }

    public string Remark { get; set; }
    public DateTime DateTime { get; set; }
    public Millilitre Millilitre { get; set; }
} 
```

然而，这使我的 POCO 再次可变。使用它的人可以在之后简单地更改任何我不想要的属性。

据我所知，我可以通过两种不同的方式解决这个问题：

1.  编写我自己的数据访问层（或修改 orm），以便能够使用我创建的构造函数创建正确的 POCO 实例。
2.  创建某种映射器。让 ORM 创建简单的 DTO 对象，并在适当的时候使用映射器将 DTO 对象转换为我的 POCO。

我倾向于解决方案2。有人有如何做到这一点的例子吗？或者有人有比我上面描述的更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:36:28.927

只要有默认的构造函数和设置器，许多 OR/M 就可以工作（无论它们是否公开，它们都必须存在）

所以这不起作用（没有默认构造函数）：

```
public class InsulineInjection
{
    public InsulineInjection(Millilitre millilitre, DateTime dateTime, string remark)
    {
        this.Remark = remark;
        this.DateTime = dateTime;
        _millilitre = millilitre;
    }

    public string Remark { get; set; }
    public DateTime DateTime { get; set; }
    public Millilitre Millilitre { get { return _millilitre; } }
} 
```

或者这个（最后一个属性没有设置器）

```
public class InsulineInjection
{
    public InsulineInjection(Millilitre millilitre, DateTime dateTime, string remark)
    {
        this.Remark = remark;
        this.DateTime = dateTime;
        _millilitre = millilitre;
    }

    public string Remark { get; set; }
    public DateTime DateTime { get; set; }
    public Millilitre Millilitre { get { return _millilitre; } }
} 
```

虽然这会起作用：

```
public class InsulineInjection
{
    protected InsulineInjection()
    {
        // works with many OR/Ms
    }

    public InsulineInjection(Millilitre millilitre, DateTime dateTime, string remark)
    {
        this.Remark = remark;
        this.DateTime = dateTime;
        this.Millilitre = millilitre;
    }

    public string Remark { get; private set; }
    public DateTime DateTime { get; private set; }
    public Millilitre Millilitre { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:36:13.550

为了避免构造函数被你自己的代码使用，你可以使用[Obsolete 属性](http://msdn.microsoft.com/en-us/library/system.obsoleteattribute.aspx)

```
[Obsolete("Default constructor only here for the ORM", true)]
public InsulineInjection() {} 
```

如果您实际调用此构造函数，则传入`true`属性将产生编译器错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T14:36:05.680

并非所有 .NET ORM 都需要公共属性访问权限才能写入数据。NHibernate 支持将数据写入私有字段或设置器。但是，您需要遵循允许的字段命名约定之一，以便它可以从属性名称中推断出字段名称。

[查看有关属性映射的 NHibernate 文档](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-property)，特别是查看表 5.1。访问策略和表 5.2。命名策略。查看`nosetter`访问策略并选择适合您的编码风格的命名策略。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-19T01:06:12.770

此场景由[dapper-dot-net](https://github.com/StackExchange/dapper-dot-net)本地处理。

您只需要查询字段的顺序和类型来匹配构造函数参数的顺序和类型。因此，对于您的班级，查询将类似于：

```
select millilitre, 
    ,dateTime
    ,remark
from injections 
```

不幸的是，dapper 不知道如何将十进制转换为毫升。

# c++ - C++ 技术：类型擦除与纯多态性

> ID：13309927
> 
> 赞同：22
> 
> 时间：2012-11-09T14:30:45.880
> 
> 标签：c++, paradigms

比较这两种技术的优点/缺点是什么？更重要的是：为什么以及何时应该使用一个而不是另一个？这只是个人品味/偏好的问题吗？

尽我所能，我还没有找到另一个明确解决我的问题的帖子。在有关多态性和/或类型擦除的实际使用的许多问题中，以下似乎是最接近的，或者看起来如此，但它也没有真正解决我的问题：

[C++ -& CRTP 。类型擦除与多态性](https://stackoverflow.com/questions/4316317/c-crtp-type-erasure-vs-polymorphism)

请注意，我非常了解这两种技术。为此，我在下面提供了一个简单、独立的工作示例，如果觉得不必要，我很乐意将其删除。但是，该示例应阐明这两种技术对我的问题的意义。我对讨论命名法不感兴趣。另外，我知道编译时和运行时多态性之间的区别，尽管我认为这与问题无关。请注意，我对性能差异的兴趣不大，如果有的话。但是，如果有一个基于性能的引人注目的论点，我会很好奇阅读它。特别是，我想听听仅适用于这两种方法之一的具体示例（无代码）。

看下面的例子，一个主要的区别是内存管理，对于多态性，它仍然在用户端，而对于类型擦除，它被巧妙地隐藏起来，需要一些引用计数（或提升）。话虽如此，根据使用场景，多态示例的情况可能会通过使用带有向量 (?) 的智能指针来改善，尽管对于任意情况，这很可能会变得不切实际 (?)。另一个可能支持类型擦除的方面可能是公共接口的独立性，但为什么这会是一个优势（？）。

下面给出的代码已使用 MS VisualStudio 2008 进行了测试（编译和运行），只需将以下所有代码块放入单个源文件中即可。它也应该在 Linux 上用 gcc 编译，或者我希望/假设，因为我看不出为什么不（？） :-) 为了清楚起见，我在这里拆分/划分了代码。

这些头文件应该足够了，对吧（？）。

```
#include <iostream>
#include <vector>
#include <string> 
```

简单的引用计数来避免提升（或其他）依赖。此类仅在下面的类型擦除示例中使用。

```
class RefCount
{
  RefCount( const RefCount& );
  RefCount& operator= ( const RefCount& );
  int m_refCount;

  public:
    RefCount() : m_refCount(1) {}
    void Increment() { ++m_refCount; }
    int Decrement() { return --m_refCount; }
}; 
```

这是简单的类型擦除示例/插图。它是从以下文章中复制和修改的。主要是我试图让它尽可能清晰和直接。 [http://www.cplusplus.com/articles/oz18T05o/](http://www.cplusplus.com/articles/oz18T05o/)

```
class Object {
  struct ObjectInterface {
    virtual ~ObjectInterface() {}
    virtual std::string GetSomeText() const = 0;
  };

  template< typename T > struct ObjectModel : ObjectInterface {
    ObjectModel( const T& t ) : m_object( t ) {}
    virtual ~ObjectModel() {}
    virtual std::string GetSomeText() const { return m_object.GetSomeText(); }
    T m_object;
 };

  void DecrementRefCount() {
    if( mp_refCount->Decrement()==0 ) {
      delete mp_refCount; delete mp_objectInterface;
      mp_refCount = NULL; mp_objectInterface = NULL;
    }
  }

  Object& operator= ( const Object& );
  ObjectInterface *mp_objectInterface;
  RefCount *mp_refCount;

  public:
    template< typename T > Object( const T& obj )
      : mp_objectInterface( new ObjectModel<T>( obj ) ), mp_refCount( new RefCount ) {}
    ~Object() { DecrementRefCount(); }

    std::string GetSomeText() const { return mp_objectInterface->GetSomeText(); }

    Object( const Object &obj ) {
      obj.mp_refCount->Increment(); mp_refCount = obj.mp_refCount;
      mp_objectInterface = obj.mp_objectInterface;
    }
};

struct MyObject1 { std::string GetSomeText() const { return "MyObject1"; } };
struct MyObject2 { std::string GetSomeText() const { return "MyObject2"; } };

void UseTypeErasure() {
  typedef std::vector<Object> ObjVect;
  typedef ObjVect::const_iterator ObjVectIter;

  ObjVect objVect;
  objVect.push_back( Object( MyObject1() ) );
  objVect.push_back( Object( MyObject2() ) );

  for( ObjVectIter iter = objVect.begin(); iter != objVect.end(); ++iter )
    std::cout << iter->GetSomeText();
} 
```

就我而言，这似乎使用多态性实现了几乎相同的效果，或者可能不是（？）。

```
struct ObjectInterface {
  virtual ~ObjectInterface() {}
  virtual std::string GetSomeText() const = 0;
};

struct MyObject3 : public ObjectInterface {
  std::string GetSomeText() const { return "MyObject3"; } };

struct MyObject4 : public ObjectInterface {
  std::string GetSomeText() const { return "MyObject4"; } };

void UsePolymorphism() {
  typedef std::vector<ObjectInterface*> ObjVect;
  typedef ObjVect::const_iterator ObjVectIter;

  ObjVect objVect;
  objVect.push_back( new MyObject3 );
  objVect.push_back( new MyObject4 );

  for( ObjVectIter iter = objVect.begin(); iter != objVect.end(); ++iter )
    std::cout << (*iter)->GetSomeText();

  for( ObjVectIter iter = objVect.begin(); iter != objVect.end(); ++iter )
    delete *iter;
} 
```

最后一起测试以上所有内容。

```
int main() {
  UseTypeErasure();
  UsePolymorphism();
  return(0);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:27:57.290

基于 C++ 风格的虚拟方法的多态性：

1.  您必须使用类来保存您的数据。
2.  每个类都必须在构建时考虑到您特定的多态性。
3.  每个类都有一个通用的二进制级依赖关系，它限制了编译器如何创建每个类的实例。
4.  您正在抽象的数据必须明确描述一个描述您的需求的接口。

基于 C++ 样式模板的类型擦除（使用基于虚拟方法的多态性进行擦除）：

1.  您必须使用模板来谈论您的数据。
2.  您正在处理的每一块数据可能与其他选项完全无关。
3.  类型擦除工作在公共头文件中完成，这会增加编译时间。
4.  每种擦除的类型都有自己的模板实例化，这会使二进制大小膨胀。
5.  您正在抽象的数据不需要写成直接依赖于您的需求。

现在，哪个更好？好吧，这取决于在您的特定情况下上述事情是好是坏。

作为一个明确的例子，`std::function<...>`使用类型擦除允许它获取函数指针、函数引用、一大堆在编译时生成类型的基于模板的函数的输出、无数具有 operator() 的仿函数和 lambda。所有这些类型都彼此无关。并且因为它们不依赖于 ，所以`virtual operator()`当它们在`std::function`上下文之外使用时，它们所代表的抽象可以被编译掉。如果没有类型擦除，您将无法做到这一点，而且您可能不想这样做。

另一方面，仅仅因为一个类有一个名为 的方法`DoFoo`，并不意味着它们都做同样的事情。使用多态性，它不仅仅是`DoFoo`你调用的任何东西，而是`DoFoo`来自特定接口。

至于你的示例代码......你`GetSomeText`应该`virtual ... override`在多态的情况下。

没有必要仅仅因为您使用类型擦除而引用计数。没有必要仅仅因为使用多态而不使用引用计数。

在另一种情况下，您可以像存储原始指针的方式一样`Object`包装s ，手动销毁它们的内容（相当于必须调用 delete）。您可以包装 a ，在另一种情况下您可以包装of 。您可以包含 a ，相当于在另一种情况下拥有一个向量。您的 's可以从中提取复制构造函数和赋值运算符并将它们公开给，从而为您的 提供完整的值语义，这对应于您的多态情况中的 a of 。`T*``vector``Object``std::shared_ptr<T>``vector``std::shared_ptr<T>``Object``std::unique_ptr<T>``std::unique_ptr<T>``Object``ObjectModel``T``Object``Object``vector``T`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T15:32:43.573

这是一种观点：这个问题似乎是在询问应该如何在后期绑定（“运行时多态性”）和早期绑定（“编译时多态性”）之间进行选择。

正如KerrekSB 在他的评论中指出的那样，您可以使用后期绑定来做一些事情，而使用早期绑定是不现实的。策略模式（解码网络 I/O）或抽象工厂模式（运行时选择的类工厂）的许多用途都属于这一类。

如果这两种方法都是可行的，那么选择就是所涉及的权衡问题。在 C++ 应用程序中，我看到的早期绑定和后期绑定之间的主要权衡是实现的可维护性、二进制大小和性能。

至少有些人觉得任何形状或形式的 C++ 模板都无法理解。或者可能对模板有一些其他不那么引人注目的保留。C++ 模板有很多小问题（“我什么时候需要使用 'typename' 和 'template' 关键字？”）和不明显的技巧（想到 SFINAE）。

另一个权衡是优化。当您尽早绑定时，您可以向编译器提供有关您的程序的更多信息，因此它可以（可能）更好地优化工作。当您晚绑定时，编译器（可能）不会提前知道那么多信息——其中一些信息可能在其他编译单元中，因此优化器不能做那么多。

另一个权衡是程序大小。至少在 C++ 中，使用“编译时多态性”有时会膨胀二进制大小，因为编译器会为每个使用的专业化创建、优化和发出不同的代码。相反，当绑定较晚时，只有一个代码路径。

比较在不同背景下做出的相同权衡是很有趣的。以 Web 应用程序为例，其中使用（某种类型的）多态性来处理浏览器之间的差异，并可能用于国际化（i18n）/本地化。现在，一个手写的 JavaScript Web 应用程序可能会在这里使用相当于后期绑定的方法，方法是在运行时检测功能以确定要做什么。像 jQuery 这样的库采用了这种方法。

另一种方法是为每种可能的浏览器/i18n 可能性编写不同的代码。虽然这听起来很荒谬，但绝非闻所未闻。Google Web Toolkit 使用这种方法。GWT 有其“延迟绑定”机制，用于将编译器的输出专门用于不同的浏览器和不同的本地化。GWT 的“延迟绑定”机制使用早期绑定：GWT Java-to-JavaScript 编译器找出可能需要多态性的所有可能方式，并为每种方式生成一个完全不同的“二进制”。

权衡是相似的。想一想如何使用延迟绑定来扩展 GWT 可能会让人头疼。在编译时掌握知识允许 GWT 的编译器分别优化每个专业化，可能会产生更好的性能，并且每个专业化的大小都会更小；由于所有预编译的特化，整个 GWT 应用程序的大小最终可能是可比较的 jQuery 应用程序的许多倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T11:24:22.377

这里没有人提到的运行时泛型的一个好处（？）是生成并注入正在运行的应用程序中的代码的可能性，使用相同的`List`，`Hashmap / Dictionary`等等，该应用程序中的所有其他东西已经在使用。*为什么*要这样做，是另一个问题。

# rest - RESTful Web 服务是否被视为 SOA 的一个示例？

> ID：13309929
> 
> 赞同：2
> 
> 时间：2012-11-09T14:30:58.363
> 
> 标签：rest, soa

REST 是否构成面向服务的架构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:28:13.120

SOA 和 REST 都是架构风格。它们有一些共同的架构风格，它们借鉴了（如客户端/服务器和分层系统），但也借鉴了一些不共享的不同风格（例如，SOA 建立在管道和过滤器上，REST 建立在统一接口上）。

您可以构建 RESTful SOA，但您必须遵守两者的原则。也不要将 REST 与仅使用 HTTP 技术实现 SOA 混淆。

你可以看到[这个 pdf](http://www.manning.com/rotem/SOAp_SampleCh10.pdf)，其中包含[我的书](http://arnon.me/soa-patterns/)的第 10 章。10.1 节更详细地讨论了 REST 和 SOA

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:01:34.617

这是一个非常哲学和非常普遍的问题，很可能会被删除，不过我会分享我的想法。

有一个名为 Resource Oriented Architectures 的概念，由 Richardson 和 Ruby 在[*RESTful Web Services (O'REILLY 2007)*](http://shop.oreilly.com/product/9780596529260.do)中定义。我认为该术语是描述最常见的 REST 方法的最佳术语。

ROA的主要思想由四个概念定义：

> 1.  资源
> 2.  他们的名字（URI）
> 3.  他们的陈述
> 4.  他们之间的联系

和四个属性：

> 1.  可寻址性
> 2.  无国籍状态
> 3.  连通性
> 4.  统一的界面

在谈论 RESTful Web 服务时，我认为坚持使用 ROA 一词以及它所承载的所有信息是很好的。

至于 SOA，这个名字非常模糊。有些人认为它应该只保留给大（基于 SOAP）的 Web 服务。就个人而言，我认为 ROA 是 SOA 的一种变体。然而，这本书的作者拒绝发表最终声明。

> 面向服务的体系结构 (SOA) 可能是所有术语中定义最不明确的术语，这就是为什么我在第 1 章中将其称为我不打算使用的术语。我知道没有试金石可以表明给定的实现是否是 SOA。
> 
> Richardson & Ruby，*RESTful Web 服务*，O'REILLY 2007

编辑

此处引用的书[已根据知识共享许可提供，现在可以免费下载](http://restfulwebapis.org/rws.html)。

# php - Symfony 1.4：对已认证和未认证用户的功能测试

> ID：13309931
> 
> 赞同：1
> 
> 时间：2012-11-09T14:31:04.183
> 
> 标签：php, symfony-1.4, functional-testing

我正在使用 Propel ORM 为 symfony 1.4.19 网站编写一些功能测试。我的某些页面显示方式不同，具体取决于用户是否已登录（经过身份验证）。

我一直在看[在线文档](http://symfony.com/legacy/doc/jobeet/1_4/en/09?orm=Propel)，看看如何实现：

1.  根据用户是否登录（经过身份验证）（视情况而定）运行的测试
2.  作为功​​能测试的一部分，如何登录或注销用户。

但是，我似乎找不到任何显示如何执行此操作的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:26:45.373

登录：

```
$username = 'root';
$password = 'root';

$browser->
  post('/login', array('signin' => array('username' => $username, 'password' => $password)))->
  with('request')->begin()->
    isParameter('module', 'sfGuardAuth')->
    isParameter('action', 'signin')->
  end()->
  with('response')->begin()->
    isStatusCode(302)->
    isRedirected()->
  end()->
  followRedirect()
; 
```

注销：

```
$browser->
  get('/logout')->
  with('request')->begin()->
    isParameter('module', 'sfGuardAuth')->
    isParameter('action', 'signout')->
  end()->
  with('response')->begin()->
    isStatusCode(302)->
    isRedirected()->
  end()->
  followRedirect()
;

// this will reset session
$browser->restart(); 
```

# c++ - 如何使这些测试用例代码更好？

> ID：13309937
> 
> 赞同：0
> 
> 时间：2012-11-09T14:31:15.400
> 
> 标签：c++, unit-testing, refactoring, tdd

我是 TDD 和 C++ 的新生，我写了一些代码作品，但看起来很难看......

你能给我一些关于如何重构这些代码的提示吗？

我这样定义测试用例：

```
// define some test case
namespace test_case_planes {
const std::string t_filename = "planes.segy_first_trace";
boost::uintmax_t t_file_size = 5888;
boost::uintmax_t t_traces_size = 1;
boost::int16_t t_trace_samples_size = 512;
boost::int16_t t_sample_interval = 4000; // 2000us, 2ms
}

namespace test_case_ld0042_file_00018 {
const std::string t_filename = "ld0042_file_00018.sgy_first_trace";
boost::uintmax_t t_file_size = 12040;
boost::uintmax_t t_traces_size = 1;
boost::int16_t t_trace_samples_size = 2050;
boost::int16_t t_sample_interval = 2000; // 2000us, 2ms
} 
```

并像这样测试（用谷歌测试）

```
TEST(Segy, constructWithNoParas){
    using namespace test_case_planes;
    segy::Segy* test_segy = new segy::Segy();
    EXPECT_EQ(test_segy->getFilename(), t_filename);
}

TEST(Segy, constructWithFilename){
    using namespace test_case_ld0042_file_00018;
    segy::Segy* test_segy = new segy::Segy(t_filename);
    EXPECT_EQ(test_segy->getFilename(), t_filename);
}

TEST(Segy, setFilename){
    using namespace test_case_ld0042_file_00018;
    segy::Segy* test_segy = new segy::Segy();
    test_segy->setFilename(t_filename);
    EXPECT_EQ(test_segy->getFilename(), t_filename);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:33:32.587

I think what you are looking for is a fixture. I am not familiar with google test, but test fixtures should be available in most test frameworks. You should look into the documentation for that.

# gradle - gradle eclipse 总是说我的 webapp:eclipse 是最新的

> ID：13309938
> 
> 赞同：1
> 
> 时间：2012-11-09T14:31:21.417
> 
> 标签：gradle

我正在尝试获取 .classpath 文件中的源引用，因此我删除了我的 webapp/.classpath、webapp/.project 和 webapp/.settings 的东西，但 gradle 每次都会打印这个...

```
:eclipseClasspath
:eclipseJdt
:eclipseProject
:eclipse
:master:eclipseClasspath
:master:eclipseJdt
:master:eclipseProject
:master:eclipse
:webapp:eclipse UP-TO-DATE 
```

不，它显然不是最新的，因为它没有 .classpath 文件！！！！grrrrrrr，我的 webapp 依赖项是这样定义的......（**主项目使用 ivy 来定义很多依赖项**）

```
 dependencies {
        compile project(':master')

        compile fileTree(dir: '../webapp/play-1.2.5/framework/lib', include: '*.jar')
                                                                                    //, excludes: ['*log4j*','slf4j*'])
        compile fileTree(dir: '../webapp/play-1.2.5/framework', include: 'play-*.jar')
    } 
```

我的主依赖是这样的

```
 project(':master') {
    project.ext.genLibDir = file('../webapp/lib')
    project.ext.fixedLibDir = file('libother')

    configurations {
        compile.exclude module: 'commons'
    all*.exclude group: 'org.springframework'
    all*.exclude module: 'log4j'
    all*.exclude module: 'slf4j-log4j12'
    all*.exclude module: 'junit'
    all*.exclude module: 'antlr'
    all*.exclude module: 'snakeyaml'
    }

    dependencies {
            compile group: 'org.acegisecurity',  name: 'acegi-security',          version: '1.0.7'

            //compile group: 'org.hibernate',    name: 'hibernate-entitymanager', version: '4.1.4.Final'
            //compile group: 'org.slf4j',          name: 'slf4j-api',               version: '1.6.6'
            compile 'org.slf4j:log4j-over-slf4j:1.6.6'
            compile 'org.slf4j:jcl-over-slf4j:1.6.6'
            compile 'com.ning:async-http-client:1.7.6'
            //ERASE this one as this client seems to suck usability-wise!!!
            compile 'org.apache.httpcomponents:httpasyncclient:4.0-beta3'

            compile group: 'ch.qos.logback',     name: 'logback-core',            version: '1.0.6'
            compile group: 'ch.qos.logback',     name: 'logback-classic',         version: '1.0.6'
            //compile group: 'joda-time',         name: 'joda-time',               version: '2.1'
            compile group: 'org.codehaus.jackson', name: 'jackson-mapper-asl',    version: '1.9.8' 
```

有什么想法可能是错的吗？为什么它不会生成我的 .classpath 文件？？？

我正在运行“gradle eclipse”

在 webapp:eclipse 的这些日志中打开调试结果

```
07:34:13.822 [LIFECYCLE] [org.gradle.TaskExecutionLogger] :webapp:eclipse
07:34:13.822 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Starting to execute task ':webapp:eclipse'
07:34:13.823 [INFO] [org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter] Skipping task ':webapp:eclipse' as it has no actions.
07:34:13.823 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task ':webapp:eclipse'
07:34:13.823 [LIFECYCLE] [org.gradle.TaskExecutionLogger] :webapp:eclipse UP-TO-DATE 
```

我应该提到的构建文件的另一部分是我将 eclipse 插件应用于所有项目，就像这样

```
 allprojects {
    apply plugin: 'java'
    apply plugin: 'eclipse' 
```

项目结构简单

```
SDI
   master
   webapp 
```

在我看来，日志记录不够好，因此本身就是一个错误，因为任何最新的东西都应该真正告诉你为什么，所以我可以继续。无论如何要打开更多日志记录？

谢谢，院长

# ruby-on-rails - 使用 Mustache 和 Rails 3.2 输出纯文本

> ID：13309939
> 
> 赞同：0
> 
> 时间：2012-11-09T14:31:23.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mustache

我使用 Mustache 作为一个非常基本的模板引擎，供我的用户创建配置文件。我需要将这些格式化为纯文本而不是 html。

目前，我的 html 模板中的东西工作正常，但我无法将其呈现为纯文本。

我的 html 模板中有以下内容：

```
 <div id="network" data-json-url="<%= @nas %>">
 <div id="sampleArea2"></div>
 <script id="network_details" type="text/template">
 <%= simple_format(@location.body) %>
 </script> 
```

其中@location.body 是用户可编辑的文本区域：

```
 option foo {{ location_sausage }}
 option bar '{{ location_sheep }}' 
```

这会输出如下内容：

```
 option foo barbara
 option bar 'margo' 
```

有没有一种简单的方法可以将其转换为纯文本 - 以前，在胡子之前，我只是在我的控制器中使用过：

```
 format.text 
```

- 更新 -

以前使用 erb，我做了这样的事情来将视图中的字段呈现为文本：

```
 <%= (ERB.new(@config.body).result(binding)).html_safe %> 
```

我尝试将其替换为：

```
 <%= Mustache.render(@config.body).html_safe %> 
```

但是请求中没有获取数据。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:17:03.660

我是正确的使用：

```
 <%= Mustache.render(@config.body).html_safe %> 
```

发现我需要更好地定义我的变量：

```
 <%= Mustache.to_html(@config.body, @location).html_safe %> 
```

希望这对那里的人有帮助

# linq - 尝试在 linq 中解析

> ID：13309940
> 
> 赞同：1
> 
> 时间：2012-11-09T14:31:25.297
> 
> 标签：linq, c#-4.0

嗨，我有一个如下的 linq 查询

```
var perChange = (from data in globalDS.Tables[0].AsEnumerable().AsParallel()
              select data.Field<double>("PercentChange")).ToList(); 
```

现在数据集 globalDS 在其中包含 null 和 varchar 值。所以会产生一个明显的类型转换错误。有没有办法尝试。解析“百分比变化”列中的值并仅选择有效字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:35:57.807

[`DataRow.Field`](http://msdn.microsoft.com/de-de/library/bb360891%28v=vs.90%29.aspx)支持可为空的类型：

```
List<double> result = globalDS.Tables[0].AsEnumerable().AsParallel()
             .Where(r  => r.Field<double?>("PercentChange").HasValue)
             .Select(r => r.Field<double?>("PercentChange").Value)
             .ToList(); 
```

**编辑**：既然您提到该字段包含字符串而不是双精度数：

```
List<double> result = globalDS.Tables[0].AsEnumerable().AsParallel()
             .Select(r => r.Field<string>("PercentChange").TryGetDouble())
             .Where(nullDouble => nullDouble.HasValue)
             .Select(nullDouble => nullDouble.Value)
             .ToList(); 
```

我已经使用此扩展来尝试解析一个字符串，`double?`该字符串比将“动态”解析为局部变量更安全，尤其是使用`AsParallel`：

```
public static Double? TryGetDouble(this string item, IFormatProvider formatProvider = null)
{
    if (formatProvider == null) formatProvider = NumberFormatInfo.CurrentInfo;
    Double d = 0d;
    bool success = Double.TryParse(item, NumberStyles.Any, formatProvider, out d);
    if (success)
        return d;
    else
        return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:36:42.217

这个怎么样：

```
double temp;

var perChange = (
     from data in globalDS.Tables[0].AsEnumerable().AsParallel()
     where !data.IsNull("PercentChange")
         && double.TryParse(data.Field<string>("PercentChange"), out temp)
     select double.Parse(data.Field<string>("PercentChange"))
    ).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:42:20.780

尝试使用检查类型的 where 子句进行选择。这将是这样的：`where x != null && TypeOf(x) == double`

# php - Symfony2的关系一对多

> ID：13309946
> 
> 赞同：-1
> 
> 时间：2012-11-09T14:31:44.110
> 
> 标签：php, symfony

我有两张桌子。第一个表是 stat_alert，第二个表是 user_qdf。我在表之间有多对一的关系

我想在我的控制器的外键表中分配值：

```
 $sql9="SELECT cell,id_user FROM stat_alert WHERE TYPE='C' AND id_user IS NULL LIMIT $purcent ";
  $h = mysql_query($sql9)OR DIE("Erreur sur la requeteee");

   $listes9 = array();
   while ($row = mysql_fetch_array($h)) {
     $listes9[] = $row;  
   }

   foreach ($listes9 as $liste9 )
   {
       $user_qdf = $this->getDoctrine()
        ->getRepository('AdminBlogBundle:UserQdf')
        ->find($cs);  
    echo $liste9[0];
       $em = $this->getDoctrine()->getEntityManager();
       $alert = $em->getRepository('AdminBlogBundle:StatAlert')
                    ->findBy(array('cell' => $liste9[0]));
       **$alert->setUser($user_qdf);**

    $em->flush();
   } 
```

我有这个错误致命错误：调用 D:\EasyPHP-5.3.3.1\www\alerteurs1\src\Admin\BlogBu​​ndle\Controller\GestionAlerteController.php 中非对象上的成员函数 setUser() 第 514 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:38:06.150

`findBy()`返回一个集合，而不是一个对象。改用`findOneBy()`它应该没问题。

# sql - 根据字段的值对数据进行分类

> ID：13309947
> 
> 赞同：2
> 
> 时间：2012-11-09T14:31:45.857
> 
> 标签：sql

我有一张像这样的桌子：

```
userid    cityid
1         4
1         5
2         4
2         1
3         1
3         5 
```

SQL或hive中有没有办法将其转换为如下表：

```
userid    city1    city4   city5
1         false    true    true
2         true     true    fase
3         true     false   true 
```

我不确定有什么词可以描述这种操作......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:46:47.410

这基本上是一个`PIVOT`. 您没有指定您使用的 RDBMS，但您可以使用聚合函数和`CASE`语句在任何数据库中获取结果：

```
select userid,
  max(case when cityid = 1 then 'true' else 'false' end) city1,
  max(case when cityid = 2 then 'true' else 'false' end) city2,
  max(case when cityid = 3 then 'true' else 'false' end) city3,
  max(case when cityid = 4 then 'true' else 'false' end) city4,
  max(case when cityid = 5 then 'true' else 'false' end) city5
from yourtable
group by userid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/1b18c/9)

结果：

```
| USERID | CITY1 | CITY2 | CITY3 | CITY4 | CITY5 |
--------------------------------------------------
|      1 | false | false | false |  true |  true |
|      2 |  true | false | false |  true | false |
|      3 |  true | false | false | false |  true | 
```

# iphone - 自动完成搜索

> ID：13309948
> 
> 赞同：0
> 
> 时间：2012-11-09T14:31:48.727
> 
> 标签：iphone, ios6

到目前为止，我已经搜索了这些问题，似乎大多数自动完成问题都与控制台有关。

我们如何自动完成搜索并加载它，如下图所示。我是 xcode 的新手，所以如果你有关于我需要做什么才能让它看起来像这样的说明，那么我将不胜感激。

基本上我有一个空的表格单元格，当我触摸它进行编辑时，应该会出现一个搜索框（在顶部），并且一旦我输入 a，a 的所有值就会显示在下面的各个单元格中。当我看到该值时，我可以选择一个单元格，它将带我回到原始表格并将该值输入该单元格。

单击初始单元格以显示搜索框后的结构是什么

自动完成单元格？

在此之后，我想我存储变量的值，并将其分配给它源自的单元格。

附上一张图片供参考。

先感谢您。![在此处输入图像描述](../Images/6386c50921f69cb32f15cc878de2a453.png)

PS - 要自动完成的列表有几千个值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:58:34.610

对于数千个条目，Core Data 不太可能为您提供良好的性能。相反，您需要将数据加载为有向无环字图 (DAWG)。有关更多信息，请参阅其他答案。

[有向无环图](https://stackoverflow.com/questions/5920371/directed-acyclic-graph/5990451#5990451)

[在 iPhone 上实现地址簿自动完成的最佳方法？](https://stackoverflow.com/questions/5230976/best-way-to-implement-address-book-autocompletion-on-iphone/5244518#5244518)

# html - jQuery Mobile - 如何在搜索栏上获取搜索图标？

> ID：13309955
> 
> 赞同：2
> 
> 时间：2012-11-09T14:32:03.080
> 
> 标签：html, css, jquery-mobile

我正在尝试实现搜索栏
但我**无法**在搜索栏上显示搜索图标。
这是[代码（jsfiddle）](http://jsfiddle.net/cWUfu/)。我发现默认样式覆盖了我的自定义样式。

HTML

```
<div id="search_controls">
    <input type="text" class="search-box" placeholder="e.g. restaurant name, cuisine" />
</div>

input.ui-input-text, textarea.ui-input-text {
background-image: none;
padding: .4em;
margin: .5em 0;
line-height: 1.4;
font-size: 16px;
display: block;
width: 100%;
outline: 0;
} 
```

定制风格

```
#search_controls + input.ui-input-text{
    background: url('../img/search_icon.png') 98% center no-repeat!important;
    height: 26px;
    padding: .4em;
    margin: .5em;
    font-size: 15px;
    display: block;
    width: 99%!important;
    outline: 0;
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T07:58:48.580

用这个

```
<input type="text" class="ui-input-text ui-body-a" name="" id="searchinput1" placeholder=" Search..." value="" data-type="search"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T22:35:51.713

可能我现在知道您的意思了...只需删除`+`自定义 CSS 中的符号即可；-)...

![在此处输入图像描述](../Images/598831cf7b4648aee1cb6d45860ec263.png)

示例代码：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

  <style>
  #search_controls input.ui-input-text{
    background: url('taifun.png') 98% center no-repeat!important;
    height: 26px;
    padding: .4em;
    margin: .5em;
    font-size: 15px;
    display: block;
    width: 99%!important;
    outline: 0;
  }
  </style>
</head>

<body>
  <div data-role="page">
    <div id="search_controls">
      <input type="text" class="search-box" placeholder="e.g. restaurant name, cuisine" />
    </div>
  </div><!-- /page -->

</body>
</html> 
```

# jquery - 结合jquery提高效率

> ID：13309956
> 
> 赞同：3
> 
> 时间：2012-11-09T14:32:07.423
> 
> 标签：jquery

试图在我现在正在照顾的网站上压缩一些编码，并且想知道是否有一种更有效的方法来编写以下编码，因为我意识到信息会加倍。

```
$("span.menu-link-title.active-components").mouseover(function(){$('#active-components-image').css('display', 'block');});
$("span.menu-link-title.active-components").mouseleave(function(){$('#active-components-image').css('display', 'none');});
$("span.menu-link-title.adaptors").mouseover(function(){$('#adaptors-image').css('display', 'block');});
$("span.menu-link-title.adaptors").mouseleave(function(){$('#adaptors-image').css('display', 'none');}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:33:54.223

您可以使用`hover`和`toggle`方法：

```
$("span.menu-link-title.adaptors").hover(function(){
   $('#adaptors-image').toggle();
}); 
```

`hover`是`mouseenter`（*不是 mouseover*）和`mouseleave`事件的简写，它还接受 2 个函数。您还可以缓存对象。

```
var $adapt = $('#adaptors-image');
$("span.menu-link-title.adaptors").hover(function(){
    $adap.show(); // mouseenter
}, function(){
    $adap.hide(); // mouseleave
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:37:37.040

这可能更精简一点：

```
$("span.menu-link-title.active-components").hover(function() {
    $('#active-components-image').toggle();
});
$("span.menu-link-title.adaptors").hover(function() {
    $('#adaptors-image').toggle();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:34:11.963

大多数 jQuery 方法返回对象，允许您链接事件：

```
$("span.menu-link-title.active-components").mouseover(function(){
    $('#active-components-image').css('display', 'block');
}).mouseleave(function(){
    $('#active-components-image').css('display', 'none');
});

$("span.menu-link-title.adaptors").mouseover(function(){
    $('#adaptors-image').css('display', 'block');
}).mouseleave(function(){
    $('#adaptors-image').css('display', 'none');
}); 
```

您可以根据需要创建这样的链。

有关更多信息，请参阅[本文](http://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:39:44.960

利用链接和结束方法，你可以写成

```
$("span.menu-link-title").find(".adaptors").hover(function(){
   $('#adaptors-image').toggle();
}).end().find(".active-components").hover(function(){
   $('#active-components-image').toggle();  
}); 
```

# mysql - 在mysql中存储密码......使用哈希对吗？但是您如何向用户发送忘记的密码？

> ID：13309960
> 
> 赞同：7
> 
> 时间：2012-11-09T14:32:13.697
> 
> 标签：mysql, sql, security, passwords

我一直在研究将用户密码存储在 mysql 中，普遍的答复是使用 MD5 或 SHA1 等加密算法存储它。但是如果用户 x 忘记了她的密码并希望将其发送给她怎么办？然后怎样呢？我无法向她发送 md5 哈希！这个问题在现实世界中是如何处理的。有两个数据库吗？一个比较哈希值，另一个比较忘记密码？但是有什么区别，当时连接到它的sql用户都是只读的。你是怎么做到的？谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T14:36:48.353

从不向用户发送密码是非常标准的安全做法。相反，您提供了一个密码重置实用程序，该实用程序与他们访问其电子邮件帐户的能力和/或回答有关其个人资料的问题（例如安全问题或他们居住的邮政编码）的能力相关联。

功能概要：

1.  用户点击“忘记密码链接”
2.  用户输入安全挑战信息（电子邮件地址、安全问题（如果需要））
3.  系统发送带有自动生成链接的密码重置电子邮件（例如，在查询字符串中生成 GUID）
4.  系统创建一个密码重置记录，其中包含重置 GUID、它的用户以及密钥何时超时。
5.  用户检索电子邮件，点击链接。
6.  系统匹配 GUID，删除密码重置记录，将用户发送到密码重置页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:35:07.357

最好的解决方案是向用户发送一个链接，他们可以在其中输入新密码，而无需输入忘记的密码。

这个链接应该只能工作一次，而且只能工作几个小时。

不要创建新密码并通过邮件发送；用户会很想使用该密码（忽略已通过不安全通道传输的事实）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T15:45:47.857

您是正确的，密码不应该以纯文本形式存储（[它们应该被散列](http://codahale.com/how-to-safely-store-a-password/)），因此不能传递给忘记密码的用户。

本质上，您想要的是一种绕过正常身份验证方案的方法，您首先应该意识到这种机制是应用程序的后门。

通常会假设只有所需的用户才能访问发送到在您的应用程序中注册的电子邮件地址的电子邮件。“标准”密码重置机制正是基于此假设。这是我的看法：

1.  The forgotten password page is requested and the user is asked to enter their registered email address into a form which they then submit
    *   The receiving code checks that the submitted email address is indeed registered and if it is:
        *   delete any existing password reset tokens for this address from the appropriate storage
        *   generate and store a new password reset token for this address
        *   send an email to the user which informs them that
            *   'someone' has requested a password reset
            *   to click the link if they do indeed wish to reset
            *   to ignore the email if they did not request a reset
        *   respond to the form submission with a page which says something along the lines of "**if** the address submitted was registered then a reset email has been sent"
    *   如果提交的地址不是在应用程序中注册的地址，则什么也不做，而是使用一个页面回复提交，该页面显示“**如果**提交的地址已注册，则已发送重置电子邮件” - 就像该地址是有效的（这是为了让某人更难发现在应用程序中注册的电子邮件地址）
2.  然后，用户会收到忘记密码的电子邮件并单击其中的链接。该链接将密码重置令牌传递给应用程序。
3.  收到密码重置令牌后，代码会检查令牌是否存在于存储中并且尚未过期。如果这些都成立，那么您假设必须是提交令牌的注册用户，您可以允许他们设置新密码（带有密码和密码确认输入和提交按钮的简单表单，其中包含零个人信息 -甚至没有他们的名字）。
4.  设置密码后，您可以将用户引导到登录页面，他们可以在其中正常输入凭据。

这不是一个完美的方案。这是安全性和便利性之间的权衡，毫无疑问它构成了应用程序的后门。对于低价值的应用程序，它通常就足够了。

进一步阅读：

*   [https://www.owasp.org/index.php/Forgot_Password_Cheat_Sheet](https://www.owasp.org/index.php/Forgot_Password_Cheat_Sheet)
*   [忘记密码：实现忘记密码功能的最佳方法是什么？](https://stackoverflow.com/questions/522967/forgot-password-what-is-the-best-method-of-implementing-a-forgot-password-funct)
*   [为什么“忘记密码”不好？](https://stackoverflow.com/questions/3083184/why-is-forgotten-password-bad/3083214)

# python - WebDriver：为什么在 find_element_by_xpath 之后 send_keys 不起作用？

> ID：13309964
> 
> 赞同：3
> 
> 时间：2012-11-09T14:32:26.167
> 
> 标签：python, text, selenium, filter, webdriver

我想用 Webdriver 测试一个文本过滤器（用于 Python、Chrome 和 Firefox）。网页上有一个名称列表和一个输入字段。当用户键入文本时，名称列表被过滤，不包含键入文本的名称将被隐藏。当用户按下 Enter/Return 时，最佳匹配名称将被复制到另一个输入字段。首先我输入文本（必须使用 XPath）：

```
textbox = browser.find_element_by_xpath(pathToInputField)
textbox.send_keys(text) 
```

然后检查列表（稍微简化）：

```
for name in names:
    xpath = "//div[contains(text(), '{0}')]".format(name)
    elmIsDisplayed = browser.find_element_by_xpath(xpath).is_displayed()
    if (text in name):
       self.assertTrue(elmIsDisplayed)
    else:
       self.assertFalse(elmIsDisplayed) 
```

到目前为止，它工作正常。之后，我尝试按 Enter/Return：

```
textbox.send_keys(Keys.RETURN) 
```

但是输入字段（由文本框或 find_element_by_xpath 访问）不会得到任何键（既没有返回也没有任何其他字符）。当我删除

```
find_element_by_xpath(xpath) 
```

为了检查名称，复制了正确的名称并且所有的作品。因此，似乎 xpath 搜索另一个元素会阻止第二个 send_keys()。我在这里错过了一些细节还是这是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:46:04.387

只是一个想法，您可以尝试使用 javascript 而不是 send_keys，如下所示：

```
js_code = """
    var eventName = "keypress";
    var keycode = 13;
    var evt = document.createEvent("KeyboardEvent");
    evt.initKeyboardEvent(eventName, true, true, window, false, false, false, false, keycode, keycode);
    this.dispatchEvent(evt);
"""
textbox.evaluateJavaScript(js_code) 
```

# php - 保留变量类型？

> ID：13309965
> 
> 赞同：0
> 
> 时间：2012-11-09T14:32:39.577
> 
> 标签：php, variables, types

我有一个问题需要解决。

我有一个关联数组，例如：

```
private $formData = [
"lastPrintedNumber" => 0,
]; 
```

我从具有函数的文本文件中获取此数据...：

```
$line = fgets( $formDataFile );
$explodedLine = explode( ' ', $linea );
$this->formData[ 'lastPrintedNumber' ] = (int) $explodedLine[2]; 
```

它将正确的类型分配`int`给 $formData[lastPrintdNumber]。

但我不想对分配进行硬编码，而是想做一个`foreach`，在数组中寻找正确的数据。

例子：

```
$line = fgets( $formDataFile ) ) != false ) {
$explodedLine = explode( ' ', $linea );
foreach( $this->formDatos as $key => $value ) {
    if( $explodedLine[0] == $key ) {
        $this->formData[ $key ] = $value;
    }
} 
```

问题是它将值分配为`string`，在某些情况下我需要`int`数学。

所以我需要一种方法来将数据类型稳定为`formData[ 'lastPrintedNumber' ]`永远是`int`。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:34:59.383

只是一个小点：你应该在 中使用`==`，`if`而不仅仅是`=`.

除此之外，它并不像在 JavaScript 中那样重要。在 JS 中，如果你有，`a = "1"; b = "2"; alert(a+b)`你会`12`得到 3，但在 PHP 中，你会得到 3，因为`+`需要数字。

PHP 的类型强制几乎可以自己解决所有问题，因此通常不需要指定特定类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:36:44.030

好吧，它*是*来自文本文件的字符串，文本文件中没有“类型”。如果要将文本值强制转换为更合适的数据类型，则需要测试它们可能最适合的类型。您应该检查某些东西是否适合`int`使用[`ctype_digit`](http://php.net/ctype_digit)，如果适合，则将其转换。

实际上，字符串对于数学运算也可以很好地工作，PHP 会在必要时自动将其转换为数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:33:49.997

你知道如果你想将一个数字的字符串值转换为一个数字变量使用

```
intval($myvar); 
```

# python - 运算符 python 参数

> ID：13309966
> 
> 赞同：7
> 
> 时间：2012-11-09T14:32:49.680
> 
> 标签：python, function, parameters

在 Python 中，如何将类似`+`或`<`作为参数的运算符传递给需要比较函数作为参数的函数？

```
def compare (a,b,f):
    return f(a,b) 
```

我已经阅读过类似的功能`__gt__()`，`__lt__()`但我仍然无法使用它们。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T14:35:04.110

[操作员模块](http://docs.python.org/dev/library/operator.html)是您正在寻找的。在那里您可以找到与常用运算符相对应的函数。

例如

```
operator.lt
operator.le 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T14:35:31.023

[为此目的使用操作员模块](http://docs.python.org/2/library/operator.html)

```
import operator
def compare(a,b,func):

    mappings = {'>': operator.lt, '>=': operator.le,
                '==': operator.eq} # and etc. 
    return mappingsp[func](a,b)

compare(3,4,'>') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T15:58:17.753

使用 lambda 条件作为方法参数：

```
>>> def yourMethod(expected_cond, param1, param2):
...     if expected_cond(param1, param2):
...             print 'expected_cond is true'
...     else:
...             print 'expected_cond is false'
... 
>>> condition = lambda op1, op2: (op1 > op2)
>>> 
>>> yourMethod(condition, 1, 2)
expected_cond is false
>>> yourMethod(condition, 3, 2)
expected_cond is true
>>> 
```

# hibernate - 在 Hibernate 中，方法链是什么？

> ID：13309969
> 
> 赞同：1
> 
> 时间：2012-11-09T14:33:13.413
> 
> 标签：hibernate

在 Hibernate 上下文中，方法链接是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:35:29.277

在其他情况下的含义相同。

`thing.meth1().meth2().meth3()....`

请注意，`meth`必须返回具有方法的东西，`meth2`依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:13:36.363

方法链是许多 Hibernate 接口支持的一种编程风格（参见 @hvgotcodes 示例）。如果您确实使用这种编码风格，最好将每个方法调用写在不同的行上。

```
SessionFactory sessionFactory = new Configuration()
.configure("hibernate.cfg.xml")
.addResource("test.hbm.xml")
.buildSessionFactory(); 
```

否则，可能很难在调试器中单步执行代码。

# mysql - MySQL InnoDB 中子组中的最佳行数

> ID：13309971
> 
> 赞同：1
> 
> 时间：2012-11-09T14:33:26.300
> 
> 标签：mysql, innodb

我需要减少表中每个用户的条目数，只为每个用户留下最新的条目（比如 10 个）。它需要对子组中的条目进行编号（由 定义`user_id`），这在 MySQL 中是一项相当棘手的任务。我试过这样的事情：

```
SET
    @prev_user := '',
    @counter := 0
;

INSERT tmp_table_ordered
SELECT
    @counter := CASE WHEN @prev_user = user_id THEN @counter + 1 ELSE 1 END AS counter,
    @prev_user := user_id AS prev_user,
    entry_id, timestamp, user_id, field_1, field_2
FROM table
ORDER BY user_id, timestamp DESC
; 
```

它在某些测试表（约 200 万条记录）上与 MyISAM（约 20 秒）配合得很好，但是当我切换到 InnoDB 时，执行时间增加了一个数量级（约 6 分钟）。我尝试涉足索引，但它只会延长任务。这段代码不是最优的吗？是否有可能更好地解决任务？

编辑：

我非常确定是变量的处理减慢了我什至没有测试过的查询。令我惊讶的是，减慢查询速度的不是变量。甚至不是慢的选择，而是插入 InnoDB 表需要很多时间！如果只有目标表类型是 MyIsam，则插入时间又快了。

再次编辑：

原表如下：

```
CREATE TABLE IF NOT EXISTS `table` (
  `entry_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `user_id` int(11) unsigned NOT NULL,
  `field_1` int(10) unsigned DEFAULT '0',
  `field_2` int(11) unsigned NOT NULL,
  PRIMARY KEY (`entry_id`),
) ENGINE=InnoDB  DEFAULT CHARSET=ascii COLLATE=ascii_bin; 
```

临时表的创建方式如下：

```
CREATE TABLE `tmp_table_ordered` LIKE `table`; 
```

# c# - 慢线程电子邮件发件人

> ID：13309973
> 
> 赞同：1
> 
> 时间：2012-11-09T14:33:40.417
> 
> 标签：c#, asp.net-mvc, email, iis-7

我制作了一个 Razor MVC3 网站，可以从中发送电子邮件。

我创建了一个服务来获取所有用户和电子邮件信息，并启动一个发送格式化电子邮件的线程。
我制作了自己的线程池。

在我的电脑上一切正常。我每秒都发送电子邮件。
但是当我在我的亚马逊服务器 ec2 上部署我的网站时，电子邮件发送变得如此缓慢（3 分钟/邮件）并且我的一半电子邮件都失败了。

亚马逊服务器比我的电脑强大得多。带宽也一样。我不知道这是一个 IIS 还是一个线程配置，而不是我错过的。

有任何想法吗？

//----------------- 代码发送电子邮件------------------------

```
using (SmtpClient smtp = new SmtpClient()
{
      Host = serverSMTP,
      Port = 25,
      EnableSsl = false,
      DeliveryMethod = SmtpDeliveryMethod.Network,
      Credentials = new NetworkCredential(senderAddress.Address, carteiraPassword),
      Timeout = 10000
 })
 {
      ServicePointManager.ServerCertificateValidationCallback = delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; }; //test
      smtp.Send(message);
 } 
```

//------------------类线程------------------------

```
public class MyThread
{
    #region Param
    public string Id { get; set; }
    public RunNewThread RunThreadDelegate;        
    private System.Threading.Thread Thread { get; set; }
    #endregion

    public SiscobThread(RunNewThread RunThreadDelegate)
    {
        this.RunThreadDelegate = RunThreadDelegate;
    }

    public void Init()
    {
        this.Thread = new System.Threading.Thread(this.RunThread);
        MsgManager.Instance.SendError("Thread born " + this.Id, null);
    }

    private void RunThread()
    {
        this.RunThreadDelegate();
    }

    public void Start()
    {
        this.Thread.Start();
    }

    public void Stop()
    {
        this.Thread.Abort();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:35:26.217

与亚马逊核实。我很确定他们会限制出站电子邮件连接，除非您与他们一起填写表格，说明您的应用程序中电子邮件的用途。

这是为了让垃圾邮件发送者更难以简单地启动新实例并广播他们的垃圾。

我仔细看了看：http:
[//aws.amazon.com/ec2/faqs/#Are_there_any_limitations_in_sending_email_from_EC2_instances](http://aws.amazon.com/ec2/faqs/#Are_there_any_limitations_in_sending_email_from_EC2_instances)

**每个亚马逊：**

> 是的。为了保持 EC2 地址发送电子邮件的质量，我们对可以从 EC2 账户发送的电子邮件数量实施默认限制。如果您希望从 EC2 发送大量电子邮件，您可以通过[填写此表格](https://portal.aws.amazon.com/gp/aws/html-forms-controller/contactus/ec2-email-limit-rdns-request)申请从您的账户中删除这些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:53:51.407

谢谢是这个。我在一天结束时收到：

> 尊敬的 EC2 客户，您最近达到了可以从实例上的 SMTP 端口 25 发送的电子邮件量的限制：
> 
> 实例 ID：xxxxxxxx * IP 地址：xxxxxxxx * 开始日期：xxxxxxxx
> 
> 为了保持 EC2 地址发送电子邮件的质量，我们对可以从 EC2 账户发送的电子邮件数量实施默认限制。如果您希望从 EC2 发送大量电子邮件，您可以通过填写我们的在线申请表申请从您的账户中删除这些限制。
> 
> 如果您不知道您的实例已发送电子邮件，我们建议检查您的实例应用程序以确认此活动是有意的。您有责任确保您的实例和所有应用程序受到保护以防止未经授权的使用。有关保护您的实例的建议，请访问 aws.amazon.com/security。
> 
> 此致，您的 Amazon Web Services EC2 团队

# ruby - 在哪里存储许多类似 sinatra 应用程序的配置

> ID：13309975
> 
> 赞同：3
> 
> 时间：2012-11-09T14:33:42.320
> 
> 标签：ruby, sinatra, setup-deployment

我有大约 130 个 sinatra Web 应用程序在 apache-passenger 服务器集群上运行。所有这些应用程序都是从通用代码库中克隆出来的，然后修改为拥有自己的身份验证密钥。除了身份验证密钥之外，大多数应用程序没有修改。单独应用程序的优点是我可以非常快速地对特定应用程序进行更改，而不会冒其他应用程序停机的风险。

但是，这些身份验证密钥本质上是配置。将配置存储在代码库中既不方便又直观上是错误的。我探索过的替代选项包括将配置存储在数据库中并将其缓存在内存中、每个应用程序的 apache 环境变量和共享的 json 文件。

有更好的选择吗？我错过了什么陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:05:14.987

听起来环境变量可能最适合您的目的，然后可以在您的应用程序中访问它，如下所示：

```
$ APPNAME_AUTH_KEY="saf3t33553" ruby -e "puts ENV['APPNAME_AUTH_KEY']"
saf3t33553 
```

共享位置中的 JSON 文件，甚至是普通的 ruby​​ 文件也可以解决问题。将配置存储在数据库中听起来有点矫枉过正。

如果您想更深入地研究，这是我已经写了很多的主题：

编写可配置的应用程序（[第 1](https://practicingruby.com/articles/shared/xpylcrvtrexl)部分，[第 2 部分](https://practicingruby.com/articles/shared/psudcyhgnkcj)）（尤其请参阅第 2 部分中的“使用 Shell 环境进行配置”部分）

# mysql - 停止 MySQL 命令行的终端输出

> ID：13309976
> 
> 赞同：0
> 
> 时间：2012-11-09T14:33:44.413
> 
> 标签：mysql, command-line, terminal, output

在 Mac Mountain Lion 的终端上，我正在运行以下命令：

```
mysql -h localhost -u root -p -B database | gunzip < db.sql.gz 
```

它执行得很好并且创建了数据库，但文件内容被放入标准输出，所以我看到内容在执行时被吐到终端窗口中。

谁能告诉我关闭终端输出的开关？我已经用谷歌搜索了这个，但我无法弄清楚。此外，现在将在此处记录给其他人；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:36:10.520

你有向后的命令。数据流经左->右管道：

```
gzcat db.sql.gz | mysql -h localhost -u root -p -B database 
```

同样，gunzip 解压缩文件，但不输出其内容。使用 gzcat 来简单地将解压缩的内容转储到标准输出。然后`|`管道“捕获”该输出并将其重定向到 mysql，后者将其用作输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:39:57.943

按照命令

```
 > /dev/null 
```

并且正常输出被抑制，但仍然显示错误

按照命令

```
 > /dev/null 2>&1 
```

一切，包括错误都被抑制

# sql - 从左外连接返回一行

> ID：13309977
> 
> 赞同：4
> 
> 时间：2012-11-09T14:33:43.553
> 
> 标签：sql, oracle11g

我有以下工作正常：

```
SELECT mcr.mat_change_req_id, mcr.line_item_number
    , r.remarks, r.remarks_date
FROM mat_change_req mcr
    left outer join mat_change_req_remarks r ON mcr.mat_change_req_id = r.mat_change_req_id
WHERE mcr.contract_id = 'IR-30910'
    AND
    mcr.project_number = '0801082' 
```

问题是表 mat_change_req_remarks (r) 与 mat_change_req (mcr) 具有多对一的关系，因此如果 r 有多行，则上述查询为 r 中的每个倍数返回一行。
如果 MIN(r.remarks_date) 有多个，我只想从 r 返回一行。r.remarks_date 是一个日期字段。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T14:40:47.613

像这样的东西：

```
SELECT mcr.mat_change_req_id, 
       mcr.line_item_number, 
       r.remarks, 
       r.remarks_date
FROM mat_change_req mcr
    left outer join (
      select mat_change_req_id, 
             remarks,
             remarks_date,
             row_number() over (partition by mat_change_req_id order by remarks_date) as rn
      from mat_change_req_remarks
    ) r ON mcr.mat_change_req_id = r.mat_change_req_id and r.rn = 1
WHERE mcr.contract_id = 'IR-30910'
  AND mcr.project_number = '0801082' 
```

# autosuggest - Freebase 自动建议排除类型

> ID：13309983
> 
> 赞同：1
> 
> 时间：2012-11-09T14:34:11.917
> 
> 标签：autosuggest, freebase

是否可以从 freebase 自动建议中排除某些类型？

这是我的通用代码，

```
$("#myInput")
 .suggest({"key":API_KEY})
 .on("fb-select", function(e, data) {//blah blah}); 
```

可以做类似的事情（这不起作用）

```
 $("#myInput")
 .suggest({"key":API_KEY,"filter":"(any type:-/business)"})
 .on("fb-select", function(e, data) {//blah blah}); 
```

或者

```
 $("#myInput")
 .suggest({"key":API_KEY,"filter":"(exclude type:/business)"})
 .on("fb-select", function(e, data) {//blah blah}); 
```

如果有人有任何想法：D谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:06:12.740

试试`(not type:/business)`。我还没有为整个域尝试过，但这是一种类型的语法。

# wordpress - 带付费订阅选项的 Wordpress 多站点

> ID：13309985
> 
> 赞同：1
> 
> 时间：2012-11-09T14:34:24.970
> 
> 标签：wordpress, wordpress-theming

我已经将我的 Wordpress 站点配置为使用子文件夹的多站点，并且我正在考虑如何将其配置为使用 Paypal 的每月订阅站点，用户可以在其中销售自己的产品。

我有 2 种方式（到目前为止）考虑订阅模型。

1) 用户在没有先付款的情况下无法创建网站。他们可以注册为主站点的订阅者。也许他们可以发表评论和/或回复他人的评论。如果我走这条路，我将需要一种允许注册用户购买每月订阅的方法。那时我将不得不提供他们的网站。

2) 用户无需付费即可创建网站，但无法使用他们的网站出售他们的商品。

无论我采用哪种方式选择这 2 个选项，我都想提供不同的订阅费率 - 1 个月、3 个月、6 个月和 1 年 - 每个都有价格中断。除了订阅时间段之外，我正在考虑可能还有其他条款。就像他们可以订阅一个基本计划，我将获得他们销售额的一定百分比（可能是 3%-5%），以及一个更昂贵的计划，我没有百分比。

我希望订阅插件足够聪明，可以使帐户过期，并能够向用户发送通信。例如等待自动续订的通知，或订阅实际上已过期，无法从他们的信用卡收费，已收费的收据等。

有没有人知道一个 Wordpress 插件可以做一些/大部分/所有这些事情？或者有没有人知道如何使用多个插件来解决这个问题？

我现在只是在研究选项，所以我全神贯注于想法和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:37:02.300

在对 wordpress.org 论坛进行了简要研究之后，我认为您应该看看 [http://wordpress.org/extend/plugins/s2member/](http://wordpress.org/extend/plugins/s2member/)

# asp.net - 部署 ASP 应用程序后出现 SQL 错误

> ID：13309987
> 
> 赞同：0
> 
> 时间：2012-11-09T14:34:26.327
> 
> 标签：asp.net, sql, deployment, membership

嗨，我在部署后无法成功登录我的应用程序。我正在使用 ASP MVC 默认登录和成员资格提供程序，它正在我的本地主机上运行。但是部署后我尝试登录，然后显示错误。

*

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
> 
> *描述：在执行当前 Web 请求期间发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> SQLExpress 数据库文件自动创建错误：连接字符串使用应用程序 App_Data 目录中的数据库位置指定本地 Sql Server Express 实例。提供者试图自动创建应用程序服务数据库，因为提供者确定该数据库不存在。成功检查应用程序服务数据库是否存在并自动创建应用程序服务数据库需要以下配置要求：
> 
> 1.  如果应用程序在 Windows 7 或 Windows Server 2008R2 上运行，则需要特殊的配置步骤来启用提供程序数据库的自动创建。其他信息可在以下网址获得：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=160102) ?LinkId=160102 。
>     
>     
> 2.  如果应用程序的 App_Data 目录尚不存在，则 Web 服务器帐户必须具有对应用程序目录的读写权限。这是必要的，因为如果 App_Data 目录不存在，Web 服务器帐户将自动创建它。如果应用程序的 App_Data 目录已经存在，则 Web 服务器帐户只需要对应用程序的 App_Data 目录具有读写权限。这是必要的，因为 Web 服务器帐户将尝试验证 Sql Server Express 数据库是否已存在于应用程序的 App_Data 目录中。从 Web 服务器帐户撤消对 App_Data 目录的读取访问权限将阻止提供程序正确确定 Sql Server Express 数据库是否已存在。当提供程序尝试创建现有数据库的副本时，这将导致错误。需要写入权限，因为在创建新数据库时会使用 Web 服务器帐户的凭据。
>     
>     
> 3.  机器上必须安装 Sql Server Express。
>     
>     
> 4.  Web 服务器帐户的进程标识必须具有本地用户配置文件。有关如何为计算机和域帐户创建本地用户配置文件的详细信息，请参阅自述文件。*

*

如果有人知道如何解决这个问题，我会很高兴。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:38:31.440

如果将其部署到外部网络服务器，则必须调整 web.config 中的连接字符串设置

# c - 每当客户端断开连接时，多线程服务器不会继续执行

> ID：13309991
> 
> 赞同：1
> 
> 时间：2012-11-09T14:34:47.460
> 
> 标签：c, multithreading, network-programming, posix

您好，我正在使用 C 语言开发多线程服务器 (TCP)，对此我有一点问题。一切正常，多个线程可以连接到服务器，但是每当客户端写入“exit”（这是客户端写入“exit”字符串时的条件，他/她会断开与服务器的连接）服务关闭本身也。因此，通过其他线程的通信会丢失。但是，从逻辑上讲，即使某些当前客户端断开连接，它也应该等待其他客户端。这是 main 的一部分，服务器处于等待客户端的无限循环中。`hsock`是socket的id属于服务器，`csock`是客户端的id。

```
main(){
.
.
.

while(1){

    if(counter==0)
        printf("waiting for a connection\n");

    csock = (int*)malloc(sizeof(int));

    if((*csock = accept( hsock, (struct sockaddr*)&sadr, &addr_size))!= -1){
    printf("---------------------\nReceived connection from %s\n",inet_ntoa(sadr.sin_addr));
        pthread_create(&thread_id,0,&SocketHandler, (void*)csock );
        counter++;
    }

    else{
     fprintf(stderr, "Error accepting %d\n", errno);
    }
        }// end while
.
.
.
return 0
} 
```

正如您所看到的，每当客户端断开连接时，服务器应该继续等待另一个线程。另一方面，这是`SocketHandler`函数的最后一部分，它是一个线程函数。

```
void* SocketHandler(void* csock){
.
.
.

        printf("Client disconnected\n");
        free(csock);
        return 0;
    } 
```

After`return 0`语句不是必须返回到`while(1)`main 中的循环。如果你能提供帮助，我会很高兴，无论如何，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:57:05.570

线程一旦创建就会异步运行，这意味着主线程（执行 的线程`accept`）应该继续循环并返回接受新连接，无论子线程做什么。

一些建议：

*   如果您的线程可以自主运行，请`pthread_detach`在创建后使用以让线程优雅地处理自己的终止。
*   不要忘记`close(csock)`在结束线程之前做一个。
*   您不一定需要分配包含套接字描述符的 int ，只需将其作为`void *`直接传递（但我猜您将在未来版本的代码中传递更多信息，而不仅仅是结构中的套接字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:57:07.797

> 在 return 0 语句之后是否有必要返回 main 中的 while(1) 循环。

不，线程退出。它与其他线程中发生的事情无关。

当您没有向客户端显示任何处理网络的代码时，我看不出您如何期望任何人帮助您解决客户端断开连接时发生的网络问题。

# vba - 将 Access 查询结果导出到 csv

> ID：13309994
> 
> 赞同：3
> 
> 时间：2012-11-09T14:34:57.587
> 
> 标签：vba, ms-access

我有一个访问数据库，它处理来自 Magento 电子商务商店的数据，重新格式化数据并（希望！）吐出一个 CSV 文件，然后可以将其导入 ebay Turbolister 以大量上传到 eBay。

我已经创建了一个查询，该查询将数据正确排列为 Turbolister 所需的格式。

我的问题多种多样（包括一些似乎与 Access 处理大字段内容有关的问题），但是我的问题的症结在于我正在努力使用一个简单的脚本来将查询结果导出为格式正确的 CSV（包括在文本值内需要的地方加倍双引号，即如果值本身包含需要保留的引号）。

DoCmd.TransferText 解决方案引发与字段大小相关的错误（“该字段太小，无法接受您尝试添加的数据量”），所以这不好。

有没有人可以建议他们在 VBA 中使用良好的 CSV 导出例程？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:51:45.443

这是我有时使用的一个旧函数，它允许您指定分隔符，它还检查它输出的数据，如果它不能被评估为日期或数字等，那么它使用双引号：

```
Public Function ExportTextDelimited(strQueryName As String, strDelimiter As String)

Dim rs          As Recordset
Dim strHead     As String
Dim strData     As String
Dim inti        As Integer
Dim intFile     As Integer
Dim fso         As New FileSystemObject

On Error GoTo Handle_Err

    fso.CreateTextFile ("C:\Untitled.csv")

    Set rs = Currentdb.OpenRecordset(strQueryName)

    rs.MoveFirst

    intFile = FreeFile
    strHead = ""

    'Add the Headers
    For inti = 0 To rs.Fields.Count - 1
        If strHead = "" Then
            strHead = rs.Fields(inti).Name
        Else
            strHead = strHead & strDelimiter & rs.Fields(inti).Name
        End If
    Next

    Open "C:\Untitled.csv" For Output As #intFile

    Print #intFile, strHead

    strHead = ""

    'Add the Data
    While Not rs.EOF

        For inti = 0 To rs.Fields.Count - 1
            If strData = "" Then
                strData = IIf(IsNumeric(rs.Fields(inti).value), rs.Fields(inti).value, IIf(IsDate(rs.Fields(inti).value), rs.Fields(inti).value, """" & rs.Fields(inti).value & """"))
            Else
                strData = strData & strDelimiter & IIf(IsNumeric(rs.Fields(inti).value), rs.Fields(inti).value, IIf(IsDate(rs.Fields(inti).value), rs.Fields(inti).value, """" & rs.Fields(inti).value & """"))
            End If
        Next

        Print #intFile, strData

        strData = ""

        rs.MoveNext
    Wend

        Close #intFile

rs.Close
Set rs = Nothing

'Open the file for viewing
Application.FollowHyperlink "C:\Untitled.csv"   

Exit Function

Handle_Err:
MsgBox Err & " - " & Err.Description

End Function 
```

它可能需要一些调整，因为我已经删除了一些仅与我的特定案例相关的部分，但这可能是一个起点。

# objective-c - 具有不同自定义单元格的表格视图

> ID：13309995
> 
> 赞同：0
> 
> 时间：2012-11-09T14:34:59.057
> 
> 标签：objective-c, ios

我有一个带有表格视图的视图控制器，在情节提要中设计，该表格视图使用三个不同的自定义单元格，每个单元格用于三个不同的部分。我已将每个自定义单元格定义为原型单元格，为每个单元格使用不同的标识符，并在 Xcode 中的每个单元格中定义一个自定义单元格对象，由 Interface Builder 与每个单元格的每个控件链接。

我已将自定义单元格作为部分顺序放置，您可以在此处查看。每个标记的正方形都是一个自定义原型单元。

![在此处输入图像描述](../Images/cf9bacfe1b80c65059cf57cf761e55d5.png)

这是表格视图代码：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 3;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (indexPath.section==2){
            return 40;
        }else if (indexPath.section==1){
            return 40;
        } else if (indexPath.section==0){
            return 205;

        }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section==0){
        return 1;
    } else if (section==1){
        return [[selectedTeam valueForKey:@"jugadores"]count];
    } else if (section==2){
        return [[selectedTeam valueForKey:@"tecnicos"]count];
    }

}

- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (indexPath.section==0){

        NSString *imageService = @"http://backend.exular.net/contenido/";

        imageCell *cellImage = [table dequeueReusableCellWithIdentifier:@"imatge"];

        if (cellImage == nil) {
            cellImage = [[imageCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"imatge"];
        }

        cellImage.leagueName.text = [selectedTeam valueForKey:@"nom"];

        NSString *path= [[NSString stringWithFormat:@"%@%@" ,imageService,  [selectedTeam valueForKey:@"img"]] stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

        [cellImage.teamPicture  setImageWithURL:[NSURL URLWithString:path] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

        imageService=nil;

        return cellImage;

    } else if (indexPath.section==1){

         teamCell *cellTeam = [table dequeueReusableCellWithIdentifier:@"equipo"];

         if (cellTeam == nil) {
             cellTeam = [[teamCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"equipo"];
         }

         NSDictionary *teamDic =  [[selectedTeam valueForKey:@"jugadores"] objectAtIndex:indexPath.row];

         cellTeam.name.text = [teamDic valueForKey:@"nom"];

         cellTeam.height.text = [teamDic valueForKey:@"height"];

         cellTeam.number.text = [teamDic valueForKey:@"altura"];

         cellTeam.date.text = [teamDic valueForKey:@"date"];

         cellTeam.position.text = [teamDic valueForKey:@"posicion"];

         return cellTeam;

    } else if (indexPath.section==2){

        NSString *CellIdentifier = @"staff";

        staffCell *cellStaff = [table dequeueReusableCellWithIdentifier:@"staff"];

        if (cellStaff == nil) {
            cellStaff = [[staffCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"staff"];
        }

        NSDictionary *staffDic = [[selectedTeam valueForKey:@"tecnicos"] objectAtIndex:indexPath.row];

        cellStaff.name.text = [staffDic valueForKey:@"nom"];

        cellStaff.role.text = [staffDic valueForKey:@"posicion"];

        return cellStaff;

    }

    return nil;
} 
```

Xcode 给了我这个错误：`Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<teamCell 0x8d4f6b0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key role.'`执行中断

```
teamCell *cellTeam = [table dequeueReusableCellWithIdentifier:@"equipo"]; 
```

我会感谢你的帮助。

非常感谢。

# struts2 - 如何为 optionCollection 使用 escapeXML

> ID：13309997
> 
> 赞同：0
> 
> 时间：2012-11-09T14:35:00.107
> 
> 标签：struts2, struts, option

我正在使用struts2。我想出了这个问题。

我有这个代码

```
<html:optionsCollection name="items" label="${itemsLabel}" value="${itemsId}"/> 
```

这里的变量 items（bean 的集合）， itemsLabel（bean 的属性）。

如何在这段代码中使用 escapeXML？

我计划通过遍历项目将此 optionsCollection 更改为选项数组。但我不知道如何使用两个 EL 表达式并检索 bean 对象的属性。

任何帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:21:27.270

正如 Jaiwo99 所说，它看起来不像 struts 2 标签。但是对于 s:property 标签，有一个布尔类型的 escapeXml 选项。

请通过以下链接了解更多信息。

[http://struts.apache.org/2.2.1/docs/property.html](http://struts.apache.org/2.2.1/docs/property.html)

# php - .htaccess 多域重写

> ID：13309999
> 
> 赞同：3
> 
> 时间：2012-11-09T14:35:00.197
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

我正在寻找一种解决方案来支持一个虚拟主机帐户上的多个域，这必须通过 htaccess 来完成。所以想法是，您调用 domainx 并使用 htaccess 服务器将 webroot“伪造”到与域名对应的子文件夹。我已经有了一个“解决方案”，但这并不完美。

我遇到的问题：

1.  通过 PHP 重定向（使用 CodeIginiter 的 base_url()），导致；例如“http://www.domein1.nl/domein1.nl/”。
2.  它在我的本地服务器上不起作用。

**所以，我目前正在使用的 htaccess：**

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} domein1.nl$ [NC]
RewriteCond %{REQUEST_URI} !^/domein1.nl/.*$
RewriteRule ^(.*)$ /domein1.nl/$1 [L]

RewriteCond %{HTTP_HOST} domein2.nl$ [NC]
RewriteCond %{REQUEST_URI} !^/domein2.nl/.*$
RewriteRule ^(.*)$ /domein2.nl/$1 [L]

</IfModule> 
```

**base_url() 的 CodeIgniter PHP 代码。**服务器变量“SCRIPT_NAME”添加了第二个域文件夹，标记为问题 1。如果根文件夹被正确伪造，则不会发生这种情况；但这真的可能吗？

```
if (isset($_SERVER['HTTP_HOST']))
{
$base_url = isset($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) !== 'off' ? 'https' : 'http';
$base_url .= '://'. $_SERVER['HTTP_HOST'];
$base_url .= str_replace(basename($_SERVER['SCRIPT_NAME']), '', $_SERVER['SCRIPT_NAME']);
} 
```

最后但并非最不重要的一点是，当我通过主机文件进行重定向时，它不能在我的本地服务器上运行：

```
192.168.2.9 local.domein1.nl
192.168.2.9 local.domein2.nl 
```

Sooo.. 我该如何解决这些问题？提前致谢！

编辑：我的本地服务器的问题是固定的..*咳嗽*“sudo a2enmod rewrite”成功了..

**Edit2：自从stormdrain 开始讨论文件夹结构以来，这里是我的澄清多个CI 应用程序。**

*主要 .htaccess 位置/webroot*

```
/public_html/.htaccess 
```

*域1：*

```
/application/domain1/ (domain1 application path)
/application/system/ (shared system path)
/public_html/domain1/index.php (CI domain1 index) 
```

*域2：*

```
/application/domain2/ (domain2 application path)
/application/system/ (shared system path)
/public_html/domain2/index.php (CI domain2 index) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:11:47.237

目前尚不清楚您要做什么。听起来您有多个域名指向同一个服务器，您没有完全控制权，因此无法设置 VirtualHosts。您还希望使用单个应用程序为域提供服务，并且不将子文件夹作为 URL 的一部分（例如，您不希望[http://www.domain1.nl/domain1.nl](http://www.domain1.nl/domain1.nl)作为 URL 的主页）。

如果是这样，这可能会起作用：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteCond %{HTTP_HOST} domein1.nl$ [NC]
    RewriteRule ^(.*)$ /domein1/$1 [L]

    RewriteCond %{HTTP_HOST} domein2.nl$ [NC]
    RewriteRule ^(.*)$ /domein2/$1 [L]

</IfModule> 
```

然后在 CodeIgniter 中创建路由来路由请求：

```
$route["/domein2/(:any)"] = "/domein2/$1"; 
```

要使重写在本地工作，您需要将域添加到`.htaccess`文件中：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteCond %{HTTP_HOST} local.domein1.nl$ [NC]
    RewriteRule ^(.*)$ /domein1/$1 [L]

    RewriteCond %{HTTP_HOST} local.domein2.nl$ [NC]
    RewriteRule ^(.*)$ /domein2/$1 [L]

</IfModule> 
```

然后 base_url 不需要 SCRIPT_NAME，因为它正在被重写并从 URL 中路由出去：

```
if (isset($_SERVER['HTTP_HOST']))
{
    $base_url = isset($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) !== 'off' ? 'https' : 'http';
    $base_url .= '://'. $_SERVER['HTTP_HOST']. '/';
} 
```

* * *

更新。

如果每个域都有一个 CI 文件夹，例如：

`/var/www/domain1/index.php`
`/var/www/domain1/application/`
`/var/www/domain1/system/`
等等

`/var/www/domain2/index.php`
`/var/www/domain2/application/`
`/var/www/domain2/system/`
等等

```
RewriteCond %{HTTP_HOST} domain1.nl$ [NC]
RewriteRule ^(.*)$ /domain1/$1 [L]

RewriteCond %{HTTP_HOST} domain2.nl$ [NC]
RewriteRule ^(.*)$ /domain2/$1 [L] 
```

应该为你做这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:44:10.370

好吧，似乎不可能通过 htaccess 巧妙地做到这一点..

哦，好吧，我“修复”了它。**我在 CodeIgniter index.php 中的修复：**我用下面的代码替换了变量 $application_folder 的声明。

```
define('DOMAIN', preg_replace(
    "/^(www.|local.)?([^.]+).[^.]+$/i", "\\2",
    $_SERVER['HTTP_HOST']
));

if ( DOMAIN == 'domain2')
    $application_folder = '../application/domain2';
else
    $application_folder = '../application/domain1'; 
```

我还对系统“url_helper”做了一个小改动。添加了这个“static_url()”函数，将 URI 返回到我保存图像/CSS/js 等的路径。

```
if ( ! function_exists('static_url'))
{
    function static_url()
    {
        return base_url().'static/'.DOMAIN.'/';
    }
} 
```

我必须弄清楚的唯一小事是如何拆分 robots.txt 之类的内容